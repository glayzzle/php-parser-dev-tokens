[["T_OPEN_TAG","<?php\n",1],["T_DOC_COMMENT","\/**\n * Magento\n *\n * NOTICE OF LICENSE\n *\n * This source file is subject to the Open Software License (OSL 3.0)\n * that is bundled with this package in the file LICENSE.txt.\n * It is also available through the world-wide-web at this URL:\n * http:\/\/opensource.org\/licenses\/osl-3.0.php\n * If you did not receive a copy of the license and are unable to\n * obtain it through the world-wide-web, please send an email\n * to license@magento.com so we can send you a copy immediately.\n *\n * DISCLAIMER\n *\n * Do not edit or add to this file if you wish to upgrade Magento to newer\n * versions in the future. If you wish to customize Magento for your\n * needs please refer to http:\/\/www.magento.com for more information.\n *\n * @category    Mage\n * @package     Mage_ImportExport\n * @copyright  Copyright (c) 2006-2016 X.commerce, Inc. and affiliates (http:\/\/www.magento.com)\n * @license    http:\/\/opensource.org\/licenses\/osl-3.0.php  Open Software License (OSL 3.0)\n *\/",2],["T_WHITESPACE","\n\n",25],["T_DOC_COMMENT","\/**\n * Import entity abstract model\n *\n * @category    Mage\n * @package     Mage_ImportExport\n * @author      Magento Core Team <core@magentocommerce.com>\n *\/",27],["T_WHITESPACE","\n",33],["T_ABSTRACT","abstract",34],["T_WHITESPACE"," ",34],["T_CLASS","class",34],["T_WHITESPACE"," ",34],["T_STRING","Mage_ImportExport_Model_Import_Entity_Abstract",34],["T_WHITESPACE","\n",34],"{",["T_WHITESPACE","\n    ",35],["T_DOC_COMMENT","\/**\n     * Database constants\n     *\n     *\/",36],["T_WHITESPACE","\n    ",39],["T_CONST","const",40],["T_WHITESPACE"," ",40],["T_STRING","DB_MAX_PACKET_COEFFICIENT",40],["T_WHITESPACE"," ",40],"=",["T_WHITESPACE"," ",40],["T_LNUMBER","900000",40],";",["T_WHITESPACE","\n    ",40],["T_CONST","const",41],["T_WHITESPACE"," ",41],["T_STRING","DB_MAX_PACKET_DATA",41],["T_WHITESPACE","        ",41],"=",["T_WHITESPACE"," ",41],["T_LNUMBER","1048576",41],";",["T_WHITESPACE","\n    ",41],["T_CONST","const",42],["T_WHITESPACE"," ",42],["T_STRING","DB_MAX_VARCHAR_LENGTH",42],["T_WHITESPACE","     ",42],"=",["T_WHITESPACE"," ",42],["T_LNUMBER","256",42],";",["T_WHITESPACE","\n    ",42],["T_CONST","const",43],["T_WHITESPACE"," ",43],["T_STRING","DB_MAX_TEXT_LENGTH",43],["T_WHITESPACE","        ",43],"=",["T_WHITESPACE"," ",43],["T_LNUMBER","65536",43],";",["T_WHITESPACE","\n\n    ",43],["T_DOC_COMMENT","\/**\n     * DB connection.\n     *\n     * @var Varien_Adapter_Interface\n     *\/",45],["T_WHITESPACE","\n    ",49],["T_PROTECTED","protected",50],["T_WHITESPACE"," ",50],["T_VARIABLE","$_connection",50],";",["T_WHITESPACE","\n\n    ",50],["T_DOC_COMMENT","\/**\n     * Has data process validation done?\n     *\n     * @var bool\n     *\/",52],["T_WHITESPACE","\n    ",56],["T_PROTECTED","protected",57],["T_WHITESPACE"," ",57],["T_VARIABLE","$_dataValidated",57],["T_WHITESPACE"," ",57],"=",["T_WHITESPACE"," ",57],["T_STRING","false",57],";",["T_WHITESPACE","\n\n    ",57],["T_DOC_COMMENT","\/**\n     * DB data source model.\n     *\n     * @var Mage_ImportExport_Model_Mysql4_Import_Data\n     *\/",59],["T_WHITESPACE","\n    ",63],["T_PROTECTED","protected",64],["T_WHITESPACE"," ",64],["T_VARIABLE","$_dataSourceModel",64],";",["T_WHITESPACE","\n\n    ",64],["T_DOC_COMMENT","\/**\n     * Entity type id.\n     *\n     * @var int\n     *\/",66],["T_WHITESPACE","\n    ",70],["T_PROTECTED","protected",71],["T_WHITESPACE"," ",71],["T_VARIABLE","$_entityTypeId",71],";",["T_WHITESPACE","\n\n    ",71],["T_DOC_COMMENT","\/**\n     * Error codes with arrays of corresponding row numbers.\n     *\n     * @var array\n     *\/",73],["T_WHITESPACE","\n    ",77],["T_PROTECTED","protected",78],["T_WHITESPACE"," ",78],["T_VARIABLE","$_errors",78],["T_WHITESPACE"," ",78],"=",["T_WHITESPACE"," ",78],["T_ARRAY","array",78],"(",")",";",["T_WHITESPACE","\n\n    ",78],["T_DOC_COMMENT","\/**\n     * Error counter.\n     *\n     * @var int\n     *\/",80],["T_WHITESPACE","\n    ",84],["T_PROTECTED","protected",85],["T_WHITESPACE"," ",85],["T_VARIABLE","$_errorsCount",85],["T_WHITESPACE"," ",85],"=",["T_WHITESPACE"," ",85],["T_LNUMBER","0",85],";",["T_WHITESPACE","\n\n    ",85],["T_DOC_COMMENT","\/**\n     * Limit of errors after which pre-processing will exit.\n     *\n     * @var int\n     *\/",87],["T_WHITESPACE","\n    ",91],["T_PROTECTED","protected",92],["T_WHITESPACE"," ",92],["T_VARIABLE","$_errorsLimit",92],["T_WHITESPACE"," ",92],"=",["T_WHITESPACE"," ",92],["T_LNUMBER","100",92],";",["T_WHITESPACE","\n\n    ",92],["T_DOC_COMMENT","\/**\n     * Flag to disable import.\n     *\n     * @var bool\n     *\/",94],["T_WHITESPACE","\n    ",98],["T_PROTECTED","protected",99],["T_WHITESPACE"," ",99],["T_VARIABLE","$_importAllowed",99],["T_WHITESPACE"," ",99],"=",["T_WHITESPACE"," ",99],["T_STRING","true",99],";",["T_WHITESPACE","\n\n    ",99],["T_DOC_COMMENT","\/**\n     * Attributes with index (not label) value.\n     *\n     * @var array\n     *\/",101],["T_WHITESPACE","\n    ",105],["T_PROTECTED","protected",106],["T_WHITESPACE"," ",106],["T_VARIABLE","$_indexValueAttributes",106],["T_WHITESPACE"," ",106],"=",["T_WHITESPACE"," ",106],["T_ARRAY","array",106],"(",")",";",["T_WHITESPACE","\n\n    ",106],["T_DOC_COMMENT","\/**\n     * Array of invalid rows numbers.\n     *\n     * @var array\n     *\/",108],["T_WHITESPACE","\n    ",112],["T_PROTECTED","protected",113],["T_WHITESPACE"," ",113],["T_VARIABLE","$_invalidRows",113],["T_WHITESPACE"," ",113],"=",["T_WHITESPACE"," ",113],["T_ARRAY","array",113],"(",")",";",["T_WHITESPACE","\n\n    ",113],["T_DOC_COMMENT","\/**\n     * Validation failure message template definitions.\n     *\n     * @var array\n     *\/",115],["T_WHITESPACE","\n    ",119],["T_PROTECTED","protected",120],["T_WHITESPACE"," ",120],["T_VARIABLE","$_messageTemplates",120],["T_WHITESPACE"," ",120],"=",["T_WHITESPACE"," ",120],["T_ARRAY","array",120],"(",")",";",["T_WHITESPACE","\n\n    ",120],["T_DOC_COMMENT","\/**\n     * Notice messages.\n     *\n     * @var array\n     *\/",122],["T_WHITESPACE","\n    ",126],["T_PROTECTED","protected",127],["T_WHITESPACE"," ",127],["T_VARIABLE","$_notices",127],["T_WHITESPACE"," ",127],"=",["T_WHITESPACE"," ",127],["T_ARRAY","array",127],"(",")",";",["T_WHITESPACE","\n\n    ",127],["T_DOC_COMMENT","\/**\n     * Entity model parameters.\n     *\n     * @var array\n     *\/",129],["T_WHITESPACE","\n    ",133],["T_PROTECTED","protected",134],["T_WHITESPACE"," ",134],["T_VARIABLE","$_parameters",134],["T_WHITESPACE"," ",134],"=",["T_WHITESPACE"," ",134],["T_ARRAY","array",134],"(",")",";",["T_WHITESPACE","\n\n    ",134],["T_DOC_COMMENT","\/**\n     * Column names that holds values with particular meaning.\n     *\n     * @var array\n     *\/",136],["T_WHITESPACE","\n    ",140],["T_PROTECTED","protected",141],["T_WHITESPACE"," ",141],["T_VARIABLE","$_particularAttributes",141],["T_WHITESPACE"," ",141],"=",["T_WHITESPACE"," ",141],["T_ARRAY","array",141],"(",")",";",["T_WHITESPACE","\n\n    ",141],["T_DOC_COMMENT","\/**\n     * Permanent entity columns.\n     *\n     * @var array\n     *\/",143],["T_WHITESPACE","\n    ",147],["T_PROTECTED","protected",148],["T_WHITESPACE"," ",148],["T_VARIABLE","$_permanentAttributes",148],["T_WHITESPACE"," ",148],"=",["T_WHITESPACE"," ",148],["T_ARRAY","array",148],"(",")",";",["T_WHITESPACE","\n\n    ",148],["T_DOC_COMMENT","\/**\n     * Number of entities processed by validation.\n     *\n     * @var int\n     *\/",150],["T_WHITESPACE","\n    ",154],["T_PROTECTED","protected",155],["T_WHITESPACE"," ",155],["T_VARIABLE","$_processedEntitiesCount",155],["T_WHITESPACE"," ",155],"=",["T_WHITESPACE"," ",155],["T_LNUMBER","0",155],";",["T_WHITESPACE","\n\n    ",155],["T_DOC_COMMENT","\/**\n     * Number of rows processed by validation.\n     *\n     * @var int\n     *\/",157],["T_WHITESPACE","\n    ",161],["T_PROTECTED","protected",162],["T_WHITESPACE"," ",162],["T_VARIABLE","$_processedRowsCount",162],["T_WHITESPACE"," ",162],"=",["T_WHITESPACE"," ",162],["T_LNUMBER","0",162],";",["T_WHITESPACE","\n\n    ",162],["T_DOC_COMMENT","\/**\n     * Rows to skip. Valid rows but we have some reasons to skip them.\n     *\n     * [Row number 1] => true,\n     * ...\n     * [Row number N] => true\n     *\n     * @var array\n     *\/",164],["T_WHITESPACE","\n    ",172],["T_PROTECTED","protected",173],["T_WHITESPACE"," ",173],["T_VARIABLE","$_rowsToSkip",173],["T_WHITESPACE"," ",173],"=",["T_WHITESPACE"," ",173],["T_ARRAY","array",173],"(",")",";",["T_WHITESPACE","\n\n    ",173],["T_DOC_COMMENT","\/**\n     * Array of numbers of validated rows as keys and boolean TRUE as values.\n     *\n     * @var array\n     *\/",175],["T_WHITESPACE","\n    ",179],["T_PROTECTED","protected",180],["T_WHITESPACE"," ",180],["T_VARIABLE","$_validatedRows",180],["T_WHITESPACE"," ",180],"=",["T_WHITESPACE"," ",180],["T_ARRAY","array",180],"(",")",";",["T_WHITESPACE","\n\n    ",180],["T_DOC_COMMENT","\/**\n     * Source model.\n     *\n     * @var Mage_ImportExport_Model_Import_Adapter_Abstract\n     *\/",182],["T_WHITESPACE","\n    ",186],["T_PROTECTED","protected",187],["T_WHITESPACE"," ",187],["T_VARIABLE","$_source",187],";",["T_WHITESPACE","\n\n    ",187],["T_DOC_COMMENT","\/**\n     * Array of unique attributes\n     *\n     * @var array\n     *\/",189],["T_WHITESPACE","\n    ",193],["T_PROTECTED","protected",194],["T_WHITESPACE"," ",194],["T_VARIABLE","$_uniqueAttributes",194],["T_WHITESPACE"," ",194],"=",["T_WHITESPACE"," ",194],["T_ARRAY","array",194],"(",")",";",["T_WHITESPACE","\n\n    ",194],["T_DOC_COMMENT","\/**\n     * Constructor.\n     *\n     * @return void\n     *\/",196],["T_WHITESPACE","\n    ",200],["T_PUBLIC","public",201],["T_WHITESPACE"," ",201],["T_FUNCTION","function",201],["T_WHITESPACE"," ",201],["T_STRING","__construct",201],"(",")",["T_WHITESPACE","\n    ",201],"{",["T_WHITESPACE","\n        ",202],["T_VARIABLE","$entityType",203],["T_WHITESPACE"," ",203],"=",["T_WHITESPACE"," ",203],["T_STRING","Mage",203],["T_DOUBLE_COLON","::",203],["T_STRING","getSingleton",203],"(",["T_CONSTANT_ENCAPSED_STRING","'eav\/config'",203],")",["T_OBJECT_OPERATOR","->",203],["T_STRING","getEntityType",203],"(",["T_VARIABLE","$this",203],["T_OBJECT_OPERATOR","->",203],["T_STRING","getEntityTypeCode",203],"(",")",")",";",["T_WHITESPACE","\n        ",203],["T_VARIABLE","$this",204],["T_OBJECT_OPERATOR","->",204],["T_STRING","_entityTypeId",204],["T_WHITESPACE","    ",204],"=",["T_WHITESPACE"," ",204],["T_VARIABLE","$entityType",204],["T_OBJECT_OPERATOR","->",204],["T_STRING","getEntityTypeId",204],"(",")",";",["T_WHITESPACE","\n        ",204],["T_VARIABLE","$this",205],["T_OBJECT_OPERATOR","->",205],["T_STRING","_dataSourceModel",205],["T_WHITESPACE"," ",205],"=",["T_WHITESPACE"," ",205],["T_STRING","Mage_ImportExport_Model_Import",205],["T_DOUBLE_COLON","::",205],["T_STRING","getDataSourceModel",205],"(",")",";",["T_WHITESPACE","\n        ",205],["T_VARIABLE","$this",206],["T_OBJECT_OPERATOR","->",206],["T_STRING","_connection",206],["T_WHITESPACE","      ",206],"=",["T_WHITESPACE"," ",206],["T_STRING","Mage",206],["T_DOUBLE_COLON","::",206],["T_STRING","getSingleton",206],"(",["T_CONSTANT_ENCAPSED_STRING","'core\/resource'",206],")",["T_OBJECT_OPERATOR","->",206],["T_STRING","getConnection",206],"(",["T_CONSTANT_ENCAPSED_STRING","'write'",206],")",";",["T_WHITESPACE","\n    ",206],"}",["T_WHITESPACE","\n\n    ",207],["T_DOC_COMMENT","\/**\n     * Inner source object getter.\n     *\n     * @return Mage_ImportExport_Model_Import_Adapter_Abstract\n     *\/",209],["T_WHITESPACE","\n    ",213],["T_PROTECTED","protected",214],["T_WHITESPACE"," ",214],["T_FUNCTION","function",214],["T_WHITESPACE"," ",214],["T_STRING","_getSource",214],"(",")",["T_WHITESPACE","\n    ",214],"{",["T_WHITESPACE","\n        ",215],["T_IF","if",216],["T_WHITESPACE"," ",216],"(","!",["T_VARIABLE","$this",216],["T_OBJECT_OPERATOR","->",216],["T_STRING","_source",216],")",["T_WHITESPACE"," ",216],"{",["T_WHITESPACE","\n            ",216],["T_STRING","Mage",217],["T_DOUBLE_COLON","::",217],["T_STRING","throwException",217],"(",["T_STRING","Mage",217],["T_DOUBLE_COLON","::",217],["T_STRING","helper",217],"(",["T_CONSTANT_ENCAPSED_STRING","'importexport'",217],")",["T_OBJECT_OPERATOR","->",217],["T_STRING","__",217],"(",["T_CONSTANT_ENCAPSED_STRING","'No source specified'",217],")",")",";",["T_WHITESPACE","\n        ",217],"}",["T_WHITESPACE","\n        ",218],["T_RETURN","return",219],["T_WHITESPACE"," ",219],["T_VARIABLE","$this",219],["T_OBJECT_OPERATOR","->",219],["T_STRING","_source",219],";",["T_WHITESPACE","\n    ",219],"}",["T_WHITESPACE","\n\n    ",220],["T_DOC_COMMENT","\/**\n     * Import data rows.\n     *\n     * @abstract\n     * @return boolean\n     *\/",222],["T_WHITESPACE","\n    ",227],["T_ABSTRACT","abstract",228],["T_WHITESPACE"," ",228],["T_PROTECTED","protected",228],["T_WHITESPACE"," ",228],["T_FUNCTION","function",228],["T_WHITESPACE"," ",228],["T_STRING","_importData",228],"(",")",";",["T_WHITESPACE","\n\n    ",228],["T_DOC_COMMENT","\/**\n     * Returns boolean TRUE if row scope is default (fundamental) scope.\n     *\n     * @param array $rowData\n     * @return bool\n     *\/",230],["T_WHITESPACE","\n    ",235],["T_PROTECTED","protected",236],["T_WHITESPACE"," ",236],["T_FUNCTION","function",236],["T_WHITESPACE"," ",236],["T_STRING","_isRowScopeDefault",236],"(",["T_ARRAY","array",236],["T_WHITESPACE"," ",236],["T_VARIABLE","$rowData",236],")",["T_WHITESPACE","\n    ",236],"{",["T_WHITESPACE","\n        ",237],["T_RETURN","return",238],["T_WHITESPACE"," ",238],["T_STRING","true",238],";",["T_WHITESPACE","\n    ",238],"}",["T_WHITESPACE","\n\n    ",239],["T_DOC_COMMENT","\/**\n     * Change row data before saving in DB table.\n     *\n     * @param array $rowData\n     * @return array\n     *\/",241],["T_WHITESPACE","\n    ",246],["T_PROTECTED","protected",247],["T_WHITESPACE"," ",247],["T_FUNCTION","function",247],["T_WHITESPACE"," ",247],["T_STRING","_prepareRowForDb",247],"(",["T_ARRAY","array",247],["T_WHITESPACE"," ",247],["T_VARIABLE","$rowData",247],")",["T_WHITESPACE","\n    ",247],"{",["T_WHITESPACE","\n        ",248],["T_DOC_COMMENT","\/**\n         * Convert all empty strings to null values, as\n         * a) we don't use empty string in DB\n         * b) empty strings instead of numeric values will product errors in Sql Server\n         *\/",249],["T_WHITESPACE","\n        ",253],["T_FOREACH","foreach",254],["T_WHITESPACE"," ",254],"(",["T_VARIABLE","$rowData",254],["T_WHITESPACE"," ",254],["T_AS","as",254],["T_WHITESPACE"," ",254],["T_VARIABLE","$key",254],["T_WHITESPACE"," ",254],["T_DOUBLE_ARROW","=>",254],["T_WHITESPACE"," ",254],["T_VARIABLE","$val",254],")",["T_WHITESPACE"," ",254],"{",["T_WHITESPACE","\n            ",254],["T_IF","if",255],["T_WHITESPACE"," ",255],"(",["T_VARIABLE","$val",255],["T_WHITESPACE"," ",255],["T_IS_IDENTICAL","===",255],["T_WHITESPACE"," ",255],["T_CONSTANT_ENCAPSED_STRING","''",255],")",["T_WHITESPACE"," ",255],"{",["T_WHITESPACE","\n                ",255],["T_VARIABLE","$rowData",256],"[",["T_VARIABLE","$key",256],"]",["T_WHITESPACE"," ",256],"=",["T_WHITESPACE"," ",256],["T_STRING","null",256],";",["T_WHITESPACE","\n            ",256],"}",["T_WHITESPACE","\n        ",257],"}",["T_WHITESPACE","\n        ",258],["T_RETURN","return",259],["T_WHITESPACE"," ",259],["T_VARIABLE","$rowData",259],";",["T_WHITESPACE","\n    ",259],"}",["T_WHITESPACE","\n\n    ",260],["T_DOC_COMMENT","\/**\n     * Validate data rows and save bunches to DB.\n     *\n     * @return Mage_ImportExport_Model_Import_Entity_Abstract\n     *\/",262],["T_WHITESPACE","\n    ",266],["T_PROTECTED","protected",267],["T_WHITESPACE"," ",267],["T_FUNCTION","function",267],["T_WHITESPACE"," ",267],["T_STRING","_saveValidatedBunches",267],"(",")",["T_WHITESPACE","\n    ",267],"{",["T_WHITESPACE","\n        ",268],["T_VARIABLE","$source",269],["T_WHITESPACE","          ",269],"=",["T_WHITESPACE"," ",269],["T_VARIABLE","$this",269],["T_OBJECT_OPERATOR","->",269],["T_STRING","_getSource",269],"(",")",";",["T_WHITESPACE","\n        ",269],["T_VARIABLE","$productDataSize",270],["T_WHITESPACE"," ",270],"=",["T_WHITESPACE"," ",270],["T_LNUMBER","0",270],";",["T_WHITESPACE","\n        ",270],["T_VARIABLE","$bunchRows",271],["T_WHITESPACE","       ",271],"=",["T_WHITESPACE"," ",271],["T_ARRAY","array",271],"(",")",";",["T_WHITESPACE","\n        ",271],["T_VARIABLE","$startNewBunch",272],["T_WHITESPACE","   ",272],"=",["T_WHITESPACE"," ",272],["T_STRING","false",272],";",["T_WHITESPACE","\n        ",272],["T_VARIABLE","$nextRowBackup",273],["T_WHITESPACE","   ",273],"=",["T_WHITESPACE"," ",273],["T_ARRAY","array",273],"(",")",";",["T_WHITESPACE","\n        ",273],["T_VARIABLE","$maxDataSize",274],["T_WHITESPACE"," ",274],"=",["T_WHITESPACE"," ",274],["T_STRING","Mage",274],["T_DOUBLE_COLON","::",274],["T_STRING","getResourceHelper",274],"(",["T_CONSTANT_ENCAPSED_STRING","'importexport'",274],")",["T_OBJECT_OPERATOR","->",274],["T_STRING","getMaxDataSize",274],"(",")",";",["T_WHITESPACE","\n        ",274],["T_VARIABLE","$bunchSize",275],["T_WHITESPACE"," ",275],"=",["T_WHITESPACE"," ",275],["T_STRING","Mage",275],["T_DOUBLE_COLON","::",275],["T_STRING","helper",275],"(",["T_CONSTANT_ENCAPSED_STRING","'importexport'",275],")",["T_OBJECT_OPERATOR","->",275],["T_STRING","getBunchSize",275],"(",")",";",["T_WHITESPACE","\n\n        ",275],["T_DOC_COMMENT","\/** @var Mage_Core_Helper_Data $coreHelper *\/",277],["T_WHITESPACE","\n        ",277],["T_VARIABLE","$coreHelper",278],["T_WHITESPACE"," ",278],"=",["T_WHITESPACE"," ",278],["T_STRING","Mage",278],["T_DOUBLE_COLON","::",278],["T_STRING","helper",278],"(",["T_CONSTANT_ENCAPSED_STRING","\"core\"",278],")",";",["T_WHITESPACE","\n\n        ",278],["T_VARIABLE","$source",280],["T_OBJECT_OPERATOR","->",280],["T_STRING","rewind",280],"(",")",";",["T_WHITESPACE","\n        ",280],["T_VARIABLE","$this",281],["T_OBJECT_OPERATOR","->",281],["T_STRING","_dataSourceModel",281],["T_OBJECT_OPERATOR","->",281],["T_STRING","cleanBunches",281],"(",")",";",["T_WHITESPACE","\n\n        ",281],["T_WHILE","while",283],["T_WHITESPACE"," ",283],"(",["T_VARIABLE","$source",283],["T_OBJECT_OPERATOR","->",283],["T_STRING","valid",283],"(",")",["T_WHITESPACE"," ",283],["T_BOOLEAN_OR","||",283],["T_WHITESPACE"," ",283],["T_VARIABLE","$bunchRows",283],")",["T_WHITESPACE"," ",283],"{",["T_WHITESPACE","\n            ",283],["T_IF","if",284],["T_WHITESPACE"," ",284],"(",["T_VARIABLE","$startNewBunch",284],["T_WHITESPACE"," ",284],["T_BOOLEAN_OR","||",284],["T_WHITESPACE"," ",284],"!",["T_VARIABLE","$source",284],["T_OBJECT_OPERATOR","->",284],["T_STRING","valid",284],"(",")",")",["T_WHITESPACE"," ",284],"{",["T_WHITESPACE","\n                ",284],["T_VARIABLE","$this",285],["T_OBJECT_OPERATOR","->",285],["T_STRING","_dataSourceModel",285],["T_OBJECT_OPERATOR","->",285],["T_STRING","saveBunch",285],"(",["T_VARIABLE","$this",285],["T_OBJECT_OPERATOR","->",285],["T_STRING","getEntityTypeCode",285],"(",")",",",["T_WHITESPACE"," ",285],["T_VARIABLE","$this",285],["T_OBJECT_OPERATOR","->",285],["T_STRING","getBehavior",285],"(",")",",",["T_WHITESPACE"," ",285],["T_VARIABLE","$bunchRows",285],")",";",["T_WHITESPACE","\n\n                ",285],["T_VARIABLE","$bunchRows",287],["T_WHITESPACE","       ",287],"=",["T_WHITESPACE"," ",287],["T_VARIABLE","$nextRowBackup",287],";",["T_WHITESPACE","\n                ",287],["T_VARIABLE","$productDataSize",288],["T_WHITESPACE"," ",288],"=",["T_WHITESPACE"," ",288],["T_STRING","strlen",288],"(",["T_STRING","serialize",288],"(",["T_VARIABLE","$bunchRows",288],")",")",";",["T_WHITESPACE","\n                ",288],["T_VARIABLE","$startNewBunch",289],["T_WHITESPACE","   ",289],"=",["T_WHITESPACE"," ",289],["T_STRING","false",289],";",["T_WHITESPACE","\n                ",289],["T_VARIABLE","$nextRowBackup",290],["T_WHITESPACE","   ",290],"=",["T_WHITESPACE"," ",290],["T_ARRAY","array",290],"(",")",";",["T_WHITESPACE","\n            ",290],"}",["T_WHITESPACE","\n            ",291],["T_IF","if",292],["T_WHITESPACE"," ",292],"(",["T_VARIABLE","$source",292],["T_OBJECT_OPERATOR","->",292],["T_STRING","valid",292],"(",")",")",["T_WHITESPACE"," ",292],"{",["T_WHITESPACE","\n                ",292],["T_IF","if",293],["T_WHITESPACE"," ",293],"(",["T_VARIABLE","$this",293],["T_OBJECT_OPERATOR","->",293],["T_STRING","_errorsCount",293],["T_WHITESPACE"," ",293],["T_IS_GREATER_OR_EQUAL",">=",293],["T_WHITESPACE"," ",293],["T_VARIABLE","$this",293],["T_OBJECT_OPERATOR","->",293],["T_STRING","_errorsLimit",293],")",["T_WHITESPACE"," ",293],"{",["T_WHITESPACE"," ",293],["T_COMMENT","\/\/ errors limit check\n",293],["T_WHITESPACE","                    ",294],["T_RETURN","return",294],";",["T_WHITESPACE","\n                ",294],"}",["T_WHITESPACE","\n                ",295],["T_VARIABLE","$rowData",296],["T_WHITESPACE"," ",296],"=",["T_WHITESPACE"," ",296],["T_VARIABLE","$coreHelper",296],["T_OBJECT_OPERATOR","->",296],["T_STRING","unEscapeCSVData",296],"(",["T_VARIABLE","$source",296],["T_OBJECT_OPERATOR","->",296],["T_STRING","current",296],"(",")",")",";",["T_WHITESPACE","\n\n                ",296],["T_VARIABLE","$this",298],["T_OBJECT_OPERATOR","->",298],["T_STRING","_processedRowsCount",298],["T_INC","++",298],";",["T_WHITESPACE","\n\n                ",298],["T_IF","if",300],["T_WHITESPACE"," ",300],"(",["T_VARIABLE","$this",300],["T_OBJECT_OPERATOR","->",300],["T_STRING","validateRow",300],"(",["T_VARIABLE","$rowData",300],",",["T_WHITESPACE"," ",300],["T_VARIABLE","$source",300],["T_OBJECT_OPERATOR","->",300],["T_STRING","key",300],"(",")",")",")",["T_WHITESPACE"," ",300],"{",["T_WHITESPACE"," ",300],["T_COMMENT","\/\/ add row to bunch for save\n",300],["T_WHITESPACE","                    ",301],["T_VARIABLE","$rowData",301],["T_WHITESPACE"," ",301],"=",["T_WHITESPACE"," ",301],["T_VARIABLE","$this",301],["T_OBJECT_OPERATOR","->",301],["T_STRING","_prepareRowForDb",301],"(",["T_VARIABLE","$rowData",301],")",";",["T_WHITESPACE","\n                    ",301],["T_VARIABLE","$rowSize",302],["T_WHITESPACE"," ",302],"=",["T_WHITESPACE"," ",302],["T_STRING","strlen",302],"(",["T_STRING","Mage",302],["T_DOUBLE_COLON","::",302],["T_STRING","helper",302],"(",["T_CONSTANT_ENCAPSED_STRING","'core'",302],")",["T_OBJECT_OPERATOR","->",302],["T_STRING","jsonEncode",302],"(",["T_VARIABLE","$rowData",302],")",")",";",["T_WHITESPACE","\n\n                    ",302],["T_VARIABLE","$isBunchSizeExceeded",304],["T_WHITESPACE"," ",304],"=",["T_WHITESPACE"," ",304],"(",["T_VARIABLE","$bunchSize",304],["T_WHITESPACE"," ",304],">",["T_WHITESPACE"," ",304],["T_LNUMBER","0",304],["T_WHITESPACE"," ",304],["T_BOOLEAN_AND","&&",304],["T_WHITESPACE"," ",304],["T_STRING","count",304],"(",["T_VARIABLE","$bunchRows",304],")",["T_WHITESPACE"," ",304],["T_IS_GREATER_OR_EQUAL",">=",304],["T_WHITESPACE"," ",304],["T_VARIABLE","$bunchSize",304],")",";",["T_WHITESPACE","\n\n                    ",304],["T_IF","if",306],["T_WHITESPACE"," ",306],"(","(",["T_VARIABLE","$productDataSize",306],["T_WHITESPACE"," ",306],"+",["T_WHITESPACE"," ",306],["T_VARIABLE","$rowSize",306],")",["T_WHITESPACE"," ",306],["T_IS_GREATER_OR_EQUAL",">=",306],["T_WHITESPACE"," ",306],["T_VARIABLE","$maxDataSize",306],["T_WHITESPACE"," ",306],["T_BOOLEAN_OR","||",306],["T_WHITESPACE"," ",306],["T_VARIABLE","$isBunchSizeExceeded",306],")",["T_WHITESPACE"," ",306],"{",["T_WHITESPACE","\n                        ",306],["T_VARIABLE","$startNewBunch",307],["T_WHITESPACE"," ",307],"=",["T_WHITESPACE"," ",307],["T_STRING","true",307],";",["T_WHITESPACE","\n                        ",307],["T_VARIABLE","$nextRowBackup",308],["T_WHITESPACE"," ",308],"=",["T_WHITESPACE"," ",308],["T_ARRAY","array",308],"(",["T_VARIABLE","$source",308],["T_OBJECT_OPERATOR","->",308],["T_STRING","key",308],"(",")",["T_WHITESPACE"," ",308],["T_DOUBLE_ARROW","=>",308],["T_WHITESPACE"," ",308],["T_VARIABLE","$rowData",308],")",";",["T_WHITESPACE","\n                    ",308],"}",["T_WHITESPACE"," ",309],["T_ELSE","else",309],["T_WHITESPACE"," ",309],"{",["T_WHITESPACE","\n                        ",309],["T_VARIABLE","$bunchRows",310],"[",["T_VARIABLE","$source",310],["T_OBJECT_OPERATOR","->",310],["T_STRING","key",310],"(",")","]",["T_WHITESPACE"," ",310],"=",["T_WHITESPACE"," ",310],["T_VARIABLE","$rowData",310],";",["T_WHITESPACE","\n                        ",310],["T_VARIABLE","$productDataSize",311],["T_WHITESPACE"," ",311],["T_PLUS_EQUAL","+=",311],["T_WHITESPACE"," ",311],["T_VARIABLE","$rowSize",311],";",["T_WHITESPACE","\n                    ",311],"}",["T_WHITESPACE","\n                ",312],"}",["T_WHITESPACE","\n                ",313],["T_VARIABLE","$source",314],["T_OBJECT_OPERATOR","->",314],["T_STRING","next",314],"(",")",";",["T_WHITESPACE","\n            ",314],"}",["T_WHITESPACE","\n        ",315],"}",["T_WHITESPACE","\n        ",316],["T_RETURN","return",317],["T_WHITESPACE"," ",317],["T_VARIABLE","$this",317],";",["T_WHITESPACE","\n    ",317],"}",["T_WHITESPACE","\n\n    ",318],["T_DOC_COMMENT","\/**\n     * Add error with corresponding current data source row number.\n     *\n     * @param string $errorCode Error code or simply column name\n     * @param int $errorRowNum Row number.\n     * @param string $colName OPTIONAL Column name.\n     * @return Mage_ImportExport_Model_Import_Adapter_Abstract\n     *\/",320],["T_WHITESPACE","\n    ",327],["T_PUBLIC","public",328],["T_WHITESPACE"," ",328],["T_FUNCTION","function",328],["T_WHITESPACE"," ",328],["T_STRING","addRowError",328],"(",["T_VARIABLE","$errorCode",328],",",["T_WHITESPACE"," ",328],["T_VARIABLE","$errorRowNum",328],",",["T_WHITESPACE"," ",328],["T_VARIABLE","$colName",328],["T_WHITESPACE"," ",328],"=",["T_WHITESPACE"," ",328],["T_STRING","null",328],")",["T_WHITESPACE","\n    ",328],"{",["T_WHITESPACE","\n        ",329],["T_VARIABLE","$this",330],["T_OBJECT_OPERATOR","->",330],["T_STRING","_errors",330],"[",["T_VARIABLE","$errorCode",330],"]","[","]",["T_WHITESPACE"," ",330],"=",["T_WHITESPACE"," ",330],["T_ARRAY","array",330],"(",["T_VARIABLE","$errorRowNum",330],["T_WHITESPACE"," ",330],"+",["T_WHITESPACE"," ",330],["T_LNUMBER","1",330],",",["T_WHITESPACE"," ",330],["T_VARIABLE","$colName",330],")",";",["T_WHITESPACE"," ",330],["T_COMMENT","\/\/ one added for human readability\n",330],["T_WHITESPACE","        ",331],["T_VARIABLE","$this",331],["T_OBJECT_OPERATOR","->",331],["T_STRING","_invalidRows",331],"[",["T_VARIABLE","$errorRowNum",331],"]",["T_WHITESPACE"," ",331],"=",["T_WHITESPACE"," ",331],["T_STRING","true",331],";",["T_WHITESPACE","\n        ",331],["T_VARIABLE","$this",332],["T_OBJECT_OPERATOR","->",332],["T_STRING","_errorsCount",332],["T_WHITESPACE"," ",332],["T_INC","++",332],";",["T_WHITESPACE","\n\n        ",332],["T_RETURN","return",334],["T_WHITESPACE"," ",334],["T_VARIABLE","$this",334],";",["T_WHITESPACE","\n    ",334],"}",["T_WHITESPACE","\n\n    ",335],["T_DOC_COMMENT","\/**\n     * Add message template for specific error code from outside.\n     *\n     * @param string $errorCode Error code\n     * @param string $message Message template\n     * @return Mage_ImportExport_Model_Import_Entity_Abstract\n     *\/",337],["T_WHITESPACE","\n    ",343],["T_PUBLIC","public",344],["T_WHITESPACE"," ",344],["T_FUNCTION","function",344],["T_WHITESPACE"," ",344],["T_STRING","addMessageTemplate",344],"(",["T_VARIABLE","$errorCode",344],",",["T_WHITESPACE"," ",344],["T_VARIABLE","$message",344],")",["T_WHITESPACE","\n    ",344],"{",["T_WHITESPACE","\n        ",345],["T_VARIABLE","$this",346],["T_OBJECT_OPERATOR","->",346],["T_STRING","_messageTemplates",346],"[",["T_VARIABLE","$errorCode",346],"]",["T_WHITESPACE"," ",346],"=",["T_WHITESPACE"," ",346],["T_VARIABLE","$message",346],";",["T_WHITESPACE","\n\n        ",346],["T_RETURN","return",348],["T_WHITESPACE"," ",348],["T_VARIABLE","$this",348],";",["T_WHITESPACE","\n    ",348],"}",["T_WHITESPACE","\n\n    ",349],["T_DOC_COMMENT","\/**\n     * Returns attributes all values in label-value or value-value pairs form. Labels are lower-cased.\n     *\n     * @param Mage_Eav_Model_Entity_Attribute_Abstract $attribute\n     * @param array $indexValAttrs OPTIONAL Additional attributes' codes with index values.\n     * @return array\n     *\/",351],["T_WHITESPACE","\n    ",357],["T_PUBLIC","public",358],["T_WHITESPACE"," ",358],["T_FUNCTION","function",358],["T_WHITESPACE"," ",358],["T_STRING","getAttributeOptions",358],"(",["T_STRING","Mage_Eav_Model_Entity_Attribute_Abstract",358],["T_WHITESPACE"," ",358],["T_VARIABLE","$attribute",358],",",["T_WHITESPACE"," ",358],["T_VARIABLE","$indexValAttrs",358],["T_WHITESPACE"," ",358],"=",["T_WHITESPACE"," ",358],["T_ARRAY","array",358],"(",")",")",["T_WHITESPACE","\n    ",358],"{",["T_WHITESPACE","\n        ",359],["T_VARIABLE","$options",360],["T_WHITESPACE"," ",360],"=",["T_WHITESPACE"," ",360],["T_ARRAY","array",360],"(",")",";",["T_WHITESPACE","\n\n        ",360],["T_IF","if",362],["T_WHITESPACE"," ",362],"(",["T_VARIABLE","$attribute",362],["T_OBJECT_OPERATOR","->",362],["T_STRING","usesSource",362],"(",")",")",["T_WHITESPACE"," ",362],"{",["T_WHITESPACE","\n            ",362],["T_COMMENT","\/\/ merge global entity index value attributes\n",363],["T_WHITESPACE","            ",364],["T_VARIABLE","$indexValAttrs",364],["T_WHITESPACE"," ",364],"=",["T_WHITESPACE"," ",364],["T_STRING","array_merge",364],"(",["T_VARIABLE","$indexValAttrs",364],",",["T_WHITESPACE"," ",364],["T_VARIABLE","$this",364],["T_OBJECT_OPERATOR","->",364],["T_STRING","_indexValueAttributes",364],")",";",["T_WHITESPACE","\n\n            ",364],["T_COMMENT","\/\/ should attribute has index (option value) instead of a label?\n",366],["T_WHITESPACE","            ",367],["T_VARIABLE","$index",367],["T_WHITESPACE"," ",367],"=",["T_WHITESPACE"," ",367],["T_STRING","in_array",367],"(",["T_VARIABLE","$attribute",367],["T_OBJECT_OPERATOR","->",367],["T_STRING","getAttributeCode",367],"(",")",",",["T_WHITESPACE"," ",367],["T_VARIABLE","$indexValAttrs",367],")",["T_WHITESPACE"," ",367],"?",["T_WHITESPACE"," ",367],["T_CONSTANT_ENCAPSED_STRING","'value'",367],["T_WHITESPACE"," ",367],":",["T_WHITESPACE"," ",367],["T_CONSTANT_ENCAPSED_STRING","'label'",367],";",["T_WHITESPACE","\n\n            ",367],["T_COMMENT","\/\/ only default (admin) store values used\n",369],["T_WHITESPACE","            ",370],["T_VARIABLE","$attribute",370],["T_OBJECT_OPERATOR","->",370],["T_STRING","setStoreId",370],"(",["T_STRING","Mage_Catalog_Model_Abstract",370],["T_DOUBLE_COLON","::",370],["T_STRING","DEFAULT_STORE_ID",370],")",";",["T_WHITESPACE","\n\n            ",370],["T_TRY","try",372],["T_WHITESPACE"," ",372],"{",["T_WHITESPACE","\n                ",372],["T_FOREACH","foreach",373],["T_WHITESPACE"," ",373],"(",["T_VARIABLE","$attribute",373],["T_OBJECT_OPERATOR","->",373],["T_STRING","getSource",373],"(",")",["T_OBJECT_OPERATOR","->",373],["T_STRING","getAllOptions",373],"(",["T_STRING","false",373],")",["T_WHITESPACE"," ",373],["T_AS","as",373],["T_WHITESPACE"," ",373],["T_VARIABLE","$option",373],")",["T_WHITESPACE"," ",373],"{",["T_WHITESPACE","\n                    ",373],["T_VARIABLE","$value",374],["T_WHITESPACE"," ",374],"=",["T_WHITESPACE"," ",374],["T_STRING","is_array",374],"(",["T_VARIABLE","$option",374],"[",["T_CONSTANT_ENCAPSED_STRING","'value'",374],"]",")",["T_WHITESPACE"," ",374],"?",["T_WHITESPACE"," ",374],["T_VARIABLE","$option",374],"[",["T_CONSTANT_ENCAPSED_STRING","'value'",374],"]",["T_WHITESPACE"," ",374],":",["T_WHITESPACE"," ",374],["T_ARRAY","array",374],"(",["T_VARIABLE","$option",374],")",";",["T_WHITESPACE","\n                    ",374],["T_FOREACH","foreach",375],["T_WHITESPACE"," ",375],"(",["T_VARIABLE","$value",375],["T_WHITESPACE"," ",375],["T_AS","as",375],["T_WHITESPACE"," ",375],["T_VARIABLE","$innerOption",375],")",["T_WHITESPACE"," ",375],"{",["T_WHITESPACE","\n                        ",375],["T_IF","if",376],["T_WHITESPACE"," ",376],"(",["T_STRING","strlen",376],"(",["T_VARIABLE","$innerOption",376],"[",["T_CONSTANT_ENCAPSED_STRING","'value'",376],"]",")",")",["T_WHITESPACE"," ",376],"{",["T_WHITESPACE"," ",376],["T_COMMENT","\/\/ skip ' -- Please Select -- ' option\n",376],["T_WHITESPACE","                            ",377],["T_VARIABLE","$options",377],"[",["T_STRING","strtolower",377],"(",["T_VARIABLE","$innerOption",377],"[",["T_VARIABLE","$index",377],"]",")","]",["T_WHITESPACE"," ",377],"=",["T_WHITESPACE"," ",377],["T_VARIABLE","$innerOption",377],"[",["T_CONSTANT_ENCAPSED_STRING","'value'",377],"]",";",["T_WHITESPACE","\n                        ",377],"}",["T_WHITESPACE","\n                    ",378],"}",["T_WHITESPACE","\n                ",379],"}",["T_WHITESPACE","\n            ",380],"}",["T_WHITESPACE"," ",381],["T_CATCH","catch",381],["T_WHITESPACE"," ",381],"(",["T_STRING","Exception",381],["T_WHITESPACE"," ",381],["T_VARIABLE","$e",381],")",["T_WHITESPACE"," ",381],"{",["T_WHITESPACE","\n                ",381],["T_COMMENT","\/\/ ignore exceptions connected with source models\n",382],["T_WHITESPACE","            ",383],"}",["T_WHITESPACE","\n        ",383],"}",["T_WHITESPACE","\n        ",384],["T_RETURN","return",385],["T_WHITESPACE"," ",385],["T_VARIABLE","$options",385],";",["T_WHITESPACE","\n    ",385],"}",["T_WHITESPACE","\n\n    ",386],["T_DOC_COMMENT","\/**\n     * Import behavior getter.\n     *\n     * @return string\n     *\/",388],["T_WHITESPACE","\n    ",392],["T_PUBLIC","public",393],["T_WHITESPACE"," ",393],["T_FUNCTION","function",393],["T_WHITESPACE"," ",393],["T_STRING","getBehavior",393],"(",")",["T_WHITESPACE","\n    ",393],"{",["T_WHITESPACE","\n        ",394],["T_IF","if",395],["T_WHITESPACE"," ",395],"(","!",["T_ISSET","isset",395],"(",["T_VARIABLE","$this",395],["T_OBJECT_OPERATOR","->",395],["T_STRING","_parameters",395],"[",["T_CONSTANT_ENCAPSED_STRING","'behavior'",395],"]",")",["T_WHITESPACE","\n            ",395],["T_BOOLEAN_OR","||",396],["T_WHITESPACE"," ",396],"(",["T_VARIABLE","$this",396],["T_OBJECT_OPERATOR","->",396],["T_STRING","_parameters",396],"[",["T_CONSTANT_ENCAPSED_STRING","'behavior'",396],"]",["T_WHITESPACE"," ",396],["T_IS_NOT_EQUAL","!=",396],["T_WHITESPACE"," ",396],["T_STRING","Mage_ImportExport_Model_Import",396],["T_DOUBLE_COLON","::",396],["T_STRING","BEHAVIOR_APPEND",396],["T_WHITESPACE","\n            ",396],["T_BOOLEAN_AND","&&",397],["T_WHITESPACE"," ",397],["T_VARIABLE","$this",397],["T_OBJECT_OPERATOR","->",397],["T_STRING","_parameters",397],"[",["T_CONSTANT_ENCAPSED_STRING","'behavior'",397],"]",["T_WHITESPACE"," ",397],["T_IS_NOT_EQUAL","!=",397],["T_WHITESPACE"," ",397],["T_STRING","Mage_ImportExport_Model_Import",397],["T_DOUBLE_COLON","::",397],["T_STRING","BEHAVIOR_REPLACE",397],["T_WHITESPACE","\n            ",397],["T_BOOLEAN_AND","&&",398],["T_WHITESPACE"," ",398],["T_VARIABLE","$this",398],["T_OBJECT_OPERATOR","->",398],["T_STRING","_parameters",398],"[",["T_CONSTANT_ENCAPSED_STRING","'behavior'",398],"]",["T_WHITESPACE"," ",398],["T_IS_NOT_EQUAL","!=",398],["T_WHITESPACE"," ",398],["T_STRING","Mage_ImportExport_Model_Import",398],["T_DOUBLE_COLON","::",398],["T_STRING","BEHAVIOR_DELETE",398],")",")",["T_WHITESPACE"," ",398],"{",["T_WHITESPACE","\n            ",398],["T_RETURN","return",399],["T_WHITESPACE"," ",399],["T_STRING","Mage_ImportExport_Model_Import",399],["T_DOUBLE_COLON","::",399],["T_STRING","getDefaultBehavior",399],"(",")",";",["T_WHITESPACE","\n        ",399],"}",["T_WHITESPACE","\n        ",400],["T_RETURN","return",401],["T_WHITESPACE"," ",401],["T_VARIABLE","$this",401],["T_OBJECT_OPERATOR","->",401],["T_STRING","_parameters",401],"[",["T_CONSTANT_ENCAPSED_STRING","'behavior'",401],"]",";",["T_WHITESPACE","\n    ",401],"}",["T_WHITESPACE","\n\n    ",402],["T_DOC_COMMENT","\/**\n     * EAV entity type code getter.\n     *\n     * @abstract\n     * @return string\n     *\/",404],["T_WHITESPACE","\n    ",409],["T_ABSTRACT","abstract",410],["T_WHITESPACE"," ",410],["T_PUBLIC","public",410],["T_WHITESPACE"," ",410],["T_FUNCTION","function",410],["T_WHITESPACE"," ",410],["T_STRING","getEntityTypeCode",410],"(",")",";",["T_WHITESPACE","\n\n    ",410],["T_DOC_COMMENT","\/**\n     * Entity type ID getter.\n     *\n     * @return int\n     *\/",412],["T_WHITESPACE","\n    ",416],["T_PUBLIC","public",417],["T_WHITESPACE"," ",417],["T_FUNCTION","function",417],["T_WHITESPACE"," ",417],["T_STRING","getEntityTypeId",417],"(",")",["T_WHITESPACE","\n    ",417],"{",["T_WHITESPACE","\n        ",418],["T_RETURN","return",419],["T_WHITESPACE"," ",419],["T_VARIABLE","$this",419],["T_OBJECT_OPERATOR","->",419],["T_STRING","_entityTypeId",419],";",["T_WHITESPACE","\n    ",419],"}",["T_WHITESPACE","\n\n    ",420],["T_DOC_COMMENT","\/**\n     * Returns error information grouped by error types and translated (if possible).\n     *\n     * @return array\n     *\/",422],["T_WHITESPACE","\n    ",426],["T_PUBLIC","public",427],["T_WHITESPACE"," ",427],["T_FUNCTION","function",427],["T_WHITESPACE"," ",427],["T_STRING","getErrorMessages",427],"(",")",["T_WHITESPACE","\n    ",427],"{",["T_WHITESPACE","\n        ",428],["T_VARIABLE","$translator",429],["T_WHITESPACE"," ",429],"=",["T_WHITESPACE"," ",429],["T_STRING","Mage",429],["T_DOUBLE_COLON","::",429],["T_STRING","helper",429],"(",["T_CONSTANT_ENCAPSED_STRING","'importexport'",429],")",";",["T_WHITESPACE","\n        ",429],["T_VARIABLE","$messages",430],["T_WHITESPACE","   ",430],"=",["T_WHITESPACE"," ",430],["T_ARRAY","array",430],"(",")",";",["T_WHITESPACE","\n\n        ",430],["T_FOREACH","foreach",432],["T_WHITESPACE"," ",432],"(",["T_VARIABLE","$this",432],["T_OBJECT_OPERATOR","->",432],["T_STRING","_errors",432],["T_WHITESPACE"," ",432],["T_AS","as",432],["T_WHITESPACE"," ",432],["T_VARIABLE","$errorCode",432],["T_WHITESPACE"," ",432],["T_DOUBLE_ARROW","=>",432],["T_WHITESPACE"," ",432],["T_VARIABLE","$errorRows",432],")",["T_WHITESPACE"," ",432],"{",["T_WHITESPACE","\n            ",432],["T_IF","if",433],["T_WHITESPACE"," ",433],"(",["T_ISSET","isset",433],"(",["T_VARIABLE","$this",433],["T_OBJECT_OPERATOR","->",433],["T_STRING","_messageTemplates",433],"[",["T_VARIABLE","$errorCode",433],"]",")",")",["T_WHITESPACE"," ",433],"{",["T_WHITESPACE","\n                ",433],["T_VARIABLE","$errorCode",434],["T_WHITESPACE"," ",434],"=",["T_WHITESPACE"," ",434],["T_VARIABLE","$translator",434],["T_OBJECT_OPERATOR","->",434],["T_STRING","__",434],"(",["T_VARIABLE","$this",434],["T_OBJECT_OPERATOR","->",434],["T_STRING","_messageTemplates",434],"[",["T_VARIABLE","$errorCode",434],"]",")",";",["T_WHITESPACE","\n            ",434],"}",["T_WHITESPACE","\n            ",435],["T_FOREACH","foreach",436],["T_WHITESPACE"," ",436],"(",["T_VARIABLE","$errorRows",436],["T_WHITESPACE"," ",436],["T_AS","as",436],["T_WHITESPACE"," ",436],["T_VARIABLE","$errorRowData",436],")",["T_WHITESPACE"," ",436],"{",["T_WHITESPACE","\n                ",436],["T_VARIABLE","$key",437],["T_WHITESPACE"," ",437],"=",["T_WHITESPACE"," ",437],["T_VARIABLE","$errorRowData",437],"[",["T_LNUMBER","1",437],"]",["T_WHITESPACE"," ",437],"?",["T_WHITESPACE"," ",437],["T_STRING","sprintf",437],"(",["T_VARIABLE","$errorCode",437],",",["T_WHITESPACE"," ",437],["T_VARIABLE","$errorRowData",437],"[",["T_LNUMBER","1",437],"]",")",["T_WHITESPACE"," ",437],":",["T_WHITESPACE"," ",437],["T_VARIABLE","$errorCode",437],";",["T_WHITESPACE","\n                ",437],["T_VARIABLE","$messages",438],"[",["T_VARIABLE","$key",438],"]","[","]",["T_WHITESPACE"," ",438],"=",["T_WHITESPACE"," ",438],["T_VARIABLE","$errorRowData",438],"[",["T_LNUMBER","0",438],"]",";",["T_WHITESPACE","\n            ",438],"}",["T_WHITESPACE","\n        ",439],"}",["T_WHITESPACE","\n        ",440],["T_RETURN","return",441],["T_WHITESPACE"," ",441],["T_VARIABLE","$messages",441],";",["T_WHITESPACE","\n    ",441],"}",["T_WHITESPACE","\n\n    ",442],["T_DOC_COMMENT","\/**\n     * Returns error counter value.\n     *\n     * @return int\n     *\/",444],["T_WHITESPACE","\n    ",448],["T_PUBLIC","public",449],["T_WHITESPACE"," ",449],["T_FUNCTION","function",449],["T_WHITESPACE"," ",449],["T_STRING","getErrorsCount",449],"(",")",["T_WHITESPACE","\n    ",449],"{",["T_WHITESPACE","\n        ",450],["T_RETURN","return",451],["T_WHITESPACE"," ",451],["T_VARIABLE","$this",451],["T_OBJECT_OPERATOR","->",451],["T_STRING","_errorsCount",451],";",["T_WHITESPACE","\n    ",451],"}",["T_WHITESPACE","\n\n    ",452],["T_DOC_COMMENT","\/**\n     * Returns error limit value.\n     *\n     * @return int\n     *\/",454],["T_WHITESPACE","\n    ",458],["T_PUBLIC","public",459],["T_WHITESPACE"," ",459],["T_FUNCTION","function",459],["T_WHITESPACE"," ",459],["T_STRING","getErrorsLimit",459],"(",")",["T_WHITESPACE","\n    ",459],"{",["T_WHITESPACE","\n        ",460],["T_RETURN","return",461],["T_WHITESPACE"," ",461],["T_VARIABLE","$this",461],["T_OBJECT_OPERATOR","->",461],["T_STRING","_errorsLimit",461],";",["T_WHITESPACE","\n    ",461],"}",["T_WHITESPACE","\n\n    ",462],["T_DOC_COMMENT","\/**\n     * Returns invalid rows count.\n     *\n     * @return int\n     *\/",464],["T_WHITESPACE","\n    ",468],["T_PUBLIC","public",469],["T_WHITESPACE"," ",469],["T_FUNCTION","function",469],["T_WHITESPACE"," ",469],["T_STRING","getInvalidRowsCount",469],"(",")",["T_WHITESPACE","\n    ",469],"{",["T_WHITESPACE","\n        ",470],["T_RETURN","return",471],["T_WHITESPACE"," ",471],["T_STRING","count",471],"(",["T_VARIABLE","$this",471],["T_OBJECT_OPERATOR","->",471],["T_STRING","_invalidRows",471],")",";",["T_WHITESPACE","\n    ",471],"}",["T_WHITESPACE","\n\n    ",472],["T_DOC_COMMENT","\/**\n     * Returns model notices.\n     *\n     * @return array\n     *\/",474],["T_WHITESPACE","\n    ",478],["T_PUBLIC","public",479],["T_WHITESPACE"," ",479],["T_FUNCTION","function",479],["T_WHITESPACE"," ",479],["T_STRING","getNotices",479],"(",")",["T_WHITESPACE","\n    ",479],"{",["T_WHITESPACE","\n        ",480],["T_RETURN","return",481],["T_WHITESPACE"," ",481],["T_VARIABLE","$this",481],["T_OBJECT_OPERATOR","->",481],["T_STRING","_notices",481],";",["T_WHITESPACE","\n    ",481],"}",["T_WHITESPACE","\n\n    ",482],["T_DOC_COMMENT","\/**\n     * Returns number of checked entities.\n     *\n     * @return int\n     *\/",484],["T_WHITESPACE","\n    ",488],["T_PUBLIC","public",489],["T_WHITESPACE"," ",489],["T_FUNCTION","function",489],["T_WHITESPACE"," ",489],["T_STRING","getProcessedEntitiesCount",489],"(",")",["T_WHITESPACE","\n    ",489],"{",["T_WHITESPACE","\n        ",490],["T_RETURN","return",491],["T_WHITESPACE"," ",491],["T_VARIABLE","$this",491],["T_OBJECT_OPERATOR","->",491],["T_STRING","_processedEntitiesCount",491],";",["T_WHITESPACE","\n    ",491],"}",["T_WHITESPACE","\n\n    ",492],["T_DOC_COMMENT","\/**\n     * Returns number of checked rows.\n     *\n     * @return int\n     *\/",494],["T_WHITESPACE","\n    ",498],["T_PUBLIC","public",499],["T_WHITESPACE"," ",499],["T_FUNCTION","function",499],["T_WHITESPACE"," ",499],["T_STRING","getProcessedRowsCount",499],"(",")",["T_WHITESPACE","\n    ",499],"{",["T_WHITESPACE","\n        ",500],["T_RETURN","return",501],["T_WHITESPACE"," ",501],["T_VARIABLE","$this",501],["T_OBJECT_OPERATOR","->",501],["T_STRING","_processedRowsCount",501],";",["T_WHITESPACE","\n    ",501],"}",["T_WHITESPACE","\n\n    ",502],["T_DOC_COMMENT","\/**\n     * Source object getter.\n     *\n     * @throws Exception\n     * @return Mage_ImportExport_Model_Import_Adapter_Abstract\n     *\/",504],["T_WHITESPACE","\n    ",509],["T_PUBLIC","public",510],["T_WHITESPACE"," ",510],["T_FUNCTION","function",510],["T_WHITESPACE"," ",510],["T_STRING","getSource",510],"(",")",["T_WHITESPACE","\n    ",510],"{",["T_WHITESPACE","\n        ",511],["T_IF","if",512],["T_WHITESPACE"," ",512],"(","!",["T_VARIABLE","$this",512],["T_OBJECT_OPERATOR","->",512],["T_STRING","_source",512],")",["T_WHITESPACE"," ",512],"{",["T_WHITESPACE","\n            ",512],["T_STRING","Mage",513],["T_DOUBLE_COLON","::",513],["T_STRING","throwException",513],"(",["T_STRING","Mage",513],["T_DOUBLE_COLON","::",513],["T_STRING","helper",513],"(",["T_CONSTANT_ENCAPSED_STRING","'importexport'",513],")",["T_OBJECT_OPERATOR","->",513],["T_STRING","__",513],"(",["T_CONSTANT_ENCAPSED_STRING","'Source is not set'",513],")",")",";",["T_WHITESPACE","\n        ",513],"}",["T_WHITESPACE","\n        ",514],["T_RETURN","return",515],["T_WHITESPACE"," ",515],["T_VARIABLE","$this",515],["T_OBJECT_OPERATOR","->",515],["T_STRING","_source",515],";",["T_WHITESPACE","\n    ",515],"}",["T_WHITESPACE","\n\n    ",516],["T_DOC_COMMENT","\/**\n     * Import process start.\n     *\n     * @return bool Result of operation.\n     *\/",518],["T_WHITESPACE","\n    ",522],["T_PUBLIC","public",523],["T_WHITESPACE"," ",523],["T_FUNCTION","function",523],["T_WHITESPACE"," ",523],["T_STRING","importData",523],"(",")",["T_WHITESPACE","\n    ",523],"{",["T_WHITESPACE","\n        ",524],["T_RETURN","return",525],["T_WHITESPACE"," ",525],["T_VARIABLE","$this",525],["T_OBJECT_OPERATOR","->",525],["T_STRING","_importData",525],"(",")",";",["T_WHITESPACE","\n    ",525],"}",["T_WHITESPACE","\n\n    ",526],["T_DOC_COMMENT","\/**\n     * Is attribute contains particular data (not plain entity attribute).\n     *\n     * @param string $attrCode\n     * @return bool\n     *\/",528],["T_WHITESPACE","\n    ",533],["T_PUBLIC","public",534],["T_WHITESPACE"," ",534],["T_FUNCTION","function",534],["T_WHITESPACE"," ",534],["T_STRING","isAttributeParticular",534],"(",["T_VARIABLE","$attrCode",534],")",["T_WHITESPACE","\n    ",534],"{",["T_WHITESPACE","\n        ",535],["T_RETURN","return",536],["T_WHITESPACE"," ",536],["T_STRING","in_array",536],"(",["T_VARIABLE","$attrCode",536],",",["T_WHITESPACE"," ",536],["T_VARIABLE","$this",536],["T_OBJECT_OPERATOR","->",536],["T_STRING","_particularAttributes",536],")",";",["T_WHITESPACE","\n    ",536],"}",["T_WHITESPACE","\n\n    ",537],["T_DOC_COMMENT","\/**\n     * Check one attribute. Can be overridden in child.\n     *\n     * @param string $attrCode Attribute code\n     * @param array $attrParams Attribute params\n     * @param array $rowData Row data\n     * @param int $rowNum\n     * @return boolean\n     *\/",539],["T_WHITESPACE","\n    ",547],["T_PUBLIC","public",548],["T_WHITESPACE"," ",548],["T_FUNCTION","function",548],["T_WHITESPACE"," ",548],["T_STRING","isAttributeValid",548],"(",["T_VARIABLE","$attrCode",548],",",["T_WHITESPACE"," ",548],["T_ARRAY","array",548],["T_WHITESPACE"," ",548],["T_VARIABLE","$attrParams",548],",",["T_WHITESPACE"," ",548],["T_ARRAY","array",548],["T_WHITESPACE"," ",548],["T_VARIABLE","$rowData",548],",",["T_WHITESPACE"," ",548],["T_VARIABLE","$rowNum",548],")",["T_WHITESPACE","\n    ",548],"{",["T_WHITESPACE","\n        ",549],["T_SWITCH","switch",550],["T_WHITESPACE"," ",550],"(",["T_VARIABLE","$attrParams",550],"[",["T_CONSTANT_ENCAPSED_STRING","'type'",550],"]",")",["T_WHITESPACE"," ",550],"{",["T_WHITESPACE","\n            ",550],["T_CASE","case",551],["T_WHITESPACE"," ",551],["T_CONSTANT_ENCAPSED_STRING","'varchar'",551],":",["T_WHITESPACE","\n                ",551],["T_VARIABLE","$val",552],["T_WHITESPACE","   ",552],"=",["T_WHITESPACE"," ",552],["T_STRING","Mage",552],["T_DOUBLE_COLON","::",552],["T_STRING","helper",552],"(",["T_CONSTANT_ENCAPSED_STRING","'core\/string'",552],")",["T_OBJECT_OPERATOR","->",552],["T_STRING","cleanString",552],"(",["T_VARIABLE","$rowData",552],"[",["T_VARIABLE","$attrCode",552],"]",")",";",["T_WHITESPACE","\n                ",552],["T_VARIABLE","$valid",553],["T_WHITESPACE"," ",553],"=",["T_WHITESPACE"," ",553],["T_STRING","Mage",553],["T_DOUBLE_COLON","::",553],["T_STRING","helper",553],"(",["T_CONSTANT_ENCAPSED_STRING","'core\/string'",553],")",["T_OBJECT_OPERATOR","->",553],["T_STRING","strlen",553],"(",["T_VARIABLE","$val",553],")",["T_WHITESPACE"," ",553],"<",["T_WHITESPACE"," ",553],["T_STRING","self",553],["T_DOUBLE_COLON","::",553],["T_STRING","DB_MAX_VARCHAR_LENGTH",553],";",["T_WHITESPACE","\n                ",553],["T_BREAK","break",554],";",["T_WHITESPACE","\n            ",554],["T_CASE","case",555],["T_WHITESPACE"," ",555],["T_CONSTANT_ENCAPSED_STRING","'decimal'",555],":",["T_WHITESPACE","\n                ",555],["T_VARIABLE","$val",556],["T_WHITESPACE","   ",556],"=",["T_WHITESPACE"," ",556],["T_STRING","trim",556],"(",["T_VARIABLE","$rowData",556],"[",["T_VARIABLE","$attrCode",556],"]",")",";",["T_WHITESPACE","\n                ",556],["T_VARIABLE","$valid",557],["T_WHITESPACE"," ",557],"=",["T_WHITESPACE"," ",557],["T_DOUBLE_CAST","(float)",557],["T_VARIABLE","$val",557],["T_WHITESPACE"," ",557],["T_IS_EQUAL","==",557],["T_WHITESPACE"," ",557],["T_VARIABLE","$val",557],";",["T_WHITESPACE","\n                ",557],["T_BREAK","break",558],";",["T_WHITESPACE","\n            ",558],["T_CASE","case",559],["T_WHITESPACE"," ",559],["T_CONSTANT_ENCAPSED_STRING","'select'",559],":",["T_WHITESPACE","\n            ",559],["T_CASE","case",560],["T_WHITESPACE"," ",560],["T_CONSTANT_ENCAPSED_STRING","'multiselect'",560],":",["T_WHITESPACE","\n                ",560],["T_VARIABLE","$valid",561],["T_WHITESPACE"," ",561],"=",["T_WHITESPACE"," ",561],["T_ISSET","isset",561],"(",["T_VARIABLE","$attrParams",561],"[",["T_CONSTANT_ENCAPSED_STRING","'options'",561],"]","[",["T_STRING","strtolower",561],"(",["T_VARIABLE","$rowData",561],"[",["T_VARIABLE","$attrCode",561],"]",")","]",")",";",["T_WHITESPACE","\n                ",561],["T_BREAK","break",562],";",["T_WHITESPACE","\n            ",562],["T_CASE","case",563],["T_WHITESPACE"," ",563],["T_CONSTANT_ENCAPSED_STRING","'int'",563],":",["T_WHITESPACE","\n                ",563],["T_VARIABLE","$val",564],["T_WHITESPACE","   ",564],"=",["T_WHITESPACE"," ",564],["T_STRING","trim",564],"(",["T_VARIABLE","$rowData",564],"[",["T_VARIABLE","$attrCode",564],"]",")",";",["T_WHITESPACE","\n                ",564],["T_VARIABLE","$valid",565],["T_WHITESPACE"," ",565],"=",["T_WHITESPACE"," ",565],["T_INT_CAST","(int)",565],["T_VARIABLE","$val",565],["T_WHITESPACE"," ",565],["T_IS_EQUAL","==",565],["T_WHITESPACE"," ",565],["T_VARIABLE","$val",565],";",["T_WHITESPACE","\n                ",565],["T_BREAK","break",566],";",["T_WHITESPACE","\n            ",566],["T_CASE","case",567],["T_WHITESPACE"," ",567],["T_CONSTANT_ENCAPSED_STRING","'datetime'",567],":",["T_WHITESPACE","\n                ",567],["T_VARIABLE","$val",568],["T_WHITESPACE","   ",568],"=",["T_WHITESPACE"," ",568],["T_STRING","trim",568],"(",["T_VARIABLE","$rowData",568],"[",["T_VARIABLE","$attrCode",568],"]",")",";",["T_WHITESPACE","\n                ",568],["T_VARIABLE","$valid",569],["T_WHITESPACE"," ",569],"=",["T_WHITESPACE"," ",569],["T_STRING","strtotime",569],"(",["T_VARIABLE","$val",569],")",["T_WHITESPACE"," ",569],["T_IS_NOT_IDENTICAL","!==",569],["T_WHITESPACE"," ",569],["T_STRING","false",569],["T_WHITESPACE","\n                    ",569],["T_BOOLEAN_OR","||",570],["T_WHITESPACE"," ",570],["T_STRING","preg_match",570],"(",["T_CONSTANT_ENCAPSED_STRING","'\/^\\d{2}.\\d{2}.\\d{2,4}(?:\\s+\\d{1,2}.\\d{1,2}(?:.\\d{1,2})?)?$\/'",570],",",["T_WHITESPACE"," ",570],["T_VARIABLE","$val",570],")",";",["T_WHITESPACE","\n                ",570],["T_BREAK","break",571],";",["T_WHITESPACE","\n            ",571],["T_CASE","case",572],["T_WHITESPACE"," ",572],["T_CONSTANT_ENCAPSED_STRING","'text'",572],":",["T_WHITESPACE","\n                ",572],["T_VARIABLE","$val",573],["T_WHITESPACE","   ",573],"=",["T_WHITESPACE"," ",573],["T_STRING","Mage",573],["T_DOUBLE_COLON","::",573],["T_STRING","helper",573],"(",["T_CONSTANT_ENCAPSED_STRING","'core\/string'",573],")",["T_OBJECT_OPERATOR","->",573],["T_STRING","cleanString",573],"(",["T_VARIABLE","$rowData",573],"[",["T_VARIABLE","$attrCode",573],"]",")",";",["T_WHITESPACE","\n                ",573],["T_VARIABLE","$valid",574],["T_WHITESPACE"," ",574],"=",["T_WHITESPACE"," ",574],["T_STRING","Mage",574],["T_DOUBLE_COLON","::",574],["T_STRING","helper",574],"(",["T_CONSTANT_ENCAPSED_STRING","'core\/string'",574],")",["T_OBJECT_OPERATOR","->",574],["T_STRING","strlen",574],"(",["T_VARIABLE","$val",574],")",["T_WHITESPACE"," ",574],"<",["T_WHITESPACE"," ",574],["T_STRING","self",574],["T_DOUBLE_COLON","::",574],["T_STRING","DB_MAX_TEXT_LENGTH",574],";",["T_WHITESPACE","\n                ",574],["T_BREAK","break",575],";",["T_WHITESPACE","\n            ",575],["T_DEFAULT","default",576],":",["T_WHITESPACE","\n                ",576],["T_VARIABLE","$valid",577],["T_WHITESPACE"," ",577],"=",["T_WHITESPACE"," ",577],["T_STRING","true",577],";",["T_WHITESPACE","\n                ",577],["T_BREAK","break",578],";",["T_WHITESPACE","\n        ",578],"}",["T_WHITESPACE","\n\n        ",579],["T_IF","if",581],["T_WHITESPACE"," ",581],"(","!",["T_VARIABLE","$valid",581],")",["T_WHITESPACE"," ",581],"{",["T_WHITESPACE","\n            ",581],["T_VARIABLE","$this",582],["T_OBJECT_OPERATOR","->",582],["T_STRING","addRowError",582],"(",["T_STRING","Mage",582],["T_DOUBLE_COLON","::",582],["T_STRING","helper",582],"(",["T_CONSTANT_ENCAPSED_STRING","'importexport'",582],")",["T_OBJECT_OPERATOR","->",582],["T_STRING","__",582],"(",["T_CONSTANT_ENCAPSED_STRING","\"Invalid value for '%s'\"",582],")",",",["T_WHITESPACE"," ",582],["T_VARIABLE","$rowNum",582],",",["T_WHITESPACE"," ",582],["T_VARIABLE","$attrCode",582],")",";",["T_WHITESPACE","\n        ",582],"}",["T_WHITESPACE"," ",583],["T_ELSEIF","elseif",583],["T_WHITESPACE"," ",583],"(","!",["T_EMPTY","empty",583],"(",["T_VARIABLE","$attrParams",583],"[",["T_CONSTANT_ENCAPSED_STRING","'is_unique'",583],"]",")",")",["T_WHITESPACE"," ",583],"{",["T_WHITESPACE","\n            ",583],["T_IF","if",584],["T_WHITESPACE"," ",584],"(",["T_ISSET","isset",584],"(",["T_VARIABLE","$this",584],["T_OBJECT_OPERATOR","->",584],["T_STRING","_uniqueAttributes",584],"[",["T_VARIABLE","$attrCode",584],"]","[",["T_VARIABLE","$rowData",584],"[",["T_VARIABLE","$attrCode",584],"]","]",")",")",["T_WHITESPACE"," ",584],"{",["T_WHITESPACE","\n                ",584],["T_VARIABLE","$this",585],["T_OBJECT_OPERATOR","->",585],["T_STRING","addRowError",585],"(",["T_STRING","Mage",585],["T_DOUBLE_COLON","::",585],["T_STRING","helper",585],"(",["T_CONSTANT_ENCAPSED_STRING","'importexport'",585],")",["T_OBJECT_OPERATOR","->",585],["T_STRING","__",585],"(",["T_CONSTANT_ENCAPSED_STRING","\"Duplicate Unique Attribute for '%s'\"",585],")",",",["T_WHITESPACE"," ",585],["T_VARIABLE","$rowNum",585],",",["T_WHITESPACE"," ",585],["T_VARIABLE","$attrCode",585],")",";",["T_WHITESPACE","\n                ",585],["T_RETURN","return",586],["T_WHITESPACE"," ",586],["T_STRING","false",586],";",["T_WHITESPACE","\n            ",586],"}",["T_WHITESPACE","\n            ",587],["T_VARIABLE","$this",588],["T_OBJECT_OPERATOR","->",588],["T_STRING","_uniqueAttributes",588],"[",["T_VARIABLE","$attrCode",588],"]","[",["T_VARIABLE","$rowData",588],"[",["T_VARIABLE","$attrCode",588],"]","]",["T_WHITESPACE"," ",588],"=",["T_WHITESPACE"," ",588],["T_STRING","true",588],";",["T_WHITESPACE","\n        ",588],"}",["T_WHITESPACE","\n        ",589],["T_RETURN","return",590],["T_WHITESPACE"," ",590],["T_BOOL_CAST","(bool)",590],["T_WHITESPACE"," ",590],["T_VARIABLE","$valid",590],";",["T_WHITESPACE","\n    ",590],"}",["T_WHITESPACE","\n\n    ",591],["T_DOC_COMMENT","\/**\n     * Is all of data valid?\n     *\n     * @return bool\n     *\/",593],["T_WHITESPACE","\n    ",597],["T_PUBLIC","public",598],["T_WHITESPACE"," ",598],["T_FUNCTION","function",598],["T_WHITESPACE"," ",598],["T_STRING","isDataValid",598],"(",")",["T_WHITESPACE","\n    ",598],"{",["T_WHITESPACE","\n        ",599],["T_VARIABLE","$this",600],["T_OBJECT_OPERATOR","->",600],["T_STRING","validateData",600],"(",")",";",["T_WHITESPACE","\n        ",600],["T_RETURN","return",601],["T_WHITESPACE"," ",601],["T_LNUMBER","0",601],["T_WHITESPACE"," ",601],["T_IS_EQUAL","==",601],["T_WHITESPACE"," ",601],["T_VARIABLE","$this",601],["T_OBJECT_OPERATOR","->",601],["T_STRING","_errorsCount",601],";",["T_WHITESPACE","\n    ",601],"}",["T_WHITESPACE","\n\n    ",602],["T_DOC_COMMENT","\/**\n     * Import possibility getter.\n     *\n     * @return bool\n     *\/",604],["T_WHITESPACE","\n    ",608],["T_PUBLIC","public",609],["T_WHITESPACE"," ",609],["T_FUNCTION","function",609],["T_WHITESPACE"," ",609],["T_STRING","isImportAllowed",609],"(",")",["T_WHITESPACE","\n    ",609],"{",["T_WHITESPACE","\n        ",610],["T_RETURN","return",611],["T_WHITESPACE"," ",611],["T_VARIABLE","$this",611],["T_OBJECT_OPERATOR","->",611],["T_STRING","_importAllowed",611],";",["T_WHITESPACE","\n    ",611],"}",["T_WHITESPACE","\n\n    ",612],["T_DOC_COMMENT","\/**\n     * Returns TRUE if row is valid and not in skipped rows array.\n     *\n     * @param array $rowData\n     * @param int $rowNum\n     * @return bool\n     *\/",614],["T_WHITESPACE","\n    ",620],["T_PUBLIC","public",621],["T_WHITESPACE"," ",621],["T_FUNCTION","function",621],["T_WHITESPACE"," ",621],["T_STRING","isRowAllowedToImport",621],"(",["T_ARRAY","array",621],["T_WHITESPACE"," ",621],["T_VARIABLE","$rowData",621],",",["T_WHITESPACE"," ",621],["T_VARIABLE","$rowNum",621],")",["T_WHITESPACE","\n    ",621],"{",["T_WHITESPACE","\n        ",622],["T_RETURN","return",623],["T_WHITESPACE"," ",623],["T_VARIABLE","$this",623],["T_OBJECT_OPERATOR","->",623],["T_STRING","validateRow",623],"(",["T_VARIABLE","$rowData",623],",",["T_WHITESPACE"," ",623],["T_VARIABLE","$rowNum",623],")",["T_WHITESPACE"," ",623],["T_BOOLEAN_AND","&&",623],["T_WHITESPACE"," ",623],"!",["T_ISSET","isset",623],"(",["T_VARIABLE","$this",623],["T_OBJECT_OPERATOR","->",623],["T_STRING","_rowsToSkip",623],"[",["T_VARIABLE","$rowNum",623],"]",")",";",["T_WHITESPACE","\n    ",623],"}",["T_WHITESPACE","\n\n    ",624],["T_DOC_COMMENT","\/**\n     * Validate data row.\n     *\n     * @param array $rowData\n     * @param int $rowNum\n     * @return boolean\n     *\/",626],["T_WHITESPACE","\n    ",632],["T_ABSTRACT","abstract",633],["T_WHITESPACE"," ",633],["T_PUBLIC","public",633],["T_WHITESPACE"," ",633],["T_FUNCTION","function",633],["T_WHITESPACE"," ",633],["T_STRING","validateRow",633],"(",["T_ARRAY","array",633],["T_WHITESPACE"," ",633],["T_VARIABLE","$rowData",633],",",["T_WHITESPACE"," ",633],["T_VARIABLE","$rowNum",633],")",";",["T_WHITESPACE","\n\n    ",633],["T_DOC_COMMENT","\/**\n     * Set data from outside to change behavior. I.e. for setting some default parameters etc.\n     *\n     * @param array $params\n     * @return Mage_ImportExport_Model_Import_Entity_Abstract\n     *\/",635],["T_WHITESPACE","\n    ",640],["T_PUBLIC","public",641],["T_WHITESPACE"," ",641],["T_FUNCTION","function",641],["T_WHITESPACE"," ",641],["T_STRING","setParameters",641],"(",["T_ARRAY","array",641],["T_WHITESPACE"," ",641],["T_VARIABLE","$params",641],")",["T_WHITESPACE","\n    ",641],"{",["T_WHITESPACE","\n        ",642],["T_VARIABLE","$this",643],["T_OBJECT_OPERATOR","->",643],["T_STRING","_parameters",643],["T_WHITESPACE"," ",643],"=",["T_WHITESPACE"," ",643],["T_VARIABLE","$params",643],";",["T_WHITESPACE","\n        ",643],["T_RETURN","return",644],["T_WHITESPACE"," ",644],["T_VARIABLE","$this",644],";",["T_WHITESPACE","\n    ",644],"}",["T_WHITESPACE","\n\n    ",645],["T_DOC_COMMENT","\/**\n     * Source model setter.\n     *\n     * @param Mage_ImportExport_Model_Import_Adapter_Abstract $source\n     * @return Mage_ImportExport_Model_Import_Entity_Abstract\n     *\/",647],["T_WHITESPACE","\n    ",652],["T_PUBLIC","public",653],["T_WHITESPACE"," ",653],["T_FUNCTION","function",653],["T_WHITESPACE"," ",653],["T_STRING","setSource",653],"(",["T_STRING","Mage_ImportExport_Model_Import_Adapter_Abstract",653],["T_WHITESPACE"," ",653],["T_VARIABLE","$source",653],")",["T_WHITESPACE","\n    ",653],"{",["T_WHITESPACE","\n        ",654],["T_VARIABLE","$this",655],["T_OBJECT_OPERATOR","->",655],["T_STRING","_source",655],["T_WHITESPACE"," ",655],"=",["T_WHITESPACE"," ",655],["T_VARIABLE","$source",655],";",["T_WHITESPACE","\n        ",655],["T_VARIABLE","$this",656],["T_OBJECT_OPERATOR","->",656],["T_STRING","_dataValidated",656],["T_WHITESPACE"," ",656],"=",["T_WHITESPACE"," ",656],["T_STRING","false",656],";",["T_WHITESPACE","\n\n        ",656],["T_RETURN","return",658],["T_WHITESPACE"," ",658],["T_VARIABLE","$this",658],";",["T_WHITESPACE","\n    ",658],"}",["T_WHITESPACE","\n\n    ",659],["T_DOC_COMMENT","\/**\n     * Validate data.\n     *\n     * @throws Exception\n     * @return Mage_ImportExport_Model_Import_Entity_Abstract\n     *\/",661],["T_WHITESPACE","\n    ",666],["T_PUBLIC","public",667],["T_WHITESPACE"," ",667],["T_FUNCTION","function",667],["T_WHITESPACE"," ",667],["T_STRING","validateData",667],"(",")",["T_WHITESPACE","\n    ",667],"{",["T_WHITESPACE","\n        ",668],["T_IF","if",669],["T_WHITESPACE"," ",669],"(","!",["T_VARIABLE","$this",669],["T_OBJECT_OPERATOR","->",669],["T_STRING","_dataValidated",669],")",["T_WHITESPACE"," ",669],"{",["T_WHITESPACE","\n            ",669],["T_COMMENT","\/\/ does all permanent columns exists?\n",670],["T_WHITESPACE","            ",671],["T_IF","if",671],["T_WHITESPACE"," ",671],"(","(",["T_VARIABLE","$colsAbsent",671],["T_WHITESPACE"," ",671],"=",["T_WHITESPACE"," ",671],["T_STRING","array_diff",671],"(",["T_VARIABLE","$this",671],["T_OBJECT_OPERATOR","->",671],["T_STRING","_permanentAttributes",671],",",["T_WHITESPACE"," ",671],["T_VARIABLE","$this",671],["T_OBJECT_OPERATOR","->",671],["T_STRING","_getSource",671],"(",")",["T_OBJECT_OPERATOR","->",671],["T_STRING","getColNames",671],"(",")",")",")",")",["T_WHITESPACE"," ",671],"{",["T_WHITESPACE","\n                ",671],["T_STRING","Mage",672],["T_DOUBLE_COLON","::",672],["T_STRING","throwException",672],"(",["T_WHITESPACE","\n                    ",672],["T_STRING","Mage",673],["T_DOUBLE_COLON","::",673],["T_STRING","helper",673],"(",["T_CONSTANT_ENCAPSED_STRING","'importexport'",673],")",["T_OBJECT_OPERATOR","->",673],["T_STRING","__",673],"(",["T_CONSTANT_ENCAPSED_STRING","'Can not find required columns: %s'",673],",",["T_WHITESPACE"," ",673],["T_STRING","implode",673],"(",["T_CONSTANT_ENCAPSED_STRING","', '",673],",",["T_WHITESPACE"," ",673],["T_VARIABLE","$colsAbsent",673],")",")",["T_WHITESPACE","\n                ",673],")",";",["T_WHITESPACE","\n            ",674],"}",["T_WHITESPACE","\n\n            ",675],["T_COMMENT","\/\/ initialize validation related attributes\n",677],["T_WHITESPACE","            ",678],["T_VARIABLE","$this",678],["T_OBJECT_OPERATOR","->",678],["T_STRING","_errors",678],["T_WHITESPACE"," ",678],"=",["T_WHITESPACE"," ",678],["T_ARRAY","array",678],"(",")",";",["T_WHITESPACE","\n            ",678],["T_VARIABLE","$this",679],["T_OBJECT_OPERATOR","->",679],["T_STRING","_invalidRows",679],["T_WHITESPACE"," ",679],"=",["T_WHITESPACE"," ",679],["T_ARRAY","array",679],"(",")",";",["T_WHITESPACE","\n\n            ",679],["T_COMMENT","\/\/ check attribute columns names validity\n",681],["T_WHITESPACE","            ",682],["T_VARIABLE","$invalidColumns",682],["T_WHITESPACE"," ",682],"=",["T_WHITESPACE"," ",682],["T_ARRAY","array",682],"(",")",";",["T_WHITESPACE","\n\n            ",682],["T_FOREACH","foreach",684],["T_WHITESPACE"," ",684],"(",["T_VARIABLE","$this",684],["T_OBJECT_OPERATOR","->",684],["T_STRING","_getSource",684],"(",")",["T_OBJECT_OPERATOR","->",684],["T_STRING","getColNames",684],"(",")",["T_WHITESPACE"," ",684],["T_AS","as",684],["T_WHITESPACE"," ",684],["T_VARIABLE","$colName",684],")",["T_WHITESPACE"," ",684],"{",["T_WHITESPACE","\n                ",684],["T_IF","if",685],["T_WHITESPACE"," ",685],"(","!",["T_STRING","preg_match",685],"(",["T_CONSTANT_ENCAPSED_STRING","'\/^[a-z][a-z0-9_]*$\/'",685],",",["T_WHITESPACE"," ",685],["T_VARIABLE","$colName",685],")",["T_WHITESPACE"," ",685],["T_BOOLEAN_AND","&&",685],["T_WHITESPACE"," ",685],"!",["T_VARIABLE","$this",685],["T_OBJECT_OPERATOR","->",685],["T_STRING","isAttributeParticular",685],"(",["T_VARIABLE","$colName",685],")",")",["T_WHITESPACE"," ",685],"{",["T_WHITESPACE","\n                    ",685],["T_VARIABLE","$invalidColumns",686],"[","]",["T_WHITESPACE"," ",686],"=",["T_WHITESPACE"," ",686],["T_VARIABLE","$colName",686],";",["T_WHITESPACE","\n                ",686],"}",["T_WHITESPACE","\n            ",687],"}",["T_WHITESPACE","\n            ",688],["T_IF","if",689],["T_WHITESPACE"," ",689],"(",["T_VARIABLE","$invalidColumns",689],")",["T_WHITESPACE"," ",689],"{",["T_WHITESPACE","\n                ",689],["T_STRING","Mage",690],["T_DOUBLE_COLON","::",690],["T_STRING","throwException",690],"(",["T_WHITESPACE","\n                    ",690],["T_STRING","Mage",691],["T_DOUBLE_COLON","::",691],["T_STRING","helper",691],"(",["T_CONSTANT_ENCAPSED_STRING","'importexport'",691],")",["T_OBJECT_OPERATOR","->",691],["T_STRING","__",691],"(",["T_CONSTANT_ENCAPSED_STRING","'Column names: \"%s\" are invalid'",691],",",["T_WHITESPACE"," ",691],["T_STRING","implode",691],"(",["T_CONSTANT_ENCAPSED_STRING","'\", \"'",691],",",["T_WHITESPACE"," ",691],["T_VARIABLE","$invalidColumns",691],")",")",["T_WHITESPACE","\n                ",691],")",";",["T_WHITESPACE","\n            ",692],"}",["T_WHITESPACE","\n            ",693],["T_VARIABLE","$this",694],["T_OBJECT_OPERATOR","->",694],["T_STRING","_saveValidatedBunches",694],"(",")",";",["T_WHITESPACE","\n\n            ",694],["T_VARIABLE","$this",696],["T_OBJECT_OPERATOR","->",696],["T_STRING","_dataValidated",696],["T_WHITESPACE"," ",696],"=",["T_WHITESPACE"," ",696],["T_STRING","true",696],";",["T_WHITESPACE","\n        ",696],"}",["T_WHITESPACE","\n        ",697],["T_RETURN","return",698],["T_WHITESPACE"," ",698],["T_VARIABLE","$this",698],";",["T_WHITESPACE","\n    ",698],"}",["T_WHITESPACE","\n",699],"}",["T_WHITESPACE","\n",700]]
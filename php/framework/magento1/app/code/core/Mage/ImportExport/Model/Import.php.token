[["T_OPEN_TAG","<?php\n",1],["T_DOC_COMMENT","\/**\n * Magento\n *\n * NOTICE OF LICENSE\n *\n * This source file is subject to the Open Software License (OSL 3.0)\n * that is bundled with this package in the file LICENSE.txt.\n * It is also available through the world-wide-web at this URL:\n * http:\/\/opensource.org\/licenses\/osl-3.0.php\n * If you did not receive a copy of the license and are unable to\n * obtain it through the world-wide-web, please send an email\n * to license@magento.com so we can send you a copy immediately.\n *\n * DISCLAIMER\n *\n * Do not edit or add to this file if you wish to upgrade Magento to newer\n * versions in the future. If you wish to customize Magento for your\n * needs please refer to http:\/\/www.magento.com for more information.\n *\n * @category    Mage\n * @package     Mage_ImportExport\n * @copyright  Copyright (c) 2006-2016 X.commerce, Inc. and affiliates (http:\/\/www.magento.com)\n * @license    http:\/\/opensource.org\/licenses\/osl-3.0.php  Open Software License (OSL 3.0)\n *\/",2],["T_WHITESPACE","\n\n",25],["T_DOC_COMMENT","\/**\n * Import model\n *\n * @category    Mage\n * @package     Mage_ImportExport\n * @author      Magento Core Team <core@magentocommerce.com>\n *\/",27],["T_WHITESPACE","\n",33],["T_CLASS","class",34],["T_WHITESPACE"," ",34],["T_STRING","Mage_ImportExport_Model_Import",34],["T_WHITESPACE"," ",34],["T_EXTENDS","extends",34],["T_WHITESPACE"," ",34],["T_STRING","Mage_ImportExport_Model_Abstract",34],["T_WHITESPACE","\n",34],"{",["T_WHITESPACE","\n    ",35],["T_DOC_COMMENT","\/**\n     * Key in config with entities.\n     *\/",36],["T_WHITESPACE","\n    ",38],["T_CONST","const",39],["T_WHITESPACE"," ",39],["T_STRING","CONFIG_KEY_ENTITIES",39],["T_WHITESPACE","  ",39],"=",["T_WHITESPACE"," ",39],["T_CONSTANT_ENCAPSED_STRING","'global\/importexport\/import_entities'",39],";",["T_WHITESPACE","\n\n    ",39],["T_DOC_COMMENT","\/**\n     * Import behavior.\n     *\/",41],["T_WHITESPACE","\n    ",43],["T_CONST","const",44],["T_WHITESPACE"," ",44],["T_STRING","BEHAVIOR_APPEND",44],["T_WHITESPACE","  ",44],"=",["T_WHITESPACE"," ",44],["T_CONSTANT_ENCAPSED_STRING","'append'",44],";",["T_WHITESPACE","\n    ",44],["T_CONST","const",45],["T_WHITESPACE"," ",45],["T_STRING","BEHAVIOR_REPLACE",45],["T_WHITESPACE"," ",45],"=",["T_WHITESPACE"," ",45],["T_CONSTANT_ENCAPSED_STRING","'replace'",45],";",["T_WHITESPACE","\n    ",45],["T_CONST","const",46],["T_WHITESPACE"," ",46],["T_STRING","BEHAVIOR_DELETE",46],["T_WHITESPACE","  ",46],"=",["T_WHITESPACE"," ",46],["T_CONSTANT_ENCAPSED_STRING","'delete'",46],";",["T_WHITESPACE","\n\n    ",46],["T_DOC_COMMENT","\/**\n     * Form field names (and IDs)\n     *\/",48],["T_WHITESPACE","\n    ",50],["T_CONST","const",51],["T_WHITESPACE"," ",51],["T_STRING","FIELD_NAME_SOURCE_FILE",51],["T_WHITESPACE"," ",51],"=",["T_WHITESPACE"," ",51],["T_CONSTANT_ENCAPSED_STRING","'import_file'",51],";",["T_WHITESPACE","\n    ",51],["T_CONST","const",52],["T_WHITESPACE"," ",52],["T_STRING","FIELD_NAME_IMG_ARCHIVE_FILE",52],["T_WHITESPACE"," ",52],"=",["T_WHITESPACE"," ",52],["T_CONSTANT_ENCAPSED_STRING","'import_image_archive'",52],";",["T_WHITESPACE","\n\n    ",52],["T_DOC_COMMENT","\/**\n     * Import constants\n     *\n     *\/",54],["T_WHITESPACE","\n    ",57],["T_CONST","const",58],["T_WHITESPACE"," ",58],["T_STRING","DEFAULT_SIZE",58],["T_WHITESPACE","      ",58],"=",["T_WHITESPACE"," ",58],["T_LNUMBER","50",58],";",["T_WHITESPACE","\n    ",58],["T_CONST","const",59],["T_WHITESPACE"," ",59],["T_STRING","MAX_IMPORT_CHUNKS",59],["T_WHITESPACE"," ",59],"=",["T_WHITESPACE"," ",59],["T_LNUMBER","4",59],";",["T_WHITESPACE","\n\n    ",59],["T_DOC_COMMENT","\/**\n     * Entity adapter.\n     *\n     * @var Mage_ImportExport_Model_Import_Entity_Abstract\n     *\/",61],["T_WHITESPACE","\n    ",65],["T_PROTECTED","protected",66],["T_WHITESPACE"," ",66],["T_VARIABLE","$_entityAdapter",66],";",["T_WHITESPACE","\n\n    ",66],["T_DOC_COMMENT","\/**\n     * Entity invalidated indexes.\n     *\n     * @var Mage_ImportExport_Model_Import_Entity_Abstract\n     *\/",68],["T_WHITESPACE","\n     ",72],["T_PROTECTED","protected",73],["T_WHITESPACE"," ",73],["T_STATIC","static",73],["T_WHITESPACE"," ",73],["T_VARIABLE","$_entityInvalidatedIndexes",73],["T_WHITESPACE"," ",73],"=",["T_WHITESPACE"," ",73],["T_ARRAY","array",73],["T_WHITESPACE"," ",73],"(",["T_WHITESPACE","\n        ",73],["T_CONSTANT_ENCAPSED_STRING","'catalog_product'",74],["T_WHITESPACE"," ",74],["T_DOUBLE_ARROW","=>",74],["T_WHITESPACE"," ",74],["T_ARRAY","array",74],["T_WHITESPACE"," ",74],"(",["T_WHITESPACE","\n            ",74],["T_CONSTANT_ENCAPSED_STRING","'catalog_product_price'",75],",",["T_WHITESPACE","\n            ",75],["T_CONSTANT_ENCAPSED_STRING","'catalog_category_product'",76],",",["T_WHITESPACE","\n            ",76],["T_CONSTANT_ENCAPSED_STRING","'catalogsearch_fulltext'",77],",",["T_WHITESPACE","\n            ",77],["T_CONSTANT_ENCAPSED_STRING","'catalog_product_flat'",78],",",["T_WHITESPACE","\n        ",78],")",["T_WHITESPACE","\n    ",79],")",";",["T_WHITESPACE","\n\n    ",80],["T_DOC_COMMENT","\/**\n     * Create instance of entity adapter and returns it.\n     *\n     * @throws Mage_Core_Exception\n     * @return Mage_ImportExport_Model_Import_Entity_Abstract\n     *\/",82],["T_WHITESPACE","\n    ",87],["T_PROTECTED","protected",88],["T_WHITESPACE"," ",88],["T_FUNCTION","function",88],["T_WHITESPACE"," ",88],["T_STRING","_getEntityAdapter",88],"(",")",["T_WHITESPACE","\n    ",88],"{",["T_WHITESPACE","\n        ",89],["T_IF","if",90],["T_WHITESPACE"," ",90],"(","!",["T_VARIABLE","$this",90],["T_OBJECT_OPERATOR","->",90],["T_STRING","_entityAdapter",90],")",["T_WHITESPACE"," ",90],"{",["T_WHITESPACE","\n            ",90],["T_VARIABLE","$validTypes",91],["T_WHITESPACE"," ",91],"=",["T_WHITESPACE"," ",91],["T_STRING","Mage_ImportExport_Model_Config",91],["T_DOUBLE_COLON","::",91],["T_STRING","getModels",91],"(",["T_STRING","self",91],["T_DOUBLE_COLON","::",91],["T_STRING","CONFIG_KEY_ENTITIES",91],")",";",["T_WHITESPACE","\n\n            ",91],["T_IF","if",93],["T_WHITESPACE"," ",93],"(",["T_ISSET","isset",93],"(",["T_VARIABLE","$validTypes",93],"[",["T_VARIABLE","$this",93],["T_OBJECT_OPERATOR","->",93],["T_STRING","getEntity",93],"(",")","]",")",")",["T_WHITESPACE"," ",93],"{",["T_WHITESPACE","\n                ",93],["T_TRY","try",94],["T_WHITESPACE"," ",94],"{",["T_WHITESPACE","\n                    ",94],["T_VARIABLE","$this",95],["T_OBJECT_OPERATOR","->",95],["T_STRING","_entityAdapter",95],["T_WHITESPACE"," ",95],"=",["T_WHITESPACE"," ",95],["T_STRING","Mage",95],["T_DOUBLE_COLON","::",95],["T_STRING","getModel",95],"(",["T_VARIABLE","$validTypes",95],"[",["T_VARIABLE","$this",95],["T_OBJECT_OPERATOR","->",95],["T_STRING","getEntity",95],"(",")","]","[",["T_CONSTANT_ENCAPSED_STRING","'model'",95],"]",")",";",["T_WHITESPACE","\n                ",95],"}",["T_WHITESPACE"," ",96],["T_CATCH","catch",96],["T_WHITESPACE"," ",96],"(",["T_STRING","Exception",96],["T_WHITESPACE"," ",96],["T_VARIABLE","$e",96],")",["T_WHITESPACE"," ",96],"{",["T_WHITESPACE","\n                    ",96],["T_STRING","Mage",97],["T_DOUBLE_COLON","::",97],["T_STRING","logException",97],"(",["T_VARIABLE","$e",97],")",";",["T_WHITESPACE","\n                    ",97],["T_STRING","Mage",98],["T_DOUBLE_COLON","::",98],["T_STRING","throwException",98],"(",["T_WHITESPACE","\n                        ",98],["T_STRING","Mage",99],["T_DOUBLE_COLON","::",99],["T_STRING","helper",99],"(",["T_CONSTANT_ENCAPSED_STRING","'importexport'",99],")",["T_OBJECT_OPERATOR","->",99],["T_STRING","__",99],"(",["T_CONSTANT_ENCAPSED_STRING","'Invalid entity model'",99],")",["T_WHITESPACE","\n                    ",99],")",";",["T_WHITESPACE","\n                ",100],"}",["T_WHITESPACE","\n                ",101],["T_IF","if",102],["T_WHITESPACE"," ",102],"(","!","(",["T_VARIABLE","$this",102],["T_OBJECT_OPERATOR","->",102],["T_STRING","_entityAdapter",102],["T_WHITESPACE"," ",102],["T_INSTANCEOF","instanceof",102],["T_WHITESPACE"," ",102],["T_STRING","Mage_ImportExport_Model_Import_Entity_Abstract",102],")",")",["T_WHITESPACE"," ",102],"{",["T_WHITESPACE","\n                    ",102],["T_STRING","Mage",103],["T_DOUBLE_COLON","::",103],["T_STRING","throwException",103],"(",["T_WHITESPACE","\n                        ",103],["T_STRING","Mage",104],["T_DOUBLE_COLON","::",104],["T_STRING","helper",104],"(",["T_CONSTANT_ENCAPSED_STRING","'importexport'",104],")",["T_OBJECT_OPERATOR","->",104],["T_STRING","__",104],"(",["T_CONSTANT_ENCAPSED_STRING","'Entity adapter object must be an instance of Mage_ImportExport_Model_Import_Entity_Abstract'",104],")",["T_WHITESPACE","\n                    ",104],")",";",["T_WHITESPACE","\n                ",105],"}",["T_WHITESPACE","\n            ",106],"}",["T_WHITESPACE"," ",107],["T_ELSE","else",107],["T_WHITESPACE"," ",107],"{",["T_WHITESPACE","\n                ",107],["T_STRING","Mage",108],["T_DOUBLE_COLON","::",108],["T_STRING","throwException",108],"(",["T_STRING","Mage",108],["T_DOUBLE_COLON","::",108],["T_STRING","helper",108],"(",["T_CONSTANT_ENCAPSED_STRING","'importexport'",108],")",["T_OBJECT_OPERATOR","->",108],["T_STRING","__",108],"(",["T_CONSTANT_ENCAPSED_STRING","'Invalid entity'",108],")",")",";",["T_WHITESPACE","\n            ",108],"}",["T_WHITESPACE","\n            ",109],["T_COMMENT","\/\/ check for entity codes integrity\n",110],["T_WHITESPACE","            ",111],["T_IF","if",111],["T_WHITESPACE"," ",111],"(",["T_VARIABLE","$this",111],["T_OBJECT_OPERATOR","->",111],["T_STRING","getEntity",111],"(",")",["T_WHITESPACE"," ",111],["T_IS_NOT_EQUAL","!=",111],["T_WHITESPACE"," ",111],["T_VARIABLE","$this",111],["T_OBJECT_OPERATOR","->",111],["T_STRING","_entityAdapter",111],["T_OBJECT_OPERATOR","->",111],["T_STRING","getEntityTypeCode",111],"(",")",")",["T_WHITESPACE"," ",111],"{",["T_WHITESPACE","\n                ",111],["T_STRING","Mage",112],["T_DOUBLE_COLON","::",112],["T_STRING","throwException",112],"(",["T_WHITESPACE","\n                    ",112],["T_STRING","Mage",113],["T_DOUBLE_COLON","::",113],["T_STRING","helper",113],"(",["T_CONSTANT_ENCAPSED_STRING","'importexport'",113],")",["T_OBJECT_OPERATOR","->",113],["T_STRING","__",113],"(",["T_CONSTANT_ENCAPSED_STRING","'Input entity code is not equal to entity adapter code'",113],")",["T_WHITESPACE","\n                ",113],")",";",["T_WHITESPACE","\n            ",114],"}",["T_WHITESPACE","\n            ",115],["T_VARIABLE","$this",116],["T_OBJECT_OPERATOR","->",116],["T_STRING","_entityAdapter",116],["T_OBJECT_OPERATOR","->",116],["T_STRING","setParameters",116],"(",["T_VARIABLE","$this",116],["T_OBJECT_OPERATOR","->",116],["T_STRING","getData",116],"(",")",")",";",["T_WHITESPACE","\n        ",116],"}",["T_WHITESPACE","\n        ",117],["T_RETURN","return",118],["T_WHITESPACE"," ",118],["T_VARIABLE","$this",118],["T_OBJECT_OPERATOR","->",118],["T_STRING","_entityAdapter",118],";",["T_WHITESPACE","\n    ",118],"}",["T_WHITESPACE","\n\n    ",119],["T_DOC_COMMENT","\/**\n     * Returns source adapter object.\n     *\n     * @param string $sourceFile Full path to source file\n     * @return Mage_ImportExport_Model_Import_Adapter_Abstract\n     *\/",121],["T_WHITESPACE","\n    ",126],["T_PROTECTED","protected",127],["T_WHITESPACE"," ",127],["T_FUNCTION","function",127],["T_WHITESPACE"," ",127],["T_STRING","_getSourceAdapter",127],"(",["T_VARIABLE","$sourceFile",127],")",["T_WHITESPACE","\n    ",127],"{",["T_WHITESPACE","\n        ",128],["T_RETURN","return",129],["T_WHITESPACE"," ",129],["T_STRING","Mage_ImportExport_Model_Import_Adapter",129],["T_DOUBLE_COLON","::",129],["T_STRING","findAdapterFor",129],"(",["T_VARIABLE","$sourceFile",129],")",";",["T_WHITESPACE","\n    ",129],"}",["T_WHITESPACE","\n\n    ",130],["T_DOC_COMMENT","\/**\n     * Return operation result messages\n     *\n     * @param bool $validationResult\n     * @return array\n     *\/",132],["T_WHITESPACE","\n    ",137],["T_PUBLIC","public",138],["T_WHITESPACE"," ",138],["T_FUNCTION","function",138],["T_WHITESPACE"," ",138],["T_STRING","getOperationResultMessages",138],"(",["T_VARIABLE","$validationResult",138],")",["T_WHITESPACE","\n    ",138],"{",["T_WHITESPACE","\n        ",139],["T_VARIABLE","$messages",140],["T_WHITESPACE"," ",140],"=",["T_WHITESPACE"," ",140],["T_ARRAY","array",140],"(",")",";",["T_WHITESPACE","\n        ",140],["T_IF","if",141],["T_WHITESPACE"," ",141],"(",["T_VARIABLE","$this",141],["T_OBJECT_OPERATOR","->",141],["T_STRING","getProcessedRowsCount",141],"(",")",")",["T_WHITESPACE"," ",141],"{",["T_WHITESPACE","\n            ",141],["T_IF","if",142],["T_WHITESPACE"," ",142],"(","!",["T_VARIABLE","$validationResult",142],")",["T_WHITESPACE"," ",142],"{",["T_WHITESPACE","\n                ",142],["T_IF","if",143],["T_WHITESPACE"," ",143],"(",["T_VARIABLE","$this",143],["T_OBJECT_OPERATOR","->",143],["T_STRING","getProcessedRowsCount",143],"(",")",["T_WHITESPACE"," ",143],["T_IS_EQUAL","==",143],["T_WHITESPACE"," ",143],["T_VARIABLE","$this",143],["T_OBJECT_OPERATOR","->",143],["T_STRING","getInvalidRowsCount",143],"(",")",")",["T_WHITESPACE"," ",143],"{",["T_WHITESPACE","\n                    ",143],["T_VARIABLE","$messages",144],"[","]",["T_WHITESPACE"," ",144],"=",["T_WHITESPACE"," ",144],["T_STRING","Mage",144],["T_DOUBLE_COLON","::",144],["T_STRING","helper",144],"(",["T_CONSTANT_ENCAPSED_STRING","'importexport'",144],")",["T_OBJECT_OPERATOR","->",144],["T_STRING","__",144],"(",["T_CONSTANT_ENCAPSED_STRING","'File is totally invalid. Please fix errors and re-upload file'",144],")",";",["T_WHITESPACE","\n                ",144],"}",["T_WHITESPACE"," ",145],["T_ELSEIF","elseif",145],["T_WHITESPACE"," ",145],"(",["T_VARIABLE","$this",145],["T_OBJECT_OPERATOR","->",145],["T_STRING","getErrorsCount",145],"(",")",["T_WHITESPACE"," ",145],["T_IS_GREATER_OR_EQUAL",">=",145],["T_WHITESPACE"," ",145],["T_VARIABLE","$this",145],["T_OBJECT_OPERATOR","->",145],["T_STRING","getErrorsLimit",145],"(",")",")",["T_WHITESPACE"," ",145],"{",["T_WHITESPACE","\n                    ",145],["T_VARIABLE","$messages",146],"[","]",["T_WHITESPACE"," ",146],"=",["T_WHITESPACE"," ",146],["T_STRING","Mage",146],["T_DOUBLE_COLON","::",146],["T_STRING","helper",146],"(",["T_CONSTANT_ENCAPSED_STRING","'importexport'",146],")",["T_OBJECT_OPERATOR","->",146],["T_STRING","__",146],"(",["T_CONSTANT_ENCAPSED_STRING","'Errors limit (%d) reached. Please fix errors and re-upload file'",146],",",["T_WHITESPACE"," ",146],["T_VARIABLE","$this",146],["T_OBJECT_OPERATOR","->",146],["T_STRING","getErrorsLimit",146],"(",")",")",";",["T_WHITESPACE","\n                ",146],"}",["T_WHITESPACE"," ",147],["T_ELSE","else",147],["T_WHITESPACE"," ",147],"{",["T_WHITESPACE","\n                    ",147],["T_IF","if",148],["T_WHITESPACE"," ",148],"(",["T_VARIABLE","$this",148],["T_OBJECT_OPERATOR","->",148],["T_STRING","isImportAllowed",148],"(",")",")",["T_WHITESPACE"," ",148],"{",["T_WHITESPACE","\n                        ",148],["T_VARIABLE","$messages",149],"[","]",["T_WHITESPACE"," ",149],"=",["T_WHITESPACE"," ",149],["T_STRING","Mage",149],["T_DOUBLE_COLON","::",149],["T_STRING","helper",149],"(",["T_CONSTANT_ENCAPSED_STRING","'importexport'",149],")",["T_OBJECT_OPERATOR","->",149],["T_STRING","__",149],"(",["T_CONSTANT_ENCAPSED_STRING","'Please fix errors and re-upload file'",149],")",";",["T_WHITESPACE","\n                    ",149],"}",["T_WHITESPACE"," ",150],["T_ELSE","else",150],["T_WHITESPACE"," ",150],"{",["T_WHITESPACE","\n                        ",150],["T_VARIABLE","$messages",151],"[","]",["T_WHITESPACE"," ",151],"=",["T_WHITESPACE"," ",151],["T_STRING","Mage",151],["T_DOUBLE_COLON","::",151],["T_STRING","helper",151],"(",["T_CONSTANT_ENCAPSED_STRING","'importexport'",151],")",["T_OBJECT_OPERATOR","->",151],["T_STRING","__",151],"(",["T_CONSTANT_ENCAPSED_STRING","'File is partially valid, but import is not possible'",151],")",";",["T_WHITESPACE","\n                    ",151],"}",["T_WHITESPACE","\n                ",152],"}",["T_WHITESPACE","\n                ",153],["T_COMMENT","\/\/ errors info\n",154],["T_WHITESPACE","                ",155],["T_FOREACH","foreach",155],["T_WHITESPACE"," ",155],"(",["T_VARIABLE","$this",155],["T_OBJECT_OPERATOR","->",155],["T_STRING","getErrors",155],"(",")",["T_WHITESPACE"," ",155],["T_AS","as",155],["T_WHITESPACE"," ",155],["T_VARIABLE","$errorCode",155],["T_WHITESPACE"," ",155],["T_DOUBLE_ARROW","=>",155],["T_WHITESPACE"," ",155],["T_VARIABLE","$rows",155],")",["T_WHITESPACE"," ",155],"{",["T_WHITESPACE","\n                    ",155],["T_VARIABLE","$error",156],["T_WHITESPACE"," ",156],"=",["T_WHITESPACE"," ",156],["T_VARIABLE","$errorCode",156],["T_WHITESPACE"," ",156],".",["T_WHITESPACE"," ",156],["T_CONSTANT_ENCAPSED_STRING","' '",156],["T_WHITESPACE","\n                        ",156],".",["T_WHITESPACE"," ",157],["T_STRING","Mage",157],["T_DOUBLE_COLON","::",157],["T_STRING","helper",157],"(",["T_CONSTANT_ENCAPSED_STRING","'importexport'",157],")",["T_OBJECT_OPERATOR","->",157],["T_STRING","__",157],"(",["T_CONSTANT_ENCAPSED_STRING","'in rows'",157],")",["T_WHITESPACE"," ",157],".",["T_WHITESPACE"," ",157],["T_CONSTANT_ENCAPSED_STRING","': '",157],["T_WHITESPACE","\n                        ",157],".",["T_WHITESPACE"," ",158],["T_STRING","implode",158],"(",["T_CONSTANT_ENCAPSED_STRING","', '",158],",",["T_WHITESPACE"," ",158],["T_VARIABLE","$rows",158],")",";",["T_WHITESPACE","\n                    ",158],["T_VARIABLE","$messages",159],"[","]",["T_WHITESPACE"," ",159],"=",["T_WHITESPACE"," ",159],["T_VARIABLE","$error",159],";",["T_WHITESPACE","\n                ",159],"}",["T_WHITESPACE","\n            ",160],"}",["T_WHITESPACE"," ",161],["T_ELSE","else",161],["T_WHITESPACE"," ",161],"{",["T_WHITESPACE","\n                ",161],["T_IF","if",162],["T_WHITESPACE"," ",162],"(",["T_VARIABLE","$this",162],["T_OBJECT_OPERATOR","->",162],["T_STRING","isImportAllowed",162],"(",")",")",["T_WHITESPACE"," ",162],"{",["T_WHITESPACE","\n                    ",162],["T_VARIABLE","$messages",163],"[","]",["T_WHITESPACE"," ",163],"=",["T_WHITESPACE"," ",163],["T_STRING","Mage",163],["T_DOUBLE_COLON","::",163],["T_STRING","helper",163],"(",["T_CONSTANT_ENCAPSED_STRING","'importexport'",163],")",["T_OBJECT_OPERATOR","->",163],["T_STRING","__",163],"(",["T_CONSTANT_ENCAPSED_STRING","'Validation finished successfully'",163],")",";",["T_WHITESPACE","\n                ",163],"}",["T_WHITESPACE"," ",164],["T_ELSE","else",164],["T_WHITESPACE"," ",164],"{",["T_WHITESPACE","\n                    ",164],["T_VARIABLE","$messages",165],"[","]",["T_WHITESPACE"," ",165],"=",["T_WHITESPACE"," ",165],["T_STRING","Mage",165],["T_DOUBLE_COLON","::",165],["T_STRING","helper",165],"(",["T_CONSTANT_ENCAPSED_STRING","'importexport'",165],")",["T_OBJECT_OPERATOR","->",165],["T_STRING","__",165],"(",["T_CONSTANT_ENCAPSED_STRING","'File is valid, but import is not possible'",165],")",";",["T_WHITESPACE","\n                ",165],"}",["T_WHITESPACE","\n            ",166],"}",["T_WHITESPACE","\n            ",167],["T_VARIABLE","$notices",168],["T_WHITESPACE"," ",168],"=",["T_WHITESPACE"," ",168],["T_VARIABLE","$this",168],["T_OBJECT_OPERATOR","->",168],["T_STRING","getNotices",168],"(",")",";",["T_WHITESPACE","\n            ",168],["T_IF","if",169],["T_WHITESPACE"," ",169],"(",["T_STRING","is_array",169],"(",["T_VARIABLE","$notices",169],")",")",["T_WHITESPACE"," ",169],"{",["T_WHITESPACE","\n                ",169],["T_VARIABLE","$messages",170],["T_WHITESPACE"," ",170],"=",["T_WHITESPACE"," ",170],["T_STRING","array_merge",170],"(",["T_VARIABLE","$messages",170],",",["T_WHITESPACE"," ",170],["T_VARIABLE","$notices",170],")",";",["T_WHITESPACE","\n            ",170],"}",["T_WHITESPACE","\n            ",171],["T_VARIABLE","$messages",172],"[","]",["T_WHITESPACE"," ",172],"=",["T_WHITESPACE"," ",172],["T_STRING","Mage",172],["T_DOUBLE_COLON","::",172],["T_STRING","helper",172],"(",["T_CONSTANT_ENCAPSED_STRING","'importexport'",172],")",["T_OBJECT_OPERATOR","->",172],["T_STRING","__",172],"(",["T_CONSTANT_ENCAPSED_STRING","'Checked rows: %d, checked entities: %d, invalid rows: %d, total errors: %d'",172],",",["T_WHITESPACE"," ",172],["T_VARIABLE","$this",172],["T_OBJECT_OPERATOR","->",172],["T_STRING","getProcessedRowsCount",172],"(",")",",",["T_WHITESPACE"," ",172],["T_VARIABLE","$this",172],["T_OBJECT_OPERATOR","->",172],["T_STRING","getProcessedEntitiesCount",172],"(",")",",",["T_WHITESPACE"," ",172],["T_VARIABLE","$this",172],["T_OBJECT_OPERATOR","->",172],["T_STRING","getInvalidRowsCount",172],"(",")",",",["T_WHITESPACE"," ",172],["T_VARIABLE","$this",172],["T_OBJECT_OPERATOR","->",172],["T_STRING","getErrorsCount",172],"(",")",")",";",["T_WHITESPACE","\n        ",172],"}",["T_WHITESPACE"," ",173],["T_ELSE","else",173],["T_WHITESPACE"," ",173],"{",["T_WHITESPACE","\n            ",173],["T_VARIABLE","$messages",174],"[","]",["T_WHITESPACE"," ",174],"=",["T_WHITESPACE"," ",174],["T_STRING","Mage",174],["T_DOUBLE_COLON","::",174],["T_STRING","helper",174],"(",["T_CONSTANT_ENCAPSED_STRING","'importexport'",174],")",["T_OBJECT_OPERATOR","->",174],["T_STRING","__",174],"(",["T_CONSTANT_ENCAPSED_STRING","'File does not contain data.'",174],")",";",["T_WHITESPACE","\n        ",174],"}",["T_WHITESPACE","\n        ",175],["T_RETURN","return",176],["T_WHITESPACE"," ",176],["T_VARIABLE","$messages",176],";",["T_WHITESPACE","\n    ",176],"}",["T_WHITESPACE","\n\n    ",177],["T_DOC_COMMENT","\/**\n     * Get attribute type for upcoming validation.\n     *\n     * @param Mage_Eav_Model_Entity_Attribute $attribute\n     * @return string\n     *\/",179],["T_WHITESPACE","\n    ",184],["T_PUBLIC","public",185],["T_WHITESPACE"," ",185],["T_STATIC","static",185],["T_WHITESPACE"," ",185],["T_FUNCTION","function",185],["T_WHITESPACE"," ",185],["T_STRING","getAttributeType",185],"(",["T_STRING","Mage_Eav_Model_Entity_Attribute",185],["T_WHITESPACE"," ",185],["T_VARIABLE","$attribute",185],")",["T_WHITESPACE","\n    ",185],"{",["T_WHITESPACE","\n        ",186],["T_IF","if",187],["T_WHITESPACE"," ",187],"(",["T_VARIABLE","$attribute",187],["T_OBJECT_OPERATOR","->",187],["T_STRING","usesSource",187],"(",")",")",["T_WHITESPACE"," ",187],"{",["T_WHITESPACE","\n            ",187],["T_RETURN","return",188],["T_WHITESPACE"," ",188],["T_VARIABLE","$attribute",188],["T_OBJECT_OPERATOR","->",188],["T_STRING","getFrontendInput",188],"(",")",["T_WHITESPACE"," ",188],["T_IS_EQUAL","==",188],["T_WHITESPACE"," ",188],["T_CONSTANT_ENCAPSED_STRING","'multiselect'",188],["T_WHITESPACE"," ",188],"?",["T_WHITESPACE","\n                ",188],["T_CONSTANT_ENCAPSED_STRING","'multiselect'",189],["T_WHITESPACE"," ",189],":",["T_WHITESPACE"," ",189],["T_CONSTANT_ENCAPSED_STRING","'select'",189],";",["T_WHITESPACE","\n        ",189],"}",["T_WHITESPACE"," ",190],["T_ELSEIF","elseif",190],["T_WHITESPACE"," ",190],"(",["T_VARIABLE","$attribute",190],["T_OBJECT_OPERATOR","->",190],["T_STRING","isStatic",190],"(",")",")",["T_WHITESPACE"," ",190],"{",["T_WHITESPACE","\n            ",190],["T_RETURN","return",191],["T_WHITESPACE"," ",191],["T_VARIABLE","$attribute",191],["T_OBJECT_OPERATOR","->",191],["T_STRING","getFrontendInput",191],"(",")",["T_WHITESPACE"," ",191],["T_IS_EQUAL","==",191],["T_WHITESPACE"," ",191],["T_CONSTANT_ENCAPSED_STRING","'date'",191],["T_WHITESPACE"," ",191],"?",["T_WHITESPACE"," ",191],["T_CONSTANT_ENCAPSED_STRING","'datetime'",191],["T_WHITESPACE"," ",191],":",["T_WHITESPACE"," ",191],["T_CONSTANT_ENCAPSED_STRING","'varchar'",191],";",["T_WHITESPACE","\n        ",191],"}",["T_WHITESPACE"," ",192],["T_ELSE","else",192],["T_WHITESPACE"," ",192],"{",["T_WHITESPACE","\n            ",192],["T_RETURN","return",193],["T_WHITESPACE"," ",193],["T_VARIABLE","$attribute",193],["T_OBJECT_OPERATOR","->",193],["T_STRING","getBackendType",193],"(",")",";",["T_WHITESPACE","\n        ",193],"}",["T_WHITESPACE","\n    ",194],"}",["T_WHITESPACE","\n\n    ",195],["T_DOC_COMMENT","\/**\n     * DB data source model getter.\n     *\n     * @static\n     * @return Mage_ImportExport_Model_Mysql4_Import_Data\n     *\/",197],["T_WHITESPACE","\n    ",202],["T_PUBLIC","public",203],["T_WHITESPACE"," ",203],["T_STATIC","static",203],["T_WHITESPACE"," ",203],["T_FUNCTION","function",203],["T_WHITESPACE"," ",203],["T_STRING","getDataSourceModel",203],"(",")",["T_WHITESPACE","\n    ",203],"{",["T_WHITESPACE","\n        ",204],["T_RETURN","return",205],["T_WHITESPACE"," ",205],["T_STRING","Mage",205],["T_DOUBLE_COLON","::",205],["T_STRING","getResourceSingleton",205],"(",["T_CONSTANT_ENCAPSED_STRING","'importexport\/import_data'",205],")",";",["T_WHITESPACE","\n    ",205],"}",["T_WHITESPACE","\n\n    ",206],["T_DOC_COMMENT","\/**\n     * Default import behavior getter.\n     *\n     * @static\n     * @return string\n     *\/",208],["T_WHITESPACE","\n    ",213],["T_PUBLIC","public",214],["T_WHITESPACE"," ",214],["T_STATIC","static",214],["T_WHITESPACE"," ",214],["T_FUNCTION","function",214],["T_WHITESPACE"," ",214],["T_STRING","getDefaultBehavior",214],"(",")",["T_WHITESPACE","\n    ",214],"{",["T_WHITESPACE","\n        ",215],["T_RETURN","return",216],["T_WHITESPACE"," ",216],["T_STRING","self",216],["T_DOUBLE_COLON","::",216],["T_STRING","BEHAVIOR_APPEND",216],";",["T_WHITESPACE","\n    ",216],"}",["T_WHITESPACE","\n\n    ",217],["T_DOC_COMMENT","\/**\n     * Override standard entity getter.\n     *\n     * @throw Mage_Core_Exception\n     * @return string\n     *\/",219],["T_WHITESPACE","\n    ",224],["T_PUBLIC","public",225],["T_WHITESPACE"," ",225],["T_FUNCTION","function",225],["T_WHITESPACE"," ",225],["T_STRING","getEntity",225],"(",")",["T_WHITESPACE","\n    ",225],"{",["T_WHITESPACE","\n        ",226],["T_IF","if",227],["T_WHITESPACE"," ",227],"(",["T_EMPTY","empty",227],"(",["T_VARIABLE","$this",227],["T_OBJECT_OPERATOR","->",227],["T_STRING","_data",227],"[",["T_CONSTANT_ENCAPSED_STRING","'entity'",227],"]",")",")",["T_WHITESPACE"," ",227],"{",["T_WHITESPACE","\n            ",227],["T_STRING","Mage",228],["T_DOUBLE_COLON","::",228],["T_STRING","throwException",228],"(",["T_STRING","Mage",228],["T_DOUBLE_COLON","::",228],["T_STRING","helper",228],"(",["T_CONSTANT_ENCAPSED_STRING","'importexport'",228],")",["T_OBJECT_OPERATOR","->",228],["T_STRING","__",228],"(",["T_CONSTANT_ENCAPSED_STRING","'Entity is unknown'",228],")",")",";",["T_WHITESPACE","\n        ",228],"}",["T_WHITESPACE","\n        ",229],["T_RETURN","return",230],["T_WHITESPACE"," ",230],["T_VARIABLE","$this",230],["T_OBJECT_OPERATOR","->",230],["T_STRING","_data",230],"[",["T_CONSTANT_ENCAPSED_STRING","'entity'",230],"]",";",["T_WHITESPACE","\n    ",230],"}",["T_WHITESPACE","\n\n    ",231],["T_DOC_COMMENT","\/**\n     * Get entity adapter errors.\n     *\n     * @return array\n     *\/",233],["T_WHITESPACE","\n    ",237],["T_PUBLIC","public",238],["T_WHITESPACE"," ",238],["T_FUNCTION","function",238],["T_WHITESPACE"," ",238],["T_STRING","getErrors",238],"(",")",["T_WHITESPACE","\n    ",238],"{",["T_WHITESPACE","\n        ",239],["T_RETURN","return",240],["T_WHITESPACE"," ",240],["T_VARIABLE","$this",240],["T_OBJECT_OPERATOR","->",240],["T_STRING","_getEntityAdapter",240],"(",")",["T_OBJECT_OPERATOR","->",240],["T_STRING","getErrorMessages",240],"(",")",";",["T_WHITESPACE","\n    ",240],"}",["T_WHITESPACE","\n\n    ",241],["T_DOC_COMMENT","\/**\n     * Returns error counter.\n     *\n     * @return int\n     *\/",243],["T_WHITESPACE","\n    ",247],["T_PUBLIC","public",248],["T_WHITESPACE"," ",248],["T_FUNCTION","function",248],["T_WHITESPACE"," ",248],["T_STRING","getErrorsCount",248],"(",")",["T_WHITESPACE","\n    ",248],"{",["T_WHITESPACE","\n        ",249],["T_RETURN","return",250],["T_WHITESPACE"," ",250],["T_VARIABLE","$this",250],["T_OBJECT_OPERATOR","->",250],["T_STRING","_getEntityAdapter",250],"(",")",["T_OBJECT_OPERATOR","->",250],["T_STRING","getErrorsCount",250],"(",")",";",["T_WHITESPACE","\n    ",250],"}",["T_WHITESPACE","\n\n    ",251],["T_DOC_COMMENT","\/**\n     * Returns error limit value.\n     *\n     * @return int\n     *\/",253],["T_WHITESPACE","\n    ",257],["T_PUBLIC","public",258],["T_WHITESPACE"," ",258],["T_FUNCTION","function",258],["T_WHITESPACE"," ",258],["T_STRING","getErrorsLimit",258],"(",")",["T_WHITESPACE","\n    ",258],"{",["T_WHITESPACE","\n        ",259],["T_RETURN","return",260],["T_WHITESPACE"," ",260],["T_VARIABLE","$this",260],["T_OBJECT_OPERATOR","->",260],["T_STRING","_getEntityAdapter",260],"(",")",["T_OBJECT_OPERATOR","->",260],["T_STRING","getErrorsLimit",260],"(",")",";",["T_WHITESPACE","\n    ",260],"}",["T_WHITESPACE","\n\n    ",261],["T_DOC_COMMENT","\/**\n     * Returns invalid rows count.\n     *\n     * @return int\n     *\/",263],["T_WHITESPACE","\n    ",267],["T_PUBLIC","public",268],["T_WHITESPACE"," ",268],["T_FUNCTION","function",268],["T_WHITESPACE"," ",268],["T_STRING","getInvalidRowsCount",268],"(",")",["T_WHITESPACE","\n    ",268],"{",["T_WHITESPACE","\n        ",269],["T_RETURN","return",270],["T_WHITESPACE"," ",270],["T_VARIABLE","$this",270],["T_OBJECT_OPERATOR","->",270],["T_STRING","_getEntityAdapter",270],"(",")",["T_OBJECT_OPERATOR","->",270],["T_STRING","getInvalidRowsCount",270],"(",")",";",["T_WHITESPACE","\n    ",270],"}",["T_WHITESPACE","\n\n    ",271],["T_DOC_COMMENT","\/**\n     * Returns entity model noticees.\n     *\n     * @return array\n     *\/",273],["T_WHITESPACE","\n    ",277],["T_PUBLIC","public",278],["T_WHITESPACE"," ",278],["T_FUNCTION","function",278],["T_WHITESPACE"," ",278],["T_STRING","getNotices",278],"(",")",["T_WHITESPACE","\n    ",278],"{",["T_WHITESPACE","\n        ",279],["T_RETURN","return",280],["T_WHITESPACE"," ",280],["T_VARIABLE","$this",280],["T_OBJECT_OPERATOR","->",280],["T_STRING","_getEntityAdapter",280],"(",")",["T_OBJECT_OPERATOR","->",280],["T_STRING","getNotices",280],"(",")",";",["T_WHITESPACE","\n    ",280],"}",["T_WHITESPACE","\n\n    ",281],["T_DOC_COMMENT","\/**\n     * Returns number of checked entities.\n     *\n     * @return int\n     *\/",283],["T_WHITESPACE","\n    ",287],["T_PUBLIC","public",288],["T_WHITESPACE"," ",288],["T_FUNCTION","function",288],["T_WHITESPACE"," ",288],["T_STRING","getProcessedEntitiesCount",288],"(",")",["T_WHITESPACE","\n    ",288],"{",["T_WHITESPACE","\n        ",289],["T_RETURN","return",290],["T_WHITESPACE"," ",290],["T_VARIABLE","$this",290],["T_OBJECT_OPERATOR","->",290],["T_STRING","_getEntityAdapter",290],"(",")",["T_OBJECT_OPERATOR","->",290],["T_STRING","getProcessedEntitiesCount",290],"(",")",";",["T_WHITESPACE","\n    ",290],"}",["T_WHITESPACE","\n\n    ",291],["T_DOC_COMMENT","\/**\n     * Returns number of checked rows.\n     *\n     * @return int\n     *\/",293],["T_WHITESPACE","\n    ",297],["T_PUBLIC","public",298],["T_WHITESPACE"," ",298],["T_FUNCTION","function",298],["T_WHITESPACE"," ",298],["T_STRING","getProcessedRowsCount",298],"(",")",["T_WHITESPACE","\n    ",298],"{",["T_WHITESPACE","\n        ",299],["T_RETURN","return",300],["T_WHITESPACE"," ",300],["T_VARIABLE","$this",300],["T_OBJECT_OPERATOR","->",300],["T_STRING","_getEntityAdapter",300],"(",")",["T_OBJECT_OPERATOR","->",300],["T_STRING","getProcessedRowsCount",300],"(",")",";",["T_WHITESPACE","\n    ",300],"}",["T_WHITESPACE","\n\n    ",301],["T_DOC_COMMENT","\/**\n     * Import\/Export working directory (source files, result files, lock files etc.).\n     *\n     * @return string\n     *\/",303],["T_WHITESPACE","\n    ",307],["T_PUBLIC","public",308],["T_WHITESPACE"," ",308],["T_STATIC","static",308],["T_WHITESPACE"," ",308],["T_FUNCTION","function",308],["T_WHITESPACE"," ",308],["T_STRING","getWorkingDir",308],"(",")",["T_WHITESPACE","\n    ",308],"{",["T_WHITESPACE","\n        ",309],["T_RETURN","return",310],["T_WHITESPACE"," ",310],["T_STRING","Mage",310],["T_DOUBLE_COLON","::",310],["T_STRING","getBaseDir",310],"(",["T_CONSTANT_ENCAPSED_STRING","'var'",310],")",["T_WHITESPACE"," ",310],".",["T_WHITESPACE"," ",310],["T_STRING","DS",310],["T_WHITESPACE"," ",310],".",["T_WHITESPACE"," ",310],["T_CONSTANT_ENCAPSED_STRING","'importexport'",310],["T_WHITESPACE"," ",310],".",["T_WHITESPACE"," ",310],["T_STRING","DS",310],";",["T_WHITESPACE","\n    ",310],"}",["T_WHITESPACE","\n\n    ",311],["T_DOC_COMMENT","\/**\n     * Import source file structure to DB.\n     *\n     * @return bool\n     *\/",313],["T_WHITESPACE","\n    ",317],["T_PUBLIC","public",318],["T_WHITESPACE"," ",318],["T_FUNCTION","function",318],["T_WHITESPACE"," ",318],["T_STRING","importSource",318],"(",")",["T_WHITESPACE","\n    ",318],"{",["T_WHITESPACE","\n        ",319],["T_VARIABLE","$this",320],["T_OBJECT_OPERATOR","->",320],["T_STRING","setData",320],"(",["T_ARRAY","array",320],"(",["T_WHITESPACE","\n            ",320],["T_CONSTANT_ENCAPSED_STRING","'entity'",321],["T_WHITESPACE","   ",321],["T_DOUBLE_ARROW","=>",321],["T_WHITESPACE"," ",321],["T_STRING","self",321],["T_DOUBLE_COLON","::",321],["T_STRING","getDataSourceModel",321],"(",")",["T_OBJECT_OPERATOR","->",321],["T_STRING","getEntityTypeCode",321],"(",")",",",["T_WHITESPACE","\n            ",321],["T_CONSTANT_ENCAPSED_STRING","'behavior'",322],["T_WHITESPACE"," ",322],["T_DOUBLE_ARROW","=>",322],["T_WHITESPACE"," ",322],["T_STRING","self",322],["T_DOUBLE_COLON","::",322],["T_STRING","getDataSourceModel",322],"(",")",["T_OBJECT_OPERATOR","->",322],["T_STRING","getBehavior",322],"(",")",["T_WHITESPACE","\n        ",322],")",")",";",["T_WHITESPACE","\n        ",323],["T_VARIABLE","$this",324],["T_OBJECT_OPERATOR","->",324],["T_STRING","addLogComment",324],"(",["T_STRING","Mage",324],["T_DOUBLE_COLON","::",324],["T_STRING","helper",324],"(",["T_CONSTANT_ENCAPSED_STRING","'importexport'",324],")",["T_OBJECT_OPERATOR","->",324],["T_STRING","__",324],"(",["T_CONSTANT_ENCAPSED_STRING","'Begin import of \"%s\" with \"%s\" behavior'",324],",",["T_WHITESPACE"," ",324],["T_VARIABLE","$this",324],["T_OBJECT_OPERATOR","->",324],["T_STRING","getEntity",324],"(",")",",",["T_WHITESPACE"," ",324],["T_VARIABLE","$this",324],["T_OBJECT_OPERATOR","->",324],["T_STRING","getBehavior",324],"(",")",")",")",";",["T_WHITESPACE","\n        ",324],["T_VARIABLE","$result",325],["T_WHITESPACE"," ",325],"=",["T_WHITESPACE"," ",325],["T_VARIABLE","$this",325],["T_OBJECT_OPERATOR","->",325],["T_STRING","_getEntityAdapter",325],"(",")",["T_OBJECT_OPERATOR","->",325],["T_STRING","importData",325],"(",")",";",["T_WHITESPACE","\n        ",325],["T_VARIABLE","$this",326],["T_OBJECT_OPERATOR","->",326],["T_STRING","addLogComment",326],"(",["T_ARRAY","array",326],"(",["T_WHITESPACE","\n            ",326],["T_STRING","Mage",327],["T_DOUBLE_COLON","::",327],["T_STRING","helper",327],"(",["T_CONSTANT_ENCAPSED_STRING","'importexport'",327],")",["T_OBJECT_OPERATOR","->",327],["T_STRING","__",327],"(",["T_CONSTANT_ENCAPSED_STRING","'Checked rows: %d, checked entities: %d, invalid rows: %d, total errors: %d'",327],",",["T_WHITESPACE"," ",327],["T_VARIABLE","$this",327],["T_OBJECT_OPERATOR","->",327],["T_STRING","getProcessedRowsCount",327],"(",")",",",["T_WHITESPACE"," ",327],["T_VARIABLE","$this",327],["T_OBJECT_OPERATOR","->",327],["T_STRING","getProcessedEntitiesCount",327],"(",")",",",["T_WHITESPACE"," ",327],["T_VARIABLE","$this",327],["T_OBJECT_OPERATOR","->",327],["T_STRING","getInvalidRowsCount",327],"(",")",",",["T_WHITESPACE"," ",327],["T_VARIABLE","$this",327],["T_OBJECT_OPERATOR","->",327],["T_STRING","getErrorsCount",327],"(",")",")",",",["T_WHITESPACE","\n            ",327],["T_STRING","Mage",328],["T_DOUBLE_COLON","::",328],["T_STRING","helper",328],"(",["T_CONSTANT_ENCAPSED_STRING","'importexport'",328],")",["T_OBJECT_OPERATOR","->",328],["T_STRING","__",328],"(",["T_CONSTANT_ENCAPSED_STRING","'Import has been done successfuly.'",328],")",["T_WHITESPACE","\n        ",328],")",")",";",["T_WHITESPACE","\n        ",329],["T_RETURN","return",330],["T_WHITESPACE"," ",330],["T_VARIABLE","$result",330],";",["T_WHITESPACE","\n    ",330],"}",["T_WHITESPACE","\n\n    ",331],["T_DOC_COMMENT","\/**\n     * Import possibility getter.\n     *\n     * @return bool\n     *\/",333],["T_WHITESPACE","\n    ",337],["T_PUBLIC","public",338],["T_WHITESPACE"," ",338],["T_FUNCTION","function",338],["T_WHITESPACE"," ",338],["T_STRING","isImportAllowed",338],"(",")",["T_WHITESPACE","\n    ",338],"{",["T_WHITESPACE","\n        ",339],["T_RETURN","return",340],["T_WHITESPACE"," ",340],["T_VARIABLE","$this",340],["T_OBJECT_OPERATOR","->",340],["T_STRING","_getEntityAdapter",340],"(",")",["T_OBJECT_OPERATOR","->",340],["T_STRING","isImportAllowed",340],"(",")",";",["T_WHITESPACE","\n    ",340],"}",["T_WHITESPACE","\n\n    ",341],["T_DOC_COMMENT","\/**\n     * Import source file structure to DB.\n     *\n     * @return void\n     *\/",343],["T_WHITESPACE","\n    ",347],["T_PUBLIC","public",348],["T_WHITESPACE"," ",348],["T_FUNCTION","function",348],["T_WHITESPACE"," ",348],["T_STRING","expandSource",348],"(",")",["T_WHITESPACE","\n    ",348],"{",["T_WHITESPACE","\n        ",349],["T_VARIABLE","$writer",350],["T_WHITESPACE","  ",350],"=",["T_WHITESPACE"," ",350],["T_STRING","Mage",350],["T_DOUBLE_COLON","::",350],["T_STRING","getModel",350],"(",["T_CONSTANT_ENCAPSED_STRING","'importexport\/export_adapter_csv'",350],",",["T_WHITESPACE"," ",350],["T_STRING","self",350],["T_DOUBLE_COLON","::",350],["T_STRING","getWorkingDir",350],"(",")",["T_WHITESPACE"," ",350],".",["T_WHITESPACE"," ",350],["T_CONSTANT_ENCAPSED_STRING","\"big0.csv\"",350],")",";",["T_WHITESPACE","\n        ",350],["T_VARIABLE","$regExps",351],["T_WHITESPACE"," ",351],"=",["T_WHITESPACE"," ",351],["T_ARRAY","array",351],"(",["T_CONSTANT_ENCAPSED_STRING","'last'",351],["T_WHITESPACE"," ",351],["T_DOUBLE_ARROW","=>",351],["T_WHITESPACE"," ",351],["T_CONSTANT_ENCAPSED_STRING","'\/(.*?)(\\d+)$\/'",351],",",["T_WHITESPACE"," ",351],["T_CONSTANT_ENCAPSED_STRING","'middle'",351],["T_WHITESPACE"," ",351],["T_DOUBLE_ARROW","=>",351],["T_WHITESPACE"," ",351],["T_CONSTANT_ENCAPSED_STRING","'\/(.*?)(\\d+)(.*)$\/'",351],")",";",["T_WHITESPACE","\n        ",351],["T_VARIABLE","$colReg",352],["T_WHITESPACE","  ",352],"=",["T_WHITESPACE"," ",352],["T_ARRAY","array",352],"(",["T_WHITESPACE","\n            ",352],["T_CONSTANT_ENCAPSED_STRING","'sku'",353],["T_WHITESPACE"," ",353],["T_DOUBLE_ARROW","=>",353],["T_WHITESPACE"," ",353],["T_CONSTANT_ENCAPSED_STRING","'last'",353],",",["T_WHITESPACE"," ",353],["T_CONSTANT_ENCAPSED_STRING","'name'",353],["T_WHITESPACE"," ",353],["T_DOUBLE_ARROW","=>",353],["T_WHITESPACE"," ",353],["T_CONSTANT_ENCAPSED_STRING","'last'",353],",",["T_WHITESPACE"," ",353],["T_CONSTANT_ENCAPSED_STRING","'description'",353],["T_WHITESPACE"," ",353],["T_DOUBLE_ARROW","=>",353],["T_WHITESPACE"," ",353],["T_CONSTANT_ENCAPSED_STRING","'last'",353],",",["T_WHITESPACE"," ",353],["T_CONSTANT_ENCAPSED_STRING","'short_description'",353],["T_WHITESPACE"," ",353],["T_DOUBLE_ARROW","=>",353],["T_WHITESPACE"," ",353],["T_CONSTANT_ENCAPSED_STRING","'last'",353],",",["T_WHITESPACE","\n            ",353],["T_CONSTANT_ENCAPSED_STRING","'url_key'",354],["T_WHITESPACE"," ",354],["T_DOUBLE_ARROW","=>",354],["T_WHITESPACE"," ",354],["T_CONSTANT_ENCAPSED_STRING","'middle'",354],",",["T_WHITESPACE"," ",354],["T_CONSTANT_ENCAPSED_STRING","'meta_title'",354],["T_WHITESPACE"," ",354],["T_DOUBLE_ARROW","=>",354],["T_WHITESPACE"," ",354],["T_CONSTANT_ENCAPSED_STRING","'last'",354],",",["T_WHITESPACE"," ",354],["T_CONSTANT_ENCAPSED_STRING","'meta_keyword'",354],["T_WHITESPACE"," ",354],["T_DOUBLE_ARROW","=>",354],["T_WHITESPACE"," ",354],["T_CONSTANT_ENCAPSED_STRING","'last'",354],",",["T_WHITESPACE"," ",354],["T_CONSTANT_ENCAPSED_STRING","'meta_description'",354],["T_WHITESPACE"," ",354],["T_DOUBLE_ARROW","=>",354],["T_WHITESPACE"," ",354],["T_CONSTANT_ENCAPSED_STRING","'last'",354],",",["T_WHITESPACE","\n            ",354],["T_CONSTANT_ENCAPSED_STRING","'_links_related_sku'",355],["T_WHITESPACE"," ",355],["T_DOUBLE_ARROW","=>",355],["T_WHITESPACE"," ",355],["T_CONSTANT_ENCAPSED_STRING","'last'",355],",",["T_WHITESPACE"," ",355],["T_CONSTANT_ENCAPSED_STRING","'_links_crosssell_sku'",355],["T_WHITESPACE"," ",355],["T_DOUBLE_ARROW","=>",355],["T_WHITESPACE"," ",355],["T_CONSTANT_ENCAPSED_STRING","'last'",355],",",["T_WHITESPACE"," ",355],["T_CONSTANT_ENCAPSED_STRING","'_links_upsell_sku'",355],["T_WHITESPACE"," ",355],["T_DOUBLE_ARROW","=>",355],["T_WHITESPACE"," ",355],["T_CONSTANT_ENCAPSED_STRING","'last'",355],",",["T_WHITESPACE","\n            ",355],["T_CONSTANT_ENCAPSED_STRING","'_custom_option_sku'",356],["T_WHITESPACE"," ",356],["T_DOUBLE_ARROW","=>",356],["T_WHITESPACE"," ",356],["T_CONSTANT_ENCAPSED_STRING","'middle'",356],",",["T_WHITESPACE"," ",356],["T_CONSTANT_ENCAPSED_STRING","'_custom_option_row_sku'",356],["T_WHITESPACE"," ",356],["T_DOUBLE_ARROW","=>",356],["T_WHITESPACE"," ",356],["T_CONSTANT_ENCAPSED_STRING","'middle'",356],",",["T_WHITESPACE"," ",356],["T_CONSTANT_ENCAPSED_STRING","'_super_products_sku'",356],["T_WHITESPACE"," ",356],["T_DOUBLE_ARROW","=>",356],["T_WHITESPACE"," ",356],["T_CONSTANT_ENCAPSED_STRING","'last'",356],",",["T_WHITESPACE","\n            ",356],["T_CONSTANT_ENCAPSED_STRING","'_associated_sku'",357],["T_WHITESPACE"," ",357],["T_DOUBLE_ARROW","=>",357],["T_WHITESPACE"," ",357],["T_CONSTANT_ENCAPSED_STRING","'last'",357],["T_WHITESPACE","\n        ",357],")",";",["T_WHITESPACE","\n        ",358],["T_VARIABLE","$size",359],["T_WHITESPACE"," ",359],"=",["T_WHITESPACE"," ",359],["T_STRING","self",359],["T_DOUBLE_COLON","::",359],["T_STRING","DEFAULT_SIZE",359],";",["T_WHITESPACE","\n\n        ",359],["T_VARIABLE","$filename",361],["T_WHITESPACE"," ",361],"=",["T_WHITESPACE"," ",361],["T_CONSTANT_ENCAPSED_STRING","'catalog_product.csv'",361],";",["T_WHITESPACE","\n        ",361],["T_VARIABLE","$filenameFormat",362],["T_WHITESPACE"," ",362],"=",["T_WHITESPACE"," ",362],["T_CONSTANT_ENCAPSED_STRING","'big%s.csv'",362],";",["T_WHITESPACE","\n        ",362],["T_FOREACH","foreach",363],["T_WHITESPACE"," ",363],"(",["T_VARIABLE","$this",363],["T_OBJECT_OPERATOR","->",363],["T_STRING","_getSourceAdapter",363],"(",["T_STRING","self",363],["T_DOUBLE_COLON","::",363],["T_STRING","getWorkingDir",363],"(",")",["T_WHITESPACE"," ",363],".",["T_WHITESPACE"," ",363],["T_VARIABLE","$filename",363],")",["T_WHITESPACE"," ",363],["T_AS","as",363],["T_WHITESPACE"," ",363],["T_VARIABLE","$row",363],")",["T_WHITESPACE"," ",363],"{",["T_WHITESPACE","\n            ",363],["T_VARIABLE","$writer",364],["T_OBJECT_OPERATOR","->",364],["T_STRING","writeRow",364],"(",["T_VARIABLE","$row",364],")",";",["T_WHITESPACE","\n        ",364],"}",["T_WHITESPACE","\n        ",365],["T_VARIABLE","$count",366],["T_WHITESPACE"," ",366],"=",["T_WHITESPACE"," ",366],["T_STRING","self",366],["T_DOUBLE_COLON","::",366],["T_STRING","MAX_IMPORT_CHUNKS",366],";",["T_WHITESPACE","\n        ",366],["T_FOR","for",367],["T_WHITESPACE"," ",367],"(",["T_VARIABLE","$i",367],["T_WHITESPACE"," ",367],"=",["T_WHITESPACE"," ",367],["T_LNUMBER","1",367],";",["T_WHITESPACE"," ",367],["T_VARIABLE","$i",367],["T_WHITESPACE"," ",367],"<",["T_WHITESPACE"," ",367],["T_VARIABLE","$count",367],";",["T_WHITESPACE"," ",367],["T_VARIABLE","$i",367],["T_INC","++",367],")",["T_WHITESPACE"," ",367],"{",["T_WHITESPACE","\n            ",367],["T_VARIABLE","$writer",368],["T_WHITESPACE"," ",368],"=",["T_WHITESPACE"," ",368],["T_STRING","Mage",368],["T_DOUBLE_COLON","::",368],["T_STRING","getModel",368],"(",["T_WHITESPACE","\n                ",368],["T_CONSTANT_ENCAPSED_STRING","'importexport\/export_adapter_csv'",369],",",["T_WHITESPACE","\n                ",369],["T_STRING","self",370],["T_DOUBLE_COLON","::",370],["T_STRING","getWorkingDir",370],"(",")",["T_WHITESPACE"," ",370],".",["T_WHITESPACE"," ",370],["T_STRING","sprintf",370],"(",["T_VARIABLE","$filenameFormat",370],",",["T_WHITESPACE"," ",370],["T_VARIABLE","$i",370],")",["T_WHITESPACE","\n            ",370],")",";",["T_WHITESPACE","\n\n            ",371],["T_VARIABLE","$adapter",373],["T_WHITESPACE"," ",373],"=",["T_WHITESPACE"," ",373],["T_VARIABLE","$this",373],["T_OBJECT_OPERATOR","->",373],["T_STRING","_getSourceAdapter",373],"(",["T_STRING","self",373],["T_DOUBLE_COLON","::",373],["T_STRING","getWorkingDir",373],"(",")",["T_WHITESPACE"," ",373],".",["T_WHITESPACE"," ",373],["T_STRING","sprintf",373],"(",["T_VARIABLE","$filenameFormat",373],",",["T_WHITESPACE"," ",373],["T_VARIABLE","$i",373],["T_WHITESPACE"," ",373],"-",["T_WHITESPACE"," ",373],["T_LNUMBER","1",373],")",")",";",["T_WHITESPACE","\n            ",373],["T_FOREACH","foreach",374],["T_WHITESPACE"," ",374],"(",["T_VARIABLE","$adapter",374],["T_WHITESPACE"," ",374],["T_AS","as",374],["T_WHITESPACE"," ",374],["T_VARIABLE","$row",374],")",["T_WHITESPACE"," ",374],"{",["T_WHITESPACE","\n                ",374],["T_VARIABLE","$writer",375],["T_OBJECT_OPERATOR","->",375],["T_STRING","writeRow",375],"(",["T_VARIABLE","$row",375],")",";",["T_WHITESPACE","\n            ",375],"}",["T_WHITESPACE","\n            ",376],["T_VARIABLE","$adapter",377],["T_WHITESPACE"," ",377],"=",["T_WHITESPACE"," ",377],["T_VARIABLE","$this",377],["T_OBJECT_OPERATOR","->",377],["T_STRING","_getSourceAdapter",377],"(",["T_STRING","self",377],["T_DOUBLE_COLON","::",377],["T_STRING","getWorkingDir",377],"(",")",["T_WHITESPACE"," ",377],".",["T_WHITESPACE"," ",377],["T_STRING","sprintf",377],"(",["T_VARIABLE","$filenameFormat",377],",",["T_WHITESPACE"," ",377],["T_VARIABLE","$i",377],["T_WHITESPACE"," ",377],"-",["T_WHITESPACE"," ",377],["T_LNUMBER","1",377],")",")",";",["T_WHITESPACE","\n            ",377],["T_FOREACH","foreach",378],["T_WHITESPACE"," ",378],"(",["T_VARIABLE","$adapter",378],["T_WHITESPACE"," ",378],["T_AS","as",378],["T_WHITESPACE"," ",378],["T_VARIABLE","$row",378],")",["T_WHITESPACE"," ",378],"{",["T_WHITESPACE","\n                ",378],["T_FOREACH","foreach",379],["T_WHITESPACE"," ",379],"(",["T_VARIABLE","$colReg",379],["T_WHITESPACE"," ",379],["T_AS","as",379],["T_WHITESPACE"," ",379],["T_VARIABLE","$colName",379],["T_WHITESPACE"," ",379],["T_DOUBLE_ARROW","=>",379],["T_WHITESPACE"," ",379],["T_VARIABLE","$regExpType",379],")",["T_WHITESPACE"," ",379],"{",["T_WHITESPACE","\n                    ",379],["T_IF","if",380],["T_WHITESPACE"," ",380],"(","!",["T_EMPTY","empty",380],"(",["T_VARIABLE","$row",380],"[",["T_VARIABLE","$colName",380],"]",")",")",["T_WHITESPACE"," ",380],"{",["T_WHITESPACE","\n                        ",380],["T_STRING","preg_match",381],"(",["T_VARIABLE","$regExps",381],"[",["T_VARIABLE","$regExpType",381],"]",",",["T_WHITESPACE"," ",381],["T_VARIABLE","$row",381],"[",["T_VARIABLE","$colName",381],"]",",",["T_WHITESPACE"," ",381],["T_VARIABLE","$m",381],")",";",["T_WHITESPACE","\n\n                        ",381],["T_VARIABLE","$row",383],"[",["T_VARIABLE","$colName",383],"]",["T_WHITESPACE"," ",383],"=",["T_WHITESPACE"," ",383],["T_VARIABLE","$m",383],"[",["T_LNUMBER","1",383],"]",["T_WHITESPACE"," ",383],".",["T_WHITESPACE"," ",383],"(",["T_VARIABLE","$m",383],"[",["T_LNUMBER","2",383],"]",["T_WHITESPACE"," ",383],"+",["T_WHITESPACE"," ",383],["T_VARIABLE","$size",383],")",["T_WHITESPACE"," ",383],".",["T_WHITESPACE"," ",383],"(",["T_CONSTANT_ENCAPSED_STRING","'middle'",383],["T_WHITESPACE"," ",383],["T_IS_EQUAL","==",383],["T_WHITESPACE"," ",383],["T_VARIABLE","$regExpType",383],["T_WHITESPACE"," ",383],"?",["T_WHITESPACE"," ",383],["T_VARIABLE","$m",383],"[",["T_LNUMBER","3",383],"]",["T_WHITESPACE"," ",383],":",["T_WHITESPACE"," ",383],["T_CONSTANT_ENCAPSED_STRING","''",383],")",";",["T_WHITESPACE","\n                    ",383],"}",["T_WHITESPACE","\n                ",384],"}",["T_WHITESPACE","\n                ",385],["T_VARIABLE","$writer",386],["T_OBJECT_OPERATOR","->",386],["T_STRING","writeRow",386],"(",["T_VARIABLE","$row",386],")",";",["T_WHITESPACE","\n            ",386],"}",["T_WHITESPACE","\n            ",387],["T_VARIABLE","$size",388],["T_WHITESPACE"," ",388],["T_MUL_EQUAL","*=",388],["T_WHITESPACE"," ",388],["T_LNUMBER","2",388],";",["T_WHITESPACE","\n        ",388],"}",["T_WHITESPACE","\n    ",389],"}",["T_WHITESPACE","\n\n    ",390],["T_DOC_COMMENT","\/**\n     * Move uploaded file and create source adapter instance.\n     *\n     * @throws Mage_Core_Exception\n     * @return string Source file path\n     *\/",392],["T_WHITESPACE","\n    ",397],["T_PUBLIC","public",398],["T_WHITESPACE"," ",398],["T_FUNCTION","function",398],["T_WHITESPACE"," ",398],["T_STRING","uploadSource",398],"(",")",["T_WHITESPACE","\n    ",398],"{",["T_WHITESPACE","\n        ",399],["T_VARIABLE","$entity",400],["T_WHITESPACE","    ",400],"=",["T_WHITESPACE"," ",400],["T_VARIABLE","$this",400],["T_OBJECT_OPERATOR","->",400],["T_STRING","getEntity",400],"(",")",";",["T_WHITESPACE","\n        ",400],["T_VARIABLE","$uploader",401],["T_WHITESPACE","  ",401],"=",["T_WHITESPACE"," ",401],["T_STRING","Mage",401],["T_DOUBLE_COLON","::",401],["T_STRING","getModel",401],"(",["T_CONSTANT_ENCAPSED_STRING","'core\/file_uploader'",401],",",["T_WHITESPACE"," ",401],["T_STRING","self",401],["T_DOUBLE_COLON","::",401],["T_STRING","FIELD_NAME_SOURCE_FILE",401],")",";",["T_WHITESPACE","\n        ",401],["T_VARIABLE","$uploader",402],["T_OBJECT_OPERATOR","->",402],["T_STRING","skipDbProcessing",402],"(",["T_STRING","true",402],")",";",["T_WHITESPACE","\n        ",402],["T_VARIABLE","$result",403],["T_WHITESPACE","    ",403],"=",["T_WHITESPACE"," ",403],["T_VARIABLE","$uploader",403],["T_OBJECT_OPERATOR","->",403],["T_STRING","save",403],"(",["T_STRING","self",403],["T_DOUBLE_COLON","::",403],["T_STRING","getWorkingDir",403],"(",")",")",";",["T_WHITESPACE","\n        ",403],["T_VARIABLE","$extension",404],["T_WHITESPACE"," ",404],"=",["T_WHITESPACE"," ",404],["T_STRING","pathinfo",404],"(",["T_VARIABLE","$result",404],"[",["T_CONSTANT_ENCAPSED_STRING","'file'",404],"]",",",["T_WHITESPACE"," ",404],["T_STRING","PATHINFO_EXTENSION",404],")",";",["T_WHITESPACE","\n\n        ",404],["T_VARIABLE","$uploadedFile",406],["T_WHITESPACE"," ",406],"=",["T_WHITESPACE"," ",406],["T_VARIABLE","$result",406],"[",["T_CONSTANT_ENCAPSED_STRING","'path'",406],"]",["T_WHITESPACE"," ",406],".",["T_WHITESPACE"," ",406],["T_VARIABLE","$result",406],"[",["T_CONSTANT_ENCAPSED_STRING","'file'",406],"]",";",["T_WHITESPACE","\n        ",406],["T_IF","if",407],["T_WHITESPACE"," ",407],"(","!",["T_VARIABLE","$extension",407],")",["T_WHITESPACE"," ",407],"{",["T_WHITESPACE","\n            ",407],["T_STRING","unlink",408],"(",["T_VARIABLE","$uploadedFile",408],")",";",["T_WHITESPACE","\n            ",408],["T_STRING","Mage",409],["T_DOUBLE_COLON","::",409],["T_STRING","throwException",409],"(",["T_STRING","Mage",409],["T_DOUBLE_COLON","::",409],["T_STRING","helper",409],"(",["T_CONSTANT_ENCAPSED_STRING","'importexport'",409],")",["T_OBJECT_OPERATOR","->",409],["T_STRING","__",409],"(",["T_CONSTANT_ENCAPSED_STRING","'Uploaded file has no extension'",409],")",")",";",["T_WHITESPACE","\n        ",409],"}",["T_WHITESPACE","\n        ",410],["T_VARIABLE","$sourceFile",411],["T_WHITESPACE"," ",411],"=",["T_WHITESPACE"," ",411],["T_STRING","self",411],["T_DOUBLE_COLON","::",411],["T_STRING","getWorkingDir",411],"(",")",["T_WHITESPACE"," ",411],".",["T_WHITESPACE"," ",411],["T_VARIABLE","$entity",411],";",["T_WHITESPACE","\n\n        ",411],["T_VARIABLE","$sourceFile",413],["T_WHITESPACE"," ",413],["T_CONCAT_EQUAL",".=",413],["T_WHITESPACE"," ",413],["T_CONSTANT_ENCAPSED_STRING","'.'",413],["T_WHITESPACE"," ",413],".",["T_WHITESPACE"," ",413],["T_VARIABLE","$extension",413],";",["T_WHITESPACE","\n\n        ",413],["T_IF","if",415],"(",["T_STRING","strtolower",415],"(",["T_VARIABLE","$uploadedFile",415],")",["T_WHITESPACE"," ",415],["T_IS_NOT_EQUAL","!=",415],["T_WHITESPACE"," ",415],["T_STRING","strtolower",415],"(",["T_VARIABLE","$sourceFile",415],")",")",["T_WHITESPACE"," ",415],"{",["T_WHITESPACE","\n            ",415],["T_IF","if",416],["T_WHITESPACE"," ",416],"(",["T_STRING","file_exists",416],"(",["T_VARIABLE","$sourceFile",416],")",")",["T_WHITESPACE"," ",416],"{",["T_WHITESPACE","\n                ",416],["T_STRING","unlink",417],"(",["T_VARIABLE","$sourceFile",417],")",";",["T_WHITESPACE","\n            ",417],"}",["T_WHITESPACE","\n\n            ",418],["T_IF","if",420],["T_WHITESPACE"," ",420],"(","!","@",["T_STRING","rename",420],"(",["T_VARIABLE","$uploadedFile",420],",",["T_WHITESPACE"," ",420],["T_VARIABLE","$sourceFile",420],")",")",["T_WHITESPACE"," ",420],"{",["T_WHITESPACE","\n                ",420],["T_STRING","Mage",421],["T_DOUBLE_COLON","::",421],["T_STRING","throwException",421],"(",["T_STRING","Mage",421],["T_DOUBLE_COLON","::",421],["T_STRING","helper",421],"(",["T_CONSTANT_ENCAPSED_STRING","'importexport'",421],")",["T_OBJECT_OPERATOR","->",421],["T_STRING","__",421],"(",["T_CONSTANT_ENCAPSED_STRING","'Source file moving failed'",421],")",")",";",["T_WHITESPACE","\n            ",421],"}",["T_WHITESPACE","\n        ",422],"}",["T_WHITESPACE","\n        ",423],["T_COMMENT","\/\/ trying to create source adapter for file and catch possible exception to be convinced in its adequacy\n",424],["T_WHITESPACE","        ",425],["T_TRY","try",425],["T_WHITESPACE"," ",425],"{",["T_WHITESPACE","\n            ",425],["T_VARIABLE","$this",426],["T_OBJECT_OPERATOR","->",426],["T_STRING","_getSourceAdapter",426],"(",["T_VARIABLE","$sourceFile",426],")",";",["T_WHITESPACE","\n        ",426],"}",["T_WHITESPACE"," ",427],["T_CATCH","catch",427],["T_WHITESPACE"," ",427],"(",["T_STRING","Exception",427],["T_WHITESPACE"," ",427],["T_VARIABLE","$e",427],")",["T_WHITESPACE"," ",427],"{",["T_WHITESPACE","\n            ",427],["T_STRING","unlink",428],"(",["T_VARIABLE","$sourceFile",428],")",";",["T_WHITESPACE","\n            ",428],["T_STRING","Mage",429],["T_DOUBLE_COLON","::",429],["T_STRING","throwException",429],"(",["T_VARIABLE","$e",429],["T_OBJECT_OPERATOR","->",429],["T_STRING","getMessage",429],"(",")",")",";",["T_WHITESPACE","\n        ",429],"}",["T_WHITESPACE","\n        ",430],["T_RETURN","return",431],["T_WHITESPACE"," ",431],["T_VARIABLE","$sourceFile",431],";",["T_WHITESPACE","\n    ",431],"}",["T_WHITESPACE","\n\n    ",432],["T_DOC_COMMENT","\/**\n     * Validates source file and returns validation result.\n     *\n     * @param string $sourceFile Full path to source file\n     * @return bool\n     *\/",434],["T_WHITESPACE","\n    ",439],["T_PUBLIC","public",440],["T_WHITESPACE"," ",440],["T_FUNCTION","function",440],["T_WHITESPACE"," ",440],["T_STRING","validateSource",440],"(",["T_VARIABLE","$sourceFile",440],")",["T_WHITESPACE","\n    ",440],"{",["T_WHITESPACE","\n        ",441],["T_VARIABLE","$this",442],["T_OBJECT_OPERATOR","->",442],["T_STRING","addLogComment",442],"(",["T_STRING","Mage",442],["T_DOUBLE_COLON","::",442],["T_STRING","helper",442],"(",["T_CONSTANT_ENCAPSED_STRING","'importexport'",442],")",["T_OBJECT_OPERATOR","->",442],["T_STRING","__",442],"(",["T_CONSTANT_ENCAPSED_STRING","'Begin data validation'",442],")",")",";",["T_WHITESPACE","\n        ",442],["T_VARIABLE","$result",443],["T_WHITESPACE"," ",443],"=",["T_WHITESPACE"," ",443],["T_VARIABLE","$this",443],["T_OBJECT_OPERATOR","->",443],["T_STRING","_getEntityAdapter",443],"(",")",["T_WHITESPACE","\n            ",443],["T_OBJECT_OPERATOR","->",444],["T_STRING","setSource",444],"(",["T_VARIABLE","$this",444],["T_OBJECT_OPERATOR","->",444],["T_STRING","_getSourceAdapter",444],"(",["T_VARIABLE","$sourceFile",444],")",")",["T_WHITESPACE","\n            ",444],["T_OBJECT_OPERATOR","->",445],["T_STRING","isDataValid",445],"(",")",";",["T_WHITESPACE","\n\n        ",445],["T_VARIABLE","$messages",447],["T_WHITESPACE"," ",447],"=",["T_WHITESPACE"," ",447],["T_VARIABLE","$this",447],["T_OBJECT_OPERATOR","->",447],["T_STRING","getOperationResultMessages",447],"(",["T_VARIABLE","$result",447],")",";",["T_WHITESPACE","\n        ",447],["T_VARIABLE","$this",448],["T_OBJECT_OPERATOR","->",448],["T_STRING","addLogComment",448],"(",["T_VARIABLE","$messages",448],")",";",["T_WHITESPACE","\n        ",448],["T_IF","if",449],["T_WHITESPACE"," ",449],"(",["T_VARIABLE","$result",449],")",["T_WHITESPACE"," ",449],"{",["T_WHITESPACE","\n            ",449],["T_VARIABLE","$this",450],["T_OBJECT_OPERATOR","->",450],["T_STRING","addLogComment",450],"(",["T_STRING","Mage",450],["T_DOUBLE_COLON","::",450],["T_STRING","helper",450],"(",["T_CONSTANT_ENCAPSED_STRING","'importexport'",450],")",["T_OBJECT_OPERATOR","->",450],["T_STRING","__",450],"(",["T_CONSTANT_ENCAPSED_STRING","'Done import data validation'",450],")",")",";",["T_WHITESPACE","\n        ",450],"}",["T_WHITESPACE","\n        ",451],["T_RETURN","return",452],["T_WHITESPACE"," ",452],["T_VARIABLE","$result",452],";",["T_WHITESPACE","\n    ",452],"}",["T_WHITESPACE","\n\n    ",453],["T_DOC_COMMENT","\/**\n     * Invalidate indexes by process codes.\n     *\n     * @return Mage_ImportExport_Model_Import\n     *\/",455],["T_WHITESPACE","\n    ",459],["T_PUBLIC","public",460],["T_WHITESPACE"," ",460],["T_FUNCTION","function",460],["T_WHITESPACE"," ",460],["T_STRING","invalidateIndex",460],"(",")",["T_WHITESPACE","\n    ",460],"{",["T_WHITESPACE","\n        ",461],["T_IF","if",462],["T_WHITESPACE"," ",462],"(","!",["T_ISSET","isset",462],"(",["T_STRING","self",462],["T_DOUBLE_COLON","::",462],["T_VARIABLE","$_entityInvalidatedIndexes",462],"[",["T_VARIABLE","$this",462],["T_OBJECT_OPERATOR","->",462],["T_STRING","getEntity",462],"(",")","]",")",")",["T_WHITESPACE"," ",462],"{",["T_WHITESPACE","\n            ",462],["T_RETURN","return",463],["T_WHITESPACE"," ",463],["T_VARIABLE","$this",463],";",["T_WHITESPACE","\n        ",463],"}",["T_WHITESPACE","\n\n        ",464],["T_VARIABLE","$indexers",466],["T_WHITESPACE"," ",466],"=",["T_WHITESPACE"," ",466],["T_STRING","self",466],["T_DOUBLE_COLON","::",466],["T_VARIABLE","$_entityInvalidatedIndexes",466],"[",["T_VARIABLE","$this",466],["T_OBJECT_OPERATOR","->",466],["T_STRING","getEntity",466],"(",")","]",";",["T_WHITESPACE","\n        ",466],["T_FOREACH","foreach",467],["T_WHITESPACE"," ",467],"(",["T_VARIABLE","$indexers",467],["T_WHITESPACE"," ",467],["T_AS","as",467],["T_WHITESPACE"," ",467],["T_VARIABLE","$indexer",467],")",["T_WHITESPACE"," ",467],"{",["T_WHITESPACE","\n            ",467],["T_VARIABLE","$indexProcess",468],["T_WHITESPACE"," ",468],"=",["T_WHITESPACE"," ",468],["T_STRING","Mage",468],["T_DOUBLE_COLON","::",468],["T_STRING","getSingleton",468],"(",["T_CONSTANT_ENCAPSED_STRING","'index\/indexer'",468],")",["T_OBJECT_OPERATOR","->",468],["T_STRING","getProcessByCode",468],"(",["T_VARIABLE","$indexer",468],")",";",["T_WHITESPACE","\n            ",468],["T_IF","if",469],["T_WHITESPACE"," ",469],"(",["T_VARIABLE","$indexProcess",469],")",["T_WHITESPACE"," ",469],"{",["T_WHITESPACE","\n                ",469],["T_VARIABLE","$indexProcess",470],["T_OBJECT_OPERATOR","->",470],["T_STRING","changeStatus",470],"(",["T_STRING","Mage_Index_Model_Process",470],["T_DOUBLE_COLON","::",470],["T_STRING","STATUS_REQUIRE_REINDEX",470],")",";",["T_WHITESPACE","\n            ",470],"}",["T_WHITESPACE","\n        ",471],"}",["T_WHITESPACE","\n\n        ",472],["T_RETURN","return",474],["T_WHITESPACE"," ",474],["T_VARIABLE","$this",474],";",["T_WHITESPACE","\n    ",474],"}",["T_WHITESPACE","\n",475],"}",["T_WHITESPACE","\n\n",476]]
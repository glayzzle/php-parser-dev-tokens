[["T_OPEN_TAG","<?php\n",1],["T_DOC_COMMENT","\/**\n * Magento\n *\n * NOTICE OF LICENSE\n *\n * This source file is subject to the Open Software License (OSL 3.0)\n * that is bundled with this package in the file LICENSE.txt.\n * It is also available through the world-wide-web at this URL:\n * http:\/\/opensource.org\/licenses\/osl-3.0.php\n * If you did not receive a copy of the license and are unable to\n * obtain it through the world-wide-web, please send an email\n * to license@magento.com so we can send you a copy immediately.\n *\n * DISCLAIMER\n *\n * Do not edit or add to this file if you wish to upgrade Magento to newer\n * versions in the future. If you wish to customize Magento for your\n * needs please refer to http:\/\/www.magento.com for more information.\n *\n * @category    Mage\n * @package     Mage_ImportExport\n * @copyright  Copyright (c) 2006-2016 X.commerce, Inc. and affiliates (http:\/\/www.magento.com)\n * @license    http:\/\/opensource.org\/licenses\/osl-3.0.php  Open Software License (OSL 3.0)\n *\/",2],["T_WHITESPACE","\n\n",25],["T_DOC_COMMENT","\/**\n * Operation abstract class\n *\n * @category    Mage\n * @package     Mage_ImportExport\n * @author      Magento Core Team <core@magentocommerce.com>\n *\/",27],["T_WHITESPACE","\n",33],["T_ABSTRACT","abstract",34],["T_WHITESPACE"," ",34],["T_CLASS","class",34],["T_WHITESPACE"," ",34],["T_STRING","Mage_ImportExport_Model_Abstract",34],["T_WHITESPACE"," ",34],["T_EXTENDS","extends",34],["T_WHITESPACE"," ",34],["T_STRING","Varien_Object",34],["T_WHITESPACE","\n",34],"{",["T_WHITESPACE","\n    ",35],["T_DOC_COMMENT","\/**\n     * Log directory\n     *\n     *\/",36],["T_WHITESPACE","\n    ",39],["T_CONST","const",40],["T_WHITESPACE"," ",40],["T_STRING","LOG_DIRECTORY",40],["T_WHITESPACE"," ",40],"=",["T_WHITESPACE"," ",40],["T_CONSTANT_ENCAPSED_STRING","'log\/import_export\/'",40],";",["T_WHITESPACE","\n\n    ",40],["T_DOC_COMMENT","\/**\n     * Enable loging\n     *\n     * @var boolean\n     *\/",42],["T_WHITESPACE","\n    ",46],["T_PROTECTED","protected",47],["T_WHITESPACE"," ",47],["T_VARIABLE","$_debugMode",47],["T_WHITESPACE"," ",47],"=",["T_WHITESPACE"," ",47],["T_STRING","false",47],";",["T_WHITESPACE","\n\n    ",47],["T_DOC_COMMENT","\/**\n     * Loger instance\n     * @var Mage_Core_Model_Log_Adapter\n     *\/",49],["T_WHITESPACE","\n    ",52],["T_PROTECTED","protected",53],["T_WHITESPACE"," ",53],["T_VARIABLE","$_logInstance",53],";",["T_WHITESPACE","\n\n    ",53],["T_DOC_COMMENT","\/**\n     * Fields that should be replaced in debug with '***'\n     *\n     * @var array\n     *\/",55],["T_WHITESPACE","\n    ",59],["T_PROTECTED","protected",60],["T_WHITESPACE"," ",60],["T_VARIABLE","$_debugReplacePrivateDataKeys",60],["T_WHITESPACE"," ",60],"=",["T_WHITESPACE"," ",60],["T_ARRAY","array",60],"(",")",";",["T_WHITESPACE","\n\n    ",60],["T_DOC_COMMENT","\/**\n     * Contains all log information\n     *\n     * @var array\n     *\/",62],["T_WHITESPACE","\n    ",66],["T_PROTECTED","protected",67],["T_WHITESPACE"," ",67],["T_VARIABLE","$_logTrace",67],["T_WHITESPACE"," ",67],"=",["T_WHITESPACE"," ",67],["T_ARRAY","array",67],"(",")",";",["T_WHITESPACE","\n\n    ",67],["T_DOC_COMMENT","\/**\n     * Log debug data to file.\n     * Log file dir: var\/log\/import_export\/%Y\/%m\/%d\/%time%_%operation_type%_%entity_type%.log\n     *\n     * @param mixed $debugData\n     * @return Mage_ImportExport_Model_Abstract\n     *\/",69],["T_WHITESPACE","\n    ",75],["T_PUBLIC","public",76],["T_WHITESPACE"," ",76],["T_FUNCTION","function",76],["T_WHITESPACE"," ",76],["T_STRING","addLogComment",76],"(",["T_VARIABLE","$debugData",76],")",["T_WHITESPACE","\n    ",76],"{",["T_WHITESPACE","\n        ",77],["T_IF","if",78],["T_WHITESPACE"," ",78],"(",["T_STRING","is_array",78],"(",["T_VARIABLE","$debugData",78],")",")",["T_WHITESPACE"," ",78],"{",["T_WHITESPACE","\n            ",78],["T_VARIABLE","$this",79],["T_OBJECT_OPERATOR","->",79],["T_STRING","_logTrace",79],["T_WHITESPACE"," ",79],"=",["T_WHITESPACE"," ",79],["T_STRING","array_merge",79],"(",["T_VARIABLE","$this",79],["T_OBJECT_OPERATOR","->",79],["T_STRING","_logTrace",79],",",["T_WHITESPACE"," ",79],["T_VARIABLE","$debugData",79],")",";",["T_WHITESPACE","\n        ",79],"}",["T_WHITESPACE"," ",80],["T_ELSE","else",80],["T_WHITESPACE"," ",80],"{",["T_WHITESPACE","\n            ",80],["T_VARIABLE","$this",81],["T_OBJECT_OPERATOR","->",81],["T_STRING","_logTrace",81],"[","]",["T_WHITESPACE"," ",81],"=",["T_WHITESPACE"," ",81],["T_VARIABLE","$debugData",81],";",["T_WHITESPACE","\n        ",81],"}",["T_WHITESPACE","\n        ",82],["T_IF","if",83],["T_WHITESPACE"," ",83],"(","!",["T_VARIABLE","$this",83],["T_OBJECT_OPERATOR","->",83],["T_STRING","_debugMode",83],")",["T_WHITESPACE"," ",83],"{",["T_WHITESPACE","\n            ",83],["T_RETURN","return",84],["T_WHITESPACE"," ",84],["T_VARIABLE","$this",84],";",["T_WHITESPACE","\n        ",84],"}",["T_WHITESPACE","\n\n        ",85],["T_IF","if",87],["T_WHITESPACE"," ",87],"(","!",["T_VARIABLE","$this",87],["T_OBJECT_OPERATOR","->",87],["T_STRING","_logInstance",87],")",["T_WHITESPACE"," ",87],"{",["T_WHITESPACE","\n            ",87],["T_VARIABLE","$dirName",88],["T_WHITESPACE","  ",88],"=",["T_WHITESPACE"," ",88],["T_STRING","date",88],"(",["T_CONSTANT_ENCAPSED_STRING","'Y'",88],["T_WHITESPACE"," ",88],".",["T_WHITESPACE"," ",88],["T_STRING","DS",88],["T_WHITESPACE"," ",88],".",["T_CONSTANT_ENCAPSED_STRING","'m'",88],["T_WHITESPACE"," ",88],".",["T_WHITESPACE"," ",88],["T_STRING","DS",88],["T_WHITESPACE"," ",88],".",["T_CONSTANT_ENCAPSED_STRING","'d'",88],["T_WHITESPACE"," ",88],".",["T_WHITESPACE"," ",88],["T_STRING","DS",88],")",";",["T_WHITESPACE","\n            ",88],["T_VARIABLE","$fileName",89],["T_WHITESPACE"," ",89],"=",["T_WHITESPACE"," ",89],["T_STRING","join",89],"(",["T_CONSTANT_ENCAPSED_STRING","'_'",89],",",["T_WHITESPACE"," ",89],["T_ARRAY","array",89],"(",["T_WHITESPACE","\n                ",89],["T_STRING","str_replace",90],"(",["T_CONSTANT_ENCAPSED_STRING","':'",90],",",["T_WHITESPACE"," ",90],["T_CONSTANT_ENCAPSED_STRING","'-'",90],",",["T_WHITESPACE"," ",90],["T_VARIABLE","$this",90],["T_OBJECT_OPERATOR","->",90],["T_STRING","getRunAt",90],"(",")",")",",",["T_WHITESPACE","\n                ",90],["T_VARIABLE","$this",91],["T_OBJECT_OPERATOR","->",91],["T_STRING","getScheduledOperationId",91],"(",")",",",["T_WHITESPACE","\n                ",91],["T_VARIABLE","$this",92],["T_OBJECT_OPERATOR","->",92],["T_STRING","getOperationType",92],"(",")",",",["T_WHITESPACE","\n                ",92],["T_VARIABLE","$this",93],["T_OBJECT_OPERATOR","->",93],["T_STRING","getEntity",93],"(",")",["T_WHITESPACE","\n            ",93],")",")",";",["T_WHITESPACE","\n            ",94],["T_VARIABLE","$dirPath",95],["T_WHITESPACE"," ",95],"=",["T_WHITESPACE"," ",95],["T_STRING","Mage",95],["T_DOUBLE_COLON","::",95],["T_STRING","getBaseDir",95],"(",["T_CONSTANT_ENCAPSED_STRING","'var'",95],")",["T_WHITESPACE"," ",95],".",["T_WHITESPACE"," ",95],["T_STRING","DS",95],["T_WHITESPACE"," ",95],".",["T_WHITESPACE"," ",95],["T_STRING","self",95],["T_DOUBLE_COLON","::",95],["T_STRING","LOG_DIRECTORY",95],["T_WHITESPACE","\n                ",95],".",["T_WHITESPACE"," ",96],["T_VARIABLE","$dirName",96],";",["T_WHITESPACE","\n            ",96],["T_IF","if",97],["T_WHITESPACE"," ",97],"(","!",["T_STRING","is_dir",97],"(",["T_VARIABLE","$dirPath",97],")",")",["T_WHITESPACE"," ",97],"{",["T_WHITESPACE","\n                ",97],["T_STRING","mkdir",98],"(",["T_VARIABLE","$dirPath",98],",",["T_WHITESPACE"," ",98],["T_LNUMBER","0750",98],",",["T_WHITESPACE"," ",98],["T_STRING","true",98],")",";",["T_WHITESPACE","\n            ",98],"}",["T_WHITESPACE","\n            ",99],["T_VARIABLE","$fileName",100],["T_WHITESPACE"," ",100],"=",["T_WHITESPACE"," ",100],["T_STRING","substr",100],"(",["T_STRING","strstr",100],"(",["T_STRING","self",100],["T_DOUBLE_COLON","::",100],["T_STRING","LOG_DIRECTORY",100],",",["T_WHITESPACE"," ",100],["T_STRING","DS",100],")",",",["T_WHITESPACE"," ",100],["T_LNUMBER","1",100],")",["T_WHITESPACE","\n                ",100],".",["T_WHITESPACE"," ",101],["T_VARIABLE","$dirName",101],["T_WHITESPACE"," ",101],".",["T_WHITESPACE"," ",101],["T_VARIABLE","$fileName",101],["T_WHITESPACE"," ",101],".",["T_WHITESPACE"," ",101],["T_CONSTANT_ENCAPSED_STRING","'.log'",101],";",["T_WHITESPACE","\n            ",101],["T_VARIABLE","$this",102],["T_OBJECT_OPERATOR","->",102],["T_STRING","_logInstance",102],["T_WHITESPACE"," ",102],"=",["T_WHITESPACE"," ",102],["T_STRING","Mage",102],["T_DOUBLE_COLON","::",102],["T_STRING","getModel",102],"(",["T_CONSTANT_ENCAPSED_STRING","'core\/log_adapter'",102],",",["T_WHITESPACE"," ",102],["T_VARIABLE","$fileName",102],")",["T_WHITESPACE","\n                ",102],["T_OBJECT_OPERATOR","->",103],["T_STRING","setFilterDataKeys",103],"(",["T_VARIABLE","$this",103],["T_OBJECT_OPERATOR","->",103],["T_STRING","_debugReplacePrivateDataKeys",103],")",";",["T_WHITESPACE","\n        ",103],"}",["T_WHITESPACE","\n        ",104],["T_VARIABLE","$this",105],["T_OBJECT_OPERATOR","->",105],["T_STRING","_logInstance",105],["T_OBJECT_OPERATOR","->",105],["T_STRING","log",105],"(",["T_VARIABLE","$debugData",105],")",";",["T_WHITESPACE","\n        ",105],["T_RETURN","return",106],["T_WHITESPACE"," ",106],["T_VARIABLE","$this",106],";",["T_WHITESPACE","\n    ",106],"}",["T_WHITESPACE","\n\n    ",107],["T_DOC_COMMENT","\/**\n     * Return human readable debug trace.\n     *\n     * @return array\n     *\/",109],["T_WHITESPACE","\n    ",113],["T_PUBLIC","public",114],["T_WHITESPACE"," ",114],["T_FUNCTION","function",114],["T_WHITESPACE"," ",114],["T_STRING","getFormatedLogTrace",114],"(",")",["T_WHITESPACE","\n    ",114],"{",["T_WHITESPACE","\n        ",115],["T_VARIABLE","$trace",116],["T_WHITESPACE"," ",116],"=",["T_WHITESPACE"," ",116],["T_CONSTANT_ENCAPSED_STRING","''",116],";",["T_WHITESPACE","\n        ",116],["T_VARIABLE","$lineNumber",117],["T_WHITESPACE"," ",117],"=",["T_WHITESPACE"," ",117],["T_LNUMBER","1",117],";",["T_WHITESPACE","\n        ",117],["T_FOREACH","foreach",118],["T_WHITESPACE"," ",118],"(",["T_VARIABLE","$this",118],["T_OBJECT_OPERATOR","->",118],["T_STRING","_logTrace",118],["T_WHITESPACE"," ",118],["T_AS","as",118],["T_WHITESPACE"," ",118],"&",["T_VARIABLE","$info",118],")",["T_WHITESPACE"," ",118],"{",["T_WHITESPACE","\n            ",118],["T_VARIABLE","$trace",119],["T_WHITESPACE"," ",119],["T_CONCAT_EQUAL",".=",119],["T_WHITESPACE"," ",119],["T_VARIABLE","$lineNumber",119],["T_INC","++",119],["T_WHITESPACE"," ",119],".",["T_WHITESPACE"," ",119],["T_CONSTANT_ENCAPSED_STRING","': '",119],["T_WHITESPACE"," ",119],".",["T_WHITESPACE"," ",119],["T_VARIABLE","$info",119],["T_WHITESPACE"," ",119],".",["T_WHITESPACE"," ",119],["T_CONSTANT_ENCAPSED_STRING","\"\\n\"",119],";",["T_WHITESPACE","\n        ",119],"}",["T_WHITESPACE","\n        ",120],["T_RETURN","return",121],["T_WHITESPACE"," ",121],["T_VARIABLE","$trace",121],";",["T_WHITESPACE","\n    ",121],"}",["T_WHITESPACE","\n\n    ",122],["T_DOC_COMMENT","\/**\n     * Sets debug mode\n     *\n     * @param bool $mode\n     * @return Mage_ImportExport_Model_Abstract\n     *\/",124],["T_WHITESPACE","\n    ",129],["T_PUBLIC","public",130],["T_WHITESPACE"," ",130],["T_FUNCTION","function",130],["T_WHITESPACE"," ",130],["T_STRING","setDebugMode",130],"(",["T_VARIABLE","$mode",130],["T_WHITESPACE"," ",130],"=",["T_WHITESPACE"," ",130],["T_STRING","true",130],")",["T_WHITESPACE","\n    ",130],"{",["T_WHITESPACE","\n        ",131],["T_VARIABLE","$this",132],["T_OBJECT_OPERATOR","->",132],["T_STRING","_debugMode",132],["T_WHITESPACE"," ",132],"=",["T_WHITESPACE"," ",132],["T_BOOL_CAST","(bool)",132],["T_VARIABLE","$mode",132],";",["T_WHITESPACE","\n        ",132],["T_RETURN","return",133],["T_WHITESPACE"," ",133],["T_VARIABLE","$this",133],";",["T_WHITESPACE","\n    ",133],"}",["T_WHITESPACE","\n",134],"}",["T_WHITESPACE","\n",135]]
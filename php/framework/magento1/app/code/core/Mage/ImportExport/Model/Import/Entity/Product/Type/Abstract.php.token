[["T_OPEN_TAG","<?php\n",1],["T_DOC_COMMENT","\/**\n * Magento\n *\n * NOTICE OF LICENSE\n *\n * This source file is subject to the Open Software License (OSL 3.0)\n * that is bundled with this package in the file LICENSE.txt.\n * It is also available through the world-wide-web at this URL:\n * http:\/\/opensource.org\/licenses\/osl-3.0.php\n * If you did not receive a copy of the license and are unable to\n * obtain it through the world-wide-web, please send an email\n * to license@magento.com so we can send you a copy immediately.\n *\n * DISCLAIMER\n *\n * Do not edit or add to this file if you wish to upgrade Magento to newer\n * versions in the future. If you wish to customize Magento for your\n * needs please refer to http:\/\/www.magento.com for more information.\n *\n * @category    Mage\n * @package     Mage_ImportExport\n * @copyright  Copyright (c) 2006-2016 X.commerce, Inc. and affiliates (http:\/\/www.magento.com)\n * @license    http:\/\/opensource.org\/licenses\/osl-3.0.php  Open Software License (OSL 3.0)\n *\/",2],["T_WHITESPACE","\n\n",25],["T_DOC_COMMENT","\/**\n * Import entity abstract product type model\n *\n * @category    Mage\n * @package     Mage_ImportExport\n * @author      Magento Core Team <core@magentocommerce.com>\n *\/",27],["T_WHITESPACE","\n",33],["T_ABSTRACT","abstract",34],["T_WHITESPACE"," ",34],["T_CLASS","class",34],["T_WHITESPACE"," ",34],["T_STRING","Mage_ImportExport_Model_Import_Entity_Product_Type_Abstract",34],["T_WHITESPACE","\n",34],"{",["T_WHITESPACE","\n    ",35],["T_DOC_COMMENT","\/**\n     * Product type attribute sets and attributes parameters.\n     *\n     * [attr_set_name_1] => array(\n     *     [attr_code_1] => array(\n     *         'options' => array(),\n     *         'type' => 'text', 'price', 'textarea', 'select', etc.\n     *         'id' => ..\n     *     ),\n     *     ...\n     * ),\n     * ...\n     *\n     * @var array\n     *\/",36],["T_WHITESPACE","\n    ",50],["T_PROTECTED","protected",51],["T_WHITESPACE"," ",51],["T_VARIABLE","$_attributes",51],["T_WHITESPACE"," ",51],"=",["T_WHITESPACE"," ",51],["T_ARRAY","array",51],"(",")",";",["T_WHITESPACE","\n\n    ",51],["T_DOC_COMMENT","\/**\n     * Attributes' codes which will be allowed anyway, independently from its visibility property.\n     *\n     * @var array\n     *\/",53],["T_WHITESPACE","\n    ",57],["T_PROTECTED","protected",58],["T_WHITESPACE"," ",58],["T_VARIABLE","$_forcedAttributesCodes",58],["T_WHITESPACE"," ",58],"=",["T_WHITESPACE"," ",58],["T_ARRAY","array",58],"(",")",";",["T_WHITESPACE","\n\n    ",58],["T_DOC_COMMENT","\/**\n     * Attributes with index (not label) value.\n     *\n     * @var array\n     *\/",60],["T_WHITESPACE","\n    ",64],["T_PROTECTED","protected",65],["T_WHITESPACE"," ",65],["T_VARIABLE","$_indexValueAttributes",65],["T_WHITESPACE"," ",65],"=",["T_WHITESPACE"," ",65],["T_ARRAY","array",65],"(",")",";",["T_WHITESPACE","\n\n    ",65],["T_DOC_COMMENT","\/**\n     * Validation failure message template definitions\n     *\n     * @var array\n     *\/",67],["T_WHITESPACE","\n    ",71],["T_PROTECTED","protected",72],["T_WHITESPACE"," ",72],["T_VARIABLE","$_messageTemplates",72],["T_WHITESPACE"," ",72],"=",["T_WHITESPACE"," ",72],["T_ARRAY","array",72],"(",")",";",["T_WHITESPACE","\n\n    ",72],["T_DOC_COMMENT","\/**\n     * Column names that holds values with particular meaning.\n     *\n     * @var array\n     *\/",74],["T_WHITESPACE","\n    ",78],["T_PROTECTED","protected",79],["T_WHITESPACE"," ",79],["T_VARIABLE","$_particularAttributes",79],["T_WHITESPACE"," ",79],"=",["T_WHITESPACE"," ",79],["T_ARRAY","array",79],"(",")",";",["T_WHITESPACE","\n\n    ",79],["T_DOC_COMMENT","\/**\n     * Product entity object.\n     *\n     * @var Mage_ImportExport_Model_Import_Entity_Product\n     *\/",81],["T_WHITESPACE","\n    ",85],["T_PROTECTED","protected",86],["T_WHITESPACE"," ",86],["T_VARIABLE","$_entityModel",86],";",["T_WHITESPACE","\n\n    ",86],["T_DOC_COMMENT","\/**\n     * Product type (simple, configurable, etc.).\n     *\n     * @var string\n     *\/",88],["T_WHITESPACE","\n    ",92],["T_PROTECTED","protected",93],["T_WHITESPACE"," ",93],["T_VARIABLE","$_type",93],";",["T_WHITESPACE","\n\n    ",93],["T_DOC_COMMENT","\/**\n     * Object constructor.\n     *\n     * @param array $params\n     * @throws Exception\n     *\/",95],["T_WHITESPACE","\n    ",100],["T_FINAL","final",101],["T_WHITESPACE"," ",101],["T_PUBLIC","public",101],["T_WHITESPACE"," ",101],["T_FUNCTION","function",101],["T_WHITESPACE"," ",101],["T_STRING","__construct",101],"(",["T_ARRAY","array",101],["T_WHITESPACE"," ",101],["T_VARIABLE","$params",101],")",["T_WHITESPACE","\n    ",101],"{",["T_WHITESPACE","\n        ",102],["T_IF","if",103],["T_WHITESPACE"," ",103],"(",["T_VARIABLE","$this",103],["T_OBJECT_OPERATOR","->",103],["T_STRING","isSuitable",103],"(",")",")",["T_WHITESPACE"," ",103],"{",["T_WHITESPACE","\n            ",103],["T_IF","if",104],["T_WHITESPACE"," ",104],"(","!",["T_ISSET","isset",104],"(",["T_VARIABLE","$params",104],"[",["T_LNUMBER","0",104],"]",")",["T_WHITESPACE"," ",104],["T_BOOLEAN_OR","||",104],["T_WHITESPACE"," ",104],"!",["T_ISSET","isset",104],"(",["T_VARIABLE","$params",104],"[",["T_LNUMBER","1",104],"]",")",["T_WHITESPACE","\n                ",104],["T_BOOLEAN_OR","||",105],["T_WHITESPACE"," ",105],"!",["T_STRING","is_object",105],"(",["T_VARIABLE","$params",105],"[",["T_LNUMBER","0",105],"]",")",["T_WHITESPACE"," ",105],["T_BOOLEAN_OR","||",105],["T_WHITESPACE"," ",105],"!","(",["T_VARIABLE","$params",105],"[",["T_LNUMBER","0",105],"]",["T_WHITESPACE"," ",105],["T_INSTANCEOF","instanceof",105],["T_WHITESPACE"," ",105],["T_STRING","Mage_ImportExport_Model_Import_Entity_Product",105],")",")",["T_WHITESPACE"," ",105],"{",["T_WHITESPACE","\n                ",105],["T_STRING","Mage",106],["T_DOUBLE_COLON","::",106],["T_STRING","throwException",106],"(",["T_STRING","Mage",106],["T_DOUBLE_COLON","::",106],["T_STRING","helper",106],"(",["T_CONSTANT_ENCAPSED_STRING","'importexport'",106],")",["T_OBJECT_OPERATOR","->",106],["T_STRING","__",106],"(",["T_CONSTANT_ENCAPSED_STRING","'Invalid parameters'",106],")",")",";",["T_WHITESPACE","\n            ",106],"}",["T_WHITESPACE","\n            ",107],["T_VARIABLE","$this",108],["T_OBJECT_OPERATOR","->",108],["T_STRING","_entityModel",108],["T_WHITESPACE"," ",108],"=",["T_WHITESPACE"," ",108],["T_VARIABLE","$params",108],"[",["T_LNUMBER","0",108],"]",";",["T_WHITESPACE","\n            ",108],["T_VARIABLE","$this",109],["T_OBJECT_OPERATOR","->",109],["T_STRING","_type",109],["T_WHITESPACE","        ",109],"=",["T_WHITESPACE"," ",109],["T_VARIABLE","$params",109],"[",["T_LNUMBER","1",109],"]",";",["T_WHITESPACE","\n\n            ",109],["T_FOREACH","foreach",111],["T_WHITESPACE"," ",111],"(",["T_VARIABLE","$this",111],["T_OBJECT_OPERATOR","->",111],["T_STRING","_messageTemplates",111],["T_WHITESPACE"," ",111],["T_AS","as",111],["T_WHITESPACE"," ",111],["T_VARIABLE","$errorCode",111],["T_WHITESPACE"," ",111],["T_DOUBLE_ARROW","=>",111],["T_WHITESPACE"," ",111],["T_VARIABLE","$message",111],")",["T_WHITESPACE"," ",111],"{",["T_WHITESPACE","\n                ",111],["T_VARIABLE","$this",112],["T_OBJECT_OPERATOR","->",112],["T_STRING","_entityModel",112],["T_OBJECT_OPERATOR","->",112],["T_STRING","addMessageTemplate",112],"(",["T_VARIABLE","$errorCode",112],",",["T_WHITESPACE"," ",112],["T_VARIABLE","$message",112],")",";",["T_WHITESPACE","\n            ",112],"}",["T_WHITESPACE","\n\n            ",113],["T_IF","if",115],["T_WHITESPACE"," ",115],"(",["T_ISSET","isset",115],"(",["T_VARIABLE","$params",115],"[",["T_CONSTANT_ENCAPSED_STRING","'attributes'",115],"]",")",")",["T_WHITESPACE"," ",115],"{",["T_WHITESPACE","\n                ",115],["T_VARIABLE","$this",116],["T_OBJECT_OPERATOR","->",116],["T_STRING","_attributes",116],["T_WHITESPACE"," ",116],"=",["T_WHITESPACE"," ",116],["T_VARIABLE","$params",116],"[",["T_CONSTANT_ENCAPSED_STRING","'attributes'",116],"]",";",["T_WHITESPACE","\n            ",116],"}",["T_WHITESPACE"," ",117],["T_ELSE","else",117],["T_WHITESPACE"," ",117],"{",["T_WHITESPACE","\n                ",117],["T_VARIABLE","$this",118],["T_OBJECT_OPERATOR","->",118],["T_STRING","_initAttributes",118],"(",")",";",["T_WHITESPACE","\n            ",118],"}",["T_WHITESPACE","\n        ",119],"}",["T_WHITESPACE","\n    ",120],"}",["T_WHITESPACE","\n\n    ",121],["T_DOC_COMMENT","\/**\n     * Add attribute parameters to appropriate attribute set.\n     *\n     * @param string $attrSetName Name of attribute set.\n     * @param array $attrParams Refined attribute parameters.\n     * @return Mage_ImportExport_Model_Import_Entity_Product_Type_Abstract\n     *\/",123],["T_WHITESPACE","\n    ",129],["T_PROTECTED","protected",130],["T_WHITESPACE"," ",130],["T_FUNCTION","function",130],["T_WHITESPACE"," ",130],["T_STRING","_addAttributeParams",130],"(",["T_VARIABLE","$attrSetName",130],",",["T_WHITESPACE"," ",130],["T_ARRAY","array",130],["T_WHITESPACE"," ",130],["T_VARIABLE","$attrParams",130],")",["T_WHITESPACE","\n    ",130],"{",["T_WHITESPACE","\n        ",131],["T_IF","if",132],["T_WHITESPACE"," ",132],"(","!",["T_VARIABLE","$attrParams",132],"[",["T_CONSTANT_ENCAPSED_STRING","'apply_to'",132],"]",["T_WHITESPACE"," ",132],["T_BOOLEAN_OR","||",132],["T_WHITESPACE"," ",132],["T_STRING","in_array",132],"(",["T_VARIABLE","$this",132],["T_OBJECT_OPERATOR","->",132],["T_STRING","_type",132],",",["T_WHITESPACE"," ",132],["T_VARIABLE","$attrParams",132],"[",["T_CONSTANT_ENCAPSED_STRING","'apply_to'",132],"]",")",")",["T_WHITESPACE"," ",132],"{",["T_WHITESPACE","\n            ",132],["T_VARIABLE","$this",133],["T_OBJECT_OPERATOR","->",133],["T_STRING","_attributes",133],"[",["T_VARIABLE","$attrSetName",133],"]","[",["T_VARIABLE","$attrParams",133],"[",["T_CONSTANT_ENCAPSED_STRING","'code'",133],"]","]",["T_WHITESPACE"," ",133],"=",["T_WHITESPACE"," ",133],["T_VARIABLE","$attrParams",133],";",["T_WHITESPACE","\n        ",133],"}",["T_WHITESPACE","\n        ",134],["T_RETURN","return",135],["T_WHITESPACE"," ",135],["T_VARIABLE","$this",135],";",["T_WHITESPACE","\n    ",135],"}",["T_WHITESPACE","\n\n    ",136],["T_DOC_COMMENT","\/**\n     * Return product attributes for its attribute set specified in row data.\n     *\n     * @param array|string $attrSetData Product row data or simply attribute set name.\n     * @return array\n     *\/",138],["T_WHITESPACE","\n    ",143],["T_PROTECTED","protected",144],["T_WHITESPACE"," ",144],["T_FUNCTION","function",144],["T_WHITESPACE"," ",144],["T_STRING","_getProductAttributes",144],"(",["T_VARIABLE","$attrSetData",144],")",["T_WHITESPACE","\n    ",144],"{",["T_WHITESPACE","\n        ",145],["T_IF","if",146],["T_WHITESPACE"," ",146],"(",["T_STRING","is_array",146],"(",["T_VARIABLE","$attrSetData",146],")",")",["T_WHITESPACE"," ",146],"{",["T_WHITESPACE","\n            ",146],["T_RETURN","return",147],["T_WHITESPACE"," ",147],["T_VARIABLE","$this",147],["T_OBJECT_OPERATOR","->",147],["T_STRING","_attributes",147],"[",["T_VARIABLE","$attrSetData",147],"[",["T_STRING","Mage_ImportExport_Model_Import_Entity_Product",147],["T_DOUBLE_COLON","::",147],["T_STRING","COL_ATTR_SET",147],"]","]",";",["T_WHITESPACE","\n        ",147],"}",["T_WHITESPACE"," ",148],["T_ELSE","else",148],["T_WHITESPACE"," ",148],"{",["T_WHITESPACE","\n            ",148],["T_RETURN","return",149],["T_WHITESPACE"," ",149],["T_VARIABLE","$this",149],["T_OBJECT_OPERATOR","->",149],["T_STRING","_attributes",149],"[",["T_VARIABLE","$attrSetData",149],"]",";",["T_WHITESPACE","\n        ",149],"}",["T_WHITESPACE","\n    ",150],"}",["T_WHITESPACE","\n\n    ",151],["T_DOC_COMMENT","\/**\n     * Initialize attributes parameters for all attributes' sets.\n     *\n     * @return Mage_ImportExport_Model_Import_Entity_Product_Type_Abstract\n     *\/",153],["T_WHITESPACE","\n    ",157],["T_PROTECTED","protected",158],["T_WHITESPACE"," ",158],["T_FUNCTION","function",158],["T_WHITESPACE"," ",158],["T_STRING","_initAttributes",158],"(",")",["T_WHITESPACE","\n    ",158],"{",["T_WHITESPACE","\n        ",159],["T_COMMENT","\/\/ temporary storage for attributes' parameters to avoid double querying inside the loop\n",160],["T_WHITESPACE","        ",161],["T_VARIABLE","$attributesCache",161],["T_WHITESPACE"," ",161],"=",["T_WHITESPACE"," ",161],["T_ARRAY","array",161],"(",")",";",["T_WHITESPACE","\n\n        ",161],["T_FOREACH","foreach",163],["T_WHITESPACE"," ",163],"(",["T_STRING","Mage",163],["T_DOUBLE_COLON","::",163],["T_STRING","getResourceModel",163],"(",["T_CONSTANT_ENCAPSED_STRING","'eav\/entity_attribute_set_collection'",163],")",["T_WHITESPACE","\n                ",163],["T_OBJECT_OPERATOR","->",164],["T_STRING","setEntityTypeFilter",164],"(",["T_VARIABLE","$this",164],["T_OBJECT_OPERATOR","->",164],["T_STRING","_entityModel",164],["T_OBJECT_OPERATOR","->",164],["T_STRING","getEntityTypeId",164],"(",")",")",["T_WHITESPACE"," ",164],["T_AS","as",164],["T_WHITESPACE"," ",164],["T_VARIABLE","$attributeSet",164],")",["T_WHITESPACE"," ",164],"{",["T_WHITESPACE","\n            ",164],["T_FOREACH","foreach",165],["T_WHITESPACE"," ",165],"(",["T_STRING","Mage",165],["T_DOUBLE_COLON","::",165],["T_STRING","getResourceModel",165],"(",["T_CONSTANT_ENCAPSED_STRING","'catalog\/product_attribute_collection'",165],")",["T_WHITESPACE","\n                ",165],["T_OBJECT_OPERATOR","->",166],["T_STRING","setAttributeSetFilter",166],"(",["T_VARIABLE","$attributeSet",166],["T_OBJECT_OPERATOR","->",166],["T_STRING","getId",166],"(",")",")",["T_WHITESPACE"," ",166],["T_AS","as",166],["T_WHITESPACE"," ",166],["T_VARIABLE","$attribute",166],")",["T_WHITESPACE"," ",166],"{",["T_WHITESPACE","\n\n                ",166],["T_VARIABLE","$attributeCode",168],["T_WHITESPACE"," ",168],"=",["T_WHITESPACE"," ",168],["T_VARIABLE","$attribute",168],["T_OBJECT_OPERATOR","->",168],["T_STRING","getAttributeCode",168],"(",")",";",["T_WHITESPACE","\n                ",168],["T_VARIABLE","$attributeId",169],["T_WHITESPACE","   ",169],"=",["T_WHITESPACE"," ",169],["T_VARIABLE","$attribute",169],["T_OBJECT_OPERATOR","->",169],["T_STRING","getId",169],"(",")",";",["T_WHITESPACE","\n\n                ",169],["T_IF","if",171],["T_WHITESPACE"," ",171],"(",["T_VARIABLE","$attribute",171],["T_OBJECT_OPERATOR","->",171],["T_STRING","getIsVisible",171],"(",")",["T_WHITESPACE"," ",171],["T_BOOLEAN_OR","||",171],["T_WHITESPACE"," ",171],["T_STRING","in_array",171],"(",["T_VARIABLE","$attributeCode",171],",",["T_WHITESPACE"," ",171],["T_VARIABLE","$this",171],["T_OBJECT_OPERATOR","->",171],["T_STRING","_forcedAttributesCodes",171],")",")",["T_WHITESPACE"," ",171],"{",["T_WHITESPACE","\n                    ",171],["T_IF","if",172],["T_WHITESPACE"," ",172],"(","!",["T_ISSET","isset",172],"(",["T_VARIABLE","$attributesCache",172],"[",["T_VARIABLE","$attributeId",172],"]",")",")",["T_WHITESPACE"," ",172],"{",["T_WHITESPACE","\n                        ",172],["T_VARIABLE","$attributesCache",173],"[",["T_VARIABLE","$attributeId",173],"]",["T_WHITESPACE"," ",173],"=",["T_WHITESPACE"," ",173],["T_ARRAY","array",173],"(",["T_WHITESPACE","\n                            ",173],["T_CONSTANT_ENCAPSED_STRING","'id'",174],["T_WHITESPACE","               ",174],["T_DOUBLE_ARROW","=>",174],["T_WHITESPACE"," ",174],["T_VARIABLE","$attributeId",174],",",["T_WHITESPACE","\n                            ",174],["T_CONSTANT_ENCAPSED_STRING","'code'",175],["T_WHITESPACE","             ",175],["T_DOUBLE_ARROW","=>",175],["T_WHITESPACE"," ",175],["T_VARIABLE","$attributeCode",175],",",["T_WHITESPACE","\n                            ",175],["T_CONSTANT_ENCAPSED_STRING","'for_configurable'",176],["T_WHITESPACE"," ",176],["T_DOUBLE_ARROW","=>",176],["T_WHITESPACE"," ",176],["T_VARIABLE","$attribute",176],["T_OBJECT_OPERATOR","->",176],["T_STRING","getIsConfigurable",176],"(",")",",",["T_WHITESPACE","\n                            ",176],["T_CONSTANT_ENCAPSED_STRING","'is_global'",177],["T_WHITESPACE","        ",177],["T_DOUBLE_ARROW","=>",177],["T_WHITESPACE"," ",177],["T_VARIABLE","$attribute",177],["T_OBJECT_OPERATOR","->",177],["T_STRING","getIsGlobal",177],"(",")",",",["T_WHITESPACE","\n                            ",177],["T_CONSTANT_ENCAPSED_STRING","'is_required'",178],["T_WHITESPACE","      ",178],["T_DOUBLE_ARROW","=>",178],["T_WHITESPACE"," ",178],["T_VARIABLE","$attribute",178],["T_OBJECT_OPERATOR","->",178],["T_STRING","getIsRequired",178],"(",")",",",["T_WHITESPACE","\n                            ",178],["T_CONSTANT_ENCAPSED_STRING","'is_unique'",179],["T_WHITESPACE","        ",179],["T_DOUBLE_ARROW","=>",179],["T_WHITESPACE"," ",179],["T_VARIABLE","$attribute",179],["T_OBJECT_OPERATOR","->",179],["T_STRING","getIsUnique",179],"(",")",",",["T_WHITESPACE","\n                            ",179],["T_CONSTANT_ENCAPSED_STRING","'frontend_label'",180],["T_WHITESPACE","   ",180],["T_DOUBLE_ARROW","=>",180],["T_WHITESPACE"," ",180],["T_VARIABLE","$attribute",180],["T_OBJECT_OPERATOR","->",180],["T_STRING","getFrontendLabel",180],"(",")",",",["T_WHITESPACE","\n                            ",180],["T_CONSTANT_ENCAPSED_STRING","'is_static'",181],["T_WHITESPACE","        ",181],["T_DOUBLE_ARROW","=>",181],["T_WHITESPACE"," ",181],["T_VARIABLE","$attribute",181],["T_OBJECT_OPERATOR","->",181],["T_STRING","isStatic",181],"(",")",",",["T_WHITESPACE","\n                            ",181],["T_CONSTANT_ENCAPSED_STRING","'apply_to'",182],["T_WHITESPACE","         ",182],["T_DOUBLE_ARROW","=>",182],["T_WHITESPACE"," ",182],["T_VARIABLE","$attribute",182],["T_OBJECT_OPERATOR","->",182],["T_STRING","getApplyTo",182],"(",")",",",["T_WHITESPACE","\n                            ",182],["T_CONSTANT_ENCAPSED_STRING","'type'",183],["T_WHITESPACE","             ",183],["T_DOUBLE_ARROW","=>",183],["T_WHITESPACE"," ",183],["T_STRING","Mage_ImportExport_Model_Import",183],["T_DOUBLE_COLON","::",183],["T_STRING","getAttributeType",183],"(",["T_VARIABLE","$attribute",183],")",",",["T_WHITESPACE","\n                            ",183],["T_CONSTANT_ENCAPSED_STRING","'default_value'",184],["T_WHITESPACE","    ",184],["T_DOUBLE_ARROW","=>",184],["T_WHITESPACE"," ",184],["T_STRING","strlen",184],"(",["T_VARIABLE","$attribute",184],["T_OBJECT_OPERATOR","->",184],["T_STRING","getDefaultValue",184],"(",")",")",["T_WHITESPACE","\n                                                  ",184],"?",["T_WHITESPACE"," ",185],["T_VARIABLE","$attribute",185],["T_OBJECT_OPERATOR","->",185],["T_STRING","getDefaultValue",185],"(",")",["T_WHITESPACE"," ",185],":",["T_WHITESPACE"," ",185],["T_STRING","null",185],",",["T_WHITESPACE","\n                            ",185],["T_CONSTANT_ENCAPSED_STRING","'options'",186],["T_WHITESPACE","          ",186],["T_DOUBLE_ARROW","=>",186],["T_WHITESPACE"," ",186],["T_VARIABLE","$this",186],["T_OBJECT_OPERATOR","->",186],["T_STRING","_entityModel",186],["T_WHITESPACE","\n                                                      ",186],["T_OBJECT_OPERATOR","->",187],["T_STRING","getAttributeOptions",187],"(",["T_VARIABLE","$attribute",187],",",["T_WHITESPACE"," ",187],["T_VARIABLE","$this",187],["T_OBJECT_OPERATOR","->",187],["T_STRING","_indexValueAttributes",187],")",["T_WHITESPACE","\n                        ",187],")",";",["T_WHITESPACE","\n                    ",188],"}",["T_WHITESPACE","\n                    ",189],["T_VARIABLE","$this",190],["T_OBJECT_OPERATOR","->",190],["T_STRING","_addAttributeParams",190],"(",["T_VARIABLE","$attributeSet",190],["T_OBJECT_OPERATOR","->",190],["T_STRING","getAttributeSetName",190],"(",")",",",["T_WHITESPACE"," ",190],["T_VARIABLE","$attributesCache",190],"[",["T_VARIABLE","$attributeId",190],"]",")",";",["T_WHITESPACE","\n                ",190],"}",["T_WHITESPACE","\n            ",191],"}",["T_WHITESPACE","\n        ",192],"}",["T_WHITESPACE","\n        ",193],["T_RETURN","return",194],["T_WHITESPACE"," ",194],["T_VARIABLE","$this",194],";",["T_WHITESPACE","\n    ",194],"}",["T_WHITESPACE","\n\n    ",195],["T_DOC_COMMENT","\/**\n     * Have we check attribute for is_required? Used as last chance to disable this type of check.\n     *\n     * @param string $attrCode\n     * @return bool\n     *\/",197],["T_WHITESPACE","\n    ",202],["T_PROTECTED","protected",203],["T_WHITESPACE"," ",203],["T_FUNCTION","function",203],["T_WHITESPACE"," ",203],["T_STRING","_isAttributeRequiredCheckNeeded",203],"(",["T_VARIABLE","$attrCode",203],")",["T_WHITESPACE","\n    ",203],"{",["T_WHITESPACE","\n        ",204],["T_RETURN","return",205],["T_WHITESPACE"," ",205],["T_STRING","true",205],";",["T_WHITESPACE","\n    ",205],"}",["T_WHITESPACE","\n\n    ",206],["T_DOC_COMMENT","\/**\n     * Validate particular attributes columns.\n     *\n     * @param array $rowData\n     * @param int $rowNum\n     * @return bool\n     *\/",208],["T_WHITESPACE","\n    ",214],["T_PROTECTED","protected",215],["T_WHITESPACE"," ",215],["T_FUNCTION","function",215],["T_WHITESPACE"," ",215],["T_STRING","_isParticularAttributesValid",215],"(",["T_ARRAY","array",215],["T_WHITESPACE"," ",215],["T_VARIABLE","$rowData",215],",",["T_WHITESPACE"," ",215],["T_VARIABLE","$rowNum",215],")",["T_WHITESPACE","\n    ",215],"{",["T_WHITESPACE","\n        ",216],["T_RETURN","return",217],["T_WHITESPACE"," ",217],["T_STRING","true",217],";",["T_WHITESPACE","\n    ",217],"}",["T_WHITESPACE","\n\n    ",218],["T_DOC_COMMENT","\/**\n     * Check price correction value validity (signed integer or float with or without percentage sign).\n     *\n     * @param string $value\n     * @return int\n     *\/",220],["T_WHITESPACE","\n    ",225],["T_PROTECTED","protected",226],["T_WHITESPACE"," ",226],["T_FUNCTION","function",226],["T_WHITESPACE"," ",226],["T_STRING","_isPriceCorr",226],"(",["T_VARIABLE","$value",226],")",["T_WHITESPACE","\n    ",226],"{",["T_WHITESPACE","\n        ",227],["T_RETURN","return",228],["T_WHITESPACE"," ",228],["T_STRING","preg_match",228],"(",["T_CONSTANT_ENCAPSED_STRING","'\/^-?\\d+\\.?\\d*%?$\/'",228],",",["T_WHITESPACE"," ",228],["T_VARIABLE","$value",228],")",";",["T_WHITESPACE","\n    ",228],"}",["T_WHITESPACE","\n\n    ",229],["T_DOC_COMMENT","\/**\n     * Particular attribute names getter.\n     *\n     * @return array\n     *\/",231],["T_WHITESPACE","\n    ",235],["T_PUBLIC","public",236],["T_WHITESPACE"," ",236],["T_FUNCTION","function",236],["T_WHITESPACE"," ",236],["T_STRING","getParticularAttributes",236],"(",")",["T_WHITESPACE","\n    ",236],"{",["T_WHITESPACE","\n        ",237],["T_RETURN","return",238],["T_WHITESPACE"," ",238],["T_VARIABLE","$this",238],["T_OBJECT_OPERATOR","->",238],["T_STRING","_particularAttributes",238],";",["T_WHITESPACE","\n    ",238],"}",["T_WHITESPACE","\n\n    ",239],["T_DOC_COMMENT","\/**\n     * Validate row attributes. Pass VALID row data ONLY as argument.\n     *\n     * @param array $rowData\n     * @param int $rowNum\n     * @param boolean $isNewProduct OPTIONAL.\n     * @return boolean\n     *\/",241],["T_WHITESPACE","\n    ",248],["T_PUBLIC","public",249],["T_WHITESPACE"," ",249],["T_FUNCTION","function",249],["T_WHITESPACE"," ",249],["T_STRING","isRowValid",249],"(",["T_ARRAY","array",249],["T_WHITESPACE"," ",249],["T_VARIABLE","$rowData",249],",",["T_WHITESPACE"," ",249],["T_VARIABLE","$rowNum",249],",",["T_WHITESPACE"," ",249],["T_VARIABLE","$isNewProduct",249],["T_WHITESPACE"," ",249],"=",["T_WHITESPACE"," ",249],["T_STRING","true",249],")",["T_WHITESPACE","\n    ",249],"{",["T_WHITESPACE","\n        ",250],["T_VARIABLE","$error",251],["T_WHITESPACE","    ",251],"=",["T_WHITESPACE"," ",251],["T_STRING","false",251],";",["T_WHITESPACE","\n        ",251],["T_VARIABLE","$rowScope",252],["T_WHITESPACE"," ",252],"=",["T_WHITESPACE"," ",252],["T_VARIABLE","$this",252],["T_OBJECT_OPERATOR","->",252],["T_STRING","_entityModel",252],["T_OBJECT_OPERATOR","->",252],["T_STRING","getRowScope",252],"(",["T_VARIABLE","$rowData",252],")",";",["T_WHITESPACE","\n\n        ",252],["T_IF","if",254],["T_WHITESPACE"," ",254],"(",["T_STRING","Mage_ImportExport_Model_Import_Entity_Product",254],["T_DOUBLE_COLON","::",254],["T_STRING","SCOPE_NULL",254],["T_WHITESPACE"," ",254],["T_IS_NOT_EQUAL","!=",254],["T_WHITESPACE"," ",254],["T_VARIABLE","$rowScope",254],")",["T_WHITESPACE"," ",254],"{",["T_WHITESPACE","\n            ",254],["T_FOREACH","foreach",255],["T_WHITESPACE"," ",255],"(",["T_VARIABLE","$this",255],["T_OBJECT_OPERATOR","->",255],["T_STRING","_getProductAttributes",255],"(",["T_VARIABLE","$rowData",255],")",["T_WHITESPACE"," ",255],["T_AS","as",255],["T_WHITESPACE"," ",255],["T_VARIABLE","$attrCode",255],["T_WHITESPACE"," ",255],["T_DOUBLE_ARROW","=>",255],["T_WHITESPACE"," ",255],["T_VARIABLE","$attrParams",255],")",["T_WHITESPACE"," ",255],"{",["T_WHITESPACE","\n                ",255],["T_COMMENT","\/\/ check value for non-empty in the case of required attribute?\n",256],["T_WHITESPACE","                ",257],["T_IF","if",257],["T_WHITESPACE"," ",257],"(",["T_ISSET","isset",257],"(",["T_VARIABLE","$rowData",257],"[",["T_VARIABLE","$attrCode",257],"]",")",["T_WHITESPACE"," ",257],["T_BOOLEAN_AND","&&",257],["T_WHITESPACE"," ",257],["T_STRING","strlen",257],"(",["T_VARIABLE","$rowData",257],"[",["T_VARIABLE","$attrCode",257],"]",")",")",["T_WHITESPACE"," ",257],"{",["T_WHITESPACE","\n                    ",257],["T_VARIABLE","$error",258],["T_WHITESPACE"," ",258],["T_OR_EQUAL","|=",258],["T_WHITESPACE"," ",258],"!",["T_VARIABLE","$this",258],["T_OBJECT_OPERATOR","->",258],["T_STRING","_entityModel",258],["T_OBJECT_OPERATOR","->",258],["T_STRING","isAttributeValid",258],"(",["T_VARIABLE","$attrCode",258],",",["T_WHITESPACE"," ",258],["T_VARIABLE","$attrParams",258],",",["T_WHITESPACE"," ",258],["T_VARIABLE","$rowData",258],",",["T_WHITESPACE"," ",258],["T_VARIABLE","$rowNum",258],")",";",["T_WHITESPACE","\n                ",258],"}",["T_WHITESPACE"," ",259],["T_ELSEIF","elseif",259],["T_WHITESPACE"," ",259],"(",["T_WHITESPACE","\n                    ",259],["T_VARIABLE","$this",260],["T_OBJECT_OPERATOR","->",260],["T_STRING","_isAttributeRequiredCheckNeeded",260],"(",["T_VARIABLE","$attrCode",260],")",["T_WHITESPACE","\n                    ",260],["T_BOOLEAN_AND","&&",261],["T_WHITESPACE"," ",261],["T_VARIABLE","$attrParams",261],"[",["T_CONSTANT_ENCAPSED_STRING","'is_required'",261],"]",")",["T_WHITESPACE"," ",261],"{",["T_WHITESPACE","\n                        ",261],["T_COMMENT","\/\/ For the default scope - if this is a new product or\n",262],["T_WHITESPACE","                        ",263],["T_COMMENT","\/\/ for an old product, if the imported doc has the column present for the attrCode\n",263],["T_WHITESPACE","                        ",264],["T_IF","if",264],["T_WHITESPACE"," ",264],"(",["T_STRING","Mage_ImportExport_Model_Import_Entity_Product",264],["T_DOUBLE_COLON","::",264],["T_STRING","SCOPE_DEFAULT",264],["T_WHITESPACE"," ",264],["T_IS_EQUAL","==",264],["T_WHITESPACE"," ",264],["T_VARIABLE","$rowScope",264],["T_WHITESPACE"," ",264],["T_BOOLEAN_AND","&&",264],["T_WHITESPACE","\n                            ",264],"(",["T_VARIABLE","$isNewProduct",265],["T_WHITESPACE"," ",265],["T_BOOLEAN_OR","||",265],["T_WHITESPACE"," ",265],["T_STRING","array_key_exists",265],"(",["T_VARIABLE","$attrCode",265],",",["T_WHITESPACE"," ",265],["T_VARIABLE","$rowData",265],")",")",")",["T_WHITESPACE"," ",265],"{",["T_WHITESPACE","\n                            ",265],["T_VARIABLE","$this",266],["T_OBJECT_OPERATOR","->",266],["T_STRING","_entityModel",266],["T_OBJECT_OPERATOR","->",266],["T_STRING","addRowError",266],"(",["T_WHITESPACE","\n                                ",266],["T_STRING","Mage_ImportExport_Model_Import_Entity_Product",267],["T_DOUBLE_COLON","::",267],["T_STRING","ERROR_VALUE_IS_REQUIRED",267],",",["T_WHITESPACE","\n                                    ",267],["T_VARIABLE","$rowNum",268],",",["T_WHITESPACE"," ",268],["T_VARIABLE","$attrCode",268],["T_WHITESPACE","\n                            ",268],")",";",["T_WHITESPACE","\n                            ",269],["T_VARIABLE","$error",270],["T_WHITESPACE"," ",270],"=",["T_WHITESPACE"," ",270],["T_STRING","true",270],";",["T_WHITESPACE","\n                        ",270],"}",["T_WHITESPACE","\n                ",271],"}",["T_WHITESPACE","\n            ",272],"}",["T_WHITESPACE","\n        ",273],"}",["T_WHITESPACE","\n        ",274],["T_VARIABLE","$error",275],["T_WHITESPACE"," ",275],["T_OR_EQUAL","|=",275],["T_WHITESPACE"," ",275],"!",["T_VARIABLE","$this",275],["T_OBJECT_OPERATOR","->",275],["T_STRING","_isParticularAttributesValid",275],"(",["T_VARIABLE","$rowData",275],",",["T_WHITESPACE"," ",275],["T_VARIABLE","$rowNum",275],")",";",["T_WHITESPACE","\n\n        ",275],["T_RETURN","return",277],["T_WHITESPACE"," ",277],"!",["T_VARIABLE","$error",277],";",["T_WHITESPACE","\n    ",277],"}",["T_WHITESPACE","\n\n    ",278],["T_DOC_COMMENT","\/**\n     * Additional check for model availability. If method returns FALSE - model is not suitable for data processing.\n     *\n     * @return bool\n     *\/",280],["T_WHITESPACE","\n    ",284],["T_PUBLIC","public",285],["T_WHITESPACE"," ",285],["T_FUNCTION","function",285],["T_WHITESPACE"," ",285],["T_STRING","isSuitable",285],"(",")",["T_WHITESPACE","\n    ",285],"{",["T_WHITESPACE","\n        ",286],["T_RETURN","return",287],["T_WHITESPACE"," ",287],["T_STRING","true",287],";",["T_WHITESPACE","\n    ",287],"}",["T_WHITESPACE","\n\n    ",288],["T_DOC_COMMENT","\/**\n     * Prepare attributes values for save: remove non-existent, remove empty values, remove static.\n     *\n     * @param array $rowData\n     * @param bool $withDefaultValue\n     * @return array\n     *\/",290],["T_WHITESPACE","\n    ",296],["T_PUBLIC","public",297],["T_WHITESPACE"," ",297],["T_FUNCTION","function",297],["T_WHITESPACE"," ",297],["T_STRING","prepareAttributesForSave",297],"(",["T_ARRAY","array",297],["T_WHITESPACE"," ",297],["T_VARIABLE","$rowData",297],",",["T_WHITESPACE"," ",297],["T_VARIABLE","$withDefaultValue",297],["T_WHITESPACE"," ",297],"=",["T_WHITESPACE"," ",297],["T_STRING","true",297],")",["T_WHITESPACE","\n    ",297],"{",["T_WHITESPACE","\n        ",298],["T_VARIABLE","$resultAttrs",299],["T_WHITESPACE"," ",299],"=",["T_WHITESPACE"," ",299],["T_ARRAY","array",299],"(",")",";",["T_WHITESPACE","\n\n        ",299],["T_FOREACH","foreach",301],["T_WHITESPACE"," ",301],"(",["T_VARIABLE","$this",301],["T_OBJECT_OPERATOR","->",301],["T_STRING","_getProductAttributes",301],"(",["T_VARIABLE","$rowData",301],")",["T_WHITESPACE"," ",301],["T_AS","as",301],["T_WHITESPACE"," ",301],["T_VARIABLE","$attrCode",301],["T_WHITESPACE"," ",301],["T_DOUBLE_ARROW","=>",301],["T_WHITESPACE"," ",301],["T_VARIABLE","$attrParams",301],")",["T_WHITESPACE"," ",301],"{",["T_WHITESPACE","\n            ",301],["T_IF","if",302],["T_WHITESPACE"," ",302],"(","!",["T_VARIABLE","$attrParams",302],"[",["T_CONSTANT_ENCAPSED_STRING","'is_static'",302],"]",")",["T_WHITESPACE"," ",302],"{",["T_WHITESPACE","\n                ",302],["T_IF","if",303],["T_WHITESPACE"," ",303],"(",["T_ISSET","isset",303],"(",["T_VARIABLE","$rowData",303],"[",["T_VARIABLE","$attrCode",303],"]",")",["T_WHITESPACE"," ",303],["T_BOOLEAN_AND","&&",303],["T_WHITESPACE"," ",303],["T_STRING","strlen",303],"(",["T_VARIABLE","$rowData",303],"[",["T_VARIABLE","$attrCode",303],"]",")",")",["T_WHITESPACE"," ",303],"{",["T_WHITESPACE","\n                    ",303],["T_VARIABLE","$resultAttrs",304],"[",["T_VARIABLE","$attrCode",304],"]",["T_WHITESPACE"," ",304],"=",["T_WHITESPACE","\n                        ",304],"(",["T_CONSTANT_ENCAPSED_STRING","'select'",305],["T_WHITESPACE"," ",305],["T_IS_EQUAL","==",305],["T_WHITESPACE"," ",305],["T_VARIABLE","$attrParams",305],"[",["T_CONSTANT_ENCAPSED_STRING","'type'",305],"]",["T_WHITESPACE"," ",305],["T_BOOLEAN_OR","||",305],["T_WHITESPACE"," ",305],["T_CONSTANT_ENCAPSED_STRING","'multiselect'",305],["T_WHITESPACE"," ",305],["T_IS_EQUAL","==",305],["T_WHITESPACE"," ",305],["T_VARIABLE","$attrParams",305],"[",["T_CONSTANT_ENCAPSED_STRING","'type'",305],"]",")",["T_WHITESPACE","\n                        ",305],"?",["T_WHITESPACE"," ",306],["T_VARIABLE","$attrParams",306],"[",["T_CONSTANT_ENCAPSED_STRING","'options'",306],"]","[",["T_STRING","strtolower",306],"(",["T_VARIABLE","$rowData",306],"[",["T_VARIABLE","$attrCode",306],"]",")","]",["T_WHITESPACE","\n                        ",306],":",["T_WHITESPACE"," ",307],["T_VARIABLE","$rowData",307],"[",["T_VARIABLE","$attrCode",307],"]",";",["T_WHITESPACE","\n                ",307],"}",["T_WHITESPACE"," ",308],["T_ELSEIF","elseif",308],["T_WHITESPACE"," ",308],"(",["T_VARIABLE","$withDefaultValue",308],["T_WHITESPACE"," ",308],["T_BOOLEAN_AND","&&",308],["T_WHITESPACE"," ",308],["T_STRING","null",308],["T_WHITESPACE"," ",308],["T_IS_NOT_IDENTICAL","!==",308],["T_WHITESPACE"," ",308],["T_VARIABLE","$attrParams",308],"[",["T_CONSTANT_ENCAPSED_STRING","'default_value'",308],"]",")",["T_WHITESPACE"," ",308],"{",["T_WHITESPACE","\n                    ",308],["T_VARIABLE","$resultAttrs",309],"[",["T_VARIABLE","$attrCode",309],"]",["T_WHITESPACE"," ",309],"=",["T_WHITESPACE"," ",309],["T_VARIABLE","$attrParams",309],"[",["T_CONSTANT_ENCAPSED_STRING","'default_value'",309],"]",";",["T_WHITESPACE","\n                ",309],"}",["T_WHITESPACE","\n            ",310],"}",["T_WHITESPACE","\n        ",311],"}",["T_WHITESPACE","\n        ",312],["T_RETURN","return",313],["T_WHITESPACE"," ",313],["T_VARIABLE","$resultAttrs",313],";",["T_WHITESPACE","\n    ",313],"}",["T_WHITESPACE","\n\n    ",314],["T_DOC_COMMENT","\/**\n     * Save product type specific data.\n     *\n     * @return Mage_ImportExport_Model_Import_Entity_Product_Type_Abstract\n     *\/",316],["T_WHITESPACE","\n    ",320],["T_PUBLIC","public",321],["T_WHITESPACE"," ",321],["T_FUNCTION","function",321],["T_WHITESPACE"," ",321],["T_STRING","saveData",321],"(",")",["T_WHITESPACE","\n    ",321],"{",["T_WHITESPACE","\n        ",322],["T_RETURN","return",323],["T_WHITESPACE"," ",323],["T_VARIABLE","$this",323],";",["T_WHITESPACE","\n    ",323],"}",["T_WHITESPACE","\n",324],"}",["T_WHITESPACE","\n",325]]
[["T_OPEN_TAG","<?php\n",1],["T_DOC_COMMENT","\/**\n * Magento\n *\n * NOTICE OF LICENSE\n *\n * This source file is subject to the Open Software License (OSL 3.0)\n * that is bundled with this package in the file LICENSE.txt.\n * It is also available through the world-wide-web at this URL:\n * http:\/\/opensource.org\/licenses\/osl-3.0.php\n * If you did not receive a copy of the license and are unable to\n * obtain it through the world-wide-web, please send an email\n * to license@magento.com so we can send you a copy immediately.\n *\n * DISCLAIMER\n *\n * Do not edit or add to this file if you wish to upgrade Magento to newer\n * versions in the future. If you wish to customize Magento for your\n * needs please refer to http:\/\/www.magento.com for more information.\n *\n * @category    Mage\n * @package     Mage_ImportExport\n * @copyright  Copyright (c) 2006-2016 X.commerce, Inc. and affiliates (http:\/\/www.magento.com)\n * @license    http:\/\/opensource.org\/licenses\/osl-3.0.php  Open Software License (OSL 3.0)\n *\/",2],["T_WHITESPACE","\n\n",25],["T_DOC_COMMENT","\/**\n * Import entity customer address\n *\n * @category    Mage\n * @package     Mage_ImportExport\n * @author      Magento Core Team <core@magentocommerce.com>\n *\/",27],["T_WHITESPACE","\n",33],["T_CLASS","class",34],["T_WHITESPACE"," ",34],["T_STRING","Mage_ImportExport_Model_Import_Entity_Customer_Address",34],["T_WHITESPACE"," ",34],["T_EXTENDS","extends",34],["T_WHITESPACE"," ",34],["T_STRING","Mage_ImportExport_Model_Import_Entity_Abstract",34],["T_WHITESPACE","\n",34],"{",["T_WHITESPACE","\n    ",35],["T_DOC_COMMENT","\/**\n     * Prefix for source file column name, which displays that column contains address data.\n     *\/",36],["T_WHITESPACE","\n    ",38],["T_CONST","const",39],["T_WHITESPACE"," ",39],["T_STRING","COL_NAME_PREFIX",39],["T_WHITESPACE"," ",39],"=",["T_WHITESPACE"," ",39],["T_CONSTANT_ENCAPSED_STRING","'_address_'",39],";",["T_WHITESPACE","\n\n    ",39],["T_DOC_COMMENT","\/**\n     * Particular columns that contains of customer default addresses.\n     *\/",41],["T_WHITESPACE","\n    ",43],["T_CONST","const",44],["T_WHITESPACE"," ",44],["T_STRING","COL_NAME_DEFAULT_BILLING",44],["T_WHITESPACE","  ",44],"=",["T_WHITESPACE"," ",44],["T_CONSTANT_ENCAPSED_STRING","'_address_default_billing_'",44],";",["T_WHITESPACE","\n    ",44],["T_CONST","const",45],["T_WHITESPACE"," ",45],["T_STRING","COL_NAME_DEFAULT_SHIPPING",45],["T_WHITESPACE"," ",45],"=",["T_WHITESPACE"," ",45],["T_CONSTANT_ENCAPSED_STRING","'_address_default_shipping_'",45],";",["T_WHITESPACE","\n\n    ",45],["T_DOC_COMMENT","\/**\n     * Error codes.\n     *\/",47],["T_WHITESPACE","\n    ",49],["T_CONST","const",50],["T_WHITESPACE"," ",50],["T_STRING","ERROR_INVALID_REGION",50],["T_WHITESPACE"," ",50],"=",["T_WHITESPACE"," ",50],["T_CONSTANT_ENCAPSED_STRING","'invalidRegion'",50],";",["T_WHITESPACE","\n\n    ",50],["T_DOC_COMMENT","\/**\n     * Customer address attributes parameters.\n     *\n     *  [attr_code_1] => array(\n     *      'options' => array(),\n     *      'type' => 'text', 'price', 'textarea', 'select', etc.\n     *      'id' => ..\n     *  ),\n     *  ...\n     *\n     * @var array\n     *\/",52],["T_WHITESPACE","\n    ",63],["T_PROTECTED","protected",64],["T_WHITESPACE"," ",64],["T_VARIABLE","$_attributes",64],["T_WHITESPACE"," ",64],"=",["T_WHITESPACE"," ",64],["T_ARRAY","array",64],"(",")",";",["T_WHITESPACE","\n\n    ",64],["T_DOC_COMMENT","\/**\n     * Countrys and its regions.\n     *\n     * array(\n     *   [country_id_lowercased_1] => array(\n     *     [region_code_lowercased_1]         => region_id_1,\n     *     [region_default_name_lowercased_1] => region_id_1,\n     *     ...,\n     *     [region_code_lowercased_n]         => region_id_n,\n     *     [region_default_name_lowercased_n] => region_id_n\n     *   ),\n     *   ...\n     * )\n     *\n     * @var array\n     *\/",66],["T_WHITESPACE","\n    ",81],["T_PROTECTED","protected",82],["T_WHITESPACE"," ",82],["T_VARIABLE","$_countryRegions",82],["T_WHITESPACE"," ",82],"=",["T_WHITESPACE"," ",82],["T_ARRAY","array",82],"(",")",";",["T_WHITESPACE","\n\n    ",82],["T_DOC_COMMENT","\/**\n     * Customer import entity.\n     *\n     * @var Mage_ImportExport_Model_Import_Entity_Customer\n     *\/",84],["T_WHITESPACE","\n    ",88],["T_PROTECTED","protected",89],["T_WHITESPACE"," ",89],["T_VARIABLE","$_customer",89],";",["T_WHITESPACE","\n\n    ",89],["T_DOC_COMMENT","\/**\n     * Default addresses column names to appropriate customer attribute code.\n     *\n     * @var array\n     *\/",91],["T_WHITESPACE","\n    ",95],["T_PROTECTED","protected",96],["T_WHITESPACE"," ",96],["T_STATIC","static",96],["T_WHITESPACE"," ",96],["T_VARIABLE","$_defaultAddressAttrMapping",96],["T_WHITESPACE"," ",96],"=",["T_WHITESPACE"," ",96],["T_ARRAY","array",96],"(",["T_WHITESPACE","\n        ",96],["T_STRING","self",97],["T_DOUBLE_COLON","::",97],["T_STRING","COL_NAME_DEFAULT_BILLING",97],["T_WHITESPACE","  ",97],["T_DOUBLE_ARROW","=>",97],["T_WHITESPACE"," ",97],["T_CONSTANT_ENCAPSED_STRING","'default_billing'",97],",",["T_WHITESPACE","\n        ",97],["T_STRING","self",98],["T_DOUBLE_COLON","::",98],["T_STRING","COL_NAME_DEFAULT_SHIPPING",98],["T_WHITESPACE"," ",98],["T_DOUBLE_ARROW","=>",98],["T_WHITESPACE"," ",98],["T_CONSTANT_ENCAPSED_STRING","'default_shipping'",98],["T_WHITESPACE","\n    ",98],")",";",["T_WHITESPACE","\n\n    ",99],["T_DOC_COMMENT","\/**\n     * Customer entity DB table name.\n     *\n     * @var string\n     *\/",101],["T_WHITESPACE","\n    ",105],["T_PROTECTED","protected",106],["T_WHITESPACE"," ",106],["T_VARIABLE","$_entityTable",106],";",["T_WHITESPACE","\n\n    ",106],["T_DOC_COMMENT","\/**\n     * Attributes with index (not label) value.\n     *\n     * @var array\n     *\/",108],["T_WHITESPACE","\n    ",112],["T_PROTECTED","protected",113],["T_WHITESPACE"," ",113],["T_VARIABLE","$_indexValueAttributes",113],["T_WHITESPACE"," ",113],"=",["T_WHITESPACE"," ",113],["T_ARRAY","array",113],"(",["T_CONSTANT_ENCAPSED_STRING","'country_id'",113],")",";",["T_WHITESPACE","\n\n    ",113],["T_DOC_COMMENT","\/**\n     * Validation failure message template definitions\n     *\n     * @var array\n     *\/",115],["T_WHITESPACE","\n    ",119],["T_PROTECTED","protected",120],["T_WHITESPACE"," ",120],["T_VARIABLE","$_messageTemplates",120],["T_WHITESPACE"," ",120],"=",["T_WHITESPACE"," ",120],["T_ARRAY","array",120],"(",["T_STRING","self",120],["T_DOUBLE_COLON","::",120],["T_STRING","ERROR_INVALID_REGION",120],["T_WHITESPACE"," ",120],["T_DOUBLE_ARROW","=>",120],["T_WHITESPACE"," ",120],["T_CONSTANT_ENCAPSED_STRING","'Region is invalid'",120],")",";",["T_WHITESPACE","\n\n    ",120],["T_DOC_COMMENT","\/**\n     * Column names that holds values with particular meaning.\n     *\n     * @var array\n     *\/",122],["T_WHITESPACE","\n    ",126],["T_PROTECTED","protected",127],["T_WHITESPACE"," ",127],["T_VARIABLE","$_particularAttributes",127],["T_WHITESPACE"," ",127],"=",["T_WHITESPACE"," ",127],["T_ARRAY","array",127],"(",["T_STRING","self",127],["T_DOUBLE_COLON","::",127],["T_STRING","COL_NAME_DEFAULT_BILLING",127],",",["T_WHITESPACE"," ",127],["T_STRING","self",127],["T_DOUBLE_COLON","::",127],["T_STRING","COL_NAME_DEFAULT_SHIPPING",127],")",";",["T_WHITESPACE","\n\n    ",127],["T_DOC_COMMENT","\/**\n     * Region ID to region default name pairs.\n     *\n     * @var array\n     *\/",129],["T_WHITESPACE","\n    ",133],["T_PROTECTED","protected",134],["T_WHITESPACE"," ",134],["T_VARIABLE","$_regions",134],["T_WHITESPACE"," ",134],"=",["T_WHITESPACE"," ",134],["T_ARRAY","array",134],"(",")",";",["T_WHITESPACE","\n\n    ",134],["T_DOC_COMMENT","\/**\n     * Constructor.\n     *\n     * @param Mage_ImportExport_Model_Import_Entity_Customer $customer\n     * @return void\n     *\/",136],["T_WHITESPACE","\n    ",141],["T_PUBLIC","public",142],["T_WHITESPACE"," ",142],["T_FUNCTION","function",142],["T_WHITESPACE"," ",142],["T_STRING","__construct",142],"(",["T_STRING","Mage_ImportExport_Model_Import_Entity_Customer",142],["T_WHITESPACE"," ",142],["T_VARIABLE","$customer",142],")",["T_WHITESPACE","\n    ",142],"{",["T_WHITESPACE","\n        ",143],["T_STRING","parent",144],["T_DOUBLE_COLON","::",144],["T_STRING","__construct",144],"(",")",";",["T_WHITESPACE","\n\n        ",144],["T_VARIABLE","$this",146],["T_OBJECT_OPERATOR","->",146],["T_STRING","_initAttributes",146],"(",")",["T_OBJECT_OPERATOR","->",146],["T_STRING","_initCountryRegions",146],"(",")",";",["T_WHITESPACE","\n\n        ",146],["T_VARIABLE","$this",148],["T_OBJECT_OPERATOR","->",148],["T_STRING","_entityTable",148],["T_WHITESPACE"," ",148],"=",["T_WHITESPACE"," ",148],["T_STRING","Mage",148],["T_DOUBLE_COLON","::",148],["T_STRING","getModel",148],"(",["T_CONSTANT_ENCAPSED_STRING","'customer\/address'",148],")",["T_OBJECT_OPERATOR","->",148],["T_STRING","getResource",148],"(",")",["T_OBJECT_OPERATOR","->",148],["T_STRING","getEntityTable",148],"(",")",";",["T_WHITESPACE","\n        ",148],["T_VARIABLE","$this",149],["T_OBJECT_OPERATOR","->",149],["T_STRING","_customer",149],["T_WHITESPACE","    ",149],"=",["T_WHITESPACE"," ",149],["T_VARIABLE","$customer",149],";",["T_WHITESPACE","\n\n        ",149],["T_FOREACH","foreach",151],["T_WHITESPACE"," ",151],"(",["T_VARIABLE","$this",151],["T_OBJECT_OPERATOR","->",151],["T_STRING","_messageTemplates",151],["T_WHITESPACE"," ",151],["T_AS","as",151],["T_WHITESPACE"," ",151],["T_VARIABLE","$errorCode",151],["T_WHITESPACE"," ",151],["T_DOUBLE_ARROW","=>",151],["T_WHITESPACE"," ",151],["T_VARIABLE","$message",151],")",["T_WHITESPACE"," ",151],"{",["T_WHITESPACE","\n            ",151],["T_VARIABLE","$this",152],["T_OBJECT_OPERATOR","->",152],["T_STRING","_customer",152],["T_OBJECT_OPERATOR","->",152],["T_STRING","addMessageTemplate",152],"(",["T_VARIABLE","$errorCode",152],",",["T_WHITESPACE"," ",152],["T_VARIABLE","$message",152],")",";",["T_WHITESPACE","\n        ",152],"}",["T_WHITESPACE","\n    ",153],"}",["T_WHITESPACE","\n\n    ",154],["T_DOC_COMMENT","\/**\n     * Import data rows.\n     *\n     * @return boolean\n     *\/",156],["T_WHITESPACE","\n    ",160],["T_PROTECTED","protected",161],["T_WHITESPACE"," ",161],["T_FUNCTION","function",161],["T_WHITESPACE"," ",161],["T_STRING","_importData",161],"(",")",["T_WHITESPACE","\n    ",161],"{",["T_WHITESPACE","\n        ",162],["T_DOC_COMMENT","\/** @var $customer Mage_Customer_Model_Customer *\/",163],["T_WHITESPACE","\n        ",163],["T_VARIABLE","$customer",164],["T_WHITESPACE","       ",164],"=",["T_WHITESPACE"," ",164],["T_STRING","Mage",164],["T_DOUBLE_COLON","::",164],["T_STRING","getModel",164],"(",["T_CONSTANT_ENCAPSED_STRING","'customer\/customer'",164],")",";",["T_WHITESPACE","\n        ",164],["T_DOC_COMMENT","\/** @var $resource Mage_Customer_Model_Address *\/",165],["T_WHITESPACE","\n        ",165],["T_VARIABLE","$resource",166],["T_WHITESPACE","       ",166],"=",["T_WHITESPACE"," ",166],["T_STRING","Mage",166],["T_DOUBLE_COLON","::",166],["T_STRING","getModel",166],"(",["T_CONSTANT_ENCAPSED_STRING","'customer\/address'",166],")",";",["T_WHITESPACE","\n        ",166],["T_VARIABLE","$strftimeFormat",167],["T_WHITESPACE"," ",167],"=",["T_WHITESPACE"," ",167],["T_STRING","Varien_Date",167],["T_DOUBLE_COLON","::",167],["T_STRING","convertZendToStrftime",167],"(",["T_STRING","Varien_Date",167],["T_DOUBLE_COLON","::",167],["T_STRING","DATETIME_INTERNAL_FORMAT",167],",",["T_WHITESPACE"," ",167],["T_STRING","true",167],",",["T_WHITESPACE"," ",167],["T_STRING","true",167],")",";",["T_WHITESPACE","\n        ",167],["T_VARIABLE","$table",168],["T_WHITESPACE","          ",168],"=",["T_WHITESPACE"," ",168],["T_VARIABLE","$resource",168],["T_OBJECT_OPERATOR","->",168],["T_STRING","getResource",168],"(",")",["T_OBJECT_OPERATOR","->",168],["T_STRING","getEntityTable",168],"(",")",";",["T_WHITESPACE","\n        ",168],["T_VARIABLE","$nextEntityId",169],["T_WHITESPACE","   ",169],"=",["T_WHITESPACE"," ",169],["T_STRING","Mage",169],["T_DOUBLE_COLON","::",169],["T_STRING","getResourceHelper",169],"(",["T_CONSTANT_ENCAPSED_STRING","'importexport'",169],")",["T_OBJECT_OPERATOR","->",169],["T_STRING","getNextAutoincrement",169],"(",["T_VARIABLE","$table",169],")",";",["T_WHITESPACE","\n        ",169],["T_VARIABLE","$customerId",170],["T_WHITESPACE","     ",170],"=",["T_WHITESPACE"," ",170],["T_STRING","null",170],";",["T_WHITESPACE","\n        ",170],["T_VARIABLE","$regionColName",171],["T_WHITESPACE","  ",171],"=",["T_WHITESPACE"," ",171],["T_STRING","self",171],["T_DOUBLE_COLON","::",171],["T_STRING","getColNameForAttrCode",171],"(",["T_CONSTANT_ENCAPSED_STRING","'region'",171],")",";",["T_WHITESPACE","\n        ",171],["T_VARIABLE","$countryColName",172],["T_WHITESPACE"," ",172],"=",["T_WHITESPACE"," ",172],["T_STRING","self",172],["T_DOUBLE_COLON","::",172],["T_STRING","getColNameForAttrCode",172],"(",["T_CONSTANT_ENCAPSED_STRING","'country_id'",172],")",";",["T_WHITESPACE","\n        ",172],["T_DOC_COMMENT","\/** @var $regionIdAttr Mage_Customer_Model_Attribute *\/",173],["T_WHITESPACE","\n        ",173],["T_VARIABLE","$regionIdAttr",174],["T_WHITESPACE","   ",174],"=",["T_WHITESPACE"," ",174],["T_STRING","Mage",174],["T_DOUBLE_COLON","::",174],["T_STRING","getSingleton",174],"(",["T_CONSTANT_ENCAPSED_STRING","'eav\/config'",174],")",["T_OBJECT_OPERATOR","->",174],["T_STRING","getAttribute",174],"(",["T_VARIABLE","$this",174],["T_OBJECT_OPERATOR","->",174],["T_STRING","getEntityTypeCode",174],"(",")",",",["T_WHITESPACE"," ",174],["T_CONSTANT_ENCAPSED_STRING","'region_id'",174],")",";",["T_WHITESPACE","\n        ",174],["T_VARIABLE","$regionIdTable",175],["T_WHITESPACE","  ",175],"=",["T_WHITESPACE"," ",175],["T_VARIABLE","$regionIdAttr",175],["T_OBJECT_OPERATOR","->",175],["T_STRING","getBackend",175],"(",")",["T_OBJECT_OPERATOR","->",175],["T_STRING","getTable",175],"(",")",";",["T_WHITESPACE","\n        ",175],["T_VARIABLE","$regionIdAttrId",176],["T_WHITESPACE"," ",176],"=",["T_WHITESPACE"," ",176],["T_VARIABLE","$regionIdAttr",176],["T_OBJECT_OPERATOR","->",176],["T_STRING","getId",176],"(",")",";",["T_WHITESPACE","\n        ",176],["T_VARIABLE","$isAppendMode",177],["T_WHITESPACE","   ",177],"=",["T_WHITESPACE"," ",177],["T_STRING","Mage_ImportExport_Model_Import",177],["T_DOUBLE_COLON","::",177],["T_STRING","BEHAVIOR_APPEND",177],["T_WHITESPACE"," ",177],["T_IS_EQUAL","==",177],["T_WHITESPACE"," ",177],["T_VARIABLE","$this",177],["T_OBJECT_OPERATOR","->",177],["T_STRING","_customer",177],["T_OBJECT_OPERATOR","->",177],["T_STRING","getBehavior",177],"(",")",";",["T_WHITESPACE","\n        ",177],["T_VARIABLE","$multiSelect",178],["T_WHITESPACE","    ",178],"=",["T_WHITESPACE"," ",178],["T_ARRAY","array",178],"(",")",";",["T_WHITESPACE","\n\n        ",178],["T_WHILE","while",180],["T_WHITESPACE"," ",180],"(",["T_VARIABLE","$bunch",180],["T_WHITESPACE"," ",180],"=",["T_WHITESPACE"," ",180],["T_VARIABLE","$this",180],["T_OBJECT_OPERATOR","->",180],["T_STRING","_dataSourceModel",180],["T_OBJECT_OPERATOR","->",180],["T_STRING","getNextBunch",180],"(",")",")",["T_WHITESPACE"," ",180],"{",["T_WHITESPACE","\n            ",180],["T_VARIABLE","$entityRows",181],["T_WHITESPACE"," ",181],"=",["T_WHITESPACE"," ",181],["T_ARRAY","array",181],"(",")",";",["T_WHITESPACE","\n            ",181],["T_VARIABLE","$attributes",182],["T_WHITESPACE"," ",182],"=",["T_WHITESPACE"," ",182],["T_ARRAY","array",182],"(",")",";",["T_WHITESPACE","\n            ",182],["T_VARIABLE","$defaults",183],["T_WHITESPACE","   ",183],"=",["T_WHITESPACE"," ",183],["T_ARRAY","array",183],"(",")",";",["T_WHITESPACE"," ",183],["T_COMMENT","\/\/ customer default addresses (billing\/shipping) data\n",183],["T_WHITESPACE","\n            ",184],["T_FOREACH","foreach",185],["T_WHITESPACE"," ",185],"(",["T_VARIABLE","$bunch",185],["T_WHITESPACE"," ",185],["T_AS","as",185],["T_WHITESPACE"," ",185],["T_VARIABLE","$rowNum",185],["T_WHITESPACE"," ",185],["T_DOUBLE_ARROW","=>",185],["T_WHITESPACE"," ",185],["T_VARIABLE","$rowData",185],")",["T_WHITESPACE"," ",185],"{",["T_WHITESPACE","\n                ",185],["T_VARIABLE","$rowScope",186],["T_WHITESPACE"," ",186],"=",["T_WHITESPACE"," ",186],["T_VARIABLE","$this",186],["T_OBJECT_OPERATOR","->",186],["T_STRING","_getRowScope",186],"(",["T_VARIABLE","$rowData",186],")",";",["T_WHITESPACE","\n                ",186],["T_IF","if",187],["T_WHITESPACE"," ",187],"(",["T_VARIABLE","$rowScope",187],["T_WHITESPACE"," ",187],["T_IS_EQUAL","==",187],["T_WHITESPACE"," ",187],["T_STRING","Mage_ImportExport_Model_Import_Entity_Customer",187],["T_DOUBLE_COLON","::",187],["T_STRING","SCOPE_DEFAULT",187],")",["T_WHITESPACE"," ",187],"{",["T_WHITESPACE","\n                    ",187],["T_VARIABLE","$customerId",188],["T_WHITESPACE"," ",188],"=",["T_WHITESPACE"," ",188],["T_VARIABLE","$this",188],["T_OBJECT_OPERATOR","->",188],["T_STRING","_customer",188],["T_OBJECT_OPERATOR","->",188],["T_STRING","getCustomerId",188],"(",["T_WHITESPACE","\n                        ",188],["T_VARIABLE","$rowData",189],"[",["T_STRING","Mage_ImportExport_Model_Import_Entity_Customer",189],["T_DOUBLE_COLON","::",189],["T_STRING","COL_EMAIL",189],"]",",",["T_WHITESPACE","\n                        ",189],["T_VARIABLE","$rowData",190],"[",["T_STRING","Mage_ImportExport_Model_Import_Entity_Customer",190],["T_DOUBLE_COLON","::",190],["T_STRING","COL_WEBSITE",190],"]",["T_WHITESPACE","\n                    ",190],")",";",["T_WHITESPACE","\n                ",191],"}",["T_WHITESPACE","\n                ",192],["T_IF","if",193],["T_WHITESPACE"," ",193],"(",["T_VARIABLE","$rowScope",193],["T_WHITESPACE"," ",193],["T_IS_NOT_EQUAL","!=",193],["T_WHITESPACE"," ",193],["T_STRING","Mage_ImportExport_Model_Import_Entity_Customer",193],["T_DOUBLE_COLON","::",193],["T_STRING","SCOPE_OPTIONS",193],")",["T_WHITESPACE"," ",193],"{",["T_WHITESPACE","\n                    ",193],["T_VARIABLE","$multiSelect",194],["T_WHITESPACE"," ",194],"=",["T_WHITESPACE"," ",194],["T_ARRAY","array",194],"(",")",";",["T_WHITESPACE","\n                ",194],"}",["T_WHITESPACE","\n                ",195],["T_IF","if",196],["T_WHITESPACE"," ",196],"(","!",["T_VARIABLE","$customerId",196],")",["T_WHITESPACE"," ",196],"{",["T_WHITESPACE","\n                    ",196],["T_CONTINUE","continue",197],";",["T_WHITESPACE","\n                ",197],"}",["T_WHITESPACE","\n\n                ",198],["T_DOC_COMMENT","\/** @var $addressCollection Mage_Customer_Model_Resource_Address_Collection *\/",200],["T_WHITESPACE","\n                ",200],["T_VARIABLE","$addressCollection",201],["T_WHITESPACE"," ",201],"=",["T_WHITESPACE"," ",201],["T_STRING","Mage",201],["T_DOUBLE_COLON","::",201],["T_STRING","getResourceModel",201],"(",["T_CONSTANT_ENCAPSED_STRING","'customer\/address_collection'",201],")",";",["T_WHITESPACE","\n                ",201],["T_VARIABLE","$addressCollection",202],["T_OBJECT_OPERATOR","->",202],["T_STRING","addAttributeToFilter",202],"(",["T_CONSTANT_ENCAPSED_STRING","'parent_id'",202],",",["T_WHITESPACE"," ",202],["T_VARIABLE","$customerId",202],")",";",["T_WHITESPACE","\n\n                ",202],["T_VARIABLE","$addressAttributes",204],["T_WHITESPACE"," ",204],"=",["T_WHITESPACE"," ",204],["T_ARRAY","array",204],"(",")",";",["T_WHITESPACE","\n                ",204],["T_FOREACH","foreach",205],["T_WHITESPACE"," ",205],"(",["T_VARIABLE","$this",205],["T_OBJECT_OPERATOR","->",205],["T_STRING","_attributes",205],["T_WHITESPACE"," ",205],["T_AS","as",205],["T_WHITESPACE"," ",205],["T_VARIABLE","$attrAlias",205],["T_WHITESPACE"," ",205],["T_DOUBLE_ARROW","=>",205],["T_WHITESPACE"," ",205],["T_VARIABLE","$attrParams",205],")",["T_WHITESPACE"," ",205],"{",["T_WHITESPACE","\n                    ",205],["T_IF","if",206],["T_WHITESPACE"," ",206],"(",["T_ISSET","isset",206],"(",["T_VARIABLE","$rowData",206],"[",["T_VARIABLE","$attrAlias",206],"]",")",["T_WHITESPACE"," ",206],["T_BOOLEAN_AND","&&",206],["T_WHITESPACE"," ",206],["T_STRING","strlen",206],"(",["T_VARIABLE","$rowData",206],"[",["T_VARIABLE","$attrAlias",206],"]",")",")",["T_WHITESPACE"," ",206],"{",["T_WHITESPACE","\n                        ",206],["T_IF","if",207],["T_WHITESPACE"," ",207],"(",["T_CONSTANT_ENCAPSED_STRING","'select'",207],["T_WHITESPACE"," ",207],["T_IS_EQUAL","==",207],["T_WHITESPACE"," ",207],["T_VARIABLE","$attrParams",207],"[",["T_CONSTANT_ENCAPSED_STRING","'type'",207],"]",")",["T_WHITESPACE"," ",207],"{",["T_WHITESPACE","\n                            ",207],["T_VARIABLE","$value",208],["T_WHITESPACE"," ",208],"=",["T_WHITESPACE"," ",208],["T_VARIABLE","$attrParams",208],"[",["T_CONSTANT_ENCAPSED_STRING","'options'",208],"]","[",["T_STRING","strtolower",208],"(",["T_VARIABLE","$rowData",208],"[",["T_VARIABLE","$attrAlias",208],"]",")","]",";",["T_WHITESPACE","\n                        ",208],"}",["T_WHITESPACE"," ",209],["T_ELSEIF","elseif",209],["T_WHITESPACE"," ",209],"(",["T_CONSTANT_ENCAPSED_STRING","'datetime'",209],["T_WHITESPACE"," ",209],["T_IS_EQUAL","==",209],["T_WHITESPACE"," ",209],["T_VARIABLE","$attrParams",209],"[",["T_CONSTANT_ENCAPSED_STRING","'type'",209],"]",")",["T_WHITESPACE"," ",209],"{",["T_WHITESPACE","\n                            ",209],["T_VARIABLE","$value",210],["T_WHITESPACE"," ",210],"=",["T_WHITESPACE"," ",210],["T_STRING","gmstrftime",210],"(",["T_VARIABLE","$strftimeFormat",210],",",["T_WHITESPACE"," ",210],["T_STRING","strtotime",210],"(",["T_VARIABLE","$rowData",210],"[",["T_VARIABLE","$attrAlias",210],"]",")",")",";",["T_WHITESPACE","\n                        ",210],"}",["T_WHITESPACE"," ",211],["T_ELSEIF","elseif",211],["T_WHITESPACE"," ",211],"(",["T_CONSTANT_ENCAPSED_STRING","'multiselect'",211],["T_WHITESPACE"," ",211],["T_IS_EQUAL","==",211],["T_WHITESPACE"," ",211],["T_VARIABLE","$attrParams",211],"[",["T_CONSTANT_ENCAPSED_STRING","'type'",211],"]",")",["T_WHITESPACE"," ",211],"{",["T_WHITESPACE","\n                            ",211],["T_VARIABLE","$value",212],["T_WHITESPACE"," ",212],"=",["T_WHITESPACE"," ",212],["T_VARIABLE","$attrParams",212],"[",["T_CONSTANT_ENCAPSED_STRING","'options'",212],"]","[",["T_STRING","strtolower",212],"(",["T_VARIABLE","$rowData",212],"[",["T_VARIABLE","$attrAlias",212],"]",")","]",";",["T_WHITESPACE","\n                            ",212],["T_VARIABLE","$multiSelect",213],"[",["T_VARIABLE","$attrParams",213],"[",["T_CONSTANT_ENCAPSED_STRING","'id'",213],"]","]","[","]",["T_WHITESPACE"," ",213],"=",["T_WHITESPACE"," ",213],["T_VARIABLE","$value",213],";",["T_WHITESPACE","\n                        ",213],"}",["T_WHITESPACE"," ",214],["T_ELSE","else",214],["T_WHITESPACE"," ",214],"{",["T_WHITESPACE","\n                            ",214],["T_VARIABLE","$value",215],["T_WHITESPACE"," ",215],"=",["T_WHITESPACE"," ",215],["T_VARIABLE","$rowData",215],"[",["T_VARIABLE","$attrAlias",215],"]",";",["T_WHITESPACE","\n                        ",215],"}",["T_WHITESPACE","\n                        ",216],["T_VARIABLE","$addressAttributes",217],"[",["T_VARIABLE","$attrParams",217],"[",["T_CONSTANT_ENCAPSED_STRING","'id'",217],"]","]",["T_WHITESPACE"," ",217],"=",["T_WHITESPACE"," ",217],["T_VARIABLE","$value",217],";",["T_WHITESPACE","\n                        ",217],["T_VARIABLE","$addressCollection",218],["T_OBJECT_OPERATOR","->",218],["T_STRING","addAttributeToFilter",218],"(",["T_VARIABLE","$attrParams",218],"[",["T_CONSTANT_ENCAPSED_STRING","'code'",218],"]",",",["T_WHITESPACE"," ",218],["T_VARIABLE","$value",218],")",";",["T_WHITESPACE","\n                    ",218],"}",["T_WHITESPACE","\n                ",219],"}",["T_WHITESPACE","\n\n                ",220],["T_COMMENT","\/\/ skip duplicate address\n",222],["T_WHITESPACE","                ",223],["T_IF","if",223],["T_WHITESPACE"," ",223],"(",["T_VARIABLE","$isAppendMode",223],["T_WHITESPACE"," ",223],["T_BOOLEAN_AND","&&",223],["T_WHITESPACE"," ",223],["T_VARIABLE","$addressCollection",223],["T_OBJECT_OPERATOR","->",223],["T_STRING","getSize",223],"(",")",")",["T_WHITESPACE"," ",223],"{",["T_WHITESPACE","\n                    ",223],["T_CONTINUE","continue",224],";",["T_WHITESPACE","\n                ",224],"}",["T_WHITESPACE","\n\n                ",225],["T_VARIABLE","$entityId",227],["T_WHITESPACE"," ",227],"=",["T_WHITESPACE"," ",227],["T_VARIABLE","$nextEntityId",227],["T_INC","++",227],";",["T_WHITESPACE","\n\n                ",227],["T_IF","if",229],["T_WHITESPACE"," ",229],"(",["T_VARIABLE","$rowScope",229],["T_WHITESPACE"," ",229],["T_IS_EQUAL","==",229],["T_WHITESPACE"," ",229],["T_STRING","Mage_ImportExport_Model_Import_Entity_Customer",229],["T_DOUBLE_COLON","::",229],["T_STRING","SCOPE_DEFAULT",229],["T_WHITESPACE","\n                    ",229],["T_BOOLEAN_OR","||",230],["T_WHITESPACE"," ",230],["T_VARIABLE","$rowScope",230],["T_WHITESPACE"," ",230],["T_IS_EQUAL","==",230],["T_WHITESPACE"," ",230],["T_STRING","Mage_ImportExport_Model_Import_Entity_Customer",230],["T_DOUBLE_COLON","::",230],["T_STRING","SCOPE_ADDRESS",230],["T_WHITESPACE","\n                ",230],")",["T_WHITESPACE"," ",231],"{",["T_WHITESPACE","\n                    ",231],["T_COMMENT","\/\/ entity table data\n",232],["T_WHITESPACE","                    ",233],["T_VARIABLE","$entityRows",233],"[","]",["T_WHITESPACE"," ",233],"=",["T_WHITESPACE"," ",233],["T_ARRAY","array",233],"(",["T_WHITESPACE","\n                        ",233],["T_CONSTANT_ENCAPSED_STRING","'entity_id'",234],["T_WHITESPACE","      ",234],["T_DOUBLE_ARROW","=>",234],["T_WHITESPACE"," ",234],["T_VARIABLE","$entityId",234],",",["T_WHITESPACE","\n                        ",234],["T_CONSTANT_ENCAPSED_STRING","'entity_type_id'",235],["T_WHITESPACE"," ",235],["T_DOUBLE_ARROW","=>",235],["T_WHITESPACE"," ",235],["T_VARIABLE","$this",235],["T_OBJECT_OPERATOR","->",235],["T_STRING","_entityTypeId",235],",",["T_WHITESPACE","\n                        ",235],["T_CONSTANT_ENCAPSED_STRING","'parent_id'",236],["T_WHITESPACE","      ",236],["T_DOUBLE_ARROW","=>",236],["T_WHITESPACE"," ",236],["T_VARIABLE","$customerId",236],",",["T_WHITESPACE","\n                        ",236],["T_CONSTANT_ENCAPSED_STRING","'created_at'",237],["T_WHITESPACE","     ",237],["T_DOUBLE_ARROW","=>",237],["T_WHITESPACE"," ",237],["T_STRING","now",237],"(",")",",",["T_WHITESPACE","\n                        ",237],["T_CONSTANT_ENCAPSED_STRING","'updated_at'",238],["T_WHITESPACE","     ",238],["T_DOUBLE_ARROW","=>",238],["T_WHITESPACE"," ",238],["T_STRING","now",238],"(",")",["T_WHITESPACE","\n                    ",238],")",";",["T_WHITESPACE","\n                    ",239],["T_COMMENT","\/\/ attribute values\n",240],["T_WHITESPACE","                    ",241],["T_FOREACH","foreach",241],["T_WHITESPACE"," ",241],"(",["T_VARIABLE","$this",241],["T_OBJECT_OPERATOR","->",241],["T_STRING","_attributes",241],["T_WHITESPACE"," ",241],["T_AS","as",241],["T_WHITESPACE"," ",241],["T_VARIABLE","$attrAlias",241],["T_WHITESPACE"," ",241],["T_DOUBLE_ARROW","=>",241],["T_WHITESPACE"," ",241],["T_VARIABLE","$attrParams",241],")",["T_WHITESPACE"," ",241],"{",["T_WHITESPACE","\n                        ",241],["T_IF","if",242],["T_WHITESPACE"," ",242],"(",["T_ISSET","isset",242],"(",["T_VARIABLE","$addressAttributes",242],"[",["T_VARIABLE","$attrParams",242],"[",["T_CONSTANT_ENCAPSED_STRING","'id'",242],"]","]",")",")",["T_WHITESPACE"," ",242],"{",["T_WHITESPACE","\n                            ",242],["T_VARIABLE","$attributes",243],"[",["T_VARIABLE","$attrParams",243],"[",["T_CONSTANT_ENCAPSED_STRING","'table'",243],"]","]","[",["T_VARIABLE","$entityId",243],"]","[",["T_VARIABLE","$attrParams",243],"[",["T_CONSTANT_ENCAPSED_STRING","'id'",243],"]","]",["T_WHITESPACE","\n                                ",243],"=",["T_WHITESPACE"," ",244],["T_VARIABLE","$addressAttributes",244],"[",["T_VARIABLE","$attrParams",244],"[",["T_CONSTANT_ENCAPSED_STRING","'id'",244],"]","]",";",["T_WHITESPACE","\n                        ",244],"}",["T_WHITESPACE","\n                    ",245],"}",["T_WHITESPACE","\n                    ",246],["T_COMMENT","\/\/ customer default addresses\n",247],["T_WHITESPACE","                    ",248],["T_FOREACH","foreach",248],["T_WHITESPACE"," ",248],"(",["T_STRING","self",248],["T_DOUBLE_COLON","::",248],["T_STRING","getDefaultAddressAttrMapping",248],"(",")",["T_WHITESPACE"," ",248],["T_AS","as",248],["T_WHITESPACE"," ",248],["T_VARIABLE","$colName",248],["T_WHITESPACE"," ",248],["T_DOUBLE_ARROW","=>",248],["T_WHITESPACE"," ",248],["T_VARIABLE","$customerAttrCode",248],")",["T_WHITESPACE"," ",248],"{",["T_WHITESPACE","\n                        ",248],["T_IF","if",249],["T_WHITESPACE"," ",249],"(","!",["T_EMPTY","empty",249],"(",["T_VARIABLE","$rowData",249],"[",["T_VARIABLE","$colName",249],"]",")",")",["T_WHITESPACE"," ",249],"{",["T_WHITESPACE","\n                            ",249],["T_VARIABLE","$attribute",250],["T_WHITESPACE","    ",250],"=",["T_WHITESPACE"," ",250],["T_VARIABLE","$customer",250],["T_OBJECT_OPERATOR","->",250],["T_STRING","getAttribute",250],"(",["T_VARIABLE","$customerAttrCode",250],")",";",["T_WHITESPACE","\n                            ",250],["T_VARIABLE","$backendTable",251],["T_WHITESPACE"," ",251],"=",["T_WHITESPACE"," ",251],["T_VARIABLE","$attribute",251],["T_OBJECT_OPERATOR","->",251],["T_STRING","getBackend",251],"(",")",["T_OBJECT_OPERATOR","->",251],["T_STRING","getTable",251],"(",")",";",["T_WHITESPACE","\n                            ",251],["T_VARIABLE","$defaults",252],"[",["T_VARIABLE","$backendTable",252],"]","[",["T_VARIABLE","$customerId",252],"]","[",["T_VARIABLE","$attribute",252],["T_OBJECT_OPERATOR","->",252],["T_STRING","getId",252],"(",")","]",["T_WHITESPACE"," ",252],"=",["T_WHITESPACE"," ",252],["T_VARIABLE","$entityId",252],";",["T_WHITESPACE","\n                        ",252],"}",["T_WHITESPACE","\n                    ",253],"}",["T_WHITESPACE","\n                    ",254],["T_COMMENT","\/\/ let's try to find region ID\n",255],["T_WHITESPACE","                    ",256],["T_IF","if",256],["T_WHITESPACE"," ",256],"(","!",["T_EMPTY","empty",256],"(",["T_VARIABLE","$rowData",256],"[",["T_VARIABLE","$regionColName",256],"]",")",")",["T_WHITESPACE"," ",256],"{",["T_WHITESPACE","\n                        ",256],["T_VARIABLE","$countryNormalized",257],["T_WHITESPACE"," ",257],"=",["T_WHITESPACE"," ",257],["T_STRING","strtolower",257],"(",["T_VARIABLE","$rowData",257],"[",["T_VARIABLE","$countryColName",257],"]",")",";",["T_WHITESPACE","\n                        ",257],["T_VARIABLE","$regionNormalized",258],["T_WHITESPACE","  ",258],"=",["T_WHITESPACE"," ",258],["T_STRING","strtolower",258],"(",["T_VARIABLE","$rowData",258],"[",["T_VARIABLE","$regionColName",258],"]",")",";",["T_WHITESPACE","\n\n                        ",258],["T_IF","if",260],["T_WHITESPACE"," ",260],"(",["T_ISSET","isset",260],"(",["T_VARIABLE","$this",260],["T_OBJECT_OPERATOR","->",260],["T_STRING","_countryRegions",260],"[",["T_VARIABLE","$countryNormalized",260],"]","[",["T_VARIABLE","$regionNormalized",260],"]",")",")",["T_WHITESPACE"," ",260],"{",["T_WHITESPACE","\n                            ",260],["T_VARIABLE","$regionId",261],["T_WHITESPACE"," ",261],"=",["T_WHITESPACE"," ",261],["T_VARIABLE","$this",261],["T_OBJECT_OPERATOR","->",261],["T_STRING","_countryRegions",261],"[",["T_VARIABLE","$countryNormalized",261],"]","[",["T_VARIABLE","$regionNormalized",261],"]",";",["T_WHITESPACE","\n                            ",261],["T_VARIABLE","$attributes",262],"[",["T_VARIABLE","$regionIdTable",262],"]","[",["T_VARIABLE","$entityId",262],"]","[",["T_VARIABLE","$regionIdAttrId",262],"]",["T_WHITESPACE"," ",262],"=",["T_WHITESPACE"," ",262],["T_VARIABLE","$regionId",262],";",["T_WHITESPACE","\n                            ",262],["T_COMMENT","\/\/ set 'region' attribute value as default name\n",263],["T_WHITESPACE","                            ",264],["T_VARIABLE","$tbl",264],["T_WHITESPACE","             ",264],"=",["T_WHITESPACE"," ",264],["T_VARIABLE","$this",264],["T_OBJECT_OPERATOR","->",264],["T_STRING","_attributes",264],"[",["T_VARIABLE","$regionColName",264],"]","[",["T_CONSTANT_ENCAPSED_STRING","'table'",264],"]",";",["T_WHITESPACE","\n                            ",264],["T_VARIABLE","$regionColNameId",265],["T_WHITESPACE"," ",265],"=",["T_WHITESPACE"," ",265],["T_VARIABLE","$this",265],["T_OBJECT_OPERATOR","->",265],["T_STRING","_attributes",265],"[",["T_VARIABLE","$regionColName",265],"]","[",["T_CONSTANT_ENCAPSED_STRING","'id'",265],"]",";",["T_WHITESPACE","\n                            ",265],["T_VARIABLE","$attributes",266],"[",["T_VARIABLE","$tbl",266],"]","[",["T_VARIABLE","$entityId",266],"]","[",["T_VARIABLE","$regionColNameId",266],"]",["T_WHITESPACE"," ",266],"=",["T_WHITESPACE"," ",266],["T_VARIABLE","$this",266],["T_OBJECT_OPERATOR","->",266],["T_STRING","_regions",266],"[",["T_VARIABLE","$regionId",266],"]",";",["T_WHITESPACE","\n                        ",266],"}",["T_WHITESPACE","\n                    ",267],"}",["T_WHITESPACE","\n                ",268],"}",["T_WHITESPACE"," ",269],["T_ELSE","else",269],["T_WHITESPACE"," ",269],"{",["T_WHITESPACE","\n                    ",269],["T_FOREACH","foreach",270],["T_WHITESPACE"," ",270],"(",["T_STRING","array_intersect_key",270],"(",["T_VARIABLE","$rowData",270],",",["T_WHITESPACE"," ",270],["T_VARIABLE","$this",270],["T_OBJECT_OPERATOR","->",270],["T_STRING","_attributes",270],")",["T_WHITESPACE"," ",270],["T_AS","as",270],["T_WHITESPACE"," ",270],["T_VARIABLE","$attrCode",270],["T_WHITESPACE"," ",270],["T_DOUBLE_ARROW","=>",270],["T_WHITESPACE"," ",270],["T_VARIABLE","$value",270],")",["T_WHITESPACE"," ",270],"{",["T_WHITESPACE","\n                        ",270],["T_VARIABLE","$attrParams",271],["T_WHITESPACE"," ",271],"=",["T_WHITESPACE"," ",271],["T_VARIABLE","$this",271],["T_OBJECT_OPERATOR","->",271],["T_STRING","_attributes",271],"[",["T_VARIABLE","$attrCode",271],"]",";",["T_WHITESPACE","\n                        ",271],["T_IF","if",272],["T_WHITESPACE"," ",272],"(",["T_VARIABLE","$attrParams",272],"[",["T_CONSTANT_ENCAPSED_STRING","'type'",272],"]",["T_WHITESPACE"," ",272],["T_IS_EQUAL","==",272],["T_WHITESPACE"," ",272],["T_CONSTANT_ENCAPSED_STRING","'multiselect'",272],")",["T_WHITESPACE"," ",272],"{",["T_WHITESPACE","\n                            ",272],["T_VARIABLE","$value",273],["T_WHITESPACE"," ",273],"=",["T_WHITESPACE"," ",273],["T_CONSTANT_ENCAPSED_STRING","''",273],";",["T_WHITESPACE","\n                            ",273],["T_IF","if",274],["T_WHITESPACE"," ",274],"(",["T_ISSET","isset",274],"(",["T_VARIABLE","$multiSelect",274],"[",["T_VARIABLE","$attrParams",274],"[",["T_CONSTANT_ENCAPSED_STRING","'id'",274],"]","]",")",")",["T_WHITESPACE"," ",274],"{",["T_WHITESPACE","\n                                ",274],["T_VARIABLE","$value",275],["T_WHITESPACE"," ",275],"=",["T_WHITESPACE"," ",275],["T_STRING","implode",275],"(",["T_CONSTANT_ENCAPSED_STRING","','",275],",",["T_WHITESPACE"," ",275],["T_VARIABLE","$multiSelect",275],"[",["T_VARIABLE","$attrParams",275],"[",["T_CONSTANT_ENCAPSED_STRING","'id'",275],"]","]",")",";",["T_WHITESPACE","\n                            ",275],"}",["T_WHITESPACE","\n                            ",276],["T_VARIABLE","$attributes",277],"[",["T_VARIABLE","$this",277],["T_OBJECT_OPERATOR","->",277],["T_STRING","_attributes",277],"[",["T_VARIABLE","$attrCode",277],"]","[",["T_CONSTANT_ENCAPSED_STRING","'table'",277],"]","]","[",["T_VARIABLE","$entityId",277],"]","[",["T_VARIABLE","$attrParams",277],"[",["T_CONSTANT_ENCAPSED_STRING","'id'",277],"]","]",["T_WHITESPACE"," ",277],"=",["T_WHITESPACE"," ",277],["T_VARIABLE","$value",277],";",["T_WHITESPACE","\n                        ",277],"}",["T_WHITESPACE","\n                    ",278],"}",["T_WHITESPACE","\n                ",279],"}",["T_WHITESPACE","\n            ",280],"}",["T_WHITESPACE","\n            ",281],["T_VARIABLE","$this",282],["T_OBJECT_OPERATOR","->",282],["T_STRING","_saveAddressEntity",282],"(",["T_VARIABLE","$entityRows",282],")",["T_WHITESPACE","\n                ",282],["T_OBJECT_OPERATOR","->",283],["T_STRING","_saveAddressAttributes",283],"(",["T_VARIABLE","$attributes",283],")",["T_WHITESPACE","\n                ",283],["T_OBJECT_OPERATOR","->",284],["T_STRING","_saveCustomerDefaults",284],"(",["T_VARIABLE","$defaults",284],")",";",["T_WHITESPACE","\n        ",284],"}",["T_WHITESPACE","\n        ",285],["T_RETURN","return",286],["T_WHITESPACE"," ",286],["T_STRING","true",286],";",["T_WHITESPACE","\n    ",286],"}",["T_WHITESPACE","\n\n    ",287],["T_DOC_COMMENT","\/**\n     * Initialize customer address attributes.\n     *\n     * @return Mage_ImportExport_Model_Import_Entity_Customer_Address\n     *\/",289],["T_WHITESPACE","\n    ",293],["T_PROTECTED","protected",294],["T_WHITESPACE"," ",294],["T_FUNCTION","function",294],["T_WHITESPACE"," ",294],["T_STRING","_initAttributes",294],"(",")",["T_WHITESPACE","\n    ",294],"{",["T_WHITESPACE","\n        ",295],["T_VARIABLE","$addrCollection",296],["T_WHITESPACE"," ",296],"=",["T_WHITESPACE"," ",296],["T_STRING","Mage",296],["T_DOUBLE_COLON","::",296],["T_STRING","getResourceModel",296],"(",["T_CONSTANT_ENCAPSED_STRING","'customer\/address_attribute_collection'",296],")",["T_WHITESPACE","\n            ",296],["T_OBJECT_OPERATOR","->",297],["T_STRING","addSystemHiddenFilter",297],"(",")",["T_WHITESPACE","\n            ",297],["T_OBJECT_OPERATOR","->",298],["T_STRING","addExcludeHiddenFrontendFilter",298],"(",")",";",["T_WHITESPACE","\n\n        ",298],["T_FOREACH","foreach",300],["T_WHITESPACE"," ",300],"(",["T_VARIABLE","$addrCollection",300],["T_WHITESPACE"," ",300],["T_AS","as",300],["T_WHITESPACE"," ",300],["T_VARIABLE","$attribute",300],")",["T_WHITESPACE"," ",300],"{",["T_WHITESPACE","\n            ",300],["T_VARIABLE","$this",301],["T_OBJECT_OPERATOR","->",301],["T_STRING","_attributes",301],"[",["T_STRING","self",301],["T_DOUBLE_COLON","::",301],["T_STRING","getColNameForAttrCode",301],"(",["T_VARIABLE","$attribute",301],["T_OBJECT_OPERATOR","->",301],["T_STRING","getAttributeCode",301],"(",")",")","]",["T_WHITESPACE"," ",301],"=",["T_WHITESPACE"," ",301],["T_ARRAY","array",301],"(",["T_WHITESPACE","\n                ",301],["T_CONSTANT_ENCAPSED_STRING","'id'",302],["T_WHITESPACE","          ",302],["T_DOUBLE_ARROW","=>",302],["T_WHITESPACE"," ",302],["T_VARIABLE","$attribute",302],["T_OBJECT_OPERATOR","->",302],["T_STRING","getId",302],"(",")",",",["T_WHITESPACE","\n                ",302],["T_CONSTANT_ENCAPSED_STRING","'code'",303],["T_WHITESPACE","        ",303],["T_DOUBLE_ARROW","=>",303],["T_WHITESPACE"," ",303],["T_VARIABLE","$attribute",303],["T_OBJECT_OPERATOR","->",303],["T_STRING","getAttributeCode",303],"(",")",",",["T_WHITESPACE","\n                ",303],["T_CONSTANT_ENCAPSED_STRING","'table'",304],["T_WHITESPACE","       ",304],["T_DOUBLE_ARROW","=>",304],["T_WHITESPACE"," ",304],["T_VARIABLE","$attribute",304],["T_OBJECT_OPERATOR","->",304],["T_STRING","getBackend",304],"(",")",["T_OBJECT_OPERATOR","->",304],["T_STRING","getTable",304],"(",")",",",["T_WHITESPACE","\n                ",304],["T_CONSTANT_ENCAPSED_STRING","'is_required'",305],["T_WHITESPACE"," ",305],["T_DOUBLE_ARROW","=>",305],["T_WHITESPACE"," ",305],["T_VARIABLE","$attribute",305],["T_OBJECT_OPERATOR","->",305],["T_STRING","getIsRequired",305],"(",")",",",["T_WHITESPACE","\n                ",305],["T_CONSTANT_ENCAPSED_STRING","'rules'",306],["T_WHITESPACE","       ",306],["T_DOUBLE_ARROW","=>",306],["T_WHITESPACE"," ",306],["T_VARIABLE","$attribute",306],["T_OBJECT_OPERATOR","->",306],["T_STRING","getValidateRules",306],"(",")",["T_WHITESPACE"," ",306],"?",["T_WHITESPACE"," ",306],["T_STRING","unserialize",306],"(",["T_VARIABLE","$attribute",306],["T_OBJECT_OPERATOR","->",306],["T_STRING","getValidateRules",306],"(",")",")",["T_WHITESPACE"," ",306],":",["T_WHITESPACE"," ",306],["T_STRING","null",306],",",["T_WHITESPACE","\n                ",306],["T_CONSTANT_ENCAPSED_STRING","'type'",307],["T_WHITESPACE","        ",307],["T_DOUBLE_ARROW","=>",307],["T_WHITESPACE"," ",307],["T_STRING","Mage_ImportExport_Model_Import",307],["T_DOUBLE_COLON","::",307],["T_STRING","getAttributeType",307],"(",["T_VARIABLE","$attribute",307],")",",",["T_WHITESPACE","\n                ",307],["T_CONSTANT_ENCAPSED_STRING","'options'",308],["T_WHITESPACE","     ",308],["T_DOUBLE_ARROW","=>",308],["T_WHITESPACE"," ",308],["T_VARIABLE","$this",308],["T_OBJECT_OPERATOR","->",308],["T_STRING","getAttributeOptions",308],"(",["T_VARIABLE","$attribute",308],")",["T_WHITESPACE","\n            ",308],")",";",["T_WHITESPACE","\n        ",309],"}",["T_WHITESPACE","\n        ",310],["T_RETURN","return",311],["T_WHITESPACE"," ",311],["T_VARIABLE","$this",311],";",["T_WHITESPACE","\n    ",311],"}",["T_WHITESPACE","\n\n    ",312],["T_DOC_COMMENT","\/**\n     * Initialize country regions hash for clever recognition.\n     *\n     * @return Mage_ImportExport_Model_Import_Entity_Customer_Address\n     *\/",314],["T_WHITESPACE","\n    ",318],["T_PROTECTED","protected",319],["T_WHITESPACE"," ",319],["T_FUNCTION","function",319],["T_WHITESPACE"," ",319],["T_STRING","_initCountryRegions",319],"(",")",["T_WHITESPACE","\n    ",319],"{",["T_WHITESPACE","\n        ",320],["T_FOREACH","foreach",321],["T_WHITESPACE"," ",321],"(",["T_STRING","Mage",321],["T_DOUBLE_COLON","::",321],["T_STRING","getResourceModel",321],"(",["T_CONSTANT_ENCAPSED_STRING","'directory\/region_collection'",321],")",["T_WHITESPACE"," ",321],["T_AS","as",321],["T_WHITESPACE"," ",321],["T_VARIABLE","$regionRow",321],")",["T_WHITESPACE"," ",321],"{",["T_WHITESPACE","\n            ",321],["T_VARIABLE","$countryNormalized",322],["T_WHITESPACE"," ",322],"=",["T_WHITESPACE"," ",322],["T_STRING","strtolower",322],"(",["T_VARIABLE","$regionRow",322],"[",["T_CONSTANT_ENCAPSED_STRING","'country_id'",322],"]",")",";",["T_WHITESPACE","\n            ",322],["T_VARIABLE","$regionCode",323],["T_WHITESPACE"," ",323],"=",["T_WHITESPACE"," ",323],["T_STRING","strtolower",323],"(",["T_VARIABLE","$regionRow",323],"[",["T_CONSTANT_ENCAPSED_STRING","'code'",323],"]",")",";",["T_WHITESPACE","\n            ",323],["T_VARIABLE","$regionName",324],["T_WHITESPACE"," ",324],"=",["T_WHITESPACE"," ",324],["T_STRING","strtolower",324],"(",["T_VARIABLE","$regionRow",324],"[",["T_CONSTANT_ENCAPSED_STRING","'default_name'",324],"]",")",";",["T_WHITESPACE","\n            ",324],["T_VARIABLE","$this",325],["T_OBJECT_OPERATOR","->",325],["T_STRING","_countryRegions",325],"[",["T_VARIABLE","$countryNormalized",325],"]","[",["T_VARIABLE","$regionCode",325],"]",["T_WHITESPACE"," ",325],"=",["T_WHITESPACE"," ",325],["T_VARIABLE","$regionRow",325],"[",["T_CONSTANT_ENCAPSED_STRING","'region_id'",325],"]",";",["T_WHITESPACE","\n            ",325],["T_VARIABLE","$this",326],["T_OBJECT_OPERATOR","->",326],["T_STRING","_countryRegions",326],"[",["T_VARIABLE","$countryNormalized",326],"]","[",["T_VARIABLE","$regionName",326],"]",["T_WHITESPACE"," ",326],"=",["T_WHITESPACE"," ",326],["T_VARIABLE","$regionRow",326],"[",["T_CONSTANT_ENCAPSED_STRING","'region_id'",326],"]",";",["T_WHITESPACE","\n            ",326],["T_VARIABLE","$this",327],["T_OBJECT_OPERATOR","->",327],["T_STRING","_regions",327],"[",["T_VARIABLE","$regionRow",327],"[",["T_CONSTANT_ENCAPSED_STRING","'region_id'",327],"]","]",["T_WHITESPACE"," ",327],"=",["T_WHITESPACE"," ",327],["T_VARIABLE","$regionRow",327],"[",["T_CONSTANT_ENCAPSED_STRING","'default_name'",327],"]",";",["T_WHITESPACE","\n        ",327],"}",["T_WHITESPACE","\n        ",328],["T_RETURN","return",329],["T_WHITESPACE"," ",329],["T_VARIABLE","$this",329],";",["T_WHITESPACE","\n    ",329],"}",["T_WHITESPACE","\n\n    ",330],["T_DOC_COMMENT","\/**\n     * Check address data availability in row data.\n     *\n     * @param array $rowData\n     * @return bool\n     *\/",332],["T_WHITESPACE","\n    ",337],["T_PROTECTED","protected",338],["T_WHITESPACE"," ",338],["T_FUNCTION","function",338],["T_WHITESPACE"," ",338],["T_STRING","_isRowWithAddress",338],"(",["T_ARRAY","array",338],["T_WHITESPACE"," ",338],["T_VARIABLE","$rowData",338],")",["T_WHITESPACE","\n    ",338],"{",["T_WHITESPACE","\n        ",339],["T_FOREACH","foreach",340],["T_WHITESPACE"," ",340],"(",["T_STRING","array_keys",340],"(",["T_VARIABLE","$this",340],["T_OBJECT_OPERATOR","->",340],["T_STRING","_attributes",340],")",["T_WHITESPACE"," ",340],["T_AS","as",340],["T_WHITESPACE"," ",340],["T_VARIABLE","$colName",340],")",["T_WHITESPACE"," ",340],"{",["T_WHITESPACE","\n            ",340],["T_IF","if",341],["T_WHITESPACE"," ",341],"(",["T_ISSET","isset",341],"(",["T_VARIABLE","$rowData",341],"[",["T_VARIABLE","$colName",341],"]",")",["T_WHITESPACE"," ",341],["T_BOOLEAN_AND","&&",341],["T_WHITESPACE"," ",341],["T_STRING","strlen",341],"(",["T_VARIABLE","$rowData",341],"[",["T_VARIABLE","$colName",341],"]",")",")",["T_WHITESPACE"," ",341],"{",["T_WHITESPACE","\n                ",341],["T_RETURN","return",342],["T_WHITESPACE"," ",342],["T_STRING","true",342],";",["T_WHITESPACE","\n            ",342],"}",["T_WHITESPACE","\n        ",343],"}",["T_WHITESPACE","\n        ",344],["T_RETURN","return",345],["T_WHITESPACE"," ",345],["T_STRING","false",345],";",["T_WHITESPACE","\n    ",345],"}",["T_WHITESPACE","\n\n    ",346],["T_DOC_COMMENT","\/**\n     * Save customer address attributes.\n     *\n     * @param array $attributesData\n     * @return Mage_ImportExport_Model_Import_Entity_Customer_Address\n     *\/",348],["T_WHITESPACE","\n    ",353],["T_PROTECTED","protected",354],["T_WHITESPACE"," ",354],["T_FUNCTION","function",354],["T_WHITESPACE"," ",354],["T_STRING","_saveAddressAttributes",354],"(",["T_ARRAY","array",354],["T_WHITESPACE"," ",354],["T_VARIABLE","$attributesData",354],")",["T_WHITESPACE","\n    ",354],"{",["T_WHITESPACE","\n        ",355],["T_FOREACH","foreach",356],["T_WHITESPACE"," ",356],"(",["T_VARIABLE","$attributesData",356],["T_WHITESPACE"," ",356],["T_AS","as",356],["T_WHITESPACE"," ",356],["T_VARIABLE","$tableName",356],["T_WHITESPACE"," ",356],["T_DOUBLE_ARROW","=>",356],["T_WHITESPACE"," ",356],["T_VARIABLE","$data",356],")",["T_WHITESPACE"," ",356],"{",["T_WHITESPACE","\n            ",356],["T_VARIABLE","$tableData",357],["T_WHITESPACE"," ",357],"=",["T_WHITESPACE"," ",357],["T_ARRAY","array",357],"(",")",";",["T_WHITESPACE","\n\n            ",357],["T_FOREACH","foreach",359],["T_WHITESPACE"," ",359],"(",["T_VARIABLE","$data",359],["T_WHITESPACE"," ",359],["T_AS","as",359],["T_WHITESPACE"," ",359],["T_VARIABLE","$addressId",359],["T_WHITESPACE"," ",359],["T_DOUBLE_ARROW","=>",359],["T_WHITESPACE"," ",359],["T_VARIABLE","$attrData",359],")",["T_WHITESPACE"," ",359],"{",["T_WHITESPACE","\n                ",359],["T_FOREACH","foreach",360],["T_WHITESPACE"," ",360],"(",["T_VARIABLE","$attrData",360],["T_WHITESPACE"," ",360],["T_AS","as",360],["T_WHITESPACE"," ",360],["T_VARIABLE","$attributeId",360],["T_WHITESPACE"," ",360],["T_DOUBLE_ARROW","=>",360],["T_WHITESPACE"," ",360],["T_VARIABLE","$value",360],")",["T_WHITESPACE"," ",360],"{",["T_WHITESPACE","\n                    ",360],["T_VARIABLE","$tableData",361],"[","]",["T_WHITESPACE"," ",361],"=",["T_WHITESPACE"," ",361],["T_ARRAY","array",361],"(",["T_WHITESPACE","\n                        ",361],["T_CONSTANT_ENCAPSED_STRING","'entity_id'",362],["T_WHITESPACE","      ",362],["T_DOUBLE_ARROW","=>",362],["T_WHITESPACE"," ",362],["T_VARIABLE","$addressId",362],",",["T_WHITESPACE","\n                        ",362],["T_CONSTANT_ENCAPSED_STRING","'entity_type_id'",363],["T_WHITESPACE"," ",363],["T_DOUBLE_ARROW","=>",363],["T_WHITESPACE"," ",363],["T_VARIABLE","$this",363],["T_OBJECT_OPERATOR","->",363],["T_STRING","_entityTypeId",363],",",["T_WHITESPACE","\n                        ",363],["T_CONSTANT_ENCAPSED_STRING","'attribute_id'",364],["T_WHITESPACE","   ",364],["T_DOUBLE_ARROW","=>",364],["T_WHITESPACE"," ",364],["T_VARIABLE","$attributeId",364],",",["T_WHITESPACE","\n                        ",364],["T_CONSTANT_ENCAPSED_STRING","'value'",365],["T_WHITESPACE","          ",365],["T_DOUBLE_ARROW","=>",365],["T_WHITESPACE"," ",365],["T_VARIABLE","$value",365],["T_WHITESPACE","\n                    ",365],")",";",["T_WHITESPACE","\n                ",366],"}",["T_WHITESPACE","\n            ",367],"}",["T_WHITESPACE","\n            ",368],["T_VARIABLE","$this",369],["T_OBJECT_OPERATOR","->",369],["T_STRING","_connection",369],["T_OBJECT_OPERATOR","->",369],["T_STRING","insertMultiple",369],"(",["T_VARIABLE","$tableName",369],",",["T_WHITESPACE"," ",369],["T_VARIABLE","$tableData",369],")",";",["T_WHITESPACE","\n        ",369],"}",["T_WHITESPACE","\n        ",370],["T_RETURN","return",371],["T_WHITESPACE"," ",371],["T_VARIABLE","$this",371],";",["T_WHITESPACE","\n    ",371],"}",["T_WHITESPACE","\n\n    ",372],["T_DOC_COMMENT","\/**\n     * Update and insert data in entity table.\n     *\n     * @param array $entityRows Rows for insert\n     * @return Mage_ImportExport_Model_Import_Entity_Customer_Address\n     *\/",374],["T_WHITESPACE","\n    ",379],["T_PROTECTED","protected",380],["T_WHITESPACE"," ",380],["T_FUNCTION","function",380],["T_WHITESPACE"," ",380],["T_STRING","_saveAddressEntity",380],"(",["T_ARRAY","array",380],["T_WHITESPACE"," ",380],["T_VARIABLE","$entityRows",380],")",["T_WHITESPACE","\n    ",380],"{",["T_WHITESPACE","\n        ",381],["T_IF","if",382],["T_WHITESPACE"," ",382],"(",["T_VARIABLE","$entityRows",382],")",["T_WHITESPACE"," ",382],"{",["T_WHITESPACE","\n            ",382],["T_IF","if",383],["T_WHITESPACE"," ",383],"(",["T_STRING","Mage_ImportExport_Model_Import",383],["T_DOUBLE_COLON","::",383],["T_STRING","BEHAVIOR_APPEND",383],["T_WHITESPACE"," ",383],["T_IS_NOT_EQUAL","!=",383],["T_WHITESPACE"," ",383],["T_VARIABLE","$this",383],["T_OBJECT_OPERATOR","->",383],["T_STRING","_customer",383],["T_OBJECT_OPERATOR","->",383],["T_STRING","getBehavior",383],"(",")",")",["T_WHITESPACE"," ",383],"{",["T_WHITESPACE","\n                ",383],["T_VARIABLE","$customersToClean",384],["T_WHITESPACE"," ",384],"=",["T_WHITESPACE"," ",384],["T_ARRAY","array",384],"(",")",";",["T_WHITESPACE","\n\n                ",384],["T_FOREACH","foreach",386],["T_WHITESPACE"," ",386],"(",["T_VARIABLE","$entityRows",386],["T_WHITESPACE"," ",386],["T_AS","as",386],["T_WHITESPACE"," ",386],["T_VARIABLE","$entityData",386],")",["T_WHITESPACE"," ",386],"{",["T_WHITESPACE","\n                    ",386],["T_VARIABLE","$customersToClean",387],"[",["T_VARIABLE","$entityData",387],"[",["T_CONSTANT_ENCAPSED_STRING","'parent_id'",387],"]","]",["T_WHITESPACE"," ",387],"=",["T_WHITESPACE"," ",387],["T_STRING","true",387],";",["T_WHITESPACE","\n                ",387],"}",["T_WHITESPACE","\n                ",388],["T_VARIABLE","$this",389],["T_OBJECT_OPERATOR","->",389],["T_STRING","_connection",389],["T_OBJECT_OPERATOR","->",389],["T_STRING","delete",389],"(",["T_WHITESPACE","\n                    ",389],["T_VARIABLE","$this",390],["T_OBJECT_OPERATOR","->",390],["T_STRING","_entityTable",390],",",["T_WHITESPACE","\n                    ",390],["T_VARIABLE","$this",391],["T_OBJECT_OPERATOR","->",391],["T_STRING","_connection",391],["T_OBJECT_OPERATOR","->",391],["T_STRING","quoteInto",391],"(",["T_CONSTANT_ENCAPSED_STRING","'`parent_id` IN (?)'",391],",",["T_WHITESPACE"," ",391],["T_STRING","array_keys",391],"(",["T_VARIABLE","$customersToClean",391],")",")",["T_WHITESPACE","\n                ",391],")",";",["T_WHITESPACE","\n            ",392],"}",["T_WHITESPACE","\n            ",393],["T_VARIABLE","$this",394],["T_OBJECT_OPERATOR","->",394],["T_STRING","_connection",394],["T_OBJECT_OPERATOR","->",394],["T_STRING","insertMultiple",394],"(",["T_VARIABLE","$this",394],["T_OBJECT_OPERATOR","->",394],["T_STRING","_entityTable",394],",",["T_WHITESPACE"," ",394],["T_VARIABLE","$entityRows",394],")",";",["T_WHITESPACE","\n        ",394],"}",["T_WHITESPACE","\n        ",395],["T_RETURN","return",396],["T_WHITESPACE"," ",396],["T_VARIABLE","$this",396],";",["T_WHITESPACE","\n    ",396],"}",["T_WHITESPACE","\n\n    ",397],["T_DOC_COMMENT","\/**\n     * Save customer default addresses.\n     *\n     * @param array $defaults\n     * @return Mage_ImportExport_Model_Import_Entity_Customer_Address\n     *\/",399],["T_WHITESPACE","\n    ",404],["T_PROTECTED","protected",405],["T_WHITESPACE"," ",405],["T_FUNCTION","function",405],["T_WHITESPACE"," ",405],["T_STRING","_saveCustomerDefaults",405],"(",["T_ARRAY","array",405],["T_WHITESPACE"," ",405],["T_VARIABLE","$defaults",405],")",["T_WHITESPACE","\n    ",405],"{",["T_WHITESPACE","\n        ",406],["T_FOREACH","foreach",407],["T_WHITESPACE"," ",407],"(",["T_VARIABLE","$defaults",407],["T_WHITESPACE"," ",407],["T_AS","as",407],["T_WHITESPACE"," ",407],["T_VARIABLE","$tableName",407],["T_WHITESPACE"," ",407],["T_DOUBLE_ARROW","=>",407],["T_WHITESPACE"," ",407],["T_VARIABLE","$data",407],")",["T_WHITESPACE"," ",407],"{",["T_WHITESPACE","\n            ",407],["T_VARIABLE","$tableData",408],["T_WHITESPACE"," ",408],"=",["T_WHITESPACE"," ",408],["T_ARRAY","array",408],"(",")",";",["T_WHITESPACE","\n\n            ",408],["T_FOREACH","foreach",410],["T_WHITESPACE"," ",410],"(",["T_VARIABLE","$data",410],["T_WHITESPACE"," ",410],["T_AS","as",410],["T_WHITESPACE"," ",410],["T_VARIABLE","$customerId",410],["T_WHITESPACE"," ",410],["T_DOUBLE_ARROW","=>",410],["T_WHITESPACE"," ",410],["T_VARIABLE","$attrData",410],")",["T_WHITESPACE"," ",410],"{",["T_WHITESPACE","\n                ",410],["T_FOREACH","foreach",411],["T_WHITESPACE"," ",411],"(",["T_VARIABLE","$attrData",411],["T_WHITESPACE"," ",411],["T_AS","as",411],["T_WHITESPACE"," ",411],["T_VARIABLE","$attributeId",411],["T_WHITESPACE"," ",411],["T_DOUBLE_ARROW","=>",411],["T_WHITESPACE"," ",411],["T_VARIABLE","$value",411],")",["T_WHITESPACE"," ",411],"{",["T_WHITESPACE","\n                    ",411],["T_VARIABLE","$tableData",412],"[","]",["T_WHITESPACE"," ",412],"=",["T_WHITESPACE"," ",412],["T_ARRAY","array",412],"(",["T_WHITESPACE","\n                        ",412],["T_CONSTANT_ENCAPSED_STRING","'entity_id'",413],["T_WHITESPACE","      ",413],["T_DOUBLE_ARROW","=>",413],["T_WHITESPACE"," ",413],["T_VARIABLE","$customerId",413],",",["T_WHITESPACE","\n                        ",413],["T_CONSTANT_ENCAPSED_STRING","'entity_type_id'",414],["T_WHITESPACE"," ",414],["T_DOUBLE_ARROW","=>",414],["T_WHITESPACE"," ",414],["T_VARIABLE","$this",414],["T_OBJECT_OPERATOR","->",414],["T_STRING","_customer",414],["T_OBJECT_OPERATOR","->",414],["T_STRING","getEntityTypeId",414],"(",")",",",["T_WHITESPACE","\n                        ",414],["T_CONSTANT_ENCAPSED_STRING","'attribute_id'",415],["T_WHITESPACE","   ",415],["T_DOUBLE_ARROW","=>",415],["T_WHITESPACE"," ",415],["T_VARIABLE","$attributeId",415],",",["T_WHITESPACE","\n                        ",415],["T_CONSTANT_ENCAPSED_STRING","'value'",416],["T_WHITESPACE","          ",416],["T_DOUBLE_ARROW","=>",416],["T_WHITESPACE"," ",416],["T_VARIABLE","$value",416],["T_WHITESPACE","\n                    ",416],")",";",["T_WHITESPACE","\n                ",417],"}",["T_WHITESPACE","\n            ",418],"}",["T_WHITESPACE","\n            ",419],["T_VARIABLE","$this",420],["T_OBJECT_OPERATOR","->",420],["T_STRING","_connection",420],["T_OBJECT_OPERATOR","->",420],["T_STRING","insertOnDuplicate",420],"(",["T_VARIABLE","$tableName",420],",",["T_WHITESPACE"," ",420],["T_VARIABLE","$tableData",420],",",["T_WHITESPACE"," ",420],["T_ARRAY","array",420],"(",["T_CONSTANT_ENCAPSED_STRING","'value'",420],")",")",";",["T_WHITESPACE","\n        ",420],"}",["T_WHITESPACE","\n        ",421],["T_RETURN","return",422],["T_WHITESPACE"," ",422],["T_VARIABLE","$this",422],";",["T_WHITESPACE","\n    ",422],"}",["T_WHITESPACE","\n\n    ",423],["T_DOC_COMMENT","\/**\n     * Get column name which holds value for attribute with specified code.\n     *\n     * @static\n     * @param string $attrCode\n     * @return string\n     *\/",425],["T_WHITESPACE","\n    ",431],["T_PUBLIC","public",432],["T_WHITESPACE"," ",432],["T_STATIC","static",432],["T_WHITESPACE"," ",432],["T_FUNCTION","function",432],["T_WHITESPACE"," ",432],["T_STRING","getColNameForAttrCode",432],"(",["T_VARIABLE","$attrCode",432],")",["T_WHITESPACE","\n    ",432],"{",["T_WHITESPACE","\n        ",433],["T_RETURN","return",434],["T_WHITESPACE"," ",434],["T_STRING","self",434],["T_DOUBLE_COLON","::",434],["T_STRING","COL_NAME_PREFIX",434],["T_WHITESPACE"," ",434],".",["T_WHITESPACE"," ",434],["T_VARIABLE","$attrCode",434],";",["T_WHITESPACE","\n    ",434],"}",["T_WHITESPACE","\n\n    ",435],["T_DOC_COMMENT","\/**\n     * Customer default addresses column name to customer attribute mapping array.\n     *\n     * @static\n     * @return array\n     *\/",437],["T_WHITESPACE","\n    ",442],["T_PUBLIC","public",443],["T_WHITESPACE"," ",443],["T_STATIC","static",443],["T_WHITESPACE"," ",443],["T_FUNCTION","function",443],["T_WHITESPACE"," ",443],["T_STRING","getDefaultAddressAttrMapping",443],"(",")",["T_WHITESPACE","\n    ",443],"{",["T_WHITESPACE","\n        ",444],["T_RETURN","return",445],["T_WHITESPACE"," ",445],["T_STRING","self",445],["T_DOUBLE_COLON","::",445],["T_VARIABLE","$_defaultAddressAttrMapping",445],";",["T_WHITESPACE","\n    ",445],"}",["T_WHITESPACE","\n\n    ",446],["T_DOC_COMMENT","\/**\n     * EAV entity type code getter.\n     *\n     * @return string\n     *\/",448],["T_WHITESPACE","\n    ",452],["T_PUBLIC","public",453],["T_WHITESPACE"," ",453],["T_FUNCTION","function",453],["T_WHITESPACE"," ",453],["T_STRING","getEntityTypeCode",453],"(",")",["T_WHITESPACE","\n    ",453],"{",["T_WHITESPACE","\n        ",454],["T_RETURN","return",455],["T_WHITESPACE"," ",455],["T_CONSTANT_ENCAPSED_STRING","'customer_address'",455],";",["T_WHITESPACE","\n    ",455],"}",["T_WHITESPACE","\n\n    ",456],["T_DOC_COMMENT","\/**\n     * Is attribute contains particular data (not plain entity attribute).\n     *\n     * @param string $attrCode\n     * @return bool\n     *\/",458],["T_WHITESPACE","\n    ",463],["T_PUBLIC","public",464],["T_WHITESPACE"," ",464],["T_FUNCTION","function",464],["T_WHITESPACE"," ",464],["T_STRING","isAttributeParticular",464],"(",["T_VARIABLE","$attrCode",464],")",["T_WHITESPACE","\n    ",464],"{",["T_WHITESPACE","\n        ",465],["T_RETURN","return",466],["T_WHITESPACE"," ",466],["T_ISSET","isset",466],"(",["T_VARIABLE","$this",466],["T_OBJECT_OPERATOR","->",466],["T_STRING","_attributes",466],"[",["T_VARIABLE","$attrCode",466],"]",")",["T_WHITESPACE"," ",466],["T_BOOLEAN_OR","||",466],["T_WHITESPACE"," ",466],["T_STRING","in_array",466],"(",["T_VARIABLE","$attrCode",466],",",["T_WHITESPACE"," ",466],["T_VARIABLE","$this",466],["T_OBJECT_OPERATOR","->",466],["T_STRING","_particularAttributes",466],")",";",["T_WHITESPACE","\n    ",466],"}",["T_WHITESPACE","\n\n    ",467],["T_DOC_COMMENT","\/**\n     * Validate data row.\n     *\n     * @param array $rowData\n     * @param int $rowNum\n     * @return boolean\n     *\/",469],["T_WHITESPACE","\n    ",475],["T_PUBLIC","public",476],["T_WHITESPACE"," ",476],["T_FUNCTION","function",476],["T_WHITESPACE"," ",476],["T_STRING","validateRow",476],"(",["T_ARRAY","array",476],["T_WHITESPACE"," ",476],["T_VARIABLE","$rowData",476],",",["T_WHITESPACE"," ",476],["T_VARIABLE","$rowNum",476],")",["T_WHITESPACE","\n    ",476],"{",["T_WHITESPACE","\n        ",477],["T_VARIABLE","$rowIsValid",478],["T_WHITESPACE"," ",478],"=",["T_WHITESPACE"," ",478],["T_STRING","true",478],";",["T_WHITESPACE","\n\n        ",478],["T_IF","if",480],["T_WHITESPACE"," ",480],"(",["T_VARIABLE","$this",480],["T_OBJECT_OPERATOR","->",480],["T_STRING","_isRowWithAddress",480],"(",["T_VARIABLE","$rowData",480],")",")",["T_WHITESPACE"," ",480],"{",["T_WHITESPACE","\n            ",480],["T_FOREACH","foreach",481],["T_WHITESPACE"," ",481],"(",["T_VARIABLE","$this",481],["T_OBJECT_OPERATOR","->",481],["T_STRING","_attributes",481],["T_WHITESPACE"," ",481],["T_AS","as",481],["T_WHITESPACE"," ",481],["T_VARIABLE","$colName",481],["T_WHITESPACE"," ",481],["T_DOUBLE_ARROW","=>",481],["T_WHITESPACE"," ",481],["T_VARIABLE","$attrParams",481],")",["T_WHITESPACE"," ",481],"{",["T_WHITESPACE","\n                ",481],["T_IF","if",482],["T_WHITESPACE"," ",482],"(",["T_ISSET","isset",482],"(",["T_VARIABLE","$rowData",482],"[",["T_VARIABLE","$colName",482],"]",")",["T_WHITESPACE"," ",482],["T_BOOLEAN_AND","&&",482],["T_WHITESPACE"," ",482],["T_STRING","strlen",482],"(",["T_VARIABLE","$rowData",482],"[",["T_VARIABLE","$colName",482],"]",")",")",["T_WHITESPACE"," ",482],"{",["T_WHITESPACE","\n                    ",482],["T_VARIABLE","$rowIsValid",483],["T_WHITESPACE"," ",483],["T_AND_EQUAL","&=",483],["T_WHITESPACE"," ",483],["T_VARIABLE","$this",483],["T_OBJECT_OPERATOR","->",483],["T_STRING","_customer",483],["T_OBJECT_OPERATOR","->",483],["T_STRING","isAttributeValid",483],"(",["T_VARIABLE","$colName",483],",",["T_WHITESPACE"," ",483],["T_VARIABLE","$attrParams",483],",",["T_WHITESPACE"," ",483],["T_VARIABLE","$rowData",483],",",["T_WHITESPACE"," ",483],["T_VARIABLE","$rowNum",483],")",";",["T_WHITESPACE","\n                ",483],"}",["T_WHITESPACE"," ",484],["T_ELSEIF","elseif",484],["T_WHITESPACE"," ",484],"(",["T_VARIABLE","$attrParams",484],"[",["T_CONSTANT_ENCAPSED_STRING","'is_required'",484],"]",")",["T_WHITESPACE"," ",484],"{",["T_WHITESPACE","\n                    ",484],["T_VARIABLE","$this",485],["T_OBJECT_OPERATOR","->",485],["T_STRING","_customer",485],["T_OBJECT_OPERATOR","->",485],["T_STRING","addRowError",485],"(",["T_WHITESPACE","\n                        ",485],["T_STRING","Mage_ImportExport_Model_Import_Entity_Customer",486],["T_DOUBLE_COLON","::",486],["T_STRING","ERROR_VALUE_IS_REQUIRED",486],",",["T_WHITESPACE"," ",486],["T_VARIABLE","$rowNum",486],",",["T_WHITESPACE"," ",486],["T_VARIABLE","$colName",486],["T_WHITESPACE","\n                    ",486],")",";",["T_WHITESPACE","\n                    ",487],["T_VARIABLE","$rowIsValid",488],["T_WHITESPACE"," ",488],"=",["T_WHITESPACE"," ",488],["T_STRING","false",488],";",["T_WHITESPACE","\n                ",488],"}",["T_WHITESPACE","\n            ",489],"}",["T_WHITESPACE","\n            ",490],["T_COMMENT","\/\/ validate region for countries with known region list\n",491],["T_WHITESPACE","            ",492],["T_IF","if",492],["T_WHITESPACE"," ",492],"(",["T_VARIABLE","$rowIsValid",492],")",["T_WHITESPACE"," ",492],"{",["T_WHITESPACE","\n                ",492],["T_VARIABLE","$regionColName",493],["T_WHITESPACE","  ",493],"=",["T_WHITESPACE"," ",493],["T_STRING","self",493],["T_DOUBLE_COLON","::",493],["T_STRING","getColNameForAttrCode",493],"(",["T_CONSTANT_ENCAPSED_STRING","'region'",493],")",";",["T_WHITESPACE","\n                ",493],["T_VARIABLE","$countryColName",494],["T_WHITESPACE"," ",494],"=",["T_WHITESPACE"," ",494],["T_STRING","self",494],["T_DOUBLE_COLON","::",494],["T_STRING","getColNameForAttrCode",494],"(",["T_CONSTANT_ENCAPSED_STRING","'country_id'",494],")",";",["T_WHITESPACE","\n                ",494],["T_VARIABLE","$countryRegions",495],["T_WHITESPACE"," ",495],"=",["T_WHITESPACE"," ",495],["T_ISSET","isset",495],"(",["T_VARIABLE","$this",495],["T_OBJECT_OPERATOR","->",495],["T_STRING","_countryRegions",495],"[",["T_STRING","strtolower",495],"(",["T_VARIABLE","$rowData",495],"[",["T_VARIABLE","$countryColName",495],"]",")","]",")",["T_WHITESPACE","\n                                ",495],"?",["T_WHITESPACE"," ",496],["T_VARIABLE","$this",496],["T_OBJECT_OPERATOR","->",496],["T_STRING","_countryRegions",496],"[",["T_STRING","strtolower",496],"(",["T_VARIABLE","$rowData",496],"[",["T_VARIABLE","$countryColName",496],"]",")","]",["T_WHITESPACE","\n                                ",496],":",["T_WHITESPACE"," ",497],["T_ARRAY","array",497],"(",")",";",["T_WHITESPACE","\n\n                ",497],["T_IF","if",499],["T_WHITESPACE"," ",499],"(","!",["T_EMPTY","empty",499],"(",["T_VARIABLE","$rowData",499],"[",["T_VARIABLE","$regionColName",499],"]",")",["T_WHITESPACE","\n                    ",499],["T_BOOLEAN_AND","&&",500],["T_WHITESPACE"," ",500],"!",["T_EMPTY","empty",500],"(",["T_VARIABLE","$countryRegions",500],")",["T_WHITESPACE","\n                    ",500],["T_BOOLEAN_AND","&&",501],["T_WHITESPACE"," ",501],"!",["T_ISSET","isset",501],"(",["T_VARIABLE","$countryRegions",501],"[",["T_STRING","strtolower",501],"(",["T_VARIABLE","$rowData",501],"[",["T_VARIABLE","$regionColName",501],"]",")","]",")",["T_WHITESPACE","\n                ",501],")",["T_WHITESPACE"," ",502],"{",["T_WHITESPACE","\n                    ",502],["T_VARIABLE","$this",503],["T_OBJECT_OPERATOR","->",503],["T_STRING","_customer",503],["T_OBJECT_OPERATOR","->",503],["T_STRING","addRowError",503],"(",["T_STRING","self",503],["T_DOUBLE_COLON","::",503],["T_STRING","ERROR_INVALID_REGION",503],",",["T_WHITESPACE"," ",503],["T_VARIABLE","$rowNum",503],")",";",["T_WHITESPACE","\n\n                    ",503],["T_VARIABLE","$rowIsValid",505],["T_WHITESPACE"," ",505],"=",["T_WHITESPACE"," ",505],["T_STRING","false",505],";",["T_WHITESPACE","\n                ",505],"}",["T_WHITESPACE","\n            ",506],"}",["T_WHITESPACE","\n        ",507],"}",["T_WHITESPACE","\n        ",508],["T_RETURN","return",509],["T_WHITESPACE"," ",509],["T_VARIABLE","$rowIsValid",509],";",["T_WHITESPACE","\n    ",509],"}",["T_WHITESPACE","\n\n    ",510],["T_DOC_COMMENT","\/**\n     * Get current scope\n     *\n     * @param $rowData\n     * @return int\n     *\/",512],["T_WHITESPACE","\n    ",517],["T_PROTECTED","protected",518],["T_WHITESPACE"," ",518],["T_FUNCTION","function",518],["T_WHITESPACE"," ",518],["T_STRING","_getRowScope",518],"(",["T_VARIABLE","$rowData",518],")",["T_WHITESPACE","\n    ",518],"{",["T_WHITESPACE","\n        ",519],["T_IF","if",520],["T_WHITESPACE"," ",520],"(",["T_STRING","strlen",520],"(",["T_STRING","trim",520],"(",["T_VARIABLE","$rowData",520],"[",["T_STRING","Mage_ImportExport_Model_Import_Entity_Customer",520],["T_DOUBLE_COLON","::",520],["T_STRING","COL_EMAIL",520],"]",")",")",")",["T_WHITESPACE"," ",520],"{",["T_WHITESPACE","\n            ",520],["T_VARIABLE","$scope",521],["T_WHITESPACE"," ",521],"=",["T_WHITESPACE"," ",521],["T_STRING","Mage_ImportExport_Model_Import_Entity_Customer",521],["T_DOUBLE_COLON","::",521],["T_STRING","SCOPE_DEFAULT",521],";",["T_WHITESPACE","\n        ",521],"}",["T_WHITESPACE"," ",522],["T_ELSEIF","elseif",522],["T_WHITESPACE"," ",522],"(",["T_STRING","strlen",522],"(",["T_STRING","trim",522],"(",["T_VARIABLE","$rowData",522],"[",["T_STRING","Mage_ImportExport_Model_Import_Entity_Customer",522],["T_DOUBLE_COLON","::",522],["T_STRING","COL_POSTCODE",522],"]",")",")",")",["T_WHITESPACE"," ",522],"{",["T_WHITESPACE","\n            ",522],["T_VARIABLE","$scope",523],["T_WHITESPACE"," ",523],"=",["T_WHITESPACE"," ",523],["T_STRING","Mage_ImportExport_Model_Import_Entity_Customer",523],["T_DOUBLE_COLON","::",523],["T_STRING","SCOPE_ADDRESS",523],";",["T_WHITESPACE","\n        ",523],"}",["T_WHITESPACE"," ",524],["T_ELSE","else",524],["T_WHITESPACE"," ",524],"{",["T_WHITESPACE","\n            ",524],["T_VARIABLE","$scope",525],["T_WHITESPACE"," ",525],"=",["T_WHITESPACE"," ",525],["T_STRING","Mage_ImportExport_Model_Import_Entity_Customer",525],["T_DOUBLE_COLON","::",525],["T_STRING","SCOPE_OPTIONS",525],";",["T_WHITESPACE","\n        ",525],"}",["T_WHITESPACE","\n        ",526],["T_RETURN","return",527],["T_WHITESPACE"," ",527],["T_VARIABLE","$scope",527],";",["T_WHITESPACE","\n    ",527],"}",["T_WHITESPACE","\n",528],"}",["T_WHITESPACE","\n",529]]
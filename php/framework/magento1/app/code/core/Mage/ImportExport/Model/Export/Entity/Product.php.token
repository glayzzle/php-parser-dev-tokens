[["T_OPEN_TAG","<?php\n",1],["T_DOC_COMMENT","\/**\n * Magento\n *\n * NOTICE OF LICENSE\n *\n * This source file is subject to the Open Software License (OSL 3.0)\n * that is bundled with this package in the file LICENSE.txt.\n * It is also available through the world-wide-web at this URL:\n * http:\/\/opensource.org\/licenses\/osl-3.0.php\n * If you did not receive a copy of the license and are unable to\n * obtain it through the world-wide-web, please send an email\n * to license@magento.com so we can send you a copy immediately.\n *\n * DISCLAIMER\n *\n * Do not edit or add to this file if you wish to upgrade Magento to newer\n * versions in the future. If you wish to customize Magento for your\n * needs please refer to http:\/\/www.magento.com for more information.\n *\n * @category    Mage\n * @package     Mage_ImportExport\n * @copyright  Copyright (c) 2006-2016 X.commerce, Inc. and affiliates (http:\/\/www.magento.com)\n * @license    http:\/\/opensource.org\/licenses\/osl-3.0.php  Open Software License (OSL 3.0)\n *\/",2],["T_WHITESPACE","\n\n",25],["T_DOC_COMMENT","\/**\n * Export entity product model\n *\n * @category    Mage\n * @package     Mage_ImportExport\n * @author      Magento Core Team <core@magentocommerce.com>\n *\/",27],["T_WHITESPACE","\n",33],["T_CLASS","class",34],["T_WHITESPACE"," ",34],["T_STRING","Mage_ImportExport_Model_Export_Entity_Product",34],["T_WHITESPACE"," ",34],["T_EXTENDS","extends",34],["T_WHITESPACE"," ",34],["T_STRING","Mage_ImportExport_Model_Export_Entity_Abstract",34],["T_WHITESPACE","\n",34],"{",["T_WHITESPACE","\n    ",35],["T_CONST","const",36],["T_WHITESPACE"," ",36],["T_STRING","CONFIG_KEY_PRODUCT_TYPES",36],["T_WHITESPACE"," ",36],"=",["T_WHITESPACE"," ",36],["T_CONSTANT_ENCAPSED_STRING","'global\/importexport\/export_product_types'",36],";",["T_WHITESPACE","\n\n    ",36],["T_DOC_COMMENT","\/**\n     * Value that means all entities (e.g. websites, groups etc.)\n     *\/",38],["T_WHITESPACE","\n    ",40],["T_CONST","const",41],["T_WHITESPACE"," ",41],["T_STRING","VALUE_ALL",41],["T_WHITESPACE"," ",41],"=",["T_WHITESPACE"," ",41],["T_CONSTANT_ENCAPSED_STRING","'all'",41],";",["T_WHITESPACE","\n\n    ",41],["T_DOC_COMMENT","\/**\n     * Permanent column names.\n     *\n     * Names that begins with underscore is not an attribute. This name convention is for\n     * to avoid interference with same attribute name.\n     *\/",43],["T_WHITESPACE","\n    ",48],["T_CONST","const",49],["T_WHITESPACE"," ",49],["T_STRING","COL_STORE",49],["T_WHITESPACE","    ",49],"=",["T_WHITESPACE"," ",49],["T_CONSTANT_ENCAPSED_STRING","'_store'",49],";",["T_WHITESPACE","\n    ",49],["T_CONST","const",50],["T_WHITESPACE"," ",50],["T_STRING","COL_ATTR_SET",50],["T_WHITESPACE"," ",50],"=",["T_WHITESPACE"," ",50],["T_CONSTANT_ENCAPSED_STRING","'_attribute_set'",50],";",["T_WHITESPACE","\n    ",50],["T_CONST","const",51],["T_WHITESPACE"," ",51],["T_STRING","COL_TYPE",51],["T_WHITESPACE","     ",51],"=",["T_WHITESPACE"," ",51],["T_CONSTANT_ENCAPSED_STRING","'_type'",51],";",["T_WHITESPACE","\n    ",51],["T_CONST","const",52],["T_WHITESPACE"," ",52],["T_STRING","COL_CATEGORY",52],["T_WHITESPACE"," ",52],"=",["T_WHITESPACE"," ",52],["T_CONSTANT_ENCAPSED_STRING","'_category'",52],";",["T_WHITESPACE","\n    ",52],["T_CONST","const",53],["T_WHITESPACE"," ",53],["T_STRING","COL_ROOT_CATEGORY",53],["T_WHITESPACE"," ",53],"=",["T_WHITESPACE"," ",53],["T_CONSTANT_ENCAPSED_STRING","'_root_category'",53],";",["T_WHITESPACE","\n    ",53],["T_CONST","const",54],["T_WHITESPACE"," ",54],["T_STRING","COL_SKU",54],["T_WHITESPACE","      ",54],"=",["T_WHITESPACE"," ",54],["T_CONSTANT_ENCAPSED_STRING","'sku'",54],";",["T_WHITESPACE","\n\n    ",54],["T_DOC_COMMENT","\/**\n     * Pairs of attribute set ID-to-name.\n     *\n     * @var array\n     *\/",56],["T_WHITESPACE","\n    ",60],["T_PROTECTED","protected",61],["T_WHITESPACE"," ",61],["T_VARIABLE","$_attrSetIdToName",61],["T_WHITESPACE"," ",61],"=",["T_WHITESPACE"," ",61],["T_ARRAY","array",61],"(",")",";",["T_WHITESPACE","\n\n    ",61],["T_DOC_COMMENT","\/**\n     * Categories ID to text-path hash.\n     *\n     * @var array\n     *\/",63],["T_WHITESPACE","\n    ",67],["T_PROTECTED","protected",68],["T_WHITESPACE"," ",68],["T_VARIABLE","$_categories",68],["T_WHITESPACE"," ",68],"=",["T_WHITESPACE"," ",68],["T_ARRAY","array",68],"(",")",";",["T_WHITESPACE","\n\n    ",68],["T_DOC_COMMENT","\/**\n     * Root category names for each category\n     *\n     * @var array\n     *\/",70],["T_WHITESPACE","\n    ",74],["T_PROTECTED","protected",75],["T_WHITESPACE"," ",75],["T_VARIABLE","$_rootCategories",75],["T_WHITESPACE"," ",75],"=",["T_WHITESPACE"," ",75],["T_ARRAY","array",75],"(",")",";",["T_WHITESPACE","\n\n    ",75],["T_DOC_COMMENT","\/**\n     * Attributes with index (not label) value.\n     *\n     * @var array\n     *\/",77],["T_WHITESPACE","\n    ",81],["T_PROTECTED","protected",82],["T_WHITESPACE"," ",82],["T_VARIABLE","$_indexValueAttributes",82],["T_WHITESPACE"," ",82],"=",["T_WHITESPACE"," ",82],["T_ARRAY","array",82],"(",["T_WHITESPACE","\n        ",82],["T_CONSTANT_ENCAPSED_STRING","'status'",83],",",["T_WHITESPACE","\n        ",83],["T_CONSTANT_ENCAPSED_STRING","'tax_class_id'",84],",",["T_WHITESPACE","\n        ",84],["T_CONSTANT_ENCAPSED_STRING","'visibility'",85],",",["T_WHITESPACE","\n        ",85],["T_CONSTANT_ENCAPSED_STRING","'gift_message_available'",86],",",["T_WHITESPACE","\n        ",86],["T_CONSTANT_ENCAPSED_STRING","'custom_design'",87],["T_WHITESPACE","\n    ",87],")",";",["T_WHITESPACE","\n\n    ",88],["T_DOC_COMMENT","\/**\n     * Permanent entity columns.\n     *\n     * @var array\n     *\/",90],["T_WHITESPACE","\n    ",94],["T_PROTECTED","protected",95],["T_WHITESPACE"," ",95],["T_VARIABLE","$_permanentAttributes",95],["T_WHITESPACE"," ",95],"=",["T_WHITESPACE"," ",95],["T_ARRAY","array",95],"(",["T_STRING","self",95],["T_DOUBLE_COLON","::",95],["T_STRING","COL_SKU",95],")",";",["T_WHITESPACE","\n\n    ",95],["T_DOC_COMMENT","\/**\n     * Array of supported product types as keys with appropriate model object as value.\n     *\n     * @var array\n     *\/",97],["T_WHITESPACE","\n    ",101],["T_PROTECTED","protected",102],["T_WHITESPACE"," ",102],["T_VARIABLE","$_productTypeModels",102],["T_WHITESPACE"," ",102],"=",["T_WHITESPACE"," ",102],["T_ARRAY","array",102],"(",")",";",["T_WHITESPACE","\n\n    ",102],["T_DOC_COMMENT","\/**\n     * Attribute types\n     *\n     * @var array\n     *\/",104],["T_WHITESPACE","\n    ",108],["T_PROTECTED","protected",109],["T_WHITESPACE"," ",109],["T_VARIABLE","$_attributeTypes",109],["T_WHITESPACE"," ",109],"=",["T_WHITESPACE"," ",109],["T_ARRAY","array",109],"(",")",";",["T_WHITESPACE","\n\n    ",109],["T_DOC_COMMENT","\/**\n     * Attribute scopes\n     *\n     * @var array\n     *\/",111],["T_WHITESPACE","\n    ",115],["T_PROTECTED","protected",116],["T_WHITESPACE"," ",116],["T_VARIABLE","$_attributeScopes",116],["T_WHITESPACE"," ",116],"=",["T_WHITESPACE"," ",116],["T_ARRAY","array",116],"(",")",";",["T_WHITESPACE","\n\n    ",116],["T_DOC_COMMENT","\/**\n     * Constructor.\n     *\n     * @return void\n     *\/",118],["T_WHITESPACE","\n    ",122],["T_PUBLIC","public",123],["T_WHITESPACE"," ",123],["T_FUNCTION","function",123],["T_WHITESPACE"," ",123],["T_STRING","__construct",123],"(",")",["T_WHITESPACE","\n    ",123],"{",["T_WHITESPACE","\n        ",124],["T_STRING","parent",125],["T_DOUBLE_COLON","::",125],["T_STRING","__construct",125],"(",")",";",["T_WHITESPACE","\n\n        ",125],["T_VARIABLE","$this",127],["T_OBJECT_OPERATOR","->",127],["T_STRING","_initTypeModels",127],"(",")",["T_WHITESPACE","\n                ",127],["T_OBJECT_OPERATOR","->",128],["T_STRING","_initAttributes",128],"(",")",["T_WHITESPACE","\n                ",128],["T_OBJECT_OPERATOR","->",129],["T_STRING","_initStores",129],"(",")",["T_WHITESPACE","\n                ",129],["T_OBJECT_OPERATOR","->",130],["T_STRING","_initAttributeSets",130],"(",")",["T_WHITESPACE","\n                ",130],["T_OBJECT_OPERATOR","->",131],["T_STRING","_initWebsites",131],"(",")",["T_WHITESPACE","\n                ",131],["T_OBJECT_OPERATOR","->",132],["T_STRING","_initCategories",132],"(",")",";",["T_WHITESPACE","\n    ",132],"}",["T_WHITESPACE","\n\n    ",133],["T_DOC_COMMENT","\/**\n     * Initialize attribute sets code-to-id pairs.\n     *\n     * @return Mage_ImportExport_Model_Export_Entity_Product\n     *\/",135],["T_WHITESPACE","\n    ",139],["T_PROTECTED","protected",140],["T_WHITESPACE"," ",140],["T_FUNCTION","function",140],["T_WHITESPACE"," ",140],["T_STRING","_initAttributeSets",140],"(",")",["T_WHITESPACE","\n    ",140],"{",["T_WHITESPACE","\n        ",141],["T_VARIABLE","$productTypeId",142],["T_WHITESPACE"," ",142],"=",["T_WHITESPACE"," ",142],["T_STRING","Mage",142],["T_DOUBLE_COLON","::",142],["T_STRING","getModel",142],"(",["T_CONSTANT_ENCAPSED_STRING","'catalog\/product'",142],")",["T_OBJECT_OPERATOR","->",142],["T_STRING","getResource",142],"(",")",["T_OBJECT_OPERATOR","->",142],["T_STRING","getTypeId",142],"(",")",";",["T_WHITESPACE","\n        ",142],["T_FOREACH","foreach",143],["T_WHITESPACE"," ",143],"(",["T_STRING","Mage",143],["T_DOUBLE_COLON","::",143],["T_STRING","getResourceModel",143],"(",["T_CONSTANT_ENCAPSED_STRING","'eav\/entity_attribute_set_collection'",143],")",["T_WHITESPACE","\n                ",143],["T_OBJECT_OPERATOR","->",144],["T_STRING","setEntityTypeFilter",144],"(",["T_VARIABLE","$productTypeId",144],")",["T_WHITESPACE"," ",144],["T_AS","as",144],["T_WHITESPACE"," ",144],["T_VARIABLE","$attributeSet",144],")",["T_WHITESPACE"," ",144],"{",["T_WHITESPACE","\n            ",144],["T_VARIABLE","$this",145],["T_OBJECT_OPERATOR","->",145],["T_STRING","_attrSetIdToName",145],"[",["T_VARIABLE","$attributeSet",145],["T_OBJECT_OPERATOR","->",145],["T_STRING","getId",145],"(",")","]",["T_WHITESPACE"," ",145],"=",["T_WHITESPACE"," ",145],["T_VARIABLE","$attributeSet",145],["T_OBJECT_OPERATOR","->",145],["T_STRING","getAttributeSetName",145],"(",")",";",["T_WHITESPACE","\n        ",145],"}",["T_WHITESPACE","\n        ",146],["T_RETURN","return",147],["T_WHITESPACE"," ",147],["T_VARIABLE","$this",147],";",["T_WHITESPACE","\n    ",147],"}",["T_WHITESPACE","\n\n    ",148],["T_DOC_COMMENT","\/**\n     * Initialize categories ID to text-path hash.\n     *\n     * @return Mage_ImportExport_Model_Export_Entity_Product\n     *\/",150],["T_WHITESPACE","\n    ",154],["T_PROTECTED","protected",155],["T_WHITESPACE"," ",155],["T_FUNCTION","function",155],["T_WHITESPACE"," ",155],["T_STRING","_initCategories",155],"(",")",["T_WHITESPACE","\n    ",155],"{",["T_WHITESPACE","\n        ",156],["T_VARIABLE","$collection",157],["T_WHITESPACE"," ",157],"=",["T_WHITESPACE"," ",157],["T_STRING","Mage",157],["T_DOUBLE_COLON","::",157],["T_STRING","getResourceModel",157],"(",["T_CONSTANT_ENCAPSED_STRING","'catalog\/category_collection'",157],")",["T_OBJECT_OPERATOR","->",157],["T_STRING","addNameToResult",157],"(",")",";",["T_WHITESPACE","\n        ",157],["T_COMMENT","\/* @var $collection Mage_Catalog_Model_Resource_Eav_Mysql4_Category_Collection *\/",158],["T_WHITESPACE","\n        ",158],["T_FOREACH","foreach",159],["T_WHITESPACE"," ",159],"(",["T_VARIABLE","$collection",159],["T_WHITESPACE"," ",159],["T_AS","as",159],["T_WHITESPACE"," ",159],["T_VARIABLE","$category",159],")",["T_WHITESPACE"," ",159],"{",["T_WHITESPACE","\n            ",159],["T_VARIABLE","$structure",160],["T_WHITESPACE"," ",160],"=",["T_WHITESPACE"," ",160],["T_STRING","preg_split",160],"(",["T_CONSTANT_ENCAPSED_STRING","'#\/+#'",160],",",["T_WHITESPACE"," ",160],["T_VARIABLE","$category",160],["T_OBJECT_OPERATOR","->",160],["T_STRING","getPath",160],"(",")",")",";",["T_WHITESPACE","\n            ",160],["T_VARIABLE","$pathSize",161],["T_WHITESPACE","  ",161],"=",["T_WHITESPACE"," ",161],["T_STRING","count",161],"(",["T_VARIABLE","$structure",161],")",";",["T_WHITESPACE","\n            ",161],["T_IF","if",162],["T_WHITESPACE"," ",162],"(",["T_VARIABLE","$pathSize",162],["T_WHITESPACE"," ",162],">",["T_WHITESPACE"," ",162],["T_LNUMBER","1",162],")",["T_WHITESPACE"," ",162],"{",["T_WHITESPACE","\n                ",162],["T_VARIABLE","$path",163],["T_WHITESPACE"," ",163],"=",["T_WHITESPACE"," ",163],["T_ARRAY","array",163],"(",")",";",["T_WHITESPACE","\n                ",163],["T_FOR","for",164],["T_WHITESPACE"," ",164],"(",["T_VARIABLE","$i",164],["T_WHITESPACE"," ",164],"=",["T_WHITESPACE"," ",164],["T_LNUMBER","1",164],";",["T_WHITESPACE"," ",164],["T_VARIABLE","$i",164],["T_WHITESPACE"," ",164],"<",["T_WHITESPACE"," ",164],["T_VARIABLE","$pathSize",164],";",["T_WHITESPACE"," ",164],["T_VARIABLE","$i",164],["T_INC","++",164],")",["T_WHITESPACE"," ",164],"{",["T_WHITESPACE","\n                    ",164],["T_VARIABLE","$path",165],"[","]",["T_WHITESPACE"," ",165],"=",["T_WHITESPACE"," ",165],["T_VARIABLE","$collection",165],["T_OBJECT_OPERATOR","->",165],["T_STRING","getItemById",165],"(",["T_VARIABLE","$structure",165],"[",["T_VARIABLE","$i",165],"]",")",["T_OBJECT_OPERATOR","->",165],["T_STRING","getName",165],"(",")",";",["T_WHITESPACE","\n                ",165],"}",["T_WHITESPACE","\n                ",166],["T_VARIABLE","$this",167],["T_OBJECT_OPERATOR","->",167],["T_STRING","_rootCategories",167],"[",["T_VARIABLE","$category",167],["T_OBJECT_OPERATOR","->",167],["T_STRING","getId",167],"(",")","]",["T_WHITESPACE"," ",167],"=",["T_WHITESPACE"," ",167],["T_STRING","array_shift",167],"(",["T_VARIABLE","$path",167],")",";",["T_WHITESPACE","\n                ",167],["T_IF","if",168],["T_WHITESPACE"," ",168],"(",["T_VARIABLE","$pathSize",168],["T_WHITESPACE"," ",168],">",["T_WHITESPACE"," ",168],["T_LNUMBER","2",168],")",["T_WHITESPACE"," ",168],"{",["T_WHITESPACE","\n                    ",168],["T_VARIABLE","$this",169],["T_OBJECT_OPERATOR","->",169],["T_STRING","_categories",169],"[",["T_VARIABLE","$category",169],["T_OBJECT_OPERATOR","->",169],["T_STRING","getId",169],"(",")","]",["T_WHITESPACE"," ",169],"=",["T_WHITESPACE"," ",169],["T_STRING","implode",169],"(",["T_CONSTANT_ENCAPSED_STRING","'\/'",169],",",["T_WHITESPACE"," ",169],["T_VARIABLE","$path",169],")",";",["T_WHITESPACE","\n                ",169],"}",["T_WHITESPACE","\n            ",170],"}",["T_WHITESPACE","\n\n        ",171],"}",["T_WHITESPACE","\n        ",173],["T_RETURN","return",174],["T_WHITESPACE"," ",174],["T_VARIABLE","$this",174],";",["T_WHITESPACE","\n    ",174],"}",["T_WHITESPACE","\n\n    ",175],["T_DOC_COMMENT","\/**\n     * Initialize product type models.\n     *\n     * @throws Exception\n     * @return Mage_ImportExport_Model_Export_Entity_Product\n     *\/",177],["T_WHITESPACE","\n    ",182],["T_PROTECTED","protected",183],["T_WHITESPACE"," ",183],["T_FUNCTION","function",183],["T_WHITESPACE"," ",183],["T_STRING","_initTypeModels",183],"(",")",["T_WHITESPACE","\n    ",183],"{",["T_WHITESPACE","\n        ",184],["T_VARIABLE","$config",185],["T_WHITESPACE"," ",185],"=",["T_WHITESPACE"," ",185],["T_STRING","Mage",185],["T_DOUBLE_COLON","::",185],["T_STRING","getConfig",185],"(",")",["T_OBJECT_OPERATOR","->",185],["T_STRING","getNode",185],"(",["T_STRING","self",185],["T_DOUBLE_COLON","::",185],["T_STRING","CONFIG_KEY_PRODUCT_TYPES",185],")",["T_OBJECT_OPERATOR","->",185],["T_STRING","asCanonicalArray",185],"(",")",";",["T_WHITESPACE","\n        ",185],["T_FOREACH","foreach",186],["T_WHITESPACE"," ",186],"(",["T_VARIABLE","$config",186],["T_WHITESPACE"," ",186],["T_AS","as",186],["T_WHITESPACE"," ",186],["T_VARIABLE","$type",186],["T_WHITESPACE"," ",186],["T_DOUBLE_ARROW","=>",186],["T_WHITESPACE"," ",186],["T_VARIABLE","$typeModel",186],")",["T_WHITESPACE"," ",186],"{",["T_WHITESPACE","\n            ",186],["T_IF","if",187],["T_WHITESPACE"," ",187],"(","!","(",["T_VARIABLE","$model",187],["T_WHITESPACE"," ",187],"=",["T_WHITESPACE"," ",187],["T_STRING","Mage",187],["T_DOUBLE_COLON","::",187],["T_STRING","getModel",187],"(",["T_VARIABLE","$typeModel",187],",",["T_WHITESPACE"," ",187],["T_ARRAY","array",187],"(",["T_VARIABLE","$this",187],",",["T_WHITESPACE"," ",187],["T_VARIABLE","$type",187],")",")",")",")",["T_WHITESPACE"," ",187],"{",["T_WHITESPACE","\n                ",187],["T_STRING","Mage",188],["T_DOUBLE_COLON","::",188],["T_STRING","throwException",188],"(","\"",["T_ENCAPSED_AND_WHITESPACE","Entity type model '",188],["T_CURLY_OPEN","{",188],["T_VARIABLE","$typeModel",188],"}",["T_ENCAPSED_AND_WHITESPACE","' is not found",188],"\"",")",";",["T_WHITESPACE","\n            ",188],"}",["T_WHITESPACE","\n            ",189],["T_IF","if",190],["T_WHITESPACE"," ",190],"(","!",["T_WHITESPACE"," ",190],["T_VARIABLE","$model",190],["T_WHITESPACE"," ",190],["T_INSTANCEOF","instanceof",190],["T_WHITESPACE"," ",190],["T_STRING","Mage_ImportExport_Model_Export_Entity_Product_Type_Abstract",190],")",["T_WHITESPACE"," ",190],"{",["T_WHITESPACE","\n                ",190],["T_STRING","Mage",191],["T_DOUBLE_COLON","::",191],["T_STRING","throwException",191],"(",["T_WHITESPACE","\n                    ",191],["T_STRING","Mage",192],["T_DOUBLE_COLON","::",192],["T_STRING","helper",192],"(",["T_CONSTANT_ENCAPSED_STRING","'importexport'",192],")",["T_OBJECT_OPERATOR","->",192],["T_STRING","__",192],"(",["T_CONSTANT_ENCAPSED_STRING","'Entity type model must be an instance of Mage_ImportExport_Model_Export_Entity_Product_Type_Abstract'",192],")",["T_WHITESPACE","\n                ",192],")",";",["T_WHITESPACE","\n            ",193],"}",["T_WHITESPACE","\n            ",194],["T_IF","if",195],["T_WHITESPACE"," ",195],"(",["T_VARIABLE","$model",195],["T_OBJECT_OPERATOR","->",195],["T_STRING","isSuitable",195],"(",")",")",["T_WHITESPACE"," ",195],"{",["T_WHITESPACE","\n                ",195],["T_VARIABLE","$this",196],["T_OBJECT_OPERATOR","->",196],["T_STRING","_productTypeModels",196],"[",["T_VARIABLE","$type",196],"]",["T_WHITESPACE"," ",196],"=",["T_WHITESPACE"," ",196],["T_VARIABLE","$model",196],";",["T_WHITESPACE","\n                ",196],["T_VARIABLE","$this",197],["T_OBJECT_OPERATOR","->",197],["T_STRING","_disabledAttrs",197],["T_WHITESPACE","            ",197],"=",["T_WHITESPACE"," ",197],["T_STRING","array_merge",197],"(",["T_VARIABLE","$this",197],["T_OBJECT_OPERATOR","->",197],["T_STRING","_disabledAttrs",197],",",["T_WHITESPACE"," ",197],["T_VARIABLE","$model",197],["T_OBJECT_OPERATOR","->",197],["T_STRING","getDisabledAttrs",197],"(",")",")",";",["T_WHITESPACE","\n                ",197],["T_VARIABLE","$this",198],["T_OBJECT_OPERATOR","->",198],["T_STRING","_indexValueAttributes",198],["T_WHITESPACE","     ",198],"=",["T_WHITESPACE"," ",198],["T_STRING","array_merge",198],"(",["T_WHITESPACE","\n                    ",198],["T_VARIABLE","$this",199],["T_OBJECT_OPERATOR","->",199],["T_STRING","_indexValueAttributes",199],",",["T_WHITESPACE"," ",199],["T_VARIABLE","$model",199],["T_OBJECT_OPERATOR","->",199],["T_STRING","getIndexValueAttributes",199],"(",")",["T_WHITESPACE","\n                ",199],")",";",["T_WHITESPACE","\n            ",200],"}",["T_WHITESPACE","\n        ",201],"}",["T_WHITESPACE","\n        ",202],["T_IF","if",203],["T_WHITESPACE"," ",203],"(","!",["T_VARIABLE","$this",203],["T_OBJECT_OPERATOR","->",203],["T_STRING","_productTypeModels",203],")",["T_WHITESPACE"," ",203],"{",["T_WHITESPACE","\n            ",203],["T_STRING","Mage",204],["T_DOUBLE_COLON","::",204],["T_STRING","throwException",204],"(",["T_STRING","Mage",204],["T_DOUBLE_COLON","::",204],["T_STRING","helper",204],"(",["T_CONSTANT_ENCAPSED_STRING","'importexport'",204],")",["T_OBJECT_OPERATOR","->",204],["T_STRING","__",204],"(",["T_CONSTANT_ENCAPSED_STRING","'There are no product types available for export'",204],")",")",";",["T_WHITESPACE","\n        ",204],"}",["T_WHITESPACE","\n        ",205],["T_VARIABLE","$this",206],["T_OBJECT_OPERATOR","->",206],["T_STRING","_disabledAttrs",206],["T_WHITESPACE"," ",206],"=",["T_WHITESPACE"," ",206],["T_STRING","array_unique",206],"(",["T_VARIABLE","$this",206],["T_OBJECT_OPERATOR","->",206],["T_STRING","_disabledAttrs",206],")",";",["T_WHITESPACE","\n\n        ",206],["T_RETURN","return",208],["T_WHITESPACE"," ",208],["T_VARIABLE","$this",208],";",["T_WHITESPACE","\n    ",208],"}",["T_WHITESPACE","\n\n    ",209],["T_DOC_COMMENT","\/**\n     * Initialize website values.\n     *\n     * @return Mage_ImportExport_Model_Export_Entity_Product\n     *\/",211],["T_WHITESPACE","\n    ",215],["T_PROTECTED","protected",216],["T_WHITESPACE"," ",216],["T_FUNCTION","function",216],["T_WHITESPACE"," ",216],["T_STRING","_initWebsites",216],"(",")",["T_WHITESPACE","\n    ",216],"{",["T_WHITESPACE","\n        ",217],["T_DOC_COMMENT","\/** @var $website Mage_Core_Model_Website *\/",218],["T_WHITESPACE","\n        ",218],["T_FOREACH","foreach",219],["T_WHITESPACE"," ",219],"(",["T_STRING","Mage",219],["T_DOUBLE_COLON","::",219],["T_STRING","app",219],"(",")",["T_OBJECT_OPERATOR","->",219],["T_STRING","getWebsites",219],"(",")",["T_WHITESPACE"," ",219],["T_AS","as",219],["T_WHITESPACE"," ",219],["T_VARIABLE","$website",219],")",["T_WHITESPACE"," ",219],"{",["T_WHITESPACE","\n            ",219],["T_VARIABLE","$this",220],["T_OBJECT_OPERATOR","->",220],["T_STRING","_websiteIdToCode",220],"[",["T_VARIABLE","$website",220],["T_OBJECT_OPERATOR","->",220],["T_STRING","getId",220],"(",")","]",["T_WHITESPACE"," ",220],"=",["T_WHITESPACE"," ",220],["T_VARIABLE","$website",220],["T_OBJECT_OPERATOR","->",220],["T_STRING","getCode",220],"(",")",";",["T_WHITESPACE","\n        ",220],"}",["T_WHITESPACE","\n        ",221],["T_RETURN","return",222],["T_WHITESPACE"," ",222],["T_VARIABLE","$this",222],";",["T_WHITESPACE","\n    ",222],"}",["T_WHITESPACE","\n\n    ",223],["T_DOC_COMMENT","\/**\n     * Prepare products tier prices\n     *\n     * @param  array $productIds\n     * @return array\n     *\/",225],["T_WHITESPACE","\n    ",230],["T_PROTECTED","protected",231],["T_WHITESPACE"," ",231],["T_FUNCTION","function",231],["T_WHITESPACE"," ",231],["T_STRING","_prepareTierPrices",231],"(",["T_ARRAY","array",231],["T_WHITESPACE"," ",231],["T_VARIABLE","$productIds",231],")",["T_WHITESPACE","\n    ",231],"{",["T_WHITESPACE","\n        ",232],["T_IF","if",233],["T_WHITESPACE"," ",233],"(",["T_EMPTY","empty",233],"(",["T_VARIABLE","$productIds",233],")",")",["T_WHITESPACE"," ",233],"{",["T_WHITESPACE","\n            ",233],["T_RETURN","return",234],["T_WHITESPACE"," ",234],["T_ARRAY","array",234],"(",")",";",["T_WHITESPACE","\n        ",234],"}",["T_WHITESPACE","\n        ",235],["T_VARIABLE","$resource",236],["T_WHITESPACE"," ",236],"=",["T_WHITESPACE"," ",236],["T_STRING","Mage",236],["T_DOUBLE_COLON","::",236],["T_STRING","getSingleton",236],"(",["T_CONSTANT_ENCAPSED_STRING","'core\/resource'",236],")",";",["T_WHITESPACE","\n        ",236],["T_VARIABLE","$select",237],["T_WHITESPACE"," ",237],"=",["T_WHITESPACE"," ",237],["T_VARIABLE","$this",237],["T_OBJECT_OPERATOR","->",237],["T_STRING","_connection",237],["T_OBJECT_OPERATOR","->",237],["T_STRING","select",237],"(",")",["T_WHITESPACE","\n            ",237],["T_OBJECT_OPERATOR","->",238],["T_STRING","from",238],"(",["T_VARIABLE","$resource",238],["T_OBJECT_OPERATOR","->",238],["T_STRING","getTableName",238],"(",["T_CONSTANT_ENCAPSED_STRING","'catalog\/product_attribute_tier_price'",238],")",")",["T_WHITESPACE","\n            ",238],["T_OBJECT_OPERATOR","->",239],["T_STRING","where",239],"(",["T_CONSTANT_ENCAPSED_STRING","'entity_id IN(?)'",239],",",["T_WHITESPACE"," ",239],["T_VARIABLE","$productIds",239],")",";",["T_WHITESPACE","\n\n        ",239],["T_VARIABLE","$rowTierPrices",241],["T_WHITESPACE"," ",241],"=",["T_WHITESPACE"," ",241],["T_ARRAY","array",241],"(",")",";",["T_WHITESPACE","\n        ",241],["T_VARIABLE","$stmt",242],["T_WHITESPACE"," ",242],"=",["T_WHITESPACE"," ",242],["T_VARIABLE","$this",242],["T_OBJECT_OPERATOR","->",242],["T_STRING","_connection",242],["T_OBJECT_OPERATOR","->",242],["T_STRING","query",242],"(",["T_VARIABLE","$select",242],")",";",["T_WHITESPACE","\n        ",242],["T_WHILE","while",243],["T_WHITESPACE"," ",243],"(",["T_VARIABLE","$tierRow",243],["T_WHITESPACE"," ",243],"=",["T_WHITESPACE"," ",243],["T_VARIABLE","$stmt",243],["T_OBJECT_OPERATOR","->",243],["T_STRING","fetch",243],"(",")",")",["T_WHITESPACE"," ",243],"{",["T_WHITESPACE","\n            ",243],["T_VARIABLE","$rowTierPrices",244],"[",["T_VARIABLE","$tierRow",244],"[",["T_CONSTANT_ENCAPSED_STRING","'entity_id'",244],"]","]","[","]",["T_WHITESPACE"," ",244],"=",["T_WHITESPACE"," ",244],["T_ARRAY","array",244],"(",["T_WHITESPACE","\n                ",244],["T_CONSTANT_ENCAPSED_STRING","'_tier_price_customer_group'",245],["T_WHITESPACE"," ",245],["T_DOUBLE_ARROW","=>",245],["T_WHITESPACE"," ",245],["T_VARIABLE","$tierRow",245],"[",["T_CONSTANT_ENCAPSED_STRING","'all_groups'",245],"]",["T_WHITESPACE","\n                                                ",245],"?",["T_WHITESPACE"," ",246],["T_STRING","self",246],["T_DOUBLE_COLON","::",246],["T_STRING","VALUE_ALL",246],["T_WHITESPACE"," ",246],":",["T_WHITESPACE"," ",246],["T_VARIABLE","$tierRow",246],"[",["T_CONSTANT_ENCAPSED_STRING","'customer_group_id'",246],"]",",",["T_WHITESPACE","\n                ",246],["T_CONSTANT_ENCAPSED_STRING","'_tier_price_website'",247],["T_WHITESPACE","        ",247],["T_DOUBLE_ARROW","=>",247],["T_WHITESPACE"," ",247],["T_LNUMBER","0",247],["T_WHITESPACE"," ",247],["T_IS_EQUAL","==",247],["T_WHITESPACE"," ",247],["T_VARIABLE","$tierRow",247],"[",["T_CONSTANT_ENCAPSED_STRING","'website_id'",247],"]",["T_WHITESPACE","\n                                                ",247],"?",["T_WHITESPACE"," ",248],["T_STRING","self",248],["T_DOUBLE_COLON","::",248],["T_STRING","VALUE_ALL",248],["T_WHITESPACE","\n                                                ",248],":",["T_WHITESPACE"," ",249],["T_VARIABLE","$this",249],["T_OBJECT_OPERATOR","->",249],["T_STRING","_websiteIdToCode",249],"[",["T_VARIABLE","$tierRow",249],"[",["T_CONSTANT_ENCAPSED_STRING","'website_id'",249],"]","]",",",["T_WHITESPACE","\n                ",249],["T_CONSTANT_ENCAPSED_STRING","'_tier_price_qty'",250],["T_WHITESPACE","            ",250],["T_DOUBLE_ARROW","=>",250],["T_WHITESPACE"," ",250],["T_VARIABLE","$tierRow",250],"[",["T_CONSTANT_ENCAPSED_STRING","'qty'",250],"]",",",["T_WHITESPACE","\n                ",250],["T_CONSTANT_ENCAPSED_STRING","'_tier_price_price'",251],["T_WHITESPACE","          ",251],["T_DOUBLE_ARROW","=>",251],["T_WHITESPACE"," ",251],["T_VARIABLE","$tierRow",251],"[",["T_CONSTANT_ENCAPSED_STRING","'value'",251],"]",["T_WHITESPACE","\n            ",251],")",";",["T_WHITESPACE","\n        ",252],"}",["T_WHITESPACE","\n\n        ",253],["T_RETURN","return",255],["T_WHITESPACE"," ",255],["T_VARIABLE","$rowTierPrices",255],";",["T_WHITESPACE","\n    ",255],"}",["T_WHITESPACE","\n\n    ",256],["T_DOC_COMMENT","\/**\n     * Prepare products group prices\n     *\n     * @param  array $productIds\n     * @return array\n     *\/",258],["T_WHITESPACE","\n    ",263],["T_PROTECTED","protected",264],["T_WHITESPACE"," ",264],["T_FUNCTION","function",264],["T_WHITESPACE"," ",264],["T_STRING","_prepareGroupPrices",264],"(",["T_ARRAY","array",264],["T_WHITESPACE"," ",264],["T_VARIABLE","$productIds",264],")",["T_WHITESPACE","\n    ",264],"{",["T_WHITESPACE","\n        ",265],["T_IF","if",266],["T_WHITESPACE"," ",266],"(",["T_EMPTY","empty",266],"(",["T_VARIABLE","$productIds",266],")",")",["T_WHITESPACE"," ",266],"{",["T_WHITESPACE","\n            ",266],["T_RETURN","return",267],["T_WHITESPACE"," ",267],["T_ARRAY","array",267],"(",")",";",["T_WHITESPACE","\n        ",267],"}",["T_WHITESPACE","\n        ",268],["T_VARIABLE","$resource",269],["T_WHITESPACE"," ",269],"=",["T_WHITESPACE"," ",269],["T_STRING","Mage",269],["T_DOUBLE_COLON","::",269],["T_STRING","getSingleton",269],"(",["T_CONSTANT_ENCAPSED_STRING","'core\/resource'",269],")",";",["T_WHITESPACE","\n        ",269],["T_VARIABLE","$select",270],["T_WHITESPACE"," ",270],"=",["T_WHITESPACE"," ",270],["T_VARIABLE","$this",270],["T_OBJECT_OPERATOR","->",270],["T_STRING","_connection",270],["T_OBJECT_OPERATOR","->",270],["T_STRING","select",270],"(",")",["T_WHITESPACE","\n            ",270],["T_OBJECT_OPERATOR","->",271],["T_STRING","from",271],"(",["T_VARIABLE","$resource",271],["T_OBJECT_OPERATOR","->",271],["T_STRING","getTableName",271],"(",["T_CONSTANT_ENCAPSED_STRING","'catalog\/product_attribute_group_price'",271],")",")",["T_WHITESPACE","\n            ",271],["T_OBJECT_OPERATOR","->",272],["T_STRING","where",272],"(",["T_CONSTANT_ENCAPSED_STRING","'entity_id IN(?)'",272],",",["T_WHITESPACE"," ",272],["T_VARIABLE","$productIds",272],")",";",["T_WHITESPACE","\n\n        ",272],["T_VARIABLE","$rowGroupPrices",274],["T_WHITESPACE"," ",274],"=",["T_WHITESPACE"," ",274],["T_ARRAY","array",274],"(",")",";",["T_WHITESPACE","\n        ",274],["T_VARIABLE","$statement",275],["T_WHITESPACE"," ",275],"=",["T_WHITESPACE"," ",275],["T_VARIABLE","$this",275],["T_OBJECT_OPERATOR","->",275],["T_STRING","_connection",275],["T_OBJECT_OPERATOR","->",275],["T_STRING","query",275],"(",["T_VARIABLE","$select",275],")",";",["T_WHITESPACE","\n        ",275],["T_WHILE","while",276],["T_WHITESPACE"," ",276],"(",["T_VARIABLE","$groupRow",276],["T_WHITESPACE"," ",276],"=",["T_WHITESPACE"," ",276],["T_VARIABLE","$statement",276],["T_OBJECT_OPERATOR","->",276],["T_STRING","fetch",276],"(",")",")",["T_WHITESPACE"," ",276],"{",["T_WHITESPACE","\n            ",276],["T_VARIABLE","$rowGroupPrices",277],"[",["T_VARIABLE","$groupRow",277],"[",["T_CONSTANT_ENCAPSED_STRING","'entity_id'",277],"]","]","[","]",["T_WHITESPACE"," ",277],"=",["T_WHITESPACE"," ",277],["T_ARRAY","array",277],"(",["T_WHITESPACE","\n                ",277],["T_CONSTANT_ENCAPSED_STRING","'_group_price_customer_group'",278],["T_WHITESPACE"," ",278],["T_DOUBLE_ARROW","=>",278],["T_WHITESPACE"," ",278],["T_VARIABLE","$groupRow",278],"[",["T_CONSTANT_ENCAPSED_STRING","'all_groups'",278],"]",["T_WHITESPACE","\n                    ",278],"?",["T_WHITESPACE"," ",279],["T_STRING","self",279],["T_DOUBLE_COLON","::",279],["T_STRING","VALUE_ALL",279],["T_WHITESPACE","\n                    ",279],":",["T_WHITESPACE"," ",280],["T_VARIABLE","$groupRow",280],"[",["T_CONSTANT_ENCAPSED_STRING","'customer_group_id'",280],"]",",",["T_WHITESPACE","\n                ",280],["T_CONSTANT_ENCAPSED_STRING","'_group_price_website'",281],["T_WHITESPACE","        ",281],["T_DOUBLE_ARROW","=>",281],["T_WHITESPACE"," ",281],"(",["T_LNUMBER","0",281],["T_WHITESPACE"," ",281],["T_IS_EQUAL","==",281],["T_WHITESPACE"," ",281],["T_VARIABLE","$groupRow",281],"[",["T_CONSTANT_ENCAPSED_STRING","'website_id'",281],"]",")",["T_WHITESPACE","\n                    ",281],"?",["T_WHITESPACE"," ",282],["T_STRING","self",282],["T_DOUBLE_COLON","::",282],["T_STRING","VALUE_ALL",282],["T_WHITESPACE","\n                    ",282],":",["T_WHITESPACE"," ",283],["T_VARIABLE","$this",283],["T_OBJECT_OPERATOR","->",283],["T_STRING","_websiteIdToCode",283],"[",["T_VARIABLE","$groupRow",283],"[",["T_CONSTANT_ENCAPSED_STRING","'website_id'",283],"]","]",",",["T_WHITESPACE","\n                ",283],["T_CONSTANT_ENCAPSED_STRING","'_group_price_price'",284],["T_WHITESPACE","          ",284],["T_DOUBLE_ARROW","=>",284],["T_WHITESPACE"," ",284],["T_VARIABLE","$groupRow",284],"[",["T_CONSTANT_ENCAPSED_STRING","'value'",284],"]",["T_WHITESPACE","\n            ",284],")",";",["T_WHITESPACE","\n        ",285],"}",["T_WHITESPACE","\n\n        ",286],["T_RETURN","return",288],["T_WHITESPACE"," ",288],["T_VARIABLE","$rowGroupPrices",288],";",["T_WHITESPACE","\n    ",288],"}",["T_WHITESPACE","\n\n    ",289],["T_DOC_COMMENT","\/**\n     * Prepare products media gallery\n     *\n     * @param  array $productIds\n     * @return array\n     *\/",291],["T_WHITESPACE","\n    ",296],["T_PROTECTED","protected",297],["T_WHITESPACE"," ",297],["T_FUNCTION","function",297],["T_WHITESPACE"," ",297],["T_STRING","_prepareMediaGallery",297],"(",["T_ARRAY","array",297],["T_WHITESPACE"," ",297],["T_VARIABLE","$productIds",297],")",["T_WHITESPACE","\n    ",297],"{",["T_WHITESPACE","\n        ",298],["T_IF","if",299],["T_WHITESPACE"," ",299],"(",["T_EMPTY","empty",299],"(",["T_VARIABLE","$productIds",299],")",")",["T_WHITESPACE"," ",299],"{",["T_WHITESPACE","\n            ",299],["T_RETURN","return",300],["T_WHITESPACE"," ",300],["T_ARRAY","array",300],"(",")",";",["T_WHITESPACE","\n        ",300],"}",["T_WHITESPACE","\n        ",301],["T_VARIABLE","$resource",302],["T_WHITESPACE"," ",302],"=",["T_WHITESPACE"," ",302],["T_STRING","Mage",302],["T_DOUBLE_COLON","::",302],["T_STRING","getSingleton",302],"(",["T_CONSTANT_ENCAPSED_STRING","'core\/resource'",302],")",";",["T_WHITESPACE","\n        ",302],["T_VARIABLE","$select",303],["T_WHITESPACE"," ",303],"=",["T_WHITESPACE"," ",303],["T_VARIABLE","$this",303],["T_OBJECT_OPERATOR","->",303],["T_STRING","_connection",303],["T_OBJECT_OPERATOR","->",303],["T_STRING","select",303],"(",")",["T_WHITESPACE","\n                ",303],["T_OBJECT_OPERATOR","->",304],["T_STRING","from",304],"(",["T_WHITESPACE","\n                        ",304],["T_ARRAY","array",305],"(",["T_CONSTANT_ENCAPSED_STRING","'mg'",305],["T_WHITESPACE"," ",305],["T_DOUBLE_ARROW","=>",305],["T_WHITESPACE"," ",305],["T_VARIABLE","$resource",305],["T_OBJECT_OPERATOR","->",305],["T_STRING","getTableName",305],"(",["T_CONSTANT_ENCAPSED_STRING","'catalog\/product_attribute_media_gallery'",305],")",")",",",["T_WHITESPACE","\n                        ",305],["T_ARRAY","array",306],"(",["T_WHITESPACE","\n                            ",306],["T_CONSTANT_ENCAPSED_STRING","'mg.entity_id'",307],",",["T_WHITESPACE"," ",307],["T_CONSTANT_ENCAPSED_STRING","'mg.attribute_id'",307],",",["T_WHITESPACE"," ",307],["T_CONSTANT_ENCAPSED_STRING","'filename'",307],["T_WHITESPACE"," ",307],["T_DOUBLE_ARROW","=>",307],["T_WHITESPACE"," ",307],["T_CONSTANT_ENCAPSED_STRING","'mg.value'",307],",",["T_WHITESPACE"," ",307],["T_CONSTANT_ENCAPSED_STRING","'mgv.label'",307],",",["T_WHITESPACE","\n                            ",307],["T_CONSTANT_ENCAPSED_STRING","'mgv.position'",308],",",["T_WHITESPACE"," ",308],["T_CONSTANT_ENCAPSED_STRING","'mgv.disabled'",308],["T_WHITESPACE","\n                        ",308],")",["T_WHITESPACE","\n                ",309],")",["T_WHITESPACE","\n                ",310],["T_OBJECT_OPERATOR","->",311],["T_STRING","joinLeft",311],"(",["T_WHITESPACE","\n                        ",311],["T_ARRAY","array",312],"(",["T_CONSTANT_ENCAPSED_STRING","'mgv'",312],["T_WHITESPACE"," ",312],["T_DOUBLE_ARROW","=>",312],["T_WHITESPACE"," ",312],["T_VARIABLE","$resource",312],["T_OBJECT_OPERATOR","->",312],["T_STRING","getTableName",312],"(",["T_CONSTANT_ENCAPSED_STRING","'catalog\/product_attribute_media_gallery_value'",312],")",")",",",["T_WHITESPACE","\n                        ",312],["T_CONSTANT_ENCAPSED_STRING","'(mg.value_id = mgv.value_id AND mgv.store_id = 0)'",313],",",["T_WHITESPACE","\n                        ",313],["T_ARRAY","array",314],"(",")",["T_WHITESPACE","\n                ",314],")",["T_WHITESPACE","\n                ",315],["T_OBJECT_OPERATOR","->",316],["T_STRING","where",316],"(",["T_CONSTANT_ENCAPSED_STRING","'entity_id IN(?)'",316],",",["T_WHITESPACE"," ",316],["T_VARIABLE","$productIds",316],")",";",["T_WHITESPACE","\n\n        ",316],["T_VARIABLE","$rowMediaGallery",318],["T_WHITESPACE"," ",318],"=",["T_WHITESPACE"," ",318],["T_ARRAY","array",318],"(",")",";",["T_WHITESPACE","\n        ",318],["T_VARIABLE","$stmt",319],["T_WHITESPACE"," ",319],"=",["T_WHITESPACE"," ",319],["T_VARIABLE","$this",319],["T_OBJECT_OPERATOR","->",319],["T_STRING","_connection",319],["T_OBJECT_OPERATOR","->",319],["T_STRING","query",319],"(",["T_VARIABLE","$select",319],")",";",["T_WHITESPACE","\n        ",319],["T_WHILE","while",320],["T_WHITESPACE"," ",320],"(",["T_VARIABLE","$mediaRow",320],["T_WHITESPACE"," ",320],"=",["T_WHITESPACE"," ",320],["T_VARIABLE","$stmt",320],["T_OBJECT_OPERATOR","->",320],["T_STRING","fetch",320],"(",")",")",["T_WHITESPACE"," ",320],"{",["T_WHITESPACE","\n            ",320],["T_VARIABLE","$rowMediaGallery",321],"[",["T_VARIABLE","$mediaRow",321],"[",["T_CONSTANT_ENCAPSED_STRING","'entity_id'",321],"]","]","[","]",["T_WHITESPACE"," ",321],"=",["T_WHITESPACE"," ",321],["T_ARRAY","array",321],"(",["T_WHITESPACE","\n                ",321],["T_CONSTANT_ENCAPSED_STRING","'_media_attribute_id'",322],["T_WHITESPACE","   ",322],["T_DOUBLE_ARROW","=>",322],["T_WHITESPACE"," ",322],["T_VARIABLE","$mediaRow",322],"[",["T_CONSTANT_ENCAPSED_STRING","'attribute_id'",322],"]",",",["T_WHITESPACE","\n                ",322],["T_CONSTANT_ENCAPSED_STRING","'_media_image'",323],["T_WHITESPACE","          ",323],["T_DOUBLE_ARROW","=>",323],["T_WHITESPACE"," ",323],["T_VARIABLE","$mediaRow",323],"[",["T_CONSTANT_ENCAPSED_STRING","'filename'",323],"]",",",["T_WHITESPACE","\n                ",323],["T_CONSTANT_ENCAPSED_STRING","'_media_lable'",324],["T_WHITESPACE","          ",324],["T_DOUBLE_ARROW","=>",324],["T_WHITESPACE"," ",324],["T_VARIABLE","$mediaRow",324],"[",["T_CONSTANT_ENCAPSED_STRING","'label'",324],"]",",",["T_WHITESPACE","\n                ",324],["T_CONSTANT_ENCAPSED_STRING","'_media_position'",325],["T_WHITESPACE","       ",325],["T_DOUBLE_ARROW","=>",325],["T_WHITESPACE"," ",325],["T_VARIABLE","$mediaRow",325],"[",["T_CONSTANT_ENCAPSED_STRING","'position'",325],"]",",",["T_WHITESPACE","\n                ",325],["T_CONSTANT_ENCAPSED_STRING","'_media_is_disabled'",326],["T_WHITESPACE","    ",326],["T_DOUBLE_ARROW","=>",326],["T_WHITESPACE"," ",326],["T_VARIABLE","$mediaRow",326],"[",["T_CONSTANT_ENCAPSED_STRING","'disabled'",326],"]",["T_WHITESPACE","\n            ",326],")",";",["T_WHITESPACE","\n        ",327],"}",["T_WHITESPACE","\n\n        ",328],["T_RETURN","return",330],["T_WHITESPACE"," ",330],["T_VARIABLE","$rowMediaGallery",330],";",["T_WHITESPACE","\n    ",330],"}",["T_WHITESPACE","\n\n    ",331],["T_DOC_COMMENT","\/**\n     * Prepare catalog inventory\n     *\n     * @param  array $productIds\n     * @return array\n     *\/",333],["T_WHITESPACE","\n    ",338],["T_PROTECTED","protected",339],["T_WHITESPACE"," ",339],["T_FUNCTION","function",339],["T_WHITESPACE"," ",339],["T_STRING","_prepareCatalogInventory",339],"(",["T_ARRAY","array",339],["T_WHITESPACE"," ",339],["T_VARIABLE","$productIds",339],")",["T_WHITESPACE","\n    ",339],"{",["T_WHITESPACE","\n        ",340],["T_IF","if",341],["T_WHITESPACE"," ",341],"(",["T_EMPTY","empty",341],"(",["T_VARIABLE","$productIds",341],")",")",["T_WHITESPACE"," ",341],"{",["T_WHITESPACE","\n            ",341],["T_RETURN","return",342],["T_WHITESPACE"," ",342],["T_ARRAY","array",342],"(",")",";",["T_WHITESPACE","\n        ",342],"}",["T_WHITESPACE","\n        ",343],["T_VARIABLE","$select",344],["T_WHITESPACE"," ",344],"=",["T_WHITESPACE"," ",344],["T_VARIABLE","$this",344],["T_OBJECT_OPERATOR","->",344],["T_STRING","_connection",344],["T_OBJECT_OPERATOR","->",344],["T_STRING","select",344],"(",")",["T_WHITESPACE","\n            ",344],["T_OBJECT_OPERATOR","->",345],["T_STRING","from",345],"(",["T_STRING","Mage",345],["T_DOUBLE_COLON","::",345],["T_STRING","getResourceModel",345],"(",["T_CONSTANT_ENCAPSED_STRING","'cataloginventory\/stock_item'",345],")",["T_OBJECT_OPERATOR","->",345],["T_STRING","getMainTable",345],"(",")",")",["T_WHITESPACE","\n            ",345],["T_OBJECT_OPERATOR","->",346],["T_STRING","where",346],"(",["T_CONSTANT_ENCAPSED_STRING","'product_id IN (?)'",346],",",["T_WHITESPACE"," ",346],["T_VARIABLE","$productIds",346],")",";",["T_WHITESPACE","\n\n        ",346],["T_VARIABLE","$stmt",348],["T_WHITESPACE"," ",348],"=",["T_WHITESPACE"," ",348],["T_VARIABLE","$this",348],["T_OBJECT_OPERATOR","->",348],["T_STRING","_connection",348],["T_OBJECT_OPERATOR","->",348],["T_STRING","query",348],"(",["T_VARIABLE","$select",348],")",";",["T_WHITESPACE","\n        ",348],["T_VARIABLE","$stockItemRows",349],["T_WHITESPACE"," ",349],"=",["T_WHITESPACE"," ",349],["T_ARRAY","array",349],"(",")",";",["T_WHITESPACE","\n        ",349],["T_WHILE","while",350],["T_WHITESPACE"," ",350],"(",["T_VARIABLE","$stockItemRow",350],["T_WHITESPACE"," ",350],"=",["T_WHITESPACE"," ",350],["T_VARIABLE","$stmt",350],["T_OBJECT_OPERATOR","->",350],["T_STRING","fetch",350],"(",")",")",["T_WHITESPACE"," ",350],"{",["T_WHITESPACE","\n            ",350],["T_VARIABLE","$productId",351],["T_WHITESPACE"," ",351],"=",["T_WHITESPACE"," ",351],["T_VARIABLE","$stockItemRow",351],"[",["T_CONSTANT_ENCAPSED_STRING","'product_id'",351],"]",";",["T_WHITESPACE","\n            ",351],["T_UNSET","unset",352],"(",["T_WHITESPACE","\n                ",352],["T_VARIABLE","$stockItemRow",353],"[",["T_CONSTANT_ENCAPSED_STRING","'item_id'",353],"]",",",["T_WHITESPACE"," ",353],["T_VARIABLE","$stockItemRow",353],"[",["T_CONSTANT_ENCAPSED_STRING","'product_id'",353],"]",",",["T_WHITESPACE"," ",353],["T_VARIABLE","$stockItemRow",353],"[",["T_CONSTANT_ENCAPSED_STRING","'low_stock_date'",353],"]",",",["T_WHITESPACE","\n                ",353],["T_VARIABLE","$stockItemRow",354],"[",["T_CONSTANT_ENCAPSED_STRING","'stock_id'",354],"]",",",["T_WHITESPACE"," ",354],["T_VARIABLE","$stockItemRow",354],"[",["T_CONSTANT_ENCAPSED_STRING","'stock_status_changed_automatically'",354],"]",["T_WHITESPACE","\n            ",354],")",";",["T_WHITESPACE","\n            ",355],["T_VARIABLE","$stockItemRows",356],"[",["T_VARIABLE","$productId",356],"]",["T_WHITESPACE"," ",356],"=",["T_WHITESPACE"," ",356],["T_VARIABLE","$stockItemRow",356],";",["T_WHITESPACE","\n        ",356],"}",["T_WHITESPACE","\n        ",357],["T_RETURN","return",358],["T_WHITESPACE"," ",358],["T_VARIABLE","$stockItemRows",358],";",["T_WHITESPACE","\n    ",358],"}",["T_WHITESPACE","\n\n    ",359],["T_DOC_COMMENT","\/**\n     * Prepare product links\n     *\n     * @param  array $productIds\n     * @return array\n     *\/",361],["T_WHITESPACE","\n    ",366],["T_PROTECTED","protected",367],["T_WHITESPACE"," ",367],["T_FUNCTION","function",367],["T_WHITESPACE"," ",367],["T_STRING","_prepareLinks",367],"(",["T_ARRAY","array",367],["T_WHITESPACE"," ",367],["T_VARIABLE","$productIds",367],")",["T_WHITESPACE","\n    ",367],"{",["T_WHITESPACE","\n        ",368],["T_IF","if",369],["T_WHITESPACE"," ",369],"(",["T_EMPTY","empty",369],"(",["T_VARIABLE","$productIds",369],")",")",["T_WHITESPACE"," ",369],"{",["T_WHITESPACE","\n            ",369],["T_RETURN","return",370],["T_WHITESPACE"," ",370],["T_ARRAY","array",370],"(",")",";",["T_WHITESPACE","\n        ",370],"}",["T_WHITESPACE","\n        ",371],["T_VARIABLE","$resource",372],["T_WHITESPACE"," ",372],"=",["T_WHITESPACE"," ",372],["T_STRING","Mage",372],["T_DOUBLE_COLON","::",372],["T_STRING","getSingleton",372],"(",["T_CONSTANT_ENCAPSED_STRING","'core\/resource'",372],")",";",["T_WHITESPACE","\n        ",372],["T_VARIABLE","$adapter",373],["T_WHITESPACE"," ",373],"=",["T_WHITESPACE"," ",373],["T_VARIABLE","$this",373],["T_OBJECT_OPERATOR","->",373],["T_STRING","_connection",373],";",["T_WHITESPACE","\n        ",373],["T_VARIABLE","$select",374],["T_WHITESPACE"," ",374],"=",["T_WHITESPACE"," ",374],["T_VARIABLE","$adapter",374],["T_OBJECT_OPERATOR","->",374],["T_STRING","select",374],"(",")",["T_WHITESPACE","\n            ",374],["T_OBJECT_OPERATOR","->",375],["T_STRING","from",375],"(",["T_WHITESPACE","\n                ",375],["T_ARRAY","array",376],"(",["T_CONSTANT_ENCAPSED_STRING","'cpl'",376],["T_WHITESPACE"," ",376],["T_DOUBLE_ARROW","=>",376],["T_WHITESPACE"," ",376],["T_VARIABLE","$resource",376],["T_OBJECT_OPERATOR","->",376],["T_STRING","getTableName",376],"(",["T_CONSTANT_ENCAPSED_STRING","'catalog\/product_link'",376],")",")",",",["T_WHITESPACE","\n                ",376],["T_ARRAY","array",377],"(",["T_WHITESPACE","\n                    ",377],["T_CONSTANT_ENCAPSED_STRING","'cpl.product_id'",378],",",["T_WHITESPACE"," ",378],["T_CONSTANT_ENCAPSED_STRING","'cpe.sku'",378],",",["T_WHITESPACE"," ",378],["T_CONSTANT_ENCAPSED_STRING","'cpl.link_type_id'",378],",",["T_WHITESPACE","\n                    ",378],["T_CONSTANT_ENCAPSED_STRING","'position'",379],["T_WHITESPACE"," ",379],["T_DOUBLE_ARROW","=>",379],["T_WHITESPACE"," ",379],["T_CONSTANT_ENCAPSED_STRING","'cplai.value'",379],",",["T_WHITESPACE"," ",379],["T_CONSTANT_ENCAPSED_STRING","'default_qty'",379],["T_WHITESPACE"," ",379],["T_DOUBLE_ARROW","=>",379],["T_WHITESPACE"," ",379],["T_CONSTANT_ENCAPSED_STRING","'cplad.value'",379],["T_WHITESPACE","\n                ",379],")",["T_WHITESPACE","\n            ",380],")",["T_WHITESPACE","\n            ",381],["T_OBJECT_OPERATOR","->",382],["T_STRING","joinLeft",382],"(",["T_WHITESPACE","\n                ",382],["T_ARRAY","array",383],"(",["T_CONSTANT_ENCAPSED_STRING","'cpe'",383],["T_WHITESPACE"," ",383],["T_DOUBLE_ARROW","=>",383],["T_WHITESPACE"," ",383],["T_VARIABLE","$resource",383],["T_OBJECT_OPERATOR","->",383],["T_STRING","getTableName",383],"(",["T_CONSTANT_ENCAPSED_STRING","'catalog\/product'",383],")",")",",",["T_WHITESPACE","\n                ",383],["T_CONSTANT_ENCAPSED_STRING","'(cpe.entity_id = cpl.linked_product_id)'",384],",",["T_WHITESPACE","\n                ",384],["T_ARRAY","array",385],"(",")",["T_WHITESPACE","\n            ",385],")",["T_WHITESPACE","\n            ",386],["T_OBJECT_OPERATOR","->",387],["T_STRING","joinLeft",387],"(",["T_WHITESPACE","\n                ",387],["T_ARRAY","array",388],"(",["T_CONSTANT_ENCAPSED_STRING","'cpla'",388],["T_WHITESPACE"," ",388],["T_DOUBLE_ARROW","=>",388],["T_WHITESPACE"," ",388],["T_VARIABLE","$resource",388],["T_OBJECT_OPERATOR","->",388],["T_STRING","getTableName",388],"(",["T_CONSTANT_ENCAPSED_STRING","'catalog\/product_link_attribute'",388],")",")",",",["T_WHITESPACE","\n                ",388],["T_VARIABLE","$adapter",389],["T_OBJECT_OPERATOR","->",389],["T_STRING","quoteInto",389],"(",["T_WHITESPACE","\n                    ",389],["T_CONSTANT_ENCAPSED_STRING","'(cpla.link_type_id = cpl.link_type_id AND cpla.product_link_attribute_code = ?)'",390],",",["T_WHITESPACE","\n                    ",390],["T_CONSTANT_ENCAPSED_STRING","'position'",391],["T_WHITESPACE","\n                ",391],")",",",["T_WHITESPACE","\n                ",392],["T_ARRAY","array",393],"(",")",["T_WHITESPACE","\n            ",393],")",["T_WHITESPACE","\n            ",394],["T_OBJECT_OPERATOR","->",395],["T_STRING","joinLeft",395],"(",["T_WHITESPACE","\n                ",395],["T_ARRAY","array",396],"(",["T_CONSTANT_ENCAPSED_STRING","'cplaq'",396],["T_WHITESPACE"," ",396],["T_DOUBLE_ARROW","=>",396],["T_WHITESPACE"," ",396],["T_VARIABLE","$resource",396],["T_OBJECT_OPERATOR","->",396],["T_STRING","getTableName",396],"(",["T_CONSTANT_ENCAPSED_STRING","'catalog\/product_link_attribute'",396],")",")",",",["T_WHITESPACE","\n                ",396],["T_VARIABLE","$adapter",397],["T_OBJECT_OPERATOR","->",397],["T_STRING","quoteInto",397],"(",["T_WHITESPACE","\n                    ",397],["T_CONSTANT_ENCAPSED_STRING","'(cplaq.link_type_id = cpl.link_type_id AND cplaq.product_link_attribute_code = ?)'",398],",",["T_WHITESPACE","\n                    ",398],["T_CONSTANT_ENCAPSED_STRING","'qty'",399],["T_WHITESPACE","\n                ",399],")",",",["T_WHITESPACE","\n                ",400],["T_ARRAY","array",401],"(",")",["T_WHITESPACE","\n            ",401],")",["T_WHITESPACE","\n            ",402],["T_OBJECT_OPERATOR","->",403],["T_STRING","joinLeft",403],"(",["T_WHITESPACE","\n                ",403],["T_ARRAY","array",404],"(",["T_CONSTANT_ENCAPSED_STRING","'cplai'",404],["T_WHITESPACE"," ",404],["T_DOUBLE_ARROW","=>",404],["T_WHITESPACE"," ",404],["T_VARIABLE","$resource",404],["T_OBJECT_OPERATOR","->",404],["T_STRING","getTableName",404],"(",["T_CONSTANT_ENCAPSED_STRING","'catalog\/product_link_attribute_int'",404],")",")",",",["T_WHITESPACE","\n                ",404],["T_CONSTANT_ENCAPSED_STRING","'(cplai.link_id = cpl.link_id AND cplai.product_link_attribute_id = cpla.product_link_attribute_id)'",405],",",["T_WHITESPACE","\n                ",405],["T_ARRAY","array",406],"(",")",["T_WHITESPACE","\n            ",406],")",["T_WHITESPACE","\n            ",407],["T_OBJECT_OPERATOR","->",408],["T_STRING","joinLeft",408],"(",["T_WHITESPACE","\n                ",408],["T_ARRAY","array",409],"(",["T_CONSTANT_ENCAPSED_STRING","'cplad'",409],["T_WHITESPACE"," ",409],["T_DOUBLE_ARROW","=>",409],["T_WHITESPACE"," ",409],["T_VARIABLE","$resource",409],["T_OBJECT_OPERATOR","->",409],["T_STRING","getTableName",409],"(",["T_CONSTANT_ENCAPSED_STRING","'catalog\/product_link_attribute_decimal'",409],")",")",",",["T_WHITESPACE","\n                ",409],["T_CONSTANT_ENCAPSED_STRING","'(cplad.link_id = cpl.link_id AND cplad.product_link_attribute_id = cplaq.product_link_attribute_id)'",410],",",["T_WHITESPACE","\n                ",410],["T_ARRAY","array",411],"(",")",["T_WHITESPACE","\n            ",411],")",["T_WHITESPACE","\n            ",412],["T_OBJECT_OPERATOR","->",413],["T_STRING","where",413],"(",["T_CONSTANT_ENCAPSED_STRING","'cpl.link_type_id IN (?)'",413],",",["T_WHITESPACE"," ",413],["T_ARRAY","array",413],"(",["T_WHITESPACE","\n                ",413],["T_STRING","Mage_Catalog_Model_Product_Link",414],["T_DOUBLE_COLON","::",414],["T_STRING","LINK_TYPE_RELATED",414],",",["T_WHITESPACE","\n                ",414],["T_STRING","Mage_Catalog_Model_Product_Link",415],["T_DOUBLE_COLON","::",415],["T_STRING","LINK_TYPE_UPSELL",415],",",["T_WHITESPACE","\n                ",415],["T_STRING","Mage_Catalog_Model_Product_Link",416],["T_DOUBLE_COLON","::",416],["T_STRING","LINK_TYPE_CROSSSELL",416],",",["T_WHITESPACE","\n                ",416],["T_STRING","Mage_Catalog_Model_Product_Link",417],["T_DOUBLE_COLON","::",417],["T_STRING","LINK_TYPE_GROUPED",417],["T_WHITESPACE","\n            ",417],")",")",["T_WHITESPACE","\n            ",418],["T_OBJECT_OPERATOR","->",419],["T_STRING","where",419],"(",["T_CONSTANT_ENCAPSED_STRING","'cpl.product_id IN (?)'",419],",",["T_WHITESPACE"," ",419],["T_VARIABLE","$productIds",419],")",";",["T_WHITESPACE","\n\n        ",419],["T_VARIABLE","$stmt",421],["T_WHITESPACE"," ",421],"=",["T_WHITESPACE"," ",421],["T_VARIABLE","$adapter",421],["T_OBJECT_OPERATOR","->",421],["T_STRING","query",421],"(",["T_VARIABLE","$select",421],")",";",["T_WHITESPACE","\n        ",421],["T_VARIABLE","$linksRows",422],["T_WHITESPACE"," ",422],"=",["T_WHITESPACE"," ",422],["T_ARRAY","array",422],"(",")",";",["T_WHITESPACE","\n        ",422],["T_WHILE","while",423],["T_WHITESPACE"," ",423],"(",["T_VARIABLE","$linksRow",423],["T_WHITESPACE"," ",423],"=",["T_WHITESPACE"," ",423],["T_VARIABLE","$stmt",423],["T_OBJECT_OPERATOR","->",423],["T_STRING","fetch",423],"(",")",")",["T_WHITESPACE"," ",423],"{",["T_WHITESPACE","\n            ",423],["T_VARIABLE","$linksRows",424],"[",["T_VARIABLE","$linksRow",424],"[",["T_CONSTANT_ENCAPSED_STRING","'product_id'",424],"]","]","[",["T_VARIABLE","$linksRow",424],"[",["T_CONSTANT_ENCAPSED_STRING","'link_type_id'",424],"]","]","[","]",["T_WHITESPACE"," ",424],"=",["T_WHITESPACE"," ",424],["T_ARRAY","array",424],"(",["T_WHITESPACE","\n                ",424],["T_CONSTANT_ENCAPSED_STRING","'sku'",425],["T_WHITESPACE","         ",425],["T_DOUBLE_ARROW","=>",425],["T_WHITESPACE"," ",425],["T_VARIABLE","$linksRow",425],"[",["T_CONSTANT_ENCAPSED_STRING","'sku'",425],"]",",",["T_WHITESPACE","\n                ",425],["T_CONSTANT_ENCAPSED_STRING","'position'",426],["T_WHITESPACE","    ",426],["T_DOUBLE_ARROW","=>",426],["T_WHITESPACE"," ",426],["T_VARIABLE","$linksRow",426],"[",["T_CONSTANT_ENCAPSED_STRING","'position'",426],"]",",",["T_WHITESPACE","\n                ",426],["T_CONSTANT_ENCAPSED_STRING","'default_qty'",427],["T_WHITESPACE"," ",427],["T_DOUBLE_ARROW","=>",427],["T_WHITESPACE"," ",427],["T_VARIABLE","$linksRow",427],"[",["T_CONSTANT_ENCAPSED_STRING","'default_qty'",427],"]",["T_WHITESPACE","\n            ",427],")",";",["T_WHITESPACE","\n        ",428],"}",["T_WHITESPACE","\n\n        ",429],["T_RETURN","return",431],["T_WHITESPACE"," ",431],["T_VARIABLE","$linksRows",431],";",["T_WHITESPACE","\n    ",431],"}",["T_WHITESPACE","\n\n    ",432],["T_DOC_COMMENT","\/**\n     * Prepare configurable product data\n     *\n     * @deprecated since 1.6.1.0\n     * @see Mage_Catalog_Model_Resource_Product_Type_Configurable::getConfigurableOptions()\n     * @param  array $productIds\n     * @return array\n     *\/",434],["T_WHITESPACE","\n    ",441],["T_PROTECTED","protected",442],["T_WHITESPACE"," ",442],["T_FUNCTION","function",442],["T_WHITESPACE"," ",442],["T_STRING","_prepareConfigurableProductData",442],"(",["T_ARRAY","array",442],["T_WHITESPACE"," ",442],["T_VARIABLE","$productIds",442],")",["T_WHITESPACE","\n    ",442],"{",["T_WHITESPACE","\n        ",443],["T_IF","if",444],["T_WHITESPACE"," ",444],"(",["T_EMPTY","empty",444],"(",["T_VARIABLE","$productIds",444],")",")",["T_WHITESPACE"," ",444],"{",["T_WHITESPACE","\n            ",444],["T_RETURN","return",445],["T_WHITESPACE"," ",445],["T_ARRAY","array",445],"(",")",";",["T_WHITESPACE","\n        ",445],"}",["T_WHITESPACE","\n        ",446],["T_VARIABLE","$resource",447],["T_WHITESPACE"," ",447],"=",["T_WHITESPACE"," ",447],["T_STRING","Mage",447],["T_DOUBLE_COLON","::",447],["T_STRING","getSingleton",447],"(",["T_CONSTANT_ENCAPSED_STRING","'core\/resource'",447],")",";",["T_WHITESPACE","\n        ",447],["T_VARIABLE","$select",448],["T_WHITESPACE"," ",448],"=",["T_WHITESPACE"," ",448],["T_VARIABLE","$this",448],["T_OBJECT_OPERATOR","->",448],["T_STRING","_connection",448],["T_OBJECT_OPERATOR","->",448],["T_STRING","select",448],"(",")",["T_WHITESPACE","\n            ",448],["T_OBJECT_OPERATOR","->",449],["T_STRING","from",449],"(",["T_WHITESPACE","\n                ",449],["T_ARRAY","array",450],"(",["T_CONSTANT_ENCAPSED_STRING","'cpsl'",450],["T_WHITESPACE"," ",450],["T_DOUBLE_ARROW","=>",450],["T_WHITESPACE"," ",450],["T_VARIABLE","$resource",450],["T_OBJECT_OPERATOR","->",450],["T_STRING","getTableName",450],"(",["T_CONSTANT_ENCAPSED_STRING","'catalog\/product_super_link'",450],")",")",",",["T_WHITESPACE","\n                ",450],["T_ARRAY","array",451],"(",["T_CONSTANT_ENCAPSED_STRING","'cpsl.parent_id'",451],",",["T_WHITESPACE"," ",451],["T_CONSTANT_ENCAPSED_STRING","'cpe.sku'",451],")",["T_WHITESPACE","\n            ",451],")",["T_WHITESPACE","\n            ",452],["T_OBJECT_OPERATOR","->",453],["T_STRING","joinLeft",453],"(",["T_WHITESPACE","\n                ",453],["T_ARRAY","array",454],"(",["T_CONSTANT_ENCAPSED_STRING","'cpe'",454],["T_WHITESPACE"," ",454],["T_DOUBLE_ARROW","=>",454],["T_WHITESPACE"," ",454],["T_VARIABLE","$resource",454],["T_OBJECT_OPERATOR","->",454],["T_STRING","getTableName",454],"(",["T_CONSTANT_ENCAPSED_STRING","'catalog\/product'",454],")",")",",",["T_WHITESPACE","\n                ",454],["T_CONSTANT_ENCAPSED_STRING","'(cpe.entity_id = cpsl.product_id)'",455],",",["T_WHITESPACE","\n                ",455],["T_ARRAY","array",456],"(",")",["T_WHITESPACE","\n            ",456],")",["T_WHITESPACE","\n            ",457],["T_OBJECT_OPERATOR","->",458],["T_STRING","where",458],"(",["T_CONSTANT_ENCAPSED_STRING","'parent_id IN (?)'",458],",",["T_WHITESPACE"," ",458],["T_VARIABLE","$productIds",458],")",";",["T_WHITESPACE","\n        ",458],["T_VARIABLE","$stmt",459],["T_WHITESPACE"," ",459],"=",["T_WHITESPACE"," ",459],["T_VARIABLE","$this",459],["T_OBJECT_OPERATOR","->",459],["T_STRING","_connection",459],["T_OBJECT_OPERATOR","->",459],["T_STRING","query",459],"(",["T_VARIABLE","$select",459],")",";",["T_WHITESPACE","\n        ",459],["T_VARIABLE","$configurableData",460],["T_WHITESPACE"," ",460],"=",["T_WHITESPACE"," ",460],["T_ARRAY","array",460],"(",")",";",["T_WHITESPACE","\n        ",460],["T_WHILE","while",461],["T_WHITESPACE"," ",461],"(",["T_VARIABLE","$cfgLinkRow",461],["T_WHITESPACE"," ",461],"=",["T_WHITESPACE"," ",461],["T_VARIABLE","$stmt",461],["T_OBJECT_OPERATOR","->",461],["T_STRING","fetch",461],"(",")",")",["T_WHITESPACE"," ",461],"{",["T_WHITESPACE","\n            ",461],["T_VARIABLE","$configurableData",462],"[",["T_VARIABLE","$cfgLinkRow",462],"[",["T_CONSTANT_ENCAPSED_STRING","'parent_id'",462],"]","]","[","]",["T_WHITESPACE"," ",462],"=",["T_WHITESPACE"," ",462],["T_ARRAY","array",462],"(",["T_CONSTANT_ENCAPSED_STRING","'_super_products_sku'",462],["T_WHITESPACE"," ",462],["T_DOUBLE_ARROW","=>",462],["T_WHITESPACE"," ",462],["T_VARIABLE","$cfgLinkRow",462],"[",["T_CONSTANT_ENCAPSED_STRING","'sku'",462],"]",")",";",["T_WHITESPACE","\n        ",462],"}",["T_WHITESPACE","\n\n        ",463],["T_RETURN","return",465],["T_WHITESPACE"," ",465],["T_VARIABLE","$configurableData",465],";",["T_WHITESPACE","\n    ",465],"}",["T_WHITESPACE","\n\n    ",466],["T_DOC_COMMENT","\/**\n     * Prepare configurable product price\n     *\n     * @deprecated since 1.6.1.0\n     * @see Mage_Catalog_Model_Resource_Product_Type_Configurable::getConfigurableOptions()\n     * @param  array $productIds\n     * @return array\n     *\/",468],["T_WHITESPACE","\n    ",475],["T_PROTECTED","protected",476],["T_WHITESPACE"," ",476],["T_FUNCTION","function",476],["T_WHITESPACE"," ",476],["T_STRING","_prepareConfigurableProductPrice",476],"(",["T_ARRAY","array",476],["T_WHITESPACE"," ",476],["T_VARIABLE","$productIds",476],")",["T_WHITESPACE","\n    ",476],"{",["T_WHITESPACE","\n        ",477],["T_IF","if",478],["T_WHITESPACE"," ",478],"(",["T_EMPTY","empty",478],"(",["T_VARIABLE","$productIds",478],")",")",["T_WHITESPACE"," ",478],"{",["T_WHITESPACE","\n            ",478],["T_RETURN","return",479],["T_WHITESPACE"," ",479],["T_ARRAY","array",479],"(",")",";",["T_WHITESPACE","\n        ",479],"}",["T_WHITESPACE","\n        ",480],["T_VARIABLE","$resource",481],["T_WHITESPACE"," ",481],"=",["T_WHITESPACE"," ",481],["T_STRING","Mage",481],["T_DOUBLE_COLON","::",481],["T_STRING","getSingleton",481],"(",["T_CONSTANT_ENCAPSED_STRING","'core\/resource'",481],")",";",["T_WHITESPACE","\n        ",481],["T_VARIABLE","$select",482],["T_WHITESPACE"," ",482],"=",["T_WHITESPACE"," ",482],["T_VARIABLE","$this",482],["T_OBJECT_OPERATOR","->",482],["T_STRING","_connection",482],["T_OBJECT_OPERATOR","->",482],["T_STRING","select",482],"(",")",["T_WHITESPACE","\n            ",482],["T_OBJECT_OPERATOR","->",483],["T_STRING","from",483],"(",["T_WHITESPACE","\n                ",483],["T_ARRAY","array",484],"(",["T_CONSTANT_ENCAPSED_STRING","'cpsa'",484],["T_WHITESPACE"," ",484],["T_DOUBLE_ARROW","=>",484],["T_WHITESPACE"," ",484],["T_VARIABLE","$resource",484],["T_OBJECT_OPERATOR","->",484],["T_STRING","getTableName",484],"(",["T_CONSTANT_ENCAPSED_STRING","'catalog\/product_super_attribute'",484],")",")",",",["T_WHITESPACE","\n                ",484],["T_ARRAY","array",485],"(",["T_WHITESPACE","\n                    ",485],["T_CONSTANT_ENCAPSED_STRING","'cpsa.product_id'",486],",",["T_WHITESPACE"," ",486],["T_CONSTANT_ENCAPSED_STRING","'ea.attribute_code'",486],",",["T_WHITESPACE"," ",486],["T_CONSTANT_ENCAPSED_STRING","'eaov.value'",486],",",["T_WHITESPACE"," ",486],["T_CONSTANT_ENCAPSED_STRING","'cpsap.pricing_value'",486],",",["T_WHITESPACE"," ",486],["T_CONSTANT_ENCAPSED_STRING","'cpsap.is_percent'",486],["T_WHITESPACE","\n                ",486],")",["T_WHITESPACE","\n            ",487],")",["T_WHITESPACE","\n            ",488],["T_OBJECT_OPERATOR","->",489],["T_STRING","joinLeft",489],"(",["T_WHITESPACE","\n                ",489],["T_ARRAY","array",490],"(",["T_CONSTANT_ENCAPSED_STRING","'cpsap'",490],["T_WHITESPACE"," ",490],["T_DOUBLE_ARROW","=>",490],["T_WHITESPACE"," ",490],["T_VARIABLE","$resource",490],["T_OBJECT_OPERATOR","->",490],["T_STRING","getTableName",490],"(",["T_CONSTANT_ENCAPSED_STRING","'catalog\/product_super_attribute_pricing'",490],")",")",",",["T_WHITESPACE","\n                ",490],["T_CONSTANT_ENCAPSED_STRING","'(cpsap.product_super_attribute_id = cpsa.product_super_attribute_id)'",491],",",["T_WHITESPACE","\n                ",491],["T_ARRAY","array",492],"(",")",["T_WHITESPACE","\n            ",492],")",["T_WHITESPACE","\n            ",493],["T_OBJECT_OPERATOR","->",494],["T_STRING","joinLeft",494],"(",["T_WHITESPACE","\n                ",494],["T_ARRAY","array",495],"(",["T_CONSTANT_ENCAPSED_STRING","'ea'",495],["T_WHITESPACE"," ",495],["T_DOUBLE_ARROW","=>",495],["T_WHITESPACE"," ",495],["T_VARIABLE","$resource",495],["T_OBJECT_OPERATOR","->",495],["T_STRING","getTableName",495],"(",["T_CONSTANT_ENCAPSED_STRING","'eav\/attribute'",495],")",")",",",["T_WHITESPACE","\n                ",495],["T_CONSTANT_ENCAPSED_STRING","'(ea.attribute_id = cpsa.attribute_id)'",496],",",["T_WHITESPACE","\n                ",496],["T_ARRAY","array",497],"(",")",["T_WHITESPACE","\n            ",497],")",["T_WHITESPACE","\n            ",498],["T_OBJECT_OPERATOR","->",499],["T_STRING","joinLeft",499],"(",["T_WHITESPACE","\n                ",499],["T_ARRAY","array",500],"(",["T_CONSTANT_ENCAPSED_STRING","'eaov'",500],["T_WHITESPACE"," ",500],["T_DOUBLE_ARROW","=>",500],["T_WHITESPACE"," ",500],["T_VARIABLE","$resource",500],["T_OBJECT_OPERATOR","->",500],["T_STRING","getTableName",500],"(",["T_CONSTANT_ENCAPSED_STRING","'eav\/attribute_option_value'",500],")",")",",",["T_WHITESPACE","\n                ",500],["T_CONSTANT_ENCAPSED_STRING","'(eaov.option_id = cpsap.value_index AND store_id = 0)'",501],",",["T_WHITESPACE","\n                ",501],["T_ARRAY","array",502],"(",")",["T_WHITESPACE","\n            ",502],")",["T_WHITESPACE","\n            ",503],["T_OBJECT_OPERATOR","->",504],["T_STRING","where",504],"(",["T_CONSTANT_ENCAPSED_STRING","'cpsa.product_id IN (?)'",504],",",["T_WHITESPACE"," ",504],["T_VARIABLE","$productIds",504],")",";",["T_WHITESPACE","\n        ",504],["T_VARIABLE","$configurablePrice",505],["T_WHITESPACE"," ",505],"=",["T_WHITESPACE"," ",505],["T_ARRAY","array",505],"(",")",";",["T_WHITESPACE","\n        ",505],["T_VARIABLE","$stmt",506],["T_WHITESPACE"," ",506],"=",["T_WHITESPACE"," ",506],["T_VARIABLE","$this",506],["T_OBJECT_OPERATOR","->",506],["T_STRING","_connection",506],["T_OBJECT_OPERATOR","->",506],["T_STRING","query",506],"(",["T_VARIABLE","$select",506],")",";",["T_WHITESPACE","\n        ",506],["T_WHILE","while",507],["T_WHITESPACE"," ",507],"(",["T_VARIABLE","$priceRow",507],["T_WHITESPACE"," ",507],"=",["T_WHITESPACE"," ",507],["T_VARIABLE","$stmt",507],["T_OBJECT_OPERATOR","->",507],["T_STRING","fetch",507],"(",")",")",["T_WHITESPACE"," ",507],"{",["T_WHITESPACE","\n            ",507],["T_VARIABLE","$configurablePrice",508],"[",["T_VARIABLE","$priceRow",508],"[",["T_CONSTANT_ENCAPSED_STRING","'product_id'",508],"]","]","[","]",["T_WHITESPACE"," ",508],"=",["T_WHITESPACE"," ",508],["T_ARRAY","array",508],"(",["T_WHITESPACE","\n                ",508],["T_CONSTANT_ENCAPSED_STRING","'_super_attribute_code'",509],["T_WHITESPACE","       ",509],["T_DOUBLE_ARROW","=>",509],["T_WHITESPACE"," ",509],["T_VARIABLE","$priceRow",509],"[",["T_CONSTANT_ENCAPSED_STRING","'attribute_code'",509],"]",",",["T_WHITESPACE","\n                ",509],["T_CONSTANT_ENCAPSED_STRING","'_super_attribute_option'",510],["T_WHITESPACE","     ",510],["T_DOUBLE_ARROW","=>",510],["T_WHITESPACE"," ",510],["T_VARIABLE","$priceRow",510],"[",["T_CONSTANT_ENCAPSED_STRING","'value'",510],"]",",",["T_WHITESPACE","\n                ",510],["T_CONSTANT_ENCAPSED_STRING","'_super_attribute_price_corr'",511],["T_WHITESPACE"," ",511],["T_DOUBLE_ARROW","=>",511],["T_WHITESPACE"," ",511],["T_VARIABLE","$priceRow",511],"[",["T_CONSTANT_ENCAPSED_STRING","'pricing_value'",511],"]",["T_WHITESPACE"," ",511],".",["T_WHITESPACE"," ",511],"(",["T_VARIABLE","$priceRow",511],"[",["T_CONSTANT_ENCAPSED_STRING","'is_percent'",511],"]",["T_WHITESPACE"," ",511],"?",["T_WHITESPACE"," ",511],["T_CONSTANT_ENCAPSED_STRING","'%'",511],["T_WHITESPACE"," ",511],":",["T_WHITESPACE"," ",511],["T_CONSTANT_ENCAPSED_STRING","''",511],")",["T_WHITESPACE","\n            ",511],")",";",["T_WHITESPACE","\n        ",512],"}",["T_WHITESPACE","\n        ",513],["T_RETURN","return",514],["T_WHITESPACE"," ",514],["T_VARIABLE","$configurablePrice",514],";",["T_WHITESPACE","\n    ",514],"}",["T_WHITESPACE","\n\n    ",515],["T_DOC_COMMENT","\/**\n     * Update data row with information about categories. Return true, if data row was updated\n     *\n     * @param array $dataRow\n     * @param array $rowCategories\n     * @param int $productId\n     * @return bool\n     *\/",517],["T_WHITESPACE","\n    ",524],["T_PROTECTED","protected",525],["T_WHITESPACE"," ",525],["T_FUNCTION","function",525],["T_WHITESPACE"," ",525],["T_STRING","_updateDataWithCategoryColumns",525],"(","&",["T_VARIABLE","$dataRow",525],",",["T_WHITESPACE"," ",525],"&",["T_VARIABLE","$rowCategories",525],",",["T_WHITESPACE"," ",525],["T_VARIABLE","$productId",525],")",["T_WHITESPACE","\n    ",525],"{",["T_WHITESPACE","\n        ",526],["T_IF","if",527],["T_WHITESPACE"," ",527],"(","!",["T_ISSET","isset",527],"(",["T_VARIABLE","$rowCategories",527],"[",["T_VARIABLE","$productId",527],"]",")",")",["T_WHITESPACE"," ",527],"{",["T_WHITESPACE","\n            ",527],["T_RETURN","return",528],["T_WHITESPACE"," ",528],["T_STRING","false",528],";",["T_WHITESPACE","\n        ",528],"}",["T_WHITESPACE","\n\n        ",529],["T_VARIABLE","$categoryId",531],["T_WHITESPACE"," ",531],"=",["T_WHITESPACE"," ",531],["T_STRING","array_shift",531],"(",["T_VARIABLE","$rowCategories",531],"[",["T_VARIABLE","$productId",531],"]",")",";",["T_WHITESPACE","\n        ",531],["T_IF","if",532],["T_WHITESPACE"," ",532],"(",["T_ISSET","isset",532],"(",["T_VARIABLE","$this",532],["T_OBJECT_OPERATOR","->",532],["T_STRING","_rootCategories",532],"[",["T_VARIABLE","$categoryId",532],"]",")",")",["T_WHITESPACE"," ",532],"{",["T_WHITESPACE","\n            ",532],["T_VARIABLE","$dataRow",533],"[",["T_STRING","self",533],["T_DOUBLE_COLON","::",533],["T_STRING","COL_ROOT_CATEGORY",533],"]",["T_WHITESPACE"," ",533],"=",["T_WHITESPACE"," ",533],["T_VARIABLE","$this",533],["T_OBJECT_OPERATOR","->",533],["T_STRING","_rootCategories",533],"[",["T_VARIABLE","$categoryId",533],"]",";",["T_WHITESPACE","\n        ",533],"}",["T_WHITESPACE","\n        ",534],["T_IF","if",535],["T_WHITESPACE"," ",535],"(",["T_ISSET","isset",535],"(",["T_VARIABLE","$this",535],["T_OBJECT_OPERATOR","->",535],["T_STRING","_categories",535],"[",["T_VARIABLE","$categoryId",535],"]",")",")",["T_WHITESPACE"," ",535],"{",["T_WHITESPACE","\n            ",535],["T_VARIABLE","$dataRow",536],"[",["T_STRING","self",536],["T_DOUBLE_COLON","::",536],["T_STRING","COL_CATEGORY",536],"]",["T_WHITESPACE"," ",536],"=",["T_WHITESPACE"," ",536],["T_VARIABLE","$this",536],["T_OBJECT_OPERATOR","->",536],["T_STRING","_categories",536],"[",["T_VARIABLE","$categoryId",536],"]",";",["T_WHITESPACE","\n        ",536],"}",["T_WHITESPACE","\n\n        ",537],["T_RETURN","return",539],["T_WHITESPACE"," ",539],["T_STRING","true",539],";",["T_WHITESPACE","\n    ",539],"}",["T_WHITESPACE","\n\n    ",540],["T_DOC_COMMENT","\/**\n     * Export process and return contents of temporary file.\n     *\n     * @deprecated after ver 1.9.2.4 use $this->exportFile() instead\n     *\n     * @return string\n     *\/",542],["T_WHITESPACE","\n    ",548],["T_PUBLIC","public",549],["T_WHITESPACE"," ",549],["T_FUNCTION","function",549],["T_WHITESPACE"," ",549],["T_STRING","export",549],"(",")",["T_WHITESPACE","\n    ",549],"{",["T_WHITESPACE","\n        ",550],["T_VARIABLE","$this",551],["T_OBJECT_OPERATOR","->",551],["T_STRING","_prepareExport",551],"(",")",";",["T_WHITESPACE","\n\n        ",551],["T_RETURN","return",553],["T_WHITESPACE"," ",553],["T_VARIABLE","$this",553],["T_OBJECT_OPERATOR","->",553],["T_STRING","getWriter",553],"(",")",["T_OBJECT_OPERATOR","->",553],["T_STRING","getContents",553],"(",")",";",["T_WHITESPACE","\n    ",553],"}",["T_WHITESPACE","\n\n    ",554],["T_DOC_COMMENT","\/**\n     * Export process and return temporary file through array.\n     *\n     * This method will return following array:\n     *\n     * array(\n     *     'rows'  => count of written rows,\n     *     'value' => path to created file\n     * )\n     *\n     * @return array\n     *\/",556],["T_WHITESPACE","\n    ",567],["T_PUBLIC","public",568],["T_WHITESPACE"," ",568],["T_FUNCTION","function",568],["T_WHITESPACE"," ",568],["T_STRING","exportFile",568],"(",")",["T_WHITESPACE","\n    ",568],"{",["T_WHITESPACE","\n        ",569],["T_VARIABLE","$this",570],["T_OBJECT_OPERATOR","->",570],["T_STRING","_prepareExport",570],"(",")",";",["T_WHITESPACE","\n\n        ",570],["T_VARIABLE","$writer",572],["T_WHITESPACE"," ",572],"=",["T_WHITESPACE"," ",572],["T_VARIABLE","$this",572],["T_OBJECT_OPERATOR","->",572],["T_STRING","getWriter",572],"(",")",";",["T_WHITESPACE","\n\n        ",572],["T_RETURN","return",574],["T_WHITESPACE"," ",574],["T_ARRAY","array",574],"(",["T_WHITESPACE","\n            ",574],["T_CONSTANT_ENCAPSED_STRING","'rows'",575],["T_WHITESPACE","  ",575],["T_DOUBLE_ARROW","=>",575],["T_WHITESPACE"," ",575],["T_VARIABLE","$writer",575],["T_OBJECT_OPERATOR","->",575],["T_STRING","getRowsCount",575],"(",")",",",["T_WHITESPACE","\n            ",575],["T_CONSTANT_ENCAPSED_STRING","'value'",576],["T_WHITESPACE"," ",576],["T_DOUBLE_ARROW","=>",576],["T_WHITESPACE"," ",576],["T_VARIABLE","$writer",576],["T_OBJECT_OPERATOR","->",576],["T_STRING","getDestination",576],"(",")",["T_WHITESPACE","\n        ",576],")",";",["T_WHITESPACE","\n    ",577],"}",["T_WHITESPACE","\n\n    ",578],["T_DOC_COMMENT","\/**\n     * Prepare data for export.\n     *\n     * @return void\n     *\/",580],["T_WHITESPACE","\n    ",584],["T_PROTECTED","protected",585],["T_WHITESPACE"," ",585],["T_FUNCTION","function",585],["T_WHITESPACE"," ",585],["T_STRING","_prepareExport",585],"(",")",["T_WHITESPACE","\n    ",585],"{",["T_WHITESPACE","\n        ",586],["T_COMMENT","\/\/Execution time may be very long\n",587],["T_WHITESPACE","        ",588],["T_STRING","set_time_limit",588],"(",["T_LNUMBER","0",588],")",";",["T_WHITESPACE","\n\n        ",588],["T_DOC_COMMENT","\/** @var $collection Mage_Catalog_Model_Resource_Eav_Mysql4_Product_Collection *\/",590],["T_WHITESPACE","\n        ",590],["T_VARIABLE","$validAttrCodes",591],["T_WHITESPACE","  ",591],"=",["T_WHITESPACE"," ",591],["T_VARIABLE","$this",591],["T_OBJECT_OPERATOR","->",591],["T_STRING","_getExportAttrCodes",591],"(",")",";",["T_WHITESPACE","\n        ",591],["T_VARIABLE","$writer",592],["T_WHITESPACE","          ",592],"=",["T_WHITESPACE"," ",592],["T_VARIABLE","$this",592],["T_OBJECT_OPERATOR","->",592],["T_STRING","getWriter",592],"(",")",";",["T_WHITESPACE","\n        ",592],["T_VARIABLE","$defaultStoreId",593],["T_WHITESPACE","  ",593],"=",["T_WHITESPACE"," ",593],["T_STRING","Mage_Catalog_Model_Abstract",593],["T_DOUBLE_COLON","::",593],["T_STRING","DEFAULT_STORE_ID",593],";",["T_WHITESPACE","\n\n        ",593],["T_VARIABLE","$memoryLimit",595],["T_WHITESPACE"," ",595],"=",["T_WHITESPACE"," ",595],["T_STRING","trim",595],"(",["T_STRING","ini_get",595],"(",["T_CONSTANT_ENCAPSED_STRING","'memory_limit'",595],")",")",";",["T_WHITESPACE","\n        ",595],["T_VARIABLE","$lastMemoryLimitLetter",596],["T_WHITESPACE"," ",596],"=",["T_WHITESPACE"," ",596],["T_STRING","strtolower",596],"(",["T_VARIABLE","$memoryLimit",596],"[",["T_STRING","strlen",596],"(",["T_VARIABLE","$memoryLimit",596],")","-",["T_LNUMBER","1",596],"]",")",";",["T_WHITESPACE","\n        ",596],["T_SWITCH","switch",597],"(",["T_VARIABLE","$lastMemoryLimitLetter",597],")",["T_WHITESPACE"," ",597],"{",["T_WHITESPACE","\n            ",597],["T_CASE","case",598],["T_WHITESPACE"," ",598],["T_CONSTANT_ENCAPSED_STRING","'g'",598],":",["T_WHITESPACE","\n                ",598],["T_VARIABLE","$memoryLimit",599],["T_WHITESPACE"," ",599],["T_MUL_EQUAL","*=",599],["T_WHITESPACE"," ",599],["T_LNUMBER","1024",599],";",["T_WHITESPACE","\n            ",599],["T_CASE","case",600],["T_WHITESPACE"," ",600],["T_CONSTANT_ENCAPSED_STRING","'m'",600],":",["T_WHITESPACE","\n                ",600],["T_VARIABLE","$memoryLimit",601],["T_WHITESPACE"," ",601],["T_MUL_EQUAL","*=",601],["T_WHITESPACE"," ",601],["T_LNUMBER","1024",601],";",["T_WHITESPACE","\n            ",601],["T_CASE","case",602],["T_WHITESPACE"," ",602],["T_CONSTANT_ENCAPSED_STRING","'k'",602],":",["T_WHITESPACE","\n                ",602],["T_VARIABLE","$memoryLimit",603],["T_WHITESPACE"," ",603],["T_MUL_EQUAL","*=",603],["T_WHITESPACE"," ",603],["T_LNUMBER","1024",603],";",["T_WHITESPACE","\n                ",603],["T_BREAK","break",604],";",["T_WHITESPACE","\n            ",604],["T_DEFAULT","default",605],":",["T_WHITESPACE","\n                ",605],["T_COMMENT","\/\/ minimum memory required by Magento\n",606],["T_WHITESPACE","                ",607],["T_VARIABLE","$memoryLimit",607],["T_WHITESPACE"," ",607],"=",["T_WHITESPACE"," ",607],["T_LNUMBER","250000000",607],";",["T_WHITESPACE","\n        ",607],"}",["T_WHITESPACE","\n\n        ",608],["T_COMMENT","\/\/ Tested one product to have up to such size\n",610],["T_WHITESPACE","        ",611],["T_VARIABLE","$memoryPerProduct",611],["T_WHITESPACE"," ",611],"=",["T_WHITESPACE"," ",611],["T_LNUMBER","100000",611],";",["T_WHITESPACE","\n        ",611],["T_COMMENT","\/\/ Decrease memory limit to have supply\n",612],["T_WHITESPACE","        ",613],["T_VARIABLE","$memoryUsagePercent",613],["T_WHITESPACE"," ",613],"=",["T_WHITESPACE"," ",613],["T_DNUMBER","0.8",613],";",["T_WHITESPACE","\n        ",613],["T_COMMENT","\/\/ Minimum Products limit\n",614],["T_WHITESPACE","        ",615],["T_VARIABLE","$minProductsLimit",615],["T_WHITESPACE"," ",615],"=",["T_WHITESPACE"," ",615],["T_LNUMBER","500",615],";",["T_WHITESPACE","\n\n        ",615],["T_VARIABLE","$limitProducts",617],["T_WHITESPACE"," ",617],"=",["T_WHITESPACE"," ",617],["T_STRING","intval",617],"(","(",["T_VARIABLE","$memoryLimit",617],["T_WHITESPACE","  ",617],"*",["T_WHITESPACE"," ",617],["T_VARIABLE","$memoryUsagePercent",617],["T_WHITESPACE"," ",617],"-",["T_WHITESPACE"," ",617],["T_STRING","memory_get_usage",617],"(",["T_STRING","true",617],")",")",["T_WHITESPACE"," ",617],"\/",["T_WHITESPACE"," ",617],["T_VARIABLE","$memoryPerProduct",617],")",";",["T_WHITESPACE","\n        ",617],["T_IF","if",618],["T_WHITESPACE"," ",618],"(",["T_VARIABLE","$limitProducts",618],["T_WHITESPACE"," ",618],"<",["T_WHITESPACE"," ",618],["T_VARIABLE","$minProductsLimit",618],")",["T_WHITESPACE"," ",618],"{",["T_WHITESPACE","\n            ",618],["T_VARIABLE","$limitProducts",619],["T_WHITESPACE"," ",619],"=",["T_WHITESPACE"," ",619],["T_VARIABLE","$minProductsLimit",619],";",["T_WHITESPACE","\n        ",619],"}",["T_WHITESPACE","\n        ",620],["T_VARIABLE","$offsetProducts",621],["T_WHITESPACE"," ",621],"=",["T_WHITESPACE"," ",621],["T_LNUMBER","0",621],";",["T_WHITESPACE","\n\n        ",621],["T_WHILE","while",623],["T_WHITESPACE"," ",623],"(",["T_STRING","true",623],")",["T_WHITESPACE"," ",623],"{",["T_WHITESPACE","\n            ",623],["T_INC","++",624],["T_VARIABLE","$offsetProducts",624],";",["T_WHITESPACE","\n\n            ",624],["T_VARIABLE","$dataRows",626],["T_WHITESPACE","        ",626],"=",["T_WHITESPACE"," ",626],["T_ARRAY","array",626],"(",")",";",["T_WHITESPACE","\n            ",626],["T_VARIABLE","$rowCategories",627],["T_WHITESPACE","   ",627],"=",["T_WHITESPACE"," ",627],["T_ARRAY","array",627],"(",")",";",["T_WHITESPACE","\n            ",627],["T_VARIABLE","$rowWebsites",628],["T_WHITESPACE","     ",628],"=",["T_WHITESPACE"," ",628],["T_ARRAY","array",628],"(",")",";",["T_WHITESPACE","\n            ",628],["T_VARIABLE","$rowTierPrices",629],["T_WHITESPACE","   ",629],"=",["T_WHITESPACE"," ",629],["T_ARRAY","array",629],"(",")",";",["T_WHITESPACE","\n            ",629],["T_VARIABLE","$rowGroupPrices",630],["T_WHITESPACE","  ",630],"=",["T_WHITESPACE"," ",630],["T_ARRAY","array",630],"(",")",";",["T_WHITESPACE","\n            ",630],["T_VARIABLE","$rowMultiselects",631],["T_WHITESPACE"," ",631],"=",["T_WHITESPACE"," ",631],["T_ARRAY","array",631],"(",")",";",["T_WHITESPACE","\n            ",631],["T_VARIABLE","$mediaGalery",632],["T_WHITESPACE","     ",632],"=",["T_WHITESPACE"," ",632],["T_ARRAY","array",632],"(",")",";",["T_WHITESPACE","\n\n            ",632],["T_COMMENT","\/\/ prepare multi-store values and system columns values\n",634],["T_WHITESPACE","            ",635],["T_FOREACH","foreach",635],["T_WHITESPACE"," ",635],"(",["T_VARIABLE","$this",635],["T_OBJECT_OPERATOR","->",635],["T_STRING","_storeIdToCode",635],["T_WHITESPACE"," ",635],["T_AS","as",635],["T_WHITESPACE"," ",635],["T_VARIABLE","$storeId",635],["T_WHITESPACE"," ",635],["T_DOUBLE_ARROW","=>",635],["T_WHITESPACE"," ",635],"&",["T_VARIABLE","$storeCode",635],")",["T_WHITESPACE"," ",635],"{",["T_WHITESPACE"," ",635],["T_COMMENT","\/\/ go through all stores\n",635],["T_WHITESPACE","                ",636],["T_VARIABLE","$collection",636],["T_WHITESPACE"," ",636],"=",["T_WHITESPACE"," ",636],["T_VARIABLE","$this",636],["T_OBJECT_OPERATOR","->",636],["T_STRING","_prepareEntityCollection",636],"(",["T_STRING","Mage",636],["T_DOUBLE_COLON","::",636],["T_STRING","getResourceModel",636],"(",["T_CONSTANT_ENCAPSED_STRING","'catalog\/product_collection'",636],")",")",";",["T_WHITESPACE","\n                ",636],["T_VARIABLE","$collection",637],["T_WHITESPACE","\n                    ",637],["T_OBJECT_OPERATOR","->",638],["T_STRING","setStoreId",638],"(",["T_VARIABLE","$storeId",638],")",["T_WHITESPACE","\n                    ",638],["T_OBJECT_OPERATOR","->",639],["T_STRING","setPage",639],"(",["T_VARIABLE","$offsetProducts",639],",",["T_WHITESPACE"," ",639],["T_VARIABLE","$limitProducts",639],")",";",["T_WHITESPACE","\n                ",639],["T_IF","if",640],["T_WHITESPACE"," ",640],"(",["T_VARIABLE","$collection",640],["T_OBJECT_OPERATOR","->",640],["T_STRING","getCurPage",640],"(",")",["T_WHITESPACE"," ",640],"<",["T_WHITESPACE"," ",640],["T_VARIABLE","$offsetProducts",640],")",["T_WHITESPACE"," ",640],"{",["T_WHITESPACE","\n                    ",640],["T_BREAK","break",641],";",["T_WHITESPACE","\n                ",641],"}",["T_WHITESPACE","\n                ",642],["T_VARIABLE","$collection",643],["T_OBJECT_OPERATOR","->",643],["T_STRING","load",643],"(",")",";",["T_WHITESPACE","\n\n                ",643],["T_IF","if",645],["T_WHITESPACE"," ",645],"(",["T_VARIABLE","$collection",645],["T_OBJECT_OPERATOR","->",645],["T_STRING","count",645],"(",")",["T_WHITESPACE"," ",645],["T_IS_EQUAL","==",645],["T_WHITESPACE"," ",645],["T_LNUMBER","0",645],")",["T_WHITESPACE"," ",645],"{",["T_WHITESPACE","\n                    ",645],["T_BREAK","break",646],";",["T_WHITESPACE","\n                ",646],"}",["T_WHITESPACE","\n\n                ",647],["T_IF","if",649],["T_WHITESPACE"," ",649],"(",["T_VARIABLE","$defaultStoreId",649],["T_WHITESPACE"," ",649],["T_IS_EQUAL","==",649],["T_WHITESPACE"," ",649],["T_VARIABLE","$storeId",649],")",["T_WHITESPACE"," ",649],"{",["T_WHITESPACE","\n                    ",649],["T_VARIABLE","$collection",650],["T_OBJECT_OPERATOR","->",650],["T_STRING","addCategoryIds",650],"(",")",["T_OBJECT_OPERATOR","->",650],["T_STRING","addWebsiteNamesToResult",650],"(",")",";",["T_WHITESPACE","\n\n                    ",650],["T_COMMENT","\/\/ tier and group price data getting only once\n",652],["T_WHITESPACE","                    ",653],["T_VARIABLE","$rowTierPrices",653],["T_WHITESPACE"," ",653],"=",["T_WHITESPACE"," ",653],["T_VARIABLE","$this",653],["T_OBJECT_OPERATOR","->",653],["T_STRING","_prepareTierPrices",653],"(",["T_VARIABLE","$collection",653],["T_OBJECT_OPERATOR","->",653],["T_STRING","getAllIds",653],"(",")",")",";",["T_WHITESPACE","\n                    ",653],["T_VARIABLE","$rowGroupPrices",654],["T_WHITESPACE"," ",654],"=",["T_WHITESPACE"," ",654],["T_VARIABLE","$this",654],["T_OBJECT_OPERATOR","->",654],["T_STRING","_prepareGroupPrices",654],"(",["T_VARIABLE","$collection",654],["T_OBJECT_OPERATOR","->",654],["T_STRING","getAllIds",654],"(",")",")",";",["T_WHITESPACE","\n\n                    ",654],["T_COMMENT","\/\/ getting media gallery data\n",656],["T_WHITESPACE","                    ",657],["T_VARIABLE","$mediaGalery",657],["T_WHITESPACE"," ",657],"=",["T_WHITESPACE"," ",657],["T_VARIABLE","$this",657],["T_OBJECT_OPERATOR","->",657],["T_STRING","_prepareMediaGallery",657],"(",["T_VARIABLE","$collection",657],["T_OBJECT_OPERATOR","->",657],["T_STRING","getAllIds",657],"(",")",")",";",["T_WHITESPACE","\n                ",657],"}",["T_WHITESPACE","\n                ",658],["T_FOREACH","foreach",659],["T_WHITESPACE"," ",659],"(",["T_VARIABLE","$collection",659],["T_WHITESPACE"," ",659],["T_AS","as",659],["T_WHITESPACE"," ",659],["T_VARIABLE","$itemId",659],["T_WHITESPACE"," ",659],["T_DOUBLE_ARROW","=>",659],["T_WHITESPACE"," ",659],["T_VARIABLE","$item",659],")",["T_WHITESPACE"," ",659],"{",["T_WHITESPACE"," ",659],["T_COMMENT","\/\/ go through all products\n",659],["T_WHITESPACE","                    ",660],["T_VARIABLE","$rowIsEmpty",660],["T_WHITESPACE"," ",660],"=",["T_WHITESPACE"," ",660],["T_STRING","true",660],";",["T_WHITESPACE"," ",660],["T_COMMENT","\/\/ row is empty by default\n",660],["T_WHITESPACE","\n                    ",661],["T_FOREACH","foreach",662],["T_WHITESPACE"," ",662],"(",["T_VARIABLE","$validAttrCodes",662],["T_WHITESPACE"," ",662],["T_AS","as",662],["T_WHITESPACE"," ",662],"&",["T_VARIABLE","$attrCode",662],")",["T_WHITESPACE"," ",662],"{",["T_WHITESPACE"," ",662],["T_COMMENT","\/\/ go through all valid attribute codes\n",662],["T_WHITESPACE","                        ",663],["T_VARIABLE","$attrValue",663],["T_WHITESPACE"," ",663],"=",["T_WHITESPACE"," ",663],["T_VARIABLE","$item",663],["T_OBJECT_OPERATOR","->",663],["T_STRING","getData",663],"(",["T_VARIABLE","$attrCode",663],")",";",["T_WHITESPACE","\n\n                        ",663],["T_IF","if",665],["T_WHITESPACE"," ",665],"(","!",["T_EMPTY","empty",665],"(",["T_VARIABLE","$this",665],["T_OBJECT_OPERATOR","->",665],["T_STRING","_attributeValues",665],"[",["T_VARIABLE","$attrCode",665],"]",")",")",["T_WHITESPACE"," ",665],"{",["T_WHITESPACE","\n                            ",665],["T_IF","if",666],["T_WHITESPACE"," ",666],"(",["T_VARIABLE","$this",666],["T_OBJECT_OPERATOR","->",666],["T_STRING","_attributeTypes",666],"[",["T_VARIABLE","$attrCode",666],"]",["T_WHITESPACE"," ",666],["T_IS_EQUAL","==",666],["T_WHITESPACE"," ",666],["T_CONSTANT_ENCAPSED_STRING","'multiselect'",666],")",["T_WHITESPACE"," ",666],"{",["T_WHITESPACE","\n                                ",666],["T_VARIABLE","$attrValue",667],["T_WHITESPACE"," ",667],"=",["T_WHITESPACE"," ",667],["T_STRING","explode",667],"(",["T_CONSTANT_ENCAPSED_STRING","','",667],",",["T_WHITESPACE"," ",667],["T_VARIABLE","$attrValue",667],")",";",["T_WHITESPACE","\n                                ",667],["T_VARIABLE","$attrValue",668],["T_WHITESPACE"," ",668],"=",["T_WHITESPACE"," ",668],["T_STRING","array_intersect_key",668],"(",["T_WHITESPACE","\n                                    ",668],["T_VARIABLE","$this",669],["T_OBJECT_OPERATOR","->",669],["T_STRING","_attributeValues",669],"[",["T_VARIABLE","$attrCode",669],"]",",",["T_WHITESPACE","\n                                    ",669],["T_STRING","array_flip",670],"(",["T_VARIABLE","$attrValue",670],")",["T_WHITESPACE","\n                                ",670],")",";",["T_WHITESPACE","\n\n                                ",671],["T_SWITCH","switch",673],["T_WHITESPACE"," ",673],"(",["T_VARIABLE","$this",673],["T_OBJECT_OPERATOR","->",673],["T_STRING","_attributeScopes",673],"[",["T_VARIABLE","$attrCode",673],"]",")",["T_WHITESPACE"," ",673],"{",["T_WHITESPACE","\n                                    ",673],["T_CASE","case",674],["T_WHITESPACE"," ",674],["T_STRING","Mage_Catalog_Model_Resource_Eav_Attribute",674],["T_DOUBLE_COLON","::",674],["T_STRING","SCOPE_STORE",674],":",["T_WHITESPACE","\n                                        ",674],["T_IF","if",675],["T_WHITESPACE"," ",675],"(",["T_ISSET","isset",675],"(",["T_VARIABLE","$rowMultiselects",675],"[",["T_VARIABLE","$itemId",675],"]","[",["T_LNUMBER","0",675],"]","[",["T_VARIABLE","$attrCode",675],"]",")",["T_WHITESPACE","\n                                            ",675],["T_BOOLEAN_AND","&&",676],["T_WHITESPACE"," ",676],["T_VARIABLE","$attrValue",676],["T_WHITESPACE"," ",676],["T_IS_EQUAL","==",676],["T_WHITESPACE"," ",676],["T_VARIABLE","$rowMultiselects",676],"[",["T_VARIABLE","$itemId",676],"]","[",["T_LNUMBER","0",676],"]","[",["T_VARIABLE","$attrCode",676],"]",["T_WHITESPACE","\n                                        ",676],")",["T_WHITESPACE"," ",677],"{",["T_WHITESPACE","\n                                            ",677],["T_VARIABLE","$attrValue",678],["T_WHITESPACE"," ",678],"=",["T_WHITESPACE"," ",678],["T_STRING","null",678],";",["T_WHITESPACE","\n                                        ",678],"}",["T_WHITESPACE","\n                                        ",679],["T_BREAK","break",680],";",["T_WHITESPACE","\n\n                                    ",680],["T_CASE","case",682],["T_WHITESPACE"," ",682],["T_STRING","Mage_Catalog_Model_Resource_Eav_Attribute",682],["T_DOUBLE_COLON","::",682],["T_STRING","SCOPE_GLOBAL",682],":",["T_WHITESPACE","\n                                        ",682],["T_IF","if",683],["T_WHITESPACE"," ",683],"(",["T_VARIABLE","$storeId",683],["T_WHITESPACE"," ",683],["T_IS_NOT_EQUAL","!=",683],["T_WHITESPACE"," ",683],["T_VARIABLE","$defaultStoreId",683],")",["T_WHITESPACE"," ",683],"{",["T_WHITESPACE","\n                                            ",683],["T_VARIABLE","$attrValue",684],["T_WHITESPACE"," ",684],"=",["T_WHITESPACE"," ",684],["T_STRING","null",684],";",["T_WHITESPACE","\n                                        ",684],"}",["T_WHITESPACE","\n                                        ",685],["T_BREAK","break",686],";",["T_WHITESPACE","\n\n                                    ",686],["T_CASE","case",688],["T_WHITESPACE"," ",688],["T_STRING","Mage_Catalog_Model_Resource_Eav_Attribute",688],["T_DOUBLE_COLON","::",688],["T_STRING","SCOPE_WEBSITE",688],":",["T_WHITESPACE","\n                                        ",688],["T_VARIABLE","$websiteId",689],["T_WHITESPACE","      ",689],"=",["T_WHITESPACE"," ",689],["T_VARIABLE","$this",689],["T_OBJECT_OPERATOR","->",689],["T_STRING","_storeIdToWebsiteId",689],"[",["T_VARIABLE","$storeId",689],"]",";",["T_WHITESPACE","\n                                        ",689],["T_VARIABLE","$websiteStoreId",690],["T_WHITESPACE"," ",690],"=",["T_WHITESPACE"," ",690],["T_STRING","array_search",690],"(",["T_VARIABLE","$websiteId",690],",",["T_WHITESPACE"," ",690],["T_VARIABLE","$this",690],["T_OBJECT_OPERATOR","->",690],["T_STRING","_storeIdToWebsiteId",690],")",";",["T_WHITESPACE","\n                                        ",690],["T_IF","if",691],["T_WHITESPACE"," ",691],"(","(",["T_ISSET","isset",691],"(",["T_VARIABLE","$rowMultiselects",691],"[",["T_VARIABLE","$itemId",691],"]","[",["T_VARIABLE","$websiteStoreId",691],"]","[",["T_VARIABLE","$attrCode",691],"]",")",["T_WHITESPACE","\n                                            ",691],["T_BOOLEAN_AND","&&",692],["T_WHITESPACE"," ",692],["T_VARIABLE","$attrValue",692],["T_WHITESPACE"," ",692],["T_IS_EQUAL","==",692],["T_WHITESPACE"," ",692],["T_VARIABLE","$rowMultiselects",692],"[",["T_VARIABLE","$itemId",692],"]","[",["T_VARIABLE","$websiteStoreId",692],"]","[",["T_VARIABLE","$attrCode",692],"]",")",["T_WHITESPACE","\n                                            ",692],["T_BOOLEAN_OR","||",693],["T_WHITESPACE"," ",693],["T_VARIABLE","$attrValue",693],["T_WHITESPACE"," ",693],["T_IS_EQUAL","==",693],["T_WHITESPACE"," ",693],["T_VARIABLE","$rowMultiselects",693],"[",["T_VARIABLE","$itemId",693],"]","[",["T_LNUMBER","0",693],"]","[",["T_VARIABLE","$attrCode",693],"]",["T_WHITESPACE","\n                                        ",693],")",["T_WHITESPACE"," ",694],"{",["T_WHITESPACE","\n                                            ",694],["T_VARIABLE","$attrValue",695],["T_WHITESPACE"," ",695],"=",["T_WHITESPACE"," ",695],["T_STRING","null",695],";",["T_WHITESPACE","\n                                        ",695],"}",["T_WHITESPACE","\n                                        ",696],["T_BREAK","break",697],";",["T_WHITESPACE","\n\n                                    ",697],["T_DEFAULT","default",699],":",["T_WHITESPACE","\n                                        ",699],["T_BREAK","break",700],";",["T_WHITESPACE","\n                                ",700],"}",["T_WHITESPACE","\n\n                                ",701],["T_IF","if",703],["T_WHITESPACE"," ",703],"(",["T_VARIABLE","$attrValue",703],")",["T_WHITESPACE"," ",703],"{",["T_WHITESPACE","\n                                    ",703],["T_VARIABLE","$rowMultiselects",704],"[",["T_VARIABLE","$itemId",704],"]","[",["T_VARIABLE","$storeId",704],"]","[",["T_VARIABLE","$attrCode",704],"]",["T_WHITESPACE"," ",704],"=",["T_WHITESPACE"," ",704],["T_VARIABLE","$attrValue",704],";",["T_WHITESPACE","\n                                    ",704],["T_VARIABLE","$rowIsEmpty",705],["T_WHITESPACE"," ",705],"=",["T_WHITESPACE"," ",705],["T_STRING","false",705],";",["T_WHITESPACE","\n                                ",705],"}",["T_WHITESPACE","\n                            ",706],"}",["T_WHITESPACE"," ",707],["T_ELSE","else",707],["T_WHITESPACE"," ",707],["T_IF","if",707],["T_WHITESPACE"," ",707],"(",["T_ISSET","isset",707],"(",["T_VARIABLE","$this",707],["T_OBJECT_OPERATOR","->",707],["T_STRING","_attributeValues",707],"[",["T_VARIABLE","$attrCode",707],"]","[",["T_VARIABLE","$attrValue",707],"]",")",")",["T_WHITESPACE"," ",707],"{",["T_WHITESPACE","\n                                ",707],["T_VARIABLE","$attrValue",708],["T_WHITESPACE"," ",708],"=",["T_WHITESPACE"," ",708],["T_VARIABLE","$this",708],["T_OBJECT_OPERATOR","->",708],["T_STRING","_attributeValues",708],"[",["T_VARIABLE","$attrCode",708],"]","[",["T_VARIABLE","$attrValue",708],"]",";",["T_WHITESPACE","\n                            ",708],"}",["T_WHITESPACE"," ",709],["T_ELSE","else",709],["T_WHITESPACE"," ",709],"{",["T_WHITESPACE","\n                                ",709],["T_VARIABLE","$attrValue",710],["T_WHITESPACE"," ",710],"=",["T_WHITESPACE"," ",710],["T_STRING","null",710],";",["T_WHITESPACE","\n                            ",710],"}",["T_WHITESPACE","\n                        ",711],"}",["T_WHITESPACE","\n                        ",712],["T_COMMENT","\/\/ do not save value same as default or not existent\n",713],["T_WHITESPACE","                        ",714],["T_IF","if",714],["T_WHITESPACE"," ",714],"(",["T_VARIABLE","$storeId",714],["T_WHITESPACE"," ",714],["T_IS_NOT_EQUAL","!=",714],["T_WHITESPACE"," ",714],["T_VARIABLE","$defaultStoreId",714],["T_WHITESPACE","\n                            ",714],["T_BOOLEAN_AND","&&",715],["T_WHITESPACE"," ",715],["T_ISSET","isset",715],"(",["T_VARIABLE","$dataRows",715],"[",["T_VARIABLE","$itemId",715],"]","[",["T_VARIABLE","$defaultStoreId",715],"]","[",["T_VARIABLE","$attrCode",715],"]",")",["T_WHITESPACE","\n                            ",715],["T_BOOLEAN_AND","&&",716],["T_WHITESPACE"," ",716],["T_VARIABLE","$dataRows",716],"[",["T_VARIABLE","$itemId",716],"]","[",["T_VARIABLE","$defaultStoreId",716],"]","[",["T_VARIABLE","$attrCode",716],"]",["T_WHITESPACE"," ",716],["T_IS_EQUAL","==",716],["T_WHITESPACE"," ",716],["T_VARIABLE","$attrValue",716],["T_WHITESPACE","\n                        ",716],")",["T_WHITESPACE"," ",717],"{",["T_WHITESPACE","\n                            ",717],["T_VARIABLE","$attrValue",718],["T_WHITESPACE"," ",718],"=",["T_WHITESPACE"," ",718],["T_STRING","null",718],";",["T_WHITESPACE","\n                        ",718],"}",["T_WHITESPACE","\n                        ",719],["T_IF","if",720],["T_WHITESPACE"," ",720],"(",["T_STRING","is_scalar",720],"(",["T_VARIABLE","$attrValue",720],")",")",["T_WHITESPACE"," ",720],"{",["T_WHITESPACE","\n                            ",720],["T_VARIABLE","$dataRows",721],"[",["T_VARIABLE","$itemId",721],"]","[",["T_VARIABLE","$storeId",721],"]","[",["T_VARIABLE","$attrCode",721],"]",["T_WHITESPACE"," ",721],"=",["T_WHITESPACE"," ",721],["T_VARIABLE","$attrValue",721],";",["T_WHITESPACE","\n                            ",721],["T_VARIABLE","$rowIsEmpty",722],["T_WHITESPACE"," ",722],"=",["T_WHITESPACE"," ",722],["T_STRING","false",722],";",["T_WHITESPACE"," ",722],["T_COMMENT","\/\/ mark row as not empty\n",722],["T_WHITESPACE","                        ",723],"}",["T_WHITESPACE","\n                    ",723],"}",["T_WHITESPACE","\n                    ",724],["T_IF","if",725],["T_WHITESPACE"," ",725],"(",["T_VARIABLE","$rowIsEmpty",725],")",["T_WHITESPACE"," ",725],"{",["T_WHITESPACE"," ",725],["T_COMMENT","\/\/ remove empty rows\n",725],["T_WHITESPACE","                        ",726],["T_UNSET","unset",726],"(",["T_VARIABLE","$dataRows",726],"[",["T_VARIABLE","$itemId",726],"]","[",["T_VARIABLE","$storeId",726],"]",")",";",["T_WHITESPACE","\n                    ",726],"}",["T_WHITESPACE"," ",727],["T_ELSE","else",727],["T_WHITESPACE"," ",727],"{",["T_WHITESPACE","\n                        ",727],["T_VARIABLE","$attrSetId",728],["T_WHITESPACE"," ",728],"=",["T_WHITESPACE"," ",728],["T_VARIABLE","$item",728],["T_OBJECT_OPERATOR","->",728],["T_STRING","getAttributeSetId",728],"(",")",";",["T_WHITESPACE","\n                        ",728],["T_VARIABLE","$dataRows",729],"[",["T_VARIABLE","$itemId",729],"]","[",["T_VARIABLE","$storeId",729],"]","[",["T_STRING","self",729],["T_DOUBLE_COLON","::",729],["T_STRING","COL_STORE",729],"]",["T_WHITESPACE","    ",729],"=",["T_WHITESPACE"," ",729],["T_VARIABLE","$storeCode",729],";",["T_WHITESPACE","\n                        ",729],["T_VARIABLE","$dataRows",730],"[",["T_VARIABLE","$itemId",730],"]","[",["T_VARIABLE","$storeId",730],"]","[",["T_STRING","self",730],["T_DOUBLE_COLON","::",730],["T_STRING","COL_ATTR_SET",730],"]",["T_WHITESPACE"," ",730],"=",["T_WHITESPACE"," ",730],["T_VARIABLE","$this",730],["T_OBJECT_OPERATOR","->",730],["T_STRING","_attrSetIdToName",730],"[",["T_VARIABLE","$attrSetId",730],"]",";",["T_WHITESPACE","\n                        ",730],["T_VARIABLE","$dataRows",731],"[",["T_VARIABLE","$itemId",731],"]","[",["T_VARIABLE","$storeId",731],"]","[",["T_STRING","self",731],["T_DOUBLE_COLON","::",731],["T_STRING","COL_TYPE",731],"]",["T_WHITESPACE","     ",731],"=",["T_WHITESPACE"," ",731],["T_VARIABLE","$item",731],["T_OBJECT_OPERATOR","->",731],["T_STRING","getTypeId",731],"(",")",";",["T_WHITESPACE","\n\n                        ",731],["T_IF","if",733],["T_WHITESPACE"," ",733],"(",["T_VARIABLE","$defaultStoreId",733],["T_WHITESPACE"," ",733],["T_IS_EQUAL","==",733],["T_WHITESPACE"," ",733],["T_VARIABLE","$storeId",733],")",["T_WHITESPACE"," ",733],"{",["T_WHITESPACE","\n                            ",733],["T_VARIABLE","$rowWebsites",734],"[",["T_VARIABLE","$itemId",734],"]",["T_WHITESPACE","   ",734],"=",["T_WHITESPACE"," ",734],["T_VARIABLE","$item",734],["T_OBJECT_OPERATOR","->",734],["T_STRING","getWebsites",734],"(",")",";",["T_WHITESPACE","\n                            ",734],["T_VARIABLE","$rowCategories",735],"[",["T_VARIABLE","$itemId",735],"]",["T_WHITESPACE"," ",735],"=",["T_WHITESPACE"," ",735],["T_VARIABLE","$item",735],["T_OBJECT_OPERATOR","->",735],["T_STRING","getCategoryIds",735],"(",")",";",["T_WHITESPACE","\n                        ",735],"}",["T_WHITESPACE","\n                    ",736],"}",["T_WHITESPACE","\n                    ",737],["T_VARIABLE","$item",738],["T_WHITESPACE"," ",738],"=",["T_WHITESPACE"," ",738],["T_STRING","null",738],";",["T_WHITESPACE","\n                ",738],"}",["T_WHITESPACE","\n                ",739],["T_VARIABLE","$collection",740],["T_OBJECT_OPERATOR","->",740],["T_STRING","clear",740],"(",")",";",["T_WHITESPACE","\n            ",740],"}",["T_WHITESPACE","\n\n            ",741],["T_IF","if",743],["T_WHITESPACE"," ",743],"(",["T_VARIABLE","$collection",743],["T_OBJECT_OPERATOR","->",743],["T_STRING","getCurPage",743],"(",")",["T_WHITESPACE"," ",743],"<",["T_WHITESPACE"," ",743],["T_VARIABLE","$offsetProducts",743],")",["T_WHITESPACE"," ",743],"{",["T_WHITESPACE","\n                ",743],["T_BREAK","break",744],";",["T_WHITESPACE","\n            ",744],"}",["T_WHITESPACE","\n\n            ",745],["T_COMMENT","\/\/ remove unused categories\n",747],["T_WHITESPACE","            ",748],["T_VARIABLE","$allCategoriesIds",748],["T_WHITESPACE"," ",748],"=",["T_WHITESPACE"," ",748],["T_STRING","array_merge",748],"(",["T_STRING","array_keys",748],"(",["T_VARIABLE","$this",748],["T_OBJECT_OPERATOR","->",748],["T_STRING","_categories",748],")",",",["T_WHITESPACE"," ",748],["T_STRING","array_keys",748],"(",["T_VARIABLE","$this",748],["T_OBJECT_OPERATOR","->",748],["T_STRING","_rootCategories",748],")",")",";",["T_WHITESPACE","\n            ",748],["T_FOREACH","foreach",749],["T_WHITESPACE"," ",749],"(",["T_VARIABLE","$rowCategories",749],["T_WHITESPACE"," ",749],["T_AS","as",749],["T_WHITESPACE"," ",749],"&",["T_VARIABLE","$categories",749],")",["T_WHITESPACE"," ",749],"{",["T_WHITESPACE","\n                ",749],["T_VARIABLE","$categories",750],["T_WHITESPACE"," ",750],"=",["T_WHITESPACE"," ",750],["T_STRING","array_intersect",750],"(",["T_VARIABLE","$categories",750],",",["T_WHITESPACE"," ",750],["T_VARIABLE","$allCategoriesIds",750],")",";",["T_WHITESPACE","\n            ",750],"}",["T_WHITESPACE","\n\n            ",751],["T_COMMENT","\/\/ prepare catalog inventory information\n",753],["T_WHITESPACE","            ",754],["T_VARIABLE","$productIds",754],["T_WHITESPACE"," ",754],"=",["T_WHITESPACE"," ",754],["T_STRING","array_keys",754],"(",["T_VARIABLE","$dataRows",754],")",";",["T_WHITESPACE","\n            ",754],["T_VARIABLE","$stockItemRows",755],["T_WHITESPACE"," ",755],"=",["T_WHITESPACE"," ",755],["T_VARIABLE","$this",755],["T_OBJECT_OPERATOR","->",755],["T_STRING","_prepareCatalogInventory",755],"(",["T_VARIABLE","$productIds",755],")",";",["T_WHITESPACE","\n\n            ",755],["T_COMMENT","\/\/ prepare links information\n",757],["T_WHITESPACE","            ",758],["T_VARIABLE","$linksRows",758],["T_WHITESPACE"," ",758],"=",["T_WHITESPACE"," ",758],["T_VARIABLE","$this",758],["T_OBJECT_OPERATOR","->",758],["T_STRING","_prepareLinks",758],"(",["T_VARIABLE","$productIds",758],")",";",["T_WHITESPACE","\n            ",758],["T_VARIABLE","$linkIdColPrefix",759],["T_WHITESPACE"," ",759],"=",["T_WHITESPACE"," ",759],["T_ARRAY","array",759],"(",["T_WHITESPACE","\n                ",759],["T_STRING","Mage_Catalog_Model_Product_Link",760],["T_DOUBLE_COLON","::",760],["T_STRING","LINK_TYPE_RELATED",760],["T_WHITESPACE","   ",760],["T_DOUBLE_ARROW","=>",760],["T_WHITESPACE"," ",760],["T_CONSTANT_ENCAPSED_STRING","'_links_related_'",760],",",["T_WHITESPACE","\n                ",760],["T_STRING","Mage_Catalog_Model_Product_Link",761],["T_DOUBLE_COLON","::",761],["T_STRING","LINK_TYPE_UPSELL",761],["T_WHITESPACE","    ",761],["T_DOUBLE_ARROW","=>",761],["T_WHITESPACE"," ",761],["T_CONSTANT_ENCAPSED_STRING","'_links_upsell_'",761],",",["T_WHITESPACE","\n                ",761],["T_STRING","Mage_Catalog_Model_Product_Link",762],["T_DOUBLE_COLON","::",762],["T_STRING","LINK_TYPE_CROSSSELL",762],["T_WHITESPACE"," ",762],["T_DOUBLE_ARROW","=>",762],["T_WHITESPACE"," ",762],["T_CONSTANT_ENCAPSED_STRING","'_links_crosssell_'",762],",",["T_WHITESPACE","\n                ",762],["T_STRING","Mage_Catalog_Model_Product_Link",763],["T_DOUBLE_COLON","::",763],["T_STRING","LINK_TYPE_GROUPED",763],["T_WHITESPACE","   ",763],["T_DOUBLE_ARROW","=>",763],["T_WHITESPACE"," ",763],["T_CONSTANT_ENCAPSED_STRING","'_associated_'",763],["T_WHITESPACE","\n            ",763],")",";",["T_WHITESPACE","\n            ",764],["T_VARIABLE","$configurableProductsCollection",765],["T_WHITESPACE"," ",765],"=",["T_WHITESPACE"," ",765],["T_STRING","Mage",765],["T_DOUBLE_COLON","::",765],["T_STRING","getResourceModel",765],"(",["T_CONSTANT_ENCAPSED_STRING","'catalog\/product_collection'",765],")",";",["T_WHITESPACE","\n            ",765],["T_VARIABLE","$configurableProductsCollection",766],["T_OBJECT_OPERATOR","->",766],["T_STRING","addAttributeToFilter",766],"(",["T_WHITESPACE","\n                ",766],["T_CONSTANT_ENCAPSED_STRING","'entity_id'",767],",",["T_WHITESPACE","\n                ",767],["T_ARRAY","array",768],"(",["T_WHITESPACE","\n                    ",768],["T_CONSTANT_ENCAPSED_STRING","'in'",769],["T_WHITESPACE","    ",769],["T_DOUBLE_ARROW","=>",769],["T_WHITESPACE"," ",769],["T_VARIABLE","$productIds",769],["T_WHITESPACE","\n                ",769],")",["T_WHITESPACE","\n            ",770],")",["T_OBJECT_OPERATOR","->",771],["T_STRING","addAttributeToFilter",771],"(",["T_WHITESPACE","\n                ",771],["T_CONSTANT_ENCAPSED_STRING","'type_id'",772],",",["T_WHITESPACE","\n                ",772],["T_ARRAY","array",773],"(",["T_WHITESPACE","\n                    ",773],["T_CONSTANT_ENCAPSED_STRING","'eq'",774],["T_WHITESPACE","    ",774],["T_DOUBLE_ARROW","=>",774],["T_WHITESPACE"," ",774],["T_STRING","Mage_Catalog_Model_Product_Type_Configurable",774],["T_DOUBLE_COLON","::",774],["T_STRING","TYPE_CODE",774],["T_WHITESPACE","\n                ",774],")",["T_WHITESPACE","\n            ",775],")",";",["T_WHITESPACE","\n            ",776],["T_VARIABLE","$configurableData",777],["T_WHITESPACE"," ",777],"=",["T_WHITESPACE"," ",777],["T_ARRAY","array",777],"(",")",";",["T_WHITESPACE","\n            ",777],["T_WHILE","while",778],["T_WHITESPACE"," ",778],"(",["T_VARIABLE","$product",778],["T_WHITESPACE"," ",778],"=",["T_WHITESPACE"," ",778],["T_VARIABLE","$configurableProductsCollection",778],["T_OBJECT_OPERATOR","->",778],["T_STRING","fetchItem",778],"(",")",")",["T_WHITESPACE"," ",778],"{",["T_WHITESPACE","\n                ",778],["T_VARIABLE","$productAttributesOptions",779],["T_WHITESPACE"," ",779],"=",["T_WHITESPACE"," ",779],["T_VARIABLE","$product",779],["T_OBJECT_OPERATOR","->",779],["T_STRING","getTypeInstance",779],"(",["T_STRING","true",779],")",["T_OBJECT_OPERATOR","->",779],["T_STRING","getConfigurableOptions",779],"(",["T_VARIABLE","$product",779],")",";",["T_WHITESPACE","\n\n                ",779],["T_FOREACH","foreach",781],["T_WHITESPACE"," ",781],"(",["T_VARIABLE","$productAttributesOptions",781],["T_WHITESPACE"," ",781],["T_AS","as",781],["T_WHITESPACE"," ",781],["T_VARIABLE","$productAttributeOption",781],")",["T_WHITESPACE"," ",781],"{",["T_WHITESPACE","\n                    ",781],["T_VARIABLE","$configurableData",782],"[",["T_VARIABLE","$product",782],["T_OBJECT_OPERATOR","->",782],["T_STRING","getId",782],"(",")","]",["T_WHITESPACE"," ",782],"=",["T_WHITESPACE"," ",782],["T_ARRAY","array",782],"(",")",";",["T_WHITESPACE","\n                    ",782],["T_FOREACH","foreach",783],["T_WHITESPACE"," ",783],"(",["T_VARIABLE","$productAttributeOption",783],["T_WHITESPACE"," ",783],["T_AS","as",783],["T_WHITESPACE"," ",783],["T_VARIABLE","$optionValues",783],")",["T_WHITESPACE"," ",783],"{",["T_WHITESPACE","\n                        ",783],["T_VARIABLE","$priceType",784],["T_WHITESPACE"," ",784],"=",["T_WHITESPACE"," ",784],["T_VARIABLE","$optionValues",784],"[",["T_CONSTANT_ENCAPSED_STRING","'pricing_is_percent'",784],"]",["T_WHITESPACE"," ",784],"?",["T_WHITESPACE"," ",784],["T_CONSTANT_ENCAPSED_STRING","'%'",784],["T_WHITESPACE"," ",784],":",["T_WHITESPACE"," ",784],["T_CONSTANT_ENCAPSED_STRING","''",784],";",["T_WHITESPACE","\n                        ",784],["T_VARIABLE","$configurableData",785],"[",["T_VARIABLE","$product",785],["T_OBJECT_OPERATOR","->",785],["T_STRING","getId",785],"(",")","]","[","]",["T_WHITESPACE"," ",785],"=",["T_WHITESPACE"," ",785],["T_ARRAY","array",785],"(",["T_WHITESPACE","\n                            ",785],["T_CONSTANT_ENCAPSED_STRING","'_super_products_sku'",786],["T_WHITESPACE","           ",786],["T_DOUBLE_ARROW","=>",786],["T_WHITESPACE"," ",786],["T_VARIABLE","$optionValues",786],"[",["T_CONSTANT_ENCAPSED_STRING","'sku'",786],"]",",",["T_WHITESPACE","\n                            ",786],["T_CONSTANT_ENCAPSED_STRING","'_super_attribute_code'",787],["T_WHITESPACE","         ",787],["T_DOUBLE_ARROW","=>",787],["T_WHITESPACE"," ",787],["T_VARIABLE","$optionValues",787],"[",["T_CONSTANT_ENCAPSED_STRING","'attribute_code'",787],"]",",",["T_WHITESPACE","\n                            ",787],["T_CONSTANT_ENCAPSED_STRING","'_super_attribute_option'",788],["T_WHITESPACE","       ",788],["T_DOUBLE_ARROW","=>",788],["T_WHITESPACE"," ",788],["T_VARIABLE","$optionValues",788],"[",["T_CONSTANT_ENCAPSED_STRING","'option_title'",788],"]",",",["T_WHITESPACE","\n                            ",788],["T_CONSTANT_ENCAPSED_STRING","'_super_attribute_price_corr'",789],["T_WHITESPACE","   ",789],["T_DOUBLE_ARROW","=>",789],["T_WHITESPACE"," ",789],["T_VARIABLE","$optionValues",789],"[",["T_CONSTANT_ENCAPSED_STRING","'pricing_value'",789],"]",["T_WHITESPACE"," ",789],".",["T_WHITESPACE"," ",789],["T_VARIABLE","$priceType",789],["T_WHITESPACE","\n                        ",789],")",";",["T_WHITESPACE","\n                    ",790],"}",["T_WHITESPACE","\n                ",791],"}",["T_WHITESPACE","\n            ",792],"}",["T_WHITESPACE","\n\n            ",793],["T_COMMENT","\/\/ prepare custom options information\n",795],["T_WHITESPACE","            ",796],["T_VARIABLE","$customOptionsData",796],["T_WHITESPACE","    ",796],"=",["T_WHITESPACE"," ",796],["T_ARRAY","array",796],"(",")",";",["T_WHITESPACE","\n            ",796],["T_VARIABLE","$customOptionsDataPre",797],["T_WHITESPACE"," ",797],"=",["T_WHITESPACE"," ",797],["T_ARRAY","array",797],"(",")",";",["T_WHITESPACE","\n            ",797],["T_VARIABLE","$customOptCols",798],["T_WHITESPACE","        ",798],"=",["T_WHITESPACE"," ",798],["T_ARRAY","array",798],"(",["T_WHITESPACE","\n                ",798],["T_CONSTANT_ENCAPSED_STRING","'_custom_option_store'",799],",",["T_WHITESPACE"," ",799],["T_CONSTANT_ENCAPSED_STRING","'_custom_option_type'",799],",",["T_WHITESPACE"," ",799],["T_CONSTANT_ENCAPSED_STRING","'_custom_option_title'",799],",",["T_WHITESPACE"," ",799],["T_CONSTANT_ENCAPSED_STRING","'_custom_option_is_required'",799],",",["T_WHITESPACE","\n                ",799],["T_CONSTANT_ENCAPSED_STRING","'_custom_option_price'",800],",",["T_WHITESPACE"," ",800],["T_CONSTANT_ENCAPSED_STRING","'_custom_option_sku'",800],",",["T_WHITESPACE"," ",800],["T_CONSTANT_ENCAPSED_STRING","'_custom_option_max_characters'",800],",",["T_WHITESPACE","\n                ",800],["T_CONSTANT_ENCAPSED_STRING","'_custom_option_sort_order'",801],",",["T_WHITESPACE"," ",801],["T_CONSTANT_ENCAPSED_STRING","'_custom_option_row_title'",801],",",["T_WHITESPACE"," ",801],["T_CONSTANT_ENCAPSED_STRING","'_custom_option_row_price'",801],",",["T_WHITESPACE","\n                ",801],["T_CONSTANT_ENCAPSED_STRING","'_custom_option_row_sku'",802],",",["T_WHITESPACE"," ",802],["T_CONSTANT_ENCAPSED_STRING","'_custom_option_row_sort'",802],["T_WHITESPACE","\n            ",802],")",";",["T_WHITESPACE","\n\n            ",803],["T_FOREACH","foreach",805],["T_WHITESPACE"," ",805],"(",["T_VARIABLE","$this",805],["T_OBJECT_OPERATOR","->",805],["T_STRING","_storeIdToCode",805],["T_WHITESPACE"," ",805],["T_AS","as",805],["T_WHITESPACE"," ",805],["T_VARIABLE","$storeId",805],["T_WHITESPACE"," ",805],["T_DOUBLE_ARROW","=>",805],["T_WHITESPACE"," ",805],"&",["T_VARIABLE","$storeCode",805],")",["T_WHITESPACE"," ",805],"{",["T_WHITESPACE","\n                ",805],["T_VARIABLE","$skip",806],["T_WHITESPACE"," ",806],"=",["T_WHITESPACE"," ",806],["T_STRING","false",806],";",["T_WHITESPACE","\n                ",806],["T_VARIABLE","$options",807],["T_WHITESPACE"," ",807],"=",["T_WHITESPACE"," ",807],["T_STRING","Mage",807],["T_DOUBLE_COLON","::",807],["T_STRING","getResourceModel",807],"(",["T_CONSTANT_ENCAPSED_STRING","'catalog\/product_option_collection'",807],")",["T_WHITESPACE","\n                    ",807],["T_OBJECT_OPERATOR","->",808],["T_STRING","reset",808],"(",")",["T_WHITESPACE","\n                    ",808],["T_OBJECT_OPERATOR","->",809],["T_STRING","addTitleToResult",809],"(",["T_VARIABLE","$storeId",809],")",["T_WHITESPACE","\n                    ",809],["T_OBJECT_OPERATOR","->",810],["T_STRING","addPriceToResult",810],"(",["T_VARIABLE","$storeId",810],")",["T_WHITESPACE","\n                    ",810],["T_OBJECT_OPERATOR","->",811],["T_STRING","addProductToFilter",811],"(",["T_VARIABLE","$productIds",811],")",["T_WHITESPACE","\n                    ",811],["T_OBJECT_OPERATOR","->",812],["T_STRING","addValuesToResult",812],"(",["T_VARIABLE","$storeId",812],")",";",["T_WHITESPACE","\n\n                ",812],["T_FOREACH","foreach",814],["T_WHITESPACE"," ",814],"(",["T_VARIABLE","$options",814],["T_WHITESPACE"," ",814],["T_AS","as",814],["T_WHITESPACE"," ",814],["T_VARIABLE","$option",814],")",["T_WHITESPACE"," ",814],"{",["T_WHITESPACE","\n                    ",814],["T_VARIABLE","$row",815],["T_WHITESPACE"," ",815],"=",["T_WHITESPACE"," ",815],["T_ARRAY","array",815],"(",")",";",["T_WHITESPACE","\n                    ",815],["T_VARIABLE","$productId",816],["T_WHITESPACE"," ",816],"=",["T_WHITESPACE"," ",816],["T_VARIABLE","$option",816],"[",["T_CONSTANT_ENCAPSED_STRING","'product_id'",816],"]",";",["T_WHITESPACE","\n                    ",816],["T_VARIABLE","$optionId",817],["T_WHITESPACE","  ",817],"=",["T_WHITESPACE"," ",817],["T_VARIABLE","$option",817],"[",["T_CONSTANT_ENCAPSED_STRING","'option_id'",817],"]",";",["T_WHITESPACE","\n                    ",817],["T_VARIABLE","$customOptions",818],["T_WHITESPACE"," ",818],"=",["T_WHITESPACE"," ",818],["T_ISSET","isset",818],"(",["T_VARIABLE","$customOptionsDataPre",818],"[",["T_VARIABLE","$productId",818],"]","[",["T_VARIABLE","$optionId",818],"]",")",["T_WHITESPACE","\n                                   ",818],"?",["T_WHITESPACE"," ",819],["T_VARIABLE","$customOptionsDataPre",819],"[",["T_VARIABLE","$productId",819],"]","[",["T_VARIABLE","$optionId",819],"]",["T_WHITESPACE","\n                                   ",819],":",["T_WHITESPACE"," ",820],["T_ARRAY","array",820],"(",")",";",["T_WHITESPACE","\n\n                    ",820],["T_IF","if",822],["T_WHITESPACE"," ",822],"(",["T_VARIABLE","$defaultStoreId",822],["T_WHITESPACE"," ",822],["T_IS_EQUAL","==",822],["T_WHITESPACE"," ",822],["T_VARIABLE","$storeId",822],")",["T_WHITESPACE"," ",822],"{",["T_WHITESPACE","\n                        ",822],["T_VARIABLE","$row",823],"[",["T_CONSTANT_ENCAPSED_STRING","'_custom_option_type'",823],"]",["T_WHITESPACE","           ",823],"=",["T_WHITESPACE"," ",823],["T_VARIABLE","$option",823],"[",["T_CONSTANT_ENCAPSED_STRING","'type'",823],"]",";",["T_WHITESPACE","\n                        ",823],["T_VARIABLE","$row",824],"[",["T_CONSTANT_ENCAPSED_STRING","'_custom_option_title'",824],"]",["T_WHITESPACE","          ",824],"=",["T_WHITESPACE"," ",824],["T_VARIABLE","$option",824],"[",["T_CONSTANT_ENCAPSED_STRING","'title'",824],"]",";",["T_WHITESPACE","\n                        ",824],["T_VARIABLE","$row",825],"[",["T_CONSTANT_ENCAPSED_STRING","'_custom_option_is_required'",825],"]",["T_WHITESPACE","    ",825],"=",["T_WHITESPACE"," ",825],["T_VARIABLE","$option",825],"[",["T_CONSTANT_ENCAPSED_STRING","'is_require'",825],"]",";",["T_WHITESPACE","\n                        ",825],["T_VARIABLE","$row",826],"[",["T_CONSTANT_ENCAPSED_STRING","'_custom_option_price'",826],"]",["T_WHITESPACE"," ",826],"=",["T_WHITESPACE"," ",826],["T_VARIABLE","$option",826],"[",["T_CONSTANT_ENCAPSED_STRING","'price'",826],"]",["T_WHITESPACE","\n                            ",826],".",["T_WHITESPACE"," ",827],"(",["T_VARIABLE","$option",827],"[",["T_CONSTANT_ENCAPSED_STRING","'price_type'",827],"]",["T_WHITESPACE"," ",827],["T_IS_EQUAL","==",827],["T_WHITESPACE"," ",827],["T_CONSTANT_ENCAPSED_STRING","'percent'",827],["T_WHITESPACE"," ",827],"?",["T_WHITESPACE"," ",827],["T_CONSTANT_ENCAPSED_STRING","'%'",827],["T_WHITESPACE"," ",827],":",["T_WHITESPACE"," ",827],["T_CONSTANT_ENCAPSED_STRING","''",827],")",";",["T_WHITESPACE","\n                        ",827],["T_VARIABLE","$row",828],"[",["T_CONSTANT_ENCAPSED_STRING","'_custom_option_sku'",828],"]",["T_WHITESPACE","            ",828],"=",["T_WHITESPACE"," ",828],["T_VARIABLE","$option",828],"[",["T_CONSTANT_ENCAPSED_STRING","'sku'",828],"]",";",["T_WHITESPACE","\n                        ",828],["T_VARIABLE","$row",829],"[",["T_CONSTANT_ENCAPSED_STRING","'_custom_option_max_characters'",829],"]",["T_WHITESPACE"," ",829],"=",["T_WHITESPACE"," ",829],["T_VARIABLE","$option",829],"[",["T_CONSTANT_ENCAPSED_STRING","'max_characters'",829],"]",";",["T_WHITESPACE","\n                        ",829],["T_VARIABLE","$row",830],"[",["T_CONSTANT_ENCAPSED_STRING","'_custom_option_sort_order'",830],"]",["T_WHITESPACE","     ",830],"=",["T_WHITESPACE"," ",830],["T_VARIABLE","$option",830],"[",["T_CONSTANT_ENCAPSED_STRING","'sort_order'",830],"]",";",["T_WHITESPACE","\n\n                        ",830],["T_COMMENT","\/\/ remember default title for later comparisons\n",832],["T_WHITESPACE","                        ",833],["T_VARIABLE","$defaultTitles",833],"[",["T_VARIABLE","$option",833],"[",["T_CONSTANT_ENCAPSED_STRING","'option_id'",833],"]","]",["T_WHITESPACE"," ",833],"=",["T_WHITESPACE"," ",833],["T_VARIABLE","$option",833],"[",["T_CONSTANT_ENCAPSED_STRING","'title'",833],"]",";",["T_WHITESPACE","\n                    ",833],"}",["T_WHITESPACE"," ",834],["T_ELSEIF","elseif",834],["T_WHITESPACE"," ",834],"(",["T_VARIABLE","$option",834],"[",["T_CONSTANT_ENCAPSED_STRING","'title'",834],"]",["T_WHITESPACE"," ",834],["T_IS_NOT_EQUAL","!=",834],["T_WHITESPACE"," ",834],["T_VARIABLE","$customOptions",834],"[",["T_LNUMBER","0",834],"]","[",["T_CONSTANT_ENCAPSED_STRING","'_custom_option_title'",834],"]",")",["T_WHITESPACE"," ",834],"{",["T_WHITESPACE","\n                        ",834],["T_VARIABLE","$row",835],"[",["T_CONSTANT_ENCAPSED_STRING","'_custom_option_title'",835],"]",["T_WHITESPACE"," ",835],"=",["T_WHITESPACE"," ",835],["T_VARIABLE","$option",835],"[",["T_CONSTANT_ENCAPSED_STRING","'title'",835],"]",";",["T_WHITESPACE","\n                    ",835],"}",["T_WHITESPACE","\n                    ",836],["T_VARIABLE","$values",837],["T_WHITESPACE"," ",837],"=",["T_WHITESPACE"," ",837],["T_VARIABLE","$option",837],["T_OBJECT_OPERATOR","->",837],["T_STRING","getValues",837],"(",")",";",["T_WHITESPACE","\n                    ",837],["T_IF","if",838],["T_WHITESPACE"," ",838],"(",["T_VARIABLE","$values",838],")",["T_WHITESPACE"," ",838],"{",["T_WHITESPACE","\n                        ",838],["T_VARIABLE","$firstValue",839],["T_WHITESPACE"," ",839],"=",["T_WHITESPACE"," ",839],["T_STRING","reset",839],"(",["T_VARIABLE","$values",839],")",";",["T_WHITESPACE","\n                        ",839],["T_VARIABLE","$priceType",840],["T_WHITESPACE","  ",840],"=",["T_WHITESPACE"," ",840],["T_VARIABLE","$firstValue",840],"[",["T_CONSTANT_ENCAPSED_STRING","'price_type'",840],"]",["T_WHITESPACE"," ",840],["T_IS_EQUAL","==",840],["T_WHITESPACE"," ",840],["T_CONSTANT_ENCAPSED_STRING","'percent'",840],["T_WHITESPACE"," ",840],"?",["T_WHITESPACE"," ",840],["T_CONSTANT_ENCAPSED_STRING","'%'",840],["T_WHITESPACE"," ",840],":",["T_WHITESPACE"," ",840],["T_CONSTANT_ENCAPSED_STRING","''",840],";",["T_WHITESPACE","\n\n                        ",840],["T_IF","if",842],["T_WHITESPACE"," ",842],"(",["T_VARIABLE","$defaultStoreId",842],["T_WHITESPACE"," ",842],["T_IS_EQUAL","==",842],["T_WHITESPACE"," ",842],["T_VARIABLE","$storeId",842],")",["T_WHITESPACE"," ",842],"{",["T_WHITESPACE","\n                            ",842],["T_VARIABLE","$row",843],"[",["T_CONSTANT_ENCAPSED_STRING","'_custom_option_row_title'",843],"]",["T_WHITESPACE"," ",843],"=",["T_WHITESPACE"," ",843],["T_VARIABLE","$firstValue",843],"[",["T_CONSTANT_ENCAPSED_STRING","'title'",843],"]",";",["T_WHITESPACE","\n                            ",843],["T_VARIABLE","$row",844],"[",["T_CONSTANT_ENCAPSED_STRING","'_custom_option_row_price'",844],"]",["T_WHITESPACE"," ",844],"=",["T_WHITESPACE"," ",844],["T_VARIABLE","$firstValue",844],"[",["T_CONSTANT_ENCAPSED_STRING","'price'",844],"]",["T_WHITESPACE"," ",844],".",["T_WHITESPACE"," ",844],["T_VARIABLE","$priceType",844],";",["T_WHITESPACE","\n                            ",844],["T_VARIABLE","$row",845],"[",["T_CONSTANT_ENCAPSED_STRING","'_custom_option_row_sku'",845],"]",["T_WHITESPACE","   ",845],"=",["T_WHITESPACE"," ",845],["T_VARIABLE","$firstValue",845],"[",["T_CONSTANT_ENCAPSED_STRING","'sku'",845],"]",";",["T_WHITESPACE","\n                            ",845],["T_VARIABLE","$row",846],"[",["T_CONSTANT_ENCAPSED_STRING","'_custom_option_row_sort'",846],"]",["T_WHITESPACE","  ",846],"=",["T_WHITESPACE"," ",846],["T_VARIABLE","$firstValue",846],"[",["T_CONSTANT_ENCAPSED_STRING","'sort_order'",846],"]",";",["T_WHITESPACE","\n\n                            ",846],["T_VARIABLE","$defaultValueTitles",848],"[",["T_VARIABLE","$firstValue",848],"[",["T_CONSTANT_ENCAPSED_STRING","'option_type_id'",848],"]","]",["T_WHITESPACE"," ",848],"=",["T_WHITESPACE"," ",848],["T_VARIABLE","$firstValue",848],"[",["T_CONSTANT_ENCAPSED_STRING","'title'",848],"]",";",["T_WHITESPACE","\n                        ",848],"}",["T_WHITESPACE"," ",849],["T_ELSEIF","elseif",849],["T_WHITESPACE"," ",849],"(",["T_VARIABLE","$firstValue",849],"[",["T_CONSTANT_ENCAPSED_STRING","'title'",849],"]",["T_WHITESPACE"," ",849],["T_IS_NOT_EQUAL","!=",849],["T_WHITESPACE"," ",849],["T_VARIABLE","$customOptions",849],"[",["T_LNUMBER","0",849],"]","[",["T_CONSTANT_ENCAPSED_STRING","'_custom_option_row_title'",849],"]",")",["T_WHITESPACE"," ",849],"{",["T_WHITESPACE","\n                            ",849],["T_VARIABLE","$row",850],"[",["T_CONSTANT_ENCAPSED_STRING","'_custom_option_row_title'",850],"]",["T_WHITESPACE"," ",850],"=",["T_WHITESPACE"," ",850],["T_VARIABLE","$firstValue",850],"[",["T_CONSTANT_ENCAPSED_STRING","'title'",850],"]",";",["T_WHITESPACE","\n                        ",850],"}",["T_WHITESPACE","\n                    ",851],"}",["T_WHITESPACE","\n                    ",852],["T_IF","if",853],["T_WHITESPACE"," ",853],"(",["T_VARIABLE","$row",853],")",["T_WHITESPACE"," ",853],"{",["T_WHITESPACE","\n                        ",853],["T_IF","if",854],["T_WHITESPACE"," ",854],"(",["T_VARIABLE","$defaultStoreId",854],["T_WHITESPACE"," ",854],["T_IS_NOT_EQUAL","!=",854],["T_WHITESPACE"," ",854],["T_VARIABLE","$storeId",854],")",["T_WHITESPACE"," ",854],"{",["T_WHITESPACE","\n                            ",854],["T_VARIABLE","$row",855],"[",["T_CONSTANT_ENCAPSED_STRING","'_custom_option_store'",855],"]",["T_WHITESPACE"," ",855],"=",["T_WHITESPACE"," ",855],["T_VARIABLE","$this",855],["T_OBJECT_OPERATOR","->",855],["T_STRING","_storeIdToCode",855],"[",["T_VARIABLE","$storeId",855],"]",";",["T_WHITESPACE","\n                        ",855],"}",["T_WHITESPACE","\n                        ",856],["T_VARIABLE","$customOptionsDataPre",857],"[",["T_VARIABLE","$productId",857],"]","[",["T_VARIABLE","$optionId",857],"]","[","]",["T_WHITESPACE"," ",857],"=",["T_WHITESPACE"," ",857],["T_VARIABLE","$row",857],";",["T_WHITESPACE","\n                        ",857],["T_VARIABLE","$skip",858],["T_WHITESPACE"," ",858],"=",["T_WHITESPACE"," ",858],["T_STRING","true",858],";",["T_WHITESPACE","\n                    ",858],"}",["T_WHITESPACE","\n                    ",859],["T_FOREACH","foreach",860],["T_WHITESPACE"," ",860],"(",["T_VARIABLE","$values",860],["T_WHITESPACE"," ",860],["T_AS","as",860],["T_WHITESPACE"," ",860],["T_VARIABLE","$value",860],")",["T_WHITESPACE"," ",860],"{",["T_WHITESPACE","\n                        ",860],["T_IF","if",861],["T_WHITESPACE"," ",861],"(",["T_VARIABLE","$skip",861],")",["T_WHITESPACE"," ",861],"{",["T_WHITESPACE","\n                            ",861],["T_VARIABLE","$skip",862],["T_WHITESPACE"," ",862],"=",["T_WHITESPACE"," ",862],["T_STRING","false",862],";",["T_WHITESPACE","\n                            ",862],["T_CONTINUE","continue",863],";",["T_WHITESPACE","\n                        ",863],"}",["T_WHITESPACE","\n\n                        ",864],["T_VARIABLE","$row",866],["T_WHITESPACE"," ",866],"=",["T_WHITESPACE"," ",866],["T_ARRAY","array",866],"(",")",";",["T_WHITESPACE","\n                        ",866],["T_VARIABLE","$valuePriceType",867],["T_WHITESPACE"," ",867],"=",["T_WHITESPACE"," ",867],["T_VARIABLE","$value",867],"[",["T_CONSTANT_ENCAPSED_STRING","'price_type'",867],"]",["T_WHITESPACE"," ",867],["T_IS_EQUAL","==",867],["T_WHITESPACE"," ",867],["T_CONSTANT_ENCAPSED_STRING","'percent'",867],["T_WHITESPACE"," ",867],"?",["T_WHITESPACE"," ",867],["T_CONSTANT_ENCAPSED_STRING","'%'",867],["T_WHITESPACE"," ",867],":",["T_WHITESPACE"," ",867],["T_CONSTANT_ENCAPSED_STRING","''",867],";",["T_WHITESPACE","\n\n                        ",867],["T_IF","if",869],["T_WHITESPACE"," ",869],"(",["T_VARIABLE","$defaultStoreId",869],["T_WHITESPACE"," ",869],["T_IS_EQUAL","==",869],["T_WHITESPACE"," ",869],["T_VARIABLE","$storeId",869],")",["T_WHITESPACE"," ",869],"{",["T_WHITESPACE","\n                            ",869],["T_VARIABLE","$row",870],"[",["T_CONSTANT_ENCAPSED_STRING","'_custom_option_row_title'",870],"]",["T_WHITESPACE"," ",870],"=",["T_WHITESPACE"," ",870],["T_VARIABLE","$value",870],"[",["T_CONSTANT_ENCAPSED_STRING","'title'",870],"]",";",["T_WHITESPACE","\n                            ",870],["T_VARIABLE","$row",871],"[",["T_CONSTANT_ENCAPSED_STRING","'_custom_option_row_price'",871],"]",["T_WHITESPACE"," ",871],"=",["T_WHITESPACE"," ",871],["T_VARIABLE","$value",871],"[",["T_CONSTANT_ENCAPSED_STRING","'price'",871],"]",["T_WHITESPACE"," ",871],".",["T_WHITESPACE"," ",871],["T_VARIABLE","$valuePriceType",871],";",["T_WHITESPACE","\n                            ",871],["T_VARIABLE","$row",872],"[",["T_CONSTANT_ENCAPSED_STRING","'_custom_option_row_sku'",872],"]",["T_WHITESPACE","   ",872],"=",["T_WHITESPACE"," ",872],["T_VARIABLE","$value",872],"[",["T_CONSTANT_ENCAPSED_STRING","'sku'",872],"]",";",["T_WHITESPACE","\n                            ",872],["T_VARIABLE","$row",873],"[",["T_CONSTANT_ENCAPSED_STRING","'_custom_option_row_sort'",873],"]",["T_WHITESPACE","  ",873],"=",["T_WHITESPACE"," ",873],["T_VARIABLE","$value",873],"[",["T_CONSTANT_ENCAPSED_STRING","'sort_order'",873],"]",";",["T_WHITESPACE","\n                        ",873],"}",["T_WHITESPACE"," ",874],["T_ELSE","else",874],["T_WHITESPACE"," ",874],"{",["T_WHITESPACE","\n                            ",874],["T_VARIABLE","$row",875],"[",["T_CONSTANT_ENCAPSED_STRING","'_custom_option_row_title'",875],"]",["T_WHITESPACE"," ",875],"=",["T_WHITESPACE"," ",875],["T_VARIABLE","$value",875],"[",["T_CONSTANT_ENCAPSED_STRING","'title'",875],"]",";",["T_WHITESPACE","\n                        ",875],"}",["T_WHITESPACE","\n                        ",876],["T_IF","if",877],["T_WHITESPACE"," ",877],"(",["T_VARIABLE","$row",877],")",["T_WHITESPACE"," ",877],"{",["T_WHITESPACE","\n                            ",877],["T_IF","if",878],["T_WHITESPACE"," ",878],"(",["T_VARIABLE","$defaultStoreId",878],["T_WHITESPACE"," ",878],["T_IS_NOT_EQUAL","!=",878],["T_WHITESPACE"," ",878],["T_VARIABLE","$storeId",878],")",["T_WHITESPACE"," ",878],"{",["T_WHITESPACE","\n                                ",878],["T_VARIABLE","$row",879],"[",["T_CONSTANT_ENCAPSED_STRING","'_custom_option_store'",879],"]",["T_WHITESPACE"," ",879],"=",["T_WHITESPACE"," ",879],["T_VARIABLE","$this",879],["T_OBJECT_OPERATOR","->",879],["T_STRING","_storeIdToCode",879],"[",["T_VARIABLE","$storeId",879],"]",";",["T_WHITESPACE","\n                            ",879],"}",["T_WHITESPACE","\n                            ",880],["T_VARIABLE","$customOptionsDataPre",881],"[",["T_VARIABLE","$option",881],"[",["T_CONSTANT_ENCAPSED_STRING","'product_id'",881],"]","]","[",["T_VARIABLE","$option",881],"[",["T_CONSTANT_ENCAPSED_STRING","'option_id'",881],"]","]","[","]",["T_WHITESPACE"," ",881],"=",["T_WHITESPACE"," ",881],["T_VARIABLE","$row",881],";",["T_WHITESPACE","\n                        ",881],"}",["T_WHITESPACE","\n                    ",882],"}",["T_WHITESPACE","\n                    ",883],["T_VARIABLE","$option",884],["T_WHITESPACE"," ",884],"=",["T_WHITESPACE"," ",884],["T_STRING","null",884],";",["T_WHITESPACE","\n                ",884],"}",["T_WHITESPACE","\n                ",885],["T_VARIABLE","$options",886],["T_WHITESPACE"," ",886],"=",["T_WHITESPACE"," ",886],["T_STRING","null",886],";",["T_WHITESPACE","\n            ",886],"}",["T_WHITESPACE","\n            ",887],["T_FOREACH","foreach",888],["T_WHITESPACE"," ",888],"(",["T_VARIABLE","$customOptionsDataPre",888],["T_WHITESPACE"," ",888],["T_AS","as",888],["T_WHITESPACE"," ",888],["T_VARIABLE","$productId",888],["T_WHITESPACE"," ",888],["T_DOUBLE_ARROW","=>",888],["T_WHITESPACE"," ",888],"&",["T_VARIABLE","$optionsData",888],")",["T_WHITESPACE"," ",888],"{",["T_WHITESPACE","\n                ",888],["T_VARIABLE","$customOptionsData",889],"[",["T_VARIABLE","$productId",889],"]",["T_WHITESPACE"," ",889],"=",["T_WHITESPACE"," ",889],["T_ARRAY","array",889],"(",")",";",["T_WHITESPACE","\n\n                ",889],["T_FOREACH","foreach",891],["T_WHITESPACE"," ",891],"(",["T_VARIABLE","$optionsData",891],["T_WHITESPACE"," ",891],["T_AS","as",891],["T_WHITESPACE"," ",891],["T_VARIABLE","$optionId",891],["T_WHITESPACE"," ",891],["T_DOUBLE_ARROW","=>",891],["T_WHITESPACE"," ",891],"&",["T_VARIABLE","$optionRows",891],")",["T_WHITESPACE"," ",891],"{",["T_WHITESPACE","\n                    ",891],["T_VARIABLE","$customOptionsData",892],"[",["T_VARIABLE","$productId",892],"]",["T_WHITESPACE"," ",892],"=",["T_WHITESPACE"," ",892],["T_STRING","array_merge",892],"(",["T_VARIABLE","$customOptionsData",892],"[",["T_VARIABLE","$productId",892],"]",",",["T_WHITESPACE"," ",892],["T_VARIABLE","$optionRows",892],")",";",["T_WHITESPACE","\n                ",892],"}",["T_WHITESPACE","\n                ",893],["T_UNSET","unset",894],"(",["T_VARIABLE","$optionRows",894],",",["T_WHITESPACE"," ",894],["T_VARIABLE","$optionsData",894],")",";",["T_WHITESPACE","\n            ",894],"}",["T_WHITESPACE","\n            ",895],["T_UNSET","unset",896],"(",["T_VARIABLE","$customOptionsDataPre",896],")",";",["T_WHITESPACE","\n\n            ",896],["T_IF","if",898],["T_WHITESPACE"," ",898],"(",["T_VARIABLE","$offsetProducts",898],["T_WHITESPACE"," ",898],["T_IS_EQUAL","==",898],["T_WHITESPACE"," ",898],["T_LNUMBER","1",898],")",["T_WHITESPACE"," ",898],"{",["T_WHITESPACE","\n                ",898],["T_COMMENT","\/\/ create export file\n",899],["T_WHITESPACE","                ",900],["T_VARIABLE","$headerCols",900],["T_WHITESPACE"," ",900],"=",["T_WHITESPACE"," ",900],["T_STRING","array_merge",900],"(",["T_WHITESPACE","\n                    ",900],["T_ARRAY","array",901],"(",["T_WHITESPACE","\n                        ",901],["T_STRING","self",902],["T_DOUBLE_COLON","::",902],["T_STRING","COL_SKU",902],",",["T_WHITESPACE"," ",902],["T_STRING","self",902],["T_DOUBLE_COLON","::",902],["T_STRING","COL_STORE",902],",",["T_WHITESPACE"," ",902],["T_STRING","self",902],["T_DOUBLE_COLON","::",902],["T_STRING","COL_ATTR_SET",902],",",["T_WHITESPACE","\n                        ",902],["T_STRING","self",903],["T_DOUBLE_COLON","::",903],["T_STRING","COL_TYPE",903],",",["T_WHITESPACE"," ",903],["T_STRING","self",903],["T_DOUBLE_COLON","::",903],["T_STRING","COL_CATEGORY",903],",",["T_WHITESPACE"," ",903],["T_STRING","self",903],["T_DOUBLE_COLON","::",903],["T_STRING","COL_ROOT_CATEGORY",903],",",["T_WHITESPACE"," ",903],["T_CONSTANT_ENCAPSED_STRING","'_product_websites'",903],["T_WHITESPACE","\n                    ",903],")",",",["T_WHITESPACE","\n                    ",904],["T_VARIABLE","$validAttrCodes",905],",",["T_WHITESPACE","\n                    ",905],["T_STRING","reset",906],"(",["T_VARIABLE","$stockItemRows",906],")",["T_WHITESPACE"," ",906],"?",["T_WHITESPACE"," ",906],["T_STRING","array_keys",906],"(",["T_STRING","end",906],"(",["T_VARIABLE","$stockItemRows",906],")",")",["T_WHITESPACE"," ",906],":",["T_WHITESPACE"," ",906],["T_ARRAY","array",906],"(",")",",",["T_WHITESPACE","\n                    ",906],["T_ARRAY","array",907],"(",")",",",["T_WHITESPACE","\n                    ",907],["T_ARRAY","array",908],"(",["T_WHITESPACE","\n                        ",908],["T_CONSTANT_ENCAPSED_STRING","'_links_related_sku'",909],",",["T_WHITESPACE"," ",909],["T_CONSTANT_ENCAPSED_STRING","'_links_related_position'",909],",",["T_WHITESPACE"," ",909],["T_CONSTANT_ENCAPSED_STRING","'_links_crosssell_sku'",909],",",["T_WHITESPACE","\n                        ",909],["T_CONSTANT_ENCAPSED_STRING","'_links_crosssell_position'",910],",",["T_WHITESPACE"," ",910],["T_CONSTANT_ENCAPSED_STRING","'_links_upsell_sku'",910],",",["T_WHITESPACE"," ",910],["T_CONSTANT_ENCAPSED_STRING","'_links_upsell_position'",910],",",["T_WHITESPACE","\n                        ",910],["T_CONSTANT_ENCAPSED_STRING","'_associated_sku'",911],",",["T_WHITESPACE"," ",911],["T_CONSTANT_ENCAPSED_STRING","'_associated_default_qty'",911],",",["T_WHITESPACE"," ",911],["T_CONSTANT_ENCAPSED_STRING","'_associated_position'",911],["T_WHITESPACE","\n                    ",911],")",",",["T_WHITESPACE","\n                    ",912],["T_ARRAY","array",913],"(",["T_CONSTANT_ENCAPSED_STRING","'_tier_price_website'",913],",",["T_WHITESPACE"," ",913],["T_CONSTANT_ENCAPSED_STRING","'_tier_price_customer_group'",913],",",["T_WHITESPACE"," ",913],["T_CONSTANT_ENCAPSED_STRING","'_tier_price_qty'",913],",",["T_WHITESPACE"," ",913],["T_CONSTANT_ENCAPSED_STRING","'_tier_price_price'",913],")",",",["T_WHITESPACE","\n                    ",913],["T_ARRAY","array",914],"(",["T_CONSTANT_ENCAPSED_STRING","'_group_price_website'",914],",",["T_WHITESPACE"," ",914],["T_CONSTANT_ENCAPSED_STRING","'_group_price_customer_group'",914],",",["T_WHITESPACE"," ",914],["T_CONSTANT_ENCAPSED_STRING","'_group_price_price'",914],")",",",["T_WHITESPACE","\n                    ",914],["T_ARRAY","array",915],"(",["T_WHITESPACE","\n                        ",915],["T_CONSTANT_ENCAPSED_STRING","'_media_attribute_id'",916],",",["T_WHITESPACE","\n                        ",916],["T_CONSTANT_ENCAPSED_STRING","'_media_image'",917],",",["T_WHITESPACE","\n                        ",917],["T_CONSTANT_ENCAPSED_STRING","'_media_lable'",918],",",["T_WHITESPACE","\n                        ",918],["T_CONSTANT_ENCAPSED_STRING","'_media_position'",919],",",["T_WHITESPACE","\n                        ",919],["T_CONSTANT_ENCAPSED_STRING","'_media_is_disabled'",920],["T_WHITESPACE","\n                    ",920],")",["T_WHITESPACE","\n                ",921],")",";",["T_WHITESPACE","\n\n                ",922],["T_COMMENT","\/\/ have we merge custom options columns\n",924],["T_WHITESPACE","                ",925],["T_IF","if",925],["T_WHITESPACE"," ",925],"(",["T_VARIABLE","$customOptionsData",925],")",["T_WHITESPACE"," ",925],"{",["T_WHITESPACE","\n                    ",925],["T_VARIABLE","$headerCols",926],["T_WHITESPACE"," ",926],"=",["T_WHITESPACE"," ",926],["T_STRING","array_merge",926],"(",["T_VARIABLE","$headerCols",926],",",["T_WHITESPACE"," ",926],["T_VARIABLE","$customOptCols",926],")",";",["T_WHITESPACE","\n                ",926],"}",["T_WHITESPACE","\n\n                ",927],["T_COMMENT","\/\/ have we merge configurable products data\n",929],["T_WHITESPACE","                ",930],["T_IF","if",930],["T_WHITESPACE"," ",930],"(",["T_VARIABLE","$configurableData",930],")",["T_WHITESPACE"," ",930],"{",["T_WHITESPACE","\n                    ",930],["T_VARIABLE","$headerCols",931],["T_WHITESPACE"," ",931],"=",["T_WHITESPACE"," ",931],["T_STRING","array_merge",931],"(",["T_VARIABLE","$headerCols",931],",",["T_WHITESPACE"," ",931],["T_ARRAY","array",931],"(",["T_WHITESPACE","\n                        ",931],["T_CONSTANT_ENCAPSED_STRING","'_super_products_sku'",932],",",["T_WHITESPACE"," ",932],["T_CONSTANT_ENCAPSED_STRING","'_super_attribute_code'",932],",",["T_WHITESPACE","\n                        ",932],["T_CONSTANT_ENCAPSED_STRING","'_super_attribute_option'",933],",",["T_WHITESPACE"," ",933],["T_CONSTANT_ENCAPSED_STRING","'_super_attribute_price_corr'",933],["T_WHITESPACE","\n                    ",933],")",")",";",["T_WHITESPACE","\n                ",934],"}",["T_WHITESPACE","\n\n                ",935],["T_VARIABLE","$writer",937],["T_OBJECT_OPERATOR","->",937],["T_STRING","setHeaderCols",937],"(",["T_VARIABLE","$headerCols",937],")",";",["T_WHITESPACE","\n            ",937],"}",["T_WHITESPACE","\n\n            ",938],["T_FOREACH","foreach",940],["T_WHITESPACE"," ",940],"(",["T_VARIABLE","$dataRows",940],["T_WHITESPACE"," ",940],["T_AS","as",940],["T_WHITESPACE"," ",940],["T_VARIABLE","$productId",940],["T_WHITESPACE"," ",940],["T_DOUBLE_ARROW","=>",940],["T_WHITESPACE"," ",940],"&",["T_VARIABLE","$productData",940],")",["T_WHITESPACE"," ",940],"{",["T_WHITESPACE","\n                ",940],["T_FOREACH","foreach",941],["T_WHITESPACE"," ",941],"(",["T_VARIABLE","$productData",941],["T_WHITESPACE"," ",941],["T_AS","as",941],["T_WHITESPACE"," ",941],["T_VARIABLE","$storeId",941],["T_WHITESPACE"," ",941],["T_DOUBLE_ARROW","=>",941],["T_WHITESPACE"," ",941],"&",["T_VARIABLE","$dataRow",941],")",["T_WHITESPACE"," ",941],"{",["T_WHITESPACE","\n                    ",941],["T_IF","if",942],["T_WHITESPACE"," ",942],"(",["T_VARIABLE","$defaultStoreId",942],["T_WHITESPACE"," ",942],["T_IS_NOT_EQUAL","!=",942],["T_WHITESPACE"," ",942],["T_VARIABLE","$storeId",942],")",["T_WHITESPACE"," ",942],"{",["T_WHITESPACE","\n                        ",942],["T_VARIABLE","$dataRow",943],"[",["T_STRING","self",943],["T_DOUBLE_COLON","::",943],["T_STRING","COL_SKU",943],"]",["T_WHITESPACE","      ",943],"=",["T_WHITESPACE"," ",943],["T_STRING","null",943],";",["T_WHITESPACE","\n                        ",943],["T_VARIABLE","$dataRow",944],"[",["T_STRING","self",944],["T_DOUBLE_COLON","::",944],["T_STRING","COL_ATTR_SET",944],"]",["T_WHITESPACE"," ",944],"=",["T_WHITESPACE"," ",944],["T_STRING","null",944],";",["T_WHITESPACE","\n                        ",944],["T_VARIABLE","$dataRow",945],"[",["T_STRING","self",945],["T_DOUBLE_COLON","::",945],["T_STRING","COL_TYPE",945],"]",["T_WHITESPACE","     ",945],"=",["T_WHITESPACE"," ",945],["T_STRING","null",945],";",["T_WHITESPACE","\n                    ",945],"}",["T_WHITESPACE"," ",946],["T_ELSE","else",946],["T_WHITESPACE"," ",946],"{",["T_WHITESPACE","\n                        ",946],["T_VARIABLE","$dataRow",947],"[",["T_STRING","self",947],["T_DOUBLE_COLON","::",947],["T_STRING","COL_STORE",947],"]",["T_WHITESPACE"," ",947],"=",["T_WHITESPACE"," ",947],["T_STRING","null",947],";",["T_WHITESPACE","\n                        ",947],["T_VARIABLE","$dataRow",948],["T_WHITESPACE"," ",948],["T_PLUS_EQUAL","+=",948],["T_WHITESPACE"," ",948],["T_VARIABLE","$stockItemRows",948],"[",["T_VARIABLE","$productId",948],"]",";",["T_WHITESPACE","\n                    ",948],"}",["T_WHITESPACE","\n\n                    ",949],["T_VARIABLE","$this",951],["T_OBJECT_OPERATOR","->",951],["T_STRING","_updateDataWithCategoryColumns",951],"(",["T_VARIABLE","$dataRow",951],",",["T_WHITESPACE"," ",951],["T_VARIABLE","$rowCategories",951],",",["T_WHITESPACE"," ",951],["T_VARIABLE","$productId",951],")",";",["T_WHITESPACE","\n                    ",951],["T_IF","if",952],["T_WHITESPACE"," ",952],"(",["T_VARIABLE","$rowWebsites",952],"[",["T_VARIABLE","$productId",952],"]",")",["T_WHITESPACE"," ",952],"{",["T_WHITESPACE","\n                        ",952],["T_VARIABLE","$dataRow",953],"[",["T_CONSTANT_ENCAPSED_STRING","'_product_websites'",953],"]",["T_WHITESPACE"," ",953],"=",["T_WHITESPACE"," ",953],["T_VARIABLE","$this",953],["T_OBJECT_OPERATOR","->",953],["T_STRING","_websiteIdToCode",953],"[",["T_STRING","array_shift",953],"(",["T_VARIABLE","$rowWebsites",953],"[",["T_VARIABLE","$productId",953],"]",")","]",";",["T_WHITESPACE","\n                    ",953],"}",["T_WHITESPACE","\n                    ",954],["T_IF","if",955],["T_WHITESPACE"," ",955],"(","!",["T_EMPTY","empty",955],"(",["T_VARIABLE","$rowTierPrices",955],"[",["T_VARIABLE","$productId",955],"]",")",")",["T_WHITESPACE"," ",955],"{",["T_WHITESPACE","\n                        ",955],["T_VARIABLE","$dataRow",956],["T_WHITESPACE"," ",956],"=",["T_WHITESPACE"," ",956],["T_STRING","array_merge",956],"(",["T_VARIABLE","$dataRow",956],",",["T_WHITESPACE"," ",956],["T_STRING","array_shift",956],"(",["T_VARIABLE","$rowTierPrices",956],"[",["T_VARIABLE","$productId",956],"]",")",")",";",["T_WHITESPACE","\n                    ",956],"}",["T_WHITESPACE","\n                    ",957],["T_IF","if",958],["T_WHITESPACE"," ",958],"(","!",["T_EMPTY","empty",958],"(",["T_VARIABLE","$rowGroupPrices",958],"[",["T_VARIABLE","$productId",958],"]",")",")",["T_WHITESPACE"," ",958],"{",["T_WHITESPACE","\n                        ",958],["T_VARIABLE","$dataRow",959],["T_WHITESPACE"," ",959],"=",["T_WHITESPACE"," ",959],["T_STRING","array_merge",959],"(",["T_VARIABLE","$dataRow",959],",",["T_WHITESPACE"," ",959],["T_STRING","array_shift",959],"(",["T_VARIABLE","$rowGroupPrices",959],"[",["T_VARIABLE","$productId",959],"]",")",")",";",["T_WHITESPACE","\n                    ",959],"}",["T_WHITESPACE","\n                    ",960],["T_IF","if",961],["T_WHITESPACE"," ",961],"(","!",["T_EMPTY","empty",961],"(",["T_VARIABLE","$mediaGalery",961],"[",["T_VARIABLE","$productId",961],"]",")",")",["T_WHITESPACE"," ",961],"{",["T_WHITESPACE","\n                        ",961],["T_VARIABLE","$dataRow",962],["T_WHITESPACE"," ",962],"=",["T_WHITESPACE"," ",962],["T_STRING","array_merge",962],"(",["T_VARIABLE","$dataRow",962],",",["T_WHITESPACE"," ",962],["T_STRING","array_shift",962],"(",["T_VARIABLE","$mediaGalery",962],"[",["T_VARIABLE","$productId",962],"]",")",")",";",["T_WHITESPACE","\n                    ",962],"}",["T_WHITESPACE","\n                    ",963],["T_FOREACH","foreach",964],["T_WHITESPACE"," ",964],"(",["T_VARIABLE","$linkIdColPrefix",964],["T_WHITESPACE"," ",964],["T_AS","as",964],["T_WHITESPACE"," ",964],["T_VARIABLE","$linkId",964],["T_WHITESPACE"," ",964],["T_DOUBLE_ARROW","=>",964],["T_WHITESPACE"," ",964],"&",["T_VARIABLE","$colPrefix",964],")",["T_WHITESPACE"," ",964],"{",["T_WHITESPACE","\n                        ",964],["T_IF","if",965],["T_WHITESPACE"," ",965],"(","!",["T_EMPTY","empty",965],"(",["T_VARIABLE","$linksRows",965],"[",["T_VARIABLE","$productId",965],"]","[",["T_VARIABLE","$linkId",965],"]",")",")",["T_WHITESPACE"," ",965],"{",["T_WHITESPACE","\n                            ",965],["T_VARIABLE","$linkData",966],["T_WHITESPACE"," ",966],"=",["T_WHITESPACE"," ",966],["T_STRING","array_shift",966],"(",["T_VARIABLE","$linksRows",966],"[",["T_VARIABLE","$productId",966],"]","[",["T_VARIABLE","$linkId",966],"]",")",";",["T_WHITESPACE","\n                            ",966],["T_VARIABLE","$dataRow",967],"[",["T_VARIABLE","$colPrefix",967],["T_WHITESPACE"," ",967],".",["T_WHITESPACE"," ",967],["T_CONSTANT_ENCAPSED_STRING","'position'",967],"]",["T_WHITESPACE"," ",967],"=",["T_WHITESPACE"," ",967],["T_VARIABLE","$linkData",967],"[",["T_CONSTANT_ENCAPSED_STRING","'position'",967],"]",";",["T_WHITESPACE","\n                            ",967],["T_VARIABLE","$dataRow",968],"[",["T_VARIABLE","$colPrefix",968],["T_WHITESPACE"," ",968],".",["T_WHITESPACE"," ",968],["T_CONSTANT_ENCAPSED_STRING","'sku'",968],"]",["T_WHITESPACE"," ",968],"=",["T_WHITESPACE"," ",968],["T_VARIABLE","$linkData",968],"[",["T_CONSTANT_ENCAPSED_STRING","'sku'",968],"]",";",["T_WHITESPACE","\n\n                            ",968],["T_IF","if",970],["T_WHITESPACE"," ",970],"(",["T_STRING","null",970],["T_WHITESPACE"," ",970],["T_IS_NOT_IDENTICAL","!==",970],["T_WHITESPACE"," ",970],["T_VARIABLE","$linkData",970],"[",["T_CONSTANT_ENCAPSED_STRING","'default_qty'",970],"]",")",["T_WHITESPACE"," ",970],"{",["T_WHITESPACE","\n                                ",970],["T_VARIABLE","$dataRow",971],"[",["T_VARIABLE","$colPrefix",971],["T_WHITESPACE"," ",971],".",["T_WHITESPACE"," ",971],["T_CONSTANT_ENCAPSED_STRING","'default_qty'",971],"]",["T_WHITESPACE"," ",971],"=",["T_WHITESPACE"," ",971],["T_VARIABLE","$linkData",971],"[",["T_CONSTANT_ENCAPSED_STRING","'default_qty'",971],"]",";",["T_WHITESPACE","\n                            ",971],"}",["T_WHITESPACE","\n                        ",972],"}",["T_WHITESPACE","\n                    ",973],"}",["T_WHITESPACE","\n                    ",974],["T_IF","if",975],["T_WHITESPACE"," ",975],"(","!",["T_EMPTY","empty",975],"(",["T_VARIABLE","$customOptionsData",975],"[",["T_VARIABLE","$productId",975],"]",")",")",["T_WHITESPACE"," ",975],"{",["T_WHITESPACE","\n                        ",975],["T_VARIABLE","$dataRow",976],["T_WHITESPACE"," ",976],"=",["T_WHITESPACE"," ",976],["T_STRING","array_merge",976],"(",["T_VARIABLE","$dataRow",976],",",["T_WHITESPACE"," ",976],["T_STRING","array_shift",976],"(",["T_VARIABLE","$customOptionsData",976],"[",["T_VARIABLE","$productId",976],"]",")",")",";",["T_WHITESPACE","\n                    ",976],"}",["T_WHITESPACE","\n                    ",977],["T_IF","if",978],["T_WHITESPACE"," ",978],"(","!",["T_EMPTY","empty",978],"(",["T_VARIABLE","$configurableData",978],"[",["T_VARIABLE","$productId",978],"]",")",")",["T_WHITESPACE"," ",978],"{",["T_WHITESPACE","\n                        ",978],["T_VARIABLE","$dataRow",979],["T_WHITESPACE"," ",979],"=",["T_WHITESPACE"," ",979],["T_STRING","array_merge",979],"(",["T_VARIABLE","$dataRow",979],",",["T_WHITESPACE"," ",979],["T_STRING","array_shift",979],"(",["T_VARIABLE","$configurableData",979],"[",["T_VARIABLE","$productId",979],"]",")",")",";",["T_WHITESPACE","\n                    ",979],"}",["T_WHITESPACE","\n                    ",980],["T_IF","if",981],"(","!",["T_EMPTY","empty",981],"(",["T_VARIABLE","$rowMultiselects",981],"[",["T_VARIABLE","$productId",981],"]","[",["T_VARIABLE","$storeId",981],"]",")",")",["T_WHITESPACE"," ",981],"{",["T_WHITESPACE","\n                        ",981],["T_FOREACH","foreach",982],["T_WHITESPACE"," ",982],"(",["T_VARIABLE","$rowMultiselects",982],"[",["T_VARIABLE","$productId",982],"]","[",["T_VARIABLE","$storeId",982],"]",["T_WHITESPACE"," ",982],["T_AS","as",982],["T_WHITESPACE"," ",982],["T_VARIABLE","$attrKey",982],["T_WHITESPACE"," ",982],["T_DOUBLE_ARROW","=>",982],["T_WHITESPACE"," ",982],["T_VARIABLE","$attrVal",982],")",["T_WHITESPACE"," ",982],"{",["T_WHITESPACE","\n                            ",982],["T_IF","if",983],["T_WHITESPACE"," ",983],"(",["T_ISSET","isset",983],"(",["T_VARIABLE","$rowMultiselects",983],"[",["T_VARIABLE","$productId",983],"]","[",["T_VARIABLE","$storeId",983],"]","[",["T_VARIABLE","$attrKey",983],"]",")",")",["T_WHITESPACE"," ",983],"{",["T_WHITESPACE","\n                                ",983],["T_VARIABLE","$dataRow",984],"[",["T_VARIABLE","$attrKey",984],"]",["T_WHITESPACE"," ",984],"=",["T_WHITESPACE"," ",984],["T_STRING","array_shift",984],"(",["T_VARIABLE","$rowMultiselects",984],"[",["T_VARIABLE","$productId",984],"]","[",["T_VARIABLE","$storeId",984],"]","[",["T_VARIABLE","$attrKey",984],"]",")",";",["T_WHITESPACE","\n                            ",984],"}",["T_WHITESPACE","\n                        ",985],"}",["T_WHITESPACE","\n                    ",986],"}",["T_WHITESPACE","\n\n                    ",987],["T_VARIABLE","$writer",989],["T_OBJECT_OPERATOR","->",989],["T_STRING","writeRow",989],"(",["T_VARIABLE","$dataRow",989],")",";",["T_WHITESPACE","\n                    ",989],["T_COMMENT","\/\/ calculate largest links block\n",990],["T_WHITESPACE","                    ",991],["T_VARIABLE","$largestLinks",991],["T_WHITESPACE"," ",991],"=",["T_WHITESPACE"," ",991],["T_LNUMBER","0",991],";",["T_WHITESPACE","\n\n                    ",991],["T_IF","if",993],["T_WHITESPACE"," ",993],"(",["T_ISSET","isset",993],"(",["T_VARIABLE","$linksRows",993],"[",["T_VARIABLE","$productId",993],"]",")",")",["T_WHITESPACE"," ",993],"{",["T_WHITESPACE","\n                        ",993],["T_VARIABLE","$linksRowsKeys",994],["T_WHITESPACE"," ",994],"=",["T_WHITESPACE"," ",994],["T_STRING","array_keys",994],"(",["T_VARIABLE","$linksRows",994],"[",["T_VARIABLE","$productId",994],"]",")",";",["T_WHITESPACE","\n                        ",994],["T_FOREACH","foreach",995],["T_WHITESPACE"," ",995],"(",["T_VARIABLE","$linksRowsKeys",995],["T_WHITESPACE"," ",995],["T_AS","as",995],["T_WHITESPACE"," ",995],["T_VARIABLE","$linksRowsKey",995],")",["T_WHITESPACE"," ",995],"{",["T_WHITESPACE","\n                            ",995],["T_VARIABLE","$largestLinks",996],["T_WHITESPACE"," ",996],"=",["T_WHITESPACE"," ",996],["T_STRING","max",996],"(",["T_VARIABLE","$largestLinks",996],",",["T_WHITESPACE"," ",996],["T_STRING","count",996],"(",["T_VARIABLE","$linksRows",996],"[",["T_VARIABLE","$productId",996],"]","[",["T_VARIABLE","$linksRowsKey",996],"]",")",")",";",["T_WHITESPACE","\n                        ",996],"}",["T_WHITESPACE","\n                    ",997],"}",["T_WHITESPACE","\n                    ",998],["T_VARIABLE","$additionalRowsCount",999],["T_WHITESPACE"," ",999],"=",["T_WHITESPACE"," ",999],["T_STRING","max",999],"(",["T_WHITESPACE","\n                        ",999],["T_STRING","count",1000],"(",["T_VARIABLE","$rowCategories",1000],"[",["T_VARIABLE","$productId",1000],"]",")",",",["T_WHITESPACE","\n                        ",1000],["T_STRING","count",1001],"(",["T_VARIABLE","$rowWebsites",1001],"[",["T_VARIABLE","$productId",1001],"]",")",",",["T_WHITESPACE","\n                        ",1001],["T_VARIABLE","$largestLinks",1002],["T_WHITESPACE","\n                    ",1002],")",";",["T_WHITESPACE","\n                    ",1003],["T_IF","if",1004],["T_WHITESPACE"," ",1004],"(","!",["T_EMPTY","empty",1004],"(",["T_VARIABLE","$rowTierPrices",1004],"[",["T_VARIABLE","$productId",1004],"]",")",")",["T_WHITESPACE"," ",1004],"{",["T_WHITESPACE","\n                        ",1004],["T_VARIABLE","$additionalRowsCount",1005],["T_WHITESPACE"," ",1005],"=",["T_WHITESPACE"," ",1005],["T_STRING","max",1005],"(",["T_VARIABLE","$additionalRowsCount",1005],",",["T_WHITESPACE"," ",1005],["T_STRING","count",1005],"(",["T_VARIABLE","$rowTierPrices",1005],"[",["T_VARIABLE","$productId",1005],"]",")",")",";",["T_WHITESPACE","\n                    ",1005],"}",["T_WHITESPACE","\n                    ",1006],["T_IF","if",1007],["T_WHITESPACE"," ",1007],"(","!",["T_EMPTY","empty",1007],"(",["T_VARIABLE","$rowGroupPrices",1007],"[",["T_VARIABLE","$productId",1007],"]",")",")",["T_WHITESPACE"," ",1007],"{",["T_WHITESPACE","\n                        ",1007],["T_VARIABLE","$additionalRowsCount",1008],["T_WHITESPACE"," ",1008],"=",["T_WHITESPACE"," ",1008],["T_STRING","max",1008],"(",["T_VARIABLE","$additionalRowsCount",1008],",",["T_WHITESPACE"," ",1008],["T_STRING","count",1008],"(",["T_VARIABLE","$rowGroupPrices",1008],"[",["T_VARIABLE","$productId",1008],"]",")",")",";",["T_WHITESPACE","\n                    ",1008],"}",["T_WHITESPACE","\n                    ",1009],["T_IF","if",1010],["T_WHITESPACE"," ",1010],"(","!",["T_EMPTY","empty",1010],"(",["T_VARIABLE","$mediaGalery",1010],"[",["T_VARIABLE","$productId",1010],"]",")",")",["T_WHITESPACE"," ",1010],"{",["T_WHITESPACE","\n                        ",1010],["T_VARIABLE","$additionalRowsCount",1011],["T_WHITESPACE"," ",1011],"=",["T_WHITESPACE"," ",1011],["T_STRING","max",1011],"(",["T_VARIABLE","$additionalRowsCount",1011],",",["T_WHITESPACE"," ",1011],["T_STRING","count",1011],"(",["T_VARIABLE","$mediaGalery",1011],"[",["T_VARIABLE","$productId",1011],"]",")",")",";",["T_WHITESPACE","\n                    ",1011],"}",["T_WHITESPACE","\n                    ",1012],["T_IF","if",1013],["T_WHITESPACE"," ",1013],"(","!",["T_EMPTY","empty",1013],"(",["T_VARIABLE","$customOptionsData",1013],"[",["T_VARIABLE","$productId",1013],"]",")",")",["T_WHITESPACE"," ",1013],"{",["T_WHITESPACE","\n                        ",1013],["T_VARIABLE","$additionalRowsCount",1014],["T_WHITESPACE"," ",1014],"=",["T_WHITESPACE"," ",1014],["T_STRING","max",1014],"(",["T_VARIABLE","$additionalRowsCount",1014],",",["T_WHITESPACE"," ",1014],["T_STRING","count",1014],"(",["T_VARIABLE","$customOptionsData",1014],"[",["T_VARIABLE","$productId",1014],"]",")",")",";",["T_WHITESPACE","\n                    ",1014],"}",["T_WHITESPACE","\n                    ",1015],["T_IF","if",1016],["T_WHITESPACE"," ",1016],"(","!",["T_EMPTY","empty",1016],"(",["T_VARIABLE","$configurableData",1016],"[",["T_VARIABLE","$productId",1016],"]",")",")",["T_WHITESPACE"," ",1016],"{",["T_WHITESPACE","\n                        ",1016],["T_VARIABLE","$additionalRowsCount",1017],["T_WHITESPACE"," ",1017],"=",["T_WHITESPACE"," ",1017],["T_STRING","max",1017],"(",["T_VARIABLE","$additionalRowsCount",1017],",",["T_WHITESPACE"," ",1017],["T_STRING","count",1017],"(",["T_VARIABLE","$configurableData",1017],"[",["T_VARIABLE","$productId",1017],"]",")",")",";",["T_WHITESPACE","\n                    ",1017],"}",["T_WHITESPACE","\n                    ",1018],["T_IF","if",1019],["T_WHITESPACE"," ",1019],"(","!",["T_EMPTY","empty",1019],"(",["T_VARIABLE","$rowMultiselects",1019],"[",["T_VARIABLE","$productId",1019],"]","[",["T_VARIABLE","$storeId",1019],"]",")",")",["T_WHITESPACE"," ",1019],"{",["T_WHITESPACE","\n                        ",1019],["T_FOREACH","foreach",1020],"(",["T_VARIABLE","$rowMultiselects",1020],"[",["T_VARIABLE","$productId",1020],"]","[",["T_VARIABLE","$storeId",1020],"]",["T_WHITESPACE"," ",1020],["T_AS","as",1020],["T_WHITESPACE"," ",1020],["T_VARIABLE","$attributes",1020],")",["T_WHITESPACE"," ",1020],"{",["T_WHITESPACE","\n                            ",1020],["T_VARIABLE","$additionalRowsCount",1021],["T_WHITESPACE"," ",1021],"=",["T_WHITESPACE"," ",1021],["T_STRING","max",1021],"(",["T_VARIABLE","$additionalRowsCount",1021],",",["T_WHITESPACE"," ",1021],["T_STRING","count",1021],"(",["T_VARIABLE","$attributes",1021],")",")",";",["T_WHITESPACE","\n                        ",1021],"}",["T_WHITESPACE","\n                    ",1022],"}",["T_WHITESPACE","\n                    ",1023],["T_IF","if",1024],["T_WHITESPACE"," ",1024],"(",["T_VARIABLE","$additionalRowsCount",1024],")",["T_WHITESPACE"," ",1024],"{",["T_WHITESPACE","\n                        ",1024],["T_FOR","for",1025],["T_WHITESPACE"," ",1025],"(",["T_VARIABLE","$i",1025],["T_WHITESPACE"," ",1025],"=",["T_WHITESPACE"," ",1025],["T_LNUMBER","0",1025],";",["T_WHITESPACE"," ",1025],["T_VARIABLE","$i",1025],["T_WHITESPACE"," ",1025],"<",["T_WHITESPACE"," ",1025],["T_VARIABLE","$additionalRowsCount",1025],";",["T_WHITESPACE"," ",1025],["T_VARIABLE","$i",1025],["T_INC","++",1025],")",["T_WHITESPACE"," ",1025],"{",["T_WHITESPACE","\n                            ",1025],["T_VARIABLE","$dataRow",1026],["T_WHITESPACE"," ",1026],"=",["T_WHITESPACE"," ",1026],["T_ARRAY","array",1026],"(",")",";",["T_WHITESPACE","\n\n                            ",1026],["T_VARIABLE","$this",1028],["T_OBJECT_OPERATOR","->",1028],["T_STRING","_updateDataWithCategoryColumns",1028],"(",["T_VARIABLE","$dataRow",1028],",",["T_WHITESPACE"," ",1028],["T_VARIABLE","$rowCategories",1028],",",["T_WHITESPACE"," ",1028],["T_VARIABLE","$productId",1028],")",";",["T_WHITESPACE","\n                            ",1028],["T_IF","if",1029],["T_WHITESPACE"," ",1029],"(",["T_VARIABLE","$rowWebsites",1029],"[",["T_VARIABLE","$productId",1029],"]",")",["T_WHITESPACE"," ",1029],"{",["T_WHITESPACE","\n                                ",1029],["T_VARIABLE","$dataRow",1030],"[",["T_CONSTANT_ENCAPSED_STRING","'_product_websites'",1030],"]",["T_WHITESPACE"," ",1030],"=",["T_WHITESPACE"," ",1030],["T_VARIABLE","$this",1030],["T_WHITESPACE","\n                                    ",1030],["T_OBJECT_OPERATOR","->",1031],["T_STRING","_websiteIdToCode",1031],"[",["T_STRING","array_shift",1031],"(",["T_VARIABLE","$rowWebsites",1031],"[",["T_VARIABLE","$productId",1031],"]",")","]",";",["T_WHITESPACE","\n                            ",1031],"}",["T_WHITESPACE","\n                            ",1032],["T_IF","if",1033],["T_WHITESPACE"," ",1033],"(","!",["T_EMPTY","empty",1033],"(",["T_VARIABLE","$rowTierPrices",1033],"[",["T_VARIABLE","$productId",1033],"]",")",")",["T_WHITESPACE"," ",1033],"{",["T_WHITESPACE","\n                                ",1033],["T_VARIABLE","$dataRow",1034],["T_WHITESPACE"," ",1034],"=",["T_WHITESPACE"," ",1034],["T_STRING","array_merge",1034],"(",["T_VARIABLE","$dataRow",1034],",",["T_WHITESPACE"," ",1034],["T_STRING","array_shift",1034],"(",["T_VARIABLE","$rowTierPrices",1034],"[",["T_VARIABLE","$productId",1034],"]",")",")",";",["T_WHITESPACE","\n                            ",1034],"}",["T_WHITESPACE","\n                            ",1035],["T_IF","if",1036],["T_WHITESPACE"," ",1036],"(","!",["T_EMPTY","empty",1036],"(",["T_VARIABLE","$rowGroupPrices",1036],"[",["T_VARIABLE","$productId",1036],"]",")",")",["T_WHITESPACE"," ",1036],"{",["T_WHITESPACE","\n                                ",1036],["T_VARIABLE","$dataRow",1037],["T_WHITESPACE"," ",1037],"=",["T_WHITESPACE"," ",1037],["T_STRING","array_merge",1037],"(",["T_VARIABLE","$dataRow",1037],",",["T_WHITESPACE"," ",1037],["T_STRING","array_shift",1037],"(",["T_VARIABLE","$rowGroupPrices",1037],"[",["T_VARIABLE","$productId",1037],"]",")",")",";",["T_WHITESPACE","\n                            ",1037],"}",["T_WHITESPACE","\n                            ",1038],["T_IF","if",1039],["T_WHITESPACE"," ",1039],"(","!",["T_EMPTY","empty",1039],"(",["T_VARIABLE","$mediaGalery",1039],"[",["T_VARIABLE","$productId",1039],"]",")",")",["T_WHITESPACE"," ",1039],"{",["T_WHITESPACE","\n                                ",1039],["T_VARIABLE","$dataRow",1040],["T_WHITESPACE"," ",1040],"=",["T_WHITESPACE"," ",1040],["T_STRING","array_merge",1040],"(",["T_VARIABLE","$dataRow",1040],",",["T_WHITESPACE"," ",1040],["T_STRING","array_shift",1040],"(",["T_VARIABLE","$mediaGalery",1040],"[",["T_VARIABLE","$productId",1040],"]",")",")",";",["T_WHITESPACE","\n                            ",1040],"}",["T_WHITESPACE","\n                            ",1041],["T_FOREACH","foreach",1042],["T_WHITESPACE"," ",1042],"(",["T_VARIABLE","$linkIdColPrefix",1042],["T_WHITESPACE"," ",1042],["T_AS","as",1042],["T_WHITESPACE"," ",1042],["T_VARIABLE","$linkId",1042],["T_WHITESPACE"," ",1042],["T_DOUBLE_ARROW","=>",1042],["T_WHITESPACE"," ",1042],"&",["T_VARIABLE","$colPrefix",1042],")",["T_WHITESPACE"," ",1042],"{",["T_WHITESPACE","\n                                ",1042],["T_IF","if",1043],["T_WHITESPACE"," ",1043],"(","!",["T_EMPTY","empty",1043],"(",["T_VARIABLE","$linksRows",1043],"[",["T_VARIABLE","$productId",1043],"]","[",["T_VARIABLE","$linkId",1043],"]",")",")",["T_WHITESPACE"," ",1043],"{",["T_WHITESPACE","\n                                    ",1043],["T_VARIABLE","$linkData",1044],["T_WHITESPACE"," ",1044],"=",["T_WHITESPACE"," ",1044],["T_STRING","array_shift",1044],"(",["T_VARIABLE","$linksRows",1044],"[",["T_VARIABLE","$productId",1044],"]","[",["T_VARIABLE","$linkId",1044],"]",")",";",["T_WHITESPACE","\n                                    ",1044],["T_VARIABLE","$dataRow",1045],"[",["T_VARIABLE","$colPrefix",1045],["T_WHITESPACE"," ",1045],".",["T_WHITESPACE"," ",1045],["T_CONSTANT_ENCAPSED_STRING","'position'",1045],"]",["T_WHITESPACE"," ",1045],"=",["T_WHITESPACE"," ",1045],["T_VARIABLE","$linkData",1045],"[",["T_CONSTANT_ENCAPSED_STRING","'position'",1045],"]",";",["T_WHITESPACE","\n                                    ",1045],["T_VARIABLE","$dataRow",1046],"[",["T_VARIABLE","$colPrefix",1046],["T_WHITESPACE"," ",1046],".",["T_WHITESPACE"," ",1046],["T_CONSTANT_ENCAPSED_STRING","'sku'",1046],"]",["T_WHITESPACE","      ",1046],"=",["T_WHITESPACE"," ",1046],["T_VARIABLE","$linkData",1046],"[",["T_CONSTANT_ENCAPSED_STRING","'sku'",1046],"]",";",["T_WHITESPACE","\n\n                                    ",1046],["T_IF","if",1048],["T_WHITESPACE"," ",1048],"(",["T_STRING","null",1048],["T_WHITESPACE"," ",1048],["T_IS_NOT_IDENTICAL","!==",1048],["T_WHITESPACE"," ",1048],["T_VARIABLE","$linkData",1048],"[",["T_CONSTANT_ENCAPSED_STRING","'default_qty'",1048],"]",")",["T_WHITESPACE"," ",1048],"{",["T_WHITESPACE","\n                                        ",1048],["T_VARIABLE","$dataRow",1049],"[",["T_VARIABLE","$colPrefix",1049],["T_WHITESPACE"," ",1049],".",["T_WHITESPACE"," ",1049],["T_CONSTANT_ENCAPSED_STRING","'default_qty'",1049],"]",["T_WHITESPACE"," ",1049],"=",["T_WHITESPACE"," ",1049],["T_VARIABLE","$linkData",1049],"[",["T_CONSTANT_ENCAPSED_STRING","'default_qty'",1049],"]",";",["T_WHITESPACE","\n                                    ",1049],"}",["T_WHITESPACE","\n                                ",1050],"}",["T_WHITESPACE","\n                            ",1051],"}",["T_WHITESPACE","\n                            ",1052],["T_IF","if",1053],["T_WHITESPACE"," ",1053],"(","!",["T_EMPTY","empty",1053],"(",["T_VARIABLE","$customOptionsData",1053],"[",["T_VARIABLE","$productId",1053],"]",")",")",["T_WHITESPACE"," ",1053],"{",["T_WHITESPACE","\n                                ",1053],["T_VARIABLE","$dataRow",1054],["T_WHITESPACE"," ",1054],"=",["T_WHITESPACE"," ",1054],["T_STRING","array_merge",1054],"(",["T_VARIABLE","$dataRow",1054],",",["T_WHITESPACE"," ",1054],["T_STRING","array_shift",1054],"(",["T_VARIABLE","$customOptionsData",1054],"[",["T_VARIABLE","$productId",1054],"]",")",")",";",["T_WHITESPACE","\n                            ",1054],"}",["T_WHITESPACE","\n                            ",1055],["T_IF","if",1056],["T_WHITESPACE"," ",1056],"(","!",["T_EMPTY","empty",1056],"(",["T_VARIABLE","$configurableData",1056],"[",["T_VARIABLE","$productId",1056],"]",")",")",["T_WHITESPACE"," ",1056],"{",["T_WHITESPACE","\n                                ",1056],["T_VARIABLE","$dataRow",1057],["T_WHITESPACE"," ",1057],"=",["T_WHITESPACE"," ",1057],["T_STRING","array_merge",1057],"(",["T_VARIABLE","$dataRow",1057],",",["T_WHITESPACE"," ",1057],["T_STRING","array_shift",1057],"(",["T_VARIABLE","$configurableData",1057],"[",["T_VARIABLE","$productId",1057],"]",")",")",";",["T_WHITESPACE","\n                            ",1057],"}",["T_WHITESPACE","\n                            ",1058],["T_IF","if",1059],"(","!",["T_EMPTY","empty",1059],"(",["T_VARIABLE","$rowMultiselects",1059],"[",["T_VARIABLE","$productId",1059],"]","[",["T_VARIABLE","$storeId",1059],"]",")",")",["T_WHITESPACE"," ",1059],"{",["T_WHITESPACE","\n                                ",1059],["T_FOREACH","foreach",1060],"(",["T_VARIABLE","$rowMultiselects",1060],"[",["T_VARIABLE","$productId",1060],"]","[",["T_VARIABLE","$storeId",1060],"]",["T_WHITESPACE"," ",1060],["T_AS","as",1060],["T_WHITESPACE"," ",1060],["T_VARIABLE","$attrKey",1060],["T_DOUBLE_ARROW","=>",1060],["T_VARIABLE","$attrVal",1060],")",["T_WHITESPACE"," ",1060],"{",["T_WHITESPACE","\n                                    ",1060],["T_IF","if",1061],"(",["T_ISSET","isset",1061],"(",["T_VARIABLE","$rowMultiselects",1061],"[",["T_VARIABLE","$productId",1061],"]","[",["T_VARIABLE","$storeId",1061],"]","[",["T_VARIABLE","$attrKey",1061],"]",")",")",["T_WHITESPACE"," ",1061],"{",["T_WHITESPACE","\n                                        ",1061],["T_VARIABLE","$dataRow",1062],"[",["T_VARIABLE","$attrKey",1062],"]",["T_WHITESPACE"," ",1062],"=",["T_WHITESPACE"," ",1062],["T_STRING","array_shift",1062],"(",["T_VARIABLE","$rowMultiselects",1062],"[",["T_VARIABLE","$productId",1062],"]","[",["T_VARIABLE","$storeId",1062],"]","[",["T_VARIABLE","$attrKey",1062],"]",")",";",["T_WHITESPACE","\n                                    ",1062],"}",["T_WHITESPACE","\n                                ",1063],"}",["T_WHITESPACE","\n                            ",1064],"}",["T_WHITESPACE","\n                            ",1065],["T_VARIABLE","$writer",1066],["T_OBJECT_OPERATOR","->",1066],["T_STRING","writeRow",1066],"(",["T_VARIABLE","$dataRow",1066],")",";",["T_WHITESPACE","\n                        ",1066],"}",["T_WHITESPACE","\n                    ",1067],"}",["T_WHITESPACE","\n                ",1068],"}",["T_WHITESPACE","\n            ",1069],"}",["T_WHITESPACE","\n        ",1070],"}",["T_WHITESPACE","\n        ",1071],["T_RETURN","return",1072],["T_WHITESPACE"," ",1072],["T_VARIABLE","$writer",1072],["T_OBJECT_OPERATOR","->",1072],["T_STRING","getContents",1072],"(",")",";",["T_WHITESPACE","\n    ",1072],"}",["T_WHITESPACE","\n\n    ",1073],["T_DOC_COMMENT","\/**\n     * Clean up already loaded attribute collection.\n     *\n     * @param Mage_Eav_Model_Resource_Entity_Attribute_Collection $collection\n     * @return Mage_Eav_Model_Resource_Entity_Attribute_Collection\n     *\/",1075],["T_WHITESPACE","\n    ",1080],["T_PUBLIC","public",1081],["T_WHITESPACE"," ",1081],["T_FUNCTION","function",1081],["T_WHITESPACE"," ",1081],["T_STRING","filterAttributeCollection",1081],"(",["T_STRING","Mage_Eav_Model_Resource_Entity_Attribute_Collection",1081],["T_WHITESPACE"," ",1081],["T_VARIABLE","$collection",1081],")",["T_WHITESPACE","\n    ",1081],"{",["T_WHITESPACE","\n        ",1082],["T_VARIABLE","$validTypes",1083],["T_WHITESPACE"," ",1083],"=",["T_WHITESPACE"," ",1083],["T_STRING","array_keys",1083],"(",["T_VARIABLE","$this",1083],["T_OBJECT_OPERATOR","->",1083],["T_STRING","_productTypeModels",1083],")",";",["T_WHITESPACE","\n\n        ",1083],["T_FOREACH","foreach",1085],["T_WHITESPACE"," ",1085],"(",["T_STRING","parent",1085],["T_DOUBLE_COLON","::",1085],["T_STRING","filterAttributeCollection",1085],"(",["T_VARIABLE","$collection",1085],")",["T_WHITESPACE"," ",1085],["T_AS","as",1085],["T_WHITESPACE"," ",1085],["T_VARIABLE","$attribute",1085],")",["T_WHITESPACE"," ",1085],"{",["T_WHITESPACE","\n            ",1085],["T_VARIABLE","$attrApplyTo",1086],["T_WHITESPACE"," ",1086],"=",["T_WHITESPACE"," ",1086],["T_VARIABLE","$attribute",1086],["T_OBJECT_OPERATOR","->",1086],["T_STRING","getApplyTo",1086],"(",")",";",["T_WHITESPACE","\n            ",1086],["T_VARIABLE","$attrApplyTo",1087],["T_WHITESPACE"," ",1087],"=",["T_WHITESPACE"," ",1087],["T_VARIABLE","$attrApplyTo",1087],["T_WHITESPACE"," ",1087],"?",["T_WHITESPACE"," ",1087],["T_STRING","array_intersect",1087],"(",["T_VARIABLE","$attrApplyTo",1087],",",["T_WHITESPACE"," ",1087],["T_VARIABLE","$validTypes",1087],")",["T_WHITESPACE"," ",1087],":",["T_WHITESPACE"," ",1087],["T_VARIABLE","$validTypes",1087],";",["T_WHITESPACE","\n\n            ",1087],["T_IF","if",1089],["T_WHITESPACE"," ",1089],"(",["T_VARIABLE","$attrApplyTo",1089],")",["T_WHITESPACE"," ",1089],"{",["T_WHITESPACE","\n                ",1089],["T_FOREACH","foreach",1090],["T_WHITESPACE"," ",1090],"(",["T_VARIABLE","$attrApplyTo",1090],["T_WHITESPACE"," ",1090],["T_AS","as",1090],["T_WHITESPACE"," ",1090],["T_VARIABLE","$productType",1090],")",["T_WHITESPACE"," ",1090],"{",["T_WHITESPACE"," ",1090],["T_COMMENT","\/\/ override attributes by its product type model\n",1090],["T_WHITESPACE","                    ",1091],["T_IF","if",1091],["T_WHITESPACE"," ",1091],"(",["T_VARIABLE","$this",1091],["T_OBJECT_OPERATOR","->",1091],["T_STRING","_productTypeModels",1091],"[",["T_VARIABLE","$productType",1091],"]",["T_OBJECT_OPERATOR","->",1091],["T_STRING","overrideAttribute",1091],"(",["T_VARIABLE","$attribute",1091],")",")",["T_WHITESPACE"," ",1091],"{",["T_WHITESPACE","\n                        ",1091],["T_BREAK","break",1092],";",["T_WHITESPACE","\n                    ",1092],"}",["T_WHITESPACE","\n                ",1093],"}",["T_WHITESPACE","\n            ",1094],"}",["T_WHITESPACE"," ",1095],["T_ELSE","else",1095],["T_WHITESPACE"," ",1095],"{",["T_WHITESPACE"," ",1095],["T_COMMENT","\/\/ remove attributes of not-supported product types\n",1095],["T_WHITESPACE","                ",1096],["T_VARIABLE","$collection",1096],["T_OBJECT_OPERATOR","->",1096],["T_STRING","removeItemByKey",1096],"(",["T_VARIABLE","$attribute",1096],["T_OBJECT_OPERATOR","->",1096],["T_STRING","getId",1096],"(",")",")",";",["T_WHITESPACE","\n            ",1096],"}",["T_WHITESPACE","\n        ",1097],"}",["T_WHITESPACE","\n        ",1098],["T_RETURN","return",1099],["T_WHITESPACE"," ",1099],["T_VARIABLE","$collection",1099],";",["T_WHITESPACE","\n    ",1099],"}",["T_WHITESPACE","\n\n    ",1100],["T_DOC_COMMENT","\/**\n     * Entity attributes collection getter.\n     *\n     * @return Mage_Catalog_Model_Resource_Eav_Mysql4_Product_Attribute_Collection\n     *\/",1102],["T_WHITESPACE","\n    ",1106],["T_PUBLIC","public",1107],["T_WHITESPACE"," ",1107],["T_FUNCTION","function",1107],["T_WHITESPACE"," ",1107],["T_STRING","getAttributeCollection",1107],"(",")",["T_WHITESPACE","\n    ",1107],"{",["T_WHITESPACE","\n        ",1108],["T_RETURN","return",1109],["T_WHITESPACE"," ",1109],["T_STRING","Mage",1109],["T_DOUBLE_COLON","::",1109],["T_STRING","getResourceModel",1109],"(",["T_CONSTANT_ENCAPSED_STRING","'catalog\/product_attribute_collection'",1109],")",";",["T_WHITESPACE","\n    ",1109],"}",["T_WHITESPACE","\n\n    ",1110],["T_DOC_COMMENT","\/**\n     * EAV entity type code getter.\n     *\n     * @return string\n     *\/",1112],["T_WHITESPACE","\n    ",1116],["T_PUBLIC","public",1117],["T_WHITESPACE"," ",1117],["T_FUNCTION","function",1117],["T_WHITESPACE"," ",1117],["T_STRING","getEntityTypeCode",1117],"(",")",["T_WHITESPACE","\n    ",1117],"{",["T_WHITESPACE","\n        ",1118],["T_RETURN","return",1119],["T_WHITESPACE"," ",1119],["T_CONSTANT_ENCAPSED_STRING","'catalog_product'",1119],";",["T_WHITESPACE","\n    ",1119],"}",["T_WHITESPACE","\n\n    ",1120],["T_DOC_COMMENT","\/**\n     * Initialize attribute option values and types.\n     *\n     * @return Mage_ImportExport_Model_Export_Entity_Product\n     *\/",1122],["T_WHITESPACE","\n    ",1126],["T_PROTECTED","protected",1127],["T_WHITESPACE"," ",1127],["T_FUNCTION","function",1127],["T_WHITESPACE"," ",1127],["T_STRING","_initAttributes",1127],"(",")",["T_WHITESPACE","\n    ",1127],"{",["T_WHITESPACE","\n        ",1128],["T_FOREACH","foreach",1129],["T_WHITESPACE"," ",1129],"(",["T_VARIABLE","$this",1129],["T_OBJECT_OPERATOR","->",1129],["T_STRING","getAttributeCollection",1129],"(",")",["T_WHITESPACE"," ",1129],["T_AS","as",1129],["T_WHITESPACE"," ",1129],["T_VARIABLE","$attribute",1129],")",["T_WHITESPACE"," ",1129],"{",["T_WHITESPACE","\n            ",1129],["T_VARIABLE","$this",1130],["T_OBJECT_OPERATOR","->",1130],["T_STRING","_attributeValues",1130],"[",["T_VARIABLE","$attribute",1130],["T_OBJECT_OPERATOR","->",1130],["T_STRING","getAttributeCode",1130],"(",")","]",["T_WHITESPACE"," ",1130],"=",["T_WHITESPACE"," ",1130],["T_VARIABLE","$this",1130],["T_OBJECT_OPERATOR","->",1130],["T_STRING","getAttributeOptions",1130],"(",["T_VARIABLE","$attribute",1130],")",";",["T_WHITESPACE","\n            ",1130],["T_VARIABLE","$this",1131],["T_OBJECT_OPERATOR","->",1131],["T_STRING","_attributeTypes",1131],"[",["T_VARIABLE","$attribute",1131],["T_OBJECT_OPERATOR","->",1131],["T_STRING","getAttributeCode",1131],"(",")","]",["T_WHITESPACE"," ",1131],"=",["T_WHITESPACE","\n                ",1131],["T_STRING","Mage_ImportExport_Model_Import",1132],["T_DOUBLE_COLON","::",1132],["T_STRING","getAttributeType",1132],"(",["T_VARIABLE","$attribute",1132],")",";",["T_WHITESPACE","\n            ",1132],["T_VARIABLE","$this",1133],["T_OBJECT_OPERATOR","->",1133],["T_STRING","_attributeScopes",1133],"[",["T_VARIABLE","$attribute",1133],["T_OBJECT_OPERATOR","->",1133],["T_STRING","getAttributeCode",1133],"(",")","]",["T_WHITESPACE"," ",1133],"=",["T_WHITESPACE"," ",1133],["T_VARIABLE","$attribute",1133],["T_OBJECT_OPERATOR","->",1133],["T_STRING","getIsGlobal",1133],"(",")",";",["T_WHITESPACE","\n        ",1133],"}",["T_WHITESPACE","\n        ",1134],["T_RETURN","return",1135],["T_WHITESPACE"," ",1135],["T_VARIABLE","$this",1135],";",["T_WHITESPACE","\n    ",1135],"}",["T_WHITESPACE","\n\n",1136],"}",["T_WHITESPACE","\n",1138]]
[["T_OPEN_TAG","<?php\n",1],["T_DOC_COMMENT","\/**\n * Magento\n *\n * NOTICE OF LICENSE\n *\n * This source file is subject to the Open Software License (OSL 3.0)\n * that is bundled with this package in the file LICENSE.txt.\n * It is also available through the world-wide-web at this URL:\n * http:\/\/opensource.org\/licenses\/osl-3.0.php\n * If you did not receive a copy of the license and are unable to\n * obtain it through the world-wide-web, please send an email\n * to license@magento.com so we can send you a copy immediately.\n *\n * DISCLAIMER\n *\n * Do not edit or add to this file if you wish to upgrade Magento to newer\n * versions in the future. If you wish to customize Magento for your\n * needs please refer to http:\/\/www.magento.com for more information.\n *\n * @category    Mage\n * @package     Mage_ImportExport\n * @copyright  Copyright (c) 2006-2016 X.commerce, Inc. and affiliates (http:\/\/www.magento.com)\n * @license    http:\/\/opensource.org\/licenses\/osl-3.0.php  Open Software License (OSL 3.0)\n *\/",2],["T_WHITESPACE","\n\n",25],["T_DOC_COMMENT","\/**\n * Export entity abstract model\n *\n * @category    Mage\n * @package     Mage_ImportExport\n * @author      Magento Core Team <core@magentocommerce.com>\n *\/",27],["T_WHITESPACE","\n",33],["T_ABSTRACT","abstract",34],["T_WHITESPACE"," ",34],["T_CLASS","class",34],["T_WHITESPACE"," ",34],["T_STRING","Mage_ImportExport_Model_Export_Entity_Abstract",34],["T_WHITESPACE","\n",34],"{",["T_WHITESPACE","\n    ",35],["T_DOC_COMMENT","\/**\n     * Attribute code to its values. Only attributes with options and only default store values used.\n     *\n     * @var array\n     *\/",36],["T_WHITESPACE","\n    ",40],["T_PROTECTED","protected",41],["T_WHITESPACE"," ",41],["T_VARIABLE","$_attributeValues",41],["T_WHITESPACE"," ",41],"=",["T_WHITESPACE"," ",41],["T_ARRAY","array",41],"(",")",";",["T_WHITESPACE","\n\n\n    ",41],["T_DOC_COMMENT","\/**\n     * Attribute code to its values. Only attributes with options and only default store values used.\n     *\n     * @var array\n     *\/",44],["T_WHITESPACE","\n    ",48],["T_PROTECTED","protected",49],["T_WHITESPACE"," ",49],["T_STATIC","static",49],["T_WHITESPACE"," ",49],["T_VARIABLE","$attrCodes",49],["T_WHITESPACE"," ",49],"=",["T_WHITESPACE"," ",49],["T_STRING","null",49],";",["T_WHITESPACE","\n\n    ",49],["T_DOC_COMMENT","\/**\n     * DB connection.\n     *\n     * @var Varien_Db_Adapter_Pdo_Mysql\n     *\/",51],["T_WHITESPACE","\n    ",55],["T_PROTECTED","protected",56],["T_WHITESPACE"," ",56],["T_VARIABLE","$_connection",56],";",["T_WHITESPACE","\n\n    ",56],["T_DOC_COMMENT","\/**\n     * Array of attributes codes which are disabled for export.\n     *\n     * @var array\n     *\/",58],["T_WHITESPACE","\n    ",62],["T_PROTECTED","protected",63],["T_WHITESPACE"," ",63],["T_VARIABLE","$_disabledAttrs",63],["T_WHITESPACE"," ",63],"=",["T_WHITESPACE"," ",63],["T_ARRAY","array",63],"(",")",";",["T_WHITESPACE","\n\n    ",63],["T_DOC_COMMENT","\/**\n     * Entity type id.\n     *\n     * @var int\n     *\/",65],["T_WHITESPACE","\n    ",69],["T_PROTECTED","protected",70],["T_WHITESPACE"," ",70],["T_VARIABLE","$_entityTypeId",70],";",["T_WHITESPACE","\n\n    ",70],["T_DOC_COMMENT","\/**\n     * Error codes with arrays of corresponding row numbers.\n     *\n     * @var array\n     *\/",72],["T_WHITESPACE","\n    ",76],["T_PROTECTED","protected",77],["T_WHITESPACE"," ",77],["T_VARIABLE","$_errors",77],["T_WHITESPACE"," ",77],"=",["T_WHITESPACE"," ",77],["T_ARRAY","array",77],"(",")",";",["T_WHITESPACE","\n\n    ",77],["T_DOC_COMMENT","\/**\n     * Error counter.\n     *\n     * @var int\n     *\/",79],["T_WHITESPACE","\n    ",83],["T_PROTECTED","protected",84],["T_WHITESPACE"," ",84],["T_VARIABLE","$_errorsCount",84],["T_WHITESPACE"," ",84],"=",["T_WHITESPACE"," ",84],["T_LNUMBER","0",84],";",["T_WHITESPACE","\n\n    ",84],["T_DOC_COMMENT","\/**\n     * Limit of errors after which pre-processing will exit.\n     *\n     * @var int\n     *\/",86],["T_WHITESPACE","\n    ",90],["T_PROTECTED","protected",91],["T_WHITESPACE"," ",91],["T_VARIABLE","$_errorsLimit",91],["T_WHITESPACE"," ",91],"=",["T_WHITESPACE"," ",91],["T_LNUMBER","100",91],";",["T_WHITESPACE","\n\n    ",91],["T_DOC_COMMENT","\/**\n     * Export filter data.\n     *\n     * @var array\n     *\/",93],["T_WHITESPACE","\n    ",97],["T_PROTECTED","protected",98],["T_WHITESPACE"," ",98],["T_VARIABLE","$_filter",98],["T_WHITESPACE"," ",98],"=",["T_WHITESPACE"," ",98],["T_ARRAY","array",98],"(",")",";",["T_WHITESPACE","\n\n    ",98],["T_DOC_COMMENT","\/**\n     * Attributes with index (not label) value.\n     *\n     * @var array\n     *\/",100],["T_WHITESPACE","\n    ",104],["T_PROTECTED","protected",105],["T_WHITESPACE"," ",105],["T_VARIABLE","$_indexValueAttributes",105],["T_WHITESPACE"," ",105],"=",["T_WHITESPACE"," ",105],["T_ARRAY","array",105],"(",")",";",["T_WHITESPACE","\n\n    ",105],["T_DOC_COMMENT","\/**\n     * Validation failure message template definitions.\n     *\n     * @var array\n     *\/",107],["T_WHITESPACE","\n    ",111],["T_PROTECTED","protected",112],["T_WHITESPACE"," ",112],["T_VARIABLE","$_messageTemplates",112],["T_WHITESPACE"," ",112],"=",["T_WHITESPACE"," ",112],["T_ARRAY","array",112],"(",")",";",["T_WHITESPACE","\n\n    ",112],["T_DOC_COMMENT","\/**\n     * Parameters.\n     *\n     * @var array\n     *\/",114],["T_WHITESPACE","\n    ",118],["T_PROTECTED","protected",119],["T_WHITESPACE"," ",119],["T_VARIABLE","$_parameters",119],["T_WHITESPACE"," ",119],"=",["T_WHITESPACE"," ",119],["T_ARRAY","array",119],"(",")",";",["T_WHITESPACE","\n\n    ",119],["T_DOC_COMMENT","\/**\n     * Column names that holds values with particular meaning.\n     *\n     * @var array\n     *\/",121],["T_WHITESPACE","\n    ",125],["T_PROTECTED","protected",126],["T_WHITESPACE"," ",126],["T_VARIABLE","$_particularAttributes",126],["T_WHITESPACE"," ",126],"=",["T_WHITESPACE"," ",126],["T_ARRAY","array",126],"(",")",";",["T_WHITESPACE","\n\n    ",126],["T_DOC_COMMENT","\/**\n     * Permanent entity columns.\n     *\n     * @var array\n     *\/",128],["T_WHITESPACE","\n    ",132],["T_PROTECTED","protected",133],["T_WHITESPACE"," ",133],["T_VARIABLE","$_permanentAttributes",133],["T_WHITESPACE"," ",133],"=",["T_WHITESPACE"," ",133],["T_ARRAY","array",133],"(",")",";",["T_WHITESPACE","\n\n    ",133],["T_DOC_COMMENT","\/**\n     * Number of entities processed by validation.\n     *\n     * @var int\n     *\/",135],["T_WHITESPACE","\n    ",139],["T_PROTECTED","protected",140],["T_WHITESPACE"," ",140],["T_VARIABLE","$_processedEntitiesCount",140],["T_WHITESPACE"," ",140],"=",["T_WHITESPACE"," ",140],["T_LNUMBER","0",140],";",["T_WHITESPACE","\n\n    ",140],["T_DOC_COMMENT","\/**\n     * Number of rows processed by validation.\n     *\n     * @var int\n     *\/",142],["T_WHITESPACE","\n    ",146],["T_PROTECTED","protected",147],["T_WHITESPACE"," ",147],["T_VARIABLE","$_processedRowsCount",147],["T_WHITESPACE"," ",147],"=",["T_WHITESPACE"," ",147],["T_LNUMBER","0",147],";",["T_WHITESPACE","\n\n    ",147],["T_DOC_COMMENT","\/**\n     * Source model.\n     *\n     * @var Mage_ImportExport_Model_Export_Adapter_Abstract\n     *\/",149],["T_WHITESPACE","\n    ",153],["T_PROTECTED","protected",154],["T_WHITESPACE"," ",154],["T_VARIABLE","$_writer",154],";",["T_WHITESPACE","\n\n    ",154],["T_DOC_COMMENT","\/**\n     * Array of pairs store ID to its code.\n     *\n     * @var array\n     *\/",156],["T_WHITESPACE","\n    ",160],["T_PROTECTED","protected",161],["T_WHITESPACE"," ",161],["T_VARIABLE","$_storeIdToCode",161],["T_WHITESPACE"," ",161],"=",["T_WHITESPACE"," ",161],["T_ARRAY","array",161],"(",")",";",["T_WHITESPACE","\n\n    ",161],["T_DOC_COMMENT","\/**\n     * Store Id-to-website\n     *\n     * @var array\n     *\/",163],["T_WHITESPACE","\n    ",167],["T_PROTECTED","protected",168],["T_WHITESPACE"," ",168],["T_VARIABLE","$_storeIdToWebsiteId",168],["T_WHITESPACE"," ",168],"=",["T_WHITESPACE"," ",168],["T_ARRAY","array",168],"(",")",";",["T_WHITESPACE","\n\n    ",168],["T_DOC_COMMENT","\/**\n     * Website ID-to-code.\n     *\n     * @var array\n     *\/",170],["T_WHITESPACE","\n    ",174],["T_PROTECTED","protected",175],["T_WHITESPACE"," ",175],["T_VARIABLE","$_websiteIdToCode",175],["T_WHITESPACE"," ",175],"=",["T_WHITESPACE"," ",175],["T_ARRAY","array",175],"(",")",";",["T_WHITESPACE","\n\n    ",175],["T_DOC_COMMENT","\/**\n     * Constructor.\n     *\n     * @return void\n     *\/",177],["T_WHITESPACE","\n    ",181],["T_PUBLIC","public",182],["T_WHITESPACE"," ",182],["T_FUNCTION","function",182],["T_WHITESPACE"," ",182],["T_STRING","__construct",182],"(",")",["T_WHITESPACE","\n    ",182],"{",["T_WHITESPACE","\n        ",183],["T_VARIABLE","$entityCode",184],["T_WHITESPACE"," ",184],"=",["T_WHITESPACE"," ",184],["T_VARIABLE","$this",184],["T_OBJECT_OPERATOR","->",184],["T_STRING","getEntityTypeCode",184],"(",")",";",["T_WHITESPACE","\n        ",184],["T_VARIABLE","$this",185],["T_OBJECT_OPERATOR","->",185],["T_STRING","_entityTypeId",185],["T_WHITESPACE"," ",185],"=",["T_WHITESPACE"," ",185],["T_STRING","Mage",185],["T_DOUBLE_COLON","::",185],["T_STRING","getSingleton",185],"(",["T_CONSTANT_ENCAPSED_STRING","'eav\/config'",185],")",["T_OBJECT_OPERATOR","->",185],["T_STRING","getEntityType",185],"(",["T_VARIABLE","$entityCode",185],")",["T_OBJECT_OPERATOR","->",185],["T_STRING","getEntityTypeId",185],"(",")",";",["T_WHITESPACE","\n        ",185],["T_VARIABLE","$this",186],["T_OBJECT_OPERATOR","->",186],["T_STRING","_connection",186],["T_WHITESPACE","   ",186],"=",["T_WHITESPACE"," ",186],["T_STRING","Mage",186],["T_DOUBLE_COLON","::",186],["T_STRING","getSingleton",186],"(",["T_CONSTANT_ENCAPSED_STRING","'core\/resource'",186],")",["T_OBJECT_OPERATOR","->",186],["T_STRING","getConnection",186],"(",["T_CONSTANT_ENCAPSED_STRING","'write'",186],")",";",["T_WHITESPACE","\n    ",186],"}",["T_WHITESPACE","\n\n    ",187],["T_DOC_COMMENT","\/**\n    * Initialize website values.\n    *\n    * @return Mage_ImportExport_Model_Export_Entity_Customer\n    *\/",189],["T_WHITESPACE","\n    ",193],["T_PROTECTED","protected",194],["T_WHITESPACE"," ",194],["T_FUNCTION","function",194],["T_WHITESPACE"," ",194],["T_STRING","_initWebsites",194],"(",")",["T_WHITESPACE","\n    ",194],"{",["T_WHITESPACE","\n        ",195],["T_DOC_COMMENT","\/** @var $website Mage_Core_Model_Website *\/",196],["T_WHITESPACE","\n        ",196],["T_FOREACH","foreach",197],["T_WHITESPACE"," ",197],"(",["T_STRING","Mage",197],["T_DOUBLE_COLON","::",197],["T_STRING","app",197],"(",")",["T_OBJECT_OPERATOR","->",197],["T_STRING","getWebsites",197],"(",["T_STRING","true",197],")",["T_WHITESPACE"," ",197],["T_AS","as",197],["T_WHITESPACE"," ",197],["T_VARIABLE","$website",197],")",["T_WHITESPACE"," ",197],"{",["T_WHITESPACE","\n            ",197],["T_VARIABLE","$this",198],["T_OBJECT_OPERATOR","->",198],["T_STRING","_websiteIdToCode",198],"[",["T_VARIABLE","$website",198],["T_OBJECT_OPERATOR","->",198],["T_STRING","getId",198],"(",")","]",["T_WHITESPACE"," ",198],"=",["T_WHITESPACE"," ",198],["T_VARIABLE","$website",198],["T_OBJECT_OPERATOR","->",198],["T_STRING","getCode",198],"(",")",";",["T_WHITESPACE","\n        ",198],"}",["T_WHITESPACE","\n        ",199],["T_RETURN","return",200],["T_WHITESPACE"," ",200],["T_VARIABLE","$this",200],";",["T_WHITESPACE","\n    ",200],"}",["T_WHITESPACE","\n\n    ",201],["T_DOC_COMMENT","\/**\n     * Initialize stores hash.\n     *\n     * @return Mage_ImportExport_Model_Export_Entity_Abstract\n     *\/",203],["T_WHITESPACE","\n    ",207],["T_PROTECTED","protected",208],["T_WHITESPACE"," ",208],["T_FUNCTION","function",208],["T_WHITESPACE"," ",208],["T_STRING","_initStores",208],"(",")",["T_WHITESPACE","\n    ",208],"{",["T_WHITESPACE","\n        ",209],["T_FOREACH","foreach",210],["T_WHITESPACE"," ",210],"(",["T_STRING","Mage",210],["T_DOUBLE_COLON","::",210],["T_STRING","app",210],"(",")",["T_OBJECT_OPERATOR","->",210],["T_STRING","getStores",210],"(",["T_STRING","true",210],")",["T_WHITESPACE"," ",210],["T_AS","as",210],["T_WHITESPACE"," ",210],["T_VARIABLE","$store",210],")",["T_WHITESPACE"," ",210],"{",["T_WHITESPACE","\n            ",210],["T_VARIABLE","$this",211],["T_OBJECT_OPERATOR","->",211],["T_STRING","_storeIdToCode",211],"[",["T_VARIABLE","$store",211],["T_OBJECT_OPERATOR","->",211],["T_STRING","getId",211],"(",")","]",["T_WHITESPACE","      ",211],"=",["T_WHITESPACE"," ",211],["T_VARIABLE","$store",211],["T_OBJECT_OPERATOR","->",211],["T_STRING","getCode",211],"(",")",";",["T_WHITESPACE","\n            ",211],["T_VARIABLE","$this",212],["T_OBJECT_OPERATOR","->",212],["T_STRING","_storeIdToWebsiteId",212],"[",["T_VARIABLE","$store",212],["T_OBJECT_OPERATOR","->",212],["T_STRING","getId",212],"(",")","]",["T_WHITESPACE"," ",212],"=",["T_WHITESPACE"," ",212],["T_VARIABLE","$store",212],["T_OBJECT_OPERATOR","->",212],["T_STRING","getWebsiteId",212],"(",")",";",["T_WHITESPACE","\n        ",212],"}",["T_WHITESPACE","\n        ",213],["T_STRING","ksort",214],"(",["T_VARIABLE","$this",214],["T_OBJECT_OPERATOR","->",214],["T_STRING","_storeIdToCode",214],")",";",["T_WHITESPACE"," ",214],["T_COMMENT","\/\/ to ensure that 'admin' store (ID is zero) goes first\n",214],["T_WHITESPACE","        ",215],["T_STRING","sort",215],"(",["T_VARIABLE","$this",215],["T_OBJECT_OPERATOR","->",215],["T_STRING","_storeIdToWebsiteId",215],")",";",["T_WHITESPACE","\n\n        ",215],["T_RETURN","return",217],["T_WHITESPACE"," ",217],["T_VARIABLE","$this",217],";",["T_WHITESPACE","\n    ",217],"}",["T_WHITESPACE","\n\n    ",218],["T_DOC_COMMENT","\/**\n     * Get attributes codes which are appropriate for export.\n     *\n     * @return array\n     *\/",220],["T_WHITESPACE","\n    ",224],["T_PROTECTED","protected",225],["T_WHITESPACE"," ",225],["T_FUNCTION","function",225],["T_WHITESPACE"," ",225],["T_STRING","_getExportAttrCodes",225],"(",")",["T_WHITESPACE","\n    ",225],"{",["T_WHITESPACE","\n        ",226],["T_IF","if",227],["T_WHITESPACE"," ",227],"(",["T_STRING","null",227],["T_WHITESPACE"," ",227],["T_IS_IDENTICAL","===",227],["T_WHITESPACE"," ",227],["T_STRING","self",227],["T_DOUBLE_COLON","::",227],["T_VARIABLE","$attrCodes",227],")",["T_WHITESPACE"," ",227],"{",["T_WHITESPACE","\n            ",227],["T_IF","if",228],["T_WHITESPACE"," ",228],"(","!",["T_EMPTY","empty",228],"(",["T_VARIABLE","$this",228],["T_OBJECT_OPERATOR","->",228],["T_STRING","_parameters",228],"[",["T_STRING","Mage_ImportExport_Model_Export",228],["T_DOUBLE_COLON","::",228],["T_STRING","FILTER_ELEMENT_SKIP",228],"]",")",["T_WHITESPACE","\n                    ",228],["T_BOOLEAN_AND","&&",229],["T_WHITESPACE"," ",229],["T_STRING","is_array",229],"(",["T_VARIABLE","$this",229],["T_OBJECT_OPERATOR","->",229],["T_STRING","_parameters",229],"[",["T_STRING","Mage_ImportExport_Model_Export",229],["T_DOUBLE_COLON","::",229],["T_STRING","FILTER_ELEMENT_SKIP",229],"]",")",")",["T_WHITESPACE"," ",229],"{",["T_WHITESPACE","\n                ",229],["T_VARIABLE","$skipAttr",230],["T_WHITESPACE"," ",230],"=",["T_WHITESPACE"," ",230],["T_STRING","array_flip",230],"(",["T_VARIABLE","$this",230],["T_OBJECT_OPERATOR","->",230],["T_STRING","_parameters",230],"[",["T_STRING","Mage_ImportExport_Model_Export",230],["T_DOUBLE_COLON","::",230],["T_STRING","FILTER_ELEMENT_SKIP",230],"]",")",";",["T_WHITESPACE","\n            ",230],"}",["T_WHITESPACE"," ",231],["T_ELSE","else",231],["T_WHITESPACE"," ",231],"{",["T_WHITESPACE","\n                ",231],["T_VARIABLE","$skipAttr",232],["T_WHITESPACE"," ",232],"=",["T_WHITESPACE"," ",232],["T_ARRAY","array",232],"(",")",";",["T_WHITESPACE","\n            ",232],"}",["T_WHITESPACE","\n            ",233],["T_VARIABLE","$attrCodes",234],["T_WHITESPACE"," ",234],"=",["T_WHITESPACE"," ",234],["T_ARRAY","array",234],"(",")",";",["T_WHITESPACE","\n\n            ",234],["T_FOREACH","foreach",236],["T_WHITESPACE"," ",236],"(",["T_VARIABLE","$this",236],["T_OBJECT_OPERATOR","->",236],["T_STRING","filterAttributeCollection",236],"(",["T_VARIABLE","$this",236],["T_OBJECT_OPERATOR","->",236],["T_STRING","getAttributeCollection",236],"(",")",")",["T_WHITESPACE"," ",236],["T_AS","as",236],["T_WHITESPACE"," ",236],["T_VARIABLE","$attribute",236],")",["T_WHITESPACE"," ",236],"{",["T_WHITESPACE","\n                ",236],["T_IF","if",237],["T_WHITESPACE"," ",237],"(","!",["T_ISSET","isset",237],"(",["T_VARIABLE","$skipAttr",237],"[",["T_VARIABLE","$attribute",237],["T_OBJECT_OPERATOR","->",237],["T_STRING","getAttributeId",237],"(",")","]",")",["T_WHITESPACE","\n                        ",237],["T_BOOLEAN_OR","||",238],["T_WHITESPACE"," ",238],["T_STRING","in_array",238],"(",["T_VARIABLE","$attribute",238],["T_OBJECT_OPERATOR","->",238],["T_STRING","getAttributeCode",238],"(",")",",",["T_WHITESPACE"," ",238],["T_VARIABLE","$this",238],["T_OBJECT_OPERATOR","->",238],["T_STRING","_permanentAttributes",238],")",")",["T_WHITESPACE"," ",238],"{",["T_WHITESPACE","\n                    ",238],["T_VARIABLE","$attrCodes",239],"[","]",["T_WHITESPACE"," ",239],"=",["T_WHITESPACE"," ",239],["T_VARIABLE","$attribute",239],["T_OBJECT_OPERATOR","->",239],["T_STRING","getAttributeCode",239],"(",")",";",["T_WHITESPACE","\n                ",239],"}",["T_WHITESPACE","\n            ",240],"}",["T_WHITESPACE","\n            ",241],["T_STRING","self",242],["T_DOUBLE_COLON","::",242],["T_VARIABLE","$attrCodes",242],["T_WHITESPACE"," ",242],"=",["T_WHITESPACE"," ",242],["T_VARIABLE","$attrCodes",242],";",["T_WHITESPACE","\n        ",242],"}",["T_WHITESPACE","\n        ",243],["T_RETURN","return",244],["T_WHITESPACE"," ",244],["T_STRING","self",244],["T_DOUBLE_COLON","::",244],["T_VARIABLE","$attrCodes",244],";",["T_WHITESPACE","\n    ",244],"}",["T_WHITESPACE","\n\n    ",245],["T_DOC_COMMENT","\/**\n     * Initialize attribute option values.\n     *\n     * @return Mage_ImportExport_Model_Export_Entity_Abstract\n     *\/",247],["T_WHITESPACE","\n    ",251],["T_PROTECTED","protected",252],["T_WHITESPACE"," ",252],["T_FUNCTION","function",252],["T_WHITESPACE"," ",252],["T_STRING","_initAttrValues",252],"(",")",["T_WHITESPACE","\n    ",252],"{",["T_WHITESPACE","\n        ",253],["T_FOREACH","foreach",254],["T_WHITESPACE"," ",254],"(",["T_VARIABLE","$this",254],["T_OBJECT_OPERATOR","->",254],["T_STRING","getAttributeCollection",254],"(",")",["T_WHITESPACE"," ",254],["T_AS","as",254],["T_WHITESPACE"," ",254],["T_VARIABLE","$attribute",254],")",["T_WHITESPACE"," ",254],"{",["T_WHITESPACE","\n            ",254],["T_VARIABLE","$this",255],["T_OBJECT_OPERATOR","->",255],["T_STRING","_attributeValues",255],"[",["T_VARIABLE","$attribute",255],["T_OBJECT_OPERATOR","->",255],["T_STRING","getAttributeCode",255],"(",")","]",["T_WHITESPACE"," ",255],"=",["T_WHITESPACE"," ",255],["T_VARIABLE","$this",255],["T_OBJECT_OPERATOR","->",255],["T_STRING","getAttributeOptions",255],"(",["T_VARIABLE","$attribute",255],")",";",["T_WHITESPACE","\n        ",255],"}",["T_WHITESPACE","\n        ",256],["T_RETURN","return",257],["T_WHITESPACE"," ",257],["T_VARIABLE","$this",257],";",["T_WHITESPACE","\n    ",257],"}",["T_WHITESPACE","\n\n    ",258],["T_DOC_COMMENT","\/**\n     * Apply filter to collection and add not skipped attributes to select.\n     *\n     * @param Mage_Eav_Model_Entity_Collection_Abstract $collection\n     * @return Mage_Eav_Model_Entity_Collection_Abstract\n     *\/",260],["T_WHITESPACE","\n    ",265],["T_PROTECTED","protected",266],["T_WHITESPACE"," ",266],["T_FUNCTION","function",266],["T_WHITESPACE"," ",266],["T_STRING","_prepareEntityCollection",266],"(",["T_STRING","Mage_Eav_Model_Entity_Collection_Abstract",266],["T_WHITESPACE"," ",266],["T_VARIABLE","$collection",266],")",["T_WHITESPACE","\n    ",266],"{",["T_WHITESPACE","\n        ",267],["T_IF","if",268],["T_WHITESPACE"," ",268],"(","!",["T_ISSET","isset",268],"(",["T_VARIABLE","$this",268],["T_OBJECT_OPERATOR","->",268],["T_STRING","_parameters",268],"[",["T_STRING","Mage_ImportExport_Model_Export",268],["T_DOUBLE_COLON","::",268],["T_STRING","FILTER_ELEMENT_GROUP",268],"]",")",["T_WHITESPACE","\n            ",268],["T_BOOLEAN_OR","||",269],["T_WHITESPACE"," ",269],"!",["T_STRING","is_array",269],"(",["T_VARIABLE","$this",269],["T_OBJECT_OPERATOR","->",269],["T_STRING","_parameters",269],"[",["T_STRING","Mage_ImportExport_Model_Export",269],["T_DOUBLE_COLON","::",269],["T_STRING","FILTER_ELEMENT_GROUP",269],"]",")",")",["T_WHITESPACE"," ",269],"{",["T_WHITESPACE","\n            ",269],["T_VARIABLE","$exportFilter",270],["T_WHITESPACE"," ",270],"=",["T_WHITESPACE"," ",270],["T_ARRAY","array",270],"(",")",";",["T_WHITESPACE","\n        ",270],"}",["T_WHITESPACE"," ",271],["T_ELSE","else",271],["T_WHITESPACE"," ",271],"{",["T_WHITESPACE","\n            ",271],["T_VARIABLE","$exportFilter",272],["T_WHITESPACE"," ",272],"=",["T_WHITESPACE"," ",272],["T_VARIABLE","$this",272],["T_OBJECT_OPERATOR","->",272],["T_STRING","_parameters",272],"[",["T_STRING","Mage_ImportExport_Model_Export",272],["T_DOUBLE_COLON","::",272],["T_STRING","FILTER_ELEMENT_GROUP",272],"]",";",["T_WHITESPACE","\n        ",272],"}",["T_WHITESPACE","\n        ",273],["T_VARIABLE","$exportAttrCodes",274],["T_WHITESPACE"," ",274],"=",["T_WHITESPACE"," ",274],["T_VARIABLE","$this",274],["T_OBJECT_OPERATOR","->",274],["T_STRING","_getExportAttrCodes",274],"(",")",";",["T_WHITESPACE","\n\n        ",274],["T_FOREACH","foreach",276],["T_WHITESPACE"," ",276],"(",["T_VARIABLE","$this",276],["T_OBJECT_OPERATOR","->",276],["T_STRING","filterAttributeCollection",276],"(",["T_VARIABLE","$this",276],["T_OBJECT_OPERATOR","->",276],["T_STRING","getAttributeCollection",276],"(",")",")",["T_WHITESPACE"," ",276],["T_AS","as",276],["T_WHITESPACE"," ",276],["T_VARIABLE","$attribute",276],")",["T_WHITESPACE"," ",276],"{",["T_WHITESPACE","\n            ",276],["T_VARIABLE","$attrCode",277],["T_WHITESPACE"," ",277],"=",["T_WHITESPACE"," ",277],["T_VARIABLE","$attribute",277],["T_OBJECT_OPERATOR","->",277],["T_STRING","getAttributeCode",277],"(",")",";",["T_WHITESPACE","\n\n            ",277],["T_COMMENT","\/\/ filter applying\n",279],["T_WHITESPACE","            ",280],["T_IF","if",280],["T_WHITESPACE"," ",280],"(",["T_ISSET","isset",280],"(",["T_VARIABLE","$exportFilter",280],"[",["T_VARIABLE","$attrCode",280],"]",")",")",["T_WHITESPACE"," ",280],"{",["T_WHITESPACE","\n                ",280],["T_VARIABLE","$attrFilterType",281],["T_WHITESPACE"," ",281],"=",["T_WHITESPACE"," ",281],["T_STRING","Mage_ImportExport_Model_Export",281],["T_DOUBLE_COLON","::",281],["T_STRING","getAttributeFilterType",281],"(",["T_VARIABLE","$attribute",281],")",";",["T_WHITESPACE","\n\n                ",281],["T_IF","if",283],["T_WHITESPACE"," ",283],"(",["T_STRING","Mage_ImportExport_Model_Export",283],["T_DOUBLE_COLON","::",283],["T_STRING","FILTER_TYPE_SELECT",283],["T_WHITESPACE"," ",283],["T_IS_EQUAL","==",283],["T_WHITESPACE"," ",283],["T_VARIABLE","$attrFilterType",283],")",["T_WHITESPACE"," ",283],"{",["T_WHITESPACE","\n                    ",283],["T_IF","if",284],["T_WHITESPACE"," ",284],"(",["T_STRING","is_scalar",284],"(",["T_VARIABLE","$exportFilter",284],"[",["T_VARIABLE","$attrCode",284],"]",")",["T_WHITESPACE"," ",284],["T_BOOLEAN_AND","&&",284],["T_WHITESPACE"," ",284],["T_STRING","trim",284],"(",["T_VARIABLE","$exportFilter",284],"[",["T_VARIABLE","$attrCode",284],"]",")",")",["T_WHITESPACE"," ",284],"{",["T_WHITESPACE","\n                        ",284],["T_VARIABLE","$collection",285],["T_OBJECT_OPERATOR","->",285],["T_STRING","addAttributeToFilter",285],"(",["T_VARIABLE","$attrCode",285],",",["T_WHITESPACE"," ",285],["T_ARRAY","array",285],"(",["T_CONSTANT_ENCAPSED_STRING","'eq'",285],["T_WHITESPACE"," ",285],["T_DOUBLE_ARROW","=>",285],["T_WHITESPACE"," ",285],["T_VARIABLE","$exportFilter",285],"[",["T_VARIABLE","$attrCode",285],"]",")",")",";",["T_WHITESPACE","\n                    ",285],"}",["T_WHITESPACE","\n                ",286],"}",["T_WHITESPACE"," ",287],["T_ELSEIF","elseif",287],["T_WHITESPACE"," ",287],"(",["T_STRING","Mage_ImportExport_Model_Export",287],["T_DOUBLE_COLON","::",287],["T_STRING","FILTER_TYPE_INPUT",287],["T_WHITESPACE"," ",287],["T_IS_EQUAL","==",287],["T_WHITESPACE"," ",287],["T_VARIABLE","$attrFilterType",287],")",["T_WHITESPACE"," ",287],"{",["T_WHITESPACE","\n                    ",287],["T_IF","if",288],["T_WHITESPACE"," ",288],"(",["T_STRING","is_scalar",288],"(",["T_VARIABLE","$exportFilter",288],"[",["T_VARIABLE","$attrCode",288],"]",")",["T_WHITESPACE"," ",288],["T_BOOLEAN_AND","&&",288],["T_WHITESPACE"," ",288],["T_STRING","trim",288],"(",["T_VARIABLE","$exportFilter",288],"[",["T_VARIABLE","$attrCode",288],"]",")",")",["T_WHITESPACE"," ",288],"{",["T_WHITESPACE","\n                        ",288],["T_VARIABLE","$collection",289],["T_OBJECT_OPERATOR","->",289],["T_STRING","addAttributeToFilter",289],"(",["T_VARIABLE","$attrCode",289],",",["T_WHITESPACE"," ",289],["T_ARRAY","array",289],"(",["T_CONSTANT_ENCAPSED_STRING","'like'",289],["T_WHITESPACE"," ",289],["T_DOUBLE_ARROW","=>",289],["T_WHITESPACE"," ",289],"\"",["T_ENCAPSED_AND_WHITESPACE","%",289],["T_CURLY_OPEN","{",289],["T_VARIABLE","$exportFilter",289],"[",["T_VARIABLE","$attrCode",289],"]","}",["T_ENCAPSED_AND_WHITESPACE","%",289],"\"",")",")",";",["T_WHITESPACE","\n                    ",289],"}",["T_WHITESPACE","\n                ",290],"}",["T_WHITESPACE"," ",291],["T_ELSEIF","elseif",291],["T_WHITESPACE"," ",291],"(",["T_STRING","Mage_ImportExport_Model_Export",291],["T_DOUBLE_COLON","::",291],["T_STRING","FILTER_TYPE_DATE",291],["T_WHITESPACE"," ",291],["T_IS_EQUAL","==",291],["T_WHITESPACE"," ",291],["T_VARIABLE","$attrFilterType",291],")",["T_WHITESPACE"," ",291],"{",["T_WHITESPACE","\n                    ",291],["T_IF","if",292],["T_WHITESPACE"," ",292],"(",["T_STRING","is_array",292],"(",["T_VARIABLE","$exportFilter",292],"[",["T_VARIABLE","$attrCode",292],"]",")",["T_WHITESPACE"," ",292],["T_BOOLEAN_AND","&&",292],["T_WHITESPACE"," ",292],["T_STRING","count",292],"(",["T_VARIABLE","$exportFilter",292],"[",["T_VARIABLE","$attrCode",292],"]",")",["T_WHITESPACE"," ",292],["T_IS_EQUAL","==",292],["T_WHITESPACE"," ",292],["T_LNUMBER","2",292],")",["T_WHITESPACE"," ",292],"{",["T_WHITESPACE","\n                        ",292],["T_VARIABLE","$from",293],["T_WHITESPACE"," ",293],"=",["T_WHITESPACE"," ",293],["T_STRING","array_shift",293],"(",["T_VARIABLE","$exportFilter",293],"[",["T_VARIABLE","$attrCode",293],"]",")",";",["T_WHITESPACE","\n                        ",293],["T_VARIABLE","$to",294],["T_WHITESPACE","   ",294],"=",["T_WHITESPACE"," ",294],["T_STRING","array_shift",294],"(",["T_VARIABLE","$exportFilter",294],"[",["T_VARIABLE","$attrCode",294],"]",")",";",["T_WHITESPACE","\n\n                        ",294],["T_IF","if",296],["T_WHITESPACE"," ",296],"(",["T_STRING","is_scalar",296],"(",["T_VARIABLE","$from",296],")",["T_WHITESPACE"," ",296],["T_BOOLEAN_AND","&&",296],["T_WHITESPACE"," ",296],"!",["T_EMPTY","empty",296],"(",["T_VARIABLE","$from",296],")",")",["T_WHITESPACE"," ",296],"{",["T_WHITESPACE","\n                            ",296],["T_VARIABLE","$date",297],["T_WHITESPACE"," ",297],"=",["T_WHITESPACE"," ",297],["T_STRING","Mage",297],["T_DOUBLE_COLON","::",297],["T_STRING","app",297],"(",")",["T_OBJECT_OPERATOR","->",297],["T_STRING","getLocale",297],"(",")",["T_OBJECT_OPERATOR","->",297],["T_STRING","date",297],"(",["T_VARIABLE","$from",297],",",["T_STRING","null",297],",",["T_STRING","null",297],",",["T_STRING","false",297],")",["T_OBJECT_OPERATOR","->",297],["T_STRING","toString",297],"(",["T_CONSTANT_ENCAPSED_STRING","'MM\/dd\/YYYY'",297],")",";",["T_WHITESPACE","\n                            ",297],["T_VARIABLE","$collection",298],["T_OBJECT_OPERATOR","->",298],["T_STRING","addAttributeToFilter",298],"(",["T_VARIABLE","$attrCode",298],",",["T_WHITESPACE"," ",298],["T_ARRAY","array",298],"(",["T_CONSTANT_ENCAPSED_STRING","'from'",298],["T_WHITESPACE"," ",298],["T_DOUBLE_ARROW","=>",298],["T_WHITESPACE"," ",298],["T_VARIABLE","$date",298],",",["T_WHITESPACE"," ",298],["T_CONSTANT_ENCAPSED_STRING","'date'",298],["T_WHITESPACE"," ",298],["T_DOUBLE_ARROW","=>",298],["T_WHITESPACE"," ",298],["T_STRING","true",298],")",")",";",["T_WHITESPACE","\n                        ",298],"}",["T_WHITESPACE","\n                        ",299],["T_IF","if",300],["T_WHITESPACE"," ",300],"(",["T_STRING","is_scalar",300],"(",["T_VARIABLE","$to",300],")",["T_WHITESPACE"," ",300],["T_BOOLEAN_AND","&&",300],["T_WHITESPACE"," ",300],"!",["T_EMPTY","empty",300],"(",["T_VARIABLE","$to",300],")",")",["T_WHITESPACE"," ",300],"{",["T_WHITESPACE","\n                            ",300],["T_VARIABLE","$date",301],["T_WHITESPACE"," ",301],"=",["T_WHITESPACE"," ",301],["T_STRING","Mage",301],["T_DOUBLE_COLON","::",301],["T_STRING","app",301],"(",")",["T_OBJECT_OPERATOR","->",301],["T_STRING","getLocale",301],"(",")",["T_OBJECT_OPERATOR","->",301],["T_STRING","date",301],"(",["T_VARIABLE","$to",301],",",["T_STRING","null",301],",",["T_STRING","null",301],",",["T_STRING","false",301],")",["T_OBJECT_OPERATOR","->",301],["T_STRING","toString",301],"(",["T_CONSTANT_ENCAPSED_STRING","'MM\/dd\/YYYY'",301],")",";",["T_WHITESPACE","\n                            ",301],["T_VARIABLE","$collection",302],["T_OBJECT_OPERATOR","->",302],["T_STRING","addAttributeToFilter",302],"(",["T_VARIABLE","$attrCode",302],",",["T_WHITESPACE"," ",302],["T_ARRAY","array",302],"(",["T_CONSTANT_ENCAPSED_STRING","'to'",302],["T_WHITESPACE"," ",302],["T_DOUBLE_ARROW","=>",302],["T_WHITESPACE"," ",302],["T_VARIABLE","$date",302],",",["T_WHITESPACE"," ",302],["T_CONSTANT_ENCAPSED_STRING","'date'",302],["T_WHITESPACE"," ",302],["T_DOUBLE_ARROW","=>",302],["T_WHITESPACE"," ",302],["T_STRING","true",302],")",")",";",["T_WHITESPACE","\n                        ",302],"}",["T_WHITESPACE","\n                    ",303],"}",["T_WHITESPACE","\n                ",304],"}",["T_WHITESPACE"," ",305],["T_ELSEIF","elseif",305],["T_WHITESPACE"," ",305],"(",["T_STRING","Mage_ImportExport_Model_Export",305],["T_DOUBLE_COLON","::",305],["T_STRING","FILTER_TYPE_NUMBER",305],["T_WHITESPACE"," ",305],["T_IS_EQUAL","==",305],["T_WHITESPACE"," ",305],["T_VARIABLE","$attrFilterType",305],")",["T_WHITESPACE"," ",305],"{",["T_WHITESPACE","\n                    ",305],["T_IF","if",306],["T_WHITESPACE"," ",306],"(",["T_STRING","is_array",306],"(",["T_VARIABLE","$exportFilter",306],"[",["T_VARIABLE","$attrCode",306],"]",")",["T_WHITESPACE"," ",306],["T_BOOLEAN_AND","&&",306],["T_WHITESPACE"," ",306],["T_STRING","count",306],"(",["T_VARIABLE","$exportFilter",306],"[",["T_VARIABLE","$attrCode",306],"]",")",["T_WHITESPACE"," ",306],["T_IS_EQUAL","==",306],["T_WHITESPACE"," ",306],["T_LNUMBER","2",306],")",["T_WHITESPACE"," ",306],"{",["T_WHITESPACE","\n                        ",306],["T_VARIABLE","$from",307],["T_WHITESPACE"," ",307],"=",["T_WHITESPACE"," ",307],["T_STRING","array_shift",307],"(",["T_VARIABLE","$exportFilter",307],"[",["T_VARIABLE","$attrCode",307],"]",")",";",["T_WHITESPACE","\n                        ",307],["T_VARIABLE","$to",308],["T_WHITESPACE","   ",308],"=",["T_WHITESPACE"," ",308],["T_STRING","array_shift",308],"(",["T_VARIABLE","$exportFilter",308],"[",["T_VARIABLE","$attrCode",308],"]",")",";",["T_WHITESPACE","\n\n                        ",308],["T_IF","if",310],["T_WHITESPACE"," ",310],"(",["T_STRING","is_numeric",310],"(",["T_VARIABLE","$from",310],")",")",["T_WHITESPACE"," ",310],"{",["T_WHITESPACE","\n                            ",310],["T_VARIABLE","$collection",311],["T_OBJECT_OPERATOR","->",311],["T_STRING","addAttributeToFilter",311],"(",["T_VARIABLE","$attrCode",311],",",["T_WHITESPACE"," ",311],["T_ARRAY","array",311],"(",["T_CONSTANT_ENCAPSED_STRING","'from'",311],["T_WHITESPACE"," ",311],["T_DOUBLE_ARROW","=>",311],["T_WHITESPACE"," ",311],["T_VARIABLE","$from",311],")",")",";",["T_WHITESPACE","\n                        ",311],"}",["T_WHITESPACE","\n                        ",312],["T_IF","if",313],["T_WHITESPACE"," ",313],"(",["T_STRING","is_numeric",313],"(",["T_VARIABLE","$to",313],")",")",["T_WHITESPACE"," ",313],"{",["T_WHITESPACE","\n                            ",313],["T_VARIABLE","$collection",314],["T_OBJECT_OPERATOR","->",314],["T_STRING","addAttributeToFilter",314],"(",["T_VARIABLE","$attrCode",314],",",["T_WHITESPACE"," ",314],["T_ARRAY","array",314],"(",["T_CONSTANT_ENCAPSED_STRING","'to'",314],["T_WHITESPACE"," ",314],["T_DOUBLE_ARROW","=>",314],["T_WHITESPACE"," ",314],["T_VARIABLE","$to",314],")",")",";",["T_WHITESPACE","\n                        ",314],"}",["T_WHITESPACE","\n                    ",315],"}",["T_WHITESPACE","\n                ",316],"}",["T_WHITESPACE","\n            ",317],"}",["T_WHITESPACE","\n            ",318],["T_IF","if",319],["T_WHITESPACE"," ",319],"(",["T_STRING","in_array",319],"(",["T_VARIABLE","$attrCode",319],",",["T_WHITESPACE"," ",319],["T_VARIABLE","$exportAttrCodes",319],")",")",["T_WHITESPACE"," ",319],"{",["T_WHITESPACE","\n                ",319],["T_VARIABLE","$collection",320],["T_OBJECT_OPERATOR","->",320],["T_STRING","addAttributeToSelect",320],"(",["T_VARIABLE","$attrCode",320],")",";",["T_WHITESPACE","\n            ",320],"}",["T_WHITESPACE","\n        ",321],"}",["T_WHITESPACE","\n        ",322],["T_RETURN","return",323],["T_WHITESPACE"," ",323],["T_VARIABLE","$collection",323],";",["T_WHITESPACE","\n    ",323],"}",["T_WHITESPACE","\n\n    ",324],["T_DOC_COMMENT","\/**\n     * Add error with corresponding current data source row number.\n     *\n     * @param string $errorCode Error code or simply column name\n     * @param int $errorRowNum Row number.\n     * @return Mage_ImportExport_Model_Import_Adapter_Abstract\n     *\/",326],["T_WHITESPACE","\n    ",332],["T_PUBLIC","public",333],["T_WHITESPACE"," ",333],["T_FUNCTION","function",333],["T_WHITESPACE"," ",333],["T_STRING","addRowError",333],"(",["T_VARIABLE","$errorCode",333],",",["T_WHITESPACE"," ",333],["T_VARIABLE","$errorRowNum",333],")",["T_WHITESPACE","\n    ",333],"{",["T_WHITESPACE","\n        ",334],["T_VARIABLE","$this",335],["T_OBJECT_OPERATOR","->",335],["T_STRING","_errors",335],"[",["T_VARIABLE","$errorCode",335],"]","[","]",["T_WHITESPACE"," ",335],"=",["T_WHITESPACE"," ",335],["T_VARIABLE","$errorRowNum",335],["T_WHITESPACE"," ",335],"+",["T_WHITESPACE"," ",335],["T_LNUMBER","1",335],";",["T_WHITESPACE"," ",335],["T_COMMENT","\/\/ one added for human readability\n",335],["T_WHITESPACE","        ",336],["T_VARIABLE","$this",336],["T_OBJECT_OPERATOR","->",336],["T_STRING","_invalidRows",336],"[",["T_VARIABLE","$errorRowNum",336],"]",["T_WHITESPACE"," ",336],"=",["T_WHITESPACE"," ",336],["T_STRING","true",336],";",["T_WHITESPACE","\n        ",336],["T_VARIABLE","$this",337],["T_OBJECT_OPERATOR","->",337],["T_STRING","_errorsCount",337],["T_WHITESPACE"," ",337],["T_INC","++",337],";",["T_WHITESPACE","\n\n        ",337],["T_RETURN","return",339],["T_WHITESPACE"," ",339],["T_VARIABLE","$this",339],";",["T_WHITESPACE","\n    ",339],"}",["T_WHITESPACE","\n\n    ",340],["T_DOC_COMMENT","\/**\n     * Add message template for specific error code from outside.\n     *\n     * @param string $errorCode Error code\n     * @param string $message Message template\n     * @return Mage_ImportExport_Model_Import_Entity_Abstract\n     *\/",342],["T_WHITESPACE","\n    ",348],["T_PUBLIC","public",349],["T_WHITESPACE"," ",349],["T_FUNCTION","function",349],["T_WHITESPACE"," ",349],["T_STRING","addMessageTemplate",349],"(",["T_VARIABLE","$errorCode",349],",",["T_WHITESPACE"," ",349],["T_VARIABLE","$message",349],")",["T_WHITESPACE","\n    ",349],"{",["T_WHITESPACE","\n        ",350],["T_VARIABLE","$this",351],["T_OBJECT_OPERATOR","->",351],["T_STRING","_messageTemplates",351],"[",["T_VARIABLE","$errorCode",351],"]",["T_WHITESPACE"," ",351],"=",["T_WHITESPACE"," ",351],["T_VARIABLE","$message",351],";",["T_WHITESPACE","\n\n        ",351],["T_RETURN","return",353],["T_WHITESPACE"," ",353],["T_VARIABLE","$this",353],";",["T_WHITESPACE","\n    ",353],"}",["T_WHITESPACE","\n\n    ",354],["T_DOC_COMMENT","\/**\n     * Export process.\n     *\n     * @deprecated after ver 1.9.2.4 use $this->exportFile() instead\n     *\n     * @return string\n     *\/",356],["T_WHITESPACE","\n    ",362],["T_ABSTRACT","abstract",363],["T_WHITESPACE"," ",363],["T_PUBLIC","public",363],["T_WHITESPACE"," ",363],["T_FUNCTION","function",363],["T_WHITESPACE"," ",363],["T_STRING","export",363],"(",")",";",["T_WHITESPACE","\n\n    ",363],["T_DOC_COMMENT","\/**\n     * Export data and return temporary file through array.\n     *\n     * This method will return following array:\n     *\n     * array(\n     *     'rows'  => count of written rows,\n     *     'value' => path to created file,\n     *     'type'  => 'file'\n     * )\n     *\n     * @throws Mage_Core_Exception\n     * @return array\n     *\/",365],["T_WHITESPACE","\n    ",378],["T_ABSTRACT","abstract",379],["T_WHITESPACE"," ",379],["T_FUNCTION","function",379],["T_WHITESPACE"," ",379],["T_STRING","exportFile",379],"(",")",";",["T_WHITESPACE","\n\n    ",379],["T_DOC_COMMENT","\/**\n     * Clean up attribute collection.\n     *\n     * @param Mage_Eav_Model_Resource_Entity_Attribute_Collection $collection\n     * @return Mage_Eav_Model_Resource_Entity_Attribute_Collection\n     *\/",381],["T_WHITESPACE","\n    ",386],["T_PUBLIC","public",387],["T_WHITESPACE"," ",387],["T_FUNCTION","function",387],["T_WHITESPACE"," ",387],["T_STRING","filterAttributeCollection",387],"(",["T_STRING","Mage_Eav_Model_Resource_Entity_Attribute_Collection",387],["T_WHITESPACE"," ",387],["T_VARIABLE","$collection",387],")",["T_WHITESPACE","\n    ",387],"{",["T_WHITESPACE","\n        ",388],["T_VARIABLE","$collection",389],["T_OBJECT_OPERATOR","->",389],["T_STRING","load",389],"(",")",";",["T_WHITESPACE","\n\n        ",389],["T_FOREACH","foreach",391],["T_WHITESPACE"," ",391],"(",["T_VARIABLE","$collection",391],["T_WHITESPACE"," ",391],["T_AS","as",391],["T_WHITESPACE"," ",391],["T_VARIABLE","$attribute",391],")",["T_WHITESPACE"," ",391],"{",["T_WHITESPACE","\n            ",391],["T_IF","if",392],["T_WHITESPACE"," ",392],"(",["T_STRING","in_array",392],"(",["T_VARIABLE","$attribute",392],["T_OBJECT_OPERATOR","->",392],["T_STRING","getAttributeCode",392],"(",")",",",["T_WHITESPACE"," ",392],["T_VARIABLE","$this",392],["T_OBJECT_OPERATOR","->",392],["T_STRING","_disabledAttrs",392],")",")",["T_WHITESPACE"," ",392],"{",["T_WHITESPACE","\n                ",392],["T_VARIABLE","$collection",393],["T_OBJECT_OPERATOR","->",393],["T_STRING","removeItemByKey",393],"(",["T_VARIABLE","$attribute",393],["T_OBJECT_OPERATOR","->",393],["T_STRING","getId",393],"(",")",")",";",["T_WHITESPACE","\n            ",393],"}",["T_WHITESPACE","\n        ",394],"}",["T_WHITESPACE","\n        ",395],["T_RETURN","return",396],["T_WHITESPACE"," ",396],["T_VARIABLE","$collection",396],";",["T_WHITESPACE","\n    ",396],"}",["T_WHITESPACE","\n\n    ",397],["T_DOC_COMMENT","\/**\n     * Entity attributes collection getter.\n     *\n     * @return Mage_Eav_Model_Resource_Entity_Attribute_Collection\n     *\/",399],["T_WHITESPACE","\n    ",403],["T_ABSTRACT","abstract",404],["T_WHITESPACE"," ",404],["T_PUBLIC","public",404],["T_WHITESPACE"," ",404],["T_FUNCTION","function",404],["T_WHITESPACE"," ",404],["T_STRING","getAttributeCollection",404],"(",")",";",["T_WHITESPACE","\n\n    ",404],["T_DOC_COMMENT","\/**\n     * Returns attributes all values in label-value or value-value pairs form. Labels are lower-cased.\n     *\n     * @param Mage_Eav_Model_Entity_Attribute_Abstract $attribute\n     * @return array\n     *\/",406],["T_WHITESPACE","\n    ",411],["T_PUBLIC","public",412],["T_WHITESPACE"," ",412],["T_FUNCTION","function",412],["T_WHITESPACE"," ",412],["T_STRING","getAttributeOptions",412],"(",["T_STRING","Mage_Eav_Model_Entity_Attribute_Abstract",412],["T_WHITESPACE"," ",412],["T_VARIABLE","$attribute",412],")",["T_WHITESPACE","\n    ",412],"{",["T_WHITESPACE","\n        ",413],["T_VARIABLE","$options",414],["T_WHITESPACE"," ",414],"=",["T_WHITESPACE"," ",414],["T_ARRAY","array",414],"(",")",";",["T_WHITESPACE","\n\n        ",414],["T_IF","if",416],["T_WHITESPACE"," ",416],"(",["T_VARIABLE","$attribute",416],["T_OBJECT_OPERATOR","->",416],["T_STRING","usesSource",416],"(",")",")",["T_WHITESPACE"," ",416],"{",["T_WHITESPACE","\n            ",416],["T_COMMENT","\/\/ should attribute has index (option value) instead of a label?\n",417],["T_WHITESPACE","            ",418],["T_VARIABLE","$index",418],["T_WHITESPACE"," ",418],"=",["T_WHITESPACE"," ",418],["T_STRING","in_array",418],"(",["T_VARIABLE","$attribute",418],["T_OBJECT_OPERATOR","->",418],["T_STRING","getAttributeCode",418],"(",")",",",["T_WHITESPACE"," ",418],["T_VARIABLE","$this",418],["T_OBJECT_OPERATOR","->",418],["T_STRING","_indexValueAttributes",418],")",["T_WHITESPACE"," ",418],"?",["T_WHITESPACE"," ",418],["T_CONSTANT_ENCAPSED_STRING","'value'",418],["T_WHITESPACE"," ",418],":",["T_WHITESPACE"," ",418],["T_CONSTANT_ENCAPSED_STRING","'label'",418],";",["T_WHITESPACE","\n\n            ",418],["T_COMMENT","\/\/ only default (admin) store values used\n",420],["T_WHITESPACE","            ",421],["T_VARIABLE","$attribute",421],["T_OBJECT_OPERATOR","->",421],["T_STRING","setStoreId",421],"(",["T_STRING","Mage_Catalog_Model_Abstract",421],["T_DOUBLE_COLON","::",421],["T_STRING","DEFAULT_STORE_ID",421],")",";",["T_WHITESPACE","\n\n            ",421],["T_TRY","try",423],["T_WHITESPACE"," ",423],"{",["T_WHITESPACE","\n                ",423],["T_FOREACH","foreach",424],["T_WHITESPACE"," ",424],"(",["T_VARIABLE","$attribute",424],["T_OBJECT_OPERATOR","->",424],["T_STRING","getSource",424],"(",")",["T_OBJECT_OPERATOR","->",424],["T_STRING","getAllOptions",424],"(",["T_STRING","false",424],")",["T_WHITESPACE"," ",424],["T_AS","as",424],["T_WHITESPACE"," ",424],["T_VARIABLE","$option",424],")",["T_WHITESPACE"," ",424],"{",["T_WHITESPACE","\n                    ",424],["T_VARIABLE","$innerOptions",425],["T_WHITESPACE"," ",425],"=",["T_WHITESPACE"," ",425],["T_STRING","is_array",425],"(",["T_VARIABLE","$option",425],"[",["T_CONSTANT_ENCAPSED_STRING","'value'",425],"]",")",["T_WHITESPACE"," ",425],"?",["T_WHITESPACE"," ",425],["T_VARIABLE","$option",425],"[",["T_CONSTANT_ENCAPSED_STRING","'value'",425],"]",["T_WHITESPACE"," ",425],":",["T_WHITESPACE"," ",425],["T_ARRAY","array",425],"(",["T_VARIABLE","$option",425],")",";",["T_WHITESPACE","\n                    ",425],["T_FOREACH","foreach",426],["T_WHITESPACE"," ",426],"(",["T_VARIABLE","$innerOptions",426],["T_WHITESPACE"," ",426],["T_AS","as",426],["T_WHITESPACE"," ",426],["T_VARIABLE","$innerOption",426],")",["T_WHITESPACE"," ",426],"{",["T_WHITESPACE","\n                        ",426],["T_IF","if",427],["T_WHITESPACE"," ",427],"(",["T_STRING","strlen",427],"(",["T_VARIABLE","$innerOption",427],"[",["T_CONSTANT_ENCAPSED_STRING","'value'",427],"]",")",")",["T_WHITESPACE"," ",427],"{",["T_WHITESPACE"," ",427],["T_COMMENT","\/\/ skip ' -- Please Select -- ' option\n",427],["T_WHITESPACE","                            ",428],["T_VARIABLE","$options",428],"[",["T_VARIABLE","$innerOption",428],"[",["T_CONSTANT_ENCAPSED_STRING","'value'",428],"]","]",["T_WHITESPACE"," ",428],"=",["T_WHITESPACE"," ",428],["T_VARIABLE","$innerOption",428],"[",["T_VARIABLE","$index",428],"]",";",["T_WHITESPACE","\n                        ",428],"}",["T_WHITESPACE","\n                    ",429],"}",["T_WHITESPACE","\n                ",430],"}",["T_WHITESPACE","\n            ",431],"}",["T_WHITESPACE"," ",432],["T_CATCH","catch",432],["T_WHITESPACE"," ",432],"(",["T_STRING","Exception",432],["T_WHITESPACE"," ",432],["T_VARIABLE","$e",432],")",["T_WHITESPACE"," ",432],"{",["T_WHITESPACE","\n                ",432],["T_COMMENT","\/\/ ignore exceptions connected with source models\n",433],["T_WHITESPACE","            ",434],"}",["T_WHITESPACE","\n        ",434],"}",["T_WHITESPACE","\n        ",435],["T_RETURN","return",436],["T_WHITESPACE"," ",436],["T_VARIABLE","$options",436],";",["T_WHITESPACE","\n    ",436],"}",["T_WHITESPACE","\n\n    ",437],["T_DOC_COMMENT","\/**\n     * EAV entity type code getter.\n     *\n     * @abstract\n     * @return string\n     *\/",439],["T_WHITESPACE","\n    ",444],["T_ABSTRACT","abstract",445],["T_WHITESPACE"," ",445],["T_PUBLIC","public",445],["T_WHITESPACE"," ",445],["T_FUNCTION","function",445],["T_WHITESPACE"," ",445],["T_STRING","getEntityTypeCode",445],"(",")",";",["T_WHITESPACE","\n\n    ",445],["T_DOC_COMMENT","\/**\n     * Entity type ID getter.\n     *\n     * @return int\n     *\/",447],["T_WHITESPACE","\n    ",451],["T_PUBLIC","public",452],["T_WHITESPACE"," ",452],["T_FUNCTION","function",452],["T_WHITESPACE"," ",452],["T_STRING","getEntityTypeId",452],"(",")",["T_WHITESPACE","\n    ",452],"{",["T_WHITESPACE","\n        ",453],["T_RETURN","return",454],["T_WHITESPACE"," ",454],["T_VARIABLE","$this",454],["T_OBJECT_OPERATOR","->",454],["T_STRING","_entityTypeId",454],";",["T_WHITESPACE","\n    ",454],"}",["T_WHITESPACE","\n\n    ",455],["T_DOC_COMMENT","\/**\n     * Returns error information.\n     *\n     * @return array\n     *\/",457],["T_WHITESPACE","\n    ",461],["T_PUBLIC","public",462],["T_WHITESPACE"," ",462],["T_FUNCTION","function",462],["T_WHITESPACE"," ",462],["T_STRING","getErrorMessages",462],"(",")",["T_WHITESPACE","\n    ",462],"{",["T_WHITESPACE","\n        ",463],["T_VARIABLE","$messages",464],["T_WHITESPACE"," ",464],"=",["T_WHITESPACE"," ",464],["T_ARRAY","array",464],"(",")",";",["T_WHITESPACE","\n        ",464],["T_FOREACH","foreach",465],["T_WHITESPACE"," ",465],"(",["T_VARIABLE","$this",465],["T_OBJECT_OPERATOR","->",465],["T_STRING","_errors",465],["T_WHITESPACE"," ",465],["T_AS","as",465],["T_WHITESPACE"," ",465],["T_VARIABLE","$errorCode",465],["T_WHITESPACE"," ",465],["T_DOUBLE_ARROW","=>",465],["T_WHITESPACE"," ",465],["T_VARIABLE","$errorRows",465],")",["T_WHITESPACE"," ",465],"{",["T_WHITESPACE","\n            ",465],["T_VARIABLE","$message",466],["T_WHITESPACE"," ",466],"=",["T_WHITESPACE"," ",466],["T_ISSET","isset",466],"(",["T_VARIABLE","$this",466],["T_OBJECT_OPERATOR","->",466],["T_STRING","_messageTemplates",466],"[",["T_VARIABLE","$errorCode",466],"]",")",["T_WHITESPACE","\n                ",466],"?",["T_WHITESPACE"," ",467],["T_STRING","Mage",467],["T_DOUBLE_COLON","::",467],["T_STRING","helper",467],"(",["T_CONSTANT_ENCAPSED_STRING","'importexport'",467],")",["T_OBJECT_OPERATOR","->",467],["T_STRING","__",467],"(",["T_VARIABLE","$this",467],["T_OBJECT_OPERATOR","->",467],["T_STRING","_messageTemplates",467],"[",["T_VARIABLE","$errorCode",467],"]",")",["T_WHITESPACE","\n                ",467],":",["T_WHITESPACE"," ",468],["T_STRING","Mage",468],["T_DOUBLE_COLON","::",468],["T_STRING","helper",468],"(",["T_CONSTANT_ENCAPSED_STRING","'importexport'",468],")",["T_OBJECT_OPERATOR","->",468],["T_STRING","__",468],"(",["T_CONSTANT_ENCAPSED_STRING","\"Invalid value for '%s' column\"",468],",",["T_WHITESPACE"," ",468],["T_VARIABLE","$errorCode",468],")",";",["T_WHITESPACE","\n            ",468],["T_VARIABLE","$messages",469],"[",["T_VARIABLE","$message",469],"]",["T_WHITESPACE"," ",469],"=",["T_WHITESPACE"," ",469],["T_VARIABLE","$errorRows",469],";",["T_WHITESPACE","\n        ",469],"}",["T_WHITESPACE","\n        ",470],["T_RETURN","return",471],["T_WHITESPACE"," ",471],["T_VARIABLE","$messages",471],";",["T_WHITESPACE","\n    ",471],"}",["T_WHITESPACE","\n\n    ",472],["T_DOC_COMMENT","\/**\n     * Returns error counter value.\n     *\n     * @return int\n     *\/",474],["T_WHITESPACE","\n    ",478],["T_PUBLIC","public",479],["T_WHITESPACE"," ",479],["T_FUNCTION","function",479],["T_WHITESPACE"," ",479],["T_STRING","getErrorsCount",479],"(",")",["T_WHITESPACE","\n    ",479],"{",["T_WHITESPACE","\n        ",480],["T_RETURN","return",481],["T_WHITESPACE"," ",481],["T_VARIABLE","$this",481],["T_OBJECT_OPERATOR","->",481],["T_STRING","_errorsCount",481],";",["T_WHITESPACE","\n    ",481],"}",["T_WHITESPACE","\n\n    ",482],["T_DOC_COMMENT","\/**\n     * Returns invalid rows count.\n     *\n     * @return int\n     *\/",484],["T_WHITESPACE","\n    ",488],["T_PUBLIC","public",489],["T_WHITESPACE"," ",489],["T_FUNCTION","function",489],["T_WHITESPACE"," ",489],["T_STRING","getInvalidRowsCount",489],"(",")",["T_WHITESPACE","\n    ",489],"{",["T_WHITESPACE","\n        ",490],["T_RETURN","return",491],["T_WHITESPACE"," ",491],["T_STRING","count",491],"(",["T_VARIABLE","$this",491],["T_OBJECT_OPERATOR","->",491],["T_STRING","_invalidRows",491],")",";",["T_WHITESPACE","\n    ",491],"}",["T_WHITESPACE","\n\n    ",492],["T_DOC_COMMENT","\/**\n     * Returns number of checked entities.\n     *\n     * @return int\n     *\/",494],["T_WHITESPACE","\n    ",498],["T_PUBLIC","public",499],["T_WHITESPACE"," ",499],["T_FUNCTION","function",499],["T_WHITESPACE"," ",499],["T_STRING","getProcessedEntitiesCount",499],"(",")",["T_WHITESPACE","\n    ",499],"{",["T_WHITESPACE","\n        ",500],["T_RETURN","return",501],["T_WHITESPACE"," ",501],["T_VARIABLE","$this",501],["T_OBJECT_OPERATOR","->",501],["T_STRING","_processedEntitiesCount",501],";",["T_WHITESPACE","\n    ",501],"}",["T_WHITESPACE","\n\n    ",502],["T_DOC_COMMENT","\/**\n     * Returns number of checked rows.\n     *\n     * @return int\n     *\/",504],["T_WHITESPACE","\n    ",508],["T_PUBLIC","public",509],["T_WHITESPACE"," ",509],["T_FUNCTION","function",509],["T_WHITESPACE"," ",509],["T_STRING","getProcessedRowsCount",509],"(",")",["T_WHITESPACE","\n    ",509],"{",["T_WHITESPACE","\n        ",510],["T_RETURN","return",511],["T_WHITESPACE"," ",511],["T_VARIABLE","$this",511],["T_OBJECT_OPERATOR","->",511],["T_STRING","_processedRowsCount",511],";",["T_WHITESPACE","\n    ",511],"}",["T_WHITESPACE","\n\n    ",512],["T_DOC_COMMENT","\/**\n     * Inner writer object getter.\n     *\n     * @throws Exception\n     * @return Mage_ImportExport_Model_Export_Adapter_Abstract\n     *\/",514],["T_WHITESPACE","\n    ",519],["T_PUBLIC","public",520],["T_WHITESPACE"," ",520],["T_FUNCTION","function",520],["T_WHITESPACE"," ",520],["T_STRING","getWriter",520],"(",")",["T_WHITESPACE","\n    ",520],"{",["T_WHITESPACE","\n        ",521],["T_IF","if",522],["T_WHITESPACE"," ",522],"(","!",["T_VARIABLE","$this",522],["T_OBJECT_OPERATOR","->",522],["T_STRING","_writer",522],")",["T_WHITESPACE"," ",522],"{",["T_WHITESPACE","\n            ",522],["T_STRING","Mage",523],["T_DOUBLE_COLON","::",523],["T_STRING","throwException",523],"(",["T_STRING","Mage",523],["T_DOUBLE_COLON","::",523],["T_STRING","helper",523],"(",["T_CONSTANT_ENCAPSED_STRING","'importexport'",523],")",["T_OBJECT_OPERATOR","->",523],["T_STRING","__",523],"(",["T_CONSTANT_ENCAPSED_STRING","'No writer specified'",523],")",")",";",["T_WHITESPACE","\n        ",523],"}",["T_WHITESPACE","\n        ",524],["T_RETURN","return",525],["T_WHITESPACE"," ",525],["T_VARIABLE","$this",525],["T_OBJECT_OPERATOR","->",525],["T_STRING","_writer",525],";",["T_WHITESPACE","\n    ",525],"}",["T_WHITESPACE","\n\n    ",526],["T_DOC_COMMENT","\/**\n     * Set parameters.\n     *\n     * @param array $parameters\n     * @return Mage_ImportExport_Model_Export_Entity_Abstract\n     *\/",528],["T_WHITESPACE","\n    ",533],["T_PUBLIC","public",534],["T_WHITESPACE"," ",534],["T_FUNCTION","function",534],["T_WHITESPACE"," ",534],["T_STRING","setParameters",534],"(",["T_ARRAY","array",534],["T_WHITESPACE"," ",534],["T_VARIABLE","$parameters",534],")",["T_WHITESPACE","\n    ",534],"{",["T_WHITESPACE","\n        ",535],["T_VARIABLE","$this",536],["T_OBJECT_OPERATOR","->",536],["T_STRING","_parameters",536],["T_WHITESPACE"," ",536],"=",["T_WHITESPACE"," ",536],["T_VARIABLE","$parameters",536],";",["T_WHITESPACE","\n\n        ",536],["T_RETURN","return",538],["T_WHITESPACE"," ",538],["T_VARIABLE","$this",538],";",["T_WHITESPACE","\n    ",538],"}",["T_WHITESPACE","\n\n    ",539],["T_DOC_COMMENT","\/**\n     * Writer model setter.\n     *\n     * @param Mage_ImportExport_Model_Export_Adapter_Abstract $writer\n     * @return Mage_ImportExport_Model_Export_Entity_Abstract\n     *\/",541],["T_WHITESPACE","\n    ",546],["T_PUBLIC","public",547],["T_WHITESPACE"," ",547],["T_FUNCTION","function",547],["T_WHITESPACE"," ",547],["T_STRING","setWriter",547],"(",["T_STRING","Mage_ImportExport_Model_Export_Adapter_Abstract",547],["T_WHITESPACE"," ",547],["T_VARIABLE","$writer",547],")",["T_WHITESPACE","\n    ",547],"{",["T_WHITESPACE","\n        ",548],["T_VARIABLE","$this",549],["T_OBJECT_OPERATOR","->",549],["T_STRING","_writer",549],["T_WHITESPACE"," ",549],"=",["T_WHITESPACE"," ",549],["T_VARIABLE","$writer",549],";",["T_WHITESPACE","\n\n        ",549],["T_RETURN","return",551],["T_WHITESPACE"," ",551],["T_VARIABLE","$this",551],";",["T_WHITESPACE","\n    ",551],"}",["T_WHITESPACE","\n",552],"}",["T_WHITESPACE","\n",553]]
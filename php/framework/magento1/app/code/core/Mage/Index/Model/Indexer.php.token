[["T_OPEN_TAG","<?php\n",1],["T_DOC_COMMENT","\/**\n * Magento\n *\n * NOTICE OF LICENSE\n *\n * This source file is subject to the Open Software License (OSL 3.0)\n * that is bundled with this package in the file LICENSE.txt.\n * It is also available through the world-wide-web at this URL:\n * http:\/\/opensource.org\/licenses\/osl-3.0.php\n * If you did not receive a copy of the license and are unable to\n * obtain it through the world-wide-web, please send an email\n * to license@magento.com so we can send you a copy immediately.\n *\n * DISCLAIMER\n *\n * Do not edit or add to this file if you wish to upgrade Magento to newer\n * versions in the future. If you wish to customize Magento for your\n * needs please refer to http:\/\/www.magento.com for more information.\n *\n * @category    Mage\n * @package     Mage_Index\n * @copyright  Copyright (c) 2006-2016 X.commerce, Inc. and affiliates (http:\/\/www.magento.com)\n * @license    http:\/\/opensource.org\/licenses\/osl-3.0.php  Open Software License (OSL 3.0)\n *\/",2],["T_WHITESPACE","\n\n",25],["T_DOC_COMMENT","\/**\n * Indexer strategy\n *\/",27],["T_WHITESPACE","\n",29],["T_CLASS","class",30],["T_WHITESPACE"," ",30],["T_STRING","Mage_Index_Model_Indexer",30],["T_WHITESPACE","\n",30],"{",["T_WHITESPACE","\n    ",31],["T_DOC_COMMENT","\/**\n     * Collection of available processes\n     *\n     * @var Mage_Index_Model_Resource_Process_Collection\n     *\/",32],["T_WHITESPACE","\n    ",36],["T_PROTECTED","protected",37],["T_WHITESPACE"," ",37],["T_VARIABLE","$_processesCollection",37],";",["T_WHITESPACE","\n\n    ",37],["T_DOC_COMMENT","\/**\n     * Indexer processes lock flag\n     *\n     * @deprecated after 1.6.1.0\n     * @var bool\n     *\/",39],["T_WHITESPACE","\n    ",44],["T_PROTECTED","protected",45],["T_WHITESPACE"," ",45],["T_VARIABLE","$_lockFlag",45],["T_WHITESPACE"," ",45],"=",["T_WHITESPACE"," ",45],["T_STRING","false",45],";",["T_WHITESPACE","\n\n    ",45],["T_DOC_COMMENT","\/**\n     * Whether table changes are allowed\n     *\n     * @var bool\n     *\/",47],["T_WHITESPACE","\n    ",51],["T_PROTECTED","protected",52],["T_WHITESPACE"," ",52],["T_VARIABLE","$_allowTableChanges",52],["T_WHITESPACE"," ",52],"=",["T_WHITESPACE"," ",52],["T_STRING","true",52],";",["T_WHITESPACE","\n\n    ",52],["T_DOC_COMMENT","\/**\n     * Current processing event(s)\n     * In array case it should be array(Entity type, Event type)\n     *\n     * @var null|Mage_Index_Model_Event|array\n     *\/",54],["T_WHITESPACE","\n    ",59],["T_PROTECTED","protected",60],["T_WHITESPACE"," ",60],["T_VARIABLE","$_currentEvent",60],["T_WHITESPACE"," ",60],"=",["T_WHITESPACE"," ",60],["T_STRING","null",60],";",["T_WHITESPACE","\n\n    ",60],["T_DOC_COMMENT","\/**\n     * Array of errors\n     *\n     * @var array\n     *\/",62],["T_WHITESPACE","\n    ",66],["T_PROTECTED","protected",67],["T_WHITESPACE"," ",67],["T_VARIABLE","$_errors",67],["T_WHITESPACE"," ",67],"=",["T_WHITESPACE"," ",67],["T_ARRAY","array",67],"(",")",";",["T_WHITESPACE","\n\n    ",67],["T_DOC_COMMENT","\/**\n     * Class constructor. Initialize index processes based on configuration\n     *\/",69],["T_WHITESPACE","\n    ",71],["T_PUBLIC","public",72],["T_WHITESPACE"," ",72],["T_FUNCTION","function",72],["T_WHITESPACE"," ",72],["T_STRING","__construct",72],"(",")",["T_WHITESPACE","\n    ",72],"{",["T_WHITESPACE","\n        ",73],["T_VARIABLE","$this",74],["T_OBJECT_OPERATOR","->",74],["T_STRING","getProcessesCollection",74],"(",")",";",["T_WHITESPACE","\n    ",74],"}",["T_WHITESPACE","\n\n    ",75],["T_DOC_COMMENT","\/**\n     * Get collection of all available processes\n     *\n     * @return Mage_Index_Model_Resource_Process_Collection\n     *\/",77],["T_WHITESPACE","\n    ",81],["T_PUBLIC","public",82],["T_WHITESPACE"," ",82],["T_FUNCTION","function",82],["T_WHITESPACE"," ",82],["T_STRING","getProcessesCollection",82],"(",")",["T_WHITESPACE","\n    ",82],"{",["T_WHITESPACE","\n        ",83],["T_IF","if",84],["T_WHITESPACE"," ",84],"(",["T_STRING","is_null",84],"(",["T_VARIABLE","$this",84],["T_OBJECT_OPERATOR","->",84],["T_STRING","_processesCollection",84],")",")",["T_WHITESPACE"," ",84],"{",["T_WHITESPACE","\n            ",84],["T_VARIABLE","$this",85],["T_OBJECT_OPERATOR","->",85],["T_STRING","_processesCollection",85],["T_WHITESPACE"," ",85],"=",["T_WHITESPACE"," ",85],["T_STRING","Mage",85],["T_DOUBLE_COLON","::",85],["T_STRING","getResourceModel",85],"(",["T_CONSTANT_ENCAPSED_STRING","'index\/process_collection'",85],")",";",["T_WHITESPACE","\n        ",85],"}",["T_WHITESPACE","\n        ",86],["T_RETURN","return",87],["T_WHITESPACE"," ",87],["T_VARIABLE","$this",87],["T_OBJECT_OPERATOR","->",87],["T_STRING","_processesCollection",87],";",["T_WHITESPACE","\n    ",87],"}",["T_WHITESPACE","\n\n    ",88],["T_DOC_COMMENT","\/**\n     * Get index process by specific id\n     *\n     * @param int $processId\n     * @return Mage_Index_Model_Process | false\n     *\/",90],["T_WHITESPACE","\n    ",95],["T_PUBLIC","public",96],["T_WHITESPACE"," ",96],["T_FUNCTION","function",96],["T_WHITESPACE"," ",96],["T_STRING","getProcessById",96],"(",["T_VARIABLE","$processId",96],")",["T_WHITESPACE","\n    ",96],"{",["T_WHITESPACE","\n        ",97],["T_FOREACH","foreach",98],["T_WHITESPACE"," ",98],"(",["T_VARIABLE","$this",98],["T_OBJECT_OPERATOR","->",98],["T_STRING","getProcessesCollection",98],"(",")",["T_WHITESPACE"," ",98],["T_AS","as",98],["T_WHITESPACE"," ",98],["T_VARIABLE","$process",98],")",["T_WHITESPACE"," ",98],"{",["T_WHITESPACE","\n            ",98],["T_IF","if",99],["T_WHITESPACE"," ",99],"(",["T_VARIABLE","$process",99],["T_OBJECT_OPERATOR","->",99],["T_STRING","getId",99],"(",")",["T_WHITESPACE"," ",99],["T_IS_EQUAL","==",99],["T_WHITESPACE"," ",99],["T_VARIABLE","$processId",99],")",["T_WHITESPACE"," ",99],"{",["T_WHITESPACE","\n                ",99],["T_RETURN","return",100],["T_WHITESPACE"," ",100],["T_VARIABLE","$process",100],";",["T_WHITESPACE","\n            ",100],"}",["T_WHITESPACE","\n        ",101],"}",["T_WHITESPACE","\n        ",102],["T_RETURN","return",103],["T_WHITESPACE"," ",103],["T_STRING","false",103],";",["T_WHITESPACE","\n    ",103],"}",["T_WHITESPACE","\n\n    ",104],["T_DOC_COMMENT","\/**\n     * Get index process by specific code\n     *\n     * @param string $code\n     * @return Mage_Index_Model_Process | false\n     *\/",106],["T_WHITESPACE","\n    ",111],["T_PUBLIC","public",112],["T_WHITESPACE"," ",112],["T_FUNCTION","function",112],["T_WHITESPACE"," ",112],["T_STRING","getProcessByCode",112],"(",["T_VARIABLE","$code",112],")",["T_WHITESPACE","\n    ",112],"{",["T_WHITESPACE","\n        ",113],["T_FOREACH","foreach",114],["T_WHITESPACE"," ",114],"(",["T_VARIABLE","$this",114],["T_OBJECT_OPERATOR","->",114],["T_STRING","getProcessesCollection",114],"(",")",["T_WHITESPACE"," ",114],["T_AS","as",114],["T_WHITESPACE"," ",114],["T_VARIABLE","$process",114],")",["T_WHITESPACE"," ",114],"{",["T_WHITESPACE","\n            ",114],["T_IF","if",115],["T_WHITESPACE"," ",115],"(",["T_VARIABLE","$process",115],["T_OBJECT_OPERATOR","->",115],["T_STRING","getIndexerCode",115],"(",")",["T_WHITESPACE"," ",115],["T_IS_EQUAL","==",115],["T_WHITESPACE"," ",115],["T_VARIABLE","$code",115],")",["T_WHITESPACE"," ",115],"{",["T_WHITESPACE","\n                ",115],["T_RETURN","return",116],["T_WHITESPACE"," ",116],["T_VARIABLE","$process",116],";",["T_WHITESPACE","\n            ",116],"}",["T_WHITESPACE","\n        ",117],"}",["T_WHITESPACE","\n        ",118],["T_RETURN","return",119],["T_WHITESPACE"," ",119],["T_STRING","false",119],";",["T_WHITESPACE","\n    ",119],"}",["T_WHITESPACE","\n\n    ",120],["T_DOC_COMMENT","\/**\n     * Function returns array of indexer's process with order by sort_order field\n     *\n     * @param array $codes\n     * @return array\n     *\/",122],["T_WHITESPACE","\n    ",127],["T_PUBLIC","public",128],["T_WHITESPACE"," ",128],["T_FUNCTION","function",128],["T_WHITESPACE"," ",128],["T_STRING","getProcessesCollectionByCodes",128],"(",["T_ARRAY","array",128],["T_WHITESPACE"," ",128],["T_VARIABLE","$codes",128],")",["T_WHITESPACE","\n    ",128],"{",["T_WHITESPACE","\n        ",129],["T_VARIABLE","$processes",130],["T_WHITESPACE"," ",130],"=",["T_WHITESPACE"," ",130],["T_ARRAY","array",130],"(",")",";",["T_WHITESPACE","\n        ",130],["T_VARIABLE","$this",131],["T_OBJECT_OPERATOR","->",131],["T_STRING","_errors",131],["T_WHITESPACE"," ",131],"=",["T_WHITESPACE"," ",131],["T_ARRAY","array",131],"(",")",";",["T_WHITESPACE","\n        ",131],["T_FOREACH","foreach",132],"(",["T_VARIABLE","$codes",132],["T_WHITESPACE"," ",132],["T_AS","as",132],["T_WHITESPACE"," ",132],["T_VARIABLE","$code",132],")",["T_WHITESPACE"," ",132],"{",["T_WHITESPACE","\n            ",132],["T_VARIABLE","$process",133],["T_WHITESPACE"," ",133],"=",["T_WHITESPACE"," ",133],["T_VARIABLE","$this",133],["T_OBJECT_OPERATOR","->",133],["T_STRING","getProcessByCode",133],"(",["T_VARIABLE","$code",133],")",";",["T_WHITESPACE","\n            ",133],["T_IF","if",134],["T_WHITESPACE"," ",134],"(","!",["T_VARIABLE","$process",134],")",["T_WHITESPACE"," ",134],"{",["T_WHITESPACE","\n                ",134],["T_VARIABLE","$this",135],["T_OBJECT_OPERATOR","->",135],["T_STRING","_errors",135],"[","]",["T_WHITESPACE"," ",135],"=",["T_WHITESPACE"," ",135],["T_STRING","sprintf",135],"(",["T_CONSTANT_ENCAPSED_STRING","'Warning: Unknown indexer with code %s'",135],",",["T_WHITESPACE"," ",135],["T_STRING","trim",135],"(",["T_VARIABLE","$code",135],")",")",";",["T_WHITESPACE","\n                ",135],["T_CONTINUE","continue",136],";",["T_WHITESPACE","\n            ",136],"}",["T_WHITESPACE","\n            ",137],["T_VARIABLE","$processes",138],"[",["T_VARIABLE","$process",138],["T_OBJECT_OPERATOR","->",138],["T_STRING","getIndexerCode",138],"(",")","]",["T_WHITESPACE"," ",138],"=",["T_WHITESPACE"," ",138],["T_VARIABLE","$process",138],";",["T_WHITESPACE","\n        ",138],"}",["T_WHITESPACE","\n        ",139],["T_RETURN","return",140],["T_WHITESPACE"," ",140],["T_VARIABLE","$processes",140],";",["T_WHITESPACE","\n    ",140],"}",["T_WHITESPACE","\n\n    ",141],["T_DOC_COMMENT","\/**\n     * Return true if model has errors\n     *\n     * @return bool\n     *\/",143],["T_WHITESPACE","\n    ",147],["T_PUBLIC","public",148],["T_WHITESPACE"," ",148],["T_FUNCTION","function",148],["T_WHITESPACE"," ",148],["T_STRING","hasErrors",148],"(",")",["T_WHITESPACE","\n    ",148],"{",["T_WHITESPACE","\n        ",149],["T_RETURN","return",150],["T_WHITESPACE"," ",150],["T_BOOL_CAST","(bool)",150],["T_STRING","count",150],"(",["T_VARIABLE","$this",150],["T_OBJECT_OPERATOR","->",150],["T_STRING","_errors",150],")",";",["T_WHITESPACE","\n    ",150],"}",["T_WHITESPACE","\n\n    ",151],["T_DOC_COMMENT","\/**\n     * Return array of errors\n     *\n     * @return array\n     *\/",153],["T_WHITESPACE","\n    ",157],["T_PUBLIC","public",158],["T_WHITESPACE"," ",158],["T_FUNCTION","function",158],["T_WHITESPACE"," ",158],["T_STRING","getErrors",158],"(",")",["T_WHITESPACE","\n    ",158],"{",["T_WHITESPACE","\n        ",159],["T_RETURN","return",160],["T_WHITESPACE"," ",160],["T_VARIABLE","$this",160],["T_OBJECT_OPERATOR","->",160],["T_STRING","_errors",160],";",["T_WHITESPACE","\n    ",160],"}",["T_WHITESPACE","\n\n    ",161],["T_DOC_COMMENT","\/**\n     * Lock indexer actions\n     * @deprecated after 1.6.1.0\n     *\n     * @return Mage_Index_Model_Indexer\n     *\/",163],["T_WHITESPACE","\n    ",168],["T_PUBLIC","public",169],["T_WHITESPACE"," ",169],["T_FUNCTION","function",169],["T_WHITESPACE"," ",169],["T_STRING","lockIndexer",169],"(",")",["T_WHITESPACE","\n    ",169],"{",["T_WHITESPACE","\n        ",170],["T_VARIABLE","$this",171],["T_OBJECT_OPERATOR","->",171],["T_STRING","_lockFlag",171],["T_WHITESPACE"," ",171],"=",["T_WHITESPACE"," ",171],["T_STRING","true",171],";",["T_WHITESPACE","\n        ",171],["T_RETURN","return",172],["T_WHITESPACE"," ",172],["T_VARIABLE","$this",172],";",["T_WHITESPACE","\n    ",172],"}",["T_WHITESPACE","\n\n    ",173],["T_DOC_COMMENT","\/**\n     * Unlock indexer actions\n     * @deprecated after 1.6.1.0\n     *\n     * @return Mage_Index_Model_Indexer\n     *\/",175],["T_WHITESPACE","\n    ",180],["T_PUBLIC","public",181],["T_WHITESPACE"," ",181],["T_FUNCTION","function",181],["T_WHITESPACE"," ",181],["T_STRING","unlockIndexer",181],"(",")",["T_WHITESPACE","\n    ",181],"{",["T_WHITESPACE","\n        ",182],["T_VARIABLE","$this",183],["T_OBJECT_OPERATOR","->",183],["T_STRING","_lockFlag",183],["T_WHITESPACE"," ",183],"=",["T_WHITESPACE"," ",183],["T_STRING","false",183],";",["T_WHITESPACE","\n        ",183],["T_RETURN","return",184],["T_WHITESPACE"," ",184],["T_VARIABLE","$this",184],";",["T_WHITESPACE","\n    ",184],"}",["T_WHITESPACE","\n\n    ",185],["T_DOC_COMMENT","\/**\n     * Check if onject actions are locked\n     *\n     * @deprecated after 1.6.1.0\n     * @return bool\n     *\/",187],["T_WHITESPACE","\n    ",192],["T_PUBLIC","public",193],["T_WHITESPACE"," ",193],["T_FUNCTION","function",193],["T_WHITESPACE"," ",193],["T_STRING","isLocked",193],"(",")",["T_WHITESPACE","\n    ",193],"{",["T_WHITESPACE","\n        ",194],["T_RETURN","return",195],["T_WHITESPACE"," ",195],["T_VARIABLE","$this",195],["T_OBJECT_OPERATOR","->",195],["T_STRING","_lockFlag",195],";",["T_WHITESPACE","\n    ",195],"}",["T_WHITESPACE","\n\n    ",196],["T_DOC_COMMENT","\/**\n     * Indexing all pending events.\n     * Events set can be limited by event entity and type\n     *\n     * @param   null | string $entity\n     * @param   null | string $type\n     * @throws Exception\n     * @return  Mage_Index_Model_Indexer\n     *\/",198],["T_WHITESPACE","\n    ",206],["T_PUBLIC","public",207],["T_WHITESPACE"," ",207],["T_FUNCTION","function",207],["T_WHITESPACE"," ",207],["T_STRING","indexEvents",207],"(",["T_VARIABLE","$entity",207],"=",["T_STRING","null",207],",",["T_WHITESPACE"," ",207],["T_VARIABLE","$type",207],"=",["T_STRING","null",207],")",["T_WHITESPACE","\n    ",207],"{",["T_WHITESPACE","\n        ",208],["T_STRING","Mage",209],["T_DOUBLE_COLON","::",209],["T_STRING","dispatchEvent",209],"(",["T_CONSTANT_ENCAPSED_STRING","'start_index_events'",209],["T_WHITESPACE"," ",209],".",["T_WHITESPACE"," ",209],["T_VARIABLE","$this",209],["T_OBJECT_OPERATOR","->",209],["T_STRING","_getEventTypeName",209],"(",["T_VARIABLE","$entity",209],",",["T_WHITESPACE"," ",209],["T_VARIABLE","$type",209],")",")",";",["T_WHITESPACE","\n\n        ",209],["T_DOC_COMMENT","\/** @var $resourceModel Mage_Index_Model_Resource_Process *\/",211],["T_WHITESPACE","\n        ",211],["T_VARIABLE","$resourceModel",212],["T_WHITESPACE"," ",212],"=",["T_WHITESPACE"," ",212],["T_STRING","Mage",212],["T_DOUBLE_COLON","::",212],["T_STRING","getResourceSingleton",212],"(",["T_CONSTANT_ENCAPSED_STRING","'index\/process'",212],")",";",["T_WHITESPACE","\n\n        ",212],["T_VARIABLE","$allowTableChanges",214],["T_WHITESPACE"," ",214],"=",["T_WHITESPACE"," ",214],["T_VARIABLE","$this",214],["T_OBJECT_OPERATOR","->",214],["T_STRING","_allowTableChanges",214],["T_WHITESPACE"," ",214],["T_BOOLEAN_AND","&&",214],["T_WHITESPACE"," ",214],"!",["T_VARIABLE","$resourceModel",214],["T_OBJECT_OPERATOR","->",214],["T_STRING","isInTransaction",214],"(",")",";",["T_WHITESPACE","\n        ",214],["T_IF","if",215],["T_WHITESPACE"," ",215],"(",["T_VARIABLE","$allowTableChanges",215],")",["T_WHITESPACE"," ",215],"{",["T_WHITESPACE","\n            ",215],["T_VARIABLE","$this",216],["T_OBJECT_OPERATOR","->",216],["T_STRING","_currentEvent",216],["T_WHITESPACE"," ",216],"=",["T_WHITESPACE"," ",216],["T_ARRAY","array",216],"(",["T_VARIABLE","$entity",216],",",["T_WHITESPACE"," ",216],["T_VARIABLE","$type",216],")",";",["T_WHITESPACE","\n            ",216],["T_VARIABLE","$this",217],["T_OBJECT_OPERATOR","->",217],["T_STRING","_changeKeyStatus",217],"(",["T_STRING","false",217],")",";",["T_WHITESPACE","\n        ",217],"}",["T_WHITESPACE","\n\n        ",218],["T_VARIABLE","$resourceModel",220],["T_OBJECT_OPERATOR","->",220],["T_STRING","beginTransaction",220],"(",")",";",["T_WHITESPACE","\n        ",220],["T_VARIABLE","$this",221],["T_OBJECT_OPERATOR","->",221],["T_STRING","_allowTableChanges",221],["T_WHITESPACE"," ",221],"=",["T_WHITESPACE"," ",221],["T_STRING","false",221],";",["T_WHITESPACE","\n        ",221],["T_TRY","try",222],["T_WHITESPACE"," ",222],"{",["T_WHITESPACE","\n            ",222],["T_VARIABLE","$this",223],["T_OBJECT_OPERATOR","->",223],["T_STRING","_runAll",223],"(",["T_CONSTANT_ENCAPSED_STRING","'indexEvents'",223],",",["T_WHITESPACE"," ",223],["T_ARRAY","array",223],"(",["T_VARIABLE","$entity",223],",",["T_WHITESPACE"," ",223],["T_VARIABLE","$type",223],")",")",";",["T_WHITESPACE","\n            ",223],["T_VARIABLE","$resourceModel",224],["T_OBJECT_OPERATOR","->",224],["T_STRING","commit",224],"(",")",";",["T_WHITESPACE","\n        ",224],"}",["T_WHITESPACE"," ",225],["T_CATCH","catch",225],["T_WHITESPACE"," ",225],"(",["T_STRING","Exception",225],["T_WHITESPACE"," ",225],["T_VARIABLE","$e",225],")",["T_WHITESPACE"," ",225],"{",["T_WHITESPACE","\n            ",225],["T_VARIABLE","$resourceModel",226],["T_OBJECT_OPERATOR","->",226],["T_STRING","rollBack",226],"(",")",";",["T_WHITESPACE","\n            ",226],["T_THROW","throw",227],["T_WHITESPACE"," ",227],["T_VARIABLE","$e",227],";",["T_WHITESPACE","\n        ",227],"}",["T_WHITESPACE","\n        ",228],["T_IF","if",229],["T_WHITESPACE"," ",229],"(",["T_VARIABLE","$allowTableChanges",229],")",["T_WHITESPACE"," ",229],"{",["T_WHITESPACE","\n            ",229],["T_VARIABLE","$this",230],["T_OBJECT_OPERATOR","->",230],["T_STRING","_allowTableChanges",230],["T_WHITESPACE"," ",230],"=",["T_WHITESPACE"," ",230],["T_STRING","true",230],";",["T_WHITESPACE","\n            ",230],["T_VARIABLE","$this",231],["T_OBJECT_OPERATOR","->",231],["T_STRING","_changeKeyStatus",231],"(",["T_STRING","true",231],")",";",["T_WHITESPACE","\n            ",231],["T_VARIABLE","$this",232],["T_OBJECT_OPERATOR","->",232],["T_STRING","_currentEvent",232],["T_WHITESPACE"," ",232],"=",["T_WHITESPACE"," ",232],["T_STRING","null",232],";",["T_WHITESPACE","\n        ",232],"}",["T_WHITESPACE","\n        ",233],["T_STRING","Mage",234],["T_DOUBLE_COLON","::",234],["T_STRING","dispatchEvent",234],"(",["T_CONSTANT_ENCAPSED_STRING","'end_index_events'",234],["T_WHITESPACE"," ",234],".",["T_WHITESPACE"," ",234],["T_VARIABLE","$this",234],["T_OBJECT_OPERATOR","->",234],["T_STRING","_getEventTypeName",234],"(",["T_VARIABLE","$entity",234],",",["T_WHITESPACE"," ",234],["T_VARIABLE","$type",234],")",")",";",["T_WHITESPACE","\n        ",234],["T_RETURN","return",235],["T_WHITESPACE"," ",235],["T_VARIABLE","$this",235],";",["T_WHITESPACE","\n    ",235],"}",["T_WHITESPACE","\n\n    ",236],["T_DOC_COMMENT","\/**\n     * Index one event by all processes\n     *\n     * @param   Mage_Index_Model_Event $event\n     * @return  Mage_Index_Model_Indexer\n     *\/",238],["T_WHITESPACE","\n    ",243],["T_PUBLIC","public",244],["T_WHITESPACE"," ",244],["T_FUNCTION","function",244],["T_WHITESPACE"," ",244],["T_STRING","indexEvent",244],"(",["T_STRING","Mage_Index_Model_Event",244],["T_WHITESPACE"," ",244],["T_VARIABLE","$event",244],")",["T_WHITESPACE","\n    ",244],"{",["T_WHITESPACE","\n        ",245],["T_VARIABLE","$this",246],["T_OBJECT_OPERATOR","->",246],["T_STRING","_runAll",246],"(",["T_CONSTANT_ENCAPSED_STRING","'safeProcessEvent'",246],",",["T_WHITESPACE"," ",246],["T_ARRAY","array",246],"(",["T_VARIABLE","$event",246],")",")",";",["T_WHITESPACE","\n        ",246],["T_RETURN","return",247],["T_WHITESPACE"," ",247],["T_VARIABLE","$this",247],";",["T_WHITESPACE","\n    ",247],"}",["T_WHITESPACE","\n\n    ",248],["T_DOC_COMMENT","\/**\n     * Register event in each indexing process process\n     *\n     * @param Mage_Index_Model_Event $event\n     * @return Mage_Index_Model_Indexer\n     *\/",250],["T_WHITESPACE","\n    ",255],["T_PUBLIC","public",256],["T_WHITESPACE"," ",256],["T_FUNCTION","function",256],["T_WHITESPACE"," ",256],["T_STRING","registerEvent",256],"(",["T_STRING","Mage_Index_Model_Event",256],["T_WHITESPACE"," ",256],["T_VARIABLE","$event",256],")",["T_WHITESPACE","\n    ",256],"{",["T_WHITESPACE","\n        ",257],["T_VARIABLE","$this",258],["T_OBJECT_OPERATOR","->",258],["T_STRING","_runAll",258],"(",["T_CONSTANT_ENCAPSED_STRING","'register'",258],",",["T_WHITESPACE"," ",258],["T_ARRAY","array",258],"(",["T_VARIABLE","$event",258],")",")",";",["T_WHITESPACE","\n        ",258],["T_RETURN","return",259],["T_WHITESPACE"," ",259],["T_VARIABLE","$this",259],";",["T_WHITESPACE","\n    ",259],"}",["T_WHITESPACE","\n\n    ",260],["T_DOC_COMMENT","\/**\n     * Create new event log and register event in all processes\n     *\n     * @param   Varien_Object $entity\n     * @param   string $entityType\n     * @param   string $eventType\n     * @param   bool $doSave\n     * @return  Mage_Index_Model_Event\n     *\/",262],["T_WHITESPACE","\n    ",270],["T_PUBLIC","public",271],["T_WHITESPACE"," ",271],["T_FUNCTION","function",271],["T_WHITESPACE"," ",271],["T_STRING","logEvent",271],"(",["T_STRING","Varien_Object",271],["T_WHITESPACE"," ",271],["T_VARIABLE","$entity",271],",",["T_WHITESPACE"," ",271],["T_VARIABLE","$entityType",271],",",["T_WHITESPACE"," ",271],["T_VARIABLE","$eventType",271],",",["T_WHITESPACE"," ",271],["T_VARIABLE","$doSave",271],"=",["T_STRING","true",271],")",["T_WHITESPACE","\n    ",271],"{",["T_WHITESPACE","\n        ",272],["T_VARIABLE","$event",273],["T_WHITESPACE"," ",273],"=",["T_WHITESPACE"," ",273],["T_STRING","Mage",273],["T_DOUBLE_COLON","::",273],["T_STRING","getModel",273],"(",["T_CONSTANT_ENCAPSED_STRING","'index\/event'",273],")",["T_WHITESPACE","\n            ",273],["T_OBJECT_OPERATOR","->",274],["T_STRING","setEntity",274],"(",["T_VARIABLE","$entityType",274],")",["T_WHITESPACE","\n            ",274],["T_OBJECT_OPERATOR","->",275],["T_STRING","setType",275],"(",["T_VARIABLE","$eventType",275],")",["T_WHITESPACE","\n            ",275],["T_OBJECT_OPERATOR","->",276],["T_STRING","setDataObject",276],"(",["T_VARIABLE","$entity",276],")",["T_WHITESPACE","\n            ",276],["T_OBJECT_OPERATOR","->",277],["T_STRING","setEntityPk",277],"(",["T_VARIABLE","$entity",277],["T_OBJECT_OPERATOR","->",277],["T_STRING","getId",277],"(",")",")",";",["T_WHITESPACE","\n\n        ",277],["T_VARIABLE","$this",279],["T_OBJECT_OPERATOR","->",279],["T_STRING","registerEvent",279],"(",["T_VARIABLE","$event",279],")",";",["T_WHITESPACE","\n        ",279],["T_IF","if",280],["T_WHITESPACE"," ",280],"(",["T_VARIABLE","$doSave",280],")",["T_WHITESPACE"," ",280],"{",["T_WHITESPACE","\n            ",280],["T_VARIABLE","$event",281],["T_OBJECT_OPERATOR","->",281],["T_STRING","save",281],"(",")",";",["T_WHITESPACE","\n        ",281],"}",["T_WHITESPACE","\n        ",282],["T_RETURN","return",283],["T_WHITESPACE"," ",283],["T_VARIABLE","$event",283],";",["T_WHITESPACE","\n    ",283],"}",["T_WHITESPACE","\n\n    ",284],["T_DOC_COMMENT","\/**\n     * Create new event log and register event in all processes.\n     * Initiate events indexing procedure.\n     *\n     * @param   Varien_Object $entity\n     * @param   string $entityType\n     * @param   string $eventType\n     * @throws Exception\n     * @return  Mage_Index_Model_Indexer\n     *\/",286],["T_WHITESPACE","\n    ",295],["T_PUBLIC","public",296],["T_WHITESPACE"," ",296],["T_FUNCTION","function",296],["T_WHITESPACE"," ",296],["T_STRING","processEntityAction",296],"(",["T_STRING","Varien_Object",296],["T_WHITESPACE"," ",296],["T_VARIABLE","$entity",296],",",["T_WHITESPACE"," ",296],["T_VARIABLE","$entityType",296],",",["T_WHITESPACE"," ",296],["T_VARIABLE","$eventType",296],")",["T_WHITESPACE","\n    ",296],"{",["T_WHITESPACE","\n        ",297],["T_VARIABLE","$event",298],["T_WHITESPACE"," ",298],"=",["T_WHITESPACE"," ",298],["T_VARIABLE","$this",298],["T_OBJECT_OPERATOR","->",298],["T_STRING","logEvent",298],"(",["T_VARIABLE","$entity",298],",",["T_WHITESPACE"," ",298],["T_VARIABLE","$entityType",298],",",["T_WHITESPACE"," ",298],["T_VARIABLE","$eventType",298],",",["T_WHITESPACE"," ",298],["T_STRING","false",298],")",";",["T_WHITESPACE","\n        ",298],["T_DOC_COMMENT","\/**\n         * Index and save event just in case if some process matched it\n         *\/",299],["T_WHITESPACE","\n        ",301],["T_IF","if",302],["T_WHITESPACE"," ",302],"(",["T_VARIABLE","$event",302],["T_OBJECT_OPERATOR","->",302],["T_STRING","getProcessIds",302],"(",")",")",["T_WHITESPACE"," ",302],"{",["T_WHITESPACE","\n            ",302],["T_STRING","Mage",303],["T_DOUBLE_COLON","::",303],["T_STRING","dispatchEvent",303],"(",["T_CONSTANT_ENCAPSED_STRING","'start_process_event'",303],["T_WHITESPACE"," ",303],".",["T_WHITESPACE"," ",303],["T_VARIABLE","$this",303],["T_OBJECT_OPERATOR","->",303],["T_STRING","_getEventTypeName",303],"(",["T_VARIABLE","$entityType",303],",",["T_WHITESPACE"," ",303],["T_VARIABLE","$eventType",303],")",")",";",["T_WHITESPACE","\n\n            ",303],["T_DOC_COMMENT","\/** @var $resourceModel Mage_Index_Model_Resource_Process *\/",305],["T_WHITESPACE","\n            ",305],["T_VARIABLE","$resourceModel",306],["T_WHITESPACE"," ",306],"=",["T_WHITESPACE"," ",306],["T_STRING","Mage",306],["T_DOUBLE_COLON","::",306],["T_STRING","getResourceSingleton",306],"(",["T_CONSTANT_ENCAPSED_STRING","'index\/process'",306],")",";",["T_WHITESPACE","\n\n            ",306],["T_VARIABLE","$allowTableChanges",308],["T_WHITESPACE"," ",308],"=",["T_WHITESPACE"," ",308],["T_VARIABLE","$this",308],["T_OBJECT_OPERATOR","->",308],["T_STRING","_allowTableChanges",308],["T_WHITESPACE"," ",308],["T_BOOLEAN_AND","&&",308],["T_WHITESPACE"," ",308],"!",["T_VARIABLE","$resourceModel",308],["T_OBJECT_OPERATOR","->",308],["T_STRING","isInTransaction",308],"(",")",";",["T_WHITESPACE","\n            ",308],["T_IF","if",309],["T_WHITESPACE"," ",309],"(",["T_VARIABLE","$allowTableChanges",309],")",["T_WHITESPACE"," ",309],"{",["T_WHITESPACE","\n                ",309],["T_VARIABLE","$this",310],["T_OBJECT_OPERATOR","->",310],["T_STRING","_currentEvent",310],["T_WHITESPACE"," ",310],"=",["T_WHITESPACE"," ",310],["T_VARIABLE","$event",310],";",["T_WHITESPACE","\n                ",310],["T_VARIABLE","$this",311],["T_OBJECT_OPERATOR","->",311],["T_STRING","_changeKeyStatus",311],"(",["T_STRING","false",311],")",";",["T_WHITESPACE","\n            ",311],"}",["T_WHITESPACE","\n\n            ",312],["T_VARIABLE","$resourceModel",314],["T_OBJECT_OPERATOR","->",314],["T_STRING","beginTransaction",314],"(",")",";",["T_WHITESPACE","\n            ",314],["T_VARIABLE","$this",315],["T_OBJECT_OPERATOR","->",315],["T_STRING","_allowTableChanges",315],["T_WHITESPACE"," ",315],"=",["T_WHITESPACE"," ",315],["T_STRING","false",315],";",["T_WHITESPACE","\n            ",315],["T_TRY","try",316],["T_WHITESPACE"," ",316],"{",["T_WHITESPACE","\n                ",316],["T_VARIABLE","$this",317],["T_OBJECT_OPERATOR","->",317],["T_STRING","indexEvent",317],"(",["T_VARIABLE","$event",317],")",";",["T_WHITESPACE","\n                ",317],["T_VARIABLE","$resourceModel",318],["T_OBJECT_OPERATOR","->",318],["T_STRING","commit",318],"(",")",";",["T_WHITESPACE","\n            ",318],"}",["T_WHITESPACE"," ",319],["T_CATCH","catch",319],["T_WHITESPACE"," ",319],"(",["T_STRING","Exception",319],["T_WHITESPACE"," ",319],["T_VARIABLE","$e",319],")",["T_WHITESPACE"," ",319],"{",["T_WHITESPACE","\n                ",319],["T_VARIABLE","$resourceModel",320],["T_OBJECT_OPERATOR","->",320],["T_STRING","rollBack",320],"(",")",";",["T_WHITESPACE","\n                ",320],["T_IF","if",321],["T_WHITESPACE"," ",321],"(",["T_VARIABLE","$allowTableChanges",321],")",["T_WHITESPACE"," ",321],"{",["T_WHITESPACE","\n                    ",321],["T_VARIABLE","$this",322],["T_OBJECT_OPERATOR","->",322],["T_STRING","_allowTableChanges",322],["T_WHITESPACE"," ",322],"=",["T_WHITESPACE"," ",322],["T_STRING","true",322],";",["T_WHITESPACE","\n                    ",322],["T_VARIABLE","$this",323],["T_OBJECT_OPERATOR","->",323],["T_STRING","_changeKeyStatus",323],"(",["T_STRING","true",323],")",";",["T_WHITESPACE","\n                    ",323],["T_VARIABLE","$this",324],["T_OBJECT_OPERATOR","->",324],["T_STRING","_currentEvent",324],["T_WHITESPACE"," ",324],"=",["T_WHITESPACE"," ",324],["T_STRING","null",324],";",["T_WHITESPACE","\n                ",324],"}",["T_WHITESPACE","\n                ",325],["T_THROW","throw",326],["T_WHITESPACE"," ",326],["T_VARIABLE","$e",326],";",["T_WHITESPACE","\n            ",326],"}",["T_WHITESPACE","\n            ",327],["T_IF","if",328],["T_WHITESPACE"," ",328],"(",["T_VARIABLE","$allowTableChanges",328],")",["T_WHITESPACE"," ",328],"{",["T_WHITESPACE","\n                ",328],["T_VARIABLE","$this",329],["T_OBJECT_OPERATOR","->",329],["T_STRING","_allowTableChanges",329],["T_WHITESPACE"," ",329],"=",["T_WHITESPACE"," ",329],["T_STRING","true",329],";",["T_WHITESPACE","\n                ",329],["T_VARIABLE","$this",330],["T_OBJECT_OPERATOR","->",330],["T_STRING","_changeKeyStatus",330],"(",["T_STRING","true",330],")",";",["T_WHITESPACE","\n                ",330],["T_VARIABLE","$this",331],["T_OBJECT_OPERATOR","->",331],["T_STRING","_currentEvent",331],["T_WHITESPACE"," ",331],"=",["T_WHITESPACE"," ",331],["T_STRING","null",331],";",["T_WHITESPACE","\n            ",331],"}",["T_WHITESPACE","\n            ",332],["T_VARIABLE","$event",333],["T_OBJECT_OPERATOR","->",333],["T_STRING","save",333],"(",")",";",["T_WHITESPACE","\n            ",333],["T_STRING","Mage",334],["T_DOUBLE_COLON","::",334],["T_STRING","dispatchEvent",334],"(",["T_CONSTANT_ENCAPSED_STRING","'end_process_event'",334],["T_WHITESPACE"," ",334],".",["T_WHITESPACE"," ",334],["T_VARIABLE","$this",334],["T_OBJECT_OPERATOR","->",334],["T_STRING","_getEventTypeName",334],"(",["T_VARIABLE","$entityType",334],",",["T_WHITESPACE"," ",334],["T_VARIABLE","$eventType",334],")",")",";",["T_WHITESPACE","\n        ",334],"}",["T_WHITESPACE","\n        ",335],["T_RETURN","return",336],["T_WHITESPACE"," ",336],["T_VARIABLE","$this",336],";",["T_WHITESPACE","\n    ",336],"}",["T_WHITESPACE","\n\n    ",337],["T_DOC_COMMENT","\/**\n     * Run all processes method with parameters\n     * Run by depends priority\n     * Not recursive call is not implement\n     *\n     * @param string $method\n     * @param array $args\n     * @return Mage_Index_Model_Indexer\n     *\/",339],["T_WHITESPACE","\n    ",347],["T_PROTECTED","protected",348],["T_WHITESPACE"," ",348],["T_FUNCTION","function",348],["T_WHITESPACE"," ",348],["T_STRING","_runAll",348],"(",["T_VARIABLE","$method",348],",",["T_WHITESPACE"," ",348],["T_VARIABLE","$args",348],")",["T_WHITESPACE","\n    ",348],"{",["T_WHITESPACE","\n        ",349],["T_VARIABLE","$checkLocks",350],["T_WHITESPACE"," ",350],"=",["T_WHITESPACE"," ",350],["T_VARIABLE","$method",350],["T_WHITESPACE"," ",350],["T_IS_NOT_EQUAL","!=",350],["T_WHITESPACE"," ",350],["T_CONSTANT_ENCAPSED_STRING","'register'",350],";",["T_WHITESPACE","\n        ",350],["T_VARIABLE","$processed",351],["T_WHITESPACE"," ",351],"=",["T_WHITESPACE"," ",351],["T_ARRAY","array",351],"(",")",";",["T_WHITESPACE","\n        ",351],["T_FOREACH","foreach",352],["T_WHITESPACE"," ",352],"(",["T_VARIABLE","$this",352],["T_OBJECT_OPERATOR","->",352],["T_STRING","getProcessesCollection",352],"(",")",["T_WHITESPACE"," ",352],["T_AS","as",352],["T_WHITESPACE"," ",352],["T_VARIABLE","$process",352],")",["T_WHITESPACE"," ",352],"{",["T_WHITESPACE","\n            ",352],["T_VARIABLE","$code",353],["T_WHITESPACE"," ",353],"=",["T_WHITESPACE"," ",353],["T_VARIABLE","$process",353],["T_OBJECT_OPERATOR","->",353],["T_STRING","getIndexerCode",353],"(",")",";",["T_WHITESPACE","\n            ",353],["T_IF","if",354],["T_WHITESPACE"," ",354],"(",["T_STRING","in_array",354],"(",["T_VARIABLE","$code",354],",",["T_WHITESPACE"," ",354],["T_VARIABLE","$processed",354],")",")",["T_WHITESPACE"," ",354],"{",["T_WHITESPACE","\n                ",354],["T_CONTINUE","continue",355],";",["T_WHITESPACE","\n            ",355],"}",["T_WHITESPACE","\n            ",356],["T_VARIABLE","$hasLocks",357],["T_WHITESPACE"," ",357],"=",["T_WHITESPACE"," ",357],["T_STRING","false",357],";",["T_WHITESPACE","\n\n            ",357],["T_IF","if",359],["T_WHITESPACE"," ",359],"(",["T_VARIABLE","$process",359],["T_OBJECT_OPERATOR","->",359],["T_STRING","getDepends",359],"(",")",")",["T_WHITESPACE"," ",359],"{",["T_WHITESPACE","\n                ",359],["T_FOREACH","foreach",360],["T_WHITESPACE"," ",360],"(",["T_VARIABLE","$process",360],["T_OBJECT_OPERATOR","->",360],["T_STRING","getDepends",360],"(",")",["T_WHITESPACE"," ",360],["T_AS","as",360],["T_WHITESPACE"," ",360],["T_VARIABLE","$processCode",360],")",["T_WHITESPACE"," ",360],"{",["T_WHITESPACE","\n                    ",360],["T_VARIABLE","$dependProcess",361],["T_WHITESPACE"," ",361],"=",["T_WHITESPACE"," ",361],["T_VARIABLE","$this",361],["T_OBJECT_OPERATOR","->",361],["T_STRING","getProcessByCode",361],"(",["T_VARIABLE","$processCode",361],")",";",["T_WHITESPACE","\n                    ",361],["T_IF","if",362],["T_WHITESPACE"," ",362],"(",["T_VARIABLE","$dependProcess",362],["T_WHITESPACE"," ",362],["T_BOOLEAN_AND","&&",362],["T_WHITESPACE"," ",362],"!",["T_STRING","in_array",362],"(",["T_VARIABLE","$processCode",362],",",["T_WHITESPACE"," ",362],["T_VARIABLE","$processed",362],")",")",["T_WHITESPACE"," ",362],"{",["T_WHITESPACE","\n                        ",362],["T_IF","if",363],["T_WHITESPACE"," ",363],"(",["T_VARIABLE","$checkLocks",363],["T_WHITESPACE"," ",363],["T_BOOLEAN_AND","&&",363],["T_WHITESPACE"," ",363],["T_VARIABLE","$dependProcess",363],["T_OBJECT_OPERATOR","->",363],["T_STRING","isLocked",363],"(",")",")",["T_WHITESPACE"," ",363],"{",["T_WHITESPACE","\n                            ",363],["T_VARIABLE","$hasLocks",364],["T_WHITESPACE"," ",364],"=",["T_WHITESPACE"," ",364],["T_STRING","true",364],";",["T_WHITESPACE","\n                        ",364],"}",["T_WHITESPACE"," ",365],["T_ELSE","else",365],["T_WHITESPACE"," ",365],"{",["T_WHITESPACE","\n                            ",365],["T_STRING","call_user_func_array",366],"(",["T_ARRAY","array",366],"(",["T_VARIABLE","$dependProcess",366],",",["T_WHITESPACE"," ",366],["T_VARIABLE","$method",366],")",",",["T_WHITESPACE"," ",366],["T_VARIABLE","$args",366],")",";",["T_WHITESPACE","\n                            ",366],["T_IF","if",367],["T_WHITESPACE"," ",367],"(",["T_VARIABLE","$checkLocks",367],["T_WHITESPACE"," ",367],["T_BOOLEAN_AND","&&",367],["T_WHITESPACE"," ",367],["T_VARIABLE","$dependProcess",367],["T_OBJECT_OPERATOR","->",367],["T_STRING","getMode",367],"(",")",["T_WHITESPACE"," ",367],["T_IS_EQUAL","==",367],["T_WHITESPACE"," ",367],["T_STRING","Mage_Index_Model_Process",367],["T_DOUBLE_COLON","::",367],["T_STRING","MODE_MANUAL",367],")",["T_WHITESPACE"," ",367],"{",["T_WHITESPACE","\n                                ",367],["T_VARIABLE","$hasLocks",368],["T_WHITESPACE"," ",368],"=",["T_WHITESPACE"," ",368],["T_STRING","true",368],";",["T_WHITESPACE","\n                            ",368],"}",["T_WHITESPACE"," ",369],["T_ELSE","else",369],["T_WHITESPACE"," ",369],"{",["T_WHITESPACE","\n                                ",369],["T_VARIABLE","$processed",370],"[","]",["T_WHITESPACE"," ",370],"=",["T_WHITESPACE"," ",370],["T_VARIABLE","$processCode",370],";",["T_WHITESPACE","\n                            ",370],"}",["T_WHITESPACE","\n                        ",371],"}",["T_WHITESPACE","\n                    ",372],"}",["T_WHITESPACE","\n                ",373],"}",["T_WHITESPACE","\n            ",374],"}",["T_WHITESPACE","\n\n            ",375],["T_IF","if",377],["T_WHITESPACE"," ",377],"(","!",["T_VARIABLE","$hasLocks",377],")",["T_WHITESPACE"," ",377],"{",["T_WHITESPACE","\n                ",377],["T_STRING","call_user_func_array",378],"(",["T_ARRAY","array",378],"(",["T_VARIABLE","$process",378],",",["T_WHITESPACE"," ",378],["T_VARIABLE","$method",378],")",",",["T_WHITESPACE"," ",378],["T_VARIABLE","$args",378],")",";",["T_WHITESPACE","\n                ",378],["T_VARIABLE","$processed",379],"[","]",["T_WHITESPACE"," ",379],"=",["T_WHITESPACE"," ",379],["T_VARIABLE","$code",379],";",["T_WHITESPACE","\n            ",379],"}",["T_WHITESPACE","\n        ",380],"}",["T_WHITESPACE","\n    ",381],"}",["T_WHITESPACE","\n\n    ",382],["T_DOC_COMMENT","\/**\n     * Enable\/Disable keys in index tables\n     *\n     * @param bool $enable\n     * @return Mage_Index_Model_Indexer\n     *\/",384],["T_WHITESPACE","\n    ",389],["T_PROTECTED","protected",390],["T_WHITESPACE"," ",390],["T_FUNCTION","function",390],["T_WHITESPACE"," ",390],["T_STRING","_changeKeyStatus",390],"(",["T_VARIABLE","$enable",390],["T_WHITESPACE"," ",390],"=",["T_WHITESPACE"," ",390],["T_STRING","true",390],")",["T_WHITESPACE","\n    ",390],"{",["T_WHITESPACE","\n        ",391],["T_VARIABLE","$processed",392],["T_WHITESPACE"," ",392],"=",["T_WHITESPACE"," ",392],["T_ARRAY","array",392],"(",")",";",["T_WHITESPACE","\n        ",392],["T_FOREACH","foreach",393],["T_WHITESPACE"," ",393],"(",["T_VARIABLE","$this",393],["T_OBJECT_OPERATOR","->",393],["T_STRING","getProcessesCollection",393],"(",")",["T_WHITESPACE"," ",393],["T_AS","as",393],["T_WHITESPACE"," ",393],["T_VARIABLE","$process",393],")",["T_WHITESPACE"," ",393],"{",["T_WHITESPACE","\n            ",393],["T_VARIABLE","$code",394],["T_WHITESPACE"," ",394],"=",["T_WHITESPACE"," ",394],["T_VARIABLE","$process",394],["T_OBJECT_OPERATOR","->",394],["T_STRING","getIndexerCode",394],"(",")",";",["T_WHITESPACE","\n            ",394],["T_IF","if",395],["T_WHITESPACE"," ",395],"(",["T_STRING","in_array",395],"(",["T_VARIABLE","$code",395],",",["T_WHITESPACE"," ",395],["T_VARIABLE","$processed",395],")",")",["T_WHITESPACE"," ",395],"{",["T_WHITESPACE","\n                ",395],["T_CONTINUE","continue",396],";",["T_WHITESPACE","\n            ",396],"}",["T_WHITESPACE","\n\n            ",397],["T_IF","if",399],["T_WHITESPACE"," ",399],"(",["T_VARIABLE","$process",399],["T_OBJECT_OPERATOR","->",399],["T_STRING","getDepends",399],"(",")",")",["T_WHITESPACE"," ",399],"{",["T_WHITESPACE","\n                ",399],["T_FOREACH","foreach",400],["T_WHITESPACE"," ",400],"(",["T_VARIABLE","$process",400],["T_OBJECT_OPERATOR","->",400],["T_STRING","getDepends",400],"(",")",["T_WHITESPACE"," ",400],["T_AS","as",400],["T_WHITESPACE"," ",400],["T_VARIABLE","$processCode",400],")",["T_WHITESPACE"," ",400],"{",["T_WHITESPACE","\n                    ",400],["T_VARIABLE","$dependProcess",401],["T_WHITESPACE"," ",401],"=",["T_WHITESPACE"," ",401],["T_VARIABLE","$this",401],["T_OBJECT_OPERATOR","->",401],["T_STRING","getProcessByCode",401],"(",["T_VARIABLE","$processCode",401],")",";",["T_WHITESPACE","\n                    ",401],["T_IF","if",402],["T_WHITESPACE"," ",402],"(",["T_VARIABLE","$dependProcess",402],["T_WHITESPACE"," ",402],["T_BOOLEAN_AND","&&",402],["T_WHITESPACE"," ",402],"!",["T_STRING","in_array",402],"(",["T_VARIABLE","$processCode",402],",",["T_WHITESPACE"," ",402],["T_VARIABLE","$processed",402],")",")",["T_WHITESPACE"," ",402],"{",["T_WHITESPACE","\n                        ",402],["T_IF","if",403],["T_WHITESPACE"," ",403],"(",["T_VARIABLE","$this",403],["T_OBJECT_OPERATOR","->",403],["T_STRING","_changeProcessKeyStatus",403],"(",["T_VARIABLE","$dependProcess",403],",",["T_WHITESPACE"," ",403],["T_VARIABLE","$enable",403],")",")",["T_WHITESPACE"," ",403],"{",["T_WHITESPACE","\n                            ",403],["T_VARIABLE","$processed",404],"[","]",["T_WHITESPACE"," ",404],"=",["T_WHITESPACE"," ",404],["T_VARIABLE","$processCode",404],";",["T_WHITESPACE","\n                        ",404],"}",["T_WHITESPACE","\n                    ",405],"}",["T_WHITESPACE","\n                ",406],"}",["T_WHITESPACE","\n            ",407],"}",["T_WHITESPACE","\n\n            ",408],["T_IF","if",410],["T_WHITESPACE"," ",410],"(",["T_VARIABLE","$this",410],["T_OBJECT_OPERATOR","->",410],["T_STRING","_changeProcessKeyStatus",410],"(",["T_VARIABLE","$process",410],",",["T_WHITESPACE"," ",410],["T_VARIABLE","$enable",410],")",")",["T_WHITESPACE"," ",410],"{",["T_WHITESPACE","\n                ",410],["T_VARIABLE","$processed",411],"[","]",["T_WHITESPACE"," ",411],"=",["T_WHITESPACE"," ",411],["T_VARIABLE","$code",411],";",["T_WHITESPACE","\n            ",411],"}",["T_WHITESPACE","\n        ",412],"}",["T_WHITESPACE","\n\n        ",413],["T_RETURN","return",415],["T_WHITESPACE"," ",415],["T_VARIABLE","$this",415],";",["T_WHITESPACE","\n    ",415],"}",["T_WHITESPACE","\n\n    ",416],["T_DOC_COMMENT","\/**\n     * Check if the event will be processed and disable\/enable keys in index tables\n     *\n     * @param mixed|Mage_Index_Model_Process $process\n     * @param bool $enable\n     * @return bool\n     *\/",418],["T_WHITESPACE","\n    ",424],["T_PROTECTED","protected",425],["T_WHITESPACE"," ",425],["T_FUNCTION","function",425],["T_WHITESPACE"," ",425],["T_STRING","_changeProcessKeyStatus",425],"(",["T_VARIABLE","$process",425],",",["T_WHITESPACE"," ",425],["T_VARIABLE","$enable",425],["T_WHITESPACE"," ",425],"=",["T_WHITESPACE"," ",425],["T_STRING","true",425],")",["T_WHITESPACE","\n    ",425],"{",["T_WHITESPACE","\n        ",426],["T_VARIABLE","$event",427],["T_WHITESPACE"," ",427],"=",["T_WHITESPACE"," ",427],["T_VARIABLE","$this",427],["T_OBJECT_OPERATOR","->",427],["T_STRING","_currentEvent",427],";",["T_WHITESPACE","\n        ",427],["T_IF","if",428],["T_WHITESPACE"," ",428],"(",["T_VARIABLE","$process",428],["T_WHITESPACE"," ",428],["T_INSTANCEOF","instanceof",428],["T_WHITESPACE"," ",428],["T_STRING","Mage_Index_Model_Process",428],["T_WHITESPACE","\n            ",428],["T_BOOLEAN_AND","&&",429],["T_WHITESPACE"," ",429],["T_VARIABLE","$process",429],["T_OBJECT_OPERATOR","->",429],["T_STRING","getMode",429],"(",")",["T_WHITESPACE"," ",429],["T_IS_NOT_IDENTICAL","!==",429],["T_WHITESPACE"," ",429],["T_STRING","Mage_Index_Model_Process",429],["T_DOUBLE_COLON","::",429],["T_STRING","MODE_MANUAL",429],["T_WHITESPACE","\n            ",429],["T_BOOLEAN_AND","&&",430],["T_WHITESPACE"," ",430],"!",["T_VARIABLE","$process",430],["T_OBJECT_OPERATOR","->",430],["T_STRING","isLocked",430],"(",")",["T_WHITESPACE","\n            ",430],["T_BOOLEAN_AND","&&",431],["T_WHITESPACE"," ",431],"(",["T_STRING","is_null",431],"(",["T_VARIABLE","$event",431],")",["T_WHITESPACE","\n                ",431],["T_BOOLEAN_OR","||",432],["T_WHITESPACE"," ",432],"(",["T_VARIABLE","$event",432],["T_WHITESPACE"," ",432],["T_INSTANCEOF","instanceof",432],["T_WHITESPACE"," ",432],["T_STRING","Mage_Index_Model_Event",432],["T_WHITESPACE"," ",432],["T_BOOLEAN_AND","&&",432],["T_WHITESPACE"," ",432],["T_VARIABLE","$process",432],["T_OBJECT_OPERATOR","->",432],["T_STRING","matchEvent",432],"(",["T_VARIABLE","$event",432],")",")",["T_WHITESPACE","\n                ",432],["T_BOOLEAN_OR","||",433],["T_WHITESPACE"," ",433],"(",["T_STRING","is_array",433],"(",["T_VARIABLE","$event",433],")",["T_WHITESPACE"," ",433],["T_BOOLEAN_AND","&&",433],["T_WHITESPACE"," ",433],["T_VARIABLE","$process",433],["T_OBJECT_OPERATOR","->",433],["T_STRING","matchEntityAndType",433],"(",["T_VARIABLE","$event",433],"[",["T_LNUMBER","0",433],"]",",",["T_WHITESPACE"," ",433],["T_VARIABLE","$event",433],"[",["T_LNUMBER","1",433],"]",")",")",["T_WHITESPACE","\n        ",433],")",")",["T_WHITESPACE"," ",434],"{",["T_WHITESPACE","\n            ",434],["T_IF","if",435],["T_WHITESPACE"," ",435],"(",["T_VARIABLE","$enable",435],")",["T_WHITESPACE"," ",435],"{",["T_WHITESPACE","\n                ",435],["T_VARIABLE","$process",436],["T_OBJECT_OPERATOR","->",436],["T_STRING","enableIndexerKeys",436],"(",")",";",["T_WHITESPACE","\n            ",436],"}",["T_WHITESPACE"," ",437],["T_ELSE","else",437],["T_WHITESPACE"," ",437],"{",["T_WHITESPACE","\n                ",437],["T_VARIABLE","$process",438],["T_OBJECT_OPERATOR","->",438],["T_STRING","disableIndexerKeys",438],"(",")",";",["T_WHITESPACE","\n            ",438],"}",["T_WHITESPACE","\n            ",439],["T_RETURN","return",440],["T_WHITESPACE"," ",440],["T_STRING","true",440],";",["T_WHITESPACE","\n        ",440],"}",["T_WHITESPACE","\n        ",441],["T_RETURN","return",442],["T_WHITESPACE"," ",442],["T_STRING","false",442],";",["T_WHITESPACE","\n    ",442],"}",["T_WHITESPACE","\n\n    ",443],["T_DOC_COMMENT","\/**\n     * Allow DDL operations while indexing\n     *\n     * @return Mage_Index_Model_Indexer\n     *\/",445],["T_WHITESPACE","\n    ",449],["T_PUBLIC","public",450],["T_WHITESPACE"," ",450],["T_FUNCTION","function",450],["T_WHITESPACE"," ",450],["T_STRING","allowTableChanges",450],"(",")",["T_WHITESPACE","\n    ",450],"{",["T_WHITESPACE","\n        ",451],["T_VARIABLE","$this",452],["T_OBJECT_OPERATOR","->",452],["T_STRING","_allowTableChanges",452],["T_WHITESPACE"," ",452],"=",["T_WHITESPACE"," ",452],["T_STRING","true",452],";",["T_WHITESPACE","\n        ",452],["T_RETURN","return",453],["T_WHITESPACE"," ",453],["T_VARIABLE","$this",453],";",["T_WHITESPACE","\n    ",453],"}",["T_WHITESPACE","\n\n    ",454],["T_DOC_COMMENT","\/**\n     * Disallow DDL operations while indexing\n     *\n     * @return Mage_Index_Model_Indexer\n     *\/",456],["T_WHITESPACE","\n    ",460],["T_PUBLIC","public",461],["T_WHITESPACE"," ",461],["T_FUNCTION","function",461],["T_WHITESPACE"," ",461],["T_STRING","disallowTableChanges",461],"(",")",["T_WHITESPACE","\n    ",461],"{",["T_WHITESPACE","\n        ",462],["T_VARIABLE","$this",463],["T_OBJECT_OPERATOR","->",463],["T_STRING","_allowTableChanges",463],["T_WHITESPACE"," ",463],"=",["T_WHITESPACE"," ",463],["T_STRING","false",463],";",["T_WHITESPACE","\n        ",463],["T_RETURN","return",464],["T_WHITESPACE"," ",464],["T_VARIABLE","$this",464],";",["T_WHITESPACE","\n    ",464],"}",["T_WHITESPACE","\n\n    ",465],["T_DOC_COMMENT","\/**\n     * Get event type name\n     *\n     * @param null|string $entityType\n     * @param null|string $eventType\n     * @return string\n     *\/",467],["T_WHITESPACE","\n    ",473],["T_PROTECTED","protected",474],["T_WHITESPACE"," ",474],["T_FUNCTION","function",474],["T_WHITESPACE"," ",474],["T_STRING","_getEventTypeName",474],"(",["T_VARIABLE","$entityType",474],["T_WHITESPACE"," ",474],"=",["T_WHITESPACE"," ",474],["T_STRING","null",474],",",["T_WHITESPACE"," ",474],["T_VARIABLE","$eventType",474],["T_WHITESPACE"," ",474],"=",["T_WHITESPACE"," ",474],["T_STRING","null",474],")",["T_WHITESPACE","\n    ",474],"{",["T_WHITESPACE","\n        ",475],["T_VARIABLE","$eventName",476],["T_WHITESPACE"," ",476],"=",["T_WHITESPACE"," ",476],["T_VARIABLE","$entityType",476],["T_WHITESPACE"," ",476],".",["T_WHITESPACE"," ",476],["T_CONSTANT_ENCAPSED_STRING","'_'",476],["T_WHITESPACE"," ",476],".",["T_WHITESPACE"," ",476],["T_VARIABLE","$eventType",476],";",["T_WHITESPACE","\n        ",476],["T_VARIABLE","$eventName",477],["T_WHITESPACE"," ",477],"=",["T_WHITESPACE"," ",477],["T_STRING","trim",477],"(",["T_VARIABLE","$eventName",477],",",["T_WHITESPACE"," ",477],["T_CONSTANT_ENCAPSED_STRING","'_'",477],")",";",["T_WHITESPACE","\n        ",477],["T_IF","if",478],["T_WHITESPACE"," ",478],"(","!",["T_EMPTY","empty",478],"(",["T_VARIABLE","$eventName",478],")",")",["T_WHITESPACE"," ",478],"{",["T_WHITESPACE","\n            ",478],["T_VARIABLE","$eventName",479],["T_WHITESPACE"," ",479],"=",["T_WHITESPACE"," ",479],["T_CONSTANT_ENCAPSED_STRING","'_'",479],["T_WHITESPACE"," ",479],".",["T_WHITESPACE"," ",479],["T_VARIABLE","$eventName",479],";",["T_WHITESPACE","\n        ",479],"}",["T_WHITESPACE","\n        ",480],["T_RETURN","return",481],["T_WHITESPACE"," ",481],["T_VARIABLE","$eventName",481],";",["T_WHITESPACE","\n    ",481],"}",["T_WHITESPACE","\n",482],"}",["T_WHITESPACE","\n",483]]
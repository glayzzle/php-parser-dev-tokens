[["T_OPEN_TAG","<?php\n",1],["T_DOC_COMMENT","\/**\n * Magento\n *\n * NOTICE OF LICENSE\n *\n * This source file is subject to the Open Software License (OSL 3.0)\n * that is bundled with this package in the file LICENSE.txt.\n * It is also available through the world-wide-web at this URL:\n * http:\/\/opensource.org\/licenses\/osl-3.0.php\n * If you did not receive a copy of the license and are unable to\n * obtain it through the world-wide-web, please send an email\n * to license@magento.com so we can send you a copy immediately.\n *\n * DISCLAIMER\n *\n * Do not edit or add to this file if you wish to upgrade Magento to newer\n * versions in the future. If you wish to customize Magento for your\n * needs please refer to http:\/\/www.magento.com for more information.\n *\n * @category    Mage\n * @package     Mage_CatalogRule\n * @copyright  Copyright (c) 2006-2016 X.commerce, Inc. and affiliates (http:\/\/www.magento.com)\n * @license    http:\/\/opensource.org\/licenses\/osl-3.0.php  Open Software License (OSL 3.0)\n *\/",2],["T_WHITESPACE","\n\n\n",25],["T_DOC_COMMENT","\/**\n * Catalog Rule Product Condition data model\n *\/",28],["T_WHITESPACE","\n",30],["T_CLASS","class",31],["T_WHITESPACE"," ",31],["T_STRING","Mage_CatalogRule_Model_Rule_Condition_Product",31],["T_WHITESPACE"," ",31],["T_EXTENDS","extends",31],["T_WHITESPACE"," ",31],["T_STRING","Mage_Rule_Model_Condition_Product_Abstract",31],["T_WHITESPACE","\n",31],"{",["T_WHITESPACE","\n    ",32],["T_DOC_COMMENT","\/**\n     * Validate product attribute value for condition\n     *\n     * @param Varien_Object $object\n     * @return bool\n     *\/",33],["T_WHITESPACE","\n    ",38],["T_PUBLIC","public",39],["T_WHITESPACE"," ",39],["T_FUNCTION","function",39],["T_WHITESPACE"," ",39],["T_STRING","validate",39],"(",["T_STRING","Varien_Object",39],["T_WHITESPACE"," ",39],["T_VARIABLE","$object",39],")",["T_WHITESPACE","\n    ",39],"{",["T_WHITESPACE","\n        ",40],["T_VARIABLE","$attrCode",41],["T_WHITESPACE"," ",41],"=",["T_WHITESPACE"," ",41],["T_VARIABLE","$this",41],["T_OBJECT_OPERATOR","->",41],["T_STRING","getAttribute",41],"(",")",";",["T_WHITESPACE","\n        ",41],["T_IF","if",42],["T_WHITESPACE"," ",42],"(",["T_CONSTANT_ENCAPSED_STRING","'category_ids'",42],["T_WHITESPACE"," ",42],["T_IS_EQUAL","==",42],["T_WHITESPACE"," ",42],["T_VARIABLE","$attrCode",42],")",["T_WHITESPACE"," ",42],"{",["T_WHITESPACE","\n            ",42],["T_RETURN","return",43],["T_WHITESPACE"," ",43],["T_VARIABLE","$this",43],["T_OBJECT_OPERATOR","->",43],["T_STRING","validateAttribute",43],"(",["T_VARIABLE","$object",43],["T_OBJECT_OPERATOR","->",43],["T_STRING","getCategoryIds",43],"(",")",")",";",["T_WHITESPACE","\n        ",43],"}",["T_WHITESPACE","\n        ",44],["T_IF","if",45],["T_WHITESPACE"," ",45],"(",["T_CONSTANT_ENCAPSED_STRING","'attribute_set_id'",45],["T_WHITESPACE"," ",45],["T_IS_EQUAL","==",45],["T_WHITESPACE"," ",45],["T_VARIABLE","$attrCode",45],")",["T_WHITESPACE"," ",45],"{",["T_WHITESPACE","\n            ",45],["T_RETURN","return",46],["T_WHITESPACE"," ",46],["T_VARIABLE","$this",46],["T_OBJECT_OPERATOR","->",46],["T_STRING","validateAttribute",46],"(",["T_VARIABLE","$object",46],["T_OBJECT_OPERATOR","->",46],["T_STRING","getData",46],"(",["T_VARIABLE","$attrCode",46],")",")",";",["T_WHITESPACE","\n        ",46],"}",["T_WHITESPACE","\n\n        ",47],["T_VARIABLE","$oldAttrValue",49],["T_WHITESPACE"," ",49],"=",["T_WHITESPACE"," ",49],["T_VARIABLE","$object",49],["T_OBJECT_OPERATOR","->",49],["T_STRING","hasData",49],"(",["T_VARIABLE","$attrCode",49],")",["T_WHITESPACE"," ",49],"?",["T_WHITESPACE"," ",49],["T_VARIABLE","$object",49],["T_OBJECT_OPERATOR","->",49],["T_STRING","getData",49],"(",["T_VARIABLE","$attrCode",49],")",["T_WHITESPACE"," ",49],":",["T_WHITESPACE"," ",49],["T_STRING","null",49],";",["T_WHITESPACE","\n        ",49],["T_VARIABLE","$object",50],["T_OBJECT_OPERATOR","->",50],["T_STRING","setData",50],"(",["T_VARIABLE","$attrCode",50],",",["T_WHITESPACE"," ",50],["T_VARIABLE","$this",50],["T_OBJECT_OPERATOR","->",50],["T_STRING","_getAttributeValue",50],"(",["T_VARIABLE","$object",50],")",")",";",["T_WHITESPACE","\n        ",50],["T_VARIABLE","$result",51],["T_WHITESPACE"," ",51],"=",["T_WHITESPACE"," ",51],["T_VARIABLE","$this",51],["T_OBJECT_OPERATOR","->",51],["T_STRING","_validateProduct",51],"(",["T_VARIABLE","$object",51],")",";",["T_WHITESPACE","\n        ",51],["T_VARIABLE","$this",52],["T_OBJECT_OPERATOR","->",52],["T_STRING","_restoreOldAttrValue",52],"(",["T_VARIABLE","$object",52],",",["T_WHITESPACE"," ",52],["T_VARIABLE","$oldAttrValue",52],")",";",["T_WHITESPACE","\n\n        ",52],["T_RETURN","return",54],["T_WHITESPACE"," ",54],["T_BOOL_CAST","(bool)",54],["T_VARIABLE","$result",54],";",["T_WHITESPACE","\n    ",54],"}",["T_WHITESPACE","\n\n    ",55],["T_DOC_COMMENT","\/**\n     * Validate product\n     *\n     * @param Varien_Object $object\n     * @return bool\n     *\/",57],["T_WHITESPACE","\n    ",62],["T_PROTECTED","protected",63],["T_WHITESPACE"," ",63],["T_FUNCTION","function",63],["T_WHITESPACE"," ",63],["T_STRING","_validateProduct",63],"(",["T_VARIABLE","$object",63],")",["T_WHITESPACE","\n    ",63],"{",["T_WHITESPACE","\n        ",64],["T_RETURN","return",65],["T_WHITESPACE"," ",65],["T_STRING","Mage_Rule_Model_Condition_Abstract",65],["T_DOUBLE_COLON","::",65],["T_STRING","validate",65],"(",["T_VARIABLE","$object",65],")",";",["T_WHITESPACE","\n    ",65],"}",["T_WHITESPACE","\n\n    ",66],["T_DOC_COMMENT","\/**\n     * Restore old attribute value\n     *\n     * @param Varien_Object $object\n     * @param mixed $oldAttrValue\n     *\/",68],["T_WHITESPACE","\n    ",73],["T_PROTECTED","protected",74],["T_WHITESPACE"," ",74],["T_FUNCTION","function",74],["T_WHITESPACE"," ",74],["T_STRING","_restoreOldAttrValue",74],"(",["T_VARIABLE","$object",74],",",["T_WHITESPACE"," ",74],["T_VARIABLE","$oldAttrValue",74],")",["T_WHITESPACE","\n    ",74],"{",["T_WHITESPACE","\n        ",75],["T_VARIABLE","$attrCode",76],["T_WHITESPACE"," ",76],"=",["T_WHITESPACE"," ",76],["T_VARIABLE","$this",76],["T_OBJECT_OPERATOR","->",76],["T_STRING","getAttribute",76],"(",")",";",["T_WHITESPACE","\n        ",76],["T_IF","if",77],["T_WHITESPACE"," ",77],"(",["T_STRING","is_null",77],"(",["T_VARIABLE","$oldAttrValue",77],")",")",["T_WHITESPACE"," ",77],"{",["T_WHITESPACE","\n            ",77],["T_VARIABLE","$object",78],["T_OBJECT_OPERATOR","->",78],["T_STRING","unsetData",78],"(",["T_VARIABLE","$attrCode",78],")",";",["T_WHITESPACE","\n        ",78],"}",["T_WHITESPACE"," ",79],["T_ELSE","else",79],["T_WHITESPACE"," ",79],"{",["T_WHITESPACE","\n            ",79],["T_VARIABLE","$object",80],["T_OBJECT_OPERATOR","->",80],["T_STRING","setData",80],"(",["T_VARIABLE","$attrCode",80],",",["T_WHITESPACE"," ",80],["T_VARIABLE","$oldAttrValue",80],")",";",["T_WHITESPACE","\n        ",80],"}",["T_WHITESPACE","\n    ",81],"}",["T_WHITESPACE","\n\n    ",82],["T_DOC_COMMENT","\/**\n     * Get attribute value\n     *\n     * @param Varien_Object $object\n     * @return mixed\n     *\/",84],["T_WHITESPACE","\n    ",89],["T_PROTECTED","protected",90],["T_WHITESPACE"," ",90],["T_FUNCTION","function",90],["T_WHITESPACE"," ",90],["T_STRING","_getAttributeValue",90],"(",["T_VARIABLE","$object",90],")",["T_WHITESPACE","\n    ",90],"{",["T_WHITESPACE","\n        ",91],["T_VARIABLE","$attrCode",92],["T_WHITESPACE"," ",92],"=",["T_WHITESPACE"," ",92],["T_VARIABLE","$this",92],["T_OBJECT_OPERATOR","->",92],["T_STRING","getAttribute",92],"(",")",";",["T_WHITESPACE","\n        ",92],["T_VARIABLE","$storeId",93],["T_WHITESPACE"," ",93],"=",["T_WHITESPACE"," ",93],["T_VARIABLE","$object",93],["T_OBJECT_OPERATOR","->",93],["T_STRING","getStoreId",93],"(",")",";",["T_WHITESPACE","\n        ",93],["T_VARIABLE","$defaultStoreId",94],["T_WHITESPACE"," ",94],"=",["T_WHITESPACE"," ",94],["T_STRING","Mage_Core_Model_App",94],["T_DOUBLE_COLON","::",94],["T_STRING","ADMIN_STORE_ID",94],";",["T_WHITESPACE","\n        ",94],["T_VARIABLE","$productValues",95],["T_WHITESPACE","  ",95],"=",["T_WHITESPACE"," ",95],["T_ISSET","isset",95],"(",["T_VARIABLE","$this",95],["T_OBJECT_OPERATOR","->",95],["T_STRING","_entityAttributeValues",95],"[",["T_VARIABLE","$object",95],["T_OBJECT_OPERATOR","->",95],["T_STRING","getId",95],"(",")","]",")",["T_WHITESPACE","\n            ",95],"?",["T_WHITESPACE"," ",96],["T_VARIABLE","$this",96],["T_OBJECT_OPERATOR","->",96],["T_STRING","_entityAttributeValues",96],"[",["T_VARIABLE","$object",96],["T_OBJECT_OPERATOR","->",96],["T_STRING","getId",96],"(",")","]",["T_WHITESPACE"," ",96],":",["T_WHITESPACE"," ",96],["T_ARRAY","array",96],"(",")",";",["T_WHITESPACE","\n        ",96],["T_VARIABLE","$defaultValue",97],["T_WHITESPACE"," ",97],"=",["T_WHITESPACE"," ",97],["T_ISSET","isset",97],"(",["T_VARIABLE","$productValues",97],"[",["T_VARIABLE","$defaultStoreId",97],"]",")",["T_WHITESPACE","\n            ",97],"?",["T_WHITESPACE"," ",98],["T_VARIABLE","$productValues",98],"[",["T_VARIABLE","$defaultStoreId",98],"]",["T_WHITESPACE"," ",98],":",["T_WHITESPACE"," ",98],["T_VARIABLE","$object",98],["T_OBJECT_OPERATOR","->",98],["T_STRING","getData",98],"(",["T_VARIABLE","$attrCode",98],")",";",["T_WHITESPACE","\n        ",98],["T_VARIABLE","$value",99],["T_WHITESPACE"," ",99],"=",["T_WHITESPACE"," ",99],["T_ISSET","isset",99],"(",["T_VARIABLE","$productValues",99],"[",["T_VARIABLE","$storeId",99],"]",")",["T_WHITESPACE"," ",99],"?",["T_WHITESPACE"," ",99],["T_VARIABLE","$productValues",99],"[",["T_VARIABLE","$storeId",99],"]",["T_WHITESPACE"," ",99],":",["T_WHITESPACE"," ",99],["T_VARIABLE","$defaultValue",99],";",["T_WHITESPACE","\n\n        ",99],["T_VARIABLE","$value",101],["T_WHITESPACE"," ",101],"=",["T_WHITESPACE"," ",101],["T_VARIABLE","$this",101],["T_OBJECT_OPERATOR","->",101],["T_STRING","_prepareDatetimeValue",101],"(",["T_VARIABLE","$value",101],",",["T_WHITESPACE"," ",101],["T_VARIABLE","$object",101],")",";",["T_WHITESPACE","\n        ",101],["T_VARIABLE","$value",102],["T_WHITESPACE"," ",102],"=",["T_WHITESPACE"," ",102],["T_VARIABLE","$this",102],["T_OBJECT_OPERATOR","->",102],["T_STRING","_prepareMultiselectValue",102],"(",["T_VARIABLE","$value",102],",",["T_WHITESPACE"," ",102],["T_VARIABLE","$object",102],")",";",["T_WHITESPACE","\n\n        ",102],["T_RETURN","return",104],["T_WHITESPACE"," ",104],["T_VARIABLE","$value",104],";",["T_WHITESPACE","\n    ",104],"}",["T_WHITESPACE","\n\n    ",105],["T_DOC_COMMENT","\/**\n     * Prepare datetime attribute value\n     *\n     * @param mixed $value\n     * @param Varien_Object $object\n     * @return mixed\n     *\/",107],["T_WHITESPACE","\n    ",113],["T_PROTECTED","protected",114],["T_WHITESPACE"," ",114],["T_FUNCTION","function",114],["T_WHITESPACE"," ",114],["T_STRING","_prepareDatetimeValue",114],"(",["T_VARIABLE","$value",114],",",["T_WHITESPACE"," ",114],["T_VARIABLE","$object",114],")",["T_WHITESPACE","\n    ",114],"{",["T_WHITESPACE","\n        ",115],["T_VARIABLE","$attribute",116],["T_WHITESPACE"," ",116],"=",["T_WHITESPACE"," ",116],["T_VARIABLE","$object",116],["T_OBJECT_OPERATOR","->",116],["T_STRING","getResource",116],"(",")",["T_OBJECT_OPERATOR","->",116],["T_STRING","getAttribute",116],"(",["T_VARIABLE","$this",116],["T_OBJECT_OPERATOR","->",116],["T_STRING","getAttribute",116],"(",")",")",";",["T_WHITESPACE","\n        ",116],["T_IF","if",117],["T_WHITESPACE"," ",117],"(",["T_VARIABLE","$attribute",117],["T_WHITESPACE"," ",117],["T_BOOLEAN_AND","&&",117],["T_WHITESPACE"," ",117],["T_VARIABLE","$attribute",117],["T_OBJECT_OPERATOR","->",117],["T_STRING","getBackendType",117],"(",")",["T_WHITESPACE"," ",117],["T_IS_EQUAL","==",117],["T_WHITESPACE"," ",117],["T_CONSTANT_ENCAPSED_STRING","'datetime'",117],")",["T_WHITESPACE"," ",117],"{",["T_WHITESPACE","\n            ",117],["T_VARIABLE","$value",118],["T_WHITESPACE"," ",118],"=",["T_WHITESPACE"," ",118],["T_STRING","strtotime",118],"(",["T_VARIABLE","$value",118],")",";",["T_WHITESPACE","\n        ",118],"}",["T_WHITESPACE","\n        ",119],["T_RETURN","return",120],["T_WHITESPACE"," ",120],["T_VARIABLE","$value",120],";",["T_WHITESPACE","\n    ",120],"}",["T_WHITESPACE","\n\n    ",121],["T_DOC_COMMENT","\/**\n     * Prepare multiselect attribute value\n     *\n     * @param mixed $value\n     * @param Varien_Object $object\n     * @return mixed\n     *\/",123],["T_WHITESPACE","\n    ",129],["T_PROTECTED","protected",130],["T_WHITESPACE"," ",130],["T_FUNCTION","function",130],["T_WHITESPACE"," ",130],["T_STRING","_prepareMultiselectValue",130],"(",["T_VARIABLE","$value",130],",",["T_WHITESPACE"," ",130],["T_VARIABLE","$object",130],")",["T_WHITESPACE","\n    ",130],"{",["T_WHITESPACE","\n        ",131],["T_VARIABLE","$attribute",132],["T_WHITESPACE"," ",132],"=",["T_WHITESPACE"," ",132],["T_VARIABLE","$object",132],["T_OBJECT_OPERATOR","->",132],["T_STRING","getResource",132],"(",")",["T_OBJECT_OPERATOR","->",132],["T_STRING","getAttribute",132],"(",["T_VARIABLE","$this",132],["T_OBJECT_OPERATOR","->",132],["T_STRING","getAttribute",132],"(",")",")",";",["T_WHITESPACE","\n        ",132],["T_IF","if",133],["T_WHITESPACE"," ",133],"(",["T_VARIABLE","$attribute",133],["T_WHITESPACE"," ",133],["T_BOOLEAN_AND","&&",133],["T_WHITESPACE"," ",133],["T_VARIABLE","$attribute",133],["T_OBJECT_OPERATOR","->",133],["T_STRING","getFrontendInput",133],"(",")",["T_WHITESPACE"," ",133],["T_IS_EQUAL","==",133],["T_WHITESPACE"," ",133],["T_CONSTANT_ENCAPSED_STRING","'multiselect'",133],")",["T_WHITESPACE"," ",133],"{",["T_WHITESPACE","\n            ",133],["T_VARIABLE","$value",134],["T_WHITESPACE"," ",134],"=",["T_WHITESPACE"," ",134],["T_STRING","strlen",134],"(",["T_VARIABLE","$value",134],")",["T_WHITESPACE"," ",134],"?",["T_WHITESPACE"," ",134],["T_STRING","explode",134],"(",["T_CONSTANT_ENCAPSED_STRING","','",134],",",["T_WHITESPACE"," ",134],["T_VARIABLE","$value",134],")",["T_WHITESPACE"," ",134],":",["T_WHITESPACE"," ",134],["T_ARRAY","array",134],"(",")",";",["T_WHITESPACE","\n        ",134],"}",["T_WHITESPACE","\n        ",135],["T_RETURN","return",136],["T_WHITESPACE"," ",136],["T_VARIABLE","$value",136],";",["T_WHITESPACE","\n    ",136],"}",["T_WHITESPACE","\n",137],"}",["T_WHITESPACE","\n",138]]
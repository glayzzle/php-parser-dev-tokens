[["T_OPEN_TAG","<?php\n",1],["T_DOC_COMMENT","\/**\n * Magento\n *\n * NOTICE OF LICENSE\n *\n * This source file is subject to the Open Software License (OSL 3.0)\n * that is bundled with this package in the file LICENSE.txt.\n * It is also available through the world-wide-web at this URL:\n * http:\/\/opensource.org\/licenses\/osl-3.0.php\n * If you did not receive a copy of the license and are unable to\n * obtain it through the world-wide-web, please send an email\n * to license@magento.com so we can send you a copy immediately.\n *\n * DISCLAIMER\n *\n * Do not edit or add to this file if you wish to upgrade Magento to newer\n * versions in the future. If you wish to customize Magento for your\n * needs please refer to http:\/\/www.magento.com for more information.\n *\n * @category    Mage\n * @package     Mage_Tax\n * @copyright  Copyright (c) 2006-2016 X.commerce, Inc. and affiliates (http:\/\/www.magento.com)\n * @license    http:\/\/opensource.org\/licenses\/osl-3.0.php  Open Software License (OSL 3.0)\n *\/",2],["T_WHITESPACE","\n\n",25],["T_DOC_COMMENT","\/**\n * Tax Rate Model\n *\n * @method Mage_Tax_Model_Resource_Calculation_Rate _getResource()\n * @method Mage_Tax_Model_Resource_Calculation_Rate getResource()\n * @method string getTaxCountryId()\n * @method Mage_Tax_Model_Calculation_Rate setTaxCountryId(string $value)\n * @method int getTaxRegionId()\n * @method Mage_Tax_Model_Calculation_Rate setTaxRegionId(int $value)\n * @method string getTaxPostcode()\n * @method Mage_Tax_Model_Calculation_Rate setTaxPostcode(string $value)\n * @method string getCode()\n * @method Mage_Tax_Model_Calculation_Rate setCode(string $value)\n * @method float getRate()\n * @method Mage_Tax_Model_Calculation_Rate setRate(float $value)\n * @method int getZipIsRange()\n * @method Mage_Tax_Model_Calculation_Rate setZipIsRange(int $value)\n * @method int getZipFrom()\n * @method Mage_Tax_Model_Calculation_Rate setZipFrom(int $value)\n * @method int getZipTo()\n * @method Mage_Tax_Model_Calculation_Rate setZipTo(int $value)\n *\n * @category    Mage\n * @package     Mage_Tax\n * @author      Magento Core Team <core@magentocommerce.com>\n *\/",27],["T_WHITESPACE","\n",52],["T_CLASS","class",53],["T_WHITESPACE"," ",53],["T_STRING","Mage_Tax_Model_Calculation_Rate",53],["T_WHITESPACE"," ",53],["T_EXTENDS","extends",53],["T_WHITESPACE"," ",53],["T_STRING","Mage_Core_Model_Abstract",53],["T_WHITESPACE","\n",53],"{",["T_WHITESPACE","\n    ",54],["T_DOC_COMMENT","\/**\n     * List of tax titles\n     *\n     * @var array\n     *\/",55],["T_WHITESPACE","\n    ",59],["T_PROTECTED","protected",60],["T_WHITESPACE"," ",60],["T_VARIABLE","$_titles",60],["T_WHITESPACE"," ",60],"=",["T_WHITESPACE"," ",60],["T_STRING","null",60],";",["T_WHITESPACE","\n\n    ",60],["T_DOC_COMMENT","\/**\n     * The Mage_Tax_Model_Calculation_Rate_Title\n     *\n     * @var Mage_Tax_Model_Calculation_Rate_Title\n     *\/",62],["T_WHITESPACE","\n    ",66],["T_PROTECTED","protected",67],["T_WHITESPACE"," ",67],["T_VARIABLE","$_titleModel",67],["T_WHITESPACE"," ",67],"=",["T_WHITESPACE"," ",67],["T_STRING","null",67],";",["T_WHITESPACE","\n\n    ",67],["T_DOC_COMMENT","\/**\n     * Varien model constructor\n     *\/",69],["T_WHITESPACE","\n    ",71],["T_PROTECTED","protected",72],["T_WHITESPACE"," ",72],["T_FUNCTION","function",72],["T_WHITESPACE"," ",72],["T_STRING","_construct",72],"(",")",["T_WHITESPACE","\n    ",72],"{",["T_WHITESPACE","\n        ",73],["T_VARIABLE","$this",74],["T_OBJECT_OPERATOR","->",74],["T_STRING","_init",74],"(",["T_CONSTANT_ENCAPSED_STRING","'tax\/calculation_rate'",74],")",";",["T_WHITESPACE","\n    ",74],"}",["T_WHITESPACE","\n\n    ",75],["T_DOC_COMMENT","\/**\n     * Prepare location settings and tax postcode before save rate\n     *\n     * @return Mage_Tax_Model_Calculation_Rate\n     *\/",77],["T_WHITESPACE","\n    ",81],["T_PROTECTED","protected",82],["T_WHITESPACE"," ",82],["T_FUNCTION","function",82],["T_WHITESPACE"," ",82],["T_STRING","_beforeSave",82],"(",")",["T_WHITESPACE","\n    ",82],"{",["T_WHITESPACE","\n        ",83],["T_IF","if",84],["T_WHITESPACE"," ",84],"(",["T_VARIABLE","$this",84],["T_OBJECT_OPERATOR","->",84],["T_STRING","getCode",84],"(",")",["T_WHITESPACE"," ",84],["T_IS_IDENTICAL","===",84],["T_WHITESPACE"," ",84],["T_CONSTANT_ENCAPSED_STRING","''",84],["T_WHITESPACE"," ",84],["T_BOOLEAN_OR","||",84],["T_WHITESPACE"," ",84],["T_VARIABLE","$this",84],["T_OBJECT_OPERATOR","->",84],["T_STRING","getTaxCountryId",84],"(",")",["T_WHITESPACE"," ",84],["T_IS_IDENTICAL","===",84],["T_WHITESPACE"," ",84],["T_CONSTANT_ENCAPSED_STRING","''",84],["T_WHITESPACE"," ",84],["T_BOOLEAN_OR","||",84],["T_WHITESPACE"," ",84],["T_VARIABLE","$this",84],["T_OBJECT_OPERATOR","->",84],["T_STRING","getRate",84],"(",")",["T_WHITESPACE"," ",84],["T_IS_IDENTICAL","===",84],["T_WHITESPACE"," ",84],["T_CONSTANT_ENCAPSED_STRING","''",84],["T_WHITESPACE","\n            ",84],["T_BOOLEAN_OR","||",85],["T_WHITESPACE"," ",85],["T_VARIABLE","$this",85],["T_OBJECT_OPERATOR","->",85],["T_STRING","getZipIsRange",85],"(",")",["T_WHITESPACE"," ",85],["T_BOOLEAN_AND","&&",85],["T_WHITESPACE"," ",85],"(",["T_VARIABLE","$this",85],["T_OBJECT_OPERATOR","->",85],["T_STRING","getZipFrom",85],"(",")",["T_WHITESPACE"," ",85],["T_IS_IDENTICAL","===",85],["T_WHITESPACE"," ",85],["T_CONSTANT_ENCAPSED_STRING","''",85],["T_WHITESPACE"," ",85],["T_BOOLEAN_OR","||",85],["T_WHITESPACE"," ",85],["T_VARIABLE","$this",85],["T_OBJECT_OPERATOR","->",85],["T_STRING","getZipTo",85],"(",")",["T_WHITESPACE"," ",85],["T_IS_IDENTICAL","===",85],["T_WHITESPACE"," ",85],["T_CONSTANT_ENCAPSED_STRING","''",85],")",["T_WHITESPACE","\n        ",85],")",["T_WHITESPACE"," ",86],"{",["T_WHITESPACE","\n            ",86],["T_STRING","Mage",87],["T_DOUBLE_COLON","::",87],["T_STRING","throwException",87],"(",["T_STRING","Mage",87],["T_DOUBLE_COLON","::",87],["T_STRING","helper",87],"(",["T_CONSTANT_ENCAPSED_STRING","'tax'",87],")",["T_OBJECT_OPERATOR","->",87],["T_STRING","__",87],"(",["T_CONSTANT_ENCAPSED_STRING","'Please fill all required fields with valid information.'",87],")",")",";",["T_WHITESPACE","\n        ",87],"}",["T_WHITESPACE","\n\n        ",88],["T_IF","if",90],["T_WHITESPACE"," ",90],"(","!",["T_STRING","is_numeric",90],"(",["T_VARIABLE","$this",90],["T_OBJECT_OPERATOR","->",90],["T_STRING","getRate",90],"(",")",")",["T_WHITESPACE"," ",90],["T_BOOLEAN_OR","||",90],["T_WHITESPACE"," ",90],["T_VARIABLE","$this",90],["T_OBJECT_OPERATOR","->",90],["T_STRING","getRate",90],"(",")",["T_WHITESPACE"," ",90],"<",["T_WHITESPACE"," ",90],["T_LNUMBER","0",90],")",["T_WHITESPACE"," ",90],"{",["T_WHITESPACE","\n            ",90],["T_STRING","Mage",91],["T_DOUBLE_COLON","::",91],["T_STRING","throwException",91],"(",["T_STRING","Mage",91],["T_DOUBLE_COLON","::",91],["T_STRING","helper",91],"(",["T_CONSTANT_ENCAPSED_STRING","'tax'",91],")",["T_OBJECT_OPERATOR","->",91],["T_STRING","__",91],"(",["T_CONSTANT_ENCAPSED_STRING","'Rate Percent should be a positive number.'",91],")",")",";",["T_WHITESPACE","\n        ",91],"}",["T_WHITESPACE","\n\n        ",92],["T_IF","if",94],["T_WHITESPACE"," ",94],"(",["T_VARIABLE","$this",94],["T_OBJECT_OPERATOR","->",94],["T_STRING","getZipIsRange",94],"(",")",")",["T_WHITESPACE"," ",94],"{",["T_WHITESPACE","\n            ",94],["T_VARIABLE","$zipFrom",95],["T_WHITESPACE"," ",95],"=",["T_WHITESPACE"," ",95],["T_VARIABLE","$this",95],["T_OBJECT_OPERATOR","->",95],["T_STRING","getZipFrom",95],"(",")",";",["T_WHITESPACE","\n            ",95],["T_VARIABLE","$zipTo",96],["T_WHITESPACE"," ",96],"=",["T_WHITESPACE"," ",96],["T_VARIABLE","$this",96],["T_OBJECT_OPERATOR","->",96],["T_STRING","getZipTo",96],"(",")",";",["T_WHITESPACE","\n\n            ",96],["T_IF","if",98],["T_WHITESPACE"," ",98],"(",["T_STRING","strlen",98],"(",["T_VARIABLE","$zipFrom",98],")",["T_WHITESPACE"," ",98],">",["T_WHITESPACE"," ",98],["T_LNUMBER","9",98],["T_WHITESPACE"," ",98],["T_BOOLEAN_OR","||",98],["T_WHITESPACE"," ",98],["T_STRING","strlen",98],"(",["T_VARIABLE","$zipTo",98],")",["T_WHITESPACE"," ",98],">",["T_WHITESPACE"," ",98],["T_LNUMBER","9",98],")",["T_WHITESPACE"," ",98],"{",["T_WHITESPACE","\n                ",98],["T_STRING","Mage",99],["T_DOUBLE_COLON","::",99],["T_STRING","throwException",99],"(",["T_STRING","Mage",99],["T_DOUBLE_COLON","::",99],["T_STRING","helper",99],"(",["T_CONSTANT_ENCAPSED_STRING","'tax'",99],")",["T_OBJECT_OPERATOR","->",99],["T_STRING","__",99],"(",["T_CONSTANT_ENCAPSED_STRING","'Maximum zip code length is 9.'",99],")",")",";",["T_WHITESPACE","\n            ",99],"}",["T_WHITESPACE","\n\n            ",100],["T_IF","if",102],["T_WHITESPACE"," ",102],"(","!",["T_STRING","is_numeric",102],"(",["T_VARIABLE","$zipFrom",102],")",["T_WHITESPACE"," ",102],["T_BOOLEAN_OR","||",102],["T_WHITESPACE"," ",102],"!",["T_STRING","is_numeric",102],"(",["T_VARIABLE","$zipTo",102],")",["T_WHITESPACE"," ",102],["T_BOOLEAN_OR","||",102],["T_WHITESPACE"," ",102],["T_VARIABLE","$zipFrom",102],["T_WHITESPACE"," ",102],"<",["T_WHITESPACE"," ",102],["T_LNUMBER","0",102],["T_WHITESPACE"," ",102],["T_BOOLEAN_OR","||",102],["T_WHITESPACE"," ",102],["T_VARIABLE","$zipTo",102],["T_WHITESPACE"," ",102],"<",["T_WHITESPACE"," ",102],["T_LNUMBER","0",102],")",["T_WHITESPACE"," ",102],"{",["T_WHITESPACE","\n                ",102],["T_STRING","Mage",103],["T_DOUBLE_COLON","::",103],["T_STRING","throwException",103],"(",["T_STRING","Mage",103],["T_DOUBLE_COLON","::",103],["T_STRING","helper",103],"(",["T_CONSTANT_ENCAPSED_STRING","'tax'",103],")",["T_OBJECT_OPERATOR","->",103],["T_STRING","__",103],"(",["T_CONSTANT_ENCAPSED_STRING","'Zip code should not contain characters other than digits.'",103],")",")",";",["T_WHITESPACE","\n            ",103],"}",["T_WHITESPACE","\n\n            ",104],["T_IF","if",106],["T_WHITESPACE"," ",106],"(",["T_VARIABLE","$zipFrom",106],["T_WHITESPACE"," ",106],">",["T_WHITESPACE"," ",106],["T_VARIABLE","$zipTo",106],")",["T_WHITESPACE"," ",106],"{",["T_WHITESPACE","\n                ",106],["T_STRING","Mage",107],["T_DOUBLE_COLON","::",107],["T_STRING","throwException",107],"(",["T_STRING","Mage",107],["T_DOUBLE_COLON","::",107],["T_STRING","helper",107],"(",["T_CONSTANT_ENCAPSED_STRING","'tax'",107],")",["T_OBJECT_OPERATOR","->",107],["T_STRING","__",107],"(",["T_CONSTANT_ENCAPSED_STRING","'Range To should be equal or greater than Range From.'",107],")",")",";",["T_WHITESPACE","\n            ",107],"}",["T_WHITESPACE","\n\n            ",108],["T_VARIABLE","$this",110],["T_OBJECT_OPERATOR","->",110],["T_STRING","setTaxPostcode",110],"(",["T_VARIABLE","$zipFrom",110],["T_WHITESPACE"," ",110],".",["T_WHITESPACE"," ",110],["T_CONSTANT_ENCAPSED_STRING","'-'",110],["T_WHITESPACE"," ",110],".",["T_WHITESPACE"," ",110],["T_VARIABLE","$zipTo",110],")",";",["T_WHITESPACE","\n        ",110],"}",["T_WHITESPACE"," ",111],["T_ELSE","else",111],["T_WHITESPACE"," ",111],"{",["T_WHITESPACE","\n            ",111],["T_VARIABLE","$taxPostCode",112],["T_WHITESPACE"," ",112],"=",["T_WHITESPACE"," ",112],["T_VARIABLE","$this",112],["T_OBJECT_OPERATOR","->",112],["T_STRING","getTaxPostcode",112],"(",")",";",["T_WHITESPACE","\n\n            ",112],["T_IF","if",114],["T_WHITESPACE"," ",114],"(",["T_STRING","strlen",114],"(",["T_VARIABLE","$taxPostCode",114],")",["T_WHITESPACE"," ",114],">",["T_WHITESPACE"," ",114],["T_LNUMBER","10",114],")",["T_WHITESPACE"," ",114],"{",["T_WHITESPACE","\n                ",114],["T_VARIABLE","$taxPostCode",115],["T_WHITESPACE"," ",115],"=",["T_WHITESPACE"," ",115],["T_STRING","substr",115],"(",["T_VARIABLE","$taxPostCode",115],",",["T_WHITESPACE"," ",115],["T_LNUMBER","0",115],",",["T_WHITESPACE"," ",115],["T_LNUMBER","10",115],")",";",["T_WHITESPACE","\n            ",115],"}",["T_WHITESPACE","\n\n            ",116],["T_VARIABLE","$this",118],["T_OBJECT_OPERATOR","->",118],["T_STRING","setTaxPostcode",118],"(",["T_VARIABLE","$taxPostCode",118],")",["T_WHITESPACE","\n                ",118],["T_OBJECT_OPERATOR","->",119],["T_STRING","setZipIsRange",119],"(",["T_STRING","null",119],")",["T_WHITESPACE","\n                ",119],["T_OBJECT_OPERATOR","->",120],["T_STRING","setZipFrom",120],"(",["T_STRING","null",120],")",["T_WHITESPACE","\n                ",120],["T_OBJECT_OPERATOR","->",121],["T_STRING","setZipTo",121],"(",["T_STRING","null",121],")",";",["T_WHITESPACE","\n        ",121],"}",["T_WHITESPACE","\n\n        ",122],["T_STRING","parent",124],["T_DOUBLE_COLON","::",124],["T_STRING","_beforeSave",124],"(",")",";",["T_WHITESPACE","\n        ",124],["T_VARIABLE","$country",125],["T_WHITESPACE"," ",125],"=",["T_WHITESPACE"," ",125],["T_VARIABLE","$this",125],["T_OBJECT_OPERATOR","->",125],["T_STRING","getTaxCountryId",125],"(",")",";",["T_WHITESPACE","\n        ",125],["T_VARIABLE","$region",126],["T_WHITESPACE"," ",126],"=",["T_WHITESPACE"," ",126],["T_VARIABLE","$this",126],["T_OBJECT_OPERATOR","->",126],["T_STRING","getTaxRegionId",126],"(",")",";",["T_WHITESPACE","\n        ",126],["T_VARIABLE","$regionModel",127],["T_WHITESPACE"," ",127],"=",["T_WHITESPACE"," ",127],["T_STRING","Mage",127],["T_DOUBLE_COLON","::",127],["T_STRING","getModel",127],"(",["T_CONSTANT_ENCAPSED_STRING","'directory\/region'",127],")",";",["T_WHITESPACE","\n        ",127],["T_VARIABLE","$regionModel",128],["T_OBJECT_OPERATOR","->",128],["T_STRING","load",128],"(",["T_VARIABLE","$region",128],")",";",["T_WHITESPACE","\n        ",128],["T_IF","if",129],["T_WHITESPACE"," ",129],"(",["T_VARIABLE","$regionModel",129],["T_OBJECT_OPERATOR","->",129],["T_STRING","getCountryId",129],"(",")",["T_WHITESPACE"," ",129],["T_IS_NOT_EQUAL","!=",129],["T_WHITESPACE"," ",129],["T_VARIABLE","$country",129],")",["T_WHITESPACE"," ",129],"{",["T_WHITESPACE","\n            ",129],["T_VARIABLE","$this",130],["T_OBJECT_OPERATOR","->",130],["T_STRING","setTaxRegionId",130],"(",["T_CONSTANT_ENCAPSED_STRING","'*'",130],")",";",["T_WHITESPACE","\n        ",130],"}",["T_WHITESPACE","\n        ",131],["T_RETURN","return",132],["T_WHITESPACE"," ",132],["T_VARIABLE","$this",132],";",["T_WHITESPACE","\n    ",132],"}",["T_WHITESPACE","\n\n    ",133],["T_DOC_COMMENT","\/**\n     * Save rate titles\n     *\n     * @return Mage_Tax_Model_Calculation_Rate\n     *\/",135],["T_WHITESPACE","\n    ",139],["T_PROTECTED","protected",140],["T_WHITESPACE"," ",140],["T_FUNCTION","function",140],["T_WHITESPACE"," ",140],["T_STRING","_afterSave",140],"(",")",["T_WHITESPACE","\n    ",140],"{",["T_WHITESPACE","\n        ",141],["T_VARIABLE","$this",142],["T_OBJECT_OPERATOR","->",142],["T_STRING","saveTitles",142],"(",")",";",["T_WHITESPACE","\n        ",142],["T_STRING","Mage",143],["T_DOUBLE_COLON","::",143],["T_STRING","dispatchEvent",143],"(",["T_CONSTANT_ENCAPSED_STRING","'tax_settings_change_after'",143],")",";",["T_WHITESPACE","\n        ",143],["T_RETURN","return",144],["T_WHITESPACE"," ",144],["T_STRING","parent",144],["T_DOUBLE_COLON","::",144],["T_STRING","_afterSave",144],"(",")",";",["T_WHITESPACE","\n    ",144],"}",["T_WHITESPACE","\n\n    ",145],["T_DOC_COMMENT","\/**\n     * Processing object before delete data\n     *\n     * @return Mage_Core_Model_Abstract\n     * @throws Mage_Core_Exception\n     *\/",147],["T_WHITESPACE","\n    ",152],["T_PROTECTED","protected",153],["T_WHITESPACE"," ",153],["T_FUNCTION","function",153],["T_WHITESPACE"," ",153],["T_STRING","_beforeDelete",153],"(",")",["T_WHITESPACE","\n    ",153],"{",["T_WHITESPACE","\n        ",154],["T_IF","if",155],["T_WHITESPACE"," ",155],"(",["T_VARIABLE","$this",155],["T_OBJECT_OPERATOR","->",155],["T_STRING","_isInRule",155],"(",")",")",["T_WHITESPACE"," ",155],"{",["T_WHITESPACE","\n            ",155],["T_STRING","Mage",156],["T_DOUBLE_COLON","::",156],["T_STRING","throwException",156],"(",["T_STRING","Mage",156],["T_DOUBLE_COLON","::",156],["T_STRING","helper",156],"(",["T_CONSTANT_ENCAPSED_STRING","'tax'",156],")",["T_OBJECT_OPERATOR","->",156],["T_STRING","__",156],"(",["T_CONSTANT_ENCAPSED_STRING","'Tax rate cannot be removed. It exists in tax rule'",156],")",")",";",["T_WHITESPACE","\n        ",156],"}",["T_WHITESPACE","\n        ",157],["T_RETURN","return",158],["T_WHITESPACE"," ",158],["T_STRING","parent",158],["T_DOUBLE_COLON","::",158],["T_STRING","_beforeDelete",158],"(",")",";",["T_WHITESPACE","\n    ",158],"}",["T_WHITESPACE","\n\n    ",159],["T_DOC_COMMENT","\/**\n     * After rate delete\n     * redeclared for dispatch tax_settings_change_after event\n     *\n     * @return Mage_Tax_Model_Calculation_Rate\n     *\/",161],["T_WHITESPACE","\n    ",166],["T_PROTECTED","protected",167],["T_WHITESPACE"," ",167],["T_FUNCTION","function",167],["T_WHITESPACE"," ",167],["T_STRING","_afterDelete",167],"(",")",["T_WHITESPACE","\n    ",167],"{",["T_WHITESPACE","\n        ",168],["T_STRING","Mage",169],["T_DOUBLE_COLON","::",169],["T_STRING","dispatchEvent",169],"(",["T_CONSTANT_ENCAPSED_STRING","'tax_settings_change_after'",169],")",";",["T_WHITESPACE","\n        ",169],["T_RETURN","return",170],["T_WHITESPACE"," ",170],["T_STRING","parent",170],["T_DOUBLE_COLON","::",170],["T_STRING","_afterDelete",170],"(",")",";",["T_WHITESPACE","\n    ",170],"}",["T_WHITESPACE","\n\n    ",171],["T_DOC_COMMENT","\/**\n     * Saves the tax titles\n     *\n     * @param array | null $titles\n     *\/",173],["T_WHITESPACE","\n    ",177],["T_PUBLIC","public",178],["T_WHITESPACE"," ",178],["T_FUNCTION","function",178],["T_WHITESPACE"," ",178],["T_STRING","saveTitles",178],"(",["T_VARIABLE","$titles",178],["T_WHITESPACE"," ",178],"=",["T_WHITESPACE"," ",178],["T_STRING","null",178],")",["T_WHITESPACE","\n    ",178],"{",["T_WHITESPACE","\n        ",179],["T_IF","if",180],["T_WHITESPACE"," ",180],"(",["T_STRING","is_null",180],"(",["T_VARIABLE","$titles",180],")",")",["T_WHITESPACE"," ",180],"{",["T_WHITESPACE","\n            ",180],["T_VARIABLE","$titles",181],["T_WHITESPACE"," ",181],"=",["T_WHITESPACE"," ",181],["T_VARIABLE","$this",181],["T_OBJECT_OPERATOR","->",181],["T_STRING","getTitle",181],"(",")",";",["T_WHITESPACE","\n        ",181],"}",["T_WHITESPACE","\n\n        ",182],["T_VARIABLE","$this",184],["T_OBJECT_OPERATOR","->",184],["T_STRING","getTitleModel",184],"(",")",["T_OBJECT_OPERATOR","->",184],["T_STRING","deleteByRateId",184],"(",["T_VARIABLE","$this",184],["T_OBJECT_OPERATOR","->",184],["T_STRING","getId",184],"(",")",")",";",["T_WHITESPACE","\n        ",184],["T_IF","if",185],["T_WHITESPACE"," ",185],"(",["T_STRING","is_array",185],"(",["T_VARIABLE","$titles",185],")",["T_WHITESPACE"," ",185],["T_BOOLEAN_AND","&&",185],["T_WHITESPACE"," ",185],["T_VARIABLE","$titles",185],")",["T_WHITESPACE"," ",185],"{",["T_WHITESPACE","\n            ",185],["T_FOREACH","foreach",186],["T_WHITESPACE"," ",186],"(",["T_VARIABLE","$titles",186],["T_WHITESPACE"," ",186],["T_AS","as",186],["T_WHITESPACE"," ",186],["T_VARIABLE","$store",186],["T_WHITESPACE"," ",186],["T_DOUBLE_ARROW","=>",186],["T_WHITESPACE"," ",186],["T_VARIABLE","$title",186],")",["T_WHITESPACE"," ",186],"{",["T_WHITESPACE","\n                ",186],["T_IF","if",187],["T_WHITESPACE"," ",187],"(",["T_VARIABLE","$title",187],["T_WHITESPACE"," ",187],["T_IS_NOT_IDENTICAL","!==",187],["T_WHITESPACE"," ",187],["T_CONSTANT_ENCAPSED_STRING","''",187],")",["T_WHITESPACE"," ",187],"{",["T_WHITESPACE","\n                    ",187],["T_VARIABLE","$this",188],["T_OBJECT_OPERATOR","->",188],["T_STRING","getTitleModel",188],"(",")",["T_WHITESPACE","\n                        ",188],["T_OBJECT_OPERATOR","->",189],["T_STRING","setId",189],"(",["T_STRING","null",189],")",["T_WHITESPACE","\n                        ",189],["T_OBJECT_OPERATOR","->",190],["T_STRING","setTaxCalculationRateId",190],"(",["T_VARIABLE","$this",190],["T_OBJECT_OPERATOR","->",190],["T_STRING","getId",190],"(",")",")",["T_WHITESPACE","\n                        ",190],["T_OBJECT_OPERATOR","->",191],["T_STRING","setStoreId",191],"(",["T_INT_CAST","(int)",191],["T_WHITESPACE"," ",191],["T_VARIABLE","$store",191],")",["T_WHITESPACE","\n                        ",191],["T_OBJECT_OPERATOR","->",192],["T_STRING","setValue",192],"(",["T_VARIABLE","$title",192],")",["T_WHITESPACE","\n                        ",192],["T_OBJECT_OPERATOR","->",193],["T_STRING","save",193],"(",")",";",["T_WHITESPACE","\n                ",193],"}",["T_WHITESPACE","\n            ",194],"}",["T_WHITESPACE","\n        ",195],"}",["T_WHITESPACE","\n    ",196],"}",["T_WHITESPACE","\n\n    ",197],["T_DOC_COMMENT","\/**\n     * Returns the Mage_Tax_Model_Calculation_Rate_Title\n     *\n     * @return Mage_Tax_Model_Calculation_Rate_Title\n     *\/",199],["T_WHITESPACE","\n    ",203],["T_PUBLIC","public",204],["T_WHITESPACE"," ",204],["T_FUNCTION","function",204],["T_WHITESPACE"," ",204],["T_STRING","getTitleModel",204],"(",")",["T_WHITESPACE","\n    ",204],"{",["T_WHITESPACE","\n        ",205],["T_IF","if",206],["T_WHITESPACE"," ",206],"(",["T_STRING","is_null",206],"(",["T_VARIABLE","$this",206],["T_OBJECT_OPERATOR","->",206],["T_STRING","_titleModel",206],")",")",["T_WHITESPACE"," ",206],"{",["T_WHITESPACE","\n            ",206],["T_VARIABLE","$this",207],["T_OBJECT_OPERATOR","->",207],["T_STRING","_titleModel",207],["T_WHITESPACE"," ",207],"=",["T_WHITESPACE"," ",207],["T_STRING","Mage",207],["T_DOUBLE_COLON","::",207],["T_STRING","getModel",207],"(",["T_CONSTANT_ENCAPSED_STRING","'tax\/calculation_rate_title'",207],")",";",["T_WHITESPACE","\n        ",207],"}",["T_WHITESPACE","\n        ",208],["T_RETURN","return",209],["T_WHITESPACE"," ",209],["T_VARIABLE","$this",209],["T_OBJECT_OPERATOR","->",209],["T_STRING","_titleModel",209],";",["T_WHITESPACE","\n    ",209],"}",["T_WHITESPACE","\n\n    ",210],["T_DOC_COMMENT","\/**\n     * Returns the list of tax titles\n     *\n     * @return array\n     *\/",212],["T_WHITESPACE","\n    ",216],["T_PUBLIC","public",217],["T_WHITESPACE"," ",217],["T_FUNCTION","function",217],["T_WHITESPACE"," ",217],["T_STRING","getTitles",217],"(",")",["T_WHITESPACE","\n    ",217],"{",["T_WHITESPACE","\n        ",218],["T_IF","if",219],["T_WHITESPACE"," ",219],"(",["T_STRING","is_null",219],"(",["T_VARIABLE","$this",219],["T_OBJECT_OPERATOR","->",219],["T_STRING","_titles",219],")",")",["T_WHITESPACE"," ",219],"{",["T_WHITESPACE","\n            ",219],["T_VARIABLE","$this",220],["T_OBJECT_OPERATOR","->",220],["T_STRING","_titles",220],["T_WHITESPACE"," ",220],"=",["T_WHITESPACE"," ",220],["T_VARIABLE","$this",220],["T_OBJECT_OPERATOR","->",220],["T_STRING","getTitleModel",220],"(",")",["T_OBJECT_OPERATOR","->",220],["T_STRING","getCollection",220],"(",")",["T_OBJECT_OPERATOR","->",220],["T_STRING","loadByRateId",220],"(",["T_VARIABLE","$this",220],["T_OBJECT_OPERATOR","->",220],["T_STRING","getId",220],"(",")",")",";",["T_WHITESPACE","\n        ",220],"}",["T_WHITESPACE","\n        ",221],["T_RETURN","return",222],["T_WHITESPACE"," ",222],["T_VARIABLE","$this",222],["T_OBJECT_OPERATOR","->",222],["T_STRING","_titles",222],";",["T_WHITESPACE","\n    ",222],"}",["T_WHITESPACE","\n\n    ",223],["T_DOC_COMMENT","\/**\n     * Deletes all tax rates\n     *\n     * @return Mage_Tax_Model_Calculation_Rate\n     *\/",225],["T_WHITESPACE","\n    ",229],["T_PUBLIC","public",230],["T_WHITESPACE"," ",230],["T_FUNCTION","function",230],["T_WHITESPACE"," ",230],["T_STRING","deleteAllRates",230],"(",")",["T_WHITESPACE","\n    ",230],"{",["T_WHITESPACE","\n        ",231],["T_VARIABLE","$this",232],["T_OBJECT_OPERATOR","->",232],["T_STRING","_getResource",232],"(",")",["T_OBJECT_OPERATOR","->",232],["T_STRING","deleteAllRates",232],"(",")",";",["T_WHITESPACE","\n        ",232],["T_STRING","Mage",233],["T_DOUBLE_COLON","::",233],["T_STRING","dispatchEvent",233],"(",["T_CONSTANT_ENCAPSED_STRING","'tax_settings_change_after'",233],")",";",["T_WHITESPACE","\n        ",233],["T_RETURN","return",234],["T_WHITESPACE"," ",234],["T_VARIABLE","$this",234],";",["T_WHITESPACE","\n    ",234],"}",["T_WHITESPACE","\n\n    ",235],["T_DOC_COMMENT","\/**\n     * Load rate model by code\n     *\n     * @param  string $code\n     * @return Mage_Tax_Model_Calculation_Rate\n     *\/",237],["T_WHITESPACE","\n    ",242],["T_PUBLIC","public",243],["T_WHITESPACE"," ",243],["T_FUNCTION","function",243],["T_WHITESPACE"," ",243],["T_STRING","loadByCode",243],"(",["T_VARIABLE","$code",243],")",["T_WHITESPACE","\n    ",243],"{",["T_WHITESPACE","\n        ",244],["T_VARIABLE","$this",245],["T_OBJECT_OPERATOR","->",245],["T_STRING","load",245],"(",["T_VARIABLE","$code",245],",",["T_WHITESPACE"," ",245],["T_CONSTANT_ENCAPSED_STRING","'code'",245],")",";",["T_WHITESPACE","\n        ",245],["T_RETURN","return",246],["T_WHITESPACE"," ",246],["T_VARIABLE","$this",246],";",["T_WHITESPACE","\n    ",246],"}",["T_WHITESPACE","\n\n\n    ",247],["T_DOC_COMMENT","\/**\n     * Check if rate exists in tax rule\n     *\n     * @return array\n     *\/",250],["T_WHITESPACE","\n    ",254],["T_PROTECTED","protected",255],["T_WHITESPACE"," ",255],["T_FUNCTION","function",255],["T_WHITESPACE"," ",255],["T_STRING","_isInRule",255],"(",")",["T_WHITESPACE","\n    ",255],"{",["T_WHITESPACE","\n        ",256],["T_RETURN","return",257],["T_WHITESPACE"," ",257],["T_VARIABLE","$this",257],["T_OBJECT_OPERATOR","->",257],["T_STRING","getResource",257],"(",")",["T_OBJECT_OPERATOR","->",257],["T_STRING","isInRule",257],"(",["T_VARIABLE","$this",257],["T_OBJECT_OPERATOR","->",257],["T_STRING","getId",257],"(",")",")",";",["T_WHITESPACE","\n    ",257],"}",["T_WHITESPACE","\n",258],"}",["T_WHITESPACE","\n",259]]
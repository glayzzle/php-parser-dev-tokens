[["T_OPEN_TAG","<?php\n",1],["T_DOC_COMMENT","\/**\n * Magento\n *\n * NOTICE OF LICENSE\n *\n * This source file is subject to the Open Software License (OSL 3.0)\n * that is bundled with this package in the file LICENSE.txt.\n * It is also available through the world-wide-web at this URL:\n * http:\/\/opensource.org\/licenses\/osl-3.0.php\n * If you did not receive a copy of the license and are unable to\n * obtain it through the world-wide-web, please send an email\n * to license@magento.com so we can send you a copy immediately.\n *\n * DISCLAIMER\n *\n * Do not edit or add to this file if you wish to upgrade Magento to newer\n * versions in the future. If you wish to customize Magento for your\n * needs please refer to http:\/\/www.magento.com for more information.\n *\n * @category    Mage\n * @package     Mage_Tax\n * @copyright  Copyright (c) 2006-2016 X.commerce, Inc. and affiliates (http:\/\/www.magento.com)\n * @license    http:\/\/opensource.org\/licenses\/osl-3.0.php  Open Software License (OSL 3.0)\n *\/",2],["T_WHITESPACE","\n\n",25],["T_COMMENT","\/* @var $installer Mage_Core_Model_Resource_Setup *\/",27],["T_WHITESPACE","\n",27],["T_VARIABLE","$installer",28],["T_WHITESPACE"," ",28],"=",["T_WHITESPACE"," ",28],["T_VARIABLE","$this",28],";",["T_WHITESPACE","\n\n",28],["T_VARIABLE","$installer",30],["T_OBJECT_OPERATOR","->",30],["T_STRING","startSetup",30],"(",")",";",["T_WHITESPACE","\n\n",30],["T_VARIABLE","$installer",32],["T_OBJECT_OPERATOR","->",32],["T_STRING","run",32],"(","\"",["T_ENCAPSED_AND_WHITESPACE","\nCREATE TABLE `",32],["T_CURLY_OPEN","{",33],["T_VARIABLE","$installer",33],["T_OBJECT_OPERATOR","->",33],["T_STRING","getTable",33],"(",["T_CONSTANT_ENCAPSED_STRING","'tax_class'",33],")","}",["T_ENCAPSED_AND_WHITESPACE","` (\n  `class_id` smallint(6) NOT NULL AUTO_INCREMENT,\n  `class_name` varchar(255) NOT NULL DEFAULT '',\n  `class_type` enum('CUSTOMER','PRODUCT') NOT NULL DEFAULT 'CUSTOMER',\n  PRIMARY KEY (`class_id`)\n) ENGINE=InnoDB DEFAULT CHARSET=utf8;\n\nCREATE TABLE `",33],["T_CURLY_OPEN","{",40],["T_VARIABLE","$installer",40],["T_OBJECT_OPERATOR","->",40],["T_STRING","getTable",40],"(",["T_CONSTANT_ENCAPSED_STRING","'tax_calculation'",40],")","}",["T_ENCAPSED_AND_WHITESPACE","` (\n  `tax_calculation_rate_id` int(11) NOT NULL,\n  `tax_calculation_rule_id` int(11) NOT NULL,\n  `customer_tax_class_id` smallint(6) NOT NULL,\n  `product_tax_class_id` smallint(6) NOT NULL,\n  KEY `FK_TAX_CALCULATION_RULE` (`tax_calculation_rule_id`),\n  KEY `FK_TAX_CALCULATION_RATE` (`tax_calculation_rate_id`),\n  KEY `FK_TAX_CALCULATION_CTC` (`customer_tax_class_id`),\n  KEY `FK_TAX_CALCULATION_PTC` (`product_tax_class_id`),\n  KEY `IDX_TAX_CALCULATION` (`tax_calculation_rate_id`,`customer_tax_class_id`,`product_tax_class_id`),\n  CONSTRAINT `FK_TAX_CALCULATION_PTC` FOREIGN KEY (`product_tax_class_id`)\n    REFERENCES `",40],["T_CURLY_OPEN","{",51],["T_VARIABLE","$installer",51],["T_OBJECT_OPERATOR","->",51],["T_STRING","getTable",51],"(",["T_CONSTANT_ENCAPSED_STRING","'tax_class'",51],")","}",["T_ENCAPSED_AND_WHITESPACE","` (`class_id`) ON DELETE CASCADE ON UPDATE CASCADE,\n  CONSTRAINT `FK_TAX_CALCULATION_CTC` FOREIGN KEY (`customer_tax_class_id`)\n    REFERENCES `",51],["T_CURLY_OPEN","{",53],["T_VARIABLE","$installer",53],["T_OBJECT_OPERATOR","->",53],["T_STRING","getTable",53],"(",["T_CONSTANT_ENCAPSED_STRING","'tax_class'",53],")","}",["T_ENCAPSED_AND_WHITESPACE","` (`class_id`) ON DELETE CASCADE ON UPDATE CASCADE,\n  CONSTRAINT `FK_TAX_CALCULATION_RATE` FOREIGN KEY (`tax_calculation_rate_id`)\n    REFERENCES `",53],["T_CURLY_OPEN","{",55],["T_VARIABLE","$installer",55],["T_OBJECT_OPERATOR","->",55],["T_STRING","getTable",55],"(",["T_CONSTANT_ENCAPSED_STRING","'tax_calculation_rate'",55],")","}",["T_ENCAPSED_AND_WHITESPACE","` (`tax_calculation_rate_id`) ON DELETE CASCADE ON UPDATE CASCADE,\n  CONSTRAINT `FK_TAX_CALCULATION_RULE` FOREIGN KEY (`tax_calculation_rule_id`)\n    REFERENCES `",55],["T_CURLY_OPEN","{",57],["T_VARIABLE","$installer",57],["T_OBJECT_OPERATOR","->",57],["T_STRING","getTable",57],"(",["T_CONSTANT_ENCAPSED_STRING","'tax_calculation_rule'",57],")","}",["T_ENCAPSED_AND_WHITESPACE","` (`tax_calculation_rule_id`) ON DELETE CASCADE ON UPDATE CASCADE\n) ENGINE=InnoDB DEFAULT CHARSET=utf8;\n\nCREATE TABLE `",57],["T_CURLY_OPEN","{",60],["T_VARIABLE","$installer",60],["T_OBJECT_OPERATOR","->",60],["T_STRING","getTable",60],"(",["T_CONSTANT_ENCAPSED_STRING","'tax_calculation_rate'",60],")","}",["T_ENCAPSED_AND_WHITESPACE","` (\n  `tax_calculation_rate_id` int(11) NOT NULL AUTO_INCREMENT,\n  `tax_country_id` char(2) NOT NULL,\n  `tax_region_id` mediumint(9) NOT NULL,\n  `tax_postcode` varchar(21) NOT NULL,\n  `code` varchar(255) NOT NULL,\n  `rate` decimal(12,4) NOT NULL,\n  `zip_is_range` tinyint(1) DEFAULT NULL,\n  `zip_from` int(11) unsigned DEFAULT NULL,\n  `zip_to` int(11) unsigned DEFAULT NULL,\n  PRIMARY KEY (`tax_calculation_rate_id`),\n  KEY `IDX_TAX_CALCULATION_RATE` (`tax_country_id`,`tax_region_id`,`tax_postcode`),\n  KEY `IDX_TAX_CALCULATION_RATE_CODE` (`code`),\n  KEY `IDX_TAX_CALCULATION_RATE_RANGE` (`tax_calculation_rate_id`,`tax_country_id`,`tax_region_id`,`zip_is_range`,`tax_postcode`)\n) ENGINE=InnoDB DEFAULT CHARSET=utf8;\n\nCREATE TABLE `",60],["T_CURLY_OPEN","{",76],["T_VARIABLE","$installer",76],["T_OBJECT_OPERATOR","->",76],["T_STRING","getTable",76],"(",["T_CONSTANT_ENCAPSED_STRING","'tax_calculation_rate_title'",76],")","}",["T_ENCAPSED_AND_WHITESPACE","` (\n  `tax_calculation_rate_title_id` int(11) NOT NULL AUTO_INCREMENT,\n  `tax_calculation_rate_id` int(11) NOT NULL,\n  `store_id` smallint(5) unsigned NOT NULL,\n  `value` varchar(255) NOT NULL,\n  PRIMARY KEY (`tax_calculation_rate_title_id`),\n  KEY `IDX_TAX_CALCULATION_RATE_TITLE` (`tax_calculation_rate_id`,`store_id`),\n  KEY `FK_TAX_CALCULATION_RATE_TITLE_RATE` (`tax_calculation_rate_id`),\n  KEY `FK_TAX_CALCULATION_RATE_TITLE_STORE` (`store_id`),\n  CONSTRAINT `FK_TAX_CALCULATION_RATE_TITLE_STORE` FOREIGN KEY (`store_id`)\n    REFERENCES `",76],["T_CURLY_OPEN","{",86],["T_VARIABLE","$installer",86],["T_OBJECT_OPERATOR","->",86],["T_STRING","getTable",86],"(",["T_CONSTANT_ENCAPSED_STRING","'core_store'",86],")","}",["T_ENCAPSED_AND_WHITESPACE","` (`store_id`) ON DELETE CASCADE ON UPDATE CASCADE,\n  CONSTRAINT `FK_TAX_CALCULATION_RATE_TITLE_RATE` FOREIGN KEY (`tax_calculation_rate_id`)\n    REFERENCES `",86],["T_CURLY_OPEN","{",88],["T_VARIABLE","$installer",88],["T_OBJECT_OPERATOR","->",88],["T_STRING","getTable",88],"(",["T_CONSTANT_ENCAPSED_STRING","'tax_calculation_rate'",88],")","}",["T_ENCAPSED_AND_WHITESPACE","` (`tax_calculation_rate_id`) ON DELETE CASCADE ON UPDATE CASCADE\n) ENGINE=InnoDB DEFAULT CHARSET=utf8;\n\nCREATE TABLE `",88],["T_CURLY_OPEN","{",91],["T_VARIABLE","$installer",91],["T_OBJECT_OPERATOR","->",91],["T_STRING","getTable",91],"(",["T_CONSTANT_ENCAPSED_STRING","'tax_calculation_rule'",91],")","}",["T_ENCAPSED_AND_WHITESPACE","` (\n  `tax_calculation_rule_id` int(11) NOT NULL AUTO_INCREMENT,\n  `code` varchar(255) NOT NULL,\n  `priority` mediumint(9) NOT NULL,\n  `position` mediumint(9) NOT NULL,\n  PRIMARY KEY (`tax_calculation_rule_id`),\n  KEY `IDX_TAX_CALCULATION_RULE` (`priority`,`position`,`tax_calculation_rule_id`),\n  KEY `IDX_TAX_CALCULATION_RULE_CODE` (`code`)\n) ENGINE=InnoDB DEFAULT CHARSET=utf8;\n\nCREATE TABLE `",91],["T_CURLY_OPEN","{",101],["T_VARIABLE","$installer",101],["T_OBJECT_OPERATOR","->",101],["T_STRING","getTable",101],"(",["T_CONSTANT_ENCAPSED_STRING","'tax_order_aggregated_created'",101],")","}",["T_ENCAPSED_AND_WHITESPACE","` (\n    `id` int(11) unsigned NOT NULL AUTO_INCREMENT,\n    `period` date NOT NULL DEFAULT '0000-00-00',\n    `store_id` smallint(5) unsigned DEFAULT NULL,\n    `code` varchar(255) NOT NULL DEFAULT '',\n    `order_status` varchar(50) NOT NULL DEFAULT '',\n    `percent` float(12,4) NOT NULL DEFAULT '0.0000',\n    `orders_count` int(11) unsigned NOT NULL DEFAULT '0',\n    `tax_base_amount_sum` float(12,4) NOT NULL DEFAULT '0.0000',\n    PRIMARY KEY (`id`),\n    UNIQUE KEY `UNQ_PERIOD_STORE_CODE_ORDER_STATUS` (`period`,`store_id`,`code`,`order_status`),\n    KEY `IDX_STORE_ID` (`store_id`),\n    CONSTRAINT `FK_TAX_ORDER_AGGREGATED_CREATED_STORE` FOREIGN KEY (`store_id`)\n        REFERENCES `",101],["T_CURLY_OPEN","{",114],["T_VARIABLE","$installer",114],["T_OBJECT_OPERATOR","->",114],["T_STRING","getTable",114],"(",["T_CONSTANT_ENCAPSED_STRING","'core_store'",114],")","}",["T_ENCAPSED_AND_WHITESPACE","` (`store_id`) ON DELETE CASCADE ON UPDATE CASCADE\n) ENGINE=InnoDB DEFAULT CHARSET=utf8;\n\nCREATE TABLE `",114],["T_CURLY_OPEN","{",117],["T_VARIABLE","$installer",117],["T_OBJECT_OPERATOR","->",117],["T_STRING","getTable",117],"(",["T_CONSTANT_ENCAPSED_STRING","'tax\/sales_order_tax'",117],")","}",["T_ENCAPSED_AND_WHITESPACE","` (\n    `tax_id` int(10) unsigned NOT NULL AUTO_INCREMENT,\n    `order_id` int(10) unsigned NOT NULL,\n    `code` varchar(255) NOT NULL,\n    `title` varchar(255) NOT NULL,\n    `percent` decimal(12,4) NOT NULL,\n    `amount` decimal(12,4) NOT NULL,\n    `priority` int(11) NOT NULL,\n    `position` int(11) NOT NULL,\n    `base_amount` decimal(12,4) NOT NULL,\n    `process` smallint(6) NOT NULL,\n    `base_real_amount` decimal(12,4) NOT NULL,\n    `hidden` smallint(5) unsigned NOT NULL DEFAULT '0',\n    PRIMARY KEY (`tax_id`),\n    KEY `IDX_ORDER_TAX` (`order_id`,`priority`,`position`)\n) ENGINE=InnoDB AUTO_INCREMENT=105 DEFAULT CHARSET=utf8;\n\n\/* Insert initial tax data *\/\ninsert  into `",117],["T_CURLY_OPEN","{",135],["T_VARIABLE","$installer",135],["T_OBJECT_OPERATOR","->",135],["T_STRING","getTable",135],"(",["T_CONSTANT_ENCAPSED_STRING","'tax_class'",135],")","}",["T_ENCAPSED_AND_WHITESPACE","`(`class_id`,`class_name`,`class_type`) values (2,'Taxable Goods','PRODUCT');\ninsert  into `",135],["T_CURLY_OPEN","{",136],["T_VARIABLE","$installer",136],["T_OBJECT_OPERATOR","->",136],["T_STRING","getTable",136],"(",["T_CONSTANT_ENCAPSED_STRING","'tax_class'",136],")","}",["T_ENCAPSED_AND_WHITESPACE","`(`class_id`,`class_name`,`class_type`) values (3,'Retail Customer','CUSTOMER');\ninsert  into `",136],["T_CURLY_OPEN","{",137],["T_VARIABLE","$installer",137],["T_OBJECT_OPERATOR","->",137],["T_STRING","getTable",137],"(",["T_CONSTANT_ENCAPSED_STRING","'tax_class'",137],")","}",["T_ENCAPSED_AND_WHITESPACE","`(`class_id`,`class_name`,`class_type`) values (4,'Shipping','PRODUCT');\ninsert  into `",137],["T_CURLY_OPEN","{",138],["T_VARIABLE","$installer",138],["T_OBJECT_OPERATOR","->",138],["T_STRING","getTable",138],"(",["T_CONSTANT_ENCAPSED_STRING","'tax_calculation'",138],")","}",["T_ENCAPSED_AND_WHITESPACE","`(`tax_calculation_rate_id`,`tax_calculation_rule_id`,`customer_tax_class_id`,`product_tax_class_id`) values (1,1,3,2);\ninsert  into `",138],["T_CURLY_OPEN","{",139],["T_VARIABLE","$installer",139],["T_OBJECT_OPERATOR","->",139],["T_STRING","getTable",139],"(",["T_CONSTANT_ENCAPSED_STRING","'tax_calculation'",139],")","}",["T_ENCAPSED_AND_WHITESPACE","`(`tax_calculation_rate_id`,`tax_calculation_rule_id`,`customer_tax_class_id`,`product_tax_class_id`) values (2,1,3,2);\ninsert  into `",139],["T_CURLY_OPEN","{",140],["T_VARIABLE","$installer",140],["T_OBJECT_OPERATOR","->",140],["T_STRING","getTable",140],"(",["T_CONSTANT_ENCAPSED_STRING","'tax_calculation_rate'",140],")","}",["T_ENCAPSED_AND_WHITESPACE","`(`tax_calculation_rate_id`,`tax_country_id`,`tax_region_id`,`tax_postcode`,`code`,`rate`,`zip_is_range`,`zip_from`,`zip_to`) values (1,'US',12,'*','US-CA-*-Rate 1','8.2500',NULL,NULL,NULL);\ninsert  into `",140],["T_CURLY_OPEN","{",141],["T_VARIABLE","$installer",141],["T_OBJECT_OPERATOR","->",141],["T_STRING","getTable",141],"(",["T_CONSTANT_ENCAPSED_STRING","'tax_calculation_rate'",141],")","}",["T_ENCAPSED_AND_WHITESPACE","`(`tax_calculation_rate_id`,`tax_country_id`,`tax_region_id`,`tax_postcode`,`code`,`rate`,`zip_is_range`,`zip_from`,`zip_to`) values (2,'US',43,'*','US-NY-*-Rate 1','8.3750',NULL,NULL,NULL);\ninsert  into `",141],["T_CURLY_OPEN","{",142],["T_VARIABLE","$installer",142],["T_OBJECT_OPERATOR","->",142],["T_STRING","getTable",142],"(",["T_CONSTANT_ENCAPSED_STRING","'tax_calculation_rule'",142],")","}",["T_ENCAPSED_AND_WHITESPACE","`(`tax_calculation_rule_id`,`code`,`priority`,`position`) values (1,'Retail Customer-Taxable Goods-Rate 1',1,1);\n\n",142],"\"",")",";",["T_WHITESPACE","\n\n",144],["T_VARIABLE","$installer",146],["T_OBJECT_OPERATOR","->",146],["T_STRING","endSetup",146],"(",")",";",["T_WHITESPACE","\n",146]]
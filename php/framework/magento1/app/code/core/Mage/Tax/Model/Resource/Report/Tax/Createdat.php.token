[["T_OPEN_TAG","<?php\n",1],["T_DOC_COMMENT","\/**\n * Magento\n *\n * NOTICE OF LICENSE\n *\n * This source file is subject to the Open Software License (OSL 3.0)\n * that is bundled with this package in the file LICENSE.txt.\n * It is also available through the world-wide-web at this URL:\n * http:\/\/opensource.org\/licenses\/osl-3.0.php\n * If you did not receive a copy of the license and are unable to\n * obtain it through the world-wide-web, please send an email\n * to license@magento.com so we can send you a copy immediately.\n *\n * DISCLAIMER\n *\n * Do not edit or add to this file if you wish to upgrade Magento to newer\n * versions in the future. If you wish to customize Magento for your\n * needs please refer to http:\/\/www.magento.com for more information.\n *\n * @category    Mage\n * @package     Mage_Tax\n * @copyright  Copyright (c) 2006-2016 X.commerce, Inc. and affiliates (http:\/\/www.magento.com)\n * @license    http:\/\/opensource.org\/licenses\/osl-3.0.php  Open Software License (OSL 3.0)\n *\/",2],["T_WHITESPACE","\n\n\n",25],["T_DOC_COMMENT","\/**\n * Tax report resource model with aggregation by created at\n *\n * @category    Mage\n * @package     Mage_Tax\n * @author      Magento Core Team <core@magentocommerce.com>\n *\/",28],["T_WHITESPACE","\n",34],["T_CLASS","class",35],["T_WHITESPACE"," ",35],["T_STRING","Mage_Tax_Model_Resource_Report_Tax_Createdat",35],["T_WHITESPACE"," ",35],["T_EXTENDS","extends",35],["T_WHITESPACE"," ",35],["T_STRING","Mage_Reports_Model_Resource_Report_Abstract",35],["T_WHITESPACE","\n",35],"{",["T_WHITESPACE","\n    ",36],["T_DOC_COMMENT","\/**\n     * Resource initialization\n     *\/",37],["T_WHITESPACE","\n    ",39],["T_PROTECTED","protected",40],["T_WHITESPACE"," ",40],["T_FUNCTION","function",40],["T_WHITESPACE"," ",40],["T_STRING","_construct",40],"(",")",["T_WHITESPACE","\n    ",40],"{",["T_WHITESPACE","\n        ",41],["T_VARIABLE","$this",42],["T_OBJECT_OPERATOR","->",42],["T_STRING","_init",42],"(",["T_CONSTANT_ENCAPSED_STRING","'tax\/tax_order_aggregated_created'",42],",",["T_WHITESPACE"," ",42],["T_CONSTANT_ENCAPSED_STRING","'id'",42],")",";",["T_WHITESPACE","\n    ",42],"}",["T_WHITESPACE","\n\n    ",43],["T_DOC_COMMENT","\/**\n     * Aggregate Tax data by order created at\n     *\n     * @param mixed $from\n     * @param mixed $to\n     * @return Mage_Tax_Model_Resource_Report_Tax_Createdat\n     *\/",45],["T_WHITESPACE","\n    ",51],["T_PUBLIC","public",52],["T_WHITESPACE"," ",52],["T_FUNCTION","function",52],["T_WHITESPACE"," ",52],["T_STRING","aggregate",52],"(",["T_VARIABLE","$from",52],["T_WHITESPACE"," ",52],"=",["T_WHITESPACE"," ",52],["T_STRING","null",52],",",["T_WHITESPACE"," ",52],["T_VARIABLE","$to",52],["T_WHITESPACE"," ",52],"=",["T_WHITESPACE"," ",52],["T_STRING","null",52],")",["T_WHITESPACE","\n    ",52],"{",["T_WHITESPACE","\n        ",53],["T_RETURN","return",54],["T_WHITESPACE"," ",54],["T_VARIABLE","$this",54],["T_OBJECT_OPERATOR","->",54],["T_STRING","_aggregateByOrder",54],"(",["T_CONSTANT_ENCAPSED_STRING","'created_at'",54],",",["T_WHITESPACE"," ",54],["T_VARIABLE","$from",54],",",["T_WHITESPACE"," ",54],["T_VARIABLE","$to",54],")",";",["T_WHITESPACE","\n    ",54],"}",["T_WHITESPACE","\n\n    ",55],["T_DOC_COMMENT","\/**\n     * Aggregate Tax data by orders\n     *\n     * @throws Exception\n     * @param string $aggregationField\n     * @param mixed $from\n     * @param mixed $to\n     * @return Mage_Tax_Model_Resource_Report_Tax_Createdat\n     *\/",57],["T_WHITESPACE","\n    ",65],["T_PROTECTED","protected",66],["T_WHITESPACE"," ",66],["T_FUNCTION","function",66],["T_WHITESPACE"," ",66],["T_STRING","_aggregateByOrder",66],"(",["T_VARIABLE","$aggregationField",66],",",["T_WHITESPACE"," ",66],["T_VARIABLE","$from",66],",",["T_WHITESPACE"," ",66],["T_VARIABLE","$to",66],")",["T_WHITESPACE","\n    ",66],"{",["T_WHITESPACE","\n        ",67],["T_COMMENT","\/\/ convert input dates to UTC to be comparable with DATETIME fields in DB\n",68],["T_WHITESPACE","        ",69],["T_VARIABLE","$from",69],["T_WHITESPACE"," ",69],"=",["T_WHITESPACE"," ",69],["T_VARIABLE","$this",69],["T_OBJECT_OPERATOR","->",69],["T_STRING","_dateToUtc",69],"(",["T_VARIABLE","$from",69],")",";",["T_WHITESPACE","\n        ",69],["T_VARIABLE","$to",70],["T_WHITESPACE"," ",70],"=",["T_WHITESPACE"," ",70],["T_VARIABLE","$this",70],["T_OBJECT_OPERATOR","->",70],["T_STRING","_dateToUtc",70],"(",["T_VARIABLE","$to",70],")",";",["T_WHITESPACE","\n\n        ",70],["T_VARIABLE","$this",72],["T_OBJECT_OPERATOR","->",72],["T_STRING","_checkDates",72],"(",["T_VARIABLE","$from",72],",",["T_WHITESPACE"," ",72],["T_VARIABLE","$to",72],")",";",["T_WHITESPACE","\n        ",72],["T_VARIABLE","$writeAdapter",73],["T_WHITESPACE"," ",73],"=",["T_WHITESPACE"," ",73],["T_VARIABLE","$this",73],["T_OBJECT_OPERATOR","->",73],["T_STRING","_getWriteAdapter",73],"(",")",";",["T_WHITESPACE","\n        ",73],["T_VARIABLE","$writeAdapter",74],["T_OBJECT_OPERATOR","->",74],["T_STRING","beginTransaction",74],"(",")",";",["T_WHITESPACE","\n\n        ",74],["T_TRY","try",76],["T_WHITESPACE"," ",76],"{",["T_WHITESPACE","\n            ",76],["T_IF","if",77],["T_WHITESPACE"," ",77],"(",["T_VARIABLE","$from",77],["T_WHITESPACE"," ",77],["T_IS_NOT_IDENTICAL","!==",77],["T_WHITESPACE"," ",77],["T_STRING","null",77],["T_WHITESPACE"," ",77],["T_BOOLEAN_OR","||",77],["T_WHITESPACE"," ",77],["T_VARIABLE","$to",77],["T_WHITESPACE"," ",77],["T_IS_NOT_IDENTICAL","!==",77],["T_WHITESPACE"," ",77],["T_STRING","null",77],")",["T_WHITESPACE"," ",77],"{",["T_WHITESPACE","\n                ",77],["T_VARIABLE","$subSelect",78],["T_WHITESPACE"," ",78],"=",["T_WHITESPACE"," ",78],["T_VARIABLE","$this",78],["T_OBJECT_OPERATOR","->",78],["T_STRING","_getTableDateRangeSelect",78],"(",["T_WHITESPACE","\n                    ",78],["T_VARIABLE","$this",79],["T_OBJECT_OPERATOR","->",79],["T_STRING","getTable",79],"(",["T_CONSTANT_ENCAPSED_STRING","'sales\/order'",79],")",",",["T_WHITESPACE","\n                    ",79],["T_CONSTANT_ENCAPSED_STRING","'created_at'",80],",",["T_WHITESPACE"," ",80],["T_CONSTANT_ENCAPSED_STRING","'updated_at'",80],",",["T_WHITESPACE"," ",80],["T_VARIABLE","$from",80],",",["T_WHITESPACE"," ",80],["T_VARIABLE","$to",80],["T_WHITESPACE","\n                ",80],")",";",["T_WHITESPACE","\n            ",81],"}",["T_WHITESPACE"," ",82],["T_ELSE","else",82],["T_WHITESPACE"," ",82],"{",["T_WHITESPACE","\n                ",82],["T_VARIABLE","$subSelect",83],["T_WHITESPACE"," ",83],"=",["T_WHITESPACE"," ",83],["T_STRING","null",83],";",["T_WHITESPACE","\n            ",83],"}",["T_WHITESPACE","\n\n            ",84],["T_VARIABLE","$this",86],["T_OBJECT_OPERATOR","->",86],["T_STRING","_clearTableByDateRange",86],"(",["T_VARIABLE","$this",86],["T_OBJECT_OPERATOR","->",86],["T_STRING","getMainTable",86],"(",")",",",["T_WHITESPACE"," ",86],["T_VARIABLE","$from",86],",",["T_WHITESPACE"," ",86],["T_VARIABLE","$to",86],",",["T_WHITESPACE"," ",86],["T_VARIABLE","$subSelect",86],")",";",["T_WHITESPACE","\n            ",86],["T_COMMENT","\/\/ convert dates from UTC to current admin timezone\n",87],["T_WHITESPACE","            ",88],["T_VARIABLE","$periodExpr",88],["T_WHITESPACE"," ",88],"=",["T_WHITESPACE"," ",88],["T_VARIABLE","$writeAdapter",88],["T_OBJECT_OPERATOR","->",88],["T_STRING","getDatePartSql",88],"(",["T_WHITESPACE","\n                ",88],["T_VARIABLE","$this",89],["T_OBJECT_OPERATOR","->",89],["T_STRING","getStoreTZOffsetQuery",89],"(",["T_WHITESPACE","\n                    ",89],["T_ARRAY","array",90],"(",["T_CONSTANT_ENCAPSED_STRING","'e'",90],["T_WHITESPACE"," ",90],["T_DOUBLE_ARROW","=>",90],["T_WHITESPACE"," ",90],["T_VARIABLE","$this",90],["T_OBJECT_OPERATOR","->",90],["T_STRING","getTable",90],"(",["T_CONSTANT_ENCAPSED_STRING","'sales\/order'",90],")",")",",",["T_WHITESPACE","\n                    ",90],["T_CONSTANT_ENCAPSED_STRING","'e.'",91],["T_WHITESPACE"," ",91],".",["T_WHITESPACE"," ",91],["T_VARIABLE","$aggregationField",91],",",["T_WHITESPACE","\n                    ",91],["T_VARIABLE","$from",92],",",["T_WHITESPACE"," ",92],["T_VARIABLE","$to",92],["T_WHITESPACE","\n                ",92],")",["T_WHITESPACE","\n            ",93],")",";",["T_WHITESPACE","\n\n            ",94],["T_VARIABLE","$columns",96],["T_WHITESPACE"," ",96],"=",["T_WHITESPACE"," ",96],["T_ARRAY","array",96],"(",["T_WHITESPACE","\n                ",96],["T_CONSTANT_ENCAPSED_STRING","'period'",97],["T_WHITESPACE","                ",97],["T_DOUBLE_ARROW","=>",97],["T_WHITESPACE"," ",97],["T_VARIABLE","$periodExpr",97],",",["T_WHITESPACE","\n                ",97],["T_CONSTANT_ENCAPSED_STRING","'store_id'",98],["T_WHITESPACE","              ",98],["T_DOUBLE_ARROW","=>",98],["T_WHITESPACE"," ",98],["T_CONSTANT_ENCAPSED_STRING","'e.store_id'",98],",",["T_WHITESPACE","\n                ",98],["T_CONSTANT_ENCAPSED_STRING","'code'",99],["T_WHITESPACE","                  ",99],["T_DOUBLE_ARROW","=>",99],["T_WHITESPACE"," ",99],["T_CONSTANT_ENCAPSED_STRING","'tax.code'",99],",",["T_WHITESPACE","\n                ",99],["T_CONSTANT_ENCAPSED_STRING","'order_status'",100],["T_WHITESPACE","          ",100],["T_DOUBLE_ARROW","=>",100],["T_WHITESPACE"," ",100],["T_CONSTANT_ENCAPSED_STRING","'e.status'",100],",",["T_WHITESPACE","\n                ",100],["T_CONSTANT_ENCAPSED_STRING","'percent'",101],["T_WHITESPACE","               ",101],["T_DOUBLE_ARROW","=>",101],["T_WHITESPACE"," ",101],["T_CONSTANT_ENCAPSED_STRING","'MAX(tax.'",101],["T_WHITESPACE"," ",101],".",["T_WHITESPACE"," ",101],["T_VARIABLE","$writeAdapter",101],["T_OBJECT_OPERATOR","->",101],["T_STRING","quoteIdentifier",101],"(",["T_CONSTANT_ENCAPSED_STRING","'percent'",101],")",["T_WHITESPACE"," ",101],".",["T_CONSTANT_ENCAPSED_STRING","')'",101],",",["T_WHITESPACE","\n                ",101],["T_CONSTANT_ENCAPSED_STRING","'orders_count'",102],["T_WHITESPACE","          ",102],["T_DOUBLE_ARROW","=>",102],["T_WHITESPACE"," ",102],["T_CONSTANT_ENCAPSED_STRING","'COUNT(DISTINCT e.entity_id)'",102],",",["T_WHITESPACE","\n                ",102],["T_CONSTANT_ENCAPSED_STRING","'tax_base_amount_sum'",103],["T_WHITESPACE","   ",103],["T_DOUBLE_ARROW","=>",103],["T_WHITESPACE"," ",103],["T_CONSTANT_ENCAPSED_STRING","'SUM(tax.base_amount * e.base_to_global_rate)'",103],["T_WHITESPACE","\n            ",103],")",";",["T_WHITESPACE","\n\n            ",104],["T_VARIABLE","$select",106],["T_WHITESPACE"," ",106],"=",["T_WHITESPACE"," ",106],["T_VARIABLE","$writeAdapter",106],["T_OBJECT_OPERATOR","->",106],["T_STRING","select",106],"(",")",";",["T_WHITESPACE","\n            ",106],["T_VARIABLE","$select",107],["T_OBJECT_OPERATOR","->",107],["T_STRING","from",107],"(",["T_ARRAY","array",107],"(",["T_CONSTANT_ENCAPSED_STRING","'tax'",107],["T_WHITESPACE"," ",107],["T_DOUBLE_ARROW","=>",107],["T_WHITESPACE"," ",107],["T_VARIABLE","$this",107],["T_OBJECT_OPERATOR","->",107],["T_STRING","getTable",107],"(",["T_CONSTANT_ENCAPSED_STRING","'tax\/sales_order_tax'",107],")",")",",",["T_WHITESPACE"," ",107],["T_VARIABLE","$columns",107],")",["T_WHITESPACE","\n                ",107],["T_OBJECT_OPERATOR","->",108],["T_STRING","joinInner",108],"(",["T_ARRAY","array",108],"(",["T_CONSTANT_ENCAPSED_STRING","'e'",108],["T_WHITESPACE"," ",108],["T_DOUBLE_ARROW","=>",108],["T_WHITESPACE"," ",108],["T_VARIABLE","$this",108],["T_OBJECT_OPERATOR","->",108],["T_STRING","getTable",108],"(",["T_CONSTANT_ENCAPSED_STRING","'sales\/order'",108],")",")",",",["T_WHITESPACE"," ",108],["T_CONSTANT_ENCAPSED_STRING","'e.entity_id = tax.order_id'",108],",",["T_WHITESPACE"," ",108],["T_ARRAY","array",108],"(",")",")",["T_WHITESPACE","\n                ",108],["T_OBJECT_OPERATOR","->",109],["T_STRING","useStraightJoin",109],"(",")",";",["T_WHITESPACE","\n\n            ",109],["T_VARIABLE","$select",111],["T_OBJECT_OPERATOR","->",111],["T_STRING","where",111],"(",["T_CONSTANT_ENCAPSED_STRING","'e.state NOT IN (?)'",111],",",["T_WHITESPACE"," ",111],["T_ARRAY","array",111],"(",["T_WHITESPACE","\n                ",111],["T_STRING","Mage_Sales_Model_Order",112],["T_DOUBLE_COLON","::",112],["T_STRING","STATE_PENDING_PAYMENT",112],",",["T_WHITESPACE","\n                ",112],["T_STRING","Mage_Sales_Model_Order",113],["T_DOUBLE_COLON","::",113],["T_STRING","STATE_NEW",113],["T_WHITESPACE","\n            ",113],")",")",";",["T_WHITESPACE","\n\n            ",114],["T_IF","if",116],["T_WHITESPACE"," ",116],"(",["T_VARIABLE","$subSelect",116],["T_WHITESPACE"," ",116],["T_IS_NOT_IDENTICAL","!==",116],["T_WHITESPACE"," ",116],["T_STRING","null",116],")",["T_WHITESPACE"," ",116],"{",["T_WHITESPACE","\n                ",116],["T_VARIABLE","$select",117],["T_OBJECT_OPERATOR","->",117],["T_STRING","having",117],"(",["T_VARIABLE","$this",117],["T_OBJECT_OPERATOR","->",117],["T_STRING","_makeConditionFromDateRangeSelect",117],"(",["T_VARIABLE","$subSelect",117],",",["T_WHITESPACE"," ",117],["T_CONSTANT_ENCAPSED_STRING","'period'",117],")",")",";",["T_WHITESPACE","\n            ",117],"}",["T_WHITESPACE","\n\n            ",118],["T_VARIABLE","$select",120],["T_OBJECT_OPERATOR","->",120],["T_STRING","group",120],"(",["T_ARRAY","array",120],"(",["T_VARIABLE","$periodExpr",120],",",["T_WHITESPACE"," ",120],["T_CONSTANT_ENCAPSED_STRING","'e.store_id'",120],",",["T_WHITESPACE"," ",120],["T_CONSTANT_ENCAPSED_STRING","'code'",120],",",["T_WHITESPACE"," ",120],["T_CONSTANT_ENCAPSED_STRING","'tax.percent'",120],",",["T_WHITESPACE"," ",120],["T_CONSTANT_ENCAPSED_STRING","'e.status'",120],")",")",";",["T_WHITESPACE","\n\n            ",120],["T_VARIABLE","$insertQuery",122],["T_WHITESPACE"," ",122],"=",["T_WHITESPACE"," ",122],["T_VARIABLE","$writeAdapter",122],["T_OBJECT_OPERATOR","->",122],["T_STRING","insertFromSelect",122],"(",["T_VARIABLE","$select",122],",",["T_WHITESPACE"," ",122],["T_VARIABLE","$this",122],["T_OBJECT_OPERATOR","->",122],["T_STRING","getMainTable",122],"(",")",",",["T_WHITESPACE"," ",122],["T_STRING","array_keys",122],"(",["T_VARIABLE","$columns",122],")",")",";",["T_WHITESPACE","\n            ",122],["T_VARIABLE","$writeAdapter",123],["T_OBJECT_OPERATOR","->",123],["T_STRING","query",123],"(",["T_VARIABLE","$insertQuery",123],")",";",["T_WHITESPACE","\n\n            ",123],["T_VARIABLE","$select",125],["T_OBJECT_OPERATOR","->",125],["T_STRING","reset",125],"(",")",";",["T_WHITESPACE","\n\n            ",125],["T_VARIABLE","$columns",127],["T_WHITESPACE"," ",127],"=",["T_WHITESPACE"," ",127],["T_ARRAY","array",127],"(",["T_WHITESPACE","\n                ",127],["T_CONSTANT_ENCAPSED_STRING","'period'",128],["T_WHITESPACE","                ",128],["T_DOUBLE_ARROW","=>",128],["T_WHITESPACE"," ",128],["T_CONSTANT_ENCAPSED_STRING","'period'",128],",",["T_WHITESPACE","\n                ",128],["T_CONSTANT_ENCAPSED_STRING","'store_id'",129],["T_WHITESPACE","              ",129],["T_DOUBLE_ARROW","=>",129],["T_WHITESPACE"," ",129],["T_NEW","new",129],["T_WHITESPACE"," ",129],["T_STRING","Zend_Db_Expr",129],"(",["T_STRING","Mage_Core_Model_App",129],["T_DOUBLE_COLON","::",129],["T_STRING","ADMIN_STORE_ID",129],")",",",["T_WHITESPACE","\n                ",129],["T_CONSTANT_ENCAPSED_STRING","'code'",130],["T_WHITESPACE","                  ",130],["T_DOUBLE_ARROW","=>",130],["T_WHITESPACE"," ",130],["T_CONSTANT_ENCAPSED_STRING","'code'",130],",",["T_WHITESPACE","\n                ",130],["T_CONSTANT_ENCAPSED_STRING","'order_status'",131],["T_WHITESPACE","          ",131],["T_DOUBLE_ARROW","=>",131],["T_WHITESPACE"," ",131],["T_CONSTANT_ENCAPSED_STRING","'order_status'",131],",",["T_WHITESPACE","\n                ",131],["T_CONSTANT_ENCAPSED_STRING","'percent'",132],["T_WHITESPACE","               ",132],["T_DOUBLE_ARROW","=>",132],["T_WHITESPACE"," ",132],["T_CONSTANT_ENCAPSED_STRING","'MAX('",132],["T_WHITESPACE"," ",132],".",["T_WHITESPACE"," ",132],["T_VARIABLE","$writeAdapter",132],["T_OBJECT_OPERATOR","->",132],["T_STRING","quoteIdentifier",132],"(",["T_CONSTANT_ENCAPSED_STRING","'percent'",132],")",["T_WHITESPACE"," ",132],".",["T_WHITESPACE"," ",132],["T_CONSTANT_ENCAPSED_STRING","')'",132],",",["T_WHITESPACE","\n                ",132],["T_CONSTANT_ENCAPSED_STRING","'orders_count'",133],["T_WHITESPACE","          ",133],["T_DOUBLE_ARROW","=>",133],["T_WHITESPACE"," ",133],["T_CONSTANT_ENCAPSED_STRING","'SUM(orders_count)'",133],",",["T_WHITESPACE","\n                ",133],["T_CONSTANT_ENCAPSED_STRING","'tax_base_amount_sum'",134],["T_WHITESPACE","   ",134],["T_DOUBLE_ARROW","=>",134],["T_WHITESPACE"," ",134],["T_CONSTANT_ENCAPSED_STRING","'SUM(tax_base_amount_sum)'",134],["T_WHITESPACE","\n            ",134],")",";",["T_WHITESPACE","\n\n            ",135],["T_VARIABLE","$select",137],["T_WHITESPACE","\n                ",137],["T_OBJECT_OPERATOR","->",138],["T_STRING","from",138],"(",["T_VARIABLE","$this",138],["T_OBJECT_OPERATOR","->",138],["T_STRING","getMainTable",138],"(",")",",",["T_WHITESPACE"," ",138],["T_VARIABLE","$columns",138],")",["T_WHITESPACE","\n                ",138],["T_OBJECT_OPERATOR","->",139],["T_STRING","where",139],"(",["T_CONSTANT_ENCAPSED_STRING","'store_id <> ?'",139],",",["T_WHITESPACE"," ",139],["T_LNUMBER","0",139],")",";",["T_WHITESPACE","\n\n            ",139],["T_IF","if",141],["T_WHITESPACE"," ",141],"(",["T_VARIABLE","$subSelect",141],["T_WHITESPACE"," ",141],["T_IS_NOT_IDENTICAL","!==",141],["T_WHITESPACE"," ",141],["T_STRING","null",141],")",["T_WHITESPACE"," ",141],"{",["T_WHITESPACE","\n                ",141],["T_VARIABLE","$select",142],["T_OBJECT_OPERATOR","->",142],["T_STRING","where",142],"(",["T_VARIABLE","$this",142],["T_OBJECT_OPERATOR","->",142],["T_STRING","_makeConditionFromDateRangeSelect",142],"(",["T_VARIABLE","$subSelect",142],",",["T_WHITESPACE"," ",142],["T_CONSTANT_ENCAPSED_STRING","'period'",142],")",")",";",["T_WHITESPACE","\n            ",142],"}",["T_WHITESPACE","\n\n            ",143],["T_VARIABLE","$select",145],["T_OBJECT_OPERATOR","->",145],["T_STRING","group",145],"(",["T_ARRAY","array",145],"(",["T_CONSTANT_ENCAPSED_STRING","'period'",145],",",["T_WHITESPACE"," ",145],["T_CONSTANT_ENCAPSED_STRING","'code'",145],",",["T_WHITESPACE"," ",145],["T_CONSTANT_ENCAPSED_STRING","'percent'",145],",",["T_WHITESPACE"," ",145],["T_CONSTANT_ENCAPSED_STRING","'order_status'",145],")",")",";",["T_WHITESPACE","\n            ",145],["T_VARIABLE","$insertQuery",146],["T_WHITESPACE"," ",146],"=",["T_WHITESPACE"," ",146],["T_VARIABLE","$writeAdapter",146],["T_OBJECT_OPERATOR","->",146],["T_STRING","insertFromSelect",146],"(",["T_VARIABLE","$select",146],",",["T_WHITESPACE"," ",146],["T_VARIABLE","$this",146],["T_OBJECT_OPERATOR","->",146],["T_STRING","getMainTable",146],"(",")",",",["T_WHITESPACE"," ",146],["T_STRING","array_keys",146],"(",["T_VARIABLE","$columns",146],")",")",";",["T_WHITESPACE","\n            ",146],["T_VARIABLE","$writeAdapter",147],["T_OBJECT_OPERATOR","->",147],["T_STRING","query",147],"(",["T_VARIABLE","$insertQuery",147],")",";",["T_WHITESPACE","\n            ",147],["T_VARIABLE","$writeAdapter",148],["T_OBJECT_OPERATOR","->",148],["T_STRING","commit",148],"(",")",";",["T_WHITESPACE","\n        ",148],"}",["T_WHITESPACE"," ",149],["T_CATCH","catch",149],["T_WHITESPACE"," ",149],"(",["T_STRING","Exception",149],["T_WHITESPACE"," ",149],["T_VARIABLE","$e",149],")",["T_WHITESPACE"," ",149],"{",["T_WHITESPACE","\n            ",149],["T_VARIABLE","$writeAdapter",150],["T_OBJECT_OPERATOR","->",150],["T_STRING","rollBack",150],"(",")",";",["T_WHITESPACE","\n            ",150],["T_THROW","throw",151],["T_WHITESPACE"," ",151],["T_VARIABLE","$e",151],";",["T_WHITESPACE","\n        ",151],"}",["T_WHITESPACE","\n\n        ",152],["T_RETURN","return",154],["T_WHITESPACE"," ",154],["T_VARIABLE","$this",154],";",["T_WHITESPACE","\n    ",154],"}",["T_WHITESPACE","\n",155],"}",["T_WHITESPACE","\n",156]]
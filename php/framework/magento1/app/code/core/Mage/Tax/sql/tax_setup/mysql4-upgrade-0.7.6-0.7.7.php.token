[["T_OPEN_TAG","<?php\n",1],["T_DOC_COMMENT","\/**\n * Magento\n *\n * NOTICE OF LICENSE\n *\n * This source file is subject to the Open Software License (OSL 3.0)\n * that is bundled with this package in the file LICENSE.txt.\n * It is also available through the world-wide-web at this URL:\n * http:\/\/opensource.org\/licenses\/osl-3.0.php\n * If you did not receive a copy of the license and are unable to\n * obtain it through the world-wide-web, please send an email\n * to license@magento.com so we can send you a copy immediately.\n *\n * DISCLAIMER\n *\n * Do not edit or add to this file if you wish to upgrade Magento to newer\n * versions in the future. If you wish to customize Magento for your\n * needs please refer to http:\/\/www.magento.com for more information.\n *\n * @category    Mage\n * @package     Mage_Tax\n * @copyright  Copyright (c) 2006-2016 X.commerce, Inc. and affiliates (http:\/\/www.magento.com)\n * @license    http:\/\/opensource.org\/licenses\/osl-3.0.php  Open Software License (OSL 3.0)\n *\/",2],["T_WHITESPACE","\n\n",25],["T_COMMENT","\/* @var $installer Mage_Tax_Model_Mysql4_Setup *\/",27],["T_WHITESPACE","\n",27],["T_VARIABLE","$installer",28],["T_WHITESPACE"," ",28],"=",["T_WHITESPACE"," ",28],["T_VARIABLE","$this",28],";",["T_WHITESPACE","\n\n\n",28],["T_VARIABLE","$installer",31],["T_OBJECT_OPERATOR","->",31],["T_STRING","startSetup",31],"(",")",";",["T_WHITESPACE","\n\n",31],["T_VARIABLE","$installer",33],["T_OBJECT_OPERATOR","->",33],["T_STRING","run",33],"(","\"",["T_ENCAPSED_AND_WHITESPACE","\n CREATE TABLE `",33],["T_CURLY_OPEN","{",34],["T_VARIABLE","$installer",34],["T_OBJECT_OPERATOR","->",34],["T_STRING","getTable",34],"(",["T_CONSTANT_ENCAPSED_STRING","'tax_calculation_rate'",34],")","}",["T_ENCAPSED_AND_WHITESPACE","` (\n`tax_calculation_rate_id` INT NOT NULL AUTO_INCREMENT ,\n`tax_country_id` CHAR( 2 ) NOT NULL ,\n`tax_region_id` MEDIUMINT NOT NULL ,\n`tax_postcode` VARCHAR( 12 ) NOT NULL ,\n`code` VARCHAR( 255 ) NOT NULL ,\n`rate` DECIMAL( 12, 4 ) NOT NULL ,\nPRIMARY KEY ( `tax_calculation_rate_id` ),\nKEY `IDX_TAX_CALCULATION_RATE` (`tax_country_id`, `tax_region_id`, `tax_postcode`),\nKEY `IDX_TAX_CALCULATION_RATE_CODE` (`code`)\n) ENGINE = InnoDB DEFAULT CHARSET = utf8;\n\n CREATE TABLE `",34],["T_CURLY_OPEN","{",46],["T_VARIABLE","$installer",46],["T_OBJECT_OPERATOR","->",46],["T_STRING","getTable",46],"(",["T_CONSTANT_ENCAPSED_STRING","'tax_calculation_rate_title'",46],")","}",["T_ENCAPSED_AND_WHITESPACE","` (\n`tax_calculation_rate_title_id` INT NOT NULL AUTO_INCREMENT ,\n`tax_calculation_rate_id` INT NOT NULL ,\n`store_id` SMALLINT( 5 ) UNSIGNED NOT NULL ,\n`value` VARCHAR( 255 ) NOT NULL ,\nPRIMARY KEY ( `tax_calculation_rate_title_id` ),\nKEY `IDX_TAX_CALCULATION_RATE_TITLE` (`tax_calculation_rate_id`, `store_id`),\nKEY `FK_TAX_CALCULATION_RATE_TITLE_RATE` (`tax_calculation_rate_id`),\nKEY `FK_TAX_CALCULATION_RATE_TITLE_STORE` (`store_id`)\n) ENGINE = InnoDB DEFAULT CHARSET = utf8;\n\n CREATE TABLE `",46],["T_CURLY_OPEN","{",57],["T_VARIABLE","$installer",57],["T_OBJECT_OPERATOR","->",57],["T_STRING","getTable",57],"(",["T_CONSTANT_ENCAPSED_STRING","'tax_calculation_rule'",57],")","}",["T_ENCAPSED_AND_WHITESPACE","` (\n`tax_calculation_rule_id` INT NOT NULL AUTO_INCREMENT ,\n`code` VARCHAR( 255 ) NOT NULL ,\n`priority` MEDIUMINT NOT NULL ,\n`position` MEDIUMINT NOT NULL ,\nPRIMARY KEY ( `tax_calculation_rule_id` ),\nKEY `IDX_TAX_CALCULATION_RULE` (`priority`, `position`, `tax_calculation_rule_id`),\nKEY `IDX_TAX_CALCULATION_RULE_CODE` (`code`)\n) ENGINE = InnoDB DEFAULT CHARSET = utf8;\n\n CREATE TABLE `",57],["T_CURLY_OPEN","{",67],["T_VARIABLE","$installer",67],["T_OBJECT_OPERATOR","->",67],["T_STRING","getTable",67],"(",["T_CONSTANT_ENCAPSED_STRING","'tax_calculation'",67],")","}",["T_ENCAPSED_AND_WHITESPACE","` (\n`tax_calculation_rate_id` INT NOT NULL,\n`tax_calculation_rule_id` INT NOT NULL ,\n`customer_tax_class_id`   SMALLINT( 6 ) NOT NULL ,\n`product_tax_class_id`    SMALLINT( 6 ) NOT NULL ,\nKEY `FK_TAX_CALCULATION_RULE` (`tax_calculation_rule_id`),\nKEY `FK_TAX_CALCULATION_RATE` (`tax_calculation_rate_id`),\nKEY `FK_TAX_CALCULATION_CTC` (`customer_tax_class_id`),\nKEY `FK_TAX_CALCULATION_PTC` (`product_tax_class_id`),\nKEY `IDX_TAX_CALCULATION` (`tax_calculation_rate_id`, `customer_tax_class_id`, `product_tax_class_id`)\n) ENGINE = InnoDB DEFAULT CHARSET = utf8;\n",67],"\"",")",";",["T_WHITESPACE","\n\n\n",78],["T_VARIABLE","$installer",81],["T_OBJECT_OPERATOR","->",81],["T_STRING","getConnection",81],"(",")",["T_OBJECT_OPERATOR","->",81],["T_STRING","addConstraint",81],"(",["T_CONSTANT_ENCAPSED_STRING","'FK_TAX_CALCULATION_RATE_TITLE_RATE'",81],",",["T_WHITESPACE"," ",81],["T_VARIABLE","$installer",81],["T_OBJECT_OPERATOR","->",81],["T_STRING","getTable",81],"(",["T_CONSTANT_ENCAPSED_STRING","'tax_calculation_rate_title'",81],")",",",["T_WHITESPACE"," ",81],["T_CONSTANT_ENCAPSED_STRING","'tax_calculation_rate_id'",81],",",["T_WHITESPACE"," ",81],["T_VARIABLE","$installer",81],["T_OBJECT_OPERATOR","->",81],["T_STRING","getTable",81],"(",["T_CONSTANT_ENCAPSED_STRING","'tax_calculation_rate'",81],")",",",["T_WHITESPACE"," ",81],["T_CONSTANT_ENCAPSED_STRING","'tax_calculation_rate_id'",81],")",";",["T_WHITESPACE","\n",81],["T_VARIABLE","$installer",82],["T_OBJECT_OPERATOR","->",82],["T_STRING","getConnection",82],"(",")",["T_OBJECT_OPERATOR","->",82],["T_STRING","addConstraint",82],"(",["T_CONSTANT_ENCAPSED_STRING","'FK_TAX_CALCULATION_RATE_TITLE_STORE'",82],",",["T_WHITESPACE"," ",82],["T_VARIABLE","$installer",82],["T_OBJECT_OPERATOR","->",82],["T_STRING","getTable",82],"(",["T_CONSTANT_ENCAPSED_STRING","'tax_calculation_rate_title'",82],")",",",["T_WHITESPACE"," ",82],["T_CONSTANT_ENCAPSED_STRING","'store_id'",82],",",["T_WHITESPACE"," ",82],["T_VARIABLE","$installer",82],["T_OBJECT_OPERATOR","->",82],["T_STRING","getTable",82],"(",["T_CONSTANT_ENCAPSED_STRING","'core_store'",82],")",",",["T_WHITESPACE"," ",82],["T_CONSTANT_ENCAPSED_STRING","'store_id'",82],")",";",["T_WHITESPACE","\n\n",82],["T_VARIABLE","$installer",84],["T_OBJECT_OPERATOR","->",84],["T_STRING","getConnection",84],"(",")",["T_OBJECT_OPERATOR","->",84],["T_STRING","addConstraint",84],"(",["T_CONSTANT_ENCAPSED_STRING","'FK_TAX_CALCULATION_RULE'",84],",",["T_WHITESPACE"," ",84],["T_VARIABLE","$installer",84],["T_OBJECT_OPERATOR","->",84],["T_STRING","getTable",84],"(",["T_CONSTANT_ENCAPSED_STRING","'tax_calculation'",84],")",",",["T_WHITESPACE"," ",84],["T_CONSTANT_ENCAPSED_STRING","'tax_calculation_rule_id'",84],",",["T_WHITESPACE"," ",84],["T_VARIABLE","$installer",84],["T_OBJECT_OPERATOR","->",84],["T_STRING","getTable",84],"(",["T_CONSTANT_ENCAPSED_STRING","'tax_calculation_rule'",84],")",",",["T_WHITESPACE"," ",84],["T_CONSTANT_ENCAPSED_STRING","'tax_calculation_rule_id'",84],")",";",["T_WHITESPACE","\n",84],["T_VARIABLE","$installer",85],["T_OBJECT_OPERATOR","->",85],["T_STRING","getConnection",85],"(",")",["T_OBJECT_OPERATOR","->",85],["T_STRING","addConstraint",85],"(",["T_CONSTANT_ENCAPSED_STRING","'FK_TAX_CALCULATION_RATE'",85],",",["T_WHITESPACE"," ",85],["T_VARIABLE","$installer",85],["T_OBJECT_OPERATOR","->",85],["T_STRING","getTable",85],"(",["T_CONSTANT_ENCAPSED_STRING","'tax_calculation'",85],")",",",["T_WHITESPACE"," ",85],["T_CONSTANT_ENCAPSED_STRING","'tax_calculation_rate_id'",85],",",["T_WHITESPACE"," ",85],["T_VARIABLE","$installer",85],["T_OBJECT_OPERATOR","->",85],["T_STRING","getTable",85],"(",["T_CONSTANT_ENCAPSED_STRING","'tax_calculation_rate'",85],")",",",["T_WHITESPACE"," ",85],["T_CONSTANT_ENCAPSED_STRING","'tax_calculation_rate_id'",85],")",";",["T_WHITESPACE","\n",85],["T_VARIABLE","$installer",86],["T_OBJECT_OPERATOR","->",86],["T_STRING","getConnection",86],"(",")",["T_OBJECT_OPERATOR","->",86],["T_STRING","addConstraint",86],"(",["T_CONSTANT_ENCAPSED_STRING","'FK_TAX_CALCULATION_CTC'",86],",",["T_WHITESPACE"," ",86],["T_VARIABLE","$installer",86],["T_OBJECT_OPERATOR","->",86],["T_STRING","getTable",86],"(",["T_CONSTANT_ENCAPSED_STRING","'tax_calculation'",86],")",",",["T_WHITESPACE"," ",86],["T_CONSTANT_ENCAPSED_STRING","'customer_tax_class_id'",86],",",["T_WHITESPACE"," ",86],["T_VARIABLE","$installer",86],["T_OBJECT_OPERATOR","->",86],["T_STRING","getTable",86],"(",["T_CONSTANT_ENCAPSED_STRING","'tax_class'",86],")",",",["T_WHITESPACE"," ",86],["T_CONSTANT_ENCAPSED_STRING","'class_id'",86],")",";",["T_WHITESPACE","\n",86],["T_VARIABLE","$installer",87],["T_OBJECT_OPERATOR","->",87],["T_STRING","getConnection",87],"(",")",["T_OBJECT_OPERATOR","->",87],["T_STRING","addConstraint",87],"(",["T_CONSTANT_ENCAPSED_STRING","'FK_TAX_CALCULATION_PTC'",87],",",["T_WHITESPACE"," ",87],["T_VARIABLE","$installer",87],["T_OBJECT_OPERATOR","->",87],["T_STRING","getTable",87],"(",["T_CONSTANT_ENCAPSED_STRING","'tax_calculation'",87],")",",",["T_WHITESPACE"," ",87],["T_CONSTANT_ENCAPSED_STRING","'product_tax_class_id'",87],",",["T_WHITESPACE"," ",87],["T_VARIABLE","$installer",87],["T_OBJECT_OPERATOR","->",87],["T_STRING","getTable",87],"(",["T_CONSTANT_ENCAPSED_STRING","'tax_class'",87],")",",",["T_WHITESPACE"," ",87],["T_CONSTANT_ENCAPSED_STRING","'class_id'",87],")",";",["T_WHITESPACE","\n\n\n",87],["T_VARIABLE","$installer",90],["T_OBJECT_OPERATOR","->",90],["T_STRING","convertOldTaxData",90],"(",")",";",["T_WHITESPACE","\n\n",90],["T_VARIABLE","$installer",92],["T_OBJECT_OPERATOR","->",92],["T_STRING","run",92],"(","\"",["T_ENCAPSED_AND_WHITESPACE","\nDROP TABLE `",92],["T_CURLY_OPEN","{",93],["T_VARIABLE","$installer",93],["T_OBJECT_OPERATOR","->",93],["T_STRING","getTable",93],"(",["T_CONSTANT_ENCAPSED_STRING","'tax_rule'",93],")","}",["T_ENCAPSED_AND_WHITESPACE","`;\nDROP TABLE `",93],["T_CURLY_OPEN","{",94],["T_VARIABLE","$installer",94],["T_OBJECT_OPERATOR","->",94],["T_STRING","getTable",94],"(",["T_CONSTANT_ENCAPSED_STRING","'tax_rate_type'",94],")","}",["T_ENCAPSED_AND_WHITESPACE","`;\nDROP TABLE `",94],["T_CURLY_OPEN","{",95],["T_VARIABLE","$installer",95],["T_OBJECT_OPERATOR","->",95],["T_STRING","getTable",95],"(",["T_CONSTANT_ENCAPSED_STRING","'tax_rate_data'",95],")","}",["T_ENCAPSED_AND_WHITESPACE","`;\nDROP TABLE `",95],["T_CURLY_OPEN","{",96],["T_VARIABLE","$installer",96],["T_OBJECT_OPERATOR","->",96],["T_STRING","getTable",96],"(",["T_CONSTANT_ENCAPSED_STRING","'tax_rate'",96],")","}",["T_ENCAPSED_AND_WHITESPACE","`;\n",96],"\"",")",";",["T_WHITESPACE","\n\n",97],["T_VARIABLE","$installer",99],["T_OBJECT_OPERATOR","->",99],["T_STRING","endSetup",99],"(",")",";",["T_WHITESPACE","\n",99]]
[["T_OPEN_TAG","<?php\n",1],["T_DOC_COMMENT","\/**\n * Magento\n *\n * NOTICE OF LICENSE\n *\n * This source file is subject to the Open Software License (OSL 3.0)\n * that is bundled with this package in the file LICENSE.txt.\n * It is also available through the world-wide-web at this URL:\n * http:\/\/opensource.org\/licenses\/osl-3.0.php\n * If you did not receive a copy of the license and are unable to\n * obtain it through the world-wide-web, please send an email\n * to license@magento.com so we can send you a copy immediately.\n *\n * DISCLAIMER\n *\n * Do not edit or add to this file if you wish to upgrade Magento to newer\n * versions in the future. If you wish to customize Magento for your\n * needs please refer to http:\/\/www.magento.com for more information.\n *\n * @category    Mage\n * @package     Mage_Sales\n * @copyright  Copyright (c) 2006-2016 X.commerce, Inc. and affiliates (http:\/\/www.magento.com)\n * @license    http:\/\/opensource.org\/licenses\/osl-3.0.php  Open Software License (OSL 3.0)\n *\/",2],["T_WHITESPACE","\n\n\n",25],["T_DOC_COMMENT","\/**\n * Sales Controller\n *\n * @category    Mage\n * @package     Mage_Sales\n * @author      Magento Core Team <core@magentocommerce.com>\n *\/",28],["T_WHITESPACE","\n",34],["T_ABSTRACT","abstract",35],["T_WHITESPACE"," ",35],["T_CLASS","class",35],["T_WHITESPACE"," ",35],["T_STRING","Mage_Sales_Controller_Abstract",35],["T_WHITESPACE"," ",35],["T_EXTENDS","extends",35],["T_WHITESPACE"," ",35],["T_STRING","Mage_Core_Controller_Front_Action",35],["T_WHITESPACE","\n",35],"{",["T_WHITESPACE","\n    ",36],["T_DOC_COMMENT","\/**\n     * Check order view availability\n     *\n     * @param   Mage_Sales_Model_Order $order\n     * @return  bool\n     *\/",37],["T_WHITESPACE","\n    ",42],["T_PROTECTED","protected",43],["T_WHITESPACE"," ",43],["T_FUNCTION","function",43],["T_WHITESPACE"," ",43],["T_STRING","_canViewOrder",43],"(",["T_VARIABLE","$order",43],")",["T_WHITESPACE","\n    ",43],"{",["T_WHITESPACE","\n        ",44],["T_VARIABLE","$customerId",45],["T_WHITESPACE"," ",45],"=",["T_WHITESPACE"," ",45],["T_STRING","Mage",45],["T_DOUBLE_COLON","::",45],["T_STRING","getSingleton",45],"(",["T_CONSTANT_ENCAPSED_STRING","'customer\/session'",45],")",["T_OBJECT_OPERATOR","->",45],["T_STRING","getCustomerId",45],"(",")",";",["T_WHITESPACE","\n        ",45],["T_VARIABLE","$availableStates",46],["T_WHITESPACE"," ",46],"=",["T_WHITESPACE"," ",46],["T_STRING","Mage",46],["T_DOUBLE_COLON","::",46],["T_STRING","getSingleton",46],"(",["T_CONSTANT_ENCAPSED_STRING","'sales\/order_config'",46],")",["T_OBJECT_OPERATOR","->",46],["T_STRING","getVisibleOnFrontStates",46],"(",")",";",["T_WHITESPACE","\n        ",46],["T_IF","if",47],["T_WHITESPACE"," ",47],"(",["T_VARIABLE","$order",47],["T_OBJECT_OPERATOR","->",47],["T_STRING","getId",47],"(",")",["T_WHITESPACE"," ",47],["T_BOOLEAN_AND","&&",47],["T_WHITESPACE"," ",47],["T_VARIABLE","$order",47],["T_OBJECT_OPERATOR","->",47],["T_STRING","getCustomerId",47],"(",")",["T_WHITESPACE"," ",47],["T_BOOLEAN_AND","&&",47],["T_WHITESPACE"," ",47],"(",["T_VARIABLE","$order",47],["T_OBJECT_OPERATOR","->",47],["T_STRING","getCustomerId",47],"(",")",["T_WHITESPACE"," ",47],["T_IS_EQUAL","==",47],["T_WHITESPACE"," ",47],["T_VARIABLE","$customerId",47],")",["T_WHITESPACE","\n            ",47],["T_BOOLEAN_AND","&&",48],["T_WHITESPACE"," ",48],["T_STRING","in_array",48],"(",["T_VARIABLE","$order",48],["T_OBJECT_OPERATOR","->",48],["T_STRING","getState",48],"(",")",",",["T_WHITESPACE"," ",48],["T_VARIABLE","$availableStates",48],",",["T_WHITESPACE"," ",48],["T_VARIABLE","$strict",48],["T_WHITESPACE"," ",48],"=",["T_WHITESPACE"," ",48],["T_STRING","true",48],")",["T_WHITESPACE","\n            ",48],")",["T_WHITESPACE"," ",49],"{",["T_WHITESPACE","\n            ",49],["T_RETURN","return",50],["T_WHITESPACE"," ",50],["T_STRING","true",50],";",["T_WHITESPACE","\n        ",50],"}",["T_WHITESPACE","\n        ",51],["T_RETURN","return",52],["T_WHITESPACE"," ",52],["T_STRING","false",52],";",["T_WHITESPACE","\n    ",52],"}",["T_WHITESPACE","\n\n    ",53],["T_DOC_COMMENT","\/**\n     * Init layout, messages and set active block for customer\n     *\n     * @return null\n     *\/",55],["T_WHITESPACE","\n    ",59],["T_PROTECTED","protected",60],["T_WHITESPACE"," ",60],["T_FUNCTION","function",60],["T_WHITESPACE"," ",60],["T_STRING","_viewAction",60],"(",")",["T_WHITESPACE","\n    ",60],"{",["T_WHITESPACE","\n        ",61],["T_IF","if",62],["T_WHITESPACE"," ",62],"(","!",["T_VARIABLE","$this",62],["T_OBJECT_OPERATOR","->",62],["T_STRING","_loadValidOrder",62],"(",")",")",["T_WHITESPACE"," ",62],"{",["T_WHITESPACE","\n            ",62],["T_RETURN","return",63],";",["T_WHITESPACE","\n        ",63],"}",["T_WHITESPACE","\n\n        ",64],["T_VARIABLE","$this",66],["T_OBJECT_OPERATOR","->",66],["T_STRING","loadLayout",66],"(",")",";",["T_WHITESPACE","\n        ",66],["T_VARIABLE","$this",67],["T_OBJECT_OPERATOR","->",67],["T_STRING","_initLayoutMessages",67],"(",["T_CONSTANT_ENCAPSED_STRING","'catalog\/session'",67],")",";",["T_WHITESPACE","\n\n        ",67],["T_VARIABLE","$navigationBlock",69],["T_WHITESPACE"," ",69],"=",["T_WHITESPACE"," ",69],["T_VARIABLE","$this",69],["T_OBJECT_OPERATOR","->",69],["T_STRING","getLayout",69],"(",")",["T_OBJECT_OPERATOR","->",69],["T_STRING","getBlock",69],"(",["T_CONSTANT_ENCAPSED_STRING","'customer_account_navigation'",69],")",";",["T_WHITESPACE","\n        ",69],["T_IF","if",70],["T_WHITESPACE"," ",70],"(",["T_VARIABLE","$navigationBlock",70],")",["T_WHITESPACE"," ",70],"{",["T_WHITESPACE","\n            ",70],["T_VARIABLE","$navigationBlock",71],["T_OBJECT_OPERATOR","->",71],["T_STRING","setActive",71],"(",["T_CONSTANT_ENCAPSED_STRING","'sales\/order\/history'",71],")",";",["T_WHITESPACE","\n        ",71],"}",["T_WHITESPACE","\n        ",72],["T_VARIABLE","$this",73],["T_OBJECT_OPERATOR","->",73],["T_STRING","renderLayout",73],"(",")",";",["T_WHITESPACE","\n    ",73],"}",["T_WHITESPACE","\n\n    ",74],["T_DOC_COMMENT","\/**\n     * Try to load valid order by order_id and register it\n     *\n     * @param int $orderId\n     * @return bool\n     *\/",76],["T_WHITESPACE","\n    ",81],["T_PROTECTED","protected",82],["T_WHITESPACE"," ",82],["T_FUNCTION","function",82],["T_WHITESPACE"," ",82],["T_STRING","_loadValidOrder",82],"(",["T_VARIABLE","$orderId",82],["T_WHITESPACE"," ",82],"=",["T_WHITESPACE"," ",82],["T_STRING","null",82],")",["T_WHITESPACE","\n    ",82],"{",["T_WHITESPACE","\n        ",83],["T_IF","if",84],["T_WHITESPACE"," ",84],"(",["T_STRING","null",84],["T_WHITESPACE"," ",84],["T_IS_IDENTICAL","===",84],["T_WHITESPACE"," ",84],["T_VARIABLE","$orderId",84],")",["T_WHITESPACE"," ",84],"{",["T_WHITESPACE","\n            ",84],["T_VARIABLE","$orderId",85],["T_WHITESPACE"," ",85],"=",["T_WHITESPACE"," ",85],["T_INT_CAST","(int)",85],["T_WHITESPACE"," ",85],["T_VARIABLE","$this",85],["T_OBJECT_OPERATOR","->",85],["T_STRING","getRequest",85],"(",")",["T_OBJECT_OPERATOR","->",85],["T_STRING","getParam",85],"(",["T_CONSTANT_ENCAPSED_STRING","'order_id'",85],")",";",["T_WHITESPACE","\n        ",85],"}",["T_WHITESPACE","\n        ",86],["T_IF","if",87],["T_WHITESPACE"," ",87],"(","!",["T_VARIABLE","$orderId",87],")",["T_WHITESPACE"," ",87],"{",["T_WHITESPACE","\n            ",87],["T_VARIABLE","$this",88],["T_OBJECT_OPERATOR","->",88],["T_STRING","_forward",88],"(",["T_CONSTANT_ENCAPSED_STRING","'noRoute'",88],")",";",["T_WHITESPACE","\n            ",88],["T_RETURN","return",89],["T_WHITESPACE"," ",89],["T_STRING","false",89],";",["T_WHITESPACE","\n        ",89],"}",["T_WHITESPACE","\n\n        ",90],["T_VARIABLE","$order",92],["T_WHITESPACE"," ",92],"=",["T_WHITESPACE"," ",92],["T_STRING","Mage",92],["T_DOUBLE_COLON","::",92],["T_STRING","getModel",92],"(",["T_CONSTANT_ENCAPSED_STRING","'sales\/order'",92],")",["T_OBJECT_OPERATOR","->",92],["T_STRING","load",92],"(",["T_VARIABLE","$orderId",92],")",";",["T_WHITESPACE","\n\n        ",92],["T_IF","if",94],["T_WHITESPACE"," ",94],"(",["T_VARIABLE","$this",94],["T_OBJECT_OPERATOR","->",94],["T_STRING","_canViewOrder",94],"(",["T_VARIABLE","$order",94],")",")",["T_WHITESPACE"," ",94],"{",["T_WHITESPACE","\n            ",94],["T_STRING","Mage",95],["T_DOUBLE_COLON","::",95],["T_STRING","register",95],"(",["T_CONSTANT_ENCAPSED_STRING","'current_order'",95],",",["T_WHITESPACE"," ",95],["T_VARIABLE","$order",95],")",";",["T_WHITESPACE","\n            ",95],["T_RETURN","return",96],["T_WHITESPACE"," ",96],["T_STRING","true",96],";",["T_WHITESPACE","\n        ",96],"}",["T_WHITESPACE"," ",97],["T_ELSE","else",97],["T_WHITESPACE"," ",97],"{",["T_WHITESPACE","\n            ",97],["T_VARIABLE","$this",98],["T_OBJECT_OPERATOR","->",98],["T_STRING","_redirect",98],"(",["T_CONSTANT_ENCAPSED_STRING","'*\/*\/history'",98],")",";",["T_WHITESPACE","\n        ",98],"}",["T_WHITESPACE","\n        ",99],["T_RETURN","return",100],["T_WHITESPACE"," ",100],["T_STRING","false",100],";",["T_WHITESPACE","\n    ",100],"}",["T_WHITESPACE","\n\n    ",101],["T_DOC_COMMENT","\/**\n     * Order view page\n     *\/",103],["T_WHITESPACE","\n    ",105],["T_PUBLIC","public",106],["T_WHITESPACE"," ",106],["T_FUNCTION","function",106],["T_WHITESPACE"," ",106],["T_STRING","viewAction",106],"(",")",["T_WHITESPACE","\n    ",106],"{",["T_WHITESPACE","\n        ",107],["T_VARIABLE","$this",108],["T_OBJECT_OPERATOR","->",108],["T_STRING","_viewAction",108],"(",")",";",["T_WHITESPACE","\n    ",108],"}",["T_WHITESPACE","\n\n    ",109],["T_DOC_COMMENT","\/**\n     * Invoice page\n     *\/",111],["T_WHITESPACE","\n    ",113],["T_PUBLIC","public",114],["T_WHITESPACE"," ",114],["T_FUNCTION","function",114],["T_WHITESPACE"," ",114],["T_STRING","invoiceAction",114],"(",")",["T_WHITESPACE","\n    ",114],"{",["T_WHITESPACE","\n        ",115],["T_VARIABLE","$this",116],["T_OBJECT_OPERATOR","->",116],["T_STRING","_viewAction",116],"(",")",";",["T_WHITESPACE","\n    ",116],"}",["T_WHITESPACE","\n\n    ",117],["T_DOC_COMMENT","\/**\n     * Shipment page\n     *\/",119],["T_WHITESPACE","\n    ",121],["T_PUBLIC","public",122],["T_WHITESPACE"," ",122],["T_FUNCTION","function",122],["T_WHITESPACE"," ",122],["T_STRING","shipmentAction",122],"(",")",["T_WHITESPACE","\n    ",122],"{",["T_WHITESPACE","\n        ",123],["T_VARIABLE","$this",124],["T_OBJECT_OPERATOR","->",124],["T_STRING","_viewAction",124],"(",")",";",["T_WHITESPACE","\n    ",124],"}",["T_WHITESPACE","\n\n    ",125],["T_DOC_COMMENT","\/**\n     * Creditmemo page\n     *\/",127],["T_WHITESPACE","\n    ",129],["T_PUBLIC","public",130],["T_WHITESPACE"," ",130],["T_FUNCTION","function",130],["T_WHITESPACE"," ",130],["T_STRING","creditmemoAction",130],"(",")",["T_WHITESPACE","\n    ",130],"{",["T_WHITESPACE","\n        ",131],["T_VARIABLE","$this",132],["T_OBJECT_OPERATOR","->",132],["T_STRING","_viewAction",132],"(",")",";",["T_WHITESPACE","\n    ",132],"}",["T_WHITESPACE","\n\n    ",133],["T_DOC_COMMENT","\/**\n     * Action for reorder\n     *\/",135],["T_WHITESPACE","\n    ",137],["T_PUBLIC","public",138],["T_WHITESPACE"," ",138],["T_FUNCTION","function",138],["T_WHITESPACE"," ",138],["T_STRING","reorderAction",138],"(",")",["T_WHITESPACE","\n    ",138],"{",["T_WHITESPACE","\n        ",139],["T_IF","if",140],["T_WHITESPACE"," ",140],"(","!",["T_VARIABLE","$this",140],["T_OBJECT_OPERATOR","->",140],["T_STRING","_loadValidOrder",140],"(",")",")",["T_WHITESPACE"," ",140],"{",["T_WHITESPACE","\n            ",140],["T_RETURN","return",141],";",["T_WHITESPACE","\n        ",141],"}",["T_WHITESPACE","\n        ",142],["T_VARIABLE","$order",143],["T_WHITESPACE"," ",143],"=",["T_WHITESPACE"," ",143],["T_STRING","Mage",143],["T_DOUBLE_COLON","::",143],["T_STRING","registry",143],"(",["T_CONSTANT_ENCAPSED_STRING","'current_order'",143],")",";",["T_WHITESPACE","\n\n        ",143],["T_VARIABLE","$cart",145],["T_WHITESPACE"," ",145],"=",["T_WHITESPACE"," ",145],["T_STRING","Mage",145],["T_DOUBLE_COLON","::",145],["T_STRING","getSingleton",145],"(",["T_CONSTANT_ENCAPSED_STRING","'checkout\/cart'",145],")",";",["T_WHITESPACE","\n        ",145],["T_VARIABLE","$cartTruncated",146],["T_WHITESPACE"," ",146],"=",["T_WHITESPACE"," ",146],["T_STRING","false",146],";",["T_WHITESPACE","\n        ",146],["T_COMMENT","\/* @var $cart Mage_Checkout_Model_Cart *\/",147],["T_WHITESPACE","\n\n        ",147],["T_VARIABLE","$items",149],["T_WHITESPACE"," ",149],"=",["T_WHITESPACE"," ",149],["T_VARIABLE","$order",149],["T_OBJECT_OPERATOR","->",149],["T_STRING","getItemsCollection",149],"(",")",";",["T_WHITESPACE","\n        ",149],["T_FOREACH","foreach",150],["T_WHITESPACE"," ",150],"(",["T_VARIABLE","$items",150],["T_WHITESPACE"," ",150],["T_AS","as",150],["T_WHITESPACE"," ",150],["T_VARIABLE","$item",150],")",["T_WHITESPACE"," ",150],"{",["T_WHITESPACE","\n            ",150],["T_TRY","try",151],["T_WHITESPACE"," ",151],"{",["T_WHITESPACE","\n                ",151],["T_VARIABLE","$cart",152],["T_OBJECT_OPERATOR","->",152],["T_STRING","addOrderItem",152],"(",["T_VARIABLE","$item",152],")",";",["T_WHITESPACE","\n            ",152],"}",["T_WHITESPACE"," ",153],["T_CATCH","catch",153],["T_WHITESPACE"," ",153],"(",["T_STRING","Mage_Core_Exception",153],["T_WHITESPACE"," ",153],["T_VARIABLE","$e",153],")","{",["T_WHITESPACE","\n                ",153],["T_IF","if",154],["T_WHITESPACE"," ",154],"(",["T_STRING","Mage",154],["T_DOUBLE_COLON","::",154],["T_STRING","getSingleton",154],"(",["T_CONSTANT_ENCAPSED_STRING","'checkout\/session'",154],")",["T_OBJECT_OPERATOR","->",154],["T_STRING","getUseNotice",154],"(",["T_STRING","true",154],")",")",["T_WHITESPACE"," ",154],"{",["T_WHITESPACE","\n                    ",154],["T_STRING","Mage",155],["T_DOUBLE_COLON","::",155],["T_STRING","getSingleton",155],"(",["T_CONSTANT_ENCAPSED_STRING","'checkout\/session'",155],")",["T_OBJECT_OPERATOR","->",155],["T_STRING","addNotice",155],"(",["T_VARIABLE","$e",155],["T_OBJECT_OPERATOR","->",155],["T_STRING","getMessage",155],"(",")",")",";",["T_WHITESPACE","\n                ",155],"}",["T_WHITESPACE","\n                ",156],["T_ELSE","else",157],["T_WHITESPACE"," ",157],"{",["T_WHITESPACE","\n                    ",157],["T_STRING","Mage",158],["T_DOUBLE_COLON","::",158],["T_STRING","getSingleton",158],"(",["T_CONSTANT_ENCAPSED_STRING","'checkout\/session'",158],")",["T_OBJECT_OPERATOR","->",158],["T_STRING","addError",158],"(",["T_VARIABLE","$e",158],["T_OBJECT_OPERATOR","->",158],["T_STRING","getMessage",158],"(",")",")",";",["T_WHITESPACE","\n                ",158],"}",["T_WHITESPACE","\n                ",159],["T_VARIABLE","$this",160],["T_OBJECT_OPERATOR","->",160],["T_STRING","_redirect",160],"(",["T_CONSTANT_ENCAPSED_STRING","'*\/*\/history'",160],")",";",["T_WHITESPACE","\n            ",160],"}",["T_WHITESPACE"," ",161],["T_CATCH","catch",161],["T_WHITESPACE"," ",161],"(",["T_STRING","Exception",161],["T_WHITESPACE"," ",161],["T_VARIABLE","$e",161],")",["T_WHITESPACE"," ",161],"{",["T_WHITESPACE","\n                ",161],["T_STRING","Mage",162],["T_DOUBLE_COLON","::",162],["T_STRING","getSingleton",162],"(",["T_CONSTANT_ENCAPSED_STRING","'checkout\/session'",162],")",["T_OBJECT_OPERATOR","->",162],["T_STRING","addException",162],"(",["T_VARIABLE","$e",162],",",["T_WHITESPACE","\n                    ",162],["T_STRING","Mage",163],["T_DOUBLE_COLON","::",163],["T_STRING","helper",163],"(",["T_CONSTANT_ENCAPSED_STRING","'checkout'",163],")",["T_OBJECT_OPERATOR","->",163],["T_STRING","__",163],"(",["T_CONSTANT_ENCAPSED_STRING","'Cannot add the item to shopping cart.'",163],")",["T_WHITESPACE","\n                ",163],")",";",["T_WHITESPACE","\n                ",164],["T_VARIABLE","$this",165],["T_OBJECT_OPERATOR","->",165],["T_STRING","_redirect",165],"(",["T_CONSTANT_ENCAPSED_STRING","'checkout\/cart'",165],")",";",["T_WHITESPACE","\n            ",165],"}",["T_WHITESPACE","\n        ",166],"}",["T_WHITESPACE","\n\n        ",167],["T_VARIABLE","$cart",169],["T_OBJECT_OPERATOR","->",169],["T_STRING","save",169],"(",")",";",["T_WHITESPACE","\n        ",169],["T_VARIABLE","$this",170],["T_OBJECT_OPERATOR","->",170],["T_STRING","_redirect",170],"(",["T_CONSTANT_ENCAPSED_STRING","'checkout\/cart'",170],")",";",["T_WHITESPACE","\n    ",170],"}",["T_WHITESPACE","\n\n    ",171],["T_DOC_COMMENT","\/**\n     * Print Order Action\n     *\/",173],["T_WHITESPACE","\n    ",175],["T_PUBLIC","public",176],["T_WHITESPACE"," ",176],["T_FUNCTION","function",176],["T_WHITESPACE"," ",176],["T_STRING","printAction",176],"(",")",["T_WHITESPACE","\n    ",176],"{",["T_WHITESPACE","\n        ",177],["T_IF","if",178],["T_WHITESPACE"," ",178],"(","!",["T_VARIABLE","$this",178],["T_OBJECT_OPERATOR","->",178],["T_STRING","_loadValidOrder",178],"(",")",")",["T_WHITESPACE"," ",178],"{",["T_WHITESPACE","\n            ",178],["T_RETURN","return",179],";",["T_WHITESPACE","\n        ",179],"}",["T_WHITESPACE","\n        ",180],["T_VARIABLE","$this",181],["T_OBJECT_OPERATOR","->",181],["T_STRING","loadLayout",181],"(",["T_CONSTANT_ENCAPSED_STRING","'print'",181],")",";",["T_WHITESPACE","\n        ",181],["T_VARIABLE","$this",182],["T_OBJECT_OPERATOR","->",182],["T_STRING","renderLayout",182],"(",")",";",["T_WHITESPACE","\n    ",182],"}",["T_WHITESPACE","\n\n    ",183],["T_DOC_COMMENT","\/**\n     * Print Invoice Action\n     *\/",185],["T_WHITESPACE","\n    ",187],["T_PUBLIC","public",188],["T_WHITESPACE"," ",188],["T_FUNCTION","function",188],["T_WHITESPACE"," ",188],["T_STRING","printInvoiceAction",188],"(",")",["T_WHITESPACE","\n    ",188],"{",["T_WHITESPACE","\n        ",189],["T_VARIABLE","$invoiceId",190],["T_WHITESPACE"," ",190],"=",["T_WHITESPACE"," ",190],["T_INT_CAST","(int)",190],["T_WHITESPACE"," ",190],["T_VARIABLE","$this",190],["T_OBJECT_OPERATOR","->",190],["T_STRING","getRequest",190],"(",")",["T_OBJECT_OPERATOR","->",190],["T_STRING","getParam",190],"(",["T_CONSTANT_ENCAPSED_STRING","'invoice_id'",190],")",";",["T_WHITESPACE","\n        ",190],["T_IF","if",191],["T_WHITESPACE"," ",191],"(",["T_VARIABLE","$invoiceId",191],")",["T_WHITESPACE"," ",191],"{",["T_WHITESPACE","\n            ",191],["T_VARIABLE","$invoice",192],["T_WHITESPACE"," ",192],"=",["T_WHITESPACE"," ",192],["T_STRING","Mage",192],["T_DOUBLE_COLON","::",192],["T_STRING","getModel",192],"(",["T_CONSTANT_ENCAPSED_STRING","'sales\/order_invoice'",192],")",["T_OBJECT_OPERATOR","->",192],["T_STRING","load",192],"(",["T_VARIABLE","$invoiceId",192],")",";",["T_WHITESPACE","\n            ",192],["T_VARIABLE","$order",193],["T_WHITESPACE"," ",193],"=",["T_WHITESPACE"," ",193],["T_VARIABLE","$invoice",193],["T_OBJECT_OPERATOR","->",193],["T_STRING","getOrder",193],"(",")",";",["T_WHITESPACE","\n        ",193],"}",["T_WHITESPACE"," ",194],["T_ELSE","else",194],["T_WHITESPACE"," ",194],"{",["T_WHITESPACE","\n            ",194],["T_VARIABLE","$orderId",195],["T_WHITESPACE"," ",195],"=",["T_WHITESPACE"," ",195],["T_INT_CAST","(int)",195],["T_WHITESPACE"," ",195],["T_VARIABLE","$this",195],["T_OBJECT_OPERATOR","->",195],["T_STRING","getRequest",195],"(",")",["T_OBJECT_OPERATOR","->",195],["T_STRING","getParam",195],"(",["T_CONSTANT_ENCAPSED_STRING","'order_id'",195],")",";",["T_WHITESPACE","\n            ",195],["T_VARIABLE","$order",196],["T_WHITESPACE"," ",196],"=",["T_WHITESPACE"," ",196],["T_STRING","Mage",196],["T_DOUBLE_COLON","::",196],["T_STRING","getModel",196],"(",["T_CONSTANT_ENCAPSED_STRING","'sales\/order'",196],")",["T_OBJECT_OPERATOR","->",196],["T_STRING","load",196],"(",["T_VARIABLE","$orderId",196],")",";",["T_WHITESPACE","\n        ",196],"}",["T_WHITESPACE","\n\n        ",197],["T_IF","if",199],["T_WHITESPACE"," ",199],"(",["T_VARIABLE","$this",199],["T_OBJECT_OPERATOR","->",199],["T_STRING","_canViewOrder",199],"(",["T_VARIABLE","$order",199],")",")",["T_WHITESPACE"," ",199],"{",["T_WHITESPACE","\n            ",199],["T_STRING","Mage",200],["T_DOUBLE_COLON","::",200],["T_STRING","register",200],"(",["T_CONSTANT_ENCAPSED_STRING","'current_order'",200],",",["T_WHITESPACE"," ",200],["T_VARIABLE","$order",200],")",";",["T_WHITESPACE","\n            ",200],["T_IF","if",201],["T_WHITESPACE"," ",201],"(",["T_ISSET","isset",201],"(",["T_VARIABLE","$invoice",201],")",")",["T_WHITESPACE"," ",201],"{",["T_WHITESPACE","\n                ",201],["T_STRING","Mage",202],["T_DOUBLE_COLON","::",202],["T_STRING","register",202],"(",["T_CONSTANT_ENCAPSED_STRING","'current_invoice'",202],",",["T_WHITESPACE"," ",202],["T_VARIABLE","$invoice",202],")",";",["T_WHITESPACE","\n            ",202],"}",["T_WHITESPACE","\n            ",203],["T_VARIABLE","$this",204],["T_OBJECT_OPERATOR","->",204],["T_STRING","loadLayout",204],"(",["T_CONSTANT_ENCAPSED_STRING","'print'",204],")",";",["T_WHITESPACE","\n            ",204],["T_VARIABLE","$this",205],["T_OBJECT_OPERATOR","->",205],["T_STRING","renderLayout",205],"(",")",";",["T_WHITESPACE","\n        ",205],"}",["T_WHITESPACE"," ",206],["T_ELSE","else",206],["T_WHITESPACE"," ",206],"{",["T_WHITESPACE","\n            ",206],["T_IF","if",207],["T_WHITESPACE"," ",207],"(",["T_STRING","Mage",207],["T_DOUBLE_COLON","::",207],["T_STRING","getSingleton",207],"(",["T_CONSTANT_ENCAPSED_STRING","'customer\/session'",207],")",["T_OBJECT_OPERATOR","->",207],["T_STRING","isLoggedIn",207],"(",")",")",["T_WHITESPACE"," ",207],"{",["T_WHITESPACE","\n                ",207],["T_VARIABLE","$this",208],["T_OBJECT_OPERATOR","->",208],["T_STRING","_redirect",208],"(",["T_CONSTANT_ENCAPSED_STRING","'*\/*\/history'",208],")",";",["T_WHITESPACE","\n            ",208],"}",["T_WHITESPACE"," ",209],["T_ELSE","else",209],["T_WHITESPACE"," ",209],"{",["T_WHITESPACE","\n                ",209],["T_VARIABLE","$this",210],["T_OBJECT_OPERATOR","->",210],["T_STRING","_redirect",210],"(",["T_CONSTANT_ENCAPSED_STRING","'sales\/guest\/form'",210],")",";",["T_WHITESPACE","\n            ",210],"}",["T_WHITESPACE","\n        ",211],"}",["T_WHITESPACE","\n    ",212],"}",["T_WHITESPACE","\n\n    ",213],["T_DOC_COMMENT","\/**\n     * Print Shipment Action\n     *\/",215],["T_WHITESPACE","\n    ",217],["T_PUBLIC","public",218],["T_WHITESPACE"," ",218],["T_FUNCTION","function",218],["T_WHITESPACE"," ",218],["T_STRING","printShipmentAction",218],"(",")",["T_WHITESPACE","\n    ",218],"{",["T_WHITESPACE","\n        ",219],["T_VARIABLE","$shipmentId",220],["T_WHITESPACE"," ",220],"=",["T_WHITESPACE"," ",220],["T_INT_CAST","(int)",220],["T_WHITESPACE"," ",220],["T_VARIABLE","$this",220],["T_OBJECT_OPERATOR","->",220],["T_STRING","getRequest",220],"(",")",["T_OBJECT_OPERATOR","->",220],["T_STRING","getParam",220],"(",["T_CONSTANT_ENCAPSED_STRING","'shipment_id'",220],")",";",["T_WHITESPACE","\n        ",220],["T_IF","if",221],["T_WHITESPACE"," ",221],"(",["T_VARIABLE","$shipmentId",221],")",["T_WHITESPACE"," ",221],"{",["T_WHITESPACE","\n            ",221],["T_VARIABLE","$shipment",222],["T_WHITESPACE"," ",222],"=",["T_WHITESPACE"," ",222],["T_STRING","Mage",222],["T_DOUBLE_COLON","::",222],["T_STRING","getModel",222],"(",["T_CONSTANT_ENCAPSED_STRING","'sales\/order_shipment'",222],")",["T_OBJECT_OPERATOR","->",222],["T_STRING","load",222],"(",["T_VARIABLE","$shipmentId",222],")",";",["T_WHITESPACE","\n            ",222],["T_VARIABLE","$order",223],["T_WHITESPACE"," ",223],"=",["T_WHITESPACE"," ",223],["T_VARIABLE","$shipment",223],["T_OBJECT_OPERATOR","->",223],["T_STRING","getOrder",223],"(",")",";",["T_WHITESPACE","\n        ",223],"}",["T_WHITESPACE"," ",224],["T_ELSE","else",224],["T_WHITESPACE"," ",224],"{",["T_WHITESPACE","\n            ",224],["T_VARIABLE","$orderId",225],["T_WHITESPACE"," ",225],"=",["T_WHITESPACE"," ",225],["T_INT_CAST","(int)",225],["T_WHITESPACE"," ",225],["T_VARIABLE","$this",225],["T_OBJECT_OPERATOR","->",225],["T_STRING","getRequest",225],"(",")",["T_OBJECT_OPERATOR","->",225],["T_STRING","getParam",225],"(",["T_CONSTANT_ENCAPSED_STRING","'order_id'",225],")",";",["T_WHITESPACE","\n            ",225],["T_VARIABLE","$order",226],["T_WHITESPACE"," ",226],"=",["T_WHITESPACE"," ",226],["T_STRING","Mage",226],["T_DOUBLE_COLON","::",226],["T_STRING","getModel",226],"(",["T_CONSTANT_ENCAPSED_STRING","'sales\/order'",226],")",["T_OBJECT_OPERATOR","->",226],["T_STRING","load",226],"(",["T_VARIABLE","$orderId",226],")",";",["T_WHITESPACE","\n        ",226],"}",["T_WHITESPACE","\n        ",227],["T_IF","if",228],["T_WHITESPACE"," ",228],"(",["T_VARIABLE","$this",228],["T_OBJECT_OPERATOR","->",228],["T_STRING","_canViewOrder",228],"(",["T_VARIABLE","$order",228],")",")",["T_WHITESPACE"," ",228],"{",["T_WHITESPACE","\n            ",228],["T_STRING","Mage",229],["T_DOUBLE_COLON","::",229],["T_STRING","register",229],"(",["T_CONSTANT_ENCAPSED_STRING","'current_order'",229],",",["T_WHITESPACE"," ",229],["T_VARIABLE","$order",229],")",";",["T_WHITESPACE","\n            ",229],["T_IF","if",230],["T_WHITESPACE"," ",230],"(",["T_ISSET","isset",230],"(",["T_VARIABLE","$shipment",230],")",")",["T_WHITESPACE"," ",230],"{",["T_WHITESPACE","\n                ",230],["T_STRING","Mage",231],["T_DOUBLE_COLON","::",231],["T_STRING","register",231],"(",["T_CONSTANT_ENCAPSED_STRING","'current_shipment'",231],",",["T_WHITESPACE"," ",231],["T_VARIABLE","$shipment",231],")",";",["T_WHITESPACE","\n            ",231],"}",["T_WHITESPACE","\n            ",232],["T_VARIABLE","$this",233],["T_OBJECT_OPERATOR","->",233],["T_STRING","loadLayout",233],"(",["T_CONSTANT_ENCAPSED_STRING","'print'",233],")",";",["T_WHITESPACE","\n            ",233],["T_VARIABLE","$this",234],["T_OBJECT_OPERATOR","->",234],["T_STRING","renderLayout",234],"(",")",";",["T_WHITESPACE","\n        ",234],"}",["T_WHITESPACE"," ",235],["T_ELSE","else",235],["T_WHITESPACE"," ",235],"{",["T_WHITESPACE","\n            ",235],["T_IF","if",236],["T_WHITESPACE"," ",236],"(",["T_STRING","Mage",236],["T_DOUBLE_COLON","::",236],["T_STRING","getSingleton",236],"(",["T_CONSTANT_ENCAPSED_STRING","'customer\/session'",236],")",["T_OBJECT_OPERATOR","->",236],["T_STRING","isLoggedIn",236],"(",")",")",["T_WHITESPACE"," ",236],"{",["T_WHITESPACE","\n                ",236],["T_VARIABLE","$this",237],["T_OBJECT_OPERATOR","->",237],["T_STRING","_redirect",237],"(",["T_CONSTANT_ENCAPSED_STRING","'*\/*\/history'",237],")",";",["T_WHITESPACE","\n            ",237],"}",["T_WHITESPACE"," ",238],["T_ELSE","else",238],["T_WHITESPACE"," ",238],"{",["T_WHITESPACE","\n                ",238],["T_VARIABLE","$this",239],["T_OBJECT_OPERATOR","->",239],["T_STRING","_redirect",239],"(",["T_CONSTANT_ENCAPSED_STRING","'sales\/guest\/form'",239],")",";",["T_WHITESPACE","\n            ",239],"}",["T_WHITESPACE","\n        ",240],"}",["T_WHITESPACE","\n    ",241],"}",["T_WHITESPACE","\n\n    ",242],["T_DOC_COMMENT","\/**\n     * Print Creditmemo Action\n     *\/",244],["T_WHITESPACE","\n    ",246],["T_PUBLIC","public",247],["T_WHITESPACE"," ",247],["T_FUNCTION","function",247],["T_WHITESPACE"," ",247],["T_STRING","printCreditmemoAction",247],"(",")",["T_WHITESPACE","\n    ",247],"{",["T_WHITESPACE","\n        ",248],["T_VARIABLE","$creditmemoId",249],["T_WHITESPACE"," ",249],"=",["T_WHITESPACE"," ",249],["T_INT_CAST","(int)",249],["T_WHITESPACE"," ",249],["T_VARIABLE","$this",249],["T_OBJECT_OPERATOR","->",249],["T_STRING","getRequest",249],"(",")",["T_OBJECT_OPERATOR","->",249],["T_STRING","getParam",249],"(",["T_CONSTANT_ENCAPSED_STRING","'creditmemo_id'",249],")",";",["T_WHITESPACE","\n        ",249],["T_IF","if",250],["T_WHITESPACE"," ",250],"(",["T_VARIABLE","$creditmemoId",250],")",["T_WHITESPACE"," ",250],"{",["T_WHITESPACE","\n            ",250],["T_VARIABLE","$creditmemo",251],["T_WHITESPACE"," ",251],"=",["T_WHITESPACE"," ",251],["T_STRING","Mage",251],["T_DOUBLE_COLON","::",251],["T_STRING","getModel",251],"(",["T_CONSTANT_ENCAPSED_STRING","'sales\/order_creditmemo'",251],")",["T_OBJECT_OPERATOR","->",251],["T_STRING","load",251],"(",["T_VARIABLE","$creditmemoId",251],")",";",["T_WHITESPACE","\n            ",251],["T_VARIABLE","$order",252],["T_WHITESPACE"," ",252],"=",["T_WHITESPACE"," ",252],["T_VARIABLE","$creditmemo",252],["T_OBJECT_OPERATOR","->",252],["T_STRING","getOrder",252],"(",")",";",["T_WHITESPACE","\n        ",252],"}",["T_WHITESPACE"," ",253],["T_ELSE","else",253],["T_WHITESPACE"," ",253],"{",["T_WHITESPACE","\n            ",253],["T_VARIABLE","$orderId",254],["T_WHITESPACE"," ",254],"=",["T_WHITESPACE"," ",254],["T_INT_CAST","(int)",254],["T_WHITESPACE"," ",254],["T_VARIABLE","$this",254],["T_OBJECT_OPERATOR","->",254],["T_STRING","getRequest",254],"(",")",["T_OBJECT_OPERATOR","->",254],["T_STRING","getParam",254],"(",["T_CONSTANT_ENCAPSED_STRING","'order_id'",254],")",";",["T_WHITESPACE","\n            ",254],["T_VARIABLE","$order",255],["T_WHITESPACE"," ",255],"=",["T_WHITESPACE"," ",255],["T_STRING","Mage",255],["T_DOUBLE_COLON","::",255],["T_STRING","getModel",255],"(",["T_CONSTANT_ENCAPSED_STRING","'sales\/order'",255],")",["T_OBJECT_OPERATOR","->",255],["T_STRING","load",255],"(",["T_VARIABLE","$orderId",255],")",";",["T_WHITESPACE","\n        ",255],"}",["T_WHITESPACE","\n\n        ",256],["T_IF","if",258],["T_WHITESPACE"," ",258],"(",["T_VARIABLE","$this",258],["T_OBJECT_OPERATOR","->",258],["T_STRING","_canViewOrder",258],"(",["T_VARIABLE","$order",258],")",")",["T_WHITESPACE"," ",258],"{",["T_WHITESPACE","\n            ",258],["T_STRING","Mage",259],["T_DOUBLE_COLON","::",259],["T_STRING","register",259],"(",["T_CONSTANT_ENCAPSED_STRING","'current_order'",259],",",["T_WHITESPACE"," ",259],["T_VARIABLE","$order",259],")",";",["T_WHITESPACE","\n            ",259],["T_IF","if",260],["T_WHITESPACE"," ",260],"(",["T_ISSET","isset",260],"(",["T_VARIABLE","$creditmemo",260],")",")",["T_WHITESPACE"," ",260],"{",["T_WHITESPACE","\n                ",260],["T_STRING","Mage",261],["T_DOUBLE_COLON","::",261],["T_STRING","register",261],"(",["T_CONSTANT_ENCAPSED_STRING","'current_creditmemo'",261],",",["T_WHITESPACE"," ",261],["T_VARIABLE","$creditmemo",261],")",";",["T_WHITESPACE","\n            ",261],"}",["T_WHITESPACE","\n            ",262],["T_VARIABLE","$this",263],["T_OBJECT_OPERATOR","->",263],["T_STRING","loadLayout",263],"(",["T_CONSTANT_ENCAPSED_STRING","'print'",263],")",";",["T_WHITESPACE","\n            ",263],["T_VARIABLE","$this",264],["T_OBJECT_OPERATOR","->",264],["T_STRING","renderLayout",264],"(",")",";",["T_WHITESPACE","\n        ",264],"}",["T_WHITESPACE"," ",265],["T_ELSE","else",265],["T_WHITESPACE"," ",265],"{",["T_WHITESPACE","\n            ",265],["T_IF","if",266],["T_WHITESPACE"," ",266],"(",["T_STRING","Mage",266],["T_DOUBLE_COLON","::",266],["T_STRING","getSingleton",266],"(",["T_CONSTANT_ENCAPSED_STRING","'customer\/session'",266],")",["T_OBJECT_OPERATOR","->",266],["T_STRING","isLoggedIn",266],"(",")",")",["T_WHITESPACE"," ",266],"{",["T_WHITESPACE","\n                ",266],["T_VARIABLE","$this",267],["T_OBJECT_OPERATOR","->",267],["T_STRING","_redirect",267],"(",["T_CONSTANT_ENCAPSED_STRING","'*\/*\/history'",267],")",";",["T_WHITESPACE","\n            ",267],"}",["T_WHITESPACE"," ",268],["T_ELSE","else",268],["T_WHITESPACE"," ",268],"{",["T_WHITESPACE","\n                ",268],["T_VARIABLE","$this",269],["T_OBJECT_OPERATOR","->",269],["T_STRING","_redirect",269],"(",["T_CONSTANT_ENCAPSED_STRING","'sales\/guest\/form'",269],")",";",["T_WHITESPACE","\n            ",269],"}",["T_WHITESPACE","\n        ",270],"}",["T_WHITESPACE","\n    ",271],"}",["T_WHITESPACE","\n",272],"}",["T_WHITESPACE","\n",273]]
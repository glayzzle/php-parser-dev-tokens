[["T_OPEN_TAG","<?php\n",1],["T_DOC_COMMENT","\/**\n * Magento\n *\n * NOTICE OF LICENSE\n *\n * This source file is subject to the Open Software License (OSL 3.0)\n * that is bundled with this package in the file LICENSE.txt.\n * It is also available through the world-wide-web at this URL:\n * http:\/\/opensource.org\/licenses\/osl-3.0.php\n * If you did not receive a copy of the license and are unable to\n * obtain it through the world-wide-web, please send an email\n * to license@magento.com so we can send you a copy immediately.\n *\n * DISCLAIMER\n *\n * Do not edit or add to this file if you wish to upgrade Magento to newer\n * versions in the future. If you wish to customize Magento for your\n * needs please refer to http:\/\/www.magento.com for more information.\n *\n * @category    Mage\n * @package     Mage_Sales\n * @copyright  Copyright (c) 2006-2016 X.commerce, Inc. and affiliates (http:\/\/www.magento.com)\n * @license    http:\/\/opensource.org\/licenses\/osl-3.0.php  Open Software License (OSL 3.0)\n *\/",2],["T_WHITESPACE","\n\n",25],["T_DOC_COMMENT","\/**\n * Recurring profiles view\/management controller\n *\/",27],["T_WHITESPACE","\n",29],["T_CLASS","class",30],["T_WHITESPACE"," ",30],["T_STRING","Mage_Sales_Recurring_ProfileController",30],["T_WHITESPACE"," ",30],["T_EXTENDS","extends",30],["T_WHITESPACE"," ",30],["T_STRING","Mage_Core_Controller_Front_Action",30],["T_WHITESPACE","\n",30],"{",["T_WHITESPACE","\n    ",31],["T_DOC_COMMENT","\/**\n     *\n     * @var Mage_Customer_Model_Session\n     *\/",32],["T_WHITESPACE","\n    ",35],["T_PROTECTED","protected",36],["T_WHITESPACE"," ",36],["T_VARIABLE","$_session",36],["T_WHITESPACE"," ",36],"=",["T_WHITESPACE"," ",36],["T_STRING","null",36],";",["T_WHITESPACE","\n\n    ",36],["T_DOC_COMMENT","\/**\n     * Make sure customer is logged in and put it into registry\n     *\/",38],["T_WHITESPACE","\n    ",40],["T_PUBLIC","public",41],["T_WHITESPACE"," ",41],["T_FUNCTION","function",41],["T_WHITESPACE"," ",41],["T_STRING","preDispatch",41],"(",")",["T_WHITESPACE","\n    ",41],"{",["T_WHITESPACE","\n        ",42],["T_STRING","parent",43],["T_DOUBLE_COLON","::",43],["T_STRING","preDispatch",43],"(",")",";",["T_WHITESPACE","\n        ",43],["T_IF","if",44],["T_WHITESPACE"," ",44],"(","!",["T_VARIABLE","$this",44],["T_OBJECT_OPERATOR","->",44],["T_STRING","getRequest",44],"(",")",["T_OBJECT_OPERATOR","->",44],["T_STRING","isDispatched",44],"(",")",")",["T_WHITESPACE"," ",44],"{",["T_WHITESPACE","\n            ",44],["T_RETURN","return",45],";",["T_WHITESPACE","\n        ",45],"}",["T_WHITESPACE","\n        ",46],["T_VARIABLE","$this",47],["T_OBJECT_OPERATOR","->",47],["T_STRING","_session",47],["T_WHITESPACE"," ",47],"=",["T_WHITESPACE"," ",47],["T_STRING","Mage",47],["T_DOUBLE_COLON","::",47],["T_STRING","getSingleton",47],"(",["T_CONSTANT_ENCAPSED_STRING","'customer\/session'",47],")",";",["T_WHITESPACE","\n        ",47],["T_IF","if",48],["T_WHITESPACE"," ",48],"(","!",["T_VARIABLE","$this",48],["T_OBJECT_OPERATOR","->",48],["T_STRING","_session",48],["T_OBJECT_OPERATOR","->",48],["T_STRING","authenticate",48],"(",["T_VARIABLE","$this",48],")",")",["T_WHITESPACE"," ",48],"{",["T_WHITESPACE","\n            ",48],["T_VARIABLE","$this",49],["T_OBJECT_OPERATOR","->",49],["T_STRING","setFlag",49],"(",["T_CONSTANT_ENCAPSED_STRING","''",49],",",["T_WHITESPACE"," ",49],["T_CONSTANT_ENCAPSED_STRING","'no-dispatch'",49],",",["T_WHITESPACE"," ",49],["T_STRING","true",49],")",";",["T_WHITESPACE","\n        ",49],"}",["T_WHITESPACE","\n        ",50],["T_STRING","Mage",51],["T_DOUBLE_COLON","::",51],["T_STRING","register",51],"(",["T_CONSTANT_ENCAPSED_STRING","'current_customer'",51],",",["T_WHITESPACE"," ",51],["T_VARIABLE","$this",51],["T_OBJECT_OPERATOR","->",51],["T_STRING","_session",51],["T_OBJECT_OPERATOR","->",51],["T_STRING","getCustomer",51],"(",")",")",";",["T_WHITESPACE","\n    ",51],"}",["T_WHITESPACE","\n\n    ",52],["T_DOC_COMMENT","\/**\n     * Profiles listing\n     *\/",54],["T_WHITESPACE","\n    ",56],["T_PUBLIC","public",57],["T_WHITESPACE"," ",57],["T_FUNCTION","function",57],["T_WHITESPACE"," ",57],["T_STRING","indexAction",57],"(",")",["T_WHITESPACE","\n    ",57],"{",["T_WHITESPACE","\n        ",58],["T_VARIABLE","$this",59],["T_OBJECT_OPERATOR","->",59],["T_STRING","_title",59],"(",["T_VARIABLE","$this",59],["T_OBJECT_OPERATOR","->",59],["T_STRING","__",59],"(",["T_CONSTANT_ENCAPSED_STRING","'Recurring Profiles'",59],")",")",";",["T_WHITESPACE","\n        ",59],["T_VARIABLE","$this",60],["T_OBJECT_OPERATOR","->",60],["T_STRING","loadLayout",60],"(",")",";",["T_WHITESPACE","\n        ",60],["T_VARIABLE","$this",61],["T_OBJECT_OPERATOR","->",61],["T_STRING","_initLayoutMessages",61],"(",["T_CONSTANT_ENCAPSED_STRING","'customer\/session'",61],")",";",["T_WHITESPACE","\n        ",61],["T_VARIABLE","$this",62],["T_OBJECT_OPERATOR","->",62],["T_STRING","renderLayout",62],"(",")",";",["T_WHITESPACE","\n    ",62],"}",["T_WHITESPACE","\n\n    ",63],["T_DOC_COMMENT","\/**\n     * Profile main view\n     *\/",65],["T_WHITESPACE","\n    ",67],["T_PUBLIC","public",68],["T_WHITESPACE"," ",68],["T_FUNCTION","function",68],["T_WHITESPACE"," ",68],["T_STRING","viewAction",68],"(",")",["T_WHITESPACE","\n    ",68],"{",["T_WHITESPACE","\n        ",69],["T_VARIABLE","$this",70],["T_OBJECT_OPERATOR","->",70],["T_STRING","_viewAction",70],"(",")",";",["T_WHITESPACE","\n    ",70],"}",["T_WHITESPACE","\n\n    ",71],["T_DOC_COMMENT","\/**\n     * Profile history view\n     *\/",73],["T_WHITESPACE","\n",75],["T_COMMENT","\/\/ TODO: implement\n",76],["T_COMMENT","\/\/    public function historyAction()\n",77],["T_COMMENT","\/\/    {\n",78],["T_COMMENT","\/\/        $this->_viewAction();\n",79],["T_COMMENT","\/\/    }\n",80],["T_WHITESPACE","\n    ",81],["T_DOC_COMMENT","\/**\n     * Profile related orders view\n     *\/",82],["T_WHITESPACE","\n    ",84],["T_PUBLIC","public",85],["T_WHITESPACE"," ",85],["T_FUNCTION","function",85],["T_WHITESPACE"," ",85],["T_STRING","ordersAction",85],"(",")",["T_WHITESPACE","\n    ",85],"{",["T_WHITESPACE","\n        ",86],["T_VARIABLE","$this",87],["T_OBJECT_OPERATOR","->",87],["T_STRING","_viewAction",87],"(",")",";",["T_WHITESPACE","\n    ",87],"}",["T_WHITESPACE","\n\n    ",88],["T_DOC_COMMENT","\/**\n     * Profile payment gateway info view\n     *\/",90],["T_WHITESPACE","\n",92],["T_COMMENT","\/\/ TODO: implement\n",93],["T_COMMENT","\/\/    public function vendorAction()\n",94],["T_COMMENT","\/\/    {\n",95],["T_COMMENT","\/\/        $this->_viewAction();\n",96],["T_COMMENT","\/\/    }\n",97],["T_WHITESPACE","\n    ",98],["T_DOC_COMMENT","\/**\n     * Attempt to set profile state\n     *\/",99],["T_WHITESPACE","\n    ",101],["T_PUBLIC","public",102],["T_WHITESPACE"," ",102],["T_FUNCTION","function",102],["T_WHITESPACE"," ",102],["T_STRING","updateStateAction",102],"(",")",["T_WHITESPACE","\n    ",102],"{",["T_WHITESPACE","\n        ",103],["T_VARIABLE","$profile",104],["T_WHITESPACE"," ",104],"=",["T_WHITESPACE"," ",104],["T_STRING","null",104],";",["T_WHITESPACE","\n        ",104],["T_TRY","try",105],["T_WHITESPACE"," ",105],"{",["T_WHITESPACE","\n            ",105],["T_VARIABLE","$profile",106],["T_WHITESPACE"," ",106],"=",["T_WHITESPACE"," ",106],["T_VARIABLE","$this",106],["T_OBJECT_OPERATOR","->",106],["T_STRING","_initProfile",106],"(",")",";",["T_WHITESPACE","\n\n            ",106],["T_SWITCH","switch",108],["T_WHITESPACE"," ",108],"(",["T_VARIABLE","$this",108],["T_OBJECT_OPERATOR","->",108],["T_STRING","getRequest",108],"(",")",["T_OBJECT_OPERATOR","->",108],["T_STRING","getParam",108],"(",["T_CONSTANT_ENCAPSED_STRING","'action'",108],")",")",["T_WHITESPACE"," ",108],"{",["T_WHITESPACE","\n                ",108],["T_CASE","case",109],["T_WHITESPACE"," ",109],["T_CONSTANT_ENCAPSED_STRING","'cancel'",109],":",["T_WHITESPACE","\n                    ",109],["T_VARIABLE","$profile",110],["T_OBJECT_OPERATOR","->",110],["T_STRING","cancel",110],"(",")",";",["T_WHITESPACE","\n                    ",110],["T_BREAK","break",111],";",["T_WHITESPACE","\n                ",111],["T_CASE","case",112],["T_WHITESPACE"," ",112],["T_CONSTANT_ENCAPSED_STRING","'suspend'",112],":",["T_WHITESPACE","\n                    ",112],["T_VARIABLE","$profile",113],["T_OBJECT_OPERATOR","->",113],["T_STRING","suspend",113],"(",")",";",["T_WHITESPACE","\n                    ",113],["T_BREAK","break",114],";",["T_WHITESPACE","\n                ",114],["T_CASE","case",115],["T_WHITESPACE"," ",115],["T_CONSTANT_ENCAPSED_STRING","'activate'",115],":",["T_WHITESPACE","\n                    ",115],["T_VARIABLE","$profile",116],["T_OBJECT_OPERATOR","->",116],["T_STRING","activate",116],"(",")",";",["T_WHITESPACE","\n                    ",116],["T_BREAK","break",117],";",["T_WHITESPACE","\n            ",117],"}",["T_WHITESPACE","\n            ",118],["T_VARIABLE","$this",119],["T_OBJECT_OPERATOR","->",119],["T_STRING","_session",119],["T_OBJECT_OPERATOR","->",119],["T_STRING","addSuccess",119],"(",["T_VARIABLE","$this",119],["T_OBJECT_OPERATOR","->",119],["T_STRING","__",119],"(",["T_CONSTANT_ENCAPSED_STRING","'The profile state has been updated.'",119],")",")",";",["T_WHITESPACE","\n        ",119],"}",["T_WHITESPACE"," ",120],["T_CATCH","catch",120],["T_WHITESPACE"," ",120],"(",["T_STRING","Mage_Core_Exception",120],["T_WHITESPACE"," ",120],["T_VARIABLE","$e",120],")",["T_WHITESPACE"," ",120],"{",["T_WHITESPACE","\n            ",120],["T_VARIABLE","$this",121],["T_OBJECT_OPERATOR","->",121],["T_STRING","_session",121],["T_OBJECT_OPERATOR","->",121],["T_STRING","addError",121],"(",["T_VARIABLE","$e",121],["T_OBJECT_OPERATOR","->",121],["T_STRING","getMessage",121],"(",")",")",";",["T_WHITESPACE","\n        ",121],"}",["T_WHITESPACE"," ",122],["T_CATCH","catch",122],["T_WHITESPACE"," ",122],"(",["T_STRING","Exception",122],["T_WHITESPACE"," ",122],["T_VARIABLE","$e",122],")",["T_WHITESPACE"," ",122],"{",["T_WHITESPACE","\n            ",122],["T_VARIABLE","$this",123],["T_OBJECT_OPERATOR","->",123],["T_STRING","_session",123],["T_OBJECT_OPERATOR","->",123],["T_STRING","addError",123],"(",["T_VARIABLE","$this",123],["T_OBJECT_OPERATOR","->",123],["T_STRING","__",123],"(",["T_CONSTANT_ENCAPSED_STRING","'Failed to update the profile.'",123],")",")",";",["T_WHITESPACE","\n            ",123],["T_STRING","Mage",124],["T_DOUBLE_COLON","::",124],["T_STRING","logException",124],"(",["T_VARIABLE","$e",124],")",";",["T_WHITESPACE","\n        ",124],"}",["T_WHITESPACE","\n        ",125],["T_IF","if",126],["T_WHITESPACE"," ",126],"(",["T_VARIABLE","$profile",126],")",["T_WHITESPACE"," ",126],"{",["T_WHITESPACE","\n            ",126],["T_VARIABLE","$this",127],["T_OBJECT_OPERATOR","->",127],["T_STRING","_redirect",127],"(",["T_CONSTANT_ENCAPSED_STRING","'*\/*\/view'",127],",",["T_WHITESPACE"," ",127],["T_ARRAY","array",127],"(",["T_CONSTANT_ENCAPSED_STRING","'profile'",127],["T_WHITESPACE"," ",127],["T_DOUBLE_ARROW","=>",127],["T_WHITESPACE"," ",127],["T_VARIABLE","$profile",127],["T_OBJECT_OPERATOR","->",127],["T_STRING","getId",127],"(",")",")",")",";",["T_WHITESPACE","\n        ",127],"}",["T_WHITESPACE"," ",128],["T_ELSE","else",128],["T_WHITESPACE"," ",128],"{",["T_WHITESPACE","\n            ",128],["T_VARIABLE","$this",129],["T_OBJECT_OPERATOR","->",129],["T_STRING","_redirect",129],"(",["T_CONSTANT_ENCAPSED_STRING","'*\/*\/'",129],")",";",["T_WHITESPACE","\n        ",129],"}",["T_WHITESPACE","\n    ",130],"}",["T_WHITESPACE","\n\n    ",131],["T_DOC_COMMENT","\/**\n     * Fetch an update with profile\n     *\/",133],["T_WHITESPACE","\n    ",135],["T_PUBLIC","public",136],["T_WHITESPACE"," ",136],["T_FUNCTION","function",136],["T_WHITESPACE"," ",136],["T_STRING","updateProfileAction",136],"(",")",["T_WHITESPACE","\n    ",136],"{",["T_WHITESPACE","\n        ",137],["T_VARIABLE","$profile",138],["T_WHITESPACE"," ",138],"=",["T_WHITESPACE"," ",138],["T_STRING","null",138],";",["T_WHITESPACE","\n        ",138],["T_TRY","try",139],["T_WHITESPACE"," ",139],"{",["T_WHITESPACE","\n            ",139],["T_VARIABLE","$profile",140],["T_WHITESPACE"," ",140],"=",["T_WHITESPACE"," ",140],["T_VARIABLE","$this",140],["T_OBJECT_OPERATOR","->",140],["T_STRING","_initProfile",140],"(",")",";",["T_WHITESPACE","\n            ",140],["T_VARIABLE","$profile",141],["T_OBJECT_OPERATOR","->",141],["T_STRING","fetchUpdate",141],"(",")",";",["T_WHITESPACE","\n            ",141],["T_IF","if",142],["T_WHITESPACE"," ",142],"(",["T_VARIABLE","$profile",142],["T_OBJECT_OPERATOR","->",142],["T_STRING","hasDataChanges",142],"(",")",")",["T_WHITESPACE"," ",142],"{",["T_WHITESPACE","\n                ",142],["T_VARIABLE","$profile",143],["T_OBJECT_OPERATOR","->",143],["T_STRING","save",143],"(",")",";",["T_WHITESPACE","\n                ",143],["T_VARIABLE","$this",144],["T_OBJECT_OPERATOR","->",144],["T_STRING","_session",144],["T_OBJECT_OPERATOR","->",144],["T_STRING","addSuccess",144],"(",["T_VARIABLE","$this",144],["T_OBJECT_OPERATOR","->",144],["T_STRING","__",144],"(",["T_CONSTANT_ENCAPSED_STRING","'The profile has been updated.'",144],")",")",";",["T_WHITESPACE","\n            ",144],"}",["T_WHITESPACE"," ",145],["T_ELSE","else",145],["T_WHITESPACE"," ",145],"{",["T_WHITESPACE","\n                ",145],["T_VARIABLE","$this",146],["T_OBJECT_OPERATOR","->",146],["T_STRING","_session",146],["T_OBJECT_OPERATOR","->",146],["T_STRING","addNotice",146],"(",["T_VARIABLE","$this",146],["T_OBJECT_OPERATOR","->",146],["T_STRING","__",146],"(",["T_CONSTANT_ENCAPSED_STRING","'The profile has no changes.'",146],")",")",";",["T_WHITESPACE","\n            ",146],"}",["T_WHITESPACE","\n        ",147],"}",["T_WHITESPACE"," ",148],["T_CATCH","catch",148],["T_WHITESPACE"," ",148],"(",["T_STRING","Mage_Core_Exception",148],["T_WHITESPACE"," ",148],["T_VARIABLE","$e",148],")",["T_WHITESPACE"," ",148],"{",["T_WHITESPACE","\n            ",148],["T_VARIABLE","$this",149],["T_OBJECT_OPERATOR","->",149],["T_STRING","_session",149],["T_OBJECT_OPERATOR","->",149],["T_STRING","addError",149],"(",["T_VARIABLE","$e",149],["T_OBJECT_OPERATOR","->",149],["T_STRING","getMessage",149],"(",")",")",";",["T_WHITESPACE","\n        ",149],"}",["T_WHITESPACE"," ",150],["T_CATCH","catch",150],["T_WHITESPACE"," ",150],"(",["T_STRING","Exception",150],["T_WHITESPACE"," ",150],["T_VARIABLE","$e",150],")",["T_WHITESPACE"," ",150],"{",["T_WHITESPACE","\n            ",150],["T_VARIABLE","$this",151],["T_OBJECT_OPERATOR","->",151],["T_STRING","_session",151],["T_OBJECT_OPERATOR","->",151],["T_STRING","addError",151],"(",["T_VARIABLE","$this",151],["T_OBJECT_OPERATOR","->",151],["T_STRING","__",151],"(",["T_CONSTANT_ENCAPSED_STRING","'Failed to update the profile.'",151],")",")",";",["T_WHITESPACE","\n            ",151],["T_STRING","Mage",152],["T_DOUBLE_COLON","::",152],["T_STRING","logException",152],"(",["T_VARIABLE","$e",152],")",";",["T_WHITESPACE","\n        ",152],"}",["T_WHITESPACE","\n        ",153],["T_IF","if",154],["T_WHITESPACE"," ",154],"(",["T_VARIABLE","$profile",154],")",["T_WHITESPACE"," ",154],"{",["T_WHITESPACE","\n            ",154],["T_VARIABLE","$this",155],["T_OBJECT_OPERATOR","->",155],["T_STRING","_redirect",155],"(",["T_CONSTANT_ENCAPSED_STRING","'*\/*\/view'",155],",",["T_WHITESPACE"," ",155],["T_ARRAY","array",155],"(",["T_CONSTANT_ENCAPSED_STRING","'profile'",155],["T_WHITESPACE"," ",155],["T_DOUBLE_ARROW","=>",155],["T_WHITESPACE"," ",155],["T_VARIABLE","$profile",155],["T_OBJECT_OPERATOR","->",155],["T_STRING","getId",155],"(",")",")",")",";",["T_WHITESPACE","\n        ",155],"}",["T_WHITESPACE"," ",156],["T_ELSE","else",156],["T_WHITESPACE"," ",156],"{",["T_WHITESPACE","\n            ",156],["T_VARIABLE","$this",157],["T_OBJECT_OPERATOR","->",157],["T_STRING","_redirect",157],"(",["T_CONSTANT_ENCAPSED_STRING","'*\/*\/'",157],")",";",["T_WHITESPACE","\n        ",157],"}",["T_WHITESPACE","\n    ",158],"}",["T_WHITESPACE","\n\n    ",159],["T_DOC_COMMENT","\/**\n     * Generic profile view action\n     *\/",161],["T_WHITESPACE","\n    ",163],["T_PROTECTED","protected",164],["T_WHITESPACE"," ",164],["T_FUNCTION","function",164],["T_WHITESPACE"," ",164],["T_STRING","_viewAction",164],"(",")",["T_WHITESPACE","\n    ",164],"{",["T_WHITESPACE","\n        ",165],["T_TRY","try",166],["T_WHITESPACE"," ",166],"{",["T_WHITESPACE","\n            ",166],["T_VARIABLE","$profile",167],["T_WHITESPACE"," ",167],"=",["T_WHITESPACE"," ",167],["T_VARIABLE","$this",167],["T_OBJECT_OPERATOR","->",167],["T_STRING","_initProfile",167],"(",")",";",["T_WHITESPACE","\n            ",167],["T_VARIABLE","$this",168],["T_OBJECT_OPERATOR","->",168],["T_STRING","_title",168],"(",["T_VARIABLE","$this",168],["T_OBJECT_OPERATOR","->",168],["T_STRING","__",168],"(",["T_CONSTANT_ENCAPSED_STRING","'Recurring Profiles'",168],")",")",["T_OBJECT_OPERATOR","->",168],["T_STRING","_title",168],"(",["T_VARIABLE","$this",168],["T_OBJECT_OPERATOR","->",168],["T_STRING","__",168],"(",["T_CONSTANT_ENCAPSED_STRING","'Profile #%s'",168],",",["T_WHITESPACE"," ",168],["T_VARIABLE","$profile",168],["T_OBJECT_OPERATOR","->",168],["T_STRING","getReferenceId",168],"(",")",")",")",";",["T_WHITESPACE","\n            ",168],["T_VARIABLE","$this",169],["T_OBJECT_OPERATOR","->",169],["T_STRING","loadLayout",169],"(",")",";",["T_WHITESPACE","\n            ",169],["T_VARIABLE","$this",170],["T_OBJECT_OPERATOR","->",170],["T_STRING","_initLayoutMessages",170],"(",["T_CONSTANT_ENCAPSED_STRING","'customer\/session'",170],")",";",["T_WHITESPACE","\n            ",170],["T_VARIABLE","$navigationBlock",171],["T_WHITESPACE"," ",171],"=",["T_WHITESPACE"," ",171],["T_VARIABLE","$this",171],["T_OBJECT_OPERATOR","->",171],["T_STRING","getLayout",171],"(",")",["T_OBJECT_OPERATOR","->",171],["T_STRING","getBlock",171],"(",["T_CONSTANT_ENCAPSED_STRING","'customer_account_navigation'",171],")",";",["T_WHITESPACE","\n            ",171],["T_IF","if",172],["T_WHITESPACE"," ",172],"(",["T_VARIABLE","$navigationBlock",172],")",["T_WHITESPACE"," ",172],"{",["T_WHITESPACE","\n                ",172],["T_VARIABLE","$navigationBlock",173],["T_OBJECT_OPERATOR","->",173],["T_STRING","setActive",173],"(",["T_CONSTANT_ENCAPSED_STRING","'sales\/recurring_profile\/'",173],")",";",["T_WHITESPACE","\n            ",173],"}",["T_WHITESPACE","\n            ",174],["T_VARIABLE","$this",175],["T_OBJECT_OPERATOR","->",175],["T_STRING","renderLayout",175],"(",")",";",["T_WHITESPACE","\n            ",175],["T_RETURN","return",176],";",["T_WHITESPACE","\n        ",176],"}",["T_WHITESPACE"," ",177],["T_CATCH","catch",177],["T_WHITESPACE"," ",177],"(",["T_STRING","Mage_Core_Exception",177],["T_WHITESPACE"," ",177],["T_VARIABLE","$e",177],")",["T_WHITESPACE"," ",177],"{",["T_WHITESPACE","\n            ",177],["T_VARIABLE","$this",178],["T_OBJECT_OPERATOR","->",178],["T_STRING","_session",178],["T_OBJECT_OPERATOR","->",178],["T_STRING","addError",178],"(",["T_VARIABLE","$e",178],["T_OBJECT_OPERATOR","->",178],["T_STRING","getMessage",178],"(",")",")",";",["T_WHITESPACE","\n        ",178],"}",["T_WHITESPACE"," ",179],["T_CATCH","catch",179],["T_WHITESPACE"," ",179],"(",["T_STRING","Exception",179],["T_WHITESPACE"," ",179],["T_VARIABLE","$e",179],")",["T_WHITESPACE"," ",179],"{",["T_WHITESPACE","\n            ",179],["T_STRING","Mage",180],["T_DOUBLE_COLON","::",180],["T_STRING","logException",180],"(",["T_VARIABLE","$e",180],")",";",["T_WHITESPACE","\n        ",180],"}",["T_WHITESPACE","\n        ",181],["T_VARIABLE","$this",182],["T_OBJECT_OPERATOR","->",182],["T_STRING","_redirect",182],"(",["T_CONSTANT_ENCAPSED_STRING","'*\/*\/'",182],")",";",["T_WHITESPACE","\n    ",182],"}",["T_WHITESPACE","\n\n    ",183],["T_DOC_COMMENT","\/**\n     * Instantiate current profile and put it into registry\n     *\n     * @return Mage_Sales_Model_Recurring_Profile\n     * @throws Mage_Core_Exception\n     *\/",185],["T_WHITESPACE","\n    ",190],["T_PROTECTED","protected",191],["T_WHITESPACE"," ",191],["T_FUNCTION","function",191],["T_WHITESPACE"," ",191],["T_STRING","_initProfile",191],"(",")",["T_WHITESPACE","\n    ",191],"{",["T_WHITESPACE","\n        ",192],["T_DOC_COMMENT","\/** @var Mage_Sales_Model_Recurring_Profile $profile *\/",193],["T_WHITESPACE","\n        ",193],["T_VARIABLE","$profile",194],["T_WHITESPACE"," ",194],"=",["T_WHITESPACE"," ",194],["T_STRING","Mage",194],["T_DOUBLE_COLON","::",194],["T_STRING","getModel",194],"(",["T_CONSTANT_ENCAPSED_STRING","'sales\/recurring_profile'",194],")",["T_OBJECT_OPERATOR","->",194],["T_STRING","load",194],"(",["T_VARIABLE","$this",194],["T_OBJECT_OPERATOR","->",194],["T_STRING","getRequest",194],"(",")",["T_OBJECT_OPERATOR","->",194],["T_STRING","getParam",194],"(",["T_CONSTANT_ENCAPSED_STRING","'profile'",194],")",")",";",["T_WHITESPACE","\n        ",194],["T_IF","if",195],["T_WHITESPACE"," ",195],"(","!",["T_VARIABLE","$profile",195],["T_OBJECT_OPERATOR","->",195],["T_STRING","getId",195],"(",")",["T_WHITESPACE"," ",195],["T_BOOLEAN_OR","||",195],["T_WHITESPACE"," ",195],["T_VARIABLE","$this",195],["T_OBJECT_OPERATOR","->",195],["T_STRING","_session",195],["T_OBJECT_OPERATOR","->",195],["T_STRING","getCustomerId",195],"(",")",["T_WHITESPACE"," ",195],["T_IS_NOT_EQUAL","!=",195],["T_WHITESPACE"," ",195],["T_VARIABLE","$profile",195],["T_OBJECT_OPERATOR","->",195],["T_STRING","getCustomerId",195],"(",")",")",["T_WHITESPACE"," ",195],"{",["T_WHITESPACE","\n            ",195],["T_STRING","Mage",196],["T_DOUBLE_COLON","::",196],["T_STRING","throwException",196],"(",["T_VARIABLE","$this",196],["T_OBJECT_OPERATOR","->",196],["T_STRING","__",196],"(",["T_CONSTANT_ENCAPSED_STRING","'Specified profile does not exist.'",196],")",")",";",["T_WHITESPACE","\n        ",196],"}",["T_WHITESPACE","\n        ",197],["T_STRING","Mage",198],["T_DOUBLE_COLON","::",198],["T_STRING","register",198],"(",["T_CONSTANT_ENCAPSED_STRING","'current_recurring_profile'",198],",",["T_WHITESPACE"," ",198],["T_VARIABLE","$profile",198],")",";",["T_WHITESPACE","\n        ",198],["T_RETURN","return",199],["T_WHITESPACE"," ",199],["T_VARIABLE","$profile",199],";",["T_WHITESPACE","\n    ",199],"}",["T_WHITESPACE","\n",200],"}",["T_WHITESPACE","\n",201]]
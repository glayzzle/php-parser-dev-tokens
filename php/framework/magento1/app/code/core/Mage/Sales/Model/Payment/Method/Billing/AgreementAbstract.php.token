[["T_OPEN_TAG","<?php\n",1],["T_DOC_COMMENT","\/**\n * Magento\n *\n * NOTICE OF LICENSE\n *\n * This source file is subject to the Open Software License (OSL 3.0)\n * that is bundled with this package in the file LICENSE.txt.\n * It is also available through the world-wide-web at this URL:\n * http:\/\/opensource.org\/licenses\/osl-3.0.php\n * If you did not receive a copy of the license and are unable to\n * obtain it through the world-wide-web, please send an email\n * to license@magento.com so we can send you a copy immediately.\n *\n * DISCLAIMER\n *\n * Do not edit or add to this file if you wish to upgrade Magento to newer\n * versions in the future. If you wish to customize Magento for your\n * needs please refer to http:\/\/www.magento.com for more information.\n *\n * @category    Mage\n * @package     Mage_Sales\n * @copyright  Copyright (c) 2006-2016 X.commerce, Inc. and affiliates (http:\/\/www.magento.com)\n * @license    http:\/\/opensource.org\/licenses\/osl-3.0.php  Open Software License (OSL 3.0)\n *\/",2],["T_WHITESPACE","\n\n",25],["T_DOC_COMMENT","\/**\n * Sales Billing Agreement Payment Method Abstract model\n *\n * @author Magento Core Team <core@magentocommerce.com>\n *\/",27],["T_WHITESPACE","\n",31],["T_ABSTRACT","abstract",32],["T_WHITESPACE"," ",32],["T_CLASS","class",32],["T_WHITESPACE"," ",32],["T_STRING","Mage_Sales_Model_Payment_Method_Billing_AgreementAbstract",32],["T_WHITESPACE"," ",32],["T_EXTENDS","extends",32],["T_WHITESPACE"," ",32],["T_STRING","Mage_Payment_Model_Method_Abstract",32],["T_WHITESPACE","\n",32],"{",["T_WHITESPACE","\n    ",33],["T_DOC_COMMENT","\/**\n     * Transport billing agreement id\n     *\n     *\/",34],["T_WHITESPACE","\n    ",37],["T_CONST","const",38],["T_WHITESPACE"," ",38],["T_STRING","TRANSPORT_BILLING_AGREEMENT_ID",38],["T_WHITESPACE"," ",38],"=",["T_WHITESPACE"," ",38],["T_CONSTANT_ENCAPSED_STRING","'ba_agreement_id'",38],";",["T_WHITESPACE","\n    ",38],["T_CONST","const",39],["T_WHITESPACE"," ",39],["T_STRING","PAYMENT_INFO_REFERENCE_ID",39],["T_WHITESPACE","      ",39],"=",["T_WHITESPACE"," ",39],["T_CONSTANT_ENCAPSED_STRING","'ba_reference_id'",39],";",["T_WHITESPACE","\n\n    ",39],["T_PROTECTED","protected",41],["T_WHITESPACE"," ",41],["T_VARIABLE","$_infoBlockType",41],["T_WHITESPACE"," ",41],"=",["T_WHITESPACE"," ",41],["T_CONSTANT_ENCAPSED_STRING","'sales\/payment_info_billing_agreement'",41],";",["T_WHITESPACE","\n    ",41],["T_PROTECTED","protected",42],["T_WHITESPACE"," ",42],["T_VARIABLE","$_formBlockType",42],["T_WHITESPACE"," ",42],"=",["T_WHITESPACE"," ",42],["T_CONSTANT_ENCAPSED_STRING","'sales\/payment_form_billing_agreement'",42],";",["T_WHITESPACE","\n\n    ",42],["T_DOC_COMMENT","\/**\n     * Is method instance available\n     *\n     * @var null|bool\n     *\/",44],["T_WHITESPACE","\n    ",48],["T_PROTECTED","protected",49],["T_WHITESPACE"," ",49],["T_VARIABLE","$_isAvailable",49],["T_WHITESPACE"," ",49],"=",["T_WHITESPACE"," ",49],["T_STRING","null",49],";",["T_WHITESPACE","\n\n    ",49],["T_DOC_COMMENT","\/**\n     * Check whether method is available\n     *\n     * @param Mage_Sales_Model_Quote $quote\n     * @return bool\n     *\/",51],["T_WHITESPACE","\n    ",56],["T_PUBLIC","public",57],["T_WHITESPACE"," ",57],["T_FUNCTION","function",57],["T_WHITESPACE"," ",57],["T_STRING","isAvailable",57],"(",["T_VARIABLE","$quote",57],["T_WHITESPACE"," ",57],"=",["T_WHITESPACE"," ",57],["T_STRING","null",57],")",["T_WHITESPACE","\n    ",57],"{",["T_WHITESPACE","\n        ",58],["T_IF","if",59],["T_WHITESPACE"," ",59],"(",["T_STRING","is_null",59],"(",["T_VARIABLE","$this",59],["T_OBJECT_OPERATOR","->",59],["T_STRING","_isAvailable",59],")",")",["T_WHITESPACE"," ",59],"{",["T_WHITESPACE","\n            ",59],["T_IF","if",60],["T_WHITESPACE"," ",60],"(",["T_STRING","is_object",60],"(",["T_VARIABLE","$quote",60],")",["T_WHITESPACE"," ",60],["T_BOOLEAN_AND","&&",60],["T_WHITESPACE"," ",60],["T_VARIABLE","$quote",60],["T_OBJECT_OPERATOR","->",60],["T_STRING","getCustomer",60],"(",")",")",["T_WHITESPACE"," ",60],"{",["T_WHITESPACE","\n                ",60],["T_VARIABLE","$availableBA",61],["T_WHITESPACE"," ",61],"=",["T_WHITESPACE"," ",61],["T_STRING","Mage",61],["T_DOUBLE_COLON","::",61],["T_STRING","getModel",61],"(",["T_CONSTANT_ENCAPSED_STRING","'sales\/billing_agreement'",61],")",["T_OBJECT_OPERATOR","->",61],["T_STRING","getAvailableCustomerBillingAgreements",61],"(",["T_WHITESPACE","\n                    ",61],["T_VARIABLE","$quote",62],["T_OBJECT_OPERATOR","->",62],["T_STRING","getCustomer",62],"(",")",["T_OBJECT_OPERATOR","->",62],["T_STRING","getId",62],"(",")",["T_WHITESPACE","\n                ",62],")",";",["T_WHITESPACE","\n                ",63],["T_VARIABLE","$isAvailableBA",64],["T_WHITESPACE"," ",64],"=",["T_WHITESPACE"," ",64],["T_STRING","count",64],"(",["T_VARIABLE","$availableBA",64],")",["T_WHITESPACE"," ",64],">",["T_WHITESPACE"," ",64],["T_LNUMBER","0",64],";",["T_WHITESPACE","\n                ",64],["T_VARIABLE","$this",65],["T_OBJECT_OPERATOR","->",65],["T_STRING","_canUseForMultishipping",65],["T_WHITESPACE"," ",65],"=",["T_WHITESPACE"," ",65],["T_VARIABLE","$this",65],["T_OBJECT_OPERATOR","->",65],["T_STRING","_canUseCheckout",65],["T_WHITESPACE"," ",65],"=",["T_WHITESPACE"," ",65],["T_VARIABLE","$this",65],["T_OBJECT_OPERATOR","->",65],["T_STRING","_canUseInternal",65],["T_WHITESPACE"," ",65],"=",["T_WHITESPACE"," ",65],["T_VARIABLE","$isAvailableBA",65],";",["T_WHITESPACE","\n            ",65],"}",["T_WHITESPACE","\n            ",66],["T_VARIABLE","$this",67],["T_OBJECT_OPERATOR","->",67],["T_STRING","_isAvailable",67],["T_WHITESPACE"," ",67],"=",["T_WHITESPACE"," ",67],["T_STRING","parent",67],["T_DOUBLE_COLON","::",67],["T_STRING","isAvailable",67],"(",["T_VARIABLE","$quote",67],")",["T_WHITESPACE"," ",67],["T_BOOLEAN_AND","&&",67],["T_WHITESPACE"," ",67],["T_VARIABLE","$this",67],["T_OBJECT_OPERATOR","->",67],["T_STRING","_isAvailable",67],"(",["T_VARIABLE","$quote",67],")",";",["T_WHITESPACE","\n            ",67],["T_VARIABLE","$this",68],["T_OBJECT_OPERATOR","->",68],["T_STRING","_canUseCheckout",68],["T_WHITESPACE"," ",68],"=",["T_WHITESPACE"," ",68],"(",["T_VARIABLE","$this",68],["T_OBJECT_OPERATOR","->",68],["T_STRING","_isAvailable",68],["T_WHITESPACE"," ",68],["T_BOOLEAN_AND","&&",68],["T_WHITESPACE"," ",68],["T_VARIABLE","$this",68],["T_OBJECT_OPERATOR","->",68],["T_STRING","_canUseCheckout",68],")",";",["T_WHITESPACE","\n            ",68],["T_VARIABLE","$this",69],["T_OBJECT_OPERATOR","->",69],["T_STRING","_canUseForMultishipping",69],["T_WHITESPACE"," ",69],"=",["T_WHITESPACE"," ",69],"(",["T_VARIABLE","$this",69],["T_OBJECT_OPERATOR","->",69],["T_STRING","_isAvailable",69],["T_WHITESPACE"," ",69],["T_BOOLEAN_AND","&&",69],["T_WHITESPACE"," ",69],["T_VARIABLE","$this",69],["T_OBJECT_OPERATOR","->",69],["T_STRING","_canUseForMultishipping",69],")",";",["T_WHITESPACE","\n            ",69],["T_VARIABLE","$this",70],["T_OBJECT_OPERATOR","->",70],["T_STRING","_canUseInternal",70],["T_WHITESPACE"," ",70],"=",["T_WHITESPACE"," ",70],"(",["T_VARIABLE","$this",70],["T_OBJECT_OPERATOR","->",70],["T_STRING","_isAvailable",70],["T_WHITESPACE"," ",70],["T_BOOLEAN_AND","&&",70],["T_WHITESPACE"," ",70],["T_VARIABLE","$this",70],["T_OBJECT_OPERATOR","->",70],["T_STRING","_canUseInternal",70],")",";",["T_WHITESPACE","\n        ",70],"}",["T_WHITESPACE","\n        ",71],["T_RETURN","return",72],["T_WHITESPACE"," ",72],["T_VARIABLE","$this",72],["T_OBJECT_OPERATOR","->",72],["T_STRING","_isAvailable",72],";",["T_WHITESPACE","\n    ",72],"}",["T_WHITESPACE","\n\n    ",73],["T_DOC_COMMENT","\/**\n     * Assign data to info model instance\n     *\n     * @param   mixed $data\n     * @return  Mage_Payment_Model_Info\n     *\/",75],["T_WHITESPACE","\n    ",80],["T_PUBLIC","public",81],["T_WHITESPACE"," ",81],["T_FUNCTION","function",81],["T_WHITESPACE"," ",81],["T_STRING","assignData",81],"(",["T_VARIABLE","$data",81],")",["T_WHITESPACE","\n    ",81],"{",["T_WHITESPACE","\n        ",82],["T_VARIABLE","$result",83],["T_WHITESPACE"," ",83],"=",["T_WHITESPACE"," ",83],["T_STRING","parent",83],["T_DOUBLE_COLON","::",83],["T_STRING","assignData",83],"(",["T_VARIABLE","$data",83],")",";",["T_WHITESPACE","\n\n        ",83],["T_VARIABLE","$key",85],["T_WHITESPACE"," ",85],"=",["T_WHITESPACE"," ",85],["T_STRING","self",85],["T_DOUBLE_COLON","::",85],["T_STRING","TRANSPORT_BILLING_AGREEMENT_ID",85],";",["T_WHITESPACE","\n        ",85],["T_VARIABLE","$id",86],["T_WHITESPACE"," ",86],"=",["T_WHITESPACE"," ",86],["T_STRING","false",86],";",["T_WHITESPACE","\n        ",86],["T_IF","if",87],["T_WHITESPACE"," ",87],"(",["T_STRING","is_array",87],"(",["T_VARIABLE","$data",87],")",["T_WHITESPACE"," ",87],["T_BOOLEAN_AND","&&",87],["T_WHITESPACE"," ",87],["T_ISSET","isset",87],"(",["T_VARIABLE","$data",87],"[",["T_VARIABLE","$key",87],"]",")",")",["T_WHITESPACE"," ",87],"{",["T_WHITESPACE","\n            ",87],["T_VARIABLE","$id",88],["T_WHITESPACE"," ",88],"=",["T_WHITESPACE"," ",88],["T_VARIABLE","$data",88],"[",["T_VARIABLE","$key",88],"]",";",["T_WHITESPACE","\n        ",88],"}",["T_WHITESPACE"," ",89],["T_ELSEIF","elseif",89],["T_WHITESPACE"," ",89],"(",["T_VARIABLE","$data",89],["T_WHITESPACE"," ",89],["T_INSTANCEOF","instanceof",89],["T_WHITESPACE"," ",89],["T_STRING","Varien_Object",89],["T_WHITESPACE"," ",89],["T_BOOLEAN_AND","&&",89],["T_WHITESPACE"," ",89],["T_VARIABLE","$data",89],["T_OBJECT_OPERATOR","->",89],["T_STRING","getData",89],"(",["T_VARIABLE","$key",89],")",")",["T_WHITESPACE"," ",89],"{",["T_WHITESPACE","\n            ",89],["T_VARIABLE","$id",90],["T_WHITESPACE"," ",90],"=",["T_WHITESPACE"," ",90],["T_VARIABLE","$data",90],["T_OBJECT_OPERATOR","->",90],["T_STRING","getData",90],"(",["T_VARIABLE","$key",90],")",";",["T_WHITESPACE","\n        ",90],"}",["T_WHITESPACE","\n        ",91],["T_IF","if",92],["T_WHITESPACE"," ",92],"(",["T_VARIABLE","$id",92],")",["T_WHITESPACE"," ",92],"{",["T_WHITESPACE","\n            ",92],["T_VARIABLE","$info",93],["T_WHITESPACE"," ",93],"=",["T_WHITESPACE"," ",93],["T_VARIABLE","$this",93],["T_OBJECT_OPERATOR","->",93],["T_STRING","getInfoInstance",93],"(",")",";",["T_WHITESPACE","\n            ",93],["T_VARIABLE","$ba",94],["T_WHITESPACE"," ",94],"=",["T_WHITESPACE"," ",94],["T_STRING","Mage",94],["T_DOUBLE_COLON","::",94],["T_STRING","getModel",94],"(",["T_CONSTANT_ENCAPSED_STRING","'sales\/billing_agreement'",94],")",["T_OBJECT_OPERATOR","->",94],["T_STRING","load",94],"(",["T_VARIABLE","$id",94],")",";",["T_WHITESPACE","\n            ",94],["T_IF","if",95],["T_WHITESPACE"," ",95],"(",["T_VARIABLE","$ba",95],["T_OBJECT_OPERATOR","->",95],["T_STRING","getId",95],"(",")",["T_WHITESPACE"," ",95],["T_BOOLEAN_AND","&&",95],["T_WHITESPACE"," ",95],["T_VARIABLE","$ba",95],["T_OBJECT_OPERATOR","->",95],["T_STRING","getCustomerId",95],"(",")",["T_WHITESPACE"," ",95],["T_IS_EQUAL","==",95],["T_WHITESPACE"," ",95],["T_VARIABLE","$info",95],["T_OBJECT_OPERATOR","->",95],["T_STRING","getQuote",95],"(",")",["T_OBJECT_OPERATOR","->",95],["T_STRING","getCustomer",95],"(",")",["T_OBJECT_OPERATOR","->",95],["T_STRING","getId",95],"(",")",")",["T_WHITESPACE"," ",95],"{",["T_WHITESPACE","\n                ",95],["T_VARIABLE","$info",96],["T_OBJECT_OPERATOR","->",96],["T_STRING","setAdditionalInformation",96],"(",["T_VARIABLE","$key",96],",",["T_WHITESPACE"," ",96],["T_VARIABLE","$id",96],")",["T_WHITESPACE","\n                    ",96],["T_OBJECT_OPERATOR","->",97],["T_STRING","setAdditionalInformation",97],"(",["T_STRING","self",97],["T_DOUBLE_COLON","::",97],["T_STRING","PAYMENT_INFO_REFERENCE_ID",97],",",["T_WHITESPACE"," ",97],["T_VARIABLE","$ba",97],["T_OBJECT_OPERATOR","->",97],["T_STRING","getReferenceId",97],"(",")",")",";",["T_WHITESPACE","\n            ",97],"}",["T_WHITESPACE","\n        ",98],"}",["T_WHITESPACE","\n        ",99],["T_RETURN","return",100],["T_WHITESPACE"," ",100],["T_VARIABLE","$result",100],";",["T_WHITESPACE","\n    ",100],"}",["T_WHITESPACE","\n\n    ",101],["T_DOC_COMMENT","\/**\n     *\n     *\n     * @param unknown_type $quote\n     *\/",103],["T_WHITESPACE","\n    ",107],["T_ABSTRACT","abstract",108],["T_WHITESPACE"," ",108],["T_PROTECTED","protected",108],["T_WHITESPACE"," ",108],["T_FUNCTION","function",108],["T_WHITESPACE"," ",108],["T_STRING","_isAvailable",108],"(",["T_VARIABLE","$quote",108],")",";",["T_WHITESPACE","\n",108],"}",["T_WHITESPACE","\n",109]]
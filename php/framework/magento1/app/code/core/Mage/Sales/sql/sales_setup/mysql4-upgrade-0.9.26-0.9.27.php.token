[["T_OPEN_TAG","<?php\n",1],["T_DOC_COMMENT","\/**\n * Magento\n *\n * NOTICE OF LICENSE\n *\n * This source file is subject to the Open Software License (OSL 3.0)\n * that is bundled with this package in the file LICENSE.txt.\n * It is also available through the world-wide-web at this URL:\n * http:\/\/opensource.org\/licenses\/osl-3.0.php\n * If you did not receive a copy of the license and are unable to\n * obtain it through the world-wide-web, please send an email\n * to license@magento.com so we can send you a copy immediately.\n *\n * DISCLAIMER\n *\n * Do not edit or add to this file if you wish to upgrade Magento to newer\n * versions in the future. If you wish to customize Magento for your\n * needs please refer to http:\/\/www.magento.com for more information.\n *\n * @category    Mage\n * @package     Mage_Sales\n * @copyright  Copyright (c) 2006-2016 X.commerce, Inc. and affiliates (http:\/\/www.magento.com)\n * @license    http:\/\/opensource.org\/licenses\/osl-3.0.php  Open Software License (OSL 3.0)\n *\/",2],["T_WHITESPACE","\n\n",25],["T_COMMENT","\/\/ very long update :)\n",27],["T_STRING","set_time_limit",28],"(",["T_LNUMBER","0",28],")",";",["T_WHITESPACE","\n\n",28],["T_VARIABLE","$installer",30],["T_WHITESPACE"," ",30],"=",["T_WHITESPACE"," ",30],["T_VARIABLE","$this",30],";",["T_WHITESPACE","\n",30],["T_COMMENT","\/* @var $installer Mage_Sales_Model_Mysql4_Setup *\/",31],["T_WHITESPACE","\n\n",31],["T_VARIABLE","$installer",33],["T_OBJECT_OPERATOR","->",33],["T_STRING","getConnection",33],"(",")",["T_OBJECT_OPERATOR","->",33],["T_STRING","addColumn",33],"(",["T_WHITESPACE","\n    ",33],["T_VARIABLE","$this",34],["T_OBJECT_OPERATOR","->",34],["T_STRING","getTable",34],"(",["T_CONSTANT_ENCAPSED_STRING","'sales\/quote'",34],")",",",["T_WHITESPACE"," ",34],["T_CONSTANT_ENCAPSED_STRING","'global_currency_code'",34],",",["T_WHITESPACE"," ",34],["T_CONSTANT_ENCAPSED_STRING","'varchar(255) NULL AFTER `store_to_quote_rate`'",34],["T_WHITESPACE","\n",34],")",";",["T_WHITESPACE","\n",35],["T_VARIABLE","$installer",36],["T_OBJECT_OPERATOR","->",36],["T_STRING","getConnection",36],"(",")",["T_OBJECT_OPERATOR","->",36],["T_STRING","addColumn",36],"(",["T_WHITESPACE","\n    ",36],["T_VARIABLE","$this",37],["T_OBJECT_OPERATOR","->",37],["T_STRING","getTable",37],"(",["T_CONSTANT_ENCAPSED_STRING","'sales\/quote'",37],")",",",["T_WHITESPACE"," ",37],["T_CONSTANT_ENCAPSED_STRING","'base_to_quote_rate'",37],",",["T_WHITESPACE"," ",37],["T_CONSTANT_ENCAPSED_STRING","'decimal(12,4) NULL AFTER `store_to_quote_rate`'",37],["T_WHITESPACE","\n",37],")",";",["T_WHITESPACE","\n",38],["T_VARIABLE","$installer",39],["T_OBJECT_OPERATOR","->",39],["T_STRING","getConnection",39],"(",")",["T_OBJECT_OPERATOR","->",39],["T_STRING","addColumn",39],"(",["T_WHITESPACE","\n    ",39],["T_VARIABLE","$this",40],["T_OBJECT_OPERATOR","->",40],["T_STRING","getTable",40],"(",["T_CONSTANT_ENCAPSED_STRING","'sales\/quote'",40],")",",",["T_WHITESPACE"," ",40],["T_CONSTANT_ENCAPSED_STRING","'base_to_global_rate'",40],",",["T_WHITESPACE"," ",40],["T_CONSTANT_ENCAPSED_STRING","'decimal(12,4) NULL AFTER `store_to_quote_rate`'",40],["T_WHITESPACE","\n",40],")",";",["T_WHITESPACE","\n\n",41],["T_VARIABLE","$installer",43],["T_OBJECT_OPERATOR","->",43],["T_STRING","addAttribute",43],"(",["T_CONSTANT_ENCAPSED_STRING","'quote'",43],",",["T_WHITESPACE"," ",43],["T_CONSTANT_ENCAPSED_STRING","'global_currency_code'",43],",",["T_WHITESPACE"," ",43],["T_ARRAY","array",43],"(",["T_CONSTANT_ENCAPSED_STRING","'type'",43],["T_DOUBLE_ARROW","=>",43],["T_CONSTANT_ENCAPSED_STRING","'static'",43],")",")",";",["T_WHITESPACE","\n",43],["T_VARIABLE","$installer",44],["T_OBJECT_OPERATOR","->",44],["T_STRING","addAttribute",44],"(",["T_CONSTANT_ENCAPSED_STRING","'quote'",44],",",["T_WHITESPACE"," ",44],["T_CONSTANT_ENCAPSED_STRING","'base_to_global_rate'",44],",",["T_WHITESPACE"," ",44],["T_ARRAY","array",44],"(",["T_CONSTANT_ENCAPSED_STRING","'type'",44],["T_DOUBLE_ARROW","=>",44],["T_CONSTANT_ENCAPSED_STRING","'static'",44],")",")",";",["T_WHITESPACE","\n",44],["T_VARIABLE","$installer",45],["T_OBJECT_OPERATOR","->",45],["T_STRING","addAttribute",45],"(",["T_CONSTANT_ENCAPSED_STRING","'quote'",45],",",["T_WHITESPACE"," ",45],["T_CONSTANT_ENCAPSED_STRING","'base_to_quote_rate'",45],",",["T_WHITESPACE"," ",45],["T_ARRAY","array",45],"(",["T_CONSTANT_ENCAPSED_STRING","'type'",45],["T_DOUBLE_ARROW","=>",45],["T_CONSTANT_ENCAPSED_STRING","'static'",45],")",")",";",["T_WHITESPACE","\n\n",45],["T_VARIABLE","$installer",47],["T_OBJECT_OPERATOR","->",47],["T_STRING","addAttribute",47],"(",["T_CONSTANT_ENCAPSED_STRING","'order'",47],",",["T_WHITESPACE"," ",47],["T_CONSTANT_ENCAPSED_STRING","'global_currency_code'",47],",",["T_WHITESPACE"," ",47],["T_ARRAY","array",47],"(",["T_CONSTANT_ENCAPSED_STRING","'type'",47],["T_DOUBLE_ARROW","=>",47],["T_CONSTANT_ENCAPSED_STRING","'varchar'",47],")",")",";",["T_WHITESPACE","\n",47],["T_VARIABLE","$installer",48],["T_OBJECT_OPERATOR","->",48],["T_STRING","addAttribute",48],"(",["T_CONSTANT_ENCAPSED_STRING","'order'",48],",",["T_WHITESPACE"," ",48],["T_CONSTANT_ENCAPSED_STRING","'base_to_global_rate'",48],",",["T_WHITESPACE"," ",48],["T_ARRAY","array",48],"(",["T_CONSTANT_ENCAPSED_STRING","'type'",48],["T_DOUBLE_ARROW","=>",48],["T_CONSTANT_ENCAPSED_STRING","'decimal'",48],")",")",";",["T_WHITESPACE","\n",48],["T_VARIABLE","$installer",49],["T_OBJECT_OPERATOR","->",49],["T_STRING","addAttribute",49],"(",["T_CONSTANT_ENCAPSED_STRING","'order'",49],",",["T_WHITESPACE"," ",49],["T_CONSTANT_ENCAPSED_STRING","'base_to_order_rate'",49],",",["T_WHITESPACE"," ",49],["T_ARRAY","array",49],"(",["T_CONSTANT_ENCAPSED_STRING","'type'",49],["T_DOUBLE_ARROW","=>",49],["T_CONSTANT_ENCAPSED_STRING","'decimal'",49],")",")",";",["T_WHITESPACE","\n\n",49],["T_VARIABLE","$installer",51],["T_OBJECT_OPERATOR","->",51],["T_STRING","addAttribute",51],"(",["T_CONSTANT_ENCAPSED_STRING","'invoice'",51],",",["T_WHITESPACE"," ",51],["T_CONSTANT_ENCAPSED_STRING","'global_currency_code'",51],",",["T_WHITESPACE"," ",51],["T_ARRAY","array",51],"(",["T_CONSTANT_ENCAPSED_STRING","'type'",51],["T_DOUBLE_ARROW","=>",51],["T_CONSTANT_ENCAPSED_STRING","'varchar'",51],")",")",";",["T_WHITESPACE","\n",51],["T_VARIABLE","$installer",52],["T_OBJECT_OPERATOR","->",52],["T_STRING","addAttribute",52],"(",["T_CONSTANT_ENCAPSED_STRING","'invoice'",52],",",["T_WHITESPACE"," ",52],["T_CONSTANT_ENCAPSED_STRING","'base_to_global_rate'",52],",",["T_WHITESPACE"," ",52],["T_ARRAY","array",52],"(",["T_CONSTANT_ENCAPSED_STRING","'type'",52],["T_DOUBLE_ARROW","=>",52],["T_CONSTANT_ENCAPSED_STRING","'decimal'",52],")",")",";",["T_WHITESPACE","\n",52],["T_VARIABLE","$installer",53],["T_OBJECT_OPERATOR","->",53],["T_STRING","addAttribute",53],"(",["T_CONSTANT_ENCAPSED_STRING","'invoice'",53],",",["T_WHITESPACE"," ",53],["T_CONSTANT_ENCAPSED_STRING","'base_to_order_rate'",53],",",["T_WHITESPACE"," ",53],["T_ARRAY","array",53],"(",["T_CONSTANT_ENCAPSED_STRING","'type'",53],["T_DOUBLE_ARROW","=>",53],["T_CONSTANT_ENCAPSED_STRING","'decimal'",53],")",")",";",["T_WHITESPACE","\n\n",53],["T_VARIABLE","$installer",55],["T_OBJECT_OPERATOR","->",55],["T_STRING","addAttribute",55],"(",["T_CONSTANT_ENCAPSED_STRING","'creditmemo'",55],",",["T_WHITESPACE"," ",55],["T_CONSTANT_ENCAPSED_STRING","'global_currency_code'",55],",",["T_WHITESPACE"," ",55],["T_ARRAY","array",55],"(",["T_CONSTANT_ENCAPSED_STRING","'type'",55],["T_DOUBLE_ARROW","=>",55],["T_CONSTANT_ENCAPSED_STRING","'varchar'",55],")",")",";",["T_WHITESPACE","\n",55],["T_VARIABLE","$installer",56],["T_OBJECT_OPERATOR","->",56],["T_STRING","addAttribute",56],"(",["T_CONSTANT_ENCAPSED_STRING","'creditmemo'",56],",",["T_WHITESPACE"," ",56],["T_CONSTANT_ENCAPSED_STRING","'base_to_global_rate'",56],",",["T_WHITESPACE"," ",56],["T_ARRAY","array",56],"(",["T_CONSTANT_ENCAPSED_STRING","'type'",56],["T_DOUBLE_ARROW","=>",56],["T_CONSTANT_ENCAPSED_STRING","'decimal'",56],")",")",";",["T_WHITESPACE","\n",56],["T_VARIABLE","$installer",57],["T_OBJECT_OPERATOR","->",57],["T_STRING","addAttribute",57],"(",["T_CONSTANT_ENCAPSED_STRING","'creditmemo'",57],",",["T_WHITESPACE"," ",57],["T_CONSTANT_ENCAPSED_STRING","'base_to_order_rate'",57],",",["T_WHITESPACE"," ",57],["T_ARRAY","array",57],"(",["T_CONSTANT_ENCAPSED_STRING","'type'",57],["T_DOUBLE_ARROW","=>",57],["T_CONSTANT_ENCAPSED_STRING","'decimal'",57],")",")",";",["T_WHITESPACE","\n\n",57],["T_COMMENT","\/*\n * getting all base currency codes and placing them in newly created attribute\n *\/",59],["T_WHITESPACE","\n\n",61],["T_VARIABLE","$orderEntityType",63],["T_WHITESPACE"," ",63],"=",["T_WHITESPACE"," ",63],["T_VARIABLE","$installer",63],["T_OBJECT_OPERATOR","->",63],["T_STRING","getEntityType",63],"(",["T_CONSTANT_ENCAPSED_STRING","'order'",63],")",";",["T_WHITESPACE","\n",63],["T_VARIABLE","$orderEntityType",64],"[",["T_CONSTANT_ENCAPSED_STRING","'entity_table'",64],"]",["T_WHITESPACE"," ",64],"=",["T_WHITESPACE"," ",64],["T_CONSTANT_ENCAPSED_STRING","'sales_order'",64],";",["T_WHITESPACE","\n",64],["T_VARIABLE","$invoiceEntityType",65],["T_WHITESPACE"," ",65],"=",["T_WHITESPACE"," ",65],["T_VARIABLE","$installer",65],["T_OBJECT_OPERATOR","->",65],["T_STRING","getEntityType",65],"(",["T_CONSTANT_ENCAPSED_STRING","'invoice'",65],")",";",["T_WHITESPACE","\n",65],["T_VARIABLE","$invoiceEntityType",66],"[",["T_CONSTANT_ENCAPSED_STRING","'entity_table'",66],"]",["T_WHITESPACE"," ",66],"=",["T_WHITESPACE"," ",66],["T_CONSTANT_ENCAPSED_STRING","'sales_order_entity'",66],";",["T_WHITESPACE","\n",66],["T_VARIABLE","$creditmemoEntityType",67],["T_WHITESPACE"," ",67],"=",["T_WHITESPACE"," ",67],["T_VARIABLE","$installer",67],["T_OBJECT_OPERATOR","->",67],["T_STRING","getEntityType",67],"(",["T_CONSTANT_ENCAPSED_STRING","'creditmemo'",67],")",";",["T_WHITESPACE","\n",67],["T_VARIABLE","$creditmemoEntityType",68],"[",["T_CONSTANT_ENCAPSED_STRING","'entity_table'",68],"]",["T_WHITESPACE"," ",68],"=",["T_WHITESPACE"," ",68],["T_CONSTANT_ENCAPSED_STRING","'sales_order_entity'",68],";",["T_WHITESPACE","\n\n",68],["T_VARIABLE","$entityTypes",70],["T_WHITESPACE"," ",70],"=",["T_WHITESPACE"," ",70],["T_ARRAY","array",70],"(",["T_VARIABLE","$orderEntityType",70],"[",["T_CONSTANT_ENCAPSED_STRING","'entity_type_id'",70],"]",["T_WHITESPACE"," ",70],["T_DOUBLE_ARROW","=>",70],["T_WHITESPACE"," ",70],["T_VARIABLE","$orderEntityType",70],",",["T_WHITESPACE","\n    ",70],["T_VARIABLE","$invoiceEntityType",71],"[",["T_CONSTANT_ENCAPSED_STRING","'entity_type_id'",71],"]",["T_WHITESPACE"," ",71],["T_DOUBLE_ARROW","=>",71],["T_WHITESPACE"," ",71],["T_VARIABLE","$invoiceEntityType",71],",",["T_WHITESPACE","\n    ",71],["T_VARIABLE","$creditmemoEntityType",72],"[",["T_CONSTANT_ENCAPSED_STRING","'entity_type_id'",72],"]",["T_WHITESPACE"," ",72],["T_DOUBLE_ARROW","=>",72],["T_WHITESPACE"," ",72],["T_VARIABLE","$creditmemoEntityType",72],")",";",["T_WHITESPACE","\n\n",72],["T_TRY","try",74],["T_WHITESPACE"," ",74],"{",["T_WHITESPACE","\n    ",74],["T_VARIABLE","$installer",75],["T_OBJECT_OPERATOR","->",75],["T_STRING","getConnection",75],"(",")",["T_OBJECT_OPERATOR","->",75],["T_STRING","beginTransaction",75],"(",")",";",["T_WHITESPACE","\n\n    ",75],["T_FOREACH","foreach",77],["T_WHITESPACE"," ",77],"(",["T_VARIABLE","$entityTypes",77],["T_WHITESPACE"," ",77],["T_AS","as",77],["T_WHITESPACE"," ",77],["T_VARIABLE","$typeId",77],["T_WHITESPACE"," ",77],["T_DOUBLE_ARROW","=>",77],["T_WHITESPACE"," ",77],["T_VARIABLE","$entity",77],")",["T_WHITESPACE"," ",77],"{",["T_WHITESPACE","\n\n        ",77],["T_VARIABLE","$globalCurrencyCode",79],["T_WHITESPACE"," ",79],"=",["T_WHITESPACE"," ",79],["T_VARIABLE","$installer",79],["T_OBJECT_OPERATOR","->",79],["T_STRING","getAttribute",79],"(",["T_VARIABLE","$typeId",79],",",["T_WHITESPACE"," ",79],["T_CONSTANT_ENCAPSED_STRING","'global_currency_code'",79],")",";",["T_WHITESPACE","\n        ",79],["T_IF","if",80],["T_WHITESPACE"," ",80],"(",["T_VARIABLE","$globalCurrencyCode",80],"[",["T_CONSTANT_ENCAPSED_STRING","'backend_type'",80],"]",["T_WHITESPACE"," ",80],["T_IS_EQUAL","==",80],["T_WHITESPACE"," ",80],["T_CONSTANT_ENCAPSED_STRING","'static'",80],")",["T_WHITESPACE"," ",80],"{",["T_WHITESPACE","\n            ",80],["T_VARIABLE","$globalCurrencyCodeTable",81],["T_WHITESPACE"," ",81],"=",["T_WHITESPACE"," ",81],["T_VARIABLE","$this",81],["T_OBJECT_OPERATOR","->",81],["T_STRING","getTable",81],"(",["T_VARIABLE","$entity",81],"[",["T_CONSTANT_ENCAPSED_STRING","'entity_table'",81],"]",")",";",["T_WHITESPACE","\n        ",81],"}",["T_WHITESPACE"," ",82],["T_ELSE","else",82],["T_WHITESPACE"," ",82],"{",["T_WHITESPACE","\n            ",82],["T_VARIABLE","$globalCurrencyCodeTable",83],["T_WHITESPACE"," ",83],"=",["T_WHITESPACE"," ",83],["T_VARIABLE","$this",83],["T_OBJECT_OPERATOR","->",83],["T_STRING","getTable",83],"(",["T_VARIABLE","$entity",83],"[",["T_CONSTANT_ENCAPSED_STRING","'entity_table'",83],"]",")",["T_WHITESPACE"," ",83],".",["T_WHITESPACE"," ",83],["T_CONSTANT_ENCAPSED_STRING","'_'",83],["T_WHITESPACE","\n                ",83],".",["T_WHITESPACE"," ",84],["T_VARIABLE","$globalCurrencyCode",84],"[",["T_CONSTANT_ENCAPSED_STRING","'backend_type'",84],"]",";",["T_WHITESPACE","\n        ",84],"}",["T_WHITESPACE","\n\n        ",85],["T_VARIABLE","$baseCurrencyCode",87],["T_WHITESPACE"," ",87],"=",["T_WHITESPACE"," ",87],["T_VARIABLE","$installer",87],["T_OBJECT_OPERATOR","->",87],["T_STRING","getAttribute",87],"(",["T_VARIABLE","$typeId",87],",",["T_WHITESPACE"," ",87],["T_CONSTANT_ENCAPSED_STRING","'base_currency_code'",87],")",";",["T_WHITESPACE","\n        ",87],["T_IF","if",88],["T_WHITESPACE"," ",88],"(",["T_VARIABLE","$baseCurrencyCode",88],"[",["T_CONSTANT_ENCAPSED_STRING","'backend_type'",88],"]",["T_WHITESPACE"," ",88],["T_IS_EQUAL","==",88],["T_WHITESPACE"," ",88],["T_CONSTANT_ENCAPSED_STRING","'static'",88],")",["T_WHITESPACE"," ",88],"{",["T_WHITESPACE","\n            ",88],["T_VARIABLE","$baseCurrencyCodeTable",89],["T_WHITESPACE"," ",89],"=",["T_WHITESPACE"," ",89],["T_VARIABLE","$this",89],["T_OBJECT_OPERATOR","->",89],["T_STRING","getTable",89],"(",["T_VARIABLE","$entity",89],"[",["T_CONSTANT_ENCAPSED_STRING","'entity_table'",89],"]",")",";",["T_WHITESPACE","\n        ",89],"}",["T_WHITESPACE"," ",90],["T_ELSE","else",90],["T_WHITESPACE"," ",90],"{",["T_WHITESPACE","\n            ",90],["T_VARIABLE","$baseCurrencyCodeTable",91],["T_WHITESPACE"," ",91],"=",["T_WHITESPACE"," ",91],["T_VARIABLE","$this",91],["T_OBJECT_OPERATOR","->",91],["T_STRING","getTable",91],"(",["T_VARIABLE","$entity",91],"[",["T_CONSTANT_ENCAPSED_STRING","'entity_table'",91],"]",")",["T_WHITESPACE"," ",91],".",["T_WHITESPACE"," ",91],["T_CONSTANT_ENCAPSED_STRING","'_'",91],["T_WHITESPACE","\n                ",91],".",["T_WHITESPACE"," ",92],["T_VARIABLE","$baseCurrencyCode",92],"[",["T_CONSTANT_ENCAPSED_STRING","'backend_type'",92],"]",";",["T_WHITESPACE","\n        ",92],"}",["T_WHITESPACE","\n\n        ",93],["T_VARIABLE","$storeCurrencyCode",95],["T_WHITESPACE"," ",95],"=",["T_WHITESPACE"," ",95],["T_VARIABLE","$installer",95],["T_OBJECT_OPERATOR","->",95],["T_STRING","getAttribute",95],"(",["T_VARIABLE","$typeId",95],",",["T_WHITESPACE"," ",95],["T_CONSTANT_ENCAPSED_STRING","'store_currency_code'",95],")",";",["T_WHITESPACE","\n        ",95],["T_IF","if",96],["T_WHITESPACE"," ",96],"(",["T_VARIABLE","$storeCurrencyCode",96],"[",["T_CONSTANT_ENCAPSED_STRING","'backend_type'",96],"]",["T_WHITESPACE"," ",96],["T_IS_EQUAL","==",96],["T_WHITESPACE"," ",96],["T_CONSTANT_ENCAPSED_STRING","'static'",96],")",["T_WHITESPACE"," ",96],"{",["T_WHITESPACE","\n            ",96],["T_VARIABLE","$storeCurrencyCodeTable",97],["T_WHITESPACE"," ",97],"=",["T_WHITESPACE"," ",97],["T_VARIABLE","$this",97],["T_OBJECT_OPERATOR","->",97],["T_STRING","getTable",97],"(",["T_VARIABLE","$entity",97],"[",["T_CONSTANT_ENCAPSED_STRING","'entity_table'",97],"]",")",";",["T_WHITESPACE","\n        ",97],"}",["T_WHITESPACE"," ",98],["T_ELSE","else",98],["T_WHITESPACE"," ",98],"{",["T_WHITESPACE","\n            ",98],["T_VARIABLE","$storeCurrencyCodeTable",99],["T_WHITESPACE"," ",99],"=",["T_WHITESPACE"," ",99],["T_VARIABLE","$this",99],["T_OBJECT_OPERATOR","->",99],["T_STRING","getTable",99],"(",["T_VARIABLE","$entity",99],"[",["T_CONSTANT_ENCAPSED_STRING","'entity_table'",99],"]",")",["T_WHITESPACE"," ",99],".",["T_WHITESPACE"," ",99],["T_CONSTANT_ENCAPSED_STRING","'_'",99],["T_WHITESPACE","\n                ",99],".",["T_WHITESPACE"," ",100],["T_VARIABLE","$storeCurrencyCode",100],"[",["T_CONSTANT_ENCAPSED_STRING","'backend_type'",100],"]",";",["T_WHITESPACE","\n        ",100],"}",["T_WHITESPACE","\n\n        ",101],["T_VARIABLE","$baseToGlobalRate",103],["T_WHITESPACE"," ",103],"=",["T_WHITESPACE"," ",103],["T_VARIABLE","$installer",103],["T_OBJECT_OPERATOR","->",103],["T_STRING","getAttribute",103],"(",["T_VARIABLE","$typeId",103],",",["T_WHITESPACE"," ",103],["T_CONSTANT_ENCAPSED_STRING","'base_to_global_rate'",103],")",";",["T_WHITESPACE","\n        ",103],["T_IF","if",104],["T_WHITESPACE"," ",104],"(",["T_VARIABLE","$baseToGlobalRate",104],"[",["T_CONSTANT_ENCAPSED_STRING","'backend_type'",104],"]",["T_WHITESPACE"," ",104],["T_IS_EQUAL","==",104],["T_WHITESPACE"," ",104],["T_CONSTANT_ENCAPSED_STRING","'static'",104],")",["T_WHITESPACE"," ",104],"{",["T_WHITESPACE","\n            ",104],["T_VARIABLE","$baseToGlobalRateTable",105],["T_WHITESPACE"," ",105],"=",["T_WHITESPACE"," ",105],["T_VARIABLE","$this",105],["T_OBJECT_OPERATOR","->",105],["T_STRING","getTable",105],"(",["T_VARIABLE","$entity",105],"[",["T_CONSTANT_ENCAPSED_STRING","'entity_table'",105],"]",")",";",["T_WHITESPACE","\n        ",105],"}",["T_WHITESPACE"," ",106],["T_ELSE","else",106],["T_WHITESPACE"," ",106],"{",["T_WHITESPACE","\n            ",106],["T_VARIABLE","$baseToGlobalRateTable",107],["T_WHITESPACE"," ",107],"=",["T_WHITESPACE"," ",107],["T_VARIABLE","$this",107],["T_OBJECT_OPERATOR","->",107],["T_STRING","getTable",107],"(",["T_VARIABLE","$entity",107],"[",["T_CONSTANT_ENCAPSED_STRING","'entity_table'",107],"]",")",["T_WHITESPACE"," ",107],".",["T_WHITESPACE"," ",107],["T_CONSTANT_ENCAPSED_STRING","'_'",107],["T_WHITESPACE"," ",107],".",["T_WHITESPACE"," ",107],["T_VARIABLE","$baseToGlobalRate",107],"[",["T_CONSTANT_ENCAPSED_STRING","'backend_type'",107],"]",";",["T_WHITESPACE","\n        ",107],"}",["T_WHITESPACE","\n\n        ",108],["T_VARIABLE","$storeToBaseRate",110],["T_WHITESPACE"," ",110],"=",["T_WHITESPACE"," ",110],["T_VARIABLE","$installer",110],["T_OBJECT_OPERATOR","->",110],["T_STRING","getAttribute",110],"(",["T_VARIABLE","$typeId",110],",",["T_WHITESPACE"," ",110],["T_CONSTANT_ENCAPSED_STRING","'store_to_base_rate'",110],")",";",["T_WHITESPACE","\n        ",110],["T_IF","if",111],["T_WHITESPACE"," ",111],"(",["T_VARIABLE","$storeToBaseRate",111],"[",["T_CONSTANT_ENCAPSED_STRING","'backend_type'",111],"]",["T_WHITESPACE"," ",111],["T_IS_EQUAL","==",111],["T_WHITESPACE"," ",111],["T_CONSTANT_ENCAPSED_STRING","'static'",111],")",["T_WHITESPACE"," ",111],"{",["T_WHITESPACE","\n            ",111],["T_VARIABLE","$storeToBaseRateTable",112],["T_WHITESPACE"," ",112],"=",["T_WHITESPACE"," ",112],["T_VARIABLE","$this",112],["T_OBJECT_OPERATOR","->",112],["T_STRING","getTable",112],"(",["T_VARIABLE","$entity",112],"[",["T_CONSTANT_ENCAPSED_STRING","'entity_table'",112],"]",")",";",["T_WHITESPACE","\n        ",112],"}",["T_WHITESPACE"," ",113],["T_ELSE","else",113],["T_WHITESPACE"," ",113],"{",["T_WHITESPACE","\n            ",113],["T_VARIABLE","$storeToBaseRateTable",114],["T_WHITESPACE"," ",114],"=",["T_WHITESPACE"," ",114],["T_VARIABLE","$this",114],["T_OBJECT_OPERATOR","->",114],["T_STRING","getTable",114],"(",["T_VARIABLE","$entity",114],"[",["T_CONSTANT_ENCAPSED_STRING","'entity_table'",114],"]",")",["T_WHITESPACE"," ",114],".",["T_WHITESPACE"," ",114],["T_CONSTANT_ENCAPSED_STRING","'_'",114],["T_WHITESPACE"," ",114],".",["T_WHITESPACE"," ",114],["T_VARIABLE","$storeToBaseRate",114],"[",["T_CONSTANT_ENCAPSED_STRING","'backend_type'",114],"]",";",["T_WHITESPACE","\n        ",114],"}",["T_WHITESPACE","\n\n        ",115],["T_VARIABLE","$baseToOrderRate",117],["T_WHITESPACE"," ",117],"=",["T_WHITESPACE"," ",117],["T_VARIABLE","$installer",117],["T_OBJECT_OPERATOR","->",117],["T_STRING","getAttribute",117],"(",["T_VARIABLE","$typeId",117],",",["T_WHITESPACE"," ",117],["T_CONSTANT_ENCAPSED_STRING","'base_to_order_rate'",117],")",";",["T_WHITESPACE","\n        ",117],["T_IF","if",118],["T_WHITESPACE"," ",118],"(",["T_VARIABLE","$baseToOrderRate",118],"[",["T_CONSTANT_ENCAPSED_STRING","'backend_type'",118],"]",["T_WHITESPACE"," ",118],["T_IS_EQUAL","==",118],["T_WHITESPACE"," ",118],["T_CONSTANT_ENCAPSED_STRING","'static'",118],")",["T_WHITESPACE"," ",118],"{",["T_WHITESPACE","\n            ",118],["T_VARIABLE","$baseToOrderRateTable",119],["T_WHITESPACE"," ",119],"=",["T_WHITESPACE"," ",119],["T_VARIABLE","$this",119],["T_OBJECT_OPERATOR","->",119],["T_STRING","getTable",119],"(",["T_VARIABLE","$entity",119],"[",["T_CONSTANT_ENCAPSED_STRING","'entity_table'",119],"]",")",";",["T_WHITESPACE","\n        ",119],"}",["T_WHITESPACE"," ",120],["T_ELSE","else",120],["T_WHITESPACE"," ",120],"{",["T_WHITESPACE","\n            ",120],["T_VARIABLE","$baseToOrderRateTable",121],["T_WHITESPACE"," ",121],"=",["T_WHITESPACE"," ",121],["T_VARIABLE","$this",121],["T_OBJECT_OPERATOR","->",121],["T_STRING","getTable",121],"(",["T_VARIABLE","$entity",121],"[",["T_CONSTANT_ENCAPSED_STRING","'entity_table'",121],"]",")",["T_WHITESPACE"," ",121],".",["T_WHITESPACE"," ",121],["T_CONSTANT_ENCAPSED_STRING","'_'",121],["T_WHITESPACE"," ",121],".",["T_WHITESPACE"," ",121],["T_VARIABLE","$baseToOrderRate",121],"[",["T_CONSTANT_ENCAPSED_STRING","'backend_type'",121],"]",";",["T_WHITESPACE","\n        ",121],"}",["T_WHITESPACE","\n\n        ",122],["T_VARIABLE","$storeToOrderRate",124],["T_WHITESPACE"," ",124],"=",["T_WHITESPACE"," ",124],["T_VARIABLE","$installer",124],["T_OBJECT_OPERATOR","->",124],["T_STRING","getAttribute",124],"(",["T_VARIABLE","$typeId",124],",",["T_WHITESPACE"," ",124],["T_CONSTANT_ENCAPSED_STRING","'store_to_order_rate'",124],")",";",["T_WHITESPACE","\n        ",124],["T_IF","if",125],["T_WHITESPACE"," ",125],"(",["T_VARIABLE","$storeToOrderRate",125],"[",["T_CONSTANT_ENCAPSED_STRING","'backend_type'",125],"]",["T_WHITESPACE"," ",125],["T_IS_EQUAL","==",125],["T_WHITESPACE"," ",125],["T_CONSTANT_ENCAPSED_STRING","'static'",125],")",["T_WHITESPACE"," ",125],"{",["T_WHITESPACE","\n            ",125],["T_VARIABLE","$storeToOrderRateTable",126],["T_WHITESPACE"," ",126],"=",["T_WHITESPACE"," ",126],["T_VARIABLE","$this",126],["T_OBJECT_OPERATOR","->",126],["T_STRING","getTable",126],"(",["T_VARIABLE","$entity",126],"[",["T_CONSTANT_ENCAPSED_STRING","'entity_table'",126],"]",")",";",["T_WHITESPACE","\n        ",126],"}",["T_WHITESPACE"," ",127],["T_ELSE","else",127],["T_WHITESPACE"," ",127],"{",["T_WHITESPACE","\n            ",127],["T_VARIABLE","$storeToOrderRateTable",128],["T_WHITESPACE"," ",128],"=",["T_WHITESPACE"," ",128],["T_VARIABLE","$this",128],["T_OBJECT_OPERATOR","->",128],["T_STRING","getTable",128],"(",["T_VARIABLE","$entity",128],"[",["T_CONSTANT_ENCAPSED_STRING","'entity_table'",128],"]",")",["T_WHITESPACE"," ",128],".",["T_WHITESPACE"," ",128],["T_CONSTANT_ENCAPSED_STRING","'_'",128],["T_WHITESPACE"," ",128],".",["T_WHITESPACE"," ",128],["T_VARIABLE","$storeToOrderRate",128],"[",["T_CONSTANT_ENCAPSED_STRING","'backend_type'",128],"]",";",["T_WHITESPACE","\n        ",128],"}",["T_WHITESPACE","\n        ",129],["T_COMMENT","\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\n",130],["T_WHITESPACE","\n        ",131],["T_COMMENT","\/\/copy data from base_currency_code into global_currency_code\n",132],["T_WHITESPACE","        ",133],["T_VARIABLE","$query",133],["T_WHITESPACE"," ",133],"=",["T_WHITESPACE"," ",133],["T_CONSTANT_ENCAPSED_STRING","'INSERT INTO `'",133],["T_WHITESPACE"," ",133],".",["T_WHITESPACE"," ",133],["T_VARIABLE","$globalCurrencyCodeTable",133],["T_WHITESPACE"," ",133],".",["T_WHITESPACE","\n            ",133],["T_CONSTANT_ENCAPSED_STRING","'` (`entity_type_id`, `attribute_id`, `entity_id`, `value`) SELECT `entity_type_id`, \"'",134],["T_WHITESPACE"," ",134],".",["T_WHITESPACE","\n            ",134],["T_VARIABLE","$globalCurrencyCode",135],"[",["T_CONSTANT_ENCAPSED_STRING","'attribute_id'",135],"]",["T_WHITESPACE"," ",135],".",["T_WHITESPACE"," ",135],["T_CONSTANT_ENCAPSED_STRING","'\" as `attribute_id`, `entity_id`, `value` FROM `'",135],["T_WHITESPACE"," ",135],".",["T_WHITESPACE","\n            ",135],["T_VARIABLE","$baseCurrencyCodeTable",136],["T_WHITESPACE"," ",136],".",["T_WHITESPACE"," ",136],["T_CONSTANT_ENCAPSED_STRING","'` WHERE `attribute_id` = '",136],["T_WHITESPACE"," ",136],".",["T_WHITESPACE"," ",136],["T_VARIABLE","$baseCurrencyCode",136],"[",["T_CONSTANT_ENCAPSED_STRING","'attribute_id'",136],"]",["T_WHITESPACE"," ",136],".",["T_WHITESPACE"," ",136],["T_CONSTANT_ENCAPSED_STRING","';'",136],";",["T_WHITESPACE","\n\n        ",136],["T_COMMENT","\/\/echo $query . \"<br \/>\";\n",138],["T_WHITESPACE","        ",139],["T_VARIABLE","$installer",139],["T_OBJECT_OPERATOR","->",139],["T_STRING","getConnection",139],"(",")",["T_OBJECT_OPERATOR","->",139],["T_STRING","query",139],"(",["T_VARIABLE","$query",139],")",";",["T_WHITESPACE","\n\n        ",139],["T_COMMENT","\/\/delete old data in base_currency_code\n",141],["T_WHITESPACE","        ",142],["T_VARIABLE","$query",142],["T_WHITESPACE"," ",142],"=",["T_WHITESPACE"," ",142],["T_CONSTANT_ENCAPSED_STRING","'DELETE FROM `'",142],["T_WHITESPACE"," ",142],".",["T_WHITESPACE"," ",142],["T_VARIABLE","$baseCurrencyCodeTable",142],["T_WHITESPACE"," ",142],".",["T_WHITESPACE"," ",142],["T_CONSTANT_ENCAPSED_STRING","'` WHERE `attribute_id` = '",142],["T_WHITESPACE","\n            ",142],".",["T_WHITESPACE"," ",143],["T_VARIABLE","$baseCurrencyCode",143],"[",["T_CONSTANT_ENCAPSED_STRING","'attribute_id'",143],"]",["T_WHITESPACE"," ",143],".",["T_WHITESPACE"," ",143],["T_CONSTANT_ENCAPSED_STRING","';'",143],";",["T_WHITESPACE","\n\n        ",143],["T_COMMENT","\/\/echo $query . \"<br \/>\";\n",145],["T_WHITESPACE","        ",146],["T_VARIABLE","$installer",146],["T_OBJECT_OPERATOR","->",146],["T_STRING","getConnection",146],"(",")",["T_OBJECT_OPERATOR","->",146],["T_STRING","query",146],"(",["T_VARIABLE","$query",146],")",";",["T_WHITESPACE","\n\n        ",146],["T_COMMENT","\/\/copy data from store_currency_code into base_currency_code\n",148],["T_WHITESPACE","        ",149],["T_VARIABLE","$query",149],["T_WHITESPACE"," ",149],"=",["T_WHITESPACE"," ",149],["T_CONSTANT_ENCAPSED_STRING","'INSERT INTO `'",149],["T_WHITESPACE"," ",149],".",["T_WHITESPACE"," ",149],["T_VARIABLE","$baseCurrencyCodeTable",149],["T_WHITESPACE"," ",149],".",["T_WHITESPACE","\n            ",149],["T_CONSTANT_ENCAPSED_STRING","'` (`entity_type_id`, `attribute_id`, `entity_id`, `value`) SELECT `entity_type_id`, \"'",150],["T_WHITESPACE"," ",150],".",["T_WHITESPACE","\n            ",150],["T_VARIABLE","$baseCurrencyCode",151],"[",["T_CONSTANT_ENCAPSED_STRING","'attribute_id'",151],"]",["T_WHITESPACE"," ",151],".",["T_WHITESPACE"," ",151],["T_CONSTANT_ENCAPSED_STRING","'\" as `attribute_id`, `entity_id`, `value` FROM `'",151],["T_WHITESPACE"," ",151],".",["T_WHITESPACE","\n            ",151],["T_VARIABLE","$storeCurrencyCodeTable",152],["T_WHITESPACE"," ",152],".",["T_WHITESPACE"," ",152],["T_CONSTANT_ENCAPSED_STRING","'` WHERE `attribute_id` = '",152],["T_WHITESPACE"," ",152],".",["T_WHITESPACE"," ",152],["T_VARIABLE","$storeCurrencyCode",152],"[",["T_CONSTANT_ENCAPSED_STRING","'attribute_id'",152],"]",["T_WHITESPACE"," ",152],".",["T_WHITESPACE"," ",152],["T_CONSTANT_ENCAPSED_STRING","';'",152],";",["T_WHITESPACE","\n\n        ",152],["T_COMMENT","\/\/echo $query . \"<br \/>\";\n",154],["T_WHITESPACE","        ",155],["T_VARIABLE","$installer",155],["T_OBJECT_OPERATOR","->",155],["T_STRING","getConnection",155],"(",")",["T_OBJECT_OPERATOR","->",155],["T_STRING","query",155],"(",["T_VARIABLE","$query",155],")",";",["T_WHITESPACE","\n\n        ",155],["T_COMMENT","\/\/copy data from store_to_base_rate into base_to_global_rate\n",157],["T_WHITESPACE","        ",158],["T_VARIABLE","$query",158],["T_WHITESPACE"," ",158],"=",["T_WHITESPACE"," ",158],["T_CONSTANT_ENCAPSED_STRING","'INSERT INTO `'",158],["T_WHITESPACE"," ",158],".",["T_WHITESPACE"," ",158],["T_VARIABLE","$baseToGlobalRateTable",158],["T_WHITESPACE"," ",158],".",["T_WHITESPACE","\n            ",158],["T_CONSTANT_ENCAPSED_STRING","'` (`entity_type_id`, `attribute_id`, `entity_id`, `value`) SELECT `entity_type_id`, \"'",159],["T_WHITESPACE"," ",159],".",["T_WHITESPACE","\n            ",159],["T_VARIABLE","$baseToGlobalRate",160],"[",["T_CONSTANT_ENCAPSED_STRING","'attribute_id'",160],"]",["T_WHITESPACE"," ",160],".",["T_WHITESPACE"," ",160],["T_CONSTANT_ENCAPSED_STRING","'\" as `attribute_id`, `entity_id`, `value` FROM `'",160],["T_WHITESPACE"," ",160],".",["T_WHITESPACE","\n            ",160],["T_VARIABLE","$storeToBaseRateTable",161],["T_WHITESPACE"," ",161],".",["T_WHITESPACE"," ",161],["T_CONSTANT_ENCAPSED_STRING","'` WHERE `attribute_id` = '",161],["T_WHITESPACE"," ",161],".",["T_WHITESPACE"," ",161],["T_VARIABLE","$storeToBaseRate",161],"[",["T_CONSTANT_ENCAPSED_STRING","'attribute_id'",161],"]",["T_WHITESPACE"," ",161],".",["T_WHITESPACE"," ",161],["T_CONSTANT_ENCAPSED_STRING","';'",161],";",["T_WHITESPACE","\n\n        ",161],["T_COMMENT","\/\/echo $query . \"<br \/>\";\n",163],["T_WHITESPACE","        ",164],["T_VARIABLE","$installer",164],["T_OBJECT_OPERATOR","->",164],["T_STRING","getConnection",164],"(",")",["T_OBJECT_OPERATOR","->",164],["T_STRING","query",164],"(",["T_VARIABLE","$query",164],")",";",["T_WHITESPACE","\n\n        ",164],["T_COMMENT","\/\/copy data from store_to_order_rate into base_to_order_rate\n",166],["T_WHITESPACE","        ",167],["T_VARIABLE","$query",167],["T_WHITESPACE"," ",167],"=",["T_WHITESPACE"," ",167],["T_CONSTANT_ENCAPSED_STRING","'INSERT INTO `'",167],["T_WHITESPACE"," ",167],".",["T_WHITESPACE"," ",167],["T_VARIABLE","$baseToOrderRateTable",167],["T_WHITESPACE"," ",167],".",["T_WHITESPACE","\n            ",167],["T_CONSTANT_ENCAPSED_STRING","'` (`entity_type_id`, `attribute_id`, `entity_id`, `value`) SELECT `entity_type_id`, \"'",168],["T_WHITESPACE"," ",168],".",["T_WHITESPACE","\n            ",168],["T_VARIABLE","$baseToOrderRate",169],"[",["T_CONSTANT_ENCAPSED_STRING","'attribute_id'",169],"]",["T_WHITESPACE"," ",169],".",["T_WHITESPACE"," ",169],["T_CONSTANT_ENCAPSED_STRING","'\" as `attribute_id`, `entity_id`, `value` FROM `'",169],["T_WHITESPACE"," ",169],".",["T_WHITESPACE","\n            ",169],["T_VARIABLE","$storeToOrderRateTable",170],["T_WHITESPACE"," ",170],".",["T_WHITESPACE"," ",170],["T_CONSTANT_ENCAPSED_STRING","'` WHERE `attribute_id` = '",170],["T_WHITESPACE"," ",170],".",["T_WHITESPACE"," ",170],["T_VARIABLE","$storeToOrderRate",170],"[",["T_CONSTANT_ENCAPSED_STRING","'attribute_id'",170],"]",["T_WHITESPACE"," ",170],".",["T_WHITESPACE"," ",170],["T_CONSTANT_ENCAPSED_STRING","';'",170],";",["T_WHITESPACE","\n\n        ",170],["T_COMMENT","\/\/echo $query . \"<br \/>\";\n",172],["T_WHITESPACE","        ",173],["T_VARIABLE","$installer",173],["T_OBJECT_OPERATOR","->",173],["T_STRING","getConnection",173],"(",")",["T_OBJECT_OPERATOR","->",173],["T_STRING","query",173],"(",["T_VARIABLE","$query",173],")",";",["T_WHITESPACE","\n    ",173],"}",["T_WHITESPACE","\n\n    ",174],["T_VARIABLE","$installer",176],["T_OBJECT_OPERATOR","->",176],["T_STRING","getConnection",176],"(",")",["T_OBJECT_OPERATOR","->",176],["T_STRING","commit",176],"(",")",";",["T_WHITESPACE","\n",176],"}",["T_WHITESPACE"," ",177],["T_CATCH","catch",177],"(",["T_STRING","Exception",177],["T_WHITESPACE"," ",177],["T_VARIABLE","$e",177],")",["T_WHITESPACE"," ",177],"{",["T_WHITESPACE","\n    ",177],["T_VARIABLE","$installer",178],["T_OBJECT_OPERATOR","->",178],["T_STRING","getConnection",178],"(",")",["T_OBJECT_OPERATOR","->",178],["T_STRING","rollBack",178],"(",")",";",["T_WHITESPACE","\n    ",178],["T_THROW","throw",179],["T_WHITESPACE"," ",179],["T_VARIABLE","$e",179],";",["T_WHITESPACE","\n",179],"}",["T_WHITESPACE","\n",180]]
[["T_OPEN_TAG","<?php\n",1],["T_DOC_COMMENT","\/**\n * Magento\n *\n * NOTICE OF LICENSE\n *\n * This source file is subject to the Open Software License (OSL 3.0)\n * that is bundled with this package in the file LICENSE.txt.\n * It is also available through the world-wide-web at this URL:\n * http:\/\/opensource.org\/licenses\/osl-3.0.php\n * If you did not receive a copy of the license and are unable to\n * obtain it through the world-wide-web, please send an email\n * to license@magento.com so we can send you a copy immediately.\n *\n * DISCLAIMER\n *\n * Do not edit or add to this file if you wish to upgrade Magento to newer\n * versions in the future. If you wish to customize Magento for your\n * needs please refer to http:\/\/www.magento.com for more information.\n *\n * @category    Mage\n * @package     Mage_Sales\n * @copyright  Copyright (c) 2006-2016 X.commerce, Inc. and affiliates (http:\/\/www.magento.com)\n * @license    http:\/\/opensource.org\/licenses\/osl-3.0.php  Open Software License (OSL 3.0)\n *\/",2],["T_WHITESPACE","\n\n",25],["T_DOC_COMMENT","\/**\n * Enter description here ...\n *\n * @method Mage_Sales_Model_Resource_Order_Creditmemo_Item _getResource()\n * @method Mage_Sales_Model_Resource_Order_Creditmemo_Item getResource()\n * @method int getParentId()\n * @method Mage_Sales_Model_Order_Creditmemo_Item setParentId(int $value)\n * @method float getWeeeTaxAppliedRowAmount()\n * @method Mage_Sales_Model_Order_Creditmemo_Item setWeeeTaxAppliedRowAmount(float $value)\n * @method float getBasePrice()\n * @method Mage_Sales_Model_Order_Creditmemo_Item setBasePrice(float $value)\n * @method float getBaseWeeeTaxRowDisposition()\n * @method Mage_Sales_Model_Order_Creditmemo_Item setBaseWeeeTaxRowDisposition(float $value)\n * @method float getTaxAmount()\n * @method Mage_Sales_Model_Order_Creditmemo_Item setTaxAmount(float $value)\n * @method float getBaseWeeeTaxAppliedAmount()\n * @method Mage_Sales_Model_Order_Creditmemo_Item setBaseWeeeTaxAppliedAmount(float $value)\n * @method float getWeeeTaxRowDisposition()\n * @method Mage_Sales_Model_Order_Creditmemo_Item setWeeeTaxRowDisposition(float $value)\n * @method float getBaseRowTotal()\n * @method Mage_Sales_Model_Order_Creditmemo_Item setBaseRowTotal(float $value)\n * @method float getDiscountAmount()\n * @method Mage_Sales_Model_Order_Creditmemo_Item setDiscountAmount(float $value)\n * @method float getRowTotal()\n * @method Mage_Sales_Model_Order_Creditmemo_Item setRowTotal(float $value)\n * @method float getWeeeTaxAppliedAmount()\n * @method Mage_Sales_Model_Order_Creditmemo_Item setWeeeTaxAppliedAmount(float $value)\n * @method float getBaseDiscountAmount()\n * @method Mage_Sales_Model_Order_Creditmemo_Item setBaseDiscountAmount(float $value)\n * @method float getBaseWeeeTaxDisposition()\n * @method Mage_Sales_Model_Order_Creditmemo_Item setBaseWeeeTaxDisposition(float $value)\n * @method float getPriceInclTax()\n * @method Mage_Sales_Model_Order_Creditmemo_Item setPriceInclTax(float $value)\n * @method float getBaseTaxAmount()\n * @method Mage_Sales_Model_Order_Creditmemo_Item setBaseTaxAmount(float $value)\n * @method float getWeeeTaxDisposition()\n * @method Mage_Sales_Model_Order_Creditmemo_Item setWeeeTaxDisposition(float $value)\n * @method float getBasePriceInclTax()\n * @method Mage_Sales_Model_Order_Creditmemo_Item setBasePriceInclTax(float $value)\n * @method float getQty()\n * @method float getBaseCost()\n * @method Mage_Sales_Model_Order_Creditmemo_Item setBaseCost(float $value)\n * @method float getBaseWeeeTaxAppliedRowAmount()\n * @method Mage_Sales_Model_Order_Creditmemo_Item setBaseWeeeTaxAppliedRowAmount(float $value)\n * @method float getPrice()\n * @method Mage_Sales_Model_Order_Creditmemo_Item setPrice(float $value)\n * @method float getBaseRowTotalInclTax()\n * @method Mage_Sales_Model_Order_Creditmemo_Item setBaseRowTotalInclTax(float $value)\n * @method float getRowTotalInclTax()\n * @method Mage_Sales_Model_Order_Creditmemo_Item setRowTotalInclTax(float $value)\n * @method int getProductId()\n * @method Mage_Sales_Model_Order_Creditmemo_Item setProductId(int $value)\n * @method int getOrderItemId()\n * @method Mage_Sales_Model_Order_Creditmemo_Item setOrderItemId(int $value)\n * @method string getAdditionalData()\n * @method Mage_Sales_Model_Order_Creditmemo_Item setAdditionalData(string $value)\n * @method string getDescription()\n * @method Mage_Sales_Model_Order_Creditmemo_Item setDescription(string $value)\n * @method string getWeeeTaxApplied()\n * @method Mage_Sales_Model_Order_Creditmemo_Item setWeeeTaxApplied(string $value)\n * @method string getSku()\n * @method Mage_Sales_Model_Order_Creditmemo_Item setSku(string $value)\n * @method string getName()\n * @method Mage_Sales_Model_Order_Creditmemo_Item setName(string $value)\n * @method float getHiddenTaxAmount()\n * @method Mage_Sales_Model_Order_Creditmemo_Item setHiddenTaxAmount(float $value)\n * @method float getBaseHiddenTaxAmount()\n * @method Mage_Sales_Model_Order_Creditmemo_Item setBaseHiddenTaxAmount(float $value)\n *\n * @category    Mage\n * @package     Mage_Sales\n * @author      Magento Core Team <core@magentocommerce.com>\n *\/",27],["T_WHITESPACE","\n",99],["T_CLASS","class",100],["T_WHITESPACE"," ",100],["T_STRING","Mage_Sales_Model_Order_Creditmemo_Item",100],["T_WHITESPACE"," ",100],["T_EXTENDS","extends",100],["T_WHITESPACE"," ",100],["T_STRING","Mage_Core_Model_Abstract",100],["T_WHITESPACE","\n",100],"{",["T_WHITESPACE","\n    ",101],["T_PROTECTED","protected",102],["T_WHITESPACE"," ",102],["T_VARIABLE","$_eventPrefix",102],["T_WHITESPACE"," ",102],"=",["T_WHITESPACE"," ",102],["T_CONSTANT_ENCAPSED_STRING","'sales_creditmemo_item'",102],";",["T_WHITESPACE","\n    ",102],["T_PROTECTED","protected",103],["T_WHITESPACE"," ",103],["T_VARIABLE","$_eventObject",103],["T_WHITESPACE"," ",103],"=",["T_WHITESPACE"," ",103],["T_CONSTANT_ENCAPSED_STRING","'creditmemo_item'",103],";",["T_WHITESPACE","\n    ",103],["T_PROTECTED","protected",104],["T_WHITESPACE"," ",104],["T_VARIABLE","$_creditmemo",104],["T_WHITESPACE"," ",104],"=",["T_WHITESPACE"," ",104],["T_STRING","null",104],";",["T_WHITESPACE","\n    ",104],["T_PROTECTED","protected",105],["T_WHITESPACE"," ",105],["T_VARIABLE","$_orderItem",105],["T_WHITESPACE"," ",105],"=",["T_WHITESPACE"," ",105],["T_STRING","null",105],";",["T_WHITESPACE","\n\n    ",105],["T_DOC_COMMENT","\/**\n     * Initialize resource model\n     *\/",107],["T_WHITESPACE","\n    ",109],["T_FUNCTION","function",110],["T_WHITESPACE"," ",110],["T_STRING","_construct",110],"(",")",["T_WHITESPACE","\n    ",110],"{",["T_WHITESPACE","\n        ",111],["T_VARIABLE","$this",112],["T_OBJECT_OPERATOR","->",112],["T_STRING","_init",112],"(",["T_CONSTANT_ENCAPSED_STRING","'sales\/order_creditmemo_item'",112],")",";",["T_WHITESPACE","\n    ",112],"}",["T_WHITESPACE","\n\n    ",113],["T_DOC_COMMENT","\/**\n     * Declare creditmemo instance\n     *\n     * @param   Mage_Sales_Model_Order_Creditmemo $creditmemo\n     * @return  Mage_Sales_Model_Order_Creditmemo_Item\n     *\/",115],["T_WHITESPACE","\n    ",120],["T_PUBLIC","public",121],["T_WHITESPACE"," ",121],["T_FUNCTION","function",121],["T_WHITESPACE"," ",121],["T_STRING","setCreditmemo",121],"(",["T_STRING","Mage_Sales_Model_Order_Creditmemo",121],["T_WHITESPACE"," ",121],["T_VARIABLE","$creditmemo",121],")",["T_WHITESPACE","\n    ",121],"{",["T_WHITESPACE","\n        ",122],["T_VARIABLE","$this",123],["T_OBJECT_OPERATOR","->",123],["T_STRING","_creditmemo",123],["T_WHITESPACE"," ",123],"=",["T_WHITESPACE"," ",123],["T_VARIABLE","$creditmemo",123],";",["T_WHITESPACE","\n        ",123],["T_RETURN","return",124],["T_WHITESPACE"," ",124],["T_VARIABLE","$this",124],";",["T_WHITESPACE","\n    ",124],"}",["T_WHITESPACE","\n\n    ",125],["T_DOC_COMMENT","\/**\n     * Init mapping array of short fields to\n     * its full names\n     *\n     * @return Varien_Object\n     *\/",127],["T_WHITESPACE","\n    ",132],["T_PROTECTED","protected",133],["T_WHITESPACE"," ",133],["T_FUNCTION","function",133],["T_WHITESPACE"," ",133],["T_STRING","_initOldFieldsMap",133],"(",")",["T_WHITESPACE","\n    ",133],"{",["T_WHITESPACE","\n        ",134],["T_VARIABLE","$this",135],["T_OBJECT_OPERATOR","->",135],["T_STRING","_oldFieldsMap",135],["T_WHITESPACE"," ",135],"=",["T_WHITESPACE"," ",135],["T_STRING","Mage",135],["T_DOUBLE_COLON","::",135],["T_STRING","helper",135],"(",["T_CONSTANT_ENCAPSED_STRING","'sales'",135],")",["T_OBJECT_OPERATOR","->",135],["T_STRING","getOldFieldMap",135],"(",["T_CONSTANT_ENCAPSED_STRING","'creditmemo_item'",135],")",";",["T_WHITESPACE","\n        ",135],["T_RETURN","return",136],["T_WHITESPACE"," ",136],["T_VARIABLE","$this",136],";",["T_WHITESPACE","\n    ",136],"}",["T_WHITESPACE","\n\n    ",137],["T_DOC_COMMENT","\/**\n     * Retrieve creditmemo instance\n     *\n     * @return Mage_Sales_Model_Order_Creditmemo\n     *\/",139],["T_WHITESPACE","\n    ",143],["T_PUBLIC","public",144],["T_WHITESPACE"," ",144],["T_FUNCTION","function",144],["T_WHITESPACE"," ",144],["T_STRING","getCreditmemo",144],"(",")",["T_WHITESPACE","\n    ",144],"{",["T_WHITESPACE","\n        ",145],["T_RETURN","return",146],["T_WHITESPACE"," ",146],["T_VARIABLE","$this",146],["T_OBJECT_OPERATOR","->",146],["T_STRING","_creditmemo",146],";",["T_WHITESPACE","\n    ",146],"}",["T_WHITESPACE","\n\n    ",147],["T_DOC_COMMENT","\/**\n     * Declare order item instance\n     *\n     * @param   Mage_Sales_Model_Order_Item $item\n     * @return  Mage_Sales_Model_Order_Creditmemo_Item\n     *\/",149],["T_WHITESPACE","\n    ",154],["T_PUBLIC","public",155],["T_WHITESPACE"," ",155],["T_FUNCTION","function",155],["T_WHITESPACE"," ",155],["T_STRING","setOrderItem",155],"(",["T_STRING","Mage_Sales_Model_Order_Item",155],["T_WHITESPACE"," ",155],["T_VARIABLE","$item",155],")",["T_WHITESPACE","\n    ",155],"{",["T_WHITESPACE","\n        ",156],["T_VARIABLE","$this",157],["T_OBJECT_OPERATOR","->",157],["T_STRING","_orderItem",157],["T_WHITESPACE"," ",157],"=",["T_WHITESPACE"," ",157],["T_VARIABLE","$item",157],";",["T_WHITESPACE","\n        ",157],["T_VARIABLE","$this",158],["T_OBJECT_OPERATOR","->",158],["T_STRING","setOrderItemId",158],"(",["T_VARIABLE","$item",158],["T_OBJECT_OPERATOR","->",158],["T_STRING","getId",158],"(",")",")",";",["T_WHITESPACE","\n        ",158],["T_RETURN","return",159],["T_WHITESPACE"," ",159],["T_VARIABLE","$this",159],";",["T_WHITESPACE","\n    ",159],"}",["T_WHITESPACE","\n\n    ",160],["T_DOC_COMMENT","\/**\n     * Retrieve order item instance\n     *\n     * @return Mage_Sales_Model_Order_Item\n     *\/",162],["T_WHITESPACE","\n    ",166],["T_PUBLIC","public",167],["T_WHITESPACE"," ",167],["T_FUNCTION","function",167],["T_WHITESPACE"," ",167],["T_STRING","getOrderItem",167],"(",")",["T_WHITESPACE","\n    ",167],"{",["T_WHITESPACE","\n        ",168],["T_IF","if",169],["T_WHITESPACE"," ",169],"(",["T_STRING","is_null",169],"(",["T_VARIABLE","$this",169],["T_OBJECT_OPERATOR","->",169],["T_STRING","_orderItem",169],")",")",["T_WHITESPACE"," ",169],"{",["T_WHITESPACE","\n            ",169],["T_IF","if",170],["T_WHITESPACE"," ",170],"(",["T_VARIABLE","$this",170],["T_OBJECT_OPERATOR","->",170],["T_STRING","getCreditmemo",170],"(",")",")",["T_WHITESPACE"," ",170],"{",["T_WHITESPACE","\n                ",170],["T_VARIABLE","$this",171],["T_OBJECT_OPERATOR","->",171],["T_STRING","_orderItem",171],["T_WHITESPACE"," ",171],"=",["T_WHITESPACE"," ",171],["T_VARIABLE","$this",171],["T_OBJECT_OPERATOR","->",171],["T_STRING","getCreditmemo",171],"(",")",["T_OBJECT_OPERATOR","->",171],["T_STRING","getOrder",171],"(",")",["T_OBJECT_OPERATOR","->",171],["T_STRING","getItemById",171],"(",["T_VARIABLE","$this",171],["T_OBJECT_OPERATOR","->",171],["T_STRING","getOrderItemId",171],"(",")",")",";",["T_WHITESPACE","\n            ",171],"}",["T_WHITESPACE","\n            ",172],["T_ELSE","else",173],["T_WHITESPACE"," ",173],"{",["T_WHITESPACE","\n                ",173],["T_VARIABLE","$this",174],["T_OBJECT_OPERATOR","->",174],["T_STRING","_orderItem",174],["T_WHITESPACE"," ",174],"=",["T_WHITESPACE"," ",174],["T_STRING","Mage",174],["T_DOUBLE_COLON","::",174],["T_STRING","getModel",174],"(",["T_CONSTANT_ENCAPSED_STRING","'sales\/order_item'",174],")",["T_WHITESPACE","\n                    ",174],["T_OBJECT_OPERATOR","->",175],["T_STRING","load",175],"(",["T_VARIABLE","$this",175],["T_OBJECT_OPERATOR","->",175],["T_STRING","getOrderItemId",175],"(",")",")",";",["T_WHITESPACE","\n            ",175],"}",["T_WHITESPACE","\n        ",176],"}",["T_WHITESPACE","\n        ",177],["T_RETURN","return",178],["T_WHITESPACE"," ",178],["T_VARIABLE","$this",178],["T_OBJECT_OPERATOR","->",178],["T_STRING","_orderItem",178],";",["T_WHITESPACE","\n    ",178],"}",["T_WHITESPACE","\n\n    ",179],["T_DOC_COMMENT","\/**\n     * Declare qty\n     *\n     * @param   float $qty\n     * @return  Mage_Sales_Model_Order_Creditmemo_Item\n     *\/",181],["T_WHITESPACE","\n    ",186],["T_PUBLIC","public",187],["T_WHITESPACE"," ",187],["T_FUNCTION","function",187],["T_WHITESPACE"," ",187],["T_STRING","setQty",187],"(",["T_VARIABLE","$qty",187],")",["T_WHITESPACE","\n    ",187],"{",["T_WHITESPACE","\n        ",188],["T_IF","if",189],["T_WHITESPACE"," ",189],"(",["T_VARIABLE","$this",189],["T_OBJECT_OPERATOR","->",189],["T_STRING","getOrderItem",189],"(",")",["T_OBJECT_OPERATOR","->",189],["T_STRING","getIsQtyDecimal",189],"(",")",")",["T_WHITESPACE"," ",189],"{",["T_WHITESPACE","\n            ",189],["T_VARIABLE","$qty",190],["T_WHITESPACE"," ",190],"=",["T_WHITESPACE"," ",190],["T_DOUBLE_CAST","(float)",190],["T_WHITESPACE"," ",190],["T_VARIABLE","$qty",190],";",["T_WHITESPACE","\n        ",190],"}",["T_WHITESPACE","\n        ",191],["T_ELSE","else",192],["T_WHITESPACE"," ",192],"{",["T_WHITESPACE","\n            ",192],["T_VARIABLE","$qty",193],["T_WHITESPACE"," ",193],"=",["T_WHITESPACE"," ",193],["T_INT_CAST","(int)",193],["T_WHITESPACE"," ",193],["T_VARIABLE","$qty",193],";",["T_WHITESPACE","\n        ",193],"}",["T_WHITESPACE","\n        ",194],["T_VARIABLE","$qty",195],["T_WHITESPACE"," ",195],"=",["T_WHITESPACE"," ",195],["T_VARIABLE","$qty",195],["T_WHITESPACE"," ",195],">",["T_WHITESPACE"," ",195],["T_LNUMBER","0",195],["T_WHITESPACE"," ",195],"?",["T_WHITESPACE"," ",195],["T_VARIABLE","$qty",195],["T_WHITESPACE"," ",195],":",["T_WHITESPACE"," ",195],["T_LNUMBER","0",195],";",["T_WHITESPACE","\n        ",195],["T_DOC_COMMENT","\/**\n         * Check qty availability\n         *\/",196],["T_WHITESPACE","\n        ",198],["T_IF","if",199],["T_WHITESPACE"," ",199],"(",["T_VARIABLE","$qty",199],["T_WHITESPACE"," ",199],["T_IS_SMALLER_OR_EQUAL","<=",199],["T_WHITESPACE"," ",199],["T_VARIABLE","$this",199],["T_OBJECT_OPERATOR","->",199],["T_STRING","getOrderItem",199],"(",")",["T_OBJECT_OPERATOR","->",199],["T_STRING","getQtyToRefund",199],"(",")",["T_WHITESPACE"," ",199],["T_BOOLEAN_OR","||",199],["T_WHITESPACE"," ",199],["T_VARIABLE","$this",199],["T_OBJECT_OPERATOR","->",199],["T_STRING","getOrderItem",199],"(",")",["T_OBJECT_OPERATOR","->",199],["T_STRING","isDummy",199],"(",")",")",["T_WHITESPACE"," ",199],"{",["T_WHITESPACE","\n            ",199],["T_VARIABLE","$this",200],["T_OBJECT_OPERATOR","->",200],["T_STRING","setData",200],"(",["T_CONSTANT_ENCAPSED_STRING","'qty'",200],",",["T_WHITESPACE"," ",200],["T_VARIABLE","$qty",200],")",";",["T_WHITESPACE","\n        ",200],"}",["T_WHITESPACE","\n        ",201],["T_ELSE","else",202],["T_WHITESPACE"," ",202],"{",["T_WHITESPACE","\n            ",202],["T_STRING","Mage",203],["T_DOUBLE_COLON","::",203],["T_STRING","throwException",203],"(",["T_WHITESPACE","\n                ",203],["T_STRING","Mage",204],["T_DOUBLE_COLON","::",204],["T_STRING","helper",204],"(",["T_CONSTANT_ENCAPSED_STRING","'sales'",204],")",["T_OBJECT_OPERATOR","->",204],["T_STRING","__",204],"(",["T_CONSTANT_ENCAPSED_STRING","'Invalid qty to refund item \"%s\"'",204],",",["T_WHITESPACE"," ",204],["T_VARIABLE","$this",204],["T_OBJECT_OPERATOR","->",204],["T_STRING","getName",204],"(",")",")",["T_WHITESPACE","\n            ",204],")",";",["T_WHITESPACE","\n        ",205],"}",["T_WHITESPACE","\n        ",206],["T_RETURN","return",207],["T_WHITESPACE"," ",207],["T_VARIABLE","$this",207],";",["T_WHITESPACE","\n    ",207],"}",["T_WHITESPACE","\n\n    ",208],["T_DOC_COMMENT","\/**\n     * Applying qty to order item\n     *\n     * @return Mage_Sales_Model_Order_Shipment_Item\n     *\/",210],["T_WHITESPACE","\n    ",214],["T_PUBLIC","public",215],["T_WHITESPACE"," ",215],["T_FUNCTION","function",215],["T_WHITESPACE"," ",215],["T_STRING","register",215],"(",")",["T_WHITESPACE","\n    ",215],"{",["T_WHITESPACE","\n        ",216],["T_VARIABLE","$orderItem",217],["T_WHITESPACE"," ",217],"=",["T_WHITESPACE"," ",217],["T_VARIABLE","$this",217],["T_OBJECT_OPERATOR","->",217],["T_STRING","getOrderItem",217],"(",")",";",["T_WHITESPACE","\n\n        ",217],["T_VARIABLE","$orderItem",219],["T_OBJECT_OPERATOR","->",219],["T_STRING","setQtyRefunded",219],"(",["T_VARIABLE","$orderItem",219],["T_OBJECT_OPERATOR","->",219],["T_STRING","getQtyRefunded",219],"(",")",["T_WHITESPACE"," ",219],"+",["T_WHITESPACE"," ",219],["T_VARIABLE","$this",219],["T_OBJECT_OPERATOR","->",219],["T_STRING","getQty",219],"(",")",")",";",["T_WHITESPACE","\n        ",219],["T_VARIABLE","$orderItem",220],["T_OBJECT_OPERATOR","->",220],["T_STRING","setTaxRefunded",220],"(",["T_VARIABLE","$orderItem",220],["T_OBJECT_OPERATOR","->",220],["T_STRING","getTaxRefunded",220],"(",")",["T_WHITESPACE"," ",220],"+",["T_WHITESPACE"," ",220],["T_VARIABLE","$this",220],["T_OBJECT_OPERATOR","->",220],["T_STRING","getTaxAmount",220],"(",")",")",";",["T_WHITESPACE","\n        ",220],["T_VARIABLE","$orderItem",221],["T_OBJECT_OPERATOR","->",221],["T_STRING","setBaseTaxRefunded",221],"(",["T_VARIABLE","$orderItem",221],["T_OBJECT_OPERATOR","->",221],["T_STRING","getBaseTaxRefunded",221],"(",")",["T_WHITESPACE"," ",221],"+",["T_WHITESPACE"," ",221],["T_VARIABLE","$this",221],["T_OBJECT_OPERATOR","->",221],["T_STRING","getBaseTaxAmount",221],"(",")",")",";",["T_WHITESPACE","\n        ",221],["T_VARIABLE","$orderItem",222],["T_OBJECT_OPERATOR","->",222],["T_STRING","setHiddenTaxRefunded",222],"(",["T_VARIABLE","$orderItem",222],["T_OBJECT_OPERATOR","->",222],["T_STRING","getHiddenTaxRefunded",222],"(",")",["T_WHITESPACE"," ",222],"+",["T_WHITESPACE"," ",222],["T_VARIABLE","$this",222],["T_OBJECT_OPERATOR","->",222],["T_STRING","getHiddenTaxAmount",222],"(",")",")",";",["T_WHITESPACE","\n        ",222],["T_VARIABLE","$orderItem",223],["T_OBJECT_OPERATOR","->",223],["T_STRING","setBaseHiddenTaxRefunded",223],"(",["T_VARIABLE","$orderItem",223],["T_OBJECT_OPERATOR","->",223],["T_STRING","getBaseHiddenTaxRefunded",223],"(",")",["T_WHITESPACE"," ",223],"+",["T_WHITESPACE"," ",223],["T_VARIABLE","$this",223],["T_OBJECT_OPERATOR","->",223],["T_STRING","getBaseHiddenTaxAmount",223],"(",")",")",";",["T_WHITESPACE","\n        ",223],["T_VARIABLE","$orderItem",224],["T_OBJECT_OPERATOR","->",224],["T_STRING","setAmountRefunded",224],"(",["T_VARIABLE","$orderItem",224],["T_OBJECT_OPERATOR","->",224],["T_STRING","getAmountRefunded",224],"(",")",["T_WHITESPACE"," ",224],"+",["T_WHITESPACE"," ",224],["T_VARIABLE","$this",224],["T_OBJECT_OPERATOR","->",224],["T_STRING","getRowTotal",224],"(",")",")",";",["T_WHITESPACE","\n        ",224],["T_VARIABLE","$orderItem",225],["T_OBJECT_OPERATOR","->",225],["T_STRING","setBaseAmountRefunded",225],"(",["T_VARIABLE","$orderItem",225],["T_OBJECT_OPERATOR","->",225],["T_STRING","getBaseAmountRefunded",225],"(",")",["T_WHITESPACE"," ",225],"+",["T_WHITESPACE"," ",225],["T_VARIABLE","$this",225],["T_OBJECT_OPERATOR","->",225],["T_STRING","getBaseRowTotal",225],"(",")",")",";",["T_WHITESPACE","\n        ",225],["T_VARIABLE","$orderItem",226],["T_OBJECT_OPERATOR","->",226],["T_STRING","setDiscountRefunded",226],"(",["T_VARIABLE","$orderItem",226],["T_OBJECT_OPERATOR","->",226],["T_STRING","getDiscountRefunded",226],"(",")",["T_WHITESPACE"," ",226],"+",["T_WHITESPACE"," ",226],["T_VARIABLE","$this",226],["T_OBJECT_OPERATOR","->",226],["T_STRING","getDiscountAmount",226],"(",")",")",";",["T_WHITESPACE","\n        ",226],["T_VARIABLE","$orderItem",227],["T_OBJECT_OPERATOR","->",227],["T_STRING","setBaseDiscountRefunded",227],"(",["T_VARIABLE","$orderItem",227],["T_OBJECT_OPERATOR","->",227],["T_STRING","getBaseDiscountRefunded",227],"(",")",["T_WHITESPACE"," ",227],"+",["T_WHITESPACE"," ",227],["T_VARIABLE","$this",227],["T_OBJECT_OPERATOR","->",227],["T_STRING","getBaseDiscountAmount",227],"(",")",")",";",["T_WHITESPACE","\n\n        ",227],["T_RETURN","return",229],["T_WHITESPACE"," ",229],["T_VARIABLE","$this",229],";",["T_WHITESPACE","\n    ",229],"}",["T_WHITESPACE","\n\n    ",230],["T_PUBLIC","public",232],["T_WHITESPACE"," ",232],["T_FUNCTION","function",232],["T_WHITESPACE"," ",232],["T_STRING","cancel",232],"(",")",["T_WHITESPACE","\n    ",232],"{",["T_WHITESPACE","\n        ",233],["T_VARIABLE","$this",234],["T_OBJECT_OPERATOR","->",234],["T_STRING","getOrderItem",234],"(",")",["T_OBJECT_OPERATOR","->",234],["T_STRING","setQtyRefunded",234],"(",["T_WHITESPACE","\n            ",234],["T_VARIABLE","$this",235],["T_OBJECT_OPERATOR","->",235],["T_STRING","getOrderItem",235],"(",")",["T_OBJECT_OPERATOR","->",235],["T_STRING","getQtyRefunded",235],"(",")","-",["T_VARIABLE","$this",235],["T_OBJECT_OPERATOR","->",235],["T_STRING","getQty",235],"(",")",["T_WHITESPACE","\n        ",235],")",";",["T_WHITESPACE","\n        ",236],["T_VARIABLE","$this",237],["T_OBJECT_OPERATOR","->",237],["T_STRING","getOrderItem",237],"(",")",["T_OBJECT_OPERATOR","->",237],["T_STRING","setTaxRefunded",237],"(",["T_WHITESPACE","\n            ",237],["T_VARIABLE","$this",238],["T_OBJECT_OPERATOR","->",238],["T_STRING","getOrderItem",238],"(",")",["T_OBJECT_OPERATOR","->",238],["T_STRING","getTaxRefunded",238],"(",")",["T_WHITESPACE","\n                ",238],"-",["T_WHITESPACE"," ",239],["T_VARIABLE","$this",239],["T_OBJECT_OPERATOR","->",239],["T_STRING","getOrderItem",239],"(",")",["T_OBJECT_OPERATOR","->",239],["T_STRING","getBaseTaxAmount",239],"(",")",["T_WHITESPACE"," ",239],"*",["T_WHITESPACE"," ",239],["T_VARIABLE","$this",239],["T_OBJECT_OPERATOR","->",239],["T_STRING","getQty",239],"(",")",["T_WHITESPACE"," ",239],"\/",["T_WHITESPACE"," ",239],["T_VARIABLE","$this",239],["T_OBJECT_OPERATOR","->",239],["T_STRING","getOrderItem",239],"(",")",["T_OBJECT_OPERATOR","->",239],["T_STRING","getQtyOrdered",239],"(",")",["T_WHITESPACE","\n        ",239],")",";",["T_WHITESPACE","\n        ",240],["T_VARIABLE","$this",241],["T_OBJECT_OPERATOR","->",241],["T_STRING","getOrderItem",241],"(",")",["T_OBJECT_OPERATOR","->",241],["T_STRING","setHiddenTaxRefunded",241],"(",["T_WHITESPACE","\n            ",241],["T_VARIABLE","$this",242],["T_OBJECT_OPERATOR","->",242],["T_STRING","getOrderItem",242],"(",")",["T_OBJECT_OPERATOR","->",242],["T_STRING","getHiddenTaxRefunded",242],"(",")",["T_WHITESPACE","\n                ",242],"-",["T_WHITESPACE"," ",243],["T_VARIABLE","$this",243],["T_OBJECT_OPERATOR","->",243],["T_STRING","getOrderItem",243],"(",")",["T_OBJECT_OPERATOR","->",243],["T_STRING","getHiddenTaxAmount",243],"(",")",["T_WHITESPACE"," ",243],"*",["T_WHITESPACE"," ",243],["T_VARIABLE","$this",243],["T_OBJECT_OPERATOR","->",243],["T_STRING","getQty",243],"(",")",["T_WHITESPACE"," ",243],"\/",["T_WHITESPACE"," ",243],["T_VARIABLE","$this",243],["T_OBJECT_OPERATOR","->",243],["T_STRING","getOrderItem",243],"(",")",["T_OBJECT_OPERATOR","->",243],["T_STRING","getQtyOrdered",243],"(",")",["T_WHITESPACE","\n        ",243],")",";",["T_WHITESPACE","\n        ",244],["T_RETURN","return",245],["T_WHITESPACE"," ",245],["T_VARIABLE","$this",245],";",["T_WHITESPACE","\n    ",245],"}",["T_WHITESPACE","\n\n    ",246],["T_DOC_COMMENT","\/**\n     * Invoice item row total calculation\n     *\n     * @return Mage_Sales_Model_Order_Invoice_Item\n     *\/",248],["T_WHITESPACE","\n    ",252],["T_PUBLIC","public",253],["T_WHITESPACE"," ",253],["T_FUNCTION","function",253],["T_WHITESPACE"," ",253],["T_STRING","calcRowTotal",253],"(",")",["T_WHITESPACE","\n    ",253],"{",["T_WHITESPACE","\n        ",254],["T_VARIABLE","$creditmemo",255],["T_WHITESPACE","           ",255],"=",["T_WHITESPACE"," ",255],["T_VARIABLE","$this",255],["T_OBJECT_OPERATOR","->",255],["T_STRING","getCreditmemo",255],"(",")",";",["T_WHITESPACE","\n        ",255],["T_VARIABLE","$orderItem",256],["T_WHITESPACE","            ",256],"=",["T_WHITESPACE"," ",256],["T_VARIABLE","$this",256],["T_OBJECT_OPERATOR","->",256],["T_STRING","getOrderItem",256],"(",")",";",["T_WHITESPACE","\n        ",256],["T_VARIABLE","$orderItemQtyInvoiced",257],["T_WHITESPACE"," ",257],"=",["T_WHITESPACE"," ",257],["T_VARIABLE","$orderItem",257],["T_OBJECT_OPERATOR","->",257],["T_STRING","getQtyInvoiced",257],"(",")",";",["T_WHITESPACE","\n\n        ",257],["T_VARIABLE","$rowTotal",259],["T_WHITESPACE","            ",259],"=",["T_WHITESPACE"," ",259],["T_VARIABLE","$orderItem",259],["T_OBJECT_OPERATOR","->",259],["T_STRING","getRowInvoiced",259],"(",")",["T_WHITESPACE"," ",259],"-",["T_WHITESPACE"," ",259],["T_VARIABLE","$orderItem",259],["T_OBJECT_OPERATOR","->",259],["T_STRING","getAmountRefunded",259],"(",")",";",["T_WHITESPACE","\n        ",259],["T_VARIABLE","$baseRowTotal",260],["T_WHITESPACE","        ",260],"=",["T_WHITESPACE"," ",260],["T_VARIABLE","$orderItem",260],["T_OBJECT_OPERATOR","->",260],["T_STRING","getBaseRowInvoiced",260],"(",")",["T_WHITESPACE"," ",260],"-",["T_WHITESPACE"," ",260],["T_VARIABLE","$orderItem",260],["T_OBJECT_OPERATOR","->",260],["T_STRING","getBaseAmountRefunded",260],"(",")",";",["T_WHITESPACE","\n        ",260],["T_VARIABLE","$rowTotalInclTax",261],["T_WHITESPACE","     ",261],"=",["T_WHITESPACE"," ",261],["T_VARIABLE","$orderItem",261],["T_OBJECT_OPERATOR","->",261],["T_STRING","getRowTotalInclTax",261],"(",")",";",["T_WHITESPACE","\n        ",261],["T_VARIABLE","$baseRowTotalInclTax",262],["T_WHITESPACE"," ",262],"=",["T_WHITESPACE"," ",262],["T_VARIABLE","$orderItem",262],["T_OBJECT_OPERATOR","->",262],["T_STRING","getBaseRowTotalInclTax",262],"(",")",";",["T_WHITESPACE","\n\n        ",262],["T_IF","if",264],["T_WHITESPACE"," ",264],"(","!",["T_VARIABLE","$this",264],["T_OBJECT_OPERATOR","->",264],["T_STRING","isLast",264],"(",")",")",["T_WHITESPACE"," ",264],"{",["T_WHITESPACE","\n            ",264],["T_VARIABLE","$availableQty",265],["T_WHITESPACE"," ",265],"=",["T_WHITESPACE"," ",265],["T_VARIABLE","$orderItemQtyInvoiced",265],["T_WHITESPACE"," ",265],"-",["T_WHITESPACE"," ",265],["T_VARIABLE","$orderItem",265],["T_OBJECT_OPERATOR","->",265],["T_STRING","getQtyRefunded",265],"(",")",";",["T_WHITESPACE","\n            ",265],["T_VARIABLE","$rowTotal",266],["T_WHITESPACE","     ",266],"=",["T_WHITESPACE"," ",266],["T_VARIABLE","$creditmemo",266],["T_OBJECT_OPERATOR","->",266],["T_STRING","roundPrice",266],"(",["T_VARIABLE","$rowTotal",266],["T_WHITESPACE"," ",266],"\/",["T_WHITESPACE"," ",266],["T_VARIABLE","$availableQty",266],["T_WHITESPACE"," ",266],"*",["T_WHITESPACE"," ",266],["T_VARIABLE","$this",266],["T_OBJECT_OPERATOR","->",266],["T_STRING","getQty",266],"(",")",")",";",["T_WHITESPACE","\n            ",266],["T_VARIABLE","$baseRowTotal",267],["T_WHITESPACE"," ",267],"=",["T_WHITESPACE"," ",267],["T_VARIABLE","$creditmemo",267],["T_OBJECT_OPERATOR","->",267],["T_STRING","roundPrice",267],"(",["T_VARIABLE","$baseRowTotal",267],["T_WHITESPACE"," ",267],"\/",["T_WHITESPACE"," ",267],["T_VARIABLE","$availableQty",267],["T_WHITESPACE"," ",267],"*",["T_WHITESPACE"," ",267],["T_VARIABLE","$this",267],["T_OBJECT_OPERATOR","->",267],["T_STRING","getQty",267],"(",")",",",["T_WHITESPACE"," ",267],["T_CONSTANT_ENCAPSED_STRING","'base'",267],")",";",["T_WHITESPACE","\n        ",267],"}",["T_WHITESPACE","\n        ",268],["T_VARIABLE","$this",269],["T_OBJECT_OPERATOR","->",269],["T_STRING","setRowTotal",269],"(",["T_VARIABLE","$rowTotal",269],")",";",["T_WHITESPACE","\n        ",269],["T_VARIABLE","$this",270],["T_OBJECT_OPERATOR","->",270],["T_STRING","setBaseRowTotal",270],"(",["T_VARIABLE","$baseRowTotal",270],")",";",["T_WHITESPACE","\n\n        ",270],["T_IF","if",272],["T_WHITESPACE"," ",272],"(",["T_VARIABLE","$rowTotalInclTax",272],["T_WHITESPACE"," ",272],["T_BOOLEAN_AND","&&",272],["T_WHITESPACE"," ",272],["T_VARIABLE","$baseRowTotalInclTax",272],")",["T_WHITESPACE"," ",272],"{",["T_WHITESPACE","\n            ",272],["T_VARIABLE","$orderItemQty",273],["T_WHITESPACE"," ",273],"=",["T_WHITESPACE"," ",273],["T_VARIABLE","$orderItem",273],["T_OBJECT_OPERATOR","->",273],["T_STRING","getQtyOrdered",273],"(",")",";",["T_WHITESPACE","\n            ",273],["T_VARIABLE","$this",274],["T_OBJECT_OPERATOR","->",274],["T_STRING","setRowTotalInclTax",274],"(",["T_WHITESPACE","\n                ",274],["T_VARIABLE","$creditmemo",275],["T_OBJECT_OPERATOR","->",275],["T_STRING","roundPrice",275],"(",["T_VARIABLE","$rowTotalInclTax",275],["T_WHITESPACE"," ",275],"\/",["T_WHITESPACE"," ",275],["T_VARIABLE","$orderItemQty",275],["T_WHITESPACE"," ",275],"*",["T_WHITESPACE"," ",275],["T_VARIABLE","$this",275],["T_OBJECT_OPERATOR","->",275],["T_STRING","getQty",275],"(",")",",",["T_WHITESPACE"," ",275],["T_CONSTANT_ENCAPSED_STRING","'including'",275],")",["T_WHITESPACE","\n            ",275],")",";",["T_WHITESPACE","\n            ",276],["T_VARIABLE","$this",277],["T_OBJECT_OPERATOR","->",277],["T_STRING","setBaseRowTotalInclTax",277],"(",["T_WHITESPACE","\n                ",277],["T_VARIABLE","$creditmemo",278],["T_OBJECT_OPERATOR","->",278],["T_STRING","roundPrice",278],"(",["T_VARIABLE","$baseRowTotalInclTax",278],["T_WHITESPACE"," ",278],"\/",["T_WHITESPACE"," ",278],["T_VARIABLE","$orderItemQty",278],["T_WHITESPACE"," ",278],"*",["T_WHITESPACE"," ",278],["T_VARIABLE","$this",278],["T_OBJECT_OPERATOR","->",278],["T_STRING","getQty",278],"(",")",",",["T_WHITESPACE"," ",278],["T_CONSTANT_ENCAPSED_STRING","'including_base'",278],")",["T_WHITESPACE","\n            ",278],")",";",["T_WHITESPACE","\n        ",279],"}",["T_WHITESPACE","\n        ",280],["T_RETURN","return",281],["T_WHITESPACE"," ",281],["T_VARIABLE","$this",281],";",["T_WHITESPACE","\n    ",281],"}",["T_WHITESPACE","\n\n    ",282],["T_DOC_COMMENT","\/**\n     * Checking if the item is last\n     *\n     * @return bool\n     *\/",284],["T_WHITESPACE","\n    ",288],["T_PUBLIC","public",289],["T_WHITESPACE"," ",289],["T_FUNCTION","function",289],["T_WHITESPACE"," ",289],["T_STRING","isLast",289],"(",")",["T_WHITESPACE","\n    ",289],"{",["T_WHITESPACE","\n        ",290],["T_VARIABLE","$orderItem",291],["T_WHITESPACE"," ",291],"=",["T_WHITESPACE"," ",291],["T_VARIABLE","$this",291],["T_OBJECT_OPERATOR","->",291],["T_STRING","getOrderItem",291],"(",")",";",["T_WHITESPACE","\n        ",291],["T_IF","if",292],["T_WHITESPACE"," ",292],"(",["T_STRING_CAST","(string)",292],["T_DOUBLE_CAST","(float)",292],["T_VARIABLE","$this",292],["T_OBJECT_OPERATOR","->",292],["T_STRING","getQty",292],"(",")",["T_WHITESPACE"," ",292],["T_IS_EQUAL","==",292],["T_WHITESPACE"," ",292],["T_STRING_CAST","(string)",292],["T_DOUBLE_CAST","(float)",292],["T_VARIABLE","$orderItem",292],["T_OBJECT_OPERATOR","->",292],["T_STRING","getQtyToRefund",292],"(",")",["T_WHITESPACE","\n                ",292],["T_BOOLEAN_AND","&&",293],["T_WHITESPACE"," ",293],"!",["T_VARIABLE","$orderItem",293],["T_OBJECT_OPERATOR","->",293],["T_STRING","getQtyToInvoice",293],"(",")",")",["T_WHITESPACE"," ",293],"{",["T_WHITESPACE","\n            ",293],["T_RETURN","return",294],["T_WHITESPACE"," ",294],["T_STRING","true",294],";",["T_WHITESPACE","\n        ",294],"}",["T_WHITESPACE","\n        ",295],["T_RETURN","return",296],["T_WHITESPACE"," ",296],["T_STRING","false",296],";",["T_WHITESPACE","\n    ",296],"}",["T_WHITESPACE","\n\n    ",297],["T_DOC_COMMENT","\/**\n     * Before object save\n     *\n     * @return Mage_Sales_Model_Order_Creditmemo_Item\n     *\/",299],["T_WHITESPACE","\n    ",303],["T_PROTECTED","protected",304],["T_WHITESPACE"," ",304],["T_FUNCTION","function",304],["T_WHITESPACE"," ",304],["T_STRING","_beforeSave",304],"(",")",["T_WHITESPACE","\n    ",304],"{",["T_WHITESPACE","\n        ",305],["T_STRING","parent",306],["T_DOUBLE_COLON","::",306],["T_STRING","_beforeSave",306],"(",")",";",["T_WHITESPACE","\n\n        ",306],["T_IF","if",308],["T_WHITESPACE"," ",308],"(","!",["T_VARIABLE","$this",308],["T_OBJECT_OPERATOR","->",308],["T_STRING","getParentId",308],"(",")",["T_WHITESPACE"," ",308],["T_BOOLEAN_AND","&&",308],["T_WHITESPACE"," ",308],["T_VARIABLE","$this",308],["T_OBJECT_OPERATOR","->",308],["T_STRING","getCreditmemo",308],"(",")",")",["T_WHITESPACE"," ",308],"{",["T_WHITESPACE","\n            ",308],["T_VARIABLE","$this",309],["T_OBJECT_OPERATOR","->",309],["T_STRING","setParentId",309],"(",["T_VARIABLE","$this",309],["T_OBJECT_OPERATOR","->",309],["T_STRING","getCreditmemo",309],"(",")",["T_OBJECT_OPERATOR","->",309],["T_STRING","getId",309],"(",")",")",";",["T_WHITESPACE","\n        ",309],"}",["T_WHITESPACE","\n\n        ",310],["T_RETURN","return",312],["T_WHITESPACE"," ",312],["T_VARIABLE","$this",312],";",["T_WHITESPACE","\n    ",312],"}",["T_WHITESPACE","\n",313],"}",["T_WHITESPACE","\n",314]]
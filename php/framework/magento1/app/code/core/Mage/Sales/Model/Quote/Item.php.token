[["T_OPEN_TAG","<?php\n",1],["T_DOC_COMMENT","\/**\n * Magento\n *\n * NOTICE OF LICENSE\n *\n * This source file is subject to the Open Software License (OSL 3.0)\n * that is bundled with this package in the file LICENSE.txt.\n * It is also available through the world-wide-web at this URL:\n * http:\/\/opensource.org\/licenses\/osl-3.0.php\n * If you did not receive a copy of the license and are unable to\n * obtain it through the world-wide-web, please send an email\n * to license@magento.com so we can send you a copy immediately.\n *\n * DISCLAIMER\n *\n * Do not edit or add to this file if you wish to upgrade Magento to newer\n * versions in the future. If you wish to customize Magento for your\n * needs please refer to http:\/\/www.magento.com for more information.\n *\n * @category    Mage\n * @package     Mage_Sales\n * @copyright  Copyright (c) 2006-2016 X.commerce, Inc. and affiliates (http:\/\/www.magento.com)\n * @license    http:\/\/opensource.org\/licenses\/osl-3.0.php  Open Software License (OSL 3.0)\n *\/",2],["T_WHITESPACE","\n\n\n",25],["T_DOC_COMMENT","\/**\n * Sales Quote Item Model\n *\n * @method Mage_Sales_Model_Resource_Quote_Item _getResource()\n * @method Mage_Sales_Model_Resource_Quote_Item getResource()\n * @method int getQuoteId()\n * @method Mage_Sales_Model_Quote_Item setQuoteId(int $value)\n * @method string getCreatedAt()\n * @method Mage_Sales_Model_Quote_Item setCreatedAt(string $value)\n * @method string getUpdatedAt()\n * @method Mage_Sales_Model_Quote_Item setUpdatedAt(string $value)\n * @method int getProductId()\n * @method Mage_Sales_Model_Quote_Item setProductId(int $value)\n * @method int getStoreId()\n * @method Mage_Sales_Model_Quote_Item setStoreId(int $value)\n * @method int getParentItemId()\n * @method Mage_Sales_Model_Quote_Item setParentItemId(int $value)\n * @method int getIsVirtual()\n * @method Mage_Sales_Model_Quote_Item setIsVirtual(int $value)\n * @method string getSku()\n * @method Mage_Sales_Model_Quote_Item setSku(string $value)\n * @method string getName()\n * @method Mage_Sales_Model_Quote_Item setName(string $value)\n * @method string getDescription()\n * @method Mage_Sales_Model_Quote_Item setDescription(string $value)\n * @method string getAppliedRuleIds()\n * @method Mage_Sales_Model_Quote_Item setAppliedRuleIds(string $value)\n * @method string getAdditionalData()\n * @method Mage_Sales_Model_Quote_Item setAdditionalData(string $value)\n * @method int getFreeShipping()\n * @method Mage_Sales_Model_Quote_Item setFreeShipping(int $value)\n * @method int getIsQtyDecimal()\n * @method Mage_Sales_Model_Quote_Item setIsQtyDecimal(int $value)\n * @method int getNoDiscount()\n * @method Mage_Sales_Model_Quote_Item setNoDiscount(int $value)\n * @method float getWeight()\n * @method Mage_Sales_Model_Quote_Item setWeight(float $value)\n * @method float getBasePrice()\n * @method Mage_Sales_Model_Quote_Item setBasePrice(float $value)\n * @method float getCustomPrice()\n * @method float getDiscountPercent()\n * @method Mage_Sales_Model_Quote_Item setDiscountPercent(float $value)\n * @method float getDiscountAmount()\n * @method Mage_Sales_Model_Quote_Item setDiscountAmount(float $value)\n * @method float getBaseDiscountAmount()\n * @method Mage_Sales_Model_Quote_Item setBaseDiscountAmount(float $value)\n * @method float getTaxPercent()\n * @method Mage_Sales_Model_Quote_Item setTaxPercent(float $value)\n * @method Mage_Sales_Model_Quote_Item setTaxAmount(float $value)\n * @method Mage_Sales_Model_Quote_Item setBaseTaxAmount(float $value)\n * @method float getRowTotal()\n * @method Mage_Sales_Model_Quote_Item setRowTotal(float $value)\n * @method float getBaseRowTotal()\n * @method Mage_Sales_Model_Quote_Item setBaseRowTotal(float $value)\n * @method float getRowTotalWithDiscount()\n * @method Mage_Sales_Model_Quote_Item setRowTotalWithDiscount(float $value)\n * @method float getRowWeight()\n * @method Mage_Sales_Model_Quote_Item setRowWeight(float $value)\n * @method Mage_Sales_Model_Quote_Item setProductType(string $value)\n * @method float getBaseTaxBeforeDiscount()\n * @method Mage_Sales_Model_Quote_Item setBaseTaxBeforeDiscount(float $value)\n * @method float getTaxBeforeDiscount()\n * @method Mage_Sales_Model_Quote_Item setTaxBeforeDiscount(float $value)\n * @method float getOriginalCustomPrice()\n * @method Mage_Sales_Model_Quote_Item setOriginalCustomPrice(float $value)\n * @method string getRedirectUrl()\n * @method Mage_Sales_Model_Quote_Item setRedirectUrl(string $value)\n * @method float getBaseCost()\n * @method Mage_Sales_Model_Quote_Item setBaseCost(float $value)\n * @method float getPriceInclTax()\n * @method Mage_Sales_Model_Quote_Item setPriceInclTax(float $value)\n * @method float getBasePriceInclTax()\n * @method Mage_Sales_Model_Quote_Item setBasePriceInclTax(float $value)\n * @method float getRowTotalInclTax()\n * @method Mage_Sales_Model_Quote_Item setRowTotalInclTax(float $value)\n * @method float getBaseRowTotalInclTax()\n * @method Mage_Sales_Model_Quote_Item setBaseRowTotalInclTax(float $value)\n * @method int getGiftMessageId()\n * @method Mage_Sales_Model_Quote_Item setGiftMessageId(int $value)\n * @method string getWeeeTaxApplied()\n * @method Mage_Sales_Model_Quote_Item setWeeeTaxApplied(string $value)\n * @method float getWeeeTaxAppliedAmount()\n * @method Mage_Sales_Model_Quote_Item setWeeeTaxAppliedAmount(float $value)\n * @method float getWeeeTaxAppliedRowAmount()\n * @method Mage_Sales_Model_Quote_Item setWeeeTaxAppliedRowAmount(float $value)\n * @method float getBaseWeeeTaxAppliedAmount()\n * @method Mage_Sales_Model_Quote_Item setBaseWeeeTaxAppliedAmount(float $value)\n * @method float getBaseWeeeTaxAppliedRowAmount()\n * @method Mage_Sales_Model_Quote_Item setBaseWeeeTaxAppliedRowAmount(float $value)\n * @method float getWeeeTaxDisposition()\n * @method Mage_Sales_Model_Quote_Item setWeeeTaxDisposition(float $value)\n * @method float getWeeeTaxRowDisposition()\n * @method Mage_Sales_Model_Quote_Item setWeeeTaxRowDisposition(float $value)\n * @method float getBaseWeeeTaxDisposition()\n * @method Mage_Sales_Model_Quote_Item setBaseWeeeTaxDisposition(float $value)\n * @method float getBaseWeeeTaxRowDisposition()\n * @method Mage_Sales_Model_Quote_Item setBaseWeeeTaxRowDisposition(float $value)\n * @method float getHiddenTaxAmount()\n * @method Mage_Sales_Model_Quote_Item setHiddenTaxAmount(float $value)\n * @method float getBaseHiddenTaxAmount()\n * @method Mage_Sales_Model_Quote_Item setBaseHiddenTaxAmount(float $value)\n * @method null|bool getHasConfigurationUnavailableError()\n * @method Mage_Sales_Model_Quote_Item setHasConfigurationUnavailableError(bool $value)\n * @method Mage_Sales_Model_Quote_Item unsHasConfigurationUnavailableError()\n *\n * @category    Mage\n * @package     Mage_Sales\n * @author      Magento Core Team <core@magentocommerce.com>\n *\/",28],["T_WHITESPACE","\n",136],["T_CLASS","class",137],["T_WHITESPACE"," ",137],["T_STRING","Mage_Sales_Model_Quote_Item",137],["T_WHITESPACE"," ",137],["T_EXTENDS","extends",137],["T_WHITESPACE"," ",137],["T_STRING","Mage_Sales_Model_Quote_Item_Abstract",137],["T_WHITESPACE","\n",137],"{",["T_WHITESPACE","\n    ",138],["T_DOC_COMMENT","\/**\n     * Prefix of model events names\n     *\n     * @var string\n     *\/",139],["T_WHITESPACE","\n    ",143],["T_PROTECTED","protected",144],["T_WHITESPACE"," ",144],["T_VARIABLE","$_eventPrefix",144],["T_WHITESPACE"," ",144],"=",["T_WHITESPACE"," ",144],["T_CONSTANT_ENCAPSED_STRING","'sales_quote_item'",144],";",["T_WHITESPACE","\n\n    ",144],["T_DOC_COMMENT","\/**\n     * Parameter name in event\n     *\n     * In observe method you can use $observer->getEvent()->getObject() in this case\n     *\n     * @var string\n     *\/",146],["T_WHITESPACE","\n    ",152],["T_PROTECTED","protected",153],["T_WHITESPACE"," ",153],["T_VARIABLE","$_eventObject",153],["T_WHITESPACE"," ",153],"=",["T_WHITESPACE"," ",153],["T_CONSTANT_ENCAPSED_STRING","'item'",153],";",["T_WHITESPACE","\n\n    ",153],["T_DOC_COMMENT","\/**\n     * Quote model object\n     *\n     * @var Mage_Sales_Model_Quote\n     *\/",155],["T_WHITESPACE","\n    ",159],["T_PROTECTED","protected",160],["T_WHITESPACE"," ",160],["T_VARIABLE","$_quote",160],";",["T_WHITESPACE","\n\n    ",160],["T_DOC_COMMENT","\/**\n     * Item options array\n     *\n     * @var array\n     *\/",162],["T_WHITESPACE","\n    ",166],["T_PROTECTED","protected",167],["T_WHITESPACE"," ",167],["T_VARIABLE","$_options",167],["T_WHITESPACE"," ",167],"=",["T_WHITESPACE"," ",167],["T_ARRAY","array",167],"(",")",";",["T_WHITESPACE","\n\n    ",167],["T_DOC_COMMENT","\/**\n     * Item options by code cache\n     *\n     * @var array\n     *\/",169],["T_WHITESPACE","\n    ",173],["T_PROTECTED","protected",174],["T_WHITESPACE"," ",174],["T_VARIABLE","$_optionsByCode",174],["T_WHITESPACE"," ",174],"=",["T_WHITESPACE"," ",174],["T_ARRAY","array",174],"(",")",";",["T_WHITESPACE","\n\n    ",174],["T_DOC_COMMENT","\/**\n     * Not Represent options\n     *\n     * @var array\n     *\/",176],["T_WHITESPACE","\n    ",180],["T_PROTECTED","protected",181],["T_WHITESPACE"," ",181],["T_VARIABLE","$_notRepresentOptions",181],["T_WHITESPACE"," ",181],"=",["T_WHITESPACE"," ",181],["T_ARRAY","array",181],"(",["T_CONSTANT_ENCAPSED_STRING","'info_buyRequest'",181],")",";",["T_WHITESPACE","\n\n    ",181],["T_DOC_COMMENT","\/**\n     * Flag stating that options were successfully saved\n     *\n     *\/",183],["T_WHITESPACE","\n    ",186],["T_PROTECTED","protected",187],["T_WHITESPACE"," ",187],["T_VARIABLE","$_flagOptionsSaved",187],["T_WHITESPACE"," ",187],"=",["T_WHITESPACE"," ",187],["T_STRING","null",187],";",["T_WHITESPACE","\n\n    ",187],["T_DOC_COMMENT","\/**\n     * Array of errors associated with this quote item\n     *\n     * @var Mage_Sales_Model_Status_List\n     *\/",189],["T_WHITESPACE","\n    ",193],["T_PROTECTED","protected",194],["T_WHITESPACE"," ",194],["T_VARIABLE","$_errorInfos",194],["T_WHITESPACE"," ",194],"=",["T_WHITESPACE"," ",194],["T_STRING","null",194],";",["T_WHITESPACE","\n\n    ",194],["T_DOC_COMMENT","\/**\n     * Initialize resource model\n     *\n     *\/",196],["T_WHITESPACE","\n    ",199],["T_PROTECTED","protected",200],["T_WHITESPACE"," ",200],["T_FUNCTION","function",200],["T_WHITESPACE"," ",200],["T_STRING","_construct",200],"(",")",["T_WHITESPACE","\n    ",200],"{",["T_WHITESPACE","\n        ",201],["T_VARIABLE","$this",202],["T_OBJECT_OPERATOR","->",202],["T_STRING","_init",202],"(",["T_CONSTANT_ENCAPSED_STRING","'sales\/quote_item'",202],")",";",["T_WHITESPACE","\n        ",202],["T_VARIABLE","$this",203],["T_OBJECT_OPERATOR","->",203],["T_STRING","_errorInfos",203],["T_WHITESPACE"," ",203],"=",["T_WHITESPACE"," ",203],["T_STRING","Mage",203],["T_DOUBLE_COLON","::",203],["T_STRING","getModel",203],"(",["T_CONSTANT_ENCAPSED_STRING","'sales\/status_list'",203],")",";",["T_WHITESPACE","\n    ",203],"}",["T_WHITESPACE","\n\n    ",204],["T_DOC_COMMENT","\/**\n     * Init mapping array of short fields to\n     * its full names\n     *\n     * @return Varien_Object\n     *\/",206],["T_WHITESPACE","\n    ",211],["T_PROTECTED","protected",212],["T_WHITESPACE"," ",212],["T_FUNCTION","function",212],["T_WHITESPACE"," ",212],["T_STRING","_initOldFieldsMap",212],"(",")",["T_WHITESPACE","\n    ",212],"{",["T_WHITESPACE","\n        ",213],["T_VARIABLE","$this",214],["T_OBJECT_OPERATOR","->",214],["T_STRING","_oldFieldsMap",214],["T_WHITESPACE"," ",214],"=",["T_WHITESPACE"," ",214],["T_STRING","Mage",214],["T_DOUBLE_COLON","::",214],["T_STRING","helper",214],"(",["T_CONSTANT_ENCAPSED_STRING","'sales'",214],")",["T_OBJECT_OPERATOR","->",214],["T_STRING","getOldFieldMap",214],"(",["T_CONSTANT_ENCAPSED_STRING","'quote_item'",214],")",";",["T_WHITESPACE","\n        ",214],["T_RETURN","return",215],["T_WHITESPACE"," ",215],["T_VARIABLE","$this",215],";",["T_WHITESPACE","\n    ",215],"}",["T_WHITESPACE","\n\n    ",216],["T_DOC_COMMENT","\/**\n     * Quote Item Before Save prepare data process\n     *\n     * @return Mage_Sales_Model_Quote_Item\n     *\/",218],["T_WHITESPACE","\n    ",222],["T_PROTECTED","protected",223],["T_WHITESPACE"," ",223],["T_FUNCTION","function",223],["T_WHITESPACE"," ",223],["T_STRING","_beforeSave",223],"(",")",["T_WHITESPACE","\n    ",223],"{",["T_WHITESPACE","\n        ",224],["T_STRING","parent",225],["T_DOUBLE_COLON","::",225],["T_STRING","_beforeSave",225],"(",")",";",["T_WHITESPACE","\n        ",225],["T_VARIABLE","$this",226],["T_OBJECT_OPERATOR","->",226],["T_STRING","setIsVirtual",226],"(",["T_VARIABLE","$this",226],["T_OBJECT_OPERATOR","->",226],["T_STRING","getProduct",226],"(",")",["T_OBJECT_OPERATOR","->",226],["T_STRING","getIsVirtual",226],"(",")",")",";",["T_WHITESPACE","\n        ",226],["T_IF","if",227],["T_WHITESPACE"," ",227],"(",["T_VARIABLE","$this",227],["T_OBJECT_OPERATOR","->",227],["T_STRING","getQuote",227],"(",")",")",["T_WHITESPACE"," ",227],"{",["T_WHITESPACE","\n            ",227],["T_VARIABLE","$this",228],["T_OBJECT_OPERATOR","->",228],["T_STRING","setQuoteId",228],"(",["T_VARIABLE","$this",228],["T_OBJECT_OPERATOR","->",228],["T_STRING","getQuote",228],"(",")",["T_OBJECT_OPERATOR","->",228],["T_STRING","getId",228],"(",")",")",";",["T_WHITESPACE","\n        ",228],"}",["T_WHITESPACE","\n        ",229],["T_RETURN","return",230],["T_WHITESPACE"," ",230],["T_VARIABLE","$this",230],";",["T_WHITESPACE","\n    ",230],"}",["T_WHITESPACE","\n\n    ",231],["T_DOC_COMMENT","\/**\n     * Declare quote model object\n     *\n     * @param   Mage_Sales_Model_Quote $quote\n     * @return  Mage_Sales_Model_Quote_Item\n     *\/",233],["T_WHITESPACE","\n    ",238],["T_PUBLIC","public",239],["T_WHITESPACE"," ",239],["T_FUNCTION","function",239],["T_WHITESPACE"," ",239],["T_STRING","setQuote",239],"(",["T_STRING","Mage_Sales_Model_Quote",239],["T_WHITESPACE"," ",239],["T_VARIABLE","$quote",239],")",["T_WHITESPACE","\n    ",239],"{",["T_WHITESPACE","\n        ",240],["T_VARIABLE","$this",241],["T_OBJECT_OPERATOR","->",241],["T_STRING","_quote",241],["T_WHITESPACE"," ",241],"=",["T_WHITESPACE"," ",241],["T_VARIABLE","$quote",241],";",["T_WHITESPACE","\n        ",241],["T_VARIABLE","$this",242],["T_OBJECT_OPERATOR","->",242],["T_STRING","setQuoteId",242],"(",["T_VARIABLE","$quote",242],["T_OBJECT_OPERATOR","->",242],["T_STRING","getId",242],"(",")",")",";",["T_WHITESPACE","\n        ",242],["T_RETURN","return",243],["T_WHITESPACE"," ",243],["T_VARIABLE","$this",243],";",["T_WHITESPACE","\n    ",243],"}",["T_WHITESPACE","\n\n    ",244],["T_DOC_COMMENT","\/**\n     * Retrieve quote model object\n     *\n     * @return Mage_Sales_Model_Quote\n     *\/",246],["T_WHITESPACE","\n    ",250],["T_PUBLIC","public",251],["T_WHITESPACE"," ",251],["T_FUNCTION","function",251],["T_WHITESPACE"," ",251],["T_STRING","getQuote",251],"(",")",["T_WHITESPACE","\n    ",251],"{",["T_WHITESPACE","\n        ",252],["T_RETURN","return",253],["T_WHITESPACE"," ",253],["T_VARIABLE","$this",253],["T_OBJECT_OPERATOR","->",253],["T_STRING","_quote",253],";",["T_WHITESPACE","\n    ",253],"}",["T_WHITESPACE","\n\n    ",254],["T_DOC_COMMENT","\/**\n     * Prepare quantity\n     *\n     * @param float|int $qty\n     * @return int|float\n     *\/",256],["T_WHITESPACE","\n    ",261],["T_PROTECTED","protected",262],["T_WHITESPACE"," ",262],["T_FUNCTION","function",262],["T_WHITESPACE"," ",262],["T_STRING","_prepareQty",262],"(",["T_VARIABLE","$qty",262],")",["T_WHITESPACE","\n    ",262],"{",["T_WHITESPACE","\n        ",263],["T_VARIABLE","$qty",264],["T_WHITESPACE"," ",264],"=",["T_WHITESPACE"," ",264],["T_STRING","Mage",264],["T_DOUBLE_COLON","::",264],["T_STRING","app",264],"(",")",["T_OBJECT_OPERATOR","->",264],["T_STRING","getLocale",264],"(",")",["T_OBJECT_OPERATOR","->",264],["T_STRING","getNumber",264],"(",["T_VARIABLE","$qty",264],")",";",["T_WHITESPACE","\n        ",264],["T_VARIABLE","$qty",265],["T_WHITESPACE"," ",265],"=",["T_WHITESPACE"," ",265],"(",["T_VARIABLE","$qty",265],["T_WHITESPACE"," ",265],">",["T_WHITESPACE"," ",265],["T_LNUMBER","0",265],")",["T_WHITESPACE"," ",265],"?",["T_WHITESPACE"," ",265],["T_VARIABLE","$qty",265],["T_WHITESPACE"," ",265],":",["T_WHITESPACE"," ",265],["T_LNUMBER","1",265],";",["T_WHITESPACE","\n        ",265],["T_RETURN","return",266],["T_WHITESPACE"," ",266],["T_VARIABLE","$qty",266],";",["T_WHITESPACE","\n    ",266],"}",["T_WHITESPACE","\n\n    ",267],["T_DOC_COMMENT","\/**\n     * Get Magento App instance\n     *\n     * @return Mage_Core_Model_App\n     *\/",269],["T_WHITESPACE","\n    ",273],["T_PROTECTED","protected",274],["T_WHITESPACE"," ",274],["T_FUNCTION","function",274],["T_WHITESPACE"," ",274],["T_STRING","_getApp",274],"(",")",["T_WHITESPACE","\n    ",274],"{",["T_WHITESPACE","\n        ",275],["T_RETURN","return",276],["T_WHITESPACE"," ",276],["T_STRING","Mage",276],["T_DOUBLE_COLON","::",276],["T_STRING","app",276],"(",")",";",["T_WHITESPACE","\n    ",276],"}",["T_WHITESPACE","\n\n    ",277],["T_DOC_COMMENT","\/**\n     * Adding quantity to quote item\n     *\n     * @param float $qty\n     * @return Mage_Sales_Model_Quote_Item\n     *\/",279],["T_WHITESPACE","\n    ",284],["T_PUBLIC","public",285],["T_WHITESPACE"," ",285],["T_FUNCTION","function",285],["T_WHITESPACE"," ",285],["T_STRING","addQty",285],"(",["T_VARIABLE","$qty",285],")",["T_WHITESPACE","\n    ",285],"{",["T_WHITESPACE","\n        ",286],["T_VARIABLE","$oldQty",287],["T_WHITESPACE"," ",287],"=",["T_WHITESPACE"," ",287],["T_VARIABLE","$this",287],["T_OBJECT_OPERATOR","->",287],["T_STRING","getQty",287],"(",")",";",["T_WHITESPACE","\n        ",287],["T_VARIABLE","$qty",288],["T_WHITESPACE"," ",288],"=",["T_WHITESPACE"," ",288],["T_VARIABLE","$this",288],["T_OBJECT_OPERATOR","->",288],["T_STRING","_prepareQty",288],"(",["T_VARIABLE","$qty",288],")",";",["T_WHITESPACE","\n\n        ",288],["T_DOC_COMMENT","\/**\n         * We can't modify quontity of existing items which have parent\n         * This qty declared just once duering add process and is not editable\n         *\/",290],["T_WHITESPACE","\n        ",293],["T_IF","if",294],["T_WHITESPACE"," ",294],"(","!",["T_VARIABLE","$this",294],["T_OBJECT_OPERATOR","->",294],["T_STRING","getParentItem",294],"(",")",["T_WHITESPACE"," ",294],["T_BOOLEAN_OR","||",294],["T_WHITESPACE"," ",294],"!",["T_VARIABLE","$this",294],["T_OBJECT_OPERATOR","->",294],["T_STRING","getId",294],"(",")",")",["T_WHITESPACE"," ",294],"{",["T_WHITESPACE","\n            ",294],["T_VARIABLE","$this",295],["T_OBJECT_OPERATOR","->",295],["T_STRING","setQtyToAdd",295],"(",["T_VARIABLE","$qty",295],")",";",["T_WHITESPACE","\n            ",295],["T_VARIABLE","$this",296],["T_OBJECT_OPERATOR","->",296],["T_STRING","setQty",296],"(",["T_VARIABLE","$oldQty",296],["T_WHITESPACE"," ",296],"+",["T_WHITESPACE"," ",296],["T_VARIABLE","$qty",296],")",";",["T_WHITESPACE","\n        ",296],"}",["T_WHITESPACE","\n        ",297],["T_RETURN","return",298],["T_WHITESPACE"," ",298],["T_VARIABLE","$this",298],";",["T_WHITESPACE","\n    ",298],"}",["T_WHITESPACE","\n\n    ",299],["T_DOC_COMMENT","\/**\n     * Declare quote item quantity\n     *\n     * @param float $qty\n     * @return Mage_Sales_Model_Quote_Item\n     *\/",301],["T_WHITESPACE","\n    ",306],["T_PUBLIC","public",307],["T_WHITESPACE"," ",307],["T_FUNCTION","function",307],["T_WHITESPACE"," ",307],["T_STRING","setQty",307],"(",["T_VARIABLE","$qty",307],")",["T_WHITESPACE","\n    ",307],"{",["T_WHITESPACE","\n        ",308],["T_VARIABLE","$qty",309],["T_WHITESPACE"," ",309],"=",["T_WHITESPACE"," ",309],["T_VARIABLE","$this",309],["T_OBJECT_OPERATOR","->",309],["T_STRING","_prepareQty",309],"(",["T_VARIABLE","$qty",309],")",";",["T_WHITESPACE","\n        ",309],["T_VARIABLE","$oldQty",310],["T_WHITESPACE"," ",310],"=",["T_WHITESPACE"," ",310],["T_VARIABLE","$this",310],["T_OBJECT_OPERATOR","->",310],["T_STRING","_getData",310],"(",["T_CONSTANT_ENCAPSED_STRING","'qty'",310],")",";",["T_WHITESPACE","\n        ",310],["T_VARIABLE","$this",311],["T_OBJECT_OPERATOR","->",311],["T_STRING","setData",311],"(",["T_CONSTANT_ENCAPSED_STRING","'qty'",311],",",["T_WHITESPACE"," ",311],["T_VARIABLE","$qty",311],")",";",["T_WHITESPACE","\n\n        ",311],["T_STRING","Mage",313],["T_DOUBLE_COLON","::",313],["T_STRING","dispatchEvent",313],"(",["T_CONSTANT_ENCAPSED_STRING","'sales_quote_item_qty_set_after'",313],",",["T_WHITESPACE"," ",313],["T_ARRAY","array",313],"(",["T_CONSTANT_ENCAPSED_STRING","'item'",313],["T_WHITESPACE"," ",313],["T_DOUBLE_ARROW","=>",313],["T_WHITESPACE"," ",313],["T_VARIABLE","$this",313],")",")",";",["T_WHITESPACE","\n\n        ",313],["T_IF","if",315],["T_WHITESPACE"," ",315],"(",["T_VARIABLE","$this",315],["T_OBJECT_OPERATOR","->",315],["T_STRING","getQuote",315],"(",")",["T_WHITESPACE"," ",315],["T_BOOLEAN_AND","&&",315],["T_WHITESPACE"," ",315],["T_VARIABLE","$this",315],["T_OBJECT_OPERATOR","->",315],["T_STRING","getQuote",315],"(",")",["T_OBJECT_OPERATOR","->",315],["T_STRING","getIgnoreOldQty",315],"(",")",")",["T_WHITESPACE"," ",315],"{",["T_WHITESPACE","\n            ",315],["T_RETURN","return",316],["T_WHITESPACE"," ",316],["T_VARIABLE","$this",316],";",["T_WHITESPACE","\n        ",316],"}",["T_WHITESPACE","\n        ",317],["T_IF","if",318],["T_WHITESPACE"," ",318],"(",["T_VARIABLE","$this",318],["T_OBJECT_OPERATOR","->",318],["T_STRING","getUseOldQty",318],"(",")",")",["T_WHITESPACE"," ",318],"{",["T_WHITESPACE","\n            ",318],["T_VARIABLE","$this",319],["T_OBJECT_OPERATOR","->",319],["T_STRING","setData",319],"(",["T_CONSTANT_ENCAPSED_STRING","'qty'",319],",",["T_WHITESPACE"," ",319],["T_VARIABLE","$oldQty",319],")",";",["T_WHITESPACE","\n        ",319],"}",["T_WHITESPACE","\n\n        ",320],["T_RETURN","return",322],["T_WHITESPACE"," ",322],["T_VARIABLE","$this",322],";",["T_WHITESPACE","\n    ",322],"}",["T_WHITESPACE","\n\n    ",323],["T_DOC_COMMENT","\/**\n     * Retrieve option product with Qty\n     *\n     * Return array\n     * 'qty'        => the qty\n     * 'product'    => the product model\n     *\n     * @return array\n     *\/",325],["T_WHITESPACE","\n    ",333],["T_PUBLIC","public",334],["T_WHITESPACE"," ",334],["T_FUNCTION","function",334],["T_WHITESPACE"," ",334],["T_STRING","getQtyOptions",334],"(",")",["T_WHITESPACE","\n    ",334],"{",["T_WHITESPACE","\n        ",335],["T_VARIABLE","$qtyOptions",336],["T_WHITESPACE"," ",336],"=",["T_WHITESPACE"," ",336],["T_VARIABLE","$this",336],["T_OBJECT_OPERATOR","->",336],["T_STRING","getData",336],"(",["T_CONSTANT_ENCAPSED_STRING","'qty_options'",336],")",";",["T_WHITESPACE","\n        ",336],["T_IF","if",337],["T_WHITESPACE"," ",337],"(",["T_STRING","is_null",337],"(",["T_VARIABLE","$qtyOptions",337],")",")",["T_WHITESPACE"," ",337],"{",["T_WHITESPACE","\n            ",337],["T_VARIABLE","$productIds",338],["T_WHITESPACE"," ",338],"=",["T_WHITESPACE"," ",338],["T_ARRAY","array",338],"(",")",";",["T_WHITESPACE","\n            ",338],["T_VARIABLE","$qtyOptions",339],["T_WHITESPACE"," ",339],"=",["T_WHITESPACE"," ",339],["T_ARRAY","array",339],"(",")",";",["T_WHITESPACE","\n            ",339],["T_FOREACH","foreach",340],["T_WHITESPACE"," ",340],"(",["T_VARIABLE","$this",340],["T_OBJECT_OPERATOR","->",340],["T_STRING","getOptions",340],"(",")",["T_WHITESPACE"," ",340],["T_AS","as",340],["T_WHITESPACE"," ",340],["T_VARIABLE","$option",340],")",["T_WHITESPACE"," ",340],"{",["T_WHITESPACE","\n                ",340],["T_DOC_COMMENT","\/** @var $option Mage_Sales_Model_Quote_Item_Option *\/",341],["T_WHITESPACE","\n                ",341],["T_IF","if",342],["T_WHITESPACE"," ",342],"(",["T_STRING","is_object",342],"(",["T_VARIABLE","$option",342],["T_OBJECT_OPERATOR","->",342],["T_STRING","getProduct",342],"(",")",")",["T_WHITESPACE","\n                    ",342],["T_BOOLEAN_AND","&&",343],["T_WHITESPACE"," ",343],["T_VARIABLE","$option",343],["T_OBJECT_OPERATOR","->",343],["T_STRING","getProduct",343],"(",")",["T_OBJECT_OPERATOR","->",343],["T_STRING","getId",343],"(",")",["T_WHITESPACE"," ",343],["T_IS_NOT_EQUAL","!=",343],["T_WHITESPACE"," ",343],["T_VARIABLE","$this",343],["T_OBJECT_OPERATOR","->",343],["T_STRING","getProduct",343],"(",")",["T_OBJECT_OPERATOR","->",343],["T_STRING","getId",343],"(",")",["T_WHITESPACE","\n                ",343],")",["T_WHITESPACE"," ",344],"{",["T_WHITESPACE","\n                    ",344],["T_VARIABLE","$productIds",345],"[",["T_VARIABLE","$option",345],["T_OBJECT_OPERATOR","->",345],["T_STRING","getProduct",345],"(",")",["T_OBJECT_OPERATOR","->",345],["T_STRING","getId",345],"(",")","]",["T_WHITESPACE"," ",345],"=",["T_WHITESPACE"," ",345],["T_VARIABLE","$option",345],["T_OBJECT_OPERATOR","->",345],["T_STRING","getProduct",345],"(",")",["T_OBJECT_OPERATOR","->",345],["T_STRING","getId",345],"(",")",";",["T_WHITESPACE","\n                ",345],"}",["T_WHITESPACE","\n            ",346],"}",["T_WHITESPACE","\n\n            ",347],["T_FOREACH","foreach",349],["T_WHITESPACE"," ",349],"(",["T_VARIABLE","$productIds",349],["T_WHITESPACE"," ",349],["T_AS","as",349],["T_WHITESPACE"," ",349],["T_VARIABLE","$productId",349],")",["T_WHITESPACE"," ",349],"{",["T_WHITESPACE","\n                ",349],["T_VARIABLE","$option",350],["T_WHITESPACE"," ",350],"=",["T_WHITESPACE"," ",350],["T_VARIABLE","$this",350],["T_OBJECT_OPERATOR","->",350],["T_STRING","getOptionByCode",350],"(",["T_CONSTANT_ENCAPSED_STRING","'product_qty_'",350],["T_WHITESPACE"," ",350],".",["T_WHITESPACE"," ",350],["T_VARIABLE","$productId",350],")",";",["T_WHITESPACE","\n                ",350],["T_IF","if",351],["T_WHITESPACE"," ",351],"(",["T_VARIABLE","$option",351],")",["T_WHITESPACE"," ",351],"{",["T_WHITESPACE","\n                    ",351],["T_VARIABLE","$qtyOptions",352],"[",["T_VARIABLE","$productId",352],"]",["T_WHITESPACE"," ",352],"=",["T_WHITESPACE"," ",352],["T_VARIABLE","$option",352],";",["T_WHITESPACE","\n                ",352],"}",["T_WHITESPACE","\n            ",353],"}",["T_WHITESPACE","\n\n            ",354],["T_VARIABLE","$this",356],["T_OBJECT_OPERATOR","->",356],["T_STRING","setData",356],"(",["T_CONSTANT_ENCAPSED_STRING","'qty_options'",356],",",["T_WHITESPACE"," ",356],["T_VARIABLE","$qtyOptions",356],")",";",["T_WHITESPACE","\n        ",356],"}",["T_WHITESPACE","\n\n        ",357],["T_RETURN","return",359],["T_WHITESPACE"," ",359],["T_VARIABLE","$qtyOptions",359],";",["T_WHITESPACE","\n    ",359],"}",["T_WHITESPACE","\n\n    ",360],["T_DOC_COMMENT","\/**\n     * Set option product with Qty\n     *\n     * @param  $qtyOptions\n     * @return Mage_Sales_Model_Quote_Item\n     *\/",362],["T_WHITESPACE","\n    ",367],["T_PUBLIC","public",368],["T_WHITESPACE"," ",368],["T_FUNCTION","function",368],["T_WHITESPACE"," ",368],["T_STRING","setQtyOptions",368],"(",["T_VARIABLE","$qtyOptions",368],")",["T_WHITESPACE","\n    ",368],"{",["T_WHITESPACE","\n        ",369],["T_RETURN","return",370],["T_WHITESPACE"," ",370],["T_VARIABLE","$this",370],["T_OBJECT_OPERATOR","->",370],["T_STRING","setData",370],"(",["T_CONSTANT_ENCAPSED_STRING","'qty_options'",370],",",["T_WHITESPACE"," ",370],["T_VARIABLE","$qtyOptions",370],")",";",["T_WHITESPACE","\n    ",370],"}",["T_WHITESPACE","\n\n    ",371],["T_DOC_COMMENT","\/**\n     * Setup product for quote item\n     *\n     * @param   Mage_Catalog_Model_Product $product\n     * @return  Mage_Sales_Model_Quote_Item\n     *\/",373],["T_WHITESPACE","\n    ",378],["T_PUBLIC","public",379],["T_WHITESPACE"," ",379],["T_FUNCTION","function",379],["T_WHITESPACE"," ",379],["T_STRING","setProduct",379],"(",["T_VARIABLE","$product",379],")",["T_WHITESPACE","\n    ",379],"{",["T_WHITESPACE","\n        ",380],["T_IF","if",381],["T_WHITESPACE"," ",381],"(",["T_VARIABLE","$this",381],["T_OBJECT_OPERATOR","->",381],["T_STRING","getQuote",381],"(",")",")",["T_WHITESPACE"," ",381],"{",["T_WHITESPACE","\n            ",381],["T_VARIABLE","$product",382],["T_OBJECT_OPERATOR","->",382],["T_STRING","setStoreId",382],"(",["T_VARIABLE","$this",382],["T_OBJECT_OPERATOR","->",382],["T_STRING","getQuote",382],"(",")",["T_OBJECT_OPERATOR","->",382],["T_STRING","getStoreId",382],"(",")",")",";",["T_WHITESPACE","\n            ",382],["T_VARIABLE","$product",383],["T_OBJECT_OPERATOR","->",383],["T_STRING","setCustomerGroupId",383],"(",["T_VARIABLE","$this",383],["T_OBJECT_OPERATOR","->",383],["T_STRING","getQuote",383],"(",")",["T_OBJECT_OPERATOR","->",383],["T_STRING","getCustomerGroupId",383],"(",")",")",";",["T_WHITESPACE","\n        ",383],"}",["T_WHITESPACE","\n        ",384],["T_VARIABLE","$this",385],["T_OBJECT_OPERATOR","->",385],["T_STRING","setData",385],"(",["T_CONSTANT_ENCAPSED_STRING","'product'",385],",",["T_WHITESPACE"," ",385],["T_VARIABLE","$product",385],")",["T_WHITESPACE","\n            ",385],["T_OBJECT_OPERATOR","->",386],["T_STRING","setProductId",386],"(",["T_VARIABLE","$product",386],["T_OBJECT_OPERATOR","->",386],["T_STRING","getId",386],"(",")",")",["T_WHITESPACE","\n            ",386],["T_OBJECT_OPERATOR","->",387],["T_STRING","setProductType",387],"(",["T_VARIABLE","$product",387],["T_OBJECT_OPERATOR","->",387],["T_STRING","getTypeId",387],"(",")",")",["T_WHITESPACE","\n            ",387],["T_OBJECT_OPERATOR","->",388],["T_STRING","setSku",388],"(",["T_VARIABLE","$this",388],["T_OBJECT_OPERATOR","->",388],["T_STRING","getProduct",388],"(",")",["T_OBJECT_OPERATOR","->",388],["T_STRING","getSku",388],"(",")",")",["T_WHITESPACE","\n            ",388],["T_OBJECT_OPERATOR","->",389],["T_STRING","setName",389],"(",["T_VARIABLE","$product",389],["T_OBJECT_OPERATOR","->",389],["T_STRING","getName",389],"(",")",")",["T_WHITESPACE","\n            ",389],["T_OBJECT_OPERATOR","->",390],["T_STRING","setWeight",390],"(",["T_VARIABLE","$this",390],["T_OBJECT_OPERATOR","->",390],["T_STRING","getProduct",390],"(",")",["T_OBJECT_OPERATOR","->",390],["T_STRING","getWeight",390],"(",")",")",["T_WHITESPACE","\n            ",390],["T_OBJECT_OPERATOR","->",391],["T_STRING","setTaxClassId",391],"(",["T_VARIABLE","$product",391],["T_OBJECT_OPERATOR","->",391],["T_STRING","getTaxClassId",391],"(",")",")",["T_WHITESPACE","\n            ",391],["T_OBJECT_OPERATOR","->",392],["T_STRING","setBaseCost",392],"(",["T_VARIABLE","$product",392],["T_OBJECT_OPERATOR","->",392],["T_STRING","getCost",392],"(",")",")",["T_WHITESPACE","\n            ",392],["T_OBJECT_OPERATOR","->",393],["T_STRING","setIsRecurring",393],"(",["T_VARIABLE","$product",393],["T_OBJECT_OPERATOR","->",393],["T_STRING","getIsRecurring",393],"(",")",")",";",["T_WHITESPACE","\n\n        ",393],["T_IF","if",395],["T_WHITESPACE"," ",395],"(",["T_VARIABLE","$product",395],["T_OBJECT_OPERATOR","->",395],["T_STRING","getStockItem",395],"(",")",")",["T_WHITESPACE"," ",395],"{",["T_WHITESPACE","\n            ",395],["T_VARIABLE","$this",396],["T_OBJECT_OPERATOR","->",396],["T_STRING","setIsQtyDecimal",396],"(",["T_VARIABLE","$product",396],["T_OBJECT_OPERATOR","->",396],["T_STRING","getStockItem",396],"(",")",["T_OBJECT_OPERATOR","->",396],["T_STRING","getIsQtyDecimal",396],"(",")",")",";",["T_WHITESPACE","\n        ",396],"}",["T_WHITESPACE","\n\n        ",397],["T_STRING","Mage",399],["T_DOUBLE_COLON","::",399],["T_STRING","dispatchEvent",399],"(",["T_CONSTANT_ENCAPSED_STRING","'sales_quote_item_set_product'",399],",",["T_WHITESPACE"," ",399],["T_ARRAY","array",399],"(",["T_WHITESPACE","\n            ",399],["T_CONSTANT_ENCAPSED_STRING","'product'",400],["T_WHITESPACE"," ",400],["T_DOUBLE_ARROW","=>",400],["T_WHITESPACE"," ",400],["T_VARIABLE","$product",400],",",["T_WHITESPACE","\n            ",400],["T_CONSTANT_ENCAPSED_STRING","'quote_item'",401],["T_WHITESPACE"," ",401],["T_DOUBLE_ARROW","=>",401],["T_WHITESPACE"," ",401],["T_VARIABLE","$this",401],["T_WHITESPACE","\n        ",401],")",")",";",["T_WHITESPACE","\n\n\n",402],["T_COMMENT","\/\/        if ($options = $product->getCustomOptions()) {\n",405],["T_COMMENT","\/\/            foreach ($options as $option) {\n",406],["T_COMMENT","\/\/                $this->addOption($option);\n",407],["T_COMMENT","\/\/            }\n",408],["T_COMMENT","\/\/        }\n",409],["T_WHITESPACE","        ",410],["T_RETURN","return",410],["T_WHITESPACE"," ",410],["T_VARIABLE","$this",410],";",["T_WHITESPACE","\n    ",410],"}",["T_WHITESPACE","\n\n    ",411],["T_DOC_COMMENT","\/**\n     * Check product representation in item\n     *\n     * @param   Mage_Catalog_Model_Product $product\n     * @return  bool\n     *\/",413],["T_WHITESPACE","\n    ",418],["T_PUBLIC","public",419],["T_WHITESPACE"," ",419],["T_FUNCTION","function",419],["T_WHITESPACE"," ",419],["T_STRING","representProduct",419],"(",["T_VARIABLE","$product",419],")",["T_WHITESPACE","\n    ",419],"{",["T_WHITESPACE","\n        ",420],["T_VARIABLE","$itemProduct",421],["T_WHITESPACE"," ",421],"=",["T_WHITESPACE"," ",421],["T_VARIABLE","$this",421],["T_OBJECT_OPERATOR","->",421],["T_STRING","getProduct",421],"(",")",";",["T_WHITESPACE","\n        ",421],["T_IF","if",422],["T_WHITESPACE"," ",422],"(","!",["T_VARIABLE","$product",422],["T_WHITESPACE"," ",422],["T_BOOLEAN_OR","||",422],["T_WHITESPACE"," ",422],["T_VARIABLE","$itemProduct",422],["T_OBJECT_OPERATOR","->",422],["T_STRING","getId",422],"(",")",["T_WHITESPACE"," ",422],["T_IS_NOT_EQUAL","!=",422],["T_WHITESPACE"," ",422],["T_VARIABLE","$product",422],["T_OBJECT_OPERATOR","->",422],["T_STRING","getId",422],"(",")",")",["T_WHITESPACE"," ",422],"{",["T_WHITESPACE","\n            ",422],["T_RETURN","return",423],["T_WHITESPACE"," ",423],["T_STRING","false",423],";",["T_WHITESPACE","\n        ",423],"}",["T_WHITESPACE","\n\n        ",424],["T_DOC_COMMENT","\/**\n         * Check maybe product is planned to be a child of some quote item - in this case we limit search\n         * only within same parent item\n         *\/",426],["T_WHITESPACE","\n        ",429],["T_VARIABLE","$stickWithinParent",430],["T_WHITESPACE"," ",430],"=",["T_WHITESPACE"," ",430],["T_VARIABLE","$product",430],["T_OBJECT_OPERATOR","->",430],["T_STRING","getStickWithinParent",430],"(",")",";",["T_WHITESPACE","\n        ",430],["T_IF","if",431],["T_WHITESPACE"," ",431],"(",["T_VARIABLE","$stickWithinParent",431],")",["T_WHITESPACE"," ",431],"{",["T_WHITESPACE","\n            ",431],["T_IF","if",432],["T_WHITESPACE"," ",432],"(",["T_VARIABLE","$this",432],["T_OBJECT_OPERATOR","->",432],["T_STRING","getParentItem",432],"(",")",["T_WHITESPACE"," ",432],["T_IS_NOT_IDENTICAL","!==",432],["T_WHITESPACE"," ",432],["T_VARIABLE","$stickWithinParent",432],")",["T_WHITESPACE"," ",432],"{",["T_WHITESPACE","\n                ",432],["T_RETURN","return",433],["T_WHITESPACE"," ",433],["T_STRING","false",433],";",["T_WHITESPACE","\n            ",433],"}",["T_WHITESPACE","\n        ",434],"}",["T_WHITESPACE","\n\n        ",435],["T_COMMENT","\/\/ Check options\n",437],["T_WHITESPACE","        ",438],["T_VARIABLE","$itemOptions",438],["T_WHITESPACE"," ",438],"=",["T_WHITESPACE"," ",438],["T_VARIABLE","$this",438],["T_OBJECT_OPERATOR","->",438],["T_STRING","getOptionsByCode",438],"(",")",";",["T_WHITESPACE","\n        ",438],["T_VARIABLE","$productOptions",439],["T_WHITESPACE"," ",439],"=",["T_WHITESPACE"," ",439],["T_VARIABLE","$product",439],["T_OBJECT_OPERATOR","->",439],["T_STRING","getCustomOptions",439],"(",")",";",["T_WHITESPACE","\n\n        ",439],["T_IF","if",441],["T_WHITESPACE"," ",441],"(","!",["T_VARIABLE","$this",441],["T_OBJECT_OPERATOR","->",441],["T_STRING","compareOptions",441],"(",["T_VARIABLE","$itemOptions",441],",",["T_WHITESPACE"," ",441],["T_VARIABLE","$productOptions",441],")",")",["T_WHITESPACE"," ",441],"{",["T_WHITESPACE","\n            ",441],["T_RETURN","return",442],["T_WHITESPACE"," ",442],["T_STRING","false",442],";",["T_WHITESPACE","\n        ",442],"}",["T_WHITESPACE","\n        ",443],["T_IF","if",444],["T_WHITESPACE"," ",444],"(","!",["T_VARIABLE","$this",444],["T_OBJECT_OPERATOR","->",444],["T_STRING","compareOptions",444],"(",["T_VARIABLE","$productOptions",444],",",["T_WHITESPACE"," ",444],["T_VARIABLE","$itemOptions",444],")",")",["T_WHITESPACE"," ",444],"{",["T_WHITESPACE","\n            ",444],["T_RETURN","return",445],["T_WHITESPACE"," ",445],["T_STRING","false",445],";",["T_WHITESPACE","\n        ",445],"}",["T_WHITESPACE","\n        ",446],["T_RETURN","return",447],["T_WHITESPACE"," ",447],["T_STRING","true",447],";",["T_WHITESPACE","\n    ",447],"}",["T_WHITESPACE","\n\n    ",448],["T_DOC_COMMENT","\/**\n     * Check if two options array are identical\n     * First options array is prerogative\n     * Second options array checked against first one\n     *\n     * @param array $options1\n     * @param array $options2\n     * @return bool\n     *\/",450],["T_WHITESPACE","\n    ",458],["T_PUBLIC","public",459],["T_WHITESPACE"," ",459],["T_FUNCTION","function",459],["T_WHITESPACE"," ",459],["T_STRING","compareOptions",459],"(",["T_VARIABLE","$options1",459],",",["T_WHITESPACE"," ",459],["T_VARIABLE","$options2",459],")",["T_WHITESPACE","\n    ",459],"{",["T_WHITESPACE","\n        ",460],["T_FOREACH","foreach",461],["T_WHITESPACE"," ",461],"(",["T_VARIABLE","$options1",461],["T_WHITESPACE"," ",461],["T_AS","as",461],["T_WHITESPACE"," ",461],["T_VARIABLE","$option",461],")",["T_WHITESPACE"," ",461],"{",["T_WHITESPACE","\n            ",461],["T_VARIABLE","$code",462],["T_WHITESPACE"," ",462],"=",["T_WHITESPACE"," ",462],["T_VARIABLE","$option",462],["T_OBJECT_OPERATOR","->",462],["T_STRING","getCode",462],"(",")",";",["T_WHITESPACE","\n            ",462],["T_IF","if",463],["T_WHITESPACE"," ",463],"(",["T_STRING","in_array",463],"(",["T_VARIABLE","$code",463],",",["T_WHITESPACE"," ",463],["T_VARIABLE","$this",463],["T_OBJECT_OPERATOR","->",463],["T_STRING","_notRepresentOptions",463],")",")",["T_WHITESPACE"," ",463],"{",["T_WHITESPACE","\n                ",463],["T_CONTINUE","continue",464],";",["T_WHITESPACE","\n            ",464],"}",["T_WHITESPACE","\n            ",465],["T_IF","if",466],["T_WHITESPACE"," ",466],"(","!",["T_ISSET","isset",466],"(",["T_VARIABLE","$options2",466],"[",["T_VARIABLE","$code",466],"]",")",["T_WHITESPACE","\n                ",466],["T_BOOLEAN_OR","||",467],["T_WHITESPACE"," ",467],"(",["T_VARIABLE","$options2",467],"[",["T_VARIABLE","$code",467],"]",["T_OBJECT_OPERATOR","->",467],["T_STRING","getValue",467],"(",")",["T_WHITESPACE"," ",467],["T_IS_IDENTICAL","===",467],["T_WHITESPACE"," ",467],["T_STRING","null",467],")",["T_WHITESPACE","\n                ",467],["T_BOOLEAN_OR","||",468],["T_WHITESPACE"," ",468],["T_VARIABLE","$options2",468],"[",["T_VARIABLE","$code",468],"]",["T_OBJECT_OPERATOR","->",468],["T_STRING","getValue",468],"(",")",["T_WHITESPACE"," ",468],["T_IS_NOT_EQUAL","!=",468],["T_WHITESPACE"," ",468],["T_VARIABLE","$option",468],["T_OBJECT_OPERATOR","->",468],["T_STRING","getValue",468],"(",")",["T_WHITESPACE","\n            ",468],")",["T_WHITESPACE"," ",469],"{",["T_WHITESPACE","\n                ",469],["T_RETURN","return",470],["T_WHITESPACE"," ",470],["T_STRING","false",470],";",["T_WHITESPACE","\n            ",470],"}",["T_WHITESPACE","\n        ",471],"}",["T_WHITESPACE","\n        ",472],["T_RETURN","return",473],["T_WHITESPACE"," ",473],["T_STRING","true",473],";",["T_WHITESPACE","\n    ",473],"}",["T_WHITESPACE","\n\n    ",474],["T_DOC_COMMENT","\/**\n     * Compare item\n     *\n     * @param   Mage_Sales_Model_Quote_Item $item\n     * @return  bool\n     *\/",476],["T_WHITESPACE","\n    ",481],["T_PUBLIC","public",482],["T_WHITESPACE"," ",482],["T_FUNCTION","function",482],["T_WHITESPACE"," ",482],["T_STRING","compare",482],"(",["T_VARIABLE","$item",482],")",["T_WHITESPACE","\n    ",482],"{",["T_WHITESPACE","\n        ",483],["T_IF","if",484],["T_WHITESPACE"," ",484],"(",["T_VARIABLE","$this",484],["T_OBJECT_OPERATOR","->",484],["T_STRING","getProductId",484],"(",")",["T_WHITESPACE"," ",484],["T_IS_NOT_EQUAL","!=",484],["T_WHITESPACE"," ",484],["T_VARIABLE","$item",484],["T_OBJECT_OPERATOR","->",484],["T_STRING","getProductId",484],"(",")",")",["T_WHITESPACE"," ",484],"{",["T_WHITESPACE","\n            ",484],["T_RETURN","return",485],["T_WHITESPACE"," ",485],["T_STRING","false",485],";",["T_WHITESPACE","\n        ",485],"}",["T_WHITESPACE","\n        ",486],["T_FOREACH","foreach",487],["T_WHITESPACE"," ",487],"(",["T_VARIABLE","$this",487],["T_OBJECT_OPERATOR","->",487],["T_STRING","getOptions",487],"(",")",["T_WHITESPACE"," ",487],["T_AS","as",487],["T_WHITESPACE"," ",487],["T_VARIABLE","$option",487],")",["T_WHITESPACE"," ",487],"{",["T_WHITESPACE","\n            ",487],["T_IF","if",488],["T_WHITESPACE"," ",488],"(",["T_STRING","in_array",488],"(",["T_VARIABLE","$option",488],["T_OBJECT_OPERATOR","->",488],["T_STRING","getCode",488],"(",")",",",["T_WHITESPACE"," ",488],["T_VARIABLE","$this",488],["T_OBJECT_OPERATOR","->",488],["T_STRING","_notRepresentOptions",488],")",["T_WHITESPACE","\n                ",488],["T_BOOLEAN_AND","&&",489],["T_WHITESPACE"," ",489],"!",["T_VARIABLE","$item",489],["T_OBJECT_OPERATOR","->",489],["T_STRING","getProduct",489],"(",")",["T_OBJECT_OPERATOR","->",489],["T_STRING","hasCustomOptions",489],"(",")",["T_WHITESPACE","\n            ",489],")",["T_WHITESPACE"," ",490],"{",["T_WHITESPACE","\n                ",490],["T_CONTINUE","continue",491],";",["T_WHITESPACE","\n            ",491],"}",["T_WHITESPACE","\n            ",492],["T_IF","if",493],["T_WHITESPACE"," ",493],"(",["T_VARIABLE","$itemOption",493],["T_WHITESPACE"," ",493],"=",["T_WHITESPACE"," ",493],["T_VARIABLE","$item",493],["T_OBJECT_OPERATOR","->",493],["T_STRING","getOptionByCode",493],"(",["T_VARIABLE","$option",493],["T_OBJECT_OPERATOR","->",493],["T_STRING","getCode",493],"(",")",")",")",["T_WHITESPACE"," ",493],"{",["T_WHITESPACE","\n                ",493],["T_VARIABLE","$itemOptionValue",494],["T_WHITESPACE"," ",494],"=",["T_WHITESPACE"," ",494],["T_VARIABLE","$itemOption",494],["T_OBJECT_OPERATOR","->",494],["T_STRING","getValue",494],"(",")",";",["T_WHITESPACE","\n                ",494],["T_VARIABLE","$optionValue",495],["T_WHITESPACE"," ",495],"=",["T_WHITESPACE"," ",495],["T_VARIABLE","$option",495],["T_OBJECT_OPERATOR","->",495],["T_STRING","getValue",495],"(",")",";",["T_WHITESPACE","\n\n                ",495],["T_COMMENT","\/\/ dispose of some options params, that can cramp comparing of arrays\n",497],["T_WHITESPACE","                ",498],["T_IF","if",498],["T_WHITESPACE"," ",498],"(",["T_STRING","is_string",498],"(",["T_VARIABLE","$itemOptionValue",498],")",["T_WHITESPACE"," ",498],["T_BOOLEAN_AND","&&",498],["T_WHITESPACE"," ",498],["T_STRING","is_string",498],"(",["T_VARIABLE","$optionValue",498],")",")",["T_WHITESPACE"," ",498],"{",["T_WHITESPACE","\n                    ",498],["T_TRY","try",499],["T_WHITESPACE"," ",499],"{",["T_WHITESPACE","\n                        ",499],["T_DOC_COMMENT","\/** @var Unserialize_Parser $parser *\/",500],["T_WHITESPACE","\n                        ",500],["T_VARIABLE","$parser",501],["T_WHITESPACE"," ",501],"=",["T_WHITESPACE"," ",501],["T_STRING","Mage",501],["T_DOUBLE_COLON","::",501],["T_STRING","helper",501],"(",["T_CONSTANT_ENCAPSED_STRING","'core\/unserializeArray'",501],")",";",["T_WHITESPACE","\n\n                        ",501],["T_VARIABLE","$_itemOptionValue",503],["T_WHITESPACE"," ",503],"=",["T_WHITESPACE"," ",503],["T_VARIABLE","$parser",503],["T_OBJECT_OPERATOR","->",503],["T_STRING","unserialize",503],"(",["T_VARIABLE","$itemOptionValue",503],")",";",["T_WHITESPACE","\n                        ",503],["T_VARIABLE","$_optionValue",504],["T_WHITESPACE"," ",504],"=",["T_WHITESPACE"," ",504],["T_VARIABLE","$parser",504],["T_OBJECT_OPERATOR","->",504],["T_STRING","unserialize",504],"(",["T_VARIABLE","$optionValue",504],")",";",["T_WHITESPACE","\n\n                        ",504],["T_IF","if",506],["T_WHITESPACE"," ",506],"(",["T_STRING","is_array",506],"(",["T_VARIABLE","$_itemOptionValue",506],")",["T_WHITESPACE"," ",506],["T_BOOLEAN_AND","&&",506],["T_WHITESPACE"," ",506],["T_STRING","is_array",506],"(",["T_VARIABLE","$_optionValue",506],")",")",["T_WHITESPACE"," ",506],"{",["T_WHITESPACE","\n                            ",506],["T_VARIABLE","$itemOptionValue",507],["T_WHITESPACE"," ",507],"=",["T_WHITESPACE"," ",507],["T_VARIABLE","$_itemOptionValue",507],";",["T_WHITESPACE","\n                            ",507],["T_VARIABLE","$optionValue",508],["T_WHITESPACE"," ",508],"=",["T_WHITESPACE"," ",508],["T_VARIABLE","$_optionValue",508],";",["T_WHITESPACE","\n                            ",508],["T_COMMENT","\/\/ looks like it does not break bundle selection qty\n",509],["T_WHITESPACE","                            ",510],["T_FOREACH","foreach",510],["T_WHITESPACE"," ",510],"(",["T_ARRAY","array",510],"(",["T_CONSTANT_ENCAPSED_STRING","'qty'",510],",",["T_WHITESPACE"," ",510],["T_CONSTANT_ENCAPSED_STRING","'uenc'",510],",",["T_WHITESPACE"," ",510],["T_CONSTANT_ENCAPSED_STRING","'form_key'",510],",",["T_WHITESPACE"," ",510],["T_CONSTANT_ENCAPSED_STRING","'item'",510],",",["T_WHITESPACE"," ",510],["T_CONSTANT_ENCAPSED_STRING","'original_qty'",510],")",["T_WHITESPACE"," ",510],["T_AS","as",510],["T_WHITESPACE"," ",510],["T_VARIABLE","$key",510],")",["T_WHITESPACE"," ",510],"{",["T_WHITESPACE","\n                                ",510],["T_UNSET","unset",511],"(",["T_VARIABLE","$itemOptionValue",511],"[",["T_VARIABLE","$key",511],"]",",",["T_WHITESPACE"," ",511],["T_VARIABLE","$optionValue",511],"[",["T_VARIABLE","$key",511],"]",")",";",["T_WHITESPACE","\n                            ",511],"}",["T_WHITESPACE","\n                        ",512],"}",["T_WHITESPACE","\n\n                    ",513],"}",["T_WHITESPACE"," ",515],["T_CATCH","catch",515],["T_WHITESPACE"," ",515],"(",["T_STRING","Exception",515],["T_WHITESPACE"," ",515],["T_VARIABLE","$e",515],")",["T_WHITESPACE"," ",515],"{",["T_WHITESPACE","\n                        ",515],["T_STRING","Mage",516],["T_DOUBLE_COLON","::",516],["T_STRING","logException",516],"(",["T_VARIABLE","$e",516],")",";",["T_WHITESPACE","\n                    ",516],"}",["T_WHITESPACE","\n                ",517],"}",["T_WHITESPACE","\n\n                ",518],["T_IF","if",520],["T_WHITESPACE"," ",520],"(",["T_VARIABLE","$itemOptionValue",520],["T_WHITESPACE"," ",520],["T_IS_NOT_EQUAL","!=",520],["T_WHITESPACE"," ",520],["T_VARIABLE","$optionValue",520],")",["T_WHITESPACE"," ",520],"{",["T_WHITESPACE","\n                    ",520],["T_RETURN","return",521],["T_WHITESPACE"," ",521],["T_STRING","false",521],";",["T_WHITESPACE","\n                ",521],"}",["T_WHITESPACE","\n            ",522],"}",["T_WHITESPACE"," ",523],["T_ELSE","else",523],["T_WHITESPACE"," ",523],"{",["T_WHITESPACE","\n                ",523],["T_RETURN","return",524],["T_WHITESPACE"," ",524],["T_STRING","false",524],";",["T_WHITESPACE","\n            ",524],"}",["T_WHITESPACE","\n        ",525],"}",["T_WHITESPACE","\n        ",526],["T_RETURN","return",527],["T_WHITESPACE"," ",527],["T_STRING","true",527],";",["T_WHITESPACE","\n    ",527],"}",["T_WHITESPACE","\n\n    ",528],["T_DOC_COMMENT","\/**\n     * Get item product type\n     *\n     * @return string\n     *\/",530],["T_WHITESPACE","\n    ",534],["T_PUBLIC","public",535],["T_WHITESPACE"," ",535],["T_FUNCTION","function",535],["T_WHITESPACE"," ",535],["T_STRING","getProductType",535],"(",")",["T_WHITESPACE","\n    ",535],"{",["T_WHITESPACE","\n        ",536],["T_IF","if",537],["T_WHITESPACE"," ",537],"(",["T_VARIABLE","$option",537],["T_WHITESPACE"," ",537],"=",["T_WHITESPACE"," ",537],["T_VARIABLE","$this",537],["T_OBJECT_OPERATOR","->",537],["T_STRING","getOptionByCode",537],"(",["T_CONSTANT_ENCAPSED_STRING","'product_type'",537],")",")",["T_WHITESPACE"," ",537],"{",["T_WHITESPACE","\n            ",537],["T_RETURN","return",538],["T_WHITESPACE"," ",538],["T_VARIABLE","$option",538],["T_OBJECT_OPERATOR","->",538],["T_STRING","getValue",538],"(",")",";",["T_WHITESPACE","\n        ",538],"}",["T_WHITESPACE","\n        ",539],["T_IF","if",540],["T_WHITESPACE"," ",540],"(",["T_VARIABLE","$product",540],["T_WHITESPACE"," ",540],"=",["T_WHITESPACE"," ",540],["T_VARIABLE","$this",540],["T_OBJECT_OPERATOR","->",540],["T_STRING","getProduct",540],"(",")",")",["T_WHITESPACE"," ",540],"{",["T_WHITESPACE","\n            ",540],["T_RETURN","return",541],["T_WHITESPACE"," ",541],["T_VARIABLE","$product",541],["T_OBJECT_OPERATOR","->",541],["T_STRING","getTypeId",541],"(",")",";",["T_WHITESPACE","\n        ",541],"}",["T_WHITESPACE","\n        ",542],["T_RETURN","return",543],["T_WHITESPACE"," ",543],["T_VARIABLE","$this",543],["T_OBJECT_OPERATOR","->",543],["T_STRING","_getData",543],"(",["T_CONSTANT_ENCAPSED_STRING","'product_type'",543],")",";",["T_WHITESPACE","\n    ",543],"}",["T_WHITESPACE","\n\n    ",544],["T_DOC_COMMENT","\/**\n     * Return real product type of item\n     *\n     * @return unknown\n     *\/",546],["T_WHITESPACE","\n    ",550],["T_PUBLIC","public",551],["T_WHITESPACE"," ",551],["T_FUNCTION","function",551],["T_WHITESPACE"," ",551],["T_STRING","getRealProductType",551],"(",")",["T_WHITESPACE","\n    ",551],"{",["T_WHITESPACE","\n        ",552],["T_RETURN","return",553],["T_WHITESPACE"," ",553],["T_VARIABLE","$this",553],["T_OBJECT_OPERATOR","->",553],["T_STRING","_getData",553],"(",["T_CONSTANT_ENCAPSED_STRING","'product_type'",553],")",";",["T_WHITESPACE","\n    ",553],"}",["T_WHITESPACE","\n\n    ",554],["T_DOC_COMMENT","\/**\n     * Convert Quote Item to array\n     *\n     * @param array $arrAttributes\n     * @return array\n     *\/",556],["T_WHITESPACE","\n    ",561],["T_PUBLIC","public",562],["T_WHITESPACE"," ",562],["T_FUNCTION","function",562],["T_WHITESPACE"," ",562],["T_STRING","toArray",562],"(",["T_ARRAY","array",562],["T_WHITESPACE"," ",562],["T_VARIABLE","$arrAttributes",562],["T_WHITESPACE"," ",562],"=",["T_WHITESPACE"," ",562],["T_ARRAY","array",562],"(",")",")",["T_WHITESPACE","\n    ",562],"{",["T_WHITESPACE","\n        ",563],["T_VARIABLE","$data",564],["T_WHITESPACE"," ",564],"=",["T_WHITESPACE"," ",564],["T_STRING","parent",564],["T_DOUBLE_COLON","::",564],["T_STRING","toArray",564],"(",["T_VARIABLE","$arrAttributes",564],")",";",["T_WHITESPACE","\n\n        ",564],["T_IF","if",566],["T_WHITESPACE"," ",566],"(",["T_VARIABLE","$product",566],["T_WHITESPACE"," ",566],"=",["T_WHITESPACE"," ",566],["T_VARIABLE","$this",566],["T_OBJECT_OPERATOR","->",566],["T_STRING","getProduct",566],"(",")",")",["T_WHITESPACE"," ",566],"{",["T_WHITESPACE","\n            ",566],["T_VARIABLE","$data",567],"[",["T_CONSTANT_ENCAPSED_STRING","'product'",567],"]",["T_WHITESPACE"," ",567],"=",["T_WHITESPACE"," ",567],["T_VARIABLE","$product",567],["T_OBJECT_OPERATOR","->",567],["T_STRING","toArray",567],"(",")",";",["T_WHITESPACE","\n        ",567],"}",["T_WHITESPACE","\n        ",568],["T_RETURN","return",569],["T_WHITESPACE"," ",569],["T_VARIABLE","$data",569],";",["T_WHITESPACE","\n    ",569],"}",["T_WHITESPACE","\n\n    ",570],["T_DOC_COMMENT","\/**\n     * Initialize quote item options\n     *\n     * @param   array $options\n     * @return  Mage_Sales_Model_Quote_Item\n     *\/",572],["T_WHITESPACE","\n    ",577],["T_PUBLIC","public",578],["T_WHITESPACE"," ",578],["T_FUNCTION","function",578],["T_WHITESPACE"," ",578],["T_STRING","setOptions",578],"(",["T_VARIABLE","$options",578],")",["T_WHITESPACE","\n    ",578],"{",["T_WHITESPACE","\n        ",579],["T_FOREACH","foreach",580],["T_WHITESPACE"," ",580],"(",["T_VARIABLE","$options",580],["T_WHITESPACE"," ",580],["T_AS","as",580],["T_WHITESPACE"," ",580],["T_VARIABLE","$option",580],")",["T_WHITESPACE"," ",580],"{",["T_WHITESPACE","\n            ",580],["T_VARIABLE","$this",581],["T_OBJECT_OPERATOR","->",581],["T_STRING","addOption",581],"(",["T_VARIABLE","$option",581],")",";",["T_WHITESPACE","\n        ",581],"}",["T_WHITESPACE","\n        ",582],["T_RETURN","return",583],["T_WHITESPACE"," ",583],["T_VARIABLE","$this",583],";",["T_WHITESPACE","\n    ",583],"}",["T_WHITESPACE","\n\n    ",584],["T_DOC_COMMENT","\/**\n     * Get all item options\n     *\n     * @return array\n     *\/",586],["T_WHITESPACE","\n    ",590],["T_PUBLIC","public",591],["T_WHITESPACE"," ",591],["T_FUNCTION","function",591],["T_WHITESPACE"," ",591],["T_STRING","getOptions",591],"(",")",["T_WHITESPACE","\n    ",591],"{",["T_WHITESPACE","\n        ",592],["T_RETURN","return",593],["T_WHITESPACE"," ",593],["T_VARIABLE","$this",593],["T_OBJECT_OPERATOR","->",593],["T_STRING","_options",593],";",["T_WHITESPACE","\n    ",593],"}",["T_WHITESPACE","\n\n    ",594],["T_DOC_COMMENT","\/**\n     * Get all item options as array with codes in array key\n     *\n     * @return array\n     *\/",596],["T_WHITESPACE","\n    ",600],["T_PUBLIC","public",601],["T_WHITESPACE"," ",601],["T_FUNCTION","function",601],["T_WHITESPACE"," ",601],["T_STRING","getOptionsByCode",601],"(",")",["T_WHITESPACE","\n    ",601],"{",["T_WHITESPACE","\n        ",602],["T_RETURN","return",603],["T_WHITESPACE"," ",603],["T_VARIABLE","$this",603],["T_OBJECT_OPERATOR","->",603],["T_STRING","_optionsByCode",603],";",["T_WHITESPACE","\n    ",603],"}",["T_WHITESPACE","\n\n    ",604],["T_DOC_COMMENT","\/**\n     * Add option to item\n     *\n     * @param   Mage_Sales_Model_Quote_Item_Option|Varien_Object $option\n     * @return  Mage_Sales_Model_Quote_Item\n     *\/",606],["T_WHITESPACE","\n    ",611],["T_PUBLIC","public",612],["T_WHITESPACE"," ",612],["T_FUNCTION","function",612],["T_WHITESPACE"," ",612],["T_STRING","addOption",612],"(",["T_VARIABLE","$option",612],")",["T_WHITESPACE","\n    ",612],"{",["T_WHITESPACE","\n        ",613],["T_IF","if",614],["T_WHITESPACE"," ",614],"(",["T_STRING","is_array",614],"(",["T_VARIABLE","$option",614],")",")",["T_WHITESPACE"," ",614],"{",["T_WHITESPACE","\n            ",614],["T_VARIABLE","$option",615],["T_WHITESPACE"," ",615],"=",["T_WHITESPACE"," ",615],["T_STRING","Mage",615],["T_DOUBLE_COLON","::",615],["T_STRING","getModel",615],"(",["T_CONSTANT_ENCAPSED_STRING","'sales\/quote_item_option'",615],")",["T_OBJECT_OPERATOR","->",615],["T_STRING","setData",615],"(",["T_VARIABLE","$option",615],")",["T_WHITESPACE","\n                ",615],["T_OBJECT_OPERATOR","->",616],["T_STRING","setItem",616],"(",["T_VARIABLE","$this",616],")",";",["T_WHITESPACE","\n        ",616],"}",["T_WHITESPACE"," ",617],["T_ELSEIF","elseif",617],["T_WHITESPACE"," ",617],"(","(",["T_VARIABLE","$option",617],["T_WHITESPACE"," ",617],["T_INSTANCEOF","instanceof",617],["T_WHITESPACE"," ",617],["T_STRING","Varien_Object",617],")",["T_WHITESPACE"," ",617],["T_BOOLEAN_AND","&&",617],["T_WHITESPACE"," ",617],"!","(",["T_VARIABLE","$option",617],["T_WHITESPACE"," ",617],["T_INSTANCEOF","instanceof",617],["T_WHITESPACE"," ",617],["T_STRING","Mage_Sales_Model_Quote_Item_Option",617],")",")",["T_WHITESPACE"," ",617],"{",["T_WHITESPACE","\n            ",617],["T_VARIABLE","$option",618],["T_WHITESPACE"," ",618],"=",["T_WHITESPACE"," ",618],["T_STRING","Mage",618],["T_DOUBLE_COLON","::",618],["T_STRING","getModel",618],"(",["T_CONSTANT_ENCAPSED_STRING","'sales\/quote_item_option'",618],")",["T_OBJECT_OPERATOR","->",618],["T_STRING","setData",618],"(",["T_VARIABLE","$option",618],["T_OBJECT_OPERATOR","->",618],["T_STRING","getData",618],"(",")",")",["T_WHITESPACE","\n                ",618],["T_OBJECT_OPERATOR","->",619],["T_STRING","setProduct",619],"(",["T_VARIABLE","$option",619],["T_OBJECT_OPERATOR","->",619],["T_STRING","getProduct",619],"(",")",")",["T_WHITESPACE","\n                ",619],["T_OBJECT_OPERATOR","->",620],["T_STRING","setItem",620],"(",["T_VARIABLE","$this",620],")",";",["T_WHITESPACE","\n        ",620],"}",["T_WHITESPACE"," ",621],["T_ELSEIF","elseif",621],["T_WHITESPACE"," ",621],"(",["T_VARIABLE","$option",621],["T_WHITESPACE"," ",621],["T_INSTANCEOF","instanceof",621],["T_WHITESPACE"," ",621],["T_STRING","Mage_Sales_Model_Quote_Item_Option",621],")",["T_WHITESPACE"," ",621],"{",["T_WHITESPACE","\n            ",621],["T_VARIABLE","$option",622],["T_OBJECT_OPERATOR","->",622],["T_STRING","setItem",622],"(",["T_VARIABLE","$this",622],")",";",["T_WHITESPACE","\n        ",622],"}",["T_WHITESPACE"," ",623],["T_ELSE","else",623],["T_WHITESPACE"," ",623],"{",["T_WHITESPACE","\n            ",623],["T_STRING","Mage",624],["T_DOUBLE_COLON","::",624],["T_STRING","throwException",624],"(",["T_STRING","Mage",624],["T_DOUBLE_COLON","::",624],["T_STRING","helper",624],"(",["T_CONSTANT_ENCAPSED_STRING","'sales'",624],")",["T_OBJECT_OPERATOR","->",624],["T_STRING","__",624],"(",["T_CONSTANT_ENCAPSED_STRING","'Invalid item option format.'",624],")",")",";",["T_WHITESPACE","\n        ",624],"}",["T_WHITESPACE","\n\n        ",625],["T_IF","if",627],["T_WHITESPACE"," ",627],"(",["T_VARIABLE","$exOption",627],["T_WHITESPACE"," ",627],"=",["T_WHITESPACE"," ",627],["T_VARIABLE","$this",627],["T_OBJECT_OPERATOR","->",627],["T_STRING","getOptionByCode",627],"(",["T_VARIABLE","$option",627],["T_OBJECT_OPERATOR","->",627],["T_STRING","getCode",627],"(",")",")",")",["T_WHITESPACE"," ",627],"{",["T_WHITESPACE","\n            ",627],["T_VARIABLE","$exOption",628],["T_OBJECT_OPERATOR","->",628],["T_STRING","addData",628],"(",["T_VARIABLE","$option",628],["T_OBJECT_OPERATOR","->",628],["T_STRING","getData",628],"(",")",")",";",["T_WHITESPACE","\n        ",628],"}",["T_WHITESPACE"," ",629],["T_ELSE","else",629],["T_WHITESPACE"," ",629],"{",["T_WHITESPACE","\n            ",629],["T_VARIABLE","$this",630],["T_OBJECT_OPERATOR","->",630],["T_STRING","_addOptionCode",630],"(",["T_VARIABLE","$option",630],")",";",["T_WHITESPACE","\n            ",630],["T_VARIABLE","$this",631],["T_OBJECT_OPERATOR","->",631],["T_STRING","_options",631],"[","]",["T_WHITESPACE"," ",631],"=",["T_WHITESPACE"," ",631],["T_VARIABLE","$option",631],";",["T_WHITESPACE","\n        ",631],"}",["T_WHITESPACE","\n        ",632],["T_RETURN","return",633],["T_WHITESPACE"," ",633],["T_VARIABLE","$this",633],";",["T_WHITESPACE","\n    ",633],"}",["T_WHITESPACE","\n\n    ",634],["T_DOC_COMMENT","\/**\n     * Can specify specific actions for ability to change given quote options values\n     * Exemple: cataloginventory decimal qty validation may change qty to int,\n     * so need to change quote item qty option value.\n     *\n     * @param Varien_Object $option\n     * @param int|float|null $value\n     * @return Mage_Sales_Model_Quote_Item\n     *\/",636],["T_WHITESPACE","\n    ",644],["T_PUBLIC","public",645],["T_WHITESPACE"," ",645],["T_FUNCTION","function",645],["T_WHITESPACE"," ",645],["T_STRING","updateQtyOption",645],"(",["T_STRING","Varien_Object",645],["T_WHITESPACE"," ",645],["T_VARIABLE","$option",645],",",["T_WHITESPACE"," ",645],["T_VARIABLE","$value",645],")",["T_WHITESPACE","\n    ",645],"{",["T_WHITESPACE","\n        ",646],["T_VARIABLE","$optionProduct",647],["T_WHITESPACE"," ",647],"=",["T_WHITESPACE"," ",647],["T_VARIABLE","$option",647],["T_OBJECT_OPERATOR","->",647],["T_STRING","getProduct",647],"(",")",";",["T_WHITESPACE","\n        ",647],["T_VARIABLE","$options",648],["T_WHITESPACE"," ",648],"=",["T_WHITESPACE"," ",648],["T_VARIABLE","$this",648],["T_OBJECT_OPERATOR","->",648],["T_STRING","getQtyOptions",648],"(",")",";",["T_WHITESPACE","\n\n        ",648],["T_IF","if",650],["T_WHITESPACE"," ",650],"(",["T_ISSET","isset",650],"(",["T_VARIABLE","$options",650],"[",["T_VARIABLE","$optionProduct",650],["T_OBJECT_OPERATOR","->",650],["T_STRING","getId",650],"(",")","]",")",")",["T_WHITESPACE"," ",650],"{",["T_WHITESPACE","\n            ",650],["T_VARIABLE","$options",651],"[",["T_VARIABLE","$optionProduct",651],["T_OBJECT_OPERATOR","->",651],["T_STRING","getId",651],"(",")","]",["T_OBJECT_OPERATOR","->",651],["T_STRING","setValue",651],"(",["T_VARIABLE","$value",651],")",";",["T_WHITESPACE","\n        ",651],"}",["T_WHITESPACE","\n\n        ",652],["T_VARIABLE","$this",654],["T_OBJECT_OPERATOR","->",654],["T_STRING","getProduct",654],"(",")",["T_OBJECT_OPERATOR","->",654],["T_STRING","getTypeInstance",654],"(",["T_STRING","true",654],")",["T_WHITESPACE","\n            ",654],["T_OBJECT_OPERATOR","->",655],["T_STRING","updateQtyOption",655],"(",["T_VARIABLE","$this",655],["T_OBJECT_OPERATOR","->",655],["T_STRING","getOptions",655],"(",")",",",["T_WHITESPACE"," ",655],["T_VARIABLE","$option",655],",",["T_WHITESPACE"," ",655],["T_VARIABLE","$value",655],",",["T_WHITESPACE"," ",655],["T_VARIABLE","$this",655],["T_OBJECT_OPERATOR","->",655],["T_STRING","getProduct",655],"(",")",")",";",["T_WHITESPACE","\n\n        ",655],["T_RETURN","return",657],["T_WHITESPACE"," ",657],["T_VARIABLE","$this",657],";",["T_WHITESPACE","\n    ",657],"}",["T_WHITESPACE","\n\n    ",658],["T_DOC_COMMENT","\/**\n     *Remove option from item options\n     *\n     * @param string $code\n     * @return Mage_Sales_Model_Quote_Item\n     *\/",660],["T_WHITESPACE","\n    ",665],["T_PUBLIC","public",666],["T_WHITESPACE"," ",666],["T_FUNCTION","function",666],["T_WHITESPACE"," ",666],["T_STRING","removeOption",666],"(",["T_VARIABLE","$code",666],")",["T_WHITESPACE","\n    ",666],"{",["T_WHITESPACE","\n        ",667],["T_VARIABLE","$option",668],["T_WHITESPACE"," ",668],"=",["T_WHITESPACE"," ",668],["T_VARIABLE","$this",668],["T_OBJECT_OPERATOR","->",668],["T_STRING","getOptionByCode",668],"(",["T_VARIABLE","$code",668],")",";",["T_WHITESPACE","\n        ",668],["T_IF","if",669],["T_WHITESPACE"," ",669],"(",["T_VARIABLE","$option",669],")",["T_WHITESPACE"," ",669],"{",["T_WHITESPACE","\n            ",669],["T_VARIABLE","$option",670],["T_OBJECT_OPERATOR","->",670],["T_STRING","isDeleted",670],"(",["T_STRING","true",670],")",";",["T_WHITESPACE","\n        ",670],"}",["T_WHITESPACE","\n        ",671],["T_RETURN","return",672],["T_WHITESPACE"," ",672],["T_VARIABLE","$this",672],";",["T_WHITESPACE","\n    ",672],"}",["T_WHITESPACE","\n\n    ",673],["T_DOC_COMMENT","\/**\n     * Register option code\n     *\n     * @param   Mage_Sales_Model_Quote_Item_Option $option\n     * @return  Mage_Sales_Model_Quote_Item\n     *\/",675],["T_WHITESPACE","\n    ",680],["T_PROTECTED","protected",681],["T_WHITESPACE"," ",681],["T_FUNCTION","function",681],["T_WHITESPACE"," ",681],["T_STRING","_addOptionCode",681],"(",["T_VARIABLE","$option",681],")",["T_WHITESPACE","\n    ",681],"{",["T_WHITESPACE","\n        ",682],["T_IF","if",683],["T_WHITESPACE"," ",683],"(","!",["T_ISSET","isset",683],"(",["T_VARIABLE","$this",683],["T_OBJECT_OPERATOR","->",683],["T_STRING","_optionsByCode",683],"[",["T_VARIABLE","$option",683],["T_OBJECT_OPERATOR","->",683],["T_STRING","getCode",683],"(",")","]",")",")",["T_WHITESPACE"," ",683],"{",["T_WHITESPACE","\n            ",683],["T_VARIABLE","$this",684],["T_OBJECT_OPERATOR","->",684],["T_STRING","_optionsByCode",684],"[",["T_VARIABLE","$option",684],["T_OBJECT_OPERATOR","->",684],["T_STRING","getCode",684],"(",")","]",["T_WHITESPACE"," ",684],"=",["T_WHITESPACE"," ",684],["T_VARIABLE","$option",684],";",["T_WHITESPACE","\n        ",684],"}",["T_WHITESPACE"," ",685],["T_ELSE","else",685],["T_WHITESPACE"," ",685],"{",["T_WHITESPACE","\n            ",685],["T_STRING","Mage",686],["T_DOUBLE_COLON","::",686],["T_STRING","throwException",686],"(",["T_STRING","Mage",686],["T_DOUBLE_COLON","::",686],["T_STRING","helper",686],"(",["T_CONSTANT_ENCAPSED_STRING","'sales'",686],")",["T_OBJECT_OPERATOR","->",686],["T_STRING","__",686],"(",["T_CONSTANT_ENCAPSED_STRING","'An item option with code %s already exists.'",686],",",["T_WHITESPACE"," ",686],["T_VARIABLE","$option",686],["T_OBJECT_OPERATOR","->",686],["T_STRING","getCode",686],"(",")",")",")",";",["T_WHITESPACE","\n        ",686],"}",["T_WHITESPACE","\n        ",687],["T_RETURN","return",688],["T_WHITESPACE"," ",688],["T_VARIABLE","$this",688],";",["T_WHITESPACE","\n    ",688],"}",["T_WHITESPACE","\n\n    ",689],["T_DOC_COMMENT","\/**\n     * Get item option by code\n     *\n     * @param   string $code\n     * @return  Mage_Sales_Model_Quote_Item_Option || null\n     *\/",691],["T_WHITESPACE","\n    ",696],["T_PUBLIC","public",697],["T_WHITESPACE"," ",697],["T_FUNCTION","function",697],["T_WHITESPACE"," ",697],["T_STRING","getOptionByCode",697],"(",["T_VARIABLE","$code",697],")",["T_WHITESPACE","\n    ",697],"{",["T_WHITESPACE","\n        ",698],["T_IF","if",699],["T_WHITESPACE"," ",699],"(",["T_ISSET","isset",699],"(",["T_VARIABLE","$this",699],["T_OBJECT_OPERATOR","->",699],["T_STRING","_optionsByCode",699],"[",["T_VARIABLE","$code",699],"]",")",["T_WHITESPACE"," ",699],["T_BOOLEAN_AND","&&",699],["T_WHITESPACE"," ",699],"!",["T_VARIABLE","$this",699],["T_OBJECT_OPERATOR","->",699],["T_STRING","_optionsByCode",699],"[",["T_VARIABLE","$code",699],"]",["T_OBJECT_OPERATOR","->",699],["T_STRING","isDeleted",699],"(",")",")",["T_WHITESPACE"," ",699],"{",["T_WHITESPACE","\n            ",699],["T_RETURN","return",700],["T_WHITESPACE"," ",700],["T_VARIABLE","$this",700],["T_OBJECT_OPERATOR","->",700],["T_STRING","_optionsByCode",700],"[",["T_VARIABLE","$code",700],"]",";",["T_WHITESPACE","\n        ",700],"}",["T_WHITESPACE","\n        ",701],["T_RETURN","return",702],["T_WHITESPACE"," ",702],["T_STRING","null",702],";",["T_WHITESPACE","\n    ",702],"}",["T_WHITESPACE","\n\n    ",703],["T_DOC_COMMENT","\/**\n     * Checks that item model has data changes.\n     * Call save item options if model isn't need to save in DB\n     *\n     * @return boolean\n     *\/",705],["T_WHITESPACE","\n    ",710],["T_PROTECTED","protected",711],["T_WHITESPACE"," ",711],["T_FUNCTION","function",711],["T_WHITESPACE"," ",711],["T_STRING","_hasModelChanged",711],"(",")",["T_WHITESPACE","\n    ",711],"{",["T_WHITESPACE","\n        ",712],["T_IF","if",713],["T_WHITESPACE"," ",713],"(","!",["T_VARIABLE","$this",713],["T_OBJECT_OPERATOR","->",713],["T_STRING","hasDataChanges",713],"(",")",")",["T_WHITESPACE"," ",713],"{",["T_WHITESPACE","\n            ",713],["T_RETURN","return",714],["T_WHITESPACE"," ",714],["T_STRING","false",714],";",["T_WHITESPACE","\n        ",714],"}",["T_WHITESPACE","\n\n        ",715],["T_RETURN","return",717],["T_WHITESPACE"," ",717],["T_VARIABLE","$this",717],["T_OBJECT_OPERATOR","->",717],["T_STRING","_getResource",717],"(",")",["T_OBJECT_OPERATOR","->",717],["T_STRING","hasDataChanged",717],"(",["T_VARIABLE","$this",717],")",";",["T_WHITESPACE","\n    ",717],"}",["T_WHITESPACE","\n\n    ",718],["T_DOC_COMMENT","\/**\n     * Save item options\n     *\n     * @return Mage_Sales_Model_Quote_Item\n     *\/",720],["T_WHITESPACE","\n    ",724],["T_PROTECTED","protected",725],["T_WHITESPACE"," ",725],["T_FUNCTION","function",725],["T_WHITESPACE"," ",725],["T_STRING","_saveItemOptions",725],"(",")",["T_WHITESPACE","\n    ",725],"{",["T_WHITESPACE","\n        ",726],["T_FOREACH","foreach",727],["T_WHITESPACE"," ",727],"(",["T_VARIABLE","$this",727],["T_OBJECT_OPERATOR","->",727],["T_STRING","_options",727],["T_WHITESPACE"," ",727],["T_AS","as",727],["T_WHITESPACE"," ",727],["T_VARIABLE","$index",727],["T_WHITESPACE"," ",727],["T_DOUBLE_ARROW","=>",727],["T_WHITESPACE"," ",727],["T_VARIABLE","$option",727],")",["T_WHITESPACE"," ",727],"{",["T_WHITESPACE","\n            ",727],["T_IF","if",728],["T_WHITESPACE"," ",728],"(",["T_VARIABLE","$option",728],["T_OBJECT_OPERATOR","->",728],["T_STRING","isDeleted",728],"(",")",")",["T_WHITESPACE"," ",728],"{",["T_WHITESPACE","\n                ",728],["T_VARIABLE","$option",729],["T_OBJECT_OPERATOR","->",729],["T_STRING","delete",729],"(",")",";",["T_WHITESPACE","\n                ",729],["T_UNSET","unset",730],"(",["T_VARIABLE","$this",730],["T_OBJECT_OPERATOR","->",730],["T_STRING","_options",730],"[",["T_VARIABLE","$index",730],"]",")",";",["T_WHITESPACE","\n                ",730],["T_UNSET","unset",731],"(",["T_VARIABLE","$this",731],["T_OBJECT_OPERATOR","->",731],["T_STRING","_optionsByCode",731],"[",["T_VARIABLE","$option",731],["T_OBJECT_OPERATOR","->",731],["T_STRING","getCode",731],"(",")","]",")",";",["T_WHITESPACE","\n            ",731],"}",["T_WHITESPACE"," ",732],["T_ELSE","else",732],["T_WHITESPACE"," ",732],"{",["T_WHITESPACE","\n                ",732],["T_VARIABLE","$option",733],["T_OBJECT_OPERATOR","->",733],["T_STRING","save",733],"(",")",";",["T_WHITESPACE","\n            ",733],"}",["T_WHITESPACE","\n        ",734],"}",["T_WHITESPACE","\n\n        ",735],["T_VARIABLE","$this",737],["T_OBJECT_OPERATOR","->",737],["T_STRING","_flagOptionsSaved",737],["T_WHITESPACE"," ",737],"=",["T_WHITESPACE"," ",737],["T_STRING","true",737],";",["T_WHITESPACE"," ",737],["T_COMMENT","\/\/ Report to watchers that options were saved\n",737],["T_WHITESPACE","\n        ",738],["T_RETURN","return",739],["T_WHITESPACE"," ",739],["T_VARIABLE","$this",739],";",["T_WHITESPACE","\n    ",739],"}",["T_WHITESPACE","\n\n    ",740],["T_DOC_COMMENT","\/**\n     * Save model plus its options\n     * Ensures saving options in case when resource model was not changed\n     *\/",742],["T_WHITESPACE","\n    ",745],["T_PUBLIC","public",746],["T_WHITESPACE"," ",746],["T_FUNCTION","function",746],["T_WHITESPACE"," ",746],["T_STRING","save",746],"(",")",["T_WHITESPACE","\n    ",746],"{",["T_WHITESPACE","\n        ",747],["T_VARIABLE","$hasDataChanges",748],["T_WHITESPACE"," ",748],"=",["T_WHITESPACE"," ",748],["T_VARIABLE","$this",748],["T_OBJECT_OPERATOR","->",748],["T_STRING","hasDataChanges",748],"(",")",";",["T_WHITESPACE","\n        ",748],["T_VARIABLE","$this",749],["T_OBJECT_OPERATOR","->",749],["T_STRING","_flagOptionsSaved",749],["T_WHITESPACE"," ",749],"=",["T_WHITESPACE"," ",749],["T_STRING","false",749],";",["T_WHITESPACE","\n\n        ",749],["T_STRING","parent",751],["T_DOUBLE_COLON","::",751],["T_STRING","save",751],"(",")",";",["T_WHITESPACE","\n\n        ",751],["T_IF","if",753],["T_WHITESPACE"," ",753],"(",["T_VARIABLE","$hasDataChanges",753],["T_WHITESPACE"," ",753],["T_BOOLEAN_AND","&&",753],["T_WHITESPACE"," ",753],"!",["T_VARIABLE","$this",753],["T_OBJECT_OPERATOR","->",753],["T_STRING","_flagOptionsSaved",753],")",["T_WHITESPACE"," ",753],"{",["T_WHITESPACE","\n            ",753],["T_VARIABLE","$this",754],["T_OBJECT_OPERATOR","->",754],["T_STRING","_saveItemOptions",754],"(",")",";",["T_WHITESPACE","\n        ",754],"}",["T_WHITESPACE","\n    ",755],"}",["T_WHITESPACE","\n\n    ",756],["T_DOC_COMMENT","\/**\n     * Save item options after item saved\n     *\n     * @return Mage_Sales_Model_Quote_Item\n     *\/",758],["T_WHITESPACE","\n    ",762],["T_PROTECTED","protected",763],["T_WHITESPACE"," ",763],["T_FUNCTION","function",763],["T_WHITESPACE"," ",763],["T_STRING","_afterSave",763],"(",")",["T_WHITESPACE","\n    ",763],"{",["T_WHITESPACE","\n        ",764],["T_VARIABLE","$this",765],["T_OBJECT_OPERATOR","->",765],["T_STRING","_saveItemOptions",765],"(",")",";",["T_WHITESPACE","\n        ",765],["T_RETURN","return",766],["T_WHITESPACE"," ",766],["T_STRING","parent",766],["T_DOUBLE_COLON","::",766],["T_STRING","_afterSave",766],"(",")",";",["T_WHITESPACE","\n    ",766],"}",["T_WHITESPACE","\n\n    ",767],["T_DOC_COMMENT","\/**\n     * Clone quote item\n     *\n     * @return Mage_Sales_Model_Quote_Item\n     *\/",769],["T_WHITESPACE","\n    ",773],["T_PUBLIC","public",774],["T_WHITESPACE"," ",774],["T_FUNCTION","function",774],["T_WHITESPACE"," ",774],["T_STRING","__clone",774],"(",")",["T_WHITESPACE","\n    ",774],"{",["T_WHITESPACE","\n        ",775],["T_STRING","parent",776],["T_DOUBLE_COLON","::",776],["T_STRING","__clone",776],"(",")",";",["T_WHITESPACE","\n        ",776],["T_VARIABLE","$options",777],["T_WHITESPACE"," ",777],"=",["T_WHITESPACE"," ",777],["T_VARIABLE","$this",777],["T_OBJECT_OPERATOR","->",777],["T_STRING","getOptions",777],"(",")",";",["T_WHITESPACE","\n        ",777],["T_VARIABLE","$this",778],["T_OBJECT_OPERATOR","->",778],["T_STRING","_quote",778],["T_WHITESPACE"," ",778],"=",["T_WHITESPACE"," ",778],["T_STRING","null",778],";",["T_WHITESPACE","\n        ",778],["T_VARIABLE","$this",779],["T_OBJECT_OPERATOR","->",779],["T_STRING","_options",779],["T_WHITESPACE"," ",779],"=",["T_WHITESPACE"," ",779],["T_ARRAY","array",779],"(",")",";",["T_WHITESPACE","\n        ",779],["T_VARIABLE","$this",780],["T_OBJECT_OPERATOR","->",780],["T_STRING","_optionsByCode",780],["T_WHITESPACE"," ",780],"=",["T_WHITESPACE"," ",780],["T_ARRAY","array",780],"(",")",";",["T_WHITESPACE","\n        ",780],["T_FOREACH","foreach",781],["T_WHITESPACE"," ",781],"(",["T_VARIABLE","$options",781],["T_WHITESPACE"," ",781],["T_AS","as",781],["T_WHITESPACE"," ",781],["T_VARIABLE","$option",781],")",["T_WHITESPACE"," ",781],"{",["T_WHITESPACE","\n            ",781],["T_VARIABLE","$this",782],["T_OBJECT_OPERATOR","->",782],["T_STRING","addOption",782],"(",["T_CLONE","clone",782],["T_WHITESPACE"," ",782],["T_VARIABLE","$option",782],")",";",["T_WHITESPACE","\n        ",782],"}",["T_WHITESPACE","\n        ",783],["T_RETURN","return",784],["T_WHITESPACE"," ",784],["T_VARIABLE","$this",784],";",["T_WHITESPACE","\n    ",784],"}",["T_WHITESPACE","\n\n    ",785],["T_DOC_COMMENT","\/**\n     * Returns formatted buy request - object, holding request received from\n     * product view page with keys and options for configured product\n     *\n     * @return Varien_Object\n     *\/",787],["T_WHITESPACE","\n    ",792],["T_PUBLIC","public",793],["T_WHITESPACE"," ",793],["T_FUNCTION","function",793],["T_WHITESPACE"," ",793],["T_STRING","getBuyRequest",793],"(",")",["T_WHITESPACE","\n    ",793],"{",["T_WHITESPACE","\n        ",794],["T_VARIABLE","$option",795],["T_WHITESPACE"," ",795],"=",["T_WHITESPACE"," ",795],["T_VARIABLE","$this",795],["T_OBJECT_OPERATOR","->",795],["T_STRING","getOptionByCode",795],"(",["T_CONSTANT_ENCAPSED_STRING","'info_buyRequest'",795],")",";",["T_WHITESPACE","\n        ",795],["T_VARIABLE","$buyRequest",796],["T_WHITESPACE"," ",796],"=",["T_WHITESPACE"," ",796],["T_NEW","new",796],["T_WHITESPACE"," ",796],["T_STRING","Varien_Object",796],"(",["T_VARIABLE","$option",796],["T_WHITESPACE"," ",796],"?",["T_WHITESPACE"," ",796],["T_STRING","unserialize",796],"(",["T_VARIABLE","$option",796],["T_OBJECT_OPERATOR","->",796],["T_STRING","getValue",796],"(",")",")",["T_WHITESPACE"," ",796],":",["T_WHITESPACE"," ",796],["T_STRING","null",796],")",";",["T_WHITESPACE","\n\n        ",796],["T_COMMENT","\/\/ Overwrite standard buy request qty, because item qty could have changed since adding to quote\n",798],["T_WHITESPACE","        ",799],["T_VARIABLE","$buyRequest",799],["T_OBJECT_OPERATOR","->",799],["T_STRING","setOriginalQty",799],"(",["T_VARIABLE","$buyRequest",799],["T_OBJECT_OPERATOR","->",799],["T_STRING","getQty",799],"(",")",")",["T_WHITESPACE","\n            ",799],["T_OBJECT_OPERATOR","->",800],["T_STRING","setQty",800],"(",["T_VARIABLE","$this",800],["T_OBJECT_OPERATOR","->",800],["T_STRING","getQty",800],"(",")",["T_WHITESPACE"," ",800],"*",["T_WHITESPACE"," ",800],["T_LNUMBER","1",800],")",";",["T_WHITESPACE","\n\n        ",800],["T_RETURN","return",802],["T_WHITESPACE"," ",802],["T_VARIABLE","$buyRequest",802],";",["T_WHITESPACE","\n    ",802],"}",["T_WHITESPACE","\n\n    ",803],["T_DOC_COMMENT","\/**\n     * Sets flag, whether this quote item has some error associated with it.\n     *\n     * @param bool $flag\n     * @return Mage_Sales_Model_Quote_Item\n     *\/",805],["T_WHITESPACE","\n    ",810],["T_PROTECTED","protected",811],["T_WHITESPACE"," ",811],["T_FUNCTION","function",811],["T_WHITESPACE"," ",811],["T_STRING","_setHasError",811],"(",["T_VARIABLE","$flag",811],")",["T_WHITESPACE","\n    ",811],"{",["T_WHITESPACE","\n        ",812],["T_RETURN","return",813],["T_WHITESPACE"," ",813],["T_VARIABLE","$this",813],["T_OBJECT_OPERATOR","->",813],["T_STRING","setData",813],"(",["T_CONSTANT_ENCAPSED_STRING","'has_error'",813],",",["T_WHITESPACE"," ",813],["T_VARIABLE","$flag",813],")",";",["T_WHITESPACE","\n    ",813],"}",["T_WHITESPACE","\n\n    ",814],["T_DOC_COMMENT","\/**\n     * Sets flag, whether this quote item has some error associated with it.\n     * When TRUE - also adds 'unknown' error information to list of quote item errors.\n     * When FALSE - clears whole list of quote item errors.\n     * It's recommended to use addErrorInfo() instead - to be able to remove error statuses later.\n     *\n     * @param bool $flag\n     * @return Mage_Sales_Model_Quote_Item\n     * @see addErrorInfo()\n     *\/",816],["T_WHITESPACE","\n    ",825],["T_PUBLIC","public",826],["T_WHITESPACE"," ",826],["T_FUNCTION","function",826],["T_WHITESPACE"," ",826],["T_STRING","setHasError",826],"(",["T_VARIABLE","$flag",826],")",["T_WHITESPACE","\n    ",826],"{",["T_WHITESPACE","\n        ",827],["T_IF","if",828],["T_WHITESPACE"," ",828],"(",["T_VARIABLE","$flag",828],")",["T_WHITESPACE"," ",828],"{",["T_WHITESPACE","\n            ",828],["T_VARIABLE","$this",829],["T_OBJECT_OPERATOR","->",829],["T_STRING","addErrorInfo",829],"(",")",";",["T_WHITESPACE","\n        ",829],"}",["T_WHITESPACE"," ",830],["T_ELSE","else",830],["T_WHITESPACE"," ",830],"{",["T_WHITESPACE","\n            ",830],["T_VARIABLE","$this",831],["T_OBJECT_OPERATOR","->",831],["T_STRING","_clearErrorInfo",831],"(",")",";",["T_WHITESPACE","\n        ",831],"}",["T_WHITESPACE","\n        ",832],["T_RETURN","return",833],["T_WHITESPACE"," ",833],["T_VARIABLE","$this",833],";",["T_WHITESPACE","\n    ",833],"}",["T_WHITESPACE","\n\n    ",834],["T_DOC_COMMENT","\/**\n     * Clears list of errors, associated with this quote item.\n     * Also automatically removes error-flag from oneself.\n     *\n     * @return Mage_Sales_Model_Quote_Item\n     *\/",836],["T_WHITESPACE","\n    ",841],["T_PROTECTED","protected",842],["T_WHITESPACE"," ",842],["T_FUNCTION","function",842],["T_WHITESPACE"," ",842],["T_STRING","_clearErrorInfo",842],"(",")",["T_WHITESPACE","\n    ",842],"{",["T_WHITESPACE","\n        ",843],["T_VARIABLE","$this",844],["T_OBJECT_OPERATOR","->",844],["T_STRING","_errorInfos",844],["T_OBJECT_OPERATOR","->",844],["T_STRING","clear",844],"(",")",";",["T_WHITESPACE","\n        ",844],["T_VARIABLE","$this",845],["T_OBJECT_OPERATOR","->",845],["T_STRING","_setHasError",845],"(",["T_STRING","false",845],")",";",["T_WHITESPACE","\n        ",845],["T_RETURN","return",846],["T_WHITESPACE"," ",846],["T_VARIABLE","$this",846],";",["T_WHITESPACE","\n    ",846],"}",["T_WHITESPACE","\n\n    ",847],["T_DOC_COMMENT","\/**\n     * Adds error information to the quote item.\n     * Automatically sets error flag.\n     *\n     * @param string|null $origin Usually a name of module, that embeds error\n     * @param int|null $code Error code, unique for origin, that sets it\n     * @param string|null $message Error message\n     * @param Varien_Object|null $additionalData Any additional data, that caller would like to store\n     * @return Mage_Sales_Model_Quote_Item\n     *\/",849],["T_WHITESPACE","\n    ",858],["T_PUBLIC","public",859],["T_WHITESPACE"," ",859],["T_FUNCTION","function",859],["T_WHITESPACE"," ",859],["T_STRING","addErrorInfo",859],"(",["T_VARIABLE","$origin",859],["T_WHITESPACE"," ",859],"=",["T_WHITESPACE"," ",859],["T_STRING","null",859],",",["T_WHITESPACE"," ",859],["T_VARIABLE","$code",859],["T_WHITESPACE"," ",859],"=",["T_WHITESPACE"," ",859],["T_STRING","null",859],",",["T_WHITESPACE"," ",859],["T_VARIABLE","$message",859],["T_WHITESPACE"," ",859],"=",["T_WHITESPACE"," ",859],["T_STRING","null",859],",",["T_WHITESPACE"," ",859],["T_VARIABLE","$additionalData",859],["T_WHITESPACE"," ",859],"=",["T_WHITESPACE"," ",859],["T_STRING","null",859],")",["T_WHITESPACE","\n    ",859],"{",["T_WHITESPACE","\n        ",860],["T_VARIABLE","$this",861],["T_OBJECT_OPERATOR","->",861],["T_STRING","_errorInfos",861],["T_OBJECT_OPERATOR","->",861],["T_STRING","addItem",861],"(",["T_VARIABLE","$origin",861],",",["T_WHITESPACE"," ",861],["T_VARIABLE","$code",861],",",["T_WHITESPACE"," ",861],["T_VARIABLE","$message",861],",",["T_WHITESPACE"," ",861],["T_VARIABLE","$additionalData",861],")",";",["T_WHITESPACE","\n        ",861],["T_IF","if",862],["T_WHITESPACE"," ",862],"(",["T_VARIABLE","$message",862],["T_WHITESPACE"," ",862],["T_IS_NOT_IDENTICAL","!==",862],["T_WHITESPACE"," ",862],["T_STRING","null",862],")",["T_WHITESPACE"," ",862],"{",["T_WHITESPACE","\n            ",862],["T_VARIABLE","$this",863],["T_OBJECT_OPERATOR","->",863],["T_STRING","setMessage",863],"(",["T_VARIABLE","$message",863],")",";",["T_WHITESPACE","\n        ",863],"}",["T_WHITESPACE","\n        ",864],["T_VARIABLE","$this",865],["T_OBJECT_OPERATOR","->",865],["T_STRING","_setHasError",865],"(",["T_STRING","true",865],")",";",["T_WHITESPACE","\n\n        ",865],["T_RETURN","return",867],["T_WHITESPACE"," ",867],["T_VARIABLE","$this",867],";",["T_WHITESPACE","\n    ",867],"}",["T_WHITESPACE","\n\n    ",868],["T_DOC_COMMENT","\/**\n     * Retrieves all error infos, associated with this item\n     *\n     * @return array\n     *\/",870],["T_WHITESPACE","\n    ",874],["T_PUBLIC","public",875],["T_WHITESPACE"," ",875],["T_FUNCTION","function",875],["T_WHITESPACE"," ",875],["T_STRING","getErrorInfos",875],"(",")",["T_WHITESPACE","\n    ",875],"{",["T_WHITESPACE","\n        ",876],["T_RETURN","return",877],["T_WHITESPACE"," ",877],["T_VARIABLE","$this",877],["T_OBJECT_OPERATOR","->",877],["T_STRING","_errorInfos",877],["T_OBJECT_OPERATOR","->",877],["T_STRING","getItems",877],"(",")",";",["T_WHITESPACE","\n    ",877],"}",["T_WHITESPACE","\n\n    ",878],["T_DOC_COMMENT","\/**\n     * Removes error infos, that have parameters equal to passed in $params.\n     * $params can have following keys (if not set - then any item is good for this key):\n     *   'origin', 'code', 'message'\n     *\n     * @param array $params\n     * @return Mage_Sales_Model_Quote_Item\n     *\/",880],["T_WHITESPACE","\n    ",887],["T_PUBLIC","public",888],["T_WHITESPACE"," ",888],["T_FUNCTION","function",888],["T_WHITESPACE"," ",888],["T_STRING","removeErrorInfosByParams",888],"(",["T_VARIABLE","$params",888],")",["T_WHITESPACE","\n    ",888],"{",["T_WHITESPACE","\n        ",889],["T_VARIABLE","$removedItems",890],["T_WHITESPACE"," ",890],"=",["T_WHITESPACE"," ",890],["T_VARIABLE","$this",890],["T_OBJECT_OPERATOR","->",890],["T_STRING","_errorInfos",890],["T_OBJECT_OPERATOR","->",890],["T_STRING","removeItemsByParams",890],"(",["T_VARIABLE","$params",890],")",";",["T_WHITESPACE","\n        ",890],["T_FOREACH","foreach",891],["T_WHITESPACE"," ",891],"(",["T_VARIABLE","$removedItems",891],["T_WHITESPACE"," ",891],["T_AS","as",891],["T_WHITESPACE"," ",891],["T_VARIABLE","$item",891],")",["T_WHITESPACE"," ",891],"{",["T_WHITESPACE","\n            ",891],["T_IF","if",892],["T_WHITESPACE"," ",892],"(",["T_VARIABLE","$item",892],"[",["T_CONSTANT_ENCAPSED_STRING","'message'",892],"]",["T_WHITESPACE"," ",892],["T_IS_NOT_IDENTICAL","!==",892],["T_WHITESPACE"," ",892],["T_STRING","null",892],")",["T_WHITESPACE"," ",892],"{",["T_WHITESPACE","\n                ",892],["T_VARIABLE","$this",893],["T_OBJECT_OPERATOR","->",893],["T_STRING","removeMessageByText",893],"(",["T_VARIABLE","$item",893],"[",["T_CONSTANT_ENCAPSED_STRING","'message'",893],"]",")",";",["T_WHITESPACE","\n            ",893],"}",["T_WHITESPACE","\n        ",894],"}",["T_WHITESPACE","\n\n        ",895],["T_IF","if",897],["T_WHITESPACE"," ",897],"(","!",["T_VARIABLE","$this",897],["T_OBJECT_OPERATOR","->",897],["T_STRING","_errorInfos",897],["T_OBJECT_OPERATOR","->",897],["T_STRING","getItems",897],"(",")",")",["T_WHITESPACE"," ",897],"{",["T_WHITESPACE","\n            ",897],["T_VARIABLE","$this",898],["T_OBJECT_OPERATOR","->",898],["T_STRING","_setHasError",898],"(",["T_STRING","false",898],")",";",["T_WHITESPACE","\n        ",898],"}",["T_WHITESPACE","\n\n        ",899],["T_RETURN","return",901],["T_WHITESPACE"," ",901],["T_VARIABLE","$this",901],";",["T_WHITESPACE","\n    ",901],"}",["T_WHITESPACE","\n",902],"}",["T_WHITESPACE","\n",903]]
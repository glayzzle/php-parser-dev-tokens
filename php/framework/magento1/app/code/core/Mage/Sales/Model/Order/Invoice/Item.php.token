[["T_OPEN_TAG","<?php\n",1],["T_DOC_COMMENT","\/**\n * Magento\n *\n * NOTICE OF LICENSE\n *\n * This source file is subject to the Open Software License (OSL 3.0)\n * that is bundled with this package in the file LICENSE.txt.\n * It is also available through the world-wide-web at this URL:\n * http:\/\/opensource.org\/licenses\/osl-3.0.php\n * If you did not receive a copy of the license and are unable to\n * obtain it through the world-wide-web, please send an email\n * to license@magento.com so we can send you a copy immediately.\n *\n * DISCLAIMER\n *\n * Do not edit or add to this file if you wish to upgrade Magento to newer\n * versions in the future. If you wish to customize Magento for your\n * needs please refer to http:\/\/www.magento.com for more information.\n *\n * @category    Mage\n * @package     Mage_Sales\n * @copyright  Copyright (c) 2006-2016 X.commerce, Inc. and affiliates (http:\/\/www.magento.com)\n * @license    http:\/\/opensource.org\/licenses\/osl-3.0.php  Open Software License (OSL 3.0)\n *\/",2],["T_WHITESPACE","\n\n\n",25],["T_DOC_COMMENT","\/**\n * Enter description here ...\n *\n * @method Mage_Sales_Model_Resource_Order_Invoice_Item _getResource()\n * @method Mage_Sales_Model_Resource_Order_Invoice_Item getResource()\n * @method int getParentId()\n * @method Mage_Sales_Model_Order_Invoice_Item setParentId(int $value)\n * @method float getBasePrice()\n * @method Mage_Sales_Model_Order_Invoice_Item setBasePrice(float $value)\n * @method float getBaseWeeeTaxRowDisposition()\n * @method Mage_Sales_Model_Order_Invoice_Item setBaseWeeeTaxRowDisposition(float $value)\n * @method float getWeeeTaxAppliedRowAmount()\n * @method Mage_Sales_Model_Order_Invoice_Item setWeeeTaxAppliedRowAmount(float $value)\n * @method float getBaseWeeeTaxAppliedAmount()\n * @method Mage_Sales_Model_Order_Invoice_Item setBaseWeeeTaxAppliedAmount(float $value)\n * @method float getTaxAmount()\n * @method Mage_Sales_Model_Order_Invoice_Item setTaxAmount(float $value)\n * @method float getBaseRowTotal()\n * @method Mage_Sales_Model_Order_Invoice_Item setBaseRowTotal(float $value)\n * @method float getDiscountAmount()\n * @method Mage_Sales_Model_Order_Invoice_Item setDiscountAmount(float $value)\n * @method float getRowTotal()\n * @method Mage_Sales_Model_Order_Invoice_Item setRowTotal(float $value)\n * @method float getWeeeTaxRowDisposition()\n * @method Mage_Sales_Model_Order_Invoice_Item setWeeeTaxRowDisposition(float $value)\n * @method float getBaseDiscountAmount()\n * @method Mage_Sales_Model_Order_Invoice_Item setBaseDiscountAmount(float $value)\n * @method float getBaseWeeeTaxDisposition()\n * @method Mage_Sales_Model_Order_Invoice_Item setBaseWeeeTaxDisposition(float $value)\n * @method float getPriceInclTax()\n * @method Mage_Sales_Model_Order_Invoice_Item setPriceInclTax(float $value)\n * @method float getWeeeTaxAppliedAmount()\n * @method Mage_Sales_Model_Order_Invoice_Item setWeeeTaxAppliedAmount(float $value)\n * @method float getBaseTaxAmount()\n * @method Mage_Sales_Model_Order_Invoice_Item setBaseTaxAmount(float $value)\n * @method float getBasePriceInclTax()\n * @method Mage_Sales_Model_Order_Invoice_Item setBasePriceInclTax(float $value)\n * @method float getQty()\n * @method float getWeeeTaxDisposition()\n * @method Mage_Sales_Model_Order_Invoice_Item setWeeeTaxDisposition(float $value)\n * @method float getBaseCost()\n * @method Mage_Sales_Model_Order_Invoice_Item setBaseCost(float $value)\n * @method float getBaseWeeeTaxAppliedRowAmount()\n * @method Mage_Sales_Model_Order_Invoice_Item setBaseWeeeTaxAppliedRowAmount(float $value)\n * @method float getPrice()\n * @method Mage_Sales_Model_Order_Invoice_Item setPrice(float $value)\n * @method float getBaseRowTotalInclTax()\n * @method Mage_Sales_Model_Order_Invoice_Item setBaseRowTotalInclTax(float $value)\n * @method float getRowTotalInclTax()\n * @method Mage_Sales_Model_Order_Invoice_Item setRowTotalInclTax(float $value)\n * @method int getProductId()\n * @method Mage_Sales_Model_Order_Invoice_Item setProductId(int $value)\n * @method int getOrderItemId()\n * @method Mage_Sales_Model_Order_Invoice_Item setOrderItemId(int $value)\n * @method string getAdditionalData()\n * @method Mage_Sales_Model_Order_Invoice_Item setAdditionalData(string $value)\n * @method string getDescription()\n * @method Mage_Sales_Model_Order_Invoice_Item setDescription(string $value)\n * @method string getWeeeTaxApplied()\n * @method Mage_Sales_Model_Order_Invoice_Item setWeeeTaxApplied(string $value)\n * @method string getSku()\n * @method Mage_Sales_Model_Order_Invoice_Item setSku(string $value)\n * @method string getName()\n * @method Mage_Sales_Model_Order_Invoice_Item setName(string $value)\n * @method float getHiddenTaxAmount()\n * @method Mage_Sales_Model_Order_Invoice_Item setHiddenTaxAmount(float $value)\n * @method float getBaseHiddenTaxAmount()\n * @method Mage_Sales_Model_Order_Invoice_Item setBaseHiddenTaxAmount(float $value)\n *\n * @category    Mage\n * @package     Mage_Sales\n * @author      Magento Core Team <core@magentocommerce.com>\n *\/",28],["T_WHITESPACE","\n",100],["T_CLASS","class",101],["T_WHITESPACE"," ",101],["T_STRING","Mage_Sales_Model_Order_Invoice_Item",101],["T_WHITESPACE"," ",101],["T_EXTENDS","extends",101],["T_WHITESPACE"," ",101],["T_STRING","Mage_Core_Model_Abstract",101],["T_WHITESPACE","\n",101],"{",["T_WHITESPACE","\n    ",102],["T_PROTECTED","protected",103],["T_WHITESPACE"," ",103],["T_VARIABLE","$_eventPrefix",103],["T_WHITESPACE"," ",103],"=",["T_WHITESPACE"," ",103],["T_CONSTANT_ENCAPSED_STRING","'sales_invoice_item'",103],";",["T_WHITESPACE","\n    ",103],["T_PROTECTED","protected",104],["T_WHITESPACE"," ",104],["T_VARIABLE","$_eventObject",104],["T_WHITESPACE"," ",104],"=",["T_WHITESPACE"," ",104],["T_CONSTANT_ENCAPSED_STRING","'invoice_item'",104],";",["T_WHITESPACE","\n\n    ",104],["T_PROTECTED","protected",106],["T_WHITESPACE"," ",106],["T_VARIABLE","$_invoice",106],["T_WHITESPACE"," ",106],"=",["T_WHITESPACE"," ",106],["T_STRING","null",106],";",["T_WHITESPACE","\n    ",106],["T_PROTECTED","protected",107],["T_WHITESPACE"," ",107],["T_VARIABLE","$_orderItem",107],["T_WHITESPACE"," ",107],"=",["T_WHITESPACE"," ",107],["T_STRING","null",107],";",["T_WHITESPACE","\n\n    ",107],["T_DOC_COMMENT","\/**\n     * Initialize resource model\n     *\/",109],["T_WHITESPACE","\n    ",111],["T_FUNCTION","function",112],["T_WHITESPACE"," ",112],["T_STRING","_construct",112],"(",")",["T_WHITESPACE","\n    ",112],"{",["T_WHITESPACE","\n        ",113],["T_VARIABLE","$this",114],["T_OBJECT_OPERATOR","->",114],["T_STRING","_init",114],"(",["T_CONSTANT_ENCAPSED_STRING","'sales\/order_invoice_item'",114],")",";",["T_WHITESPACE","\n    ",114],"}",["T_WHITESPACE","\n\n    ",115],["T_DOC_COMMENT","\/**\n     * Init mapping array of short fields to\n     * its full names\n     *\n     * @return Varien_Object\n     *\/",117],["T_WHITESPACE","\n    ",122],["T_PROTECTED","protected",123],["T_WHITESPACE"," ",123],["T_FUNCTION","function",123],["T_WHITESPACE"," ",123],["T_STRING","_initOldFieldsMap",123],"(",")",["T_WHITESPACE","\n    ",123],"{",["T_WHITESPACE","\n        ",124],["T_VARIABLE","$this",125],["T_OBJECT_OPERATOR","->",125],["T_STRING","_oldFieldsMap",125],["T_WHITESPACE"," ",125],"=",["T_WHITESPACE"," ",125],["T_STRING","Mage",125],["T_DOUBLE_COLON","::",125],["T_STRING","helper",125],"(",["T_CONSTANT_ENCAPSED_STRING","'sales'",125],")",["T_OBJECT_OPERATOR","->",125],["T_STRING","getOldFieldMap",125],"(",["T_CONSTANT_ENCAPSED_STRING","'invoice_item'",125],")",";",["T_WHITESPACE","\n        ",125],["T_RETURN","return",126],["T_WHITESPACE"," ",126],["T_VARIABLE","$this",126],";",["T_WHITESPACE","\n    ",126],"}",["T_WHITESPACE","\n    ",127],["T_DOC_COMMENT","\/**\n     * Declare invoice instance\n     *\n     * @param   Mage_Sales_Model_Order_Invoice $invoice\n     * @return  Mage_Sales_Model_Order_Invoice_Item\n     *\/",128],["T_WHITESPACE","\n    ",133],["T_PUBLIC","public",134],["T_WHITESPACE"," ",134],["T_FUNCTION","function",134],["T_WHITESPACE"," ",134],["T_STRING","setInvoice",134],"(",["T_STRING","Mage_Sales_Model_Order_Invoice",134],["T_WHITESPACE"," ",134],["T_VARIABLE","$invoice",134],")",["T_WHITESPACE","\n    ",134],"{",["T_WHITESPACE","\n        ",135],["T_VARIABLE","$this",136],["T_OBJECT_OPERATOR","->",136],["T_STRING","_invoice",136],["T_WHITESPACE"," ",136],"=",["T_WHITESPACE"," ",136],["T_VARIABLE","$invoice",136],";",["T_WHITESPACE","\n        ",136],["T_RETURN","return",137],["T_WHITESPACE"," ",137],["T_VARIABLE","$this",137],";",["T_WHITESPACE","\n    ",137],"}",["T_WHITESPACE","\n\n    ",138],["T_DOC_COMMENT","\/**\n     * Retrieve invoice instance\n     *\n     * @return Mage_Sales_Model_Order_Invoice\n     *\/",140],["T_WHITESPACE","\n    ",144],["T_PUBLIC","public",145],["T_WHITESPACE"," ",145],["T_FUNCTION","function",145],["T_WHITESPACE"," ",145],["T_STRING","getInvoice",145],"(",")",["T_WHITESPACE","\n    ",145],"{",["T_WHITESPACE","\n        ",146],["T_RETURN","return",147],["T_WHITESPACE"," ",147],["T_VARIABLE","$this",147],["T_OBJECT_OPERATOR","->",147],["T_STRING","_invoice",147],";",["T_WHITESPACE","\n    ",147],"}",["T_WHITESPACE","\n\n    ",148],["T_DOC_COMMENT","\/**\n     * Declare order item instance\n     *\n     * @param   Mage_Sales_Model_Order_Item $item\n     * @return  Mage_Sales_Model_Order_Invoice_Item\n     *\/",150],["T_WHITESPACE","\n    ",155],["T_PUBLIC","public",156],["T_WHITESPACE"," ",156],["T_FUNCTION","function",156],["T_WHITESPACE"," ",156],["T_STRING","setOrderItem",156],"(",["T_STRING","Mage_Sales_Model_Order_Item",156],["T_WHITESPACE"," ",156],["T_VARIABLE","$item",156],")",["T_WHITESPACE","\n    ",156],"{",["T_WHITESPACE","\n        ",157],["T_VARIABLE","$this",158],["T_OBJECT_OPERATOR","->",158],["T_STRING","_orderItem",158],["T_WHITESPACE"," ",158],"=",["T_WHITESPACE"," ",158],["T_VARIABLE","$item",158],";",["T_WHITESPACE","\n        ",158],["T_VARIABLE","$this",159],["T_OBJECT_OPERATOR","->",159],["T_STRING","setOrderItemId",159],"(",["T_VARIABLE","$item",159],["T_OBJECT_OPERATOR","->",159],["T_STRING","getId",159],"(",")",")",";",["T_WHITESPACE","\n        ",159],["T_RETURN","return",160],["T_WHITESPACE"," ",160],["T_VARIABLE","$this",160],";",["T_WHITESPACE","\n    ",160],"}",["T_WHITESPACE","\n\n    ",161],["T_DOC_COMMENT","\/**\n     * Retrieve order item instance\n     *\n     * @return Mage_Sales_Model_Order_Item\n     *\/",163],["T_WHITESPACE","\n    ",167],["T_PUBLIC","public",168],["T_WHITESPACE"," ",168],["T_FUNCTION","function",168],["T_WHITESPACE"," ",168],["T_STRING","getOrderItem",168],"(",")",["T_WHITESPACE","\n    ",168],"{",["T_WHITESPACE","\n        ",169],["T_IF","if",170],["T_WHITESPACE"," ",170],"(",["T_STRING","is_null",170],"(",["T_VARIABLE","$this",170],["T_OBJECT_OPERATOR","->",170],["T_STRING","_orderItem",170],")",")",["T_WHITESPACE"," ",170],"{",["T_WHITESPACE","\n            ",170],["T_IF","if",171],["T_WHITESPACE"," ",171],"(",["T_VARIABLE","$this",171],["T_OBJECT_OPERATOR","->",171],["T_STRING","getInvoice",171],"(",")",")",["T_WHITESPACE"," ",171],"{",["T_WHITESPACE","\n                ",171],["T_VARIABLE","$this",172],["T_OBJECT_OPERATOR","->",172],["T_STRING","_orderItem",172],["T_WHITESPACE"," ",172],"=",["T_WHITESPACE"," ",172],["T_VARIABLE","$this",172],["T_OBJECT_OPERATOR","->",172],["T_STRING","getInvoice",172],"(",")",["T_OBJECT_OPERATOR","->",172],["T_STRING","getOrder",172],"(",")",["T_OBJECT_OPERATOR","->",172],["T_STRING","getItemById",172],"(",["T_VARIABLE","$this",172],["T_OBJECT_OPERATOR","->",172],["T_STRING","getOrderItemId",172],"(",")",")",";",["T_WHITESPACE","\n            ",172],"}",["T_WHITESPACE","\n            ",173],["T_ELSE","else",174],["T_WHITESPACE"," ",174],"{",["T_WHITESPACE","\n                ",174],["T_VARIABLE","$this",175],["T_OBJECT_OPERATOR","->",175],["T_STRING","_orderItem",175],["T_WHITESPACE"," ",175],"=",["T_WHITESPACE"," ",175],["T_STRING","Mage",175],["T_DOUBLE_COLON","::",175],["T_STRING","getModel",175],"(",["T_CONSTANT_ENCAPSED_STRING","'sales\/order_item'",175],")",["T_WHITESPACE","\n                    ",175],["T_OBJECT_OPERATOR","->",176],["T_STRING","load",176],"(",["T_VARIABLE","$this",176],["T_OBJECT_OPERATOR","->",176],["T_STRING","getOrderItemId",176],"(",")",")",";",["T_WHITESPACE","\n            ",176],"}",["T_WHITESPACE","\n        ",177],"}",["T_WHITESPACE","\n        ",178],["T_RETURN","return",179],["T_WHITESPACE"," ",179],["T_VARIABLE","$this",179],["T_OBJECT_OPERATOR","->",179],["T_STRING","_orderItem",179],";",["T_WHITESPACE","\n    ",179],"}",["T_WHITESPACE","\n\n    ",180],["T_DOC_COMMENT","\/**\n     * Declare qty\n     *\n     * @param   float $qty\n     * @return  Mage_Sales_Model_Order_Invoice_Item\n     *\/",182],["T_WHITESPACE","\n    ",187],["T_PUBLIC","public",188],["T_WHITESPACE"," ",188],["T_FUNCTION","function",188],["T_WHITESPACE"," ",188],["T_STRING","setQty",188],"(",["T_VARIABLE","$qty",188],")",["T_WHITESPACE","\n    ",188],"{",["T_WHITESPACE","\n        ",189],["T_IF","if",190],["T_WHITESPACE"," ",190],"(",["T_VARIABLE","$this",190],["T_OBJECT_OPERATOR","->",190],["T_STRING","getOrderItem",190],"(",")",["T_OBJECT_OPERATOR","->",190],["T_STRING","getIsQtyDecimal",190],"(",")",")",["T_WHITESPACE"," ",190],"{",["T_WHITESPACE","\n            ",190],["T_VARIABLE","$qty",191],["T_WHITESPACE"," ",191],"=",["T_WHITESPACE"," ",191],["T_DOUBLE_CAST","(float)",191],["T_WHITESPACE"," ",191],["T_VARIABLE","$qty",191],";",["T_WHITESPACE","\n        ",191],"}",["T_WHITESPACE","\n        ",192],["T_ELSE","else",193],["T_WHITESPACE"," ",193],"{",["T_WHITESPACE","\n            ",193],["T_VARIABLE","$qty",194],["T_WHITESPACE"," ",194],"=",["T_WHITESPACE"," ",194],["T_INT_CAST","(int)",194],["T_WHITESPACE"," ",194],["T_VARIABLE","$qty",194],";",["T_WHITESPACE","\n        ",194],"}",["T_WHITESPACE","\n        ",195],["T_VARIABLE","$qty",196],["T_WHITESPACE"," ",196],"=",["T_WHITESPACE"," ",196],["T_VARIABLE","$qty",196],["T_WHITESPACE"," ",196],">",["T_WHITESPACE"," ",196],["T_LNUMBER","0",196],["T_WHITESPACE"," ",196],"?",["T_WHITESPACE"," ",196],["T_VARIABLE","$qty",196],["T_WHITESPACE"," ",196],":",["T_WHITESPACE"," ",196],["T_LNUMBER","0",196],";",["T_WHITESPACE","\n        ",196],["T_DOC_COMMENT","\/**\n         * Check qty availability\n         *\/",197],["T_WHITESPACE","\n        ",199],["T_VARIABLE","$qtyToInvoice",200],["T_WHITESPACE"," ",200],"=",["T_WHITESPACE"," ",200],["T_STRING","sprintf",200],"(",["T_CONSTANT_ENCAPSED_STRING","\"%F\"",200],",",["T_WHITESPACE"," ",200],["T_VARIABLE","$this",200],["T_OBJECT_OPERATOR","->",200],["T_STRING","getOrderItem",200],"(",")",["T_OBJECT_OPERATOR","->",200],["T_STRING","getQtyToInvoice",200],"(",")",")",";",["T_WHITESPACE","\n        ",200],["T_VARIABLE","$qty",201],["T_WHITESPACE"," ",201],"=",["T_WHITESPACE"," ",201],["T_STRING","sprintf",201],"(",["T_CONSTANT_ENCAPSED_STRING","\"%F\"",201],",",["T_WHITESPACE"," ",201],["T_VARIABLE","$qty",201],")",";",["T_WHITESPACE","\n        ",201],["T_IF","if",202],["T_WHITESPACE"," ",202],"(",["T_VARIABLE","$qty",202],["T_WHITESPACE"," ",202],["T_IS_SMALLER_OR_EQUAL","<=",202],["T_WHITESPACE"," ",202],["T_VARIABLE","$qtyToInvoice",202],["T_WHITESPACE"," ",202],["T_BOOLEAN_OR","||",202],["T_WHITESPACE"," ",202],["T_VARIABLE","$this",202],["T_OBJECT_OPERATOR","->",202],["T_STRING","getOrderItem",202],"(",")",["T_OBJECT_OPERATOR","->",202],["T_STRING","isDummy",202],"(",")",")",["T_WHITESPACE"," ",202],"{",["T_WHITESPACE","\n            ",202],["T_VARIABLE","$this",203],["T_OBJECT_OPERATOR","->",203],["T_STRING","setData",203],"(",["T_CONSTANT_ENCAPSED_STRING","'qty'",203],",",["T_WHITESPACE"," ",203],["T_VARIABLE","$qty",203],")",";",["T_WHITESPACE","\n        ",203],"}",["T_WHITESPACE","\n        ",204],["T_ELSE","else",205],["T_WHITESPACE"," ",205],"{",["T_WHITESPACE","\n            ",205],["T_STRING","Mage",206],["T_DOUBLE_COLON","::",206],["T_STRING","throwException",206],"(",["T_WHITESPACE","\n                ",206],["T_STRING","Mage",207],["T_DOUBLE_COLON","::",207],["T_STRING","helper",207],"(",["T_CONSTANT_ENCAPSED_STRING","'sales'",207],")",["T_OBJECT_OPERATOR","->",207],["T_STRING","__",207],"(",["T_CONSTANT_ENCAPSED_STRING","'Invalid qty to invoice item \"%s\"'",207],",",["T_WHITESPACE"," ",207],["T_VARIABLE","$this",207],["T_OBJECT_OPERATOR","->",207],["T_STRING","getName",207],"(",")",")",["T_WHITESPACE","\n            ",207],")",";",["T_WHITESPACE","\n        ",208],"}",["T_WHITESPACE","\n        ",209],["T_RETURN","return",210],["T_WHITESPACE"," ",210],["T_VARIABLE","$this",210],";",["T_WHITESPACE","\n    ",210],"}",["T_WHITESPACE","\n\n    ",211],["T_DOC_COMMENT","\/**\n     * Applying qty to order item\n     *\n     * @return Mage_Sales_Model_Order_Invoice_Item\n     *\/",213],["T_WHITESPACE","\n    ",217],["T_PUBLIC","public",218],["T_WHITESPACE"," ",218],["T_FUNCTION","function",218],["T_WHITESPACE"," ",218],["T_STRING","register",218],"(",")",["T_WHITESPACE","\n    ",218],"{",["T_WHITESPACE","\n        ",219],["T_VARIABLE","$orderItem",220],["T_WHITESPACE"," ",220],"=",["T_WHITESPACE"," ",220],["T_VARIABLE","$this",220],["T_OBJECT_OPERATOR","->",220],["T_STRING","getOrderItem",220],"(",")",";",["T_WHITESPACE","\n        ",220],["T_VARIABLE","$orderItem",221],["T_OBJECT_OPERATOR","->",221],["T_STRING","setQtyInvoiced",221],"(",["T_VARIABLE","$orderItem",221],["T_OBJECT_OPERATOR","->",221],["T_STRING","getQtyInvoiced",221],"(",")","+",["T_VARIABLE","$this",221],["T_OBJECT_OPERATOR","->",221],["T_STRING","getQty",221],"(",")",")",";",["T_WHITESPACE","\n\n        ",221],["T_VARIABLE","$orderItem",223],["T_OBJECT_OPERATOR","->",223],["T_STRING","setTaxInvoiced",223],"(",["T_VARIABLE","$orderItem",223],["T_OBJECT_OPERATOR","->",223],["T_STRING","getTaxInvoiced",223],"(",")","+",["T_VARIABLE","$this",223],["T_OBJECT_OPERATOR","->",223],["T_STRING","getTaxAmount",223],"(",")",")",";",["T_WHITESPACE","\n        ",223],["T_VARIABLE","$orderItem",224],["T_OBJECT_OPERATOR","->",224],["T_STRING","setBaseTaxInvoiced",224],"(",["T_VARIABLE","$orderItem",224],["T_OBJECT_OPERATOR","->",224],["T_STRING","getBaseTaxInvoiced",224],"(",")","+",["T_VARIABLE","$this",224],["T_OBJECT_OPERATOR","->",224],["T_STRING","getBaseTaxAmount",224],"(",")",")",";",["T_WHITESPACE","\n        ",224],["T_VARIABLE","$orderItem",225],["T_OBJECT_OPERATOR","->",225],["T_STRING","setHiddenTaxInvoiced",225],"(",["T_VARIABLE","$orderItem",225],["T_OBJECT_OPERATOR","->",225],["T_STRING","getHiddenTaxInvoiced",225],"(",")","+",["T_VARIABLE","$this",225],["T_OBJECT_OPERATOR","->",225],["T_STRING","getHiddenTaxAmount",225],"(",")",")",";",["T_WHITESPACE","\n        ",225],["T_VARIABLE","$orderItem",226],["T_OBJECT_OPERATOR","->",226],["T_STRING","setBaseHiddenTaxInvoiced",226],"(",["T_VARIABLE","$orderItem",226],["T_OBJECT_OPERATOR","->",226],["T_STRING","getBaseHiddenTaxInvoiced",226],"(",")","+",["T_VARIABLE","$this",226],["T_OBJECT_OPERATOR","->",226],["T_STRING","getBaseHiddenTaxAmount",226],"(",")",")",";",["T_WHITESPACE","\n\n        ",226],["T_VARIABLE","$orderItem",228],["T_OBJECT_OPERATOR","->",228],["T_STRING","setDiscountInvoiced",228],"(",["T_VARIABLE","$orderItem",228],["T_OBJECT_OPERATOR","->",228],["T_STRING","getDiscountInvoiced",228],"(",")","+",["T_VARIABLE","$this",228],["T_OBJECT_OPERATOR","->",228],["T_STRING","getDiscountAmount",228],"(",")",")",";",["T_WHITESPACE","\n        ",228],["T_VARIABLE","$orderItem",229],["T_OBJECT_OPERATOR","->",229],["T_STRING","setBaseDiscountInvoiced",229],"(",["T_VARIABLE","$orderItem",229],["T_OBJECT_OPERATOR","->",229],["T_STRING","getBaseDiscountInvoiced",229],"(",")","+",["T_VARIABLE","$this",229],["T_OBJECT_OPERATOR","->",229],["T_STRING","getBaseDiscountAmount",229],"(",")",")",";",["T_WHITESPACE","\n\n        ",229],["T_VARIABLE","$orderItem",231],["T_OBJECT_OPERATOR","->",231],["T_STRING","setRowInvoiced",231],"(",["T_VARIABLE","$orderItem",231],["T_OBJECT_OPERATOR","->",231],["T_STRING","getRowInvoiced",231],"(",")","+",["T_VARIABLE","$this",231],["T_OBJECT_OPERATOR","->",231],["T_STRING","getRowTotal",231],"(",")",")",";",["T_WHITESPACE","\n        ",231],["T_VARIABLE","$orderItem",232],["T_OBJECT_OPERATOR","->",232],["T_STRING","setBaseRowInvoiced",232],"(",["T_VARIABLE","$orderItem",232],["T_OBJECT_OPERATOR","->",232],["T_STRING","getBaseRowInvoiced",232],"(",")","+",["T_VARIABLE","$this",232],["T_OBJECT_OPERATOR","->",232],["T_STRING","getBaseRowTotal",232],"(",")",")",";",["T_WHITESPACE","\n        ",232],["T_RETURN","return",233],["T_WHITESPACE"," ",233],["T_VARIABLE","$this",233],";",["T_WHITESPACE","\n    ",233],"}",["T_WHITESPACE","\n\n    ",234],["T_DOC_COMMENT","\/**\n     * Cancelling invoice item\n     *\n     * @return Mage_Sales_Model_Order_Invoice_Item\n     *\/",236],["T_WHITESPACE","\n    ",240],["T_PUBLIC","public",241],["T_WHITESPACE"," ",241],["T_FUNCTION","function",241],["T_WHITESPACE"," ",241],["T_STRING","cancel",241],"(",")",["T_WHITESPACE","\n    ",241],"{",["T_WHITESPACE","\n        ",242],["T_VARIABLE","$orderItem",243],["T_WHITESPACE"," ",243],"=",["T_WHITESPACE"," ",243],["T_VARIABLE","$this",243],["T_OBJECT_OPERATOR","->",243],["T_STRING","getOrderItem",243],"(",")",";",["T_WHITESPACE","\n        ",243],["T_VARIABLE","$orderItem",244],["T_OBJECT_OPERATOR","->",244],["T_STRING","setQtyInvoiced",244],"(",["T_VARIABLE","$orderItem",244],["T_OBJECT_OPERATOR","->",244],["T_STRING","getQtyInvoiced",244],"(",")","-",["T_VARIABLE","$this",244],["T_OBJECT_OPERATOR","->",244],["T_STRING","getQty",244],"(",")",")",";",["T_WHITESPACE","\n\n        ",244],["T_VARIABLE","$orderItem",246],["T_OBJECT_OPERATOR","->",246],["T_STRING","setTaxInvoiced",246],"(",["T_VARIABLE","$orderItem",246],["T_OBJECT_OPERATOR","->",246],["T_STRING","getTaxInvoiced",246],"(",")","-",["T_VARIABLE","$this",246],["T_OBJECT_OPERATOR","->",246],["T_STRING","getTaxAmount",246],"(",")",")",";",["T_WHITESPACE","\n        ",246],["T_VARIABLE","$orderItem",247],["T_OBJECT_OPERATOR","->",247],["T_STRING","setBaseTaxInvoiced",247],"(",["T_VARIABLE","$orderItem",247],["T_OBJECT_OPERATOR","->",247],["T_STRING","getBaseTaxInvoiced",247],"(",")","-",["T_VARIABLE","$this",247],["T_OBJECT_OPERATOR","->",247],["T_STRING","getBaseTaxAmount",247],"(",")",")",";",["T_WHITESPACE","\n        ",247],["T_VARIABLE","$orderItem",248],["T_OBJECT_OPERATOR","->",248],["T_STRING","setHiddenTaxInvoiced",248],"(",["T_VARIABLE","$orderItem",248],["T_OBJECT_OPERATOR","->",248],["T_STRING","getHiddenTaxInvoiced",248],"(",")","-",["T_VARIABLE","$this",248],["T_OBJECT_OPERATOR","->",248],["T_STRING","getHiddenTaxAmount",248],"(",")",")",";",["T_WHITESPACE","\n        ",248],["T_VARIABLE","$orderItem",249],["T_OBJECT_OPERATOR","->",249],["T_STRING","setBaseHiddenTaxInvoiced",249],"(",["T_VARIABLE","$orderItem",249],["T_OBJECT_OPERATOR","->",249],["T_STRING","getBaseHiddenTaxInvoiced",249],"(",")","-",["T_VARIABLE","$this",249],["T_OBJECT_OPERATOR","->",249],["T_STRING","getBaseHiddenTaxAmount",249],"(",")",")",";",["T_WHITESPACE","\n\n\n        ",249],["T_VARIABLE","$orderItem",252],["T_OBJECT_OPERATOR","->",252],["T_STRING","setDiscountInvoiced",252],"(",["T_VARIABLE","$orderItem",252],["T_OBJECT_OPERATOR","->",252],["T_STRING","getDiscountInvoiced",252],"(",")","-",["T_VARIABLE","$this",252],["T_OBJECT_OPERATOR","->",252],["T_STRING","getDiscountAmount",252],"(",")",")",";",["T_WHITESPACE","\n        ",252],["T_VARIABLE","$orderItem",253],["T_OBJECT_OPERATOR","->",253],["T_STRING","setBaseDiscountInvoiced",253],"(",["T_VARIABLE","$orderItem",253],["T_OBJECT_OPERATOR","->",253],["T_STRING","getBaseDiscountInvoiced",253],"(",")","-",["T_VARIABLE","$this",253],["T_OBJECT_OPERATOR","->",253],["T_STRING","getBaseDiscountAmount",253],"(",")",")",";",["T_WHITESPACE","\n\n        ",253],["T_VARIABLE","$orderItem",255],["T_OBJECT_OPERATOR","->",255],["T_STRING","setRowInvoiced",255],"(",["T_VARIABLE","$orderItem",255],["T_OBJECT_OPERATOR","->",255],["T_STRING","getRowInvoiced",255],"(",")","-",["T_VARIABLE","$this",255],["T_OBJECT_OPERATOR","->",255],["T_STRING","getRowTotal",255],"(",")",")",";",["T_WHITESPACE","\n        ",255],["T_VARIABLE","$orderItem",256],["T_OBJECT_OPERATOR","->",256],["T_STRING","setBaseRowInvoiced",256],"(",["T_VARIABLE","$orderItem",256],["T_OBJECT_OPERATOR","->",256],["T_STRING","getBaseRowInvoiced",256],"(",")","-",["T_VARIABLE","$this",256],["T_OBJECT_OPERATOR","->",256],["T_STRING","getBaseRowTotal",256],"(",")",")",";",["T_WHITESPACE","\n        ",256],["T_RETURN","return",257],["T_WHITESPACE"," ",257],["T_VARIABLE","$this",257],";",["T_WHITESPACE","\n    ",257],"}",["T_WHITESPACE","\n\n    ",258],["T_DOC_COMMENT","\/**\n     * Invoice item row total calculation\n     *\n     * @return Mage_Sales_Model_Order_Invoice_Item\n     *\/",260],["T_WHITESPACE","\n    ",264],["T_PUBLIC","public",265],["T_WHITESPACE"," ",265],["T_FUNCTION","function",265],["T_WHITESPACE"," ",265],["T_STRING","calcRowTotal",265],"(",")",["T_WHITESPACE","\n    ",265],"{",["T_WHITESPACE","\n        ",266],["T_VARIABLE","$invoice",267],["T_WHITESPACE","        ",267],"=",["T_WHITESPACE"," ",267],["T_VARIABLE","$this",267],["T_OBJECT_OPERATOR","->",267],["T_STRING","getInvoice",267],"(",")",";",["T_WHITESPACE","\n        ",267],["T_VARIABLE","$orderItem",268],["T_WHITESPACE","      ",268],"=",["T_WHITESPACE"," ",268],["T_VARIABLE","$this",268],["T_OBJECT_OPERATOR","->",268],["T_STRING","getOrderItem",268],"(",")",";",["T_WHITESPACE","\n        ",268],["T_VARIABLE","$orderItemQty",269],["T_WHITESPACE","   ",269],"=",["T_WHITESPACE"," ",269],["T_VARIABLE","$orderItem",269],["T_OBJECT_OPERATOR","->",269],["T_STRING","getQtyOrdered",269],"(",")",";",["T_WHITESPACE","\n\n        ",269],["T_VARIABLE","$rowTotal",271],["T_WHITESPACE","            ",271],"=",["T_WHITESPACE"," ",271],["T_VARIABLE","$orderItem",271],["T_OBJECT_OPERATOR","->",271],["T_STRING","getRowTotal",271],"(",")",["T_WHITESPACE"," ",271],"-",["T_WHITESPACE"," ",271],["T_VARIABLE","$orderItem",271],["T_OBJECT_OPERATOR","->",271],["T_STRING","getRowInvoiced",271],"(",")",";",["T_WHITESPACE","\n        ",271],["T_VARIABLE","$baseRowTotal",272],["T_WHITESPACE","        ",272],"=",["T_WHITESPACE"," ",272],["T_VARIABLE","$orderItem",272],["T_OBJECT_OPERATOR","->",272],["T_STRING","getBaseRowTotal",272],"(",")",["T_WHITESPACE"," ",272],"-",["T_WHITESPACE"," ",272],["T_VARIABLE","$orderItem",272],["T_OBJECT_OPERATOR","->",272],["T_STRING","getBaseRowInvoiced",272],"(",")",";",["T_WHITESPACE","\n        ",272],["T_VARIABLE","$rowTotalInclTax",273],["T_WHITESPACE","     ",273],"=",["T_WHITESPACE"," ",273],["T_VARIABLE","$orderItem",273],["T_OBJECT_OPERATOR","->",273],["T_STRING","getRowTotalInclTax",273],"(",")",";",["T_WHITESPACE","\n        ",273],["T_VARIABLE","$baseRowTotalInclTax",274],["T_WHITESPACE"," ",274],"=",["T_WHITESPACE"," ",274],["T_VARIABLE","$orderItem",274],["T_OBJECT_OPERATOR","->",274],["T_STRING","getBaseRowTotalInclTax",274],"(",")",";",["T_WHITESPACE","\n\n        ",274],["T_IF","if",276],["T_WHITESPACE"," ",276],"(","!",["T_VARIABLE","$this",276],["T_OBJECT_OPERATOR","->",276],["T_STRING","isLast",276],"(",")",")",["T_WHITESPACE"," ",276],"{",["T_WHITESPACE","\n            ",276],["T_VARIABLE","$availableQty",277],["T_WHITESPACE"," ",277],"=",["T_WHITESPACE"," ",277],["T_VARIABLE","$orderItemQty",277],["T_WHITESPACE"," ",277],"-",["T_WHITESPACE"," ",277],["T_VARIABLE","$orderItem",277],["T_OBJECT_OPERATOR","->",277],["T_STRING","getQtyInvoiced",277],"(",")",";",["T_WHITESPACE","\n            ",277],["T_VARIABLE","$rowTotal",278],["T_WHITESPACE"," ",278],"=",["T_WHITESPACE"," ",278],["T_VARIABLE","$invoice",278],["T_OBJECT_OPERATOR","->",278],["T_STRING","roundPrice",278],"(",["T_VARIABLE","$rowTotal",278],["T_WHITESPACE"," ",278],"\/",["T_WHITESPACE"," ",278],["T_VARIABLE","$availableQty",278],["T_WHITESPACE"," ",278],"*",["T_WHITESPACE"," ",278],["T_VARIABLE","$this",278],["T_OBJECT_OPERATOR","->",278],["T_STRING","getQty",278],"(",")",")",";",["T_WHITESPACE","\n            ",278],["T_VARIABLE","$baseRowTotal",279],["T_WHITESPACE"," ",279],"=",["T_WHITESPACE"," ",279],["T_VARIABLE","$invoice",279],["T_OBJECT_OPERATOR","->",279],["T_STRING","roundPrice",279],"(",["T_VARIABLE","$baseRowTotal",279],["T_WHITESPACE"," ",279],"\/",["T_WHITESPACE"," ",279],["T_VARIABLE","$availableQty",279],["T_WHITESPACE"," ",279],"*",["T_WHITESPACE"," ",279],["T_VARIABLE","$this",279],["T_OBJECT_OPERATOR","->",279],["T_STRING","getQty",279],"(",")",",",["T_WHITESPACE"," ",279],["T_CONSTANT_ENCAPSED_STRING","'base'",279],")",";",["T_WHITESPACE","\n        ",279],"}",["T_WHITESPACE","\n\n        ",280],["T_VARIABLE","$this",282],["T_OBJECT_OPERATOR","->",282],["T_STRING","setRowTotal",282],"(",["T_VARIABLE","$rowTotal",282],")",";",["T_WHITESPACE","\n        ",282],["T_VARIABLE","$this",283],["T_OBJECT_OPERATOR","->",283],["T_STRING","setBaseRowTotal",283],"(",["T_VARIABLE","$baseRowTotal",283],")",";",["T_WHITESPACE","\n\n        ",283],["T_IF","if",285],["T_WHITESPACE"," ",285],"(",["T_VARIABLE","$rowTotalInclTax",285],["T_WHITESPACE"," ",285],["T_BOOLEAN_AND","&&",285],["T_WHITESPACE"," ",285],["T_VARIABLE","$baseRowTotalInclTax",285],")",["T_WHITESPACE"," ",285],"{",["T_WHITESPACE","\n            ",285],["T_VARIABLE","$this",286],["T_OBJECT_OPERATOR","->",286],["T_STRING","setRowTotalInclTax",286],"(",["T_VARIABLE","$invoice",286],["T_OBJECT_OPERATOR","->",286],["T_STRING","roundPrice",286],"(",["T_VARIABLE","$rowTotalInclTax",286],["T_WHITESPACE"," ",286],"\/",["T_WHITESPACE"," ",286],["T_VARIABLE","$orderItemQty",286],["T_WHITESPACE"," ",286],"*",["T_WHITESPACE"," ",286],["T_VARIABLE","$this",286],["T_OBJECT_OPERATOR","->",286],["T_STRING","getQty",286],"(",")",",",["T_WHITESPACE"," ",286],["T_CONSTANT_ENCAPSED_STRING","'including'",286],")",")",";",["T_WHITESPACE","\n            ",286],["T_VARIABLE","$this",287],["T_OBJECT_OPERATOR","->",287],["T_STRING","setBaseRowTotalInclTax",287],"(",["T_VARIABLE","$invoice",287],["T_OBJECT_OPERATOR","->",287],["T_STRING","roundPrice",287],"(",["T_VARIABLE","$baseRowTotalInclTax",287],["T_WHITESPACE"," ",287],"\/",["T_WHITESPACE"," ",287],["T_VARIABLE","$orderItemQty",287],["T_WHITESPACE"," ",287],"*",["T_WHITESPACE"," ",287],["T_VARIABLE","$this",287],["T_OBJECT_OPERATOR","->",287],["T_STRING","getQty",287],"(",")",",",["T_WHITESPACE"," ",287],["T_CONSTANT_ENCAPSED_STRING","'including_base'",287],")",")",";",["T_WHITESPACE","\n        ",287],"}",["T_WHITESPACE","\n        ",288],["T_RETURN","return",289],["T_WHITESPACE"," ",289],["T_VARIABLE","$this",289],";",["T_WHITESPACE","\n    ",289],"}",["T_WHITESPACE","\n\n    ",290],["T_DOC_COMMENT","\/**\n     * Checking if the item is last\n     *\n     * @return bool\n     *\/",292],["T_WHITESPACE","\n    ",296],["T_PUBLIC","public",297],["T_WHITESPACE"," ",297],["T_FUNCTION","function",297],["T_WHITESPACE"," ",297],["T_STRING","isLast",297],"(",")",["T_WHITESPACE","\n    ",297],"{",["T_WHITESPACE","\n        ",298],["T_IF","if",299],["T_WHITESPACE"," ",299],"(",["T_STRING_CAST","(string)",299],["T_DOUBLE_CAST","(float)",299],["T_VARIABLE","$this",299],["T_OBJECT_OPERATOR","->",299],["T_STRING","getQty",299],"(",")",["T_WHITESPACE"," ",299],["T_IS_EQUAL","==",299],["T_WHITESPACE"," ",299],["T_STRING_CAST","(string)",299],["T_DOUBLE_CAST","(float)",299],["T_VARIABLE","$this",299],["T_OBJECT_OPERATOR","->",299],["T_STRING","getOrderItem",299],"(",")",["T_OBJECT_OPERATOR","->",299],["T_STRING","getQtyToInvoice",299],"(",")",")",["T_WHITESPACE"," ",299],"{",["T_WHITESPACE","\n            ",299],["T_RETURN","return",300],["T_WHITESPACE"," ",300],["T_STRING","true",300],";",["T_WHITESPACE","\n        ",300],"}",["T_WHITESPACE","\n        ",301],["T_RETURN","return",302],["T_WHITESPACE"," ",302],["T_STRING","false",302],";",["T_WHITESPACE","\n    ",302],"}",["T_WHITESPACE","\n\n    ",303],["T_DOC_COMMENT","\/**\n     * Before object save\n     *\n     * @return Mage_Sales_Model_Order_Invoice_Item\n     *\/",305],["T_WHITESPACE","\n    ",309],["T_PROTECTED","protected",310],["T_WHITESPACE"," ",310],["T_FUNCTION","function",310],["T_WHITESPACE"," ",310],["T_STRING","_beforeSave",310],"(",")",["T_WHITESPACE","\n    ",310],"{",["T_WHITESPACE","\n        ",311],["T_STRING","parent",312],["T_DOUBLE_COLON","::",312],["T_STRING","_beforeSave",312],"(",")",";",["T_WHITESPACE","\n\n        ",312],["T_IF","if",314],["T_WHITESPACE"," ",314],"(","!",["T_VARIABLE","$this",314],["T_OBJECT_OPERATOR","->",314],["T_STRING","getParentId",314],"(",")",["T_WHITESPACE"," ",314],["T_BOOLEAN_AND","&&",314],["T_WHITESPACE"," ",314],["T_VARIABLE","$this",314],["T_OBJECT_OPERATOR","->",314],["T_STRING","getInvoice",314],"(",")",")",["T_WHITESPACE"," ",314],"{",["T_WHITESPACE","\n            ",314],["T_VARIABLE","$this",315],["T_OBJECT_OPERATOR","->",315],["T_STRING","setParentId",315],"(",["T_VARIABLE","$this",315],["T_OBJECT_OPERATOR","->",315],["T_STRING","getInvoice",315],"(",")",["T_OBJECT_OPERATOR","->",315],["T_STRING","getId",315],"(",")",")",";",["T_WHITESPACE","\n        ",315],"}",["T_WHITESPACE","\n\n        ",316],["T_RETURN","return",318],["T_WHITESPACE"," ",318],["T_VARIABLE","$this",318],";",["T_WHITESPACE","\n    ",318],"}",["T_WHITESPACE","\n\n    ",319],["T_DOC_COMMENT","\/**\n     * After object save\n     *\n     * @return Mage_Sales_Model_Order_Invoice_Item\n     *\/",321],["T_WHITESPACE","\n    ",325],["T_PROTECTED","protected",326],["T_WHITESPACE"," ",326],["T_FUNCTION","function",326],["T_WHITESPACE"," ",326],["T_STRING","_afterSave",326],"(",")",["T_WHITESPACE","\n    ",326],"{",["T_WHITESPACE","\n        ",327],["T_IF","if",328],["T_WHITESPACE"," ",328],"(",["T_STRING","null",328],["T_WHITESPACE"," ",328],["T_IS_EQUAL","==",328],"!",["T_WHITESPACE"," ",328],["T_VARIABLE","$this",328],["T_OBJECT_OPERATOR","->",328],["T_STRING","_orderItem",328],")",["T_WHITESPACE"," ",328],"{",["T_WHITESPACE","\n            ",328],["T_VARIABLE","$this",329],["T_OBJECT_OPERATOR","->",329],["T_STRING","_orderItem",329],["T_OBJECT_OPERATOR","->",329],["T_STRING","save",329],"(",")",";",["T_WHITESPACE","\n        ",329],"}",["T_WHITESPACE","\n\n        ",330],["T_STRING","parent",332],["T_DOUBLE_COLON","::",332],["T_STRING","_afterSave",332],"(",")",";",["T_WHITESPACE","\n        ",332],["T_RETURN","return",333],["T_WHITESPACE"," ",333],["T_VARIABLE","$this",333],";",["T_WHITESPACE","\n    ",333],"}",["T_WHITESPACE","\n",334],"}",["T_WHITESPACE","\n",335]]
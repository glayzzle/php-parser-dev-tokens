[["T_OPEN_TAG","<?php\n",1],["T_DOC_COMMENT","\/**\n * Magento\n *\n * NOTICE OF LICENSE\n *\n * This source file is subject to the Open Software License (OSL 3.0)\n * that is bundled with this package in the file LICENSE.txt.\n * It is also available through the world-wide-web at this URL:\n * http:\/\/opensource.org\/licenses\/osl-3.0.php\n * If you did not receive a copy of the license and are unable to\n * obtain it through the world-wide-web, please send an email\n * to license@magento.com so we can send you a copy immediately.\n *\n * DISCLAIMER\n *\n * Do not edit or add to this file if you wish to upgrade Magento to newer\n * versions in the future. If you wish to customize Magento for your\n * needs please refer to http:\/\/www.magento.com for more information.\n *\n * @category    Mage\n * @package     Mage_Sales\n * @copyright  Copyright (c) 2006-2016 X.commerce, Inc. and affiliates (http:\/\/www.magento.com)\n * @license    http:\/\/opensource.org\/licenses\/osl-3.0.php  Open Software License (OSL 3.0)\n *\/",2],["T_WHITESPACE","\n\n\n",25],["T_CLASS","class",28],["T_WHITESPACE"," ",28],["T_STRING","Mage_Sales_Model_Quote_Address_Total_Shipping",28],["T_WHITESPACE"," ",28],["T_EXTENDS","extends",28],["T_WHITESPACE"," ",28],["T_STRING","Mage_Sales_Model_Quote_Address_Total_Abstract",28],["T_WHITESPACE","\n",28],"{",["T_WHITESPACE","\n    ",29],["T_PUBLIC","public",30],["T_WHITESPACE"," ",30],["T_FUNCTION","function",30],["T_WHITESPACE"," ",30],["T_STRING","__construct",30],"(",")",["T_WHITESPACE","\n    ",30],"{",["T_WHITESPACE","\n        ",31],["T_VARIABLE","$this",32],["T_OBJECT_OPERATOR","->",32],["T_STRING","setCode",32],"(",["T_CONSTANT_ENCAPSED_STRING","'shipping'",32],")",";",["T_WHITESPACE","\n    ",32],"}",["T_WHITESPACE","\n\n    ",33],["T_DOC_COMMENT","\/**\n     * Collect totals information about shipping\n     *\n     * @param   Mage_Sales_Model_Quote_Address $address\n     * @return  Mage_Sales_Model_Quote_Address_Total_Shipping\n     *\/",35],["T_WHITESPACE","\n    ",40],["T_PUBLIC","public",41],["T_WHITESPACE"," ",41],["T_FUNCTION","function",41],["T_WHITESPACE"," ",41],["T_STRING","collect",41],"(",["T_STRING","Mage_Sales_Model_Quote_Address",41],["T_WHITESPACE"," ",41],["T_VARIABLE","$address",41],")",["T_WHITESPACE","\n    ",41],"{",["T_WHITESPACE","\n        ",42],["T_STRING","parent",43],["T_DOUBLE_COLON","::",43],["T_STRING","collect",43],"(",["T_VARIABLE","$address",43],")",";",["T_WHITESPACE","\n\n        ",43],["T_VARIABLE","$oldWeight",45],["T_WHITESPACE"," ",45],"=",["T_WHITESPACE"," ",45],["T_VARIABLE","$address",45],["T_OBJECT_OPERATOR","->",45],["T_STRING","getWeight",45],"(",")",";",["T_WHITESPACE","\n        ",45],["T_VARIABLE","$address",46],["T_OBJECT_OPERATOR","->",46],["T_STRING","setWeight",46],"(",["T_LNUMBER","0",46],")",";",["T_WHITESPACE","\n        ",46],["T_VARIABLE","$address",47],["T_OBJECT_OPERATOR","->",47],["T_STRING","setFreeMethodWeight",47],"(",["T_LNUMBER","0",47],")",";",["T_WHITESPACE","\n        ",47],["T_VARIABLE","$this",48],["T_OBJECT_OPERATOR","->",48],["T_STRING","_setAmount",48],"(",["T_LNUMBER","0",48],")",["T_WHITESPACE","\n            ",48],["T_OBJECT_OPERATOR","->",49],["T_STRING","_setBaseAmount",49],"(",["T_LNUMBER","0",49],")",";",["T_WHITESPACE","\n\n        ",49],["T_VARIABLE","$items",51],["T_WHITESPACE"," ",51],"=",["T_WHITESPACE"," ",51],["T_VARIABLE","$this",51],["T_OBJECT_OPERATOR","->",51],["T_STRING","_getAddressItems",51],"(",["T_VARIABLE","$address",51],")",";",["T_WHITESPACE","\n        ",51],["T_IF","if",52],["T_WHITESPACE"," ",52],"(","!",["T_STRING","count",52],"(",["T_VARIABLE","$items",52],")",")",["T_WHITESPACE"," ",52],"{",["T_WHITESPACE","\n            ",52],["T_RETURN","return",53],["T_WHITESPACE"," ",53],["T_VARIABLE","$this",53],";",["T_WHITESPACE","\n        ",53],"}",["T_WHITESPACE","\n\n        ",54],["T_VARIABLE","$method",56],["T_WHITESPACE","     ",56],"=",["T_WHITESPACE"," ",56],["T_VARIABLE","$address",56],["T_OBJECT_OPERATOR","->",56],["T_STRING","getShippingMethod",56],"(",")",";",["T_WHITESPACE","\n        ",56],["T_VARIABLE","$freeAddress",57],"=",["T_WHITESPACE"," ",57],["T_VARIABLE","$address",57],["T_OBJECT_OPERATOR","->",57],["T_STRING","getFreeShipping",57],"(",")",";",["T_WHITESPACE","\n\n        ",57],["T_VARIABLE","$addressWeight",59],["T_WHITESPACE","      ",59],"=",["T_WHITESPACE"," ",59],["T_VARIABLE","$address",59],["T_OBJECT_OPERATOR","->",59],["T_STRING","getWeight",59],"(",")",";",["T_WHITESPACE","\n        ",59],["T_VARIABLE","$freeMethodWeight",60],["T_WHITESPACE","   ",60],"=",["T_WHITESPACE"," ",60],["T_VARIABLE","$address",60],["T_OBJECT_OPERATOR","->",60],["T_STRING","getFreeMethodWeight",60],"(",")",";",["T_WHITESPACE","\n\n        ",60],["T_VARIABLE","$addressQty",62],["T_WHITESPACE"," ",62],"=",["T_WHITESPACE"," ",62],["T_LNUMBER","0",62],";",["T_WHITESPACE","\n\n        ",62],["T_FOREACH","foreach",64],["T_WHITESPACE"," ",64],"(",["T_VARIABLE","$items",64],["T_WHITESPACE"," ",64],["T_AS","as",64],["T_WHITESPACE"," ",64],["T_VARIABLE","$item",64],")",["T_WHITESPACE"," ",64],"{",["T_WHITESPACE","\n            ",64],["T_DOC_COMMENT","\/**\n             * Skip if this item is virtual\n             *\/",65],["T_WHITESPACE","\n            ",67],["T_IF","if",68],["T_WHITESPACE"," ",68],"(",["T_VARIABLE","$item",68],["T_OBJECT_OPERATOR","->",68],["T_STRING","getProduct",68],"(",")",["T_OBJECT_OPERATOR","->",68],["T_STRING","isVirtual",68],"(",")",")",["T_WHITESPACE"," ",68],"{",["T_WHITESPACE","\n                ",68],["T_CONTINUE","continue",69],";",["T_WHITESPACE","\n            ",69],"}",["T_WHITESPACE","\n\n            ",70],["T_DOC_COMMENT","\/**\n             * Children weight we calculate for parent\n             *\/",72],["T_WHITESPACE","\n            ",74],["T_IF","if",75],["T_WHITESPACE"," ",75],"(",["T_VARIABLE","$item",75],["T_OBJECT_OPERATOR","->",75],["T_STRING","getParentItem",75],"(",")",")",["T_WHITESPACE"," ",75],"{",["T_WHITESPACE","\n                ",75],["T_CONTINUE","continue",76],";",["T_WHITESPACE","\n            ",76],"}",["T_WHITESPACE","\n\n            ",77],["T_IF","if",79],["T_WHITESPACE"," ",79],"(",["T_VARIABLE","$item",79],["T_OBJECT_OPERATOR","->",79],["T_STRING","getHasChildren",79],"(",")",["T_WHITESPACE"," ",79],["T_BOOLEAN_AND","&&",79],["T_WHITESPACE"," ",79],["T_VARIABLE","$item",79],["T_OBJECT_OPERATOR","->",79],["T_STRING","isShipSeparately",79],"(",")",")",["T_WHITESPACE"," ",79],"{",["T_WHITESPACE","\n                ",79],["T_FOREACH","foreach",80],["T_WHITESPACE"," ",80],"(",["T_VARIABLE","$item",80],["T_OBJECT_OPERATOR","->",80],["T_STRING","getChildren",80],"(",")",["T_WHITESPACE"," ",80],["T_AS","as",80],["T_WHITESPACE"," ",80],["T_VARIABLE","$child",80],")",["T_WHITESPACE"," ",80],"{",["T_WHITESPACE","\n                    ",80],["T_IF","if",81],["T_WHITESPACE"," ",81],"(",["T_VARIABLE","$child",81],["T_OBJECT_OPERATOR","->",81],["T_STRING","getProduct",81],"(",")",["T_OBJECT_OPERATOR","->",81],["T_STRING","isVirtual",81],"(",")",")",["T_WHITESPACE"," ",81],"{",["T_WHITESPACE","\n                        ",81],["T_CONTINUE","continue",82],";",["T_WHITESPACE","\n                    ",82],"}",["T_WHITESPACE","\n                    ",83],["T_VARIABLE","$addressQty",84],["T_WHITESPACE"," ",84],["T_PLUS_EQUAL","+=",84],["T_WHITESPACE"," ",84],["T_VARIABLE","$child",84],["T_OBJECT_OPERATOR","->",84],["T_STRING","getTotalQty",84],"(",")",";",["T_WHITESPACE","\n\n                    ",84],["T_IF","if",86],["T_WHITESPACE"," ",86],"(","!",["T_VARIABLE","$item",86],["T_OBJECT_OPERATOR","->",86],["T_STRING","getProduct",86],"(",")",["T_OBJECT_OPERATOR","->",86],["T_STRING","getWeightType",86],"(",")",")",["T_WHITESPACE"," ",86],"{",["T_WHITESPACE","\n                        ",86],["T_VARIABLE","$itemWeight",87],["T_WHITESPACE"," ",87],"=",["T_WHITESPACE"," ",87],["T_VARIABLE","$child",87],["T_OBJECT_OPERATOR","->",87],["T_STRING","getWeight",87],"(",")",";",["T_WHITESPACE","\n                        ",87],["T_VARIABLE","$itemQty",88],["T_WHITESPACE","    ",88],"=",["T_WHITESPACE"," ",88],["T_VARIABLE","$child",88],["T_OBJECT_OPERATOR","->",88],["T_STRING","getTotalQty",88],"(",")",";",["T_WHITESPACE","\n                        ",88],["T_VARIABLE","$rowWeight",89],["T_WHITESPACE","  ",89],"=",["T_WHITESPACE"," ",89],["T_VARIABLE","$itemWeight",89],"*",["T_VARIABLE","$itemQty",89],";",["T_WHITESPACE","\n                        ",89],["T_VARIABLE","$addressWeight",90],["T_WHITESPACE"," ",90],["T_PLUS_EQUAL","+=",90],["T_WHITESPACE"," ",90],["T_VARIABLE","$rowWeight",90],";",["T_WHITESPACE","\n                        ",90],["T_IF","if",91],["T_WHITESPACE"," ",91],"(",["T_VARIABLE","$freeAddress",91],["T_WHITESPACE"," ",91],["T_BOOLEAN_OR","||",91],["T_WHITESPACE"," ",91],["T_VARIABLE","$child",91],["T_OBJECT_OPERATOR","->",91],["T_STRING","getFreeShipping",91],"(",")",["T_IS_IDENTICAL","===",91],["T_STRING","true",91],")",["T_WHITESPACE"," ",91],"{",["T_WHITESPACE","\n                            ",91],["T_VARIABLE","$rowWeight",92],["T_WHITESPACE"," ",92],"=",["T_WHITESPACE"," ",92],["T_LNUMBER","0",92],";",["T_WHITESPACE","\n                        ",92],"}",["T_WHITESPACE"," ",93],["T_ELSEIF","elseif",93],["T_WHITESPACE"," ",93],"(",["T_STRING","is_numeric",93],"(",["T_VARIABLE","$child",93],["T_OBJECT_OPERATOR","->",93],["T_STRING","getFreeShipping",93],"(",")",")",")",["T_WHITESPACE"," ",93],"{",["T_WHITESPACE","\n                            ",93],["T_VARIABLE","$freeQty",94],["T_WHITESPACE"," ",94],"=",["T_WHITESPACE"," ",94],["T_VARIABLE","$child",94],["T_OBJECT_OPERATOR","->",94],["T_STRING","getFreeShipping",94],"(",")",";",["T_WHITESPACE","\n                            ",94],["T_IF","if",95],["T_WHITESPACE"," ",95],"(",["T_VARIABLE","$itemQty",95],">",["T_VARIABLE","$freeQty",95],")",["T_WHITESPACE"," ",95],"{",["T_WHITESPACE","\n                                ",95],["T_VARIABLE","$rowWeight",96],["T_WHITESPACE"," ",96],"=",["T_WHITESPACE"," ",96],["T_VARIABLE","$itemWeight",96],"*","(",["T_VARIABLE","$itemQty",96],"-",["T_VARIABLE","$freeQty",96],")",";",["T_WHITESPACE","\n                            ",96],"}",["T_WHITESPACE","\n                            ",97],["T_ELSE","else",98],["T_WHITESPACE"," ",98],"{",["T_WHITESPACE","\n                                ",98],["T_VARIABLE","$rowWeight",99],["T_WHITESPACE"," ",99],"=",["T_WHITESPACE"," ",99],["T_LNUMBER","0",99],";",["T_WHITESPACE","\n                            ",99],"}",["T_WHITESPACE","\n                        ",100],"}",["T_WHITESPACE","\n                        ",101],["T_VARIABLE","$freeMethodWeight",102],["T_WHITESPACE"," ",102],["T_PLUS_EQUAL","+=",102],["T_WHITESPACE"," ",102],["T_VARIABLE","$rowWeight",102],";",["T_WHITESPACE","\n                        ",102],["T_VARIABLE","$item",103],["T_OBJECT_OPERATOR","->",103],["T_STRING","setRowWeight",103],"(",["T_VARIABLE","$rowWeight",103],")",";",["T_WHITESPACE","\n                    ",103],"}",["T_WHITESPACE","\n                ",104],"}",["T_WHITESPACE","\n                ",105],["T_IF","if",106],["T_WHITESPACE"," ",106],"(",["T_VARIABLE","$item",106],["T_OBJECT_OPERATOR","->",106],["T_STRING","getProduct",106],"(",")",["T_OBJECT_OPERATOR","->",106],["T_STRING","getWeightType",106],"(",")",")",["T_WHITESPACE"," ",106],"{",["T_WHITESPACE","\n                    ",106],["T_VARIABLE","$itemWeight",107],["T_WHITESPACE"," ",107],"=",["T_WHITESPACE"," ",107],["T_VARIABLE","$item",107],["T_OBJECT_OPERATOR","->",107],["T_STRING","getWeight",107],"(",")",";",["T_WHITESPACE","\n                    ",107],["T_VARIABLE","$rowWeight",108],["T_WHITESPACE","  ",108],"=",["T_WHITESPACE"," ",108],["T_VARIABLE","$itemWeight",108],"*",["T_VARIABLE","$item",108],["T_OBJECT_OPERATOR","->",108],["T_STRING","getQty",108],"(",")",";",["T_WHITESPACE","\n                    ",108],["T_VARIABLE","$addressWeight",109],["T_PLUS_EQUAL","+=",109],["T_WHITESPACE"," ",109],["T_VARIABLE","$rowWeight",109],";",["T_WHITESPACE","\n                    ",109],["T_IF","if",110],["T_WHITESPACE"," ",110],"(",["T_VARIABLE","$freeAddress",110],["T_WHITESPACE"," ",110],["T_BOOLEAN_OR","||",110],["T_WHITESPACE"," ",110],["T_VARIABLE","$item",110],["T_OBJECT_OPERATOR","->",110],["T_STRING","getFreeShipping",110],"(",")",["T_IS_IDENTICAL","===",110],["T_STRING","true",110],")",["T_WHITESPACE"," ",110],"{",["T_WHITESPACE","\n                        ",110],["T_VARIABLE","$rowWeight",111],["T_WHITESPACE"," ",111],"=",["T_WHITESPACE"," ",111],["T_LNUMBER","0",111],";",["T_WHITESPACE","\n                    ",111],"}",["T_WHITESPACE"," ",112],["T_ELSEIF","elseif",112],["T_WHITESPACE"," ",112],"(",["T_STRING","is_numeric",112],"(",["T_VARIABLE","$item",112],["T_OBJECT_OPERATOR","->",112],["T_STRING","getFreeShipping",112],"(",")",")",")",["T_WHITESPACE"," ",112],"{",["T_WHITESPACE","\n                        ",112],["T_VARIABLE","$freeQty",113],["T_WHITESPACE"," ",113],"=",["T_WHITESPACE"," ",113],["T_VARIABLE","$item",113],["T_OBJECT_OPERATOR","->",113],["T_STRING","getFreeShipping",113],"(",")",";",["T_WHITESPACE","\n                        ",113],["T_IF","if",114],["T_WHITESPACE"," ",114],"(",["T_VARIABLE","$item",114],["T_OBJECT_OPERATOR","->",114],["T_STRING","getQty",114],"(",")",">",["T_VARIABLE","$freeQty",114],")",["T_WHITESPACE"," ",114],"{",["T_WHITESPACE","\n                            ",114],["T_VARIABLE","$rowWeight",115],["T_WHITESPACE"," ",115],"=",["T_WHITESPACE"," ",115],["T_VARIABLE","$itemWeight",115],"*","(",["T_VARIABLE","$item",115],["T_OBJECT_OPERATOR","->",115],["T_STRING","getQty",115],"(",")","-",["T_VARIABLE","$freeQty",115],")",";",["T_WHITESPACE","\n                        ",115],"}",["T_WHITESPACE","\n                        ",116],["T_ELSE","else",117],["T_WHITESPACE"," ",117],"{",["T_WHITESPACE","\n                            ",117],["T_VARIABLE","$rowWeight",118],["T_WHITESPACE"," ",118],"=",["T_WHITESPACE"," ",118],["T_LNUMBER","0",118],";",["T_WHITESPACE","\n                        ",118],"}",["T_WHITESPACE","\n                    ",119],"}",["T_WHITESPACE","\n                    ",120],["T_VARIABLE","$freeMethodWeight",121],["T_PLUS_EQUAL","+=",121],["T_WHITESPACE"," ",121],["T_VARIABLE","$rowWeight",121],";",["T_WHITESPACE","\n                    ",121],["T_VARIABLE","$item",122],["T_OBJECT_OPERATOR","->",122],["T_STRING","setRowWeight",122],"(",["T_VARIABLE","$rowWeight",122],")",";",["T_WHITESPACE","\n                ",122],"}",["T_WHITESPACE","\n            ",123],"}",["T_WHITESPACE","\n            ",124],["T_ELSE","else",125],["T_WHITESPACE"," ",125],"{",["T_WHITESPACE","\n                ",125],["T_IF","if",126],["T_WHITESPACE"," ",126],"(","!",["T_VARIABLE","$item",126],["T_OBJECT_OPERATOR","->",126],["T_STRING","getProduct",126],"(",")",["T_OBJECT_OPERATOR","->",126],["T_STRING","isVirtual",126],"(",")",")",["T_WHITESPACE"," ",126],"{",["T_WHITESPACE","\n                    ",126],["T_VARIABLE","$addressQty",127],["T_WHITESPACE"," ",127],["T_PLUS_EQUAL","+=",127],["T_WHITESPACE"," ",127],["T_VARIABLE","$item",127],["T_OBJECT_OPERATOR","->",127],["T_STRING","getQty",127],"(",")",";",["T_WHITESPACE","\n                ",127],"}",["T_WHITESPACE","\n                ",128],["T_VARIABLE","$itemWeight",129],["T_WHITESPACE"," ",129],"=",["T_WHITESPACE"," ",129],["T_VARIABLE","$item",129],["T_OBJECT_OPERATOR","->",129],["T_STRING","getWeight",129],"(",")",";",["T_WHITESPACE","\n                ",129],["T_VARIABLE","$rowWeight",130],["T_WHITESPACE","  ",130],"=",["T_WHITESPACE"," ",130],["T_VARIABLE","$itemWeight",130],"*",["T_VARIABLE","$item",130],["T_OBJECT_OPERATOR","->",130],["T_STRING","getQty",130],"(",")",";",["T_WHITESPACE","\n                ",130],["T_VARIABLE","$addressWeight",131],["T_PLUS_EQUAL","+=",131],["T_WHITESPACE"," ",131],["T_VARIABLE","$rowWeight",131],";",["T_WHITESPACE","\n                ",131],["T_IF","if",132],["T_WHITESPACE"," ",132],"(",["T_VARIABLE","$freeAddress",132],["T_WHITESPACE"," ",132],["T_BOOLEAN_OR","||",132],["T_WHITESPACE"," ",132],["T_VARIABLE","$item",132],["T_OBJECT_OPERATOR","->",132],["T_STRING","getFreeShipping",132],"(",")",["T_IS_IDENTICAL","===",132],["T_STRING","true",132],")",["T_WHITESPACE"," ",132],"{",["T_WHITESPACE","\n                    ",132],["T_VARIABLE","$rowWeight",133],["T_WHITESPACE"," ",133],"=",["T_WHITESPACE"," ",133],["T_LNUMBER","0",133],";",["T_WHITESPACE","\n                ",133],"}",["T_WHITESPACE"," ",134],["T_ELSEIF","elseif",134],["T_WHITESPACE"," ",134],"(",["T_STRING","is_numeric",134],"(",["T_VARIABLE","$item",134],["T_OBJECT_OPERATOR","->",134],["T_STRING","getFreeShipping",134],"(",")",")",")",["T_WHITESPACE"," ",134],"{",["T_WHITESPACE","\n                    ",134],["T_VARIABLE","$freeQty",135],["T_WHITESPACE"," ",135],"=",["T_WHITESPACE"," ",135],["T_VARIABLE","$item",135],["T_OBJECT_OPERATOR","->",135],["T_STRING","getFreeShipping",135],"(",")",";",["T_WHITESPACE","\n                    ",135],["T_IF","if",136],["T_WHITESPACE"," ",136],"(",["T_VARIABLE","$item",136],["T_OBJECT_OPERATOR","->",136],["T_STRING","getQty",136],"(",")",">",["T_VARIABLE","$freeQty",136],")",["T_WHITESPACE"," ",136],"{",["T_WHITESPACE","\n                        ",136],["T_VARIABLE","$rowWeight",137],["T_WHITESPACE"," ",137],"=",["T_WHITESPACE"," ",137],["T_VARIABLE","$itemWeight",137],"*","(",["T_VARIABLE","$item",137],["T_OBJECT_OPERATOR","->",137],["T_STRING","getQty",137],"(",")","-",["T_VARIABLE","$freeQty",137],")",";",["T_WHITESPACE","\n                    ",137],"}",["T_WHITESPACE","\n                    ",138],["T_ELSE","else",139],["T_WHITESPACE"," ",139],"{",["T_WHITESPACE","\n                        ",139],["T_VARIABLE","$rowWeight",140],["T_WHITESPACE"," ",140],"=",["T_WHITESPACE"," ",140],["T_LNUMBER","0",140],";",["T_WHITESPACE","\n                    ",140],"}",["T_WHITESPACE","\n                ",141],"}",["T_WHITESPACE","\n                ",142],["T_VARIABLE","$freeMethodWeight",143],["T_PLUS_EQUAL","+=",143],["T_WHITESPACE"," ",143],["T_VARIABLE","$rowWeight",143],";",["T_WHITESPACE","\n                ",143],["T_VARIABLE","$item",144],["T_OBJECT_OPERATOR","->",144],["T_STRING","setRowWeight",144],"(",["T_VARIABLE","$rowWeight",144],")",";",["T_WHITESPACE","\n            ",144],"}",["T_WHITESPACE","\n        ",145],"}",["T_WHITESPACE","\n\n        ",146],["T_IF","if",148],["T_WHITESPACE"," ",148],"(",["T_ISSET","isset",148],"(",["T_VARIABLE","$addressQty",148],")",")",["T_WHITESPACE"," ",148],"{",["T_WHITESPACE","\n            ",148],["T_VARIABLE","$address",149],["T_OBJECT_OPERATOR","->",149],["T_STRING","setItemQty",149],"(",["T_VARIABLE","$addressQty",149],")",";",["T_WHITESPACE","\n        ",149],"}",["T_WHITESPACE","\n\n        ",150],["T_VARIABLE","$address",152],["T_OBJECT_OPERATOR","->",152],["T_STRING","setWeight",152],"(",["T_VARIABLE","$addressWeight",152],")",";",["T_WHITESPACE","\n        ",152],["T_VARIABLE","$address",153],["T_OBJECT_OPERATOR","->",153],["T_STRING","setFreeMethodWeight",153],"(",["T_VARIABLE","$freeMethodWeight",153],")",";",["T_WHITESPACE","\n\n        ",153],["T_VARIABLE","$address",155],["T_OBJECT_OPERATOR","->",155],["T_STRING","collectShippingRates",155],"(",")",";",["T_WHITESPACE","\n\n        ",155],["T_VARIABLE","$this",157],["T_OBJECT_OPERATOR","->",157],["T_STRING","_setAmount",157],"(",["T_LNUMBER","0",157],")",["T_WHITESPACE","\n            ",157],["T_OBJECT_OPERATOR","->",158],["T_STRING","_setBaseAmount",158],"(",["T_LNUMBER","0",158],")",";",["T_WHITESPACE","\n\n        ",158],["T_VARIABLE","$method",160],["T_WHITESPACE"," ",160],"=",["T_WHITESPACE"," ",160],["T_VARIABLE","$address",160],["T_OBJECT_OPERATOR","->",160],["T_STRING","getShippingMethod",160],"(",")",";",["T_WHITESPACE","\n\n        ",160],["T_IF","if",162],["T_WHITESPACE"," ",162],"(",["T_VARIABLE","$method",162],")",["T_WHITESPACE"," ",162],"{",["T_WHITESPACE","\n            ",162],["T_FOREACH","foreach",163],["T_WHITESPACE"," ",163],"(",["T_VARIABLE","$address",163],["T_OBJECT_OPERATOR","->",163],["T_STRING","getAllShippingRates",163],"(",")",["T_WHITESPACE"," ",163],["T_AS","as",163],["T_WHITESPACE"," ",163],["T_VARIABLE","$rate",163],")",["T_WHITESPACE"," ",163],"{",["T_WHITESPACE","\n                ",163],["T_IF","if",164],["T_WHITESPACE"," ",164],"(",["T_VARIABLE","$rate",164],["T_OBJECT_OPERATOR","->",164],["T_STRING","getCode",164],"(",")",["T_IS_EQUAL","==",164],["T_VARIABLE","$method",164],")",["T_WHITESPACE"," ",164],"{",["T_WHITESPACE","\n                    ",164],["T_VARIABLE","$amountPrice",165],["T_WHITESPACE"," ",165],"=",["T_WHITESPACE"," ",165],["T_VARIABLE","$address",165],["T_OBJECT_OPERATOR","->",165],["T_STRING","getQuote",165],"(",")",["T_OBJECT_OPERATOR","->",165],["T_STRING","getStore",165],"(",")",["T_OBJECT_OPERATOR","->",165],["T_STRING","convertPrice",165],"(",["T_VARIABLE","$rate",165],["T_OBJECT_OPERATOR","->",165],["T_STRING","getPrice",165],"(",")",",",["T_WHITESPACE"," ",165],["T_STRING","false",165],")",";",["T_WHITESPACE","\n                    ",165],["T_VARIABLE","$this",166],["T_OBJECT_OPERATOR","->",166],["T_STRING","_setAmount",166],"(",["T_VARIABLE","$amountPrice",166],")",";",["T_WHITESPACE","\n                    ",166],["T_VARIABLE","$this",167],["T_OBJECT_OPERATOR","->",167],["T_STRING","_setBaseAmount",167],"(",["T_VARIABLE","$rate",167],["T_OBJECT_OPERATOR","->",167],["T_STRING","getPrice",167],"(",")",")",";",["T_WHITESPACE","\n                    ",167],["T_VARIABLE","$shippingDescription",168],["T_WHITESPACE"," ",168],"=",["T_WHITESPACE"," ",168],["T_VARIABLE","$rate",168],["T_OBJECT_OPERATOR","->",168],["T_STRING","getCarrierTitle",168],"(",")",["T_WHITESPACE"," ",168],".",["T_WHITESPACE"," ",168],["T_CONSTANT_ENCAPSED_STRING","' - '",168],["T_WHITESPACE"," ",168],".",["T_WHITESPACE"," ",168],["T_VARIABLE","$rate",168],["T_OBJECT_OPERATOR","->",168],["T_STRING","getMethodTitle",168],"(",")",";",["T_WHITESPACE","\n                    ",168],["T_VARIABLE","$address",169],["T_OBJECT_OPERATOR","->",169],["T_STRING","setShippingDescription",169],"(",["T_STRING","trim",169],"(",["T_VARIABLE","$shippingDescription",169],",",["T_WHITESPACE"," ",169],["T_CONSTANT_ENCAPSED_STRING","' -'",169],")",")",";",["T_WHITESPACE","\n                    ",169],["T_BREAK","break",170],";",["T_WHITESPACE","\n                ",170],"}",["T_WHITESPACE","\n            ",171],"}",["T_WHITESPACE","\n        ",172],"}",["T_WHITESPACE","\n\n        ",173],["T_RETURN","return",175],["T_WHITESPACE"," ",175],["T_VARIABLE","$this",175],";",["T_WHITESPACE","\n    ",175],"}",["T_WHITESPACE","\n\n    ",176],["T_DOC_COMMENT","\/**\n     * Add shipping totals information to address object\n     *\n     * @param   Mage_Sales_Model_Quote_Address $address\n     * @return  Mage_Sales_Model_Quote_Address_Total_Shipping\n     *\/",178],["T_WHITESPACE","\n    ",183],["T_PUBLIC","public",184],["T_WHITESPACE"," ",184],["T_FUNCTION","function",184],["T_WHITESPACE"," ",184],["T_STRING","fetch",184],"(",["T_STRING","Mage_Sales_Model_Quote_Address",184],["T_WHITESPACE"," ",184],["T_VARIABLE","$address",184],")",["T_WHITESPACE","\n    ",184],"{",["T_WHITESPACE","\n        ",185],["T_VARIABLE","$amount",186],["T_WHITESPACE"," ",186],"=",["T_WHITESPACE"," ",186],["T_VARIABLE","$address",186],["T_OBJECT_OPERATOR","->",186],["T_STRING","getShippingAmount",186],"(",")",";",["T_WHITESPACE","\n        ",186],["T_IF","if",187],["T_WHITESPACE"," ",187],"(",["T_VARIABLE","$amount",187],["T_WHITESPACE"," ",187],["T_IS_NOT_EQUAL","!=",187],["T_WHITESPACE"," ",187],["T_LNUMBER","0",187],["T_WHITESPACE"," ",187],["T_BOOLEAN_OR","||",187],["T_WHITESPACE"," ",187],["T_VARIABLE","$address",187],["T_OBJECT_OPERATOR","->",187],["T_STRING","getShippingDescription",187],"(",")",")",["T_WHITESPACE"," ",187],"{",["T_WHITESPACE","\n            ",187],["T_VARIABLE","$title",188],["T_WHITESPACE"," ",188],"=",["T_WHITESPACE"," ",188],["T_STRING","Mage",188],["T_DOUBLE_COLON","::",188],["T_STRING","helper",188],"(",["T_CONSTANT_ENCAPSED_STRING","'sales'",188],")",["T_OBJECT_OPERATOR","->",188],["T_STRING","__",188],"(",["T_CONSTANT_ENCAPSED_STRING","'Shipping & Handling'",188],")",";",["T_WHITESPACE","\n            ",188],["T_IF","if",189],["T_WHITESPACE"," ",189],"(",["T_VARIABLE","$address",189],["T_OBJECT_OPERATOR","->",189],["T_STRING","getShippingDescription",189],"(",")",")",["T_WHITESPACE"," ",189],"{",["T_WHITESPACE","\n                ",189],["T_VARIABLE","$title",190],["T_WHITESPACE"," ",190],["T_CONCAT_EQUAL",".=",190],["T_WHITESPACE"," ",190],["T_CONSTANT_ENCAPSED_STRING","' ('",190],["T_WHITESPACE"," ",190],".",["T_WHITESPACE"," ",190],["T_VARIABLE","$address",190],["T_OBJECT_OPERATOR","->",190],["T_STRING","getShippingDescription",190],"(",")",["T_WHITESPACE"," ",190],".",["T_WHITESPACE"," ",190],["T_CONSTANT_ENCAPSED_STRING","')'",190],";",["T_WHITESPACE","\n            ",190],"}",["T_WHITESPACE","\n            ",191],["T_VARIABLE","$address",192],["T_OBJECT_OPERATOR","->",192],["T_STRING","addTotal",192],"(",["T_ARRAY","array",192],"(",["T_WHITESPACE","\n                ",192],["T_CONSTANT_ENCAPSED_STRING","'code'",193],["T_WHITESPACE"," ",193],["T_DOUBLE_ARROW","=>",193],["T_WHITESPACE"," ",193],["T_VARIABLE","$this",193],["T_OBJECT_OPERATOR","->",193],["T_STRING","getCode",193],"(",")",",",["T_WHITESPACE","\n                ",193],["T_CONSTANT_ENCAPSED_STRING","'title'",194],["T_WHITESPACE"," ",194],["T_DOUBLE_ARROW","=>",194],["T_WHITESPACE"," ",194],["T_VARIABLE","$title",194],",",["T_WHITESPACE","\n                ",194],["T_CONSTANT_ENCAPSED_STRING","'value'",195],["T_WHITESPACE"," ",195],["T_DOUBLE_ARROW","=>",195],["T_WHITESPACE"," ",195],["T_VARIABLE","$address",195],["T_OBJECT_OPERATOR","->",195],["T_STRING","getShippingAmount",195],"(",")",["T_WHITESPACE","\n            ",195],")",")",";",["T_WHITESPACE","\n        ",196],"}",["T_WHITESPACE","\n        ",197],["T_RETURN","return",198],["T_WHITESPACE"," ",198],["T_VARIABLE","$this",198],";",["T_WHITESPACE","\n    ",198],"}",["T_WHITESPACE","\n\n    ",199],["T_DOC_COMMENT","\/**\n     * Get Shipping label\n     *\n     * @return string\n     *\/",201],["T_WHITESPACE","\n    ",205],["T_PUBLIC","public",206],["T_WHITESPACE"," ",206],["T_FUNCTION","function",206],["T_WHITESPACE"," ",206],["T_STRING","getLabel",206],"(",")",["T_WHITESPACE","\n    ",206],"{",["T_WHITESPACE","\n        ",207],["T_RETURN","return",208],["T_WHITESPACE"," ",208],["T_STRING","Mage",208],["T_DOUBLE_COLON","::",208],["T_STRING","helper",208],"(",["T_CONSTANT_ENCAPSED_STRING","'sales'",208],")",["T_OBJECT_OPERATOR","->",208],["T_STRING","__",208],"(",["T_CONSTANT_ENCAPSED_STRING","'Shipping'",208],")",";",["T_WHITESPACE","\n    ",208],"}",["T_WHITESPACE","\n",209],"}",["T_WHITESPACE","\n",210]]
[["T_OPEN_TAG","<?php\n",1],["T_DOC_COMMENT","\/**\n * Magento\n *\n * NOTICE OF LICENSE\n *\n * This source file is subject to the Open Software License (OSL 3.0)\n * that is bundled with this package in the file LICENSE.txt.\n * It is also available through the world-wide-web at this URL:\n * http:\/\/opensource.org\/licenses\/osl-3.0.php\n * If you did not receive a copy of the license and are unable to\n * obtain it through the world-wide-web, please send an email\n * to license@magento.com so we can send you a copy immediately.\n *\n * DISCLAIMER\n *\n * Do not edit or add to this file if you wish to upgrade Magento to newer\n * versions in the future. If you wish to customize Magento for your\n * needs please refer to http:\/\/www.magento.com for more information.\n *\n * @category    Mage\n * @package     Mage_Sales\n * @copyright  Copyright (c) 2006-2016 X.commerce, Inc. and affiliates (http:\/\/www.magento.com)\n * @license    http:\/\/opensource.org\/licenses\/osl-3.0.php  Open Software License (OSL 3.0)\n *\/",2],["T_WHITESPACE","\n\n",25],["T_VARIABLE","$installer",27],["T_WHITESPACE"," ",27],"=",["T_WHITESPACE"," ",27],["T_VARIABLE","$this",27],";",["T_WHITESPACE","\n",27],["T_COMMENT","\/* @var $installer Mage_Sales_Model_Entity_Setup *\/",28],["T_WHITESPACE","\n",28],["T_VARIABLE","$installer",29],["T_OBJECT_OPERATOR","->",29],["T_STRING","startSetup",29],"(",")",";",["T_WHITESPACE","\n",29],["T_VARIABLE","$installer",30],["T_OBJECT_OPERATOR","->",30],["T_STRING","run",30],"(","\"",["T_ENCAPSED_AND_WHITESPACE","\nCREATE TABLE `",30],["T_CURLY_OPEN","{",31],["T_VARIABLE","$installer",31],["T_OBJECT_OPERATOR","->",31],["T_STRING","getTable",31],"(",["T_CONSTANT_ENCAPSED_STRING","'sales_flat_quote'",31],")","}",["T_ENCAPSED_AND_WHITESPACE","` (\n    `entity_id` int(10) unsigned NOT NULL auto_increment,\n    `store_id` smallint(5) unsigned NOT NULL default '0',\n    `created_at` datetime NOT NULL default '0000-00-00 00:00:00',\n    `updated_at` datetime NOT NULL default '0000-00-00 00:00:00',\n    `converted_at` datetime NOT NULL default '0000-00-00 00:00:00',\n\n    `is_active` tinyint(1) unsigned default '1',\n    `is_virtual` tinyint(1) unsigned default '0',\n    `is_multi_shipping` tinyint(1) unsigned default '0',\n\n    `items_count` int(10) unsigned default '0',\n    `items_qty` decimal(12,4) default '0.0000',\n\n    `orig_order_id` int(10) unsigned default '0',\n\n    `store_to_base_rate` decimal(12,4) default '0.0000',\n    `store_to_quote_rate` decimal(12,4) default '0.0000',\n    `base_currency_code` varchar(255) default NULL,\n    `store_currency_code` varchar(255) default NULL,\n    `quote_currency_code` varchar(255) default NULL,\n\n    `grand_total` decimal(12,4) default '0.0000',\n    `base_grand_total` decimal(12,4) default '0.0000',\n\n    `checkout_method` varchar(255) default NULL,\n\n    `customer_id` int(10) unsigned default '0',\n    `customer_tax_class_id` int(10) unsigned default '0',\n    `customer_group_id` int(10) unsigned default '0',\n    `customer_email` varchar(255) default NULL,\n    `customer_prefix` varchar(40) default NULL,\n    `customer_firstname` varchar(255) default NULL,\n    `customer_middlename` varchar(40) default NULL,\n    `customer_lastname` varchar(255) default NULL,\n    `customer_suffix` varchar(40) default NULL,\n    `customer_dob` datetime default NULL,\n    `customer_note` varchar(255) default NULL,\n    `customer_note_notify` tinyint(1) unsigned default '1',\n    `customer_is_guest` tinyint(1) unsigned default '0',\n\n    `remote_ip` varchar(32) default NULL,\n    `applied_rule_ids` varchar(255) default NULL,\n    `reserved_order_id` varchar(64) default '',\n    `password_hash` varchar(255) default NULL,\n    `coupon_code` varchar(255) default NULL,\n    PRIMARY KEY  (`entity_id`),\n    KEY `FK_SALES_QUOTE_STORE` (`store_id`),\n    KEY `IDX_CUSTOMER` (`customer_id`,`store_id`,`is_active`)\n) ENGINE=InnoDB DEFAULT CHARSET=utf8;\n\n\nCREATE TABLE `",31],["T_CURLY_OPEN","{",83],["T_VARIABLE","$installer",83],["T_OBJECT_OPERATOR","->",83],["T_STRING","getTable",83],"(",["T_CONSTANT_ENCAPSED_STRING","'sales_flat_quote_address'",83],")","}",["T_ENCAPSED_AND_WHITESPACE","` (\n    `address_id` int(10) unsigned NOT NULL auto_increment,\n    `quote_id` int(10) unsigned NOT NULL default '0',\n    `created_at` datetime NOT NULL default '0000-00-00 00:00:00',\n    `updated_at` datetime NOT NULL default '0000-00-00 00:00:00',\n\n    `customer_id` int(10) unsigned default NULL,\n    `save_in_address_book` tinyint(1) default '0',\n    `customer_address_id` int(10) unsigned default NULL,\n    `address_type` varchar(255) default NULL,\n    `email` varchar(255) default NULL,\n    `prefix` varchar(40) default NULL,\n    `firstname` varchar(255) default NULL,\n    `middlename` varchar(40) default NULL,\n    `lastname` varchar(255) default NULL,\n    `suffix` varchar(40) default NULL,\n    `company` varchar(255) default NULL,\n    `street` varchar(255) default NULL,\n    `city` varchar(255) default NULL,\n    `region` varchar(255) default NULL,\n    `region_id` int(10) unsigned default NULL,\n    `postcode` varchar(255) default NULL,\n    `country_id` varchar(255) default NULL,\n    `telephone` varchar(255) default NULL,\n    `fax` varchar(255) default NULL,\n\n    `same_as_billing` tinyint(1) unsigned NOT NULL default '0',\n    `free_shipping` tinyint(1) unsigned NOT NULL default '0',\n    `collect_shipping_rates` tinyint(1) unsigned NOT NULL default '0',\n    `shipping_method` varchar(255) NOT NULL default '',\n    `shipping_description` varchar(255) NOT NULL default '',\n    `weight` decimal(12,4) NOT NULL default '0.0000',\n\n    `subtotal` decimal(12,4) NOT NULL default '0.0000',\n    `base_subtotal` decimal(12,4) NOT NULL default '0.0000',\n    `subtotal_with_discount` decimal(12,4) NOT NULL default '0.0000',\n    `base_subtotal_with_discount` decimal(12,4) NOT NULL default '0.0000',\n    `tax_amount` decimal(12,4) NOT NULL default '0.0000',\n    `base_tax_amount` decimal(12,4) NOT NULL default '0.0000',\n    `shipping_amount` decimal(12,4) NOT NULL default '0.0000',\n    `base_shipping_amount` decimal(12,4) NOT NULL default '0.0000',\n    `shipping_tax_amount` decimal(12,4) default NULL,\n    `base_shipping_tax_amount` decimal(12,4) default NULL,\n    `discount_amount` decimal(12,4) NOT NULL default '0.0000',\n    `base_discount_amount` decimal(12,4) NOT NULL default '0.0000',\n    `grand_total` decimal(12,4) NOT NULL default '0.0000',\n    `base_grand_total` decimal(12,4) NOT NULL default '0.0000',\n\n    `customer_notes` text,\n    PRIMARY KEY  (`address_id`),\n    KEY `FK_SALES_QUOTE_ADDRESS_SALES_QUOTE` (`quote_id`),\n    CONSTRAINT `FK_SALES_QUOTE_ADDRESS_SALES_QUOTE` FOREIGN KEY (`quote_id`) REFERENCES `",83],["T_CURLY_OPEN","{",134],["T_VARIABLE","$installer",134],["T_OBJECT_OPERATOR","->",134],["T_STRING","getTable",134],"(",["T_CONSTANT_ENCAPSED_STRING","'sales_flat_quote'",134],")","}",["T_ENCAPSED_AND_WHITESPACE","` (`entity_id`) ON DELETE CASCADE ON UPDATE CASCADE\n) ENGINE=InnoDB DEFAULT CHARSET=utf8;\n\nCREATE TABLE `",134],["T_CURLY_OPEN","{",137],["T_VARIABLE","$installer",137],["T_OBJECT_OPERATOR","->",137],["T_STRING","getTable",137],"(",["T_CONSTANT_ENCAPSED_STRING","'sales_flat_quote_address_item'",137],")","}",["T_ENCAPSED_AND_WHITESPACE","` (\n    `address_item_id` int(10) unsigned NOT NULL auto_increment,\n    `quote_address_id` int(10) unsigned NOT NULL default '0',\n    `quote_item_id` int(10) unsigned NOT NULL default '0',\n    `created_at` datetime NOT NULL default '0000-00-00 00:00:00',\n    `updated_at` datetime NOT NULL default '0000-00-00 00:00:00',\n\n    `applied_rule_ids` text,\n    `additional_data` text,\n    `weight` decimal(12,4) default '0.0000',\n    `qty` decimal(12,4) NOT NULL default '0.0000',\n    `discount_amount` decimal(12,4) default '0.0000',\n    `tax_amount` decimal(12,4) default '0.0000',\n\n    `row_total` decimal(12,4) NOT NULL default '0.0000',\n    `base_row_total` decimal(12,4) NOT NULL default '0.0000',\n    `row_total_with_discount` decimal(12,4) default '0.0000',\n    `base_discount_amount` decimal(12,4) default '0.0000',\n    `base_tax_amount` decimal(12,4) default '0.0000',\n    `row_weight` decimal(12,4) default '0.0000',\n    PRIMARY KEY  (`address_item_id`),\n    KEY `FK_QUOTE_ADDRESS_ITEM_QUOTE_ADDRESS` (`quote_address_id`),\n    KEY `FK_SALES_QUOTE_ADDRESS_ITEM_QUOTE_ITEM` (`quote_item_id`),\n    CONSTRAINT `FK_QUOTE_ADDRESS_ITEM_QUOTE_ADDRESS` FOREIGN KEY (`quote_address_id`) REFERENCES `",137],["T_CURLY_OPEN","{",160],["T_VARIABLE","$installer",160],["T_OBJECT_OPERATOR","->",160],["T_STRING","getTable",160],"(",["T_CONSTANT_ENCAPSED_STRING","'sales_flat_quote_address'",160],")","}",["T_ENCAPSED_AND_WHITESPACE","` (`address_id`) ON DELETE CASCADE ON UPDATE CASCADE,\n    CONSTRAINT `FK_SALES_QUOTE_ADDRESS_ITEM_QUOTE_ITEM` FOREIGN KEY (`quote_item_id`) REFERENCES `",160],["T_CURLY_OPEN","{",161],["T_VARIABLE","$installer",161],["T_OBJECT_OPERATOR","->",161],["T_STRING","getTable",161],"(",["T_CONSTANT_ENCAPSED_STRING","'sales_flat_quote_item'",161],")","}",["T_ENCAPSED_AND_WHITESPACE","` (`item_id`)\n) ENGINE=InnoDB DEFAULT CHARSET=utf8;\n\nCREATE TABLE `",161],["T_CURLY_OPEN","{",164],["T_VARIABLE","$installer",164],["T_OBJECT_OPERATOR","->",164],["T_STRING","getTable",164],"(",["T_CONSTANT_ENCAPSED_STRING","'sales_flat_quote_item'",164],")","}",["T_ENCAPSED_AND_WHITESPACE","` (\n    `item_id` int(10) unsigned NOT NULL auto_increment,\n    `quote_id` int(10) unsigned NOT NULL default '0',\n    `created_at` datetime NOT NULL default '0000-00-00 00:00:00',\n    `updated_at` datetime NOT NULL default '0000-00-00 00:00:00',\n\n    `product_id` int(10) unsigned default NULL,\n    `super_product_id` int(10) unsigned default NULL,\n    `parent_product_id` int(10) unsigned default NULL,\n    `is_virtual` tinyint(1) unsigned default NULL,\n\n    `sku` varchar(255) NOT NULL default '',\n    `name` varchar(255) default NULL,\n    `description` text,\n    `applied_rule_ids` text,\n    `additional_data` text,\n    `free_shipping` tinyint(1) unsigned NOT NULL default '0',\n    `is_qty_decimal` tinyint(1) unsigned default NULL,\n    `no_discount` tinyint(1) unsigned default '0',\n\n    `weight` decimal(12,4) default '0.0000',\n    `qty` decimal(12,4) NOT NULL default '0.0000',\n    `price` decimal(12,4) NOT NULL default '0.0000',\n    `base_price` decimal(12,4) NOT NULL default '0.0000',\n    `custom_price` decimal(12,4) default NULL,\n    `discount_percent` decimal(12,4) default '0.0000',\n    `discount_amount` decimal(12,4) default '0.0000',\n    `base_discount_amount` decimal(12,4) default '0.0000',\n    `tax_percent` decimal(12,4) default '0.0000',\n    `tax_amount` decimal(12,4) default '0.0000',\n    `base_tax_amount` decimal(12,4) default '0.0000',\n    `row_total` decimal(12,4) NOT NULL default '0.0000',\n    `base_row_total` decimal(12,4) NOT NULL default '0.0000',\n    `row_total_with_discount` decimal(12,4) default '0.0000',\n    `row_weight` decimal(12,4) default '0.0000',\n    PRIMARY KEY  (`item_id`),\n    KEY `FK_SALES_QUOTE_ITEM_SALES_QUOTE` (`quote_id`),\n    CONSTRAINT `FK_SALES_QUOTE_ITEM_SALES_QUOTE` FOREIGN KEY (`quote_id`) REFERENCES `",164],["T_CURLY_OPEN","{",201],["T_VARIABLE","$installer",201],["T_OBJECT_OPERATOR","->",201],["T_STRING","getTable",201],"(",["T_CONSTANT_ENCAPSED_STRING","'sales_flat_quote'",201],")","}",["T_ENCAPSED_AND_WHITESPACE","` (`entity_id`) ON DELETE CASCADE ON UPDATE CASCADE\n) ENGINE=InnoDB DEFAULT CHARSET=utf8;\n\nCREATE TABLE `",201],["T_CURLY_OPEN","{",204],["T_VARIABLE","$installer",204],["T_OBJECT_OPERATOR","->",204],["T_STRING","getTable",204],"(",["T_CONSTANT_ENCAPSED_STRING","'sales_flat_quote_item_option'",204],")","}",["T_ENCAPSED_AND_WHITESPACE","` (\n    `option_id` int(10) unsigned NOT NULL auto_increment,\n    `item_id` int(10) unsigned NOT NULL,\n    `product_id` int(10) unsigned NOT NULL,\n    `code` varchar(255) NOT NULL,\n    `value` text NOT NULL,\n    PRIMARY KEY  (`option_id`),\n    KEY `FK_SALES_QUOTE_ITEM_OPTION_ITEM_ID` (`item_id`),\n    CONSTRAINT `FK_SALES_QUOTE_ITEM_OPTION_ITEM_ID` FOREIGN KEY (`item_id`) REFERENCES `",204],["T_CURLY_OPEN","{",212],["T_VARIABLE","$installer",212],["T_OBJECT_OPERATOR","->",212],["T_STRING","getTable",212],"(",["T_CONSTANT_ENCAPSED_STRING","'sales_flat_quote_item'",212],")","}",["T_ENCAPSED_AND_WHITESPACE","` (`item_id`) ON DELETE CASCADE ON UPDATE CASCADE\n) ENGINE=InnoDB DEFAULT CHARSET=utf8 COMMENT='Additional options for quote item';\n\nCREATE TABLE `",212],["T_CURLY_OPEN","{",215],["T_VARIABLE","$installer",215],["T_OBJECT_OPERATOR","->",215],["T_STRING","getTable",215],"(",["T_CONSTANT_ENCAPSED_STRING","'sales_flat_quote_payment'",215],")","}",["T_ENCAPSED_AND_WHITESPACE","` (\n    `payment_id` int(10) unsigned NOT NULL auto_increment,\n    `quote_id` int(10) unsigned NOT NULL default '0',\n    `created_at` datetime NOT NULL default '0000-00-00 00:00:00',\n    `updated_at` datetime NOT NULL default '0000-00-00 00:00:00',\n    `method` varchar(255) default '',\n\n    `cc_type` varchar(255) default '',\n    `cc_number_enc` varchar(255) default '',\n    `cc_last4` varchar(255) default '',\n    `cc_cid_enc` varchar(255) default '',\n    `cc_owner` varchar(255) default '',\n    `cc_exp_month` tinyint(2) unsigned default '0',\n    `cc_exp_year` smallint(4) unsigned default '0',\n    `cc_ss_owner` varchar(255) default '',\n    `cc_ss_start_month` tinyint(2) unsigned default '0',\n    `cc_ss_start_year` smallint(4) unsigned default '0',\n\n    `cybersource_token` varchar(255) default '',\n    `paypal_correlation_id` varchar(255) default '',\n    `paypal_payer_id` varchar(255) default '',\n    `paypal_payer_status` varchar(255) default '',\n    `po_number` varchar(255) default '',\n    PRIMARY KEY  (`payment_id`),\n    KEY `FK_SALES_QUOTE_PAYMENT_SALES_QUOTE` (`quote_id`),\n    CONSTRAINT `FK_SALES_QUOTE_PAYMENT_SALES_QUOTE` FOREIGN KEY (`quote_id`) REFERENCES `",215],["T_CURLY_OPEN","{",240],["T_VARIABLE","$installer",240],["T_OBJECT_OPERATOR","->",240],["T_STRING","getTable",240],"(",["T_CONSTANT_ENCAPSED_STRING","'sales_flat_quote'",240],")","}",["T_ENCAPSED_AND_WHITESPACE","` (`entity_id`) ON DELETE CASCADE ON UPDATE CASCADE\n) ENGINE=InnoDB DEFAULT CHARSET=utf8;\n\nCREATE TABLE `",240],["T_CURLY_OPEN","{",243],["T_VARIABLE","$installer",243],["T_OBJECT_OPERATOR","->",243],["T_STRING","getTable",243],"(",["T_CONSTANT_ENCAPSED_STRING","'sales_flat_quote_shipping_rate'",243],")","}",["T_ENCAPSED_AND_WHITESPACE","` (\n    `rate_id` int(10) unsigned NOT NULL auto_increment,\n    `address_id` int(10) unsigned NOT NULL default '0',\n    `created_at` datetime NOT NULL default '0000-00-00 00:00:00',\n    `updated_at` datetime NOT NULL default '0000-00-00 00:00:00',\n\n    `carrier` varchar(255) default NULL,\n    `carrier_title` varchar(255) default NULL,\n    `code` varchar(255) default NULL,\n    `method` varchar(255) default NULL,\n    `method_description` text,\n    `price` decimal(12,4) NOT NULL default '0.0000',\n    PRIMARY KEY  (`rate_id`),\n    KEY `FK_SALES_QUOTE_SHIPPING_RATE_ADDRESS` (`address_id`),\n    CONSTRAINT `FK_SALES_QUOTE_SHIPPING_RATE_ADDRESS` FOREIGN KEY (`address_id`) REFERENCES `",243],["T_CURLY_OPEN","{",257],["T_VARIABLE","$installer",257],["T_OBJECT_OPERATOR","->",257],["T_STRING","getTable",257],"(",["T_CONSTANT_ENCAPSED_STRING","'sales_flat_quote_address'",257],")","}",["T_ENCAPSED_AND_WHITESPACE","` (`address_id`) ON DELETE CASCADE ON UPDATE CASCADE\n) ENGINE=InnoDB DEFAULT CHARSET=utf8;\n\nDELETE FROM `",257],["T_CURLY_OPEN","{",260],["T_VARIABLE","$installer",260],["T_OBJECT_OPERATOR","->",260],["T_STRING","getTable",260],"(",["T_CONSTANT_ENCAPSED_STRING","'log_quote'",260],")","}",["T_ENCAPSED_AND_WHITESPACE","`;\n",260],"\"",")",";",["T_WHITESPACE","\n\n",261],["T_VARIABLE","$installer",263],["T_OBJECT_OPERATOR","->",263],["T_STRING","addAttribute",263],"(",["T_CONSTANT_ENCAPSED_STRING","'order_item'",263],",",["T_WHITESPACE"," ",263],["T_CONSTANT_ENCAPSED_STRING","'is_virtual'",263],",",["T_WHITESPACE"," ",263],["T_ARRAY","array",263],"(",["T_CONSTANT_ENCAPSED_STRING","'type'",263],["T_DOUBLE_ARROW","=>",263],["T_CONSTANT_ENCAPSED_STRING","'int'",263],")",")",";",["T_WHITESPACE","\n",263],["T_VARIABLE","$installer",264],["T_OBJECT_OPERATOR","->",264],["T_STRING","endSetup",264],"(",")",";",["T_WHITESPACE","\n\n",264],["T_DOC_COMMENT","\/**\n * Copy old quotes\n *\/",266],["T_WHITESPACE","\n",268],"@",["T_STRING","set_time_limit",269],"(",["T_LNUMBER","0",269],")",";",["T_WHITESPACE","\n\n",269],["T_VARIABLE","$quoteFields",271],["T_WHITESPACE"," ",271],"=",["T_WHITESPACE"," ",271],["T_STRING","array_keys",271],"(",["T_VARIABLE","$installer",271],["T_OBJECT_OPERATOR","->",271],["T_STRING","getConnection",271],"(",")",["T_OBJECT_OPERATOR","->",271],["T_STRING","describeTable",271],"(",["T_VARIABLE","$installer",271],["T_OBJECT_OPERATOR","->",271],["T_STRING","getTable",271],"(",["T_CONSTANT_ENCAPSED_STRING","'sales_flat_quote'",271],")",")",")",";",["T_WHITESPACE","\n",271],["T_VARIABLE","$itemFields",272],["T_WHITESPACE","  ",272],"=",["T_WHITESPACE"," ",272],["T_STRING","array_keys",272],"(",["T_VARIABLE","$installer",272],["T_OBJECT_OPERATOR","->",272],["T_STRING","getConnection",272],"(",")",["T_OBJECT_OPERATOR","->",272],["T_STRING","describeTable",272],"(",["T_VARIABLE","$installer",272],["T_OBJECT_OPERATOR","->",272],["T_STRING","getTable",272],"(",["T_CONSTANT_ENCAPSED_STRING","'sales_flat_quote_item'",272],")",")",")",";",["T_WHITESPACE","\n\n",272],["T_VARIABLE","$quoteRows",274],["T_WHITESPACE"," ",274],"=",["T_WHITESPACE"," ",274],["T_ARRAY","array",274],"(",")",";",["T_WHITESPACE","\n",274],["T_VARIABLE","$query",275],["T_WHITESPACE"," ",275],"=",["T_WHITESPACE"," ",275],["T_VARIABLE","$installer",275],["T_OBJECT_OPERATOR","->",275],["T_STRING","getConnection",275],"(",")",["T_OBJECT_OPERATOR","->",275],["T_STRING","query",275],"(",["T_WHITESPACE","\n    ",275],["T_VARIABLE","$installer",276],["T_OBJECT_OPERATOR","->",276],["T_STRING","getConnection",276],"(",")",["T_OBJECT_OPERATOR","->",276],["T_STRING","select",276],"(",")",["T_WHITESPACE","\n        ",276],["T_OBJECT_OPERATOR","->",277],["T_STRING","from",277],"(",["T_VARIABLE","$installer",277],["T_OBJECT_OPERATOR","->",277],["T_STRING","getTable",277],"(",["T_CONSTANT_ENCAPSED_STRING","'sales_quote'",277],")",",",["T_WHITESPACE"," ",277],["T_CONSTANT_ENCAPSED_STRING","'entity_id'",277],")",["T_WHITESPACE","\n",277],")",";",["T_WHITESPACE","\n",278],["T_WHILE","while",279],["T_WHITESPACE"," ",279],"(",["T_VARIABLE","$row",279],["T_WHITESPACE"," ",279],"=",["T_WHITESPACE"," ",279],["T_VARIABLE","$query",279],["T_OBJECT_OPERATOR","->",279],["T_STRING","fetch",279],"(",")",")",["T_WHITESPACE"," ",279],"{",["T_WHITESPACE","\n    ",279],["T_VARIABLE","$quoteRows",280],"[","]",["T_WHITESPACE"," ",280],"=",["T_WHITESPACE"," ",280],["T_VARIABLE","$row",280],"[",["T_CONSTANT_ENCAPSED_STRING","'entity_id'",280],"]",";",["T_WHITESPACE","\n",280],"}",["T_WHITESPACE","\n\n",281],["T_FOREACH","foreach",283],["T_WHITESPACE"," ",283],"(",["T_VARIABLE","$quoteRows",283],["T_WHITESPACE"," ",283],["T_AS","as",283],["T_WHITESPACE"," ",283],["T_VARIABLE","$oldQuoteId",283],")",["T_WHITESPACE"," ",283],"{",["T_WHITESPACE","\n    ",283],["T_VARIABLE","$quoteInfo",284],["T_WHITESPACE"," ",284],"=",["T_WHITESPACE"," ",284],["T_VARIABLE","$installer",284],["T_OBJECT_OPERATOR","->",284],["T_STRING","getConnection",284],"(",")",["T_OBJECT_OPERATOR","->",284],["T_STRING","fetchRow",284],"(",["T_WHITESPACE","\n        ",284],["T_VARIABLE","$installer",285],["T_OBJECT_OPERATOR","->",285],["T_STRING","getConnection",285],"(",")",["T_OBJECT_OPERATOR","->",285],["T_STRING","select",285],"(",")",["T_WHITESPACE","\n            ",285],["T_OBJECT_OPERATOR","->",286],["T_STRING","from",286],"(",["T_VARIABLE","$installer",286],["T_OBJECT_OPERATOR","->",286],["T_STRING","getTable",286],"(",["T_CONSTANT_ENCAPSED_STRING","'sales_quote'",286],")",")",["T_WHITESPACE","\n            ",286],["T_OBJECT_OPERATOR","->",287],["T_STRING","where",287],"(",["T_CONSTANT_ENCAPSED_STRING","'entity_id=?'",287],",",["T_WHITESPACE"," ",287],["T_VARIABLE","$oldQuoteId",287],")",["T_WHITESPACE","\n    ",287],")",";",["T_WHITESPACE","\n\n    ",288],["T_VARIABLE","$quoteItems",290],["T_WHITESPACE"," ",290],"=",["T_WHITESPACE"," ",290],["T_VARIABLE","$installer",290],["T_OBJECT_OPERATOR","->",290],["T_STRING","getConnection",290],"(",")",["T_OBJECT_OPERATOR","->",290],["T_STRING","fetchAll",290],"(",["T_WHITESPACE","\n        ",290],["T_VARIABLE","$installer",291],["T_OBJECT_OPERATOR","->",291],["T_STRING","getConnection",291],"(",")",["T_OBJECT_OPERATOR","->",291],["T_STRING","select",291],"(",")",["T_WHITESPACE","\n            ",291],["T_OBJECT_OPERATOR","->",292],["T_STRING","from",292],"(",["T_VARIABLE","$installer",292],["T_OBJECT_OPERATOR","->",292],["T_STRING","getTable",292],"(",["T_CONSTANT_ENCAPSED_STRING","'sales_quote_item'",292],")",")",["T_WHITESPACE","\n            ",292],["T_OBJECT_OPERATOR","->",293],["T_STRING","where",293],"(",["T_CONSTANT_ENCAPSED_STRING","'parent_id=?'",293],",",["T_WHITESPACE"," ",293],["T_VARIABLE","$oldQuoteId",293],")",["T_WHITESPACE","\n    ",293],")",";",["T_WHITESPACE","\n\n    ",294],["T_IF","if",296],["T_WHITESPACE"," ",296],"(","!",["T_EMPTY","empty",296],"(",["T_VARIABLE","$quoteItems",296],")",")",["T_WHITESPACE"," ",296],"{",["T_WHITESPACE","\n        ",296],["T_UNSET","unset",297],"(",["T_VARIABLE","$quoteInfo",297],"[",["T_CONSTANT_ENCAPSED_STRING","'entity_id'",297],"]",")",";",["T_WHITESPACE","\n\n        ",297],["T_VARIABLE","$quoteData",299],["T_WHITESPACE"," ",299],"=",["T_WHITESPACE"," ",299],["T_ARRAY","array",299],"(",")",";",["T_WHITESPACE","\n        ",299],["T_FOREACH","foreach",300],["T_WHITESPACE"," ",300],"(",["T_VARIABLE","$quoteFields",300],["T_WHITESPACE"," ",300],["T_AS","as",300],["T_WHITESPACE"," ",300],["T_VARIABLE","$field",300],")",["T_WHITESPACE"," ",300],"{",["T_WHITESPACE","\n            ",300],["T_IF","if",301],["T_WHITESPACE"," ",301],"(",["T_ISSET","isset",301],"(",["T_VARIABLE","$quoteInfo",301],"[",["T_VARIABLE","$field",301],"]",")",")",["T_WHITESPACE"," ",301],"{",["T_WHITESPACE","\n                ",301],["T_VARIABLE","$quoteData",302],"[",["T_VARIABLE","$field",302],"]",["T_WHITESPACE"," ",302],"=",["T_WHITESPACE"," ",302],["T_VARIABLE","$quoteInfo",302],"[",["T_VARIABLE","$field",302],"]",";",["T_WHITESPACE","\n            ",302],"}",["T_WHITESPACE","\n        ",303],"}",["T_WHITESPACE","\n\n        ",304],["T_VARIABLE","$installer",306],["T_OBJECT_OPERATOR","->",306],["T_STRING","getConnection",306],"(",")",["T_OBJECT_OPERATOR","->",306],["T_STRING","insert",306],"(",["T_VARIABLE","$installer",306],["T_OBJECT_OPERATOR","->",306],["T_STRING","getTable",306],"(",["T_CONSTANT_ENCAPSED_STRING","'sales_flat_quote'",306],")",",",["T_WHITESPACE"," ",306],["T_VARIABLE","$quoteData",306],")",";",["T_WHITESPACE","\n        ",306],["T_VARIABLE","$quoteId",307],["T_WHITESPACE"," ",307],"=",["T_WHITESPACE"," ",307],["T_VARIABLE","$installer",307],["T_OBJECT_OPERATOR","->",307],["T_STRING","getConnection",307],"(",")",["T_OBJECT_OPERATOR","->",307],["T_STRING","lastInsertId",307],"(",")",";",["T_WHITESPACE","\n\n        ",307],["T_FOREACH","foreach",309],["T_WHITESPACE"," ",309],"(",["T_VARIABLE","$quoteItems",309],["T_WHITESPACE"," ",309],["T_AS","as",309],["T_WHITESPACE"," ",309],["T_VARIABLE","$itemInfo",309],")",["T_WHITESPACE"," ",309],"{",["T_WHITESPACE","\n            ",309],["T_VARIABLE","$itemData",310],["T_WHITESPACE"," ",310],"=",["T_WHITESPACE"," ",310],["T_ARRAY","array",310],"(",["T_WHITESPACE","\n                ",310],["T_CONSTANT_ENCAPSED_STRING","'quote_id'",311],["T_WHITESPACE"," ",311],["T_DOUBLE_ARROW","=>",311],["T_WHITESPACE"," ",311],["T_VARIABLE","$quoteId",311],["T_WHITESPACE","\n            ",311],")",";",["T_WHITESPACE","\n\n            ",312],["T_FOREACH","foreach",314],["T_WHITESPACE"," ",314],"(",["T_VARIABLE","$itemFields",314],["T_WHITESPACE"," ",314],["T_AS","as",314],["T_WHITESPACE"," ",314],["T_VARIABLE","$field",314],")",["T_WHITESPACE"," ",314],"{",["T_WHITESPACE","\n                ",314],["T_IF","if",315],["T_WHITESPACE"," ",315],"(",["T_ISSET","isset",315],"(",["T_VARIABLE","$itemInfo",315],"[",["T_VARIABLE","$field",315],"]",")",")",["T_WHITESPACE"," ",315],"{",["T_WHITESPACE","\n                    ",315],["T_VARIABLE","$itemData",316],"[",["T_VARIABLE","$field",316],"]",["T_WHITESPACE"," ",316],"=",["T_WHITESPACE"," ",316],["T_VARIABLE","$itemInfo",316],"[",["T_VARIABLE","$field",316],"]",";",["T_WHITESPACE","\n                ",316],"}",["T_WHITESPACE","\n            ",317],"}",["T_WHITESPACE","\n            ",318],["T_VARIABLE","$installer",319],["T_OBJECT_OPERATOR","->",319],["T_STRING","getConnection",319],"(",")",["T_OBJECT_OPERATOR","->",319],["T_STRING","insert",319],"(",["T_VARIABLE","$installer",319],["T_OBJECT_OPERATOR","->",319],["T_STRING","getTable",319],"(",["T_CONSTANT_ENCAPSED_STRING","'sales_flat_quote_item'",319],")",",",["T_WHITESPACE"," ",319],["T_VARIABLE","$itemData",319],")",";",["T_WHITESPACE","\n        ",319],"}",["T_WHITESPACE","\n    ",320],"}",["T_WHITESPACE","\n",321],"}",["T_WHITESPACE","\n\n",322],["T_VARIABLE","$installer",324],["T_OBJECT_OPERATOR","->",324],["T_STRING","startSetup",324],"(",")",";",["T_WHITESPACE","\n",324],["T_VARIABLE","$installer",325],["T_OBJECT_OPERATOR","->",325],["T_STRING","run",325],"(","\"",["T_ENCAPSED_AND_WHITESPACE","\nDROP TABLE IF EXISTS ",325],["T_CURLY_OPEN","{",326],["T_VARIABLE","$this",326],["T_OBJECT_OPERATOR","->",326],["T_STRING","getTable",326],"(",["T_CONSTANT_ENCAPSED_STRING","'sales_quote'",326],")","}",["T_ENCAPSED_AND_WHITESPACE",";\nDROP TABLE IF EXISTS ",326],["T_CURLY_OPEN","{",327],["T_VARIABLE","$this",327],["T_OBJECT_OPERATOR","->",327],["T_STRING","getTable",327],"(",["T_CONSTANT_ENCAPSED_STRING","'sales_quote_address'",327],")","}",["T_ENCAPSED_AND_WHITESPACE",";\nDROP TABLE IF EXISTS ",327],["T_CURLY_OPEN","{",328],["T_VARIABLE","$this",328],["T_OBJECT_OPERATOR","->",328],["T_STRING","getTable",328],"(",["T_CONSTANT_ENCAPSED_STRING","'sales_quote_address_decimal'",328],")","}",["T_ENCAPSED_AND_WHITESPACE",";\nDROP TABLE IF EXISTS ",328],["T_CURLY_OPEN","{",329],["T_VARIABLE","$this",329],["T_OBJECT_OPERATOR","->",329],["T_STRING","getTable",329],"(",["T_CONSTANT_ENCAPSED_STRING","'sales_quote_address_int'",329],")","}",["T_ENCAPSED_AND_WHITESPACE",";\nDROP TABLE IF EXISTS ",329],["T_CURLY_OPEN","{",330],["T_VARIABLE","$this",330],["T_OBJECT_OPERATOR","->",330],["T_STRING","getTable",330],"(",["T_CONSTANT_ENCAPSED_STRING","'sales_quote_address_text'",330],")","}",["T_ENCAPSED_AND_WHITESPACE",";\nDROP TABLE IF EXISTS ",330],["T_CURLY_OPEN","{",331],["T_VARIABLE","$this",331],["T_OBJECT_OPERATOR","->",331],["T_STRING","getTable",331],"(",["T_CONSTANT_ENCAPSED_STRING","'sales_quote_address_varchar'",331],")","}",["T_ENCAPSED_AND_WHITESPACE",";\nDROP TABLE IF EXISTS ",331],["T_CURLY_OPEN","{",332],["T_VARIABLE","$this",332],["T_OBJECT_OPERATOR","->",332],["T_STRING","getTable",332],"(",["T_CONSTANT_ENCAPSED_STRING","'sales_quote_decimal'",332],")","}",["T_ENCAPSED_AND_WHITESPACE",";\nDROP TABLE IF EXISTS ",332],["T_CURLY_OPEN","{",333],["T_VARIABLE","$this",333],["T_OBJECT_OPERATOR","->",333],["T_STRING","getTable",333],"(",["T_CONSTANT_ENCAPSED_STRING","'sales_quote_entity'",333],")","}",["T_ENCAPSED_AND_WHITESPACE",";\nDROP TABLE IF EXISTS ",333],["T_CURLY_OPEN","{",334],["T_VARIABLE","$this",334],["T_OBJECT_OPERATOR","->",334],["T_STRING","getTable",334],"(",["T_CONSTANT_ENCAPSED_STRING","'sales_quote_entity_datetime'",334],")","}",["T_ENCAPSED_AND_WHITESPACE",";\nDROP TABLE IF EXISTS ",334],["T_CURLY_OPEN","{",335],["T_VARIABLE","$this",335],["T_OBJECT_OPERATOR","->",335],["T_STRING","getTable",335],"(",["T_CONSTANT_ENCAPSED_STRING","'sales_quote_entity_decimal'",335],")","}",["T_ENCAPSED_AND_WHITESPACE",";\nDROP TABLE IF EXISTS ",335],["T_CURLY_OPEN","{",336],["T_VARIABLE","$this",336],["T_OBJECT_OPERATOR","->",336],["T_STRING","getTable",336],"(",["T_CONSTANT_ENCAPSED_STRING","'sales_quote_entity_int'",336],")","}",["T_ENCAPSED_AND_WHITESPACE",";\nDROP TABLE IF EXISTS ",336],["T_CURLY_OPEN","{",337],["T_VARIABLE","$this",337],["T_OBJECT_OPERATOR","->",337],["T_STRING","getTable",337],"(",["T_CONSTANT_ENCAPSED_STRING","'sales_quote_entity_text'",337],")","}",["T_ENCAPSED_AND_WHITESPACE",";\nDROP TABLE IF EXISTS ",337],["T_CURLY_OPEN","{",338],["T_VARIABLE","$this",338],["T_OBJECT_OPERATOR","->",338],["T_STRING","getTable",338],"(",["T_CONSTANT_ENCAPSED_STRING","'sales_quote_entity_varchar'",338],")","}",["T_ENCAPSED_AND_WHITESPACE",";\nDROP TABLE IF EXISTS ",338],["T_CURLY_OPEN","{",339],["T_VARIABLE","$this",339],["T_OBJECT_OPERATOR","->",339],["T_STRING","getTable",339],"(",["T_CONSTANT_ENCAPSED_STRING","'sales_quote_int'",339],")","}",["T_ENCAPSED_AND_WHITESPACE",";\nDROP TABLE IF EXISTS ",339],["T_CURLY_OPEN","{",340],["T_VARIABLE","$this",340],["T_OBJECT_OPERATOR","->",340],["T_STRING","getTable",340],"(",["T_CONSTANT_ENCAPSED_STRING","'sales_quote_item'",340],")","}",["T_ENCAPSED_AND_WHITESPACE",";\nDROP TABLE IF EXISTS ",340],["T_CURLY_OPEN","{",341],["T_VARIABLE","$this",341],["T_OBJECT_OPERATOR","->",341],["T_STRING","getTable",341],"(",["T_CONSTANT_ENCAPSED_STRING","'sales_quote_item_decimal'",341],")","}",["T_ENCAPSED_AND_WHITESPACE",";\nDROP TABLE IF EXISTS ",341],["T_CURLY_OPEN","{",342],["T_VARIABLE","$this",342],["T_OBJECT_OPERATOR","->",342],["T_STRING","getTable",342],"(",["T_CONSTANT_ENCAPSED_STRING","'sales_quote_item_int'",342],")","}",["T_ENCAPSED_AND_WHITESPACE",";\nDROP TABLE IF EXISTS ",342],["T_CURLY_OPEN","{",343],["T_VARIABLE","$this",343],["T_OBJECT_OPERATOR","->",343],["T_STRING","getTable",343],"(",["T_CONSTANT_ENCAPSED_STRING","'sales_quote_item_text'",343],")","}",["T_ENCAPSED_AND_WHITESPACE",";\nDROP TABLE IF EXISTS ",343],["T_CURLY_OPEN","{",344],["T_VARIABLE","$this",344],["T_OBJECT_OPERATOR","->",344],["T_STRING","getTable",344],"(",["T_CONSTANT_ENCAPSED_STRING","'sales_quote_item_varchar'",344],")","}",["T_ENCAPSED_AND_WHITESPACE",";\nDROP TABLE IF EXISTS ",344],["T_CURLY_OPEN","{",345],["T_VARIABLE","$this",345],["T_OBJECT_OPERATOR","->",345],["T_STRING","getTable",345],"(",["T_CONSTANT_ENCAPSED_STRING","'sales_quote_text'",345],")","}",["T_ENCAPSED_AND_WHITESPACE",";\nDROP TABLE IF EXISTS ",345],["T_CURLY_OPEN","{",346],["T_VARIABLE","$this",346],["T_OBJECT_OPERATOR","->",346],["T_STRING","getTable",346],"(",["T_CONSTANT_ENCAPSED_STRING","'sales_quote_varchar'",346],")","}",["T_ENCAPSED_AND_WHITESPACE",";\nDROP TABLE IF EXISTS ",346],["T_CURLY_OPEN","{",347],["T_VARIABLE","$this",347],["T_OBJECT_OPERATOR","->",347],["T_STRING","getTable",347],"(",["T_CONSTANT_ENCAPSED_STRING","'sales_quote_rule'",347],")","}",["T_ENCAPSED_AND_WHITESPACE",";\n\n\nDROP TABLE IF EXISTS ",347],["T_CURLY_OPEN","{",350],["T_VARIABLE","$this",350],["T_OBJECT_OPERATOR","->",350],["T_STRING","getTable",350],"(",["T_CONSTANT_ENCAPSED_STRING","'sales_counter'",350],")","}",["T_ENCAPSED_AND_WHITESPACE",";\nDROP TABLE IF EXISTS ",350],["T_CURLY_OPEN","{",351],["T_VARIABLE","$this",351],["T_OBJECT_OPERATOR","->",351],["T_STRING","getTable",351],"(",["T_CONSTANT_ENCAPSED_STRING","'sales_discount_coupon'",351],")","}",["T_ENCAPSED_AND_WHITESPACE",";\n",351],"\"",")",";",["T_WHITESPACE","\n",352],["T_VARIABLE","$installer",353],["T_OBJECT_OPERATOR","->",353],["T_STRING","endSetup",353],"(",")",";",["T_WHITESPACE","\n",353]]
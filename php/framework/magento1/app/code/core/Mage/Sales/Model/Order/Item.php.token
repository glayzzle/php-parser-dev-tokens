[["T_OPEN_TAG","<?php\n",1],["T_DOC_COMMENT","\/**\n * Magento\n *\n * NOTICE OF LICENSE\n *\n * This source file is subject to the Open Software License (OSL 3.0)\n * that is bundled with this package in the file LICENSE.txt.\n * It is also available through the world-wide-web at this URL:\n * http:\/\/opensource.org\/licenses\/osl-3.0.php\n * If you did not receive a copy of the license and are unable to\n * obtain it through the world-wide-web, please send an email\n * to license@magento.com so we can send you a copy immediately.\n *\n * DISCLAIMER\n *\n * Do not edit or add to this file if you wish to upgrade Magento to newer\n * versions in the future. If you wish to customize Magento for your\n * needs please refer to http:\/\/www.magento.com for more information.\n *\n * @category    Mage\n * @package     Mage_Sales\n * @copyright  Copyright (c) 2006-2016 X.commerce, Inc. and affiliates (http:\/\/www.magento.com)\n * @license    http:\/\/opensource.org\/licenses\/osl-3.0.php  Open Software License (OSL 3.0)\n *\/",2],["T_WHITESPACE","\n\n",25],["T_DOC_COMMENT","\/**\n * Order Item Model\n *\n * @method Mage_Sales_Model_Resource_Order_Item _getResource()\n * @method Mage_Sales_Model_Resource_Order_Item getResource()\n * @method int getOrderId()\n * @method Mage_Sales_Model_Order_Item setOrderId(int $value)\n * @method int getParentItemId()\n * @method Mage_Sales_Model_Order_Item setParentItemId(int $value)\n * @method int getQuoteItemId()\n * @method Mage_Sales_Model_Order_Item setQuoteItemId(int $value)\n * @method int getStoreId()\n * @method Mage_Sales_Model_Order_Item setStoreId(int $value)\n * @method string getCreatedAt()\n * @method Mage_Sales_Model_Order_Item setCreatedAt(string $value)\n * @method string getUpdatedAt()\n * @method Mage_Sales_Model_Order_Item setUpdatedAt(string $value)\n * @method int getProductId()\n * @method Mage_Sales_Model_Order_Item setProductId(int $value)\n * @method string getProductType()\n * @method Mage_Sales_Model_Order_Item setProductType(string $value)\n * @method float getWeight()\n * @method Mage_Sales_Model_Order_Item setWeight(float $value)\n * @method int getIsVirtual()\n * @method Mage_Sales_Model_Order_Item setIsVirtual(int $value)\n * @method string getSku()\n * @method Mage_Sales_Model_Order_Item setSku(string $value)\n * @method string getName()\n * @method Mage_Sales_Model_Order_Item setName(string $value)\n * @method string getDescription()\n * @method Mage_Sales_Model_Order_Item setDescription(string $value)\n * @method string getAppliedRuleIds()\n * @method Mage_Sales_Model_Order_Item setAppliedRuleIds(string $value)\n * @method string getAdditionalData()\n * @method Mage_Sales_Model_Order_Item setAdditionalData(string $value)\n * @method int getFreeShipping()\n * @method Mage_Sales_Model_Order_Item setFreeShipping(int $value)\n * @method int getIsQtyDecimal()\n * @method Mage_Sales_Model_Order_Item setIsQtyDecimal(int $value)\n * @method int getNoDiscount()\n * @method Mage_Sales_Model_Order_Item setNoDiscount(int $value)\n * @method float getQtyBackordered()\n * @method Mage_Sales_Model_Order_Item setQtyBackordered(float $value)\n * @method float getQtyCanceled()\n * @method Mage_Sales_Model_Order_Item setQtyCanceled(float $value)\n * @method float getQtyInvoiced()\n * @method Mage_Sales_Model_Order_Item setQtyInvoiced(float $value)\n * @method float getQtyOrdered()\n * @method Mage_Sales_Model_Order_Item setQtyOrdered(float $value)\n * @method float getQtyRefunded()\n * @method Mage_Sales_Model_Order_Item setQtyRefunded(float $value)\n * @method float getQtyShipped()\n * @method Mage_Sales_Model_Order_Item setQtyShipped(float $value)\n * @method float getBaseCost()\n * @method Mage_Sales_Model_Order_Item setBaseCost(float $value)\n * @method float getPrice()\n * @method Mage_Sales_Model_Order_Item setPrice(float $value)\n * @method float getBasePrice()\n * @method Mage_Sales_Model_Order_Item setBasePrice(float $value)\n * @method Mage_Sales_Model_Order_Item setOriginalPrice(float $value)\n * @method float getBaseOriginalPrice()\n * @method Mage_Sales_Model_Order_Item setBaseOriginalPrice(float $value)\n * @method float getTaxPercent()\n * @method Mage_Sales_Model_Order_Item setTaxPercent(float $value)\n * @method float getTaxAmount()\n * @method Mage_Sales_Model_Order_Item setTaxAmount(float $value)\n * @method float getBaseTaxAmount()\n * @method Mage_Sales_Model_Order_Item setBaseTaxAmount(float $value)\n * @method float getTaxInvoiced()\n * @method Mage_Sales_Model_Order_Item setTaxInvoiced(float $value)\n * @method float getBaseTaxInvoiced()\n * @method Mage_Sales_Model_Order_Item setBaseTaxInvoiced(float $value)\n * @method float getDiscountPercent()\n * @method Mage_Sales_Model_Order_Item setDiscountPercent(float $value)\n * @method float getDiscountAmount()\n * @method Mage_Sales_Model_Order_Item setDiscountAmount(float $value)\n * @method float getBaseDiscountAmount()\n * @method Mage_Sales_Model_Order_Item setBaseDiscountAmount(float $value)\n * @method float getDiscountInvoiced()\n * @method Mage_Sales_Model_Order_Item setDiscountInvoiced(float $value)\n * @method float getBaseDiscountInvoiced()\n * @method Mage_Sales_Model_Order_Item setBaseDiscountInvoiced(float $value)\n * @method float getAmountRefunded()\n * @method Mage_Sales_Model_Order_Item setAmountRefunded(float $value)\n * @method float getBaseAmountRefunded()\n * @method Mage_Sales_Model_Order_Item setBaseAmountRefunded(float $value)\n * @method float getRowTotal()\n * @method Mage_Sales_Model_Order_Item setRowTotal(float $value)\n * @method float getBaseRowTotal()\n * @method Mage_Sales_Model_Order_Item setBaseRowTotal(float $value)\n * @method float getRowInvoiced()\n * @method Mage_Sales_Model_Order_Item setRowInvoiced(float $value)\n * @method float getBaseRowInvoiced()\n * @method Mage_Sales_Model_Order_Item setBaseRowInvoiced(float $value)\n * @method float getRowWeight()\n * @method Mage_Sales_Model_Order_Item setRowWeight(float $value)\n * @method int getGiftMessageId()\n * @method Mage_Sales_Model_Order_Item setGiftMessageId(int $value)\n * @method int getGiftMessageAvailable()\n * @method Mage_Sales_Model_Order_Item setGiftMessageAvailable(int $value)\n * @method float getBaseTaxBeforeDiscount()\n * @method Mage_Sales_Model_Order_Item setBaseTaxBeforeDiscount(float $value)\n * @method float getTaxBeforeDiscount()\n * @method Mage_Sales_Model_Order_Item setTaxBeforeDiscount(float $value)\n * @method string getExtOrderItemId()\n * @method Mage_Sales_Model_Order_Item setExtOrderItemId(string $value)\n * @method string getWeeeTaxApplied()\n * @method Mage_Sales_Model_Order_Item setWeeeTaxApplied(string $value)\n * @method float getWeeeTaxAppliedAmount()\n * @method Mage_Sales_Model_Order_Item setWeeeTaxAppliedAmount(float $value)\n * @method float getWeeeTaxAppliedRowAmount()\n * @method Mage_Sales_Model_Order_Item setWeeeTaxAppliedRowAmount(float $value)\n * @method float getBaseWeeeTaxAppliedAmount()\n * @method Mage_Sales_Model_Order_Item setBaseWeeeTaxAppliedAmount(float $value)\n * @method float getBaseWeeeTaxAppliedRowAmount()\n * @method Mage_Sales_Model_Order_Item setBaseWeeeTaxAppliedRowAmount(float $value)\n * @method float getWeeeTaxDisposition()\n * @method Mage_Sales_Model_Order_Item setWeeeTaxDisposition(float $value)\n * @method float getWeeeTaxRowDisposition()\n * @method Mage_Sales_Model_Order_Item setWeeeTaxRowDisposition(float $value)\n * @method float getBaseWeeeTaxDisposition()\n * @method Mage_Sales_Model_Order_Item setBaseWeeeTaxDisposition(float $value)\n * @method float getBaseWeeeTaxRowDisposition()\n * @method Mage_Sales_Model_Order_Item setBaseWeeeTaxRowDisposition(float $value)\n * @method int getLockedDoInvoice()\n * @method Mage_Sales_Model_Order_Item setLockedDoInvoice(int $value)\n * @method int getLockedDoShip()\n * @method Mage_Sales_Model_Order_Item setLockedDoShip(int $value)\n * @method float getPriceInclTax()\n * @method Mage_Sales_Model_Order_Item setPriceInclTax(float $value)\n * @method float getBasePriceInclTax()\n * @method Mage_Sales_Model_Order_Item setBasePriceInclTax(float $value)\n * @method float getRowTotalInclTax()\n * @method Mage_Sales_Model_Order_Item setRowTotalInclTax(float $value)\n * @method float getBaseRowTotalInclTax()\n * @method Mage_Sales_Model_Order_Item setBaseRowTotalInclTax(float $value)\n * @method float getHiddenTaxAmount()\n * @method Mage_Sales_Model_Order_Item setHiddenTaxAmount(float $value)\n * @method float getBaseHiddenTaxAmount()\n * @method Mage_Sales_Model_Order_Item setBaseHiddenTaxAmount(float $value)\n * @method float getHiddenTaxInvoiced()\n * @method Mage_Sales_Model_Order_Item setHiddenTaxInvoiced(float $value)\n * @method float getBaseHiddenTaxInvoiced()\n * @method Mage_Sales_Model_Order_Item setBaseHiddenTaxInvoiced(float $value)\n * @method float getHiddenTaxRefunded()\n * @method Mage_Sales_Model_Order_Item setHiddenTaxRefunded(float $value)\n * @method float getBaseHiddenTaxRefunded()\n * @method Mage_Sales_Model_Order_Item setBaseHiddenTaxRefunded(float $value)\n * @method int getIsNominal()\n * @method Mage_Sales_Model_Order_Item setIsNominal(int $value)\n * @method float getTaxCanceled()\n * @method Mage_Sales_Model_Order_Item setTaxCanceled(float $value)\n * @method float getHiddenTaxCanceled()\n * @method Mage_Sales_Model_Order_Item setHiddenTaxCanceled(float $value)\n * @method float getTaxRefunded()\n * @method Mage_Sales_Model_Order_Item setTaxRefunded(float $value)\n * @method float getBaseTaxRefunded()\n * @method Mage_Sales_Model_Order_Item setBaseTaxRefunded(float $value)\n * @method float getDiscountRefunded()\n * @method Mage_Sales_Model_Order_Item setDiscountRefunded(float $value)\n * @method float getBaseDiscountRefunded()\n * @method Mage_Sales_Model_Order_Item setBaseDiscountRefunded(float $value)\n *\n * @category    Mage\n * @package     Mage_Sales\n * @author      Magento Core Team <core@magentocommerce.com>\n *\/",27],["T_WHITESPACE","\n",193],["T_CLASS","class",194],["T_WHITESPACE"," ",194],["T_STRING","Mage_Sales_Model_Order_Item",194],["T_WHITESPACE"," ",194],["T_EXTENDS","extends",194],["T_WHITESPACE"," ",194],["T_STRING","Mage_Core_Model_Abstract",194],["T_WHITESPACE","\n",194],"{",["T_WHITESPACE","\n\n    ",195],["T_CONST","const",197],["T_WHITESPACE"," ",197],["T_STRING","STATUS_PENDING",197],["T_WHITESPACE","        ",197],"=",["T_WHITESPACE"," ",197],["T_LNUMBER","1",197],";",["T_WHITESPACE"," ",197],["T_COMMENT","\/\/ No items shipped, invoiced, canceled, refunded nor backordered\n",197],["T_WHITESPACE","    ",198],["T_CONST","const",198],["T_WHITESPACE"," ",198],["T_STRING","STATUS_SHIPPED",198],["T_WHITESPACE","        ",198],"=",["T_WHITESPACE"," ",198],["T_LNUMBER","2",198],";",["T_WHITESPACE"," ",198],["T_COMMENT","\/\/ When qty ordered - [qty canceled + qty returned] = qty shipped\n",198],["T_WHITESPACE","    ",199],["T_CONST","const",199],["T_WHITESPACE"," ",199],["T_STRING","STATUS_INVOICED",199],["T_WHITESPACE","       ",199],"=",["T_WHITESPACE"," ",199],["T_LNUMBER","9",199],";",["T_WHITESPACE"," ",199],["T_COMMENT","\/\/ When qty ordered - [qty canceled + qty returned] = qty invoiced\n",199],["T_WHITESPACE","    ",200],["T_CONST","const",200],["T_WHITESPACE"," ",200],["T_STRING","STATUS_BACKORDERED",200],["T_WHITESPACE","    ",200],"=",["T_WHITESPACE"," ",200],["T_LNUMBER","3",200],";",["T_WHITESPACE"," ",200],["T_COMMENT","\/\/ When qty ordered - [qty canceled + qty returned] = qty backordered\n",200],["T_WHITESPACE","    ",201],["T_CONST","const",201],["T_WHITESPACE"," ",201],["T_STRING","STATUS_CANCELED",201],["T_WHITESPACE","       ",201],"=",["T_WHITESPACE"," ",201],["T_LNUMBER","5",201],";",["T_WHITESPACE"," ",201],["T_COMMENT","\/\/ When qty ordered = qty canceled\n",201],["T_WHITESPACE","    ",202],["T_CONST","const",202],["T_WHITESPACE"," ",202],["T_STRING","STATUS_PARTIAL",202],["T_WHITESPACE","        ",202],"=",["T_WHITESPACE"," ",202],["T_LNUMBER","6",202],";",["T_WHITESPACE"," ",202],["T_COMMENT","\/\/ If [qty shipped or(max of two) qty invoiced + qty canceled + qty returned]\n",202],["T_WHITESPACE","                                     ",203],["T_COMMENT","\/\/ < qty ordered\n",203],["T_WHITESPACE","    ",204],["T_CONST","const",204],["T_WHITESPACE"," ",204],["T_STRING","STATUS_MIXED",204],["T_WHITESPACE","          ",204],"=",["T_WHITESPACE"," ",204],["T_LNUMBER","7",204],";",["T_WHITESPACE"," ",204],["T_COMMENT","\/\/ All other combinations\n",204],["T_WHITESPACE","    ",205],["T_CONST","const",205],["T_WHITESPACE"," ",205],["T_STRING","STATUS_REFUNDED",205],["T_WHITESPACE","       ",205],"=",["T_WHITESPACE"," ",205],["T_LNUMBER","8",205],";",["T_WHITESPACE"," ",205],["T_COMMENT","\/\/ When qty ordered = qty refunded\n",205],["T_WHITESPACE","\n    ",206],["T_CONST","const",207],["T_WHITESPACE"," ",207],["T_STRING","STATUS_RETURNED",207],["T_WHITESPACE","       ",207],"=",["T_WHITESPACE"," ",207],["T_LNUMBER","4",207],";",["T_WHITESPACE"," ",207],["T_COMMENT","\/\/ When qty ordered = qty returned \/\/ not used at the moment\n",207],["T_WHITESPACE","\n    ",208],["T_PROTECTED","protected",209],["T_WHITESPACE"," ",209],["T_VARIABLE","$_eventPrefix",209],["T_WHITESPACE"," ",209],"=",["T_WHITESPACE"," ",209],["T_CONSTANT_ENCAPSED_STRING","'sales_order_item'",209],";",["T_WHITESPACE","\n    ",209],["T_PROTECTED","protected",210],["T_WHITESPACE"," ",210],["T_VARIABLE","$_eventObject",210],["T_WHITESPACE"," ",210],"=",["T_WHITESPACE"," ",210],["T_CONSTANT_ENCAPSED_STRING","'item'",210],";",["T_WHITESPACE","\n\n    ",210],["T_PROTECTED","protected",212],["T_WHITESPACE"," ",212],["T_STATIC","static",212],["T_WHITESPACE"," ",212],["T_VARIABLE","$_statuses",212],["T_WHITESPACE"," ",212],"=",["T_WHITESPACE"," ",212],["T_STRING","null",212],";",["T_WHITESPACE","\n\n    ",212],["T_DOC_COMMENT","\/**\n     * Order instance\n     *\n     * @var Mage_Sales_Model_Order\n     *\/",214],["T_WHITESPACE","\n    ",218],["T_PROTECTED","protected",219],["T_WHITESPACE"," ",219],["T_VARIABLE","$_order",219],["T_WHITESPACE","       ",219],"=",["T_WHITESPACE"," ",219],["T_STRING","null",219],";",["T_WHITESPACE","\n    ",219],["T_PROTECTED","protected",220],["T_WHITESPACE"," ",220],["T_VARIABLE","$_parentItem",220],["T_WHITESPACE","  ",220],"=",["T_WHITESPACE"," ",220],["T_STRING","null",220],";",["T_WHITESPACE","\n    ",220],["T_PROTECTED","protected",221],["T_WHITESPACE"," ",221],["T_VARIABLE","$_children",221],["T_WHITESPACE","    ",221],"=",["T_WHITESPACE"," ",221],["T_ARRAY","array",221],"(",")",";",["T_WHITESPACE","\n\n    ",221],["T_DOC_COMMENT","\/**\n     * Init resource model\n     *\/",223],["T_WHITESPACE","\n    ",225],["T_PROTECTED","protected",226],["T_WHITESPACE"," ",226],["T_FUNCTION","function",226],["T_WHITESPACE"," ",226],["T_STRING","_construct",226],"(",")",["T_WHITESPACE","\n    ",226],"{",["T_WHITESPACE","\n        ",227],["T_VARIABLE","$this",228],["T_OBJECT_OPERATOR","->",228],["T_STRING","_init",228],"(",["T_CONSTANT_ENCAPSED_STRING","'sales\/order_item'",228],")",";",["T_WHITESPACE","\n    ",228],"}",["T_WHITESPACE","\n\n     ",229],["T_DOC_COMMENT","\/**\n     * Init mapping array of short fields to\n     * its full names\n     *\n     * @return Varien_Object\n     *\/",231],["T_WHITESPACE","\n    ",236],["T_PROTECTED","protected",237],["T_WHITESPACE"," ",237],["T_FUNCTION","function",237],["T_WHITESPACE"," ",237],["T_STRING","_initOldFieldsMap",237],"(",")",["T_WHITESPACE","\n    ",237],"{",["T_WHITESPACE","\n        ",238],["T_VARIABLE","$this",239],["T_OBJECT_OPERATOR","->",239],["T_STRING","_oldFieldsMap",239],["T_WHITESPACE"," ",239],"=",["T_WHITESPACE"," ",239],["T_STRING","Mage",239],["T_DOUBLE_COLON","::",239],["T_STRING","helper",239],"(",["T_CONSTANT_ENCAPSED_STRING","'sales'",239],")",["T_OBJECT_OPERATOR","->",239],["T_STRING","getOldFieldMap",239],"(",["T_CONSTANT_ENCAPSED_STRING","'order_item'",239],")",";",["T_WHITESPACE","\n        ",239],["T_RETURN","return",240],["T_WHITESPACE"," ",240],["T_VARIABLE","$this",240],";",["T_WHITESPACE","\n    ",240],"}",["T_WHITESPACE","\n\n    ",241],["T_DOC_COMMENT","\/**\n     * Prepare data before save\n     *\n     * @return Mage_Sales_Model_Order_Item\n     *\/",243],["T_WHITESPACE","\n    ",247],["T_PROTECTED","protected",248],["T_WHITESPACE"," ",248],["T_FUNCTION","function",248],["T_WHITESPACE"," ",248],["T_STRING","_beforeSave",248],"(",")",["T_WHITESPACE","\n    ",248],"{",["T_WHITESPACE","\n        ",249],["T_STRING","parent",250],["T_DOUBLE_COLON","::",250],["T_STRING","_beforeSave",250],"(",")",";",["T_WHITESPACE","\n        ",250],["T_IF","if",251],["T_WHITESPACE"," ",251],"(","!",["T_VARIABLE","$this",251],["T_OBJECT_OPERATOR","->",251],["T_STRING","getOrderId",251],"(",")",["T_WHITESPACE"," ",251],["T_BOOLEAN_AND","&&",251],["T_WHITESPACE"," ",251],["T_VARIABLE","$this",251],["T_OBJECT_OPERATOR","->",251],["T_STRING","getOrder",251],"(",")",")",["T_WHITESPACE"," ",251],"{",["T_WHITESPACE","\n            ",251],["T_VARIABLE","$this",252],["T_OBJECT_OPERATOR","->",252],["T_STRING","setOrderId",252],"(",["T_VARIABLE","$this",252],["T_OBJECT_OPERATOR","->",252],["T_STRING","getOrder",252],"(",")",["T_OBJECT_OPERATOR","->",252],["T_STRING","getId",252],"(",")",")",";",["T_WHITESPACE","\n        ",252],"}",["T_WHITESPACE","\n        ",253],["T_IF","if",254],["T_WHITESPACE"," ",254],"(",["T_VARIABLE","$this",254],["T_OBJECT_OPERATOR","->",254],["T_STRING","getParentItem",254],"(",")",")",["T_WHITESPACE"," ",254],"{",["T_WHITESPACE","\n            ",254],["T_VARIABLE","$this",255],["T_OBJECT_OPERATOR","->",255],["T_STRING","setParentItemId",255],"(",["T_VARIABLE","$this",255],["T_OBJECT_OPERATOR","->",255],["T_STRING","getParentItem",255],"(",")",["T_OBJECT_OPERATOR","->",255],["T_STRING","getId",255],"(",")",")",";",["T_WHITESPACE","\n        ",255],"}",["T_WHITESPACE","\n        ",256],["T_RETURN","return",257],["T_WHITESPACE"," ",257],["T_VARIABLE","$this",257],";",["T_WHITESPACE","\n    ",257],"}",["T_WHITESPACE","\n\n    ",258],["T_DOC_COMMENT","\/**\n     * Set parent item\n     *\n     * @param   Mage_Sales_Model_Order_Item $item\n     * @return  Mage_Sales_Model_Order_Item\n     *\/",260],["T_WHITESPACE","\n    ",265],["T_PUBLIC","public",266],["T_WHITESPACE"," ",266],["T_FUNCTION","function",266],["T_WHITESPACE"," ",266],["T_STRING","setParentItem",266],"(",["T_VARIABLE","$item",266],")",["T_WHITESPACE","\n    ",266],"{",["T_WHITESPACE","\n        ",267],["T_IF","if",268],["T_WHITESPACE"," ",268],"(",["T_VARIABLE","$item",268],")",["T_WHITESPACE"," ",268],"{",["T_WHITESPACE","\n            ",268],["T_VARIABLE","$this",269],["T_OBJECT_OPERATOR","->",269],["T_STRING","_parentItem",269],["T_WHITESPACE"," ",269],"=",["T_WHITESPACE"," ",269],["T_VARIABLE","$item",269],";",["T_WHITESPACE","\n            ",269],["T_VARIABLE","$item",270],["T_OBJECT_OPERATOR","->",270],["T_STRING","setHasChildren",270],"(",["T_STRING","true",270],")",";",["T_WHITESPACE","\n            ",270],["T_VARIABLE","$item",271],["T_OBJECT_OPERATOR","->",271],["T_STRING","addChildItem",271],"(",["T_VARIABLE","$this",271],")",";",["T_WHITESPACE","\n        ",271],"}",["T_WHITESPACE","\n        ",272],["T_RETURN","return",273],["T_WHITESPACE"," ",273],["T_VARIABLE","$this",273],";",["T_WHITESPACE","\n    ",273],"}",["T_WHITESPACE","\n\n    ",274],["T_DOC_COMMENT","\/**\n     * Get parent item\n     *\n     * @return Mage_Sales_Model_Order_Item || null\n     *\/",276],["T_WHITESPACE","\n    ",280],["T_PUBLIC","public",281],["T_WHITESPACE"," ",281],["T_FUNCTION","function",281],["T_WHITESPACE"," ",281],["T_STRING","getParentItem",281],"(",")",["T_WHITESPACE","\n    ",281],"{",["T_WHITESPACE","\n        ",282],["T_RETURN","return",283],["T_WHITESPACE"," ",283],["T_VARIABLE","$this",283],["T_OBJECT_OPERATOR","->",283],["T_STRING","_parentItem",283],";",["T_WHITESPACE","\n    ",283],"}",["T_WHITESPACE","\n\n    ",284],["T_DOC_COMMENT","\/**\n     * Check item invoice availability\n     *\n     * @return bool\n     *\/",286],["T_WHITESPACE","\n    ",290],["T_PUBLIC","public",291],["T_WHITESPACE"," ",291],["T_FUNCTION","function",291],["T_WHITESPACE"," ",291],["T_STRING","canInvoice",291],"(",")",["T_WHITESPACE","\n    ",291],"{",["T_WHITESPACE","\n        ",292],["T_RETURN","return",293],["T_WHITESPACE"," ",293],["T_VARIABLE","$this",293],["T_OBJECT_OPERATOR","->",293],["T_STRING","getQtyToInvoice",293],"(",")",">",["T_LNUMBER","0",293],";",["T_WHITESPACE","\n    ",293],"}",["T_WHITESPACE","\n\n    ",294],["T_DOC_COMMENT","\/**\n     * Check item ship availability\n     *\n     * @return bool\n     *\/",296],["T_WHITESPACE","\n    ",300],["T_PUBLIC","public",301],["T_WHITESPACE"," ",301],["T_FUNCTION","function",301],["T_WHITESPACE"," ",301],["T_STRING","canShip",301],"(",")",["T_WHITESPACE","\n    ",301],"{",["T_WHITESPACE","\n        ",302],["T_RETURN","return",303],["T_WHITESPACE"," ",303],["T_VARIABLE","$this",303],["T_OBJECT_OPERATOR","->",303],["T_STRING","getQtyToShip",303],"(",")",">",["T_LNUMBER","0",303],";",["T_WHITESPACE","\n    ",303],"}",["T_WHITESPACE","\n\n    ",304],["T_DOC_COMMENT","\/**\n     * Check item refund availability\n     *\n     * @return bool\n     *\/",306],["T_WHITESPACE","\n    ",310],["T_PUBLIC","public",311],["T_WHITESPACE"," ",311],["T_FUNCTION","function",311],["T_WHITESPACE"," ",311],["T_STRING","canRefund",311],"(",")",["T_WHITESPACE","\n    ",311],"{",["T_WHITESPACE","\n        ",312],["T_RETURN","return",313],["T_WHITESPACE"," ",313],["T_VARIABLE","$this",313],["T_OBJECT_OPERATOR","->",313],["T_STRING","getQtyToRefund",313],"(",")",">",["T_LNUMBER","0",313],";",["T_WHITESPACE","\n    ",313],"}",["T_WHITESPACE","\n\n    ",314],["T_DOC_COMMENT","\/**\n     * Retrieve item qty available for ship\n     *\n     * @return float|integer\n     *\/",316],["T_WHITESPACE","\n    ",320],["T_PUBLIC","public",321],["T_WHITESPACE"," ",321],["T_FUNCTION","function",321],["T_WHITESPACE"," ",321],["T_STRING","getQtyToShip",321],"(",")",["T_WHITESPACE","\n    ",321],"{",["T_WHITESPACE","\n        ",322],["T_IF","if",323],["T_WHITESPACE"," ",323],"(",["T_VARIABLE","$this",323],["T_OBJECT_OPERATOR","->",323],["T_STRING","isDummy",323],"(",["T_STRING","true",323],")",")",["T_WHITESPACE"," ",323],"{",["T_WHITESPACE","\n            ",323],["T_RETURN","return",324],["T_WHITESPACE"," ",324],["T_LNUMBER","0",324],";",["T_WHITESPACE","\n        ",324],"}",["T_WHITESPACE","\n\n        ",325],["T_RETURN","return",327],["T_WHITESPACE"," ",327],["T_VARIABLE","$this",327],["T_OBJECT_OPERATOR","->",327],["T_STRING","getSimpleQtyToShip",327],"(",")",";",["T_WHITESPACE","\n    ",327],"}",["T_WHITESPACE","\n\n    ",328],["T_DOC_COMMENT","\/**\n     * Retrieve item qty available for ship\n     *\n     * @return float|integer\n     *\/",330],["T_WHITESPACE","\n    ",334],["T_PUBLIC","public",335],["T_WHITESPACE"," ",335],["T_FUNCTION","function",335],["T_WHITESPACE"," ",335],["T_STRING","getSimpleQtyToShip",335],"(",")",["T_WHITESPACE","\n    ",335],"{",["T_WHITESPACE","\n        ",336],["T_VARIABLE","$qty",337],["T_WHITESPACE"," ",337],"=",["T_WHITESPACE"," ",337],["T_VARIABLE","$this",337],["T_OBJECT_OPERATOR","->",337],["T_STRING","getQtyOrdered",337],"(",")",["T_WHITESPACE","\n            ",337],"-",["T_WHITESPACE"," ",338],["T_VARIABLE","$this",338],["T_OBJECT_OPERATOR","->",338],["T_STRING","getQtyShipped",338],"(",")",["T_WHITESPACE","\n            ",338],"-",["T_WHITESPACE"," ",339],["T_VARIABLE","$this",339],["T_OBJECT_OPERATOR","->",339],["T_STRING","getQtyRefunded",339],"(",")",["T_WHITESPACE","\n            ",339],"-",["T_WHITESPACE"," ",340],["T_VARIABLE","$this",340],["T_OBJECT_OPERATOR","->",340],["T_STRING","getQtyCanceled",340],"(",")",";",["T_WHITESPACE","\n        ",340],["T_RETURN","return",341],["T_WHITESPACE"," ",341],["T_STRING","max",341],"(",["T_VARIABLE","$qty",341],",",["T_WHITESPACE"," ",341],["T_LNUMBER","0",341],")",";",["T_WHITESPACE","\n    ",341],"}",["T_WHITESPACE","\n\n    ",342],["T_DOC_COMMENT","\/**\n     * Retrieve item qty available for invoice\n     *\n     * @return float|integer\n     *\/",344],["T_WHITESPACE","\n    ",348],["T_PUBLIC","public",349],["T_WHITESPACE"," ",349],["T_FUNCTION","function",349],["T_WHITESPACE"," ",349],["T_STRING","getQtyToInvoice",349],"(",")",["T_WHITESPACE","\n    ",349],"{",["T_WHITESPACE","\n        ",350],["T_IF","if",351],["T_WHITESPACE"," ",351],"(",["T_VARIABLE","$this",351],["T_OBJECT_OPERATOR","->",351],["T_STRING","isDummy",351],"(",")",")",["T_WHITESPACE"," ",351],"{",["T_WHITESPACE","\n            ",351],["T_RETURN","return",352],["T_WHITESPACE"," ",352],["T_LNUMBER","0",352],";",["T_WHITESPACE","\n        ",352],"}",["T_WHITESPACE","\n\n        ",353],["T_VARIABLE","$qty",355],["T_WHITESPACE"," ",355],"=",["T_WHITESPACE"," ",355],["T_VARIABLE","$this",355],["T_OBJECT_OPERATOR","->",355],["T_STRING","getQtyOrdered",355],"(",")",["T_WHITESPACE","\n            ",355],"-",["T_WHITESPACE"," ",356],["T_VARIABLE","$this",356],["T_OBJECT_OPERATOR","->",356],["T_STRING","getQtyInvoiced",356],"(",")",["T_WHITESPACE","\n            ",356],"-",["T_WHITESPACE"," ",357],["T_VARIABLE","$this",357],["T_OBJECT_OPERATOR","->",357],["T_STRING","getQtyCanceled",357],"(",")",";",["T_WHITESPACE","\n        ",357],["T_RETURN","return",358],["T_WHITESPACE"," ",358],["T_STRING","max",358],"(",["T_VARIABLE","$qty",358],",",["T_WHITESPACE"," ",358],["T_LNUMBER","0",358],")",";",["T_WHITESPACE","\n    ",358],"}",["T_WHITESPACE","\n\n    ",359],["T_DOC_COMMENT","\/**\n     * Retrieve item qty available for refund\n     *\n     * @return float|integer\n     *\/",361],["T_WHITESPACE","\n    ",365],["T_PUBLIC","public",366],["T_WHITESPACE"," ",366],["T_FUNCTION","function",366],["T_WHITESPACE"," ",366],["T_STRING","getQtyToRefund",366],"(",")",["T_WHITESPACE","\n    ",366],"{",["T_WHITESPACE","\n        ",367],["T_IF","if",368],["T_WHITESPACE"," ",368],"(",["T_VARIABLE","$this",368],["T_OBJECT_OPERATOR","->",368],["T_STRING","isDummy",368],"(",")",")",["T_WHITESPACE"," ",368],"{",["T_WHITESPACE","\n            ",368],["T_RETURN","return",369],["T_WHITESPACE"," ",369],["T_LNUMBER","0",369],";",["T_WHITESPACE","\n        ",369],"}",["T_WHITESPACE","\n        ",370],["T_RETURN","return",371],["T_WHITESPACE"," ",371],["T_STRING","max",371],"(",["T_VARIABLE","$this",371],["T_OBJECT_OPERATOR","->",371],["T_STRING","getQtyInvoiced",371],"(",")","-",["T_VARIABLE","$this",371],["T_OBJECT_OPERATOR","->",371],["T_STRING","getQtyRefunded",371],"(",")",",",["T_WHITESPACE"," ",371],["T_LNUMBER","0",371],")",";",["T_WHITESPACE","\n    ",371],"}",["T_WHITESPACE","\n\n    ",372],["T_DOC_COMMENT","\/**\n     * Retrieve item qty available for cancel\n     *\n     * @return float|integer\n     *\/",374],["T_WHITESPACE","\n    ",378],["T_PUBLIC","public",379],["T_WHITESPACE"," ",379],["T_FUNCTION","function",379],["T_WHITESPACE"," ",379],["T_STRING","getQtyToCancel",379],"(",")",["T_WHITESPACE","\n    ",379],"{",["T_WHITESPACE","\n        ",380],["T_IF","if",381],["T_WHITESPACE"," ",381],"(",["T_VARIABLE","$this",381],["T_OBJECT_OPERATOR","->",381],["T_STRING","getProductType",381],"(",")",["T_WHITESPACE"," ",381],["T_IS_EQUAL","==",381],["T_WHITESPACE"," ",381],["T_STRING","Mage_Catalog_Model_Product_Type",381],["T_DOUBLE_COLON","::",381],["T_STRING","TYPE_BUNDLE",381],")",["T_WHITESPACE"," ",381],"{",["T_WHITESPACE","\n            ",381],["T_VARIABLE","$qtyToCancel",382],["T_WHITESPACE"," ",382],"=",["T_WHITESPACE"," ",382],["T_VARIABLE","$this",382],["T_OBJECT_OPERATOR","->",382],["T_STRING","getQtyToCancelBundle",382],"(",")",";",["T_WHITESPACE","\n        ",382],"}",["T_WHITESPACE"," ",383],["T_ELSEIF","elseif",383],["T_WHITESPACE"," ",383],"(",["T_VARIABLE","$this",383],["T_OBJECT_OPERATOR","->",383],["T_STRING","getParentItem",383],"(",")",["T_WHITESPACE","\n            ",383],["T_BOOLEAN_AND","&&",384],["T_WHITESPACE"," ",384],["T_VARIABLE","$this",384],["T_OBJECT_OPERATOR","->",384],["T_STRING","getParentItem",384],"(",")",["T_OBJECT_OPERATOR","->",384],["T_STRING","getProductType",384],"(",")",["T_WHITESPACE"," ",384],["T_IS_EQUAL","==",384],["T_WHITESPACE"," ",384],["T_STRING","Mage_Catalog_Model_Product_Type",384],["T_DOUBLE_COLON","::",384],["T_STRING","TYPE_BUNDLE",384],["T_WHITESPACE","\n        ",384],")",["T_WHITESPACE"," ",385],"{",["T_WHITESPACE","\n            ",385],["T_VARIABLE","$qtyToCancel",386],["T_WHITESPACE"," ",386],"=",["T_WHITESPACE"," ",386],["T_VARIABLE","$this",386],["T_OBJECT_OPERATOR","->",386],["T_STRING","getQtyToCancelBundleItem",386],"(",")",";",["T_WHITESPACE","\n        ",386],"}",["T_WHITESPACE"," ",387],["T_ELSE","else",387],["T_WHITESPACE"," ",387],"{",["T_WHITESPACE","\n            ",387],["T_VARIABLE","$qtyToCancel",388],["T_WHITESPACE"," ",388],"=",["T_WHITESPACE"," ",388],["T_STRING","min",388],"(",["T_VARIABLE","$this",388],["T_OBJECT_OPERATOR","->",388],["T_STRING","getQtyToInvoice",388],"(",")",",",["T_WHITESPACE"," ",388],["T_VARIABLE","$this",388],["T_OBJECT_OPERATOR","->",388],["T_STRING","getQtyToShip",388],"(",")",")",";",["T_WHITESPACE","\n        ",388],"}",["T_WHITESPACE","\n        ",389],["T_RETURN","return",390],["T_WHITESPACE"," ",390],["T_STRING","max",390],"(",["T_VARIABLE","$qtyToCancel",390],",",["T_WHITESPACE"," ",390],["T_LNUMBER","0",390],")",";",["T_WHITESPACE","\n    ",390],"}",["T_WHITESPACE","\n\n    ",391],["T_DOC_COMMENT","\/**\n     * Retrieve Bundle item qty available for cancel\n     * getQtyToInvoice() will always deliver 0 for Bundle\n     *\n     * @return float|integer\n     *\/",393],["T_WHITESPACE","\n    ",398],["T_PUBLIC","public",399],["T_WHITESPACE"," ",399],["T_FUNCTION","function",399],["T_WHITESPACE"," ",399],["T_STRING","getQtyToCancelBundle",399],"(",")",["T_WHITESPACE","\n    ",399],"{",["T_WHITESPACE","\n        ",400],["T_IF","if",401],["T_WHITESPACE"," ",401],"(",["T_VARIABLE","$this",401],["T_OBJECT_OPERATOR","->",401],["T_STRING","isDummy",401],"(",")",")",["T_WHITESPACE"," ",401],"{",["T_WHITESPACE","\n            ",401],["T_VARIABLE","$qty",402],["T_WHITESPACE"," ",402],"=",["T_WHITESPACE"," ",402],["T_VARIABLE","$this",402],["T_OBJECT_OPERATOR","->",402],["T_STRING","getQtyOrdered",402],"(",")",["T_WHITESPACE","\n                ",402],"-",["T_WHITESPACE"," ",403],["T_VARIABLE","$this",403],["T_OBJECT_OPERATOR","->",403],["T_STRING","getQtyInvoiced",403],"(",")",["T_WHITESPACE","\n                ",403],"-",["T_WHITESPACE"," ",404],["T_VARIABLE","$this",404],["T_OBJECT_OPERATOR","->",404],["T_STRING","getQtyCanceled",404],"(",")",";",["T_WHITESPACE","\n            ",404],["T_RETURN","return",405],["T_WHITESPACE"," ",405],["T_STRING","min",405],"(",["T_STRING","max",405],"(",["T_VARIABLE","$qty",405],",",["T_WHITESPACE"," ",405],["T_LNUMBER","0",405],")",",",["T_WHITESPACE"," ",405],["T_VARIABLE","$this",405],["T_OBJECT_OPERATOR","->",405],["T_STRING","getQtyToShip",405],"(",")",")",";",["T_WHITESPACE","\n        ",405],"}",["T_WHITESPACE","\n        ",406],["T_RETURN","return",407],["T_WHITESPACE"," ",407],["T_STRING","min",407],"(",["T_VARIABLE","$this",407],["T_OBJECT_OPERATOR","->",407],["T_STRING","getQtyToInvoice",407],"(",")",",",["T_WHITESPACE"," ",407],["T_VARIABLE","$this",407],["T_OBJECT_OPERATOR","->",407],["T_STRING","getQtyToShip",407],"(",")",")",";",["T_WHITESPACE","\n    ",407],"}",["T_WHITESPACE","\n\n    ",408],["T_DOC_COMMENT","\/**\n     * Retrieve Bundle child item qty available for cancel\n     * getQtyToShip() always returns 0 for BundleItems that ship together\n     *\n     * @return float|integer\n     *\/",410],["T_WHITESPACE","\n    ",415],["T_PUBLIC","public",416],["T_WHITESPACE"," ",416],["T_FUNCTION","function",416],["T_WHITESPACE"," ",416],["T_STRING","getQtyToCancelBundleItem",416],"(",")",["T_WHITESPACE","\n    ",416],"{",["T_WHITESPACE","\n        ",417],["T_IF","if",418],["T_WHITESPACE"," ",418],"(",["T_VARIABLE","$this",418],["T_OBJECT_OPERATOR","->",418],["T_STRING","isDummy",418],"(",["T_STRING","true",418],")",")",["T_WHITESPACE"," ",418],"{",["T_WHITESPACE","\n            ",418],["T_RETURN","return",419],["T_WHITESPACE"," ",419],["T_STRING","min",419],"(",["T_VARIABLE","$this",419],["T_OBJECT_OPERATOR","->",419],["T_STRING","getQtyToInvoice",419],"(",")",",",["T_WHITESPACE"," ",419],["T_VARIABLE","$this",419],["T_OBJECT_OPERATOR","->",419],["T_STRING","getSimpleQtyToShip",419],"(",")",")",";",["T_WHITESPACE","\n        ",419],"}",["T_WHITESPACE","\n        ",420],["T_RETURN","return",421],["T_WHITESPACE"," ",421],["T_STRING","min",421],"(",["T_VARIABLE","$this",421],["T_OBJECT_OPERATOR","->",421],["T_STRING","getQtyToInvoice",421],"(",")",",",["T_WHITESPACE"," ",421],["T_VARIABLE","$this",421],["T_OBJECT_OPERATOR","->",421],["T_STRING","getQtyToShip",421],"(",")",")",";",["T_WHITESPACE","\n    ",421],"}",["T_WHITESPACE","\n\n    ",422],["T_DOC_COMMENT","\/**\n     * Declare order\n     *\n     * @param   Mage_Sales_Model_Order $order\n     * @return  Mage_Sales_Model_Order_Item\n     *\/",424],["T_WHITESPACE","\n    ",429],["T_PUBLIC","public",430],["T_WHITESPACE"," ",430],["T_FUNCTION","function",430],["T_WHITESPACE"," ",430],["T_STRING","setOrder",430],"(",["T_STRING","Mage_Sales_Model_Order",430],["T_WHITESPACE"," ",430],["T_VARIABLE","$order",430],")",["T_WHITESPACE","\n    ",430],"{",["T_WHITESPACE","\n        ",431],["T_VARIABLE","$this",432],["T_OBJECT_OPERATOR","->",432],["T_STRING","_order",432],["T_WHITESPACE"," ",432],"=",["T_WHITESPACE"," ",432],["T_VARIABLE","$order",432],";",["T_WHITESPACE","\n        ",432],["T_VARIABLE","$this",433],["T_OBJECT_OPERATOR","->",433],["T_STRING","setOrderId",433],"(",["T_VARIABLE","$order",433],["T_OBJECT_OPERATOR","->",433],["T_STRING","getId",433],"(",")",")",";",["T_WHITESPACE","\n        ",433],["T_RETURN","return",434],["T_WHITESPACE"," ",434],["T_VARIABLE","$this",434],";",["T_WHITESPACE","\n    ",434],"}",["T_WHITESPACE","\n\n    ",435],["T_DOC_COMMENT","\/**\n     * Retrieve order model object\n     *\n     * @return Mage_Sales_Model_Order\n     *\/",437],["T_WHITESPACE","\n    ",441],["T_PUBLIC","public",442],["T_WHITESPACE"," ",442],["T_FUNCTION","function",442],["T_WHITESPACE"," ",442],["T_STRING","getOrder",442],"(",")",["T_WHITESPACE","\n    ",442],"{",["T_WHITESPACE","\n        ",443],["T_IF","if",444],["T_WHITESPACE"," ",444],"(",["T_STRING","is_null",444],"(",["T_VARIABLE","$this",444],["T_OBJECT_OPERATOR","->",444],["T_STRING","_order",444],")",["T_WHITESPACE"," ",444],["T_BOOLEAN_AND","&&",444],["T_WHITESPACE"," ",444],"(",["T_VARIABLE","$orderId",444],["T_WHITESPACE"," ",444],"=",["T_WHITESPACE"," ",444],["T_VARIABLE","$this",444],["T_OBJECT_OPERATOR","->",444],["T_STRING","getOrderId",444],"(",")",")",")",["T_WHITESPACE"," ",444],"{",["T_WHITESPACE","\n            ",444],["T_VARIABLE","$order",445],["T_WHITESPACE"," ",445],"=",["T_WHITESPACE"," ",445],["T_STRING","Mage",445],["T_DOUBLE_COLON","::",445],["T_STRING","getModel",445],"(",["T_CONSTANT_ENCAPSED_STRING","'sales\/order'",445],")",";",["T_WHITESPACE","\n            ",445],["T_VARIABLE","$order",446],["T_OBJECT_OPERATOR","->",446],["T_STRING","load",446],"(",["T_VARIABLE","$orderId",446],")",";",["T_WHITESPACE","\n            ",446],["T_VARIABLE","$this",447],["T_OBJECT_OPERATOR","->",447],["T_STRING","setOrder",447],"(",["T_VARIABLE","$order",447],")",";",["T_WHITESPACE","\n        ",447],"}",["T_WHITESPACE","\n        ",448],["T_RETURN","return",449],["T_WHITESPACE"," ",449],["T_VARIABLE","$this",449],["T_OBJECT_OPERATOR","->",449],["T_STRING","_order",449],";",["T_WHITESPACE","\n    ",449],"}",["T_WHITESPACE","\n\n    ",450],["T_DOC_COMMENT","\/**\n     * Retrieve item status identifier\n     *\n     * @return int\n     *\/",452],["T_WHITESPACE","\n    ",456],["T_PUBLIC","public",457],["T_WHITESPACE"," ",457],["T_FUNCTION","function",457],["T_WHITESPACE"," ",457],["T_STRING","getStatusId",457],"(",")",["T_WHITESPACE","\n    ",457],"{",["T_WHITESPACE","\n        ",458],["T_VARIABLE","$backordered",459],["T_WHITESPACE"," ",459],"=",["T_WHITESPACE"," ",459],["T_DOUBLE_CAST","(float)",459],["T_VARIABLE","$this",459],["T_OBJECT_OPERATOR","->",459],["T_STRING","getQtyBackordered",459],"(",")",";",["T_WHITESPACE","\n        ",459],["T_IF","if",460],["T_WHITESPACE"," ",460],"(","!",["T_VARIABLE","$backordered",460],["T_WHITESPACE"," ",460],["T_BOOLEAN_AND","&&",460],["T_WHITESPACE"," ",460],["T_VARIABLE","$this",460],["T_OBJECT_OPERATOR","->",460],["T_STRING","getHasChildren",460],"(",")",")",["T_WHITESPACE"," ",460],"{",["T_WHITESPACE","\n            ",460],["T_VARIABLE","$backordered",461],["T_WHITESPACE"," ",461],"=",["T_WHITESPACE"," ",461],["T_DOUBLE_CAST","(float)",461],["T_VARIABLE","$this",461],["T_OBJECT_OPERATOR","->",461],["T_STRING","_getQtyChildrenBackordered",461],"(",")",";",["T_WHITESPACE","\n        ",461],"}",["T_WHITESPACE","\n        ",462],["T_VARIABLE","$canceled",463],["T_WHITESPACE","    ",463],"=",["T_WHITESPACE"," ",463],["T_DOUBLE_CAST","(float)",463],["T_VARIABLE","$this",463],["T_OBJECT_OPERATOR","->",463],["T_STRING","getQtyCanceled",463],"(",")",";",["T_WHITESPACE","\n        ",463],["T_VARIABLE","$invoiced",464],["T_WHITESPACE","    ",464],"=",["T_WHITESPACE"," ",464],["T_DOUBLE_CAST","(float)",464],["T_VARIABLE","$this",464],["T_OBJECT_OPERATOR","->",464],["T_STRING","getQtyInvoiced",464],"(",")",";",["T_WHITESPACE","\n        ",464],["T_VARIABLE","$ordered",465],["T_WHITESPACE","     ",465],"=",["T_WHITESPACE"," ",465],["T_DOUBLE_CAST","(float)",465],["T_VARIABLE","$this",465],["T_OBJECT_OPERATOR","->",465],["T_STRING","getQtyOrdered",465],"(",")",";",["T_WHITESPACE","\n        ",465],["T_VARIABLE","$refunded",466],["T_WHITESPACE","    ",466],"=",["T_WHITESPACE"," ",466],["T_DOUBLE_CAST","(float)",466],["T_VARIABLE","$this",466],["T_OBJECT_OPERATOR","->",466],["T_STRING","getQtyRefunded",466],"(",")",";",["T_WHITESPACE","\n        ",466],["T_VARIABLE","$shipped",467],["T_WHITESPACE","     ",467],"=",["T_WHITESPACE"," ",467],["T_DOUBLE_CAST","(float)",467],["T_VARIABLE","$this",467],["T_OBJECT_OPERATOR","->",467],["T_STRING","getQtyShipped",467],"(",")",";",["T_WHITESPACE","\n\n        ",467],["T_VARIABLE","$actuallyOrdered",469],["T_WHITESPACE"," ",469],"=",["T_WHITESPACE"," ",469],["T_VARIABLE","$ordered",469],["T_WHITESPACE"," ",469],"-",["T_WHITESPACE"," ",469],["T_VARIABLE","$canceled",469],["T_WHITESPACE"," ",469],"-",["T_WHITESPACE"," ",469],["T_VARIABLE","$refunded",469],";",["T_WHITESPACE","\n\n        ",469],["T_IF","if",471],["T_WHITESPACE"," ",471],"(","!",["T_VARIABLE","$invoiced",471],["T_WHITESPACE"," ",471],["T_BOOLEAN_AND","&&",471],["T_WHITESPACE"," ",471],"!",["T_VARIABLE","$shipped",471],["T_WHITESPACE"," ",471],["T_BOOLEAN_AND","&&",471],["T_WHITESPACE"," ",471],"!",["T_VARIABLE","$refunded",471],["T_WHITESPACE"," ",471],["T_BOOLEAN_AND","&&",471],["T_WHITESPACE"," ",471],"!",["T_VARIABLE","$canceled",471],["T_WHITESPACE"," ",471],["T_BOOLEAN_AND","&&",471],["T_WHITESPACE"," ",471],"!",["T_VARIABLE","$backordered",471],")",["T_WHITESPACE"," ",471],"{",["T_WHITESPACE","\n            ",471],["T_RETURN","return",472],["T_WHITESPACE"," ",472],["T_STRING","self",472],["T_DOUBLE_COLON","::",472],["T_STRING","STATUS_PENDING",472],";",["T_WHITESPACE","\n        ",472],"}",["T_WHITESPACE","\n        ",473],["T_IF","if",474],["T_WHITESPACE"," ",474],"(",["T_VARIABLE","$shipped",474],["T_WHITESPACE"," ",474],["T_BOOLEAN_AND","&&",474],["T_WHITESPACE"," ",474],["T_VARIABLE","$invoiced",474],["T_WHITESPACE"," ",474],["T_BOOLEAN_AND","&&",474],["T_WHITESPACE"," ",474],"(",["T_VARIABLE","$actuallyOrdered",474],["T_WHITESPACE"," ",474],["T_IS_EQUAL","==",474],["T_WHITESPACE"," ",474],["T_VARIABLE","$shipped",474],")",")",["T_WHITESPACE"," ",474],"{",["T_WHITESPACE","\n            ",474],["T_RETURN","return",475],["T_WHITESPACE"," ",475],["T_STRING","self",475],["T_DOUBLE_COLON","::",475],["T_STRING","STATUS_SHIPPED",475],";",["T_WHITESPACE","\n        ",475],"}",["T_WHITESPACE","\n\n        ",476],["T_IF","if",478],["T_WHITESPACE"," ",478],"(",["T_VARIABLE","$invoiced",478],["T_WHITESPACE"," ",478],["T_BOOLEAN_AND","&&",478],["T_WHITESPACE"," ",478],"!",["T_VARIABLE","$shipped",478],["T_WHITESPACE"," ",478],["T_BOOLEAN_AND","&&",478],["T_WHITESPACE"," ",478],"(",["T_VARIABLE","$actuallyOrdered",478],["T_WHITESPACE"," ",478],["T_IS_EQUAL","==",478],["T_WHITESPACE"," ",478],["T_VARIABLE","$invoiced",478],")",")",["T_WHITESPACE"," ",478],"{",["T_WHITESPACE","\n            ",478],["T_RETURN","return",479],["T_WHITESPACE"," ",479],["T_STRING","self",479],["T_DOUBLE_COLON","::",479],["T_STRING","STATUS_INVOICED",479],";",["T_WHITESPACE","\n        ",479],"}",["T_WHITESPACE","\n\n        ",480],["T_IF","if",482],["T_WHITESPACE"," ",482],"(",["T_VARIABLE","$backordered",482],["T_WHITESPACE"," ",482],["T_BOOLEAN_AND","&&",482],["T_WHITESPACE"," ",482],"(",["T_VARIABLE","$actuallyOrdered",482],["T_WHITESPACE"," ",482],["T_IS_EQUAL","==",482],["T_WHITESPACE"," ",482],["T_VARIABLE","$backordered",482],")",["T_WHITESPACE"," ",482],")",["T_WHITESPACE"," ",482],"{",["T_WHITESPACE","\n            ",482],["T_RETURN","return",483],["T_WHITESPACE"," ",483],["T_STRING","self",483],["T_DOUBLE_COLON","::",483],["T_STRING","STATUS_BACKORDERED",483],";",["T_WHITESPACE","\n        ",483],"}",["T_WHITESPACE","\n\n        ",484],["T_IF","if",486],["T_WHITESPACE"," ",486],"(",["T_VARIABLE","$refunded",486],["T_WHITESPACE"," ",486],["T_BOOLEAN_AND","&&",486],["T_WHITESPACE"," ",486],["T_VARIABLE","$ordered",486],["T_WHITESPACE"," ",486],["T_IS_EQUAL","==",486],["T_WHITESPACE"," ",486],["T_VARIABLE","$refunded",486],")",["T_WHITESPACE"," ",486],"{",["T_WHITESPACE","\n            ",486],["T_RETURN","return",487],["T_WHITESPACE"," ",487],["T_STRING","self",487],["T_DOUBLE_COLON","::",487],["T_STRING","STATUS_REFUNDED",487],";",["T_WHITESPACE","\n        ",487],"}",["T_WHITESPACE","\n\n        ",488],["T_IF","if",490],["T_WHITESPACE"," ",490],"(",["T_VARIABLE","$canceled",490],["T_WHITESPACE"," ",490],["T_BOOLEAN_AND","&&",490],["T_WHITESPACE"," ",490],["T_VARIABLE","$ordered",490],["T_WHITESPACE"," ",490],["T_IS_EQUAL","==",490],["T_WHITESPACE"," ",490],["T_VARIABLE","$canceled",490],")",["T_WHITESPACE"," ",490],"{",["T_WHITESPACE","\n            ",490],["T_RETURN","return",491],["T_WHITESPACE"," ",491],["T_STRING","self",491],["T_DOUBLE_COLON","::",491],["T_STRING","STATUS_CANCELED",491],";",["T_WHITESPACE","\n        ",491],"}",["T_WHITESPACE","\n\n        ",492],["T_IF","if",494],["T_WHITESPACE"," ",494],"(",["T_STRING","max",494],"(",["T_VARIABLE","$shipped",494],",",["T_WHITESPACE"," ",494],["T_VARIABLE","$invoiced",494],")",["T_WHITESPACE"," ",494],"<",["T_WHITESPACE"," ",494],["T_VARIABLE","$actuallyOrdered",494],")",["T_WHITESPACE"," ",494],"{",["T_WHITESPACE","\n            ",494],["T_RETURN","return",495],["T_WHITESPACE"," ",495],["T_STRING","self",495],["T_DOUBLE_COLON","::",495],["T_STRING","STATUS_PARTIAL",495],";",["T_WHITESPACE","\n        ",495],"}",["T_WHITESPACE","\n\n        ",496],["T_RETURN","return",498],["T_WHITESPACE"," ",498],["T_STRING","self",498],["T_DOUBLE_COLON","::",498],["T_STRING","STATUS_MIXED",498],";",["T_WHITESPACE","\n    ",498],"}",["T_WHITESPACE","\n\n    ",499],["T_DOC_COMMENT","\/**\n     * Retrieve backordered qty of children items\n     *\n     * @return float|null\n     *\/",501],["T_WHITESPACE","\n    ",505],["T_PROTECTED","protected",506],["T_WHITESPACE"," ",506],["T_FUNCTION","function",506],["T_WHITESPACE"," ",506],["T_STRING","_getQtyChildrenBackordered",506],"(",")",["T_WHITESPACE","\n    ",506],"{",["T_WHITESPACE","\n        ",507],["T_VARIABLE","$backordered",508],["T_WHITESPACE"," ",508],"=",["T_WHITESPACE"," ",508],["T_STRING","null",508],";",["T_WHITESPACE","\n        ",508],["T_FOREACH","foreach",509],["T_WHITESPACE"," ",509],"(",["T_VARIABLE","$this",509],["T_OBJECT_OPERATOR","->",509],["T_STRING","_children",509],["T_WHITESPACE"," ",509],["T_AS","as",509],["T_WHITESPACE"," ",509],["T_VARIABLE","$childItem",509],")",["T_WHITESPACE"," ",509],"{",["T_WHITESPACE","\n            ",509],["T_VARIABLE","$backordered",510],["T_WHITESPACE"," ",510],["T_PLUS_EQUAL","+=",510],["T_WHITESPACE"," ",510],["T_DOUBLE_CAST","(float)",510],["T_VARIABLE","$childItem",510],["T_OBJECT_OPERATOR","->",510],["T_STRING","getQtyBackordered",510],"(",")",";",["T_WHITESPACE","\n        ",510],"}",["T_WHITESPACE","\n\n        ",511],["T_RETURN","return",513],["T_WHITESPACE"," ",513],["T_VARIABLE","$backordered",513],";",["T_WHITESPACE","\n    ",513],"}",["T_WHITESPACE","\n\n    ",514],["T_DOC_COMMENT","\/**\n     * Retrieve status\n     *\n     * @return string\n     *\/",516],["T_WHITESPACE","\n    ",520],["T_PUBLIC","public",521],["T_WHITESPACE"," ",521],["T_FUNCTION","function",521],["T_WHITESPACE"," ",521],["T_STRING","getStatus",521],"(",")",["T_WHITESPACE","\n    ",521],"{",["T_WHITESPACE","\n        ",522],["T_RETURN","return",523],["T_WHITESPACE"," ",523],["T_VARIABLE","$this",523],["T_OBJECT_OPERATOR","->",523],["T_STRING","getStatusName",523],"(",["T_VARIABLE","$this",523],["T_OBJECT_OPERATOR","->",523],["T_STRING","getStatusId",523],"(",")",")",";",["T_WHITESPACE","\n    ",523],"}",["T_WHITESPACE","\n\n    ",524],["T_DOC_COMMENT","\/**\n     * Retrieve status name\n     *\n     * @return string\n     *\/",526],["T_WHITESPACE","\n    ",530],["T_PUBLIC","public",531],["T_WHITESPACE"," ",531],["T_STATIC","static",531],["T_WHITESPACE"," ",531],["T_FUNCTION","function",531],["T_WHITESPACE"," ",531],["T_STRING","getStatusName",531],"(",["T_VARIABLE","$statusId",531],")",["T_WHITESPACE","\n    ",531],"{",["T_WHITESPACE","\n        ",532],["T_IF","if",533],["T_WHITESPACE"," ",533],"(",["T_STRING","is_null",533],"(",["T_STRING","self",533],["T_DOUBLE_COLON","::",533],["T_VARIABLE","$_statuses",533],")",")",["T_WHITESPACE"," ",533],"{",["T_WHITESPACE","\n            ",533],["T_STRING","self",534],["T_DOUBLE_COLON","::",534],["T_STRING","getStatuses",534],"(",")",";",["T_WHITESPACE","\n        ",534],"}",["T_WHITESPACE","\n        ",535],["T_IF","if",536],["T_WHITESPACE"," ",536],"(",["T_ISSET","isset",536],"(",["T_STRING","self",536],["T_DOUBLE_COLON","::",536],["T_VARIABLE","$_statuses",536],"[",["T_VARIABLE","$statusId",536],"]",")",")",["T_WHITESPACE"," ",536],"{",["T_WHITESPACE","\n            ",536],["T_RETURN","return",537],["T_WHITESPACE"," ",537],["T_STRING","self",537],["T_DOUBLE_COLON","::",537],["T_VARIABLE","$_statuses",537],"[",["T_VARIABLE","$statusId",537],"]",";",["T_WHITESPACE","\n        ",537],"}",["T_WHITESPACE","\n        ",538],["T_RETURN","return",539],["T_WHITESPACE"," ",539],["T_STRING","Mage",539],["T_DOUBLE_COLON","::",539],["T_STRING","helper",539],"(",["T_CONSTANT_ENCAPSED_STRING","'sales'",539],")",["T_OBJECT_OPERATOR","->",539],["T_STRING","__",539],"(",["T_CONSTANT_ENCAPSED_STRING","'Unknown Status'",539],")",";",["T_WHITESPACE","\n    ",539],"}",["T_WHITESPACE","\n\n    ",540],["T_DOC_COMMENT","\/**\n     * Cancel order item\n     *\n     * @return Mage_Sales_Model_Order_Item\n     *\/",542],["T_WHITESPACE","\n    ",546],["T_PUBLIC","public",547],["T_WHITESPACE"," ",547],["T_FUNCTION","function",547],["T_WHITESPACE"," ",547],["T_STRING","cancel",547],"(",")",["T_WHITESPACE","\n    ",547],"{",["T_WHITESPACE","\n        ",548],["T_IF","if",549],["T_WHITESPACE"," ",549],"(",["T_VARIABLE","$this",549],["T_OBJECT_OPERATOR","->",549],["T_STRING","getStatusId",549],"(",")",["T_WHITESPACE"," ",549],["T_IS_NOT_IDENTICAL","!==",549],["T_WHITESPACE"," ",549],["T_STRING","self",549],["T_DOUBLE_COLON","::",549],["T_STRING","STATUS_CANCELED",549],")",["T_WHITESPACE"," ",549],"{",["T_WHITESPACE","\n            ",549],["T_STRING","Mage",550],["T_DOUBLE_COLON","::",550],["T_STRING","dispatchEvent",550],"(",["T_CONSTANT_ENCAPSED_STRING","'sales_order_item_cancel'",550],",",["T_WHITESPACE"," ",550],["T_ARRAY","array",550],"(",["T_CONSTANT_ENCAPSED_STRING","'item'",550],["T_DOUBLE_ARROW","=>",550],["T_VARIABLE","$this",550],")",")",";",["T_WHITESPACE","\n            ",550],["T_VARIABLE","$this",551],["T_OBJECT_OPERATOR","->",551],["T_STRING","setQtyCanceled",551],"(",["T_VARIABLE","$this",551],["T_OBJECT_OPERATOR","->",551],["T_STRING","getQtyToCancel",551],"(",")",")",";",["T_WHITESPACE","\n            ",551],["T_VARIABLE","$this",552],["T_OBJECT_OPERATOR","->",552],["T_STRING","setTaxCanceled",552],"(",["T_WHITESPACE","\n                ",552],["T_VARIABLE","$this",553],["T_OBJECT_OPERATOR","->",553],["T_STRING","getTaxCanceled",553],"(",")",["T_WHITESPACE"," ",553],"+",["T_WHITESPACE","\n                ",553],["T_VARIABLE","$this",554],["T_OBJECT_OPERATOR","->",554],["T_STRING","getBaseTaxAmount",554],"(",")",["T_WHITESPACE"," ",554],"*",["T_WHITESPACE"," ",554],["T_VARIABLE","$this",554],["T_OBJECT_OPERATOR","->",554],["T_STRING","getQtyCanceled",554],"(",")",["T_WHITESPACE"," ",554],"\/",["T_WHITESPACE"," ",554],["T_VARIABLE","$this",554],["T_OBJECT_OPERATOR","->",554],["T_STRING","getQtyOrdered",554],"(",")",["T_WHITESPACE","\n            ",554],")",";",["T_WHITESPACE","\n            ",555],["T_VARIABLE","$this",556],["T_OBJECT_OPERATOR","->",556],["T_STRING","setHiddenTaxCanceled",556],"(",["T_WHITESPACE","\n                ",556],["T_VARIABLE","$this",557],["T_OBJECT_OPERATOR","->",557],["T_STRING","getHiddenTaxCanceled",557],"(",")",["T_WHITESPACE"," ",557],"+",["T_WHITESPACE","\n                ",557],["T_VARIABLE","$this",558],["T_OBJECT_OPERATOR","->",558],["T_STRING","getHiddenTaxAmount",558],"(",")",["T_WHITESPACE"," ",558],"*",["T_WHITESPACE"," ",558],["T_VARIABLE","$this",558],["T_OBJECT_OPERATOR","->",558],["T_STRING","getQtyCanceled",558],"(",")",["T_WHITESPACE"," ",558],"\/",["T_WHITESPACE"," ",558],["T_VARIABLE","$this",558],["T_OBJECT_OPERATOR","->",558],["T_STRING","getQtyOrdered",558],"(",")",["T_WHITESPACE","\n            ",558],")",";",["T_WHITESPACE","\n        ",559],"}",["T_WHITESPACE","\n        ",560],["T_RETURN","return",561],["T_WHITESPACE"," ",561],["T_VARIABLE","$this",561],";",["T_WHITESPACE","\n    ",561],"}",["T_WHITESPACE","\n\n    ",562],["T_DOC_COMMENT","\/**\n     * Retrieve order item statuses array\n     *\n     * @return array\n     *\/",564],["T_WHITESPACE","\n    ",568],["T_PUBLIC","public",569],["T_WHITESPACE"," ",569],["T_STATIC","static",569],["T_WHITESPACE"," ",569],["T_FUNCTION","function",569],["T_WHITESPACE"," ",569],["T_STRING","getStatuses",569],"(",")",["T_WHITESPACE","\n    ",569],"{",["T_WHITESPACE","\n        ",570],["T_IF","if",571],["T_WHITESPACE"," ",571],"(",["T_STRING","is_null",571],"(",["T_STRING","self",571],["T_DOUBLE_COLON","::",571],["T_VARIABLE","$_statuses",571],")",")",["T_WHITESPACE"," ",571],"{",["T_WHITESPACE","\n            ",571],["T_STRING","self",572],["T_DOUBLE_COLON","::",572],["T_VARIABLE","$_statuses",572],["T_WHITESPACE"," ",572],"=",["T_WHITESPACE"," ",572],["T_ARRAY","array",572],"(",["T_WHITESPACE","\n                ",572],["T_COMMENT","\/\/self::STATUS_PENDING        => Mage::helper('sales')->__('Pending'),\n",573],["T_WHITESPACE","                ",574],["T_STRING","self",574],["T_DOUBLE_COLON","::",574],["T_STRING","STATUS_PENDING",574],["T_WHITESPACE","        ",574],["T_DOUBLE_ARROW","=>",574],["T_WHITESPACE"," ",574],["T_STRING","Mage",574],["T_DOUBLE_COLON","::",574],["T_STRING","helper",574],"(",["T_CONSTANT_ENCAPSED_STRING","'sales'",574],")",["T_OBJECT_OPERATOR","->",574],["T_STRING","__",574],"(",["T_CONSTANT_ENCAPSED_STRING","'Ordered'",574],")",",",["T_WHITESPACE","\n                ",574],["T_STRING","self",575],["T_DOUBLE_COLON","::",575],["T_STRING","STATUS_SHIPPED",575],["T_WHITESPACE","        ",575],["T_DOUBLE_ARROW","=>",575],["T_WHITESPACE"," ",575],["T_STRING","Mage",575],["T_DOUBLE_COLON","::",575],["T_STRING","helper",575],"(",["T_CONSTANT_ENCAPSED_STRING","'sales'",575],")",["T_OBJECT_OPERATOR","->",575],["T_STRING","__",575],"(",["T_CONSTANT_ENCAPSED_STRING","'Shipped'",575],")",",",["T_WHITESPACE","\n                ",575],["T_STRING","self",576],["T_DOUBLE_COLON","::",576],["T_STRING","STATUS_INVOICED",576],["T_WHITESPACE","       ",576],["T_DOUBLE_ARROW","=>",576],["T_WHITESPACE"," ",576],["T_STRING","Mage",576],["T_DOUBLE_COLON","::",576],["T_STRING","helper",576],"(",["T_CONSTANT_ENCAPSED_STRING","'sales'",576],")",["T_OBJECT_OPERATOR","->",576],["T_STRING","__",576],"(",["T_CONSTANT_ENCAPSED_STRING","'Invoiced'",576],")",",",["T_WHITESPACE","\n                ",576],["T_STRING","self",577],["T_DOUBLE_COLON","::",577],["T_STRING","STATUS_BACKORDERED",577],["T_WHITESPACE","    ",577],["T_DOUBLE_ARROW","=>",577],["T_WHITESPACE"," ",577],["T_STRING","Mage",577],["T_DOUBLE_COLON","::",577],["T_STRING","helper",577],"(",["T_CONSTANT_ENCAPSED_STRING","'sales'",577],")",["T_OBJECT_OPERATOR","->",577],["T_STRING","__",577],"(",["T_CONSTANT_ENCAPSED_STRING","'Backordered'",577],")",",",["T_WHITESPACE","\n                ",577],["T_STRING","self",578],["T_DOUBLE_COLON","::",578],["T_STRING","STATUS_RETURNED",578],["T_WHITESPACE","       ",578],["T_DOUBLE_ARROW","=>",578],["T_WHITESPACE"," ",578],["T_STRING","Mage",578],["T_DOUBLE_COLON","::",578],["T_STRING","helper",578],"(",["T_CONSTANT_ENCAPSED_STRING","'sales'",578],")",["T_OBJECT_OPERATOR","->",578],["T_STRING","__",578],"(",["T_CONSTANT_ENCAPSED_STRING","'Returned'",578],")",",",["T_WHITESPACE","\n                ",578],["T_STRING","self",579],["T_DOUBLE_COLON","::",579],["T_STRING","STATUS_REFUNDED",579],["T_WHITESPACE","       ",579],["T_DOUBLE_ARROW","=>",579],["T_WHITESPACE"," ",579],["T_STRING","Mage",579],["T_DOUBLE_COLON","::",579],["T_STRING","helper",579],"(",["T_CONSTANT_ENCAPSED_STRING","'sales'",579],")",["T_OBJECT_OPERATOR","->",579],["T_STRING","__",579],"(",["T_CONSTANT_ENCAPSED_STRING","'Refunded'",579],")",",",["T_WHITESPACE","\n                ",579],["T_STRING","self",580],["T_DOUBLE_COLON","::",580],["T_STRING","STATUS_CANCELED",580],["T_WHITESPACE","       ",580],["T_DOUBLE_ARROW","=>",580],["T_WHITESPACE"," ",580],["T_STRING","Mage",580],["T_DOUBLE_COLON","::",580],["T_STRING","helper",580],"(",["T_CONSTANT_ENCAPSED_STRING","'sales'",580],")",["T_OBJECT_OPERATOR","->",580],["T_STRING","__",580],"(",["T_CONSTANT_ENCAPSED_STRING","'Canceled'",580],")",",",["T_WHITESPACE","\n                ",580],["T_STRING","self",581],["T_DOUBLE_COLON","::",581],["T_STRING","STATUS_PARTIAL",581],["T_WHITESPACE","        ",581],["T_DOUBLE_ARROW","=>",581],["T_WHITESPACE"," ",581],["T_STRING","Mage",581],["T_DOUBLE_COLON","::",581],["T_STRING","helper",581],"(",["T_CONSTANT_ENCAPSED_STRING","'sales'",581],")",["T_OBJECT_OPERATOR","->",581],["T_STRING","__",581],"(",["T_CONSTANT_ENCAPSED_STRING","'Partial'",581],")",",",["T_WHITESPACE","\n                ",581],["T_STRING","self",582],["T_DOUBLE_COLON","::",582],["T_STRING","STATUS_MIXED",582],["T_WHITESPACE","          ",582],["T_DOUBLE_ARROW","=>",582],["T_WHITESPACE"," ",582],["T_STRING","Mage",582],["T_DOUBLE_COLON","::",582],["T_STRING","helper",582],"(",["T_CONSTANT_ENCAPSED_STRING","'sales'",582],")",["T_OBJECT_OPERATOR","->",582],["T_STRING","__",582],"(",["T_CONSTANT_ENCAPSED_STRING","'Mixed'",582],")",",",["T_WHITESPACE","\n            ",582],")",";",["T_WHITESPACE","\n        ",583],"}",["T_WHITESPACE","\n        ",584],["T_RETURN","return",585],["T_WHITESPACE"," ",585],["T_STRING","self",585],["T_DOUBLE_COLON","::",585],["T_VARIABLE","$_statuses",585],";",["T_WHITESPACE","\n    ",585],"}",["T_WHITESPACE","\n\n    ",586],["T_DOC_COMMENT","\/**\n     * Redeclare getter for back compatibility\n     *\n     * @return float\n     *\/",588],["T_WHITESPACE","\n    ",592],["T_PUBLIC","public",593],["T_WHITESPACE"," ",593],["T_FUNCTION","function",593],["T_WHITESPACE"," ",593],["T_STRING","getOriginalPrice",593],"(",")",["T_WHITESPACE","\n    ",593],"{",["T_WHITESPACE","\n        ",594],["T_VARIABLE","$price",595],["T_WHITESPACE"," ",595],"=",["T_WHITESPACE"," ",595],["T_VARIABLE","$this",595],["T_OBJECT_OPERATOR","->",595],["T_STRING","getData",595],"(",["T_CONSTANT_ENCAPSED_STRING","'original_price'",595],")",";",["T_WHITESPACE","\n        ",595],["T_IF","if",596],["T_WHITESPACE"," ",596],"(",["T_STRING","is_null",596],"(",["T_VARIABLE","$price",596],")",")",["T_WHITESPACE"," ",596],"{",["T_WHITESPACE","\n            ",596],["T_RETURN","return",597],["T_WHITESPACE"," ",597],["T_VARIABLE","$this",597],["T_OBJECT_OPERATOR","->",597],["T_STRING","getPrice",597],"(",")",";",["T_WHITESPACE","\n        ",597],"}",["T_WHITESPACE","\n        ",598],["T_RETURN","return",599],["T_WHITESPACE"," ",599],["T_VARIABLE","$price",599],";",["T_WHITESPACE","\n    ",599],"}",["T_WHITESPACE","\n\n    ",600],["T_DOC_COMMENT","\/**\n     * Set product options\n     *\n     * @param   array $options\n     * @return  Mage_Sales_Model_Order_Item\n     *\/",602],["T_WHITESPACE","\n    ",607],["T_PUBLIC","public",608],["T_WHITESPACE"," ",608],["T_FUNCTION","function",608],["T_WHITESPACE"," ",608],["T_STRING","setProductOptions",608],"(",["T_ARRAY","array",608],["T_WHITESPACE"," ",608],["T_VARIABLE","$options",608],")",["T_WHITESPACE","\n    ",608],"{",["T_WHITESPACE","\n        ",609],["T_VARIABLE","$this",610],["T_OBJECT_OPERATOR","->",610],["T_STRING","setData",610],"(",["T_CONSTANT_ENCAPSED_STRING","'product_options'",610],",",["T_WHITESPACE"," ",610],["T_STRING","serialize",610],"(",["T_VARIABLE","$options",610],")",")",";",["T_WHITESPACE","\n        ",610],["T_RETURN","return",611],["T_WHITESPACE"," ",611],["T_VARIABLE","$this",611],";",["T_WHITESPACE","\n    ",611],"}",["T_WHITESPACE","\n\n    ",612],["T_DOC_COMMENT","\/**\n     * Get product options array\n     *\n     * @return array\n     *\/",614],["T_WHITESPACE","\n    ",618],["T_PUBLIC","public",619],["T_WHITESPACE"," ",619],["T_FUNCTION","function",619],["T_WHITESPACE"," ",619],["T_STRING","getProductOptions",619],"(",")",["T_WHITESPACE","\n    ",619],"{",["T_WHITESPACE","\n        ",620],["T_IF","if",621],["T_WHITESPACE"," ",621],"(",["T_VARIABLE","$options",621],["T_WHITESPACE"," ",621],"=",["T_WHITESPACE"," ",621],["T_VARIABLE","$this",621],["T_OBJECT_OPERATOR","->",621],["T_STRING","_getData",621],"(",["T_CONSTANT_ENCAPSED_STRING","'product_options'",621],")",")",["T_WHITESPACE"," ",621],"{",["T_WHITESPACE","\n            ",621],["T_RETURN","return",622],["T_WHITESPACE"," ",622],["T_STRING","unserialize",622],"(",["T_VARIABLE","$options",622],")",";",["T_WHITESPACE","\n        ",622],"}",["T_WHITESPACE","\n        ",623],["T_RETURN","return",624],["T_WHITESPACE"," ",624],["T_ARRAY","array",624],"(",")",";",["T_WHITESPACE","\n    ",624],"}",["T_WHITESPACE","\n\n    ",625],["T_DOC_COMMENT","\/**\n     * Get product options array by code.\n     * If code is null return all options\n     *\n     * @param string $code\n     * @return array\n     *\/",627],["T_WHITESPACE","\n    ",633],["T_PUBLIC","public",634],["T_WHITESPACE"," ",634],["T_FUNCTION","function",634],["T_WHITESPACE"," ",634],["T_STRING","getProductOptionByCode",634],"(",["T_VARIABLE","$code",634],"=",["T_STRING","null",634],")",["T_WHITESPACE","\n    ",634],"{",["T_WHITESPACE","\n        ",635],["T_VARIABLE","$options",636],["T_WHITESPACE"," ",636],"=",["T_WHITESPACE"," ",636],["T_VARIABLE","$this",636],["T_OBJECT_OPERATOR","->",636],["T_STRING","getProductOptions",636],"(",")",";",["T_WHITESPACE","\n        ",636],["T_IF","if",637],["T_WHITESPACE"," ",637],"(",["T_STRING","is_null",637],"(",["T_VARIABLE","$code",637],")",")",["T_WHITESPACE"," ",637],"{",["T_WHITESPACE","\n            ",637],["T_RETURN","return",638],["T_WHITESPACE"," ",638],["T_VARIABLE","$options",638],";",["T_WHITESPACE","\n        ",638],"}",["T_WHITESPACE","\n        ",639],["T_IF","if",640],["T_WHITESPACE"," ",640],"(",["T_ISSET","isset",640],"(",["T_VARIABLE","$options",640],"[",["T_VARIABLE","$code",640],"]",")",")",["T_WHITESPACE"," ",640],"{",["T_WHITESPACE","\n            ",640],["T_RETURN","return",641],["T_WHITESPACE"," ",641],["T_VARIABLE","$options",641],"[",["T_VARIABLE","$code",641],"]",";",["T_WHITESPACE","\n        ",641],"}",["T_WHITESPACE","\n        ",642],["T_RETURN","return",643],["T_WHITESPACE"," ",643],["T_STRING","null",643],";",["T_WHITESPACE","\n    ",643],"}",["T_WHITESPACE","\n\n    ",644],["T_DOC_COMMENT","\/**\n     * Return real product type of item or NULL if item is not composite\n     *\n     * @return string | null\n     *\/",646],["T_WHITESPACE","\n    ",650],["T_PUBLIC","public",651],["T_WHITESPACE"," ",651],["T_FUNCTION","function",651],["T_WHITESPACE"," ",651],["T_STRING","getRealProductType",651],"(",")",["T_WHITESPACE","\n    ",651],"{",["T_WHITESPACE","\n        ",652],["T_IF","if",653],["T_WHITESPACE"," ",653],"(",["T_VARIABLE","$productType",653],["T_WHITESPACE"," ",653],"=",["T_WHITESPACE"," ",653],["T_VARIABLE","$this",653],["T_OBJECT_OPERATOR","->",653],["T_STRING","getProductOptionByCode",653],"(",["T_CONSTANT_ENCAPSED_STRING","'real_product_type'",653],")",")",["T_WHITESPACE"," ",653],"{",["T_WHITESPACE","\n            ",653],["T_RETURN","return",654],["T_WHITESPACE"," ",654],["T_VARIABLE","$productType",654],";",["T_WHITESPACE","\n        ",654],"}",["T_WHITESPACE","\n        ",655],["T_RETURN","return",656],["T_WHITESPACE"," ",656],["T_STRING","null",656],";",["T_WHITESPACE","\n    ",656],"}",["T_WHITESPACE","\n\n    ",657],["T_DOC_COMMENT","\/**\n     * Adds child item to this item\n     *\n     * @param Mage_Sales_Model_Order_Item $item\n     *\/",659],["T_WHITESPACE","\n    ",663],["T_PUBLIC","public",664],["T_WHITESPACE"," ",664],["T_FUNCTION","function",664],["T_WHITESPACE"," ",664],["T_STRING","addChildItem",664],"(",["T_VARIABLE","$item",664],")",["T_WHITESPACE","\n    ",664],"{",["T_WHITESPACE","\n        ",665],["T_IF","if",666],["T_WHITESPACE"," ",666],"(",["T_VARIABLE","$item",666],["T_WHITESPACE"," ",666],["T_INSTANCEOF","instanceof",666],["T_WHITESPACE"," ",666],["T_STRING","Mage_Sales_Model_Order_Item",666],")",["T_WHITESPACE"," ",666],"{",["T_WHITESPACE","\n            ",666],["T_VARIABLE","$this",667],["T_OBJECT_OPERATOR","->",667],["T_STRING","_children",667],"[","]",["T_WHITESPACE"," ",667],"=",["T_WHITESPACE"," ",667],["T_VARIABLE","$item",667],";",["T_WHITESPACE","\n        ",667],"}",["T_WHITESPACE"," ",668],["T_ELSE","else",668],["T_WHITESPACE"," ",668],["T_IF","if",668],["T_WHITESPACE"," ",668],"(",["T_STRING","is_array",668],"(",["T_VARIABLE","$item",668],")",")",["T_WHITESPACE"," ",668],"{",["T_WHITESPACE","\n            ",668],["T_VARIABLE","$this",669],["T_OBJECT_OPERATOR","->",669],["T_STRING","_children",669],["T_WHITESPACE"," ",669],"=",["T_WHITESPACE"," ",669],["T_STRING","array_merge",669],"(",["T_VARIABLE","$this",669],["T_OBJECT_OPERATOR","->",669],["T_STRING","_children",669],",",["T_WHITESPACE"," ",669],["T_VARIABLE","$item",669],")",";",["T_WHITESPACE","\n        ",669],"}",["T_WHITESPACE","\n    ",670],"}",["T_WHITESPACE","\n\n    ",671],["T_DOC_COMMENT","\/**\n     * Return chilgren items of this item\n     *\n     * @return array\n     *\/",673],["T_WHITESPACE","\n    ",677],["T_PUBLIC","public",678],["T_WHITESPACE"," ",678],["T_FUNCTION","function",678],["T_WHITESPACE"," ",678],["T_STRING","getChildrenItems",678],"(",")",["T_WHITESPACE"," ",678],"{",["T_WHITESPACE","\n        ",678],["T_RETURN","return",679],["T_WHITESPACE"," ",679],["T_VARIABLE","$this",679],["T_OBJECT_OPERATOR","->",679],["T_STRING","_children",679],";",["T_WHITESPACE","\n    ",679],"}",["T_WHITESPACE","\n\n    ",680],["T_DOC_COMMENT","\/**\n     * Return checking of what calculation\n     * type was for this product\n     *\n     * @return bool\n     *\/",682],["T_WHITESPACE","\n    ",687],["T_PUBLIC","public",688],["T_WHITESPACE"," ",688],["T_FUNCTION","function",688],["T_WHITESPACE"," ",688],["T_STRING","isChildrenCalculated",688],"(",")",["T_WHITESPACE"," ",688],"{",["T_WHITESPACE","\n        ",688],["T_IF","if",689],["T_WHITESPACE"," ",689],"(",["T_VARIABLE","$parentItem",689],["T_WHITESPACE"," ",689],"=",["T_WHITESPACE"," ",689],["T_VARIABLE","$this",689],["T_OBJECT_OPERATOR","->",689],["T_STRING","getParentItem",689],"(",")",")",["T_WHITESPACE"," ",689],"{",["T_WHITESPACE","\n            ",689],["T_VARIABLE","$options",690],["T_WHITESPACE"," ",690],"=",["T_WHITESPACE"," ",690],["T_VARIABLE","$parentItem",690],["T_OBJECT_OPERATOR","->",690],["T_STRING","getProductOptions",690],"(",")",";",["T_WHITESPACE","\n        ",690],"}",["T_WHITESPACE"," ",691],["T_ELSE","else",691],["T_WHITESPACE"," ",691],"{",["T_WHITESPACE","\n            ",691],["T_VARIABLE","$options",692],["T_WHITESPACE"," ",692],"=",["T_WHITESPACE"," ",692],["T_VARIABLE","$this",692],["T_OBJECT_OPERATOR","->",692],["T_STRING","getProductOptions",692],"(",")",";",["T_WHITESPACE","\n        ",692],"}",["T_WHITESPACE","\n\n        ",693],["T_IF","if",695],["T_WHITESPACE"," ",695],"(",["T_ISSET","isset",695],"(",["T_VARIABLE","$options",695],"[",["T_CONSTANT_ENCAPSED_STRING","'product_calculations'",695],"]",")",["T_WHITESPACE"," ",695],["T_BOOLEAN_AND","&&",695],["T_WHITESPACE","\n             ",695],["T_VARIABLE","$options",696],"[",["T_CONSTANT_ENCAPSED_STRING","'product_calculations'",696],"]",["T_WHITESPACE"," ",696],["T_IS_EQUAL","==",696],["T_WHITESPACE"," ",696],["T_STRING","Mage_Catalog_Model_Product_Type_Abstract",696],["T_DOUBLE_COLON","::",696],["T_STRING","CALCULATE_CHILD",696],")",["T_WHITESPACE"," ",696],"{",["T_WHITESPACE","\n                ",696],["T_RETURN","return",697],["T_WHITESPACE"," ",697],["T_STRING","true",697],";",["T_WHITESPACE","\n        ",697],"}",["T_WHITESPACE","\n        ",698],["T_RETURN","return",699],["T_WHITESPACE"," ",699],["T_STRING","false",699],";",["T_WHITESPACE","\n    ",699],"}",["T_WHITESPACE","\n    ",700],["T_DOC_COMMENT","\/**\n     * Check if discount has to be applied to parent item\n     *\n     * @return bool\n     *\/",701],["T_WHITESPACE","\n    ",705],["T_PUBLIC","public",706],["T_WHITESPACE"," ",706],["T_FUNCTION","function",706],["T_WHITESPACE"," ",706],["T_STRING","getForceApplyDiscountToParentItem",706],"(",")",["T_WHITESPACE","\n    ",706],"{",["T_WHITESPACE","\n        ",707],["T_IF","if",708],["T_WHITESPACE"," ",708],"(",["T_VARIABLE","$this",708],["T_OBJECT_OPERATOR","->",708],["T_STRING","getParentItem",708],"(",")",")",["T_WHITESPACE"," ",708],"{",["T_WHITESPACE","\n            ",708],["T_VARIABLE","$product",709],["T_WHITESPACE"," ",709],"=",["T_WHITESPACE"," ",709],["T_VARIABLE","$this",709],["T_OBJECT_OPERATOR","->",709],["T_STRING","getParentItem",709],"(",")",["T_OBJECT_OPERATOR","->",709],["T_STRING","getProduct",709],"(",")",";",["T_WHITESPACE","\n        ",709],"}",["T_WHITESPACE"," ",710],["T_ELSE","else",710],["T_WHITESPACE"," ",710],"{",["T_WHITESPACE","\n            ",710],["T_VARIABLE","$product",711],["T_WHITESPACE"," ",711],"=",["T_WHITESPACE"," ",711],["T_VARIABLE","$this",711],["T_OBJECT_OPERATOR","->",711],["T_STRING","getProduct",711],"(",")",";",["T_WHITESPACE","\n        ",711],"}",["T_WHITESPACE","\n\n        ",712],["T_RETURN","return",714],["T_WHITESPACE"," ",714],["T_VARIABLE","$product",714],["T_OBJECT_OPERATOR","->",714],["T_STRING","getTypeInstance",714],"(",")",["T_OBJECT_OPERATOR","->",714],["T_STRING","getForceApplyDiscountToParentItem",714],"(",")",";",["T_WHITESPACE","\n    ",714],"}",["T_WHITESPACE","\n\n    ",715],["T_DOC_COMMENT","\/**\n     * Return checking of what shipment\n     * type was for this product\n     *\n     * @return bool\n     *\/",717],["T_WHITESPACE","\n    ",722],["T_PUBLIC","public",723],["T_WHITESPACE"," ",723],["T_FUNCTION","function",723],["T_WHITESPACE"," ",723],["T_STRING","isShipSeparately",723],"(",")",["T_WHITESPACE"," ",723],"{",["T_WHITESPACE","\n        ",723],["T_IF","if",724],["T_WHITESPACE"," ",724],"(",["T_VARIABLE","$parentItem",724],["T_WHITESPACE"," ",724],"=",["T_WHITESPACE"," ",724],["T_VARIABLE","$this",724],["T_OBJECT_OPERATOR","->",724],["T_STRING","getParentItem",724],"(",")",")",["T_WHITESPACE"," ",724],"{",["T_WHITESPACE","\n            ",724],["T_VARIABLE","$options",725],["T_WHITESPACE"," ",725],"=",["T_WHITESPACE"," ",725],["T_VARIABLE","$parentItem",725],["T_OBJECT_OPERATOR","->",725],["T_STRING","getProductOptions",725],"(",")",";",["T_WHITESPACE","\n        ",725],"}",["T_WHITESPACE"," ",726],["T_ELSE","else",726],["T_WHITESPACE"," ",726],"{",["T_WHITESPACE","\n            ",726],["T_VARIABLE","$options",727],["T_WHITESPACE"," ",727],"=",["T_WHITESPACE"," ",727],["T_VARIABLE","$this",727],["T_OBJECT_OPERATOR","->",727],["T_STRING","getProductOptions",727],"(",")",";",["T_WHITESPACE","\n        ",727],"}",["T_WHITESPACE","\n\n        ",728],["T_IF","if",730],["T_WHITESPACE"," ",730],"(",["T_ISSET","isset",730],"(",["T_VARIABLE","$options",730],"[",["T_CONSTANT_ENCAPSED_STRING","'shipment_type'",730],"]",")",["T_WHITESPACE"," ",730],["T_BOOLEAN_AND","&&",730],["T_WHITESPACE","\n             ",730],["T_VARIABLE","$options",731],"[",["T_CONSTANT_ENCAPSED_STRING","'shipment_type'",731],"]",["T_WHITESPACE"," ",731],["T_IS_EQUAL","==",731],["T_WHITESPACE"," ",731],["T_STRING","Mage_Catalog_Model_Product_Type_Abstract",731],["T_DOUBLE_COLON","::",731],["T_STRING","SHIPMENT_SEPARATELY",731],")",["T_WHITESPACE"," ",731],"{",["T_WHITESPACE","\n                ",731],["T_RETURN","return",732],["T_WHITESPACE"," ",732],["T_STRING","true",732],";",["T_WHITESPACE","\n        ",732],"}",["T_WHITESPACE","\n        ",733],["T_RETURN","return",734],["T_WHITESPACE"," ",734],["T_STRING","false",734],";",["T_WHITESPACE","\n    ",734],"}",["T_WHITESPACE","\n\n    ",735],["T_DOC_COMMENT","\/**\n     * This is Dummy item or not\n     * if $shipment is true then we checking this for shipping situation if not\n     * then we checking this for calculation\n     *\n     * @param bool $shipment\n     * @return bool\n     *\/",737],["T_WHITESPACE","\n    ",744],["T_PUBLIC","public",745],["T_WHITESPACE"," ",745],["T_FUNCTION","function",745],["T_WHITESPACE"," ",745],["T_STRING","isDummy",745],"(",["T_VARIABLE","$shipment",745],["T_WHITESPACE"," ",745],"=",["T_WHITESPACE"," ",745],["T_STRING","false",745],")","{",["T_WHITESPACE","\n        ",745],["T_IF","if",746],["T_WHITESPACE"," ",746],"(",["T_VARIABLE","$shipment",746],")",["T_WHITESPACE"," ",746],"{",["T_WHITESPACE","\n            ",746],["T_IF","if",747],["T_WHITESPACE"," ",747],"(",["T_VARIABLE","$this",747],["T_OBJECT_OPERATOR","->",747],["T_STRING","getHasChildren",747],"(",")",["T_WHITESPACE"," ",747],["T_BOOLEAN_AND","&&",747],["T_WHITESPACE"," ",747],["T_VARIABLE","$this",747],["T_OBJECT_OPERATOR","->",747],["T_STRING","isShipSeparately",747],"(",")",")",["T_WHITESPACE"," ",747],"{",["T_WHITESPACE","\n                ",747],["T_RETURN","return",748],["T_WHITESPACE"," ",748],["T_STRING","true",748],";",["T_WHITESPACE","\n            ",748],"}",["T_WHITESPACE","\n\n            ",749],["T_IF","if",751],["T_WHITESPACE"," ",751],"(",["T_VARIABLE","$this",751],["T_OBJECT_OPERATOR","->",751],["T_STRING","getHasChildren",751],"(",")",["T_WHITESPACE"," ",751],["T_BOOLEAN_AND","&&",751],["T_WHITESPACE"," ",751],"!",["T_VARIABLE","$this",751],["T_OBJECT_OPERATOR","->",751],["T_STRING","isShipSeparately",751],"(",")",")",["T_WHITESPACE"," ",751],"{",["T_WHITESPACE","\n                ",751],["T_RETURN","return",752],["T_WHITESPACE"," ",752],["T_STRING","false",752],";",["T_WHITESPACE","\n            ",752],"}",["T_WHITESPACE","\n\n            ",753],["T_IF","if",755],["T_WHITESPACE"," ",755],"(",["T_VARIABLE","$this",755],["T_OBJECT_OPERATOR","->",755],["T_STRING","getParentItem",755],"(",")",["T_WHITESPACE"," ",755],["T_BOOLEAN_AND","&&",755],["T_WHITESPACE"," ",755],["T_VARIABLE","$this",755],["T_OBJECT_OPERATOR","->",755],["T_STRING","isShipSeparately",755],"(",")",")",["T_WHITESPACE"," ",755],"{",["T_WHITESPACE","\n                ",755],["T_RETURN","return",756],["T_WHITESPACE"," ",756],["T_STRING","false",756],";",["T_WHITESPACE","\n            ",756],"}",["T_WHITESPACE","\n\n            ",757],["T_IF","if",759],["T_WHITESPACE"," ",759],"(",["T_VARIABLE","$this",759],["T_OBJECT_OPERATOR","->",759],["T_STRING","getParentItem",759],"(",")",["T_WHITESPACE"," ",759],["T_BOOLEAN_AND","&&",759],["T_WHITESPACE"," ",759],"!",["T_VARIABLE","$this",759],["T_OBJECT_OPERATOR","->",759],["T_STRING","isShipSeparately",759],"(",")",")",["T_WHITESPACE"," ",759],"{",["T_WHITESPACE","\n                ",759],["T_RETURN","return",760],["T_WHITESPACE"," ",760],["T_STRING","true",760],";",["T_WHITESPACE","\n            ",760],"}",["T_WHITESPACE","\n        ",761],"}",["T_WHITESPACE"," ",762],["T_ELSE","else",762],["T_WHITESPACE"," ",762],"{",["T_WHITESPACE","\n            ",762],["T_IF","if",763],["T_WHITESPACE"," ",763],"(",["T_VARIABLE","$this",763],["T_OBJECT_OPERATOR","->",763],["T_STRING","getHasChildren",763],"(",")",["T_WHITESPACE"," ",763],["T_BOOLEAN_AND","&&",763],["T_WHITESPACE"," ",763],["T_VARIABLE","$this",763],["T_OBJECT_OPERATOR","->",763],["T_STRING","isChildrenCalculated",763],"(",")",")",["T_WHITESPACE"," ",763],"{",["T_WHITESPACE","\n                ",763],["T_RETURN","return",764],["T_WHITESPACE"," ",764],["T_STRING","true",764],";",["T_WHITESPACE","\n            ",764],"}",["T_WHITESPACE","\n\n            ",765],["T_IF","if",767],["T_WHITESPACE"," ",767],"(",["T_VARIABLE","$this",767],["T_OBJECT_OPERATOR","->",767],["T_STRING","getHasChildren",767],"(",")",["T_WHITESPACE"," ",767],["T_BOOLEAN_AND","&&",767],["T_WHITESPACE"," ",767],"!",["T_VARIABLE","$this",767],["T_OBJECT_OPERATOR","->",767],["T_STRING","isChildrenCalculated",767],"(",")",")",["T_WHITESPACE"," ",767],"{",["T_WHITESPACE","\n                ",767],["T_RETURN","return",768],["T_WHITESPACE"," ",768],["T_STRING","false",768],";",["T_WHITESPACE","\n            ",768],"}",["T_WHITESPACE","\n\n            ",769],["T_IF","if",771],["T_WHITESPACE"," ",771],"(",["T_VARIABLE","$this",771],["T_OBJECT_OPERATOR","->",771],["T_STRING","getParentItem",771],"(",")",["T_WHITESPACE"," ",771],["T_BOOLEAN_AND","&&",771],["T_WHITESPACE"," ",771],["T_VARIABLE","$this",771],["T_OBJECT_OPERATOR","->",771],["T_STRING","isChildrenCalculated",771],"(",")",")",["T_WHITESPACE"," ",771],"{",["T_WHITESPACE","\n                ",771],["T_RETURN","return",772],["T_WHITESPACE"," ",772],["T_STRING","false",772],";",["T_WHITESPACE","\n            ",772],"}",["T_WHITESPACE","\n\n            ",773],["T_IF","if",775],["T_WHITESPACE"," ",775],"(",["T_VARIABLE","$this",775],["T_OBJECT_OPERATOR","->",775],["T_STRING","getParentItem",775],"(",")",["T_WHITESPACE"," ",775],["T_BOOLEAN_AND","&&",775],["T_WHITESPACE"," ",775],"!",["T_VARIABLE","$this",775],["T_OBJECT_OPERATOR","->",775],["T_STRING","isChildrenCalculated",775],"(",")",")",["T_WHITESPACE"," ",775],"{",["T_WHITESPACE","\n                ",775],["T_RETURN","return",776],["T_WHITESPACE"," ",776],["T_STRING","true",776],";",["T_WHITESPACE","\n            ",776],"}",["T_WHITESPACE","\n        ",777],"}",["T_WHITESPACE","\n        ",778],["T_RETURN","return",779],["T_WHITESPACE"," ",779],["T_STRING","false",779],";",["T_WHITESPACE","\n    ",779],"}",["T_WHITESPACE","\n\n    ",780],["T_DOC_COMMENT","\/**\n     * Returns formatted buy request - object, holding request received from\n     * product view page with keys and options for configured product\n     *\n     * @return Varien_Object\n     *\/",782],["T_WHITESPACE","\n    ",787],["T_PUBLIC","public",788],["T_WHITESPACE"," ",788],["T_FUNCTION","function",788],["T_WHITESPACE"," ",788],["T_STRING","getBuyRequest",788],"(",")",["T_WHITESPACE","\n    ",788],"{",["T_WHITESPACE","\n        ",789],["T_VARIABLE","$option",790],["T_WHITESPACE"," ",790],"=",["T_WHITESPACE"," ",790],["T_VARIABLE","$this",790],["T_OBJECT_OPERATOR","->",790],["T_STRING","getProductOptionByCode",790],"(",["T_CONSTANT_ENCAPSED_STRING","'info_buyRequest'",790],")",";",["T_WHITESPACE","\n        ",790],["T_IF","if",791],["T_WHITESPACE"," ",791],"(","!",["T_VARIABLE","$option",791],")",["T_WHITESPACE"," ",791],"{",["T_WHITESPACE","\n            ",791],["T_VARIABLE","$option",792],["T_WHITESPACE"," ",792],"=",["T_WHITESPACE"," ",792],["T_ARRAY","array",792],"(",")",";",["T_WHITESPACE","\n        ",792],"}",["T_WHITESPACE","\n        ",793],["T_VARIABLE","$buyRequest",794],["T_WHITESPACE"," ",794],"=",["T_WHITESPACE"," ",794],["T_NEW","new",794],["T_WHITESPACE"," ",794],["T_STRING","Varien_Object",794],"(",["T_VARIABLE","$option",794],")",";",["T_WHITESPACE","\n        ",794],["T_VARIABLE","$buyRequest",795],["T_OBJECT_OPERATOR","->",795],["T_STRING","setQty",795],"(",["T_VARIABLE","$this",795],["T_OBJECT_OPERATOR","->",795],["T_STRING","getQtyOrdered",795],"(",")",["T_WHITESPACE"," ",795],"*",["T_WHITESPACE"," ",795],["T_LNUMBER","1",795],")",";",["T_WHITESPACE","\n        ",795],["T_RETURN","return",796],["T_WHITESPACE"," ",796],["T_VARIABLE","$buyRequest",796],";",["T_WHITESPACE","\n    ",796],"}",["T_WHITESPACE","\n\n    ",797],["T_DOC_COMMENT","\/**\n     * Retrieve product\n     *\n     * @return Mage_Catalog_Model_Product\n     *\/",799],["T_WHITESPACE","\n    ",803],["T_PUBLIC","public",804],["T_WHITESPACE"," ",804],["T_FUNCTION","function",804],["T_WHITESPACE"," ",804],["T_STRING","getProduct",804],"(",")",["T_WHITESPACE","\n    ",804],"{",["T_WHITESPACE","\n        ",805],["T_IF","if",806],["T_WHITESPACE"," ",806],"(","!",["T_VARIABLE","$this",806],["T_OBJECT_OPERATOR","->",806],["T_STRING","getData",806],"(",["T_CONSTANT_ENCAPSED_STRING","'product'",806],")",")",["T_WHITESPACE"," ",806],"{",["T_WHITESPACE","\n            ",806],["T_VARIABLE","$product",807],["T_WHITESPACE"," ",807],"=",["T_WHITESPACE"," ",807],["T_STRING","Mage",807],["T_DOUBLE_COLON","::",807],["T_STRING","getModel",807],"(",["T_CONSTANT_ENCAPSED_STRING","'catalog\/product'",807],")",["T_OBJECT_OPERATOR","->",807],["T_STRING","load",807],"(",["T_VARIABLE","$this",807],["T_OBJECT_OPERATOR","->",807],["T_STRING","getProductId",807],"(",")",")",";",["T_WHITESPACE","\n            ",807],["T_VARIABLE","$this",808],["T_OBJECT_OPERATOR","->",808],["T_STRING","setProduct",808],"(",["T_VARIABLE","$product",808],")",";",["T_WHITESPACE","\n        ",808],"}",["T_WHITESPACE","\n\n        ",809],["T_RETURN","return",811],["T_WHITESPACE"," ",811],["T_VARIABLE","$this",811],["T_OBJECT_OPERATOR","->",811],["T_STRING","getData",811],"(",["T_CONSTANT_ENCAPSED_STRING","'product'",811],")",";",["T_WHITESPACE","\n    ",811],"}",["T_WHITESPACE","\n\n    ",812],["T_DOC_COMMENT","\/**\n     * Get the discount amount applied on weee in base\n     *\n     * @return float\n     *\/",814],["T_WHITESPACE","\n    ",818],["T_PUBLIC","public",819],["T_WHITESPACE"," ",819],["T_FUNCTION","function",819],["T_WHITESPACE"," ",819],["T_STRING","getBaseDiscountAppliedForWeeeTax",819],"(",")",["T_WHITESPACE","\n    ",819],"{",["T_WHITESPACE","\n        ",820],["T_VARIABLE","$weeeTaxAppliedAmounts",821],["T_WHITESPACE"," ",821],"=",["T_WHITESPACE"," ",821],["T_STRING","unserialize",821],"(",["T_VARIABLE","$this",821],["T_OBJECT_OPERATOR","->",821],["T_STRING","getWeeeTaxApplied",821],"(",")",")",";",["T_WHITESPACE","\n        ",821],["T_VARIABLE","$totalDiscount",822],["T_WHITESPACE"," ",822],"=",["T_WHITESPACE"," ",822],["T_LNUMBER","0",822],";",["T_WHITESPACE","\n        ",822],["T_IF","if",823],["T_WHITESPACE"," ",823],"(","!",["T_STRING","is_array",823],"(",["T_VARIABLE","$weeeTaxAppliedAmounts",823],")",")",["T_WHITESPACE"," ",823],"{",["T_WHITESPACE","\n            ",823],["T_RETURN","return",824],["T_WHITESPACE"," ",824],["T_VARIABLE","$totalDiscount",824],";",["T_WHITESPACE","\n        ",824],"}",["T_WHITESPACE","\n        ",825],["T_FOREACH","foreach",826],["T_WHITESPACE"," ",826],"(",["T_VARIABLE","$weeeTaxAppliedAmounts",826],["T_WHITESPACE"," ",826],["T_AS","as",826],["T_WHITESPACE"," ",826],["T_VARIABLE","$weeeTaxAppliedAmount",826],")",["T_WHITESPACE"," ",826],"{",["T_WHITESPACE","\n            ",826],["T_IF","if",827],["T_WHITESPACE"," ",827],"(",["T_ISSET","isset",827],"(",["T_VARIABLE","$weeeTaxAppliedAmount",827],"[",["T_CONSTANT_ENCAPSED_STRING","'total_base_weee_discount'",827],"]",")",")",["T_WHITESPACE"," ",827],"{",["T_WHITESPACE","\n                ",827],["T_RETURN","return",828],["T_WHITESPACE"," ",828],["T_VARIABLE","$weeeTaxAppliedAmount",828],"[",["T_CONSTANT_ENCAPSED_STRING","'total_base_weee_discount'",828],"]",";",["T_WHITESPACE","\n            ",828],"}",["T_WHITESPACE"," ",829],["T_ELSE","else",829],["T_WHITESPACE"," ",829],"{",["T_WHITESPACE","\n                ",829],["T_VARIABLE","$totalDiscount",830],["T_WHITESPACE"," ",830],["T_PLUS_EQUAL","+=",830],["T_WHITESPACE"," ",830],["T_ISSET","isset",830],"(",["T_VARIABLE","$weeeTaxAppliedAmount",830],"[",["T_CONSTANT_ENCAPSED_STRING","'base_weee_discount'",830],"]",")",["T_WHITESPACE","\n                    ",830],"?",["T_WHITESPACE"," ",831],["T_VARIABLE","$weeeTaxAppliedAmount",831],"[",["T_CONSTANT_ENCAPSED_STRING","'base_weee_discount'",831],"]",["T_WHITESPACE"," ",831],":",["T_WHITESPACE"," ",831],["T_LNUMBER","0",831],";",["T_WHITESPACE","\n            ",831],"}",["T_WHITESPACE","\n        ",832],"}",["T_WHITESPACE","\n        ",833],["T_RETURN","return",834],["T_WHITESPACE"," ",834],["T_VARIABLE","$totalDiscount",834],";",["T_WHITESPACE","\n    ",834],"}",["T_WHITESPACE","\n\n    ",835],["T_DOC_COMMENT","\/**\n     * Get the discount amount applied on Weee\n     *\n     * @return float\n     *\/",837],["T_WHITESPACE","\n    ",841],["T_PUBLIC","public",842],["T_WHITESPACE"," ",842],["T_FUNCTION","function",842],["T_WHITESPACE"," ",842],["T_STRING","getDiscountAppliedForWeeeTax",842],"(",")",["T_WHITESPACE","\n    ",842],"{",["T_WHITESPACE","\n        ",843],["T_VARIABLE","$weeeTaxAppliedAmounts",844],["T_WHITESPACE"," ",844],"=",["T_WHITESPACE"," ",844],["T_STRING","unserialize",844],"(",["T_VARIABLE","$this",844],["T_OBJECT_OPERATOR","->",844],["T_STRING","getWeeeTaxApplied",844],"(",")",")",";",["T_WHITESPACE","\n        ",844],["T_VARIABLE","$totalDiscount",845],["T_WHITESPACE"," ",845],"=",["T_WHITESPACE"," ",845],["T_LNUMBER","0",845],";",["T_WHITESPACE","\n        ",845],["T_IF","if",846],["T_WHITESPACE"," ",846],"(","!",["T_STRING","is_array",846],"(",["T_VARIABLE","$weeeTaxAppliedAmounts",846],")",")",["T_WHITESPACE"," ",846],"{",["T_WHITESPACE","\n            ",846],["T_RETURN","return",847],["T_WHITESPACE"," ",847],["T_VARIABLE","$totalDiscount",847],";",["T_WHITESPACE","\n        ",847],"}",["T_WHITESPACE","\n        ",848],["T_FOREACH","foreach",849],["T_WHITESPACE"," ",849],"(",["T_VARIABLE","$weeeTaxAppliedAmounts",849],["T_WHITESPACE"," ",849],["T_AS","as",849],["T_WHITESPACE"," ",849],["T_VARIABLE","$weeeTaxAppliedAmount",849],")",["T_WHITESPACE"," ",849],"{",["T_WHITESPACE","\n            ",849],["T_IF","if",850],["T_WHITESPACE"," ",850],"(",["T_ISSET","isset",850],"(",["T_VARIABLE","$weeeTaxAppliedAmount",850],"[",["T_CONSTANT_ENCAPSED_STRING","'total_weee_discount'",850],"]",")",")",["T_WHITESPACE"," ",850],"{",["T_WHITESPACE","\n                ",850],["T_RETURN","return",851],["T_WHITESPACE"," ",851],["T_VARIABLE","$weeeTaxAppliedAmount",851],"[",["T_CONSTANT_ENCAPSED_STRING","'total_weee_discount'",851],"]",";",["T_WHITESPACE","\n            ",851],"}",["T_WHITESPACE"," ",852],["T_ELSE","else",852],["T_WHITESPACE"," ",852],"{",["T_WHITESPACE","\n                ",852],["T_VARIABLE","$totalDiscount",853],["T_WHITESPACE"," ",853],["T_PLUS_EQUAL","+=",853],["T_WHITESPACE"," ",853],["T_ISSET","isset",853],"(",["T_VARIABLE","$weeeTaxAppliedAmount",853],"[",["T_CONSTANT_ENCAPSED_STRING","'weee_discount'",853],"]",")",["T_WHITESPACE","\n                    ",853],"?",["T_WHITESPACE"," ",854],["T_VARIABLE","$weeeTaxAppliedAmount",854],"[",["T_CONSTANT_ENCAPSED_STRING","'weee_discount'",854],"]",["T_WHITESPACE"," ",854],":",["T_WHITESPACE"," ",854],["T_LNUMBER","0",854],";",["T_WHITESPACE","\n            ",854],"}",["T_WHITESPACE","\n        ",855],"}",["T_WHITESPACE","\n        ",856],["T_RETURN","return",857],["T_WHITESPACE"," ",857],["T_VARIABLE","$totalDiscount",857],";",["T_WHITESPACE","\n    ",857],"}",["T_WHITESPACE","\n",858],"}",["T_WHITESPACE","\n",859]]
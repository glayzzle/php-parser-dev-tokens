[["T_OPEN_TAG","<?php\n",1],["T_DOC_COMMENT","\/**\n * Magento\n *\n * NOTICE OF LICENSE\n *\n * This source file is subject to the Open Software License (OSL 3.0)\n * that is bundled with this package in the file LICENSE.txt.\n * It is also available through the world-wide-web at this URL:\n * http:\/\/opensource.org\/licenses\/osl-3.0.php\n * If you did not receive a copy of the license and are unable to\n * obtain it through the world-wide-web, please send an email\n * to license@magento.com so we can send you a copy immediately.\n *\n * DISCLAIMER\n *\n * Do not edit or add to this file if you wish to upgrade Magento to newer\n * versions in the future. If you wish to customize Magento for your\n * needs please refer to http:\/\/www.magento.com for more information.\n *\n * @category    Mage\n * @package     Mage_Sales\n * @copyright  Copyright (c) 2006-2016 X.commerce, Inc. and affiliates (http:\/\/www.magento.com)\n * @license    http:\/\/opensource.org\/licenses\/osl-3.0.php  Open Software License (OSL 3.0)\n *\/",2],["T_WHITESPACE","\n\n\n",25],["T_DOC_COMMENT","\/**\n * Flat sales order collection\n *\n * @category    Mage\n * @package     Mage_Sales\n * @author      Magento Core Team <core@magentocommerce.com>\n *\/",28],["T_WHITESPACE","\n",34],["T_CLASS","class",35],["T_WHITESPACE"," ",35],["T_STRING","Mage_Sales_Model_Resource_Order_Collection",35],["T_WHITESPACE"," ",35],["T_EXTENDS","extends",35],["T_WHITESPACE"," ",35],["T_STRING","Mage_Sales_Model_Resource_Collection_Abstract",35],["T_WHITESPACE","\n",35],"{",["T_WHITESPACE","\n    ",36],["T_DOC_COMMENT","\/**\n     * Event prefix\n     *\n     * @var string\n     *\/",37],["T_WHITESPACE","\n    ",41],["T_PROTECTED","protected",42],["T_WHITESPACE"," ",42],["T_VARIABLE","$_eventPrefix",42],["T_WHITESPACE","    ",42],"=",["T_WHITESPACE"," ",42],["T_CONSTANT_ENCAPSED_STRING","'sales_order_collection'",42],";",["T_WHITESPACE","\n\n    ",42],["T_DOC_COMMENT","\/**\n     * Event object\n     *\n     * @var string\n     *\/",44],["T_WHITESPACE","\n    ",48],["T_PROTECTED","protected",49],["T_WHITESPACE"," ",49],["T_VARIABLE","$_eventObject",49],["T_WHITESPACE","    ",49],"=",["T_WHITESPACE"," ",49],["T_CONSTANT_ENCAPSED_STRING","'order_collection'",49],";",["T_WHITESPACE","\n\n    ",49],["T_DOC_COMMENT","\/**\n     * Model initialization\n     *\n     *\/",51],["T_WHITESPACE","\n    ",54],["T_PROTECTED","protected",55],["T_WHITESPACE"," ",55],["T_FUNCTION","function",55],["T_WHITESPACE"," ",55],["T_STRING","_construct",55],"(",")",["T_WHITESPACE","\n    ",55],"{",["T_WHITESPACE","\n        ",56],["T_VARIABLE","$this",57],["T_OBJECT_OPERATOR","->",57],["T_STRING","_init",57],"(",["T_CONSTANT_ENCAPSED_STRING","'sales\/order'",57],")",";",["T_WHITESPACE","\n        ",57],["T_VARIABLE","$this",58],["T_WHITESPACE","\n            ",58],["T_OBJECT_OPERATOR","->",59],["T_STRING","addFilterToMap",59],"(",["T_CONSTANT_ENCAPSED_STRING","'entity_id'",59],",",["T_WHITESPACE"," ",59],["T_CONSTANT_ENCAPSED_STRING","'main_table.entity_id'",59],")",["T_WHITESPACE","\n            ",59],["T_OBJECT_OPERATOR","->",60],["T_STRING","addFilterToMap",60],"(",["T_CONSTANT_ENCAPSED_STRING","'customer_id'",60],",",["T_WHITESPACE"," ",60],["T_CONSTANT_ENCAPSED_STRING","'main_table.customer_id'",60],")",["T_WHITESPACE","\n            ",60],["T_OBJECT_OPERATOR","->",61],["T_STRING","addFilterToMap",61],"(",["T_CONSTANT_ENCAPSED_STRING","'quote_address_id'",61],",",["T_WHITESPACE"," ",61],["T_CONSTANT_ENCAPSED_STRING","'main_table.quote_address_id'",61],")",";",["T_WHITESPACE","\n    ",61],"}",["T_WHITESPACE","\n\n    ",62],["T_DOC_COMMENT","\/**\n     * Add items count expr to collection select, backward capability with eav structure\n     *\n     * @return Mage_Sales_Model_Resource_Order_Collection\n     *\/",64],["T_WHITESPACE","\n    ",68],["T_PUBLIC","public",69],["T_WHITESPACE"," ",69],["T_FUNCTION","function",69],["T_WHITESPACE"," ",69],["T_STRING","addItemCountExpr",69],"(",")",["T_WHITESPACE","\n    ",69],"{",["T_WHITESPACE","\n        ",70],["T_IF","if",71],["T_WHITESPACE"," ",71],"(",["T_STRING","is_null",71],"(",["T_VARIABLE","$this",71],["T_OBJECT_OPERATOR","->",71],["T_STRING","_fieldsToSelect",71],")",")",["T_WHITESPACE"," ",71],"{",["T_WHITESPACE","\n            ",71],["T_COMMENT","\/\/ If we select all fields from table, we need to add column alias\n",72],["T_WHITESPACE","            ",73],["T_VARIABLE","$this",73],["T_OBJECT_OPERATOR","->",73],["T_STRING","getSelect",73],"(",")",["T_OBJECT_OPERATOR","->",73],["T_STRING","columns",73],"(",["T_ARRAY","array",73],"(",["T_CONSTANT_ENCAPSED_STRING","'items_count'",73],["T_DOUBLE_ARROW","=>",73],["T_CONSTANT_ENCAPSED_STRING","'total_item_count'",73],")",")",";",["T_WHITESPACE","\n        ",73],"}",["T_WHITESPACE"," ",74],["T_ELSE","else",74],["T_WHITESPACE"," ",74],"{",["T_WHITESPACE","\n            ",74],["T_VARIABLE","$this",75],["T_OBJECT_OPERATOR","->",75],["T_STRING","addFieldToSelect",75],"(",["T_CONSTANT_ENCAPSED_STRING","'total_item_count'",75],",",["T_WHITESPACE"," ",75],["T_CONSTANT_ENCAPSED_STRING","'items_count'",75],")",";",["T_WHITESPACE","\n        ",75],"}",["T_WHITESPACE","\n        ",76],["T_RETURN","return",77],["T_WHITESPACE"," ",77],["T_VARIABLE","$this",77],";",["T_WHITESPACE","\n    ",77],"}",["T_WHITESPACE","\n\n    ",78],["T_DOC_COMMENT","\/**\n     * Minimize usual count select\n     *\n     * @return Varien_Db_Select\n     *\/",80],["T_WHITESPACE","\n    ",84],["T_PUBLIC","public",85],["T_WHITESPACE"," ",85],["T_FUNCTION","function",85],["T_WHITESPACE"," ",85],["T_STRING","getSelectCountSql",85],"(",")",["T_WHITESPACE","\n    ",85],"{",["T_WHITESPACE","\n        ",86],["T_COMMENT","\/* @var $countSelect Varien_Db_Select *\/",87],["T_WHITESPACE","\n        ",87],["T_VARIABLE","$countSelect",88],["T_WHITESPACE"," ",88],"=",["T_WHITESPACE"," ",88],["T_STRING","parent",88],["T_DOUBLE_COLON","::",88],["T_STRING","getSelectCountSql",88],"(",")",";",["T_WHITESPACE","\n        ",88],["T_VARIABLE","$countSelect",89],["T_OBJECT_OPERATOR","->",89],["T_STRING","resetJoinLeft",89],"(",")",";",["T_WHITESPACE","\n        ",89],["T_VARIABLE","$countSelect",90],["T_OBJECT_OPERATOR","->",90],["T_STRING","reset",90],"(",["T_STRING","Zend_Db_Select",90],["T_DOUBLE_COLON","::",90],["T_STRING","GROUP",90],")",";",["T_WHITESPACE","\n        ",90],["T_RETURN","return",91],["T_WHITESPACE"," ",91],["T_VARIABLE","$countSelect",91],";",["T_WHITESPACE","\n    ",91],"}",["T_WHITESPACE","\n\n    ",92],["T_DOC_COMMENT","\/**\n     * Reset left join\n     *\n     * @param int $limit\n     * @param int $offset\n     * @return Mage_Eav_Model_Entity_Collection_Abstract\n     *\/",94],["T_WHITESPACE","\n    ",100],["T_PROTECTED","protected",101],["T_WHITESPACE"," ",101],["T_FUNCTION","function",101],["T_WHITESPACE"," ",101],["T_STRING","_getAllIdsSelect",101],"(",["T_VARIABLE","$limit",101],["T_WHITESPACE"," ",101],"=",["T_WHITESPACE"," ",101],["T_STRING","null",101],",",["T_WHITESPACE"," ",101],["T_VARIABLE","$offset",101],["T_WHITESPACE"," ",101],"=",["T_WHITESPACE"," ",101],["T_STRING","null",101],")",["T_WHITESPACE","\n    ",101],"{",["T_WHITESPACE","\n        ",102],["T_VARIABLE","$idsSelect",103],["T_WHITESPACE"," ",103],"=",["T_WHITESPACE"," ",103],["T_STRING","parent",103],["T_DOUBLE_COLON","::",103],["T_STRING","_getAllIdsSelect",103],"(",["T_VARIABLE","$limit",103],",",["T_WHITESPACE"," ",103],["T_VARIABLE","$offset",103],")",";",["T_WHITESPACE","\n        ",103],["T_VARIABLE","$idsSelect",104],["T_OBJECT_OPERATOR","->",104],["T_STRING","resetJoinLeft",104],"(",")",";",["T_WHITESPACE","\n        ",104],["T_RETURN","return",105],["T_WHITESPACE"," ",105],["T_VARIABLE","$idsSelect",105],";",["T_WHITESPACE","\n    ",105],"}",["T_WHITESPACE","\n\n    ",106],["T_DOC_COMMENT","\/**\n     * Join table sales_flat_order_address to select for billing and shipping order addresses.\n     * Create corillation map\n     *\n     * @return Mage_Sales_Model_Resource_Order_Collection\n     *\/",108],["T_WHITESPACE","\n    ",113],["T_PROTECTED","protected",114],["T_WHITESPACE"," ",114],["T_FUNCTION","function",114],["T_WHITESPACE"," ",114],["T_STRING","_addAddressFields",114],"(",")",["T_WHITESPACE","\n    ",114],"{",["T_WHITESPACE","\n        ",115],["T_VARIABLE","$billingAliasName",116],["T_WHITESPACE"," ",116],"=",["T_WHITESPACE"," ",116],["T_CONSTANT_ENCAPSED_STRING","'billing_o_a'",116],";",["T_WHITESPACE","\n        ",116],["T_VARIABLE","$shippingAliasName",117],["T_WHITESPACE"," ",117],"=",["T_WHITESPACE"," ",117],["T_CONSTANT_ENCAPSED_STRING","'shipping_o_a'",117],";",["T_WHITESPACE","\n        ",117],["T_VARIABLE","$joinTable",118],["T_WHITESPACE"," ",118],"=",["T_WHITESPACE"," ",118],["T_VARIABLE","$this",118],["T_OBJECT_OPERATOR","->",118],["T_STRING","getTable",118],"(",["T_CONSTANT_ENCAPSED_STRING","'sales\/order_address'",118],")",";",["T_WHITESPACE","\n\n        ",118],["T_VARIABLE","$this",120],["T_WHITESPACE","\n            ",120],["T_OBJECT_OPERATOR","->",121],["T_STRING","addFilterToMap",121],"(",["T_CONSTANT_ENCAPSED_STRING","'billing_firstname'",121],",",["T_WHITESPACE"," ",121],["T_VARIABLE","$billingAliasName",121],["T_WHITESPACE"," ",121],".",["T_WHITESPACE"," ",121],["T_CONSTANT_ENCAPSED_STRING","'.firstname'",121],")",["T_WHITESPACE","\n            ",121],["T_OBJECT_OPERATOR","->",122],["T_STRING","addFilterToMap",122],"(",["T_CONSTANT_ENCAPSED_STRING","'billing_middlename'",122],",",["T_WHITESPACE"," ",122],["T_VARIABLE","$billingAliasName",122],["T_WHITESPACE"," ",122],".",["T_WHITESPACE"," ",122],["T_CONSTANT_ENCAPSED_STRING","'.middlename'",122],")",["T_WHITESPACE","\n            ",122],["T_OBJECT_OPERATOR","->",123],["T_STRING","addFilterToMap",123],"(",["T_CONSTANT_ENCAPSED_STRING","'billing_lastname'",123],",",["T_WHITESPACE"," ",123],["T_VARIABLE","$billingAliasName",123],["T_WHITESPACE"," ",123],".",["T_WHITESPACE"," ",123],["T_CONSTANT_ENCAPSED_STRING","'.lastname'",123],")",["T_WHITESPACE","\n            ",123],["T_OBJECT_OPERATOR","->",124],["T_STRING","addFilterToMap",124],"(",["T_CONSTANT_ENCAPSED_STRING","'billing_telephone'",124],",",["T_WHITESPACE"," ",124],["T_VARIABLE","$billingAliasName",124],["T_WHITESPACE"," ",124],".",["T_WHITESPACE"," ",124],["T_CONSTANT_ENCAPSED_STRING","'.telephone'",124],")",["T_WHITESPACE","\n            ",124],["T_OBJECT_OPERATOR","->",125],["T_STRING","addFilterToMap",125],"(",["T_CONSTANT_ENCAPSED_STRING","'billing_postcode'",125],",",["T_WHITESPACE"," ",125],["T_VARIABLE","$billingAliasName",125],["T_WHITESPACE"," ",125],".",["T_WHITESPACE"," ",125],["T_CONSTANT_ENCAPSED_STRING","'.postcode'",125],")",["T_WHITESPACE","\n\n            ",125],["T_OBJECT_OPERATOR","->",127],["T_STRING","addFilterToMap",127],"(",["T_CONSTANT_ENCAPSED_STRING","'shipping_firstname'",127],",",["T_WHITESPACE"," ",127],["T_VARIABLE","$shippingAliasName",127],["T_WHITESPACE"," ",127],".",["T_WHITESPACE"," ",127],["T_CONSTANT_ENCAPSED_STRING","'.firstname'",127],")",["T_WHITESPACE","\n            ",127],["T_OBJECT_OPERATOR","->",128],["T_STRING","addFilterToMap",128],"(",["T_CONSTANT_ENCAPSED_STRING","'shipping_middlename'",128],",",["T_WHITESPACE"," ",128],["T_VARIABLE","$shippingAliasName",128],["T_WHITESPACE"," ",128],".",["T_WHITESPACE"," ",128],["T_CONSTANT_ENCAPSED_STRING","'.middlename'",128],")",["T_WHITESPACE","\n            ",128],["T_OBJECT_OPERATOR","->",129],["T_STRING","addFilterToMap",129],"(",["T_CONSTANT_ENCAPSED_STRING","'shipping_lastname'",129],",",["T_WHITESPACE"," ",129],["T_VARIABLE","$shippingAliasName",129],["T_WHITESPACE"," ",129],".",["T_WHITESPACE"," ",129],["T_CONSTANT_ENCAPSED_STRING","'.lastname'",129],")",["T_WHITESPACE","\n            ",129],["T_OBJECT_OPERATOR","->",130],["T_STRING","addFilterToMap",130],"(",["T_CONSTANT_ENCAPSED_STRING","'shipping_telephone'",130],",",["T_WHITESPACE"," ",130],["T_VARIABLE","$shippingAliasName",130],["T_WHITESPACE"," ",130],".",["T_WHITESPACE"," ",130],["T_CONSTANT_ENCAPSED_STRING","'.telephone'",130],")",["T_WHITESPACE","\n            ",130],["T_OBJECT_OPERATOR","->",131],["T_STRING","addFilterToMap",131],"(",["T_CONSTANT_ENCAPSED_STRING","'shipping_postcode'",131],",",["T_WHITESPACE"," ",131],["T_VARIABLE","$shippingAliasName",131],["T_WHITESPACE"," ",131],".",["T_WHITESPACE"," ",131],["T_CONSTANT_ENCAPSED_STRING","'.postcode'",131],")",";",["T_WHITESPACE","\n\n        ",131],["T_VARIABLE","$this",133],["T_WHITESPACE","\n            ",133],["T_OBJECT_OPERATOR","->",134],["T_STRING","getSelect",134],"(",")",["T_WHITESPACE","\n            ",134],["T_OBJECT_OPERATOR","->",135],["T_STRING","joinLeft",135],"(",["T_WHITESPACE","\n                ",135],["T_ARRAY","array",136],"(",["T_VARIABLE","$billingAliasName",136],["T_WHITESPACE"," ",136],["T_DOUBLE_ARROW","=>",136],["T_WHITESPACE"," ",136],["T_VARIABLE","$joinTable",136],")",",",["T_WHITESPACE","\n                ",136],"\"",["T_ENCAPSED_AND_WHITESPACE","(main_table.entity_id = ",137],["T_CURLY_OPEN","{",137],["T_VARIABLE","$billingAliasName",137],"}",["T_ENCAPSED_AND_WHITESPACE",".parent_id",137],"\"",["T_WHITESPACE","\n                    ",137],".",["T_WHITESPACE"," ",138],"\"",["T_ENCAPSED_AND_WHITESPACE"," AND ",138],["T_CURLY_OPEN","{",138],["T_VARIABLE","$billingAliasName",138],"}",["T_ENCAPSED_AND_WHITESPACE",".address_type = 'billing')",138],"\"",",",["T_WHITESPACE","\n                ",138],["T_ARRAY","array",139],"(",["T_WHITESPACE","\n                    ",139],["T_VARIABLE","$billingAliasName",140],["T_WHITESPACE"," ",140],".",["T_WHITESPACE"," ",140],["T_CONSTANT_ENCAPSED_STRING","'.firstname'",140],",",["T_WHITESPACE","\n                    ",140],["T_VARIABLE","$billingAliasName",141],["T_WHITESPACE"," ",141],".",["T_WHITESPACE"," ",141],["T_CONSTANT_ENCAPSED_STRING","'.middlename'",141],",",["T_WHITESPACE","\n                    ",141],["T_VARIABLE","$billingAliasName",142],["T_WHITESPACE"," ",142],".",["T_WHITESPACE"," ",142],["T_CONSTANT_ENCAPSED_STRING","'.lastname'",142],",",["T_WHITESPACE","\n                    ",142],["T_VARIABLE","$billingAliasName",143],["T_WHITESPACE"," ",143],".",["T_WHITESPACE"," ",143],["T_CONSTANT_ENCAPSED_STRING","'.telephone'",143],",",["T_WHITESPACE","\n                    ",143],["T_VARIABLE","$billingAliasName",144],["T_WHITESPACE"," ",144],".",["T_WHITESPACE"," ",144],["T_CONSTANT_ENCAPSED_STRING","'.postcode'",144],["T_WHITESPACE","\n                ",144],")",["T_WHITESPACE","\n            ",145],")",["T_WHITESPACE","\n            ",146],["T_OBJECT_OPERATOR","->",147],["T_STRING","joinLeft",147],"(",["T_WHITESPACE","\n                ",147],["T_ARRAY","array",148],"(",["T_VARIABLE","$shippingAliasName",148],["T_WHITESPACE"," ",148],["T_DOUBLE_ARROW","=>",148],["T_WHITESPACE"," ",148],["T_VARIABLE","$joinTable",148],")",",",["T_WHITESPACE","\n                ",148],"\"",["T_ENCAPSED_AND_WHITESPACE","(main_table.entity_id = ",149],["T_CURLY_OPEN","{",149],["T_VARIABLE","$shippingAliasName",149],"}",["T_ENCAPSED_AND_WHITESPACE",".parent_id",149],"\"",["T_WHITESPACE","\n                    ",149],".",["T_WHITESPACE"," ",150],"\"",["T_ENCAPSED_AND_WHITESPACE"," AND ",150],["T_CURLY_OPEN","{",150],["T_VARIABLE","$shippingAliasName",150],"}",["T_ENCAPSED_AND_WHITESPACE",".address_type = 'shipping')",150],"\"",",",["T_WHITESPACE","\n                ",150],["T_ARRAY","array",151],"(",["T_WHITESPACE","\n                    ",151],["T_VARIABLE","$shippingAliasName",152],["T_WHITESPACE"," ",152],".",["T_WHITESPACE"," ",152],["T_CONSTANT_ENCAPSED_STRING","'.firstname'",152],",",["T_WHITESPACE","\n                    ",152],["T_VARIABLE","$shippingAliasName",153],["T_WHITESPACE"," ",153],".",["T_WHITESPACE"," ",153],["T_CONSTANT_ENCAPSED_STRING","'.middlename'",153],",",["T_WHITESPACE","\n                    ",153],["T_VARIABLE","$shippingAliasName",154],["T_WHITESPACE"," ",154],".",["T_WHITESPACE"," ",154],["T_CONSTANT_ENCAPSED_STRING","'.lastname'",154],",",["T_WHITESPACE","\n                    ",154],["T_VARIABLE","$shippingAliasName",155],["T_WHITESPACE"," ",155],".",["T_WHITESPACE"," ",155],["T_CONSTANT_ENCAPSED_STRING","'.telephone'",155],",",["T_WHITESPACE","\n                    ",155],["T_VARIABLE","$shippingAliasName",156],["T_WHITESPACE"," ",156],".",["T_WHITESPACE"," ",156],["T_CONSTANT_ENCAPSED_STRING","'.postcode'",156],["T_WHITESPACE","\n                ",156],")",["T_WHITESPACE","\n            ",157],")",";",["T_WHITESPACE","\n        ",158],["T_STRING","Mage",159],["T_DOUBLE_COLON","::",159],["T_STRING","getResourceHelper",159],"(",["T_CONSTANT_ENCAPSED_STRING","'core'",159],")",["T_OBJECT_OPERATOR","->",159],["T_STRING","prepareColumnsList",159],"(",["T_VARIABLE","$this",159],["T_OBJECT_OPERATOR","->",159],["T_STRING","getSelect",159],"(",")",")",";",["T_WHITESPACE","\n        ",159],["T_RETURN","return",160],["T_WHITESPACE"," ",160],["T_VARIABLE","$this",160],";",["T_WHITESPACE","\n    ",160],"}",["T_WHITESPACE","\n\n    ",161],["T_DOC_COMMENT","\/**\n     * Add addresses information to select\n     *\n     * @return Mage_Sales_Model_Resource_Collection_Abstract\n     *\/",163],["T_WHITESPACE","\n    ",167],["T_PUBLIC","public",168],["T_WHITESPACE"," ",168],["T_FUNCTION","function",168],["T_WHITESPACE"," ",168],["T_STRING","addAddressFields",168],"(",")",["T_WHITESPACE","\n    ",168],"{",["T_WHITESPACE","\n        ",169],["T_RETURN","return",170],["T_WHITESPACE"," ",170],["T_VARIABLE","$this",170],["T_OBJECT_OPERATOR","->",170],["T_STRING","_addAddressFields",170],"(",")",";",["T_WHITESPACE","\n    ",170],"}",["T_WHITESPACE","\n\n    ",171],["T_DOC_COMMENT","\/**\n     * Add field search filter to collection as OR condition\n     *\n     * @see self::_getConditionSql for $condition\n     *\n     * @param string $field\n     * @param null|string|array $condition\n     * @return Mage_Sales_Model_Resource_Order_Collection\n     *\/",173],["T_WHITESPACE","\n    ",181],["T_PUBLIC","public",182],["T_WHITESPACE"," ",182],["T_FUNCTION","function",182],["T_WHITESPACE"," ",182],["T_STRING","addFieldToSearchFilter",182],"(",["T_VARIABLE","$field",182],",",["T_WHITESPACE"," ",182],["T_VARIABLE","$condition",182],["T_WHITESPACE"," ",182],"=",["T_WHITESPACE"," ",182],["T_STRING","null",182],")",["T_WHITESPACE","\n    ",182],"{",["T_WHITESPACE","\n        ",183],["T_VARIABLE","$field",184],["T_WHITESPACE"," ",184],"=",["T_WHITESPACE"," ",184],["T_VARIABLE","$this",184],["T_OBJECT_OPERATOR","->",184],["T_STRING","_getMappedField",184],"(",["T_VARIABLE","$field",184],")",";",["T_WHITESPACE","\n        ",184],["T_VARIABLE","$this",185],["T_OBJECT_OPERATOR","->",185],["T_STRING","_select",185],["T_OBJECT_OPERATOR","->",185],["T_STRING","orWhere",185],"(",["T_VARIABLE","$this",185],["T_OBJECT_OPERATOR","->",185],["T_STRING","_getConditionSql",185],"(",["T_VARIABLE","$field",185],",",["T_WHITESPACE"," ",185],["T_VARIABLE","$condition",185],")",")",";",["T_WHITESPACE","\n        ",185],["T_RETURN","return",186],["T_WHITESPACE"," ",186],["T_VARIABLE","$this",186],";",["T_WHITESPACE","\n    ",186],"}",["T_WHITESPACE","\n\n    ",187],["T_DOC_COMMENT","\/**\n     * Specify collection select filter by attribute value\n     *\n     * @param array $attributes\n     * @param array|integer|string|null $condition\n     * @return Mage_Sales_Model_Resource_Order_Collection\n     *\/",189],["T_WHITESPACE","\n    ",195],["T_PUBLIC","public",196],["T_WHITESPACE"," ",196],["T_FUNCTION","function",196],["T_WHITESPACE"," ",196],["T_STRING","addAttributeToSearchFilter",196],"(",["T_VARIABLE","$attributes",196],",",["T_WHITESPACE"," ",196],["T_VARIABLE","$condition",196],["T_WHITESPACE"," ",196],"=",["T_WHITESPACE"," ",196],["T_STRING","null",196],")",["T_WHITESPACE","\n    ",196],"{",["T_WHITESPACE","\n        ",197],["T_IF","if",198],["T_WHITESPACE"," ",198],"(",["T_STRING","is_array",198],"(",["T_VARIABLE","$attributes",198],")",["T_WHITESPACE"," ",198],["T_BOOLEAN_AND","&&",198],["T_WHITESPACE"," ",198],"!",["T_EMPTY","empty",198],"(",["T_VARIABLE","$attributes",198],")",")",["T_WHITESPACE"," ",198],"{",["T_WHITESPACE","\n            ",198],["T_VARIABLE","$this",199],["T_OBJECT_OPERATOR","->",199],["T_STRING","_addAddressFields",199],"(",")",";",["T_WHITESPACE","\n\n            ",199],["T_VARIABLE","$toFilterData",201],["T_WHITESPACE"," ",201],"=",["T_WHITESPACE"," ",201],["T_ARRAY","array",201],"(",")",";",["T_WHITESPACE","\n            ",201],["T_FOREACH","foreach",202],["T_WHITESPACE"," ",202],"(",["T_VARIABLE","$attributes",202],["T_WHITESPACE"," ",202],["T_AS","as",202],["T_WHITESPACE"," ",202],["T_VARIABLE","$attribute",202],")",["T_WHITESPACE"," ",202],"{",["T_WHITESPACE","\n                ",202],["T_VARIABLE","$this",203],["T_OBJECT_OPERATOR","->",203],["T_STRING","addFieldToSearchFilter",203],"(",["T_VARIABLE","$this",203],["T_OBJECT_OPERATOR","->",203],["T_STRING","_attributeToField",203],"(",["T_VARIABLE","$attribute",203],"[",["T_CONSTANT_ENCAPSED_STRING","'attribute'",203],"]",")",",",["T_WHITESPACE"," ",203],["T_VARIABLE","$attribute",203],")",";",["T_WHITESPACE","\n            ",203],"}",["T_WHITESPACE","\n        ",204],"}",["T_WHITESPACE"," ",205],["T_ELSE","else",205],["T_WHITESPACE"," ",205],"{",["T_WHITESPACE","\n            ",205],["T_VARIABLE","$this",206],["T_OBJECT_OPERATOR","->",206],["T_STRING","addAttributeToFilter",206],"(",["T_VARIABLE","$attributes",206],",",["T_WHITESPACE"," ",206],["T_VARIABLE","$condition",206],")",";",["T_WHITESPACE","\n        ",206],"}",["T_WHITESPACE","\n\n        ",207],["T_RETURN","return",209],["T_WHITESPACE"," ",209],["T_VARIABLE","$this",209],";",["T_WHITESPACE","\n    ",209],"}",["T_WHITESPACE","\n\n    ",210],["T_DOC_COMMENT","\/**\n     * Add filter by specified billing agreements\n     *\n     * @param int|array $agreements\n     * @return Mage_Sales_Model_Resource_Order_Collection\n     *\/",212],["T_WHITESPACE","\n    ",217],["T_PUBLIC","public",218],["T_WHITESPACE"," ",218],["T_FUNCTION","function",218],["T_WHITESPACE"," ",218],["T_STRING","addBillingAgreementsFilter",218],"(",["T_VARIABLE","$agreements",218],")",["T_WHITESPACE","\n    ",218],"{",["T_WHITESPACE","\n        ",219],["T_VARIABLE","$agreements",220],["T_WHITESPACE"," ",220],"=",["T_WHITESPACE"," ",220],"(",["T_STRING","is_array",220],"(",["T_VARIABLE","$agreements",220],")",")",["T_WHITESPACE"," ",220],"?",["T_WHITESPACE"," ",220],["T_VARIABLE","$agreements",220],["T_WHITESPACE"," ",220],":",["T_WHITESPACE"," ",220],["T_ARRAY","array",220],"(",["T_VARIABLE","$agreements",220],")",";",["T_WHITESPACE","\n        ",220],["T_VARIABLE","$this",221],["T_OBJECT_OPERATOR","->",221],["T_STRING","getSelect",221],"(",")",["T_WHITESPACE","\n            ",221],["T_OBJECT_OPERATOR","->",222],["T_STRING","joinInner",222],"(",["T_WHITESPACE","\n                ",222],["T_ARRAY","array",223],"(",["T_CONSTANT_ENCAPSED_STRING","'sbao'",223],["T_WHITESPACE"," ",223],["T_DOUBLE_ARROW","=>",223],["T_WHITESPACE"," ",223],["T_VARIABLE","$this",223],["T_OBJECT_OPERATOR","->",223],["T_STRING","getTable",223],"(",["T_CONSTANT_ENCAPSED_STRING","'sales\/billing_agreement_order'",223],")",")",",",["T_WHITESPACE","\n                ",223],["T_CONSTANT_ENCAPSED_STRING","'main_table.entity_id = sbao.order_id'",224],",",["T_WHITESPACE","\n                ",224],["T_ARRAY","array",225],"(",")",")",["T_WHITESPACE","\n            ",225],["T_OBJECT_OPERATOR","->",226],["T_STRING","where",226],"(",["T_CONSTANT_ENCAPSED_STRING","'sbao.agreement_id IN(?)'",226],",",["T_WHITESPACE"," ",226],["T_VARIABLE","$agreements",226],")",";",["T_WHITESPACE","\n        ",226],["T_RETURN","return",227],["T_WHITESPACE"," ",227],["T_VARIABLE","$this",227],";",["T_WHITESPACE","\n    ",227],"}",["T_WHITESPACE","\n\n    ",228],["T_DOC_COMMENT","\/**\n     * Add filter by specified recurring profile id(s)\n     *\n     * @param array|int $ids\n     * @return Mage_Sales_Model_Resource_Order_Collection\n     *\/",230],["T_WHITESPACE","\n    ",235],["T_PUBLIC","public",236],["T_WHITESPACE"," ",236],["T_FUNCTION","function",236],["T_WHITESPACE"," ",236],["T_STRING","addRecurringProfilesFilter",236],"(",["T_VARIABLE","$ids",236],")",["T_WHITESPACE","\n    ",236],"{",["T_WHITESPACE","\n        ",237],["T_VARIABLE","$ids",238],["T_WHITESPACE"," ",238],"=",["T_WHITESPACE"," ",238],"(",["T_STRING","is_array",238],"(",["T_VARIABLE","$ids",238],")",")",["T_WHITESPACE"," ",238],"?",["T_WHITESPACE"," ",238],["T_VARIABLE","$ids",238],["T_WHITESPACE"," ",238],":",["T_WHITESPACE"," ",238],["T_ARRAY","array",238],"(",["T_VARIABLE","$ids",238],")",";",["T_WHITESPACE","\n        ",238],["T_VARIABLE","$this",239],["T_OBJECT_OPERATOR","->",239],["T_STRING","getSelect",239],"(",")",["T_WHITESPACE","\n            ",239],["T_OBJECT_OPERATOR","->",240],["T_STRING","joinInner",240],"(",["T_WHITESPACE","\n                ",240],["T_ARRAY","array",241],"(",["T_CONSTANT_ENCAPSED_STRING","'srpo'",241],["T_WHITESPACE"," ",241],["T_DOUBLE_ARROW","=>",241],["T_WHITESPACE"," ",241],["T_VARIABLE","$this",241],["T_OBJECT_OPERATOR","->",241],["T_STRING","getTable",241],"(",["T_CONSTANT_ENCAPSED_STRING","'sales\/recurring_profile_order'",241],")",")",",",["T_WHITESPACE","\n                ",241],["T_CONSTANT_ENCAPSED_STRING","'main_table.entity_id = srpo.order_id'",242],",",["T_WHITESPACE","\n                ",242],["T_ARRAY","array",243],"(",")",")",["T_WHITESPACE","\n            ",243],["T_OBJECT_OPERATOR","->",244],["T_STRING","where",244],"(",["T_CONSTANT_ENCAPSED_STRING","'srpo.profile_id IN(?)'",244],",",["T_WHITESPACE"," ",244],["T_VARIABLE","$ids",244],")",";",["T_WHITESPACE","\n        ",244],["T_RETURN","return",245],["T_WHITESPACE"," ",245],["T_VARIABLE","$this",245],";",["T_WHITESPACE","\n    ",245],"}",["T_WHITESPACE","\n",246],"}",["T_WHITESPACE","\n",247]]
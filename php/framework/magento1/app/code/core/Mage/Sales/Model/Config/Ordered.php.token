[["T_OPEN_TAG","<?php\n",1],["T_DOC_COMMENT","\/**\n * Magento\n *\n * NOTICE OF LICENSE\n *\n * This source file is subject to the Open Software License (OSL 3.0)\n * that is bundled with this package in the file LICENSE.txt.\n * It is also available through the world-wide-web at this URL:\n * http:\/\/opensource.org\/licenses\/osl-3.0.php\n * If you did not receive a copy of the license and are unable to\n * obtain it through the world-wide-web, please send an email\n * to license@magento.com so we can send you a copy immediately.\n *\n * DISCLAIMER\n *\n * Do not edit or add to this file if you wish to upgrade Magento to newer\n * versions in the future. If you wish to customize Magento for your\n * needs please refer to http:\/\/www.magento.com for more information.\n *\n * @category    Mage\n * @package     Mage_Sales\n * @copyright  Copyright (c) 2006-2016 X.commerce, Inc. and affiliates (http:\/\/www.magento.com)\n * @license    http:\/\/opensource.org\/licenses\/osl-3.0.php  Open Software License (OSL 3.0)\n *\/",2],["T_WHITESPACE","\n\n",25],["T_DOC_COMMENT","\/**\n * Configuration class for ordered items\n *\n * @category    Mage\n * @package     Mage_Sales\n * @author      Magento Core Team <core@magentocommerce.com>\n *\/",27],["T_WHITESPACE","\n",33],["T_ABSTRACT","abstract",34],["T_WHITESPACE"," ",34],["T_CLASS","class",34],["T_WHITESPACE"," ",34],["T_STRING","Mage_Sales_Model_Config_Ordered",34],["T_WHITESPACE"," ",34],["T_EXTENDS","extends",34],["T_WHITESPACE"," ",34],["T_STRING","Mage_Core_Model_Config_Base",34],["T_WHITESPACE","\n",34],"{",["T_WHITESPACE","\n    ",35],["T_DOC_COMMENT","\/**\n     * Cache key for collectors\n     *\n     * @var string|null\n     *\/",36],["T_WHITESPACE","\n    ",40],["T_PROTECTED","protected",41],["T_WHITESPACE"," ",41],["T_VARIABLE","$_collectorsCacheKey",41],["T_WHITESPACE"," ",41],"=",["T_WHITESPACE"," ",41],["T_STRING","null",41],";",["T_WHITESPACE","\n\n    ",41],["T_DOC_COMMENT","\/**\n     * Configuration path where to collect registered totals\n     *\n     * @var string|null\n     *\/",43],["T_WHITESPACE","\n    ",47],["T_PROTECTED","protected",48],["T_WHITESPACE"," ",48],["T_VARIABLE","$_totalsConfigNode",48],["T_WHITESPACE"," ",48],"=",["T_WHITESPACE"," ",48],["T_STRING","null",48],";",["T_WHITESPACE","\n\n    ",48],["T_DOC_COMMENT","\/**\n     * Prepared models\n     *\n     * @var array\n     *\/",50],["T_WHITESPACE","\n    ",54],["T_PROTECTED","protected",55],["T_WHITESPACE"," ",55],["T_VARIABLE","$_models",55],["T_WHITESPACE"," ",55],"=",["T_WHITESPACE"," ",55],["T_ARRAY","array",55],"(",")",";",["T_WHITESPACE","\n\n    ",55],["T_DOC_COMMENT","\/**\n     * Models configuration\n     *\n     * @var array\n     *\/",57],["T_WHITESPACE","\n    ",61],["T_PROTECTED","protected",62],["T_WHITESPACE"," ",62],["T_VARIABLE","$_modelsConfig",62],["T_WHITESPACE"," ",62],"=",["T_WHITESPACE"," ",62],["T_ARRAY","array",62],"(",")",";",["T_WHITESPACE","\n\n    ",62],["T_DOC_COMMENT","\/**\n     * Sorted models\n     *\n     * @var array\n     *\/",64],["T_WHITESPACE","\n    ",68],["T_PROTECTED","protected",69],["T_WHITESPACE"," ",69],["T_VARIABLE","$_collectors",69],["T_WHITESPACE"," ",69],"=",["T_WHITESPACE"," ",69],["T_ARRAY","array",69],"(",")",";",["T_WHITESPACE","\n\n    ",69],["T_DOC_COMMENT","\/**\n     * Initialize total models configuration and objects\n     *\n     * @return Mage_Sales_Model_Config_Ordered\n     *\/",71],["T_WHITESPACE","\n    ",75],["T_PROTECTED","protected",76],["T_WHITESPACE"," ",76],["T_FUNCTION","function",76],["T_WHITESPACE"," ",76],["T_STRING","_initModels",76],"(",")",["T_WHITESPACE","\n    ",76],"{",["T_WHITESPACE","\n        ",77],["T_VARIABLE","$totalsConfig",78],["T_WHITESPACE"," ",78],"=",["T_WHITESPACE"," ",78],["T_VARIABLE","$this",78],["T_OBJECT_OPERATOR","->",78],["T_STRING","getNode",78],"(",["T_VARIABLE","$this",78],["T_OBJECT_OPERATOR","->",78],["T_STRING","_totalsConfigNode",78],")",";",["T_WHITESPACE","\n\n        ",78],["T_FOREACH","foreach",80],["T_WHITESPACE"," ",80],"(",["T_VARIABLE","$totalsConfig",80],["T_OBJECT_OPERATOR","->",80],["T_STRING","children",80],"(",")",["T_WHITESPACE"," ",80],["T_AS","as",80],["T_WHITESPACE"," ",80],["T_VARIABLE","$totalCode",80],["T_WHITESPACE"," ",80],["T_DOUBLE_ARROW","=>",80],["T_WHITESPACE"," ",80],["T_VARIABLE","$totalConfig",80],")",["T_WHITESPACE"," ",80],"{",["T_WHITESPACE","\n            ",80],["T_VARIABLE","$class",81],["T_WHITESPACE"," ",81],"=",["T_WHITESPACE"," ",81],["T_VARIABLE","$totalConfig",81],["T_OBJECT_OPERATOR","->",81],["T_STRING","getClassName",81],"(",")",";",["T_WHITESPACE","\n            ",81],["T_IF","if",82],["T_WHITESPACE"," ",82],"(","!",["T_EMPTY","empty",82],"(",["T_VARIABLE","$class",82],")",")",["T_WHITESPACE"," ",82],"{",["T_WHITESPACE","\n                ",82],["T_VARIABLE","$this",83],["T_OBJECT_OPERATOR","->",83],["T_STRING","_models",83],"[",["T_VARIABLE","$totalCode",83],"]",["T_WHITESPACE"," ",83],"=",["T_WHITESPACE"," ",83],["T_VARIABLE","$this",83],["T_OBJECT_OPERATOR","->",83],["T_STRING","_initModelInstance",83],"(",["T_VARIABLE","$class",83],",",["T_WHITESPACE"," ",83],["T_VARIABLE","$totalCode",83],",",["T_WHITESPACE"," ",83],["T_VARIABLE","$totalConfig",83],")",";",["T_WHITESPACE","\n            ",83],"}",["T_WHITESPACE","\n        ",84],"}",["T_WHITESPACE","\n        ",85],["T_RETURN","return",86],["T_WHITESPACE"," ",86],["T_VARIABLE","$this",86],";",["T_WHITESPACE","\n    ",86],"}",["T_WHITESPACE","\n\n    ",87],["T_DOC_COMMENT","\/**\n     * Init model class by configuration\n     *\n     * @abstract\n     * @param string $class\n     * @param string $totalCode\n     * @param array $totalConfig\n     * @return mixed\n     *\/",89],["T_WHITESPACE","\n    ",97],["T_ABSTRACT","abstract",98],["T_WHITESPACE"," ",98],["T_PROTECTED","protected",98],["T_WHITESPACE"," ",98],["T_FUNCTION","function",98],["T_WHITESPACE"," ",98],["T_STRING","_initModelInstance",98],"(",["T_VARIABLE","$class",98],",",["T_WHITESPACE"," ",98],["T_VARIABLE","$totalCode",98],",",["T_WHITESPACE"," ",98],["T_VARIABLE","$totalConfig",98],")",";",["T_WHITESPACE","\n\n    ",98],["T_DOC_COMMENT","\/**\n     * Prepare configuration array for total model\n     *\n     * @param   string $code\n     * @param   Mage_Core_Model_Config_Element $totalConfig\n     * @return  array\n     *\/",100],["T_WHITESPACE","\n    ",106],["T_PROTECTED","protected",107],["T_WHITESPACE"," ",107],["T_FUNCTION","function",107],["T_WHITESPACE"," ",107],["T_STRING","_prepareConfigArray",107],"(",["T_VARIABLE","$code",107],",",["T_WHITESPACE"," ",107],["T_VARIABLE","$totalConfig",107],")",["T_WHITESPACE","\n    ",107],"{",["T_WHITESPACE","\n        ",108],["T_VARIABLE","$totalConfig",109],["T_WHITESPACE"," ",109],"=",["T_WHITESPACE"," ",109],["T_ARRAY_CAST","(array)",109],["T_VARIABLE","$totalConfig",109],";",["T_WHITESPACE","\n        ",109],["T_IF","if",110],["T_WHITESPACE"," ",110],"(",["T_ISSET","isset",110],"(",["T_VARIABLE","$totalConfig",110],"[",["T_CONSTANT_ENCAPSED_STRING","'before'",110],"]",")",")",["T_WHITESPACE"," ",110],"{",["T_WHITESPACE","\n            ",110],["T_VARIABLE","$totalConfig",111],"[",["T_CONSTANT_ENCAPSED_STRING","'before'",111],"]",["T_WHITESPACE"," ",111],"=",["T_WHITESPACE"," ",111],["T_STRING","explode",111],"(",["T_CONSTANT_ENCAPSED_STRING","','",111],",",["T_WHITESPACE"," ",111],["T_VARIABLE","$totalConfig",111],"[",["T_CONSTANT_ENCAPSED_STRING","'before'",111],"]",")",";",["T_WHITESPACE","\n        ",111],"}",["T_WHITESPACE"," ",112],["T_ELSE","else",112],["T_WHITESPACE"," ",112],"{",["T_WHITESPACE","\n            ",112],["T_VARIABLE","$totalConfig",113],"[",["T_CONSTANT_ENCAPSED_STRING","'before'",113],"]",["T_WHITESPACE"," ",113],"=",["T_WHITESPACE"," ",113],["T_ARRAY","array",113],"(",")",";",["T_WHITESPACE","\n        ",113],"}",["T_WHITESPACE","\n        ",114],["T_IF","if",115],["T_WHITESPACE"," ",115],"(",["T_ISSET","isset",115],"(",["T_VARIABLE","$totalConfig",115],"[",["T_CONSTANT_ENCAPSED_STRING","'after'",115],"]",")",")",["T_WHITESPACE"," ",115],"{",["T_WHITESPACE","\n            ",115],["T_VARIABLE","$totalConfig",116],"[",["T_CONSTANT_ENCAPSED_STRING","'after'",116],"]",["T_WHITESPACE"," ",116],"=",["T_WHITESPACE"," ",116],["T_STRING","explode",116],"(",["T_CONSTANT_ENCAPSED_STRING","','",116],",",["T_WHITESPACE"," ",116],["T_VARIABLE","$totalConfig",116],"[",["T_CONSTANT_ENCAPSED_STRING","'after'",116],"]",")",";",["T_WHITESPACE","\n        ",116],"}",["T_WHITESPACE"," ",117],["T_ELSE","else",117],["T_WHITESPACE"," ",117],"{",["T_WHITESPACE","\n            ",117],["T_VARIABLE","$totalConfig",118],"[",["T_CONSTANT_ENCAPSED_STRING","'after'",118],"]",["T_WHITESPACE"," ",118],"=",["T_WHITESPACE"," ",118],["T_ARRAY","array",118],"(",")",";",["T_WHITESPACE","\n        ",118],"}",["T_WHITESPACE","\n        ",119],["T_VARIABLE","$totalConfig",120],"[",["T_CONSTANT_ENCAPSED_STRING","'_code'",120],"]",["T_WHITESPACE"," ",120],"=",["T_WHITESPACE"," ",120],["T_VARIABLE","$code",120],";",["T_WHITESPACE","\n        ",120],["T_RETURN","return",121],["T_WHITESPACE"," ",121],["T_VARIABLE","$totalConfig",121],";",["T_WHITESPACE","\n    ",121],"}",["T_WHITESPACE","\n\n    ",122],["T_DOC_COMMENT","\/**\n     * Aggregate before\/after information from all items and sort totals based on this data\n     *\n     * @return array\n     *\/",124],["T_WHITESPACE","\n    ",128],["T_PROTECTED","protected",129],["T_WHITESPACE"," ",129],["T_FUNCTION","function",129],["T_WHITESPACE"," ",129],["T_STRING","_getSortedCollectorCodes",129],"(",")",["T_WHITESPACE","\n    ",129],"{",["T_WHITESPACE","\n        ",130],["T_IF","if",131],["T_WHITESPACE"," ",131],"(",["T_STRING","Mage",131],["T_DOUBLE_COLON","::",131],["T_STRING","app",131],"(",")",["T_OBJECT_OPERATOR","->",131],["T_STRING","useCache",131],"(",["T_CONSTANT_ENCAPSED_STRING","'config'",131],")",")",["T_WHITESPACE"," ",131],"{",["T_WHITESPACE","\n            ",131],["T_VARIABLE","$cachedData",132],["T_WHITESPACE"," ",132],"=",["T_WHITESPACE"," ",132],["T_STRING","Mage",132],["T_DOUBLE_COLON","::",132],["T_STRING","app",132],"(",")",["T_OBJECT_OPERATOR","->",132],["T_STRING","loadCache",132],"(",["T_VARIABLE","$this",132],["T_OBJECT_OPERATOR","->",132],["T_STRING","_collectorsCacheKey",132],")",";",["T_WHITESPACE","\n            ",132],["T_IF","if",133],["T_WHITESPACE"," ",133],"(",["T_VARIABLE","$cachedData",133],")",["T_WHITESPACE"," ",133],"{",["T_WHITESPACE","\n                ",133],["T_RETURN","return",134],["T_WHITESPACE"," ",134],["T_STRING","unserialize",134],"(",["T_VARIABLE","$cachedData",134],")",";",["T_WHITESPACE","\n            ",134],"}",["T_WHITESPACE","\n        ",135],"}",["T_WHITESPACE","\n        ",136],["T_VARIABLE","$configArray",137],["T_WHITESPACE"," ",137],"=",["T_WHITESPACE"," ",137],["T_VARIABLE","$this",137],["T_OBJECT_OPERATOR","->",137],["T_STRING","_modelsConfig",137],";",["T_WHITESPACE","\n        ",137],["T_COMMENT","\/\/ invoke simple sorting if the first element contains the \"sort_order\" key\n",138],["T_WHITESPACE","        ",139],["T_STRING","reset",139],"(",["T_VARIABLE","$configArray",139],")",";",["T_WHITESPACE","\n        ",139],["T_VARIABLE","$element",140],["T_WHITESPACE"," ",140],"=",["T_WHITESPACE"," ",140],["T_STRING","current",140],"(",["T_VARIABLE","$configArray",140],")",";",["T_WHITESPACE","\n        ",140],["T_IF","if",141],["T_WHITESPACE"," ",141],"(",["T_ISSET","isset",141],"(",["T_VARIABLE","$element",141],"[",["T_CONSTANT_ENCAPSED_STRING","'sort_order'",141],"]",")",")",["T_WHITESPACE"," ",141],"{",["T_WHITESPACE","\n            ",141],["T_STRING","uasort",142],"(",["T_VARIABLE","$configArray",142],",",["T_WHITESPACE"," ",142],["T_ARRAY","array",142],"(",["T_VARIABLE","$this",142],",",["T_WHITESPACE"," ",142],["T_CONSTANT_ENCAPSED_STRING","'_compareSortOrder'",142],")",")",";",["T_WHITESPACE","\n        ",142],"}",["T_WHITESPACE"," ",143],["T_ELSE","else",143],["T_WHITESPACE"," ",143],"{",["T_WHITESPACE","\n            ",143],["T_FOREACH","foreach",144],["T_WHITESPACE"," ",144],"(",["T_VARIABLE","$configArray",144],["T_WHITESPACE"," ",144],["T_AS","as",144],["T_WHITESPACE"," ",144],["T_VARIABLE","$code",144],["T_WHITESPACE"," ",144],["T_DOUBLE_ARROW","=>",144],["T_WHITESPACE"," ",144],["T_VARIABLE","$data",144],")",["T_WHITESPACE"," ",144],"{",["T_WHITESPACE","\n                ",144],["T_FOREACH","foreach",145],["T_WHITESPACE"," ",145],"(",["T_VARIABLE","$data",145],"[",["T_CONSTANT_ENCAPSED_STRING","'before'",145],"]",["T_WHITESPACE"," ",145],["T_AS","as",145],["T_WHITESPACE"," ",145],["T_VARIABLE","$beforeCode",145],")",["T_WHITESPACE"," ",145],"{",["T_WHITESPACE","\n                    ",145],["T_IF","if",146],["T_WHITESPACE"," ",146],"(","!",["T_ISSET","isset",146],"(",["T_VARIABLE","$configArray",146],"[",["T_VARIABLE","$beforeCode",146],"]",")",")",["T_WHITESPACE"," ",146],"{",["T_WHITESPACE","\n                        ",146],["T_CONTINUE","continue",147],";",["T_WHITESPACE","\n                    ",147],"}",["T_WHITESPACE","\n                    ",148],["T_VARIABLE","$configArray",149],"[",["T_VARIABLE","$code",149],"]","[",["T_CONSTANT_ENCAPSED_STRING","'before'",149],"]",["T_WHITESPACE"," ",149],"=",["T_WHITESPACE"," ",149],["T_STRING","array_unique",149],"(",["T_STRING","array_merge",149],"(",["T_WHITESPACE","\n                        ",149],["T_VARIABLE","$configArray",150],"[",["T_VARIABLE","$code",150],"]","[",["T_CONSTANT_ENCAPSED_STRING","'before'",150],"]",",",["T_WHITESPACE"," ",150],["T_VARIABLE","$configArray",150],"[",["T_VARIABLE","$beforeCode",150],"]","[",["T_CONSTANT_ENCAPSED_STRING","'before'",150],"]",["T_WHITESPACE","\n                    ",150],")",")",";",["T_WHITESPACE","\n                    ",151],["T_VARIABLE","$configArray",152],"[",["T_VARIABLE","$beforeCode",152],"]","[",["T_CONSTANT_ENCAPSED_STRING","'after'",152],"]",["T_WHITESPACE"," ",152],"=",["T_WHITESPACE"," ",152],["T_STRING","array_merge",152],"(",["T_WHITESPACE","\n                        ",152],["T_VARIABLE","$configArray",153],"[",["T_VARIABLE","$beforeCode",153],"]","[",["T_CONSTANT_ENCAPSED_STRING","'after'",153],"]",",",["T_WHITESPACE"," ",153],["T_ARRAY","array",153],"(",["T_VARIABLE","$code",153],")",",",["T_WHITESPACE"," ",153],["T_VARIABLE","$data",153],"[",["T_CONSTANT_ENCAPSED_STRING","'after'",153],"]",["T_WHITESPACE","\n                    ",153],")",";",["T_WHITESPACE","\n                    ",154],["T_VARIABLE","$configArray",155],"[",["T_VARIABLE","$beforeCode",155],"]","[",["T_CONSTANT_ENCAPSED_STRING","'after'",155],"]",["T_WHITESPACE"," ",155],"=",["T_WHITESPACE"," ",155],["T_STRING","array_unique",155],"(",["T_VARIABLE","$configArray",155],"[",["T_VARIABLE","$beforeCode",155],"]","[",["T_CONSTANT_ENCAPSED_STRING","'after'",155],"]",")",";",["T_WHITESPACE","\n                ",155],"}",["T_WHITESPACE","\n                ",156],["T_FOREACH","foreach",157],["T_WHITESPACE"," ",157],"(",["T_VARIABLE","$data",157],"[",["T_CONSTANT_ENCAPSED_STRING","'after'",157],"]",["T_WHITESPACE"," ",157],["T_AS","as",157],["T_WHITESPACE"," ",157],["T_VARIABLE","$afterCode",157],")",["T_WHITESPACE"," ",157],"{",["T_WHITESPACE","\n                    ",157],["T_IF","if",158],["T_WHITESPACE"," ",158],"(","!",["T_ISSET","isset",158],"(",["T_VARIABLE","$configArray",158],"[",["T_VARIABLE","$afterCode",158],"]",")",")",["T_WHITESPACE"," ",158],"{",["T_WHITESPACE","\n                        ",158],["T_CONTINUE","continue",159],";",["T_WHITESPACE","\n                    ",159],"}",["T_WHITESPACE","\n                    ",160],["T_VARIABLE","$configArray",161],"[",["T_VARIABLE","$code",161],"]","[",["T_CONSTANT_ENCAPSED_STRING","'after'",161],"]",["T_WHITESPACE"," ",161],"=",["T_WHITESPACE"," ",161],["T_STRING","array_unique",161],"(",["T_STRING","array_merge",161],"(",["T_WHITESPACE","\n                        ",161],["T_VARIABLE","$configArray",162],"[",["T_VARIABLE","$code",162],"]","[",["T_CONSTANT_ENCAPSED_STRING","'after'",162],"]",",",["T_WHITESPACE"," ",162],["T_VARIABLE","$configArray",162],"[",["T_VARIABLE","$afterCode",162],"]","[",["T_CONSTANT_ENCAPSED_STRING","'after'",162],"]",["T_WHITESPACE","\n                    ",162],")",")",";",["T_WHITESPACE","\n                    ",163],["T_VARIABLE","$configArray",164],"[",["T_VARIABLE","$afterCode",164],"]","[",["T_CONSTANT_ENCAPSED_STRING","'before'",164],"]",["T_WHITESPACE"," ",164],"=",["T_WHITESPACE"," ",164],["T_STRING","array_merge",164],"(",["T_WHITESPACE","\n                        ",164],["T_VARIABLE","$configArray",165],"[",["T_VARIABLE","$afterCode",165],"]","[",["T_CONSTANT_ENCAPSED_STRING","'before'",165],"]",",",["T_WHITESPACE"," ",165],["T_ARRAY","array",165],"(",["T_VARIABLE","$code",165],")",",",["T_WHITESPACE"," ",165],["T_VARIABLE","$data",165],"[",["T_CONSTANT_ENCAPSED_STRING","'before'",165],"]",["T_WHITESPACE","\n                    ",165],")",";",["T_WHITESPACE","\n                    ",166],["T_VARIABLE","$configArray",167],"[",["T_VARIABLE","$afterCode",167],"]","[",["T_CONSTANT_ENCAPSED_STRING","'before'",167],"]",["T_WHITESPACE"," ",167],"=",["T_WHITESPACE"," ",167],["T_STRING","array_unique",167],"(",["T_VARIABLE","$configArray",167],"[",["T_VARIABLE","$afterCode",167],"]","[",["T_CONSTANT_ENCAPSED_STRING","'before'",167],"]",")",";",["T_WHITESPACE","\n                ",167],"}",["T_WHITESPACE","\n            ",168],"}",["T_WHITESPACE","\n            ",169],["T_STRING","uasort",170],"(",["T_VARIABLE","$configArray",170],",",["T_WHITESPACE"," ",170],["T_ARRAY","array",170],"(",["T_VARIABLE","$this",170],",",["T_WHITESPACE"," ",170],["T_CONSTANT_ENCAPSED_STRING","'_compareTotals'",170],")",")",";",["T_WHITESPACE","\n        ",170],"}",["T_WHITESPACE","\n        ",171],["T_VARIABLE","$sortedCollectors",172],["T_WHITESPACE"," ",172],"=",["T_WHITESPACE"," ",172],["T_STRING","array_keys",172],"(",["T_VARIABLE","$configArray",172],")",";",["T_WHITESPACE","\n        ",172],["T_IF","if",173],["T_WHITESPACE"," ",173],"(",["T_STRING","Mage",173],["T_DOUBLE_COLON","::",173],["T_STRING","app",173],"(",")",["T_OBJECT_OPERATOR","->",173],["T_STRING","useCache",173],"(",["T_CONSTANT_ENCAPSED_STRING","'config'",173],")",")",["T_WHITESPACE"," ",173],"{",["T_WHITESPACE","\n            ",173],["T_STRING","Mage",174],["T_DOUBLE_COLON","::",174],["T_STRING","app",174],"(",")",["T_OBJECT_OPERATOR","->",174],["T_STRING","saveCache",174],"(",["T_STRING","serialize",174],"(",["T_VARIABLE","$sortedCollectors",174],")",",",["T_WHITESPACE"," ",174],["T_VARIABLE","$this",174],["T_OBJECT_OPERATOR","->",174],["T_STRING","_collectorsCacheKey",174],",",["T_WHITESPACE"," ",174],["T_ARRAY","array",174],"(",["T_WHITESPACE","\n                    ",174],["T_STRING","Mage_Core_Model_Config",175],["T_DOUBLE_COLON","::",175],["T_STRING","CACHE_TAG",175],["T_WHITESPACE","\n                ",175],")",["T_WHITESPACE","\n            ",176],")",";",["T_WHITESPACE","\n        ",177],"}",["T_WHITESPACE","\n        ",178],["T_RETURN","return",179],["T_WHITESPACE"," ",179],["T_VARIABLE","$sortedCollectors",179],";",["T_WHITESPACE","\n    ",179],"}",["T_WHITESPACE","\n\n    ",180],["T_DOC_COMMENT","\/**\n     * Initialize collectors array.\n     * Collectors array is array of total models ordered based on configuration settings\n     *\n     * @return  Mage_Sales_Model_Config_Ordered\n     *\/",182],["T_WHITESPACE","\n    ",187],["T_PROTECTED","protected",188],["T_WHITESPACE"," ",188],["T_FUNCTION","function",188],["T_WHITESPACE"," ",188],["T_STRING","_initCollectors",188],"(",")",["T_WHITESPACE","\n    ",188],"{",["T_WHITESPACE","\n        ",189],["T_VARIABLE","$sortedCodes",190],["T_WHITESPACE"," ",190],"=",["T_WHITESPACE"," ",190],["T_VARIABLE","$this",190],["T_OBJECT_OPERATOR","->",190],["T_STRING","_getSortedCollectorCodes",190],"(",")",";",["T_WHITESPACE","\n        ",190],["T_FOREACH","foreach",191],["T_WHITESPACE"," ",191],"(",["T_VARIABLE","$sortedCodes",191],["T_WHITESPACE"," ",191],["T_AS","as",191],["T_WHITESPACE"," ",191],["T_VARIABLE","$code",191],")",["T_WHITESPACE"," ",191],"{",["T_WHITESPACE","\n            ",191],["T_VARIABLE","$this",192],["T_OBJECT_OPERATOR","->",192],["T_STRING","_collectors",192],"[",["T_VARIABLE","$code",192],"]",["T_WHITESPACE"," ",192],"=",["T_WHITESPACE"," ",192],["T_VARIABLE","$this",192],["T_OBJECT_OPERATOR","->",192],["T_STRING","_models",192],"[",["T_VARIABLE","$code",192],"]",";",["T_WHITESPACE","\n        ",192],"}",["T_WHITESPACE","\n\n        ",193],["T_RETURN","return",195],["T_WHITESPACE"," ",195],["T_VARIABLE","$this",195],";",["T_WHITESPACE","\n    ",195],"}",["T_WHITESPACE","\n\n    ",196],["T_DOC_COMMENT","\/**\n     * Callback that uses after\/before for comparison\n     *\n     * @param   array $a\n     * @param   array $b\n     * @return  int\n     *\/",198],["T_WHITESPACE","\n    ",204],["T_PROTECTED","protected",205],["T_WHITESPACE"," ",205],["T_FUNCTION","function",205],["T_WHITESPACE"," ",205],["T_STRING","_compareTotals",205],"(",["T_VARIABLE","$a",205],",",["T_WHITESPACE"," ",205],["T_VARIABLE","$b",205],")",["T_WHITESPACE","\n    ",205],"{",["T_WHITESPACE","\n        ",206],["T_VARIABLE","$aCode",207],["T_WHITESPACE"," ",207],"=",["T_WHITESPACE"," ",207],["T_VARIABLE","$a",207],"[",["T_CONSTANT_ENCAPSED_STRING","'_code'",207],"]",";",["T_WHITESPACE","\n        ",207],["T_VARIABLE","$bCode",208],["T_WHITESPACE"," ",208],"=",["T_WHITESPACE"," ",208],["T_VARIABLE","$b",208],"[",["T_CONSTANT_ENCAPSED_STRING","'_code'",208],"]",";",["T_WHITESPACE","\n        ",208],["T_IF","if",209],["T_WHITESPACE"," ",209],"(",["T_STRING","in_array",209],"(",["T_VARIABLE","$aCode",209],",",["T_WHITESPACE"," ",209],["T_VARIABLE","$b",209],"[",["T_CONSTANT_ENCAPSED_STRING","'after'",209],"]",")",["T_WHITESPACE"," ",209],["T_BOOLEAN_OR","||",209],["T_WHITESPACE"," ",209],["T_STRING","in_array",209],"(",["T_VARIABLE","$bCode",209],",",["T_WHITESPACE"," ",209],["T_VARIABLE","$a",209],"[",["T_CONSTANT_ENCAPSED_STRING","'before'",209],"]",")",")",["T_WHITESPACE"," ",209],"{",["T_WHITESPACE","\n            ",209],["T_VARIABLE","$res",210],["T_WHITESPACE"," ",210],"=",["T_WHITESPACE"," ",210],"-",["T_LNUMBER","1",210],";",["T_WHITESPACE","\n        ",210],"}",["T_WHITESPACE"," ",211],["T_ELSEIF","elseif",211],["T_WHITESPACE"," ",211],"(",["T_STRING","in_array",211],"(",["T_VARIABLE","$bCode",211],",",["T_WHITESPACE"," ",211],["T_VARIABLE","$a",211],"[",["T_CONSTANT_ENCAPSED_STRING","'after'",211],"]",")",["T_WHITESPACE"," ",211],["T_BOOLEAN_OR","||",211],["T_WHITESPACE"," ",211],["T_STRING","in_array",211],"(",["T_VARIABLE","$aCode",211],",",["T_WHITESPACE"," ",211],["T_VARIABLE","$b",211],"[",["T_CONSTANT_ENCAPSED_STRING","'before'",211],"]",")",")",["T_WHITESPACE"," ",211],"{",["T_WHITESPACE","\n            ",211],["T_VARIABLE","$res",212],["T_WHITESPACE"," ",212],"=",["T_WHITESPACE"," ",212],["T_LNUMBER","1",212],";",["T_WHITESPACE","\n        ",212],"}",["T_WHITESPACE"," ",213],["T_ELSE","else",213],["T_WHITESPACE"," ",213],"{",["T_WHITESPACE","\n            ",213],["T_VARIABLE","$res",214],["T_WHITESPACE"," ",214],"=",["T_WHITESPACE"," ",214],["T_LNUMBER","0",214],";",["T_WHITESPACE","\n        ",214],"}",["T_WHITESPACE","\n        ",215],["T_RETURN","return",216],["T_WHITESPACE"," ",216],["T_VARIABLE","$res",216],";",["T_WHITESPACE","\n    ",216],"}",["T_WHITESPACE","\n\n    ",217],["T_DOC_COMMENT","\/**\n     * Callback that uses sort_order for comparison\n     *\n     * @param array $a\n     * @param array $b\n     * @return int\n     *\/",219],["T_WHITESPACE","\n    ",225],["T_PROTECTED","protected",226],["T_WHITESPACE"," ",226],["T_FUNCTION","function",226],["T_WHITESPACE"," ",226],["T_STRING","_compareSortOrder",226],"(",["T_VARIABLE","$a",226],",",["T_WHITESPACE"," ",226],["T_VARIABLE","$b",226],")",["T_WHITESPACE","\n    ",226],"{",["T_WHITESPACE","\n        ",227],["T_IF","if",228],["T_WHITESPACE"," ",228],"(","!",["T_ISSET","isset",228],"(",["T_VARIABLE","$a",228],"[",["T_CONSTANT_ENCAPSED_STRING","'sort_order'",228],"]",")",["T_WHITESPACE"," ",228],["T_BOOLEAN_OR","||",228],["T_WHITESPACE"," ",228],"!",["T_ISSET","isset",228],"(",["T_VARIABLE","$b",228],"[",["T_CONSTANT_ENCAPSED_STRING","'sort_order'",228],"]",")",")",["T_WHITESPACE"," ",228],"{",["T_WHITESPACE","\n            ",228],["T_RETURN","return",229],["T_WHITESPACE"," ",229],["T_LNUMBER","0",229],";",["T_WHITESPACE","\n        ",229],"}",["T_WHITESPACE","\n        ",230],["T_IF","if",231],["T_WHITESPACE"," ",231],"(",["T_VARIABLE","$a",231],"[",["T_CONSTANT_ENCAPSED_STRING","'sort_order'",231],"]",["T_WHITESPACE"," ",231],">",["T_WHITESPACE"," ",231],["T_VARIABLE","$b",231],"[",["T_CONSTANT_ENCAPSED_STRING","'sort_order'",231],"]",")",["T_WHITESPACE"," ",231],"{",["T_WHITESPACE","\n            ",231],["T_VARIABLE","$res",232],["T_WHITESPACE"," ",232],"=",["T_WHITESPACE"," ",232],["T_LNUMBER","1",232],";",["T_WHITESPACE","\n        ",232],"}",["T_WHITESPACE"," ",233],["T_ELSEIF","elseif",233],["T_WHITESPACE"," ",233],"(",["T_VARIABLE","$a",233],"[",["T_CONSTANT_ENCAPSED_STRING","'sort_order'",233],"]",["T_WHITESPACE"," ",233],"<",["T_WHITESPACE"," ",233],["T_VARIABLE","$b",233],"[",["T_CONSTANT_ENCAPSED_STRING","'sort_order'",233],"]",")",["T_WHITESPACE"," ",233],"{",["T_WHITESPACE","\n            ",233],["T_VARIABLE","$res",234],["T_WHITESPACE"," ",234],"=",["T_WHITESPACE"," ",234],"-",["T_LNUMBER","1",234],";",["T_WHITESPACE","\n        ",234],"}",["T_WHITESPACE"," ",235],["T_ELSE","else",235],["T_WHITESPACE"," ",235],"{",["T_WHITESPACE","\n            ",235],["T_VARIABLE","$res",236],["T_WHITESPACE"," ",236],"=",["T_WHITESPACE"," ",236],["T_LNUMBER","0",236],";",["T_WHITESPACE","\n        ",236],"}",["T_WHITESPACE","\n        ",237],["T_RETURN","return",238],["T_WHITESPACE"," ",238],["T_VARIABLE","$res",238],";",["T_WHITESPACE","\n    ",238],"}",["T_WHITESPACE","\n",239],"}",["T_WHITESPACE","\n",240]]
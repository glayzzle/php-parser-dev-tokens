[["T_OPEN_TAG","<?php\n",1],["T_DOC_COMMENT","\/**\n * Magento\n *\n * NOTICE OF LICENSE\n *\n * This source file is subject to the Open Software License (OSL 3.0)\n * that is bundled with this package in the file LICENSE.txt.\n * It is also available through the world-wide-web at this URL:\n * http:\/\/opensource.org\/licenses\/osl-3.0.php\n * If you did not receive a copy of the license and are unable to\n * obtain it through the world-wide-web, please send an email\n * to license@magento.com so we can send you a copy immediately.\n *\n * DISCLAIMER\n *\n * Do not edit or add to this file if you wish to upgrade Magento to newer\n * versions in the future. If you wish to customize Magento for your\n * needs please refer to http:\/\/www.magento.com for more information.\n *\n * @category    Mage\n * @package     Mage_Sales\n * @copyright  Copyright (c) 2006-2016 X.commerce, Inc. and affiliates (http:\/\/www.magento.com)\n * @license    http:\/\/opensource.org\/licenses\/osl-3.0.php  Open Software License (OSL 3.0)\n *\/",2],["T_WHITESPACE","\n\n",25],["T_DOC_COMMENT","\/**\n * Order status resource model\n *\n * @category    Mage\n * @package     Mage_Sales\n * @author      Magento Core Team <core@magentocommerce.com>\n *\/",27],["T_WHITESPACE","\n",33],["T_CLASS","class",34],["T_WHITESPACE"," ",34],["T_STRING","Mage_Sales_Model_Resource_Order_Status",34],["T_WHITESPACE"," ",34],["T_EXTENDS","extends",34],["T_WHITESPACE"," ",34],["T_STRING","Mage_Core_Model_Resource_Db_Abstract",34],["T_WHITESPACE","\n",34],"{",["T_WHITESPACE","\n    ",35],["T_DOC_COMMENT","\/**\n     * Status labels table\n     *\n     * @var string\n     *\/",36],["T_WHITESPACE","\n    ",40],["T_PROTECTED","protected",41],["T_WHITESPACE"," ",41],["T_VARIABLE","$_labelsTable",41],";",["T_WHITESPACE","\n\n    ",41],["T_DOC_COMMENT","\/**\n     * Status state table\n     *\n     * @var string\n     *\/",43],["T_WHITESPACE","\n    ",47],["T_PROTECTED","protected",48],["T_WHITESPACE"," ",48],["T_VARIABLE","$_stateTable",48],";",["T_WHITESPACE","\n\n    ",48],["T_DOC_COMMENT","\/**\n     * Internal constructor\n     *\/",50],["T_WHITESPACE","\n    ",52],["T_PROTECTED","protected",53],["T_WHITESPACE"," ",53],["T_FUNCTION","function",53],["T_WHITESPACE"," ",53],["T_STRING","_construct",53],"(",")",["T_WHITESPACE","\n    ",53],"{",["T_WHITESPACE","\n        ",54],["T_VARIABLE","$this",55],["T_OBJECT_OPERATOR","->",55],["T_STRING","_init",55],"(",["T_CONSTANT_ENCAPSED_STRING","'sales\/order_status'",55],",",["T_WHITESPACE"," ",55],["T_CONSTANT_ENCAPSED_STRING","'status'",55],")",";",["T_WHITESPACE","\n        ",55],["T_VARIABLE","$this",56],["T_OBJECT_OPERATOR","->",56],["T_STRING","_isPkAutoIncrement",56],["T_WHITESPACE"," ",56],"=",["T_WHITESPACE"," ",56],["T_STRING","false",56],";",["T_WHITESPACE","\n        ",56],["T_VARIABLE","$this",57],["T_OBJECT_OPERATOR","->",57],["T_STRING","_labelsTable",57],["T_WHITESPACE"," ",57],"=",["T_WHITESPACE"," ",57],["T_VARIABLE","$this",57],["T_OBJECT_OPERATOR","->",57],["T_STRING","getTable",57],"(",["T_CONSTANT_ENCAPSED_STRING","'sales\/order_status_label'",57],")",";",["T_WHITESPACE","\n        ",57],["T_VARIABLE","$this",58],["T_OBJECT_OPERATOR","->",58],["T_STRING","_stateTable",58],["T_WHITESPACE","  ",58],"=",["T_WHITESPACE"," ",58],["T_VARIABLE","$this",58],["T_OBJECT_OPERATOR","->",58],["T_STRING","getTable",58],"(",["T_CONSTANT_ENCAPSED_STRING","'sales\/order_status_state'",58],")",";",["T_WHITESPACE","\n    ",58],"}",["T_WHITESPACE","\n\n    ",59],["T_DOC_COMMENT","\/**\n     * Retrieve select object for load object data\n     *\n     * @param   string $field\n     * @param   mixed $value\n     * @return  Zend_Db_Select\n     *\/",61],["T_WHITESPACE","\n    ",67],["T_PROTECTED","protected",68],["T_WHITESPACE"," ",68],["T_FUNCTION","function",68],["T_WHITESPACE"," ",68],["T_STRING","_getLoadSelect",68],"(",["T_VARIABLE","$field",68],",",["T_WHITESPACE"," ",68],["T_VARIABLE","$value",68],",",["T_WHITESPACE"," ",68],["T_VARIABLE","$object",68],")",["T_WHITESPACE","\n    ",68],"{",["T_WHITESPACE","\n        ",69],["T_IF","if",70],["T_WHITESPACE"," ",70],"(",["T_VARIABLE","$field",70],["T_WHITESPACE"," ",70],["T_IS_EQUAL","==",70],["T_WHITESPACE"," ",70],["T_CONSTANT_ENCAPSED_STRING","'default_state'",70],")",["T_WHITESPACE"," ",70],"{",["T_WHITESPACE","\n            ",70],["T_VARIABLE","$select",71],["T_WHITESPACE"," ",71],"=",["T_WHITESPACE"," ",71],["T_VARIABLE","$this",71],["T_OBJECT_OPERATOR","->",71],["T_STRING","_getReadAdapter",71],"(",")",["T_OBJECT_OPERATOR","->",71],["T_STRING","select",71],"(",")",["T_WHITESPACE","\n                ",71],["T_OBJECT_OPERATOR","->",72],["T_STRING","from",72],"(",["T_VARIABLE","$this",72],["T_OBJECT_OPERATOR","->",72],["T_STRING","getMainTable",72],"(",")",",",["T_WHITESPACE"," ",72],["T_ARRAY","array",72],"(",["T_CONSTANT_ENCAPSED_STRING","'label'",72],")",")",["T_WHITESPACE","\n                ",72],["T_OBJECT_OPERATOR","->",73],["T_STRING","join",73],"(",["T_WHITESPACE","\n                    ",73],["T_ARRAY","array",74],"(",["T_CONSTANT_ENCAPSED_STRING","'state_table'",74],["T_WHITESPACE"," ",74],["T_DOUBLE_ARROW","=>",74],["T_WHITESPACE"," ",74],["T_VARIABLE","$this",74],["T_OBJECT_OPERATOR","->",74],["T_STRING","_stateTable",74],")",",",["T_WHITESPACE","\n                    ",74],["T_VARIABLE","$this",75],["T_OBJECT_OPERATOR","->",75],["T_STRING","getMainTable",75],"(",")",["T_WHITESPACE"," ",75],".",["T_WHITESPACE"," ",75],["T_CONSTANT_ENCAPSED_STRING","'.status = state_table.status'",75],",",["T_WHITESPACE","\n                    ",75],["T_CONSTANT_ENCAPSED_STRING","'status'",76],["T_WHITESPACE","\n                ",76],")",["T_WHITESPACE","\n                ",77],["T_OBJECT_OPERATOR","->",78],["T_STRING","where",78],"(",["T_CONSTANT_ENCAPSED_STRING","'state_table.state = ?'",78],",",["T_WHITESPACE"," ",78],["T_VARIABLE","$value",78],")",["T_WHITESPACE","\n                ",78],["T_OBJECT_OPERATOR","->",79],["T_STRING","order",79],"(",["T_CONSTANT_ENCAPSED_STRING","'state_table.is_default DESC'",79],")",["T_WHITESPACE","\n                ",79],["T_OBJECT_OPERATOR","->",80],["T_STRING","limit",80],"(",["T_LNUMBER","1",80],")",";",["T_WHITESPACE","\n        ",80],"}",["T_WHITESPACE"," ",81],["T_ELSE","else",81],["T_WHITESPACE"," ",81],"{",["T_WHITESPACE","\n            ",81],["T_VARIABLE","$select",82],["T_WHITESPACE"," ",82],"=",["T_WHITESPACE"," ",82],["T_STRING","parent",82],["T_DOUBLE_COLON","::",82],["T_STRING","_getLoadSelect",82],"(",["T_VARIABLE","$field",82],",",["T_WHITESPACE"," ",82],["T_VARIABLE","$value",82],",",["T_WHITESPACE"," ",82],["T_VARIABLE","$object",82],")",";",["T_WHITESPACE","\n        ",82],"}",["T_WHITESPACE","\n        ",83],["T_RETURN","return",84],["T_WHITESPACE"," ",84],["T_VARIABLE","$select",84],";",["T_WHITESPACE","\n    ",84],"}",["T_WHITESPACE","\n\n    ",85],["T_DOC_COMMENT","\/**\n     * Store labels getter\n     *\n     * @param Mage_Core_Model_Abstract $status\n     * @return array\n     *\/",87],["T_WHITESPACE","\n    ",92],["T_PUBLIC","public",93],["T_WHITESPACE"," ",93],["T_FUNCTION","function",93],["T_WHITESPACE"," ",93],["T_STRING","getStoreLabels",93],"(",["T_STRING","Mage_Core_Model_Abstract",93],["T_WHITESPACE"," ",93],["T_VARIABLE","$status",93],")",["T_WHITESPACE","\n    ",93],"{",["T_WHITESPACE","\n        ",94],["T_VARIABLE","$select",95],["T_WHITESPACE"," ",95],"=",["T_WHITESPACE"," ",95],["T_VARIABLE","$this",95],["T_OBJECT_OPERATOR","->",95],["T_STRING","_getWriteAdapter",95],"(",")",["T_OBJECT_OPERATOR","->",95],["T_STRING","select",95],"(",")",["T_WHITESPACE","\n            ",95],["T_OBJECT_OPERATOR","->",96],["T_STRING","from",96],"(",["T_VARIABLE","$this",96],["T_OBJECT_OPERATOR","->",96],["T_STRING","_labelsTable",96],",",["T_WHITESPACE"," ",96],["T_ARRAY","array",96],"(",["T_CONSTANT_ENCAPSED_STRING","'store_id'",96],",",["T_WHITESPACE"," ",96],["T_CONSTANT_ENCAPSED_STRING","'label'",96],")",")",["T_WHITESPACE","\n            ",96],["T_OBJECT_OPERATOR","->",97],["T_STRING","where",97],"(",["T_CONSTANT_ENCAPSED_STRING","'status = ?'",97],",",["T_WHITESPACE"," ",97],["T_VARIABLE","$status",97],["T_OBJECT_OPERATOR","->",97],["T_STRING","getStatus",97],"(",")",")",";",["T_WHITESPACE","\n        ",97],["T_RETURN","return",98],["T_WHITESPACE"," ",98],["T_VARIABLE","$this",98],["T_OBJECT_OPERATOR","->",98],["T_STRING","_getReadAdapter",98],"(",")",["T_OBJECT_OPERATOR","->",98],["T_STRING","fetchPairs",98],"(",["T_VARIABLE","$select",98],")",";",["T_WHITESPACE","\n    ",98],"}",["T_WHITESPACE","\n\n    ",99],["T_DOC_COMMENT","\/**\n     * Save status labels per store\n     *\n     * @param Mage_Core_Model_Abstract $object\n     * @return Mage_Sales_Model_Resource_Order_Status\n     *\/",101],["T_WHITESPACE","\n    ",106],["T_PROTECTED","protected",107],["T_WHITESPACE"," ",107],["T_FUNCTION","function",107],["T_WHITESPACE"," ",107],["T_STRING","_afterSave",107],"(",["T_STRING","Mage_Core_Model_Abstract",107],["T_WHITESPACE"," ",107],["T_VARIABLE","$object",107],")",["T_WHITESPACE","\n    ",107],"{",["T_WHITESPACE","\n        ",108],["T_IF","if",109],["T_WHITESPACE"," ",109],"(",["T_VARIABLE","$object",109],["T_OBJECT_OPERATOR","->",109],["T_STRING","hasStoreLabels",109],"(",")",")",["T_WHITESPACE"," ",109],"{",["T_WHITESPACE","\n            ",109],["T_VARIABLE","$labels",110],["T_WHITESPACE"," ",110],"=",["T_WHITESPACE"," ",110],["T_VARIABLE","$object",110],["T_OBJECT_OPERATOR","->",110],["T_STRING","getStoreLabels",110],"(",")",";",["T_WHITESPACE","\n            ",110],["T_VARIABLE","$this",111],["T_OBJECT_OPERATOR","->",111],["T_STRING","_getWriteAdapter",111],"(",")",["T_OBJECT_OPERATOR","->",111],["T_STRING","delete",111],"(",["T_WHITESPACE","\n                ",111],["T_VARIABLE","$this",112],["T_OBJECT_OPERATOR","->",112],["T_STRING","_labelsTable",112],",",["T_WHITESPACE","\n                ",112],["T_ARRAY","array",113],"(",["T_CONSTANT_ENCAPSED_STRING","'status = ?'",113],["T_WHITESPACE"," ",113],["T_DOUBLE_ARROW","=>",113],["T_WHITESPACE"," ",113],["T_VARIABLE","$object",113],["T_OBJECT_OPERATOR","->",113],["T_STRING","getStatus",113],"(",")",")",["T_WHITESPACE","\n            ",113],")",";",["T_WHITESPACE","\n            ",114],["T_VARIABLE","$data",115],["T_WHITESPACE"," ",115],"=",["T_WHITESPACE"," ",115],["T_ARRAY","array",115],"(",")",";",["T_WHITESPACE","\n            ",115],["T_FOREACH","foreach",116],["T_WHITESPACE"," ",116],"(",["T_VARIABLE","$labels",116],["T_WHITESPACE"," ",116],["T_AS","as",116],["T_WHITESPACE"," ",116],["T_VARIABLE","$storeId",116],["T_WHITESPACE"," ",116],["T_DOUBLE_ARROW","=>",116],["T_WHITESPACE"," ",116],["T_VARIABLE","$label",116],")",["T_WHITESPACE"," ",116],"{",["T_WHITESPACE","\n                ",116],["T_IF","if",117],["T_WHITESPACE"," ",117],"(",["T_EMPTY","empty",117],"(",["T_VARIABLE","$label",117],")",")",["T_WHITESPACE"," ",117],"{",["T_WHITESPACE","\n                    ",117],["T_CONTINUE","continue",118],";",["T_WHITESPACE","\n                ",118],"}",["T_WHITESPACE","\n                ",119],["T_VARIABLE","$data",120],"[","]",["T_WHITESPACE"," ",120],"=",["T_WHITESPACE"," ",120],["T_ARRAY","array",120],"(",["T_WHITESPACE","\n                    ",120],["T_CONSTANT_ENCAPSED_STRING","'status'",121],["T_WHITESPACE","    ",121],["T_DOUBLE_ARROW","=>",121],["T_WHITESPACE"," ",121],["T_VARIABLE","$object",121],["T_OBJECT_OPERATOR","->",121],["T_STRING","getStatus",121],"(",")",",",["T_WHITESPACE","\n                    ",121],["T_CONSTANT_ENCAPSED_STRING","'store_id'",122],["T_WHITESPACE","  ",122],["T_DOUBLE_ARROW","=>",122],["T_WHITESPACE"," ",122],["T_VARIABLE","$storeId",122],",",["T_WHITESPACE","\n                    ",122],["T_CONSTANT_ENCAPSED_STRING","'label'",123],["T_WHITESPACE","     ",123],["T_DOUBLE_ARROW","=>",123],["T_WHITESPACE"," ",123],["T_VARIABLE","$label",123],["T_WHITESPACE","\n                ",123],")",";",["T_WHITESPACE","\n            ",124],"}",["T_WHITESPACE","\n            ",125],["T_IF","if",126],["T_WHITESPACE"," ",126],"(","!",["T_EMPTY","empty",126],"(",["T_VARIABLE","$data",126],")",")",["T_WHITESPACE"," ",126],"{",["T_WHITESPACE","\n                ",126],["T_VARIABLE","$this",127],["T_OBJECT_OPERATOR","->",127],["T_STRING","_getWriteAdapter",127],"(",")",["T_OBJECT_OPERATOR","->",127],["T_STRING","insertMultiple",127],"(",["T_VARIABLE","$this",127],["T_OBJECT_OPERATOR","->",127],["T_STRING","_labelsTable",127],",",["T_WHITESPACE"," ",127],["T_VARIABLE","$data",127],")",";",["T_WHITESPACE","\n            ",127],"}",["T_WHITESPACE","\n        ",128],"}",["T_WHITESPACE","\n        ",129],["T_RETURN","return",130],["T_WHITESPACE"," ",130],["T_STRING","parent",130],["T_DOUBLE_COLON","::",130],["T_STRING","_afterSave",130],"(",["T_VARIABLE","$object",130],")",";",["T_WHITESPACE","\n    ",130],"}",["T_WHITESPACE","\n\n    ",131],["T_DOC_COMMENT","\/**\n     * Assign order status to order state\n     *\n     * @param string $status\n     * @param string $state\n     * @param bool $isDefault\n     * @return Mage_Sales_Model_Resource_Order_Status\n     *\/",133],["T_WHITESPACE","\n    ",140],["T_PUBLIC","public",141],["T_WHITESPACE"," ",141],["T_FUNCTION","function",141],["T_WHITESPACE"," ",141],["T_STRING","assignState",141],"(",["T_VARIABLE","$status",141],",",["T_WHITESPACE"," ",141],["T_VARIABLE","$state",141],",",["T_WHITESPACE"," ",141],["T_VARIABLE","$isDefault",141],")",["T_WHITESPACE","\n    ",141],"{",["T_WHITESPACE","\n        ",142],["T_IF","if",143],["T_WHITESPACE"," ",143],"(",["T_VARIABLE","$isDefault",143],")",["T_WHITESPACE"," ",143],"{",["T_WHITESPACE","\n            ",143],["T_VARIABLE","$this",144],["T_OBJECT_OPERATOR","->",144],["T_STRING","_getWriteAdapter",144],"(",")",["T_OBJECT_OPERATOR","->",144],["T_STRING","update",144],"(",["T_WHITESPACE","\n                ",144],["T_VARIABLE","$this",145],["T_OBJECT_OPERATOR","->",145],["T_STRING","_stateTable",145],",",["T_WHITESPACE","\n                ",145],["T_ARRAY","array",146],"(",["T_CONSTANT_ENCAPSED_STRING","'is_default'",146],["T_WHITESPACE"," ",146],["T_DOUBLE_ARROW","=>",146],["T_WHITESPACE"," ",146],["T_LNUMBER","0",146],")",",",["T_WHITESPACE","\n                ",146],["T_ARRAY","array",147],"(",["T_CONSTANT_ENCAPSED_STRING","'state = ?'",147],["T_WHITESPACE"," ",147],["T_DOUBLE_ARROW","=>",147],["T_WHITESPACE"," ",147],["T_VARIABLE","$state",147],")",["T_WHITESPACE","\n            ",147],")",";",["T_WHITESPACE","\n        ",148],"}",["T_WHITESPACE","\n        ",149],["T_VARIABLE","$this",150],["T_OBJECT_OPERATOR","->",150],["T_STRING","_getWriteAdapter",150],"(",")",["T_OBJECT_OPERATOR","->",150],["T_STRING","insertOnDuplicate",150],"(",["T_WHITESPACE","\n            ",150],["T_VARIABLE","$this",151],["T_OBJECT_OPERATOR","->",151],["T_STRING","_stateTable",151],",",["T_WHITESPACE","\n            ",151],["T_ARRAY","array",152],"(",["T_WHITESPACE","\n                ",152],["T_CONSTANT_ENCAPSED_STRING","'status'",153],["T_WHITESPACE","     ",153],["T_DOUBLE_ARROW","=>",153],["T_WHITESPACE"," ",153],["T_VARIABLE","$status",153],",",["T_WHITESPACE","\n                ",153],["T_CONSTANT_ENCAPSED_STRING","'state'",154],["T_WHITESPACE","      ",154],["T_DOUBLE_ARROW","=>",154],["T_WHITESPACE"," ",154],["T_VARIABLE","$state",154],",",["T_WHITESPACE","\n                ",154],["T_CONSTANT_ENCAPSED_STRING","'is_default'",155],["T_WHITESPACE"," ",155],["T_DOUBLE_ARROW","=>",155],["T_WHITESPACE"," ",155],["T_INT_CAST","(int)",155],["T_WHITESPACE"," ",155],["T_VARIABLE","$isDefault",155],["T_WHITESPACE","\n            ",155],")",["T_WHITESPACE","\n        ",156],")",";",["T_WHITESPACE","\n        ",157],["T_RETURN","return",158],["T_WHITESPACE"," ",158],["T_VARIABLE","$this",158],";",["T_WHITESPACE","\n    ",158],"}",["T_WHITESPACE","\n\n    ",159],["T_DOC_COMMENT","\/**\n     * Unassign order status from order state\n     *\n     * @param string $status\n     * @param string $state\n     * @return Mage_Sales_Model_Resource_Order_Status\n     *\/",161],["T_WHITESPACE","\n    ",167],["T_PUBLIC","public",168],["T_WHITESPACE"," ",168],["T_FUNCTION","function",168],["T_WHITESPACE"," ",168],["T_STRING","unassignState",168],"(",["T_VARIABLE","$status",168],",",["T_WHITESPACE"," ",168],["T_VARIABLE","$state",168],")",["T_WHITESPACE","\n    ",168],"{",["T_WHITESPACE","\n        ",169],["T_VARIABLE","$select",170],["T_WHITESPACE"," ",170],"=",["T_WHITESPACE"," ",170],["T_VARIABLE","$this",170],["T_OBJECT_OPERATOR","->",170],["T_STRING","_getWriteAdapter",170],"(",")",["T_OBJECT_OPERATOR","->",170],["T_STRING","select",170],"(",")",["T_WHITESPACE","\n            ",170],["T_OBJECT_OPERATOR","->",171],["T_STRING","from",171],"(",["T_VARIABLE","$this",171],["T_OBJECT_OPERATOR","->",171],["T_STRING","_stateTable",171],",",["T_WHITESPACE"," ",171],["T_ARRAY","array",171],"(",["T_CONSTANT_ENCAPSED_STRING","'qty'",171],["T_WHITESPACE"," ",171],["T_DOUBLE_ARROW","=>",171],["T_WHITESPACE"," ",171],["T_NEW","new",171],["T_WHITESPACE"," ",171],["T_STRING","Zend_Db_Expr",171],"(",["T_CONSTANT_ENCAPSED_STRING","'COUNT(*)'",171],")",")",")",["T_WHITESPACE","\n            ",171],["T_OBJECT_OPERATOR","->",172],["T_STRING","where",172],"(",["T_CONSTANT_ENCAPSED_STRING","'state = ?'",172],",",["T_WHITESPACE"," ",172],["T_VARIABLE","$state",172],")",";",["T_WHITESPACE","\n\n        ",172],["T_IF","if",174],["T_WHITESPACE"," ",174],"(",["T_VARIABLE","$this",174],["T_OBJECT_OPERATOR","->",174],["T_STRING","_getWriteAdapter",174],"(",")",["T_OBJECT_OPERATOR","->",174],["T_STRING","fetchOne",174],"(",["T_VARIABLE","$select",174],")",["T_WHITESPACE"," ",174],["T_IS_EQUAL","==",174],["T_WHITESPACE"," ",174],["T_LNUMBER","1",174],")",["T_WHITESPACE"," ",174],"{",["T_WHITESPACE","\n            ",174],["T_THROW","throw",175],["T_WHITESPACE"," ",175],["T_NEW","new",175],["T_WHITESPACE"," ",175],["T_STRING","Mage_Core_Exception",175],"(",["T_WHITESPACE","\n                ",175],["T_STRING","Mage",176],["T_DOUBLE_COLON","::",176],["T_STRING","helper",176],"(",["T_CONSTANT_ENCAPSED_STRING","'sales'",176],")",["T_OBJECT_OPERATOR","->",176],["T_STRING","__",176],"(",["T_CONSTANT_ENCAPSED_STRING","'Last status can\\'t be unassigned from state.'",176],")",["T_WHITESPACE","\n            ",176],")",";",["T_WHITESPACE","\n        ",177],"}",["T_WHITESPACE","\n        ",178],["T_VARIABLE","$select",179],["T_WHITESPACE"," ",179],"=",["T_WHITESPACE"," ",179],["T_VARIABLE","$this",179],["T_OBJECT_OPERATOR","->",179],["T_STRING","_getWriteAdapter",179],"(",")",["T_OBJECT_OPERATOR","->",179],["T_STRING","select",179],"(",")",["T_WHITESPACE","\n            ",179],["T_OBJECT_OPERATOR","->",180],["T_STRING","from",180],"(",["T_VARIABLE","$this",180],["T_OBJECT_OPERATOR","->",180],["T_STRING","_stateTable",180],",",["T_WHITESPACE"," ",180],["T_CONSTANT_ENCAPSED_STRING","'is_default'",180],")",["T_WHITESPACE","\n            ",180],["T_OBJECT_OPERATOR","->",181],["T_STRING","where",181],"(",["T_CONSTANT_ENCAPSED_STRING","'state = ?'",181],",",["T_WHITESPACE"," ",181],["T_VARIABLE","$state",181],")",["T_WHITESPACE","\n            ",181],["T_OBJECT_OPERATOR","->",182],["T_STRING","where",182],"(",["T_CONSTANT_ENCAPSED_STRING","'status = ?'",182],",",["T_WHITESPACE"," ",182],["T_VARIABLE","$status",182],")",["T_WHITESPACE","\n            ",182],["T_OBJECT_OPERATOR","->",183],["T_STRING","limit",183],"(",["T_LNUMBER","1",183],")",";",["T_WHITESPACE","\n        ",183],["T_VARIABLE","$isDefault",184],["T_WHITESPACE"," ",184],"=",["T_WHITESPACE"," ",184],["T_VARIABLE","$this",184],["T_OBJECT_OPERATOR","->",184],["T_STRING","_getWriteAdapter",184],"(",")",["T_OBJECT_OPERATOR","->",184],["T_STRING","fetchOne",184],"(",["T_VARIABLE","$select",184],")",";",["T_WHITESPACE","\n        ",184],["T_VARIABLE","$this",185],["T_OBJECT_OPERATOR","->",185],["T_STRING","_getWriteAdapter",185],"(",")",["T_OBJECT_OPERATOR","->",185],["T_STRING","delete",185],"(",["T_WHITESPACE","\n            ",185],["T_VARIABLE","$this",186],["T_OBJECT_OPERATOR","->",186],["T_STRING","_stateTable",186],",",["T_WHITESPACE","\n            ",186],["T_ARRAY","array",187],"(",["T_WHITESPACE","\n                ",187],["T_CONSTANT_ENCAPSED_STRING","'state = ?'",188],["T_WHITESPACE"," ",188],["T_DOUBLE_ARROW","=>",188],["T_WHITESPACE"," ",188],["T_VARIABLE","$state",188],",",["T_WHITESPACE","\n                ",188],["T_CONSTANT_ENCAPSED_STRING","'status = ?'",189],["T_WHITESPACE"," ",189],["T_DOUBLE_ARROW","=>",189],["T_WHITESPACE"," ",189],["T_VARIABLE","$status",189],["T_WHITESPACE","\n            ",189],")",["T_WHITESPACE","\n        ",190],")",";",["T_WHITESPACE","\n\n        ",191],["T_IF","if",193],["T_WHITESPACE"," ",193],"(",["T_VARIABLE","$isDefault",193],")",["T_WHITESPACE"," ",193],"{",["T_WHITESPACE","\n            ",193],["T_VARIABLE","$select",194],["T_WHITESPACE"," ",194],"=",["T_WHITESPACE"," ",194],["T_VARIABLE","$this",194],["T_OBJECT_OPERATOR","->",194],["T_STRING","_getWriteAdapter",194],"(",")",["T_OBJECT_OPERATOR","->",194],["T_STRING","select",194],"(",")",["T_WHITESPACE","\n                ",194],["T_OBJECT_OPERATOR","->",195],["T_STRING","from",195],"(",["T_VARIABLE","$this",195],["T_OBJECT_OPERATOR","->",195],["T_STRING","_stateTable",195],",",["T_WHITESPACE"," ",195],["T_CONSTANT_ENCAPSED_STRING","'status'",195],")",["T_WHITESPACE","\n                ",195],["T_OBJECT_OPERATOR","->",196],["T_STRING","where",196],"(",["T_CONSTANT_ENCAPSED_STRING","'state = ?'",196],",",["T_WHITESPACE"," ",196],["T_VARIABLE","$state",196],")",["T_WHITESPACE","\n                ",196],["T_OBJECT_OPERATOR","->",197],["T_STRING","limit",197],"(",["T_LNUMBER","1",197],")",";",["T_WHITESPACE","\n            ",197],["T_VARIABLE","$defaultStatus",198],["T_WHITESPACE"," ",198],"=",["T_WHITESPACE"," ",198],["T_VARIABLE","$this",198],["T_OBJECT_OPERATOR","->",198],["T_STRING","_getWriteAdapter",198],"(",")",["T_OBJECT_OPERATOR","->",198],["T_STRING","fetchOne",198],"(",["T_VARIABLE","$select",198],")",";",["T_WHITESPACE","\n            ",198],["T_IF","if",199],["T_WHITESPACE"," ",199],"(",["T_VARIABLE","$defaultStatus",199],")",["T_WHITESPACE"," ",199],"{",["T_WHITESPACE","\n                ",199],["T_VARIABLE","$this",200],["T_OBJECT_OPERATOR","->",200],["T_STRING","_getWriteAdapter",200],"(",")",["T_OBJECT_OPERATOR","->",200],["T_STRING","update",200],"(",["T_WHITESPACE","\n                    ",200],["T_VARIABLE","$this",201],["T_OBJECT_OPERATOR","->",201],["T_STRING","_stateTable",201],",",["T_WHITESPACE","\n                    ",201],["T_ARRAY","array",202],"(",["T_CONSTANT_ENCAPSED_STRING","'is_default'",202],["T_WHITESPACE"," ",202],["T_DOUBLE_ARROW","=>",202],["T_WHITESPACE"," ",202],["T_LNUMBER","1",202],")",",",["T_WHITESPACE","\n                    ",202],["T_ARRAY","array",203],"(",["T_WHITESPACE","\n                        ",203],["T_CONSTANT_ENCAPSED_STRING","'state = ?'",204],["T_WHITESPACE"," ",204],["T_DOUBLE_ARROW","=>",204],["T_WHITESPACE"," ",204],["T_VARIABLE","$state",204],",",["T_WHITESPACE","\n                        ",204],["T_CONSTANT_ENCAPSED_STRING","'status = ?'",205],["T_WHITESPACE"," ",205],["T_DOUBLE_ARROW","=>",205],["T_WHITESPACE"," ",205],["T_VARIABLE","$defaultStatus",205],["T_WHITESPACE","\n                    ",205],")",["T_WHITESPACE","\n                ",206],")",";",["T_WHITESPACE","\n            ",207],"}",["T_WHITESPACE","\n        ",208],"}",["T_WHITESPACE","\n        ",209],["T_RETURN","return",210],["T_WHITESPACE"," ",210],["T_VARIABLE","$this",210],";",["T_WHITESPACE","\n    ",210],"}",["T_WHITESPACE","\n",211],"}",["T_WHITESPACE","\n",212]]
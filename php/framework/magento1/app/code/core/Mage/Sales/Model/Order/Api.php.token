[["T_OPEN_TAG","<?php\n",1],["T_DOC_COMMENT","\/**\n * Magento\n *\n * NOTICE OF LICENSE\n *\n * This source file is subject to the Open Software License (OSL 3.0)\n * that is bundled with this package in the file LICENSE.txt.\n * It is also available through the world-wide-web at this URL:\n * http:\/\/opensource.org\/licenses\/osl-3.0.php\n * If you did not receive a copy of the license and are unable to\n * obtain it through the world-wide-web, please send an email\n * to license@magento.com so we can send you a copy immediately.\n *\n * DISCLAIMER\n *\n * Do not edit or add to this file if you wish to upgrade Magento to newer\n * versions in the future. If you wish to customize Magento for your\n * needs please refer to http:\/\/www.magento.com for more information.\n *\n * @category    Mage\n * @package     Mage_Sales\n * @copyright  Copyright (c) 2006-2016 X.commerce, Inc. and affiliates (http:\/\/www.magento.com)\n * @license    http:\/\/opensource.org\/licenses\/osl-3.0.php  Open Software License (OSL 3.0)\n *\/",2],["T_WHITESPACE","\n\n",25],["T_DOC_COMMENT","\/**\n * Order API\n *\n * @category   Mage\n * @package    Mage_Sales\n * @author     Magento Core Team <core@magentocommerce.com>\n *\/",27],["T_WHITESPACE","\n",33],["T_CLASS","class",34],["T_WHITESPACE"," ",34],["T_STRING","Mage_Sales_Model_Order_Api",34],["T_WHITESPACE"," ",34],["T_EXTENDS","extends",34],["T_WHITESPACE"," ",34],["T_STRING","Mage_Sales_Model_Api_Resource",34],["T_WHITESPACE","\n",34],"{",["T_WHITESPACE","\n    ",35],["T_DOC_COMMENT","\/**\n     * Initialize attributes map\n     *\/",36],["T_WHITESPACE","\n    ",38],["T_PUBLIC","public",39],["T_WHITESPACE"," ",39],["T_FUNCTION","function",39],["T_WHITESPACE"," ",39],["T_STRING","__construct",39],"(",")",["T_WHITESPACE","\n    ",39],"{",["T_WHITESPACE","\n        ",40],["T_VARIABLE","$this",41],["T_OBJECT_OPERATOR","->",41],["T_STRING","_attributesMap",41],["T_WHITESPACE"," ",41],"=",["T_WHITESPACE"," ",41],["T_ARRAY","array",41],"(",["T_WHITESPACE","\n            ",41],["T_CONSTANT_ENCAPSED_STRING","'order'",42],["T_WHITESPACE"," ",42],["T_DOUBLE_ARROW","=>",42],["T_WHITESPACE"," ",42],["T_ARRAY","array",42],"(",["T_CONSTANT_ENCAPSED_STRING","'order_id'",42],["T_WHITESPACE"," ",42],["T_DOUBLE_ARROW","=>",42],["T_WHITESPACE"," ",42],["T_CONSTANT_ENCAPSED_STRING","'entity_id'",42],")",",",["T_WHITESPACE","\n            ",42],["T_CONSTANT_ENCAPSED_STRING","'order_address'",43],["T_WHITESPACE"," ",43],["T_DOUBLE_ARROW","=>",43],["T_WHITESPACE"," ",43],["T_ARRAY","array",43],"(",["T_CONSTANT_ENCAPSED_STRING","'address_id'",43],["T_WHITESPACE"," ",43],["T_DOUBLE_ARROW","=>",43],["T_WHITESPACE"," ",43],["T_CONSTANT_ENCAPSED_STRING","'entity_id'",43],")",",",["T_WHITESPACE","\n            ",43],["T_CONSTANT_ENCAPSED_STRING","'order_payment'",44],["T_WHITESPACE"," ",44],["T_DOUBLE_ARROW","=>",44],["T_WHITESPACE"," ",44],["T_ARRAY","array",44],"(",["T_CONSTANT_ENCAPSED_STRING","'payment_id'",44],["T_WHITESPACE"," ",44],["T_DOUBLE_ARROW","=>",44],["T_WHITESPACE"," ",44],["T_CONSTANT_ENCAPSED_STRING","'entity_id'",44],")",["T_WHITESPACE","\n        ",44],")",";",["T_WHITESPACE","\n    ",45],"}",["T_WHITESPACE","\n\n    ",46],["T_DOC_COMMENT","\/**\n     * Initialize basic order model\n     *\n     * @param mixed $orderIncrementId\n     * @return Mage_Sales_Model_Order\n     *\/",48],["T_WHITESPACE","\n    ",53],["T_PROTECTED","protected",54],["T_WHITESPACE"," ",54],["T_FUNCTION","function",54],["T_WHITESPACE"," ",54],["T_STRING","_initOrder",54],"(",["T_VARIABLE","$orderIncrementId",54],")",["T_WHITESPACE","\n    ",54],"{",["T_WHITESPACE","\n        ",55],["T_VARIABLE","$order",56],["T_WHITESPACE"," ",56],"=",["T_WHITESPACE"," ",56],["T_STRING","Mage",56],["T_DOUBLE_COLON","::",56],["T_STRING","getModel",56],"(",["T_CONSTANT_ENCAPSED_STRING","'sales\/order'",56],")",";",["T_WHITESPACE","\n\n        ",56],["T_COMMENT","\/* @var $order Mage_Sales_Model_Order *\/",58],["T_WHITESPACE","\n\n        ",58],["T_VARIABLE","$order",60],["T_OBJECT_OPERATOR","->",60],["T_STRING","loadByIncrementId",60],"(",["T_VARIABLE","$orderIncrementId",60],")",";",["T_WHITESPACE","\n\n        ",60],["T_IF","if",62],["T_WHITESPACE"," ",62],"(","!",["T_VARIABLE","$order",62],["T_OBJECT_OPERATOR","->",62],["T_STRING","getId",62],"(",")",")",["T_WHITESPACE"," ",62],"{",["T_WHITESPACE","\n            ",62],["T_VARIABLE","$this",63],["T_OBJECT_OPERATOR","->",63],["T_STRING","_fault",63],"(",["T_CONSTANT_ENCAPSED_STRING","'not_exists'",63],")",";",["T_WHITESPACE","\n        ",63],"}",["T_WHITESPACE","\n\n        ",64],["T_RETURN","return",66],["T_WHITESPACE"," ",66],["T_VARIABLE","$order",66],";",["T_WHITESPACE","\n    ",66],"}",["T_WHITESPACE","\n\n    ",67],["T_DOC_COMMENT","\/**\n     * Retrieve list of orders. Filtration could be applied\n     *\n     * @param null|object|array $filters\n     * @return array\n     *\/",69],["T_WHITESPACE","\n    ",74],["T_PUBLIC","public",75],["T_WHITESPACE"," ",75],["T_FUNCTION","function",75],["T_WHITESPACE"," ",75],["T_STRING","items",75],"(",["T_VARIABLE","$filters",75],["T_WHITESPACE"," ",75],"=",["T_WHITESPACE"," ",75],["T_STRING","null",75],")",["T_WHITESPACE","\n    ",75],"{",["T_WHITESPACE","\n        ",76],["T_VARIABLE","$orders",77],["T_WHITESPACE"," ",77],"=",["T_WHITESPACE"," ",77],["T_ARRAY","array",77],"(",")",";",["T_WHITESPACE","\n\n        ",77],["T_COMMENT","\/\/TODO: add full name logic\n",79],["T_WHITESPACE","        ",80],["T_VARIABLE","$billingAliasName",80],["T_WHITESPACE"," ",80],"=",["T_WHITESPACE"," ",80],["T_CONSTANT_ENCAPSED_STRING","'billing_o_a'",80],";",["T_WHITESPACE","\n        ",80],["T_VARIABLE","$shippingAliasName",81],["T_WHITESPACE"," ",81],"=",["T_WHITESPACE"," ",81],["T_CONSTANT_ENCAPSED_STRING","'shipping_o_a'",81],";",["T_WHITESPACE","\n\n        ",81],["T_DOC_COMMENT","\/** @var $orderCollection Mage_Sales_Model_Mysql4_Order_Collection *\/",83],["T_WHITESPACE","\n        ",83],["T_VARIABLE","$orderCollection",84],["T_WHITESPACE"," ",84],"=",["T_WHITESPACE"," ",84],["T_STRING","Mage",84],["T_DOUBLE_COLON","::",84],["T_STRING","getModel",84],"(",["T_CONSTANT_ENCAPSED_STRING","\"sales\/order\"",84],")",["T_OBJECT_OPERATOR","->",84],["T_STRING","getCollection",84],"(",")",";",["T_WHITESPACE","\n        ",84],["T_VARIABLE","$billingFirstnameField",85],["T_WHITESPACE"," ",85],"=",["T_WHITESPACE"," ",85],"\"",["T_VARIABLE","$billingAliasName",85],["T_ENCAPSED_AND_WHITESPACE",".firstname",85],"\"",";",["T_WHITESPACE","\n        ",85],["T_VARIABLE","$billingLastnameField",86],["T_WHITESPACE"," ",86],"=",["T_WHITESPACE"," ",86],"\"",["T_VARIABLE","$billingAliasName",86],["T_ENCAPSED_AND_WHITESPACE",".lastname",86],"\"",";",["T_WHITESPACE","\n        ",86],["T_VARIABLE","$shippingFirstnameField",87],["T_WHITESPACE"," ",87],"=",["T_WHITESPACE"," ",87],"\"",["T_VARIABLE","$shippingAliasName",87],["T_ENCAPSED_AND_WHITESPACE",".firstname",87],"\"",";",["T_WHITESPACE","\n        ",87],["T_VARIABLE","$shippingLastnameField",88],["T_WHITESPACE"," ",88],"=",["T_WHITESPACE"," ",88],"\"",["T_VARIABLE","$shippingAliasName",88],["T_ENCAPSED_AND_WHITESPACE",".lastname",88],"\"",";",["T_WHITESPACE","\n        ",88],["T_VARIABLE","$orderCollection",89],["T_OBJECT_OPERATOR","->",89],["T_STRING","addAttributeToSelect",89],"(",["T_CONSTANT_ENCAPSED_STRING","'*'",89],")",["T_WHITESPACE","\n            ",89],["T_OBJECT_OPERATOR","->",90],["T_STRING","addAddressFields",90],"(",")",["T_WHITESPACE","\n            ",90],["T_OBJECT_OPERATOR","->",91],["T_STRING","addExpressionFieldToSelect",91],"(",["T_CONSTANT_ENCAPSED_STRING","'billing_firstname'",91],",",["T_WHITESPACE"," ",91],["T_CONSTANT_ENCAPSED_STRING","\"{{billing_firstname}}\"",91],",",["T_WHITESPACE","\n                ",91],["T_ARRAY","array",92],"(",["T_CONSTANT_ENCAPSED_STRING","'billing_firstname'",92],["T_WHITESPACE"," ",92],["T_DOUBLE_ARROW","=>",92],["T_WHITESPACE"," ",92],["T_VARIABLE","$billingFirstnameField",92],")",")",["T_WHITESPACE","\n            ",92],["T_OBJECT_OPERATOR","->",93],["T_STRING","addExpressionFieldToSelect",93],"(",["T_CONSTANT_ENCAPSED_STRING","'billing_lastname'",93],",",["T_WHITESPACE"," ",93],["T_CONSTANT_ENCAPSED_STRING","\"{{billing_lastname}}\"",93],",",["T_WHITESPACE","\n                ",93],["T_ARRAY","array",94],"(",["T_CONSTANT_ENCAPSED_STRING","'billing_lastname'",94],["T_WHITESPACE"," ",94],["T_DOUBLE_ARROW","=>",94],["T_WHITESPACE"," ",94],["T_VARIABLE","$billingLastnameField",94],")",")",["T_WHITESPACE","\n            ",94],["T_OBJECT_OPERATOR","->",95],["T_STRING","addExpressionFieldToSelect",95],"(",["T_CONSTANT_ENCAPSED_STRING","'shipping_firstname'",95],",",["T_WHITESPACE"," ",95],["T_CONSTANT_ENCAPSED_STRING","\"{{shipping_firstname}}\"",95],",",["T_WHITESPACE","\n                ",95],["T_ARRAY","array",96],"(",["T_CONSTANT_ENCAPSED_STRING","'shipping_firstname'",96],["T_WHITESPACE"," ",96],["T_DOUBLE_ARROW","=>",96],["T_WHITESPACE"," ",96],["T_VARIABLE","$shippingFirstnameField",96],")",")",["T_WHITESPACE","\n            ",96],["T_OBJECT_OPERATOR","->",97],["T_STRING","addExpressionFieldToSelect",97],"(",["T_CONSTANT_ENCAPSED_STRING","'shipping_lastname'",97],",",["T_WHITESPACE"," ",97],["T_CONSTANT_ENCAPSED_STRING","\"{{shipping_lastname}}\"",97],",",["T_WHITESPACE","\n                ",97],["T_ARRAY","array",98],"(",["T_CONSTANT_ENCAPSED_STRING","'shipping_lastname'",98],["T_WHITESPACE"," ",98],["T_DOUBLE_ARROW","=>",98],["T_WHITESPACE"," ",98],["T_VARIABLE","$shippingLastnameField",98],")",")",["T_WHITESPACE","\n            ",98],["T_OBJECT_OPERATOR","->",99],["T_STRING","addExpressionFieldToSelect",99],"(",["T_CONSTANT_ENCAPSED_STRING","'billing_name'",99],",",["T_WHITESPACE"," ",99],["T_CONSTANT_ENCAPSED_STRING","\"CONCAT({{billing_firstname}}, ' ', {{billing_lastname}})\"",99],",",["T_WHITESPACE","\n                ",99],["T_ARRAY","array",100],"(",["T_CONSTANT_ENCAPSED_STRING","'billing_firstname'",100],["T_WHITESPACE"," ",100],["T_DOUBLE_ARROW","=>",100],["T_WHITESPACE"," ",100],["T_VARIABLE","$billingFirstnameField",100],",",["T_WHITESPACE"," ",100],["T_CONSTANT_ENCAPSED_STRING","'billing_lastname'",100],["T_WHITESPACE"," ",100],["T_DOUBLE_ARROW","=>",100],["T_WHITESPACE"," ",100],["T_VARIABLE","$billingLastnameField",100],")",")",["T_WHITESPACE","\n            ",100],["T_OBJECT_OPERATOR","->",101],["T_STRING","addExpressionFieldToSelect",101],"(",["T_CONSTANT_ENCAPSED_STRING","'shipping_name'",101],",",["T_WHITESPACE"," ",101],["T_CONSTANT_ENCAPSED_STRING","'CONCAT({{shipping_firstname}}, \" \", {{shipping_lastname}})'",101],",",["T_WHITESPACE","\n                ",101],["T_ARRAY","array",102],"(",["T_CONSTANT_ENCAPSED_STRING","'shipping_firstname'",102],["T_WHITESPACE"," ",102],["T_DOUBLE_ARROW","=>",102],["T_WHITESPACE"," ",102],["T_VARIABLE","$shippingFirstnameField",102],",",["T_WHITESPACE"," ",102],["T_CONSTANT_ENCAPSED_STRING","'shipping_lastname'",102],["T_WHITESPACE"," ",102],["T_DOUBLE_ARROW","=>",102],["T_WHITESPACE"," ",102],["T_VARIABLE","$shippingLastnameField",102],")",["T_WHITESPACE","\n        ",102],")",";",["T_WHITESPACE","\n\n        ",103],["T_DOC_COMMENT","\/** @var $apiHelper Mage_Api_Helper_Data *\/",105],["T_WHITESPACE","\n        ",105],["T_VARIABLE","$apiHelper",106],["T_WHITESPACE"," ",106],"=",["T_WHITESPACE"," ",106],["T_STRING","Mage",106],["T_DOUBLE_COLON","::",106],["T_STRING","helper",106],"(",["T_CONSTANT_ENCAPSED_STRING","'api'",106],")",";",["T_WHITESPACE","\n        ",106],["T_VARIABLE","$filters",107],["T_WHITESPACE"," ",107],"=",["T_WHITESPACE"," ",107],["T_VARIABLE","$apiHelper",107],["T_OBJECT_OPERATOR","->",107],["T_STRING","parseFilters",107],"(",["T_VARIABLE","$filters",107],",",["T_WHITESPACE"," ",107],["T_VARIABLE","$this",107],["T_OBJECT_OPERATOR","->",107],["T_STRING","_attributesMap",107],"[",["T_CONSTANT_ENCAPSED_STRING","'order'",107],"]",")",";",["T_WHITESPACE","\n        ",107],["T_TRY","try",108],["T_WHITESPACE"," ",108],"{",["T_WHITESPACE","\n            ",108],["T_FOREACH","foreach",109],["T_WHITESPACE"," ",109],"(",["T_VARIABLE","$filters",109],["T_WHITESPACE"," ",109],["T_AS","as",109],["T_WHITESPACE"," ",109],["T_VARIABLE","$field",109],["T_WHITESPACE"," ",109],["T_DOUBLE_ARROW","=>",109],["T_WHITESPACE"," ",109],["T_VARIABLE","$value",109],")",["T_WHITESPACE"," ",109],"{",["T_WHITESPACE","\n                ",109],["T_VARIABLE","$orderCollection",110],["T_OBJECT_OPERATOR","->",110],["T_STRING","addFieldToFilter",110],"(",["T_VARIABLE","$field",110],",",["T_WHITESPACE"," ",110],["T_VARIABLE","$value",110],")",";",["T_WHITESPACE","\n            ",110],"}",["T_WHITESPACE","\n        ",111],"}",["T_WHITESPACE"," ",112],["T_CATCH","catch",112],["T_WHITESPACE"," ",112],"(",["T_STRING","Mage_Core_Exception",112],["T_WHITESPACE"," ",112],["T_VARIABLE","$e",112],")",["T_WHITESPACE"," ",112],"{",["T_WHITESPACE","\n            ",112],["T_VARIABLE","$this",113],["T_OBJECT_OPERATOR","->",113],["T_STRING","_fault",113],"(",["T_CONSTANT_ENCAPSED_STRING","'filters_invalid'",113],",",["T_WHITESPACE"," ",113],["T_VARIABLE","$e",113],["T_OBJECT_OPERATOR","->",113],["T_STRING","getMessage",113],"(",")",")",";",["T_WHITESPACE","\n        ",113],"}",["T_WHITESPACE","\n        ",114],["T_FOREACH","foreach",115],["T_WHITESPACE"," ",115],"(",["T_VARIABLE","$orderCollection",115],["T_WHITESPACE"," ",115],["T_AS","as",115],["T_WHITESPACE"," ",115],["T_VARIABLE","$order",115],")",["T_WHITESPACE"," ",115],"{",["T_WHITESPACE","\n            ",115],["T_VARIABLE","$orders",116],"[","]",["T_WHITESPACE"," ",116],"=",["T_WHITESPACE"," ",116],["T_VARIABLE","$this",116],["T_OBJECT_OPERATOR","->",116],["T_STRING","_getAttributes",116],"(",["T_VARIABLE","$order",116],",",["T_WHITESPACE"," ",116],["T_CONSTANT_ENCAPSED_STRING","'order'",116],")",";",["T_WHITESPACE","\n        ",116],"}",["T_WHITESPACE","\n        ",117],["T_RETURN","return",118],["T_WHITESPACE"," ",118],["T_VARIABLE","$orders",118],";",["T_WHITESPACE","\n    ",118],"}",["T_WHITESPACE","\n\n    ",119],["T_DOC_COMMENT","\/**\n     * Retrieve full order information\n     *\n     * @param string $orderIncrementId\n     * @return array\n     *\/",121],["T_WHITESPACE","\n    ",126],["T_PUBLIC","public",127],["T_WHITESPACE"," ",127],["T_FUNCTION","function",127],["T_WHITESPACE"," ",127],["T_STRING","info",127],"(",["T_VARIABLE","$orderIncrementId",127],")",["T_WHITESPACE","\n    ",127],"{",["T_WHITESPACE","\n        ",128],["T_VARIABLE","$order",129],["T_WHITESPACE"," ",129],"=",["T_WHITESPACE"," ",129],["T_VARIABLE","$this",129],["T_OBJECT_OPERATOR","->",129],["T_STRING","_initOrder",129],"(",["T_VARIABLE","$orderIncrementId",129],")",";",["T_WHITESPACE","\n\n        ",129],["T_IF","if",131],["T_WHITESPACE"," ",131],"(",["T_VARIABLE","$order",131],["T_OBJECT_OPERATOR","->",131],["T_STRING","getGiftMessageId",131],"(",")",["T_WHITESPACE"," ",131],">",["T_WHITESPACE"," ",131],["T_LNUMBER","0",131],")",["T_WHITESPACE"," ",131],"{",["T_WHITESPACE","\n            ",131],["T_VARIABLE","$order",132],["T_OBJECT_OPERATOR","->",132],["T_STRING","setGiftMessage",132],"(",["T_WHITESPACE","\n                ",132],["T_STRING","Mage",133],["T_DOUBLE_COLON","::",133],["T_STRING","getSingleton",133],"(",["T_CONSTANT_ENCAPSED_STRING","'giftmessage\/message'",133],")",["T_OBJECT_OPERATOR","->",133],["T_STRING","load",133],"(",["T_VARIABLE","$order",133],["T_OBJECT_OPERATOR","->",133],["T_STRING","getGiftMessageId",133],"(",")",")",["T_OBJECT_OPERATOR","->",133],["T_STRING","getMessage",133],"(",")",["T_WHITESPACE","\n            ",133],")",";",["T_WHITESPACE","\n        ",134],"}",["T_WHITESPACE","\n\n        ",135],["T_VARIABLE","$result",137],["T_WHITESPACE"," ",137],"=",["T_WHITESPACE"," ",137],["T_VARIABLE","$this",137],["T_OBJECT_OPERATOR","->",137],["T_STRING","_getAttributes",137],"(",["T_VARIABLE","$order",137],",",["T_WHITESPACE"," ",137],["T_CONSTANT_ENCAPSED_STRING","'order'",137],")",";",["T_WHITESPACE","\n\n        ",137],["T_VARIABLE","$result",139],"[",["T_CONSTANT_ENCAPSED_STRING","'shipping_address'",139],"]",["T_WHITESPACE"," ",139],"=",["T_WHITESPACE"," ",139],["T_VARIABLE","$this",139],["T_OBJECT_OPERATOR","->",139],["T_STRING","_getAttributes",139],"(",["T_VARIABLE","$order",139],["T_OBJECT_OPERATOR","->",139],["T_STRING","getShippingAddress",139],"(",")",",",["T_WHITESPACE"," ",139],["T_CONSTANT_ENCAPSED_STRING","'order_address'",139],")",";",["T_WHITESPACE","\n        ",139],["T_VARIABLE","$result",140],"[",["T_CONSTANT_ENCAPSED_STRING","'billing_address'",140],"]",["T_WHITESPACE","  ",140],"=",["T_WHITESPACE"," ",140],["T_VARIABLE","$this",140],["T_OBJECT_OPERATOR","->",140],["T_STRING","_getAttributes",140],"(",["T_VARIABLE","$order",140],["T_OBJECT_OPERATOR","->",140],["T_STRING","getBillingAddress",140],"(",")",",",["T_WHITESPACE"," ",140],["T_CONSTANT_ENCAPSED_STRING","'order_address'",140],")",";",["T_WHITESPACE","\n        ",140],["T_VARIABLE","$result",141],"[",["T_CONSTANT_ENCAPSED_STRING","'items'",141],"]",["T_WHITESPACE"," ",141],"=",["T_WHITESPACE"," ",141],["T_ARRAY","array",141],"(",")",";",["T_WHITESPACE","\n\n        ",141],["T_FOREACH","foreach",143],["T_WHITESPACE"," ",143],"(",["T_VARIABLE","$order",143],["T_OBJECT_OPERATOR","->",143],["T_STRING","getAllItems",143],"(",")",["T_WHITESPACE"," ",143],["T_AS","as",143],["T_WHITESPACE"," ",143],["T_VARIABLE","$item",143],")",["T_WHITESPACE"," ",143],"{",["T_WHITESPACE","\n            ",143],["T_IF","if",144],["T_WHITESPACE"," ",144],"(",["T_VARIABLE","$item",144],["T_OBJECT_OPERATOR","->",144],["T_STRING","getGiftMessageId",144],"(",")",["T_WHITESPACE"," ",144],">",["T_WHITESPACE"," ",144],["T_LNUMBER","0",144],")",["T_WHITESPACE"," ",144],"{",["T_WHITESPACE","\n                ",144],["T_VARIABLE","$item",145],["T_OBJECT_OPERATOR","->",145],["T_STRING","setGiftMessage",145],"(",["T_WHITESPACE","\n                    ",145],["T_STRING","Mage",146],["T_DOUBLE_COLON","::",146],["T_STRING","getSingleton",146],"(",["T_CONSTANT_ENCAPSED_STRING","'giftmessage\/message'",146],")",["T_OBJECT_OPERATOR","->",146],["T_STRING","load",146],"(",["T_VARIABLE","$item",146],["T_OBJECT_OPERATOR","->",146],["T_STRING","getGiftMessageId",146],"(",")",")",["T_OBJECT_OPERATOR","->",146],["T_STRING","getMessage",146],"(",")",["T_WHITESPACE","\n                ",146],")",";",["T_WHITESPACE","\n            ",147],"}",["T_WHITESPACE","\n\n            ",148],["T_VARIABLE","$result",150],"[",["T_CONSTANT_ENCAPSED_STRING","'items'",150],"]","[","]",["T_WHITESPACE"," ",150],"=",["T_WHITESPACE"," ",150],["T_VARIABLE","$this",150],["T_OBJECT_OPERATOR","->",150],["T_STRING","_getAttributes",150],"(",["T_VARIABLE","$item",150],",",["T_WHITESPACE"," ",150],["T_CONSTANT_ENCAPSED_STRING","'order_item'",150],")",";",["T_WHITESPACE","\n        ",150],"}",["T_WHITESPACE","\n\n        ",151],["T_VARIABLE","$result",153],"[",["T_CONSTANT_ENCAPSED_STRING","'payment'",153],"]",["T_WHITESPACE"," ",153],"=",["T_WHITESPACE"," ",153],["T_VARIABLE","$this",153],["T_OBJECT_OPERATOR","->",153],["T_STRING","_getAttributes",153],"(",["T_VARIABLE","$order",153],["T_OBJECT_OPERATOR","->",153],["T_STRING","getPayment",153],"(",")",",",["T_WHITESPACE"," ",153],["T_CONSTANT_ENCAPSED_STRING","'order_payment'",153],")",";",["T_WHITESPACE","\n\n        ",153],["T_VARIABLE","$result",155],"[",["T_CONSTANT_ENCAPSED_STRING","'status_history'",155],"]",["T_WHITESPACE"," ",155],"=",["T_WHITESPACE"," ",155],["T_ARRAY","array",155],"(",")",";",["T_WHITESPACE","\n\n        ",155],["T_FOREACH","foreach",157],["T_WHITESPACE"," ",157],"(",["T_VARIABLE","$order",157],["T_OBJECT_OPERATOR","->",157],["T_STRING","getAllStatusHistory",157],"(",")",["T_WHITESPACE"," ",157],["T_AS","as",157],["T_WHITESPACE"," ",157],["T_VARIABLE","$history",157],")",["T_WHITESPACE"," ",157],"{",["T_WHITESPACE","\n            ",157],["T_VARIABLE","$result",158],"[",["T_CONSTANT_ENCAPSED_STRING","'status_history'",158],"]","[","]",["T_WHITESPACE"," ",158],"=",["T_WHITESPACE"," ",158],["T_VARIABLE","$this",158],["T_OBJECT_OPERATOR","->",158],["T_STRING","_getAttributes",158],"(",["T_VARIABLE","$history",158],",",["T_WHITESPACE"," ",158],["T_CONSTANT_ENCAPSED_STRING","'order_status_history'",158],")",";",["T_WHITESPACE","\n        ",158],"}",["T_WHITESPACE","\n\n        ",159],["T_RETURN","return",161],["T_WHITESPACE"," ",161],["T_VARIABLE","$result",161],";",["T_WHITESPACE","\n    ",161],"}",["T_WHITESPACE","\n\n    ",162],["T_DOC_COMMENT","\/**\n     * Add comment to order\n     *\n     * @param string $orderIncrementId\n     * @param string $status\n     * @param string $comment\n     * @param boolean $notify\n     * @return boolean\n     *\/",164],["T_WHITESPACE","\n    ",172],["T_PUBLIC","public",173],["T_WHITESPACE"," ",173],["T_FUNCTION","function",173],["T_WHITESPACE"," ",173],["T_STRING","addComment",173],"(",["T_VARIABLE","$orderIncrementId",173],",",["T_WHITESPACE"," ",173],["T_VARIABLE","$status",173],",",["T_WHITESPACE"," ",173],["T_VARIABLE","$comment",173],["T_WHITESPACE"," ",173],"=",["T_WHITESPACE"," ",173],["T_CONSTANT_ENCAPSED_STRING","''",173],",",["T_WHITESPACE"," ",173],["T_VARIABLE","$notify",173],["T_WHITESPACE"," ",173],"=",["T_WHITESPACE"," ",173],["T_STRING","false",173],")",["T_WHITESPACE","\n    ",173],"{",["T_WHITESPACE","\n        ",174],["T_VARIABLE","$order",175],["T_WHITESPACE"," ",175],"=",["T_WHITESPACE"," ",175],["T_VARIABLE","$this",175],["T_OBJECT_OPERATOR","->",175],["T_STRING","_initOrder",175],"(",["T_VARIABLE","$orderIncrementId",175],")",";",["T_WHITESPACE","\n\n        ",175],["T_VARIABLE","$historyItem",177],["T_WHITESPACE"," ",177],"=",["T_WHITESPACE"," ",177],["T_VARIABLE","$order",177],["T_OBJECT_OPERATOR","->",177],["T_STRING","addStatusHistoryComment",177],"(",["T_VARIABLE","$comment",177],",",["T_WHITESPACE"," ",177],["T_VARIABLE","$status",177],")",";",["T_WHITESPACE","\n        ",177],["T_VARIABLE","$historyItem",178],["T_OBJECT_OPERATOR","->",178],["T_STRING","setIsCustomerNotified",178],"(",["T_VARIABLE","$notify",178],")",["T_OBJECT_OPERATOR","->",178],["T_STRING","save",178],"(",")",";",["T_WHITESPACE","\n\n\n        ",178],["T_TRY","try",181],["T_WHITESPACE"," ",181],"{",["T_WHITESPACE","\n            ",181],["T_IF","if",182],["T_WHITESPACE"," ",182],"(",["T_VARIABLE","$notify",182],["T_WHITESPACE"," ",182],["T_BOOLEAN_AND","&&",182],["T_WHITESPACE"," ",182],["T_VARIABLE","$comment",182],")",["T_WHITESPACE"," ",182],"{",["T_WHITESPACE","\n                ",182],["T_VARIABLE","$oldStore",183],["T_WHITESPACE"," ",183],"=",["T_WHITESPACE"," ",183],["T_STRING","Mage",183],["T_DOUBLE_COLON","::",183],["T_STRING","getDesign",183],"(",")",["T_OBJECT_OPERATOR","->",183],["T_STRING","getStore",183],"(",")",";",["T_WHITESPACE","\n                ",183],["T_VARIABLE","$oldArea",184],["T_WHITESPACE"," ",184],"=",["T_WHITESPACE"," ",184],["T_STRING","Mage",184],["T_DOUBLE_COLON","::",184],["T_STRING","getDesign",184],"(",")",["T_OBJECT_OPERATOR","->",184],["T_STRING","getArea",184],"(",")",";",["T_WHITESPACE","\n                ",184],["T_STRING","Mage",185],["T_DOUBLE_COLON","::",185],["T_STRING","getDesign",185],"(",")",["T_OBJECT_OPERATOR","->",185],["T_STRING","setStore",185],"(",["T_VARIABLE","$order",185],["T_OBJECT_OPERATOR","->",185],["T_STRING","getStoreId",185],"(",")",")",";",["T_WHITESPACE","\n                ",185],["T_STRING","Mage",186],["T_DOUBLE_COLON","::",186],["T_STRING","getDesign",186],"(",")",["T_OBJECT_OPERATOR","->",186],["T_STRING","setArea",186],"(",["T_CONSTANT_ENCAPSED_STRING","'frontend'",186],")",";",["T_WHITESPACE","\n            ",186],"}",["T_WHITESPACE","\n\n            ",187],["T_VARIABLE","$order",189],["T_OBJECT_OPERATOR","->",189],["T_STRING","save",189],"(",")",";",["T_WHITESPACE","\n            ",189],["T_VARIABLE","$order",190],["T_OBJECT_OPERATOR","->",190],["T_STRING","sendOrderUpdateEmail",190],"(",["T_VARIABLE","$notify",190],",",["T_WHITESPACE"," ",190],["T_VARIABLE","$comment",190],")",";",["T_WHITESPACE","\n            ",190],["T_IF","if",191],["T_WHITESPACE"," ",191],"(",["T_VARIABLE","$notify",191],["T_WHITESPACE"," ",191],["T_BOOLEAN_AND","&&",191],["T_WHITESPACE"," ",191],["T_VARIABLE","$comment",191],")",["T_WHITESPACE"," ",191],"{",["T_WHITESPACE","\n                ",191],["T_STRING","Mage",192],["T_DOUBLE_COLON","::",192],["T_STRING","getDesign",192],"(",")",["T_OBJECT_OPERATOR","->",192],["T_STRING","setStore",192],"(",["T_VARIABLE","$oldStore",192],")",";",["T_WHITESPACE","\n                ",192],["T_STRING","Mage",193],["T_DOUBLE_COLON","::",193],["T_STRING","getDesign",193],"(",")",["T_OBJECT_OPERATOR","->",193],["T_STRING","setArea",193],"(",["T_VARIABLE","$oldArea",193],")",";",["T_WHITESPACE","\n            ",193],"}",["T_WHITESPACE","\n\n        ",194],"}",["T_WHITESPACE"," ",196],["T_CATCH","catch",196],["T_WHITESPACE"," ",196],"(",["T_STRING","Mage_Core_Exception",196],["T_WHITESPACE"," ",196],["T_VARIABLE","$e",196],")",["T_WHITESPACE"," ",196],"{",["T_WHITESPACE","\n            ",196],["T_VARIABLE","$this",197],["T_OBJECT_OPERATOR","->",197],["T_STRING","_fault",197],"(",["T_CONSTANT_ENCAPSED_STRING","'status_not_changed'",197],",",["T_WHITESPACE"," ",197],["T_VARIABLE","$e",197],["T_OBJECT_OPERATOR","->",197],["T_STRING","getMessage",197],"(",")",")",";",["T_WHITESPACE","\n        ",197],"}",["T_WHITESPACE","\n\n        ",198],["T_RETURN","return",200],["T_WHITESPACE"," ",200],["T_STRING","true",200],";",["T_WHITESPACE","\n    ",200],"}",["T_WHITESPACE","\n\n    ",201],["T_DOC_COMMENT","\/**\n     * Hold order\n     *\n     * @param string $orderIncrementId\n     * @return boolean\n     *\/",203],["T_WHITESPACE","\n    ",208],["T_PUBLIC","public",209],["T_WHITESPACE"," ",209],["T_FUNCTION","function",209],["T_WHITESPACE"," ",209],["T_STRING","hold",209],"(",["T_VARIABLE","$orderIncrementId",209],")",["T_WHITESPACE","\n    ",209],"{",["T_WHITESPACE","\n        ",210],["T_VARIABLE","$order",211],["T_WHITESPACE"," ",211],"=",["T_WHITESPACE"," ",211],["T_VARIABLE","$this",211],["T_OBJECT_OPERATOR","->",211],["T_STRING","_initOrder",211],"(",["T_VARIABLE","$orderIncrementId",211],")",";",["T_WHITESPACE","\n\n        ",211],["T_TRY","try",213],["T_WHITESPACE"," ",213],"{",["T_WHITESPACE","\n            ",213],["T_VARIABLE","$order",214],["T_OBJECT_OPERATOR","->",214],["T_STRING","hold",214],"(",")",";",["T_WHITESPACE","\n            ",214],["T_VARIABLE","$order",215],["T_OBJECT_OPERATOR","->",215],["T_STRING","save",215],"(",")",";",["T_WHITESPACE","\n        ",215],"}",["T_WHITESPACE"," ",216],["T_CATCH","catch",216],["T_WHITESPACE"," ",216],"(",["T_STRING","Mage_Core_Exception",216],["T_WHITESPACE"," ",216],["T_VARIABLE","$e",216],")",["T_WHITESPACE"," ",216],"{",["T_WHITESPACE","\n            ",216],["T_VARIABLE","$this",217],["T_OBJECT_OPERATOR","->",217],["T_STRING","_fault",217],"(",["T_CONSTANT_ENCAPSED_STRING","'status_not_changed'",217],",",["T_WHITESPACE"," ",217],["T_VARIABLE","$e",217],["T_OBJECT_OPERATOR","->",217],["T_STRING","getMessage",217],"(",")",")",";",["T_WHITESPACE","\n        ",217],"}",["T_WHITESPACE","\n\n        ",218],["T_RETURN","return",220],["T_WHITESPACE"," ",220],["T_STRING","true",220],";",["T_WHITESPACE","\n    ",220],"}",["T_WHITESPACE","\n\n    ",221],["T_DOC_COMMENT","\/**\n     * Unhold order\n     *\n     * @param string $orderIncrementId\n     * @return boolean\n     *\/",223],["T_WHITESPACE","\n    ",228],["T_PUBLIC","public",229],["T_WHITESPACE"," ",229],["T_FUNCTION","function",229],["T_WHITESPACE"," ",229],["T_STRING","unhold",229],"(",["T_VARIABLE","$orderIncrementId",229],")",["T_WHITESPACE","\n    ",229],"{",["T_WHITESPACE","\n        ",230],["T_VARIABLE","$order",231],["T_WHITESPACE"," ",231],"=",["T_WHITESPACE"," ",231],["T_VARIABLE","$this",231],["T_OBJECT_OPERATOR","->",231],["T_STRING","_initOrder",231],"(",["T_VARIABLE","$orderIncrementId",231],")",";",["T_WHITESPACE","\n\n        ",231],["T_TRY","try",233],["T_WHITESPACE"," ",233],"{",["T_WHITESPACE","\n            ",233],["T_VARIABLE","$order",234],["T_OBJECT_OPERATOR","->",234],["T_STRING","unhold",234],"(",")",";",["T_WHITESPACE","\n            ",234],["T_VARIABLE","$order",235],["T_OBJECT_OPERATOR","->",235],["T_STRING","save",235],"(",")",";",["T_WHITESPACE","\n        ",235],"}",["T_WHITESPACE"," ",236],["T_CATCH","catch",236],["T_WHITESPACE"," ",236],"(",["T_STRING","Mage_Core_Exception",236],["T_WHITESPACE"," ",236],["T_VARIABLE","$e",236],")",["T_WHITESPACE"," ",236],"{",["T_WHITESPACE","\n            ",236],["T_VARIABLE","$this",237],["T_OBJECT_OPERATOR","->",237],["T_STRING","_fault",237],"(",["T_CONSTANT_ENCAPSED_STRING","'status_not_changed'",237],",",["T_WHITESPACE"," ",237],["T_VARIABLE","$e",237],["T_OBJECT_OPERATOR","->",237],["T_STRING","getMessage",237],"(",")",")",";",["T_WHITESPACE","\n        ",237],"}",["T_WHITESPACE","\n\n        ",238],["T_RETURN","return",240],["T_WHITESPACE"," ",240],["T_STRING","true",240],";",["T_WHITESPACE","\n    ",240],"}",["T_WHITESPACE","\n\n    ",241],["T_DOC_COMMENT","\/**\n     * Cancel order\n     *\n     * @param string $orderIncrementId\n     * @return boolean\n     *\/",243],["T_WHITESPACE","\n    ",248],["T_PUBLIC","public",249],["T_WHITESPACE"," ",249],["T_FUNCTION","function",249],["T_WHITESPACE"," ",249],["T_STRING","cancel",249],"(",["T_VARIABLE","$orderIncrementId",249],")",["T_WHITESPACE","\n    ",249],"{",["T_WHITESPACE","\n        ",250],["T_VARIABLE","$order",251],["T_WHITESPACE"," ",251],"=",["T_WHITESPACE"," ",251],["T_VARIABLE","$this",251],["T_OBJECT_OPERATOR","->",251],["T_STRING","_initOrder",251],"(",["T_VARIABLE","$orderIncrementId",251],")",";",["T_WHITESPACE","\n\n        ",251],["T_IF","if",253],["T_WHITESPACE"," ",253],"(",["T_STRING","Mage_Sales_Model_Order",253],["T_DOUBLE_COLON","::",253],["T_STRING","STATE_CANCELED",253],["T_WHITESPACE"," ",253],["T_IS_EQUAL","==",253],["T_WHITESPACE"," ",253],["T_VARIABLE","$order",253],["T_OBJECT_OPERATOR","->",253],["T_STRING","getState",253],"(",")",")",["T_WHITESPACE"," ",253],"{",["T_WHITESPACE","\n            ",253],["T_VARIABLE","$this",254],["T_OBJECT_OPERATOR","->",254],["T_STRING","_fault",254],"(",["T_CONSTANT_ENCAPSED_STRING","'status_not_changed'",254],")",";",["T_WHITESPACE","\n        ",254],"}",["T_WHITESPACE","\n        ",255],["T_TRY","try",256],["T_WHITESPACE"," ",256],"{",["T_WHITESPACE","\n            ",256],["T_VARIABLE","$order",257],["T_OBJECT_OPERATOR","->",257],["T_STRING","cancel",257],"(",")",";",["T_WHITESPACE","\n            ",257],["T_VARIABLE","$order",258],["T_OBJECT_OPERATOR","->",258],["T_STRING","save",258],"(",")",";",["T_WHITESPACE","\n        ",258],"}",["T_WHITESPACE"," ",259],["T_CATCH","catch",259],["T_WHITESPACE"," ",259],"(",["T_STRING","Mage_Core_Exception",259],["T_WHITESPACE"," ",259],["T_VARIABLE","$e",259],")",["T_WHITESPACE"," ",259],"{",["T_WHITESPACE","\n            ",259],["T_VARIABLE","$this",260],["T_OBJECT_OPERATOR","->",260],["T_STRING","_fault",260],"(",["T_CONSTANT_ENCAPSED_STRING","'status_not_changed'",260],",",["T_WHITESPACE"," ",260],["T_VARIABLE","$e",260],["T_OBJECT_OPERATOR","->",260],["T_STRING","getMessage",260],"(",")",")",";",["T_WHITESPACE","\n        ",260],"}",["T_WHITESPACE","\n        ",261],["T_IF","if",262],["T_WHITESPACE"," ",262],"(",["T_STRING","Mage_Sales_Model_Order",262],["T_DOUBLE_COLON","::",262],["T_STRING","STATE_CANCELED",262],["T_WHITESPACE"," ",262],["T_IS_NOT_EQUAL","!=",262],["T_WHITESPACE"," ",262],["T_VARIABLE","$order",262],["T_OBJECT_OPERATOR","->",262],["T_STRING","getState",262],"(",")",")",["T_WHITESPACE"," ",262],"{",["T_WHITESPACE","\n            ",262],["T_VARIABLE","$this",263],["T_OBJECT_OPERATOR","->",263],["T_STRING","_fault",263],"(",["T_CONSTANT_ENCAPSED_STRING","'status_not_changed'",263],")",";",["T_WHITESPACE","\n        ",263],"}",["T_WHITESPACE","\n        ",264],["T_RETURN","return",265],["T_WHITESPACE"," ",265],["T_STRING","true",265],";",["T_WHITESPACE","\n    ",265],"}",["T_WHITESPACE","\n\n",266],"}",["T_WHITESPACE"," ",268],["T_COMMENT","\/\/ Class Mage_Sales_Model_Order_Api End\n",268]]
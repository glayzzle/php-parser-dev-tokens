[["T_OPEN_TAG","<?php\n",1],["T_DOC_COMMENT","\/**\n * Magento\n *\n * NOTICE OF LICENSE\n *\n * This source file is subject to the Open Software License (OSL 3.0)\n * that is bundled with this package in the file LICENSE.txt.\n * It is also available through the world-wide-web at this URL:\n * http:\/\/opensource.org\/licenses\/osl-3.0.php\n * If you did not receive a copy of the license and are unable to\n * obtain it through the world-wide-web, please send an email\n * to license@magento.com so we can send you a copy immediately.\n *\n * DISCLAIMER\n *\n * Do not edit or add to this file if you wish to upgrade Magento to newer\n * versions in the future. If you wish to customize Magento for your\n * needs please refer to http:\/\/www.magento.com for more information.\n *\n * @category    Mage\n * @package     Mage_Oauth\n * @copyright  Copyright (c) 2006-2016 X.commerce, Inc. and affiliates (http:\/\/www.magento.com)\n * @license    http:\/\/opensource.org\/licenses\/osl-3.0.php  Open Software License (OSL 3.0)\n *\/",2],["T_WHITESPACE","\n\n",25],["T_DOC_COMMENT","\/**\n * oAuth authorize controller\n *\n * @category    Mage\n * @package     Mage_Oauth\n * @author      Magento Core Team <core@magentocommerce.com>\n *\/",27],["T_WHITESPACE","\n",33],["T_CLASS","class",34],["T_WHITESPACE"," ",34],["T_STRING","Mage_Oauth_AuthorizeController",34],["T_WHITESPACE"," ",34],["T_EXTENDS","extends",34],["T_WHITESPACE"," ",34],["T_STRING","Mage_Core_Controller_Front_Action",34],["T_WHITESPACE","\n",34],"{",["T_WHITESPACE","\n    ",35],["T_DOC_COMMENT","\/**\n     * Session name\n     *\n     * @var string\n     *\/",36],["T_WHITESPACE","\n    ",40],["T_PROTECTED","protected",41],["T_WHITESPACE"," ",41],["T_VARIABLE","$_sessionName",41],["T_WHITESPACE"," ",41],"=",["T_WHITESPACE"," ",41],["T_CONSTANT_ENCAPSED_STRING","'customer\/session'",41],";",["T_WHITESPACE","\n\n    ",41],["T_DOC_COMMENT","\/**\n     * Init authorize page\n     *\n     * @param bool $simple      Is simple page?\n     * @return Mage_Oauth_AuthorizeController\n     *\/",43],["T_WHITESPACE","\n    ",48],["T_PROTECTED","protected",49],["T_WHITESPACE"," ",49],["T_FUNCTION","function",49],["T_WHITESPACE"," ",49],["T_STRING","_initForm",49],"(",["T_VARIABLE","$simple",49],["T_WHITESPACE"," ",49],"=",["T_WHITESPACE"," ",49],["T_STRING","false",49],")",["T_WHITESPACE","\n    ",49],"{",["T_WHITESPACE","\n        ",50],["T_DOC_COMMENT","\/** @var $server Mage_Oauth_Model_Server *\/",51],["T_WHITESPACE","\n        ",51],["T_VARIABLE","$server",52],["T_WHITESPACE"," ",52],"=",["T_WHITESPACE"," ",52],["T_STRING","Mage",52],["T_DOUBLE_COLON","::",52],["T_STRING","getModel",52],"(",["T_CONSTANT_ENCAPSED_STRING","'oauth\/server'",52],")",";",["T_WHITESPACE","\n        ",52],["T_DOC_COMMENT","\/** @var $session Mage_Customer_Model_Session *\/",53],["T_WHITESPACE","\n        ",53],["T_VARIABLE","$session",54],["T_WHITESPACE"," ",54],"=",["T_WHITESPACE"," ",54],["T_STRING","Mage",54],["T_DOUBLE_COLON","::",54],["T_STRING","getSingleton",54],"(",["T_VARIABLE","$this",54],["T_OBJECT_OPERATOR","->",54],["T_STRING","_sessionName",54],")",";",["T_WHITESPACE","\n\n        ",54],["T_VARIABLE","$isException",56],["T_WHITESPACE"," ",56],"=",["T_WHITESPACE"," ",56],["T_STRING","false",56],";",["T_WHITESPACE","\n        ",56],["T_TRY","try",57],["T_WHITESPACE"," ",57],"{",["T_WHITESPACE","\n            ",57],["T_VARIABLE","$server",58],["T_OBJECT_OPERATOR","->",58],["T_STRING","checkAuthorizeRequest",58],"(",")",";",["T_WHITESPACE","\n        ",58],"}",["T_WHITESPACE"," ",59],["T_CATCH","catch",59],["T_WHITESPACE"," ",59],"(",["T_STRING","Mage_Core_Exception",59],["T_WHITESPACE"," ",59],["T_VARIABLE","$e",59],")",["T_WHITESPACE"," ",59],"{",["T_WHITESPACE","\n            ",59],["T_VARIABLE","$session",60],["T_OBJECT_OPERATOR","->",60],["T_STRING","addError",60],"(",["T_VARIABLE","$e",60],["T_OBJECT_OPERATOR","->",60],["T_STRING","getMessage",60],"(",")",")",";",["T_WHITESPACE","\n        ",60],"}",["T_WHITESPACE"," ",61],["T_CATCH","catch",61],["T_WHITESPACE"," ",61],"(",["T_STRING","Mage_Oauth_Exception",61],["T_WHITESPACE"," ",61],["T_VARIABLE","$e",61],")",["T_WHITESPACE"," ",61],"{",["T_WHITESPACE","\n            ",61],["T_VARIABLE","$isException",62],["T_WHITESPACE"," ",62],"=",["T_WHITESPACE"," ",62],["T_STRING","true",62],";",["T_WHITESPACE","\n            ",62],["T_VARIABLE","$session",63],["T_OBJECT_OPERATOR","->",63],["T_STRING","addException",63],"(",["T_VARIABLE","$e",63],",",["T_WHITESPACE"," ",63],["T_VARIABLE","$this",63],["T_OBJECT_OPERATOR","->",63],["T_STRING","__",63],"(",["T_CONSTANT_ENCAPSED_STRING","'An error occurred. Your authorization request is invalid.'",63],")",")",";",["T_WHITESPACE","\n        ",63],"}",["T_WHITESPACE"," ",64],["T_CATCH","catch",64],["T_WHITESPACE"," ",64],"(",["T_STRING","Exception",64],["T_WHITESPACE"," ",64],["T_VARIABLE","$e",64],")",["T_WHITESPACE"," ",64],"{",["T_WHITESPACE","\n            ",64],["T_VARIABLE","$isException",65],["T_WHITESPACE"," ",65],"=",["T_WHITESPACE"," ",65],["T_STRING","true",65],";",["T_WHITESPACE","\n            ",65],["T_VARIABLE","$session",66],["T_OBJECT_OPERATOR","->",66],["T_STRING","addException",66],"(",["T_VARIABLE","$e",66],",",["T_WHITESPACE"," ",66],["T_VARIABLE","$this",66],["T_OBJECT_OPERATOR","->",66],["T_STRING","__",66],"(",["T_CONSTANT_ENCAPSED_STRING","'An error occurred.'",66],")",")",";",["T_WHITESPACE","\n        ",66],"}",["T_WHITESPACE","\n\n        ",67],["T_VARIABLE","$this",69],["T_OBJECT_OPERATOR","->",69],["T_STRING","loadLayout",69],"(",")",";",["T_WHITESPACE","\n        ",69],["T_VARIABLE","$layout",70],["T_WHITESPACE"," ",70],"=",["T_WHITESPACE"," ",70],["T_VARIABLE","$this",70],["T_OBJECT_OPERATOR","->",70],["T_STRING","getLayout",70],"(",")",";",["T_WHITESPACE","\n        ",70],["T_VARIABLE","$logged",71],["T_WHITESPACE"," ",71],"=",["T_WHITESPACE"," ",71],["T_VARIABLE","$session",71],["T_OBJECT_OPERATOR","->",71],["T_STRING","isLoggedIn",71],"(",")",";",["T_WHITESPACE","\n\n        ",71],["T_VARIABLE","$contentBlock",73],["T_WHITESPACE"," ",73],"=",["T_WHITESPACE"," ",73],["T_VARIABLE","$layout",73],["T_OBJECT_OPERATOR","->",73],["T_STRING","getBlock",73],"(",["T_CONSTANT_ENCAPSED_STRING","'content'",73],")",";",["T_WHITESPACE","\n        ",73],["T_IF","if",74],["T_WHITESPACE"," ",74],"(",["T_VARIABLE","$logged",74],")",["T_WHITESPACE"," ",74],"{",["T_WHITESPACE","\n            ",74],["T_VARIABLE","$contentBlock",75],["T_OBJECT_OPERATOR","->",75],["T_STRING","unsetChild",75],"(",["T_CONSTANT_ENCAPSED_STRING","'oauth.authorize.form'",75],")",";",["T_WHITESPACE","\n            ",75],["T_DOC_COMMENT","\/** @var $block Mage_Oauth_Block_Authorize_Button *\/",76],["T_WHITESPACE","\n            ",76],["T_VARIABLE","$block",77],["T_WHITESPACE"," ",77],"=",["T_WHITESPACE"," ",77],["T_VARIABLE","$contentBlock",77],["T_OBJECT_OPERATOR","->",77],["T_STRING","getChild",77],"(",["T_CONSTANT_ENCAPSED_STRING","'oauth.authorize.button'",77],")",";",["T_WHITESPACE","\n        ",77],"}",["T_WHITESPACE"," ",78],["T_ELSE","else",78],["T_WHITESPACE"," ",78],"{",["T_WHITESPACE","\n            ",78],["T_VARIABLE","$contentBlock",79],["T_OBJECT_OPERATOR","->",79],["T_STRING","unsetChild",79],"(",["T_CONSTANT_ENCAPSED_STRING","'oauth.authorize.button'",79],")",";",["T_WHITESPACE","\n            ",79],["T_DOC_COMMENT","\/** @var $block Mage_Oauth_Block_Authorize *\/",80],["T_WHITESPACE","\n            ",80],["T_VARIABLE","$block",81],["T_WHITESPACE"," ",81],"=",["T_WHITESPACE"," ",81],["T_VARIABLE","$contentBlock",81],["T_OBJECT_OPERATOR","->",81],["T_STRING","getChild",81],"(",["T_CONSTANT_ENCAPSED_STRING","'oauth.authorize.form'",81],")",";",["T_WHITESPACE","\n        ",81],"}",["T_WHITESPACE","\n\n        ",82],["T_DOC_COMMENT","\/** @var $helper Mage_Core_Helper_Url *\/",84],["T_WHITESPACE","\n        ",84],["T_VARIABLE","$helper",85],["T_WHITESPACE"," ",85],"=",["T_WHITESPACE"," ",85],["T_STRING","Mage",85],["T_DOUBLE_COLON","::",85],["T_STRING","helper",85],"(",["T_CONSTANT_ENCAPSED_STRING","'core\/url'",85],")",";",["T_WHITESPACE","\n        ",85],["T_VARIABLE","$session",86],["T_OBJECT_OPERATOR","->",86],["T_STRING","setAfterAuthUrl",86],"(",["T_STRING","Mage",86],["T_DOUBLE_COLON","::",86],["T_STRING","getUrl",86],"(",["T_CONSTANT_ENCAPSED_STRING","'customer\/account\/login'",86],",",["T_WHITESPACE"," ",86],["T_ARRAY","array",86],"(",["T_CONSTANT_ENCAPSED_STRING","'_nosid'",86],["T_WHITESPACE"," ",86],["T_DOUBLE_ARROW","=>",86],["T_WHITESPACE"," ",86],["T_STRING","true",86],")",")",")",["T_WHITESPACE","\n                ",86],["T_OBJECT_OPERATOR","->",87],["T_STRING","setBeforeAuthUrl",87],"(",["T_VARIABLE","$helper",87],["T_OBJECT_OPERATOR","->",87],["T_STRING","getCurrentUrl",87],"(",")",")",";",["T_WHITESPACE","\n\n        ",87],["T_VARIABLE","$block",89],["T_OBJECT_OPERATOR","->",89],["T_STRING","setIsSimple",89],"(",["T_VARIABLE","$simple",89],")",["T_WHITESPACE","\n            ",89],["T_OBJECT_OPERATOR","->",90],["T_STRING","setToken",90],"(",["T_VARIABLE","$this",90],["T_OBJECT_OPERATOR","->",90],["T_STRING","getRequest",90],"(",")",["T_OBJECT_OPERATOR","->",90],["T_STRING","getQuery",90],"(",["T_CONSTANT_ENCAPSED_STRING","'oauth_token'",90],")",")",["T_WHITESPACE","\n            ",90],["T_OBJECT_OPERATOR","->",91],["T_STRING","setHasException",91],"(",["T_VARIABLE","$isException",91],")",";",["T_WHITESPACE","\n        ",91],["T_RETURN","return",92],["T_WHITESPACE"," ",92],["T_VARIABLE","$this",92],";",["T_WHITESPACE","\n    ",92],"}",["T_WHITESPACE","\n\n    ",93],["T_DOC_COMMENT","\/**\n     * Init confirm page\n     *\n     * @param bool $simple      Is simple page?\n     * @return Mage_Oauth_AuthorizeController\n     *\/",95],["T_WHITESPACE","\n    ",100],["T_PROTECTED","protected",101],["T_WHITESPACE"," ",101],["T_FUNCTION","function",101],["T_WHITESPACE"," ",101],["T_STRING","_initConfirmPage",101],"(",["T_VARIABLE","$simple",101],["T_WHITESPACE"," ",101],"=",["T_WHITESPACE"," ",101],["T_STRING","false",101],")",["T_WHITESPACE","\n    ",101],"{",["T_WHITESPACE","\n        ",102],["T_DOC_COMMENT","\/** @var $helper Mage_Oauth_Helper_Data *\/",103],["T_WHITESPACE","\n        ",103],["T_VARIABLE","$helper",104],["T_WHITESPACE"," ",104],"=",["T_WHITESPACE"," ",104],["T_STRING","Mage",104],["T_DOUBLE_COLON","::",104],["T_STRING","helper",104],"(",["T_CONSTANT_ENCAPSED_STRING","'oauth'",104],")",";",["T_WHITESPACE","\n\n        ",104],["T_DOC_COMMENT","\/** @var $session Mage_Customer_Model_Session *\/",106],["T_WHITESPACE","\n        ",106],["T_VARIABLE","$session",107],["T_WHITESPACE"," ",107],"=",["T_WHITESPACE"," ",107],["T_STRING","Mage",107],["T_DOUBLE_COLON","::",107],["T_STRING","getSingleton",107],"(",["T_VARIABLE","$this",107],["T_OBJECT_OPERATOR","->",107],["T_STRING","_sessionName",107],")",";",["T_WHITESPACE","\n        ",107],["T_IF","if",108],["T_WHITESPACE"," ",108],"(","!",["T_VARIABLE","$session",108],["T_OBJECT_OPERATOR","->",108],["T_STRING","getCustomerId",108],"(",")",")",["T_WHITESPACE"," ",108],"{",["T_WHITESPACE","\n            ",108],["T_VARIABLE","$session",109],["T_OBJECT_OPERATOR","->",109],["T_STRING","addError",109],"(",["T_VARIABLE","$this",109],["T_OBJECT_OPERATOR","->",109],["T_STRING","__",109],"(",["T_CONSTANT_ENCAPSED_STRING","'Please login to proceed authorization.'",109],")",")",";",["T_WHITESPACE","\n            ",109],["T_VARIABLE","$url",110],["T_WHITESPACE"," ",110],"=",["T_WHITESPACE"," ",110],["T_VARIABLE","$helper",110],["T_OBJECT_OPERATOR","->",110],["T_STRING","getAuthorizeUrl",110],"(",["T_STRING","Mage_Oauth_Model_Token",110],["T_DOUBLE_COLON","::",110],["T_STRING","USER_TYPE_CUSTOMER",110],")",";",["T_WHITESPACE","\n            ",110],["T_VARIABLE","$this",111],["T_OBJECT_OPERATOR","->",111],["T_STRING","_redirectUrl",111],"(",["T_VARIABLE","$url",111],")",";",["T_WHITESPACE","\n            ",111],["T_RETURN","return",112],["T_WHITESPACE"," ",112],["T_VARIABLE","$this",112],";",["T_WHITESPACE","\n        ",112],"}",["T_WHITESPACE","\n\n        ",113],["T_VARIABLE","$this",115],["T_OBJECT_OPERATOR","->",115],["T_STRING","loadLayout",115],"(",")",";",["T_WHITESPACE","\n\n        ",115],["T_DOC_COMMENT","\/** @var $block Mage_Oauth_Block_Authorize *\/",117],["T_WHITESPACE","\n        ",117],["T_VARIABLE","$block",118],["T_WHITESPACE"," ",118],"=",["T_WHITESPACE"," ",118],["T_VARIABLE","$this",118],["T_OBJECT_OPERATOR","->",118],["T_STRING","getLayout",118],"(",")",["T_OBJECT_OPERATOR","->",118],["T_STRING","getBlock",118],"(",["T_CONSTANT_ENCAPSED_STRING","'oauth.authorize.confirm'",118],")",";",["T_WHITESPACE","\n        ",118],["T_VARIABLE","$block",119],["T_OBJECT_OPERATOR","->",119],["T_STRING","setIsSimple",119],"(",["T_VARIABLE","$simple",119],")",";",["T_WHITESPACE","\n\n        ",119],["T_TRY","try",121],["T_WHITESPACE"," ",121],"{",["T_WHITESPACE","\n            ",121],["T_DOC_COMMENT","\/** @var $server Mage_Oauth_Model_Server *\/",122],["T_WHITESPACE","\n            ",122],["T_VARIABLE","$server",123],["T_WHITESPACE"," ",123],"=",["T_WHITESPACE"," ",123],["T_STRING","Mage",123],["T_DOUBLE_COLON","::",123],["T_STRING","getModel",123],"(",["T_CONSTANT_ENCAPSED_STRING","'oauth\/server'",123],")",";",["T_WHITESPACE","\n\n            ",123],["T_DOC_COMMENT","\/** @var $token Mage_Oauth_Model_Token *\/",125],["T_WHITESPACE","\n            ",125],["T_VARIABLE","$token",126],["T_WHITESPACE"," ",126],"=",["T_WHITESPACE"," ",126],["T_VARIABLE","$server",126],["T_OBJECT_OPERATOR","->",126],["T_STRING","authorizeToken",126],"(",["T_VARIABLE","$session",126],["T_OBJECT_OPERATOR","->",126],["T_STRING","getCustomerId",126],"(",")",",",["T_WHITESPACE"," ",126],["T_STRING","Mage_Oauth_Model_Token",126],["T_DOUBLE_COLON","::",126],["T_STRING","USER_TYPE_CUSTOMER",126],")",";",["T_WHITESPACE","\n\n            ",126],["T_IF","if",128],["T_WHITESPACE"," ",128],"(","(",["T_VARIABLE","$callback",128],["T_WHITESPACE"," ",128],"=",["T_WHITESPACE"," ",128],["T_VARIABLE","$helper",128],["T_OBJECT_OPERATOR","->",128],["T_STRING","getFullCallbackUrl",128],"(",["T_VARIABLE","$token",128],")",")",")",["T_WHITESPACE"," ",128],"{",["T_WHITESPACE"," ",128],["T_COMMENT","\/\/false in case of OOB\n",128],["T_WHITESPACE","                ",129],["T_VARIABLE","$this",129],["T_OBJECT_OPERATOR","->",129],["T_STRING","_redirectUrl",129],"(",["T_VARIABLE","$callback",129],["T_WHITESPACE"," ",129],".",["T_WHITESPACE"," ",129],"(",["T_VARIABLE","$simple",129],["T_WHITESPACE"," ",129],"?",["T_WHITESPACE"," ",129],["T_CONSTANT_ENCAPSED_STRING","'&simple=1'",129],["T_WHITESPACE"," ",129],":",["T_WHITESPACE"," ",129],["T_CONSTANT_ENCAPSED_STRING","''",129],")",")",";",["T_WHITESPACE","\n                ",129],["T_RETURN","return",130],["T_WHITESPACE"," ",130],["T_VARIABLE","$this",130],";",["T_WHITESPACE","\n            ",130],"}",["T_WHITESPACE"," ",131],["T_ELSE","else",131],["T_WHITESPACE"," ",131],"{",["T_WHITESPACE","\n                ",131],["T_VARIABLE","$block",132],["T_OBJECT_OPERATOR","->",132],["T_STRING","setVerifier",132],"(",["T_VARIABLE","$token",132],["T_OBJECT_OPERATOR","->",132],["T_STRING","getVerifier",132],"(",")",")",";",["T_WHITESPACE","\n                ",132],["T_VARIABLE","$session",133],["T_OBJECT_OPERATOR","->",133],["T_STRING","addSuccess",133],"(",["T_VARIABLE","$this",133],["T_OBJECT_OPERATOR","->",133],["T_STRING","__",133],"(",["T_CONSTANT_ENCAPSED_STRING","'Authorization confirmed.'",133],")",")",";",["T_WHITESPACE","\n            ",133],"}",["T_WHITESPACE","\n        ",134],"}",["T_WHITESPACE"," ",135],["T_CATCH","catch",135],["T_WHITESPACE"," ",135],"(",["T_STRING","Mage_Core_Exception",135],["T_WHITESPACE"," ",135],["T_VARIABLE","$e",135],")",["T_WHITESPACE"," ",135],"{",["T_WHITESPACE","\n            ",135],["T_VARIABLE","$session",136],["T_OBJECT_OPERATOR","->",136],["T_STRING","addError",136],"(",["T_VARIABLE","$e",136],["T_OBJECT_OPERATOR","->",136],["T_STRING","getMessage",136],"(",")",")",";",["T_WHITESPACE","\n        ",136],"}",["T_WHITESPACE"," ",137],["T_CATCH","catch",137],["T_WHITESPACE"," ",137],"(",["T_STRING","Mage_Oauth_Exception",137],["T_WHITESPACE"," ",137],["T_VARIABLE","$e",137],")",["T_WHITESPACE"," ",137],"{",["T_WHITESPACE","\n            ",137],["T_VARIABLE","$session",138],["T_OBJECT_OPERATOR","->",138],["T_STRING","addException",138],"(",["T_VARIABLE","$e",138],",",["T_WHITESPACE"," ",138],["T_VARIABLE","$this",138],["T_OBJECT_OPERATOR","->",138],["T_STRING","__",138],"(",["T_CONSTANT_ENCAPSED_STRING","'An error occurred. Your authorization request is invalid.'",138],")",")",";",["T_WHITESPACE","\n        ",138],"}",["T_WHITESPACE"," ",139],["T_CATCH","catch",139],["T_WHITESPACE"," ",139],"(",["T_STRING","Exception",139],["T_WHITESPACE"," ",139],["T_VARIABLE","$e",139],")",["T_WHITESPACE"," ",139],"{",["T_WHITESPACE","\n            ",139],["T_VARIABLE","$session",140],["T_OBJECT_OPERATOR","->",140],["T_STRING","addException",140],"(",["T_VARIABLE","$e",140],",",["T_WHITESPACE"," ",140],["T_VARIABLE","$this",140],["T_OBJECT_OPERATOR","->",140],["T_STRING","__",140],"(",["T_CONSTANT_ENCAPSED_STRING","'An error occurred on confirm authorize.'",140],")",")",";",["T_WHITESPACE","\n        ",140],"}",["T_WHITESPACE","\n\n        ",141],["T_VARIABLE","$this",143],["T_OBJECT_OPERATOR","->",143],["T_STRING","_initLayoutMessages",143],"(",["T_VARIABLE","$this",143],["T_OBJECT_OPERATOR","->",143],["T_STRING","_sessionName",143],")",";",["T_WHITESPACE","\n        ",143],["T_VARIABLE","$this",144],["T_OBJECT_OPERATOR","->",144],["T_STRING","renderLayout",144],"(",")",";",["T_WHITESPACE","\n\n        ",144],["T_RETURN","return",146],["T_WHITESPACE"," ",146],["T_VARIABLE","$this",146],";",["T_WHITESPACE","\n    ",146],"}",["T_WHITESPACE","\n\n    ",147],["T_DOC_COMMENT","\/**\n     * Init reject page\n     *\n     * @param bool $simple      Is simple page?\n     * @return Mage_Oauth_AuthorizeController\n     *\/",149],["T_WHITESPACE","\n    ",154],["T_PROTECTED","protected",155],["T_WHITESPACE"," ",155],["T_FUNCTION","function",155],["T_WHITESPACE"," ",155],["T_STRING","_initRejectPage",155],"(",["T_VARIABLE","$simple",155],["T_WHITESPACE"," ",155],"=",["T_WHITESPACE"," ",155],["T_STRING","false",155],")",["T_WHITESPACE","\n    ",155],"{",["T_WHITESPACE","\n        ",156],["T_VARIABLE","$this",157],["T_OBJECT_OPERATOR","->",157],["T_STRING","loadLayout",157],"(",")",";",["T_WHITESPACE","\n\n        ",157],["T_DOC_COMMENT","\/** @var $session Mage_Customer_Model_Session *\/",159],["T_WHITESPACE","\n        ",159],["T_VARIABLE","$session",160],["T_WHITESPACE"," ",160],"=",["T_WHITESPACE"," ",160],["T_STRING","Mage",160],["T_DOUBLE_COLON","::",160],["T_STRING","getSingleton",160],"(",["T_VARIABLE","$this",160],["T_OBJECT_OPERATOR","->",160],["T_STRING","_sessionName",160],")",";",["T_WHITESPACE","\n        ",160],["T_TRY","try",161],["T_WHITESPACE"," ",161],"{",["T_WHITESPACE","\n            ",161],["T_DOC_COMMENT","\/** @var $server Mage_Oauth_Model_Server *\/",162],["T_WHITESPACE","\n            ",162],["T_VARIABLE","$server",163],["T_WHITESPACE"," ",163],"=",["T_WHITESPACE"," ",163],["T_STRING","Mage",163],["T_DOUBLE_COLON","::",163],["T_STRING","getModel",163],"(",["T_CONSTANT_ENCAPSED_STRING","'oauth\/server'",163],")",";",["T_WHITESPACE","\n\n            ",163],["T_DOC_COMMENT","\/** @var $block Mage_Oauth_Block_Authorize *\/",165],["T_WHITESPACE","\n            ",165],["T_VARIABLE","$block",166],["T_WHITESPACE"," ",166],"=",["T_WHITESPACE"," ",166],["T_VARIABLE","$this",166],["T_OBJECT_OPERATOR","->",166],["T_STRING","getLayout",166],"(",")",["T_OBJECT_OPERATOR","->",166],["T_STRING","getBlock",166],"(",["T_CONSTANT_ENCAPSED_STRING","'oauth.authorize.reject'",166],")",";",["T_WHITESPACE","\n            ",166],["T_VARIABLE","$block",167],["T_OBJECT_OPERATOR","->",167],["T_STRING","setIsSimple",167],"(",["T_VARIABLE","$simple",167],")",";",["T_WHITESPACE","\n\n            ",167],["T_DOC_COMMENT","\/** @var $token Mage_Oauth_Model_Token *\/",169],["T_WHITESPACE","\n            ",169],["T_VARIABLE","$token",170],["T_WHITESPACE"," ",170],"=",["T_WHITESPACE"," ",170],["T_VARIABLE","$server",170],["T_OBJECT_OPERATOR","->",170],["T_STRING","checkAuthorizeRequest",170],"(",")",";",["T_WHITESPACE","\n            ",170],["T_DOC_COMMENT","\/** @var $helper Mage_Oauth_Helper_Data *\/",171],["T_WHITESPACE","\n            ",171],["T_VARIABLE","$helper",172],["T_WHITESPACE"," ",172],"=",["T_WHITESPACE"," ",172],["T_STRING","Mage",172],["T_DOUBLE_COLON","::",172],["T_STRING","helper",172],"(",["T_CONSTANT_ENCAPSED_STRING","'oauth'",172],")",";",["T_WHITESPACE","\n\n            ",172],["T_IF","if",174],["T_WHITESPACE"," ",174],"(","(",["T_VARIABLE","$callback",174],["T_WHITESPACE"," ",174],"=",["T_WHITESPACE"," ",174],["T_VARIABLE","$helper",174],["T_OBJECT_OPERATOR","->",174],["T_STRING","getFullCallbackUrl",174],"(",["T_VARIABLE","$token",174],",",["T_WHITESPACE"," ",174],["T_STRING","true",174],")",")",")",["T_WHITESPACE"," ",174],"{",["T_WHITESPACE","\n                ",174],["T_VARIABLE","$this",175],["T_OBJECT_OPERATOR","->",175],["T_STRING","_redirectUrl",175],"(",["T_VARIABLE","$callback",175],["T_WHITESPACE"," ",175],".",["T_WHITESPACE"," ",175],"(",["T_VARIABLE","$simple",175],["T_WHITESPACE"," ",175],"?",["T_WHITESPACE"," ",175],["T_CONSTANT_ENCAPSED_STRING","'&simple=1'",175],["T_WHITESPACE"," ",175],":",["T_WHITESPACE"," ",175],["T_CONSTANT_ENCAPSED_STRING","''",175],")",")",";",["T_WHITESPACE","\n                ",175],["T_RETURN","return",176],["T_WHITESPACE"," ",176],["T_VARIABLE","$this",176],";",["T_WHITESPACE","\n            ",176],"}",["T_WHITESPACE"," ",177],["T_ELSE","else",177],["T_WHITESPACE"," ",177],"{",["T_WHITESPACE","\n                ",177],["T_VARIABLE","$session",178],["T_OBJECT_OPERATOR","->",178],["T_STRING","addNotice",178],"(",["T_VARIABLE","$this",178],["T_OBJECT_OPERATOR","->",178],["T_STRING","__",178],"(",["T_CONSTANT_ENCAPSED_STRING","'The application access request is rejected.'",178],")",")",";",["T_WHITESPACE","\n            ",178],"}",["T_WHITESPACE","\n        ",179],"}",["T_WHITESPACE"," ",180],["T_CATCH","catch",180],["T_WHITESPACE"," ",180],"(",["T_STRING","Mage_Core_Exception",180],["T_WHITESPACE"," ",180],["T_VARIABLE","$e",180],")",["T_WHITESPACE"," ",180],"{",["T_WHITESPACE","\n            ",180],["T_VARIABLE","$session",181],["T_OBJECT_OPERATOR","->",181],["T_STRING","addError",181],"(",["T_VARIABLE","$e",181],["T_OBJECT_OPERATOR","->",181],["T_STRING","getMessage",181],"(",")",")",";",["T_WHITESPACE","\n        ",181],"}",["T_WHITESPACE"," ",182],["T_CATCH","catch",182],["T_WHITESPACE"," ",182],"(",["T_STRING","Exception",182],["T_WHITESPACE"," ",182],["T_VARIABLE","$e",182],")",["T_WHITESPACE"," ",182],"{",["T_WHITESPACE","\n            ",182],["T_VARIABLE","$session",183],["T_OBJECT_OPERATOR","->",183],["T_STRING","addException",183],"(",["T_VARIABLE","$e",183],",",["T_WHITESPACE"," ",183],["T_VARIABLE","$this",183],["T_OBJECT_OPERATOR","->",183],["T_STRING","__",183],"(",["T_CONSTANT_ENCAPSED_STRING","'An error occurred on reject authorize.'",183],")",")",";",["T_WHITESPACE","\n        ",183],"}",["T_WHITESPACE","\n\n        ",184],["T_VARIABLE","$this",186],["T_OBJECT_OPERATOR","->",186],["T_STRING","_initLayoutMessages",186],"(",["T_VARIABLE","$this",186],["T_OBJECT_OPERATOR","->",186],["T_STRING","_sessionName",186],")",";",["T_WHITESPACE","\n        ",186],["T_VARIABLE","$this",187],["T_OBJECT_OPERATOR","->",187],["T_STRING","renderLayout",187],"(",")",";",["T_WHITESPACE","\n\n        ",187],["T_RETURN","return",189],["T_WHITESPACE"," ",189],["T_VARIABLE","$this",189],";",["T_WHITESPACE","\n    ",189],"}",["T_WHITESPACE","\n\n    ",190],["T_DOC_COMMENT","\/**\n     * Index action.\n     *\n     * @return void\n     *\/",192],["T_WHITESPACE","\n    ",196],["T_PUBLIC","public",197],["T_WHITESPACE"," ",197],["T_FUNCTION","function",197],["T_WHITESPACE"," ",197],["T_STRING","indexAction",197],"(",")",["T_WHITESPACE","\n    ",197],"{",["T_WHITESPACE","\n        ",198],["T_VARIABLE","$this",199],["T_OBJECT_OPERATOR","->",199],["T_STRING","_initForm",199],"(",")",";",["T_WHITESPACE","\n        ",199],["T_VARIABLE","$this",200],["T_OBJECT_OPERATOR","->",200],["T_STRING","_initLayoutMessages",200],"(",["T_VARIABLE","$this",200],["T_OBJECT_OPERATOR","->",200],["T_STRING","_sessionName",200],")",";",["T_WHITESPACE","\n        ",200],["T_VARIABLE","$this",201],["T_OBJECT_OPERATOR","->",201],["T_STRING","renderLayout",201],"(",")",";",["T_WHITESPACE","\n    ",201],"}",["T_WHITESPACE","\n\n    ",202],["T_DOC_COMMENT","\/**\n     * OAuth authorize or allow decline access simple page\n     *\n     * @return void\n     *\/",204],["T_WHITESPACE","\n    ",208],["T_PUBLIC","public",209],["T_WHITESPACE"," ",209],["T_FUNCTION","function",209],["T_WHITESPACE"," ",209],["T_STRING","simpleAction",209],"(",")",["T_WHITESPACE","\n    ",209],"{",["T_WHITESPACE","\n        ",210],["T_VARIABLE","$this",211],["T_OBJECT_OPERATOR","->",211],["T_STRING","_initForm",211],"(",["T_STRING","true",211],")",";",["T_WHITESPACE","\n        ",211],["T_VARIABLE","$this",212],["T_OBJECT_OPERATOR","->",212],["T_STRING","_initLayoutMessages",212],"(",["T_VARIABLE","$this",212],["T_OBJECT_OPERATOR","->",212],["T_STRING","_sessionName",212],")",";",["T_WHITESPACE","\n        ",212],["T_VARIABLE","$this",213],["T_OBJECT_OPERATOR","->",213],["T_STRING","renderLayout",213],"(",")",";",["T_WHITESPACE","\n    ",213],"}",["T_WHITESPACE","\n\n    ",214],["T_DOC_COMMENT","\/**\n     * Confirm token authorization action\n     *\/",216],["T_WHITESPACE","\n    ",218],["T_PUBLIC","public",219],["T_WHITESPACE"," ",219],["T_FUNCTION","function",219],["T_WHITESPACE"," ",219],["T_STRING","confirmAction",219],"(",")",["T_WHITESPACE","\n    ",219],"{",["T_WHITESPACE","\n        ",220],["T_VARIABLE","$this",221],["T_OBJECT_OPERATOR","->",221],["T_STRING","_initConfirmPage",221],"(",")",";",["T_WHITESPACE","\n    ",221],"}",["T_WHITESPACE","\n\n    ",222],["T_DOC_COMMENT","\/**\n     * Confirm token authorization simple page\n     *\/",224],["T_WHITESPACE","\n    ",226],["T_PUBLIC","public",227],["T_WHITESPACE"," ",227],["T_FUNCTION","function",227],["T_WHITESPACE"," ",227],["T_STRING","confirmSimpleAction",227],"(",")",["T_WHITESPACE","\n    ",227],"{",["T_WHITESPACE","\n        ",228],["T_VARIABLE","$this",229],["T_OBJECT_OPERATOR","->",229],["T_STRING","_initConfirmPage",229],"(",["T_STRING","true",229],")",";",["T_WHITESPACE","\n    ",229],"}",["T_WHITESPACE","\n\n    ",230],["T_DOC_COMMENT","\/**\n     * Reject token authorization action\n     *\/",232],["T_WHITESPACE","\n    ",234],["T_PUBLIC","public",235],["T_WHITESPACE"," ",235],["T_FUNCTION","function",235],["T_WHITESPACE"," ",235],["T_STRING","rejectAction",235],"(",")",["T_WHITESPACE","\n    ",235],"{",["T_WHITESPACE","\n        ",236],["T_VARIABLE","$this",237],["T_OBJECT_OPERATOR","->",237],["T_STRING","_initRejectPage",237],"(",")",";",["T_WHITESPACE","\n    ",237],"}",["T_WHITESPACE","\n\n    ",238],["T_DOC_COMMENT","\/**\n     * Reject token authorization simple page\n     *\/",240],["T_WHITESPACE","\n    ",242],["T_PUBLIC","public",243],["T_WHITESPACE"," ",243],["T_FUNCTION","function",243],["T_WHITESPACE"," ",243],["T_STRING","rejectSimpleAction",243],"(",")",["T_WHITESPACE","\n    ",243],"{",["T_WHITESPACE","\n        ",244],["T_VARIABLE","$this",245],["T_OBJECT_OPERATOR","->",245],["T_STRING","_initRejectPage",245],"(",["T_STRING","true",245],")",";",["T_WHITESPACE","\n    ",245],"}",["T_WHITESPACE","\n",246],"}",["T_WHITESPACE","\n",247]]
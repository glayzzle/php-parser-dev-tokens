[["T_OPEN_TAG","<?php\n",1],["T_DOC_COMMENT","\/**\n * Magento\n *\n * NOTICE OF LICENSE\n *\n * This source file is subject to the Open Software License (OSL 3.0)\n * that is bundled with this package in the file LICENSE.txt.\n * It is also available through the world-wide-web at this URL:\n * http:\/\/opensource.org\/licenses\/osl-3.0.php\n * If you did not receive a copy of the license and are unable to\n * obtain it through the world-wide-web, please send an email\n * to license@magento.com so we can send you a copy immediately.\n *\n * DISCLAIMER\n *\n * Do not edit or add to this file if you wish to upgrade Magento to newer\n * versions in the future. If you wish to customize Magento for your\n * needs please refer to http:\/\/www.magento.com for more information.\n *\n * @category    Mage\n * @package     Mage_Newsletter\n * @copyright  Copyright (c) 2006-2016 X.commerce, Inc. and affiliates (http:\/\/www.magento.com)\n * @license    http:\/\/opensource.org\/licenses\/osl-3.0.php  Open Software License (OSL 3.0)\n *\/",2],["T_WHITESPACE","\n\n\n",25],["T_DOC_COMMENT","\/**\n * Newsletter install\n *\n * @category   Mage\n * @package    Mage_Newsletter\n * @author      Magento Core Team <core@magentocommerce.com>\n *\/",28],["T_WHITESPACE","\n",34],["T_VARIABLE","$installer",35],["T_WHITESPACE"," ",35],"=",["T_WHITESPACE"," ",35],["T_VARIABLE","$this",35],";",["T_WHITESPACE","\n",35],["T_COMMENT","\/* @var $installer Mage_Core_Model_Resource_Setup *\/",36],["T_WHITESPACE","\n\n",36],["T_VARIABLE","$installer",38],["T_OBJECT_OPERATOR","->",38],["T_STRING","startSetup",38],"(",")",";",["T_WHITESPACE","\n",38],["T_VARIABLE","$installer",39],["T_OBJECT_OPERATOR","->",39],["T_STRING","run",39],"(","\"",["T_ENCAPSED_AND_WHITESPACE","\n-- DROP TABLE IF EXISTS `",39],["T_CURLY_OPEN","{",40],["T_VARIABLE","$installer",40],["T_OBJECT_OPERATOR","->",40],["T_STRING","getTable",40],"(",["T_CONSTANT_ENCAPSED_STRING","'newsletter_problem'",40],")","}",["T_ENCAPSED_AND_WHITESPACE","`;\nCREATE TABLE `",40],["T_CURLY_OPEN","{",41],["T_VARIABLE","$installer",41],["T_OBJECT_OPERATOR","->",41],["T_STRING","getTable",41],"(",["T_CONSTANT_ENCAPSED_STRING","'newsletter_problem'",41],")","}",["T_ENCAPSED_AND_WHITESPACE","` (\n  `problem_id` int(7) unsigned NOT NULL auto_increment,\n  `subscriber_id` int(7) unsigned default NULL,\n  `queue_id` int(7) unsigned NOT NULL default '0',\n  `problem_error_code` int(3) unsigned default '0',\n  `problem_error_text` varchar(200) default NULL,\n  PRIMARY KEY  (`problem_id`),\n  KEY `FK_PROBLEM_SUBSCRIBER` (`subscriber_id`),\n  KEY `FK_PROBLEM_QUEUE` (`queue_id`),\n  CONSTRAINT `FK_PROBLEM_QUEUE` FOREIGN KEY (`queue_id`) REFERENCES `",41],["T_CURLY_OPEN","{",50],["T_VARIABLE","$installer",50],["T_OBJECT_OPERATOR","->",50],["T_STRING","getTable",50],"(",["T_CONSTANT_ENCAPSED_STRING","'newsletter_queue'",50],")","}",["T_ENCAPSED_AND_WHITESPACE","` (`queue_id`),\n  CONSTRAINT `FK_PROBLEM_SUBSCRIBER` FOREIGN KEY (`subscriber_id`) REFERENCES `",50],["T_CURLY_OPEN","{",51],["T_VARIABLE","$installer",51],["T_OBJECT_OPERATOR","->",51],["T_STRING","getTable",51],"(",["T_CONSTANT_ENCAPSED_STRING","'newsletter_subscriber'",51],")","}",["T_ENCAPSED_AND_WHITESPACE","` (`subscriber_id`)\n) ENGINE=InnoDB DEFAULT CHARSET=utf8 COMMENT='Newsletter problems';\n\n-- DROP TABLE IF EXISTS `",51],["T_CURLY_OPEN","{",54],["T_VARIABLE","$installer",54],["T_OBJECT_OPERATOR","->",54],["T_STRING","getTable",54],"(",["T_CONSTANT_ENCAPSED_STRING","'newsletter_queue'",54],")","}",["T_ENCAPSED_AND_WHITESPACE","`;\nCREATE TABLE `",54],["T_CURLY_OPEN","{",55],["T_VARIABLE","$installer",55],["T_OBJECT_OPERATOR","->",55],["T_STRING","getTable",55],"(",["T_CONSTANT_ENCAPSED_STRING","'newsletter_queue'",55],")","}",["T_ENCAPSED_AND_WHITESPACE","` (\n  `queue_id` int(7) unsigned NOT NULL auto_increment,\n  `template_id` int(7) unsigned NOT NULL default '0',\n  `queue_status` int(3) unsigned NOT NULL default '0',\n  `queue_start_at` datetime default NULL,\n  `queue_finish_at` datetime default NULL,\n  PRIMARY KEY  (`queue_id`),\n  KEY `FK_QUEUE_TEMPLATE` (`template_id`),\n  CONSTRAINT `FK_QUEUE_TEMPLATE` FOREIGN KEY (`template_id`) REFERENCES `",55],["T_CURLY_OPEN","{",63],["T_VARIABLE","$installer",63],["T_OBJECT_OPERATOR","->",63],["T_STRING","getTable",63],"(",["T_CONSTANT_ENCAPSED_STRING","'newsletter_template'",63],")","}",["T_ENCAPSED_AND_WHITESPACE","` (`template_id`) ON DELETE CASCADE\n) ENGINE=InnoDB DEFAULT CHARSET=utf8 COMMENT='Newsletter queue';\n\n-- DROP TABLE IF EXISTS `",63],["T_CURLY_OPEN","{",66],["T_VARIABLE","$installer",66],["T_OBJECT_OPERATOR","->",66],["T_STRING","getTable",66],"(",["T_CONSTANT_ENCAPSED_STRING","'newsletter_queue_link'",66],")","}",["T_ENCAPSED_AND_WHITESPACE","`;\nCREATE TABLE `",66],["T_CURLY_OPEN","{",67],["T_VARIABLE","$installer",67],["T_OBJECT_OPERATOR","->",67],["T_STRING","getTable",67],"(",["T_CONSTANT_ENCAPSED_STRING","'newsletter_queue_link'",67],")","}",["T_ENCAPSED_AND_WHITESPACE","` (\n  `queue_link_id` int(9) unsigned NOT NULL auto_increment,\n  `queue_id` int(7) unsigned NOT NULL default '0',\n  `subscriber_id` int(7) unsigned NOT NULL default '0',\n  `letter_sent_at` datetime default NULL,\n  PRIMARY KEY  (`queue_link_id`),\n  KEY `FK_QUEUE_LINK_SUBSCRIBER` (`subscriber_id`),\n  KEY `FK_QUEUE_LINK_QUEUE` (`queue_id`),\n  CONSTRAINT `FK_QUEUE_LINK_QUEUE` FOREIGN KEY (`queue_id`) REFERENCES `",67],["T_CURLY_OPEN","{",75],["T_VARIABLE","$installer",75],["T_OBJECT_OPERATOR","->",75],["T_STRING","getTable",75],"(",["T_CONSTANT_ENCAPSED_STRING","'newsletter_queue'",75],")","}",["T_ENCAPSED_AND_WHITESPACE","` (`queue_id`) ON DELETE CASCADE,\n  CONSTRAINT `FK_QUEUE_LINK_SUBSCRIBER` FOREIGN KEY (`subscriber_id`) REFERENCES `",75],["T_CURLY_OPEN","{",76],["T_VARIABLE","$installer",76],["T_OBJECT_OPERATOR","->",76],["T_STRING","getTable",76],"(",["T_CONSTANT_ENCAPSED_STRING","'newsletter_subscriber'",76],")","}",["T_ENCAPSED_AND_WHITESPACE","` (`subscriber_id`) ON DELETE CASCADE\n) ENGINE=InnoDB DEFAULT CHARSET=utf8 COMMENT='Newsletter queue to subscriber link';\n\n-- DROP TABLE IF EXISTS `",76],["T_CURLY_OPEN","{",79],["T_VARIABLE","$installer",79],["T_OBJECT_OPERATOR","->",79],["T_STRING","getTable",79],"(",["T_CONSTANT_ENCAPSED_STRING","'newsletter_queue_store_link'",79],")","}",["T_ENCAPSED_AND_WHITESPACE","`;\nCREATE TABLE `",79],["T_CURLY_OPEN","{",80],["T_VARIABLE","$installer",80],["T_OBJECT_OPERATOR","->",80],["T_STRING","getTable",80],"(",["T_CONSTANT_ENCAPSED_STRING","'newsletter_queue_store_link'",80],")","}",["T_ENCAPSED_AND_WHITESPACE","` (\n  `queue_id` int(7) unsigned NOT NULL default '0',\n  `store_id` smallint(5) unsigned NOT NULL default '0',\n  PRIMARY KEY  (`queue_id`,`store_id`),\n  KEY `FK_NEWSLETTER_QUEUE_STORE_LINK_STORE` (`store_id`),\n  CONSTRAINT `FK_NEWSLETTER_QUEUE_STORE_LINK_STORE` FOREIGN KEY (`store_id`) REFERENCES `",80],["T_CURLY_OPEN","{",85],["T_VARIABLE","$installer",85],["T_OBJECT_OPERATOR","->",85],["T_STRING","getTable",85],"(",["T_CONSTANT_ENCAPSED_STRING","'core_store'",85],")","}",["T_ENCAPSED_AND_WHITESPACE","` (`store_id`) ON DELETE CASCADE ON UPDATE CASCADE,\n  CONSTRAINT `FK_LINK_QUEUE` FOREIGN KEY (`queue_id`) REFERENCES `",85],["T_CURLY_OPEN","{",86],["T_VARIABLE","$installer",86],["T_OBJECT_OPERATOR","->",86],["T_STRING","getTable",86],"(",["T_CONSTANT_ENCAPSED_STRING","'newsletter_queue'",86],")","}",["T_ENCAPSED_AND_WHITESPACE","` (`queue_id`) ON DELETE CASCADE\n) ENGINE=InnoDB DEFAULT CHARSET=utf8;\n\n-- DROP TABLE IF EXISTS `",86],["T_CURLY_OPEN","{",89],["T_VARIABLE","$installer",89],["T_OBJECT_OPERATOR","->",89],["T_STRING","getTable",89],"(",["T_CONSTANT_ENCAPSED_STRING","'newsletter_subscriber'",89],")","}",["T_ENCAPSED_AND_WHITESPACE","`;\nCREATE TABLE `",89],["T_CURLY_OPEN","{",90],["T_VARIABLE","$installer",90],["T_OBJECT_OPERATOR","->",90],["T_STRING","getTable",90],"(",["T_CONSTANT_ENCAPSED_STRING","'newsletter_subscriber'",90],")","}",["T_ENCAPSED_AND_WHITESPACE","` (\n  `subscriber_id` int(7) unsigned NOT NULL auto_increment,\n  `store_id` smallint(5) unsigned default '0',\n  `change_status_at` datetime default NULL,\n  `customer_id` int(11) unsigned NOT NULL default '0',\n  `subscriber_email` varchar(150) character set latin1 collate latin1_general_ci NOT NULL default '',\n  `subscriber_status` int(3) NOT NULL default '0',\n  `subscriber_confirm_code` varchar(32) default 'NULL',\n  PRIMARY KEY  (`subscriber_id`),\n  KEY `FK_SUBSCRIBER_CUSTOMER` (`customer_id`),\n  KEY `FK_NEWSLETTER_SUBSCRIBER_STORE` (`store_id`),\n  CONSTRAINT `FK_NEWSLETTER_SUBSCRIBER_STORE` FOREIGN KEY (`store_id`) REFERENCES `",90],["T_CURLY_OPEN","{",101],["T_VARIABLE","$installer",101],["T_OBJECT_OPERATOR","->",101],["T_STRING","getTable",101],"(",["T_CONSTANT_ENCAPSED_STRING","'core_store'",101],")","}",["T_ENCAPSED_AND_WHITESPACE","` (`store_id`) ON DELETE SET NULL ON UPDATE CASCADE\n) ENGINE=InnoDB DEFAULT CHARSET=utf8 COMMENT='Newsletter subscribers';\n\n-- DROP TABLE IF EXISTS `",101],["T_CURLY_OPEN","{",104],["T_VARIABLE","$installer",104],["T_OBJECT_OPERATOR","->",104],["T_STRING","getTable",104],"(",["T_CONSTANT_ENCAPSED_STRING","'newsletter_template'",104],")","}",["T_ENCAPSED_AND_WHITESPACE","`;\nCREATE TABLE `",104],["T_CURLY_OPEN","{",105],["T_VARIABLE","$installer",105],["T_OBJECT_OPERATOR","->",105],["T_STRING","getTable",105],"(",["T_CONSTANT_ENCAPSED_STRING","'newsletter_template'",105],")","}",["T_ENCAPSED_AND_WHITESPACE","` (\n  `template_id` int(7) unsigned NOT NULL auto_increment,\n  `template_code` varchar(150) default NULL,\n  `template_text` text,\n  `template_text_preprocessed` text,\n  `template_type` int(3) unsigned default NULL,\n  `template_subject` varchar(200) default NULL,\n  `template_sender_name` varchar(200) default NULL,\n  `template_sender_email` varchar(200) character set latin1 collate latin1_general_ci default NULL,\n  `template_actual` tinyint(1) unsigned default '1',\n  `added_at` datetime default NULL,\n  `modified_at` datetime default NULL,\n  PRIMARY KEY  (`template_id`),\n  KEY `template_actual` (`template_actual`),\n  KEY `added_at` (`added_at`),\n  KEY `modified_at` (`modified_at`)\n) ENGINE=InnoDB DEFAULT CHARSET=utf8 COMMENT='Newsletter templates';\n",105],"\"",")",";",["T_WHITESPACE","\n",122],["T_VARIABLE","$installer",123],["T_OBJECT_OPERATOR","->",123],["T_STRING","endSetup",123],"(",")",";",["T_WHITESPACE","\n",123]]
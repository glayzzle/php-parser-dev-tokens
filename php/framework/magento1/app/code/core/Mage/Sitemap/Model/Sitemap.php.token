[["T_OPEN_TAG","<?php\n",1],["T_DOC_COMMENT","\/**\n * Magento\n *\n * NOTICE OF LICENSE\n *\n * This source file is subject to the Open Software License (OSL 3.0)\n * that is bundled with this package in the file LICENSE.txt.\n * It is also available through the world-wide-web at this URL:\n * http:\/\/opensource.org\/licenses\/osl-3.0.php\n * If you did not receive a copy of the license and are unable to\n * obtain it through the world-wide-web, please send an email\n * to license@magento.com so we can send you a copy immediately.\n *\n * DISCLAIMER\n *\n * Do not edit or add to this file if you wish to upgrade Magento to newer\n * versions in the future. If you wish to customize Magento for your\n * needs please refer to http:\/\/www.magento.com for more information.\n *\n * @category    Mage\n * @package     Mage_Sitemap\n * @copyright  Copyright (c) 2006-2016 X.commerce, Inc. and affiliates (http:\/\/www.magento.com)\n * @license    http:\/\/opensource.org\/licenses\/osl-3.0.php  Open Software License (OSL 3.0)\n *\/",2],["T_WHITESPACE","\n\n\n",25],["T_DOC_COMMENT","\/**\n * Sitemap model\n *\n * @method Mage_Sitemap_Model_Resource_Sitemap _getResource()\n * @method Mage_Sitemap_Model_Resource_Sitemap getResource()\n * @method string getSitemapType()\n * @method Mage_Sitemap_Model_Sitemap setSitemapType(string $value)\n * @method string getSitemapFilename()\n * @method Mage_Sitemap_Model_Sitemap setSitemapFilename(string $value)\n * @method string getSitemapPath()\n * @method Mage_Sitemap_Model_Sitemap setSitemapPath(string $value)\n * @method string getSitemapTime()\n * @method Mage_Sitemap_Model_Sitemap setSitemapTime(string $value)\n * @method int getStoreId()\n * @method Mage_Sitemap_Model_Sitemap setStoreId(int $value)\n *\n * @category    Mage\n * @package     Mage_Sitemap\n * @author      Magento Core Team <core@magentocommerce.com>\n *\/",28],["T_WHITESPACE","\n",47],["T_CLASS","class",48],["T_WHITESPACE"," ",48],["T_STRING","Mage_Sitemap_Model_Sitemap",48],["T_WHITESPACE"," ",48],["T_EXTENDS","extends",48],["T_WHITESPACE"," ",48],["T_STRING","Mage_Core_Model_Abstract",48],["T_WHITESPACE","\n",48],"{",["T_WHITESPACE","\n    ",49],["T_DOC_COMMENT","\/**\n     * Real file path\n     *\n     * @var string\n     *\/",50],["T_WHITESPACE","\n    ",54],["T_PROTECTED","protected",55],["T_WHITESPACE"," ",55],["T_VARIABLE","$_filePath",55],";",["T_WHITESPACE","\n\n    ",55],["T_DOC_COMMENT","\/**\n     * Init model\n     *\/",57],["T_WHITESPACE","\n    ",59],["T_PROTECTED","protected",60],["T_WHITESPACE"," ",60],["T_FUNCTION","function",60],["T_WHITESPACE"," ",60],["T_STRING","_construct",60],"(",")",["T_WHITESPACE","\n    ",60],"{",["T_WHITESPACE","\n        ",61],["T_VARIABLE","$this",62],["T_OBJECT_OPERATOR","->",62],["T_STRING","_init",62],"(",["T_CONSTANT_ENCAPSED_STRING","'sitemap\/sitemap'",62],")",";",["T_WHITESPACE","\n    ",62],"}",["T_WHITESPACE","\n\n    ",63],["T_PROTECTED","protected",65],["T_WHITESPACE"," ",65],["T_FUNCTION","function",65],["T_WHITESPACE"," ",65],["T_STRING","_beforeSave",65],"(",")",["T_WHITESPACE","\n    ",65],"{",["T_WHITESPACE","\n        ",66],["T_VARIABLE","$io",67],["T_WHITESPACE"," ",67],"=",["T_WHITESPACE"," ",67],["T_NEW","new",67],["T_WHITESPACE"," ",67],["T_STRING","Varien_Io_File",67],"(",")",";",["T_WHITESPACE","\n        ",67],["T_VARIABLE","$realPath",68],["T_WHITESPACE"," ",68],"=",["T_WHITESPACE"," ",68],["T_VARIABLE","$io",68],["T_OBJECT_OPERATOR","->",68],["T_STRING","getCleanPath",68],"(",["T_STRING","Mage",68],["T_DOUBLE_COLON","::",68],["T_STRING","getBaseDir",68],"(",")",["T_WHITESPACE"," ",68],".",["T_WHITESPACE"," ",68],["T_CONSTANT_ENCAPSED_STRING","'\/'",68],["T_WHITESPACE"," ",68],".",["T_WHITESPACE"," ",68],["T_VARIABLE","$this",68],["T_OBJECT_OPERATOR","->",68],["T_STRING","getSitemapPath",68],"(",")",")",";",["T_WHITESPACE","\n\n        ",68],["T_DOC_COMMENT","\/**\n         * Check path is allow\n         *\/",70],["T_WHITESPACE","\n        ",72],["T_IF","if",73],["T_WHITESPACE"," ",73],"(","!",["T_VARIABLE","$io",73],["T_OBJECT_OPERATOR","->",73],["T_STRING","allowedPath",73],"(",["T_VARIABLE","$realPath",73],",",["T_WHITESPACE"," ",73],["T_STRING","Mage",73],["T_DOUBLE_COLON","::",73],["T_STRING","getBaseDir",73],"(",")",")",")",["T_WHITESPACE"," ",73],"{",["T_WHITESPACE","\n            ",73],["T_STRING","Mage",74],["T_DOUBLE_COLON","::",74],["T_STRING","throwException",74],"(",["T_STRING","Mage",74],["T_DOUBLE_COLON","::",74],["T_STRING","helper",74],"(",["T_CONSTANT_ENCAPSED_STRING","'sitemap'",74],")",["T_OBJECT_OPERATOR","->",74],["T_STRING","__",74],"(",["T_CONSTANT_ENCAPSED_STRING","'Please define correct path'",74],")",")",";",["T_WHITESPACE","\n        ",74],"}",["T_WHITESPACE","\n        ",75],["T_DOC_COMMENT","\/**\n         * Check exists and writeable path\n         *\/",76],["T_WHITESPACE","\n        ",78],["T_IF","if",79],["T_WHITESPACE"," ",79],"(","!",["T_VARIABLE","$io",79],["T_OBJECT_OPERATOR","->",79],["T_STRING","fileExists",79],"(",["T_VARIABLE","$realPath",79],",",["T_WHITESPACE"," ",79],["T_STRING","false",79],")",")",["T_WHITESPACE"," ",79],"{",["T_WHITESPACE","\n            ",79],["T_STRING","Mage",80],["T_DOUBLE_COLON","::",80],["T_STRING","throwException",80],"(",["T_STRING","Mage",80],["T_DOUBLE_COLON","::",80],["T_STRING","helper",80],"(",["T_CONSTANT_ENCAPSED_STRING","'sitemap'",80],")",["T_OBJECT_OPERATOR","->",80],["T_STRING","__",80],"(",["T_CONSTANT_ENCAPSED_STRING","'Please create the specified folder \"%s\" before saving the sitemap.'",80],",",["T_WHITESPACE"," ",80],["T_STRING","Mage",80],["T_DOUBLE_COLON","::",80],["T_STRING","helper",80],"(",["T_CONSTANT_ENCAPSED_STRING","'core'",80],")",["T_OBJECT_OPERATOR","->",80],["T_STRING","escapeHtml",80],"(",["T_VARIABLE","$this",80],["T_OBJECT_OPERATOR","->",80],["T_STRING","getSitemapPath",80],"(",")",")",")",")",";",["T_WHITESPACE","\n        ",80],"}",["T_WHITESPACE","\n\n        ",81],["T_IF","if",83],["T_WHITESPACE"," ",83],"(","!",["T_VARIABLE","$io",83],["T_OBJECT_OPERATOR","->",83],["T_STRING","isWriteable",83],"(",["T_VARIABLE","$realPath",83],")",")",["T_WHITESPACE"," ",83],"{",["T_WHITESPACE","\n            ",83],["T_STRING","Mage",84],["T_DOUBLE_COLON","::",84],["T_STRING","throwException",84],"(",["T_STRING","Mage",84],["T_DOUBLE_COLON","::",84],["T_STRING","helper",84],"(",["T_CONSTANT_ENCAPSED_STRING","'sitemap'",84],")",["T_OBJECT_OPERATOR","->",84],["T_STRING","__",84],"(",["T_CONSTANT_ENCAPSED_STRING","'Please make sure that \"%s\" is writable by web-server.'",84],",",["T_WHITESPACE"," ",84],["T_VARIABLE","$this",84],["T_OBJECT_OPERATOR","->",84],["T_STRING","getSitemapPath",84],"(",")",")",")",";",["T_WHITESPACE","\n        ",84],"}",["T_WHITESPACE","\n        ",85],["T_DOC_COMMENT","\/**\n         * Check allow filename\n         *\/",86],["T_WHITESPACE","\n        ",88],["T_IF","if",89],["T_WHITESPACE"," ",89],"(","!",["T_STRING","preg_match",89],"(",["T_CONSTANT_ENCAPSED_STRING","'#^[a-zA-Z0-9_\\.]+$#'",89],",",["T_WHITESPACE"," ",89],["T_VARIABLE","$this",89],["T_OBJECT_OPERATOR","->",89],["T_STRING","getSitemapFilename",89],"(",")",")",")",["T_WHITESPACE"," ",89],"{",["T_WHITESPACE","\n            ",89],["T_STRING","Mage",90],["T_DOUBLE_COLON","::",90],["T_STRING","throwException",90],"(",["T_STRING","Mage",90],["T_DOUBLE_COLON","::",90],["T_STRING","helper",90],"(",["T_CONSTANT_ENCAPSED_STRING","'sitemap'",90],")",["T_OBJECT_OPERATOR","->",90],["T_STRING","__",90],"(",["T_CONSTANT_ENCAPSED_STRING","'Please use only letters (a-z or A-Z), numbers (0-9) or underscore (_) in the filename. No spaces or other characters are allowed.'",90],")",")",";",["T_WHITESPACE","\n        ",90],"}",["T_WHITESPACE","\n        ",91],["T_IF","if",92],["T_WHITESPACE"," ",92],"(","!",["T_STRING","preg_match",92],"(",["T_CONSTANT_ENCAPSED_STRING","'#\\.xml$#'",92],",",["T_WHITESPACE"," ",92],["T_VARIABLE","$this",92],["T_OBJECT_OPERATOR","->",92],["T_STRING","getSitemapFilename",92],"(",")",")",")",["T_WHITESPACE"," ",92],"{",["T_WHITESPACE","\n            ",92],["T_VARIABLE","$this",93],["T_OBJECT_OPERATOR","->",93],["T_STRING","setSitemapFilename",93],"(",["T_VARIABLE","$this",93],["T_OBJECT_OPERATOR","->",93],["T_STRING","getSitemapFilename",93],"(",")",["T_WHITESPACE"," ",93],".",["T_WHITESPACE"," ",93],["T_CONSTANT_ENCAPSED_STRING","'.xml'",93],")",";",["T_WHITESPACE","\n        ",93],"}",["T_WHITESPACE","\n\n        ",94],["T_VARIABLE","$this",96],["T_OBJECT_OPERATOR","->",96],["T_STRING","setSitemapPath",96],"(",["T_STRING","rtrim",96],"(",["T_STRING","str_replace",96],"(",["T_STRING","str_replace",96],"(",["T_CONSTANT_ENCAPSED_STRING","'\\\\'",96],",",["T_WHITESPACE"," ",96],["T_CONSTANT_ENCAPSED_STRING","'\/'",96],",",["T_WHITESPACE"," ",96],["T_STRING","Mage",96],["T_DOUBLE_COLON","::",96],["T_STRING","getBaseDir",96],"(",")",")",",",["T_WHITESPACE"," ",96],["T_CONSTANT_ENCAPSED_STRING","''",96],",",["T_WHITESPACE"," ",96],["T_VARIABLE","$realPath",96],")",",",["T_WHITESPACE"," ",96],["T_CONSTANT_ENCAPSED_STRING","'\/'",96],")",["T_WHITESPACE"," ",96],".",["T_WHITESPACE"," ",96],["T_CONSTANT_ENCAPSED_STRING","'\/'",96],")",";",["T_WHITESPACE","\n\n        ",96],["T_RETURN","return",98],["T_WHITESPACE"," ",98],["T_STRING","parent",98],["T_DOUBLE_COLON","::",98],["T_STRING","_beforeSave",98],"(",")",";",["T_WHITESPACE","\n    ",98],"}",["T_WHITESPACE","\n\n    ",99],["T_DOC_COMMENT","\/**\n     * Return real file path\n     *\n     * @return string\n     *\/",101],["T_WHITESPACE","\n    ",105],["T_PROTECTED","protected",106],["T_WHITESPACE"," ",106],["T_FUNCTION","function",106],["T_WHITESPACE"," ",106],["T_STRING","getPath",106],"(",")",["T_WHITESPACE","\n    ",106],"{",["T_WHITESPACE","\n        ",107],["T_IF","if",108],["T_WHITESPACE"," ",108],"(",["T_STRING","is_null",108],"(",["T_VARIABLE","$this",108],["T_OBJECT_OPERATOR","->",108],["T_STRING","_filePath",108],")",")",["T_WHITESPACE"," ",108],"{",["T_WHITESPACE","\n            ",108],["T_VARIABLE","$this",109],["T_OBJECT_OPERATOR","->",109],["T_STRING","_filePath",109],["T_WHITESPACE"," ",109],"=",["T_WHITESPACE"," ",109],["T_STRING","str_replace",109],"(",["T_CONSTANT_ENCAPSED_STRING","'\/\/'",109],",",["T_WHITESPACE"," ",109],["T_CONSTANT_ENCAPSED_STRING","'\/'",109],",",["T_WHITESPACE"," ",109],["T_STRING","Mage",109],["T_DOUBLE_COLON","::",109],["T_STRING","getBaseDir",109],"(",")",["T_WHITESPACE"," ",109],".",["T_WHITESPACE","\n                ",109],["T_VARIABLE","$this",110],["T_OBJECT_OPERATOR","->",110],["T_STRING","getSitemapPath",110],"(",")",")",";",["T_WHITESPACE","\n        ",110],"}",["T_WHITESPACE","\n        ",111],["T_RETURN","return",112],["T_WHITESPACE"," ",112],["T_VARIABLE","$this",112],["T_OBJECT_OPERATOR","->",112],["T_STRING","_filePath",112],";",["T_WHITESPACE","\n    ",112],"}",["T_WHITESPACE","\n\n    ",113],["T_DOC_COMMENT","\/**\n     * Return full file name with path\n     *\n     * @return string\n     *\/",115],["T_WHITESPACE","\n    ",119],["T_PUBLIC","public",120],["T_WHITESPACE"," ",120],["T_FUNCTION","function",120],["T_WHITESPACE"," ",120],["T_STRING","getPreparedFilename",120],"(",")",["T_WHITESPACE","\n    ",120],"{",["T_WHITESPACE","\n        ",121],["T_RETURN","return",122],["T_WHITESPACE"," ",122],["T_VARIABLE","$this",122],["T_OBJECT_OPERATOR","->",122],["T_STRING","getPath",122],"(",")",["T_WHITESPACE"," ",122],".",["T_WHITESPACE"," ",122],["T_VARIABLE","$this",122],["T_OBJECT_OPERATOR","->",122],["T_STRING","getSitemapFilename",122],"(",")",";",["T_WHITESPACE","\n    ",122],"}",["T_WHITESPACE","\n\n    ",123],["T_DOC_COMMENT","\/**\n     * Generate XML file\n     *\n     * @return Mage_Sitemap_Model_Sitemap\n     *\/",125],["T_WHITESPACE","\n    ",129],["T_PUBLIC","public",130],["T_WHITESPACE"," ",130],["T_FUNCTION","function",130],["T_WHITESPACE"," ",130],["T_STRING","generateXml",130],"(",")",["T_WHITESPACE","\n    ",130],"{",["T_WHITESPACE","\n        ",131],["T_VARIABLE","$io",132],["T_WHITESPACE"," ",132],"=",["T_WHITESPACE"," ",132],["T_NEW","new",132],["T_WHITESPACE"," ",132],["T_STRING","Varien_Io_File",132],"(",")",";",["T_WHITESPACE","\n        ",132],["T_VARIABLE","$io",133],["T_OBJECT_OPERATOR","->",133],["T_STRING","setAllowCreateFolders",133],"(",["T_STRING","true",133],")",";",["T_WHITESPACE","\n        ",133],["T_VARIABLE","$io",134],["T_OBJECT_OPERATOR","->",134],["T_STRING","open",134],"(",["T_ARRAY","array",134],"(",["T_CONSTANT_ENCAPSED_STRING","'path'",134],["T_WHITESPACE"," ",134],["T_DOUBLE_ARROW","=>",134],["T_WHITESPACE"," ",134],["T_VARIABLE","$this",134],["T_OBJECT_OPERATOR","->",134],["T_STRING","getPath",134],"(",")",")",")",";",["T_WHITESPACE","\n\n        ",134],["T_IF","if",136],["T_WHITESPACE"," ",136],"(",["T_VARIABLE","$io",136],["T_OBJECT_OPERATOR","->",136],["T_STRING","fileExists",136],"(",["T_VARIABLE","$this",136],["T_OBJECT_OPERATOR","->",136],["T_STRING","getSitemapFilename",136],"(",")",")",["T_WHITESPACE"," ",136],["T_BOOLEAN_AND","&&",136],["T_WHITESPACE"," ",136],"!",["T_VARIABLE","$io",136],["T_OBJECT_OPERATOR","->",136],["T_STRING","isWriteable",136],"(",["T_VARIABLE","$this",136],["T_OBJECT_OPERATOR","->",136],["T_STRING","getSitemapFilename",136],"(",")",")",")",["T_WHITESPACE"," ",136],"{",["T_WHITESPACE","\n            ",136],["T_STRING","Mage",137],["T_DOUBLE_COLON","::",137],["T_STRING","throwException",137],"(",["T_STRING","Mage",137],["T_DOUBLE_COLON","::",137],["T_STRING","helper",137],"(",["T_CONSTANT_ENCAPSED_STRING","'sitemap'",137],")",["T_OBJECT_OPERATOR","->",137],["T_STRING","__",137],"(",["T_CONSTANT_ENCAPSED_STRING","'File \"%s\" cannot be saved. Please, make sure the directory \"%s\" is writeable by web server.'",137],",",["T_WHITESPACE"," ",137],["T_VARIABLE","$this",137],["T_OBJECT_OPERATOR","->",137],["T_STRING","getSitemapFilename",137],"(",")",",",["T_WHITESPACE"," ",137],["T_VARIABLE","$this",137],["T_OBJECT_OPERATOR","->",137],["T_STRING","getPath",137],"(",")",")",")",";",["T_WHITESPACE","\n        ",137],"}",["T_WHITESPACE","\n\n        ",138],["T_VARIABLE","$io",140],["T_OBJECT_OPERATOR","->",140],["T_STRING","streamOpen",140],"(",["T_VARIABLE","$this",140],["T_OBJECT_OPERATOR","->",140],["T_STRING","getSitemapFilename",140],"(",")",")",";",["T_WHITESPACE","\n\n        ",140],["T_VARIABLE","$io",142],["T_OBJECT_OPERATOR","->",142],["T_STRING","streamWrite",142],"(",["T_CONSTANT_ENCAPSED_STRING","'<?xml version=\"1.0\" encoding=\"UTF-8\"?>'",142],["T_WHITESPACE"," ",142],".",["T_WHITESPACE"," ",142],["T_CONSTANT_ENCAPSED_STRING","\"\\n\"",142],")",";",["T_WHITESPACE","\n        ",142],["T_VARIABLE","$io",143],["T_OBJECT_OPERATOR","->",143],["T_STRING","streamWrite",143],"(",["T_CONSTANT_ENCAPSED_STRING","'<urlset xmlns=\"http:\/\/www.sitemaps.org\/schemas\/sitemap\/0.9\">'",143],")",";",["T_WHITESPACE","\n\n        ",143],["T_VARIABLE","$storeId",145],["T_WHITESPACE"," ",145],"=",["T_WHITESPACE"," ",145],["T_VARIABLE","$this",145],["T_OBJECT_OPERATOR","->",145],["T_STRING","getStoreId",145],"(",")",";",["T_WHITESPACE","\n        ",145],["T_VARIABLE","$date",146],["T_WHITESPACE","    ",146],"=",["T_WHITESPACE"," ",146],["T_STRING","Mage",146],["T_DOUBLE_COLON","::",146],["T_STRING","getSingleton",146],"(",["T_CONSTANT_ENCAPSED_STRING","'core\/date'",146],")",["T_OBJECT_OPERATOR","->",146],["T_STRING","gmtDate",146],"(",["T_CONSTANT_ENCAPSED_STRING","'Y-m-d'",146],")",";",["T_WHITESPACE","\n        ",146],["T_VARIABLE","$baseUrl",147],["T_WHITESPACE"," ",147],"=",["T_WHITESPACE"," ",147],["T_STRING","Mage",147],["T_DOUBLE_COLON","::",147],["T_STRING","app",147],"(",")",["T_OBJECT_OPERATOR","->",147],["T_STRING","getStore",147],"(",["T_VARIABLE","$storeId",147],")",["T_OBJECT_OPERATOR","->",147],["T_STRING","getBaseUrl",147],"(",["T_STRING","Mage_Core_Model_Store",147],["T_DOUBLE_COLON","::",147],["T_STRING","URL_TYPE_LINK",147],")",";",["T_WHITESPACE","\n\n        ",147],["T_DOC_COMMENT","\/**\n         * Generate categories sitemap\n         *\/",149],["T_WHITESPACE","\n        ",151],["T_VARIABLE","$changefreq",152],["T_WHITESPACE"," ",152],"=",["T_WHITESPACE"," ",152],["T_STRING_CAST","(string)",152],["T_STRING","Mage",152],["T_DOUBLE_COLON","::",152],["T_STRING","getStoreConfig",152],"(",["T_CONSTANT_ENCAPSED_STRING","'sitemap\/category\/changefreq'",152],",",["T_WHITESPACE"," ",152],["T_VARIABLE","$storeId",152],")",";",["T_WHITESPACE","\n        ",152],["T_VARIABLE","$priority",153],["T_WHITESPACE","   ",153],"=",["T_WHITESPACE"," ",153],["T_STRING_CAST","(string)",153],["T_STRING","Mage",153],["T_DOUBLE_COLON","::",153],["T_STRING","getStoreConfig",153],"(",["T_CONSTANT_ENCAPSED_STRING","'sitemap\/category\/priority'",153],",",["T_WHITESPACE"," ",153],["T_VARIABLE","$storeId",153],")",";",["T_WHITESPACE","\n        ",153],["T_VARIABLE","$collection",154],["T_WHITESPACE"," ",154],"=",["T_WHITESPACE"," ",154],["T_STRING","Mage",154],["T_DOUBLE_COLON","::",154],["T_STRING","getResourceModel",154],"(",["T_CONSTANT_ENCAPSED_STRING","'sitemap\/catalog_category'",154],")",["T_OBJECT_OPERATOR","->",154],["T_STRING","getCollection",154],"(",["T_VARIABLE","$storeId",154],")",";",["T_WHITESPACE","\n        ",154],["T_VARIABLE","$categories",155],["T_WHITESPACE"," ",155],"=",["T_WHITESPACE"," ",155],["T_NEW","new",155],["T_WHITESPACE"," ",155],["T_STRING","Varien_Object",155],"(",")",";",["T_WHITESPACE","\n        ",155],["T_VARIABLE","$categories",156],["T_OBJECT_OPERATOR","->",156],["T_STRING","setItems",156],"(",["T_VARIABLE","$collection",156],")",";",["T_WHITESPACE","\n        ",156],["T_STRING","Mage",157],["T_DOUBLE_COLON","::",157],["T_STRING","dispatchEvent",157],"(",["T_CONSTANT_ENCAPSED_STRING","'sitemap_categories_generating_before'",157],",",["T_WHITESPACE"," ",157],["T_ARRAY","array",157],"(",["T_WHITESPACE","\n            ",157],["T_CONSTANT_ENCAPSED_STRING","'collection'",158],["T_WHITESPACE"," ",158],["T_DOUBLE_ARROW","=>",158],["T_WHITESPACE"," ",158],["T_VARIABLE","$categories",158],",",["T_WHITESPACE","\n            ",158],["T_CONSTANT_ENCAPSED_STRING","'store_id'",159],["T_WHITESPACE"," ",159],["T_DOUBLE_ARROW","=>",159],["T_WHITESPACE"," ",159],["T_VARIABLE","$storeId",159],["T_WHITESPACE","\n        ",159],")",")",";",["T_WHITESPACE","\n        ",160],["T_FOREACH","foreach",161],["T_WHITESPACE"," ",161],"(",["T_VARIABLE","$categories",161],["T_OBJECT_OPERATOR","->",161],["T_STRING","getItems",161],"(",")",["T_WHITESPACE"," ",161],["T_AS","as",161],["T_WHITESPACE"," ",161],["T_VARIABLE","$item",161],")",["T_WHITESPACE"," ",161],"{",["T_WHITESPACE","\n            ",161],["T_VARIABLE","$xml",162],["T_WHITESPACE"," ",162],"=",["T_WHITESPACE"," ",162],["T_STRING","sprintf",162],"(",["T_WHITESPACE","\n                ",162],["T_CONSTANT_ENCAPSED_STRING","'<url><loc>%s<\/loc><lastmod>%s<\/lastmod><changefreq>%s<\/changefreq><priority>%.1f<\/priority><\/url>'",163],",",["T_WHITESPACE","\n                ",163],["T_STRING","htmlspecialchars",164],"(",["T_VARIABLE","$baseUrl",164],["T_WHITESPACE"," ",164],".",["T_WHITESPACE"," ",164],["T_VARIABLE","$item",164],["T_OBJECT_OPERATOR","->",164],["T_STRING","getUrl",164],"(",")",")",",",["T_WHITESPACE","\n                ",164],["T_VARIABLE","$date",165],",",["T_WHITESPACE","\n                ",165],["T_VARIABLE","$changefreq",166],",",["T_WHITESPACE","\n                ",166],["T_VARIABLE","$priority",167],["T_WHITESPACE","\n            ",167],")",";",["T_WHITESPACE","\n            ",168],["T_VARIABLE","$io",169],["T_OBJECT_OPERATOR","->",169],["T_STRING","streamWrite",169],"(",["T_VARIABLE","$xml",169],")",";",["T_WHITESPACE","\n        ",169],"}",["T_WHITESPACE","\n        ",170],["T_UNSET","unset",171],"(",["T_VARIABLE","$collection",171],")",";",["T_WHITESPACE","\n\n        ",171],["T_DOC_COMMENT","\/**\n         * Generate products sitemap\n         *\/",173],["T_WHITESPACE","\n        ",175],["T_VARIABLE","$changefreq",176],["T_WHITESPACE"," ",176],"=",["T_WHITESPACE"," ",176],["T_STRING_CAST","(string)",176],["T_STRING","Mage",176],["T_DOUBLE_COLON","::",176],["T_STRING","getStoreConfig",176],"(",["T_CONSTANT_ENCAPSED_STRING","'sitemap\/product\/changefreq'",176],",",["T_WHITESPACE"," ",176],["T_VARIABLE","$storeId",176],")",";",["T_WHITESPACE","\n        ",176],["T_VARIABLE","$priority",177],["T_WHITESPACE","   ",177],"=",["T_WHITESPACE"," ",177],["T_STRING_CAST","(string)",177],["T_STRING","Mage",177],["T_DOUBLE_COLON","::",177],["T_STRING","getStoreConfig",177],"(",["T_CONSTANT_ENCAPSED_STRING","'sitemap\/product\/priority'",177],",",["T_WHITESPACE"," ",177],["T_VARIABLE","$storeId",177],")",";",["T_WHITESPACE","\n        ",177],["T_VARIABLE","$collection",178],["T_WHITESPACE"," ",178],"=",["T_WHITESPACE"," ",178],["T_STRING","Mage",178],["T_DOUBLE_COLON","::",178],["T_STRING","getResourceModel",178],"(",["T_CONSTANT_ENCAPSED_STRING","'sitemap\/catalog_product'",178],")",["T_OBJECT_OPERATOR","->",178],["T_STRING","getCollection",178],"(",["T_VARIABLE","$storeId",178],")",";",["T_WHITESPACE","\n        ",178],["T_VARIABLE","$products",179],["T_WHITESPACE"," ",179],"=",["T_WHITESPACE"," ",179],["T_NEW","new",179],["T_WHITESPACE"," ",179],["T_STRING","Varien_Object",179],"(",")",";",["T_WHITESPACE","\n        ",179],["T_VARIABLE","$products",180],["T_OBJECT_OPERATOR","->",180],["T_STRING","setItems",180],"(",["T_VARIABLE","$collection",180],")",";",["T_WHITESPACE","\n        ",180],["T_STRING","Mage",181],["T_DOUBLE_COLON","::",181],["T_STRING","dispatchEvent",181],"(",["T_CONSTANT_ENCAPSED_STRING","'sitemap_products_generating_before'",181],",",["T_WHITESPACE"," ",181],["T_ARRAY","array",181],"(",["T_WHITESPACE","\n            ",181],["T_CONSTANT_ENCAPSED_STRING","'collection'",182],["T_WHITESPACE"," ",182],["T_DOUBLE_ARROW","=>",182],["T_WHITESPACE"," ",182],["T_VARIABLE","$products",182],",",["T_WHITESPACE","\n            ",182],["T_CONSTANT_ENCAPSED_STRING","'store_id'",183],["T_WHITESPACE"," ",183],["T_DOUBLE_ARROW","=>",183],["T_WHITESPACE"," ",183],["T_VARIABLE","$storeId",183],["T_WHITESPACE","\n        ",183],")",")",";",["T_WHITESPACE","\n        ",184],["T_FOREACH","foreach",185],["T_WHITESPACE"," ",185],"(",["T_VARIABLE","$products",185],["T_OBJECT_OPERATOR","->",185],["T_STRING","getItems",185],"(",")",["T_WHITESPACE"," ",185],["T_AS","as",185],["T_WHITESPACE"," ",185],["T_VARIABLE","$item",185],")",["T_WHITESPACE"," ",185],"{",["T_WHITESPACE","\n            ",185],["T_VARIABLE","$xml",186],["T_WHITESPACE"," ",186],"=",["T_WHITESPACE"," ",186],["T_STRING","sprintf",186],"(",["T_WHITESPACE","\n                ",186],["T_CONSTANT_ENCAPSED_STRING","'<url><loc>%s<\/loc><lastmod>%s<\/lastmod><changefreq>%s<\/changefreq><priority>%.1f<\/priority><\/url>'",187],",",["T_WHITESPACE","\n                ",187],["T_STRING","htmlspecialchars",188],"(",["T_VARIABLE","$baseUrl",188],["T_WHITESPACE"," ",188],".",["T_WHITESPACE"," ",188],["T_VARIABLE","$item",188],["T_OBJECT_OPERATOR","->",188],["T_STRING","getUrl",188],"(",")",")",",",["T_WHITESPACE","\n                ",188],["T_VARIABLE","$date",189],",",["T_WHITESPACE","\n                ",189],["T_VARIABLE","$changefreq",190],",",["T_WHITESPACE","\n                ",190],["T_VARIABLE","$priority",191],["T_WHITESPACE","\n            ",191],")",";",["T_WHITESPACE","\n            ",192],["T_VARIABLE","$io",193],["T_OBJECT_OPERATOR","->",193],["T_STRING","streamWrite",193],"(",["T_VARIABLE","$xml",193],")",";",["T_WHITESPACE","\n        ",193],"}",["T_WHITESPACE","\n        ",194],["T_UNSET","unset",195],"(",["T_VARIABLE","$collection",195],")",";",["T_WHITESPACE","\n\n        ",195],["T_DOC_COMMENT","\/**\n         * Generate cms pages sitemap\n         *\/",197],["T_WHITESPACE","\n        ",199],["T_VARIABLE","$changefreq",200],["T_WHITESPACE"," ",200],"=",["T_WHITESPACE"," ",200],["T_STRING_CAST","(string)",200],["T_STRING","Mage",200],["T_DOUBLE_COLON","::",200],["T_STRING","getStoreConfig",200],"(",["T_CONSTANT_ENCAPSED_STRING","'sitemap\/page\/changefreq'",200],",",["T_WHITESPACE"," ",200],["T_VARIABLE","$storeId",200],")",";",["T_WHITESPACE","\n        ",200],["T_VARIABLE","$priority",201],["T_WHITESPACE","   ",201],"=",["T_WHITESPACE"," ",201],["T_STRING_CAST","(string)",201],["T_STRING","Mage",201],["T_DOUBLE_COLON","::",201],["T_STRING","getStoreConfig",201],"(",["T_CONSTANT_ENCAPSED_STRING","'sitemap\/page\/priority'",201],",",["T_WHITESPACE"," ",201],["T_VARIABLE","$storeId",201],")",";",["T_WHITESPACE","\n        ",201],["T_VARIABLE","$collection",202],["T_WHITESPACE"," ",202],"=",["T_WHITESPACE"," ",202],["T_STRING","Mage",202],["T_DOUBLE_COLON","::",202],["T_STRING","getResourceModel",202],"(",["T_CONSTANT_ENCAPSED_STRING","'sitemap\/cms_page'",202],")",["T_OBJECT_OPERATOR","->",202],["T_STRING","getCollection",202],"(",["T_VARIABLE","$storeId",202],")",";",["T_WHITESPACE","\n        ",202],["T_FOREACH","foreach",203],["T_WHITESPACE"," ",203],"(",["T_VARIABLE","$collection",203],["T_WHITESPACE"," ",203],["T_AS","as",203],["T_WHITESPACE"," ",203],["T_VARIABLE","$item",203],")",["T_WHITESPACE"," ",203],"{",["T_WHITESPACE","\n            ",203],["T_VARIABLE","$xml",204],["T_WHITESPACE"," ",204],"=",["T_WHITESPACE"," ",204],["T_STRING","sprintf",204],"(",["T_WHITESPACE","\n                ",204],["T_CONSTANT_ENCAPSED_STRING","'<url><loc>%s<\/loc><lastmod>%s<\/lastmod><changefreq>%s<\/changefreq><priority>%.1f<\/priority><\/url>'",205],",",["T_WHITESPACE","\n                ",205],["T_STRING","htmlspecialchars",206],"(",["T_VARIABLE","$baseUrl",206],["T_WHITESPACE"," ",206],".",["T_WHITESPACE"," ",206],["T_VARIABLE","$item",206],["T_OBJECT_OPERATOR","->",206],["T_STRING","getUrl",206],"(",")",")",",",["T_WHITESPACE","\n                ",206],["T_VARIABLE","$date",207],",",["T_WHITESPACE","\n                ",207],["T_VARIABLE","$changefreq",208],",",["T_WHITESPACE","\n                ",208],["T_VARIABLE","$priority",209],["T_WHITESPACE","\n            ",209],")",";",["T_WHITESPACE","\n            ",210],["T_VARIABLE","$io",211],["T_OBJECT_OPERATOR","->",211],["T_STRING","streamWrite",211],"(",["T_VARIABLE","$xml",211],")",";",["T_WHITESPACE","\n        ",211],"}",["T_WHITESPACE","\n        ",212],["T_UNSET","unset",213],"(",["T_VARIABLE","$collection",213],")",";",["T_WHITESPACE","\n\n        ",213],["T_VARIABLE","$io",215],["T_OBJECT_OPERATOR","->",215],["T_STRING","streamWrite",215],"(",["T_CONSTANT_ENCAPSED_STRING","'<\/urlset>'",215],")",";",["T_WHITESPACE","\n        ",215],["T_VARIABLE","$io",216],["T_OBJECT_OPERATOR","->",216],["T_STRING","streamClose",216],"(",")",";",["T_WHITESPACE","\n\n        ",216],["T_VARIABLE","$this",218],["T_OBJECT_OPERATOR","->",218],["T_STRING","setSitemapTime",218],"(",["T_STRING","Mage",218],["T_DOUBLE_COLON","::",218],["T_STRING","getSingleton",218],"(",["T_CONSTANT_ENCAPSED_STRING","'core\/date'",218],")",["T_OBJECT_OPERATOR","->",218],["T_STRING","gmtDate",218],"(",["T_CONSTANT_ENCAPSED_STRING","'Y-m-d H:i:s'",218],")",")",";",["T_WHITESPACE","\n        ",218],["T_VARIABLE","$this",219],["T_OBJECT_OPERATOR","->",219],["T_STRING","save",219],"(",")",";",["T_WHITESPACE","\n\n        ",219],["T_RETURN","return",221],["T_WHITESPACE"," ",221],["T_VARIABLE","$this",221],";",["T_WHITESPACE","\n    ",221],"}",["T_WHITESPACE","\n",222],"}",["T_WHITESPACE","\n",223]]
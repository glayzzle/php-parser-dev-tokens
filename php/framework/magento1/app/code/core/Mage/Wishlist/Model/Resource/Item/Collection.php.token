[["T_OPEN_TAG","<?php\n",1],["T_DOC_COMMENT","\/**\n * Magento\n *\n * NOTICE OF LICENSE\n *\n * This source file is subject to the Open Software License (OSL 3.0)\n * that is bundled with this package in the file LICENSE.txt.\n * It is also available through the world-wide-web at this URL:\n * http:\/\/opensource.org\/licenses\/osl-3.0.php\n * If you did not receive a copy of the license and are unable to\n * obtain it through the world-wide-web, please send an email\n * to license@magento.com so we can send you a copy immediately.\n *\n * DISCLAIMER\n *\n * Do not edit or add to this file if you wish to upgrade Magento to newer\n * versions in the future. If you wish to customize Magento for your\n * needs please refer to http:\/\/www.magento.com for more information.\n *\n * @category    Mage\n * @package     Mage_Wishlist\n * @copyright  Copyright (c) 2006-2016 X.commerce, Inc. and affiliates (http:\/\/www.magento.com)\n * @license    http:\/\/opensource.org\/licenses\/osl-3.0.php  Open Software License (OSL 3.0)\n *\/",2],["T_WHITESPACE","\n\n\n",25],["T_DOC_COMMENT","\/**\n * Wishlist item collection\n *\n * @category    Mage\n * @package     Mage_Wishlist\n * @author      Magento Core Team <core@magentocommerce.com>\n *\/",28],["T_WHITESPACE","\n",34],["T_CLASS","class",35],["T_WHITESPACE"," ",35],["T_STRING","Mage_Wishlist_Model_Resource_Item_Collection",35],["T_WHITESPACE"," ",35],["T_EXTENDS","extends",35],["T_WHITESPACE"," ",35],["T_STRING","Mage_Core_Model_Resource_Db_Collection_Abstract",35],["T_WHITESPACE","\n",35],"{",["T_WHITESPACE","\n    ",36],["T_DOC_COMMENT","\/**\n     * Product Visibility Filter to product collection flag\n     *\n     * @var bool\n     *\/",37],["T_WHITESPACE","\n    ",41],["T_PROTECTED","protected",42],["T_WHITESPACE"," ",42],["T_VARIABLE","$_productVisible",42],["T_WHITESPACE"," ",42],"=",["T_WHITESPACE"," ",42],["T_STRING","false",42],";",["T_WHITESPACE","\n\n    ",42],["T_DOC_COMMENT","\/**\n     * Product Salable Filter to product collection flag\n     *\n     * @var bool\n     *\/",44],["T_WHITESPACE","\n    ",48],["T_PROTECTED","protected",49],["T_WHITESPACE"," ",49],["T_VARIABLE","$_productSalable",49],["T_WHITESPACE"," ",49],"=",["T_WHITESPACE"," ",49],["T_STRING","false",49],";",["T_WHITESPACE","\n\n    ",49],["T_DOC_COMMENT","\/**\n     * If product out of stock, its item will be removed after load\n     *\n     * @var bool\n      *\/",51],["T_WHITESPACE","\n    ",55],["T_PROTECTED","protected",56],["T_WHITESPACE"," ",56],["T_VARIABLE","$_productInStock",56],["T_WHITESPACE"," ",56],"=",["T_WHITESPACE"," ",56],["T_STRING","false",56],";",["T_WHITESPACE","\n\n    ",56],["T_DOC_COMMENT","\/**\n     * Product Ids array\n     *\n     * @var array\n     *\/",58],["T_WHITESPACE","\n    ",62],["T_PROTECTED","protected",63],["T_WHITESPACE"," ",63],["T_VARIABLE","$_productIds",63],["T_WHITESPACE"," ",63],"=",["T_WHITESPACE"," ",63],["T_ARRAY","array",63],"(",")",";",["T_WHITESPACE","\n\n    ",63],["T_DOC_COMMENT","\/**\n     * Store Ids array\n     *\n     * @var array\n     *\/",65],["T_WHITESPACE","\n    ",69],["T_PROTECTED","protected",70],["T_WHITESPACE"," ",70],["T_VARIABLE","$_storeIds",70],["T_WHITESPACE"," ",70],"=",["T_WHITESPACE"," ",70],["T_ARRAY","array",70],"(",")",";",["T_WHITESPACE","\n\n    ",70],["T_DOC_COMMENT","\/**\n     * Add days in whishlist filter of product collection\n     *\n     * @var boolean\n     *\/",72],["T_WHITESPACE","\n    ",76],["T_PROTECTED","protected",77],["T_WHITESPACE"," ",77],["T_VARIABLE","$_addDaysInWishlist",77],["T_WHITESPACE"," ",77],"=",["T_WHITESPACE"," ",77],["T_STRING","false",77],";",["T_WHITESPACE","\n\n    ",77],["T_DOC_COMMENT","\/**\n     * Sum of items collection qty\n     *\n     * @var int\n     *\/",79],["T_WHITESPACE","\n    ",83],["T_PROTECTED","protected",84],["T_WHITESPACE"," ",84],["T_VARIABLE","$_itemsQty",84],";",["T_WHITESPACE","\n\n    ",84],["T_DOC_COMMENT","\/**\n     * Whether product name attribute value table is joined in select\n     *\n     * @var boolean\n     *\/",86],["T_WHITESPACE","\n    ",90],["T_PROTECTED","protected",91],["T_WHITESPACE"," ",91],["T_VARIABLE","$_isProductNameJoined",91],["T_WHITESPACE"," ",91],"=",["T_WHITESPACE"," ",91],["T_STRING","false",91],";",["T_WHITESPACE","\n\n    ",91],["T_DOC_COMMENT","\/**\n     * Customer website ID\n     *\n     * @var int\n     *\/",93],["T_WHITESPACE","\n    ",97],["T_PROTECTED","protected",98],["T_WHITESPACE"," ",98],["T_VARIABLE","$_websiteId",98],["T_WHITESPACE"," ",98],"=",["T_WHITESPACE"," ",98],["T_STRING","null",98],";",["T_WHITESPACE","\n\n    ",98],["T_DOC_COMMENT","\/**\n     * Customer group ID\n     *\n     * @var int\n     *\/",100],["T_WHITESPACE","\n    ",104],["T_PROTECTED","protected",105],["T_WHITESPACE"," ",105],["T_VARIABLE","$_customerGroupId",105],["T_WHITESPACE"," ",105],"=",["T_WHITESPACE"," ",105],["T_STRING","null",105],";",["T_WHITESPACE","\n\n\n    ",105],["T_DOC_COMMENT","\/**\n     * Initialize resource model for collection\n     *\n     * @return void\n     *\/",108],["T_WHITESPACE","\n    ",112],["T_PUBLIC","public",113],["T_WHITESPACE"," ",113],["T_FUNCTION","function",113],["T_WHITESPACE"," ",113],["T_STRING","_construct",113],"(",")",["T_WHITESPACE","\n    ",113],"{",["T_WHITESPACE","\n        ",114],["T_VARIABLE","$this",115],["T_OBJECT_OPERATOR","->",115],["T_STRING","_init",115],"(",["T_CONSTANT_ENCAPSED_STRING","'wishlist\/item'",115],")",";",["T_WHITESPACE","\n        ",115],["T_VARIABLE","$this",116],["T_OBJECT_OPERATOR","->",116],["T_STRING","addFilterToMap",116],"(",["T_CONSTANT_ENCAPSED_STRING","'store_id'",116],",",["T_WHITESPACE"," ",116],["T_CONSTANT_ENCAPSED_STRING","'main_table.store_id'",116],")",";",["T_WHITESPACE","\n    ",116],"}",["T_WHITESPACE","\n\n    ",117],["T_DOC_COMMENT","\/**\n     * After load processing\n     *\n     * @return Mage_Wishlist_Model_Resource_Item_Collection\n     *\/",119],["T_WHITESPACE","\n    ",123],["T_PROTECTED","protected",124],["T_WHITESPACE"," ",124],["T_FUNCTION","function",124],["T_WHITESPACE"," ",124],["T_STRING","_afterLoad",124],"(",")",["T_WHITESPACE","\n    ",124],"{",["T_WHITESPACE","\n        ",125],["T_STRING","parent",126],["T_DOUBLE_COLON","::",126],["T_STRING","_afterLoad",126],"(",")",";",["T_WHITESPACE","\n\n        ",126],["T_DOC_COMMENT","\/**\n         * Assign products\n         *\/",128],["T_WHITESPACE","\n        ",130],["T_VARIABLE","$this",131],["T_OBJECT_OPERATOR","->",131],["T_STRING","_assignOptions",131],"(",")",";",["T_WHITESPACE","\n        ",131],["T_VARIABLE","$this",132],["T_OBJECT_OPERATOR","->",132],["T_STRING","_assignProducts",132],"(",")",";",["T_WHITESPACE","\n        ",132],["T_VARIABLE","$this",133],["T_OBJECT_OPERATOR","->",133],["T_STRING","resetItemsDataChanged",133],"(",")",";",["T_WHITESPACE","\n\n        ",133],["T_VARIABLE","$this",135],["T_OBJECT_OPERATOR","->",135],["T_STRING","getPageSize",135],"(",")",";",["T_WHITESPACE","\n\n        ",135],["T_RETURN","return",137],["T_WHITESPACE"," ",137],["T_VARIABLE","$this",137],";",["T_WHITESPACE","\n    ",137],"}",["T_WHITESPACE","\n\n    ",138],["T_DOC_COMMENT","\/**\n     * Add options to items\n     *\n     * @return Mage_Wishlist_Model_Resource_Item_Collection\n     *\/",140],["T_WHITESPACE","\n    ",144],["T_PROTECTED","protected",145],["T_WHITESPACE"," ",145],["T_FUNCTION","function",145],["T_WHITESPACE"," ",145],["T_STRING","_assignOptions",145],"(",")",["T_WHITESPACE","\n    ",145],"{",["T_WHITESPACE","\n        ",146],["T_VARIABLE","$itemIds",147],["T_WHITESPACE"," ",147],"=",["T_WHITESPACE"," ",147],["T_STRING","array_keys",147],"(",["T_VARIABLE","$this",147],["T_OBJECT_OPERATOR","->",147],["T_STRING","_items",147],")",";",["T_WHITESPACE","\n        ",147],["T_COMMENT","\/* @var $optionCollection Mage_Wishlist_Model_Resource_Item_Option_Collection *\/",148],["T_WHITESPACE","\n        ",148],["T_VARIABLE","$optionCollection",149],["T_WHITESPACE"," ",149],"=",["T_WHITESPACE"," ",149],["T_STRING","Mage",149],["T_DOUBLE_COLON","::",149],["T_STRING","getModel",149],"(",["T_CONSTANT_ENCAPSED_STRING","'wishlist\/item_option'",149],")",["T_OBJECT_OPERATOR","->",149],["T_STRING","getCollection",149],"(",")",";",["T_WHITESPACE","\n        ",149],["T_VARIABLE","$optionCollection",150],["T_OBJECT_OPERATOR","->",150],["T_STRING","addItemFilter",150],"(",["T_VARIABLE","$itemIds",150],")",";",["T_WHITESPACE","\n\n        ",150],["T_COMMENT","\/* @var $item Mage_Wishlist_Model_Item *\/",152],["T_WHITESPACE","\n        ",152],["T_FOREACH","foreach",153],["T_WHITESPACE"," ",153],"(",["T_VARIABLE","$this",153],["T_WHITESPACE"," ",153],["T_AS","as",153],["T_WHITESPACE"," ",153],["T_VARIABLE","$item",153],")",["T_WHITESPACE"," ",153],"{",["T_WHITESPACE","\n            ",153],["T_VARIABLE","$item",154],["T_OBJECT_OPERATOR","->",154],["T_STRING","setOptions",154],"(",["T_VARIABLE","$optionCollection",154],["T_OBJECT_OPERATOR","->",154],["T_STRING","getOptionsByItem",154],"(",["T_VARIABLE","$item",154],")",")",";",["T_WHITESPACE","\n        ",154],"}",["T_WHITESPACE","\n        ",155],["T_VARIABLE","$productIds",156],["T_WHITESPACE"," ",156],"=",["T_WHITESPACE"," ",156],["T_VARIABLE","$optionCollection",156],["T_OBJECT_OPERATOR","->",156],["T_STRING","getProductIds",156],"(",")",";",["T_WHITESPACE","\n        ",156],["T_VARIABLE","$this",157],["T_OBJECT_OPERATOR","->",157],["T_STRING","_productIds",157],["T_WHITESPACE"," ",157],"=",["T_WHITESPACE"," ",157],["T_STRING","array_merge",157],"(",["T_VARIABLE","$this",157],["T_OBJECT_OPERATOR","->",157],["T_STRING","_productIds",157],",",["T_WHITESPACE"," ",157],["T_VARIABLE","$productIds",157],")",";",["T_WHITESPACE","\n\n        ",157],["T_RETURN","return",159],["T_WHITESPACE"," ",159],["T_VARIABLE","$this",159],";",["T_WHITESPACE","\n    ",159],"}",["T_WHITESPACE","\n\n    ",160],["T_DOC_COMMENT","\/**\n     * Add products to items and item options\n     *\n     * @return Mage_Wishlist_Model_Resource_Item_Collection\n     *\/",162],["T_WHITESPACE","\n    ",166],["T_PROTECTED","protected",167],["T_WHITESPACE"," ",167],["T_FUNCTION","function",167],["T_WHITESPACE"," ",167],["T_STRING","_assignProducts",167],"(",")",["T_WHITESPACE","\n    ",167],"{",["T_WHITESPACE","\n        ",168],["T_STRING","Varien_Profiler",169],["T_DOUBLE_COLON","::",169],["T_STRING","start",169],"(",["T_CONSTANT_ENCAPSED_STRING","'WISHLIST:'",169],".",["T_METHOD_C","__METHOD__",169],")",";",["T_WHITESPACE","\n        ",169],["T_VARIABLE","$productIds",170],["T_WHITESPACE"," ",170],"=",["T_WHITESPACE"," ",170],["T_ARRAY","array",170],"(",")",";",["T_WHITESPACE","\n\n        ",170],["T_VARIABLE","$isStoreAdmin",172],["T_WHITESPACE"," ",172],"=",["T_WHITESPACE"," ",172],["T_STRING","Mage",172],["T_DOUBLE_COLON","::",172],["T_STRING","app",172],"(",")",["T_OBJECT_OPERATOR","->",172],["T_STRING","getStore",172],"(",")",["T_OBJECT_OPERATOR","->",172],["T_STRING","isAdmin",172],"(",")",";",["T_WHITESPACE","\n\n        ",172],["T_VARIABLE","$storeIds",174],["T_WHITESPACE"," ",174],"=",["T_WHITESPACE"," ",174],["T_ARRAY","array",174],"(",")",";",["T_WHITESPACE","\n        ",174],["T_FOREACH","foreach",175],["T_WHITESPACE"," ",175],"(",["T_VARIABLE","$this",175],["T_WHITESPACE"," ",175],["T_AS","as",175],["T_WHITESPACE"," ",175],["T_VARIABLE","$item",175],")",["T_WHITESPACE"," ",175],"{",["T_WHITESPACE","\n            ",175],["T_VARIABLE","$productIds",176],"[",["T_VARIABLE","$item",176],["T_OBJECT_OPERATOR","->",176],["T_STRING","getProductId",176],"(",")","]",["T_WHITESPACE"," ",176],"=",["T_WHITESPACE"," ",176],["T_LNUMBER","1",176],";",["T_WHITESPACE","\n            ",176],["T_IF","if",177],["T_WHITESPACE"," ",177],"(",["T_VARIABLE","$isStoreAdmin",177],["T_WHITESPACE"," ",177],["T_BOOLEAN_AND","&&",177],["T_WHITESPACE"," ",177],"!",["T_STRING","in_array",177],"(",["T_VARIABLE","$item",177],["T_OBJECT_OPERATOR","->",177],["T_STRING","getStoreId",177],"(",")",",",["T_WHITESPACE"," ",177],["T_VARIABLE","$storeIds",177],")",")",["T_WHITESPACE"," ",177],"{",["T_WHITESPACE","\n                ",177],["T_VARIABLE","$storeIds",178],"[","]",["T_WHITESPACE"," ",178],"=",["T_WHITESPACE"," ",178],["T_VARIABLE","$item",178],["T_OBJECT_OPERATOR","->",178],["T_STRING","getStoreId",178],"(",")",";",["T_WHITESPACE","\n            ",178],"}",["T_WHITESPACE","\n        ",179],"}",["T_WHITESPACE","\n        ",180],["T_IF","if",181],["T_WHITESPACE"," ",181],"(","!",["T_VARIABLE","$isStoreAdmin",181],")",["T_WHITESPACE"," ",181],"{",["T_WHITESPACE","\n            ",181],["T_VARIABLE","$storeIds",182],["T_WHITESPACE"," ",182],"=",["T_WHITESPACE"," ",182],["T_VARIABLE","$this",182],["T_OBJECT_OPERATOR","->",182],["T_STRING","_storeIds",182],";",["T_WHITESPACE","\n        ",182],"}",["T_WHITESPACE","\n\n        ",183],["T_VARIABLE","$this",185],["T_OBJECT_OPERATOR","->",185],["T_STRING","_productIds",185],["T_WHITESPACE"," ",185],"=",["T_WHITESPACE"," ",185],["T_STRING","array_merge",185],"(",["T_VARIABLE","$this",185],["T_OBJECT_OPERATOR","->",185],["T_STRING","_productIds",185],",",["T_WHITESPACE"," ",185],["T_STRING","array_keys",185],"(",["T_VARIABLE","$productIds",185],")",")",";",["T_WHITESPACE","\n        ",185],["T_VARIABLE","$attributes",186],["T_WHITESPACE"," ",186],"=",["T_WHITESPACE"," ",186],["T_STRING","Mage",186],["T_DOUBLE_COLON","::",186],["T_STRING","getSingleton",186],"(",["T_CONSTANT_ENCAPSED_STRING","'wishlist\/config'",186],")",["T_OBJECT_OPERATOR","->",186],["T_STRING","getProductAttributes",186],"(",")",";",["T_WHITESPACE","\n        ",186],["T_VARIABLE","$productCollection",187],["T_WHITESPACE"," ",187],"=",["T_WHITESPACE"," ",187],["T_STRING","Mage",187],["T_DOUBLE_COLON","::",187],["T_STRING","getModel",187],"(",["T_CONSTANT_ENCAPSED_STRING","'catalog\/product'",187],")",["T_OBJECT_OPERATOR","->",187],["T_STRING","getCollection",187],"(",")",";",["T_WHITESPACE","\n        ",187],["T_FOREACH","foreach",188],["T_WHITESPACE"," ",188],"(",["T_VARIABLE","$storeIds",188],["T_WHITESPACE"," ",188],["T_AS","as",188],["T_WHITESPACE"," ",188],["T_VARIABLE","$id",188],")",["T_WHITESPACE"," ",188],"{",["T_WHITESPACE","\n            ",188],["T_VARIABLE","$productCollection",189],["T_OBJECT_OPERATOR","->",189],["T_STRING","addWebsiteFilter",189],"(",["T_STRING","Mage",189],["T_DOUBLE_COLON","::",189],["T_STRING","app",189],"(",")",["T_OBJECT_OPERATOR","->",189],["T_STRING","getStore",189],"(",["T_VARIABLE","$id",189],")",["T_OBJECT_OPERATOR","->",189],["T_STRING","getWebsiteId",189],"(",")",")",";",["T_WHITESPACE","\n        ",189],"}",["T_WHITESPACE","\n\n        ",190],["T_IF","if",192],["T_WHITESPACE"," ",192],"(",["T_VARIABLE","$this",192],["T_OBJECT_OPERATOR","->",192],["T_STRING","_productVisible",192],")",["T_WHITESPACE"," ",192],"{",["T_WHITESPACE","\n            ",192],["T_STRING","Mage",193],["T_DOUBLE_COLON","::",193],["T_STRING","getSingleton",193],"(",["T_CONSTANT_ENCAPSED_STRING","'catalog\/product_visibility'",193],")",["T_OBJECT_OPERATOR","->",193],["T_STRING","addVisibleInSiteFilterToCollection",193],"(",["T_VARIABLE","$productCollection",193],")",";",["T_WHITESPACE","\n        ",193],"}",["T_WHITESPACE","\n\n        ",194],["T_VARIABLE","$productCollection",196],["T_OBJECT_OPERATOR","->",196],["T_STRING","addPriceData",196],"(",["T_VARIABLE","$this",196],["T_OBJECT_OPERATOR","->",196],["T_STRING","_customerGroupId",196],",",["T_WHITESPACE"," ",196],["T_VARIABLE","$this",196],["T_OBJECT_OPERATOR","->",196],["T_STRING","_websiteId",196],")",["T_WHITESPACE","\n            ",196],["T_OBJECT_OPERATOR","->",197],["T_STRING","addTaxPercents",197],"(",")",["T_WHITESPACE","\n            ",197],["T_OBJECT_OPERATOR","->",198],["T_STRING","addIdFilter",198],"(",["T_VARIABLE","$this",198],["T_OBJECT_OPERATOR","->",198],["T_STRING","_productIds",198],")",["T_WHITESPACE","\n            ",198],["T_OBJECT_OPERATOR","->",199],["T_STRING","addAttributeToSelect",199],"(",["T_VARIABLE","$attributes",199],")",["T_WHITESPACE","\n            ",199],["T_OBJECT_OPERATOR","->",200],["T_STRING","addOptionsToResult",200],"(",")",["T_WHITESPACE","\n            ",200],["T_OBJECT_OPERATOR","->",201],["T_STRING","addUrlRewrite",201],"(",")",";",["T_WHITESPACE","\n\n        ",201],["T_IF","if",203],["T_WHITESPACE"," ",203],"(",["T_VARIABLE","$this",203],["T_OBJECT_OPERATOR","->",203],["T_STRING","_productSalable",203],")",["T_WHITESPACE"," ",203],"{",["T_WHITESPACE","\n            ",203],["T_VARIABLE","$productCollection",204],["T_WHITESPACE"," ",204],"=",["T_WHITESPACE"," ",204],["T_STRING","Mage",204],["T_DOUBLE_COLON","::",204],["T_STRING","helper",204],"(",["T_CONSTANT_ENCAPSED_STRING","'adminhtml\/sales'",204],")",["T_OBJECT_OPERATOR","->",204],["T_STRING","applySalableProductTypesFilter",204],"(",["T_VARIABLE","$productCollection",204],")",";",["T_WHITESPACE","\n        ",204],"}",["T_WHITESPACE","\n\n        ",205],["T_STRING","Mage",207],["T_DOUBLE_COLON","::",207],["T_STRING","dispatchEvent",207],"(",["T_CONSTANT_ENCAPSED_STRING","'wishlist_item_collection_products_after_load'",207],",",["T_WHITESPACE"," ",207],["T_ARRAY","array",207],"(",["T_WHITESPACE","\n            ",207],["T_CONSTANT_ENCAPSED_STRING","'product_collection'",208],["T_WHITESPACE"," ",208],["T_DOUBLE_ARROW","=>",208],["T_WHITESPACE"," ",208],["T_VARIABLE","$productCollection",208],["T_WHITESPACE","\n        ",208],")",")",";",["T_WHITESPACE","\n\n        ",209],["T_VARIABLE","$checkInStock",211],["T_WHITESPACE"," ",211],"=",["T_WHITESPACE"," ",211],["T_VARIABLE","$this",211],["T_OBJECT_OPERATOR","->",211],["T_STRING","_productInStock",211],["T_WHITESPACE"," ",211],["T_BOOLEAN_AND","&&",211],["T_WHITESPACE"," ",211],"!",["T_STRING","Mage",211],["T_DOUBLE_COLON","::",211],["T_STRING","helper",211],"(",["T_CONSTANT_ENCAPSED_STRING","'cataloginventory'",211],")",["T_OBJECT_OPERATOR","->",211],["T_STRING","isShowOutOfStock",211],"(",")",";",["T_WHITESPACE","\n\n        ",211],["T_FOREACH","foreach",213],["T_WHITESPACE"," ",213],"(",["T_VARIABLE","$this",213],["T_WHITESPACE"," ",213],["T_AS","as",213],["T_WHITESPACE"," ",213],["T_VARIABLE","$item",213],")",["T_WHITESPACE"," ",213],"{",["T_WHITESPACE","\n            ",213],["T_VARIABLE","$product",214],["T_WHITESPACE"," ",214],"=",["T_WHITESPACE"," ",214],["T_VARIABLE","$productCollection",214],["T_OBJECT_OPERATOR","->",214],["T_STRING","getItemById",214],"(",["T_VARIABLE","$item",214],["T_OBJECT_OPERATOR","->",214],["T_STRING","getProductId",214],"(",")",")",";",["T_WHITESPACE","\n            ",214],["T_IF","if",215],["T_WHITESPACE"," ",215],"(",["T_VARIABLE","$product",215],")",["T_WHITESPACE"," ",215],"{",["T_WHITESPACE","\n                ",215],["T_IF","if",216],["T_WHITESPACE"," ",216],"(",["T_VARIABLE","$checkInStock",216],["T_WHITESPACE"," ",216],["T_BOOLEAN_AND","&&",216],["T_WHITESPACE"," ",216],"!",["T_VARIABLE","$product",216],["T_OBJECT_OPERATOR","->",216],["T_STRING","isInStock",216],"(",")",")",["T_WHITESPACE"," ",216],"{",["T_WHITESPACE","\n                    ",216],["T_VARIABLE","$this",217],["T_OBJECT_OPERATOR","->",217],["T_STRING","removeItemByKey",217],"(",["T_VARIABLE","$item",217],["T_OBJECT_OPERATOR","->",217],["T_STRING","getId",217],"(",")",")",";",["T_WHITESPACE","\n                ",217],"}",["T_WHITESPACE"," ",218],["T_ELSE","else",218],["T_WHITESPACE"," ",218],"{",["T_WHITESPACE","\n                    ",218],["T_VARIABLE","$product",219],["T_OBJECT_OPERATOR","->",219],["T_STRING","setCustomOptions",219],"(",["T_ARRAY","array",219],"(",")",")",";",["T_WHITESPACE","\n                    ",219],["T_VARIABLE","$item",220],["T_OBJECT_OPERATOR","->",220],["T_STRING","setProduct",220],"(",["T_VARIABLE","$product",220],")",";",["T_WHITESPACE","\n                    ",220],["T_VARIABLE","$item",221],["T_OBJECT_OPERATOR","->",221],["T_STRING","setProductName",221],"(",["T_VARIABLE","$product",221],["T_OBJECT_OPERATOR","->",221],["T_STRING","getName",221],"(",")",")",";",["T_WHITESPACE","\n                    ",221],["T_VARIABLE","$item",222],["T_OBJECT_OPERATOR","->",222],["T_STRING","setName",222],"(",["T_VARIABLE","$product",222],["T_OBJECT_OPERATOR","->",222],["T_STRING","getName",222],"(",")",")",";",["T_WHITESPACE","\n                    ",222],["T_VARIABLE","$item",223],["T_OBJECT_OPERATOR","->",223],["T_STRING","setPrice",223],"(",["T_VARIABLE","$product",223],["T_OBJECT_OPERATOR","->",223],["T_STRING","getPrice",223],"(",")",")",";",["T_WHITESPACE","\n                ",223],"}",["T_WHITESPACE","\n            ",224],"}",["T_WHITESPACE"," ",225],["T_ELSE","else",225],["T_WHITESPACE"," ",225],"{",["T_WHITESPACE","\n                ",225],["T_VARIABLE","$item",226],["T_OBJECT_OPERATOR","->",226],["T_STRING","isDeleted",226],"(",["T_STRING","true",226],")",";",["T_WHITESPACE","\n            ",226],"}",["T_WHITESPACE","\n        ",227],"}",["T_WHITESPACE","\n\n        ",228],["T_STRING","Varien_Profiler",230],["T_DOUBLE_COLON","::",230],["T_STRING","stop",230],"(",["T_CONSTANT_ENCAPSED_STRING","'WISHLIST:'",230],".",["T_METHOD_C","__METHOD__",230],")",";",["T_WHITESPACE","\n\n        ",230],["T_RETURN","return",232],["T_WHITESPACE"," ",232],["T_VARIABLE","$this",232],";",["T_WHITESPACE","\n    ",232],"}",["T_WHITESPACE","\n\n    ",233],["T_DOC_COMMENT","\/**\n     * Add filter by wishlist object\n     *\n     * @param Mage_Wishlist_Model_Wishlist $wishlist\n     * @return Mage_Wishlist_Model_Resource_Item_Collection\n     *\/",235],["T_WHITESPACE","\n    ",240],["T_PUBLIC","public",241],["T_WHITESPACE"," ",241],["T_FUNCTION","function",241],["T_WHITESPACE"," ",241],["T_STRING","addWishlistFilter",241],"(",["T_STRING","Mage_Wishlist_Model_Wishlist",241],["T_WHITESPACE"," ",241],["T_VARIABLE","$wishlist",241],")",["T_WHITESPACE","\n    ",241],"{",["T_WHITESPACE","\n        ",242],["T_VARIABLE","$this",243],["T_OBJECT_OPERATOR","->",243],["T_STRING","addFieldToFilter",243],"(",["T_CONSTANT_ENCAPSED_STRING","'wishlist_id'",243],",",["T_WHITESPACE"," ",243],["T_VARIABLE","$wishlist",243],["T_OBJECT_OPERATOR","->",243],["T_STRING","getId",243],"(",")",")",";",["T_WHITESPACE","\n        ",243],["T_RETURN","return",244],["T_WHITESPACE"," ",244],["T_VARIABLE","$this",244],";",["T_WHITESPACE","\n    ",244],"}",["T_WHITESPACE","\n\n    ",245],["T_DOC_COMMENT","\/**\n     * Add filtration by customer id\n     *\n     * @param int $customerId\n     * @return Mage_Wishlist_Model_Resource_Item_Collection\n     *\/",247],["T_WHITESPACE","\n    ",252],["T_PUBLIC","public",253],["T_WHITESPACE"," ",253],["T_FUNCTION","function",253],["T_WHITESPACE"," ",253],["T_STRING","addCustomerIdFilter",253],"(",["T_VARIABLE","$customerId",253],")",["T_WHITESPACE","\n    ",253],"{",["T_WHITESPACE","\n        ",254],["T_VARIABLE","$this",255],["T_OBJECT_OPERATOR","->",255],["T_STRING","getSelect",255],"(",")",["T_WHITESPACE","\n            ",255],["T_OBJECT_OPERATOR","->",256],["T_STRING","join",256],"(",["T_WHITESPACE","\n                ",256],["T_ARRAY","array",257],"(",["T_CONSTANT_ENCAPSED_STRING","'wishlist'",257],["T_WHITESPACE"," ",257],["T_DOUBLE_ARROW","=>",257],["T_WHITESPACE"," ",257],["T_VARIABLE","$this",257],["T_OBJECT_OPERATOR","->",257],["T_STRING","getTable",257],"(",["T_CONSTANT_ENCAPSED_STRING","'wishlist\/wishlist'",257],")",")",",",["T_WHITESPACE","\n                ",257],["T_CONSTANT_ENCAPSED_STRING","'main_table.wishlist_id = wishlist.wishlist_id'",258],",",["T_WHITESPACE","\n                ",258],["T_ARRAY","array",259],"(",")",["T_WHITESPACE","\n            ",259],")",["T_WHITESPACE","\n            ",260],["T_OBJECT_OPERATOR","->",261],["T_STRING","where",261],"(",["T_CONSTANT_ENCAPSED_STRING","'wishlist.customer_id = ?'",261],",",["T_WHITESPACE"," ",261],["T_VARIABLE","$customerId",261],")",";",["T_WHITESPACE","\n        ",261],["T_RETURN","return",262],["T_WHITESPACE"," ",262],["T_VARIABLE","$this",262],";",["T_WHITESPACE","\n    ",262],"}",["T_WHITESPACE","\n\n    ",263],["T_DOC_COMMENT","\/**\n     * Add filter by shared stores\n     *\n     * @param array $storeIds\n     *\n     * @return Mage_Wishlist_Model_Resource_Item_Collection\n     *\/",265],["T_WHITESPACE","\n    ",271],["T_PUBLIC","public",272],["T_WHITESPACE"," ",272],["T_FUNCTION","function",272],["T_WHITESPACE"," ",272],["T_STRING","addStoreFilter",272],"(",["T_VARIABLE","$storeIds",272],["T_WHITESPACE"," ",272],"=",["T_WHITESPACE"," ",272],["T_ARRAY","array",272],"(",")",")",["T_WHITESPACE","\n    ",272],"{",["T_WHITESPACE","\n        ",273],["T_IF","if",274],["T_WHITESPACE"," ",274],"(","!",["T_STRING","is_array",274],"(",["T_VARIABLE","$storeIds",274],")",")",["T_WHITESPACE"," ",274],"{",["T_WHITESPACE","\n            ",274],["T_VARIABLE","$storeIds",275],["T_WHITESPACE"," ",275],"=",["T_WHITESPACE"," ",275],["T_ARRAY","array",275],"(",["T_VARIABLE","$storeIds",275],")",";",["T_WHITESPACE","\n        ",275],"}",["T_WHITESPACE","\n        ",276],["T_VARIABLE","$this",277],["T_OBJECT_OPERATOR","->",277],["T_STRING","_storeIds",277],["T_WHITESPACE"," ",277],"=",["T_WHITESPACE"," ",277],["T_VARIABLE","$storeIds",277],";",["T_WHITESPACE","\n        ",277],["T_VARIABLE","$this",278],["T_OBJECT_OPERATOR","->",278],["T_STRING","addFieldToFilter",278],"(",["T_CONSTANT_ENCAPSED_STRING","'store_id'",278],",",["T_WHITESPACE"," ",278],["T_ARRAY","array",278],"(",["T_CONSTANT_ENCAPSED_STRING","'in'",278],["T_WHITESPACE"," ",278],["T_DOUBLE_ARROW","=>",278],["T_WHITESPACE"," ",278],["T_VARIABLE","$this",278],["T_OBJECT_OPERATOR","->",278],["T_STRING","_storeIds",278],")",")",";",["T_WHITESPACE","\n\n        ",278],["T_RETURN","return",280],["T_WHITESPACE"," ",280],["T_VARIABLE","$this",280],";",["T_WHITESPACE","\n    ",280],"}",["T_WHITESPACE","\n\n    ",281],["T_DOC_COMMENT","\/**\n     * Add items store data to collection\n     *\n     * @return Mage_Wishlist_Model_Resource_Item_Collection\n     *\/",283],["T_WHITESPACE","\n    ",287],["T_PUBLIC","public",288],["T_WHITESPACE"," ",288],["T_FUNCTION","function",288],["T_WHITESPACE"," ",288],["T_STRING","addStoreData",288],"(",")",["T_WHITESPACE","\n    ",288],"{",["T_WHITESPACE","\n        ",289],["T_VARIABLE","$storeTable",290],["T_WHITESPACE"," ",290],"=",["T_WHITESPACE"," ",290],["T_STRING","Mage",290],["T_DOUBLE_COLON","::",290],["T_STRING","getSingleton",290],"(",["T_CONSTANT_ENCAPSED_STRING","'core\/resource'",290],")",["T_OBJECT_OPERATOR","->",290],["T_STRING","getTableName",290],"(",["T_CONSTANT_ENCAPSED_STRING","'core\/store'",290],")",";",["T_WHITESPACE","\n        ",290],["T_VARIABLE","$this",291],["T_OBJECT_OPERATOR","->",291],["T_STRING","getSelect",291],"(",")",["T_OBJECT_OPERATOR","->",291],["T_STRING","join",291],"(",["T_ARRAY","array",291],"(",["T_CONSTANT_ENCAPSED_STRING","'store'",291],["T_DOUBLE_ARROW","=>",291],["T_VARIABLE","$storeTable",291],")",",",["T_WHITESPACE"," ",291],["T_CONSTANT_ENCAPSED_STRING","'main_table.store_id=store.store_id'",291],",",["T_WHITESPACE"," ",291],["T_ARRAY","array",291],"(",["T_WHITESPACE","\n            ",291],["T_CONSTANT_ENCAPSED_STRING","'store_name'",292],["T_DOUBLE_ARROW","=>",292],["T_CONSTANT_ENCAPSED_STRING","'name'",292],",",["T_WHITESPACE","\n            ",292],["T_CONSTANT_ENCAPSED_STRING","'item_store_id'",293],["T_WHITESPACE"," ",293],["T_DOUBLE_ARROW","=>",293],["T_WHITESPACE"," ",293],["T_CONSTANT_ENCAPSED_STRING","'store_id'",293],["T_WHITESPACE","\n        ",293],")",")",";",["T_WHITESPACE","\n        ",294],["T_RETURN","return",295],["T_WHITESPACE"," ",295],["T_VARIABLE","$this",295],";",["T_WHITESPACE","\n    ",295],"}",["T_WHITESPACE","\n\n    ",296],["T_DOC_COMMENT","\/**\n     * Add wishlist sort order\n     *\n     * @deprecated after 1.6.0.0-rc2\n     * @see Varien_Data_Collection_Db::setOrder() is used instead\n     *\n     * @param string $attribute\n     * @param string $dir\n     * @return Mage_Wishlist_Model_Resource_Item_Collection\n     *\/",298],["T_WHITESPACE","\n    ",307],["T_PUBLIC","public",308],["T_WHITESPACE"," ",308],["T_FUNCTION","function",308],["T_WHITESPACE"," ",308],["T_STRING","addWishListSortOrder",308],"(",["T_VARIABLE","$attribute",308],["T_WHITESPACE"," ",308],"=",["T_WHITESPACE"," ",308],["T_CONSTANT_ENCAPSED_STRING","'added_at'",308],",",["T_WHITESPACE"," ",308],["T_VARIABLE","$dir",308],["T_WHITESPACE"," ",308],"=",["T_WHITESPACE"," ",308],["T_CONSTANT_ENCAPSED_STRING","'desc'",308],")",["T_WHITESPACE","\n    ",308],"{",["T_WHITESPACE","\n        ",309],["T_VARIABLE","$this",310],["T_OBJECT_OPERATOR","->",310],["T_STRING","setOrder",310],"(",["T_VARIABLE","$attribute",310],",",["T_WHITESPACE"," ",310],["T_VARIABLE","$dir",310],")",";",["T_WHITESPACE","\n        ",310],["T_RETURN","return",311],["T_WHITESPACE"," ",311],["T_VARIABLE","$this",311],";",["T_WHITESPACE","\n    ",311],"}",["T_WHITESPACE","\n\n    ",312],["T_DOC_COMMENT","\/**\n     * Reset sort order\n     *\n     * @return Mage_Wishlist_Model_Resource_Item_Collection\n     *\/",314],["T_WHITESPACE","\n    ",318],["T_PUBLIC","public",319],["T_WHITESPACE"," ",319],["T_FUNCTION","function",319],["T_WHITESPACE"," ",319],["T_STRING","resetSortOrder",319],"(",")",["T_WHITESPACE","\n    ",319],"{",["T_WHITESPACE","\n        ",320],["T_VARIABLE","$this",321],["T_OBJECT_OPERATOR","->",321],["T_STRING","getSelect",321],"(",")",["T_OBJECT_OPERATOR","->",321],["T_STRING","reset",321],"(",["T_STRING","Zend_Db_Select",321],["T_DOUBLE_COLON","::",321],["T_STRING","ORDER",321],")",";",["T_WHITESPACE","\n        ",321],["T_RETURN","return",322],["T_WHITESPACE"," ",322],["T_VARIABLE","$this",322],";",["T_WHITESPACE","\n    ",322],"}",["T_WHITESPACE","\n\n    ",323],["T_DOC_COMMENT","\/**\n     * Set product Visibility Filter to product collection flag\n     *\n     * @param bool $flag\n     * @return Mage_Wishlist_Model_Resource_Item_Collection\n     *\/",325],["T_WHITESPACE","\n    ",330],["T_PUBLIC","public",331],["T_WHITESPACE"," ",331],["T_FUNCTION","function",331],["T_WHITESPACE"," ",331],["T_STRING","setVisibilityFilter",331],"(",["T_VARIABLE","$flag",331],["T_WHITESPACE"," ",331],"=",["T_WHITESPACE"," ",331],["T_STRING","true",331],")",["T_WHITESPACE","\n    ",331],"{",["T_WHITESPACE","\n        ",332],["T_VARIABLE","$this",333],["T_OBJECT_OPERATOR","->",333],["T_STRING","_productVisible",333],["T_WHITESPACE"," ",333],"=",["T_WHITESPACE"," ",333],["T_BOOL_CAST","(bool)",333],["T_VARIABLE","$flag",333],";",["T_WHITESPACE","\n        ",333],["T_RETURN","return",334],["T_WHITESPACE"," ",334],["T_VARIABLE","$this",334],";",["T_WHITESPACE","\n    ",334],"}",["T_WHITESPACE","\n\n    ",335],["T_DOC_COMMENT","\/**\n     * Set Salable Filter.\n     * This filter apply Salable Product Types Filter to product collection.\n     *\n     * @param bool $flag\n     * @return Mage_Wishlist_Model_Resource_Item_Collection\n     *\/",337],["T_WHITESPACE","\n    ",343],["T_PUBLIC","public",344],["T_WHITESPACE"," ",344],["T_FUNCTION","function",344],["T_WHITESPACE"," ",344],["T_STRING","setSalableFilter",344],"(",["T_VARIABLE","$flag",344],["T_WHITESPACE"," ",344],"=",["T_WHITESPACE"," ",344],["T_STRING","true",344],")",["T_WHITESPACE","\n    ",344],"{",["T_WHITESPACE","\n        ",345],["T_VARIABLE","$this",346],["T_OBJECT_OPERATOR","->",346],["T_STRING","_productSalable",346],["T_WHITESPACE"," ",346],"=",["T_WHITESPACE"," ",346],["T_BOOL_CAST","(bool)",346],["T_VARIABLE","$flag",346],";",["T_WHITESPACE","\n        ",346],["T_RETURN","return",347],["T_WHITESPACE"," ",347],["T_VARIABLE","$this",347],";",["T_WHITESPACE","\n    ",347],"}",["T_WHITESPACE","\n\n    ",348],["T_DOC_COMMENT","\/**\n     * Set In Stock Filter.\n     * This filter remove items with no salable product.\n     *\n     * @param bool $flag\n     * @return Mage_Wishlist_Model_Resource_Item_Collection\n     *\/",350],["T_WHITESPACE","\n    ",356],["T_PUBLIC","public",357],["T_WHITESPACE"," ",357],["T_FUNCTION","function",357],["T_WHITESPACE"," ",357],["T_STRING","setInStockFilter",357],"(",["T_VARIABLE","$flag",357],["T_WHITESPACE"," ",357],"=",["T_WHITESPACE"," ",357],["T_STRING","true",357],")",["T_WHITESPACE","\n    ",357],"{",["T_WHITESPACE","\n        ",358],["T_VARIABLE","$this",359],["T_OBJECT_OPERATOR","->",359],["T_STRING","_productInStock",359],["T_WHITESPACE"," ",359],"=",["T_WHITESPACE"," ",359],["T_BOOL_CAST","(bool)",359],["T_VARIABLE","$flag",359],";",["T_WHITESPACE","\n        ",359],["T_RETURN","return",360],["T_WHITESPACE"," ",360],["T_VARIABLE","$this",360],";",["T_WHITESPACE","\n    ",360],"}",["T_WHITESPACE","\n\n    ",361],["T_DOC_COMMENT","\/**\n     * Set add days in whishlist\n     *\n     * This method appears in 1.5.0.0 in deprecated state, because:\n     * - we need it to make wishlist item collection interface as much as possible compatible with old\n     *   wishlist product collection\n     * - this method is useless because we can calculate days in php, and don't use MySQL for it\n     *\n     * @deprecated after 1.4.2.0\n     * @return Mage_Wishlist_Model_Resource_Item_Collection\n     *\/",363],["T_WHITESPACE","\n    ",373],["T_PUBLIC","public",374],["T_WHITESPACE"," ",374],["T_FUNCTION","function",374],["T_WHITESPACE"," ",374],["T_STRING","addDaysInWishlist",374],"(",")",["T_WHITESPACE","\n    ",374],"{",["T_WHITESPACE","\n        ",375],["T_VARIABLE","$this",376],["T_OBJECT_OPERATOR","->",376],["T_STRING","_addDaysInWishlist",376],["T_WHITESPACE"," ",376],"=",["T_WHITESPACE"," ",376],["T_STRING","true",376],";",["T_WHITESPACE","\n\n        ",376],["T_VARIABLE","$adapter",378],["T_WHITESPACE"," ",378],"=",["T_WHITESPACE"," ",378],["T_VARIABLE","$this",378],["T_OBJECT_OPERATOR","->",378],["T_STRING","getConnection",378],"(",")",";",["T_WHITESPACE","\n        ",378],["T_VARIABLE","$dateModel",379],["T_WHITESPACE"," ",379],"=",["T_WHITESPACE"," ",379],["T_STRING","Mage",379],["T_DOUBLE_COLON","::",379],["T_STRING","getSingleton",379],"(",["T_CONSTANT_ENCAPSED_STRING","'core\/date'",379],")",";",["T_WHITESPACE","\n        ",379],["T_VARIABLE","$resHelper",380],["T_WHITESPACE"," ",380],"=",["T_WHITESPACE"," ",380],["T_STRING","Mage",380],["T_DOUBLE_COLON","::",380],["T_STRING","getResourceHelper",380],"(",["T_CONSTANT_ENCAPSED_STRING","'core'",380],")",";",["T_WHITESPACE","\n\n        ",380],["T_VARIABLE","$offsetFromDb",382],["T_WHITESPACE"," ",382],"=",["T_WHITESPACE"," ",382],["T_INT_CAST","(int)",382],["T_WHITESPACE"," ",382],["T_VARIABLE","$dateModel",382],["T_OBJECT_OPERATOR","->",382],["T_STRING","getGmtOffset",382],"(",")",";",["T_WHITESPACE","\n        ",382],["T_VARIABLE","$startDate",383],["T_WHITESPACE"," ",383],"=",["T_WHITESPACE"," ",383],["T_VARIABLE","$adapter",383],["T_OBJECT_OPERATOR","->",383],["T_STRING","getDateAddSql",383],"(",["T_CONSTANT_ENCAPSED_STRING","'added_at'",383],",",["T_WHITESPACE"," ",383],["T_VARIABLE","$offsetFromDb",383],",",["T_WHITESPACE"," ",383],["T_STRING","Varien_Db_Adapter_Interface",383],["T_DOUBLE_COLON","::",383],["T_STRING","INTERVAL_SECOND",383],")",";",["T_WHITESPACE","\n\n        ",383],["T_VARIABLE","$nowDate",385],["T_WHITESPACE"," ",385],"=",["T_WHITESPACE"," ",385],["T_VARIABLE","$dateModel",385],["T_OBJECT_OPERATOR","->",385],["T_STRING","date",385],"(",")",";",["T_WHITESPACE","\n        ",385],["T_VARIABLE","$dateDiff",386],["T_WHITESPACE"," ",386],"=",["T_WHITESPACE"," ",386],["T_VARIABLE","$resHelper",386],["T_OBJECT_OPERATOR","->",386],["T_STRING","getDateDiff",386],"(",["T_VARIABLE","$startDate",386],",",["T_WHITESPACE"," ",386],["T_VARIABLE","$adapter",386],["T_OBJECT_OPERATOR","->",386],["T_STRING","formatDate",386],"(",["T_VARIABLE","$nowDate",386],")",")",";",["T_WHITESPACE","\n\n        ",386],["T_VARIABLE","$this",388],["T_OBJECT_OPERATOR","->",388],["T_STRING","getSelect",388],"(",")",["T_OBJECT_OPERATOR","->",388],["T_STRING","columns",388],"(",["T_ARRAY","array",388],"(",["T_CONSTANT_ENCAPSED_STRING","'days_in_wishlist'",388],["T_WHITESPACE"," ",388],["T_DOUBLE_ARROW","=>",388],["T_WHITESPACE"," ",388],["T_VARIABLE","$dateDiff",388],")",")",";",["T_WHITESPACE","\n        ",388],["T_RETURN","return",389],["T_WHITESPACE"," ",389],["T_VARIABLE","$this",389],";",["T_WHITESPACE","\n    ",389],"}",["T_WHITESPACE","\n\n    ",390],["T_DOC_COMMENT","\/**\n     * Adds filter on days in wishlist\n     *\n     * $constraints may contain 'from' and 'to' indexes with number of days to look for items\n     *\n     * @param array $constraints\n     * @return Mage_Wishlist_Model_Resource_Item_Collection\n     *\/",392],["T_WHITESPACE","\n    ",399],["T_PUBLIC","public",400],["T_WHITESPACE"," ",400],["T_FUNCTION","function",400],["T_WHITESPACE"," ",400],["T_STRING","addDaysFilter",400],"(",["T_VARIABLE","$constraints",400],")",["T_WHITESPACE","\n    ",400],"{",["T_WHITESPACE","\n        ",401],["T_IF","if",402],["T_WHITESPACE"," ",402],"(","!",["T_STRING","is_array",402],"(",["T_VARIABLE","$constraints",402],")",")",["T_WHITESPACE"," ",402],"{",["T_WHITESPACE","\n            ",402],["T_RETURN","return",403],["T_WHITESPACE"," ",403],["T_VARIABLE","$this",403],";",["T_WHITESPACE","\n        ",403],"}",["T_WHITESPACE","\n\n        ",404],["T_VARIABLE","$filter",406],["T_WHITESPACE"," ",406],"=",["T_WHITESPACE"," ",406],["T_ARRAY","array",406],"(",")",";",["T_WHITESPACE","\n\n        ",406],["T_VARIABLE","$now",408],["T_WHITESPACE"," ",408],"=",["T_WHITESPACE"," ",408],["T_STRING","Mage",408],["T_DOUBLE_COLON","::",408],["T_STRING","getSingleton",408],"(",["T_CONSTANT_ENCAPSED_STRING","'core\/date'",408],")",["T_OBJECT_OPERATOR","->",408],["T_STRING","date",408],"(",")",";",["T_WHITESPACE","\n        ",408],["T_VARIABLE","$gmtOffset",409],["T_WHITESPACE"," ",409],"=",["T_WHITESPACE"," ",409],["T_INT_CAST","(int)",409],["T_WHITESPACE"," ",409],["T_STRING","Mage",409],["T_DOUBLE_COLON","::",409],["T_STRING","getSingleton",409],"(",["T_CONSTANT_ENCAPSED_STRING","'core\/date'",409],")",["T_OBJECT_OPERATOR","->",409],["T_STRING","getGmtOffset",409],"(",")",";",["T_WHITESPACE","\n        ",409],["T_IF","if",410],["T_WHITESPACE"," ",410],"(",["T_ISSET","isset",410],"(",["T_VARIABLE","$constraints",410],"[",["T_CONSTANT_ENCAPSED_STRING","'from'",410],"]",")",")",["T_WHITESPACE"," ",410],"{",["T_WHITESPACE","\n            ",410],["T_VARIABLE","$lastDay",411],["T_WHITESPACE"," ",411],"=",["T_WHITESPACE"," ",411],["T_NEW","new",411],["T_WHITESPACE"," ",411],["T_STRING","Zend_Date",411],"(",["T_VARIABLE","$now",411],",",["T_WHITESPACE"," ",411],["T_STRING","Varien_Date",411],["T_DOUBLE_COLON","::",411],["T_STRING","DATETIME_INTERNAL_FORMAT",411],")",";",["T_WHITESPACE","\n            ",411],["T_VARIABLE","$lastDay",412],["T_OBJECT_OPERATOR","->",412],["T_STRING","subSecond",412],"(",["T_VARIABLE","$gmtOffset",412],")",["T_WHITESPACE","\n                ",412],["T_OBJECT_OPERATOR","->",413],["T_STRING","subDay",413],"(",["T_VARIABLE","$constraints",413],"[",["T_CONSTANT_ENCAPSED_STRING","'from'",413],"]",["T_WHITESPACE"," ",413],"-",["T_WHITESPACE"," ",413],["T_LNUMBER","1",413],")",";",["T_WHITESPACE","\n            ",413],["T_VARIABLE","$filter",414],"[",["T_CONSTANT_ENCAPSED_STRING","'to'",414],"]",["T_WHITESPACE"," ",414],"=",["T_WHITESPACE"," ",414],["T_VARIABLE","$lastDay",414],";",["T_WHITESPACE","\n        ",414],"}",["T_WHITESPACE","\n\n        ",415],["T_IF","if",417],["T_WHITESPACE"," ",417],"(",["T_ISSET","isset",417],"(",["T_VARIABLE","$constraints",417],"[",["T_CONSTANT_ENCAPSED_STRING","'to'",417],"]",")",")",["T_WHITESPACE"," ",417],"{",["T_WHITESPACE","\n            ",417],["T_VARIABLE","$firstDay",418],["T_WHITESPACE"," ",418],"=",["T_WHITESPACE"," ",418],["T_NEW","new",418],["T_WHITESPACE"," ",418],["T_STRING","Zend_Date",418],"(",["T_VARIABLE","$now",418],",",["T_WHITESPACE"," ",418],["T_STRING","Varien_Date",418],["T_DOUBLE_COLON","::",418],["T_STRING","DATETIME_INTERNAL_FORMAT",418],")",";",["T_WHITESPACE","\n            ",418],["T_VARIABLE","$firstDay",419],["T_OBJECT_OPERATOR","->",419],["T_STRING","subSecond",419],"(",["T_VARIABLE","$gmtOffset",419],")",["T_WHITESPACE","\n                ",419],["T_OBJECT_OPERATOR","->",420],["T_STRING","subDay",420],"(",["T_VARIABLE","$constraints",420],"[",["T_CONSTANT_ENCAPSED_STRING","'to'",420],"]",")",";",["T_WHITESPACE","\n            ",420],["T_VARIABLE","$filter",421],"[",["T_CONSTANT_ENCAPSED_STRING","'from'",421],"]",["T_WHITESPACE"," ",421],"=",["T_WHITESPACE"," ",421],["T_VARIABLE","$firstDay",421],";",["T_WHITESPACE","\n        ",421],"}",["T_WHITESPACE","\n\n        ",422],["T_IF","if",424],["T_WHITESPACE"," ",424],"(",["T_VARIABLE","$filter",424],")",["T_WHITESPACE"," ",424],"{",["T_WHITESPACE","\n            ",424],["T_VARIABLE","$filter",425],"[",["T_CONSTANT_ENCAPSED_STRING","'datetime'",425],"]",["T_WHITESPACE"," ",425],"=",["T_WHITESPACE"," ",425],["T_STRING","true",425],";",["T_WHITESPACE","\n            ",425],["T_VARIABLE","$this",426],["T_OBJECT_OPERATOR","->",426],["T_STRING","addFieldToFilter",426],"(",["T_CONSTANT_ENCAPSED_STRING","'added_at'",426],",",["T_WHITESPACE"," ",426],["T_VARIABLE","$filter",426],")",";",["T_WHITESPACE","\n        ",426],"}",["T_WHITESPACE","\n\n        ",427],["T_RETURN","return",429],["T_WHITESPACE"," ",429],["T_VARIABLE","$this",429],";",["T_WHITESPACE","\n    ",429],"}",["T_WHITESPACE","\n\n    ",430],["T_DOC_COMMENT","\/**\n     * Joins product name attribute value to use it in WHERE and ORDER clauses\n     *\n     * @return Mage_Wishlist_Model_Resource_Item_Collection\n     *\/",432],["T_WHITESPACE","\n    ",436],["T_PROTECTED","protected",437],["T_WHITESPACE"," ",437],["T_FUNCTION","function",437],["T_WHITESPACE"," ",437],["T_STRING","_joinProductNameTable",437],"(",")",["T_WHITESPACE","\n    ",437],"{",["T_WHITESPACE","\n        ",438],["T_IF","if",439],["T_WHITESPACE"," ",439],"(","!",["T_VARIABLE","$this",439],["T_OBJECT_OPERATOR","->",439],["T_STRING","_isProductNameJoined",439],")",["T_WHITESPACE"," ",439],"{",["T_WHITESPACE","\n            ",439],["T_VARIABLE","$entityTypeId",440],["T_WHITESPACE"," ",440],"=",["T_WHITESPACE"," ",440],["T_STRING","Mage",440],["T_DOUBLE_COLON","::",440],["T_STRING","getResourceModel",440],"(",["T_CONSTANT_ENCAPSED_STRING","'catalog\/config'",440],")",["T_WHITESPACE","\n                    ",440],["T_OBJECT_OPERATOR","->",441],["T_STRING","getEntityTypeId",441],"(",")",";",["T_WHITESPACE","\n            ",441],["T_VARIABLE","$attribute",442],["T_WHITESPACE"," ",442],"=",["T_WHITESPACE"," ",442],["T_STRING","Mage",442],["T_DOUBLE_COLON","::",442],["T_STRING","getModel",442],"(",["T_CONSTANT_ENCAPSED_STRING","'catalog\/entity_attribute'",442],")",["T_WHITESPACE","\n                ",442],["T_OBJECT_OPERATOR","->",443],["T_STRING","loadByCode",443],"(",["T_VARIABLE","$entityTypeId",443],",",["T_WHITESPACE"," ",443],["T_CONSTANT_ENCAPSED_STRING","'name'",443],")",";",["T_WHITESPACE","\n\n            ",443],["T_VARIABLE","$storeId",445],["T_WHITESPACE"," ",445],"=",["T_WHITESPACE"," ",445],["T_STRING","Mage",445],["T_DOUBLE_COLON","::",445],["T_STRING","app",445],"(",")",["T_OBJECT_OPERATOR","->",445],["T_STRING","getStore",445],"(",")",["T_OBJECT_OPERATOR","->",445],["T_STRING","getId",445],"(",")",";",["T_WHITESPACE","\n\n            ",445],["T_VARIABLE","$this",447],["T_OBJECT_OPERATOR","->",447],["T_STRING","getSelect",447],"(",")",["T_WHITESPACE","\n                ",447],["T_OBJECT_OPERATOR","->",448],["T_STRING","join",448],"(",["T_WHITESPACE","\n                    ",448],["T_ARRAY","array",449],"(",["T_CONSTANT_ENCAPSED_STRING","'product_name_table'",449],["T_WHITESPACE"," ",449],["T_DOUBLE_ARROW","=>",449],["T_WHITESPACE"," ",449],["T_VARIABLE","$attribute",449],["T_OBJECT_OPERATOR","->",449],["T_STRING","getBackendTable",449],"(",")",")",",",["T_WHITESPACE","\n                    ",449],["T_CONSTANT_ENCAPSED_STRING","'product_name_table.entity_id=main_table.product_id'",450],["T_WHITESPACE"," ",450],".",["T_WHITESPACE","\n                        ",450],["T_CONSTANT_ENCAPSED_STRING","' AND product_name_table.store_id='",451],["T_WHITESPACE"," ",451],".",["T_WHITESPACE"," ",451],["T_VARIABLE","$storeId",451],["T_WHITESPACE"," ",451],".",["T_WHITESPACE","\n                        ",451],["T_CONSTANT_ENCAPSED_STRING","' AND product_name_table.attribute_id='",452],["T_WHITESPACE"," ",452],".",["T_WHITESPACE"," ",452],["T_VARIABLE","$attribute",452],["T_OBJECT_OPERATOR","->",452],["T_STRING","getId",452],"(",")",".",["T_WHITESPACE","\n                        ",452],["T_CONSTANT_ENCAPSED_STRING","' AND product_name_table.entity_type_id='",453],["T_WHITESPACE"," ",453],".",["T_WHITESPACE"," ",453],["T_VARIABLE","$entityTypeId",453],",",["T_WHITESPACE","\n                    ",453],["T_ARRAY","array",454],"(",")",["T_WHITESPACE","\n                ",454],")",";",["T_WHITESPACE","\n\n            ",455],["T_VARIABLE","$this",457],["T_OBJECT_OPERATOR","->",457],["T_STRING","_isProductNameJoined",457],["T_WHITESPACE"," ",457],"=",["T_WHITESPACE"," ",457],["T_STRING","true",457],";",["T_WHITESPACE","\n        ",457],"}",["T_WHITESPACE","\n        ",458],["T_RETURN","return",459],["T_WHITESPACE"," ",459],["T_VARIABLE","$this",459],";",["T_WHITESPACE","\n    ",459],"}",["T_WHITESPACE","\n\n    ",460],["T_DOC_COMMENT","\/**\n     * Adds filter on product name\n     *\n     * @param string $productName\n     * @return Mage_Wishlist_Model_Resource_Item_Collection\n     *\/",462],["T_WHITESPACE","\n    ",467],["T_PUBLIC","public",468],["T_WHITESPACE"," ",468],["T_FUNCTION","function",468],["T_WHITESPACE"," ",468],["T_STRING","addProductNameFilter",468],"(",["T_VARIABLE","$productName",468],")",["T_WHITESPACE","\n    ",468],"{",["T_WHITESPACE","\n        ",469],["T_VARIABLE","$this",470],["T_OBJECT_OPERATOR","->",470],["T_STRING","_joinProductNameTable",470],"(",")",";",["T_WHITESPACE","\n        ",470],["T_VARIABLE","$this",471],["T_OBJECT_OPERATOR","->",471],["T_STRING","getSelect",471],"(",")",["T_WHITESPACE","\n            ",471],["T_OBJECT_OPERATOR","->",472],["T_STRING","where",472],"(",["T_CONSTANT_ENCAPSED_STRING","'INSTR(product_name_table.value, ?)'",472],",",["T_WHITESPACE"," ",472],["T_VARIABLE","$productName",472],")",";",["T_WHITESPACE","\n\n        ",472],["T_RETURN","return",474],["T_WHITESPACE"," ",474],["T_VARIABLE","$this",474],";",["T_WHITESPACE","\n    ",474],"}",["T_WHITESPACE","\n\n    ",475],["T_DOC_COMMENT","\/**\n     * Sets ordering by product name\n     *\n     * @param string $dir\n     * @return Mage_Wishlist_Model_Resource_Item_Collection\n     *\/",477],["T_WHITESPACE","\n    ",482],["T_PUBLIC","public",483],["T_WHITESPACE"," ",483],["T_FUNCTION","function",483],["T_WHITESPACE"," ",483],["T_STRING","setOrderByProductName",483],"(",["T_VARIABLE","$dir",483],")",["T_WHITESPACE","\n    ",483],"{",["T_WHITESPACE","\n        ",484],["T_VARIABLE","$this",485],["T_OBJECT_OPERATOR","->",485],["T_STRING","_joinProductNameTable",485],"(",")",";",["T_WHITESPACE","\n        ",485],["T_VARIABLE","$this",486],["T_OBJECT_OPERATOR","->",486],["T_STRING","getSelect",486],"(",")",["T_OBJECT_OPERATOR","->",486],["T_STRING","order",486],"(",["T_CONSTANT_ENCAPSED_STRING","'product_name_table.value '",486],["T_WHITESPACE"," ",486],".",["T_WHITESPACE"," ",486],["T_VARIABLE","$dir",486],")",";",["T_WHITESPACE","\n        ",486],["T_RETURN","return",487],["T_WHITESPACE"," ",487],["T_VARIABLE","$this",487],";",["T_WHITESPACE","\n    ",487],"}",["T_WHITESPACE","\n\n    ",488],["T_DOC_COMMENT","\/**\n     * Get sum of items collection qty\n     *\n     * @return int\n     *\/",490],["T_WHITESPACE","\n    ",494],["T_PUBLIC","public",495],["T_WHITESPACE"," ",495],["T_FUNCTION","function",495],["T_WHITESPACE"," ",495],["T_STRING","getItemsQty",495],"(",")","{",["T_WHITESPACE","\n        ",495],["T_IF","if",496],["T_WHITESPACE"," ",496],"(",["T_STRING","is_null",496],"(",["T_VARIABLE","$this",496],["T_OBJECT_OPERATOR","->",496],["T_STRING","_itemsQty",496],")",")",["T_WHITESPACE"," ",496],"{",["T_WHITESPACE","\n            ",496],["T_VARIABLE","$this",497],["T_OBJECT_OPERATOR","->",497],["T_STRING","_itemsQty",497],["T_WHITESPACE"," ",497],"=",["T_WHITESPACE"," ",497],["T_LNUMBER","0",497],";",["T_WHITESPACE","\n            ",497],["T_FOREACH","foreach",498],["T_WHITESPACE"," ",498],"(",["T_VARIABLE","$this",498],["T_WHITESPACE"," ",498],["T_AS","as",498],["T_WHITESPACE"," ",498],["T_VARIABLE","$wishlistItem",498],")",["T_WHITESPACE"," ",498],"{",["T_WHITESPACE","\n                ",498],["T_VARIABLE","$qty",499],["T_WHITESPACE"," ",499],"=",["T_WHITESPACE"," ",499],["T_VARIABLE","$wishlistItem",499],["T_OBJECT_OPERATOR","->",499],["T_STRING","getQty",499],"(",")",";",["T_WHITESPACE","\n                ",499],["T_VARIABLE","$this",500],["T_OBJECT_OPERATOR","->",500],["T_STRING","_itemsQty",500],["T_WHITESPACE"," ",500],["T_PLUS_EQUAL","+=",500],["T_WHITESPACE"," ",500],"(",["T_VARIABLE","$qty",500],["T_WHITESPACE"," ",500],["T_IS_IDENTICAL","===",500],["T_WHITESPACE"," ",500],["T_LNUMBER","0",500],")",["T_WHITESPACE"," ",500],"?",["T_WHITESPACE"," ",500],["T_LNUMBER","1",500],["T_WHITESPACE"," ",500],":",["T_WHITESPACE"," ",500],["T_VARIABLE","$qty",500],";",["T_WHITESPACE","\n            ",500],"}",["T_WHITESPACE","\n        ",501],"}",["T_WHITESPACE","\n\n        ",502],["T_RETURN","return",504],["T_WHITESPACE"," ",504],["T_INT_CAST","(int)",504],["T_VARIABLE","$this",504],["T_OBJECT_OPERATOR","->",504],["T_STRING","_itemsQty",504],";",["T_WHITESPACE","\n    ",504],"}",["T_WHITESPACE","\n\n    ",505],["T_DOC_COMMENT","\/**\n     * Setter for $_websiteId\n     *\n     * @param int $websiteId\n     * @return Mage_Wishlist_Model_Resource_Item_Collection\n     *\/",507],["T_WHITESPACE","\n    ",512],["T_PUBLIC","public",513],["T_WHITESPACE"," ",513],["T_FUNCTION","function",513],["T_WHITESPACE"," ",513],["T_STRING","setWebsiteId",513],"(",["T_VARIABLE","$websiteId",513],")",["T_WHITESPACE","\n    ",513],"{",["T_WHITESPACE","\n        ",514],["T_VARIABLE","$this",515],["T_OBJECT_OPERATOR","->",515],["T_STRING","_websiteId",515],["T_WHITESPACE"," ",515],"=",["T_WHITESPACE"," ",515],["T_VARIABLE","$websiteId",515],";",["T_WHITESPACE","\n        ",515],["T_RETURN","return",516],["T_WHITESPACE"," ",516],["T_VARIABLE","$this",516],";",["T_WHITESPACE","\n    ",516],"}",["T_WHITESPACE","\n\n    ",517],["T_DOC_COMMENT","\/**\n     * Setter for $_customerGroupId\n     *\n     * @param int $customerGroupId\n     * @return Mage_Wishlist_Model_Resource_Item_Collection\n     *\/",519],["T_WHITESPACE","\n    ",524],["T_PUBLIC","public",525],["T_WHITESPACE"," ",525],["T_FUNCTION","function",525],["T_WHITESPACE"," ",525],["T_STRING","setCustomerGroupId",525],"(",["T_VARIABLE","$customerGroupId",525],")",["T_WHITESPACE","\n    ",525],"{",["T_WHITESPACE","\n        ",526],["T_VARIABLE","$this",527],["T_OBJECT_OPERATOR","->",527],["T_STRING","_customerGroupId",527],["T_WHITESPACE"," ",527],"=",["T_WHITESPACE"," ",527],["T_VARIABLE","$customerGroupId",527],";",["T_WHITESPACE","\n        ",527],["T_RETURN","return",528],["T_WHITESPACE"," ",528],["T_VARIABLE","$this",528],";",["T_WHITESPACE","\n    ",528],"}",["T_WHITESPACE","\n",529],"}",["T_WHITESPACE","\n",530]]
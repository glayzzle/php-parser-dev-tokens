[["T_OPEN_TAG","<?php\n",1],["T_DOC_COMMENT","\/**\n * Magento\n *\n * NOTICE OF LICENSE\n *\n * This source file is subject to the Open Software License (OSL 3.0)\n * that is bundled with this package in the file LICENSE.txt.\n * It is also available through the world-wide-web at this URL:\n * http:\/\/opensource.org\/licenses\/osl-3.0.php\n * If you did not receive a copy of the license and are unable to\n * obtain it through the world-wide-web, please send an email\n * to license@magento.com so we can send you a copy immediately.\n *\n * DISCLAIMER\n *\n * Do not edit or add to this file if you wish to upgrade Magento to newer\n * versions in the future. If you wish to customize Magento for your\n * needs please refer to http:\/\/www.magento.com for more information.\n *\n * @category    Mage\n * @package     Mage_Wishlist\n * @copyright  Copyright (c) 2006-2016 X.commerce, Inc. and affiliates (http:\/\/www.magento.com)\n * @license    http:\/\/opensource.org\/licenses\/osl-3.0.php  Open Software License (OSL 3.0)\n *\/",2],["T_WHITESPACE","\n\n\n",25],["T_DOC_COMMENT","\/**\n * Wishlist front controller\n *\n * @category    Mage\n * @package     Mage_Wishlist\n * @author      Magento Core Team <core@magentocommerce.com>\n *\/",28],["T_WHITESPACE","\n",34],["T_CLASS","class",35],["T_WHITESPACE"," ",35],["T_STRING","Mage_Wishlist_IndexController",35],["T_WHITESPACE"," ",35],["T_EXTENDS","extends",35],["T_WHITESPACE"," ",35],["T_STRING","Mage_Wishlist_Controller_Abstract",35],["T_WHITESPACE","\n",35],"{",["T_WHITESPACE","\n    ",36],["T_DOC_COMMENT","\/**\n     * Action list where need check enabled cookie\n     *\n     * @var array\n     *\/",37],["T_WHITESPACE","\n    ",41],["T_PROTECTED","protected",42],["T_WHITESPACE"," ",42],["T_VARIABLE","$_cookieCheckActions",42],["T_WHITESPACE"," ",42],"=",["T_WHITESPACE"," ",42],["T_ARRAY","array",42],"(",["T_CONSTANT_ENCAPSED_STRING","'add'",42],")",";",["T_WHITESPACE","\n\n    ",42],["T_DOC_COMMENT","\/**\n     * If true, authentication in this controller (wishlist) could be skipped\n     *\n     * @var bool\n     *\/",44],["T_WHITESPACE","\n    ",48],["T_PROTECTED","protected",49],["T_WHITESPACE"," ",49],["T_VARIABLE","$_skipAuthentication",49],["T_WHITESPACE"," ",49],"=",["T_WHITESPACE"," ",49],["T_STRING","false",49],";",["T_WHITESPACE","\n\n    ",49],["T_DOC_COMMENT","\/**\n     * Extend preDispatch\n     *\n     * @return Mage_Core_Controller_Front_Action|void\n     *\/",51],["T_WHITESPACE","\n    ",55],["T_PUBLIC","public",56],["T_WHITESPACE"," ",56],["T_FUNCTION","function",56],["T_WHITESPACE"," ",56],["T_STRING","preDispatch",56],"(",")",["T_WHITESPACE","\n    ",56],"{",["T_WHITESPACE","\n        ",57],["T_STRING","parent",58],["T_DOUBLE_COLON","::",58],["T_STRING","preDispatch",58],"(",")",";",["T_WHITESPACE","\n\n        ",58],["T_IF","if",60],["T_WHITESPACE"," ",60],"(","!",["T_VARIABLE","$this",60],["T_OBJECT_OPERATOR","->",60],["T_STRING","_skipAuthentication",60],["T_WHITESPACE"," ",60],["T_BOOLEAN_AND","&&",60],["T_WHITESPACE"," ",60],"!",["T_STRING","Mage",60],["T_DOUBLE_COLON","::",60],["T_STRING","getSingleton",60],"(",["T_CONSTANT_ENCAPSED_STRING","'customer\/session'",60],")",["T_OBJECT_OPERATOR","->",60],["T_STRING","authenticate",60],"(",["T_VARIABLE","$this",60],")",")",["T_WHITESPACE"," ",60],"{",["T_WHITESPACE","\n            ",60],["T_VARIABLE","$this",61],["T_OBJECT_OPERATOR","->",61],["T_STRING","setFlag",61],"(",["T_CONSTANT_ENCAPSED_STRING","''",61],",",["T_WHITESPACE"," ",61],["T_CONSTANT_ENCAPSED_STRING","'no-dispatch'",61],",",["T_WHITESPACE"," ",61],["T_STRING","true",61],")",";",["T_WHITESPACE","\n            ",61],["T_IF","if",62],["T_WHITESPACE"," ",62],"(","!",["T_STRING","Mage",62],["T_DOUBLE_COLON","::",62],["T_STRING","getSingleton",62],"(",["T_CONSTANT_ENCAPSED_STRING","'customer\/session'",62],")",["T_OBJECT_OPERATOR","->",62],["T_STRING","getBeforeWishlistUrl",62],"(",")",")",["T_WHITESPACE"," ",62],"{",["T_WHITESPACE","\n                ",62],["T_STRING","Mage",63],["T_DOUBLE_COLON","::",63],["T_STRING","getSingleton",63],"(",["T_CONSTANT_ENCAPSED_STRING","'customer\/session'",63],")",["T_OBJECT_OPERATOR","->",63],["T_STRING","setBeforeWishlistUrl",63],"(",["T_VARIABLE","$this",63],["T_OBJECT_OPERATOR","->",63],["T_STRING","_getRefererUrl",63],"(",")",")",";",["T_WHITESPACE","\n            ",63],"}",["T_WHITESPACE","\n            ",64],["T_STRING","Mage",65],["T_DOUBLE_COLON","::",65],["T_STRING","getSingleton",65],"(",["T_CONSTANT_ENCAPSED_STRING","'customer\/session'",65],")",["T_OBJECT_OPERATOR","->",65],["T_STRING","setBeforeWishlistRequest",65],"(",["T_VARIABLE","$this",65],["T_OBJECT_OPERATOR","->",65],["T_STRING","getRequest",65],"(",")",["T_OBJECT_OPERATOR","->",65],["T_STRING","getParams",65],"(",")",")",";",["T_WHITESPACE","\n        ",65],"}",["T_WHITESPACE","\n        ",66],["T_IF","if",67],["T_WHITESPACE"," ",67],"(","!",["T_STRING","Mage",67],["T_DOUBLE_COLON","::",67],["T_STRING","getStoreConfigFlag",67],"(",["T_CONSTANT_ENCAPSED_STRING","'wishlist\/general\/active'",67],")",")",["T_WHITESPACE"," ",67],"{",["T_WHITESPACE","\n            ",67],["T_VARIABLE","$this",68],["T_OBJECT_OPERATOR","->",68],["T_STRING","norouteAction",68],"(",")",";",["T_WHITESPACE","\n            ",68],["T_RETURN","return",69],";",["T_WHITESPACE","\n        ",69],"}",["T_WHITESPACE","\n    ",70],"}",["T_WHITESPACE","\n\n    ",71],["T_DOC_COMMENT","\/**\n     * Set skipping authentication in actions of this controller (wishlist)\n     *\n     * @return Mage_Wishlist_IndexController\n     *\/",73],["T_WHITESPACE","\n    ",77],["T_PUBLIC","public",78],["T_WHITESPACE"," ",78],["T_FUNCTION","function",78],["T_WHITESPACE"," ",78],["T_STRING","skipAuthentication",78],"(",")",["T_WHITESPACE","\n    ",78],"{",["T_WHITESPACE","\n        ",79],["T_VARIABLE","$this",80],["T_OBJECT_OPERATOR","->",80],["T_STRING","_skipAuthentication",80],["T_WHITESPACE"," ",80],"=",["T_WHITESPACE"," ",80],["T_STRING","true",80],";",["T_WHITESPACE","\n        ",80],["T_RETURN","return",81],["T_WHITESPACE"," ",81],["T_VARIABLE","$this",81],";",["T_WHITESPACE","\n    ",81],"}",["T_WHITESPACE","\n\n    ",82],["T_DOC_COMMENT","\/**\n     * Retrieve wishlist object\n     * @param int $wishlistId\n     * @return Mage_Wishlist_Model_Wishlist|bool\n     *\/",84],["T_WHITESPACE","\n    ",88],["T_PROTECTED","protected",89],["T_WHITESPACE"," ",89],["T_FUNCTION","function",89],["T_WHITESPACE"," ",89],["T_STRING","_getWishlist",89],"(",["T_VARIABLE","$wishlistId",89],["T_WHITESPACE"," ",89],"=",["T_WHITESPACE"," ",89],["T_STRING","null",89],")",["T_WHITESPACE","\n    ",89],"{",["T_WHITESPACE","\n        ",90],["T_VARIABLE","$wishlist",91],["T_WHITESPACE"," ",91],"=",["T_WHITESPACE"," ",91],["T_STRING","Mage",91],["T_DOUBLE_COLON","::",91],["T_STRING","registry",91],"(",["T_CONSTANT_ENCAPSED_STRING","'wishlist'",91],")",";",["T_WHITESPACE","\n        ",91],["T_IF","if",92],["T_WHITESPACE"," ",92],"(",["T_VARIABLE","$wishlist",92],")",["T_WHITESPACE"," ",92],"{",["T_WHITESPACE","\n            ",92],["T_RETURN","return",93],["T_WHITESPACE"," ",93],["T_VARIABLE","$wishlist",93],";",["T_WHITESPACE","\n        ",93],"}",["T_WHITESPACE","\n\n        ",94],["T_TRY","try",96],["T_WHITESPACE"," ",96],"{",["T_WHITESPACE","\n            ",96],["T_IF","if",97],["T_WHITESPACE"," ",97],"(","!",["T_VARIABLE","$wishlistId",97],")",["T_WHITESPACE"," ",97],"{",["T_WHITESPACE","\n                ",97],["T_VARIABLE","$wishlistId",98],["T_WHITESPACE"," ",98],"=",["T_WHITESPACE"," ",98],["T_VARIABLE","$this",98],["T_OBJECT_OPERATOR","->",98],["T_STRING","getRequest",98],"(",")",["T_OBJECT_OPERATOR","->",98],["T_STRING","getParam",98],"(",["T_CONSTANT_ENCAPSED_STRING","'wishlist_id'",98],")",";",["T_WHITESPACE","\n            ",98],"}",["T_WHITESPACE","\n            ",99],["T_VARIABLE","$customerId",100],["T_WHITESPACE"," ",100],"=",["T_WHITESPACE"," ",100],["T_STRING","Mage",100],["T_DOUBLE_COLON","::",100],["T_STRING","getSingleton",100],"(",["T_CONSTANT_ENCAPSED_STRING","'customer\/session'",100],")",["T_OBJECT_OPERATOR","->",100],["T_STRING","getCustomerId",100],"(",")",";",["T_WHITESPACE","\n            ",100],["T_COMMENT","\/* @var Mage_Wishlist_Model_Wishlist $wishlist *\/",101],["T_WHITESPACE","\n            ",101],["T_VARIABLE","$wishlist",102],["T_WHITESPACE"," ",102],"=",["T_WHITESPACE"," ",102],["T_STRING","Mage",102],["T_DOUBLE_COLON","::",102],["T_STRING","getModel",102],"(",["T_CONSTANT_ENCAPSED_STRING","'wishlist\/wishlist'",102],")",";",["T_WHITESPACE","\n            ",102],["T_IF","if",103],["T_WHITESPACE"," ",103],"(",["T_VARIABLE","$wishlistId",103],")",["T_WHITESPACE"," ",103],"{",["T_WHITESPACE","\n                ",103],["T_VARIABLE","$wishlist",104],["T_OBJECT_OPERATOR","->",104],["T_STRING","load",104],"(",["T_VARIABLE","$wishlistId",104],")",";",["T_WHITESPACE","\n            ",104],"}",["T_WHITESPACE"," ",105],["T_ELSE","else",105],["T_WHITESPACE"," ",105],"{",["T_WHITESPACE","\n                ",105],["T_VARIABLE","$wishlist",106],["T_OBJECT_OPERATOR","->",106],["T_STRING","loadByCustomer",106],"(",["T_VARIABLE","$customerId",106],",",["T_WHITESPACE"," ",106],["T_STRING","true",106],")",";",["T_WHITESPACE","\n            ",106],"}",["T_WHITESPACE","\n\n            ",107],["T_IF","if",109],["T_WHITESPACE"," ",109],"(","!",["T_VARIABLE","$wishlist",109],["T_OBJECT_OPERATOR","->",109],["T_STRING","getId",109],"(",")",["T_WHITESPACE"," ",109],["T_BOOLEAN_OR","||",109],["T_WHITESPACE"," ",109],["T_VARIABLE","$wishlist",109],["T_OBJECT_OPERATOR","->",109],["T_STRING","getCustomerId",109],"(",")",["T_WHITESPACE"," ",109],["T_IS_NOT_EQUAL","!=",109],["T_WHITESPACE"," ",109],["T_VARIABLE","$customerId",109],")",["T_WHITESPACE"," ",109],"{",["T_WHITESPACE","\n                ",109],["T_VARIABLE","$wishlist",110],["T_WHITESPACE"," ",110],"=",["T_WHITESPACE"," ",110],["T_STRING","null",110],";",["T_WHITESPACE","\n                ",110],["T_STRING","Mage",111],["T_DOUBLE_COLON","::",111],["T_STRING","throwException",111],"(",["T_WHITESPACE","\n                    ",111],["T_STRING","Mage",112],["T_DOUBLE_COLON","::",112],["T_STRING","helper",112],"(",["T_CONSTANT_ENCAPSED_STRING","'wishlist'",112],")",["T_OBJECT_OPERATOR","->",112],["T_STRING","__",112],"(",["T_CONSTANT_ENCAPSED_STRING","\"Requested wishlist doesn't exist\"",112],")",["T_WHITESPACE","\n                ",112],")",";",["T_WHITESPACE","\n            ",113],"}",["T_WHITESPACE","\n\n            ",114],["T_STRING","Mage",116],["T_DOUBLE_COLON","::",116],["T_STRING","register",116],"(",["T_CONSTANT_ENCAPSED_STRING","'wishlist'",116],",",["T_WHITESPACE"," ",116],["T_VARIABLE","$wishlist",116],")",";",["T_WHITESPACE","\n        ",116],"}",["T_WHITESPACE"," ",117],["T_CATCH","catch",117],["T_WHITESPACE"," ",117],"(",["T_STRING","Mage_Core_Exception",117],["T_WHITESPACE"," ",117],["T_VARIABLE","$e",117],")",["T_WHITESPACE"," ",117],"{",["T_WHITESPACE","\n            ",117],["T_STRING","Mage",118],["T_DOUBLE_COLON","::",118],["T_STRING","getSingleton",118],"(",["T_CONSTANT_ENCAPSED_STRING","'wishlist\/session'",118],")",["T_OBJECT_OPERATOR","->",118],["T_STRING","addError",118],"(",["T_VARIABLE","$e",118],["T_OBJECT_OPERATOR","->",118],["T_STRING","getMessage",118],"(",")",")",";",["T_WHITESPACE","\n            ",118],["T_RETURN","return",119],["T_WHITESPACE"," ",119],["T_STRING","false",119],";",["T_WHITESPACE","\n        ",119],"}",["T_WHITESPACE"," ",120],["T_CATCH","catch",120],["T_WHITESPACE"," ",120],"(",["T_STRING","Exception",120],["T_WHITESPACE"," ",120],["T_VARIABLE","$e",120],")",["T_WHITESPACE"," ",120],"{",["T_WHITESPACE","\n            ",120],["T_STRING","Mage",121],["T_DOUBLE_COLON","::",121],["T_STRING","getSingleton",121],"(",["T_CONSTANT_ENCAPSED_STRING","'wishlist\/session'",121],")",["T_OBJECT_OPERATOR","->",121],["T_STRING","addException",121],"(",["T_VARIABLE","$e",121],",",["T_WHITESPACE","\n                ",121],["T_STRING","Mage",122],["T_DOUBLE_COLON","::",122],["T_STRING","helper",122],"(",["T_CONSTANT_ENCAPSED_STRING","'wishlist'",122],")",["T_OBJECT_OPERATOR","->",122],["T_STRING","__",122],"(",["T_CONSTANT_ENCAPSED_STRING","'Wishlist could not be created.'",122],")",["T_WHITESPACE","\n            ",122],")",";",["T_WHITESPACE","\n            ",123],["T_RETURN","return",124],["T_WHITESPACE"," ",124],["T_STRING","false",124],";",["T_WHITESPACE","\n        ",124],"}",["T_WHITESPACE","\n\n        ",125],["T_RETURN","return",127],["T_WHITESPACE"," ",127],["T_VARIABLE","$wishlist",127],";",["T_WHITESPACE","\n    ",127],"}",["T_WHITESPACE","\n\n    ",128],["T_DOC_COMMENT","\/**\n     * Display customer wishlist\n     *\/",130],["T_WHITESPACE","\n    ",132],["T_PUBLIC","public",133],["T_WHITESPACE"," ",133],["T_FUNCTION","function",133],["T_WHITESPACE"," ",133],["T_STRING","indexAction",133],"(",")",["T_WHITESPACE","\n    ",133],"{",["T_WHITESPACE","\n        ",134],["T_IF","if",135],["T_WHITESPACE"," ",135],"(","!",["T_VARIABLE","$this",135],["T_OBJECT_OPERATOR","->",135],["T_STRING","_getWishlist",135],"(",")",")",["T_WHITESPACE"," ",135],"{",["T_WHITESPACE","\n            ",135],["T_RETURN","return",136],["T_WHITESPACE"," ",136],["T_VARIABLE","$this",136],["T_OBJECT_OPERATOR","->",136],["T_STRING","norouteAction",136],"(",")",";",["T_WHITESPACE","\n        ",136],"}",["T_WHITESPACE","\n        ",137],["T_VARIABLE","$this",138],["T_OBJECT_OPERATOR","->",138],["T_STRING","loadLayout",138],"(",")",";",["T_WHITESPACE","\n\n        ",138],["T_VARIABLE","$session",140],["T_WHITESPACE"," ",140],"=",["T_WHITESPACE"," ",140],["T_STRING","Mage",140],["T_DOUBLE_COLON","::",140],["T_STRING","getSingleton",140],"(",["T_CONSTANT_ENCAPSED_STRING","'customer\/session'",140],")",";",["T_WHITESPACE","\n        ",140],["T_VARIABLE","$block",141],["T_WHITESPACE","   ",141],"=",["T_WHITESPACE"," ",141],["T_VARIABLE","$this",141],["T_OBJECT_OPERATOR","->",141],["T_STRING","getLayout",141],"(",")",["T_OBJECT_OPERATOR","->",141],["T_STRING","getBlock",141],"(",["T_CONSTANT_ENCAPSED_STRING","'customer.wishlist'",141],")",";",["T_WHITESPACE","\n        ",141],["T_VARIABLE","$referer",142],["T_WHITESPACE"," ",142],"=",["T_WHITESPACE"," ",142],["T_VARIABLE","$session",142],["T_OBJECT_OPERATOR","->",142],["T_STRING","getAddActionReferer",142],"(",["T_STRING","true",142],")",";",["T_WHITESPACE","\n        ",142],["T_IF","if",143],["T_WHITESPACE"," ",143],"(",["T_VARIABLE","$block",143],")",["T_WHITESPACE"," ",143],"{",["T_WHITESPACE","\n            ",143],["T_VARIABLE","$block",144],["T_OBJECT_OPERATOR","->",144],["T_STRING","setRefererUrl",144],"(",["T_VARIABLE","$this",144],["T_OBJECT_OPERATOR","->",144],["T_STRING","_getRefererUrl",144],"(",")",")",";",["T_WHITESPACE","\n            ",144],["T_IF","if",145],["T_WHITESPACE"," ",145],"(",["T_VARIABLE","$referer",145],")",["T_WHITESPACE"," ",145],"{",["T_WHITESPACE","\n                ",145],["T_VARIABLE","$block",146],["T_OBJECT_OPERATOR","->",146],["T_STRING","setRefererUrl",146],"(",["T_VARIABLE","$referer",146],")",";",["T_WHITESPACE","\n            ",146],"}",["T_WHITESPACE","\n        ",147],"}",["T_WHITESPACE","\n\n        ",148],["T_VARIABLE","$this",150],["T_OBJECT_OPERATOR","->",150],["T_STRING","_initLayoutMessages",150],"(",["T_CONSTANT_ENCAPSED_STRING","'customer\/session'",150],")",";",["T_WHITESPACE","\n        ",150],["T_VARIABLE","$this",151],["T_OBJECT_OPERATOR","->",151],["T_STRING","_initLayoutMessages",151],"(",["T_CONSTANT_ENCAPSED_STRING","'checkout\/session'",151],")",";",["T_WHITESPACE","\n        ",151],["T_VARIABLE","$this",152],["T_OBJECT_OPERATOR","->",152],["T_STRING","_initLayoutMessages",152],"(",["T_CONSTANT_ENCAPSED_STRING","'catalog\/session'",152],")",";",["T_WHITESPACE","\n        ",152],["T_VARIABLE","$this",153],["T_OBJECT_OPERATOR","->",153],["T_STRING","_initLayoutMessages",153],"(",["T_CONSTANT_ENCAPSED_STRING","'wishlist\/session'",153],")",";",["T_WHITESPACE","\n\n        ",153],["T_VARIABLE","$this",155],["T_OBJECT_OPERATOR","->",155],["T_STRING","renderLayout",155],"(",")",";",["T_WHITESPACE","\n    ",155],"}",["T_WHITESPACE","\n\n    ",156],["T_DOC_COMMENT","\/**\n     * Adding new item\n     *\n     * @return Mage_Core_Controller_Varien_Action|void\n     *\/",158],["T_WHITESPACE","\n    ",162],["T_PUBLIC","public",163],["T_WHITESPACE"," ",163],["T_FUNCTION","function",163],["T_WHITESPACE"," ",163],["T_STRING","addAction",163],"(",")",["T_WHITESPACE","\n    ",163],"{",["T_WHITESPACE","\n        ",164],["T_IF","if",165],["T_WHITESPACE"," ",165],"(","!",["T_VARIABLE","$this",165],["T_OBJECT_OPERATOR","->",165],["T_STRING","_validateFormKey",165],"(",")",")",["T_WHITESPACE"," ",165],"{",["T_WHITESPACE","\n            ",165],["T_RETURN","return",166],["T_WHITESPACE"," ",166],["T_VARIABLE","$this",166],["T_OBJECT_OPERATOR","->",166],["T_STRING","_redirect",166],"(",["T_CONSTANT_ENCAPSED_STRING","'*\/*'",166],")",";",["T_WHITESPACE","\n        ",166],"}",["T_WHITESPACE","\n        ",167],["T_VARIABLE","$this",168],["T_OBJECT_OPERATOR","->",168],["T_STRING","_addItemToWishList",168],"(",")",";",["T_WHITESPACE","\n    ",168],"}",["T_WHITESPACE","\n\n    ",169],["T_DOC_COMMENT","\/**\n     * Add the item to wish list\n     *\n     * @return Mage_Core_Controller_Varien_Action|void\n     *\/",171],["T_WHITESPACE","\n    ",175],["T_PROTECTED","protected",176],["T_WHITESPACE"," ",176],["T_FUNCTION","function",176],["T_WHITESPACE"," ",176],["T_STRING","_addItemToWishList",176],"(",")",["T_WHITESPACE","\n    ",176],"{",["T_WHITESPACE","\n        ",177],["T_VARIABLE","$wishlist",178],["T_WHITESPACE"," ",178],"=",["T_WHITESPACE"," ",178],["T_VARIABLE","$this",178],["T_OBJECT_OPERATOR","->",178],["T_STRING","_getWishlist",178],"(",")",";",["T_WHITESPACE","\n        ",178],["T_IF","if",179],["T_WHITESPACE"," ",179],"(","!",["T_VARIABLE","$wishlist",179],")",["T_WHITESPACE"," ",179],"{",["T_WHITESPACE","\n            ",179],["T_RETURN","return",180],["T_WHITESPACE"," ",180],["T_VARIABLE","$this",180],["T_OBJECT_OPERATOR","->",180],["T_STRING","norouteAction",180],"(",")",";",["T_WHITESPACE","\n        ",180],"}",["T_WHITESPACE","\n\n        ",181],["T_VARIABLE","$session",183],["T_WHITESPACE"," ",183],"=",["T_WHITESPACE"," ",183],["T_STRING","Mage",183],["T_DOUBLE_COLON","::",183],["T_STRING","getSingleton",183],"(",["T_CONSTANT_ENCAPSED_STRING","'customer\/session'",183],")",";",["T_WHITESPACE","\n\n        ",183],["T_VARIABLE","$productId",185],["T_WHITESPACE"," ",185],"=",["T_WHITESPACE"," ",185],["T_INT_CAST","(int)",185],["T_VARIABLE","$this",185],["T_OBJECT_OPERATOR","->",185],["T_STRING","getRequest",185],"(",")",["T_OBJECT_OPERATOR","->",185],["T_STRING","getParam",185],"(",["T_CONSTANT_ENCAPSED_STRING","'product'",185],")",";",["T_WHITESPACE","\n        ",185],["T_IF","if",186],["T_WHITESPACE"," ",186],"(","!",["T_VARIABLE","$productId",186],")",["T_WHITESPACE"," ",186],"{",["T_WHITESPACE","\n            ",186],["T_VARIABLE","$this",187],["T_OBJECT_OPERATOR","->",187],["T_STRING","_redirect",187],"(",["T_CONSTANT_ENCAPSED_STRING","'*\/'",187],")",";",["T_WHITESPACE","\n            ",187],["T_RETURN","return",188],";",["T_WHITESPACE","\n        ",188],"}",["T_WHITESPACE","\n\n        ",189],["T_VARIABLE","$product",191],["T_WHITESPACE"," ",191],"=",["T_WHITESPACE"," ",191],["T_STRING","Mage",191],["T_DOUBLE_COLON","::",191],["T_STRING","getModel",191],"(",["T_CONSTANT_ENCAPSED_STRING","'catalog\/product'",191],")",["T_OBJECT_OPERATOR","->",191],["T_STRING","load",191],"(",["T_VARIABLE","$productId",191],")",";",["T_WHITESPACE","\n        ",191],["T_IF","if",192],["T_WHITESPACE"," ",192],"(","!",["T_VARIABLE","$product",192],["T_OBJECT_OPERATOR","->",192],["T_STRING","getId",192],"(",")",["T_WHITESPACE"," ",192],["T_BOOLEAN_OR","||",192],["T_WHITESPACE"," ",192],"!",["T_VARIABLE","$product",192],["T_OBJECT_OPERATOR","->",192],["T_STRING","isVisibleInCatalog",192],"(",")",")",["T_WHITESPACE"," ",192],"{",["T_WHITESPACE","\n            ",192],["T_VARIABLE","$session",193],["T_OBJECT_OPERATOR","->",193],["T_STRING","addError",193],"(",["T_VARIABLE","$this",193],["T_OBJECT_OPERATOR","->",193],["T_STRING","__",193],"(",["T_CONSTANT_ENCAPSED_STRING","'Cannot specify product.'",193],")",")",";",["T_WHITESPACE","\n            ",193],["T_VARIABLE","$this",194],["T_OBJECT_OPERATOR","->",194],["T_STRING","_redirect",194],"(",["T_CONSTANT_ENCAPSED_STRING","'*\/'",194],")",";",["T_WHITESPACE","\n            ",194],["T_RETURN","return",195],";",["T_WHITESPACE","\n        ",195],"}",["T_WHITESPACE","\n\n        ",196],["T_TRY","try",198],["T_WHITESPACE"," ",198],"{",["T_WHITESPACE","\n            ",198],["T_VARIABLE","$requestParams",199],["T_WHITESPACE"," ",199],"=",["T_WHITESPACE"," ",199],["T_VARIABLE","$this",199],["T_OBJECT_OPERATOR","->",199],["T_STRING","getRequest",199],"(",")",["T_OBJECT_OPERATOR","->",199],["T_STRING","getParams",199],"(",")",";",["T_WHITESPACE","\n            ",199],["T_IF","if",200],["T_WHITESPACE"," ",200],"(",["T_VARIABLE","$session",200],["T_OBJECT_OPERATOR","->",200],["T_STRING","getBeforeWishlistRequest",200],"(",")",")",["T_WHITESPACE"," ",200],"{",["T_WHITESPACE","\n                ",200],["T_VARIABLE","$requestParams",201],["T_WHITESPACE"," ",201],"=",["T_WHITESPACE"," ",201],["T_VARIABLE","$session",201],["T_OBJECT_OPERATOR","->",201],["T_STRING","getBeforeWishlistRequest",201],"(",")",";",["T_WHITESPACE","\n                ",201],["T_VARIABLE","$session",202],["T_OBJECT_OPERATOR","->",202],["T_STRING","unsBeforeWishlistRequest",202],"(",")",";",["T_WHITESPACE","\n            ",202],"}",["T_WHITESPACE","\n            ",203],["T_VARIABLE","$buyRequest",204],["T_WHITESPACE"," ",204],"=",["T_WHITESPACE"," ",204],["T_NEW","new",204],["T_WHITESPACE"," ",204],["T_STRING","Varien_Object",204],"(",["T_VARIABLE","$requestParams",204],")",";",["T_WHITESPACE","\n\n            ",204],["T_VARIABLE","$result",206],["T_WHITESPACE"," ",206],"=",["T_WHITESPACE"," ",206],["T_VARIABLE","$wishlist",206],["T_OBJECT_OPERATOR","->",206],["T_STRING","addNewItem",206],"(",["T_VARIABLE","$product",206],",",["T_WHITESPACE"," ",206],["T_VARIABLE","$buyRequest",206],")",";",["T_WHITESPACE","\n            ",206],["T_IF","if",207],["T_WHITESPACE"," ",207],"(",["T_STRING","is_string",207],"(",["T_VARIABLE","$result",207],")",")",["T_WHITESPACE"," ",207],"{",["T_WHITESPACE","\n                ",207],["T_STRING","Mage",208],["T_DOUBLE_COLON","::",208],["T_STRING","throwException",208],"(",["T_VARIABLE","$result",208],")",";",["T_WHITESPACE","\n            ",208],"}",["T_WHITESPACE","\n            ",209],["T_VARIABLE","$wishlist",210],["T_OBJECT_OPERATOR","->",210],["T_STRING","save",210],"(",")",";",["T_WHITESPACE","\n\n            ",210],["T_STRING","Mage",212],["T_DOUBLE_COLON","::",212],["T_STRING","dispatchEvent",212],"(",["T_WHITESPACE","\n                ",212],["T_CONSTANT_ENCAPSED_STRING","'wishlist_add_product'",213],",",["T_WHITESPACE","\n                ",213],["T_ARRAY","array",214],"(",["T_WHITESPACE","\n                    ",214],["T_CONSTANT_ENCAPSED_STRING","'wishlist'",215],["T_WHITESPACE"," ",215],["T_DOUBLE_ARROW","=>",215],["T_WHITESPACE"," ",215],["T_VARIABLE","$wishlist",215],",",["T_WHITESPACE","\n                    ",215],["T_CONSTANT_ENCAPSED_STRING","'product'",216],["T_WHITESPACE"," ",216],["T_DOUBLE_ARROW","=>",216],["T_WHITESPACE"," ",216],["T_VARIABLE","$product",216],",",["T_WHITESPACE","\n                    ",216],["T_CONSTANT_ENCAPSED_STRING","'item'",217],["T_WHITESPACE"," ",217],["T_DOUBLE_ARROW","=>",217],["T_WHITESPACE"," ",217],["T_VARIABLE","$result",217],["T_WHITESPACE","\n                ",217],")",["T_WHITESPACE","\n            ",218],")",";",["T_WHITESPACE","\n\n            ",219],["T_VARIABLE","$referer",221],["T_WHITESPACE"," ",221],"=",["T_WHITESPACE"," ",221],["T_VARIABLE","$session",221],["T_OBJECT_OPERATOR","->",221],["T_STRING","getBeforeWishlistUrl",221],"(",")",";",["T_WHITESPACE","\n            ",221],["T_IF","if",222],["T_WHITESPACE"," ",222],"(",["T_VARIABLE","$referer",222],")",["T_WHITESPACE"," ",222],"{",["T_WHITESPACE","\n                ",222],["T_VARIABLE","$session",223],["T_OBJECT_OPERATOR","->",223],["T_STRING","setBeforeWishlistUrl",223],"(",["T_STRING","null",223],")",";",["T_WHITESPACE","\n            ",223],"}",["T_WHITESPACE"," ",224],["T_ELSE","else",224],["T_WHITESPACE"," ",224],"{",["T_WHITESPACE","\n                ",224],["T_VARIABLE","$referer",225],["T_WHITESPACE"," ",225],"=",["T_WHITESPACE"," ",225],["T_VARIABLE","$this",225],["T_OBJECT_OPERATOR","->",225],["T_STRING","_getRefererUrl",225],"(",")",";",["T_WHITESPACE","\n            ",225],"}",["T_WHITESPACE","\n\n            ",226],["T_DOC_COMMENT","\/**\n             *  Set referer to avoid referring to the compare popup window\n             *\/",228],["T_WHITESPACE","\n            ",230],["T_VARIABLE","$session",231],["T_OBJECT_OPERATOR","->",231],["T_STRING","setAddActionReferer",231],"(",["T_VARIABLE","$referer",231],")",";",["T_WHITESPACE","\n\n            ",231],["T_STRING","Mage",233],["T_DOUBLE_COLON","::",233],["T_STRING","helper",233],"(",["T_CONSTANT_ENCAPSED_STRING","'wishlist'",233],")",["T_OBJECT_OPERATOR","->",233],["T_STRING","calculate",233],"(",")",";",["T_WHITESPACE","\n\n            ",233],["T_VARIABLE","$message",235],["T_WHITESPACE"," ",235],"=",["T_WHITESPACE"," ",235],["T_VARIABLE","$this",235],["T_OBJECT_OPERATOR","->",235],["T_STRING","__",235],"(",["T_CONSTANT_ENCAPSED_STRING","'%1$s has been added to your wishlist. Click <a href=\"%2$s\">here<\/a> to continue shopping.'",235],",",["T_WHITESPACE","\n                ",235],["T_VARIABLE","$product",236],["T_OBJECT_OPERATOR","->",236],["T_STRING","getName",236],"(",")",",",["T_WHITESPACE"," ",236],["T_STRING","Mage",236],["T_DOUBLE_COLON","::",236],["T_STRING","helper",236],"(",["T_CONSTANT_ENCAPSED_STRING","'core'",236],")",["T_OBJECT_OPERATOR","->",236],["T_STRING","escapeUrl",236],"(",["T_VARIABLE","$referer",236],")",")",";",["T_WHITESPACE","\n            ",236],["T_VARIABLE","$session",237],["T_OBJECT_OPERATOR","->",237],["T_STRING","addSuccess",237],"(",["T_VARIABLE","$message",237],")",";",["T_WHITESPACE","\n        ",237],"}",["T_WHITESPACE"," ",238],["T_CATCH","catch",238],["T_WHITESPACE"," ",238],"(",["T_STRING","Mage_Core_Exception",238],["T_WHITESPACE"," ",238],["T_VARIABLE","$e",238],")",["T_WHITESPACE"," ",238],"{",["T_WHITESPACE","\n            ",238],["T_VARIABLE","$session",239],["T_OBJECT_OPERATOR","->",239],["T_STRING","addError",239],"(",["T_VARIABLE","$this",239],["T_OBJECT_OPERATOR","->",239],["T_STRING","__",239],"(",["T_CONSTANT_ENCAPSED_STRING","'An error occurred while adding item to wishlist: %s'",239],",",["T_WHITESPACE"," ",239],["T_VARIABLE","$e",239],["T_OBJECT_OPERATOR","->",239],["T_STRING","getMessage",239],"(",")",")",")",";",["T_WHITESPACE","\n        ",239],"}",["T_WHITESPACE","\n        ",240],["T_CATCH","catch",241],["T_WHITESPACE"," ",241],"(",["T_STRING","Exception",241],["T_WHITESPACE"," ",241],["T_VARIABLE","$e",241],")",["T_WHITESPACE"," ",241],"{",["T_WHITESPACE","\n            ",241],["T_VARIABLE","$session",242],["T_OBJECT_OPERATOR","->",242],["T_STRING","addError",242],"(",["T_VARIABLE","$this",242],["T_OBJECT_OPERATOR","->",242],["T_STRING","__",242],"(",["T_CONSTANT_ENCAPSED_STRING","'An error occurred while adding item to wishlist.'",242],")",")",";",["T_WHITESPACE","\n        ",242],"}",["T_WHITESPACE","\n\n        ",243],["T_VARIABLE","$this",245],["T_OBJECT_OPERATOR","->",245],["T_STRING","_redirect",245],"(",["T_CONSTANT_ENCAPSED_STRING","'*'",245],",",["T_WHITESPACE"," ",245],["T_ARRAY","array",245],"(",["T_CONSTANT_ENCAPSED_STRING","'wishlist_id'",245],["T_WHITESPACE"," ",245],["T_DOUBLE_ARROW","=>",245],["T_WHITESPACE"," ",245],["T_VARIABLE","$wishlist",245],["T_OBJECT_OPERATOR","->",245],["T_STRING","getId",245],"(",")",")",")",";",["T_WHITESPACE","\n    ",245],"}",["T_WHITESPACE","\n\n    ",246],["T_DOC_COMMENT","\/**\n     * Action to reconfigure wishlist item\n     *\/",248],["T_WHITESPACE","\n    ",250],["T_PUBLIC","public",251],["T_WHITESPACE"," ",251],["T_FUNCTION","function",251],["T_WHITESPACE"," ",251],["T_STRING","configureAction",251],"(",")",["T_WHITESPACE","\n    ",251],"{",["T_WHITESPACE","\n        ",252],["T_VARIABLE","$id",253],["T_WHITESPACE"," ",253],"=",["T_WHITESPACE"," ",253],["T_INT_CAST","(int)",253],["T_WHITESPACE"," ",253],["T_VARIABLE","$this",253],["T_OBJECT_OPERATOR","->",253],["T_STRING","getRequest",253],"(",")",["T_OBJECT_OPERATOR","->",253],["T_STRING","getParam",253],"(",["T_CONSTANT_ENCAPSED_STRING","'id'",253],")",";",["T_WHITESPACE","\n        ",253],["T_TRY","try",254],["T_WHITESPACE"," ",254],"{",["T_WHITESPACE","\n            ",254],["T_COMMENT","\/* @var $item Mage_Wishlist_Model_Item *\/",255],["T_WHITESPACE","\n            ",255],["T_VARIABLE","$item",256],["T_WHITESPACE"," ",256],"=",["T_WHITESPACE"," ",256],["T_STRING","Mage",256],["T_DOUBLE_COLON","::",256],["T_STRING","getModel",256],"(",["T_CONSTANT_ENCAPSED_STRING","'wishlist\/item'",256],")",";",["T_WHITESPACE","\n            ",256],["T_VARIABLE","$item",257],["T_OBJECT_OPERATOR","->",257],["T_STRING","loadWithOptions",257],"(",["T_VARIABLE","$id",257],")",";",["T_WHITESPACE","\n            ",257],["T_IF","if",258],["T_WHITESPACE"," ",258],"(","!",["T_VARIABLE","$item",258],["T_OBJECT_OPERATOR","->",258],["T_STRING","getId",258],"(",")",")",["T_WHITESPACE"," ",258],"{",["T_WHITESPACE","\n                ",258],["T_STRING","Mage",259],["T_DOUBLE_COLON","::",259],["T_STRING","throwException",259],"(",["T_VARIABLE","$this",259],["T_OBJECT_OPERATOR","->",259],["T_STRING","__",259],"(",["T_CONSTANT_ENCAPSED_STRING","'Cannot load wishlist item'",259],")",")",";",["T_WHITESPACE","\n            ",259],"}",["T_WHITESPACE","\n            ",260],["T_VARIABLE","$wishlist",261],["T_WHITESPACE"," ",261],"=",["T_WHITESPACE"," ",261],["T_VARIABLE","$this",261],["T_OBJECT_OPERATOR","->",261],["T_STRING","_getWishlist",261],"(",["T_VARIABLE","$item",261],["T_OBJECT_OPERATOR","->",261],["T_STRING","getWishlistId",261],"(",")",")",";",["T_WHITESPACE","\n            ",261],["T_IF","if",262],["T_WHITESPACE"," ",262],"(","!",["T_VARIABLE","$wishlist",262],")",["T_WHITESPACE"," ",262],"{",["T_WHITESPACE","\n                ",262],["T_RETURN","return",263],["T_WHITESPACE"," ",263],["T_VARIABLE","$this",263],["T_OBJECT_OPERATOR","->",263],["T_STRING","norouteAction",263],"(",")",";",["T_WHITESPACE","\n            ",263],"}",["T_WHITESPACE","\n\n            ",264],["T_STRING","Mage",266],["T_DOUBLE_COLON","::",266],["T_STRING","register",266],"(",["T_CONSTANT_ENCAPSED_STRING","'wishlist_item'",266],",",["T_WHITESPACE"," ",266],["T_VARIABLE","$item",266],")",";",["T_WHITESPACE","\n\n            ",266],["T_VARIABLE","$params",268],["T_WHITESPACE"," ",268],"=",["T_WHITESPACE"," ",268],["T_NEW","new",268],["T_WHITESPACE"," ",268],["T_STRING","Varien_Object",268],"(",")",";",["T_WHITESPACE","\n            ",268],["T_VARIABLE","$params",269],["T_OBJECT_OPERATOR","->",269],["T_STRING","setCategoryId",269],"(",["T_STRING","false",269],")",";",["T_WHITESPACE","\n            ",269],["T_VARIABLE","$params",270],["T_OBJECT_OPERATOR","->",270],["T_STRING","setConfigureMode",270],"(",["T_STRING","true",270],")",";",["T_WHITESPACE","\n            ",270],["T_VARIABLE","$buyRequest",271],["T_WHITESPACE"," ",271],"=",["T_WHITESPACE"," ",271],["T_VARIABLE","$item",271],["T_OBJECT_OPERATOR","->",271],["T_STRING","getBuyRequest",271],"(",")",";",["T_WHITESPACE","\n            ",271],["T_IF","if",272],["T_WHITESPACE"," ",272],"(","!",["T_VARIABLE","$buyRequest",272],["T_OBJECT_OPERATOR","->",272],["T_STRING","getQty",272],"(",")",["T_WHITESPACE"," ",272],["T_BOOLEAN_AND","&&",272],["T_WHITESPACE"," ",272],["T_VARIABLE","$item",272],["T_OBJECT_OPERATOR","->",272],["T_STRING","getQty",272],"(",")",")",["T_WHITESPACE"," ",272],"{",["T_WHITESPACE","\n                ",272],["T_VARIABLE","$buyRequest",273],["T_OBJECT_OPERATOR","->",273],["T_STRING","setQty",273],"(",["T_VARIABLE","$item",273],["T_OBJECT_OPERATOR","->",273],["T_STRING","getQty",273],"(",")",")",";",["T_WHITESPACE","\n            ",273],"}",["T_WHITESPACE","\n            ",274],["T_IF","if",275],["T_WHITESPACE"," ",275],"(",["T_VARIABLE","$buyRequest",275],["T_OBJECT_OPERATOR","->",275],["T_STRING","getQty",275],"(",")",["T_WHITESPACE"," ",275],["T_BOOLEAN_AND","&&",275],["T_WHITESPACE"," ",275],"!",["T_VARIABLE","$item",275],["T_OBJECT_OPERATOR","->",275],["T_STRING","getQty",275],"(",")",")",["T_WHITESPACE"," ",275],"{",["T_WHITESPACE","\n                ",275],["T_VARIABLE","$item",276],["T_OBJECT_OPERATOR","->",276],["T_STRING","setQty",276],"(",["T_VARIABLE","$buyRequest",276],["T_OBJECT_OPERATOR","->",276],["T_STRING","getQty",276],"(",")",")",";",["T_WHITESPACE","\n                ",276],["T_STRING","Mage",277],["T_DOUBLE_COLON","::",277],["T_STRING","helper",277],"(",["T_CONSTANT_ENCAPSED_STRING","'wishlist'",277],")",["T_OBJECT_OPERATOR","->",277],["T_STRING","calculate",277],"(",")",";",["T_WHITESPACE","\n            ",277],"}",["T_WHITESPACE","\n            ",278],["T_VARIABLE","$params",279],["T_OBJECT_OPERATOR","->",279],["T_STRING","setBuyRequest",279],"(",["T_VARIABLE","$buyRequest",279],")",";",["T_WHITESPACE","\n            ",279],["T_STRING","Mage",280],["T_DOUBLE_COLON","::",280],["T_STRING","helper",280],"(",["T_CONSTANT_ENCAPSED_STRING","'catalog\/product_view'",280],")",["T_OBJECT_OPERATOR","->",280],["T_STRING","prepareAndRender",280],"(",["T_VARIABLE","$item",280],["T_OBJECT_OPERATOR","->",280],["T_STRING","getProductId",280],"(",")",",",["T_WHITESPACE"," ",280],["T_VARIABLE","$this",280],",",["T_WHITESPACE"," ",280],["T_VARIABLE","$params",280],")",";",["T_WHITESPACE","\n        ",280],"}",["T_WHITESPACE"," ",281],["T_CATCH","catch",281],["T_WHITESPACE"," ",281],"(",["T_STRING","Mage_Core_Exception",281],["T_WHITESPACE"," ",281],["T_VARIABLE","$e",281],")",["T_WHITESPACE"," ",281],"{",["T_WHITESPACE","\n            ",281],["T_STRING","Mage",282],["T_DOUBLE_COLON","::",282],["T_STRING","getSingleton",282],"(",["T_CONSTANT_ENCAPSED_STRING","'customer\/session'",282],")",["T_OBJECT_OPERATOR","->",282],["T_STRING","addError",282],"(",["T_VARIABLE","$e",282],["T_OBJECT_OPERATOR","->",282],["T_STRING","getMessage",282],"(",")",")",";",["T_WHITESPACE","\n            ",282],["T_VARIABLE","$this",283],["T_OBJECT_OPERATOR","->",283],["T_STRING","_redirect",283],"(",["T_CONSTANT_ENCAPSED_STRING","'*'",283],")",";",["T_WHITESPACE","\n            ",283],["T_RETURN","return",284],";",["T_WHITESPACE","\n        ",284],"}",["T_WHITESPACE"," ",285],["T_CATCH","catch",285],["T_WHITESPACE"," ",285],"(",["T_STRING","Exception",285],["T_WHITESPACE"," ",285],["T_VARIABLE","$e",285],")",["T_WHITESPACE"," ",285],"{",["T_WHITESPACE","\n            ",285],["T_STRING","Mage",286],["T_DOUBLE_COLON","::",286],["T_STRING","getSingleton",286],"(",["T_CONSTANT_ENCAPSED_STRING","'customer\/session'",286],")",["T_OBJECT_OPERATOR","->",286],["T_STRING","addError",286],"(",["T_VARIABLE","$this",286],["T_OBJECT_OPERATOR","->",286],["T_STRING","__",286],"(",["T_CONSTANT_ENCAPSED_STRING","'Cannot configure product'",286],")",")",";",["T_WHITESPACE","\n            ",286],["T_STRING","Mage",287],["T_DOUBLE_COLON","::",287],["T_STRING","logException",287],"(",["T_VARIABLE","$e",287],")",";",["T_WHITESPACE","\n            ",287],["T_VARIABLE","$this",288],["T_OBJECT_OPERATOR","->",288],["T_STRING","_redirect",288],"(",["T_CONSTANT_ENCAPSED_STRING","'*'",288],")",";",["T_WHITESPACE","\n            ",288],["T_RETURN","return",289],";",["T_WHITESPACE","\n        ",289],"}",["T_WHITESPACE","\n    ",290],"}",["T_WHITESPACE","\n\n    ",291],["T_DOC_COMMENT","\/**\n     * Action to accept new configuration for a wishlist item\n     *\/",293],["T_WHITESPACE","\n    ",295],["T_PUBLIC","public",296],["T_WHITESPACE"," ",296],["T_FUNCTION","function",296],["T_WHITESPACE"," ",296],["T_STRING","updateItemOptionsAction",296],"(",")",["T_WHITESPACE","\n    ",296],"{",["T_WHITESPACE","\n        ",297],["T_VARIABLE","$session",298],["T_WHITESPACE"," ",298],"=",["T_WHITESPACE"," ",298],["T_STRING","Mage",298],["T_DOUBLE_COLON","::",298],["T_STRING","getSingleton",298],"(",["T_CONSTANT_ENCAPSED_STRING","'customer\/session'",298],")",";",["T_WHITESPACE","\n        ",298],["T_VARIABLE","$productId",299],["T_WHITESPACE"," ",299],"=",["T_WHITESPACE"," ",299],["T_INT_CAST","(int)",299],["T_WHITESPACE"," ",299],["T_VARIABLE","$this",299],["T_OBJECT_OPERATOR","->",299],["T_STRING","getRequest",299],"(",")",["T_OBJECT_OPERATOR","->",299],["T_STRING","getParam",299],"(",["T_CONSTANT_ENCAPSED_STRING","'product'",299],")",";",["T_WHITESPACE","\n        ",299],["T_IF","if",300],["T_WHITESPACE"," ",300],"(","!",["T_VARIABLE","$productId",300],")",["T_WHITESPACE"," ",300],"{",["T_WHITESPACE","\n            ",300],["T_VARIABLE","$this",301],["T_OBJECT_OPERATOR","->",301],["T_STRING","_redirect",301],"(",["T_CONSTANT_ENCAPSED_STRING","'*\/'",301],")",";",["T_WHITESPACE","\n            ",301],["T_RETURN","return",302],";",["T_WHITESPACE","\n        ",302],"}",["T_WHITESPACE","\n\n        ",303],["T_VARIABLE","$product",305],["T_WHITESPACE"," ",305],"=",["T_WHITESPACE"," ",305],["T_STRING","Mage",305],["T_DOUBLE_COLON","::",305],["T_STRING","getModel",305],"(",["T_CONSTANT_ENCAPSED_STRING","'catalog\/product'",305],")",["T_OBJECT_OPERATOR","->",305],["T_STRING","load",305],"(",["T_VARIABLE","$productId",305],")",";",["T_WHITESPACE","\n        ",305],["T_IF","if",306],["T_WHITESPACE"," ",306],"(","!",["T_VARIABLE","$product",306],["T_OBJECT_OPERATOR","->",306],["T_STRING","getId",306],"(",")",["T_WHITESPACE"," ",306],["T_BOOLEAN_OR","||",306],["T_WHITESPACE"," ",306],"!",["T_VARIABLE","$product",306],["T_OBJECT_OPERATOR","->",306],["T_STRING","isVisibleInCatalog",306],"(",")",")",["T_WHITESPACE"," ",306],"{",["T_WHITESPACE","\n            ",306],["T_VARIABLE","$session",307],["T_OBJECT_OPERATOR","->",307],["T_STRING","addError",307],"(",["T_VARIABLE","$this",307],["T_OBJECT_OPERATOR","->",307],["T_STRING","__",307],"(",["T_CONSTANT_ENCAPSED_STRING","'Cannot specify product.'",307],")",")",";",["T_WHITESPACE","\n            ",307],["T_VARIABLE","$this",308],["T_OBJECT_OPERATOR","->",308],["T_STRING","_redirect",308],"(",["T_CONSTANT_ENCAPSED_STRING","'*\/'",308],")",";",["T_WHITESPACE","\n            ",308],["T_RETURN","return",309],";",["T_WHITESPACE","\n        ",309],"}",["T_WHITESPACE","\n\n        ",310],["T_TRY","try",312],["T_WHITESPACE"," ",312],"{",["T_WHITESPACE","\n            ",312],["T_VARIABLE","$id",313],["T_WHITESPACE"," ",313],"=",["T_WHITESPACE"," ",313],["T_INT_CAST","(int)",313],["T_WHITESPACE"," ",313],["T_VARIABLE","$this",313],["T_OBJECT_OPERATOR","->",313],["T_STRING","getRequest",313],"(",")",["T_OBJECT_OPERATOR","->",313],["T_STRING","getParam",313],"(",["T_CONSTANT_ENCAPSED_STRING","'id'",313],")",";",["T_WHITESPACE","\n            ",313],["T_COMMENT","\/* @var Mage_Wishlist_Model_Item *\/",314],["T_WHITESPACE","\n            ",314],["T_VARIABLE","$item",315],["T_WHITESPACE"," ",315],"=",["T_WHITESPACE"," ",315],["T_STRING","Mage",315],["T_DOUBLE_COLON","::",315],["T_STRING","getModel",315],"(",["T_CONSTANT_ENCAPSED_STRING","'wishlist\/item'",315],")",";",["T_WHITESPACE","\n            ",315],["T_VARIABLE","$item",316],["T_OBJECT_OPERATOR","->",316],["T_STRING","load",316],"(",["T_VARIABLE","$id",316],")",";",["T_WHITESPACE","\n            ",316],["T_VARIABLE","$wishlist",317],["T_WHITESPACE"," ",317],"=",["T_WHITESPACE"," ",317],["T_VARIABLE","$this",317],["T_OBJECT_OPERATOR","->",317],["T_STRING","_getWishlist",317],"(",["T_VARIABLE","$item",317],["T_OBJECT_OPERATOR","->",317],["T_STRING","getWishlistId",317],"(",")",")",";",["T_WHITESPACE","\n            ",317],["T_IF","if",318],["T_WHITESPACE"," ",318],"(","!",["T_VARIABLE","$wishlist",318],")",["T_WHITESPACE"," ",318],"{",["T_WHITESPACE","\n                ",318],["T_VARIABLE","$this",319],["T_OBJECT_OPERATOR","->",319],["T_STRING","_redirect",319],"(",["T_CONSTANT_ENCAPSED_STRING","'*\/'",319],")",";",["T_WHITESPACE","\n                ",319],["T_RETURN","return",320],";",["T_WHITESPACE","\n            ",320],"}",["T_WHITESPACE","\n\n            ",321],["T_VARIABLE","$buyRequest",323],["T_WHITESPACE"," ",323],"=",["T_WHITESPACE"," ",323],["T_NEW","new",323],["T_WHITESPACE"," ",323],["T_STRING","Varien_Object",323],"(",["T_VARIABLE","$this",323],["T_OBJECT_OPERATOR","->",323],["T_STRING","getRequest",323],"(",")",["T_OBJECT_OPERATOR","->",323],["T_STRING","getParams",323],"(",")",")",";",["T_WHITESPACE","\n\n            ",323],["T_VARIABLE","$wishlist",325],["T_OBJECT_OPERATOR","->",325],["T_STRING","updateItem",325],"(",["T_VARIABLE","$id",325],",",["T_WHITESPACE"," ",325],["T_VARIABLE","$buyRequest",325],")",["T_WHITESPACE","\n                ",325],["T_OBJECT_OPERATOR","->",326],["T_STRING","save",326],"(",")",";",["T_WHITESPACE","\n\n            ",326],["T_STRING","Mage",328],["T_DOUBLE_COLON","::",328],["T_STRING","helper",328],"(",["T_CONSTANT_ENCAPSED_STRING","'wishlist'",328],")",["T_OBJECT_OPERATOR","->",328],["T_STRING","calculate",328],"(",")",";",["T_WHITESPACE","\n            ",328],["T_STRING","Mage",329],["T_DOUBLE_COLON","::",329],["T_STRING","dispatchEvent",329],"(",["T_CONSTANT_ENCAPSED_STRING","'wishlist_update_item'",329],",",["T_WHITESPACE"," ",329],["T_ARRAY","array",329],"(",["T_WHITESPACE","\n                ",329],["T_CONSTANT_ENCAPSED_STRING","'wishlist'",330],["T_WHITESPACE"," ",330],["T_DOUBLE_ARROW","=>",330],["T_WHITESPACE"," ",330],["T_VARIABLE","$wishlist",330],",",["T_WHITESPACE"," ",330],["T_CONSTANT_ENCAPSED_STRING","'product'",330],["T_WHITESPACE"," ",330],["T_DOUBLE_ARROW","=>",330],["T_WHITESPACE"," ",330],["T_VARIABLE","$product",330],",",["T_WHITESPACE"," ",330],["T_CONSTANT_ENCAPSED_STRING","'item'",330],["T_WHITESPACE"," ",330],["T_DOUBLE_ARROW","=>",330],["T_WHITESPACE"," ",330],["T_VARIABLE","$wishlist",330],["T_OBJECT_OPERATOR","->",330],["T_STRING","getItem",330],"(",["T_VARIABLE","$id",330],")",")",["T_WHITESPACE","\n            ",330],")",";",["T_WHITESPACE","\n\n            ",331],["T_STRING","Mage",333],["T_DOUBLE_COLON","::",333],["T_STRING","helper",333],"(",["T_CONSTANT_ENCAPSED_STRING","'wishlist'",333],")",["T_OBJECT_OPERATOR","->",333],["T_STRING","calculate",333],"(",")",";",["T_WHITESPACE","\n\n            ",333],["T_VARIABLE","$message",335],["T_WHITESPACE"," ",335],"=",["T_WHITESPACE"," ",335],["T_VARIABLE","$this",335],["T_OBJECT_OPERATOR","->",335],["T_STRING","__",335],"(",["T_CONSTANT_ENCAPSED_STRING","'%1$s has been updated in your wishlist.'",335],",",["T_WHITESPACE"," ",335],["T_VARIABLE","$product",335],["T_OBJECT_OPERATOR","->",335],["T_STRING","getName",335],"(",")",")",";",["T_WHITESPACE","\n            ",335],["T_VARIABLE","$session",336],["T_OBJECT_OPERATOR","->",336],["T_STRING","addSuccess",336],"(",["T_VARIABLE","$message",336],")",";",["T_WHITESPACE","\n        ",336],"}",["T_WHITESPACE"," ",337],["T_CATCH","catch",337],["T_WHITESPACE"," ",337],"(",["T_STRING","Mage_Core_Exception",337],["T_WHITESPACE"," ",337],["T_VARIABLE","$e",337],")",["T_WHITESPACE"," ",337],"{",["T_WHITESPACE","\n            ",337],["T_VARIABLE","$session",338],["T_OBJECT_OPERATOR","->",338],["T_STRING","addError",338],"(",["T_VARIABLE","$e",338],["T_OBJECT_OPERATOR","->",338],["T_STRING","getMessage",338],"(",")",")",";",["T_WHITESPACE","\n        ",338],"}",["T_WHITESPACE"," ",339],["T_CATCH","catch",339],["T_WHITESPACE"," ",339],"(",["T_STRING","Exception",339],["T_WHITESPACE"," ",339],["T_VARIABLE","$e",339],")",["T_WHITESPACE"," ",339],"{",["T_WHITESPACE","\n            ",339],["T_VARIABLE","$session",340],["T_OBJECT_OPERATOR","->",340],["T_STRING","addError",340],"(",["T_VARIABLE","$this",340],["T_OBJECT_OPERATOR","->",340],["T_STRING","__",340],"(",["T_CONSTANT_ENCAPSED_STRING","'An error occurred while updating wishlist.'",340],")",")",";",["T_WHITESPACE","\n            ",340],["T_STRING","Mage",341],["T_DOUBLE_COLON","::",341],["T_STRING","logException",341],"(",["T_VARIABLE","$e",341],")",";",["T_WHITESPACE","\n        ",341],"}",["T_WHITESPACE","\n        ",342],["T_VARIABLE","$this",343],["T_OBJECT_OPERATOR","->",343],["T_STRING","_redirect",343],"(",["T_CONSTANT_ENCAPSED_STRING","'*\/*'",343],",",["T_WHITESPACE"," ",343],["T_ARRAY","array",343],"(",["T_CONSTANT_ENCAPSED_STRING","'wishlist_id'",343],["T_WHITESPACE"," ",343],["T_DOUBLE_ARROW","=>",343],["T_WHITESPACE"," ",343],["T_VARIABLE","$wishlist",343],["T_OBJECT_OPERATOR","->",343],["T_STRING","getId",343],"(",")",")",")",";",["T_WHITESPACE","\n    ",343],"}",["T_WHITESPACE","\n\n    ",344],["T_DOC_COMMENT","\/**\n     * Update wishlist item comments\n     *\/",346],["T_WHITESPACE","\n    ",348],["T_PUBLIC","public",349],["T_WHITESPACE"," ",349],["T_FUNCTION","function",349],["T_WHITESPACE"," ",349],["T_STRING","updateAction",349],"(",")",["T_WHITESPACE","\n    ",349],"{",["T_WHITESPACE","\n        ",350],["T_IF","if",351],["T_WHITESPACE"," ",351],"(","!",["T_VARIABLE","$this",351],["T_OBJECT_OPERATOR","->",351],["T_STRING","_validateFormKey",351],"(",")",")",["T_WHITESPACE"," ",351],"{",["T_WHITESPACE","\n            ",351],["T_RETURN","return",352],["T_WHITESPACE"," ",352],["T_VARIABLE","$this",352],["T_OBJECT_OPERATOR","->",352],["T_STRING","_redirect",352],"(",["T_CONSTANT_ENCAPSED_STRING","'*\/*\/'",352],")",";",["T_WHITESPACE","\n        ",352],"}",["T_WHITESPACE","\n        ",353],["T_VARIABLE","$wishlist",354],["T_WHITESPACE"," ",354],"=",["T_WHITESPACE"," ",354],["T_VARIABLE","$this",354],["T_OBJECT_OPERATOR","->",354],["T_STRING","_getWishlist",354],"(",")",";",["T_WHITESPACE","\n        ",354],["T_IF","if",355],["T_WHITESPACE"," ",355],"(","!",["T_VARIABLE","$wishlist",355],")",["T_WHITESPACE"," ",355],"{",["T_WHITESPACE","\n            ",355],["T_RETURN","return",356],["T_WHITESPACE"," ",356],["T_VARIABLE","$this",356],["T_OBJECT_OPERATOR","->",356],["T_STRING","norouteAction",356],"(",")",";",["T_WHITESPACE","\n        ",356],"}",["T_WHITESPACE","\n\n        ",357],["T_VARIABLE","$post",359],["T_WHITESPACE"," ",359],"=",["T_WHITESPACE"," ",359],["T_VARIABLE","$this",359],["T_OBJECT_OPERATOR","->",359],["T_STRING","getRequest",359],"(",")",["T_OBJECT_OPERATOR","->",359],["T_STRING","getPost",359],"(",")",";",["T_WHITESPACE","\n        ",359],["T_IF","if",360],["T_WHITESPACE"," ",360],"(",["T_VARIABLE","$post",360],["T_WHITESPACE"," ",360],["T_BOOLEAN_AND","&&",360],["T_WHITESPACE"," ",360],["T_ISSET","isset",360],"(",["T_VARIABLE","$post",360],"[",["T_CONSTANT_ENCAPSED_STRING","'description'",360],"]",")",["T_WHITESPACE"," ",360],["T_BOOLEAN_AND","&&",360],["T_WHITESPACE"," ",360],["T_STRING","is_array",360],"(",["T_VARIABLE","$post",360],"[",["T_CONSTANT_ENCAPSED_STRING","'description'",360],"]",")",")",["T_WHITESPACE"," ",360],"{",["T_WHITESPACE","\n            ",360],["T_VARIABLE","$updatedItems",361],["T_WHITESPACE"," ",361],"=",["T_WHITESPACE"," ",361],["T_LNUMBER","0",361],";",["T_WHITESPACE","\n\n            ",361],["T_FOREACH","foreach",363],["T_WHITESPACE"," ",363],"(",["T_VARIABLE","$post",363],"[",["T_CONSTANT_ENCAPSED_STRING","'description'",363],"]",["T_WHITESPACE"," ",363],["T_AS","as",363],["T_WHITESPACE"," ",363],["T_VARIABLE","$itemId",363],["T_WHITESPACE"," ",363],["T_DOUBLE_ARROW","=>",363],["T_WHITESPACE"," ",363],["T_VARIABLE","$description",363],")",["T_WHITESPACE"," ",363],"{",["T_WHITESPACE","\n                ",363],["T_VARIABLE","$item",364],["T_WHITESPACE"," ",364],"=",["T_WHITESPACE"," ",364],["T_STRING","Mage",364],["T_DOUBLE_COLON","::",364],["T_STRING","getModel",364],"(",["T_CONSTANT_ENCAPSED_STRING","'wishlist\/item'",364],")",["T_OBJECT_OPERATOR","->",364],["T_STRING","load",364],"(",["T_VARIABLE","$itemId",364],")",";",["T_WHITESPACE","\n                ",364],["T_IF","if",365],["T_WHITESPACE"," ",365],"(",["T_VARIABLE","$item",365],["T_OBJECT_OPERATOR","->",365],["T_STRING","getWishlistId",365],"(",")",["T_WHITESPACE"," ",365],["T_IS_NOT_EQUAL","!=",365],["T_WHITESPACE"," ",365],["T_VARIABLE","$wishlist",365],["T_OBJECT_OPERATOR","->",365],["T_STRING","getId",365],"(",")",")",["T_WHITESPACE"," ",365],"{",["T_WHITESPACE","\n                    ",365],["T_CONTINUE","continue",366],";",["T_WHITESPACE","\n                ",366],"}",["T_WHITESPACE","\n\n                ",367],["T_COMMENT","\/\/ Extract new values\n",369],["T_WHITESPACE","                ",370],["T_VARIABLE","$description",370],["T_WHITESPACE"," ",370],"=",["T_WHITESPACE"," ",370],["T_STRING_CAST","(string)",370],["T_VARIABLE","$description",370],";",["T_WHITESPACE","\n\n                ",370],["T_IF","if",372],["T_WHITESPACE"," ",372],"(",["T_VARIABLE","$description",372],["T_WHITESPACE"," ",372],["T_IS_EQUAL","==",372],["T_WHITESPACE"," ",372],["T_STRING","Mage",372],["T_DOUBLE_COLON","::",372],["T_STRING","helper",372],"(",["T_CONSTANT_ENCAPSED_STRING","'wishlist'",372],")",["T_OBJECT_OPERATOR","->",372],["T_STRING","defaultCommentString",372],"(",")",")",["T_WHITESPACE"," ",372],"{",["T_WHITESPACE","\n                    ",372],["T_VARIABLE","$description",373],["T_WHITESPACE"," ",373],"=",["T_WHITESPACE"," ",373],["T_CONSTANT_ENCAPSED_STRING","''",373],";",["T_WHITESPACE","\n                ",373],"}",["T_WHITESPACE"," ",374],["T_ELSEIF","elseif",374],["T_WHITESPACE"," ",374],"(","!",["T_STRING","strlen",374],"(",["T_VARIABLE","$description",374],")",")",["T_WHITESPACE"," ",374],"{",["T_WHITESPACE","\n                    ",374],["T_VARIABLE","$description",375],["T_WHITESPACE"," ",375],"=",["T_WHITESPACE"," ",375],["T_VARIABLE","$item",375],["T_OBJECT_OPERATOR","->",375],["T_STRING","getDescription",375],"(",")",";",["T_WHITESPACE","\n                ",375],"}",["T_WHITESPACE","\n\n                ",376],["T_VARIABLE","$qty",378],["T_WHITESPACE"," ",378],"=",["T_WHITESPACE"," ",378],["T_STRING","null",378],";",["T_WHITESPACE","\n                ",378],["T_IF","if",379],["T_WHITESPACE"," ",379],"(",["T_ISSET","isset",379],"(",["T_VARIABLE","$post",379],"[",["T_CONSTANT_ENCAPSED_STRING","'qty'",379],"]","[",["T_VARIABLE","$itemId",379],"]",")",")",["T_WHITESPACE"," ",379],"{",["T_WHITESPACE","\n                    ",379],["T_VARIABLE","$qty",380],["T_WHITESPACE"," ",380],"=",["T_WHITESPACE"," ",380],["T_VARIABLE","$this",380],["T_OBJECT_OPERATOR","->",380],["T_STRING","_processLocalizedQty",380],"(",["T_VARIABLE","$post",380],"[",["T_CONSTANT_ENCAPSED_STRING","'qty'",380],"]","[",["T_VARIABLE","$itemId",380],"]",")",";",["T_WHITESPACE","\n                ",380],"}",["T_WHITESPACE","\n                ",381],["T_IF","if",382],["T_WHITESPACE"," ",382],"(",["T_STRING","is_null",382],"(",["T_VARIABLE","$qty",382],")",")",["T_WHITESPACE"," ",382],"{",["T_WHITESPACE","\n                    ",382],["T_VARIABLE","$qty",383],["T_WHITESPACE"," ",383],"=",["T_WHITESPACE"," ",383],["T_VARIABLE","$item",383],["T_OBJECT_OPERATOR","->",383],["T_STRING","getQty",383],"(",")",";",["T_WHITESPACE","\n                    ",383],["T_IF","if",384],["T_WHITESPACE"," ",384],"(","!",["T_VARIABLE","$qty",384],")",["T_WHITESPACE"," ",384],"{",["T_WHITESPACE","\n                        ",384],["T_VARIABLE","$qty",385],["T_WHITESPACE"," ",385],"=",["T_WHITESPACE"," ",385],["T_LNUMBER","1",385],";",["T_WHITESPACE","\n                    ",385],"}",["T_WHITESPACE","\n                ",386],"}",["T_WHITESPACE"," ",387],["T_ELSEIF","elseif",387],["T_WHITESPACE"," ",387],"(",["T_LNUMBER","0",387],["T_WHITESPACE"," ",387],["T_IS_EQUAL","==",387],["T_WHITESPACE"," ",387],["T_VARIABLE","$qty",387],")",["T_WHITESPACE"," ",387],"{",["T_WHITESPACE","\n                    ",387],["T_TRY","try",388],["T_WHITESPACE"," ",388],"{",["T_WHITESPACE","\n                        ",388],["T_VARIABLE","$item",389],["T_OBJECT_OPERATOR","->",389],["T_STRING","delete",389],"(",")",";",["T_WHITESPACE","\n                    ",389],"}",["T_WHITESPACE"," ",390],["T_CATCH","catch",390],["T_WHITESPACE"," ",390],"(",["T_STRING","Exception",390],["T_WHITESPACE"," ",390],["T_VARIABLE","$e",390],")",["T_WHITESPACE"," ",390],"{",["T_WHITESPACE","\n                        ",390],["T_STRING","Mage",391],["T_DOUBLE_COLON","::",391],["T_STRING","logException",391],"(",["T_VARIABLE","$e",391],")",";",["T_WHITESPACE","\n                        ",391],["T_STRING","Mage",392],["T_DOUBLE_COLON","::",392],["T_STRING","getSingleton",392],"(",["T_CONSTANT_ENCAPSED_STRING","'customer\/session'",392],")",["T_OBJECT_OPERATOR","->",392],["T_STRING","addError",392],"(",["T_WHITESPACE","\n                            ",392],["T_VARIABLE","$this",393],["T_OBJECT_OPERATOR","->",393],["T_STRING","__",393],"(",["T_CONSTANT_ENCAPSED_STRING","'Can\\'t delete item from wishlist'",393],")",["T_WHITESPACE","\n                        ",393],")",";",["T_WHITESPACE","\n                    ",394],"}",["T_WHITESPACE","\n                ",395],"}",["T_WHITESPACE","\n\n                ",396],["T_COMMENT","\/\/ Check that we need to save\n",398],["T_WHITESPACE","                ",399],["T_IF","if",399],["T_WHITESPACE"," ",399],"(","(",["T_VARIABLE","$item",399],["T_OBJECT_OPERATOR","->",399],["T_STRING","getDescription",399],"(",")",["T_WHITESPACE"," ",399],["T_IS_EQUAL","==",399],["T_WHITESPACE"," ",399],["T_VARIABLE","$description",399],")",["T_WHITESPACE"," ",399],["T_BOOLEAN_AND","&&",399],["T_WHITESPACE"," ",399],"(",["T_VARIABLE","$item",399],["T_OBJECT_OPERATOR","->",399],["T_STRING","getQty",399],"(",")",["T_WHITESPACE"," ",399],["T_IS_EQUAL","==",399],["T_WHITESPACE"," ",399],["T_VARIABLE","$qty",399],")",")",["T_WHITESPACE"," ",399],"{",["T_WHITESPACE","\n                    ",399],["T_CONTINUE","continue",400],";",["T_WHITESPACE","\n                ",400],"}",["T_WHITESPACE","\n                ",401],["T_TRY","try",402],["T_WHITESPACE"," ",402],"{",["T_WHITESPACE","\n                    ",402],["T_VARIABLE","$item",403],["T_OBJECT_OPERATOR","->",403],["T_STRING","setDescription",403],"(",["T_VARIABLE","$description",403],")",["T_WHITESPACE","\n                        ",403],["T_OBJECT_OPERATOR","->",404],["T_STRING","setQty",404],"(",["T_VARIABLE","$qty",404],")",["T_WHITESPACE","\n                        ",404],["T_OBJECT_OPERATOR","->",405],["T_STRING","save",405],"(",")",";",["T_WHITESPACE","\n                    ",405],["T_VARIABLE","$updatedItems",406],["T_INC","++",406],";",["T_WHITESPACE","\n                ",406],"}",["T_WHITESPACE"," ",407],["T_CATCH","catch",407],["T_WHITESPACE"," ",407],"(",["T_STRING","Exception",407],["T_WHITESPACE"," ",407],["T_VARIABLE","$e",407],")",["T_WHITESPACE"," ",407],"{",["T_WHITESPACE","\n                    ",407],["T_STRING","Mage",408],["T_DOUBLE_COLON","::",408],["T_STRING","getSingleton",408],"(",["T_CONSTANT_ENCAPSED_STRING","'customer\/session'",408],")",["T_OBJECT_OPERATOR","->",408],["T_STRING","addError",408],"(",["T_WHITESPACE","\n                        ",408],["T_VARIABLE","$this",409],["T_OBJECT_OPERATOR","->",409],["T_STRING","__",409],"(",["T_CONSTANT_ENCAPSED_STRING","'Can\\'t save description %s'",409],",",["T_WHITESPACE"," ",409],["T_STRING","Mage",409],["T_DOUBLE_COLON","::",409],["T_STRING","helper",409],"(",["T_CONSTANT_ENCAPSED_STRING","'core'",409],")",["T_OBJECT_OPERATOR","->",409],["T_STRING","escapeHtml",409],"(",["T_VARIABLE","$description",409],")",")",["T_WHITESPACE","\n                    ",409],")",";",["T_WHITESPACE","\n                ",410],"}",["T_WHITESPACE","\n            ",411],"}",["T_WHITESPACE","\n\n            ",412],["T_COMMENT","\/\/ save wishlist model for setting date of last update\n",414],["T_WHITESPACE","            ",415],["T_IF","if",415],["T_WHITESPACE"," ",415],"(",["T_VARIABLE","$updatedItems",415],")",["T_WHITESPACE"," ",415],"{",["T_WHITESPACE","\n                ",415],["T_TRY","try",416],["T_WHITESPACE"," ",416],"{",["T_WHITESPACE","\n                    ",416],["T_VARIABLE","$wishlist",417],["T_OBJECT_OPERATOR","->",417],["T_STRING","save",417],"(",")",";",["T_WHITESPACE","\n                    ",417],["T_STRING","Mage",418],["T_DOUBLE_COLON","::",418],["T_STRING","helper",418],"(",["T_CONSTANT_ENCAPSED_STRING","'wishlist'",418],")",["T_OBJECT_OPERATOR","->",418],["T_STRING","calculate",418],"(",")",";",["T_WHITESPACE","\n                ",418],"}",["T_WHITESPACE"," ",419],["T_CATCH","catch",419],["T_WHITESPACE"," ",419],"(",["T_STRING","Exception",419],["T_WHITESPACE"," ",419],["T_VARIABLE","$e",419],")",["T_WHITESPACE"," ",419],"{",["T_WHITESPACE","\n                    ",419],["T_STRING","Mage",420],["T_DOUBLE_COLON","::",420],["T_STRING","getSingleton",420],"(",["T_CONSTANT_ENCAPSED_STRING","'customer\/session'",420],")",["T_OBJECT_OPERATOR","->",420],["T_STRING","addError",420],"(",["T_VARIABLE","$this",420],["T_OBJECT_OPERATOR","->",420],["T_STRING","__",420],"(",["T_CONSTANT_ENCAPSED_STRING","'Can\\'t update wishlist'",420],")",")",";",["T_WHITESPACE","\n                ",420],"}",["T_WHITESPACE","\n            ",421],"}",["T_WHITESPACE","\n\n            ",422],["T_IF","if",424],["T_WHITESPACE"," ",424],"(",["T_ISSET","isset",424],"(",["T_VARIABLE","$post",424],"[",["T_CONSTANT_ENCAPSED_STRING","'save_and_share'",424],"]",")",")",["T_WHITESPACE"," ",424],"{",["T_WHITESPACE","\n                ",424],["T_VARIABLE","$this",425],["T_OBJECT_OPERATOR","->",425],["T_STRING","_redirect",425],"(",["T_CONSTANT_ENCAPSED_STRING","'*\/*\/share'",425],",",["T_WHITESPACE"," ",425],["T_ARRAY","array",425],"(",["T_CONSTANT_ENCAPSED_STRING","'wishlist_id'",425],["T_WHITESPACE"," ",425],["T_DOUBLE_ARROW","=>",425],["T_WHITESPACE"," ",425],["T_VARIABLE","$wishlist",425],["T_OBJECT_OPERATOR","->",425],["T_STRING","getId",425],"(",")",")",")",";",["T_WHITESPACE","\n                ",425],["T_RETURN","return",426],";",["T_WHITESPACE","\n            ",426],"}",["T_WHITESPACE","\n        ",427],"}",["T_WHITESPACE","\n        ",428],["T_VARIABLE","$this",429],["T_OBJECT_OPERATOR","->",429],["T_STRING","_redirect",429],"(",["T_CONSTANT_ENCAPSED_STRING","'*'",429],",",["T_WHITESPACE"," ",429],["T_ARRAY","array",429],"(",["T_CONSTANT_ENCAPSED_STRING","'wishlist_id'",429],["T_WHITESPACE"," ",429],["T_DOUBLE_ARROW","=>",429],["T_WHITESPACE"," ",429],["T_VARIABLE","$wishlist",429],["T_OBJECT_OPERATOR","->",429],["T_STRING","getId",429],"(",")",")",")",";",["T_WHITESPACE","\n    ",429],"}",["T_WHITESPACE","\n\n    ",430],["T_DOC_COMMENT","\/**\n     * Remove item\n     *\/",432],["T_WHITESPACE","\n    ",434],["T_PUBLIC","public",435],["T_WHITESPACE"," ",435],["T_FUNCTION","function",435],["T_WHITESPACE"," ",435],["T_STRING","removeAction",435],"(",")",["T_WHITESPACE","\n    ",435],"{",["T_WHITESPACE","\n        ",436],["T_IF","if",437],["T_WHITESPACE"," ",437],"(","!",["T_VARIABLE","$this",437],["T_OBJECT_OPERATOR","->",437],["T_STRING","_validateFormKey",437],"(",")",")",["T_WHITESPACE"," ",437],"{",["T_WHITESPACE","\n            ",437],["T_RETURN","return",438],["T_WHITESPACE"," ",438],["T_VARIABLE","$this",438],["T_OBJECT_OPERATOR","->",438],["T_STRING","_redirect",438],"(",["T_CONSTANT_ENCAPSED_STRING","'*\/*'",438],")",";",["T_WHITESPACE","\n        ",438],"}",["T_WHITESPACE","\n        ",439],["T_VARIABLE","$id",440],["T_WHITESPACE"," ",440],"=",["T_WHITESPACE"," ",440],["T_INT_CAST","(int)",440],["T_WHITESPACE"," ",440],["T_VARIABLE","$this",440],["T_OBJECT_OPERATOR","->",440],["T_STRING","getRequest",440],"(",")",["T_OBJECT_OPERATOR","->",440],["T_STRING","getParam",440],"(",["T_CONSTANT_ENCAPSED_STRING","'item'",440],")",";",["T_WHITESPACE","\n        ",440],["T_VARIABLE","$item",441],["T_WHITESPACE"," ",441],"=",["T_WHITESPACE"," ",441],["T_STRING","Mage",441],["T_DOUBLE_COLON","::",441],["T_STRING","getModel",441],"(",["T_CONSTANT_ENCAPSED_STRING","'wishlist\/item'",441],")",["T_OBJECT_OPERATOR","->",441],["T_STRING","load",441],"(",["T_VARIABLE","$id",441],")",";",["T_WHITESPACE","\n        ",441],["T_IF","if",442],["T_WHITESPACE"," ",442],"(","!",["T_VARIABLE","$item",442],["T_OBJECT_OPERATOR","->",442],["T_STRING","getId",442],"(",")",")",["T_WHITESPACE"," ",442],"{",["T_WHITESPACE","\n            ",442],["T_RETURN","return",443],["T_WHITESPACE"," ",443],["T_VARIABLE","$this",443],["T_OBJECT_OPERATOR","->",443],["T_STRING","norouteAction",443],"(",")",";",["T_WHITESPACE","\n        ",443],"}",["T_WHITESPACE","\n        ",444],["T_VARIABLE","$wishlist",445],["T_WHITESPACE"," ",445],"=",["T_WHITESPACE"," ",445],["T_VARIABLE","$this",445],["T_OBJECT_OPERATOR","->",445],["T_STRING","_getWishlist",445],"(",["T_VARIABLE","$item",445],["T_OBJECT_OPERATOR","->",445],["T_STRING","getWishlistId",445],"(",")",")",";",["T_WHITESPACE","\n        ",445],["T_IF","if",446],["T_WHITESPACE"," ",446],"(","!",["T_VARIABLE","$wishlist",446],")",["T_WHITESPACE"," ",446],"{",["T_WHITESPACE","\n            ",446],["T_RETURN","return",447],["T_WHITESPACE"," ",447],["T_VARIABLE","$this",447],["T_OBJECT_OPERATOR","->",447],["T_STRING","norouteAction",447],"(",")",";",["T_WHITESPACE","\n        ",447],"}",["T_WHITESPACE","\n        ",448],["T_TRY","try",449],["T_WHITESPACE"," ",449],"{",["T_WHITESPACE","\n            ",449],["T_VARIABLE","$item",450],["T_OBJECT_OPERATOR","->",450],["T_STRING","delete",450],"(",")",";",["T_WHITESPACE","\n            ",450],["T_VARIABLE","$wishlist",451],["T_OBJECT_OPERATOR","->",451],["T_STRING","save",451],"(",")",";",["T_WHITESPACE","\n        ",451],"}",["T_WHITESPACE"," ",452],["T_CATCH","catch",452],["T_WHITESPACE"," ",452],"(",["T_STRING","Mage_Core_Exception",452],["T_WHITESPACE"," ",452],["T_VARIABLE","$e",452],")",["T_WHITESPACE"," ",452],"{",["T_WHITESPACE","\n            ",452],["T_STRING","Mage",453],["T_DOUBLE_COLON","::",453],["T_STRING","getSingleton",453],"(",["T_CONSTANT_ENCAPSED_STRING","'customer\/session'",453],")",["T_OBJECT_OPERATOR","->",453],["T_STRING","addError",453],"(",["T_WHITESPACE","\n                ",453],["T_VARIABLE","$this",454],["T_OBJECT_OPERATOR","->",454],["T_STRING","__",454],"(",["T_CONSTANT_ENCAPSED_STRING","'An error occurred while deleting the item from wishlist: %s'",454],",",["T_WHITESPACE"," ",454],["T_VARIABLE","$e",454],["T_OBJECT_OPERATOR","->",454],["T_STRING","getMessage",454],"(",")",")",["T_WHITESPACE","\n            ",454],")",";",["T_WHITESPACE","\n        ",455],"}",["T_WHITESPACE"," ",456],["T_CATCH","catch",456],["T_WHITESPACE"," ",456],"(",["T_STRING","Exception",456],["T_WHITESPACE"," ",456],["T_VARIABLE","$e",456],")",["T_WHITESPACE"," ",456],"{",["T_WHITESPACE","\n            ",456],["T_STRING","Mage",457],["T_DOUBLE_COLON","::",457],["T_STRING","getSingleton",457],"(",["T_CONSTANT_ENCAPSED_STRING","'customer\/session'",457],")",["T_OBJECT_OPERATOR","->",457],["T_STRING","addError",457],"(",["T_WHITESPACE","\n                ",457],["T_VARIABLE","$this",458],["T_OBJECT_OPERATOR","->",458],["T_STRING","__",458],"(",["T_CONSTANT_ENCAPSED_STRING","'An error occurred while deleting the item from wishlist.'",458],")",["T_WHITESPACE","\n            ",458],")",";",["T_WHITESPACE","\n        ",459],"}",["T_WHITESPACE","\n\n        ",460],["T_STRING","Mage",462],["T_DOUBLE_COLON","::",462],["T_STRING","helper",462],"(",["T_CONSTANT_ENCAPSED_STRING","'wishlist'",462],")",["T_OBJECT_OPERATOR","->",462],["T_STRING","calculate",462],"(",")",";",["T_WHITESPACE","\n\n        ",462],["T_VARIABLE","$this",464],["T_OBJECT_OPERATOR","->",464],["T_STRING","_redirectReferer",464],"(",["T_STRING","Mage",464],["T_DOUBLE_COLON","::",464],["T_STRING","getUrl",464],"(",["T_CONSTANT_ENCAPSED_STRING","'*\/*'",464],")",")",";",["T_WHITESPACE","\n    ",464],"}",["T_WHITESPACE","\n\n    ",465],["T_DOC_COMMENT","\/**\n     * Add wishlist item to shopping cart and remove from wishlist\n     *\n     * If Product has required options - item removed from wishlist and redirect\n     * to product view page with message about needed defined required options\n     *\/",467],["T_WHITESPACE","\n    ",472],["T_PUBLIC","public",473],["T_WHITESPACE"," ",473],["T_FUNCTION","function",473],["T_WHITESPACE"," ",473],["T_STRING","cartAction",473],"(",")",["T_WHITESPACE","\n    ",473],"{",["T_WHITESPACE","\n        ",474],["T_IF","if",475],["T_WHITESPACE"," ",475],"(","!",["T_VARIABLE","$this",475],["T_OBJECT_OPERATOR","->",475],["T_STRING","_validateFormKey",475],"(",")",")",["T_WHITESPACE"," ",475],"{",["T_WHITESPACE","\n            ",475],["T_RETURN","return",476],["T_WHITESPACE"," ",476],["T_VARIABLE","$this",476],["T_OBJECT_OPERATOR","->",476],["T_STRING","_redirect",476],"(",["T_CONSTANT_ENCAPSED_STRING","'*\/*'",476],")",";",["T_WHITESPACE","\n        ",476],"}",["T_WHITESPACE","\n        ",477],["T_VARIABLE","$itemId",478],["T_WHITESPACE"," ",478],"=",["T_WHITESPACE"," ",478],["T_INT_CAST","(int)",478],["T_WHITESPACE"," ",478],["T_VARIABLE","$this",478],["T_OBJECT_OPERATOR","->",478],["T_STRING","getRequest",478],"(",")",["T_OBJECT_OPERATOR","->",478],["T_STRING","getParam",478],"(",["T_CONSTANT_ENCAPSED_STRING","'item'",478],")",";",["T_WHITESPACE","\n\n        ",478],["T_COMMENT","\/* @var $item Mage_Wishlist_Model_Item *\/",480],["T_WHITESPACE","\n        ",480],["T_VARIABLE","$item",481],["T_WHITESPACE"," ",481],"=",["T_WHITESPACE"," ",481],["T_STRING","Mage",481],["T_DOUBLE_COLON","::",481],["T_STRING","getModel",481],"(",["T_CONSTANT_ENCAPSED_STRING","'wishlist\/item'",481],")",["T_OBJECT_OPERATOR","->",481],["T_STRING","load",481],"(",["T_VARIABLE","$itemId",481],")",";",["T_WHITESPACE","\n        ",481],["T_IF","if",482],["T_WHITESPACE"," ",482],"(","!",["T_VARIABLE","$item",482],["T_OBJECT_OPERATOR","->",482],["T_STRING","getId",482],"(",")",")",["T_WHITESPACE"," ",482],"{",["T_WHITESPACE","\n            ",482],["T_RETURN","return",483],["T_WHITESPACE"," ",483],["T_VARIABLE","$this",483],["T_OBJECT_OPERATOR","->",483],["T_STRING","_redirect",483],"(",["T_CONSTANT_ENCAPSED_STRING","'*\/*'",483],")",";",["T_WHITESPACE","\n        ",483],"}",["T_WHITESPACE","\n        ",484],["T_VARIABLE","$wishlist",485],["T_WHITESPACE"," ",485],"=",["T_WHITESPACE"," ",485],["T_VARIABLE","$this",485],["T_OBJECT_OPERATOR","->",485],["T_STRING","_getWishlist",485],"(",["T_VARIABLE","$item",485],["T_OBJECT_OPERATOR","->",485],["T_STRING","getWishlistId",485],"(",")",")",";",["T_WHITESPACE","\n        ",485],["T_IF","if",486],["T_WHITESPACE"," ",486],"(","!",["T_VARIABLE","$wishlist",486],")",["T_WHITESPACE"," ",486],"{",["T_WHITESPACE","\n            ",486],["T_RETURN","return",487],["T_WHITESPACE"," ",487],["T_VARIABLE","$this",487],["T_OBJECT_OPERATOR","->",487],["T_STRING","_redirect",487],"(",["T_CONSTANT_ENCAPSED_STRING","'*\/*'",487],")",";",["T_WHITESPACE","\n        ",487],"}",["T_WHITESPACE","\n\n        ",488],["T_COMMENT","\/\/ Set qty\n",490],["T_WHITESPACE","        ",491],["T_VARIABLE","$qty",491],["T_WHITESPACE"," ",491],"=",["T_WHITESPACE"," ",491],["T_VARIABLE","$this",491],["T_OBJECT_OPERATOR","->",491],["T_STRING","getRequest",491],"(",")",["T_OBJECT_OPERATOR","->",491],["T_STRING","getParam",491],"(",["T_CONSTANT_ENCAPSED_STRING","'qty'",491],")",";",["T_WHITESPACE","\n        ",491],["T_IF","if",492],["T_WHITESPACE"," ",492],"(",["T_STRING","is_array",492],"(",["T_VARIABLE","$qty",492],")",")",["T_WHITESPACE"," ",492],"{",["T_WHITESPACE","\n            ",492],["T_IF","if",493],["T_WHITESPACE"," ",493],"(",["T_ISSET","isset",493],"(",["T_VARIABLE","$qty",493],"[",["T_VARIABLE","$itemId",493],"]",")",")",["T_WHITESPACE"," ",493],"{",["T_WHITESPACE","\n                ",493],["T_VARIABLE","$qty",494],["T_WHITESPACE"," ",494],"=",["T_WHITESPACE"," ",494],["T_VARIABLE","$qty",494],"[",["T_VARIABLE","$itemId",494],"]",";",["T_WHITESPACE","\n            ",494],"}",["T_WHITESPACE"," ",495],["T_ELSE","else",495],["T_WHITESPACE"," ",495],"{",["T_WHITESPACE","\n                ",495],["T_VARIABLE","$qty",496],["T_WHITESPACE"," ",496],"=",["T_WHITESPACE"," ",496],["T_LNUMBER","1",496],";",["T_WHITESPACE","\n            ",496],"}",["T_WHITESPACE","\n        ",497],"}",["T_WHITESPACE","\n        ",498],["T_VARIABLE","$qty",499],["T_WHITESPACE"," ",499],"=",["T_WHITESPACE"," ",499],["T_VARIABLE","$this",499],["T_OBJECT_OPERATOR","->",499],["T_STRING","_processLocalizedQty",499],"(",["T_VARIABLE","$qty",499],")",";",["T_WHITESPACE","\n        ",499],["T_IF","if",500],["T_WHITESPACE"," ",500],"(",["T_VARIABLE","$qty",500],")",["T_WHITESPACE"," ",500],"{",["T_WHITESPACE","\n            ",500],["T_VARIABLE","$item",501],["T_OBJECT_OPERATOR","->",501],["T_STRING","setQty",501],"(",["T_VARIABLE","$qty",501],")",";",["T_WHITESPACE","\n        ",501],"}",["T_WHITESPACE","\n\n        ",502],["T_COMMENT","\/* @var $session Mage_Wishlist_Model_Session *\/",504],["T_WHITESPACE","\n        ",504],["T_VARIABLE","$session",505],["T_WHITESPACE","    ",505],"=",["T_WHITESPACE"," ",505],["T_STRING","Mage",505],["T_DOUBLE_COLON","::",505],["T_STRING","getSingleton",505],"(",["T_CONSTANT_ENCAPSED_STRING","'wishlist\/session'",505],")",";",["T_WHITESPACE","\n        ",505],["T_VARIABLE","$cart",506],["T_WHITESPACE","       ",506],"=",["T_WHITESPACE"," ",506],["T_STRING","Mage",506],["T_DOUBLE_COLON","::",506],["T_STRING","getSingleton",506],"(",["T_CONSTANT_ENCAPSED_STRING","'checkout\/cart'",506],")",";",["T_WHITESPACE","\n\n        ",506],["T_VARIABLE","$redirectUrl",508],["T_WHITESPACE"," ",508],"=",["T_WHITESPACE"," ",508],["T_STRING","Mage",508],["T_DOUBLE_COLON","::",508],["T_STRING","getUrl",508],"(",["T_CONSTANT_ENCAPSED_STRING","'*\/*'",508],")",";",["T_WHITESPACE","\n\n        ",508],["T_TRY","try",510],["T_WHITESPACE"," ",510],"{",["T_WHITESPACE","\n            ",510],["T_VARIABLE","$options",511],["T_WHITESPACE"," ",511],"=",["T_WHITESPACE"," ",511],["T_STRING","Mage",511],["T_DOUBLE_COLON","::",511],["T_STRING","getModel",511],"(",["T_CONSTANT_ENCAPSED_STRING","'wishlist\/item_option'",511],")",["T_OBJECT_OPERATOR","->",511],["T_STRING","getCollection",511],"(",")",["T_WHITESPACE","\n                    ",511],["T_OBJECT_OPERATOR","->",512],["T_STRING","addItemFilter",512],"(",["T_ARRAY","array",512],"(",["T_VARIABLE","$itemId",512],")",")",";",["T_WHITESPACE","\n            ",512],["T_VARIABLE","$item",513],["T_OBJECT_OPERATOR","->",513],["T_STRING","setOptions",513],"(",["T_VARIABLE","$options",513],["T_OBJECT_OPERATOR","->",513],["T_STRING","getOptionsByItem",513],"(",["T_VARIABLE","$itemId",513],")",")",";",["T_WHITESPACE","\n\n            ",513],["T_VARIABLE","$buyRequest",515],["T_WHITESPACE"," ",515],"=",["T_WHITESPACE"," ",515],["T_STRING","Mage",515],["T_DOUBLE_COLON","::",515],["T_STRING","helper",515],"(",["T_CONSTANT_ENCAPSED_STRING","'catalog\/product'",515],")",["T_OBJECT_OPERATOR","->",515],["T_STRING","addParamsToBuyRequest",515],"(",["T_WHITESPACE","\n                ",515],["T_VARIABLE","$this",516],["T_OBJECT_OPERATOR","->",516],["T_STRING","getRequest",516],"(",")",["T_OBJECT_OPERATOR","->",516],["T_STRING","getParams",516],"(",")",",",["T_WHITESPACE","\n                ",516],["T_ARRAY","array",517],"(",["T_CONSTANT_ENCAPSED_STRING","'current_config'",517],["T_WHITESPACE"," ",517],["T_DOUBLE_ARROW","=>",517],["T_WHITESPACE"," ",517],["T_VARIABLE","$item",517],["T_OBJECT_OPERATOR","->",517],["T_STRING","getBuyRequest",517],"(",")",")",["T_WHITESPACE","\n            ",517],")",";",["T_WHITESPACE","\n\n            ",518],["T_VARIABLE","$item",520],["T_OBJECT_OPERATOR","->",520],["T_STRING","mergeBuyRequest",520],"(",["T_VARIABLE","$buyRequest",520],")",";",["T_WHITESPACE","\n            ",520],["T_IF","if",521],["T_WHITESPACE"," ",521],"(",["T_VARIABLE","$item",521],["T_OBJECT_OPERATOR","->",521],["T_STRING","addToCart",521],"(",["T_VARIABLE","$cart",521],",",["T_WHITESPACE"," ",521],["T_STRING","true",521],")",")",["T_WHITESPACE"," ",521],"{",["T_WHITESPACE","\n                ",521],["T_VARIABLE","$cart",522],["T_OBJECT_OPERATOR","->",522],["T_STRING","save",522],"(",")",["T_OBJECT_OPERATOR","->",522],["T_STRING","getQuote",522],"(",")",["T_OBJECT_OPERATOR","->",522],["T_STRING","collectTotals",522],"(",")",";",["T_WHITESPACE","\n            ",522],"}",["T_WHITESPACE","\n\n            ",523],["T_VARIABLE","$wishlist",525],["T_OBJECT_OPERATOR","->",525],["T_STRING","save",525],"(",")",";",["T_WHITESPACE","\n            ",525],["T_STRING","Mage",526],["T_DOUBLE_COLON","::",526],["T_STRING","helper",526],"(",["T_CONSTANT_ENCAPSED_STRING","'wishlist'",526],")",["T_OBJECT_OPERATOR","->",526],["T_STRING","calculate",526],"(",")",";",["T_WHITESPACE","\n\n            ",526],["T_IF","if",528],["T_WHITESPACE"," ",528],"(",["T_STRING","Mage",528],["T_DOUBLE_COLON","::",528],["T_STRING","helper",528],"(",["T_CONSTANT_ENCAPSED_STRING","'checkout\/cart'",528],")",["T_OBJECT_OPERATOR","->",528],["T_STRING","getShouldRedirectToCart",528],"(",")",")",["T_WHITESPACE"," ",528],"{",["T_WHITESPACE","\n                ",528],["T_VARIABLE","$redirectUrl",529],["T_WHITESPACE"," ",529],"=",["T_WHITESPACE"," ",529],["T_STRING","Mage",529],["T_DOUBLE_COLON","::",529],["T_STRING","helper",529],"(",["T_CONSTANT_ENCAPSED_STRING","'checkout\/cart'",529],")",["T_OBJECT_OPERATOR","->",529],["T_STRING","getCartUrl",529],"(",")",";",["T_WHITESPACE","\n            ",529],"}",["T_WHITESPACE","\n            ",530],["T_STRING","Mage",531],["T_DOUBLE_COLON","::",531],["T_STRING","helper",531],"(",["T_CONSTANT_ENCAPSED_STRING","'wishlist'",531],")",["T_OBJECT_OPERATOR","->",531],["T_STRING","calculate",531],"(",")",";",["T_WHITESPACE","\n\n            ",531],["T_VARIABLE","$product",533],["T_WHITESPACE"," ",533],"=",["T_WHITESPACE"," ",533],["T_STRING","Mage",533],["T_DOUBLE_COLON","::",533],["T_STRING","getModel",533],"(",["T_CONSTANT_ENCAPSED_STRING","'catalog\/product'",533],")",["T_WHITESPACE","\n                ",533],["T_OBJECT_OPERATOR","->",534],["T_STRING","setStoreId",534],"(",["T_STRING","Mage",534],["T_DOUBLE_COLON","::",534],["T_STRING","app",534],"(",")",["T_OBJECT_OPERATOR","->",534],["T_STRING","getStore",534],"(",")",["T_OBJECT_OPERATOR","->",534],["T_STRING","getId",534],"(",")",")",["T_WHITESPACE","\n                ",534],["T_OBJECT_OPERATOR","->",535],["T_STRING","load",535],"(",["T_VARIABLE","$item",535],["T_OBJECT_OPERATOR","->",535],["T_STRING","getProductId",535],"(",")",")",";",["T_WHITESPACE","\n            ",535],["T_VARIABLE","$productName",536],["T_WHITESPACE"," ",536],"=",["T_WHITESPACE"," ",536],["T_STRING","Mage",536],["T_DOUBLE_COLON","::",536],["T_STRING","helper",536],"(",["T_CONSTANT_ENCAPSED_STRING","'core'",536],")",["T_OBJECT_OPERATOR","->",536],["T_STRING","escapeHtml",536],"(",["T_VARIABLE","$product",536],["T_OBJECT_OPERATOR","->",536],["T_STRING","getName",536],"(",")",")",";",["T_WHITESPACE","\n            ",536],["T_VARIABLE","$message",537],["T_WHITESPACE"," ",537],"=",["T_WHITESPACE"," ",537],["T_VARIABLE","$this",537],["T_OBJECT_OPERATOR","->",537],["T_STRING","__",537],"(",["T_CONSTANT_ENCAPSED_STRING","'%s was added to your shopping cart.'",537],",",["T_WHITESPACE"," ",537],["T_VARIABLE","$productName",537],")",";",["T_WHITESPACE","\n            ",537],["T_STRING","Mage",538],["T_DOUBLE_COLON","::",538],["T_STRING","getSingleton",538],"(",["T_CONSTANT_ENCAPSED_STRING","'catalog\/session'",538],")",["T_OBJECT_OPERATOR","->",538],["T_STRING","addSuccess",538],"(",["T_VARIABLE","$message",538],")",";",["T_WHITESPACE","\n        ",538],"}",["T_WHITESPACE"," ",539],["T_CATCH","catch",539],["T_WHITESPACE"," ",539],"(",["T_STRING","Mage_Core_Exception",539],["T_WHITESPACE"," ",539],["T_VARIABLE","$e",539],")",["T_WHITESPACE"," ",539],"{",["T_WHITESPACE","\n            ",539],["T_IF","if",540],["T_WHITESPACE"," ",540],"(",["T_VARIABLE","$e",540],["T_OBJECT_OPERATOR","->",540],["T_STRING","getCode",540],"(",")",["T_WHITESPACE"," ",540],["T_IS_EQUAL","==",540],["T_WHITESPACE"," ",540],["T_STRING","Mage_Wishlist_Model_Item",540],["T_DOUBLE_COLON","::",540],["T_STRING","EXCEPTION_CODE_NOT_SALABLE",540],")",["T_WHITESPACE"," ",540],"{",["T_WHITESPACE","\n                ",540],["T_VARIABLE","$session",541],["T_OBJECT_OPERATOR","->",541],["T_STRING","addError",541],"(",["T_VARIABLE","$this",541],["T_OBJECT_OPERATOR","->",541],["T_STRING","__",541],"(",["T_CONSTANT_ENCAPSED_STRING","'This product(s) is currently out of stock'",541],")",")",";",["T_WHITESPACE","\n            ",541],"}",["T_WHITESPACE"," ",542],["T_ELSE","else",542],["T_WHITESPACE"," ",542],["T_IF","if",542],["T_WHITESPACE"," ",542],"(",["T_VARIABLE","$e",542],["T_OBJECT_OPERATOR","->",542],["T_STRING","getCode",542],"(",")",["T_WHITESPACE"," ",542],["T_IS_EQUAL","==",542],["T_WHITESPACE"," ",542],["T_STRING","Mage_Wishlist_Model_Item",542],["T_DOUBLE_COLON","::",542],["T_STRING","EXCEPTION_CODE_HAS_REQUIRED_OPTIONS",542],")",["T_WHITESPACE"," ",542],"{",["T_WHITESPACE","\n                ",542],["T_STRING","Mage",543],["T_DOUBLE_COLON","::",543],["T_STRING","getSingleton",543],"(",["T_CONSTANT_ENCAPSED_STRING","'catalog\/session'",543],")",["T_OBJECT_OPERATOR","->",543],["T_STRING","addNotice",543],"(",["T_VARIABLE","$e",543],["T_OBJECT_OPERATOR","->",543],["T_STRING","getMessage",543],"(",")",")",";",["T_WHITESPACE","\n                ",543],["T_VARIABLE","$redirectUrl",544],["T_WHITESPACE"," ",544],"=",["T_WHITESPACE"," ",544],["T_STRING","Mage",544],["T_DOUBLE_COLON","::",544],["T_STRING","getUrl",544],"(",["T_CONSTANT_ENCAPSED_STRING","'*\/*\/configure\/'",544],",",["T_WHITESPACE"," ",544],["T_ARRAY","array",544],"(",["T_CONSTANT_ENCAPSED_STRING","'id'",544],["T_WHITESPACE"," ",544],["T_DOUBLE_ARROW","=>",544],["T_WHITESPACE"," ",544],["T_VARIABLE","$item",544],["T_OBJECT_OPERATOR","->",544],["T_STRING","getId",544],"(",")",")",")",";",["T_WHITESPACE","\n            ",544],"}",["T_WHITESPACE"," ",545],["T_ELSE","else",545],["T_WHITESPACE"," ",545],"{",["T_WHITESPACE","\n                ",545],["T_STRING","Mage",546],["T_DOUBLE_COLON","::",546],["T_STRING","getSingleton",546],"(",["T_CONSTANT_ENCAPSED_STRING","'catalog\/session'",546],")",["T_OBJECT_OPERATOR","->",546],["T_STRING","addNotice",546],"(",["T_VARIABLE","$e",546],["T_OBJECT_OPERATOR","->",546],["T_STRING","getMessage",546],"(",")",")",";",["T_WHITESPACE","\n                ",546],["T_VARIABLE","$redirectUrl",547],["T_WHITESPACE"," ",547],"=",["T_WHITESPACE"," ",547],["T_STRING","Mage",547],["T_DOUBLE_COLON","::",547],["T_STRING","getUrl",547],"(",["T_CONSTANT_ENCAPSED_STRING","'*\/*\/configure\/'",547],",",["T_WHITESPACE"," ",547],["T_ARRAY","array",547],"(",["T_CONSTANT_ENCAPSED_STRING","'id'",547],["T_WHITESPACE"," ",547],["T_DOUBLE_ARROW","=>",547],["T_WHITESPACE"," ",547],["T_VARIABLE","$item",547],["T_OBJECT_OPERATOR","->",547],["T_STRING","getId",547],"(",")",")",")",";",["T_WHITESPACE","\n            ",547],"}",["T_WHITESPACE","\n        ",548],"}",["T_WHITESPACE"," ",549],["T_CATCH","catch",549],["T_WHITESPACE"," ",549],"(",["T_STRING","Exception",549],["T_WHITESPACE"," ",549],["T_VARIABLE","$e",549],")",["T_WHITESPACE"," ",549],"{",["T_WHITESPACE","\n            ",549],["T_STRING","Mage",550],["T_DOUBLE_COLON","::",550],["T_STRING","logException",550],"(",["T_VARIABLE","$e",550],")",";",["T_WHITESPACE","\n            ",550],["T_VARIABLE","$session",551],["T_OBJECT_OPERATOR","->",551],["T_STRING","addException",551],"(",["T_VARIABLE","$e",551],",",["T_WHITESPACE"," ",551],["T_VARIABLE","$this",551],["T_OBJECT_OPERATOR","->",551],["T_STRING","__",551],"(",["T_CONSTANT_ENCAPSED_STRING","'Cannot add item to shopping cart'",551],")",")",";",["T_WHITESPACE","\n        ",551],"}",["T_WHITESPACE","\n\n        ",552],["T_STRING","Mage",554],["T_DOUBLE_COLON","::",554],["T_STRING","helper",554],"(",["T_CONSTANT_ENCAPSED_STRING","'wishlist'",554],")",["T_OBJECT_OPERATOR","->",554],["T_STRING","calculate",554],"(",")",";",["T_WHITESPACE","\n\n        ",554],["T_RETURN","return",556],["T_WHITESPACE"," ",556],["T_VARIABLE","$this",556],["T_OBJECT_OPERATOR","->",556],["T_STRING","_redirectUrl",556],"(",["T_VARIABLE","$redirectUrl",556],")",";",["T_WHITESPACE","\n    ",556],"}",["T_WHITESPACE","\n\n    ",557],["T_DOC_COMMENT","\/**\n     * Add cart item to wishlist and remove from cart\n     *\/",559],["T_WHITESPACE","\n    ",561],["T_PUBLIC","public",562],["T_WHITESPACE"," ",562],["T_FUNCTION","function",562],["T_WHITESPACE"," ",562],["T_STRING","fromcartAction",562],"(",")",["T_WHITESPACE","\n    ",562],"{",["T_WHITESPACE","\n        ",563],["T_VARIABLE","$wishlist",564],["T_WHITESPACE"," ",564],"=",["T_WHITESPACE"," ",564],["T_VARIABLE","$this",564],["T_OBJECT_OPERATOR","->",564],["T_STRING","_getWishlist",564],"(",")",";",["T_WHITESPACE","\n        ",564],["T_IF","if",565],["T_WHITESPACE"," ",565],"(","!",["T_VARIABLE","$wishlist",565],")",["T_WHITESPACE"," ",565],"{",["T_WHITESPACE","\n            ",565],["T_RETURN","return",566],["T_WHITESPACE"," ",566],["T_VARIABLE","$this",566],["T_OBJECT_OPERATOR","->",566],["T_STRING","norouteAction",566],"(",")",";",["T_WHITESPACE","\n        ",566],"}",["T_WHITESPACE","\n        ",567],["T_VARIABLE","$itemId",568],["T_WHITESPACE"," ",568],"=",["T_WHITESPACE"," ",568],["T_INT_CAST","(int)",568],["T_WHITESPACE"," ",568],["T_VARIABLE","$this",568],["T_OBJECT_OPERATOR","->",568],["T_STRING","getRequest",568],"(",")",["T_OBJECT_OPERATOR","->",568],["T_STRING","getParam",568],"(",["T_CONSTANT_ENCAPSED_STRING","'item'",568],")",";",["T_WHITESPACE","\n\n        ",568],["T_COMMENT","\/* @var Mage_Checkout_Model_Cart $cart *\/",570],["T_WHITESPACE","\n        ",570],["T_VARIABLE","$cart",571],["T_WHITESPACE"," ",571],"=",["T_WHITESPACE"," ",571],["T_STRING","Mage",571],["T_DOUBLE_COLON","::",571],["T_STRING","getSingleton",571],"(",["T_CONSTANT_ENCAPSED_STRING","'checkout\/cart'",571],")",";",["T_WHITESPACE","\n        ",571],["T_VARIABLE","$session",572],["T_WHITESPACE"," ",572],"=",["T_WHITESPACE"," ",572],["T_STRING","Mage",572],["T_DOUBLE_COLON","::",572],["T_STRING","getSingleton",572],"(",["T_CONSTANT_ENCAPSED_STRING","'checkout\/session'",572],")",";",["T_WHITESPACE","\n\n        ",572],["T_TRY","try",574],["T_WHITESPACE"," ",574],"{",["T_WHITESPACE","\n            ",574],["T_VARIABLE","$item",575],["T_WHITESPACE"," ",575],"=",["T_WHITESPACE"," ",575],["T_VARIABLE","$cart",575],["T_OBJECT_OPERATOR","->",575],["T_STRING","getQuote",575],"(",")",["T_OBJECT_OPERATOR","->",575],["T_STRING","getItemById",575],"(",["T_VARIABLE","$itemId",575],")",";",["T_WHITESPACE","\n            ",575],["T_IF","if",576],["T_WHITESPACE"," ",576],"(","!",["T_VARIABLE","$item",576],")",["T_WHITESPACE"," ",576],"{",["T_WHITESPACE","\n                ",576],["T_STRING","Mage",577],["T_DOUBLE_COLON","::",577],["T_STRING","throwException",577],"(",["T_WHITESPACE","\n                    ",577],["T_STRING","Mage",578],["T_DOUBLE_COLON","::",578],["T_STRING","helper",578],"(",["T_CONSTANT_ENCAPSED_STRING","'wishlist'",578],")",["T_OBJECT_OPERATOR","->",578],["T_STRING","__",578],"(",["T_CONSTANT_ENCAPSED_STRING","\"Requested cart item doesn't exist\"",578],")",["T_WHITESPACE","\n                ",578],")",";",["T_WHITESPACE","\n            ",579],"}",["T_WHITESPACE","\n\n            ",580],["T_VARIABLE","$productId",582],["T_WHITESPACE","  ",582],"=",["T_WHITESPACE"," ",582],["T_VARIABLE","$item",582],["T_OBJECT_OPERATOR","->",582],["T_STRING","getProductId",582],"(",")",";",["T_WHITESPACE","\n            ",582],["T_VARIABLE","$buyRequest",583],["T_WHITESPACE"," ",583],"=",["T_WHITESPACE"," ",583],["T_VARIABLE","$item",583],["T_OBJECT_OPERATOR","->",583],["T_STRING","getBuyRequest",583],"(",")",";",["T_WHITESPACE","\n\n            ",583],["T_VARIABLE","$wishlist",585],["T_OBJECT_OPERATOR","->",585],["T_STRING","addNewItem",585],"(",["T_VARIABLE","$productId",585],",",["T_WHITESPACE"," ",585],["T_VARIABLE","$buyRequest",585],")",";",["T_WHITESPACE","\n\n            ",585],["T_VARIABLE","$productIds",587],"[","]",["T_WHITESPACE"," ",587],"=",["T_WHITESPACE"," ",587],["T_VARIABLE","$productId",587],";",["T_WHITESPACE","\n            ",587],["T_VARIABLE","$cart",588],["T_OBJECT_OPERATOR","->",588],["T_STRING","getQuote",588],"(",")",["T_OBJECT_OPERATOR","->",588],["T_STRING","removeItem",588],"(",["T_VARIABLE","$itemId",588],")",";",["T_WHITESPACE","\n            ",588],["T_VARIABLE","$cart",589],["T_OBJECT_OPERATOR","->",589],["T_STRING","save",589],"(",")",";",["T_WHITESPACE","\n            ",589],["T_STRING","Mage",590],["T_DOUBLE_COLON","::",590],["T_STRING","helper",590],"(",["T_CONSTANT_ENCAPSED_STRING","'wishlist'",590],")",["T_OBJECT_OPERATOR","->",590],["T_STRING","calculate",590],"(",")",";",["T_WHITESPACE","\n            ",590],["T_VARIABLE","$productName",591],["T_WHITESPACE"," ",591],"=",["T_WHITESPACE"," ",591],["T_STRING","Mage",591],["T_DOUBLE_COLON","::",591],["T_STRING","helper",591],"(",["T_CONSTANT_ENCAPSED_STRING","'core'",591],")",["T_OBJECT_OPERATOR","->",591],["T_STRING","escapeHtml",591],"(",["T_VARIABLE","$item",591],["T_OBJECT_OPERATOR","->",591],["T_STRING","getProduct",591],"(",")",["T_OBJECT_OPERATOR","->",591],["T_STRING","getName",591],"(",")",")",";",["T_WHITESPACE","\n            ",591],["T_VARIABLE","$wishlistName",592],["T_WHITESPACE"," ",592],"=",["T_WHITESPACE"," ",592],["T_STRING","Mage",592],["T_DOUBLE_COLON","::",592],["T_STRING","helper",592],"(",["T_CONSTANT_ENCAPSED_STRING","'core'",592],")",["T_OBJECT_OPERATOR","->",592],["T_STRING","escapeHtml",592],"(",["T_VARIABLE","$wishlist",592],["T_OBJECT_OPERATOR","->",592],["T_STRING","getName",592],"(",")",")",";",["T_WHITESPACE","\n            ",592],["T_VARIABLE","$session",593],["T_OBJECT_OPERATOR","->",593],["T_STRING","addSuccess",593],"(",["T_WHITESPACE","\n                ",593],["T_STRING","Mage",594],["T_DOUBLE_COLON","::",594],["T_STRING","helper",594],"(",["T_CONSTANT_ENCAPSED_STRING","'wishlist'",594],")",["T_OBJECT_OPERATOR","->",594],["T_STRING","__",594],"(",["T_CONSTANT_ENCAPSED_STRING","\"%s has been moved to wishlist %s\"",594],",",["T_WHITESPACE"," ",594],["T_VARIABLE","$productName",594],",",["T_WHITESPACE"," ",594],["T_VARIABLE","$wishlistName",594],")",["T_WHITESPACE","\n            ",594],")",";",["T_WHITESPACE","\n            ",595],["T_VARIABLE","$wishlist",596],["T_OBJECT_OPERATOR","->",596],["T_STRING","save",596],"(",")",";",["T_WHITESPACE","\n        ",596],"}",["T_WHITESPACE"," ",597],["T_CATCH","catch",597],["T_WHITESPACE"," ",597],"(",["T_STRING","Mage_Core_Exception",597],["T_WHITESPACE"," ",597],["T_VARIABLE","$e",597],")",["T_WHITESPACE"," ",597],"{",["T_WHITESPACE","\n            ",597],["T_VARIABLE","$session",598],["T_OBJECT_OPERATOR","->",598],["T_STRING","addError",598],"(",["T_VARIABLE","$e",598],["T_OBJECT_OPERATOR","->",598],["T_STRING","getMessage",598],"(",")",")",";",["T_WHITESPACE","\n        ",598],"}",["T_WHITESPACE"," ",599],["T_CATCH","catch",599],["T_WHITESPACE"," ",599],"(",["T_STRING","Exception",599],["T_WHITESPACE"," ",599],["T_VARIABLE","$e",599],")",["T_WHITESPACE"," ",599],"{",["T_WHITESPACE","\n            ",599],["T_VARIABLE","$session",600],["T_OBJECT_OPERATOR","->",600],["T_STRING","addException",600],"(",["T_VARIABLE","$e",600],",",["T_WHITESPACE"," ",600],["T_STRING","Mage",600],["T_DOUBLE_COLON","::",600],["T_STRING","helper",600],"(",["T_CONSTANT_ENCAPSED_STRING","'wishlist'",600],")",["T_OBJECT_OPERATOR","->",600],["T_STRING","__",600],"(",["T_CONSTANT_ENCAPSED_STRING","'Cannot move item to wishlist'",600],")",")",";",["T_WHITESPACE","\n        ",600],"}",["T_WHITESPACE","\n\n        ",601],["T_RETURN","return",603],["T_WHITESPACE"," ",603],["T_VARIABLE","$this",603],["T_OBJECT_OPERATOR","->",603],["T_STRING","_redirectUrl",603],"(",["T_STRING","Mage",603],["T_DOUBLE_COLON","::",603],["T_STRING","helper",603],"(",["T_CONSTANT_ENCAPSED_STRING","'checkout\/cart'",603],")",["T_OBJECT_OPERATOR","->",603],["T_STRING","getCartUrl",603],"(",")",")",";",["T_WHITESPACE","\n    ",603],"}",["T_WHITESPACE","\n\n    ",604],["T_DOC_COMMENT","\/**\n     * Prepare wishlist for share\n     *\/",606],["T_WHITESPACE","\n    ",608],["T_PUBLIC","public",609],["T_WHITESPACE"," ",609],["T_FUNCTION","function",609],["T_WHITESPACE"," ",609],["T_STRING","shareAction",609],"(",")",["T_WHITESPACE","\n    ",609],"{",["T_WHITESPACE","\n        ",610],["T_VARIABLE","$this",611],["T_OBJECT_OPERATOR","->",611],["T_STRING","_getWishlist",611],"(",")",";",["T_WHITESPACE","\n        ",611],["T_VARIABLE","$this",612],["T_OBJECT_OPERATOR","->",612],["T_STRING","loadLayout",612],"(",")",";",["T_WHITESPACE","\n        ",612],["T_VARIABLE","$this",613],["T_OBJECT_OPERATOR","->",613],["T_STRING","_initLayoutMessages",613],"(",["T_CONSTANT_ENCAPSED_STRING","'customer\/session'",613],")",";",["T_WHITESPACE","\n        ",613],["T_VARIABLE","$this",614],["T_OBJECT_OPERATOR","->",614],["T_STRING","_initLayoutMessages",614],"(",["T_CONSTANT_ENCAPSED_STRING","'wishlist\/session'",614],")",";",["T_WHITESPACE","\n        ",614],["T_VARIABLE","$this",615],["T_OBJECT_OPERATOR","->",615],["T_STRING","renderLayout",615],"(",")",";",["T_WHITESPACE","\n    ",615],"}",["T_WHITESPACE","\n\n    ",616],["T_DOC_COMMENT","\/**\n     * Share wishlist\n     *\n     * @return Mage_Core_Controller_Varien_Action|void\n     *\/",618],["T_WHITESPACE","\n    ",622],["T_PUBLIC","public",623],["T_WHITESPACE"," ",623],["T_FUNCTION","function",623],["T_WHITESPACE"," ",623],["T_STRING","sendAction",623],"(",")",["T_WHITESPACE","\n    ",623],"{",["T_WHITESPACE","\n        ",624],["T_IF","if",625],["T_WHITESPACE"," ",625],"(","!",["T_VARIABLE","$this",625],["T_OBJECT_OPERATOR","->",625],["T_STRING","_validateFormKey",625],"(",")",")",["T_WHITESPACE"," ",625],"{",["T_WHITESPACE","\n            ",625],["T_RETURN","return",626],["T_WHITESPACE"," ",626],["T_VARIABLE","$this",626],["T_OBJECT_OPERATOR","->",626],["T_STRING","_redirect",626],"(",["T_CONSTANT_ENCAPSED_STRING","'*\/*\/'",626],")",";",["T_WHITESPACE","\n        ",626],"}",["T_WHITESPACE","\n\n        ",627],["T_VARIABLE","$wishlist",629],["T_WHITESPACE"," ",629],"=",["T_WHITESPACE"," ",629],["T_VARIABLE","$this",629],["T_OBJECT_OPERATOR","->",629],["T_STRING","_getWishlist",629],"(",")",";",["T_WHITESPACE","\n        ",629],["T_IF","if",630],["T_WHITESPACE"," ",630],"(","!",["T_VARIABLE","$wishlist",630],")",["T_WHITESPACE"," ",630],"{",["T_WHITESPACE","\n            ",630],["T_RETURN","return",631],["T_WHITESPACE"," ",631],["T_VARIABLE","$this",631],["T_OBJECT_OPERATOR","->",631],["T_STRING","norouteAction",631],"(",")",";",["T_WHITESPACE","\n        ",631],"}",["T_WHITESPACE","\n\n        ",632],["T_VARIABLE","$emails",634],["T_WHITESPACE","  ",634],"=",["T_WHITESPACE"," ",634],["T_STRING","explode",634],"(",["T_CONSTANT_ENCAPSED_STRING","','",634],",",["T_WHITESPACE"," ",634],["T_VARIABLE","$this",634],["T_OBJECT_OPERATOR","->",634],["T_STRING","getRequest",634],"(",")",["T_OBJECT_OPERATOR","->",634],["T_STRING","getPost",634],"(",["T_CONSTANT_ENCAPSED_STRING","'emails'",634],")",")",";",["T_WHITESPACE","\n        ",634],["T_VARIABLE","$message",635],["T_WHITESPACE"," ",635],"=",["T_WHITESPACE"," ",635],["T_STRING","nl2br",635],"(",["T_STRING","htmlspecialchars",635],"(",["T_STRING_CAST","(string)",635],["T_WHITESPACE"," ",635],["T_VARIABLE","$this",635],["T_OBJECT_OPERATOR","->",635],["T_STRING","getRequest",635],"(",")",["T_OBJECT_OPERATOR","->",635],["T_STRING","getPost",635],"(",["T_CONSTANT_ENCAPSED_STRING","'message'",635],")",")",")",";",["T_WHITESPACE","\n        ",635],["T_VARIABLE","$error",636],["T_WHITESPACE","   ",636],"=",["T_WHITESPACE"," ",636],["T_STRING","false",636],";",["T_WHITESPACE","\n        ",636],["T_IF","if",637],["T_WHITESPACE"," ",637],"(",["T_EMPTY","empty",637],"(",["T_VARIABLE","$emails",637],")",")",["T_WHITESPACE"," ",637],"{",["T_WHITESPACE","\n            ",637],["T_VARIABLE","$error",638],["T_WHITESPACE"," ",638],"=",["T_WHITESPACE"," ",638],["T_VARIABLE","$this",638],["T_OBJECT_OPERATOR","->",638],["T_STRING","__",638],"(",["T_CONSTANT_ENCAPSED_STRING","'Email address can\\'t be empty.'",638],")",";",["T_WHITESPACE","\n        ",638],"}",["T_WHITESPACE","\n        ",639],["T_ELSE","else",640],["T_WHITESPACE"," ",640],"{",["T_WHITESPACE","\n            ",640],["T_FOREACH","foreach",641],["T_WHITESPACE"," ",641],"(",["T_VARIABLE","$emails",641],["T_WHITESPACE"," ",641],["T_AS","as",641],["T_WHITESPACE"," ",641],["T_VARIABLE","$index",641],["T_WHITESPACE"," ",641],["T_DOUBLE_ARROW","=>",641],["T_WHITESPACE"," ",641],["T_VARIABLE","$email",641],")",["T_WHITESPACE"," ",641],"{",["T_WHITESPACE","\n                ",641],["T_VARIABLE","$email",642],["T_WHITESPACE"," ",642],"=",["T_WHITESPACE"," ",642],["T_STRING","trim",642],"(",["T_VARIABLE","$email",642],")",";",["T_WHITESPACE","\n                ",642],["T_IF","if",643],["T_WHITESPACE"," ",643],"(","!",["T_STRING","Zend_Validate",643],["T_DOUBLE_COLON","::",643],["T_STRING","is",643],"(",["T_VARIABLE","$email",643],",",["T_WHITESPACE"," ",643],["T_CONSTANT_ENCAPSED_STRING","'EmailAddress'",643],")",")",["T_WHITESPACE"," ",643],"{",["T_WHITESPACE","\n                    ",643],["T_VARIABLE","$error",644],["T_WHITESPACE"," ",644],"=",["T_WHITESPACE"," ",644],["T_VARIABLE","$this",644],["T_OBJECT_OPERATOR","->",644],["T_STRING","__",644],"(",["T_CONSTANT_ENCAPSED_STRING","'Please input a valid email address.'",644],")",";",["T_WHITESPACE","\n                    ",644],["T_BREAK","break",645],";",["T_WHITESPACE","\n                ",645],"}",["T_WHITESPACE","\n                ",646],["T_VARIABLE","$emails",647],"[",["T_VARIABLE","$index",647],"]",["T_WHITESPACE"," ",647],"=",["T_WHITESPACE"," ",647],["T_VARIABLE","$email",647],";",["T_WHITESPACE","\n            ",647],"}",["T_WHITESPACE","\n        ",648],"}",["T_WHITESPACE","\n        ",649],["T_IF","if",650],["T_WHITESPACE"," ",650],"(",["T_VARIABLE","$error",650],")",["T_WHITESPACE"," ",650],"{",["T_WHITESPACE","\n            ",650],["T_STRING","Mage",651],["T_DOUBLE_COLON","::",651],["T_STRING","getSingleton",651],"(",["T_CONSTANT_ENCAPSED_STRING","'wishlist\/session'",651],")",["T_OBJECT_OPERATOR","->",651],["T_STRING","addError",651],"(",["T_VARIABLE","$error",651],")",";",["T_WHITESPACE","\n            ",651],["T_STRING","Mage",652],["T_DOUBLE_COLON","::",652],["T_STRING","getSingleton",652],"(",["T_CONSTANT_ENCAPSED_STRING","'wishlist\/session'",652],")",["T_OBJECT_OPERATOR","->",652],["T_STRING","setSharingForm",652],"(",["T_VARIABLE","$this",652],["T_OBJECT_OPERATOR","->",652],["T_STRING","getRequest",652],"(",")",["T_OBJECT_OPERATOR","->",652],["T_STRING","getPost",652],"(",")",")",";",["T_WHITESPACE","\n            ",652],["T_VARIABLE","$this",653],["T_OBJECT_OPERATOR","->",653],["T_STRING","_redirect",653],"(",["T_CONSTANT_ENCAPSED_STRING","'*\/*\/share'",653],")",";",["T_WHITESPACE","\n            ",653],["T_RETURN","return",654],";",["T_WHITESPACE","\n        ",654],"}",["T_WHITESPACE","\n\n        ",655],["T_VARIABLE","$translate",657],["T_WHITESPACE"," ",657],"=",["T_WHITESPACE"," ",657],["T_STRING","Mage",657],["T_DOUBLE_COLON","::",657],["T_STRING","getSingleton",657],"(",["T_CONSTANT_ENCAPSED_STRING","'core\/translate'",657],")",";",["T_WHITESPACE","\n        ",657],["T_COMMENT","\/* @var $translate Mage_Core_Model_Translate *\/",658],["T_WHITESPACE","\n        ",658],["T_VARIABLE","$translate",659],["T_OBJECT_OPERATOR","->",659],["T_STRING","setTranslateInline",659],"(",["T_STRING","false",659],")",";",["T_WHITESPACE","\n\n        ",659],["T_TRY","try",661],["T_WHITESPACE"," ",661],"{",["T_WHITESPACE","\n            ",661],["T_VARIABLE","$customer",662],["T_WHITESPACE"," ",662],"=",["T_WHITESPACE"," ",662],["T_STRING","Mage",662],["T_DOUBLE_COLON","::",662],["T_STRING","getSingleton",662],"(",["T_CONSTANT_ENCAPSED_STRING","'customer\/session'",662],")",["T_OBJECT_OPERATOR","->",662],["T_STRING","getCustomer",662],"(",")",";",["T_WHITESPACE","\n\n            ",662],["T_COMMENT","\/*if share rss added rss feed to email template*\/",664],["T_WHITESPACE","\n            ",664],["T_IF","if",665],["T_WHITESPACE"," ",665],"(",["T_VARIABLE","$this",665],["T_OBJECT_OPERATOR","->",665],["T_STRING","getRequest",665],"(",")",["T_OBJECT_OPERATOR","->",665],["T_STRING","getParam",665],"(",["T_CONSTANT_ENCAPSED_STRING","'rss_url'",665],")",")",["T_WHITESPACE"," ",665],"{",["T_WHITESPACE","\n                ",665],["T_VARIABLE","$rss_url",666],["T_WHITESPACE"," ",666],"=",["T_WHITESPACE"," ",666],["T_VARIABLE","$this",666],["T_OBJECT_OPERATOR","->",666],["T_STRING","getLayout",666],"(",")",["T_WHITESPACE","\n                    ",666],["T_OBJECT_OPERATOR","->",667],["T_STRING","createBlock",667],"(",["T_CONSTANT_ENCAPSED_STRING","'wishlist\/share_email_rss'",667],")",["T_WHITESPACE","\n                    ",667],["T_OBJECT_OPERATOR","->",668],["T_STRING","setWishlistId",668],"(",["T_VARIABLE","$wishlist",668],["T_OBJECT_OPERATOR","->",668],["T_STRING","getId",668],"(",")",")",["T_WHITESPACE","\n                    ",668],["T_OBJECT_OPERATOR","->",669],["T_STRING","toHtml",669],"(",")",";",["T_WHITESPACE","\n                ",669],["T_VARIABLE","$message",670],["T_WHITESPACE"," ",670],["T_CONCAT_EQUAL",".=",670],["T_WHITESPACE"," ",670],["T_VARIABLE","$rss_url",670],";",["T_WHITESPACE","\n            ",670],"}",["T_WHITESPACE","\n            ",671],["T_VARIABLE","$wishlistBlock",672],["T_WHITESPACE"," ",672],"=",["T_WHITESPACE"," ",672],["T_VARIABLE","$this",672],["T_OBJECT_OPERATOR","->",672],["T_STRING","getLayout",672],"(",")",["T_OBJECT_OPERATOR","->",672],["T_STRING","createBlock",672],"(",["T_CONSTANT_ENCAPSED_STRING","'wishlist\/share_email_items'",672],")",["T_OBJECT_OPERATOR","->",672],["T_STRING","toHtml",672],"(",")",";",["T_WHITESPACE","\n\n            ",672],["T_VARIABLE","$emails",674],["T_WHITESPACE"," ",674],"=",["T_WHITESPACE"," ",674],["T_STRING","array_unique",674],"(",["T_VARIABLE","$emails",674],")",";",["T_WHITESPACE","\n            ",674],["T_COMMENT","\/* @var $emailModel Mage_Core_Model_Email_Template *\/",675],["T_WHITESPACE","\n            ",675],["T_VARIABLE","$emailModel",676],["T_WHITESPACE"," ",676],"=",["T_WHITESPACE"," ",676],["T_STRING","Mage",676],["T_DOUBLE_COLON","::",676],["T_STRING","getModel",676],"(",["T_CONSTANT_ENCAPSED_STRING","'core\/email_template'",676],")",";",["T_WHITESPACE","\n\n            ",676],["T_VARIABLE","$sharingCode",678],["T_WHITESPACE"," ",678],"=",["T_WHITESPACE"," ",678],["T_VARIABLE","$wishlist",678],["T_OBJECT_OPERATOR","->",678],["T_STRING","getSharingCode",678],"(",")",";",["T_WHITESPACE","\n            ",678],["T_FOREACH","foreach",679],["T_WHITESPACE"," ",679],"(",["T_VARIABLE","$emails",679],["T_WHITESPACE"," ",679],["T_AS","as",679],["T_WHITESPACE"," ",679],["T_VARIABLE","$email",679],")",["T_WHITESPACE"," ",679],"{",["T_WHITESPACE","\n                ",679],["T_VARIABLE","$emailModel",680],["T_OBJECT_OPERATOR","->",680],["T_STRING","sendTransactional",680],"(",["T_WHITESPACE","\n                    ",680],["T_STRING","Mage",681],["T_DOUBLE_COLON","::",681],["T_STRING","getStoreConfig",681],"(",["T_CONSTANT_ENCAPSED_STRING","'wishlist\/email\/email_template'",681],")",",",["T_WHITESPACE","\n                    ",681],["T_STRING","Mage",682],["T_DOUBLE_COLON","::",682],["T_STRING","getStoreConfig",682],"(",["T_CONSTANT_ENCAPSED_STRING","'wishlist\/email\/email_identity'",682],")",",",["T_WHITESPACE","\n                    ",682],["T_VARIABLE","$email",683],",",["T_WHITESPACE","\n                    ",683],["T_STRING","null",684],",",["T_WHITESPACE","\n                    ",684],["T_ARRAY","array",685],"(",["T_WHITESPACE","\n                        ",685],["T_CONSTANT_ENCAPSED_STRING","'customer'",686],["T_WHITESPACE","       ",686],["T_DOUBLE_ARROW","=>",686],["T_WHITESPACE"," ",686],["T_VARIABLE","$customer",686],",",["T_WHITESPACE","\n                        ",686],["T_CONSTANT_ENCAPSED_STRING","'salable'",687],["T_WHITESPACE","        ",687],["T_DOUBLE_ARROW","=>",687],["T_WHITESPACE"," ",687],["T_VARIABLE","$wishlist",687],["T_OBJECT_OPERATOR","->",687],["T_STRING","isSalable",687],"(",")",["T_WHITESPACE"," ",687],"?",["T_WHITESPACE"," ",687],["T_CONSTANT_ENCAPSED_STRING","'yes'",687],["T_WHITESPACE"," ",687],":",["T_WHITESPACE"," ",687],["T_CONSTANT_ENCAPSED_STRING","''",687],",",["T_WHITESPACE","\n                        ",687],["T_CONSTANT_ENCAPSED_STRING","'items'",688],["T_WHITESPACE","          ",688],["T_DOUBLE_ARROW","=>",688],["T_WHITESPACE"," ",688],["T_VARIABLE","$wishlistBlock",688],",",["T_WHITESPACE","\n                        ",688],["T_CONSTANT_ENCAPSED_STRING","'addAllLink'",689],["T_WHITESPACE","     ",689],["T_DOUBLE_ARROW","=>",689],["T_WHITESPACE"," ",689],["T_STRING","Mage",689],["T_DOUBLE_COLON","::",689],["T_STRING","getUrl",689],"(",["T_CONSTANT_ENCAPSED_STRING","'*\/shared\/allcart'",689],",",["T_WHITESPACE"," ",689],["T_ARRAY","array",689],"(",["T_CONSTANT_ENCAPSED_STRING","'code'",689],["T_WHITESPACE"," ",689],["T_DOUBLE_ARROW","=>",689],["T_WHITESPACE"," ",689],["T_VARIABLE","$sharingCode",689],")",")",",",["T_WHITESPACE","\n                        ",689],["T_CONSTANT_ENCAPSED_STRING","'viewOnSiteLink'",690],["T_WHITESPACE"," ",690],["T_DOUBLE_ARROW","=>",690],["T_WHITESPACE"," ",690],["T_STRING","Mage",690],["T_DOUBLE_COLON","::",690],["T_STRING","getUrl",690],"(",["T_CONSTANT_ENCAPSED_STRING","'*\/shared\/index'",690],",",["T_WHITESPACE"," ",690],["T_ARRAY","array",690],"(",["T_CONSTANT_ENCAPSED_STRING","'code'",690],["T_WHITESPACE"," ",690],["T_DOUBLE_ARROW","=>",690],["T_WHITESPACE"," ",690],["T_VARIABLE","$sharingCode",690],")",")",",",["T_WHITESPACE","\n                        ",690],["T_CONSTANT_ENCAPSED_STRING","'message'",691],["T_WHITESPACE","        ",691],["T_DOUBLE_ARROW","=>",691],["T_WHITESPACE"," ",691],["T_VARIABLE","$message",691],["T_WHITESPACE","\n                    ",691],")",["T_WHITESPACE","\n                ",692],")",";",["T_WHITESPACE","\n            ",693],"}",["T_WHITESPACE","\n\n            ",694],["T_VARIABLE","$wishlist",696],["T_OBJECT_OPERATOR","->",696],["T_STRING","setShared",696],"(",["T_LNUMBER","1",696],")",";",["T_WHITESPACE","\n            ",696],["T_VARIABLE","$wishlist",697],["T_OBJECT_OPERATOR","->",697],["T_STRING","save",697],"(",")",";",["T_WHITESPACE","\n\n            ",697],["T_VARIABLE","$translate",699],["T_OBJECT_OPERATOR","->",699],["T_STRING","setTranslateInline",699],"(",["T_STRING","true",699],")",";",["T_WHITESPACE","\n\n            ",699],["T_STRING","Mage",701],["T_DOUBLE_COLON","::",701],["T_STRING","dispatchEvent",701],"(",["T_CONSTANT_ENCAPSED_STRING","'wishlist_share'",701],",",["T_WHITESPACE"," ",701],["T_ARRAY","array",701],"(",["T_CONSTANT_ENCAPSED_STRING","'wishlist'",701],["T_WHITESPACE"," ",701],["T_DOUBLE_ARROW","=>",701],["T_WHITESPACE"," ",701],["T_VARIABLE","$wishlist",701],")",")",";",["T_WHITESPACE","\n            ",701],["T_STRING","Mage",702],["T_DOUBLE_COLON","::",702],["T_STRING","getSingleton",702],"(",["T_CONSTANT_ENCAPSED_STRING","'customer\/session'",702],")",["T_OBJECT_OPERATOR","->",702],["T_STRING","addSuccess",702],"(",["T_WHITESPACE","\n                ",702],["T_VARIABLE","$this",703],["T_OBJECT_OPERATOR","->",703],["T_STRING","__",703],"(",["T_CONSTANT_ENCAPSED_STRING","'Your Wishlist has been shared.'",703],")",["T_WHITESPACE","\n            ",703],")",";",["T_WHITESPACE","\n            ",704],["T_VARIABLE","$this",705],["T_OBJECT_OPERATOR","->",705],["T_STRING","_redirect",705],"(",["T_CONSTANT_ENCAPSED_STRING","'*\/*'",705],",",["T_WHITESPACE"," ",705],["T_ARRAY","array",705],"(",["T_CONSTANT_ENCAPSED_STRING","'wishlist_id'",705],["T_WHITESPACE"," ",705],["T_DOUBLE_ARROW","=>",705],["T_WHITESPACE"," ",705],["T_VARIABLE","$wishlist",705],["T_OBJECT_OPERATOR","->",705],["T_STRING","getId",705],"(",")",")",")",";",["T_WHITESPACE","\n        ",705],"}",["T_WHITESPACE","\n        ",706],["T_CATCH","catch",707],["T_WHITESPACE"," ",707],"(",["T_STRING","Exception",707],["T_WHITESPACE"," ",707],["T_VARIABLE","$e",707],")",["T_WHITESPACE"," ",707],"{",["T_WHITESPACE","\n            ",707],["T_VARIABLE","$translate",708],["T_OBJECT_OPERATOR","->",708],["T_STRING","setTranslateInline",708],"(",["T_STRING","true",708],")",";",["T_WHITESPACE","\n\n            ",708],["T_STRING","Mage",710],["T_DOUBLE_COLON","::",710],["T_STRING","getSingleton",710],"(",["T_CONSTANT_ENCAPSED_STRING","'wishlist\/session'",710],")",["T_OBJECT_OPERATOR","->",710],["T_STRING","addError",710],"(",["T_VARIABLE","$e",710],["T_OBJECT_OPERATOR","->",710],["T_STRING","getMessage",710],"(",")",")",";",["T_WHITESPACE","\n            ",710],["T_STRING","Mage",711],["T_DOUBLE_COLON","::",711],["T_STRING","getSingleton",711],"(",["T_CONSTANT_ENCAPSED_STRING","'wishlist\/session'",711],")",["T_OBJECT_OPERATOR","->",711],["T_STRING","setSharingForm",711],"(",["T_VARIABLE","$this",711],["T_OBJECT_OPERATOR","->",711],["T_STRING","getRequest",711],"(",")",["T_OBJECT_OPERATOR","->",711],["T_STRING","getPost",711],"(",")",")",";",["T_WHITESPACE","\n            ",711],["T_VARIABLE","$this",712],["T_OBJECT_OPERATOR","->",712],["T_STRING","_redirect",712],"(",["T_CONSTANT_ENCAPSED_STRING","'*\/*\/share'",712],")",";",["T_WHITESPACE","\n        ",712],"}",["T_WHITESPACE","\n    ",713],"}",["T_WHITESPACE","\n\n    ",714],["T_DOC_COMMENT","\/**\n     * Custom options download action\n     * @return void\n     *\/",716],["T_WHITESPACE","\n    ",719],["T_PUBLIC","public",720],["T_WHITESPACE"," ",720],["T_FUNCTION","function",720],["T_WHITESPACE"," ",720],["T_STRING","downloadCustomOptionAction",720],"(",")",["T_WHITESPACE","\n    ",720],"{",["T_WHITESPACE","\n        ",721],["T_VARIABLE","$option",722],["T_WHITESPACE"," ",722],"=",["T_WHITESPACE"," ",722],["T_STRING","Mage",722],["T_DOUBLE_COLON","::",722],["T_STRING","getModel",722],"(",["T_CONSTANT_ENCAPSED_STRING","'wishlist\/item_option'",722],")",["T_OBJECT_OPERATOR","->",722],["T_STRING","load",722],"(",["T_VARIABLE","$this",722],["T_OBJECT_OPERATOR","->",722],["T_STRING","getRequest",722],"(",")",["T_OBJECT_OPERATOR","->",722],["T_STRING","getParam",722],"(",["T_CONSTANT_ENCAPSED_STRING","'id'",722],")",")",";",["T_WHITESPACE","\n\n        ",722],["T_IF","if",724],["T_WHITESPACE"," ",724],"(","!",["T_VARIABLE","$option",724],["T_OBJECT_OPERATOR","->",724],["T_STRING","getId",724],"(",")",")",["T_WHITESPACE"," ",724],"{",["T_WHITESPACE","\n            ",724],["T_RETURN","return",725],["T_WHITESPACE"," ",725],["T_VARIABLE","$this",725],["T_OBJECT_OPERATOR","->",725],["T_STRING","_forward",725],"(",["T_CONSTANT_ENCAPSED_STRING","'noRoute'",725],")",";",["T_WHITESPACE","\n        ",725],"}",["T_WHITESPACE","\n\n        ",726],["T_VARIABLE","$optionId",728],["T_WHITESPACE"," ",728],"=",["T_WHITESPACE"," ",728],["T_STRING","null",728],";",["T_WHITESPACE","\n        ",728],["T_IF","if",729],["T_WHITESPACE"," ",729],"(",["T_STRING","strpos",729],"(",["T_VARIABLE","$option",729],["T_OBJECT_OPERATOR","->",729],["T_STRING","getCode",729],"(",")",",",["T_WHITESPACE"," ",729],["T_STRING","Mage_Catalog_Model_Product_Type_Abstract",729],["T_DOUBLE_COLON","::",729],["T_STRING","OPTION_PREFIX",729],")",["T_WHITESPACE"," ",729],["T_IS_IDENTICAL","===",729],["T_WHITESPACE"," ",729],["T_LNUMBER","0",729],")",["T_WHITESPACE"," ",729],"{",["T_WHITESPACE","\n            ",729],["T_VARIABLE","$optionId",730],["T_WHITESPACE"," ",730],"=",["T_WHITESPACE"," ",730],["T_STRING","str_replace",730],"(",["T_STRING","Mage_Catalog_Model_Product_Type_Abstract",730],["T_DOUBLE_COLON","::",730],["T_STRING","OPTION_PREFIX",730],",",["T_WHITESPACE"," ",730],["T_CONSTANT_ENCAPSED_STRING","''",730],",",["T_WHITESPACE"," ",730],["T_VARIABLE","$option",730],["T_OBJECT_OPERATOR","->",730],["T_STRING","getCode",730],"(",")",")",";",["T_WHITESPACE","\n            ",730],["T_IF","if",731],["T_WHITESPACE"," ",731],"(",["T_INT_CAST","(int)",731],["T_VARIABLE","$optionId",731],["T_WHITESPACE"," ",731],["T_IS_NOT_EQUAL","!=",731],["T_WHITESPACE"," ",731],["T_VARIABLE","$optionId",731],")",["T_WHITESPACE"," ",731],"{",["T_WHITESPACE","\n                ",731],["T_RETURN","return",732],["T_WHITESPACE"," ",732],["T_VARIABLE","$this",732],["T_OBJECT_OPERATOR","->",732],["T_STRING","_forward",732],"(",["T_CONSTANT_ENCAPSED_STRING","'noRoute'",732],")",";",["T_WHITESPACE","\n            ",732],"}",["T_WHITESPACE","\n        ",733],"}",["T_WHITESPACE","\n        ",734],["T_VARIABLE","$productOption",735],["T_WHITESPACE"," ",735],"=",["T_WHITESPACE"," ",735],["T_STRING","Mage",735],["T_DOUBLE_COLON","::",735],["T_STRING","getModel",735],"(",["T_CONSTANT_ENCAPSED_STRING","'catalog\/product_option'",735],")",["T_OBJECT_OPERATOR","->",735],["T_STRING","load",735],"(",["T_VARIABLE","$optionId",735],")",";",["T_WHITESPACE","\n\n        ",735],["T_IF","if",737],["T_WHITESPACE"," ",737],"(","!",["T_VARIABLE","$productOption",737],["T_WHITESPACE","\n            ",737],["T_BOOLEAN_OR","||",738],["T_WHITESPACE"," ",738],"!",["T_VARIABLE","$productOption",738],["T_OBJECT_OPERATOR","->",738],["T_STRING","getId",738],"(",")",["T_WHITESPACE","\n            ",738],["T_BOOLEAN_OR","||",739],["T_WHITESPACE"," ",739],["T_VARIABLE","$productOption",739],["T_OBJECT_OPERATOR","->",739],["T_STRING","getProductId",739],"(",")",["T_WHITESPACE"," ",739],["T_IS_NOT_EQUAL","!=",739],["T_WHITESPACE"," ",739],["T_VARIABLE","$option",739],["T_OBJECT_OPERATOR","->",739],["T_STRING","getProductId",739],"(",")",["T_WHITESPACE","\n            ",739],["T_BOOLEAN_OR","||",740],["T_WHITESPACE"," ",740],["T_VARIABLE","$productOption",740],["T_OBJECT_OPERATOR","->",740],["T_STRING","getType",740],"(",")",["T_WHITESPACE"," ",740],["T_IS_NOT_EQUAL","!=",740],["T_WHITESPACE"," ",740],["T_CONSTANT_ENCAPSED_STRING","'file'",740],["T_WHITESPACE","\n        ",740],")",["T_WHITESPACE"," ",741],"{",["T_WHITESPACE","\n            ",741],["T_RETURN","return",742],["T_WHITESPACE"," ",742],["T_VARIABLE","$this",742],["T_OBJECT_OPERATOR","->",742],["T_STRING","_forward",742],"(",["T_CONSTANT_ENCAPSED_STRING","'noRoute'",742],")",";",["T_WHITESPACE","\n        ",742],"}",["T_WHITESPACE","\n\n        ",743],["T_TRY","try",745],["T_WHITESPACE"," ",745],"{",["T_WHITESPACE","\n            ",745],["T_VARIABLE","$info",746],["T_WHITESPACE","      ",746],"=",["T_WHITESPACE"," ",746],["T_STRING","unserialize",746],"(",["T_VARIABLE","$option",746],["T_OBJECT_OPERATOR","->",746],["T_STRING","getValue",746],"(",")",")",";",["T_WHITESPACE","\n            ",746],["T_VARIABLE","$filePath",747],["T_WHITESPACE","  ",747],"=",["T_WHITESPACE"," ",747],["T_STRING","Mage",747],["T_DOUBLE_COLON","::",747],["T_STRING","getBaseDir",747],"(",")",["T_WHITESPACE"," ",747],".",["T_WHITESPACE"," ",747],["T_VARIABLE","$info",747],"[",["T_CONSTANT_ENCAPSED_STRING","'quote_path'",747],"]",";",["T_WHITESPACE","\n            ",747],["T_VARIABLE","$secretKey",748],["T_WHITESPACE"," ",748],"=",["T_WHITESPACE"," ",748],["T_VARIABLE","$this",748],["T_OBJECT_OPERATOR","->",748],["T_STRING","getRequest",748],"(",")",["T_OBJECT_OPERATOR","->",748],["T_STRING","getParam",748],"(",["T_CONSTANT_ENCAPSED_STRING","'key'",748],")",";",["T_WHITESPACE","\n\n            ",748],["T_IF","if",750],["T_WHITESPACE"," ",750],"(",["T_VARIABLE","$secretKey",750],["T_WHITESPACE"," ",750],["T_IS_EQUAL","==",750],["T_WHITESPACE"," ",750],["T_VARIABLE","$info",750],"[",["T_CONSTANT_ENCAPSED_STRING","'secret_key'",750],"]",")",["T_WHITESPACE"," ",750],"{",["T_WHITESPACE","\n                ",750],["T_VARIABLE","$this",751],["T_OBJECT_OPERATOR","->",751],["T_STRING","_prepareDownloadResponse",751],"(",["T_VARIABLE","$info",751],"[",["T_CONSTANT_ENCAPSED_STRING","'title'",751],"]",",",["T_WHITESPACE"," ",751],["T_ARRAY","array",751],"(",["T_WHITESPACE","\n                    ",751],["T_CONSTANT_ENCAPSED_STRING","'value'",752],["T_WHITESPACE"," ",752],["T_DOUBLE_ARROW","=>",752],["T_WHITESPACE"," ",752],["T_VARIABLE","$filePath",752],",",["T_WHITESPACE","\n                    ",752],["T_CONSTANT_ENCAPSED_STRING","'type'",753],["T_WHITESPACE","  ",753],["T_DOUBLE_ARROW","=>",753],["T_WHITESPACE"," ",753],["T_CONSTANT_ENCAPSED_STRING","'filename'",753],["T_WHITESPACE","\n                ",753],")",")",";",["T_WHITESPACE","\n            ",754],"}",["T_WHITESPACE","\n\n        ",755],"}",["T_WHITESPACE"," ",757],["T_CATCH","catch",757],["T_WHITESPACE"," ",757],"(",["T_STRING","Exception",757],["T_WHITESPACE"," ",757],["T_VARIABLE","$e",757],")",["T_WHITESPACE"," ",757],"{",["T_WHITESPACE","\n            ",757],["T_VARIABLE","$this",758],["T_OBJECT_OPERATOR","->",758],["T_STRING","_forward",758],"(",["T_CONSTANT_ENCAPSED_STRING","'noRoute'",758],")",";",["T_WHITESPACE","\n        ",758],"}",["T_WHITESPACE","\n        ",759],["T_EXIT","exit",760],"(",["T_LNUMBER","0",760],")",";",["T_WHITESPACE","\n    ",760],"}",["T_WHITESPACE","\n",761],"}",["T_WHITESPACE","\n",762]]
[["T_OPEN_TAG","<?php\n",1],["T_DOC_COMMENT","\/**\n * Magento\n *\n * NOTICE OF LICENSE\n *\n * This source file is subject to the Open Software License (OSL 3.0)\n * that is bundled with this package in the file LICENSE.txt.\n * It is also available through the world-wide-web at this URL:\n * http:\/\/opensource.org\/licenses\/osl-3.0.php\n * If you did not receive a copy of the license and are unable to\n * obtain it through the world-wide-web, please send an email\n * to license@magento.com so we can send you a copy immediately.\n *\n * DISCLAIMER\n *\n * Do not edit or add to this file if you wish to upgrade Magento to newer\n * versions in the future. If you wish to customize Magento for your\n * needs please refer to http:\/\/www.magento.com for more information.\n *\n * @category    Mage\n * @package     Mage_Wishlist\n * @copyright  Copyright (c) 2006-2016 X.commerce, Inc. and affiliates (http:\/\/www.magento.com)\n * @license    http:\/\/opensource.org\/licenses\/osl-3.0.php  Open Software License (OSL 3.0)\n *\/",2],["T_WHITESPACE","\n\n\n",25],["T_DOC_COMMENT","\/**\n * Wishlist item model\n *\n * @method Mage_Wishlist_Model_Resource_Item getResource()\n * @method int getWishlistId()\n * @method Mage_Wishlist_Model_Item setWishlistId(int $value)\n * @method int getProductId()\n * @method Mage_Wishlist_Model_Item setProductId(int $value)\n * @method int getStoreId()\n * @method Mage_Wishlist_Model_Item setStoreId(int $value)\n * @method string getAddedAt()\n * @method Mage_Wishlist_Model_Item setAddedAt(string $value)\n * @method string getDescription()\n * @method Mage_Wishlist_Model_Item setDescription(string $value)\n *\n * @category    Mage\n * @package     Mage_Wishlist\n * @author      Magento Core Team <core@magentocommerce.com>\n *\/",28],["T_WHITESPACE","\n",46],["T_CLASS","class",47],["T_WHITESPACE"," ",47],["T_STRING","Mage_Wishlist_Model_Item",47],["T_WHITESPACE"," ",47],["T_EXTENDS","extends",47],["T_WHITESPACE"," ",47],["T_STRING","Mage_Core_Model_Abstract",47],["T_WHITESPACE","\n    ",47],["T_IMPLEMENTS","implements",48],["T_WHITESPACE"," ",48],["T_STRING","Mage_Catalog_Model_Product_Configuration_Item_Interface",48],["T_WHITESPACE","\n",48],"{",["T_WHITESPACE","\n    ",49],["T_CONST","const",50],["T_WHITESPACE"," ",50],["T_STRING","EXCEPTION_CODE_NOT_SALABLE",50],["T_WHITESPACE","            ",50],"=",["T_WHITESPACE"," ",50],["T_LNUMBER","901",50],";",["T_WHITESPACE","\n    ",50],["T_CONST","const",51],["T_WHITESPACE"," ",51],["T_STRING","EXCEPTION_CODE_HAS_REQUIRED_OPTIONS",51],["T_WHITESPACE","   ",51],"=",["T_WHITESPACE"," ",51],["T_LNUMBER","902",51],";",["T_WHITESPACE","\n\n    ",51],["T_DOC_COMMENT","\/**\n     * We can store product store product configuration\n     * and add grouped attributes after 1.4.2.0\n     *\n     * @deprecated after 1.4.2.0\n     *\/",53],["T_WHITESPACE","\n    ",58],["T_CONST","const",59],["T_WHITESPACE"," ",59],["T_STRING","EXCEPTION_CODE_IS_GROUPED_PRODUCT",59],["T_WHITESPACE","     ",59],"=",["T_WHITESPACE"," ",59],["T_LNUMBER","903",59],";",["T_WHITESPACE","\n    ",59],["T_CONST","const",60],["T_WHITESPACE"," ",60],["T_STRING","EXCEPTION_CODE_NOT_SPECIFIED_PRODUCT",60],["T_WHITESPACE","  ",60],"=",["T_WHITESPACE"," ",60],["T_LNUMBER","904",60],";",["T_WHITESPACE","\n\n    ",60],["T_DOC_COMMENT","\/**\n     * Custom path to download attached file\n     * @var string\n     *\/",62],["T_WHITESPACE","\n    ",65],["T_PROTECTED","protected",66],["T_WHITESPACE"," ",66],["T_VARIABLE","$_customOptionDownloadUrl",66],["T_WHITESPACE"," ",66],"=",["T_WHITESPACE"," ",66],["T_CONSTANT_ENCAPSED_STRING","'wishlist\/index\/downloadCustomOption'",66],";",["T_WHITESPACE","\n\n   ",66],["T_DOC_COMMENT","\/**\n     * Prefix of model events names\n     *\n     * @var string\n     *\/",68],["T_WHITESPACE","\n    ",72],["T_PROTECTED","protected",73],["T_WHITESPACE"," ",73],["T_VARIABLE","$_eventPrefix",73],["T_WHITESPACE"," ",73],"=",["T_WHITESPACE"," ",73],["T_CONSTANT_ENCAPSED_STRING","'wishlist_item'",73],";",["T_WHITESPACE","\n\n    ",73],["T_DOC_COMMENT","\/**\n     * Parameter name in event\n     *\n     * In observe method you can use $observer->getEvent()->getItem() in this case\n     *\n     * @var string\n     *\/",75],["T_WHITESPACE","\n    ",81],["T_PROTECTED","protected",82],["T_WHITESPACE"," ",82],["T_VARIABLE","$_eventObject",82],["T_WHITESPACE"," ",82],"=",["T_WHITESPACE"," ",82],["T_CONSTANT_ENCAPSED_STRING","'item'",82],";",["T_WHITESPACE","\n\n    ",82],["T_DOC_COMMENT","\/**\n     * Item options array\n     *\n     * @var array\n     *\/",84],["T_WHITESPACE","\n    ",88],["T_PROTECTED","protected",89],["T_WHITESPACE"," ",89],["T_VARIABLE","$_options",89],["T_WHITESPACE","             ",89],"=",["T_WHITESPACE"," ",89],["T_ARRAY","array",89],"(",")",";",["T_WHITESPACE","\n\n    ",89],["T_DOC_COMMENT","\/**\n     * Item options by code cache\n     *\n     * @var array\n     *\/",91],["T_WHITESPACE","\n    ",95],["T_PROTECTED","protected",96],["T_WHITESPACE"," ",96],["T_VARIABLE","$_optionsByCode",96],["T_WHITESPACE","       ",96],"=",["T_WHITESPACE"," ",96],["T_ARRAY","array",96],"(",")",";",["T_WHITESPACE","\n\n    ",96],["T_DOC_COMMENT","\/**\n     * Not Represent options\n     *\n     * @var array\n     *\/",98],["T_WHITESPACE","\n    ",102],["T_PROTECTED","protected",103],["T_WHITESPACE"," ",103],["T_VARIABLE","$_notRepresentOptions",103],["T_WHITESPACE"," ",103],"=",["T_WHITESPACE"," ",103],["T_ARRAY","array",103],"(",["T_CONSTANT_ENCAPSED_STRING","'info_buyRequest'",103],")",";",["T_WHITESPACE","\n\n    ",103],["T_DOC_COMMENT","\/**\n     * Flag stating that options were successfully saved\n     *\n     *\/",105],["T_WHITESPACE","\n    ",108],["T_PROTECTED","protected",109],["T_WHITESPACE"," ",109],["T_VARIABLE","$_flagOptionsSaved",109],["T_WHITESPACE"," ",109],"=",["T_WHITESPACE"," ",109],["T_STRING","null",109],";",["T_WHITESPACE","\n\n    ",109],["T_DOC_COMMENT","\/**\n     * Initialize resource model\n     *\n     *\/",111],["T_WHITESPACE","\n    ",114],["T_PROTECTED","protected",115],["T_WHITESPACE"," ",115],["T_FUNCTION","function",115],["T_WHITESPACE"," ",115],["T_STRING","_construct",115],"(",")",["T_WHITESPACE","\n    ",115],"{",["T_WHITESPACE","\n        ",116],["T_VARIABLE","$this",117],["T_OBJECT_OPERATOR","->",117],["T_STRING","_cacheTag",117],["T_WHITESPACE"," ",117],"=",["T_WHITESPACE"," ",117],["T_CONSTANT_ENCAPSED_STRING","'wishlist_item'",117],";",["T_WHITESPACE","\n        ",117],["T_VARIABLE","$this",118],["T_OBJECT_OPERATOR","->",118],["T_STRING","_init",118],"(",["T_CONSTANT_ENCAPSED_STRING","'wishlist\/item'",118],")",";",["T_WHITESPACE","\n    ",118],"}",["T_WHITESPACE","\n\n    ",119],["T_DOC_COMMENT","\/**\n     * Set quantity. If quantity is less than 0 - set it to 1\n     *\n     * @param int $qty\n     * @return Mage_Wishlist_Model_Item\n     *\/",121],["T_WHITESPACE","\n    ",126],["T_PUBLIC","public",127],["T_WHITESPACE"," ",127],["T_FUNCTION","function",127],["T_WHITESPACE"," ",127],["T_STRING","setQty",127],"(",["T_VARIABLE","$qty",127],")",["T_WHITESPACE","\n    ",127],"{",["T_WHITESPACE","\n        ",128],["T_VARIABLE","$this",129],["T_OBJECT_OPERATOR","->",129],["T_STRING","setData",129],"(",["T_CONSTANT_ENCAPSED_STRING","'qty'",129],",",["T_WHITESPACE"," ",129],"(",["T_VARIABLE","$qty",129],["T_WHITESPACE"," ",129],["T_IS_GREATER_OR_EQUAL",">=",129],["T_WHITESPACE"," ",129],["T_LNUMBER","0",129],")",["T_WHITESPACE"," ",129],"?",["T_WHITESPACE"," ",129],["T_VARIABLE","$qty",129],["T_WHITESPACE"," ",129],":",["T_WHITESPACE"," ",129],["T_LNUMBER","1",129],["T_WHITESPACE"," ",129],")",";",["T_WHITESPACE","\n        ",129],["T_RETURN","return",130],["T_WHITESPACE"," ",130],["T_VARIABLE","$this",130],";",["T_WHITESPACE","\n    ",130],"}",["T_WHITESPACE","\n\n    ",131],["T_DOC_COMMENT","\/**\n     * Retrieve resource instance wrapper\n     *\n     * @return Mage_Wishlist_Model_Mysql4_Item\n     *\/",133],["T_WHITESPACE","\n    ",137],["T_PROTECTED","protected",138],["T_WHITESPACE"," ",138],["T_FUNCTION","function",138],["T_WHITESPACE"," ",138],["T_STRING","_getResource",138],"(",")",["T_WHITESPACE","\n    ",138],"{",["T_WHITESPACE","\n        ",139],["T_RETURN","return",140],["T_WHITESPACE"," ",140],["T_STRING","parent",140],["T_DOUBLE_COLON","::",140],["T_STRING","_getResource",140],"(",")",";",["T_WHITESPACE","\n    ",140],"}",["T_WHITESPACE","\n\n    ",141],["T_DOC_COMMENT","\/**\n     * Check if two options array are identical\n     *\n     * @param array $options1\n     * @param array $options2\n     * @return bool\n     *\/",143],["T_WHITESPACE","\n    ",149],["T_PROTECTED","protected",150],["T_WHITESPACE"," ",150],["T_FUNCTION","function",150],["T_WHITESPACE"," ",150],["T_STRING","_compareOptions",150],"(",["T_VARIABLE","$options1",150],",",["T_WHITESPACE"," ",150],["T_VARIABLE","$options2",150],")",["T_WHITESPACE","\n    ",150],"{",["T_WHITESPACE","\n        ",151],["T_VARIABLE","$skipOptions",152],["T_WHITESPACE"," ",152],"=",["T_WHITESPACE"," ",152],["T_ARRAY","array",152],"(",["T_CONSTANT_ENCAPSED_STRING","'id'",152],",",["T_WHITESPACE"," ",152],["T_CONSTANT_ENCAPSED_STRING","'qty'",152],",",["T_WHITESPACE"," ",152],["T_CONSTANT_ENCAPSED_STRING","'return_url'",152],")",";",["T_WHITESPACE","\n        ",152],["T_FOREACH","foreach",153],["T_WHITESPACE"," ",153],"(",["T_VARIABLE","$options1",153],["T_WHITESPACE"," ",153],["T_AS","as",153],["T_WHITESPACE"," ",153],["T_VARIABLE","$code",153],["T_WHITESPACE"," ",153],["T_DOUBLE_ARROW","=>",153],["T_WHITESPACE"," ",153],["T_VARIABLE","$value",153],")",["T_WHITESPACE"," ",153],"{",["T_WHITESPACE","\n            ",153],["T_IF","if",154],["T_WHITESPACE"," ",154],"(",["T_STRING","in_array",154],"(",["T_VARIABLE","$code",154],",",["T_WHITESPACE"," ",154],["T_VARIABLE","$skipOptions",154],")",")",["T_WHITESPACE"," ",154],"{",["T_WHITESPACE","\n                ",154],["T_CONTINUE","continue",155],";",["T_WHITESPACE","\n            ",155],"}",["T_WHITESPACE","\n            ",156],["T_IF","if",157],["T_WHITESPACE"," ",157],"(","!",["T_ISSET","isset",157],"(",["T_VARIABLE","$options2",157],"[",["T_VARIABLE","$code",157],"]",")",["T_WHITESPACE"," ",157],["T_BOOLEAN_OR","||",157],["T_WHITESPACE"," ",157],["T_VARIABLE","$options2",157],"[",["T_VARIABLE","$code",157],"]",["T_WHITESPACE"," ",157],["T_IS_NOT_EQUAL","!=",157],["T_WHITESPACE"," ",157],["T_VARIABLE","$value",157],")",["T_WHITESPACE"," ",157],"{",["T_WHITESPACE","\n                ",157],["T_RETURN","return",158],["T_WHITESPACE"," ",158],["T_STRING","false",158],";",["T_WHITESPACE","\n            ",158],"}",["T_WHITESPACE","\n        ",159],"}",["T_WHITESPACE","\n        ",160],["T_RETURN","return",161],["T_WHITESPACE"," ",161],["T_STRING","true",161],";",["T_WHITESPACE","\n    ",161],"}",["T_WHITESPACE","\n\n    ",162],["T_DOC_COMMENT","\/**\n     * Register option code\n     *\n     * @param   Mage_Wishlist_Model_Item_Option $option\n     * @return  Mage_Wishlist_Model_Item\n     *\/",164],["T_WHITESPACE","\n    ",169],["T_PROTECTED","protected",170],["T_WHITESPACE"," ",170],["T_FUNCTION","function",170],["T_WHITESPACE"," ",170],["T_STRING","_addOptionCode",170],"(",["T_VARIABLE","$option",170],")",["T_WHITESPACE","\n    ",170],"{",["T_WHITESPACE","\n        ",171],["T_IF","if",172],["T_WHITESPACE"," ",172],"(","!",["T_ISSET","isset",172],"(",["T_VARIABLE","$this",172],["T_OBJECT_OPERATOR","->",172],["T_STRING","_optionsByCode",172],"[",["T_VARIABLE","$option",172],["T_OBJECT_OPERATOR","->",172],["T_STRING","getCode",172],"(",")","]",")",")",["T_WHITESPACE"," ",172],"{",["T_WHITESPACE","\n            ",172],["T_VARIABLE","$this",173],["T_OBJECT_OPERATOR","->",173],["T_STRING","_optionsByCode",173],"[",["T_VARIABLE","$option",173],["T_OBJECT_OPERATOR","->",173],["T_STRING","getCode",173],"(",")","]",["T_WHITESPACE"," ",173],"=",["T_WHITESPACE"," ",173],["T_VARIABLE","$option",173],";",["T_WHITESPACE","\n        ",173],"}",["T_WHITESPACE","\n        ",174],["T_ELSE","else",175],["T_WHITESPACE"," ",175],"{",["T_WHITESPACE","\n            ",175],["T_STRING","Mage",176],["T_DOUBLE_COLON","::",176],["T_STRING","throwException",176],"(",["T_STRING","Mage",176],["T_DOUBLE_COLON","::",176],["T_STRING","helper",176],"(",["T_CONSTANT_ENCAPSED_STRING","'sales'",176],")",["T_OBJECT_OPERATOR","->",176],["T_STRING","__",176],"(",["T_CONSTANT_ENCAPSED_STRING","'An item option with code %s already exists.'",176],",",["T_WHITESPACE"," ",176],["T_VARIABLE","$option",176],["T_OBJECT_OPERATOR","->",176],["T_STRING","getCode",176],"(",")",")",")",";",["T_WHITESPACE","\n        ",176],"}",["T_WHITESPACE","\n        ",177],["T_RETURN","return",178],["T_WHITESPACE"," ",178],["T_VARIABLE","$this",178],";",["T_WHITESPACE","\n    ",178],"}",["T_WHITESPACE","\n\n    ",179],["T_DOC_COMMENT","\/**\n     * Checks that item model has data changes.\n     * Call save item options if model isn't need to save in DB\n     *\n     * @return boolean\n     *\/",181],["T_WHITESPACE","\n    ",186],["T_PROTECTED","protected",187],["T_WHITESPACE"," ",187],["T_FUNCTION","function",187],["T_WHITESPACE"," ",187],["T_STRING","_hasModelChanged",187],"(",")",["T_WHITESPACE","\n    ",187],"{",["T_WHITESPACE","\n        ",188],["T_IF","if",189],["T_WHITESPACE"," ",189],"(","!",["T_VARIABLE","$this",189],["T_OBJECT_OPERATOR","->",189],["T_STRING","hasDataChanges",189],"(",")",")",["T_WHITESPACE"," ",189],"{",["T_WHITESPACE","\n            ",189],["T_RETURN","return",190],["T_WHITESPACE"," ",190],["T_STRING","false",190],";",["T_WHITESPACE","\n        ",190],"}",["T_WHITESPACE","\n\n        ",191],["T_RETURN","return",193],["T_WHITESPACE"," ",193],["T_VARIABLE","$this",193],["T_OBJECT_OPERATOR","->",193],["T_STRING","_getResource",193],"(",")",["T_OBJECT_OPERATOR","->",193],["T_STRING","hasDataChanged",193],"(",["T_VARIABLE","$this",193],")",";",["T_WHITESPACE","\n    ",193],"}",["T_WHITESPACE","\n\n    ",194],["T_DOC_COMMENT","\/**\n     * Save item options\n     *\n     * @return Mage_Wishlist_Model_Item\n     *\/",196],["T_WHITESPACE","\n    ",200],["T_PROTECTED","protected",201],["T_WHITESPACE"," ",201],["T_FUNCTION","function",201],["T_WHITESPACE"," ",201],["T_STRING","_saveItemOptions",201],"(",")",["T_WHITESPACE","\n    ",201],"{",["T_WHITESPACE","\n        ",202],["T_FOREACH","foreach",203],["T_WHITESPACE"," ",203],"(",["T_VARIABLE","$this",203],["T_OBJECT_OPERATOR","->",203],["T_STRING","_options",203],["T_WHITESPACE"," ",203],["T_AS","as",203],["T_WHITESPACE"," ",203],["T_VARIABLE","$index",203],["T_WHITESPACE"," ",203],["T_DOUBLE_ARROW","=>",203],["T_WHITESPACE"," ",203],["T_VARIABLE","$option",203],")",["T_WHITESPACE"," ",203],"{",["T_WHITESPACE","\n            ",203],["T_IF","if",204],["T_WHITESPACE"," ",204],"(",["T_VARIABLE","$option",204],["T_OBJECT_OPERATOR","->",204],["T_STRING","isDeleted",204],"(",")",")",["T_WHITESPACE"," ",204],"{",["T_WHITESPACE","\n                ",204],["T_VARIABLE","$option",205],["T_OBJECT_OPERATOR","->",205],["T_STRING","delete",205],"(",")",";",["T_WHITESPACE","\n                ",205],["T_UNSET","unset",206],"(",["T_VARIABLE","$this",206],["T_OBJECT_OPERATOR","->",206],["T_STRING","_options",206],"[",["T_VARIABLE","$index",206],"]",")",";",["T_WHITESPACE","\n                ",206],["T_UNSET","unset",207],"(",["T_VARIABLE","$this",207],["T_OBJECT_OPERATOR","->",207],["T_STRING","_optionsByCode",207],"[",["T_VARIABLE","$option",207],["T_OBJECT_OPERATOR","->",207],["T_STRING","getCode",207],"(",")","]",")",";",["T_WHITESPACE","\n            ",207],"}",["T_WHITESPACE"," ",208],["T_ELSE","else",208],["T_WHITESPACE"," ",208],"{",["T_WHITESPACE","\n                ",208],["T_VARIABLE","$option",209],["T_OBJECT_OPERATOR","->",209],["T_STRING","save",209],"(",")",";",["T_WHITESPACE","\n            ",209],"}",["T_WHITESPACE","\n        ",210],"}",["T_WHITESPACE","\n\n        ",211],["T_VARIABLE","$this",213],["T_OBJECT_OPERATOR","->",213],["T_STRING","_flagOptionsSaved",213],["T_WHITESPACE"," ",213],"=",["T_WHITESPACE"," ",213],["T_STRING","true",213],";",["T_WHITESPACE"," ",213],["T_COMMENT","\/\/ Report to watchers that options were saved\n",213],["T_WHITESPACE","\n        ",214],["T_RETURN","return",215],["T_WHITESPACE"," ",215],["T_VARIABLE","$this",215],";",["T_WHITESPACE","\n    ",215],"}",["T_WHITESPACE","\n\n    ",216],["T_DOC_COMMENT","\/**\n     * Save model plus its options\n     * Ensures saving options in case when resource model was not changed\n     *\/",218],["T_WHITESPACE","\n    ",221],["T_PUBLIC","public",222],["T_WHITESPACE"," ",222],["T_FUNCTION","function",222],["T_WHITESPACE"," ",222],["T_STRING","save",222],"(",")",["T_WHITESPACE","\n    ",222],"{",["T_WHITESPACE","\n        ",223],["T_VARIABLE","$hasDataChanges",224],["T_WHITESPACE"," ",224],"=",["T_WHITESPACE"," ",224],["T_VARIABLE","$this",224],["T_OBJECT_OPERATOR","->",224],["T_STRING","hasDataChanges",224],"(",")",";",["T_WHITESPACE","\n        ",224],["T_VARIABLE","$this",225],["T_OBJECT_OPERATOR","->",225],["T_STRING","_flagOptionsSaved",225],["T_WHITESPACE"," ",225],"=",["T_WHITESPACE"," ",225],["T_STRING","false",225],";",["T_WHITESPACE","\n\n        ",225],["T_STRING","parent",227],["T_DOUBLE_COLON","::",227],["T_STRING","save",227],"(",")",";",["T_WHITESPACE","\n\n        ",227],["T_IF","if",229],["T_WHITESPACE"," ",229],"(",["T_VARIABLE","$hasDataChanges",229],["T_WHITESPACE"," ",229],["T_BOOLEAN_AND","&&",229],["T_WHITESPACE"," ",229],"!",["T_VARIABLE","$this",229],["T_OBJECT_OPERATOR","->",229],["T_STRING","_flagOptionsSaved",229],")",["T_WHITESPACE"," ",229],"{",["T_WHITESPACE","\n            ",229],["T_VARIABLE","$this",230],["T_OBJECT_OPERATOR","->",230],["T_STRING","_saveItemOptions",230],"(",")",";",["T_WHITESPACE","\n        ",230],"}",["T_WHITESPACE","\n    ",231],"}",["T_WHITESPACE","\n\n    ",232],["T_DOC_COMMENT","\/**\n     * Save item options after item saved\n     *\n     * @return Mage_Wishlist_Model_Item\n     *\/",234],["T_WHITESPACE","\n    ",238],["T_PROTECTED","protected",239],["T_WHITESPACE"," ",239],["T_FUNCTION","function",239],["T_WHITESPACE"," ",239],["T_STRING","_afterSave",239],"(",")",["T_WHITESPACE","\n    ",239],"{",["T_WHITESPACE","\n        ",240],["T_VARIABLE","$this",241],["T_OBJECT_OPERATOR","->",241],["T_STRING","_saveItemOptions",241],"(",")",";",["T_WHITESPACE","\n        ",241],["T_RETURN","return",242],["T_WHITESPACE"," ",242],["T_STRING","parent",242],["T_DOUBLE_COLON","::",242],["T_STRING","_afterSave",242],"(",")",";",["T_WHITESPACE","\n    ",242],"}",["T_WHITESPACE","\n\n    ",243],["T_DOC_COMMENT","\/**\n     * Validate wish list item data\n     *\n     * @throws Mage_Core_Exception\n     * @return bool\n     *\/",245],["T_WHITESPACE","\n    ",250],["T_PUBLIC","public",251],["T_WHITESPACE"," ",251],["T_FUNCTION","function",251],["T_WHITESPACE"," ",251],["T_STRING","validate",251],"(",")",["T_WHITESPACE","\n    ",251],"{",["T_WHITESPACE","\n        ",252],["T_IF","if",253],["T_WHITESPACE"," ",253],"(","!",["T_VARIABLE","$this",253],["T_OBJECT_OPERATOR","->",253],["T_STRING","getWishlistId",253],"(",")",")",["T_WHITESPACE"," ",253],"{",["T_WHITESPACE","\n            ",253],["T_STRING","Mage",254],["T_DOUBLE_COLON","::",254],["T_STRING","throwException",254],"(",["T_STRING","Mage",254],["T_DOUBLE_COLON","::",254],["T_STRING","helper",254],"(",["T_CONSTANT_ENCAPSED_STRING","'wishlist'",254],")",["T_OBJECT_OPERATOR","->",254],["T_STRING","__",254],"(",["T_CONSTANT_ENCAPSED_STRING","'Cannot specify wishlist.'",254],")",")",";",["T_WHITESPACE","\n        ",254],"}",["T_WHITESPACE","\n        ",255],["T_IF","if",256],["T_WHITESPACE"," ",256],"(","!",["T_VARIABLE","$this",256],["T_OBJECT_OPERATOR","->",256],["T_STRING","getProductId",256],"(",")",")",["T_WHITESPACE"," ",256],"{",["T_WHITESPACE","\n            ",256],["T_STRING","Mage",257],["T_DOUBLE_COLON","::",257],["T_STRING","throwException",257],"(",["T_STRING","Mage",257],["T_DOUBLE_COLON","::",257],["T_STRING","helper",257],"(",["T_CONSTANT_ENCAPSED_STRING","'wishlist'",257],")",["T_OBJECT_OPERATOR","->",257],["T_STRING","__",257],"(",["T_CONSTANT_ENCAPSED_STRING","'Cannot specify product.'",257],")",")",";",["T_WHITESPACE","\n        ",257],"}",["T_WHITESPACE","\n\n        ",258],["T_RETURN","return",260],["T_WHITESPACE"," ",260],["T_STRING","true",260],";",["T_WHITESPACE","\n    ",260],"}",["T_WHITESPACE","\n\n    ",261],["T_DOC_COMMENT","\/**\n     * Check required data\n     *\n     * @return Mage_Wishlist_Model_Item\n     *\/",263],["T_WHITESPACE","\n    ",267],["T_PROTECTED","protected",268],["T_WHITESPACE"," ",268],["T_FUNCTION","function",268],["T_WHITESPACE"," ",268],["T_STRING","_beforeSave",268],"(",")",["T_WHITESPACE","\n    ",268],"{",["T_WHITESPACE","\n        ",269],["T_STRING","parent",270],["T_DOUBLE_COLON","::",270],["T_STRING","_beforeSave",270],"(",")",";",["T_WHITESPACE","\n\n        ",270],["T_COMMENT","\/\/ validate required item data\n",272],["T_WHITESPACE","        ",273],["T_VARIABLE","$this",273],["T_OBJECT_OPERATOR","->",273],["T_STRING","validate",273],"(",")",";",["T_WHITESPACE","\n\n        ",273],["T_COMMENT","\/\/ set current store id if it is not defined\n",275],["T_WHITESPACE","        ",276],["T_IF","if",276],["T_WHITESPACE"," ",276],"(",["T_STRING","is_null",276],"(",["T_VARIABLE","$this",276],["T_OBJECT_OPERATOR","->",276],["T_STRING","getStoreId",276],"(",")",")",")",["T_WHITESPACE"," ",276],"{",["T_WHITESPACE","\n            ",276],["T_VARIABLE","$this",277],["T_OBJECT_OPERATOR","->",277],["T_STRING","setStoreId",277],"(",["T_STRING","Mage",277],["T_DOUBLE_COLON","::",277],["T_STRING","app",277],"(",")",["T_OBJECT_OPERATOR","->",277],["T_STRING","getStore",277],"(",")",["T_OBJECT_OPERATOR","->",277],["T_STRING","getId",277],"(",")",")",";",["T_WHITESPACE","\n        ",277],"}",["T_WHITESPACE","\n\n        ",278],["T_COMMENT","\/\/ set current date if added at data is not defined\n",280],["T_WHITESPACE","        ",281],["T_IF","if",281],["T_WHITESPACE"," ",281],"(",["T_STRING","is_null",281],"(",["T_VARIABLE","$this",281],["T_OBJECT_OPERATOR","->",281],["T_STRING","getAddedAt",281],"(",")",")",")",["T_WHITESPACE"," ",281],"{",["T_WHITESPACE","\n            ",281],["T_VARIABLE","$this",282],["T_OBJECT_OPERATOR","->",282],["T_STRING","setAddedAt",282],"(",["T_STRING","Mage",282],["T_DOUBLE_COLON","::",282],["T_STRING","getSingleton",282],"(",["T_CONSTANT_ENCAPSED_STRING","'core\/date'",282],")",["T_OBJECT_OPERATOR","->",282],["T_STRING","gmtDate",282],"(",")",")",";",["T_WHITESPACE","\n        ",282],"}",["T_WHITESPACE","\n\n        ",283],["T_RETURN","return",285],["T_WHITESPACE"," ",285],["T_VARIABLE","$this",285],";",["T_WHITESPACE","\n    ",285],"}",["T_WHITESPACE","\n\n    ",286],["T_DOC_COMMENT","\/**\n     * Retrieve wishlist item data as array\n     *\n     * @deprecated since 1.4.0.0\n     * @return array\n     *\/",288],["T_WHITESPACE","\n    ",293],["T_PUBLIC","public",294],["T_WHITESPACE"," ",294],["T_FUNCTION","function",294],["T_WHITESPACE"," ",294],["T_STRING","getDataForSave",294],"(",")",["T_WHITESPACE","\n    ",294],"{",["T_WHITESPACE","\n        ",295],["T_VARIABLE","$data",296],["T_WHITESPACE"," ",296],"=",["T_WHITESPACE"," ",296],["T_ARRAY","array",296],"(",")",";",["T_WHITESPACE","\n        ",296],["T_VARIABLE","$data",297],"[",["T_CONSTANT_ENCAPSED_STRING","'product_id'",297],"]",["T_WHITESPACE","  ",297],"=",["T_WHITESPACE"," ",297],["T_VARIABLE","$this",297],["T_OBJECT_OPERATOR","->",297],["T_STRING","getProductId",297],"(",")",";",["T_WHITESPACE","\n        ",297],["T_VARIABLE","$data",298],"[",["T_CONSTANT_ENCAPSED_STRING","'wishlist_id'",298],"]",["T_WHITESPACE"," ",298],"=",["T_WHITESPACE"," ",298],["T_VARIABLE","$this",298],["T_OBJECT_OPERATOR","->",298],["T_STRING","getWishlistId",298],"(",")",";",["T_WHITESPACE","\n        ",298],["T_VARIABLE","$data",299],"[",["T_CONSTANT_ENCAPSED_STRING","'added_at'",299],"]",["T_WHITESPACE","    ",299],"=",["T_WHITESPACE"," ",299],["T_VARIABLE","$this",299],["T_OBJECT_OPERATOR","->",299],["T_STRING","getAddedAt",299],"(",")",["T_WHITESPACE"," ",299],"?",["T_WHITESPACE"," ",299],["T_VARIABLE","$this",299],["T_OBJECT_OPERATOR","->",299],["T_STRING","getAddedAt",299],"(",")",["T_WHITESPACE"," ",299],":",["T_WHITESPACE"," ",299],["T_STRING","Mage",299],["T_DOUBLE_COLON","::",299],["T_STRING","getSingleton",299],"(",["T_CONSTANT_ENCAPSED_STRING","'core\/date'",299],")",["T_OBJECT_OPERATOR","->",299],["T_STRING","gmtDate",299],"(",")",";",["T_WHITESPACE","\n        ",299],["T_VARIABLE","$data",300],"[",["T_CONSTANT_ENCAPSED_STRING","'description'",300],"]",["T_WHITESPACE"," ",300],"=",["T_WHITESPACE"," ",300],["T_VARIABLE","$this",300],["T_OBJECT_OPERATOR","->",300],["T_STRING","getDescription",300],"(",")",";",["T_WHITESPACE","\n        ",300],["T_VARIABLE","$data",301],"[",["T_CONSTANT_ENCAPSED_STRING","'store_id'",301],"]",["T_WHITESPACE","    ",301],"=",["T_WHITESPACE"," ",301],["T_VARIABLE","$this",301],["T_OBJECT_OPERATOR","->",301],["T_STRING","getStoreId",301],"(",")",["T_WHITESPACE"," ",301],"?",["T_WHITESPACE"," ",301],["T_VARIABLE","$this",301],["T_OBJECT_OPERATOR","->",301],["T_STRING","getStoreId",301],"(",")",["T_WHITESPACE"," ",301],":",["T_WHITESPACE"," ",301],["T_STRING","Mage",301],["T_DOUBLE_COLON","::",301],["T_STRING","app",301],"(",")",["T_OBJECT_OPERATOR","->",301],["T_STRING","getStore",301],"(",")",["T_OBJECT_OPERATOR","->",301],["T_STRING","getId",301],"(",")",";",["T_WHITESPACE","\n\n        ",301],["T_RETURN","return",303],["T_WHITESPACE"," ",303],["T_VARIABLE","$data",303],";",["T_WHITESPACE","\n    ",303],"}",["T_WHITESPACE","\n\n    ",304],["T_DOC_COMMENT","\/**\n     * Load item by product, wishlist and shared stores\n     *\n     * @param int $wishlistId\n     * @param int $productId\n     * @param array $sharedStores\n     * @return Mage_Wishlist_Model_Item\n     *\/",306],["T_WHITESPACE","\n    ",313],["T_PUBLIC","public",314],["T_WHITESPACE"," ",314],["T_FUNCTION","function",314],["T_WHITESPACE"," ",314],["T_STRING","loadByProductWishlist",314],"(",["T_VARIABLE","$wishlistId",314],",",["T_WHITESPACE"," ",314],["T_VARIABLE","$productId",314],",",["T_WHITESPACE"," ",314],["T_VARIABLE","$sharedStores",314],")",["T_WHITESPACE","\n    ",314],"{",["T_WHITESPACE","\n        ",315],["T_VARIABLE","$this",316],["T_OBJECT_OPERATOR","->",316],["T_STRING","_getResource",316],"(",")",["T_OBJECT_OPERATOR","->",316],["T_STRING","loadByProductWishlist",316],"(",["T_VARIABLE","$this",316],",",["T_WHITESPACE"," ",316],["T_VARIABLE","$wishlistId",316],",",["T_WHITESPACE"," ",316],["T_VARIABLE","$productId",316],",",["T_WHITESPACE"," ",316],["T_VARIABLE","$sharedStores",316],")",";",["T_WHITESPACE","\n        ",316],["T_VARIABLE","$this",317],["T_OBJECT_OPERATOR","->",317],["T_STRING","_afterLoad",317],"(",")",";",["T_WHITESPACE","\n        ",317],["T_VARIABLE","$this",318],["T_OBJECT_OPERATOR","->",318],["T_STRING","setOrigData",318],"(",")",";",["T_WHITESPACE","\n\n        ",318],["T_RETURN","return",320],["T_WHITESPACE"," ",320],["T_VARIABLE","$this",320],";",["T_WHITESPACE","\n    ",320],"}",["T_WHITESPACE","\n\n    ",321],["T_DOC_COMMENT","\/**\n     * Retrieve item product instance\n     *\n     * @throws Mage_Core_Exception\n     * @return Mage_Catalog_Model_Product\n     *\/",323],["T_WHITESPACE","\n    ",328],["T_PUBLIC","public",329],["T_WHITESPACE"," ",329],["T_FUNCTION","function",329],["T_WHITESPACE"," ",329],["T_STRING","getProduct",329],"(",")",["T_WHITESPACE","\n    ",329],"{",["T_WHITESPACE","\n        ",330],["T_VARIABLE","$product",331],["T_WHITESPACE"," ",331],"=",["T_WHITESPACE"," ",331],["T_VARIABLE","$this",331],["T_OBJECT_OPERATOR","->",331],["T_STRING","_getData",331],"(",["T_CONSTANT_ENCAPSED_STRING","'product'",331],")",";",["T_WHITESPACE","\n        ",331],["T_IF","if",332],["T_WHITESPACE"," ",332],"(",["T_STRING","is_null",332],"(",["T_VARIABLE","$product",332],")",")",["T_WHITESPACE"," ",332],"{",["T_WHITESPACE","\n            ",332],["T_IF","if",333],["T_WHITESPACE"," ",333],"(","!",["T_VARIABLE","$this",333],["T_OBJECT_OPERATOR","->",333],["T_STRING","getProductId",333],"(",")",")",["T_WHITESPACE"," ",333],"{",["T_WHITESPACE","\n                ",333],["T_THROW","throw",334],["T_WHITESPACE"," ",334],["T_NEW","new",334],["T_WHITESPACE"," ",334],["T_STRING","Mage_Core_Exception",334],"(",["T_STRING","Mage",334],["T_DOUBLE_COLON","::",334],["T_STRING","helper",334],"(",["T_CONSTANT_ENCAPSED_STRING","'wishlist'",334],")",["T_OBJECT_OPERATOR","->",334],["T_STRING","__",334],"(",["T_CONSTANT_ENCAPSED_STRING","'Cannot specify product.'",334],")",",",["T_WHITESPACE","\n                    ",334],["T_STRING","self",335],["T_DOUBLE_COLON","::",335],["T_STRING","EXCEPTION_CODE_NOT_SPECIFIED_PRODUCT",335],")",";",["T_WHITESPACE","\n            ",335],"}",["T_WHITESPACE","\n\n            ",336],["T_VARIABLE","$product",338],["T_WHITESPACE"," ",338],"=",["T_WHITESPACE"," ",338],["T_STRING","Mage",338],["T_DOUBLE_COLON","::",338],["T_STRING","getModel",338],"(",["T_CONSTANT_ENCAPSED_STRING","'catalog\/product'",338],")",["T_WHITESPACE","\n                ",338],["T_OBJECT_OPERATOR","->",339],["T_STRING","setStoreId",339],"(",["T_VARIABLE","$this",339],["T_OBJECT_OPERATOR","->",339],["T_STRING","getStoreId",339],"(",")",")",["T_WHITESPACE","\n                ",339],["T_OBJECT_OPERATOR","->",340],["T_STRING","load",340],"(",["T_VARIABLE","$this",340],["T_OBJECT_OPERATOR","->",340],["T_STRING","getProductId",340],"(",")",")",";",["T_WHITESPACE","\n\n            ",340],["T_VARIABLE","$this",342],["T_OBJECT_OPERATOR","->",342],["T_STRING","setData",342],"(",["T_CONSTANT_ENCAPSED_STRING","'product'",342],",",["T_WHITESPACE"," ",342],["T_VARIABLE","$product",342],")",";",["T_WHITESPACE","\n        ",342],"}",["T_WHITESPACE","\n\n        ",343],["T_DOC_COMMENT","\/**\n         * Reset product final price because it related to custom options\n         *\/",345],["T_WHITESPACE","\n        ",347],["T_VARIABLE","$product",348],["T_OBJECT_OPERATOR","->",348],["T_STRING","setFinalPrice",348],"(",["T_STRING","null",348],")",";",["T_WHITESPACE","\n        ",348],["T_VARIABLE","$product",349],["T_OBJECT_OPERATOR","->",349],["T_STRING","setCustomOptions",349],"(",["T_VARIABLE","$this",349],["T_OBJECT_OPERATOR","->",349],["T_STRING","_optionsByCode",349],")",";",["T_WHITESPACE","\n        ",349],["T_RETURN","return",350],["T_WHITESPACE"," ",350],["T_VARIABLE","$product",350],";",["T_WHITESPACE","\n    ",350],"}",["T_WHITESPACE","\n\n    ",351],["T_DOC_COMMENT","\/**\n     * Add or Move item product to shopping cart\n     *\n     * Return true if product was successful added or exception with code\n     * Return false for disabled or unvisible products\n     *\n     * @throws Mage_Core_Exception\n     * @param Mage_Checkout_Model_Cart $cart\n     * @param bool $delete  delete the item after successful add to cart\n     * @return bool\n     *\/",353],["T_WHITESPACE","\n    ",363],["T_PUBLIC","public",364],["T_WHITESPACE"," ",364],["T_FUNCTION","function",364],["T_WHITESPACE"," ",364],["T_STRING","addToCart",364],"(",["T_STRING","Mage_Checkout_Model_Cart",364],["T_WHITESPACE"," ",364],["T_VARIABLE","$cart",364],",",["T_WHITESPACE"," ",364],["T_VARIABLE","$delete",364],["T_WHITESPACE"," ",364],"=",["T_WHITESPACE"," ",364],["T_STRING","false",364],")",["T_WHITESPACE","\n    ",364],"{",["T_WHITESPACE","\n        ",365],["T_VARIABLE","$product",366],["T_WHITESPACE"," ",366],"=",["T_WHITESPACE"," ",366],["T_VARIABLE","$this",366],["T_OBJECT_OPERATOR","->",366],["T_STRING","getProduct",366],"(",")",";",["T_WHITESPACE","\n        ",366],["T_VARIABLE","$storeId",367],["T_WHITESPACE"," ",367],"=",["T_WHITESPACE"," ",367],["T_VARIABLE","$this",367],["T_OBJECT_OPERATOR","->",367],["T_STRING","getStoreId",367],"(",")",";",["T_WHITESPACE","\n\n        ",367],["T_IF","if",369],["T_WHITESPACE"," ",369],"(",["T_VARIABLE","$product",369],["T_OBJECT_OPERATOR","->",369],["T_STRING","getStatus",369],"(",")",["T_WHITESPACE"," ",369],["T_IS_NOT_EQUAL","!=",369],["T_WHITESPACE"," ",369],["T_STRING","Mage_Catalog_Model_Product_Status",369],["T_DOUBLE_COLON","::",369],["T_STRING","STATUS_ENABLED",369],")",["T_WHITESPACE"," ",369],"{",["T_WHITESPACE","\n            ",369],["T_RETURN","return",370],["T_WHITESPACE"," ",370],["T_STRING","false",370],";",["T_WHITESPACE","\n        ",370],"}",["T_WHITESPACE","\n\n        ",371],["T_IF","if",373],["T_WHITESPACE"," ",373],"(","!",["T_VARIABLE","$product",373],["T_OBJECT_OPERATOR","->",373],["T_STRING","isVisibleInSiteVisibility",373],"(",")",")",["T_WHITESPACE"," ",373],"{",["T_WHITESPACE","\n            ",373],["T_IF","if",374],["T_WHITESPACE"," ",374],"(",["T_VARIABLE","$product",374],["T_OBJECT_OPERATOR","->",374],["T_STRING","getStoreId",374],"(",")",["T_WHITESPACE"," ",374],["T_IS_EQUAL","==",374],["T_WHITESPACE"," ",374],["T_VARIABLE","$storeId",374],")",["T_WHITESPACE"," ",374],"{",["T_WHITESPACE","\n                ",374],["T_RETURN","return",375],["T_WHITESPACE"," ",375],["T_STRING","false",375],";",["T_WHITESPACE","\n            ",375],"}",["T_WHITESPACE","\n        ",376],"}",["T_WHITESPACE","\n\n        ",377],["T_IF","if",379],["T_WHITESPACE"," ",379],"(","!",["T_VARIABLE","$product",379],["T_OBJECT_OPERATOR","->",379],["T_STRING","isSalable",379],"(",")",")",["T_WHITESPACE"," ",379],"{",["T_WHITESPACE","\n            ",379],["T_THROW","throw",380],["T_WHITESPACE"," ",380],["T_NEW","new",380],["T_WHITESPACE"," ",380],["T_STRING","Mage_Core_Exception",380],"(",["T_STRING","null",380],",",["T_WHITESPACE"," ",380],["T_STRING","self",380],["T_DOUBLE_COLON","::",380],["T_STRING","EXCEPTION_CODE_NOT_SALABLE",380],")",";",["T_WHITESPACE","\n        ",380],"}",["T_WHITESPACE","\n\n        ",381],["T_VARIABLE","$buyRequest",383],["T_WHITESPACE"," ",383],"=",["T_WHITESPACE"," ",383],["T_VARIABLE","$this",383],["T_OBJECT_OPERATOR","->",383],["T_STRING","getBuyRequest",383],"(",")",";",["T_WHITESPACE","\n\n        ",383],["T_VARIABLE","$cart",385],["T_OBJECT_OPERATOR","->",385],["T_STRING","addProduct",385],"(",["T_VARIABLE","$product",385],",",["T_WHITESPACE"," ",385],["T_VARIABLE","$buyRequest",385],")",";",["T_WHITESPACE","\n        ",385],["T_IF","if",386],["T_WHITESPACE"," ",386],"(","!",["T_VARIABLE","$product",386],["T_OBJECT_OPERATOR","->",386],["T_STRING","isVisibleInSiteVisibility",386],"(",")",")",["T_WHITESPACE"," ",386],"{",["T_WHITESPACE","\n            ",386],["T_VARIABLE","$cart",387],["T_OBJECT_OPERATOR","->",387],["T_STRING","getQuote",387],"(",")",["T_OBJECT_OPERATOR","->",387],["T_STRING","getItemByProduct",387],"(",["T_VARIABLE","$product",387],")",["T_OBJECT_OPERATOR","->",387],["T_STRING","setStoreId",387],"(",["T_VARIABLE","$storeId",387],")",";",["T_WHITESPACE","\n        ",387],"}",["T_WHITESPACE","\n\n        ",388],["T_IF","if",390],["T_WHITESPACE"," ",390],"(",["T_VARIABLE","$delete",390],")",["T_WHITESPACE"," ",390],"{",["T_WHITESPACE","\n            ",390],["T_VARIABLE","$this",391],["T_OBJECT_OPERATOR","->",391],["T_STRING","delete",391],"(",")",";",["T_WHITESPACE","\n        ",391],"}",["T_WHITESPACE","\n\n        ",392],["T_RETURN","return",394],["T_WHITESPACE"," ",394],["T_STRING","true",394],";",["T_WHITESPACE","\n    ",394],"}",["T_WHITESPACE","\n\n    ",395],["T_DOC_COMMENT","\/**\n     * Retrieve Product View Page URL\n     *\n     * If product has required options add special key to URL\n     *\n     * @return string\n     *\/",397],["T_WHITESPACE","\n    ",403],["T_PUBLIC","public",404],["T_WHITESPACE"," ",404],["T_FUNCTION","function",404],["T_WHITESPACE"," ",404],["T_STRING","getProductUrl",404],"(",")",["T_WHITESPACE","\n    ",404],"{",["T_WHITESPACE","\n        ",405],["T_VARIABLE","$product",406],["T_WHITESPACE"," ",406],"=",["T_WHITESPACE"," ",406],["T_VARIABLE","$this",406],["T_OBJECT_OPERATOR","->",406],["T_STRING","getProduct",406],"(",")",";",["T_WHITESPACE","\n        ",406],["T_VARIABLE","$query",407],["T_WHITESPACE","   ",407],"=",["T_WHITESPACE"," ",407],["T_ARRAY","array",407],"(",")",";",["T_WHITESPACE","\n\n        ",407],["T_IF","if",409],["T_WHITESPACE"," ",409],"(",["T_VARIABLE","$product",409],["T_OBJECT_OPERATOR","->",409],["T_STRING","getTypeInstance",409],"(",["T_STRING","true",409],")",["T_OBJECT_OPERATOR","->",409],["T_STRING","hasRequiredOptions",409],"(",["T_VARIABLE","$product",409],")",")",["T_WHITESPACE"," ",409],"{",["T_WHITESPACE","\n            ",409],["T_VARIABLE","$query",410],"[",["T_CONSTANT_ENCAPSED_STRING","'options'",410],"]",["T_WHITESPACE"," ",410],"=",["T_WHITESPACE"," ",410],["T_CONSTANT_ENCAPSED_STRING","'cart'",410],";",["T_WHITESPACE","\n        ",410],"}",["T_WHITESPACE","\n\n        ",411],["T_RETURN","return",413],["T_WHITESPACE"," ",413],["T_VARIABLE","$product",413],["T_OBJECT_OPERATOR","->",413],["T_STRING","getUrlModel",413],"(",")",["T_OBJECT_OPERATOR","->",413],["T_STRING","getUrl",413],"(",["T_VARIABLE","$product",413],",",["T_WHITESPACE"," ",413],["T_ARRAY","array",413],"(",["T_CONSTANT_ENCAPSED_STRING","'_query'",413],["T_WHITESPACE"," ",413],["T_DOUBLE_ARROW","=>",413],["T_WHITESPACE"," ",413],["T_VARIABLE","$query",413],")",")",";",["T_WHITESPACE","\n    ",413],"}",["T_WHITESPACE","\n\n    ",414],["T_DOC_COMMENT","\/**\n     * Returns formatted buy request - object, holding request received from\n     * product view page with keys and options for configured product\n     *\n     * @return Varien_Object\n     *\/",416],["T_WHITESPACE","\n    ",421],["T_PUBLIC","public",422],["T_WHITESPACE"," ",422],["T_FUNCTION","function",422],["T_WHITESPACE"," ",422],["T_STRING","getBuyRequest",422],"(",")",["T_WHITESPACE","\n    ",422],"{",["T_WHITESPACE","\n        ",423],["T_VARIABLE","$option",424],["T_WHITESPACE"," ",424],"=",["T_WHITESPACE"," ",424],["T_VARIABLE","$this",424],["T_OBJECT_OPERATOR","->",424],["T_STRING","getOptionByCode",424],"(",["T_CONSTANT_ENCAPSED_STRING","'info_buyRequest'",424],")",";",["T_WHITESPACE","\n        ",424],["T_VARIABLE","$initialData",425],["T_WHITESPACE"," ",425],"=",["T_WHITESPACE"," ",425],["T_VARIABLE","$option",425],["T_WHITESPACE"," ",425],"?",["T_WHITESPACE"," ",425],["T_STRING","unserialize",425],"(",["T_VARIABLE","$option",425],["T_OBJECT_OPERATOR","->",425],["T_STRING","getValue",425],"(",")",")",["T_WHITESPACE"," ",425],":",["T_WHITESPACE"," ",425],["T_STRING","null",425],";",["T_WHITESPACE","\n\n        ",425],["T_COMMENT","\/\/ There can be wrong data due to bug in Grouped products - it formed 'info_buyRequest' as Varien_Object\n",427],["T_WHITESPACE","        ",428],["T_IF","if",428],["T_WHITESPACE"," ",428],"(",["T_VARIABLE","$initialData",428],["T_WHITESPACE"," ",428],["T_INSTANCEOF","instanceof",428],["T_WHITESPACE"," ",428],["T_STRING","Varien_Object",428],")",["T_WHITESPACE"," ",428],"{",["T_WHITESPACE","\n            ",428],["T_VARIABLE","$initialData",429],["T_WHITESPACE"," ",429],"=",["T_WHITESPACE"," ",429],["T_VARIABLE","$initialData",429],["T_OBJECT_OPERATOR","->",429],["T_STRING","getData",429],"(",")",";",["T_WHITESPACE","\n        ",429],"}",["T_WHITESPACE","\n\n        ",430],["T_VARIABLE","$buyRequest",432],["T_WHITESPACE"," ",432],"=",["T_WHITESPACE"," ",432],["T_NEW","new",432],["T_WHITESPACE"," ",432],["T_STRING","Varien_Object",432],"(",["T_VARIABLE","$initialData",432],")",";",["T_WHITESPACE","\n        ",432],["T_VARIABLE","$buyRequest",433],["T_OBJECT_OPERATOR","->",433],["T_STRING","setOriginalQty",433],"(",["T_VARIABLE","$buyRequest",433],["T_OBJECT_OPERATOR","->",433],["T_STRING","getQty",433],"(",")",")",["T_WHITESPACE","\n            ",433],["T_OBJECT_OPERATOR","->",434],["T_STRING","setQty",434],"(",["T_VARIABLE","$this",434],["T_OBJECT_OPERATOR","->",434],["T_STRING","getQty",434],"(",")",["T_WHITESPACE"," ",434],"*",["T_WHITESPACE"," ",434],["T_LNUMBER","1",434],")",";",["T_WHITESPACE","\n        ",434],["T_RETURN","return",435],["T_WHITESPACE"," ",435],["T_VARIABLE","$buyRequest",435],";",["T_WHITESPACE","\n    ",435],"}",["T_WHITESPACE","\n\n    ",436],["T_DOC_COMMENT","\/**\n     * Merge data to item info_buyRequest option\n     *\n     * @param array|Varien_Object $buyRequest\n     * @return Mage_Wishlist_Model_Item\n     *\/",438],["T_WHITESPACE","\n    ",443],["T_PUBLIC","public",444],["T_WHITESPACE"," ",444],["T_FUNCTION","function",444],["T_WHITESPACE"," ",444],["T_STRING","mergeBuyRequest",444],"(",["T_VARIABLE","$buyRequest",444],")",["T_WHITESPACE"," ",444],"{",["T_WHITESPACE","\n        ",444],["T_IF","if",445],["T_WHITESPACE"," ",445],"(",["T_VARIABLE","$buyRequest",445],["T_WHITESPACE"," ",445],["T_INSTANCEOF","instanceof",445],["T_WHITESPACE"," ",445],["T_STRING","Varien_Object",445],")",["T_WHITESPACE"," ",445],"{",["T_WHITESPACE","\n            ",445],["T_VARIABLE","$buyRequest",446],["T_WHITESPACE"," ",446],"=",["T_WHITESPACE"," ",446],["T_VARIABLE","$buyRequest",446],["T_OBJECT_OPERATOR","->",446],["T_STRING","getData",446],"(",")",";",["T_WHITESPACE","\n        ",446],"}",["T_WHITESPACE","\n\n        ",447],["T_IF","if",449],["T_WHITESPACE"," ",449],"(",["T_EMPTY","empty",449],"(",["T_VARIABLE","$buyRequest",449],")",["T_WHITESPACE"," ",449],["T_BOOLEAN_OR","||",449],["T_WHITESPACE"," ",449],"!",["T_STRING","is_array",449],"(",["T_VARIABLE","$buyRequest",449],")",")",["T_WHITESPACE"," ",449],"{",["T_WHITESPACE","\n            ",449],["T_RETURN","return",450],["T_WHITESPACE"," ",450],["T_VARIABLE","$this",450],";",["T_WHITESPACE","\n        ",450],"}",["T_WHITESPACE","\n\n        ",451],["T_VARIABLE","$oldBuyRequest",453],["T_WHITESPACE"," ",453],"=",["T_WHITESPACE"," ",453],["T_VARIABLE","$this",453],["T_OBJECT_OPERATOR","->",453],["T_STRING","getBuyRequest",453],"(",")",["T_WHITESPACE","\n            ",453],["T_OBJECT_OPERATOR","->",454],["T_STRING","getData",454],"(",")",";",["T_WHITESPACE","\n        ",454],["T_VARIABLE","$sBuyRequest",455],["T_WHITESPACE"," ",455],"=",["T_WHITESPACE"," ",455],["T_STRING","serialize",455],"(",["T_VARIABLE","$buyRequest",455],["T_WHITESPACE"," ",455],"+",["T_WHITESPACE"," ",455],["T_VARIABLE","$oldBuyRequest",455],")",";",["T_WHITESPACE","\n\n        ",455],["T_VARIABLE","$option",457],["T_WHITESPACE"," ",457],"=",["T_WHITESPACE"," ",457],["T_VARIABLE","$this",457],["T_OBJECT_OPERATOR","->",457],["T_STRING","getOptionByCode",457],"(",["T_CONSTANT_ENCAPSED_STRING","'info_buyRequest'",457],")",";",["T_WHITESPACE","\n        ",457],["T_IF","if",458],["T_WHITESPACE"," ",458],"(",["T_VARIABLE","$option",458],")",["T_WHITESPACE"," ",458],"{",["T_WHITESPACE","\n            ",458],["T_VARIABLE","$option",459],["T_OBJECT_OPERATOR","->",459],["T_STRING","setValue",459],"(",["T_VARIABLE","$sBuyRequest",459],")",";",["T_WHITESPACE","\n        ",459],"}",["T_WHITESPACE"," ",460],["T_ELSE","else",460],["T_WHITESPACE"," ",460],"{",["T_WHITESPACE","\n            ",460],["T_VARIABLE","$this",461],["T_OBJECT_OPERATOR","->",461],["T_STRING","addOption",461],"(",["T_ARRAY","array",461],"(",["T_WHITESPACE","\n                ",461],["T_CONSTANT_ENCAPSED_STRING","'code'",462],["T_WHITESPACE","  ",462],["T_DOUBLE_ARROW","=>",462],["T_WHITESPACE"," ",462],["T_CONSTANT_ENCAPSED_STRING","'info_buyRequest'",462],",",["T_WHITESPACE","\n                ",462],["T_CONSTANT_ENCAPSED_STRING","'value'",463],["T_WHITESPACE"," ",463],["T_DOUBLE_ARROW","=>",463],["T_WHITESPACE"," ",463],["T_VARIABLE","$sBuyRequest",463],["T_WHITESPACE","\n            ",463],")",")",";",["T_WHITESPACE","\n        ",464],"}",["T_WHITESPACE","\n\n        ",465],["T_RETURN","return",467],["T_WHITESPACE"," ",467],["T_VARIABLE","$this",467],";",["T_WHITESPACE","\n    ",467],"}",["T_WHITESPACE","\n\n    ",468],["T_DOC_COMMENT","\/**\n     * Set buy request - object, holding request received from\n     * product view page with keys and options for configured product\n     * @param Varien_Object $buyRequest\n     * @return Mage_Wishlist_Model_Item\n     *\/",470],["T_WHITESPACE","\n    ",475],["T_PUBLIC","public",476],["T_WHITESPACE"," ",476],["T_FUNCTION","function",476],["T_WHITESPACE"," ",476],["T_STRING","setBuyRequest",476],"(",["T_VARIABLE","$buyRequest",476],")",["T_WHITESPACE","\n    ",476],"{",["T_WHITESPACE","\n        ",477],["T_VARIABLE","$buyRequest",478],["T_OBJECT_OPERATOR","->",478],["T_STRING","setId",478],"(",["T_VARIABLE","$this",478],["T_OBJECT_OPERATOR","->",478],["T_STRING","getId",478],"(",")",")",";",["T_WHITESPACE","\n\n        ",478],["T_VARIABLE","$_buyRequest",480],["T_WHITESPACE"," ",480],"=",["T_WHITESPACE"," ",480],["T_STRING","serialize",480],"(",["T_VARIABLE","$buyRequest",480],["T_OBJECT_OPERATOR","->",480],["T_STRING","getData",480],"(",")",")",";",["T_WHITESPACE","\n        ",480],["T_VARIABLE","$this",481],["T_OBJECT_OPERATOR","->",481],["T_STRING","setData",481],"(",["T_CONSTANT_ENCAPSED_STRING","'buy_request'",481],",",["T_WHITESPACE"," ",481],["T_VARIABLE","$_buyRequest",481],")",";",["T_WHITESPACE","\n        ",481],["T_RETURN","return",482],["T_WHITESPACE"," ",482],["T_VARIABLE","$this",482],";",["T_WHITESPACE","\n    ",482],"}",["T_WHITESPACE","\n\n    ",483],["T_DOC_COMMENT","\/**\n     * Check product representation in item\n     *\n     * @param   Mage_Catalog_Model_Product $product\n     * @param   Varien_Object $buyRequest\n     * @return  bool\n     *\/",485],["T_WHITESPACE","\n    ",491],["T_PUBLIC","public",492],["T_WHITESPACE"," ",492],["T_FUNCTION","function",492],["T_WHITESPACE"," ",492],["T_STRING","isRepresent",492],"(",["T_VARIABLE","$product",492],",",["T_WHITESPACE"," ",492],["T_VARIABLE","$buyRequest",492],")",["T_WHITESPACE","\n    ",492],"{",["T_WHITESPACE","\n        ",493],["T_IF","if",494],["T_WHITESPACE"," ",494],"(",["T_VARIABLE","$this",494],["T_OBJECT_OPERATOR","->",494],["T_STRING","getProductId",494],"(",")",["T_WHITESPACE"," ",494],["T_IS_NOT_EQUAL","!=",494],["T_WHITESPACE"," ",494],["T_VARIABLE","$product",494],["T_OBJECT_OPERATOR","->",494],["T_STRING","getId",494],"(",")",")",["T_WHITESPACE"," ",494],"{",["T_WHITESPACE","\n            ",494],["T_RETURN","return",495],["T_WHITESPACE"," ",495],["T_STRING","false",495],";",["T_WHITESPACE","\n        ",495],"}",["T_WHITESPACE","\n\n        ",496],["T_VARIABLE","$selfOptions",498],["T_WHITESPACE"," ",498],"=",["T_WHITESPACE"," ",498],["T_VARIABLE","$this",498],["T_OBJECT_OPERATOR","->",498],["T_STRING","getBuyRequest",498],"(",")",["T_OBJECT_OPERATOR","->",498],["T_STRING","getData",498],"(",")",";",["T_WHITESPACE","\n\n        ",498],["T_IF","if",500],["T_WHITESPACE"," ",500],"(",["T_EMPTY","empty",500],"(",["T_VARIABLE","$buyRequest",500],")",["T_WHITESPACE"," ",500],["T_BOOLEAN_AND","&&",500],["T_WHITESPACE"," ",500],"!",["T_EMPTY","empty",500],"(",["T_VARIABLE","$selfOptions",500],")",")",["T_WHITESPACE"," ",500],"{",["T_WHITESPACE","\n            ",500],["T_RETURN","return",501],["T_WHITESPACE"," ",501],["T_STRING","false",501],";",["T_WHITESPACE","\n        ",501],"}",["T_WHITESPACE","\n        ",502],["T_IF","if",503],["T_WHITESPACE"," ",503],"(",["T_EMPTY","empty",503],"(",["T_VARIABLE","$selfOptions",503],")",["T_WHITESPACE"," ",503],["T_BOOLEAN_AND","&&",503],["T_WHITESPACE"," ",503],"!",["T_EMPTY","empty",503],"(",["T_VARIABLE","$buyRequest",503],")",")",["T_WHITESPACE"," ",503],"{",["T_WHITESPACE","\n            ",503],["T_IF","if",504],["T_WHITESPACE"," ",504],"(","!",["T_VARIABLE","$product",504],["T_OBJECT_OPERATOR","->",504],["T_STRING","isComposite",504],"(",")",")","{",["T_WHITESPACE","\n                ",504],["T_RETURN","return",505],["T_WHITESPACE"," ",505],["T_STRING","true",505],";",["T_WHITESPACE","\n            ",505],"}",["T_WHITESPACE"," ",506],["T_ELSE","else",506],["T_WHITESPACE"," ",506],"{",["T_WHITESPACE","\n                ",506],["T_RETURN","return",507],["T_WHITESPACE"," ",507],["T_STRING","false",507],";",["T_WHITESPACE","\n            ",507],"}",["T_WHITESPACE","\n        ",508],"}",["T_WHITESPACE","\n\n        ",509],["T_VARIABLE","$requestArray",511],["T_WHITESPACE"," ",511],"=",["T_WHITESPACE"," ",511],["T_VARIABLE","$buyRequest",511],["T_OBJECT_OPERATOR","->",511],["T_STRING","getData",511],"(",")",";",["T_WHITESPACE","\n\n        ",511],["T_IF","if",513],"(","!",["T_VARIABLE","$this",513],["T_OBJECT_OPERATOR","->",513],["T_STRING","_compareOptions",513],"(",["T_VARIABLE","$requestArray",513],",",["T_WHITESPACE"," ",513],["T_VARIABLE","$selfOptions",513],")",")","{",["T_WHITESPACE","\n            ",513],["T_RETURN","return",514],["T_WHITESPACE"," ",514],["T_STRING","false",514],";",["T_WHITESPACE","\n        ",514],"}",["T_WHITESPACE","\n        ",515],["T_IF","if",516],"(","!",["T_VARIABLE","$this",516],["T_OBJECT_OPERATOR","->",516],["T_STRING","_compareOptions",516],"(",["T_VARIABLE","$selfOptions",516],",",["T_WHITESPACE"," ",516],["T_VARIABLE","$requestArray",516],")",")","{",["T_WHITESPACE","\n            ",516],["T_RETURN","return",517],["T_WHITESPACE"," ",517],["T_STRING","false",517],";",["T_WHITESPACE","\n        ",517],"}",["T_WHITESPACE","\n        ",518],["T_RETURN","return",519],["T_WHITESPACE"," ",519],["T_STRING","true",519],";",["T_WHITESPACE","\n    ",519],"}",["T_WHITESPACE","\n\n    ",520],["T_DOC_COMMENT","\/**\n     * Check product representation in item\n     *\n     * @param   Mage_Catalog_Model_Product $product\n     * @return  bool\n     *\/",522],["T_WHITESPACE","\n    ",527],["T_PUBLIC","public",528],["T_WHITESPACE"," ",528],["T_FUNCTION","function",528],["T_WHITESPACE"," ",528],["T_STRING","representProduct",528],"(",["T_VARIABLE","$product",528],")",["T_WHITESPACE","\n    ",528],"{",["T_WHITESPACE","\n        ",529],["T_VARIABLE","$itemProduct",530],["T_WHITESPACE"," ",530],"=",["T_WHITESPACE"," ",530],["T_VARIABLE","$this",530],["T_OBJECT_OPERATOR","->",530],["T_STRING","getProduct",530],"(",")",";",["T_WHITESPACE","\n        ",530],["T_IF","if",531],["T_WHITESPACE"," ",531],"(",["T_VARIABLE","$itemProduct",531],["T_OBJECT_OPERATOR","->",531],["T_STRING","getId",531],"(",")",["T_WHITESPACE"," ",531],["T_IS_NOT_EQUAL","!=",531],["T_WHITESPACE"," ",531],["T_VARIABLE","$product",531],["T_OBJECT_OPERATOR","->",531],["T_STRING","getId",531],"(",")",")",["T_WHITESPACE"," ",531],"{",["T_WHITESPACE","\n            ",531],["T_RETURN","return",532],["T_WHITESPACE"," ",532],["T_STRING","false",532],";",["T_WHITESPACE","\n        ",532],"}",["T_WHITESPACE","\n\n        ",533],["T_VARIABLE","$itemOptions",535],["T_WHITESPACE","    ",535],"=",["T_WHITESPACE"," ",535],["T_VARIABLE","$this",535],["T_OBJECT_OPERATOR","->",535],["T_STRING","getOptionsByCode",535],"(",")",";",["T_WHITESPACE","\n        ",535],["T_VARIABLE","$productOptions",536],["T_WHITESPACE"," ",536],"=",["T_WHITESPACE"," ",536],["T_VARIABLE","$product",536],["T_OBJECT_OPERATOR","->",536],["T_STRING","getCustomOptions",536],"(",")",";",["T_WHITESPACE","\n\n        ",536],["T_IF","if",538],"(","!",["T_VARIABLE","$this",538],["T_OBJECT_OPERATOR","->",538],["T_STRING","compareOptions",538],"(",["T_VARIABLE","$itemOptions",538],",",["T_WHITESPACE"," ",538],["T_VARIABLE","$productOptions",538],")",")","{",["T_WHITESPACE","\n            ",538],["T_RETURN","return",539],["T_WHITESPACE"," ",539],["T_STRING","false",539],";",["T_WHITESPACE","\n        ",539],"}",["T_WHITESPACE","\n        ",540],["T_IF","if",541],"(","!",["T_VARIABLE","$this",541],["T_OBJECT_OPERATOR","->",541],["T_STRING","compareOptions",541],"(",["T_VARIABLE","$productOptions",541],",",["T_WHITESPACE"," ",541],["T_VARIABLE","$itemOptions",541],")",")","{",["T_WHITESPACE","\n            ",541],["T_RETURN","return",542],["T_WHITESPACE"," ",542],["T_STRING","false",542],";",["T_WHITESPACE","\n        ",542],"}",["T_WHITESPACE","\n        ",543],["T_RETURN","return",544],["T_WHITESPACE"," ",544],["T_STRING","true",544],";",["T_WHITESPACE","\n    ",544],"}",["T_WHITESPACE","\n\n    ",545],["T_DOC_COMMENT","\/**\n     * Check if two options array are identical\n     * First options array is prerogative\n     * Second options array checked against first one\n     *\n     * @param array $options1\n     * @param array $options2\n     * @return bool\n     *\/",547],["T_WHITESPACE","\n    ",555],["T_PUBLIC","public",556],["T_WHITESPACE"," ",556],["T_FUNCTION","function",556],["T_WHITESPACE"," ",556],["T_STRING","compareOptions",556],"(",["T_VARIABLE","$options1",556],",",["T_WHITESPACE"," ",556],["T_VARIABLE","$options2",556],")",["T_WHITESPACE","\n    ",556],"{",["T_WHITESPACE","\n        ",557],["T_FOREACH","foreach",558],["T_WHITESPACE"," ",558],"(",["T_VARIABLE","$options1",558],["T_WHITESPACE"," ",558],["T_AS","as",558],["T_WHITESPACE"," ",558],["T_VARIABLE","$option",558],")",["T_WHITESPACE"," ",558],"{",["T_WHITESPACE","\n            ",558],["T_VARIABLE","$code",559],["T_WHITESPACE"," ",559],"=",["T_WHITESPACE"," ",559],["T_VARIABLE","$option",559],["T_OBJECT_OPERATOR","->",559],["T_STRING","getCode",559],"(",")",";",["T_WHITESPACE","\n            ",559],["T_IF","if",560],["T_WHITESPACE"," ",560],"(",["T_STRING","in_array",560],"(",["T_VARIABLE","$code",560],",",["T_WHITESPACE"," ",560],["T_VARIABLE","$this",560],["T_OBJECT_OPERATOR","->",560],["T_STRING","_notRepresentOptions",560],["T_WHITESPACE"," ",560],")",")",["T_WHITESPACE"," ",560],"{",["T_WHITESPACE","\n                ",560],["T_CONTINUE","continue",561],";",["T_WHITESPACE","\n            ",561],"}",["T_WHITESPACE","\n            ",562],["T_IF","if",563],["T_WHITESPACE"," ",563],"(",["T_WHITESPACE"," ",563],"!",["T_ISSET","isset",563],"(",["T_VARIABLE","$options2",563],"[",["T_VARIABLE","$code",563],"]",")",["T_WHITESPACE","\n                ",563],["T_BOOLEAN_OR","||",564],["T_WHITESPACE"," ",564],"(",["T_VARIABLE","$options2",564],"[",["T_VARIABLE","$code",564],"]",["T_OBJECT_OPERATOR","->",564],["T_STRING","getValue",564],"(",")",["T_WHITESPACE"," ",564],["T_IS_IDENTICAL","===",564],["T_WHITESPACE"," ",564],["T_STRING","null",564],")",["T_WHITESPACE","\n                ",564],["T_BOOLEAN_OR","||",565],["T_WHITESPACE"," ",565],["T_VARIABLE","$options2",565],"[",["T_VARIABLE","$code",565],"]",["T_OBJECT_OPERATOR","->",565],["T_STRING","getValue",565],"(",")",["T_WHITESPACE"," ",565],["T_IS_NOT_EQUAL","!=",565],["T_WHITESPACE"," ",565],["T_VARIABLE","$option",565],["T_OBJECT_OPERATOR","->",565],["T_STRING","getValue",565],"(",")",")",["T_WHITESPACE"," ",565],"{",["T_WHITESPACE","\n                ",565],["T_RETURN","return",566],["T_WHITESPACE"," ",566],["T_STRING","false",566],";",["T_WHITESPACE","\n            ",566],"}",["T_WHITESPACE","\n        ",567],"}",["T_WHITESPACE","\n        ",568],["T_RETURN","return",569],["T_WHITESPACE"," ",569],["T_STRING","true",569],";",["T_WHITESPACE","\n    ",569],"}",["T_WHITESPACE","\n\n    ",570],["T_DOC_COMMENT","\/**\n     * Initialize item options\n     *\n     * @param   array $options\n     * @return  Mage_Wishlist_Model_Item\n     *\/",572],["T_WHITESPACE","\n    ",577],["T_PUBLIC","public",578],["T_WHITESPACE"," ",578],["T_FUNCTION","function",578],["T_WHITESPACE"," ",578],["T_STRING","setOptions",578],"(",["T_VARIABLE","$options",578],")",["T_WHITESPACE","\n    ",578],"{",["T_WHITESPACE","\n        ",579],["T_FOREACH","foreach",580],["T_WHITESPACE"," ",580],"(",["T_VARIABLE","$options",580],["T_WHITESPACE"," ",580],["T_AS","as",580],["T_WHITESPACE"," ",580],["T_VARIABLE","$option",580],")",["T_WHITESPACE"," ",580],"{",["T_WHITESPACE","\n            ",580],["T_VARIABLE","$this",581],["T_OBJECT_OPERATOR","->",581],["T_STRING","addOption",581],"(",["T_VARIABLE","$option",581],")",";",["T_WHITESPACE","\n        ",581],"}",["T_WHITESPACE","\n        ",582],["T_RETURN","return",583],["T_WHITESPACE"," ",583],["T_VARIABLE","$this",583],";",["T_WHITESPACE","\n    ",583],"}",["T_WHITESPACE","\n\n    ",584],["T_DOC_COMMENT","\/**\n     * Get all item options\n     *\n     * @return array\n     *\/",586],["T_WHITESPACE","\n    ",590],["T_PUBLIC","public",591],["T_WHITESPACE"," ",591],["T_FUNCTION","function",591],["T_WHITESPACE"," ",591],["T_STRING","getOptions",591],"(",")",["T_WHITESPACE","\n    ",591],"{",["T_WHITESPACE","\n        ",592],["T_RETURN","return",593],["T_WHITESPACE"," ",593],["T_VARIABLE","$this",593],["T_OBJECT_OPERATOR","->",593],["T_STRING","_options",593],";",["T_WHITESPACE","\n    ",593],"}",["T_WHITESPACE","\n\n    ",594],["T_DOC_COMMENT","\/**\n     * Get all item options as array with codes in array key\n     *\n     * @return array\n     *\/",596],["T_WHITESPACE","\n    ",600],["T_PUBLIC","public",601],["T_WHITESPACE"," ",601],["T_FUNCTION","function",601],["T_WHITESPACE"," ",601],["T_STRING","getOptionsByCode",601],"(",")",["T_WHITESPACE","\n    ",601],"{",["T_WHITESPACE","\n        ",602],["T_RETURN","return",603],["T_WHITESPACE"," ",603],["T_VARIABLE","$this",603],["T_OBJECT_OPERATOR","->",603],["T_STRING","_optionsByCode",603],";",["T_WHITESPACE","\n    ",603],"}",["T_WHITESPACE","\n\n    ",604],["T_DOC_COMMENT","\/**\n     * Add option to item\n     *\n     * @param   Mage_Wishlist_Model_Item_Option $option\n     * @return  Mage_Wishlist_Model_Item\n     *\/",606],["T_WHITESPACE","\n    ",611],["T_PUBLIC","public",612],["T_WHITESPACE"," ",612],["T_FUNCTION","function",612],["T_WHITESPACE"," ",612],["T_STRING","addOption",612],"(",["T_VARIABLE","$option",612],")",["T_WHITESPACE","\n    ",612],"{",["T_WHITESPACE","\n        ",613],["T_IF","if",614],["T_WHITESPACE"," ",614],"(",["T_STRING","is_array",614],"(",["T_VARIABLE","$option",614],")",")",["T_WHITESPACE"," ",614],"{",["T_WHITESPACE","\n            ",614],["T_VARIABLE","$option",615],["T_WHITESPACE"," ",615],"=",["T_WHITESPACE"," ",615],["T_STRING","Mage",615],["T_DOUBLE_COLON","::",615],["T_STRING","getModel",615],"(",["T_CONSTANT_ENCAPSED_STRING","'wishlist\/item_option'",615],")",["T_OBJECT_OPERATOR","->",615],["T_STRING","setData",615],"(",["T_VARIABLE","$option",615],")",["T_WHITESPACE","\n                ",615],["T_OBJECT_OPERATOR","->",616],["T_STRING","setItem",616],"(",["T_VARIABLE","$this",616],")",";",["T_WHITESPACE","\n        ",616],"}",["T_WHITESPACE"," ",617],["T_ELSE","else",617],["T_WHITESPACE"," ",617],["T_IF","if",617],["T_WHITESPACE"," ",617],"(",["T_VARIABLE","$option",617],["T_WHITESPACE"," ",617],["T_INSTANCEOF","instanceof",617],["T_WHITESPACE"," ",617],["T_STRING","Mage_Wishlist_Model_Item_Option",617],")",["T_WHITESPACE"," ",617],"{",["T_WHITESPACE","\n            ",617],["T_VARIABLE","$option",618],["T_OBJECT_OPERATOR","->",618],["T_STRING","setItem",618],"(",["T_VARIABLE","$this",618],")",";",["T_WHITESPACE","\n        ",618],"}",["T_WHITESPACE"," ",619],["T_ELSE","else",619],["T_WHITESPACE"," ",619],["T_IF","if",619],["T_WHITESPACE"," ",619],"(",["T_VARIABLE","$option",619],["T_WHITESPACE"," ",619],["T_INSTANCEOF","instanceof",619],["T_WHITESPACE"," ",619],["T_STRING","Varien_Object",619],")",["T_WHITESPACE"," ",619],"{",["T_WHITESPACE","\n            ",619],["T_VARIABLE","$option",620],["T_WHITESPACE"," ",620],"=",["T_WHITESPACE"," ",620],["T_STRING","Mage",620],["T_DOUBLE_COLON","::",620],["T_STRING","getModel",620],"(",["T_CONSTANT_ENCAPSED_STRING","'wishlist\/item_option'",620],")",["T_OBJECT_OPERATOR","->",620],["T_STRING","setData",620],"(",["T_VARIABLE","$option",620],["T_OBJECT_OPERATOR","->",620],["T_STRING","getData",620],"(",")",")",["T_WHITESPACE","\n               ",620],["T_OBJECT_OPERATOR","->",621],["T_STRING","setProduct",621],"(",["T_VARIABLE","$option",621],["T_OBJECT_OPERATOR","->",621],["T_STRING","getProduct",621],"(",")",")",["T_WHITESPACE","\n               ",621],["T_OBJECT_OPERATOR","->",622],["T_STRING","setItem",622],"(",["T_VARIABLE","$this",622],")",";",["T_WHITESPACE","\n        ",622],"}",["T_WHITESPACE"," ",623],["T_ELSE","else",623],["T_WHITESPACE"," ",623],"{",["T_WHITESPACE","\n            ",623],["T_STRING","Mage",624],["T_DOUBLE_COLON","::",624],["T_STRING","throwException",624],"(",["T_STRING","Mage",624],["T_DOUBLE_COLON","::",624],["T_STRING","helper",624],"(",["T_CONSTANT_ENCAPSED_STRING","'sales'",624],")",["T_OBJECT_OPERATOR","->",624],["T_STRING","__",624],"(",["T_CONSTANT_ENCAPSED_STRING","'Invalid item option format.'",624],")",")",";",["T_WHITESPACE","\n        ",624],"}",["T_WHITESPACE","\n\n        ",625],["T_VARIABLE","$exOption",627],["T_WHITESPACE"," ",627],"=",["T_WHITESPACE"," ",627],["T_VARIABLE","$this",627],["T_OBJECT_OPERATOR","->",627],["T_STRING","getOptionByCode",627],"(",["T_VARIABLE","$option",627],["T_OBJECT_OPERATOR","->",627],["T_STRING","getCode",627],"(",")",")",";",["T_WHITESPACE","\n        ",627],["T_IF","if",628],["T_WHITESPACE"," ",628],"(",["T_VARIABLE","$exOption",628],")",["T_WHITESPACE"," ",628],"{",["T_WHITESPACE","\n            ",628],["T_VARIABLE","$exOption",629],["T_OBJECT_OPERATOR","->",629],["T_STRING","addData",629],"(",["T_VARIABLE","$option",629],["T_OBJECT_OPERATOR","->",629],["T_STRING","getData",629],"(",")",")",";",["T_WHITESPACE","\n        ",629],"}",["T_WHITESPACE"," ",630],["T_ELSE","else",630],["T_WHITESPACE"," ",630],"{",["T_WHITESPACE","\n            ",630],["T_VARIABLE","$this",631],["T_OBJECT_OPERATOR","->",631],["T_STRING","_addOptionCode",631],"(",["T_VARIABLE","$option",631],")",";",["T_WHITESPACE","\n            ",631],["T_VARIABLE","$this",632],["T_OBJECT_OPERATOR","->",632],["T_STRING","_options",632],"[","]",["T_WHITESPACE"," ",632],"=",["T_WHITESPACE"," ",632],["T_VARIABLE","$option",632],";",["T_WHITESPACE","\n        ",632],"}",["T_WHITESPACE","\n        ",633],["T_RETURN","return",634],["T_WHITESPACE"," ",634],["T_VARIABLE","$this",634],";",["T_WHITESPACE","\n    ",634],"}",["T_WHITESPACE","\n\n    ",635],["T_DOC_COMMENT","\/**\n     *Remove option from item options\n     *\n     * @param string $code\n     * @return Mage_Wishlist_Model_Item\n     *\/",637],["T_WHITESPACE","\n    ",642],["T_PUBLIC","public",643],["T_WHITESPACE"," ",643],["T_FUNCTION","function",643],["T_WHITESPACE"," ",643],["T_STRING","removeOption",643],"(",["T_VARIABLE","$code",643],")",["T_WHITESPACE","\n    ",643],"{",["T_WHITESPACE","\n        ",644],["T_VARIABLE","$option",645],["T_WHITESPACE"," ",645],"=",["T_WHITESPACE"," ",645],["T_VARIABLE","$this",645],["T_OBJECT_OPERATOR","->",645],["T_STRING","getOptionByCode",645],"(",["T_VARIABLE","$code",645],")",";",["T_WHITESPACE","\n        ",645],["T_IF","if",646],["T_WHITESPACE"," ",646],"(",["T_VARIABLE","$option",646],")",["T_WHITESPACE"," ",646],"{",["T_WHITESPACE","\n            ",646],["T_VARIABLE","$option",647],["T_OBJECT_OPERATOR","->",647],["T_STRING","isDeleted",647],"(",["T_STRING","true",647],")",";",["T_WHITESPACE","\n        ",647],"}",["T_WHITESPACE","\n        ",648],["T_RETURN","return",649],["T_WHITESPACE"," ",649],["T_VARIABLE","$this",649],";",["T_WHITESPACE","\n    ",649],"}",["T_WHITESPACE","\n\n    ",650],["T_DOC_COMMENT","\/**\n     * Get item option by code\n     *\n     * @param   string $code\n     * @return  Mage_Wishlist_Model_Item_Option || null\n     *\/",652],["T_WHITESPACE","\n    ",657],["T_PUBLIC","public",658],["T_WHITESPACE"," ",658],["T_FUNCTION","function",658],["T_WHITESPACE"," ",658],["T_STRING","getOptionByCode",658],"(",["T_VARIABLE","$code",658],")",["T_WHITESPACE","\n    ",658],"{",["T_WHITESPACE","\n        ",659],["T_IF","if",660],["T_WHITESPACE"," ",660],"(",["T_ISSET","isset",660],"(",["T_VARIABLE","$this",660],["T_OBJECT_OPERATOR","->",660],["T_STRING","_optionsByCode",660],"[",["T_VARIABLE","$code",660],"]",")",["T_WHITESPACE"," ",660],["T_BOOLEAN_AND","&&",660],["T_WHITESPACE"," ",660],"!",["T_VARIABLE","$this",660],["T_OBJECT_OPERATOR","->",660],["T_STRING","_optionsByCode",660],"[",["T_VARIABLE","$code",660],"]",["T_OBJECT_OPERATOR","->",660],["T_STRING","isDeleted",660],"(",")",")",["T_WHITESPACE"," ",660],"{",["T_WHITESPACE","\n            ",660],["T_RETURN","return",661],["T_WHITESPACE"," ",661],["T_VARIABLE","$this",661],["T_OBJECT_OPERATOR","->",661],["T_STRING","_optionsByCode",661],"[",["T_VARIABLE","$code",661],"]",";",["T_WHITESPACE","\n        ",661],"}",["T_WHITESPACE","\n        ",662],["T_RETURN","return",663],["T_WHITESPACE"," ",663],["T_STRING","null",663],";",["T_WHITESPACE","\n    ",663],"}",["T_WHITESPACE","\n\n    ",664],["T_DOC_COMMENT","\/**\n     * Returns whether Qty field is valid for this item\n     *\n     * @return bool\n     *\/",666],["T_WHITESPACE","\n    ",670],["T_PUBLIC","public",671],["T_WHITESPACE"," ",671],["T_FUNCTION","function",671],["T_WHITESPACE"," ",671],["T_STRING","canHaveQty",671],"(",")",["T_WHITESPACE","\n    ",671],"{",["T_WHITESPACE","\n        ",672],["T_VARIABLE","$product",673],["T_WHITESPACE"," ",673],"=",["T_WHITESPACE"," ",673],["T_VARIABLE","$this",673],["T_OBJECT_OPERATOR","->",673],["T_STRING","getProduct",673],"(",")",";",["T_WHITESPACE","\n        ",673],["T_RETURN","return",674],["T_WHITESPACE"," ",674],["T_VARIABLE","$product",674],["T_OBJECT_OPERATOR","->",674],["T_STRING","getTypeId",674],"(",")",["T_WHITESPACE"," ",674],["T_IS_NOT_EQUAL","!=",674],["T_WHITESPACE"," ",674],["T_STRING","Mage_Catalog_Model_Product_Type_Grouped",674],["T_DOUBLE_COLON","::",674],["T_STRING","TYPE_CODE",674],";",["T_WHITESPACE","\n    ",674],"}",["T_WHITESPACE","\n\n    ",675],["T_DOC_COMMENT","\/**\n     * Get current custom option download url\n     *\/",677],["T_WHITESPACE","\n    ",679],["T_PUBLIC","public",680],["T_WHITESPACE"," ",680],["T_FUNCTION","function",680],["T_WHITESPACE"," ",680],["T_STRING","getCustomDownloadUrl",680],"(",")",["T_WHITESPACE","\n    ",680],"{",["T_WHITESPACE","\n        ",681],["T_RETURN","return",682],["T_WHITESPACE"," ",682],["T_VARIABLE","$this",682],["T_OBJECT_OPERATOR","->",682],["T_STRING","_customOptionDownloadUrl",682],";",["T_WHITESPACE","\n    ",682],"}",["T_WHITESPACE","\n\n    ",683],["T_DOC_COMMENT","\/**\n     * Sets custom option download url\n     *\/",685],["T_WHITESPACE","\n    ",687],["T_PUBLIC","public",688],["T_WHITESPACE"," ",688],["T_FUNCTION","function",688],["T_WHITESPACE"," ",688],["T_STRING","setCustomDownloadUrl",688],"(",["T_VARIABLE","$url",688],")",["T_WHITESPACE","\n    ",688],"{",["T_WHITESPACE","\n        ",689],["T_VARIABLE","$this",690],["T_OBJECT_OPERATOR","->",690],["T_STRING","_customOptionDownloadUrl",690],["T_WHITESPACE"," ",690],"=",["T_WHITESPACE"," ",690],["T_VARIABLE","$url",690],";",["T_WHITESPACE","\n    ",690],"}",["T_WHITESPACE","\n\n    ",691],["T_DOC_COMMENT","\/**\n     * Returns special download params (if needed) for custom option with type = 'file'.\n     * Needed to implement Mage_Catalog_Model_Product_Configuration_Item_Interface.\n     *\n     * We have to customize only controller url, so return it.\n     *\n     * @return null|Varien_Object\n     *\/",693],["T_WHITESPACE","\n    ",700],["T_PUBLIC","public",701],["T_WHITESPACE"," ",701],["T_FUNCTION","function",701],["T_WHITESPACE"," ",701],["T_STRING","getFileDownloadParams",701],"(",")",["T_WHITESPACE","\n    ",701],"{",["T_WHITESPACE","\n        ",702],["T_VARIABLE","$params",703],["T_WHITESPACE"," ",703],"=",["T_WHITESPACE"," ",703],["T_NEW","new",703],["T_WHITESPACE"," ",703],["T_STRING","Varien_Object",703],"(",")",";",["T_WHITESPACE","\n        ",703],["T_VARIABLE","$params",704],["T_OBJECT_OPERATOR","->",704],["T_STRING","setUrl",704],"(",["T_VARIABLE","$this",704],["T_OBJECT_OPERATOR","->",704],["T_STRING","_customOptionDownloadUrl",704],")",";",["T_WHITESPACE","\n        ",704],["T_RETURN","return",705],["T_WHITESPACE"," ",705],["T_VARIABLE","$params",705],";",["T_WHITESPACE","\n    ",705],"}",["T_WHITESPACE","\n\n    ",706],["T_DOC_COMMENT","\/**\n     * Loads item together with its options (default load() method doesn't load options).\n     * If we need to load only some of options, then option code or array of option codes\n     * can be provided in $optionsFilter.\n     *\n     * @param int $id\n     * @param null|string|array $optionsFilter\n     *\n     * @return Mage_Wishlist_Model_Item\n     *\/",708],["T_WHITESPACE","\n    ",717],["T_PUBLIC","public",718],["T_WHITESPACE"," ",718],["T_FUNCTION","function",718],["T_WHITESPACE"," ",718],["T_STRING","loadWithOptions",718],"(",["T_VARIABLE","$id",718],",",["T_WHITESPACE"," ",718],["T_VARIABLE","$optionsFilter",718],["T_WHITESPACE"," ",718],"=",["T_WHITESPACE"," ",718],["T_STRING","null",718],")",["T_WHITESPACE","\n    ",718],"{",["T_WHITESPACE","\n        ",719],["T_VARIABLE","$this",720],["T_OBJECT_OPERATOR","->",720],["T_STRING","load",720],"(",["T_VARIABLE","$id",720],")",";",["T_WHITESPACE","\n        ",720],["T_IF","if",721],["T_WHITESPACE"," ",721],"(","!",["T_VARIABLE","$this",721],["T_OBJECT_OPERATOR","->",721],["T_STRING","getId",721],"(",")",")",["T_WHITESPACE"," ",721],"{",["T_WHITESPACE","\n            ",721],["T_RETURN","return",722],["T_WHITESPACE"," ",722],["T_VARIABLE","$this",722],";",["T_WHITESPACE","\n        ",722],"}",["T_WHITESPACE","\n\n        ",723],["T_VARIABLE","$options",725],["T_WHITESPACE"," ",725],"=",["T_WHITESPACE"," ",725],["T_STRING","Mage",725],["T_DOUBLE_COLON","::",725],["T_STRING","getResourceModel",725],"(",["T_CONSTANT_ENCAPSED_STRING","'wishlist\/item_option_collection'",725],")",["T_WHITESPACE","\n            ",725],["T_OBJECT_OPERATOR","->",726],["T_STRING","addItemFilter",726],"(",["T_VARIABLE","$this",726],")",";",["T_WHITESPACE","\n        ",726],["T_IF","if",727],["T_WHITESPACE"," ",727],"(",["T_VARIABLE","$optionsFilter",727],")",["T_WHITESPACE"," ",727],"{",["T_WHITESPACE","\n            ",727],["T_VARIABLE","$options",728],["T_OBJECT_OPERATOR","->",728],["T_STRING","addFieldToFilter",728],"(",["T_CONSTANT_ENCAPSED_STRING","'code'",728],",",["T_WHITESPACE"," ",728],["T_VARIABLE","$optionsFilter",728],")",";",["T_WHITESPACE","\n        ",728],"}",["T_WHITESPACE","\n\n        ",729],["T_VARIABLE","$this",731],["T_OBJECT_OPERATOR","->",731],["T_STRING","setOptions",731],"(",["T_VARIABLE","$options",731],["T_OBJECT_OPERATOR","->",731],["T_STRING","getOptionsByItem",731],"(",["T_VARIABLE","$this",731],")",")",";",["T_WHITESPACE","\n        ",731],["T_RETURN","return",732],["T_WHITESPACE"," ",732],["T_VARIABLE","$this",732],";",["T_WHITESPACE","\n    ",732],"}",["T_WHITESPACE","\n",733],"}",["T_WHITESPACE","\n",734]]
[["T_OPEN_TAG","<?php\n",1],["T_DOC_COMMENT","\/**\n * Magento\n *\n * NOTICE OF LICENSE\n *\n * This source file is subject to the Open Software License (OSL 3.0)\n * that is bundled with this package in the file LICENSE.txt.\n * It is also available through the world-wide-web at this URL:\n * http:\/\/opensource.org\/licenses\/osl-3.0.php\n * If you did not receive a copy of the license and are unable to\n * obtain it through the world-wide-web, please send an email\n * to license@magento.com so we can send you a copy immediately.\n *\n * DISCLAIMER\n *\n * Do not edit or add to this file if you wish to upgrade Magento to newer\n * versions in the future. If you wish to customize Magento for your\n * needs please refer to http:\/\/www.magento.com for more information.\n *\n * @category    Mage\n * @package     Mage_Catalog\n * @copyright  Copyright (c) 2006-2016 X.commerce, Inc. and affiliates (http:\/\/www.magento.com)\n * @license    http:\/\/opensource.org\/licenses\/osl-3.0.php  Open Software License (OSL 3.0)\n *\/",2],["T_WHITESPACE","\n\n\n",25],["T_DOC_COMMENT","\/**\n * Catalog Product Compare Helper\n *\n * @category   Mage\n * @package    Mage_Catalog\n * @author     Magento Core Team <core@magentocommerce.com>\n *\/",28],["T_WHITESPACE","\n",34],["T_CLASS","class",35],["T_WHITESPACE"," ",35],["T_STRING","Mage_Catalog_Helper_Product_Compare",35],["T_WHITESPACE"," ",35],["T_EXTENDS","extends",35],["T_WHITESPACE"," ",35],["T_STRING","Mage_Core_Helper_Url",35],["T_WHITESPACE","\n",35],"{",["T_WHITESPACE","\n    ",36],["T_DOC_COMMENT","\/**\n     * Product Compare Items Collection\n     *\n     * @var Mage_Catalog_Model_Resource_Eav_Mysql4_Product_Compare_Item_Collection\n     *\/",37],["T_WHITESPACE","\n    ",41],["T_PROTECTED","protected",42],["T_WHITESPACE"," ",42],["T_VARIABLE","$_itemCollection",42],";",["T_WHITESPACE","\n\n    ",42],["T_DOC_COMMENT","\/**\n     * Product Comapare Items Collection has items flag\n     *\n     * @var bool\n     *\/",44],["T_WHITESPACE","\n    ",48],["T_PROTECTED","protected",49],["T_WHITESPACE"," ",49],["T_VARIABLE","$_hasItems",49],";",["T_WHITESPACE","\n\n    ",49],["T_DOC_COMMENT","\/**\n     * Allow used Flat catalog product for product compare items collection\n     *\n     * @var bool\n     *\/",51],["T_WHITESPACE","\n    ",55],["T_PROTECTED","protected",56],["T_WHITESPACE"," ",56],["T_VARIABLE","$_allowUsedFlat",56],["T_WHITESPACE"," ",56],"=",["T_WHITESPACE"," ",56],["T_STRING","true",56],";",["T_WHITESPACE","\n\n    ",56],["T_DOC_COMMENT","\/**\n     * Customer id\n     *\n     * @var null|int\n     *\/",58],["T_WHITESPACE","\n    ",62],["T_PROTECTED","protected",63],["T_WHITESPACE"," ",63],["T_VARIABLE","$_customerId",63],["T_WHITESPACE"," ",63],"=",["T_WHITESPACE"," ",63],["T_STRING","null",63],";",["T_WHITESPACE","\n\n    ",63],["T_DOC_COMMENT","\/**\n     * @var Mage_Log_Helper_Data\n     *\/",65],["T_WHITESPACE","\n    ",67],["T_PROTECTED","protected",68],["T_WHITESPACE"," ",68],["T_VARIABLE","$_logCondition",68],";",["T_WHITESPACE","\n\n    ",68],["T_DOC_COMMENT","\/**\n     * @var Mage_Catalog_Model_Session\n     *\/",70],["T_WHITESPACE","\n    ",72],["T_PROTECTED","protected",73],["T_WHITESPACE"," ",73],["T_VARIABLE","$_catalogSession",73],";",["T_WHITESPACE","\n\n    ",73],["T_DOC_COMMENT","\/**\n     * @var Mage_Customer_Model_Session\n     *\/",75],["T_WHITESPACE","\n    ",77],["T_PROTECTED","protected",78],["T_WHITESPACE"," ",78],["T_VARIABLE","$_customerSession",78],";",["T_WHITESPACE","\n\n    ",78],["T_DOC_COMMENT","\/**\n     * @var Mage_Core_Model_Session\n     *\/",80],["T_WHITESPACE","\n    ",82],["T_PROTECTED","protected",83],["T_WHITESPACE"," ",83],["T_VARIABLE","$_coreSession",83],";",["T_WHITESPACE","\n\n    ",83],["T_DOC_COMMENT","\/**\n     * @var Mage_Log_Model_Visitor\n     *\/",85],["T_WHITESPACE","\n    ",87],["T_PROTECTED","protected",88],["T_WHITESPACE"," ",88],["T_VARIABLE","$_logVisitor",88],";",["T_WHITESPACE","\n\n    ",88],["T_DOC_COMMENT","\/**\n     * @var Mage_Catalog_Model_Product_Visibility\n     *\/",90],["T_WHITESPACE","\n    ",92],["T_PROTECTED","protected",93],["T_WHITESPACE"," ",93],["T_VARIABLE","$_productVisibility",93],";",["T_WHITESPACE","\n\n    ",93],["T_PUBLIC","public",95],["T_WHITESPACE"," ",95],["T_FUNCTION","function",95],["T_WHITESPACE"," ",95],["T_STRING","__construct",95],"(",["T_ARRAY","array",95],["T_WHITESPACE"," ",95],["T_VARIABLE","$data",95],["T_WHITESPACE"," ",95],"=",["T_WHITESPACE"," ",95],["T_ARRAY","array",95],"(",")",")",["T_WHITESPACE","\n    ",95],"{",["T_WHITESPACE","\n        ",96],["T_VARIABLE","$this",97],["T_OBJECT_OPERATOR","->",97],["T_STRING","_logCondition",97],["T_WHITESPACE"," ",97],"=",["T_WHITESPACE"," ",97],["T_ISSET","isset",97],"(",["T_VARIABLE","$data",97],"[",["T_CONSTANT_ENCAPSED_STRING","'log_condition'",97],"]",")",["T_WHITESPACE","\n            ",97],"?",["T_WHITESPACE"," ",98],["T_VARIABLE","$data",98],"[",["T_CONSTANT_ENCAPSED_STRING","'log_condition'",98],"]",["T_WHITESPACE"," ",98],":",["T_WHITESPACE"," ",98],["T_STRING","Mage",98],["T_DOUBLE_COLON","::",98],["T_STRING","helper",98],"(",["T_CONSTANT_ENCAPSED_STRING","'log'",98],")",";",["T_WHITESPACE","\n        ",98],["T_VARIABLE","$this",99],["T_OBJECT_OPERATOR","->",99],["T_STRING","_catalogSession",99],["T_WHITESPACE"," ",99],"=",["T_WHITESPACE"," ",99],["T_ISSET","isset",99],"(",["T_VARIABLE","$data",99],"[",["T_CONSTANT_ENCAPSED_STRING","'catalog_session'",99],"]",")",["T_WHITESPACE","\n            ",99],"?",["T_WHITESPACE"," ",100],["T_VARIABLE","$data",100],"[",["T_CONSTANT_ENCAPSED_STRING","'catalog_session'",100],"]",["T_WHITESPACE"," ",100],":",["T_WHITESPACE"," ",100],["T_STRING","Mage",100],["T_DOUBLE_COLON","::",100],["T_STRING","getSingleton",100],"(",["T_CONSTANT_ENCAPSED_STRING","'catalog\/session'",100],")",";",["T_WHITESPACE","\n        ",100],["T_VARIABLE","$this",101],["T_OBJECT_OPERATOR","->",101],["T_STRING","_customerSession",101],["T_WHITESPACE"," ",101],"=",["T_WHITESPACE"," ",101],["T_ISSET","isset",101],"(",["T_VARIABLE","$data",101],"[",["T_CONSTANT_ENCAPSED_STRING","'customer_session'",101],"]",")",["T_WHITESPACE","\n            ",101],"?",["T_WHITESPACE"," ",102],["T_VARIABLE","$data",102],"[",["T_CONSTANT_ENCAPSED_STRING","'customer_session'",102],"]",["T_WHITESPACE"," ",102],":",["T_WHITESPACE"," ",102],["T_STRING","Mage",102],["T_DOUBLE_COLON","::",102],["T_STRING","getSingleton",102],"(",["T_CONSTANT_ENCAPSED_STRING","'customer\/session'",102],")",";",["T_WHITESPACE","\n        ",102],["T_VARIABLE","$this",103],["T_OBJECT_OPERATOR","->",103],["T_STRING","_coreSession",103],["T_WHITESPACE"," ",103],"=",["T_WHITESPACE"," ",103],["T_ISSET","isset",103],"(",["T_VARIABLE","$data",103],"[",["T_CONSTANT_ENCAPSED_STRING","'core_session'",103],"]",")",["T_WHITESPACE","\n            ",103],"?",["T_WHITESPACE"," ",104],["T_VARIABLE","$data",104],"[",["T_CONSTANT_ENCAPSED_STRING","'core_session'",104],"]",["T_WHITESPACE"," ",104],":",["T_WHITESPACE","  ",104],["T_STRING","Mage",104],["T_DOUBLE_COLON","::",104],["T_STRING","getSingleton",104],"(",["T_CONSTANT_ENCAPSED_STRING","'core\/session'",104],")",";",["T_WHITESPACE","\n        ",104],["T_VARIABLE","$this",105],["T_OBJECT_OPERATOR","->",105],["T_STRING","_productVisibility",105],["T_WHITESPACE"," ",105],"=",["T_WHITESPACE"," ",105],["T_ISSET","isset",105],"(",["T_VARIABLE","$data",105],"[",["T_CONSTANT_ENCAPSED_STRING","'product_visibility'",105],"]",")",["T_WHITESPACE","\n            ",105],"?",["T_WHITESPACE"," ",106],["T_VARIABLE","$data",106],"[",["T_CONSTANT_ENCAPSED_STRING","'product_visibility'",106],"]",["T_WHITESPACE"," ",106],":",["T_WHITESPACE"," ",106],["T_STRING","Mage",106],["T_DOUBLE_COLON","::",106],["T_STRING","getSingleton",106],"(",["T_CONSTANT_ENCAPSED_STRING","'catalog\/product_visibility'",106],")",";",["T_WHITESPACE","\n        ",106],["T_VARIABLE","$this",107],["T_OBJECT_OPERATOR","->",107],["T_STRING","_logVisitor",107],["T_WHITESPACE"," ",107],"=",["T_WHITESPACE"," ",107],["T_ISSET","isset",107],"(",["T_VARIABLE","$data",107],"[",["T_CONSTANT_ENCAPSED_STRING","'log_visitor'",107],"]",")",["T_WHITESPACE","\n            ",107],"?",["T_WHITESPACE"," ",108],["T_VARIABLE","$data",108],"[",["T_CONSTANT_ENCAPSED_STRING","'log_visitor'",108],"]",["T_WHITESPACE"," ",108],":",["T_WHITESPACE"," ",108],["T_STRING","Mage",108],["T_DOUBLE_COLON","::",108],["T_STRING","getSingleton",108],"(",["T_CONSTANT_ENCAPSED_STRING","'log\/visitor'",108],")",";",["T_WHITESPACE","\n    ",108],"}",["T_WHITESPACE","\n\n    ",109],["T_DOC_COMMENT","\/**\n     * Retrieve Catalog Session instance\n     *\n     * @return Mage_Catalog_Model_Session\n     *\/",111],["T_WHITESPACE","\n    ",115],["T_PROTECTED","protected",116],["T_WHITESPACE"," ",116],["T_FUNCTION","function",116],["T_WHITESPACE"," ",116],["T_STRING","_getSession",116],"(",")",["T_WHITESPACE","\n    ",116],"{",["T_WHITESPACE","\n        ",117],["T_RETURN","return",118],["T_WHITESPACE"," ",118],["T_VARIABLE","$this",118],["T_OBJECT_OPERATOR","->",118],["T_STRING","_catalogSession",118],";",["T_WHITESPACE","\n    ",118],"}",["T_WHITESPACE","\n\n    ",119],["T_DOC_COMMENT","\/**\n     * Retrieve compare list url\n     *\n     * @return string\n     *\/",121],["T_WHITESPACE","\n    ",125],["T_PUBLIC","public",126],["T_WHITESPACE"," ",126],["T_FUNCTION","function",126],["T_WHITESPACE"," ",126],["T_STRING","getListUrl",126],"(",")",["T_WHITESPACE","\n    ",126],"{",["T_WHITESPACE","\n        ",127],["T_VARIABLE","$itemIds",128],["T_WHITESPACE"," ",128],"=",["T_WHITESPACE"," ",128],["T_ARRAY","array",128],"(",")",";",["T_WHITESPACE","\n        ",128],["T_FOREACH","foreach",129],["T_WHITESPACE"," ",129],"(",["T_VARIABLE","$this",129],["T_OBJECT_OPERATOR","->",129],["T_STRING","getItemCollection",129],"(",")",["T_WHITESPACE"," ",129],["T_AS","as",129],["T_WHITESPACE"," ",129],["T_VARIABLE","$item",129],")",["T_WHITESPACE"," ",129],"{",["T_WHITESPACE","\n            ",129],["T_VARIABLE","$itemIds",130],"[","]",["T_WHITESPACE"," ",130],"=",["T_WHITESPACE"," ",130],["T_VARIABLE","$item",130],["T_OBJECT_OPERATOR","->",130],["T_STRING","getId",130],"(",")",";",["T_WHITESPACE","\n        ",130],"}",["T_WHITESPACE","\n\n         ",131],["T_VARIABLE","$params",133],["T_WHITESPACE"," ",133],"=",["T_WHITESPACE"," ",133],["T_ARRAY","array",133],"(",["T_WHITESPACE","\n            ",133],["T_CONSTANT_ENCAPSED_STRING","'items'",134],["T_WHITESPACE"," ",134],["T_DOUBLE_ARROW","=>",134],["T_WHITESPACE"," ",134],["T_STRING","implode",134],"(",["T_CONSTANT_ENCAPSED_STRING","','",134],",",["T_WHITESPACE"," ",134],["T_VARIABLE","$itemIds",134],")",",",["T_WHITESPACE","\n            ",134],["T_STRING","Mage_Core_Controller_Front_Action",135],["T_DOUBLE_COLON","::",135],["T_STRING","PARAM_NAME_URL_ENCODED",135],["T_WHITESPACE"," ",135],["T_DOUBLE_ARROW","=>",135],["T_WHITESPACE"," ",135],["T_VARIABLE","$this",135],["T_OBJECT_OPERATOR","->",135],["T_STRING","getEncodedUrl",135],"(",")",["T_WHITESPACE","\n        ",135],")",";",["T_WHITESPACE","\n\n        ",136],["T_RETURN","return",138],["T_WHITESPACE"," ",138],["T_VARIABLE","$this",138],["T_OBJECT_OPERATOR","->",138],["T_STRING","_getUrl",138],"(",["T_CONSTANT_ENCAPSED_STRING","'catalog\/product_compare'",138],",",["T_WHITESPACE"," ",138],["T_VARIABLE","$params",138],")",";",["T_WHITESPACE","\n    ",138],"}",["T_WHITESPACE","\n\n    ",139],["T_DOC_COMMENT","\/**\n     * Get parameters used for build add product to compare list urls\n     *\n     * @param   Mage_Catalog_Model_Product $product\n     * @return  array\n     *\/",141],["T_WHITESPACE","\n    ",146],["T_PROTECTED","protected",147],["T_WHITESPACE"," ",147],["T_FUNCTION","function",147],["T_WHITESPACE"," ",147],["T_STRING","_getUrlParams",147],"(",["T_VARIABLE","$product",147],")",["T_WHITESPACE","\n    ",147],"{",["T_WHITESPACE","\n        ",148],["T_RETURN","return",149],["T_WHITESPACE"," ",149],["T_ARRAY","array",149],"(",["T_WHITESPACE","\n            ",149],["T_CONSTANT_ENCAPSED_STRING","'product'",150],["T_WHITESPACE"," ",150],["T_DOUBLE_ARROW","=>",150],["T_WHITESPACE"," ",150],["T_VARIABLE","$product",150],["T_OBJECT_OPERATOR","->",150],["T_STRING","getId",150],"(",")",",",["T_WHITESPACE","\n            ",150],["T_STRING","Mage_Core_Controller_Front_Action",151],["T_DOUBLE_COLON","::",151],["T_STRING","PARAM_NAME_URL_ENCODED",151],["T_WHITESPACE"," ",151],["T_DOUBLE_ARROW","=>",151],["T_WHITESPACE"," ",151],["T_VARIABLE","$this",151],["T_OBJECT_OPERATOR","->",151],["T_STRING","getEncodedUrl",151],"(",")",",",["T_WHITESPACE","\n            ",151],["T_STRING","Mage_Core_Model_Url",152],["T_DOUBLE_COLON","::",152],["T_STRING","FORM_KEY",152],["T_WHITESPACE"," ",152],["T_DOUBLE_ARROW","=>",152],["T_WHITESPACE"," ",152],["T_VARIABLE","$this",152],["T_OBJECT_OPERATOR","->",152],["T_STRING","_coreSession",152],["T_OBJECT_OPERATOR","->",152],["T_STRING","getFormKey",152],"(",")",["T_WHITESPACE","\n        ",152],")",";",["T_WHITESPACE","\n    ",153],"}",["T_WHITESPACE","\n\n    ",154],["T_DOC_COMMENT","\/**\n     * Retrieve url for adding product to conpare list\n     *\n     * @param   Mage_Catalog_Model_Product $product\n     * @return  string\n     *\/",156],["T_WHITESPACE","\n    ",161],["T_PUBLIC","public",162],["T_WHITESPACE"," ",162],["T_FUNCTION","function",162],["T_WHITESPACE"," ",162],["T_STRING","getAddUrl",162],"(",["T_VARIABLE","$product",162],")",["T_WHITESPACE","\n    ",162],"{",["T_WHITESPACE","\n        ",163],["T_IF","if",164],["T_WHITESPACE"," ",164],"(",["T_VARIABLE","$this",164],["T_OBJECT_OPERATOR","->",164],["T_STRING","_logCondition",164],["T_OBJECT_OPERATOR","->",164],["T_STRING","isVisitorLogEnabled",164],"(",")",["T_WHITESPACE"," ",164],["T_BOOLEAN_OR","||",164],["T_WHITESPACE"," ",164],["T_VARIABLE","$this",164],["T_OBJECT_OPERATOR","->",164],["T_STRING","_customerSession",164],["T_OBJECT_OPERATOR","->",164],["T_STRING","isLoggedIn",164],"(",")",")",["T_WHITESPACE"," ",164],"{",["T_WHITESPACE","\n            ",164],["T_RETURN","return",165],["T_WHITESPACE"," ",165],["T_VARIABLE","$this",165],["T_OBJECT_OPERATOR","->",165],["T_STRING","_getUrl",165],"(",["T_CONSTANT_ENCAPSED_STRING","'catalog\/product_compare\/add'",165],",",["T_WHITESPACE"," ",165],["T_VARIABLE","$this",165],["T_OBJECT_OPERATOR","->",165],["T_STRING","_getUrlParams",165],"(",["T_VARIABLE","$product",165],")",")",";",["T_WHITESPACE","\n        ",165],"}",["T_WHITESPACE","\n        ",166],["T_RETURN","return",167],["T_WHITESPACE"," ",167],["T_CONSTANT_ENCAPSED_STRING","''",167],";",["T_WHITESPACE","\n    ",167],"}",["T_WHITESPACE","\n\n    ",168],["T_DOC_COMMENT","\/**\n     * Retrive add to wishlist url\n     *\n     * @param Mage_Catalog_Model_Product $product\n     * @return string\n     *\/",170],["T_WHITESPACE","\n    ",175],["T_PUBLIC","public",176],["T_WHITESPACE"," ",176],["T_FUNCTION","function",176],["T_WHITESPACE"," ",176],["T_STRING","getAddToWishlistUrl",176],"(",["T_VARIABLE","$product",176],")",["T_WHITESPACE","\n    ",176],"{",["T_WHITESPACE","\n        ",177],["T_VARIABLE","$beforeCompareUrl",178],["T_WHITESPACE"," ",178],"=",["T_WHITESPACE"," ",178],["T_VARIABLE","$this",178],["T_OBJECT_OPERATOR","->",178],["T_STRING","_catalogSession",178],["T_OBJECT_OPERATOR","->",178],["T_STRING","getBeforeCompareUrl",178],"(",")",";",["T_WHITESPACE","\n\n        ",178],["T_VARIABLE","$params",180],["T_WHITESPACE"," ",180],"=",["T_WHITESPACE"," ",180],["T_ARRAY","array",180],"(",["T_WHITESPACE","\n            ",180],["T_CONSTANT_ENCAPSED_STRING","'product'",181],["T_WHITESPACE"," ",181],["T_DOUBLE_ARROW","=>",181],["T_WHITESPACE"," ",181],["T_VARIABLE","$product",181],["T_OBJECT_OPERATOR","->",181],["T_STRING","getId",181],"(",")",",",["T_WHITESPACE","\n            ",181],["T_STRING","Mage_Core_Model_Url",182],["T_DOUBLE_COLON","::",182],["T_STRING","FORM_KEY",182],["T_WHITESPACE"," ",182],["T_DOUBLE_ARROW","=>",182],["T_WHITESPACE"," ",182],["T_VARIABLE","$this",182],["T_OBJECT_OPERATOR","->",182],["T_STRING","_coreSession",182],["T_OBJECT_OPERATOR","->",182],["T_STRING","getFormKey",182],"(",")",",",["T_WHITESPACE","\n            ",182],["T_STRING","Mage_Core_Controller_Front_Action",183],["T_DOUBLE_COLON","::",183],["T_STRING","PARAM_NAME_URL_ENCODED",183],["T_WHITESPACE"," ",183],["T_DOUBLE_ARROW","=>",183],["T_WHITESPACE"," ",183],["T_VARIABLE","$this",183],["T_OBJECT_OPERATOR","->",183],["T_STRING","getEncodedUrl",183],"(",["T_VARIABLE","$beforeCompareUrl",183],")",["T_WHITESPACE","\n        ",183],")",";",["T_WHITESPACE","\n\n        ",184],["T_RETURN","return",186],["T_WHITESPACE"," ",186],["T_VARIABLE","$this",186],["T_OBJECT_OPERATOR","->",186],["T_STRING","_getUrl",186],"(",["T_CONSTANT_ENCAPSED_STRING","'wishlist\/index\/add'",186],",",["T_WHITESPACE"," ",186],["T_VARIABLE","$params",186],")",";",["T_WHITESPACE","\n    ",186],"}",["T_WHITESPACE","\n\n    ",187],["T_DOC_COMMENT","\/**\n     * Retrive add to cart url\n     *\n     * @param Mage_Catalog_Model_Product $product\n     * @return string\n     *\/",189],["T_WHITESPACE","\n    ",194],["T_PUBLIC","public",195],["T_WHITESPACE"," ",195],["T_FUNCTION","function",195],["T_WHITESPACE"," ",195],["T_STRING","getAddToCartUrl",195],"(",["T_VARIABLE","$product",195],")",["T_WHITESPACE","\n    ",195],"{",["T_WHITESPACE","\n        ",196],["T_VARIABLE","$beforeCompareUrl",197],["T_WHITESPACE"," ",197],"=",["T_WHITESPACE"," ",197],["T_VARIABLE","$this",197],["T_OBJECT_OPERATOR","->",197],["T_STRING","_catalogSession",197],["T_OBJECT_OPERATOR","->",197],["T_STRING","getBeforeCompareUrl",197],"(",")",";",["T_WHITESPACE","\n        ",197],["T_VARIABLE","$params",198],["T_WHITESPACE"," ",198],"=",["T_WHITESPACE"," ",198],["T_ARRAY","array",198],"(",["T_WHITESPACE","\n            ",198],["T_CONSTANT_ENCAPSED_STRING","'product'",199],["T_WHITESPACE"," ",199],["T_DOUBLE_ARROW","=>",199],["T_WHITESPACE"," ",199],["T_VARIABLE","$product",199],["T_OBJECT_OPERATOR","->",199],["T_STRING","getId",199],"(",")",",",["T_WHITESPACE","\n            ",199],["T_STRING","Mage_Core_Controller_Front_Action",200],["T_DOUBLE_COLON","::",200],["T_STRING","PARAM_NAME_URL_ENCODED",200],["T_WHITESPACE"," ",200],["T_DOUBLE_ARROW","=>",200],["T_WHITESPACE"," ",200],["T_VARIABLE","$this",200],["T_OBJECT_OPERATOR","->",200],["T_STRING","getEncodedUrl",200],"(",["T_VARIABLE","$beforeCompareUrl",200],")",",",["T_WHITESPACE","\n            ",200],["T_STRING","Mage_Core_Model_Url",201],["T_DOUBLE_COLON","::",201],["T_STRING","FORM_KEY",201],["T_WHITESPACE"," ",201],["T_DOUBLE_ARROW","=>",201],["T_WHITESPACE"," ",201],["T_VARIABLE","$this",201],["T_OBJECT_OPERATOR","->",201],["T_STRING","_coreSession",201],["T_OBJECT_OPERATOR","->",201],["T_STRING","getFormKey",201],"(",")",["T_WHITESPACE","\n        ",201],")",";",["T_WHITESPACE","\n\n        ",202],["T_RETURN","return",204],["T_WHITESPACE"," ",204],["T_VARIABLE","$this",204],["T_OBJECT_OPERATOR","->",204],["T_STRING","_getUrl",204],"(",["T_CONSTANT_ENCAPSED_STRING","'checkout\/cart\/add'",204],",",["T_WHITESPACE"," ",204],["T_VARIABLE","$params",204],")",";",["T_WHITESPACE","\n    ",204],"}",["T_WHITESPACE","\n\n    ",205],["T_DOC_COMMENT","\/**\n     * Retrieve remove item from compare list url\n     *\n     * @param   $item\n     * @return  string\n     *\/",207],["T_WHITESPACE","\n    ",212],["T_PUBLIC","public",213],["T_WHITESPACE"," ",213],["T_FUNCTION","function",213],["T_WHITESPACE"," ",213],["T_STRING","getRemoveUrl",213],"(",["T_VARIABLE","$item",213],")",["T_WHITESPACE","\n    ",213],"{",["T_WHITESPACE","\n        ",214],["T_VARIABLE","$params",215],["T_WHITESPACE"," ",215],"=",["T_WHITESPACE"," ",215],["T_ARRAY","array",215],"(",["T_WHITESPACE","\n            ",215],["T_CONSTANT_ENCAPSED_STRING","'product'",216],["T_WHITESPACE"," ",216],["T_DOUBLE_ARROW","=>",216],["T_WHITESPACE"," ",216],["T_VARIABLE","$item",216],["T_OBJECT_OPERATOR","->",216],["T_STRING","getId",216],"(",")",",",["T_WHITESPACE","\n            ",216],["T_STRING","Mage_Core_Controller_Front_Action",217],["T_DOUBLE_COLON","::",217],["T_STRING","PARAM_NAME_URL_ENCODED",217],["T_WHITESPACE"," ",217],["T_DOUBLE_ARROW","=>",217],["T_WHITESPACE"," ",217],["T_VARIABLE","$this",217],["T_OBJECT_OPERATOR","->",217],["T_STRING","getEncodedUrl",217],"(",")",["T_WHITESPACE","\n        ",217],")",";",["T_WHITESPACE","\n        ",218],["T_RETURN","return",219],["T_WHITESPACE"," ",219],["T_VARIABLE","$this",219],["T_OBJECT_OPERATOR","->",219],["T_STRING","_getUrl",219],"(",["T_CONSTANT_ENCAPSED_STRING","'catalog\/product_compare\/remove'",219],",",["T_WHITESPACE"," ",219],["T_VARIABLE","$params",219],")",";",["T_WHITESPACE","\n    ",219],"}",["T_WHITESPACE","\n\n    ",220],["T_DOC_COMMENT","\/**\n     * Retrieve clear compare list url\n     *\n     * @return string\n     *\/",222],["T_WHITESPACE","\n    ",226],["T_PUBLIC","public",227],["T_WHITESPACE"," ",227],["T_FUNCTION","function",227],["T_WHITESPACE"," ",227],["T_STRING","getClearListUrl",227],"(",")",["T_WHITESPACE","\n    ",227],"{",["T_WHITESPACE","\n        ",228],["T_VARIABLE","$params",229],["T_WHITESPACE"," ",229],"=",["T_WHITESPACE"," ",229],["T_ARRAY","array",229],"(",["T_WHITESPACE","\n            ",229],["T_STRING","Mage_Core_Controller_Front_Action",230],["T_DOUBLE_COLON","::",230],["T_STRING","PARAM_NAME_URL_ENCODED",230],["T_WHITESPACE"," ",230],["T_DOUBLE_ARROW","=>",230],["T_WHITESPACE"," ",230],["T_VARIABLE","$this",230],["T_OBJECT_OPERATOR","->",230],["T_STRING","getEncodedUrl",230],"(",")",["T_WHITESPACE","\n        ",230],")",";",["T_WHITESPACE","\n        ",231],["T_RETURN","return",232],["T_WHITESPACE"," ",232],["T_VARIABLE","$this",232],["T_OBJECT_OPERATOR","->",232],["T_STRING","_getUrl",232],"(",["T_CONSTANT_ENCAPSED_STRING","'catalog\/product_compare\/clear'",232],",",["T_WHITESPACE"," ",232],["T_VARIABLE","$params",232],")",";",["T_WHITESPACE","\n    ",232],"}",["T_WHITESPACE","\n\n    ",233],["T_DOC_COMMENT","\/**\n     * Retrieve compare list items collection\n     *\n     * @return Mage_Catalog_Model_Resource_Eav_Mysql4_Product_Compare_Item_Collection\n     *\/",235],["T_WHITESPACE","\n    ",239],["T_PUBLIC","public",240],["T_WHITESPACE"," ",240],["T_FUNCTION","function",240],["T_WHITESPACE"," ",240],["T_STRING","getItemCollection",240],"(",")",["T_WHITESPACE","\n    ",240],"{",["T_WHITESPACE","\n        ",241],["T_IF","if",242],["T_WHITESPACE"," ",242],"(","!",["T_VARIABLE","$this",242],["T_OBJECT_OPERATOR","->",242],["T_STRING","_itemCollection",242],")",["T_WHITESPACE"," ",242],"{",["T_WHITESPACE","\n            ",242],["T_DOC_COMMENT","\/** @var Mage_Catalog_Model_Resource_Product_Compare_Item_Collection _itemCollection *\/",243],["T_WHITESPACE","\n            ",243],["T_VARIABLE","$this",244],["T_OBJECT_OPERATOR","->",244],["T_STRING","_itemCollection",244],["T_WHITESPACE"," ",244],"=",["T_WHITESPACE"," ",244],["T_STRING","Mage",244],["T_DOUBLE_COLON","::",244],["T_STRING","getResourceModel",244],"(",["T_CONSTANT_ENCAPSED_STRING","'catalog\/product_compare_item_collection'",244],")",["T_WHITESPACE","\n                ",244],["T_OBJECT_OPERATOR","->",245],["T_STRING","useProductItem",245],"(",["T_STRING","true",245],")",["T_WHITESPACE","\n                ",245],["T_OBJECT_OPERATOR","->",246],["T_STRING","setStoreId",246],"(",["T_STRING","Mage",246],["T_DOUBLE_COLON","::",246],["T_STRING","app",246],"(",")",["T_OBJECT_OPERATOR","->",246],["T_STRING","getStore",246],"(",")",["T_OBJECT_OPERATOR","->",246],["T_STRING","getId",246],"(",")",")",";",["T_WHITESPACE","\n\n            ",246],["T_IF","if",248],["T_WHITESPACE"," ",248],"(",["T_VARIABLE","$this",248],["T_OBJECT_OPERATOR","->",248],["T_STRING","_customerSession",248],["T_OBJECT_OPERATOR","->",248],["T_STRING","isLoggedIn",248],"(",")",")",["T_WHITESPACE"," ",248],"{",["T_WHITESPACE","\n                ",248],["T_VARIABLE","$this",249],["T_OBJECT_OPERATOR","->",249],["T_STRING","_itemCollection",249],["T_OBJECT_OPERATOR","->",249],["T_STRING","setCustomerId",249],"(",["T_VARIABLE","$this",249],["T_OBJECT_OPERATOR","->",249],["T_STRING","_customerSession",249],["T_OBJECT_OPERATOR","->",249],["T_STRING","getCustomerId",249],"(",")",")",";",["T_WHITESPACE","\n            ",249],"}",["T_WHITESPACE"," ",250],["T_ELSEIF","elseif",250],["T_WHITESPACE"," ",250],"(",["T_VARIABLE","$this",250],["T_OBJECT_OPERATOR","->",250],["T_STRING","_customerId",250],")",["T_WHITESPACE"," ",250],"{",["T_WHITESPACE","\n                ",250],["T_VARIABLE","$this",251],["T_OBJECT_OPERATOR","->",251],["T_STRING","_itemCollection",251],["T_OBJECT_OPERATOR","->",251],["T_STRING","setCustomerId",251],"(",["T_VARIABLE","$this",251],["T_OBJECT_OPERATOR","->",251],["T_STRING","_customerId",251],")",";",["T_WHITESPACE","\n            ",251],"}",["T_WHITESPACE"," ",252],["T_ELSE","else",252],["T_WHITESPACE"," ",252],"{",["T_WHITESPACE","\n                ",252],["T_VARIABLE","$this",253],["T_OBJECT_OPERATOR","->",253],["T_STRING","_itemCollection",253],["T_OBJECT_OPERATOR","->",253],["T_STRING","setVisitorId",253],"(",["T_VARIABLE","$this",253],["T_OBJECT_OPERATOR","->",253],["T_STRING","_logVisitor",253],["T_OBJECT_OPERATOR","->",253],["T_STRING","getId",253],"(",")",")",";",["T_WHITESPACE","\n            ",253],"}",["T_WHITESPACE","\n\n            ",254],["T_VARIABLE","$this",256],["T_OBJECT_OPERATOR","->",256],["T_STRING","_productVisibility",256],["T_OBJECT_OPERATOR","->",256],["T_STRING","addVisibleInSiteFilterToCollection",256],"(",["T_VARIABLE","$this",256],["T_OBJECT_OPERATOR","->",256],["T_STRING","_itemCollection",256],")",";",["T_WHITESPACE","\n\n            ",256],["T_COMMENT","\/* Price data is added to consider item stock status using price index *\/",258],["T_WHITESPACE","\n            ",258],["T_VARIABLE","$this",259],["T_OBJECT_OPERATOR","->",259],["T_STRING","_itemCollection",259],["T_OBJECT_OPERATOR","->",259],["T_STRING","addPriceData",259],"(",")",";",["T_WHITESPACE","\n\n            ",259],["T_VARIABLE","$this",261],["T_OBJECT_OPERATOR","->",261],["T_STRING","_itemCollection",261],["T_OBJECT_OPERATOR","->",261],["T_STRING","addAttributeToSelect",261],"(",["T_CONSTANT_ENCAPSED_STRING","'name'",261],")",["T_WHITESPACE","\n                ",261],["T_OBJECT_OPERATOR","->",262],["T_STRING","addUrlRewrite",262],"(",")",["T_WHITESPACE","\n                ",262],["T_OBJECT_OPERATOR","->",263],["T_STRING","load",263],"(",")",";",["T_WHITESPACE","\n\n            ",263],["T_COMMENT","\/* update compare items count *\/",265],["T_WHITESPACE","\n            ",265],["T_VARIABLE","$this",266],["T_OBJECT_OPERATOR","->",266],["T_STRING","_catalogSession",266],["T_OBJECT_OPERATOR","->",266],["T_STRING","setCatalogCompareItemsCount",266],"(",["T_STRING","count",266],"(",["T_VARIABLE","$this",266],["T_OBJECT_OPERATOR","->",266],["T_STRING","_itemCollection",266],")",")",";",["T_WHITESPACE","\n        ",266],"}",["T_WHITESPACE","\n\n        ",267],["T_RETURN","return",269],["T_WHITESPACE"," ",269],["T_VARIABLE","$this",269],["T_OBJECT_OPERATOR","->",269],["T_STRING","_itemCollection",269],";",["T_WHITESPACE","\n    ",269],"}",["T_WHITESPACE","\n\n    ",270],["T_DOC_COMMENT","\/**\n     * Calculate cache product compare collection\n     *\n     * @param  bool $logout\n     * @return Mage_Catalog_Helper_Product_Compare\n     *\/",272],["T_WHITESPACE","\n    ",277],["T_PUBLIC","public",278],["T_WHITESPACE"," ",278],["T_FUNCTION","function",278],["T_WHITESPACE"," ",278],["T_STRING","calculate",278],"(",["T_VARIABLE","$logout",278],["T_WHITESPACE"," ",278],"=",["T_WHITESPACE"," ",278],["T_STRING","false",278],")",["T_WHITESPACE","\n    ",278],"{",["T_WHITESPACE","\n        ",279],["T_COMMENT","\/\/ first visit\n",280],["T_WHITESPACE","        ",281],["T_IF","if",281],["T_WHITESPACE"," ",281],"(","!",["T_VARIABLE","$this",281],["T_OBJECT_OPERATOR","->",281],["T_STRING","_catalogSession",281],["T_OBJECT_OPERATOR","->",281],["T_STRING","hasCatalogCompareItemsCount",281],"(",")",["T_WHITESPACE"," ",281],["T_BOOLEAN_AND","&&",281],["T_WHITESPACE"," ",281],"!",["T_VARIABLE","$this",281],["T_OBJECT_OPERATOR","->",281],["T_STRING","_customerId",281],")",["T_WHITESPACE"," ",281],"{",["T_WHITESPACE","\n            ",281],["T_VARIABLE","$count",282],["T_WHITESPACE"," ",282],"=",["T_WHITESPACE"," ",282],["T_LNUMBER","0",282],";",["T_WHITESPACE","\n        ",282],"}",["T_WHITESPACE"," ",283],["T_ELSE","else",283],["T_WHITESPACE"," ",283],"{",["T_WHITESPACE","\n            ",283],["T_DOC_COMMENT","\/** @var $collection Mage_Catalog_Model_Resource_Eav_Mysql4_Product_Compare_Item_Collection *\/",284],["T_WHITESPACE","\n            ",284],["T_VARIABLE","$collection",285],["T_WHITESPACE"," ",285],"=",["T_WHITESPACE"," ",285],["T_STRING","Mage",285],["T_DOUBLE_COLON","::",285],["T_STRING","getResourceModel",285],"(",["T_CONSTANT_ENCAPSED_STRING","'catalog\/product_compare_item_collection'",285],")",["T_WHITESPACE","\n                ",285],["T_OBJECT_OPERATOR","->",286],["T_STRING","useProductItem",286],"(",["T_STRING","true",286],")",";",["T_WHITESPACE","\n            ",286],["T_IF","if",287],["T_WHITESPACE"," ",287],"(","!",["T_VARIABLE","$logout",287],["T_WHITESPACE"," ",287],["T_BOOLEAN_AND","&&",287],["T_WHITESPACE"," ",287],["T_VARIABLE","$this",287],["T_OBJECT_OPERATOR","->",287],["T_STRING","_customerSession",287],["T_OBJECT_OPERATOR","->",287],["T_STRING","isLoggedIn",287],"(",")",")",["T_WHITESPACE"," ",287],"{",["T_WHITESPACE","\n                ",287],["T_VARIABLE","$collection",288],["T_OBJECT_OPERATOR","->",288],["T_STRING","setCustomerId",288],"(",["T_VARIABLE","$this",288],["T_OBJECT_OPERATOR","->",288],["T_STRING","_customerSession",288],["T_OBJECT_OPERATOR","->",288],["T_STRING","getCustomerId",288],"(",")",")",";",["T_WHITESPACE","\n            ",288],"}",["T_WHITESPACE"," ",289],["T_ELSEIF","elseif",289],["T_WHITESPACE"," ",289],"(",["T_VARIABLE","$this",289],["T_OBJECT_OPERATOR","->",289],["T_STRING","_customerId",289],")",["T_WHITESPACE"," ",289],"{",["T_WHITESPACE","\n                ",289],["T_VARIABLE","$collection",290],["T_OBJECT_OPERATOR","->",290],["T_STRING","setCustomerId",290],"(",["T_VARIABLE","$this",290],["T_OBJECT_OPERATOR","->",290],["T_STRING","_customerId",290],")",";",["T_WHITESPACE","\n            ",290],"}",["T_WHITESPACE"," ",291],["T_ELSE","else",291],["T_WHITESPACE"," ",291],"{",["T_WHITESPACE","\n                ",291],["T_VARIABLE","$collection",292],["T_OBJECT_OPERATOR","->",292],["T_STRING","setVisitorId",292],"(",["T_VARIABLE","$this",292],["T_OBJECT_OPERATOR","->",292],["T_STRING","_logVisitor",292],["T_OBJECT_OPERATOR","->",292],["T_STRING","getId",292],"(",")",")",";",["T_WHITESPACE","\n            ",292],"}",["T_WHITESPACE","\n\n            ",293],["T_COMMENT","\/* Price data is added to consider item stock status using price index *\/",295],["T_WHITESPACE","\n            ",295],["T_VARIABLE","$collection",296],["T_OBJECT_OPERATOR","->",296],["T_STRING","addPriceData",296],"(",")",";",["T_WHITESPACE","\n\n            ",296],["T_VARIABLE","$this",298],["T_OBJECT_OPERATOR","->",298],["T_STRING","_productVisibility",298],["T_OBJECT_OPERATOR","->",298],["T_STRING","addVisibleInSiteFilterToCollection",298],"(",["T_VARIABLE","$collection",298],")",";",["T_WHITESPACE","\n\n            ",298],["T_VARIABLE","$count",300],["T_WHITESPACE"," ",300],"=",["T_WHITESPACE"," ",300],["T_VARIABLE","$collection",300],["T_OBJECT_OPERATOR","->",300],["T_STRING","getSize",300],"(",")",";",["T_WHITESPACE","\n        ",300],"}",["T_WHITESPACE","\n\n        ",301],["T_VARIABLE","$this",303],["T_OBJECT_OPERATOR","->",303],["T_STRING","_catalogSession",303],["T_OBJECT_OPERATOR","->",303],["T_STRING","setCatalogCompareItemsCount",303],"(",["T_VARIABLE","$count",303],")",";",["T_WHITESPACE","\n\n        ",303],["T_RETURN","return",305],["T_WHITESPACE"," ",305],["T_VARIABLE","$this",305],";",["T_WHITESPACE","\n    ",305],"}",["T_WHITESPACE","\n\n    ",306],["T_DOC_COMMENT","\/**\n     * Retrieve count of items in compare list\n     *\n     * @return int\n     *\/",308],["T_WHITESPACE","\n    ",312],["T_PUBLIC","public",313],["T_WHITESPACE"," ",313],["T_FUNCTION","function",313],["T_WHITESPACE"," ",313],["T_STRING","getItemCount",313],"(",")",["T_WHITESPACE","\n    ",313],"{",["T_WHITESPACE","\n        ",314],["T_IF","if",315],["T_WHITESPACE"," ",315],"(","!",["T_VARIABLE","$this",315],["T_OBJECT_OPERATOR","->",315],["T_STRING","_catalogSession",315],["T_OBJECT_OPERATOR","->",315],["T_STRING","hasCatalogCompareItemsCount",315],"(",")",")",["T_WHITESPACE"," ",315],"{",["T_WHITESPACE","\n            ",315],["T_VARIABLE","$this",316],["T_OBJECT_OPERATOR","->",316],["T_STRING","calculate",316],"(",")",";",["T_WHITESPACE","\n        ",316],"}",["T_WHITESPACE","\n\n        ",317],["T_RETURN","return",319],["T_WHITESPACE"," ",319],["T_VARIABLE","$this",319],["T_OBJECT_OPERATOR","->",319],["T_STRING","_catalogSession",319],["T_OBJECT_OPERATOR","->",319],["T_STRING","getCatalogCompareItemsCount",319],"(",")",";",["T_WHITESPACE","\n    ",319],"}",["T_WHITESPACE","\n\n    ",320],["T_DOC_COMMENT","\/**\n     * Check has items\n     *\n     * @return bool\n     *\/",322],["T_WHITESPACE","\n    ",326],["T_PUBLIC","public",327],["T_WHITESPACE"," ",327],["T_FUNCTION","function",327],["T_WHITESPACE"," ",327],["T_STRING","hasItems",327],"(",")",["T_WHITESPACE","\n    ",327],"{",["T_WHITESPACE","\n        ",328],["T_RETURN","return",329],["T_WHITESPACE"," ",329],["T_VARIABLE","$this",329],["T_OBJECT_OPERATOR","->",329],["T_STRING","getItemCount",329],"(",")",["T_WHITESPACE"," ",329],">",["T_WHITESPACE"," ",329],["T_LNUMBER","0",329],";",["T_WHITESPACE","\n    ",329],"}",["T_WHITESPACE","\n\n    ",330],["T_DOC_COMMENT","\/**\n     * Set is allow used flat (for collection)\n     *\n     * @param bool $flag\n     * @return Mage_Catalog_Helper_Product_Compare\n     *\/",332],["T_WHITESPACE","\n    ",337],["T_PUBLIC","public",338],["T_WHITESPACE"," ",338],["T_FUNCTION","function",338],["T_WHITESPACE"," ",338],["T_STRING","setAllowUsedFlat",338],"(",["T_VARIABLE","$flag",338],")",["T_WHITESPACE","\n    ",338],"{",["T_WHITESPACE","\n        ",339],["T_VARIABLE","$this",340],["T_OBJECT_OPERATOR","->",340],["T_STRING","_allowUsedFlat",340],["T_WHITESPACE"," ",340],"=",["T_WHITESPACE"," ",340],["T_BOOL_CAST","(bool)",340],["T_VARIABLE","$flag",340],";",["T_WHITESPACE","\n        ",340],["T_RETURN","return",341],["T_WHITESPACE"," ",341],["T_VARIABLE","$this",341],";",["T_WHITESPACE","\n    ",341],"}",["T_WHITESPACE","\n\n    ",342],["T_DOC_COMMENT","\/**\n     * Retrieve is allow used flat (for collection)\n     *\n     * @return bool\n     *\/",344],["T_WHITESPACE","\n    ",348],["T_PUBLIC","public",349],["T_WHITESPACE"," ",349],["T_FUNCTION","function",349],["T_WHITESPACE"," ",349],["T_STRING","getAllowUsedFlat",349],"(",")",["T_WHITESPACE","\n    ",349],"{",["T_WHITESPACE","\n        ",350],["T_RETURN","return",351],["T_WHITESPACE"," ",351],["T_VARIABLE","$this",351],["T_OBJECT_OPERATOR","->",351],["T_STRING","_allowUsedFlat",351],";",["T_WHITESPACE","\n    ",351],"}",["T_WHITESPACE","\n\n    ",352],["T_DOC_COMMENT","\/**\n     * Setter for customer id\n     *\n     * @param int $id\n     * @return Mage_Catalog_Helper_Product_Compare\n     *\/",354],["T_WHITESPACE","\n    ",359],["T_PUBLIC","public",360],["T_WHITESPACE"," ",360],["T_FUNCTION","function",360],["T_WHITESPACE"," ",360],["T_STRING","setCustomerId",360],"(",["T_VARIABLE","$id",360],")",["T_WHITESPACE","\n    ",360],"{",["T_WHITESPACE","\n        ",361],["T_VARIABLE","$this",362],["T_OBJECT_OPERATOR","->",362],["T_STRING","_customerId",362],["T_WHITESPACE"," ",362],"=",["T_WHITESPACE"," ",362],["T_VARIABLE","$id",362],";",["T_WHITESPACE","\n        ",362],["T_RETURN","return",363],["T_WHITESPACE"," ",363],["T_VARIABLE","$this",363],";",["T_WHITESPACE","\n    ",363],"}",["T_WHITESPACE","\n",364],"}",["T_WHITESPACE","\n",365]]
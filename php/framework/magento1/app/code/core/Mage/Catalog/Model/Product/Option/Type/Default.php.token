[["T_OPEN_TAG","<?php\n",1],["T_DOC_COMMENT","\/**\n * Magento\n *\n * NOTICE OF LICENSE\n *\n * This source file is subject to the Open Software License (OSL 3.0)\n * that is bundled with this package in the file LICENSE.txt.\n * It is also available through the world-wide-web at this URL:\n * http:\/\/opensource.org\/licenses\/osl-3.0.php\n * If you did not receive a copy of the license and are unable to\n * obtain it through the world-wide-web, please send an email\n * to license@magento.com so we can send you a copy immediately.\n *\n * DISCLAIMER\n *\n * Do not edit or add to this file if you wish to upgrade Magento to newer\n * versions in the future. If you wish to customize Magento for your\n * needs please refer to http:\/\/www.magento.com for more information.\n *\n * @category    Mage\n * @package     Mage_Catalog\n * @copyright  Copyright (c) 2006-2016 X.commerce, Inc. and affiliates (http:\/\/www.magento.com)\n * @license    http:\/\/opensource.org\/licenses\/osl-3.0.php  Open Software License (OSL 3.0)\n *\/",2],["T_WHITESPACE","\n\n",25],["T_DOC_COMMENT","\/**\n * Catalog product option default type\n *\n * @category   Mage\n * @package    Mage_Catalog\n * @author     Magento Core Team <core@magentocommerce.com>\n *\/",27],["T_WHITESPACE","\n",33],["T_CLASS","class",34],["T_WHITESPACE"," ",34],["T_STRING","Mage_Catalog_Model_Product_Option_Type_Default",34],["T_WHITESPACE"," ",34],["T_EXTENDS","extends",34],["T_WHITESPACE"," ",34],["T_STRING","Varien_Object",34],["T_WHITESPACE","\n",34],"{",["T_WHITESPACE","\n    ",35],["T_DOC_COMMENT","\/**\n     * Option Instance\n     *\n     * @var Mage_Catalog_Model_Product_Option\n     *\/",36],["T_WHITESPACE","\n    ",40],["T_PROTECTED","protected",41],["T_WHITESPACE"," ",41],["T_VARIABLE","$_option",41],";",["T_WHITESPACE","\n\n    ",41],["T_DOC_COMMENT","\/**\n     * Product Instance\n     *\n     * @var Mage_Catalog_Model_Product\n     *\/",43],["T_WHITESPACE","\n    ",47],["T_PROTECTED","protected",48],["T_WHITESPACE"," ",48],["T_VARIABLE","$_product",48],";",["T_WHITESPACE","\n\n\n\n    ",48],["T_DOC_COMMENT","\/**\n     * description\n     *\n     * @var    mixed\n     *\/",52],["T_WHITESPACE","\n    ",56],["T_PROTECTED","protected",57],["T_WHITESPACE"," ",57],["T_VARIABLE","$_productOptions",57],["T_WHITESPACE"," ",57],"=",["T_WHITESPACE"," ",57],["T_ARRAY","array",57],"(",")",";",["T_WHITESPACE","\n\n    ",57],["T_DOC_COMMENT","\/**\n     * Option Instance setter\n     *\n     * @param Mage_Catalog_Model_Product_Option $option\n     * @return Mage_Catalog_Model_Product_Option_Type_Default\n     *\/",59],["T_WHITESPACE","\n    ",64],["T_PUBLIC","public",65],["T_WHITESPACE"," ",65],["T_FUNCTION","function",65],["T_WHITESPACE"," ",65],["T_STRING","setOption",65],"(",["T_VARIABLE","$option",65],")",["T_WHITESPACE","\n    ",65],"{",["T_WHITESPACE","\n        ",66],["T_VARIABLE","$this",67],["T_OBJECT_OPERATOR","->",67],["T_STRING","_option",67],["T_WHITESPACE"," ",67],"=",["T_WHITESPACE"," ",67],["T_VARIABLE","$option",67],";",["T_WHITESPACE","\n        ",67],["T_RETURN","return",68],["T_WHITESPACE"," ",68],["T_VARIABLE","$this",68],";",["T_WHITESPACE","\n    ",68],"}",["T_WHITESPACE","\n\n    ",69],["T_DOC_COMMENT","\/**\n     * Option Instance getter\n     *\n     * @throws Mage_Core_Exception\n     * @return Mage_Catalog_Model_Product_Option\n     *\/",71],["T_WHITESPACE","\n    ",76],["T_PUBLIC","public",77],["T_WHITESPACE"," ",77],["T_FUNCTION","function",77],["T_WHITESPACE"," ",77],["T_STRING","getOption",77],"(",")",["T_WHITESPACE","\n    ",77],"{",["T_WHITESPACE","\n        ",78],["T_IF","if",79],["T_WHITESPACE"," ",79],"(",["T_VARIABLE","$this",79],["T_OBJECT_OPERATOR","->",79],["T_STRING","_option",79],["T_WHITESPACE"," ",79],["T_INSTANCEOF","instanceof",79],["T_WHITESPACE"," ",79],["T_STRING","Mage_Catalog_Model_Product_Option",79],")",["T_WHITESPACE"," ",79],"{",["T_WHITESPACE","\n            ",79],["T_RETURN","return",80],["T_WHITESPACE"," ",80],["T_VARIABLE","$this",80],["T_OBJECT_OPERATOR","->",80],["T_STRING","_option",80],";",["T_WHITESPACE","\n        ",80],"}",["T_WHITESPACE","\n        ",81],["T_STRING","Mage",82],["T_DOUBLE_COLON","::",82],["T_STRING","throwException",82],"(",["T_STRING","Mage",82],["T_DOUBLE_COLON","::",82],["T_STRING","helper",82],"(",["T_CONSTANT_ENCAPSED_STRING","'catalog'",82],")",["T_OBJECT_OPERATOR","->",82],["T_STRING","__",82],"(",["T_CONSTANT_ENCAPSED_STRING","'Wrong option instance type in options group.'",82],")",")",";",["T_WHITESPACE","\n    ",82],"}",["T_WHITESPACE","\n\n    ",83],["T_DOC_COMMENT","\/**\n     * Product Instance setter\n     *\n     * @param Mage_Catalog_Model_Product $product\n     * @return Mage_Catalog_Model_Product_Option_Type_Default\n     *\/",85],["T_WHITESPACE","\n    ",90],["T_PUBLIC","public",91],["T_WHITESPACE"," ",91],["T_FUNCTION","function",91],["T_WHITESPACE"," ",91],["T_STRING","setProduct",91],"(",["T_VARIABLE","$product",91],")",["T_WHITESPACE","\n    ",91],"{",["T_WHITESPACE","\n        ",92],["T_VARIABLE","$this",93],["T_OBJECT_OPERATOR","->",93],["T_STRING","_product",93],["T_WHITESPACE"," ",93],"=",["T_WHITESPACE"," ",93],["T_VARIABLE","$product",93],";",["T_WHITESPACE","\n        ",93],["T_RETURN","return",94],["T_WHITESPACE"," ",94],["T_VARIABLE","$this",94],";",["T_WHITESPACE","\n    ",94],"}",["T_WHITESPACE","\n\n    ",95],["T_DOC_COMMENT","\/**\n     * Product Instance getter\n     *\n     * @throws Mage_Core_Exception\n     * @return Mage_Catalog_Model_Product\n     *\/",97],["T_WHITESPACE","\n    ",102],["T_PUBLIC","public",103],["T_WHITESPACE"," ",103],["T_FUNCTION","function",103],["T_WHITESPACE"," ",103],["T_STRING","getProduct",103],"(",")",["T_WHITESPACE","\n    ",103],"{",["T_WHITESPACE","\n        ",104],["T_IF","if",105],["T_WHITESPACE"," ",105],"(",["T_VARIABLE","$this",105],["T_OBJECT_OPERATOR","->",105],["T_STRING","_product",105],["T_WHITESPACE"," ",105],["T_INSTANCEOF","instanceof",105],["T_WHITESPACE"," ",105],["T_STRING","Mage_Catalog_Model_Product",105],")",["T_WHITESPACE"," ",105],"{",["T_WHITESPACE","\n            ",105],["T_RETURN","return",106],["T_WHITESPACE"," ",106],["T_VARIABLE","$this",106],["T_OBJECT_OPERATOR","->",106],["T_STRING","_product",106],";",["T_WHITESPACE","\n        ",106],"}",["T_WHITESPACE","\n        ",107],["T_STRING","Mage",108],["T_DOUBLE_COLON","::",108],["T_STRING","throwException",108],"(",["T_STRING","Mage",108],["T_DOUBLE_COLON","::",108],["T_STRING","helper",108],"(",["T_CONSTANT_ENCAPSED_STRING","'catalog'",108],")",["T_OBJECT_OPERATOR","->",108],["T_STRING","__",108],"(",["T_CONSTANT_ENCAPSED_STRING","'Wrong product instance type in options group.'",108],")",")",";",["T_WHITESPACE","\n    ",108],"}",["T_WHITESPACE","\n\n    ",109],["T_DOC_COMMENT","\/**\n     * Getter for Configuration Item Option\n     *\n     * @return Mage_Catalog_Model_Product_Configuration_Item_Option_Interface\n     *\/",111],["T_WHITESPACE","\n    ",115],["T_PUBLIC","public",116],["T_WHITESPACE"," ",116],["T_FUNCTION","function",116],["T_WHITESPACE"," ",116],["T_STRING","getConfigurationItemOption",116],"(",")",["T_WHITESPACE","\n    ",116],"{",["T_WHITESPACE","\n        ",117],["T_IF","if",118],["T_WHITESPACE"," ",118],"(",["T_VARIABLE","$this",118],["T_OBJECT_OPERATOR","->",118],["T_STRING","_getData",118],"(",["T_CONSTANT_ENCAPSED_STRING","'configuration_item_option'",118],")",["T_WHITESPACE"," ",118],["T_INSTANCEOF","instanceof",118],["T_WHITESPACE"," ",118],["T_STRING","Mage_Catalog_Model_Product_Configuration_Item_Option_Interface",118],")",["T_WHITESPACE"," ",118],"{",["T_WHITESPACE","\n            ",118],["T_RETURN","return",119],["T_WHITESPACE"," ",119],["T_VARIABLE","$this",119],["T_OBJECT_OPERATOR","->",119],["T_STRING","_getData",119],"(",["T_CONSTANT_ENCAPSED_STRING","'configuration_item_option'",119],")",";",["T_WHITESPACE","\n        ",119],"}",["T_WHITESPACE","\n\n        ",120],["T_COMMENT","\/\/ Back compatibility with quote specific keys to set configuration item options\n",122],["T_WHITESPACE","        ",123],["T_IF","if",123],["T_WHITESPACE"," ",123],"(",["T_VARIABLE","$this",123],["T_OBJECT_OPERATOR","->",123],["T_STRING","_getData",123],"(",["T_CONSTANT_ENCAPSED_STRING","'quote_item_option'",123],")",["T_WHITESPACE"," ",123],["T_INSTANCEOF","instanceof",123],["T_WHITESPACE"," ",123],["T_STRING","Mage_Sales_Model_Quote_Item_Option",123],")",["T_WHITESPACE"," ",123],"{",["T_WHITESPACE","\n            ",123],["T_RETURN","return",124],["T_WHITESPACE"," ",124],["T_VARIABLE","$this",124],["T_OBJECT_OPERATOR","->",124],["T_STRING","_getData",124],"(",["T_CONSTANT_ENCAPSED_STRING","'quote_item_option'",124],")",";",["T_WHITESPACE","\n        ",124],"}",["T_WHITESPACE","\n\n        ",125],["T_STRING","Mage",127],["T_DOUBLE_COLON","::",127],["T_STRING","throwException",127],"(",["T_STRING","Mage",127],["T_DOUBLE_COLON","::",127],["T_STRING","helper",127],"(",["T_CONSTANT_ENCAPSED_STRING","'catalog'",127],")",["T_OBJECT_OPERATOR","->",127],["T_STRING","__",127],"(",["T_CONSTANT_ENCAPSED_STRING","'Wrong configuration item option instance in options group.'",127],")",")",";",["T_WHITESPACE","\n    ",127],"}",["T_WHITESPACE","\n\n    ",128],["T_DOC_COMMENT","\/**\n     * Getter for Quote Item Option\n     * Deprecated in favor of getConfigurationItemOption()\n     *\n     * @deprecated after 1.4.2.0\n     *\n     * @return Mage_Sales_Model_Quote_Item_Option\n     *\/",130],["T_WHITESPACE","\n    ",137],["T_PUBLIC","public",138],["T_WHITESPACE"," ",138],["T_FUNCTION","function",138],["T_WHITESPACE"," ",138],["T_STRING","getQuoteItemOption",138],"(",")",["T_WHITESPACE","\n    ",138],"{",["T_WHITESPACE","\n        ",139],["T_RETURN","return",140],["T_WHITESPACE"," ",140],["T_VARIABLE","$this",140],["T_OBJECT_OPERATOR","->",140],["T_STRING","getConfigurationItemOption",140],"(",")",";",["T_WHITESPACE","\n    ",140],"}",["T_WHITESPACE","\n\n    ",141],["T_DOC_COMMENT","\/**\n     * Getter for Configuration Item\n     *\n     * @return Mage_Catalog_Model_Product_Configuration_Item_Interface\n     *\/",143],["T_WHITESPACE","\n    ",147],["T_PUBLIC","public",148],["T_WHITESPACE"," ",148],["T_FUNCTION","function",148],["T_WHITESPACE"," ",148],["T_STRING","getConfigurationItem",148],"(",")",["T_WHITESPACE","\n    ",148],"{",["T_WHITESPACE","\n        ",149],["T_IF","if",150],["T_WHITESPACE"," ",150],"(",["T_VARIABLE","$this",150],["T_OBJECT_OPERATOR","->",150],["T_STRING","_getData",150],"(",["T_CONSTANT_ENCAPSED_STRING","'configuration_item'",150],")",["T_WHITESPACE"," ",150],["T_INSTANCEOF","instanceof",150],["T_WHITESPACE"," ",150],["T_STRING","Mage_Catalog_Model_Product_Configuration_Item_Interface",150],")",["T_WHITESPACE"," ",150],"{",["T_WHITESPACE","\n            ",150],["T_RETURN","return",151],["T_WHITESPACE"," ",151],["T_VARIABLE","$this",151],["T_OBJECT_OPERATOR","->",151],["T_STRING","_getData",151],"(",["T_CONSTANT_ENCAPSED_STRING","'configuration_item'",151],")",";",["T_WHITESPACE","\n        ",151],"}",["T_WHITESPACE","\n\n        ",152],["T_COMMENT","\/\/ Back compatibility with quote specific keys to set configuration item\n",154],["T_WHITESPACE","        ",155],["T_IF","if",155],["T_WHITESPACE"," ",155],"(",["T_VARIABLE","$this",155],["T_OBJECT_OPERATOR","->",155],["T_STRING","_getData",155],"(",["T_CONSTANT_ENCAPSED_STRING","'quote_item'",155],")",["T_WHITESPACE"," ",155],["T_INSTANCEOF","instanceof",155],["T_WHITESPACE"," ",155],["T_STRING","Mage_Sales_Model_Quote_Item",155],")",["T_WHITESPACE"," ",155],"{",["T_WHITESPACE","\n            ",155],["T_RETURN","return",156],["T_WHITESPACE"," ",156],["T_VARIABLE","$this",156],["T_OBJECT_OPERATOR","->",156],["T_STRING","_getData",156],"(",["T_CONSTANT_ENCAPSED_STRING","'quote_item'",156],")",";",["T_WHITESPACE","\n        ",156],"}",["T_WHITESPACE","\n\n        ",157],["T_STRING","Mage",159],["T_DOUBLE_COLON","::",159],["T_STRING","throwException",159],"(",["T_STRING","Mage",159],["T_DOUBLE_COLON","::",159],["T_STRING","helper",159],"(",["T_CONSTANT_ENCAPSED_STRING","'catalog'",159],")",["T_OBJECT_OPERATOR","->",159],["T_STRING","__",159],"(",["T_CONSTANT_ENCAPSED_STRING","'Wrong configuration item instance in options group.'",159],")",")",";",["T_WHITESPACE","\n    ",159],"}",["T_WHITESPACE","\n\n    ",160],["T_DOC_COMMENT","\/**\n     * Getter for Quote Item\n     * Deprecated in favor of getConfigurationItem()\n     *\n     * @deprecated after 1.4.2.0\n     * @return Mage_Sales_Model_Quote_Item\n     *\/",162],["T_WHITESPACE","\n    ",168],["T_PUBLIC","public",169],["T_WHITESPACE"," ",169],["T_FUNCTION","function",169],["T_WHITESPACE"," ",169],["T_STRING","getQuoteItem",169],"(",")",["T_WHITESPACE","\n    ",169],"{",["T_WHITESPACE","\n        ",170],["T_RETURN","return",171],["T_WHITESPACE"," ",171],["T_VARIABLE","$this",171],["T_OBJECT_OPERATOR","->",171],["T_STRING","getConfigurationItem",171],"(",")",";",["T_WHITESPACE","\n    ",171],"}",["T_WHITESPACE","\n\n    ",172],["T_DOC_COMMENT","\/**\n     * Getter for Buy Request\n     *\n     * @return Varien_Object\n     *\/",174],["T_WHITESPACE","\n    ",178],["T_PUBLIC","public",179],["T_WHITESPACE"," ",179],["T_FUNCTION","function",179],["T_WHITESPACE"," ",179],["T_STRING","getRequest",179],"(",")",["T_WHITESPACE","\n    ",179],"{",["T_WHITESPACE","\n        ",180],["T_IF","if",181],["T_WHITESPACE"," ",181],"(",["T_VARIABLE","$this",181],["T_OBJECT_OPERATOR","->",181],["T_STRING","_getData",181],"(",["T_CONSTANT_ENCAPSED_STRING","'request'",181],")",["T_WHITESPACE"," ",181],["T_INSTANCEOF","instanceof",181],["T_WHITESPACE"," ",181],["T_STRING","Varien_Object",181],")",["T_WHITESPACE"," ",181],"{",["T_WHITESPACE","\n            ",181],["T_RETURN","return",182],["T_WHITESPACE"," ",182],["T_VARIABLE","$this",182],["T_OBJECT_OPERATOR","->",182],["T_STRING","_getData",182],"(",["T_CONSTANT_ENCAPSED_STRING","'request'",182],")",";",["T_WHITESPACE","\n        ",182],"}",["T_WHITESPACE","\n        ",183],["T_STRING","Mage",184],["T_DOUBLE_COLON","::",184],["T_STRING","throwException",184],"(",["T_STRING","Mage",184],["T_DOUBLE_COLON","::",184],["T_STRING","helper",184],"(",["T_CONSTANT_ENCAPSED_STRING","'catalog'",184],")",["T_OBJECT_OPERATOR","->",184],["T_STRING","__",184],"(",["T_CONSTANT_ENCAPSED_STRING","'Wrong BuyRequest instance in options group.'",184],")",")",";",["T_WHITESPACE","\n    ",184],"}",["T_WHITESPACE","\n\n    ",185],["T_DOC_COMMENT","\/**\n     * Store Config value\n     *\n     * @param string $key Config value key\n     * @return string\n     *\/",187],["T_WHITESPACE","\n    ",192],["T_PUBLIC","public",193],["T_WHITESPACE"," ",193],["T_FUNCTION","function",193],["T_WHITESPACE"," ",193],["T_STRING","getConfigData",193],"(",["T_VARIABLE","$key",193],")",["T_WHITESPACE","\n    ",193],"{",["T_WHITESPACE","\n        ",194],["T_RETURN","return",195],["T_WHITESPACE"," ",195],["T_STRING","Mage",195],["T_DOUBLE_COLON","::",195],["T_STRING","getStoreConfig",195],"(",["T_CONSTANT_ENCAPSED_STRING","'catalog\/custom_options\/'",195],["T_WHITESPACE"," ",195],".",["T_WHITESPACE"," ",195],["T_VARIABLE","$key",195],")",";",["T_WHITESPACE","\n    ",195],"}",["T_WHITESPACE","\n\n    ",196],["T_DOC_COMMENT","\/**\n     * Validate user input for option\n     *\n     * @throws Mage_Core_Exception\n     * @param array $values All product option values, i.e. array (option_id => mixed, option_id => mixed...)\n     * @return Mage_Catalog_Model_Product_Option_Type_Default\n     *\/",198],["T_WHITESPACE","\n    ",204],["T_PUBLIC","public",205],["T_WHITESPACE"," ",205],["T_FUNCTION","function",205],["T_WHITESPACE"," ",205],["T_STRING","validateUserValue",205],"(",["T_VARIABLE","$values",205],")",["T_WHITESPACE","\n    ",205],"{",["T_WHITESPACE","\n        ",206],["T_STRING","Mage",207],["T_DOUBLE_COLON","::",207],["T_STRING","getSingleton",207],"(",["T_CONSTANT_ENCAPSED_STRING","'checkout\/session'",207],")",["T_OBJECT_OPERATOR","->",207],["T_STRING","setUseNotice",207],"(",["T_STRING","false",207],")",";",["T_WHITESPACE","\n\n        ",207],["T_VARIABLE","$this",209],["T_OBJECT_OPERATOR","->",209],["T_STRING","setIsValid",209],"(",["T_STRING","false",209],")",";",["T_WHITESPACE","\n\n        ",209],["T_VARIABLE","$option",211],["T_WHITESPACE"," ",211],"=",["T_WHITESPACE"," ",211],["T_VARIABLE","$this",211],["T_OBJECT_OPERATOR","->",211],["T_STRING","getOption",211],"(",")",";",["T_WHITESPACE","\n        ",211],["T_IF","if",212],["T_WHITESPACE"," ",212],"(","!",["T_ISSET","isset",212],"(",["T_VARIABLE","$values",212],"[",["T_VARIABLE","$option",212],["T_OBJECT_OPERATOR","->",212],["T_STRING","getId",212],"(",")","]",")",["T_WHITESPACE"," ",212],["T_BOOLEAN_AND","&&",212],["T_WHITESPACE"," ",212],["T_VARIABLE","$option",212],["T_OBJECT_OPERATOR","->",212],["T_STRING","getIsRequire",212],"(",")",["T_WHITESPACE"," ",212],["T_BOOLEAN_AND","&&",212],["T_WHITESPACE"," ",212],"!",["T_VARIABLE","$this",212],["T_OBJECT_OPERATOR","->",212],["T_STRING","getSkipCheckRequiredOption",212],"(",")",")",["T_WHITESPACE"," ",212],"{",["T_WHITESPACE","\n            ",212],["T_STRING","Mage",213],["T_DOUBLE_COLON","::",213],["T_STRING","throwException",213],"(",["T_STRING","Mage",213],["T_DOUBLE_COLON","::",213],["T_STRING","helper",213],"(",["T_CONSTANT_ENCAPSED_STRING","'catalog'",213],")",["T_OBJECT_OPERATOR","->",213],["T_STRING","__",213],"(",["T_CONSTANT_ENCAPSED_STRING","'Please specify the product required option(s).'",213],")",")",";",["T_WHITESPACE","\n        ",213],"}",["T_WHITESPACE"," ",214],["T_ELSEIF","elseif",214],["T_WHITESPACE"," ",214],"(",["T_ISSET","isset",214],"(",["T_VARIABLE","$values",214],"[",["T_VARIABLE","$option",214],["T_OBJECT_OPERATOR","->",214],["T_STRING","getId",214],"(",")","]",")",")",["T_WHITESPACE"," ",214],"{",["T_WHITESPACE","\n            ",214],["T_VARIABLE","$this",215],["T_OBJECT_OPERATOR","->",215],["T_STRING","setUserValue",215],"(",["T_VARIABLE","$values",215],"[",["T_VARIABLE","$option",215],["T_OBJECT_OPERATOR","->",215],["T_STRING","getId",215],"(",")","]",")",";",["T_WHITESPACE","\n            ",215],["T_VARIABLE","$this",216],["T_OBJECT_OPERATOR","->",216],["T_STRING","setIsValid",216],"(",["T_STRING","true",216],")",";",["T_WHITESPACE","\n        ",216],"}",["T_WHITESPACE","\n        ",217],["T_RETURN","return",218],["T_WHITESPACE"," ",218],["T_VARIABLE","$this",218],";",["T_WHITESPACE","\n    ",218],"}",["T_WHITESPACE","\n\n    ",219],["T_DOC_COMMENT","\/**\n     * Check skip required option validation\n     *\n     * @return bool\n     *\/",221],["T_WHITESPACE","\n    ",225],["T_PUBLIC","public",226],["T_WHITESPACE"," ",226],["T_FUNCTION","function",226],["T_WHITESPACE"," ",226],["T_STRING","getSkipCheckRequiredOption",226],"(",")",["T_WHITESPACE","\n    ",226],"{",["T_WHITESPACE","\n        ",227],["T_RETURN","return",228],["T_WHITESPACE"," ",228],["T_VARIABLE","$this",228],["T_OBJECT_OPERATOR","->",228],["T_STRING","getProduct",228],"(",")",["T_OBJECT_OPERATOR","->",228],["T_STRING","getSkipCheckRequiredOption",228],"(",")",["T_WHITESPACE"," ",228],["T_BOOLEAN_OR","||",228],["T_WHITESPACE","\n            ",228],["T_VARIABLE","$this",229],["T_OBJECT_OPERATOR","->",229],["T_STRING","getProcessMode",229],"(",")",["T_WHITESPACE"," ",229],["T_IS_EQUAL","==",229],["T_WHITESPACE"," ",229],["T_STRING","Mage_Catalog_Model_Product_Type_Abstract",229],["T_DOUBLE_COLON","::",229],["T_STRING","PROCESS_MODE_LITE",229],";",["T_WHITESPACE","\n    ",229],"}",["T_WHITESPACE","\n\n    ",230],["T_DOC_COMMENT","\/**\n     * Prepare option value for cart\n     *\n     * @throws Mage_Core_Exception\n     * @return mixed Prepared option value\n     *\/",232],["T_WHITESPACE","\n    ",237],["T_PUBLIC","public",238],["T_WHITESPACE"," ",238],["T_FUNCTION","function",238],["T_WHITESPACE"," ",238],["T_STRING","prepareForCart",238],"(",")",["T_WHITESPACE","\n    ",238],"{",["T_WHITESPACE","\n        ",239],["T_IF","if",240],["T_WHITESPACE"," ",240],"(",["T_VARIABLE","$this",240],["T_OBJECT_OPERATOR","->",240],["T_STRING","getIsValid",240],"(",")",")",["T_WHITESPACE"," ",240],"{",["T_WHITESPACE","\n            ",240],["T_RETURN","return",241],["T_WHITESPACE"," ",241],["T_VARIABLE","$this",241],["T_OBJECT_OPERATOR","->",241],["T_STRING","getUserValue",241],"(",")",";",["T_WHITESPACE","\n        ",241],"}",["T_WHITESPACE","\n        ",242],["T_STRING","Mage",243],["T_DOUBLE_COLON","::",243],["T_STRING","throwException",243],"(",["T_STRING","Mage",243],["T_DOUBLE_COLON","::",243],["T_STRING","helper",243],"(",["T_CONSTANT_ENCAPSED_STRING","'catalog'",243],")",["T_OBJECT_OPERATOR","->",243],["T_STRING","__",243],"(",["T_CONSTANT_ENCAPSED_STRING","'Option validation failed to add product to cart.'",243],")",")",";",["T_WHITESPACE","\n    ",243],"}",["T_WHITESPACE","\n\n    ",244],["T_DOC_COMMENT","\/**\n     * Flag to indicate that custom option has own customized output (blocks, native html etc.)\n     *\n     * @return boolean\n     *\/",246],["T_WHITESPACE","\n    ",250],["T_PUBLIC","public",251],["T_WHITESPACE"," ",251],["T_FUNCTION","function",251],["T_WHITESPACE"," ",251],["T_STRING","isCustomizedView",251],"(",")",["T_WHITESPACE","\n    ",251],"{",["T_WHITESPACE","\n        ",252],["T_RETURN","return",253],["T_WHITESPACE"," ",253],["T_STRING","false",253],";",["T_WHITESPACE","\n    ",253],"}",["T_WHITESPACE","\n\n    ",254],["T_DOC_COMMENT","\/**\n     * Return formatted option value for quote option\n     *\n     * @param string $optionValue Prepared for cart option value\n     * @return string\n     *\/",256],["T_WHITESPACE","\n    ",261],["T_PUBLIC","public",262],["T_WHITESPACE"," ",262],["T_FUNCTION","function",262],["T_WHITESPACE"," ",262],["T_STRING","getFormattedOptionValue",262],"(",["T_VARIABLE","$optionValue",262],")",["T_WHITESPACE","\n    ",262],"{",["T_WHITESPACE","\n        ",263],["T_RETURN","return",264],["T_WHITESPACE"," ",264],["T_VARIABLE","$optionValue",264],";",["T_WHITESPACE","\n    ",264],"}",["T_WHITESPACE","\n\n    ",265],["T_DOC_COMMENT","\/**\n     * Return option html\n     *\n     * @param array $optionInfo\n     * @return string\n     *\/",267],["T_WHITESPACE","\n    ",272],["T_PUBLIC","public",273],["T_WHITESPACE"," ",273],["T_FUNCTION","function",273],["T_WHITESPACE"," ",273],["T_STRING","getCustomizedView",273],"(",["T_VARIABLE","$optionInfo",273],")",["T_WHITESPACE","\n    ",273],"{",["T_WHITESPACE","\n        ",274],["T_RETURN","return",275],["T_WHITESPACE"," ",275],["T_ISSET","isset",275],"(",["T_VARIABLE","$optionInfo",275],"[",["T_CONSTANT_ENCAPSED_STRING","'value'",275],"]",")",["T_WHITESPACE"," ",275],"?",["T_WHITESPACE"," ",275],["T_VARIABLE","$optionInfo",275],"[",["T_CONSTANT_ENCAPSED_STRING","'value'",275],"]",["T_WHITESPACE"," ",275],":",["T_WHITESPACE"," ",275],["T_VARIABLE","$optionInfo",275],";",["T_WHITESPACE","\n    ",275],"}",["T_WHITESPACE","\n\n    ",276],["T_DOC_COMMENT","\/**\n     * Return printable option value\n     *\n     * @param string $optionValue Prepared for cart option value\n     * @return string\n     *\/",278],["T_WHITESPACE","\n    ",283],["T_PUBLIC","public",284],["T_WHITESPACE"," ",284],["T_FUNCTION","function",284],["T_WHITESPACE"," ",284],["T_STRING","getPrintableOptionValue",284],"(",["T_VARIABLE","$optionValue",284],")",["T_WHITESPACE","\n    ",284],"{",["T_WHITESPACE","\n        ",285],["T_RETURN","return",286],["T_WHITESPACE"," ",286],["T_VARIABLE","$optionValue",286],";",["T_WHITESPACE","\n    ",286],"}",["T_WHITESPACE","\n\n    ",287],["T_DOC_COMMENT","\/**\n     * Return formatted option value ready to edit, ready to parse\n     * (ex: Admin re-order, see Mage_Adminhtml_Model_Sales_Order_Create)\n     *\n     * @param string $optionValue Prepared for cart option value\n     * @return string\n     *\/",289],["T_WHITESPACE","\n    ",295],["T_PUBLIC","public",296],["T_WHITESPACE"," ",296],["T_FUNCTION","function",296],["T_WHITESPACE"," ",296],["T_STRING","getEditableOptionValue",296],"(",["T_VARIABLE","$optionValue",296],")",["T_WHITESPACE","\n    ",296],"{",["T_WHITESPACE","\n        ",297],["T_RETURN","return",298],["T_WHITESPACE"," ",298],["T_VARIABLE","$optionValue",298],";",["T_WHITESPACE","\n    ",298],"}",["T_WHITESPACE","\n\n    ",299],["T_DOC_COMMENT","\/**\n     * Parse user input value and return cart prepared value, i.e. \"one, two\" => \"1,2\"\n     *\n     * @param string $optionValue\n     * @param array $productOptionValues Values for product option\n     * @return string|null\n     *\/",301],["T_WHITESPACE","\n    ",307],["T_PUBLIC","public",308],["T_WHITESPACE"," ",308],["T_FUNCTION","function",308],["T_WHITESPACE"," ",308],["T_STRING","parseOptionValue",308],"(",["T_VARIABLE","$optionValue",308],",",["T_WHITESPACE"," ",308],["T_VARIABLE","$productOptionValues",308],")",["T_WHITESPACE","\n    ",308],"{",["T_WHITESPACE","\n        ",309],["T_RETURN","return",310],["T_WHITESPACE"," ",310],["T_VARIABLE","$optionValue",310],";",["T_WHITESPACE","\n    ",310],"}",["T_WHITESPACE","\n\n    ",311],["T_DOC_COMMENT","\/**\n     * Prepare option value for info buy request\n     *\n     * @param string $optionValue\n     * @return mixed\n     *\/",313],["T_WHITESPACE","\n    ",318],["T_PUBLIC","public",319],["T_WHITESPACE"," ",319],["T_FUNCTION","function",319],["T_WHITESPACE"," ",319],["T_STRING","prepareOptionValueForRequest",319],"(",["T_VARIABLE","$optionValue",319],")",["T_WHITESPACE","\n    ",319],"{",["T_WHITESPACE","\n        ",320],["T_RETURN","return",321],["T_WHITESPACE"," ",321],["T_VARIABLE","$optionValue",321],";",["T_WHITESPACE","\n    ",321],"}",["T_WHITESPACE","\n\n    ",322],["T_DOC_COMMENT","\/**\n     * Return Price for selected option\n     *\n     * @param string $optionValue Prepared for cart option value\n     * @param float $basePrice For percent price type\n     * @return float\n     *\/",324],["T_WHITESPACE","\n    ",330],["T_PUBLIC","public",331],["T_WHITESPACE"," ",331],["T_FUNCTION","function",331],["T_WHITESPACE"," ",331],["T_STRING","getOptionPrice",331],"(",["T_VARIABLE","$optionValue",331],",",["T_WHITESPACE"," ",331],["T_VARIABLE","$basePrice",331],")",["T_WHITESPACE","\n    ",331],"{",["T_WHITESPACE","\n        ",332],["T_VARIABLE","$option",333],["T_WHITESPACE"," ",333],"=",["T_WHITESPACE"," ",333],["T_VARIABLE","$this",333],["T_OBJECT_OPERATOR","->",333],["T_STRING","getOption",333],"(",")",";",["T_WHITESPACE","\n\n        ",333],["T_RETURN","return",335],["T_WHITESPACE"," ",335],["T_VARIABLE","$this",335],["T_OBJECT_OPERATOR","->",335],["T_STRING","_getChargableOptionPrice",335],"(",["T_WHITESPACE","\n            ",335],["T_VARIABLE","$option",336],["T_OBJECT_OPERATOR","->",336],["T_STRING","getPrice",336],"(",")",",",["T_WHITESPACE","\n            ",336],["T_VARIABLE","$option",337],["T_OBJECT_OPERATOR","->",337],["T_STRING","getPriceType",337],"(",")",["T_WHITESPACE"," ",337],["T_IS_EQUAL","==",337],["T_WHITESPACE"," ",337],["T_CONSTANT_ENCAPSED_STRING","'percent'",337],",",["T_WHITESPACE","\n            ",337],["T_VARIABLE","$basePrice",338],["T_WHITESPACE","\n        ",338],")",";",["T_WHITESPACE","\n    ",339],"}",["T_WHITESPACE","\n\n    ",340],["T_DOC_COMMENT","\/**\n     * Return SKU for selected option\n     *\n     * @param string $optionValue Prepared for cart option value\n     * @param string $skuDelimiter Delimiter for Sku parts\n     * @return string\n     *\/",342],["T_WHITESPACE","\n    ",348],["T_PUBLIC","public",349],["T_WHITESPACE"," ",349],["T_FUNCTION","function",349],["T_WHITESPACE"," ",349],["T_STRING","getOptionSku",349],"(",["T_VARIABLE","$optionValue",349],",",["T_WHITESPACE"," ",349],["T_VARIABLE","$skuDelimiter",349],")",["T_WHITESPACE","\n    ",349],"{",["T_WHITESPACE","\n        ",350],["T_RETURN","return",351],["T_WHITESPACE"," ",351],["T_VARIABLE","$this",351],["T_OBJECT_OPERATOR","->",351],["T_STRING","getOption",351],"(",")",["T_OBJECT_OPERATOR","->",351],["T_STRING","getSku",351],"(",")",";",["T_WHITESPACE","\n    ",351],"}",["T_WHITESPACE","\n\n    ",352],["T_DOC_COMMENT","\/**\n     * Return value => key all product options (using for parsing)\n     *\n     * @return array Array of Product custom options, reversing option values and option ids\n     *\/",354],["T_WHITESPACE","\n    ",358],["T_PUBLIC","public",359],["T_WHITESPACE"," ",359],["T_FUNCTION","function",359],["T_WHITESPACE"," ",359],["T_STRING","getProductOptions",359],"(",")",["T_WHITESPACE","\n    ",359],"{",["T_WHITESPACE","\n        ",360],["T_IF","if",361],["T_WHITESPACE"," ",361],"(","!",["T_ISSET","isset",361],"(",["T_VARIABLE","$this",361],["T_OBJECT_OPERATOR","->",361],["T_STRING","_productOptions",361],"[",["T_VARIABLE","$this",361],["T_OBJECT_OPERATOR","->",361],["T_STRING","getProduct",361],"(",")",["T_OBJECT_OPERATOR","->",361],["T_STRING","getId",361],"(",")","]",")",")",["T_WHITESPACE"," ",361],"{",["T_WHITESPACE","\n            ",361],["T_FOREACH","foreach",362],["T_WHITESPACE"," ",362],"(",["T_VARIABLE","$this",362],["T_OBJECT_OPERATOR","->",362],["T_STRING","getProduct",362],"(",")",["T_OBJECT_OPERATOR","->",362],["T_STRING","getOptions",362],"(",")",["T_WHITESPACE"," ",362],["T_AS","as",362],["T_WHITESPACE"," ",362],["T_VARIABLE","$_option",362],")",["T_WHITESPACE"," ",362],"{",["T_WHITESPACE","\n                ",362],["T_COMMENT","\/* @var $option Mage_Catalog_Model_Product_Option *\/",363],["T_WHITESPACE","\n                ",363],["T_VARIABLE","$this",364],["T_OBJECT_OPERATOR","->",364],["T_STRING","_productOptions",364],"[",["T_VARIABLE","$this",364],["T_OBJECT_OPERATOR","->",364],["T_STRING","getProduct",364],"(",")",["T_OBJECT_OPERATOR","->",364],["T_STRING","getId",364],"(",")","]","[",["T_VARIABLE","$_option",364],["T_OBJECT_OPERATOR","->",364],["T_STRING","getTitle",364],"(",")","]",["T_WHITESPACE"," ",364],"=",["T_WHITESPACE"," ",364],["T_ARRAY","array",364],"(",["T_CONSTANT_ENCAPSED_STRING","'option_id'",364],["T_WHITESPACE"," ",364],["T_DOUBLE_ARROW","=>",364],["T_WHITESPACE"," ",364],["T_VARIABLE","$_option",364],["T_OBJECT_OPERATOR","->",364],["T_STRING","getId",364],"(",")",")",";",["T_WHITESPACE","\n                ",364],["T_IF","if",365],["T_WHITESPACE"," ",365],"(",["T_VARIABLE","$_option",365],["T_OBJECT_OPERATOR","->",365],["T_STRING","getGroupByType",365],"(",")",["T_WHITESPACE"," ",365],["T_IS_EQUAL","==",365],["T_WHITESPACE"," ",365],["T_STRING","Mage_Catalog_Model_Product_Option",365],["T_DOUBLE_COLON","::",365],["T_STRING","OPTION_GROUP_SELECT",365],")",["T_WHITESPACE"," ",365],"{",["T_WHITESPACE","\n                    ",365],["T_VARIABLE","$optionValues",366],["T_WHITESPACE"," ",366],"=",["T_WHITESPACE"," ",366],["T_ARRAY","array",366],"(",")",";",["T_WHITESPACE","\n                    ",366],["T_FOREACH","foreach",367],["T_WHITESPACE"," ",367],"(",["T_VARIABLE","$_option",367],["T_OBJECT_OPERATOR","->",367],["T_STRING","getValues",367],"(",")",["T_WHITESPACE"," ",367],["T_AS","as",367],["T_WHITESPACE"," ",367],["T_VARIABLE","$_value",367],")",["T_WHITESPACE"," ",367],"{",["T_WHITESPACE","\n                        ",367],["T_COMMENT","\/* @var $value Mage_Catalog_Model_Product_Option_Value *\/",368],["T_WHITESPACE","\n                        ",368],["T_VARIABLE","$optionValues",369],"[",["T_VARIABLE","$_value",369],["T_OBJECT_OPERATOR","->",369],["T_STRING","getTitle",369],"(",")","]",["T_WHITESPACE"," ",369],"=",["T_WHITESPACE"," ",369],["T_VARIABLE","$_value",369],["T_OBJECT_OPERATOR","->",369],["T_STRING","getId",369],"(",")",";",["T_WHITESPACE","\n                    ",369],"}",["T_WHITESPACE","\n                    ",370],["T_VARIABLE","$this",371],["T_OBJECT_OPERATOR","->",371],["T_STRING","_productOptions",371],"[",["T_VARIABLE","$this",371],["T_OBJECT_OPERATOR","->",371],["T_STRING","getProduct",371],"(",")",["T_OBJECT_OPERATOR","->",371],["T_STRING","getId",371],"(",")","]","[",["T_VARIABLE","$_option",371],["T_OBJECT_OPERATOR","->",371],["T_STRING","getTitle",371],"(",")","]","[",["T_CONSTANT_ENCAPSED_STRING","'values'",371],"]",["T_WHITESPACE"," ",371],"=",["T_WHITESPACE"," ",371],["T_VARIABLE","$optionValues",371],";",["T_WHITESPACE","\n                ",371],"}",["T_WHITESPACE"," ",372],["T_ELSE","else",372],["T_WHITESPACE"," ",372],"{",["T_WHITESPACE","\n                    ",372],["T_VARIABLE","$this",373],["T_OBJECT_OPERATOR","->",373],["T_STRING","_productOptions",373],"[",["T_VARIABLE","$this",373],["T_OBJECT_OPERATOR","->",373],["T_STRING","getProduct",373],"(",")",["T_OBJECT_OPERATOR","->",373],["T_STRING","getId",373],"(",")","]","[",["T_VARIABLE","$_option",373],["T_OBJECT_OPERATOR","->",373],["T_STRING","getTitle",373],"(",")","]","[",["T_CONSTANT_ENCAPSED_STRING","'values'",373],"]",["T_WHITESPACE"," ",373],"=",["T_WHITESPACE"," ",373],["T_ARRAY","array",373],"(",")",";",["T_WHITESPACE","\n                ",373],"}",["T_WHITESPACE","\n            ",374],"}",["T_WHITESPACE","\n        ",375],"}",["T_WHITESPACE","\n        ",376],["T_IF","if",377],["T_WHITESPACE"," ",377],"(",["T_ISSET","isset",377],"(",["T_VARIABLE","$this",377],["T_OBJECT_OPERATOR","->",377],["T_STRING","_productOptions",377],"[",["T_VARIABLE","$this",377],["T_OBJECT_OPERATOR","->",377],["T_STRING","getProduct",377],"(",")",["T_OBJECT_OPERATOR","->",377],["T_STRING","getId",377],"(",")","]",")",")",["T_WHITESPACE"," ",377],"{",["T_WHITESPACE","\n            ",377],["T_RETURN","return",378],["T_WHITESPACE"," ",378],["T_VARIABLE","$this",378],["T_OBJECT_OPERATOR","->",378],["T_STRING","_productOptions",378],"[",["T_VARIABLE","$this",378],["T_OBJECT_OPERATOR","->",378],["T_STRING","getProduct",378],"(",")",["T_OBJECT_OPERATOR","->",378],["T_STRING","getId",378],"(",")","]",";",["T_WHITESPACE","\n        ",378],"}",["T_WHITESPACE","\n        ",379],["T_RETURN","return",380],["T_WHITESPACE"," ",380],["T_ARRAY","array",380],"(",")",";",["T_WHITESPACE","\n    ",380],"}",["T_WHITESPACE","\n\n    ",381],["T_DOC_COMMENT","\/**\n     * Return final chargable price for option\n     *\n     * @param float $price Price of option\n     * @param boolean $isPercent Price type - percent or fixed\n     * @param float $basePrice For percent price type\n     * @return float\n     *\/",383],["T_WHITESPACE","\n    ",390],["T_PROTECTED","protected",391],["T_WHITESPACE"," ",391],["T_FUNCTION","function",391],["T_WHITESPACE"," ",391],["T_STRING","_getChargableOptionPrice",391],"(",["T_VARIABLE","$price",391],",",["T_WHITESPACE"," ",391],["T_VARIABLE","$isPercent",391],",",["T_WHITESPACE"," ",391],["T_VARIABLE","$basePrice",391],")",["T_WHITESPACE","\n    ",391],"{",["T_WHITESPACE","\n        ",392],["T_IF","if",393],"(",["T_VARIABLE","$isPercent",393],")",["T_WHITESPACE"," ",393],"{",["T_WHITESPACE","\n            ",393],["T_RETURN","return",394],["T_WHITESPACE"," ",394],"(",["T_VARIABLE","$basePrice",394],["T_WHITESPACE"," ",394],"*",["T_WHITESPACE"," ",394],["T_VARIABLE","$price",394],["T_WHITESPACE"," ",394],"\/",["T_WHITESPACE"," ",394],["T_LNUMBER","100",394],")",";",["T_WHITESPACE","\n        ",394],"}",["T_WHITESPACE"," ",395],["T_ELSE","else",395],["T_WHITESPACE"," ",395],"{",["T_WHITESPACE","\n            ",395],["T_RETURN","return",396],["T_WHITESPACE"," ",396],["T_VARIABLE","$price",396],";",["T_WHITESPACE","\n        ",396],"}",["T_WHITESPACE","\n    ",397],"}",["T_WHITESPACE","\n\n",398],"}",["T_WHITESPACE","\n",400]]
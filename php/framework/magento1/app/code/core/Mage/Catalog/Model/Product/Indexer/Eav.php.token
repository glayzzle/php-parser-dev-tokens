[["T_OPEN_TAG","<?php\n",1],["T_DOC_COMMENT","\/**\n * Magento\n *\n * NOTICE OF LICENSE\n *\n * This source file is subject to the Open Software License (OSL 3.0)\n * that is bundled with this package in the file LICENSE.txt.\n * It is also available through the world-wide-web at this URL:\n * http:\/\/opensource.org\/licenses\/osl-3.0.php\n * If you did not receive a copy of the license and are unable to\n * obtain it through the world-wide-web, please send an email\n * to license@magento.com so we can send you a copy immediately.\n *\n * DISCLAIMER\n *\n * Do not edit or add to this file if you wish to upgrade Magento to newer\n * versions in the future. If you wish to customize Magento for your\n * needs please refer to http:\/\/www.magento.com for more information.\n *\n * @category    Mage\n * @package     Mage_Catalog\n * @copyright  Copyright (c) 2006-2016 X.commerce, Inc. and affiliates (http:\/\/www.magento.com)\n * @license    http:\/\/opensource.org\/licenses\/osl-3.0.php  Open Software License (OSL 3.0)\n *\/",2],["T_WHITESPACE","\n\n\n",25],["T_DOC_COMMENT","\/**\n * Catalog Product Eav Indexer Model\n *\n * @method Mage_Catalog_Model_Resource_Product_Indexer_Eav _getResource()\n * @method Mage_Catalog_Model_Resource_Product_Indexer_Eav getResource()\n * @method Mage_Catalog_Model_Product_Indexer_Eav setEntityId(int $value)\n * @method int getAttributeId()\n * @method Mage_Catalog_Model_Product_Indexer_Eav setAttributeId(int $value)\n * @method int getStoreId()\n * @method Mage_Catalog_Model_Product_Indexer_Eav setStoreId(int $value)\n * @method int getValue()\n * @method Mage_Catalog_Model_Product_Indexer_Eav setValue(int $value)\n *\n * @category    Mage\n * @package     Mage_Catalog\n * @author      Magento Core Team <core@magentocommerce.com>\n *\/",28],["T_WHITESPACE","\n",44],["T_CLASS","class",45],["T_WHITESPACE"," ",45],["T_STRING","Mage_Catalog_Model_Product_Indexer_Eav",45],["T_WHITESPACE"," ",45],["T_EXTENDS","extends",45],["T_WHITESPACE"," ",45],["T_STRING","Mage_Index_Model_Indexer_Abstract",45],["T_WHITESPACE","\n",45],"{",["T_WHITESPACE","\n    ",46],["T_DOC_COMMENT","\/**\n     * @var array\n     *\/",47],["T_WHITESPACE","\n    ",49],["T_PROTECTED","protected",50],["T_WHITESPACE"," ",50],["T_VARIABLE","$_matchedEntities",50],["T_WHITESPACE"," ",50],"=",["T_WHITESPACE"," ",50],["T_ARRAY","array",50],"(",["T_WHITESPACE","\n        ",50],["T_STRING","Mage_Catalog_Model_Product",51],["T_DOUBLE_COLON","::",51],["T_STRING","ENTITY",51],["T_WHITESPACE"," ",51],["T_DOUBLE_ARROW","=>",51],["T_WHITESPACE"," ",51],["T_ARRAY","array",51],"(",["T_WHITESPACE","\n            ",51],["T_STRING","Mage_Index_Model_Event",52],["T_DOUBLE_COLON","::",52],["T_STRING","TYPE_SAVE",52],",",["T_WHITESPACE","\n            ",52],["T_STRING","Mage_Index_Model_Event",53],["T_DOUBLE_COLON","::",53],["T_STRING","TYPE_DELETE",53],",",["T_WHITESPACE","\n            ",53],["T_STRING","Mage_Index_Model_Event",54],["T_DOUBLE_COLON","::",54],["T_STRING","TYPE_MASS_ACTION",54],",",["T_WHITESPACE","\n        ",54],")",",",["T_WHITESPACE","\n        ",55],["T_STRING","Mage_Catalog_Model_Resource_Eav_Attribute",56],["T_DOUBLE_COLON","::",56],["T_STRING","ENTITY",56],["T_WHITESPACE"," ",56],["T_DOUBLE_ARROW","=>",56],["T_WHITESPACE"," ",56],["T_ARRAY","array",56],"(",["T_WHITESPACE","\n            ",56],["T_STRING","Mage_Index_Model_Event",57],["T_DOUBLE_COLON","::",57],["T_STRING","TYPE_SAVE",57],",",["T_WHITESPACE","\n        ",57],")",",",["T_WHITESPACE","\n        ",58],["T_STRING","Mage_Catalog_Model_Convert_Adapter_Product",59],["T_DOUBLE_COLON","::",59],["T_STRING","ENTITY",59],["T_WHITESPACE"," ",59],["T_DOUBLE_ARROW","=>",59],["T_WHITESPACE"," ",59],["T_ARRAY","array",59],"(",["T_WHITESPACE","\n            ",59],["T_STRING","Mage_Index_Model_Event",60],["T_DOUBLE_COLON","::",60],["T_STRING","TYPE_SAVE",60],["T_WHITESPACE","\n        ",60],")",["T_WHITESPACE","\n    ",61],")",";",["T_WHITESPACE","\n\n    ",62],["T_DOC_COMMENT","\/**\n     * The list of attributes that have an effect on other attributes\n     *\n     * @var array\n     *\/",64],["T_WHITESPACE","\n    ",68],["T_PROTECTED","protected",69],["T_WHITESPACE"," ",69],["T_VARIABLE","$_dependentAttributes",69],["T_WHITESPACE"," ",69],"=",["T_WHITESPACE"," ",69],["T_ARRAY","array",69],"(",["T_WHITESPACE","\n        ",69],["T_CONSTANT_ENCAPSED_STRING","'status'",70],["T_WHITESPACE","\n    ",70],")",";",["T_WHITESPACE","\n\n    ",71],["T_DOC_COMMENT","\/**\n     * Retrieve Indexer name\n     *\n     * @return string\n     *\/",73],["T_WHITESPACE","\n    ",77],["T_PUBLIC","public",78],["T_WHITESPACE"," ",78],["T_FUNCTION","function",78],["T_WHITESPACE"," ",78],["T_STRING","getName",78],"(",")",["T_WHITESPACE","\n    ",78],"{",["T_WHITESPACE","\n        ",79],["T_RETURN","return",80],["T_WHITESPACE"," ",80],["T_STRING","Mage",80],["T_DOUBLE_COLON","::",80],["T_STRING","helper",80],"(",["T_CONSTANT_ENCAPSED_STRING","'catalog'",80],")",["T_OBJECT_OPERATOR","->",80],["T_STRING","__",80],"(",["T_CONSTANT_ENCAPSED_STRING","'Product Attributes'",80],")",";",["T_WHITESPACE","\n    ",80],"}",["T_WHITESPACE","\n\n    ",81],["T_DOC_COMMENT","\/**\n     * Retrieve Indexer description\n     *\n     * @return string\n     *\/",83],["T_WHITESPACE","\n    ",87],["T_PUBLIC","public",88],["T_WHITESPACE"," ",88],["T_FUNCTION","function",88],["T_WHITESPACE"," ",88],["T_STRING","getDescription",88],"(",")",["T_WHITESPACE","\n    ",88],"{",["T_WHITESPACE","\n        ",89],["T_RETURN","return",90],["T_WHITESPACE"," ",90],["T_STRING","Mage",90],["T_DOUBLE_COLON","::",90],["T_STRING","helper",90],"(",["T_CONSTANT_ENCAPSED_STRING","'catalog'",90],")",["T_OBJECT_OPERATOR","->",90],["T_STRING","__",90],"(",["T_CONSTANT_ENCAPSED_STRING","'Index product attributes for layered navigation building'",90],")",";",["T_WHITESPACE","\n    ",90],"}",["T_WHITESPACE","\n\n    ",91],["T_DOC_COMMENT","\/**\n     * Initialize resource model\n     *\n     *\/",93],["T_WHITESPACE","\n    ",96],["T_PROTECTED","protected",97],["T_WHITESPACE"," ",97],["T_FUNCTION","function",97],["T_WHITESPACE"," ",97],["T_STRING","_construct",97],"(",")",["T_WHITESPACE","\n    ",97],"{",["T_WHITESPACE","\n        ",98],["T_VARIABLE","$this",99],["T_OBJECT_OPERATOR","->",99],["T_STRING","_init",99],"(",["T_CONSTANT_ENCAPSED_STRING","'catalog\/product_indexer_eav'",99],")",";",["T_WHITESPACE","\n    ",99],"}",["T_WHITESPACE","\n\n    ",100],["T_DOC_COMMENT","\/**\n     * Register data required by process in event object\n     *\n     * @param Mage_Index_Model_Event $event\n     *\/",102],["T_WHITESPACE","\n    ",106],["T_PROTECTED","protected",107],["T_WHITESPACE"," ",107],["T_FUNCTION","function",107],["T_WHITESPACE"," ",107],["T_STRING","_registerEvent",107],"(",["T_STRING","Mage_Index_Model_Event",107],["T_WHITESPACE"," ",107],["T_VARIABLE","$event",107],")",["T_WHITESPACE","\n    ",107],"{",["T_WHITESPACE","\n        ",108],["T_VARIABLE","$entity",109],["T_WHITESPACE"," ",109],"=",["T_WHITESPACE"," ",109],["T_VARIABLE","$event",109],["T_OBJECT_OPERATOR","->",109],["T_STRING","getEntity",109],"(",")",";",["T_WHITESPACE","\n\n        ",109],["T_IF","if",111],["T_WHITESPACE"," ",111],"(",["T_VARIABLE","$entity",111],["T_WHITESPACE"," ",111],["T_IS_EQUAL","==",111],["T_WHITESPACE"," ",111],["T_STRING","Mage_Catalog_Model_Product",111],["T_DOUBLE_COLON","::",111],["T_STRING","ENTITY",111],")",["T_WHITESPACE"," ",111],"{",["T_WHITESPACE","\n            ",111],["T_SWITCH","switch",112],["T_WHITESPACE"," ",112],"(",["T_VARIABLE","$event",112],["T_OBJECT_OPERATOR","->",112],["T_STRING","getType",112],"(",")",")",["T_WHITESPACE"," ",112],"{",["T_WHITESPACE","\n                ",112],["T_CASE","case",113],["T_WHITESPACE"," ",113],["T_STRING","Mage_Index_Model_Event",113],["T_DOUBLE_COLON","::",113],["T_STRING","TYPE_DELETE",113],":",["T_WHITESPACE","\n                    ",113],["T_VARIABLE","$this",114],["T_OBJECT_OPERATOR","->",114],["T_STRING","_registerCatalogProductDeleteEvent",114],"(",["T_VARIABLE","$event",114],")",";",["T_WHITESPACE","\n                    ",114],["T_BREAK","break",115],";",["T_WHITESPACE","\n\n                ",115],["T_CASE","case",117],["T_WHITESPACE"," ",117],["T_STRING","Mage_Index_Model_Event",117],["T_DOUBLE_COLON","::",117],["T_STRING","TYPE_SAVE",117],":",["T_WHITESPACE","\n                    ",117],["T_VARIABLE","$this",118],["T_OBJECT_OPERATOR","->",118],["T_STRING","_registerCatalogProductSaveEvent",118],"(",["T_VARIABLE","$event",118],")",";",["T_WHITESPACE","\n                    ",118],["T_BREAK","break",119],";",["T_WHITESPACE","\n\n                ",119],["T_CASE","case",121],["T_WHITESPACE"," ",121],["T_STRING","Mage_Index_Model_Event",121],["T_DOUBLE_COLON","::",121],["T_STRING","TYPE_MASS_ACTION",121],":",["T_WHITESPACE","\n                    ",121],["T_VARIABLE","$this",122],["T_OBJECT_OPERATOR","->",122],["T_STRING","_registerCatalogProductMassActionEvent",122],"(",["T_VARIABLE","$event",122],")",";",["T_WHITESPACE","\n                    ",122],["T_BREAK","break",123],";",["T_WHITESPACE","\n            ",123],"}",["T_WHITESPACE","\n        ",124],"}",["T_WHITESPACE"," ",125],["T_ELSE","else",125],["T_WHITESPACE"," ",125],["T_IF","if",125],["T_WHITESPACE"," ",125],"(",["T_VARIABLE","$entity",125],["T_WHITESPACE"," ",125],["T_IS_EQUAL","==",125],["T_WHITESPACE"," ",125],["T_STRING","Mage_Catalog_Model_Resource_Eav_Attribute",125],["T_DOUBLE_COLON","::",125],["T_STRING","ENTITY",125],")",["T_WHITESPACE"," ",125],"{",["T_WHITESPACE","\n            ",125],["T_SWITCH","switch",126],["T_WHITESPACE"," ",126],"(",["T_VARIABLE","$event",126],["T_OBJECT_OPERATOR","->",126],["T_STRING","getType",126],"(",")",")",["T_WHITESPACE"," ",126],"{",["T_WHITESPACE","\n                ",126],["T_CASE","case",127],["T_WHITESPACE"," ",127],["T_STRING","Mage_Index_Model_Event",127],["T_DOUBLE_COLON","::",127],["T_STRING","TYPE_SAVE",127],":",["T_WHITESPACE","\n                    ",127],["T_VARIABLE","$this",128],["T_OBJECT_OPERATOR","->",128],["T_STRING","_registerCatalogAttributeSaveEvent",128],"(",["T_VARIABLE","$event",128],")",";",["T_WHITESPACE","\n                    ",128],["T_BREAK","break",129],";",["T_WHITESPACE","\n            ",129],"}",["T_WHITESPACE","\n        ",130],"}",["T_WHITESPACE"," ",131],["T_ELSE","else",131],["T_WHITESPACE"," ",131],["T_IF","if",131],["T_WHITESPACE"," ",131],"(",["T_VARIABLE","$entity",131],["T_WHITESPACE"," ",131],["T_IS_EQUAL","==",131],["T_WHITESPACE"," ",131],["T_STRING","Mage_Catalog_Model_Convert_Adapter_Product",131],["T_DOUBLE_COLON","::",131],["T_STRING","ENTITY",131],")",["T_WHITESPACE"," ",131],"{",["T_WHITESPACE","\n            ",131],["T_VARIABLE","$event",132],["T_OBJECT_OPERATOR","->",132],["T_STRING","addNewData",132],"(",["T_CONSTANT_ENCAPSED_STRING","'catalog_product_eav_reindex_all'",132],",",["T_WHITESPACE"," ",132],["T_STRING","true",132],")",";",["T_WHITESPACE","\n        ",132],"}",["T_WHITESPACE","\n    ",133],"}",["T_WHITESPACE","\n\n    ",134],["T_DOC_COMMENT","\/**\n     * Check is attribute indexable in EAV\n     *\n     * @param Mage_Catalog_Model_Resource_Eav_Attribute|string $attribute\n     * @return bool\n     *\/",136],["T_WHITESPACE","\n    ",141],["T_PROTECTED","protected",142],["T_WHITESPACE"," ",142],["T_FUNCTION","function",142],["T_WHITESPACE"," ",142],["T_STRING","_attributeIsIndexable",142],"(",["T_VARIABLE","$attribute",142],")",["T_WHITESPACE","\n    ",142],"{",["T_WHITESPACE","\n        ",143],["T_IF","if",144],["T_WHITESPACE"," ",144],"(","!",["T_VARIABLE","$attribute",144],["T_WHITESPACE"," ",144],["T_INSTANCEOF","instanceof",144],["T_WHITESPACE"," ",144],["T_STRING","Mage_Catalog_Model_Resource_Eav_Attribute",144],")",["T_WHITESPACE"," ",144],"{",["T_WHITESPACE","\n            ",144],["T_VARIABLE","$attribute",145],["T_WHITESPACE"," ",145],"=",["T_WHITESPACE"," ",145],["T_STRING","Mage",145],["T_DOUBLE_COLON","::",145],["T_STRING","getSingleton",145],"(",["T_CONSTANT_ENCAPSED_STRING","'eav\/config'",145],")",["T_WHITESPACE","\n                ",145],["T_OBJECT_OPERATOR","->",146],["T_STRING","getAttribute",146],"(",["T_STRING","Mage_Catalog_Model_Product",146],["T_DOUBLE_COLON","::",146],["T_STRING","ENTITY",146],",",["T_WHITESPACE"," ",146],["T_VARIABLE","$attribute",146],")",";",["T_WHITESPACE","\n        ",146],"}",["T_WHITESPACE","\n\n        ",147],["T_RETURN","return",149],["T_WHITESPACE"," ",149],["T_VARIABLE","$attribute",149],["T_OBJECT_OPERATOR","->",149],["T_STRING","isIndexable",149],"(",")",";",["T_WHITESPACE","\n    ",149],"}",["T_WHITESPACE","\n\n    ",150],["T_DOC_COMMENT","\/**\n     * Check that attribute has an effects on other attributes\n     *\n     * @param Mage_Catalog_Model_Resource_Eav_Attribute|string $attribute\n     * @return bool\n     *\/",152],["T_WHITESPACE","\n    ",157],["T_PROTECTED","protected",158],["T_WHITESPACE"," ",158],["T_FUNCTION","function",158],["T_WHITESPACE"," ",158],["T_STRING","_attributeIsDependent",158],"(",["T_VARIABLE","$attribute",158],")",["T_WHITESPACE","\n    ",158],"{",["T_WHITESPACE","\n        ",159],["T_IF","if",160],["T_WHITESPACE"," ",160],"(",["T_VARIABLE","$attribute",160],["T_WHITESPACE"," ",160],["T_INSTANCEOF","instanceof",160],["T_WHITESPACE"," ",160],["T_STRING","Mage_Catalog_Model_Resource_Eav_Attribute",160],")",["T_WHITESPACE"," ",160],"{",["T_WHITESPACE","\n            ",160],["T_VARIABLE","$attribute",161],["T_WHITESPACE"," ",161],"=",["T_WHITESPACE"," ",161],["T_VARIABLE","$attribute",161],["T_OBJECT_OPERATOR","->",161],["T_STRING","getAttributeCode",161],"(",")",";",["T_WHITESPACE","\n        ",161],"}",["T_WHITESPACE","\n\n        ",162],["T_RETURN","return",164],["T_WHITESPACE"," ",164],["T_STRING","in_array",164],"(",["T_VARIABLE","$attribute",164],",",["T_WHITESPACE"," ",164],["T_VARIABLE","$this",164],["T_OBJECT_OPERATOR","->",164],["T_STRING","_dependentAttributes",164],")",";",["T_WHITESPACE","\n    ",164],"}",["T_WHITESPACE","\n\n    ",165],["T_DOC_COMMENT","\/**\n     * Register data required by process in event object\n     *\n     * @param Mage_Index_Model_Event $event\n     * @return Mage_Catalog_Model_Product_Indexer_Eav\n     *\/",167],["T_WHITESPACE","\n    ",172],["T_PROTECTED","protected",173],["T_WHITESPACE"," ",173],["T_FUNCTION","function",173],["T_WHITESPACE"," ",173],["T_STRING","_registerCatalogProductSaveEvent",173],"(",["T_STRING","Mage_Index_Model_Event",173],["T_WHITESPACE"," ",173],["T_VARIABLE","$event",173],")",["T_WHITESPACE","\n    ",173],"{",["T_WHITESPACE","\n        ",174],["T_COMMENT","\/* @var $product Mage_Catalog_Model_Product *\/",175],["T_WHITESPACE","\n        ",175],["T_VARIABLE","$product",176],["T_WHITESPACE","    ",176],"=",["T_WHITESPACE"," ",176],["T_VARIABLE","$event",176],["T_OBJECT_OPERATOR","->",176],["T_STRING","getDataObject",176],"(",")",";",["T_WHITESPACE","\n        ",176],["T_VARIABLE","$attributes",177],["T_WHITESPACE"," ",177],"=",["T_WHITESPACE"," ",177],["T_VARIABLE","$product",177],["T_OBJECT_OPERATOR","->",177],["T_STRING","getAttributes",177],"(",")",";",["T_WHITESPACE","\n        ",177],["T_VARIABLE","$reindexEav",178],["T_WHITESPACE"," ",178],"=",["T_WHITESPACE"," ",178],["T_VARIABLE","$product",178],["T_OBJECT_OPERATOR","->",178],["T_STRING","getForceReindexRequired",178],"(",")",";",["T_WHITESPACE","\n        ",178],["T_FOREACH","foreach",179],["T_WHITESPACE"," ",179],"(",["T_VARIABLE","$attributes",179],["T_WHITESPACE"," ",179],["T_AS","as",179],["T_WHITESPACE"," ",179],["T_VARIABLE","$attribute",179],")",["T_WHITESPACE"," ",179],"{",["T_WHITESPACE","\n            ",179],["T_VARIABLE","$attributeCode",180],["T_WHITESPACE"," ",180],"=",["T_WHITESPACE"," ",180],["T_VARIABLE","$attribute",180],["T_OBJECT_OPERATOR","->",180],["T_STRING","getAttributeCode",180],"(",")",";",["T_WHITESPACE","\n            ",180],["T_IF","if",181],["T_WHITESPACE"," ",181],"(","(",["T_VARIABLE","$this",181],["T_OBJECT_OPERATOR","->",181],["T_STRING","_attributeIsIndexable",181],"(",["T_VARIABLE","$attribute",181],")",["T_WHITESPACE"," ",181],["T_BOOLEAN_OR","||",181],["T_WHITESPACE"," ",181],["T_VARIABLE","$this",181],["T_OBJECT_OPERATOR","->",181],["T_STRING","_attributeIsDependent",181],"(",["T_VARIABLE","$attribute",181],")",")",["T_WHITESPACE","\n                ",181],["T_BOOLEAN_AND","&&",182],["T_WHITESPACE"," ",182],["T_VARIABLE","$product",182],["T_OBJECT_OPERATOR","->",182],["T_STRING","dataHasChangedFor",182],"(",["T_VARIABLE","$attributeCode",182],")",["T_WHITESPACE","\n            ",182],")",["T_WHITESPACE"," ",183],"{",["T_WHITESPACE","\n                ",183],["T_VARIABLE","$reindexEav",184],["T_WHITESPACE"," ",184],"=",["T_WHITESPACE"," ",184],["T_STRING","true",184],";",["T_WHITESPACE","\n                ",184],["T_BREAK","break",185],";",["T_WHITESPACE","\n            ",185],"}",["T_WHITESPACE","\n        ",186],"}",["T_WHITESPACE","\n\n        ",187],["T_IF","if",189],["T_WHITESPACE"," ",189],"(",["T_VARIABLE","$reindexEav",189],")",["T_WHITESPACE"," ",189],"{",["T_WHITESPACE","\n            ",189],["T_VARIABLE","$event",190],["T_OBJECT_OPERATOR","->",190],["T_STRING","addNewData",190],"(",["T_CONSTANT_ENCAPSED_STRING","'reindex_eav'",190],",",["T_WHITESPACE"," ",190],["T_VARIABLE","$reindexEav",190],")",";",["T_WHITESPACE","\n        ",190],"}",["T_WHITESPACE","\n\n        ",191],["T_RETURN","return",193],["T_WHITESPACE"," ",193],["T_VARIABLE","$this",193],";",["T_WHITESPACE","\n    ",193],"}",["T_WHITESPACE","\n\n    ",194],["T_DOC_COMMENT","\/**\n     * Register data required by process in event object\n     *\n     * @param Mage_Index_Model_Event $event\n     * @return Mage_Catalog_Model_Product_Indexer_Eav\n     *\/",196],["T_WHITESPACE","\n    ",201],["T_PROTECTED","protected",202],["T_WHITESPACE"," ",202],["T_FUNCTION","function",202],["T_WHITESPACE"," ",202],["T_STRING","_registerCatalogProductDeleteEvent",202],"(",["T_STRING","Mage_Index_Model_Event",202],["T_WHITESPACE"," ",202],["T_VARIABLE","$event",202],")",["T_WHITESPACE","\n    ",202],"{",["T_WHITESPACE","\n        ",203],["T_COMMENT","\/* @var $product Mage_Catalog_Model_Product *\/",204],["T_WHITESPACE","\n        ",204],["T_VARIABLE","$product",205],["T_WHITESPACE","    ",205],"=",["T_WHITESPACE"," ",205],["T_VARIABLE","$event",205],["T_OBJECT_OPERATOR","->",205],["T_STRING","getDataObject",205],"(",")",";",["T_WHITESPACE","\n\n        ",205],["T_VARIABLE","$parentIds",207],["T_WHITESPACE","  ",207],"=",["T_WHITESPACE"," ",207],["T_VARIABLE","$this",207],["T_OBJECT_OPERATOR","->",207],["T_STRING","_getResource",207],"(",")",["T_OBJECT_OPERATOR","->",207],["T_STRING","getRelationsByChild",207],"(",["T_VARIABLE","$product",207],["T_OBJECT_OPERATOR","->",207],["T_STRING","getId",207],"(",")",")",";",["T_WHITESPACE","\n        ",207],["T_IF","if",208],["T_WHITESPACE"," ",208],"(",["T_VARIABLE","$parentIds",208],")",["T_WHITESPACE"," ",208],"{",["T_WHITESPACE","\n            ",208],["T_VARIABLE","$event",209],["T_OBJECT_OPERATOR","->",209],["T_STRING","addNewData",209],"(",["T_CONSTANT_ENCAPSED_STRING","'reindex_eav_parent_ids'",209],",",["T_WHITESPACE"," ",209],["T_VARIABLE","$parentIds",209],")",";",["T_WHITESPACE","\n        ",209],"}",["T_WHITESPACE","\n\n        ",210],["T_RETURN","return",212],["T_WHITESPACE"," ",212],["T_VARIABLE","$this",212],";",["T_WHITESPACE","\n    ",212],"}",["T_WHITESPACE","\n\n    ",213],["T_DOC_COMMENT","\/**\n     * Register data required by process in event object\n     *\n     * @param Mage_Index_Model_Event $event\n     * @return Mage_Catalog_Model_Product_Indexer_Eav\n     *\/",215],["T_WHITESPACE","\n    ",220],["T_PROTECTED","protected",221],["T_WHITESPACE"," ",221],["T_FUNCTION","function",221],["T_WHITESPACE"," ",221],["T_STRING","_registerCatalogProductMassActionEvent",221],"(",["T_STRING","Mage_Index_Model_Event",221],["T_WHITESPACE"," ",221],["T_VARIABLE","$event",221],")",["T_WHITESPACE","\n    ",221],"{",["T_WHITESPACE","\n        ",222],["T_COMMENT","\/* @var $actionObject Varien_Object *\/",223],["T_WHITESPACE","\n        ",223],["T_VARIABLE","$actionObject",224],["T_WHITESPACE"," ",224],"=",["T_WHITESPACE"," ",224],["T_VARIABLE","$event",224],["T_OBJECT_OPERATOR","->",224],["T_STRING","getDataObject",224],"(",")",";",["T_WHITESPACE","\n        ",224],["T_VARIABLE","$attrData",225],["T_WHITESPACE","     ",225],"=",["T_WHITESPACE"," ",225],["T_VARIABLE","$actionObject",225],["T_OBJECT_OPERATOR","->",225],["T_STRING","getAttributesData",225],"(",")",";",["T_WHITESPACE","\n        ",225],["T_VARIABLE","$reindexEav",226],["T_WHITESPACE","   ",226],"=",["T_WHITESPACE"," ",226],["T_STRING","false",226],";",["T_WHITESPACE","\n\n        ",226],["T_COMMENT","\/\/ check if force reindex required\n",228],["T_WHITESPACE","        ",229],["T_IF","if",229],["T_WHITESPACE"," ",229],"(",["T_ISSET","isset",229],"(",["T_VARIABLE","$attrData",229],"[",["T_CONSTANT_ENCAPSED_STRING","'force_reindex_required'",229],"]",")",["T_WHITESPACE"," ",229],["T_BOOLEAN_AND","&&",229],["T_WHITESPACE"," ",229],["T_VARIABLE","$attrData",229],"[",["T_CONSTANT_ENCAPSED_STRING","'force_reindex_required'",229],"]",")",["T_WHITESPACE"," ",229],"{",["T_WHITESPACE","\n            ",229],["T_VARIABLE","$reindexEav",230],["T_WHITESPACE"," ",230],"=",["T_WHITESPACE"," ",230],["T_STRING","true",230],";",["T_WHITESPACE","\n        ",230],"}",["T_WHITESPACE","\n\n        ",231],["T_COMMENT","\/\/ check if attributes changed\n",233],["T_WHITESPACE","        ",234],["T_IF","if",234],["T_WHITESPACE"," ",234],"(",["T_STRING","is_array",234],"(",["T_VARIABLE","$attrData",234],")",")",["T_WHITESPACE"," ",234],"{",["T_WHITESPACE","\n            ",234],["T_FOREACH","foreach",235],["T_WHITESPACE"," ",235],"(",["T_STRING","array_keys",235],"(",["T_VARIABLE","$attrData",235],")",["T_WHITESPACE"," ",235],["T_AS","as",235],["T_WHITESPACE"," ",235],["T_VARIABLE","$attributeCode",235],")",["T_WHITESPACE"," ",235],"{",["T_WHITESPACE","\n                ",235],["T_IF","if",236],["T_WHITESPACE"," ",236],"(",["T_VARIABLE","$this",236],["T_OBJECT_OPERATOR","->",236],["T_STRING","_attributeIsIndexable",236],"(",["T_VARIABLE","$attributeCode",236],")",["T_WHITESPACE"," ",236],["T_BOOLEAN_OR","||",236],["T_WHITESPACE"," ",236],["T_VARIABLE","$this",236],["T_OBJECT_OPERATOR","->",236],["T_STRING","_attributeIsDependent",236],"(",["T_VARIABLE","$attributeCode",236],")",")",["T_WHITESPACE"," ",236],"{",["T_WHITESPACE","\n                    ",236],["T_VARIABLE","$reindexEav",237],["T_WHITESPACE"," ",237],"=",["T_WHITESPACE"," ",237],["T_STRING","true",237],";",["T_WHITESPACE","\n                    ",237],["T_BREAK","break",238],";",["T_WHITESPACE","\n                ",238],"}",["T_WHITESPACE","\n            ",239],"}",["T_WHITESPACE","\n        ",240],"}",["T_WHITESPACE","\n\n        ",241],["T_COMMENT","\/\/ check changed websites\n",243],["T_WHITESPACE","        ",244],["T_IF","if",244],["T_WHITESPACE"," ",244],"(",["T_VARIABLE","$actionObject",244],["T_OBJECT_OPERATOR","->",244],["T_STRING","getWebsiteIds",244],"(",")",")",["T_WHITESPACE"," ",244],"{",["T_WHITESPACE","\n            ",244],["T_VARIABLE","$reindexEav",245],["T_WHITESPACE"," ",245],"=",["T_WHITESPACE"," ",245],["T_STRING","true",245],";",["T_WHITESPACE","\n        ",245],"}",["T_WHITESPACE","\n\n        ",246],["T_COMMENT","\/\/ register affected products\n",248],["T_WHITESPACE","        ",249],["T_IF","if",249],["T_WHITESPACE"," ",249],"(",["T_VARIABLE","$reindexEav",249],")",["T_WHITESPACE"," ",249],"{",["T_WHITESPACE","\n            ",249],["T_VARIABLE","$event",250],["T_OBJECT_OPERATOR","->",250],["T_STRING","addNewData",250],"(",["T_CONSTANT_ENCAPSED_STRING","'reindex_eav_product_ids'",250],",",["T_WHITESPACE"," ",250],["T_VARIABLE","$actionObject",250],["T_OBJECT_OPERATOR","->",250],["T_STRING","getProductIds",250],"(",")",")",";",["T_WHITESPACE","\n        ",250],"}",["T_WHITESPACE","\n\n        ",251],["T_RETURN","return",253],["T_WHITESPACE"," ",253],["T_VARIABLE","$this",253],";",["T_WHITESPACE","\n    ",253],"}",["T_WHITESPACE","\n\n    ",254],["T_DOC_COMMENT","\/**\n     * Register data required by process attribute save in event object\n     *\n     * @param Mage_Index_Model_Event $event\n     * @return Mage_Catalog_Model_Product_Indexer_Eav\n     *\/",256],["T_WHITESPACE","\n    ",261],["T_PROTECTED","protected",262],["T_WHITESPACE"," ",262],["T_FUNCTION","function",262],["T_WHITESPACE"," ",262],["T_STRING","_registerCatalogAttributeSaveEvent",262],"(",["T_STRING","Mage_Index_Model_Event",262],["T_WHITESPACE"," ",262],["T_VARIABLE","$event",262],")",["T_WHITESPACE","\n    ",262],"{",["T_WHITESPACE","\n        ",263],["T_COMMENT","\/* @var $attribute Mage_Catalog_Model_Resource_Eav_Attribute *\/",264],["T_WHITESPACE","\n        ",264],["T_VARIABLE","$attribute",265],["T_WHITESPACE"," ",265],"=",["T_WHITESPACE"," ",265],["T_VARIABLE","$event",265],["T_OBJECT_OPERATOR","->",265],["T_STRING","getDataObject",265],"(",")",";",["T_WHITESPACE","\n        ",265],["T_IF","if",266],["T_WHITESPACE"," ",266],"(",["T_VARIABLE","$attribute",266],["T_OBJECT_OPERATOR","->",266],["T_STRING","isIndexable",266],"(",")",")",["T_WHITESPACE"," ",266],"{",["T_WHITESPACE","\n            ",266],["T_VARIABLE","$before",267],["T_WHITESPACE"," ",267],"=",["T_WHITESPACE"," ",267],["T_VARIABLE","$attribute",267],["T_OBJECT_OPERATOR","->",267],["T_STRING","getOrigData",267],"(",["T_CONSTANT_ENCAPSED_STRING","'is_filterable'",267],")",["T_WHITESPACE","\n                ",267],["T_BOOLEAN_OR","||",268],["T_WHITESPACE"," ",268],["T_VARIABLE","$attribute",268],["T_OBJECT_OPERATOR","->",268],["T_STRING","getOrigData",268],"(",["T_CONSTANT_ENCAPSED_STRING","'is_filterable_in_search'",268],")",["T_WHITESPACE","\n                ",268],["T_BOOLEAN_OR","||",269],["T_WHITESPACE"," ",269],["T_VARIABLE","$attribute",269],["T_OBJECT_OPERATOR","->",269],["T_STRING","getOrigData",269],"(",["T_CONSTANT_ENCAPSED_STRING","'is_visible_in_advanced_search'",269],")",";",["T_WHITESPACE","\n            ",269],["T_VARIABLE","$after",270],["T_WHITESPACE","  ",270],"=",["T_WHITESPACE"," ",270],["T_VARIABLE","$attribute",270],["T_OBJECT_OPERATOR","->",270],["T_STRING","getData",270],"(",["T_CONSTANT_ENCAPSED_STRING","'is_filterable'",270],")",["T_WHITESPACE","\n                ",270],["T_BOOLEAN_OR","||",271],["T_WHITESPACE"," ",271],["T_VARIABLE","$attribute",271],["T_OBJECT_OPERATOR","->",271],["T_STRING","getData",271],"(",["T_CONSTANT_ENCAPSED_STRING","'is_filterable_in_search'",271],")",["T_WHITESPACE","\n                ",271],["T_BOOLEAN_OR","||",272],["T_WHITESPACE"," ",272],["T_VARIABLE","$attribute",272],["T_OBJECT_OPERATOR","->",272],["T_STRING","getData",272],"(",["T_CONSTANT_ENCAPSED_STRING","'is_visible_in_advanced_search'",272],")",";",["T_WHITESPACE","\n\n            ",272],["T_IF","if",274],["T_WHITESPACE"," ",274],"(","!",["T_VARIABLE","$before",274],["T_WHITESPACE"," ",274],["T_BOOLEAN_AND","&&",274],["T_WHITESPACE"," ",274],["T_VARIABLE","$after",274],["T_WHITESPACE"," ",274],["T_BOOLEAN_OR","||",274],["T_WHITESPACE"," ",274],["T_VARIABLE","$before",274],["T_WHITESPACE"," ",274],["T_BOOLEAN_AND","&&",274],["T_WHITESPACE"," ",274],"!",["T_VARIABLE","$after",274],")",["T_WHITESPACE"," ",274],"{",["T_WHITESPACE","\n                ",274],["T_VARIABLE","$event",275],["T_OBJECT_OPERATOR","->",275],["T_STRING","addNewData",275],"(",["T_CONSTANT_ENCAPSED_STRING","'reindex_attribute'",275],",",["T_WHITESPACE"," ",275],["T_LNUMBER","1",275],")",";",["T_WHITESPACE","\n                ",275],["T_VARIABLE","$event",276],["T_OBJECT_OPERATOR","->",276],["T_STRING","addNewData",276],"(",["T_CONSTANT_ENCAPSED_STRING","'attribute_index_type'",276],",",["T_WHITESPACE"," ",276],["T_VARIABLE","$attribute",276],["T_OBJECT_OPERATOR","->",276],["T_STRING","getIndexType",276],"(",")",")",";",["T_WHITESPACE","\n                ",276],["T_VARIABLE","$event",277],["T_OBJECT_OPERATOR","->",277],["T_STRING","addNewData",277],"(",["T_CONSTANT_ENCAPSED_STRING","'is_indexable'",277],",",["T_WHITESPACE"," ",277],["T_VARIABLE","$after",277],")",";",["T_WHITESPACE","\n            ",277],"}",["T_WHITESPACE","\n        ",278],"}",["T_WHITESPACE","\n\n        ",279],["T_RETURN","return",281],["T_WHITESPACE"," ",281],["T_VARIABLE","$this",281],";",["T_WHITESPACE","\n    ",281],"}",["T_WHITESPACE","\n\n    ",282],["T_DOC_COMMENT","\/**\n     * Process event\n     *\n     * @param Mage_Index_Model_Event $event\n     *\/",284],["T_WHITESPACE","\n    ",288],["T_PROTECTED","protected",289],["T_WHITESPACE"," ",289],["T_FUNCTION","function",289],["T_WHITESPACE"," ",289],["T_STRING","_processEvent",289],"(",["T_STRING","Mage_Index_Model_Event",289],["T_WHITESPACE"," ",289],["T_VARIABLE","$event",289],")",["T_WHITESPACE","\n    ",289],"{",["T_WHITESPACE","\n        ",290],["T_VARIABLE","$data",291],["T_WHITESPACE"," ",291],"=",["T_WHITESPACE"," ",291],["T_VARIABLE","$event",291],["T_OBJECT_OPERATOR","->",291],["T_STRING","getNewData",291],"(",")",";",["T_WHITESPACE","\n        ",291],["T_IF","if",292],["T_WHITESPACE"," ",292],"(","!",["T_EMPTY","empty",292],"(",["T_VARIABLE","$data",292],"[",["T_CONSTANT_ENCAPSED_STRING","'catalog_product_eav_reindex_all'",292],"]",")",")",["T_WHITESPACE"," ",292],"{",["T_WHITESPACE","\n            ",292],["T_VARIABLE","$this",293],["T_OBJECT_OPERATOR","->",293],["T_STRING","reindexAll",293],"(",")",";",["T_WHITESPACE","\n        ",293],"}",["T_WHITESPACE","\n        ",294],["T_IF","if",295],["T_WHITESPACE"," ",295],"(",["T_EMPTY","empty",295],"(",["T_VARIABLE","$data",295],"[",["T_CONSTANT_ENCAPSED_STRING","'catalog_product_eav_skip_call_event_handler'",295],"]",")",")",["T_WHITESPACE"," ",295],"{",["T_WHITESPACE","\n            ",295],["T_VARIABLE","$this",296],["T_OBJECT_OPERATOR","->",296],["T_STRING","callEventHandler",296],"(",["T_VARIABLE","$event",296],")",";",["T_WHITESPACE","\n        ",296],"}",["T_WHITESPACE","\n    ",297],"}",["T_WHITESPACE","\n",298],"}",["T_WHITESPACE","\n",299]]
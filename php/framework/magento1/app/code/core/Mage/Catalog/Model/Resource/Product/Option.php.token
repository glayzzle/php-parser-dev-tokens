[["T_OPEN_TAG","<?php\n",1],["T_DOC_COMMENT","\/**\n * Magento\n *\n * NOTICE OF LICENSE\n *\n * This source file is subject to the Open Software License (OSL 3.0)\n * that is bundled with this package in the file LICENSE.txt.\n * It is also available through the world-wide-web at this URL:\n * http:\/\/opensource.org\/licenses\/osl-3.0.php\n * If you did not receive a copy of the license and are unable to\n * obtain it through the world-wide-web, please send an email\n * to license@magento.com so we can send you a copy immediately.\n *\n * DISCLAIMER\n *\n * Do not edit or add to this file if you wish to upgrade Magento to newer\n * versions in the future. If you wish to customize Magento for your\n * needs please refer to http:\/\/www.magento.com for more information.\n *\n * @category    Mage\n * @package     Mage_Catalog\n * @copyright  Copyright (c) 2006-2016 X.commerce, Inc. and affiliates (http:\/\/www.magento.com)\n * @license    http:\/\/opensource.org\/licenses\/osl-3.0.php  Open Software License (OSL 3.0)\n *\/",2],["T_WHITESPACE","\n\n\n",25],["T_DOC_COMMENT","\/**\n * Catalog product custom option resource model\n *\n * @category    Mage\n * @package     Mage_Catalog\n * @author      Magento Core Team <core@magentocommerce.com>\n *\/",28],["T_WHITESPACE","\n",34],["T_CLASS","class",35],["T_WHITESPACE"," ",35],["T_STRING","Mage_Catalog_Model_Resource_Product_Option",35],["T_WHITESPACE"," ",35],["T_EXTENDS","extends",35],["T_WHITESPACE"," ",35],["T_STRING","Mage_Core_Model_Resource_Db_Abstract",35],["T_WHITESPACE","\n",35],"{",["T_WHITESPACE","\n    ",36],["T_DOC_COMMENT","\/**\n     * Define main table and initialize connection\n     *\n     *\/",37],["T_WHITESPACE","\n    ",40],["T_PROTECTED","protected",41],["T_WHITESPACE"," ",41],["T_FUNCTION","function",41],["T_WHITESPACE"," ",41],["T_STRING","_construct",41],"(",")",["T_WHITESPACE","\n    ",41],"{",["T_WHITESPACE","\n        ",42],["T_VARIABLE","$this",43],["T_OBJECT_OPERATOR","->",43],["T_STRING","_init",43],"(",["T_CONSTANT_ENCAPSED_STRING","'catalog\/product_option'",43],",",["T_WHITESPACE"," ",43],["T_CONSTANT_ENCAPSED_STRING","'option_id'",43],")",";",["T_WHITESPACE","\n    ",43],"}",["T_WHITESPACE","\n\n    ",44],["T_DOC_COMMENT","\/**\n     * Save options store data\n     *\n     * @param Mage_Core_Model_Abstract $object\n     * @return Mage_Core_Model_Resource_Db_Abstract\n     *\/",46],["T_WHITESPACE","\n    ",51],["T_PROTECTED","protected",52],["T_WHITESPACE"," ",52],["T_FUNCTION","function",52],["T_WHITESPACE"," ",52],["T_STRING","_afterSave",52],"(",["T_STRING","Mage_Core_Model_Abstract",52],["T_WHITESPACE"," ",52],["T_VARIABLE","$object",52],")",["T_WHITESPACE","\n    ",52],"{",["T_WHITESPACE","\n        ",53],["T_VARIABLE","$this",54],["T_OBJECT_OPERATOR","->",54],["T_STRING","_saveValuePrices",54],"(",["T_VARIABLE","$object",54],")",";",["T_WHITESPACE","\n        ",54],["T_VARIABLE","$this",55],["T_OBJECT_OPERATOR","->",55],["T_STRING","_saveValueTitles",55],"(",["T_VARIABLE","$object",55],")",";",["T_WHITESPACE","\n\n        ",55],["T_RETURN","return",57],["T_WHITESPACE"," ",57],["T_STRING","parent",57],["T_DOUBLE_COLON","::",57],["T_STRING","_afterSave",57],"(",["T_VARIABLE","$object",57],")",";",["T_WHITESPACE","\n    ",57],"}",["T_WHITESPACE","\n\n    ",58],["T_DOC_COMMENT","\/**\n     * Save value prices\n     *\n     * @param Mage_Core_Model_Abstract $object\n     * @return Mage_Catalog_Model_Resource_Product_Option\n     *\/",60],["T_WHITESPACE","\n    ",65],["T_PROTECTED","protected",66],["T_WHITESPACE"," ",66],["T_FUNCTION","function",66],["T_WHITESPACE"," ",66],["T_STRING","_saveValuePrices",66],"(",["T_STRING","Mage_Core_Model_Abstract",66],["T_WHITESPACE"," ",66],["T_VARIABLE","$object",66],")",["T_WHITESPACE","\n    ",66],"{",["T_WHITESPACE","\n        ",67],["T_VARIABLE","$priceTable",68],["T_WHITESPACE","   ",68],"=",["T_WHITESPACE"," ",68],["T_VARIABLE","$this",68],["T_OBJECT_OPERATOR","->",68],["T_STRING","getTable",68],"(",["T_CONSTANT_ENCAPSED_STRING","'catalog\/product_option_price'",68],")",";",["T_WHITESPACE","\n        ",68],["T_VARIABLE","$readAdapter",69],["T_WHITESPACE","  ",69],"=",["T_WHITESPACE"," ",69],["T_VARIABLE","$this",69],["T_OBJECT_OPERATOR","->",69],["T_STRING","_getReadAdapter",69],"(",")",";",["T_WHITESPACE","\n        ",69],["T_VARIABLE","$writeAdapter",70],["T_WHITESPACE"," ",70],"=",["T_WHITESPACE"," ",70],["T_VARIABLE","$this",70],["T_OBJECT_OPERATOR","->",70],["T_STRING","_getWriteAdapter",70],"(",")",";",["T_WHITESPACE","\n\n        ",70],["T_COMMENT","\/*\n         * Better to check param 'price' and 'price_type' for saving.\n         * If there is not price skip saving price\n         *\/",72],["T_WHITESPACE","\n\n        ",75],["T_IF","if",77],["T_WHITESPACE"," ",77],"(",["T_VARIABLE","$object",77],["T_OBJECT_OPERATOR","->",77],["T_STRING","getType",77],"(",")",["T_WHITESPACE"," ",77],["T_IS_EQUAL","==",77],["T_WHITESPACE"," ",77],["T_STRING","Mage_Catalog_Model_Product_Option",77],["T_DOUBLE_COLON","::",77],["T_STRING","OPTION_TYPE_FIELD",77],["T_WHITESPACE","\n            ",77],["T_BOOLEAN_OR","||",78],["T_WHITESPACE"," ",78],["T_VARIABLE","$object",78],["T_OBJECT_OPERATOR","->",78],["T_STRING","getType",78],"(",")",["T_WHITESPACE"," ",78],["T_IS_EQUAL","==",78],["T_WHITESPACE"," ",78],["T_STRING","Mage_Catalog_Model_Product_Option",78],["T_DOUBLE_COLON","::",78],["T_STRING","OPTION_TYPE_AREA",78],["T_WHITESPACE","\n            ",78],["T_BOOLEAN_OR","||",79],["T_WHITESPACE"," ",79],["T_VARIABLE","$object",79],["T_OBJECT_OPERATOR","->",79],["T_STRING","getType",79],"(",")",["T_WHITESPACE"," ",79],["T_IS_EQUAL","==",79],["T_WHITESPACE"," ",79],["T_STRING","Mage_Catalog_Model_Product_Option",79],["T_DOUBLE_COLON","::",79],["T_STRING","OPTION_TYPE_FILE",79],["T_WHITESPACE","\n            ",79],["T_BOOLEAN_OR","||",80],["T_WHITESPACE"," ",80],["T_VARIABLE","$object",80],["T_OBJECT_OPERATOR","->",80],["T_STRING","getType",80],"(",")",["T_WHITESPACE"," ",80],["T_IS_EQUAL","==",80],["T_WHITESPACE"," ",80],["T_STRING","Mage_Catalog_Model_Product_Option",80],["T_DOUBLE_COLON","::",80],["T_STRING","OPTION_TYPE_DATE",80],["T_WHITESPACE","\n            ",80],["T_BOOLEAN_OR","||",81],["T_WHITESPACE"," ",81],["T_VARIABLE","$object",81],["T_OBJECT_OPERATOR","->",81],["T_STRING","getType",81],"(",")",["T_WHITESPACE"," ",81],["T_IS_EQUAL","==",81],["T_WHITESPACE"," ",81],["T_STRING","Mage_Catalog_Model_Product_Option",81],["T_DOUBLE_COLON","::",81],["T_STRING","OPTION_TYPE_DATE_TIME",81],["T_WHITESPACE","\n            ",81],["T_BOOLEAN_OR","||",82],["T_WHITESPACE"," ",82],["T_VARIABLE","$object",82],["T_OBJECT_OPERATOR","->",82],["T_STRING","getType",82],"(",")",["T_WHITESPACE"," ",82],["T_IS_EQUAL","==",82],["T_WHITESPACE"," ",82],["T_STRING","Mage_Catalog_Model_Product_Option",82],["T_DOUBLE_COLON","::",82],["T_STRING","OPTION_TYPE_TIME",82],["T_WHITESPACE","\n        ",82],")",["T_WHITESPACE"," ",83],"{",["T_WHITESPACE","\n            ",83],["T_COMMENT","\/\/save for store_id = 0\n",84],["T_WHITESPACE","            ",85],["T_IF","if",85],["T_WHITESPACE"," ",85],"(","!",["T_VARIABLE","$object",85],["T_OBJECT_OPERATOR","->",85],["T_STRING","getData",85],"(",["T_CONSTANT_ENCAPSED_STRING","'scope'",85],",",["T_WHITESPACE"," ",85],["T_CONSTANT_ENCAPSED_STRING","'price'",85],")",")",["T_WHITESPACE"," ",85],"{",["T_WHITESPACE","\n                ",85],["T_VARIABLE","$statement",86],["T_WHITESPACE"," ",86],"=",["T_WHITESPACE"," ",86],["T_VARIABLE","$readAdapter",86],["T_OBJECT_OPERATOR","->",86],["T_STRING","select",86],"(",")",["T_WHITESPACE","\n                    ",86],["T_OBJECT_OPERATOR","->",87],["T_STRING","from",87],"(",["T_VARIABLE","$priceTable",87],",",["T_WHITESPACE"," ",87],["T_CONSTANT_ENCAPSED_STRING","'option_id'",87],")",["T_WHITESPACE","\n                    ",87],["T_OBJECT_OPERATOR","->",88],["T_STRING","where",88],"(",["T_CONSTANT_ENCAPSED_STRING","'option_id = ?'",88],",",["T_WHITESPACE"," ",88],["T_VARIABLE","$object",88],["T_OBJECT_OPERATOR","->",88],["T_STRING","getId",88],"(",")",")",["T_WHITESPACE","\n                    ",88],["T_OBJECT_OPERATOR","->",89],["T_STRING","where",89],"(",["T_CONSTANT_ENCAPSED_STRING","'store_id = ?'",89],",",["T_WHITESPACE"," ",89],["T_STRING","Mage_Catalog_Model_Abstract",89],["T_DOUBLE_COLON","::",89],["T_STRING","DEFAULT_STORE_ID",89],")",";",["T_WHITESPACE","\n                ",89],["T_VARIABLE","$optionId",90],["T_WHITESPACE"," ",90],"=",["T_WHITESPACE"," ",90],["T_VARIABLE","$readAdapter",90],["T_OBJECT_OPERATOR","->",90],["T_STRING","fetchOne",90],"(",["T_VARIABLE","$statement",90],")",";",["T_WHITESPACE","\n\n                ",90],["T_IF","if",92],["T_WHITESPACE"," ",92],"(",["T_VARIABLE","$optionId",92],")",["T_WHITESPACE"," ",92],"{",["T_WHITESPACE","\n                    ",92],["T_IF","if",93],["T_WHITESPACE"," ",93],"(",["T_VARIABLE","$object",93],["T_OBJECT_OPERATOR","->",93],["T_STRING","getStoreId",93],"(",")",["T_WHITESPACE"," ",93],["T_IS_EQUAL","==",93],["T_WHITESPACE"," ",93],["T_CONSTANT_ENCAPSED_STRING","'0'",93],")",["T_WHITESPACE"," ",93],"{",["T_WHITESPACE","\n                        ",93],["T_VARIABLE","$data",94],["T_WHITESPACE"," ",94],"=",["T_WHITESPACE"," ",94],["T_VARIABLE","$this",94],["T_OBJECT_OPERATOR","->",94],["T_STRING","_prepareDataForTable",94],"(",["T_WHITESPACE","\n                            ",94],["T_NEW","new",95],["T_WHITESPACE"," ",95],["T_STRING","Varien_Object",95],"(",["T_WHITESPACE","\n                                ",95],["T_ARRAY","array",96],"(",["T_WHITESPACE","\n                                    ",96],["T_CONSTANT_ENCAPSED_STRING","'price'",97],["T_WHITESPACE","      ",97],["T_DOUBLE_ARROW","=>",97],["T_WHITESPACE"," ",97],["T_VARIABLE","$object",97],["T_OBJECT_OPERATOR","->",97],["T_STRING","getPrice",97],"(",")",",",["T_WHITESPACE","\n                                    ",97],["T_CONSTANT_ENCAPSED_STRING","'price_type'",98],["T_WHITESPACE"," ",98],["T_DOUBLE_ARROW","=>",98],["T_WHITESPACE"," ",98],["T_VARIABLE","$object",98],["T_OBJECT_OPERATOR","->",98],["T_STRING","getPriceType",98],"(",")",")",["T_WHITESPACE","\n                            ",98],")",",",["T_WHITESPACE","\n                            ",99],["T_VARIABLE","$priceTable",100],["T_WHITESPACE","\n                        ",100],")",";",["T_WHITESPACE","\n\n                        ",101],["T_VARIABLE","$writeAdapter",103],["T_OBJECT_OPERATOR","->",103],["T_STRING","update",103],"(",["T_WHITESPACE","\n                            ",103],["T_VARIABLE","$priceTable",104],",",["T_WHITESPACE","\n                            ",104],["T_VARIABLE","$data",105],",",["T_WHITESPACE","\n                            ",105],["T_ARRAY","array",106],"(",["T_WHITESPACE","\n                                ",106],["T_CONSTANT_ENCAPSED_STRING","'option_id = ?'",107],["T_WHITESPACE"," ",107],["T_DOUBLE_ARROW","=>",107],["T_WHITESPACE"," ",107],["T_VARIABLE","$object",107],["T_OBJECT_OPERATOR","->",107],["T_STRING","getId",107],"(",")",",",["T_WHITESPACE","\n                                ",107],["T_CONSTANT_ENCAPSED_STRING","'store_id  = ?'",108],["T_WHITESPACE"," ",108],["T_DOUBLE_ARROW","=>",108],["T_WHITESPACE"," ",108],["T_STRING","Mage_Catalog_Model_Abstract",108],["T_DOUBLE_COLON","::",108],["T_STRING","DEFAULT_STORE_ID",108],",",["T_WHITESPACE","\n                            ",108],")",["T_WHITESPACE","\n                        ",109],")",";",["T_WHITESPACE","\n                    ",110],"}",["T_WHITESPACE","\n                ",111],"}",["T_WHITESPACE"," ",112],["T_ELSE","else",112],["T_WHITESPACE"," ",112],"{",["T_WHITESPACE","\n                    ",112],["T_VARIABLE","$data",113],["T_WHITESPACE"," ",113],"=",["T_WHITESPACE"," ",113],["T_VARIABLE","$this",113],["T_OBJECT_OPERATOR","->",113],["T_STRING","_prepareDataForTable",113],"(",["T_WHITESPACE","\n                         ",113],["T_NEW","new",114],["T_WHITESPACE"," ",114],["T_STRING","Varien_Object",114],"(",["T_WHITESPACE","\n                            ",114],["T_ARRAY","array",115],"(",["T_WHITESPACE","\n                                ",115],["T_CONSTANT_ENCAPSED_STRING","'option_id'",116],["T_WHITESPACE","  ",116],["T_DOUBLE_ARROW","=>",116],["T_WHITESPACE"," ",116],["T_VARIABLE","$object",116],["T_OBJECT_OPERATOR","->",116],["T_STRING","getId",116],"(",")",",",["T_WHITESPACE","\n                                ",116],["T_CONSTANT_ENCAPSED_STRING","'store_id'",117],["T_WHITESPACE","   ",117],["T_DOUBLE_ARROW","=>",117],["T_WHITESPACE"," ",117],["T_STRING","Mage_Catalog_Model_Abstract",117],["T_DOUBLE_COLON","::",117],["T_STRING","DEFAULT_STORE_ID",117],",",["T_WHITESPACE","\n                                ",117],["T_CONSTANT_ENCAPSED_STRING","'price'",118],["T_WHITESPACE","      ",118],["T_DOUBLE_ARROW","=>",118],["T_WHITESPACE"," ",118],["T_VARIABLE","$object",118],["T_OBJECT_OPERATOR","->",118],["T_STRING","getPrice",118],"(",")",",",["T_WHITESPACE","\n                                ",118],["T_CONSTANT_ENCAPSED_STRING","'price_type'",119],["T_WHITESPACE"," ",119],["T_DOUBLE_ARROW","=>",119],["T_WHITESPACE"," ",119],["T_VARIABLE","$object",119],["T_OBJECT_OPERATOR","->",119],["T_STRING","getPriceType",119],"(",")",["T_WHITESPACE","\n                            ",119],")",["T_WHITESPACE","\n                        ",120],")",",",["T_WHITESPACE","\n                        ",121],["T_VARIABLE","$priceTable",122],["T_WHITESPACE","\n                    ",122],")",";",["T_WHITESPACE","\n                    ",123],["T_VARIABLE","$writeAdapter",124],["T_OBJECT_OPERATOR","->",124],["T_STRING","insert",124],"(",["T_VARIABLE","$priceTable",124],",",["T_WHITESPACE"," ",124],["T_VARIABLE","$data",124],")",";",["T_WHITESPACE","\n                ",124],"}",["T_WHITESPACE","\n            ",125],"}",["T_WHITESPACE","\n\n            ",126],["T_VARIABLE","$scope",128],["T_WHITESPACE"," ",128],"=",["T_WHITESPACE"," ",128],["T_INT_CAST","(int)",128],["T_WHITESPACE"," ",128],["T_STRING","Mage",128],["T_DOUBLE_COLON","::",128],["T_STRING","app",128],"(",")",["T_OBJECT_OPERATOR","->",128],["T_STRING","getStore",128],"(",")",["T_OBJECT_OPERATOR","->",128],["T_STRING","getConfig",128],"(",["T_STRING","Mage_Core_Model_Store",128],["T_DOUBLE_COLON","::",128],["T_STRING","XML_PATH_PRICE_SCOPE",128],")",";",["T_WHITESPACE","\n\n            ",128],["T_IF","if",130],["T_WHITESPACE"," ",130],"(",["T_VARIABLE","$object",130],["T_OBJECT_OPERATOR","->",130],["T_STRING","getStoreId",130],"(",")",["T_WHITESPACE"," ",130],["T_IS_NOT_EQUAL","!=",130],["T_WHITESPACE"," ",130],["T_CONSTANT_ENCAPSED_STRING","'0'",130],["T_WHITESPACE"," ",130],["T_BOOLEAN_AND","&&",130],["T_WHITESPACE"," ",130],["T_VARIABLE","$scope",130],["T_WHITESPACE"," ",130],["T_IS_EQUAL","==",130],["T_WHITESPACE"," ",130],["T_STRING","Mage_Core_Model_Store",130],["T_DOUBLE_COLON","::",130],["T_STRING","PRICE_SCOPE_WEBSITE",130],["T_WHITESPACE","\n                ",130],["T_BOOLEAN_AND","&&",131],["T_WHITESPACE"," ",131],"!",["T_VARIABLE","$object",131],["T_OBJECT_OPERATOR","->",131],["T_STRING","getData",131],"(",["T_CONSTANT_ENCAPSED_STRING","'scope'",131],",",["T_WHITESPACE"," ",131],["T_CONSTANT_ENCAPSED_STRING","'price'",131],")",")",["T_WHITESPACE"," ",131],"{",["T_WHITESPACE","\n\n                ",131],["T_VARIABLE","$baseCurrency",133],["T_WHITESPACE"," ",133],"=",["T_WHITESPACE"," ",133],["T_STRING","Mage",133],["T_DOUBLE_COLON","::",133],["T_STRING","app",133],"(",")",["T_OBJECT_OPERATOR","->",133],["T_STRING","getBaseCurrencyCode",133],"(",")",";",["T_WHITESPACE","\n\n                ",133],["T_VARIABLE","$storeIds",135],["T_WHITESPACE"," ",135],"=",["T_WHITESPACE"," ",135],["T_STRING","Mage",135],["T_DOUBLE_COLON","::",135],["T_STRING","app",135],"(",")",["T_OBJECT_OPERATOR","->",135],["T_STRING","getStore",135],"(",["T_VARIABLE","$object",135],["T_OBJECT_OPERATOR","->",135],["T_STRING","getStoreId",135],"(",")",")",["T_OBJECT_OPERATOR","->",135],["T_STRING","getWebsite",135],"(",")",["T_OBJECT_OPERATOR","->",135],["T_STRING","getStoreIds",135],"(",")",";",["T_WHITESPACE","\n                ",135],["T_IF","if",136],["T_WHITESPACE"," ",136],"(",["T_STRING","is_array",136],"(",["T_VARIABLE","$storeIds",136],")",")",["T_WHITESPACE"," ",136],"{",["T_WHITESPACE","\n                    ",136],["T_FOREACH","foreach",137],["T_WHITESPACE"," ",137],"(",["T_VARIABLE","$storeIds",137],["T_WHITESPACE"," ",137],["T_AS","as",137],["T_WHITESPACE"," ",137],["T_VARIABLE","$storeId",137],")",["T_WHITESPACE"," ",137],"{",["T_WHITESPACE","\n                        ",137],["T_IF","if",138],["T_WHITESPACE"," ",138],"(",["T_VARIABLE","$object",138],["T_OBJECT_OPERATOR","->",138],["T_STRING","getPriceType",138],"(",")",["T_WHITESPACE"," ",138],["T_IS_EQUAL","==",138],["T_WHITESPACE"," ",138],["T_CONSTANT_ENCAPSED_STRING","'fixed'",138],")",["T_WHITESPACE"," ",138],"{",["T_WHITESPACE","\n                            ",138],["T_VARIABLE","$storeCurrency",139],["T_WHITESPACE"," ",139],"=",["T_WHITESPACE"," ",139],["T_STRING","Mage",139],["T_DOUBLE_COLON","::",139],["T_STRING","app",139],"(",")",["T_OBJECT_OPERATOR","->",139],["T_STRING","getStore",139],"(",["T_VARIABLE","$storeId",139],")",["T_OBJECT_OPERATOR","->",139],["T_STRING","getBaseCurrencyCode",139],"(",")",";",["T_WHITESPACE","\n                            ",139],["T_VARIABLE","$rate",140],["T_WHITESPACE"," ",140],"=",["T_WHITESPACE"," ",140],["T_STRING","Mage",140],["T_DOUBLE_COLON","::",140],["T_STRING","getModel",140],"(",["T_CONSTANT_ENCAPSED_STRING","'directory\/currency'",140],")",["T_OBJECT_OPERATOR","->",140],["T_STRING","load",140],"(",["T_VARIABLE","$baseCurrency",140],")",["T_OBJECT_OPERATOR","->",140],["T_STRING","getRate",140],"(",["T_VARIABLE","$storeCurrency",140],")",";",["T_WHITESPACE","\n                            ",140],["T_IF","if",141],["T_WHITESPACE"," ",141],"(","!",["T_VARIABLE","$rate",141],")",["T_WHITESPACE"," ",141],"{",["T_WHITESPACE","\n                                ",141],["T_VARIABLE","$rate",142],"=",["T_LNUMBER","1",142],";",["T_WHITESPACE","\n                            ",142],"}",["T_WHITESPACE","\n                            ",143],["T_VARIABLE","$newPrice",144],["T_WHITESPACE"," ",144],"=",["T_WHITESPACE"," ",144],["T_VARIABLE","$object",144],["T_OBJECT_OPERATOR","->",144],["T_STRING","getPrice",144],"(",")",["T_WHITESPACE"," ",144],"*",["T_WHITESPACE"," ",144],["T_VARIABLE","$rate",144],";",["T_WHITESPACE","\n                        ",144],"}",["T_WHITESPACE"," ",145],["T_ELSE","else",145],["T_WHITESPACE"," ",145],"{",["T_WHITESPACE","\n                            ",145],["T_VARIABLE","$newPrice",146],["T_WHITESPACE"," ",146],"=",["T_WHITESPACE"," ",146],["T_VARIABLE","$object",146],["T_OBJECT_OPERATOR","->",146],["T_STRING","getPrice",146],"(",")",";",["T_WHITESPACE","\n                        ",146],"}",["T_WHITESPACE","\n\n                        ",147],["T_VARIABLE","$statement",149],["T_WHITESPACE"," ",149],"=",["T_WHITESPACE"," ",149],["T_VARIABLE","$readAdapter",149],["T_OBJECT_OPERATOR","->",149],["T_STRING","select",149],"(",")",["T_WHITESPACE","\n                            ",149],["T_OBJECT_OPERATOR","->",150],["T_STRING","from",150],"(",["T_VARIABLE","$priceTable",150],")",["T_WHITESPACE","\n                            ",150],["T_OBJECT_OPERATOR","->",151],["T_STRING","where",151],"(",["T_CONSTANT_ENCAPSED_STRING","'option_id = ?'",151],",",["T_WHITESPACE"," ",151],["T_VARIABLE","$object",151],["T_OBJECT_OPERATOR","->",151],["T_STRING","getId",151],"(",")",")",["T_WHITESPACE","\n                            ",151],["T_OBJECT_OPERATOR","->",152],["T_STRING","where",152],"(",["T_CONSTANT_ENCAPSED_STRING","'store_id  = ?'",152],",",["T_WHITESPACE"," ",152],["T_VARIABLE","$storeId",152],")",";",["T_WHITESPACE","\n\n                        ",152],["T_IF","if",154],["T_WHITESPACE"," ",154],"(",["T_VARIABLE","$readAdapter",154],["T_OBJECT_OPERATOR","->",154],["T_STRING","fetchOne",154],"(",["T_VARIABLE","$statement",154],")",")",["T_WHITESPACE"," ",154],"{",["T_WHITESPACE","\n                            ",154],["T_VARIABLE","$data",155],["T_WHITESPACE"," ",155],"=",["T_WHITESPACE"," ",155],["T_VARIABLE","$this",155],["T_OBJECT_OPERATOR","->",155],["T_STRING","_prepareDataForTable",155],"(",["T_WHITESPACE","\n                                ",155],["T_NEW","new",156],["T_WHITESPACE"," ",156],["T_STRING","Varien_Object",156],"(",["T_WHITESPACE","\n                                    ",156],["T_ARRAY","array",157],"(",["T_WHITESPACE","\n                                        ",157],["T_CONSTANT_ENCAPSED_STRING","'price'",158],["T_WHITESPACE","      ",158],["T_DOUBLE_ARROW","=>",158],["T_WHITESPACE"," ",158],["T_VARIABLE","$newPrice",158],",",["T_WHITESPACE","\n                                        ",158],["T_CONSTANT_ENCAPSED_STRING","'price_type'",159],["T_WHITESPACE"," ",159],["T_DOUBLE_ARROW","=>",159],["T_WHITESPACE"," ",159],["T_VARIABLE","$object",159],["T_OBJECT_OPERATOR","->",159],["T_STRING","getPriceType",159],"(",")",["T_WHITESPACE","\n                                    ",159],")",["T_WHITESPACE","\n                                ",160],")",",",["T_WHITESPACE","\n                                ",161],["T_VARIABLE","$priceTable",162],["T_WHITESPACE","\n                            ",162],")",";",["T_WHITESPACE","\n\n                            ",163],["T_VARIABLE","$writeAdapter",165],["T_OBJECT_OPERATOR","->",165],["T_STRING","update",165],"(",["T_WHITESPACE","\n                                ",165],["T_VARIABLE","$priceTable",166],",",["T_WHITESPACE","\n                                ",166],["T_VARIABLE","$data",167],",",["T_WHITESPACE","\n                                ",167],["T_ARRAY","array",168],"(",["T_WHITESPACE","\n                                    ",168],["T_CONSTANT_ENCAPSED_STRING","'option_id = ?'",169],["T_WHITESPACE"," ",169],["T_DOUBLE_ARROW","=>",169],["T_WHITESPACE"," ",169],["T_VARIABLE","$object",169],["T_OBJECT_OPERATOR","->",169],["T_STRING","getId",169],"(",")",",",["T_WHITESPACE","\n                                    ",169],["T_CONSTANT_ENCAPSED_STRING","'store_id  = ?'",170],["T_WHITESPACE"," ",170],["T_DOUBLE_ARROW","=>",170],["T_WHITESPACE"," ",170],["T_VARIABLE","$storeId",170],["T_WHITESPACE","\n                                ",170],")",["T_WHITESPACE","\n                            ",171],")",";",["T_WHITESPACE","\n                        ",172],"}",["T_WHITESPACE"," ",173],["T_ELSE","else",173],["T_WHITESPACE"," ",173],"{",["T_WHITESPACE","\n                            ",173],["T_VARIABLE","$data",174],["T_WHITESPACE"," ",174],"=",["T_WHITESPACE"," ",174],["T_VARIABLE","$this",174],["T_OBJECT_OPERATOR","->",174],["T_STRING","_prepareDataForTable",174],"(",["T_WHITESPACE","\n                                ",174],["T_NEW","new",175],["T_WHITESPACE"," ",175],["T_STRING","Varien_Object",175],"(",["T_WHITESPACE","\n                                    ",175],["T_ARRAY","array",176],"(",["T_WHITESPACE","\n                                        ",176],["T_CONSTANT_ENCAPSED_STRING","'option_id'",177],["T_WHITESPACE","  ",177],["T_DOUBLE_ARROW","=>",177],["T_WHITESPACE"," ",177],["T_VARIABLE","$object",177],["T_OBJECT_OPERATOR","->",177],["T_STRING","getId",177],"(",")",",",["T_WHITESPACE","\n                                        ",177],["T_CONSTANT_ENCAPSED_STRING","'store_id'",178],["T_WHITESPACE","   ",178],["T_DOUBLE_ARROW","=>",178],["T_WHITESPACE"," ",178],["T_VARIABLE","$storeId",178],",",["T_WHITESPACE","\n                                        ",178],["T_CONSTANT_ENCAPSED_STRING","'price'",179],["T_WHITESPACE","      ",179],["T_DOUBLE_ARROW","=>",179],["T_WHITESPACE"," ",179],["T_VARIABLE","$newPrice",179],",",["T_WHITESPACE","\n                                        ",179],["T_CONSTANT_ENCAPSED_STRING","'price_type'",180],["T_WHITESPACE"," ",180],["T_DOUBLE_ARROW","=>",180],["T_WHITESPACE"," ",180],["T_VARIABLE","$object",180],["T_OBJECT_OPERATOR","->",180],["T_STRING","getPriceType",180],"(",")",["T_WHITESPACE","\n                                    ",180],")",["T_WHITESPACE","\n                                ",181],")",",",["T_WHITESPACE","\n                                ",182],["T_VARIABLE","$priceTable",183],["T_WHITESPACE","\n                            ",183],")",";",["T_WHITESPACE","\n                            ",184],["T_VARIABLE","$writeAdapter",185],["T_OBJECT_OPERATOR","->",185],["T_STRING","insert",185],"(",["T_VARIABLE","$priceTable",185],",",["T_WHITESPACE"," ",185],["T_VARIABLE","$data",185],")",";",["T_WHITESPACE","\n                        ",185],"}",["T_WHITESPACE","\n                    ",186],"}",["T_COMMENT","\/\/ end foreach()\n",187],["T_WHITESPACE","                ",188],"}",["T_WHITESPACE","\n            ",188],"}",["T_WHITESPACE"," ",189],["T_ELSEIF","elseif",189],["T_WHITESPACE"," ",189],"(",["T_VARIABLE","$scope",189],["T_WHITESPACE"," ",189],["T_IS_EQUAL","==",189],["T_WHITESPACE"," ",189],["T_STRING","Mage_Core_Model_Store",189],["T_DOUBLE_COLON","::",189],["T_STRING","PRICE_SCOPE_WEBSITE",189],["T_WHITESPACE"," ",189],["T_BOOLEAN_AND","&&",189],["T_WHITESPACE"," ",189],["T_VARIABLE","$object",189],["T_OBJECT_OPERATOR","->",189],["T_STRING","getData",189],"(",["T_CONSTANT_ENCAPSED_STRING","'scope'",189],",",["T_WHITESPACE"," ",189],["T_CONSTANT_ENCAPSED_STRING","'price'",189],")",")",["T_WHITESPACE"," ",189],"{",["T_WHITESPACE","\n                ",189],["T_VARIABLE","$writeAdapter",190],["T_OBJECT_OPERATOR","->",190],["T_STRING","delete",190],"(",["T_WHITESPACE","\n                    ",190],["T_VARIABLE","$priceTable",191],",",["T_WHITESPACE","\n                    ",191],["T_ARRAY","array",192],"(",["T_WHITESPACE","\n                        ",192],["T_CONSTANT_ENCAPSED_STRING","'option_id = ?'",193],["T_WHITESPACE"," ",193],["T_DOUBLE_ARROW","=>",193],["T_WHITESPACE"," ",193],["T_VARIABLE","$object",193],["T_OBJECT_OPERATOR","->",193],["T_STRING","getId",193],"(",")",",",["T_WHITESPACE","\n                        ",193],["T_CONSTANT_ENCAPSED_STRING","'store_id  = ?'",194],["T_WHITESPACE"," ",194],["T_DOUBLE_ARROW","=>",194],["T_WHITESPACE"," ",194],["T_VARIABLE","$object",194],["T_OBJECT_OPERATOR","->",194],["T_STRING","getStoreId",194],"(",")",["T_WHITESPACE","\n                    ",194],")",["T_WHITESPACE","\n                ",195],")",";",["T_WHITESPACE","\n            ",196],"}",["T_WHITESPACE","\n        ",197],"}",["T_WHITESPACE","\n\n        ",198],["T_RETURN","return",200],["T_WHITESPACE"," ",200],["T_VARIABLE","$this",200],";",["T_WHITESPACE","\n    ",200],"}",["T_WHITESPACE","\n\n    ",201],["T_DOC_COMMENT","\/**\n     * Save titles\n     *\n     * @param Mage_Core_Model_Abstract $object\n     * @return Mage_Catalog_Model_Resource_Product_Option\n     *\/",203],["T_WHITESPACE","\n    ",208],["T_PROTECTED","protected",209],["T_WHITESPACE"," ",209],["T_FUNCTION","function",209],["T_WHITESPACE"," ",209],["T_STRING","_saveValueTitles",209],"(",["T_STRING","Mage_Core_Model_Abstract",209],["T_WHITESPACE"," ",209],["T_VARIABLE","$object",209],")",["T_WHITESPACE","\n    ",209],"{",["T_WHITESPACE","\n        ",210],["T_VARIABLE","$readAdapter",211],["T_WHITESPACE","  ",211],"=",["T_WHITESPACE"," ",211],["T_VARIABLE","$this",211],["T_OBJECT_OPERATOR","->",211],["T_STRING","_getReadAdapter",211],"(",")",";",["T_WHITESPACE","\n        ",211],["T_VARIABLE","$writeAdapter",212],["T_WHITESPACE"," ",212],"=",["T_WHITESPACE"," ",212],["T_VARIABLE","$this",212],["T_OBJECT_OPERATOR","->",212],["T_STRING","_getWriteAdapter",212],"(",")",";",["T_WHITESPACE","\n        ",212],["T_VARIABLE","$titleTable",213],["T_WHITESPACE"," ",213],"=",["T_WHITESPACE"," ",213],["T_VARIABLE","$this",213],["T_OBJECT_OPERATOR","->",213],["T_STRING","getTable",213],"(",["T_CONSTANT_ENCAPSED_STRING","'catalog\/product_option_title'",213],")",";",["T_WHITESPACE","\n\n        ",213],["T_COMMENT","\/\/title\n",215],["T_WHITESPACE","        ",216],["T_IF","if",216],["T_WHITESPACE"," ",216],"(","!",["T_VARIABLE","$object",216],["T_OBJECT_OPERATOR","->",216],["T_STRING","getData",216],"(",["T_CONSTANT_ENCAPSED_STRING","'scope'",216],",",["T_WHITESPACE"," ",216],["T_CONSTANT_ENCAPSED_STRING","'title'",216],")",")",["T_WHITESPACE"," ",216],"{",["T_WHITESPACE","\n            ",216],["T_VARIABLE","$statement",217],["T_WHITESPACE"," ",217],"=",["T_WHITESPACE"," ",217],["T_VARIABLE","$readAdapter",217],["T_OBJECT_OPERATOR","->",217],["T_STRING","select",217],"(",")",["T_WHITESPACE","\n                ",217],["T_OBJECT_OPERATOR","->",218],["T_STRING","from",218],"(",["T_VARIABLE","$titleTable",218],")",["T_WHITESPACE","\n                ",218],["T_OBJECT_OPERATOR","->",219],["T_STRING","where",219],"(",["T_CONSTANT_ENCAPSED_STRING","'option_id = ?'",219],",",["T_WHITESPACE"," ",219],["T_VARIABLE","$object",219],["T_OBJECT_OPERATOR","->",219],["T_STRING","getId",219],"(",")",")",["T_WHITESPACE","\n                ",219],["T_OBJECT_OPERATOR","->",220],["T_STRING","where",220],"(",["T_CONSTANT_ENCAPSED_STRING","'store_id  = ?'",220],",",["T_WHITESPACE"," ",220],["T_STRING","Mage_Catalog_Model_Abstract",220],["T_DOUBLE_COLON","::",220],["T_STRING","DEFAULT_STORE_ID",220],")",";",["T_WHITESPACE","\n\n            ",220],["T_IF","if",222],["T_WHITESPACE"," ",222],"(",["T_VARIABLE","$readAdapter",222],["T_OBJECT_OPERATOR","->",222],["T_STRING","fetchOne",222],"(",["T_VARIABLE","$statement",222],")",")",["T_WHITESPACE"," ",222],"{",["T_WHITESPACE","\n                ",222],["T_IF","if",223],["T_WHITESPACE"," ",223],"(",["T_VARIABLE","$object",223],["T_OBJECT_OPERATOR","->",223],["T_STRING","getStoreId",223],"(",")",["T_WHITESPACE"," ",223],["T_IS_EQUAL","==",223],["T_WHITESPACE"," ",223],["T_CONSTANT_ENCAPSED_STRING","'0'",223],")",["T_WHITESPACE"," ",223],"{",["T_WHITESPACE","\n                    ",223],["T_VARIABLE","$data",224],["T_WHITESPACE"," ",224],"=",["T_WHITESPACE"," ",224],["T_VARIABLE","$this",224],["T_OBJECT_OPERATOR","->",224],["T_STRING","_prepareDataForTable",224],"(",["T_WHITESPACE","\n                        ",224],["T_NEW","new",225],["T_WHITESPACE"," ",225],["T_STRING","Varien_Object",225],"(",["T_WHITESPACE","\n                            ",225],["T_ARRAY","array",226],"(",["T_WHITESPACE","\n                                ",226],["T_CONSTANT_ENCAPSED_STRING","'title'",227],["T_WHITESPACE"," ",227],["T_DOUBLE_ARROW","=>",227],["T_WHITESPACE"," ",227],["T_VARIABLE","$object",227],["T_OBJECT_OPERATOR","->",227],["T_STRING","getTitle",227],"(",")",["T_WHITESPACE","\n                            ",227],")",["T_WHITESPACE","\n                        ",228],")",",",["T_WHITESPACE","\n                        ",229],["T_VARIABLE","$titleTable",230],["T_WHITESPACE","\n                    ",230],")",";",["T_WHITESPACE","\n\n                    ",231],["T_VARIABLE","$writeAdapter",233],["T_OBJECT_OPERATOR","->",233],["T_STRING","update",233],"(",["T_WHITESPACE","\n                        ",233],["T_VARIABLE","$titleTable",234],",",["T_WHITESPACE","\n                        ",234],["T_VARIABLE","$data",235],",",["T_WHITESPACE","\n                        ",235],["T_ARRAY","array",236],"(",["T_WHITESPACE","\n                            ",236],["T_CONSTANT_ENCAPSED_STRING","'option_id = ?'",237],["T_WHITESPACE"," ",237],["T_DOUBLE_ARROW","=>",237],["T_WHITESPACE"," ",237],["T_VARIABLE","$object",237],["T_OBJECT_OPERATOR","->",237],["T_STRING","getId",237],"(",")",",",["T_WHITESPACE","\n                            ",237],["T_CONSTANT_ENCAPSED_STRING","'store_id  = ?'",238],["T_WHITESPACE"," ",238],["T_DOUBLE_ARROW","=>",238],["T_WHITESPACE"," ",238],["T_STRING","Mage_Catalog_Model_Abstract",238],["T_DOUBLE_COLON","::",238],["T_STRING","DEFAULT_STORE_ID",238],["T_WHITESPACE","\n                        ",238],")",["T_WHITESPACE","\n                    ",239],")",";",["T_WHITESPACE","\n                ",240],"}",["T_WHITESPACE","\n            ",241],"}",["T_WHITESPACE"," ",242],["T_ELSE","else",242],["T_WHITESPACE"," ",242],"{",["T_WHITESPACE","\n                ",242],["T_VARIABLE","$data",243],["T_WHITESPACE"," ",243],"=",["T_WHITESPACE"," ",243],["T_VARIABLE","$this",243],["T_OBJECT_OPERATOR","->",243],["T_STRING","_prepareDataForTable",243],"(",["T_WHITESPACE","\n                    ",243],["T_NEW","new",244],["T_WHITESPACE"," ",244],["T_STRING","Varien_Object",244],"(",["T_WHITESPACE","\n                        ",244],["T_ARRAY","array",245],"(",["T_WHITESPACE","\n                            ",245],["T_CONSTANT_ENCAPSED_STRING","'option_id'",246],["T_WHITESPACE"," ",246],["T_DOUBLE_ARROW","=>",246],["T_WHITESPACE"," ",246],["T_VARIABLE","$object",246],["T_OBJECT_OPERATOR","->",246],["T_STRING","getId",246],"(",")",",",["T_WHITESPACE","\n                            ",246],["T_CONSTANT_ENCAPSED_STRING","'store_id'",247],["T_WHITESPACE","  ",247],["T_DOUBLE_ARROW","=>",247],["T_WHITESPACE"," ",247],["T_STRING","Mage_Catalog_Model_Abstract",247],["T_DOUBLE_COLON","::",247],["T_STRING","DEFAULT_STORE_ID",247],",",["T_WHITESPACE","\n                            ",247],["T_CONSTANT_ENCAPSED_STRING","'title'",248],["T_WHITESPACE","     ",248],["T_DOUBLE_ARROW","=>",248],["T_WHITESPACE"," ",248],["T_VARIABLE","$object",248],["T_OBJECT_OPERATOR","->",248],["T_STRING","getTitle",248],"(",")",["T_WHITESPACE","\n                        ",248],")",["T_WHITESPACE","\n                    ",249],")",",",["T_WHITESPACE","\n                    ",250],["T_VARIABLE","$titleTable",251],["T_WHITESPACE","\n                ",251],")",";",["T_WHITESPACE","\n\n                ",252],["T_VARIABLE","$writeAdapter",254],["T_OBJECT_OPERATOR","->",254],["T_STRING","insert",254],"(",["T_VARIABLE","$titleTable",254],",",["T_WHITESPACE"," ",254],["T_VARIABLE","$data",254],")",";",["T_WHITESPACE","\n            ",254],"}",["T_WHITESPACE","\n        ",255],"}",["T_WHITESPACE","\n\n        ",256],["T_IF","if",258],["T_WHITESPACE"," ",258],"(",["T_VARIABLE","$object",258],["T_OBJECT_OPERATOR","->",258],["T_STRING","getStoreId",258],"(",")",["T_WHITESPACE"," ",258],["T_IS_NOT_EQUAL","!=",258],["T_WHITESPACE"," ",258],["T_CONSTANT_ENCAPSED_STRING","'0'",258],["T_WHITESPACE"," ",258],["T_BOOLEAN_AND","&&",258],["T_WHITESPACE"," ",258],"!",["T_VARIABLE","$object",258],["T_OBJECT_OPERATOR","->",258],["T_STRING","getData",258],"(",["T_CONSTANT_ENCAPSED_STRING","'scope'",258],",",["T_WHITESPACE"," ",258],["T_CONSTANT_ENCAPSED_STRING","'title'",258],")",")",["T_WHITESPACE"," ",258],"{",["T_WHITESPACE","\n            ",258],["T_VARIABLE","$statement",259],["T_WHITESPACE"," ",259],"=",["T_WHITESPACE"," ",259],["T_VARIABLE","$readAdapter",259],["T_OBJECT_OPERATOR","->",259],["T_STRING","select",259],"(",")",["T_WHITESPACE","\n                ",259],["T_OBJECT_OPERATOR","->",260],["T_STRING","from",260],"(",["T_VARIABLE","$titleTable",260],")",["T_WHITESPACE","\n                ",260],["T_OBJECT_OPERATOR","->",261],["T_STRING","where",261],"(",["T_CONSTANT_ENCAPSED_STRING","'option_id = ?'",261],",",["T_WHITESPACE"," ",261],["T_VARIABLE","$object",261],["T_OBJECT_OPERATOR","->",261],["T_STRING","getId",261],"(",")",")",["T_WHITESPACE","\n                ",261],["T_OBJECT_OPERATOR","->",262],["T_STRING","where",262],"(",["T_CONSTANT_ENCAPSED_STRING","'store_id  = ?'",262],",",["T_WHITESPACE"," ",262],["T_VARIABLE","$object",262],["T_OBJECT_OPERATOR","->",262],["T_STRING","getStoreId",262],"(",")",")",";",["T_WHITESPACE","\n\n            ",262],["T_IF","if",264],["T_WHITESPACE"," ",264],"(",["T_VARIABLE","$readAdapter",264],["T_OBJECT_OPERATOR","->",264],["T_STRING","fetchOne",264],"(",["T_VARIABLE","$statement",264],")",")",["T_WHITESPACE"," ",264],"{",["T_WHITESPACE","\n                ",264],["T_VARIABLE","$data",265],["T_WHITESPACE"," ",265],"=",["T_WHITESPACE"," ",265],["T_VARIABLE","$this",265],["T_OBJECT_OPERATOR","->",265],["T_STRING","_prepareDataForTable",265],"(",["T_WHITESPACE","\n                    ",265],["T_NEW","new",266],["T_WHITESPACE"," ",266],["T_STRING","Varien_Object",266],"(",["T_WHITESPACE","\n                        ",266],["T_ARRAY","array",267],"(",["T_WHITESPACE","\n                            ",267],["T_CONSTANT_ENCAPSED_STRING","'title'",268],["T_WHITESPACE"," ",268],["T_DOUBLE_ARROW","=>",268],["T_WHITESPACE"," ",268],["T_VARIABLE","$object",268],["T_OBJECT_OPERATOR","->",268],["T_STRING","getTitle",268],"(",")",["T_WHITESPACE","\n                        ",268],")",["T_WHITESPACE","\n                    ",269],")",",",["T_WHITESPACE","\n                    ",270],["T_VARIABLE","$titleTable",271],["T_WHITESPACE","\n                ",271],")",";",["T_WHITESPACE","\n\n                ",272],["T_VARIABLE","$writeAdapter",274],["T_OBJECT_OPERATOR","->",274],["T_STRING","update",274],"(",["T_WHITESPACE","\n                    ",274],["T_VARIABLE","$titleTable",275],",",["T_WHITESPACE","\n                    ",275],["T_VARIABLE","$data",276],",",["T_WHITESPACE","\n                    ",276],["T_ARRAY","array",277],"(",["T_WHITESPACE","\n                        ",277],["T_CONSTANT_ENCAPSED_STRING","'option_id = ?'",278],["T_WHITESPACE"," ",278],["T_DOUBLE_ARROW","=>",278],["T_WHITESPACE"," ",278],["T_VARIABLE","$object",278],["T_OBJECT_OPERATOR","->",278],["T_STRING","getId",278],"(",")",",",["T_WHITESPACE","\n                        ",278],["T_CONSTANT_ENCAPSED_STRING","'store_id  = ?'",279],["T_WHITESPACE"," ",279],["T_DOUBLE_ARROW","=>",279],["T_WHITESPACE"," ",279],["T_VARIABLE","$object",279],["T_OBJECT_OPERATOR","->",279],["T_STRING","getStoreId",279],"(",")",["T_WHITESPACE","\n                    ",279],")",["T_WHITESPACE","\n                ",280],")",";",["T_WHITESPACE","\n            ",281],"}",["T_WHITESPACE"," ",282],["T_ELSE","else",282],["T_WHITESPACE"," ",282],"{",["T_WHITESPACE","\n                ",282],["T_VARIABLE","$data",283],["T_WHITESPACE"," ",283],"=",["T_WHITESPACE"," ",283],["T_VARIABLE","$this",283],["T_OBJECT_OPERATOR","->",283],["T_STRING","_prepareDataForTable",283],"(",["T_WHITESPACE","\n                    ",283],["T_NEW","new",284],["T_WHITESPACE"," ",284],["T_STRING","Varien_Object",284],"(",["T_WHITESPACE","\n                        ",284],["T_ARRAY","array",285],"(",["T_WHITESPACE","\n                            ",285],["T_CONSTANT_ENCAPSED_STRING","'option_id'",286],["T_WHITESPACE"," ",286],["T_DOUBLE_ARROW","=>",286],["T_WHITESPACE"," ",286],["T_VARIABLE","$object",286],["T_OBJECT_OPERATOR","->",286],["T_STRING","getId",286],"(",")",",",["T_WHITESPACE","\n                            ",286],["T_CONSTANT_ENCAPSED_STRING","'store_id'",287],["T_WHITESPACE","  ",287],["T_DOUBLE_ARROW","=>",287],["T_WHITESPACE"," ",287],["T_VARIABLE","$object",287],["T_OBJECT_OPERATOR","->",287],["T_STRING","getStoreId",287],"(",")",",",["T_WHITESPACE","\n                            ",287],["T_CONSTANT_ENCAPSED_STRING","'title'",288],["T_WHITESPACE","     ",288],["T_DOUBLE_ARROW","=>",288],["T_WHITESPACE"," ",288],["T_VARIABLE","$object",288],["T_OBJECT_OPERATOR","->",288],["T_STRING","getTitle",288],"(",")",["T_WHITESPACE","\n                        ",288],")",["T_WHITESPACE","\n                    ",289],")",",",["T_WHITESPACE","\n                    ",290],["T_VARIABLE","$titleTable",291],["T_WHITESPACE","\n                ",291],")",";",["T_WHITESPACE","\n                ",292],["T_VARIABLE","$writeAdapter",293],["T_OBJECT_OPERATOR","->",293],["T_STRING","insert",293],"(",["T_VARIABLE","$titleTable",293],",",["T_WHITESPACE"," ",293],["T_VARIABLE","$data",293],")",";",["T_WHITESPACE","\n            ",293],"}",["T_WHITESPACE","\n        ",294],"}",["T_WHITESPACE"," ",295],["T_ELSEIF","elseif",295],["T_WHITESPACE"," ",295],"(",["T_VARIABLE","$object",295],["T_OBJECT_OPERATOR","->",295],["T_STRING","getData",295],"(",["T_CONSTANT_ENCAPSED_STRING","'scope'",295],",",["T_WHITESPACE"," ",295],["T_CONSTANT_ENCAPSED_STRING","'title'",295],")",")",["T_WHITESPACE"," ",295],"{",["T_WHITESPACE","\n            ",295],["T_VARIABLE","$writeAdapter",296],["T_OBJECT_OPERATOR","->",296],["T_STRING","delete",296],"(",["T_WHITESPACE","\n                ",296],["T_VARIABLE","$titleTable",297],",",["T_WHITESPACE","\n                ",297],["T_ARRAY","array",298],"(",["T_WHITESPACE","\n                    ",298],["T_CONSTANT_ENCAPSED_STRING","'option_id = ?'",299],["T_WHITESPACE"," ",299],["T_DOUBLE_ARROW","=>",299],["T_WHITESPACE"," ",299],["T_VARIABLE","$object",299],["T_OBJECT_OPERATOR","->",299],["T_STRING","getId",299],"(",")",",",["T_WHITESPACE","\n                    ",299],["T_CONSTANT_ENCAPSED_STRING","'store_id  = ?'",300],["T_WHITESPACE"," ",300],["T_DOUBLE_ARROW","=>",300],["T_WHITESPACE"," ",300],["T_VARIABLE","$object",300],["T_OBJECT_OPERATOR","->",300],["T_STRING","getStoreId",300],"(",")",["T_WHITESPACE","\n                ",300],")",["T_WHITESPACE","\n            ",301],")",";",["T_WHITESPACE","\n        ",302],"}",["T_WHITESPACE","\n    ",303],"}",["T_WHITESPACE","\n\n    ",304],["T_DOC_COMMENT","\/**\n     * Delete prices\n     *\n     * @param int $optionId\n     * @return Mage_Catalog_Model_Resource_Product_Option\n     *\/",306],["T_WHITESPACE","\n    ",311],["T_PUBLIC","public",312],["T_WHITESPACE"," ",312],["T_FUNCTION","function",312],["T_WHITESPACE"," ",312],["T_STRING","deletePrices",312],"(",["T_VARIABLE","$optionId",312],")",["T_WHITESPACE","\n    ",312],"{",["T_WHITESPACE","\n        ",313],["T_VARIABLE","$this",314],["T_OBJECT_OPERATOR","->",314],["T_STRING","_getWriteAdapter",314],"(",")",["T_OBJECT_OPERATOR","->",314],["T_STRING","delete",314],"(",["T_WHITESPACE","\n            ",314],["T_VARIABLE","$this",315],["T_OBJECT_OPERATOR","->",315],["T_STRING","getTable",315],"(",["T_CONSTANT_ENCAPSED_STRING","'catalog\/product_option_price'",315],")",",",["T_WHITESPACE","\n            ",315],["T_ARRAY","array",316],"(",["T_WHITESPACE","\n                ",316],["T_CONSTANT_ENCAPSED_STRING","'option_id = ?'",317],["T_WHITESPACE"," ",317],["T_DOUBLE_ARROW","=>",317],["T_WHITESPACE"," ",317],["T_VARIABLE","$optionId",317],["T_WHITESPACE","\n            ",317],")",["T_WHITESPACE","\n        ",318],")",";",["T_WHITESPACE","\n\n        ",319],["T_RETURN","return",321],["T_WHITESPACE"," ",321],["T_VARIABLE","$this",321],";",["T_WHITESPACE","\n    ",321],"}",["T_WHITESPACE","\n\n    ",322],["T_DOC_COMMENT","\/**\n     * Delete titles\n     *\n     * @param int $optionId\n     * @return Mage_Catalog_Model_Resource_Product_Option\n     *\/",324],["T_WHITESPACE","\n    ",329],["T_PUBLIC","public",330],["T_WHITESPACE"," ",330],["T_FUNCTION","function",330],["T_WHITESPACE"," ",330],["T_STRING","deleteTitles",330],"(",["T_VARIABLE","$optionId",330],")",["T_WHITESPACE","\n    ",330],"{",["T_WHITESPACE","\n        ",331],["T_VARIABLE","$this",332],["T_OBJECT_OPERATOR","->",332],["T_STRING","_getWriteAdapter",332],"(",")",["T_OBJECT_OPERATOR","->",332],["T_STRING","delete",332],"(",["T_WHITESPACE","\n            ",332],["T_VARIABLE","$this",333],["T_OBJECT_OPERATOR","->",333],["T_STRING","getTable",333],"(",["T_CONSTANT_ENCAPSED_STRING","'catalog\/product_option_title'",333],")",",",["T_WHITESPACE","\n            ",333],["T_ARRAY","array",334],"(",["T_WHITESPACE","\n                ",334],["T_CONSTANT_ENCAPSED_STRING","'option_id = ?'",335],["T_WHITESPACE"," ",335],["T_DOUBLE_ARROW","=>",335],["T_WHITESPACE"," ",335],["T_VARIABLE","$optionId",335],["T_WHITESPACE","\n            ",335],")",["T_WHITESPACE","\n        ",336],")",";",["T_WHITESPACE","\n\n        ",337],["T_RETURN","return",339],["T_WHITESPACE"," ",339],["T_VARIABLE","$this",339],";",["T_WHITESPACE","\n    ",339],"}",["T_WHITESPACE","\n\n    ",340],["T_DOC_COMMENT","\/**\n     * Duplicate custom options for product\n     *\n     * @param Mage_Catalog_Model_Product_Option $object\n     * @param int $oldProductId\n     * @param int $newProductId\n     * @return Mage_Catalog_Model_Product_Option\n     *\/",342],["T_WHITESPACE","\n    ",349],["T_PUBLIC","public",350],["T_WHITESPACE"," ",350],["T_FUNCTION","function",350],["T_WHITESPACE"," ",350],["T_STRING","duplicate",350],"(",["T_STRING","Mage_Catalog_Model_Product_Option",350],["T_WHITESPACE"," ",350],["T_VARIABLE","$object",350],",",["T_WHITESPACE"," ",350],["T_VARIABLE","$oldProductId",350],",",["T_WHITESPACE"," ",350],["T_VARIABLE","$newProductId",350],")",["T_WHITESPACE","\n    ",350],"{",["T_WHITESPACE","\n        ",351],["T_VARIABLE","$write",352],["T_WHITESPACE","  ",352],"=",["T_WHITESPACE"," ",352],["T_VARIABLE","$this",352],["T_OBJECT_OPERATOR","->",352],["T_STRING","_getWriteAdapter",352],"(",")",";",["T_WHITESPACE","\n        ",352],["T_VARIABLE","$read",353],["T_WHITESPACE","   ",353],"=",["T_WHITESPACE"," ",353],["T_VARIABLE","$this",353],["T_OBJECT_OPERATOR","->",353],["T_STRING","_getReadAdapter",353],"(",")",";",["T_WHITESPACE","\n\n        ",353],["T_VARIABLE","$optionsCond",355],["T_WHITESPACE"," ",355],"=",["T_WHITESPACE"," ",355],["T_ARRAY","array",355],"(",")",";",["T_WHITESPACE","\n        ",355],["T_VARIABLE","$optionsData",356],["T_WHITESPACE"," ",356],"=",["T_WHITESPACE"," ",356],["T_ARRAY","array",356],"(",")",";",["T_WHITESPACE","\n\n        ",356],["T_COMMENT","\/\/ read and prepare original product options\n",358],["T_WHITESPACE","        ",359],["T_VARIABLE","$select",359],["T_WHITESPACE"," ",359],"=",["T_WHITESPACE"," ",359],["T_VARIABLE","$read",359],["T_OBJECT_OPERATOR","->",359],["T_STRING","select",359],"(",")",["T_WHITESPACE","\n            ",359],["T_OBJECT_OPERATOR","->",360],["T_STRING","from",360],"(",["T_VARIABLE","$this",360],["T_OBJECT_OPERATOR","->",360],["T_STRING","getTable",360],"(",["T_CONSTANT_ENCAPSED_STRING","'catalog\/product_option'",360],")",")",["T_WHITESPACE","\n            ",360],["T_OBJECT_OPERATOR","->",361],["T_STRING","where",361],"(",["T_CONSTANT_ENCAPSED_STRING","'product_id = ?'",361],",",["T_WHITESPACE"," ",361],["T_VARIABLE","$oldProductId",361],")",";",["T_WHITESPACE","\n\n        ",361],["T_VARIABLE","$query",363],["T_WHITESPACE"," ",363],"=",["T_WHITESPACE"," ",363],["T_VARIABLE","$read",363],["T_OBJECT_OPERATOR","->",363],["T_STRING","query",363],"(",["T_VARIABLE","$select",363],")",";",["T_WHITESPACE","\n\n        ",363],["T_WHILE","while",365],["T_WHITESPACE"," ",365],"(",["T_VARIABLE","$row",365],["T_WHITESPACE"," ",365],"=",["T_WHITESPACE"," ",365],["T_VARIABLE","$query",365],["T_OBJECT_OPERATOR","->",365],["T_STRING","fetch",365],"(",")",")",["T_WHITESPACE"," ",365],"{",["T_WHITESPACE","\n            ",365],["T_VARIABLE","$optionsData",366],"[",["T_VARIABLE","$row",366],"[",["T_CONSTANT_ENCAPSED_STRING","'option_id'",366],"]","]",["T_WHITESPACE"," ",366],"=",["T_WHITESPACE"," ",366],["T_VARIABLE","$row",366],";",["T_WHITESPACE","\n            ",366],["T_VARIABLE","$optionsData",367],"[",["T_VARIABLE","$row",367],"[",["T_CONSTANT_ENCAPSED_STRING","'option_id'",367],"]","]","[",["T_CONSTANT_ENCAPSED_STRING","'product_id'",367],"]",["T_WHITESPACE"," ",367],"=",["T_WHITESPACE"," ",367],["T_VARIABLE","$newProductId",367],";",["T_WHITESPACE","\n            ",367],["T_UNSET","unset",368],"(",["T_VARIABLE","$optionsData",368],"[",["T_VARIABLE","$row",368],"[",["T_CONSTANT_ENCAPSED_STRING","'option_id'",368],"]","]","[",["T_CONSTANT_ENCAPSED_STRING","'option_id'",368],"]",")",";",["T_WHITESPACE","\n        ",368],"}",["T_WHITESPACE","\n\n        ",369],["T_COMMENT","\/\/ insert options to duplicated product\n",371],["T_WHITESPACE","        ",372],["T_FOREACH","foreach",372],["T_WHITESPACE"," ",372],"(",["T_VARIABLE","$optionsData",372],["T_WHITESPACE"," ",372],["T_AS","as",372],["T_WHITESPACE"," ",372],["T_VARIABLE","$oId",372],["T_WHITESPACE"," ",372],["T_DOUBLE_ARROW","=>",372],["T_WHITESPACE"," ",372],["T_VARIABLE","$data",372],")",["T_WHITESPACE"," ",372],"{",["T_WHITESPACE","\n            ",372],["T_VARIABLE","$write",373],["T_OBJECT_OPERATOR","->",373],["T_STRING","insert",373],"(",["T_VARIABLE","$this",373],["T_OBJECT_OPERATOR","->",373],["T_STRING","getMainTable",373],"(",")",",",["T_WHITESPACE"," ",373],["T_VARIABLE","$data",373],")",";",["T_WHITESPACE","\n            ",373],["T_VARIABLE","$optionsCond",374],"[",["T_VARIABLE","$oId",374],"]",["T_WHITESPACE"," ",374],"=",["T_WHITESPACE"," ",374],["T_VARIABLE","$write",374],["T_OBJECT_OPERATOR","->",374],["T_STRING","lastInsertId",374],"(",["T_VARIABLE","$this",374],["T_OBJECT_OPERATOR","->",374],["T_STRING","getMainTable",374],"(",")",")",";",["T_WHITESPACE","\n        ",374],"}",["T_WHITESPACE","\n\n        ",375],["T_COMMENT","\/\/ copy options prefs\n",377],["T_WHITESPACE","        ",378],["T_FOREACH","foreach",378],["T_WHITESPACE"," ",378],"(",["T_VARIABLE","$optionsCond",378],["T_WHITESPACE"," ",378],["T_AS","as",378],["T_WHITESPACE"," ",378],["T_VARIABLE","$oldOptionId",378],["T_WHITESPACE"," ",378],["T_DOUBLE_ARROW","=>",378],["T_WHITESPACE"," ",378],["T_VARIABLE","$newOptionId",378],")",["T_WHITESPACE"," ",378],"{",["T_WHITESPACE","\n            ",378],["T_COMMENT","\/\/ title\n",379],["T_WHITESPACE","            ",380],["T_VARIABLE","$table",380],["T_WHITESPACE"," ",380],"=",["T_WHITESPACE"," ",380],["T_VARIABLE","$this",380],["T_OBJECT_OPERATOR","->",380],["T_STRING","getTable",380],"(",["T_CONSTANT_ENCAPSED_STRING","'catalog\/product_option_title'",380],")",";",["T_WHITESPACE","\n\n            ",380],["T_VARIABLE","$select",382],["T_WHITESPACE"," ",382],"=",["T_WHITESPACE"," ",382],["T_VARIABLE","$this",382],["T_OBJECT_OPERATOR","->",382],["T_STRING","_getReadAdapter",382],"(",")",["T_OBJECT_OPERATOR","->",382],["T_STRING","select",382],"(",")",["T_WHITESPACE","\n                ",382],["T_OBJECT_OPERATOR","->",383],["T_STRING","from",383],"(",["T_VARIABLE","$table",383],",",["T_WHITESPACE"," ",383],["T_ARRAY","array",383],"(",["T_NEW","new",383],["T_WHITESPACE"," ",383],["T_STRING","Zend_Db_Expr",383],"(",["T_VARIABLE","$newOptionId",383],")",",",["T_WHITESPACE"," ",383],["T_CONSTANT_ENCAPSED_STRING","'store_id'",383],",",["T_WHITESPACE"," ",383],["T_CONSTANT_ENCAPSED_STRING","'title'",383],")",")",["T_WHITESPACE","\n                ",383],["T_OBJECT_OPERATOR","->",384],["T_STRING","where",384],"(",["T_CONSTANT_ENCAPSED_STRING","'option_id = ?'",384],",",["T_WHITESPACE"," ",384],["T_VARIABLE","$oldOptionId",384],")",";",["T_WHITESPACE","\n\n            ",384],["T_VARIABLE","$insertSelect",386],["T_WHITESPACE"," ",386],"=",["T_WHITESPACE"," ",386],["T_VARIABLE","$write",386],["T_OBJECT_OPERATOR","->",386],["T_STRING","insertFromSelect",386],"(",["T_WHITESPACE","\n                ",386],["T_VARIABLE","$select",387],",",["T_WHITESPACE","\n                ",387],["T_VARIABLE","$table",388],",",["T_WHITESPACE","\n                ",388],["T_ARRAY","array",389],"(",["T_CONSTANT_ENCAPSED_STRING","'option_id'",389],",",["T_WHITESPACE"," ",389],["T_CONSTANT_ENCAPSED_STRING","'store_id'",389],",",["T_WHITESPACE"," ",389],["T_CONSTANT_ENCAPSED_STRING","'title'",389],")",",",["T_WHITESPACE","\n                ",389],["T_STRING","Varien_Db_Adapter_Interface",390],["T_DOUBLE_COLON","::",390],["T_STRING","INSERT_ON_DUPLICATE",390],["T_WHITESPACE","\n            ",390],")",";",["T_WHITESPACE","\n            ",391],["T_VARIABLE","$write",392],["T_OBJECT_OPERATOR","->",392],["T_STRING","query",392],"(",["T_VARIABLE","$insertSelect",392],")",";",["T_WHITESPACE","\n\n            ",392],["T_COMMENT","\/\/ price\n",394],["T_WHITESPACE","            ",395],["T_VARIABLE","$table",395],["T_WHITESPACE"," ",395],"=",["T_WHITESPACE"," ",395],["T_VARIABLE","$this",395],["T_OBJECT_OPERATOR","->",395],["T_STRING","getTable",395],"(",["T_CONSTANT_ENCAPSED_STRING","'catalog\/product_option_price'",395],")",";",["T_WHITESPACE","\n\n            ",395],["T_VARIABLE","$select",397],["T_WHITESPACE"," ",397],"=",["T_WHITESPACE"," ",397],["T_VARIABLE","$read",397],["T_OBJECT_OPERATOR","->",397],["T_STRING","select",397],"(",")",["T_WHITESPACE","\n                ",397],["T_OBJECT_OPERATOR","->",398],["T_STRING","from",398],"(",["T_VARIABLE","$table",398],",",["T_WHITESPACE"," ",398],["T_ARRAY","array",398],"(",["T_NEW","new",398],["T_WHITESPACE"," ",398],["T_STRING","Zend_Db_Expr",398],"(",["T_VARIABLE","$newOptionId",398],")",",",["T_WHITESPACE"," ",398],["T_CONSTANT_ENCAPSED_STRING","'store_id'",398],",",["T_WHITESPACE"," ",398],["T_CONSTANT_ENCAPSED_STRING","'price'",398],",",["T_WHITESPACE"," ",398],["T_CONSTANT_ENCAPSED_STRING","'price_type'",398],")",")",["T_WHITESPACE","\n                ",398],["T_OBJECT_OPERATOR","->",399],["T_STRING","where",399],"(",["T_CONSTANT_ENCAPSED_STRING","'option_id = ?'",399],",",["T_WHITESPACE"," ",399],["T_VARIABLE","$oldOptionId",399],")",";",["T_WHITESPACE","\n\n            ",399],["T_VARIABLE","$insertSelect",401],["T_WHITESPACE"," ",401],"=",["T_WHITESPACE"," ",401],["T_VARIABLE","$write",401],["T_OBJECT_OPERATOR","->",401],["T_STRING","insertFromSelect",401],"(",["T_WHITESPACE","\n                ",401],["T_VARIABLE","$select",402],",",["T_WHITESPACE"," ",402],["T_VARIABLE","$table",402],",",["T_WHITESPACE","\n                ",402],["T_ARRAY","array",403],"(",["T_WHITESPACE","\n                    ",403],["T_CONSTANT_ENCAPSED_STRING","'option_id'",404],",",["T_WHITESPACE","\n                    ",404],["T_CONSTANT_ENCAPSED_STRING","'store_id'",405],",",["T_WHITESPACE","\n                    ",405],["T_CONSTANT_ENCAPSED_STRING","'price'",406],",",["T_WHITESPACE","\n                    ",406],["T_CONSTANT_ENCAPSED_STRING","'price_type'",407],["T_WHITESPACE","\n                ",407],")",",",["T_WHITESPACE","\n                ",408],["T_STRING","Varien_Db_Adapter_Interface",409],["T_DOUBLE_COLON","::",409],["T_STRING","INSERT_ON_DUPLICATE",409],["T_WHITESPACE","\n            ",409],")",";",["T_WHITESPACE","\n            ",410],["T_VARIABLE","$write",411],["T_OBJECT_OPERATOR","->",411],["T_STRING","query",411],"(",["T_VARIABLE","$insertSelect",411],")",";",["T_WHITESPACE","\n\n            ",411],["T_VARIABLE","$object",413],["T_OBJECT_OPERATOR","->",413],["T_STRING","getValueInstance",413],"(",")",["T_OBJECT_OPERATOR","->",413],["T_STRING","duplicate",413],"(",["T_VARIABLE","$oldOptionId",413],",",["T_WHITESPACE"," ",413],["T_VARIABLE","$newOptionId",413],")",";",["T_WHITESPACE","\n        ",413],"}",["T_WHITESPACE","\n\n        ",414],["T_RETURN","return",416],["T_WHITESPACE"," ",416],["T_VARIABLE","$object",416],";",["T_WHITESPACE","\n    ",416],"}",["T_WHITESPACE","\n\n    ",417],["T_DOC_COMMENT","\/**\n     * Retrieve option searchable data\n     *\n     * @param int $productId\n     * @param int $storeId\n     * @return array\n     *\/",419],["T_WHITESPACE","\n    ",425],["T_PUBLIC","public",426],["T_WHITESPACE"," ",426],["T_FUNCTION","function",426],["T_WHITESPACE"," ",426],["T_STRING","getSearchableData",426],"(",["T_VARIABLE","$productId",426],",",["T_WHITESPACE"," ",426],["T_VARIABLE","$storeId",426],")",["T_WHITESPACE","\n    ",426],"{",["T_WHITESPACE","\n        ",427],["T_VARIABLE","$searchData",428],["T_WHITESPACE"," ",428],"=",["T_WHITESPACE"," ",428],["T_ARRAY","array",428],"(",")",";",["T_WHITESPACE","\n\n        ",428],["T_VARIABLE","$adapter",430],["T_WHITESPACE"," ",430],"=",["T_WHITESPACE"," ",430],["T_VARIABLE","$this",430],["T_OBJECT_OPERATOR","->",430],["T_STRING","_getReadAdapter",430],"(",")",";",["T_WHITESPACE","\n\n        ",430],["T_VARIABLE","$titleCheckSql",432],["T_WHITESPACE"," ",432],"=",["T_WHITESPACE"," ",432],["T_VARIABLE","$adapter",432],["T_OBJECT_OPERATOR","->",432],["T_STRING","getCheckSql",432],"(",["T_WHITESPACE","\n            ",432],["T_CONSTANT_ENCAPSED_STRING","'option_title_store.title IS NULL'",433],",",["T_WHITESPACE","\n            ",433],["T_CONSTANT_ENCAPSED_STRING","'option_title_default.title'",434],",",["T_WHITESPACE","\n            ",434],["T_CONSTANT_ENCAPSED_STRING","'option_title_store.title'",435],["T_WHITESPACE","\n        ",435],")",";",["T_WHITESPACE","\n\n\n        ",436],["T_COMMENT","\/\/ retrieve options title\n",439],["T_WHITESPACE","\n        ",440],["T_VARIABLE","$defaultOptionJoin",441],["T_WHITESPACE"," ",441],"=",["T_WHITESPACE"," ",441],["T_STRING","implode",441],"(",["T_WHITESPACE","\n            ",441],["T_CONSTANT_ENCAPSED_STRING","' AND '",442],",",["T_WHITESPACE","\n            ",442],["T_ARRAY","array",443],"(",["T_CONSTANT_ENCAPSED_STRING","'option_title_default.option_id=product_option.option_id'",443],",",["T_WHITESPACE","\n            ",443],["T_VARIABLE","$adapter",444],["T_OBJECT_OPERATOR","->",444],["T_STRING","quoteInto",444],"(",["T_CONSTANT_ENCAPSED_STRING","'option_title_default.store_id = ?'",444],",",["T_WHITESPACE"," ",444],["T_STRING","Mage_Catalog_Model_Abstract",444],["T_DOUBLE_COLON","::",444],["T_STRING","DEFAULT_STORE_ID",444],")",")",["T_WHITESPACE","\n        ",444],")",";",["T_WHITESPACE","\n\n        ",445],["T_VARIABLE","$storeOptionJoin",447],["T_WHITESPACE"," ",447],"=",["T_WHITESPACE"," ",447],["T_STRING","implode",447],"(",["T_WHITESPACE","\n            ",447],["T_CONSTANT_ENCAPSED_STRING","' AND '",448],",",["T_WHITESPACE","\n            ",448],["T_ARRAY","array",449],"(",["T_WHITESPACE","\n                ",449],["T_CONSTANT_ENCAPSED_STRING","'option_title_store.option_id=product_option.option_id'",450],",",["T_WHITESPACE","\n                ",450],["T_VARIABLE","$adapter",451],["T_OBJECT_OPERATOR","->",451],["T_STRING","quoteInto",451],"(",["T_CONSTANT_ENCAPSED_STRING","'option_title_store.store_id = ?'",451],",",["T_WHITESPACE"," ",451],["T_INT_CAST","(int)",451],["T_WHITESPACE"," ",451],["T_VARIABLE","$storeId",451],")",")",["T_WHITESPACE","\n        ",451],")",";",["T_WHITESPACE","\n\n        ",452],["T_VARIABLE","$select",454],["T_WHITESPACE"," ",454],"=",["T_WHITESPACE"," ",454],["T_VARIABLE","$adapter",454],["T_OBJECT_OPERATOR","->",454],["T_STRING","select",454],"(",")",["T_WHITESPACE","\n            ",454],["T_OBJECT_OPERATOR","->",455],["T_STRING","from",455],"(",["T_ARRAY","array",455],"(",["T_CONSTANT_ENCAPSED_STRING","'product_option'",455],["T_WHITESPACE"," ",455],["T_DOUBLE_ARROW","=>",455],["T_WHITESPACE"," ",455],["T_VARIABLE","$this",455],["T_OBJECT_OPERATOR","->",455],["T_STRING","getMainTable",455],"(",")",")",",",["T_WHITESPACE"," ",455],["T_STRING","null",455],")",["T_WHITESPACE","\n            ",455],["T_OBJECT_OPERATOR","->",456],["T_STRING","join",456],"(",["T_WHITESPACE","\n                ",456],["T_ARRAY","array",457],"(",["T_CONSTANT_ENCAPSED_STRING","'option_title_default'",457],["T_WHITESPACE"," ",457],["T_DOUBLE_ARROW","=>",457],["T_WHITESPACE"," ",457],["T_VARIABLE","$this",457],["T_OBJECT_OPERATOR","->",457],["T_STRING","getTable",457],"(",["T_CONSTANT_ENCAPSED_STRING","'catalog\/product_option_title'",457],")",")",",",["T_WHITESPACE","\n                ",457],["T_VARIABLE","$defaultOptionJoin",458],",",["T_WHITESPACE","\n                ",458],["T_ARRAY","array",459],"(",")",["T_WHITESPACE","\n            ",459],")",["T_WHITESPACE","\n            ",460],["T_OBJECT_OPERATOR","->",461],["T_STRING","joinLeft",461],"(",["T_WHITESPACE","\n                ",461],["T_ARRAY","array",462],"(",["T_CONSTANT_ENCAPSED_STRING","'option_title_store'",462],["T_WHITESPACE"," ",462],["T_DOUBLE_ARROW","=>",462],["T_WHITESPACE"," ",462],["T_VARIABLE","$this",462],["T_OBJECT_OPERATOR","->",462],["T_STRING","getTable",462],"(",["T_CONSTANT_ENCAPSED_STRING","'catalog\/product_option_title'",462],")",")",",",["T_WHITESPACE","\n                ",462],["T_VARIABLE","$storeOptionJoin",463],",",["T_WHITESPACE","\n                ",463],["T_ARRAY","array",464],"(",["T_CONSTANT_ENCAPSED_STRING","'title'",464],["T_WHITESPACE"," ",464],["T_DOUBLE_ARROW","=>",464],["T_WHITESPACE"," ",464],["T_VARIABLE","$titleCheckSql",464],")",["T_WHITESPACE","\n            ",464],")",["T_WHITESPACE","\n            ",465],["T_OBJECT_OPERATOR","->",466],["T_STRING","where",466],"(",["T_CONSTANT_ENCAPSED_STRING","'product_option.product_id = ?'",466],",",["T_WHITESPACE"," ",466],["T_VARIABLE","$productId",466],")",";",["T_WHITESPACE","\n\n        ",466],["T_IF","if",468],["T_WHITESPACE"," ",468],"(",["T_VARIABLE","$titles",468],["T_WHITESPACE"," ",468],"=",["T_WHITESPACE"," ",468],["T_VARIABLE","$adapter",468],["T_OBJECT_OPERATOR","->",468],["T_STRING","fetchCol",468],"(",["T_VARIABLE","$select",468],")",")",["T_WHITESPACE"," ",468],"{",["T_WHITESPACE","\n            ",468],["T_VARIABLE","$searchData",469],["T_WHITESPACE"," ",469],"=",["T_WHITESPACE"," ",469],["T_STRING","array_merge",469],"(",["T_VARIABLE","$searchData",469],",",["T_WHITESPACE"," ",469],["T_VARIABLE","$titles",469],")",";",["T_WHITESPACE","\n        ",469],"}",["T_WHITESPACE","\n\n        ",470],["T_COMMENT","\/\/select option type titles\n",472],["T_WHITESPACE","\n        ",473],["T_VARIABLE","$defaultOptionJoin",474],["T_WHITESPACE"," ",474],"=",["T_WHITESPACE"," ",474],["T_STRING","implode",474],"(",["T_WHITESPACE","\n            ",474],["T_CONSTANT_ENCAPSED_STRING","' AND '",475],",",["T_WHITESPACE"," ",475],["T_ARRAY","array",475],"(",["T_WHITESPACE","\n                ",475],["T_CONSTANT_ENCAPSED_STRING","'option_title_default.option_type_id=option_type.option_type_id'",476],",",["T_WHITESPACE","\n                ",476],["T_VARIABLE","$adapter",477],["T_OBJECT_OPERATOR","->",477],["T_STRING","quoteInto",477],"(",["T_CONSTANT_ENCAPSED_STRING","'option_title_default.store_id = ?'",477],",",["T_WHITESPACE"," ",477],["T_STRING","Mage_Catalog_Model_Abstract",477],["T_DOUBLE_COLON","::",477],["T_STRING","DEFAULT_STORE_ID",477],")",")",["T_WHITESPACE","\n        ",477],")",";",["T_WHITESPACE","\n\n        ",478],["T_VARIABLE","$storeOptionJoin",480],["T_WHITESPACE"," ",480],"=",["T_WHITESPACE"," ",480],["T_STRING","implode",480],"(",["T_WHITESPACE","\n            ",480],["T_CONSTANT_ENCAPSED_STRING","' AND '",481],",",["T_WHITESPACE"," ",481],["T_ARRAY","array",481],"(",["T_WHITESPACE","\n                ",481],["T_CONSTANT_ENCAPSED_STRING","'option_title_store.option_type_id = option_type.option_type_id'",482],",",["T_WHITESPACE","\n                 ",482],["T_VARIABLE","$adapter",483],["T_OBJECT_OPERATOR","->",483],["T_STRING","quoteInto",483],"(",["T_CONSTANT_ENCAPSED_STRING","'option_title_store.store_id = ?'",483],",",["T_WHITESPACE"," ",483],["T_INT_CAST","(int)",483],["T_WHITESPACE"," ",483],["T_VARIABLE","$storeId",483],")",")",["T_WHITESPACE","\n        ",483],")",";",["T_WHITESPACE","\n\n        ",484],["T_VARIABLE","$select",486],["T_WHITESPACE"," ",486],"=",["T_WHITESPACE"," ",486],["T_VARIABLE","$adapter",486],["T_OBJECT_OPERATOR","->",486],["T_STRING","select",486],"(",")",["T_WHITESPACE","\n            ",486],["T_OBJECT_OPERATOR","->",487],["T_STRING","from",487],"(",["T_ARRAY","array",487],"(",["T_CONSTANT_ENCAPSED_STRING","'product_option'",487],["T_WHITESPACE"," ",487],["T_DOUBLE_ARROW","=>",487],["T_WHITESPACE"," ",487],["T_VARIABLE","$this",487],["T_OBJECT_OPERATOR","->",487],["T_STRING","getMainTable",487],"(",")",")",",",["T_WHITESPACE"," ",487],["T_STRING","null",487],")",["T_WHITESPACE","\n            ",487],["T_OBJECT_OPERATOR","->",488],["T_STRING","join",488],"(",["T_WHITESPACE","\n                ",488],["T_ARRAY","array",489],"(",["T_CONSTANT_ENCAPSED_STRING","'option_type'",489],["T_WHITESPACE"," ",489],["T_DOUBLE_ARROW","=>",489],["T_WHITESPACE"," ",489],["T_VARIABLE","$this",489],["T_OBJECT_OPERATOR","->",489],["T_STRING","getTable",489],"(",["T_CONSTANT_ENCAPSED_STRING","'catalog\/product_option_type_value'",489],")",")",",",["T_WHITESPACE","\n                ",489],["T_CONSTANT_ENCAPSED_STRING","'option_type.option_id=product_option.option_id'",490],",",["T_WHITESPACE","\n                ",490],["T_ARRAY","array",491],"(",")",["T_WHITESPACE","\n            ",491],")",["T_WHITESPACE","\n            ",492],["T_OBJECT_OPERATOR","->",493],["T_STRING","join",493],"(",["T_WHITESPACE","\n                ",493],["T_ARRAY","array",494],"(",["T_CONSTANT_ENCAPSED_STRING","'option_title_default'",494],["T_WHITESPACE"," ",494],["T_DOUBLE_ARROW","=>",494],["T_WHITESPACE"," ",494],["T_VARIABLE","$this",494],["T_OBJECT_OPERATOR","->",494],["T_STRING","getTable",494],"(",["T_CONSTANT_ENCAPSED_STRING","'catalog\/product_option_type_title'",494],")",")",",",["T_WHITESPACE","\n                ",494],["T_VARIABLE","$defaultOptionJoin",495],",",["T_WHITESPACE","\n                ",495],["T_ARRAY","array",496],"(",")",["T_WHITESPACE","\n            ",496],")",["T_WHITESPACE","\n            ",497],["T_OBJECT_OPERATOR","->",498],["T_STRING","joinLeft",498],"(",["T_WHITESPACE","\n                ",498],["T_ARRAY","array",499],"(",["T_CONSTANT_ENCAPSED_STRING","'option_title_store'",499],["T_WHITESPACE"," ",499],["T_DOUBLE_ARROW","=>",499],["T_WHITESPACE"," ",499],["T_VARIABLE","$this",499],["T_OBJECT_OPERATOR","->",499],["T_STRING","getTable",499],"(",["T_CONSTANT_ENCAPSED_STRING","'catalog\/product_option_type_title'",499],")",")",",",["T_WHITESPACE","\n                ",499],["T_VARIABLE","$storeOptionJoin",500],",",["T_WHITESPACE","\n                ",500],["T_ARRAY","array",501],"(",["T_CONSTANT_ENCAPSED_STRING","'title'",501],["T_WHITESPACE"," ",501],["T_DOUBLE_ARROW","=>",501],["T_WHITESPACE"," ",501],["T_VARIABLE","$titleCheckSql",501],")",["T_WHITESPACE","\n            ",501],")",["T_WHITESPACE","\n            ",502],["T_OBJECT_OPERATOR","->",503],["T_STRING","where",503],"(",["T_CONSTANT_ENCAPSED_STRING","'product_option.product_id = ?'",503],",",["T_WHITESPACE"," ",503],["T_VARIABLE","$productId",503],")",";",["T_WHITESPACE","\n\n        ",503],["T_IF","if",505],["T_WHITESPACE"," ",505],"(",["T_VARIABLE","$titles",505],["T_WHITESPACE"," ",505],"=",["T_WHITESPACE"," ",505],["T_VARIABLE","$adapter",505],["T_OBJECT_OPERATOR","->",505],["T_STRING","fetchCol",505],"(",["T_VARIABLE","$select",505],")",")",["T_WHITESPACE"," ",505],"{",["T_WHITESPACE","\n            ",505],["T_VARIABLE","$searchData",506],["T_WHITESPACE"," ",506],"=",["T_WHITESPACE"," ",506],["T_STRING","array_merge",506],"(",["T_VARIABLE","$searchData",506],",",["T_WHITESPACE"," ",506],["T_VARIABLE","$titles",506],")",";",["T_WHITESPACE","\n        ",506],"}",["T_WHITESPACE","\n\n        ",507],["T_RETURN","return",509],["T_WHITESPACE"," ",509],["T_VARIABLE","$searchData",509],";",["T_WHITESPACE","\n    ",509],"}",["T_WHITESPACE","\n",510],"}",["T_WHITESPACE","\n",511]]
[["T_OPEN_TAG","<?php\n",1],["T_DOC_COMMENT","\/**\n * Magento\n *\n * NOTICE OF LICENSE\n *\n * This source file is subject to the Open Software License (OSL 3.0)\n * that is bundled with this package in the file LICENSE.txt.\n * It is also available through the world-wide-web at this URL:\n * http:\/\/opensource.org\/licenses\/osl-3.0.php\n * If you did not receive a copy of the license and are unable to\n * obtain it through the world-wide-web, please send an email\n * to license@magento.com so we can send you a copy immediately.\n *\n * DISCLAIMER\n *\n * Do not edit or add to this file if you wish to upgrade Magento to newer\n * versions in the future. If you wish to customize Magento for your\n * needs please refer to http:\/\/www.magento.com for more information.\n *\n * @category    Mage\n * @package     Mage_Catalog\n * @copyright  Copyright (c) 2006-2016 X.commerce, Inc. and affiliates (http:\/\/www.magento.com)\n * @license    http:\/\/opensource.org\/licenses\/osl-3.0.php  Open Software License (OSL 3.0)\n *\/",2],["T_WHITESPACE","\n\n",25],["T_DOC_COMMENT","\/**\n * Catalog product option select type\n *\n * @category   Mage\n * @package    Mage_Catalog\n * @author     Magento Core Team <core@magentocommerce.com>\n *\/",27],["T_WHITESPACE","\n",33],["T_CLASS","class",34],["T_WHITESPACE"," ",34],["T_STRING","Mage_Catalog_Model_Product_Option_Type_Select",34],["T_WHITESPACE"," ",34],["T_EXTENDS","extends",34],["T_WHITESPACE"," ",34],["T_STRING","Mage_Catalog_Model_Product_Option_Type_Default",34],["T_WHITESPACE","\n",34],"{",["T_WHITESPACE","\n    ",35],["T_DOC_COMMENT","\/**\n     * Validate user input for option\n     *\n     * @throws Mage_Core_Exception\n     * @param array $values All product option values, i.e. array (option_id => mixed, option_id => mixed...)\n     * @return Mage_Catalog_Model_Product_Option_Type_Default\n     *\/",36],["T_WHITESPACE","\n    ",42],["T_PUBLIC","public",43],["T_WHITESPACE"," ",43],["T_FUNCTION","function",43],["T_WHITESPACE"," ",43],["T_STRING","validateUserValue",43],"(",["T_VARIABLE","$values",43],")",["T_WHITESPACE","\n    ",43],"{",["T_WHITESPACE","\n        ",44],["T_STRING","parent",45],["T_DOUBLE_COLON","::",45],["T_STRING","validateUserValue",45],"(",["T_VARIABLE","$values",45],")",";",["T_WHITESPACE","\n\n        ",45],["T_VARIABLE","$option",47],["T_WHITESPACE"," ",47],"=",["T_WHITESPACE"," ",47],["T_VARIABLE","$this",47],["T_OBJECT_OPERATOR","->",47],["T_STRING","getOption",47],"(",")",";",["T_WHITESPACE","\n        ",47],["T_VARIABLE","$value",48],["T_WHITESPACE"," ",48],"=",["T_WHITESPACE"," ",48],["T_VARIABLE","$this",48],["T_OBJECT_OPERATOR","->",48],["T_STRING","getUserValue",48],"(",")",";",["T_WHITESPACE","\n\n        ",48],["T_IF","if",50],["T_WHITESPACE"," ",50],"(",["T_EMPTY","empty",50],"(",["T_VARIABLE","$value",50],")",["T_WHITESPACE"," ",50],["T_BOOLEAN_AND","&&",50],["T_WHITESPACE"," ",50],["T_VARIABLE","$option",50],["T_OBJECT_OPERATOR","->",50],["T_STRING","getIsRequire",50],"(",")",["T_WHITESPACE"," ",50],["T_BOOLEAN_AND","&&",50],["T_WHITESPACE"," ",50],"!",["T_VARIABLE","$this",50],["T_OBJECT_OPERATOR","->",50],["T_STRING","getSkipCheckRequiredOption",50],"(",")",")",["T_WHITESPACE"," ",50],"{",["T_WHITESPACE","\n            ",50],["T_VARIABLE","$this",51],["T_OBJECT_OPERATOR","->",51],["T_STRING","setIsValid",51],"(",["T_STRING","false",51],")",";",["T_WHITESPACE","\n            ",51],["T_STRING","Mage",52],["T_DOUBLE_COLON","::",52],["T_STRING","throwException",52],"(",["T_STRING","Mage",52],["T_DOUBLE_COLON","::",52],["T_STRING","helper",52],"(",["T_CONSTANT_ENCAPSED_STRING","'catalog'",52],")",["T_OBJECT_OPERATOR","->",52],["T_STRING","__",52],"(",["T_CONSTANT_ENCAPSED_STRING","'Please specify the product required option(s).'",52],")",")",";",["T_WHITESPACE","\n        ",52],"}",["T_WHITESPACE","\n        ",53],["T_IF","if",54],["T_WHITESPACE"," ",54],"(","!",["T_VARIABLE","$this",54],["T_OBJECT_OPERATOR","->",54],["T_STRING","_isSingleSelection",54],"(",")",")",["T_WHITESPACE"," ",54],"{",["T_WHITESPACE","\n            ",54],["T_VARIABLE","$valuesCollection",55],["T_WHITESPACE"," ",55],"=",["T_WHITESPACE"," ",55],["T_VARIABLE","$option",55],["T_OBJECT_OPERATOR","->",55],["T_STRING","getOptionValuesByOptionId",55],"(",["T_VARIABLE","$value",55],",",["T_WHITESPACE"," ",55],["T_VARIABLE","$this",55],["T_OBJECT_OPERATOR","->",55],["T_STRING","getProduct",55],"(",")",["T_OBJECT_OPERATOR","->",55],["T_STRING","getStoreId",55],"(",")",")",["T_WHITESPACE","\n                ",55],["T_OBJECT_OPERATOR","->",56],["T_STRING","load",56],"(",")",";",["T_WHITESPACE","\n            ",56],["T_IF","if",57],["T_WHITESPACE"," ",57],"(",["T_VARIABLE","$valuesCollection",57],["T_OBJECT_OPERATOR","->",57],["T_STRING","count",57],"(",")",["T_WHITESPACE"," ",57],["T_IS_NOT_EQUAL","!=",57],["T_WHITESPACE"," ",57],["T_STRING","count",57],"(",["T_VARIABLE","$value",57],")",")",["T_WHITESPACE"," ",57],"{",["T_WHITESPACE","\n                ",57],["T_VARIABLE","$this",58],["T_OBJECT_OPERATOR","->",58],["T_STRING","setIsValid",58],"(",["T_STRING","false",58],")",";",["T_WHITESPACE","\n                ",58],["T_STRING","Mage",59],["T_DOUBLE_COLON","::",59],["T_STRING","throwException",59],"(",["T_STRING","Mage",59],["T_DOUBLE_COLON","::",59],["T_STRING","helper",59],"(",["T_CONSTANT_ENCAPSED_STRING","'catalog'",59],")",["T_OBJECT_OPERATOR","->",59],["T_STRING","__",59],"(",["T_CONSTANT_ENCAPSED_STRING","'Please specify the product required option(s).'",59],")",")",";",["T_WHITESPACE","\n            ",59],"}",["T_WHITESPACE","\n        ",60],"}",["T_WHITESPACE","\n        ",61],["T_RETURN","return",62],["T_WHITESPACE"," ",62],["T_VARIABLE","$this",62],";",["T_WHITESPACE","\n    ",62],"}",["T_WHITESPACE","\n\n    ",63],["T_DOC_COMMENT","\/**\n     * Prepare option value for cart\n     *\n     * @throws Mage_Core_Exception\n     * @return mixed Prepared option value\n     *\/",65],["T_WHITESPACE","\n    ",70],["T_PUBLIC","public",71],["T_WHITESPACE"," ",71],["T_FUNCTION","function",71],["T_WHITESPACE"," ",71],["T_STRING","prepareForCart",71],"(",")",["T_WHITESPACE","\n    ",71],"{",["T_WHITESPACE","\n        ",72],["T_IF","if",73],["T_WHITESPACE"," ",73],"(",["T_VARIABLE","$this",73],["T_OBJECT_OPERATOR","->",73],["T_STRING","getIsValid",73],"(",")",["T_WHITESPACE"," ",73],["T_BOOLEAN_AND","&&",73],["T_WHITESPACE"," ",73],["T_VARIABLE","$this",73],["T_OBJECT_OPERATOR","->",73],["T_STRING","getUserValue",73],"(",")",")",["T_WHITESPACE"," ",73],"{",["T_WHITESPACE","\n            ",73],["T_RETURN","return",74],["T_WHITESPACE"," ",74],["T_STRING","is_array",74],"(",["T_VARIABLE","$this",74],["T_OBJECT_OPERATOR","->",74],["T_STRING","getUserValue",74],"(",")",")",["T_WHITESPACE"," ",74],"?",["T_WHITESPACE"," ",74],["T_STRING","implode",74],"(",["T_CONSTANT_ENCAPSED_STRING","','",74],",",["T_WHITESPACE"," ",74],["T_VARIABLE","$this",74],["T_OBJECT_OPERATOR","->",74],["T_STRING","getUserValue",74],"(",")",")",["T_WHITESPACE"," ",74],":",["T_WHITESPACE"," ",74],["T_VARIABLE","$this",74],["T_OBJECT_OPERATOR","->",74],["T_STRING","getUserValue",74],"(",")",";",["T_WHITESPACE","\n        ",74],"}",["T_WHITESPACE"," ",75],["T_ELSE","else",75],["T_WHITESPACE"," ",75],"{",["T_WHITESPACE","\n            ",75],["T_RETURN","return",76],["T_WHITESPACE"," ",76],["T_STRING","null",76],";",["T_WHITESPACE","\n        ",76],"}",["T_WHITESPACE","\n    ",77],"}",["T_WHITESPACE","\n\n    ",78],["T_DOC_COMMENT","\/**\n     * Return formatted option value for quote option\n     *\n     * @param string $optionValue Prepared for cart option value\n     * @return string\n     *\/",80],["T_WHITESPACE","\n    ",85],["T_PUBLIC","public",86],["T_WHITESPACE"," ",86],["T_FUNCTION","function",86],["T_WHITESPACE"," ",86],["T_STRING","getFormattedOptionValue",86],"(",["T_VARIABLE","$optionValue",86],")",["T_WHITESPACE","\n    ",86],"{",["T_WHITESPACE","\n        ",87],["T_IF","if",88],["T_WHITESPACE"," ",88],"(",["T_VARIABLE","$this",88],["T_OBJECT_OPERATOR","->",88],["T_STRING","_formattedOptionValue",88],["T_WHITESPACE"," ",88],["T_IS_IDENTICAL","===",88],["T_WHITESPACE"," ",88],["T_STRING","null",88],")",["T_WHITESPACE"," ",88],"{",["T_WHITESPACE","\n            ",88],["T_VARIABLE","$this",89],["T_OBJECT_OPERATOR","->",89],["T_STRING","_formattedOptionValue",89],["T_WHITESPACE"," ",89],"=",["T_WHITESPACE"," ",89],["T_STRING","Mage",89],["T_DOUBLE_COLON","::",89],["T_STRING","helper",89],"(",["T_CONSTANT_ENCAPSED_STRING","'core'",89],")",["T_OBJECT_OPERATOR","->",89],["T_STRING","escapeHtml",89],"(",["T_WHITESPACE","\n                ",89],["T_VARIABLE","$this",90],["T_OBJECT_OPERATOR","->",90],["T_STRING","getEditableOptionValue",90],"(",["T_VARIABLE","$optionValue",90],")",["T_WHITESPACE","\n            ",90],")",";",["T_WHITESPACE","\n        ",91],"}",["T_WHITESPACE","\n        ",92],["T_RETURN","return",93],["T_WHITESPACE"," ",93],["T_VARIABLE","$this",93],["T_OBJECT_OPERATOR","->",93],["T_STRING","_formattedOptionValue",93],";",["T_WHITESPACE","\n    ",93],"}",["T_WHITESPACE","\n\n    ",94],["T_DOC_COMMENT","\/**\n     * Return printable option value\n     *\n     * @param string $optionValue Prepared for cart option value\n     * @return string\n     *\/",96],["T_WHITESPACE","\n    ",101],["T_PUBLIC","public",102],["T_WHITESPACE"," ",102],["T_FUNCTION","function",102],["T_WHITESPACE"," ",102],["T_STRING","getPrintableOptionValue",102],"(",["T_VARIABLE","$optionValue",102],")",["T_WHITESPACE","\n    ",102],"{",["T_WHITESPACE","\n        ",103],["T_RETURN","return",104],["T_WHITESPACE"," ",104],["T_VARIABLE","$this",104],["T_OBJECT_OPERATOR","->",104],["T_STRING","getFormattedOptionValue",104],"(",["T_VARIABLE","$optionValue",104],")",";",["T_WHITESPACE","\n    ",104],"}",["T_WHITESPACE","\n\n    ",105],["T_DOC_COMMENT","\/**\n     * Return currently unavailable product configuration message\n     *\n     * @return string\n     *\/",107],["T_WHITESPACE","\n    ",111],["T_PROTECTED","protected",112],["T_WHITESPACE"," ",112],["T_FUNCTION","function",112],["T_WHITESPACE"," ",112],["T_STRING","_getWrongConfigurationMessage",112],"(",")",["T_WHITESPACE","\n    ",112],"{",["T_WHITESPACE","\n        ",113],["T_RETURN","return",114],["T_WHITESPACE"," ",114],["T_STRING","Mage",114],["T_DOUBLE_COLON","::",114],["T_STRING","helper",114],"(",["T_CONSTANT_ENCAPSED_STRING","'catalog'",114],")",["T_OBJECT_OPERATOR","->",114],["T_STRING","__",114],"(",["T_CONSTANT_ENCAPSED_STRING","'Some of the selected item options are not currently available.'",114],")",";",["T_WHITESPACE","\n    ",114],"}",["T_WHITESPACE","\n\n    ",115],["T_DOC_COMMENT","\/**\n     * Return formatted option value ready to edit, ready to parse\n     *\n     * @param string $optionValue Prepared for cart option value\n     * @return string\n     *\/",117],["T_WHITESPACE","\n    ",122],["T_PUBLIC","public",123],["T_WHITESPACE"," ",123],["T_FUNCTION","function",123],["T_WHITESPACE"," ",123],["T_STRING","getEditableOptionValue",123],"(",["T_VARIABLE","$optionValue",123],")",["T_WHITESPACE","\n    ",123],"{",["T_WHITESPACE","\n        ",124],["T_VARIABLE","$option",125],["T_WHITESPACE"," ",125],"=",["T_WHITESPACE"," ",125],["T_VARIABLE","$this",125],["T_OBJECT_OPERATOR","->",125],["T_STRING","getOption",125],"(",")",";",["T_WHITESPACE","\n        ",125],["T_VARIABLE","$result",126],["T_WHITESPACE"," ",126],"=",["T_WHITESPACE"," ",126],["T_CONSTANT_ENCAPSED_STRING","''",126],";",["T_WHITESPACE","\n        ",126],["T_IF","if",127],["T_WHITESPACE"," ",127],"(","!",["T_VARIABLE","$this",127],["T_OBJECT_OPERATOR","->",127],["T_STRING","_isSingleSelection",127],"(",")",")",["T_WHITESPACE"," ",127],"{",["T_WHITESPACE","\n            ",127],["T_FOREACH","foreach",128],["T_WHITESPACE"," ",128],"(",["T_STRING","explode",128],"(",["T_CONSTANT_ENCAPSED_STRING","','",128],",",["T_WHITESPACE"," ",128],["T_VARIABLE","$optionValue",128],")",["T_WHITESPACE"," ",128],["T_AS","as",128],["T_WHITESPACE"," ",128],["T_VARIABLE","$_value",128],")",["T_WHITESPACE"," ",128],"{",["T_WHITESPACE","\n                ",128],["T_IF","if",129],["T_WHITESPACE"," ",129],"(",["T_VARIABLE","$_result",129],["T_WHITESPACE"," ",129],"=",["T_WHITESPACE"," ",129],["T_VARIABLE","$option",129],["T_OBJECT_OPERATOR","->",129],["T_STRING","getValueById",129],"(",["T_VARIABLE","$_value",129],")",")",["T_WHITESPACE"," ",129],"{",["T_WHITESPACE","\n                    ",129],["T_VARIABLE","$result",130],["T_WHITESPACE"," ",130],["T_CONCAT_EQUAL",".=",130],["T_WHITESPACE"," ",130],["T_VARIABLE","$_result",130],["T_OBJECT_OPERATOR","->",130],["T_STRING","getTitle",130],"(",")",["T_WHITESPACE"," ",130],".",["T_WHITESPACE"," ",130],["T_CONSTANT_ENCAPSED_STRING","', '",130],";",["T_WHITESPACE","\n                ",130],"}",["T_WHITESPACE"," ",131],["T_ELSE","else",131],["T_WHITESPACE"," ",131],"{",["T_WHITESPACE","\n                    ",131],["T_IF","if",132],["T_WHITESPACE"," ",132],"(",["T_VARIABLE","$this",132],["T_OBJECT_OPERATOR","->",132],["T_STRING","getListener",132],"(",")",")",["T_WHITESPACE"," ",132],"{",["T_WHITESPACE","\n                        ",132],["T_VARIABLE","$this",133],["T_OBJECT_OPERATOR","->",133],["T_STRING","getListener",133],"(",")",["T_WHITESPACE","\n                                ",133],["T_OBJECT_OPERATOR","->",134],["T_STRING","setHasError",134],"(",["T_STRING","true",134],")",["T_WHITESPACE","\n                                ",134],["T_OBJECT_OPERATOR","->",135],["T_STRING","setMessage",135],"(",["T_WHITESPACE","\n                                    ",135],["T_VARIABLE","$this",136],["T_OBJECT_OPERATOR","->",136],["T_STRING","_getWrongConfigurationMessage",136],"(",")",["T_WHITESPACE","\n                                ",136],")",";",["T_WHITESPACE","\n                        ",137],["T_VARIABLE","$result",138],["T_WHITESPACE"," ",138],"=",["T_WHITESPACE"," ",138],["T_CONSTANT_ENCAPSED_STRING","''",138],";",["T_WHITESPACE","\n                        ",138],["T_BREAK","break",139],";",["T_WHITESPACE","\n                    ",139],"}",["T_WHITESPACE","\n                ",140],"}",["T_WHITESPACE","\n            ",141],"}",["T_WHITESPACE","\n            ",142],["T_VARIABLE","$result",143],["T_WHITESPACE"," ",143],"=",["T_WHITESPACE"," ",143],["T_STRING","Mage",143],["T_DOUBLE_COLON","::",143],["T_STRING","helper",143],"(",["T_CONSTANT_ENCAPSED_STRING","'core\/string'",143],")",["T_OBJECT_OPERATOR","->",143],["T_STRING","substr",143],"(",["T_VARIABLE","$result",143],",",["T_WHITESPACE"," ",143],["T_LNUMBER","0",143],",",["T_WHITESPACE"," ",143],"-",["T_LNUMBER","2",143],")",";",["T_WHITESPACE","\n        ",143],"}",["T_WHITESPACE"," ",144],["T_ELSEIF","elseif",144],["T_WHITESPACE"," ",144],"(",["T_VARIABLE","$this",144],["T_OBJECT_OPERATOR","->",144],["T_STRING","_isSingleSelection",144],"(",")",")",["T_WHITESPACE"," ",144],"{",["T_WHITESPACE","\n            ",144],["T_IF","if",145],["T_WHITESPACE"," ",145],"(",["T_VARIABLE","$_result",145],["T_WHITESPACE"," ",145],"=",["T_WHITESPACE"," ",145],["T_VARIABLE","$option",145],["T_OBJECT_OPERATOR","->",145],["T_STRING","getValueById",145],"(",["T_VARIABLE","$optionValue",145],")",")",["T_WHITESPACE"," ",145],"{",["T_WHITESPACE","\n                ",145],["T_VARIABLE","$result",146],["T_WHITESPACE"," ",146],"=",["T_WHITESPACE"," ",146],["T_VARIABLE","$_result",146],["T_OBJECT_OPERATOR","->",146],["T_STRING","getTitle",146],"(",")",";",["T_WHITESPACE","\n            ",146],"}",["T_WHITESPACE"," ",147],["T_ELSE","else",147],["T_WHITESPACE"," ",147],"{",["T_WHITESPACE","\n                ",147],["T_IF","if",148],["T_WHITESPACE"," ",148],"(",["T_VARIABLE","$this",148],["T_OBJECT_OPERATOR","->",148],["T_STRING","getListener",148],"(",")",")",["T_WHITESPACE"," ",148],"{",["T_WHITESPACE","\n                    ",148],["T_VARIABLE","$this",149],["T_OBJECT_OPERATOR","->",149],["T_STRING","getListener",149],"(",")",["T_WHITESPACE","\n                            ",149],["T_OBJECT_OPERATOR","->",150],["T_STRING","setHasError",150],"(",["T_STRING","true",150],")",["T_WHITESPACE","\n                            ",150],["T_OBJECT_OPERATOR","->",151],["T_STRING","setMessage",151],"(",["T_WHITESPACE","\n                                ",151],["T_VARIABLE","$this",152],["T_OBJECT_OPERATOR","->",152],["T_STRING","_getWrongConfigurationMessage",152],"(",")",["T_WHITESPACE","\n                            ",152],")",";",["T_WHITESPACE","\n                ",153],"}",["T_WHITESPACE","\n                ",154],["T_VARIABLE","$result",155],["T_WHITESPACE"," ",155],"=",["T_WHITESPACE"," ",155],["T_CONSTANT_ENCAPSED_STRING","''",155],";",["T_WHITESPACE","\n            ",155],"}",["T_WHITESPACE","\n        ",156],"}",["T_WHITESPACE"," ",157],["T_ELSE","else",157],["T_WHITESPACE"," ",157],"{",["T_WHITESPACE","\n            ",157],["T_VARIABLE","$result",158],["T_WHITESPACE"," ",158],"=",["T_WHITESPACE"," ",158],["T_VARIABLE","$optionValue",158],";",["T_WHITESPACE","\n        ",158],"}",["T_WHITESPACE","\n        ",159],["T_RETURN","return",160],["T_WHITESPACE"," ",160],["T_VARIABLE","$result",160],";",["T_WHITESPACE","\n    ",160],"}",["T_WHITESPACE","\n\n    ",161],["T_DOC_COMMENT","\/**\n     * Parse user input value and return cart prepared value, i.e. \"one, two\" => \"1,2\"\n     *\n     * @param string $optionValue\n     * @param array $productOptionValues Values for product option\n     * @return string|null\n     *\/",163],["T_WHITESPACE","\n    ",169],["T_PUBLIC","public",170],["T_WHITESPACE"," ",170],["T_FUNCTION","function",170],["T_WHITESPACE"," ",170],["T_STRING","parseOptionValue",170],"(",["T_VARIABLE","$optionValue",170],",",["T_WHITESPACE"," ",170],["T_VARIABLE","$productOptionValues",170],")",["T_WHITESPACE","\n    ",170],"{",["T_WHITESPACE","\n        ",171],["T_VARIABLE","$_values",172],["T_WHITESPACE"," ",172],"=",["T_WHITESPACE"," ",172],["T_ARRAY","array",172],"(",")",";",["T_WHITESPACE","\n        ",172],["T_IF","if",173],["T_WHITESPACE"," ",173],"(","!",["T_VARIABLE","$this",173],["T_OBJECT_OPERATOR","->",173],["T_STRING","_isSingleSelection",173],"(",")",")",["T_WHITESPACE"," ",173],"{",["T_WHITESPACE","\n            ",173],["T_FOREACH","foreach",174],["T_WHITESPACE"," ",174],"(",["T_STRING","explode",174],"(",["T_CONSTANT_ENCAPSED_STRING","','",174],",",["T_WHITESPACE"," ",174],["T_VARIABLE","$optionValue",174],")",["T_WHITESPACE"," ",174],["T_AS","as",174],["T_WHITESPACE"," ",174],["T_VARIABLE","$_value",174],")",["T_WHITESPACE"," ",174],"{",["T_WHITESPACE","\n                ",174],["T_VARIABLE","$_value",175],["T_WHITESPACE"," ",175],"=",["T_WHITESPACE"," ",175],["T_STRING","trim",175],"(",["T_VARIABLE","$_value",175],")",";",["T_WHITESPACE","\n                ",175],["T_IF","if",176],["T_WHITESPACE"," ",176],"(",["T_STRING","array_key_exists",176],"(",["T_VARIABLE","$_value",176],",",["T_WHITESPACE"," ",176],["T_VARIABLE","$productOptionValues",176],")",")",["T_WHITESPACE"," ",176],"{",["T_WHITESPACE","\n                    ",176],["T_VARIABLE","$_values",177],"[","]",["T_WHITESPACE"," ",177],"=",["T_WHITESPACE"," ",177],["T_VARIABLE","$productOptionValues",177],"[",["T_VARIABLE","$_value",177],"]",";",["T_WHITESPACE","\n                ",177],"}",["T_WHITESPACE","\n            ",178],"}",["T_WHITESPACE","\n        ",179],"}",["T_WHITESPACE"," ",180],["T_ELSEIF","elseif",180],["T_WHITESPACE"," ",180],"(",["T_VARIABLE","$this",180],["T_OBJECT_OPERATOR","->",180],["T_STRING","_isSingleSelection",180],"(",")",["T_WHITESPACE"," ",180],["T_BOOLEAN_AND","&&",180],["T_WHITESPACE"," ",180],["T_STRING","array_key_exists",180],"(",["T_VARIABLE","$optionValue",180],",",["T_WHITESPACE"," ",180],["T_VARIABLE","$productOptionValues",180],")",")",["T_WHITESPACE"," ",180],"{",["T_WHITESPACE","\n            ",180],["T_VARIABLE","$_values",181],"[","]",["T_WHITESPACE"," ",181],"=",["T_WHITESPACE"," ",181],["T_VARIABLE","$productOptionValues",181],"[",["T_VARIABLE","$optionValue",181],"]",";",["T_WHITESPACE","\n        ",181],"}",["T_WHITESPACE","\n        ",182],["T_IF","if",183],["T_WHITESPACE"," ",183],"(",["T_STRING","count",183],"(",["T_VARIABLE","$_values",183],")",")",["T_WHITESPACE"," ",183],"{",["T_WHITESPACE","\n            ",183],["T_RETURN","return",184],["T_WHITESPACE"," ",184],["T_STRING","implode",184],"(",["T_CONSTANT_ENCAPSED_STRING","','",184],",",["T_WHITESPACE"," ",184],["T_VARIABLE","$_values",184],")",";",["T_WHITESPACE","\n        ",184],"}",["T_WHITESPACE"," ",185],["T_ELSE","else",185],["T_WHITESPACE"," ",185],"{",["T_WHITESPACE","\n            ",185],["T_RETURN","return",186],["T_WHITESPACE"," ",186],["T_STRING","null",186],";",["T_WHITESPACE","\n        ",186],"}",["T_WHITESPACE","\n    ",187],"}",["T_WHITESPACE","\n\n    ",188],["T_DOC_COMMENT","\/**\n     * Prepare option value for info buy request\n     *\n     * @param string $optionValue\n     * @return mixed\n     *\/",190],["T_WHITESPACE","\n    ",195],["T_PUBLIC","public",196],["T_WHITESPACE"," ",196],["T_FUNCTION","function",196],["T_WHITESPACE"," ",196],["T_STRING","prepareOptionValueForRequest",196],"(",["T_VARIABLE","$optionValue",196],")",["T_WHITESPACE","\n    ",196],"{",["T_WHITESPACE","\n        ",197],["T_IF","if",198],["T_WHITESPACE"," ",198],"(","!",["T_VARIABLE","$this",198],["T_OBJECT_OPERATOR","->",198],["T_STRING","_isSingleSelection",198],"(",")",")",["T_WHITESPACE"," ",198],"{",["T_WHITESPACE","\n            ",198],["T_RETURN","return",199],["T_WHITESPACE"," ",199],["T_STRING","explode",199],"(",["T_CONSTANT_ENCAPSED_STRING","','",199],",",["T_WHITESPACE"," ",199],["T_VARIABLE","$optionValue",199],")",";",["T_WHITESPACE","\n        ",199],"}",["T_WHITESPACE","\n        ",200],["T_RETURN","return",201],["T_WHITESPACE"," ",201],["T_VARIABLE","$optionValue",201],";",["T_WHITESPACE","\n    ",201],"}",["T_WHITESPACE","\n\n    ",202],["T_DOC_COMMENT","\/**\n     * Return Price for selected option\n     *\n     * @param string $optionValue Prepared for cart option value\n     * @param float $basePrice\n     * @return float\n     *\/",204],["T_WHITESPACE","\n    ",210],["T_PUBLIC","public",211],["T_WHITESPACE"," ",211],["T_FUNCTION","function",211],["T_WHITESPACE"," ",211],["T_STRING","getOptionPrice",211],"(",["T_VARIABLE","$optionValue",211],",",["T_WHITESPACE"," ",211],["T_VARIABLE","$basePrice",211],")",["T_WHITESPACE","\n    ",211],"{",["T_WHITESPACE","\n        ",212],["T_VARIABLE","$option",213],["T_WHITESPACE"," ",213],"=",["T_WHITESPACE"," ",213],["T_VARIABLE","$this",213],["T_OBJECT_OPERATOR","->",213],["T_STRING","getOption",213],"(",")",";",["T_WHITESPACE","\n        ",213],["T_VARIABLE","$result",214],["T_WHITESPACE"," ",214],"=",["T_WHITESPACE"," ",214],["T_LNUMBER","0",214],";",["T_WHITESPACE","\n\n        ",214],["T_IF","if",216],["T_WHITESPACE"," ",216],"(","!",["T_VARIABLE","$this",216],["T_OBJECT_OPERATOR","->",216],["T_STRING","_isSingleSelection",216],"(",")",")",["T_WHITESPACE"," ",216],"{",["T_WHITESPACE","\n            ",216],["T_FOREACH","foreach",217],"(",["T_STRING","explode",217],"(",["T_CONSTANT_ENCAPSED_STRING","','",217],",",["T_WHITESPACE"," ",217],["T_VARIABLE","$optionValue",217],")",["T_WHITESPACE"," ",217],["T_AS","as",217],["T_WHITESPACE"," ",217],["T_VARIABLE","$value",217],")",["T_WHITESPACE"," ",217],"{",["T_WHITESPACE","\n                ",217],["T_IF","if",218],["T_WHITESPACE"," ",218],"(",["T_VARIABLE","$_result",218],["T_WHITESPACE"," ",218],"=",["T_WHITESPACE"," ",218],["T_VARIABLE","$option",218],["T_OBJECT_OPERATOR","->",218],["T_STRING","getValueById",218],"(",["T_VARIABLE","$value",218],")",")",["T_WHITESPACE"," ",218],"{",["T_WHITESPACE","\n                    ",218],["T_VARIABLE","$result",219],["T_WHITESPACE"," ",219],["T_PLUS_EQUAL","+=",219],["T_WHITESPACE"," ",219],["T_VARIABLE","$this",219],["T_OBJECT_OPERATOR","->",219],["T_STRING","_getChargableOptionPrice",219],"(",["T_WHITESPACE","\n                        ",219],["T_VARIABLE","$_result",220],["T_OBJECT_OPERATOR","->",220],["T_STRING","getPrice",220],"(",")",",",["T_WHITESPACE","\n                        ",220],["T_VARIABLE","$_result",221],["T_OBJECT_OPERATOR","->",221],["T_STRING","getPriceType",221],"(",")",["T_WHITESPACE"," ",221],["T_IS_EQUAL","==",221],["T_WHITESPACE"," ",221],["T_CONSTANT_ENCAPSED_STRING","'percent'",221],",",["T_WHITESPACE","\n                        ",221],["T_VARIABLE","$basePrice",222],["T_WHITESPACE","\n                    ",222],")",";",["T_WHITESPACE","\n                ",223],"}",["T_WHITESPACE"," ",224],["T_ELSE","else",224],["T_WHITESPACE"," ",224],"{",["T_WHITESPACE","\n                    ",224],["T_IF","if",225],["T_WHITESPACE"," ",225],"(",["T_VARIABLE","$this",225],["T_OBJECT_OPERATOR","->",225],["T_STRING","getListener",225],"(",")",")",["T_WHITESPACE"," ",225],"{",["T_WHITESPACE","\n                        ",225],["T_VARIABLE","$this",226],["T_OBJECT_OPERATOR","->",226],["T_STRING","getListener",226],"(",")",["T_WHITESPACE","\n                                ",226],["T_OBJECT_OPERATOR","->",227],["T_STRING","setHasError",227],"(",["T_STRING","true",227],")",["T_WHITESPACE","\n                                ",227],["T_OBJECT_OPERATOR","->",228],["T_STRING","setMessage",228],"(",["T_WHITESPACE","\n                                    ",228],["T_VARIABLE","$this",229],["T_OBJECT_OPERATOR","->",229],["T_STRING","_getWrongConfigurationMessage",229],"(",")",["T_WHITESPACE","\n                                ",229],")",";",["T_WHITESPACE","\n                        ",230],["T_BREAK","break",231],";",["T_WHITESPACE","\n                    ",231],"}",["T_WHITESPACE","\n                ",232],"}",["T_WHITESPACE","\n            ",233],"}",["T_WHITESPACE","\n        ",234],"}",["T_WHITESPACE"," ",235],["T_ELSEIF","elseif",235],["T_WHITESPACE"," ",235],"(",["T_VARIABLE","$this",235],["T_OBJECT_OPERATOR","->",235],["T_STRING","_isSingleSelection",235],"(",")",")",["T_WHITESPACE"," ",235],"{",["T_WHITESPACE","\n            ",235],["T_IF","if",236],["T_WHITESPACE"," ",236],"(",["T_VARIABLE","$_result",236],["T_WHITESPACE"," ",236],"=",["T_WHITESPACE"," ",236],["T_VARIABLE","$option",236],["T_OBJECT_OPERATOR","->",236],["T_STRING","getValueById",236],"(",["T_VARIABLE","$optionValue",236],")",")",["T_WHITESPACE"," ",236],"{",["T_WHITESPACE","\n                ",236],["T_VARIABLE","$result",237],["T_WHITESPACE"," ",237],"=",["T_WHITESPACE"," ",237],["T_VARIABLE","$this",237],["T_OBJECT_OPERATOR","->",237],["T_STRING","_getChargableOptionPrice",237],"(",["T_WHITESPACE","\n                    ",237],["T_VARIABLE","$_result",238],["T_OBJECT_OPERATOR","->",238],["T_STRING","getPrice",238],"(",")",",",["T_WHITESPACE","\n                    ",238],["T_VARIABLE","$_result",239],["T_OBJECT_OPERATOR","->",239],["T_STRING","getPriceType",239],"(",")",["T_WHITESPACE"," ",239],["T_IS_EQUAL","==",239],["T_WHITESPACE"," ",239],["T_CONSTANT_ENCAPSED_STRING","'percent'",239],",",["T_WHITESPACE","\n                    ",239],["T_VARIABLE","$basePrice",240],["T_WHITESPACE","\n                ",240],")",";",["T_WHITESPACE","\n            ",241],"}",["T_WHITESPACE"," ",242],["T_ELSE","else",242],["T_WHITESPACE"," ",242],"{",["T_WHITESPACE","\n                ",242],["T_IF","if",243],["T_WHITESPACE"," ",243],"(",["T_VARIABLE","$this",243],["T_OBJECT_OPERATOR","->",243],["T_STRING","getListener",243],"(",")",")",["T_WHITESPACE"," ",243],"{",["T_WHITESPACE","\n                    ",243],["T_VARIABLE","$this",244],["T_OBJECT_OPERATOR","->",244],["T_STRING","getListener",244],"(",")",["T_WHITESPACE","\n                            ",244],["T_OBJECT_OPERATOR","->",245],["T_STRING","setHasError",245],"(",["T_STRING","true",245],")",["T_WHITESPACE","\n                            ",245],["T_OBJECT_OPERATOR","->",246],["T_STRING","setMessage",246],"(",["T_WHITESPACE","\n                                ",246],["T_VARIABLE","$this",247],["T_OBJECT_OPERATOR","->",247],["T_STRING","_getWrongConfigurationMessage",247],"(",")",["T_WHITESPACE","\n                            ",247],")",";",["T_WHITESPACE","\n                ",248],"}",["T_WHITESPACE","\n            ",249],"}",["T_WHITESPACE","\n        ",250],"}",["T_WHITESPACE","\n\n        ",251],["T_RETURN","return",253],["T_WHITESPACE"," ",253],["T_VARIABLE","$result",253],";",["T_WHITESPACE","\n    ",253],"}",["T_WHITESPACE","\n\n    ",254],["T_DOC_COMMENT","\/**\n     * Return SKU for selected option\n     *\n     * @param string $optionValue Prepared for cart option value\n     * @param string $skuDelimiter Delimiter for Sku parts\n     * @return string\n     *\/",256],["T_WHITESPACE","\n    ",262],["T_PUBLIC","public",263],["T_WHITESPACE"," ",263],["T_FUNCTION","function",263],["T_WHITESPACE"," ",263],["T_STRING","getOptionSku",263],"(",["T_VARIABLE","$optionValue",263],",",["T_WHITESPACE"," ",263],["T_VARIABLE","$skuDelimiter",263],")",["T_WHITESPACE","\n    ",263],"{",["T_WHITESPACE","\n        ",264],["T_VARIABLE","$option",265],["T_WHITESPACE"," ",265],"=",["T_WHITESPACE"," ",265],["T_VARIABLE","$this",265],["T_OBJECT_OPERATOR","->",265],["T_STRING","getOption",265],"(",")",";",["T_WHITESPACE","\n\n        ",265],["T_IF","if",267],["T_WHITESPACE"," ",267],"(","!",["T_VARIABLE","$this",267],["T_OBJECT_OPERATOR","->",267],["T_STRING","_isSingleSelection",267],"(",")",")",["T_WHITESPACE"," ",267],"{",["T_WHITESPACE","\n            ",267],["T_VARIABLE","$skus",268],["T_WHITESPACE"," ",268],"=",["T_WHITESPACE"," ",268],["T_ARRAY","array",268],"(",")",";",["T_WHITESPACE","\n            ",268],["T_FOREACH","foreach",269],"(",["T_STRING","explode",269],"(",["T_CONSTANT_ENCAPSED_STRING","','",269],",",["T_WHITESPACE"," ",269],["T_VARIABLE","$optionValue",269],")",["T_WHITESPACE"," ",269],["T_AS","as",269],["T_WHITESPACE"," ",269],["T_VARIABLE","$value",269],")",["T_WHITESPACE"," ",269],"{",["T_WHITESPACE","\n                ",269],["T_IF","if",270],["T_WHITESPACE"," ",270],"(",["T_VARIABLE","$optionSku",270],["T_WHITESPACE"," ",270],"=",["T_WHITESPACE"," ",270],["T_VARIABLE","$option",270],["T_OBJECT_OPERATOR","->",270],["T_STRING","getValueById",270],"(",["T_VARIABLE","$value",270],")",")",["T_WHITESPACE"," ",270],"{",["T_WHITESPACE","\n                    ",270],["T_VARIABLE","$skus",271],"[","]",["T_WHITESPACE"," ",271],"=",["T_WHITESPACE"," ",271],["T_VARIABLE","$optionSku",271],["T_OBJECT_OPERATOR","->",271],["T_STRING","getSku",271],"(",")",";",["T_WHITESPACE","\n                ",271],"}",["T_WHITESPACE"," ",272],["T_ELSE","else",272],["T_WHITESPACE"," ",272],"{",["T_WHITESPACE","\n                    ",272],["T_IF","if",273],["T_WHITESPACE"," ",273],"(",["T_VARIABLE","$this",273],["T_OBJECT_OPERATOR","->",273],["T_STRING","getListener",273],"(",")",")",["T_WHITESPACE"," ",273],"{",["T_WHITESPACE","\n                        ",273],["T_VARIABLE","$this",274],["T_OBJECT_OPERATOR","->",274],["T_STRING","getListener",274],"(",")",["T_WHITESPACE","\n                                ",274],["T_OBJECT_OPERATOR","->",275],["T_STRING","setHasError",275],"(",["T_STRING","true",275],")",["T_WHITESPACE","\n                                ",275],["T_OBJECT_OPERATOR","->",276],["T_STRING","setMessage",276],"(",["T_WHITESPACE","\n                                    ",276],["T_VARIABLE","$this",277],["T_OBJECT_OPERATOR","->",277],["T_STRING","_getWrongConfigurationMessage",277],"(",")",["T_WHITESPACE","\n                                ",277],")",";",["T_WHITESPACE","\n                        ",278],["T_BREAK","break",279],";",["T_WHITESPACE","\n                    ",279],"}",["T_WHITESPACE","\n                ",280],"}",["T_WHITESPACE","\n            ",281],"}",["T_WHITESPACE","\n            ",282],["T_VARIABLE","$result",283],["T_WHITESPACE"," ",283],"=",["T_WHITESPACE"," ",283],["T_STRING","implode",283],"(",["T_VARIABLE","$skuDelimiter",283],",",["T_WHITESPACE"," ",283],["T_VARIABLE","$skus",283],")",";",["T_WHITESPACE","\n        ",283],"}",["T_WHITESPACE"," ",284],["T_ELSEIF","elseif",284],["T_WHITESPACE"," ",284],"(",["T_VARIABLE","$this",284],["T_OBJECT_OPERATOR","->",284],["T_STRING","_isSingleSelection",284],"(",")",")",["T_WHITESPACE"," ",284],"{",["T_WHITESPACE","\n            ",284],["T_IF","if",285],["T_WHITESPACE"," ",285],"(",["T_VARIABLE","$result",285],["T_WHITESPACE"," ",285],"=",["T_WHITESPACE"," ",285],["T_VARIABLE","$option",285],["T_OBJECT_OPERATOR","->",285],["T_STRING","getValueById",285],"(",["T_VARIABLE","$optionValue",285],")",")",["T_WHITESPACE"," ",285],"{",["T_WHITESPACE","\n                ",285],["T_RETURN","return",286],["T_WHITESPACE"," ",286],["T_VARIABLE","$result",286],["T_OBJECT_OPERATOR","->",286],["T_STRING","getSku",286],"(",")",";",["T_WHITESPACE","\n            ",286],"}",["T_WHITESPACE"," ",287],["T_ELSE","else",287],["T_WHITESPACE"," ",287],"{",["T_WHITESPACE","\n                ",287],["T_IF","if",288],["T_WHITESPACE"," ",288],"(",["T_VARIABLE","$this",288],["T_OBJECT_OPERATOR","->",288],["T_STRING","getListener",288],"(",")",")",["T_WHITESPACE"," ",288],"{",["T_WHITESPACE","\n                    ",288],["T_VARIABLE","$this",289],["T_OBJECT_OPERATOR","->",289],["T_STRING","getListener",289],"(",")",["T_WHITESPACE","\n                            ",289],["T_OBJECT_OPERATOR","->",290],["T_STRING","setHasError",290],"(",["T_STRING","true",290],")",["T_WHITESPACE","\n                            ",290],["T_OBJECT_OPERATOR","->",291],["T_STRING","setMessage",291],"(",["T_WHITESPACE","\n                                ",291],["T_VARIABLE","$this",292],["T_OBJECT_OPERATOR","->",292],["T_STRING","_getWrongConfigurationMessage",292],"(",")",["T_WHITESPACE","\n                            ",292],")",";",["T_WHITESPACE","\n                ",293],"}",["T_WHITESPACE","\n                ",294],["T_RETURN","return",295],["T_WHITESPACE"," ",295],["T_CONSTANT_ENCAPSED_STRING","''",295],";",["T_WHITESPACE","\n            ",295],"}",["T_WHITESPACE","\n        ",296],"}",["T_WHITESPACE"," ",297],["T_ELSE","else",297],["T_WHITESPACE"," ",297],"{",["T_WHITESPACE","\n            ",297],["T_VARIABLE","$result",298],["T_WHITESPACE"," ",298],"=",["T_WHITESPACE"," ",298],["T_STRING","parent",298],["T_DOUBLE_COLON","::",298],["T_STRING","getOptionSku",298],"(",["T_VARIABLE","$optionValue",298],",",["T_WHITESPACE"," ",298],["T_VARIABLE","$skuDelimiter",298],")",";",["T_WHITESPACE","\n        ",298],"}",["T_WHITESPACE","\n\n        ",299],["T_RETURN","return",301],["T_WHITESPACE"," ",301],["T_VARIABLE","$result",301],";",["T_WHITESPACE","\n    ",301],"}",["T_WHITESPACE","\n\n    ",302],["T_DOC_COMMENT","\/**\n     * Check if option has single or multiple values selection\n     *\n     * @return boolean\n     *\/",304],["T_WHITESPACE","\n    ",308],["T_PROTECTED","protected",309],["T_WHITESPACE"," ",309],["T_FUNCTION","function",309],["T_WHITESPACE"," ",309],["T_STRING","_isSingleSelection",309],"(",")",["T_WHITESPACE","\n    ",309],"{",["T_WHITESPACE","\n        ",310],["T_VARIABLE","$_single",311],["T_WHITESPACE"," ",311],"=",["T_WHITESPACE"," ",311],["T_ARRAY","array",311],"(",["T_WHITESPACE","\n            ",311],["T_STRING","Mage_Catalog_Model_Product_Option",312],["T_DOUBLE_COLON","::",312],["T_STRING","OPTION_TYPE_DROP_DOWN",312],",",["T_WHITESPACE","\n            ",312],["T_STRING","Mage_Catalog_Model_Product_Option",313],["T_DOUBLE_COLON","::",313],["T_STRING","OPTION_TYPE_RADIO",313],["T_WHITESPACE","\n        ",313],")",";",["T_WHITESPACE","\n        ",314],["T_RETURN","return",315],["T_WHITESPACE"," ",315],["T_STRING","in_array",315],"(",["T_VARIABLE","$this",315],["T_OBJECT_OPERATOR","->",315],["T_STRING","getOption",315],"(",")",["T_OBJECT_OPERATOR","->",315],["T_STRING","getType",315],"(",")",",",["T_WHITESPACE"," ",315],["T_VARIABLE","$_single",315],")",";",["T_WHITESPACE","\n    ",315],"}",["T_WHITESPACE","\n",316],"}",["T_WHITESPACE","\n",317]]
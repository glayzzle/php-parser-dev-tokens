[["T_OPEN_TAG","<?php\n",1],["T_DOC_COMMENT","\/**\n * Magento\n *\n * NOTICE OF LICENSE\n *\n * This source file is subject to the Open Software License (OSL 3.0)\n * that is bundled with this package in the file LICENSE.txt.\n * It is also available through the world-wide-web at this URL:\n * http:\/\/opensource.org\/licenses\/osl-3.0.php\n * If you did not receive a copy of the license and are unable to\n * obtain it through the world-wide-web, please send an email\n * to license@magento.com so we can send you a copy immediately.\n *\n * DISCLAIMER\n *\n * Do not edit or add to this file if you wish to upgrade Magento to newer\n * versions in the future. If you wish to customize Magento for your\n * needs please refer to http:\/\/www.magento.com for more information.\n *\n * @category    Mage\n * @package     Mage_Catalog\n * @copyright  Copyright (c) 2006-2016 X.commerce, Inc. and affiliates (http:\/\/www.magento.com)\n * @license    http:\/\/opensource.org\/licenses\/osl-3.0.php  Open Software License (OSL 3.0)\n *\/",2],["T_WHITESPACE","\n\n",25],["T_DOC_COMMENT","\/**\n * Catalog product api V2\n *\n * @category   Mage\n * @package    Mage_Catalog\n * @author     Magento Core Team <core@magentocommerce.com>\n *\/",27],["T_WHITESPACE","\n",33],["T_CLASS","class",34],["T_WHITESPACE"," ",34],["T_STRING","Mage_Catalog_Model_Product_Api_V2",34],["T_WHITESPACE"," ",34],["T_EXTENDS","extends",34],["T_WHITESPACE"," ",34],["T_STRING","Mage_Catalog_Model_Product_Api",34],["T_WHITESPACE","\n",34],"{",["T_WHITESPACE","\n    ",35],["T_DOC_COMMENT","\/**\n     * Retrieve product info\n     *\n     * @param int|string $productId\n     * @param string|int $store\n     * @param stdClass   $attributes\n     * @param string     $identifierType\n     * @return array\n     *\/",36],["T_WHITESPACE","\n    ",44],["T_PUBLIC","public",45],["T_WHITESPACE"," ",45],["T_FUNCTION","function",45],["T_WHITESPACE"," ",45],["T_STRING","info",45],"(",["T_VARIABLE","$productId",45],",",["T_WHITESPACE"," ",45],["T_VARIABLE","$store",45],["T_WHITESPACE"," ",45],"=",["T_WHITESPACE"," ",45],["T_STRING","null",45],",",["T_WHITESPACE"," ",45],["T_VARIABLE","$attributes",45],["T_WHITESPACE"," ",45],"=",["T_WHITESPACE"," ",45],["T_STRING","null",45],",",["T_WHITESPACE"," ",45],["T_VARIABLE","$identifierType",45],["T_WHITESPACE"," ",45],"=",["T_WHITESPACE"," ",45],["T_STRING","null",45],")",["T_WHITESPACE","\n    ",45],"{",["T_WHITESPACE","\n        ",46],["T_COMMENT","\/\/ make sku flag case-insensitive\n",47],["T_WHITESPACE","        ",48],["T_IF","if",48],["T_WHITESPACE"," ",48],"(","!",["T_EMPTY","empty",48],"(",["T_VARIABLE","$identifierType",48],")",")",["T_WHITESPACE"," ",48],"{",["T_WHITESPACE","\n            ",48],["T_VARIABLE","$identifierType",49],["T_WHITESPACE"," ",49],"=",["T_WHITESPACE"," ",49],["T_STRING","strtolower",49],"(",["T_VARIABLE","$identifierType",49],")",";",["T_WHITESPACE","\n        ",49],"}",["T_WHITESPACE","\n\n        ",50],["T_VARIABLE","$product",52],["T_WHITESPACE"," ",52],"=",["T_WHITESPACE"," ",52],["T_VARIABLE","$this",52],["T_OBJECT_OPERATOR","->",52],["T_STRING","_getProduct",52],"(",["T_VARIABLE","$productId",52],",",["T_WHITESPACE"," ",52],["T_VARIABLE","$store",52],",",["T_WHITESPACE"," ",52],["T_VARIABLE","$identifierType",52],")",";",["T_WHITESPACE","\n\n        ",52],["T_VARIABLE","$result",54],["T_WHITESPACE"," ",54],"=",["T_WHITESPACE"," ",54],["T_ARRAY","array",54],"(",["T_WHITESPACE"," ",54],["T_COMMENT","\/\/ Basic product data\n",54],["T_WHITESPACE","            ",55],["T_CONSTANT_ENCAPSED_STRING","'product_id'",55],["T_WHITESPACE"," ",55],["T_DOUBLE_ARROW","=>",55],["T_WHITESPACE"," ",55],["T_VARIABLE","$product",55],["T_OBJECT_OPERATOR","->",55],["T_STRING","getId",55],"(",")",",",["T_WHITESPACE","\n            ",55],["T_CONSTANT_ENCAPSED_STRING","'sku'",56],["T_WHITESPACE","        ",56],["T_DOUBLE_ARROW","=>",56],["T_WHITESPACE"," ",56],["T_VARIABLE","$product",56],["T_OBJECT_OPERATOR","->",56],["T_STRING","getSku",56],"(",")",",",["T_WHITESPACE","\n            ",56],["T_CONSTANT_ENCAPSED_STRING","'set'",57],["T_WHITESPACE","        ",57],["T_DOUBLE_ARROW","=>",57],["T_WHITESPACE"," ",57],["T_VARIABLE","$product",57],["T_OBJECT_OPERATOR","->",57],["T_STRING","getAttributeSetId",57],"(",")",",",["T_WHITESPACE","\n            ",57],["T_CONSTANT_ENCAPSED_STRING","'type'",58],["T_WHITESPACE","       ",58],["T_DOUBLE_ARROW","=>",58],["T_WHITESPACE"," ",58],["T_VARIABLE","$product",58],["T_OBJECT_OPERATOR","->",58],["T_STRING","getTypeId",58],"(",")",",",["T_WHITESPACE","\n            ",58],["T_CONSTANT_ENCAPSED_STRING","'categories'",59],["T_WHITESPACE"," ",59],["T_DOUBLE_ARROW","=>",59],["T_WHITESPACE"," ",59],["T_VARIABLE","$product",59],["T_OBJECT_OPERATOR","->",59],["T_STRING","getCategoryIds",59],"(",")",",",["T_WHITESPACE","\n            ",59],["T_CONSTANT_ENCAPSED_STRING","'websites'",60],["T_WHITESPACE","   ",60],["T_DOUBLE_ARROW","=>",60],["T_WHITESPACE"," ",60],["T_VARIABLE","$product",60],["T_OBJECT_OPERATOR","->",60],["T_STRING","getWebsiteIds",60],"(",")",["T_WHITESPACE","\n        ",60],")",";",["T_WHITESPACE","\n\n        ",61],["T_VARIABLE","$allAttributes",63],["T_WHITESPACE"," ",63],"=",["T_WHITESPACE"," ",63],["T_ARRAY","array",63],"(",")",";",["T_WHITESPACE","\n        ",63],["T_IF","if",64],["T_WHITESPACE"," ",64],"(","!",["T_EMPTY","empty",64],"(",["T_VARIABLE","$attributes",64],["T_OBJECT_OPERATOR","->",64],["T_STRING","attributes",64],")",")",["T_WHITESPACE"," ",64],"{",["T_WHITESPACE","\n            ",64],["T_VARIABLE","$allAttributes",65],["T_WHITESPACE"," ",65],"=",["T_WHITESPACE"," ",65],["T_STRING","array_merge",65],"(",["T_VARIABLE","$allAttributes",65],",",["T_WHITESPACE"," ",65],["T_VARIABLE","$attributes",65],["T_OBJECT_OPERATOR","->",65],["T_STRING","attributes",65],")",";",["T_WHITESPACE","\n        ",65],"}",["T_WHITESPACE"," ",66],["T_ELSE","else",66],["T_WHITESPACE"," ",66],"{",["T_WHITESPACE","\n            ",66],["T_FOREACH","foreach",67],["T_WHITESPACE"," ",67],"(",["T_VARIABLE","$product",67],["T_OBJECT_OPERATOR","->",67],["T_STRING","getTypeInstance",67],"(",["T_STRING","true",67],")",["T_OBJECT_OPERATOR","->",67],["T_STRING","getEditableAttributes",67],"(",["T_VARIABLE","$product",67],")",["T_WHITESPACE"," ",67],["T_AS","as",67],["T_WHITESPACE"," ",67],["T_VARIABLE","$attribute",67],")",["T_WHITESPACE"," ",67],"{",["T_WHITESPACE","\n                ",67],["T_IF","if",68],["T_WHITESPACE"," ",68],"(",["T_VARIABLE","$this",68],["T_OBJECT_OPERATOR","->",68],["T_STRING","_isAllowedAttribute",68],"(",["T_VARIABLE","$attribute",68],",",["T_WHITESPACE"," ",68],["T_VARIABLE","$attributes",68],")",")",["T_WHITESPACE"," ",68],"{",["T_WHITESPACE","\n                    ",68],["T_VARIABLE","$allAttributes",69],"[","]",["T_WHITESPACE"," ",69],"=",["T_WHITESPACE"," ",69],["T_VARIABLE","$attribute",69],["T_OBJECT_OPERATOR","->",69],["T_STRING","getAttributeCode",69],"(",")",";",["T_WHITESPACE","\n                ",69],"}",["T_WHITESPACE","\n            ",70],"}",["T_WHITESPACE","\n        ",71],"}",["T_WHITESPACE","\n\n        ",72],["T_VARIABLE","$_additionalAttributeCodes",74],["T_WHITESPACE"," ",74],"=",["T_WHITESPACE"," ",74],["T_ARRAY","array",74],"(",")",";",["T_WHITESPACE","\n        ",74],["T_IF","if",75],["T_WHITESPACE"," ",75],"(","!",["T_EMPTY","empty",75],"(",["T_VARIABLE","$attributes",75],["T_OBJECT_OPERATOR","->",75],["T_STRING","additional_attributes",75],")",")",["T_WHITESPACE"," ",75],"{",["T_WHITESPACE","\n            ",75],["T_FOREACH","foreach",76],["T_WHITESPACE"," ",76],"(",["T_VARIABLE","$attributes",76],["T_OBJECT_OPERATOR","->",76],["T_STRING","additional_attributes",76],["T_WHITESPACE"," ",76],["T_AS","as",76],["T_WHITESPACE"," ",76],["T_VARIABLE","$k",76],["T_WHITESPACE"," ",76],["T_DOUBLE_ARROW","=>",76],["T_WHITESPACE"," ",76],["T_VARIABLE","$_attributeCode",76],")",["T_WHITESPACE"," ",76],"{",["T_WHITESPACE","\n                ",76],["T_VARIABLE","$allAttributes",77],"[","]",["T_WHITESPACE"," ",77],"=",["T_WHITESPACE"," ",77],["T_VARIABLE","$_attributeCode",77],";",["T_WHITESPACE","\n                ",77],["T_VARIABLE","$_additionalAttributeCodes",78],"[","]",["T_WHITESPACE"," ",78],"=",["T_WHITESPACE"," ",78],["T_VARIABLE","$_attributeCode",78],";",["T_WHITESPACE","\n            ",78],"}",["T_WHITESPACE","\n        ",79],"}",["T_WHITESPACE","\n\n        ",80],["T_VARIABLE","$_additionalAttribute",82],["T_WHITESPACE"," ",82],"=",["T_WHITESPACE"," ",82],["T_LNUMBER","0",82],";",["T_WHITESPACE","\n        ",82],["T_FOREACH","foreach",83],["T_WHITESPACE"," ",83],"(",["T_VARIABLE","$product",83],["T_OBJECT_OPERATOR","->",83],["T_STRING","getTypeInstance",83],"(",["T_STRING","true",83],")",["T_OBJECT_OPERATOR","->",83],["T_STRING","getEditableAttributes",83],"(",["T_VARIABLE","$product",83],")",["T_WHITESPACE"," ",83],["T_AS","as",83],["T_WHITESPACE"," ",83],["T_VARIABLE","$attribute",83],")",["T_WHITESPACE"," ",83],"{",["T_WHITESPACE","\n            ",83],["T_IF","if",84],["T_WHITESPACE"," ",84],"(",["T_VARIABLE","$this",84],["T_OBJECT_OPERATOR","->",84],["T_STRING","_isAllowedAttribute",84],"(",["T_VARIABLE","$attribute",84],",",["T_WHITESPACE"," ",84],["T_VARIABLE","$allAttributes",84],")",")",["T_WHITESPACE"," ",84],"{",["T_WHITESPACE","\n                ",84],["T_IF","if",85],["T_WHITESPACE"," ",85],"(",["T_STRING","in_array",85],"(",["T_VARIABLE","$attribute",85],["T_OBJECT_OPERATOR","->",85],["T_STRING","getAttributeCode",85],"(",")",",",["T_WHITESPACE"," ",85],["T_VARIABLE","$_additionalAttributeCodes",85],")",")",["T_WHITESPACE"," ",85],"{",["T_WHITESPACE","\n                    ",85],["T_VARIABLE","$result",86],"[",["T_CONSTANT_ENCAPSED_STRING","'additional_attributes'",86],"]","[",["T_VARIABLE","$_additionalAttribute",86],"]","[",["T_CONSTANT_ENCAPSED_STRING","'key'",86],"]",["T_WHITESPACE"," ",86],"=",["T_WHITESPACE"," ",86],["T_VARIABLE","$attribute",86],["T_OBJECT_OPERATOR","->",86],["T_STRING","getAttributeCode",86],"(",")",";",["T_WHITESPACE","\n                    ",86],["T_VARIABLE","$result",87],"[",["T_CONSTANT_ENCAPSED_STRING","'additional_attributes'",87],"]","[",["T_VARIABLE","$_additionalAttribute",87],"]","[",["T_CONSTANT_ENCAPSED_STRING","'value'",87],"]",["T_WHITESPACE"," ",87],"=",["T_WHITESPACE"," ",87],["T_VARIABLE","$product",87],["T_WHITESPACE","\n                        ",87],["T_OBJECT_OPERATOR","->",88],["T_STRING","getData",88],"(",["T_VARIABLE","$attribute",88],["T_OBJECT_OPERATOR","->",88],["T_STRING","getAttributeCode",88],"(",")",")",";",["T_WHITESPACE","\n                    ",88],["T_VARIABLE","$_additionalAttribute",89],["T_INC","++",89],";",["T_WHITESPACE","\n                ",89],"}",["T_WHITESPACE"," ",90],["T_ELSE","else",90],["T_WHITESPACE"," ",90],"{",["T_WHITESPACE","\n                    ",90],["T_VARIABLE","$result",91],"[",["T_VARIABLE","$attribute",91],["T_OBJECT_OPERATOR","->",91],["T_STRING","getAttributeCode",91],"(",")","]",["T_WHITESPACE"," ",91],"=",["T_WHITESPACE"," ",91],["T_VARIABLE","$product",91],["T_OBJECT_OPERATOR","->",91],["T_STRING","getData",91],"(",["T_VARIABLE","$attribute",91],["T_OBJECT_OPERATOR","->",91],["T_STRING","getAttributeCode",91],"(",")",")",";",["T_WHITESPACE","\n                ",91],"}",["T_WHITESPACE","\n            ",92],"}",["T_WHITESPACE","\n        ",93],"}",["T_WHITESPACE","\n\n        ",94],["T_RETURN","return",96],["T_WHITESPACE"," ",96],["T_VARIABLE","$result",96],";",["T_WHITESPACE","\n    ",96],"}",["T_WHITESPACE","\n\n    ",97],["T_DOC_COMMENT","\/**\n     * Create new product.\n     *\n     * @param string $type\n     * @param int $set\n     * @param string $sku\n     * @param array $productData\n     * @param string $store\n     * @return int\n     *\/",99],["T_WHITESPACE","\n    ",108],["T_PUBLIC","public",109],["T_WHITESPACE"," ",109],["T_FUNCTION","function",109],["T_WHITESPACE"," ",109],["T_STRING","create",109],"(",["T_VARIABLE","$type",109],",",["T_WHITESPACE"," ",109],["T_VARIABLE","$set",109],",",["T_WHITESPACE"," ",109],["T_VARIABLE","$sku",109],",",["T_WHITESPACE"," ",109],["T_VARIABLE","$productData",109],",",["T_WHITESPACE"," ",109],["T_VARIABLE","$store",109],["T_WHITESPACE"," ",109],"=",["T_WHITESPACE"," ",109],["T_STRING","null",109],")",["T_WHITESPACE","\n    ",109],"{",["T_WHITESPACE","\n        ",110],["T_IF","if",111],["T_WHITESPACE"," ",111],"(","!",["T_VARIABLE","$type",111],["T_WHITESPACE"," ",111],["T_BOOLEAN_OR","||",111],["T_WHITESPACE"," ",111],"!",["T_VARIABLE","$set",111],["T_WHITESPACE"," ",111],["T_BOOLEAN_OR","||",111],["T_WHITESPACE"," ",111],"!",["T_VARIABLE","$sku",111],["T_WHITESPACE"," ",111],["T_BOOLEAN_OR","||",111],["T_WHITESPACE"," ",111],"!",["T_STRING","is_object",111],"(",["T_VARIABLE","$productData",111],")",")",["T_WHITESPACE"," ",111],"{",["T_WHITESPACE","\n            ",111],["T_VARIABLE","$this",112],["T_OBJECT_OPERATOR","->",112],["T_STRING","_fault",112],"(",["T_CONSTANT_ENCAPSED_STRING","'data_invalid'",112],")",";",["T_WHITESPACE","\n        ",112],"}",["T_WHITESPACE","\n\n        ",113],["T_VARIABLE","$this",115],["T_OBJECT_OPERATOR","->",115],["T_STRING","_checkProductTypeExists",115],"(",["T_VARIABLE","$type",115],")",";",["T_WHITESPACE","\n        ",115],["T_VARIABLE","$this",116],["T_OBJECT_OPERATOR","->",116],["T_STRING","_checkProductAttributeSet",116],"(",["T_VARIABLE","$set",116],")",";",["T_WHITESPACE","\n\n        ",116],["T_DOC_COMMENT","\/** @var $product Mage_Catalog_Model_Product *\/",118],["T_WHITESPACE","\n        ",118],["T_VARIABLE","$product",119],["T_WHITESPACE"," ",119],"=",["T_WHITESPACE"," ",119],["T_STRING","Mage",119],["T_DOUBLE_COLON","::",119],["T_STRING","getModel",119],"(",["T_CONSTANT_ENCAPSED_STRING","'catalog\/product'",119],")",";",["T_WHITESPACE","\n        ",119],["T_VARIABLE","$product",120],["T_OBJECT_OPERATOR","->",120],["T_STRING","setStoreId",120],"(",["T_VARIABLE","$this",120],["T_OBJECT_OPERATOR","->",120],["T_STRING","_getStoreId",120],"(",["T_VARIABLE","$store",120],")",")",["T_WHITESPACE","\n            ",120],["T_OBJECT_OPERATOR","->",121],["T_STRING","setAttributeSetId",121],"(",["T_VARIABLE","$set",121],")",["T_WHITESPACE","\n            ",121],["T_OBJECT_OPERATOR","->",122],["T_STRING","setTypeId",122],"(",["T_VARIABLE","$type",122],")",["T_WHITESPACE","\n            ",122],["T_OBJECT_OPERATOR","->",123],["T_STRING","setSku",123],"(",["T_VARIABLE","$sku",123],")",";",["T_WHITESPACE","\n\n        ",123],["T_IF","if",125],["T_WHITESPACE"," ",125],"(","!",["T_STRING","property_exists",125],"(",["T_VARIABLE","$productData",125],",",["T_WHITESPACE"," ",125],["T_CONSTANT_ENCAPSED_STRING","'stock_data'",125],")",")",["T_WHITESPACE"," ",125],"{",["T_WHITESPACE","\n            ",125],["T_COMMENT","\/\/Set default stock_data if not exist in product data\n",126],["T_WHITESPACE","            ",127],["T_VARIABLE","$_stockData",127],["T_WHITESPACE"," ",127],"=",["T_WHITESPACE"," ",127],["T_ARRAY","array",127],"(",["T_CONSTANT_ENCAPSED_STRING","'use_config_manage_stock'",127],["T_WHITESPACE"," ",127],["T_DOUBLE_ARROW","=>",127],["T_WHITESPACE"," ",127],["T_LNUMBER","0",127],")",";",["T_WHITESPACE","\n            ",127],["T_VARIABLE","$product",128],["T_OBJECT_OPERATOR","->",128],["T_STRING","setStockData",128],"(",["T_VARIABLE","$_stockData",128],")",";",["T_WHITESPACE","\n        ",128],"}",["T_WHITESPACE","\n\n        ",129],["T_FOREACH","foreach",131],["T_WHITESPACE"," ",131],"(",["T_VARIABLE","$product",131],["T_OBJECT_OPERATOR","->",131],["T_STRING","getMediaAttributes",131],"(",")",["T_WHITESPACE"," ",131],["T_AS","as",131],["T_WHITESPACE"," ",131],["T_VARIABLE","$mediaAttribute",131],")",["T_WHITESPACE"," ",131],"{",["T_WHITESPACE","\n            ",131],["T_VARIABLE","$mediaAttrCode",132],["T_WHITESPACE"," ",132],"=",["T_WHITESPACE"," ",132],["T_VARIABLE","$mediaAttribute",132],["T_OBJECT_OPERATOR","->",132],["T_STRING","getAttributeCode",132],"(",")",";",["T_WHITESPACE","\n            ",132],["T_VARIABLE","$product",133],["T_OBJECT_OPERATOR","->",133],["T_STRING","setData",133],"(",["T_VARIABLE","$mediaAttrCode",133],",",["T_WHITESPACE"," ",133],["T_CONSTANT_ENCAPSED_STRING","'no_selection'",133],")",";",["T_WHITESPACE","\n        ",133],"}",["T_WHITESPACE","\n\n        ",134],["T_VARIABLE","$this",136],["T_OBJECT_OPERATOR","->",136],["T_STRING","_prepareDataForSave",136],"(",["T_VARIABLE","$product",136],",",["T_WHITESPACE"," ",136],["T_VARIABLE","$productData",136],")",";",["T_WHITESPACE","\n\n        ",136],["T_TRY","try",138],["T_WHITESPACE"," ",138],"{",["T_WHITESPACE","\n            ",138],["T_DOC_COMMENT","\/**\n             * @todo implement full validation process with errors returning which are ignoring now\n             * @todo see Mage_Catalog_Model_Product::validate()\n             *\/",139],["T_WHITESPACE","\n            ",142],["T_IF","if",143],["T_WHITESPACE"," ",143],"(",["T_STRING","is_array",143],"(",["T_VARIABLE","$errors",143],["T_WHITESPACE"," ",143],"=",["T_WHITESPACE"," ",143],["T_VARIABLE","$product",143],["T_OBJECT_OPERATOR","->",143],["T_STRING","validate",143],"(",")",")",")",["T_WHITESPACE"," ",143],"{",["T_WHITESPACE","\n                ",143],["T_VARIABLE","$strErrors",144],["T_WHITESPACE"," ",144],"=",["T_WHITESPACE"," ",144],["T_ARRAY","array",144],"(",")",";",["T_WHITESPACE","\n                ",144],["T_FOREACH","foreach",145],"(",["T_VARIABLE","$errors",145],["T_WHITESPACE"," ",145],["T_AS","as",145],["T_WHITESPACE"," ",145],["T_VARIABLE","$code",145],["T_WHITESPACE"," ",145],["T_DOUBLE_ARROW","=>",145],["T_WHITESPACE"," ",145],["T_VARIABLE","$error",145],")",["T_WHITESPACE"," ",145],"{",["T_WHITESPACE","\n                    ",145],["T_IF","if",146],["T_WHITESPACE"," ",146],"(",["T_VARIABLE","$error",146],["T_WHITESPACE"," ",146],["T_IS_IDENTICAL","===",146],["T_WHITESPACE"," ",146],["T_STRING","true",146],")",["T_WHITESPACE"," ",146],"{",["T_WHITESPACE","\n                        ",146],["T_VARIABLE","$error",147],["T_WHITESPACE"," ",147],"=",["T_WHITESPACE"," ",147],["T_STRING","Mage",147],["T_DOUBLE_COLON","::",147],["T_STRING","helper",147],"(",["T_CONSTANT_ENCAPSED_STRING","'catalog'",147],")",["T_OBJECT_OPERATOR","->",147],["T_STRING","__",147],"(",["T_CONSTANT_ENCAPSED_STRING","'Attribute \"%s\" is invalid.'",147],",",["T_WHITESPACE"," ",147],["T_VARIABLE","$code",147],")",";",["T_WHITESPACE","\n                    ",147],"}",["T_WHITESPACE","\n                    ",148],["T_VARIABLE","$strErrors",149],"[","]",["T_WHITESPACE"," ",149],"=",["T_WHITESPACE"," ",149],["T_VARIABLE","$error",149],";",["T_WHITESPACE","\n                ",149],"}",["T_WHITESPACE","\n                ",150],["T_VARIABLE","$this",151],["T_OBJECT_OPERATOR","->",151],["T_STRING","_fault",151],"(",["T_CONSTANT_ENCAPSED_STRING","'data_invalid'",151],",",["T_WHITESPACE"," ",151],["T_STRING","implode",151],"(",["T_CONSTANT_ENCAPSED_STRING","\"\\n\"",151],",",["T_WHITESPACE"," ",151],["T_VARIABLE","$strErrors",151],")",")",";",["T_WHITESPACE","\n            ",151],"}",["T_WHITESPACE","\n\n            ",152],["T_VARIABLE","$product",154],["T_OBJECT_OPERATOR","->",154],["T_STRING","save",154],"(",")",";",["T_WHITESPACE","\n        ",154],"}",["T_WHITESPACE"," ",155],["T_CATCH","catch",155],["T_WHITESPACE"," ",155],"(",["T_STRING","Mage_Core_Exception",155],["T_WHITESPACE"," ",155],["T_VARIABLE","$e",155],")",["T_WHITESPACE"," ",155],"{",["T_WHITESPACE","\n            ",155],["T_VARIABLE","$this",156],["T_OBJECT_OPERATOR","->",156],["T_STRING","_fault",156],"(",["T_CONSTANT_ENCAPSED_STRING","'data_invalid'",156],",",["T_WHITESPACE"," ",156],["T_VARIABLE","$e",156],["T_OBJECT_OPERATOR","->",156],["T_STRING","getMessage",156],"(",")",")",";",["T_WHITESPACE","\n        ",156],"}",["T_WHITESPACE","\n\n        ",157],["T_RETURN","return",159],["T_WHITESPACE"," ",159],["T_VARIABLE","$product",159],["T_OBJECT_OPERATOR","->",159],["T_STRING","getId",159],"(",")",";",["T_WHITESPACE","\n    ",159],"}",["T_WHITESPACE","\n\n    ",160],["T_DOC_COMMENT","\/**\n     * Update product data\n     *\n     * @param int|string $productId\n     * @param array $productData\n     * @param string|int $store\n     * @return boolean\n     *\/",162],["T_WHITESPACE","\n    ",169],["T_PUBLIC","public",170],["T_WHITESPACE"," ",170],["T_FUNCTION","function",170],["T_WHITESPACE"," ",170],["T_STRING","update",170],"(",["T_VARIABLE","$productId",170],",",["T_WHITESPACE"," ",170],["T_VARIABLE","$productData",170],",",["T_WHITESPACE"," ",170],["T_VARIABLE","$store",170],["T_WHITESPACE"," ",170],"=",["T_WHITESPACE"," ",170],["T_STRING","null",170],",",["T_WHITESPACE"," ",170],["T_VARIABLE","$identifierType",170],["T_WHITESPACE"," ",170],"=",["T_WHITESPACE"," ",170],["T_STRING","null",170],")",["T_WHITESPACE","\n    ",170],"{",["T_WHITESPACE","\n        ",171],["T_VARIABLE","$product",172],["T_WHITESPACE"," ",172],"=",["T_WHITESPACE"," ",172],["T_VARIABLE","$this",172],["T_OBJECT_OPERATOR","->",172],["T_STRING","_getProduct",172],"(",["T_VARIABLE","$productId",172],",",["T_WHITESPACE"," ",172],["T_VARIABLE","$store",172],",",["T_WHITESPACE"," ",172],["T_VARIABLE","$identifierType",172],")",";",["T_WHITESPACE","\n\n        ",172],["T_VARIABLE","$this",174],["T_OBJECT_OPERATOR","->",174],["T_STRING","_prepareDataForSave",174],"(",["T_VARIABLE","$product",174],",",["T_WHITESPACE"," ",174],["T_VARIABLE","$productData",174],")",";",["T_WHITESPACE","\n\n        ",174],["T_TRY","try",176],["T_WHITESPACE"," ",176],"{",["T_WHITESPACE","\n            ",176],["T_DOC_COMMENT","\/**\n             * @todo implement full validation process with errors returning which are ignoring now\n             * @todo see Mage_Catalog_Model_Product::validate()\n             *\/",177],["T_WHITESPACE","\n            ",180],["T_IF","if",181],["T_WHITESPACE"," ",181],"(",["T_STRING","is_array",181],"(",["T_VARIABLE","$errors",181],["T_WHITESPACE"," ",181],"=",["T_WHITESPACE"," ",181],["T_VARIABLE","$product",181],["T_OBJECT_OPERATOR","->",181],["T_STRING","validate",181],"(",")",")",")",["T_WHITESPACE"," ",181],"{",["T_WHITESPACE","\n                ",181],["T_VARIABLE","$strErrors",182],["T_WHITESPACE"," ",182],"=",["T_WHITESPACE"," ",182],["T_ARRAY","array",182],"(",")",";",["T_WHITESPACE","\n                ",182],["T_FOREACH","foreach",183],"(",["T_VARIABLE","$errors",183],["T_WHITESPACE"," ",183],["T_AS","as",183],["T_WHITESPACE"," ",183],["T_VARIABLE","$code",183],["T_WHITESPACE"," ",183],["T_DOUBLE_ARROW","=>",183],["T_WHITESPACE"," ",183],["T_VARIABLE","$error",183],")",["T_WHITESPACE"," ",183],"{",["T_WHITESPACE","\n                    ",183],["T_IF","if",184],["T_WHITESPACE"," ",184],"(",["T_VARIABLE","$error",184],["T_WHITESPACE"," ",184],["T_IS_IDENTICAL","===",184],["T_WHITESPACE"," ",184],["T_STRING","true",184],")",["T_WHITESPACE"," ",184],"{",["T_WHITESPACE","\n                        ",184],["T_VARIABLE","$error",185],["T_WHITESPACE"," ",185],"=",["T_WHITESPACE"," ",185],["T_STRING","Mage",185],["T_DOUBLE_COLON","::",185],["T_STRING","helper",185],"(",["T_CONSTANT_ENCAPSED_STRING","'catalog'",185],")",["T_OBJECT_OPERATOR","->",185],["T_STRING","__",185],"(",["T_CONSTANT_ENCAPSED_STRING","'Value for \"%s\" is invalid.'",185],",",["T_WHITESPACE"," ",185],["T_VARIABLE","$code",185],")",";",["T_WHITESPACE","\n                    ",185],"}",["T_WHITESPACE"," ",186],["T_ELSE","else",186],["T_WHITESPACE"," ",186],"{",["T_WHITESPACE","\n                        ",186],["T_VARIABLE","$error",187],["T_WHITESPACE"," ",187],"=",["T_WHITESPACE"," ",187],["T_STRING","Mage",187],["T_DOUBLE_COLON","::",187],["T_STRING","helper",187],"(",["T_CONSTANT_ENCAPSED_STRING","'catalog'",187],")",["T_OBJECT_OPERATOR","->",187],["T_STRING","__",187],"(",["T_CONSTANT_ENCAPSED_STRING","'Value for \"%s\" is invalid: %s'",187],",",["T_WHITESPACE"," ",187],["T_VARIABLE","$code",187],",",["T_WHITESPACE"," ",187],["T_VARIABLE","$error",187],")",";",["T_WHITESPACE","\n                    ",187],"}",["T_WHITESPACE","\n                    ",188],["T_VARIABLE","$strErrors",189],"[","]",["T_WHITESPACE"," ",189],"=",["T_WHITESPACE"," ",189],["T_VARIABLE","$error",189],";",["T_WHITESPACE","\n                ",189],"}",["T_WHITESPACE","\n                ",190],["T_VARIABLE","$this",191],["T_OBJECT_OPERATOR","->",191],["T_STRING","_fault",191],"(",["T_CONSTANT_ENCAPSED_STRING","'data_invalid'",191],",",["T_WHITESPACE"," ",191],["T_STRING","implode",191],"(",["T_CONSTANT_ENCAPSED_STRING","\"\\n\"",191],",",["T_WHITESPACE"," ",191],["T_VARIABLE","$strErrors",191],")",")",";",["T_WHITESPACE","\n            ",191],"}",["T_WHITESPACE","\n\n            ",192],["T_VARIABLE","$product",194],["T_OBJECT_OPERATOR","->",194],["T_STRING","save",194],"(",")",";",["T_WHITESPACE","\n        ",194],"}",["T_WHITESPACE"," ",195],["T_CATCH","catch",195],["T_WHITESPACE"," ",195],"(",["T_STRING","Mage_Core_Exception",195],["T_WHITESPACE"," ",195],["T_VARIABLE","$e",195],")",["T_WHITESPACE"," ",195],"{",["T_WHITESPACE","\n            ",195],["T_VARIABLE","$this",196],["T_OBJECT_OPERATOR","->",196],["T_STRING","_fault",196],"(",["T_CONSTANT_ENCAPSED_STRING","'data_invalid'",196],",",["T_WHITESPACE"," ",196],["T_VARIABLE","$e",196],["T_OBJECT_OPERATOR","->",196],["T_STRING","getMessage",196],"(",")",")",";",["T_WHITESPACE","\n        ",196],"}",["T_WHITESPACE","\n\n        ",197],["T_RETURN","return",199],["T_WHITESPACE"," ",199],["T_STRING","true",199],";",["T_WHITESPACE","\n    ",199],"}",["T_WHITESPACE","\n\n    ",200],["T_DOC_COMMENT","\/**\n     * Update multiple products information at once\n     *\n     * @param array      $productIds\n     * @param array      $productData\n     * @param string|int $store\n     * @param string     $identifierType\n     * @return boolean\n     *\/",202],["T_WHITESPACE","\n    ",210],["T_PUBLIC","public",211],["T_WHITESPACE"," ",211],["T_FUNCTION","function",211],["T_WHITESPACE"," ",211],["T_STRING","multiUpdate",211],"(",["T_VARIABLE","$productIds",211],",",["T_WHITESPACE"," ",211],["T_VARIABLE","$productData",211],",",["T_WHITESPACE"," ",211],["T_VARIABLE","$store",211],["T_WHITESPACE"," ",211],"=",["T_WHITESPACE"," ",211],["T_STRING","null",211],",",["T_WHITESPACE"," ",211],["T_VARIABLE","$identifierType",211],["T_WHITESPACE"," ",211],"=",["T_WHITESPACE"," ",211],["T_STRING","null",211],")",["T_WHITESPACE","\n    ",211],"{",["T_WHITESPACE","\n        ",212],["T_IF","if",213],["T_WHITESPACE"," ",213],"(",["T_STRING","count",213],"(",["T_VARIABLE","$productIds",213],")",["T_WHITESPACE"," ",213],["T_IS_NOT_EQUAL","!=",213],["T_WHITESPACE"," ",213],["T_STRING","count",213],"(",["T_VARIABLE","$productData",213],")",")",["T_WHITESPACE"," ",213],"{",["T_WHITESPACE","\n            ",213],["T_VARIABLE","$this",214],["T_OBJECT_OPERATOR","->",214],["T_STRING","_fault",214],"(",["T_CONSTANT_ENCAPSED_STRING","'multi_update_not_match'",214],")",";",["T_WHITESPACE","\n        ",214],"}",["T_WHITESPACE","\n\n        ",215],["T_VARIABLE","$productData",217],["T_WHITESPACE"," ",217],"=",["T_WHITESPACE"," ",217],["T_ARRAY_CAST","(array)",217],["T_VARIABLE","$productData",217],";",["T_WHITESPACE","\n        ",217],["T_VARIABLE","$failMessages",218],["T_WHITESPACE"," ",218],"=",["T_WHITESPACE"," ",218],["T_ARRAY","array",218],"(",")",";",["T_WHITESPACE","\n\n        ",218],["T_FOREACH","foreach",220],["T_WHITESPACE"," ",220],"(",["T_VARIABLE","$productIds",220],["T_WHITESPACE"," ",220],["T_AS","as",220],["T_WHITESPACE"," ",220],["T_VARIABLE","$index",220],["T_WHITESPACE"," ",220],["T_DOUBLE_ARROW","=>",220],["T_WHITESPACE"," ",220],["T_VARIABLE","$productId",220],")",["T_WHITESPACE"," ",220],"{",["T_WHITESPACE","\n            ",220],["T_TRY","try",221],["T_WHITESPACE"," ",221],"{",["T_WHITESPACE","\n                ",221],["T_VARIABLE","$this",222],["T_OBJECT_OPERATOR","->",222],["T_STRING","update",222],"(",["T_VARIABLE","$productId",222],",",["T_WHITESPACE"," ",222],["T_VARIABLE","$productData",222],"[",["T_VARIABLE","$index",222],"]",",",["T_WHITESPACE"," ",222],["T_VARIABLE","$store",222],",",["T_WHITESPACE"," ",222],["T_VARIABLE","$identifierType",222],")",";",["T_WHITESPACE","\n            ",222],"}",["T_WHITESPACE"," ",223],["T_CATCH","catch",223],["T_WHITESPACE"," ",223],"(",["T_STRING","Mage_Api_Exception",223],["T_WHITESPACE"," ",223],["T_VARIABLE","$e",223],")",["T_WHITESPACE"," ",223],"{",["T_WHITESPACE","\n                ",223],["T_VARIABLE","$failMessages",224],"[","]",["T_WHITESPACE"," ",224],"=",["T_WHITESPACE"," ",224],["T_STRING","sprintf",224],"(",["T_CONSTANT_ENCAPSED_STRING","\"Product ID %d:\\n %s\"",224],",",["T_WHITESPACE"," ",224],["T_VARIABLE","$productId",224],",",["T_WHITESPACE"," ",224],["T_VARIABLE","$e",224],["T_OBJECT_OPERATOR","->",224],["T_STRING","getMessage",224],"(",")",")",";",["T_WHITESPACE","\n            ",224],"}",["T_WHITESPACE","\n        ",225],"}",["T_WHITESPACE","\n\n        ",226],["T_IF","if",228],["T_WHITESPACE"," ",228],"(",["T_EMPTY","empty",228],"(",["T_VARIABLE","$failMessages",228],")",")",["T_WHITESPACE"," ",228],"{",["T_WHITESPACE","\n            ",228],["T_RETURN","return",229],["T_WHITESPACE"," ",229],["T_STRING","true",229],";",["T_WHITESPACE","\n        ",229],"}",["T_WHITESPACE"," ",230],["T_ELSE","else",230],["T_WHITESPACE"," ",230],"{",["T_WHITESPACE","\n            ",230],["T_VARIABLE","$this",231],["T_OBJECT_OPERATOR","->",231],["T_STRING","_fault",231],"(",["T_CONSTANT_ENCAPSED_STRING","'partially_updated'",231],",",["T_WHITESPACE"," ",231],["T_STRING","implode",231],"(",["T_CONSTANT_ENCAPSED_STRING","\"\\n\"",231],",",["T_WHITESPACE"," ",231],["T_VARIABLE","$failMessages",231],")",")",";",["T_WHITESPACE","\n        ",231],"}",["T_WHITESPACE","\n\n        ",232],["T_RETURN","return",234],["T_WHITESPACE"," ",234],["T_STRING","false",234],";",["T_WHITESPACE","\n    ",234],"}",["T_WHITESPACE","\n\n    ",235],["T_DOC_COMMENT","\/**\n     *  Set additional data before product saved\n     *\n     *  @param    Mage_Catalog_Model_Product $product\n     *  @param    array $productData\n     *  @return   object\n     *\/",237],["T_WHITESPACE","\n    ",243],["T_PROTECTED","protected",244],["T_WHITESPACE"," ",244],["T_FUNCTION","function",244],["T_WHITESPACE"," ",244],["T_STRING","_prepareDataForSave",244],["T_WHITESPACE"," ",244],"(",["T_VARIABLE","$product",244],",",["T_WHITESPACE"," ",244],["T_VARIABLE","$productData",244],")",["T_WHITESPACE","\n    ",244],"{",["T_WHITESPACE","\n        ",245],["T_IF","if",246],["T_WHITESPACE"," ",246],"(","!",["T_STRING","is_object",246],"(",["T_VARIABLE","$productData",246],")",")",["T_WHITESPACE"," ",246],"{",["T_WHITESPACE","\n            ",246],["T_VARIABLE","$this",247],["T_OBJECT_OPERATOR","->",247],["T_STRING","_fault",247],"(",["T_CONSTANT_ENCAPSED_STRING","'data_invalid'",247],")",";",["T_WHITESPACE","\n        ",247],"}",["T_WHITESPACE","\n        ",248],["T_IF","if",249],["T_WHITESPACE"," ",249],"(",["T_STRING","property_exists",249],"(",["T_VARIABLE","$productData",249],",",["T_WHITESPACE"," ",249],["T_CONSTANT_ENCAPSED_STRING","'website_ids'",249],")",["T_WHITESPACE"," ",249],["T_BOOLEAN_AND","&&",249],["T_WHITESPACE"," ",249],["T_STRING","is_array",249],"(",["T_VARIABLE","$productData",249],["T_OBJECT_OPERATOR","->",249],["T_STRING","website_ids",249],")",")",["T_WHITESPACE"," ",249],"{",["T_WHITESPACE","\n            ",249],["T_VARIABLE","$product",250],["T_OBJECT_OPERATOR","->",250],["T_STRING","setWebsiteIds",250],"(",["T_VARIABLE","$productData",250],["T_OBJECT_OPERATOR","->",250],["T_STRING","website_ids",250],")",";",["T_WHITESPACE","\n        ",250],"}",["T_WHITESPACE","\n\n        ",251],["T_IF","if",253],["T_WHITESPACE"," ",253],"(",["T_STRING","property_exists",253],"(",["T_VARIABLE","$productData",253],",",["T_WHITESPACE"," ",253],["T_CONSTANT_ENCAPSED_STRING","'additional_attributes'",253],")",")",["T_WHITESPACE"," ",253],"{",["T_WHITESPACE","\n            ",253],["T_IF","if",254],["T_WHITESPACE"," ",254],"(",["T_STRING","property_exists",254],"(",["T_VARIABLE","$productData",254],["T_OBJECT_OPERATOR","->",254],["T_STRING","additional_attributes",254],",",["T_WHITESPACE"," ",254],["T_CONSTANT_ENCAPSED_STRING","'single_data'",254],")",")",["T_WHITESPACE"," ",254],"{",["T_WHITESPACE","\n                ",254],["T_FOREACH","foreach",255],["T_WHITESPACE"," ",255],"(",["T_VARIABLE","$productData",255],["T_OBJECT_OPERATOR","->",255],["T_STRING","additional_attributes",255],["T_OBJECT_OPERATOR","->",255],["T_STRING","single_data",255],["T_WHITESPACE"," ",255],["T_AS","as",255],["T_WHITESPACE"," ",255],["T_VARIABLE","$_attribute",255],")",["T_WHITESPACE"," ",255],"{",["T_WHITESPACE","\n                    ",255],["T_VARIABLE","$_attrCode",256],["T_WHITESPACE"," ",256],"=",["T_WHITESPACE"," ",256],["T_VARIABLE","$_attribute",256],["T_OBJECT_OPERATOR","->",256],["T_STRING","key",256],";",["T_WHITESPACE","\n                    ",256],["T_VARIABLE","$productData",257],["T_OBJECT_OPERATOR","->",257],["T_VARIABLE","$_attrCode",257],["T_WHITESPACE"," ",257],"=",["T_WHITESPACE"," ",257],["T_VARIABLE","$_attribute",257],["T_OBJECT_OPERATOR","->",257],["T_STRING","value",257],";",["T_WHITESPACE","\n                ",257],"}",["T_WHITESPACE","\n            ",258],"}",["T_WHITESPACE","\n            ",259],["T_IF","if",260],["T_WHITESPACE"," ",260],"(",["T_STRING","property_exists",260],"(",["T_VARIABLE","$productData",260],["T_OBJECT_OPERATOR","->",260],["T_STRING","additional_attributes",260],",",["T_WHITESPACE"," ",260],["T_CONSTANT_ENCAPSED_STRING","'multi_data'",260],")",")",["T_WHITESPACE"," ",260],"{",["T_WHITESPACE","\n                ",260],["T_FOREACH","foreach",261],["T_WHITESPACE"," ",261],"(",["T_VARIABLE","$productData",261],["T_OBJECT_OPERATOR","->",261],["T_STRING","additional_attributes",261],["T_OBJECT_OPERATOR","->",261],["T_STRING","multi_data",261],["T_WHITESPACE"," ",261],["T_AS","as",261],["T_WHITESPACE"," ",261],["T_VARIABLE","$_attribute",261],")",["T_WHITESPACE"," ",261],"{",["T_WHITESPACE","\n                    ",261],["T_VARIABLE","$_attrCode",262],["T_WHITESPACE"," ",262],"=",["T_WHITESPACE"," ",262],["T_VARIABLE","$_attribute",262],["T_OBJECT_OPERATOR","->",262],["T_STRING","key",262],";",["T_WHITESPACE","\n                    ",262],["T_VARIABLE","$productData",263],["T_OBJECT_OPERATOR","->",263],["T_VARIABLE","$_attrCode",263],["T_WHITESPACE"," ",263],"=",["T_WHITESPACE"," ",263],["T_VARIABLE","$_attribute",263],["T_OBJECT_OPERATOR","->",263],["T_STRING","value",263],";",["T_WHITESPACE","\n                ",263],"}",["T_WHITESPACE","\n            ",264],"}",["T_WHITESPACE","\n            ",265],["T_UNSET","unset",266],"(",["T_VARIABLE","$productData",266],["T_OBJECT_OPERATOR","->",266],["T_STRING","additional_attributes",266],")",";",["T_WHITESPACE","\n        ",266],"}",["T_WHITESPACE","\n\n        ",267],["T_FOREACH","foreach",269],["T_WHITESPACE"," ",269],"(",["T_VARIABLE","$product",269],["T_OBJECT_OPERATOR","->",269],["T_STRING","getTypeInstance",269],"(",["T_STRING","true",269],")",["T_OBJECT_OPERATOR","->",269],["T_STRING","getEditableAttributes",269],"(",["T_VARIABLE","$product",269],")",["T_WHITESPACE"," ",269],["T_AS","as",269],["T_WHITESPACE"," ",269],["T_VARIABLE","$attribute",269],")",["T_WHITESPACE"," ",269],"{",["T_WHITESPACE","\n            ",269],["T_VARIABLE","$_attrCode",270],["T_WHITESPACE"," ",270],"=",["T_WHITESPACE"," ",270],["T_VARIABLE","$attribute",270],["T_OBJECT_OPERATOR","->",270],["T_STRING","getAttributeCode",270],"(",")",";",["T_WHITESPACE","\n\n            ",270],["T_COMMENT","\/\/Unset data if object attribute has no value in current store\n",272],["T_WHITESPACE","            ",273],["T_IF","if",273],["T_WHITESPACE"," ",273],"(",["T_STRING","Mage_Catalog_Model_Abstract",273],["T_DOUBLE_COLON","::",273],["T_STRING","DEFAULT_STORE_ID",273],["T_WHITESPACE"," ",273],["T_IS_NOT_IDENTICAL","!==",273],["T_WHITESPACE"," ",273],["T_INT_CAST","(int)",273],["T_WHITESPACE"," ",273],["T_VARIABLE","$product",273],["T_OBJECT_OPERATOR","->",273],["T_STRING","getStoreId",273],"(",")",["T_WHITESPACE","\n                ",273],["T_BOOLEAN_AND","&&",274],["T_WHITESPACE"," ",274],"!",["T_VARIABLE","$product",274],["T_OBJECT_OPERATOR","->",274],["T_STRING","getExistsStoreValueFlag",274],"(",["T_VARIABLE","$_attrCode",274],")",["T_WHITESPACE","\n                ",274],["T_BOOLEAN_AND","&&",275],["T_WHITESPACE"," ",275],"!",["T_VARIABLE","$attribute",275],["T_OBJECT_OPERATOR","->",275],["T_STRING","isScopeGlobal",275],"(",")",["T_WHITESPACE","\n            ",275],")",["T_WHITESPACE"," ",276],"{",["T_WHITESPACE","\n                ",276],["T_VARIABLE","$product",277],["T_OBJECT_OPERATOR","->",277],["T_STRING","setData",277],"(",["T_VARIABLE","$_attrCode",277],",",["T_WHITESPACE"," ",277],["T_STRING","false",277],")",";",["T_WHITESPACE","\n            ",277],"}",["T_WHITESPACE","\n\n            ",278],["T_IF","if",280],["T_WHITESPACE"," ",280],"(",["T_VARIABLE","$this",280],["T_OBJECT_OPERATOR","->",280],["T_STRING","_isAllowedAttribute",280],"(",["T_VARIABLE","$attribute",280],")",["T_WHITESPACE"," ",280],["T_BOOLEAN_AND","&&",280],["T_WHITESPACE"," ",280],"(",["T_ISSET","isset",280],"(",["T_VARIABLE","$productData",280],["T_OBJECT_OPERATOR","->",280],["T_VARIABLE","$_attrCode",280],")",")",")",["T_WHITESPACE"," ",280],"{",["T_WHITESPACE","\n                ",280],["T_VARIABLE","$product",281],["T_OBJECT_OPERATOR","->",281],["T_STRING","setData",281],"(",["T_WHITESPACE","\n                    ",281],["T_VARIABLE","$_attrCode",282],",",["T_WHITESPACE","\n                    ",282],["T_VARIABLE","$productData",283],["T_OBJECT_OPERATOR","->",283],["T_VARIABLE","$_attrCode",283],["T_WHITESPACE","\n                ",283],")",";",["T_WHITESPACE","\n            ",284],"}",["T_WHITESPACE","\n        ",285],"}",["T_WHITESPACE","\n\n        ",286],["T_IF","if",288],["T_WHITESPACE"," ",288],"(",["T_STRING","property_exists",288],"(",["T_VARIABLE","$productData",288],",",["T_WHITESPACE"," ",288],["T_CONSTANT_ENCAPSED_STRING","'categories'",288],")",["T_WHITESPACE"," ",288],["T_BOOLEAN_AND","&&",288],["T_WHITESPACE"," ",288],["T_STRING","is_array",288],"(",["T_VARIABLE","$productData",288],["T_OBJECT_OPERATOR","->",288],["T_STRING","categories",288],")",")",["T_WHITESPACE"," ",288],"{",["T_WHITESPACE","\n            ",288],["T_VARIABLE","$product",289],["T_OBJECT_OPERATOR","->",289],["T_STRING","setCategoryIds",289],"(",["T_VARIABLE","$productData",289],["T_OBJECT_OPERATOR","->",289],["T_STRING","categories",289],")",";",["T_WHITESPACE","\n        ",289],"}",["T_WHITESPACE","\n\n        ",290],["T_IF","if",292],["T_WHITESPACE"," ",292],"(",["T_STRING","property_exists",292],"(",["T_VARIABLE","$productData",292],",",["T_WHITESPACE"," ",292],["T_CONSTANT_ENCAPSED_STRING","'websites'",292],")",["T_WHITESPACE"," ",292],["T_BOOLEAN_AND","&&",292],["T_WHITESPACE"," ",292],["T_STRING","is_array",292],"(",["T_VARIABLE","$productData",292],["T_OBJECT_OPERATOR","->",292],["T_STRING","websites",292],")",")",["T_WHITESPACE"," ",292],"{",["T_WHITESPACE","\n            ",292],["T_FOREACH","foreach",293],["T_WHITESPACE"," ",293],"(",["T_VARIABLE","$productData",293],["T_OBJECT_OPERATOR","->",293],["T_STRING","websites",293],["T_WHITESPACE"," ",293],["T_AS","as",293],["T_WHITESPACE"," ",293],"&",["T_VARIABLE","$website",293],")",["T_WHITESPACE"," ",293],"{",["T_WHITESPACE","\n                ",293],["T_IF","if",294],["T_WHITESPACE"," ",294],"(",["T_STRING","is_string",294],"(",["T_VARIABLE","$website",294],")",")",["T_WHITESPACE"," ",294],"{",["T_WHITESPACE","\n                    ",294],["T_TRY","try",295],["T_WHITESPACE"," ",295],"{",["T_WHITESPACE","\n                        ",295],["T_VARIABLE","$website",296],["T_WHITESPACE"," ",296],"=",["T_WHITESPACE"," ",296],["T_STRING","Mage",296],["T_DOUBLE_COLON","::",296],["T_STRING","app",296],"(",")",["T_OBJECT_OPERATOR","->",296],["T_STRING","getWebsite",296],"(",["T_VARIABLE","$website",296],")",["T_OBJECT_OPERATOR","->",296],["T_STRING","getId",296],"(",")",";",["T_WHITESPACE","\n                    ",296],"}",["T_WHITESPACE"," ",297],["T_CATCH","catch",297],["T_WHITESPACE"," ",297],"(",["T_STRING","Exception",297],["T_WHITESPACE"," ",297],["T_VARIABLE","$e",297],")",["T_WHITESPACE"," ",297],"{",["T_WHITESPACE"," ",297],"}",["T_WHITESPACE","\n                ",297],"}",["T_WHITESPACE","\n            ",298],"}",["T_WHITESPACE","\n            ",299],["T_VARIABLE","$product",300],["T_OBJECT_OPERATOR","->",300],["T_STRING","setWebsiteIds",300],"(",["T_VARIABLE","$productData",300],["T_OBJECT_OPERATOR","->",300],["T_STRING","websites",300],")",";",["T_WHITESPACE","\n        ",300],"}",["T_WHITESPACE","\n\n        ",301],["T_IF","if",303],["T_WHITESPACE"," ",303],"(",["T_STRING","Mage",303],["T_DOUBLE_COLON","::",303],["T_STRING","app",303],"(",")",["T_OBJECT_OPERATOR","->",303],["T_STRING","isSingleStoreMode",303],"(",")",")",["T_WHITESPACE"," ",303],"{",["T_WHITESPACE","\n            ",303],["T_VARIABLE","$product",304],["T_OBJECT_OPERATOR","->",304],["T_STRING","setWebsiteIds",304],"(",["T_ARRAY","array",304],"(",["T_STRING","Mage",304],["T_DOUBLE_COLON","::",304],["T_STRING","app",304],"(",")",["T_OBJECT_OPERATOR","->",304],["T_STRING","getStore",304],"(",["T_STRING","true",304],")",["T_OBJECT_OPERATOR","->",304],["T_STRING","getWebsite",304],"(",")",["T_OBJECT_OPERATOR","->",304],["T_STRING","getId",304],"(",")",")",")",";",["T_WHITESPACE","\n        ",304],"}",["T_WHITESPACE","\n\n        ",305],["T_IF","if",307],["T_WHITESPACE"," ",307],"(",["T_STRING","property_exists",307],"(",["T_VARIABLE","$productData",307],",",["T_WHITESPACE"," ",307],["T_CONSTANT_ENCAPSED_STRING","'stock_data'",307],")",")",["T_WHITESPACE"," ",307],"{",["T_WHITESPACE","\n            ",307],["T_VARIABLE","$_stockData",308],["T_WHITESPACE"," ",308],"=",["T_WHITESPACE"," ",308],["T_ARRAY","array",308],"(",")",";",["T_WHITESPACE","\n            ",308],["T_FOREACH","foreach",309],["T_WHITESPACE"," ",309],"(",["T_VARIABLE","$productData",309],["T_OBJECT_OPERATOR","->",309],["T_STRING","stock_data",309],["T_WHITESPACE"," ",309],["T_AS","as",309],["T_WHITESPACE"," ",309],["T_VARIABLE","$key",309],["T_WHITESPACE"," ",309],["T_DOUBLE_ARROW","=>",309],["T_WHITESPACE"," ",309],["T_VARIABLE","$value",309],")",["T_WHITESPACE"," ",309],"{",["T_WHITESPACE","\n                ",309],["T_VARIABLE","$_stockData",310],"[",["T_VARIABLE","$key",310],"]",["T_WHITESPACE"," ",310],"=",["T_WHITESPACE"," ",310],["T_VARIABLE","$value",310],";",["T_WHITESPACE","\n            ",310],"}",["T_WHITESPACE","\n            ",311],["T_VARIABLE","$product",312],["T_OBJECT_OPERATOR","->",312],["T_STRING","setStockData",312],"(",["T_VARIABLE","$_stockData",312],")",";",["T_WHITESPACE","\n        ",312],"}",["T_WHITESPACE","\n\n        ",313],["T_IF","if",315],["T_WHITESPACE"," ",315],"(",["T_STRING","property_exists",315],"(",["T_VARIABLE","$productData",315],",",["T_WHITESPACE"," ",315],["T_CONSTANT_ENCAPSED_STRING","'tier_price'",315],")",")",["T_WHITESPACE"," ",315],"{",["T_WHITESPACE","\n             ",315],["T_VARIABLE","$tierPrices",316],["T_WHITESPACE"," ",316],"=",["T_WHITESPACE"," ",316],["T_STRING","Mage",316],["T_DOUBLE_COLON","::",316],["T_STRING","getModel",316],"(",["T_CONSTANT_ENCAPSED_STRING","'catalog\/product_attribute_tierprice_api_V2'",316],")",["T_WHITESPACE","\n                 ",316],["T_OBJECT_OPERATOR","->",317],["T_STRING","prepareTierPrices",317],"(",["T_VARIABLE","$product",317],",",["T_WHITESPACE"," ",317],["T_VARIABLE","$productData",317],["T_OBJECT_OPERATOR","->",317],["T_STRING","tier_price",317],")",";",["T_WHITESPACE","\n             ",317],["T_VARIABLE","$product",318],["T_OBJECT_OPERATOR","->",318],["T_STRING","setData",318],"(",["T_STRING","Mage_Catalog_Model_Product_Attribute_Tierprice_Api_V2",318],["T_DOUBLE_COLON","::",318],["T_STRING","ATTRIBUTE_CODE",318],",",["T_WHITESPACE"," ",318],["T_VARIABLE","$tierPrices",318],")",";",["T_WHITESPACE","\n        ",318],"}",["T_WHITESPACE","\n    ",319],"}",["T_WHITESPACE","\n\n    ",320],["T_DOC_COMMENT","\/**\n     * Update product special priceim\n     *\n     * @param int|string $productId\n     * @param float $specialPrice\n     * @param string $fromDate\n     * @param string $toDate\n     * @param string|int $store\n     * @param string $identifierType OPTIONAL If 'sku' - search product by SKU, if any except for NULL - search by ID,\n     *                                        otherwise - try to determine identifier type automatically\n     * @return boolean\n     *\/",322],["T_WHITESPACE","\n    ",333],["T_PUBLIC","public",334],["T_WHITESPACE"," ",334],["T_FUNCTION","function",334],["T_WHITESPACE"," ",334],["T_STRING","setSpecialPrice",334],"(",["T_VARIABLE","$productId",334],",",["T_WHITESPACE"," ",334],["T_VARIABLE","$specialPrice",334],["T_WHITESPACE"," ",334],"=",["T_WHITESPACE"," ",334],["T_STRING","null",334],",",["T_WHITESPACE"," ",334],["T_VARIABLE","$fromDate",334],["T_WHITESPACE"," ",334],"=",["T_WHITESPACE"," ",334],["T_STRING","null",334],",",["T_WHITESPACE"," ",334],["T_VARIABLE","$toDate",334],["T_WHITESPACE"," ",334],"=",["T_WHITESPACE"," ",334],["T_STRING","null",334],",",["T_WHITESPACE"," ",334],["T_VARIABLE","$store",334],["T_WHITESPACE"," ",334],"=",["T_WHITESPACE"," ",334],["T_STRING","null",334],",",["T_WHITESPACE","\n        ",334],["T_VARIABLE","$identifierType",335],["T_WHITESPACE"," ",335],"=",["T_WHITESPACE"," ",335],["T_STRING","null",335],["T_WHITESPACE","\n    ",335],")",["T_WHITESPACE"," ",336],"{",["T_WHITESPACE","\n        ",336],["T_VARIABLE","$obj",337],["T_WHITESPACE"," ",337],"=",["T_WHITESPACE"," ",337],["T_NEW","new",337],["T_WHITESPACE"," ",337],["T_STRING","stdClass",337],"(",")",";",["T_WHITESPACE","\n        ",337],["T_VARIABLE","$obj",338],["T_OBJECT_OPERATOR","->",338],["T_STRING","special_price",338],["T_WHITESPACE"," ",338],"=",["T_WHITESPACE"," ",338],["T_VARIABLE","$specialPrice",338],";",["T_WHITESPACE","\n        ",338],["T_VARIABLE","$obj",339],["T_OBJECT_OPERATOR","->",339],["T_STRING","special_from_date",339],["T_WHITESPACE"," ",339],"=",["T_WHITESPACE"," ",339],["T_VARIABLE","$fromDate",339],";",["T_WHITESPACE","\n        ",339],["T_VARIABLE","$obj",340],["T_OBJECT_OPERATOR","->",340],["T_STRING","special_to_date",340],["T_WHITESPACE"," ",340],"=",["T_WHITESPACE"," ",340],["T_VARIABLE","$toDate",340],";",["T_WHITESPACE","\n        ",340],["T_RETURN","return",341],["T_WHITESPACE"," ",341],["T_VARIABLE","$this",341],["T_OBJECT_OPERATOR","->",341],["T_STRING","update",341],"(",["T_VARIABLE","$productId",341],",",["T_WHITESPACE"," ",341],["T_VARIABLE","$obj",341],",",["T_WHITESPACE"," ",341],["T_VARIABLE","$store",341],",",["T_WHITESPACE"," ",341],["T_VARIABLE","$identifierType",341],")",";",["T_WHITESPACE","\n    ",341],"}",["T_WHITESPACE","\n",342],"}",["T_WHITESPACE","\n",343]]
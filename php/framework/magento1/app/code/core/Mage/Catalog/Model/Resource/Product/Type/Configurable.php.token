[["T_OPEN_TAG","<?php\n",1],["T_DOC_COMMENT","\/**\n * Magento\n *\n * NOTICE OF LICENSE\n *\n * This source file is subject to the Open Software License (OSL 3.0)\n * that is bundled with this package in the file LICENSE.txt.\n * It is also available through the world-wide-web at this URL:\n * http:\/\/opensource.org\/licenses\/osl-3.0.php\n * If you did not receive a copy of the license and are unable to\n * obtain it through the world-wide-web, please send an email\n * to license@magento.com so we can send you a copy immediately.\n *\n * DISCLAIMER\n *\n * Do not edit or add to this file if you wish to upgrade Magento to newer\n * versions in the future. If you wish to customize Magento for your\n * needs please refer to http:\/\/www.magento.com for more information.\n *\n * @category    Mage\n * @package     Mage_Catalog\n * @copyright  Copyright (c) 2006-2016 X.commerce, Inc. and affiliates (http:\/\/www.magento.com)\n * @license    http:\/\/opensource.org\/licenses\/osl-3.0.php  Open Software License (OSL 3.0)\n *\/",2],["T_WHITESPACE","\n\n\n",25],["T_DOC_COMMENT","\/**\n * Configurable product type resource model\n *\n * @category    Mage\n * @package     Mage_Catalog\n * @author      Magento Core Team <core@magentocommerce.com>\n *\/",28],["T_WHITESPACE","\n",34],["T_CLASS","class",35],["T_WHITESPACE"," ",35],["T_STRING","Mage_Catalog_Model_Resource_Product_Type_Configurable",35],["T_WHITESPACE"," ",35],["T_EXTENDS","extends",35],["T_WHITESPACE"," ",35],["T_STRING","Mage_Core_Model_Resource_Db_Abstract",35],["T_WHITESPACE","\n",35],"{",["T_WHITESPACE","\n    ",36],["T_DOC_COMMENT","\/**\n     * Init resource\n     *\n     *\/",37],["T_WHITESPACE","\n    ",40],["T_PROTECTED","protected",41],["T_WHITESPACE"," ",41],["T_FUNCTION","function",41],["T_WHITESPACE"," ",41],["T_STRING","_construct",41],"(",")",["T_WHITESPACE","\n    ",41],"{",["T_WHITESPACE","\n        ",42],["T_VARIABLE","$this",43],["T_OBJECT_OPERATOR","->",43],["T_STRING","_init",43],"(",["T_CONSTANT_ENCAPSED_STRING","'catalog\/product_super_link'",43],",",["T_WHITESPACE"," ",43],["T_CONSTANT_ENCAPSED_STRING","'link_id'",43],")",";",["T_WHITESPACE","\n    ",43],"}",["T_WHITESPACE","\n\n    ",44],["T_DOC_COMMENT","\/**\n     * Save configurable product relations\n     *\n     * @param Mage_Catalog_Model_Product|int $mainProduct the parent id\n     * @param array $productIds the children id array\n     * @return Mage_Catalog_Model_Resource_Product_Type_Configurable\n     *\/",46],["T_WHITESPACE","\n    ",52],["T_PUBLIC","public",53],["T_WHITESPACE"," ",53],["T_FUNCTION","function",53],["T_WHITESPACE"," ",53],["T_STRING","saveProducts",53],"(",["T_VARIABLE","$mainProduct",53],",",["T_WHITESPACE"," ",53],["T_VARIABLE","$productIds",53],")",["T_WHITESPACE","\n    ",53],"{",["T_WHITESPACE","\n        ",54],["T_VARIABLE","$isProductInstance",55],["T_WHITESPACE"," ",55],"=",["T_WHITESPACE"," ",55],["T_STRING","false",55],";",["T_WHITESPACE","\n        ",55],["T_IF","if",56],["T_WHITESPACE"," ",56],"(",["T_VARIABLE","$mainProduct",56],["T_WHITESPACE"," ",56],["T_INSTANCEOF","instanceof",56],["T_WHITESPACE"," ",56],["T_STRING","Mage_Catalog_Model_Product",56],")",["T_WHITESPACE"," ",56],"{",["T_WHITESPACE","\n            ",56],["T_VARIABLE","$mainProductId",57],["T_WHITESPACE"," ",57],"=",["T_WHITESPACE"," ",57],["T_VARIABLE","$mainProduct",57],["T_OBJECT_OPERATOR","->",57],["T_STRING","getId",57],"(",")",";",["T_WHITESPACE","\n            ",57],["T_VARIABLE","$isProductInstance",58],["T_WHITESPACE"," ",58],"=",["T_WHITESPACE"," ",58],["T_STRING","true",58],";",["T_WHITESPACE","\n        ",58],"}",["T_WHITESPACE"," ",59],["T_ELSE","else",59],["T_WHITESPACE"," ",59],"{",["T_WHITESPACE","\n            ",59],["T_VARIABLE","$mainProductId",60],["T_WHITESPACE"," ",60],"=",["T_WHITESPACE"," ",60],["T_VARIABLE","$mainProduct",60],";",["T_WHITESPACE","\n        ",60],"}",["T_WHITESPACE","\n        ",61],["T_VARIABLE","$old",62],["T_WHITESPACE"," ",62],"=",["T_WHITESPACE"," ",62],["T_VARIABLE","$mainProduct",62],["T_OBJECT_OPERATOR","->",62],["T_STRING","getTypeInstance",62],"(",")",["T_OBJECT_OPERATOR","->",62],["T_STRING","getUsedProductIds",62],"(",")",";",["T_WHITESPACE","\n\n        ",62],["T_VARIABLE","$insert",64],["T_WHITESPACE"," ",64],"=",["T_WHITESPACE"," ",64],["T_STRING","array_diff",64],"(",["T_VARIABLE","$productIds",64],",",["T_WHITESPACE"," ",64],["T_VARIABLE","$old",64],")",";",["T_WHITESPACE","\n        ",64],["T_VARIABLE","$delete",65],["T_WHITESPACE"," ",65],"=",["T_WHITESPACE"," ",65],["T_STRING","array_diff",65],"(",["T_VARIABLE","$old",65],",",["T_WHITESPACE"," ",65],["T_VARIABLE","$productIds",65],")",";",["T_WHITESPACE","\n\n        ",65],["T_IF","if",67],["T_WHITESPACE"," ",67],"(","(","!",["T_EMPTY","empty",67],"(",["T_VARIABLE","$insert",67],")",["T_WHITESPACE"," ",67],["T_BOOLEAN_OR","||",67],["T_WHITESPACE"," ",67],"!",["T_EMPTY","empty",67],"(",["T_VARIABLE","$delete",67],")",")",["T_WHITESPACE"," ",67],["T_BOOLEAN_AND","&&",67],["T_WHITESPACE"," ",67],["T_VARIABLE","$isProductInstance",67],")",["T_WHITESPACE"," ",67],"{",["T_WHITESPACE","\n            ",67],["T_VARIABLE","$mainProduct",68],["T_OBJECT_OPERATOR","->",68],["T_STRING","setIsRelationsChanged",68],"(",["T_STRING","true",68],")",";",["T_WHITESPACE","\n        ",68],"}",["T_WHITESPACE","\n\n        ",69],["T_IF","if",71],["T_WHITESPACE"," ",71],"(","!",["T_EMPTY","empty",71],"(",["T_VARIABLE","$delete",71],")",")",["T_WHITESPACE"," ",71],"{",["T_WHITESPACE","\n            ",71],["T_VARIABLE","$where",72],["T_WHITESPACE"," ",72],"=",["T_WHITESPACE"," ",72],["T_ARRAY","array",72],"(",["T_WHITESPACE","\n                ",72],["T_CONSTANT_ENCAPSED_STRING","'parent_id = ?'",73],["T_WHITESPACE","     ",73],["T_DOUBLE_ARROW","=>",73],["T_WHITESPACE"," ",73],["T_VARIABLE","$mainProductId",73],",",["T_WHITESPACE","\n                ",73],["T_CONSTANT_ENCAPSED_STRING","'product_id IN(?)'",74],["T_WHITESPACE","  ",74],["T_DOUBLE_ARROW","=>",74],["T_WHITESPACE"," ",74],["T_VARIABLE","$delete",74],["T_WHITESPACE","\n            ",74],")",";",["T_WHITESPACE","\n            ",75],["T_VARIABLE","$this",76],["T_OBJECT_OPERATOR","->",76],["T_STRING","_getWriteAdapter",76],"(",")",["T_OBJECT_OPERATOR","->",76],["T_STRING","delete",76],"(",["T_VARIABLE","$this",76],["T_OBJECT_OPERATOR","->",76],["T_STRING","getMainTable",76],"(",")",",",["T_WHITESPACE"," ",76],["T_VARIABLE","$where",76],")",";",["T_WHITESPACE","\n        ",76],"}",["T_WHITESPACE","\n        ",77],["T_IF","if",78],["T_WHITESPACE"," ",78],"(","!",["T_EMPTY","empty",78],"(",["T_VARIABLE","$insert",78],")",")",["T_WHITESPACE"," ",78],"{",["T_WHITESPACE","\n            ",78],["T_VARIABLE","$data",79],["T_WHITESPACE"," ",79],"=",["T_WHITESPACE"," ",79],["T_ARRAY","array",79],"(",")",";",["T_WHITESPACE","\n            ",79],["T_FOREACH","foreach",80],["T_WHITESPACE"," ",80],"(",["T_VARIABLE","$insert",80],["T_WHITESPACE"," ",80],["T_AS","as",80],["T_WHITESPACE"," ",80],["T_VARIABLE","$childId",80],")",["T_WHITESPACE"," ",80],"{",["T_WHITESPACE","\n                ",80],["T_VARIABLE","$data",81],"[","]",["T_WHITESPACE"," ",81],"=",["T_WHITESPACE"," ",81],["T_ARRAY","array",81],"(",["T_WHITESPACE","\n                    ",81],["T_CONSTANT_ENCAPSED_STRING","'product_id'",82],["T_WHITESPACE"," ",82],["T_DOUBLE_ARROW","=>",82],["T_WHITESPACE"," ",82],["T_INT_CAST","(int)",82],["T_VARIABLE","$childId",82],",",["T_WHITESPACE","\n                    ",82],["T_CONSTANT_ENCAPSED_STRING","'parent_id'",83],["T_WHITESPACE","  ",83],["T_DOUBLE_ARROW","=>",83],["T_WHITESPACE"," ",83],["T_INT_CAST","(int)",83],["T_VARIABLE","$mainProductId",83],["T_WHITESPACE","\n                ",83],")",";",["T_WHITESPACE","\n            ",84],"}",["T_WHITESPACE","\n            ",85],["T_VARIABLE","$this",86],["T_OBJECT_OPERATOR","->",86],["T_STRING","_getWriteAdapter",86],"(",")",["T_OBJECT_OPERATOR","->",86],["T_STRING","insertMultiple",86],"(",["T_VARIABLE","$this",86],["T_OBJECT_OPERATOR","->",86],["T_STRING","getMainTable",86],"(",")",",",["T_WHITESPACE"," ",86],["T_VARIABLE","$data",86],")",";",["T_WHITESPACE","\n        ",86],"}",["T_WHITESPACE","\n\n        ",87],["T_COMMENT","\/\/ configurable product relations should be added to relation table\n",89],["T_WHITESPACE","        ",90],["T_STRING","Mage",90],["T_DOUBLE_COLON","::",90],["T_STRING","getResourceSingleton",90],"(",["T_CONSTANT_ENCAPSED_STRING","'catalog\/product_relation'",90],")",["T_WHITESPACE","\n            ",90],["T_OBJECT_OPERATOR","->",91],["T_STRING","processRelations",91],"(",["T_VARIABLE","$mainProductId",91],",",["T_WHITESPACE"," ",91],["T_VARIABLE","$productIds",91],")",";",["T_WHITESPACE","\n\n        ",91],["T_RETURN","return",93],["T_WHITESPACE"," ",93],["T_VARIABLE","$this",93],";",["T_WHITESPACE","\n    ",93],"}",["T_WHITESPACE","\n\n    ",94],["T_DOC_COMMENT","\/**\n     * Retrieve Required children ids\n     * Return grouped array, ex array(\n     *   group => array(ids)\n     * )\n     *\n     * @param int $parentId\n     * @param bool $required\n     * @return array\n     *\/",96],["T_WHITESPACE","\n    ",105],["T_PUBLIC","public",106],["T_WHITESPACE"," ",106],["T_FUNCTION","function",106],["T_WHITESPACE"," ",106],["T_STRING","getChildrenIds",106],"(",["T_VARIABLE","$parentId",106],",",["T_WHITESPACE"," ",106],["T_VARIABLE","$required",106],["T_WHITESPACE"," ",106],"=",["T_WHITESPACE"," ",106],["T_STRING","true",106],")",["T_WHITESPACE","\n    ",106],"{",["T_WHITESPACE","\n        ",107],["T_VARIABLE","$childrenIds",108],["T_WHITESPACE"," ",108],"=",["T_WHITESPACE"," ",108],["T_ARRAY","array",108],"(",")",";",["T_WHITESPACE","\n        ",108],["T_VARIABLE","$select",109],["T_WHITESPACE"," ",109],"=",["T_WHITESPACE"," ",109],["T_VARIABLE","$this",109],["T_OBJECT_OPERATOR","->",109],["T_STRING","_getReadAdapter",109],"(",")",["T_OBJECT_OPERATOR","->",109],["T_STRING","select",109],"(",")",["T_WHITESPACE","\n            ",109],["T_OBJECT_OPERATOR","->",110],["T_STRING","from",110],"(",["T_ARRAY","array",110],"(",["T_CONSTANT_ENCAPSED_STRING","'l'",110],["T_WHITESPACE"," ",110],["T_DOUBLE_ARROW","=>",110],["T_WHITESPACE"," ",110],["T_VARIABLE","$this",110],["T_OBJECT_OPERATOR","->",110],["T_STRING","getMainTable",110],"(",")",")",",",["T_WHITESPACE"," ",110],["T_ARRAY","array",110],"(",["T_CONSTANT_ENCAPSED_STRING","'product_id'",110],",",["T_WHITESPACE"," ",110],["T_CONSTANT_ENCAPSED_STRING","'parent_id'",110],")",")",["T_WHITESPACE","\n            ",110],["T_OBJECT_OPERATOR","->",111],["T_STRING","join",111],"(",["T_WHITESPACE","\n                ",111],["T_ARRAY","array",112],"(",["T_CONSTANT_ENCAPSED_STRING","'e'",112],["T_WHITESPACE"," ",112],["T_DOUBLE_ARROW","=>",112],["T_WHITESPACE"," ",112],["T_VARIABLE","$this",112],["T_OBJECT_OPERATOR","->",112],["T_STRING","getTable",112],"(",["T_CONSTANT_ENCAPSED_STRING","'catalog\/product'",112],")",")",",",["T_WHITESPACE","\n                ",112],["T_CONSTANT_ENCAPSED_STRING","'e.entity_id = l.product_id AND e.required_options = 0'",113],",",["T_WHITESPACE","\n                ",113],["T_ARRAY","array",114],"(",")",["T_WHITESPACE","\n            ",114],")",["T_WHITESPACE","\n            ",115],["T_OBJECT_OPERATOR","->",116],["T_STRING","where",116],"(",["T_CONSTANT_ENCAPSED_STRING","'parent_id = ?'",116],",",["T_WHITESPACE"," ",116],["T_VARIABLE","$parentId",116],")",";",["T_WHITESPACE","\n\n        ",116],["T_VARIABLE","$childrenIds",118],["T_WHITESPACE"," ",118],"=",["T_WHITESPACE"," ",118],["T_ARRAY","array",118],"(",["T_LNUMBER","0",118],["T_WHITESPACE"," ",118],["T_DOUBLE_ARROW","=>",118],["T_WHITESPACE"," ",118],["T_ARRAY","array",118],"(",")",")",";",["T_WHITESPACE","\n        ",118],["T_FOREACH","foreach",119],["T_WHITESPACE"," ",119],"(",["T_VARIABLE","$this",119],["T_OBJECT_OPERATOR","->",119],["T_STRING","_getReadAdapter",119],"(",")",["T_OBJECT_OPERATOR","->",119],["T_STRING","fetchAll",119],"(",["T_VARIABLE","$select",119],")",["T_WHITESPACE"," ",119],["T_AS","as",119],["T_WHITESPACE"," ",119],["T_VARIABLE","$row",119],")",["T_WHITESPACE"," ",119],"{",["T_WHITESPACE","\n            ",119],["T_VARIABLE","$childrenIds",120],"[",["T_LNUMBER","0",120],"]","[",["T_VARIABLE","$row",120],"[",["T_CONSTANT_ENCAPSED_STRING","'product_id'",120],"]","]",["T_WHITESPACE"," ",120],"=",["T_WHITESPACE"," ",120],["T_VARIABLE","$row",120],"[",["T_CONSTANT_ENCAPSED_STRING","'product_id'",120],"]",";",["T_WHITESPACE","\n        ",120],"}",["T_WHITESPACE","\n\n        ",121],["T_RETURN","return",123],["T_WHITESPACE"," ",123],["T_VARIABLE","$childrenIds",123],";",["T_WHITESPACE","\n    ",123],"}",["T_WHITESPACE","\n\n    ",124],["T_DOC_COMMENT","\/**\n     * Retrieve parent ids array by requered child\n     *\n     * @param int|array $childId\n     * @return array\n     *\/",126],["T_WHITESPACE","\n    ",131],["T_PUBLIC","public",132],["T_WHITESPACE"," ",132],["T_FUNCTION","function",132],["T_WHITESPACE"," ",132],["T_STRING","getParentIdsByChild",132],"(",["T_VARIABLE","$childId",132],")",["T_WHITESPACE","\n    ",132],"{",["T_WHITESPACE","\n        ",133],["T_VARIABLE","$parentIds",134],["T_WHITESPACE"," ",134],"=",["T_WHITESPACE"," ",134],["T_ARRAY","array",134],"(",")",";",["T_WHITESPACE","\n\n        ",134],["T_VARIABLE","$select",136],["T_WHITESPACE"," ",136],"=",["T_WHITESPACE"," ",136],["T_VARIABLE","$this",136],["T_OBJECT_OPERATOR","->",136],["T_STRING","_getReadAdapter",136],"(",")",["T_OBJECT_OPERATOR","->",136],["T_STRING","select",136],"(",")",["T_WHITESPACE","\n            ",136],["T_OBJECT_OPERATOR","->",137],["T_STRING","from",137],"(",["T_VARIABLE","$this",137],["T_OBJECT_OPERATOR","->",137],["T_STRING","getMainTable",137],"(",")",",",["T_WHITESPACE"," ",137],["T_ARRAY","array",137],"(",["T_CONSTANT_ENCAPSED_STRING","'product_id'",137],",",["T_WHITESPACE"," ",137],["T_CONSTANT_ENCAPSED_STRING","'parent_id'",137],")",")",["T_WHITESPACE","\n            ",137],["T_OBJECT_OPERATOR","->",138],["T_STRING","where",138],"(",["T_CONSTANT_ENCAPSED_STRING","'product_id IN(?)'",138],",",["T_WHITESPACE"," ",138],["T_VARIABLE","$childId",138],")",";",["T_WHITESPACE","\n        ",138],["T_FOREACH","foreach",139],["T_WHITESPACE"," ",139],"(",["T_VARIABLE","$this",139],["T_OBJECT_OPERATOR","->",139],["T_STRING","_getReadAdapter",139],"(",")",["T_OBJECT_OPERATOR","->",139],["T_STRING","fetchAll",139],"(",["T_VARIABLE","$select",139],")",["T_WHITESPACE"," ",139],["T_AS","as",139],["T_WHITESPACE"," ",139],["T_VARIABLE","$row",139],")",["T_WHITESPACE"," ",139],"{",["T_WHITESPACE","\n            ",139],["T_VARIABLE","$parentIds",140],"[","]",["T_WHITESPACE"," ",140],"=",["T_WHITESPACE"," ",140],["T_VARIABLE","$row",140],"[",["T_CONSTANT_ENCAPSED_STRING","'parent_id'",140],"]",";",["T_WHITESPACE","\n        ",140],"}",["T_WHITESPACE","\n\n        ",141],["T_RETURN","return",143],["T_WHITESPACE"," ",143],["T_VARIABLE","$parentIds",143],";",["T_WHITESPACE","\n    ",143],"}",["T_WHITESPACE","\n\n    ",144],["T_DOC_COMMENT","\/**\n     * Collect product options with values according to the product instance and attributes, that were received\n     *\n     * @param Mage_Catalog_Model_Product $product\n     * @param array $attributes\n     * @return array\n     *\/",146],["T_WHITESPACE","\n    ",152],["T_PUBLIC","public",153],["T_WHITESPACE"," ",153],["T_FUNCTION","function",153],["T_WHITESPACE"," ",153],["T_STRING","getConfigurableOptions",153],"(",["T_VARIABLE","$product",153],",",["T_WHITESPACE"," ",153],["T_VARIABLE","$attributes",153],")",["T_WHITESPACE","\n    ",153],"{",["T_WHITESPACE","\n        ",154],["T_VARIABLE","$attributesOptionsData",155],["T_WHITESPACE"," ",155],"=",["T_WHITESPACE"," ",155],["T_ARRAY","array",155],"(",")",";",["T_WHITESPACE","\n        ",155],["T_FOREACH","foreach",156],["T_WHITESPACE"," ",156],"(",["T_VARIABLE","$attributes",156],["T_WHITESPACE"," ",156],["T_AS","as",156],["T_WHITESPACE"," ",156],["T_VARIABLE","$superAttribute",156],")",["T_WHITESPACE"," ",156],"{",["T_WHITESPACE","\n            ",156],["T_VARIABLE","$select",157],["T_WHITESPACE"," ",157],"=",["T_WHITESPACE"," ",157],["T_VARIABLE","$this",157],["T_OBJECT_OPERATOR","->",157],["T_STRING","_getReadAdapter",157],"(",")",["T_OBJECT_OPERATOR","->",157],["T_STRING","select",157],"(",")",["T_WHITESPACE","\n                ",157],["T_OBJECT_OPERATOR","->",158],["T_STRING","from",158],"(",["T_WHITESPACE","\n                    ",158],["T_ARRAY","array",159],"(",["T_WHITESPACE","\n                        ",159],["T_CONSTANT_ENCAPSED_STRING","'super_attribute'",160],["T_WHITESPACE","       ",160],["T_DOUBLE_ARROW","=>",160],["T_WHITESPACE"," ",160],["T_VARIABLE","$this",160],["T_OBJECT_OPERATOR","->",160],["T_STRING","getTable",160],"(",["T_CONSTANT_ENCAPSED_STRING","'catalog\/product_super_attribute'",160],")",["T_WHITESPACE","\n                    ",160],")",",",["T_WHITESPACE","\n                    ",161],["T_ARRAY","array",162],"(",["T_WHITESPACE","\n                        ",162],["T_CONSTANT_ENCAPSED_STRING","'sku'",163],["T_WHITESPACE","                   ",163],["T_DOUBLE_ARROW","=>",163],["T_WHITESPACE"," ",163],["T_CONSTANT_ENCAPSED_STRING","'entity.sku'",163],",",["T_WHITESPACE","\n                        ",163],["T_CONSTANT_ENCAPSED_STRING","'product_id'",164],["T_WHITESPACE","            ",164],["T_DOUBLE_ARROW","=>",164],["T_WHITESPACE"," ",164],["T_CONSTANT_ENCAPSED_STRING","'super_attribute.product_id'",164],",",["T_WHITESPACE","\n                        ",164],["T_CONSTANT_ENCAPSED_STRING","'attribute_code'",165],["T_WHITESPACE","        ",165],["T_DOUBLE_ARROW","=>",165],["T_WHITESPACE"," ",165],["T_CONSTANT_ENCAPSED_STRING","'attribute.attribute_code'",165],",",["T_WHITESPACE","\n                        ",165],["T_CONSTANT_ENCAPSED_STRING","'option_title'",166],["T_WHITESPACE","          ",166],["T_DOUBLE_ARROW","=>",166],["T_WHITESPACE"," ",166],["T_CONSTANT_ENCAPSED_STRING","'option_value.value'",166],",",["T_WHITESPACE","\n                        ",166],["T_CONSTANT_ENCAPSED_STRING","'pricing_value'",167],["T_WHITESPACE","         ",167],["T_DOUBLE_ARROW","=>",167],["T_WHITESPACE"," ",167],["T_CONSTANT_ENCAPSED_STRING","'attribute_pricing.pricing_value'",167],",",["T_WHITESPACE","\n                        ",167],["T_CONSTANT_ENCAPSED_STRING","'pricing_is_percent'",168],["T_WHITESPACE","    ",168],["T_DOUBLE_ARROW","=>",168],["T_WHITESPACE"," ",168],["T_CONSTANT_ENCAPSED_STRING","'attribute_pricing.is_percent'",168],["T_WHITESPACE","\n                    ",168],")",["T_WHITESPACE","\n                ",169],")",["T_OBJECT_OPERATOR","->",170],["T_STRING","joinInner",170],"(",["T_WHITESPACE","\n                    ",170],["T_ARRAY","array",171],"(",["T_WHITESPACE","\n                        ",171],["T_CONSTANT_ENCAPSED_STRING","'product_link'",172],["T_WHITESPACE","          ",172],["T_DOUBLE_ARROW","=>",172],["T_WHITESPACE"," ",172],["T_VARIABLE","$this",172],["T_OBJECT_OPERATOR","->",172],["T_STRING","getTable",172],"(",["T_CONSTANT_ENCAPSED_STRING","'catalog\/product_super_link'",172],")",["T_WHITESPACE","\n                    ",172],")",",",["T_WHITESPACE","\n                    ",173],["T_CONSTANT_ENCAPSED_STRING","'product_link.parent_id = super_attribute.product_id'",174],",",["T_WHITESPACE","\n                    ",174],["T_ARRAY","array",175],"(",")",["T_WHITESPACE","\n                ",175],")",["T_OBJECT_OPERATOR","->",176],["T_STRING","joinInner",176],"(",["T_WHITESPACE","\n                    ",176],["T_ARRAY","array",177],"(",["T_WHITESPACE","\n                        ",177],["T_CONSTANT_ENCAPSED_STRING","'attribute'",178],["T_WHITESPACE","             ",178],["T_DOUBLE_ARROW","=>",178],["T_WHITESPACE"," ",178],["T_VARIABLE","$this",178],["T_OBJECT_OPERATOR","->",178],["T_STRING","getTable",178],"(",["T_CONSTANT_ENCAPSED_STRING","'eav\/attribute'",178],")",["T_WHITESPACE","\n                    ",178],")",",",["T_WHITESPACE","\n                    ",179],["T_CONSTANT_ENCAPSED_STRING","'attribute.attribute_id = super_attribute.attribute_id'",180],",",["T_WHITESPACE","\n                    ",180],["T_ARRAY","array",181],"(",")",["T_WHITESPACE","\n                ",181],")",["T_OBJECT_OPERATOR","->",182],["T_STRING","joinInner",182],"(",["T_WHITESPACE","\n                    ",182],["T_ARRAY","array",183],"(",["T_WHITESPACE","\n                        ",183],["T_CONSTANT_ENCAPSED_STRING","'entity'",184],["T_WHITESPACE","                ",184],["T_DOUBLE_ARROW","=>",184],["T_WHITESPACE"," ",184],["T_VARIABLE","$this",184],["T_OBJECT_OPERATOR","->",184],["T_STRING","getTable",184],"(",["T_CONSTANT_ENCAPSED_STRING","'catalog\/product'",184],")",["T_WHITESPACE","\n                    ",184],")",",",["T_WHITESPACE","\n                    ",185],["T_CONSTANT_ENCAPSED_STRING","'entity.entity_id = product_link.product_id'",186],",",["T_WHITESPACE","\n                    ",186],["T_ARRAY","array",187],"(",")",["T_WHITESPACE","\n                ",187],")",["T_OBJECT_OPERATOR","->",188],["T_STRING","joinInner",188],"(",["T_WHITESPACE","\n                    ",188],["T_ARRAY","array",189],"(",["T_WHITESPACE","\n                        ",189],["T_CONSTANT_ENCAPSED_STRING","'entity_value'",190],["T_WHITESPACE","          ",190],["T_DOUBLE_ARROW","=>",190],["T_WHITESPACE"," ",190],["T_VARIABLE","$superAttribute",190],["T_OBJECT_OPERATOR","->",190],["T_STRING","getBackendTable",190],"(",")",["T_WHITESPACE","\n                    ",190],")",",",["T_WHITESPACE","\n                    ",191],["T_STRING","implode",192],"(",["T_WHITESPACE","\n                        ",192],["T_CONSTANT_ENCAPSED_STRING","' AND '",193],",",["T_WHITESPACE","\n                        ",193],["T_ARRAY","array",194],"(",["T_WHITESPACE","\n                            ",194],["T_VARIABLE","$this",195],["T_OBJECT_OPERATOR","->",195],["T_STRING","_getReadAdapter",195],"(",")",["T_WHITESPACE","\n                                ",195],["T_OBJECT_OPERATOR","->",196],["T_STRING","quoteInto",196],"(",["T_CONSTANT_ENCAPSED_STRING","'entity_value.entity_type_id = ?'",196],",",["T_WHITESPACE"," ",196],["T_VARIABLE","$product",196],["T_OBJECT_OPERATOR","->",196],["T_STRING","getEntityTypeId",196],"(",")",")",",",["T_WHITESPACE","\n                            ",196],["T_CONSTANT_ENCAPSED_STRING","'entity_value.attribute_id = super_attribute.attribute_id'",197],",",["T_WHITESPACE","\n                            ",197],["T_CONSTANT_ENCAPSED_STRING","'entity_value.store_id = 0'",198],",",["T_WHITESPACE","\n                            ",198],["T_CONSTANT_ENCAPSED_STRING","'entity_value.entity_id = product_link.product_id'",199],["T_WHITESPACE","\n                        ",199],")",["T_WHITESPACE","\n                    ",200],")",",",["T_WHITESPACE","\n                    ",201],["T_ARRAY","array",202],"(",")",["T_WHITESPACE","\n                ",202],")",["T_OBJECT_OPERATOR","->",203],["T_STRING","joinLeft",203],"(",["T_WHITESPACE","\n                    ",203],["T_ARRAY","array",204],"(",["T_WHITESPACE","\n                        ",204],["T_CONSTANT_ENCAPSED_STRING","'option_value'",205],["T_WHITESPACE","          ",205],["T_DOUBLE_ARROW","=>",205],["T_WHITESPACE"," ",205],["T_VARIABLE","$this",205],["T_OBJECT_OPERATOR","->",205],["T_STRING","getTable",205],"(",["T_CONSTANT_ENCAPSED_STRING","'eav\/attribute_option_value'",205],")",["T_WHITESPACE","\n                    ",205],")",",",["T_WHITESPACE","\n                    ",206],["T_STRING","implode",207],"(",["T_CONSTANT_ENCAPSED_STRING","' AND '",207],",",["T_WHITESPACE"," ",207],["T_ARRAY","array",207],"(",["T_WHITESPACE","\n                        ",207],["T_CONSTANT_ENCAPSED_STRING","'option_value.option_id = entity_value.value'",208],",",["T_WHITESPACE","\n                        ",208],["T_CONSTANT_ENCAPSED_STRING","'option_value.store_id = '",209],["T_WHITESPACE"," ",209],".",["T_WHITESPACE"," ",209],["T_STRING","Mage_Core_Model_App",209],["T_DOUBLE_COLON","::",209],["T_STRING","ADMIN_STORE_ID",209],",",["T_WHITESPACE","\n                    ",209],")",")",",",["T_WHITESPACE","\n                    ",210],["T_ARRAY","array",211],"(",")",["T_WHITESPACE","\n                ",211],")",["T_OBJECT_OPERATOR","->",212],["T_STRING","joinLeft",212],"(",["T_WHITESPACE","\n                    ",212],["T_ARRAY","array",213],"(",["T_WHITESPACE","\n                        ",213],["T_CONSTANT_ENCAPSED_STRING","'attribute_pricing'",214],["T_WHITESPACE","     ",214],["T_DOUBLE_ARROW","=>",214],["T_WHITESPACE"," ",214],["T_VARIABLE","$this",214],["T_OBJECT_OPERATOR","->",214],["T_STRING","getTable",214],"(",["T_CONSTANT_ENCAPSED_STRING","'catalog\/product_super_attribute_pricing'",214],")",["T_WHITESPACE","\n                    ",214],")",",",["T_WHITESPACE","\n                    ",215],["T_STRING","implode",216],"(",["T_CONSTANT_ENCAPSED_STRING","' AND '",216],",",["T_WHITESPACE"," ",216],["T_ARRAY","array",216],"(",["T_WHITESPACE","\n                        ",216],["T_CONSTANT_ENCAPSED_STRING","'super_attribute.product_super_attribute_id = attribute_pricing.product_super_attribute_id'",217],",",["T_WHITESPACE","\n                        ",217],["T_CONSTANT_ENCAPSED_STRING","'entity_value.value = attribute_pricing.value_index'",218],["T_WHITESPACE","\n                    ",218],")",")",",",["T_WHITESPACE","\n                    ",219],["T_ARRAY","array",220],"(",")",["T_WHITESPACE","\n                ",220],")",["T_OBJECT_OPERATOR","->",221],["T_STRING","where",221],"(",["T_CONSTANT_ENCAPSED_STRING","'super_attribute.product_id = ?'",221],",",["T_WHITESPACE"," ",221],["T_VARIABLE","$product",221],["T_OBJECT_OPERATOR","->",221],["T_STRING","getId",221],"(",")",")",";",["T_WHITESPACE","\n\n            ",221],["T_VARIABLE","$attributesOptionsData",223],"[",["T_VARIABLE","$superAttribute",223],["T_OBJECT_OPERATOR","->",223],["T_STRING","getAttributeId",223],"(",")","]",["T_WHITESPACE"," ",223],"=",["T_WHITESPACE"," ",223],["T_VARIABLE","$this",223],["T_OBJECT_OPERATOR","->",223],["T_STRING","_getReadAdapter",223],"(",")",["T_OBJECT_OPERATOR","->",223],["T_STRING","fetchAll",223],"(",["T_VARIABLE","$select",223],")",";",["T_WHITESPACE","\n        ",223],"}",["T_WHITESPACE","\n        ",224],["T_RETURN","return",225],["T_WHITESPACE"," ",225],["T_VARIABLE","$attributesOptionsData",225],";",["T_WHITESPACE","\n    ",225],"}",["T_WHITESPACE","\n",226],"}",["T_WHITESPACE","\n",227]]
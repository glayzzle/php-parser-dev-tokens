[["T_OPEN_TAG","<?php\n",1],["T_DOC_COMMENT","\/**\n * Magento\n *\n * NOTICE OF LICENSE\n *\n * This source file is subject to the Open Software License (OSL 3.0)\n * that is bundled with this package in the file LICENSE.txt.\n * It is also available through the world-wide-web at this URL:\n * http:\/\/opensource.org\/licenses\/osl-3.0.php\n * If you did not receive a copy of the license and are unable to\n * obtain it through the world-wide-web, please send an email\n * to license@magento.com so we can send you a copy immediately.\n *\n * DISCLAIMER\n *\n * Do not edit or add to this file if you wish to upgrade Magento to newer\n * versions in the future. If you wish to customize Magento for your\n * needs please refer to http:\/\/www.magento.com for more information.\n *\n * @category    Mage\n * @package     Mage_Catalog\n * @copyright  Copyright (c) 2006-2016 X.commerce, Inc. and affiliates (http:\/\/www.magento.com)\n * @license    http:\/\/opensource.org\/licenses\/osl-3.0.php  Open Software License (OSL 3.0)\n *\/",2],["T_WHITESPACE","\n\n",25],["T_VARIABLE","$installer",27],["T_WHITESPACE"," ",27],"=",["T_WHITESPACE"," ",27],["T_VARIABLE","$this",27],";",["T_WHITESPACE","\n",27],["T_COMMENT","\/* @var $installer Mage_Catalog_Model_Resource_Eav_Mysql4_Setup *\/",28],["T_WHITESPACE","\n\n",28],["T_VARIABLE","$tableCatalogProduct",30],["T_WHITESPACE"," ",30],"=",["T_WHITESPACE"," ",30],["T_VARIABLE","$this",30],["T_OBJECT_OPERATOR","->",30],["T_STRING","getTable",30],"(",["T_CONSTANT_ENCAPSED_STRING","'catalog\/product'",30],")",";",["T_WHITESPACE","\n\n",30],["T_VARIABLE","$types",32],["T_WHITESPACE"," ",32],"=",["T_WHITESPACE"," ",32],["T_ARRAY","array",32],"(",["T_CONSTANT_ENCAPSED_STRING","'datetime'",32],",",["T_WHITESPACE"," ",32],["T_CONSTANT_ENCAPSED_STRING","'decimal'",32],",",["T_WHITESPACE"," ",32],["T_CONSTANT_ENCAPSED_STRING","'int'",32],",",["T_WHITESPACE"," ",32],["T_CONSTANT_ENCAPSED_STRING","'text'",32],",",["T_WHITESPACE"," ",32],["T_CONSTANT_ENCAPSED_STRING","'varchar'",32],")",";",["T_WHITESPACE","\n\n",32],["T_FOREACH","foreach",34],["T_WHITESPACE"," ",34],"(",["T_VARIABLE","$types",34],["T_WHITESPACE"," ",34],["T_AS","as",34],["T_WHITESPACE"," ",34],["T_VARIABLE","$type",34],")",["T_WHITESPACE"," ",34],"{",["T_WHITESPACE","\n    ",34],["T_VARIABLE","$tableName",35],["T_WHITESPACE"," ",35],"=",["T_WHITESPACE"," ",35],["T_VARIABLE","$tableCatalogProduct",35],["T_WHITESPACE"," ",35],".",["T_WHITESPACE"," ",35],["T_CONSTANT_ENCAPSED_STRING","'_'",35],["T_WHITESPACE"," ",35],".",["T_WHITESPACE"," ",35],["T_VARIABLE","$type",35],";",["T_WHITESPACE","\n\n    ",35],["T_VARIABLE","$select",37],["T_WHITESPACE"," ",37],"=",["T_WHITESPACE"," ",37],["T_VARIABLE","$installer",37],["T_OBJECT_OPERATOR","->",37],["T_STRING","getConnection",37],"(",")",["T_OBJECT_OPERATOR","->",37],["T_STRING","select",37],"(",")",["T_WHITESPACE","\n        ",37],["T_OBJECT_OPERATOR","->",38],["T_STRING","from",38],"(",["T_VARIABLE","$tableName",38],",",["T_WHITESPACE"," ",38],["T_ARRAY","array",38],"(",["T_WHITESPACE","\n            ",38],["T_CONSTANT_ENCAPSED_STRING","'entity_id'",39],["T_WHITESPACE","         ",39],["T_DOUBLE_ARROW","=>",39],["T_WHITESPACE"," ",39],["T_CONSTANT_ENCAPSED_STRING","'entity_id'",39],",",["T_WHITESPACE","\n            ",39],["T_CONSTANT_ENCAPSED_STRING","'attribute_id'",40],["T_WHITESPACE","      ",40],["T_DOUBLE_ARROW","=>",40],["T_WHITESPACE"," ",40],["T_CONSTANT_ENCAPSED_STRING","'attribute_id'",40],",",["T_WHITESPACE","\n            ",40],["T_CONSTANT_ENCAPSED_STRING","'store_id'",41],["T_WHITESPACE","          ",41],["T_DOUBLE_ARROW","=>",41],["T_WHITESPACE"," ",41],["T_CONSTANT_ENCAPSED_STRING","'store_id'",41],",",["T_WHITESPACE","\n            ",41],["T_CONSTANT_ENCAPSED_STRING","'rows_count'",42],["T_WHITESPACE","        ",42],["T_DOUBLE_ARROW","=>",42],["T_WHITESPACE"," ",42],["T_CONSTANT_ENCAPSED_STRING","'COUNT(*)'",42],")",")",["T_WHITESPACE","\n        ",42],["T_OBJECT_OPERATOR","->",43],["T_STRING","group",43],"(",["T_ARRAY","array",43],"(",["T_CONSTANT_ENCAPSED_STRING","'entity_id'",43],",",["T_WHITESPACE"," ",43],["T_CONSTANT_ENCAPSED_STRING","'attribute_id'",43],",",["T_WHITESPACE"," ",43],["T_CONSTANT_ENCAPSED_STRING","'store_id'",43],")",")",["T_WHITESPACE","\n        ",43],["T_OBJECT_OPERATOR","->",44],["T_STRING","having",44],"(",["T_CONSTANT_ENCAPSED_STRING","'rows_count > 1'",44],")",";",["T_WHITESPACE","\n    ",44],["T_VARIABLE","$query",45],["T_WHITESPACE"," ",45],"=",["T_WHITESPACE"," ",45],["T_VARIABLE","$installer",45],["T_OBJECT_OPERATOR","->",45],["T_STRING","getConnection",45],"(",")",["T_OBJECT_OPERATOR","->",45],["T_STRING","query",45],"(",["T_VARIABLE","$select",45],")",";",["T_WHITESPACE","\n\n    ",45],["T_WHILE","while",47],["T_WHITESPACE"," ",47],"(",["T_VARIABLE","$row",47],["T_WHITESPACE"," ",47],"=",["T_WHITESPACE"," ",47],["T_VARIABLE","$query",47],["T_OBJECT_OPERATOR","->",47],["T_STRING","fetch",47],"(",")",")",["T_WHITESPACE"," ",47],"{",["T_WHITESPACE","\n        ",47],["T_VARIABLE","$sql",48],["T_WHITESPACE"," ",48],"=",["T_WHITESPACE"," ",48],["T_CONSTANT_ENCAPSED_STRING","'DELETE FROM `'",48],["T_WHITESPACE"," ",48],".",["T_WHITESPACE"," ",48],["T_VARIABLE","$tableName",48],["T_WHITESPACE"," ",48],".",["T_WHITESPACE"," ",48],["T_CONSTANT_ENCAPSED_STRING","'`'",48],["T_WHITESPACE","\n            ",48],".",["T_WHITESPACE"," ",49],["T_CONSTANT_ENCAPSED_STRING","' WHERE entity_id=? AND attribute_id=? AND store_id=?'",49],["T_WHITESPACE","\n            ",49],".",["T_WHITESPACE"," ",50],["T_CONSTANT_ENCAPSED_STRING","' LIMIT '",50],["T_WHITESPACE"," ",50],".",["T_WHITESPACE"," ",50],"(",["T_VARIABLE","$row",50],"[",["T_CONSTANT_ENCAPSED_STRING","'rows_count'",50],"]",["T_WHITESPACE"," ",50],"-",["T_WHITESPACE"," ",50],["T_LNUMBER","1",50],")",";",["T_WHITESPACE","\n        ",50],["T_VARIABLE","$installer",51],["T_OBJECT_OPERATOR","->",51],["T_STRING","getConnection",51],"(",")",["T_OBJECT_OPERATOR","->",51],["T_STRING","query",51],"(",["T_VARIABLE","$sql",51],",",["T_WHITESPACE"," ",51],["T_ARRAY","array",51],"(",["T_WHITESPACE","\n            ",51],["T_VARIABLE","$row",52],"[",["T_CONSTANT_ENCAPSED_STRING","'entity_id'",52],"]",",",["T_WHITESPACE","\n            ",52],["T_VARIABLE","$row",53],"[",["T_CONSTANT_ENCAPSED_STRING","'attribute_id'",53],"]",",",["T_WHITESPACE","\n            ",53],["T_VARIABLE","$row",54],"[",["T_CONSTANT_ENCAPSED_STRING","'store_id'",54],"]",["T_WHITESPACE","\n        ",54],")",")",";",["T_WHITESPACE","\n    ",55],"}",["T_WHITESPACE","\n\n    ",56],["T_VARIABLE","$installer",58],["T_OBJECT_OPERATOR","->",58],["T_STRING","getConnection",58],"(",")",["T_OBJECT_OPERATOR","->",58],["T_STRING","addKey",58],"(",["T_VARIABLE","$tableName",58],",",["T_WHITESPACE"," ",58],["T_CONSTANT_ENCAPSED_STRING","'IDX_ATTRIBUTE_VALUE'",58],",",["T_WHITESPACE"," ",58],["T_ARRAY","array",58],"(",["T_CONSTANT_ENCAPSED_STRING","'entity_id'",58],",",["T_WHITESPACE"," ",58],["T_CONSTANT_ENCAPSED_STRING","'attribute_id'",58],",",["T_WHITESPACE"," ",58],["T_CONSTANT_ENCAPSED_STRING","'store_id'",58],")",",",["T_WHITESPACE"," ",58],["T_CONSTANT_ENCAPSED_STRING","'unique'",58],")",";",["T_WHITESPACE","\n",58],"}",["T_WHITESPACE","\n\n",59],["T_COMMENT","\/\/ exception for gallery table\n",61],["T_WHITESPACE","\n",62],["T_VARIABLE","$tableName",63],["T_WHITESPACE"," ",63],"=",["T_WHITESPACE"," ",63],["T_VARIABLE","$tableCatalogProduct",63],["T_WHITESPACE"," ",63],".",["T_WHITESPACE"," ",63],["T_CONSTANT_ENCAPSED_STRING","'_gallery'",63],";",["T_WHITESPACE","\n\n",63],["T_VARIABLE","$select",65],["T_WHITESPACE"," ",65],"=",["T_WHITESPACE"," ",65],["T_VARIABLE","$installer",65],["T_OBJECT_OPERATOR","->",65],["T_STRING","getConnection",65],"(",")",["T_OBJECT_OPERATOR","->",65],["T_STRING","select",65],"(",")",["T_WHITESPACE","\n    ",65],["T_OBJECT_OPERATOR","->",66],["T_STRING","from",66],"(",["T_VARIABLE","$tableName",66],",",["T_WHITESPACE"," ",66],["T_ARRAY","array",66],"(",["T_WHITESPACE","\n        ",66],["T_CONSTANT_ENCAPSED_STRING","'entity_type_id'",67],["T_WHITESPACE","    ",67],["T_DOUBLE_ARROW","=>",67],["T_WHITESPACE"," ",67],["T_CONSTANT_ENCAPSED_STRING","'entity_type_id'",67],",",["T_WHITESPACE","\n        ",67],["T_CONSTANT_ENCAPSED_STRING","'entity_id'",68],["T_WHITESPACE","         ",68],["T_DOUBLE_ARROW","=>",68],["T_WHITESPACE"," ",68],["T_CONSTANT_ENCAPSED_STRING","'entity_id'",68],",",["T_WHITESPACE","\n        ",68],["T_CONSTANT_ENCAPSED_STRING","'attribute_id'",69],["T_WHITESPACE","      ",69],["T_DOUBLE_ARROW","=>",69],["T_WHITESPACE"," ",69],["T_CONSTANT_ENCAPSED_STRING","'attribute_id'",69],",",["T_WHITESPACE","\n        ",69],["T_CONSTANT_ENCAPSED_STRING","'store_id'",70],["T_WHITESPACE","          ",70],["T_DOUBLE_ARROW","=>",70],["T_WHITESPACE"," ",70],["T_CONSTANT_ENCAPSED_STRING","'store_id'",70],",",["T_WHITESPACE","\n        ",70],["T_CONSTANT_ENCAPSED_STRING","'rows_count'",71],["T_WHITESPACE","        ",71],["T_DOUBLE_ARROW","=>",71],["T_WHITESPACE"," ",71],["T_CONSTANT_ENCAPSED_STRING","'COUNT(*)'",71],")",")",["T_WHITESPACE","\n    ",71],["T_OBJECT_OPERATOR","->",72],["T_STRING","group",72],"(",["T_ARRAY","array",72],"(",["T_CONSTANT_ENCAPSED_STRING","'entity_id'",72],",",["T_WHITESPACE"," ",72],["T_CONSTANT_ENCAPSED_STRING","'attribute_id'",72],",",["T_WHITESPACE"," ",72],["T_CONSTANT_ENCAPSED_STRING","'store_id'",72],")",")",["T_WHITESPACE","\n    ",72],["T_OBJECT_OPERATOR","->",73],["T_STRING","having",73],"(",["T_CONSTANT_ENCAPSED_STRING","'rows_count > 1'",73],")",";",["T_WHITESPACE","\n",73],["T_VARIABLE","$query",74],["T_WHITESPACE"," ",74],"=",["T_WHITESPACE"," ",74],["T_VARIABLE","$installer",74],["T_OBJECT_OPERATOR","->",74],["T_STRING","getConnection",74],"(",")",["T_OBJECT_OPERATOR","->",74],["T_STRING","query",74],"(",["T_VARIABLE","$select",74],")",";",["T_WHITESPACE","\n\n",74],["T_WHILE","while",76],["T_WHITESPACE"," ",76],"(",["T_VARIABLE","$row",76],["T_WHITESPACE"," ",76],"=",["T_WHITESPACE"," ",76],["T_VARIABLE","$query",76],["T_OBJECT_OPERATOR","->",76],["T_STRING","fetch",76],"(",")",")",["T_WHITESPACE"," ",76],"{",["T_WHITESPACE","\n    ",76],["T_VARIABLE","$sql",77],["T_WHITESPACE"," ",77],"=",["T_WHITESPACE"," ",77],["T_CONSTANT_ENCAPSED_STRING","'DELETE FROM `'",77],["T_WHITESPACE"," ",77],".",["T_WHITESPACE"," ",77],["T_VARIABLE","$tableName",77],["T_WHITESPACE"," ",77],".",["T_WHITESPACE"," ",77],["T_CONSTANT_ENCAPSED_STRING","'`'",77],["T_WHITESPACE","\n        ",77],".",["T_WHITESPACE"," ",78],["T_CONSTANT_ENCAPSED_STRING","' WHERE entity_type_id=? AND entity_id=? AND attribute_id=? AND store_id=?'",78],["T_WHITESPACE","\n        ",78],".",["T_WHITESPACE"," ",79],["T_CONSTANT_ENCAPSED_STRING","' LIMIT '",79],["T_WHITESPACE"," ",79],".",["T_WHITESPACE"," ",79],"(",["T_VARIABLE","$row",79],"[",["T_CONSTANT_ENCAPSED_STRING","'rows_count'",79],"]",["T_WHITESPACE"," ",79],"-",["T_WHITESPACE"," ",79],["T_LNUMBER","1",79],")",";",["T_WHITESPACE","\n    ",79],["T_VARIABLE","$installer",80],["T_OBJECT_OPERATOR","->",80],["T_STRING","getConnection",80],"(",")",["T_OBJECT_OPERATOR","->",80],["T_STRING","query",80],"(",["T_VARIABLE","$sql",80],",",["T_WHITESPACE"," ",80],["T_ARRAY","array",80],"(",["T_WHITESPACE","\n        ",80],["T_VARIABLE","$row",81],"[",["T_CONSTANT_ENCAPSED_STRING","'entity_type_id'",81],"]",",",["T_WHITESPACE","\n        ",81],["T_VARIABLE","$row",82],"[",["T_CONSTANT_ENCAPSED_STRING","'entity_id'",82],"]",",",["T_WHITESPACE","\n        ",82],["T_VARIABLE","$row",83],"[",["T_CONSTANT_ENCAPSED_STRING","'attribute_id'",83],"]",",",["T_WHITESPACE","\n        ",83],["T_VARIABLE","$row",84],"[",["T_CONSTANT_ENCAPSED_STRING","'store_id'",84],"]",["T_WHITESPACE","\n    ",84],")",")",";",["T_WHITESPACE","\n",85],"}",["T_WHITESPACE","\n\n",86],["T_VARIABLE","$installer",88],["T_OBJECT_OPERATOR","->",88],["T_STRING","getConnection",88],"(",")",["T_OBJECT_OPERATOR","->",88],["T_STRING","addKey",88],"(","\"",["T_CURLY_OPEN","{",88],["T_VARIABLE","$tableCatalogProduct",88],"}",["T_ENCAPSED_AND_WHITESPACE","_gallery",88],"\"",",",["T_WHITESPACE"," ",88],["T_CONSTANT_ENCAPSED_STRING","'IDX_BASE'",88],",",["T_WHITESPACE"," ",88],["T_ARRAY","array",88],"(",["T_CONSTANT_ENCAPSED_STRING","'entity_type_id'",88],",",["T_CONSTANT_ENCAPSED_STRING","'entity_id'",88],",",["T_CONSTANT_ENCAPSED_STRING","'attribute_id'",88],",",["T_CONSTANT_ENCAPSED_STRING","'store_id'",88],")",",",["T_WHITESPACE"," ",88],["T_CONSTANT_ENCAPSED_STRING","'unique'",88],")",";",["T_WHITESPACE","\n",88]]
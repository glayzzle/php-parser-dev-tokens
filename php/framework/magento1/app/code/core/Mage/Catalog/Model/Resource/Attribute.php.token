[["T_OPEN_TAG","<?php\n",1],["T_DOC_COMMENT","\/**\n * Magento\n *\n * NOTICE OF LICENSE\n *\n * This source file is subject to the Open Software License (OSL 3.0)\n * that is bundled with this package in the file LICENSE.txt.\n * It is also available through the world-wide-web at this URL:\n * http:\/\/opensource.org\/licenses\/osl-3.0.php\n * If you did not receive a copy of the license and are unable to\n * obtain it through the world-wide-web, please send an email\n * to license@magento.com so we can send you a copy immediately.\n *\n * DISCLAIMER\n *\n * Do not edit or add to this file if you wish to upgrade Magento to newer\n * versions in the future. If you wish to customize Magento for your\n * needs please refer to http:\/\/www.magento.com for more information.\n *\n * @category    Mage\n * @package     Mage_Catalog\n * @copyright  Copyright (c) 2006-2016 X.commerce, Inc. and affiliates (http:\/\/www.magento.com)\n * @license    http:\/\/opensource.org\/licenses\/osl-3.0.php  Open Software License (OSL 3.0)\n *\/",2],["T_WHITESPACE","\n\n\n",25],["T_DOC_COMMENT","\/**\n * Catalog attribute resource model\n *\n * @category    Mage\n * @package     Mage_Catalog\n * @author      Magento Core Team <core@magentocommerce.com>\n *\/",28],["T_WHITESPACE","\n",34],["T_CLASS","class",35],["T_WHITESPACE"," ",35],["T_STRING","Mage_Catalog_Model_Resource_Attribute",35],["T_WHITESPACE"," ",35],["T_EXTENDS","extends",35],["T_WHITESPACE"," ",35],["T_STRING","Mage_Eav_Model_Resource_Entity_Attribute",35],["T_WHITESPACE","\n",35],"{",["T_WHITESPACE","\n    ",36],["T_DOC_COMMENT","\/**\n     * Perform actions before object save\n     *\n     * @param Mage_Core_Model_Abstract $object\n     * @return Mage_Catalog_Model_Resource_Attribute\n     *\/",37],["T_WHITESPACE","\n    ",42],["T_PROTECTED","protected",43],["T_WHITESPACE"," ",43],["T_FUNCTION","function",43],["T_WHITESPACE"," ",43],["T_STRING","_beforeSave",43],"(",["T_STRING","Mage_Core_Model_Abstract",43],["T_WHITESPACE"," ",43],["T_VARIABLE","$object",43],")",["T_WHITESPACE","\n    ",43],"{",["T_WHITESPACE","\n        ",44],["T_VARIABLE","$applyTo",45],["T_WHITESPACE"," ",45],"=",["T_WHITESPACE"," ",45],["T_VARIABLE","$object",45],["T_OBJECT_OPERATOR","->",45],["T_STRING","getApplyTo",45],"(",")",";",["T_WHITESPACE","\n        ",45],["T_IF","if",46],["T_WHITESPACE"," ",46],"(",["T_STRING","is_array",46],"(",["T_VARIABLE","$applyTo",46],")",")",["T_WHITESPACE"," ",46],"{",["T_WHITESPACE","\n            ",46],["T_VARIABLE","$object",47],["T_OBJECT_OPERATOR","->",47],["T_STRING","setApplyTo",47],"(",["T_STRING","implode",47],"(",["T_CONSTANT_ENCAPSED_STRING","','",47],",",["T_WHITESPACE"," ",47],["T_VARIABLE","$applyTo",47],")",")",";",["T_WHITESPACE","\n        ",47],"}",["T_WHITESPACE","\n        ",48],["T_RETURN","return",49],["T_WHITESPACE"," ",49],["T_STRING","parent",49],["T_DOUBLE_COLON","::",49],["T_STRING","_beforeSave",49],"(",["T_VARIABLE","$object",49],")",";",["T_WHITESPACE","\n    ",49],"}",["T_WHITESPACE","\n\n    ",50],["T_DOC_COMMENT","\/**\n     * Perform actions after object save\n     *\n     * @param  Mage_Core_Model_Abstract $object\n     * @return Mage_Catalog_Model_Resource_Attribute\n     *\/",52],["T_WHITESPACE","\n    ",57],["T_PROTECTED","protected",58],["T_WHITESPACE"," ",58],["T_FUNCTION","function",58],["T_WHITESPACE"," ",58],["T_STRING","_afterSave",58],"(",["T_STRING","Mage_Core_Model_Abstract",58],["T_WHITESPACE"," ",58],["T_VARIABLE","$object",58],")",["T_WHITESPACE","\n    ",58],"{",["T_WHITESPACE","\n        ",59],["T_VARIABLE","$this",60],["T_OBJECT_OPERATOR","->",60],["T_STRING","_clearUselessAttributeValues",60],"(",["T_VARIABLE","$object",60],")",";",["T_WHITESPACE","\n        ",60],["T_RETURN","return",61],["T_WHITESPACE"," ",61],["T_STRING","parent",61],["T_DOUBLE_COLON","::",61],["T_STRING","_afterSave",61],"(",["T_VARIABLE","$object",61],")",";",["T_WHITESPACE","\n    ",61],"}",["T_WHITESPACE","\n\n    ",62],["T_DOC_COMMENT","\/**\n     * Clear useless attribute values\n     *\n     * @param  Mage_Core_Model_Abstract $object\n     * @return Mage_Catalog_Model_Resource_Attribute\n     *\/",64],["T_WHITESPACE","\n    ",69],["T_PROTECTED","protected",70],["T_WHITESPACE"," ",70],["T_FUNCTION","function",70],["T_WHITESPACE"," ",70],["T_STRING","_clearUselessAttributeValues",70],"(",["T_STRING","Mage_Core_Model_Abstract",70],["T_WHITESPACE"," ",70],["T_VARIABLE","$object",70],")",["T_WHITESPACE","\n    ",70],"{",["T_WHITESPACE","\n        ",71],["T_VARIABLE","$origData",72],["T_WHITESPACE"," ",72],"=",["T_WHITESPACE"," ",72],["T_VARIABLE","$object",72],["T_OBJECT_OPERATOR","->",72],["T_STRING","getOrigData",72],"(",")",";",["T_WHITESPACE","\n\n        ",72],["T_IF","if",74],["T_WHITESPACE"," ",74],"(",["T_VARIABLE","$object",74],["T_OBJECT_OPERATOR","->",74],["T_STRING","isScopeGlobal",74],"(",")",["T_WHITESPACE","\n            ",74],["T_BOOLEAN_AND","&&",75],["T_WHITESPACE"," ",75],["T_ISSET","isset",75],"(",["T_VARIABLE","$origData",75],"[",["T_CONSTANT_ENCAPSED_STRING","'is_global'",75],"]",")",["T_WHITESPACE","\n            ",75],["T_BOOLEAN_AND","&&",76],["T_WHITESPACE"," ",76],["T_STRING","Mage_Catalog_Model_Resource_Eav_Attribute",76],["T_DOUBLE_COLON","::",76],["T_STRING","SCOPE_GLOBAL",76],["T_WHITESPACE"," ",76],["T_IS_NOT_EQUAL","!=",76],["T_WHITESPACE"," ",76],["T_VARIABLE","$origData",76],"[",["T_CONSTANT_ENCAPSED_STRING","'is_global'",76],"]",["T_WHITESPACE","\n        ",76],")",["T_WHITESPACE"," ",77],"{",["T_WHITESPACE","\n            ",77],["T_VARIABLE","$attributeStoreIds",78],["T_WHITESPACE"," ",78],"=",["T_WHITESPACE"," ",78],["T_STRING","array_keys",78],"(",["T_STRING","Mage",78],["T_DOUBLE_COLON","::",78],["T_STRING","app",78],"(",")",["T_OBJECT_OPERATOR","->",78],["T_STRING","getStores",78],"(",")",")",";",["T_WHITESPACE","\n            ",78],["T_IF","if",79],["T_WHITESPACE"," ",79],"(","!",["T_EMPTY","empty",79],"(",["T_VARIABLE","$attributeStoreIds",79],")",")",["T_WHITESPACE"," ",79],"{",["T_WHITESPACE","\n                ",79],["T_VARIABLE","$delCondition",80],["T_WHITESPACE"," ",80],"=",["T_WHITESPACE"," ",80],["T_ARRAY","array",80],"(",["T_WHITESPACE","\n                    ",80],["T_CONSTANT_ENCAPSED_STRING","'entity_type_id=?'",81],["T_WHITESPACE"," ",81],["T_DOUBLE_ARROW","=>",81],["T_WHITESPACE"," ",81],["T_VARIABLE","$object",81],["T_OBJECT_OPERATOR","->",81],["T_STRING","getEntityTypeId",81],"(",")",",",["T_WHITESPACE","\n                    ",81],["T_CONSTANT_ENCAPSED_STRING","'attribute_id = ?'",82],["T_WHITESPACE"," ",82],["T_DOUBLE_ARROW","=>",82],["T_WHITESPACE"," ",82],["T_VARIABLE","$object",82],["T_OBJECT_OPERATOR","->",82],["T_STRING","getId",82],"(",")",",",["T_WHITESPACE","\n                    ",82],["T_CONSTANT_ENCAPSED_STRING","'store_id IN(?)'",83],["T_WHITESPACE","   ",83],["T_DOUBLE_ARROW","=>",83],["T_WHITESPACE"," ",83],["T_VARIABLE","$attributeStoreIds",83],["T_WHITESPACE","\n                ",83],")",";",["T_WHITESPACE","\n                ",84],["T_VARIABLE","$this",85],["T_OBJECT_OPERATOR","->",85],["T_STRING","_getWriteAdapter",85],"(",")",["T_OBJECT_OPERATOR","->",85],["T_STRING","delete",85],"(",["T_VARIABLE","$object",85],["T_OBJECT_OPERATOR","->",85],["T_STRING","getBackendTable",85],"(",")",",",["T_WHITESPACE"," ",85],["T_VARIABLE","$delCondition",85],")",";",["T_WHITESPACE","\n            ",85],"}",["T_WHITESPACE","\n        ",86],"}",["T_WHITESPACE","\n\n        ",87],["T_RETURN","return",89],["T_WHITESPACE"," ",89],["T_VARIABLE","$this",89],";",["T_WHITESPACE","\n    ",89],"}",["T_WHITESPACE","\n\n    ",90],["T_DOC_COMMENT","\/**\n     * Delete entity\n     *\n     * @param Mage_Core_Model_Abstract $object\n     * @return Mage_Catalog_Model_Resource_Attribute\n     *\/",92],["T_WHITESPACE","\n    ",97],["T_PUBLIC","public",98],["T_WHITESPACE"," ",98],["T_FUNCTION","function",98],["T_WHITESPACE"," ",98],["T_STRING","deleteEntity",98],"(",["T_STRING","Mage_Core_Model_Abstract",98],["T_WHITESPACE"," ",98],["T_VARIABLE","$object",98],")",["T_WHITESPACE","\n    ",98],"{",["T_WHITESPACE","\n        ",99],["T_IF","if",100],["T_WHITESPACE"," ",100],"(","!",["T_VARIABLE","$object",100],["T_OBJECT_OPERATOR","->",100],["T_STRING","getEntityAttributeId",100],"(",")",")",["T_WHITESPACE"," ",100],"{",["T_WHITESPACE","\n            ",100],["T_RETURN","return",101],["T_WHITESPACE"," ",101],["T_VARIABLE","$this",101],";",["T_WHITESPACE","\n        ",101],"}",["T_WHITESPACE","\n\n        ",102],["T_VARIABLE","$select",104],["T_WHITESPACE"," ",104],"=",["T_WHITESPACE"," ",104],["T_VARIABLE","$this",104],["T_OBJECT_OPERATOR","->",104],["T_STRING","_getReadAdapter",104],"(",")",["T_OBJECT_OPERATOR","->",104],["T_STRING","select",104],"(",")",["T_WHITESPACE","\n            ",104],["T_OBJECT_OPERATOR","->",105],["T_STRING","from",105],"(",["T_VARIABLE","$this",105],["T_OBJECT_OPERATOR","->",105],["T_STRING","getTable",105],"(",["T_CONSTANT_ENCAPSED_STRING","'eav\/entity_attribute'",105],")",")",["T_WHITESPACE","\n            ",105],["T_OBJECT_OPERATOR","->",106],["T_STRING","where",106],"(",["T_CONSTANT_ENCAPSED_STRING","'entity_attribute_id = ?'",106],",",["T_WHITESPACE"," ",106],["T_INT_CAST","(int)",106],["T_VARIABLE","$object",106],["T_OBJECT_OPERATOR","->",106],["T_STRING","getEntityAttributeId",106],"(",")",")",";",["T_WHITESPACE","\n        ",106],["T_VARIABLE","$result",107],["T_WHITESPACE"," ",107],"=",["T_WHITESPACE"," ",107],["T_VARIABLE","$this",107],["T_OBJECT_OPERATOR","->",107],["T_STRING","_getReadAdapter",107],"(",")",["T_OBJECT_OPERATOR","->",107],["T_STRING","fetchRow",107],"(",["T_VARIABLE","$select",107],")",";",["T_WHITESPACE","\n\n        ",107],["T_IF","if",109],["T_WHITESPACE"," ",109],"(",["T_VARIABLE","$result",109],")",["T_WHITESPACE"," ",109],"{",["T_WHITESPACE","\n            ",109],["T_VARIABLE","$attribute",110],["T_WHITESPACE"," ",110],"=",["T_WHITESPACE"," ",110],["T_STRING","Mage",110],["T_DOUBLE_COLON","::",110],["T_STRING","getSingleton",110],"(",["T_CONSTANT_ENCAPSED_STRING","'eav\/config'",110],")",["T_WHITESPACE","\n                ",110],["T_OBJECT_OPERATOR","->",111],["T_STRING","getAttribute",111],"(",["T_STRING","Mage_Catalog_Model_Product",111],["T_DOUBLE_COLON","::",111],["T_STRING","ENTITY",111],",",["T_WHITESPACE"," ",111],["T_VARIABLE","$result",111],"[",["T_CONSTANT_ENCAPSED_STRING","'attribute_id'",111],"]",")",";",["T_WHITESPACE","\n\n            ",111],["T_IF","if",113],["T_WHITESPACE"," ",113],"(",["T_VARIABLE","$this",113],["T_OBJECT_OPERATOR","->",113],["T_STRING","isUsedBySuperProducts",113],"(",["T_VARIABLE","$attribute",113],",",["T_WHITESPACE"," ",113],["T_VARIABLE","$result",113],"[",["T_CONSTANT_ENCAPSED_STRING","'attribute_set_id'",113],"]",")",")",["T_WHITESPACE"," ",113],"{",["T_WHITESPACE","\n                ",113],["T_STRING","Mage",114],["T_DOUBLE_COLON","::",114],["T_STRING","throwException",114],"(",["T_STRING","Mage",114],["T_DOUBLE_COLON","::",114],["T_STRING","helper",114],"(",["T_CONSTANT_ENCAPSED_STRING","'eav'",114],")",["T_OBJECT_OPERATOR","->",114],["T_STRING","__",114],"(",["T_CONSTANT_ENCAPSED_STRING","\"Attribute '%s' used in configurable products\"",114],",",["T_WHITESPACE"," ",114],["T_VARIABLE","$attribute",114],["T_OBJECT_OPERATOR","->",114],["T_STRING","getAttributeCode",114],"(",")",")",")",";",["T_WHITESPACE","\n            ",114],"}",["T_WHITESPACE","\n            ",115],["T_VARIABLE","$backendTable",116],["T_WHITESPACE"," ",116],"=",["T_WHITESPACE"," ",116],["T_VARIABLE","$attribute",116],["T_OBJECT_OPERATOR","->",116],["T_STRING","getBackend",116],"(",")",["T_OBJECT_OPERATOR","->",116],["T_STRING","getTable",116],"(",")",";",["T_WHITESPACE","\n            ",116],["T_IF","if",117],["T_WHITESPACE"," ",117],"(",["T_VARIABLE","$backendTable",117],")",["T_WHITESPACE"," ",117],"{",["T_WHITESPACE","\n                ",117],["T_VARIABLE","$select",118],["T_WHITESPACE"," ",118],"=",["T_WHITESPACE"," ",118],["T_VARIABLE","$this",118],["T_OBJECT_OPERATOR","->",118],["T_STRING","_getWriteAdapter",118],"(",")",["T_OBJECT_OPERATOR","->",118],["T_STRING","select",118],"(",")",["T_WHITESPACE","\n                    ",118],["T_OBJECT_OPERATOR","->",119],["T_STRING","from",119],"(",["T_VARIABLE","$attribute",119],["T_OBJECT_OPERATOR","->",119],["T_STRING","getEntity",119],"(",")",["T_OBJECT_OPERATOR","->",119],["T_STRING","getEntityTable",119],"(",")",",",["T_WHITESPACE"," ",119],["T_CONSTANT_ENCAPSED_STRING","'entity_id'",119],")",["T_WHITESPACE","\n                    ",119],["T_OBJECT_OPERATOR","->",120],["T_STRING","where",120],"(",["T_CONSTANT_ENCAPSED_STRING","'attribute_set_id = ?'",120],",",["T_WHITESPACE"," ",120],["T_VARIABLE","$result",120],"[",["T_CONSTANT_ENCAPSED_STRING","'attribute_set_id'",120],"]",")",";",["T_WHITESPACE","\n\n                ",120],["T_VARIABLE","$clearCondition",122],["T_WHITESPACE"," ",122],"=",["T_WHITESPACE"," ",122],["T_ARRAY","array",122],"(",["T_WHITESPACE","\n                    ",122],["T_CONSTANT_ENCAPSED_STRING","'entity_type_id =?'",123],["T_WHITESPACE"," ",123],["T_DOUBLE_ARROW","=>",123],["T_WHITESPACE"," ",123],["T_VARIABLE","$attribute",123],["T_OBJECT_OPERATOR","->",123],["T_STRING","getEntityTypeId",123],"(",")",",",["T_WHITESPACE","\n                    ",123],["T_CONSTANT_ENCAPSED_STRING","'attribute_id =?'",124],["T_WHITESPACE","   ",124],["T_DOUBLE_ARROW","=>",124],["T_WHITESPACE"," ",124],["T_VARIABLE","$attribute",124],["T_OBJECT_OPERATOR","->",124],["T_STRING","getId",124],"(",")",",",["T_WHITESPACE","\n                    ",124],["T_CONSTANT_ENCAPSED_STRING","'entity_id IN (?)'",125],["T_WHITESPACE","  ",125],["T_DOUBLE_ARROW","=>",125],["T_WHITESPACE"," ",125],["T_VARIABLE","$select",125],["T_WHITESPACE","\n                ",125],")",";",["T_WHITESPACE","\n                ",126],["T_VARIABLE","$this",127],["T_OBJECT_OPERATOR","->",127],["T_STRING","_getWriteAdapter",127],"(",")",["T_OBJECT_OPERATOR","->",127],["T_STRING","delete",127],"(",["T_VARIABLE","$backendTable",127],",",["T_WHITESPACE"," ",127],["T_VARIABLE","$clearCondition",127],")",";",["T_WHITESPACE","\n            ",127],"}",["T_WHITESPACE","\n        ",128],"}",["T_WHITESPACE","\n\n        ",129],["T_VARIABLE","$condition",131],["T_WHITESPACE"," ",131],"=",["T_WHITESPACE"," ",131],["T_ARRAY","array",131],"(",["T_CONSTANT_ENCAPSED_STRING","'entity_attribute_id = ?'",131],["T_WHITESPACE"," ",131],["T_DOUBLE_ARROW","=>",131],["T_WHITESPACE"," ",131],["T_VARIABLE","$object",131],["T_OBJECT_OPERATOR","->",131],["T_STRING","getEntityAttributeId",131],"(",")",")",";",["T_WHITESPACE","\n        ",131],["T_VARIABLE","$this",132],["T_OBJECT_OPERATOR","->",132],["T_STRING","_getWriteAdapter",132],"(",")",["T_OBJECT_OPERATOR","->",132],["T_STRING","delete",132],"(",["T_VARIABLE","$this",132],["T_OBJECT_OPERATOR","->",132],["T_STRING","getTable",132],"(",["T_CONSTANT_ENCAPSED_STRING","'entity_attribute'",132],")",",",["T_WHITESPACE"," ",132],["T_VARIABLE","$condition",132],")",";",["T_WHITESPACE","\n\n        ",132],["T_RETURN","return",134],["T_WHITESPACE"," ",134],["T_VARIABLE","$this",134],";",["T_WHITESPACE","\n    ",134],"}",["T_WHITESPACE","\n\n    ",135],["T_DOC_COMMENT","\/**\n     * Defines is Attribute used by super products\n     *\n     * @param Mage_Core_Model_Abstract $object\n     * @param int $attributeSet\n     * @return int\n     *\/",137],["T_WHITESPACE","\n    ",143],["T_PUBLIC","public",144],["T_WHITESPACE"," ",144],["T_FUNCTION","function",144],["T_WHITESPACE"," ",144],["T_STRING","isUsedBySuperProducts",144],"(",["T_STRING","Mage_Core_Model_Abstract",144],["T_WHITESPACE"," ",144],["T_VARIABLE","$object",144],",",["T_WHITESPACE"," ",144],["T_VARIABLE","$attributeSet",144],["T_WHITESPACE"," ",144],"=",["T_WHITESPACE"," ",144],["T_STRING","null",144],")",["T_WHITESPACE","\n    ",144],"{",["T_WHITESPACE","\n        ",145],["T_VARIABLE","$adapter",146],["T_WHITESPACE","      ",146],"=",["T_WHITESPACE"," ",146],["T_VARIABLE","$this",146],["T_OBJECT_OPERATOR","->",146],["T_STRING","_getReadAdapter",146],"(",")",";",["T_WHITESPACE","\n        ",146],["T_VARIABLE","$attrTable",147],["T_WHITESPACE","    ",147],"=",["T_WHITESPACE"," ",147],["T_VARIABLE","$this",147],["T_OBJECT_OPERATOR","->",147],["T_STRING","getTable",147],"(",["T_CONSTANT_ENCAPSED_STRING","'catalog\/product_super_attribute'",147],")",";",["T_WHITESPACE","\n        ",147],["T_VARIABLE","$productTable",148],["T_WHITESPACE"," ",148],"=",["T_WHITESPACE"," ",148],["T_VARIABLE","$this",148],["T_OBJECT_OPERATOR","->",148],["T_STRING","getTable",148],"(",["T_CONSTANT_ENCAPSED_STRING","'catalog\/product'",148],")",";",["T_WHITESPACE","\n\n        ",148],["T_VARIABLE","$bind",150],["T_WHITESPACE"," ",150],"=",["T_WHITESPACE"," ",150],["T_ARRAY","array",150],"(",["T_CONSTANT_ENCAPSED_STRING","'attribute_id'",150],["T_WHITESPACE"," ",150],["T_DOUBLE_ARROW","=>",150],["T_WHITESPACE"," ",150],["T_VARIABLE","$object",150],["T_OBJECT_OPERATOR","->",150],["T_STRING","getAttributeId",150],"(",")",")",";",["T_WHITESPACE","\n        ",150],["T_VARIABLE","$select",151],["T_WHITESPACE"," ",151],"=",["T_WHITESPACE"," ",151],["T_CLONE","clone",151],["T_WHITESPACE"," ",151],["T_VARIABLE","$adapter",151],["T_OBJECT_OPERATOR","->",151],["T_STRING","select",151],"(",")",";",["T_WHITESPACE","\n        ",151],["T_VARIABLE","$select",152],["T_OBJECT_OPERATOR","->",152],["T_STRING","reset",152],"(",")",["T_WHITESPACE","\n            ",152],["T_OBJECT_OPERATOR","->",153],["T_STRING","from",153],"(",["T_ARRAY","array",153],"(",["T_CONSTANT_ENCAPSED_STRING","'main_table'",153],["T_WHITESPACE"," ",153],["T_DOUBLE_ARROW","=>",153],["T_WHITESPACE"," ",153],["T_VARIABLE","$attrTable",153],")",",",["T_WHITESPACE"," ",153],["T_ARRAY","array",153],"(",["T_CONSTANT_ENCAPSED_STRING","'psa_count'",153],["T_WHITESPACE"," ",153],["T_DOUBLE_ARROW","=>",153],["T_WHITESPACE"," ",153],["T_CONSTANT_ENCAPSED_STRING","'COUNT(product_super_attribute_id)'",153],")",")",["T_WHITESPACE","\n            ",153],["T_OBJECT_OPERATOR","->",154],["T_STRING","join",154],"(",["T_ARRAY","array",154],"(",["T_CONSTANT_ENCAPSED_STRING","'entity'",154],["T_WHITESPACE"," ",154],["T_DOUBLE_ARROW","=>",154],["T_WHITESPACE"," ",154],["T_VARIABLE","$productTable",154],")",",",["T_WHITESPACE"," ",154],["T_CONSTANT_ENCAPSED_STRING","'main_table.product_id = entity.entity_id'",154],")",["T_WHITESPACE","\n            ",154],["T_OBJECT_OPERATOR","->",155],["T_STRING","where",155],"(",["T_CONSTANT_ENCAPSED_STRING","'main_table.attribute_id = :attribute_id'",155],")",["T_WHITESPACE","\n            ",155],["T_OBJECT_OPERATOR","->",156],["T_STRING","group",156],"(",["T_CONSTANT_ENCAPSED_STRING","'main_table.attribute_id'",156],")",["T_WHITESPACE","\n            ",156],["T_OBJECT_OPERATOR","->",157],["T_STRING","limit",157],"(",["T_LNUMBER","1",157],")",";",["T_WHITESPACE","\n\n        ",157],["T_IF","if",159],["T_WHITESPACE"," ",159],"(",["T_VARIABLE","$attributeSet",159],["T_WHITESPACE"," ",159],["T_IS_NOT_IDENTICAL","!==",159],["T_WHITESPACE"," ",159],["T_STRING","null",159],")",["T_WHITESPACE"," ",159],"{",["T_WHITESPACE","\n            ",159],["T_VARIABLE","$bind",160],"[",["T_CONSTANT_ENCAPSED_STRING","'attribute_set_id'",160],"]",["T_WHITESPACE"," ",160],"=",["T_WHITESPACE"," ",160],["T_VARIABLE","$attributeSet",160],";",["T_WHITESPACE","\n            ",160],["T_VARIABLE","$select",161],["T_OBJECT_OPERATOR","->",161],["T_STRING","where",161],"(",["T_CONSTANT_ENCAPSED_STRING","'entity.attribute_set_id = :attribute_set_id'",161],")",";",["T_WHITESPACE","\n        ",161],"}",["T_WHITESPACE","\n\n        ",162],["T_VARIABLE","$helper",164],["T_WHITESPACE"," ",164],"=",["T_WHITESPACE"," ",164],["T_STRING","Mage",164],["T_DOUBLE_COLON","::",164],["T_STRING","getResourceHelper",164],"(",["T_CONSTANT_ENCAPSED_STRING","'core'",164],")",";",["T_WHITESPACE","\n        ",164],["T_VARIABLE","$query",165],["T_WHITESPACE","  ",165],"=",["T_WHITESPACE"," ",165],["T_VARIABLE","$helper",165],["T_OBJECT_OPERATOR","->",165],["T_STRING","getQueryUsingAnalyticFunction",165],"(",["T_VARIABLE","$select",165],")",";",["T_WHITESPACE","\n        ",165],["T_RETURN","return",166],["T_WHITESPACE"," ",166],["T_VARIABLE","$adapter",166],["T_OBJECT_OPERATOR","->",166],["T_STRING","fetchOne",166],"(",["T_VARIABLE","$query",166],",",["T_WHITESPACE"," ",166],["T_VARIABLE","$bind",166],")",";",["T_WHITESPACE","\n    ",166],"}",["T_WHITESPACE","\n",167],"}",["T_WHITESPACE","\n",168]]
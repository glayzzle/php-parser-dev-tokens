[["T_OPEN_TAG","<?php\n",1],["T_DOC_COMMENT","\/**\n * Magento\n *\n * NOTICE OF LICENSE\n *\n * This source file is subject to the Open Software License (OSL 3.0)\n * that is bundled with this package in the file LICENSE.txt.\n * It is also available through the world-wide-web at this URL:\n * http:\/\/opensource.org\/licenses\/osl-3.0.php\n * If you did not receive a copy of the license and are unable to\n * obtain it through the world-wide-web, please send an email\n * to license@magento.com so we can send you a copy immediately.\n *\n * DISCLAIMER\n *\n * Do not edit or add to this file if you wish to upgrade Magento to newer\n * versions in the future. If you wish to customize Magento for your\n * needs please refer to http:\/\/www.magento.com for more information.\n *\n * @category    Mage\n * @package     Mage_Catalog\n * @copyright  Copyright (c) 2006-2016 X.commerce, Inc. and affiliates (http:\/\/www.magento.com)\n * @license    http:\/\/opensource.org\/licenses\/osl-3.0.php  Open Software License (OSL 3.0)\n *\/",2],["T_WHITESPACE","\n\n",25],["T_DOC_COMMENT","\/**\n * Catalog product attribute api\n *\n * @category   Mage\n * @package    Mage_Catalog\n * @author     Magento Core Team <core@magentocommerce.com>\n *\/",27],["T_WHITESPACE","\n",33],["T_CLASS","class",34],["T_WHITESPACE"," ",34],["T_STRING","Mage_Catalog_Model_Product_Attribute_Api",34],["T_WHITESPACE"," ",34],["T_EXTENDS","extends",34],["T_WHITESPACE"," ",34],["T_STRING","Mage_Catalog_Model_Api_Resource",34],["T_WHITESPACE","\n",34],"{",["T_WHITESPACE","\n    ",35],["T_DOC_COMMENT","\/**\n     * Product entity type id\n     *\n     * @var int\n     *\/",36],["T_WHITESPACE","\n    ",40],["T_PROTECTED","protected",41],["T_WHITESPACE"," ",41],["T_VARIABLE","$_entityTypeId",41],";",["T_WHITESPACE","\n\n    ",41],["T_DOC_COMMENT","\/**\n     * Constructor. Initializes default values.\n     *\/",43],["T_WHITESPACE","\n    ",45],["T_PUBLIC","public",46],["T_WHITESPACE"," ",46],["T_FUNCTION","function",46],["T_WHITESPACE"," ",46],["T_STRING","__construct",46],"(",")",["T_WHITESPACE","\n    ",46],"{",["T_WHITESPACE","\n        ",47],["T_VARIABLE","$this",48],["T_OBJECT_OPERATOR","->",48],["T_STRING","_storeIdSessionField",48],["T_WHITESPACE"," ",48],"=",["T_WHITESPACE"," ",48],["T_CONSTANT_ENCAPSED_STRING","'product_store_id'",48],";",["T_WHITESPACE","\n        ",48],["T_VARIABLE","$this",49],["T_OBJECT_OPERATOR","->",49],["T_STRING","_ignoredAttributeCodes",49],"[","]",["T_WHITESPACE"," ",49],"=",["T_WHITESPACE"," ",49],["T_CONSTANT_ENCAPSED_STRING","'type_id'",49],";",["T_WHITESPACE","\n        ",49],["T_VARIABLE","$this",50],["T_OBJECT_OPERATOR","->",50],["T_STRING","_ignoredAttributeTypes",50],"[","]",["T_WHITESPACE"," ",50],"=",["T_WHITESPACE"," ",50],["T_CONSTANT_ENCAPSED_STRING","'gallery'",50],";",["T_WHITESPACE","\n        ",50],["T_VARIABLE","$this",51],["T_OBJECT_OPERATOR","->",51],["T_STRING","_ignoredAttributeTypes",51],"[","]",["T_WHITESPACE"," ",51],"=",["T_WHITESPACE"," ",51],["T_CONSTANT_ENCAPSED_STRING","'media_image'",51],";",["T_WHITESPACE","\n        ",51],["T_VARIABLE","$this",52],["T_OBJECT_OPERATOR","->",52],["T_STRING","_entityTypeId",52],["T_WHITESPACE"," ",52],"=",["T_WHITESPACE"," ",52],["T_STRING","Mage",52],["T_DOUBLE_COLON","::",52],["T_STRING","getModel",52],"(",["T_CONSTANT_ENCAPSED_STRING","'eav\/entity'",52],")",["T_OBJECT_OPERATOR","->",52],["T_STRING","setType",52],"(",["T_CONSTANT_ENCAPSED_STRING","'catalog_product'",52],")",["T_OBJECT_OPERATOR","->",52],["T_STRING","getTypeId",52],"(",")",";",["T_WHITESPACE","\n    ",52],"}",["T_WHITESPACE","\n\n    ",53],["T_DOC_COMMENT","\/**\n     * Retrieve attributes from specified attribute set\n     *\n     * @param int $setId\n     * @return array\n     *\/",55],["T_WHITESPACE","\n    ",60],["T_PUBLIC","public",61],["T_WHITESPACE"," ",61],["T_FUNCTION","function",61],["T_WHITESPACE"," ",61],["T_STRING","items",61],"(",["T_VARIABLE","$setId",61],")",["T_WHITESPACE","\n    ",61],"{",["T_WHITESPACE","\n        ",62],["T_VARIABLE","$attributes",63],["T_WHITESPACE"," ",63],"=",["T_WHITESPACE"," ",63],["T_STRING","Mage",63],["T_DOUBLE_COLON","::",63],["T_STRING","getModel",63],"(",["T_CONSTANT_ENCAPSED_STRING","'catalog\/product'",63],")",["T_OBJECT_OPERATOR","->",63],["T_STRING","getResource",63],"(",")",["T_WHITESPACE","\n                ",63],["T_OBJECT_OPERATOR","->",64],["T_STRING","loadAllAttributes",64],"(",")",["T_WHITESPACE","\n                ",64],["T_OBJECT_OPERATOR","->",65],["T_STRING","getSortedAttributes",65],"(",["T_VARIABLE","$setId",65],")",";",["T_WHITESPACE","\n        ",65],["T_VARIABLE","$result",66],["T_WHITESPACE"," ",66],"=",["T_WHITESPACE"," ",66],["T_ARRAY","array",66],"(",")",";",["T_WHITESPACE","\n\n        ",66],["T_FOREACH","foreach",68],["T_WHITESPACE"," ",68],"(",["T_VARIABLE","$attributes",68],["T_WHITESPACE"," ",68],["T_AS","as",68],["T_WHITESPACE"," ",68],["T_VARIABLE","$attribute",68],")",["T_WHITESPACE"," ",68],"{",["T_WHITESPACE","\n            ",68],["T_COMMENT","\/* @var $attribute Mage_Catalog_Model_Resource_Eav_Attribute *\/",69],["T_WHITESPACE","\n            ",69],["T_IF","if",70],["T_WHITESPACE"," ",70],"(","(","!",["T_VARIABLE","$attribute",70],["T_OBJECT_OPERATOR","->",70],["T_STRING","getId",70],"(",")",["T_WHITESPACE"," ",70],["T_BOOLEAN_OR","||",70],["T_WHITESPACE"," ",70],["T_VARIABLE","$attribute",70],["T_OBJECT_OPERATOR","->",70],["T_STRING","isInSet",70],"(",["T_VARIABLE","$setId",70],")",")",["T_WHITESPACE","\n                    ",70],["T_BOOLEAN_AND","&&",71],["T_WHITESPACE"," ",71],["T_VARIABLE","$this",71],["T_OBJECT_OPERATOR","->",71],["T_STRING","_isAllowedAttribute",71],"(",["T_VARIABLE","$attribute",71],")",")",["T_WHITESPACE"," ",71],"{",["T_WHITESPACE","\n\n                ",71],["T_IF","if",73],["T_WHITESPACE"," ",73],"(","!",["T_VARIABLE","$attribute",73],["T_OBJECT_OPERATOR","->",73],["T_STRING","getId",73],"(",")",["T_WHITESPACE"," ",73],["T_BOOLEAN_OR","||",73],["T_WHITESPACE"," ",73],["T_VARIABLE","$attribute",73],["T_OBJECT_OPERATOR","->",73],["T_STRING","isScopeGlobal",73],"(",")",")",["T_WHITESPACE"," ",73],"{",["T_WHITESPACE","\n                    ",73],["T_VARIABLE","$scope",74],["T_WHITESPACE"," ",74],"=",["T_WHITESPACE"," ",74],["T_CONSTANT_ENCAPSED_STRING","'global'",74],";",["T_WHITESPACE","\n                ",74],"}",["T_WHITESPACE"," ",75],["T_ELSEIF","elseif",75],["T_WHITESPACE"," ",75],"(",["T_VARIABLE","$attribute",75],["T_OBJECT_OPERATOR","->",75],["T_STRING","isScopeWebsite",75],"(",")",")",["T_WHITESPACE"," ",75],"{",["T_WHITESPACE","\n                    ",75],["T_VARIABLE","$scope",76],["T_WHITESPACE"," ",76],"=",["T_WHITESPACE"," ",76],["T_CONSTANT_ENCAPSED_STRING","'website'",76],";",["T_WHITESPACE","\n                ",76],"}",["T_WHITESPACE"," ",77],["T_ELSE","else",77],["T_WHITESPACE"," ",77],"{",["T_WHITESPACE","\n                    ",77],["T_VARIABLE","$scope",78],["T_WHITESPACE"," ",78],"=",["T_WHITESPACE"," ",78],["T_CONSTANT_ENCAPSED_STRING","'store'",78],";",["T_WHITESPACE","\n                ",78],"}",["T_WHITESPACE","\n\n                ",79],["T_VARIABLE","$result",81],"[","]",["T_WHITESPACE"," ",81],"=",["T_WHITESPACE"," ",81],["T_ARRAY","array",81],"(",["T_WHITESPACE","\n                    ",81],["T_CONSTANT_ENCAPSED_STRING","'attribute_id'",82],["T_WHITESPACE"," ",82],["T_DOUBLE_ARROW","=>",82],["T_WHITESPACE"," ",82],["T_VARIABLE","$attribute",82],["T_OBJECT_OPERATOR","->",82],["T_STRING","getId",82],"(",")",",",["T_WHITESPACE","\n                    ",82],["T_CONSTANT_ENCAPSED_STRING","'code'",83],["T_WHITESPACE"," ",83],["T_DOUBLE_ARROW","=>",83],["T_WHITESPACE"," ",83],["T_VARIABLE","$attribute",83],["T_OBJECT_OPERATOR","->",83],["T_STRING","getAttributeCode",83],"(",")",",",["T_WHITESPACE","\n                    ",83],["T_CONSTANT_ENCAPSED_STRING","'type'",84],["T_WHITESPACE"," ",84],["T_DOUBLE_ARROW","=>",84],["T_WHITESPACE"," ",84],["T_VARIABLE","$attribute",84],["T_OBJECT_OPERATOR","->",84],["T_STRING","getFrontendInput",84],"(",")",",",["T_WHITESPACE","\n                    ",84],["T_CONSTANT_ENCAPSED_STRING","'required'",85],["T_WHITESPACE"," ",85],["T_DOUBLE_ARROW","=>",85],["T_WHITESPACE"," ",85],["T_VARIABLE","$attribute",85],["T_OBJECT_OPERATOR","->",85],["T_STRING","getIsRequired",85],"(",")",",",["T_WHITESPACE","\n                    ",85],["T_CONSTANT_ENCAPSED_STRING","'scope'",86],["T_WHITESPACE"," ",86],["T_DOUBLE_ARROW","=>",86],["T_WHITESPACE"," ",86],["T_VARIABLE","$scope",86],["T_WHITESPACE","\n                ",86],")",";",["T_WHITESPACE","\n            ",87],"}",["T_WHITESPACE","\n        ",88],"}",["T_WHITESPACE","\n\n        ",89],["T_RETURN","return",91],["T_WHITESPACE"," ",91],["T_VARIABLE","$result",91],";",["T_WHITESPACE","\n    ",91],"}",["T_WHITESPACE","\n\n    ",92],["T_DOC_COMMENT","\/**\n     * Retrieve attribute options\n     *\n     * @param int $attributeId\n     * @param string|int $store\n     * @return array\n     *\/",94],["T_WHITESPACE","\n    ",100],["T_PUBLIC","public",101],["T_WHITESPACE"," ",101],["T_FUNCTION","function",101],["T_WHITESPACE"," ",101],["T_STRING","options",101],"(",["T_VARIABLE","$attributeId",101],",",["T_WHITESPACE"," ",101],["T_VARIABLE","$store",101],["T_WHITESPACE"," ",101],"=",["T_WHITESPACE"," ",101],["T_STRING","null",101],")",["T_WHITESPACE","\n    ",101],"{",["T_WHITESPACE","\n        ",102],["T_VARIABLE","$storeId",103],["T_WHITESPACE"," ",103],"=",["T_WHITESPACE"," ",103],["T_VARIABLE","$this",103],["T_OBJECT_OPERATOR","->",103],["T_STRING","_getStoreId",103],"(",["T_VARIABLE","$store",103],")",";",["T_WHITESPACE","\n        ",103],["T_VARIABLE","$attribute",104],["T_WHITESPACE"," ",104],"=",["T_WHITESPACE"," ",104],["T_STRING","Mage",104],["T_DOUBLE_COLON","::",104],["T_STRING","getModel",104],"(",["T_CONSTANT_ENCAPSED_STRING","'catalog\/product'",104],")",["T_WHITESPACE","\n                ",104],["T_OBJECT_OPERATOR","->",105],["T_STRING","setStoreId",105],"(",["T_VARIABLE","$storeId",105],")",["T_WHITESPACE","\n                ",105],["T_OBJECT_OPERATOR","->",106],["T_STRING","getResource",106],"(",")",["T_WHITESPACE","\n                ",106],["T_OBJECT_OPERATOR","->",107],["T_STRING","getAttribute",107],"(",["T_VARIABLE","$attributeId",107],")",";",["T_WHITESPACE","\n\n        ",107],["T_COMMENT","\/* @var $attribute Mage_Catalog_Model_Entity_Attribute *\/",109],["T_WHITESPACE","\n        ",109],["T_IF","if",110],["T_WHITESPACE"," ",110],"(","!",["T_VARIABLE","$attribute",110],")",["T_WHITESPACE"," ",110],"{",["T_WHITESPACE","\n            ",110],["T_VARIABLE","$this",111],["T_OBJECT_OPERATOR","->",111],["T_STRING","_fault",111],"(",["T_CONSTANT_ENCAPSED_STRING","'not_exists'",111],")",";",["T_WHITESPACE","\n        ",111],"}",["T_WHITESPACE","\n        ",112],["T_VARIABLE","$options",113],["T_WHITESPACE"," ",113],"=",["T_WHITESPACE"," ",113],["T_ARRAY","array",113],"(",")",";",["T_WHITESPACE","\n        ",113],["T_IF","if",114],["T_WHITESPACE"," ",114],"(",["T_VARIABLE","$attribute",114],["T_OBJECT_OPERATOR","->",114],["T_STRING","usesSource",114],"(",")",")",["T_WHITESPACE"," ",114],"{",["T_WHITESPACE","\n            ",114],["T_FOREACH","foreach",115],["T_WHITESPACE"," ",115],"(",["T_VARIABLE","$attribute",115],["T_OBJECT_OPERATOR","->",115],["T_STRING","getSource",115],"(",")",["T_OBJECT_OPERATOR","->",115],["T_STRING","getAllOptions",115],"(",")",["T_WHITESPACE"," ",115],["T_AS","as",115],["T_WHITESPACE"," ",115],["T_VARIABLE","$optionId",115],["T_WHITESPACE"," ",115],["T_DOUBLE_ARROW","=>",115],["T_WHITESPACE"," ",115],["T_VARIABLE","$optionValue",115],")",["T_WHITESPACE"," ",115],"{",["T_WHITESPACE","\n                ",115],["T_IF","if",116],["T_WHITESPACE"," ",116],"(",["T_STRING","is_array",116],"(",["T_VARIABLE","$optionValue",116],")",")",["T_WHITESPACE"," ",116],"{",["T_WHITESPACE","\n                    ",116],["T_VARIABLE","$options",117],"[","]",["T_WHITESPACE"," ",117],"=",["T_WHITESPACE"," ",117],["T_VARIABLE","$optionValue",117],";",["T_WHITESPACE","\n                ",117],"}",["T_WHITESPACE"," ",118],["T_ELSE","else",118],["T_WHITESPACE"," ",118],"{",["T_WHITESPACE","\n                    ",118],["T_VARIABLE","$options",119],"[","]",["T_WHITESPACE"," ",119],"=",["T_WHITESPACE"," ",119],["T_ARRAY","array",119],"(",["T_WHITESPACE","\n                        ",119],["T_CONSTANT_ENCAPSED_STRING","'value'",120],["T_WHITESPACE"," ",120],["T_DOUBLE_ARROW","=>",120],["T_WHITESPACE"," ",120],["T_VARIABLE","$optionId",120],",",["T_WHITESPACE","\n                        ",120],["T_CONSTANT_ENCAPSED_STRING","'label'",121],["T_WHITESPACE"," ",121],["T_DOUBLE_ARROW","=>",121],["T_WHITESPACE"," ",121],["T_VARIABLE","$optionValue",121],["T_WHITESPACE","\n                    ",121],")",";",["T_WHITESPACE","\n                ",122],"}",["T_WHITESPACE","\n            ",123],"}",["T_WHITESPACE","\n        ",124],"}",["T_WHITESPACE","\n\n        ",125],["T_RETURN","return",127],["T_WHITESPACE"," ",127],["T_VARIABLE","$options",127],";",["T_WHITESPACE","\n    ",127],"}",["T_WHITESPACE","\n\n    ",128],["T_DOC_COMMENT","\/**\n     * Retrieve list of possible attribute types\n     *\n     * @return array\n     *\/",130],["T_WHITESPACE","\n    ",134],["T_PUBLIC","public",135],["T_WHITESPACE"," ",135],["T_FUNCTION","function",135],["T_WHITESPACE"," ",135],["T_STRING","types",135],"(",")",["T_WHITESPACE","\n    ",135],"{",["T_WHITESPACE","\n        ",136],["T_RETURN","return",137],["T_WHITESPACE"," ",137],["T_STRING","Mage",137],["T_DOUBLE_COLON","::",137],["T_STRING","getModel",137],"(",["T_CONSTANT_ENCAPSED_STRING","'catalog\/product_attribute_source_inputtype'",137],")",["T_OBJECT_OPERATOR","->",137],["T_STRING","toOptionArray",137],"(",")",";",["T_WHITESPACE","\n    ",137],"}",["T_WHITESPACE","\n\n    ",138],["T_DOC_COMMENT","\/**\n     * Create new product attribute\n     *\n     * @param array $data input data\n     * @return integer\n     *\/",140],["T_WHITESPACE","\n    ",145],["T_PUBLIC","public",146],["T_WHITESPACE"," ",146],["T_FUNCTION","function",146],["T_WHITESPACE"," ",146],["T_STRING","create",146],"(",["T_VARIABLE","$data",146],")",["T_WHITESPACE","\n    ",146],"{",["T_WHITESPACE","\n        ",147],["T_DOC_COMMENT","\/** @var $model Mage_Catalog_Model_Resource_Eav_Attribute *\/",148],["T_WHITESPACE","\n        ",148],["T_VARIABLE","$model",149],["T_WHITESPACE"," ",149],"=",["T_WHITESPACE"," ",149],["T_STRING","Mage",149],["T_DOUBLE_COLON","::",149],["T_STRING","getModel",149],"(",["T_CONSTANT_ENCAPSED_STRING","'catalog\/resource_eav_attribute'",149],")",";",["T_WHITESPACE","\n        ",149],["T_DOC_COMMENT","\/** @var $helper Mage_Catalog_Helper_Product *\/",150],["T_WHITESPACE","\n        ",150],["T_VARIABLE","$helper",151],["T_WHITESPACE"," ",151],"=",["T_WHITESPACE"," ",151],["T_STRING","Mage",151],["T_DOUBLE_COLON","::",151],["T_STRING","helper",151],"(",["T_CONSTANT_ENCAPSED_STRING","'catalog\/product'",151],")",";",["T_WHITESPACE","\n\n        ",151],["T_IF","if",153],["T_WHITESPACE"," ",153],"(",["T_EMPTY","empty",153],"(",["T_VARIABLE","$data",153],"[",["T_CONSTANT_ENCAPSED_STRING","'attribute_code'",153],"]",")",["T_WHITESPACE"," ",153],["T_BOOLEAN_OR","||",153],["T_WHITESPACE"," ",153],"(",["T_ISSET","isset",153],"(",["T_VARIABLE","$data",153],"[",["T_CONSTANT_ENCAPSED_STRING","'frontend_label'",153],"]",")",["T_WHITESPACE"," ",153],["T_BOOLEAN_AND","&&",153],["T_WHITESPACE"," ",153],"!",["T_STRING","is_array",153],"(",["T_VARIABLE","$data",153],"[",["T_CONSTANT_ENCAPSED_STRING","'frontend_label'",153],"]",")",")",")",["T_WHITESPACE"," ",153],"{",["T_WHITESPACE","\n            ",153],["T_VARIABLE","$this",154],["T_OBJECT_OPERATOR","->",154],["T_STRING","_fault",154],"(",["T_CONSTANT_ENCAPSED_STRING","'invalid_parameters'",154],")",";",["T_WHITESPACE","\n        ",154],"}",["T_WHITESPACE","\n\n        ",155],["T_COMMENT","\/\/validate attribute_code\n",157],["T_WHITESPACE","        ",158],["T_IF","if",158],["T_WHITESPACE"," ",158],"(","!",["T_STRING","preg_match",158],"(",["T_CONSTANT_ENCAPSED_STRING","'\/^[a-z][a-z_0-9]{0,254}$\/'",158],",",["T_WHITESPACE"," ",158],["T_VARIABLE","$data",158],"[",["T_CONSTANT_ENCAPSED_STRING","'attribute_code'",158],"]",")",")",["T_WHITESPACE"," ",158],"{",["T_WHITESPACE","\n            ",158],["T_VARIABLE","$this",159],["T_OBJECT_OPERATOR","->",159],["T_STRING","_fault",159],"(",["T_CONSTANT_ENCAPSED_STRING","'invalid_code'",159],")",";",["T_WHITESPACE","\n        ",159],"}",["T_WHITESPACE","\n\n        ",160],["T_COMMENT","\/\/validate frontend_input\n",162],["T_WHITESPACE","        ",163],["T_VARIABLE","$allowedTypes",163],["T_WHITESPACE"," ",163],"=",["T_WHITESPACE"," ",163],["T_ARRAY","array",163],"(",")",";",["T_WHITESPACE","\n        ",163],["T_FOREACH","foreach",164],["T_WHITESPACE"," ",164],"(",["T_VARIABLE","$this",164],["T_OBJECT_OPERATOR","->",164],["T_STRING","types",164],"(",")",["T_WHITESPACE"," ",164],["T_AS","as",164],["T_WHITESPACE"," ",164],["T_VARIABLE","$type",164],")",["T_WHITESPACE"," ",164],"{",["T_WHITESPACE","\n            ",164],["T_VARIABLE","$allowedTypes",165],"[","]",["T_WHITESPACE"," ",165],"=",["T_WHITESPACE"," ",165],["T_VARIABLE","$type",165],"[",["T_CONSTANT_ENCAPSED_STRING","'value'",165],"]",";",["T_WHITESPACE","\n        ",165],"}",["T_WHITESPACE","\n        ",166],["T_IF","if",167],["T_WHITESPACE"," ",167],"(","!",["T_STRING","in_array",167],"(",["T_VARIABLE","$data",167],"[",["T_CONSTANT_ENCAPSED_STRING","'frontend_input'",167],"]",",",["T_WHITESPACE"," ",167],["T_VARIABLE","$allowedTypes",167],")",")",["T_WHITESPACE"," ",167],"{",["T_WHITESPACE","\n            ",167],["T_VARIABLE","$this",168],["T_OBJECT_OPERATOR","->",168],["T_STRING","_fault",168],"(",["T_CONSTANT_ENCAPSED_STRING","'invalid_frontend_input'",168],")",";",["T_WHITESPACE","\n        ",168],"}",["T_WHITESPACE","\n\n        ",169],["T_VARIABLE","$data",171],"[",["T_CONSTANT_ENCAPSED_STRING","'source_model'",171],"]",["T_WHITESPACE"," ",171],"=",["T_WHITESPACE"," ",171],["T_VARIABLE","$helper",171],["T_OBJECT_OPERATOR","->",171],["T_STRING","getAttributeSourceModelByInputType",171],"(",["T_VARIABLE","$data",171],"[",["T_CONSTANT_ENCAPSED_STRING","'frontend_input'",171],"]",")",";",["T_WHITESPACE","\n        ",171],["T_VARIABLE","$data",172],"[",["T_CONSTANT_ENCAPSED_STRING","'backend_model'",172],"]",["T_WHITESPACE"," ",172],"=",["T_WHITESPACE"," ",172],["T_VARIABLE","$helper",172],["T_OBJECT_OPERATOR","->",172],["T_STRING","getAttributeBackendModelByInputType",172],"(",["T_VARIABLE","$data",172],"[",["T_CONSTANT_ENCAPSED_STRING","'frontend_input'",172],"]",")",";",["T_WHITESPACE","\n        ",172],["T_IF","if",173],["T_WHITESPACE"," ",173],"(",["T_STRING","is_null",173],"(",["T_VARIABLE","$model",173],["T_OBJECT_OPERATOR","->",173],["T_STRING","getIsUserDefined",173],"(",")",")",["T_WHITESPACE"," ",173],["T_BOOLEAN_OR","||",173],["T_WHITESPACE"," ",173],["T_VARIABLE","$model",173],["T_OBJECT_OPERATOR","->",173],["T_STRING","getIsUserDefined",173],"(",")",["T_WHITESPACE"," ",173],["T_IS_NOT_EQUAL","!=",173],["T_WHITESPACE"," ",173],["T_LNUMBER","0",173],")",["T_WHITESPACE"," ",173],"{",["T_WHITESPACE","\n            ",173],["T_VARIABLE","$data",174],"[",["T_CONSTANT_ENCAPSED_STRING","'backend_type'",174],"]",["T_WHITESPACE"," ",174],"=",["T_WHITESPACE"," ",174],["T_VARIABLE","$model",174],["T_OBJECT_OPERATOR","->",174],["T_STRING","getBackendTypeByInput",174],"(",["T_VARIABLE","$data",174],"[",["T_CONSTANT_ENCAPSED_STRING","'frontend_input'",174],"]",")",";",["T_WHITESPACE","\n        ",174],"}",["T_WHITESPACE","\n\n        ",175],["T_VARIABLE","$this",177],["T_OBJECT_OPERATOR","->",177],["T_STRING","_prepareDataForSave",177],"(",["T_VARIABLE","$data",177],")",";",["T_WHITESPACE","\n\n        ",177],["T_VARIABLE","$model",179],["T_OBJECT_OPERATOR","->",179],["T_STRING","addData",179],"(",["T_VARIABLE","$data",179],")",";",["T_WHITESPACE","\n        ",179],["T_VARIABLE","$model",180],["T_OBJECT_OPERATOR","->",180],["T_STRING","setEntityTypeId",180],"(",["T_VARIABLE","$this",180],["T_OBJECT_OPERATOR","->",180],["T_STRING","_entityTypeId",180],")",";",["T_WHITESPACE","\n        ",180],["T_VARIABLE","$model",181],["T_OBJECT_OPERATOR","->",181],["T_STRING","setIsUserDefined",181],"(",["T_LNUMBER","1",181],")",";",["T_WHITESPACE","\n\n        ",181],["T_TRY","try",183],["T_WHITESPACE"," ",183],"{",["T_WHITESPACE","\n            ",183],["T_VARIABLE","$model",184],["T_OBJECT_OPERATOR","->",184],["T_STRING","save",184],"(",")",";",["T_WHITESPACE","\n            ",184],["T_COMMENT","\/\/ clear translation cache because attribute labels are stored in translation\n",185],["T_WHITESPACE","            ",186],["T_STRING","Mage",186],["T_DOUBLE_COLON","::",186],["T_STRING","app",186],"(",")",["T_OBJECT_OPERATOR","->",186],["T_STRING","cleanCache",186],"(",["T_ARRAY","array",186],"(",["T_STRING","Mage_Core_Model_Translate",186],["T_DOUBLE_COLON","::",186],["T_STRING","CACHE_TAG",186],")",")",";",["T_WHITESPACE","\n        ",186],"}",["T_WHITESPACE"," ",187],["T_CATCH","catch",187],["T_WHITESPACE"," ",187],"(",["T_STRING","Exception",187],["T_WHITESPACE"," ",187],["T_VARIABLE","$e",187],")",["T_WHITESPACE"," ",187],"{",["T_WHITESPACE","\n            ",187],["T_VARIABLE","$this",188],["T_OBJECT_OPERATOR","->",188],["T_STRING","_fault",188],"(",["T_CONSTANT_ENCAPSED_STRING","'unable_to_save'",188],",",["T_WHITESPACE"," ",188],["T_VARIABLE","$e",188],["T_OBJECT_OPERATOR","->",188],["T_STRING","getMessage",188],"(",")",")",";",["T_WHITESPACE","\n        ",188],"}",["T_WHITESPACE","\n\n        ",189],["T_RETURN","return",191],["T_WHITESPACE"," ",191],["T_INT_CAST","(int)",191],["T_WHITESPACE"," ",191],["T_VARIABLE","$model",191],["T_OBJECT_OPERATOR","->",191],["T_STRING","getId",191],"(",")",";",["T_WHITESPACE","\n    ",191],"}",["T_WHITESPACE","\n\n    ",192],["T_DOC_COMMENT","\/**\n     * Update product attribute\n     *\n     * @param string|integer $attribute attribute code or ID\n     * @param array $data\n     * @return boolean\n     *\/",194],["T_WHITESPACE","\n    ",200],["T_PUBLIC","public",201],["T_WHITESPACE"," ",201],["T_FUNCTION","function",201],["T_WHITESPACE"," ",201],["T_STRING","update",201],"(",["T_VARIABLE","$attribute",201],",",["T_WHITESPACE"," ",201],["T_VARIABLE","$data",201],")",["T_WHITESPACE","\n    ",201],"{",["T_WHITESPACE","\n        ",202],["T_VARIABLE","$model",203],["T_WHITESPACE"," ",203],"=",["T_WHITESPACE"," ",203],["T_VARIABLE","$this",203],["T_OBJECT_OPERATOR","->",203],["T_STRING","_getAttribute",203],"(",["T_VARIABLE","$attribute",203],")",";",["T_WHITESPACE","\n\n        ",203],["T_IF","if",205],["T_WHITESPACE"," ",205],"(",["T_VARIABLE","$model",205],["T_OBJECT_OPERATOR","->",205],["T_STRING","getEntityTypeId",205],"(",")",["T_WHITESPACE"," ",205],["T_IS_NOT_EQUAL","!=",205],["T_WHITESPACE"," ",205],["T_VARIABLE","$this",205],["T_OBJECT_OPERATOR","->",205],["T_STRING","_entityTypeId",205],")",["T_WHITESPACE"," ",205],"{",["T_WHITESPACE","\n            ",205],["T_VARIABLE","$this",206],["T_OBJECT_OPERATOR","->",206],["T_STRING","_fault",206],"(",["T_CONSTANT_ENCAPSED_STRING","'can_not_edit'",206],")",";",["T_WHITESPACE","\n        ",206],"}",["T_WHITESPACE","\n\n        ",207],["T_VARIABLE","$data",209],"[",["T_CONSTANT_ENCAPSED_STRING","'attribute_code'",209],"]",["T_WHITESPACE"," ",209],"=",["T_WHITESPACE"," ",209],["T_VARIABLE","$model",209],["T_OBJECT_OPERATOR","->",209],["T_STRING","getAttributeCode",209],"(",")",";",["T_WHITESPACE","\n        ",209],["T_VARIABLE","$data",210],"[",["T_CONSTANT_ENCAPSED_STRING","'is_user_defined'",210],"]",["T_WHITESPACE"," ",210],"=",["T_WHITESPACE"," ",210],["T_VARIABLE","$model",210],["T_OBJECT_OPERATOR","->",210],["T_STRING","getIsUserDefined",210],"(",")",";",["T_WHITESPACE","\n        ",210],["T_VARIABLE","$data",211],"[",["T_CONSTANT_ENCAPSED_STRING","'frontend_input'",211],"]",["T_WHITESPACE"," ",211],"=",["T_WHITESPACE"," ",211],["T_VARIABLE","$model",211],["T_OBJECT_OPERATOR","->",211],["T_STRING","getFrontendInput",211],"(",")",";",["T_WHITESPACE","\n\n        ",211],["T_VARIABLE","$this",213],["T_OBJECT_OPERATOR","->",213],["T_STRING","_prepareDataForSave",213],"(",["T_VARIABLE","$data",213],")",";",["T_WHITESPACE","\n\n        ",213],["T_VARIABLE","$model",215],["T_OBJECT_OPERATOR","->",215],["T_STRING","addData",215],"(",["T_VARIABLE","$data",215],")",";",["T_WHITESPACE","\n        ",215],["T_TRY","try",216],["T_WHITESPACE"," ",216],"{",["T_WHITESPACE","\n            ",216],["T_VARIABLE","$model",217],["T_OBJECT_OPERATOR","->",217],["T_STRING","save",217],"(",")",";",["T_WHITESPACE","\n            ",217],["T_COMMENT","\/\/ clear translation cache because attribute labels are stored in translation\n",218],["T_WHITESPACE","            ",219],["T_STRING","Mage",219],["T_DOUBLE_COLON","::",219],["T_STRING","app",219],"(",")",["T_OBJECT_OPERATOR","->",219],["T_STRING","cleanCache",219],"(",["T_ARRAY","array",219],"(",["T_STRING","Mage_Core_Model_Translate",219],["T_DOUBLE_COLON","::",219],["T_STRING","CACHE_TAG",219],")",")",";",["T_WHITESPACE","\n            ",219],["T_RETURN","return",220],["T_WHITESPACE"," ",220],["T_STRING","true",220],";",["T_WHITESPACE","\n        ",220],"}",["T_WHITESPACE"," ",221],["T_CATCH","catch",221],["T_WHITESPACE"," ",221],"(",["T_STRING","Exception",221],["T_WHITESPACE"," ",221],["T_VARIABLE","$e",221],")",["T_WHITESPACE"," ",221],"{",["T_WHITESPACE","\n            ",221],["T_VARIABLE","$this",222],["T_OBJECT_OPERATOR","->",222],["T_STRING","_fault",222],"(",["T_CONSTANT_ENCAPSED_STRING","'unable_to_save'",222],",",["T_WHITESPACE"," ",222],["T_VARIABLE","$e",222],["T_OBJECT_OPERATOR","->",222],["T_STRING","getMessage",222],"(",")",")",";",["T_WHITESPACE","\n        ",222],"}",["T_WHITESPACE","\n    ",223],"}",["T_WHITESPACE","\n\n    ",224],["T_DOC_COMMENT","\/**\n     * Remove attribute\n     *\n     * @param integer|string $attribute attribute ID or code\n     * @return boolean\n     *\/",226],["T_WHITESPACE","\n    ",231],["T_PUBLIC","public",232],["T_WHITESPACE"," ",232],["T_FUNCTION","function",232],["T_WHITESPACE"," ",232],["T_STRING","remove",232],"(",["T_VARIABLE","$attribute",232],")",["T_WHITESPACE","\n    ",232],"{",["T_WHITESPACE","\n        ",233],["T_VARIABLE","$model",234],["T_WHITESPACE"," ",234],"=",["T_WHITESPACE"," ",234],["T_VARIABLE","$this",234],["T_OBJECT_OPERATOR","->",234],["T_STRING","_getAttribute",234],"(",["T_VARIABLE","$attribute",234],")",";",["T_WHITESPACE","\n\n        ",234],["T_IF","if",236],["T_WHITESPACE"," ",236],"(",["T_VARIABLE","$model",236],["T_OBJECT_OPERATOR","->",236],["T_STRING","getEntityTypeId",236],"(",")",["T_WHITESPACE"," ",236],["T_IS_NOT_EQUAL","!=",236],["T_WHITESPACE"," ",236],["T_VARIABLE","$this",236],["T_OBJECT_OPERATOR","->",236],["T_STRING","_entityTypeId",236],")",["T_WHITESPACE"," ",236],"{",["T_WHITESPACE","\n            ",236],["T_VARIABLE","$this",237],["T_OBJECT_OPERATOR","->",237],["T_STRING","_fault",237],"(",["T_CONSTANT_ENCAPSED_STRING","'can_not_delete'",237],")",";",["T_WHITESPACE","\n        ",237],"}",["T_WHITESPACE","\n\n        ",238],["T_TRY","try",240],["T_WHITESPACE"," ",240],"{",["T_WHITESPACE","\n            ",240],["T_VARIABLE","$model",241],["T_OBJECT_OPERATOR","->",241],["T_STRING","delete",241],"(",")",";",["T_WHITESPACE","\n            ",241],["T_RETURN","return",242],["T_WHITESPACE"," ",242],["T_STRING","true",242],";",["T_WHITESPACE","\n        ",242],"}",["T_WHITESPACE"," ",243],["T_CATCH","catch",243],["T_WHITESPACE"," ",243],"(",["T_STRING","Exception",243],["T_WHITESPACE"," ",243],["T_VARIABLE","$e",243],")",["T_WHITESPACE"," ",243],"{",["T_WHITESPACE","\n            ",243],["T_VARIABLE","$this",244],["T_OBJECT_OPERATOR","->",244],["T_STRING","_fault",244],"(",["T_CONSTANT_ENCAPSED_STRING","'can_not_delete'",244],",",["T_WHITESPACE"," ",244],["T_VARIABLE","$e",244],["T_OBJECT_OPERATOR","->",244],["T_STRING","getMessage",244],"(",")",")",";",["T_WHITESPACE","\n        ",244],"}",["T_WHITESPACE","\n    ",245],"}",["T_WHITESPACE","\n\n    ",246],["T_DOC_COMMENT","\/**\n     * Get full information about attribute with list of options\n     *\n     * @param integer|string $attribute attribute ID or code\n     * @return array\n     *\/",248],["T_WHITESPACE","\n    ",253],["T_PUBLIC","public",254],["T_WHITESPACE"," ",254],["T_FUNCTION","function",254],["T_WHITESPACE"," ",254],["T_STRING","info",254],"(",["T_VARIABLE","$attribute",254],")",["T_WHITESPACE","\n    ",254],"{",["T_WHITESPACE","\n        ",255],["T_VARIABLE","$model",256],["T_WHITESPACE"," ",256],"=",["T_WHITESPACE"," ",256],["T_VARIABLE","$this",256],["T_OBJECT_OPERATOR","->",256],["T_STRING","_getAttribute",256],"(",["T_VARIABLE","$attribute",256],")",";",["T_WHITESPACE","\n\n        ",256],["T_IF","if",258],["T_WHITESPACE"," ",258],"(",["T_VARIABLE","$model",258],["T_OBJECT_OPERATOR","->",258],["T_STRING","isScopeGlobal",258],"(",")",")",["T_WHITESPACE"," ",258],"{",["T_WHITESPACE","\n            ",258],["T_VARIABLE","$scope",259],["T_WHITESPACE"," ",259],"=",["T_WHITESPACE"," ",259],["T_CONSTANT_ENCAPSED_STRING","'global'",259],";",["T_WHITESPACE","\n        ",259],"}",["T_WHITESPACE"," ",260],["T_ELSEIF","elseif",260],["T_WHITESPACE"," ",260],"(",["T_VARIABLE","$model",260],["T_OBJECT_OPERATOR","->",260],["T_STRING","isScopeWebsite",260],"(",")",")",["T_WHITESPACE"," ",260],"{",["T_WHITESPACE","\n            ",260],["T_VARIABLE","$scope",261],["T_WHITESPACE"," ",261],"=",["T_WHITESPACE"," ",261],["T_CONSTANT_ENCAPSED_STRING","'website'",261],";",["T_WHITESPACE","\n        ",261],"}",["T_WHITESPACE"," ",262],["T_ELSE","else",262],["T_WHITESPACE"," ",262],"{",["T_WHITESPACE","\n            ",262],["T_VARIABLE","$scope",263],["T_WHITESPACE"," ",263],"=",["T_WHITESPACE"," ",263],["T_CONSTANT_ENCAPSED_STRING","'store'",263],";",["T_WHITESPACE","\n        ",263],"}",["T_WHITESPACE","\n\n        ",264],["T_VARIABLE","$frontendLabels",266],["T_WHITESPACE"," ",266],"=",["T_WHITESPACE"," ",266],["T_ARRAY","array",266],"(",["T_WHITESPACE","\n            ",266],["T_ARRAY","array",267],"(",["T_WHITESPACE","\n                ",267],["T_CONSTANT_ENCAPSED_STRING","'store_id'",268],["T_WHITESPACE"," ",268],["T_DOUBLE_ARROW","=>",268],["T_WHITESPACE"," ",268],["T_LNUMBER","0",268],",",["T_WHITESPACE","\n                ",268],["T_CONSTANT_ENCAPSED_STRING","'label'",269],["T_WHITESPACE"," ",269],["T_DOUBLE_ARROW","=>",269],["T_WHITESPACE"," ",269],["T_VARIABLE","$model",269],["T_OBJECT_OPERATOR","->",269],["T_STRING","getFrontendLabel",269],"(",")",["T_WHITESPACE","\n            ",269],")",["T_WHITESPACE","\n        ",270],")",";",["T_WHITESPACE","\n        ",271],["T_FOREACH","foreach",272],["T_WHITESPACE"," ",272],"(",["T_VARIABLE","$model",272],["T_OBJECT_OPERATOR","->",272],["T_STRING","getStoreLabels",272],"(",")",["T_WHITESPACE"," ",272],["T_AS","as",272],["T_WHITESPACE"," ",272],["T_VARIABLE","$store_id",272],["T_WHITESPACE"," ",272],["T_DOUBLE_ARROW","=>",272],["T_WHITESPACE"," ",272],["T_VARIABLE","$label",272],")",["T_WHITESPACE"," ",272],"{",["T_WHITESPACE","\n            ",272],["T_VARIABLE","$frontendLabels",273],"[","]",["T_WHITESPACE"," ",273],"=",["T_WHITESPACE"," ",273],["T_ARRAY","array",273],"(",["T_WHITESPACE","\n                ",273],["T_CONSTANT_ENCAPSED_STRING","'store_id'",274],["T_WHITESPACE"," ",274],["T_DOUBLE_ARROW","=>",274],["T_WHITESPACE"," ",274],["T_VARIABLE","$store_id",274],",",["T_WHITESPACE","\n                ",274],["T_CONSTANT_ENCAPSED_STRING","'label'",275],["T_WHITESPACE"," ",275],["T_DOUBLE_ARROW","=>",275],["T_WHITESPACE"," ",275],["T_VARIABLE","$label",275],["T_WHITESPACE","\n            ",275],")",";",["T_WHITESPACE","\n        ",276],"}",["T_WHITESPACE","\n\n        ",277],["T_VARIABLE","$result",279],["T_WHITESPACE"," ",279],"=",["T_WHITESPACE"," ",279],["T_ARRAY","array",279],"(",["T_WHITESPACE","\n            ",279],["T_CONSTANT_ENCAPSED_STRING","'attribute_id'",280],["T_WHITESPACE"," ",280],["T_DOUBLE_ARROW","=>",280],["T_WHITESPACE"," ",280],["T_VARIABLE","$model",280],["T_OBJECT_OPERATOR","->",280],["T_STRING","getId",280],"(",")",",",["T_WHITESPACE","\n            ",280],["T_CONSTANT_ENCAPSED_STRING","'attribute_code'",281],["T_WHITESPACE"," ",281],["T_DOUBLE_ARROW","=>",281],["T_WHITESPACE"," ",281],["T_VARIABLE","$model",281],["T_OBJECT_OPERATOR","->",281],["T_STRING","getAttributeCode",281],"(",")",",",["T_WHITESPACE","\n            ",281],["T_CONSTANT_ENCAPSED_STRING","'frontend_input'",282],["T_WHITESPACE"," ",282],["T_DOUBLE_ARROW","=>",282],["T_WHITESPACE"," ",282],["T_VARIABLE","$model",282],["T_OBJECT_OPERATOR","->",282],["T_STRING","getFrontendInput",282],"(",")",",",["T_WHITESPACE","\n            ",282],["T_CONSTANT_ENCAPSED_STRING","'default_value'",283],["T_WHITESPACE"," ",283],["T_DOUBLE_ARROW","=>",283],["T_WHITESPACE"," ",283],["T_VARIABLE","$model",283],["T_OBJECT_OPERATOR","->",283],["T_STRING","getDefaultValue",283],"(",")",",",["T_WHITESPACE","\n            ",283],["T_CONSTANT_ENCAPSED_STRING","'is_unique'",284],["T_WHITESPACE"," ",284],["T_DOUBLE_ARROW","=>",284],["T_WHITESPACE"," ",284],["T_VARIABLE","$model",284],["T_OBJECT_OPERATOR","->",284],["T_STRING","getIsUnique",284],"(",")",",",["T_WHITESPACE","\n            ",284],["T_CONSTANT_ENCAPSED_STRING","'is_required'",285],["T_WHITESPACE"," ",285],["T_DOUBLE_ARROW","=>",285],["T_WHITESPACE"," ",285],["T_VARIABLE","$model",285],["T_OBJECT_OPERATOR","->",285],["T_STRING","getIsRequired",285],"(",")",",",["T_WHITESPACE","\n            ",285],["T_CONSTANT_ENCAPSED_STRING","'apply_to'",286],["T_WHITESPACE"," ",286],["T_DOUBLE_ARROW","=>",286],["T_WHITESPACE"," ",286],["T_VARIABLE","$model",286],["T_OBJECT_OPERATOR","->",286],["T_STRING","getApplyTo",286],"(",")",",",["T_WHITESPACE","\n            ",286],["T_CONSTANT_ENCAPSED_STRING","'is_configurable'",287],["T_WHITESPACE"," ",287],["T_DOUBLE_ARROW","=>",287],["T_WHITESPACE"," ",287],["T_VARIABLE","$model",287],["T_OBJECT_OPERATOR","->",287],["T_STRING","getIsConfigurable",287],"(",")",",",["T_WHITESPACE","\n            ",287],["T_CONSTANT_ENCAPSED_STRING","'is_searchable'",288],["T_WHITESPACE"," ",288],["T_DOUBLE_ARROW","=>",288],["T_WHITESPACE"," ",288],["T_VARIABLE","$model",288],["T_OBJECT_OPERATOR","->",288],["T_STRING","getIsSearchable",288],"(",")",",",["T_WHITESPACE","\n            ",288],["T_CONSTANT_ENCAPSED_STRING","'is_visible_in_advanced_search'",289],["T_WHITESPACE"," ",289],["T_DOUBLE_ARROW","=>",289],["T_WHITESPACE"," ",289],["T_VARIABLE","$model",289],["T_OBJECT_OPERATOR","->",289],["T_STRING","getIsVisibleInAdvancedSearch",289],"(",")",",",["T_WHITESPACE","\n            ",289],["T_CONSTANT_ENCAPSED_STRING","'is_comparable'",290],["T_WHITESPACE"," ",290],["T_DOUBLE_ARROW","=>",290],["T_WHITESPACE"," ",290],["T_VARIABLE","$model",290],["T_OBJECT_OPERATOR","->",290],["T_STRING","getIsComparable",290],"(",")",",",["T_WHITESPACE","\n            ",290],["T_CONSTANT_ENCAPSED_STRING","'is_used_for_promo_rules'",291],["T_WHITESPACE"," ",291],["T_DOUBLE_ARROW","=>",291],["T_WHITESPACE"," ",291],["T_VARIABLE","$model",291],["T_OBJECT_OPERATOR","->",291],["T_STRING","getIsUsedForPromoRules",291],"(",")",",",["T_WHITESPACE","\n            ",291],["T_CONSTANT_ENCAPSED_STRING","'is_visible_on_front'",292],["T_WHITESPACE"," ",292],["T_DOUBLE_ARROW","=>",292],["T_WHITESPACE"," ",292],["T_VARIABLE","$model",292],["T_OBJECT_OPERATOR","->",292],["T_STRING","getIsVisibleOnFront",292],"(",")",",",["T_WHITESPACE","\n            ",292],["T_CONSTANT_ENCAPSED_STRING","'used_in_product_listing'",293],["T_WHITESPACE"," ",293],["T_DOUBLE_ARROW","=>",293],["T_WHITESPACE"," ",293],["T_VARIABLE","$model",293],["T_OBJECT_OPERATOR","->",293],["T_STRING","getUsedInProductListing",293],"(",")",",",["T_WHITESPACE","\n            ",293],["T_CONSTANT_ENCAPSED_STRING","'frontend_label'",294],["T_WHITESPACE"," ",294],["T_DOUBLE_ARROW","=>",294],["T_WHITESPACE"," ",294],["T_VARIABLE","$frontendLabels",294],["T_WHITESPACE","\n        ",294],")",";",["T_WHITESPACE","\n        ",295],["T_IF","if",296],["T_WHITESPACE"," ",296],"(",["T_VARIABLE","$model",296],["T_OBJECT_OPERATOR","->",296],["T_STRING","getFrontendInput",296],"(",")",["T_WHITESPACE"," ",296],["T_IS_NOT_EQUAL","!=",296],["T_WHITESPACE"," ",296],["T_CONSTANT_ENCAPSED_STRING","'price'",296],")",["T_WHITESPACE"," ",296],"{",["T_WHITESPACE","\n            ",296],["T_VARIABLE","$result",297],"[",["T_CONSTANT_ENCAPSED_STRING","'scope'",297],"]",["T_WHITESPACE"," ",297],"=",["T_WHITESPACE"," ",297],["T_VARIABLE","$scope",297],";",["T_WHITESPACE","\n        ",297],"}",["T_WHITESPACE","\n\n        ",298],["T_COMMENT","\/\/ set additional fields to different types\n",300],["T_WHITESPACE","        ",301],["T_SWITCH","switch",301],["T_WHITESPACE"," ",301],"(",["T_VARIABLE","$model",301],["T_OBJECT_OPERATOR","->",301],["T_STRING","getFrontendInput",301],"(",")",")",["T_WHITESPACE"," ",301],"{",["T_WHITESPACE","\n            ",301],["T_CASE","case",302],["T_WHITESPACE"," ",302],["T_CONSTANT_ENCAPSED_STRING","'text'",302],":",["T_WHITESPACE","\n                    ",302],["T_VARIABLE","$result",303],"[",["T_CONSTANT_ENCAPSED_STRING","'additional_fields'",303],"]",["T_WHITESPACE"," ",303],"=",["T_WHITESPACE"," ",303],["T_ARRAY","array",303],"(",["T_WHITESPACE","\n                        ",303],["T_CONSTANT_ENCAPSED_STRING","'frontend_class'",304],["T_WHITESPACE"," ",304],["T_DOUBLE_ARROW","=>",304],["T_WHITESPACE"," ",304],["T_VARIABLE","$model",304],["T_OBJECT_OPERATOR","->",304],["T_STRING","getFrontendClass",304],"(",")",",",["T_WHITESPACE","\n                        ",304],["T_CONSTANT_ENCAPSED_STRING","'is_html_allowed_on_front'",305],["T_WHITESPACE"," ",305],["T_DOUBLE_ARROW","=>",305],["T_WHITESPACE"," ",305],["T_VARIABLE","$model",305],["T_OBJECT_OPERATOR","->",305],["T_STRING","getIsHtmlAllowedOnFront",305],"(",")",",",["T_WHITESPACE","\n                        ",305],["T_CONSTANT_ENCAPSED_STRING","'used_for_sort_by'",306],["T_WHITESPACE"," ",306],["T_DOUBLE_ARROW","=>",306],["T_WHITESPACE"," ",306],["T_VARIABLE","$model",306],["T_OBJECT_OPERATOR","->",306],["T_STRING","getUsedForSortBy",306],"(",")",["T_WHITESPACE","\n                    ",306],")",";",["T_WHITESPACE","\n                    ",307],["T_BREAK","break",308],";",["T_WHITESPACE","\n            ",308],["T_CASE","case",309],["T_WHITESPACE"," ",309],["T_CONSTANT_ENCAPSED_STRING","'textarea'",309],":",["T_WHITESPACE","\n                    ",309],["T_VARIABLE","$result",310],"[",["T_CONSTANT_ENCAPSED_STRING","'additional_fields'",310],"]",["T_WHITESPACE"," ",310],"=",["T_WHITESPACE"," ",310],["T_ARRAY","array",310],"(",["T_WHITESPACE","\n                        ",310],["T_CONSTANT_ENCAPSED_STRING","'is_wysiwyg_enabled'",311],["T_WHITESPACE"," ",311],["T_DOUBLE_ARROW","=>",311],["T_WHITESPACE"," ",311],["T_VARIABLE","$model",311],["T_OBJECT_OPERATOR","->",311],["T_STRING","getIsWysiwygEnabled",311],"(",")",",",["T_WHITESPACE","\n                        ",311],["T_CONSTANT_ENCAPSED_STRING","'is_html_allowed_on_front'",312],["T_WHITESPACE"," ",312],["T_DOUBLE_ARROW","=>",312],["T_WHITESPACE"," ",312],["T_VARIABLE","$model",312],["T_OBJECT_OPERATOR","->",312],["T_STRING","getIsHtmlAllowedOnFront",312],"(",")",",",["T_WHITESPACE","\n                    ",312],")",";",["T_WHITESPACE","\n                    ",313],["T_BREAK","break",314],";",["T_WHITESPACE","\n            ",314],["T_CASE","case",315],["T_WHITESPACE"," ",315],["T_CONSTANT_ENCAPSED_STRING","'date'",315],":",["T_WHITESPACE","\n            ",315],["T_CASE","case",316],["T_WHITESPACE"," ",316],["T_CONSTANT_ENCAPSED_STRING","'boolean'",316],":",["T_WHITESPACE","\n                    ",316],["T_VARIABLE","$result",317],"[",["T_CONSTANT_ENCAPSED_STRING","'additional_fields'",317],"]",["T_WHITESPACE"," ",317],"=",["T_WHITESPACE"," ",317],["T_ARRAY","array",317],"(",["T_WHITESPACE","\n                        ",317],["T_CONSTANT_ENCAPSED_STRING","'used_for_sort_by'",318],["T_WHITESPACE"," ",318],["T_DOUBLE_ARROW","=>",318],["T_WHITESPACE"," ",318],["T_VARIABLE","$model",318],["T_OBJECT_OPERATOR","->",318],["T_STRING","getUsedForSortBy",318],"(",")",["T_WHITESPACE","\n                    ",318],")",";",["T_WHITESPACE","\n                    ",319],["T_BREAK","break",320],";",["T_WHITESPACE","\n            ",320],["T_CASE","case",321],["T_WHITESPACE"," ",321],["T_CONSTANT_ENCAPSED_STRING","'multiselect'",321],":",["T_WHITESPACE","\n                    ",321],["T_VARIABLE","$result",322],"[",["T_CONSTANT_ENCAPSED_STRING","'additional_fields'",322],"]",["T_WHITESPACE"," ",322],"=",["T_WHITESPACE"," ",322],["T_ARRAY","array",322],"(",["T_WHITESPACE","\n                        ",322],["T_CONSTANT_ENCAPSED_STRING","'is_filterable'",323],["T_WHITESPACE"," ",323],["T_DOUBLE_ARROW","=>",323],["T_WHITESPACE"," ",323],["T_VARIABLE","$model",323],["T_OBJECT_OPERATOR","->",323],["T_STRING","getIsFilterable",323],"(",")",",",["T_WHITESPACE","\n                        ",323],["T_CONSTANT_ENCAPSED_STRING","'is_filterable_in_search'",324],["T_WHITESPACE"," ",324],["T_DOUBLE_ARROW","=>",324],["T_WHITESPACE"," ",324],["T_VARIABLE","$model",324],["T_OBJECT_OPERATOR","->",324],["T_STRING","getIsFilterableInSearch",324],"(",")",",",["T_WHITESPACE","\n                        ",324],["T_CONSTANT_ENCAPSED_STRING","'position'",325],["T_WHITESPACE"," ",325],["T_DOUBLE_ARROW","=>",325],["T_WHITESPACE"," ",325],["T_VARIABLE","$model",325],["T_OBJECT_OPERATOR","->",325],["T_STRING","getPosition",325],"(",")",["T_WHITESPACE","\n                    ",325],")",";",["T_WHITESPACE","\n                    ",326],["T_BREAK","break",327],";",["T_WHITESPACE","\n            ",327],["T_CASE","case",328],["T_WHITESPACE"," ",328],["T_CONSTANT_ENCAPSED_STRING","'select'",328],":",["T_WHITESPACE","\n            ",328],["T_CASE","case",329],["T_WHITESPACE"," ",329],["T_CONSTANT_ENCAPSED_STRING","'price'",329],":",["T_WHITESPACE","\n                    ",329],["T_VARIABLE","$result",330],"[",["T_CONSTANT_ENCAPSED_STRING","'additional_fields'",330],"]",["T_WHITESPACE"," ",330],"=",["T_WHITESPACE"," ",330],["T_ARRAY","array",330],"(",["T_WHITESPACE","\n                        ",330],["T_CONSTANT_ENCAPSED_STRING","'is_filterable'",331],["T_WHITESPACE"," ",331],["T_DOUBLE_ARROW","=>",331],["T_WHITESPACE"," ",331],["T_VARIABLE","$model",331],["T_OBJECT_OPERATOR","->",331],["T_STRING","getIsFilterable",331],"(",")",",",["T_WHITESPACE","\n                        ",331],["T_CONSTANT_ENCAPSED_STRING","'is_filterable_in_search'",332],["T_WHITESPACE"," ",332],["T_DOUBLE_ARROW","=>",332],["T_WHITESPACE"," ",332],["T_VARIABLE","$model",332],["T_OBJECT_OPERATOR","->",332],["T_STRING","getIsFilterableInSearch",332],"(",")",",",["T_WHITESPACE","\n                        ",332],["T_CONSTANT_ENCAPSED_STRING","'position'",333],["T_WHITESPACE"," ",333],["T_DOUBLE_ARROW","=>",333],["T_WHITESPACE"," ",333],["T_VARIABLE","$model",333],["T_OBJECT_OPERATOR","->",333],["T_STRING","getPosition",333],"(",")",",",["T_WHITESPACE","\n                        ",333],["T_CONSTANT_ENCAPSED_STRING","'used_for_sort_by'",334],["T_WHITESPACE"," ",334],["T_DOUBLE_ARROW","=>",334],["T_WHITESPACE"," ",334],["T_VARIABLE","$model",334],["T_OBJECT_OPERATOR","->",334],["T_STRING","getUsedForSortBy",334],"(",")",["T_WHITESPACE","\n                    ",334],")",";",["T_WHITESPACE","\n                    ",335],["T_BREAK","break",336],";",["T_WHITESPACE","\n            ",336],["T_DEFAULT","default",337],":",["T_WHITESPACE","\n                    ",337],["T_VARIABLE","$result",338],"[",["T_CONSTANT_ENCAPSED_STRING","'additional_fields'",338],"]",["T_WHITESPACE"," ",338],"=",["T_WHITESPACE"," ",338],["T_ARRAY","array",338],"(",")",";",["T_WHITESPACE","\n                    ",338],["T_BREAK","break",339],";",["T_WHITESPACE","\n        ",339],"}",["T_WHITESPACE","\n\n        ",340],["T_COMMENT","\/\/ set options\n",342],["T_WHITESPACE","        ",343],["T_VARIABLE","$options",343],["T_WHITESPACE"," ",343],"=",["T_WHITESPACE"," ",343],["T_VARIABLE","$this",343],["T_OBJECT_OPERATOR","->",343],["T_STRING","options",343],"(",["T_VARIABLE","$model",343],["T_OBJECT_OPERATOR","->",343],["T_STRING","getId",343],"(",")",")",";",["T_WHITESPACE","\n        ",343],["T_COMMENT","\/\/ remove empty first element\n",344],["T_WHITESPACE","        ",345],["T_IF","if",345],["T_WHITESPACE"," ",345],"(",["T_VARIABLE","$model",345],["T_OBJECT_OPERATOR","->",345],["T_STRING","getFrontendInput",345],"(",")",["T_WHITESPACE"," ",345],["T_IS_NOT_EQUAL","!=",345],["T_WHITESPACE"," ",345],["T_CONSTANT_ENCAPSED_STRING","'boolean'",345],")",["T_WHITESPACE"," ",345],"{",["T_WHITESPACE","\n            ",345],["T_STRING","array_shift",346],"(",["T_VARIABLE","$options",346],")",";",["T_WHITESPACE","\n        ",346],"}",["T_WHITESPACE","\n\n        ",347],["T_IF","if",349],["T_WHITESPACE"," ",349],"(",["T_STRING","count",349],"(",["T_VARIABLE","$options",349],")",["T_WHITESPACE"," ",349],">",["T_WHITESPACE"," ",349],["T_LNUMBER","0",349],")",["T_WHITESPACE"," ",349],"{",["T_WHITESPACE","\n            ",349],["T_VARIABLE","$result",350],"[",["T_CONSTANT_ENCAPSED_STRING","'options'",350],"]",["T_WHITESPACE"," ",350],"=",["T_WHITESPACE"," ",350],["T_VARIABLE","$options",350],";",["T_WHITESPACE","\n        ",350],"}",["T_WHITESPACE","\n\n        ",351],["T_RETURN","return",353],["T_WHITESPACE"," ",353],["T_VARIABLE","$result",353],";",["T_WHITESPACE","\n    ",353],"}",["T_WHITESPACE","\n\n    ",354],["T_DOC_COMMENT","\/**\n     * Add option to select or multiselect attribute\n     *\n     * @param  integer|string $attribute attribute ID or code\n     * @param  array $data\n     * @return bool\n     *\/",356],["T_WHITESPACE","\n    ",362],["T_PUBLIC","public",363],["T_WHITESPACE"," ",363],["T_FUNCTION","function",363],["T_WHITESPACE"," ",363],["T_STRING","addOption",363],"(",["T_VARIABLE","$attribute",363],",",["T_WHITESPACE"," ",363],["T_VARIABLE","$data",363],")",["T_WHITESPACE","\n    ",363],"{",["T_WHITESPACE","\n        ",364],["T_VARIABLE","$model",365],["T_WHITESPACE"," ",365],"=",["T_WHITESPACE"," ",365],["T_VARIABLE","$this",365],["T_OBJECT_OPERATOR","->",365],["T_STRING","_getAttribute",365],"(",["T_VARIABLE","$attribute",365],")",";",["T_WHITESPACE","\n\n        ",365],["T_IF","if",367],["T_WHITESPACE"," ",367],"(","!",["T_VARIABLE","$model",367],["T_OBJECT_OPERATOR","->",367],["T_STRING","usesSource",367],"(",")",")",["T_WHITESPACE"," ",367],"{",["T_WHITESPACE","\n            ",367],["T_VARIABLE","$this",368],["T_OBJECT_OPERATOR","->",368],["T_STRING","_fault",368],"(",["T_CONSTANT_ENCAPSED_STRING","'invalid_frontend_input'",368],")",";",["T_WHITESPACE","\n        ",368],"}",["T_WHITESPACE","\n\n        ",369],["T_DOC_COMMENT","\/** @var $helperCatalog Mage_Catalog_Helper_Data *\/",371],["T_WHITESPACE","\n        ",371],["T_VARIABLE","$helperCatalog",372],["T_WHITESPACE"," ",372],"=",["T_WHITESPACE"," ",372],["T_STRING","Mage",372],["T_DOUBLE_COLON","::",372],["T_STRING","helper",372],"(",["T_CONSTANT_ENCAPSED_STRING","'catalog'",372],")",";",["T_WHITESPACE","\n\n        ",372],["T_VARIABLE","$optionLabels",374],["T_WHITESPACE"," ",374],"=",["T_WHITESPACE"," ",374],["T_ARRAY","array",374],"(",")",";",["T_WHITESPACE","\n        ",374],["T_FOREACH","foreach",375],["T_WHITESPACE"," ",375],"(",["T_VARIABLE","$data",375],"[",["T_CONSTANT_ENCAPSED_STRING","'label'",375],"]",["T_WHITESPACE"," ",375],["T_AS","as",375],["T_WHITESPACE"," ",375],["T_VARIABLE","$label",375],")",["T_WHITESPACE"," ",375],"{",["T_WHITESPACE","\n            ",375],["T_VARIABLE","$storeId",376],["T_WHITESPACE"," ",376],"=",["T_WHITESPACE"," ",376],["T_VARIABLE","$label",376],"[",["T_CONSTANT_ENCAPSED_STRING","'store_id'",376],"]",";",["T_WHITESPACE","\n            ",376],["T_VARIABLE","$labelText",377],["T_WHITESPACE"," ",377],"=",["T_WHITESPACE"," ",377],["T_VARIABLE","$helperCatalog",377],["T_OBJECT_OPERATOR","->",377],["T_STRING","stripTags",377],"(",["T_VARIABLE","$label",377],"[",["T_CONSTANT_ENCAPSED_STRING","'value'",377],"]",")",";",["T_WHITESPACE","\n            ",377],["T_IF","if",378],["T_WHITESPACE"," ",378],"(",["T_STRING","is_array",378],"(",["T_VARIABLE","$storeId",378],")",")",["T_WHITESPACE"," ",378],"{",["T_WHITESPACE","\n                ",378],["T_FOREACH","foreach",379],["T_WHITESPACE"," ",379],"(",["T_VARIABLE","$storeId",379],["T_WHITESPACE"," ",379],["T_AS","as",379],["T_WHITESPACE"," ",379],["T_VARIABLE","$multiStoreId",379],")",["T_WHITESPACE"," ",379],"{",["T_WHITESPACE","\n                    ",379],["T_VARIABLE","$optionLabels",380],"[",["T_VARIABLE","$multiStoreId",380],"]",["T_WHITESPACE"," ",380],"=",["T_WHITESPACE"," ",380],["T_VARIABLE","$labelText",380],";",["T_WHITESPACE","\n                ",380],"}",["T_WHITESPACE","\n            ",381],"}",["T_WHITESPACE"," ",382],["T_ELSE","else",382],["T_WHITESPACE"," ",382],"{",["T_WHITESPACE","\n                ",382],["T_VARIABLE","$optionLabels",383],"[",["T_VARIABLE","$storeId",383],"]",["T_WHITESPACE"," ",383],"=",["T_WHITESPACE"," ",383],["T_VARIABLE","$labelText",383],";",["T_WHITESPACE","\n            ",383],"}",["T_WHITESPACE","\n        ",384],"}",["T_WHITESPACE","\n        ",385],["T_COMMENT","\/\/ data in the following format is accepted by the model\n",386],["T_WHITESPACE","        ",387],["T_COMMENT","\/\/ it simulates parameters of the request made to\n",387],["T_WHITESPACE","        ",388],["T_COMMENT","\/\/ Mage_Adminhtml_Catalog_Product_AttributeController::saveAction()\n",388],["T_WHITESPACE","        ",389],["T_VARIABLE","$modelData",389],["T_WHITESPACE"," ",389],"=",["T_WHITESPACE"," ",389],["T_ARRAY","array",389],"(",["T_WHITESPACE","\n            ",389],["T_CONSTANT_ENCAPSED_STRING","'option'",390],["T_WHITESPACE"," ",390],["T_DOUBLE_ARROW","=>",390],["T_WHITESPACE"," ",390],["T_ARRAY","array",390],"(",["T_WHITESPACE","\n                ",390],["T_CONSTANT_ENCAPSED_STRING","'value'",391],["T_WHITESPACE"," ",391],["T_DOUBLE_ARROW","=>",391],["T_WHITESPACE"," ",391],["T_ARRAY","array",391],"(",["T_WHITESPACE","\n                    ",391],["T_CONSTANT_ENCAPSED_STRING","'option_1'",392],["T_WHITESPACE"," ",392],["T_DOUBLE_ARROW","=>",392],["T_WHITESPACE"," ",392],["T_VARIABLE","$optionLabels",392],["T_WHITESPACE","\n                ",392],")",",",["T_WHITESPACE","\n                ",393],["T_CONSTANT_ENCAPSED_STRING","'order'",394],["T_WHITESPACE"," ",394],["T_DOUBLE_ARROW","=>",394],["T_WHITESPACE"," ",394],["T_ARRAY","array",394],"(",["T_WHITESPACE","\n                    ",394],["T_CONSTANT_ENCAPSED_STRING","'option_1'",395],["T_WHITESPACE"," ",395],["T_DOUBLE_ARROW","=>",395],["T_WHITESPACE"," ",395],["T_INT_CAST","(int)",395],["T_WHITESPACE"," ",395],["T_VARIABLE","$data",395],"[",["T_CONSTANT_ENCAPSED_STRING","'order'",395],"]",["T_WHITESPACE","\n                ",395],")",["T_WHITESPACE","\n            ",396],")",["T_WHITESPACE","\n        ",397],")",";",["T_WHITESPACE","\n        ",398],["T_IF","if",399],["T_WHITESPACE"," ",399],"(",["T_VARIABLE","$data",399],"[",["T_CONSTANT_ENCAPSED_STRING","'is_default'",399],"]",")",["T_WHITESPACE"," ",399],"{",["T_WHITESPACE","\n            ",399],["T_VARIABLE","$modelData",400],"[",["T_CONSTANT_ENCAPSED_STRING","'default'",400],"]","[","]",["T_WHITESPACE"," ",400],"=",["T_WHITESPACE"," ",400],["T_CONSTANT_ENCAPSED_STRING","'option_1'",400],";",["T_WHITESPACE","\n        ",400],"}",["T_WHITESPACE","\n\n        ",401],["T_VARIABLE","$model",403],["T_OBJECT_OPERATOR","->",403],["T_STRING","addData",403],"(",["T_VARIABLE","$modelData",403],")",";",["T_WHITESPACE","\n        ",403],["T_TRY","try",404],["T_WHITESPACE"," ",404],"{",["T_WHITESPACE","\n            ",404],["T_VARIABLE","$model",405],["T_OBJECT_OPERATOR","->",405],["T_STRING","save",405],"(",")",";",["T_WHITESPACE","\n        ",405],"}",["T_WHITESPACE"," ",406],["T_CATCH","catch",406],["T_WHITESPACE"," ",406],"(",["T_STRING","Exception",406],["T_WHITESPACE"," ",406],["T_VARIABLE","$e",406],")",["T_WHITESPACE"," ",406],"{",["T_WHITESPACE","\n            ",406],["T_VARIABLE","$this",407],["T_OBJECT_OPERATOR","->",407],["T_STRING","_fault",407],"(",["T_CONSTANT_ENCAPSED_STRING","'unable_to_add_option'",407],",",["T_WHITESPACE"," ",407],["T_VARIABLE","$e",407],["T_OBJECT_OPERATOR","->",407],["T_STRING","getMessage",407],"(",")",")",";",["T_WHITESPACE","\n        ",407],"}",["T_WHITESPACE","\n\n        ",408],["T_RETURN","return",410],["T_WHITESPACE"," ",410],["T_STRING","true",410],";",["T_WHITESPACE","\n    ",410],"}",["T_WHITESPACE","\n\n    ",411],["T_DOC_COMMENT","\/**\n     * Remove option from select or multiselect attribute\n     *\n     * @param  integer|string $attribute attribute ID or code\n     * @param  integer $optionId option to remove ID\n     * @return bool\n     *\/",413],["T_WHITESPACE","\n    ",419],["T_PUBLIC","public",420],["T_WHITESPACE"," ",420],["T_FUNCTION","function",420],["T_WHITESPACE"," ",420],["T_STRING","removeOption",420],"(",["T_VARIABLE","$attribute",420],",",["T_WHITESPACE"," ",420],["T_VARIABLE","$optionId",420],")",["T_WHITESPACE","\n    ",420],"{",["T_WHITESPACE","\n        ",421],["T_VARIABLE","$model",422],["T_WHITESPACE"," ",422],"=",["T_WHITESPACE"," ",422],["T_VARIABLE","$this",422],["T_OBJECT_OPERATOR","->",422],["T_STRING","_getAttribute",422],"(",["T_VARIABLE","$attribute",422],")",";",["T_WHITESPACE","\n\n        ",422],["T_IF","if",424],["T_WHITESPACE"," ",424],"(","!",["T_VARIABLE","$model",424],["T_OBJECT_OPERATOR","->",424],["T_STRING","usesSource",424],"(",")",")",["T_WHITESPACE"," ",424],"{",["T_WHITESPACE","\n            ",424],["T_VARIABLE","$this",425],["T_OBJECT_OPERATOR","->",425],["T_STRING","_fault",425],"(",["T_CONSTANT_ENCAPSED_STRING","'invalid_frontend_input'",425],")",";",["T_WHITESPACE","\n        ",425],"}",["T_WHITESPACE","\n\n        ",426],["T_COMMENT","\/\/ data in the following format is accepted by the model\n",428],["T_WHITESPACE","        ",429],["T_COMMENT","\/\/ it simulates parameters of the request made to\n",429],["T_WHITESPACE","        ",430],["T_COMMENT","\/\/ Mage_Adminhtml_Catalog_Product_AttributeController::saveAction()\n",430],["T_WHITESPACE","        ",431],["T_VARIABLE","$modelData",431],["T_WHITESPACE"," ",431],"=",["T_WHITESPACE"," ",431],["T_ARRAY","array",431],"(",["T_WHITESPACE","\n            ",431],["T_CONSTANT_ENCAPSED_STRING","'option'",432],["T_WHITESPACE"," ",432],["T_DOUBLE_ARROW","=>",432],["T_WHITESPACE"," ",432],["T_ARRAY","array",432],"(",["T_WHITESPACE","\n                ",432],["T_CONSTANT_ENCAPSED_STRING","'value'",433],["T_WHITESPACE"," ",433],["T_DOUBLE_ARROW","=>",433],["T_WHITESPACE"," ",433],["T_ARRAY","array",433],"(",["T_WHITESPACE","\n                    ",433],["T_VARIABLE","$optionId",434],["T_WHITESPACE"," ",434],["T_DOUBLE_ARROW","=>",434],["T_WHITESPACE"," ",434],["T_ARRAY","array",434],"(",")",["T_WHITESPACE","\n                ",434],")",",",["T_WHITESPACE","\n                ",435],["T_CONSTANT_ENCAPSED_STRING","'delete'",436],["T_WHITESPACE"," ",436],["T_DOUBLE_ARROW","=>",436],["T_WHITESPACE"," ",436],["T_ARRAY","array",436],"(",["T_WHITESPACE","\n                    ",436],["T_VARIABLE","$optionId",437],["T_WHITESPACE"," ",437],["T_DOUBLE_ARROW","=>",437],["T_WHITESPACE"," ",437],["T_CONSTANT_ENCAPSED_STRING","'1'",437],["T_WHITESPACE","\n                ",437],")",["T_WHITESPACE","\n            ",438],")",["T_WHITESPACE","\n        ",439],")",";",["T_WHITESPACE","\n        ",440],["T_VARIABLE","$model",441],["T_OBJECT_OPERATOR","->",441],["T_STRING","addData",441],"(",["T_VARIABLE","$modelData",441],")",";",["T_WHITESPACE","\n        ",441],["T_TRY","try",442],["T_WHITESPACE"," ",442],"{",["T_WHITESPACE","\n            ",442],["T_VARIABLE","$model",443],["T_OBJECT_OPERATOR","->",443],["T_STRING","save",443],"(",")",";",["T_WHITESPACE","\n        ",443],"}",["T_WHITESPACE"," ",444],["T_CATCH","catch",444],["T_WHITESPACE"," ",444],"(",["T_STRING","Exception",444],["T_WHITESPACE"," ",444],["T_VARIABLE","$e",444],")",["T_WHITESPACE"," ",444],"{",["T_WHITESPACE","\n            ",444],["T_VARIABLE","$this",445],["T_OBJECT_OPERATOR","->",445],["T_STRING","_fault",445],"(",["T_CONSTANT_ENCAPSED_STRING","'unable_to_remove_option'",445],",",["T_WHITESPACE"," ",445],["T_VARIABLE","$e",445],["T_OBJECT_OPERATOR","->",445],["T_STRING","getMessage",445],"(",")",")",";",["T_WHITESPACE","\n        ",445],"}",["T_WHITESPACE","\n\n        ",446],["T_RETURN","return",448],["T_WHITESPACE"," ",448],["T_STRING","true",448],";",["T_WHITESPACE","\n    ",448],"}",["T_WHITESPACE","\n\n    ",449],["T_DOC_COMMENT","\/**\n     * Prepare request input data for saving\n     *\n     * @param array $data input data\n     * @return void\n     *\/",451],["T_WHITESPACE","\n    ",456],["T_PROTECTED","protected",457],["T_WHITESPACE"," ",457],["T_FUNCTION","function",457],["T_WHITESPACE"," ",457],["T_STRING","_prepareDataForSave",457],"(","&",["T_VARIABLE","$data",457],")",["T_WHITESPACE","\n    ",457],"{",["T_WHITESPACE","\n        ",458],["T_DOC_COMMENT","\/** @var $helperCatalog Mage_Catalog_Helper_Data *\/",459],["T_WHITESPACE","\n        ",459],["T_VARIABLE","$helperCatalog",460],["T_WHITESPACE"," ",460],"=",["T_WHITESPACE"," ",460],["T_STRING","Mage",460],["T_DOUBLE_COLON","::",460],["T_STRING","helper",460],"(",["T_CONSTANT_ENCAPSED_STRING","'catalog'",460],")",";",["T_WHITESPACE","\n\n        ",460],["T_IF","if",462],["T_WHITESPACE"," ",462],"(",["T_VARIABLE","$data",462],"[",["T_CONSTANT_ENCAPSED_STRING","'scope'",462],"]",["T_WHITESPACE"," ",462],["T_IS_EQUAL","==",462],["T_WHITESPACE"," ",462],["T_CONSTANT_ENCAPSED_STRING","'global'",462],")",["T_WHITESPACE"," ",462],"{",["T_WHITESPACE","\n            ",462],["T_VARIABLE","$data",463],"[",["T_CONSTANT_ENCAPSED_STRING","'is_global'",463],"]",["T_WHITESPACE"," ",463],"=",["T_WHITESPACE"," ",463],["T_STRING","Mage_Catalog_Model_Resource_Eav_Attribute",463],["T_DOUBLE_COLON","::",463],["T_STRING","SCOPE_GLOBAL",463],";",["T_WHITESPACE","\n        ",463],"}",["T_WHITESPACE"," ",464],["T_ELSE","else",464],["T_WHITESPACE"," ",464],["T_IF","if",464],["T_WHITESPACE"," ",464],"(",["T_VARIABLE","$data",464],"[",["T_CONSTANT_ENCAPSED_STRING","'scope'",464],"]",["T_WHITESPACE"," ",464],["T_IS_EQUAL","==",464],["T_WHITESPACE"," ",464],["T_CONSTANT_ENCAPSED_STRING","'website'",464],")",["T_WHITESPACE"," ",464],"{",["T_WHITESPACE","\n            ",464],["T_VARIABLE","$data",465],"[",["T_CONSTANT_ENCAPSED_STRING","'is_global'",465],"]",["T_WHITESPACE"," ",465],"=",["T_WHITESPACE"," ",465],["T_STRING","Mage_Catalog_Model_Resource_Eav_Attribute",465],["T_DOUBLE_COLON","::",465],["T_STRING","SCOPE_WEBSITE",465],";",["T_WHITESPACE","\n        ",465],"}",["T_WHITESPACE"," ",466],["T_ELSE","else",466],["T_WHITESPACE"," ",466],"{",["T_WHITESPACE","\n            ",466],["T_VARIABLE","$data",467],"[",["T_CONSTANT_ENCAPSED_STRING","'is_global'",467],"]",["T_WHITESPACE"," ",467],"=",["T_WHITESPACE"," ",467],["T_STRING","Mage_Catalog_Model_Resource_Eav_Attribute",467],["T_DOUBLE_COLON","::",467],["T_STRING","SCOPE_STORE",467],";",["T_WHITESPACE","\n        ",467],"}",["T_WHITESPACE","\n        ",468],["T_IF","if",469],["T_WHITESPACE"," ",469],"(","!",["T_ISSET","isset",469],"(",["T_VARIABLE","$data",469],"[",["T_CONSTANT_ENCAPSED_STRING","'is_configurable'",469],"]",")",")",["T_WHITESPACE"," ",469],"{",["T_WHITESPACE","\n            ",469],["T_VARIABLE","$data",470],"[",["T_CONSTANT_ENCAPSED_STRING","'is_configurable'",470],"]",["T_WHITESPACE"," ",470],"=",["T_WHITESPACE"," ",470],["T_LNUMBER","0",470],";",["T_WHITESPACE","\n        ",470],"}",["T_WHITESPACE","\n        ",471],["T_IF","if",472],["T_WHITESPACE"," ",472],"(","!",["T_ISSET","isset",472],"(",["T_VARIABLE","$data",472],"[",["T_CONSTANT_ENCAPSED_STRING","'is_filterable'",472],"]",")",")",["T_WHITESPACE"," ",472],"{",["T_WHITESPACE","\n            ",472],["T_VARIABLE","$data",473],"[",["T_CONSTANT_ENCAPSED_STRING","'is_filterable'",473],"]",["T_WHITESPACE"," ",473],"=",["T_WHITESPACE"," ",473],["T_LNUMBER","0",473],";",["T_WHITESPACE","\n        ",473],"}",["T_WHITESPACE","\n        ",474],["T_IF","if",475],["T_WHITESPACE"," ",475],"(","!",["T_ISSET","isset",475],"(",["T_VARIABLE","$data",475],"[",["T_CONSTANT_ENCAPSED_STRING","'is_filterable_in_search'",475],"]",")",")",["T_WHITESPACE"," ",475],"{",["T_WHITESPACE","\n            ",475],["T_VARIABLE","$data",476],"[",["T_CONSTANT_ENCAPSED_STRING","'is_filterable_in_search'",476],"]",["T_WHITESPACE"," ",476],"=",["T_WHITESPACE"," ",476],["T_LNUMBER","0",476],";",["T_WHITESPACE","\n        ",476],"}",["T_WHITESPACE","\n        ",477],["T_IF","if",478],["T_WHITESPACE"," ",478],"(","!",["T_ISSET","isset",478],"(",["T_VARIABLE","$data",478],"[",["T_CONSTANT_ENCAPSED_STRING","'apply_to'",478],"]",")",")",["T_WHITESPACE"," ",478],"{",["T_WHITESPACE","\n            ",478],["T_VARIABLE","$data",479],"[",["T_CONSTANT_ENCAPSED_STRING","'apply_to'",479],"]",["T_WHITESPACE"," ",479],"=",["T_WHITESPACE"," ",479],["T_ARRAY","array",479],"(",")",";",["T_WHITESPACE","\n        ",479],"}",["T_WHITESPACE","\n        ",480],["T_COMMENT","\/\/ set frontend labels array with store_id as keys\n",481],["T_WHITESPACE","        ",482],["T_IF","if",482],["T_WHITESPACE"," ",482],"(",["T_ISSET","isset",482],"(",["T_VARIABLE","$data",482],"[",["T_CONSTANT_ENCAPSED_STRING","'frontend_label'",482],"]",")",["T_WHITESPACE"," ",482],["T_BOOLEAN_AND","&&",482],["T_WHITESPACE"," ",482],["T_STRING","is_array",482],"(",["T_VARIABLE","$data",482],"[",["T_CONSTANT_ENCAPSED_STRING","'frontend_label'",482],"]",")",")",["T_WHITESPACE"," ",482],"{",["T_WHITESPACE","\n            ",482],["T_VARIABLE","$labels",483],["T_WHITESPACE"," ",483],"=",["T_WHITESPACE"," ",483],["T_ARRAY","array",483],"(",")",";",["T_WHITESPACE","\n            ",483],["T_FOREACH","foreach",484],["T_WHITESPACE"," ",484],"(",["T_VARIABLE","$data",484],"[",["T_CONSTANT_ENCAPSED_STRING","'frontend_label'",484],"]",["T_WHITESPACE"," ",484],["T_AS","as",484],["T_WHITESPACE"," ",484],["T_VARIABLE","$label",484],")",["T_WHITESPACE"," ",484],"{",["T_WHITESPACE","\n                ",484],["T_VARIABLE","$storeId",485],["T_WHITESPACE"," ",485],"=",["T_WHITESPACE"," ",485],["T_VARIABLE","$label",485],"[",["T_CONSTANT_ENCAPSED_STRING","'store_id'",485],"]",";",["T_WHITESPACE","\n                ",485],["T_VARIABLE","$labelText",486],["T_WHITESPACE"," ",486],"=",["T_WHITESPACE"," ",486],["T_VARIABLE","$helperCatalog",486],["T_OBJECT_OPERATOR","->",486],["T_STRING","stripTags",486],"(",["T_VARIABLE","$label",486],"[",["T_CONSTANT_ENCAPSED_STRING","'label'",486],"]",")",";",["T_WHITESPACE","\n                ",486],["T_VARIABLE","$labels",487],"[",["T_VARIABLE","$storeId",487],"]",["T_WHITESPACE"," ",487],"=",["T_WHITESPACE"," ",487],["T_VARIABLE","$labelText",487],";",["T_WHITESPACE","\n            ",487],"}",["T_WHITESPACE","\n            ",488],["T_VARIABLE","$data",489],"[",["T_CONSTANT_ENCAPSED_STRING","'frontend_label'",489],"]",["T_WHITESPACE"," ",489],"=",["T_WHITESPACE"," ",489],["T_VARIABLE","$labels",489],";",["T_WHITESPACE","\n        ",489],"}",["T_WHITESPACE","\n        ",490],["T_COMMENT","\/\/ set additional fields\n",491],["T_WHITESPACE","        ",492],["T_IF","if",492],["T_WHITESPACE"," ",492],"(",["T_ISSET","isset",492],"(",["T_VARIABLE","$data",492],"[",["T_CONSTANT_ENCAPSED_STRING","'additional_fields'",492],"]",")",["T_WHITESPACE"," ",492],["T_BOOLEAN_AND","&&",492],["T_WHITESPACE"," ",492],["T_STRING","is_array",492],"(",["T_VARIABLE","$data",492],"[",["T_CONSTANT_ENCAPSED_STRING","'additional_fields'",492],"]",")",")",["T_WHITESPACE"," ",492],"{",["T_WHITESPACE","\n            ",492],["T_VARIABLE","$data",493],["T_WHITESPACE"," ",493],"=",["T_WHITESPACE"," ",493],["T_STRING","array_merge",493],"(",["T_VARIABLE","$data",493],",",["T_WHITESPACE"," ",493],["T_VARIABLE","$data",493],"[",["T_CONSTANT_ENCAPSED_STRING","'additional_fields'",493],"]",")",";",["T_WHITESPACE","\n            ",493],["T_UNSET","unset",494],"(",["T_VARIABLE","$data",494],"[",["T_CONSTANT_ENCAPSED_STRING","'additional_fields'",494],"]",")",";",["T_WHITESPACE","\n        ",494],"}",["T_WHITESPACE","\n        ",495],["T_COMMENT","\/\/default value\n",496],["T_WHITESPACE","        ",497],["T_IF","if",497],["T_WHITESPACE"," ",497],"(","!",["T_EMPTY","empty",497],"(",["T_VARIABLE","$data",497],"[",["T_CONSTANT_ENCAPSED_STRING","'default_value'",497],"]",")",")",["T_WHITESPACE"," ",497],"{",["T_WHITESPACE","\n            ",497],["T_VARIABLE","$data",498],"[",["T_CONSTANT_ENCAPSED_STRING","'default_value'",498],"]",["T_WHITESPACE"," ",498],"=",["T_WHITESPACE"," ",498],["T_VARIABLE","$helperCatalog",498],["T_OBJECT_OPERATOR","->",498],["T_STRING","stripTags",498],"(",["T_VARIABLE","$data",498],"[",["T_CONSTANT_ENCAPSED_STRING","'default_value'",498],"]",")",";",["T_WHITESPACE","\n        ",498],"}",["T_WHITESPACE","\n    ",499],"}",["T_WHITESPACE","\n\n    ",500],["T_DOC_COMMENT","\/**\n     * Load model by attribute ID or code\n     *\n     * @param integer|string $attribute\n     * @return Mage_Catalog_Model_Resource_Eav_Attribute\n     *\/",502],["T_WHITESPACE","\n    ",507],["T_PROTECTED","protected",508],["T_WHITESPACE"," ",508],["T_FUNCTION","function",508],["T_WHITESPACE"," ",508],["T_STRING","_getAttribute",508],"(",["T_VARIABLE","$attribute",508],")",["T_WHITESPACE","\n    ",508],"{",["T_WHITESPACE","\n        ",509],["T_VARIABLE","$model",510],["T_WHITESPACE"," ",510],"=",["T_WHITESPACE"," ",510],["T_STRING","Mage",510],["T_DOUBLE_COLON","::",510],["T_STRING","getResourceModel",510],"(",["T_CONSTANT_ENCAPSED_STRING","'catalog\/eav_attribute'",510],")",["T_WHITESPACE","\n            ",510],["T_OBJECT_OPERATOR","->",511],["T_STRING","setEntityTypeId",511],"(",["T_VARIABLE","$this",511],["T_OBJECT_OPERATOR","->",511],["T_STRING","_entityTypeId",511],")",";",["T_WHITESPACE","\n\n        ",511],["T_IF","if",513],["T_WHITESPACE"," ",513],"(",["T_STRING","is_numeric",513],"(",["T_VARIABLE","$attribute",513],")",")",["T_WHITESPACE"," ",513],"{",["T_WHITESPACE","\n            ",513],["T_VARIABLE","$model",514],["T_OBJECT_OPERATOR","->",514],["T_STRING","load",514],"(",["T_STRING","intval",514],"(",["T_VARIABLE","$attribute",514],")",")",";",["T_WHITESPACE","\n        ",514],"}",["T_WHITESPACE"," ",515],["T_ELSE","else",515],["T_WHITESPACE"," ",515],"{",["T_WHITESPACE","\n            ",515],["T_VARIABLE","$model",516],["T_OBJECT_OPERATOR","->",516],["T_STRING","load",516],"(",["T_VARIABLE","$attribute",516],",",["T_WHITESPACE"," ",516],["T_CONSTANT_ENCAPSED_STRING","'attribute_code'",516],")",";",["T_WHITESPACE","\n        ",516],"}",["T_WHITESPACE","\n\n        ",517],["T_IF","if",519],["T_WHITESPACE"," ",519],"(","!",["T_VARIABLE","$model",519],["T_OBJECT_OPERATOR","->",519],["T_STRING","getId",519],"(",")",")",["T_WHITESPACE"," ",519],"{",["T_WHITESPACE","\n            ",519],["T_VARIABLE","$this",520],["T_OBJECT_OPERATOR","->",520],["T_STRING","_fault",520],"(",["T_CONSTANT_ENCAPSED_STRING","'not_exists'",520],")",";",["T_WHITESPACE","\n        ",520],"}",["T_WHITESPACE","\n\n        ",521],["T_RETURN","return",523],["T_WHITESPACE"," ",523],["T_VARIABLE","$model",523],";",["T_WHITESPACE","\n    ",523],"}",["T_WHITESPACE","\n\n",524],"}",["T_WHITESPACE"," ",526],["T_COMMENT","\/\/ Class Mage_Catalog_Model_Product_Attribute_Api End\n",526]]
[["T_OPEN_TAG","<?php\n",1],["T_DOC_COMMENT","\/**\n * Magento\n *\n * NOTICE OF LICENSE\n *\n * This source file is subject to the Open Software License (OSL 3.0)\n * that is bundled with this package in the file LICENSE.txt.\n * It is also available through the world-wide-web at this URL:\n * http:\/\/opensource.org\/licenses\/osl-3.0.php\n * If you did not receive a copy of the license and are unable to\n * obtain it through the world-wide-web, please send an email\n * to license@magento.com so we can send you a copy immediately.\n *\n * DISCLAIMER\n *\n * Do not edit or add to this file if you wish to upgrade Magento to newer\n * versions in the future. If you wish to customize Magento for your\n * needs please refer to http:\/\/www.magento.com for more information.\n *\n * @category    Mage\n * @package     Mage_Catalog\n * @copyright  Copyright (c) 2006-2016 X.commerce, Inc. and affiliates (http:\/\/www.magento.com)\n * @license    http:\/\/opensource.org\/licenses\/osl-3.0.php  Open Software License (OSL 3.0)\n *\/",2],["T_WHITESPACE","\n\n",25],["T_DOC_COMMENT","\/**\n * Catalog Product tier price api\n *\n * @category   Mage\n * @package    Mage_Catalog\n * @author     Magento Core Team <core@magentocommerce.com>\n *\/",27],["T_WHITESPACE","\n",33],["T_CLASS","class",34],["T_WHITESPACE"," ",34],["T_STRING","Mage_Catalog_Model_Product_Attribute_Tierprice_Api",34],["T_WHITESPACE"," ",34],["T_EXTENDS","extends",34],["T_WHITESPACE"," ",34],["T_STRING","Mage_Catalog_Model_Api_Resource",34],["T_WHITESPACE","\n",34],"{",["T_WHITESPACE","\n    ",35],["T_CONST","const",36],["T_WHITESPACE"," ",36],["T_STRING","ATTRIBUTE_CODE",36],["T_WHITESPACE"," ",36],"=",["T_WHITESPACE"," ",36],["T_CONSTANT_ENCAPSED_STRING","'tier_price'",36],";",["T_WHITESPACE","\n\n    ",36],["T_PUBLIC","public",38],["T_WHITESPACE"," ",38],["T_FUNCTION","function",38],["T_WHITESPACE"," ",38],["T_STRING","__construct",38],"(",")",["T_WHITESPACE","\n    ",38],"{",["T_WHITESPACE","\n        ",39],["T_VARIABLE","$this",40],["T_OBJECT_OPERATOR","->",40],["T_STRING","_storeIdSessionField",40],["T_WHITESPACE"," ",40],"=",["T_WHITESPACE"," ",40],["T_CONSTANT_ENCAPSED_STRING","'product_store_id'",40],";",["T_WHITESPACE","\n    ",40],"}",["T_WHITESPACE","\n\n    ",41],["T_PUBLIC","public",43],["T_WHITESPACE"," ",43],["T_FUNCTION","function",43],["T_WHITESPACE"," ",43],["T_STRING","info",43],"(",["T_VARIABLE","$productId",43],",",["T_WHITESPACE"," ",43],["T_VARIABLE","$identifierType",43],["T_WHITESPACE"," ",43],"=",["T_WHITESPACE"," ",43],["T_STRING","null",43],")",["T_WHITESPACE","\n    ",43],"{",["T_WHITESPACE","\n        ",44],["T_VARIABLE","$product",45],["T_WHITESPACE"," ",45],"=",["T_WHITESPACE"," ",45],["T_VARIABLE","$this",45],["T_OBJECT_OPERATOR","->",45],["T_STRING","_initProduct",45],"(",["T_VARIABLE","$productId",45],",",["T_WHITESPACE"," ",45],["T_VARIABLE","$identifierType",45],")",";",["T_WHITESPACE","\n        ",45],["T_VARIABLE","$tierPrices",46],["T_WHITESPACE"," ",46],"=",["T_WHITESPACE"," ",46],["T_VARIABLE","$product",46],["T_OBJECT_OPERATOR","->",46],["T_STRING","getData",46],"(",["T_STRING","self",46],["T_DOUBLE_COLON","::",46],["T_STRING","ATTRIBUTE_CODE",46],")",";",["T_WHITESPACE","\n\n        ",46],["T_IF","if",48],["T_WHITESPACE"," ",48],"(","!",["T_STRING","is_array",48],"(",["T_VARIABLE","$tierPrices",48],")",")",["T_WHITESPACE"," ",48],"{",["T_WHITESPACE","\n            ",48],["T_RETURN","return",49],["T_WHITESPACE"," ",49],["T_ARRAY","array",49],"(",")",";",["T_WHITESPACE","\n        ",49],"}",["T_WHITESPACE","\n\n        ",50],["T_VARIABLE","$result",52],["T_WHITESPACE"," ",52],"=",["T_WHITESPACE"," ",52],["T_ARRAY","array",52],"(",")",";",["T_WHITESPACE","\n\n        ",52],["T_FOREACH","foreach",54],["T_WHITESPACE"," ",54],"(",["T_VARIABLE","$tierPrices",54],["T_WHITESPACE"," ",54],["T_AS","as",54],["T_WHITESPACE"," ",54],["T_VARIABLE","$tierPrice",54],")",["T_WHITESPACE"," ",54],"{",["T_WHITESPACE","\n            ",54],["T_VARIABLE","$row",55],["T_WHITESPACE"," ",55],"=",["T_WHITESPACE"," ",55],["T_ARRAY","array",55],"(",")",";",["T_WHITESPACE","\n            ",55],["T_VARIABLE","$row",56],"[",["T_CONSTANT_ENCAPSED_STRING","'customer_group_id'",56],"]",["T_WHITESPACE"," ",56],"=",["T_WHITESPACE"," ",56],"(",["T_EMPTY","empty",56],"(",["T_VARIABLE","$tierPrice",56],"[",["T_CONSTANT_ENCAPSED_STRING","'all_groups'",56],"]",")",["T_WHITESPACE"," ",56],"?",["T_WHITESPACE"," ",56],["T_VARIABLE","$tierPrice",56],"[",["T_CONSTANT_ENCAPSED_STRING","'cust_group'",56],"]",["T_WHITESPACE"," ",56],":",["T_WHITESPACE"," ",56],["T_CONSTANT_ENCAPSED_STRING","'all'",56],["T_WHITESPACE"," ",56],")",";",["T_WHITESPACE","\n            ",56],["T_VARIABLE","$row",57],"[",["T_CONSTANT_ENCAPSED_STRING","'website'",57],"]",["T_WHITESPACE","           ",57],"=",["T_WHITESPACE"," ",57],"(",["T_VARIABLE","$tierPrice",57],"[",["T_CONSTANT_ENCAPSED_STRING","'website_id'",57],"]",["T_WHITESPACE"," ",57],"?",["T_WHITESPACE","\n                            ",57],["T_STRING","Mage",58],["T_DOUBLE_COLON","::",58],["T_STRING","app",58],"(",")",["T_OBJECT_OPERATOR","->",58],["T_STRING","getWebsite",58],"(",["T_VARIABLE","$tierPrice",58],"[",["T_CONSTANT_ENCAPSED_STRING","'website_id'",58],"]",")",["T_OBJECT_OPERATOR","->",58],["T_STRING","getCode",58],"(",")",["T_WHITESPACE"," ",58],":",["T_WHITESPACE","\n                            ",58],["T_CONSTANT_ENCAPSED_STRING","'all'",59],["T_WHITESPACE","\n                    ",59],")",";",["T_WHITESPACE","\n            ",60],["T_VARIABLE","$row",61],"[",["T_CONSTANT_ENCAPSED_STRING","'qty'",61],"]",["T_WHITESPACE","               ",61],"=",["T_WHITESPACE"," ",61],["T_VARIABLE","$tierPrice",61],"[",["T_CONSTANT_ENCAPSED_STRING","'price_qty'",61],"]",";",["T_WHITESPACE","\n            ",61],["T_VARIABLE","$row",62],"[",["T_CONSTANT_ENCAPSED_STRING","'price'",62],"]",["T_WHITESPACE","             ",62],"=",["T_WHITESPACE"," ",62],["T_VARIABLE","$tierPrice",62],"[",["T_CONSTANT_ENCAPSED_STRING","'price'",62],"]",";",["T_WHITESPACE","\n\n            ",62],["T_VARIABLE","$result",64],"[","]",["T_WHITESPACE"," ",64],"=",["T_WHITESPACE"," ",64],["T_VARIABLE","$row",64],";",["T_WHITESPACE","\n        ",64],"}",["T_WHITESPACE","\n\n        ",65],["T_RETURN","return",67],["T_WHITESPACE"," ",67],["T_VARIABLE","$result",67],";",["T_WHITESPACE","\n    ",67],"}",["T_WHITESPACE","\n\n    ",68],["T_DOC_COMMENT","\/**\n     * Update tier prices of product\n     *\n     * @param int|string $productId\n     * @param array $tierPrices\n     * @return boolean\n     *\/",70],["T_WHITESPACE","\n    ",76],["T_PUBLIC","public",77],["T_WHITESPACE"," ",77],["T_FUNCTION","function",77],["T_WHITESPACE"," ",77],["T_STRING","update",77],"(",["T_VARIABLE","$productId",77],",",["T_WHITESPACE"," ",77],["T_VARIABLE","$tierPrices",77],",",["T_WHITESPACE"," ",77],["T_VARIABLE","$identifierType",77],["T_WHITESPACE"," ",77],"=",["T_WHITESPACE"," ",77],["T_STRING","null",77],")",["T_WHITESPACE","\n    ",77],"{",["T_WHITESPACE","\n        ",78],["T_VARIABLE","$product",79],["T_WHITESPACE"," ",79],"=",["T_WHITESPACE"," ",79],["T_VARIABLE","$this",79],["T_OBJECT_OPERATOR","->",79],["T_STRING","_initProduct",79],"(",["T_VARIABLE","$productId",79],",",["T_WHITESPACE"," ",79],["T_VARIABLE","$identifierType",79],")",";",["T_WHITESPACE","\n\n        ",79],["T_VARIABLE","$updatedTierPrices",81],["T_WHITESPACE"," ",81],"=",["T_WHITESPACE"," ",81],["T_VARIABLE","$this",81],["T_OBJECT_OPERATOR","->",81],["T_STRING","prepareTierPrices",81],"(",["T_VARIABLE","$product",81],",",["T_WHITESPACE"," ",81],["T_VARIABLE","$tierPrices",81],")",";",["T_WHITESPACE","\n        ",81],["T_IF","if",82],["T_WHITESPACE"," ",82],"(",["T_STRING","is_null",82],"(",["T_VARIABLE","$updatedTierPrices",82],")",")",["T_WHITESPACE"," ",82],"{",["T_WHITESPACE","\n            ",82],["T_VARIABLE","$this",83],["T_OBJECT_OPERATOR","->",83],["T_STRING","_fault",83],"(",["T_CONSTANT_ENCAPSED_STRING","'data_invalid'",83],",",["T_WHITESPACE"," ",83],["T_STRING","Mage",83],["T_DOUBLE_COLON","::",83],["T_STRING","helper",83],"(",["T_CONSTANT_ENCAPSED_STRING","'catalog'",83],")",["T_OBJECT_OPERATOR","->",83],["T_STRING","__",83],"(",["T_CONSTANT_ENCAPSED_STRING","'Invalid Tier Prices'",83],")",")",";",["T_WHITESPACE","\n        ",83],"}",["T_WHITESPACE","\n\n        ",84],["T_VARIABLE","$product",86],["T_OBJECT_OPERATOR","->",86],["T_STRING","setData",86],"(",["T_STRING","self",86],["T_DOUBLE_COLON","::",86],["T_STRING","ATTRIBUTE_CODE",86],",",["T_WHITESPACE"," ",86],["T_VARIABLE","$updatedTierPrices",86],")",";",["T_WHITESPACE","\n        ",86],["T_TRY","try",87],["T_WHITESPACE"," ",87],"{",["T_WHITESPACE","\n            ",87],["T_DOC_COMMENT","\/**\n             * @todo implement full validation process with errors returning which are ignoring now\n             * @todo see Mage_Catalog_Model_Product::validate()\n             *\/",88],["T_WHITESPACE","\n            ",91],["T_IF","if",92],["T_WHITESPACE"," ",92],"(",["T_STRING","is_array",92],"(",["T_VARIABLE","$errors",92],["T_WHITESPACE"," ",92],"=",["T_WHITESPACE"," ",92],["T_VARIABLE","$product",92],["T_OBJECT_OPERATOR","->",92],["T_STRING","validate",92],"(",")",")",")",["T_WHITESPACE"," ",92],"{",["T_WHITESPACE","\n                ",92],["T_VARIABLE","$strErrors",93],["T_WHITESPACE"," ",93],"=",["T_WHITESPACE"," ",93],["T_ARRAY","array",93],"(",")",";",["T_WHITESPACE","\n                ",93],["T_FOREACH","foreach",94],"(",["T_VARIABLE","$errors",94],["T_WHITESPACE"," ",94],["T_AS","as",94],["T_WHITESPACE"," ",94],["T_VARIABLE","$code",94],["T_DOUBLE_ARROW","=>",94],["T_VARIABLE","$error",94],")",["T_WHITESPACE"," ",94],"{",["T_WHITESPACE","\n                    ",94],["T_VARIABLE","$strErrors",95],"[","]",["T_WHITESPACE"," ",95],"=",["T_WHITESPACE"," ",95],"(",["T_VARIABLE","$error",95],["T_WHITESPACE"," ",95],["T_IS_IDENTICAL","===",95],["T_WHITESPACE"," ",95],["T_STRING","true",95],")","?",["T_WHITESPACE"," ",95],["T_STRING","Mage",95],["T_DOUBLE_COLON","::",95],["T_STRING","helper",95],"(",["T_CONSTANT_ENCAPSED_STRING","'catalog'",95],")",["T_OBJECT_OPERATOR","->",95],["T_STRING","__",95],"(",["T_CONSTANT_ENCAPSED_STRING","'Value for \"%s\" is invalid.'",95],",",["T_WHITESPACE"," ",95],["T_VARIABLE","$code",95],")",["T_WHITESPACE"," ",95],":",["T_WHITESPACE"," ",95],["T_STRING","Mage",95],["T_DOUBLE_COLON","::",95],["T_STRING","helper",95],"(",["T_CONSTANT_ENCAPSED_STRING","'catalog'",95],")",["T_OBJECT_OPERATOR","->",95],["T_STRING","__",95],"(",["T_CONSTANT_ENCAPSED_STRING","'Value for \"%s\" is invalid: %s'",95],",",["T_WHITESPACE"," ",95],["T_VARIABLE","$code",95],",",["T_WHITESPACE"," ",95],["T_VARIABLE","$error",95],")",";",["T_WHITESPACE","\n                ",95],"}",["T_WHITESPACE","\n                ",96],["T_VARIABLE","$this",97],["T_OBJECT_OPERATOR","->",97],["T_STRING","_fault",97],"(",["T_CONSTANT_ENCAPSED_STRING","'data_invalid'",97],",",["T_WHITESPACE"," ",97],["T_STRING","implode",97],"(",["T_CONSTANT_ENCAPSED_STRING","\"\\n\"",97],",",["T_WHITESPACE"," ",97],["T_VARIABLE","$strErrors",97],")",")",";",["T_WHITESPACE","\n            ",97],"}",["T_WHITESPACE","\n\n            ",98],["T_VARIABLE","$product",100],["T_OBJECT_OPERATOR","->",100],["T_STRING","save",100],"(",")",";",["T_WHITESPACE","\n        ",100],"}",["T_WHITESPACE"," ",101],["T_CATCH","catch",101],["T_WHITESPACE"," ",101],"(",["T_STRING","Mage_Core_Exception",101],["T_WHITESPACE"," ",101],["T_VARIABLE","$e",101],")",["T_WHITESPACE"," ",101],"{",["T_WHITESPACE","\n            ",101],["T_VARIABLE","$this",102],["T_OBJECT_OPERATOR","->",102],["T_STRING","_fault",102],"(",["T_CONSTANT_ENCAPSED_STRING","'not_updated'",102],",",["T_WHITESPACE"," ",102],["T_VARIABLE","$e",102],["T_OBJECT_OPERATOR","->",102],["T_STRING","getMessage",102],"(",")",")",";",["T_WHITESPACE","\n        ",102],"}",["T_WHITESPACE","\n\n        ",103],["T_RETURN","return",105],["T_WHITESPACE"," ",105],["T_STRING","true",105],";",["T_WHITESPACE","\n    ",105],"}",["T_WHITESPACE","\n\n    ",106],["T_DOC_COMMENT","\/**\n     *  Prepare tier prices for save\n     *\n     *  @param      Mage_Catalog_Model_Product $product\n     *  @param      array $tierPrices\n     *  @return     array\n     *\/",108],["T_WHITESPACE","\n    ",114],["T_PUBLIC","public",115],["T_WHITESPACE"," ",115],["T_FUNCTION","function",115],["T_WHITESPACE"," ",115],["T_STRING","prepareTierPrices",115],"(",["T_VARIABLE","$product",115],",",["T_WHITESPACE"," ",115],["T_VARIABLE","$tierPrices",115],["T_WHITESPACE"," ",115],"=",["T_WHITESPACE"," ",115],["T_STRING","null",115],")",["T_WHITESPACE","\n    ",115],"{",["T_WHITESPACE","\n        ",116],["T_IF","if",117],["T_WHITESPACE"," ",117],"(","!",["T_STRING","is_array",117],"(",["T_VARIABLE","$tierPrices",117],")",")",["T_WHITESPACE"," ",117],"{",["T_WHITESPACE","\n            ",117],["T_RETURN","return",118],["T_WHITESPACE"," ",118],["T_STRING","null",118],";",["T_WHITESPACE","\n        ",118],"}",["T_WHITESPACE","\n\n        ",119],["T_IF","if",121],["T_WHITESPACE"," ",121],"(","!",["T_STRING","is_array",121],"(",["T_VARIABLE","$tierPrices",121],")",")",["T_WHITESPACE"," ",121],"{",["T_WHITESPACE","\n            ",121],["T_VARIABLE","$this",122],["T_OBJECT_OPERATOR","->",122],["T_STRING","_fault",122],"(",["T_CONSTANT_ENCAPSED_STRING","'data_invalid'",122],",",["T_WHITESPACE"," ",122],["T_STRING","Mage",122],["T_DOUBLE_COLON","::",122],["T_STRING","helper",122],"(",["T_CONSTANT_ENCAPSED_STRING","'catalog'",122],")",["T_OBJECT_OPERATOR","->",122],["T_STRING","__",122],"(",["T_CONSTANT_ENCAPSED_STRING","'Invalid Tier Prices'",122],")",")",";",["T_WHITESPACE","\n        ",122],"}",["T_WHITESPACE","\n\n        ",123],["T_VARIABLE","$updateValue",125],["T_WHITESPACE"," ",125],"=",["T_WHITESPACE"," ",125],["T_ARRAY","array",125],"(",")",";",["T_WHITESPACE","\n\n        ",125],["T_FOREACH","foreach",127],["T_WHITESPACE"," ",127],"(",["T_VARIABLE","$tierPrices",127],["T_WHITESPACE"," ",127],["T_AS","as",127],["T_WHITESPACE"," ",127],["T_VARIABLE","$tierPrice",127],")",["T_WHITESPACE"," ",127],"{",["T_WHITESPACE","\n            ",127],["T_IF","if",128],["T_WHITESPACE"," ",128],"(","!",["T_STRING","is_array",128],"(",["T_VARIABLE","$tierPrice",128],")",["T_WHITESPACE","\n                ",128],["T_BOOLEAN_OR","||",129],["T_WHITESPACE"," ",129],"!",["T_ISSET","isset",129],"(",["T_VARIABLE","$tierPrice",129],"[",["T_CONSTANT_ENCAPSED_STRING","'qty'",129],"]",")",["T_WHITESPACE","\n                ",129],["T_BOOLEAN_OR","||",130],["T_WHITESPACE"," ",130],"!",["T_ISSET","isset",130],"(",["T_VARIABLE","$tierPrice",130],"[",["T_CONSTANT_ENCAPSED_STRING","'price'",130],"]",")",")",["T_WHITESPACE"," ",130],"{",["T_WHITESPACE","\n                ",130],["T_VARIABLE","$this",131],["T_OBJECT_OPERATOR","->",131],["T_STRING","_fault",131],"(",["T_CONSTANT_ENCAPSED_STRING","'data_invalid'",131],",",["T_WHITESPACE"," ",131],["T_STRING","Mage",131],["T_DOUBLE_COLON","::",131],["T_STRING","helper",131],"(",["T_CONSTANT_ENCAPSED_STRING","'catalog'",131],")",["T_OBJECT_OPERATOR","->",131],["T_STRING","__",131],"(",["T_CONSTANT_ENCAPSED_STRING","'Invalid Tier Prices'",131],")",")",";",["T_WHITESPACE","\n            ",131],"}",["T_WHITESPACE","\n\n            ",132],["T_IF","if",134],["T_WHITESPACE"," ",134],"(","!",["T_ISSET","isset",134],"(",["T_VARIABLE","$tierPrice",134],"[",["T_CONSTANT_ENCAPSED_STRING","'website'",134],"]",")",["T_WHITESPACE"," ",134],["T_BOOLEAN_OR","||",134],["T_WHITESPACE"," ",134],["T_VARIABLE","$tierPrice",134],"[",["T_CONSTANT_ENCAPSED_STRING","'website'",134],"]",["T_WHITESPACE"," ",134],["T_IS_EQUAL","==",134],["T_WHITESPACE"," ",134],["T_CONSTANT_ENCAPSED_STRING","'all'",134],")",["T_WHITESPACE"," ",134],"{",["T_WHITESPACE","\n                ",134],["T_VARIABLE","$tierPrice",135],"[",["T_CONSTANT_ENCAPSED_STRING","'website'",135],"]",["T_WHITESPACE"," ",135],"=",["T_WHITESPACE"," ",135],["T_LNUMBER","0",135],";",["T_WHITESPACE","\n            ",135],"}",["T_WHITESPACE"," ",136],["T_ELSE","else",136],["T_WHITESPACE"," ",136],"{",["T_WHITESPACE","\n                ",136],["T_TRY","try",137],["T_WHITESPACE"," ",137],"{",["T_WHITESPACE","\n                    ",137],["T_VARIABLE","$tierPrice",138],"[",["T_CONSTANT_ENCAPSED_STRING","'website'",138],"]",["T_WHITESPACE"," ",138],"=",["T_WHITESPACE"," ",138],["T_STRING","Mage",138],["T_DOUBLE_COLON","::",138],["T_STRING","app",138],"(",")",["T_OBJECT_OPERATOR","->",138],["T_STRING","getWebsite",138],"(",["T_VARIABLE","$tierPrice",138],"[",["T_CONSTANT_ENCAPSED_STRING","'website'",138],"]",")",["T_OBJECT_OPERATOR","->",138],["T_STRING","getId",138],"(",")",";",["T_WHITESPACE","\n                ",138],"}",["T_WHITESPACE"," ",139],["T_CATCH","catch",139],["T_WHITESPACE"," ",139],"(",["T_STRING","Mage_Core_Exception",139],["T_WHITESPACE"," ",139],["T_VARIABLE","$e",139],")",["T_WHITESPACE"," ",139],"{",["T_WHITESPACE","\n                    ",139],["T_VARIABLE","$tierPrice",140],"[",["T_CONSTANT_ENCAPSED_STRING","'website'",140],"]",["T_WHITESPACE"," ",140],"=",["T_WHITESPACE"," ",140],["T_LNUMBER","0",140],";",["T_WHITESPACE","\n                ",140],"}",["T_WHITESPACE","\n            ",141],"}",["T_WHITESPACE","\n\n            ",142],["T_IF","if",144],["T_WHITESPACE"," ",144],"(",["T_STRING","intval",144],"(",["T_VARIABLE","$tierPrice",144],"[",["T_CONSTANT_ENCAPSED_STRING","'website'",144],"]",")",["T_WHITESPACE"," ",144],">",["T_WHITESPACE"," ",144],["T_LNUMBER","0",144],["T_WHITESPACE"," ",144],["T_BOOLEAN_AND","&&",144],["T_WHITESPACE"," ",144],"!",["T_STRING","in_array",144],"(",["T_VARIABLE","$tierPrice",144],"[",["T_CONSTANT_ENCAPSED_STRING","'website'",144],"]",",",["T_WHITESPACE"," ",144],["T_VARIABLE","$product",144],["T_OBJECT_OPERATOR","->",144],["T_STRING","getWebsiteIds",144],"(",")",")",")",["T_WHITESPACE"," ",144],"{",["T_WHITESPACE","\n                ",144],["T_VARIABLE","$this",145],["T_OBJECT_OPERATOR","->",145],["T_STRING","_fault",145],"(",["T_CONSTANT_ENCAPSED_STRING","'data_invalid'",145],",",["T_WHITESPACE"," ",145],["T_STRING","Mage",145],["T_DOUBLE_COLON","::",145],["T_STRING","helper",145],"(",["T_CONSTANT_ENCAPSED_STRING","'catalog'",145],")",["T_OBJECT_OPERATOR","->",145],["T_STRING","__",145],"(",["T_CONSTANT_ENCAPSED_STRING","'Invalid tier prices. The product is not associated to the requested website.'",145],")",")",";",["T_WHITESPACE","\n            ",145],"}",["T_WHITESPACE","\n\n            ",146],["T_IF","if",148],["T_WHITESPACE"," ",148],"(","!",["T_ISSET","isset",148],"(",["T_VARIABLE","$tierPrice",148],"[",["T_CONSTANT_ENCAPSED_STRING","'customer_group_id'",148],"]",")",")",["T_WHITESPACE"," ",148],"{",["T_WHITESPACE","\n                ",148],["T_VARIABLE","$tierPrice",149],"[",["T_CONSTANT_ENCAPSED_STRING","'customer_group_id'",149],"]",["T_WHITESPACE"," ",149],"=",["T_WHITESPACE"," ",149],["T_CONSTANT_ENCAPSED_STRING","'all'",149],";",["T_WHITESPACE","\n            ",149],"}",["T_WHITESPACE","\n\n            ",150],["T_IF","if",152],["T_WHITESPACE"," ",152],"(",["T_VARIABLE","$tierPrice",152],"[",["T_CONSTANT_ENCAPSED_STRING","'customer_group_id'",152],"]",["T_WHITESPACE"," ",152],["T_IS_EQUAL","==",152],["T_WHITESPACE"," ",152],["T_CONSTANT_ENCAPSED_STRING","'all'",152],")",["T_WHITESPACE"," ",152],"{",["T_WHITESPACE","\n                ",152],["T_VARIABLE","$tierPrice",153],"[",["T_CONSTANT_ENCAPSED_STRING","'customer_group_id'",153],"]",["T_WHITESPACE"," ",153],"=",["T_WHITESPACE"," ",153],["T_STRING","Mage_Customer_Model_Group",153],["T_DOUBLE_COLON","::",153],["T_STRING","CUST_GROUP_ALL",153],";",["T_WHITESPACE","\n            ",153],"}",["T_WHITESPACE","\n\n            ",154],["T_VARIABLE","$updateValue",156],"[","]",["T_WHITESPACE"," ",156],"=",["T_WHITESPACE"," ",156],["T_ARRAY","array",156],"(",["T_WHITESPACE","\n                ",156],["T_CONSTANT_ENCAPSED_STRING","'website_id'",157],["T_WHITESPACE"," ",157],["T_DOUBLE_ARROW","=>",157],["T_WHITESPACE"," ",157],["T_VARIABLE","$tierPrice",157],"[",["T_CONSTANT_ENCAPSED_STRING","'website'",157],"]",",",["T_WHITESPACE","\n                ",157],["T_CONSTANT_ENCAPSED_STRING","'cust_group'",158],["T_WHITESPACE"," ",158],["T_DOUBLE_ARROW","=>",158],["T_WHITESPACE"," ",158],["T_VARIABLE","$tierPrice",158],"[",["T_CONSTANT_ENCAPSED_STRING","'customer_group_id'",158],"]",",",["T_WHITESPACE","\n                ",158],["T_CONSTANT_ENCAPSED_STRING","'price_qty'",159],["T_WHITESPACE","  ",159],["T_DOUBLE_ARROW","=>",159],["T_WHITESPACE"," ",159],["T_VARIABLE","$tierPrice",159],"[",["T_CONSTANT_ENCAPSED_STRING","'qty'",159],"]",",",["T_WHITESPACE","\n                ",159],["T_CONSTANT_ENCAPSED_STRING","'price'",160],["T_WHITESPACE","      ",160],["T_DOUBLE_ARROW","=>",160],["T_WHITESPACE"," ",160],["T_VARIABLE","$tierPrice",160],"[",["T_CONSTANT_ENCAPSED_STRING","'price'",160],"]",["T_WHITESPACE","\n            ",160],")",";",["T_WHITESPACE","\n        ",161],"}",["T_WHITESPACE","\n\n        ",162],["T_RETURN","return",164],["T_WHITESPACE"," ",164],["T_VARIABLE","$updateValue",164],";",["T_WHITESPACE","\n    ",164],"}",["T_WHITESPACE","\n\n    ",165],["T_DOC_COMMENT","\/**\n     * Retrieve product\n     *\n     * @param int $productId\n     * @param  string $identifierType\n     * @return Mage_Catalog_Model_Product\n     *\/",167],["T_WHITESPACE","\n    ",173],["T_PROTECTED","protected",174],["T_WHITESPACE"," ",174],["T_FUNCTION","function",174],["T_WHITESPACE"," ",174],["T_STRING","_initProduct",174],"(",["T_VARIABLE","$productId",174],",",["T_WHITESPACE"," ",174],["T_VARIABLE","$identifierType",174],["T_WHITESPACE"," ",174],"=",["T_WHITESPACE"," ",174],["T_STRING","null",174],")",["T_WHITESPACE","\n    ",174],"{",["T_WHITESPACE","\n        ",175],["T_VARIABLE","$product",176],["T_WHITESPACE"," ",176],"=",["T_WHITESPACE"," ",176],["T_STRING","Mage",176],["T_DOUBLE_COLON","::",176],["T_STRING","helper",176],"(",["T_CONSTANT_ENCAPSED_STRING","'catalog\/product'",176],")",["T_OBJECT_OPERATOR","->",176],["T_STRING","getProduct",176],"(",["T_VARIABLE","$productId",176],",",["T_WHITESPACE"," ",176],["T_VARIABLE","$this",176],["T_OBJECT_OPERATOR","->",176],["T_STRING","_getStoreId",176],"(",")",",",["T_WHITESPACE"," ",176],["T_VARIABLE","$identifierType",176],")",";",["T_WHITESPACE","\n        ",176],["T_IF","if",177],["T_WHITESPACE"," ",177],"(","!",["T_VARIABLE","$product",177],["T_OBJECT_OPERATOR","->",177],["T_STRING","getId",177],"(",")",")",["T_WHITESPACE"," ",177],"{",["T_WHITESPACE","\n            ",177],["T_VARIABLE","$this",178],["T_OBJECT_OPERATOR","->",178],["T_STRING","_fault",178],"(",["T_CONSTANT_ENCAPSED_STRING","'product_not_exists'",178],")",";",["T_WHITESPACE","\n        ",178],"}",["T_WHITESPACE","\n\n        ",179],["T_RETURN","return",181],["T_WHITESPACE"," ",181],["T_VARIABLE","$product",181],";",["T_WHITESPACE","\n    ",181],"}",["T_WHITESPACE","\n",182],"}",["T_WHITESPACE"," ",183],["T_COMMENT","\/\/ Class Mage_Catalog_Model_Product_Attribute_Tierprice End\n",183]]
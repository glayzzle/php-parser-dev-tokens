[["T_OPEN_TAG","<?php\n",1],["T_DOC_COMMENT","\/**\n * Magento\n *\n * NOTICE OF LICENSE\n *\n * This source file is subject to the Open Software License (OSL 3.0)\n * that is bundled with this package in the file LICENSE.txt.\n * It is also available through the world-wide-web at this URL:\n * http:\/\/opensource.org\/licenses\/osl-3.0.php\n * If you did not receive a copy of the license and are unable to\n * obtain it through the world-wide-web, please send an email\n * to license@magento.com so we can send you a copy immediately.\n *\n * DISCLAIMER\n *\n * Do not edit or add to this file if you wish to upgrade Magento to newer\n * versions in the future. If you wish to customize Magento for your\n * needs please refer to http:\/\/www.magento.com for more information.\n *\n * @category    Mage\n * @package     Mage_Catalog\n * @copyright  Copyright (c) 2006-2016 X.commerce, Inc. and affiliates (http:\/\/www.magento.com)\n * @license    http:\/\/opensource.org\/licenses\/osl-3.0.php  Open Software License (OSL 3.0)\n *\/",2],["T_WHITESPACE","\n\n\n",25],["T_DOC_COMMENT","\/**\n * Catalog Product Compare Items Resource Collection\n *\n * @category    Mage\n * @package     Mage_Catalog\n * @author      Magento Core Team <core@magentocommerce.com>\n *\/",28],["T_WHITESPACE","\n",34],["T_CLASS","class",35],["T_WHITESPACE"," ",35],["T_STRING","Mage_Catalog_Model_Resource_Product_Compare_Item_Collection",35],["T_WHITESPACE","\n    ",35],["T_EXTENDS","extends",36],["T_WHITESPACE"," ",36],["T_STRING","Mage_Catalog_Model_Resource_Product_Collection",36],["T_WHITESPACE","\n",36],"{",["T_WHITESPACE","\n    ",37],["T_DOC_COMMENT","\/**\n     * Customer Filter\n     *\n     * @var int\n     *\/",38],["T_WHITESPACE","\n    ",42],["T_PROTECTED","protected",43],["T_WHITESPACE"," ",43],["T_VARIABLE","$_customerId",43],["T_WHITESPACE","               ",43],"=",["T_WHITESPACE"," ",43],["T_LNUMBER","0",43],";",["T_WHITESPACE","\n\n    ",43],["T_DOC_COMMENT","\/**\n     * Visitor Filter\n     *\n     * @var int\n     *\/",45],["T_WHITESPACE","\n    ",49],["T_PROTECTED","protected",50],["T_WHITESPACE"," ",50],["T_VARIABLE","$_visitorId",50],["T_WHITESPACE","                ",50],"=",["T_WHITESPACE"," ",50],["T_LNUMBER","0",50],";",["T_WHITESPACE","\n\n    ",50],["T_DOC_COMMENT","\/**\n     * Comparable attributes cache\n     *\n     * @var array\n     *\/",52],["T_WHITESPACE","\n    ",56],["T_PROTECTED","protected",57],["T_WHITESPACE"," ",57],["T_VARIABLE","$_comparableAttributes",57],";",["T_WHITESPACE","\n\n    ",57],["T_DOC_COMMENT","\/**\n     * Initialize resources\n     *\/",59],["T_WHITESPACE","\n    ",61],["T_PROTECTED","protected",62],["T_WHITESPACE"," ",62],["T_FUNCTION","function",62],["T_WHITESPACE"," ",62],["T_STRING","_construct",62],"(",")",["T_WHITESPACE","\n    ",62],"{",["T_WHITESPACE","\n        ",63],["T_VARIABLE","$this",64],["T_OBJECT_OPERATOR","->",64],["T_STRING","_init",64],"(",["T_CONSTANT_ENCAPSED_STRING","'catalog\/product_compare_item'",64],",",["T_WHITESPACE"," ",64],["T_CONSTANT_ENCAPSED_STRING","'catalog\/product'",64],")",";",["T_WHITESPACE","\n        ",64],["T_VARIABLE","$this",65],["T_OBJECT_OPERATOR","->",65],["T_STRING","_initTables",65],"(",")",";",["T_WHITESPACE","\n    ",65],"}",["T_WHITESPACE","\n\n    ",66],["T_DOC_COMMENT","\/**\n     * Set customer filter to collection\n     *\n     * @param int $customerId\n     * @return Mage_Catalog_Model_Resource_Product_Compare_Item_Collection\n     *\/",68],["T_WHITESPACE","\n    ",73],["T_PUBLIC","public",74],["T_WHITESPACE"," ",74],["T_FUNCTION","function",74],["T_WHITESPACE"," ",74],["T_STRING","setCustomerId",74],"(",["T_VARIABLE","$customerId",74],")",["T_WHITESPACE","\n    ",74],"{",["T_WHITESPACE","\n        ",75],["T_VARIABLE","$this",76],["T_OBJECT_OPERATOR","->",76],["T_STRING","_customerId",76],["T_WHITESPACE"," ",76],"=",["T_WHITESPACE"," ",76],["T_INT_CAST","(int)",76],["T_VARIABLE","$customerId",76],";",["T_WHITESPACE","\n        ",76],["T_VARIABLE","$this",77],["T_OBJECT_OPERATOR","->",77],["T_STRING","_addJoinToSelect",77],"(",")",";",["T_WHITESPACE","\n        ",77],["T_RETURN","return",78],["T_WHITESPACE"," ",78],["T_VARIABLE","$this",78],";",["T_WHITESPACE","\n    ",78],"}",["T_WHITESPACE","\n\n    ",79],["T_DOC_COMMENT","\/**\n     * Set visitor filter to collection\n     *\n     * @param int $visitorId\n     * @return Mage_Catalog_Model_Resource_Product_Compare_Item_Collection\n     *\/",81],["T_WHITESPACE","\n    ",86],["T_PUBLIC","public",87],["T_WHITESPACE"," ",87],["T_FUNCTION","function",87],["T_WHITESPACE"," ",87],["T_STRING","setVisitorId",87],"(",["T_VARIABLE","$visitorId",87],")",["T_WHITESPACE","\n    ",87],"{",["T_WHITESPACE","\n        ",88],["T_VARIABLE","$this",89],["T_OBJECT_OPERATOR","->",89],["T_STRING","_visitorId",89],["T_WHITESPACE"," ",89],"=",["T_WHITESPACE"," ",89],["T_INT_CAST","(int)",89],["T_VARIABLE","$visitorId",89],";",["T_WHITESPACE","\n        ",89],["T_VARIABLE","$this",90],["T_OBJECT_OPERATOR","->",90],["T_STRING","_addJoinToSelect",90],"(",")",";",["T_WHITESPACE","\n        ",90],["T_RETURN","return",91],["T_WHITESPACE"," ",91],["T_VARIABLE","$this",91],";",["T_WHITESPACE","\n    ",91],"}",["T_WHITESPACE","\n\n    ",92],["T_DOC_COMMENT","\/**\n     * Retrieve customer filter applied to collection\n     *\n     * @return int\n     *\/",94],["T_WHITESPACE","\n    ",98],["T_PUBLIC","public",99],["T_WHITESPACE"," ",99],["T_FUNCTION","function",99],["T_WHITESPACE"," ",99],["T_STRING","getCustomerId",99],"(",")",["T_WHITESPACE","\n    ",99],"{",["T_WHITESPACE","\n        ",100],["T_RETURN","return",101],["T_WHITESPACE"," ",101],["T_VARIABLE","$this",101],["T_OBJECT_OPERATOR","->",101],["T_STRING","_customerId",101],";",["T_WHITESPACE","\n    ",101],"}",["T_WHITESPACE","\n\n    ",102],["T_DOC_COMMENT","\/**\n     * Retrieve visitor filter applied to collection\n     *\n     * @return int\n     *\/",104],["T_WHITESPACE","\n    ",108],["T_PUBLIC","public",109],["T_WHITESPACE"," ",109],["T_FUNCTION","function",109],["T_WHITESPACE"," ",109],["T_STRING","getVisitorId",109],"(",")",["T_WHITESPACE","\n    ",109],"{",["T_WHITESPACE","\n        ",110],["T_RETURN","return",111],["T_WHITESPACE"," ",111],["T_VARIABLE","$this",111],["T_OBJECT_OPERATOR","->",111],["T_STRING","_visitorId",111],";",["T_WHITESPACE","\n    ",111],"}",["T_WHITESPACE","\n\n    ",112],["T_DOC_COMMENT","\/**\n     * Retrieve condition for join filters\n     *\n     * @return array\n     *\/",114],["T_WHITESPACE","\n    ",118],["T_PUBLIC","public",119],["T_WHITESPACE"," ",119],["T_FUNCTION","function",119],["T_WHITESPACE"," ",119],["T_STRING","getConditionForJoin",119],"(",")",["T_WHITESPACE","\n    ",119],"{",["T_WHITESPACE","\n        ",120],["T_IF","if",121],["T_WHITESPACE"," ",121],"(",["T_VARIABLE","$this",121],["T_OBJECT_OPERATOR","->",121],["T_STRING","getCustomerId",121],"(",")",")",["T_WHITESPACE"," ",121],"{",["T_WHITESPACE","\n            ",121],["T_RETURN","return",122],["T_WHITESPACE"," ",122],["T_ARRAY","array",122],"(",["T_CONSTANT_ENCAPSED_STRING","'customer_id'",122],["T_WHITESPACE"," ",122],["T_DOUBLE_ARROW","=>",122],["T_WHITESPACE"," ",122],["T_VARIABLE","$this",122],["T_OBJECT_OPERATOR","->",122],["T_STRING","getCustomerId",122],"(",")",")",";",["T_WHITESPACE","\n        ",122],"}",["T_WHITESPACE","\n\n        ",123],["T_IF","if",125],["T_WHITESPACE"," ",125],"(",["T_VARIABLE","$this",125],["T_OBJECT_OPERATOR","->",125],["T_STRING","getVisitorId",125],"(",")",")",["T_WHITESPACE"," ",125],"{",["T_WHITESPACE","\n            ",125],["T_RETURN","return",126],["T_WHITESPACE"," ",126],["T_ARRAY","array",126],"(",["T_CONSTANT_ENCAPSED_STRING","'visitor_id'",126],["T_WHITESPACE"," ",126],["T_DOUBLE_ARROW","=>",126],["T_WHITESPACE"," ",126],["T_VARIABLE","$this",126],["T_OBJECT_OPERATOR","->",126],["T_STRING","getVisitorId",126],"(",")",")",";",["T_WHITESPACE","\n        ",126],"}",["T_WHITESPACE","\n\n        ",127],["T_RETURN","return",129],["T_WHITESPACE"," ",129],["T_ARRAY","array",129],"(",["T_CONSTANT_ENCAPSED_STRING","'customer_id'",129],["T_WHITESPACE"," ",129],["T_DOUBLE_ARROW","=>",129],["T_WHITESPACE"," ",129],["T_ARRAY","array",129],"(",["T_CONSTANT_ENCAPSED_STRING","'null'",129],["T_WHITESPACE"," ",129],["T_DOUBLE_ARROW","=>",129],["T_WHITESPACE"," ",129],["T_STRING","true",129],")",",",["T_CONSTANT_ENCAPSED_STRING","'visitor_id'",129],["T_WHITESPACE"," ",129],["T_DOUBLE_ARROW","=>",129],["T_WHITESPACE"," ",129],["T_CONSTANT_ENCAPSED_STRING","'0'",129],")",";",["T_WHITESPACE","\n    ",129],"}",["T_WHITESPACE","\n\n    ",130],["T_DOC_COMMENT","\/**\n     * Add join to select\n     *\n     * @return Mage_Catalog_Model_Resource_Product_Compare_Item_Collection\n     *\/",132],["T_WHITESPACE","\n    ",136],["T_PUBLIC","public",137],["T_WHITESPACE"," ",137],["T_FUNCTION","function",137],["T_WHITESPACE"," ",137],["T_STRING","_addJoinToSelect",137],"(",")",["T_WHITESPACE","\n    ",137],"{",["T_WHITESPACE","\n        ",138],["T_VARIABLE","$this",139],["T_OBJECT_OPERATOR","->",139],["T_STRING","joinTable",139],"(",["T_WHITESPACE","\n            ",139],["T_ARRAY","array",140],"(",["T_CONSTANT_ENCAPSED_STRING","'t_compare'",140],["T_WHITESPACE"," ",140],["T_DOUBLE_ARROW","=>",140],["T_WHITESPACE"," ",140],["T_CONSTANT_ENCAPSED_STRING","'catalog\/compare_item'",140],")",",",["T_WHITESPACE","\n            ",140],["T_CONSTANT_ENCAPSED_STRING","'product_id=entity_id'",141],",",["T_WHITESPACE","\n            ",141],["T_ARRAY","array",142],"(",["T_WHITESPACE","\n                ",142],["T_CONSTANT_ENCAPSED_STRING","'product_id'",143],["T_WHITESPACE","    ",143],["T_DOUBLE_ARROW","=>",143],["T_WHITESPACE"," ",143],["T_CONSTANT_ENCAPSED_STRING","'product_id'",143],",",["T_WHITESPACE","\n                ",143],["T_CONSTANT_ENCAPSED_STRING","'customer_id'",144],["T_WHITESPACE","   ",144],["T_DOUBLE_ARROW","=>",144],["T_WHITESPACE"," ",144],["T_CONSTANT_ENCAPSED_STRING","'customer_id'",144],",",["T_WHITESPACE","\n                ",144],["T_CONSTANT_ENCAPSED_STRING","'visitor_id'",145],["T_WHITESPACE","    ",145],["T_DOUBLE_ARROW","=>",145],["T_WHITESPACE"," ",145],["T_CONSTANT_ENCAPSED_STRING","'visitor_id'",145],",",["T_WHITESPACE","\n                ",145],["T_CONSTANT_ENCAPSED_STRING","'item_store_id'",146],["T_WHITESPACE"," ",146],["T_DOUBLE_ARROW","=>",146],["T_WHITESPACE"," ",146],["T_CONSTANT_ENCAPSED_STRING","'store_id'",146],",",["T_WHITESPACE","\n                ",146],["T_CONSTANT_ENCAPSED_STRING","'catalog_compare_item_id'",147],["T_WHITESPACE"," ",147],["T_DOUBLE_ARROW","=>",147],["T_WHITESPACE"," ",147],["T_CONSTANT_ENCAPSED_STRING","'catalog_compare_item_id'",147],["T_WHITESPACE","\n            ",147],")",",",["T_WHITESPACE","\n            ",148],["T_VARIABLE","$this",149],["T_OBJECT_OPERATOR","->",149],["T_STRING","getConditionForJoin",149],"(",")",["T_WHITESPACE","\n        ",149],")",";",["T_WHITESPACE","\n\n        ",150],["T_VARIABLE","$this",152],["T_OBJECT_OPERATOR","->",152],["T_STRING","_productLimitationFilters",152],"[",["T_CONSTANT_ENCAPSED_STRING","'store_table'",152],"]",["T_WHITESPACE","  ",152],"=",["T_WHITESPACE"," ",152],["T_CONSTANT_ENCAPSED_STRING","'t_compare'",152],";",["T_WHITESPACE","\n\n        ",152],["T_RETURN","return",154],["T_WHITESPACE"," ",154],["T_VARIABLE","$this",154],";",["T_WHITESPACE","\n    ",154],"}",["T_WHITESPACE","\n\n    ",155],["T_DOC_COMMENT","\/**\n     * Retrieve comapre products attribute set ids\n     *\n     * @return array\n     *\/",157],["T_WHITESPACE","\n    ",161],["T_PROTECTED","protected",162],["T_WHITESPACE"," ",162],["T_FUNCTION","function",162],["T_WHITESPACE"," ",162],["T_STRING","_getAttributeSetIds",162],"(",")",["T_WHITESPACE","\n    ",162],"{",["T_WHITESPACE","\n        ",163],["T_COMMENT","\/\/ prepare compare items table conditions\n",164],["T_WHITESPACE","        ",165],["T_VARIABLE","$compareConds",165],["T_WHITESPACE"," ",165],"=",["T_WHITESPACE"," ",165],["T_ARRAY","array",165],"(",["T_WHITESPACE","\n            ",165],["T_CONSTANT_ENCAPSED_STRING","'compare.product_id=entity.entity_id'",166],",",["T_WHITESPACE","\n        ",166],")",";",["T_WHITESPACE","\n        ",167],["T_IF","if",168],["T_WHITESPACE"," ",168],"(",["T_VARIABLE","$this",168],["T_OBJECT_OPERATOR","->",168],["T_STRING","getCustomerId",168],"(",")",")",["T_WHITESPACE"," ",168],"{",["T_WHITESPACE","\n            ",168],["T_VARIABLE","$compareConds",169],"[","]",["T_WHITESPACE"," ",169],"=",["T_WHITESPACE"," ",169],["T_VARIABLE","$this",169],["T_OBJECT_OPERATOR","->",169],["T_STRING","getConnection",169],"(",")",["T_WHITESPACE","\n                ",169],["T_OBJECT_OPERATOR","->",170],["T_STRING","quoteInto",170],"(",["T_CONSTANT_ENCAPSED_STRING","'compare.customer_id = ?'",170],",",["T_WHITESPACE"," ",170],["T_VARIABLE","$this",170],["T_OBJECT_OPERATOR","->",170],["T_STRING","getCustomerId",170],"(",")",")",";",["T_WHITESPACE","\n        ",170],"}",["T_WHITESPACE"," ",171],["T_ELSE","else",171],["T_WHITESPACE"," ",171],"{",["T_WHITESPACE","\n            ",171],["T_VARIABLE","$compareConds",172],"[","]",["T_WHITESPACE"," ",172],"=",["T_WHITESPACE"," ",172],["T_VARIABLE","$this",172],["T_OBJECT_OPERATOR","->",172],["T_STRING","getConnection",172],"(",")",["T_WHITESPACE","\n                ",172],["T_OBJECT_OPERATOR","->",173],["T_STRING","quoteInto",173],"(",["T_CONSTANT_ENCAPSED_STRING","'compare.visitor_id = ?'",173],",",["T_WHITESPACE"," ",173],["T_VARIABLE","$this",173],["T_OBJECT_OPERATOR","->",173],["T_STRING","getVisitorId",173],"(",")",")",";",["T_WHITESPACE","\n        ",173],"}",["T_WHITESPACE","\n\n        ",174],["T_COMMENT","\/\/ prepare website filter\n",176],["T_WHITESPACE","        ",177],["T_VARIABLE","$websiteId",177],["T_WHITESPACE","    ",177],"=",["T_WHITESPACE"," ",177],["T_INT_CAST","(int)",177],["T_STRING","Mage",177],["T_DOUBLE_COLON","::",177],["T_STRING","app",177],"(",")",["T_OBJECT_OPERATOR","->",177],["T_STRING","getStore",177],"(",["T_VARIABLE","$this",177],["T_OBJECT_OPERATOR","->",177],["T_STRING","getStoreId",177],"(",")",")",["T_OBJECT_OPERATOR","->",177],["T_STRING","getWebsiteId",177],"(",")",";",["T_WHITESPACE","\n        ",177],["T_VARIABLE","$websiteConds",178],["T_WHITESPACE"," ",178],"=",["T_WHITESPACE"," ",178],["T_ARRAY","array",178],"(",["T_WHITESPACE","\n            ",178],["T_CONSTANT_ENCAPSED_STRING","'website.product_id = entity.entity_id'",179],",",["T_WHITESPACE","\n            ",179],["T_VARIABLE","$this",180],["T_OBJECT_OPERATOR","->",180],["T_STRING","getConnection",180],"(",")",["T_OBJECT_OPERATOR","->",180],["T_STRING","quoteInto",180],"(",["T_CONSTANT_ENCAPSED_STRING","'website.website_id = ?'",180],",",["T_WHITESPACE"," ",180],["T_VARIABLE","$websiteId",180],")",["T_WHITESPACE","\n        ",180],")",";",["T_WHITESPACE","\n\n        ",181],["T_COMMENT","\/\/ retrieve attribute sets\n",183],["T_WHITESPACE","        ",184],["T_VARIABLE","$select",184],["T_WHITESPACE"," ",184],"=",["T_WHITESPACE"," ",184],["T_VARIABLE","$this",184],["T_OBJECT_OPERATOR","->",184],["T_STRING","getConnection",184],"(",")",["T_OBJECT_OPERATOR","->",184],["T_STRING","select",184],"(",")",["T_WHITESPACE","\n            ",184],["T_OBJECT_OPERATOR","->",185],["T_STRING","distinct",185],"(",["T_STRING","true",185],")",["T_WHITESPACE","\n            ",185],["T_OBJECT_OPERATOR","->",186],["T_STRING","from",186],"(",["T_WHITESPACE","\n                ",186],["T_ARRAY","array",187],"(",["T_CONSTANT_ENCAPSED_STRING","'entity'",187],["T_WHITESPACE"," ",187],["T_DOUBLE_ARROW","=>",187],["T_WHITESPACE"," ",187],["T_VARIABLE","$this",187],["T_OBJECT_OPERATOR","->",187],["T_STRING","getEntity",187],"(",")",["T_OBJECT_OPERATOR","->",187],["T_STRING","getEntityTable",187],"(",")",")",",",["T_WHITESPACE","\n                ",187],["T_CONSTANT_ENCAPSED_STRING","'attribute_set_id'",188],")",["T_WHITESPACE","\n            ",188],["T_OBJECT_OPERATOR","->",189],["T_STRING","join",189],"(",["T_WHITESPACE","\n                ",189],["T_ARRAY","array",190],"(",["T_CONSTANT_ENCAPSED_STRING","'website'",190],["T_WHITESPACE"," ",190],["T_DOUBLE_ARROW","=>",190],["T_WHITESPACE"," ",190],["T_VARIABLE","$this",190],["T_OBJECT_OPERATOR","->",190],["T_STRING","getTable",190],"(",["T_CONSTANT_ENCAPSED_STRING","'catalog\/product_website'",190],")",")",",",["T_WHITESPACE","\n                ",190],["T_STRING","join",191],"(",["T_CONSTANT_ENCAPSED_STRING","' AND '",191],",",["T_WHITESPACE"," ",191],["T_VARIABLE","$websiteConds",191],")",",",["T_WHITESPACE","\n                ",191],["T_ARRAY","array",192],"(",")",")",["T_WHITESPACE","\n            ",192],["T_OBJECT_OPERATOR","->",193],["T_STRING","join",193],"(",["T_WHITESPACE","\n                ",193],["T_ARRAY","array",194],"(",["T_CONSTANT_ENCAPSED_STRING","'compare'",194],["T_WHITESPACE"," ",194],["T_DOUBLE_ARROW","=>",194],["T_WHITESPACE"," ",194],["T_VARIABLE","$this",194],["T_OBJECT_OPERATOR","->",194],["T_STRING","getTable",194],"(",["T_CONSTANT_ENCAPSED_STRING","'catalog\/compare_item'",194],")",")",",",["T_WHITESPACE","\n                ",194],["T_STRING","join",195],"(",["T_CONSTANT_ENCAPSED_STRING","' AND '",195],",",["T_WHITESPACE"," ",195],["T_VARIABLE","$compareConds",195],")",",",["T_WHITESPACE","\n                ",195],["T_ARRAY","array",196],"(",")",["T_WHITESPACE","\n            ",196],")",";",["T_WHITESPACE","\n        ",197],["T_RETURN","return",198],["T_WHITESPACE"," ",198],["T_VARIABLE","$this",198],["T_OBJECT_OPERATOR","->",198],["T_STRING","getConnection",198],"(",")",["T_OBJECT_OPERATOR","->",198],["T_STRING","fetchCol",198],"(",["T_VARIABLE","$select",198],")",";",["T_WHITESPACE","\n    ",198],"}",["T_WHITESPACE","\n\n    ",199],["T_DOC_COMMENT","\/**\n     * Retrieve attribute ids by set ids\n     *\n     * @param array $setIds\n     * @return array\n     *\/",201],["T_WHITESPACE","\n    ",206],["T_PROTECTED","protected",207],["T_WHITESPACE"," ",207],["T_FUNCTION","function",207],["T_WHITESPACE"," ",207],["T_STRING","_getAttributeIdsBySetIds",207],"(",["T_ARRAY","array",207],["T_WHITESPACE"," ",207],["T_VARIABLE","$setIds",207],")",["T_WHITESPACE","\n    ",207],"{",["T_WHITESPACE","\n        ",208],["T_VARIABLE","$select",209],["T_WHITESPACE"," ",209],"=",["T_WHITESPACE"," ",209],["T_VARIABLE","$this",209],["T_OBJECT_OPERATOR","->",209],["T_STRING","getConnection",209],"(",")",["T_OBJECT_OPERATOR","->",209],["T_STRING","select",209],"(",")",["T_WHITESPACE","\n            ",209],["T_OBJECT_OPERATOR","->",210],["T_STRING","distinct",210],"(",["T_STRING","true",210],")",["T_WHITESPACE","\n            ",210],["T_OBJECT_OPERATOR","->",211],["T_STRING","from",211],"(",["T_VARIABLE","$this",211],["T_OBJECT_OPERATOR","->",211],["T_STRING","getTable",211],"(",["T_CONSTANT_ENCAPSED_STRING","'eav\/entity_attribute'",211],")",",",["T_WHITESPACE"," ",211],["T_CONSTANT_ENCAPSED_STRING","'attribute_id'",211],")",["T_WHITESPACE","\n            ",211],["T_OBJECT_OPERATOR","->",212],["T_STRING","where",212],"(",["T_CONSTANT_ENCAPSED_STRING","'attribute_set_id IN(?)'",212],",",["T_WHITESPACE"," ",212],["T_VARIABLE","$setIds",212],")",";",["T_WHITESPACE","\n        ",212],["T_RETURN","return",213],["T_WHITESPACE"," ",213],["T_VARIABLE","$this",213],["T_OBJECT_OPERATOR","->",213],["T_STRING","getConnection",213],"(",")",["T_OBJECT_OPERATOR","->",213],["T_STRING","fetchCol",213],"(",["T_VARIABLE","$select",213],")",";",["T_WHITESPACE","\n    ",213],"}",["T_WHITESPACE","\n\n    ",214],["T_DOC_COMMENT","\/**\n     * Retrieve Merged comparable attributes for compared product items\n     *\n     * @return array\n     *\/",216],["T_WHITESPACE","\n    ",220],["T_PUBLIC","public",221],["T_WHITESPACE"," ",221],["T_FUNCTION","function",221],["T_WHITESPACE"," ",221],["T_STRING","getComparableAttributes",221],"(",")",["T_WHITESPACE","\n    ",221],"{",["T_WHITESPACE","\n        ",222],["T_IF","if",223],["T_WHITESPACE"," ",223],"(",["T_STRING","is_null",223],"(",["T_VARIABLE","$this",223],["T_OBJECT_OPERATOR","->",223],["T_STRING","_comparableAttributes",223],")",")",["T_WHITESPACE"," ",223],"{",["T_WHITESPACE","\n            ",223],["T_VARIABLE","$this",224],["T_OBJECT_OPERATOR","->",224],["T_STRING","_comparableAttributes",224],["T_WHITESPACE"," ",224],"=",["T_WHITESPACE"," ",224],["T_ARRAY","array",224],"(",")",";",["T_WHITESPACE","\n            ",224],["T_VARIABLE","$setIds",225],["T_WHITESPACE"," ",225],"=",["T_WHITESPACE"," ",225],["T_VARIABLE","$this",225],["T_OBJECT_OPERATOR","->",225],["T_STRING","_getAttributeSetIds",225],"(",")",";",["T_WHITESPACE","\n            ",225],["T_IF","if",226],["T_WHITESPACE"," ",226],"(",["T_VARIABLE","$setIds",226],")",["T_WHITESPACE"," ",226],"{",["T_WHITESPACE","\n                ",226],["T_VARIABLE","$attributeIds",227],["T_WHITESPACE"," ",227],"=",["T_WHITESPACE"," ",227],["T_VARIABLE","$this",227],["T_OBJECT_OPERATOR","->",227],["T_STRING","_getAttributeIdsBySetIds",227],"(",["T_VARIABLE","$setIds",227],")",";",["T_WHITESPACE","\n\n                ",227],["T_VARIABLE","$select",229],["T_WHITESPACE"," ",229],"=",["T_WHITESPACE"," ",229],["T_VARIABLE","$this",229],["T_OBJECT_OPERATOR","->",229],["T_STRING","getConnection",229],"(",")",["T_OBJECT_OPERATOR","->",229],["T_STRING","select",229],"(",")",["T_WHITESPACE","\n                    ",229],["T_OBJECT_OPERATOR","->",230],["T_STRING","from",230],"(",["T_ARRAY","array",230],"(",["T_CONSTANT_ENCAPSED_STRING","'main_table'",230],["T_WHITESPACE"," ",230],["T_DOUBLE_ARROW","=>",230],["T_WHITESPACE"," ",230],["T_VARIABLE","$this",230],["T_OBJECT_OPERATOR","->",230],["T_STRING","getTable",230],"(",["T_CONSTANT_ENCAPSED_STRING","'eav\/attribute'",230],")",")",")",["T_WHITESPACE","\n                    ",230],["T_OBJECT_OPERATOR","->",231],["T_STRING","join",231],"(",["T_WHITESPACE","\n                        ",231],["T_ARRAY","array",232],"(",["T_CONSTANT_ENCAPSED_STRING","'additional_table'",232],["T_WHITESPACE"," ",232],["T_DOUBLE_ARROW","=>",232],["T_WHITESPACE"," ",232],["T_VARIABLE","$this",232],["T_OBJECT_OPERATOR","->",232],["T_STRING","getTable",232],"(",["T_CONSTANT_ENCAPSED_STRING","'catalog\/eav_attribute'",232],")",")",",",["T_WHITESPACE","\n                        ",232],["T_CONSTANT_ENCAPSED_STRING","'additional_table.attribute_id=main_table.attribute_id'",233],["T_WHITESPACE","\n                    ",233],")",["T_WHITESPACE","\n                    ",234],["T_OBJECT_OPERATOR","->",235],["T_STRING","joinLeft",235],"(",["T_WHITESPACE","\n                        ",235],["T_ARRAY","array",236],"(",["T_CONSTANT_ENCAPSED_STRING","'al'",236],["T_WHITESPACE"," ",236],["T_DOUBLE_ARROW","=>",236],["T_WHITESPACE"," ",236],["T_VARIABLE","$this",236],["T_OBJECT_OPERATOR","->",236],["T_STRING","getTable",236],"(",["T_CONSTANT_ENCAPSED_STRING","'eav\/attribute_label'",236],")",")",",",["T_WHITESPACE","\n                        ",236],["T_CONSTANT_ENCAPSED_STRING","'al.attribute_id = main_table.attribute_id AND al.store_id = '",237],["T_WHITESPACE"," ",237],".",["T_WHITESPACE"," ",237],["T_INT_CAST","(int)",237],["T_WHITESPACE"," ",237],["T_VARIABLE","$this",237],["T_OBJECT_OPERATOR","->",237],["T_STRING","getStoreId",237],"(",")",",",["T_WHITESPACE","\n                        ",237],["T_ARRAY","array",238],"(",["T_CONSTANT_ENCAPSED_STRING","'store_label'",238],["T_WHITESPACE"," ",238],["T_DOUBLE_ARROW","=>",238],["T_WHITESPACE"," ",238],["T_VARIABLE","$this",238],["T_OBJECT_OPERATOR","->",238],["T_STRING","getConnection",238],"(",")",["T_OBJECT_OPERATOR","->",238],["T_STRING","getCheckSql",238],"(",["T_CONSTANT_ENCAPSED_STRING","'al.value IS NULL'",238],",",["T_WHITESPACE"," ",238],["T_CONSTANT_ENCAPSED_STRING","'main_table.frontend_label'",238],",",["T_WHITESPACE"," ",238],["T_CONSTANT_ENCAPSED_STRING","'al.value'",238],")",")",["T_WHITESPACE","\n                    ",238],")",["T_WHITESPACE","\n                    ",239],["T_OBJECT_OPERATOR","->",240],["T_STRING","where",240],"(",["T_CONSTANT_ENCAPSED_STRING","'additional_table.is_comparable=?'",240],",",["T_WHITESPACE"," ",240],["T_LNUMBER","1",240],")",["T_WHITESPACE","\n                    ",240],["T_OBJECT_OPERATOR","->",241],["T_STRING","where",241],"(",["T_CONSTANT_ENCAPSED_STRING","'main_table.attribute_id IN(?)'",241],",",["T_WHITESPACE"," ",241],["T_VARIABLE","$attributeIds",241],")",";",["T_WHITESPACE","\n                ",241],["T_VARIABLE","$attributesData",242],["T_WHITESPACE"," ",242],"=",["T_WHITESPACE"," ",242],["T_VARIABLE","$this",242],["T_OBJECT_OPERATOR","->",242],["T_STRING","getConnection",242],"(",")",["T_OBJECT_OPERATOR","->",242],["T_STRING","fetchAll",242],"(",["T_VARIABLE","$select",242],")",";",["T_WHITESPACE","\n                ",242],["T_IF","if",243],["T_WHITESPACE"," ",243],"(",["T_VARIABLE","$attributesData",243],")",["T_WHITESPACE"," ",243],"{",["T_WHITESPACE","\n                    ",243],["T_VARIABLE","$entityType",244],["T_WHITESPACE"," ",244],"=",["T_WHITESPACE"," ",244],["T_STRING","Mage_Catalog_Model_Product",244],["T_DOUBLE_COLON","::",244],["T_STRING","ENTITY",244],";",["T_WHITESPACE","\n                    ",244],["T_STRING","Mage",245],["T_DOUBLE_COLON","::",245],["T_STRING","getSingleton",245],"(",["T_CONSTANT_ENCAPSED_STRING","'eav\/config'",245],")",["T_WHITESPACE","\n                        ",245],["T_OBJECT_OPERATOR","->",246],["T_STRING","importAttributesData",246],"(",["T_VARIABLE","$entityType",246],",",["T_WHITESPACE"," ",246],["T_VARIABLE","$attributesData",246],")",";",["T_WHITESPACE","\n                    ",246],["T_FOREACH","foreach",247],["T_WHITESPACE"," ",247],"(",["T_VARIABLE","$attributesData",247],["T_WHITESPACE"," ",247],["T_AS","as",247],["T_WHITESPACE"," ",247],["T_VARIABLE","$data",247],")",["T_WHITESPACE"," ",247],"{",["T_WHITESPACE","\n                        ",247],["T_VARIABLE","$attribute",248],["T_WHITESPACE"," ",248],"=",["T_WHITESPACE"," ",248],["T_STRING","Mage",248],["T_DOUBLE_COLON","::",248],["T_STRING","getSingleton",248],"(",["T_CONSTANT_ENCAPSED_STRING","'eav\/config'",248],")",["T_WHITESPACE","\n                            ",248],["T_OBJECT_OPERATOR","->",249],["T_STRING","getAttribute",249],"(",["T_VARIABLE","$entityType",249],",",["T_WHITESPACE"," ",249],["T_VARIABLE","$data",249],"[",["T_CONSTANT_ENCAPSED_STRING","'attribute_code'",249],"]",")",";",["T_WHITESPACE","\n                        ",249],["T_VARIABLE","$this",250],["T_OBJECT_OPERATOR","->",250],["T_STRING","_comparableAttributes",250],"[",["T_VARIABLE","$attribute",250],["T_OBJECT_OPERATOR","->",250],["T_STRING","getAttributeCode",250],"(",")","]",["T_WHITESPACE"," ",250],"=",["T_WHITESPACE"," ",250],["T_VARIABLE","$attribute",250],";",["T_WHITESPACE","\n                    ",250],"}",["T_WHITESPACE","\n                    ",251],["T_UNSET","unset",252],"(",["T_VARIABLE","$attributesData",252],")",";",["T_WHITESPACE","\n                ",252],"}",["T_WHITESPACE","\n            ",253],"}",["T_WHITESPACE","\n        ",254],"}",["T_WHITESPACE","\n        ",255],["T_RETURN","return",256],["T_WHITESPACE"," ",256],["T_VARIABLE","$this",256],["T_OBJECT_OPERATOR","->",256],["T_STRING","_comparableAttributes",256],";",["T_WHITESPACE","\n    ",256],"}",["T_WHITESPACE","\n\n    ",257],["T_DOC_COMMENT","\/**\n     * Load Comparable attributes\n     *\n     * @return Mage_Catalog_Model_Resource_Product_Compare_Item_Collection\n     *\/",259],["T_WHITESPACE","\n    ",263],["T_PUBLIC","public",264],["T_WHITESPACE"," ",264],["T_FUNCTION","function",264],["T_WHITESPACE"," ",264],["T_STRING","loadComparableAttributes",264],"(",")",["T_WHITESPACE","\n    ",264],"{",["T_WHITESPACE","\n        ",265],["T_VARIABLE","$comparableAttributes",266],["T_WHITESPACE"," ",266],"=",["T_WHITESPACE"," ",266],["T_VARIABLE","$this",266],["T_OBJECT_OPERATOR","->",266],["T_STRING","getComparableAttributes",266],"(",")",";",["T_WHITESPACE","\n        ",266],["T_VARIABLE","$attributes",267],["T_WHITESPACE"," ",267],"=",["T_WHITESPACE"," ",267],["T_ARRAY","array",267],"(",")",";",["T_WHITESPACE","\n        ",267],["T_FOREACH","foreach",268],["T_WHITESPACE"," ",268],"(",["T_VARIABLE","$comparableAttributes",268],["T_WHITESPACE"," ",268],["T_AS","as",268],["T_WHITESPACE"," ",268],["T_VARIABLE","$attribute",268],")",["T_WHITESPACE"," ",268],"{",["T_WHITESPACE","\n            ",268],["T_VARIABLE","$attributes",269],"[","]",["T_WHITESPACE"," ",269],"=",["T_WHITESPACE"," ",269],["T_VARIABLE","$attribute",269],["T_OBJECT_OPERATOR","->",269],["T_STRING","getAttributeCode",269],"(",")",";",["T_WHITESPACE","\n        ",269],"}",["T_WHITESPACE","\n        ",270],["T_VARIABLE","$this",271],["T_OBJECT_OPERATOR","->",271],["T_STRING","addAttributeToSelect",271],"(",["T_VARIABLE","$attributes",271],")",";",["T_WHITESPACE","\n\n        ",271],["T_RETURN","return",273],["T_WHITESPACE"," ",273],["T_VARIABLE","$this",273],";",["T_WHITESPACE","\n    ",273],"}",["T_WHITESPACE","\n\n    ",274],["T_DOC_COMMENT","\/**\n     * Use product as collection item\n     *\n     * @return Mage_Catalog_Model_Resource_Product_Compare_Item_Collection\n     *\/",276],["T_WHITESPACE","\n    ",280],["T_PUBLIC","public",281],["T_WHITESPACE"," ",281],["T_FUNCTION","function",281],["T_WHITESPACE"," ",281],["T_STRING","useProductItem",281],"(",")",["T_WHITESPACE","\n    ",281],"{",["T_WHITESPACE","\n        ",282],["T_VARIABLE","$this",283],["T_OBJECT_OPERATOR","->",283],["T_STRING","setObject",283],"(",["T_CONSTANT_ENCAPSED_STRING","'catalog\/product'",283],")",";",["T_WHITESPACE","\n\n        ",283],["T_VARIABLE","$this",285],["T_OBJECT_OPERATOR","->",285],["T_STRING","setFlag",285],"(",["T_CONSTANT_ENCAPSED_STRING","'url_data_object'",285],",",["T_WHITESPACE"," ",285],["T_STRING","true",285],")",";",["T_WHITESPACE","\n        ",285],["T_VARIABLE","$this",286],["T_OBJECT_OPERATOR","->",286],["T_STRING","setFlag",286],"(",["T_CONSTANT_ENCAPSED_STRING","'do_not_use_category_id'",286],",",["T_WHITESPACE"," ",286],["T_STRING","true",286],")",";",["T_WHITESPACE","\n\n        ",286],["T_RETURN","return",288],["T_WHITESPACE"," ",288],["T_VARIABLE","$this",288],";",["T_WHITESPACE","\n    ",288],"}",["T_WHITESPACE","\n\n    ",289],["T_DOC_COMMENT","\/**\n     * Retrieve product ids from collection\n     *\n     * @return array\n     *\/",291],["T_WHITESPACE","\n    ",295],["T_PUBLIC","public",296],["T_WHITESPACE"," ",296],["T_FUNCTION","function",296],["T_WHITESPACE"," ",296],["T_STRING","getProductIds",296],"(",")",["T_WHITESPACE","\n    ",296],"{",["T_WHITESPACE","\n        ",297],["T_VARIABLE","$ids",298],["T_WHITESPACE"," ",298],"=",["T_WHITESPACE"," ",298],["T_ARRAY","array",298],"(",")",";",["T_WHITESPACE","\n        ",298],["T_FOREACH","foreach",299],["T_WHITESPACE"," ",299],"(",["T_VARIABLE","$this",299],["T_OBJECT_OPERATOR","->",299],["T_STRING","getItems",299],"(",")",["T_WHITESPACE"," ",299],["T_AS","as",299],["T_WHITESPACE"," ",299],["T_VARIABLE","$item",299],")",["T_WHITESPACE"," ",299],"{",["T_WHITESPACE","\n            ",299],["T_VARIABLE","$ids",300],"[","]",["T_WHITESPACE"," ",300],"=",["T_WHITESPACE"," ",300],["T_VARIABLE","$item",300],["T_OBJECT_OPERATOR","->",300],["T_STRING","getProductId",300],"(",")",";",["T_WHITESPACE","\n        ",300],"}",["T_WHITESPACE","\n\n        ",301],["T_RETURN","return",303],["T_WHITESPACE"," ",303],["T_VARIABLE","$ids",303],";",["T_WHITESPACE","\n    ",303],"}",["T_WHITESPACE","\n\n    ",304],["T_DOC_COMMENT","\/**\n     * Clear compare items by condition\n     *\n     * @return Mage_Catalog_Model_Resource_Product_Compare_Item_Collection\n     *\/",306],["T_WHITESPACE","\n    ",310],["T_PUBLIC","public",311],["T_WHITESPACE"," ",311],["T_FUNCTION","function",311],["T_WHITESPACE"," ",311],["T_STRING","clear",311],"(",")",["T_WHITESPACE","\n    ",311],"{",["T_WHITESPACE","\n        ",312],["T_STRING","Mage",313],["T_DOUBLE_COLON","::",313],["T_STRING","getResourceSingleton",313],"(",["T_CONSTANT_ENCAPSED_STRING","'catalog\/product_compare_item'",313],")",["T_WHITESPACE","\n            ",313],["T_OBJECT_OPERATOR","->",314],["T_STRING","clearItems",314],"(",["T_VARIABLE","$this",314],["T_OBJECT_OPERATOR","->",314],["T_STRING","getVisitorId",314],"(",")",",",["T_WHITESPACE"," ",314],["T_VARIABLE","$this",314],["T_OBJECT_OPERATOR","->",314],["T_STRING","getCustomerId",314],"(",")",")",";",["T_WHITESPACE","\n        ",314],["T_STRING","Mage",315],["T_DOUBLE_COLON","::",315],["T_STRING","dispatchEvent",315],"(",["T_CONSTANT_ENCAPSED_STRING","'catalog_product_compare_item_collection_clear'",315],")",";",["T_WHITESPACE","\n\n        ",315],["T_RETURN","return",317],["T_WHITESPACE"," ",317],["T_VARIABLE","$this",317],";",["T_WHITESPACE","\n    ",317],"}",["T_WHITESPACE","\n\n    ",318],["T_DOC_COMMENT","\/**\n     * Retrieve is flat enabled flag\n     * Overwrite disable flat for compared item if required EAV resource\n     *\n     * @return bool\n     *\/",320],["T_WHITESPACE","\n    ",325],["T_PUBLIC","public",326],["T_WHITESPACE"," ",326],["T_FUNCTION","function",326],["T_WHITESPACE"," ",326],["T_STRING","isEnabledFlat",326],"(",")",["T_WHITESPACE","\n    ",326],"{",["T_WHITESPACE","\n        ",327],["T_IF","if",328],["T_WHITESPACE"," ",328],"(","!",["T_STRING","Mage",328],["T_DOUBLE_COLON","::",328],["T_STRING","helper",328],"(",["T_CONSTANT_ENCAPSED_STRING","'catalog\/product_compare'",328],")",["T_OBJECT_OPERATOR","->",328],["T_STRING","getAllowUsedFlat",328],"(",")",")",["T_WHITESPACE"," ",328],"{",["T_WHITESPACE","\n            ",328],["T_RETURN","return",329],["T_WHITESPACE"," ",329],["T_STRING","false",329],";",["T_WHITESPACE","\n        ",329],"}",["T_WHITESPACE","\n        ",330],["T_RETURN","return",331],["T_WHITESPACE"," ",331],["T_STRING","parent",331],["T_DOUBLE_COLON","::",331],["T_STRING","isEnabledFlat",331],"(",")",";",["T_WHITESPACE","\n    ",331],"}",["T_WHITESPACE","\n",332],"}",["T_WHITESPACE","\n",333]]
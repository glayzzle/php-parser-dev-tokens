[["T_OPEN_TAG","<?php\n",1],["T_DOC_COMMENT","\/**\n * Magento\n *\n * NOTICE OF LICENSE\n *\n * This source file is subject to the Open Software License (OSL 3.0)\n * that is bundled with this package in the file LICENSE.txt.\n * It is also available through the world-wide-web at this URL:\n * http:\/\/opensource.org\/licenses\/osl-3.0.php\n * If you did not receive a copy of the license and are unable to\n * obtain it through the world-wide-web, please send an email\n * to license@magento.com so we can send you a copy immediately.\n *\n * DISCLAIMER\n *\n * Do not edit or add to this file if you wish to upgrade Magento to newer\n * versions in the future. If you wish to customize Magento for your\n * needs please refer to http:\/\/www.magento.com for more information.\n *\n * @category    Mage\n * @package     Mage_Catalog\n * @copyright  Copyright (c) 2006-2016 X.commerce, Inc. and affiliates (http:\/\/www.magento.com)\n * @license    http:\/\/opensource.org\/licenses\/osl-3.0.php  Open Software License (OSL 3.0)\n *\/",2],["T_WHITESPACE","\n\n",25],["T_DOC_COMMENT","\/**\n * Catalog product api\n *\n * @category   Mage\n * @package    Mage_Catalog\n * @author     Magento Core Team <core@magentocommerce.com>\n *\/",27],["T_WHITESPACE","\n",33],["T_CLASS","class",34],["T_WHITESPACE"," ",34],["T_STRING","Mage_Catalog_Model_Product_Api",34],["T_WHITESPACE"," ",34],["T_EXTENDS","extends",34],["T_WHITESPACE"," ",34],["T_STRING","Mage_Catalog_Model_Api_Resource",34],["T_WHITESPACE","\n",34],"{",["T_WHITESPACE","\n    ",35],["T_PROTECTED","protected",36],["T_WHITESPACE"," ",36],["T_VARIABLE","$_filtersMap",36],["T_WHITESPACE"," ",36],"=",["T_WHITESPACE"," ",36],["T_ARRAY","array",36],"(",["T_WHITESPACE","\n        ",36],["T_CONSTANT_ENCAPSED_STRING","'product_id'",37],["T_WHITESPACE"," ",37],["T_DOUBLE_ARROW","=>",37],["T_WHITESPACE"," ",37],["T_CONSTANT_ENCAPSED_STRING","'entity_id'",37],",",["T_WHITESPACE","\n        ",37],["T_CONSTANT_ENCAPSED_STRING","'set'",38],["T_WHITESPACE","        ",38],["T_DOUBLE_ARROW","=>",38],["T_WHITESPACE"," ",38],["T_CONSTANT_ENCAPSED_STRING","'attribute_set_id'",38],",",["T_WHITESPACE","\n        ",38],["T_CONSTANT_ENCAPSED_STRING","'type'",39],["T_WHITESPACE","       ",39],["T_DOUBLE_ARROW","=>",39],["T_WHITESPACE"," ",39],["T_CONSTANT_ENCAPSED_STRING","'type_id'",39],["T_WHITESPACE","\n    ",39],")",";",["T_WHITESPACE","\n\n    ",40],["T_PROTECTED","protected",42],["T_WHITESPACE"," ",42],["T_VARIABLE","$_defaultProductAttributeList",42],["T_WHITESPACE"," ",42],"=",["T_WHITESPACE"," ",42],["T_ARRAY","array",42],"(",["T_WHITESPACE","\n        ",42],["T_CONSTANT_ENCAPSED_STRING","'type_id'",43],",",["T_WHITESPACE","\n        ",43],["T_CONSTANT_ENCAPSED_STRING","'category_ids'",44],",",["T_WHITESPACE","\n        ",44],["T_CONSTANT_ENCAPSED_STRING","'website_ids'",45],",",["T_WHITESPACE","\n        ",45],["T_CONSTANT_ENCAPSED_STRING","'name'",46],",",["T_WHITESPACE","\n        ",46],["T_CONSTANT_ENCAPSED_STRING","'description'",47],",",["T_WHITESPACE","\n        ",47],["T_CONSTANT_ENCAPSED_STRING","'short_description'",48],",",["T_WHITESPACE","\n        ",48],["T_CONSTANT_ENCAPSED_STRING","'sku'",49],",",["T_WHITESPACE","\n        ",49],["T_CONSTANT_ENCAPSED_STRING","'weight'",50],",",["T_WHITESPACE","\n        ",50],["T_CONSTANT_ENCAPSED_STRING","'status'",51],",",["T_WHITESPACE","\n        ",51],["T_CONSTANT_ENCAPSED_STRING","'url_key'",52],",",["T_WHITESPACE","\n        ",52],["T_CONSTANT_ENCAPSED_STRING","'url_path'",53],",",["T_WHITESPACE","\n        ",53],["T_CONSTANT_ENCAPSED_STRING","'visibility'",54],",",["T_WHITESPACE","\n        ",54],["T_CONSTANT_ENCAPSED_STRING","'has_options'",55],",",["T_WHITESPACE","\n        ",55],["T_CONSTANT_ENCAPSED_STRING","'gift_message_available'",56],",",["T_WHITESPACE","\n        ",56],["T_CONSTANT_ENCAPSED_STRING","'price'",57],",",["T_WHITESPACE","\n        ",57],["T_CONSTANT_ENCAPSED_STRING","'special_price'",58],",",["T_WHITESPACE","\n        ",58],["T_CONSTANT_ENCAPSED_STRING","'special_from_date'",59],",",["T_WHITESPACE","\n        ",59],["T_CONSTANT_ENCAPSED_STRING","'special_to_date'",60],",",["T_WHITESPACE","\n        ",60],["T_CONSTANT_ENCAPSED_STRING","'tax_class_id'",61],",",["T_WHITESPACE","\n        ",61],["T_CONSTANT_ENCAPSED_STRING","'tier_price'",62],",",["T_WHITESPACE","\n        ",62],["T_CONSTANT_ENCAPSED_STRING","'meta_title'",63],",",["T_WHITESPACE","\n        ",63],["T_CONSTANT_ENCAPSED_STRING","'meta_keyword'",64],",",["T_WHITESPACE","\n        ",64],["T_CONSTANT_ENCAPSED_STRING","'meta_description'",65],",",["T_WHITESPACE","\n        ",65],["T_CONSTANT_ENCAPSED_STRING","'custom_design'",66],",",["T_WHITESPACE","\n        ",66],["T_CONSTANT_ENCAPSED_STRING","'custom_layout_update'",67],",",["T_WHITESPACE","\n        ",67],["T_CONSTANT_ENCAPSED_STRING","'options_container'",68],",",["T_WHITESPACE","\n        ",68],["T_CONSTANT_ENCAPSED_STRING","'image_label'",69],",",["T_WHITESPACE","\n        ",69],["T_CONSTANT_ENCAPSED_STRING","'small_image_label'",70],",",["T_WHITESPACE","\n        ",70],["T_CONSTANT_ENCAPSED_STRING","'thumbnail_label'",71],",",["T_WHITESPACE","\n        ",71],["T_CONSTANT_ENCAPSED_STRING","'created_at'",72],",",["T_WHITESPACE","\n        ",72],["T_CONSTANT_ENCAPSED_STRING","'updated_at'",73],["T_WHITESPACE","\n    ",73],")",";",["T_WHITESPACE","\n\n    ",74],["T_PUBLIC","public",76],["T_WHITESPACE"," ",76],["T_FUNCTION","function",76],["T_WHITESPACE"," ",76],["T_STRING","__construct",76],"(",")",["T_WHITESPACE","\n    ",76],"{",["T_WHITESPACE","\n        ",77],["T_VARIABLE","$this",78],["T_OBJECT_OPERATOR","->",78],["T_STRING","_storeIdSessionField",78],["T_WHITESPACE"," ",78],"=",["T_WHITESPACE"," ",78],["T_CONSTANT_ENCAPSED_STRING","'product_store_id'",78],";",["T_WHITESPACE","\n        ",78],["T_VARIABLE","$this",79],["T_OBJECT_OPERATOR","->",79],["T_STRING","_ignoredAttributeTypes",79],"[","]",["T_WHITESPACE"," ",79],"=",["T_WHITESPACE"," ",79],["T_CONSTANT_ENCAPSED_STRING","'gallery'",79],";",["T_WHITESPACE","\n        ",79],["T_VARIABLE","$this",80],["T_OBJECT_OPERATOR","->",80],["T_STRING","_ignoredAttributeTypes",80],"[","]",["T_WHITESPACE"," ",80],"=",["T_WHITESPACE"," ",80],["T_CONSTANT_ENCAPSED_STRING","'media_image'",80],";",["T_WHITESPACE","\n    ",80],"}",["T_WHITESPACE","\n\n    ",81],["T_DOC_COMMENT","\/**\n     * Retrieve list of products with basic info (id, sku, type, set, name)\n     *\n     * @param null|object|array $filters\n     * @param string|int $store\n     * @return array\n     *\/",83],["T_WHITESPACE","\n    ",89],["T_PUBLIC","public",90],["T_WHITESPACE"," ",90],["T_FUNCTION","function",90],["T_WHITESPACE"," ",90],["T_STRING","items",90],"(",["T_VARIABLE","$filters",90],["T_WHITESPACE"," ",90],"=",["T_WHITESPACE"," ",90],["T_STRING","null",90],",",["T_WHITESPACE"," ",90],["T_VARIABLE","$store",90],["T_WHITESPACE"," ",90],"=",["T_WHITESPACE"," ",90],["T_STRING","null",90],")",["T_WHITESPACE","\n    ",90],"{",["T_WHITESPACE","\n        ",91],["T_VARIABLE","$collection",92],["T_WHITESPACE"," ",92],"=",["T_WHITESPACE"," ",92],["T_STRING","Mage",92],["T_DOUBLE_COLON","::",92],["T_STRING","getModel",92],"(",["T_CONSTANT_ENCAPSED_STRING","'catalog\/product'",92],")",["T_OBJECT_OPERATOR","->",92],["T_STRING","getCollection",92],"(",")",["T_WHITESPACE","\n            ",92],["T_OBJECT_OPERATOR","->",93],["T_STRING","addStoreFilter",93],"(",["T_VARIABLE","$this",93],["T_OBJECT_OPERATOR","->",93],["T_STRING","_getStoreId",93],"(",["T_VARIABLE","$store",93],")",")",["T_WHITESPACE","\n            ",93],["T_OBJECT_OPERATOR","->",94],["T_STRING","addAttributeToSelect",94],"(",["T_CONSTANT_ENCAPSED_STRING","'name'",94],")",";",["T_WHITESPACE","\n\n        ",94],["T_DOC_COMMENT","\/** @var $apiHelper Mage_Api_Helper_Data *\/",96],["T_WHITESPACE","\n        ",96],["T_VARIABLE","$apiHelper",97],["T_WHITESPACE"," ",97],"=",["T_WHITESPACE"," ",97],["T_STRING","Mage",97],["T_DOUBLE_COLON","::",97],["T_STRING","helper",97],"(",["T_CONSTANT_ENCAPSED_STRING","'api'",97],")",";",["T_WHITESPACE","\n        ",97],["T_VARIABLE","$filters",98],["T_WHITESPACE"," ",98],"=",["T_WHITESPACE"," ",98],["T_VARIABLE","$apiHelper",98],["T_OBJECT_OPERATOR","->",98],["T_STRING","parseFilters",98],"(",["T_VARIABLE","$filters",98],",",["T_WHITESPACE"," ",98],["T_VARIABLE","$this",98],["T_OBJECT_OPERATOR","->",98],["T_STRING","_filtersMap",98],")",";",["T_WHITESPACE","\n        ",98],["T_TRY","try",99],["T_WHITESPACE"," ",99],"{",["T_WHITESPACE","\n            ",99],["T_FOREACH","foreach",100],["T_WHITESPACE"," ",100],"(",["T_VARIABLE","$filters",100],["T_WHITESPACE"," ",100],["T_AS","as",100],["T_WHITESPACE"," ",100],["T_VARIABLE","$field",100],["T_WHITESPACE"," ",100],["T_DOUBLE_ARROW","=>",100],["T_WHITESPACE"," ",100],["T_VARIABLE","$value",100],")",["T_WHITESPACE"," ",100],"{",["T_WHITESPACE","\n                ",100],["T_VARIABLE","$collection",101],["T_OBJECT_OPERATOR","->",101],["T_STRING","addFieldToFilter",101],"(",["T_VARIABLE","$field",101],",",["T_WHITESPACE"," ",101],["T_VARIABLE","$value",101],")",";",["T_WHITESPACE","\n            ",101],"}",["T_WHITESPACE","\n        ",102],"}",["T_WHITESPACE"," ",103],["T_CATCH","catch",103],["T_WHITESPACE"," ",103],"(",["T_STRING","Mage_Core_Exception",103],["T_WHITESPACE"," ",103],["T_VARIABLE","$e",103],")",["T_WHITESPACE"," ",103],"{",["T_WHITESPACE","\n            ",103],["T_VARIABLE","$this",104],["T_OBJECT_OPERATOR","->",104],["T_STRING","_fault",104],"(",["T_CONSTANT_ENCAPSED_STRING","'filters_invalid'",104],",",["T_WHITESPACE"," ",104],["T_VARIABLE","$e",104],["T_OBJECT_OPERATOR","->",104],["T_STRING","getMessage",104],"(",")",")",";",["T_WHITESPACE","\n        ",104],"}",["T_WHITESPACE","\n        ",105],["T_VARIABLE","$result",106],["T_WHITESPACE"," ",106],"=",["T_WHITESPACE"," ",106],["T_ARRAY","array",106],"(",")",";",["T_WHITESPACE","\n        ",106],["T_FOREACH","foreach",107],["T_WHITESPACE"," ",107],"(",["T_VARIABLE","$collection",107],["T_WHITESPACE"," ",107],["T_AS","as",107],["T_WHITESPACE"," ",107],["T_VARIABLE","$product",107],")",["T_WHITESPACE"," ",107],"{",["T_WHITESPACE","\n            ",107],["T_VARIABLE","$result",108],"[","]",["T_WHITESPACE"," ",108],"=",["T_WHITESPACE"," ",108],["T_ARRAY","array",108],"(",["T_WHITESPACE","\n                ",108],["T_CONSTANT_ENCAPSED_STRING","'product_id'",109],["T_WHITESPACE"," ",109],["T_DOUBLE_ARROW","=>",109],["T_WHITESPACE"," ",109],["T_VARIABLE","$product",109],["T_OBJECT_OPERATOR","->",109],["T_STRING","getId",109],"(",")",",",["T_WHITESPACE","\n                ",109],["T_CONSTANT_ENCAPSED_STRING","'sku'",110],["T_WHITESPACE","        ",110],["T_DOUBLE_ARROW","=>",110],["T_WHITESPACE"," ",110],["T_VARIABLE","$product",110],["T_OBJECT_OPERATOR","->",110],["T_STRING","getSku",110],"(",")",",",["T_WHITESPACE","\n                ",110],["T_CONSTANT_ENCAPSED_STRING","'name'",111],["T_WHITESPACE","       ",111],["T_DOUBLE_ARROW","=>",111],["T_WHITESPACE"," ",111],["T_VARIABLE","$product",111],["T_OBJECT_OPERATOR","->",111],["T_STRING","getName",111],"(",")",",",["T_WHITESPACE","\n                ",111],["T_CONSTANT_ENCAPSED_STRING","'set'",112],["T_WHITESPACE","        ",112],["T_DOUBLE_ARROW","=>",112],["T_WHITESPACE"," ",112],["T_VARIABLE","$product",112],["T_OBJECT_OPERATOR","->",112],["T_STRING","getAttributeSetId",112],"(",")",",",["T_WHITESPACE","\n                ",112],["T_CONSTANT_ENCAPSED_STRING","'type'",113],["T_WHITESPACE","       ",113],["T_DOUBLE_ARROW","=>",113],["T_WHITESPACE"," ",113],["T_VARIABLE","$product",113],["T_OBJECT_OPERATOR","->",113],["T_STRING","getTypeId",113],"(",")",",",["T_WHITESPACE","\n                ",113],["T_CONSTANT_ENCAPSED_STRING","'category_ids'",114],["T_WHITESPACE"," ",114],["T_DOUBLE_ARROW","=>",114],["T_WHITESPACE"," ",114],["T_VARIABLE","$product",114],["T_OBJECT_OPERATOR","->",114],["T_STRING","getCategoryIds",114],"(",")",",",["T_WHITESPACE","\n                ",114],["T_CONSTANT_ENCAPSED_STRING","'website_ids'",115],["T_WHITESPACE","  ",115],["T_DOUBLE_ARROW","=>",115],["T_WHITESPACE"," ",115],["T_VARIABLE","$product",115],["T_OBJECT_OPERATOR","->",115],["T_STRING","getWebsiteIds",115],"(",")",["T_WHITESPACE","\n            ",115],")",";",["T_WHITESPACE","\n        ",116],"}",["T_WHITESPACE","\n        ",117],["T_RETURN","return",118],["T_WHITESPACE"," ",118],["T_VARIABLE","$result",118],";",["T_WHITESPACE","\n    ",118],"}",["T_WHITESPACE","\n\n    ",119],["T_DOC_COMMENT","\/**\n     * Retrieve product info\n     *\n     * @param int|string $productId\n     * @param string|int $store\n     * @param array      $attributes\n     * @param string     $identifierType\n     * @return array\n     *\/",121],["T_WHITESPACE","\n    ",129],["T_PUBLIC","public",130],["T_WHITESPACE"," ",130],["T_FUNCTION","function",130],["T_WHITESPACE"," ",130],["T_STRING","info",130],"(",["T_VARIABLE","$productId",130],",",["T_WHITESPACE"," ",130],["T_VARIABLE","$store",130],["T_WHITESPACE"," ",130],"=",["T_WHITESPACE"," ",130],["T_STRING","null",130],",",["T_WHITESPACE"," ",130],["T_VARIABLE","$attributes",130],["T_WHITESPACE"," ",130],"=",["T_WHITESPACE"," ",130],["T_STRING","null",130],",",["T_WHITESPACE"," ",130],["T_VARIABLE","$identifierType",130],["T_WHITESPACE"," ",130],"=",["T_WHITESPACE"," ",130],["T_STRING","null",130],")",["T_WHITESPACE","\n    ",130],"{",["T_WHITESPACE","\n        ",131],["T_COMMENT","\/\/ make sku flag case-insensitive\n",132],["T_WHITESPACE","        ",133],["T_IF","if",133],["T_WHITESPACE"," ",133],"(","!",["T_EMPTY","empty",133],"(",["T_VARIABLE","$identifierType",133],")",")",["T_WHITESPACE"," ",133],"{",["T_WHITESPACE","\n            ",133],["T_VARIABLE","$identifierType",134],["T_WHITESPACE"," ",134],"=",["T_WHITESPACE"," ",134],["T_STRING","strtolower",134],"(",["T_VARIABLE","$identifierType",134],")",";",["T_WHITESPACE","\n        ",134],"}",["T_WHITESPACE","\n\n        ",135],["T_VARIABLE","$product",137],["T_WHITESPACE"," ",137],"=",["T_WHITESPACE"," ",137],["T_VARIABLE","$this",137],["T_OBJECT_OPERATOR","->",137],["T_STRING","_getProduct",137],"(",["T_VARIABLE","$productId",137],",",["T_WHITESPACE"," ",137],["T_VARIABLE","$store",137],",",["T_WHITESPACE"," ",137],["T_VARIABLE","$identifierType",137],")",";",["T_WHITESPACE","\n\n        ",137],["T_VARIABLE","$result",139],["T_WHITESPACE"," ",139],"=",["T_WHITESPACE"," ",139],["T_ARRAY","array",139],"(",["T_WHITESPACE"," ",139],["T_COMMENT","\/\/ Basic product data\n",139],["T_WHITESPACE","            ",140],["T_CONSTANT_ENCAPSED_STRING","'product_id'",140],["T_WHITESPACE"," ",140],["T_DOUBLE_ARROW","=>",140],["T_WHITESPACE"," ",140],["T_VARIABLE","$product",140],["T_OBJECT_OPERATOR","->",140],["T_STRING","getId",140],"(",")",",",["T_WHITESPACE","\n            ",140],["T_CONSTANT_ENCAPSED_STRING","'sku'",141],["T_WHITESPACE","        ",141],["T_DOUBLE_ARROW","=>",141],["T_WHITESPACE"," ",141],["T_VARIABLE","$product",141],["T_OBJECT_OPERATOR","->",141],["T_STRING","getSku",141],"(",")",",",["T_WHITESPACE","\n            ",141],["T_CONSTANT_ENCAPSED_STRING","'set'",142],["T_WHITESPACE","        ",142],["T_DOUBLE_ARROW","=>",142],["T_WHITESPACE"," ",142],["T_VARIABLE","$product",142],["T_OBJECT_OPERATOR","->",142],["T_STRING","getAttributeSetId",142],"(",")",",",["T_WHITESPACE","\n            ",142],["T_CONSTANT_ENCAPSED_STRING","'type'",143],["T_WHITESPACE","       ",143],["T_DOUBLE_ARROW","=>",143],["T_WHITESPACE"," ",143],["T_VARIABLE","$product",143],["T_OBJECT_OPERATOR","->",143],["T_STRING","getTypeId",143],"(",")",",",["T_WHITESPACE","\n            ",143],["T_CONSTANT_ENCAPSED_STRING","'categories'",144],["T_WHITESPACE"," ",144],["T_DOUBLE_ARROW","=>",144],["T_WHITESPACE"," ",144],["T_VARIABLE","$product",144],["T_OBJECT_OPERATOR","->",144],["T_STRING","getCategoryIds",144],"(",")",",",["T_WHITESPACE","\n            ",144],["T_CONSTANT_ENCAPSED_STRING","'websites'",145],["T_WHITESPACE","   ",145],["T_DOUBLE_ARROW","=>",145],["T_WHITESPACE"," ",145],["T_VARIABLE","$product",145],["T_OBJECT_OPERATOR","->",145],["T_STRING","getWebsiteIds",145],"(",")",["T_WHITESPACE","\n        ",145],")",";",["T_WHITESPACE","\n\n        ",146],["T_FOREACH","foreach",148],["T_WHITESPACE"," ",148],"(",["T_VARIABLE","$product",148],["T_OBJECT_OPERATOR","->",148],["T_STRING","getTypeInstance",148],"(",["T_STRING","true",148],")",["T_OBJECT_OPERATOR","->",148],["T_STRING","getEditableAttributes",148],"(",["T_VARIABLE","$product",148],")",["T_WHITESPACE"," ",148],["T_AS","as",148],["T_WHITESPACE"," ",148],["T_VARIABLE","$attribute",148],")",["T_WHITESPACE"," ",148],"{",["T_WHITESPACE","\n            ",148],["T_IF","if",149],["T_WHITESPACE"," ",149],"(",["T_VARIABLE","$this",149],["T_OBJECT_OPERATOR","->",149],["T_STRING","_isAllowedAttribute",149],"(",["T_VARIABLE","$attribute",149],",",["T_WHITESPACE"," ",149],["T_VARIABLE","$attributes",149],")",")",["T_WHITESPACE"," ",149],"{",["T_WHITESPACE","\n                ",149],["T_VARIABLE","$result",150],"[",["T_VARIABLE","$attribute",150],["T_OBJECT_OPERATOR","->",150],["T_STRING","getAttributeCode",150],"(",")","]",["T_WHITESPACE"," ",150],"=",["T_WHITESPACE"," ",150],["T_VARIABLE","$product",150],["T_OBJECT_OPERATOR","->",150],["T_STRING","getData",150],"(",["T_WHITESPACE","\n                                                                ",150],["T_VARIABLE","$attribute",151],["T_OBJECT_OPERATOR","->",151],["T_STRING","getAttributeCode",151],"(",")",")",";",["T_WHITESPACE","\n            ",151],"}",["T_WHITESPACE","\n        ",152],"}",["T_WHITESPACE","\n\n        ",153],["T_RETURN","return",155],["T_WHITESPACE"," ",155],["T_VARIABLE","$result",155],";",["T_WHITESPACE","\n    ",155],"}",["T_WHITESPACE","\n\n    ",156],["T_DOC_COMMENT","\/**\n     * Create new product.\n     *\n     * @param string $type\n     * @param int $set\n     * @param string $sku\n     * @param array $productData\n     * @param string $store\n     * @return int\n     *\/",158],["T_WHITESPACE","\n    ",167],["T_PUBLIC","public",168],["T_WHITESPACE"," ",168],["T_FUNCTION","function",168],["T_WHITESPACE"," ",168],["T_STRING","create",168],"(",["T_VARIABLE","$type",168],",",["T_WHITESPACE"," ",168],["T_VARIABLE","$set",168],",",["T_WHITESPACE"," ",168],["T_VARIABLE","$sku",168],",",["T_WHITESPACE"," ",168],["T_VARIABLE","$productData",168],",",["T_WHITESPACE"," ",168],["T_VARIABLE","$store",168],["T_WHITESPACE"," ",168],"=",["T_WHITESPACE"," ",168],["T_STRING","null",168],")",["T_WHITESPACE","\n    ",168],"{",["T_WHITESPACE","\n        ",169],["T_IF","if",170],["T_WHITESPACE"," ",170],"(","!",["T_VARIABLE","$type",170],["T_WHITESPACE"," ",170],["T_BOOLEAN_OR","||",170],["T_WHITESPACE"," ",170],"!",["T_VARIABLE","$set",170],["T_WHITESPACE"," ",170],["T_BOOLEAN_OR","||",170],["T_WHITESPACE"," ",170],"!",["T_VARIABLE","$sku",170],")",["T_WHITESPACE"," ",170],"{",["T_WHITESPACE","\n            ",170],["T_VARIABLE","$this",171],["T_OBJECT_OPERATOR","->",171],["T_STRING","_fault",171],"(",["T_CONSTANT_ENCAPSED_STRING","'data_invalid'",171],")",";",["T_WHITESPACE","\n        ",171],"}",["T_WHITESPACE","\n\n        ",172],["T_VARIABLE","$this",174],["T_OBJECT_OPERATOR","->",174],["T_STRING","_checkProductTypeExists",174],"(",["T_VARIABLE","$type",174],")",";",["T_WHITESPACE","\n        ",174],["T_VARIABLE","$this",175],["T_OBJECT_OPERATOR","->",175],["T_STRING","_checkProductAttributeSet",175],"(",["T_VARIABLE","$set",175],")",";",["T_WHITESPACE","\n\n        ",175],["T_DOC_COMMENT","\/** @var $product Mage_Catalog_Model_Product *\/",177],["T_WHITESPACE","\n        ",177],["T_VARIABLE","$product",178],["T_WHITESPACE"," ",178],"=",["T_WHITESPACE"," ",178],["T_STRING","Mage",178],["T_DOUBLE_COLON","::",178],["T_STRING","getModel",178],"(",["T_CONSTANT_ENCAPSED_STRING","'catalog\/product'",178],")",";",["T_WHITESPACE","\n        ",178],["T_VARIABLE","$product",179],["T_OBJECT_OPERATOR","->",179],["T_STRING","setStoreId",179],"(",["T_VARIABLE","$this",179],["T_OBJECT_OPERATOR","->",179],["T_STRING","_getStoreId",179],"(",["T_VARIABLE","$store",179],")",")",["T_WHITESPACE","\n            ",179],["T_OBJECT_OPERATOR","->",180],["T_STRING","setAttributeSetId",180],"(",["T_VARIABLE","$set",180],")",["T_WHITESPACE","\n            ",180],["T_OBJECT_OPERATOR","->",181],["T_STRING","setTypeId",181],"(",["T_VARIABLE","$type",181],")",["T_WHITESPACE","\n            ",181],["T_OBJECT_OPERATOR","->",182],["T_STRING","setSku",182],"(",["T_VARIABLE","$sku",182],")",";",["T_WHITESPACE","\n\n        ",182],["T_IF","if",184],["T_WHITESPACE"," ",184],"(","!",["T_ISSET","isset",184],"(",["T_VARIABLE","$productData",184],"[",["T_CONSTANT_ENCAPSED_STRING","'stock_data'",184],"]",")",["T_WHITESPACE"," ",184],["T_BOOLEAN_OR","||",184],["T_WHITESPACE"," ",184],"!",["T_STRING","is_array",184],"(",["T_VARIABLE","$productData",184],"[",["T_CONSTANT_ENCAPSED_STRING","'stock_data'",184],"]",")",")",["T_WHITESPACE"," ",184],"{",["T_WHITESPACE","\n            ",184],["T_COMMENT","\/\/Set default stock_data if not exist in product data\n",185],["T_WHITESPACE","            ",186],["T_VARIABLE","$product",186],["T_OBJECT_OPERATOR","->",186],["T_STRING","setStockData",186],"(",["T_ARRAY","array",186],"(",["T_CONSTANT_ENCAPSED_STRING","'use_config_manage_stock'",186],["T_WHITESPACE"," ",186],["T_DOUBLE_ARROW","=>",186],["T_WHITESPACE"," ",186],["T_LNUMBER","0",186],")",")",";",["T_WHITESPACE","\n        ",186],"}",["T_WHITESPACE","\n\n        ",187],["T_FOREACH","foreach",189],["T_WHITESPACE"," ",189],"(",["T_VARIABLE","$product",189],["T_OBJECT_OPERATOR","->",189],["T_STRING","getMediaAttributes",189],"(",")",["T_WHITESPACE"," ",189],["T_AS","as",189],["T_WHITESPACE"," ",189],["T_VARIABLE","$mediaAttribute",189],")",["T_WHITESPACE"," ",189],"{",["T_WHITESPACE","\n            ",189],["T_VARIABLE","$mediaAttrCode",190],["T_WHITESPACE"," ",190],"=",["T_WHITESPACE"," ",190],["T_VARIABLE","$mediaAttribute",190],["T_OBJECT_OPERATOR","->",190],["T_STRING","getAttributeCode",190],"(",")",";",["T_WHITESPACE","\n            ",190],["T_VARIABLE","$product",191],["T_OBJECT_OPERATOR","->",191],["T_STRING","setData",191],"(",["T_VARIABLE","$mediaAttrCode",191],",",["T_WHITESPACE"," ",191],["T_CONSTANT_ENCAPSED_STRING","'no_selection'",191],")",";",["T_WHITESPACE","\n        ",191],"}",["T_WHITESPACE","\n\n        ",192],["T_VARIABLE","$this",194],["T_OBJECT_OPERATOR","->",194],["T_STRING","_prepareDataForSave",194],"(",["T_VARIABLE","$product",194],",",["T_WHITESPACE"," ",194],["T_VARIABLE","$productData",194],")",";",["T_WHITESPACE","\n\n        ",194],["T_TRY","try",196],["T_WHITESPACE"," ",196],"{",["T_WHITESPACE","\n            ",196],["T_DOC_COMMENT","\/**\n             * @todo implement full validation process with errors returning which are ignoring now\n             * @todo see Mage_Catalog_Model_Product::validate()\n             *\/",197],["T_WHITESPACE","\n            ",200],["T_IF","if",201],["T_WHITESPACE"," ",201],"(",["T_STRING","is_array",201],"(",["T_VARIABLE","$errors",201],["T_WHITESPACE"," ",201],"=",["T_WHITESPACE"," ",201],["T_VARIABLE","$product",201],["T_OBJECT_OPERATOR","->",201],["T_STRING","validate",201],"(",")",")",")",["T_WHITESPACE"," ",201],"{",["T_WHITESPACE","\n                ",201],["T_VARIABLE","$strErrors",202],["T_WHITESPACE"," ",202],"=",["T_WHITESPACE"," ",202],["T_ARRAY","array",202],"(",")",";",["T_WHITESPACE","\n                ",202],["T_FOREACH","foreach",203],"(",["T_VARIABLE","$errors",203],["T_WHITESPACE"," ",203],["T_AS","as",203],["T_WHITESPACE"," ",203],["T_VARIABLE","$code",203],["T_WHITESPACE"," ",203],["T_DOUBLE_ARROW","=>",203],["T_WHITESPACE"," ",203],["T_VARIABLE","$error",203],")",["T_WHITESPACE"," ",203],"{",["T_WHITESPACE","\n                    ",203],["T_IF","if",204],["T_WHITESPACE"," ",204],"(",["T_VARIABLE","$error",204],["T_WHITESPACE"," ",204],["T_IS_IDENTICAL","===",204],["T_WHITESPACE"," ",204],["T_STRING","true",204],")",["T_WHITESPACE"," ",204],"{",["T_WHITESPACE","\n                        ",204],["T_VARIABLE","$error",205],["T_WHITESPACE"," ",205],"=",["T_WHITESPACE"," ",205],["T_STRING","Mage",205],["T_DOUBLE_COLON","::",205],["T_STRING","helper",205],"(",["T_CONSTANT_ENCAPSED_STRING","'catalog'",205],")",["T_OBJECT_OPERATOR","->",205],["T_STRING","__",205],"(",["T_CONSTANT_ENCAPSED_STRING","'Attribute \"%s\" is invalid.'",205],",",["T_WHITESPACE"," ",205],["T_VARIABLE","$code",205],")",";",["T_WHITESPACE","\n                    ",205],"}",["T_WHITESPACE","\n                    ",206],["T_VARIABLE","$strErrors",207],"[","]",["T_WHITESPACE"," ",207],"=",["T_WHITESPACE"," ",207],["T_VARIABLE","$error",207],";",["T_WHITESPACE","\n                ",207],"}",["T_WHITESPACE","\n                ",208],["T_VARIABLE","$this",209],["T_OBJECT_OPERATOR","->",209],["T_STRING","_fault",209],"(",["T_CONSTANT_ENCAPSED_STRING","'data_invalid'",209],",",["T_WHITESPACE"," ",209],["T_STRING","implode",209],"(",["T_CONSTANT_ENCAPSED_STRING","\"\\n\"",209],",",["T_WHITESPACE"," ",209],["T_VARIABLE","$strErrors",209],")",")",";",["T_WHITESPACE","\n            ",209],"}",["T_WHITESPACE","\n\n            ",210],["T_VARIABLE","$product",212],["T_OBJECT_OPERATOR","->",212],["T_STRING","save",212],"(",")",";",["T_WHITESPACE","\n        ",212],"}",["T_WHITESPACE"," ",213],["T_CATCH","catch",213],["T_WHITESPACE"," ",213],"(",["T_STRING","Mage_Core_Exception",213],["T_WHITESPACE"," ",213],["T_VARIABLE","$e",213],")",["T_WHITESPACE"," ",213],"{",["T_WHITESPACE","\n            ",213],["T_VARIABLE","$this",214],["T_OBJECT_OPERATOR","->",214],["T_STRING","_fault",214],"(",["T_CONSTANT_ENCAPSED_STRING","'data_invalid'",214],",",["T_WHITESPACE"," ",214],["T_VARIABLE","$e",214],["T_OBJECT_OPERATOR","->",214],["T_STRING","getMessage",214],"(",")",")",";",["T_WHITESPACE","\n        ",214],"}",["T_WHITESPACE","\n\n        ",215],["T_RETURN","return",217],["T_WHITESPACE"," ",217],["T_VARIABLE","$product",217],["T_OBJECT_OPERATOR","->",217],["T_STRING","getId",217],"(",")",";",["T_WHITESPACE","\n    ",217],"}",["T_WHITESPACE","\n\n    ",218],["T_DOC_COMMENT","\/**\n     * Update product data\n     *\n     * @param int|string $productId\n     * @param array $productData\n     * @param string|int $store\n     * @return boolean\n     *\/",220],["T_WHITESPACE","\n    ",227],["T_PUBLIC","public",228],["T_WHITESPACE"," ",228],["T_FUNCTION","function",228],["T_WHITESPACE"," ",228],["T_STRING","update",228],"(",["T_VARIABLE","$productId",228],",",["T_WHITESPACE"," ",228],["T_VARIABLE","$productData",228],",",["T_WHITESPACE"," ",228],["T_VARIABLE","$store",228],["T_WHITESPACE"," ",228],"=",["T_WHITESPACE"," ",228],["T_STRING","null",228],",",["T_WHITESPACE"," ",228],["T_VARIABLE","$identifierType",228],["T_WHITESPACE"," ",228],"=",["T_WHITESPACE"," ",228],["T_STRING","null",228],")",["T_WHITESPACE","\n    ",228],"{",["T_WHITESPACE","\n        ",229],["T_VARIABLE","$product",230],["T_WHITESPACE"," ",230],"=",["T_WHITESPACE"," ",230],["T_VARIABLE","$this",230],["T_OBJECT_OPERATOR","->",230],["T_STRING","_getProduct",230],"(",["T_VARIABLE","$productId",230],",",["T_WHITESPACE"," ",230],["T_VARIABLE","$store",230],",",["T_WHITESPACE"," ",230],["T_VARIABLE","$identifierType",230],")",";",["T_WHITESPACE","\n\n        ",230],["T_VARIABLE","$this",232],["T_OBJECT_OPERATOR","->",232],["T_STRING","_prepareDataForSave",232],"(",["T_VARIABLE","$product",232],",",["T_WHITESPACE"," ",232],["T_VARIABLE","$productData",232],")",";",["T_WHITESPACE","\n\n        ",232],["T_TRY","try",234],["T_WHITESPACE"," ",234],"{",["T_WHITESPACE","\n            ",234],["T_DOC_COMMENT","\/**\n             * @todo implement full validation process with errors returning which are ignoring now\n             * @todo see Mage_Catalog_Model_Product::validate()\n             *\/",235],["T_WHITESPACE","\n            ",238],["T_IF","if",239],["T_WHITESPACE"," ",239],"(",["T_STRING","is_array",239],"(",["T_VARIABLE","$errors",239],["T_WHITESPACE"," ",239],"=",["T_WHITESPACE"," ",239],["T_VARIABLE","$product",239],["T_OBJECT_OPERATOR","->",239],["T_STRING","validate",239],"(",")",")",")",["T_WHITESPACE"," ",239],"{",["T_WHITESPACE","\n                ",239],["T_VARIABLE","$strErrors",240],["T_WHITESPACE"," ",240],"=",["T_WHITESPACE"," ",240],["T_ARRAY","array",240],"(",")",";",["T_WHITESPACE","\n                ",240],["T_FOREACH","foreach",241],"(",["T_VARIABLE","$errors",241],["T_WHITESPACE"," ",241],["T_AS","as",241],["T_WHITESPACE"," ",241],["T_VARIABLE","$code",241],["T_WHITESPACE"," ",241],["T_DOUBLE_ARROW","=>",241],["T_WHITESPACE"," ",241],["T_VARIABLE","$error",241],")",["T_WHITESPACE"," ",241],"{",["T_WHITESPACE","\n                    ",241],["T_IF","if",242],["T_WHITESPACE"," ",242],"(",["T_VARIABLE","$error",242],["T_WHITESPACE"," ",242],["T_IS_IDENTICAL","===",242],["T_WHITESPACE"," ",242],["T_STRING","true",242],")",["T_WHITESPACE"," ",242],"{",["T_WHITESPACE","\n                        ",242],["T_VARIABLE","$error",243],["T_WHITESPACE"," ",243],"=",["T_WHITESPACE"," ",243],["T_STRING","Mage",243],["T_DOUBLE_COLON","::",243],["T_STRING","helper",243],"(",["T_CONSTANT_ENCAPSED_STRING","'catalog'",243],")",["T_OBJECT_OPERATOR","->",243],["T_STRING","__",243],"(",["T_CONSTANT_ENCAPSED_STRING","'Value for \"%s\" is invalid.'",243],",",["T_WHITESPACE"," ",243],["T_VARIABLE","$code",243],")",";",["T_WHITESPACE","\n                    ",243],"}",["T_WHITESPACE"," ",244],["T_ELSE","else",244],["T_WHITESPACE"," ",244],"{",["T_WHITESPACE","\n                        ",244],["T_VARIABLE","$error",245],["T_WHITESPACE"," ",245],"=",["T_WHITESPACE"," ",245],["T_STRING","Mage",245],["T_DOUBLE_COLON","::",245],["T_STRING","helper",245],"(",["T_CONSTANT_ENCAPSED_STRING","'catalog'",245],")",["T_OBJECT_OPERATOR","->",245],["T_STRING","__",245],"(",["T_CONSTANT_ENCAPSED_STRING","'Value for \"%s\" is invalid: %s'",245],",",["T_WHITESPACE"," ",245],["T_VARIABLE","$code",245],",",["T_WHITESPACE"," ",245],["T_VARIABLE","$error",245],")",";",["T_WHITESPACE","\n                    ",245],"}",["T_WHITESPACE","\n                    ",246],["T_VARIABLE","$strErrors",247],"[","]",["T_WHITESPACE"," ",247],"=",["T_WHITESPACE"," ",247],["T_VARIABLE","$error",247],";",["T_WHITESPACE","\n                ",247],"}",["T_WHITESPACE","\n                ",248],["T_VARIABLE","$this",249],["T_OBJECT_OPERATOR","->",249],["T_STRING","_fault",249],"(",["T_CONSTANT_ENCAPSED_STRING","'data_invalid'",249],",",["T_WHITESPACE"," ",249],["T_STRING","implode",249],"(",["T_CONSTANT_ENCAPSED_STRING","\"\\n\"",249],",",["T_WHITESPACE"," ",249],["T_VARIABLE","$strErrors",249],")",")",";",["T_WHITESPACE","\n            ",249],"}",["T_WHITESPACE","\n\n            ",250],["T_VARIABLE","$product",252],["T_OBJECT_OPERATOR","->",252],["T_STRING","save",252],"(",")",";",["T_WHITESPACE","\n        ",252],"}",["T_WHITESPACE"," ",253],["T_CATCH","catch",253],["T_WHITESPACE"," ",253],"(",["T_STRING","Mage_Core_Exception",253],["T_WHITESPACE"," ",253],["T_VARIABLE","$e",253],")",["T_WHITESPACE"," ",253],"{",["T_WHITESPACE","\n            ",253],["T_VARIABLE","$this",254],["T_OBJECT_OPERATOR","->",254],["T_STRING","_fault",254],"(",["T_CONSTANT_ENCAPSED_STRING","'data_invalid'",254],",",["T_WHITESPACE"," ",254],["T_VARIABLE","$e",254],["T_OBJECT_OPERATOR","->",254],["T_STRING","getMessage",254],"(",")",")",";",["T_WHITESPACE","\n        ",254],"}",["T_WHITESPACE","\n\n        ",255],["T_RETURN","return",257],["T_WHITESPACE"," ",257],["T_STRING","true",257],";",["T_WHITESPACE","\n    ",257],"}",["T_WHITESPACE","\n\n    ",258],["T_DOC_COMMENT","\/**\n     *  Set additional data before product saved\n     *\n     *  @param    Mage_Catalog_Model_Product $product\n     *  @param    array $productData\n     *  @return   object\n     *\/",260],["T_WHITESPACE","\n    ",266],["T_PROTECTED","protected",267],["T_WHITESPACE"," ",267],["T_FUNCTION","function",267],["T_WHITESPACE"," ",267],["T_STRING","_prepareDataForSave",267],"(",["T_VARIABLE","$product",267],",",["T_WHITESPACE"," ",267],["T_VARIABLE","$productData",267],")",["T_WHITESPACE","\n    ",267],"{",["T_WHITESPACE","\n        ",268],["T_IF","if",269],["T_WHITESPACE"," ",269],"(",["T_ISSET","isset",269],"(",["T_VARIABLE","$productData",269],"[",["T_CONSTANT_ENCAPSED_STRING","'website_ids'",269],"]",")",["T_WHITESPACE"," ",269],["T_BOOLEAN_AND","&&",269],["T_WHITESPACE"," ",269],["T_STRING","is_array",269],"(",["T_VARIABLE","$productData",269],"[",["T_CONSTANT_ENCAPSED_STRING","'website_ids'",269],"]",")",")",["T_WHITESPACE"," ",269],"{",["T_WHITESPACE","\n            ",269],["T_VARIABLE","$product",270],["T_OBJECT_OPERATOR","->",270],["T_STRING","setWebsiteIds",270],"(",["T_VARIABLE","$productData",270],"[",["T_CONSTANT_ENCAPSED_STRING","'website_ids'",270],"]",")",";",["T_WHITESPACE","\n        ",270],"}",["T_WHITESPACE","\n\n        ",271],["T_FOREACH","foreach",273],["T_WHITESPACE"," ",273],"(",["T_VARIABLE","$product",273],["T_OBJECT_OPERATOR","->",273],["T_STRING","getTypeInstance",273],"(",["T_STRING","true",273],")",["T_OBJECT_OPERATOR","->",273],["T_STRING","getEditableAttributes",273],"(",["T_VARIABLE","$product",273],")",["T_WHITESPACE"," ",273],["T_AS","as",273],["T_WHITESPACE"," ",273],["T_VARIABLE","$attribute",273],")",["T_WHITESPACE"," ",273],"{",["T_WHITESPACE","\n            ",273],["T_COMMENT","\/\/Unset data if object attribute has no value in current store\n",274],["T_WHITESPACE","            ",275],["T_IF","if",275],["T_WHITESPACE"," ",275],"(",["T_STRING","Mage_Catalog_Model_Abstract",275],["T_DOUBLE_COLON","::",275],["T_STRING","DEFAULT_STORE_ID",275],["T_WHITESPACE"," ",275],["T_IS_NOT_IDENTICAL","!==",275],["T_WHITESPACE"," ",275],["T_INT_CAST","(int)",275],["T_WHITESPACE"," ",275],["T_VARIABLE","$product",275],["T_OBJECT_OPERATOR","->",275],["T_STRING","getStoreId",275],"(",")",["T_WHITESPACE","\n                ",275],["T_BOOLEAN_AND","&&",276],["T_WHITESPACE"," ",276],"!",["T_VARIABLE","$product",276],["T_OBJECT_OPERATOR","->",276],["T_STRING","getExistsStoreValueFlag",276],"(",["T_VARIABLE","$attribute",276],["T_OBJECT_OPERATOR","->",276],["T_STRING","getAttributeCode",276],"(",")",")",["T_WHITESPACE","\n                ",276],["T_BOOLEAN_AND","&&",277],["T_WHITESPACE"," ",277],"!",["T_VARIABLE","$attribute",277],["T_OBJECT_OPERATOR","->",277],["T_STRING","isScopeGlobal",277],"(",")",["T_WHITESPACE","\n            ",277],")",["T_WHITESPACE"," ",278],"{",["T_WHITESPACE","\n                ",278],["T_VARIABLE","$product",279],["T_OBJECT_OPERATOR","->",279],["T_STRING","setData",279],"(",["T_VARIABLE","$attribute",279],["T_OBJECT_OPERATOR","->",279],["T_STRING","getAttributeCode",279],"(",")",",",["T_WHITESPACE"," ",279],["T_STRING","false",279],")",";",["T_WHITESPACE","\n            ",279],"}",["T_WHITESPACE","\n\n            ",280],["T_IF","if",282],["T_WHITESPACE"," ",282],"(",["T_VARIABLE","$this",282],["T_OBJECT_OPERATOR","->",282],["T_STRING","_isAllowedAttribute",282],"(",["T_VARIABLE","$attribute",282],")",")",["T_WHITESPACE"," ",282],"{",["T_WHITESPACE","\n                ",282],["T_IF","if",283],["T_WHITESPACE"," ",283],"(",["T_ISSET","isset",283],"(",["T_VARIABLE","$productData",283],"[",["T_VARIABLE","$attribute",283],["T_OBJECT_OPERATOR","->",283],["T_STRING","getAttributeCode",283],"(",")","]",")",")",["T_WHITESPACE"," ",283],"{",["T_WHITESPACE","\n                    ",283],["T_VARIABLE","$product",284],["T_OBJECT_OPERATOR","->",284],["T_STRING","setData",284],"(",["T_WHITESPACE","\n                        ",284],["T_VARIABLE","$attribute",285],["T_OBJECT_OPERATOR","->",285],["T_STRING","getAttributeCode",285],"(",")",",",["T_WHITESPACE","\n                        ",285],["T_VARIABLE","$productData",286],"[",["T_VARIABLE","$attribute",286],["T_OBJECT_OPERATOR","->",286],["T_STRING","getAttributeCode",286],"(",")","]",["T_WHITESPACE","\n                    ",286],")",";",["T_WHITESPACE","\n                ",287],"}",["T_WHITESPACE"," ",288],["T_ELSEIF","elseif",288],["T_WHITESPACE"," ",288],"(",["T_ISSET","isset",288],"(",["T_VARIABLE","$productData",288],"[",["T_CONSTANT_ENCAPSED_STRING","'additional_attributes'",288],"]","[",["T_CONSTANT_ENCAPSED_STRING","'single_data'",288],"]","[",["T_VARIABLE","$attribute",288],["T_OBJECT_OPERATOR","->",288],["T_STRING","getAttributeCode",288],"(",")","]",")",")",["T_WHITESPACE"," ",288],"{",["T_WHITESPACE","\n                    ",288],["T_VARIABLE","$product",289],["T_OBJECT_OPERATOR","->",289],["T_STRING","setData",289],"(",["T_WHITESPACE","\n                        ",289],["T_VARIABLE","$attribute",290],["T_OBJECT_OPERATOR","->",290],["T_STRING","getAttributeCode",290],"(",")",",",["T_WHITESPACE","\n                        ",290],["T_VARIABLE","$productData",291],"[",["T_CONSTANT_ENCAPSED_STRING","'additional_attributes'",291],"]","[",["T_CONSTANT_ENCAPSED_STRING","'single_data'",291],"]","[",["T_VARIABLE","$attribute",291],["T_OBJECT_OPERATOR","->",291],["T_STRING","getAttributeCode",291],"(",")","]",["T_WHITESPACE","\n                    ",291],")",";",["T_WHITESPACE","\n                ",292],"}",["T_WHITESPACE"," ",293],["T_ELSEIF","elseif",293],["T_WHITESPACE"," ",293],"(",["T_ISSET","isset",293],"(",["T_VARIABLE","$productData",293],"[",["T_CONSTANT_ENCAPSED_STRING","'additional_attributes'",293],"]","[",["T_CONSTANT_ENCAPSED_STRING","'multi_data'",293],"]","[",["T_VARIABLE","$attribute",293],["T_OBJECT_OPERATOR","->",293],["T_STRING","getAttributeCode",293],"(",")","]",")",")",["T_WHITESPACE"," ",293],"{",["T_WHITESPACE","\n                    ",293],["T_VARIABLE","$product",294],["T_OBJECT_OPERATOR","->",294],["T_STRING","setData",294],"(",["T_WHITESPACE","\n                        ",294],["T_VARIABLE","$attribute",295],["T_OBJECT_OPERATOR","->",295],["T_STRING","getAttributeCode",295],"(",")",",",["T_WHITESPACE","\n                        ",295],["T_VARIABLE","$productData",296],"[",["T_CONSTANT_ENCAPSED_STRING","'additional_attributes'",296],"]","[",["T_CONSTANT_ENCAPSED_STRING","'multi_data'",296],"]","[",["T_VARIABLE","$attribute",296],["T_OBJECT_OPERATOR","->",296],["T_STRING","getAttributeCode",296],"(",")","]",["T_WHITESPACE","\n                    ",296],")",";",["T_WHITESPACE","\n                ",297],"}",["T_WHITESPACE","\n            ",298],"}",["T_WHITESPACE","\n        ",299],"}",["T_WHITESPACE","\n\n        ",300],["T_IF","if",302],["T_WHITESPACE"," ",302],"(",["T_ISSET","isset",302],"(",["T_VARIABLE","$productData",302],"[",["T_CONSTANT_ENCAPSED_STRING","'categories'",302],"]",")",["T_WHITESPACE"," ",302],["T_BOOLEAN_AND","&&",302],["T_WHITESPACE"," ",302],["T_STRING","is_array",302],"(",["T_VARIABLE","$productData",302],"[",["T_CONSTANT_ENCAPSED_STRING","'categories'",302],"]",")",")",["T_WHITESPACE"," ",302],"{",["T_WHITESPACE","\n            ",302],["T_VARIABLE","$product",303],["T_OBJECT_OPERATOR","->",303],["T_STRING","setCategoryIds",303],"(",["T_VARIABLE","$productData",303],"[",["T_CONSTANT_ENCAPSED_STRING","'categories'",303],"]",")",";",["T_WHITESPACE","\n        ",303],"}",["T_WHITESPACE","\n\n        ",304],["T_IF","if",306],["T_WHITESPACE"," ",306],"(",["T_ISSET","isset",306],"(",["T_VARIABLE","$productData",306],"[",["T_CONSTANT_ENCAPSED_STRING","'websites'",306],"]",")",["T_WHITESPACE"," ",306],["T_BOOLEAN_AND","&&",306],["T_WHITESPACE"," ",306],["T_STRING","is_array",306],"(",["T_VARIABLE","$productData",306],"[",["T_CONSTANT_ENCAPSED_STRING","'websites'",306],"]",")",")",["T_WHITESPACE"," ",306],"{",["T_WHITESPACE","\n            ",306],["T_FOREACH","foreach",307],["T_WHITESPACE"," ",307],"(",["T_VARIABLE","$productData",307],"[",["T_CONSTANT_ENCAPSED_STRING","'websites'",307],"]",["T_WHITESPACE"," ",307],["T_AS","as",307],["T_WHITESPACE"," ",307],"&",["T_VARIABLE","$website",307],")",["T_WHITESPACE"," ",307],"{",["T_WHITESPACE","\n                ",307],["T_IF","if",308],["T_WHITESPACE"," ",308],"(",["T_STRING","is_string",308],"(",["T_VARIABLE","$website",308],")",")",["T_WHITESPACE"," ",308],"{",["T_WHITESPACE","\n                    ",308],["T_TRY","try",309],["T_WHITESPACE"," ",309],"{",["T_WHITESPACE","\n                        ",309],["T_VARIABLE","$website",310],["T_WHITESPACE"," ",310],"=",["T_WHITESPACE"," ",310],["T_STRING","Mage",310],["T_DOUBLE_COLON","::",310],["T_STRING","app",310],"(",")",["T_OBJECT_OPERATOR","->",310],["T_STRING","getWebsite",310],"(",["T_VARIABLE","$website",310],")",["T_OBJECT_OPERATOR","->",310],["T_STRING","getId",310],"(",")",";",["T_WHITESPACE","\n                    ",310],"}",["T_WHITESPACE"," ",311],["T_CATCH","catch",311],["T_WHITESPACE"," ",311],"(",["T_STRING","Exception",311],["T_WHITESPACE"," ",311],["T_VARIABLE","$e",311],")",["T_WHITESPACE"," ",311],"{",["T_WHITESPACE"," ",311],"}",["T_WHITESPACE","\n                ",311],"}",["T_WHITESPACE","\n            ",312],"}",["T_WHITESPACE","\n            ",313],["T_VARIABLE","$product",314],["T_OBJECT_OPERATOR","->",314],["T_STRING","setWebsiteIds",314],"(",["T_VARIABLE","$productData",314],"[",["T_CONSTANT_ENCAPSED_STRING","'websites'",314],"]",")",";",["T_WHITESPACE","\n        ",314],"}",["T_WHITESPACE","\n\n        ",315],["T_IF","if",317],["T_WHITESPACE"," ",317],"(",["T_STRING","Mage",317],["T_DOUBLE_COLON","::",317],["T_STRING","app",317],"(",")",["T_OBJECT_OPERATOR","->",317],["T_STRING","isSingleStoreMode",317],"(",")",")",["T_WHITESPACE"," ",317],"{",["T_WHITESPACE","\n            ",317],["T_VARIABLE","$product",318],["T_OBJECT_OPERATOR","->",318],["T_STRING","setWebsiteIds",318],"(",["T_ARRAY","array",318],"(",["T_STRING","Mage",318],["T_DOUBLE_COLON","::",318],["T_STRING","app",318],"(",")",["T_OBJECT_OPERATOR","->",318],["T_STRING","getStore",318],"(",["T_STRING","true",318],")",["T_OBJECT_OPERATOR","->",318],["T_STRING","getWebsite",318],"(",")",["T_OBJECT_OPERATOR","->",318],["T_STRING","getId",318],"(",")",")",")",";",["T_WHITESPACE","\n        ",318],"}",["T_WHITESPACE","\n\n        ",319],["T_IF","if",321],["T_WHITESPACE"," ",321],"(",["T_ISSET","isset",321],"(",["T_VARIABLE","$productData",321],"[",["T_CONSTANT_ENCAPSED_STRING","'stock_data'",321],"]",")",["T_WHITESPACE"," ",321],["T_BOOLEAN_AND","&&",321],["T_WHITESPACE"," ",321],["T_STRING","is_array",321],"(",["T_VARIABLE","$productData",321],"[",["T_CONSTANT_ENCAPSED_STRING","'stock_data'",321],"]",")",")",["T_WHITESPACE"," ",321],"{",["T_WHITESPACE","\n            ",321],["T_VARIABLE","$product",322],["T_OBJECT_OPERATOR","->",322],["T_STRING","setStockData",322],"(",["T_VARIABLE","$productData",322],"[",["T_CONSTANT_ENCAPSED_STRING","'stock_data'",322],"]",")",";",["T_WHITESPACE","\n        ",322],"}",["T_WHITESPACE","\n\n        ",323],["T_IF","if",325],["T_WHITESPACE"," ",325],"(",["T_ISSET","isset",325],"(",["T_VARIABLE","$productData",325],"[",["T_CONSTANT_ENCAPSED_STRING","'tier_price'",325],"]",")",["T_WHITESPACE"," ",325],["T_BOOLEAN_AND","&&",325],["T_WHITESPACE"," ",325],["T_STRING","is_array",325],"(",["T_VARIABLE","$productData",325],"[",["T_CONSTANT_ENCAPSED_STRING","'tier_price'",325],"]",")",")",["T_WHITESPACE"," ",325],"{",["T_WHITESPACE","\n             ",325],["T_VARIABLE","$tierPrices",326],["T_WHITESPACE"," ",326],"=",["T_WHITESPACE"," ",326],["T_STRING","Mage",326],["T_DOUBLE_COLON","::",326],["T_STRING","getModel",326],"(",["T_CONSTANT_ENCAPSED_STRING","'catalog\/product_attribute_tierprice_api'",326],")",["T_WHITESPACE","\n                 ",326],["T_OBJECT_OPERATOR","->",327],["T_STRING","prepareTierPrices",327],"(",["T_VARIABLE","$product",327],",",["T_WHITESPACE"," ",327],["T_VARIABLE","$productData",327],"[",["T_CONSTANT_ENCAPSED_STRING","'tier_price'",327],"]",")",";",["T_WHITESPACE","\n             ",327],["T_VARIABLE","$product",328],["T_OBJECT_OPERATOR","->",328],["T_STRING","setData",328],"(",["T_STRING","Mage_Catalog_Model_Product_Attribute_Tierprice_Api",328],["T_DOUBLE_COLON","::",328],["T_STRING","ATTRIBUTE_CODE",328],",",["T_WHITESPACE"," ",328],["T_VARIABLE","$tierPrices",328],")",";",["T_WHITESPACE","\n        ",328],"}",["T_WHITESPACE","\n    ",329],"}",["T_WHITESPACE","\n\n    ",330],["T_DOC_COMMENT","\/**\n     * Update product special price\n     *\n     * @param int|string $productId\n     * @param float $specialPrice\n     * @param string $fromDate\n     * @param string $toDate\n     * @param string|int $store\n     * @return boolean\n     *\/",332],["T_WHITESPACE","\n    ",341],["T_PUBLIC","public",342],["T_WHITESPACE"," ",342],["T_FUNCTION","function",342],["T_WHITESPACE"," ",342],["T_STRING","setSpecialPrice",342],"(",["T_VARIABLE","$productId",342],",",["T_WHITESPACE"," ",342],["T_VARIABLE","$specialPrice",342],["T_WHITESPACE"," ",342],"=",["T_WHITESPACE"," ",342],["T_STRING","null",342],",",["T_WHITESPACE"," ",342],["T_VARIABLE","$fromDate",342],["T_WHITESPACE"," ",342],"=",["T_WHITESPACE"," ",342],["T_STRING","null",342],",",["T_WHITESPACE"," ",342],["T_VARIABLE","$toDate",342],["T_WHITESPACE"," ",342],"=",["T_WHITESPACE"," ",342],["T_STRING","null",342],",",["T_WHITESPACE"," ",342],["T_VARIABLE","$store",342],["T_WHITESPACE"," ",342],"=",["T_WHITESPACE"," ",342],["T_STRING","null",342],")",["T_WHITESPACE","\n    ",342],"{",["T_WHITESPACE","\n        ",343],["T_RETURN","return",344],["T_WHITESPACE"," ",344],["T_VARIABLE","$this",344],["T_OBJECT_OPERATOR","->",344],["T_STRING","update",344],"(",["T_VARIABLE","$productId",344],",",["T_WHITESPACE"," ",344],["T_ARRAY","array",344],"(",["T_WHITESPACE","\n            ",344],["T_CONSTANT_ENCAPSED_STRING","'special_price'",345],["T_WHITESPACE","     ",345],["T_DOUBLE_ARROW","=>",345],["T_WHITESPACE"," ",345],["T_VARIABLE","$specialPrice",345],",",["T_WHITESPACE","\n            ",345],["T_CONSTANT_ENCAPSED_STRING","'special_from_date'",346],["T_WHITESPACE"," ",346],["T_DOUBLE_ARROW","=>",346],["T_WHITESPACE"," ",346],["T_VARIABLE","$fromDate",346],",",["T_WHITESPACE","\n            ",346],["T_CONSTANT_ENCAPSED_STRING","'special_to_date'",347],["T_WHITESPACE","   ",347],["T_DOUBLE_ARROW","=>",347],["T_WHITESPACE"," ",347],["T_VARIABLE","$toDate",347],["T_WHITESPACE","\n        ",347],")",",",["T_WHITESPACE"," ",348],["T_VARIABLE","$store",348],")",";",["T_WHITESPACE","\n    ",348],"}",["T_WHITESPACE","\n\n    ",349],["T_DOC_COMMENT","\/**\n     * Retrieve product special price\n     *\n     * @param int|string $productId\n     * @param string|int $store\n     * @return array\n     *\/",351],["T_WHITESPACE","\n    ",357],["T_PUBLIC","public",358],["T_WHITESPACE"," ",358],["T_FUNCTION","function",358],["T_WHITESPACE"," ",358],["T_STRING","getSpecialPrice",358],"(",["T_VARIABLE","$productId",358],",",["T_WHITESPACE"," ",358],["T_VARIABLE","$store",358],["T_WHITESPACE"," ",358],"=",["T_WHITESPACE"," ",358],["T_STRING","null",358],")",["T_WHITESPACE","\n    ",358],"{",["T_WHITESPACE","\n        ",359],["T_VARIABLE","$product",360],["T_WHITESPACE"," ",360],"=",["T_WHITESPACE"," ",360],["T_VARIABLE","$this",360],["T_OBJECT_OPERATOR","->",360],["T_STRING","_getProduct",360],"(",["T_VARIABLE","$productId",360],",",["T_WHITESPACE"," ",360],["T_VARIABLE","$store",360],")",";",["T_WHITESPACE","\n\n        ",360],["T_VARIABLE","$result",362],["T_WHITESPACE"," ",362],"=",["T_WHITESPACE"," ",362],["T_ARRAY","array",362],"(",["T_WHITESPACE","\n            ",362],["T_CONSTANT_ENCAPSED_STRING","'special_price'",363],["T_WHITESPACE","     ",363],["T_DOUBLE_ARROW","=>",363],["T_WHITESPACE"," ",363],["T_VARIABLE","$product",363],["T_OBJECT_OPERATOR","->",363],["T_STRING","getSpecialPrice",363],"(",")",",",["T_WHITESPACE","\n            ",363],["T_CONSTANT_ENCAPSED_STRING","'special_from_date'",364],["T_WHITESPACE"," ",364],["T_DOUBLE_ARROW","=>",364],["T_WHITESPACE"," ",364],["T_VARIABLE","$product",364],["T_OBJECT_OPERATOR","->",364],["T_STRING","getSpecialFromDate",364],"(",")",",",["T_WHITESPACE","\n            ",364],["T_CONSTANT_ENCAPSED_STRING","'special_to_date'",365],["T_WHITESPACE","   ",365],["T_DOUBLE_ARROW","=>",365],["T_WHITESPACE"," ",365],["T_VARIABLE","$product",365],["T_OBJECT_OPERATOR","->",365],["T_STRING","getSpecialToDate",365],"(",")",["T_WHITESPACE","\n        ",365],")",";",["T_WHITESPACE","\n\n        ",366],["T_RETURN","return",368],["T_WHITESPACE"," ",368],["T_VARIABLE","$result",368],";",["T_WHITESPACE","\n    ",368],"}",["T_WHITESPACE","\n\n    ",369],["T_DOC_COMMENT","\/**\n     * Delete product\n     *\n     * @param int|string $productId\n     * @return boolean\n     *\/",371],["T_WHITESPACE","\n    ",376],["T_PUBLIC","public",377],["T_WHITESPACE"," ",377],["T_FUNCTION","function",377],["T_WHITESPACE"," ",377],["T_STRING","delete",377],"(",["T_VARIABLE","$productId",377],",",["T_WHITESPACE"," ",377],["T_VARIABLE","$identifierType",377],["T_WHITESPACE"," ",377],"=",["T_WHITESPACE"," ",377],["T_STRING","null",377],")",["T_WHITESPACE","\n    ",377],"{",["T_WHITESPACE","\n        ",378],["T_VARIABLE","$product",379],["T_WHITESPACE"," ",379],"=",["T_WHITESPACE"," ",379],["T_VARIABLE","$this",379],["T_OBJECT_OPERATOR","->",379],["T_STRING","_getProduct",379],"(",["T_VARIABLE","$productId",379],",",["T_WHITESPACE"," ",379],["T_STRING","null",379],",",["T_WHITESPACE"," ",379],["T_VARIABLE","$identifierType",379],")",";",["T_WHITESPACE","\n\n        ",379],["T_TRY","try",381],["T_WHITESPACE"," ",381],"{",["T_WHITESPACE","\n            ",381],["T_VARIABLE","$product",382],["T_OBJECT_OPERATOR","->",382],["T_STRING","delete",382],"(",")",";",["T_WHITESPACE","\n        ",382],"}",["T_WHITESPACE"," ",383],["T_CATCH","catch",383],["T_WHITESPACE"," ",383],"(",["T_STRING","Mage_Core_Exception",383],["T_WHITESPACE"," ",383],["T_VARIABLE","$e",383],")",["T_WHITESPACE"," ",383],"{",["T_WHITESPACE","\n            ",383],["T_VARIABLE","$this",384],["T_OBJECT_OPERATOR","->",384],["T_STRING","_fault",384],"(",["T_CONSTANT_ENCAPSED_STRING","'not_deleted'",384],",",["T_WHITESPACE"," ",384],["T_VARIABLE","$e",384],["T_OBJECT_OPERATOR","->",384],["T_STRING","getMessage",384],"(",")",")",";",["T_WHITESPACE","\n        ",384],"}",["T_WHITESPACE","\n\n        ",385],["T_RETURN","return",387],["T_WHITESPACE"," ",387],["T_STRING","true",387],";",["T_WHITESPACE","\n    ",387],"}",["T_WHITESPACE","\n\n   ",388],["T_DOC_COMMENT","\/**\n    * Get list of additional attributes which are not in default create\/update list\n    *\n    * @param  $productType\n    * @param  $attributeSetId\n    * @return array\n    *\/",390],["T_WHITESPACE","\n    ",396],["T_PUBLIC","public",397],["T_WHITESPACE"," ",397],["T_FUNCTION","function",397],["T_WHITESPACE"," ",397],["T_STRING","getAdditionalAttributes",397],"(",["T_VARIABLE","$productType",397],",",["T_WHITESPACE"," ",397],["T_VARIABLE","$attributeSetId",397],")",["T_WHITESPACE","\n    ",397],"{",["T_WHITESPACE","\n        ",398],["T_VARIABLE","$this",399],["T_OBJECT_OPERATOR","->",399],["T_STRING","_checkProductTypeExists",399],"(",["T_VARIABLE","$productType",399],")",";",["T_WHITESPACE","\n        ",399],["T_VARIABLE","$this",400],["T_OBJECT_OPERATOR","->",400],["T_STRING","_checkProductAttributeSet",400],"(",["T_VARIABLE","$attributeSetId",400],")",";",["T_WHITESPACE","\n\n        ",400],["T_DOC_COMMENT","\/** @var $product Mage_Catalog_Model_Product *\/",402],["T_WHITESPACE","\n        ",402],["T_VARIABLE","$productAttributes",403],["T_WHITESPACE"," ",403],"=",["T_WHITESPACE"," ",403],["T_STRING","Mage",403],["T_DOUBLE_COLON","::",403],["T_STRING","getModel",403],"(",["T_CONSTANT_ENCAPSED_STRING","'catalog\/product'",403],")",["T_WHITESPACE","\n            ",403],["T_OBJECT_OPERATOR","->",404],["T_STRING","setAttributeSetId",404],"(",["T_VARIABLE","$attributeSetId",404],")",["T_WHITESPACE","\n            ",404],["T_OBJECT_OPERATOR","->",405],["T_STRING","setTypeId",405],"(",["T_VARIABLE","$productType",405],")",["T_WHITESPACE","\n            ",405],["T_OBJECT_OPERATOR","->",406],["T_STRING","getTypeInstance",406],"(",["T_STRING","false",406],")",["T_WHITESPACE","\n            ",406],["T_OBJECT_OPERATOR","->",407],["T_STRING","getEditableAttributes",407],"(",")",";",["T_WHITESPACE","\n\n        ",407],["T_VARIABLE","$result",409],["T_WHITESPACE"," ",409],"=",["T_WHITESPACE"," ",409],["T_ARRAY","array",409],"(",")",";",["T_WHITESPACE","\n        ",409],["T_FOREACH","foreach",410],["T_WHITESPACE"," ",410],"(",["T_VARIABLE","$productAttributes",410],["T_WHITESPACE"," ",410],["T_AS","as",410],["T_WHITESPACE"," ",410],["T_VARIABLE","$attribute",410],")",["T_WHITESPACE"," ",410],"{",["T_WHITESPACE","\n            ",410],["T_COMMENT","\/* @var $attribute Mage_Catalog_Model_Resource_Eav_Attribute *\/",411],["T_WHITESPACE","\n            ",411],["T_IF","if",412],["T_WHITESPACE"," ",412],"(",["T_VARIABLE","$attribute",412],["T_OBJECT_OPERATOR","->",412],["T_STRING","isInSet",412],"(",["T_VARIABLE","$attributeSetId",412],")",["T_WHITESPACE"," ",412],["T_BOOLEAN_AND","&&",412],["T_WHITESPACE"," ",412],["T_VARIABLE","$this",412],["T_OBJECT_OPERATOR","->",412],["T_STRING","_isAllowedAttribute",412],"(",["T_VARIABLE","$attribute",412],")",["T_WHITESPACE","\n                ",412],["T_BOOLEAN_AND","&&",413],["T_WHITESPACE"," ",413],"!",["T_STRING","in_array",413],"(",["T_VARIABLE","$attribute",413],["T_OBJECT_OPERATOR","->",413],["T_STRING","getAttributeCode",413],"(",")",",",["T_WHITESPACE"," ",413],["T_VARIABLE","$this",413],["T_OBJECT_OPERATOR","->",413],["T_STRING","_defaultProductAttributeList",413],")",")",["T_WHITESPACE"," ",413],"{",["T_WHITESPACE","\n\n                ",413],["T_IF","if",415],["T_WHITESPACE"," ",415],"(",["T_VARIABLE","$attribute",415],["T_OBJECT_OPERATOR","->",415],["T_STRING","isScopeGlobal",415],"(",")",")",["T_WHITESPACE"," ",415],"{",["T_WHITESPACE","\n                    ",415],["T_VARIABLE","$scope",416],["T_WHITESPACE"," ",416],"=",["T_WHITESPACE"," ",416],["T_CONSTANT_ENCAPSED_STRING","'global'",416],";",["T_WHITESPACE","\n                ",416],"}",["T_WHITESPACE"," ",417],["T_ELSEIF","elseif",417],["T_WHITESPACE"," ",417],"(",["T_VARIABLE","$attribute",417],["T_OBJECT_OPERATOR","->",417],["T_STRING","isScopeWebsite",417],"(",")",")",["T_WHITESPACE"," ",417],"{",["T_WHITESPACE","\n                    ",417],["T_VARIABLE","$scope",418],["T_WHITESPACE"," ",418],"=",["T_WHITESPACE"," ",418],["T_CONSTANT_ENCAPSED_STRING","'website'",418],";",["T_WHITESPACE","\n                ",418],"}",["T_WHITESPACE"," ",419],["T_ELSE","else",419],["T_WHITESPACE"," ",419],"{",["T_WHITESPACE","\n                    ",419],["T_VARIABLE","$scope",420],["T_WHITESPACE"," ",420],"=",["T_WHITESPACE"," ",420],["T_CONSTANT_ENCAPSED_STRING","'store'",420],";",["T_WHITESPACE","\n                ",420],"}",["T_WHITESPACE","\n\n                ",421],["T_VARIABLE","$result",423],"[","]",["T_WHITESPACE"," ",423],"=",["T_WHITESPACE"," ",423],["T_ARRAY","array",423],"(",["T_WHITESPACE","\n                    ",423],["T_CONSTANT_ENCAPSED_STRING","'attribute_id'",424],["T_WHITESPACE"," ",424],["T_DOUBLE_ARROW","=>",424],["T_WHITESPACE"," ",424],["T_VARIABLE","$attribute",424],["T_OBJECT_OPERATOR","->",424],["T_STRING","getId",424],"(",")",",",["T_WHITESPACE","\n                    ",424],["T_CONSTANT_ENCAPSED_STRING","'code'",425],["T_WHITESPACE"," ",425],["T_DOUBLE_ARROW","=>",425],["T_WHITESPACE"," ",425],["T_VARIABLE","$attribute",425],["T_OBJECT_OPERATOR","->",425],["T_STRING","getAttributeCode",425],"(",")",",",["T_WHITESPACE","\n                    ",425],["T_CONSTANT_ENCAPSED_STRING","'type'",426],["T_WHITESPACE"," ",426],["T_DOUBLE_ARROW","=>",426],["T_WHITESPACE"," ",426],["T_VARIABLE","$attribute",426],["T_OBJECT_OPERATOR","->",426],["T_STRING","getFrontendInput",426],"(",")",",",["T_WHITESPACE","\n                    ",426],["T_CONSTANT_ENCAPSED_STRING","'required'",427],["T_WHITESPACE"," ",427],["T_DOUBLE_ARROW","=>",427],["T_WHITESPACE"," ",427],["T_VARIABLE","$attribute",427],["T_OBJECT_OPERATOR","->",427],["T_STRING","getIsRequired",427],"(",")",",",["T_WHITESPACE","\n                    ",427],["T_CONSTANT_ENCAPSED_STRING","'scope'",428],["T_WHITESPACE"," ",428],["T_DOUBLE_ARROW","=>",428],["T_WHITESPACE"," ",428],["T_VARIABLE","$scope",428],["T_WHITESPACE","\n                ",428],")",";",["T_WHITESPACE","\n            ",429],"}",["T_WHITESPACE","\n        ",430],"}",["T_WHITESPACE","\n\n        ",431],["T_RETURN","return",433],["T_WHITESPACE"," ",433],["T_VARIABLE","$result",433],";",["T_WHITESPACE","\n    ",433],"}",["T_WHITESPACE","\n\n    ",434],["T_DOC_COMMENT","\/**\n     * Check if product type exists\n     *\n     * @param  $productType\n     * @throw Mage_Api_Exception\n     * @return void\n     *\/",436],["T_WHITESPACE","\n    ",442],["T_PROTECTED","protected",443],["T_WHITESPACE"," ",443],["T_FUNCTION","function",443],["T_WHITESPACE"," ",443],["T_STRING","_checkProductTypeExists",443],"(",["T_VARIABLE","$productType",443],")",["T_WHITESPACE","\n    ",443],"{",["T_WHITESPACE","\n        ",444],["T_IF","if",445],["T_WHITESPACE"," ",445],"(","!",["T_STRING","in_array",445],"(",["T_VARIABLE","$productType",445],",",["T_WHITESPACE"," ",445],["T_STRING","array_keys",445],"(",["T_STRING","Mage",445],["T_DOUBLE_COLON","::",445],["T_STRING","getModel",445],"(",["T_CONSTANT_ENCAPSED_STRING","'catalog\/product_type'",445],")",["T_OBJECT_OPERATOR","->",445],["T_STRING","getOptionArray",445],"(",")",")",")",")",["T_WHITESPACE"," ",445],"{",["T_WHITESPACE","\n            ",445],["T_VARIABLE","$this",446],["T_OBJECT_OPERATOR","->",446],["T_STRING","_fault",446],"(",["T_CONSTANT_ENCAPSED_STRING","'product_type_not_exists'",446],")",";",["T_WHITESPACE","\n        ",446],"}",["T_WHITESPACE","\n    ",447],"}",["T_WHITESPACE","\n\n    ",448],["T_DOC_COMMENT","\/**\n     * Check if attributeSet is exits and in catalog_product entity group type\n     *\n     * @param  $attributeSetId\n     * @throw Mage_Api_Exception\n     * @return void\n     *\/",450],["T_WHITESPACE","\n    ",456],["T_PROTECTED","protected",457],["T_WHITESPACE"," ",457],["T_FUNCTION","function",457],["T_WHITESPACE"," ",457],["T_STRING","_checkProductAttributeSet",457],"(",["T_VARIABLE","$attributeSetId",457],")",["T_WHITESPACE","\n    ",457],"{",["T_WHITESPACE","\n        ",458],["T_VARIABLE","$attributeSet",459],["T_WHITESPACE"," ",459],"=",["T_WHITESPACE"," ",459],["T_STRING","Mage",459],["T_DOUBLE_COLON","::",459],["T_STRING","getModel",459],"(",["T_CONSTANT_ENCAPSED_STRING","'eav\/entity_attribute_set'",459],")",["T_OBJECT_OPERATOR","->",459],["T_STRING","load",459],"(",["T_VARIABLE","$attributeSetId",459],")",";",["T_WHITESPACE","\n        ",459],["T_IF","if",460],["T_WHITESPACE"," ",460],"(",["T_STRING","is_null",460],"(",["T_VARIABLE","$attributeSet",460],["T_OBJECT_OPERATOR","->",460],["T_STRING","getId",460],"(",")",")",")",["T_WHITESPACE"," ",460],"{",["T_WHITESPACE","\n            ",460],["T_VARIABLE","$this",461],["T_OBJECT_OPERATOR","->",461],["T_STRING","_fault",461],"(",["T_CONSTANT_ENCAPSED_STRING","'product_attribute_set_not_exists'",461],")",";",["T_WHITESPACE","\n        ",461],"}",["T_WHITESPACE","\n        ",462],["T_IF","if",463],["T_WHITESPACE"," ",463],"(",["T_STRING","Mage",463],["T_DOUBLE_COLON","::",463],["T_STRING","getModel",463],"(",["T_CONSTANT_ENCAPSED_STRING","'catalog\/product'",463],")",["T_OBJECT_OPERATOR","->",463],["T_STRING","getResource",463],"(",")",["T_OBJECT_OPERATOR","->",463],["T_STRING","getTypeId",463],"(",")",["T_WHITESPACE"," ",463],["T_IS_NOT_EQUAL","!=",463],["T_WHITESPACE"," ",463],["T_VARIABLE","$attributeSet",463],["T_OBJECT_OPERATOR","->",463],["T_STRING","getEntityTypeId",463],"(",")",")",["T_WHITESPACE"," ",463],"{",["T_WHITESPACE","\n            ",463],["T_VARIABLE","$this",464],["T_OBJECT_OPERATOR","->",464],["T_STRING","_fault",464],"(",["T_CONSTANT_ENCAPSED_STRING","'product_attribute_set_not_valid'",464],")",";",["T_WHITESPACE","\n        ",464],"}",["T_WHITESPACE","\n    ",465],"}",["T_WHITESPACE","\n",466],"}",["T_WHITESPACE"," ",467],["T_COMMENT","\/\/ Class Mage_Catalog_Model_Product_Api End\n",467]]
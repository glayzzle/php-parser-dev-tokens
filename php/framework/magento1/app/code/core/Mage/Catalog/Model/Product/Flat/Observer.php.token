[["T_OPEN_TAG","<?php\n",1],["T_DOC_COMMENT","\/**\n * Magento\n *\n * NOTICE OF LICENSE\n *\n * This source file is subject to the Open Software License (OSL 3.0)\n * that is bundled with this package in the file LICENSE.txt.\n * It is also available through the world-wide-web at this URL:\n * http:\/\/opensource.org\/licenses\/osl-3.0.php\n * If you did not receive a copy of the license and are unable to\n * obtain it through the world-wide-web, please send an email\n * to license@magento.com so we can send you a copy immediately.\n *\n * DISCLAIMER\n *\n * Do not edit or add to this file if you wish to upgrade Magento to newer\n * versions in the future. If you wish to customize Magento for your\n * needs please refer to http:\/\/www.magento.com for more information.\n *\n * @category    Mage\n * @package     Mage_Catalog\n * @copyright  Copyright (c) 2006-2016 X.commerce, Inc. and affiliates (http:\/\/www.magento.com)\n * @license    http:\/\/opensource.org\/licenses\/osl-3.0.php  Open Software License (OSL 3.0)\n *\/",2],["T_WHITESPACE","\n\n\n",25],["T_DOC_COMMENT","\/**\n * Catalog Product Flat observer\n *\n * @category   Mage\n * @package    Mage_Catalog\n * @author     Magento Core Team <core@magentocommerce.com>\n *\/",28],["T_WHITESPACE","\n",34],["T_CLASS","class",35],["T_WHITESPACE"," ",35],["T_STRING","Mage_Catalog_Model_Product_Flat_Observer",35],["T_WHITESPACE","\n",35],"{",["T_WHITESPACE","\n    ",36],["T_DOC_COMMENT","\/**\n     * Retrieve Catalog Product Flat Helper\n     *\n     * @return Mage_Catalog_Helper_Product_Flat\n     *\/",37],["T_WHITESPACE","\n    ",41],["T_PROTECTED","protected",42],["T_WHITESPACE"," ",42],["T_FUNCTION","function",42],["T_WHITESPACE"," ",42],["T_STRING","_getHelper",42],"(",")",["T_WHITESPACE","\n    ",42],"{",["T_WHITESPACE","\n        ",43],["T_RETURN","return",44],["T_WHITESPACE"," ",44],["T_STRING","Mage",44],["T_DOUBLE_COLON","::",44],["T_STRING","helper",44],"(",["T_CONSTANT_ENCAPSED_STRING","'catalog\/product_flat'",44],")",";",["T_WHITESPACE","\n    ",44],"}",["T_WHITESPACE","\n\n    ",45],["T_DOC_COMMENT","\/**\n     * Retrieve Catalog Product Flat Indexer model\n     *\n     * @return Mage_Catalog_Model_Product_Flat_Indexer\n     *\/",47],["T_WHITESPACE","\n    ",51],["T_PROTECTED","protected",52],["T_WHITESPACE"," ",52],["T_FUNCTION","function",52],["T_WHITESPACE"," ",52],["T_STRING","_getIndexer",52],"(",")",["T_WHITESPACE"," ",52],"{",["T_WHITESPACE","\n        ",52],["T_RETURN","return",53],["T_WHITESPACE"," ",53],["T_STRING","Mage",53],["T_DOUBLE_COLON","::",53],["T_STRING","getSingleton",53],"(",["T_CONSTANT_ENCAPSED_STRING","'catalog\/product_flat_indexer'",53],")",";",["T_WHITESPACE","\n    ",53],"}",["T_WHITESPACE","\n\n    ",54],["T_DOC_COMMENT","\/**\n     * Catalog Entity attribute after save process\n     *\n     * @param Varien_Event_Observer $observer\n     * @return Mage_Catalog_Model_Product_Flat_Observer\n     *\/",56],["T_WHITESPACE","\n    ",61],["T_PUBLIC","public",62],["T_WHITESPACE"," ",62],["T_FUNCTION","function",62],["T_WHITESPACE"," ",62],["T_STRING","catalogEntityAttributeSaveAfter",62],"(",["T_STRING","Varien_Event_Observer",62],["T_WHITESPACE"," ",62],["T_VARIABLE","$observer",62],")",["T_WHITESPACE","\n    ",62],"{",["T_WHITESPACE","\n        ",63],["T_IF","if",64],["T_WHITESPACE"," ",64],"(","!",["T_VARIABLE","$this",64],["T_OBJECT_OPERATOR","->",64],["T_STRING","_getHelper",64],"(",")",["T_OBJECT_OPERATOR","->",64],["T_STRING","isAvailable",64],"(",")",["T_WHITESPACE"," ",64],["T_BOOLEAN_OR","||",64],["T_WHITESPACE"," ",64],"!",["T_VARIABLE","$this",64],["T_OBJECT_OPERATOR","->",64],["T_STRING","_getHelper",64],"(",")",["T_OBJECT_OPERATOR","->",64],["T_STRING","isBuilt",64],"(",")",")",["T_WHITESPACE"," ",64],"{",["T_WHITESPACE","\n            ",64],["T_RETURN","return",65],["T_WHITESPACE"," ",65],["T_VARIABLE","$this",65],";",["T_WHITESPACE","\n        ",65],"}",["T_WHITESPACE","\n\n        ",66],["T_VARIABLE","$attribute",68],["T_WHITESPACE"," ",68],"=",["T_WHITESPACE"," ",68],["T_VARIABLE","$observer",68],["T_OBJECT_OPERATOR","->",68],["T_STRING","getEvent",68],"(",")",["T_OBJECT_OPERATOR","->",68],["T_STRING","getAttribute",68],"(",")",";",["T_WHITESPACE","\n        ",68],["T_COMMENT","\/* @var $attribute Mage_Catalog_Model_Entity_Attribute *\/",69],["T_WHITESPACE","\n\n        ",69],["T_VARIABLE","$enableBefore",71],["T_WHITESPACE","   ",71],"=",["T_WHITESPACE"," ",71],"(",["T_VARIABLE","$attribute",71],["T_OBJECT_OPERATOR","->",71],["T_STRING","getOrigData",71],"(",["T_CONSTANT_ENCAPSED_STRING","'backend_type'",71],")",["T_WHITESPACE"," ",71],["T_IS_EQUAL","==",71],["T_WHITESPACE"," ",71],["T_CONSTANT_ENCAPSED_STRING","'static'",71],")",["T_WHITESPACE","\n            ",71],["T_BOOLEAN_OR","||",72],["T_WHITESPACE"," ",72],"(",["T_VARIABLE","$this",72],["T_OBJECT_OPERATOR","->",72],["T_STRING","_getHelper",72],"(",")",["T_OBJECT_OPERATOR","->",72],["T_STRING","isAddFilterableAttributes",72],"(",")",["T_WHITESPACE"," ",72],["T_BOOLEAN_AND","&&",72],["T_WHITESPACE"," ",72],["T_VARIABLE","$attribute",72],["T_OBJECT_OPERATOR","->",72],["T_STRING","getOrigData",72],"(",["T_CONSTANT_ENCAPSED_STRING","'is_filterable'",72],")",["T_WHITESPACE"," ",72],">",["T_WHITESPACE"," ",72],["T_LNUMBER","0",72],")",["T_WHITESPACE","\n            ",72],["T_BOOLEAN_OR","||",73],["T_WHITESPACE"," ",73],"(",["T_VARIABLE","$attribute",73],["T_OBJECT_OPERATOR","->",73],["T_STRING","getOrigData",73],"(",["T_CONSTANT_ENCAPSED_STRING","'used_in_product_listing'",73],")",["T_WHITESPACE"," ",73],["T_IS_EQUAL","==",73],["T_WHITESPACE"," ",73],["T_LNUMBER","1",73],")",["T_WHITESPACE","\n            ",73],["T_BOOLEAN_OR","||",74],["T_WHITESPACE"," ",74],"(",["T_VARIABLE","$attribute",74],["T_OBJECT_OPERATOR","->",74],["T_STRING","getOrigData",74],"(",["T_CONSTANT_ENCAPSED_STRING","'used_for_sort_by'",74],")",["T_WHITESPACE"," ",74],["T_IS_EQUAL","==",74],["T_WHITESPACE"," ",74],["T_LNUMBER","1",74],")",";",["T_WHITESPACE","\n        ",74],["T_VARIABLE","$enableAfter",75],["T_WHITESPACE","    ",75],"=",["T_WHITESPACE"," ",75],"(",["T_VARIABLE","$attribute",75],["T_OBJECT_OPERATOR","->",75],["T_STRING","getData",75],"(",["T_CONSTANT_ENCAPSED_STRING","'backend_type'",75],")",["T_WHITESPACE"," ",75],["T_IS_EQUAL","==",75],["T_WHITESPACE"," ",75],["T_CONSTANT_ENCAPSED_STRING","'static'",75],")",["T_WHITESPACE","\n            ",75],["T_BOOLEAN_OR","||",76],["T_WHITESPACE"," ",76],"(",["T_VARIABLE","$this",76],["T_OBJECT_OPERATOR","->",76],["T_STRING","_getHelper",76],"(",")",["T_OBJECT_OPERATOR","->",76],["T_STRING","isAddFilterableAttributes",76],"(",")",["T_WHITESPACE"," ",76],["T_BOOLEAN_AND","&&",76],["T_WHITESPACE"," ",76],["T_VARIABLE","$attribute",76],["T_OBJECT_OPERATOR","->",76],["T_STRING","getData",76],"(",["T_CONSTANT_ENCAPSED_STRING","'is_filterable'",76],")",["T_WHITESPACE"," ",76],">",["T_WHITESPACE"," ",76],["T_LNUMBER","0",76],")",["T_WHITESPACE","\n            ",76],["T_BOOLEAN_OR","||",77],["T_WHITESPACE"," ",77],"(",["T_VARIABLE","$attribute",77],["T_OBJECT_OPERATOR","->",77],["T_STRING","getData",77],"(",["T_CONSTANT_ENCAPSED_STRING","'used_in_product_listing'",77],")",["T_WHITESPACE"," ",77],["T_IS_EQUAL","==",77],["T_WHITESPACE"," ",77],["T_LNUMBER","1",77],")",["T_WHITESPACE","\n            ",77],["T_BOOLEAN_OR","||",78],["T_WHITESPACE"," ",78],"(",["T_VARIABLE","$attribute",78],["T_OBJECT_OPERATOR","->",78],["T_STRING","getData",78],"(",["T_CONSTANT_ENCAPSED_STRING","'used_for_sort_by'",78],")",["T_WHITESPACE"," ",78],["T_IS_EQUAL","==",78],["T_WHITESPACE"," ",78],["T_LNUMBER","1",78],")",";",["T_WHITESPACE","\n\n        ",78],["T_IF","if",80],["T_WHITESPACE"," ",80],"(","!",["T_VARIABLE","$enableAfter",80],["T_WHITESPACE"," ",80],["T_BOOLEAN_AND","&&",80],["T_WHITESPACE"," ",80],"!",["T_VARIABLE","$enableBefore",80],")",["T_WHITESPACE"," ",80],"{",["T_WHITESPACE","\n            ",80],["T_RETURN","return",81],["T_WHITESPACE"," ",81],["T_VARIABLE","$this",81],";",["T_WHITESPACE","\n        ",81],"}",["T_WHITESPACE","\n\n        ",82],["T_IF","if",84],["T_WHITESPACE"," ",84],"(",["T_VARIABLE","$enableBefore",84],["T_WHITESPACE"," ",84],["T_BOOLEAN_AND","&&",84],["T_WHITESPACE"," ",84],"!",["T_VARIABLE","$enableAfter",84],")",["T_WHITESPACE"," ",84],"{",["T_WHITESPACE","\n            ",84],["T_COMMENT","\/\/ delete attribute data from flat\n",85],["T_WHITESPACE","            ",86],["T_VARIABLE","$this",86],["T_OBJECT_OPERATOR","->",86],["T_STRING","_getIndexer",86],"(",")",["T_OBJECT_OPERATOR","->",86],["T_STRING","prepareDataStorage",86],"(",")",";",["T_WHITESPACE","\n        ",86],"}",["T_WHITESPACE","\n        ",87],["T_ELSE","else",88],["T_WHITESPACE"," ",88],"{",["T_WHITESPACE","\n            ",88],["T_VARIABLE","$this",89],["T_OBJECT_OPERATOR","->",89],["T_STRING","_getIndexer",89],"(",")",["T_OBJECT_OPERATOR","->",89],["T_STRING","updateAttribute",89],"(",["T_VARIABLE","$attribute",89],["T_OBJECT_OPERATOR","->",89],["T_STRING","getAttributeCode",89],"(",")",")",";",["T_WHITESPACE","\n        ",89],"}",["T_WHITESPACE","\n\n        ",90],["T_RETURN","return",92],["T_WHITESPACE"," ",92],["T_VARIABLE","$this",92],";",["T_WHITESPACE","\n    ",92],"}",["T_WHITESPACE","\n\n    ",93],["T_DOC_COMMENT","\/**\n     * Catalog Product Status Update\n     *\n     * @param Varien_Event_Observer $observer\n     * @return Mage_Catalog_Model_Product_Flat_Observer\n     *\/",95],["T_WHITESPACE","\n    ",100],["T_PUBLIC","public",101],["T_WHITESPACE"," ",101],["T_FUNCTION","function",101],["T_WHITESPACE"," ",101],["T_STRING","catalogProductStatusUpdate",101],"(",["T_STRING","Varien_Event_Observer",101],["T_WHITESPACE"," ",101],["T_VARIABLE","$observer",101],")",["T_WHITESPACE","\n    ",101],"{",["T_WHITESPACE","\n        ",102],["T_IF","if",103],["T_WHITESPACE"," ",103],"(","!",["T_VARIABLE","$this",103],["T_OBJECT_OPERATOR","->",103],["T_STRING","_getHelper",103],"(",")",["T_OBJECT_OPERATOR","->",103],["T_STRING","isAvailable",103],"(",")",["T_WHITESPACE"," ",103],["T_BOOLEAN_OR","||",103],["T_WHITESPACE"," ",103],"!",["T_VARIABLE","$this",103],["T_OBJECT_OPERATOR","->",103],["T_STRING","_getHelper",103],"(",")",["T_OBJECT_OPERATOR","->",103],["T_STRING","isBuilt",103],"(",")",")",["T_WHITESPACE"," ",103],"{",["T_WHITESPACE","\n            ",103],["T_RETURN","return",104],["T_WHITESPACE"," ",104],["T_VARIABLE","$this",104],";",["T_WHITESPACE","\n        ",104],"}",["T_WHITESPACE","\n\n        ",105],["T_VARIABLE","$productId",107],["T_WHITESPACE","  ",107],"=",["T_WHITESPACE"," ",107],["T_VARIABLE","$observer",107],["T_OBJECT_OPERATOR","->",107],["T_STRING","getEvent",107],"(",")",["T_OBJECT_OPERATOR","->",107],["T_STRING","getProductId",107],"(",")",";",["T_WHITESPACE","\n        ",107],["T_VARIABLE","$status",108],["T_WHITESPACE","     ",108],"=",["T_WHITESPACE"," ",108],["T_VARIABLE","$observer",108],["T_OBJECT_OPERATOR","->",108],["T_STRING","getEvent",108],"(",")",["T_OBJECT_OPERATOR","->",108],["T_STRING","getStatus",108],"(",")",";",["T_WHITESPACE","\n        ",108],["T_VARIABLE","$storeId",109],["T_WHITESPACE","    ",109],"=",["T_WHITESPACE"," ",109],["T_VARIABLE","$observer",109],["T_OBJECT_OPERATOR","->",109],["T_STRING","getEvent",109],"(",")",["T_OBJECT_OPERATOR","->",109],["T_STRING","getStoreId",109],"(",")",";",["T_WHITESPACE","\n        ",109],["T_VARIABLE","$storeId",110],["T_WHITESPACE","    ",110],"=",["T_WHITESPACE"," ",110],["T_VARIABLE","$storeId",110],["T_WHITESPACE"," ",110],">",["T_WHITESPACE"," ",110],["T_LNUMBER","0",110],["T_WHITESPACE"," ",110],"?",["T_WHITESPACE"," ",110],["T_VARIABLE","$storeId",110],["T_WHITESPACE"," ",110],":",["T_WHITESPACE"," ",110],["T_STRING","null",110],";",["T_WHITESPACE","\n\n        ",110],["T_VARIABLE","$this",112],["T_OBJECT_OPERATOR","->",112],["T_STRING","_getIndexer",112],"(",")",["T_OBJECT_OPERATOR","->",112],["T_STRING","updateProductStatus",112],"(",["T_VARIABLE","$productId",112],",",["T_WHITESPACE"," ",112],["T_VARIABLE","$status",112],",",["T_WHITESPACE"," ",112],["T_VARIABLE","$storeId",112],")",";",["T_WHITESPACE","\n\n        ",112],["T_RETURN","return",114],["T_WHITESPACE"," ",114],["T_VARIABLE","$this",114],";",["T_WHITESPACE","\n    ",114],"}",["T_WHITESPACE","\n\n    ",115],["T_DOC_COMMENT","\/**\n     * Catalog Product Website(s) update\n     *\n     * @param Varien_Event_Observer $observer\n     * @return Mage_Catalog_Model_Product_Flat_Observer\n     *\/",117],["T_WHITESPACE","\n    ",122],["T_PUBLIC","public",123],["T_WHITESPACE"," ",123],["T_FUNCTION","function",123],["T_WHITESPACE"," ",123],["T_STRING","catalogProductWebsiteUpdate",123],"(",["T_STRING","Varien_Event_Observer",123],["T_WHITESPACE"," ",123],["T_VARIABLE","$observer",123],")",["T_WHITESPACE","\n    ",123],"{",["T_WHITESPACE","\n        ",124],["T_IF","if",125],["T_WHITESPACE"," ",125],"(","!",["T_VARIABLE","$this",125],["T_OBJECT_OPERATOR","->",125],["T_STRING","_getHelper",125],"(",")",["T_OBJECT_OPERATOR","->",125],["T_STRING","isAvailable",125],"(",")",["T_WHITESPACE"," ",125],["T_BOOLEAN_OR","||",125],["T_WHITESPACE"," ",125],"!",["T_VARIABLE","$this",125],["T_OBJECT_OPERATOR","->",125],["T_STRING","_getHelper",125],"(",")",["T_OBJECT_OPERATOR","->",125],["T_STRING","isBuilt",125],"(",")",")",["T_WHITESPACE"," ",125],"{",["T_WHITESPACE","\n            ",125],["T_RETURN","return",126],["T_WHITESPACE"," ",126],["T_VARIABLE","$this",126],";",["T_WHITESPACE","\n        ",126],"}",["T_WHITESPACE","\n\n        ",127],["T_VARIABLE","$websiteIds",129],["T_WHITESPACE"," ",129],"=",["T_WHITESPACE"," ",129],["T_VARIABLE","$observer",129],["T_OBJECT_OPERATOR","->",129],["T_STRING","getEvent",129],"(",")",["T_OBJECT_OPERATOR","->",129],["T_STRING","getWebsiteIds",129],"(",")",";",["T_WHITESPACE","\n        ",129],["T_VARIABLE","$productIds",130],["T_WHITESPACE"," ",130],"=",["T_WHITESPACE"," ",130],["T_VARIABLE","$observer",130],["T_OBJECT_OPERATOR","->",130],["T_STRING","getEvent",130],"(",")",["T_OBJECT_OPERATOR","->",130],["T_STRING","getProductIds",130],"(",")",";",["T_WHITESPACE","\n\n        ",130],["T_FOREACH","foreach",132],["T_WHITESPACE"," ",132],"(",["T_VARIABLE","$websiteIds",132],["T_WHITESPACE"," ",132],["T_AS","as",132],["T_WHITESPACE"," ",132],["T_VARIABLE","$websiteId",132],")",["T_WHITESPACE"," ",132],"{",["T_WHITESPACE","\n            ",132],["T_VARIABLE","$website",133],["T_WHITESPACE"," ",133],"=",["T_WHITESPACE"," ",133],["T_STRING","Mage",133],["T_DOUBLE_COLON","::",133],["T_STRING","app",133],"(",")",["T_OBJECT_OPERATOR","->",133],["T_STRING","getWebsite",133],"(",["T_VARIABLE","$websiteId",133],")",";",["T_WHITESPACE","\n            ",133],["T_FOREACH","foreach",134],["T_WHITESPACE"," ",134],"(",["T_VARIABLE","$website",134],["T_OBJECT_OPERATOR","->",134],["T_STRING","getStores",134],"(",")",["T_WHITESPACE"," ",134],["T_AS","as",134],["T_WHITESPACE"," ",134],["T_VARIABLE","$store",134],")",["T_WHITESPACE"," ",134],"{",["T_WHITESPACE","\n                ",134],["T_IF","if",135],["T_WHITESPACE"," ",135],"(",["T_VARIABLE","$observer",135],["T_OBJECT_OPERATOR","->",135],["T_STRING","getEvent",135],"(",")",["T_OBJECT_OPERATOR","->",135],["T_STRING","getAction",135],"(",")",["T_WHITESPACE"," ",135],["T_IS_EQUAL","==",135],["T_WHITESPACE"," ",135],["T_CONSTANT_ENCAPSED_STRING","'remove'",135],")",["T_WHITESPACE"," ",135],"{",["T_WHITESPACE","\n                    ",135],["T_VARIABLE","$this",136],["T_OBJECT_OPERATOR","->",136],["T_STRING","_getIndexer",136],"(",")",["T_OBJECT_OPERATOR","->",136],["T_STRING","removeProduct",136],"(",["T_VARIABLE","$productIds",136],",",["T_WHITESPACE"," ",136],["T_VARIABLE","$store",136],["T_OBJECT_OPERATOR","->",136],["T_STRING","getId",136],"(",")",")",";",["T_WHITESPACE","\n                ",136],"}",["T_WHITESPACE","\n                ",137],["T_ELSE","else",138],["T_WHITESPACE"," ",138],"{",["T_WHITESPACE","\n                    ",138],["T_VARIABLE","$this",139],["T_OBJECT_OPERATOR","->",139],["T_STRING","_getIndexer",139],"(",")",["T_OBJECT_OPERATOR","->",139],["T_STRING","updateProduct",139],"(",["T_VARIABLE","$productIds",139],",",["T_WHITESPACE"," ",139],["T_VARIABLE","$store",139],["T_OBJECT_OPERATOR","->",139],["T_STRING","getId",139],"(",")",")",";",["T_WHITESPACE","\n                ",139],"}",["T_WHITESPACE","\n            ",140],"}",["T_WHITESPACE","\n        ",141],"}",["T_WHITESPACE","\n\n        ",142],["T_RETURN","return",144],["T_WHITESPACE"," ",144],["T_VARIABLE","$this",144],";",["T_WHITESPACE","\n    ",144],"}",["T_WHITESPACE","\n\n    ",145],["T_DOC_COMMENT","\/**\n     * Catalog Product After Save\n     *\n     * @param Varien_Event_Observer $observer\n     * @return Mage_Catalog_Model_Product_Flat_Observer\n     *\/",147],["T_WHITESPACE","\n    ",152],["T_PUBLIC","public",153],["T_WHITESPACE"," ",153],["T_FUNCTION","function",153],["T_WHITESPACE"," ",153],["T_STRING","catalogProductSaveAfter",153],"(",["T_STRING","Varien_Event_Observer",153],["T_WHITESPACE"," ",153],["T_VARIABLE","$observer",153],")",["T_WHITESPACE"," ",153],"{",["T_WHITESPACE","\n        ",153],["T_IF","if",154],["T_WHITESPACE"," ",154],"(","!",["T_VARIABLE","$this",154],["T_OBJECT_OPERATOR","->",154],["T_STRING","_getHelper",154],"(",")",["T_OBJECT_OPERATOR","->",154],["T_STRING","isAvailable",154],"(",")",["T_WHITESPACE"," ",154],["T_BOOLEAN_OR","||",154],["T_WHITESPACE"," ",154],"!",["T_VARIABLE","$this",154],["T_OBJECT_OPERATOR","->",154],["T_STRING","_getHelper",154],"(",")",["T_OBJECT_OPERATOR","->",154],["T_STRING","isBuilt",154],"(",")",")",["T_WHITESPACE"," ",154],"{",["T_WHITESPACE","\n            ",154],["T_RETURN","return",155],["T_WHITESPACE"," ",155],["T_VARIABLE","$this",155],";",["T_WHITESPACE","\n        ",155],"}",["T_WHITESPACE","\n\n        ",156],["T_VARIABLE","$product",158],["T_WHITESPACE","   ",158],"=",["T_WHITESPACE"," ",158],["T_VARIABLE","$observer",158],["T_OBJECT_OPERATOR","->",158],["T_STRING","getEvent",158],"(",")",["T_OBJECT_OPERATOR","->",158],["T_STRING","getProduct",158],"(",")",";",["T_WHITESPACE","\n        ",158],["T_VARIABLE","$productId",159],["T_WHITESPACE"," ",159],"=",["T_WHITESPACE"," ",159],["T_VARIABLE","$product",159],["T_OBJECT_OPERATOR","->",159],["T_STRING","getId",159],"(",")",";",["T_WHITESPACE","\n\n        ",159],["T_VARIABLE","$this",161],["T_OBJECT_OPERATOR","->",161],["T_STRING","_getIndexer",161],"(",")",["T_OBJECT_OPERATOR","->",161],["T_STRING","saveProduct",161],"(",["T_VARIABLE","$productId",161],")",";",["T_WHITESPACE","\n\n        ",161],["T_RETURN","return",163],["T_WHITESPACE"," ",163],["T_VARIABLE","$this",163],";",["T_WHITESPACE","\n    ",163],"}",["T_WHITESPACE","\n\n    ",164],["T_DOC_COMMENT","\/**\n     * Add new store flat process\n     *\n     * @param Varien_Event_Observer $observer\n     * @return Mage_Catalog_Model_Product_Flat_Observer\n     *\/",166],["T_WHITESPACE","\n    ",171],["T_PUBLIC","public",172],["T_WHITESPACE"," ",172],["T_FUNCTION","function",172],["T_WHITESPACE"," ",172],["T_STRING","storeAdd",172],"(",["T_STRING","Varien_Event_Observer",172],["T_WHITESPACE"," ",172],["T_VARIABLE","$observer",172],")",["T_WHITESPACE","\n    ",172],"{",["T_WHITESPACE","\n        ",173],["T_IF","if",174],["T_WHITESPACE"," ",174],"(","!",["T_VARIABLE","$this",174],["T_OBJECT_OPERATOR","->",174],["T_STRING","_getHelper",174],"(",")",["T_OBJECT_OPERATOR","->",174],["T_STRING","isAvailable",174],"(",")",["T_WHITESPACE"," ",174],["T_BOOLEAN_OR","||",174],["T_WHITESPACE"," ",174],"!",["T_VARIABLE","$this",174],["T_OBJECT_OPERATOR","->",174],["T_STRING","_getHelper",174],"(",")",["T_OBJECT_OPERATOR","->",174],["T_STRING","isBuilt",174],"(",")",")",["T_WHITESPACE"," ",174],"{",["T_WHITESPACE","\n            ",174],["T_RETURN","return",175],["T_WHITESPACE"," ",175],["T_VARIABLE","$this",175],";",["T_WHITESPACE","\n        ",175],"}",["T_WHITESPACE","\n\n        ",176],["T_VARIABLE","$store",178],["T_WHITESPACE"," ",178],"=",["T_WHITESPACE"," ",178],["T_VARIABLE","$observer",178],["T_OBJECT_OPERATOR","->",178],["T_STRING","getEvent",178],"(",")",["T_OBJECT_OPERATOR","->",178],["T_STRING","getStore",178],"(",")",";",["T_WHITESPACE","\n        ",178],["T_COMMENT","\/* @var $store Mage_Core_Model_Store *\/",179],["T_WHITESPACE","\n        ",179],["T_VARIABLE","$this",180],["T_OBJECT_OPERATOR","->",180],["T_STRING","_getIndexer",180],"(",")",["T_OBJECT_OPERATOR","->",180],["T_STRING","rebuild",180],"(",["T_VARIABLE","$store",180],["T_OBJECT_OPERATOR","->",180],["T_STRING","getId",180],"(",")",")",";",["T_WHITESPACE","\n\n        ",180],["T_RETURN","return",182],["T_WHITESPACE"," ",182],["T_VARIABLE","$this",182],";",["T_WHITESPACE","\n    ",182],"}",["T_WHITESPACE","\n\n    ",183],["T_DOC_COMMENT","\/**\n     * Store edit action, check change store group\n     *\n     * @param Varien_Event_Observer $observer\n     * @return Mage_Catalog_Model_Product_Flat_Observer\n     *\/",185],["T_WHITESPACE","\n    ",190],["T_PUBLIC","public",191],["T_WHITESPACE"," ",191],["T_FUNCTION","function",191],["T_WHITESPACE"," ",191],["T_STRING","storeEdit",191],"(",["T_STRING","Varien_Event_Observer",191],["T_WHITESPACE"," ",191],["T_VARIABLE","$observer",191],")",["T_WHITESPACE","\n    ",191],"{",["T_WHITESPACE","\n        ",192],["T_IF","if",193],["T_WHITESPACE"," ",193],"(","!",["T_VARIABLE","$this",193],["T_OBJECT_OPERATOR","->",193],["T_STRING","_getHelper",193],"(",")",["T_OBJECT_OPERATOR","->",193],["T_STRING","isAvailable",193],"(",")",["T_WHITESPACE"," ",193],["T_BOOLEAN_OR","||",193],["T_WHITESPACE"," ",193],"!",["T_VARIABLE","$this",193],["T_OBJECT_OPERATOR","->",193],["T_STRING","_getHelper",193],"(",")",["T_OBJECT_OPERATOR","->",193],["T_STRING","isBuilt",193],"(",")",")",["T_WHITESPACE"," ",193],"{",["T_WHITESPACE","\n            ",193],["T_RETURN","return",194],["T_WHITESPACE"," ",194],["T_VARIABLE","$this",194],";",["T_WHITESPACE","\n        ",194],"}",["T_WHITESPACE","\n\n        ",195],["T_VARIABLE","$store",197],["T_WHITESPACE"," ",197],"=",["T_WHITESPACE"," ",197],["T_VARIABLE","$observer",197],["T_OBJECT_OPERATOR","->",197],["T_STRING","getEvent",197],"(",")",["T_OBJECT_OPERATOR","->",197],["T_STRING","getStore",197],"(",")",";",["T_WHITESPACE","\n        ",197],["T_COMMENT","\/* @var $store Mage_Core_Model_Store *\/",198],["T_WHITESPACE","\n        ",198],["T_IF","if",199],["T_WHITESPACE"," ",199],"(",["T_VARIABLE","$store",199],["T_OBJECT_OPERATOR","->",199],["T_STRING","dataHasChangedFor",199],"(",["T_CONSTANT_ENCAPSED_STRING","'group_id'",199],")",")",["T_WHITESPACE"," ",199],"{",["T_WHITESPACE","\n            ",199],["T_VARIABLE","$this",200],["T_OBJECT_OPERATOR","->",200],["T_STRING","_getIndexer",200],"(",")",["T_OBJECT_OPERATOR","->",200],["T_STRING","rebuild",200],"(",["T_VARIABLE","$store",200],["T_OBJECT_OPERATOR","->",200],["T_STRING","getId",200],"(",")",")",";",["T_WHITESPACE","\n        ",200],"}",["T_WHITESPACE","\n\n        ",201],["T_RETURN","return",203],["T_WHITESPACE"," ",203],["T_VARIABLE","$this",203],";",["T_WHITESPACE","\n    ",203],"}",["T_WHITESPACE","\n\n    ",204],["T_DOC_COMMENT","\/**\n     * Store delete after process\n     *\n     * @param Varien_Event_Observer $observer\n     * @return Mage_Catalog_Model_Product_Flat_Observer\n     *\/",206],["T_WHITESPACE","\n    ",211],["T_PUBLIC","public",212],["T_WHITESPACE"," ",212],["T_FUNCTION","function",212],["T_WHITESPACE"," ",212],["T_STRING","storeDelete",212],"(",["T_STRING","Varien_Event_Observer",212],["T_WHITESPACE"," ",212],["T_VARIABLE","$observer",212],")",["T_WHITESPACE","\n    ",212],"{",["T_WHITESPACE","\n        ",213],["T_IF","if",214],["T_WHITESPACE"," ",214],"(","!",["T_VARIABLE","$this",214],["T_OBJECT_OPERATOR","->",214],["T_STRING","_getHelper",214],"(",")",["T_OBJECT_OPERATOR","->",214],["T_STRING","isAvailable",214],"(",")",["T_WHITESPACE"," ",214],["T_BOOLEAN_OR","||",214],["T_WHITESPACE"," ",214],"!",["T_VARIABLE","$this",214],["T_OBJECT_OPERATOR","->",214],["T_STRING","_getHelper",214],"(",")",["T_OBJECT_OPERATOR","->",214],["T_STRING","isBuilt",214],"(",")",")",["T_WHITESPACE"," ",214],"{",["T_WHITESPACE","\n            ",214],["T_RETURN","return",215],["T_WHITESPACE"," ",215],["T_VARIABLE","$this",215],";",["T_WHITESPACE","\n        ",215],"}",["T_WHITESPACE","\n\n        ",216],["T_VARIABLE","$store",218],["T_WHITESPACE"," ",218],"=",["T_WHITESPACE"," ",218],["T_VARIABLE","$observer",218],["T_OBJECT_OPERATOR","->",218],["T_STRING","getEvent",218],"(",")",["T_OBJECT_OPERATOR","->",218],["T_STRING","getStore",218],"(",")",";",["T_WHITESPACE","\n        ",218],["T_COMMENT","\/* @var $store Mage_Core_Model_Store *\/",219],["T_WHITESPACE","\n\n        ",219],["T_VARIABLE","$this",221],["T_OBJECT_OPERATOR","->",221],["T_STRING","_getIndexer",221],"(",")",["T_OBJECT_OPERATOR","->",221],["T_STRING","deleteStore",221],"(",["T_VARIABLE","$store",221],["T_OBJECT_OPERATOR","->",221],["T_STRING","getId",221],"(",")",")",";",["T_WHITESPACE","\n\n        ",221],["T_RETURN","return",223],["T_WHITESPACE"," ",223],["T_VARIABLE","$this",223],";",["T_WHITESPACE","\n    ",223],"}",["T_WHITESPACE","\n\n    ",224],["T_DOC_COMMENT","\/**\n     * Store Group Save process\n     *\n     * @param Varien_Event_Observer $observer\n     * @return Mage_Catalog_Model_Product_Flat_Observer\n     *\/",226],["T_WHITESPACE","\n    ",231],["T_PUBLIC","public",232],["T_WHITESPACE"," ",232],["T_FUNCTION","function",232],["T_WHITESPACE"," ",232],["T_STRING","storeGroupSave",232],"(",["T_STRING","Varien_Event_Observer",232],["T_WHITESPACE"," ",232],["T_VARIABLE","$observer",232],")",["T_WHITESPACE","\n    ",232],"{",["T_WHITESPACE","\n        ",233],["T_IF","if",234],["T_WHITESPACE"," ",234],"(","!",["T_VARIABLE","$this",234],["T_OBJECT_OPERATOR","->",234],["T_STRING","_getHelper",234],"(",")",["T_OBJECT_OPERATOR","->",234],["T_STRING","isAvailable",234],"(",")",["T_WHITESPACE"," ",234],["T_BOOLEAN_OR","||",234],["T_WHITESPACE"," ",234],"!",["T_VARIABLE","$this",234],["T_OBJECT_OPERATOR","->",234],["T_STRING","_getHelper",234],"(",")",["T_OBJECT_OPERATOR","->",234],["T_STRING","isBuilt",234],"(",")",")",["T_WHITESPACE"," ",234],"{",["T_WHITESPACE","\n            ",234],["T_RETURN","return",235],["T_WHITESPACE"," ",235],["T_VARIABLE","$this",235],";",["T_WHITESPACE","\n        ",235],"}",["T_WHITESPACE","\n\n        ",236],["T_VARIABLE","$group",238],["T_WHITESPACE"," ",238],"=",["T_WHITESPACE"," ",238],["T_VARIABLE","$observer",238],["T_OBJECT_OPERATOR","->",238],["T_STRING","getEvent",238],"(",")",["T_OBJECT_OPERATOR","->",238],["T_STRING","getGroup",238],"(",")",";",["T_WHITESPACE","\n        ",238],["T_COMMENT","\/* @var $group Mage_Core_Model_Store_Group *\/",239],["T_WHITESPACE","\n\n        ",239],["T_IF","if",241],["T_WHITESPACE"," ",241],"(",["T_VARIABLE","$group",241],["T_OBJECT_OPERATOR","->",241],["T_STRING","dataHasChangedFor",241],"(",["T_CONSTANT_ENCAPSED_STRING","'website_id'",241],")",")",["T_WHITESPACE"," ",241],"{",["T_WHITESPACE","\n            ",241],["T_FOREACH","foreach",242],["T_WHITESPACE"," ",242],"(",["T_VARIABLE","$group",242],["T_OBJECT_OPERATOR","->",242],["T_STRING","getStores",242],"(",")",["T_WHITESPACE"," ",242],["T_AS","as",242],["T_WHITESPACE"," ",242],["T_VARIABLE","$store",242],")",["T_WHITESPACE"," ",242],"{",["T_WHITESPACE","\n                ",242],["T_COMMENT","\/* @var $store Mage_Core_Model_Store *\/",243],["T_WHITESPACE","\n                ",243],["T_VARIABLE","$this",244],["T_OBJECT_OPERATOR","->",244],["T_STRING","_getIndexer",244],"(",")",["T_OBJECT_OPERATOR","->",244],["T_STRING","rebuild",244],"(",["T_VARIABLE","$store",244],["T_OBJECT_OPERATOR","->",244],["T_STRING","getId",244],"(",")",")",";",["T_WHITESPACE","\n            ",244],"}",["T_WHITESPACE","\n        ",245],"}",["T_WHITESPACE","\n\n        ",246],["T_RETURN","return",248],["T_WHITESPACE"," ",248],["T_VARIABLE","$this",248],";",["T_WHITESPACE","\n    ",248],"}",["T_WHITESPACE","\n\n    ",249],["T_DOC_COMMENT","\/**\n     * Catalog Product Import After process\n     *\n     * @param Varien_Event_Observer $observer\n     * @return Mage_Catalog_Model_Product_Flat_Observer\n     *\/",251],["T_WHITESPACE","\n    ",256],["T_PUBLIC","public",257],["T_WHITESPACE"," ",257],["T_FUNCTION","function",257],["T_WHITESPACE"," ",257],["T_STRING","catalogProductImportAfter",257],"(",["T_STRING","Varien_Event_Observer",257],["T_WHITESPACE"," ",257],["T_VARIABLE","$observer",257],")",["T_WHITESPACE","\n    ",257],"{",["T_WHITESPACE","\n        ",258],["T_IF","if",259],["T_WHITESPACE"," ",259],"(","!",["T_VARIABLE","$this",259],["T_OBJECT_OPERATOR","->",259],["T_STRING","_getHelper",259],"(",")",["T_OBJECT_OPERATOR","->",259],["T_STRING","isAvailable",259],"(",")",["T_WHITESPACE"," ",259],["T_BOOLEAN_OR","||",259],["T_WHITESPACE"," ",259],"!",["T_VARIABLE","$this",259],["T_OBJECT_OPERATOR","->",259],["T_STRING","_getHelper",259],"(",")",["T_OBJECT_OPERATOR","->",259],["T_STRING","isBuilt",259],"(",")",")",["T_WHITESPACE"," ",259],"{",["T_WHITESPACE","\n            ",259],["T_RETURN","return",260],["T_WHITESPACE"," ",260],["T_VARIABLE","$this",260],";",["T_WHITESPACE","\n        ",260],"}",["T_WHITESPACE","\n\n        ",261],["T_VARIABLE","$this",263],["T_OBJECT_OPERATOR","->",263],["T_STRING","_getIndexer",263],"(",")",["T_OBJECT_OPERATOR","->",263],["T_STRING","rebuild",263],"(",")",";",["T_WHITESPACE","\n\n        ",263],["T_RETURN","return",265],["T_WHITESPACE"," ",265],["T_VARIABLE","$this",265],";",["T_WHITESPACE","\n    ",265],"}",["T_WHITESPACE","\n\n    ",266],["T_DOC_COMMENT","\/**\n     * Customer Group save after process\n     *\n     * @param Varien_Event_Observer_Collection $observer\n     * @return Mage_Catalog_Model_Product_Flat_Observer\n     *\/",268],["T_WHITESPACE","\n    ",273],["T_PUBLIC","public",274],["T_WHITESPACE"," ",274],["T_FUNCTION","function",274],["T_WHITESPACE"," ",274],["T_STRING","customerGroupSaveAfter",274],"(",["T_STRING","Varien_Event_Observer",274],["T_WHITESPACE"," ",274],["T_VARIABLE","$observer",274],")",["T_WHITESPACE","\n    ",274],"{",["T_WHITESPACE","\n        ",275],["T_IF","if",276],["T_WHITESPACE"," ",276],"(","!",["T_VARIABLE","$this",276],["T_OBJECT_OPERATOR","->",276],["T_STRING","_getHelper",276],"(",")",["T_OBJECT_OPERATOR","->",276],["T_STRING","isAvailable",276],"(",")",["T_WHITESPACE"," ",276],["T_BOOLEAN_OR","||",276],["T_WHITESPACE"," ",276],"!",["T_VARIABLE","$this",276],["T_OBJECT_OPERATOR","->",276],["T_STRING","_getHelper",276],"(",")",["T_OBJECT_OPERATOR","->",276],["T_STRING","isBuilt",276],"(",")",")",["T_WHITESPACE"," ",276],"{",["T_WHITESPACE","\n            ",276],["T_RETURN","return",277],["T_WHITESPACE"," ",277],["T_VARIABLE","$this",277],";",["T_WHITESPACE","\n        ",277],"}",["T_WHITESPACE","\n\n        ",278],["T_VARIABLE","$customerGroup",280],["T_WHITESPACE"," ",280],"=",["T_WHITESPACE"," ",280],["T_VARIABLE","$observer",280],["T_OBJECT_OPERATOR","->",280],["T_STRING","getEvent",280],"(",")",["T_OBJECT_OPERATOR","->",280],["T_STRING","getObject",280],"(",")",";",["T_WHITESPACE","\n        ",280],["T_COMMENT","\/* @var $customerGroup Mage_Customer_Model_Group *\/",281],["T_WHITESPACE","\n        ",281],["T_IF","if",282],["T_WHITESPACE"," ",282],"(",["T_VARIABLE","$customerGroup",282],["T_OBJECT_OPERATOR","->",282],["T_STRING","dataHasChangedFor",282],"(",["T_VARIABLE","$customerGroup",282],["T_OBJECT_OPERATOR","->",282],["T_STRING","getIdFieldName",282],"(",")",")",["T_WHITESPACE","\n            ",282],["T_BOOLEAN_OR","||",283],["T_WHITESPACE"," ",283],["T_VARIABLE","$customerGroup",283],["T_OBJECT_OPERATOR","->",283],["T_STRING","dataHasChangedFor",283],"(",["T_CONSTANT_ENCAPSED_STRING","'tax_class_id'",283],")",")",["T_WHITESPACE"," ",283],"{",["T_WHITESPACE","\n            ",283],["T_VARIABLE","$this",284],["T_OBJECT_OPERATOR","->",284],["T_STRING","_getIndexer",284],"(",")",["T_OBJECT_OPERATOR","->",284],["T_STRING","updateEventAttributes",284],"(",")",";",["T_WHITESPACE","\n        ",284],"}",["T_WHITESPACE","\n        ",285],["T_RETURN","return",286],["T_WHITESPACE"," ",286],["T_VARIABLE","$this",286],";",["T_WHITESPACE","\n    ",286],"}",["T_WHITESPACE","\n\n    ",287],["T_DOC_COMMENT","\/**\n     * Update category ids in flat\n     *\n     * @deprecated 1.3.2.2\n     * @param Varien_Event_Observer $observer\n     * @return Mage_Catalog_Model_Product_Flat_Observer\n     *\/",289],["T_WHITESPACE","\n    ",295],["T_PUBLIC","public",296],["T_WHITESPACE"," ",296],["T_FUNCTION","function",296],["T_WHITESPACE"," ",296],["T_STRING","catalogCategoryChangeProducts",296],"(",["T_STRING","Varien_Event_Observer",296],["T_WHITESPACE"," ",296],["T_VARIABLE","$observer",296],")",["T_WHITESPACE","\n    ",296],"{",["T_WHITESPACE","\n        ",297],["T_RETURN","return",298],["T_WHITESPACE"," ",298],["T_VARIABLE","$this",298],";",["T_WHITESPACE","\n    ",298],"}",["T_WHITESPACE","\n",299],"}",["T_WHITESPACE","\n",300]]
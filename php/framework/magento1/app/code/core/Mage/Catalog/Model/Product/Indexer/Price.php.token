[["T_OPEN_TAG","<?php\n",1],["T_DOC_COMMENT","\/**\n * Magento\n *\n * NOTICE OF LICENSE\n *\n * This source file is subject to the Open Software License (OSL 3.0)\n * that is bundled with this package in the file LICENSE.txt.\n * It is also available through the world-wide-web at this URL:\n * http:\/\/opensource.org\/licenses\/osl-3.0.php\n * If you did not receive a copy of the license and are unable to\n * obtain it through the world-wide-web, please send an email\n * to license@magento.com so we can send you a copy immediately.\n *\n * DISCLAIMER\n *\n * Do not edit or add to this file if you wish to upgrade Magento to newer\n * versions in the future. If you wish to customize Magento for your\n * needs please refer to http:\/\/www.magento.com for more information.\n *\n * @category    Mage\n * @package     Mage_Catalog\n * @copyright  Copyright (c) 2006-2016 X.commerce, Inc. and affiliates (http:\/\/www.magento.com)\n * @license    http:\/\/opensource.org\/licenses\/osl-3.0.php  Open Software License (OSL 3.0)\n *\/",2],["T_WHITESPACE","\n",25],["T_DOC_COMMENT","\/**\n * Enter description here ...\n *\n * @method Mage_Catalog_Model_Resource_Product_Indexer_Price _getResource()\n * @method Mage_Catalog_Model_Resource_Product_Indexer_Price getResource()\n * @method Mage_Catalog_Model_Product_Indexer_Price setEntityId(int $value)\n * @method int getCustomerGroupId()\n * @method Mage_Catalog_Model_Product_Indexer_Price setCustomerGroupId(int $value)\n * @method int getWebsiteId()\n * @method Mage_Catalog_Model_Product_Indexer_Price setWebsiteId(int $value)\n * @method int getTaxClassId()\n * @method Mage_Catalog_Model_Product_Indexer_Price setTaxClassId(int $value)\n * @method float getPrice()\n * @method Mage_Catalog_Model_Product_Indexer_Price setPrice(float $value)\n * @method float getFinalPrice()\n * @method Mage_Catalog_Model_Product_Indexer_Price setFinalPrice(float $value)\n * @method float getMinPrice()\n * @method Mage_Catalog_Model_Product_Indexer_Price setMinPrice(float $value)\n * @method float getMaxPrice()\n * @method Mage_Catalog_Model_Product_Indexer_Price setMaxPrice(float $value)\n * @method float getTierPrice()\n * @method Mage_Catalog_Model_Product_Indexer_Price setTierPrice(float $value)\n *\n * @category    Mage\n * @package     Mage_Catalog\n * @author      Magento Core Team <core@magentocommerce.com>\n *\/",26],["T_WHITESPACE","\n",52],["T_CLASS","class",53],["T_WHITESPACE"," ",53],["T_STRING","Mage_Catalog_Model_Product_Indexer_Price",53],["T_WHITESPACE"," ",53],["T_EXTENDS","extends",53],["T_WHITESPACE"," ",53],["T_STRING","Mage_Index_Model_Indexer_Abstract",53],["T_WHITESPACE","\n",53],"{",["T_WHITESPACE","\n    ",54],["T_DOC_COMMENT","\/**\n     * Data key for matching result to be saved in\n     *\/",55],["T_WHITESPACE","\n    ",57],["T_CONST","const",58],["T_WHITESPACE"," ",58],["T_STRING","EVENT_MATCH_RESULT_KEY",58],["T_WHITESPACE"," ",58],"=",["T_WHITESPACE"," ",58],["T_CONSTANT_ENCAPSED_STRING","'catalog_product_price_match_result'",58],";",["T_WHITESPACE","\n\n    ",58],["T_DOC_COMMENT","\/**\n     * Reindex price event type\n     *\/",60],["T_WHITESPACE","\n    ",62],["T_CONST","const",63],["T_WHITESPACE"," ",63],["T_STRING","EVENT_TYPE_REINDEX_PRICE",63],["T_WHITESPACE"," ",63],"=",["T_WHITESPACE"," ",63],["T_CONSTANT_ENCAPSED_STRING","'catalog_reindex_price'",63],";",["T_WHITESPACE","\n\n    ",63],["T_DOC_COMMENT","\/**\n     * Matched Entities instruction array\n     *\n     * @var array\n     *\/",65],["T_WHITESPACE","\n    ",69],["T_PROTECTED","protected",70],["T_WHITESPACE"," ",70],["T_VARIABLE","$_matchedEntities",70],["T_WHITESPACE"," ",70],"=",["T_WHITESPACE"," ",70],["T_ARRAY","array",70],"(",["T_WHITESPACE","\n        ",70],["T_STRING","Mage_Catalog_Model_Product",71],["T_DOUBLE_COLON","::",71],["T_STRING","ENTITY",71],["T_WHITESPACE"," ",71],["T_DOUBLE_ARROW","=>",71],["T_WHITESPACE"," ",71],["T_ARRAY","array",71],"(",["T_WHITESPACE","\n            ",71],["T_STRING","Mage_Index_Model_Event",72],["T_DOUBLE_COLON","::",72],["T_STRING","TYPE_SAVE",72],",",["T_WHITESPACE","\n            ",72],["T_STRING","Mage_Index_Model_Event",73],["T_DOUBLE_COLON","::",73],["T_STRING","TYPE_DELETE",73],",",["T_WHITESPACE","\n            ",73],["T_STRING","Mage_Index_Model_Event",74],["T_DOUBLE_COLON","::",74],["T_STRING","TYPE_MASS_ACTION",74],",",["T_WHITESPACE","\n            ",74],["T_STRING","self",75],["T_DOUBLE_COLON","::",75],["T_STRING","EVENT_TYPE_REINDEX_PRICE",75],",",["T_WHITESPACE","\n        ",75],")",",",["T_WHITESPACE","\n        ",76],["T_STRING","Mage_Core_Model_Config_Data",77],["T_DOUBLE_COLON","::",77],["T_STRING","ENTITY",77],["T_WHITESPACE"," ",77],["T_DOUBLE_ARROW","=>",77],["T_WHITESPACE"," ",77],["T_ARRAY","array",77],"(",["T_WHITESPACE","\n            ",77],["T_STRING","Mage_Index_Model_Event",78],["T_DOUBLE_COLON","::",78],["T_STRING","TYPE_SAVE",78],["T_WHITESPACE","\n        ",78],")",",",["T_WHITESPACE","\n        ",79],["T_STRING","Mage_Catalog_Model_Convert_Adapter_Product",80],["T_DOUBLE_COLON","::",80],["T_STRING","ENTITY",80],["T_WHITESPACE"," ",80],["T_DOUBLE_ARROW","=>",80],["T_WHITESPACE"," ",80],["T_ARRAY","array",80],"(",["T_WHITESPACE","\n            ",80],["T_STRING","Mage_Index_Model_Event",81],["T_DOUBLE_COLON","::",81],["T_STRING","TYPE_SAVE",81],["T_WHITESPACE","\n        ",81],")",",",["T_WHITESPACE","\n        ",82],["T_STRING","Mage_Customer_Model_Group",83],["T_DOUBLE_COLON","::",83],["T_STRING","ENTITY",83],["T_WHITESPACE"," ",83],["T_DOUBLE_ARROW","=>",83],["T_WHITESPACE"," ",83],["T_ARRAY","array",83],"(",["T_WHITESPACE","\n            ",83],["T_STRING","Mage_Index_Model_Event",84],["T_DOUBLE_COLON","::",84],["T_STRING","TYPE_SAVE",84],["T_WHITESPACE","\n        ",84],")",["T_WHITESPACE","\n    ",85],")",";",["T_WHITESPACE","\n\n    ",86],["T_PROTECTED","protected",88],["T_WHITESPACE"," ",88],["T_VARIABLE","$_relatedConfigSettings",88],["T_WHITESPACE"," ",88],"=",["T_WHITESPACE"," ",88],["T_ARRAY","array",88],"(",["T_WHITESPACE","\n        ",88],["T_STRING","Mage_Catalog_Helper_Data",89],["T_DOUBLE_COLON","::",89],["T_STRING","XML_PATH_PRICE_SCOPE",89],",",["T_WHITESPACE","\n        ",89],["T_STRING","Mage_CatalogInventory_Model_Stock_Item",90],["T_DOUBLE_COLON","::",90],["T_STRING","XML_PATH_MANAGE_STOCK",90],["T_WHITESPACE","\n    ",90],")",";",["T_WHITESPACE","\n\n    ",91],["T_DOC_COMMENT","\/**\n     * Initialize resource model\n     *\n     *\/",93],["T_WHITESPACE","\n    ",96],["T_PROTECTED","protected",97],["T_WHITESPACE"," ",97],["T_FUNCTION","function",97],["T_WHITESPACE"," ",97],["T_STRING","_construct",97],"(",")",["T_WHITESPACE","\n    ",97],"{",["T_WHITESPACE","\n        ",98],["T_VARIABLE","$this",99],["T_OBJECT_OPERATOR","->",99],["T_STRING","_init",99],"(",["T_CONSTANT_ENCAPSED_STRING","'catalog\/product_indexer_price'",99],")",";",["T_WHITESPACE","\n    ",99],"}",["T_WHITESPACE","\n\n    ",100],["T_DOC_COMMENT","\/**\n     * Retrieve Indexer name\n     *\n     * @return string\n     *\/",102],["T_WHITESPACE","\n    ",106],["T_PUBLIC","public",107],["T_WHITESPACE"," ",107],["T_FUNCTION","function",107],["T_WHITESPACE"," ",107],["T_STRING","getName",107],"(",")",["T_WHITESPACE","\n    ",107],"{",["T_WHITESPACE","\n        ",108],["T_RETURN","return",109],["T_WHITESPACE"," ",109],["T_STRING","Mage",109],["T_DOUBLE_COLON","::",109],["T_STRING","helper",109],"(",["T_CONSTANT_ENCAPSED_STRING","'catalog'",109],")",["T_OBJECT_OPERATOR","->",109],["T_STRING","__",109],"(",["T_CONSTANT_ENCAPSED_STRING","'Product Prices'",109],")",";",["T_WHITESPACE","\n    ",109],"}",["T_WHITESPACE","\n\n    ",110],["T_DOC_COMMENT","\/**\n     * Retrieve Indexer description\n     *\n     * @return string\n     *\/",112],["T_WHITESPACE","\n    ",116],["T_PUBLIC","public",117],["T_WHITESPACE"," ",117],["T_FUNCTION","function",117],["T_WHITESPACE"," ",117],["T_STRING","getDescription",117],"(",")",["T_WHITESPACE","\n    ",117],"{",["T_WHITESPACE","\n        ",118],["T_RETURN","return",119],["T_WHITESPACE"," ",119],["T_STRING","Mage",119],["T_DOUBLE_COLON","::",119],["T_STRING","helper",119],"(",["T_CONSTANT_ENCAPSED_STRING","'catalog'",119],")",["T_OBJECT_OPERATOR","->",119],["T_STRING","__",119],"(",["T_CONSTANT_ENCAPSED_STRING","'Index product prices'",119],")",";",["T_WHITESPACE","\n    ",119],"}",["T_WHITESPACE","\n\n    ",120],["T_DOC_COMMENT","\/**\n     * Retrieve attribute list has an effect on product price\n     *\n     * @return array\n     *\/",122],["T_WHITESPACE","\n    ",126],["T_PROTECTED","protected",127],["T_WHITESPACE"," ",127],["T_FUNCTION","function",127],["T_WHITESPACE"," ",127],["T_STRING","_getDependentAttributes",127],"(",")",["T_WHITESPACE","\n    ",127],"{",["T_WHITESPACE","\n        ",128],["T_RETURN","return",129],["T_WHITESPACE"," ",129],["T_ARRAY","array",129],"(",["T_WHITESPACE","\n            ",129],["T_CONSTANT_ENCAPSED_STRING","'price'",130],",",["T_WHITESPACE","\n            ",130],["T_CONSTANT_ENCAPSED_STRING","'special_price'",131],",",["T_WHITESPACE","\n            ",131],["T_CONSTANT_ENCAPSED_STRING","'special_from_date'",132],",",["T_WHITESPACE","\n            ",132],["T_CONSTANT_ENCAPSED_STRING","'special_to_date'",133],",",["T_WHITESPACE","\n            ",133],["T_CONSTANT_ENCAPSED_STRING","'tax_class_id'",134],",",["T_WHITESPACE","\n            ",134],["T_CONSTANT_ENCAPSED_STRING","'status'",135],",",["T_WHITESPACE","\n            ",135],["T_CONSTANT_ENCAPSED_STRING","'required_options'",136],",",["T_WHITESPACE","\n            ",136],["T_CONSTANT_ENCAPSED_STRING","'force_reindex_required'",137],["T_WHITESPACE","\n        ",137],")",";",["T_WHITESPACE","\n    ",138],"}",["T_WHITESPACE","\n\n    ",139],["T_DOC_COMMENT","\/**\n     * Check if event can be matched by process.\n     * Rewrited for checking configuration settings save (like price scope).\n     *\n     * @param Mage_Index_Model_Event $event\n     * @return bool\n     *\/",141],["T_WHITESPACE","\n    ",147],["T_PUBLIC","public",148],["T_WHITESPACE"," ",148],["T_FUNCTION","function",148],["T_WHITESPACE"," ",148],["T_STRING","matchEvent",148],"(",["T_STRING","Mage_Index_Model_Event",148],["T_WHITESPACE"," ",148],["T_VARIABLE","$event",148],")",["T_WHITESPACE","\n    ",148],"{",["T_WHITESPACE","\n        ",149],["T_VARIABLE","$data",150],["T_WHITESPACE","       ",150],"=",["T_WHITESPACE"," ",150],["T_VARIABLE","$event",150],["T_OBJECT_OPERATOR","->",150],["T_STRING","getNewData",150],"(",")",";",["T_WHITESPACE","\n        ",150],["T_IF","if",151],["T_WHITESPACE"," ",151],"(",["T_ISSET","isset",151],"(",["T_VARIABLE","$data",151],"[",["T_STRING","self",151],["T_DOUBLE_COLON","::",151],["T_STRING","EVENT_MATCH_RESULT_KEY",151],"]",")",")",["T_WHITESPACE"," ",151],"{",["T_WHITESPACE","\n            ",151],["T_RETURN","return",152],["T_WHITESPACE"," ",152],["T_VARIABLE","$data",152],"[",["T_STRING","self",152],["T_DOUBLE_COLON","::",152],["T_STRING","EVENT_MATCH_RESULT_KEY",152],"]",";",["T_WHITESPACE","\n        ",152],"}",["T_WHITESPACE","\n\n        ",153],["T_IF","if",155],["T_WHITESPACE"," ",155],"(",["T_VARIABLE","$event",155],["T_OBJECT_OPERATOR","->",155],["T_STRING","getEntity",155],"(",")",["T_WHITESPACE"," ",155],["T_IS_EQUAL","==",155],["T_WHITESPACE"," ",155],["T_STRING","Mage_Core_Model_Config_Data",155],["T_DOUBLE_COLON","::",155],["T_STRING","ENTITY",155],")",["T_WHITESPACE"," ",155],"{",["T_WHITESPACE","\n            ",155],["T_VARIABLE","$data",156],["T_WHITESPACE"," ",156],"=",["T_WHITESPACE"," ",156],["T_VARIABLE","$event",156],["T_OBJECT_OPERATOR","->",156],["T_STRING","getDataObject",156],"(",")",";",["T_WHITESPACE","\n            ",156],["T_IF","if",157],["T_WHITESPACE"," ",157],"(",["T_VARIABLE","$data",157],["T_WHITESPACE"," ",157],["T_BOOLEAN_AND","&&",157],["T_WHITESPACE"," ",157],["T_STRING","in_array",157],"(",["T_VARIABLE","$data",157],["T_OBJECT_OPERATOR","->",157],["T_STRING","getPath",157],"(",")",",",["T_WHITESPACE"," ",157],["T_VARIABLE","$this",157],["T_OBJECT_OPERATOR","->",157],["T_STRING","_relatedConfigSettings",157],")",")",["T_WHITESPACE"," ",157],"{",["T_WHITESPACE","\n                ",157],["T_VARIABLE","$result",158],["T_WHITESPACE"," ",158],"=",["T_WHITESPACE"," ",158],["T_VARIABLE","$data",158],["T_OBJECT_OPERATOR","->",158],["T_STRING","isValueChanged",158],"(",")",";",["T_WHITESPACE","\n            ",158],"}",["T_WHITESPACE"," ",159],["T_ELSE","else",159],["T_WHITESPACE"," ",159],"{",["T_WHITESPACE","\n                ",159],["T_VARIABLE","$result",160],["T_WHITESPACE"," ",160],"=",["T_WHITESPACE"," ",160],["T_STRING","false",160],";",["T_WHITESPACE","\n            ",160],"}",["T_WHITESPACE","\n        ",161],"}",["T_WHITESPACE"," ",162],["T_ELSEIF","elseif",162],["T_WHITESPACE"," ",162],"(",["T_VARIABLE","$event",162],["T_OBJECT_OPERATOR","->",162],["T_STRING","getEntity",162],"(",")",["T_WHITESPACE"," ",162],["T_IS_EQUAL","==",162],["T_WHITESPACE"," ",162],["T_STRING","Mage_Customer_Model_Group",162],["T_DOUBLE_COLON","::",162],["T_STRING","ENTITY",162],")",["T_WHITESPACE"," ",162],"{",["T_WHITESPACE","\n            ",162],["T_VARIABLE","$result",163],["T_WHITESPACE"," ",163],"=",["T_WHITESPACE"," ",163],["T_VARIABLE","$event",163],["T_OBJECT_OPERATOR","->",163],["T_STRING","getDataObject",163],"(",")",["T_WHITESPACE"," ",163],["T_BOOLEAN_AND","&&",163],["T_WHITESPACE"," ",163],["T_VARIABLE","$event",163],["T_OBJECT_OPERATOR","->",163],["T_STRING","getDataObject",163],"(",")",["T_OBJECT_OPERATOR","->",163],["T_STRING","isObjectNew",163],"(",")",";",["T_WHITESPACE","\n        ",163],"}",["T_WHITESPACE"," ",164],["T_ELSE","else",164],["T_WHITESPACE"," ",164],"{",["T_WHITESPACE","\n            ",164],["T_VARIABLE","$result",165],["T_WHITESPACE"," ",165],"=",["T_WHITESPACE"," ",165],["T_STRING","parent",165],["T_DOUBLE_COLON","::",165],["T_STRING","matchEvent",165],"(",["T_VARIABLE","$event",165],")",";",["T_WHITESPACE","\n        ",165],"}",["T_WHITESPACE","\n\n        ",166],["T_VARIABLE","$event",168],["T_OBJECT_OPERATOR","->",168],["T_STRING","addNewData",168],"(",["T_STRING","self",168],["T_DOUBLE_COLON","::",168],["T_STRING","EVENT_MATCH_RESULT_KEY",168],",",["T_WHITESPACE"," ",168],["T_VARIABLE","$result",168],")",";",["T_WHITESPACE","\n\n        ",168],["T_RETURN","return",170],["T_WHITESPACE"," ",170],["T_VARIABLE","$result",170],";",["T_WHITESPACE","\n    ",170],"}",["T_WHITESPACE","\n\n    ",171],["T_DOC_COMMENT","\/**\n     * Register data required by catalog product delete process\n     *\n     * @param Mage_Index_Model_Event $event\n     *\/",173],["T_WHITESPACE","\n    ",177],["T_PROTECTED","protected",178],["T_WHITESPACE"," ",178],["T_FUNCTION","function",178],["T_WHITESPACE"," ",178],["T_STRING","_registerCatalogProductDeleteEvent",178],"(",["T_STRING","Mage_Index_Model_Event",178],["T_WHITESPACE"," ",178],["T_VARIABLE","$event",178],")",["T_WHITESPACE","\n    ",178],"{",["T_WHITESPACE","\n        ",179],["T_COMMENT","\/* @var $product Mage_Catalog_Model_Product *\/",180],["T_WHITESPACE","\n        ",180],["T_VARIABLE","$product",181],["T_WHITESPACE"," ",181],"=",["T_WHITESPACE"," ",181],["T_VARIABLE","$event",181],["T_OBJECT_OPERATOR","->",181],["T_STRING","getDataObject",181],"(",")",";",["T_WHITESPACE","\n\n        ",181],["T_VARIABLE","$parentIds",183],["T_WHITESPACE"," ",183],"=",["T_WHITESPACE"," ",183],["T_VARIABLE","$this",183],["T_OBJECT_OPERATOR","->",183],["T_STRING","_getResource",183],"(",")",["T_OBJECT_OPERATOR","->",183],["T_STRING","getProductParentsByChild",183],"(",["T_VARIABLE","$product",183],["T_OBJECT_OPERATOR","->",183],["T_STRING","getId",183],"(",")",")",";",["T_WHITESPACE","\n        ",183],["T_IF","if",184],["T_WHITESPACE"," ",184],"(",["T_VARIABLE","$parentIds",184],")",["T_WHITESPACE"," ",184],"{",["T_WHITESPACE","\n            ",184],["T_VARIABLE","$event",185],["T_OBJECT_OPERATOR","->",185],["T_STRING","addNewData",185],"(",["T_CONSTANT_ENCAPSED_STRING","'reindex_price_parent_ids'",185],",",["T_WHITESPACE"," ",185],["T_VARIABLE","$parentIds",185],")",";",["T_WHITESPACE","\n        ",185],"}",["T_WHITESPACE","\n    ",186],"}",["T_WHITESPACE","\n\n    ",187],["T_DOC_COMMENT","\/**\n     * Register data required by catalog product save process\n     *\n     * @param Mage_Index_Model_Event $event\n     *\/",189],["T_WHITESPACE","\n    ",193],["T_PROTECTED","protected",194],["T_WHITESPACE"," ",194],["T_FUNCTION","function",194],["T_WHITESPACE"," ",194],["T_STRING","_registerCatalogProductSaveEvent",194],"(",["T_STRING","Mage_Index_Model_Event",194],["T_WHITESPACE"," ",194],["T_VARIABLE","$event",194],")",["T_WHITESPACE","\n    ",194],"{",["T_WHITESPACE","\n        ",195],["T_COMMENT","\/* @var $product Mage_Catalog_Model_Product *\/",196],["T_WHITESPACE","\n        ",196],["T_VARIABLE","$product",197],["T_WHITESPACE","      ",197],"=",["T_WHITESPACE"," ",197],["T_VARIABLE","$event",197],["T_OBJECT_OPERATOR","->",197],["T_STRING","getDataObject",197],"(",")",";",["T_WHITESPACE","\n        ",197],["T_VARIABLE","$attributes",198],["T_WHITESPACE","   ",198],"=",["T_WHITESPACE"," ",198],["T_VARIABLE","$this",198],["T_OBJECT_OPERATOR","->",198],["T_STRING","_getDependentAttributes",198],"(",")",";",["T_WHITESPACE","\n        ",198],["T_VARIABLE","$reindexPrice",199],["T_WHITESPACE"," ",199],"=",["T_WHITESPACE"," ",199],["T_VARIABLE","$product",199],["T_OBJECT_OPERATOR","->",199],["T_STRING","getIsRelationsChanged",199],"(",")",["T_WHITESPACE"," ",199],["T_BOOLEAN_OR","||",199],["T_WHITESPACE"," ",199],["T_VARIABLE","$product",199],["T_OBJECT_OPERATOR","->",199],["T_STRING","getIsCustomOptionChanged",199],"(",")",["T_WHITESPACE","\n            ",199],["T_BOOLEAN_OR","||",200],["T_WHITESPACE"," ",200],["T_VARIABLE","$product",200],["T_OBJECT_OPERATOR","->",200],["T_STRING","dataHasChangedFor",200],"(",["T_CONSTANT_ENCAPSED_STRING","'tier_price_changed'",200],")",["T_WHITESPACE","\n            ",200],["T_BOOLEAN_OR","||",201],["T_WHITESPACE"," ",201],["T_VARIABLE","$product",201],["T_OBJECT_OPERATOR","->",201],["T_STRING","getIsChangedWebsites",201],"(",")",["T_WHITESPACE","\n            ",201],["T_BOOLEAN_OR","||",202],["T_WHITESPACE"," ",202],["T_VARIABLE","$product",202],["T_OBJECT_OPERATOR","->",202],["T_STRING","getForceReindexRequired",202],"(",")",";",["T_WHITESPACE","\n\n        ",202],["T_FOREACH","foreach",204],["T_WHITESPACE"," ",204],"(",["T_VARIABLE","$attributes",204],["T_WHITESPACE"," ",204],["T_AS","as",204],["T_WHITESPACE"," ",204],["T_VARIABLE","$attributeCode",204],")",["T_WHITESPACE"," ",204],"{",["T_WHITESPACE","\n            ",204],["T_VARIABLE","$reindexPrice",205],["T_WHITESPACE"," ",205],"=",["T_WHITESPACE"," ",205],["T_VARIABLE","$reindexPrice",205],["T_WHITESPACE"," ",205],["T_BOOLEAN_OR","||",205],["T_WHITESPACE"," ",205],["T_VARIABLE","$product",205],["T_OBJECT_OPERATOR","->",205],["T_STRING","dataHasChangedFor",205],"(",["T_VARIABLE","$attributeCode",205],")",";",["T_WHITESPACE","\n        ",205],"}",["T_WHITESPACE","\n\n        ",206],["T_IF","if",208],["T_WHITESPACE"," ",208],"(",["T_VARIABLE","$reindexPrice",208],")",["T_WHITESPACE"," ",208],"{",["T_WHITESPACE","\n            ",208],["T_VARIABLE","$event",209],["T_OBJECT_OPERATOR","->",209],["T_STRING","addNewData",209],"(",["T_CONSTANT_ENCAPSED_STRING","'product_type_id'",209],",",["T_WHITESPACE"," ",209],["T_VARIABLE","$product",209],["T_OBJECT_OPERATOR","->",209],["T_STRING","getTypeId",209],"(",")",")",";",["T_WHITESPACE","\n            ",209],["T_VARIABLE","$event",210],["T_OBJECT_OPERATOR","->",210],["T_STRING","addNewData",210],"(",["T_CONSTANT_ENCAPSED_STRING","'reindex_price'",210],",",["T_WHITESPACE"," ",210],["T_LNUMBER","1",210],")",";",["T_WHITESPACE","\n        ",210],"}",["T_WHITESPACE","\n    ",211],"}",["T_WHITESPACE","\n\n    ",212],["T_PROTECTED","protected",214],["T_WHITESPACE"," ",214],["T_FUNCTION","function",214],["T_WHITESPACE"," ",214],["T_STRING","_registerCatalogProductMassActionEvent",214],"(",["T_STRING","Mage_Index_Model_Event",214],["T_WHITESPACE"," ",214],["T_VARIABLE","$event",214],")",["T_WHITESPACE","\n    ",214],"{",["T_WHITESPACE","\n        ",215],["T_COMMENT","\/* @var $actionObject Varien_Object *\/",216],["T_WHITESPACE","\n        ",216],["T_VARIABLE","$actionObject",217],["T_WHITESPACE"," ",217],"=",["T_WHITESPACE"," ",217],["T_VARIABLE","$event",217],["T_OBJECT_OPERATOR","->",217],["T_STRING","getDataObject",217],"(",")",";",["T_WHITESPACE","\n        ",217],["T_VARIABLE","$attributes",218],["T_WHITESPACE","   ",218],"=",["T_WHITESPACE"," ",218],["T_VARIABLE","$this",218],["T_OBJECT_OPERATOR","->",218],["T_STRING","_getDependentAttributes",218],"(",")",";",["T_WHITESPACE","\n        ",218],["T_VARIABLE","$reindexPrice",219],["T_WHITESPACE"," ",219],"=",["T_WHITESPACE"," ",219],["T_STRING","false",219],";",["T_WHITESPACE","\n\n        ",219],["T_COMMENT","\/\/ check if attributes changed\n",221],["T_WHITESPACE","        ",222],["T_VARIABLE","$attrData",222],["T_WHITESPACE"," ",222],"=",["T_WHITESPACE"," ",222],["T_VARIABLE","$actionObject",222],["T_OBJECT_OPERATOR","->",222],["T_STRING","getAttributesData",222],"(",")",";",["T_WHITESPACE","\n        ",222],["T_IF","if",223],["T_WHITESPACE"," ",223],"(",["T_STRING","is_array",223],"(",["T_VARIABLE","$attrData",223],")",")",["T_WHITESPACE"," ",223],"{",["T_WHITESPACE","\n            ",223],["T_FOREACH","foreach",224],["T_WHITESPACE"," ",224],"(",["T_VARIABLE","$attributes",224],["T_WHITESPACE"," ",224],["T_AS","as",224],["T_WHITESPACE"," ",224],["T_VARIABLE","$attributeCode",224],")",["T_WHITESPACE"," ",224],"{",["T_WHITESPACE","\n                ",224],["T_IF","if",225],["T_WHITESPACE"," ",225],"(",["T_STRING","array_key_exists",225],"(",["T_VARIABLE","$attributeCode",225],",",["T_WHITESPACE"," ",225],["T_VARIABLE","$attrData",225],")",")",["T_WHITESPACE"," ",225],"{",["T_WHITESPACE","\n                    ",225],["T_VARIABLE","$reindexPrice",226],["T_WHITESPACE"," ",226],"=",["T_WHITESPACE"," ",226],["T_STRING","true",226],";",["T_WHITESPACE","\n                    ",226],["T_BREAK","break",227],";",["T_WHITESPACE","\n                ",227],"}",["T_WHITESPACE","\n            ",228],"}",["T_WHITESPACE","\n        ",229],"}",["T_WHITESPACE","\n\n        ",230],["T_COMMENT","\/\/ check changed websites\n",232],["T_WHITESPACE","        ",233],["T_IF","if",233],["T_WHITESPACE"," ",233],"(",["T_VARIABLE","$actionObject",233],["T_OBJECT_OPERATOR","->",233],["T_STRING","getWebsiteIds",233],"(",")",")",["T_WHITESPACE"," ",233],"{",["T_WHITESPACE","\n            ",233],["T_VARIABLE","$reindexPrice",234],["T_WHITESPACE"," ",234],"=",["T_WHITESPACE"," ",234],["T_STRING","true",234],";",["T_WHITESPACE","\n        ",234],"}",["T_WHITESPACE","\n\n        ",235],["T_COMMENT","\/\/ register affected products\n",237],["T_WHITESPACE","        ",238],["T_IF","if",238],["T_WHITESPACE"," ",238],"(",["T_VARIABLE","$reindexPrice",238],")",["T_WHITESPACE"," ",238],"{",["T_WHITESPACE","\n            ",238],["T_VARIABLE","$event",239],["T_OBJECT_OPERATOR","->",239],["T_STRING","addNewData",239],"(",["T_CONSTANT_ENCAPSED_STRING","'reindex_price_product_ids'",239],",",["T_WHITESPACE"," ",239],["T_VARIABLE","$actionObject",239],["T_OBJECT_OPERATOR","->",239],["T_STRING","getProductIds",239],"(",")",")",";",["T_WHITESPACE","\n        ",239],"}",["T_WHITESPACE","\n    ",240],"}",["T_WHITESPACE","\n\n    ",241],["T_DOC_COMMENT","\/**\n     * Register data required by process in event object\n     *\n     * @param Mage_Index_Model_Event $event\n     *\/",243],["T_WHITESPACE","\n    ",247],["T_PROTECTED","protected",248],["T_WHITESPACE"," ",248],["T_FUNCTION","function",248],["T_WHITESPACE"," ",248],["T_STRING","_registerEvent",248],"(",["T_STRING","Mage_Index_Model_Event",248],["T_WHITESPACE"," ",248],["T_VARIABLE","$event",248],")",["T_WHITESPACE","\n    ",248],"{",["T_WHITESPACE","\n        ",249],["T_VARIABLE","$event",250],["T_OBJECT_OPERATOR","->",250],["T_STRING","addNewData",250],"(",["T_STRING","self",250],["T_DOUBLE_COLON","::",250],["T_STRING","EVENT_MATCH_RESULT_KEY",250],",",["T_WHITESPACE"," ",250],["T_STRING","true",250],")",";",["T_WHITESPACE","\n        ",250],["T_VARIABLE","$entity",251],["T_WHITESPACE"," ",251],"=",["T_WHITESPACE"," ",251],["T_VARIABLE","$event",251],["T_OBJECT_OPERATOR","->",251],["T_STRING","getEntity",251],"(",")",";",["T_WHITESPACE","\n\n        ",251],["T_IF","if",253],["T_WHITESPACE"," ",253],"(",["T_VARIABLE","$entity",253],["T_WHITESPACE"," ",253],["T_IS_EQUAL","==",253],["T_WHITESPACE"," ",253],["T_STRING","Mage_Core_Model_Config_Data",253],["T_DOUBLE_COLON","::",253],["T_STRING","ENTITY",253],["T_WHITESPACE"," ",253],["T_BOOLEAN_OR","||",253],["T_WHITESPACE"," ",253],["T_VARIABLE","$entity",253],["T_WHITESPACE"," ",253],["T_IS_EQUAL","==",253],["T_WHITESPACE"," ",253],["T_STRING","Mage_Customer_Model_Group",253],["T_DOUBLE_COLON","::",253],["T_STRING","ENTITY",253],")",["T_WHITESPACE"," ",253],"{",["T_WHITESPACE","\n            ",253],["T_VARIABLE","$process",254],["T_WHITESPACE"," ",254],"=",["T_WHITESPACE"," ",254],["T_VARIABLE","$event",254],["T_OBJECT_OPERATOR","->",254],["T_STRING","getProcess",254],"(",")",";",["T_WHITESPACE","\n            ",254],["T_VARIABLE","$process",255],["T_OBJECT_OPERATOR","->",255],["T_STRING","changeStatus",255],"(",["T_STRING","Mage_Index_Model_Process",255],["T_DOUBLE_COLON","::",255],["T_STRING","STATUS_REQUIRE_REINDEX",255],")",";",["T_WHITESPACE","\n        ",255],"}",["T_WHITESPACE"," ",256],["T_ELSE","else",256],["T_WHITESPACE"," ",256],["T_IF","if",256],["T_WHITESPACE"," ",256],"(",["T_VARIABLE","$entity",256],["T_WHITESPACE"," ",256],["T_IS_EQUAL","==",256],["T_WHITESPACE"," ",256],["T_STRING","Mage_Catalog_Model_Convert_Adapter_Product",256],["T_DOUBLE_COLON","::",256],["T_STRING","ENTITY",256],")",["T_WHITESPACE"," ",256],"{",["T_WHITESPACE","\n            ",256],["T_VARIABLE","$event",257],["T_OBJECT_OPERATOR","->",257],["T_STRING","addNewData",257],"(",["T_CONSTANT_ENCAPSED_STRING","'catalog_product_price_reindex_all'",257],",",["T_WHITESPACE"," ",257],["T_STRING","true",257],")",";",["T_WHITESPACE","\n        ",257],"}",["T_WHITESPACE"," ",258],["T_ELSE","else",258],["T_WHITESPACE"," ",258],["T_IF","if",258],["T_WHITESPACE"," ",258],"(",["T_VARIABLE","$entity",258],["T_WHITESPACE"," ",258],["T_IS_EQUAL","==",258],["T_WHITESPACE"," ",258],["T_STRING","Mage_Catalog_Model_Product",258],["T_DOUBLE_COLON","::",258],["T_STRING","ENTITY",258],")",["T_WHITESPACE"," ",258],"{",["T_WHITESPACE","\n            ",258],["T_SWITCH","switch",259],["T_WHITESPACE"," ",259],"(",["T_VARIABLE","$event",259],["T_OBJECT_OPERATOR","->",259],["T_STRING","getType",259],"(",")",")",["T_WHITESPACE"," ",259],"{",["T_WHITESPACE","\n                ",259],["T_CASE","case",260],["T_WHITESPACE"," ",260],["T_STRING","Mage_Index_Model_Event",260],["T_DOUBLE_COLON","::",260],["T_STRING","TYPE_DELETE",260],":",["T_WHITESPACE","\n                    ",260],["T_VARIABLE","$this",261],["T_OBJECT_OPERATOR","->",261],["T_STRING","_registerCatalogProductDeleteEvent",261],"(",["T_VARIABLE","$event",261],")",";",["T_WHITESPACE","\n                    ",261],["T_BREAK","break",262],";",["T_WHITESPACE","\n\n                ",262],["T_CASE","case",264],["T_WHITESPACE"," ",264],["T_STRING","Mage_Index_Model_Event",264],["T_DOUBLE_COLON","::",264],["T_STRING","TYPE_SAVE",264],":",["T_WHITESPACE","\n                    ",264],["T_VARIABLE","$this",265],["T_OBJECT_OPERATOR","->",265],["T_STRING","_registerCatalogProductSaveEvent",265],"(",["T_VARIABLE","$event",265],")",";",["T_WHITESPACE","\n                    ",265],["T_BREAK","break",266],";",["T_WHITESPACE","\n\n                ",266],["T_CASE","case",268],["T_WHITESPACE"," ",268],["T_STRING","Mage_Index_Model_Event",268],["T_DOUBLE_COLON","::",268],["T_STRING","TYPE_MASS_ACTION",268],":",["T_WHITESPACE","\n                    ",268],["T_VARIABLE","$this",269],["T_OBJECT_OPERATOR","->",269],["T_STRING","_registerCatalogProductMassActionEvent",269],"(",["T_VARIABLE","$event",269],")",";",["T_WHITESPACE","\n                    ",269],["T_BREAK","break",270],";",["T_WHITESPACE","\n                ",270],["T_CASE","case",271],["T_WHITESPACE"," ",271],["T_STRING","self",271],["T_DOUBLE_COLON","::",271],["T_STRING","EVENT_TYPE_REINDEX_PRICE",271],":",["T_WHITESPACE","\n                    ",271],["T_VARIABLE","$event",272],["T_OBJECT_OPERATOR","->",272],["T_STRING","addNewData",272],"(",["T_CONSTANT_ENCAPSED_STRING","'id'",272],",",["T_WHITESPACE"," ",272],["T_VARIABLE","$event",272],["T_OBJECT_OPERATOR","->",272],["T_STRING","getDataObject",272],"(",")",["T_OBJECT_OPERATOR","->",272],["T_STRING","getId",272],"(",")",")",";",["T_WHITESPACE","\n                    ",272],["T_BREAK","break",273],";",["T_WHITESPACE","\n            ",273],"}",["T_WHITESPACE","\n\n            ",274],["T_COMMENT","\/\/ call product type indexers registerEvent\n",276],["T_WHITESPACE","            ",277],["T_VARIABLE","$indexers",277],["T_WHITESPACE"," ",277],"=",["T_WHITESPACE"," ",277],["T_VARIABLE","$this",277],["T_OBJECT_OPERATOR","->",277],["T_STRING","_getResource",277],"(",")",["T_OBJECT_OPERATOR","->",277],["T_STRING","getTypeIndexers",277],"(",")",";",["T_WHITESPACE","\n            ",277],["T_FOREACH","foreach",278],["T_WHITESPACE"," ",278],"(",["T_VARIABLE","$indexers",278],["T_WHITESPACE"," ",278],["T_AS","as",278],["T_WHITESPACE"," ",278],["T_VARIABLE","$indexer",278],")",["T_WHITESPACE"," ",278],"{",["T_WHITESPACE","\n                ",278],["T_VARIABLE","$indexer",279],["T_OBJECT_OPERATOR","->",279],["T_STRING","registerEvent",279],"(",["T_VARIABLE","$event",279],")",";",["T_WHITESPACE","\n            ",279],"}",["T_WHITESPACE","\n        ",280],"}",["T_WHITESPACE","\n    ",281],"}",["T_WHITESPACE","\n\n    ",282],["T_DOC_COMMENT","\/**\n     * Process event\n     *\n     * @param Mage_Index_Model_Event $event\n     *\/",284],["T_WHITESPACE","\n    ",288],["T_PROTECTED","protected",289],["T_WHITESPACE"," ",289],["T_FUNCTION","function",289],["T_WHITESPACE"," ",289],["T_STRING","_processEvent",289],"(",["T_STRING","Mage_Index_Model_Event",289],["T_WHITESPACE"," ",289],["T_VARIABLE","$event",289],")",["T_WHITESPACE","\n    ",289],"{",["T_WHITESPACE","\n        ",290],["T_VARIABLE","$data",291],["T_WHITESPACE"," ",291],"=",["T_WHITESPACE"," ",291],["T_VARIABLE","$event",291],["T_OBJECT_OPERATOR","->",291],["T_STRING","getNewData",291],"(",")",";",["T_WHITESPACE","\n        ",291],["T_IF","if",292],["T_WHITESPACE"," ",292],"(",["T_VARIABLE","$event",292],["T_OBJECT_OPERATOR","->",292],["T_STRING","getType",292],"(",")",["T_WHITESPACE"," ",292],["T_IS_EQUAL","==",292],["T_WHITESPACE"," ",292],["T_STRING","self",292],["T_DOUBLE_COLON","::",292],["T_STRING","EVENT_TYPE_REINDEX_PRICE",292],")",["T_WHITESPACE"," ",292],"{",["T_WHITESPACE","\n            ",292],["T_VARIABLE","$this",293],["T_OBJECT_OPERATOR","->",293],["T_STRING","_getResource",293],"(",")",["T_OBJECT_OPERATOR","->",293],["T_STRING","reindexProductIds",293],"(",["T_VARIABLE","$data",293],"[",["T_CONSTANT_ENCAPSED_STRING","'id'",293],"]",")",";",["T_WHITESPACE","\n            ",293],["T_RETURN","return",294],";",["T_WHITESPACE","\n        ",294],"}",["T_WHITESPACE","\n        ",295],["T_IF","if",296],["T_WHITESPACE"," ",296],"(","!",["T_EMPTY","empty",296],"(",["T_VARIABLE","$data",296],"[",["T_CONSTANT_ENCAPSED_STRING","'catalog_product_price_reindex_all'",296],"]",")",")",["T_WHITESPACE"," ",296],"{",["T_WHITESPACE","\n            ",296],["T_VARIABLE","$this",297],["T_OBJECT_OPERATOR","->",297],["T_STRING","reindexAll",297],"(",")",";",["T_WHITESPACE","\n        ",297],"}",["T_WHITESPACE","\n        ",298],["T_IF","if",299],["T_WHITESPACE"," ",299],"(",["T_EMPTY","empty",299],"(",["T_VARIABLE","$data",299],"[",["T_CONSTANT_ENCAPSED_STRING","'catalog_product_price_skip_call_event_handler'",299],"]",")",")",["T_WHITESPACE"," ",299],"{",["T_WHITESPACE","\n            ",299],["T_VARIABLE","$this",300],["T_OBJECT_OPERATOR","->",300],["T_STRING","callEventHandler",300],"(",["T_VARIABLE","$event",300],")",";",["T_WHITESPACE","\n        ",300],"}",["T_WHITESPACE","\n    ",301],"}",["T_WHITESPACE","\n",302],"}",["T_WHITESPACE","\n",303]]
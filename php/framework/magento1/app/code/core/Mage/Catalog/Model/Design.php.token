[["T_OPEN_TAG","<?php\n",1],["T_DOC_COMMENT","\/**\n * Magento\n *\n * NOTICE OF LICENSE\n *\n * This source file is subject to the Open Software License (OSL 3.0)\n * that is bundled with this package in the file LICENSE.txt.\n * It is also available through the world-wide-web at this URL:\n * http:\/\/opensource.org\/licenses\/osl-3.0.php\n * If you did not receive a copy of the license and are unable to\n * obtain it through the world-wide-web, please send an email\n * to license@magento.com so we can send you a copy immediately.\n *\n * DISCLAIMER\n *\n * Do not edit or add to this file if you wish to upgrade Magento to newer\n * versions in the future. If you wish to customize Magento for your\n * needs please refer to http:\/\/www.magento.com for more information.\n *\n * @category    Mage\n * @package     Mage_Catalog\n * @copyright  Copyright (c) 2006-2016 X.commerce, Inc. and affiliates (http:\/\/www.magento.com)\n * @license    http:\/\/opensource.org\/licenses\/osl-3.0.php  Open Software License (OSL 3.0)\n *\/",2],["T_WHITESPACE","\n\n\n",25],["T_DOC_COMMENT","\/**\n * Catalog Custom Category design Model\n *\n * @category   Mage\n * @package    Mage_Catalog\n * @author     Magento Core Team <core@magentocommerce.com>\n *\/",28],["T_WHITESPACE","\n",34],["T_CLASS","class",35],["T_WHITESPACE"," ",35],["T_STRING","Mage_Catalog_Model_Design",35],["T_WHITESPACE"," ",35],["T_EXTENDS","extends",35],["T_WHITESPACE"," ",35],["T_STRING","Mage_Core_Model_Abstract",35],["T_WHITESPACE","\n",35],"{",["T_WHITESPACE","\n    ",36],["T_CONST","const",37],["T_WHITESPACE"," ",37],["T_STRING","APPLY_FOR_PRODUCT",37],["T_WHITESPACE","     ",37],"=",["T_WHITESPACE"," ",37],["T_LNUMBER","1",37],";",["T_WHITESPACE","\n    ",37],["T_CONST","const",38],["T_WHITESPACE"," ",38],["T_STRING","APPLY_FOR_CATEGORY",38],["T_WHITESPACE","    ",38],"=",["T_WHITESPACE"," ",38],["T_LNUMBER","2",38],";",["T_WHITESPACE","\n\n    ",38],["T_DOC_COMMENT","\/**\n     * @deprecated after 1.4.1.0\n     * Category \/ Custom Design \/ Apply To constants\n     *\/",40],["T_WHITESPACE","\n    ",43],["T_CONST","const",44],["T_WHITESPACE"," ",44],["T_STRING","CATEGORY_APPLY_CATEGORY_AND_PRODUCT_RECURSIVE",44],["T_WHITESPACE"," ",44],"=",["T_WHITESPACE"," ",44],["T_LNUMBER","1",44],";",["T_WHITESPACE","\n    ",44],["T_CONST","const",45],["T_WHITESPACE"," ",45],["T_STRING","CATEGORY_APPLY_CATEGORY_ONLY",45],["T_WHITESPACE","                  ",45],"=",["T_WHITESPACE"," ",45],["T_LNUMBER","2",45],";",["T_WHITESPACE","\n    ",45],["T_CONST","const",46],["T_WHITESPACE"," ",46],["T_STRING","CATEGORY_APPLY_CATEGORY_AND_PRODUCT_ONLY",46],["T_WHITESPACE","      ",46],"=",["T_WHITESPACE"," ",46],["T_LNUMBER","3",46],";",["T_WHITESPACE","\n    ",46],["T_CONST","const",47],["T_WHITESPACE"," ",47],["T_STRING","CATEGORY_APPLY_CATEGORY_RECURSIVE",47],["T_WHITESPACE","             ",47],"=",["T_WHITESPACE"," ",47],["T_LNUMBER","4",47],";",["T_WHITESPACE","\n\n    ",47],["T_DOC_COMMENT","\/**\n     * Apply design from catalog object\n     *\n     * @deprecated after 1.4.2.0-beta1\n     *\n     * @param array|Mage_Catalog_Model_Category|Mage_Catalog_Model_Product $object\n     * @param int $calledFrom\n     * @return Mage_Catalog_Model_Design\n     *\/",49],["T_WHITESPACE","\n    ",57],["T_PUBLIC","public",58],["T_WHITESPACE"," ",58],["T_FUNCTION","function",58],["T_WHITESPACE"," ",58],["T_STRING","applyDesign",58],"(",["T_VARIABLE","$object",58],",",["T_WHITESPACE"," ",58],["T_VARIABLE","$calledFrom",58],["T_WHITESPACE"," ",58],"=",["T_WHITESPACE"," ",58],["T_LNUMBER","0",58],")",["T_WHITESPACE","\n    ",58],"{",["T_WHITESPACE","\n        ",59],["T_IF","if",60],["T_WHITESPACE"," ",60],"(",["T_VARIABLE","$calledFrom",60],["T_WHITESPACE"," ",60],["T_IS_NOT_EQUAL","!=",60],["T_WHITESPACE"," ",60],["T_STRING","self",60],["T_DOUBLE_COLON","::",60],["T_STRING","APPLY_FOR_CATEGORY",60],["T_WHITESPACE"," ",60],["T_BOOLEAN_AND","&&",60],["T_WHITESPACE"," ",60],["T_VARIABLE","$calledFrom",60],["T_WHITESPACE"," ",60],["T_IS_NOT_EQUAL","!=",60],["T_WHITESPACE"," ",60],["T_STRING","self",60],["T_DOUBLE_COLON","::",60],["T_STRING","APPLY_FOR_PRODUCT",60],")",["T_WHITESPACE"," ",60],"{",["T_WHITESPACE","\n            ",60],["T_RETURN","return",61],["T_WHITESPACE"," ",61],["T_VARIABLE","$this",61],";",["T_WHITESPACE","\n        ",61],"}",["T_WHITESPACE","\n\n        ",62],["T_COMMENT","\/\/ If Flat Data enabled then use it but only on frontend\n",64],["T_WHITESPACE","        ",65],["T_IF","if",65],["T_WHITESPACE"," ",65],"(",["T_STRING","Mage",65],["T_DOUBLE_COLON","::",65],["T_STRING","helper",65],"(",["T_CONSTANT_ENCAPSED_STRING","'catalog\/category_flat'",65],")",["T_OBJECT_OPERATOR","->",65],["T_STRING","isAvailable",65],"(",")",["T_WHITESPACE"," ",65],["T_BOOLEAN_AND","&&",65],["T_WHITESPACE"," ",65],"!",["T_STRING","Mage",65],["T_DOUBLE_COLON","::",65],["T_STRING","app",65],"(",")",["T_OBJECT_OPERATOR","->",65],["T_STRING","getStore",65],"(",")",["T_OBJECT_OPERATOR","->",65],["T_STRING","isAdmin",65],"(",")",")",["T_WHITESPACE"," ",65],"{",["T_WHITESPACE","\n            ",65],["T_VARIABLE","$this",66],["T_OBJECT_OPERATOR","->",66],["T_STRING","_applyDesign",66],"(",["T_VARIABLE","$object",66],",",["T_WHITESPACE"," ",66],["T_VARIABLE","$calledFrom",66],")",";",["T_WHITESPACE","\n        ",66],"}",["T_WHITESPACE"," ",67],["T_ELSE","else",67],["T_WHITESPACE"," ",67],"{",["T_WHITESPACE","\n            ",67],["T_VARIABLE","$this",68],["T_OBJECT_OPERATOR","->",68],["T_STRING","_inheritDesign",68],"(",["T_VARIABLE","$object",68],",",["T_WHITESPACE"," ",68],["T_VARIABLE","$calledFrom",68],")",";",["T_WHITESPACE","\n        ",68],"}",["T_WHITESPACE","\n\n        ",69],["T_RETURN","return",71],["T_WHITESPACE"," ",71],["T_VARIABLE","$this",71],";",["T_WHITESPACE","\n    ",71],"}",["T_WHITESPACE","\n\n    ",72],["T_DOC_COMMENT","\/**\n     * Apply package and theme\n     *\n     * @param string $package\n     * @param string $theme\n     *\/",74],["T_WHITESPACE","\n    ",79],["T_PROTECTED","protected",80],["T_WHITESPACE"," ",80],["T_FUNCTION","function",80],["T_WHITESPACE"," ",80],["T_STRING","_apply",80],"(",["T_VARIABLE","$package",80],",",["T_WHITESPACE"," ",80],["T_VARIABLE","$theme",80],")",["T_WHITESPACE","\n    ",80],"{",["T_WHITESPACE","\n        ",81],["T_STRING","Mage",82],["T_DOUBLE_COLON","::",82],["T_STRING","getSingleton",82],"(",["T_CONSTANT_ENCAPSED_STRING","'core\/design_package'",82],")",["T_WHITESPACE","\n            ",82],["T_OBJECT_OPERATOR","->",83],["T_STRING","setPackageName",83],"(",["T_VARIABLE","$package",83],")",["T_WHITESPACE","\n            ",83],["T_OBJECT_OPERATOR","->",84],["T_STRING","setTheme",84],"(",["T_VARIABLE","$theme",84],")",";",["T_WHITESPACE","\n    ",84],"}",["T_WHITESPACE","\n\n    ",85],["T_DOC_COMMENT","\/**\n     * Apply custom design\n     *\n     * @param string $design\n     *\/",87],["T_WHITESPACE","\n    ",91],["T_PUBLIC","public",92],["T_WHITESPACE"," ",92],["T_FUNCTION","function",92],["T_WHITESPACE"," ",92],["T_STRING","applyCustomDesign",92],"(",["T_VARIABLE","$design",92],")",["T_WHITESPACE","\n    ",92],"{",["T_WHITESPACE","\n        ",93],["T_VARIABLE","$designInfo",94],["T_WHITESPACE"," ",94],"=",["T_WHITESPACE"," ",94],["T_STRING","explode",94],"(",["T_CONSTANT_ENCAPSED_STRING","'\/'",94],",",["T_WHITESPACE"," ",94],["T_VARIABLE","$design",94],")",";",["T_WHITESPACE","\n        ",94],["T_IF","if",95],["T_WHITESPACE"," ",95],"(",["T_STRING","count",95],"(",["T_VARIABLE","$designInfo",95],")",["T_WHITESPACE"," ",95],["T_IS_NOT_EQUAL","!=",95],["T_WHITESPACE"," ",95],["T_LNUMBER","2",95],")",["T_WHITESPACE"," ",95],"{",["T_WHITESPACE","\n            ",95],["T_RETURN","return",96],["T_WHITESPACE"," ",96],["T_STRING","false",96],";",["T_WHITESPACE","\n        ",96],"}",["T_WHITESPACE","\n        ",97],["T_VARIABLE","$package",98],["T_WHITESPACE"," ",98],"=",["T_WHITESPACE"," ",98],["T_VARIABLE","$designInfo",98],"[",["T_LNUMBER","0",98],"]",";",["T_WHITESPACE","\n        ",98],["T_VARIABLE","$theme",99],["T_WHITESPACE","   ",99],"=",["T_WHITESPACE"," ",99],["T_VARIABLE","$designInfo",99],"[",["T_LNUMBER","1",99],"]",";",["T_WHITESPACE","\n        ",99],["T_VARIABLE","$this",100],["T_OBJECT_OPERATOR","->",100],["T_STRING","_apply",100],"(",["T_VARIABLE","$package",100],",",["T_WHITESPACE"," ",100],["T_VARIABLE","$theme",100],")",";",["T_WHITESPACE","\n    ",100],"}",["T_WHITESPACE","\n\n    ",101],["T_DOC_COMMENT","\/**\n     * Check is allow apply for\n     *\n     * @deprecated after 1.4.1.0\n     *\n     * @param int $applyForObject\n     * @param int $applyTo\n     * @param int $pass\n     * @return bool\n     *\/",103],["T_WHITESPACE","\n    ",112],["T_PROTECTED","protected",113],["T_WHITESPACE"," ",113],["T_FUNCTION","function",113],["T_WHITESPACE"," ",113],["T_STRING","_isApplyFor",113],"(",["T_VARIABLE","$applyForObject",113],",",["T_WHITESPACE"," ",113],["T_VARIABLE","$applyTo",113],",",["T_WHITESPACE"," ",113],["T_VARIABLE","$pass",113],["T_WHITESPACE"," ",113],"=",["T_WHITESPACE"," ",113],["T_LNUMBER","0",113],")",["T_WHITESPACE","\n    ",113],"{",["T_WHITESPACE","\n        ",114],["T_VARIABLE","$hasError",115],["T_WHITESPACE"," ",115],"=",["T_WHITESPACE"," ",115],["T_STRING","false",115],";",["T_WHITESPACE","\n\n        ",115],["T_IF","if",117],["T_WHITESPACE"," ",117],"(",["T_VARIABLE","$pass",117],["T_WHITESPACE"," ",117],["T_IS_EQUAL","==",117],["T_WHITESPACE"," ",117],["T_LNUMBER","0",117],")",["T_WHITESPACE"," ",117],"{",["T_WHITESPACE","\n            ",117],["T_SWITCH","switch",118],["T_WHITESPACE"," ",118],"(",["T_VARIABLE","$applyForObject",118],")",["T_WHITESPACE"," ",118],"{",["T_WHITESPACE","\n                ",118],["T_CASE","case",119],["T_WHITESPACE"," ",119],["T_STRING","self",119],["T_DOUBLE_COLON","::",119],["T_STRING","APPLY_FOR_CATEGORY",119],":",["T_WHITESPACE","\n                    ",119],["T_BREAK","break",120],";",["T_WHITESPACE","\n                ",120],["T_CASE","case",121],["T_WHITESPACE"," ",121],["T_STRING","self",121],["T_DOUBLE_COLON","::",121],["T_STRING","APPLY_FOR_PRODUCT",121],":",["T_WHITESPACE","\n                    ",121],["T_VARIABLE","$validApplyTo",122],["T_WHITESPACE"," ",122],"=",["T_WHITESPACE"," ",122],["T_ARRAY","array",122],"(",["T_WHITESPACE","\n                        ",122],["T_STRING","self",123],["T_DOUBLE_COLON","::",123],["T_STRING","CATEGORY_APPLY_CATEGORY_AND_PRODUCT_RECURSIVE",123],",",["T_WHITESPACE","\n                        ",123],["T_STRING","self",124],["T_DOUBLE_COLON","::",124],["T_STRING","CATEGORY_APPLY_CATEGORY_AND_PRODUCT_ONLY",124],["T_WHITESPACE","\n                    ",124],")",";",["T_WHITESPACE","\n                    ",125],["T_IF","if",126],["T_WHITESPACE"," ",126],"(",["T_VARIABLE","$applyTo",126],["T_WHITESPACE"," ",126],["T_BOOLEAN_AND","&&",126],["T_WHITESPACE"," ",126],"!",["T_STRING","in_array",126],"(",["T_VARIABLE","$applyTo",126],",",["T_WHITESPACE"," ",126],["T_VARIABLE","$validApplyTo",126],")",")",["T_WHITESPACE"," ",126],"{",["T_WHITESPACE","\n                        ",126],["T_VARIABLE","$hasError",127],["T_WHITESPACE"," ",127],"=",["T_WHITESPACE"," ",127],["T_STRING","true",127],";",["T_WHITESPACE","\n                    ",127],"}",["T_WHITESPACE","\n                    ",128],["T_BREAK","break",129],";",["T_WHITESPACE","\n                ",129],["T_DEFAULT","default",130],":",["T_WHITESPACE","\n                    ",130],["T_VARIABLE","$hasError",131],["T_WHITESPACE"," ",131],"=",["T_WHITESPACE"," ",131],["T_STRING","true",131],";",["T_WHITESPACE","\n                    ",131],["T_BREAK","break",132],";",["T_WHITESPACE","\n            ",132],"}",["T_WHITESPACE","\n        ",133],"}",["T_WHITESPACE","\n        ",134],["T_ELSE","else",135],["T_WHITESPACE"," ",135],"{",["T_WHITESPACE","\n            ",135],["T_SWITCH","switch",136],["T_WHITESPACE"," ",136],"(",["T_VARIABLE","$applyForObject",136],")",["T_WHITESPACE"," ",136],"{",["T_WHITESPACE","\n                ",136],["T_CASE","case",137],["T_WHITESPACE"," ",137],["T_STRING","self",137],["T_DOUBLE_COLON","::",137],["T_STRING","APPLY_FOR_CATEGORY",137],":",["T_WHITESPACE","\n                    ",137],["T_VARIABLE","$validApplyTo",138],["T_WHITESPACE"," ",138],"=",["T_WHITESPACE"," ",138],["T_ARRAY","array",138],"(",["T_WHITESPACE","\n                        ",138],["T_STRING","self",139],["T_DOUBLE_COLON","::",139],["T_STRING","CATEGORY_APPLY_CATEGORY_AND_PRODUCT_RECURSIVE",139],",",["T_WHITESPACE","\n                        ",139],["T_STRING","self",140],["T_DOUBLE_COLON","::",140],["T_STRING","CATEGORY_APPLY_CATEGORY_RECURSIVE",140],["T_WHITESPACE","\n                    ",140],")",";",["T_WHITESPACE","\n                    ",141],["T_IF","if",142],["T_WHITESPACE"," ",142],"(",["T_VARIABLE","$applyTo",142],["T_WHITESPACE"," ",142],["T_BOOLEAN_AND","&&",142],["T_WHITESPACE"," ",142],"!",["T_STRING","in_array",142],"(",["T_VARIABLE","$applyTo",142],",",["T_WHITESPACE"," ",142],["T_VARIABLE","$validApplyTo",142],")",")",["T_WHITESPACE"," ",142],"{",["T_WHITESPACE","\n                        ",142],["T_VARIABLE","$hasError",143],["T_WHITESPACE"," ",143],"=",["T_WHITESPACE"," ",143],["T_STRING","true",143],";",["T_WHITESPACE","\n                    ",143],"}",["T_WHITESPACE","\n                    ",144],["T_BREAK","break",145],";",["T_WHITESPACE","\n                ",145],["T_CASE","case",146],["T_WHITESPACE"," ",146],["T_STRING","self",146],["T_DOUBLE_COLON","::",146],["T_STRING","APPLY_FOR_PRODUCT",146],":",["T_WHITESPACE","\n                    ",146],["T_VARIABLE","$validApplyTo",147],["T_WHITESPACE"," ",147],"=",["T_WHITESPACE"," ",147],["T_ARRAY","array",147],"(",["T_WHITESPACE","\n                        ",147],["T_STRING","self",148],["T_DOUBLE_COLON","::",148],["T_STRING","CATEGORY_APPLY_CATEGORY_AND_PRODUCT_RECURSIVE",148],["T_WHITESPACE","\n                    ",148],")",";",["T_WHITESPACE","\n                    ",149],["T_IF","if",150],["T_WHITESPACE"," ",150],"(",["T_VARIABLE","$applyTo",150],["T_WHITESPACE"," ",150],["T_BOOLEAN_AND","&&",150],["T_WHITESPACE"," ",150],"!",["T_STRING","in_array",150],"(",["T_VARIABLE","$applyTo",150],",",["T_WHITESPACE"," ",150],["T_VARIABLE","$validApplyTo",150],")",")",["T_WHITESPACE"," ",150],"{",["T_WHITESPACE","\n                        ",150],["T_VARIABLE","$hasError",151],["T_WHITESPACE"," ",151],"=",["T_WHITESPACE"," ",151],["T_STRING","true",151],";",["T_WHITESPACE","\n                    ",151],"}",["T_WHITESPACE","\n                    ",152],["T_BREAK","break",153],";",["T_WHITESPACE","\n                ",153],["T_DEFAULT","default",154],":",["T_WHITESPACE","\n                    ",154],["T_VARIABLE","$hasError",155],["T_WHITESPACE"," ",155],"=",["T_WHITESPACE"," ",155],["T_STRING","true",155],";",["T_WHITESPACE","\n                    ",155],["T_BREAK","break",156],";",["T_WHITESPACE","\n            ",156],"}",["T_WHITESPACE","\n        ",157],"}",["T_WHITESPACE","\n\n        ",158],["T_RETURN","return",160],["T_WHITESPACE"," ",160],"!",["T_VARIABLE","$hasError",160],";",["T_WHITESPACE","\n    ",160],"}",["T_WHITESPACE","\n\n    ",161],["T_DOC_COMMENT","\/**\n     * Check and apply design\n     *\n     * @deprecated after 1.4.2.0-beta1\n     *\n     * @param string $design\n     * @param array $date\n     *\/",163],["T_WHITESPACE","\n    ",170],["T_PROTECTED","protected",171],["T_WHITESPACE"," ",171],["T_FUNCTION","function",171],["T_WHITESPACE"," ",171],["T_STRING","_isApplyDesign",171],"(",["T_VARIABLE","$design",171],",",["T_WHITESPACE"," ",171],["T_ARRAY","array",171],["T_WHITESPACE"," ",171],["T_VARIABLE","$date",171],")",["T_WHITESPACE","\n    ",171],"{",["T_WHITESPACE","\n        ",172],["T_IF","if",173],["T_WHITESPACE"," ",173],"(","!",["T_STRING","array_key_exists",173],"(",["T_CONSTANT_ENCAPSED_STRING","'from'",173],",",["T_WHITESPACE"," ",173],["T_VARIABLE","$date",173],")",["T_WHITESPACE"," ",173],["T_BOOLEAN_OR","||",173],["T_WHITESPACE"," ",173],"!",["T_STRING","array_key_exists",173],"(",["T_CONSTANT_ENCAPSED_STRING","'to'",173],",",["T_WHITESPACE"," ",173],["T_VARIABLE","$date",173],")",")",["T_WHITESPACE"," ",173],"{",["T_WHITESPACE","\n            ",173],["T_RETURN","return",174],["T_WHITESPACE"," ",174],["T_STRING","false",174],";",["T_WHITESPACE","\n        ",174],"}",["T_WHITESPACE","\n\n        ",175],["T_VARIABLE","$designInfo",177],["T_WHITESPACE"," ",177],"=",["T_WHITESPACE"," ",177],["T_STRING","explode",177],"(",["T_CONSTANT_ENCAPSED_STRING","\"\/\"",177],",",["T_WHITESPACE"," ",177],["T_VARIABLE","$design",177],")",";",["T_WHITESPACE","\n        ",177],["T_IF","if",178],["T_WHITESPACE"," ",178],"(",["T_STRING","count",178],"(",["T_VARIABLE","$designInfo",178],")",["T_WHITESPACE"," ",178],["T_IS_NOT_EQUAL","!=",178],["T_WHITESPACE"," ",178],["T_LNUMBER","2",178],")",["T_WHITESPACE"," ",178],"{",["T_WHITESPACE","\n            ",178],["T_RETURN","return",179],["T_WHITESPACE"," ",179],["T_STRING","false",179],";",["T_WHITESPACE","\n        ",179],"}",["T_WHITESPACE","\n\n        ",180],["T_COMMENT","\/\/ define package and theme\n",182],["T_WHITESPACE","        ",183],["T_VARIABLE","$package",183],["T_WHITESPACE","    ",183],"=",["T_WHITESPACE"," ",183],["T_VARIABLE","$designInfo",183],"[",["T_LNUMBER","0",183],"]",";",["T_WHITESPACE","\n        ",183],["T_VARIABLE","$theme",184],["T_WHITESPACE","      ",184],"=",["T_WHITESPACE"," ",184],["T_VARIABLE","$designInfo",184],"[",["T_LNUMBER","1",184],"]",";",["T_WHITESPACE","\n\n        ",184],["T_COMMENT","\/\/ compare dates\n",186],["T_WHITESPACE","        ",187],["T_IF","if",187],["T_WHITESPACE"," ",187],"(",["T_STRING","Mage",187],["T_DOUBLE_COLON","::",187],["T_STRING","app",187],"(",")",["T_OBJECT_OPERATOR","->",187],["T_STRING","getLocale",187],"(",")",["T_OBJECT_OPERATOR","->",187],["T_STRING","isStoreDateInInterval",187],"(",["T_STRING","null",187],",",["T_WHITESPACE"," ",187],["T_VARIABLE","$date",187],"[",["T_CONSTANT_ENCAPSED_STRING","'from'",187],"]",",",["T_WHITESPACE"," ",187],["T_VARIABLE","$date",187],"[",["T_CONSTANT_ENCAPSED_STRING","'to'",187],"]",")",")",["T_WHITESPACE"," ",187],"{",["T_WHITESPACE","\n            ",187],["T_VARIABLE","$this",188],["T_OBJECT_OPERATOR","->",188],["T_STRING","_apply",188],"(",["T_VARIABLE","$package",188],",",["T_WHITESPACE"," ",188],["T_VARIABLE","$theme",188],")",";",["T_WHITESPACE","\n            ",188],["T_RETURN","return",189],["T_WHITESPACE"," ",189],["T_STRING","true",189],";",["T_WHITESPACE","\n        ",189],"}",["T_WHITESPACE","\n\n        ",190],["T_RETURN","return",192],["T_WHITESPACE"," ",192],["T_STRING","false",192],";",["T_WHITESPACE","\n    ",192],"}",["T_WHITESPACE","\n\n    ",193],["T_DOC_COMMENT","\/**\n     * Recursively apply design\n     *\n     * @deprecated after 1.4.2.0-beta1\n     *\n     * @param Varien_Object $object\n     * @param int $calledFrom\n     *\n     * @return Mage_Catalog_Model_Design\n     *\/",195],["T_WHITESPACE","\n    ",204],["T_PROTECTED","protected",205],["T_WHITESPACE"," ",205],["T_FUNCTION","function",205],["T_WHITESPACE"," ",205],["T_STRING","_inheritDesign",205],"(",["T_VARIABLE","$object",205],",",["T_WHITESPACE"," ",205],["T_VARIABLE","$calledFrom",205],["T_WHITESPACE"," ",205],"=",["T_WHITESPACE"," ",205],["T_LNUMBER","0",205],")",["T_WHITESPACE","\n    ",205],"{",["T_WHITESPACE","\n        ",206],["T_VARIABLE","$useParentSettings",207],["T_WHITESPACE"," ",207],"=",["T_WHITESPACE"," ",207],["T_STRING","false",207],";",["T_WHITESPACE","\n        ",207],["T_IF","if",208],["T_WHITESPACE"," ",208],"(",["T_VARIABLE","$object",208],["T_WHITESPACE"," ",208],["T_INSTANCEOF","instanceof",208],["T_WHITESPACE"," ",208],["T_STRING","Mage_Catalog_Model_Product",208],")",["T_WHITESPACE"," ",208],"{",["T_WHITESPACE","\n            ",208],["T_VARIABLE","$category",209],["T_WHITESPACE"," ",209],"=",["T_WHITESPACE"," ",209],["T_VARIABLE","$object",209],["T_OBJECT_OPERATOR","->",209],["T_STRING","getCategory",209],"(",")",";",["T_WHITESPACE","\n\n            ",209],["T_IF","if",211],["T_WHITESPACE"," ",211],"(",["T_VARIABLE","$category",211],["T_WHITESPACE"," ",211],["T_BOOLEAN_AND","&&",211],["T_WHITESPACE"," ",211],["T_VARIABLE","$category",211],["T_OBJECT_OPERATOR","->",211],["T_STRING","getId",211],"(",")",")",["T_WHITESPACE"," ",211],"{",["T_WHITESPACE","\n                ",211],["T_RETURN","return",212],["T_WHITESPACE"," ",212],["T_VARIABLE","$this",212],["T_OBJECT_OPERATOR","->",212],["T_STRING","_inheritDesign",212],"(",["T_VARIABLE","$category",212],",",["T_WHITESPACE"," ",212],["T_VARIABLE","$calledFrom",212],")",";",["T_WHITESPACE","\n            ",212],"}",["T_WHITESPACE","\n        ",213],"}",["T_WHITESPACE","\n        ",214],["T_ELSEIF","elseif",215],["T_WHITESPACE"," ",215],"(",["T_VARIABLE","$object",215],["T_WHITESPACE"," ",215],["T_INSTANCEOF","instanceof",215],["T_WHITESPACE"," ",215],["T_STRING","Mage_Catalog_Model_Category",215],")",["T_WHITESPACE"," ",215],"{",["T_WHITESPACE","\n            ",215],["T_VARIABLE","$category",216],["T_WHITESPACE"," ",216],"=",["T_WHITESPACE"," ",216],["T_VARIABLE","$object",216],["T_OBJECT_OPERATOR","->",216],["T_STRING","getParentCategory",216],"(",")",";",["T_WHITESPACE","\n\n            ",216],["T_VARIABLE","$useParentSettings",218],["T_WHITESPACE"," ",218],"=",["T_WHITESPACE"," ",218],["T_VARIABLE","$object",218],["T_OBJECT_OPERATOR","->",218],["T_STRING","getCustomUseParentSettings",218],"(",")",";",["T_WHITESPACE","\n            ",218],["T_IF","if",219],["T_WHITESPACE"," ",219],"(",["T_VARIABLE","$useParentSettings",219],")",["T_WHITESPACE"," ",219],"{",["T_WHITESPACE","\n                ",219],["T_IF","if",220],["T_WHITESPACE"," ",220],"(",["T_VARIABLE","$category",220],["T_WHITESPACE"," ",220],["T_BOOLEAN_AND","&&",220],["T_WHITESPACE","\n                    ",220],["T_VARIABLE","$category",221],["T_OBJECT_OPERATOR","->",221],["T_STRING","getId",221],"(",")",["T_WHITESPACE"," ",221],["T_BOOLEAN_AND","&&",221],["T_WHITESPACE","\n                    ",221],["T_VARIABLE","$category",222],["T_OBJECT_OPERATOR","->",222],["T_STRING","getLevel",222],"(",")",["T_WHITESPACE"," ",222],">",["T_WHITESPACE"," ",222],["T_LNUMBER","1",222],["T_WHITESPACE"," ",222],["T_BOOLEAN_AND","&&",222],["T_WHITESPACE","\n                    ",222],["T_VARIABLE","$category",223],["T_OBJECT_OPERATOR","->",223],["T_STRING","getId",223],"(",")",["T_WHITESPACE"," ",223],["T_IS_NOT_EQUAL","!=",223],["T_WHITESPACE"," ",223],["T_STRING","Mage_Catalog_Model_Category",223],["T_DOUBLE_COLON","::",223],["T_STRING","TREE_ROOT_ID",223],")",["T_WHITESPACE"," ",223],"{",["T_WHITESPACE","\n                    ",223],["T_RETURN","return",224],["T_WHITESPACE"," ",224],["T_VARIABLE","$this",224],["T_OBJECT_OPERATOR","->",224],["T_STRING","_inheritDesign",224],"(",["T_VARIABLE","$category",224],",",["T_WHITESPACE"," ",224],["T_VARIABLE","$calledFrom",224],")",";",["T_WHITESPACE","\n                ",224],"}",["T_WHITESPACE","\n            ",225],"}",["T_WHITESPACE","\n\n            ",226],["T_IF","if",228],["T_WHITESPACE"," ",228],"(",["T_VARIABLE","$calledFrom",228],["T_WHITESPACE"," ",228],["T_IS_EQUAL","==",228],["T_WHITESPACE"," ",228],["T_STRING","self",228],["T_DOUBLE_COLON","::",228],["T_STRING","APPLY_FOR_PRODUCT",228],")",["T_WHITESPACE"," ",228],"{",["T_WHITESPACE","\n                ",228],["T_VARIABLE","$applyToProducts",229],["T_WHITESPACE"," ",229],"=",["T_WHITESPACE"," ",229],["T_VARIABLE","$object",229],["T_OBJECT_OPERATOR","->",229],["T_STRING","getCustomApplyToProducts",229],"(",")",";",["T_WHITESPACE","\n                ",229],["T_IF","if",230],["T_WHITESPACE"," ",230],"(","!",["T_VARIABLE","$applyToProducts",230],")",["T_WHITESPACE"," ",230],"{",["T_WHITESPACE","\n                    ",230],["T_RETURN","return",231],["T_WHITESPACE"," ",231],["T_VARIABLE","$this",231],";",["T_WHITESPACE","\n                ",231],"}",["T_WHITESPACE","\n            ",232],"}",["T_WHITESPACE","\n        ",233],"}",["T_WHITESPACE","\n\n        ",234],["T_IF","if",236],["T_WHITESPACE"," ",236],"(","!",["T_VARIABLE","$useParentSettings",236],")",["T_WHITESPACE"," ",236],"{",["T_WHITESPACE","\n            ",236],["T_VARIABLE","$design",237],["T_WHITESPACE"," ",237],"=",["T_WHITESPACE"," ",237],["T_VARIABLE","$object",237],["T_OBJECT_OPERATOR","->",237],["T_STRING","getCustomDesign",237],"(",")",";",["T_WHITESPACE","\n            ",237],["T_VARIABLE","$date",238],["T_WHITESPACE","   ",238],"=",["T_WHITESPACE"," ",238],["T_VARIABLE","$object",238],["T_OBJECT_OPERATOR","->",238],["T_STRING","getCustomDesignDate",238],"(",")",";",["T_WHITESPACE","\n            ",238],["T_VARIABLE","$this",239],["T_OBJECT_OPERATOR","->",239],["T_STRING","_isApplyDesign",239],"(",["T_VARIABLE","$design",239],",",["T_WHITESPACE"," ",239],["T_VARIABLE","$date",239],")",";",["T_WHITESPACE","\n        ",239],"}",["T_WHITESPACE","\n\n        ",240],["T_RETURN","return",242],["T_WHITESPACE"," ",242],["T_VARIABLE","$this",242],";",["T_WHITESPACE","\n    ",242],"}",["T_WHITESPACE","\n\n    ",243],["T_DOC_COMMENT","\/**\n     * Apply design recursively (if using EAV)\n     *\n     * @deprecated after 1.4.1.0\n     *\n     * @param Varien_Object $object\n     * @param int $calledFrom\n     * @param int $pass\n     *\n     * @return Mage_Catalog_Model_Design\n     *\/",245],["T_WHITESPACE","\n    ",255],["T_PROTECTED","protected",256],["T_WHITESPACE"," ",256],["T_FUNCTION","function",256],["T_WHITESPACE"," ",256],["T_STRING","_applyDesignRecursively",256],"(",["T_VARIABLE","$object",256],",",["T_WHITESPACE"," ",256],["T_VARIABLE","$calledFrom",256],["T_WHITESPACE"," ",256],"=",["T_WHITESPACE"," ",256],["T_LNUMBER","0",256],",",["T_WHITESPACE"," ",256],["T_VARIABLE","$pass",256],["T_WHITESPACE"," ",256],"=",["T_WHITESPACE"," ",256],["T_LNUMBER","0",256],")",["T_WHITESPACE","\n    ",256],"{",["T_WHITESPACE","\n        ",257],["T_VARIABLE","$design",258],["T_WHITESPACE","  ",258],"=",["T_WHITESPACE"," ",258],["T_VARIABLE","$object",258],["T_OBJECT_OPERATOR","->",258],["T_STRING","getCustomDesign",258],"(",")",";",["T_WHITESPACE","\n        ",258],["T_VARIABLE","$date",259],["T_WHITESPACE","    ",259],"=",["T_WHITESPACE"," ",259],["T_VARIABLE","$object",259],["T_OBJECT_OPERATOR","->",259],["T_STRING","getCustomDesignDate",259],"(",")",";",["T_WHITESPACE","\n        ",259],["T_VARIABLE","$applyTo",260],["T_WHITESPACE"," ",260],"=",["T_WHITESPACE"," ",260],["T_VARIABLE","$object",260],["T_OBJECT_OPERATOR","->",260],["T_STRING","getCustomDesignApply",260],"(",")",";",["T_WHITESPACE","\n\n        ",260],["T_VARIABLE","$checkAndApply",262],["T_WHITESPACE"," ",262],"=",["T_WHITESPACE"," ",262],["T_VARIABLE","$this",262],["T_OBJECT_OPERATOR","->",262],["T_STRING","_isApplyFor",262],"(",["T_VARIABLE","$calledFrom",262],",",["T_WHITESPACE"," ",262],["T_VARIABLE","$applyTo",262],",",["T_WHITESPACE"," ",262],["T_VARIABLE","$pass",262],")",["T_WHITESPACE","\n            ",262],["T_BOOLEAN_AND","&&",263],["T_WHITESPACE"," ",263],["T_VARIABLE","$this",263],["T_OBJECT_OPERATOR","->",263],["T_STRING","_isApplyDesign",263],"(",["T_VARIABLE","$design",263],",",["T_WHITESPACE"," ",263],["T_VARIABLE","$date",263],")",";",["T_WHITESPACE","\n        ",263],["T_IF","if",264],["T_WHITESPACE"," ",264],"(",["T_VARIABLE","$checkAndApply",264],")",["T_WHITESPACE"," ",264],"{",["T_WHITESPACE","\n            ",264],["T_RETURN","return",265],["T_WHITESPACE"," ",265],["T_VARIABLE","$this",265],";",["T_WHITESPACE","\n        ",265],"}",["T_WHITESPACE","\n\n        ",266],["T_VARIABLE","$pass",268],["T_WHITESPACE"," ",268],["T_INC","++",268],";",["T_WHITESPACE","\n\n        ",268],["T_VARIABLE","$category",270],["T_WHITESPACE"," ",270],"=",["T_WHITESPACE"," ",270],["T_STRING","null",270],";",["T_WHITESPACE","\n        ",270],["T_IF","if",271],["T_WHITESPACE"," ",271],"(",["T_VARIABLE","$object",271],["T_WHITESPACE"," ",271],["T_INSTANCEOF","instanceof",271],["T_WHITESPACE"," ",271],["T_STRING","Mage_Catalog_Model_Product",271],")",["T_WHITESPACE"," ",271],"{",["T_WHITESPACE","\n            ",271],["T_VARIABLE","$category",272],["T_WHITESPACE"," ",272],"=",["T_WHITESPACE"," ",272],["T_VARIABLE","$object",272],["T_OBJECT_OPERATOR","->",272],["T_STRING","getCategory",272],"(",")",";",["T_WHITESPACE","\n            ",272],["T_VARIABLE","$pass",273],["T_WHITESPACE"," ",273],["T_DEC","--",273],";",["T_WHITESPACE","\n        ",273],"}",["T_WHITESPACE","\n        ",274],["T_ELSEIF","elseif",275],["T_WHITESPACE"," ",275],"(",["T_VARIABLE","$object",275],["T_WHITESPACE"," ",275],["T_INSTANCEOF","instanceof",275],["T_WHITESPACE"," ",275],["T_STRING","Mage_Catalog_Model_Category",275],")",["T_WHITESPACE"," ",275],"{",["T_WHITESPACE","\n            ",275],["T_VARIABLE","$category",276],["T_WHITESPACE"," ",276],"=",["T_WHITESPACE"," ",276],["T_VARIABLE","$object",276],["T_OBJECT_OPERATOR","->",276],["T_STRING","getParentCategory",276],"(",")",";",["T_WHITESPACE","\n        ",276],"}",["T_WHITESPACE","\n\n        ",277],["T_IF","if",279],["T_WHITESPACE"," ",279],"(",["T_VARIABLE","$category",279],["T_WHITESPACE"," ",279],["T_BOOLEAN_AND","&&",279],["T_WHITESPACE"," ",279],["T_VARIABLE","$category",279],["T_OBJECT_OPERATOR","->",279],["T_STRING","getId",279],"(",")",")",["T_WHITESPACE"," ",279],"{",["T_WHITESPACE","\n            ",279],["T_VARIABLE","$this",280],["T_OBJECT_OPERATOR","->",280],["T_STRING","_applyDesignRecursively",280],"(",["T_VARIABLE","$category",280],",",["T_WHITESPACE"," ",280],["T_VARIABLE","$calledFrom",280],",",["T_WHITESPACE"," ",280],["T_VARIABLE","$pass",280],")",";",["T_WHITESPACE","\n        ",280],"}",["T_WHITESPACE","\n\n        ",281],["T_RETURN","return",283],["T_WHITESPACE"," ",283],["T_VARIABLE","$this",283],";",["T_WHITESPACE","\n    ",283],"}",["T_WHITESPACE","\n\n    ",284],["T_DOC_COMMENT","\/**\n     * @deprecated after 1.4.2.0-beta1\n     *\/",286],["T_WHITESPACE","\n    ",288],["T_PROTECTED","protected",289],["T_WHITESPACE"," ",289],["T_FUNCTION","function",289],["T_WHITESPACE"," ",289],["T_STRING","_applyDesign",289],"(",["T_VARIABLE","$designUpdateData",289],",",["T_WHITESPACE"," ",289],["T_VARIABLE","$calledFrom",289],["T_WHITESPACE"," ",289],"=",["T_WHITESPACE"," ",289],["T_LNUMBER","0",289],",",["T_WHITESPACE"," ",289],["T_VARIABLE","$loaded",289],["T_WHITESPACE"," ",289],"=",["T_WHITESPACE"," ",289],["T_STRING","false",289],",",["T_WHITESPACE"," ",289],["T_VARIABLE","$pass",289],["T_WHITESPACE"," ",289],"=",["T_WHITESPACE"," ",289],["T_LNUMBER","0",289],")",["T_WHITESPACE","\n    ",289],"{",["T_WHITESPACE","\n        ",290],["T_VARIABLE","$objects",291],["T_WHITESPACE"," ",291],"=",["T_WHITESPACE"," ",291],["T_ARRAY","array",291],"(",")",";",["T_WHITESPACE","\n        ",291],["T_IF","if",292],["T_WHITESPACE"," ",292],"(",["T_STRING","is_object",292],"(",["T_VARIABLE","$designUpdateData",292],")",")",["T_WHITESPACE"," ",292],"{",["T_WHITESPACE","\n            ",292],["T_VARIABLE","$objects",293],["T_WHITESPACE"," ",293],"=",["T_WHITESPACE"," ",293],["T_ARRAY","array",293],"(",["T_VARIABLE","$designUpdateData",293],")",";",["T_WHITESPACE","\n        ",293],"}",["T_WHITESPACE"," ",294],["T_ELSEIF","elseif",294],["T_WHITESPACE"," ",294],"(",["T_STRING","is_array",294],"(",["T_VARIABLE","$designUpdateData",294],")",")",["T_WHITESPACE"," ",294],"{",["T_WHITESPACE","\n            ",294],["T_VARIABLE","$objects",295],["T_WHITESPACE"," ",295],"=",["T_WHITESPACE"," ",295],"&",["T_VARIABLE","$designUpdateData",295],";",["T_WHITESPACE","\n        ",295],"}",["T_WHITESPACE","\n        ",296],["T_FOREACH","foreach",297],["T_WHITESPACE"," ",297],"(",["T_VARIABLE","$objects",297],["T_WHITESPACE"," ",297],["T_AS","as",297],["T_WHITESPACE"," ",297],["T_VARIABLE","$object",297],")",["T_WHITESPACE"," ",297],"{",["T_WHITESPACE","\n            ",297],["T_VARIABLE","$design",298],["T_WHITESPACE","  ",298],"=",["T_WHITESPACE"," ",298],["T_VARIABLE","$object",298],["T_OBJECT_OPERATOR","->",298],["T_STRING","getCustomDesign",298],"(",")",";",["T_WHITESPACE","\n            ",298],["T_VARIABLE","$date",299],["T_WHITESPACE","    ",299],"=",["T_WHITESPACE"," ",299],["T_VARIABLE","$object",299],["T_OBJECT_OPERATOR","->",299],["T_STRING","getCustomDesignDate",299],"(",")",";",["T_WHITESPACE","\n            ",299],["T_VARIABLE","$applyTo",300],["T_WHITESPACE"," ",300],"=",["T_WHITESPACE"," ",300],["T_VARIABLE","$object",300],["T_OBJECT_OPERATOR","->",300],["T_STRING","getCustomDesignApply",300],"(",")",";",["T_WHITESPACE","\n\n            ",300],["T_VARIABLE","$checkAndApply",302],["T_WHITESPACE"," ",302],"=",["T_WHITESPACE"," ",302],["T_VARIABLE","$this",302],["T_OBJECT_OPERATOR","->",302],["T_STRING","_isApplyFor",302],"(",["T_VARIABLE","$calledFrom",302],",",["T_WHITESPACE"," ",302],["T_VARIABLE","$applyTo",302],",",["T_WHITESPACE"," ",302],["T_VARIABLE","$pass",302],")",["T_WHITESPACE","\n                ",302],["T_BOOLEAN_AND","&&",303],["T_WHITESPACE"," ",303],["T_VARIABLE","$this",303],["T_OBJECT_OPERATOR","->",303],["T_STRING","_isApplyDesign",303],"(",["T_VARIABLE","$design",303],",",["T_WHITESPACE"," ",303],["T_VARIABLE","$date",303],")",";",["T_WHITESPACE","\n            ",303],["T_IF","if",304],["T_WHITESPACE"," ",304],"(",["T_VARIABLE","$checkAndApply",304],")",["T_WHITESPACE"," ",304],"{",["T_WHITESPACE","\n                ",304],["T_RETURN","return",305],["T_WHITESPACE"," ",305],["T_VARIABLE","$this",305],";",["T_WHITESPACE","\n            ",305],"}",["T_WHITESPACE","\n        ",306],"}",["T_WHITESPACE","\n\n        ",307],["T_VARIABLE","$pass",309],["T_WHITESPACE"," ",309],["T_INC","++",309],";",["T_WHITESPACE","\n\n        ",309],["T_IF","if",311],["T_WHITESPACE"," ",311],"(",["T_STRING","false",311],["T_WHITESPACE"," ",311],["T_IS_IDENTICAL","===",311],["T_WHITESPACE"," ",311],["T_VARIABLE","$loaded",311],["T_WHITESPACE"," ",311],["T_BOOLEAN_AND","&&",311],["T_WHITESPACE"," ",311],["T_STRING","is_object",311],"(",["T_VARIABLE","$designUpdateData",311],")",")",["T_WHITESPACE"," ",311],"{",["T_WHITESPACE","\n            ",311],["T_VARIABLE","$_designUpdateData",312],["T_WHITESPACE"," ",312],"=",["T_WHITESPACE"," ",312],["T_ARRAY","array",312],"(",")",";",["T_WHITESPACE","\n            ",312],["T_IF","if",313],["T_WHITESPACE"," ",313],"(",["T_VARIABLE","$designUpdateData",313],["T_WHITESPACE"," ",313],["T_INSTANCEOF","instanceof",313],["T_WHITESPACE"," ",313],["T_STRING","Mage_Catalog_Model_Product",313],")",["T_WHITESPACE"," ",313],"{",["T_WHITESPACE","\n                ",313],["T_VARIABLE","$_category",314],["T_WHITESPACE"," ",314],"=",["T_WHITESPACE"," ",314],["T_VARIABLE","$designUpdateData",314],["T_OBJECT_OPERATOR","->",314],["T_STRING","getCategory",314],"(",")",";",["T_WHITESPACE","\n                ",314],["T_VARIABLE","$_designUpdateData",315],["T_WHITESPACE"," ",315],"=",["T_WHITESPACE"," ",315],["T_STRING","array_merge",315],"(",["T_WHITESPACE","\n                    ",315],["T_VARIABLE","$_designUpdateData",316],",",["T_WHITESPACE"," ",316],["T_ARRAY","array",316],"(",["T_VARIABLE","$_category",316],")",["T_WHITESPACE","\n                ",316],")",";",["T_WHITESPACE","\n                ",317],["T_VARIABLE","$pass",318],["T_WHITESPACE"," ",318],["T_DEC","--",318],";",["T_WHITESPACE","\n            ",318],"}",["T_WHITESPACE"," ",319],["T_ELSEIF","elseif",319],["T_WHITESPACE"," ",319],"(",["T_VARIABLE","$designUpdateData",319],["T_WHITESPACE"," ",319],["T_INSTANCEOF","instanceof",319],["T_WHITESPACE"," ",319],["T_STRING","Mage_Catalog_Model_Category",319],")",["T_WHITESPACE"," ",319],"{",["T_WHITESPACE","\n                ",319],["T_VARIABLE","$_category",320],["T_WHITESPACE"," ",320],"=",["T_WHITESPACE"," ",320],"&",["T_VARIABLE","$designUpdateData",320],";",["T_WHITESPACE","\n            ",320],"}",["T_WHITESPACE","\n            ",321],["T_IF","if",322],["T_WHITESPACE"," ",322],"(",["T_VARIABLE","$_category",322],["T_WHITESPACE"," ",322],["T_BOOLEAN_AND","&&",322],["T_WHITESPACE"," ",322],["T_VARIABLE","$_category",322],["T_OBJECT_OPERATOR","->",322],["T_STRING","getId",322],"(",")",")",["T_WHITESPACE"," ",322],"{",["T_WHITESPACE","\n                ",322],["T_VARIABLE","$_designUpdateData",323],["T_WHITESPACE"," ",323],"=",["T_WHITESPACE"," ",323],["T_STRING","array_merge",323],"(",["T_WHITESPACE","\n                    ",323],["T_VARIABLE","$_designUpdateData",324],",",["T_WHITESPACE","\n                    ",324],["T_VARIABLE","$_category",325],["T_OBJECT_OPERATOR","->",325],["T_STRING","getResource",325],"(",")",["T_OBJECT_OPERATOR","->",325],["T_STRING","getDesignUpdateData",325],"(",["T_VARIABLE","$_category",325],")",["T_WHITESPACE","\n                ",325],")",";",["T_WHITESPACE","\n                ",326],["T_VARIABLE","$this",327],["T_OBJECT_OPERATOR","->",327],["T_STRING","_applyDesign",327],"(",["T_VARIABLE","$_designUpdateData",327],",",["T_WHITESPACE"," ",327],["T_VARIABLE","$calledFrom",327],",",["T_WHITESPACE"," ",327],["T_STRING","true",327],",",["T_WHITESPACE"," ",327],["T_VARIABLE","$pass",327],")",";",["T_WHITESPACE","\n            ",327],"}",["T_WHITESPACE","\n        ",328],"}",["T_WHITESPACE","\n        ",329],["T_RETURN","return",330],["T_WHITESPACE"," ",330],["T_VARIABLE","$this",330],";",["T_WHITESPACE","\n    ",330],"}",["T_WHITESPACE","\n\n    ",331],["T_DOC_COMMENT","\/**\n     * Get custom layout settings\n     *\n     * @param Mage_Catalog_Model_Category|Mage_Catalog_Model_Product $object\n     * @return Varien_Object\n     *\/",333],["T_WHITESPACE","\n    ",338],["T_PUBLIC","public",339],["T_WHITESPACE"," ",339],["T_FUNCTION","function",339],["T_WHITESPACE"," ",339],["T_STRING","getDesignSettings",339],"(",["T_VARIABLE","$object",339],")",["T_WHITESPACE","\n    ",339],"{",["T_WHITESPACE","\n        ",340],["T_IF","if",341],["T_WHITESPACE"," ",341],"(",["T_VARIABLE","$object",341],["T_WHITESPACE"," ",341],["T_INSTANCEOF","instanceof",341],["T_WHITESPACE"," ",341],["T_STRING","Mage_Catalog_Model_Product",341],")",["T_WHITESPACE"," ",341],"{",["T_WHITESPACE","\n            ",341],["T_VARIABLE","$currentCategory",342],["T_WHITESPACE"," ",342],"=",["T_WHITESPACE"," ",342],["T_VARIABLE","$object",342],["T_OBJECT_OPERATOR","->",342],["T_STRING","getCategory",342],"(",")",";",["T_WHITESPACE","\n        ",342],"}",["T_WHITESPACE"," ",343],["T_ELSE","else",343],["T_WHITESPACE"," ",343],"{",["T_WHITESPACE","\n            ",343],["T_VARIABLE","$currentCategory",344],["T_WHITESPACE"," ",344],"=",["T_WHITESPACE"," ",344],["T_VARIABLE","$object",344],";",["T_WHITESPACE","\n        ",344],"}",["T_WHITESPACE","\n\n        ",345],["T_VARIABLE","$category",347],["T_WHITESPACE"," ",347],"=",["T_WHITESPACE"," ",347],["T_STRING","null",347],";",["T_WHITESPACE","\n        ",347],["T_IF","if",348],["T_WHITESPACE"," ",348],"(",["T_VARIABLE","$currentCategory",348],")",["T_WHITESPACE"," ",348],"{",["T_WHITESPACE","\n            ",348],["T_VARIABLE","$category",349],["T_WHITESPACE"," ",349],"=",["T_WHITESPACE"," ",349],["T_VARIABLE","$currentCategory",349],["T_OBJECT_OPERATOR","->",349],["T_STRING","getParentDesignCategory",349],"(",["T_VARIABLE","$currentCategory",349],")",";",["T_WHITESPACE","\n        ",349],"}",["T_WHITESPACE","\n\n        ",350],["T_IF","if",352],["T_WHITESPACE"," ",352],"(",["T_VARIABLE","$object",352],["T_WHITESPACE"," ",352],["T_INSTANCEOF","instanceof",352],["T_WHITESPACE"," ",352],["T_STRING","Mage_Catalog_Model_Product",352],")",["T_WHITESPACE"," ",352],"{",["T_WHITESPACE","\n            ",352],["T_IF","if",353],["T_WHITESPACE"," ",353],"(",["T_VARIABLE","$category",353],["T_WHITESPACE"," ",353],["T_BOOLEAN_AND","&&",353],["T_WHITESPACE"," ",353],["T_VARIABLE","$category",353],["T_OBJECT_OPERATOR","->",353],["T_STRING","getCustomApplyToProducts",353],"(",")",")",["T_WHITESPACE"," ",353],"{",["T_WHITESPACE","\n                ",353],["T_RETURN","return",354],["T_WHITESPACE"," ",354],["T_VARIABLE","$this",354],["T_OBJECT_OPERATOR","->",354],["T_STRING","_mergeSettings",354],"(",["T_VARIABLE","$this",354],["T_OBJECT_OPERATOR","->",354],["T_STRING","_extractSettings",354],"(",["T_VARIABLE","$category",354],")",",",["T_WHITESPACE"," ",354],["T_VARIABLE","$this",354],["T_OBJECT_OPERATOR","->",354],["T_STRING","_extractSettings",354],"(",["T_VARIABLE","$object",354],")",")",";",["T_WHITESPACE","\n            ",354],"}",["T_WHITESPACE"," ",355],["T_ELSE","else",355],["T_WHITESPACE"," ",355],"{",["T_WHITESPACE","\n                ",355],["T_RETURN","return",356],["T_WHITESPACE"," ",356],["T_VARIABLE","$this",356],["T_OBJECT_OPERATOR","->",356],["T_STRING","_extractSettings",356],"(",["T_VARIABLE","$object",356],")",";",["T_WHITESPACE","\n            ",356],"}",["T_WHITESPACE","\n        ",357],"}",["T_WHITESPACE"," ",358],["T_ELSE","else",358],["T_WHITESPACE"," ",358],"{",["T_WHITESPACE","\n             ",358],["T_RETURN","return",359],["T_WHITESPACE"," ",359],["T_VARIABLE","$this",359],["T_OBJECT_OPERATOR","->",359],["T_STRING","_extractSettings",359],"(",["T_VARIABLE","$category",359],")",";",["T_WHITESPACE","\n        ",359],"}",["T_WHITESPACE","\n    ",360],"}",["T_WHITESPACE","\n\n    ",361],["T_DOC_COMMENT","\/**\n     * Extract custom layout settings from category or product object\n     *\n     * @param Mage_Catalog_Model_Category|Mage_Catalog_Model_Product $object\n     * @return Varien_Object\n     *\/",363],["T_WHITESPACE","\n    ",368],["T_PROTECTED","protected",369],["T_WHITESPACE"," ",369],["T_FUNCTION","function",369],["T_WHITESPACE"," ",369],["T_STRING","_extractSettings",369],"(",["T_VARIABLE","$object",369],")",["T_WHITESPACE","\n    ",369],"{",["T_WHITESPACE","\n        ",370],["T_VARIABLE","$settings",371],["T_WHITESPACE"," ",371],"=",["T_WHITESPACE"," ",371],["T_NEW","new",371],["T_WHITESPACE"," ",371],["T_STRING","Varien_Object",371],";",["T_WHITESPACE","\n        ",371],["T_IF","if",372],["T_WHITESPACE"," ",372],"(","!",["T_VARIABLE","$object",372],")",["T_WHITESPACE"," ",372],"{",["T_WHITESPACE","\n            ",372],["T_RETURN","return",373],["T_WHITESPACE"," ",373],["T_VARIABLE","$settings",373],";",["T_WHITESPACE","\n        ",373],"}",["T_WHITESPACE","\n        ",374],["T_VARIABLE","$date",375],["T_WHITESPACE"," ",375],"=",["T_WHITESPACE"," ",375],["T_VARIABLE","$object",375],["T_OBJECT_OPERATOR","->",375],["T_STRING","getCustomDesignDate",375],"(",")",";",["T_WHITESPACE","\n        ",375],["T_IF","if",376],["T_WHITESPACE"," ",376],"(",["T_STRING","array_key_exists",376],"(",["T_CONSTANT_ENCAPSED_STRING","'from'",376],",",["T_WHITESPACE"," ",376],["T_VARIABLE","$date",376],")",["T_WHITESPACE"," ",376],["T_BOOLEAN_AND","&&",376],["T_WHITESPACE"," ",376],["T_STRING","array_key_exists",376],"(",["T_CONSTANT_ENCAPSED_STRING","'to'",376],",",["T_WHITESPACE"," ",376],["T_VARIABLE","$date",376],")",["T_WHITESPACE","\n            ",376],["T_BOOLEAN_AND","&&",377],["T_WHITESPACE"," ",377],["T_STRING","Mage",377],["T_DOUBLE_COLON","::",377],["T_STRING","app",377],"(",")",["T_OBJECT_OPERATOR","->",377],["T_STRING","getLocale",377],"(",")",["T_OBJECT_OPERATOR","->",377],["T_STRING","isStoreDateInInterval",377],"(",["T_STRING","null",377],",",["T_WHITESPACE"," ",377],["T_VARIABLE","$date",377],"[",["T_CONSTANT_ENCAPSED_STRING","'from'",377],"]",",",["T_WHITESPACE"," ",377],["T_VARIABLE","$date",377],"[",["T_CONSTANT_ENCAPSED_STRING","'to'",377],"]",")",")",["T_WHITESPACE"," ",377],"{",["T_WHITESPACE","\n                ",377],["T_VARIABLE","$settings",378],["T_OBJECT_OPERATOR","->",378],["T_STRING","setCustomDesign",378],"(",["T_VARIABLE","$object",378],["T_OBJECT_OPERATOR","->",378],["T_STRING","getCustomDesign",378],"(",")",")",["T_WHITESPACE","\n                    ",378],["T_OBJECT_OPERATOR","->",379],["T_STRING","setPageLayout",379],"(",["T_VARIABLE","$object",379],["T_OBJECT_OPERATOR","->",379],["T_STRING","getPageLayout",379],"(",")",")",["T_WHITESPACE","\n                    ",379],["T_OBJECT_OPERATOR","->",380],["T_STRING","setLayoutUpdates",380],"(",["T_ARRAY_CAST","(array)",380],["T_VARIABLE","$object",380],["T_OBJECT_OPERATOR","->",380],["T_STRING","getCustomLayoutUpdate",380],"(",")",")",";",["T_WHITESPACE","\n        ",380],"}",["T_WHITESPACE","\n        ",381],["T_RETURN","return",382],["T_WHITESPACE"," ",382],["T_VARIABLE","$settings",382],";",["T_WHITESPACE","\n    ",382],"}",["T_WHITESPACE","\n\n    ",383],["T_DOC_COMMENT","\/**\n     * Merge custom design settings\n     *\n     * @param Varien_Object $categorySettings\n     * @param Varien_Object $productSettings\n     * @return Varien_Object\n     *\/",385],["T_WHITESPACE","\n    ",391],["T_PROTECTED","protected",392],["T_WHITESPACE"," ",392],["T_FUNCTION","function",392],["T_WHITESPACE"," ",392],["T_STRING","_mergeSettings",392],"(",["T_VARIABLE","$categorySettings",392],",",["T_WHITESPACE"," ",392],["T_VARIABLE","$productSettings",392],")",["T_WHITESPACE","\n    ",392],"{",["T_WHITESPACE","\n        ",393],["T_IF","if",394],["T_WHITESPACE"," ",394],"(",["T_VARIABLE","$productSettings",394],["T_OBJECT_OPERATOR","->",394],["T_STRING","getCustomDesign",394],"(",")",")",["T_WHITESPACE"," ",394],"{",["T_WHITESPACE","\n            ",394],["T_VARIABLE","$categorySettings",395],["T_OBJECT_OPERATOR","->",395],["T_STRING","setCustomDesign",395],"(",["T_VARIABLE","$productSettings",395],["T_OBJECT_OPERATOR","->",395],["T_STRING","getCustomDesign",395],"(",")",")",";",["T_WHITESPACE","\n        ",395],"}",["T_WHITESPACE","\n        ",396],["T_IF","if",397],["T_WHITESPACE"," ",397],"(",["T_VARIABLE","$productSettings",397],["T_OBJECT_OPERATOR","->",397],["T_STRING","getPageLayout",397],"(",")",")",["T_WHITESPACE"," ",397],"{",["T_WHITESPACE","\n            ",397],["T_VARIABLE","$categorySettings",398],["T_OBJECT_OPERATOR","->",398],["T_STRING","setPageLayout",398],"(",["T_VARIABLE","$productSettings",398],["T_OBJECT_OPERATOR","->",398],["T_STRING","getPageLayout",398],"(",")",")",";",["T_WHITESPACE","\n        ",398],"}",["T_WHITESPACE","\n        ",399],["T_IF","if",400],["T_WHITESPACE"," ",400],"(",["T_VARIABLE","$productSettings",400],["T_OBJECT_OPERATOR","->",400],["T_STRING","getLayoutUpdates",400],"(",")",")",["T_WHITESPACE"," ",400],"{",["T_WHITESPACE","\n            ",400],["T_VARIABLE","$update",401],["T_WHITESPACE"," ",401],"=",["T_WHITESPACE"," ",401],["T_STRING","array_merge",401],"(",["T_VARIABLE","$categorySettings",401],["T_OBJECT_OPERATOR","->",401],["T_STRING","getLayoutUpdates",401],"(",")",",",["T_WHITESPACE"," ",401],["T_VARIABLE","$productSettings",401],["T_OBJECT_OPERATOR","->",401],["T_STRING","getLayoutUpdates",401],"(",")",")",";",["T_WHITESPACE","\n            ",401],["T_VARIABLE","$categorySettings",402],["T_OBJECT_OPERATOR","->",402],["T_STRING","setLayoutUpdates",402],"(",["T_VARIABLE","$update",402],")",";",["T_WHITESPACE","\n        ",402],"}",["T_WHITESPACE","\n        ",403],["T_RETURN","return",404],["T_WHITESPACE"," ",404],["T_VARIABLE","$categorySettings",404],";",["T_WHITESPACE","\n    ",404],"}",["T_WHITESPACE","\n",405],"}",["T_WHITESPACE","\n",406]]
[["T_OPEN_TAG","<?php\n",1],["T_DOC_COMMENT","\/**\n * Magento\n *\n * NOTICE OF LICENSE\n *\n * This source file is subject to the Open Software License (OSL 3.0)\n * that is bundled with this package in the file LICENSE.txt.\n * It is also available through the world-wide-web at this URL:\n * http:\/\/opensource.org\/licenses\/osl-3.0.php\n * If you did not receive a copy of the license and are unable to\n * obtain it through the world-wide-web, please send an email\n * to license@magento.com so we can send you a copy immediately.\n *\n * DISCLAIMER\n *\n * Do not edit or add to this file if you wish to upgrade Magento to newer\n * versions in the future. If you wish to customize Magento for your\n * needs please refer to http:\/\/www.magento.com for more information.\n *\n * @category    Mage\n * @package     Mage_Catalog\n * @copyright  Copyright (c) 2006-2016 X.commerce, Inc. and affiliates (http:\/\/www.magento.com)\n * @license    http:\/\/opensource.org\/licenses\/osl-3.0.php  Open Software License (OSL 3.0)\n *\/",2],["T_WHITESPACE","\n\n",25],["T_DOC_COMMENT","\/**\n * New products block\n *\n * @category   Mage\n * @package    Mage_Catalog\n * @author     Magento Core Team <core@magentocommerce.com>\n *\/",27],["T_WHITESPACE","\n",33],["T_CLASS","class",34],["T_WHITESPACE"," ",34],["T_STRING","Mage_Catalog_Block_Product_New",34],["T_WHITESPACE"," ",34],["T_EXTENDS","extends",34],["T_WHITESPACE"," ",34],["T_STRING","Mage_Catalog_Block_Product_Abstract",34],["T_WHITESPACE","\n",34],"{",["T_WHITESPACE","\n    ",35],["T_DOC_COMMENT","\/**\n     * Default value for products count that will be shown\n     *\/",36],["T_WHITESPACE","\n    ",38],["T_CONST","const",39],["T_WHITESPACE"," ",39],["T_STRING","DEFAULT_PRODUCTS_COUNT",39],["T_WHITESPACE"," ",39],"=",["T_WHITESPACE"," ",39],["T_LNUMBER","10",39],";",["T_WHITESPACE","\n\n    ",39],["T_DOC_COMMENT","\/**\n     * Products count\n     *\n     * @var null\n     *\/",41],["T_WHITESPACE","\n    ",45],["T_PROTECTED","protected",46],["T_WHITESPACE"," ",46],["T_VARIABLE","$_productsCount",46],";",["T_WHITESPACE","\n\n    ",46],["T_DOC_COMMENT","\/**\n     * Initialize block's cache\n     *\/",48],["T_WHITESPACE","\n    ",50],["T_PROTECTED","protected",51],["T_WHITESPACE"," ",51],["T_FUNCTION","function",51],["T_WHITESPACE"," ",51],["T_STRING","_construct",51],"(",")",["T_WHITESPACE","\n    ",51],"{",["T_WHITESPACE","\n        ",52],["T_STRING","parent",53],["T_DOUBLE_COLON","::",53],["T_STRING","_construct",53],"(",")",";",["T_WHITESPACE","\n\n        ",53],["T_VARIABLE","$this",55],["T_OBJECT_OPERATOR","->",55],["T_STRING","addColumnCountLayoutDepend",55],"(",["T_CONSTANT_ENCAPSED_STRING","'empty'",55],",",["T_WHITESPACE"," ",55],["T_LNUMBER","6",55],")",["T_WHITESPACE","\n            ",55],["T_OBJECT_OPERATOR","->",56],["T_STRING","addColumnCountLayoutDepend",56],"(",["T_CONSTANT_ENCAPSED_STRING","'one_column'",56],",",["T_WHITESPACE"," ",56],["T_LNUMBER","5",56],")",["T_WHITESPACE","\n            ",56],["T_OBJECT_OPERATOR","->",57],["T_STRING","addColumnCountLayoutDepend",57],"(",["T_CONSTANT_ENCAPSED_STRING","'two_columns_left'",57],",",["T_WHITESPACE"," ",57],["T_LNUMBER","4",57],")",["T_WHITESPACE","\n            ",57],["T_OBJECT_OPERATOR","->",58],["T_STRING","addColumnCountLayoutDepend",58],"(",["T_CONSTANT_ENCAPSED_STRING","'two_columns_right'",58],",",["T_WHITESPACE"," ",58],["T_LNUMBER","4",58],")",["T_WHITESPACE","\n            ",58],["T_OBJECT_OPERATOR","->",59],["T_STRING","addColumnCountLayoutDepend",59],"(",["T_CONSTANT_ENCAPSED_STRING","'three_columns'",59],",",["T_WHITESPACE"," ",59],["T_LNUMBER","3",59],")",";",["T_WHITESPACE","\n\n        ",59],["T_VARIABLE","$this",61],["T_OBJECT_OPERATOR","->",61],["T_STRING","addData",61],"(",["T_ARRAY","array",61],"(",["T_CONSTANT_ENCAPSED_STRING","'cache_lifetime'",61],["T_WHITESPACE"," ",61],["T_DOUBLE_ARROW","=>",61],["T_WHITESPACE"," ",61],["T_LNUMBER","86400",61],")",")",";",["T_WHITESPACE","\n        ",61],["T_VARIABLE","$this",62],["T_OBJECT_OPERATOR","->",62],["T_STRING","addCacheTag",62],"(",["T_STRING","Mage_Catalog_Model_Product",62],["T_DOUBLE_COLON","::",62],["T_STRING","CACHE_TAG",62],")",";",["T_WHITESPACE","\n    ",62],"}",["T_WHITESPACE","\n\n    ",63],["T_DOC_COMMENT","\/**\n     * Get Key pieces for caching block content\n     *\n     * @return array\n     *\/",65],["T_WHITESPACE","\n    ",69],["T_PUBLIC","public",70],["T_WHITESPACE"," ",70],["T_FUNCTION","function",70],["T_WHITESPACE"," ",70],["T_STRING","getCacheKeyInfo",70],"(",")",["T_WHITESPACE","\n    ",70],"{",["T_WHITESPACE","\n        ",71],["T_RETURN","return",72],["T_WHITESPACE"," ",72],["T_ARRAY","array",72],"(",["T_WHITESPACE","\n           ",72],["T_CONSTANT_ENCAPSED_STRING","'CATALOG_PRODUCT_NEW'",73],",",["T_WHITESPACE","\n           ",73],["T_STRING","Mage",74],["T_DOUBLE_COLON","::",74],["T_STRING","app",74],"(",")",["T_OBJECT_OPERATOR","->",74],["T_STRING","getStore",74],"(",")",["T_OBJECT_OPERATOR","->",74],["T_STRING","getId",74],"(",")",",",["T_WHITESPACE","\n           ",74],["T_STRING","Mage",75],["T_DOUBLE_COLON","::",75],["T_STRING","getDesign",75],"(",")",["T_OBJECT_OPERATOR","->",75],["T_STRING","getPackageName",75],"(",")",",",["T_WHITESPACE","\n           ",75],["T_STRING","Mage",76],["T_DOUBLE_COLON","::",76],["T_STRING","getDesign",76],"(",")",["T_OBJECT_OPERATOR","->",76],["T_STRING","getTheme",76],"(",["T_CONSTANT_ENCAPSED_STRING","'template'",76],")",",",["T_WHITESPACE","\n           ",76],["T_STRING","Mage",77],["T_DOUBLE_COLON","::",77],["T_STRING","getSingleton",77],"(",["T_CONSTANT_ENCAPSED_STRING","'customer\/session'",77],")",["T_OBJECT_OPERATOR","->",77],["T_STRING","getCustomerGroupId",77],"(",")",",",["T_WHITESPACE","\n           ",77],["T_CONSTANT_ENCAPSED_STRING","'template'",78],["T_WHITESPACE"," ",78],["T_DOUBLE_ARROW","=>",78],["T_WHITESPACE"," ",78],["T_VARIABLE","$this",78],["T_OBJECT_OPERATOR","->",78],["T_STRING","getTemplate",78],"(",")",",",["T_WHITESPACE","\n           ",78],["T_VARIABLE","$this",79],["T_OBJECT_OPERATOR","->",79],["T_STRING","getProductsCount",79],"(",")",["T_WHITESPACE","\n        ",79],")",";",["T_WHITESPACE","\n    ",80],"}",["T_WHITESPACE","\n\n    ",81],["T_DOC_COMMENT","\/**\n     * Prepare and return product collection\n     *\n     * @return Mage_Catalog_Model_Resource_Product_Collection|Object|Varien_Data_Collection\n     *\/",83],["T_WHITESPACE","\n    ",87],["T_PROTECTED","protected",88],["T_WHITESPACE"," ",88],["T_FUNCTION","function",88],["T_WHITESPACE"," ",88],["T_STRING","_getProductCollection",88],"(",")",["T_WHITESPACE","\n    ",88],"{",["T_WHITESPACE","\n        ",89],["T_VARIABLE","$todayStartOfDayDate",90],["T_WHITESPACE","  ",90],"=",["T_WHITESPACE"," ",90],["T_STRING","Mage",90],["T_DOUBLE_COLON","::",90],["T_STRING","app",90],"(",")",["T_OBJECT_OPERATOR","->",90],["T_STRING","getLocale",90],"(",")",["T_OBJECT_OPERATOR","->",90],["T_STRING","date",90],"(",")",["T_WHITESPACE","\n            ",90],["T_OBJECT_OPERATOR","->",91],["T_STRING","setTime",91],"(",["T_CONSTANT_ENCAPSED_STRING","'00:00:00'",91],")",["T_WHITESPACE","\n            ",91],["T_OBJECT_OPERATOR","->",92],["T_STRING","toString",92],"(",["T_STRING","Varien_Date",92],["T_DOUBLE_COLON","::",92],["T_STRING","DATETIME_INTERNAL_FORMAT",92],")",";",["T_WHITESPACE","\n\n        ",92],["T_VARIABLE","$todayEndOfDayDate",94],["T_WHITESPACE","  ",94],"=",["T_WHITESPACE"," ",94],["T_STRING","Mage",94],["T_DOUBLE_COLON","::",94],["T_STRING","app",94],"(",")",["T_OBJECT_OPERATOR","->",94],["T_STRING","getLocale",94],"(",")",["T_OBJECT_OPERATOR","->",94],["T_STRING","date",94],"(",")",["T_WHITESPACE","\n            ",94],["T_OBJECT_OPERATOR","->",95],["T_STRING","setTime",95],"(",["T_CONSTANT_ENCAPSED_STRING","'23:59:59'",95],")",["T_WHITESPACE","\n            ",95],["T_OBJECT_OPERATOR","->",96],["T_STRING","toString",96],"(",["T_STRING","Varien_Date",96],["T_DOUBLE_COLON","::",96],["T_STRING","DATETIME_INTERNAL_FORMAT",96],")",";",["T_WHITESPACE","\n\n        ",96],["T_DOC_COMMENT","\/** @var $collection Mage_Catalog_Model_Resource_Product_Collection *\/",98],["T_WHITESPACE","\n        ",98],["T_VARIABLE","$collection",99],["T_WHITESPACE"," ",99],"=",["T_WHITESPACE"," ",99],["T_STRING","Mage",99],["T_DOUBLE_COLON","::",99],["T_STRING","getResourceModel",99],"(",["T_CONSTANT_ENCAPSED_STRING","'catalog\/product_collection'",99],")",";",["T_WHITESPACE","\n        ",99],["T_VARIABLE","$collection",100],["T_OBJECT_OPERATOR","->",100],["T_STRING","setVisibility",100],"(",["T_STRING","Mage",100],["T_DOUBLE_COLON","::",100],["T_STRING","getSingleton",100],"(",["T_CONSTANT_ENCAPSED_STRING","'catalog\/product_visibility'",100],")",["T_OBJECT_OPERATOR","->",100],["T_STRING","getVisibleInCatalogIds",100],"(",")",")",";",["T_WHITESPACE","\n\n\n        ",100],["T_VARIABLE","$collection",103],["T_WHITESPACE"," ",103],"=",["T_WHITESPACE"," ",103],["T_VARIABLE","$this",103],["T_OBJECT_OPERATOR","->",103],["T_STRING","_addProductAttributesAndPrices",103],"(",["T_VARIABLE","$collection",103],")",["T_WHITESPACE","\n            ",103],["T_OBJECT_OPERATOR","->",104],["T_STRING","addStoreFilter",104],"(",")",["T_WHITESPACE","\n            ",104],["T_OBJECT_OPERATOR","->",105],["T_STRING","addAttributeToFilter",105],"(",["T_CONSTANT_ENCAPSED_STRING","'news_from_date'",105],",",["T_WHITESPACE"," ",105],["T_ARRAY","array",105],"(",["T_CONSTANT_ENCAPSED_STRING","'or'",105],["T_DOUBLE_ARROW","=>",105],["T_WHITESPACE"," ",105],["T_ARRAY","array",105],"(",["T_WHITESPACE","\n                ",105],["T_LNUMBER","0",106],["T_WHITESPACE"," ",106],["T_DOUBLE_ARROW","=>",106],["T_WHITESPACE"," ",106],["T_ARRAY","array",106],"(",["T_CONSTANT_ENCAPSED_STRING","'date'",106],["T_WHITESPACE"," ",106],["T_DOUBLE_ARROW","=>",106],["T_WHITESPACE"," ",106],["T_STRING","true",106],",",["T_WHITESPACE"," ",106],["T_CONSTANT_ENCAPSED_STRING","'to'",106],["T_WHITESPACE"," ",106],["T_DOUBLE_ARROW","=>",106],["T_WHITESPACE"," ",106],["T_VARIABLE","$todayEndOfDayDate",106],")",",",["T_WHITESPACE","\n                ",106],["T_LNUMBER","1",107],["T_WHITESPACE"," ",107],["T_DOUBLE_ARROW","=>",107],["T_WHITESPACE"," ",107],["T_ARRAY","array",107],"(",["T_CONSTANT_ENCAPSED_STRING","'is'",107],["T_WHITESPACE"," ",107],["T_DOUBLE_ARROW","=>",107],["T_WHITESPACE"," ",107],["T_NEW","new",107],["T_WHITESPACE"," ",107],["T_STRING","Zend_Db_Expr",107],"(",["T_CONSTANT_ENCAPSED_STRING","'null'",107],")",")",")",["T_WHITESPACE","\n            ",107],")",",",["T_WHITESPACE"," ",108],["T_CONSTANT_ENCAPSED_STRING","'left'",108],")",["T_WHITESPACE","\n            ",108],["T_OBJECT_OPERATOR","->",109],["T_STRING","addAttributeToFilter",109],"(",["T_CONSTANT_ENCAPSED_STRING","'news_to_date'",109],",",["T_WHITESPACE"," ",109],["T_ARRAY","array",109],"(",["T_CONSTANT_ENCAPSED_STRING","'or'",109],["T_DOUBLE_ARROW","=>",109],["T_WHITESPACE"," ",109],["T_ARRAY","array",109],"(",["T_WHITESPACE","\n                ",109],["T_LNUMBER","0",110],["T_WHITESPACE"," ",110],["T_DOUBLE_ARROW","=>",110],["T_WHITESPACE"," ",110],["T_ARRAY","array",110],"(",["T_CONSTANT_ENCAPSED_STRING","'date'",110],["T_WHITESPACE"," ",110],["T_DOUBLE_ARROW","=>",110],["T_WHITESPACE"," ",110],["T_STRING","true",110],",",["T_WHITESPACE"," ",110],["T_CONSTANT_ENCAPSED_STRING","'from'",110],["T_WHITESPACE"," ",110],["T_DOUBLE_ARROW","=>",110],["T_WHITESPACE"," ",110],["T_VARIABLE","$todayStartOfDayDate",110],")",",",["T_WHITESPACE","\n                ",110],["T_LNUMBER","1",111],["T_WHITESPACE"," ",111],["T_DOUBLE_ARROW","=>",111],["T_WHITESPACE"," ",111],["T_ARRAY","array",111],"(",["T_CONSTANT_ENCAPSED_STRING","'is'",111],["T_WHITESPACE"," ",111],["T_DOUBLE_ARROW","=>",111],["T_WHITESPACE"," ",111],["T_NEW","new",111],["T_WHITESPACE"," ",111],["T_STRING","Zend_Db_Expr",111],"(",["T_CONSTANT_ENCAPSED_STRING","'null'",111],")",")",")",["T_WHITESPACE","\n            ",111],")",",",["T_WHITESPACE"," ",112],["T_CONSTANT_ENCAPSED_STRING","'left'",112],")",["T_WHITESPACE","\n            ",112],["T_OBJECT_OPERATOR","->",113],["T_STRING","addAttributeToFilter",113],"(",["T_WHITESPACE","\n                ",113],["T_ARRAY","array",114],"(",["T_WHITESPACE","\n                    ",114],["T_ARRAY","array",115],"(",["T_CONSTANT_ENCAPSED_STRING","'attribute'",115],["T_WHITESPACE"," ",115],["T_DOUBLE_ARROW","=>",115],["T_WHITESPACE"," ",115],["T_CONSTANT_ENCAPSED_STRING","'news_from_date'",115],",",["T_WHITESPACE"," ",115],["T_CONSTANT_ENCAPSED_STRING","'is'",115],["T_DOUBLE_ARROW","=>",115],["T_NEW","new",115],["T_WHITESPACE"," ",115],["T_STRING","Zend_Db_Expr",115],"(",["T_CONSTANT_ENCAPSED_STRING","'not null'",115],")",")",",",["T_WHITESPACE","\n                    ",115],["T_ARRAY","array",116],"(",["T_CONSTANT_ENCAPSED_STRING","'attribute'",116],["T_WHITESPACE"," ",116],["T_DOUBLE_ARROW","=>",116],["T_WHITESPACE"," ",116],["T_CONSTANT_ENCAPSED_STRING","'news_to_date'",116],",",["T_WHITESPACE"," ",116],["T_CONSTANT_ENCAPSED_STRING","'is'",116],["T_DOUBLE_ARROW","=>",116],["T_NEW","new",116],["T_WHITESPACE"," ",116],["T_STRING","Zend_Db_Expr",116],"(",["T_CONSTANT_ENCAPSED_STRING","'not null'",116],")",")",["T_WHITESPACE","\n                    ",116],")",["T_WHITESPACE","\n              ",117],")",["T_WHITESPACE","\n            ",118],["T_OBJECT_OPERATOR","->",119],["T_STRING","addAttributeToSort",119],"(",["T_CONSTANT_ENCAPSED_STRING","'news_from_date'",119],",",["T_WHITESPACE"," ",119],["T_CONSTANT_ENCAPSED_STRING","'desc'",119],")",["T_WHITESPACE","\n            ",119],["T_OBJECT_OPERATOR","->",120],["T_STRING","setPageSize",120],"(",["T_VARIABLE","$this",120],["T_OBJECT_OPERATOR","->",120],["T_STRING","getProductsCount",120],"(",")",")",["T_WHITESPACE","\n            ",120],["T_OBJECT_OPERATOR","->",121],["T_STRING","setCurPage",121],"(",["T_LNUMBER","1",121],")",["T_WHITESPACE","\n        ",121],";",["T_WHITESPACE","\n\n        ",122],["T_RETURN","return",124],["T_WHITESPACE"," ",124],["T_VARIABLE","$collection",124],";",["T_WHITESPACE","\n    ",124],"}",["T_WHITESPACE","\n\n    ",125],["T_DOC_COMMENT","\/**\n     * Prepare collection with new products\n     *\n     * @return Mage_Core_Block_Abstract\n     *\/",127],["T_WHITESPACE","\n    ",131],["T_PROTECTED","protected",132],["T_WHITESPACE"," ",132],["T_FUNCTION","function",132],["T_WHITESPACE"," ",132],["T_STRING","_beforeToHtml",132],"(",")",["T_WHITESPACE","\n    ",132],"{",["T_WHITESPACE","\n        ",133],["T_VARIABLE","$this",134],["T_OBJECT_OPERATOR","->",134],["T_STRING","setProductCollection",134],"(",["T_VARIABLE","$this",134],["T_OBJECT_OPERATOR","->",134],["T_STRING","_getProductCollection",134],"(",")",")",";",["T_WHITESPACE","\n        ",134],["T_RETURN","return",135],["T_WHITESPACE"," ",135],["T_STRING","parent",135],["T_DOUBLE_COLON","::",135],["T_STRING","_beforeToHtml",135],"(",")",";",["T_WHITESPACE","\n    ",135],"}",["T_WHITESPACE","\n\n    ",136],["T_DOC_COMMENT","\/**\n     * Set how much product should be displayed at once.\n     *\n     * @param $count\n     * @return Mage_Catalog_Block_Product_New\n     *\/",138],["T_WHITESPACE","\n    ",143],["T_PUBLIC","public",144],["T_WHITESPACE"," ",144],["T_FUNCTION","function",144],["T_WHITESPACE"," ",144],["T_STRING","setProductsCount",144],"(",["T_VARIABLE","$count",144],")",["T_WHITESPACE","\n    ",144],"{",["T_WHITESPACE","\n        ",145],["T_VARIABLE","$this",146],["T_OBJECT_OPERATOR","->",146],["T_STRING","_productsCount",146],["T_WHITESPACE"," ",146],"=",["T_WHITESPACE"," ",146],["T_VARIABLE","$count",146],";",["T_WHITESPACE","\n        ",146],["T_RETURN","return",147],["T_WHITESPACE"," ",147],["T_VARIABLE","$this",147],";",["T_WHITESPACE","\n    ",147],"}",["T_WHITESPACE","\n\n    ",148],["T_DOC_COMMENT","\/**\n     * Get how much products should be displayed at once.\n     *\n     * @return int\n     *\/",150],["T_WHITESPACE","\n    ",154],["T_PUBLIC","public",155],["T_WHITESPACE"," ",155],["T_FUNCTION","function",155],["T_WHITESPACE"," ",155],["T_STRING","getProductsCount",155],"(",")",["T_WHITESPACE","\n    ",155],"{",["T_WHITESPACE","\n        ",156],["T_IF","if",157],["T_WHITESPACE"," ",157],"(",["T_STRING","null",157],["T_WHITESPACE"," ",157],["T_IS_IDENTICAL","===",157],["T_WHITESPACE"," ",157],["T_VARIABLE","$this",157],["T_OBJECT_OPERATOR","->",157],["T_STRING","_productsCount",157],")",["T_WHITESPACE"," ",157],"{",["T_WHITESPACE","\n            ",157],["T_VARIABLE","$this",158],["T_OBJECT_OPERATOR","->",158],["T_STRING","_productsCount",158],["T_WHITESPACE"," ",158],"=",["T_WHITESPACE"," ",158],["T_STRING","self",158],["T_DOUBLE_COLON","::",158],["T_STRING","DEFAULT_PRODUCTS_COUNT",158],";",["T_WHITESPACE","\n        ",158],"}",["T_WHITESPACE","\n        ",159],["T_RETURN","return",160],["T_WHITESPACE"," ",160],["T_VARIABLE","$this",160],["T_OBJECT_OPERATOR","->",160],["T_STRING","_productsCount",160],";",["T_WHITESPACE","\n    ",160],"}",["T_WHITESPACE","\n",161],"}",["T_WHITESPACE","\n",162]]
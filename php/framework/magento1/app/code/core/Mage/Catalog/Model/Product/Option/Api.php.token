[["T_OPEN_TAG","<?php\n",1],["T_DOC_COMMENT","\/**\n * Magento\n *\n * NOTICE OF LICENSE\n *\n * This source file is subject to the Open Software License (OSL 3.0)\n * that is bundled with this package in the file LICENSE.txt.\n * It is also available through the world-wide-web at this URL:\n * http:\/\/opensource.org\/licenses\/osl-3.0.php\n * If you did not receive a copy of the license and are unable to\n * obtain it through the world-wide-web, please send an email\n * to license@magento.com so we can send you a copy immediately.\n *\n * DISCLAIMER\n *\n * Do not edit or add to this file if you wish to upgrade Magento to newer\n * versions in the future. If you wish to customize Magento for your\n * needs please refer to http:\/\/www.magento.com for more information.\n *\n * @category    Mage\n * @package     Mage_Catalog\n * @copyright  Copyright (c) 2006-2016 X.commerce, Inc. and affiliates (http:\/\/www.magento.com)\n * @license    http:\/\/opensource.org\/licenses\/osl-3.0.php  Open Software License (OSL 3.0)\n *\/",2],["T_WHITESPACE","\n\n",25],["T_DOC_COMMENT","\/**\n * Catalog product options api\n *\n * @category   Mage\n * @package    Mage_Catalog\n * @author     Magento Core Team <core@magentocommerce.com>\n *\/",27],["T_WHITESPACE","\n",33],["T_CLASS","class",34],["T_WHITESPACE"," ",34],["T_STRING","Mage_Catalog_Model_Product_Option_Api",34],["T_WHITESPACE"," ",34],["T_EXTENDS","extends",34],["T_WHITESPACE"," ",34],["T_STRING","Mage_Catalog_Model_Api_Resource",34],["T_WHITESPACE","\n",34],"{",["T_WHITESPACE","\n\n    ",35],["T_DOC_COMMENT","\/**\n     * Add custom option to product\n     *\n     * @param string $productId\n     * @param array $data\n     * @param int|string|null $store\n     * @return bool $isAdded\n     *\/",37],["T_WHITESPACE","\n    ",44],["T_PUBLIC","public",45],["T_WHITESPACE"," ",45],["T_FUNCTION","function",45],["T_WHITESPACE"," ",45],["T_STRING","add",45],"(",["T_VARIABLE","$productId",45],",",["T_WHITESPACE"," ",45],["T_VARIABLE","$data",45],",",["T_WHITESPACE"," ",45],["T_VARIABLE","$store",45],["T_WHITESPACE"," ",45],"=",["T_WHITESPACE"," ",45],["T_STRING","null",45],")",["T_WHITESPACE","\n    ",45],"{",["T_WHITESPACE","\n        ",46],["T_VARIABLE","$product",47],["T_WHITESPACE"," ",47],"=",["T_WHITESPACE"," ",47],["T_VARIABLE","$this",47],["T_OBJECT_OPERATOR","->",47],["T_STRING","_getProduct",47],"(",["T_VARIABLE","$productId",47],",",["T_WHITESPACE"," ",47],["T_VARIABLE","$store",47],",",["T_WHITESPACE"," ",47],["T_STRING","null",47],")",";",["T_WHITESPACE","\n        ",47],["T_IF","if",48],["T_WHITESPACE"," ",48],"(","!","(",["T_STRING","is_array",48],"(",["T_VARIABLE","$data",48],"[",["T_CONSTANT_ENCAPSED_STRING","'additional_fields'",48],"]",")",["T_WHITESPACE"," ",48],["T_LOGICAL_AND","and",48],["T_WHITESPACE"," ",48],["T_STRING","count",48],"(",["T_VARIABLE","$data",48],"[",["T_CONSTANT_ENCAPSED_STRING","'additional_fields'",48],"]",")",")",")",["T_WHITESPACE"," ",48],"{",["T_WHITESPACE","\n            ",48],["T_VARIABLE","$this",49],["T_OBJECT_OPERATOR","->",49],["T_STRING","_fault",49],"(",["T_CONSTANT_ENCAPSED_STRING","'invalid_data'",49],")",";",["T_WHITESPACE","\n        ",49],"}",["T_WHITESPACE","\n        ",50],["T_IF","if",51],["T_WHITESPACE"," ",51],"(","!",["T_VARIABLE","$this",51],["T_OBJECT_OPERATOR","->",51],["T_STRING","_isTypeAllowed",51],"(",["T_VARIABLE","$data",51],"[",["T_CONSTANT_ENCAPSED_STRING","'type'",51],"]",")",")",["T_WHITESPACE"," ",51],"{",["T_WHITESPACE","\n            ",51],["T_VARIABLE","$this",52],["T_OBJECT_OPERATOR","->",52],["T_STRING","_fault",52],"(",["T_CONSTANT_ENCAPSED_STRING","'invalid_type'",52],")",";",["T_WHITESPACE","\n        ",52],"}",["T_WHITESPACE","\n        ",53],["T_VARIABLE","$this",54],["T_OBJECT_OPERATOR","->",54],["T_STRING","_prepareAdditionalFields",54],"(",["T_WHITESPACE","\n            ",54],["T_VARIABLE","$data",55],",",["T_WHITESPACE","\n            ",55],["T_VARIABLE","$product",56],["T_OBJECT_OPERATOR","->",56],["T_STRING","getOptionInstance",56],"(",")",["T_OBJECT_OPERATOR","->",56],["T_STRING","getGroupByType",56],"(",["T_VARIABLE","$data",56],"[",["T_CONSTANT_ENCAPSED_STRING","'type'",56],"]",")",["T_WHITESPACE","\n        ",56],")",";",["T_WHITESPACE","\n        ",57],["T_VARIABLE","$this",58],["T_OBJECT_OPERATOR","->",58],["T_STRING","_saveProductCustomOption",58],"(",["T_VARIABLE","$product",58],",",["T_WHITESPACE"," ",58],["T_VARIABLE","$data",58],")",";",["T_WHITESPACE","\n        ",58],["T_RETURN","return",59],["T_WHITESPACE"," ",59],["T_STRING","true",59],";",["T_WHITESPACE","\n    ",59],"}",["T_WHITESPACE","\n\n    ",60],["T_DOC_COMMENT","\/**\n     * Update product custom option data\n     *\n     * @param string $optionId\n     * @param array $data\n     * @param int|string|null $store\n     * @return bool\n     *\/",62],["T_WHITESPACE","\n    ",69],["T_PUBLIC","public",70],["T_WHITESPACE"," ",70],["T_FUNCTION","function",70],["T_WHITESPACE"," ",70],["T_STRING","update",70],"(",["T_VARIABLE","$optionId",70],",",["T_WHITESPACE"," ",70],["T_VARIABLE","$data",70],",",["T_WHITESPACE"," ",70],["T_VARIABLE","$store",70],["T_WHITESPACE"," ",70],"=",["T_WHITESPACE"," ",70],["T_STRING","null",70],")",["T_WHITESPACE","\n    ",70],"{",["T_WHITESPACE","\n        ",71],["T_DOC_COMMENT","\/** @var $option Mage_Catalog_Model_Product_Option *\/",72],["T_WHITESPACE","\n        ",72],["T_VARIABLE","$option",73],["T_WHITESPACE"," ",73],"=",["T_WHITESPACE"," ",73],["T_STRING","Mage",73],["T_DOUBLE_COLON","::",73],["T_STRING","getModel",73],"(",["T_CONSTANT_ENCAPSED_STRING","'catalog\/product_option'",73],")",["T_OBJECT_OPERATOR","->",73],["T_STRING","load",73],"(",["T_VARIABLE","$optionId",73],")",";",["T_WHITESPACE","\n        ",73],["T_IF","if",74],["T_WHITESPACE"," ",74],"(","!",["T_VARIABLE","$option",74],["T_OBJECT_OPERATOR","->",74],["T_STRING","getId",74],"(",")",")",["T_WHITESPACE"," ",74],"{",["T_WHITESPACE","\n            ",74],["T_VARIABLE","$this",75],["T_OBJECT_OPERATOR","->",75],["T_STRING","_fault",75],"(",["T_CONSTANT_ENCAPSED_STRING","'option_not_exists'",75],")",";",["T_WHITESPACE","\n        ",75],"}",["T_WHITESPACE","\n        ",76],["T_VARIABLE","$product",77],["T_WHITESPACE"," ",77],"=",["T_WHITESPACE"," ",77],["T_VARIABLE","$this",77],["T_OBJECT_OPERATOR","->",77],["T_STRING","_getProduct",77],"(",["T_VARIABLE","$option",77],["T_OBJECT_OPERATOR","->",77],["T_STRING","getProductId",77],"(",")",",",["T_WHITESPACE"," ",77],["T_VARIABLE","$store",77],",",["T_WHITESPACE"," ",77],["T_STRING","null",77],")",";",["T_WHITESPACE","\n        ",77],["T_VARIABLE","$option",78],["T_WHITESPACE"," ",78],"=",["T_WHITESPACE"," ",78],["T_VARIABLE","$product",78],["T_OBJECT_OPERATOR","->",78],["T_STRING","getOptionById",78],"(",["T_VARIABLE","$optionId",78],")",";",["T_WHITESPACE","\n        ",78],["T_IF","if",79],["T_WHITESPACE"," ",79],"(",["T_ISSET","isset",79],"(",["T_VARIABLE","$data",79],"[",["T_CONSTANT_ENCAPSED_STRING","'type'",79],"]",")",["T_WHITESPACE"," ",79],["T_LOGICAL_AND","and",79],["T_WHITESPACE"," ",79],"!",["T_VARIABLE","$this",79],["T_OBJECT_OPERATOR","->",79],["T_STRING","_isTypeAllowed",79],"(",["T_VARIABLE","$data",79],"[",["T_CONSTANT_ENCAPSED_STRING","'type'",79],"]",")",")",["T_WHITESPACE"," ",79],"{",["T_WHITESPACE","\n            ",79],["T_VARIABLE","$this",80],["T_OBJECT_OPERATOR","->",80],["T_STRING","_fault",80],"(",["T_CONSTANT_ENCAPSED_STRING","'invalid_type'",80],")",";",["T_WHITESPACE","\n        ",80],"}",["T_WHITESPACE","\n        ",81],["T_IF","if",82],["T_WHITESPACE"," ",82],"(",["T_ISSET","isset",82],"(",["T_VARIABLE","$data",82],"[",["T_CONSTANT_ENCAPSED_STRING","'additional_fields'",82],"]",")",")",["T_WHITESPACE"," ",82],"{",["T_WHITESPACE","\n            ",82],["T_VARIABLE","$this",83],["T_OBJECT_OPERATOR","->",83],["T_STRING","_prepareAdditionalFields",83],"(",["T_WHITESPACE","\n                ",83],["T_VARIABLE","$data",84],",",["T_WHITESPACE","\n                ",84],["T_VARIABLE","$option",85],["T_OBJECT_OPERATOR","->",85],["T_STRING","getGroupByType",85],"(",")",["T_WHITESPACE","\n            ",85],")",";",["T_WHITESPACE","\n        ",86],"}",["T_WHITESPACE","\n        ",87],["T_FOREACH","foreach",88],["T_WHITESPACE"," ",88],"(",["T_VARIABLE","$option",88],["T_OBJECT_OPERATOR","->",88],["T_STRING","getValues",88],"(",")",["T_WHITESPACE"," ",88],["T_AS","as",88],["T_WHITESPACE"," ",88],["T_VARIABLE","$valueId",88],["T_WHITESPACE"," ",88],["T_DOUBLE_ARROW","=>",88],["T_WHITESPACE"," ",88],["T_VARIABLE","$value",88],")",["T_WHITESPACE"," ",88],"{",["T_WHITESPACE","\n            ",88],["T_IF","if",89],"(",["T_ISSET","isset",89],"(",["T_VARIABLE","$data",89],"[",["T_CONSTANT_ENCAPSED_STRING","'values'",89],"]","[",["T_VARIABLE","$valueId",89],"]",")",")",["T_WHITESPACE"," ",89],"{",["T_WHITESPACE","\n                ",89],["T_VARIABLE","$data",90],"[",["T_CONSTANT_ENCAPSED_STRING","'values'",90],"]","[",["T_VARIABLE","$valueId",90],"]",["T_WHITESPACE"," ",90],"=",["T_WHITESPACE"," ",90],["T_STRING","array_merge",90],"(",["T_VARIABLE","$value",90],["T_OBJECT_OPERATOR","->",90],["T_STRING","getData",90],"(",")",",",["T_WHITESPACE"," ",90],["T_VARIABLE","$data",90],"[",["T_CONSTANT_ENCAPSED_STRING","'values'",90],"]","[",["T_VARIABLE","$valueId",90],"]",")",";",["T_WHITESPACE","\n            ",90],"}",["T_WHITESPACE","\n        ",91],"}",["T_WHITESPACE","\n        ",92],["T_VARIABLE","$data",93],["T_WHITESPACE"," ",93],"=",["T_WHITESPACE"," ",93],["T_STRING","array_merge",93],"(",["T_VARIABLE","$option",93],["T_OBJECT_OPERATOR","->",93],["T_STRING","getData",93],"(",")",",",["T_WHITESPACE"," ",93],["T_VARIABLE","$data",93],")",";",["T_WHITESPACE","\n        ",93],["T_VARIABLE","$this",94],["T_OBJECT_OPERATOR","->",94],["T_STRING","_saveProductCustomOption",94],"(",["T_VARIABLE","$product",94],",",["T_WHITESPACE"," ",94],["T_VARIABLE","$data",94],")",";",["T_WHITESPACE","\n        ",94],["T_RETURN","return",95],["T_WHITESPACE"," ",95],["T_STRING","true",95],";",["T_WHITESPACE","\n    ",95],"}",["T_WHITESPACE","\n\n    ",96],["T_DOC_COMMENT","\/**\n     * Prepare custom option data for saving by model. Used for custom option add and update\n     *\n     * @param array $data\n     * @param string $groupType\n     * @return void\n     *\/",98],["T_WHITESPACE","\n    ",104],["T_PROTECTED","protected",105],["T_WHITESPACE"," ",105],["T_FUNCTION","function",105],["T_WHITESPACE"," ",105],["T_STRING","_prepareAdditionalFields",105],"(","&",["T_VARIABLE","$data",105],",",["T_WHITESPACE"," ",105],["T_VARIABLE","$groupType",105],")",["T_WHITESPACE","\n    ",105],"{",["T_WHITESPACE","\n        ",106],["T_IF","if",107],["T_WHITESPACE"," ",107],"(",["T_STRING","is_array",107],"(",["T_VARIABLE","$data",107],"[",["T_CONSTANT_ENCAPSED_STRING","'additional_fields'",107],"]",")",")",["T_WHITESPACE"," ",107],"{",["T_WHITESPACE","\n            ",107],["T_IF","if",108],["T_WHITESPACE"," ",108],"(",["T_VARIABLE","$groupType",108],["T_WHITESPACE"," ",108],["T_IS_NOT_EQUAL","!=",108],["T_WHITESPACE"," ",108],["T_STRING","Mage_Catalog_Model_Product_Option",108],["T_DOUBLE_COLON","::",108],["T_STRING","OPTION_GROUP_SELECT",108],")",["T_WHITESPACE"," ",108],"{",["T_WHITESPACE","\n                ",108],["T_COMMENT","\/\/ reset can be used as there should be the only\n",109],["T_WHITESPACE","                ",110],["T_COMMENT","\/\/ element in 'additional_fields' for options of all types except those from Select group\n",110],["T_WHITESPACE","                ",111],["T_VARIABLE","$field",111],["T_WHITESPACE"," ",111],"=",["T_WHITESPACE"," ",111],["T_STRING","reset",111],"(",["T_VARIABLE","$data",111],"[",["T_CONSTANT_ENCAPSED_STRING","'additional_fields'",111],"]",")",";",["T_WHITESPACE","\n                ",111],["T_IF","if",112],["T_WHITESPACE"," ",112],"(","!","(",["T_STRING","is_array",112],"(",["T_VARIABLE","$field",112],")",["T_WHITESPACE"," ",112],["T_LOGICAL_AND","and",112],["T_WHITESPACE"," ",112],["T_STRING","count",112],"(",["T_VARIABLE","$field",112],")",")",")",["T_WHITESPACE"," ",112],"{",["T_WHITESPACE","\n                    ",112],["T_VARIABLE","$this",113],["T_OBJECT_OPERATOR","->",113],["T_STRING","_fault",113],"(",["T_CONSTANT_ENCAPSED_STRING","'invalid_data'",113],")",";",["T_WHITESPACE","\n                ",113],"}",["T_WHITESPACE"," ",114],["T_ELSE","else",114],["T_WHITESPACE"," ",114],"{",["T_WHITESPACE","\n                    ",114],["T_FOREACH","foreach",115],["T_WHITESPACE"," ",115],"(",["T_VARIABLE","$field",115],["T_WHITESPACE"," ",115],["T_AS","as",115],["T_WHITESPACE"," ",115],["T_VARIABLE","$key",115],["T_WHITESPACE"," ",115],["T_DOUBLE_ARROW","=>",115],["T_WHITESPACE"," ",115],["T_VARIABLE","$value",115],")",["T_WHITESPACE"," ",115],"{",["T_WHITESPACE","\n                        ",115],["T_VARIABLE","$data",116],"[",["T_VARIABLE","$key",116],"]",["T_WHITESPACE"," ",116],"=",["T_WHITESPACE"," ",116],["T_VARIABLE","$value",116],";",["T_WHITESPACE","\n                    ",116],"}",["T_WHITESPACE","\n                ",117],"}",["T_WHITESPACE","\n            ",118],"}",["T_WHITESPACE"," ",119],["T_ELSE","else",119],["T_WHITESPACE"," ",119],"{",["T_WHITESPACE","\n                ",119],["T_COMMENT","\/\/ convert Select rows array to appropriate format for saving in the model\n",120],["T_WHITESPACE","                ",121],["T_FOREACH","foreach",121],["T_WHITESPACE"," ",121],"(",["T_VARIABLE","$data",121],"[",["T_CONSTANT_ENCAPSED_STRING","'additional_fields'",121],"]",["T_WHITESPACE"," ",121],["T_AS","as",121],["T_WHITESPACE"," ",121],["T_VARIABLE","$row",121],")",["T_WHITESPACE"," ",121],"{",["T_WHITESPACE","\n                    ",121],["T_IF","if",122],["T_WHITESPACE"," ",122],"(","!","(",["T_STRING","is_array",122],"(",["T_VARIABLE","$row",122],")",["T_WHITESPACE"," ",122],["T_LOGICAL_AND","and",122],["T_WHITESPACE"," ",122],["T_STRING","count",122],"(",["T_VARIABLE","$row",122],")",")",")",["T_WHITESPACE"," ",122],"{",["T_WHITESPACE","\n                        ",122],["T_VARIABLE","$this",123],["T_OBJECT_OPERATOR","->",123],["T_STRING","_fault",123],"(",["T_CONSTANT_ENCAPSED_STRING","'invalid_data'",123],")",";",["T_WHITESPACE","\n                    ",123],"}",["T_WHITESPACE"," ",124],["T_ELSE","else",124],["T_WHITESPACE"," ",124],"{",["T_WHITESPACE","\n                        ",124],["T_FOREACH","foreach",125],["T_WHITESPACE"," ",125],"(",["T_VARIABLE","$row",125],["T_WHITESPACE"," ",125],["T_AS","as",125],["T_WHITESPACE"," ",125],["T_VARIABLE","$key",125],["T_WHITESPACE"," ",125],["T_DOUBLE_ARROW","=>",125],["T_WHITESPACE"," ",125],["T_VARIABLE","$value",125],")",["T_WHITESPACE"," ",125],"{",["T_WHITESPACE","\n                            ",125],["T_VARIABLE","$row",126],"[",["T_VARIABLE","$key",126],"]",["T_WHITESPACE"," ",126],"=",["T_WHITESPACE"," ",126],["T_STRING","Mage",126],["T_DOUBLE_COLON","::",126],["T_STRING","helper",126],"(",["T_CONSTANT_ENCAPSED_STRING","'catalog'",126],")",["T_OBJECT_OPERATOR","->",126],["T_STRING","stripTags",126],"(",["T_VARIABLE","$value",126],")",";",["T_WHITESPACE","\n                        ",126],"}",["T_WHITESPACE","\n                        ",127],["T_IF","if",128],["T_WHITESPACE"," ",128],"(","!",["T_EMPTY","empty",128],"(",["T_VARIABLE","$row",128],"[",["T_CONSTANT_ENCAPSED_STRING","'value_id'",128],"]",")",")",["T_WHITESPACE"," ",128],"{",["T_WHITESPACE","\n                            ",128],["T_COMMENT","\/\/ map 'value_id' to 'option_type_id'\n",129],["T_WHITESPACE","                            ",130],["T_VARIABLE","$row",130],"[",["T_CONSTANT_ENCAPSED_STRING","'option_type_id'",130],"]",["T_WHITESPACE"," ",130],"=",["T_WHITESPACE"," ",130],["T_VARIABLE","$row",130],"[",["T_CONSTANT_ENCAPSED_STRING","'value_id'",130],"]",";",["T_WHITESPACE","\n                            ",130],["T_UNSET","unset",131],"(",["T_VARIABLE","$row",131],"[",["T_CONSTANT_ENCAPSED_STRING","'value_id'",131],"]",")",";",["T_WHITESPACE","\n                            ",131],["T_VARIABLE","$data",132],"[",["T_CONSTANT_ENCAPSED_STRING","'values'",132],"]","[",["T_VARIABLE","$row",132],"[",["T_CONSTANT_ENCAPSED_STRING","'option_type_id'",132],"]","]",["T_WHITESPACE"," ",132],"=",["T_WHITESPACE"," ",132],["T_VARIABLE","$row",132],";",["T_WHITESPACE","\n                        ",132],"}",["T_WHITESPACE"," ",133],["T_ELSE","else",133],["T_WHITESPACE"," ",133],"{",["T_WHITESPACE","\n                            ",133],["T_VARIABLE","$data",134],"[",["T_CONSTANT_ENCAPSED_STRING","'values'",134],"]","[","]",["T_WHITESPACE"," ",134],"=",["T_WHITESPACE"," ",134],["T_VARIABLE","$row",134],";",["T_WHITESPACE","\n                        ",134],"}",["T_WHITESPACE","\n                    ",135],"}",["T_WHITESPACE","\n                ",136],"}",["T_WHITESPACE","\n            ",137],"}",["T_WHITESPACE","\n        ",138],"}",["T_WHITESPACE","\n        ",139],["T_UNSET","unset",140],"(",["T_VARIABLE","$data",140],"[",["T_CONSTANT_ENCAPSED_STRING","'additional_fields'",140],"]",")",";",["T_WHITESPACE","\n    ",140],"}",["T_WHITESPACE","\n\n    ",141],["T_DOC_COMMENT","\/**\n     * Save product custom option data. Used for custom option add and update.\n     *\n     * @param Mage_Catalog_Model_Product $product\n     * @param array $data\n     * @return void\n     *\/",143],["T_WHITESPACE","\n    ",149],["T_PROTECTED","protected",150],["T_WHITESPACE"," ",150],["T_FUNCTION","function",150],["T_WHITESPACE"," ",150],["T_STRING","_saveProductCustomOption",150],"(",["T_VARIABLE","$product",150],",",["T_WHITESPACE"," ",150],["T_VARIABLE","$data",150],")",["T_WHITESPACE","\n    ",150],"{",["T_WHITESPACE","\n        ",151],["T_FOREACH","foreach",152],["T_WHITESPACE"," ",152],"(",["T_VARIABLE","$data",152],["T_WHITESPACE"," ",152],["T_AS","as",152],["T_WHITESPACE"," ",152],["T_VARIABLE","$key",152],["T_WHITESPACE"," ",152],["T_DOUBLE_ARROW","=>",152],["T_WHITESPACE"," ",152],["T_VARIABLE","$value",152],")",["T_WHITESPACE"," ",152],"{",["T_WHITESPACE","\n            ",152],["T_IF","if",153],["T_WHITESPACE"," ",153],"(",["T_STRING","is_string",153],"(",["T_VARIABLE","$value",153],")",")",["T_WHITESPACE"," ",153],"{",["T_WHITESPACE","\n                ",153],["T_VARIABLE","$data",154],"[",["T_VARIABLE","$key",154],"]",["T_WHITESPACE"," ",154],"=",["T_WHITESPACE"," ",154],["T_STRING","Mage",154],["T_DOUBLE_COLON","::",154],["T_STRING","helper",154],"(",["T_CONSTANT_ENCAPSED_STRING","'catalog'",154],")",["T_OBJECT_OPERATOR","->",154],["T_STRING","stripTags",154],"(",["T_VARIABLE","$value",154],")",";",["T_WHITESPACE","\n            ",154],"}",["T_WHITESPACE","\n        ",155],"}",["T_WHITESPACE","\n\n        ",156],["T_TRY","try",158],["T_WHITESPACE"," ",158],"{",["T_WHITESPACE","\n            ",158],["T_IF","if",159],["T_WHITESPACE"," ",159],"(","!",["T_VARIABLE","$product",159],["T_OBJECT_OPERATOR","->",159],["T_STRING","getOptionsReadonly",159],"(",")",")",["T_WHITESPACE"," ",159],"{",["T_WHITESPACE","\n                ",159],["T_VARIABLE","$product",160],["T_WHITESPACE","\n                    ",160],["T_OBJECT_OPERATOR","->",161],["T_STRING","getOptionInstance",161],"(",")",["T_WHITESPACE","\n                    ",161],["T_OBJECT_OPERATOR","->",162],["T_STRING","setOptions",162],"(",["T_ARRAY","array",162],"(",["T_VARIABLE","$data",162],")",")",";",["T_WHITESPACE","\n\n                ",162],["T_VARIABLE","$product",164],["T_OBJECT_OPERATOR","->",164],["T_STRING","setHasOptions",164],"(",["T_STRING","true",164],")",";",["T_WHITESPACE","\n\n                ",164],["T_COMMENT","\/\/ an empty request can be set as event parameter\n",166],["T_WHITESPACE","                ",167],["T_COMMENT","\/\/ because it is not used for options changing in observers\n",167],["T_WHITESPACE","                ",168],["T_STRING","Mage",168],["T_DOUBLE_COLON","::",168],["T_STRING","dispatchEvent",168],"(",["T_WHITESPACE","\n                    ",168],["T_CONSTANT_ENCAPSED_STRING","'catalog_product_prepare_save'",169],",",["T_WHITESPACE","\n                    ",169],["T_ARRAY","array",170],"(",["T_CONSTANT_ENCAPSED_STRING","'product'",170],["T_WHITESPACE"," ",170],["T_DOUBLE_ARROW","=>",170],["T_WHITESPACE"," ",170],["T_VARIABLE","$product",170],",",["T_WHITESPACE"," ",170],["T_CONSTANT_ENCAPSED_STRING","'request'",170],["T_WHITESPACE"," ",170],["T_DOUBLE_ARROW","=>",170],["T_WHITESPACE"," ",170],["T_NEW","new",170],["T_WHITESPACE"," ",170],["T_STRING","Mage_Core_Controller_Request_Http",170],"(",")",")",["T_WHITESPACE","\n                ",170],")",";",["T_WHITESPACE","\n\n                ",171],["T_VARIABLE","$product",173],["T_OBJECT_OPERATOR","->",173],["T_STRING","save",173],"(",")",";",["T_WHITESPACE","\n            ",173],"}",["T_WHITESPACE","\n        ",174],"}",["T_WHITESPACE"," ",175],["T_CATCH","catch",175],["T_WHITESPACE"," ",175],"(",["T_STRING","Exception",175],["T_WHITESPACE"," ",175],["T_VARIABLE","$e",175],")",["T_WHITESPACE"," ",175],"{",["T_WHITESPACE","\n            ",175],["T_VARIABLE","$this",176],["T_OBJECT_OPERATOR","->",176],["T_STRING","_fault",176],"(",["T_CONSTANT_ENCAPSED_STRING","'save_option_error'",176],",",["T_WHITESPACE"," ",176],["T_VARIABLE","$e",176],["T_OBJECT_OPERATOR","->",176],["T_STRING","getMessage",176],"(",")",")",";",["T_WHITESPACE","\n        ",176],"}",["T_WHITESPACE","\n    ",177],"}",["T_WHITESPACE","\n\n    ",178],["T_DOC_COMMENT","\/**\n     * Read list of possible custom option types from module config\n     *\n     * @return array\n     *\/",180],["T_WHITESPACE","\n    ",184],["T_PUBLIC","public",185],["T_WHITESPACE"," ",185],["T_FUNCTION","function",185],["T_WHITESPACE"," ",185],["T_STRING","types",185],"(",")",["T_WHITESPACE","\n    ",185],"{",["T_WHITESPACE","\n        ",186],["T_VARIABLE","$path",187],["T_WHITESPACE"," ",187],"=",["T_WHITESPACE"," ",187],["T_STRING","Mage_Adminhtml_Model_System_Config_Source_Product_Options_Type",187],["T_DOUBLE_COLON","::",187],["T_STRING","PRODUCT_OPTIONS_GROUPS_PATH",187],";",["T_WHITESPACE","\n        ",187],["T_VARIABLE","$types",188],["T_WHITESPACE"," ",188],"=",["T_WHITESPACE"," ",188],["T_ARRAY","array",188],"(",")",";",["T_WHITESPACE","\n        ",188],["T_FOREACH","foreach",189],["T_WHITESPACE"," ",189],"(",["T_STRING","Mage",189],["T_DOUBLE_COLON","::",189],["T_STRING","getConfig",189],"(",")",["T_OBJECT_OPERATOR","->",189],["T_STRING","getNode",189],"(",["T_VARIABLE","$path",189],")",["T_OBJECT_OPERATOR","->",189],["T_STRING","children",189],"(",")",["T_WHITESPACE"," ",189],["T_AS","as",189],["T_WHITESPACE"," ",189],["T_VARIABLE","$group",189],")",["T_WHITESPACE"," ",189],"{",["T_WHITESPACE","\n            ",189],["T_VARIABLE","$groupTypes",190],["T_WHITESPACE"," ",190],"=",["T_WHITESPACE"," ",190],["T_STRING","Mage",190],["T_DOUBLE_COLON","::",190],["T_STRING","getConfig",190],"(",")",["T_OBJECT_OPERATOR","->",190],["T_STRING","getNode",190],"(",["T_VARIABLE","$path",190],["T_WHITESPACE"," ",190],".",["T_WHITESPACE"," ",190],["T_CONSTANT_ENCAPSED_STRING","'\/'",190],["T_WHITESPACE"," ",190],".",["T_WHITESPACE"," ",190],["T_VARIABLE","$group",190],["T_OBJECT_OPERATOR","->",190],["T_STRING","getName",190],"(",")",["T_WHITESPACE"," ",190],".",["T_WHITESPACE"," ",190],["T_CONSTANT_ENCAPSED_STRING","'\/types'",190],")",["T_OBJECT_OPERATOR","->",190],["T_STRING","children",190],"(",")",";",["T_WHITESPACE","\n            ",190],["T_DOC_COMMENT","\/** @var $type Mage_Core_Model_Config_Element *\/",191],["T_WHITESPACE","\n            ",191],["T_FOREACH","foreach",192],"(",["T_VARIABLE","$groupTypes",192],["T_WHITESPACE"," ",192],["T_AS","as",192],["T_WHITESPACE"," ",192],["T_VARIABLE","$type",192],")","{",["T_WHITESPACE","\n                ",192],["T_VARIABLE","$labelPath",193],["T_WHITESPACE"," ",193],"=",["T_WHITESPACE"," ",193],["T_VARIABLE","$path",193],["T_WHITESPACE"," ",193],".",["T_WHITESPACE"," ",193],["T_CONSTANT_ENCAPSED_STRING","'\/'",193],["T_WHITESPACE"," ",193],".",["T_WHITESPACE"," ",193],["T_VARIABLE","$group",193],["T_OBJECT_OPERATOR","->",193],["T_STRING","getName",193],"(",")",["T_WHITESPACE"," ",193],".",["T_WHITESPACE"," ",193],["T_CONSTANT_ENCAPSED_STRING","'\/types\/'",193],["T_WHITESPACE"," ",193],".",["T_WHITESPACE"," ",193],["T_VARIABLE","$type",193],["T_OBJECT_OPERATOR","->",193],["T_STRING","getName",193],"(",")",["T_WHITESPACE"," ",193],".",["T_WHITESPACE"," ",193],["T_CONSTANT_ENCAPSED_STRING","'\/label'",193],";",["T_WHITESPACE","\n                ",193],["T_VARIABLE","$types",194],"[","]",["T_WHITESPACE"," ",194],"=",["T_WHITESPACE"," ",194],["T_ARRAY","array",194],"(",["T_WHITESPACE","\n                    ",194],["T_CONSTANT_ENCAPSED_STRING","'label'",195],["T_WHITESPACE"," ",195],["T_DOUBLE_ARROW","=>",195],["T_WHITESPACE"," ",195],["T_STRING_CAST","(string)",195],["T_WHITESPACE"," ",195],["T_STRING","Mage",195],["T_DOUBLE_COLON","::",195],["T_STRING","getConfig",195],"(",")",["T_OBJECT_OPERATOR","->",195],["T_STRING","getNode",195],"(",["T_VARIABLE","$labelPath",195],")",",",["T_WHITESPACE","\n                    ",195],["T_CONSTANT_ENCAPSED_STRING","'value'",196],["T_WHITESPACE"," ",196],["T_DOUBLE_ARROW","=>",196],["T_WHITESPACE"," ",196],["T_VARIABLE","$type",196],["T_OBJECT_OPERATOR","->",196],["T_STRING","getName",196],"(",")",["T_WHITESPACE","\n                ",196],")",";",["T_WHITESPACE","\n            ",197],"}",["T_WHITESPACE","\n        ",198],"}",["T_WHITESPACE","\n        ",199],["T_RETURN","return",200],["T_WHITESPACE"," ",200],["T_VARIABLE","$types",200],";",["T_WHITESPACE","\n    ",200],"}",["T_WHITESPACE","\n\n    ",201],["T_DOC_COMMENT","\/**\n     * Get full information about custom option in product\n     *\n     * @param int|string $optionId\n     * @param  int|string|null $store\n     * @return array\n     *\/",203],["T_WHITESPACE","\n    ",209],["T_PUBLIC","public",210],["T_WHITESPACE"," ",210],["T_FUNCTION","function",210],["T_WHITESPACE"," ",210],["T_STRING","info",210],"(",["T_VARIABLE","$optionId",210],",",["T_WHITESPACE"," ",210],["T_VARIABLE","$store",210],["T_WHITESPACE"," ",210],"=",["T_WHITESPACE"," ",210],["T_STRING","null",210],")",["T_WHITESPACE","\n    ",210],"{",["T_WHITESPACE","\n        ",211],["T_DOC_COMMENT","\/** @var $option Mage_Catalog_Model_Product_Option *\/",212],["T_WHITESPACE","\n        ",212],["T_VARIABLE","$option",213],["T_WHITESPACE"," ",213],"=",["T_WHITESPACE"," ",213],["T_STRING","Mage",213],["T_DOUBLE_COLON","::",213],["T_STRING","getModel",213],"(",["T_CONSTANT_ENCAPSED_STRING","'catalog\/product_option'",213],")",["T_OBJECT_OPERATOR","->",213],["T_STRING","load",213],"(",["T_VARIABLE","$optionId",213],")",";",["T_WHITESPACE","\n        ",213],["T_IF","if",214],["T_WHITESPACE"," ",214],"(","!",["T_VARIABLE","$option",214],["T_OBJECT_OPERATOR","->",214],["T_STRING","getId",214],"(",")",")",["T_WHITESPACE"," ",214],"{",["T_WHITESPACE","\n            ",214],["T_VARIABLE","$this",215],["T_OBJECT_OPERATOR","->",215],["T_STRING","_fault",215],"(",["T_CONSTANT_ENCAPSED_STRING","'option_not_exists'",215],")",";",["T_WHITESPACE","\n        ",215],"}",["T_WHITESPACE","\n        ",216],["T_DOC_COMMENT","\/** @var $product Mage_Catalog_Model_Product *\/",217],["T_WHITESPACE","\n        ",217],["T_VARIABLE","$product",218],["T_WHITESPACE"," ",218],"=",["T_WHITESPACE"," ",218],["T_VARIABLE","$this",218],["T_OBJECT_OPERATOR","->",218],["T_STRING","_getProduct",218],"(",["T_VARIABLE","$option",218],["T_OBJECT_OPERATOR","->",218],["T_STRING","getProductId",218],"(",")",",",["T_WHITESPACE"," ",218],["T_VARIABLE","$store",218],",",["T_WHITESPACE"," ",218],["T_STRING","null",218],")",";",["T_WHITESPACE","\n        ",218],["T_VARIABLE","$option",219],["T_WHITESPACE"," ",219],"=",["T_WHITESPACE"," ",219],["T_VARIABLE","$product",219],["T_OBJECT_OPERATOR","->",219],["T_STRING","getOptionById",219],"(",["T_VARIABLE","$optionId",219],")",";",["T_WHITESPACE","\n        ",219],["T_VARIABLE","$result",220],["T_WHITESPACE"," ",220],"=",["T_WHITESPACE"," ",220],["T_ARRAY","array",220],"(",["T_WHITESPACE","\n            ",220],["T_CONSTANT_ENCAPSED_STRING","'title'",221],["T_WHITESPACE"," ",221],["T_DOUBLE_ARROW","=>",221],["T_WHITESPACE"," ",221],["T_VARIABLE","$option",221],["T_OBJECT_OPERATOR","->",221],["T_STRING","getTitle",221],"(",")",",",["T_WHITESPACE","\n            ",221],["T_CONSTANT_ENCAPSED_STRING","'type'",222],["T_WHITESPACE"," ",222],["T_DOUBLE_ARROW","=>",222],["T_WHITESPACE"," ",222],["T_VARIABLE","$option",222],["T_OBJECT_OPERATOR","->",222],["T_STRING","getType",222],"(",")",",",["T_WHITESPACE","\n            ",222],["T_CONSTANT_ENCAPSED_STRING","'is_require'",223],["T_WHITESPACE"," ",223],["T_DOUBLE_ARROW","=>",223],["T_WHITESPACE"," ",223],["T_VARIABLE","$option",223],["T_OBJECT_OPERATOR","->",223],["T_STRING","getIsRequire",223],"(",")",",",["T_WHITESPACE","\n            ",223],["T_CONSTANT_ENCAPSED_STRING","'sort_order'",224],["T_WHITESPACE"," ",224],["T_DOUBLE_ARROW","=>",224],["T_WHITESPACE"," ",224],["T_VARIABLE","$option",224],["T_OBJECT_OPERATOR","->",224],["T_STRING","getSortOrder",224],"(",")",",",["T_WHITESPACE","\n            ",224],["T_COMMENT","\/\/ additional_fields should be two-dimensional array for all option types\n",225],["T_WHITESPACE","            ",226],["T_CONSTANT_ENCAPSED_STRING","'additional_fields'",226],["T_WHITESPACE"," ",226],["T_DOUBLE_ARROW","=>",226],["T_WHITESPACE"," ",226],["T_ARRAY","array",226],"(",["T_WHITESPACE","\n                ",226],["T_ARRAY","array",227],"(",["T_WHITESPACE","\n                    ",227],["T_CONSTANT_ENCAPSED_STRING","'price'",228],["T_WHITESPACE"," ",228],["T_DOUBLE_ARROW","=>",228],["T_WHITESPACE"," ",228],["T_VARIABLE","$option",228],["T_OBJECT_OPERATOR","->",228],["T_STRING","getPrice",228],"(",")",",",["T_WHITESPACE","\n                    ",228],["T_CONSTANT_ENCAPSED_STRING","'price_type'",229],["T_WHITESPACE"," ",229],["T_DOUBLE_ARROW","=>",229],["T_WHITESPACE"," ",229],["T_VARIABLE","$option",229],["T_OBJECT_OPERATOR","->",229],["T_STRING","getPriceType",229],"(",")",",",["T_WHITESPACE","\n                    ",229],["T_CONSTANT_ENCAPSED_STRING","'sku'",230],["T_WHITESPACE"," ",230],["T_DOUBLE_ARROW","=>",230],["T_WHITESPACE"," ",230],["T_VARIABLE","$option",230],["T_OBJECT_OPERATOR","->",230],["T_STRING","getSku",230],"(",")",["T_WHITESPACE","\n                ",230],")",["T_WHITESPACE","\n            ",231],")",["T_WHITESPACE","\n        ",232],")",";",["T_WHITESPACE","\n        ",233],["T_COMMENT","\/\/ Set additional fields to each type group\n",234],["T_WHITESPACE","        ",235],["T_SWITCH","switch",235],["T_WHITESPACE"," ",235],"(",["T_VARIABLE","$option",235],["T_OBJECT_OPERATOR","->",235],["T_STRING","getGroupByType",235],"(",")",")",["T_WHITESPACE"," ",235],"{",["T_WHITESPACE","\n            ",235],["T_CASE","case",236],["T_WHITESPACE"," ",236],["T_STRING","Mage_Catalog_Model_Product_Option",236],["T_DOUBLE_COLON","::",236],["T_STRING","OPTION_GROUP_TEXT",236],":",["T_WHITESPACE","\n                ",236],["T_VARIABLE","$result",237],"[",["T_CONSTANT_ENCAPSED_STRING","'additional_fields'",237],"]","[",["T_LNUMBER","0",237],"]","[",["T_CONSTANT_ENCAPSED_STRING","'max_characters'",237],"]",["T_WHITESPACE"," ",237],"=",["T_WHITESPACE"," ",237],["T_VARIABLE","$option",237],["T_OBJECT_OPERATOR","->",237],["T_STRING","getMaxCharacters",237],"(",")",";",["T_WHITESPACE","\n                ",237],["T_BREAK","break",238],";",["T_WHITESPACE","\n            ",238],["T_CASE","case",239],["T_WHITESPACE"," ",239],["T_STRING","Mage_Catalog_Model_Product_Option",239],["T_DOUBLE_COLON","::",239],["T_STRING","OPTION_GROUP_FILE",239],":",["T_WHITESPACE","\n                ",239],["T_VARIABLE","$result",240],"[",["T_CONSTANT_ENCAPSED_STRING","'additional_fields'",240],"]","[",["T_LNUMBER","0",240],"]","[",["T_CONSTANT_ENCAPSED_STRING","'file_extension'",240],"]",["T_WHITESPACE"," ",240],"=",["T_WHITESPACE"," ",240],["T_VARIABLE","$option",240],["T_OBJECT_OPERATOR","->",240],["T_STRING","getFileExtension",240],"(",")",";",["T_WHITESPACE","\n                ",240],["T_VARIABLE","$result",241],"[",["T_CONSTANT_ENCAPSED_STRING","'additional_fields'",241],"]","[",["T_LNUMBER","0",241],"]","[",["T_CONSTANT_ENCAPSED_STRING","'image_size_x'",241],"]",["T_WHITESPACE"," ",241],"=",["T_WHITESPACE"," ",241],["T_VARIABLE","$option",241],["T_OBJECT_OPERATOR","->",241],["T_STRING","getImageSizeX",241],"(",")",";",["T_WHITESPACE","\n                ",241],["T_VARIABLE","$result",242],"[",["T_CONSTANT_ENCAPSED_STRING","'additional_fields'",242],"]","[",["T_LNUMBER","0",242],"]","[",["T_CONSTANT_ENCAPSED_STRING","'image_size_y'",242],"]",["T_WHITESPACE"," ",242],"=",["T_WHITESPACE"," ",242],["T_VARIABLE","$option",242],["T_OBJECT_OPERATOR","->",242],["T_STRING","getImageSizeY",242],"(",")",";",["T_WHITESPACE","\n                ",242],["T_BREAK","break",243],";",["T_WHITESPACE","\n            ",243],["T_CASE","case",244],["T_WHITESPACE"," ",244],["T_STRING","Mage_Catalog_Model_Product_Option",244],["T_DOUBLE_COLON","::",244],["T_STRING","OPTION_GROUP_SELECT",244],":",["T_WHITESPACE","\n                ",244],["T_VARIABLE","$result",245],"[",["T_CONSTANT_ENCAPSED_STRING","'additional_fields'",245],"]",["T_WHITESPACE"," ",245],"=",["T_WHITESPACE"," ",245],["T_ARRAY","array",245],"(",")",";",["T_WHITESPACE","\n                ",245],["T_FOREACH","foreach",246],["T_WHITESPACE"," ",246],"(",["T_VARIABLE","$option",246],["T_OBJECT_OPERATOR","->",246],["T_STRING","getValuesCollection",246],"(",")",["T_WHITESPACE"," ",246],["T_AS","as",246],["T_WHITESPACE"," ",246],["T_VARIABLE","$value",246],")",["T_WHITESPACE"," ",246],"{",["T_WHITESPACE","\n                    ",246],["T_VARIABLE","$result",247],"[",["T_CONSTANT_ENCAPSED_STRING","'additional_fields'",247],"]","[","]",["T_WHITESPACE"," ",247],"=",["T_WHITESPACE"," ",247],["T_ARRAY","array",247],"(",["T_WHITESPACE","\n                        ",247],["T_CONSTANT_ENCAPSED_STRING","'value_id'",248],["T_WHITESPACE"," ",248],["T_DOUBLE_ARROW","=>",248],["T_WHITESPACE"," ",248],["T_VARIABLE","$value",248],["T_OBJECT_OPERATOR","->",248],["T_STRING","getId",248],"(",")",",",["T_WHITESPACE","\n                        ",248],["T_CONSTANT_ENCAPSED_STRING","'title'",249],["T_WHITESPACE"," ",249],["T_DOUBLE_ARROW","=>",249],["T_WHITESPACE"," ",249],["T_VARIABLE","$value",249],["T_OBJECT_OPERATOR","->",249],["T_STRING","getTitle",249],"(",")",",",["T_WHITESPACE","\n                        ",249],["T_CONSTANT_ENCAPSED_STRING","'price'",250],["T_WHITESPACE"," ",250],["T_DOUBLE_ARROW","=>",250],["T_WHITESPACE"," ",250],["T_VARIABLE","$value",250],["T_OBJECT_OPERATOR","->",250],["T_STRING","getPrice",250],"(",")",",",["T_WHITESPACE","\n                        ",250],["T_CONSTANT_ENCAPSED_STRING","'price_type'",251],["T_WHITESPACE"," ",251],["T_DOUBLE_ARROW","=>",251],["T_WHITESPACE"," ",251],["T_VARIABLE","$value",251],["T_OBJECT_OPERATOR","->",251],["T_STRING","getPriceType",251],"(",")",",",["T_WHITESPACE","\n                        ",251],["T_CONSTANT_ENCAPSED_STRING","'sku'",252],["T_WHITESPACE"," ",252],["T_DOUBLE_ARROW","=>",252],["T_WHITESPACE"," ",252],["T_VARIABLE","$value",252],["T_OBJECT_OPERATOR","->",252],["T_STRING","getSku",252],"(",")",",",["T_WHITESPACE","\n                        ",252],["T_CONSTANT_ENCAPSED_STRING","'sort_order'",253],["T_WHITESPACE"," ",253],["T_DOUBLE_ARROW","=>",253],["T_WHITESPACE"," ",253],["T_VARIABLE","$value",253],["T_OBJECT_OPERATOR","->",253],["T_STRING","getSortOrder",253],"(",")",["T_WHITESPACE","\n                    ",253],")",";",["T_WHITESPACE","\n                ",254],"}",["T_WHITESPACE","\n                ",255],["T_BREAK","break",256],";",["T_WHITESPACE","\n            ",256],["T_DEFAULT","default",257],":",["T_WHITESPACE","\n                ",257],["T_BREAK","break",258],";",["T_WHITESPACE","\n        ",258],"}",["T_WHITESPACE","\n\n        ",259],["T_RETURN","return",261],["T_WHITESPACE"," ",261],["T_VARIABLE","$result",261],";",["T_WHITESPACE","\n    ",261],"}",["T_WHITESPACE","\n\n    ",262],["T_DOC_COMMENT","\/**\n     * Retrieve list of product custom options\n     *\n     * @param  string $productId\n     * @param  int|string|null $store\n     * @return array\n     *\/",264],["T_WHITESPACE","\n    ",270],["T_PUBLIC","public",271],["T_WHITESPACE"," ",271],["T_FUNCTION","function",271],["T_WHITESPACE"," ",271],["T_STRING","items",271],"(",["T_VARIABLE","$productId",271],",",["T_WHITESPACE"," ",271],["T_VARIABLE","$store",271],["T_WHITESPACE"," ",271],"=",["T_WHITESPACE"," ",271],["T_STRING","null",271],")",["T_WHITESPACE","\n    ",271],"{",["T_WHITESPACE","\n        ",272],["T_VARIABLE","$result",273],["T_WHITESPACE"," ",273],"=",["T_WHITESPACE"," ",273],["T_ARRAY","array",273],"(",")",";",["T_WHITESPACE","\n        ",273],["T_VARIABLE","$product",274],["T_WHITESPACE"," ",274],"=",["T_WHITESPACE"," ",274],["T_VARIABLE","$this",274],["T_OBJECT_OPERATOR","->",274],["T_STRING","_getProduct",274],"(",["T_VARIABLE","$productId",274],",",["T_WHITESPACE"," ",274],["T_VARIABLE","$store",274],",",["T_WHITESPACE"," ",274],["T_STRING","null",274],")",";",["T_WHITESPACE","\n        ",274],["T_DOC_COMMENT","\/** @var $option Mage_Catalog_Model_Product_Option *\/",275],["T_WHITESPACE","\n        ",275],["T_FOREACH","foreach",276],["T_WHITESPACE"," ",276],"(",["T_VARIABLE","$product",276],["T_OBJECT_OPERATOR","->",276],["T_STRING","getProductOptionsCollection",276],"(",")",["T_WHITESPACE"," ",276],["T_AS","as",276],["T_WHITESPACE"," ",276],["T_VARIABLE","$option",276],")",["T_WHITESPACE"," ",276],"{",["T_WHITESPACE","\n            ",276],["T_VARIABLE","$result",277],"[","]",["T_WHITESPACE"," ",277],"=",["T_WHITESPACE"," ",277],["T_ARRAY","array",277],"(",["T_WHITESPACE","\n                ",277],["T_CONSTANT_ENCAPSED_STRING","'option_id'",278],["T_WHITESPACE"," ",278],["T_DOUBLE_ARROW","=>",278],["T_WHITESPACE"," ",278],["T_VARIABLE","$option",278],["T_OBJECT_OPERATOR","->",278],["T_STRING","getId",278],"(",")",",",["T_WHITESPACE","\n                ",278],["T_CONSTANT_ENCAPSED_STRING","'title'",279],["T_WHITESPACE"," ",279],["T_DOUBLE_ARROW","=>",279],["T_WHITESPACE"," ",279],["T_VARIABLE","$option",279],["T_OBJECT_OPERATOR","->",279],["T_STRING","getTitle",279],"(",")",",",["T_WHITESPACE","\n                ",279],["T_CONSTANT_ENCAPSED_STRING","'type'",280],["T_WHITESPACE"," ",280],["T_DOUBLE_ARROW","=>",280],["T_WHITESPACE"," ",280],["T_VARIABLE","$option",280],["T_OBJECT_OPERATOR","->",280],["T_STRING","getType",280],"(",")",",",["T_WHITESPACE","\n                ",280],["T_CONSTANT_ENCAPSED_STRING","'is_require'",281],["T_WHITESPACE"," ",281],["T_DOUBLE_ARROW","=>",281],["T_WHITESPACE"," ",281],["T_VARIABLE","$option",281],["T_OBJECT_OPERATOR","->",281],["T_STRING","getIsRequire",281],"(",")",",",["T_WHITESPACE","\n                ",281],["T_CONSTANT_ENCAPSED_STRING","'sort_order'",282],["T_WHITESPACE"," ",282],["T_DOUBLE_ARROW","=>",282],["T_WHITESPACE"," ",282],["T_VARIABLE","$option",282],["T_OBJECT_OPERATOR","->",282],["T_STRING","getSortOrder",282],"(",")",["T_WHITESPACE","\n            ",282],")",";",["T_WHITESPACE","\n        ",283],"}",["T_WHITESPACE","\n        ",284],["T_RETURN","return",285],["T_WHITESPACE"," ",285],["T_VARIABLE","$result",285],";",["T_WHITESPACE","\n    ",285],"}",["T_WHITESPACE","\n\n    ",286],["T_DOC_COMMENT","\/**\n     * Remove product custom option\n     *\n     * @param string $optionId\n     * @return boolean\n     *\/",288],["T_WHITESPACE","\n    ",293],["T_PUBLIC","public",294],["T_WHITESPACE"," ",294],["T_FUNCTION","function",294],["T_WHITESPACE"," ",294],["T_STRING","remove",294],"(",["T_VARIABLE","$optionId",294],")",["T_WHITESPACE","\n    ",294],"{",["T_WHITESPACE","\n        ",295],["T_DOC_COMMENT","\/** @var $option Mage_Catalog_Model_Product_Option *\/",296],["T_WHITESPACE","\n        ",296],["T_VARIABLE","$option",297],["T_WHITESPACE"," ",297],"=",["T_WHITESPACE"," ",297],["T_STRING","Mage",297],["T_DOUBLE_COLON","::",297],["T_STRING","getModel",297],"(",["T_CONSTANT_ENCAPSED_STRING","'catalog\/product_option'",297],")",["T_OBJECT_OPERATOR","->",297],["T_STRING","load",297],"(",["T_VARIABLE","$optionId",297],")",";",["T_WHITESPACE","\n        ",297],["T_IF","if",298],["T_WHITESPACE"," ",298],"(","!",["T_VARIABLE","$option",298],["T_OBJECT_OPERATOR","->",298],["T_STRING","getId",298],"(",")",")",["T_WHITESPACE"," ",298],"{",["T_WHITESPACE","\n            ",298],["T_VARIABLE","$this",299],["T_OBJECT_OPERATOR","->",299],["T_STRING","_fault",299],"(",["T_CONSTANT_ENCAPSED_STRING","'option_not_exists'",299],")",";",["T_WHITESPACE","\n        ",299],"}",["T_WHITESPACE","\n        ",300],["T_TRY","try",301],["T_WHITESPACE"," ",301],"{",["T_WHITESPACE","\n            ",301],["T_VARIABLE","$option",302],["T_OBJECT_OPERATOR","->",302],["T_STRING","getValueInstance",302],"(",")",["T_OBJECT_OPERATOR","->",302],["T_STRING","deleteValue",302],"(",["T_VARIABLE","$optionId",302],")",";",["T_WHITESPACE","\n            ",302],["T_VARIABLE","$option",303],["T_OBJECT_OPERATOR","->",303],["T_STRING","deletePrices",303],"(",["T_VARIABLE","$optionId",303],")",";",["T_WHITESPACE","\n            ",303],["T_VARIABLE","$option",304],["T_OBJECT_OPERATOR","->",304],["T_STRING","deleteTitles",304],"(",["T_VARIABLE","$optionId",304],")",";",["T_WHITESPACE","\n            ",304],["T_VARIABLE","$option",305],["T_OBJECT_OPERATOR","->",305],["T_STRING","delete",305],"(",")",";",["T_WHITESPACE","\n        ",305],"}",["T_WHITESPACE"," ",306],["T_CATCH","catch",306],["T_WHITESPACE"," ",306],"(",["T_STRING","Exception",306],["T_WHITESPACE"," ",306],["T_VARIABLE","$e",306],")","{",["T_WHITESPACE","\n            ",306],["T_VARIABLE","$this",307],["T_OBJECT_OPERATOR","->",307],["T_STRING","fault",307],"(",["T_CONSTANT_ENCAPSED_STRING","'delete_option_error'",307],")",";",["T_WHITESPACE","\n        ",307],"}",["T_WHITESPACE","\n        ",308],["T_RETURN","return",309],["T_WHITESPACE"," ",309],["T_STRING","true",309],";",["T_WHITESPACE","\n    ",309],"}",["T_WHITESPACE","\n\n    ",310],["T_DOC_COMMENT","\/**\n     * Check is type in allowed set\n     *\n     * @param string $type\n     * @return bool\n     *\/",312],["T_WHITESPACE","\n    ",317],["T_PROTECTED","protected",318],["T_WHITESPACE"," ",318],["T_FUNCTION","function",318],["T_WHITESPACE"," ",318],["T_STRING","_isTypeAllowed",318],"(",["T_VARIABLE","$type",318],")",["T_WHITESPACE","\n    ",318],"{",["T_WHITESPACE","\n        ",319],["T_VARIABLE","$allowedTypes",320],["T_WHITESPACE"," ",320],"=",["T_WHITESPACE"," ",320],["T_ARRAY","array",320],"(",")",";",["T_WHITESPACE","\n        ",320],["T_FOREACH","foreach",321],"(",["T_VARIABLE","$this",321],["T_OBJECT_OPERATOR","->",321],["T_STRING","types",321],"(",")",["T_WHITESPACE"," ",321],["T_AS","as",321],["T_WHITESPACE"," ",321],["T_VARIABLE","$optionType",321],")","{",["T_WHITESPACE","\n            ",321],["T_VARIABLE","$allowedTypes",322],"[","]",["T_WHITESPACE"," ",322],"=",["T_WHITESPACE"," ",322],["T_VARIABLE","$optionType",322],"[",["T_CONSTANT_ENCAPSED_STRING","'value'",322],"]",";",["T_WHITESPACE","\n        ",322],"}",["T_WHITESPACE","\n\n        ",323],["T_IF","if",325],["T_WHITESPACE"," ",325],"(","!",["T_STRING","in_array",325],"(",["T_VARIABLE","$type",325],",",["T_WHITESPACE"," ",325],["T_VARIABLE","$allowedTypes",325],")",")",["T_WHITESPACE"," ",325],"{",["T_WHITESPACE","\n            ",325],["T_RETURN","return",326],["T_WHITESPACE"," ",326],["T_STRING","false",326],";",["T_WHITESPACE","\n        ",326],"}",["T_WHITESPACE","\n        ",327],["T_RETURN","return",328],["T_WHITESPACE"," ",328],["T_STRING","true",328],";",["T_WHITESPACE","\n    ",328],"}",["T_WHITESPACE","\n\n",329],"}",["T_WHITESPACE","\n",331]]
[["T_OPEN_TAG","<?php\n",1],["T_DOC_COMMENT","\/**\n * Magento\n *\n * NOTICE OF LICENSE\n *\n * This source file is subject to the Open Software License (OSL 3.0)\n * that is bundled with this package in the file LICENSE.txt.\n * It is also available through the world-wide-web at this URL:\n * http:\/\/opensource.org\/licenses\/osl-3.0.php\n * If you did not receive a copy of the license and are unable to\n * obtain it through the world-wide-web, please send an email\n * to license@magento.com so we can send you a copy immediately.\n *\n * DISCLAIMER\n *\n * Do not edit or add to this file if you wish to upgrade Magento to newer\n * versions in the future. If you wish to customize Magento for your\n * needs please refer to http:\/\/www.magento.com for more information.\n *\n * @category    Mage\n * @package     Mage_Catalog\n * @copyright  Copyright (c) 2006-2016 X.commerce, Inc. and affiliates (http:\/\/www.magento.com)\n * @license    http:\/\/opensource.org\/licenses\/osl-3.0.php  Open Software License (OSL 3.0)\n *\/",2],["T_WHITESPACE","\n\n\n",25],["T_DOC_COMMENT","\/**\n * Category resource collection\n *\n * @category    Mage\n * @package     Mage_Catalog\n * @author      Magento Core Team <core@magentocommerce.com>\n *\/",28],["T_WHITESPACE","\n",34],["T_CLASS","class",35],["T_WHITESPACE"," ",35],["T_STRING","Mage_Catalog_Model_Resource_Category_Collection",35],["T_WHITESPACE"," ",35],["T_EXTENDS","extends",35],["T_WHITESPACE"," ",35],["T_STRING","Mage_Catalog_Model_Resource_Collection_Abstract",35],["T_WHITESPACE","\n",35],"{",["T_WHITESPACE","\n    ",36],["T_DOC_COMMENT","\/**\n     * Event prefix\n     *\n     * @var string\n     *\/",37],["T_WHITESPACE","\n    ",41],["T_PROTECTED","protected",42],["T_WHITESPACE"," ",42],["T_VARIABLE","$_eventPrefix",42],["T_WHITESPACE","              ",42],"=",["T_WHITESPACE"," ",42],["T_CONSTANT_ENCAPSED_STRING","'catalog_category_collection'",42],";",["T_WHITESPACE","\n\n    ",42],["T_DOC_COMMENT","\/**\n     * Event object name\n     *\n     * @var string\n     *\/",44],["T_WHITESPACE","\n    ",48],["T_PROTECTED","protected",49],["T_WHITESPACE"," ",49],["T_VARIABLE","$_eventObject",49],["T_WHITESPACE","              ",49],"=",["T_WHITESPACE"," ",49],["T_CONSTANT_ENCAPSED_STRING","'category_collection'",49],";",["T_WHITESPACE","\n\n    ",49],["T_DOC_COMMENT","\/**\n     * Name of product table\n     *\n     * @var string\n     *\/",51],["T_WHITESPACE","\n    ",55],["T_PROTECTED","protected",56],["T_WHITESPACE"," ",56],["T_VARIABLE","$_productTable",56],";",["T_WHITESPACE","\n\n    ",56],["T_DOC_COMMENT","\/**\n     * Store id, that we should count products on\n     *\n     * @var int\n     *\/",58],["T_WHITESPACE","\n    ",62],["T_PROTECTED","protected",63],["T_WHITESPACE"," ",63],["T_VARIABLE","$_productStoreId",63],";",["T_WHITESPACE","\n\n    ",63],["T_DOC_COMMENT","\/**\n     * Name of product website table\n     *\n     * @var string\n     *\/",65],["T_WHITESPACE","\n    ",69],["T_PROTECTED","protected",70],["T_WHITESPACE"," ",70],["T_VARIABLE","$_productWebsiteTable",70],";",["T_WHITESPACE","\n\n    ",70],["T_DOC_COMMENT","\/**\n     * Load with product count flag\n     *\n     * @var boolean\n     *\/",72],["T_WHITESPACE","\n    ",76],["T_PROTECTED","protected",77],["T_WHITESPACE"," ",77],["T_VARIABLE","$_loadWithProductCount",77],["T_WHITESPACE","     ",77],"=",["T_WHITESPACE"," ",77],["T_STRING","false",77],";",["T_WHITESPACE","\n\n    ",77],["T_DOC_COMMENT","\/**\n     * Catalog factory instance\n     *\n     * @var Mage_Catalog_Model_Factory\n     *\/",79],["T_WHITESPACE","\n    ",83],["T_PROTECTED","protected",84],["T_WHITESPACE"," ",84],["T_VARIABLE","$_factory",84],";",["T_WHITESPACE","\n\n    ",84],["T_DOC_COMMENT","\/**\n     * Disable flat flag\n     *\n     * @var bool\n     *\/",86],["T_WHITESPACE","\n    ",90],["T_PROTECTED","protected",91],["T_WHITESPACE"," ",91],["T_VARIABLE","$_disableFlat",91],["T_WHITESPACE"," ",91],"=",["T_WHITESPACE"," ",91],["T_STRING","false",91],";",["T_WHITESPACE","\n\n    ",91],["T_DOC_COMMENT","\/**\n     * Initialize factory\n     *\n     * @param Mage_Core_Model_Resource_Abstract $resource\n     * @param array $args\n     *\/",93],["T_WHITESPACE","\n    ",98],["T_PUBLIC","public",99],["T_WHITESPACE"," ",99],["T_FUNCTION","function",99],["T_WHITESPACE"," ",99],["T_STRING","__construct",99],"(",["T_VARIABLE","$resource",99],["T_WHITESPACE"," ",99],"=",["T_WHITESPACE"," ",99],["T_STRING","null",99],",",["T_WHITESPACE"," ",99],["T_ARRAY","array",99],["T_WHITESPACE"," ",99],["T_VARIABLE","$args",99],["T_WHITESPACE"," ",99],"=",["T_WHITESPACE"," ",99],["T_ARRAY","array",99],"(",")",")",["T_WHITESPACE","\n    ",99],"{",["T_WHITESPACE","\n        ",100],["T_STRING","parent",101],["T_DOUBLE_COLON","::",101],["T_STRING","__construct",101],"(",["T_VARIABLE","$resource",101],")",";",["T_WHITESPACE","\n        ",101],["T_VARIABLE","$this",102],["T_OBJECT_OPERATOR","->",102],["T_STRING","_factory",102],["T_WHITESPACE"," ",102],"=",["T_WHITESPACE"," ",102],"!",["T_EMPTY","empty",102],"(",["T_VARIABLE","$args",102],"[",["T_CONSTANT_ENCAPSED_STRING","'factory'",102],"]",")",["T_WHITESPACE"," ",102],"?",["T_WHITESPACE"," ",102],["T_VARIABLE","$args",102],"[",["T_CONSTANT_ENCAPSED_STRING","'factory'",102],"]",["T_WHITESPACE"," ",102],":",["T_WHITESPACE"," ",102],["T_STRING","Mage",102],["T_DOUBLE_COLON","::",102],["T_STRING","getSingleton",102],"(",["T_CONSTANT_ENCAPSED_STRING","'catalog\/factory'",102],")",";",["T_WHITESPACE","\n    ",102],"}",["T_WHITESPACE","\n\n    ",103],["T_DOC_COMMENT","\/**\n     * Init collection and determine table names\n     *\n     *\/",105],["T_WHITESPACE","\n    ",108],["T_PROTECTED","protected",109],["T_WHITESPACE"," ",109],["T_FUNCTION","function",109],["T_WHITESPACE"," ",109],["T_STRING","_construct",109],"(",")",["T_WHITESPACE","\n    ",109],"{",["T_WHITESPACE","\n        ",110],["T_VARIABLE","$this",111],["T_OBJECT_OPERATOR","->",111],["T_STRING","_init",111],"(",["T_CONSTANT_ENCAPSED_STRING","'catalog\/category'",111],")",";",["T_WHITESPACE","\n\n        ",111],["T_VARIABLE","$this",113],["T_OBJECT_OPERATOR","->",113],["T_STRING","_productWebsiteTable",113],["T_WHITESPACE"," ",113],"=",["T_WHITESPACE"," ",113],["T_VARIABLE","$this",113],["T_OBJECT_OPERATOR","->",113],["T_STRING","getTable",113],"(",["T_CONSTANT_ENCAPSED_STRING","'catalog\/product_website'",113],")",";",["T_WHITESPACE","\n        ",113],["T_VARIABLE","$this",114],["T_OBJECT_OPERATOR","->",114],["T_STRING","_productTable",114],["T_WHITESPACE","        ",114],"=",["T_WHITESPACE"," ",114],["T_VARIABLE","$this",114],["T_OBJECT_OPERATOR","->",114],["T_STRING","getTable",114],"(",["T_CONSTANT_ENCAPSED_STRING","'catalog\/category_product'",114],")",";",["T_WHITESPACE","\n    ",114],"}",["T_WHITESPACE","\n\n    ",115],["T_DOC_COMMENT","\/**\n     * Add Id filter\n     *\n     * @param array $categoryIds\n     * @return Mage_Catalog_Model_Resource_Category_Collection\n     *\/",117],["T_WHITESPACE","\n    ",122],["T_PUBLIC","public",123],["T_WHITESPACE"," ",123],["T_FUNCTION","function",123],["T_WHITESPACE"," ",123],["T_STRING","addIdFilter",123],"(",["T_VARIABLE","$categoryIds",123],")",["T_WHITESPACE","\n    ",123],"{",["T_WHITESPACE","\n        ",124],["T_IF","if",125],["T_WHITESPACE"," ",125],"(",["T_STRING","is_array",125],"(",["T_VARIABLE","$categoryIds",125],")",")",["T_WHITESPACE"," ",125],"{",["T_WHITESPACE","\n            ",125],["T_IF","if",126],["T_WHITESPACE"," ",126],"(",["T_EMPTY","empty",126],"(",["T_VARIABLE","$categoryIds",126],")",")",["T_WHITESPACE"," ",126],"{",["T_WHITESPACE","\n                ",126],["T_VARIABLE","$condition",127],["T_WHITESPACE"," ",127],"=",["T_WHITESPACE"," ",127],["T_CONSTANT_ENCAPSED_STRING","''",127],";",["T_WHITESPACE","\n            ",127],"}",["T_WHITESPACE"," ",128],["T_ELSE","else",128],["T_WHITESPACE"," ",128],"{",["T_WHITESPACE","\n                ",128],["T_VARIABLE","$condition",129],["T_WHITESPACE"," ",129],"=",["T_WHITESPACE"," ",129],["T_ARRAY","array",129],"(",["T_CONSTANT_ENCAPSED_STRING","'in'",129],["T_WHITESPACE"," ",129],["T_DOUBLE_ARROW","=>",129],["T_WHITESPACE"," ",129],["T_VARIABLE","$categoryIds",129],")",";",["T_WHITESPACE","\n            ",129],"}",["T_WHITESPACE","\n        ",130],"}",["T_WHITESPACE"," ",131],["T_ELSEIF","elseif",131],["T_WHITESPACE"," ",131],"(",["T_STRING","is_numeric",131],"(",["T_VARIABLE","$categoryIds",131],")",")",["T_WHITESPACE"," ",131],"{",["T_WHITESPACE","\n            ",131],["T_VARIABLE","$condition",132],["T_WHITESPACE"," ",132],"=",["T_WHITESPACE"," ",132],["T_VARIABLE","$categoryIds",132],";",["T_WHITESPACE","\n        ",132],"}",["T_WHITESPACE"," ",133],["T_ELSEIF","elseif",133],["T_WHITESPACE"," ",133],"(",["T_STRING","is_string",133],"(",["T_VARIABLE","$categoryIds",133],")",")",["T_WHITESPACE"," ",133],"{",["T_WHITESPACE","\n            ",133],["T_VARIABLE","$ids",134],["T_WHITESPACE"," ",134],"=",["T_WHITESPACE"," ",134],["T_STRING","explode",134],"(",["T_CONSTANT_ENCAPSED_STRING","','",134],",",["T_WHITESPACE"," ",134],["T_VARIABLE","$categoryIds",134],")",";",["T_WHITESPACE","\n            ",134],["T_IF","if",135],["T_WHITESPACE"," ",135],"(",["T_EMPTY","empty",135],"(",["T_VARIABLE","$ids",135],")",")",["T_WHITESPACE"," ",135],"{",["T_WHITESPACE","\n                ",135],["T_VARIABLE","$condition",136],["T_WHITESPACE"," ",136],"=",["T_WHITESPACE"," ",136],["T_VARIABLE","$categoryIds",136],";",["T_WHITESPACE","\n            ",136],"}",["T_WHITESPACE"," ",137],["T_ELSE","else",137],["T_WHITESPACE"," ",137],"{",["T_WHITESPACE","\n                ",137],["T_VARIABLE","$condition",138],["T_WHITESPACE"," ",138],"=",["T_WHITESPACE"," ",138],["T_ARRAY","array",138],"(",["T_CONSTANT_ENCAPSED_STRING","'in'",138],["T_WHITESPACE"," ",138],["T_DOUBLE_ARROW","=>",138],["T_WHITESPACE"," ",138],["T_VARIABLE","$ids",138],")",";",["T_WHITESPACE","\n            ",138],"}",["T_WHITESPACE","\n        ",139],"}",["T_WHITESPACE","\n        ",140],["T_VARIABLE","$this",141],["T_OBJECT_OPERATOR","->",141],["T_STRING","addFieldToFilter",141],"(",["T_CONSTANT_ENCAPSED_STRING","'entity_id'",141],",",["T_WHITESPACE"," ",141],["T_VARIABLE","$condition",141],")",";",["T_WHITESPACE","\n        ",141],["T_RETURN","return",142],["T_WHITESPACE"," ",142],["T_VARIABLE","$this",142],";",["T_WHITESPACE","\n    ",142],"}",["T_WHITESPACE","\n\n    ",143],["T_DOC_COMMENT","\/**\n     * Set flag for loading product count\n     *\n     * @param boolean $flag\n     * @return Mage_Catalog_Model_Resource_Category_Collection\n     *\/",145],["T_WHITESPACE","\n    ",150],["T_PUBLIC","public",151],["T_WHITESPACE"," ",151],["T_FUNCTION","function",151],["T_WHITESPACE"," ",151],["T_STRING","setLoadProductCount",151],"(",["T_VARIABLE","$flag",151],")",["T_WHITESPACE","\n    ",151],"{",["T_WHITESPACE","\n        ",152],["T_VARIABLE","$this",153],["T_OBJECT_OPERATOR","->",153],["T_STRING","_loadWithProductCount",153],["T_WHITESPACE"," ",153],"=",["T_WHITESPACE"," ",153],["T_VARIABLE","$flag",153],";",["T_WHITESPACE","\n        ",153],["T_RETURN","return",154],["T_WHITESPACE"," ",154],["T_VARIABLE","$this",154],";",["T_WHITESPACE","\n    ",154],"}",["T_WHITESPACE","\n\n    ",155],["T_DOC_COMMENT","\/**\n     * Before collection load\n     *\n     * @return Mage_Catalog_Model_Resource_Category_Collection\n     *\/",157],["T_WHITESPACE","\n    ",161],["T_PROTECTED","protected",162],["T_WHITESPACE"," ",162],["T_FUNCTION","function",162],["T_WHITESPACE"," ",162],["T_STRING","_beforeLoad",162],"(",")",["T_WHITESPACE","\n    ",162],"{",["T_WHITESPACE","\n        ",163],["T_STRING","Mage",164],["T_DOUBLE_COLON","::",164],["T_STRING","dispatchEvent",164],"(",["T_VARIABLE","$this",164],["T_OBJECT_OPERATOR","->",164],["T_STRING","_eventPrefix",164],["T_WHITESPACE"," ",164],".",["T_WHITESPACE"," ",164],["T_CONSTANT_ENCAPSED_STRING","'_load_before'",164],",",["T_WHITESPACE","\n                            ",164],["T_ARRAY","array",165],"(",["T_VARIABLE","$this",165],["T_OBJECT_OPERATOR","->",165],["T_STRING","_eventObject",165],["T_WHITESPACE"," ",165],["T_DOUBLE_ARROW","=>",165],["T_WHITESPACE"," ",165],["T_VARIABLE","$this",165],")",")",";",["T_WHITESPACE","\n        ",165],["T_RETURN","return",166],["T_WHITESPACE"," ",166],["T_STRING","parent",166],["T_DOUBLE_COLON","::",166],["T_STRING","_beforeLoad",166],"(",")",";",["T_WHITESPACE","\n    ",166],"}",["T_WHITESPACE","\n\n    ",167],["T_DOC_COMMENT","\/**\n     * After collection load\n     *\n     * @return Mage_Catalog_Model_Resource_Category_Collection\n     *\/",169],["T_WHITESPACE","\n    ",173],["T_PROTECTED","protected",174],["T_WHITESPACE"," ",174],["T_FUNCTION","function",174],["T_WHITESPACE"," ",174],["T_STRING","_afterLoad",174],"(",")",["T_WHITESPACE","\n    ",174],"{",["T_WHITESPACE","\n        ",175],["T_STRING","Mage",176],["T_DOUBLE_COLON","::",176],["T_STRING","dispatchEvent",176],"(",["T_VARIABLE","$this",176],["T_OBJECT_OPERATOR","->",176],["T_STRING","_eventPrefix",176],["T_WHITESPACE"," ",176],".",["T_WHITESPACE"," ",176],["T_CONSTANT_ENCAPSED_STRING","'_load_after'",176],",",["T_WHITESPACE","\n                            ",176],["T_ARRAY","array",177],"(",["T_VARIABLE","$this",177],["T_OBJECT_OPERATOR","->",177],["T_STRING","_eventObject",177],["T_WHITESPACE"," ",177],["T_DOUBLE_ARROW","=>",177],["T_WHITESPACE"," ",177],["T_VARIABLE","$this",177],")",")",";",["T_WHITESPACE","\n\n        ",177],["T_RETURN","return",179],["T_WHITESPACE"," ",179],["T_STRING","parent",179],["T_DOUBLE_COLON","::",179],["T_STRING","_afterLoad",179],"(",")",";",["T_WHITESPACE","\n    ",179],"}",["T_WHITESPACE","\n\n    ",180],["T_DOC_COMMENT","\/**\n     * Set id of the store that we should count products on\n     *\n     * @param int $storeId\n     * @return Mage_Catalog_Model_Resource_Category_Collection\n     *\/",182],["T_WHITESPACE","\n    ",187],["T_PUBLIC","public",188],["T_WHITESPACE"," ",188],["T_FUNCTION","function",188],["T_WHITESPACE"," ",188],["T_STRING","setProductStoreId",188],"(",["T_VARIABLE","$storeId",188],")",["T_WHITESPACE","\n    ",188],"{",["T_WHITESPACE","\n        ",189],["T_VARIABLE","$this",190],["T_OBJECT_OPERATOR","->",190],["T_STRING","_productStoreId",190],["T_WHITESPACE"," ",190],"=",["T_WHITESPACE"," ",190],["T_VARIABLE","$storeId",190],";",["T_WHITESPACE","\n        ",190],["T_RETURN","return",191],["T_WHITESPACE"," ",191],["T_VARIABLE","$this",191],";",["T_WHITESPACE","\n    ",191],"}",["T_WHITESPACE","\n\n    ",192],["T_DOC_COMMENT","\/**\n     * Get id of the store that we should count products on\n     *\n     * @return int\n     *\/",194],["T_WHITESPACE","\n    ",198],["T_PUBLIC","public",199],["T_WHITESPACE"," ",199],["T_FUNCTION","function",199],["T_WHITESPACE"," ",199],["T_STRING","getProductStoreId",199],"(",")",["T_WHITESPACE","\n    ",199],"{",["T_WHITESPACE","\n        ",200],["T_IF","if",201],["T_WHITESPACE"," ",201],"(",["T_STRING","is_null",201],"(",["T_VARIABLE","$this",201],["T_OBJECT_OPERATOR","->",201],["T_STRING","_productStoreId",201],")",")",["T_WHITESPACE"," ",201],"{",["T_WHITESPACE","\n            ",201],["T_VARIABLE","$this",202],["T_OBJECT_OPERATOR","->",202],["T_STRING","_productStoreId",202],["T_WHITESPACE"," ",202],"=",["T_WHITESPACE"," ",202],["T_STRING","Mage_Catalog_Model_Abstract",202],["T_DOUBLE_COLON","::",202],["T_STRING","DEFAULT_STORE_ID",202],";",["T_WHITESPACE","\n        ",202],"}",["T_WHITESPACE","\n        ",203],["T_RETURN","return",204],["T_WHITESPACE"," ",204],["T_VARIABLE","$this",204],["T_OBJECT_OPERATOR","->",204],["T_STRING","_productStoreId",204],";",["T_WHITESPACE","\n    ",204],"}",["T_WHITESPACE","\n\n    ",205],["T_DOC_COMMENT","\/**\n     * Load collection\n     *\n     * @param bool $printQuery\n     * @param bool $logQuery\n     * @return Mage_Catalog_Model_Resource_Category_Collection\n     *\/",207],["T_WHITESPACE","\n    ",213],["T_PUBLIC","public",214],["T_WHITESPACE"," ",214],["T_FUNCTION","function",214],["T_WHITESPACE"," ",214],["T_STRING","load",214],"(",["T_VARIABLE","$printQuery",214],["T_WHITESPACE"," ",214],"=",["T_WHITESPACE"," ",214],["T_STRING","false",214],",",["T_WHITESPACE"," ",214],["T_VARIABLE","$logQuery",214],["T_WHITESPACE"," ",214],"=",["T_WHITESPACE"," ",214],["T_STRING","false",214],")",["T_WHITESPACE","\n    ",214],"{",["T_WHITESPACE","\n        ",215],["T_IF","if",216],["T_WHITESPACE"," ",216],"(",["T_VARIABLE","$this",216],["T_OBJECT_OPERATOR","->",216],["T_STRING","isLoaded",216],"(",")",")",["T_WHITESPACE"," ",216],"{",["T_WHITESPACE","\n            ",216],["T_RETURN","return",217],["T_WHITESPACE"," ",217],["T_VARIABLE","$this",217],";",["T_WHITESPACE","\n        ",217],"}",["T_WHITESPACE","\n\n        ",218],["T_IF","if",220],["T_WHITESPACE"," ",220],"(",["T_VARIABLE","$this",220],["T_OBJECT_OPERATOR","->",220],["T_STRING","_loadWithProductCount",220],")",["T_WHITESPACE"," ",220],"{",["T_WHITESPACE","\n            ",220],["T_VARIABLE","$this",221],["T_OBJECT_OPERATOR","->",221],["T_STRING","addAttributeToSelect",221],"(",["T_CONSTANT_ENCAPSED_STRING","'all_children'",221],")",";",["T_WHITESPACE","\n            ",221],["T_VARIABLE","$this",222],["T_OBJECT_OPERATOR","->",222],["T_STRING","addAttributeToSelect",222],"(",["T_CONSTANT_ENCAPSED_STRING","'is_anchor'",222],")",";",["T_WHITESPACE","\n        ",222],"}",["T_WHITESPACE","\n\n        ",223],["T_STRING","parent",225],["T_DOUBLE_COLON","::",225],["T_STRING","load",225],"(",["T_VARIABLE","$printQuery",225],",",["T_WHITESPACE"," ",225],["T_VARIABLE","$logQuery",225],")",";",["T_WHITESPACE","\n\n        ",225],["T_IF","if",227],["T_WHITESPACE"," ",227],"(",["T_VARIABLE","$this",227],["T_OBJECT_OPERATOR","->",227],["T_STRING","_loadWithProductCount",227],")",["T_WHITESPACE"," ",227],"{",["T_WHITESPACE","\n            ",227],["T_VARIABLE","$this",228],["T_OBJECT_OPERATOR","->",228],["T_STRING","_loadProductCount",228],"(",")",";",["T_WHITESPACE","\n        ",228],"}",["T_WHITESPACE","\n\n        ",229],["T_RETURN","return",231],["T_WHITESPACE"," ",231],["T_VARIABLE","$this",231],";",["T_WHITESPACE","\n    ",231],"}",["T_WHITESPACE","\n\n    ",232],["T_DOC_COMMENT","\/**\n     * Load categories product count\n     *\n     *\/",234],["T_WHITESPACE","\n    ",237],["T_PROTECTED","protected",238],["T_WHITESPACE"," ",238],["T_FUNCTION","function",238],["T_WHITESPACE"," ",238],["T_STRING","_loadProductCount",238],"(",")",["T_WHITESPACE","\n    ",238],"{",["T_WHITESPACE","\n        ",239],["T_VARIABLE","$this",240],["T_OBJECT_OPERATOR","->",240],["T_STRING","loadProductCount",240],"(",["T_VARIABLE","$this",240],["T_OBJECT_OPERATOR","->",240],["T_STRING","_items",240],",",["T_WHITESPACE"," ",240],["T_STRING","true",240],",",["T_WHITESPACE"," ",240],["T_STRING","true",240],")",";",["T_WHITESPACE","\n    ",240],"}",["T_WHITESPACE","\n\n    ",241],["T_DOC_COMMENT","\/**\n     * Load product count for specified items\n     *\n     * @param array $items\n     * @param boolean $countRegular get product count for regular (non-anchor) categories\n     * @param boolean $countAnchor get product count for anchor categories\n     * @return Mage_Catalog_Model_Resource_Category_Collection\n     *\/",243],["T_WHITESPACE","\n    ",250],["T_PUBLIC","public",251],["T_WHITESPACE"," ",251],["T_FUNCTION","function",251],["T_WHITESPACE"," ",251],["T_STRING","loadProductCount",251],"(",["T_VARIABLE","$items",251],",",["T_WHITESPACE"," ",251],["T_VARIABLE","$countRegular",251],["T_WHITESPACE"," ",251],"=",["T_WHITESPACE"," ",251],["T_STRING","true",251],",",["T_WHITESPACE"," ",251],["T_VARIABLE","$countAnchor",251],["T_WHITESPACE"," ",251],"=",["T_WHITESPACE"," ",251],["T_STRING","true",251],")",["T_WHITESPACE","\n    ",251],"{",["T_WHITESPACE","\n        ",252],["T_VARIABLE","$anchor",253],["T_WHITESPACE","     ",253],"=",["T_WHITESPACE"," ",253],["T_ARRAY","array",253],"(",")",";",["T_WHITESPACE","\n        ",253],["T_VARIABLE","$regular",254],["T_WHITESPACE","    ",254],"=",["T_WHITESPACE"," ",254],["T_ARRAY","array",254],"(",")",";",["T_WHITESPACE","\n        ",254],["T_VARIABLE","$websiteId",255],["T_WHITESPACE","  ",255],"=",["T_WHITESPACE"," ",255],["T_STRING","Mage",255],["T_DOUBLE_COLON","::",255],["T_STRING","app",255],"(",")",["T_OBJECT_OPERATOR","->",255],["T_STRING","getStore",255],"(",["T_VARIABLE","$this",255],["T_OBJECT_OPERATOR","->",255],["T_STRING","getProductStoreId",255],"(",")",")",["T_OBJECT_OPERATOR","->",255],["T_STRING","getWebsiteId",255],"(",")",";",["T_WHITESPACE","\n\n        ",255],["T_FOREACH","foreach",257],["T_WHITESPACE"," ",257],"(",["T_VARIABLE","$items",257],["T_WHITESPACE"," ",257],["T_AS","as",257],["T_WHITESPACE"," ",257],["T_VARIABLE","$item",257],")",["T_WHITESPACE"," ",257],"{",["T_WHITESPACE","\n            ",257],["T_IF","if",258],["T_WHITESPACE"," ",258],"(",["T_VARIABLE","$item",258],["T_OBJECT_OPERATOR","->",258],["T_STRING","getIsAnchor",258],"(",")",")",["T_WHITESPACE"," ",258],"{",["T_WHITESPACE","\n                ",258],["T_VARIABLE","$anchor",259],"[",["T_VARIABLE","$item",259],["T_OBJECT_OPERATOR","->",259],["T_STRING","getId",259],"(",")","]",["T_WHITESPACE"," ",259],"=",["T_WHITESPACE"," ",259],["T_VARIABLE","$item",259],";",["T_WHITESPACE","\n            ",259],"}",["T_WHITESPACE"," ",260],["T_ELSE","else",260],["T_WHITESPACE"," ",260],"{",["T_WHITESPACE","\n                ",260],["T_VARIABLE","$regular",261],"[",["T_VARIABLE","$item",261],["T_OBJECT_OPERATOR","->",261],["T_STRING","getId",261],"(",")","]",["T_WHITESPACE"," ",261],"=",["T_WHITESPACE"," ",261],["T_VARIABLE","$item",261],";",["T_WHITESPACE","\n            ",261],"}",["T_WHITESPACE","\n        ",262],"}",["T_WHITESPACE","\n\n        ",263],["T_IF","if",265],["T_WHITESPACE"," ",265],"(",["T_VARIABLE","$countRegular",265],")",["T_WHITESPACE"," ",265],"{",["T_WHITESPACE","\n            ",265],["T_COMMENT","\/\/ Retrieve regular categories product counts\n",266],["T_WHITESPACE","            ",267],["T_VARIABLE","$regularIds",267],["T_WHITESPACE"," ",267],"=",["T_WHITESPACE"," ",267],["T_STRING","array_keys",267],"(",["T_VARIABLE","$regular",267],")",";",["T_WHITESPACE","\n            ",267],["T_IF","if",268],["T_WHITESPACE"," ",268],"(","!",["T_EMPTY","empty",268],"(",["T_VARIABLE","$regularIds",268],")",")",["T_WHITESPACE"," ",268],"{",["T_WHITESPACE","\n                ",268],["T_VARIABLE","$select",269],["T_WHITESPACE"," ",269],"=",["T_WHITESPACE"," ",269],["T_VARIABLE","$this",269],["T_OBJECT_OPERATOR","->",269],["T_STRING","_conn",269],["T_OBJECT_OPERATOR","->",269],["T_STRING","select",269],"(",")",";",["T_WHITESPACE","\n                ",269],["T_VARIABLE","$select",270],["T_OBJECT_OPERATOR","->",270],["T_STRING","from",270],"(",["T_WHITESPACE","\n                        ",270],["T_ARRAY","array",271],"(",["T_CONSTANT_ENCAPSED_STRING","'main_table'",271],["T_WHITESPACE"," ",271],["T_DOUBLE_ARROW","=>",271],["T_WHITESPACE"," ",271],["T_VARIABLE","$this",271],["T_OBJECT_OPERATOR","->",271],["T_STRING","_productTable",271],")",",",["T_WHITESPACE","\n                        ",271],["T_ARRAY","array",272],"(",["T_CONSTANT_ENCAPSED_STRING","'category_id'",272],",",["T_WHITESPACE"," ",272],["T_NEW","new",272],["T_WHITESPACE"," ",272],["T_STRING","Zend_Db_Expr",272],"(",["T_CONSTANT_ENCAPSED_STRING","'COUNT(main_table.product_id)'",272],")",")",["T_WHITESPACE","\n                    ",272],")",["T_WHITESPACE","\n                    ",273],["T_OBJECT_OPERATOR","->",274],["T_STRING","where",274],"(",["T_VARIABLE","$this",274],["T_OBJECT_OPERATOR","->",274],["T_STRING","_conn",274],["T_OBJECT_OPERATOR","->",274],["T_STRING","quoteInto",274],"(",["T_CONSTANT_ENCAPSED_STRING","'main_table.category_id IN(?)'",274],",",["T_WHITESPACE"," ",274],["T_VARIABLE","$regularIds",274],")",")",["T_WHITESPACE","\n                    ",274],["T_OBJECT_OPERATOR","->",275],["T_STRING","group",275],"(",["T_CONSTANT_ENCAPSED_STRING","'main_table.category_id'",275],")",";",["T_WHITESPACE","\n                ",275],["T_IF","if",276],["T_WHITESPACE"," ",276],"(",["T_VARIABLE","$websiteId",276],")",["T_WHITESPACE"," ",276],"{",["T_WHITESPACE","\n                    ",276],["T_VARIABLE","$select",277],["T_OBJECT_OPERATOR","->",277],["T_STRING","join",277],"(",["T_WHITESPACE","\n                        ",277],["T_ARRAY","array",278],"(",["T_CONSTANT_ENCAPSED_STRING","'w'",278],["T_WHITESPACE"," ",278],["T_DOUBLE_ARROW","=>",278],["T_WHITESPACE"," ",278],["T_VARIABLE","$this",278],["T_OBJECT_OPERATOR","->",278],["T_STRING","_productWebsiteTable",278],")",",",["T_WHITESPACE","\n                        ",278],["T_CONSTANT_ENCAPSED_STRING","'main_table.product_id = w.product_id'",279],",",["T_WHITESPACE"," ",279],["T_ARRAY","array",279],"(",")",["T_WHITESPACE","\n                    ",279],")",["T_WHITESPACE","\n                    ",280],["T_OBJECT_OPERATOR","->",281],["T_STRING","where",281],"(",["T_CONSTANT_ENCAPSED_STRING","'w.website_id = ?'",281],",",["T_WHITESPACE"," ",281],["T_VARIABLE","$websiteId",281],")",";",["T_WHITESPACE","\n                ",281],"}",["T_WHITESPACE","\n                ",282],["T_VARIABLE","$counts",283],["T_WHITESPACE"," ",283],"=",["T_WHITESPACE"," ",283],["T_VARIABLE","$this",283],["T_OBJECT_OPERATOR","->",283],["T_STRING","_conn",283],["T_OBJECT_OPERATOR","->",283],["T_STRING","fetchPairs",283],"(",["T_VARIABLE","$select",283],")",";",["T_WHITESPACE","\n                ",283],["T_FOREACH","foreach",284],["T_WHITESPACE"," ",284],"(",["T_VARIABLE","$regular",284],["T_WHITESPACE"," ",284],["T_AS","as",284],["T_WHITESPACE"," ",284],["T_VARIABLE","$item",284],")",["T_WHITESPACE"," ",284],"{",["T_WHITESPACE","\n                    ",284],["T_IF","if",285],["T_WHITESPACE"," ",285],"(",["T_ISSET","isset",285],"(",["T_VARIABLE","$counts",285],"[",["T_VARIABLE","$item",285],["T_OBJECT_OPERATOR","->",285],["T_STRING","getId",285],"(",")","]",")",")",["T_WHITESPACE"," ",285],"{",["T_WHITESPACE","\n                        ",285],["T_VARIABLE","$item",286],["T_OBJECT_OPERATOR","->",286],["T_STRING","setProductCount",286],"(",["T_VARIABLE","$counts",286],"[",["T_VARIABLE","$item",286],["T_OBJECT_OPERATOR","->",286],["T_STRING","getId",286],"(",")","]",")",";",["T_WHITESPACE","\n                    ",286],"}",["T_WHITESPACE"," ",287],["T_ELSE","else",287],["T_WHITESPACE"," ",287],"{",["T_WHITESPACE","\n                        ",287],["T_VARIABLE","$item",288],["T_OBJECT_OPERATOR","->",288],["T_STRING","setProductCount",288],"(",["T_LNUMBER","0",288],")",";",["T_WHITESPACE","\n                    ",288],"}",["T_WHITESPACE","\n                ",289],"}",["T_WHITESPACE","\n            ",290],"}",["T_WHITESPACE","\n        ",291],"}",["T_WHITESPACE","\n\n        ",292],["T_IF","if",294],["T_WHITESPACE"," ",294],"(",["T_VARIABLE","$countAnchor",294],")",["T_WHITESPACE"," ",294],"{",["T_WHITESPACE","\n            ",294],["T_COMMENT","\/\/ Retrieve Anchor categories product counts\n",295],["T_WHITESPACE","            ",296],["T_FOREACH","foreach",296],["T_WHITESPACE"," ",296],"(",["T_VARIABLE","$anchor",296],["T_WHITESPACE"," ",296],["T_AS","as",296],["T_WHITESPACE"," ",296],["T_VARIABLE","$item",296],")",["T_WHITESPACE"," ",296],"{",["T_WHITESPACE","\n                ",296],["T_IF","if",297],["T_WHITESPACE"," ",297],"(",["T_VARIABLE","$allChildren",297],["T_WHITESPACE"," ",297],"=",["T_WHITESPACE"," ",297],["T_VARIABLE","$item",297],["T_OBJECT_OPERATOR","->",297],["T_STRING","getAllChildren",297],"(",")",")",["T_WHITESPACE"," ",297],"{",["T_WHITESPACE","\n                    ",297],["T_VARIABLE","$bind",298],["T_WHITESPACE"," ",298],"=",["T_WHITESPACE"," ",298],["T_ARRAY","array",298],"(",["T_WHITESPACE","\n                        ",298],["T_CONSTANT_ENCAPSED_STRING","'entity_id'",299],["T_WHITESPACE"," ",299],["T_DOUBLE_ARROW","=>",299],["T_WHITESPACE"," ",299],["T_VARIABLE","$item",299],["T_OBJECT_OPERATOR","->",299],["T_STRING","getId",299],"(",")",",",["T_WHITESPACE","\n                        ",299],["T_CONSTANT_ENCAPSED_STRING","'c_path'",300],["T_WHITESPACE","    ",300],["T_DOUBLE_ARROW","=>",300],["T_WHITESPACE"," ",300],["T_VARIABLE","$item",300],["T_OBJECT_OPERATOR","->",300],["T_STRING","getPath",300],"(",")",["T_WHITESPACE"," ",300],".",["T_WHITESPACE"," ",300],["T_CONSTANT_ENCAPSED_STRING","'\/%'",300],["T_WHITESPACE","\n                    ",300],")",";",["T_WHITESPACE","\n                    ",301],["T_VARIABLE","$select",302],["T_WHITESPACE"," ",302],"=",["T_WHITESPACE"," ",302],["T_VARIABLE","$this",302],["T_OBJECT_OPERATOR","->",302],["T_STRING","_conn",302],["T_OBJECT_OPERATOR","->",302],["T_STRING","select",302],"(",")",";",["T_WHITESPACE","\n                    ",302],["T_VARIABLE","$select",303],["T_OBJECT_OPERATOR","->",303],["T_STRING","from",303],"(",["T_WHITESPACE","\n                            ",303],["T_ARRAY","array",304],"(",["T_CONSTANT_ENCAPSED_STRING","'main_table'",304],["T_WHITESPACE"," ",304],["T_DOUBLE_ARROW","=>",304],["T_WHITESPACE"," ",304],["T_VARIABLE","$this",304],["T_OBJECT_OPERATOR","->",304],["T_STRING","_productTable",304],")",",",["T_WHITESPACE","\n                            ",304],["T_NEW","new",305],["T_WHITESPACE"," ",305],["T_STRING","Zend_Db_Expr",305],"(",["T_CONSTANT_ENCAPSED_STRING","'COUNT(DISTINCT main_table.product_id)'",305],")",["T_WHITESPACE","\n                        ",305],")",["T_WHITESPACE","\n                        ",306],["T_OBJECT_OPERATOR","->",307],["T_STRING","joinInner",307],"(",["T_WHITESPACE","\n                            ",307],["T_ARRAY","array",308],"(",["T_CONSTANT_ENCAPSED_STRING","'e'",308],["T_WHITESPACE"," ",308],["T_DOUBLE_ARROW","=>",308],["T_WHITESPACE"," ",308],["T_VARIABLE","$this",308],["T_OBJECT_OPERATOR","->",308],["T_STRING","getTable",308],"(",["T_CONSTANT_ENCAPSED_STRING","'catalog\/category'",308],")",")",",",["T_WHITESPACE","\n                            ",308],["T_CONSTANT_ENCAPSED_STRING","'main_table.category_id=e.entity_id'",309],",",["T_WHITESPACE","\n                            ",309],["T_ARRAY","array",310],"(",")",["T_WHITESPACE","\n                        ",310],")",["T_WHITESPACE","\n                        ",311],["T_OBJECT_OPERATOR","->",312],["T_STRING","where",312],"(",["T_CONSTANT_ENCAPSED_STRING","'e.entity_id = :entity_id'",312],")",["T_WHITESPACE","\n                        ",312],["T_OBJECT_OPERATOR","->",313],["T_STRING","orWhere",313],"(",["T_CONSTANT_ENCAPSED_STRING","'e.path LIKE :c_path'",313],")",";",["T_WHITESPACE","\n                    ",313],["T_IF","if",314],["T_WHITESPACE"," ",314],"(",["T_VARIABLE","$websiteId",314],")",["T_WHITESPACE"," ",314],"{",["T_WHITESPACE","\n                        ",314],["T_VARIABLE","$select",315],["T_OBJECT_OPERATOR","->",315],["T_STRING","join",315],"(",["T_WHITESPACE","\n                            ",315],["T_ARRAY","array",316],"(",["T_CONSTANT_ENCAPSED_STRING","'w'",316],["T_WHITESPACE"," ",316],["T_DOUBLE_ARROW","=>",316],["T_WHITESPACE"," ",316],["T_VARIABLE","$this",316],["T_OBJECT_OPERATOR","->",316],["T_STRING","_productWebsiteTable",316],")",",",["T_WHITESPACE","\n                            ",316],["T_CONSTANT_ENCAPSED_STRING","'main_table.product_id = w.product_id'",317],",",["T_WHITESPACE"," ",317],["T_ARRAY","array",317],"(",")",["T_WHITESPACE","\n                        ",317],")",["T_WHITESPACE","\n                        ",318],["T_OBJECT_OPERATOR","->",319],["T_STRING","where",319],"(",["T_CONSTANT_ENCAPSED_STRING","'w.website_id = ?'",319],",",["T_WHITESPACE"," ",319],["T_VARIABLE","$websiteId",319],")",";",["T_WHITESPACE","\n                    ",319],"}",["T_WHITESPACE","\n                    ",320],["T_VARIABLE","$item",321],["T_OBJECT_OPERATOR","->",321],["T_STRING","setProductCount",321],"(",["T_INT_CAST","(int)",321],["T_WHITESPACE"," ",321],["T_VARIABLE","$this",321],["T_OBJECT_OPERATOR","->",321],["T_STRING","_conn",321],["T_OBJECT_OPERATOR","->",321],["T_STRING","fetchOne",321],"(",["T_VARIABLE","$select",321],",",["T_WHITESPACE"," ",321],["T_VARIABLE","$bind",321],")",")",";",["T_WHITESPACE","\n                ",321],"}",["T_WHITESPACE"," ",322],["T_ELSE","else",322],["T_WHITESPACE"," ",322],"{",["T_WHITESPACE","\n                    ",322],["T_VARIABLE","$item",323],["T_OBJECT_OPERATOR","->",323],["T_STRING","setProductCount",323],"(",["T_LNUMBER","0",323],")",";",["T_WHITESPACE","\n                ",323],"}",["T_WHITESPACE","\n            ",324],"}",["T_WHITESPACE","\n        ",325],"}",["T_WHITESPACE","\n        ",326],["T_RETURN","return",327],["T_WHITESPACE"," ",327],["T_VARIABLE","$this",327],";",["T_WHITESPACE","\n    ",327],"}",["T_WHITESPACE","\n\n    ",328],["T_DOC_COMMENT","\/**\n     * Add category path filter\n     *\n     * @param string $regexp\n     * @return Mage_Catalog_Model_Resource_Category_Collection\n     *\/",330],["T_WHITESPACE","\n    ",335],["T_PUBLIC","public",336],["T_WHITESPACE"," ",336],["T_FUNCTION","function",336],["T_WHITESPACE"," ",336],["T_STRING","addPathFilter",336],"(",["T_VARIABLE","$regexp",336],")",["T_WHITESPACE","\n    ",336],"{",["T_WHITESPACE","\n        ",337],["T_VARIABLE","$this",338],["T_OBJECT_OPERATOR","->",338],["T_STRING","addFieldToFilter",338],"(",["T_CONSTANT_ENCAPSED_STRING","'path'",338],",",["T_WHITESPACE"," ",338],["T_ARRAY","array",338],"(",["T_CONSTANT_ENCAPSED_STRING","'regexp'",338],["T_WHITESPACE"," ",338],["T_DOUBLE_ARROW","=>",338],["T_WHITESPACE"," ",338],["T_VARIABLE","$regexp",338],")",")",";",["T_WHITESPACE","\n        ",338],["T_RETURN","return",339],["T_WHITESPACE"," ",339],["T_VARIABLE","$this",339],";",["T_WHITESPACE","\n    ",339],"}",["T_WHITESPACE","\n\n    ",340],["T_DOC_COMMENT","\/**\n     * Joins url rewrite rules to collection\n     *\n     * @return Mage_Catalog_Model_Resource_Category_Collection\n     *\/",342],["T_WHITESPACE","\n    ",346],["T_PUBLIC","public",347],["T_WHITESPACE"," ",347],["T_FUNCTION","function",347],["T_WHITESPACE"," ",347],["T_STRING","joinUrlRewrite",347],"(",")",["T_WHITESPACE","\n    ",347],"{",["T_WHITESPACE","\n        ",348],["T_VARIABLE","$this",349],["T_OBJECT_OPERATOR","->",349],["T_STRING","_factory",349],["T_OBJECT_OPERATOR","->",349],["T_STRING","getCategoryUrlRewriteHelper",349],"(",")",["T_WHITESPACE","\n            ",349],["T_OBJECT_OPERATOR","->",350],["T_STRING","joinTableToEavCollection",350],"(",["T_VARIABLE","$this",350],",",["T_WHITESPACE"," ",350],["T_VARIABLE","$this",350],["T_OBJECT_OPERATOR","->",350],["T_STRING","_getCurrentStoreId",350],"(",")",")",";",["T_WHITESPACE","\n\n        ",350],["T_RETURN","return",352],["T_WHITESPACE"," ",352],["T_VARIABLE","$this",352],";",["T_WHITESPACE","\n    ",352],"}",["T_WHITESPACE","\n\n    ",353],["T_DOC_COMMENT","\/**\n     * Retrieves store_id from current store\n     *\n     * @return int\n     *\/",355],["T_WHITESPACE","\n    ",359],["T_PROTECTED","protected",360],["T_WHITESPACE"," ",360],["T_FUNCTION","function",360],["T_WHITESPACE"," ",360],["T_STRING","_getCurrentStoreId",360],"(",")",["T_WHITESPACE","\n    ",360],"{",["T_WHITESPACE","\n        ",361],["T_RETURN","return",362],["T_WHITESPACE"," ",362],["T_INT_CAST","(int)",362],["T_STRING","Mage",362],["T_DOUBLE_COLON","::",362],["T_STRING","app",362],"(",")",["T_OBJECT_OPERATOR","->",362],["T_STRING","getStore",362],"(",")",["T_OBJECT_OPERATOR","->",362],["T_STRING","getId",362],"(",")",";",["T_WHITESPACE","\n    ",362],"}",["T_WHITESPACE","\n\n    ",363],["T_DOC_COMMENT","\/**\n     * Add active category filter\n     *\n     * @return Mage_Catalog_Model_Resource_Category_Collection\n     *\/",365],["T_WHITESPACE","\n    ",369],["T_PUBLIC","public",370],["T_WHITESPACE"," ",370],["T_FUNCTION","function",370],["T_WHITESPACE"," ",370],["T_STRING","addIsActiveFilter",370],"(",")",["T_WHITESPACE","\n    ",370],"{",["T_WHITESPACE","\n        ",371],["T_VARIABLE","$this",372],["T_OBJECT_OPERATOR","->",372],["T_STRING","addAttributeToFilter",372],"(",["T_CONSTANT_ENCAPSED_STRING","'is_active'",372],",",["T_WHITESPACE"," ",372],["T_LNUMBER","1",372],")",";",["T_WHITESPACE","\n        ",372],["T_STRING","Mage",373],["T_DOUBLE_COLON","::",373],["T_STRING","dispatchEvent",373],"(",["T_VARIABLE","$this",373],["T_OBJECT_OPERATOR","->",373],["T_STRING","_eventPrefix",373],["T_WHITESPACE"," ",373],".",["T_WHITESPACE"," ",373],["T_CONSTANT_ENCAPSED_STRING","'_add_is_active_filter'",373],",",["T_WHITESPACE","\n                            ",373],["T_ARRAY","array",374],"(",["T_VARIABLE","$this",374],["T_OBJECT_OPERATOR","->",374],["T_STRING","_eventObject",374],["T_WHITESPACE"," ",374],["T_DOUBLE_ARROW","=>",374],["T_WHITESPACE"," ",374],["T_VARIABLE","$this",374],")",")",";",["T_WHITESPACE","\n        ",374],["T_RETURN","return",375],["T_WHITESPACE"," ",375],["T_VARIABLE","$this",375],";",["T_WHITESPACE","\n    ",375],"}",["T_WHITESPACE","\n\n    ",376],["T_DOC_COMMENT","\/**\n     * Add name attribute to result\n     *\n     * @return Mage_Catalog_Model_Resource_Category_Collection\n     *\/",378],["T_WHITESPACE","\n    ",382],["T_PUBLIC","public",383],["T_WHITESPACE"," ",383],["T_FUNCTION","function",383],["T_WHITESPACE"," ",383],["T_STRING","addNameToResult",383],"(",")",["T_WHITESPACE","\n    ",383],"{",["T_WHITESPACE","\n        ",384],["T_VARIABLE","$this",385],["T_OBJECT_OPERATOR","->",385],["T_STRING","addAttributeToSelect",385],"(",["T_CONSTANT_ENCAPSED_STRING","'name'",385],")",";",["T_WHITESPACE","\n        ",385],["T_RETURN","return",386],["T_WHITESPACE"," ",386],["T_VARIABLE","$this",386],";",["T_WHITESPACE","\n    ",386],"}",["T_WHITESPACE","\n\n    ",387],["T_DOC_COMMENT","\/**\n     * Add url rewrite rules to collection\n     *\n     * @return Mage_Catalog_Model_Resource_Category_Collection\n     *\/",389],["T_WHITESPACE","\n    ",393],["T_PUBLIC","public",394],["T_WHITESPACE"," ",394],["T_FUNCTION","function",394],["T_WHITESPACE"," ",394],["T_STRING","addUrlRewriteToResult",394],"(",")",["T_WHITESPACE","\n    ",394],"{",["T_WHITESPACE","\n        ",395],["T_VARIABLE","$this",396],["T_OBJECT_OPERATOR","->",396],["T_STRING","joinUrlRewrite",396],"(",")",";",["T_WHITESPACE","\n        ",396],["T_RETURN","return",397],["T_WHITESPACE"," ",397],["T_VARIABLE","$this",397],";",["T_WHITESPACE","\n    ",397],"}",["T_WHITESPACE","\n\n    ",398],["T_DOC_COMMENT","\/**\n     * Add category path filter\n     *\n     * @param array|string $paths\n     * @return Mage_Catalog_Model_Resource_Category_Collection\n     *\/",400],["T_WHITESPACE","\n    ",405],["T_PUBLIC","public",406],["T_WHITESPACE"," ",406],["T_FUNCTION","function",406],["T_WHITESPACE"," ",406],["T_STRING","addPathsFilter",406],"(",["T_VARIABLE","$paths",406],")",["T_WHITESPACE","\n    ",406],"{",["T_WHITESPACE","\n        ",407],["T_IF","if",408],["T_WHITESPACE"," ",408],"(","!",["T_STRING","is_array",408],"(",["T_VARIABLE","$paths",408],")",")",["T_WHITESPACE"," ",408],"{",["T_WHITESPACE","\n            ",408],["T_VARIABLE","$paths",409],["T_WHITESPACE"," ",409],"=",["T_WHITESPACE"," ",409],["T_ARRAY","array",409],"(",["T_VARIABLE","$paths",409],")",";",["T_WHITESPACE","\n        ",409],"}",["T_WHITESPACE","\n        ",410],["T_VARIABLE","$write",411],["T_WHITESPACE","  ",411],"=",["T_WHITESPACE"," ",411],["T_VARIABLE","$this",411],["T_OBJECT_OPERATOR","->",411],["T_STRING","getResource",411],"(",")",["T_OBJECT_OPERATOR","->",411],["T_STRING","getWriteConnection",411],"(",")",";",["T_WHITESPACE","\n        ",411],["T_VARIABLE","$cond",412],["T_WHITESPACE","   ",412],"=",["T_WHITESPACE"," ",412],["T_ARRAY","array",412],"(",")",";",["T_WHITESPACE","\n        ",412],["T_FOREACH","foreach",413],["T_WHITESPACE"," ",413],"(",["T_VARIABLE","$paths",413],["T_WHITESPACE"," ",413],["T_AS","as",413],["T_WHITESPACE"," ",413],["T_VARIABLE","$path",413],")",["T_WHITESPACE"," ",413],"{",["T_WHITESPACE","\n            ",413],["T_VARIABLE","$cond",414],"[","]",["T_WHITESPACE"," ",414],"=",["T_WHITESPACE"," ",414],["T_VARIABLE","$write",414],["T_OBJECT_OPERATOR","->",414],["T_STRING","quoteInto",414],"(",["T_CONSTANT_ENCAPSED_STRING","'e.path LIKE ?'",414],",",["T_WHITESPACE"," ",414],"\"",["T_VARIABLE","$path",414],["T_ENCAPSED_AND_WHITESPACE","%",414],"\"",")",";",["T_WHITESPACE","\n        ",414],"}",["T_WHITESPACE","\n        ",415],["T_IF","if",416],["T_WHITESPACE"," ",416],"(",["T_VARIABLE","$cond",416],")",["T_WHITESPACE"," ",416],"{",["T_WHITESPACE","\n            ",416],["T_VARIABLE","$this",417],["T_OBJECT_OPERATOR","->",417],["T_STRING","getSelect",417],"(",")",["T_OBJECT_OPERATOR","->",417],["T_STRING","where",417],"(",["T_STRING","join",417],"(",["T_CONSTANT_ENCAPSED_STRING","' OR '",417],",",["T_WHITESPACE"," ",417],["T_VARIABLE","$cond",417],")",")",";",["T_WHITESPACE","\n        ",417],"}",["T_WHITESPACE","\n        ",418],["T_RETURN","return",419],["T_WHITESPACE"," ",419],["T_VARIABLE","$this",419],";",["T_WHITESPACE","\n    ",419],"}",["T_WHITESPACE","\n\n    ",420],["T_DOC_COMMENT","\/**\n     * Add category level filter\n     *\n     * @param int|string $level\n     * @return Mage_Catalog_Model_Resource_Category_Collection\n     *\/",422],["T_WHITESPACE","\n    ",427],["T_PUBLIC","public",428],["T_WHITESPACE"," ",428],["T_FUNCTION","function",428],["T_WHITESPACE"," ",428],["T_STRING","addLevelFilter",428],"(",["T_VARIABLE","$level",428],")",["T_WHITESPACE","\n    ",428],"{",["T_WHITESPACE","\n        ",429],["T_VARIABLE","$this",430],["T_OBJECT_OPERATOR","->",430],["T_STRING","addFieldToFilter",430],"(",["T_CONSTANT_ENCAPSED_STRING","'level'",430],",",["T_WHITESPACE"," ",430],["T_ARRAY","array",430],"(",["T_CONSTANT_ENCAPSED_STRING","'lteq'",430],["T_WHITESPACE"," ",430],["T_DOUBLE_ARROW","=>",430],["T_WHITESPACE"," ",430],["T_VARIABLE","$level",430],")",")",";",["T_WHITESPACE","\n        ",430],["T_RETURN","return",431],["T_WHITESPACE"," ",431],["T_VARIABLE","$this",431],";",["T_WHITESPACE","\n    ",431],"}",["T_WHITESPACE","\n\n    ",432],["T_DOC_COMMENT","\/**\n     * Add root category filter\n     *\n     * @return Mage_Catalog_Model_Resource_Category_Collection\n     *\/",434],["T_WHITESPACE","\n    ",438],["T_PUBLIC","public",439],["T_WHITESPACE"," ",439],["T_FUNCTION","function",439],["T_WHITESPACE"," ",439],["T_STRING","addRootLevelFilter",439],"(",")",["T_WHITESPACE","\n    ",439],"{",["T_WHITESPACE","\n        ",440],["T_VARIABLE","$this",441],["T_OBJECT_OPERATOR","->",441],["T_STRING","addFieldToFilter",441],"(",["T_CONSTANT_ENCAPSED_STRING","'path'",441],",",["T_WHITESPACE"," ",441],["T_ARRAY","array",441],"(",["T_CONSTANT_ENCAPSED_STRING","'neq'",441],["T_WHITESPACE"," ",441],["T_DOUBLE_ARROW","=>",441],["T_WHITESPACE"," ",441],["T_CONSTANT_ENCAPSED_STRING","'1'",441],")",")",";",["T_WHITESPACE","\n        ",441],["T_VARIABLE","$this",442],["T_OBJECT_OPERATOR","->",442],["T_STRING","addLevelFilter",442],"(",["T_LNUMBER","1",442],")",";",["T_WHITESPACE","\n        ",442],["T_RETURN","return",443],["T_WHITESPACE"," ",443],["T_VARIABLE","$this",443],";",["T_WHITESPACE","\n    ",443],"}",["T_WHITESPACE","\n\n    ",444],["T_DOC_COMMENT","\/**\n     * Add order field\n     *\n     * @param string $field\n     * @return Mage_Catalog_Model_Resource_Category_Collection\n     *\/",446],["T_WHITESPACE","\n    ",451],["T_PUBLIC","public",452],["T_WHITESPACE"," ",452],["T_FUNCTION","function",452],["T_WHITESPACE"," ",452],["T_STRING","addOrderField",452],"(",["T_VARIABLE","$field",452],")",["T_WHITESPACE","\n    ",452],"{",["T_WHITESPACE","\n        ",453],["T_VARIABLE","$this",454],["T_OBJECT_OPERATOR","->",454],["T_STRING","setOrder",454],"(",["T_VARIABLE","$field",454],",",["T_WHITESPACE"," ",454],["T_STRING","self",454],["T_DOUBLE_COLON","::",454],["T_STRING","SORT_ORDER_ASC",454],")",";",["T_WHITESPACE","\n        ",454],["T_RETURN","return",455],["T_WHITESPACE"," ",455],["T_VARIABLE","$this",455],";",["T_WHITESPACE","\n    ",455],"}",["T_WHITESPACE","\n\n    ",456],["T_DOC_COMMENT","\/**\n     * Set disable flat flag\n     *\n     * @param bool $flag\n     * @return Mage_Catalog_Model_Resource_Category_Collection\n     *\/",458],["T_WHITESPACE","\n    ",463],["T_PUBLIC","public",464],["T_WHITESPACE"," ",464],["T_FUNCTION","function",464],["T_WHITESPACE"," ",464],["T_STRING","setDisableFlat",464],"(",["T_VARIABLE","$flag",464],")",["T_WHITESPACE","\n    ",464],"{",["T_WHITESPACE","\n        ",465],["T_VARIABLE","$this",466],["T_OBJECT_OPERATOR","->",466],["T_STRING","_disableFlat",466],["T_WHITESPACE"," ",466],"=",["T_WHITESPACE"," ",466],["T_BOOL_CAST","(bool)",466],["T_WHITESPACE"," ",466],["T_VARIABLE","$flag",466],";",["T_WHITESPACE","\n        ",466],["T_RETURN","return",467],["T_WHITESPACE"," ",467],["T_VARIABLE","$this",467],";",["T_WHITESPACE","\n    ",467],"}",["T_WHITESPACE","\n\n    ",468],["T_DOC_COMMENT","\/**\n     * Retrieve disable flat flag value\n     *\n     * @return bool\n     *\/",470],["T_WHITESPACE","\n    ",474],["T_PUBLIC","public",475],["T_WHITESPACE"," ",475],["T_FUNCTION","function",475],["T_WHITESPACE"," ",475],["T_STRING","getDisableFlat",475],"(",")",["T_WHITESPACE","\n    ",475],"{",["T_WHITESPACE","\n        ",476],["T_RETURN","return",477],["T_WHITESPACE"," ",477],["T_VARIABLE","$this",477],["T_OBJECT_OPERATOR","->",477],["T_STRING","_disableFlat",477],";",["T_WHITESPACE","\n    ",477],"}",["T_WHITESPACE","\n\n    ",478],["T_DOC_COMMENT","\/**\n     * Retrieve collection empty item\n     *\n     * @return Mage_Catalog_Model_Category\n     *\/",480],["T_WHITESPACE","\n    ",484],["T_PUBLIC","public",485],["T_WHITESPACE"," ",485],["T_FUNCTION","function",485],["T_WHITESPACE"," ",485],["T_STRING","getNewEmptyItem",485],"(",")",["T_WHITESPACE","\n    ",485],"{",["T_WHITESPACE","\n        ",486],["T_RETURN","return",487],["T_WHITESPACE"," ",487],["T_NEW","new",487],["T_WHITESPACE"," ",487],["T_VARIABLE","$this",487],["T_OBJECT_OPERATOR","->",487],["T_STRING","_itemObjectClass",487],"(",["T_ARRAY","array",487],"(",["T_CONSTANT_ENCAPSED_STRING","'disable_flat'",487],["T_WHITESPACE"," ",487],["T_DOUBLE_ARROW","=>",487],["T_WHITESPACE"," ",487],["T_VARIABLE","$this",487],["T_OBJECT_OPERATOR","->",487],["T_STRING","getDisableFlat",487],"(",")",")",")",";",["T_WHITESPACE","\n    ",487],"}",["T_WHITESPACE","\n",488],"}",["T_WHITESPACE","\n",489]]
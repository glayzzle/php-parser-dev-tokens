[["T_OPEN_TAG","<?php\n",1],["T_DOC_COMMENT","\/**\n * Magento\n *\n * NOTICE OF LICENSE\n *\n * This source file is subject to the Open Software License (OSL 3.0)\n * that is bundled with this package in the file LICENSE.txt.\n * It is also available through the world-wide-web at this URL:\n * http:\/\/opensource.org\/licenses\/osl-3.0.php\n * If you did not receive a copy of the license and are unable to\n * obtain it through the world-wide-web, please send an email\n * to license@magento.com so we can send you a copy immediately.\n *\n * DISCLAIMER\n *\n * Do not edit or add to this file if you wish to upgrade Magento to newer\n * versions in the future. If you wish to customize Magento for your\n * needs please refer to http:\/\/www.magento.com for more information.\n *\n * @category    Mage\n * @package     Mage_Catalog\n * @copyright  Copyright (c) 2006-2016 X.commerce, Inc. and affiliates (http:\/\/www.magento.com)\n * @license    http:\/\/opensource.org\/licenses\/osl-3.0.php  Open Software License (OSL 3.0)\n *\/",2],["T_WHITESPACE","\n\n\n",25],["T_CLASS","class",28],["T_WHITESPACE"," ",28],["T_STRING","Mage_Catalog_Model_Convert_Adapter_Product",28],["T_WHITESPACE","\n    ",28],["T_EXTENDS","extends",29],["T_WHITESPACE"," ",29],["T_STRING","Mage_Eav_Model_Convert_Adapter_Entity",29],["T_WHITESPACE","\n",29],"{",["T_WHITESPACE","\n    ",30],["T_CONST","const",31],["T_WHITESPACE"," ",31],["T_STRING","MULTI_DELIMITER",31],["T_WHITESPACE","   ",31],"=",["T_WHITESPACE"," ",31],["T_CONSTANT_ENCAPSED_STRING","' , '",31],";",["T_WHITESPACE","\n    ",31],["T_CONST","const",32],["T_WHITESPACE"," ",32],["T_STRING","ENTITY",32],["T_WHITESPACE","            ",32],"=",["T_WHITESPACE"," ",32],["T_CONSTANT_ENCAPSED_STRING","'catalog_product_import'",32],";",["T_WHITESPACE","\n\n    ",32],["T_DOC_COMMENT","\/**\n     * Event prefix\n     *\n     * @var string\n     *\/",34],["T_WHITESPACE","\n    ",38],["T_PROTECTED","protected",39],["T_WHITESPACE"," ",39],["T_VARIABLE","$_eventPrefix",39],["T_WHITESPACE"," ",39],"=",["T_WHITESPACE"," ",39],["T_CONSTANT_ENCAPSED_STRING","'catalog_product_import'",39],";",["T_WHITESPACE","\n\n    ",39],["T_DOC_COMMENT","\/**\n     * Product model\n     *\n     * @var Mage_Catalog_Model_Product\n     *\/",41],["T_WHITESPACE","\n    ",45],["T_PROTECTED","protected",46],["T_WHITESPACE"," ",46],["T_VARIABLE","$_productModel",46],";",["T_WHITESPACE","\n\n    ",46],["T_DOC_COMMENT","\/**\n     * product types collection array\n     *\n     * @var array\n     *\/",48],["T_WHITESPACE","\n    ",52],["T_PROTECTED","protected",53],["T_WHITESPACE"," ",53],["T_VARIABLE","$_productTypes",53],";",["T_WHITESPACE","\n\n    ",53],["T_DOC_COMMENT","\/**\n     * Product Type Instances singletons\n     *\n     * @var array\n     *\/",55],["T_WHITESPACE","\n    ",59],["T_PROTECTED","protected",60],["T_WHITESPACE"," ",60],["T_VARIABLE","$_productTypeInstances",60],["T_WHITESPACE"," ",60],"=",["T_WHITESPACE"," ",60],["T_ARRAY","array",60],"(",")",";",["T_WHITESPACE","\n\n    ",60],["T_DOC_COMMENT","\/**\n     * product attribute set collection array\n     *\n     * @var array\n     *\/",62],["T_WHITESPACE","\n    ",66],["T_PROTECTED","protected",67],["T_WHITESPACE"," ",67],["T_VARIABLE","$_productAttributeSets",67],";",["T_WHITESPACE","\n\n    ",67],["T_PROTECTED","protected",69],["T_WHITESPACE"," ",69],["T_VARIABLE","$_stores",69],";",["T_WHITESPACE","\n\n    ",69],["T_PROTECTED","protected",71],["T_WHITESPACE"," ",71],["T_VARIABLE","$_attributes",71],["T_WHITESPACE"," ",71],"=",["T_WHITESPACE"," ",71],["T_ARRAY","array",71],"(",")",";",["T_WHITESPACE","\n\n    ",71],["T_PROTECTED","protected",73],["T_WHITESPACE"," ",73],["T_VARIABLE","$_configs",73],["T_WHITESPACE"," ",73],"=",["T_WHITESPACE"," ",73],["T_ARRAY","array",73],"(",")",";",["T_WHITESPACE","\n\n    ",73],["T_PROTECTED","protected",75],["T_WHITESPACE"," ",75],["T_VARIABLE","$_requiredFields",75],["T_WHITESPACE"," ",75],"=",["T_WHITESPACE"," ",75],["T_ARRAY","array",75],"(",")",";",["T_WHITESPACE","\n\n    ",75],["T_PROTECTED","protected",77],["T_WHITESPACE"," ",77],["T_VARIABLE","$_ignoreFields",77],["T_WHITESPACE"," ",77],"=",["T_WHITESPACE"," ",77],["T_ARRAY","array",77],"(",")",";",["T_WHITESPACE","\n\n    ",77],["T_DOC_COMMENT","\/**\n     * @deprecated after 1.5.0.0-alpha2\n     *\n     * @var array\n     *\/",79],["T_WHITESPACE","\n    ",83],["T_PROTECTED","protected",84],["T_WHITESPACE"," ",84],["T_VARIABLE","$_imageFields",84],["T_WHITESPACE"," ",84],"=",["T_WHITESPACE"," ",84],["T_ARRAY","array",84],"(",")",";",["T_WHITESPACE","\n\n    ",84],["T_DOC_COMMENT","\/**\n     * Inventory Fields array\n     *\n     * @var array\n     *\/",86],["T_WHITESPACE","\n    ",90],["T_PROTECTED","protected",91],["T_WHITESPACE"," ",91],["T_VARIABLE","$_inventoryFields",91],["T_WHITESPACE","             ",91],"=",["T_WHITESPACE"," ",91],["T_ARRAY","array",91],"(",")",";",["T_WHITESPACE","\n\n    ",91],["T_DOC_COMMENT","\/**\n     * Inventory Fields by product Types\n     *\n     * @var array\n     *\/",93],["T_WHITESPACE","\n    ",97],["T_PROTECTED","protected",98],["T_WHITESPACE"," ",98],["T_VARIABLE","$_inventoryFieldsProductTypes",98],["T_WHITESPACE"," ",98],"=",["T_WHITESPACE"," ",98],["T_ARRAY","array",98],"(",")",";",["T_WHITESPACE","\n\n    ",98],["T_PROTECTED","protected",100],["T_WHITESPACE"," ",100],["T_VARIABLE","$_toNumber",100],["T_WHITESPACE"," ",100],"=",["T_WHITESPACE"," ",100],["T_ARRAY","array",100],"(",")",";",["T_WHITESPACE","\n\n    ",100],["T_DOC_COMMENT","\/**\n     * Gallery backend model\n     *\n     * @var Mage_Catalog_Model_Product_Attribute_Backend_Media\n     *\/",102],["T_WHITESPACE","\n    ",106],["T_PROTECTED","protected",107],["T_WHITESPACE"," ",107],["T_VARIABLE","$_galleryBackendModel",107],";",["T_WHITESPACE","\n\n    ",107],["T_DOC_COMMENT","\/**\n     * Retrieve event prefix for adapter\n     *\n     * @return string\n     *\/",109],["T_WHITESPACE","\n    ",113],["T_PUBLIC","public",114],["T_WHITESPACE"," ",114],["T_FUNCTION","function",114],["T_WHITESPACE"," ",114],["T_STRING","getEventPrefix",114],"(",")",["T_WHITESPACE","\n    ",114],"{",["T_WHITESPACE","\n        ",115],["T_RETURN","return",116],["T_WHITESPACE"," ",116],["T_VARIABLE","$this",116],["T_OBJECT_OPERATOR","->",116],["T_STRING","_eventPrefix",116],";",["T_WHITESPACE","\n    ",116],"}",["T_WHITESPACE","\n\n    ",117],["T_DOC_COMMENT","\/**\n     * Affected entity ids\n     *\n     * @var array\n     *\/",119],["T_WHITESPACE","\n    ",123],["T_PROTECTED","protected",124],["T_WHITESPACE"," ",124],["T_VARIABLE","$_affectedEntityIds",124],["T_WHITESPACE"," ",124],"=",["T_WHITESPACE"," ",124],["T_ARRAY","array",124],"(",")",";",["T_WHITESPACE","\n\n    ",124],["T_DOC_COMMENT","\/**\n     * Store affected entity ids\n     *\n     * @param  int|array $ids\n     * @return Mage_Catalog_Model_Convert_Adapter_Product\n     *\/",126],["T_WHITESPACE","\n    ",131],["T_PROTECTED","protected",132],["T_WHITESPACE"," ",132],["T_FUNCTION","function",132],["T_WHITESPACE"," ",132],["T_STRING","_addAffectedEntityIds",132],"(",["T_VARIABLE","$ids",132],")",["T_WHITESPACE","\n    ",132],"{",["T_WHITESPACE","\n        ",133],["T_IF","if",134],["T_WHITESPACE"," ",134],"(",["T_STRING","is_array",134],"(",["T_VARIABLE","$ids",134],")",")",["T_WHITESPACE"," ",134],"{",["T_WHITESPACE","\n            ",134],["T_FOREACH","foreach",135],["T_WHITESPACE"," ",135],"(",["T_VARIABLE","$ids",135],["T_WHITESPACE"," ",135],["T_AS","as",135],["T_WHITESPACE"," ",135],["T_VARIABLE","$id",135],")",["T_WHITESPACE"," ",135],"{",["T_WHITESPACE","\n                ",135],["T_VARIABLE","$this",136],["T_OBJECT_OPERATOR","->",136],["T_STRING","_addAffectedEntityIds",136],"(",["T_VARIABLE","$id",136],")",";",["T_WHITESPACE","\n            ",136],"}",["T_WHITESPACE","\n        ",137],"}",["T_WHITESPACE"," ",138],["T_ELSE","else",138],["T_WHITESPACE"," ",138],"{",["T_WHITESPACE","\n            ",138],["T_VARIABLE","$this",139],["T_OBJECT_OPERATOR","->",139],["T_STRING","_affectedEntityIds",139],"[","]",["T_WHITESPACE"," ",139],"=",["T_WHITESPACE"," ",139],["T_VARIABLE","$ids",139],";",["T_WHITESPACE","\n        ",139],"}",["T_WHITESPACE","\n\n        ",140],["T_RETURN","return",142],["T_WHITESPACE"," ",142],["T_VARIABLE","$this",142],";",["T_WHITESPACE","\n    ",142],"}",["T_WHITESPACE","\n\n    ",143],["T_DOC_COMMENT","\/**\n     * Retrieve affected entity ids\n     *\n     * @return array\n     *\/",145],["T_WHITESPACE","\n    ",149],["T_PUBLIC","public",150],["T_WHITESPACE"," ",150],["T_FUNCTION","function",150],["T_WHITESPACE"," ",150],["T_STRING","getAffectedEntityIds",150],"(",")",["T_WHITESPACE","\n    ",150],"{",["T_WHITESPACE","\n        ",151],["T_RETURN","return",152],["T_WHITESPACE"," ",152],["T_VARIABLE","$this",152],["T_OBJECT_OPERATOR","->",152],["T_STRING","_affectedEntityIds",152],";",["T_WHITESPACE","\n    ",152],"}",["T_WHITESPACE","\n\n    ",153],["T_DOC_COMMENT","\/**\n     * Clear affected entity ids results\n     *\n     * @return Mage_Catalog_Model_Convert_Adapter_Product\n     *\/",155],["T_WHITESPACE","\n    ",159],["T_PUBLIC","public",160],["T_WHITESPACE"," ",160],["T_FUNCTION","function",160],["T_WHITESPACE"," ",160],["T_STRING","clearAffectedEntityIds",160],"(",")",["T_WHITESPACE","\n    ",160],"{",["T_WHITESPACE","\n        ",161],["T_VARIABLE","$this",162],["T_OBJECT_OPERATOR","->",162],["T_STRING","_affectedEntityIds",162],["T_WHITESPACE"," ",162],"=",["T_WHITESPACE"," ",162],["T_ARRAY","array",162],"(",")",";",["T_WHITESPACE","\n        ",162],["T_RETURN","return",163],["T_WHITESPACE"," ",163],["T_VARIABLE","$this",163],";",["T_WHITESPACE","\n    ",163],"}",["T_WHITESPACE","\n\n    ",164],["T_DOC_COMMENT","\/**\n     * Load product collection Id(s)\n     *\/",166],["T_WHITESPACE","\n    ",168],["T_PUBLIC","public",169],["T_WHITESPACE"," ",169],["T_FUNCTION","function",169],["T_WHITESPACE"," ",169],["T_STRING","load",169],"(",")",["T_WHITESPACE","\n    ",169],"{",["T_WHITESPACE","\n        ",170],["T_VARIABLE","$attrFilterArray",171],["T_WHITESPACE"," ",171],"=",["T_WHITESPACE"," ",171],["T_ARRAY","array",171],"(",")",";",["T_WHITESPACE","\n        ",171],["T_VARIABLE","$attrFilterArray",172],["T_WHITESPACE"," ",172],"[",["T_CONSTANT_ENCAPSED_STRING","'name'",172],"]",["T_WHITESPACE","           ",172],"=",["T_WHITESPACE"," ",172],["T_CONSTANT_ENCAPSED_STRING","'like'",172],";",["T_WHITESPACE","\n        ",172],["T_VARIABLE","$attrFilterArray",173],["T_WHITESPACE"," ",173],"[",["T_CONSTANT_ENCAPSED_STRING","'sku'",173],"]",["T_WHITESPACE","            ",173],"=",["T_WHITESPACE"," ",173],["T_CONSTANT_ENCAPSED_STRING","'startsWith'",173],";",["T_WHITESPACE","\n        ",173],["T_VARIABLE","$attrFilterArray",174],["T_WHITESPACE"," ",174],"[",["T_CONSTANT_ENCAPSED_STRING","'type'",174],"]",["T_WHITESPACE","           ",174],"=",["T_WHITESPACE"," ",174],["T_CONSTANT_ENCAPSED_STRING","'eq'",174],";",["T_WHITESPACE","\n        ",174],["T_VARIABLE","$attrFilterArray",175],["T_WHITESPACE"," ",175],"[",["T_CONSTANT_ENCAPSED_STRING","'attribute_set'",175],"]",["T_WHITESPACE","  ",175],"=",["T_WHITESPACE"," ",175],["T_CONSTANT_ENCAPSED_STRING","'eq'",175],";",["T_WHITESPACE","\n        ",175],["T_VARIABLE","$attrFilterArray",176],["T_WHITESPACE"," ",176],"[",["T_CONSTANT_ENCAPSED_STRING","'visibility'",176],"]",["T_WHITESPACE","     ",176],"=",["T_WHITESPACE"," ",176],["T_CONSTANT_ENCAPSED_STRING","'eq'",176],";",["T_WHITESPACE","\n        ",176],["T_VARIABLE","$attrFilterArray",177],["T_WHITESPACE"," ",177],"[",["T_CONSTANT_ENCAPSED_STRING","'status'",177],"]",["T_WHITESPACE","         ",177],"=",["T_WHITESPACE"," ",177],["T_CONSTANT_ENCAPSED_STRING","'eq'",177],";",["T_WHITESPACE","\n        ",177],["T_VARIABLE","$attrFilterArray",178],["T_WHITESPACE"," ",178],"[",["T_CONSTANT_ENCAPSED_STRING","'price'",178],"]",["T_WHITESPACE","          ",178],"=",["T_WHITESPACE"," ",178],["T_CONSTANT_ENCAPSED_STRING","'fromTo'",178],";",["T_WHITESPACE","\n        ",178],["T_VARIABLE","$attrFilterArray",179],["T_WHITESPACE"," ",179],"[",["T_CONSTANT_ENCAPSED_STRING","'qty'",179],"]",["T_WHITESPACE","            ",179],"=",["T_WHITESPACE"," ",179],["T_CONSTANT_ENCAPSED_STRING","'fromTo'",179],";",["T_WHITESPACE","\n        ",179],["T_VARIABLE","$attrFilterArray",180],["T_WHITESPACE"," ",180],"[",["T_CONSTANT_ENCAPSED_STRING","'store_id'",180],"]",["T_WHITESPACE","       ",180],"=",["T_WHITESPACE"," ",180],["T_CONSTANT_ENCAPSED_STRING","'eq'",180],";",["T_WHITESPACE","\n\n        ",180],["T_VARIABLE","$attrToDb",182],["T_WHITESPACE"," ",182],"=",["T_WHITESPACE"," ",182],["T_ARRAY","array",182],"(",["T_WHITESPACE","\n            ",182],["T_CONSTANT_ENCAPSED_STRING","'type'",183],["T_WHITESPACE","          ",183],["T_DOUBLE_ARROW","=>",183],["T_WHITESPACE"," ",183],["T_CONSTANT_ENCAPSED_STRING","'type_id'",183],",",["T_WHITESPACE","\n            ",183],["T_CONSTANT_ENCAPSED_STRING","'attribute_set'",184],["T_WHITESPACE"," ",184],["T_DOUBLE_ARROW","=>",184],["T_WHITESPACE"," ",184],["T_CONSTANT_ENCAPSED_STRING","'attribute_set_id'",184],["T_WHITESPACE","\n        ",184],")",";",["T_WHITESPACE","\n\n        ",185],["T_VARIABLE","$filters",187],["T_WHITESPACE"," ",187],"=",["T_WHITESPACE"," ",187],["T_VARIABLE","$this",187],["T_OBJECT_OPERATOR","->",187],["T_STRING","_parseVars",187],"(",")",";",["T_WHITESPACE","\n\n        ",187],["T_IF","if",189],["T_WHITESPACE"," ",189],"(",["T_VARIABLE","$qty",189],["T_WHITESPACE"," ",189],"=",["T_WHITESPACE"," ",189],["T_VARIABLE","$this",189],["T_OBJECT_OPERATOR","->",189],["T_STRING","getFieldValue",189],"(",["T_VARIABLE","$filters",189],",",["T_WHITESPACE"," ",189],["T_CONSTANT_ENCAPSED_STRING","'qty'",189],")",")",["T_WHITESPACE"," ",189],"{",["T_WHITESPACE","\n            ",189],["T_VARIABLE","$qtyFrom",190],["T_WHITESPACE"," ",190],"=",["T_WHITESPACE"," ",190],["T_ISSET","isset",190],"(",["T_VARIABLE","$qty",190],"[",["T_CONSTANT_ENCAPSED_STRING","'from'",190],"]",")",["T_WHITESPACE"," ",190],"?",["T_WHITESPACE"," ",190],["T_DOUBLE_CAST","(float)",190],["T_WHITESPACE"," ",190],["T_VARIABLE","$qty",190],"[",["T_CONSTANT_ENCAPSED_STRING","'from'",190],"]",["T_WHITESPACE"," ",190],":",["T_WHITESPACE"," ",190],["T_LNUMBER","0",190],";",["T_WHITESPACE","\n            ",190],["T_VARIABLE","$qtyTo",191],["T_WHITESPACE","   ",191],"=",["T_WHITESPACE"," ",191],["T_ISSET","isset",191],"(",["T_VARIABLE","$qty",191],"[",["T_CONSTANT_ENCAPSED_STRING","'to'",191],"]",")",["T_WHITESPACE"," ",191],"?",["T_WHITESPACE"," ",191],["T_DOUBLE_CAST","(float)",191],["T_WHITESPACE"," ",191],["T_VARIABLE","$qty",191],"[",["T_CONSTANT_ENCAPSED_STRING","'to'",191],"]",["T_WHITESPACE"," ",191],":",["T_WHITESPACE"," ",191],["T_LNUMBER","0",191],";",["T_WHITESPACE","\n\n            ",191],["T_VARIABLE","$qtyAttr",193],["T_WHITESPACE"," ",193],"=",["T_WHITESPACE"," ",193],["T_ARRAY","array",193],"(",")",";",["T_WHITESPACE","\n            ",193],["T_VARIABLE","$qtyAttr",194],"[",["T_CONSTANT_ENCAPSED_STRING","'alias'",194],"]",["T_WHITESPACE","       ",194],"=",["T_WHITESPACE"," ",194],["T_CONSTANT_ENCAPSED_STRING","'qty'",194],";",["T_WHITESPACE","\n            ",194],["T_VARIABLE","$qtyAttr",195],"[",["T_CONSTANT_ENCAPSED_STRING","'attribute'",195],"]",["T_WHITESPACE","   ",195],"=",["T_WHITESPACE"," ",195],["T_CONSTANT_ENCAPSED_STRING","'cataloginventory\/stock_item'",195],";",["T_WHITESPACE","\n            ",195],["T_VARIABLE","$qtyAttr",196],"[",["T_CONSTANT_ENCAPSED_STRING","'field'",196],"]",["T_WHITESPACE","       ",196],"=",["T_WHITESPACE"," ",196],["T_CONSTANT_ENCAPSED_STRING","'qty'",196],";",["T_WHITESPACE","\n            ",196],["T_VARIABLE","$qtyAttr",197],"[",["T_CONSTANT_ENCAPSED_STRING","'bind'",197],"]",["T_WHITESPACE","        ",197],"=",["T_WHITESPACE"," ",197],["T_CONSTANT_ENCAPSED_STRING","'product_id=entity_id'",197],";",["T_WHITESPACE","\n            ",197],["T_VARIABLE","$qtyAttr",198],"[",["T_CONSTANT_ENCAPSED_STRING","'cond'",198],"]",["T_WHITESPACE","        ",198],"=",["T_WHITESPACE"," ",198],"\"",["T_ENCAPSED_AND_WHITESPACE","{{table}}.qty between '",198],["T_CURLY_OPEN","{",198],["T_VARIABLE","$qtyFrom",198],"}",["T_ENCAPSED_AND_WHITESPACE","' AND '",198],["T_CURLY_OPEN","{",198],["T_VARIABLE","$qtyTo",198],"}",["T_ENCAPSED_AND_WHITESPACE","'",198],"\"",";",["T_WHITESPACE","\n            ",198],["T_VARIABLE","$qtyAttr",199],"[",["T_CONSTANT_ENCAPSED_STRING","'joinType'",199],"]",["T_WHITESPACE","    ",199],"=",["T_WHITESPACE"," ",199],["T_CONSTANT_ENCAPSED_STRING","'inner'",199],";",["T_WHITESPACE","\n\n            ",199],["T_VARIABLE","$this",201],["T_OBJECT_OPERATOR","->",201],["T_STRING","setJoinField",201],"(",["T_VARIABLE","$qtyAttr",201],")",";",["T_WHITESPACE","\n        ",201],"}",["T_WHITESPACE","\n\n        ",202],["T_STRING","parent",204],["T_DOUBLE_COLON","::",204],["T_STRING","setFilter",204],"(",["T_VARIABLE","$attrFilterArray",204],",",["T_WHITESPACE"," ",204],["T_VARIABLE","$attrToDb",204],")",";",["T_WHITESPACE","\n\n        ",204],["T_IF","if",206],["T_WHITESPACE"," ",206],"(",["T_VARIABLE","$price",206],["T_WHITESPACE"," ",206],"=",["T_WHITESPACE"," ",206],["T_VARIABLE","$this",206],["T_OBJECT_OPERATOR","->",206],["T_STRING","getFieldValue",206],"(",["T_VARIABLE","$filters",206],",",["T_WHITESPACE"," ",206],["T_CONSTANT_ENCAPSED_STRING","'price'",206],")",")",["T_WHITESPACE"," ",206],"{",["T_WHITESPACE","\n            ",206],["T_VARIABLE","$this",207],["T_OBJECT_OPERATOR","->",207],["T_STRING","_filter",207],"[","]",["T_WHITESPACE"," ",207],"=",["T_WHITESPACE"," ",207],["T_ARRAY","array",207],"(",["T_WHITESPACE","\n                ",207],["T_CONSTANT_ENCAPSED_STRING","'attribute'",208],["T_WHITESPACE"," ",208],["T_DOUBLE_ARROW","=>",208],["T_WHITESPACE"," ",208],["T_CONSTANT_ENCAPSED_STRING","'price'",208],",",["T_WHITESPACE","\n                ",208],["T_CONSTANT_ENCAPSED_STRING","'from'",209],["T_WHITESPACE","      ",209],["T_DOUBLE_ARROW","=>",209],["T_WHITESPACE"," ",209],["T_VARIABLE","$price",209],"[",["T_CONSTANT_ENCAPSED_STRING","'from'",209],"]",",",["T_WHITESPACE","\n                ",209],["T_CONSTANT_ENCAPSED_STRING","'to'",210],["T_WHITESPACE","        ",210],["T_DOUBLE_ARROW","=>",210],["T_WHITESPACE"," ",210],["T_VARIABLE","$price",210],"[",["T_CONSTANT_ENCAPSED_STRING","'to'",210],"]",["T_WHITESPACE","\n            ",210],")",";",["T_WHITESPACE","\n            ",211],["T_VARIABLE","$this",212],["T_OBJECT_OPERATOR","->",212],["T_STRING","setJoinAttr",212],"(",["T_ARRAY","array",212],"(",["T_WHITESPACE","\n                ",212],["T_CONSTANT_ENCAPSED_STRING","'alias'",213],["T_WHITESPACE","     ",213],["T_DOUBLE_ARROW","=>",213],["T_WHITESPACE"," ",213],["T_CONSTANT_ENCAPSED_STRING","'price'",213],",",["T_WHITESPACE","\n                ",213],["T_CONSTANT_ENCAPSED_STRING","'attribute'",214],["T_WHITESPACE"," ",214],["T_DOUBLE_ARROW","=>",214],["T_WHITESPACE"," ",214],["T_CONSTANT_ENCAPSED_STRING","'catalog_product\/price'",214],",",["T_WHITESPACE","\n                ",214],["T_CONSTANT_ENCAPSED_STRING","'bind'",215],["T_WHITESPACE","      ",215],["T_DOUBLE_ARROW","=>",215],["T_WHITESPACE"," ",215],["T_CONSTANT_ENCAPSED_STRING","'entity_id'",215],",",["T_WHITESPACE","\n                ",215],["T_CONSTANT_ENCAPSED_STRING","'joinType'",216],["T_WHITESPACE","  ",216],["T_DOUBLE_ARROW","=>",216],["T_WHITESPACE"," ",216],["T_CONSTANT_ENCAPSED_STRING","'LEFT'",216],["T_WHITESPACE","\n            ",216],")",")",";",["T_WHITESPACE","\n        ",217],"}",["T_WHITESPACE","\n\n        ",218],["T_RETURN","return",220],["T_WHITESPACE"," ",220],["T_STRING","parent",220],["T_DOUBLE_COLON","::",220],["T_STRING","load",220],"(",")",";",["T_WHITESPACE","\n    ",220],"}",["T_WHITESPACE","\n\n    ",221],["T_DOC_COMMENT","\/**\n     * Retrieve product model cache\n     *\n     * @return Mage_Catalog_Model_Product\n     *\/",223],["T_WHITESPACE","\n    ",227],["T_PUBLIC","public",228],["T_WHITESPACE"," ",228],["T_FUNCTION","function",228],["T_WHITESPACE"," ",228],["T_STRING","getProductModel",228],"(",")",["T_WHITESPACE","\n    ",228],"{",["T_WHITESPACE","\n        ",229],["T_IF","if",230],["T_WHITESPACE"," ",230],"(",["T_STRING","is_null",230],"(",["T_VARIABLE","$this",230],["T_OBJECT_OPERATOR","->",230],["T_STRING","_productModel",230],")",")",["T_WHITESPACE"," ",230],"{",["T_WHITESPACE","\n            ",230],["T_VARIABLE","$productModel",231],["T_WHITESPACE"," ",231],"=",["T_WHITESPACE"," ",231],["T_STRING","Mage",231],["T_DOUBLE_COLON","::",231],["T_STRING","getModel",231],"(",["T_CONSTANT_ENCAPSED_STRING","'catalog\/product'",231],")",";",["T_WHITESPACE","\n            ",231],["T_VARIABLE","$this",232],["T_OBJECT_OPERATOR","->",232],["T_STRING","_productModel",232],["T_WHITESPACE"," ",232],"=",["T_WHITESPACE"," ",232],["T_STRING","Mage",232],["T_DOUBLE_COLON","::",232],["T_STRING","objects",232],"(",")",["T_OBJECT_OPERATOR","->",232],["T_STRING","save",232],"(",["T_VARIABLE","$productModel",232],")",";",["T_WHITESPACE","\n        ",232],"}",["T_WHITESPACE","\n        ",233],["T_RETURN","return",234],["T_WHITESPACE"," ",234],["T_STRING","Mage",234],["T_DOUBLE_COLON","::",234],["T_STRING","objects",234],"(",")",["T_OBJECT_OPERATOR","->",234],["T_STRING","load",234],"(",["T_VARIABLE","$this",234],["T_OBJECT_OPERATOR","->",234],["T_STRING","_productModel",234],")",";",["T_WHITESPACE","\n    ",234],"}",["T_WHITESPACE","\n\n    ",235],["T_DOC_COMMENT","\/**\n     * Retrieve eav entity attribute model\n     *\n     * @param string $code\n     * @return Mage_Eav_Model_Entity_Attribute\n     *\/",237],["T_WHITESPACE","\n    ",242],["T_PUBLIC","public",243],["T_WHITESPACE"," ",243],["T_FUNCTION","function",243],["T_WHITESPACE"," ",243],["T_STRING","getAttribute",243],"(",["T_VARIABLE","$code",243],")",["T_WHITESPACE","\n    ",243],"{",["T_WHITESPACE","\n        ",244],["T_IF","if",245],["T_WHITESPACE"," ",245],"(","!",["T_ISSET","isset",245],"(",["T_VARIABLE","$this",245],["T_OBJECT_OPERATOR","->",245],["T_STRING","_attributes",245],"[",["T_VARIABLE","$code",245],"]",")",")",["T_WHITESPACE"," ",245],"{",["T_WHITESPACE","\n            ",245],["T_VARIABLE","$this",246],["T_OBJECT_OPERATOR","->",246],["T_STRING","_attributes",246],"[",["T_VARIABLE","$code",246],"]",["T_WHITESPACE"," ",246],"=",["T_WHITESPACE"," ",246],["T_VARIABLE","$this",246],["T_OBJECT_OPERATOR","->",246],["T_STRING","getProductModel",246],"(",")",["T_OBJECT_OPERATOR","->",246],["T_STRING","getResource",246],"(",")",["T_OBJECT_OPERATOR","->",246],["T_STRING","getAttribute",246],"(",["T_VARIABLE","$code",246],")",";",["T_WHITESPACE","\n        ",246],"}",["T_WHITESPACE","\n        ",247],["T_IF","if",248],["T_WHITESPACE"," ",248],"(",["T_VARIABLE","$this",248],["T_OBJECT_OPERATOR","->",248],["T_STRING","_attributes",248],"[",["T_VARIABLE","$code",248],"]",["T_WHITESPACE"," ",248],["T_INSTANCEOF","instanceof",248],["T_WHITESPACE"," ",248],["T_STRING","Mage_Catalog_Model_Resource_Eav_Attribute",248],")",["T_WHITESPACE"," ",248],"{",["T_WHITESPACE","\n            ",248],["T_VARIABLE","$applyTo",249],["T_WHITESPACE"," ",249],"=",["T_WHITESPACE"," ",249],["T_VARIABLE","$this",249],["T_OBJECT_OPERATOR","->",249],["T_STRING","_attributes",249],"[",["T_VARIABLE","$code",249],"]",["T_OBJECT_OPERATOR","->",249],["T_STRING","getApplyTo",249],"(",")",";",["T_WHITESPACE","\n            ",249],["T_IF","if",250],["T_WHITESPACE"," ",250],"(",["T_VARIABLE","$applyTo",250],["T_WHITESPACE"," ",250],["T_BOOLEAN_AND","&&",250],["T_WHITESPACE"," ",250],"!",["T_STRING","in_array",250],"(",["T_VARIABLE","$this",250],["T_OBJECT_OPERATOR","->",250],["T_STRING","getProductModel",250],"(",")",["T_OBJECT_OPERATOR","->",250],["T_STRING","getTypeId",250],"(",")",",",["T_WHITESPACE"," ",250],["T_VARIABLE","$applyTo",250],")",")",["T_WHITESPACE"," ",250],"{",["T_WHITESPACE","\n                ",250],["T_RETURN","return",251],["T_WHITESPACE"," ",251],["T_STRING","false",251],";",["T_WHITESPACE","\n            ",251],"}",["T_WHITESPACE","\n        ",252],"}",["T_WHITESPACE","\n        ",253],["T_RETURN","return",254],["T_WHITESPACE"," ",254],["T_VARIABLE","$this",254],["T_OBJECT_OPERATOR","->",254],["T_STRING","_attributes",254],"[",["T_VARIABLE","$code",254],"]",";",["T_WHITESPACE","\n    ",254],"}",["T_WHITESPACE","\n\n    ",255],["T_DOC_COMMENT","\/**\n     * Retrieve product type collection array\n     *\n     * @return array\n     *\/",257],["T_WHITESPACE","\n    ",261],["T_PUBLIC","public",262],["T_WHITESPACE"," ",262],["T_FUNCTION","function",262],["T_WHITESPACE"," ",262],["T_STRING","getProductTypes",262],"(",")",["T_WHITESPACE","\n    ",262],"{",["T_WHITESPACE","\n        ",263],["T_IF","if",264],["T_WHITESPACE"," ",264],"(",["T_STRING","is_null",264],"(",["T_VARIABLE","$this",264],["T_OBJECT_OPERATOR","->",264],["T_STRING","_productTypes",264],")",")",["T_WHITESPACE"," ",264],"{",["T_WHITESPACE","\n            ",264],["T_VARIABLE","$this",265],["T_OBJECT_OPERATOR","->",265],["T_STRING","_productTypes",265],["T_WHITESPACE"," ",265],"=",["T_WHITESPACE"," ",265],["T_ARRAY","array",265],"(",")",";",["T_WHITESPACE","\n            ",265],["T_VARIABLE","$options",266],["T_WHITESPACE"," ",266],"=",["T_WHITESPACE"," ",266],["T_STRING","Mage",266],["T_DOUBLE_COLON","::",266],["T_STRING","getModel",266],"(",["T_CONSTANT_ENCAPSED_STRING","'catalog\/product_type'",266],")",["T_WHITESPACE","\n                ",266],["T_OBJECT_OPERATOR","->",267],["T_STRING","getOptionArray",267],"(",")",";",["T_WHITESPACE","\n            ",267],["T_FOREACH","foreach",268],["T_WHITESPACE"," ",268],"(",["T_VARIABLE","$options",268],["T_WHITESPACE"," ",268],["T_AS","as",268],["T_WHITESPACE"," ",268],["T_VARIABLE","$k",268],["T_WHITESPACE"," ",268],["T_DOUBLE_ARROW","=>",268],["T_WHITESPACE"," ",268],["T_VARIABLE","$v",268],")",["T_WHITESPACE"," ",268],"{",["T_WHITESPACE","\n                ",268],["T_VARIABLE","$this",269],["T_OBJECT_OPERATOR","->",269],["T_STRING","_productTypes",269],"[",["T_VARIABLE","$k",269],"]",["T_WHITESPACE"," ",269],"=",["T_WHITESPACE"," ",269],["T_VARIABLE","$k",269],";",["T_WHITESPACE","\n            ",269],"}",["T_WHITESPACE","\n        ",270],"}",["T_WHITESPACE","\n        ",271],["T_RETURN","return",272],["T_WHITESPACE"," ",272],["T_VARIABLE","$this",272],["T_OBJECT_OPERATOR","->",272],["T_STRING","_productTypes",272],";",["T_WHITESPACE","\n    ",272],"}",["T_WHITESPACE","\n\n    ",273],["T_DOC_COMMENT","\/**\n     * ReDefine Product Type Instance to Product\n     *\n     * @param Mage_Catalog_Model_Product $product\n     * @return Mage_Catalog_Model_Convert_Adapter_Product\n     *\/",275],["T_WHITESPACE","\n    ",280],["T_PUBLIC","public",281],["T_WHITESPACE"," ",281],["T_FUNCTION","function",281],["T_WHITESPACE"," ",281],["T_STRING","setProductTypeInstance",281],"(",["T_STRING","Mage_Catalog_Model_Product",281],["T_WHITESPACE"," ",281],["T_VARIABLE","$product",281],")",["T_WHITESPACE","\n    ",281],"{",["T_WHITESPACE","\n        ",282],["T_VARIABLE","$type",283],["T_WHITESPACE"," ",283],"=",["T_WHITESPACE"," ",283],["T_VARIABLE","$product",283],["T_OBJECT_OPERATOR","->",283],["T_STRING","getTypeId",283],"(",")",";",["T_WHITESPACE","\n        ",283],["T_IF","if",284],["T_WHITESPACE"," ",284],"(","!",["T_ISSET","isset",284],"(",["T_VARIABLE","$this",284],["T_OBJECT_OPERATOR","->",284],["T_STRING","_productTypeInstances",284],"[",["T_VARIABLE","$type",284],"]",")",")",["T_WHITESPACE"," ",284],"{",["T_WHITESPACE","\n            ",284],["T_VARIABLE","$this",285],["T_OBJECT_OPERATOR","->",285],["T_STRING","_productTypeInstances",285],"[",["T_VARIABLE","$type",285],"]",["T_WHITESPACE"," ",285],"=",["T_WHITESPACE"," ",285],["T_STRING","Mage",285],["T_DOUBLE_COLON","::",285],["T_STRING","getSingleton",285],"(",["T_CONSTANT_ENCAPSED_STRING","'catalog\/product_type'",285],")",["T_WHITESPACE","\n                ",285],["T_OBJECT_OPERATOR","->",286],["T_STRING","factory",286],"(",["T_VARIABLE","$product",286],",",["T_WHITESPACE"," ",286],["T_STRING","true",286],")",";",["T_WHITESPACE","\n        ",286],"}",["T_WHITESPACE","\n        ",287],["T_VARIABLE","$product",288],["T_OBJECT_OPERATOR","->",288],["T_STRING","setTypeInstance",288],"(",["T_VARIABLE","$this",288],["T_OBJECT_OPERATOR","->",288],["T_STRING","_productTypeInstances",288],"[",["T_VARIABLE","$type",288],"]",",",["T_WHITESPACE"," ",288],["T_STRING","true",288],")",";",["T_WHITESPACE","\n        ",288],["T_RETURN","return",289],["T_WHITESPACE"," ",289],["T_VARIABLE","$this",289],";",["T_WHITESPACE","\n    ",289],"}",["T_WHITESPACE","\n\n    ",290],["T_DOC_COMMENT","\/**\n     * Retrieve product attribute set collection array\n     *\n     * @return array\n     *\/",292],["T_WHITESPACE","\n    ",296],["T_PUBLIC","public",297],["T_WHITESPACE"," ",297],["T_FUNCTION","function",297],["T_WHITESPACE"," ",297],["T_STRING","getProductAttributeSets",297],"(",")",["T_WHITESPACE","\n    ",297],"{",["T_WHITESPACE","\n        ",298],["T_IF","if",299],["T_WHITESPACE"," ",299],"(",["T_STRING","is_null",299],"(",["T_VARIABLE","$this",299],["T_OBJECT_OPERATOR","->",299],["T_STRING","_productAttributeSets",299],")",")",["T_WHITESPACE"," ",299],"{",["T_WHITESPACE","\n            ",299],["T_VARIABLE","$this",300],["T_OBJECT_OPERATOR","->",300],["T_STRING","_productAttributeSets",300],["T_WHITESPACE"," ",300],"=",["T_WHITESPACE"," ",300],["T_ARRAY","array",300],"(",")",";",["T_WHITESPACE","\n\n            ",300],["T_VARIABLE","$entityTypeId",302],["T_WHITESPACE"," ",302],"=",["T_WHITESPACE"," ",302],["T_STRING","Mage",302],["T_DOUBLE_COLON","::",302],["T_STRING","getModel",302],"(",["T_CONSTANT_ENCAPSED_STRING","'eav\/entity'",302],")",["T_WHITESPACE","\n                ",302],["T_OBJECT_OPERATOR","->",303],["T_STRING","setType",303],"(",["T_CONSTANT_ENCAPSED_STRING","'catalog_product'",303],")",["T_WHITESPACE","\n                ",303],["T_OBJECT_OPERATOR","->",304],["T_STRING","getTypeId",304],"(",")",";",["T_WHITESPACE","\n            ",304],["T_VARIABLE","$collection",305],["T_WHITESPACE"," ",305],"=",["T_WHITESPACE"," ",305],["T_STRING","Mage",305],["T_DOUBLE_COLON","::",305],["T_STRING","getResourceModel",305],"(",["T_CONSTANT_ENCAPSED_STRING","'eav\/entity_attribute_set_collection'",305],")",["T_WHITESPACE","\n                ",305],["T_OBJECT_OPERATOR","->",306],["T_STRING","setEntityTypeFilter",306],"(",["T_VARIABLE","$entityTypeId",306],")",";",["T_WHITESPACE","\n            ",306],["T_FOREACH","foreach",307],["T_WHITESPACE"," ",307],"(",["T_VARIABLE","$collection",307],["T_WHITESPACE"," ",307],["T_AS","as",307],["T_WHITESPACE"," ",307],["T_VARIABLE","$set",307],")",["T_WHITESPACE"," ",307],"{",["T_WHITESPACE","\n                ",307],["T_VARIABLE","$this",308],["T_OBJECT_OPERATOR","->",308],["T_STRING","_productAttributeSets",308],"[",["T_VARIABLE","$set",308],["T_OBJECT_OPERATOR","->",308],["T_STRING","getAttributeSetName",308],"(",")","]",["T_WHITESPACE"," ",308],"=",["T_WHITESPACE"," ",308],["T_VARIABLE","$set",308],["T_OBJECT_OPERATOR","->",308],["T_STRING","getId",308],"(",")",";",["T_WHITESPACE","\n            ",308],"}",["T_WHITESPACE","\n        ",309],"}",["T_WHITESPACE","\n        ",310],["T_RETURN","return",311],["T_WHITESPACE"," ",311],["T_VARIABLE","$this",311],["T_OBJECT_OPERATOR","->",311],["T_STRING","_productAttributeSets",311],";",["T_WHITESPACE","\n    ",311],"}",["T_WHITESPACE","\n\n    ",312],["T_DOC_COMMENT","\/**\n     *  Init stores\n     *\/",314],["T_WHITESPACE","\n    ",316],["T_PROTECTED","protected",317],["T_WHITESPACE"," ",317],["T_FUNCTION","function",317],["T_WHITESPACE"," ",317],["T_STRING","_initStores",317],["T_WHITESPACE"," ",317],"(",")",["T_WHITESPACE","\n    ",317],"{",["T_WHITESPACE","\n        ",318],["T_IF","if",319],["T_WHITESPACE"," ",319],"(",["T_STRING","is_null",319],"(",["T_VARIABLE","$this",319],["T_OBJECT_OPERATOR","->",319],["T_STRING","_stores",319],")",")",["T_WHITESPACE"," ",319],"{",["T_WHITESPACE","\n            ",319],["T_VARIABLE","$this",320],["T_OBJECT_OPERATOR","->",320],["T_STRING","_stores",320],["T_WHITESPACE"," ",320],"=",["T_WHITESPACE"," ",320],["T_STRING","Mage",320],["T_DOUBLE_COLON","::",320],["T_STRING","app",320],"(",")",["T_OBJECT_OPERATOR","->",320],["T_STRING","getStores",320],"(",["T_STRING","true",320],",",["T_WHITESPACE"," ",320],["T_STRING","true",320],")",";",["T_WHITESPACE","\n            ",320],["T_FOREACH","foreach",321],["T_WHITESPACE"," ",321],"(",["T_VARIABLE","$this",321],["T_OBJECT_OPERATOR","->",321],["T_STRING","_stores",321],["T_WHITESPACE"," ",321],["T_AS","as",321],["T_WHITESPACE"," ",321],["T_VARIABLE","$code",321],["T_WHITESPACE"," ",321],["T_DOUBLE_ARROW","=>",321],["T_WHITESPACE"," ",321],["T_VARIABLE","$store",321],")",["T_WHITESPACE"," ",321],"{",["T_WHITESPACE","\n                ",321],["T_VARIABLE","$this",322],["T_OBJECT_OPERATOR","->",322],["T_STRING","_storesIdCode",322],"[",["T_VARIABLE","$store",322],["T_OBJECT_OPERATOR","->",322],["T_STRING","getId",322],"(",")","]",["T_WHITESPACE"," ",322],"=",["T_WHITESPACE"," ",322],["T_VARIABLE","$code",322],";",["T_WHITESPACE","\n            ",322],"}",["T_WHITESPACE","\n        ",323],"}",["T_WHITESPACE","\n    ",324],"}",["T_WHITESPACE","\n\n    ",325],["T_DOC_COMMENT","\/**\n     * Retrieve store object by code\n     *\n     * @param string $store\n     * @return Mage_Core_Model_Store\n     *\/",327],["T_WHITESPACE","\n    ",332],["T_PUBLIC","public",333],["T_WHITESPACE"," ",333],["T_FUNCTION","function",333],["T_WHITESPACE"," ",333],["T_STRING","getStoreByCode",333],"(",["T_VARIABLE","$store",333],")",["T_WHITESPACE","\n    ",333],"{",["T_WHITESPACE","\n        ",334],["T_VARIABLE","$this",335],["T_OBJECT_OPERATOR","->",335],["T_STRING","_initStores",335],"(",")",";",["T_WHITESPACE","\n        ",335],["T_DOC_COMMENT","\/**\n         * In single store mode all data should be saved as default\n         *\/",336],["T_WHITESPACE","\n        ",338],["T_IF","if",339],["T_WHITESPACE"," ",339],"(",["T_STRING","Mage",339],["T_DOUBLE_COLON","::",339],["T_STRING","app",339],"(",")",["T_OBJECT_OPERATOR","->",339],["T_STRING","isSingleStoreMode",339],"(",")",")",["T_WHITESPACE"," ",339],"{",["T_WHITESPACE","\n            ",339],["T_RETURN","return",340],["T_WHITESPACE"," ",340],["T_STRING","Mage",340],["T_DOUBLE_COLON","::",340],["T_STRING","app",340],"(",")",["T_OBJECT_OPERATOR","->",340],["T_STRING","getStore",340],"(",["T_STRING","Mage_Catalog_Model_Abstract",340],["T_DOUBLE_COLON","::",340],["T_STRING","DEFAULT_STORE_ID",340],")",";",["T_WHITESPACE","\n        ",340],"}",["T_WHITESPACE","\n\n        ",341],["T_IF","if",343],["T_WHITESPACE"," ",343],"(",["T_ISSET","isset",343],"(",["T_VARIABLE","$this",343],["T_OBJECT_OPERATOR","->",343],["T_STRING","_stores",343],"[",["T_VARIABLE","$store",343],"]",")",")",["T_WHITESPACE"," ",343],"{",["T_WHITESPACE","\n            ",343],["T_RETURN","return",344],["T_WHITESPACE"," ",344],["T_VARIABLE","$this",344],["T_OBJECT_OPERATOR","->",344],["T_STRING","_stores",344],"[",["T_VARIABLE","$store",344],"]",";",["T_WHITESPACE","\n        ",344],"}",["T_WHITESPACE","\n\n        ",345],["T_RETURN","return",347],["T_WHITESPACE"," ",347],["T_STRING","false",347],";",["T_WHITESPACE","\n    ",347],"}",["T_WHITESPACE","\n\n    ",348],["T_DOC_COMMENT","\/**\n     * Retrieve store object by code\n     *\n     * @param string $store\n     * @return Mage_Core_Model_Store\n     *\/",350],["T_WHITESPACE","\n    ",355],["T_PUBLIC","public",356],["T_WHITESPACE"," ",356],["T_FUNCTION","function",356],["T_WHITESPACE"," ",356],["T_STRING","getStoreById",356],"(",["T_VARIABLE","$id",356],")",["T_WHITESPACE","\n    ",356],"{",["T_WHITESPACE","\n        ",357],["T_VARIABLE","$this",358],["T_OBJECT_OPERATOR","->",358],["T_STRING","_initStores",358],"(",")",";",["T_WHITESPACE","\n        ",358],["T_DOC_COMMENT","\/**\n         * In single store mode all data should be saved as default\n         *\/",359],["T_WHITESPACE","\n        ",361],["T_IF","if",362],["T_WHITESPACE"," ",362],"(",["T_STRING","Mage",362],["T_DOUBLE_COLON","::",362],["T_STRING","app",362],"(",")",["T_OBJECT_OPERATOR","->",362],["T_STRING","isSingleStoreMode",362],"(",")",")",["T_WHITESPACE"," ",362],"{",["T_WHITESPACE","\n            ",362],["T_RETURN","return",363],["T_WHITESPACE"," ",363],["T_STRING","Mage",363],["T_DOUBLE_COLON","::",363],["T_STRING","app",363],"(",")",["T_OBJECT_OPERATOR","->",363],["T_STRING","getStore",363],"(",["T_STRING","Mage_Catalog_Model_Abstract",363],["T_DOUBLE_COLON","::",363],["T_STRING","DEFAULT_STORE_ID",363],")",";",["T_WHITESPACE","\n        ",363],"}",["T_WHITESPACE","\n\n        ",364],["T_IF","if",366],["T_WHITESPACE"," ",366],"(",["T_ISSET","isset",366],"(",["T_VARIABLE","$this",366],["T_OBJECT_OPERATOR","->",366],["T_STRING","_storesIdCode",366],"[",["T_VARIABLE","$id",366],"]",")",")",["T_WHITESPACE"," ",366],"{",["T_WHITESPACE","\n            ",366],["T_RETURN","return",367],["T_WHITESPACE"," ",367],["T_VARIABLE","$this",367],["T_OBJECT_OPERATOR","->",367],["T_STRING","getStoreByCode",367],"(",["T_VARIABLE","$this",367],["T_OBJECT_OPERATOR","->",367],["T_STRING","_storesIdCode",367],"[",["T_VARIABLE","$id",367],"]",")",";",["T_WHITESPACE","\n        ",367],"}",["T_WHITESPACE","\n\n        ",368],["T_RETURN","return",370],["T_WHITESPACE"," ",370],["T_STRING","false",370],";",["T_WHITESPACE","\n    ",370],"}",["T_WHITESPACE","\n\n    ",371],["T_PUBLIC","public",373],["T_WHITESPACE"," ",373],["T_FUNCTION","function",373],["T_WHITESPACE"," ",373],["T_STRING","parse",373],"(",")",["T_WHITESPACE","\n    ",373],"{",["T_WHITESPACE","\n        ",374],["T_VARIABLE","$batchModel",375],["T_WHITESPACE"," ",375],"=",["T_WHITESPACE"," ",375],["T_STRING","Mage",375],["T_DOUBLE_COLON","::",375],["T_STRING","getSingleton",375],"(",["T_CONSTANT_ENCAPSED_STRING","'dataflow\/batch'",375],")",";",["T_WHITESPACE","\n        ",375],["T_COMMENT","\/* @var $batchModel Mage_Dataflow_Model_Batch *\/",376],["T_WHITESPACE","\n\n        ",376],["T_VARIABLE","$batchImportModel",378],["T_WHITESPACE"," ",378],"=",["T_WHITESPACE"," ",378],["T_VARIABLE","$batchModel",378],["T_OBJECT_OPERATOR","->",378],["T_STRING","getBatchImportModel",378],"(",")",";",["T_WHITESPACE","\n        ",378],["T_VARIABLE","$importIds",379],["T_WHITESPACE"," ",379],"=",["T_WHITESPACE"," ",379],["T_VARIABLE","$batchImportModel",379],["T_OBJECT_OPERATOR","->",379],["T_STRING","getIdCollection",379],"(",")",";",["T_WHITESPACE","\n\n        ",379],["T_FOREACH","foreach",381],["T_WHITESPACE"," ",381],"(",["T_VARIABLE","$importIds",381],["T_WHITESPACE"," ",381],["T_AS","as",381],["T_WHITESPACE"," ",381],["T_VARIABLE","$importId",381],")",["T_WHITESPACE"," ",381],"{",["T_WHITESPACE","\n            ",381],["T_COMMENT","\/\/print '<pre>'.memory_get_usage().'<\/pre>';\n",382],["T_WHITESPACE","            ",383],["T_VARIABLE","$batchImportModel",383],["T_OBJECT_OPERATOR","->",383],["T_STRING","load",383],"(",["T_VARIABLE","$importId",383],")",";",["T_WHITESPACE","\n            ",383],["T_VARIABLE","$importData",384],["T_WHITESPACE"," ",384],"=",["T_WHITESPACE"," ",384],["T_VARIABLE","$batchImportModel",384],["T_OBJECT_OPERATOR","->",384],["T_STRING","getBatchData",384],"(",")",";",["T_WHITESPACE","\n\n            ",384],["T_VARIABLE","$this",386],["T_OBJECT_OPERATOR","->",386],["T_STRING","saveRow",386],"(",["T_VARIABLE","$importData",386],")",";",["T_WHITESPACE","\n        ",386],"}",["T_WHITESPACE","\n    ",387],"}",["T_WHITESPACE","\n\n    ",388],["T_PROTECTED","protected",390],["T_WHITESPACE"," ",390],["T_VARIABLE","$_productId",390],["T_WHITESPACE"," ",390],"=",["T_WHITESPACE"," ",390],["T_CONSTANT_ENCAPSED_STRING","''",390],";",["T_WHITESPACE","\n\n    ",390],["T_DOC_COMMENT","\/**\n     * Initialize convert adapter model for products collection\n     *\n     *\/",392],["T_WHITESPACE","\n    ",395],["T_PUBLIC","public",396],["T_WHITESPACE"," ",396],["T_FUNCTION","function",396],["T_WHITESPACE"," ",396],["T_STRING","__construct",396],"(",")",["T_WHITESPACE","\n    ",396],"{",["T_WHITESPACE","\n        ",397],["T_VARIABLE","$fieldset",398],["T_WHITESPACE"," ",398],"=",["T_WHITESPACE"," ",398],["T_STRING","Mage",398],["T_DOUBLE_COLON","::",398],["T_STRING","getConfig",398],"(",")",["T_OBJECT_OPERATOR","->",398],["T_STRING","getFieldset",398],"(",["T_CONSTANT_ENCAPSED_STRING","'catalog_product_dataflow'",398],",",["T_WHITESPACE"," ",398],["T_CONSTANT_ENCAPSED_STRING","'admin'",398],")",";",["T_WHITESPACE","\n        ",398],["T_FOREACH","foreach",399],["T_WHITESPACE"," ",399],"(",["T_VARIABLE","$fieldset",399],["T_WHITESPACE"," ",399],["T_AS","as",399],["T_WHITESPACE"," ",399],["T_VARIABLE","$code",399],["T_WHITESPACE"," ",399],["T_DOUBLE_ARROW","=>",399],["T_WHITESPACE"," ",399],["T_VARIABLE","$node",399],")",["T_WHITESPACE"," ",399],"{",["T_WHITESPACE","\n            ",399],["T_COMMENT","\/* @var $node Mage_Core_Model_Config_Element *\/",400],["T_WHITESPACE","\n            ",400],["T_IF","if",401],["T_WHITESPACE"," ",401],"(",["T_VARIABLE","$node",401],["T_OBJECT_OPERATOR","->",401],["T_STRING","is",401],"(",["T_CONSTANT_ENCAPSED_STRING","'inventory'",401],")",")",["T_WHITESPACE"," ",401],"{",["T_WHITESPACE","\n                ",401],["T_FOREACH","foreach",402],["T_WHITESPACE"," ",402],"(",["T_VARIABLE","$node",402],["T_OBJECT_OPERATOR","->",402],["T_STRING","product_type",402],["T_OBJECT_OPERATOR","->",402],["T_STRING","children",402],"(",")",["T_WHITESPACE"," ",402],["T_AS","as",402],["T_WHITESPACE"," ",402],["T_VARIABLE","$productType",402],")",["T_WHITESPACE"," ",402],"{",["T_WHITESPACE","\n                    ",402],["T_VARIABLE","$productType",403],["T_WHITESPACE"," ",403],"=",["T_WHITESPACE"," ",403],["T_VARIABLE","$productType",403],["T_OBJECT_OPERATOR","->",403],["T_STRING","getName",403],"(",")",";",["T_WHITESPACE","\n                    ",403],["T_VARIABLE","$this",404],["T_OBJECT_OPERATOR","->",404],["T_STRING","_inventoryFieldsProductTypes",404],"[",["T_VARIABLE","$productType",404],"]","[","]",["T_WHITESPACE"," ",404],"=",["T_WHITESPACE"," ",404],["T_VARIABLE","$code",404],";",["T_WHITESPACE","\n                    ",404],["T_IF","if",405],["T_WHITESPACE"," ",405],"(",["T_VARIABLE","$node",405],["T_OBJECT_OPERATOR","->",405],["T_STRING","is",405],"(",["T_CONSTANT_ENCAPSED_STRING","'use_config'",405],")",")",["T_WHITESPACE"," ",405],"{",["T_WHITESPACE","\n                        ",405],["T_VARIABLE","$this",406],["T_OBJECT_OPERATOR","->",406],["T_STRING","_inventoryFieldsProductTypes",406],"[",["T_VARIABLE","$productType",406],"]","[","]",["T_WHITESPACE"," ",406],"=",["T_WHITESPACE"," ",406],["T_CONSTANT_ENCAPSED_STRING","'use_config_'",406],["T_WHITESPACE"," ",406],".",["T_WHITESPACE"," ",406],["T_VARIABLE","$code",406],";",["T_WHITESPACE","\n                    ",406],"}",["T_WHITESPACE","\n                ",407],"}",["T_WHITESPACE","\n\n                ",408],["T_VARIABLE","$this",410],["T_OBJECT_OPERATOR","->",410],["T_STRING","_inventoryFields",410],"[","]",["T_WHITESPACE"," ",410],"=",["T_WHITESPACE"," ",410],["T_VARIABLE","$code",410],";",["T_WHITESPACE","\n                ",410],["T_IF","if",411],["T_WHITESPACE"," ",411],"(",["T_VARIABLE","$node",411],["T_OBJECT_OPERATOR","->",411],["T_STRING","is",411],"(",["T_CONSTANT_ENCAPSED_STRING","'use_config'",411],")",")",["T_WHITESPACE"," ",411],"{",["T_WHITESPACE","\n                    ",411],["T_VARIABLE","$this",412],["T_OBJECT_OPERATOR","->",412],["T_STRING","_inventoryFields",412],"[","]",["T_WHITESPACE"," ",412],"=",["T_WHITESPACE"," ",412],["T_CONSTANT_ENCAPSED_STRING","'use_config_'",412],".",["T_VARIABLE","$code",412],";",["T_WHITESPACE","\n                ",412],"}",["T_WHITESPACE","\n            ",413],"}",["T_WHITESPACE","\n            ",414],["T_IF","if",415],["T_WHITESPACE"," ",415],"(",["T_VARIABLE","$node",415],["T_OBJECT_OPERATOR","->",415],["T_STRING","is",415],"(",["T_CONSTANT_ENCAPSED_STRING","'required'",415],")",")",["T_WHITESPACE"," ",415],"{",["T_WHITESPACE","\n                ",415],["T_VARIABLE","$this",416],["T_OBJECT_OPERATOR","->",416],["T_STRING","_requiredFields",416],"[","]",["T_WHITESPACE"," ",416],"=",["T_WHITESPACE"," ",416],["T_VARIABLE","$code",416],";",["T_WHITESPACE","\n            ",416],"}",["T_WHITESPACE","\n            ",417],["T_IF","if",418],["T_WHITESPACE"," ",418],"(",["T_VARIABLE","$node",418],["T_OBJECT_OPERATOR","->",418],["T_STRING","is",418],"(",["T_CONSTANT_ENCAPSED_STRING","'ignore'",418],")",")",["T_WHITESPACE"," ",418],"{",["T_WHITESPACE","\n                ",418],["T_VARIABLE","$this",419],["T_OBJECT_OPERATOR","->",419],["T_STRING","_ignoreFields",419],"[","]",["T_WHITESPACE"," ",419],"=",["T_WHITESPACE"," ",419],["T_VARIABLE","$code",419],";",["T_WHITESPACE","\n            ",419],"}",["T_WHITESPACE","\n            ",420],["T_IF","if",421],["T_WHITESPACE"," ",421],"(",["T_VARIABLE","$node",421],["T_OBJECT_OPERATOR","->",421],["T_STRING","is",421],"(",["T_CONSTANT_ENCAPSED_STRING","'to_number'",421],")",")",["T_WHITESPACE"," ",421],"{",["T_WHITESPACE","\n                ",421],["T_VARIABLE","$this",422],["T_OBJECT_OPERATOR","->",422],["T_STRING","_toNumber",422],"[","]",["T_WHITESPACE"," ",422],"=",["T_WHITESPACE"," ",422],["T_VARIABLE","$code",422],";",["T_WHITESPACE","\n            ",422],"}",["T_WHITESPACE","\n        ",423],"}",["T_WHITESPACE","\n\n        ",424],["T_VARIABLE","$this",426],["T_OBJECT_OPERATOR","->",426],["T_STRING","setVar",426],"(",["T_CONSTANT_ENCAPSED_STRING","'entity_type'",426],",",["T_WHITESPACE"," ",426],["T_CONSTANT_ENCAPSED_STRING","'catalog\/product'",426],")",";",["T_WHITESPACE","\n        ",426],["T_IF","if",427],["T_WHITESPACE"," ",427],"(","!",["T_STRING","Mage",427],["T_DOUBLE_COLON","::",427],["T_STRING","registry",427],"(",["T_CONSTANT_ENCAPSED_STRING","'Object_Cache_Product'",427],")",")",["T_WHITESPACE"," ",427],"{",["T_WHITESPACE","\n            ",427],["T_VARIABLE","$this",428],["T_OBJECT_OPERATOR","->",428],["T_STRING","setProduct",428],"(",["T_STRING","Mage",428],["T_DOUBLE_COLON","::",428],["T_STRING","getModel",428],"(",["T_CONSTANT_ENCAPSED_STRING","'catalog\/product'",428],")",")",";",["T_WHITESPACE","\n        ",428],"}",["T_WHITESPACE","\n\n        ",429],["T_IF","if",431],["T_WHITESPACE"," ",431],"(","!",["T_STRING","Mage",431],["T_DOUBLE_COLON","::",431],["T_STRING","registry",431],"(",["T_CONSTANT_ENCAPSED_STRING","'Object_Cache_StockItem'",431],")",")",["T_WHITESPACE"," ",431],"{",["T_WHITESPACE","\n            ",431],["T_VARIABLE","$this",432],["T_OBJECT_OPERATOR","->",432],["T_STRING","setStockItem",432],"(",["T_STRING","Mage",432],["T_DOUBLE_COLON","::",432],["T_STRING","getModel",432],"(",["T_CONSTANT_ENCAPSED_STRING","'cataloginventory\/stock_item'",432],")",")",";",["T_WHITESPACE","\n        ",432],"}",["T_WHITESPACE","\n\n        ",433],["T_VARIABLE","$this",435],["T_OBJECT_OPERATOR","->",435],["T_STRING","_galleryBackendModel",435],["T_WHITESPACE"," ",435],"=",["T_WHITESPACE"," ",435],["T_VARIABLE","$this",435],["T_OBJECT_OPERATOR","->",435],["T_STRING","getAttribute",435],"(",["T_CONSTANT_ENCAPSED_STRING","'media_gallery'",435],")",["T_OBJECT_OPERATOR","->",435],["T_STRING","getBackend",435],"(",")",";",["T_WHITESPACE","\n    ",435],"}",["T_WHITESPACE","\n\n    ",436],["T_DOC_COMMENT","\/**\n     * Retrieve not loaded collection\n     *\n     * @param string $entityType\n     * @return Mage_Catalog_Model_Resource_Eav_Mysql4_Product_Collection\n     *\/",438],["T_WHITESPACE","\n    ",443],["T_PROTECTED","protected",444],["T_WHITESPACE"," ",444],["T_FUNCTION","function",444],["T_WHITESPACE"," ",444],["T_STRING","_getCollectionForLoad",444],"(",["T_VARIABLE","$entityType",444],")",["T_WHITESPACE","\n    ",444],"{",["T_WHITESPACE","\n        ",445],["T_VARIABLE","$collection",446],["T_WHITESPACE"," ",446],"=",["T_WHITESPACE"," ",446],["T_STRING","parent",446],["T_DOUBLE_COLON","::",446],["T_STRING","_getCollectionForLoad",446],"(",["T_VARIABLE","$entityType",446],")",["T_WHITESPACE","\n            ",446],["T_OBJECT_OPERATOR","->",447],["T_STRING","setStoreId",447],"(",["T_VARIABLE","$this",447],["T_OBJECT_OPERATOR","->",447],["T_STRING","getStoreId",447],"(",")",")",["T_WHITESPACE","\n            ",447],["T_OBJECT_OPERATOR","->",448],["T_STRING","addStoreFilter",448],"(",["T_VARIABLE","$this",448],["T_OBJECT_OPERATOR","->",448],["T_STRING","getStoreId",448],"(",")",")",";",["T_WHITESPACE","\n        ",448],["T_RETURN","return",449],["T_WHITESPACE"," ",449],["T_VARIABLE","$collection",449],";",["T_WHITESPACE","\n    ",449],"}",["T_WHITESPACE","\n\n    ",450],["T_PUBLIC","public",452],["T_WHITESPACE"," ",452],["T_FUNCTION","function",452],["T_WHITESPACE"," ",452],["T_STRING","setProduct",452],"(",["T_STRING","Mage_Catalog_Model_Product",452],["T_WHITESPACE"," ",452],["T_VARIABLE","$object",452],")",["T_WHITESPACE","\n    ",452],"{",["T_WHITESPACE","\n        ",453],["T_VARIABLE","$id",454],["T_WHITESPACE"," ",454],"=",["T_WHITESPACE"," ",454],["T_STRING","Mage",454],["T_DOUBLE_COLON","::",454],["T_STRING","objects",454],"(",")",["T_OBJECT_OPERATOR","->",454],["T_STRING","save",454],"(",["T_VARIABLE","$object",454],")",";",["T_WHITESPACE","\n        ",454],["T_COMMENT","\/\/$this->_product = $object;\n",455],["T_WHITESPACE","        ",456],["T_STRING","Mage",456],["T_DOUBLE_COLON","::",456],["T_STRING","register",456],"(",["T_CONSTANT_ENCAPSED_STRING","'Object_Cache_Product'",456],",",["T_WHITESPACE"," ",456],["T_VARIABLE","$id",456],")",";",["T_WHITESPACE","\n    ",456],"}",["T_WHITESPACE","\n\n    ",457],["T_PUBLIC","public",459],["T_WHITESPACE"," ",459],["T_FUNCTION","function",459],["T_WHITESPACE"," ",459],["T_STRING","getProduct",459],"(",")",["T_WHITESPACE","\n    ",459],"{",["T_WHITESPACE","\n        ",460],["T_RETURN","return",461],["T_WHITESPACE"," ",461],["T_STRING","Mage",461],["T_DOUBLE_COLON","::",461],["T_STRING","objects",461],"(",")",["T_OBJECT_OPERATOR","->",461],["T_STRING","load",461],"(",["T_STRING","Mage",461],["T_DOUBLE_COLON","::",461],["T_STRING","registry",461],"(",["T_CONSTANT_ENCAPSED_STRING","'Object_Cache_Product'",461],")",")",";",["T_WHITESPACE","\n    ",461],"}",["T_WHITESPACE","\n\n    ",462],["T_PUBLIC","public",464],["T_WHITESPACE"," ",464],["T_FUNCTION","function",464],["T_WHITESPACE"," ",464],["T_STRING","setStockItem",464],"(",["T_STRING","Mage_CatalogInventory_Model_Stock_Item",464],["T_WHITESPACE"," ",464],["T_VARIABLE","$object",464],")",["T_WHITESPACE","\n    ",464],"{",["T_WHITESPACE","\n        ",465],["T_VARIABLE","$id",466],["T_WHITESPACE"," ",466],"=",["T_WHITESPACE"," ",466],["T_STRING","Mage",466],["T_DOUBLE_COLON","::",466],["T_STRING","objects",466],"(",")",["T_OBJECT_OPERATOR","->",466],["T_STRING","save",466],"(",["T_VARIABLE","$object",466],")",";",["T_WHITESPACE","\n        ",466],["T_STRING","Mage",467],["T_DOUBLE_COLON","::",467],["T_STRING","register",467],"(",["T_CONSTANT_ENCAPSED_STRING","'Object_Cache_StockItem'",467],",",["T_WHITESPACE"," ",467],["T_VARIABLE","$id",467],")",";",["T_WHITESPACE","\n    ",467],"}",["T_WHITESPACE","\n\n    ",468],["T_PUBLIC","public",470],["T_WHITESPACE"," ",470],["T_FUNCTION","function",470],["T_WHITESPACE"," ",470],["T_STRING","getStockItem",470],"(",")",["T_WHITESPACE","\n    ",470],"{",["T_WHITESPACE","\n        ",471],["T_RETURN","return",472],["T_WHITESPACE"," ",472],["T_STRING","Mage",472],["T_DOUBLE_COLON","::",472],["T_STRING","objects",472],"(",")",["T_OBJECT_OPERATOR","->",472],["T_STRING","load",472],"(",["T_STRING","Mage",472],["T_DOUBLE_COLON","::",472],["T_STRING","registry",472],"(",["T_CONSTANT_ENCAPSED_STRING","'Object_Cache_StockItem'",472],")",")",";",["T_WHITESPACE","\n    ",472],"}",["T_WHITESPACE","\n\n    ",473],["T_PUBLIC","public",475],["T_WHITESPACE"," ",475],["T_FUNCTION","function",475],["T_WHITESPACE"," ",475],["T_STRING","save",475],"(",")",["T_WHITESPACE","\n    ",475],"{",["T_WHITESPACE","\n        ",476],["T_VARIABLE","$stores",477],["T_WHITESPACE"," ",477],"=",["T_WHITESPACE"," ",477],["T_ARRAY","array",477],"(",")",";",["T_WHITESPACE","\n        ",477],["T_FOREACH","foreach",478],["T_WHITESPACE"," ",478],"(",["T_STRING","Mage",478],["T_DOUBLE_COLON","::",478],["T_STRING","getConfig",478],"(",")",["T_OBJECT_OPERATOR","->",478],["T_STRING","getNode",478],"(",["T_CONSTANT_ENCAPSED_STRING","'stores'",478],")",["T_OBJECT_OPERATOR","->",478],["T_STRING","children",478],"(",")",["T_WHITESPACE"," ",478],["T_AS","as",478],["T_WHITESPACE"," ",478],["T_VARIABLE","$storeNode",478],")",["T_WHITESPACE"," ",478],"{",["T_WHITESPACE","\n            ",478],["T_VARIABLE","$stores",479],"[",["T_INT_CAST","(int)",479],["T_VARIABLE","$storeNode",479],["T_OBJECT_OPERATOR","->",479],["T_STRING","system",479],["T_OBJECT_OPERATOR","->",479],["T_STRING","store",479],["T_OBJECT_OPERATOR","->",479],["T_STRING","id",479],"]",["T_WHITESPACE"," ",479],"=",["T_WHITESPACE"," ",479],["T_VARIABLE","$storeNode",479],["T_OBJECT_OPERATOR","->",479],["T_STRING","getName",479],"(",")",";",["T_WHITESPACE","\n        ",479],"}",["T_WHITESPACE","\n\n        ",480],["T_VARIABLE","$collections",482],["T_WHITESPACE"," ",482],"=",["T_WHITESPACE"," ",482],["T_VARIABLE","$this",482],["T_OBJECT_OPERATOR","->",482],["T_STRING","getData",482],"(",")",";",["T_WHITESPACE","\n        ",482],["T_IF","if",483],["T_WHITESPACE"," ",483],"(",["T_VARIABLE","$collections",483],["T_WHITESPACE"," ",483],["T_INSTANCEOF","instanceof",483],["T_WHITESPACE"," ",483],["T_STRING","Mage_Catalog_Model_Entity_Product_Collection",483],")",["T_WHITESPACE"," ",483],"{",["T_WHITESPACE","\n            ",483],["T_VARIABLE","$collections",484],["T_WHITESPACE"," ",484],"=",["T_WHITESPACE"," ",484],["T_ARRAY","array",484],"(",["T_VARIABLE","$collections",484],["T_OBJECT_OPERATOR","->",484],["T_STRING","getEntity",484],"(",")",["T_OBJECT_OPERATOR","->",484],["T_STRING","getStoreId",484],"(",")",["T_DOUBLE_ARROW","=>",484],["T_VARIABLE","$collections",484],")",";",["T_WHITESPACE","\n        ",484],"}",["T_WHITESPACE"," ",485],["T_ELSEIF","elseif",485],["T_WHITESPACE"," ",485],"(","!",["T_STRING","is_array",485],"(",["T_VARIABLE","$collections",485],")",")",["T_WHITESPACE"," ",485],"{",["T_WHITESPACE","\n            ",485],["T_VARIABLE","$this",486],["T_OBJECT_OPERATOR","->",486],["T_STRING","addException",486],"(",["T_WHITESPACE","\n                ",486],["T_STRING","Mage",487],["T_DOUBLE_COLON","::",487],["T_STRING","helper",487],"(",["T_CONSTANT_ENCAPSED_STRING","'catalog'",487],")",["T_OBJECT_OPERATOR","->",487],["T_STRING","__",487],"(",["T_CONSTANT_ENCAPSED_STRING","'No product collections found.'",487],")",",",["T_WHITESPACE","\n                ",487],["T_STRING","Mage_Dataflow_Model_Convert_Exception",488],["T_DOUBLE_COLON","::",488],["T_STRING","FATAL",488],["T_WHITESPACE","\n            ",488],")",";",["T_WHITESPACE","\n        ",489],"}",["T_WHITESPACE","\n\n        ",490],["T_VARIABLE","$stockItems",492],["T_WHITESPACE"," ",492],"=",["T_WHITESPACE"," ",492],["T_STRING","Mage",492],["T_DOUBLE_COLON","::",492],["T_STRING","registry",492],"(",["T_CONSTANT_ENCAPSED_STRING","'current_imported_inventory'",492],")",";",["T_WHITESPACE","\n        ",492],["T_IF","if",493],["T_WHITESPACE"," ",493],"(",["T_VARIABLE","$collections",493],")",["T_WHITESPACE"," ",493],["T_FOREACH","foreach",493],["T_WHITESPACE"," ",493],"(",["T_VARIABLE","$collections",493],["T_WHITESPACE"," ",493],["T_AS","as",493],["T_WHITESPACE"," ",493],["T_VARIABLE","$storeId",493],["T_DOUBLE_ARROW","=>",493],["T_VARIABLE","$collection",493],")",["T_WHITESPACE"," ",493],"{",["T_WHITESPACE","\n            ",493],["T_VARIABLE","$this",494],["T_OBJECT_OPERATOR","->",494],["T_STRING","addException",494],"(",["T_STRING","Mage",494],["T_DOUBLE_COLON","::",494],["T_STRING","helper",494],"(",["T_CONSTANT_ENCAPSED_STRING","'catalog'",494],")",["T_OBJECT_OPERATOR","->",494],["T_STRING","__",494],"(",["T_CONSTANT_ENCAPSED_STRING","'Records for \"%s\" store found.'",494],",",["T_WHITESPACE"," ",494],["T_VARIABLE","$stores",494],"[",["T_VARIABLE","$storeId",494],"]",")",")",";",["T_WHITESPACE","\n\n            ",494],["T_IF","if",496],["T_WHITESPACE"," ",496],"(","!",["T_VARIABLE","$collection",496],["T_WHITESPACE"," ",496],["T_INSTANCEOF","instanceof",496],["T_WHITESPACE"," ",496],["T_STRING","Mage_Catalog_Model_Entity_Product_Collection",496],")",["T_WHITESPACE"," ",496],"{",["T_WHITESPACE","\n                ",496],["T_VARIABLE","$this",497],["T_OBJECT_OPERATOR","->",497],["T_STRING","addException",497],"(",["T_WHITESPACE","\n                    ",497],["T_STRING","Mage",498],["T_DOUBLE_COLON","::",498],["T_STRING","helper",498],"(",["T_CONSTANT_ENCAPSED_STRING","'catalog'",498],")",["T_OBJECT_OPERATOR","->",498],["T_STRING","__",498],"(",["T_CONSTANT_ENCAPSED_STRING","'Product collection expected.'",498],")",",",["T_WHITESPACE","\n                    ",498],["T_STRING","Mage_Dataflow_Model_Convert_Exception",499],["T_DOUBLE_COLON","::",499],["T_STRING","FATAL",499],["T_WHITESPACE","\n                ",499],")",";",["T_WHITESPACE","\n            ",500],"}",["T_WHITESPACE","\n            ",501],["T_TRY","try",502],["T_WHITESPACE"," ",502],"{",["T_WHITESPACE","\n                ",502],["T_VARIABLE","$i",503],["T_WHITESPACE"," ",503],"=",["T_WHITESPACE"," ",503],["T_LNUMBER","0",503],";",["T_WHITESPACE","\n                ",503],["T_FOREACH","foreach",504],["T_WHITESPACE"," ",504],"(",["T_VARIABLE","$collection",504],["T_OBJECT_OPERATOR","->",504],["T_STRING","getIterator",504],"(",")",["T_WHITESPACE"," ",504],["T_AS","as",504],["T_WHITESPACE"," ",504],["T_VARIABLE","$model",504],")",["T_WHITESPACE"," ",504],"{",["T_WHITESPACE","\n                    ",504],["T_VARIABLE","$new",505],["T_WHITESPACE"," ",505],"=",["T_WHITESPACE"," ",505],["T_STRING","false",505],";",["T_WHITESPACE","\n                    ",505],["T_COMMENT","\/\/ if product is new, create default values first\n",506],["T_WHITESPACE","                    ",507],["T_IF","if",507],["T_WHITESPACE"," ",507],"(","!",["T_VARIABLE","$model",507],["T_OBJECT_OPERATOR","->",507],["T_STRING","getId",507],"(",")",")",["T_WHITESPACE"," ",507],"{",["T_WHITESPACE","\n                        ",507],["T_VARIABLE","$new",508],["T_WHITESPACE"," ",508],"=",["T_WHITESPACE"," ",508],["T_STRING","true",508],";",["T_WHITESPACE","\n                        ",508],["T_VARIABLE","$model",509],["T_OBJECT_OPERATOR","->",509],["T_STRING","save",509],"(",")",";",["T_WHITESPACE","\n\n                        ",509],["T_COMMENT","\/\/ if new product and then store is not default\n",511],["T_WHITESPACE","                        ",512],["T_COMMENT","\/\/ we duplicate product as default product with store_id -\n",512],["T_WHITESPACE","                        ",513],["T_IF","if",513],["T_WHITESPACE"," ",513],"(",["T_LNUMBER","0",513],["T_WHITESPACE"," ",513],["T_IS_NOT_IDENTICAL","!==",513],["T_WHITESPACE"," ",513],["T_VARIABLE","$storeId",513],["T_WHITESPACE"," ",513],")",["T_WHITESPACE"," ",513],"{",["T_WHITESPACE","\n                            ",513],["T_VARIABLE","$data",514],["T_WHITESPACE"," ",514],"=",["T_WHITESPACE"," ",514],["T_VARIABLE","$model",514],["T_OBJECT_OPERATOR","->",514],["T_STRING","getData",514],"(",")",";",["T_WHITESPACE","\n                            ",514],["T_VARIABLE","$default",515],["T_WHITESPACE"," ",515],"=",["T_WHITESPACE"," ",515],["T_STRING","Mage",515],["T_DOUBLE_COLON","::",515],["T_STRING","getModel",515],"(",["T_CONSTANT_ENCAPSED_STRING","'catalog\/product'",515],")",";",["T_WHITESPACE","\n                            ",515],["T_VARIABLE","$default",516],["T_OBJECT_OPERATOR","->",516],["T_STRING","setData",516],"(",["T_VARIABLE","$data",516],")",";",["T_WHITESPACE","\n                            ",516],["T_VARIABLE","$default",517],["T_OBJECT_OPERATOR","->",517],["T_STRING","setStoreId",517],"(",["T_LNUMBER","0",517],")",";",["T_WHITESPACE","\n                            ",517],["T_VARIABLE","$default",518],["T_OBJECT_OPERATOR","->",518],["T_STRING","save",518],"(",")",";",["T_WHITESPACE","\n                            ",518],["T_UNSET","unset",519],"(",["T_VARIABLE","$default",519],")",";",["T_WHITESPACE","\n                        ",519],"}",["T_WHITESPACE"," ",520],["T_COMMENT","\/\/ end\n",520],["T_WHITESPACE","\n                        ",521],["T_COMMENT","#Mage::getResourceSingleton('catalog_entity\/convert')->addProductToStore($model->getId(), 0);\n",522],["T_WHITESPACE","                    ",523],"}",["T_WHITESPACE","\n                    ",523],["T_IF","if",524],["T_WHITESPACE"," ",524],"(","!",["T_VARIABLE","$new",524],["T_WHITESPACE"," ",524],["T_BOOLEAN_OR","||",524],["T_WHITESPACE"," ",524],["T_LNUMBER","0",524],["T_IS_NOT_IDENTICAL","!==",524],["T_VARIABLE","$storeId",524],")",["T_WHITESPACE"," ",524],"{",["T_WHITESPACE","\n                        ",524],["T_IF","if",525],["T_WHITESPACE"," ",525],"(",["T_LNUMBER","0",525],["T_IS_NOT_IDENTICAL","!==",525],["T_VARIABLE","$storeId",525],")",["T_WHITESPACE"," ",525],"{",["T_WHITESPACE","\n                            ",525],["T_STRING","Mage",526],["T_DOUBLE_COLON","::",526],["T_STRING","getResourceSingleton",526],"(",["T_CONSTANT_ENCAPSED_STRING","'catalog_entity\/convert'",526],")",["T_OBJECT_OPERATOR","->",526],["T_STRING","addProductToStore",526],"(",["T_WHITESPACE","\n                                ",526],["T_VARIABLE","$model",527],["T_OBJECT_OPERATOR","->",527],["T_STRING","getId",527],"(",")",",",["T_WHITESPACE","\n                                ",527],["T_VARIABLE","$storeId",528],["T_WHITESPACE","\n                            ",528],")",";",["T_WHITESPACE","\n                        ",529],"}",["T_WHITESPACE","\n                        ",530],["T_VARIABLE","$model",531],["T_OBJECT_OPERATOR","->",531],["T_STRING","save",531],"(",")",";",["T_WHITESPACE","\n                    ",531],"}",["T_WHITESPACE","\n\n                    ",532],["T_IF","if",534],["T_WHITESPACE"," ",534],"(",["T_ISSET","isset",534],"(",["T_VARIABLE","$stockItems",534],"[",["T_VARIABLE","$model",534],["T_OBJECT_OPERATOR","->",534],["T_STRING","getSku",534],"(",")","]",")",["T_WHITESPACE"," ",534],["T_BOOLEAN_AND","&&",534],["T_WHITESPACE"," ",534],["T_VARIABLE","$stock",534],["T_WHITESPACE"," ",534],"=",["T_WHITESPACE"," ",534],["T_VARIABLE","$stockItems",534],"[",["T_VARIABLE","$model",534],["T_OBJECT_OPERATOR","->",534],["T_STRING","getSku",534],"(",")","]",")",["T_WHITESPACE"," ",534],"{",["T_WHITESPACE","\n                        ",534],["T_VARIABLE","$stockItem",535],["T_WHITESPACE"," ",535],"=",["T_WHITESPACE"," ",535],["T_STRING","Mage",535],["T_DOUBLE_COLON","::",535],["T_STRING","getModel",535],"(",["T_CONSTANT_ENCAPSED_STRING","'cataloginventory\/stock_item'",535],")",["T_OBJECT_OPERATOR","->",535],["T_STRING","loadByProduct",535],"(",["T_VARIABLE","$model",535],["T_OBJECT_OPERATOR","->",535],["T_STRING","getId",535],"(",")",")",";",["T_WHITESPACE","\n                        ",535],["T_VARIABLE","$stockItemId",536],["T_WHITESPACE"," ",536],"=",["T_WHITESPACE"," ",536],["T_VARIABLE","$stockItem",536],["T_OBJECT_OPERATOR","->",536],["T_STRING","getId",536],"(",")",";",["T_WHITESPACE","\n\n                        ",536],["T_IF","if",538],["T_WHITESPACE"," ",538],"(","!",["T_VARIABLE","$stockItemId",538],")",["T_WHITESPACE"," ",538],"{",["T_WHITESPACE","\n                            ",538],["T_VARIABLE","$stockItem",539],["T_OBJECT_OPERATOR","->",539],["T_STRING","setData",539],"(",["T_CONSTANT_ENCAPSED_STRING","'product_id'",539],",",["T_WHITESPACE"," ",539],["T_VARIABLE","$model",539],["T_OBJECT_OPERATOR","->",539],["T_STRING","getId",539],"(",")",")",";",["T_WHITESPACE","\n                            ",539],["T_VARIABLE","$stockItem",540],["T_OBJECT_OPERATOR","->",540],["T_STRING","setData",540],"(",["T_CONSTANT_ENCAPSED_STRING","'stock_id'",540],",",["T_WHITESPACE"," ",540],["T_LNUMBER","1",540],")",";",["T_WHITESPACE","\n                            ",540],["T_VARIABLE","$data",541],["T_WHITESPACE"," ",541],"=",["T_WHITESPACE"," ",541],["T_ARRAY","array",541],"(",")",";",["T_WHITESPACE","\n                        ",541],"}",["T_WHITESPACE"," ",542],["T_ELSE","else",542],["T_WHITESPACE"," ",542],"{",["T_WHITESPACE","\n                            ",542],["T_VARIABLE","$data",543],["T_WHITESPACE"," ",543],"=",["T_WHITESPACE"," ",543],["T_VARIABLE","$stockItem",543],["T_OBJECT_OPERATOR","->",543],["T_STRING","getData",543],"(",")",";",["T_WHITESPACE","\n                        ",543],"}",["T_WHITESPACE","\n\n                        ",544],["T_FOREACH","foreach",546],"(",["T_VARIABLE","$stock",546],["T_WHITESPACE"," ",546],["T_AS","as",546],["T_WHITESPACE"," ",546],["T_VARIABLE","$field",546],["T_WHITESPACE"," ",546],["T_DOUBLE_ARROW","=>",546],["T_WHITESPACE"," ",546],["T_VARIABLE","$value",546],")",["T_WHITESPACE"," ",546],"{",["T_WHITESPACE","\n                            ",546],["T_IF","if",547],["T_WHITESPACE"," ",547],"(","!",["T_VARIABLE","$stockItemId",547],")",["T_WHITESPACE"," ",547],"{",["T_WHITESPACE","\n                                ",547],["T_IF","if",548],["T_WHITESPACE"," ",548],"(",["T_STRING","in_array",548],"(",["T_VARIABLE","$field",548],",",["T_WHITESPACE"," ",548],["T_VARIABLE","$this",548],["T_OBJECT_OPERATOR","->",548],["T_STRING","_configs",548],")",")",["T_WHITESPACE"," ",548],"{",["T_WHITESPACE","\n                                    ",548],["T_VARIABLE","$stockItem",549],["T_OBJECT_OPERATOR","->",549],["T_STRING","setData",549],"(",["T_CONSTANT_ENCAPSED_STRING","'use_config_'",549],".",["T_VARIABLE","$field",549],",",["T_WHITESPACE"," ",549],["T_LNUMBER","0",549],")",";",["T_WHITESPACE","\n                                ",549],"}",["T_WHITESPACE","\n                                ",550],["T_VARIABLE","$stockItem",551],["T_OBJECT_OPERATOR","->",551],["T_STRING","setData",551],"(",["T_VARIABLE","$field",551],",",["T_WHITESPACE"," ",551],["T_VARIABLE","$value",551],"?",["T_VARIABLE","$value",551],":",["T_LNUMBER","0",551],")",";",["T_WHITESPACE","\n                            ",551],"}",["T_WHITESPACE"," ",552],["T_ELSE","else",552],["T_WHITESPACE"," ",552],"{",["T_WHITESPACE","\n\n                                ",552],["T_IF","if",554],["T_WHITESPACE"," ",554],"(",["T_STRING","in_array",554],"(",["T_VARIABLE","$field",554],",",["T_WHITESPACE"," ",554],["T_VARIABLE","$this",554],["T_OBJECT_OPERATOR","->",554],["T_STRING","_configs",554],")",")",["T_WHITESPACE"," ",554],"{",["T_WHITESPACE","\n                                    ",554],["T_IF","if",555],["T_WHITESPACE"," ",555],"(",["T_VARIABLE","$data",555],"[",["T_CONSTANT_ENCAPSED_STRING","'use_config_'",555],".",["T_VARIABLE","$field",555],"]",["T_WHITESPACE"," ",555],["T_IS_EQUAL","==",555],["T_WHITESPACE"," ",555],["T_LNUMBER","0",555],")",["T_WHITESPACE"," ",555],"{",["T_WHITESPACE","\n                                        ",555],["T_VARIABLE","$stockItem",556],["T_OBJECT_OPERATOR","->",556],["T_STRING","setData",556],"(",["T_VARIABLE","$field",556],",",["T_WHITESPACE"," ",556],["T_VARIABLE","$value",556],"?",["T_VARIABLE","$value",556],":",["T_LNUMBER","0",556],")",";",["T_WHITESPACE","\n                                    ",556],"}",["T_WHITESPACE","\n                                ",557],"}",["T_WHITESPACE"," ",558],["T_ELSE","else",558],["T_WHITESPACE"," ",558],"{",["T_WHITESPACE","\n                                    ",558],["T_VARIABLE","$stockItem",559],["T_OBJECT_OPERATOR","->",559],["T_STRING","setData",559],"(",["T_VARIABLE","$field",559],",",["T_WHITESPACE"," ",559],["T_VARIABLE","$value",559],"?",["T_VARIABLE","$value",559],":",["T_LNUMBER","0",559],")",";",["T_WHITESPACE","\n                                ",559],"}",["T_WHITESPACE","\n                            ",560],"}",["T_WHITESPACE","\n                        ",561],"}",["T_WHITESPACE","\n                        ",562],["T_VARIABLE","$stockItem",563],["T_OBJECT_OPERATOR","->",563],["T_STRING","save",563],"(",")",";",["T_WHITESPACE","\n                        ",563],["T_UNSET","unset",564],"(",["T_VARIABLE","$data",564],")",";",["T_WHITESPACE","\n                        ",564],["T_UNSET","unset",565],"(",["T_VARIABLE","$stockItem",565],")",";",["T_WHITESPACE","\n                        ",565],["T_UNSET","unset",566],"(",["T_VARIABLE","$stockItemId",566],")",";",["T_WHITESPACE","\n                    ",566],"}",["T_WHITESPACE","\n                    ",567],["T_UNSET","unset",568],"(",["T_VARIABLE","$model",568],")",";",["T_WHITESPACE","\n                    ",568],["T_VARIABLE","$i",569],["T_INC","++",569],";",["T_WHITESPACE","\n                ",569],"}",["T_WHITESPACE","\n                ",570],["T_VARIABLE","$this",571],["T_OBJECT_OPERATOR","->",571],["T_STRING","addException",571],"(",["T_STRING","Mage",571],["T_DOUBLE_COLON","::",571],["T_STRING","helper",571],"(",["T_CONSTANT_ENCAPSED_STRING","'catalog'",571],")",["T_OBJECT_OPERATOR","->",571],["T_STRING","__",571],"(",["T_CONSTANT_ENCAPSED_STRING","\"Saved %d record(s)\"",571],",",["T_WHITESPACE"," ",571],["T_VARIABLE","$i",571],")",")",";",["T_WHITESPACE","\n            ",571],"}",["T_WHITESPACE"," ",572],["T_CATCH","catch",572],["T_WHITESPACE"," ",572],"(",["T_STRING","Exception",572],["T_WHITESPACE"," ",572],["T_VARIABLE","$e",572],")",["T_WHITESPACE"," ",572],"{",["T_WHITESPACE","\n                ",572],["T_IF","if",573],["T_WHITESPACE"," ",573],"(","!",["T_VARIABLE","$e",573],["T_WHITESPACE"," ",573],["T_INSTANCEOF","instanceof",573],["T_WHITESPACE"," ",573],["T_STRING","Mage_Dataflow_Model_Convert_Exception",573],")",["T_WHITESPACE"," ",573],"{",["T_WHITESPACE","\n                    ",573],["T_VARIABLE","$this",574],["T_OBJECT_OPERATOR","->",574],["T_STRING","addException",574],"(",["T_WHITESPACE","\n                        ",574],["T_STRING","Mage",575],["T_DOUBLE_COLON","::",575],["T_STRING","helper",575],"(",["T_CONSTANT_ENCAPSED_STRING","'catalog'",575],")",["T_OBJECT_OPERATOR","->",575],["T_STRING","__",575],"(",["T_CONSTANT_ENCAPSED_STRING","'An error occurred while saving the collection, aborting. Error message: %s'",575],",",["T_WHITESPACE"," ",575],["T_VARIABLE","$e",575],["T_OBJECT_OPERATOR","->",575],["T_STRING","getMessage",575],"(",")",")",",",["T_WHITESPACE","\n                        ",575],["T_STRING","Mage_Dataflow_Model_Convert_Exception",576],["T_DOUBLE_COLON","::",576],["T_STRING","FATAL",576],["T_WHITESPACE","\n                    ",576],")",";",["T_WHITESPACE","\n                ",577],"}",["T_WHITESPACE","\n            ",578],"}",["T_WHITESPACE","\n        ",579],"}",["T_WHITESPACE","\n        ",580],["T_UNSET","unset",581],"(",["T_VARIABLE","$collections",581],")",";",["T_WHITESPACE","\n\n        ",581],["T_RETURN","return",583],["T_WHITESPACE"," ",583],["T_VARIABLE","$this",583],";",["T_WHITESPACE","\n    ",583],"}",["T_WHITESPACE","\n\n    ",584],["T_DOC_COMMENT","\/**\n     * Save data row with gallery image info only\n     *\n     * @param Mage_Catalog_Model_Product $product\n     * @param array $importData\n     *\n     * @return Mage_Catalog_Model_Convert_Adapter_Product\n     *\/",586],["T_WHITESPACE","\n    ",593],["T_PUBLIC","public",594],["T_WHITESPACE"," ",594],["T_FUNCTION","function",594],["T_WHITESPACE"," ",594],["T_STRING","saveImageDataRow",594],"(",["T_VARIABLE","$product",594],",",["T_WHITESPACE"," ",594],["T_VARIABLE","$importData",594],")",["T_WHITESPACE","\n    ",594],"{",["T_WHITESPACE","\n        ",595],["T_VARIABLE","$imageData",596],["T_WHITESPACE"," ",596],"=",["T_WHITESPACE"," ",596],["T_ARRAY","array",596],"(",["T_WHITESPACE","\n            ",596],["T_CONSTANT_ENCAPSED_STRING","'label'",597],["T_WHITESPACE","         ",597],["T_DOUBLE_ARROW","=>",597],["T_WHITESPACE"," ",597],["T_VARIABLE","$importData",597],"[",["T_CONSTANT_ENCAPSED_STRING","'_media_lable'",597],"]",",",["T_WHITESPACE","\n            ",597],["T_CONSTANT_ENCAPSED_STRING","'position'",598],["T_WHITESPACE","      ",598],["T_DOUBLE_ARROW","=>",598],["T_WHITESPACE"," ",598],["T_VARIABLE","$importData",598],"[",["T_CONSTANT_ENCAPSED_STRING","'_media_position'",598],"]",",",["T_WHITESPACE","\n            ",598],["T_CONSTANT_ENCAPSED_STRING","'disabled'",599],["T_WHITESPACE","      ",599],["T_DOUBLE_ARROW","=>",599],["T_WHITESPACE"," ",599],["T_VARIABLE","$importData",599],"[",["T_CONSTANT_ENCAPSED_STRING","'_media_is_disabled'",599],"]",["T_WHITESPACE","\n        ",599],")",";",["T_WHITESPACE","\n\n        ",600],["T_VARIABLE","$imageFile",602],["T_WHITESPACE"," ",602],"=",["T_WHITESPACE"," ",602],["T_STRING","trim",602],"(",["T_VARIABLE","$importData",602],"[",["T_CONSTANT_ENCAPSED_STRING","'_media_image'",602],"]",")",";",["T_WHITESPACE","\n        ",602],["T_VARIABLE","$imageFile",603],["T_WHITESPACE"," ",603],"=",["T_WHITESPACE"," ",603],["T_STRING","ltrim",603],"(",["T_VARIABLE","$imageFile",603],",",["T_WHITESPACE"," ",603],["T_STRING","DS",603],")",";",["T_WHITESPACE","\n        ",603],["T_VARIABLE","$imageFilePath",604],["T_WHITESPACE"," ",604],"=",["T_WHITESPACE"," ",604],["T_STRING","Mage",604],["T_DOUBLE_COLON","::",604],["T_STRING","getBaseDir",604],"(",["T_CONSTANT_ENCAPSED_STRING","'media'",604],")",["T_WHITESPACE"," ",604],".",["T_WHITESPACE"," ",604],["T_STRING","DS",604],["T_WHITESPACE"," ",604],".",["T_WHITESPACE"," ",604],["T_CONSTANT_ENCAPSED_STRING","'import'",604],["T_WHITESPACE"," ",604],".",["T_WHITESPACE"," ",604],["T_STRING","DS",604],["T_WHITESPACE"," ",604],".",["T_WHITESPACE"," ",604],["T_VARIABLE","$imageFile",604],";",["T_WHITESPACE","\n\n        ",604],["T_VARIABLE","$updatedFileName",606],["T_WHITESPACE"," ",606],"=",["T_WHITESPACE"," ",606],["T_VARIABLE","$this",606],["T_OBJECT_OPERATOR","->",606],["T_STRING","_galleryBackendModel",606],["T_OBJECT_OPERATOR","->",606],["T_STRING","addImage",606],"(",["T_VARIABLE","$product",606],",",["T_WHITESPACE"," ",606],["T_VARIABLE","$imageFilePath",606],",",["T_WHITESPACE"," ",606],["T_STRING","null",606],",",["T_WHITESPACE"," ",606],["T_STRING","false",606],",",["T_WHITESPACE","\n            ",606],["T_BOOL_CAST","(bool)",607],["T_WHITESPACE"," ",607],["T_VARIABLE","$importData",607],"[",["T_CONSTANT_ENCAPSED_STRING","'_media_is_disabled'",607],"]",")",";",["T_WHITESPACE","\n        ",607],["T_VARIABLE","$this",608],["T_OBJECT_OPERATOR","->",608],["T_STRING","_galleryBackendModel",608],["T_OBJECT_OPERATOR","->",608],["T_STRING","updateImage",608],"(",["T_VARIABLE","$product",608],",",["T_WHITESPACE"," ",608],["T_VARIABLE","$updatedFileName",608],",",["T_WHITESPACE"," ",608],["T_VARIABLE","$imageData",608],")",";",["T_WHITESPACE","\n\n        ",608],["T_VARIABLE","$this",610],["T_OBJECT_OPERATOR","->",610],["T_STRING","_addAffectedEntityIds",610],"(",["T_VARIABLE","$product",610],["T_OBJECT_OPERATOR","->",610],["T_STRING","getId",610],"(",")",")",";",["T_WHITESPACE","\n        ",610],["T_VARIABLE","$product",611],["T_OBJECT_OPERATOR","->",611],["T_STRING","setIsMassupdate",611],"(",["T_STRING","true",611],")",["T_WHITESPACE","\n            ",611],["T_OBJECT_OPERATOR","->",612],["T_STRING","setExcludeUrlRewrite",612],"(",["T_STRING","true",612],")",["T_WHITESPACE","\n            ",612],["T_OBJECT_OPERATOR","->",613],["T_STRING","save",613],"(",")",";",["T_WHITESPACE","\n\n        ",613],["T_RETURN","return",615],["T_WHITESPACE"," ",615],["T_VARIABLE","$this",615],";",["T_WHITESPACE","\n    ",615],"}",["T_WHITESPACE","\n\n    ",616],["T_DOC_COMMENT","\/**\n     * Save product (import)\n     *\n     * @param  array $importData\n     * @throws Mage_Core_Exception\n     * @return bool\n     *\/",618],["T_WHITESPACE","\n    ",624],["T_PUBLIC","public",625],["T_WHITESPACE"," ",625],["T_FUNCTION","function",625],["T_WHITESPACE"," ",625],["T_STRING","saveRow",625],"(",["T_ARRAY","array",625],["T_WHITESPACE"," ",625],["T_VARIABLE","$importData",625],")",["T_WHITESPACE","\n    ",625],"{",["T_WHITESPACE","\n        ",626],["T_VARIABLE","$product",627],["T_WHITESPACE"," ",627],"=",["T_WHITESPACE"," ",627],["T_VARIABLE","$this",627],["T_OBJECT_OPERATOR","->",627],["T_STRING","getProductModel",627],"(",")",["T_WHITESPACE","\n            ",627],["T_OBJECT_OPERATOR","->",628],["T_STRING","reset",628],"(",")",";",["T_WHITESPACE","\n\n        ",628],["T_IF","if",630],["T_WHITESPACE"," ",630],"(",["T_EMPTY","empty",630],"(",["T_VARIABLE","$importData",630],"[",["T_CONSTANT_ENCAPSED_STRING","'store'",630],"]",")",")",["T_WHITESPACE"," ",630],"{",["T_WHITESPACE","\n            ",630],["T_IF","if",631],["T_WHITESPACE"," ",631],"(","!",["T_STRING","is_null",631],"(",["T_VARIABLE","$this",631],["T_OBJECT_OPERATOR","->",631],["T_STRING","getBatchParams",631],"(",["T_CONSTANT_ENCAPSED_STRING","'store'",631],")",")",")",["T_WHITESPACE"," ",631],"{",["T_WHITESPACE","\n                ",631],["T_VARIABLE","$store",632],["T_WHITESPACE"," ",632],"=",["T_WHITESPACE"," ",632],["T_VARIABLE","$this",632],["T_OBJECT_OPERATOR","->",632],["T_STRING","getStoreById",632],"(",["T_VARIABLE","$this",632],["T_OBJECT_OPERATOR","->",632],["T_STRING","getBatchParams",632],"(",["T_CONSTANT_ENCAPSED_STRING","'store'",632],")",")",";",["T_WHITESPACE","\n            ",632],"}",["T_WHITESPACE"," ",633],["T_ELSE","else",633],["T_WHITESPACE"," ",633],"{",["T_WHITESPACE","\n                ",633],["T_VARIABLE","$message",634],["T_WHITESPACE"," ",634],"=",["T_WHITESPACE"," ",634],["T_STRING","Mage",634],["T_DOUBLE_COLON","::",634],["T_STRING","helper",634],"(",["T_CONSTANT_ENCAPSED_STRING","'catalog'",634],")",["T_OBJECT_OPERATOR","->",634],["T_STRING","__",634],"(",["T_CONSTANT_ENCAPSED_STRING","'Skipping import row, required field \"%s\" is not defined.'",634],",",["T_WHITESPACE"," ",634],["T_CONSTANT_ENCAPSED_STRING","'store'",634],")",";",["T_WHITESPACE","\n                ",634],["T_STRING","Mage",635],["T_DOUBLE_COLON","::",635],["T_STRING","throwException",635],"(",["T_VARIABLE","$message",635],")",";",["T_WHITESPACE","\n            ",635],"}",["T_WHITESPACE","\n        ",636],"}",["T_WHITESPACE"," ",637],["T_ELSE","else",637],["T_WHITESPACE"," ",637],"{",["T_WHITESPACE","\n            ",637],["T_VARIABLE","$store",638],["T_WHITESPACE"," ",638],"=",["T_WHITESPACE"," ",638],["T_VARIABLE","$this",638],["T_OBJECT_OPERATOR","->",638],["T_STRING","getStoreByCode",638],"(",["T_VARIABLE","$importData",638],"[",["T_CONSTANT_ENCAPSED_STRING","'store'",638],"]",")",";",["T_WHITESPACE","\n        ",638],"}",["T_WHITESPACE","\n\n        ",639],["T_IF","if",641],["T_WHITESPACE"," ",641],"(",["T_VARIABLE","$store",641],["T_WHITESPACE"," ",641],["T_IS_IDENTICAL","===",641],["T_WHITESPACE"," ",641],["T_STRING","false",641],")",["T_WHITESPACE"," ",641],"{",["T_WHITESPACE","\n            ",641],["T_VARIABLE","$message",642],["T_WHITESPACE"," ",642],"=",["T_WHITESPACE"," ",642],["T_STRING","Mage",642],["T_DOUBLE_COLON","::",642],["T_STRING","helper",642],"(",["T_CONSTANT_ENCAPSED_STRING","'catalog'",642],")",["T_OBJECT_OPERATOR","->",642],["T_STRING","__",642],"(",["T_CONSTANT_ENCAPSED_STRING","'Skipping import row, store \"%s\" field does not exist.'",642],",",["T_WHITESPACE"," ",642],["T_VARIABLE","$importData",642],"[",["T_CONSTANT_ENCAPSED_STRING","'store'",642],"]",")",";",["T_WHITESPACE","\n            ",642],["T_STRING","Mage",643],["T_DOUBLE_COLON","::",643],["T_STRING","throwException",643],"(",["T_VARIABLE","$message",643],")",";",["T_WHITESPACE","\n        ",643],"}",["T_WHITESPACE","\n\n        ",644],["T_IF","if",646],["T_WHITESPACE"," ",646],"(",["T_EMPTY","empty",646],"(",["T_VARIABLE","$importData",646],"[",["T_CONSTANT_ENCAPSED_STRING","'sku'",646],"]",")",")",["T_WHITESPACE"," ",646],"{",["T_WHITESPACE","\n            ",646],["T_VARIABLE","$message",647],["T_WHITESPACE"," ",647],"=",["T_WHITESPACE"," ",647],["T_STRING","Mage",647],["T_DOUBLE_COLON","::",647],["T_STRING","helper",647],"(",["T_CONSTANT_ENCAPSED_STRING","'catalog'",647],")",["T_OBJECT_OPERATOR","->",647],["T_STRING","__",647],"(",["T_CONSTANT_ENCAPSED_STRING","'Skipping import row, required field \"%s\" is not defined.'",647],",",["T_WHITESPACE"," ",647],["T_CONSTANT_ENCAPSED_STRING","'sku'",647],")",";",["T_WHITESPACE","\n            ",647],["T_STRING","Mage",648],["T_DOUBLE_COLON","::",648],["T_STRING","throwException",648],"(",["T_VARIABLE","$message",648],")",";",["T_WHITESPACE","\n        ",648],"}",["T_WHITESPACE","\n        ",649],["T_VARIABLE","$product",650],["T_OBJECT_OPERATOR","->",650],["T_STRING","setStoreId",650],"(",["T_VARIABLE","$store",650],["T_OBJECT_OPERATOR","->",650],["T_STRING","getId",650],"(",")",")",";",["T_WHITESPACE","\n        ",650],["T_VARIABLE","$productId",651],["T_WHITESPACE"," ",651],"=",["T_WHITESPACE"," ",651],["T_VARIABLE","$product",651],["T_OBJECT_OPERATOR","->",651],["T_STRING","getIdBySku",651],"(",["T_VARIABLE","$importData",651],"[",["T_CONSTANT_ENCAPSED_STRING","'sku'",651],"]",")",";",["T_WHITESPACE","\n\n        ",651],["T_IF","if",653],["T_WHITESPACE"," ",653],"(",["T_VARIABLE","$productId",653],")",["T_WHITESPACE"," ",653],"{",["T_WHITESPACE","\n            ",653],["T_VARIABLE","$product",654],["T_OBJECT_OPERATOR","->",654],["T_STRING","load",654],"(",["T_VARIABLE","$productId",654],")",";",["T_WHITESPACE","\n        ",654],"}",["T_WHITESPACE"," ",655],["T_ELSE","else",655],["T_WHITESPACE"," ",655],"{",["T_WHITESPACE","\n            ",655],["T_VARIABLE","$productTypes",656],["T_WHITESPACE"," ",656],"=",["T_WHITESPACE"," ",656],["T_VARIABLE","$this",656],["T_OBJECT_OPERATOR","->",656],["T_STRING","getProductTypes",656],"(",")",";",["T_WHITESPACE","\n            ",656],["T_VARIABLE","$productAttributeSets",657],["T_WHITESPACE"," ",657],"=",["T_WHITESPACE"," ",657],["T_VARIABLE","$this",657],["T_OBJECT_OPERATOR","->",657],["T_STRING","getProductAttributeSets",657],"(",")",";",["T_WHITESPACE","\n\n            ",657],["T_DOC_COMMENT","\/**\n             * Check product define type\n             *\/",659],["T_WHITESPACE","\n            ",661],["T_IF","if",662],["T_WHITESPACE"," ",662],"(",["T_EMPTY","empty",662],"(",["T_VARIABLE","$importData",662],"[",["T_CONSTANT_ENCAPSED_STRING","'type'",662],"]",")",["T_WHITESPACE"," ",662],["T_BOOLEAN_OR","||",662],["T_WHITESPACE"," ",662],"!",["T_ISSET","isset",662],"(",["T_VARIABLE","$productTypes",662],"[",["T_STRING","strtolower",662],"(",["T_VARIABLE","$importData",662],"[",["T_CONSTANT_ENCAPSED_STRING","'type'",662],"]",")","]",")",")",["T_WHITESPACE"," ",662],"{",["T_WHITESPACE","\n                ",662],["T_VARIABLE","$value",663],["T_WHITESPACE"," ",663],"=",["T_WHITESPACE"," ",663],["T_ISSET","isset",663],"(",["T_VARIABLE","$importData",663],"[",["T_CONSTANT_ENCAPSED_STRING","'type'",663],"]",")",["T_WHITESPACE"," ",663],"?",["T_WHITESPACE"," ",663],["T_VARIABLE","$importData",663],"[",["T_CONSTANT_ENCAPSED_STRING","'type'",663],"]",["T_WHITESPACE"," ",663],":",["T_WHITESPACE"," ",663],["T_CONSTANT_ENCAPSED_STRING","''",663],";",["T_WHITESPACE","\n                ",663],["T_VARIABLE","$message",664],["T_WHITESPACE"," ",664],"=",["T_WHITESPACE"," ",664],["T_STRING","Mage",664],["T_DOUBLE_COLON","::",664],["T_STRING","helper",664],"(",["T_CONSTANT_ENCAPSED_STRING","'catalog'",664],")",["T_OBJECT_OPERATOR","->",664],["T_STRING","__",664],"(",["T_CONSTANT_ENCAPSED_STRING","'Skip import row, is not valid value \"%s\" for field \"%s\"'",664],",",["T_WHITESPACE"," ",664],["T_VARIABLE","$value",664],",",["T_WHITESPACE"," ",664],["T_CONSTANT_ENCAPSED_STRING","'type'",664],")",";",["T_WHITESPACE","\n                ",664],["T_STRING","Mage",665],["T_DOUBLE_COLON","::",665],["T_STRING","throwException",665],"(",["T_VARIABLE","$message",665],")",";",["T_WHITESPACE","\n            ",665],"}",["T_WHITESPACE","\n            ",666],["T_VARIABLE","$product",667],["T_OBJECT_OPERATOR","->",667],["T_STRING","setTypeId",667],"(",["T_VARIABLE","$productTypes",667],"[",["T_STRING","strtolower",667],"(",["T_VARIABLE","$importData",667],"[",["T_CONSTANT_ENCAPSED_STRING","'type'",667],"]",")","]",")",";",["T_WHITESPACE","\n            ",667],["T_DOC_COMMENT","\/**\n             * Check product define attribute set\n             *\/",668],["T_WHITESPACE","\n            ",670],["T_IF","if",671],["T_WHITESPACE"," ",671],"(",["T_EMPTY","empty",671],"(",["T_VARIABLE","$importData",671],"[",["T_CONSTANT_ENCAPSED_STRING","'attribute_set'",671],"]",")",["T_WHITESPACE"," ",671],["T_BOOLEAN_OR","||",671],["T_WHITESPACE"," ",671],"!",["T_ISSET","isset",671],"(",["T_VARIABLE","$productAttributeSets",671],"[",["T_VARIABLE","$importData",671],"[",["T_CONSTANT_ENCAPSED_STRING","'attribute_set'",671],"]","]",")",")",["T_WHITESPACE"," ",671],"{",["T_WHITESPACE","\n                ",671],["T_VARIABLE","$value",672],["T_WHITESPACE"," ",672],"=",["T_WHITESPACE"," ",672],["T_ISSET","isset",672],"(",["T_VARIABLE","$importData",672],"[",["T_CONSTANT_ENCAPSED_STRING","'attribute_set'",672],"]",")",["T_WHITESPACE"," ",672],"?",["T_WHITESPACE"," ",672],["T_VARIABLE","$importData",672],"[",["T_CONSTANT_ENCAPSED_STRING","'attribute_set'",672],"]",["T_WHITESPACE"," ",672],":",["T_WHITESPACE"," ",672],["T_CONSTANT_ENCAPSED_STRING","''",672],";",["T_WHITESPACE","\n                ",672],["T_VARIABLE","$message",673],["T_WHITESPACE"," ",673],"=",["T_WHITESPACE"," ",673],["T_STRING","Mage",673],["T_DOUBLE_COLON","::",673],["T_STRING","helper",673],"(",["T_CONSTANT_ENCAPSED_STRING","'catalog'",673],")",["T_OBJECT_OPERATOR","->",673],["T_STRING","__",673],"(",["T_CONSTANT_ENCAPSED_STRING","'Skip import row, the value \"%s\" is invalid for field \"%s\"'",673],",",["T_WHITESPACE"," ",673],["T_VARIABLE","$value",673],",",["T_WHITESPACE"," ",673],["T_CONSTANT_ENCAPSED_STRING","'attribute_set'",673],")",";",["T_WHITESPACE","\n                ",673],["T_STRING","Mage",674],["T_DOUBLE_COLON","::",674],["T_STRING","throwException",674],"(",["T_VARIABLE","$message",674],")",";",["T_WHITESPACE","\n            ",674],"}",["T_WHITESPACE","\n            ",675],["T_VARIABLE","$product",676],["T_OBJECT_OPERATOR","->",676],["T_STRING","setAttributeSetId",676],"(",["T_VARIABLE","$productAttributeSets",676],"[",["T_VARIABLE","$importData",676],"[",["T_CONSTANT_ENCAPSED_STRING","'attribute_set'",676],"]","]",")",";",["T_WHITESPACE","\n\n            ",676],["T_FOREACH","foreach",678],["T_WHITESPACE"," ",678],"(",["T_VARIABLE","$this",678],["T_OBJECT_OPERATOR","->",678],["T_STRING","_requiredFields",678],["T_WHITESPACE"," ",678],["T_AS","as",678],["T_WHITESPACE"," ",678],["T_VARIABLE","$field",678],")",["T_WHITESPACE"," ",678],"{",["T_WHITESPACE","\n                ",678],["T_VARIABLE","$attribute",679],["T_WHITESPACE"," ",679],"=",["T_WHITESPACE"," ",679],["T_VARIABLE","$this",679],["T_OBJECT_OPERATOR","->",679],["T_STRING","getAttribute",679],"(",["T_VARIABLE","$field",679],")",";",["T_WHITESPACE","\n                ",679],["T_IF","if",680],["T_WHITESPACE"," ",680],"(","!",["T_ISSET","isset",680],"(",["T_VARIABLE","$importData",680],"[",["T_VARIABLE","$field",680],"]",")",["T_WHITESPACE"," ",680],["T_BOOLEAN_AND","&&",680],["T_WHITESPACE"," ",680],["T_VARIABLE","$attribute",680],["T_WHITESPACE"," ",680],["T_BOOLEAN_AND","&&",680],["T_WHITESPACE"," ",680],["T_VARIABLE","$attribute",680],["T_OBJECT_OPERATOR","->",680],["T_STRING","getIsRequired",680],"(",")",")",["T_WHITESPACE"," ",680],"{",["T_WHITESPACE","\n                    ",680],["T_VARIABLE","$message",681],["T_WHITESPACE"," ",681],"=",["T_WHITESPACE"," ",681],["T_STRING","Mage",681],["T_DOUBLE_COLON","::",681],["T_STRING","helper",681],"(",["T_CONSTANT_ENCAPSED_STRING","'catalog'",681],")",["T_OBJECT_OPERATOR","->",681],["T_STRING","__",681],"(",["T_CONSTANT_ENCAPSED_STRING","'Skipping import row, required field \"%s\" for new products is not defined.'",681],",",["T_WHITESPACE"," ",681],["T_VARIABLE","$field",681],")",";",["T_WHITESPACE","\n                    ",681],["T_STRING","Mage",682],["T_DOUBLE_COLON","::",682],["T_STRING","throwException",682],"(",["T_VARIABLE","$message",682],")",";",["T_WHITESPACE","\n                ",682],"}",["T_WHITESPACE","\n            ",683],"}",["T_WHITESPACE","\n        ",684],"}",["T_WHITESPACE","\n\n        ",685],["T_COMMENT","\/\/ process row with media data only\n",687],["T_WHITESPACE","        ",688],["T_IF","if",688],["T_WHITESPACE"," ",688],"(",["T_ISSET","isset",688],"(",["T_VARIABLE","$importData",688],"[",["T_CONSTANT_ENCAPSED_STRING","'_media_image'",688],"]",")",["T_WHITESPACE"," ",688],["T_BOOLEAN_AND","&&",688],["T_WHITESPACE"," ",688],["T_STRING","strlen",688],"(",["T_VARIABLE","$importData",688],"[",["T_CONSTANT_ENCAPSED_STRING","'_media_image'",688],"]",")",")",["T_WHITESPACE"," ",688],"{",["T_WHITESPACE","\n            ",688],["T_VARIABLE","$this",689],["T_OBJECT_OPERATOR","->",689],["T_STRING","saveImageDataRow",689],"(",["T_VARIABLE","$product",689],",",["T_WHITESPACE"," ",689],["T_VARIABLE","$importData",689],")",";",["T_WHITESPACE","\n            ",689],["T_RETURN","return",690],["T_WHITESPACE"," ",690],["T_STRING","true",690],";",["T_WHITESPACE","\n        ",690],"}",["T_WHITESPACE","\n\n        ",691],["T_VARIABLE","$this",693],["T_OBJECT_OPERATOR","->",693],["T_STRING","setProductTypeInstance",693],"(",["T_VARIABLE","$product",693],")",";",["T_WHITESPACE","\n\n        ",693],["T_IF","if",695],["T_WHITESPACE"," ",695],"(",["T_ISSET","isset",695],"(",["T_VARIABLE","$importData",695],"[",["T_CONSTANT_ENCAPSED_STRING","'category_ids'",695],"]",")",")",["T_WHITESPACE"," ",695],"{",["T_WHITESPACE","\n            ",695],["T_VARIABLE","$product",696],["T_OBJECT_OPERATOR","->",696],["T_STRING","setCategoryIds",696],"(",["T_VARIABLE","$importData",696],"[",["T_CONSTANT_ENCAPSED_STRING","'category_ids'",696],"]",")",";",["T_WHITESPACE","\n        ",696],"}",["T_WHITESPACE","\n\n        ",697],["T_FOREACH","foreach",699],["T_WHITESPACE"," ",699],"(",["T_VARIABLE","$this",699],["T_OBJECT_OPERATOR","->",699],["T_STRING","_ignoreFields",699],["T_WHITESPACE"," ",699],["T_AS","as",699],["T_WHITESPACE"," ",699],["T_VARIABLE","$field",699],")",["T_WHITESPACE"," ",699],"{",["T_WHITESPACE","\n            ",699],["T_IF","if",700],["T_WHITESPACE"," ",700],"(",["T_ISSET","isset",700],"(",["T_VARIABLE","$importData",700],"[",["T_VARIABLE","$field",700],"]",")",")",["T_WHITESPACE"," ",700],"{",["T_WHITESPACE","\n                ",700],["T_UNSET","unset",701],"(",["T_VARIABLE","$importData",701],"[",["T_VARIABLE","$field",701],"]",")",";",["T_WHITESPACE","\n            ",701],"}",["T_WHITESPACE","\n        ",702],"}",["T_WHITESPACE","\n\n        ",703],["T_IF","if",705],["T_WHITESPACE"," ",705],"(",["T_VARIABLE","$store",705],["T_OBJECT_OPERATOR","->",705],["T_STRING","getId",705],"(",")",["T_WHITESPACE"," ",705],["T_IS_NOT_EQUAL","!=",705],["T_WHITESPACE"," ",705],["T_LNUMBER","0",705],")",["T_WHITESPACE"," ",705],"{",["T_WHITESPACE","\n            ",705],["T_VARIABLE","$websiteIds",706],["T_WHITESPACE"," ",706],"=",["T_WHITESPACE"," ",706],["T_VARIABLE","$product",706],["T_OBJECT_OPERATOR","->",706],["T_STRING","getWebsiteIds",706],"(",")",";",["T_WHITESPACE","\n            ",706],["T_IF","if",707],["T_WHITESPACE"," ",707],"(","!",["T_STRING","is_array",707],"(",["T_VARIABLE","$websiteIds",707],")",")",["T_WHITESPACE"," ",707],"{",["T_WHITESPACE","\n                ",707],["T_VARIABLE","$websiteIds",708],["T_WHITESPACE"," ",708],"=",["T_WHITESPACE"," ",708],["T_ARRAY","array",708],"(",")",";",["T_WHITESPACE","\n            ",708],"}",["T_WHITESPACE","\n            ",709],["T_IF","if",710],["T_WHITESPACE"," ",710],"(","!",["T_STRING","in_array",710],"(",["T_VARIABLE","$store",710],["T_OBJECT_OPERATOR","->",710],["T_STRING","getWebsiteId",710],"(",")",",",["T_WHITESPACE"," ",710],["T_VARIABLE","$websiteIds",710],")",")",["T_WHITESPACE"," ",710],"{",["T_WHITESPACE","\n                ",710],["T_VARIABLE","$websiteIds",711],"[","]",["T_WHITESPACE"," ",711],"=",["T_WHITESPACE"," ",711],["T_VARIABLE","$store",711],["T_OBJECT_OPERATOR","->",711],["T_STRING","getWebsiteId",711],"(",")",";",["T_WHITESPACE","\n            ",711],"}",["T_WHITESPACE","\n            ",712],["T_VARIABLE","$product",713],["T_OBJECT_OPERATOR","->",713],["T_STRING","setWebsiteIds",713],"(",["T_VARIABLE","$websiteIds",713],")",";",["T_WHITESPACE","\n        ",713],"}",["T_WHITESPACE","\n\n        ",714],["T_IF","if",716],["T_WHITESPACE"," ",716],"(",["T_ISSET","isset",716],"(",["T_VARIABLE","$importData",716],"[",["T_CONSTANT_ENCAPSED_STRING","'websites'",716],"]",")",")",["T_WHITESPACE"," ",716],"{",["T_WHITESPACE","\n            ",716],["T_VARIABLE","$websiteIds",717],["T_WHITESPACE"," ",717],"=",["T_WHITESPACE"," ",717],["T_VARIABLE","$product",717],["T_OBJECT_OPERATOR","->",717],["T_STRING","getWebsiteIds",717],"(",")",";",["T_WHITESPACE","\n            ",717],["T_IF","if",718],["T_WHITESPACE"," ",718],"(","!",["T_STRING","is_array",718],"(",["T_VARIABLE","$websiteIds",718],")",["T_WHITESPACE"," ",718],["T_BOOLEAN_OR","||",718],["T_WHITESPACE"," ",718],"!",["T_VARIABLE","$store",718],["T_OBJECT_OPERATOR","->",718],["T_STRING","getId",718],"(",")",")",["T_WHITESPACE"," ",718],"{",["T_WHITESPACE","\n                ",718],["T_VARIABLE","$websiteIds",719],["T_WHITESPACE"," ",719],"=",["T_WHITESPACE"," ",719],["T_ARRAY","array",719],"(",")",";",["T_WHITESPACE","\n            ",719],"}",["T_WHITESPACE","\n            ",720],["T_VARIABLE","$websiteCodes",721],["T_WHITESPACE"," ",721],"=",["T_WHITESPACE"," ",721],["T_STRING","explode",721],"(",["T_CONSTANT_ENCAPSED_STRING","','",721],",",["T_WHITESPACE"," ",721],["T_VARIABLE","$importData",721],"[",["T_CONSTANT_ENCAPSED_STRING","'websites'",721],"]",")",";",["T_WHITESPACE","\n            ",721],["T_FOREACH","foreach",722],["T_WHITESPACE"," ",722],"(",["T_VARIABLE","$websiteCodes",722],["T_WHITESPACE"," ",722],["T_AS","as",722],["T_WHITESPACE"," ",722],["T_VARIABLE","$websiteCode",722],")",["T_WHITESPACE"," ",722],"{",["T_WHITESPACE","\n                ",722],["T_TRY","try",723],["T_WHITESPACE"," ",723],"{",["T_WHITESPACE","\n                    ",723],["T_VARIABLE","$website",724],["T_WHITESPACE"," ",724],"=",["T_WHITESPACE"," ",724],["T_STRING","Mage",724],["T_DOUBLE_COLON","::",724],["T_STRING","app",724],"(",")",["T_OBJECT_OPERATOR","->",724],["T_STRING","getWebsite",724],"(",["T_STRING","trim",724],"(",["T_VARIABLE","$websiteCode",724],")",")",";",["T_WHITESPACE","\n                    ",724],["T_IF","if",725],["T_WHITESPACE"," ",725],"(","!",["T_STRING","in_array",725],"(",["T_VARIABLE","$website",725],["T_OBJECT_OPERATOR","->",725],["T_STRING","getId",725],"(",")",",",["T_WHITESPACE"," ",725],["T_VARIABLE","$websiteIds",725],")",")",["T_WHITESPACE"," ",725],"{",["T_WHITESPACE","\n                        ",725],["T_VARIABLE","$websiteIds",726],"[","]",["T_WHITESPACE"," ",726],"=",["T_WHITESPACE"," ",726],["T_VARIABLE","$website",726],["T_OBJECT_OPERATOR","->",726],["T_STRING","getId",726],"(",")",";",["T_WHITESPACE","\n                    ",726],"}",["T_WHITESPACE","\n                ",727],"}",["T_WHITESPACE"," ",728],["T_CATCH","catch",728],["T_WHITESPACE"," ",728],"(",["T_STRING","Exception",728],["T_WHITESPACE"," ",728],["T_VARIABLE","$e",728],")",["T_WHITESPACE"," ",728],"{","}",["T_WHITESPACE","\n            ",728],"}",["T_WHITESPACE","\n            ",729],["T_VARIABLE","$product",730],["T_OBJECT_OPERATOR","->",730],["T_STRING","setWebsiteIds",730],"(",["T_VARIABLE","$websiteIds",730],")",";",["T_WHITESPACE","\n            ",730],["T_UNSET","unset",731],"(",["T_VARIABLE","$websiteIds",731],")",";",["T_WHITESPACE","\n        ",731],"}",["T_WHITESPACE","\n\n        ",732],["T_FOREACH","foreach",734],["T_WHITESPACE"," ",734],"(",["T_VARIABLE","$importData",734],["T_WHITESPACE"," ",734],["T_AS","as",734],["T_WHITESPACE"," ",734],["T_VARIABLE","$field",734],["T_WHITESPACE"," ",734],["T_DOUBLE_ARROW","=>",734],["T_WHITESPACE"," ",734],["T_VARIABLE","$value",734],")",["T_WHITESPACE"," ",734],"{",["T_WHITESPACE","\n            ",734],["T_IF","if",735],["T_WHITESPACE"," ",735],"(",["T_STRING","in_array",735],"(",["T_VARIABLE","$field",735],",",["T_WHITESPACE"," ",735],["T_VARIABLE","$this",735],["T_OBJECT_OPERATOR","->",735],["T_STRING","_inventoryFields",735],")",")",["T_WHITESPACE"," ",735],"{",["T_WHITESPACE","\n                ",735],["T_CONTINUE","continue",736],";",["T_WHITESPACE","\n            ",736],"}",["T_WHITESPACE","\n            ",737],["T_IF","if",738],["T_WHITESPACE"," ",738],"(",["T_STRING","is_null",738],"(",["T_VARIABLE","$value",738],")",")",["T_WHITESPACE"," ",738],"{",["T_WHITESPACE","\n                ",738],["T_CONTINUE","continue",739],";",["T_WHITESPACE","\n            ",739],"}",["T_WHITESPACE","\n\n            ",740],["T_VARIABLE","$attribute",742],["T_WHITESPACE"," ",742],"=",["T_WHITESPACE"," ",742],["T_VARIABLE","$this",742],["T_OBJECT_OPERATOR","->",742],["T_STRING","getAttribute",742],"(",["T_VARIABLE","$field",742],")",";",["T_WHITESPACE","\n            ",742],["T_IF","if",743],["T_WHITESPACE"," ",743],"(","!",["T_VARIABLE","$attribute",743],")",["T_WHITESPACE"," ",743],"{",["T_WHITESPACE","\n                ",743],["T_CONTINUE","continue",744],";",["T_WHITESPACE","\n            ",744],"}",["T_WHITESPACE","\n\n            ",745],["T_VARIABLE","$isArray",747],["T_WHITESPACE"," ",747],"=",["T_WHITESPACE"," ",747],["T_STRING","false",747],";",["T_WHITESPACE","\n            ",747],["T_VARIABLE","$setValue",748],["T_WHITESPACE"," ",748],"=",["T_WHITESPACE"," ",748],["T_VARIABLE","$value",748],";",["T_WHITESPACE","\n\n            ",748],["T_IF","if",750],["T_WHITESPACE"," ",750],"(",["T_VARIABLE","$attribute",750],["T_OBJECT_OPERATOR","->",750],["T_STRING","getFrontendInput",750],"(",")",["T_WHITESPACE"," ",750],["T_IS_EQUAL","==",750],["T_WHITESPACE"," ",750],["T_CONSTANT_ENCAPSED_STRING","'multiselect'",750],")",["T_WHITESPACE"," ",750],"{",["T_WHITESPACE","\n                ",750],["T_VARIABLE","$value",751],["T_WHITESPACE"," ",751],"=",["T_WHITESPACE"," ",751],["T_STRING","explode",751],"(",["T_STRING","self",751],["T_DOUBLE_COLON","::",751],["T_STRING","MULTI_DELIMITER",751],",",["T_WHITESPACE"," ",751],["T_VARIABLE","$value",751],")",";",["T_WHITESPACE","\n                ",751],["T_VARIABLE","$isArray",752],["T_WHITESPACE"," ",752],"=",["T_WHITESPACE"," ",752],["T_STRING","true",752],";",["T_WHITESPACE","\n                ",752],["T_VARIABLE","$setValue",753],["T_WHITESPACE"," ",753],"=",["T_WHITESPACE"," ",753],["T_ARRAY","array",753],"(",")",";",["T_WHITESPACE","\n            ",753],"}",["T_WHITESPACE","\n\n            ",754],["T_IF","if",756],["T_WHITESPACE"," ",756],"(",["T_VARIABLE","$value",756],["T_WHITESPACE"," ",756],["T_BOOLEAN_AND","&&",756],["T_WHITESPACE"," ",756],["T_VARIABLE","$attribute",756],["T_OBJECT_OPERATOR","->",756],["T_STRING","getBackendType",756],"(",")",["T_WHITESPACE"," ",756],["T_IS_EQUAL","==",756],["T_WHITESPACE"," ",756],["T_CONSTANT_ENCAPSED_STRING","'decimal'",756],")",["T_WHITESPACE"," ",756],"{",["T_WHITESPACE","\n                ",756],["T_VARIABLE","$setValue",757],["T_WHITESPACE"," ",757],"=",["T_WHITESPACE"," ",757],["T_VARIABLE","$this",757],["T_OBJECT_OPERATOR","->",757],["T_STRING","getNumber",757],"(",["T_VARIABLE","$value",757],")",";",["T_WHITESPACE","\n            ",757],"}",["T_WHITESPACE","\n\n            ",758],["T_IF","if",760],["T_WHITESPACE"," ",760],"(",["T_VARIABLE","$attribute",760],["T_OBJECT_OPERATOR","->",760],["T_STRING","usesSource",760],"(",")",")",["T_WHITESPACE"," ",760],"{",["T_WHITESPACE","\n                ",760],["T_VARIABLE","$options",761],["T_WHITESPACE"," ",761],"=",["T_WHITESPACE"," ",761],["T_VARIABLE","$attribute",761],["T_OBJECT_OPERATOR","->",761],["T_STRING","getSource",761],"(",")",["T_OBJECT_OPERATOR","->",761],["T_STRING","getAllOptions",761],"(",["T_STRING","false",761],")",";",["T_WHITESPACE","\n\n                ",761],["T_IF","if",763],["T_WHITESPACE"," ",763],"(",["T_VARIABLE","$isArray",763],")",["T_WHITESPACE"," ",763],"{",["T_WHITESPACE","\n                    ",763],["T_FOREACH","foreach",764],["T_WHITESPACE"," ",764],"(",["T_VARIABLE","$options",764],["T_WHITESPACE"," ",764],["T_AS","as",764],["T_WHITESPACE"," ",764],["T_VARIABLE","$item",764],")",["T_WHITESPACE"," ",764],"{",["T_WHITESPACE","\n                        ",764],["T_IF","if",765],["T_WHITESPACE"," ",765],"(",["T_STRING","in_array",765],"(",["T_VARIABLE","$item",765],"[",["T_CONSTANT_ENCAPSED_STRING","'label'",765],"]",",",["T_WHITESPACE"," ",765],["T_VARIABLE","$value",765],")",")",["T_WHITESPACE"," ",765],"{",["T_WHITESPACE","\n                            ",765],["T_VARIABLE","$setValue",766],"[","]",["T_WHITESPACE"," ",766],"=",["T_WHITESPACE"," ",766],["T_VARIABLE","$item",766],"[",["T_CONSTANT_ENCAPSED_STRING","'value'",766],"]",";",["T_WHITESPACE","\n                        ",766],"}",["T_WHITESPACE","\n                    ",767],"}",["T_WHITESPACE","\n                ",768],"}",["T_WHITESPACE"," ",769],["T_ELSE","else",769],["T_WHITESPACE"," ",769],"{",["T_WHITESPACE","\n                    ",769],["T_VARIABLE","$setValue",770],["T_WHITESPACE"," ",770],"=",["T_WHITESPACE"," ",770],["T_STRING","false",770],";",["T_WHITESPACE","\n                    ",770],["T_FOREACH","foreach",771],["T_WHITESPACE"," ",771],"(",["T_VARIABLE","$options",771],["T_WHITESPACE"," ",771],["T_AS","as",771],["T_WHITESPACE"," ",771],["T_VARIABLE","$item",771],")",["T_WHITESPACE"," ",771],"{",["T_WHITESPACE","\n                        ",771],["T_IF","if",772],["T_WHITESPACE"," ",772],"(",["T_STRING","is_array",772],"(",["T_VARIABLE","$item",772],"[",["T_CONSTANT_ENCAPSED_STRING","'value'",772],"]",")",")",["T_WHITESPACE"," ",772],"{",["T_WHITESPACE","\n                            ",772],["T_FOREACH","foreach",773],["T_WHITESPACE"," ",773],"(",["T_VARIABLE","$item",773],"[",["T_CONSTANT_ENCAPSED_STRING","'value'",773],"]",["T_WHITESPACE"," ",773],["T_AS","as",773],["T_WHITESPACE"," ",773],["T_VARIABLE","$subValue",773],")",["T_WHITESPACE"," ",773],"{",["T_WHITESPACE","\n                                ",773],["T_IF","if",774],["T_WHITESPACE"," ",774],"(",["T_ISSET","isset",774],"(",["T_VARIABLE","$subValue",774],"[",["T_CONSTANT_ENCAPSED_STRING","'value'",774],"]",")",["T_WHITESPACE"," ",774],["T_BOOLEAN_AND","&&",774],["T_WHITESPACE"," ",774],["T_VARIABLE","$subValue",774],"[",["T_CONSTANT_ENCAPSED_STRING","'value'",774],"]",["T_WHITESPACE"," ",774],["T_IS_EQUAL","==",774],["T_WHITESPACE"," ",774],["T_VARIABLE","$value",774],")",["T_WHITESPACE"," ",774],"{",["T_WHITESPACE","\n                                    ",774],["T_VARIABLE","$setValue",775],["T_WHITESPACE"," ",775],"=",["T_WHITESPACE"," ",775],["T_VARIABLE","$value",775],";",["T_WHITESPACE","\n                                ",775],"}",["T_WHITESPACE","\n                            ",776],"}",["T_WHITESPACE","\n                        ",777],"}",["T_WHITESPACE"," ",778],["T_ELSE","else",778],["T_WHITESPACE"," ",778],["T_IF","if",778],["T_WHITESPACE"," ",778],"(",["T_VARIABLE","$item",778],"[",["T_CONSTANT_ENCAPSED_STRING","'label'",778],"]",["T_WHITESPACE"," ",778],["T_IS_EQUAL","==",778],["T_WHITESPACE"," ",778],["T_VARIABLE","$value",778],")",["T_WHITESPACE"," ",778],"{",["T_WHITESPACE","\n                            ",778],["T_VARIABLE","$setValue",779],["T_WHITESPACE"," ",779],"=",["T_WHITESPACE"," ",779],["T_VARIABLE","$item",779],"[",["T_CONSTANT_ENCAPSED_STRING","'value'",779],"]",";",["T_WHITESPACE","\n                        ",779],"}",["T_WHITESPACE","\n                    ",780],"}",["T_WHITESPACE","\n                ",781],"}",["T_WHITESPACE","\n            ",782],"}",["T_WHITESPACE","\n\n            ",783],["T_VARIABLE","$product",785],["T_OBJECT_OPERATOR","->",785],["T_STRING","setData",785],"(",["T_VARIABLE","$field",785],",",["T_WHITESPACE"," ",785],["T_VARIABLE","$setValue",785],")",";",["T_WHITESPACE","\n        ",785],"}",["T_WHITESPACE","\n\n        ",786],["T_IF","if",788],["T_WHITESPACE"," ",788],"(","!",["T_VARIABLE","$product",788],["T_OBJECT_OPERATOR","->",788],["T_STRING","getVisibility",788],"(",")",")",["T_WHITESPACE"," ",788],"{",["T_WHITESPACE","\n            ",788],["T_VARIABLE","$product",789],["T_OBJECT_OPERATOR","->",789],["T_STRING","setVisibility",789],"(",["T_STRING","Mage_Catalog_Model_Product_Visibility",789],["T_DOUBLE_COLON","::",789],["T_STRING","VISIBILITY_NOT_VISIBLE",789],")",";",["T_WHITESPACE","\n        ",789],"}",["T_WHITESPACE","\n\n        ",790],["T_VARIABLE","$stockData",792],["T_WHITESPACE"," ",792],"=",["T_WHITESPACE"," ",792],["T_ARRAY","array",792],"(",")",";",["T_WHITESPACE","\n        ",792],["T_VARIABLE","$inventoryFields",793],["T_WHITESPACE"," ",793],"=",["T_WHITESPACE"," ",793],["T_ISSET","isset",793],"(",["T_VARIABLE","$this",793],["T_OBJECT_OPERATOR","->",793],["T_STRING","_inventoryFieldsProductTypes",793],"[",["T_VARIABLE","$product",793],["T_OBJECT_OPERATOR","->",793],["T_STRING","getTypeId",793],"(",")","]",")",["T_WHITESPACE","\n            ",793],"?",["T_WHITESPACE"," ",794],["T_VARIABLE","$this",794],["T_OBJECT_OPERATOR","->",794],["T_STRING","_inventoryFieldsProductTypes",794],"[",["T_VARIABLE","$product",794],["T_OBJECT_OPERATOR","->",794],["T_STRING","getTypeId",794],"(",")","]",["T_WHITESPACE","\n            ",794],":",["T_WHITESPACE"," ",795],["T_ARRAY","array",795],"(",")",";",["T_WHITESPACE","\n        ",795],["T_FOREACH","foreach",796],["T_WHITESPACE"," ",796],"(",["T_VARIABLE","$inventoryFields",796],["T_WHITESPACE"," ",796],["T_AS","as",796],["T_WHITESPACE"," ",796],["T_VARIABLE","$field",796],")",["T_WHITESPACE"," ",796],"{",["T_WHITESPACE","\n            ",796],["T_IF","if",797],["T_WHITESPACE"," ",797],"(",["T_ISSET","isset",797],"(",["T_VARIABLE","$importData",797],"[",["T_VARIABLE","$field",797],"]",")",")",["T_WHITESPACE"," ",797],"{",["T_WHITESPACE","\n                ",797],["T_IF","if",798],["T_WHITESPACE"," ",798],"(",["T_STRING","in_array",798],"(",["T_VARIABLE","$field",798],",",["T_WHITESPACE"," ",798],["T_VARIABLE","$this",798],["T_OBJECT_OPERATOR","->",798],["T_STRING","_toNumber",798],")",")",["T_WHITESPACE"," ",798],"{",["T_WHITESPACE","\n                    ",798],["T_VARIABLE","$stockData",799],"[",["T_VARIABLE","$field",799],"]",["T_WHITESPACE"," ",799],"=",["T_WHITESPACE"," ",799],["T_VARIABLE","$this",799],["T_OBJECT_OPERATOR","->",799],["T_STRING","getNumber",799],"(",["T_VARIABLE","$importData",799],"[",["T_VARIABLE","$field",799],"]",")",";",["T_WHITESPACE","\n                ",799],"}",["T_WHITESPACE"," ",800],["T_ELSE","else",800],["T_WHITESPACE"," ",800],"{",["T_WHITESPACE","\n                    ",800],["T_VARIABLE","$stockData",801],"[",["T_VARIABLE","$field",801],"]",["T_WHITESPACE"," ",801],"=",["T_WHITESPACE"," ",801],["T_VARIABLE","$importData",801],"[",["T_VARIABLE","$field",801],"]",";",["T_WHITESPACE","\n                ",801],"}",["T_WHITESPACE","\n            ",802],"}",["T_WHITESPACE","\n        ",803],"}",["T_WHITESPACE","\n        ",804],["T_VARIABLE","$product",805],["T_OBJECT_OPERATOR","->",805],["T_STRING","setStockData",805],"(",["T_VARIABLE","$stockData",805],")",";",["T_WHITESPACE","\n\n        ",805],["T_VARIABLE","$arrayToMassAdd",807],["T_WHITESPACE"," ",807],"=",["T_WHITESPACE"," ",807],["T_ARRAY","array",807],"(",")",";",["T_WHITESPACE","\n\n        ",807],["T_FOREACH","foreach",809],["T_WHITESPACE"," ",809],"(",["T_VARIABLE","$product",809],["T_OBJECT_OPERATOR","->",809],["T_STRING","getMediaAttributes",809],"(",")",["T_WHITESPACE"," ",809],["T_AS","as",809],["T_WHITESPACE"," ",809],["T_VARIABLE","$mediaAttributeCode",809],["T_WHITESPACE"," ",809],["T_DOUBLE_ARROW","=>",809],["T_WHITESPACE"," ",809],["T_VARIABLE","$mediaAttribute",809],")",["T_WHITESPACE"," ",809],"{",["T_WHITESPACE","\n            ",809],["T_IF","if",810],["T_WHITESPACE"," ",810],"(",["T_ISSET","isset",810],"(",["T_VARIABLE","$importData",810],"[",["T_VARIABLE","$mediaAttributeCode",810],"]",")",")",["T_WHITESPACE"," ",810],"{",["T_WHITESPACE","\n                ",810],["T_VARIABLE","$file",811],["T_WHITESPACE"," ",811],"=",["T_WHITESPACE"," ",811],["T_STRING","trim",811],"(",["T_VARIABLE","$importData",811],"[",["T_VARIABLE","$mediaAttributeCode",811],"]",")",";",["T_WHITESPACE","\n                ",811],["T_IF","if",812],["T_WHITESPACE"," ",812],"(","!",["T_EMPTY","empty",812],"(",["T_VARIABLE","$file",812],")",["T_WHITESPACE"," ",812],["T_BOOLEAN_AND","&&",812],["T_WHITESPACE"," ",812],"!",["T_VARIABLE","$this",812],["T_OBJECT_OPERATOR","->",812],["T_STRING","_galleryBackendModel",812],["T_OBJECT_OPERATOR","->",812],["T_STRING","getImage",812],"(",["T_VARIABLE","$product",812],",",["T_WHITESPACE"," ",812],["T_VARIABLE","$file",812],")",")",["T_WHITESPACE"," ",812],"{",["T_WHITESPACE","\n                    ",812],["T_VARIABLE","$arrayToMassAdd",813],"[","]",["T_WHITESPACE"," ",813],"=",["T_WHITESPACE"," ",813],["T_ARRAY","array",813],"(",["T_CONSTANT_ENCAPSED_STRING","'file'",813],["T_WHITESPACE"," ",813],["T_DOUBLE_ARROW","=>",813],["T_WHITESPACE"," ",813],["T_STRING","trim",813],"(",["T_VARIABLE","$file",813],")",",",["T_WHITESPACE"," ",813],["T_CONSTANT_ENCAPSED_STRING","'mediaAttribute'",813],["T_WHITESPACE"," ",813],["T_DOUBLE_ARROW","=>",813],["T_WHITESPACE"," ",813],["T_VARIABLE","$mediaAttributeCode",813],")",";",["T_WHITESPACE","\n                ",813],"}",["T_WHITESPACE","\n            ",814],"}",["T_WHITESPACE","\n        ",815],"}",["T_WHITESPACE","\n\n        ",816],["T_VARIABLE","$addedFilesCorrespondence",818],["T_WHITESPACE"," ",818],"=",["T_WHITESPACE"," ",818],["T_VARIABLE","$this",818],["T_OBJECT_OPERATOR","->",818],["T_STRING","_galleryBackendModel",818],["T_OBJECT_OPERATOR","->",818],["T_STRING","addImagesWithDifferentMediaAttributes",818],"(",["T_WHITESPACE","\n            ",818],["T_VARIABLE","$product",819],",",["T_WHITESPACE","\n            ",819],["T_VARIABLE","$arrayToMassAdd",820],",",["T_WHITESPACE"," ",820],["T_STRING","Mage",820],["T_DOUBLE_COLON","::",820],["T_STRING","getBaseDir",820],"(",["T_CONSTANT_ENCAPSED_STRING","'media'",820],")",["T_WHITESPACE"," ",820],".",["T_WHITESPACE"," ",820],["T_STRING","DS",820],["T_WHITESPACE"," ",820],".",["T_WHITESPACE"," ",820],["T_CONSTANT_ENCAPSED_STRING","'import'",820],",",["T_WHITESPACE","\n            ",820],["T_STRING","false",821],",",["T_WHITESPACE","\n            ",821],["T_STRING","false",822],["T_WHITESPACE","\n        ",822],")",";",["T_WHITESPACE","\n\n        ",823],["T_FOREACH","foreach",825],["T_WHITESPACE"," ",825],"(",["T_VARIABLE","$product",825],["T_OBJECT_OPERATOR","->",825],["T_STRING","getMediaAttributes",825],"(",")",["T_WHITESPACE"," ",825],["T_AS","as",825],["T_WHITESPACE"," ",825],["T_VARIABLE","$mediaAttributeCode",825],["T_WHITESPACE"," ",825],["T_DOUBLE_ARROW","=>",825],["T_WHITESPACE"," ",825],["T_VARIABLE","$mediaAttribute",825],")",["T_WHITESPACE"," ",825],"{",["T_WHITESPACE","\n            ",825],["T_VARIABLE","$addedFile",826],["T_WHITESPACE"," ",826],"=",["T_WHITESPACE"," ",826],["T_CONSTANT_ENCAPSED_STRING","''",826],";",["T_WHITESPACE","\n            ",826],["T_IF","if",827],["T_WHITESPACE"," ",827],"(",["T_ISSET","isset",827],"(",["T_VARIABLE","$importData",827],"[",["T_VARIABLE","$mediaAttributeCode",827],["T_WHITESPACE"," ",827],".",["T_WHITESPACE"," ",827],["T_CONSTANT_ENCAPSED_STRING","'_label'",827],"]",")",")",["T_WHITESPACE"," ",827],"{",["T_WHITESPACE","\n                ",827],["T_VARIABLE","$fileLabel",828],["T_WHITESPACE"," ",828],"=",["T_WHITESPACE"," ",828],["T_STRING","trim",828],"(",["T_VARIABLE","$importData",828],"[",["T_VARIABLE","$mediaAttributeCode",828],["T_WHITESPACE"," ",828],".",["T_WHITESPACE"," ",828],["T_CONSTANT_ENCAPSED_STRING","'_label'",828],"]",")",";",["T_WHITESPACE","\n                ",828],["T_IF","if",829],["T_WHITESPACE"," ",829],"(",["T_ISSET","isset",829],"(",["T_VARIABLE","$importData",829],"[",["T_VARIABLE","$mediaAttributeCode",829],"]",")",")",["T_WHITESPACE"," ",829],"{",["T_WHITESPACE","\n                    ",829],["T_VARIABLE","$keyInAddedFile",830],["T_WHITESPACE"," ",830],"=",["T_WHITESPACE"," ",830],["T_STRING","array_search",830],"(",["T_VARIABLE","$importData",830],"[",["T_VARIABLE","$mediaAttributeCode",830],"]",",",["T_WHITESPACE","\n                        ",830],["T_VARIABLE","$addedFilesCorrespondence",831],"[",["T_CONSTANT_ENCAPSED_STRING","'alreadyAddedFiles'",831],"]",")",";",["T_WHITESPACE","\n                    ",831],["T_IF","if",832],["T_WHITESPACE"," ",832],"(",["T_VARIABLE","$keyInAddedFile",832],["T_WHITESPACE"," ",832],["T_IS_NOT_IDENTICAL","!==",832],["T_WHITESPACE"," ",832],["T_STRING","false",832],")",["T_WHITESPACE"," ",832],"{",["T_WHITESPACE","\n                        ",832],["T_VARIABLE","$addedFile",833],["T_WHITESPACE"," ",833],"=",["T_WHITESPACE"," ",833],["T_VARIABLE","$addedFilesCorrespondence",833],"[",["T_CONSTANT_ENCAPSED_STRING","'alreadyAddedFilesNames'",833],"]","[",["T_VARIABLE","$keyInAddedFile",833],"]",";",["T_WHITESPACE","\n                    ",833],"}",["T_WHITESPACE","\n                ",834],"}",["T_WHITESPACE","\n\n                ",835],["T_IF","if",837],["T_WHITESPACE"," ",837],"(","!",["T_VARIABLE","$addedFile",837],")",["T_WHITESPACE"," ",837],"{",["T_WHITESPACE","\n                    ",837],["T_VARIABLE","$addedFile",838],["T_WHITESPACE"," ",838],"=",["T_WHITESPACE"," ",838],["T_VARIABLE","$product",838],["T_OBJECT_OPERATOR","->",838],["T_STRING","getData",838],"(",["T_VARIABLE","$mediaAttributeCode",838],")",";",["T_WHITESPACE","\n                ",838],"}",["T_WHITESPACE","\n                ",839],["T_IF","if",840],["T_WHITESPACE"," ",840],"(",["T_VARIABLE","$fileLabel",840],["T_WHITESPACE"," ",840],["T_BOOLEAN_AND","&&",840],["T_WHITESPACE"," ",840],["T_VARIABLE","$addedFile",840],")",["T_WHITESPACE"," ",840],"{",["T_WHITESPACE","\n                    ",840],["T_VARIABLE","$this",841],["T_OBJECT_OPERATOR","->",841],["T_STRING","_galleryBackendModel",841],["T_OBJECT_OPERATOR","->",841],["T_STRING","updateImage",841],"(",["T_VARIABLE","$product",841],",",["T_WHITESPACE"," ",841],["T_VARIABLE","$addedFile",841],",",["T_WHITESPACE"," ",841],["T_ARRAY","array",841],"(",["T_CONSTANT_ENCAPSED_STRING","'label'",841],["T_WHITESPACE"," ",841],["T_DOUBLE_ARROW","=>",841],["T_WHITESPACE"," ",841],["T_VARIABLE","$fileLabel",841],")",")",";",["T_WHITESPACE","\n                ",841],"}",["T_WHITESPACE","\n            ",842],"}",["T_WHITESPACE","\n        ",843],"}",["T_WHITESPACE","\n\n        ",844],["T_VARIABLE","$product",846],["T_OBJECT_OPERATOR","->",846],["T_STRING","setIsMassupdate",846],"(",["T_STRING","true",846],")",";",["T_WHITESPACE","\n        ",846],["T_VARIABLE","$product",847],["T_OBJECT_OPERATOR","->",847],["T_STRING","setExcludeUrlRewrite",847],"(",["T_STRING","true",847],")",";",["T_WHITESPACE","\n\n        ",847],["T_VARIABLE","$product",849],["T_OBJECT_OPERATOR","->",849],["T_STRING","save",849],"(",")",";",["T_WHITESPACE","\n\n        ",849],["T_COMMENT","\/\/ Store affected products ids\n",851],["T_WHITESPACE","        ",852],["T_VARIABLE","$this",852],["T_OBJECT_OPERATOR","->",852],["T_STRING","_addAffectedEntityIds",852],"(",["T_VARIABLE","$product",852],["T_OBJECT_OPERATOR","->",852],["T_STRING","getId",852],"(",")",")",";",["T_WHITESPACE","\n\n        ",852],["T_RETURN","return",854],["T_WHITESPACE"," ",854],["T_STRING","true",854],";",["T_WHITESPACE","\n    ",854],"}",["T_WHITESPACE","\n\n    ",855],["T_DOC_COMMENT","\/**\n     * Silently save product (import)\n     *\n     * @param  array $importData\n     * @return bool\n     *\/",857],["T_WHITESPACE","\n    ",862],["T_PUBLIC","public",863],["T_WHITESPACE"," ",863],["T_FUNCTION","function",863],["T_WHITESPACE"," ",863],["T_STRING","saveRowSilently",863],"(",["T_ARRAY","array",863],["T_WHITESPACE"," ",863],["T_VARIABLE","$importData",863],")",["T_WHITESPACE","\n    ",863],"{",["T_WHITESPACE","\n        ",864],["T_TRY","try",865],["T_WHITESPACE"," ",865],"{",["T_WHITESPACE","\n            ",865],["T_VARIABLE","$result",866],["T_WHITESPACE"," ",866],"=",["T_WHITESPACE"," ",866],["T_VARIABLE","$this",866],["T_OBJECT_OPERATOR","->",866],["T_STRING","saveRow",866],"(",["T_VARIABLE","$importData",866],")",";",["T_WHITESPACE","\n            ",866],["T_RETURN","return",867],["T_WHITESPACE"," ",867],["T_VARIABLE","$result",867],";",["T_WHITESPACE","\n        ",867],"}",["T_WHITESPACE"," ",868],["T_CATCH","catch",868],["T_WHITESPACE"," ",868],"(",["T_STRING","Exception",868],["T_WHITESPACE"," ",868],["T_VARIABLE","$e",868],")",["T_WHITESPACE"," ",868],"{",["T_WHITESPACE","\n            ",868],["T_RETURN","return",869],["T_WHITESPACE"," ",869],["T_STRING","false",869],";",["T_WHITESPACE","\n        ",869],"}",["T_WHITESPACE","\n    ",870],"}",["T_WHITESPACE","\n\n    ",871],["T_DOC_COMMENT","\/**\n     * Process after import data\n     * Init indexing process after catalog product import\n     *\/",873],["T_WHITESPACE","\n    ",876],["T_PUBLIC","public",877],["T_WHITESPACE"," ",877],["T_FUNCTION","function",877],["T_WHITESPACE"," ",877],["T_STRING","finish",877],"(",")",["T_WHITESPACE","\n    ",877],"{",["T_WHITESPACE","\n        ",878],["T_DOC_COMMENT","\/**\n         * Back compatibility event\n         *\/",879],["T_WHITESPACE","\n        ",881],["T_STRING","Mage",882],["T_DOUBLE_COLON","::",882],["T_STRING","dispatchEvent",882],"(",["T_VARIABLE","$this",882],["T_OBJECT_OPERATOR","->",882],["T_STRING","_eventPrefix",882],["T_WHITESPACE"," ",882],".",["T_WHITESPACE"," ",882],["T_CONSTANT_ENCAPSED_STRING","'_after'",882],",",["T_WHITESPACE"," ",882],["T_ARRAY","array",882],"(",")",")",";",["T_WHITESPACE","\n\n        ",882],["T_VARIABLE","$entity",884],["T_WHITESPACE"," ",884],"=",["T_WHITESPACE"," ",884],["T_NEW","new",884],["T_WHITESPACE"," ",884],["T_STRING","Varien_Object",884],"(",")",";",["T_WHITESPACE","\n        ",884],["T_STRING","Mage",885],["T_DOUBLE_COLON","::",885],["T_STRING","getSingleton",885],"(",["T_CONSTANT_ENCAPSED_STRING","'index\/indexer'",885],")",["T_OBJECT_OPERATOR","->",885],["T_STRING","processEntityAction",885],"(",["T_WHITESPACE","\n            ",885],["T_VARIABLE","$entity",886],",",["T_WHITESPACE"," ",886],["T_STRING","self",886],["T_DOUBLE_COLON","::",886],["T_STRING","ENTITY",886],",",["T_WHITESPACE"," ",886],["T_STRING","Mage_Index_Model_Event",886],["T_DOUBLE_COLON","::",886],["T_STRING","TYPE_SAVE",886],["T_WHITESPACE","\n        ",886],")",";",["T_WHITESPACE","\n    ",887],"}",["T_WHITESPACE","\n",888],"}",["T_WHITESPACE","\n",889]]
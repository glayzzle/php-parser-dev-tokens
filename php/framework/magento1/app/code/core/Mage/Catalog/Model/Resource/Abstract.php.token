[["T_OPEN_TAG","<?php\n",1],["T_DOC_COMMENT","\/**\n * Magento\n *\n * NOTICE OF LICENSE\n *\n * This source file is subject to the Open Software License (OSL 3.0)\n * that is bundled with this package in the file LICENSE.txt.\n * It is also available through the world-wide-web at this URL:\n * http:\/\/opensource.org\/licenses\/osl-3.0.php\n * If you did not receive a copy of the license and are unable to\n * obtain it through the world-wide-web, please send an email\n * to license@magento.com so we can send you a copy immediately.\n *\n * DISCLAIMER\n *\n * Do not edit or add to this file if you wish to upgrade Magento to newer\n * versions in the future. If you wish to customize Magento for your\n * needs please refer to http:\/\/www.magento.com for more information.\n *\n * @category    Mage\n * @package     Mage_Catalog\n * @copyright  Copyright (c) 2006-2016 X.commerce, Inc. and affiliates (http:\/\/www.magento.com)\n * @license    http:\/\/opensource.org\/licenses\/osl-3.0.php  Open Software License (OSL 3.0)\n *\/",2],["T_WHITESPACE","\n\n\n",25],["T_DOC_COMMENT","\/**\n * Catalog entity abstract model\n *\n * @category    Mage\n * @package     Mage_Catalog\n * @author      Magento Core Team <core@magentocommerce.com>\n *\/",28],["T_WHITESPACE","\n",34],["T_ABSTRACT","abstract",35],["T_WHITESPACE"," ",35],["T_CLASS","class",35],["T_WHITESPACE"," ",35],["T_STRING","Mage_Catalog_Model_Resource_Abstract",35],["T_WHITESPACE"," ",35],["T_EXTENDS","extends",35],["T_WHITESPACE"," ",35],["T_STRING","Mage_Eav_Model_Entity_Abstract",35],["T_WHITESPACE","\n",35],"{",["T_WHITESPACE","\n    ",36],["T_DOC_COMMENT","\/**\n     * Store firstly set attributes to filter selected attributes when used specific store_id\n     *\n     * @var array\n     *\/",37],["T_WHITESPACE","\n    ",41],["T_PROTECTED","protected",42],["T_WHITESPACE"," ",42],["T_VARIABLE","$_attributes",42],["T_WHITESPACE","   ",42],"=",["T_WHITESPACE"," ",42],["T_ARRAY","array",42],"(",")",";",["T_WHITESPACE","\n\n    ",42],["T_DOC_COMMENT","\/**\n     * Redeclare attribute model\n     *\n     * @return string\n     *\/",44],["T_WHITESPACE","\n    ",48],["T_PROTECTED","protected",49],["T_WHITESPACE"," ",49],["T_FUNCTION","function",49],["T_WHITESPACE"," ",49],["T_STRING","_getDefaultAttributeModel",49],"(",")",["T_WHITESPACE","\n    ",49],"{",["T_WHITESPACE","\n        ",50],["T_RETURN","return",51],["T_WHITESPACE"," ",51],["T_CONSTANT_ENCAPSED_STRING","'catalog\/resource_eav_attribute'",51],";",["T_WHITESPACE","\n    ",51],"}",["T_WHITESPACE","\n\n    ",52],["T_DOC_COMMENT","\/**\n     * Returns default Store ID\n     *\n     * @return int\n     *\/",54],["T_WHITESPACE","\n    ",58],["T_PUBLIC","public",59],["T_WHITESPACE"," ",59],["T_FUNCTION","function",59],["T_WHITESPACE"," ",59],["T_STRING","getDefaultStoreId",59],"(",")",["T_WHITESPACE","\n    ",59],"{",["T_WHITESPACE","\n        ",60],["T_RETURN","return",61],["T_WHITESPACE"," ",61],["T_STRING","Mage_Catalog_Model_Abstract",61],["T_DOUBLE_COLON","::",61],["T_STRING","DEFAULT_STORE_ID",61],";",["T_WHITESPACE","\n    ",61],"}",["T_WHITESPACE","\n\n    ",62],["T_DOC_COMMENT","\/**\n     * Check whether the attribute is Applicable to the object\n     *\n     * @param Varien_Object $object\n     * @param Mage_Catalog_Model_Resource_Eav_Attribute $attribute\n     * @return boolean\n     *\/",64],["T_WHITESPACE","\n    ",70],["T_PROTECTED","protected",71],["T_WHITESPACE"," ",71],["T_FUNCTION","function",71],["T_WHITESPACE"," ",71],["T_STRING","_isApplicableAttribute",71],"(",["T_VARIABLE","$object",71],",",["T_WHITESPACE"," ",71],["T_VARIABLE","$attribute",71],")",["T_WHITESPACE","\n    ",71],"{",["T_WHITESPACE","\n        ",72],["T_VARIABLE","$applyTo",73],["T_WHITESPACE"," ",73],"=",["T_WHITESPACE"," ",73],["T_VARIABLE","$attribute",73],["T_OBJECT_OPERATOR","->",73],["T_STRING","getApplyTo",73],"(",")",";",["T_WHITESPACE","\n        ",73],["T_RETURN","return",74],["T_WHITESPACE"," ",74],["T_STRING","count",74],"(",["T_VARIABLE","$applyTo",74],")",["T_WHITESPACE"," ",74],["T_IS_EQUAL","==",74],["T_WHITESPACE"," ",74],["T_LNUMBER","0",74],["T_WHITESPACE"," ",74],["T_BOOLEAN_OR","||",74],["T_WHITESPACE"," ",74],["T_STRING","in_array",74],"(",["T_VARIABLE","$object",74],["T_OBJECT_OPERATOR","->",74],["T_STRING","getTypeId",74],"(",")",",",["T_WHITESPACE"," ",74],["T_VARIABLE","$applyTo",74],")",";",["T_WHITESPACE","\n    ",74],"}",["T_WHITESPACE","\n\n    ",75],["T_DOC_COMMENT","\/**\n     * Check whether attribute instance (attribute, backend, frontend or source) has method and applicable\n     *\n     * @param Mage_Eav_Model_Entity_Attribute_Abstract|Mage_Eav_Model_Entity_Attribute_Backend_Abstract|Mage_Eav_Model_Entity_Attribute_Frontend_Abstract|Mage_Eav_Model_Entity_Attribute_Source_Abstract $instance\n     * @param string $method\n     * @param array $args array of arguments\n     * @return boolean\n     *\/",77],["T_WHITESPACE","\n    ",84],["T_PROTECTED","protected",85],["T_WHITESPACE"," ",85],["T_FUNCTION","function",85],["T_WHITESPACE"," ",85],["T_STRING","_isCallableAttributeInstance",85],"(",["T_VARIABLE","$instance",85],",",["T_WHITESPACE"," ",85],["T_VARIABLE","$method",85],",",["T_WHITESPACE"," ",85],["T_VARIABLE","$args",85],")",["T_WHITESPACE","\n    ",85],"{",["T_WHITESPACE","\n        ",86],["T_IF","if",87],["T_WHITESPACE"," ",87],"(",["T_VARIABLE","$instance",87],["T_WHITESPACE"," ",87],["T_INSTANCEOF","instanceof",87],["T_WHITESPACE"," ",87],["T_STRING","Mage_Eav_Model_Entity_Attribute_Backend_Abstract",87],["T_WHITESPACE","\n            ",87],["T_BOOLEAN_AND","&&",88],["T_WHITESPACE"," ",88],"(",["T_VARIABLE","$method",88],["T_WHITESPACE"," ",88],["T_IS_EQUAL","==",88],["T_WHITESPACE"," ",88],["T_CONSTANT_ENCAPSED_STRING","'beforeSave'",88],["T_WHITESPACE"," ",88],["T_BOOLEAN_OR","||",88],["T_WHITESPACE"," ",88],["T_VARIABLE","$method",88],["T_WHITESPACE"," ",88],"=",["T_WHITESPACE"," ",88],["T_CONSTANT_ENCAPSED_STRING","'afterSave'",88],")",["T_WHITESPACE","\n        ",88],")",["T_WHITESPACE"," ",89],"{",["T_WHITESPACE","\n            ",89],["T_VARIABLE","$attributeCode",90],["T_WHITESPACE"," ",90],"=",["T_WHITESPACE"," ",90],["T_VARIABLE","$instance",90],["T_OBJECT_OPERATOR","->",90],["T_STRING","getAttribute",90],"(",")",["T_OBJECT_OPERATOR","->",90],["T_STRING","getAttributeCode",90],"(",")",";",["T_WHITESPACE","\n            ",90],["T_IF","if",91],["T_WHITESPACE"," ",91],"(",["T_ISSET","isset",91],"(",["T_VARIABLE","$args",91],"[",["T_LNUMBER","0",91],"]",")",["T_WHITESPACE"," ",91],["T_BOOLEAN_AND","&&",91],["T_WHITESPACE"," ",91],["T_VARIABLE","$args",91],"[",["T_LNUMBER","0",91],"]",["T_WHITESPACE"," ",91],["T_INSTANCEOF","instanceof",91],["T_WHITESPACE"," ",91],["T_STRING","Varien_Object",91],["T_WHITESPACE"," ",91],["T_BOOLEAN_AND","&&",91],["T_WHITESPACE"," ",91],["T_VARIABLE","$args",91],"[",["T_LNUMBER","0",91],"]",["T_OBJECT_OPERATOR","->",91],["T_STRING","getData",91],"(",["T_VARIABLE","$attributeCode",91],")",["T_WHITESPACE"," ",91],["T_IS_IDENTICAL","===",91],["T_WHITESPACE"," ",91],["T_STRING","false",91],")",["T_WHITESPACE"," ",91],"{",["T_WHITESPACE","\n                ",91],["T_RETURN","return",92],["T_WHITESPACE"," ",92],["T_STRING","false",92],";",["T_WHITESPACE","\n            ",92],"}",["T_WHITESPACE","\n        ",93],"}",["T_WHITESPACE","\n\n        ",94],["T_RETURN","return",96],["T_WHITESPACE"," ",96],["T_STRING","parent",96],["T_DOUBLE_COLON","::",96],["T_STRING","_isCallableAttributeInstance",96],"(",["T_VARIABLE","$instance",96],",",["T_WHITESPACE"," ",96],["T_VARIABLE","$method",96],",",["T_WHITESPACE"," ",96],["T_VARIABLE","$args",96],")",";",["T_WHITESPACE","\n    ",96],"}",["T_WHITESPACE","\n\n\n\n    ",97],["T_DOC_COMMENT","\/**\n     * Retrieve select object for loading entity attributes values\n     * Join attribute store value\n     *\n     * @param Varien_Object $object\n     * @param string $table\n     * @return Varien_Db_Select\n     *\/",101],["T_WHITESPACE","\n    ",108],["T_PROTECTED","protected",109],["T_WHITESPACE"," ",109],["T_FUNCTION","function",109],["T_WHITESPACE"," ",109],["T_STRING","_getLoadAttributesSelect",109],"(",["T_VARIABLE","$object",109],",",["T_WHITESPACE"," ",109],["T_VARIABLE","$table",109],")",["T_WHITESPACE","\n    ",109],"{",["T_WHITESPACE","\n        ",110],["T_DOC_COMMENT","\/**\n         * This condition is applicable for all cases when we was work in not single\n         * store mode, customize some value per specific store view and than back\n         * to single store mode. We should load correct values\n         *\/",111],["T_WHITESPACE","\n        ",115],["T_IF","if",116],["T_WHITESPACE"," ",116],"(",["T_STRING","Mage",116],["T_DOUBLE_COLON","::",116],["T_STRING","app",116],"(",")",["T_OBJECT_OPERATOR","->",116],["T_STRING","isSingleStoreMode",116],"(",")",")",["T_WHITESPACE"," ",116],"{",["T_WHITESPACE","\n            ",116],["T_VARIABLE","$storeId",117],["T_WHITESPACE"," ",117],"=",["T_WHITESPACE"," ",117],["T_INT_CAST","(int)",117],["T_STRING","Mage",117],["T_DOUBLE_COLON","::",117],["T_STRING","app",117],"(",")",["T_OBJECT_OPERATOR","->",117],["T_STRING","getStore",117],"(",["T_STRING","true",117],")",["T_OBJECT_OPERATOR","->",117],["T_STRING","getId",117],"(",")",";",["T_WHITESPACE","\n        ",117],"}",["T_WHITESPACE"," ",118],["T_ELSE","else",118],["T_WHITESPACE"," ",118],"{",["T_WHITESPACE","\n            ",118],["T_VARIABLE","$storeId",119],["T_WHITESPACE"," ",119],"=",["T_WHITESPACE"," ",119],["T_INT_CAST","(int)",119],["T_VARIABLE","$object",119],["T_OBJECT_OPERATOR","->",119],["T_STRING","getStoreId",119],"(",")",";",["T_WHITESPACE","\n        ",119],"}",["T_WHITESPACE","\n\n        ",120],["T_VARIABLE","$setId",122],["T_WHITESPACE","  ",122],"=",["T_WHITESPACE"," ",122],["T_VARIABLE","$object",122],["T_OBJECT_OPERATOR","->",122],["T_STRING","getAttributeSetId",122],"(",")",";",["T_WHITESPACE","\n        ",122],["T_VARIABLE","$storeIds",123],["T_WHITESPACE"," ",123],"=",["T_WHITESPACE"," ",123],["T_ARRAY","array",123],"(",["T_VARIABLE","$this",123],["T_OBJECT_OPERATOR","->",123],["T_STRING","getDefaultStoreId",123],"(",")",")",";",["T_WHITESPACE","\n        ",123],["T_IF","if",124],["T_WHITESPACE"," ",124],"(",["T_VARIABLE","$storeId",124],["T_WHITESPACE"," ",124],["T_IS_NOT_EQUAL","!=",124],["T_WHITESPACE"," ",124],["T_VARIABLE","$this",124],["T_OBJECT_OPERATOR","->",124],["T_STRING","getDefaultStoreId",124],"(",")",")",["T_WHITESPACE"," ",124],"{",["T_WHITESPACE","\n            ",124],["T_VARIABLE","$storeIds",125],"[","]",["T_WHITESPACE"," ",125],"=",["T_WHITESPACE"," ",125],["T_VARIABLE","$storeId",125],";",["T_WHITESPACE","\n        ",125],"}",["T_WHITESPACE","\n\n        ",126],["T_VARIABLE","$select",128],["T_WHITESPACE"," ",128],"=",["T_WHITESPACE"," ",128],["T_VARIABLE","$this",128],["T_OBJECT_OPERATOR","->",128],["T_STRING","_getReadAdapter",128],"(",")",["T_OBJECT_OPERATOR","->",128],["T_STRING","select",128],"(",")",["T_WHITESPACE","\n            ",128],["T_OBJECT_OPERATOR","->",129],["T_STRING","from",129],"(",["T_ARRAY","array",129],"(",["T_CONSTANT_ENCAPSED_STRING","'attr_table'",129],["T_WHITESPACE"," ",129],["T_DOUBLE_ARROW","=>",129],["T_WHITESPACE"," ",129],["T_VARIABLE","$table",129],")",",",["T_WHITESPACE"," ",129],["T_ARRAY","array",129],"(",")",")",["T_WHITESPACE","\n            ",129],["T_OBJECT_OPERATOR","->",130],["T_STRING","where",130],"(","\"",["T_ENCAPSED_AND_WHITESPACE","attr_table.",130],["T_CURLY_OPEN","{",130],["T_VARIABLE","$this",130],["T_OBJECT_OPERATOR","->",130],["T_STRING","getEntityIdField",130],"(",")","}",["T_ENCAPSED_AND_WHITESPACE"," = ?",130],"\"",",",["T_WHITESPACE"," ",130],["T_VARIABLE","$object",130],["T_OBJECT_OPERATOR","->",130],["T_STRING","getId",130],"(",")",")",["T_WHITESPACE","\n            ",130],["T_OBJECT_OPERATOR","->",131],["T_STRING","where",131],"(",["T_CONSTANT_ENCAPSED_STRING","'attr_table.store_id IN (?)'",131],",",["T_WHITESPACE"," ",131],["T_VARIABLE","$storeIds",131],")",";",["T_WHITESPACE","\n        ",131],["T_IF","if",132],["T_WHITESPACE"," ",132],"(",["T_VARIABLE","$setId",132],")",["T_WHITESPACE"," ",132],"{",["T_WHITESPACE","\n            ",132],["T_VARIABLE","$select",133],["T_OBJECT_OPERATOR","->",133],["T_STRING","join",133],"(",["T_WHITESPACE","\n                ",133],["T_ARRAY","array",134],"(",["T_CONSTANT_ENCAPSED_STRING","'set_table'",134],["T_WHITESPACE"," ",134],["T_DOUBLE_ARROW","=>",134],["T_WHITESPACE"," ",134],["T_VARIABLE","$this",134],["T_OBJECT_OPERATOR","->",134],["T_STRING","getTable",134],"(",["T_CONSTANT_ENCAPSED_STRING","'eav\/entity_attribute'",134],")",")",",",["T_WHITESPACE","\n                ",134],["T_VARIABLE","$this",135],["T_OBJECT_OPERATOR","->",135],["T_STRING","_getReadAdapter",135],"(",")",["T_OBJECT_OPERATOR","->",135],["T_STRING","quoteInto",135],"(",["T_CONSTANT_ENCAPSED_STRING","'attr_table.attribute_id = set_table.attribute_id'",135],["T_WHITESPACE"," ",135],".",["T_WHITESPACE","\n                ",135],["T_CONSTANT_ENCAPSED_STRING","' AND set_table.attribute_set_id = ?'",136],",",["T_WHITESPACE"," ",136],["T_VARIABLE","$setId",136],")",",",["T_WHITESPACE","\n                ",136],["T_ARRAY","array",137],"(",")",["T_WHITESPACE","\n            ",137],")",";",["T_WHITESPACE","\n        ",138],"}",["T_WHITESPACE","\n        ",139],["T_RETURN","return",140],["T_WHITESPACE"," ",140],["T_VARIABLE","$select",140],";",["T_WHITESPACE","\n    ",140],"}",["T_WHITESPACE","\n\n    ",141],["T_DOC_COMMENT","\/**\n     * Adds Columns prepared for union\n     *\n     * @param Varien_Db_Select $select\n     * @param string $table\n     * @param string $type\n     * @return Varien_Db_Select\n     *\/",143],["T_WHITESPACE","\n    ",150],["T_PROTECTED","protected",151],["T_WHITESPACE"," ",151],["T_FUNCTION","function",151],["T_WHITESPACE"," ",151],["T_STRING","_addLoadAttributesSelectFields",151],"(",["T_VARIABLE","$select",151],",",["T_WHITESPACE"," ",151],["T_VARIABLE","$table",151],",",["T_WHITESPACE"," ",151],["T_VARIABLE","$type",151],")",["T_WHITESPACE","\n    ",151],"{",["T_WHITESPACE","\n        ",152],["T_VARIABLE","$select",153],["T_OBJECT_OPERATOR","->",153],["T_STRING","columns",153],"(",["T_WHITESPACE","\n            ",153],["T_STRING","Mage",154],["T_DOUBLE_COLON","::",154],["T_STRING","getResourceHelper",154],"(",["T_CONSTANT_ENCAPSED_STRING","'catalog'",154],")",["T_OBJECT_OPERATOR","->",154],["T_STRING","attributeSelectFields",154],"(",["T_CONSTANT_ENCAPSED_STRING","'attr_table'",154],",",["T_WHITESPACE"," ",154],["T_VARIABLE","$type",154],")",["T_WHITESPACE","\n        ",154],")",";",["T_WHITESPACE","\n        ",155],["T_RETURN","return",156],["T_WHITESPACE"," ",156],["T_VARIABLE","$select",156],";",["T_WHITESPACE","\n    ",156],"}",["T_WHITESPACE","\n\n    ",157],["T_DOC_COMMENT","\/**\n     * Prepare select object for loading entity attributes values\n     *\n     * @param array $selects\n     * @return Varien_Db_Select\n     *\/",159],["T_WHITESPACE","\n    ",164],["T_PROTECTED","protected",165],["T_WHITESPACE"," ",165],["T_FUNCTION","function",165],["T_WHITESPACE"," ",165],["T_STRING","_prepareLoadSelect",165],"(",["T_ARRAY","array",165],["T_WHITESPACE"," ",165],["T_VARIABLE","$selects",165],")",["T_WHITESPACE","\n    ",165],"{",["T_WHITESPACE","\n        ",166],["T_VARIABLE","$select",167],["T_WHITESPACE"," ",167],"=",["T_WHITESPACE"," ",167],["T_STRING","parent",167],["T_DOUBLE_COLON","::",167],["T_STRING","_prepareLoadSelect",167],"(",["T_VARIABLE","$selects",167],")",";",["T_WHITESPACE","\n        ",167],["T_VARIABLE","$select",168],["T_OBJECT_OPERATOR","->",168],["T_STRING","order",168],"(",["T_CONSTANT_ENCAPSED_STRING","'store_id'",168],")",";",["T_WHITESPACE","\n        ",168],["T_RETURN","return",169],["T_WHITESPACE"," ",169],["T_VARIABLE","$select",169],";",["T_WHITESPACE","\n    ",169],"}",["T_WHITESPACE","\n\n    ",170],["T_DOC_COMMENT","\/**\n     * Initialize attribute value for object\n     *\n     * @param Mage_Catalog_Model_Abstract $object\n     * @param array $valueRow\n     * @return Mage_Catalog_Model_Resource_Abstract\n     *\/",172],["T_WHITESPACE","\n    ",178],["T_PROTECTED","protected",179],["T_WHITESPACE"," ",179],["T_FUNCTION","function",179],["T_WHITESPACE"," ",179],["T_STRING","_setAttributeValue",179],"(",["T_VARIABLE","$object",179],",",["T_WHITESPACE"," ",179],["T_VARIABLE","$valueRow",179],")",["T_WHITESPACE","\n    ",179],"{",["T_WHITESPACE","\n        ",180],["T_VARIABLE","$attribute",181],["T_WHITESPACE"," ",181],"=",["T_WHITESPACE"," ",181],["T_VARIABLE","$this",181],["T_OBJECT_OPERATOR","->",181],["T_STRING","getAttribute",181],"(",["T_VARIABLE","$valueRow",181],"[",["T_CONSTANT_ENCAPSED_STRING","'attribute_id'",181],"]",")",";",["T_WHITESPACE","\n        ",181],["T_IF","if",182],["T_WHITESPACE"," ",182],"(",["T_VARIABLE","$attribute",182],")",["T_WHITESPACE"," ",182],"{",["T_WHITESPACE","\n            ",182],["T_VARIABLE","$attributeCode",183],["T_WHITESPACE"," ",183],"=",["T_WHITESPACE"," ",183],["T_VARIABLE","$attribute",183],["T_OBJECT_OPERATOR","->",183],["T_STRING","getAttributeCode",183],"(",")",";",["T_WHITESPACE","\n            ",183],["T_VARIABLE","$isDefaultStore",184],["T_WHITESPACE"," ",184],"=",["T_WHITESPACE"," ",184],["T_VARIABLE","$valueRow",184],"[",["T_CONSTANT_ENCAPSED_STRING","'store_id'",184],"]",["T_WHITESPACE"," ",184],["T_IS_EQUAL","==",184],["T_WHITESPACE"," ",184],["T_VARIABLE","$this",184],["T_OBJECT_OPERATOR","->",184],["T_STRING","getDefaultStoreId",184],"(",")",";",["T_WHITESPACE","\n            ",184],["T_IF","if",185],["T_WHITESPACE"," ",185],"(",["T_ISSET","isset",185],"(",["T_VARIABLE","$this",185],["T_OBJECT_OPERATOR","->",185],["T_STRING","_attributes",185],"[",["T_VARIABLE","$valueRow",185],"[",["T_CONSTANT_ENCAPSED_STRING","'attribute_id'",185],"]","]",")",")",["T_WHITESPACE"," ",185],"{",["T_WHITESPACE","\n                ",185],["T_IF","if",186],["T_WHITESPACE"," ",186],"(",["T_VARIABLE","$isDefaultStore",186],")",["T_WHITESPACE"," ",186],"{",["T_WHITESPACE","\n                    ",186],["T_VARIABLE","$object",187],["T_OBJECT_OPERATOR","->",187],["T_STRING","setAttributeDefaultValue",187],"(",["T_VARIABLE","$attributeCode",187],",",["T_WHITESPACE"," ",187],["T_VARIABLE","$valueRow",187],"[",["T_CONSTANT_ENCAPSED_STRING","'value'",187],"]",")",";",["T_WHITESPACE","\n                ",187],"}",["T_WHITESPACE"," ",188],["T_ELSE","else",188],["T_WHITESPACE"," ",188],"{",["T_WHITESPACE","\n                    ",188],["T_VARIABLE","$object",189],["T_OBJECT_OPERATOR","->",189],["T_STRING","setAttributeDefaultValue",189],"(",["T_WHITESPACE","\n                        ",189],["T_VARIABLE","$attributeCode",190],",",["T_WHITESPACE","\n                        ",190],["T_VARIABLE","$this",191],["T_OBJECT_OPERATOR","->",191],["T_STRING","_attributes",191],"[",["T_VARIABLE","$valueRow",191],"[",["T_CONSTANT_ENCAPSED_STRING","'attribute_id'",191],"]","]","[",["T_CONSTANT_ENCAPSED_STRING","'value'",191],"]",["T_WHITESPACE","\n                    ",191],")",";",["T_WHITESPACE","\n                ",192],"}",["T_WHITESPACE","\n            ",193],"}",["T_WHITESPACE"," ",194],["T_ELSE","else",194],["T_WHITESPACE"," ",194],"{",["T_WHITESPACE","\n                ",194],["T_VARIABLE","$this",195],["T_OBJECT_OPERATOR","->",195],["T_STRING","_attributes",195],"[",["T_VARIABLE","$valueRow",195],"[",["T_CONSTANT_ENCAPSED_STRING","'attribute_id'",195],"]","]",["T_WHITESPACE"," ",195],"=",["T_WHITESPACE"," ",195],["T_VARIABLE","$valueRow",195],";",["T_WHITESPACE","\n            ",195],"}",["T_WHITESPACE","\n\n            ",196],["T_VARIABLE","$value",198],["T_WHITESPACE","   ",198],"=",["T_WHITESPACE"," ",198],["T_VARIABLE","$valueRow",198],"[",["T_CONSTANT_ENCAPSED_STRING","'value'",198],"]",";",["T_WHITESPACE","\n            ",198],["T_VARIABLE","$valueId",199],["T_WHITESPACE"," ",199],"=",["T_WHITESPACE"," ",199],["T_VARIABLE","$valueRow",199],"[",["T_CONSTANT_ENCAPSED_STRING","'value_id'",199],"]",";",["T_WHITESPACE","\n\n            ",199],["T_VARIABLE","$object",201],["T_OBJECT_OPERATOR","->",201],["T_STRING","setData",201],"(",["T_VARIABLE","$attributeCode",201],",",["T_WHITESPACE"," ",201],["T_VARIABLE","$value",201],")",";",["T_WHITESPACE","\n            ",201],["T_IF","if",202],["T_WHITESPACE"," ",202],"(","!",["T_VARIABLE","$isDefaultStore",202],")",["T_WHITESPACE"," ",202],"{",["T_WHITESPACE","\n                ",202],["T_VARIABLE","$object",203],["T_OBJECT_OPERATOR","->",203],["T_STRING","setExistsStoreValueFlag",203],"(",["T_VARIABLE","$attributeCode",203],")",";",["T_WHITESPACE","\n            ",203],"}",["T_WHITESPACE","\n            ",204],["T_VARIABLE","$attribute",205],["T_OBJECT_OPERATOR","->",205],["T_STRING","getBackend",205],"(",")",["T_OBJECT_OPERATOR","->",205],["T_STRING","setEntityValueId",205],"(",["T_VARIABLE","$object",205],",",["T_WHITESPACE"," ",205],["T_VARIABLE","$valueId",205],")",";",["T_WHITESPACE","\n        ",205],"}",["T_WHITESPACE","\n\n        ",206],["T_RETURN","return",208],["T_WHITESPACE"," ",208],["T_VARIABLE","$this",208],";",["T_WHITESPACE","\n    ",208],"}",["T_WHITESPACE","\n\n    ",209],["T_DOC_COMMENT","\/**\n     * Insert or Update attribute data\n     *\n     * @param Mage_Catalog_Model_Abstract $object\n     * @param Mage_Eav_Model_Entity_Attribute_Abstract $attribute\n     * @param mixed $value\n     * @return Mage_Catalog_Model_Resource_Abstract\n     *\/",211],["T_WHITESPACE","\n    ",218],["T_PROTECTED","protected",219],["T_WHITESPACE"," ",219],["T_FUNCTION","function",219],["T_WHITESPACE"," ",219],["T_STRING","_saveAttributeValue",219],"(",["T_VARIABLE","$object",219],",",["T_WHITESPACE"," ",219],["T_VARIABLE","$attribute",219],",",["T_WHITESPACE"," ",219],["T_VARIABLE","$value",219],")",["T_WHITESPACE","\n    ",219],"{",["T_WHITESPACE","\n        ",220],["T_VARIABLE","$write",221],["T_WHITESPACE","   ",221],"=",["T_WHITESPACE"," ",221],["T_VARIABLE","$this",221],["T_OBJECT_OPERATOR","->",221],["T_STRING","_getWriteAdapter",221],"(",")",";",["T_WHITESPACE","\n        ",221],["T_VARIABLE","$storeId",222],["T_WHITESPACE"," ",222],"=",["T_WHITESPACE"," ",222],["T_INT_CAST","(int)",222],["T_STRING","Mage",222],["T_DOUBLE_COLON","::",222],["T_STRING","app",222],"(",")",["T_OBJECT_OPERATOR","->",222],["T_STRING","getStore",222],"(",["T_VARIABLE","$object",222],["T_OBJECT_OPERATOR","->",222],["T_STRING","getStoreId",222],"(",")",")",["T_OBJECT_OPERATOR","->",222],["T_STRING","getId",222],"(",")",";",["T_WHITESPACE","\n        ",222],["T_VARIABLE","$table",223],["T_WHITESPACE","   ",223],"=",["T_WHITESPACE"," ",223],["T_VARIABLE","$attribute",223],["T_OBJECT_OPERATOR","->",223],["T_STRING","getBackend",223],"(",")",["T_OBJECT_OPERATOR","->",223],["T_STRING","getTable",223],"(",")",";",["T_WHITESPACE","\n\n        ",223],["T_DOC_COMMENT","\/**\n         * If we work in single store mode all values should be saved just\n         * for default store id\n         * In this case we clear all not default values\n         *\/",225],["T_WHITESPACE","\n        ",229],["T_IF","if",230],["T_WHITESPACE"," ",230],"(",["T_STRING","Mage",230],["T_DOUBLE_COLON","::",230],["T_STRING","app",230],"(",")",["T_OBJECT_OPERATOR","->",230],["T_STRING","isSingleStoreMode",230],"(",")",")",["T_WHITESPACE"," ",230],"{",["T_WHITESPACE","\n            ",230],["T_VARIABLE","$storeId",231],["T_WHITESPACE"," ",231],"=",["T_WHITESPACE"," ",231],["T_VARIABLE","$this",231],["T_OBJECT_OPERATOR","->",231],["T_STRING","getDefaultStoreId",231],"(",")",";",["T_WHITESPACE","\n            ",231],["T_VARIABLE","$write",232],["T_OBJECT_OPERATOR","->",232],["T_STRING","delete",232],"(",["T_VARIABLE","$table",232],",",["T_WHITESPACE"," ",232],["T_ARRAY","array",232],"(",["T_WHITESPACE","\n                ",232],["T_CONSTANT_ENCAPSED_STRING","'attribute_id = ?'",233],["T_WHITESPACE"," ",233],["T_DOUBLE_ARROW","=>",233],["T_WHITESPACE"," ",233],["T_VARIABLE","$attribute",233],["T_OBJECT_OPERATOR","->",233],["T_STRING","getAttributeId",233],"(",")",",",["T_WHITESPACE","\n                ",233],["T_CONSTANT_ENCAPSED_STRING","'entity_id = ?'",234],["T_WHITESPACE","    ",234],["T_DOUBLE_ARROW","=>",234],["T_WHITESPACE"," ",234],["T_VARIABLE","$object",234],["T_OBJECT_OPERATOR","->",234],["T_STRING","getEntityId",234],"(",")",",",["T_WHITESPACE","\n                ",234],["T_CONSTANT_ENCAPSED_STRING","'store_id <> ?'",235],["T_WHITESPACE","    ",235],["T_DOUBLE_ARROW","=>",235],["T_WHITESPACE"," ",235],["T_VARIABLE","$storeId",235],["T_WHITESPACE","\n            ",235],")",")",";",["T_WHITESPACE","\n        ",236],"}",["T_WHITESPACE","\n\n        ",237],["T_VARIABLE","$data",239],["T_WHITESPACE"," ",239],"=",["T_WHITESPACE"," ",239],["T_NEW","new",239],["T_WHITESPACE"," ",239],["T_STRING","Varien_Object",239],"(",["T_ARRAY","array",239],"(",["T_WHITESPACE","\n            ",239],["T_CONSTANT_ENCAPSED_STRING","'entity_type_id'",240],["T_WHITESPACE","    ",240],["T_DOUBLE_ARROW","=>",240],["T_WHITESPACE"," ",240],["T_VARIABLE","$attribute",240],["T_OBJECT_OPERATOR","->",240],["T_STRING","getEntityTypeId",240],"(",")",",",["T_WHITESPACE","\n            ",240],["T_CONSTANT_ENCAPSED_STRING","'attribute_id'",241],["T_WHITESPACE","      ",241],["T_DOUBLE_ARROW","=>",241],["T_WHITESPACE"," ",241],["T_VARIABLE","$attribute",241],["T_OBJECT_OPERATOR","->",241],["T_STRING","getAttributeId",241],"(",")",",",["T_WHITESPACE","\n            ",241],["T_CONSTANT_ENCAPSED_STRING","'store_id'",242],["T_WHITESPACE","          ",242],["T_DOUBLE_ARROW","=>",242],["T_WHITESPACE"," ",242],["T_VARIABLE","$storeId",242],",",["T_WHITESPACE","\n            ",242],["T_CONSTANT_ENCAPSED_STRING","'entity_id'",243],["T_WHITESPACE","         ",243],["T_DOUBLE_ARROW","=>",243],["T_WHITESPACE"," ",243],["T_VARIABLE","$object",243],["T_OBJECT_OPERATOR","->",243],["T_STRING","getEntityId",243],"(",")",",",["T_WHITESPACE","\n            ",243],["T_CONSTANT_ENCAPSED_STRING","'value'",244],["T_WHITESPACE","             ",244],["T_DOUBLE_ARROW","=>",244],["T_WHITESPACE"," ",244],["T_VARIABLE","$this",244],["T_OBJECT_OPERATOR","->",244],["T_STRING","_prepareValueForSave",244],"(",["T_VARIABLE","$value",244],",",["T_WHITESPACE"," ",244],["T_VARIABLE","$attribute",244],")",["T_WHITESPACE","\n        ",244],")",")",";",["T_WHITESPACE","\n        ",245],["T_VARIABLE","$bind",246],["T_WHITESPACE"," ",246],"=",["T_WHITESPACE"," ",246],["T_VARIABLE","$this",246],["T_OBJECT_OPERATOR","->",246],["T_STRING","_prepareDataForTable",246],"(",["T_VARIABLE","$data",246],",",["T_WHITESPACE"," ",246],["T_VARIABLE","$table",246],")",";",["T_WHITESPACE","\n\n        ",246],["T_IF","if",248],["T_WHITESPACE"," ",248],"(",["T_VARIABLE","$attribute",248],["T_OBJECT_OPERATOR","->",248],["T_STRING","isScopeStore",248],"(",")",")",["T_WHITESPACE"," ",248],"{",["T_WHITESPACE","\n            ",248],["T_DOC_COMMENT","\/**\n             * Update attribute value for store\n             *\/",249],["T_WHITESPACE","\n            ",251],["T_VARIABLE","$this",252],["T_OBJECT_OPERATOR","->",252],["T_STRING","_attributeValuesToSave",252],"[",["T_VARIABLE","$table",252],"]","[","]",["T_WHITESPACE"," ",252],"=",["T_WHITESPACE"," ",252],["T_VARIABLE","$bind",252],";",["T_WHITESPACE","\n        ",252],"}",["T_WHITESPACE"," ",253],["T_ELSE","else",253],["T_WHITESPACE"," ",253],["T_IF","if",253],["T_WHITESPACE"," ",253],"(",["T_VARIABLE","$attribute",253],["T_OBJECT_OPERATOR","->",253],["T_STRING","isScopeWebsite",253],"(",")",["T_WHITESPACE"," ",253],["T_BOOLEAN_AND","&&",253],["T_WHITESPACE"," ",253],["T_VARIABLE","$storeId",253],["T_WHITESPACE"," ",253],["T_IS_NOT_EQUAL","!=",253],["T_WHITESPACE"," ",253],["T_VARIABLE","$this",253],["T_OBJECT_OPERATOR","->",253],["T_STRING","getDefaultStoreId",253],"(",")",")",["T_WHITESPACE"," ",253],"{",["T_WHITESPACE","\n            ",253],["T_DOC_COMMENT","\/**\n             * Update attribute value for website\n             *\/",254],["T_WHITESPACE","\n            ",256],["T_VARIABLE","$storeIds",257],["T_WHITESPACE"," ",257],"=",["T_WHITESPACE"," ",257],["T_STRING","Mage",257],["T_DOUBLE_COLON","::",257],["T_STRING","app",257],"(",")",["T_OBJECT_OPERATOR","->",257],["T_STRING","getStore",257],"(",["T_VARIABLE","$storeId",257],")",["T_OBJECT_OPERATOR","->",257],["T_STRING","getWebsite",257],"(",")",["T_OBJECT_OPERATOR","->",257],["T_STRING","getStoreIds",257],"(",["T_STRING","true",257],")",";",["T_WHITESPACE","\n            ",257],["T_FOREACH","foreach",258],["T_WHITESPACE"," ",258],"(",["T_VARIABLE","$storeIds",258],["T_WHITESPACE"," ",258],["T_AS","as",258],["T_WHITESPACE"," ",258],["T_VARIABLE","$storeId",258],")",["T_WHITESPACE"," ",258],"{",["T_WHITESPACE","\n                ",258],["T_VARIABLE","$bind",259],"[",["T_CONSTANT_ENCAPSED_STRING","'store_id'",259],"]",["T_WHITESPACE"," ",259],"=",["T_WHITESPACE"," ",259],["T_INT_CAST","(int)",259],["T_VARIABLE","$storeId",259],";",["T_WHITESPACE","\n                ",259],["T_VARIABLE","$this",260],["T_OBJECT_OPERATOR","->",260],["T_STRING","_attributeValuesToSave",260],"[",["T_VARIABLE","$table",260],"]","[","]",["T_WHITESPACE"," ",260],"=",["T_WHITESPACE"," ",260],["T_VARIABLE","$bind",260],";",["T_WHITESPACE","\n            ",260],"}",["T_WHITESPACE","\n        ",261],"}",["T_WHITESPACE"," ",262],["T_ELSE","else",262],["T_WHITESPACE"," ",262],"{",["T_WHITESPACE","\n            ",262],["T_DOC_COMMENT","\/**\n             * Update global attribute value\n             *\/",263],["T_WHITESPACE","\n            ",265],["T_VARIABLE","$bind",266],"[",["T_CONSTANT_ENCAPSED_STRING","'store_id'",266],"]",["T_WHITESPACE"," ",266],"=",["T_WHITESPACE"," ",266],["T_VARIABLE","$this",266],["T_OBJECT_OPERATOR","->",266],["T_STRING","getDefaultStoreId",266],"(",")",";",["T_WHITESPACE","\n            ",266],["T_VARIABLE","$this",267],["T_OBJECT_OPERATOR","->",267],["T_STRING","_attributeValuesToSave",267],"[",["T_VARIABLE","$table",267],"]","[","]",["T_WHITESPACE"," ",267],"=",["T_WHITESPACE"," ",267],["T_VARIABLE","$bind",267],";",["T_WHITESPACE","\n        ",267],"}",["T_WHITESPACE","\n\n        ",268],["T_RETURN","return",270],["T_WHITESPACE"," ",270],["T_VARIABLE","$this",270],";",["T_WHITESPACE","\n    ",270],"}",["T_WHITESPACE","\n\n    ",271],["T_DOC_COMMENT","\/**\n     * Insert entity attribute value\n     *\n     * @param Varien_Object $object\n     * @param Mage_Eav_Model_Entity_Attribute_Abstract $attribute\n     * @param mixed $value\n     * @return Mage_Catalog_Model_Resource_Abstract\n     *\/",273],["T_WHITESPACE","\n    ",280],["T_PROTECTED","protected",281],["T_WHITESPACE"," ",281],["T_FUNCTION","function",281],["T_WHITESPACE"," ",281],["T_STRING","_insertAttribute",281],"(",["T_VARIABLE","$object",281],",",["T_WHITESPACE"," ",281],["T_VARIABLE","$attribute",281],",",["T_WHITESPACE"," ",281],["T_VARIABLE","$value",281],")",["T_WHITESPACE","\n    ",281],"{",["T_WHITESPACE","\n        ",282],["T_DOC_COMMENT","\/**\n         * save required attributes in global scope every time if store id different from default\n         *\/",283],["T_WHITESPACE","\n        ",285],["T_VARIABLE","$storeId",286],["T_WHITESPACE"," ",286],"=",["T_WHITESPACE"," ",286],["T_INT_CAST","(int)",286],["T_STRING","Mage",286],["T_DOUBLE_COLON","::",286],["T_STRING","app",286],"(",")",["T_OBJECT_OPERATOR","->",286],["T_STRING","getStore",286],"(",["T_VARIABLE","$object",286],["T_OBJECT_OPERATOR","->",286],["T_STRING","getStoreId",286],"(",")",")",["T_OBJECT_OPERATOR","->",286],["T_STRING","getId",286],"(",")",";",["T_WHITESPACE","\n        ",286],["T_IF","if",287],["T_WHITESPACE"," ",287],"(",["T_VARIABLE","$attribute",287],["T_OBJECT_OPERATOR","->",287],["T_STRING","getIsRequired",287],"(",")",["T_WHITESPACE"," ",287],["T_BOOLEAN_AND","&&",287],["T_WHITESPACE"," ",287],["T_VARIABLE","$this",287],["T_OBJECT_OPERATOR","->",287],["T_STRING","getDefaultStoreId",287],"(",")",["T_WHITESPACE"," ",287],["T_IS_NOT_EQUAL","!=",287],["T_WHITESPACE"," ",287],["T_VARIABLE","$storeId",287],")",["T_WHITESPACE"," ",287],"{",["T_WHITESPACE","\n            ",287],["T_VARIABLE","$table",288],["T_WHITESPACE"," ",288],"=",["T_WHITESPACE"," ",288],["T_VARIABLE","$attribute",288],["T_OBJECT_OPERATOR","->",288],["T_STRING","getBackend",288],"(",")",["T_OBJECT_OPERATOR","->",288],["T_STRING","getTable",288],"(",")",";",["T_WHITESPACE","\n\n            ",288],["T_VARIABLE","$select",290],["T_WHITESPACE"," ",290],"=",["T_WHITESPACE"," ",290],["T_VARIABLE","$this",290],["T_OBJECT_OPERATOR","->",290],["T_STRING","_getReadAdapter",290],"(",")",["T_OBJECT_OPERATOR","->",290],["T_STRING","select",290],"(",")",["T_WHITESPACE","\n                ",290],["T_OBJECT_OPERATOR","->",291],["T_STRING","from",291],"(",["T_VARIABLE","$table",291],")",["T_WHITESPACE","\n                ",291],["T_OBJECT_OPERATOR","->",292],["T_STRING","where",292],"(",["T_CONSTANT_ENCAPSED_STRING","'entity_type_id = ?'",292],",",["T_WHITESPACE"," ",292],["T_VARIABLE","$attribute",292],["T_OBJECT_OPERATOR","->",292],["T_STRING","getEntityTypeId",292],"(",")",")",["T_WHITESPACE","\n                ",292],["T_OBJECT_OPERATOR","->",293],["T_STRING","where",293],"(",["T_CONSTANT_ENCAPSED_STRING","'attribute_id = ?'",293],",",["T_WHITESPACE"," ",293],["T_VARIABLE","$attribute",293],["T_OBJECT_OPERATOR","->",293],["T_STRING","getAttributeId",293],"(",")",")",["T_WHITESPACE","\n                ",293],["T_OBJECT_OPERATOR","->",294],["T_STRING","where",294],"(",["T_CONSTANT_ENCAPSED_STRING","'store_id = ?'",294],",",["T_WHITESPACE"," ",294],["T_VARIABLE","$this",294],["T_OBJECT_OPERATOR","->",294],["T_STRING","getDefaultStoreId",294],"(",")",")",["T_WHITESPACE","\n                ",294],["T_OBJECT_OPERATOR","->",295],["T_STRING","where",295],"(",["T_CONSTANT_ENCAPSED_STRING","'entity_id = ?'",295],",",["T_WHITESPACE","  ",295],["T_VARIABLE","$object",295],["T_OBJECT_OPERATOR","->",295],["T_STRING","getEntityId",295],"(",")",")",";",["T_WHITESPACE","\n            ",295],["T_VARIABLE","$row",296],["T_WHITESPACE"," ",296],"=",["T_WHITESPACE"," ",296],["T_VARIABLE","$this",296],["T_OBJECT_OPERATOR","->",296],["T_STRING","_getReadAdapter",296],"(",")",["T_OBJECT_OPERATOR","->",296],["T_STRING","fetchOne",296],"(",["T_VARIABLE","$select",296],")",";",["T_WHITESPACE","\n\n            ",296],["T_IF","if",298],["T_WHITESPACE"," ",298],"(","!",["T_VARIABLE","$row",298],")",["T_WHITESPACE"," ",298],"{",["T_WHITESPACE","\n                ",298],["T_VARIABLE","$data",299],["T_WHITESPACE","  ",299],"=",["T_WHITESPACE"," ",299],["T_NEW","new",299],["T_WHITESPACE"," ",299],["T_STRING","Varien_Object",299],"(",["T_ARRAY","array",299],"(",["T_WHITESPACE","\n                    ",299],["T_CONSTANT_ENCAPSED_STRING","'entity_type_id'",300],["T_WHITESPACE","    ",300],["T_DOUBLE_ARROW","=>",300],["T_WHITESPACE"," ",300],["T_VARIABLE","$attribute",300],["T_OBJECT_OPERATOR","->",300],["T_STRING","getEntityTypeId",300],"(",")",",",["T_WHITESPACE","\n                    ",300],["T_CONSTANT_ENCAPSED_STRING","'attribute_id'",301],["T_WHITESPACE","      ",301],["T_DOUBLE_ARROW","=>",301],["T_WHITESPACE"," ",301],["T_VARIABLE","$attribute",301],["T_OBJECT_OPERATOR","->",301],["T_STRING","getAttributeId",301],"(",")",",",["T_WHITESPACE","\n                    ",301],["T_CONSTANT_ENCAPSED_STRING","'store_id'",302],["T_WHITESPACE","          ",302],["T_DOUBLE_ARROW","=>",302],["T_WHITESPACE"," ",302],["T_VARIABLE","$this",302],["T_OBJECT_OPERATOR","->",302],["T_STRING","getDefaultStoreId",302],"(",")",",",["T_WHITESPACE","\n                    ",302],["T_CONSTANT_ENCAPSED_STRING","'entity_id'",303],["T_WHITESPACE","         ",303],["T_DOUBLE_ARROW","=>",303],["T_WHITESPACE"," ",303],["T_VARIABLE","$object",303],["T_OBJECT_OPERATOR","->",303],["T_STRING","getEntityId",303],"(",")",",",["T_WHITESPACE","\n                    ",303],["T_CONSTANT_ENCAPSED_STRING","'value'",304],["T_WHITESPACE","             ",304],["T_DOUBLE_ARROW","=>",304],["T_WHITESPACE"," ",304],["T_VARIABLE","$this",304],["T_OBJECT_OPERATOR","->",304],["T_STRING","_prepareValueForSave",304],"(",["T_VARIABLE","$value",304],",",["T_WHITESPACE"," ",304],["T_VARIABLE","$attribute",304],")",["T_WHITESPACE","\n                ",304],")",")",";",["T_WHITESPACE","\n                ",305],["T_VARIABLE","$bind",306],["T_WHITESPACE","  ",306],"=",["T_WHITESPACE"," ",306],["T_VARIABLE","$this",306],["T_OBJECT_OPERATOR","->",306],["T_STRING","_prepareDataForTable",306],"(",["T_VARIABLE","$data",306],",",["T_WHITESPACE"," ",306],["T_VARIABLE","$table",306],")",";",["T_WHITESPACE","\n                ",306],["T_VARIABLE","$this",307],["T_OBJECT_OPERATOR","->",307],["T_STRING","_getWriteAdapter",307],"(",")",["T_OBJECT_OPERATOR","->",307],["T_STRING","insertOnDuplicate",307],"(",["T_VARIABLE","$table",307],",",["T_WHITESPACE"," ",307],["T_VARIABLE","$bind",307],",",["T_WHITESPACE"," ",307],["T_ARRAY","array",307],"(",["T_CONSTANT_ENCAPSED_STRING","'value'",307],")",")",";",["T_WHITESPACE","\n            ",307],"}",["T_WHITESPACE","\n        ",308],"}",["T_WHITESPACE","\n\n        ",309],["T_RETURN","return",311],["T_WHITESPACE"," ",311],["T_VARIABLE","$this",311],["T_OBJECT_OPERATOR","->",311],["T_STRING","_saveAttributeValue",311],"(",["T_VARIABLE","$object",311],",",["T_WHITESPACE"," ",311],["T_VARIABLE","$attribute",311],",",["T_WHITESPACE"," ",311],["T_VARIABLE","$value",311],")",";",["T_WHITESPACE","\n    ",311],"}",["T_WHITESPACE","\n\n    ",312],["T_DOC_COMMENT","\/**\n     * Update entity attribute value\n     *\n     * @deprecated after 1.5.1.0\n     * @see Mage_Catalog_Model_Resource_Abstract::_saveAttributeValue()\n     *\n     * @param Varien_Object $object\n     * @param Mage_Eav_Model_Entity_Attribute_Abstract $attribute\n     * @param mixed $valueId\n     * @param mixed $value\n     * @return Mage_Catalog_Model_Resource_Abstract\n     *\/",314],["T_WHITESPACE","\n    ",325],["T_PROTECTED","protected",326],["T_WHITESPACE"," ",326],["T_FUNCTION","function",326],["T_WHITESPACE"," ",326],["T_STRING","_updateAttribute",326],"(",["T_VARIABLE","$object",326],",",["T_WHITESPACE"," ",326],["T_VARIABLE","$attribute",326],",",["T_WHITESPACE"," ",326],["T_VARIABLE","$valueId",326],",",["T_WHITESPACE"," ",326],["T_VARIABLE","$value",326],")",["T_WHITESPACE","\n    ",326],"{",["T_WHITESPACE","\n        ",327],["T_RETURN","return",328],["T_WHITESPACE"," ",328],["T_VARIABLE","$this",328],["T_OBJECT_OPERATOR","->",328],["T_STRING","_saveAttributeValue",328],"(",["T_VARIABLE","$object",328],",",["T_WHITESPACE"," ",328],["T_VARIABLE","$attribute",328],",",["T_WHITESPACE"," ",328],["T_VARIABLE","$value",328],")",";",["T_WHITESPACE","\n    ",328],"}",["T_WHITESPACE","\n\n    ",329],["T_DOC_COMMENT","\/**\n     * Update attribute value for specific store\n     *\n     * @param Mage_Catalog_Model_Abstract $object\n     * @param object $attribute\n     * @param mixed $value\n     * @param int $storeId\n     * @return Mage_Catalog_Model_Resource_Abstract\n     *\/",331],["T_WHITESPACE","\n    ",339],["T_PROTECTED","protected",340],["T_WHITESPACE"," ",340],["T_FUNCTION","function",340],["T_WHITESPACE"," ",340],["T_STRING","_updateAttributeForStore",340],"(",["T_VARIABLE","$object",340],",",["T_WHITESPACE"," ",340],["T_VARIABLE","$attribute",340],",",["T_WHITESPACE"," ",340],["T_VARIABLE","$value",340],",",["T_WHITESPACE"," ",340],["T_VARIABLE","$storeId",340],")",["T_WHITESPACE","\n    ",340],"{",["T_WHITESPACE","\n        ",341],["T_VARIABLE","$adapter",342],["T_WHITESPACE"," ",342],"=",["T_WHITESPACE"," ",342],["T_VARIABLE","$this",342],["T_OBJECT_OPERATOR","->",342],["T_STRING","_getWriteAdapter",342],"(",")",";",["T_WHITESPACE","\n        ",342],["T_VARIABLE","$table",343],["T_WHITESPACE","   ",343],"=",["T_WHITESPACE"," ",343],["T_VARIABLE","$attribute",343],["T_OBJECT_OPERATOR","->",343],["T_STRING","getBackend",343],"(",")",["T_OBJECT_OPERATOR","->",343],["T_STRING","getTable",343],"(",")",";",["T_WHITESPACE","\n        ",343],["T_VARIABLE","$entityIdField",344],["T_WHITESPACE"," ",344],"=",["T_WHITESPACE"," ",344],["T_VARIABLE","$attribute",344],["T_OBJECT_OPERATOR","->",344],["T_STRING","getBackend",344],"(",")",["T_OBJECT_OPERATOR","->",344],["T_STRING","getEntityIdField",344],"(",")",";",["T_WHITESPACE","\n        ",344],["T_VARIABLE","$select",345],["T_WHITESPACE","  ",345],"=",["T_WHITESPACE"," ",345],["T_VARIABLE","$adapter",345],["T_OBJECT_OPERATOR","->",345],["T_STRING","select",345],"(",")",["T_WHITESPACE","\n            ",345],["T_OBJECT_OPERATOR","->",346],["T_STRING","from",346],"(",["T_VARIABLE","$table",346],",",["T_WHITESPACE"," ",346],["T_CONSTANT_ENCAPSED_STRING","'value_id'",346],")",["T_WHITESPACE","\n            ",346],["T_OBJECT_OPERATOR","->",347],["T_STRING","where",347],"(",["T_CONSTANT_ENCAPSED_STRING","'entity_type_id = :entity_type_id'",347],")",["T_WHITESPACE","\n            ",347],["T_OBJECT_OPERATOR","->",348],["T_STRING","where",348],"(","\"",["T_VARIABLE","$entityIdField",348],["T_ENCAPSED_AND_WHITESPACE"," = :entity_field_id",348],"\"",")",["T_WHITESPACE","\n            ",348],["T_OBJECT_OPERATOR","->",349],["T_STRING","where",349],"(",["T_CONSTANT_ENCAPSED_STRING","'store_id = :store_id'",349],")",["T_WHITESPACE","\n            ",349],["T_OBJECT_OPERATOR","->",350],["T_STRING","where",350],"(",["T_CONSTANT_ENCAPSED_STRING","'attribute_id = :attribute_id'",350],")",";",["T_WHITESPACE","\n        ",350],["T_VARIABLE","$bind",351],["T_WHITESPACE"," ",351],"=",["T_WHITESPACE"," ",351],["T_ARRAY","array",351],"(",["T_WHITESPACE","\n            ",351],["T_CONSTANT_ENCAPSED_STRING","'entity_type_id'",352],["T_WHITESPACE","  ",352],["T_DOUBLE_ARROW","=>",352],["T_WHITESPACE"," ",352],["T_VARIABLE","$object",352],["T_OBJECT_OPERATOR","->",352],["T_STRING","getEntityTypeId",352],"(",")",",",["T_WHITESPACE","\n            ",352],["T_CONSTANT_ENCAPSED_STRING","'entity_field_id'",353],["T_WHITESPACE"," ",353],["T_DOUBLE_ARROW","=>",353],["T_WHITESPACE"," ",353],["T_VARIABLE","$object",353],["T_OBJECT_OPERATOR","->",353],["T_STRING","getId",353],"(",")",",",["T_WHITESPACE","\n            ",353],["T_CONSTANT_ENCAPSED_STRING","'store_id'",354],["T_WHITESPACE","        ",354],["T_DOUBLE_ARROW","=>",354],["T_WHITESPACE"," ",354],["T_VARIABLE","$storeId",354],",",["T_WHITESPACE","\n            ",354],["T_CONSTANT_ENCAPSED_STRING","'attribute_id'",355],["T_WHITESPACE","    ",355],["T_DOUBLE_ARROW","=>",355],["T_WHITESPACE"," ",355],["T_VARIABLE","$attribute",355],["T_OBJECT_OPERATOR","->",355],["T_STRING","getId",355],"(",")",["T_WHITESPACE","\n        ",355],")",";",["T_WHITESPACE","\n        ",356],["T_VARIABLE","$valueId",357],["T_WHITESPACE"," ",357],"=",["T_WHITESPACE"," ",357],["T_VARIABLE","$adapter",357],["T_OBJECT_OPERATOR","->",357],["T_STRING","fetchOne",357],"(",["T_VARIABLE","$select",357],",",["T_WHITESPACE"," ",357],["T_VARIABLE","$bind",357],")",";",["T_WHITESPACE","\n        ",357],["T_DOC_COMMENT","\/**\n         * When value for store exist\n         *\/",358],["T_WHITESPACE","\n        ",360],["T_IF","if",361],["T_WHITESPACE"," ",361],"(",["T_VARIABLE","$valueId",361],")",["T_WHITESPACE"," ",361],"{",["T_WHITESPACE","\n            ",361],["T_VARIABLE","$bind",362],["T_WHITESPACE","  ",362],"=",["T_WHITESPACE"," ",362],["T_ARRAY","array",362],"(",["T_CONSTANT_ENCAPSED_STRING","'value'",362],["T_WHITESPACE"," ",362],["T_DOUBLE_ARROW","=>",362],["T_WHITESPACE"," ",362],["T_VARIABLE","$this",362],["T_OBJECT_OPERATOR","->",362],["T_STRING","_prepareValueForSave",362],"(",["T_VARIABLE","$value",362],",",["T_WHITESPACE"," ",362],["T_VARIABLE","$attribute",362],")",")",";",["T_WHITESPACE","\n            ",362],["T_VARIABLE","$where",363],["T_WHITESPACE"," ",363],"=",["T_WHITESPACE"," ",363],["T_ARRAY","array",363],"(",["T_CONSTANT_ENCAPSED_STRING","'value_id = ?'",363],["T_WHITESPACE"," ",363],["T_DOUBLE_ARROW","=>",363],["T_WHITESPACE"," ",363],["T_INT_CAST","(int)",363],["T_VARIABLE","$valueId",363],")",";",["T_WHITESPACE","\n\n            ",363],["T_VARIABLE","$adapter",365],["T_OBJECT_OPERATOR","->",365],["T_STRING","update",365],"(",["T_VARIABLE","$table",365],",",["T_WHITESPACE"," ",365],["T_VARIABLE","$bind",365],",",["T_WHITESPACE"," ",365],["T_VARIABLE","$where",365],")",";",["T_WHITESPACE","\n        ",365],"}",["T_WHITESPACE"," ",366],["T_ELSE","else",366],["T_WHITESPACE"," ",366],"{",["T_WHITESPACE","\n            ",366],["T_VARIABLE","$bind",367],["T_WHITESPACE","  ",367],"=",["T_WHITESPACE"," ",367],["T_ARRAY","array",367],"(",["T_WHITESPACE","\n                ",367],["T_VARIABLE","$idField",368],["T_WHITESPACE","            ",368],["T_DOUBLE_ARROW","=>",368],["T_WHITESPACE"," ",368],["T_INT_CAST","(int)",368],["T_VARIABLE","$object",368],["T_OBJECT_OPERATOR","->",368],["T_STRING","getId",368],"(",")",",",["T_WHITESPACE","\n                ",368],["T_CONSTANT_ENCAPSED_STRING","'entity_type_id'",369],["T_WHITESPACE","    ",369],["T_DOUBLE_ARROW","=>",369],["T_WHITESPACE"," ",369],["T_INT_CAST","(int)",369],["T_VARIABLE","$object",369],["T_OBJECT_OPERATOR","->",369],["T_STRING","getEntityTypeId",369],"(",")",",",["T_WHITESPACE","\n                ",369],["T_CONSTANT_ENCAPSED_STRING","'attribute_id'",370],["T_WHITESPACE","      ",370],["T_DOUBLE_ARROW","=>",370],["T_WHITESPACE"," ",370],["T_INT_CAST","(int)",370],["T_VARIABLE","$attribute",370],["T_OBJECT_OPERATOR","->",370],["T_STRING","getId",370],"(",")",",",["T_WHITESPACE","\n                ",370],["T_CONSTANT_ENCAPSED_STRING","'value'",371],["T_WHITESPACE","             ",371],["T_DOUBLE_ARROW","=>",371],["T_WHITESPACE"," ",371],["T_VARIABLE","$this",371],["T_OBJECT_OPERATOR","->",371],["T_STRING","_prepareValueForSave",371],"(",["T_VARIABLE","$value",371],",",["T_WHITESPACE"," ",371],["T_VARIABLE","$attribute",371],")",",",["T_WHITESPACE","\n                ",371],["T_CONSTANT_ENCAPSED_STRING","'store_id'",372],["T_WHITESPACE","          ",372],["T_DOUBLE_ARROW","=>",372],["T_WHITESPACE"," ",372],["T_INT_CAST","(int)",372],["T_VARIABLE","$storeId",372],["T_WHITESPACE","\n            ",372],")",";",["T_WHITESPACE","\n\n            ",373],["T_VARIABLE","$adapter",375],["T_OBJECT_OPERATOR","->",375],["T_STRING","insert",375],"(",["T_VARIABLE","$table",375],",",["T_WHITESPACE"," ",375],["T_VARIABLE","$bind",375],")",";",["T_WHITESPACE","\n        ",375],"}",["T_WHITESPACE","\n\n        ",376],["T_RETURN","return",378],["T_WHITESPACE"," ",378],["T_VARIABLE","$this",378],";",["T_WHITESPACE","\n    ",378],"}",["T_WHITESPACE","\n\n    ",379],["T_DOC_COMMENT","\/**\n     * Delete entity attribute values\n     *\n     * @param Varien_Object $object\n     * @param string $table\n     * @param array $info\n     * @return Mage_Catalog_Model_Resource_Abstract\n     *\/",381],["T_WHITESPACE","\n    ",388],["T_PROTECTED","protected",389],["T_WHITESPACE"," ",389],["T_FUNCTION","function",389],["T_WHITESPACE"," ",389],["T_STRING","_deleteAttributes",389],"(",["T_VARIABLE","$object",389],",",["T_WHITESPACE"," ",389],["T_VARIABLE","$table",389],",",["T_WHITESPACE"," ",389],["T_VARIABLE","$info",389],")",["T_WHITESPACE","\n    ",389],"{",["T_WHITESPACE","\n        ",390],["T_VARIABLE","$adapter",391],["T_WHITESPACE","            ",391],"=",["T_WHITESPACE"," ",391],["T_VARIABLE","$this",391],["T_OBJECT_OPERATOR","->",391],["T_STRING","_getWriteAdapter",391],"(",")",";",["T_WHITESPACE","\n        ",391],["T_VARIABLE","$entityIdField",392],["T_WHITESPACE","      ",392],"=",["T_WHITESPACE"," ",392],["T_VARIABLE","$this",392],["T_OBJECT_OPERATOR","->",392],["T_STRING","getEntityIdField",392],"(",")",";",["T_WHITESPACE","\n        ",392],["T_VARIABLE","$globalValues",393],["T_WHITESPACE","       ",393],"=",["T_WHITESPACE"," ",393],["T_ARRAY","array",393],"(",")",";",["T_WHITESPACE","\n        ",393],["T_VARIABLE","$websiteAttributes",394],["T_WHITESPACE","  ",394],"=",["T_WHITESPACE"," ",394],["T_ARRAY","array",394],"(",")",";",["T_WHITESPACE","\n        ",394],["T_VARIABLE","$storeAttributes",395],["T_WHITESPACE","    ",395],"=",["T_WHITESPACE"," ",395],["T_ARRAY","array",395],"(",")",";",["T_WHITESPACE","\n\n        ",395],["T_DOC_COMMENT","\/**\n         * Separate attributes by scope\n         *\/",397],["T_WHITESPACE","\n        ",399],["T_FOREACH","foreach",400],["T_WHITESPACE"," ",400],"(",["T_VARIABLE","$info",400],["T_WHITESPACE"," ",400],["T_AS","as",400],["T_WHITESPACE"," ",400],["T_VARIABLE","$itemData",400],")",["T_WHITESPACE"," ",400],"{",["T_WHITESPACE","\n            ",400],["T_VARIABLE","$attribute",401],["T_WHITESPACE"," ",401],"=",["T_WHITESPACE"," ",401],["T_VARIABLE","$this",401],["T_OBJECT_OPERATOR","->",401],["T_STRING","getAttribute",401],"(",["T_VARIABLE","$itemData",401],"[",["T_CONSTANT_ENCAPSED_STRING","'attribute_id'",401],"]",")",";",["T_WHITESPACE","\n            ",401],["T_IF","if",402],["T_WHITESPACE"," ",402],"(",["T_VARIABLE","$attribute",402],["T_OBJECT_OPERATOR","->",402],["T_STRING","isScopeStore",402],"(",")",")",["T_WHITESPACE"," ",402],"{",["T_WHITESPACE","\n                ",402],["T_VARIABLE","$storeAttributes",403],"[","]",["T_WHITESPACE"," ",403],"=",["T_WHITESPACE"," ",403],["T_INT_CAST","(int)",403],["T_VARIABLE","$itemData",403],"[",["T_CONSTANT_ENCAPSED_STRING","'attribute_id'",403],"]",";",["T_WHITESPACE","\n            ",403],"}",["T_WHITESPACE"," ",404],["T_ELSEIF","elseif",404],["T_WHITESPACE"," ",404],"(",["T_VARIABLE","$attribute",404],["T_OBJECT_OPERATOR","->",404],["T_STRING","isScopeWebsite",404],"(",")",")",["T_WHITESPACE"," ",404],"{",["T_WHITESPACE","\n                ",404],["T_VARIABLE","$websiteAttributes",405],"[","]",["T_WHITESPACE"," ",405],"=",["T_WHITESPACE"," ",405],["T_INT_CAST","(int)",405],["T_VARIABLE","$itemData",405],"[",["T_CONSTANT_ENCAPSED_STRING","'attribute_id'",405],"]",";",["T_WHITESPACE","\n            ",405],"}",["T_WHITESPACE"," ",406],["T_ELSE","else",406],["T_WHITESPACE"," ",406],"{",["T_WHITESPACE","\n                ",406],["T_VARIABLE","$globalValues",407],"[","]",["T_WHITESPACE"," ",407],"=",["T_WHITESPACE"," ",407],["T_INT_CAST","(int)",407],["T_VARIABLE","$itemData",407],"[",["T_CONSTANT_ENCAPSED_STRING","'value_id'",407],"]",";",["T_WHITESPACE","\n            ",407],"}",["T_WHITESPACE","\n        ",408],"}",["T_WHITESPACE","\n\n        ",409],["T_DOC_COMMENT","\/**\n         * Delete global scope attributes\n         *\/",411],["T_WHITESPACE","\n        ",413],["T_IF","if",414],["T_WHITESPACE"," ",414],"(","!",["T_EMPTY","empty",414],"(",["T_VARIABLE","$globalValues",414],")",")",["T_WHITESPACE"," ",414],"{",["T_WHITESPACE","\n            ",414],["T_VARIABLE","$adapter",415],["T_OBJECT_OPERATOR","->",415],["T_STRING","delete",415],"(",["T_VARIABLE","$table",415],",",["T_WHITESPACE"," ",415],["T_ARRAY","array",415],"(",["T_CONSTANT_ENCAPSED_STRING","'value_id IN (?)'",415],["T_WHITESPACE"," ",415],["T_DOUBLE_ARROW","=>",415],["T_WHITESPACE"," ",415],["T_VARIABLE","$globalValues",415],")",")",";",["T_WHITESPACE","\n        ",415],"}",["T_WHITESPACE","\n\n        ",416],["T_VARIABLE","$condition",418],["T_WHITESPACE"," ",418],"=",["T_WHITESPACE"," ",418],["T_ARRAY","array",418],"(",["T_WHITESPACE","\n            ",418],["T_VARIABLE","$entityIdField",419],["T_WHITESPACE"," ",419],".",["T_WHITESPACE"," ",419],["T_CONSTANT_ENCAPSED_STRING","' = ?'",419],["T_WHITESPACE"," ",419],["T_DOUBLE_ARROW","=>",419],["T_WHITESPACE"," ",419],["T_VARIABLE","$object",419],["T_OBJECT_OPERATOR","->",419],["T_STRING","getId",419],"(",")",",",["T_WHITESPACE","\n            ",419],["T_CONSTANT_ENCAPSED_STRING","'entity_type_id = ?'",420],["T_WHITESPACE","  ",420],["T_DOUBLE_ARROW","=>",420],["T_WHITESPACE"," ",420],["T_VARIABLE","$object",420],["T_OBJECT_OPERATOR","->",420],["T_STRING","getEntityTypeId",420],"(",")",["T_WHITESPACE","\n        ",420],")",";",["T_WHITESPACE","\n\n        ",421],["T_DOC_COMMENT","\/**\n         * Delete website scope attributes\n         *\/",423],["T_WHITESPACE","\n        ",425],["T_IF","if",426],["T_WHITESPACE"," ",426],"(","!",["T_EMPTY","empty",426],"(",["T_VARIABLE","$websiteAttributes",426],")",")",["T_WHITESPACE"," ",426],"{",["T_WHITESPACE","\n            ",426],["T_VARIABLE","$storeIds",427],["T_WHITESPACE"," ",427],"=",["T_WHITESPACE"," ",427],["T_VARIABLE","$object",427],["T_OBJECT_OPERATOR","->",427],["T_STRING","getWebsiteStoreIds",427],"(",")",";",["T_WHITESPACE","\n            ",427],["T_IF","if",428],["T_WHITESPACE"," ",428],"(","!",["T_EMPTY","empty",428],"(",["T_VARIABLE","$storeIds",428],")",")",["T_WHITESPACE"," ",428],"{",["T_WHITESPACE","\n                ",428],["T_VARIABLE","$delCondition",429],["T_WHITESPACE"," ",429],"=",["T_WHITESPACE"," ",429],["T_VARIABLE","$condition",429],";",["T_WHITESPACE","\n                ",429],["T_VARIABLE","$delCondition",430],"[",["T_CONSTANT_ENCAPSED_STRING","'attribute_id IN(?)'",430],"]",["T_WHITESPACE"," ",430],"=",["T_WHITESPACE"," ",430],["T_VARIABLE","$websiteAttributes",430],";",["T_WHITESPACE","\n                ",430],["T_VARIABLE","$delCondition",431],"[",["T_CONSTANT_ENCAPSED_STRING","'store_id IN(?)'",431],"]",["T_WHITESPACE"," ",431],"=",["T_WHITESPACE"," ",431],["T_VARIABLE","$storeIds",431],";",["T_WHITESPACE","\n\n                ",431],["T_VARIABLE","$adapter",433],["T_OBJECT_OPERATOR","->",433],["T_STRING","delete",433],"(",["T_VARIABLE","$table",433],",",["T_WHITESPACE"," ",433],["T_VARIABLE","$delCondition",433],")",";",["T_WHITESPACE","\n            ",433],"}",["T_WHITESPACE","\n        ",434],"}",["T_WHITESPACE","\n\n        ",435],["T_DOC_COMMENT","\/**\n         * Delete store scope attributes\n         *\/",437],["T_WHITESPACE","\n        ",439],["T_IF","if",440],["T_WHITESPACE"," ",440],"(","!",["T_EMPTY","empty",440],"(",["T_VARIABLE","$storeAttributes",440],")",")",["T_WHITESPACE"," ",440],"{",["T_WHITESPACE","\n            ",440],["T_VARIABLE","$delCondition",441],["T_WHITESPACE"," ",441],"=",["T_WHITESPACE"," ",441],["T_VARIABLE","$condition",441],";",["T_WHITESPACE","\n            ",441],["T_VARIABLE","$delCondition",442],"[",["T_CONSTANT_ENCAPSED_STRING","'attribute_id IN(?)'",442],"]",["T_WHITESPACE"," ",442],"=",["T_WHITESPACE"," ",442],["T_VARIABLE","$storeAttributes",442],";",["T_WHITESPACE","\n            ",442],["T_VARIABLE","$delCondition",443],"[",["T_CONSTANT_ENCAPSED_STRING","'store_id = ?'",443],"]",["T_WHITESPACE","       ",443],"=",["T_WHITESPACE"," ",443],["T_INT_CAST","(int)",443],["T_VARIABLE","$object",443],["T_OBJECT_OPERATOR","->",443],["T_STRING","getStoreId",443],"(",")",";",["T_WHITESPACE","\n\n            ",443],["T_VARIABLE","$adapter",445],["T_OBJECT_OPERATOR","->",445],["T_STRING","delete",445],"(",["T_VARIABLE","$table",445],",",["T_WHITESPACE"," ",445],["T_VARIABLE","$delCondition",445],")",";",["T_WHITESPACE","\n        ",445],"}",["T_WHITESPACE","\n\n        ",446],["T_RETURN","return",448],["T_WHITESPACE"," ",448],["T_VARIABLE","$this",448],";",["T_WHITESPACE","\n    ",448],"}",["T_WHITESPACE","\n\n    ",449],["T_DOC_COMMENT","\/**\n     * Retrieve Object instance with original data\n     *\n     * @param Varien_Object $object\n     * @return Varien_Object\n     *\/",451],["T_WHITESPACE","\n    ",456],["T_PROTECTED","protected",457],["T_WHITESPACE"," ",457],["T_FUNCTION","function",457],["T_WHITESPACE"," ",457],["T_STRING","_getOrigObject",457],"(",["T_VARIABLE","$object",457],")",["T_WHITESPACE","\n    ",457],"{",["T_WHITESPACE","\n        ",458],["T_VARIABLE","$className",459],["T_WHITESPACE","  ",459],"=",["T_WHITESPACE"," ",459],["T_STRING","get_class",459],"(",["T_VARIABLE","$object",459],")",";",["T_WHITESPACE","\n        ",459],["T_VARIABLE","$origObject",460],["T_WHITESPACE"," ",460],"=",["T_WHITESPACE"," ",460],["T_NEW","new",460],["T_WHITESPACE"," ",460],["T_VARIABLE","$className",460],"(",")",";",["T_WHITESPACE","\n        ",460],["T_VARIABLE","$origObject",461],["T_OBJECT_OPERATOR","->",461],["T_STRING","setData",461],"(",["T_ARRAY","array",461],"(",")",")",";",["T_WHITESPACE","\n        ",461],["T_VARIABLE","$origObject",462],["T_OBJECT_OPERATOR","->",462],["T_STRING","setStoreId",462],"(",["T_VARIABLE","$object",462],["T_OBJECT_OPERATOR","->",462],["T_STRING","getStoreId",462],"(",")",")",";",["T_WHITESPACE","\n        ",462],["T_VARIABLE","$this",463],["T_OBJECT_OPERATOR","->",463],["T_STRING","load",463],"(",["T_VARIABLE","$origObject",463],",",["T_WHITESPACE"," ",463],["T_VARIABLE","$object",463],["T_OBJECT_OPERATOR","->",463],["T_STRING","getData",463],"(",["T_VARIABLE","$this",463],["T_OBJECT_OPERATOR","->",463],["T_STRING","getEntityIdField",463],"(",")",")",")",";",["T_WHITESPACE","\n\n        ",463],["T_RETURN","return",465],["T_WHITESPACE"," ",465],["T_VARIABLE","$origObject",465],";",["T_WHITESPACE","\n    ",465],"}",["T_WHITESPACE","\n\n    ",466],["T_DOC_COMMENT","\/**\n     * Collect original data\n     *\n     * @deprecated after 1.5.1.0\n     *\n     * @param Varien_Object $object\n     * @return array\n     *\/",468],["T_WHITESPACE","\n    ",475],["T_PROTECTED","protected",476],["T_WHITESPACE"," ",476],["T_FUNCTION","function",476],["T_WHITESPACE"," ",476],["T_STRING","_collectOrigData",476],"(",["T_VARIABLE","$object",476],")",["T_WHITESPACE","\n    ",476],"{",["T_WHITESPACE","\n        ",477],["T_VARIABLE","$this",478],["T_OBJECT_OPERATOR","->",478],["T_STRING","loadAllAttributes",478],"(",["T_VARIABLE","$object",478],")",";",["T_WHITESPACE","\n\n        ",478],["T_IF","if",480],["T_WHITESPACE"," ",480],"(",["T_VARIABLE","$this",480],["T_OBJECT_OPERATOR","->",480],["T_STRING","getUseDataSharing",480],"(",")",")",["T_WHITESPACE"," ",480],"{",["T_WHITESPACE","\n            ",480],["T_VARIABLE","$storeId",481],["T_WHITESPACE"," ",481],"=",["T_WHITESPACE"," ",481],["T_VARIABLE","$object",481],["T_OBJECT_OPERATOR","->",481],["T_STRING","getStoreId",481],"(",")",";",["T_WHITESPACE","\n        ",481],"}",["T_WHITESPACE"," ",482],["T_ELSE","else",482],["T_WHITESPACE"," ",482],"{",["T_WHITESPACE","\n            ",482],["T_VARIABLE","$storeId",483],["T_WHITESPACE"," ",483],"=",["T_WHITESPACE"," ",483],["T_VARIABLE","$this",483],["T_OBJECT_OPERATOR","->",483],["T_STRING","getStoreId",483],"(",")",";",["T_WHITESPACE","\n        ",483],"}",["T_WHITESPACE","\n\n        ",484],["T_VARIABLE","$data",486],["T_WHITESPACE"," ",486],"=",["T_WHITESPACE"," ",486],["T_ARRAY","array",486],"(",")",";",["T_WHITESPACE","\n        ",486],["T_FOREACH","foreach",487],["T_WHITESPACE"," ",487],"(",["T_VARIABLE","$this",487],["T_OBJECT_OPERATOR","->",487],["T_STRING","getAttributesByTable",487],"(",")",["T_WHITESPACE"," ",487],["T_AS","as",487],["T_WHITESPACE"," ",487],["T_VARIABLE","$table",487],["T_DOUBLE_ARROW","=>",487],["T_VARIABLE","$attributes",487],")",["T_WHITESPACE"," ",487],"{",["T_WHITESPACE","\n            ",487],["T_VARIABLE","$select",488],["T_WHITESPACE"," ",488],"=",["T_WHITESPACE"," ",488],["T_VARIABLE","$this",488],["T_OBJECT_OPERATOR","->",488],["T_STRING","_getReadAdapter",488],"(",")",["T_OBJECT_OPERATOR","->",488],["T_STRING","select",488],"(",")",["T_WHITESPACE","\n                ",488],["T_OBJECT_OPERATOR","->",489],["T_STRING","from",489],"(",["T_VARIABLE","$table",489],")",["T_WHITESPACE","\n                ",489],["T_OBJECT_OPERATOR","->",490],["T_STRING","where",490],"(",["T_VARIABLE","$this",490],["T_OBJECT_OPERATOR","->",490],["T_STRING","getEntityIdField",490],"(",")",["T_WHITESPACE"," ",490],".",["T_WHITESPACE"," ",490],["T_CONSTANT_ENCAPSED_STRING","'=?'",490],",",["T_WHITESPACE"," ",490],["T_VARIABLE","$object",490],["T_OBJECT_OPERATOR","->",490],["T_STRING","getId",490],"(",")",")",";",["T_WHITESPACE","\n\n            ",490],["T_VARIABLE","$where",492],["T_WHITESPACE"," ",492],"=",["T_WHITESPACE"," ",492],["T_VARIABLE","$this",492],["T_OBJECT_OPERATOR","->",492],["T_STRING","_getReadAdapter",492],"(",")",["T_OBJECT_OPERATOR","->",492],["T_STRING","quoteInto",492],"(",["T_CONSTANT_ENCAPSED_STRING","'store_id=?'",492],",",["T_WHITESPACE"," ",492],["T_VARIABLE","$storeId",492],")",";",["T_WHITESPACE","\n\n            ",492],["T_VARIABLE","$globalAttributeIds",494],["T_WHITESPACE"," ",494],"=",["T_WHITESPACE"," ",494],["T_ARRAY","array",494],"(",")",";",["T_WHITESPACE","\n            ",494],["T_FOREACH","foreach",495],["T_WHITESPACE"," ",495],"(",["T_VARIABLE","$attributes",495],["T_WHITESPACE"," ",495],["T_AS","as",495],["T_WHITESPACE"," ",495],["T_VARIABLE","$attr",495],")",["T_WHITESPACE"," ",495],"{",["T_WHITESPACE","\n                ",495],["T_IF","if",496],["T_WHITESPACE"," ",496],"(",["T_VARIABLE","$attr",496],["T_OBJECT_OPERATOR","->",496],["T_STRING","getIsGlobal",496],"(",")",")",["T_WHITESPACE"," ",496],"{",["T_WHITESPACE","\n                    ",496],["T_VARIABLE","$globalAttributeIds",497],"[","]",["T_WHITESPACE"," ",497],"=",["T_WHITESPACE"," ",497],["T_VARIABLE","$attr",497],["T_OBJECT_OPERATOR","->",497],["T_STRING","getId",497],"(",")",";",["T_WHITESPACE","\n                ",497],"}",["T_WHITESPACE","\n            ",498],"}",["T_WHITESPACE","\n            ",499],["T_IF","if",500],["T_WHITESPACE"," ",500],"(","!",["T_EMPTY","empty",500],"(",["T_VARIABLE","$globalAttributeIds",500],")",")",["T_WHITESPACE"," ",500],"{",["T_WHITESPACE","\n                ",500],["T_VARIABLE","$where",501],["T_WHITESPACE"," ",501],["T_CONCAT_EQUAL",".=",501],["T_WHITESPACE"," ",501],["T_CONSTANT_ENCAPSED_STRING","' or '",501],".",["T_VARIABLE","$this",501],["T_OBJECT_OPERATOR","->",501],["T_STRING","_getReadAdapter",501],"(",")",["T_OBJECT_OPERATOR","->",501],["T_STRING","quoteInto",501],"(",["T_CONSTANT_ENCAPSED_STRING","'attribute_id in (?)'",501],",",["T_WHITESPACE"," ",501],["T_VARIABLE","$globalAttributeIds",501],")",";",["T_WHITESPACE","\n            ",501],"}",["T_WHITESPACE","\n            ",502],["T_VARIABLE","$select",503],["T_OBJECT_OPERATOR","->",503],["T_STRING","where",503],"(",["T_VARIABLE","$where",503],")",";",["T_WHITESPACE","\n\n            ",503],["T_VARIABLE","$values",505],["T_WHITESPACE"," ",505],"=",["T_WHITESPACE"," ",505],["T_VARIABLE","$this",505],["T_OBJECT_OPERATOR","->",505],["T_STRING","_getReadAdapter",505],"(",")",["T_OBJECT_OPERATOR","->",505],["T_STRING","fetchAll",505],"(",["T_VARIABLE","$select",505],")",";",["T_WHITESPACE","\n\n            ",505],["T_IF","if",507],["T_WHITESPACE"," ",507],"(",["T_EMPTY","empty",507],"(",["T_VARIABLE","$values",507],")",")",["T_WHITESPACE"," ",507],"{",["T_WHITESPACE","\n                ",507],["T_CONTINUE","continue",508],";",["T_WHITESPACE","\n            ",508],"}",["T_WHITESPACE","\n\n            ",509],["T_FOREACH","foreach",511],["T_WHITESPACE"," ",511],"(",["T_VARIABLE","$values",511],["T_WHITESPACE"," ",511],["T_AS","as",511],["T_WHITESPACE"," ",511],["T_VARIABLE","$row",511],")",["T_WHITESPACE"," ",511],"{",["T_WHITESPACE","\n                ",511],["T_VARIABLE","$data",512],"[",["T_VARIABLE","$this",512],["T_OBJECT_OPERATOR","->",512],["T_STRING","getAttribute",512],"(",["T_VARIABLE","$row",512],"[",["T_CONSTANT_ENCAPSED_STRING","'attribute_id'",512],"]",")",["T_OBJECT_OPERATOR","->",512],["T_STRING","getName",512],"(",")","]","[",["T_VARIABLE","$row",512],"[",["T_CONSTANT_ENCAPSED_STRING","'store_id'",512],"]","]",["T_WHITESPACE"," ",512],"=",["T_WHITESPACE"," ",512],["T_VARIABLE","$row",512],";",["T_WHITESPACE","\n            ",512],"}",["T_WHITESPACE","\n        ",513],"}",["T_WHITESPACE","\n        ",514],["T_RETURN","return",515],["T_WHITESPACE"," ",515],["T_VARIABLE","$data",515],";",["T_WHITESPACE","\n    ",515],"}",["T_WHITESPACE","\n\n    ",516],["T_DOC_COMMENT","\/**\n     * Check is attribute value empty\n     *\n     * @param Mage_Eav_Model_Entity_Attribute_Abstract $attribute\n     * @param mixed $value\n     * @return bool\n     *\/",518],["T_WHITESPACE","\n    ",524],["T_PROTECTED","protected",525],["T_WHITESPACE"," ",525],["T_FUNCTION","function",525],["T_WHITESPACE"," ",525],["T_STRING","_isAttributeValueEmpty",525],"(",["T_STRING","Mage_Eav_Model_Entity_Attribute_Abstract",525],["T_WHITESPACE"," ",525],["T_VARIABLE","$attribute",525],",",["T_WHITESPACE"," ",525],["T_VARIABLE","$value",525],")",["T_WHITESPACE","\n    ",525],"{",["T_WHITESPACE","\n        ",526],["T_RETURN","return",527],["T_WHITESPACE"," ",527],["T_VARIABLE","$value",527],["T_WHITESPACE"," ",527],["T_IS_IDENTICAL","===",527],["T_WHITESPACE"," ",527],["T_STRING","false",527],";",["T_WHITESPACE","\n    ",527],"}",["T_WHITESPACE","\n\n    ",528],["T_DOC_COMMENT","\/**\n     * Return if attribute exists in original data array.\n     * Checks also attribute's store scope:\n     * We should insert on duplicate key update values if we unchecked 'STORE VIEW' checkbox in store view.\n     *\n     * @param Mage_Eav_Model_Entity_Attribute_Abstract $attribute\n     * @param mixed $value New value of the attribute.\n     * @param array $origData\n     * @return bool\n     *\/",530],["T_WHITESPACE","\n    ",539],["T_PROTECTED","protected",540],["T_WHITESPACE"," ",540],["T_FUNCTION","function",540],["T_WHITESPACE"," ",540],["T_STRING","_canUpdateAttribute",540],"(",["T_WHITESPACE","\n        ",540],["T_STRING","Mage_Eav_Model_Entity_Attribute_Abstract",541],["T_WHITESPACE"," ",541],["T_VARIABLE","$attribute",541],",",["T_WHITESPACE","\n        ",541],["T_VARIABLE","$value",542],",",["T_WHITESPACE","\n        ",542],["T_ARRAY","array",543],["T_WHITESPACE"," ",543],"&",["T_VARIABLE","$origData",543],")",["T_WHITESPACE","\n    ",543],"{",["T_WHITESPACE","\n        ",544],["T_VARIABLE","$result",545],["T_WHITESPACE"," ",545],"=",["T_WHITESPACE"," ",545],["T_STRING","parent",545],["T_DOUBLE_COLON","::",545],["T_STRING","_canUpdateAttribute",545],"(",["T_VARIABLE","$attribute",545],",",["T_WHITESPACE"," ",545],["T_VARIABLE","$value",545],",",["T_WHITESPACE"," ",545],["T_VARIABLE","$origData",545],")",";",["T_WHITESPACE","\n        ",545],["T_IF","if",546],["T_WHITESPACE"," ",546],"(",["T_VARIABLE","$result",546],["T_WHITESPACE"," ",546],["T_BOOLEAN_AND","&&",546],["T_WHITESPACE","\n            ",546],"(",["T_VARIABLE","$attribute",547],["T_OBJECT_OPERATOR","->",547],["T_STRING","isScopeStore",547],"(",")",["T_WHITESPACE"," ",547],["T_BOOLEAN_OR","||",547],["T_WHITESPACE"," ",547],["T_VARIABLE","$attribute",547],["T_OBJECT_OPERATOR","->",547],["T_STRING","isScopeWebsite",547],"(",")",")",["T_WHITESPACE"," ",547],["T_BOOLEAN_AND","&&",547],["T_WHITESPACE","\n            ",547],"!",["T_VARIABLE","$this",548],["T_OBJECT_OPERATOR","->",548],["T_STRING","_isAttributeValueEmpty",548],"(",["T_VARIABLE","$attribute",548],",",["T_WHITESPACE"," ",548],["T_VARIABLE","$value",548],")",["T_WHITESPACE"," ",548],["T_BOOLEAN_AND","&&",548],["T_WHITESPACE","\n            ",548],["T_VARIABLE","$value",549],["T_WHITESPACE"," ",549],["T_IS_EQUAL","==",549],["T_WHITESPACE"," ",549],["T_VARIABLE","$origData",549],"[",["T_VARIABLE","$attribute",549],["T_OBJECT_OPERATOR","->",549],["T_STRING","getAttributeCode",549],"(",")","]",["T_WHITESPACE"," ",549],["T_BOOLEAN_AND","&&",549],["T_WHITESPACE","\n            ",549],["T_ISSET","isset",550],"(",["T_VARIABLE","$origData",550],"[",["T_CONSTANT_ENCAPSED_STRING","'store_id'",550],"]",")",["T_WHITESPACE"," ",550],["T_BOOLEAN_AND","&&",550],["T_WHITESPACE"," ",550],["T_VARIABLE","$origData",550],"[",["T_CONSTANT_ENCAPSED_STRING","'store_id'",550],"]",["T_WHITESPACE"," ",550],["T_IS_NOT_EQUAL","!=",550],["T_WHITESPACE"," ",550],["T_VARIABLE","$this",550],["T_OBJECT_OPERATOR","->",550],["T_STRING","getDefaultStoreId",550],"(",")",["T_WHITESPACE","\n        ",550],")",["T_WHITESPACE"," ",551],"{",["T_WHITESPACE","\n            ",551],["T_RETURN","return",552],["T_WHITESPACE"," ",552],["T_STRING","false",552],";",["T_WHITESPACE","\n        ",552],"}",["T_WHITESPACE","\n\n        ",553],["T_RETURN","return",555],["T_WHITESPACE"," ",555],["T_VARIABLE","$result",555],";",["T_WHITESPACE","\n    ",555],"}",["T_WHITESPACE","\n\n    ",556],["T_DOC_COMMENT","\/**\n     * Prepare value for save\n     *\n     * @param mixed $value\n     * @param Mage_Eav_Model_Entity_Attribute_Abstract $attribute\n     * @return mixed\n     *\/",558],["T_WHITESPACE","\n    ",564],["T_PROTECTED","protected",565],["T_WHITESPACE"," ",565],["T_FUNCTION","function",565],["T_WHITESPACE"," ",565],["T_STRING","_prepareValueForSave",565],"(",["T_VARIABLE","$value",565],",",["T_WHITESPACE"," ",565],["T_STRING","Mage_Eav_Model_Entity_Attribute_Abstract",565],["T_WHITESPACE"," ",565],["T_VARIABLE","$attribute",565],")",["T_WHITESPACE","\n    ",565],"{",["T_WHITESPACE","\n        ",566],["T_VARIABLE","$type",567],["T_WHITESPACE"," ",567],"=",["T_WHITESPACE"," ",567],["T_VARIABLE","$attribute",567],["T_OBJECT_OPERATOR","->",567],["T_STRING","getBackendType",567],"(",")",";",["T_WHITESPACE","\n        ",567],["T_IF","if",568],["T_WHITESPACE"," ",568],"(","(",["T_VARIABLE","$type",568],["T_WHITESPACE"," ",568],["T_IS_EQUAL","==",568],["T_WHITESPACE"," ",568],["T_CONSTANT_ENCAPSED_STRING","'int'",568],["T_WHITESPACE"," ",568],["T_BOOLEAN_OR","||",568],["T_WHITESPACE"," ",568],["T_VARIABLE","$type",568],["T_WHITESPACE"," ",568],["T_IS_EQUAL","==",568],["T_WHITESPACE"," ",568],["T_CONSTANT_ENCAPSED_STRING","'decimal'",568],["T_WHITESPACE"," ",568],["T_BOOLEAN_OR","||",568],["T_WHITESPACE"," ",568],["T_VARIABLE","$type",568],["T_WHITESPACE"," ",568],["T_IS_EQUAL","==",568],["T_WHITESPACE"," ",568],["T_CONSTANT_ENCAPSED_STRING","'datetime'",568],")",["T_WHITESPACE"," ",568],["T_BOOLEAN_AND","&&",568],["T_WHITESPACE"," ",568],["T_VARIABLE","$value",568],["T_WHITESPACE"," ",568],["T_IS_IDENTICAL","===",568],["T_WHITESPACE"," ",568],["T_CONSTANT_ENCAPSED_STRING","''",568],")",["T_WHITESPACE"," ",568],"{",["T_WHITESPACE","\n            ",568],["T_VARIABLE","$value",569],["T_WHITESPACE"," ",569],"=",["T_WHITESPACE"," ",569],["T_STRING","null",569],";",["T_WHITESPACE","\n        ",569],"}",["T_WHITESPACE","\n\n        ",570],["T_RETURN","return",572],["T_WHITESPACE"," ",572],["T_STRING","parent",572],["T_DOUBLE_COLON","::",572],["T_STRING","_prepareValueForSave",572],"(",["T_VARIABLE","$value",572],",",["T_WHITESPACE"," ",572],["T_VARIABLE","$attribute",572],")",";",["T_WHITESPACE","\n    ",572],"}",["T_WHITESPACE","\n\n    ",573],["T_DOC_COMMENT","\/**\n     * Retrieve attribute's raw value from DB.\n     *\n     * @param int $entityId\n     * @param int|string|array $attribute atrribute's ids or codes\n     * @param int|Mage_Core_Model_Store $store\n     * @return bool|string|array\n     *\/",575],["T_WHITESPACE","\n    ",582],["T_PUBLIC","public",583],["T_WHITESPACE"," ",583],["T_FUNCTION","function",583],["T_WHITESPACE"," ",583],["T_STRING","getAttributeRawValue",583],"(",["T_VARIABLE","$entityId",583],",",["T_WHITESPACE"," ",583],["T_VARIABLE","$attribute",583],",",["T_WHITESPACE"," ",583],["T_VARIABLE","$store",583],")",["T_WHITESPACE","\n    ",583],"{",["T_WHITESPACE","\n        ",584],["T_IF","if",585],["T_WHITESPACE"," ",585],"(","!",["T_VARIABLE","$entityId",585],["T_WHITESPACE"," ",585],["T_BOOLEAN_OR","||",585],["T_WHITESPACE"," ",585],["T_EMPTY","empty",585],"(",["T_VARIABLE","$attribute",585],")",")",["T_WHITESPACE"," ",585],"{",["T_WHITESPACE","\n            ",585],["T_RETURN","return",586],["T_WHITESPACE"," ",586],["T_STRING","false",586],";",["T_WHITESPACE","\n        ",586],"}",["T_WHITESPACE","\n        ",587],["T_IF","if",588],["T_WHITESPACE"," ",588],"(","!",["T_STRING","is_array",588],"(",["T_VARIABLE","$attribute",588],")",")",["T_WHITESPACE"," ",588],"{",["T_WHITESPACE","\n            ",588],["T_VARIABLE","$attribute",589],["T_WHITESPACE"," ",589],"=",["T_WHITESPACE"," ",589],["T_ARRAY","array",589],"(",["T_VARIABLE","$attribute",589],")",";",["T_WHITESPACE","\n        ",589],"}",["T_WHITESPACE","\n\n        ",590],["T_VARIABLE","$attributesData",592],["T_WHITESPACE","     ",592],"=",["T_WHITESPACE"," ",592],["T_ARRAY","array",592],"(",")",";",["T_WHITESPACE","\n        ",592],["T_VARIABLE","$staticAttributes",593],["T_WHITESPACE","   ",593],"=",["T_WHITESPACE"," ",593],["T_ARRAY","array",593],"(",")",";",["T_WHITESPACE","\n        ",593],["T_VARIABLE","$typedAttributes",594],["T_WHITESPACE","    ",594],"=",["T_WHITESPACE"," ",594],["T_ARRAY","array",594],"(",")",";",["T_WHITESPACE","\n        ",594],["T_VARIABLE","$staticTable",595],["T_WHITESPACE","        ",595],"=",["T_WHITESPACE"," ",595],["T_STRING","null",595],";",["T_WHITESPACE","\n        ",595],["T_VARIABLE","$adapter",596],["T_WHITESPACE","            ",596],"=",["T_WHITESPACE"," ",596],["T_VARIABLE","$this",596],["T_OBJECT_OPERATOR","->",596],["T_STRING","_getReadAdapter",596],"(",")",";",["T_WHITESPACE","\n\n        ",596],["T_FOREACH","foreach",598],["T_WHITESPACE"," ",598],"(",["T_VARIABLE","$attribute",598],["T_WHITESPACE"," ",598],["T_AS","as",598],["T_WHITESPACE"," ",598],["T_VARIABLE","$_attribute",598],")",["T_WHITESPACE"," ",598],"{",["T_WHITESPACE","\n            ",598],["T_COMMENT","\/* @var $attribute Mage_Catalog_Model_Entity_Attribute *\/",599],["T_WHITESPACE","\n            ",599],["T_VARIABLE","$_attribute",600],["T_WHITESPACE"," ",600],"=",["T_WHITESPACE"," ",600],["T_VARIABLE","$this",600],["T_OBJECT_OPERATOR","->",600],["T_STRING","getAttribute",600],"(",["T_VARIABLE","$_attribute",600],")",";",["T_WHITESPACE","\n            ",600],["T_IF","if",601],["T_WHITESPACE"," ",601],"(","!",["T_VARIABLE","$_attribute",601],")",["T_WHITESPACE"," ",601],"{",["T_WHITESPACE","\n                ",601],["T_CONTINUE","continue",602],";",["T_WHITESPACE","\n            ",602],"}",["T_WHITESPACE","\n            ",603],["T_VARIABLE","$attributeCode",604],["T_WHITESPACE"," ",604],"=",["T_WHITESPACE"," ",604],["T_VARIABLE","$_attribute",604],["T_OBJECT_OPERATOR","->",604],["T_STRING","getAttributeCode",604],"(",")",";",["T_WHITESPACE","\n            ",604],["T_VARIABLE","$attrTable",605],["T_WHITESPACE","     ",605],"=",["T_WHITESPACE"," ",605],["T_VARIABLE","$_attribute",605],["T_OBJECT_OPERATOR","->",605],["T_STRING","getBackend",605],"(",")",["T_OBJECT_OPERATOR","->",605],["T_STRING","getTable",605],"(",")",";",["T_WHITESPACE","\n            ",605],["T_VARIABLE","$isStatic",606],["T_WHITESPACE","      ",606],"=",["T_WHITESPACE"," ",606],["T_VARIABLE","$_attribute",606],["T_OBJECT_OPERATOR","->",606],["T_STRING","getBackend",606],"(",")",["T_OBJECT_OPERATOR","->",606],["T_STRING","isStatic",606],"(",")",";",["T_WHITESPACE","\n\n            ",606],["T_IF","if",608],["T_WHITESPACE"," ",608],"(",["T_VARIABLE","$isStatic",608],")",["T_WHITESPACE"," ",608],"{",["T_WHITESPACE","\n                ",608],["T_VARIABLE","$staticAttributes",609],"[","]",["T_WHITESPACE"," ",609],"=",["T_WHITESPACE"," ",609],["T_VARIABLE","$attributeCode",609],";",["T_WHITESPACE","\n                ",609],["T_VARIABLE","$staticTable",610],["T_WHITESPACE"," ",610],"=",["T_WHITESPACE"," ",610],["T_VARIABLE","$attrTable",610],";",["T_WHITESPACE","\n            ",610],"}",["T_WHITESPACE"," ",611],["T_ELSE","else",611],["T_WHITESPACE"," ",611],"{",["T_WHITESPACE","\n                ",611],["T_DOC_COMMENT","\/**\n                 * That structure needed to avoid farther sql joins for getting attribute's code by id\n                 *\/",612],["T_WHITESPACE","\n                ",614],["T_VARIABLE","$typedAttributes",615],"[",["T_VARIABLE","$attrTable",615],"]","[",["T_VARIABLE","$_attribute",615],["T_OBJECT_OPERATOR","->",615],["T_STRING","getId",615],"(",")","]",["T_WHITESPACE"," ",615],"=",["T_WHITESPACE"," ",615],["T_VARIABLE","$attributeCode",615],";",["T_WHITESPACE","\n            ",615],"}",["T_WHITESPACE","\n        ",616],"}",["T_WHITESPACE","\n\n        ",617],["T_DOC_COMMENT","\/**\n         * Collecting static attributes\n         *\/",619],["T_WHITESPACE","\n        ",621],["T_IF","if",622],["T_WHITESPACE"," ",622],"(",["T_VARIABLE","$staticAttributes",622],")",["T_WHITESPACE"," ",622],"{",["T_WHITESPACE","\n            ",622],["T_VARIABLE","$select",623],["T_WHITESPACE"," ",623],"=",["T_WHITESPACE"," ",623],["T_VARIABLE","$adapter",623],["T_OBJECT_OPERATOR","->",623],["T_STRING","select",623],"(",")",["T_OBJECT_OPERATOR","->",623],["T_STRING","from",623],"(",["T_VARIABLE","$staticTable",623],",",["T_WHITESPACE"," ",623],["T_VARIABLE","$staticAttributes",623],")",["T_WHITESPACE","\n                ",623],["T_OBJECT_OPERATOR","->",624],["T_STRING","where",624],"(",["T_VARIABLE","$this",624],["T_OBJECT_OPERATOR","->",624],["T_STRING","getEntityIdField",624],"(",")",["T_WHITESPACE"," ",624],".",["T_WHITESPACE"," ",624],["T_CONSTANT_ENCAPSED_STRING","' = :entity_id'",624],")",";",["T_WHITESPACE","\n            ",624],["T_VARIABLE","$attributesData",625],["T_WHITESPACE"," ",625],"=",["T_WHITESPACE"," ",625],["T_VARIABLE","$adapter",625],["T_OBJECT_OPERATOR","->",625],["T_STRING","fetchRow",625],"(",["T_VARIABLE","$select",625],",",["T_WHITESPACE"," ",625],["T_ARRAY","array",625],"(",["T_CONSTANT_ENCAPSED_STRING","'entity_id'",625],["T_WHITESPACE"," ",625],["T_DOUBLE_ARROW","=>",625],["T_WHITESPACE"," ",625],["T_VARIABLE","$entityId",625],")",")",";",["T_WHITESPACE","\n        ",625],"}",["T_WHITESPACE","\n\n        ",626],["T_DOC_COMMENT","\/**\n         * Collecting typed attributes, performing separate SQL query for each attribute type table\n         *\/",628],["T_WHITESPACE","\n        ",630],["T_IF","if",631],["T_WHITESPACE"," ",631],"(",["T_VARIABLE","$store",631],["T_WHITESPACE"," ",631],["T_INSTANCEOF","instanceof",631],["T_WHITESPACE"," ",631],["T_STRING","Mage_Core_Model_Store",631],")",["T_WHITESPACE"," ",631],"{",["T_WHITESPACE","\n            ",631],["T_VARIABLE","$store",632],["T_WHITESPACE"," ",632],"=",["T_WHITESPACE"," ",632],["T_VARIABLE","$store",632],["T_OBJECT_OPERATOR","->",632],["T_STRING","getId",632],"(",")",";",["T_WHITESPACE","\n        ",632],"}",["T_WHITESPACE","\n\n        ",633],["T_VARIABLE","$store",635],["T_WHITESPACE"," ",635],"=",["T_WHITESPACE"," ",635],["T_INT_CAST","(int)",635],["T_VARIABLE","$store",635],";",["T_WHITESPACE","\n        ",635],["T_IF","if",636],["T_WHITESPACE"," ",636],"(",["T_VARIABLE","$typedAttributes",636],")",["T_WHITESPACE"," ",636],"{",["T_WHITESPACE","\n            ",636],["T_FOREACH","foreach",637],["T_WHITESPACE"," ",637],"(",["T_VARIABLE","$typedAttributes",637],["T_WHITESPACE"," ",637],["T_AS","as",637],["T_WHITESPACE"," ",637],["T_VARIABLE","$table",637],["T_WHITESPACE"," ",637],["T_DOUBLE_ARROW","=>",637],["T_WHITESPACE"," ",637],["T_VARIABLE","$_attributes",637],")",["T_WHITESPACE"," ",637],"{",["T_WHITESPACE","\n                ",637],["T_VARIABLE","$select",638],["T_WHITESPACE"," ",638],"=",["T_WHITESPACE"," ",638],["T_VARIABLE","$adapter",638],["T_OBJECT_OPERATOR","->",638],["T_STRING","select",638],"(",")",["T_WHITESPACE","\n                    ",638],["T_OBJECT_OPERATOR","->",639],["T_STRING","from",639],"(",["T_ARRAY","array",639],"(",["T_CONSTANT_ENCAPSED_STRING","'default_value'",639],["T_WHITESPACE"," ",639],["T_DOUBLE_ARROW","=>",639],["T_WHITESPACE"," ",639],["T_VARIABLE","$table",639],")",",",["T_WHITESPACE"," ",639],["T_ARRAY","array",639],"(",["T_CONSTANT_ENCAPSED_STRING","'attribute_id'",639],")",")",["T_WHITESPACE","\n                    ",639],["T_OBJECT_OPERATOR","->",640],["T_STRING","where",640],"(",["T_CONSTANT_ENCAPSED_STRING","'default_value.attribute_id IN (?)'",640],",",["T_WHITESPACE"," ",640],["T_STRING","array_keys",640],"(",["T_VARIABLE","$_attributes",640],")",")",["T_WHITESPACE","\n                    ",640],["T_OBJECT_OPERATOR","->",641],["T_STRING","where",641],"(",["T_CONSTANT_ENCAPSED_STRING","'default_value.entity_type_id = :entity_type_id'",641],")",["T_WHITESPACE","\n                    ",641],["T_OBJECT_OPERATOR","->",642],["T_STRING","where",642],"(",["T_CONSTANT_ENCAPSED_STRING","'default_value.entity_id = :entity_id'",642],")",["T_WHITESPACE","\n                    ",642],["T_OBJECT_OPERATOR","->",643],["T_STRING","where",643],"(",["T_CONSTANT_ENCAPSED_STRING","'default_value.store_id = ?'",643],",",["T_WHITESPACE"," ",643],["T_LNUMBER","0",643],")",";",["T_WHITESPACE","\n                ",643],["T_VARIABLE","$bind",644],["T_WHITESPACE"," ",644],"=",["T_WHITESPACE"," ",644],["T_ARRAY","array",644],"(",["T_WHITESPACE","\n                    ",644],["T_CONSTANT_ENCAPSED_STRING","'entity_type_id'",645],["T_WHITESPACE"," ",645],["T_DOUBLE_ARROW","=>",645],["T_WHITESPACE"," ",645],["T_VARIABLE","$this",645],["T_OBJECT_OPERATOR","->",645],["T_STRING","getTypeId",645],"(",")",",",["T_WHITESPACE","\n                    ",645],["T_CONSTANT_ENCAPSED_STRING","'entity_id'",646],["T_WHITESPACE","      ",646],["T_DOUBLE_ARROW","=>",646],["T_WHITESPACE"," ",646],["T_VARIABLE","$entityId",646],",",["T_WHITESPACE","\n                ",646],")",";",["T_WHITESPACE","\n\n                ",647],["T_IF","if",649],["T_WHITESPACE"," ",649],"(",["T_VARIABLE","$store",649],["T_WHITESPACE"," ",649],["T_IS_NOT_EQUAL","!=",649],["T_WHITESPACE"," ",649],["T_VARIABLE","$this",649],["T_OBJECT_OPERATOR","->",649],["T_STRING","getDefaultStoreId",649],"(",")",")",["T_WHITESPACE"," ",649],"{",["T_WHITESPACE","\n                    ",649],["T_VARIABLE","$valueExpr",650],["T_WHITESPACE"," ",650],"=",["T_WHITESPACE"," ",650],["T_VARIABLE","$adapter",650],["T_OBJECT_OPERATOR","->",650],["T_STRING","getCheckSql",650],"(",["T_CONSTANT_ENCAPSED_STRING","'store_value.value IS NULL'",650],",",["T_WHITESPACE","\n                        ",650],["T_CONSTANT_ENCAPSED_STRING","'default_value.value'",651],",",["T_WHITESPACE"," ",651],["T_CONSTANT_ENCAPSED_STRING","'store_value.value'",651],")",";",["T_WHITESPACE","\n                    ",651],["T_VARIABLE","$joinCondition",652],["T_WHITESPACE"," ",652],"=",["T_WHITESPACE"," ",652],["T_ARRAY","array",652],"(",["T_WHITESPACE","\n                        ",652],["T_VARIABLE","$adapter",653],["T_OBJECT_OPERATOR","->",653],["T_STRING","quoteInto",653],"(",["T_CONSTANT_ENCAPSED_STRING","'store_value.attribute_id IN (?)'",653],",",["T_WHITESPACE"," ",653],["T_STRING","array_keys",653],"(",["T_VARIABLE","$_attributes",653],")",")",",",["T_WHITESPACE","\n                        ",653],["T_CONSTANT_ENCAPSED_STRING","'store_value.entity_type_id = :entity_type_id'",654],",",["T_WHITESPACE","\n                        ",654],["T_CONSTANT_ENCAPSED_STRING","'store_value.entity_id = :entity_id'",655],",",["T_WHITESPACE","\n                        ",655],["T_CONSTANT_ENCAPSED_STRING","'store_value.store_id = :store_id'",656],",",["T_WHITESPACE","\n                    ",656],")",";",["T_WHITESPACE","\n\n                    ",657],["T_VARIABLE","$select",659],["T_OBJECT_OPERATOR","->",659],["T_STRING","joinLeft",659],"(",["T_WHITESPACE","\n                        ",659],["T_ARRAY","array",660],"(",["T_CONSTANT_ENCAPSED_STRING","'store_value'",660],["T_WHITESPACE"," ",660],["T_DOUBLE_ARROW","=>",660],["T_WHITESPACE"," ",660],["T_VARIABLE","$table",660],")",",",["T_WHITESPACE","\n                        ",660],["T_STRING","implode",661],"(",["T_CONSTANT_ENCAPSED_STRING","' AND '",661],",",["T_WHITESPACE"," ",661],["T_VARIABLE","$joinCondition",661],")",",",["T_WHITESPACE","\n                        ",661],["T_ARRAY","array",662],"(",["T_CONSTANT_ENCAPSED_STRING","'attr_value'",662],["T_WHITESPACE"," ",662],["T_DOUBLE_ARROW","=>",662],["T_WHITESPACE"," ",662],["T_VARIABLE","$valueExpr",662],")",["T_WHITESPACE","\n                    ",662],")",";",["T_WHITESPACE","\n\n                    ",663],["T_VARIABLE","$bind",665],"[",["T_CONSTANT_ENCAPSED_STRING","'store_id'",665],"]",["T_WHITESPACE"," ",665],"=",["T_WHITESPACE"," ",665],["T_VARIABLE","$store",665],";",["T_WHITESPACE","\n\n                ",665],"}",["T_WHITESPACE"," ",667],["T_ELSE","else",667],["T_WHITESPACE"," ",667],"{",["T_WHITESPACE","\n                    ",667],["T_VARIABLE","$select",668],["T_OBJECT_OPERATOR","->",668],["T_STRING","columns",668],"(",["T_ARRAY","array",668],"(",["T_CONSTANT_ENCAPSED_STRING","'attr_value'",668],["T_WHITESPACE"," ",668],["T_DOUBLE_ARROW","=>",668],["T_WHITESPACE"," ",668],["T_CONSTANT_ENCAPSED_STRING","'value'",668],")",",",["T_WHITESPACE"," ",668],["T_CONSTANT_ENCAPSED_STRING","'default_value'",668],")",";",["T_WHITESPACE","\n                ",668],"}",["T_WHITESPACE","\n\n                ",669],["T_VARIABLE","$result",671],["T_WHITESPACE"," ",671],"=",["T_WHITESPACE"," ",671],["T_VARIABLE","$adapter",671],["T_OBJECT_OPERATOR","->",671],["T_STRING","fetchPairs",671],"(",["T_VARIABLE","$select",671],",",["T_WHITESPACE"," ",671],["T_VARIABLE","$bind",671],")",";",["T_WHITESPACE","\n                ",671],["T_FOREACH","foreach",672],["T_WHITESPACE"," ",672],"(",["T_VARIABLE","$result",672],["T_WHITESPACE"," ",672],["T_AS","as",672],["T_WHITESPACE"," ",672],["T_VARIABLE","$attrId",672],["T_WHITESPACE"," ",672],["T_DOUBLE_ARROW","=>",672],["T_WHITESPACE"," ",672],["T_VARIABLE","$value",672],")",["T_WHITESPACE"," ",672],"{",["T_WHITESPACE","\n                    ",672],["T_VARIABLE","$attrCode",673],["T_WHITESPACE"," ",673],"=",["T_WHITESPACE"," ",673],["T_VARIABLE","$typedAttributes",673],"[",["T_VARIABLE","$table",673],"]","[",["T_VARIABLE","$attrId",673],"]",";",["T_WHITESPACE","\n                    ",673],["T_VARIABLE","$attributesData",674],"[",["T_VARIABLE","$attrCode",674],"]",["T_WHITESPACE"," ",674],"=",["T_WHITESPACE"," ",674],["T_VARIABLE","$value",674],";",["T_WHITESPACE","\n                ",674],"}",["T_WHITESPACE","\n            ",675],"}",["T_WHITESPACE","\n        ",676],"}",["T_WHITESPACE","\n\n        ",677],["T_IF","if",679],["T_WHITESPACE"," ",679],"(",["T_STRING","sizeof",679],"(",["T_VARIABLE","$attributesData",679],")",["T_WHITESPACE"," ",679],["T_IS_EQUAL","==",679],["T_WHITESPACE"," ",679],["T_LNUMBER","1",679],")",["T_WHITESPACE"," ",679],"{",["T_WHITESPACE","\n            ",679],["T_VARIABLE","$_data",680],["T_WHITESPACE"," ",680],"=",["T_WHITESPACE"," ",680],["T_STRING","each",680],"(",["T_VARIABLE","$attributesData",680],")",";",["T_WHITESPACE","\n            ",680],["T_VARIABLE","$attributesData",681],["T_WHITESPACE"," ",681],"=",["T_WHITESPACE"," ",681],["T_VARIABLE","$_data",681],"[",["T_LNUMBER","1",681],"]",";",["T_WHITESPACE","\n        ",681],"}",["T_WHITESPACE","\n\n        ",682],["T_RETURN","return",684],["T_WHITESPACE"," ",684],["T_VARIABLE","$attributesData",684],["T_WHITESPACE"," ",684],"?",["T_WHITESPACE"," ",684],["T_VARIABLE","$attributesData",684],["T_WHITESPACE"," ",684],":",["T_WHITESPACE"," ",684],["T_STRING","false",684],";",["T_WHITESPACE","\n    ",684],"}",["T_WHITESPACE","\n\n    ",685],["T_DOC_COMMENT","\/**\n     * Reset firstly loaded attributes\n     *\n     * @param Varien_Object $object\n     * @param integer $entityId\n     * @param array|null $attributes\n     * @return Mage_Catalog_Model_Resource_Abstract\n     *\/",687],["T_WHITESPACE","\n    ",694],["T_PUBLIC","public",695],["T_WHITESPACE"," ",695],["T_FUNCTION","function",695],["T_WHITESPACE"," ",695],["T_STRING","load",695],"(",["T_VARIABLE","$object",695],",",["T_WHITESPACE"," ",695],["T_VARIABLE","$entityId",695],",",["T_WHITESPACE"," ",695],["T_VARIABLE","$attributes",695],["T_WHITESPACE"," ",695],"=",["T_WHITESPACE"," ",695],["T_ARRAY","array",695],"(",")",")",["T_WHITESPACE","\n    ",695],"{",["T_WHITESPACE","\n        ",696],["T_VARIABLE","$this",697],["T_OBJECT_OPERATOR","->",697],["T_STRING","_attributes",697],["T_WHITESPACE"," ",697],"=",["T_WHITESPACE"," ",697],["T_ARRAY","array",697],"(",")",";",["T_WHITESPACE","\n        ",697],["T_RETURN","return",698],["T_WHITESPACE"," ",698],["T_STRING","parent",698],["T_DOUBLE_COLON","::",698],["T_STRING","load",698],"(",["T_VARIABLE","$object",698],",",["T_WHITESPACE"," ",698],["T_VARIABLE","$entityId",698],",",["T_WHITESPACE"," ",698],["T_VARIABLE","$attributes",698],")",";",["T_WHITESPACE","\n    ",698],"}",["T_WHITESPACE","\n",699],"}",["T_WHITESPACE","\n",700]]
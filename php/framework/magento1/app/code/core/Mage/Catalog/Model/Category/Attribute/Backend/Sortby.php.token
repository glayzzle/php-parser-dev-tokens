[["T_OPEN_TAG","<?php\n",1],["T_DOC_COMMENT","\/**\n * Magento\n *\n * NOTICE OF LICENSE\n *\n * This source file is subject to the Open Software License (OSL 3.0)\n * that is bundled with this package in the file LICENSE.txt.\n * It is also available through the world-wide-web at this URL:\n * http:\/\/opensource.org\/licenses\/osl-3.0.php\n * If you did not receive a copy of the license and are unable to\n * obtain it through the world-wide-web, please send an email\n * to license@magento.com so we can send you a copy immediately.\n *\n * DISCLAIMER\n *\n * Do not edit or add to this file if you wish to upgrade Magento to newer\n * versions in the future. If you wish to customize Magento for your\n * needs please refer to http:\/\/www.magento.com for more information.\n *\n * @category    Mage\n * @package     Mage_Catalog\n * @copyright  Copyright (c) 2006-2016 X.commerce, Inc. and affiliates (http:\/\/www.magento.com)\n * @license    http:\/\/opensource.org\/licenses\/osl-3.0.php  Open Software License (OSL 3.0)\n *\/",2],["T_WHITESPACE","\n\n\n",25],["T_DOC_COMMENT","\/**\n * Catalog Category Attribute Default and Available Sort By Backend Model\n *\n * @category   Mage\n * @package    Mage_Catalog\n * @author     Magento Core Team <core@magentocommerce.com>\n *\/",28],["T_WHITESPACE","\n",34],["T_CLASS","class",35],["T_WHITESPACE"," ",35],["T_STRING","Mage_Catalog_Model_Category_Attribute_Backend_Sortby",35],["T_WHITESPACE","\n    ",35],["T_EXTENDS","extends",36],["T_WHITESPACE"," ",36],["T_STRING","Mage_Eav_Model_Entity_Attribute_Backend_Abstract",36],["T_WHITESPACE","\n",36],"{",["T_WHITESPACE","\n    ",37],["T_DOC_COMMENT","\/**\n     * Validate process\n     *\n     * @param Varien_Object $object\n     * @return bool\n     *\/",38],["T_WHITESPACE","\n    ",43],["T_PUBLIC","public",44],["T_WHITESPACE"," ",44],["T_FUNCTION","function",44],["T_WHITESPACE"," ",44],["T_STRING","validate",44],"(",["T_VARIABLE","$object",44],")",["T_WHITESPACE","\n    ",44],"{",["T_WHITESPACE","\n        ",45],["T_VARIABLE","$attributeCode",46],["T_WHITESPACE"," ",46],"=",["T_WHITESPACE"," ",46],["T_VARIABLE","$this",46],["T_OBJECT_OPERATOR","->",46],["T_STRING","getAttribute",46],"(",")",["T_OBJECT_OPERATOR","->",46],["T_STRING","getName",46],"(",")",";",["T_WHITESPACE","\n        ",46],["T_VARIABLE","$postDataConfig",47],["T_WHITESPACE"," ",47],"=",["T_WHITESPACE"," ",47],["T_VARIABLE","$object",47],["T_OBJECT_OPERATOR","->",47],["T_STRING","getData",47],"(",["T_CONSTANT_ENCAPSED_STRING","'use_post_data_config'",47],")",";",["T_WHITESPACE","\n        ",47],["T_IF","if",48],["T_WHITESPACE"," ",48],"(",["T_VARIABLE","$postDataConfig",48],")",["T_WHITESPACE"," ",48],"{",["T_WHITESPACE","\n            ",48],["T_VARIABLE","$isUseConfig",49],["T_WHITESPACE"," ",49],"=",["T_WHITESPACE"," ",49],["T_STRING","in_array",49],"(",["T_VARIABLE","$attributeCode",49],",",["T_WHITESPACE"," ",49],["T_VARIABLE","$postDataConfig",49],")",";",["T_WHITESPACE","\n        ",49],"}",["T_WHITESPACE"," ",50],["T_ELSE","else",50],["T_WHITESPACE"," ",50],"{",["T_WHITESPACE","\n            ",50],["T_VARIABLE","$isUseConfig",51],["T_WHITESPACE"," ",51],"=",["T_WHITESPACE"," ",51],["T_STRING","false",51],";",["T_WHITESPACE","\n            ",51],["T_VARIABLE","$postDataConfig",52],["T_WHITESPACE"," ",52],"=",["T_WHITESPACE"," ",52],["T_ARRAY","array",52],"(",")",";",["T_WHITESPACE","\n        ",52],"}",["T_WHITESPACE","\n\n        ",53],["T_IF","if",55],["T_WHITESPACE"," ",55],"(",["T_VARIABLE","$this",55],["T_OBJECT_OPERATOR","->",55],["T_STRING","getAttribute",55],"(",")",["T_OBJECT_OPERATOR","->",55],["T_STRING","getIsRequired",55],"(",")",")",["T_WHITESPACE"," ",55],"{",["T_WHITESPACE","\n            ",55],["T_VARIABLE","$attributeValue",56],["T_WHITESPACE"," ",56],"=",["T_WHITESPACE"," ",56],["T_VARIABLE","$object",56],["T_OBJECT_OPERATOR","->",56],["T_STRING","getData",56],"(",["T_VARIABLE","$attributeCode",56],")",";",["T_WHITESPACE","\n            ",56],["T_IF","if",57],["T_WHITESPACE"," ",57],"(",["T_VARIABLE","$this",57],["T_OBJECT_OPERATOR","->",57],["T_STRING","getAttribute",57],"(",")",["T_OBJECT_OPERATOR","->",57],["T_STRING","isValueEmpty",57],"(",["T_VARIABLE","$attributeValue",57],")",")",["T_WHITESPACE"," ",57],"{",["T_WHITESPACE","\n                ",57],["T_IF","if",58],["T_WHITESPACE"," ",58],"(",["T_STRING","is_array",58],"(",["T_VARIABLE","$attributeValue",58],")",["T_WHITESPACE"," ",58],["T_BOOLEAN_AND","&&",58],["T_WHITESPACE"," ",58],["T_STRING","count",58],"(",["T_VARIABLE","$attributeValue",58],")",">",["T_LNUMBER","0",58],")",["T_WHITESPACE"," ",58],"{",["T_WHITESPACE","\n                ",58],"}",["T_WHITESPACE"," ",59],["T_ELSE","else",59],["T_WHITESPACE"," ",59],"{",["T_WHITESPACE","\n                    ",59],["T_IF","if",60],"(","!",["T_VARIABLE","$isUseConfig",60],")",["T_WHITESPACE"," ",60],"{",["T_WHITESPACE","\n                        ",60],["T_RETURN","return",61],["T_WHITESPACE"," ",61],["T_STRING","false",61],";",["T_WHITESPACE","\n                    ",61],"}",["T_WHITESPACE","\n                ",62],"}",["T_WHITESPACE","\n            ",63],"}",["T_WHITESPACE","\n        ",64],"}",["T_WHITESPACE","\n\n        ",65],["T_IF","if",67],["T_WHITESPACE"," ",67],"(",["T_VARIABLE","$this",67],["T_OBJECT_OPERATOR","->",67],["T_STRING","getAttribute",67],"(",")",["T_OBJECT_OPERATOR","->",67],["T_STRING","getIsUnique",67],"(",")",")",["T_WHITESPACE"," ",67],"{",["T_WHITESPACE","\n            ",67],["T_IF","if",68],["T_WHITESPACE"," ",68],"(","!",["T_VARIABLE","$this",68],["T_OBJECT_OPERATOR","->",68],["T_STRING","getAttribute",68],"(",")",["T_OBJECT_OPERATOR","->",68],["T_STRING","getEntity",68],"(",")",["T_OBJECT_OPERATOR","->",68],["T_STRING","checkAttributeUniqueValue",68],"(",["T_VARIABLE","$this",68],["T_OBJECT_OPERATOR","->",68],["T_STRING","getAttribute",68],"(",")",",",["T_WHITESPACE"," ",68],["T_VARIABLE","$object",68],")",")",["T_WHITESPACE"," ",68],"{",["T_WHITESPACE","\n                ",68],["T_VARIABLE","$label",69],["T_WHITESPACE"," ",69],"=",["T_WHITESPACE"," ",69],["T_VARIABLE","$this",69],["T_OBJECT_OPERATOR","->",69],["T_STRING","getAttribute",69],"(",")",["T_OBJECT_OPERATOR","->",69],["T_STRING","getFrontend",69],"(",")",["T_OBJECT_OPERATOR","->",69],["T_STRING","getLabel",69],"(",")",";",["T_WHITESPACE","\n                ",69],["T_STRING","Mage",70],["T_DOUBLE_COLON","::",70],["T_STRING","throwException",70],"(",["T_STRING","Mage",70],["T_DOUBLE_COLON","::",70],["T_STRING","helper",70],"(",["T_CONSTANT_ENCAPSED_STRING","'eav'",70],")",["T_OBJECT_OPERATOR","->",70],["T_STRING","__",70],"(",["T_CONSTANT_ENCAPSED_STRING","'The value of attribute \"%s\" must be unique.'",70],",",["T_WHITESPACE"," ",70],["T_VARIABLE","$label",70],")",")",";",["T_WHITESPACE","\n            ",70],"}",["T_WHITESPACE","\n        ",71],"}",["T_WHITESPACE","\n\n        ",72],["T_IF","if",74],["T_WHITESPACE"," ",74],"(",["T_VARIABLE","$attributeCode",74],["T_WHITESPACE"," ",74],["T_IS_EQUAL","==",74],["T_WHITESPACE"," ",74],["T_CONSTANT_ENCAPSED_STRING","'default_sort_by'",74],")",["T_WHITESPACE"," ",74],"{",["T_WHITESPACE","\n            ",74],["T_IF","if",75],["T_WHITESPACE"," ",75],"(",["T_VARIABLE","$available",75],["T_WHITESPACE"," ",75],"=",["T_WHITESPACE"," ",75],["T_VARIABLE","$object",75],["T_OBJECT_OPERATOR","->",75],["T_STRING","getData",75],"(",["T_CONSTANT_ENCAPSED_STRING","'available_sort_by'",75],")",")",["T_WHITESPACE"," ",75],"{",["T_WHITESPACE","\n                ",75],["T_IF","if",76],["T_WHITESPACE"," ",76],"(","!",["T_STRING","is_array",76],"(",["T_VARIABLE","$available",76],")",")",["T_WHITESPACE"," ",76],"{",["T_WHITESPACE","\n                    ",76],["T_VARIABLE","$available",77],["T_WHITESPACE"," ",77],"=",["T_WHITESPACE"," ",77],["T_STRING","explode",77],"(",["T_CONSTANT_ENCAPSED_STRING","','",77],",",["T_WHITESPACE"," ",77],["T_VARIABLE","$available",77],")",";",["T_WHITESPACE","\n                ",77],"}",["T_WHITESPACE","\n                ",78],["T_VARIABLE","$data",79],["T_WHITESPACE"," ",79],"=",["T_WHITESPACE"," ",79],"(","!",["T_STRING","in_array",79],"(",["T_CONSTANT_ENCAPSED_STRING","'default_sort_by'",79],",",["T_WHITESPACE"," ",79],["T_VARIABLE","$postDataConfig",79],")",")","?",["T_WHITESPACE"," ",79],["T_VARIABLE","$object",79],["T_OBJECT_OPERATOR","->",79],["T_STRING","getData",79],"(",["T_VARIABLE","$attributeCode",79],")",":",["T_WHITESPACE","\n                       ",79],["T_STRING","Mage",80],["T_DOUBLE_COLON","::",80],["T_STRING","getStoreConfig",80],"(",["T_CONSTANT_ENCAPSED_STRING","\"catalog\/frontend\/default_sort_by\"",80],")",";",["T_WHITESPACE","\n                ",80],["T_IF","if",81],["T_WHITESPACE"," ",81],"(","!",["T_STRING","in_array",81],"(",["T_VARIABLE","$data",81],",",["T_WHITESPACE"," ",81],["T_VARIABLE","$available",81],")",")",["T_WHITESPACE"," ",81],"{",["T_WHITESPACE","\n                    ",81],["T_STRING","Mage",82],["T_DOUBLE_COLON","::",82],["T_STRING","throwException",82],"(",["T_STRING","Mage",82],["T_DOUBLE_COLON","::",82],["T_STRING","helper",82],"(",["T_CONSTANT_ENCAPSED_STRING","'eav'",82],")",["T_OBJECT_OPERATOR","->",82],["T_STRING","__",82],"(",["T_CONSTANT_ENCAPSED_STRING","'Default Product Listing Sort by does not exist in Available Product Listing Sort By.'",82],")",")",";",["T_WHITESPACE","\n                ",82],"}",["T_WHITESPACE","\n            ",83],"}",["T_WHITESPACE"," ",84],["T_ELSE","else",84],["T_WHITESPACE"," ",84],"{",["T_WHITESPACE","\n                ",84],["T_IF","if",85],["T_WHITESPACE"," ",85],"(","!",["T_STRING","in_array",85],"(",["T_CONSTANT_ENCAPSED_STRING","'available_sort_by'",85],",",["T_WHITESPACE"," ",85],["T_VARIABLE","$postDataConfig",85],")",")",["T_WHITESPACE"," ",85],"{",["T_WHITESPACE","\n                    ",85],["T_STRING","Mage",86],["T_DOUBLE_COLON","::",86],["T_STRING","throwException",86],"(",["T_STRING","Mage",86],["T_DOUBLE_COLON","::",86],["T_STRING","helper",86],"(",["T_CONSTANT_ENCAPSED_STRING","'eav'",86],")",["T_OBJECT_OPERATOR","->",86],["T_STRING","__",86],"(",["T_CONSTANT_ENCAPSED_STRING","'Default Product Listing Sort by does not exist in Available Product Listing Sort By.'",86],")",")",";",["T_WHITESPACE","\n                ",86],"}",["T_WHITESPACE","\n            ",87],"}",["T_WHITESPACE","\n        ",88],"}",["T_WHITESPACE","\n\n        ",89],["T_RETURN","return",91],["T_WHITESPACE"," ",91],["T_STRING","true",91],";",["T_WHITESPACE","\n    ",91],"}",["T_WHITESPACE","\n\n    ",92],["T_DOC_COMMENT","\/**\n     * Before Attribute Save Process\n     *\n     * @param Varien_Object $object\n     * @return Mage_Catalog_Model_Category_Attribute_Backend_Sortby\n     *\/",94],["T_WHITESPACE","\n    ",99],["T_PUBLIC","public",100],["T_WHITESPACE"," ",100],["T_FUNCTION","function",100],["T_WHITESPACE"," ",100],["T_STRING","beforeSave",100],"(",["T_VARIABLE","$object",100],")",["T_WHITESPACE"," ",100],"{",["T_WHITESPACE","\n        ",100],["T_VARIABLE","$attributeCode",101],["T_WHITESPACE"," ",101],"=",["T_WHITESPACE"," ",101],["T_VARIABLE","$this",101],["T_OBJECT_OPERATOR","->",101],["T_STRING","getAttribute",101],"(",")",["T_OBJECT_OPERATOR","->",101],["T_STRING","getName",101],"(",")",";",["T_WHITESPACE","\n        ",101],["T_IF","if",102],["T_WHITESPACE"," ",102],"(",["T_VARIABLE","$attributeCode",102],["T_WHITESPACE"," ",102],["T_IS_EQUAL","==",102],["T_WHITESPACE"," ",102],["T_CONSTANT_ENCAPSED_STRING","'available_sort_by'",102],")",["T_WHITESPACE"," ",102],"{",["T_WHITESPACE","\n            ",102],["T_VARIABLE","$data",103],["T_WHITESPACE"," ",103],"=",["T_WHITESPACE"," ",103],["T_VARIABLE","$object",103],["T_OBJECT_OPERATOR","->",103],["T_STRING","getData",103],"(",["T_VARIABLE","$attributeCode",103],")",";",["T_WHITESPACE","\n            ",103],["T_IF","if",104],["T_WHITESPACE"," ",104],"(","!",["T_STRING","is_array",104],"(",["T_VARIABLE","$data",104],")",")",["T_WHITESPACE"," ",104],"{",["T_WHITESPACE","\n                ",104],["T_VARIABLE","$data",105],["T_WHITESPACE"," ",105],"=",["T_WHITESPACE"," ",105],["T_ARRAY","array",105],"(",")",";",["T_WHITESPACE","\n            ",105],"}",["T_WHITESPACE","\n            ",106],["T_VARIABLE","$object",107],["T_OBJECT_OPERATOR","->",107],["T_STRING","setData",107],"(",["T_VARIABLE","$attributeCode",107],",",["T_WHITESPACE"," ",107],["T_STRING","join",107],"(",["T_CONSTANT_ENCAPSED_STRING","','",107],",",["T_WHITESPACE"," ",107],["T_VARIABLE","$data",107],")",")",";",["T_WHITESPACE","\n        ",107],"}",["T_WHITESPACE","\n        ",108],["T_IF","if",109],["T_WHITESPACE"," ",109],"(",["T_STRING","is_null",109],"(",["T_VARIABLE","$object",109],["T_OBJECT_OPERATOR","->",109],["T_STRING","getData",109],"(",["T_VARIABLE","$attributeCode",109],")",")",")",["T_WHITESPACE"," ",109],"{",["T_WHITESPACE","\n            ",109],["T_VARIABLE","$object",110],["T_OBJECT_OPERATOR","->",110],["T_STRING","setData",110],"(",["T_VARIABLE","$attributeCode",110],",",["T_WHITESPACE"," ",110],["T_STRING","false",110],")",";",["T_WHITESPACE","\n        ",110],"}",["T_WHITESPACE","\n        ",111],["T_RETURN","return",112],["T_WHITESPACE"," ",112],["T_VARIABLE","$this",112],";",["T_WHITESPACE","\n    ",112],"}",["T_WHITESPACE","\n\n    ",113],["T_PUBLIC","public",115],["T_WHITESPACE"," ",115],["T_FUNCTION","function",115],["T_WHITESPACE"," ",115],["T_STRING","afterLoad",115],"(",["T_VARIABLE","$object",115],")",["T_WHITESPACE"," ",115],"{",["T_WHITESPACE","\n        ",115],["T_VARIABLE","$attributeCode",116],["T_WHITESPACE"," ",116],"=",["T_WHITESPACE"," ",116],["T_VARIABLE","$this",116],["T_OBJECT_OPERATOR","->",116],["T_STRING","getAttribute",116],"(",")",["T_OBJECT_OPERATOR","->",116],["T_STRING","getName",116],"(",")",";",["T_WHITESPACE","\n        ",116],["T_IF","if",117],["T_WHITESPACE"," ",117],"(",["T_VARIABLE","$attributeCode",117],["T_WHITESPACE"," ",117],["T_IS_EQUAL","==",117],["T_WHITESPACE"," ",117],["T_CONSTANT_ENCAPSED_STRING","'available_sort_by'",117],")",["T_WHITESPACE"," ",117],"{",["T_WHITESPACE","\n            ",117],["T_VARIABLE","$data",118],["T_WHITESPACE"," ",118],"=",["T_WHITESPACE"," ",118],["T_VARIABLE","$object",118],["T_OBJECT_OPERATOR","->",118],["T_STRING","getData",118],"(",["T_VARIABLE","$attributeCode",118],")",";",["T_WHITESPACE","\n            ",118],["T_IF","if",119],["T_WHITESPACE"," ",119],"(",["T_VARIABLE","$data",119],")",["T_WHITESPACE"," ",119],"{",["T_WHITESPACE","\n                ",119],["T_VARIABLE","$object",120],["T_OBJECT_OPERATOR","->",120],["T_STRING","setData",120],"(",["T_VARIABLE","$attributeCode",120],",",["T_WHITESPACE"," ",120],["T_STRING","explode",120],"(",["T_CONSTANT_ENCAPSED_STRING","','",120],",",["T_WHITESPACE"," ",120],["T_VARIABLE","$data",120],")",")",";",["T_WHITESPACE","\n            ",120],"}",["T_WHITESPACE","\n        ",121],"}",["T_WHITESPACE","\n        ",122],["T_RETURN","return",123],["T_WHITESPACE"," ",123],["T_VARIABLE","$this",123],";",["T_WHITESPACE","\n    ",123],"}",["T_WHITESPACE","\n",124],"}",["T_WHITESPACE","\n",125]]
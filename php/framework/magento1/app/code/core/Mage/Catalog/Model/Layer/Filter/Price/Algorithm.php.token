[["T_OPEN_TAG","<?php\n",1],["T_DOC_COMMENT","\/**\n * Magento\n *\n * NOTICE OF LICENSE\n *\n * This source file is subject to the Open Software License (OSL 3.0)\n * that is bundled with this package in the file LICENSE.txt.\n * It is also available through the world-wide-web at this URL:\n * http:\/\/opensource.org\/licenses\/osl-3.0.php\n * If you did not receive a copy of the license and are unable to\n * obtain it through the world-wide-web, please send an email\n * to license@magento.com so we can send you a copy immediately.\n *\n * DISCLAIMER\n *\n * Do not edit or add to this file if you wish to upgrade Magento to newer\n * versions in the future. If you wish to customize Magento for your\n * needs please refer to http:\/\/www.magento.com for more information.\n *\n * @category    Mage\n * @package     Mage_Catalog\n * @copyright  Copyright (c) 2006-2016 X.commerce, Inc. and affiliates (http:\/\/www.magento.com)\n * @license    http:\/\/opensource.org\/licenses\/osl-3.0.php  Open Software License (OSL 3.0)\n *\/",2],["T_WHITESPACE","\n\n",25],["T_DOC_COMMENT","\/**\n * Algorithm for layer price filter\n *\n * @category    Mage\n * @package     Mage_Catalog\n * @author      Magento Core Team <core@magentocommerce.com>\n *\/",27],["T_WHITESPACE","\n",33],["T_CLASS","class",34],["T_WHITESPACE"," ",34],["T_STRING","Mage_Catalog_Model_Layer_Filter_Price_Algorithm",34],["T_WHITESPACE","\n",34],"{",["T_WHITESPACE","\n    ",35],["T_DOC_COMMENT","\/**\n     * Rounding factor coefficient\n     *\/",36],["T_WHITESPACE","\n    ",38],["T_CONST","const",39],["T_WHITESPACE"," ",39],["T_STRING","TEN_POWER_ROUNDING_FACTOR",39],["T_WHITESPACE"," ",39],"=",["T_WHITESPACE"," ",39],["T_LNUMBER","4",39],";",["T_WHITESPACE","\n\n    ",39],["T_DOC_COMMENT","\/**\n     * Interval deflection coefficient\n     *\/",41],["T_WHITESPACE","\n    ",43],["T_CONST","const",44],["T_WHITESPACE"," ",44],["T_STRING","INTERVAL_DEFLECTION_LIMIT",44],["T_WHITESPACE"," ",44],"=",["T_WHITESPACE"," ",44],["T_DNUMBER",".3",44],";",["T_WHITESPACE","\n\n    ",44],["T_DOC_COMMENT","\/**\n     * Standard normal distribution's  a\/2 quantile\n     * Depends on predefined a. In case of a=0.05\n     *\/",46],["T_WHITESPACE","\n    ",49],["T_CONST","const",50],["T_WHITESPACE"," ",50],["T_STRING","STANDARD_NORMAL_DISTRIBUTION",50],["T_WHITESPACE"," ",50],"=",["T_WHITESPACE"," ",50],["T_DNUMBER","1.96",50],";",["T_WHITESPACE","\n\n    ",50],["T_DOC_COMMENT","\/**\n     * Min and Max number of intervals\n     *\/",52],["T_WHITESPACE","\n    ",54],["T_CONST","const",55],["T_WHITESPACE"," ",55],["T_STRING","MIN_INTERVALS_NUMBER",55],["T_WHITESPACE"," ",55],"=",["T_WHITESPACE"," ",55],["T_LNUMBER","2",55],";",["T_WHITESPACE","\n    ",55],["T_CONST","const",56],["T_WHITESPACE"," ",56],["T_STRING","MAX_INTERVALS_NUMBER",56],["T_WHITESPACE"," ",56],"=",["T_WHITESPACE"," ",56],["T_LNUMBER","10",56],";",["T_WHITESPACE","\n\n    ",56],["T_DOC_COMMENT","\/**\n     * Upper prices limit\n     *\n     * @var null|float\n     *\/",58],["T_WHITESPACE","\n    ",62],["T_PROTECTED","protected",63],["T_WHITESPACE"," ",63],["T_VARIABLE","$_upperLimit",63],["T_WHITESPACE"," ",63],"=",["T_WHITESPACE"," ",63],["T_STRING","null",63],";",["T_WHITESPACE","\n\n    ",63],["T_DOC_COMMENT","\/**\n     * Lower prices limit\n     *\n     * @var null|float\n     *\/",65],["T_WHITESPACE","\n    ",69],["T_PROTECTED","protected",70],["T_WHITESPACE"," ",70],["T_VARIABLE","$_lowerLimit",70],["T_WHITESPACE"," ",70],"=",["T_WHITESPACE"," ",70],["T_STRING","null",70],";",["T_WHITESPACE","\n\n    ",70],["T_DOC_COMMENT","\/**\n     * Number of segmentation intervals\n     *\n     * @var null|int\n     *\/",72],["T_WHITESPACE","\n    ",76],["T_PROTECTED","protected",77],["T_WHITESPACE"," ",77],["T_VARIABLE","$_intervalsNumber",77],["T_WHITESPACE"," ",77],"=",["T_WHITESPACE"," ",77],["T_STRING","null",77],";",["T_WHITESPACE","\n\n    ",77],["T_DOC_COMMENT","\/**\n     * Upper limits of skipped quantiles\n     *\n     * @var array\n     *\/",79],["T_WHITESPACE","\n    ",83],["T_PROTECTED","protected",84],["T_WHITESPACE"," ",84],["T_VARIABLE","$_skippedQuantilesUpperLimits",84],["T_WHITESPACE"," ",84],"=",["T_WHITESPACE"," ",84],["T_ARRAY","array",84],"(",")",";",["T_WHITESPACE","\n\n    ",84],["T_DOC_COMMENT","\/**\n     * Total count of prices\n     *\n     * @var int\n     *\/",86],["T_WHITESPACE","\n    ",90],["T_PROTECTED","protected",91],["T_WHITESPACE"," ",91],["T_VARIABLE","$_count",91],["T_WHITESPACE"," ",91],"=",["T_WHITESPACE"," ",91],["T_LNUMBER","0",91],";",["T_WHITESPACE","\n\n    ",91],["T_DOC_COMMENT","\/**\n     * Prices model\n     *\n     * @var null|Mage_Catalog_Model_Layer_Filter_Price\n     *\/",93],["T_WHITESPACE","\n    ",97],["T_PROTECTED","protected",98],["T_WHITESPACE"," ",98],["T_VARIABLE","$_pricesModel",98],["T_WHITESPACE"," ",98],"=",["T_WHITESPACE"," ",98],["T_STRING","null",98],";",["T_WHITESPACE","\n\n    ",98],["T_DOC_COMMENT","\/**\n     * Current quantile interval\n     *\n     * @var array [from, to]\n     *\/",100],["T_WHITESPACE","\n    ",104],["T_PROTECTED","protected",105],["T_WHITESPACE"," ",105],["T_VARIABLE","$_quantileInterval",105],["T_WHITESPACE"," ",105],"=",["T_WHITESPACE"," ",105],["T_ARRAY","array",105],"(",["T_LNUMBER","0",105],",",["T_WHITESPACE"," ",105],["T_LNUMBER","0",105],")",";",["T_WHITESPACE","\n\n    ",105],["T_DOC_COMMENT","\/**\n     * Prices of current quantile\n     *\n     * @var array\n     *\/",107],["T_WHITESPACE","\n    ",111],["T_PROTECTED","protected",112],["T_WHITESPACE"," ",112],["T_VARIABLE","$_prices",112],["T_WHITESPACE"," ",112],"=",["T_WHITESPACE"," ",112],["T_ARRAY","array",112],"(",")",";",["T_WHITESPACE","\n\n    ",112],["T_DOC_COMMENT","\/**\n     * Max price\n     *\n     * @var float\n     *\/",114],["T_WHITESPACE","\n    ",118],["T_PROTECTED","protected",119],["T_WHITESPACE"," ",119],["T_VARIABLE","$_maxPrice",119],["T_WHITESPACE"," ",119],"=",["T_WHITESPACE"," ",119],["T_LNUMBER","0",119],";",["T_WHITESPACE","\n\n    ",119],["T_DOC_COMMENT","\/**\n     * Min price\n     *\n     * @var float\n     *\/",121],["T_WHITESPACE","\n    ",125],["T_PROTECTED","protected",126],["T_WHITESPACE"," ",126],["T_VARIABLE","$_minPrice",126],["T_WHITESPACE"," ",126],"=",["T_WHITESPACE"," ",126],["T_LNUMBER","0",126],";",["T_WHITESPACE","\n\n    ",126],["T_DOC_COMMENT","\/**\n     * Last price query limiter\n     *\n     * @var array [index, value]\n     *\/",128],["T_WHITESPACE","\n    ",132],["T_PROTECTED","protected",133],["T_WHITESPACE"," ",133],["T_VARIABLE","$_lastPriceLimiter",133],["T_WHITESPACE"," ",133],"=",["T_WHITESPACE"," ",133],["T_ARRAY","array",133],"(",["T_STRING","null",133],",",["T_WHITESPACE"," ",133],["T_LNUMBER","0",133],")",";",["T_WHITESPACE","\n\n    ",133],["T_DOC_COMMENT","\/**\n     * Set lower and upper limit for algorithm\n     *\n     * @param null|float $lowerLimit\n     * @param null|float $upperLimit\n     * @return Mage_Catalog_Model_Layer_Filter_Price_Algorithm\n     *\/",135],["T_WHITESPACE","\n    ",141],["T_PUBLIC","public",142],["T_WHITESPACE"," ",142],["T_FUNCTION","function",142],["T_WHITESPACE"," ",142],["T_STRING","setLimits",142],"(",["T_VARIABLE","$lowerLimit",142],["T_WHITESPACE"," ",142],"=",["T_WHITESPACE"," ",142],["T_STRING","null",142],",",["T_WHITESPACE"," ",142],["T_VARIABLE","$upperLimit",142],["T_WHITESPACE"," ",142],"=",["T_WHITESPACE"," ",142],["T_STRING","null",142],")",["T_WHITESPACE","\n    ",142],"{",["T_WHITESPACE","\n        ",143],["T_VARIABLE","$this",144],["T_OBJECT_OPERATOR","->",144],["T_STRING","_lowerLimit",144],["T_WHITESPACE"," ",144],"=",["T_WHITESPACE"," ",144],["T_EMPTY","empty",144],"(",["T_VARIABLE","$lowerLimit",144],")",["T_WHITESPACE"," ",144],"?",["T_WHITESPACE"," ",144],["T_STRING","null",144],["T_WHITESPACE"," ",144],":",["T_WHITESPACE"," ",144],["T_DOUBLE_CAST","(float)",144],["T_VARIABLE","$lowerLimit",144],";",["T_WHITESPACE","\n        ",144],["T_VARIABLE","$this",145],["T_OBJECT_OPERATOR","->",145],["T_STRING","_upperLimit",145],["T_WHITESPACE"," ",145],"=",["T_WHITESPACE"," ",145],["T_EMPTY","empty",145],"(",["T_VARIABLE","$upperLimit",145],")",["T_WHITESPACE"," ",145],"?",["T_WHITESPACE"," ",145],["T_STRING","null",145],["T_WHITESPACE"," ",145],":",["T_WHITESPACE"," ",145],["T_DOUBLE_CAST","(float)",145],["T_VARIABLE","$upperLimit",145],";",["T_WHITESPACE","\n        ",145],["T_RETURN","return",146],["T_WHITESPACE"," ",146],["T_VARIABLE","$this",146],";",["T_WHITESPACE","\n    ",146],"}",["T_WHITESPACE","\n\n    ",147],["T_DOC_COMMENT","\/**\n     * Search first index of price, that satisfy conditions to be 'greater or equal' than $value\n     * Returns -1 if index was not found\n     *\n     * @param float $value\n     * @param null|array $limits search [from, to]\n     * @return int\n     *\/",149],["T_WHITESPACE","\n    ",156],["T_PROTECTED","protected",157],["T_WHITESPACE"," ",157],["T_FUNCTION","function",157],["T_WHITESPACE"," ",157],["T_STRING","_binarySearch",157],"(",["T_VARIABLE","$value",157],",",["T_WHITESPACE"," ",157],["T_VARIABLE","$limits",157],["T_WHITESPACE"," ",157],"=",["T_WHITESPACE"," ",157],["T_STRING","null",157],")",["T_WHITESPACE","\n    ",157],"{",["T_WHITESPACE","\n        ",158],["T_IF","if",159],["T_WHITESPACE"," ",159],"(",["T_EMPTY","empty",159],"(",["T_VARIABLE","$this",159],["T_OBJECT_OPERATOR","->",159],["T_STRING","_prices",159],")",")",["T_WHITESPACE"," ",159],"{",["T_WHITESPACE","\n            ",159],["T_RETURN","return",160],["T_WHITESPACE"," ",160],"-",["T_LNUMBER","1",160],";",["T_WHITESPACE","\n        ",160],"}",["T_WHITESPACE","\n\n        ",161],["T_IF","if",163],["T_WHITESPACE"," ",163],"(","!",["T_STRING","is_array",163],"(",["T_VARIABLE","$limits",163],")",")",["T_WHITESPACE"," ",163],"{",["T_WHITESPACE","\n            ",163],["T_VARIABLE","$limits",164],["T_WHITESPACE"," ",164],"=",["T_WHITESPACE"," ",164],["T_ARRAY","array",164],"(",")",";",["T_WHITESPACE","\n        ",164],"}",["T_WHITESPACE","\n        ",165],["T_IF","if",166],["T_WHITESPACE"," ",166],"(","!",["T_ISSET","isset",166],"(",["T_VARIABLE","$limits",166],"[",["T_LNUMBER","0",166],"]",")",")",["T_WHITESPACE"," ",166],"{",["T_WHITESPACE","\n            ",166],["T_VARIABLE","$limits",167],"[",["T_LNUMBER","0",167],"]",["T_WHITESPACE"," ",167],"=",["T_WHITESPACE"," ",167],["T_LNUMBER","0",167],";",["T_WHITESPACE","\n        ",167],"}",["T_WHITESPACE","\n        ",168],["T_IF","if",169],["T_WHITESPACE"," ",169],"(","!",["T_ISSET","isset",169],"(",["T_VARIABLE","$limits",169],"[",["T_LNUMBER","1",169],"]",")",")",["T_WHITESPACE"," ",169],"{",["T_WHITESPACE","\n            ",169],["T_VARIABLE","$limits",170],"[",["T_LNUMBER","1",170],"]",["T_WHITESPACE"," ",170],"=",["T_WHITESPACE"," ",170],["T_STRING","count",170],"(",["T_VARIABLE","$this",170],["T_OBJECT_OPERATOR","->",170],["T_STRING","_prices",170],")",["T_WHITESPACE"," ",170],"-",["T_WHITESPACE"," ",170],["T_LNUMBER","1",170],";",["T_WHITESPACE","\n        ",170],"}",["T_WHITESPACE","\n\n        ",171],["T_IF","if",173],["T_WHITESPACE"," ",173],"(",["T_VARIABLE","$limits",173],"[",["T_LNUMBER","0",173],"]",["T_WHITESPACE"," ",173],">",["T_WHITESPACE"," ",173],["T_VARIABLE","$limits",173],"[",["T_LNUMBER","1",173],"]",["T_WHITESPACE"," ",173],["T_BOOLEAN_OR","||",173],["T_WHITESPACE"," ",173],["T_VARIABLE","$this",173],["T_OBJECT_OPERATOR","->",173],["T_STRING","_prices",173],"[",["T_VARIABLE","$limits",173],"[",["T_LNUMBER","1",173],"]","]",["T_WHITESPACE"," ",173],"<",["T_WHITESPACE"," ",173],["T_VARIABLE","$value",173],")",["T_WHITESPACE"," ",173],"{",["T_WHITESPACE","\n            ",173],["T_RETURN","return",174],["T_WHITESPACE"," ",174],"-",["T_LNUMBER","1",174],";",["T_WHITESPACE","\n        ",174],"}",["T_WHITESPACE","\n\n        ",175],["T_IF","if",177],["T_WHITESPACE"," ",177],"(",["T_VARIABLE","$limits",177],"[",["T_LNUMBER","1",177],"]",["T_WHITESPACE"," ",177],"-",["T_WHITESPACE"," ",177],["T_VARIABLE","$limits",177],"[",["T_LNUMBER","0",177],"]",["T_WHITESPACE"," ",177],["T_IS_SMALLER_OR_EQUAL","<=",177],["T_WHITESPACE"," ",177],["T_LNUMBER","1",177],")",["T_WHITESPACE"," ",177],"{",["T_WHITESPACE","\n            ",177],["T_RETURN","return",178],["T_WHITESPACE"," ",178],"(",["T_VARIABLE","$this",178],["T_OBJECT_OPERATOR","->",178],["T_STRING","_prices",178],"[",["T_VARIABLE","$limits",178],"[",["T_LNUMBER","0",178],"]","]",["T_WHITESPACE"," ",178],"<",["T_WHITESPACE"," ",178],["T_VARIABLE","$value",178],")",["T_WHITESPACE"," ",178],"?",["T_WHITESPACE"," ",178],["T_VARIABLE","$limits",178],"[",["T_LNUMBER","1",178],"]",["T_WHITESPACE"," ",178],":",["T_WHITESPACE"," ",178],["T_VARIABLE","$limits",178],"[",["T_LNUMBER","0",178],"]",";",["T_WHITESPACE","\n        ",178],"}",["T_WHITESPACE","\n\n        ",179],["T_VARIABLE","$separator",181],["T_WHITESPACE"," ",181],"=",["T_WHITESPACE"," ",181],["T_STRING","floor",181],"(","(",["T_VARIABLE","$limits",181],"[",["T_LNUMBER","0",181],"]",["T_WHITESPACE"," ",181],"+",["T_WHITESPACE"," ",181],["T_VARIABLE","$limits",181],"[",["T_LNUMBER","1",181],"]",")",["T_WHITESPACE"," ",181],"\/",["T_WHITESPACE"," ",181],["T_LNUMBER","2",181],")",";",["T_WHITESPACE","\n        ",181],["T_IF","if",182],["T_WHITESPACE"," ",182],"(",["T_VARIABLE","$this",182],["T_OBJECT_OPERATOR","->",182],["T_STRING","_prices",182],"[",["T_VARIABLE","$separator",182],"]",["T_WHITESPACE"," ",182],"<",["T_WHITESPACE"," ",182],["T_VARIABLE","$value",182],")",["T_WHITESPACE"," ",182],"{",["T_WHITESPACE","\n            ",182],["T_VARIABLE","$limits",183],"[",["T_LNUMBER","0",183],"]",["T_WHITESPACE"," ",183],"=",["T_WHITESPACE"," ",183],["T_VARIABLE","$separator",183],["T_WHITESPACE"," ",183],"+",["T_WHITESPACE"," ",183],["T_LNUMBER","1",183],";",["T_WHITESPACE","\n        ",183],"}",["T_WHITESPACE"," ",184],["T_ELSE","else",184],["T_WHITESPACE"," ",184],"{",["T_WHITESPACE","\n            ",184],["T_VARIABLE","$limits",185],"[",["T_LNUMBER","1",185],"]",["T_WHITESPACE"," ",185],"=",["T_WHITESPACE"," ",185],["T_VARIABLE","$separator",185],";",["T_WHITESPACE","\n        ",185],"}",["T_WHITESPACE","\n\n        ",186],["T_RETURN","return",188],["T_WHITESPACE"," ",188],["T_VARIABLE","$this",188],["T_OBJECT_OPERATOR","->",188],["T_STRING","_binarySearch",188],"(",["T_VARIABLE","$value",188],",",["T_WHITESPACE"," ",188],["T_ARRAY","array",188],"(",["T_VARIABLE","$limits",188],"[",["T_LNUMBER","0",188],"]",",",["T_WHITESPACE"," ",188],["T_VARIABLE","$limits",188],"[",["T_LNUMBER","1",188],"]",")",")",";",["T_WHITESPACE","\n    ",188],"}",["T_WHITESPACE","\n\n    ",189],["T_DOC_COMMENT","\/**\n     * Set prices statistics\n     *\n     * @param float $min\n     * @param float $max\n     * @param float $standardDeviation\n     * @param int $count\n     * @return Mage_Catalog_Model_Layer_Filter_Price_Algorithm\n     *\/",191],["T_WHITESPACE","\n    ",199],["T_PUBLIC","public",200],["T_WHITESPACE"," ",200],["T_FUNCTION","function",200],["T_WHITESPACE"," ",200],["T_STRING","setStatistics",200],"(",["T_VARIABLE","$min",200],",",["T_WHITESPACE"," ",200],["T_VARIABLE","$max",200],",",["T_WHITESPACE"," ",200],["T_VARIABLE","$standardDeviation",200],",",["T_WHITESPACE"," ",200],["T_VARIABLE","$count",200],")",["T_WHITESPACE","\n    ",200],"{",["T_WHITESPACE","\n        ",201],["T_VARIABLE","$this",202],["T_OBJECT_OPERATOR","->",202],["T_STRING","_count",202],["T_WHITESPACE"," ",202],"=",["T_WHITESPACE"," ",202],["T_VARIABLE","$count",202],";",["T_WHITESPACE","\n        ",202],["T_VARIABLE","$this",203],["T_OBJECT_OPERATOR","->",203],["T_STRING","_minPrice",203],["T_WHITESPACE"," ",203],"=",["T_WHITESPACE"," ",203],["T_VARIABLE","$min",203],";",["T_WHITESPACE","\n        ",203],["T_VARIABLE","$this",204],["T_OBJECT_OPERATOR","->",204],["T_STRING","_maxPrice",204],["T_WHITESPACE"," ",204],"=",["T_WHITESPACE"," ",204],["T_VARIABLE","$max",204],";",["T_WHITESPACE","\n        ",204],["T_VARIABLE","$priceRange",205],["T_WHITESPACE"," ",205],"=",["T_WHITESPACE"," ",205],["T_VARIABLE","$max",205],["T_WHITESPACE"," ",205],"-",["T_WHITESPACE"," ",205],["T_VARIABLE","$min",205],";",["T_WHITESPACE","\n        ",205],["T_IF","if",206],["T_WHITESPACE"," ",206],"(",["T_VARIABLE","$count",206],["T_WHITESPACE"," ",206],"<",["T_WHITESPACE"," ",206],["T_LNUMBER","2",206],["T_WHITESPACE"," ",206],["T_BOOLEAN_OR","||",206],["T_WHITESPACE"," ",206],"(",["T_VARIABLE","$priceRange",206],["T_WHITESPACE"," ",206],["T_IS_SMALLER_OR_EQUAL","<=",206],["T_WHITESPACE"," ",206],["T_LNUMBER","0",206],")",")",["T_WHITESPACE"," ",206],"{",["T_WHITESPACE","\n            ",206],["T_COMMENT","\/\/Same price couldn't be separated with several intervals\n",207],["T_WHITESPACE","            ",208],["T_VARIABLE","$this",208],["T_OBJECT_OPERATOR","->",208],["T_STRING","_intervalsNumber",208],["T_WHITESPACE"," ",208],"=",["T_WHITESPACE"," ",208],["T_LNUMBER","1",208],";",["T_WHITESPACE","\n            ",208],["T_RETURN","return",209],["T_WHITESPACE"," ",209],["T_VARIABLE","$this",209],";",["T_WHITESPACE","\n        ",209],"}",["T_WHITESPACE","\n\n        ",210],["T_IF","if",212],["T_WHITESPACE"," ",212],"(",["T_VARIABLE","$standardDeviation",212],["T_WHITESPACE"," ",212],["T_IS_SMALLER_OR_EQUAL","<=",212],["T_WHITESPACE"," ",212],["T_LNUMBER","0",212],")",["T_WHITESPACE"," ",212],"{",["T_WHITESPACE","\n            ",212],["T_VARIABLE","$intervalsNumber",213],["T_WHITESPACE"," ",213],"=",["T_WHITESPACE"," ",213],["T_STRING","pow",213],"(",["T_LNUMBER","10",213],",",["T_WHITESPACE"," ",213],["T_STRING","self",213],["T_DOUBLE_COLON","::",213],["T_STRING","TEN_POWER_ROUNDING_FACTOR",213],")",";",["T_WHITESPACE","\n        ",213],"}",["T_WHITESPACE"," ",214],["T_ELSE","else",214],["T_WHITESPACE"," ",214],"{",["T_WHITESPACE","\n            ",214],["T_VARIABLE","$intervalsNumber",215],["T_WHITESPACE"," ",215],"=",["T_WHITESPACE"," ",215],["T_VARIABLE","$priceRange",215],["T_WHITESPACE"," ",215],"*",["T_WHITESPACE"," ",215],["T_STRING","pow",215],"(",["T_VARIABLE","$count",215],",",["T_WHITESPACE"," ",215],["T_LNUMBER","1",215],["T_WHITESPACE"," ",215],"\/",["T_WHITESPACE"," ",215],["T_LNUMBER","3",215],")",["T_WHITESPACE"," ",215],"\/",["T_WHITESPACE"," ",215],"(",["T_DNUMBER","3.5",215],["T_WHITESPACE"," ",215],"*",["T_WHITESPACE"," ",215],["T_VARIABLE","$standardDeviation",215],")",";",["T_WHITESPACE","\n        ",215],"}",["T_WHITESPACE","\n        ",216],["T_VARIABLE","$this",217],["T_OBJECT_OPERATOR","->",217],["T_STRING","_intervalsNumber",217],["T_WHITESPACE"," ",217],"=",["T_WHITESPACE"," ",217],["T_STRING","max",217],"(",["T_STRING","ceil",217],"(",["T_VARIABLE","$intervalsNumber",217],")",",",["T_WHITESPACE"," ",217],["T_STRING","self",217],["T_DOUBLE_COLON","::",217],["T_STRING","MIN_INTERVALS_NUMBER",217],")",";",["T_WHITESPACE","\n        ",217],["T_VARIABLE","$this",218],["T_OBJECT_OPERATOR","->",218],["T_STRING","_intervalsNumber",218],["T_WHITESPACE"," ",218],"=",["T_WHITESPACE"," ",218],["T_INT_CAST","(int)",218],["T_STRING","min",218],"(",["T_VARIABLE","$this",218],["T_OBJECT_OPERATOR","->",218],["T_STRING","_intervalsNumber",218],",",["T_WHITESPACE"," ",218],["T_STRING","self",218],["T_DOUBLE_COLON","::",218],["T_STRING","MAX_INTERVALS_NUMBER",218],")",";",["T_WHITESPACE","\n\n        ",218],["T_RETURN","return",220],["T_WHITESPACE"," ",220],["T_VARIABLE","$this",220],";",["T_WHITESPACE","\n    ",220],"}",["T_WHITESPACE","\n\n    ",221],["T_DOC_COMMENT","\/**\n     * Set prices model\n     *\n     * @param Mage_Catalog_Model_Layer_Filter_Price $pricesModel\n     * @return Mage_Catalog_Model_Layer_Filter_Price_Algorithm\n     *\/",223],["T_WHITESPACE","\n    ",228],["T_PUBLIC","public",229],["T_WHITESPACE"," ",229],["T_FUNCTION","function",229],["T_WHITESPACE"," ",229],["T_STRING","setPricesModel",229],"(",["T_VARIABLE","$pricesModel",229],")",["T_WHITESPACE","\n    ",229],"{",["T_WHITESPACE","\n        ",230],["T_VARIABLE","$this",231],["T_OBJECT_OPERATOR","->",231],["T_STRING","_pricesModel",231],["T_WHITESPACE"," ",231],"=",["T_WHITESPACE"," ",231],["T_VARIABLE","$pricesModel",231],";",["T_WHITESPACE","\n        ",231],["T_RETURN","return",232],["T_WHITESPACE"," ",232],["T_VARIABLE","$this",232],";",["T_WHITESPACE","\n    ",232],"}",["T_WHITESPACE","\n\n    ",233],["T_DOC_COMMENT","\/**\n     * Get amount of segmentation intervals\n     *\n     * @return int\n     *\/",235],["T_WHITESPACE","\n    ",239],["T_PUBLIC","public",240],["T_WHITESPACE"," ",240],["T_FUNCTION","function",240],["T_WHITESPACE"," ",240],["T_STRING","getIntervalsNumber",240],"(",")",["T_WHITESPACE","\n    ",240],"{",["T_WHITESPACE","\n        ",241],["T_IF","if",242],["T_WHITESPACE"," ",242],"(","!",["T_STRING","is_null",242],"(",["T_VARIABLE","$this",242],["T_OBJECT_OPERATOR","->",242],["T_STRING","_intervalsNumber",242],")",")",["T_WHITESPACE"," ",242],"{",["T_WHITESPACE","\n            ",242],["T_RETURN","return",243],["T_WHITESPACE"," ",243],["T_VARIABLE","$this",243],["T_OBJECT_OPERATOR","->",243],["T_STRING","_intervalsNumber",243],";",["T_WHITESPACE","\n        ",243],"}",["T_WHITESPACE","\n\n        ",244],["T_RETURN","return",246],["T_WHITESPACE"," ",246],["T_LNUMBER","1",246],";",["T_WHITESPACE","\n    ",246],"}",["T_WHITESPACE","\n\n    ",247],["T_DOC_COMMENT","\/**\n     * Get intervals number with checking skipped quantiles\n     *\n     * @return int\n     *\/",249],["T_WHITESPACE","\n    ",253],["T_PROTECTED","protected",254],["T_WHITESPACE"," ",254],["T_FUNCTION","function",254],["T_WHITESPACE"," ",254],["T_STRING","_getCalculatedIntervalsNumber",254],"(",")",["T_WHITESPACE","\n    ",254],"{",["T_WHITESPACE","\n        ",255],["T_RETURN","return",256],["T_WHITESPACE"," ",256],["T_STRING","max",256],"(",["T_LNUMBER","1",256],",",["T_WHITESPACE"," ",256],["T_VARIABLE","$this",256],["T_OBJECT_OPERATOR","->",256],["T_STRING","getIntervalsNumber",256],"(",")",["T_WHITESPACE"," ",256],"-",["T_WHITESPACE"," ",256],["T_STRING","count",256],"(",["T_VARIABLE","$this",256],["T_OBJECT_OPERATOR","->",256],["T_STRING","_skippedQuantilesUpperLimits",256],")",")",";",["T_WHITESPACE","\n    ",256],"}",["T_WHITESPACE","\n\n    ",257],["T_DOC_COMMENT","\/**\n     * Get quantile\n     *\n     * @param int $quantileNumber should be from 1 to n-1 where n is number of intervals\n     * @return float|null\n     *\/",259],["T_WHITESPACE","\n    ",264],["T_PROTECTED","protected",265],["T_WHITESPACE"," ",265],["T_FUNCTION","function",265],["T_WHITESPACE"," ",265],["T_STRING","_getQuantile",265],"(",["T_VARIABLE","$quantileNumber",265],")",["T_WHITESPACE","\n    ",265],"{",["T_WHITESPACE","\n        ",266],["T_IF","if",267],["T_WHITESPACE"," ",267],"(",["T_VARIABLE","$quantileNumber",267],["T_WHITESPACE"," ",267],"<",["T_WHITESPACE"," ",267],["T_LNUMBER","1",267],["T_WHITESPACE"," ",267],["T_BOOLEAN_OR","||",267],["T_WHITESPACE"," ",267],["T_VARIABLE","$quantileNumber",267],["T_WHITESPACE"," ",267],["T_IS_GREATER_OR_EQUAL",">=",267],["T_WHITESPACE"," ",267],["T_VARIABLE","$this",267],["T_OBJECT_OPERATOR","->",267],["T_STRING","getIntervalsNumber",267],"(",")",")",["T_WHITESPACE"," ",267],"{",["T_WHITESPACE","\n            ",267],["T_RETURN","return",268],["T_WHITESPACE"," ",268],["T_LNUMBER","0",268],";",["T_WHITESPACE","\n        ",268],"}",["T_WHITESPACE","\n\n        ",269],["T_RETURN","return",271],["T_WHITESPACE"," ",271],["T_VARIABLE","$quantileNumber",271],["T_WHITESPACE"," ",271],"*",["T_WHITESPACE"," ",271],["T_VARIABLE","$this",271],["T_OBJECT_OPERATOR","->",271],["T_STRING","_count",271],["T_WHITESPACE"," ",271],"\/",["T_WHITESPACE"," ",271],["T_VARIABLE","$this",271],["T_OBJECT_OPERATOR","->",271],["T_STRING","getIntervalsNumber",271],"(",")",["T_WHITESPACE"," ",271],"-",["T_WHITESPACE"," ",271],["T_DNUMBER",".5",271],";",["T_WHITESPACE","\n    ",271],"}",["T_WHITESPACE","\n\n    ",272],["T_DOC_COMMENT","\/**\n     * Get quantile interval\n     *\n     * @param int $quantileNumber should be from 1 to n-1 where n is number of intervals\n     * @return null|array [floatMin,floatMax]\n     *\/",274],["T_WHITESPACE","\n    ",279],["T_PROTECTED","protected",280],["T_WHITESPACE"," ",280],["T_FUNCTION","function",280],["T_WHITESPACE"," ",280],["T_STRING","_getQuantileInterval",280],"(",["T_VARIABLE","$quantileNumber",280],")",["T_WHITESPACE","\n    ",280],"{",["T_WHITESPACE","\n        ",281],["T_IF","if",282],["T_WHITESPACE"," ",282],"(",["T_VARIABLE","$quantileNumber",282],["T_WHITESPACE"," ",282],"<",["T_WHITESPACE"," ",282],["T_LNUMBER","1",282],["T_WHITESPACE"," ",282],["T_BOOLEAN_OR","||",282],["T_WHITESPACE"," ",282],["T_VARIABLE","$quantileNumber",282],["T_WHITESPACE"," ",282],["T_IS_GREATER_OR_EQUAL",">=",282],["T_WHITESPACE"," ",282],["T_VARIABLE","$this",282],["T_OBJECT_OPERATOR","->",282],["T_STRING","getIntervalsNumber",282],"(",")",")",["T_WHITESPACE"," ",282],"{",["T_WHITESPACE","\n            ",282],["T_RETURN","return",283],["T_WHITESPACE"," ",283],["T_STRING","null",283],";",["T_WHITESPACE","\n        ",283],"}",["T_WHITESPACE","\n        ",284],["T_VARIABLE","$quantile",285],["T_WHITESPACE"," ",285],"=",["T_WHITESPACE"," ",285],["T_VARIABLE","$this",285],["T_OBJECT_OPERATOR","->",285],["T_STRING","_getQuantile",285],"(",["T_VARIABLE","$quantileNumber",285],")",";",["T_WHITESPACE","\n        ",285],["T_VARIABLE","$deflectionLimit",286],["T_WHITESPACE"," ",286],"=",["T_WHITESPACE"," ",286],["T_STRING","floor",286],"(",["T_VARIABLE","$this",286],["T_OBJECT_OPERATOR","->",286],["T_STRING","_count",286],["T_WHITESPACE"," ",286],"\/",["T_WHITESPACE"," ",286],["T_LNUMBER","2",286],["T_WHITESPACE"," ",286],"\/",["T_WHITESPACE"," ",286],["T_VARIABLE","$this",286],["T_OBJECT_OPERATOR","->",286],["T_STRING","getIntervalsNumber",286],"(",")",")",";",["T_WHITESPACE","\n        ",286],["T_VARIABLE","$limits",287],["T_WHITESPACE"," ",287],"=",["T_WHITESPACE"," ",287],["T_ARRAY","array",287],"(",["T_WHITESPACE","\n            ",287],["T_STRING","min",288],"(",["T_STRING","floor",288],"(",["T_VARIABLE","$quantile",288],["T_WHITESPACE"," ",288],"-",["T_WHITESPACE"," ",288],["T_VARIABLE","$deflectionLimit",288],")",",",["T_WHITESPACE"," ",288],["T_STRING","floor",288],"(",["T_VARIABLE","$quantile",288],")",")",",",["T_WHITESPACE","\n            ",288],["T_STRING","max",289],"(",["T_STRING","ceil",289],"(",["T_VARIABLE","$quantile",289],["T_WHITESPACE"," ",289],"+",["T_WHITESPACE"," ",289],["T_VARIABLE","$deflectionLimit",289],["T_WHITESPACE"," ",289],"-",["T_WHITESPACE"," ",289],["T_LNUMBER","1",289],")",",",["T_WHITESPACE"," ",289],["T_STRING","ceil",289],"(",["T_VARIABLE","$quantile",289],")",")",",",["T_WHITESPACE","\n        ",289],")",";",["T_WHITESPACE","\n\n        ",290],["T_VARIABLE","$deflection",292],["T_WHITESPACE"," ",292],"=",["T_WHITESPACE"," ",292],["T_STRING","self",292],["T_DOUBLE_COLON","::",292],["T_STRING","STANDARD_NORMAL_DISTRIBUTION",292],["T_WHITESPACE","\n            ",292],"*",["T_WHITESPACE"," ",293],["T_STRING","sqrt",293],"(",["T_VARIABLE","$this",293],["T_OBJECT_OPERATOR","->",293],["T_STRING","_count",293],["T_WHITESPACE"," ",293],"*",["T_WHITESPACE"," ",293],["T_VARIABLE","$quantileNumber",293],["T_WHITESPACE"," ",293],"*",["T_WHITESPACE"," ",293],"(",["T_VARIABLE","$this",293],["T_OBJECT_OPERATOR","->",293],["T_STRING","getIntervalsNumber",293],"(",")",["T_WHITESPACE"," ",293],"-",["T_WHITESPACE"," ",293],["T_VARIABLE","$quantileNumber",293],")",")",["T_WHITESPACE","\n            ",293],"\/",["T_WHITESPACE"," ",294],["T_VARIABLE","$this",294],["T_OBJECT_OPERATOR","->",294],["T_STRING","getIntervalsNumber",294],"(",")",";",["T_WHITESPACE","\n        ",294],["T_VARIABLE","$left",295],["T_WHITESPACE"," ",295],"=",["T_WHITESPACE"," ",295],["T_STRING","max",295],"(",["T_STRING","floor",295],"(",["T_VARIABLE","$quantile",295],["T_WHITESPACE"," ",295],"-",["T_WHITESPACE"," ",295],["T_VARIABLE","$deflection",295],["T_WHITESPACE"," ",295],"-",["T_WHITESPACE"," ",295],["T_LNUMBER","1",295],")",",",["T_WHITESPACE"," ",295],["T_VARIABLE","$limits",295],"[",["T_LNUMBER","0",295],"]",",",["T_WHITESPACE"," ",295],["T_LNUMBER","0",295],")",";",["T_WHITESPACE","\n        ",295],["T_IF","if",296],["T_WHITESPACE"," ",296],"(",["T_STRING","array_key_exists",296],"(",["T_VARIABLE","$quantileNumber",296],["T_WHITESPACE"," ",296],"-",["T_WHITESPACE"," ",296],["T_LNUMBER","1",296],",",["T_WHITESPACE"," ",296],["T_VARIABLE","$this",296],["T_OBJECT_OPERATOR","->",296],["T_STRING","_skippedQuantilesUpperLimits",296],")",["T_WHITESPACE","\n            ",296],["T_BOOLEAN_AND","&&",297],["T_WHITESPACE"," ",297],["T_VARIABLE","$left",297],["T_WHITESPACE"," ",297],">",["T_WHITESPACE"," ",297],["T_VARIABLE","$this",297],["T_OBJECT_OPERATOR","->",297],["T_STRING","_skippedQuantilesUpperLimits",297],"[",["T_VARIABLE","$quantileNumber",297],["T_WHITESPACE"," ",297],"-",["T_WHITESPACE"," ",297],["T_LNUMBER","1",297],"]",["T_WHITESPACE","\n        ",297],")",["T_WHITESPACE"," ",298],"{",["T_WHITESPACE","\n            ",298],["T_VARIABLE","$left",299],["T_WHITESPACE"," ",299],"=",["T_WHITESPACE"," ",299],["T_VARIABLE","$this",299],["T_OBJECT_OPERATOR","->",299],["T_STRING","_skippedQuantilesUpperLimits",299],"[",["T_VARIABLE","$quantileNumber",299],["T_WHITESPACE"," ",299],"-",["T_WHITESPACE"," ",299],["T_LNUMBER","1",299],"]",";",["T_WHITESPACE","\n        ",299],"}",["T_WHITESPACE","\n        ",300],["T_VARIABLE","$right",301],["T_WHITESPACE"," ",301],"=",["T_WHITESPACE"," ",301],["T_STRING","min",301],"(",["T_STRING","ceil",301],"(",["T_VARIABLE","$quantile",301],["T_WHITESPACE"," ",301],"+",["T_WHITESPACE"," ",301],["T_VARIABLE","$deflection",301],")",",",["T_WHITESPACE"," ",301],["T_VARIABLE","$limits",301],"[",["T_LNUMBER","1",301],"]",",",["T_WHITESPACE"," ",301],["T_VARIABLE","$this",301],["T_OBJECT_OPERATOR","->",301],["T_STRING","_count",301],["T_WHITESPACE"," ",301],"-",["T_WHITESPACE"," ",301],["T_LNUMBER","1",301],")",";",["T_WHITESPACE","\n        ",301],["T_RETURN","return",302],["T_WHITESPACE"," ",302],["T_ARRAY","array",302],"(",["T_VARIABLE","$left",302],",",["T_WHITESPACE"," ",302],["T_VARIABLE","$right",302],")",";",["T_WHITESPACE","\n    ",302],"}",["T_WHITESPACE","\n\n    ",303],["T_DOC_COMMENT","\/**\n     * Merge new round prices with old ones\n     *\n     * @param array $oldRoundPrices\n     * @param array $newRoundPrices\n     * @return void\n     *\/",305],["T_WHITESPACE","\n    ",311],["T_PROTECTED","protected",312],["T_WHITESPACE"," ",312],["T_FUNCTION","function",312],["T_WHITESPACE"," ",312],["T_STRING","_mergeRoundPrices",312],"(","&",["T_VARIABLE","$oldRoundPrices",312],",",["T_WHITESPACE"," ",312],"&",["T_VARIABLE","$newRoundPrices",312],")",["T_WHITESPACE","\n    ",312],"{",["T_WHITESPACE","\n        ",313],["T_FOREACH","foreach",314],["T_WHITESPACE"," ",314],"(",["T_VARIABLE","$newRoundPrices",314],["T_WHITESPACE"," ",314],["T_AS","as",314],["T_WHITESPACE"," ",314],["T_VARIABLE","$roundingFactor",314],["T_WHITESPACE"," ",314],["T_DOUBLE_ARROW","=>",314],["T_WHITESPACE"," ",314],["T_VARIABLE","$roundPriceValues",314],")",["T_WHITESPACE"," ",314],"{",["T_WHITESPACE","\n            ",314],["T_IF","if",315],["T_WHITESPACE"," ",315],"(",["T_STRING","array_key_exists",315],"(",["T_VARIABLE","$roundingFactor",315],",",["T_WHITESPACE"," ",315],["T_VARIABLE","$oldRoundPrices",315],")",")",["T_WHITESPACE"," ",315],"{",["T_WHITESPACE","\n                ",315],["T_VARIABLE","$oldRoundPrices",316],"[",["T_VARIABLE","$roundingFactor",316],"]",["T_WHITESPACE"," ",316],"=",["T_WHITESPACE"," ",316],["T_STRING","array_unique",316],"(",["T_STRING","array_merge",316],"(",["T_WHITESPACE","\n                    ",316],["T_VARIABLE","$oldRoundPrices",317],"[",["T_VARIABLE","$roundingFactor",317],"]",",",["T_WHITESPACE","\n                    ",317],["T_VARIABLE","$roundPriceValues",318],["T_WHITESPACE","\n                ",318],")",")",";",["T_WHITESPACE","\n            ",319],"}",["T_WHITESPACE"," ",320],["T_ELSE","else",320],["T_WHITESPACE"," ",320],"{",["T_WHITESPACE","\n                ",320],["T_VARIABLE","$oldRoundPrices",321],"[",["T_VARIABLE","$roundingFactor",321],"]",["T_WHITESPACE"," ",321],"=",["T_WHITESPACE"," ",321],["T_VARIABLE","$roundPriceValues",321],";",["T_WHITESPACE","\n            ",321],"}",["T_WHITESPACE","\n        ",322],"}",["T_WHITESPACE","\n    ",323],"}",["T_WHITESPACE","\n\n    ",324],["T_DOC_COMMENT","\/**\n     * Find price separator for the quantile\n     *\n     * @param int $quantileNumber should be from 1 to n-1 where n is number of intervals\n     * @return array|null\n     *\/",326],["T_WHITESPACE","\n    ",331],["T_PROTECTED","protected",332],["T_WHITESPACE"," ",332],["T_FUNCTION","function",332],["T_WHITESPACE"," ",332],["T_STRING","_findPriceSeparator",332],"(",["T_VARIABLE","$quantileNumber",332],")",["T_WHITESPACE","\n    ",332],"{",["T_WHITESPACE","\n        ",333],["T_IF","if",334],["T_WHITESPACE"," ",334],"(",["T_VARIABLE","$quantileNumber",334],["T_WHITESPACE"," ",334],"<",["T_WHITESPACE"," ",334],["T_LNUMBER","1",334],["T_WHITESPACE"," ",334],["T_BOOLEAN_OR","||",334],["T_WHITESPACE"," ",334],["T_VARIABLE","$quantileNumber",334],["T_WHITESPACE"," ",334],["T_IS_GREATER_OR_EQUAL",">=",334],["T_WHITESPACE"," ",334],["T_VARIABLE","$this",334],["T_OBJECT_OPERATOR","->",334],["T_STRING","getIntervalsNumber",334],"(",")",")",["T_WHITESPACE"," ",334],"{",["T_WHITESPACE","\n            ",334],["T_RETURN","return",335],["T_WHITESPACE"," ",335],["T_STRING","null",335],";",["T_WHITESPACE","\n        ",335],"}",["T_WHITESPACE","\n\n        ",336],["T_VARIABLE","$prices",338],["T_WHITESPACE"," ",338],"=",["T_WHITESPACE"," ",338],["T_ARRAY","array",338],"(",")",";",["T_WHITESPACE","\n        ",338],["T_VARIABLE","$quantileInterval",339],["T_WHITESPACE"," ",339],"=",["T_WHITESPACE"," ",339],["T_VARIABLE","$this",339],["T_OBJECT_OPERATOR","->",339],["T_STRING","_getQuantileInterval",339],"(",["T_VARIABLE","$quantileNumber",339],")",";",["T_WHITESPACE","\n        ",339],["T_VARIABLE","$intervalPricesCount",340],["T_WHITESPACE"," ",340],"=",["T_WHITESPACE"," ",340],["T_VARIABLE","$quantileInterval",340],"[",["T_LNUMBER","1",340],"]",["T_WHITESPACE"," ",340],"-",["T_WHITESPACE"," ",340],["T_VARIABLE","$quantileInterval",340],"[",["T_LNUMBER","0",340],"]",["T_WHITESPACE"," ",340],"+",["T_WHITESPACE"," ",340],["T_LNUMBER","1",340],";",["T_WHITESPACE","\n        ",340],["T_VARIABLE","$offset",341],["T_WHITESPACE"," ",341],"=",["T_WHITESPACE"," ",341],["T_VARIABLE","$quantileInterval",341],"[",["T_LNUMBER","0",341],"]",";",["T_WHITESPACE","\n        ",341],["T_IF","if",342],["T_WHITESPACE"," ",342],"(","!",["T_STRING","is_null",342],"(",["T_VARIABLE","$this",342],["T_OBJECT_OPERATOR","->",342],["T_STRING","_lastPriceLimiter",342],"[",["T_LNUMBER","0",342],"]",")",")",["T_WHITESPACE"," ",342],"{",["T_WHITESPACE","\n            ",342],["T_VARIABLE","$offset",343],["T_WHITESPACE"," ",343],["T_MINUS_EQUAL","-=",343],["T_WHITESPACE"," ",343],["T_VARIABLE","$this",343],["T_OBJECT_OPERATOR","->",343],["T_STRING","_lastPriceLimiter",343],"[",["T_LNUMBER","0",343],"]",";",["T_WHITESPACE","\n        ",343],"}",["T_WHITESPACE","\n        ",344],["T_IF","if",345],["T_WHITESPACE"," ",345],"(",["T_VARIABLE","$offset",345],["T_WHITESPACE"," ",345],"<",["T_WHITESPACE"," ",345],["T_LNUMBER","0",345],")",["T_WHITESPACE"," ",345],"{",["T_WHITESPACE","\n            ",345],["T_VARIABLE","$intervalPricesCount",346],["T_WHITESPACE"," ",346],["T_PLUS_EQUAL","+=",346],["T_WHITESPACE"," ",346],["T_VARIABLE","$offset",346],";",["T_WHITESPACE","\n            ",346],["T_VARIABLE","$prices",347],["T_WHITESPACE"," ",347],"=",["T_WHITESPACE"," ",347],["T_STRING","array_slice",347],"(",["T_WHITESPACE","\n                ",347],["T_VARIABLE","$this",348],["T_OBJECT_OPERATOR","->",348],["T_STRING","_prices",348],",",["T_WHITESPACE","\n                ",348],["T_VARIABLE","$this",349],["T_OBJECT_OPERATOR","->",349],["T_STRING","_lastPriceLimiter",349],"[",["T_LNUMBER","0",349],"]",["T_WHITESPACE"," ",349],"+",["T_WHITESPACE"," ",349],["T_VARIABLE","$offset",349],["T_WHITESPACE"," ",349],"-",["T_WHITESPACE"," ",349],["T_VARIABLE","$this",349],["T_OBJECT_OPERATOR","->",349],["T_STRING","_quantileInterval",349],"[",["T_LNUMBER","0",349],"]",",",["T_WHITESPACE","\n                ",349],"-",["T_VARIABLE","$offset",350],["T_WHITESPACE","\n            ",350],")",";",["T_WHITESPACE","\n            ",351],["T_VARIABLE","$offset",352],["T_WHITESPACE"," ",352],"=",["T_WHITESPACE"," ",352],["T_LNUMBER","0",352],";",["T_WHITESPACE","\n        ",352],"}",["T_WHITESPACE","\n        ",353],["T_VARIABLE","$lowerPrice",354],["T_WHITESPACE"," ",354],"=",["T_WHITESPACE"," ",354],["T_VARIABLE","$this",354],["T_OBJECT_OPERATOR","->",354],["T_STRING","_lastPriceLimiter",354],"[",["T_LNUMBER","1",354],"]",";",["T_WHITESPACE","\n        ",354],["T_IF","if",355],["T_WHITESPACE"," ",355],"(","!",["T_STRING","is_null",355],"(",["T_VARIABLE","$this",355],["T_OBJECT_OPERATOR","->",355],["T_STRING","_lowerLimit",355],")",")",["T_WHITESPACE"," ",355],"{",["T_WHITESPACE","\n            ",355],["T_VARIABLE","$lowerPrice",356],["T_WHITESPACE"," ",356],"=",["T_WHITESPACE"," ",356],["T_STRING","max",356],"(",["T_VARIABLE","$lowerPrice",356],",",["T_WHITESPACE"," ",356],["T_VARIABLE","$this",356],["T_OBJECT_OPERATOR","->",356],["T_STRING","_lowerLimit",356],")",";",["T_WHITESPACE","\n        ",356],"}",["T_WHITESPACE","\n        ",357],["T_IF","if",358],["T_WHITESPACE"," ",358],"(",["T_VARIABLE","$intervalPricesCount",358],["T_WHITESPACE"," ",358],["T_IS_GREATER_OR_EQUAL",">=",358],["T_WHITESPACE"," ",358],["T_LNUMBER","0",358],")",["T_WHITESPACE"," ",358],"{",["T_WHITESPACE","\n            ",358],["T_VARIABLE","$prices",359],["T_WHITESPACE"," ",359],"=",["T_WHITESPACE"," ",359],["T_STRING","array_merge",359],"(",["T_VARIABLE","$prices",359],",",["T_WHITESPACE"," ",359],["T_VARIABLE","$this",359],["T_OBJECT_OPERATOR","->",359],["T_STRING","_pricesModel",359],["T_OBJECT_OPERATOR","->",359],["T_STRING","loadPrices",359],"(",["T_WHITESPACE","\n                ",359],["T_VARIABLE","$intervalPricesCount",360],["T_WHITESPACE"," ",360],"+",["T_WHITESPACE"," ",360],["T_LNUMBER","1",360],",",["T_WHITESPACE","\n                ",360],["T_VARIABLE","$offset",361],",",["T_WHITESPACE","\n                ",361],["T_VARIABLE","$lowerPrice",362],",",["T_WHITESPACE","\n                ",362],["T_VARIABLE","$this",363],["T_OBJECT_OPERATOR","->",363],["T_STRING","_upperLimit",363],["T_WHITESPACE","\n            ",363],")",")",";",["T_WHITESPACE","\n        ",364],"}",["T_WHITESPACE","\n        ",365],["T_VARIABLE","$lastPrice",366],["T_WHITESPACE"," ",366],"=",["T_WHITESPACE"," ",366],["T_VARIABLE","$prices",366],"[",["T_VARIABLE","$intervalPricesCount",366],["T_WHITESPACE"," ",366],"-",["T_WHITESPACE"," ",366],["T_LNUMBER","1",366],"]",";",["T_WHITESPACE","\n        ",366],["T_VARIABLE","$bestRoundPrice",367],["T_WHITESPACE"," ",367],"=",["T_WHITESPACE"," ",367],["T_ARRAY","array",367],"(",")",";",["T_WHITESPACE","\n        ",367],["T_IF","if",368],["T_WHITESPACE"," ",368],"(",["T_VARIABLE","$lastPrice",368],["T_WHITESPACE"," ",368],["T_IS_EQUAL","==",368],["T_WHITESPACE"," ",368],["T_VARIABLE","$prices",368],"[",["T_LNUMBER","0",368],"]",")",["T_WHITESPACE"," ",368],"{",["T_WHITESPACE","\n            ",368],["T_IF","if",369],["T_WHITESPACE"," ",369],"(",["T_VARIABLE","$quantileNumber",369],["T_WHITESPACE"," ",369],["T_IS_EQUAL","==",369],["T_WHITESPACE"," ",369],["T_LNUMBER","1",369],["T_WHITESPACE"," ",369],["T_BOOLEAN_AND","&&",369],["T_WHITESPACE"," ",369],["T_VARIABLE","$offset",369],")",["T_WHITESPACE"," ",369],"{",["T_WHITESPACE","\n                ",369],["T_VARIABLE","$additionalPrices",370],["T_WHITESPACE"," ",370],"=",["T_WHITESPACE"," ",370],["T_VARIABLE","$this",370],["T_OBJECT_OPERATOR","->",370],["T_STRING","_pricesModel",370],["T_WHITESPACE","\n                    ",370],["T_OBJECT_OPERATOR","->",371],["T_STRING","loadPreviousPrices",371],"(",["T_VARIABLE","$lastPrice",371],",",["T_WHITESPACE"," ",371],["T_VARIABLE","$quantileInterval",371],"[",["T_LNUMBER","0",371],"]",",",["T_WHITESPACE"," ",371],["T_VARIABLE","$this",371],["T_OBJECT_OPERATOR","->",371],["T_STRING","_lowerLimit",371],")",";",["T_WHITESPACE","\n                ",371],["T_IF","if",372],["T_WHITESPACE"," ",372],"(",["T_VARIABLE","$additionalPrices",372],")",["T_WHITESPACE"," ",372],"{",["T_WHITESPACE","\n                    ",372],["T_VARIABLE","$quantileInterval",373],"[",["T_LNUMBER","0",373],"]",["T_WHITESPACE"," ",373],["T_MINUS_EQUAL","-=",373],["T_WHITESPACE"," ",373],["T_STRING","count",373],"(",["T_VARIABLE","$additionalPrices",373],")",";",["T_WHITESPACE","\n                    ",373],["T_VARIABLE","$prices",374],["T_WHITESPACE"," ",374],"=",["T_WHITESPACE"," ",374],["T_STRING","array_merge",374],"(",["T_VARIABLE","$additionalPrices",374],",",["T_WHITESPACE"," ",374],["T_VARIABLE","$prices",374],")",";",["T_WHITESPACE","\n                    ",374],["T_VARIABLE","$bestRoundPrice",375],["T_WHITESPACE"," ",375],"=",["T_WHITESPACE"," ",375],["T_VARIABLE","$this",375],["T_OBJECT_OPERATOR","->",375],["T_STRING","_findRoundPrice",375],"(",["T_WHITESPACE","\n                        ",375],["T_VARIABLE","$prices",376],"[",["T_LNUMBER","0",376],"]",["T_WHITESPACE"," ",376],"+",["T_WHITESPACE"," ",376],["T_STRING","Mage_Catalog_Model_Resource_Layer_Filter_Price",376],["T_DOUBLE_COLON","::",376],["T_STRING","MIN_POSSIBLE_PRICE",376],["T_WHITESPACE"," ",376],"\/",["T_WHITESPACE"," ",376],["T_LNUMBER","10",376],",",["T_WHITESPACE","\n                        ",376],["T_VARIABLE","$lastPrice",377],",",["T_WHITESPACE","\n                        ",377],["T_STRING","false",378],["T_WHITESPACE","\n                    ",378],")",";",["T_WHITESPACE","\n                ",379],"}",["T_WHITESPACE","\n            ",380],"}",["T_WHITESPACE","\n            ",381],["T_IF","if",382],["T_WHITESPACE"," ",382],"(",["T_VARIABLE","$quantileNumber",382],["T_WHITESPACE"," ",382],["T_IS_EQUAL","==",382],["T_WHITESPACE"," ",382],["T_VARIABLE","$this",382],["T_OBJECT_OPERATOR","->",382],["T_STRING","getIntervalsNumber",382],"(",")",["T_WHITESPACE"," ",382],"-",["T_WHITESPACE"," ",382],["T_LNUMBER","1",382],")",["T_WHITESPACE"," ",382],"{",["T_WHITESPACE","\n                ",382],["T_VARIABLE","$pricesCount",383],["T_WHITESPACE"," ",383],"=",["T_WHITESPACE"," ",383],["T_STRING","count",383],"(",["T_VARIABLE","$prices",383],")",";",["T_WHITESPACE","\n                ",383],["T_IF","if",384],["T_WHITESPACE"," ",384],"(",["T_VARIABLE","$prices",384],"[",["T_VARIABLE","$pricesCount",384],["T_WHITESPACE"," ",384],"-",["T_WHITESPACE"," ",384],["T_LNUMBER","1",384],"]",["T_WHITESPACE"," ",384],">",["T_WHITESPACE"," ",384],["T_VARIABLE","$lastPrice",384],")",["T_WHITESPACE"," ",384],"{",["T_WHITESPACE","\n                    ",384],["T_VARIABLE","$additionalPrices",385],["T_WHITESPACE"," ",385],"=",["T_WHITESPACE"," ",385],["T_ARRAY","array",385],"(",["T_VARIABLE","$prices",385],"[",["T_VARIABLE","$pricesCount",385],["T_WHITESPACE"," ",385],"-",["T_WHITESPACE"," ",385],["T_LNUMBER","1",385],"]",")",";",["T_WHITESPACE","\n                ",385],"}",["T_WHITESPACE"," ",386],["T_ELSE","else",386],["T_WHITESPACE"," ",386],"{",["T_WHITESPACE","\n                    ",386],["T_VARIABLE","$additionalPrices",387],["T_WHITESPACE"," ",387],"=",["T_WHITESPACE"," ",387],["T_VARIABLE","$this",387],["T_OBJECT_OPERATOR","->",387],["T_STRING","_pricesModel",387],["T_OBJECT_OPERATOR","->",387],["T_STRING","loadNextPrices",387],"(",["T_WHITESPACE","\n                        ",387],["T_VARIABLE","$lastPrice",388],",",["T_WHITESPACE","\n                        ",388],["T_VARIABLE","$this",389],["T_OBJECT_OPERATOR","->",389],["T_STRING","_count",389],["T_WHITESPACE"," ",389],"-",["T_WHITESPACE"," ",389],["T_VARIABLE","$quantileInterval",389],"[",["T_LNUMBER","0",389],"]",["T_WHITESPACE"," ",389],"-",["T_WHITESPACE"," ",389],["T_STRING","count",389],"(",["T_VARIABLE","$prices",389],")",",",["T_WHITESPACE","\n                        ",389],["T_VARIABLE","$this",390],["T_OBJECT_OPERATOR","->",390],["T_STRING","_upperLimit",390],["T_WHITESPACE","\n                    ",390],")",";",["T_WHITESPACE","\n                ",391],"}",["T_WHITESPACE","\n                ",392],["T_IF","if",393],["T_WHITESPACE"," ",393],"(",["T_VARIABLE","$additionalPrices",393],")",["T_WHITESPACE"," ",393],"{",["T_WHITESPACE","\n                    ",393],["T_VARIABLE","$quantileInterval",394],"[",["T_LNUMBER","1",394],"]",["T_WHITESPACE"," ",394],"=",["T_WHITESPACE"," ",394],["T_VARIABLE","$quantileInterval",394],"[",["T_LNUMBER","0",394],"]",["T_WHITESPACE"," ",394],"+",["T_WHITESPACE"," ",394],["T_STRING","count",394],"(",["T_VARIABLE","$prices",394],")",["T_WHITESPACE"," ",394],"-",["T_WHITESPACE"," ",394],["T_LNUMBER","1",394],";",["T_WHITESPACE","\n                    ",394],["T_IF","if",395],["T_WHITESPACE"," ",395],"(",["T_VARIABLE","$prices",395],"[",["T_VARIABLE","$pricesCount",395],["T_WHITESPACE"," ",395],"-",["T_WHITESPACE"," ",395],["T_LNUMBER","1",395],"]",["T_WHITESPACE"," ",395],["T_IS_SMALLER_OR_EQUAL","<=",395],["T_WHITESPACE"," ",395],["T_VARIABLE","$lastPrice",395],")",["T_WHITESPACE"," ",395],"{",["T_WHITESPACE","\n                        ",395],["T_VARIABLE","$quantileInterval",396],"[",["T_LNUMBER","1",396],"]",["T_WHITESPACE"," ",396],["T_PLUS_EQUAL","+=",396],["T_WHITESPACE"," ",396],["T_STRING","count",396],"(",["T_VARIABLE","$additionalPrices",396],")",";",["T_WHITESPACE","\n                        ",396],["T_VARIABLE","$prices",397],["T_WHITESPACE"," ",397],"=",["T_WHITESPACE"," ",397],["T_STRING","array_merge",397],"(",["T_VARIABLE","$prices",397],",",["T_WHITESPACE"," ",397],["T_VARIABLE","$additionalPrices",397],")",";",["T_WHITESPACE","\n                    ",397],"}",["T_WHITESPACE","\n                    ",398],["T_VARIABLE","$upperBestRoundPrice",399],["T_WHITESPACE"," ",399],"=",["T_WHITESPACE"," ",399],["T_VARIABLE","$this",399],["T_OBJECT_OPERATOR","->",399],["T_STRING","_findRoundPrice",399],"(",["T_WHITESPACE","\n                        ",399],["T_VARIABLE","$lastPrice",400],["T_WHITESPACE"," ",400],"+",["T_WHITESPACE"," ",400],["T_STRING","Mage_Catalog_Model_Resource_Layer_Filter_Price",400],["T_DOUBLE_COLON","::",400],["T_STRING","MIN_POSSIBLE_PRICE",400],["T_WHITESPACE"," ",400],"\/",["T_WHITESPACE"," ",400],["T_LNUMBER","10",400],",",["T_WHITESPACE","\n                        ",400],["T_VARIABLE","$prices",401],"[",["T_STRING","count",401],"(",["T_VARIABLE","$prices",401],")",["T_WHITESPACE"," ",401],"-",["T_WHITESPACE"," ",401],["T_LNUMBER","1",401],"]",",",["T_WHITESPACE","\n                        ",401],["T_STRING","false",402],["T_WHITESPACE","\n                    ",402],")",";",["T_WHITESPACE","\n                    ",403],["T_VARIABLE","$this",404],["T_OBJECT_OPERATOR","->",404],["T_STRING","_mergeRoundPrices",404],"(",["T_VARIABLE","$bestRoundPrice",404],",",["T_WHITESPACE"," ",404],["T_VARIABLE","$upperBestRoundPrice",404],")",";",["T_WHITESPACE","\n                ",404],"}",["T_WHITESPACE","\n            ",405],"}",["T_WHITESPACE","\n        ",406],"}",["T_WHITESPACE"," ",407],["T_ELSE","else",407],["T_WHITESPACE"," ",407],"{",["T_WHITESPACE","\n            ",407],["T_VARIABLE","$bestRoundPrice",408],["T_WHITESPACE"," ",408],"=",["T_WHITESPACE"," ",408],["T_VARIABLE","$this",408],["T_OBJECT_OPERATOR","->",408],["T_STRING","_findRoundPrice",408],"(",["T_WHITESPACE","\n                ",408],["T_VARIABLE","$prices",409],"[",["T_LNUMBER","0",409],"]",["T_WHITESPACE"," ",409],"+",["T_WHITESPACE"," ",409],["T_STRING","Mage_Catalog_Model_Resource_Layer_Filter_Price",409],["T_DOUBLE_COLON","::",409],["T_STRING","MIN_POSSIBLE_PRICE",409],["T_WHITESPACE"," ",409],"\/",["T_WHITESPACE"," ",409],["T_LNUMBER","10",409],",",["T_WHITESPACE","\n                ",409],["T_VARIABLE","$lastPrice",410],["T_WHITESPACE","\n            ",410],")",";",["T_WHITESPACE","\n        ",411],"}",["T_WHITESPACE","\n\n        ",412],["T_VARIABLE","$this",414],["T_OBJECT_OPERATOR","->",414],["T_STRING","_quantileInterval",414],["T_WHITESPACE"," ",414],"=",["T_WHITESPACE"," ",414],["T_VARIABLE","$quantileInterval",414],";",["T_WHITESPACE","\n        ",414],["T_VARIABLE","$this",415],["T_OBJECT_OPERATOR","->",415],["T_STRING","_prices",415],["T_WHITESPACE"," ",415],"=",["T_WHITESPACE"," ",415],["T_VARIABLE","$prices",415],";",["T_WHITESPACE","\n\n        ",415],["T_IF","if",417],["T_WHITESPACE"," ",417],"(",["T_EMPTY","empty",417],"(",["T_VARIABLE","$bestRoundPrice",417],")",")",["T_WHITESPACE"," ",417],"{",["T_WHITESPACE","\n            ",417],["T_VARIABLE","$this",418],["T_OBJECT_OPERATOR","->",418],["T_STRING","_skippedQuantilesUpperLimits",418],"[",["T_VARIABLE","$quantileNumber",418],"]",["T_WHITESPACE"," ",418],"=",["T_WHITESPACE"," ",418],["T_VARIABLE","$quantileInterval",418],"[",["T_LNUMBER","1",418],"]",";",["T_WHITESPACE","\n            ",418],["T_RETURN","return",419],["T_WHITESPACE"," ",419],["T_VARIABLE","$bestRoundPrice",419],";",["T_WHITESPACE","\n        ",419],"}",["T_WHITESPACE","\n\n        ",420],["T_VARIABLE","$pricesCount",422],["T_WHITESPACE"," ",422],"=",["T_WHITESPACE"," ",422],["T_STRING","count",422],"(",["T_VARIABLE","$prices",422],")",";",["T_WHITESPACE","\n        ",422],["T_IF","if",423],["T_WHITESPACE"," ",423],"(",["T_VARIABLE","$prices",423],"[",["T_VARIABLE","$pricesCount",423],["T_WHITESPACE"," ",423],"-",["T_WHITESPACE"," ",423],["T_LNUMBER","1",423],"]",["T_WHITESPACE"," ",423],">",["T_WHITESPACE"," ",423],["T_VARIABLE","$lastPrice",423],")",["T_WHITESPACE"," ",423],"{",["T_WHITESPACE","\n            ",423],["T_VARIABLE","$this",424],["T_OBJECT_OPERATOR","->",424],["T_STRING","_lastPriceLimiter",424],["T_WHITESPACE"," ",424],"=",["T_WHITESPACE"," ",424],["T_ARRAY","array",424],"(",["T_VARIABLE","$quantileInterval",424],"[",["T_LNUMBER","0",424],"]",["T_WHITESPACE"," ",424],"+",["T_WHITESPACE"," ",424],["T_VARIABLE","$pricesCount",424],["T_WHITESPACE"," ",424],"-",["T_WHITESPACE"," ",424],["T_LNUMBER","1",424],",",["T_WHITESPACE"," ",424],["T_VARIABLE","$prices",424],"[",["T_VARIABLE","$pricesCount",424],["T_WHITESPACE"," ",424],"-",["T_WHITESPACE"," ",424],["T_LNUMBER","1",424],"]",")",";",["T_WHITESPACE","\n        ",424],"}",["T_WHITESPACE","\n\n        ",425],["T_STRING","ksort",427],"(",["T_VARIABLE","$bestRoundPrice",427],",",["T_WHITESPACE"," ",427],["T_STRING","SORT_NUMERIC",427],")",";",["T_WHITESPACE","\n        ",427],["T_FOREACH","foreach",428],["T_WHITESPACE"," ",428],"(",["T_VARIABLE","$bestRoundPrice",428],["T_WHITESPACE"," ",428],["T_AS","as",428],["T_WHITESPACE"," ",428],["T_VARIABLE","$index",428],["T_WHITESPACE"," ",428],["T_DOUBLE_ARROW","=>",428],["T_WHITESPACE"," ",428],"&",["T_VARIABLE","$bestRoundPriceValues",428],")",["T_WHITESPACE"," ",428],"{",["T_WHITESPACE","\n            ",428],["T_IF","if",429],["T_WHITESPACE"," ",429],"(",["T_EMPTY","empty",429],"(",["T_VARIABLE","$bestRoundPriceValues",429],")",")",["T_WHITESPACE"," ",429],"{",["T_WHITESPACE","\n                ",429],["T_UNSET","unset",430],"(",["T_VARIABLE","$bestRoundPrice",430],"[",["T_VARIABLE","$index",430],"]",")",";",["T_WHITESPACE","\n            ",430],"}",["T_WHITESPACE"," ",431],["T_ELSE","else",431],["T_WHITESPACE"," ",431],"{",["T_WHITESPACE","\n                ",431],["T_STRING","sort",432],"(",["T_VARIABLE","$bestRoundPriceValues",432],")",";",["T_WHITESPACE","\n            ",432],"}",["T_WHITESPACE","\n        ",433],"}",["T_WHITESPACE","\n        ",434],["T_RETURN","return",435],["T_WHITESPACE"," ",435],["T_STRING","array_reverse",435],"(",["T_VARIABLE","$bestRoundPrice",435],")",";",["T_WHITESPACE","\n    ",435],"}",["T_WHITESPACE","\n\n    ",436],["T_DOC_COMMENT","\/**\n     * Find max rounding factor with given price range\n     *\n     * @param float $lowerPrice\n     * @param float $upperPrice\n     * @param bool $returnEmpty whether empty result is acceptable\n     * @param null|float $roundingFactor if given, checks for range to contain the factor\n     * @return false|array\n     *\/",438],["T_WHITESPACE","\n    ",446],["T_PROTECTED","protected",447],["T_WHITESPACE"," ",447],["T_FUNCTION","function",447],["T_WHITESPACE"," ",447],["T_STRING","_findRoundPrice",447],"(",["T_VARIABLE","$lowerPrice",447],",",["T_WHITESPACE"," ",447],["T_VARIABLE","$upperPrice",447],",",["T_WHITESPACE"," ",447],["T_VARIABLE","$returnEmpty",447],["T_WHITESPACE"," ",447],"=",["T_WHITESPACE"," ",447],["T_STRING","true",447],",",["T_WHITESPACE"," ",447],["T_VARIABLE","$roundingFactor",447],["T_WHITESPACE"," ",447],"=",["T_WHITESPACE"," ",447],["T_STRING","null",447],")",["T_WHITESPACE","\n    ",447],"{",["T_WHITESPACE","\n        ",448],["T_VARIABLE","$lowerPrice",449],["T_WHITESPACE"," ",449],"=",["T_WHITESPACE"," ",449],["T_STRING","round",449],"(",["T_VARIABLE","$lowerPrice",449],",",["T_WHITESPACE"," ",449],["T_LNUMBER","3",449],")",";",["T_WHITESPACE","\n        ",449],["T_VARIABLE","$upperPrice",450],["T_WHITESPACE"," ",450],"=",["T_WHITESPACE"," ",450],["T_STRING","round",450],"(",["T_VARIABLE","$upperPrice",450],",",["T_WHITESPACE"," ",450],["T_LNUMBER","3",450],")",";",["T_WHITESPACE","\n\n        ",450],["T_IF","if",452],["T_WHITESPACE"," ",452],"(","!",["T_STRING","is_null",452],"(",["T_VARIABLE","$roundingFactor",452],")",")",["T_WHITESPACE"," ",452],"{",["T_WHITESPACE","\n            ",452],["T_COMMENT","\/\/ Can't separate if prices are equal\n",453],["T_WHITESPACE","            ",454],["T_IF","if",454],["T_WHITESPACE"," ",454],"(",["T_VARIABLE","$lowerPrice",454],["T_WHITESPACE"," ",454],["T_IS_GREATER_OR_EQUAL",">=",454],["T_WHITESPACE"," ",454],["T_VARIABLE","$upperPrice",454],")",["T_WHITESPACE"," ",454],"{",["T_WHITESPACE","\n                ",454],["T_IF","if",455],["T_WHITESPACE"," ",455],"(",["T_VARIABLE","$lowerPrice",455],["T_WHITESPACE"," ",455],">",["T_WHITESPACE"," ",455],["T_VARIABLE","$upperPrice",455],["T_WHITESPACE"," ",455],["T_BOOLEAN_OR","||",455],["T_WHITESPACE"," ",455],["T_VARIABLE","$returnEmpty",455],")",["T_WHITESPACE"," ",455],"{",["T_WHITESPACE","\n                    ",455],["T_RETURN","return",456],["T_WHITESPACE"," ",456],["T_STRING","false",456],";",["T_WHITESPACE","\n                ",456],"}",["T_WHITESPACE","\n            ",457],"}",["T_WHITESPACE","\n            ",458],["T_COMMENT","\/\/ round is used for such examples: (1194.32 \/ 0.02) or (5 \/ 100000)\n",459],["T_WHITESPACE","            ",460],["T_VARIABLE","$lowerDivision",460],["T_WHITESPACE"," ",460],"=",["T_WHITESPACE"," ",460],["T_STRING","ceil",460],"(",["T_STRING","round",460],"(",["T_VARIABLE","$lowerPrice",460],["T_WHITESPACE"," ",460],"\/",["T_WHITESPACE"," ",460],["T_VARIABLE","$roundingFactor",460],",",["T_WHITESPACE"," ",460],["T_STRING","self",460],["T_DOUBLE_COLON","::",460],["T_STRING","TEN_POWER_ROUNDING_FACTOR",460],["T_WHITESPACE"," ",460],"+",["T_WHITESPACE"," ",460],["T_LNUMBER","3",460],")",")",";",["T_WHITESPACE","\n            ",460],["T_VARIABLE","$upperDivision",461],["T_WHITESPACE"," ",461],"=",["T_WHITESPACE"," ",461],["T_STRING","floor",461],"(",["T_STRING","round",461],"(",["T_VARIABLE","$upperPrice",461],["T_WHITESPACE"," ",461],"\/",["T_WHITESPACE"," ",461],["T_VARIABLE","$roundingFactor",461],",",["T_WHITESPACE"," ",461],["T_STRING","self",461],["T_DOUBLE_COLON","::",461],["T_STRING","TEN_POWER_ROUNDING_FACTOR",461],["T_WHITESPACE"," ",461],"+",["T_WHITESPACE"," ",461],["T_LNUMBER","3",461],")",")",";",["T_WHITESPACE","\n\n            ",461],["T_VARIABLE","$result",463],["T_WHITESPACE"," ",463],"=",["T_WHITESPACE"," ",463],["T_ARRAY","array",463],"(",")",";",["T_WHITESPACE","\n            ",463],["T_IF","if",464],["T_WHITESPACE"," ",464],"(",["T_VARIABLE","$upperDivision",464],["T_WHITESPACE"," ",464],["T_IS_SMALLER_OR_EQUAL","<=",464],["T_WHITESPACE"," ",464],["T_LNUMBER","0",464],["T_WHITESPACE"," ",464],["T_BOOLEAN_OR","||",464],["T_WHITESPACE"," ",464],["T_VARIABLE","$upperDivision",464],["T_WHITESPACE"," ",464],"-",["T_WHITESPACE"," ",464],["T_VARIABLE","$lowerDivision",464],["T_WHITESPACE"," ",464],">",["T_WHITESPACE"," ",464],["T_LNUMBER","10",464],")",["T_WHITESPACE"," ",464],"{",["T_WHITESPACE","\n                ",464],["T_RETURN","return",465],["T_WHITESPACE"," ",465],["T_VARIABLE","$result",465],";",["T_WHITESPACE","\n            ",465],"}",["T_WHITESPACE","\n\n            ",466],["T_FOR","for",468],["T_WHITESPACE"," ",468],"(",["T_VARIABLE","$i",468],["T_WHITESPACE"," ",468],"=",["T_WHITESPACE"," ",468],["T_VARIABLE","$lowerDivision",468],";",["T_WHITESPACE"," ",468],["T_VARIABLE","$i",468],["T_WHITESPACE"," ",468],["T_IS_SMALLER_OR_EQUAL","<=",468],["T_WHITESPACE"," ",468],["T_VARIABLE","$upperDivision",468],";",["T_WHITESPACE"," ",468],["T_INC","++",468],["T_VARIABLE","$i",468],")",["T_WHITESPACE"," ",468],"{",["T_WHITESPACE","\n                ",468],["T_VARIABLE","$result",469],"[","]",["T_WHITESPACE"," ",469],"=",["T_WHITESPACE"," ",469],["T_STRING","round",469],"(",["T_VARIABLE","$i",469],["T_WHITESPACE"," ",469],"*",["T_WHITESPACE"," ",469],["T_VARIABLE","$roundingFactor",469],",",["T_WHITESPACE"," ",469],["T_LNUMBER","2",469],")",";",["T_WHITESPACE","\n            ",469],"}",["T_WHITESPACE","\n\n            ",470],["T_RETURN","return",472],["T_WHITESPACE"," ",472],["T_VARIABLE","$result",472],";",["T_WHITESPACE","\n        ",472],"}",["T_WHITESPACE","\n\n        ",473],["T_VARIABLE","$result",475],["T_WHITESPACE"," ",475],"=",["T_WHITESPACE"," ",475],["T_ARRAY","array",475],"(",")",";",["T_WHITESPACE","\n        ",475],["T_VARIABLE","$tenPower",476],["T_WHITESPACE"," ",476],"=",["T_WHITESPACE"," ",476],["T_STRING","pow",476],"(",["T_LNUMBER","10",476],",",["T_WHITESPACE"," ",476],["T_STRING","self",476],["T_DOUBLE_COLON","::",476],["T_STRING","TEN_POWER_ROUNDING_FACTOR",476],")",";",["T_WHITESPACE","\n        ",476],["T_VARIABLE","$roundingFactorCoefficients",477],["T_WHITESPACE"," ",477],"=",["T_WHITESPACE"," ",477],["T_ARRAY","array",477],"(",["T_LNUMBER","10",477],",",["T_WHITESPACE"," ",477],["T_LNUMBER","5",477],",",["T_WHITESPACE"," ",477],["T_LNUMBER","2",477],")",";",["T_WHITESPACE","\n        ",477],["T_WHILE","while",478],["T_WHITESPACE"," ",478],"(",["T_VARIABLE","$tenPower",478],["T_WHITESPACE"," ",478],["T_IS_GREATER_OR_EQUAL",">=",478],["T_WHITESPACE"," ",478],["T_STRING","Mage_Catalog_Model_Resource_Layer_Filter_Price",478],["T_DOUBLE_COLON","::",478],["T_STRING","MIN_POSSIBLE_PRICE",478],")",["T_WHITESPACE"," ",478],"{",["T_WHITESPACE","\n            ",478],["T_IF","if",479],["T_WHITESPACE"," ",479],"(",["T_VARIABLE","$tenPower",479],["T_WHITESPACE"," ",479],["T_IS_EQUAL","==",479],["T_WHITESPACE"," ",479],["T_STRING","Mage_Catalog_Model_Resource_Layer_Filter_Price",479],["T_DOUBLE_COLON","::",479],["T_STRING","MIN_POSSIBLE_PRICE",479],")",["T_WHITESPACE"," ",479],"{",["T_WHITESPACE","\n                ",479],["T_VARIABLE","$roundingFactorCoefficients",480],"[","]",["T_WHITESPACE"," ",480],"=",["T_WHITESPACE"," ",480],["T_LNUMBER","1",480],";",["T_WHITESPACE","\n            ",480],"}",["T_WHITESPACE","\n            ",481],["T_FOREACH","foreach",482],["T_WHITESPACE"," ",482],"(",["T_VARIABLE","$roundingFactorCoefficients",482],["T_WHITESPACE"," ",482],["T_AS","as",482],["T_WHITESPACE"," ",482],["T_VARIABLE","$roundingFactorCoefficient",482],")",["T_WHITESPACE"," ",482],"{",["T_WHITESPACE","\n                ",482],["T_VARIABLE","$roundingFactorCoefficient",483],["T_WHITESPACE"," ",483],["T_MUL_EQUAL","*=",483],["T_WHITESPACE"," ",483],["T_VARIABLE","$tenPower",483],";",["T_WHITESPACE","\n                ",483],["T_VARIABLE","$roundPrices",484],["T_WHITESPACE"," ",484],"=",["T_WHITESPACE"," ",484],["T_VARIABLE","$this",484],["T_OBJECT_OPERATOR","->",484],["T_STRING","_findRoundPrice",484],"(",["T_WHITESPACE","\n                    ",484],["T_VARIABLE","$lowerPrice",485],",",["T_WHITESPACE"," ",485],["T_VARIABLE","$upperPrice",485],",",["T_WHITESPACE"," ",485],["T_VARIABLE","$returnEmpty",485],",",["T_WHITESPACE"," ",485],["T_VARIABLE","$roundingFactorCoefficient",485],["T_WHITESPACE","\n                ",485],")",";",["T_WHITESPACE","\n                ",486],["T_IF","if",487],["T_WHITESPACE"," ",487],"(",["T_VARIABLE","$roundPrices",487],")",["T_WHITESPACE"," ",487],"{",["T_WHITESPACE","\n                    ",487],["T_VARIABLE","$index",488],["T_WHITESPACE"," ",488],"=",["T_WHITESPACE"," ",488],["T_STRING","round",488],"(",["T_VARIABLE","$roundingFactorCoefficient",488],["T_WHITESPACE","\n                        ",488],"\/",["T_WHITESPACE"," ",489],["T_STRING","Mage_Catalog_Model_Resource_Layer_Filter_Price",489],["T_DOUBLE_COLON","::",489],["T_STRING","MIN_POSSIBLE_PRICE",489],")",";",["T_WHITESPACE","\n                    ",489],["T_VARIABLE","$result",490],"[",["T_VARIABLE","$index",490],"]",["T_WHITESPACE"," ",490],"=",["T_WHITESPACE"," ",490],["T_VARIABLE","$roundPrices",490],";",["T_WHITESPACE","\n                ",490],"}",["T_WHITESPACE","\n            ",491],"}",["T_WHITESPACE","\n            ",492],["T_VARIABLE","$tenPower",493],["T_WHITESPACE"," ",493],["T_DIV_EQUAL","\/=",493],["T_WHITESPACE"," ",493],["T_LNUMBER","10",493],";",["T_WHITESPACE","\n        ",493],"}",["T_WHITESPACE","\n\n        ",494],["T_RETURN","return",496],["T_WHITESPACE"," ",496],["T_EMPTY","empty",496],"(",["T_VARIABLE","$result",496],")",["T_WHITESPACE"," ",496],"?",["T_WHITESPACE"," ",496],["T_ARRAY","array",496],"(",["T_LNUMBER","1",496],["T_WHITESPACE"," ",496],["T_DOUBLE_ARROW","=>",496],["T_WHITESPACE"," ",496],["T_ARRAY","array",496],"(",")",")",["T_WHITESPACE"," ",496],":",["T_WHITESPACE"," ",496],["T_VARIABLE","$result",496],";",["T_WHITESPACE","\n    ",496],"}",["T_WHITESPACE","\n\n    ",497],["T_DOC_COMMENT","\/**\n     * Get separator nearest to quantile among the separators\n     *\n     * @param int $quantileNumber\n     * @param array $separators\n     * @return bool|array [deflection, separatorPrice, $priceIndex]\n     *\/",499],["T_WHITESPACE","\n    ",505],["T_PROTECTED","protected",506],["T_WHITESPACE"," ",506],["T_FUNCTION","function",506],["T_WHITESPACE"," ",506],["T_STRING","_findBestSeparator",506],"(",["T_VARIABLE","$quantileNumber",506],",",["T_WHITESPACE"," ",506],["T_VARIABLE","$separators",506],")",["T_WHITESPACE","\n    ",506],"{",["T_WHITESPACE","\n        ",507],["T_VARIABLE","$result",508],["T_WHITESPACE"," ",508],"=",["T_WHITESPACE"," ",508],["T_STRING","false",508],";",["T_WHITESPACE","\n\n        ",508],["T_VARIABLE","$i",510],["T_WHITESPACE"," ",510],"=",["T_WHITESPACE"," ",510],["T_LNUMBER","0",510],";",["T_WHITESPACE","\n        ",510],["T_VARIABLE","$pricesCount",511],["T_WHITESPACE"," ",511],"=",["T_WHITESPACE"," ",511],["T_STRING","count",511],"(",["T_VARIABLE","$this",511],["T_OBJECT_OPERATOR","->",511],["T_STRING","_prices",511],")",";",["T_WHITESPACE","\n        ",511],["T_WHILE","while",512],["T_WHITESPACE"," ",512],"(",["T_VARIABLE","$i",512],["T_WHITESPACE"," ",512],"<",["T_WHITESPACE"," ",512],["T_VARIABLE","$pricesCount",512],["T_WHITESPACE"," ",512],["T_BOOLEAN_AND","&&",512],["T_WHITESPACE"," ",512],"!",["T_EMPTY","empty",512],"(",["T_VARIABLE","$separators",512],")",")",["T_WHITESPACE"," ",512],"{",["T_WHITESPACE","\n            ",512],["T_VARIABLE","$i",513],["T_WHITESPACE"," ",513],"=",["T_WHITESPACE"," ",513],["T_VARIABLE","$this",513],["T_OBJECT_OPERATOR","->",513],["T_STRING","_binarySearch",513],"(",["T_VARIABLE","$separators",513],"[",["T_LNUMBER","0",513],"]",",",["T_WHITESPACE"," ",513],["T_ARRAY","array",513],"(",["T_VARIABLE","$i",513],")",")",";",["T_WHITESPACE","\n            ",513],["T_IF","if",514],["T_WHITESPACE"," ",514],"(",["T_VARIABLE","$i",514],["T_WHITESPACE"," ",514],["T_IS_EQUAL","==",514],["T_WHITESPACE"," ",514],"-",["T_LNUMBER","1",514],")",["T_WHITESPACE"," ",514],"{",["T_WHITESPACE","\n                ",514],["T_BREAK","break",515],";",["T_WHITESPACE","\n            ",515],"}",["T_WHITESPACE","\n\n            ",516],["T_VARIABLE","$separator",518],["T_WHITESPACE"," ",518],"=",["T_WHITESPACE"," ",518],["T_STRING","array_shift",518],"(",["T_VARIABLE","$separators",518],")",";",["T_WHITESPACE","\n\n            ",518],["T_VARIABLE","$deflection",520],["T_WHITESPACE"," ",520],"=",["T_WHITESPACE"," ",520],["T_STRING","abs",520],"(",["T_VARIABLE","$quantileNumber",520],["T_WHITESPACE"," ",520],"*",["T_WHITESPACE"," ",520],["T_VARIABLE","$this",520],["T_OBJECT_OPERATOR","->",520],["T_STRING","_count",520],["T_WHITESPACE","\n                ",520],"-",["T_WHITESPACE"," ",521],"(",["T_VARIABLE","$this",521],["T_OBJECT_OPERATOR","->",521],["T_STRING","_quantileInterval",521],"[",["T_LNUMBER","0",521],"]",["T_WHITESPACE"," ",521],"+",["T_WHITESPACE"," ",521],["T_VARIABLE","$i",521],")",["T_WHITESPACE"," ",521],"*",["T_WHITESPACE"," ",521],["T_VARIABLE","$this",521],["T_OBJECT_OPERATOR","->",521],["T_STRING","_getCalculatedIntervalsNumber",521],"(",")",")",";",["T_WHITESPACE","\n            ",521],["T_IF","if",522],["T_WHITESPACE"," ",522],"(","!",["T_VARIABLE","$result",522],["T_WHITESPACE"," ",522],["T_BOOLEAN_OR","||",522],["T_WHITESPACE"," ",522],["T_VARIABLE","$deflection",522],["T_WHITESPACE"," ",522],"<",["T_WHITESPACE"," ",522],["T_VARIABLE","$result",522],"[",["T_LNUMBER","0",522],"]",")",["T_WHITESPACE"," ",522],"{",["T_WHITESPACE","\n                ",522],["T_VARIABLE","$result",523],["T_WHITESPACE"," ",523],"=",["T_WHITESPACE"," ",523],["T_ARRAY","array",523],"(",["T_VARIABLE","$deflection",523],",",["T_WHITESPACE"," ",523],["T_VARIABLE","$separator",523],",",["T_WHITESPACE"," ",523],["T_VARIABLE","$i",523],")",";",["T_WHITESPACE","\n            ",523],"}",["T_WHITESPACE","\n        ",524],"}",["T_WHITESPACE","\n\n        ",525],["T_RETURN","return",527],["T_WHITESPACE"," ",527],["T_VARIABLE","$result",527],["T_WHITESPACE"," ",527],"?",["T_WHITESPACE"," ",527],["T_VARIABLE","$result",527],["T_WHITESPACE"," ",527],":",["T_WHITESPACE"," ",527],["T_STRING","false",527],";",["T_WHITESPACE","\n    ",527],"}",["T_WHITESPACE","\n\n    ",528],["T_DOC_COMMENT","\/**\n     * Calculate separators, each contains 'from', 'to' and 'count'\n     *\n     * @return array\n     *\/",530],["T_WHITESPACE","\n    ",534],["T_PUBLIC","public",535],["T_WHITESPACE"," ",535],["T_FUNCTION","function",535],["T_WHITESPACE"," ",535],["T_STRING","calculateSeparators",535],"(",")",["T_WHITESPACE","\n    ",535],"{",["T_WHITESPACE","\n        ",536],["T_VARIABLE","$result",537],["T_WHITESPACE"," ",537],"=",["T_WHITESPACE"," ",537],["T_ARRAY","array",537],"(",")",";",["T_WHITESPACE","\n        ",537],["T_VARIABLE","$lastCount",538],["T_WHITESPACE"," ",538],"=",["T_WHITESPACE"," ",538],["T_LNUMBER","0",538],";",["T_WHITESPACE","\n        ",538],["T_VARIABLE","$intervalFirstPrice",539],["T_WHITESPACE"," ",539],"=",["T_WHITESPACE"," ",539],["T_VARIABLE","$this",539],["T_OBJECT_OPERATOR","->",539],["T_STRING","_minPrice",539],";",["T_WHITESPACE","\n        ",539],["T_VARIABLE","$lastSeparator",540],["T_WHITESPACE"," ",540],"=",["T_WHITESPACE"," ",540],["T_STRING","is_null",540],"(",["T_VARIABLE","$this",540],["T_OBJECT_OPERATOR","->",540],["T_STRING","_lowerLimit",540],")",["T_WHITESPACE"," ",540],"?",["T_WHITESPACE"," ",540],["T_LNUMBER","0",540],["T_WHITESPACE"," ",540],":",["T_WHITESPACE"," ",540],["T_VARIABLE","$this",540],["T_OBJECT_OPERATOR","->",540],["T_STRING","_lowerLimit",540],";",["T_WHITESPACE","\n\n        ",540],["T_FOR","for",542],["T_WHITESPACE"," ",542],"(",["T_VARIABLE","$i",542],["T_WHITESPACE"," ",542],"=",["T_WHITESPACE"," ",542],["T_LNUMBER","1",542],";",["T_WHITESPACE"," ",542],["T_VARIABLE","$i",542],["T_WHITESPACE"," ",542],"<",["T_WHITESPACE"," ",542],["T_VARIABLE","$this",542],["T_OBJECT_OPERATOR","->",542],["T_STRING","getIntervalsNumber",542],"(",")",";",["T_WHITESPACE"," ",542],["T_INC","++",542],["T_VARIABLE","$i",542],")",["T_WHITESPACE"," ",542],"{",["T_WHITESPACE","\n            ",542],["T_VARIABLE","$separator",543],["T_WHITESPACE"," ",543],"=",["T_WHITESPACE"," ",543],["T_VARIABLE","$this",543],["T_OBJECT_OPERATOR","->",543],["T_STRING","_findPriceSeparator",543],"(",["T_VARIABLE","$i",543],")",";",["T_WHITESPACE","\n            ",543],["T_IF","if",544],["T_WHITESPACE"," ",544],"(",["T_EMPTY","empty",544],"(",["T_VARIABLE","$separator",544],")",")",["T_WHITESPACE"," ",544],"{",["T_WHITESPACE","\n                ",544],["T_CONTINUE","continue",545],";",["T_WHITESPACE","\n            ",545],"}",["T_WHITESPACE","\n            ",546],["T_IF","if",547],["T_WHITESPACE"," ",547],"(",["T_VARIABLE","$this",547],["T_OBJECT_OPERATOR","->",547],["T_STRING","_quantileInterval",547],"[",["T_LNUMBER","0",547],"]",["T_WHITESPACE"," ",547],["T_IS_EQUAL","==",547],["T_WHITESPACE"," ",547],["T_LNUMBER","0",547],")",["T_WHITESPACE"," ",547],"{",["T_WHITESPACE","\n                ",547],["T_VARIABLE","$intervalFirstPrice",548],["T_WHITESPACE"," ",548],"=",["T_WHITESPACE"," ",548],["T_VARIABLE","$this",548],["T_OBJECT_OPERATOR","->",548],["T_STRING","_prices",548],"[",["T_LNUMBER","0",548],"]",";",["T_WHITESPACE","\n            ",548],"}",["T_WHITESPACE","\n            ",549],["T_VARIABLE","$separatorCandidate",550],["T_WHITESPACE"," ",550],"=",["T_WHITESPACE"," ",550],["T_STRING","false",550],";",["T_WHITESPACE","\n            ",550],["T_VARIABLE","$newIntervalFirstPrice",551],["T_WHITESPACE"," ",551],"=",["T_WHITESPACE"," ",551],["T_VARIABLE","$intervalFirstPrice",551],";",["T_WHITESPACE","\n            ",551],["T_VARIABLE","$newLastSeparator",552],["T_WHITESPACE"," ",552],"=",["T_WHITESPACE"," ",552],["T_VARIABLE","$lastSeparator",552],";",["T_WHITESPACE","\n\n            ",552],["T_VARIABLE","$pricesPerInterval",554],["T_WHITESPACE"," ",554],"=",["T_WHITESPACE"," ",554],["T_VARIABLE","$this",554],["T_OBJECT_OPERATOR","->",554],["T_STRING","_count",554],["T_WHITESPACE"," ",554],"\/",["T_WHITESPACE"," ",554],["T_VARIABLE","$this",554],["T_OBJECT_OPERATOR","->",554],["T_STRING","_getCalculatedIntervalsNumber",554],"(",")",";",["T_WHITESPACE","\n            ",554],["T_WHILE","while",555],["T_WHITESPACE"," ",555],"(","!",["T_EMPTY","empty",555],"(",["T_VARIABLE","$separator",555],")",["T_WHITESPACE"," ",555],["T_BOOLEAN_AND","&&",555],["T_WHITESPACE"," ",555],"!",["T_STRING","array_key_exists",555],"(",["T_VARIABLE","$i",555],",",["T_WHITESPACE"," ",555],["T_VARIABLE","$result",555],")",")",["T_WHITESPACE"," ",555],"{",["T_WHITESPACE","\n                ",555],["T_VARIABLE","$separatorsPortion",556],["T_WHITESPACE"," ",556],"=",["T_WHITESPACE"," ",556],["T_STRING","array_shift",556],"(",["T_VARIABLE","$separator",556],")",";",["T_WHITESPACE","\n                ",556],["T_VARIABLE","$bestSeparator",557],["T_WHITESPACE"," ",557],"=",["T_WHITESPACE"," ",557],["T_VARIABLE","$this",557],["T_OBJECT_OPERATOR","->",557],["T_STRING","_findBestSeparator",557],"(",["T_VARIABLE","$i",557],",",["T_WHITESPACE"," ",557],["T_VARIABLE","$separatorsPortion",557],")",";",["T_WHITESPACE","\n                ",557],["T_IF","if",558],["T_WHITESPACE"," ",558],"(",["T_VARIABLE","$bestSeparator",558],["T_WHITESPACE"," ",558],["T_BOOLEAN_AND","&&",558],["T_WHITESPACE"," ",558],["T_VARIABLE","$bestSeparator",558],"[",["T_LNUMBER","2",558],"]",["T_WHITESPACE"," ",558],">",["T_WHITESPACE"," ",558],["T_LNUMBER","0",558],")",["T_WHITESPACE"," ",558],"{",["T_WHITESPACE","\n                    ",558],["T_VARIABLE","$isEqualPrice",559],["T_WHITESPACE"," ",559],"=",["T_WHITESPACE"," ",559],"(",["T_VARIABLE","$intervalFirstPrice",559],["T_WHITESPACE"," ",559],["T_IS_EQUAL","==",559],["T_WHITESPACE"," ",559],["T_VARIABLE","$this",559],["T_OBJECT_OPERATOR","->",559],["T_STRING","_prices",559],"[",["T_VARIABLE","$bestSeparator",559],"[",["T_LNUMBER","2",559],"]",["T_WHITESPACE"," ",559],"-",["T_WHITESPACE"," ",559],["T_LNUMBER","1",559],"]",")",["T_WHITESPACE","\n                        ",559],"?",["T_WHITESPACE"," ",560],["T_VARIABLE","$this",560],["T_OBJECT_OPERATOR","->",560],["T_STRING","_prices",560],"[",["T_LNUMBER","0",560],"]",["T_WHITESPACE","\n                        ",560],":",["T_WHITESPACE"," ",561],["T_STRING","false",561],";",["T_WHITESPACE","\n                    ",561],["T_VARIABLE","$count",562],["T_WHITESPACE"," ",562],"=",["T_WHITESPACE"," ",562],["T_VARIABLE","$bestSeparator",562],"[",["T_LNUMBER","2",562],"]",["T_WHITESPACE"," ",562],"+",["T_WHITESPACE"," ",562],["T_VARIABLE","$this",562],["T_OBJECT_OPERATOR","->",562],["T_STRING","_quantileInterval",562],"[",["T_LNUMBER","0",562],"]",["T_WHITESPACE"," ",562],"-",["T_WHITESPACE"," ",562],["T_VARIABLE","$lastCount",562],";",["T_WHITESPACE","\n                    ",562],["T_VARIABLE","$separatorData",563],["T_WHITESPACE"," ",563],"=",["T_WHITESPACE"," ",563],["T_ARRAY","array",563],"(",["T_WHITESPACE","\n                        ",563],["T_CONSTANT_ENCAPSED_STRING","'from'",564],["T_WHITESPACE","  ",564],["T_DOUBLE_ARROW","=>",564],["T_WHITESPACE"," ",564],"(",["T_VARIABLE","$isEqualPrice",564],["T_WHITESPACE"," ",564],["T_IS_NOT_IDENTICAL","!==",564],["T_WHITESPACE"," ",564],["T_STRING","false",564],")",["T_WHITESPACE"," ",564],"?",["T_WHITESPACE"," ",564],["T_VARIABLE","$isEqualPrice",564],["T_WHITESPACE"," ",564],":",["T_WHITESPACE"," ",564],["T_VARIABLE","$lastSeparator",564],",",["T_WHITESPACE","\n                        ",564],["T_CONSTANT_ENCAPSED_STRING","'to'",565],["T_WHITESPACE","    ",565],["T_DOUBLE_ARROW","=>",565],["T_WHITESPACE"," ",565],"(",["T_VARIABLE","$isEqualPrice",565],["T_WHITESPACE"," ",565],["T_IS_NOT_IDENTICAL","!==",565],["T_WHITESPACE"," ",565],["T_STRING","false",565],")",["T_WHITESPACE"," ",565],"?",["T_WHITESPACE"," ",565],["T_VARIABLE","$isEqualPrice",565],["T_WHITESPACE"," ",565],":",["T_WHITESPACE"," ",565],["T_VARIABLE","$bestSeparator",565],"[",["T_LNUMBER","1",565],"]",",",["T_WHITESPACE","\n                        ",565],["T_CONSTANT_ENCAPSED_STRING","'count'",566],["T_WHITESPACE"," ",566],["T_DOUBLE_ARROW","=>",566],["T_WHITESPACE"," ",566],["T_VARIABLE","$count",566],",",["T_WHITESPACE","\n                    ",566],")",";",["T_WHITESPACE","\n                    ",567],["T_IF","if",568],["T_WHITESPACE"," ",568],"(",["T_STRING","abs",568],"(",["T_LNUMBER","1",568],["T_WHITESPACE"," ",568],"-",["T_WHITESPACE"," ",568],["T_VARIABLE","$count",568],["T_WHITESPACE"," ",568],"\/",["T_WHITESPACE"," ",568],["T_VARIABLE","$pricesPerInterval",568],")",["T_WHITESPACE"," ",568],["T_IS_SMALLER_OR_EQUAL","<=",568],["T_WHITESPACE"," ",568],["T_STRING","self",568],["T_DOUBLE_COLON","::",568],["T_STRING","INTERVAL_DEFLECTION_LIMIT",568],")",["T_WHITESPACE"," ",568],"{",["T_WHITESPACE","\n                        ",568],["T_VARIABLE","$newLastSeparator",569],["T_WHITESPACE"," ",569],"=",["T_WHITESPACE"," ",569],["T_VARIABLE","$bestSeparator",569],"[",["T_LNUMBER","1",569],"]",";",["T_WHITESPACE","\n                        ",569],["T_VARIABLE","$newIntervalFirstPrice",570],["T_WHITESPACE"," ",570],"=",["T_WHITESPACE"," ",570],["T_VARIABLE","$this",570],["T_OBJECT_OPERATOR","->",570],["T_STRING","_prices",570],"[",["T_VARIABLE","$bestSeparator",570],"[",["T_LNUMBER","2",570],"]","]",";",["T_WHITESPACE","\n                        ",570],["T_VARIABLE","$result",571],"[",["T_VARIABLE","$i",571],"]",["T_WHITESPACE"," ",571],"=",["T_WHITESPACE"," ",571],["T_VARIABLE","$separatorData",571],";",["T_WHITESPACE","\n                    ",571],"}",["T_WHITESPACE"," ",572],["T_ELSEIF","elseif",572],["T_WHITESPACE"," ",572],"(","!",["T_VARIABLE","$separatorCandidate",572],["T_WHITESPACE"," ",572],["T_BOOLEAN_OR","||",572],["T_WHITESPACE"," ",572],["T_VARIABLE","$bestSeparator",572],"[",["T_LNUMBER","0",572],"]",["T_WHITESPACE"," ",572],"<",["T_WHITESPACE"," ",572],["T_VARIABLE","$separatorCandidate",572],"[",["T_LNUMBER","0",572],"]",")",["T_WHITESPACE"," ",572],"{",["T_WHITESPACE","\n                        ",572],["T_VARIABLE","$separatorCandidate",573],["T_WHITESPACE"," ",573],"=",["T_WHITESPACE"," ",573],["T_ARRAY","array",573],"(",["T_WHITESPACE","\n                            ",573],["T_VARIABLE","$bestSeparator",574],"[",["T_LNUMBER","0",574],"]",",",["T_WHITESPACE","\n                            ",574],["T_VARIABLE","$separatorData",575],",",["T_WHITESPACE","\n                            ",575],["T_VARIABLE","$bestSeparator",576],"[",["T_LNUMBER","1",576],"]",",",["T_WHITESPACE","\n                            ",576],["T_VARIABLE","$this",577],["T_OBJECT_OPERATOR","->",577],["T_STRING","_prices",577],"[",["T_VARIABLE","$bestSeparator",577],"[",["T_LNUMBER","2",577],"]","]",["T_WHITESPACE","\n                        ",577],")",";",["T_WHITESPACE","\n                    ",578],"}",["T_WHITESPACE","\n                ",579],"}",["T_WHITESPACE","\n            ",580],"}",["T_WHITESPACE","\n\n            ",581],["T_IF","if",583],["T_WHITESPACE"," ",583],"(","!",["T_STRING","array_key_exists",583],"(",["T_VARIABLE","$i",583],",",["T_WHITESPACE"," ",583],["T_VARIABLE","$result",583],")",["T_WHITESPACE"," ",583],["T_BOOLEAN_AND","&&",583],["T_WHITESPACE"," ",583],["T_VARIABLE","$separatorCandidate",583],")",["T_WHITESPACE"," ",583],"{",["T_WHITESPACE","\n                ",583],["T_VARIABLE","$newLastSeparator",584],["T_WHITESPACE"," ",584],"=",["T_WHITESPACE"," ",584],["T_VARIABLE","$separatorCandidate",584],"[",["T_LNUMBER","2",584],"]",";",["T_WHITESPACE","\n                ",584],["T_VARIABLE","$newIntervalFirstPrice",585],["T_WHITESPACE"," ",585],"=",["T_WHITESPACE"," ",585],["T_VARIABLE","$separatorCandidate",585],"[",["T_LNUMBER","3",585],"]",";",["T_WHITESPACE","\n                ",585],["T_VARIABLE","$result",586],"[",["T_VARIABLE","$i",586],"]",["T_WHITESPACE"," ",586],"=",["T_WHITESPACE"," ",586],["T_VARIABLE","$separatorCandidate",586],"[",["T_LNUMBER","1",586],"]",";",["T_WHITESPACE","\n            ",586],"}",["T_WHITESPACE","\n\n            ",587],["T_IF","if",589],["T_WHITESPACE"," ",589],"(",["T_STRING","array_key_exists",589],"(",["T_VARIABLE","$i",589],",",["T_WHITESPACE"," ",589],["T_VARIABLE","$result",589],")",")",["T_WHITESPACE"," ",589],"{",["T_WHITESPACE","\n                ",589],["T_VARIABLE","$lastSeparator",590],["T_WHITESPACE"," ",590],"=",["T_WHITESPACE"," ",590],["T_VARIABLE","$newLastSeparator",590],";",["T_WHITESPACE","\n                ",590],["T_VARIABLE","$intervalFirstPrice",591],["T_WHITESPACE"," ",591],"=",["T_WHITESPACE"," ",591],["T_VARIABLE","$newIntervalFirstPrice",591],";",["T_WHITESPACE","\n                ",591],["T_VARIABLE","$priceIndex",592],["T_WHITESPACE"," ",592],"=",["T_WHITESPACE"," ",592],["T_VARIABLE","$this",592],["T_OBJECT_OPERATOR","->",592],["T_STRING","_binarySearch",592],"(",["T_VARIABLE","$lastSeparator",592],")",";",["T_WHITESPACE","\n                ",592],["T_VARIABLE","$lastCount",593],["T_WHITESPACE"," ",593],["T_PLUS_EQUAL","+=",593],["T_WHITESPACE"," ",593],["T_VARIABLE","$result",593],"[",["T_VARIABLE","$i",593],"]","[",["T_CONSTANT_ENCAPSED_STRING","'count'",593],"]",";",["T_WHITESPACE","\n                ",593],["T_IF","if",594],["T_WHITESPACE"," ",594],"(",["T_VARIABLE","$priceIndex",594],["T_WHITESPACE"," ",594],["T_IS_NOT_EQUAL","!=",594],["T_WHITESPACE"," ",594],"-",["T_LNUMBER","1",594],["T_WHITESPACE"," ",594],["T_BOOLEAN_AND","&&",594],["T_WHITESPACE"," ",594],["T_VARIABLE","$lastSeparator",594],["T_WHITESPACE"," ",594],">",["T_WHITESPACE"," ",594],["T_VARIABLE","$this",594],["T_OBJECT_OPERATOR","->",594],["T_STRING","_lastPriceLimiter",594],"[",["T_LNUMBER","1",594],"]",")",["T_WHITESPACE"," ",594],"{",["T_WHITESPACE","\n                    ",594],["T_VARIABLE","$this",595],["T_OBJECT_OPERATOR","->",595],["T_STRING","_lastPriceLimiter",595],["T_WHITESPACE"," ",595],"=",["T_WHITESPACE"," ",595],["T_ARRAY","array",595],"(",["T_VARIABLE","$priceIndex",595],["T_WHITESPACE"," ",595],"+",["T_WHITESPACE"," ",595],["T_VARIABLE","$this",595],["T_OBJECT_OPERATOR","->",595],["T_STRING","_quantileInterval",595],"[",["T_LNUMBER","0",595],"]",",",["T_WHITESPACE"," ",595],["T_VARIABLE","$lastSeparator",595],")",";",["T_WHITESPACE","\n                ",595],"}",["T_WHITESPACE","\n            ",596],"}",["T_WHITESPACE","\n        ",597],"}",["T_WHITESPACE","\n        ",598],["T_IF","if",599],["T_WHITESPACE"," ",599],"(",["T_VARIABLE","$this",599],["T_OBJECT_OPERATOR","->",599],["T_STRING","_lastPriceLimiter",599],"[",["T_LNUMBER","0",599],"]",["T_WHITESPACE"," ",599],"<",["T_WHITESPACE"," ",599],["T_VARIABLE","$this",599],["T_OBJECT_OPERATOR","->",599],["T_STRING","_count",599],")",["T_WHITESPACE"," ",599],"{",["T_WHITESPACE","\n            ",599],["T_VARIABLE","$isEqualPrice",600],["T_WHITESPACE"," ",600],"=",["T_WHITESPACE"," ",600],"(",["T_VARIABLE","$intervalFirstPrice",600],["T_WHITESPACE"," ",600],["T_IS_EQUAL","==",600],["T_WHITESPACE"," ",600],["T_VARIABLE","$this",600],["T_OBJECT_OPERATOR","->",600],["T_STRING","_maxPrice",600],")",["T_WHITESPACE"," ",600],"?",["T_WHITESPACE"," ",600],["T_VARIABLE","$intervalFirstPrice",600],["T_WHITESPACE"," ",600],":",["T_WHITESPACE"," ",600],["T_STRING","false",600],";",["T_WHITESPACE","\n            ",600],["T_VARIABLE","$result",601],"[",["T_VARIABLE","$this",601],["T_OBJECT_OPERATOR","->",601],["T_STRING","getIntervalsNumber",601],"(",")","]",["T_WHITESPACE"," ",601],"=",["T_WHITESPACE"," ",601],["T_ARRAY","array",601],"(",["T_WHITESPACE","\n                ",601],["T_CONSTANT_ENCAPSED_STRING","'from'",602],["T_WHITESPACE","  ",602],["T_DOUBLE_ARROW","=>",602],["T_WHITESPACE"," ",602],["T_VARIABLE","$isEqualPrice",602],["T_WHITESPACE"," ",602],"?",["T_WHITESPACE"," ",602],["T_VARIABLE","$isEqualPrice",602],["T_WHITESPACE"," ",602],":",["T_WHITESPACE"," ",602],["T_VARIABLE","$lastSeparator",602],",",["T_WHITESPACE","\n                ",602],["T_CONSTANT_ENCAPSED_STRING","'to'",603],["T_WHITESPACE","    ",603],["T_DOUBLE_ARROW","=>",603],["T_WHITESPACE"," ",603],["T_VARIABLE","$isEqualPrice",603],["T_WHITESPACE"," ",603],"?",["T_WHITESPACE"," ",603],["T_VARIABLE","$isEqualPrice",603],["T_WHITESPACE"," ",603],":",["T_WHITESPACE"," ",603],"(",["T_STRING","is_null",603],"(",["T_VARIABLE","$this",603],["T_OBJECT_OPERATOR","->",603],["T_STRING","_upperLimit",603],")",["T_WHITESPACE"," ",603],"?",["T_WHITESPACE"," ",603],["T_CONSTANT_ENCAPSED_STRING","''",603],["T_WHITESPACE"," ",603],":",["T_WHITESPACE"," ",603],["T_VARIABLE","$this",603],["T_OBJECT_OPERATOR","->",603],["T_STRING","_upperLimit",603],")",",",["T_WHITESPACE","\n                ",603],["T_CONSTANT_ENCAPSED_STRING","'count'",604],["T_WHITESPACE"," ",604],["T_DOUBLE_ARROW","=>",604],["T_WHITESPACE"," ",604],["T_VARIABLE","$this",604],["T_OBJECT_OPERATOR","->",604],["T_STRING","_count",604],["T_WHITESPACE"," ",604],"-",["T_WHITESPACE"," ",604],["T_VARIABLE","$lastCount",604],",",["T_WHITESPACE","\n            ",604],")",";",["T_WHITESPACE","\n        ",605],"}",["T_WHITESPACE","\n\n        ",606],["T_RETURN","return",608],["T_WHITESPACE"," ",608],["T_STRING","array_values",608],"(",["T_VARIABLE","$result",608],")",";",["T_WHITESPACE","\n    ",608],"}",["T_WHITESPACE","\n",609],"}",["T_WHITESPACE","\n",610]]
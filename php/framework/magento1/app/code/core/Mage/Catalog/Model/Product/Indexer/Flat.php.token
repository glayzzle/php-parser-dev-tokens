[["T_OPEN_TAG","<?php\n",1],["T_DOC_COMMENT","\/**\n * Magento\n *\n * NOTICE OF LICENSE\n *\n * This source file is subject to the Open Software License (OSL 3.0)\n * that is bundled with this package in the file LICENSE.txt.\n * It is also available through the world-wide-web at this URL:\n * http:\/\/opensource.org\/licenses\/osl-3.0.php\n * If you did not receive a copy of the license and are unable to\n * obtain it through the world-wide-web, please send an email\n * to license@magento.com so we can send you a copy immediately.\n *\n * DISCLAIMER\n *\n * Do not edit or add to this file if you wish to upgrade Magento to newer\n * versions in the future. If you wish to customize Magento for your\n * needs please refer to http:\/\/www.magento.com for more information.\n *\n * @category    Mage\n * @package     Mage_Catalog\n * @copyright  Copyright (c) 2006-2016 X.commerce, Inc. and affiliates (http:\/\/www.magento.com)\n * @license    http:\/\/opensource.org\/licenses\/osl-3.0.php  Open Software License (OSL 3.0)\n *\/",2],["T_WHITESPACE","\n",25],["T_CLASS","class",26],["T_WHITESPACE"," ",26],["T_STRING","Mage_Catalog_Model_Product_Indexer_Flat",26],["T_WHITESPACE"," ",26],["T_EXTENDS","extends",26],["T_WHITESPACE"," ",26],["T_STRING","Mage_Index_Model_Indexer_Abstract",26],["T_WHITESPACE","\n",26],"{",["T_WHITESPACE","\n    ",27],["T_DOC_COMMENT","\/**\n     * Data key for matching result to be saved in\n     *\/",28],["T_WHITESPACE","\n    ",30],["T_CONST","const",31],["T_WHITESPACE"," ",31],["T_STRING","EVENT_MATCH_RESULT_KEY",31],["T_WHITESPACE"," ",31],"=",["T_WHITESPACE"," ",31],["T_CONSTANT_ENCAPSED_STRING","'catalog_product_flat_match_result'",31],";",["T_WHITESPACE","\n\n    ",31],["T_DOC_COMMENT","\/**\n     * Index math Entities array\n     *\n     * @var array\n     *\/",33],["T_WHITESPACE","\n    ",37],["T_PROTECTED","protected",38],["T_WHITESPACE"," ",38],["T_VARIABLE","$_matchedEntities",38],["T_WHITESPACE"," ",38],"=",["T_WHITESPACE"," ",38],["T_ARRAY","array",38],"(",["T_WHITESPACE","\n        ",38],["T_STRING","Mage_Catalog_Model_Product",39],["T_DOUBLE_COLON","::",39],["T_STRING","ENTITY",39],["T_WHITESPACE"," ",39],["T_DOUBLE_ARROW","=>",39],["T_WHITESPACE"," ",39],["T_ARRAY","array",39],"(",["T_WHITESPACE","\n            ",39],["T_STRING","Mage_Index_Model_Event",40],["T_DOUBLE_COLON","::",40],["T_STRING","TYPE_SAVE",40],",",["T_WHITESPACE","\n            ",40],["T_STRING","Mage_Index_Model_Event",41],["T_DOUBLE_COLON","::",41],["T_STRING","TYPE_MASS_ACTION",41],",",["T_WHITESPACE","\n        ",41],")",",",["T_WHITESPACE","\n        ",42],["T_STRING","Mage_Catalog_Model_Resource_Eav_Attribute",43],["T_DOUBLE_COLON","::",43],["T_STRING","ENTITY",43],["T_WHITESPACE"," ",43],["T_DOUBLE_ARROW","=>",43],["T_WHITESPACE"," ",43],["T_ARRAY","array",43],"(",["T_WHITESPACE","\n            ",43],["T_STRING","Mage_Index_Model_Event",44],["T_DOUBLE_COLON","::",44],["T_STRING","TYPE_SAVE",44],",",["T_WHITESPACE","\n            ",44],["T_STRING","Mage_Index_Model_Event",45],["T_DOUBLE_COLON","::",45],["T_STRING","TYPE_DELETE",45],",",["T_WHITESPACE","\n        ",45],")",",",["T_WHITESPACE","\n        ",46],["T_STRING","Mage_Core_Model_Store",47],["T_DOUBLE_COLON","::",47],["T_STRING","ENTITY",47],["T_WHITESPACE"," ",47],["T_DOUBLE_ARROW","=>",47],["T_WHITESPACE"," ",47],["T_ARRAY","array",47],"(",["T_WHITESPACE","\n            ",47],["T_STRING","Mage_Index_Model_Event",48],["T_DOUBLE_COLON","::",48],["T_STRING","TYPE_SAVE",48],",",["T_WHITESPACE","\n            ",48],["T_STRING","Mage_Index_Model_Event",49],["T_DOUBLE_COLON","::",49],["T_STRING","TYPE_DELETE",49],["T_WHITESPACE","\n        ",49],")",",",["T_WHITESPACE","\n        ",50],["T_STRING","Mage_Core_Model_Store_Group",51],["T_DOUBLE_COLON","::",51],["T_STRING","ENTITY",51],["T_WHITESPACE"," ",51],["T_DOUBLE_ARROW","=>",51],["T_WHITESPACE"," ",51],["T_ARRAY","array",51],"(",["T_WHITESPACE","\n            ",51],["T_STRING","Mage_Index_Model_Event",52],["T_DOUBLE_COLON","::",52],["T_STRING","TYPE_SAVE",52],["T_WHITESPACE","\n        ",52],")",",",["T_WHITESPACE","\n        ",53],["T_STRING","Mage_Catalog_Model_Convert_Adapter_Product",54],["T_DOUBLE_COLON","::",54],["T_STRING","ENTITY",54],["T_WHITESPACE"," ",54],["T_DOUBLE_ARROW","=>",54],["T_WHITESPACE"," ",54],["T_ARRAY","array",54],"(",["T_WHITESPACE","\n            ",54],["T_STRING","Mage_Index_Model_Event",55],["T_DOUBLE_COLON","::",55],["T_STRING","TYPE_SAVE",55],["T_WHITESPACE","\n        ",55],")",",",["T_WHITESPACE","\n        ",56],["T_STRING","Mage_Catalog_Model_Product_Flat_Indexer",57],["T_DOUBLE_COLON","::",57],["T_STRING","ENTITY",57],["T_WHITESPACE"," ",57],["T_DOUBLE_ARROW","=>",57],["T_WHITESPACE"," ",57],["T_ARRAY","array",57],"(",["T_WHITESPACE","\n            ",57],["T_STRING","Mage_Catalog_Model_Product_Flat_Indexer",58],["T_DOUBLE_COLON","::",58],["T_STRING","EVENT_TYPE_REBUILD",58],",",["T_WHITESPACE","\n        ",58],")",",",["T_WHITESPACE","\n    ",59],")",";",["T_WHITESPACE","\n\n    ",60],["T_DOC_COMMENT","\/**\n     * Whether the indexer should be displayed on process\/list page\n     *\n     * @return bool\n     *\/",62],["T_WHITESPACE","\n    ",66],["T_PUBLIC","public",67],["T_WHITESPACE"," ",67],["T_FUNCTION","function",67],["T_WHITESPACE"," ",67],["T_STRING","isVisible",67],"(",")",["T_WHITESPACE","\n    ",67],"{",["T_WHITESPACE","\n        ",68],["T_DOC_COMMENT","\/** @var $productFlatHelper Mage_Catalog_Helper_Product_Flat *\/",69],["T_WHITESPACE","\n        ",69],["T_VARIABLE","$productFlatHelper",70],["T_WHITESPACE"," ",70],"=",["T_WHITESPACE"," ",70],["T_STRING","Mage",70],["T_DOUBLE_COLON","::",70],["T_STRING","helper",70],"(",["T_CONSTANT_ENCAPSED_STRING","'catalog\/product_flat'",70],")",";",["T_WHITESPACE","\n        ",70],["T_RETURN","return",71],["T_WHITESPACE"," ",71],["T_VARIABLE","$productFlatHelper",71],["T_OBJECT_OPERATOR","->",71],["T_STRING","isEnabled",71],"(",")",["T_WHITESPACE"," ",71],["T_BOOLEAN_OR","||",71],["T_WHITESPACE"," ",71],"!",["T_VARIABLE","$productFlatHelper",71],["T_OBJECT_OPERATOR","->",71],["T_STRING","isBuilt",71],"(",")",";",["T_WHITESPACE","\n    ",71],"}",["T_WHITESPACE","\n\n    ",72],["T_DOC_COMMENT","\/**\n     * Retrieve Indexer name\n     *\n     * @return string\n     *\/",74],["T_WHITESPACE","\n    ",78],["T_PUBLIC","public",79],["T_WHITESPACE"," ",79],["T_FUNCTION","function",79],["T_WHITESPACE"," ",79],["T_STRING","getName",79],"(",")",["T_WHITESPACE","\n    ",79],"{",["T_WHITESPACE","\n        ",80],["T_RETURN","return",81],["T_WHITESPACE"," ",81],["T_STRING","Mage",81],["T_DOUBLE_COLON","::",81],["T_STRING","helper",81],"(",["T_CONSTANT_ENCAPSED_STRING","'catalog'",81],")",["T_OBJECT_OPERATOR","->",81],["T_STRING","__",81],"(",["T_CONSTANT_ENCAPSED_STRING","'Product Flat Data'",81],")",";",["T_WHITESPACE","\n    ",81],"}",["T_WHITESPACE","\n\n    ",82],["T_DOC_COMMENT","\/**\n     * Retrieve Indexer description\n     *\n     * @return string\n     *\/",84],["T_WHITESPACE","\n    ",88],["T_PUBLIC","public",89],["T_WHITESPACE"," ",89],["T_FUNCTION","function",89],["T_WHITESPACE"," ",89],["T_STRING","getDescription",89],"(",")",["T_WHITESPACE","\n    ",89],"{",["T_WHITESPACE","\n        ",90],["T_RETURN","return",91],["T_WHITESPACE"," ",91],["T_STRING","Mage",91],["T_DOUBLE_COLON","::",91],["T_STRING","helper",91],"(",["T_CONSTANT_ENCAPSED_STRING","'catalog'",91],")",["T_OBJECT_OPERATOR","->",91],["T_STRING","__",91],"(",["T_CONSTANT_ENCAPSED_STRING","'Reorganize EAV product structure to flat structure'",91],")",";",["T_WHITESPACE","\n    ",91],"}",["T_WHITESPACE","\n\n    ",92],["T_DOC_COMMENT","\/**\n     * Retrieve Catalog Product Flat Indexer model\n     *\n     * @return Mage_Catalog_Model_Product_Flat_Indexer\n     *\/",94],["T_WHITESPACE","\n    ",98],["T_PROTECTED","protected",99],["T_WHITESPACE"," ",99],["T_FUNCTION","function",99],["T_WHITESPACE"," ",99],["T_STRING","_getIndexer",99],"(",")",["T_WHITESPACE","\n    ",99],"{",["T_WHITESPACE","\n        ",100],["T_RETURN","return",101],["T_WHITESPACE"," ",101],["T_STRING","Mage",101],["T_DOUBLE_COLON","::",101],["T_STRING","getSingleton",101],"(",["T_CONSTANT_ENCAPSED_STRING","'catalog\/product_flat_indexer'",101],")",";",["T_WHITESPACE","\n    ",101],"}",["T_WHITESPACE","\n\n    ",102],["T_DOC_COMMENT","\/**\n     * Check if event can be matched by process\n     * Overwrote for check is flat catalog product is enabled and specific save\n     * attribute, store, store_group\n     *\n     * @param Mage_Index_Model_Event $event\n     * @return bool\n     *\/",104],["T_WHITESPACE","\n    ",111],["T_PUBLIC","public",112],["T_WHITESPACE"," ",112],["T_FUNCTION","function",112],["T_WHITESPACE"," ",112],["T_STRING","matchEvent",112],"(",["T_STRING","Mage_Index_Model_Event",112],["T_WHITESPACE"," ",112],["T_VARIABLE","$event",112],")",["T_WHITESPACE","\n    ",112],"{",["T_WHITESPACE","\n        ",113],["T_DOC_COMMENT","\/** @var $productFlatHelper Mage_Catalog_Helper_Product_Flat *\/",114],["T_WHITESPACE","\n        ",114],["T_VARIABLE","$productFlatHelper",115],["T_WHITESPACE"," ",115],"=",["T_WHITESPACE"," ",115],["T_STRING","Mage",115],["T_DOUBLE_COLON","::",115],["T_STRING","helper",115],"(",["T_CONSTANT_ENCAPSED_STRING","'catalog\/product_flat'",115],")",";",["T_WHITESPACE","\n        ",115],["T_IF","if",116],["T_WHITESPACE"," ",116],"(","!",["T_VARIABLE","$productFlatHelper",116],["T_OBJECT_OPERATOR","->",116],["T_STRING","isEnabled",116],"(",")",["T_WHITESPACE"," ",116],["T_BOOLEAN_OR","||",116],["T_WHITESPACE"," ",116],"!",["T_VARIABLE","$productFlatHelper",116],["T_OBJECT_OPERATOR","->",116],["T_STRING","isBuilt",116],"(",")",")",["T_WHITESPACE"," ",116],"{",["T_WHITESPACE","\n            ",116],["T_RETURN","return",117],["T_WHITESPACE"," ",117],["T_STRING","false",117],";",["T_WHITESPACE","\n        ",117],"}",["T_WHITESPACE","\n\n        ",118],["T_VARIABLE","$data",120],["T_WHITESPACE"," ",120],"=",["T_WHITESPACE"," ",120],["T_VARIABLE","$event",120],["T_OBJECT_OPERATOR","->",120],["T_STRING","getNewData",120],"(",")",";",["T_WHITESPACE","\n        ",120],["T_IF","if",121],["T_WHITESPACE"," ",121],"(",["T_ISSET","isset",121],"(",["T_VARIABLE","$data",121],"[",["T_STRING","self",121],["T_DOUBLE_COLON","::",121],["T_STRING","EVENT_MATCH_RESULT_KEY",121],"]",")",")",["T_WHITESPACE"," ",121],"{",["T_WHITESPACE","\n            ",121],["T_RETURN","return",122],["T_WHITESPACE"," ",122],["T_VARIABLE","$data",122],"[",["T_STRING","self",122],["T_DOUBLE_COLON","::",122],["T_STRING","EVENT_MATCH_RESULT_KEY",122],"]",";",["T_WHITESPACE","\n        ",122],"}",["T_WHITESPACE","\n\n        ",123],["T_VARIABLE","$entity",125],["T_WHITESPACE"," ",125],"=",["T_WHITESPACE"," ",125],["T_VARIABLE","$event",125],["T_OBJECT_OPERATOR","->",125],["T_STRING","getEntity",125],"(",")",";",["T_WHITESPACE","\n        ",125],["T_IF","if",126],["T_WHITESPACE"," ",126],"(",["T_VARIABLE","$entity",126],["T_WHITESPACE"," ",126],["T_IS_EQUAL","==",126],["T_WHITESPACE"," ",126],["T_STRING","Mage_Catalog_Model_Resource_Eav_Attribute",126],["T_DOUBLE_COLON","::",126],["T_STRING","ENTITY",126],")",["T_WHITESPACE"," ",126],"{",["T_WHITESPACE","\n            ",126],["T_COMMENT","\/* @var $attribute Mage_Catalog_Model_Resource_Eav_Attribute *\/",127],["T_WHITESPACE","\n            ",127],["T_VARIABLE","$attribute",128],["T_WHITESPACE","      ",128],"=",["T_WHITESPACE"," ",128],["T_VARIABLE","$event",128],["T_OBJECT_OPERATOR","->",128],["T_STRING","getDataObject",128],"(",")",";",["T_WHITESPACE","\n            ",128],["T_VARIABLE","$addFilterable",129],["T_WHITESPACE","  ",129],"=",["T_WHITESPACE"," ",129],["T_VARIABLE","$productFlatHelper",129],["T_OBJECT_OPERATOR","->",129],["T_STRING","isAddFilterableAttributes",129],"(",")",";",["T_WHITESPACE","\n\n            ",129],["T_VARIABLE","$enableBefore",131],["T_WHITESPACE","   ",131],"=",["T_WHITESPACE"," ",131],["T_VARIABLE","$attribute",131],["T_WHITESPACE"," ",131],["T_BOOLEAN_AND","&&",131],["T_WHITESPACE"," ",131],"(","(",["T_VARIABLE","$attribute",131],["T_OBJECT_OPERATOR","->",131],["T_STRING","getOrigData",131],"(",["T_CONSTANT_ENCAPSED_STRING","'backend_type'",131],")",["T_WHITESPACE"," ",131],["T_IS_EQUAL","==",131],["T_WHITESPACE"," ",131],["T_CONSTANT_ENCAPSED_STRING","'static'",131],")",["T_WHITESPACE","\n                ",131],["T_BOOLEAN_OR","||",132],["T_WHITESPACE"," ",132],"(",["T_VARIABLE","$addFilterable",132],["T_WHITESPACE"," ",132],["T_BOOLEAN_AND","&&",132],["T_WHITESPACE"," ",132],["T_VARIABLE","$attribute",132],["T_OBJECT_OPERATOR","->",132],["T_STRING","getOrigData",132],"(",["T_CONSTANT_ENCAPSED_STRING","'is_filterable'",132],")",["T_WHITESPACE"," ",132],">",["T_WHITESPACE"," ",132],["T_LNUMBER","0",132],")",["T_WHITESPACE","\n                ",132],["T_BOOLEAN_OR","||",133],["T_WHITESPACE"," ",133],"(",["T_VARIABLE","$attribute",133],["T_OBJECT_OPERATOR","->",133],["T_STRING","getOrigData",133],"(",["T_CONSTANT_ENCAPSED_STRING","'used_in_product_listing'",133],")",["T_WHITESPACE"," ",133],["T_IS_EQUAL","==",133],["T_WHITESPACE"," ",133],["T_LNUMBER","1",133],")",["T_WHITESPACE","\n                ",133],["T_BOOLEAN_OR","||",134],["T_WHITESPACE"," ",134],"(",["T_VARIABLE","$attribute",134],["T_OBJECT_OPERATOR","->",134],["T_STRING","getOrigData",134],"(",["T_CONSTANT_ENCAPSED_STRING","'is_used_for_promo_rules'",134],")",["T_WHITESPACE"," ",134],["T_IS_EQUAL","==",134],["T_WHITESPACE"," ",134],["T_LNUMBER","1",134],")",["T_WHITESPACE","\n                ",134],["T_BOOLEAN_OR","||",135],["T_WHITESPACE"," ",135],"(",["T_VARIABLE","$attribute",135],["T_OBJECT_OPERATOR","->",135],["T_STRING","getOrigData",135],"(",["T_CONSTANT_ENCAPSED_STRING","'used_for_sort_by'",135],")",["T_WHITESPACE"," ",135],["T_IS_EQUAL","==",135],["T_WHITESPACE"," ",135],["T_LNUMBER","1",135],")",")",";",["T_WHITESPACE","\n\n            ",135],["T_VARIABLE","$enableAfter",137],["T_WHITESPACE","    ",137],"=",["T_WHITESPACE"," ",137],["T_VARIABLE","$attribute",137],["T_WHITESPACE"," ",137],["T_BOOLEAN_AND","&&",137],["T_WHITESPACE"," ",137],"(","(",["T_VARIABLE","$attribute",137],["T_OBJECT_OPERATOR","->",137],["T_STRING","getData",137],"(",["T_CONSTANT_ENCAPSED_STRING","'backend_type'",137],")",["T_WHITESPACE"," ",137],["T_IS_EQUAL","==",137],["T_WHITESPACE"," ",137],["T_CONSTANT_ENCAPSED_STRING","'static'",137],")",["T_WHITESPACE","\n                ",137],["T_BOOLEAN_OR","||",138],["T_WHITESPACE"," ",138],"(",["T_VARIABLE","$addFilterable",138],["T_WHITESPACE"," ",138],["T_BOOLEAN_AND","&&",138],["T_WHITESPACE"," ",138],["T_VARIABLE","$attribute",138],["T_OBJECT_OPERATOR","->",138],["T_STRING","getData",138],"(",["T_CONSTANT_ENCAPSED_STRING","'is_filterable'",138],")",["T_WHITESPACE"," ",138],">",["T_WHITESPACE"," ",138],["T_LNUMBER","0",138],")",["T_WHITESPACE","\n                ",138],["T_BOOLEAN_OR","||",139],["T_WHITESPACE"," ",139],"(",["T_VARIABLE","$attribute",139],["T_OBJECT_OPERATOR","->",139],["T_STRING","getData",139],"(",["T_CONSTANT_ENCAPSED_STRING","'used_in_product_listing'",139],")",["T_WHITESPACE"," ",139],["T_IS_EQUAL","==",139],["T_WHITESPACE"," ",139],["T_LNUMBER","1",139],")",["T_WHITESPACE","\n                ",139],["T_BOOLEAN_OR","||",140],["T_WHITESPACE"," ",140],"(",["T_VARIABLE","$attribute",140],["T_OBJECT_OPERATOR","->",140],["T_STRING","getData",140],"(",["T_CONSTANT_ENCAPSED_STRING","'is_used_for_promo_rules'",140],")",["T_WHITESPACE"," ",140],["T_IS_EQUAL","==",140],["T_WHITESPACE"," ",140],["T_LNUMBER","1",140],")",["T_WHITESPACE","\n                ",140],["T_BOOLEAN_OR","||",141],["T_WHITESPACE"," ",141],"(",["T_VARIABLE","$attribute",141],["T_OBJECT_OPERATOR","->",141],["T_STRING","getData",141],"(",["T_CONSTANT_ENCAPSED_STRING","'used_for_sort_by'",141],")",["T_WHITESPACE"," ",141],["T_IS_EQUAL","==",141],["T_WHITESPACE"," ",141],["T_LNUMBER","1",141],")",")",";",["T_WHITESPACE","\n\n            ",141],["T_IF","if",143],["T_WHITESPACE"," ",143],"(",["T_VARIABLE","$attribute",143],["T_WHITESPACE"," ",143],["T_BOOLEAN_AND","&&",143],["T_WHITESPACE"," ",143],["T_VARIABLE","$event",143],["T_OBJECT_OPERATOR","->",143],["T_STRING","getType",143],"(",")",["T_WHITESPACE"," ",143],["T_IS_EQUAL","==",143],["T_WHITESPACE"," ",143],["T_STRING","Mage_Index_Model_Event",143],["T_DOUBLE_COLON","::",143],["T_STRING","TYPE_DELETE",143],")",["T_WHITESPACE"," ",143],"{",["T_WHITESPACE","\n                ",143],["T_VARIABLE","$result",144],["T_WHITESPACE"," ",144],"=",["T_WHITESPACE"," ",144],["T_VARIABLE","$enableBefore",144],";",["T_WHITESPACE","\n            ",144],"}",["T_WHITESPACE"," ",145],["T_ELSEIF","elseif",145],["T_WHITESPACE"," ",145],"(",["T_VARIABLE","$attribute",145],["T_WHITESPACE"," ",145],["T_BOOLEAN_AND","&&",145],["T_WHITESPACE"," ",145],["T_VARIABLE","$event",145],["T_OBJECT_OPERATOR","->",145],["T_STRING","getType",145],"(",")",["T_WHITESPACE"," ",145],["T_IS_EQUAL","==",145],["T_WHITESPACE"," ",145],["T_STRING","Mage_Index_Model_Event",145],["T_DOUBLE_COLON","::",145],["T_STRING","TYPE_SAVE",145],")",["T_WHITESPACE"," ",145],"{",["T_WHITESPACE","\n                ",145],["T_IF","if",146],["T_WHITESPACE"," ",146],"(",["T_VARIABLE","$enableAfter",146],["T_WHITESPACE"," ",146],["T_BOOLEAN_OR","||",146],["T_WHITESPACE"," ",146],["T_VARIABLE","$enableBefore",146],")",["T_WHITESPACE"," ",146],"{",["T_WHITESPACE","\n                    ",146],["T_VARIABLE","$result",147],["T_WHITESPACE"," ",147],"=",["T_WHITESPACE"," ",147],["T_STRING","true",147],";",["T_WHITESPACE","\n                ",147],"}",["T_WHITESPACE"," ",148],["T_ELSE","else",148],["T_WHITESPACE"," ",148],"{",["T_WHITESPACE","\n                    ",148],["T_VARIABLE","$result",149],["T_WHITESPACE"," ",149],"=",["T_WHITESPACE"," ",149],["T_STRING","false",149],";",["T_WHITESPACE","\n                ",149],"}",["T_WHITESPACE","\n            ",150],"}",["T_WHITESPACE"," ",151],["T_ELSE","else",151],["T_WHITESPACE"," ",151],"{",["T_WHITESPACE","\n                ",151],["T_VARIABLE","$result",152],["T_WHITESPACE"," ",152],"=",["T_WHITESPACE"," ",152],["T_STRING","false",152],";",["T_WHITESPACE","\n            ",152],"}",["T_WHITESPACE","\n        ",153],"}",["T_WHITESPACE"," ",154],["T_ELSE","else",154],["T_WHITESPACE"," ",154],["T_IF","if",154],["T_WHITESPACE"," ",154],"(",["T_VARIABLE","$entity",154],["T_WHITESPACE"," ",154],["T_IS_EQUAL","==",154],["T_WHITESPACE"," ",154],["T_STRING","Mage_Core_Model_Store",154],["T_DOUBLE_COLON","::",154],["T_STRING","ENTITY",154],")",["T_WHITESPACE"," ",154],"{",["T_WHITESPACE","\n            ",154],["T_IF","if",155],["T_WHITESPACE"," ",155],"(",["T_VARIABLE","$event",155],["T_OBJECT_OPERATOR","->",155],["T_STRING","getType",155],"(",")",["T_WHITESPACE"," ",155],["T_IS_EQUAL","==",155],["T_WHITESPACE"," ",155],["T_STRING","Mage_Index_Model_Event",155],["T_DOUBLE_COLON","::",155],["T_STRING","TYPE_DELETE",155],")",["T_WHITESPACE"," ",155],"{",["T_WHITESPACE","\n                ",155],["T_VARIABLE","$result",156],["T_WHITESPACE"," ",156],"=",["T_WHITESPACE"," ",156],["T_STRING","true",156],";",["T_WHITESPACE","\n            ",156],"}",["T_WHITESPACE"," ",157],["T_ELSE","else",157],["T_WHITESPACE"," ",157],"{",["T_WHITESPACE","\n                ",157],["T_COMMENT","\/* @var $store Mage_Core_Model_Store *\/",158],["T_WHITESPACE","\n                ",158],["T_VARIABLE","$store",159],["T_WHITESPACE"," ",159],"=",["T_WHITESPACE"," ",159],["T_VARIABLE","$event",159],["T_OBJECT_OPERATOR","->",159],["T_STRING","getDataObject",159],"(",")",";",["T_WHITESPACE","\n                ",159],["T_IF","if",160],["T_WHITESPACE"," ",160],"(",["T_VARIABLE","$store",160],["T_WHITESPACE"," ",160],["T_BOOLEAN_AND","&&",160],["T_WHITESPACE"," ",160],["T_VARIABLE","$store",160],["T_OBJECT_OPERATOR","->",160],["T_STRING","isObjectNew",160],"(",")",")",["T_WHITESPACE"," ",160],"{",["T_WHITESPACE","\n                    ",160],["T_VARIABLE","$result",161],["T_WHITESPACE"," ",161],"=",["T_WHITESPACE"," ",161],["T_STRING","true",161],";",["T_WHITESPACE","\n                ",161],"}",["T_WHITESPACE"," ",162],["T_ELSE","else",162],["T_WHITESPACE"," ",162],"{",["T_WHITESPACE","\n                    ",162],["T_VARIABLE","$result",163],["T_WHITESPACE"," ",163],"=",["T_WHITESPACE"," ",163],["T_STRING","false",163],";",["T_WHITESPACE","\n                ",163],"}",["T_WHITESPACE","\n            ",164],"}",["T_WHITESPACE","\n        ",165],"}",["T_WHITESPACE"," ",166],["T_ELSE","else",166],["T_WHITESPACE"," ",166],["T_IF","if",166],["T_WHITESPACE"," ",166],"(",["T_VARIABLE","$entity",166],["T_WHITESPACE"," ",166],["T_IS_EQUAL","==",166],["T_WHITESPACE"," ",166],["T_STRING","Mage_Core_Model_Store_Group",166],["T_DOUBLE_COLON","::",166],["T_STRING","ENTITY",166],")",["T_WHITESPACE"," ",166],"{",["T_WHITESPACE","\n            ",166],["T_COMMENT","\/* @var $storeGroup Mage_Core_Model_Store_Group *\/",167],["T_WHITESPACE","\n            ",167],["T_VARIABLE","$storeGroup",168],["T_WHITESPACE"," ",168],"=",["T_WHITESPACE"," ",168],["T_VARIABLE","$event",168],["T_OBJECT_OPERATOR","->",168],["T_STRING","getDataObject",168],"(",")",";",["T_WHITESPACE","\n            ",168],["T_IF","if",169],["T_WHITESPACE"," ",169],"(",["T_VARIABLE","$storeGroup",169],["T_WHITESPACE"," ",169],["T_BOOLEAN_AND","&&",169],["T_WHITESPACE"," ",169],["T_VARIABLE","$storeGroup",169],["T_OBJECT_OPERATOR","->",169],["T_STRING","dataHasChangedFor",169],"(",["T_CONSTANT_ENCAPSED_STRING","'website_id'",169],")",")",["T_WHITESPACE"," ",169],"{",["T_WHITESPACE","\n                ",169],["T_VARIABLE","$result",170],["T_WHITESPACE"," ",170],"=",["T_WHITESPACE"," ",170],["T_STRING","true",170],";",["T_WHITESPACE","\n            ",170],"}",["T_WHITESPACE"," ",171],["T_ELSE","else",171],["T_WHITESPACE"," ",171],"{",["T_WHITESPACE","\n                ",171],["T_VARIABLE","$result",172],["T_WHITESPACE"," ",172],"=",["T_WHITESPACE"," ",172],["T_STRING","false",172],";",["T_WHITESPACE","\n            ",172],"}",["T_WHITESPACE","\n        ",173],"}",["T_WHITESPACE"," ",174],["T_ELSE","else",174],["T_WHITESPACE"," ",174],"{",["T_WHITESPACE","\n            ",174],["T_VARIABLE","$result",175],["T_WHITESPACE"," ",175],"=",["T_WHITESPACE"," ",175],["T_STRING","parent",175],["T_DOUBLE_COLON","::",175],["T_STRING","matchEvent",175],"(",["T_VARIABLE","$event",175],")",";",["T_WHITESPACE","\n        ",175],"}",["T_WHITESPACE","\n\n        ",176],["T_VARIABLE","$event",178],["T_OBJECT_OPERATOR","->",178],["T_STRING","addNewData",178],"(",["T_STRING","self",178],["T_DOUBLE_COLON","::",178],["T_STRING","EVENT_MATCH_RESULT_KEY",178],",",["T_WHITESPACE"," ",178],["T_VARIABLE","$result",178],")",";",["T_WHITESPACE","\n\n        ",178],["T_RETURN","return",180],["T_WHITESPACE"," ",180],["T_VARIABLE","$result",180],";",["T_WHITESPACE","\n    ",180],"}",["T_WHITESPACE","\n\n    ",181],["T_DOC_COMMENT","\/**\n     * Register data required by process in event object\n     *\n     * @param Mage_Index_Model_Event $event\n     *\/",183],["T_WHITESPACE","\n    ",187],["T_PROTECTED","protected",188],["T_WHITESPACE"," ",188],["T_FUNCTION","function",188],["T_WHITESPACE"," ",188],["T_STRING","_registerEvent",188],"(",["T_STRING","Mage_Index_Model_Event",188],["T_WHITESPACE"," ",188],["T_VARIABLE","$event",188],")",["T_WHITESPACE","\n    ",188],"{",["T_WHITESPACE","\n        ",189],["T_VARIABLE","$event",190],["T_OBJECT_OPERATOR","->",190],["T_STRING","addNewData",190],"(",["T_STRING","self",190],["T_DOUBLE_COLON","::",190],["T_STRING","EVENT_MATCH_RESULT_KEY",190],",",["T_WHITESPACE"," ",190],["T_STRING","true",190],")",";",["T_WHITESPACE","\n        ",190],["T_SWITCH","switch",191],["T_WHITESPACE"," ",191],"(",["T_VARIABLE","$event",191],["T_OBJECT_OPERATOR","->",191],["T_STRING","getEntity",191],"(",")",")",["T_WHITESPACE"," ",191],"{",["T_WHITESPACE","\n            ",191],["T_CASE","case",192],["T_WHITESPACE"," ",192],["T_STRING","Mage_Catalog_Model_Product",192],["T_DOUBLE_COLON","::",192],["T_STRING","ENTITY",192],":",["T_WHITESPACE","\n                ",192],["T_VARIABLE","$this",193],["T_OBJECT_OPERATOR","->",193],["T_STRING","_registerCatalogProductEvent",193],"(",["T_VARIABLE","$event",193],")",";",["T_WHITESPACE","\n                ",193],["T_BREAK","break",194],";",["T_WHITESPACE","\n            ",194],["T_CASE","case",195],["T_WHITESPACE"," ",195],["T_STRING","Mage_Catalog_Model_Convert_Adapter_Product",195],["T_DOUBLE_COLON","::",195],["T_STRING","ENTITY",195],":",["T_WHITESPACE","\n                ",195],["T_VARIABLE","$event",196],["T_OBJECT_OPERATOR","->",196],["T_STRING","addNewData",196],"(",["T_CONSTANT_ENCAPSED_STRING","'catalog_product_flat_reindex_all'",196],",",["T_WHITESPACE"," ",196],["T_STRING","true",196],")",";",["T_WHITESPACE","\n                ",196],["T_BREAK","break",197],";",["T_WHITESPACE","\n            ",197],["T_CASE","case",198],["T_WHITESPACE"," ",198],["T_STRING","Mage_Core_Model_Store",198],["T_DOUBLE_COLON","::",198],["T_STRING","ENTITY",198],":",["T_WHITESPACE","\n                ",198],["T_IF","if",199],["T_WHITESPACE"," ",199],"(",["T_VARIABLE","$event",199],["T_OBJECT_OPERATOR","->",199],["T_STRING","getType",199],"(",")",["T_WHITESPACE"," ",199],["T_IS_EQUAL","==",199],["T_WHITESPACE"," ",199],["T_STRING","Mage_Index_Model_Event",199],["T_DOUBLE_COLON","::",199],["T_STRING","TYPE_DELETE",199],")",["T_WHITESPACE"," ",199],"{",["T_WHITESPACE","\n                    ",199],["T_VARIABLE","$this",200],["T_OBJECT_OPERATOR","->",200],["T_STRING","_registerCoreStoreEvent",200],"(",["T_VARIABLE","$event",200],")",";",["T_WHITESPACE","\n                    ",200],["T_BREAK","break",201],";",["T_WHITESPACE","\n                ",201],"}",["T_WHITESPACE","\n            ",202],["T_CASE","case",203],["T_WHITESPACE"," ",203],["T_STRING","Mage_Catalog_Model_Resource_Eav_Attribute",203],["T_DOUBLE_COLON","::",203],["T_STRING","ENTITY",203],":",["T_WHITESPACE","\n            ",203],["T_CASE","case",204],["T_WHITESPACE"," ",204],["T_STRING","Mage_Core_Model_Store_Group",204],["T_DOUBLE_COLON","::",204],["T_STRING","ENTITY",204],":",["T_WHITESPACE","\n                ",204],["T_VARIABLE","$event",205],["T_OBJECT_OPERATOR","->",205],["T_STRING","addNewData",205],"(",["T_CONSTANT_ENCAPSED_STRING","'catalog_product_flat_skip_call_event_handler'",205],",",["T_WHITESPACE"," ",205],["T_STRING","true",205],")",";",["T_WHITESPACE","\n                ",205],["T_VARIABLE","$process",206],["T_WHITESPACE"," ",206],"=",["T_WHITESPACE"," ",206],["T_VARIABLE","$event",206],["T_OBJECT_OPERATOR","->",206],["T_STRING","getProcess",206],"(",")",";",["T_WHITESPACE","\n                ",206],["T_VARIABLE","$process",207],["T_OBJECT_OPERATOR","->",207],["T_STRING","changeStatus",207],"(",["T_STRING","Mage_Index_Model_Process",207],["T_DOUBLE_COLON","::",207],["T_STRING","STATUS_REQUIRE_REINDEX",207],")",";",["T_WHITESPACE","\n                ",207],["T_BREAK","break",208],";",["T_WHITESPACE","\n            ",208],["T_CASE","case",209],["T_WHITESPACE"," ",209],["T_STRING","Mage_Catalog_Model_Product_Flat_Indexer",209],["T_DOUBLE_COLON","::",209],["T_STRING","ENTITY",209],":",["T_WHITESPACE","\n                ",209],["T_SWITCH","switch",210],["T_WHITESPACE"," ",210],"(",["T_VARIABLE","$event",210],["T_OBJECT_OPERATOR","->",210],["T_STRING","getType",210],"(",")",")",["T_WHITESPACE"," ",210],"{",["T_WHITESPACE","\n                    ",210],["T_CASE","case",211],["T_WHITESPACE"," ",211],["T_STRING","Mage_Catalog_Model_Product_Flat_Indexer",211],["T_DOUBLE_COLON","::",211],["T_STRING","EVENT_TYPE_REBUILD",211],":",["T_WHITESPACE","\n                        ",211],["T_VARIABLE","$event",212],["T_OBJECT_OPERATOR","->",212],["T_STRING","addNewData",212],"(",["T_CONSTANT_ENCAPSED_STRING","'id'",212],",",["T_WHITESPACE"," ",212],["T_VARIABLE","$event",212],["T_OBJECT_OPERATOR","->",212],["T_STRING","getDataObject",212],"(",")",["T_OBJECT_OPERATOR","->",212],["T_STRING","getId",212],"(",")",")",";",["T_WHITESPACE","\n                ",212],"}",["T_WHITESPACE","\n                ",213],["T_BREAK","break",214],";",["T_WHITESPACE","\n        ",214],"}",["T_WHITESPACE","\n    ",215],"}",["T_WHITESPACE","\n\n    ",216],["T_DOC_COMMENT","\/**\n     * Register data required by catalog product process in event object\n     *\n     * @param Mage_Index_Model_Event $event\n     * @return Mage_Catalog_Model_Product_Indexer_Flat\n     *\/",218],["T_WHITESPACE","\n    ",223],["T_PROTECTED","protected",224],["T_WHITESPACE"," ",224],["T_FUNCTION","function",224],["T_WHITESPACE"," ",224],["T_STRING","_registerCatalogProductEvent",224],"(",["T_STRING","Mage_Index_Model_Event",224],["T_WHITESPACE"," ",224],["T_VARIABLE","$event",224],")",["T_WHITESPACE","\n    ",224],"{",["T_WHITESPACE","\n        ",225],["T_SWITCH","switch",226],["T_WHITESPACE"," ",226],"(",["T_VARIABLE","$event",226],["T_OBJECT_OPERATOR","->",226],["T_STRING","getType",226],"(",")",")",["T_WHITESPACE"," ",226],"{",["T_WHITESPACE","\n            ",226],["T_CASE","case",227],["T_WHITESPACE"," ",227],["T_STRING","Mage_Index_Model_Event",227],["T_DOUBLE_COLON","::",227],["T_STRING","TYPE_SAVE",227],":",["T_WHITESPACE","\n                ",227],["T_COMMENT","\/* @var $product Mage_Catalog_Model_Product *\/",228],["T_WHITESPACE","\n                ",228],["T_VARIABLE","$product",229],["T_WHITESPACE"," ",229],"=",["T_WHITESPACE"," ",229],["T_VARIABLE","$event",229],["T_OBJECT_OPERATOR","->",229],["T_STRING","getDataObject",229],"(",")",";",["T_WHITESPACE","\n                ",229],["T_VARIABLE","$event",230],["T_OBJECT_OPERATOR","->",230],["T_STRING","addNewData",230],"(",["T_CONSTANT_ENCAPSED_STRING","'catalog_product_flat_product_id'",230],",",["T_WHITESPACE"," ",230],["T_VARIABLE","$product",230],["T_OBJECT_OPERATOR","->",230],["T_STRING","getId",230],"(",")",")",";",["T_WHITESPACE","\n                ",230],["T_BREAK","break",231],";",["T_WHITESPACE","\n\n            ",231],["T_CASE","case",233],["T_WHITESPACE"," ",233],["T_STRING","Mage_Index_Model_Event",233],["T_DOUBLE_COLON","::",233],["T_STRING","TYPE_MASS_ACTION",233],":",["T_WHITESPACE","\n                ",233],["T_COMMENT","\/* @var $actionObject Varien_Object *\/",234],["T_WHITESPACE","\n                ",234],["T_VARIABLE","$actionObject",235],["T_WHITESPACE"," ",235],"=",["T_WHITESPACE"," ",235],["T_VARIABLE","$event",235],["T_OBJECT_OPERATOR","->",235],["T_STRING","getDataObject",235],"(",")",";",["T_WHITESPACE","\n\n                ",235],["T_VARIABLE","$reindexData",237],["T_WHITESPACE","  ",237],"=",["T_WHITESPACE"," ",237],["T_ARRAY","array",237],"(",")",";",["T_WHITESPACE","\n                ",237],["T_VARIABLE","$reindexFlat",238],["T_WHITESPACE","  ",238],"=",["T_WHITESPACE"," ",238],["T_STRING","false",238],";",["T_WHITESPACE","\n\n                ",238],["T_COMMENT","\/\/ check if status changed\n",240],["T_WHITESPACE","                ",241],["T_VARIABLE","$attrData",241],["T_WHITESPACE"," ",241],"=",["T_WHITESPACE"," ",241],["T_VARIABLE","$actionObject",241],["T_OBJECT_OPERATOR","->",241],["T_STRING","getAttributesData",241],"(",")",";",["T_WHITESPACE","\n                ",241],["T_IF","if",242],["T_WHITESPACE"," ",242],"(",["T_ISSET","isset",242],"(",["T_VARIABLE","$attrData",242],"[",["T_CONSTANT_ENCAPSED_STRING","'status'",242],"]",")",")",["T_WHITESPACE"," ",242],"{",["T_WHITESPACE","\n                    ",242],["T_VARIABLE","$reindexFlat",243],["T_WHITESPACE"," ",243],"=",["T_WHITESPACE"," ",243],["T_STRING","true",243],";",["T_WHITESPACE","\n                    ",243],["T_VARIABLE","$reindexData",244],"[",["T_CONSTANT_ENCAPSED_STRING","'catalog_product_flat_status'",244],"]",["T_WHITESPACE"," ",244],"=",["T_WHITESPACE"," ",244],["T_VARIABLE","$attrData",244],"[",["T_CONSTANT_ENCAPSED_STRING","'status'",244],"]",";",["T_WHITESPACE","\n                ",244],"}",["T_WHITESPACE","\n\n                ",245],["T_COMMENT","\/\/ check changed websites\n",247],["T_WHITESPACE","                ",248],["T_IF","if",248],["T_WHITESPACE"," ",248],"(",["T_VARIABLE","$actionObject",248],["T_OBJECT_OPERATOR","->",248],["T_STRING","getWebsiteIds",248],"(",")",")",["T_WHITESPACE"," ",248],"{",["T_WHITESPACE","\n                    ",248],["T_VARIABLE","$reindexFlat",249],["T_WHITESPACE"," ",249],"=",["T_WHITESPACE"," ",249],["T_STRING","true",249],";",["T_WHITESPACE","\n                    ",249],["T_VARIABLE","$reindexData",250],"[",["T_CONSTANT_ENCAPSED_STRING","'catalog_product_flat_website_ids'",250],"]",["T_WHITESPACE"," ",250],"=",["T_WHITESPACE"," ",250],["T_VARIABLE","$actionObject",250],["T_OBJECT_OPERATOR","->",250],["T_STRING","getWebsiteIds",250],"(",")",";",["T_WHITESPACE","\n                    ",250],["T_VARIABLE","$reindexData",251],"[",["T_CONSTANT_ENCAPSED_STRING","'catalog_product_flat_action_type'",251],"]",["T_WHITESPACE"," ",251],"=",["T_WHITESPACE"," ",251],["T_VARIABLE","$actionObject",251],["T_OBJECT_OPERATOR","->",251],["T_STRING","getActionType",251],"(",")",";",["T_WHITESPACE","\n                ",251],"}",["T_WHITESPACE","\n\n                ",252],["T_VARIABLE","$flatAttributes",254],["T_WHITESPACE"," ",254],"=",["T_WHITESPACE"," ",254],["T_ARRAY","array",254],"(",")",";",["T_WHITESPACE","\n                ",254],["T_IF","if",255],["T_WHITESPACE"," ",255],"(",["T_STRING","is_array",255],"(",["T_VARIABLE","$attrData",255],")",")",["T_WHITESPACE"," ",255],"{",["T_WHITESPACE","\n                    ",255],["T_VARIABLE","$flatAttributes",256],["T_WHITESPACE"," ",256],"=",["T_WHITESPACE"," ",256],["T_STRING","array_intersect",256],"(",["T_VARIABLE","$this",256],["T_OBJECT_OPERATOR","->",256],["T_STRING","_getFlatAttributes",256],"(",")",",",["T_WHITESPACE"," ",256],["T_STRING","array_keys",256],"(",["T_VARIABLE","$attrData",256],")",")",";",["T_WHITESPACE","\n                ",256],"}",["T_WHITESPACE","\n\n                ",257],["T_IF","if",259],["T_WHITESPACE"," ",259],"(",["T_STRING","count",259],"(",["T_VARIABLE","$flatAttributes",259],")",["T_WHITESPACE"," ",259],">",["T_WHITESPACE"," ",259],["T_LNUMBER","0",259],")",["T_WHITESPACE"," ",259],"{",["T_WHITESPACE","\n                    ",259],["T_VARIABLE","$reindexFlat",260],["T_WHITESPACE"," ",260],"=",["T_WHITESPACE"," ",260],["T_STRING","true",260],";",["T_WHITESPACE","\n                    ",260],["T_VARIABLE","$reindexData",261],"[",["T_CONSTANT_ENCAPSED_STRING","'catalog_product_flat_force_update'",261],"]",["T_WHITESPACE"," ",261],"=",["T_WHITESPACE"," ",261],["T_STRING","true",261],";",["T_WHITESPACE","\n                ",261],"}",["T_WHITESPACE","\n\n                ",262],["T_COMMENT","\/\/ register affected products\n",264],["T_WHITESPACE","                ",265],["T_IF","if",265],["T_WHITESPACE"," ",265],"(",["T_VARIABLE","$reindexFlat",265],")",["T_WHITESPACE"," ",265],"{",["T_WHITESPACE","\n                    ",265],["T_VARIABLE","$reindexData",266],"[",["T_CONSTANT_ENCAPSED_STRING","'catalog_product_flat_product_ids'",266],"]",["T_WHITESPACE"," ",266],"=",["T_WHITESPACE"," ",266],["T_VARIABLE","$actionObject",266],["T_OBJECT_OPERATOR","->",266],["T_STRING","getProductIds",266],"(",")",";",["T_WHITESPACE","\n                    ",266],["T_FOREACH","foreach",267],["T_WHITESPACE"," ",267],"(",["T_VARIABLE","$reindexData",267],["T_WHITESPACE"," ",267],["T_AS","as",267],["T_WHITESPACE"," ",267],["T_VARIABLE","$k",267],["T_WHITESPACE"," ",267],["T_DOUBLE_ARROW","=>",267],["T_WHITESPACE"," ",267],["T_VARIABLE","$v",267],")",["T_WHITESPACE"," ",267],"{",["T_WHITESPACE","\n                        ",267],["T_VARIABLE","$event",268],["T_OBJECT_OPERATOR","->",268],["T_STRING","addNewData",268],"(",["T_VARIABLE","$k",268],",",["T_WHITESPACE"," ",268],["T_VARIABLE","$v",268],")",";",["T_WHITESPACE","\n                    ",268],"}",["T_WHITESPACE","\n                ",269],"}",["T_WHITESPACE","\n                ",270],["T_BREAK","break",271],";",["T_WHITESPACE","\n        ",271],"}",["T_WHITESPACE","\n\n        ",272],["T_RETURN","return",274],["T_WHITESPACE"," ",274],["T_VARIABLE","$this",274],";",["T_WHITESPACE","\n    ",274],"}",["T_WHITESPACE","\n\n    ",275],["T_DOC_COMMENT","\/**\n     * Register core store delete process\n     *\n     * @param Mage_Index_Model_Event $event\n     * @return Mage_Catalog_Model_Product_Indexer_Flat\n     *\/",277],["T_WHITESPACE","\n    ",282],["T_PROTECTED","protected",283],["T_WHITESPACE"," ",283],["T_FUNCTION","function",283],["T_WHITESPACE"," ",283],["T_STRING","_registerCoreStoreEvent",283],"(",["T_STRING","Mage_Index_Model_Event",283],["T_WHITESPACE"," ",283],["T_VARIABLE","$event",283],")",["T_WHITESPACE","\n    ",283],"{",["T_WHITESPACE","\n        ",284],["T_IF","if",285],["T_WHITESPACE"," ",285],"(",["T_VARIABLE","$event",285],["T_OBJECT_OPERATOR","->",285],["T_STRING","getType",285],"(",")",["T_WHITESPACE"," ",285],["T_IS_EQUAL","==",285],["T_WHITESPACE"," ",285],["T_STRING","Mage_Index_Model_Event",285],["T_DOUBLE_COLON","::",285],["T_STRING","TYPE_DELETE",285],")",["T_WHITESPACE"," ",285],"{",["T_WHITESPACE","\n            ",285],["T_COMMENT","\/* @var $store Mage_Core_Model_Store *\/",286],["T_WHITESPACE","\n            ",286],["T_VARIABLE","$store",287],["T_WHITESPACE"," ",287],"=",["T_WHITESPACE"," ",287],["T_VARIABLE","$event",287],["T_OBJECT_OPERATOR","->",287],["T_STRING","getDataObject",287],"(",")",";",["T_WHITESPACE","\n            ",287],["T_VARIABLE","$event",288],["T_OBJECT_OPERATOR","->",288],["T_STRING","addNewData",288],"(",["T_CONSTANT_ENCAPSED_STRING","'catalog_product_flat_delete_store_id'",288],",",["T_WHITESPACE"," ",288],["T_VARIABLE","$store",288],["T_OBJECT_OPERATOR","->",288],["T_STRING","getId",288],"(",")",")",";",["T_WHITESPACE","\n        ",288],"}",["T_WHITESPACE","\n        ",289],["T_RETURN","return",290],["T_WHITESPACE"," ",290],["T_VARIABLE","$this",290],";",["T_WHITESPACE","\n    ",290],"}",["T_WHITESPACE","\n\n    ",291],["T_DOC_COMMENT","\/**\n     * Process event\n     *\n     * @param Mage_Index_Model_Event $event\n     *\/",293],["T_WHITESPACE","\n    ",297],["T_PROTECTED","protected",298],["T_WHITESPACE"," ",298],["T_FUNCTION","function",298],["T_WHITESPACE"," ",298],["T_STRING","_processEvent",298],"(",["T_STRING","Mage_Index_Model_Event",298],["T_WHITESPACE"," ",298],["T_VARIABLE","$event",298],")",["T_WHITESPACE","\n    ",298],"{",["T_WHITESPACE","\n        ",299],["T_VARIABLE","$data",300],["T_WHITESPACE"," ",300],"=",["T_WHITESPACE"," ",300],["T_VARIABLE","$event",300],["T_OBJECT_OPERATOR","->",300],["T_STRING","getNewData",300],"(",")",";",["T_WHITESPACE","\n        ",300],["T_IF","if",301],["T_WHITESPACE"," ",301],"(",["T_VARIABLE","$event",301],["T_OBJECT_OPERATOR","->",301],["T_STRING","getType",301],"(",")",["T_WHITESPACE"," ",301],["T_IS_EQUAL","==",301],["T_WHITESPACE"," ",301],["T_STRING","Mage_Catalog_Model_Product_Flat_Indexer",301],["T_DOUBLE_COLON","::",301],["T_STRING","EVENT_TYPE_REBUILD",301],")",["T_WHITESPACE"," ",301],"{",["T_WHITESPACE","\n            ",301],["T_VARIABLE","$this",302],["T_OBJECT_OPERATOR","->",302],["T_STRING","_getIndexer",302],"(",")",["T_OBJECT_OPERATOR","->",302],["T_STRING","getResource",302],"(",")",["T_OBJECT_OPERATOR","->",302],["T_STRING","rebuild",302],"(",["T_VARIABLE","$data",302],"[",["T_CONSTANT_ENCAPSED_STRING","'id'",302],"]",")",";",["T_WHITESPACE","\n            ",302],["T_RETURN","return",303],";",["T_WHITESPACE","\n        ",303],"}",["T_WHITESPACE","\n\n\n        ",304],["T_IF","if",307],["T_WHITESPACE"," ",307],"(","!",["T_EMPTY","empty",307],"(",["T_VARIABLE","$data",307],"[",["T_CONSTANT_ENCAPSED_STRING","'catalog_product_flat_reindex_all'",307],"]",")",")",["T_WHITESPACE"," ",307],"{",["T_WHITESPACE","\n            ",307],["T_VARIABLE","$this",308],["T_OBJECT_OPERATOR","->",308],["T_STRING","reindexAll",308],"(",")",";",["T_WHITESPACE","\n        ",308],"}",["T_WHITESPACE"," ",309],["T_ELSE","else",309],["T_WHITESPACE"," ",309],["T_IF","if",309],["T_WHITESPACE"," ",309],"(","!",["T_EMPTY","empty",309],"(",["T_VARIABLE","$data",309],"[",["T_CONSTANT_ENCAPSED_STRING","'catalog_product_flat_product_id'",309],"]",")",")",["T_WHITESPACE"," ",309],"{",["T_WHITESPACE","\n            ",309],["T_COMMENT","\/\/ catalog_product save\n",310],["T_WHITESPACE","            ",311],["T_VARIABLE","$productId",311],["T_WHITESPACE"," ",311],"=",["T_WHITESPACE"," ",311],["T_VARIABLE","$data",311],"[",["T_CONSTANT_ENCAPSED_STRING","'catalog_product_flat_product_id'",311],"]",";",["T_WHITESPACE","\n            ",311],["T_VARIABLE","$this",312],["T_OBJECT_OPERATOR","->",312],["T_STRING","_getIndexer",312],"(",")",["T_OBJECT_OPERATOR","->",312],["T_STRING","saveProduct",312],"(",["T_VARIABLE","$productId",312],")",";",["T_WHITESPACE","\n        ",312],"}",["T_WHITESPACE"," ",313],["T_ELSE","else",313],["T_WHITESPACE"," ",313],["T_IF","if",313],["T_WHITESPACE"," ",313],"(","!",["T_EMPTY","empty",313],"(",["T_VARIABLE","$data",313],"[",["T_CONSTANT_ENCAPSED_STRING","'catalog_product_flat_product_ids'",313],"]",")",")",["T_WHITESPACE"," ",313],"{",["T_WHITESPACE","\n            ",313],["T_COMMENT","\/\/ catalog_product mass_action\n",314],["T_WHITESPACE","            ",315],["T_VARIABLE","$productIds",315],["T_WHITESPACE"," ",315],"=",["T_WHITESPACE"," ",315],["T_VARIABLE","$data",315],"[",["T_CONSTANT_ENCAPSED_STRING","'catalog_product_flat_product_ids'",315],"]",";",["T_WHITESPACE","\n\n            ",315],["T_IF","if",317],["T_WHITESPACE"," ",317],"(","!",["T_EMPTY","empty",317],"(",["T_VARIABLE","$data",317],"[",["T_CONSTANT_ENCAPSED_STRING","'catalog_product_flat_website_ids'",317],"]",")",")",["T_WHITESPACE"," ",317],"{",["T_WHITESPACE","\n                ",317],["T_VARIABLE","$websiteIds",318],["T_WHITESPACE"," ",318],"=",["T_WHITESPACE"," ",318],["T_VARIABLE","$data",318],"[",["T_CONSTANT_ENCAPSED_STRING","'catalog_product_flat_website_ids'",318],"]",";",["T_WHITESPACE","\n                ",318],["T_FOREACH","foreach",319],["T_WHITESPACE"," ",319],"(",["T_VARIABLE","$websiteIds",319],["T_WHITESPACE"," ",319],["T_AS","as",319],["T_WHITESPACE"," ",319],["T_VARIABLE","$websiteId",319],")",["T_WHITESPACE"," ",319],"{",["T_WHITESPACE","\n                    ",319],["T_VARIABLE","$website",320],["T_WHITESPACE"," ",320],"=",["T_WHITESPACE"," ",320],["T_STRING","Mage",320],["T_DOUBLE_COLON","::",320],["T_STRING","app",320],"(",")",["T_OBJECT_OPERATOR","->",320],["T_STRING","getWebsite",320],"(",["T_VARIABLE","$websiteId",320],")",";",["T_WHITESPACE","\n                    ",320],["T_FOREACH","foreach",321],["T_WHITESPACE"," ",321],"(",["T_VARIABLE","$website",321],["T_OBJECT_OPERATOR","->",321],["T_STRING","getStores",321],"(",")",["T_WHITESPACE"," ",321],["T_AS","as",321],["T_WHITESPACE"," ",321],["T_VARIABLE","$store",321],")",["T_WHITESPACE"," ",321],"{",["T_WHITESPACE","\n                        ",321],["T_IF","if",322],["T_WHITESPACE"," ",322],"(",["T_VARIABLE","$data",322],"[",["T_CONSTANT_ENCAPSED_STRING","'catalog_product_flat_action_type'",322],"]",["T_WHITESPACE"," ",322],["T_IS_EQUAL","==",322],["T_WHITESPACE"," ",322],["T_CONSTANT_ENCAPSED_STRING","'remove'",322],")",["T_WHITESPACE"," ",322],"{",["T_WHITESPACE","\n                            ",322],["T_VARIABLE","$this",323],["T_OBJECT_OPERATOR","->",323],["T_STRING","_getIndexer",323],"(",")",["T_OBJECT_OPERATOR","->",323],["T_STRING","removeProduct",323],"(",["T_VARIABLE","$productIds",323],",",["T_WHITESPACE"," ",323],["T_VARIABLE","$store",323],["T_OBJECT_OPERATOR","->",323],["T_STRING","getId",323],"(",")",")",";",["T_WHITESPACE","\n                        ",323],"}",["T_WHITESPACE"," ",324],["T_ELSE","else",324],["T_WHITESPACE"," ",324],"{",["T_WHITESPACE","\n                            ",324],["T_VARIABLE","$this",325],["T_OBJECT_OPERATOR","->",325],["T_STRING","_getIndexer",325],"(",")",["T_OBJECT_OPERATOR","->",325],["T_STRING","updateProduct",325],"(",["T_VARIABLE","$productIds",325],",",["T_WHITESPACE"," ",325],["T_VARIABLE","$store",325],["T_OBJECT_OPERATOR","->",325],["T_STRING","getId",325],"(",")",")",";",["T_WHITESPACE","\n                        ",325],"}",["T_WHITESPACE","\n                    ",326],"}",["T_WHITESPACE","\n                ",327],"}",["T_WHITESPACE","\n            ",328],"}",["T_WHITESPACE","\n\n            ",329],["T_IF","if",331],["T_WHITESPACE"," ",331],"(",["T_ISSET","isset",331],"(",["T_VARIABLE","$data",331],"[",["T_CONSTANT_ENCAPSED_STRING","'catalog_product_flat_status'",331],"]",")",")",["T_WHITESPACE"," ",331],"{",["T_WHITESPACE","\n                ",331],["T_VARIABLE","$status",332],["T_WHITESPACE"," ",332],"=",["T_WHITESPACE"," ",332],["T_VARIABLE","$data",332],"[",["T_CONSTANT_ENCAPSED_STRING","'catalog_product_flat_status'",332],"]",";",["T_WHITESPACE","\n                ",332],["T_VARIABLE","$this",333],["T_OBJECT_OPERATOR","->",333],["T_STRING","_getIndexer",333],"(",")",["T_OBJECT_OPERATOR","->",333],["T_STRING","updateProductStatus",333],"(",["T_VARIABLE","$productIds",333],",",["T_WHITESPACE"," ",333],["T_VARIABLE","$status",333],")",";",["T_WHITESPACE","\n            ",333],"}",["T_WHITESPACE","\n\n            ",334],["T_IF","if",336],["T_WHITESPACE"," ",336],"(",["T_ISSET","isset",336],"(",["T_VARIABLE","$data",336],"[",["T_CONSTANT_ENCAPSED_STRING","'catalog_product_flat_force_update'",336],"]",")",")",["T_WHITESPACE"," ",336],"{",["T_WHITESPACE","\n                ",336],["T_VARIABLE","$this",337],["T_OBJECT_OPERATOR","->",337],["T_STRING","_getIndexer",337],"(",")",["T_OBJECT_OPERATOR","->",337],["T_STRING","updateProduct",337],"(",["T_VARIABLE","$productIds",337],")",";",["T_WHITESPACE","\n            ",337],"}",["T_WHITESPACE","\n        ",338],"}",["T_WHITESPACE"," ",339],["T_ELSE","else",339],["T_WHITESPACE"," ",339],["T_IF","if",339],["T_WHITESPACE"," ",339],"(","!",["T_EMPTY","empty",339],"(",["T_VARIABLE","$data",339],"[",["T_CONSTANT_ENCAPSED_STRING","'catalog_product_flat_delete_store_id'",339],"]",")",")",["T_WHITESPACE"," ",339],"{",["T_WHITESPACE","\n            ",339],["T_VARIABLE","$this",340],["T_OBJECT_OPERATOR","->",340],["T_STRING","_getIndexer",340],"(",")",["T_OBJECT_OPERATOR","->",340],["T_STRING","deleteStore",340],"(",["T_VARIABLE","$data",340],"[",["T_CONSTANT_ENCAPSED_STRING","'catalog_product_flat_delete_store_id'",340],"]",")",";",["T_WHITESPACE","\n        ",340],"}",["T_WHITESPACE","\n    ",341],"}",["T_WHITESPACE","\n\n    ",342],["T_DOC_COMMENT","\/**\n     * Rebuild all index data\n     *\n     *\/",344],["T_WHITESPACE","\n    ",347],["T_PUBLIC","public",348],["T_WHITESPACE"," ",348],["T_FUNCTION","function",348],["T_WHITESPACE"," ",348],["T_STRING","reindexAll",348],"(",")",["T_WHITESPACE","\n    ",348],"{",["T_WHITESPACE","\n        ",349],["T_VARIABLE","$this",350],["T_OBJECT_OPERATOR","->",350],["T_STRING","_getIndexer",350],"(",")",["T_OBJECT_OPERATOR","->",350],["T_STRING","reindexAll",350],"(",")",";",["T_WHITESPACE","\n    ",350],"}",["T_WHITESPACE","\n\n    ",351],["T_DOC_COMMENT","\/**\n     * Retrieve list of attribute codes, that are used in flat\n     *\n     * @return array\n     *\/",353],["T_WHITESPACE","\n    ",357],["T_PROTECTED","protected",358],["T_WHITESPACE"," ",358],["T_FUNCTION","function",358],["T_WHITESPACE"," ",358],["T_STRING","_getFlatAttributes",358],"(",")",["T_WHITESPACE","\n    ",358],"{",["T_WHITESPACE","\n        ",359],["T_RETURN","return",360],["T_WHITESPACE"," ",360],["T_STRING","Mage",360],["T_DOUBLE_COLON","::",360],["T_STRING","getModel",360],"(",["T_CONSTANT_ENCAPSED_STRING","'catalog\/product_flat_indexer'",360],")",["T_OBJECT_OPERATOR","->",360],["T_STRING","getAttributeCodes",360],"(",")",";",["T_WHITESPACE","\n    ",360],"}",["T_WHITESPACE","\n",361],"}",["T_WHITESPACE","\n",362]]
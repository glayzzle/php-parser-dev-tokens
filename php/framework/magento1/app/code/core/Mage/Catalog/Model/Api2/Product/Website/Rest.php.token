[["T_OPEN_TAG","<?php\n",1],["T_DOC_COMMENT","\/**\n * Magento\n *\n * NOTICE OF LICENSE\n *\n * This source file is subject to the Open Software License (OSL 3.0)\n * that is bundled with this package in the file LICENSE.txt.\n * It is also available through the world-wide-web at this URL:\n * http:\/\/opensource.org\/licenses\/osl-3.0.php\n * If you did not receive a copy of the license and are unable to\n * obtain it through the world-wide-web, please send an email\n * to license@magento.com so we can send you a copy immediately.\n *\n * DISCLAIMER\n *\n * Do not edit or add to this file if you wish to upgrade Magento to newer\n * versions in the future. If you wish to customize Magento for your\n * needs please refer to http:\/\/www.magento.com for more information.\n *\n * @category    Mage\n * @package     Mage_Catalog\n * @copyright  Copyright (c) 2006-2016 X.commerce, Inc. and affiliates (http:\/\/www.magento.com)\n * @license    http:\/\/opensource.org\/licenses\/osl-3.0.php  Open Software License (OSL 3.0)\n *\/",2],["T_WHITESPACE","\n\n",25],["T_DOC_COMMENT","\/**\n * Abstract API2 class for product website resource\n *\n * @category   Mage\n * @package    Mage_Catalog\n * @author     Magento Core Team <core@magentocommerce.com>\n *\/",27],["T_WHITESPACE","\n",33],["T_ABSTRACT","abstract",34],["T_WHITESPACE"," ",34],["T_CLASS","class",34],["T_WHITESPACE"," ",34],["T_STRING","Mage_Catalog_Model_Api2_Product_Website_Rest",34],["T_WHITESPACE"," ",34],["T_EXTENDS","extends",34],["T_WHITESPACE"," ",34],["T_STRING","Mage_Catalog_Model_Api2_Product_Website",34],["T_WHITESPACE","\n",34],"{",["T_WHITESPACE","\n    ",35],["T_DOC_COMMENT","\/**\n     * Product website retrieve is not available\n     *\/",36],["T_WHITESPACE","\n    ",38],["T_PROTECTED","protected",39],["T_WHITESPACE"," ",39],["T_FUNCTION","function",39],["T_WHITESPACE"," ",39],["T_STRING","_retrieve",39],"(",")",["T_WHITESPACE","\n    ",39],"{",["T_WHITESPACE","\n        ",40],["T_VARIABLE","$this",41],["T_OBJECT_OPERATOR","->",41],["T_STRING","_critical",41],"(",["T_STRING","self",41],["T_DOUBLE_COLON","::",41],["T_STRING","RESOURCE_METHOD_NOT_ALLOWED",41],")",";",["T_WHITESPACE","\n    ",41],"}",["T_WHITESPACE","\n\n    ",42],["T_DOC_COMMENT","\/**\n     * Get product websites list\n     *\n     * @return array\n     *\/",44],["T_WHITESPACE","\n    ",48],["T_PROTECTED","protected",49],["T_WHITESPACE"," ",49],["T_FUNCTION","function",49],["T_WHITESPACE"," ",49],["T_STRING","_retrieveCollection",49],"(",")",["T_WHITESPACE","\n    ",49],"{",["T_WHITESPACE","\n        ",50],["T_VARIABLE","$return",51],["T_WHITESPACE"," ",51],"=",["T_WHITESPACE"," ",51],["T_ARRAY","array",51],"(",")",";",["T_WHITESPACE","\n        ",51],["T_FOREACH","foreach",52],["T_WHITESPACE"," ",52],"(",["T_VARIABLE","$this",52],["T_OBJECT_OPERATOR","->",52],["T_STRING","_loadProductById",52],"(",["T_VARIABLE","$this",52],["T_OBJECT_OPERATOR","->",52],["T_STRING","getRequest",52],"(",")",["T_OBJECT_OPERATOR","->",52],["T_STRING","getParam",52],"(",["T_CONSTANT_ENCAPSED_STRING","'product_id'",52],")",")",["T_OBJECT_OPERATOR","->",52],["T_STRING","getWebsiteIds",52],"(",")",["T_WHITESPACE"," ",52],["T_AS","as",52],["T_WHITESPACE"," ",52],["T_VARIABLE","$websiteId",52],")",["T_WHITESPACE"," ",52],"{",["T_WHITESPACE","\n            ",52],["T_VARIABLE","$return",53],"[","]",["T_WHITESPACE"," ",53],"=",["T_WHITESPACE"," ",53],["T_ARRAY","array",53],"(",["T_CONSTANT_ENCAPSED_STRING","'website_id'",53],["T_WHITESPACE"," ",53],["T_DOUBLE_ARROW","=>",53],["T_WHITESPACE"," ",53],["T_VARIABLE","$websiteId",53],")",";",["T_WHITESPACE","\n        ",53],"}",["T_WHITESPACE","\n        ",54],["T_RETURN","return",55],["T_WHITESPACE"," ",55],["T_VARIABLE","$return",55],";",["T_WHITESPACE","\n    ",55],"}",["T_WHITESPACE","\n\n    ",56],["T_DOC_COMMENT","\/**\n     * Product website assign\n     *\n     * @param array $data\n     * @return string\n     *\/",58],["T_WHITESPACE","\n    ",63],["T_PROTECTED","protected",64],["T_WHITESPACE"," ",64],["T_FUNCTION","function",64],["T_WHITESPACE"," ",64],["T_STRING","_create",64],"(",["T_ARRAY","array",64],["T_WHITESPACE"," ",64],["T_VARIABLE","$data",64],")",["T_WHITESPACE","\n    ",64],"{",["T_WHITESPACE","\n        ",65],["T_COMMENT","\/* @var $product Mage_Catalog_Model_Product *\/",66],["T_WHITESPACE","\n        ",66],["T_VARIABLE","$product",67],["T_WHITESPACE"," ",67],"=",["T_WHITESPACE"," ",67],["T_VARIABLE","$this",67],["T_OBJECT_OPERATOR","->",67],["T_STRING","_loadProductById",67],"(",["T_VARIABLE","$this",67],["T_OBJECT_OPERATOR","->",67],["T_STRING","getRequest",67],"(",")",["T_OBJECT_OPERATOR","->",67],["T_STRING","getParam",67],"(",["T_CONSTANT_ENCAPSED_STRING","'product_id'",67],")",")",";",["T_WHITESPACE","\n\n        ",67],["T_COMMENT","\/* @var $validator Mage_Catalog_Model_Api2_Product_Website_Validator_Admin_Website *\/",69],["T_WHITESPACE","\n        ",69],["T_VARIABLE","$validator",70],["T_WHITESPACE"," ",70],"=",["T_WHITESPACE"," ",70],["T_STRING","Mage",70],["T_DOUBLE_COLON","::",70],["T_STRING","getModel",70],"(",["T_CONSTANT_ENCAPSED_STRING","'catalog\/api2_product_website_validator_admin_website'",70],")",";",["T_WHITESPACE","\n        ",70],["T_IF","if",71],["T_WHITESPACE"," ",71],"(","!",["T_VARIABLE","$validator",71],["T_OBJECT_OPERATOR","->",71],["T_STRING","isValidDataForWebsiteAssignmentToProduct",71],"(",["T_VARIABLE","$product",71],",",["T_WHITESPACE"," ",71],["T_VARIABLE","$data",71],")",")",["T_WHITESPACE"," ",71],"{",["T_WHITESPACE","\n            ",71],["T_FOREACH","foreach",72],["T_WHITESPACE"," ",72],"(",["T_VARIABLE","$validator",72],["T_OBJECT_OPERATOR","->",72],["T_STRING","getErrors",72],"(",")",["T_WHITESPACE"," ",72],["T_AS","as",72],["T_WHITESPACE"," ",72],["T_VARIABLE","$error",72],")",["T_WHITESPACE"," ",72],"{",["T_WHITESPACE","\n                ",72],["T_VARIABLE","$this",73],["T_OBJECT_OPERATOR","->",73],["T_STRING","_error",73],"(",["T_VARIABLE","$error",73],",",["T_WHITESPACE"," ",73],["T_STRING","Mage_Api2_Model_Server",73],["T_DOUBLE_COLON","::",73],["T_STRING","HTTP_BAD_REQUEST",73],")",";",["T_WHITESPACE","\n            ",73],"}",["T_WHITESPACE","\n            ",74],["T_VARIABLE","$this",75],["T_OBJECT_OPERATOR","->",75],["T_STRING","_critical",75],"(",["T_STRING","self",75],["T_DOUBLE_COLON","::",75],["T_STRING","RESOURCE_DATA_PRE_VALIDATION_ERROR",75],")",";",["T_WHITESPACE","\n        ",75],"}",["T_WHITESPACE","\n\n        ",76],["T_VARIABLE","$websiteIds",78],["T_WHITESPACE"," ",78],"=",["T_WHITESPACE"," ",78],["T_VARIABLE","$product",78],["T_OBJECT_OPERATOR","->",78],["T_STRING","getWebsiteIds",78],"(",")",";",["T_WHITESPACE","\n        ",78],["T_COMMENT","\/* @var $website Mage_Core_Model_Website *\/",79],["T_WHITESPACE","\n        ",79],["T_VARIABLE","$website",80],["T_WHITESPACE"," ",80],"=",["T_WHITESPACE"," ",80],["T_STRING","Mage",80],["T_DOUBLE_COLON","::",80],["T_STRING","getModel",80],"(",["T_CONSTANT_ENCAPSED_STRING","'core\/website'",80],")",["T_OBJECT_OPERATOR","->",80],["T_STRING","load",80],"(",["T_VARIABLE","$data",80],"[",["T_CONSTANT_ENCAPSED_STRING","'website_id'",80],"]",")",";",["T_WHITESPACE","\n        ",80],["T_VARIABLE","$websiteIds",81],"[","]",["T_WHITESPACE"," ",81],"=",["T_WHITESPACE"," ",81],["T_VARIABLE","$website",81],["T_OBJECT_OPERATOR","->",81],["T_STRING","getId",81],"(",")",";",["T_WHITESPACE"," ",81],["T_COMMENT","\/\/ Existence of a website is checked in the validator\n",81],["T_WHITESPACE","        ",82],["T_VARIABLE","$product",82],["T_OBJECT_OPERATOR","->",82],["T_STRING","setWebsiteIds",82],"(",["T_VARIABLE","$websiteIds",82],")",";",["T_WHITESPACE","\n\n        ",82],["T_TRY","try",84],"{",["T_WHITESPACE","\n            ",84],["T_VARIABLE","$product",85],["T_OBJECT_OPERATOR","->",85],["T_STRING","save",85],"(",")",";",["T_WHITESPACE","\n\n            ",85],["T_DOC_COMMENT","\/**\n             * Do copying data to stores\n             *\/",87],["T_WHITESPACE","\n            ",89],["T_IF","if",90],["T_WHITESPACE"," ",90],"(",["T_ISSET","isset",90],"(",["T_VARIABLE","$data",90],"[",["T_CONSTANT_ENCAPSED_STRING","'copy_to_stores'",90],"]",")",")",["T_WHITESPACE"," ",90],"{",["T_WHITESPACE","\n                ",90],["T_FOREACH","foreach",91],["T_WHITESPACE"," ",91],"(",["T_VARIABLE","$data",91],"[",["T_CONSTANT_ENCAPSED_STRING","'copy_to_stores'",91],"]",["T_WHITESPACE"," ",91],["T_AS","as",91],["T_WHITESPACE"," ",91],["T_VARIABLE","$storeData",91],")",["T_WHITESPACE"," ",91],"{",["T_WHITESPACE","\n                    ",91],["T_STRING","Mage",92],["T_DOUBLE_COLON","::",92],["T_STRING","getModel",92],"(",["T_CONSTANT_ENCAPSED_STRING","'catalog\/product'",92],")",["T_WHITESPACE","\n                        ",92],["T_OBJECT_OPERATOR","->",93],["T_STRING","setStoreId",93],"(",["T_VARIABLE","$storeData",93],"[",["T_CONSTANT_ENCAPSED_STRING","'store_from'",93],"]",")",["T_WHITESPACE","\n                        ",93],["T_OBJECT_OPERATOR","->",94],["T_STRING","load",94],"(",["T_VARIABLE","$product",94],["T_OBJECT_OPERATOR","->",94],["T_STRING","getId",94],"(",")",")",["T_WHITESPACE","\n                        ",94],["T_OBJECT_OPERATOR","->",95],["T_STRING","setStoreId",95],"(",["T_VARIABLE","$storeData",95],"[",["T_CONSTANT_ENCAPSED_STRING","'store_to'",95],"]",")",["T_WHITESPACE","\n                        ",95],["T_OBJECT_OPERATOR","->",96],["T_STRING","save",96],"(",")",";",["T_WHITESPACE","\n                ",96],"}",["T_WHITESPACE","\n            ",97],"}",["T_WHITESPACE","\n\n        ",98],"}",["T_WHITESPACE"," ",100],["T_CATCH","catch",100],["T_WHITESPACE"," ",100],"(",["T_STRING","Mage_Core_Exception",100],["T_WHITESPACE"," ",100],["T_VARIABLE","$e",100],")",["T_WHITESPACE"," ",100],"{",["T_WHITESPACE","\n            ",100],["T_VARIABLE","$this",101],["T_OBJECT_OPERATOR","->",101],["T_STRING","_critical",101],"(",["T_VARIABLE","$e",101],["T_OBJECT_OPERATOR","->",101],["T_STRING","getMessage",101],"(",")",",",["T_WHITESPACE"," ",101],["T_STRING","Mage_Api2_Model_Server",101],["T_DOUBLE_COLON","::",101],["T_STRING","HTTP_INTERNAL_ERROR",101],")",";",["T_WHITESPACE","\n        ",101],"}",["T_WHITESPACE"," ",102],["T_CATCH","catch",102],["T_WHITESPACE"," ",102],"(",["T_STRING","Exception",102],["T_WHITESPACE"," ",102],["T_VARIABLE","$e",102],")",["T_WHITESPACE"," ",102],"{",["T_WHITESPACE","\n            ",102],["T_VARIABLE","$this",103],["T_OBJECT_OPERATOR","->",103],["T_STRING","_critical",103],"(",["T_STRING","self",103],["T_DOUBLE_COLON","::",103],["T_STRING","RESOURCE_INTERNAL_ERROR",103],")",";",["T_WHITESPACE","\n        ",103],"}",["T_WHITESPACE","\n\n        ",104],["T_RETURN","return",106],["T_WHITESPACE"," ",106],["T_VARIABLE","$this",106],["T_OBJECT_OPERATOR","->",106],["T_STRING","_getLocation",106],"(",["T_VARIABLE","$website",106],",",["T_WHITESPACE"," ",106],["T_VARIABLE","$product",106],")",";",["T_WHITESPACE","\n    ",106],"}",["T_WHITESPACE","\n\n    ",107],["T_DOC_COMMENT","\/**\n     * Product website assign\n     *\n     * @param array $data\n     * @return string\n     *\/",109],["T_WHITESPACE","\n    ",114],["T_PROTECTED","protected",115],["T_WHITESPACE"," ",115],["T_FUNCTION","function",115],["T_WHITESPACE"," ",115],["T_STRING","_multiCreate",115],"(",["T_ARRAY","array",115],["T_WHITESPACE"," ",115],["T_VARIABLE","$data",115],")",["T_WHITESPACE","\n    ",115],"{",["T_WHITESPACE","\n        ",116],["T_COMMENT","\/* @var $product Mage_Catalog_Model_Product *\/",117],["T_WHITESPACE","\n        ",117],["T_VARIABLE","$product",118],["T_WHITESPACE"," ",118],"=",["T_WHITESPACE"," ",118],["T_VARIABLE","$this",118],["T_OBJECT_OPERATOR","->",118],["T_STRING","_loadProductById",118],"(",["T_VARIABLE","$this",118],["T_OBJECT_OPERATOR","->",118],["T_STRING","getRequest",118],"(",")",["T_OBJECT_OPERATOR","->",118],["T_STRING","getParam",118],"(",["T_CONSTANT_ENCAPSED_STRING","'product_id'",118],")",")",";",["T_WHITESPACE","\n        ",118],["T_VARIABLE","$websiteIds",119],["T_WHITESPACE"," ",119],"=",["T_WHITESPACE"," ",119],["T_VARIABLE","$product",119],["T_OBJECT_OPERATOR","->",119],["T_STRING","getWebsiteIds",119],"(",")",";",["T_WHITESPACE","\n        ",119],["T_FOREACH","foreach",120],["T_WHITESPACE"," ",120],"(",["T_VARIABLE","$data",120],["T_WHITESPACE"," ",120],["T_AS","as",120],["T_WHITESPACE"," ",120],["T_VARIABLE","$singleData",120],")",["T_WHITESPACE"," ",120],"{",["T_WHITESPACE","\n            ",120],["T_TRY","try",121],["T_WHITESPACE"," ",121],"{",["T_WHITESPACE","\n                ",121],["T_IF","if",122],["T_WHITESPACE"," ",122],"(","!",["T_STRING","is_array",122],"(",["T_VARIABLE","$singleData",122],")",")",["T_WHITESPACE"," ",122],"{",["T_WHITESPACE","\n                    ",122],["T_VARIABLE","$this",123],["T_OBJECT_OPERATOR","->",123],["T_STRING","_errorMessage",123],"(",["T_STRING","self",123],["T_DOUBLE_COLON","::",123],["T_STRING","RESOURCE_DATA_INVALID",123],",",["T_WHITESPACE"," ",123],["T_STRING","Mage_Api2_Model_Server",123],["T_DOUBLE_COLON","::",123],["T_STRING","HTTP_BAD_REQUEST",123],")",";",["T_WHITESPACE","\n                    ",123],["T_VARIABLE","$this",124],["T_OBJECT_OPERATOR","->",124],["T_STRING","_critical",124],"(",["T_STRING","self",124],["T_DOUBLE_COLON","::",124],["T_STRING","RESOURCE_DATA_PRE_VALIDATION_ERROR",124],")",";",["T_WHITESPACE","\n                ",124],"}",["T_WHITESPACE","\n                ",125],["T_COMMENT","\/* @var $validator Mage_Catalog_Model_Api2_Product_Website_Validator_Admin_Website *\/",126],["T_WHITESPACE","\n                ",126],["T_VARIABLE","$validator",127],["T_WHITESPACE"," ",127],"=",["T_WHITESPACE"," ",127],["T_STRING","Mage",127],["T_DOUBLE_COLON","::",127],["T_STRING","getModel",127],"(",["T_CONSTANT_ENCAPSED_STRING","'catalog\/api2_product_website_validator_admin_website'",127],")",";",["T_WHITESPACE","\n                ",127],["T_IF","if",128],["T_WHITESPACE"," ",128],"(","!",["T_VARIABLE","$validator",128],["T_OBJECT_OPERATOR","->",128],["T_STRING","isValidDataForWebsiteAssignmentToProduct",128],"(",["T_VARIABLE","$product",128],",",["T_WHITESPACE"," ",128],["T_VARIABLE","$singleData",128],")",")",["T_WHITESPACE"," ",128],"{",["T_WHITESPACE","\n                    ",128],["T_FOREACH","foreach",129],["T_WHITESPACE"," ",129],"(",["T_VARIABLE","$validator",129],["T_OBJECT_OPERATOR","->",129],["T_STRING","getErrors",129],"(",")",["T_WHITESPACE"," ",129],["T_AS","as",129],["T_WHITESPACE"," ",129],["T_VARIABLE","$error",129],")",["T_WHITESPACE"," ",129],"{",["T_WHITESPACE","\n                        ",129],["T_VARIABLE","$this",130],["T_OBJECT_OPERATOR","->",130],["T_STRING","_errorMessage",130],"(",["T_VARIABLE","$error",130],",",["T_WHITESPACE"," ",130],["T_STRING","Mage_Api2_Model_Server",130],["T_DOUBLE_COLON","::",130],["T_STRING","HTTP_BAD_REQUEST",130],",",["T_WHITESPACE"," ",130],["T_ARRAY","array",130],"(",["T_WHITESPACE","\n                            ",130],["T_CONSTANT_ENCAPSED_STRING","'website_id'",131],["T_WHITESPACE"," ",131],["T_DOUBLE_ARROW","=>",131],["T_WHITESPACE"," ",131],["T_ISSET","isset",131],"(",["T_VARIABLE","$singleData",131],"[",["T_CONSTANT_ENCAPSED_STRING","'website_id'",131],"]",")",["T_WHITESPACE"," ",131],"?",["T_WHITESPACE"," ",131],["T_VARIABLE","$singleData",131],"[",["T_CONSTANT_ENCAPSED_STRING","'website_id'",131],"]",["T_WHITESPACE"," ",131],":",["T_WHITESPACE"," ",131],["T_STRING","null",131],",",["T_WHITESPACE","\n                            ",131],["T_CONSTANT_ENCAPSED_STRING","'product_id'",132],["T_WHITESPACE"," ",132],["T_DOUBLE_ARROW","=>",132],["T_WHITESPACE"," ",132],["T_VARIABLE","$product",132],["T_OBJECT_OPERATOR","->",132],["T_STRING","getId",132],"(",")",",",["T_WHITESPACE","\n                        ",132],")",")",";",["T_WHITESPACE","\n                    ",133],"}",["T_WHITESPACE","\n                    ",134],["T_VARIABLE","$this",135],["T_OBJECT_OPERATOR","->",135],["T_STRING","_critical",135],"(",["T_STRING","self",135],["T_DOUBLE_COLON","::",135],["T_STRING","RESOURCE_DATA_PRE_VALIDATION_ERROR",135],")",";",["T_WHITESPACE","\n                ",135],"}",["T_WHITESPACE","\n\n                ",136],["T_COMMENT","\/* @var $website Mage_Core_Model_Website *\/",138],["T_WHITESPACE","\n                ",138],["T_VARIABLE","$website",139],["T_WHITESPACE"," ",139],"=",["T_WHITESPACE"," ",139],["T_STRING","Mage",139],["T_DOUBLE_COLON","::",139],["T_STRING","getModel",139],"(",["T_CONSTANT_ENCAPSED_STRING","'core\/website'",139],")",["T_OBJECT_OPERATOR","->",139],["T_STRING","load",139],"(",["T_VARIABLE","$singleData",139],"[",["T_CONSTANT_ENCAPSED_STRING","'website_id'",139],"]",")",";",["T_WHITESPACE","\n                ",139],["T_VARIABLE","$websiteIds",140],"[","]",["T_WHITESPACE"," ",140],"=",["T_WHITESPACE"," ",140],["T_VARIABLE","$website",140],["T_OBJECT_OPERATOR","->",140],["T_STRING","getId",140],"(",")",";",["T_WHITESPACE"," ",140],["T_COMMENT","\/\/ Existence of a website is checked in the validator\n",140],["T_WHITESPACE","                ",141],["T_VARIABLE","$product",141],["T_OBJECT_OPERATOR","->",141],["T_STRING","setWebsiteIds",141],"(",["T_VARIABLE","$websiteIds",141],")",";",["T_WHITESPACE","\n\n                ",141],["T_VARIABLE","$product",143],["T_OBJECT_OPERATOR","->",143],["T_STRING","save",143],"(",")",";",["T_WHITESPACE","\n\n                ",143],["T_DOC_COMMENT","\/**\n                 * Do copying data to stores\n                 *\/",145],["T_WHITESPACE","\n                ",147],["T_IF","if",148],["T_WHITESPACE"," ",148],"(",["T_ISSET","isset",148],"(",["T_VARIABLE","$singleData",148],"[",["T_CONSTANT_ENCAPSED_STRING","'copy_to_stores'",148],"]",")",")",["T_WHITESPACE"," ",148],"{",["T_WHITESPACE","\n                    ",148],["T_FOREACH","foreach",149],["T_WHITESPACE"," ",149],"(",["T_VARIABLE","$singleData",149],"[",["T_CONSTANT_ENCAPSED_STRING","'copy_to_stores'",149],"]",["T_WHITESPACE"," ",149],["T_AS","as",149],["T_WHITESPACE"," ",149],["T_VARIABLE","$storeData",149],")",["T_WHITESPACE"," ",149],"{",["T_WHITESPACE","\n                        ",149],["T_STRING","Mage",150],["T_DOUBLE_COLON","::",150],["T_STRING","getModel",150],"(",["T_CONSTANT_ENCAPSED_STRING","'catalog\/product'",150],")",["T_WHITESPACE","\n                            ",150],["T_OBJECT_OPERATOR","->",151],["T_STRING","setStoreId",151],"(",["T_VARIABLE","$storeData",151],"[",["T_CONSTANT_ENCAPSED_STRING","'store_from'",151],"]",")",["T_WHITESPACE","\n                            ",151],["T_OBJECT_OPERATOR","->",152],["T_STRING","load",152],"(",["T_VARIABLE","$product",152],["T_OBJECT_OPERATOR","->",152],["T_STRING","getId",152],"(",")",")",["T_WHITESPACE","\n                            ",152],["T_OBJECT_OPERATOR","->",153],["T_STRING","setStoreId",153],"(",["T_VARIABLE","$storeData",153],"[",["T_CONSTANT_ENCAPSED_STRING","'store_to'",153],"]",")",["T_WHITESPACE","\n                            ",153],["T_OBJECT_OPERATOR","->",154],["T_STRING","save",154],"(",")",";",["T_WHITESPACE","\n                    ",154],"}",["T_WHITESPACE","\n                ",155],"}",["T_WHITESPACE","\n\n                ",156],["T_VARIABLE","$this",158],["T_OBJECT_OPERATOR","->",158],["T_STRING","_successMessage",158],"(",["T_WHITESPACE","\n                    ",158],["T_STRING","Mage_Api2_Model_Resource",159],["T_DOUBLE_COLON","::",159],["T_STRING","RESOURCE_UPDATED_SUCCESSFUL",159],",",["T_WHITESPACE","\n                    ",159],["T_STRING","Mage_Api2_Model_Server",160],["T_DOUBLE_COLON","::",160],["T_STRING","HTTP_OK",160],",",["T_WHITESPACE","\n                    ",160],["T_ARRAY","array",161],"(",["T_WHITESPACE","\n                        ",161],["T_CONSTANT_ENCAPSED_STRING","'website_id'",162],["T_WHITESPACE"," ",162],["T_DOUBLE_ARROW","=>",162],["T_WHITESPACE"," ",162],["T_VARIABLE","$website",162],["T_OBJECT_OPERATOR","->",162],["T_STRING","getId",162],"(",")",",",["T_WHITESPACE","\n                        ",162],["T_CONSTANT_ENCAPSED_STRING","'product_id'",163],["T_WHITESPACE"," ",163],["T_DOUBLE_ARROW","=>",163],["T_WHITESPACE"," ",163],["T_VARIABLE","$product",163],["T_OBJECT_OPERATOR","->",163],["T_STRING","getId",163],"(",")",",",["T_WHITESPACE","\n                    ",163],")",["T_WHITESPACE","\n                ",164],")",";",["T_WHITESPACE","\n            ",165],"}",["T_WHITESPACE"," ",166],["T_CATCH","catch",166],["T_WHITESPACE"," ",166],"(",["T_STRING","Mage_Api2_Exception",166],["T_WHITESPACE"," ",166],["T_VARIABLE","$e",166],")",["T_WHITESPACE"," ",166],"{",["T_WHITESPACE","\n                ",166],["T_COMMENT","\/\/ pre-validation errors are already added\n",167],["T_WHITESPACE","                ",168],["T_IF","if",168],["T_WHITESPACE"," ",168],"(",["T_VARIABLE","$e",168],["T_OBJECT_OPERATOR","->",168],["T_STRING","getMessage",168],"(",")",["T_WHITESPACE"," ",168],["T_IS_NOT_EQUAL","!=",168],["T_WHITESPACE"," ",168],["T_STRING","self",168],["T_DOUBLE_COLON","::",168],["T_STRING","RESOURCE_DATA_PRE_VALIDATION_ERROR",168],")",["T_WHITESPACE"," ",168],"{",["T_WHITESPACE","\n                    ",168],["T_VARIABLE","$this",169],["T_OBJECT_OPERATOR","->",169],["T_STRING","_errorMessage",169],"(",["T_WHITESPACE","\n                        ",169],["T_VARIABLE","$e",170],["T_OBJECT_OPERATOR","->",170],["T_STRING","getMessage",170],"(",")",",",["T_WHITESPACE","\n                        ",170],["T_VARIABLE","$e",171],["T_OBJECT_OPERATOR","->",171],["T_STRING","getCode",171],"(",")",",",["T_WHITESPACE","\n                        ",171],["T_ARRAY","array",172],"(",["T_WHITESPACE","\n                            ",172],["T_CONSTANT_ENCAPSED_STRING","'website_id'",173],["T_WHITESPACE"," ",173],["T_DOUBLE_ARROW","=>",173],["T_WHITESPACE"," ",173],["T_ISSET","isset",173],"(",["T_VARIABLE","$singleData",173],"[",["T_CONSTANT_ENCAPSED_STRING","'website_id'",173],"]",")",["T_WHITESPACE"," ",173],"?",["T_WHITESPACE"," ",173],["T_VARIABLE","$singleData",173],"[",["T_CONSTANT_ENCAPSED_STRING","'website_id'",173],"]",["T_WHITESPACE"," ",173],":",["T_WHITESPACE"," ",173],["T_STRING","null",173],",",["T_WHITESPACE","\n                            ",173],["T_CONSTANT_ENCAPSED_STRING","'product_id'",174],["T_WHITESPACE"," ",174],["T_DOUBLE_ARROW","=>",174],["T_WHITESPACE"," ",174],["T_VARIABLE","$product",174],["T_OBJECT_OPERATOR","->",174],["T_STRING","getId",174],"(",")",",",["T_WHITESPACE","\n                        ",174],")",["T_WHITESPACE","\n                    ",175],")",";",["T_WHITESPACE","\n                ",176],"}",["T_WHITESPACE","\n            ",177],"}",["T_WHITESPACE"," ",178],["T_CATCH","catch",178],["T_WHITESPACE"," ",178],"(",["T_STRING","Exception",178],["T_WHITESPACE"," ",178],["T_VARIABLE","$e",178],")",["T_WHITESPACE"," ",178],"{",["T_WHITESPACE","\n                ",178],["T_VARIABLE","$this",179],["T_OBJECT_OPERATOR","->",179],["T_STRING","_errorMessage",179],"(",["T_WHITESPACE","\n                    ",179],["T_STRING","Mage_Api2_Model_Resource",180],["T_DOUBLE_COLON","::",180],["T_STRING","RESOURCE_INTERNAL_ERROR",180],",",["T_WHITESPACE","\n                    ",180],["T_STRING","Mage_Api2_Model_Server",181],["T_DOUBLE_COLON","::",181],["T_STRING","HTTP_INTERNAL_ERROR",181],",",["T_WHITESPACE","\n                    ",181],["T_ARRAY","array",182],"(",["T_WHITESPACE","\n                        ",182],["T_CONSTANT_ENCAPSED_STRING","'website_id'",183],["T_WHITESPACE"," ",183],["T_DOUBLE_ARROW","=>",183],["T_WHITESPACE"," ",183],["T_ISSET","isset",183],"(",["T_VARIABLE","$singleData",183],"[",["T_CONSTANT_ENCAPSED_STRING","'website_id'",183],"]",")",["T_WHITESPACE"," ",183],"?",["T_WHITESPACE"," ",183],["T_VARIABLE","$singleData",183],"[",["T_CONSTANT_ENCAPSED_STRING","'website_id'",183],"]",["T_WHITESPACE"," ",183],":",["T_WHITESPACE"," ",183],["T_STRING","null",183],",",["T_WHITESPACE","\n                        ",183],["T_CONSTANT_ENCAPSED_STRING","'product_id'",184],["T_WHITESPACE"," ",184],["T_DOUBLE_ARROW","=>",184],["T_WHITESPACE"," ",184],["T_VARIABLE","$product",184],["T_OBJECT_OPERATOR","->",184],["T_STRING","getId",184],"(",")",",",["T_WHITESPACE","\n                    ",184],")",["T_WHITESPACE","\n                ",185],")",";",["T_WHITESPACE","\n            ",186],"}",["T_WHITESPACE","\n        ",187],"}",["T_WHITESPACE","\n    ",188],"}",["T_WHITESPACE","\n\n    ",189],["T_DOC_COMMENT","\/**\n     * Product websites update is not available\n     *\n     * @param array $data\n     *\/",191],["T_WHITESPACE","\n    ",195],["T_PROTECTED","protected",196],["T_WHITESPACE"," ",196],["T_FUNCTION","function",196],["T_WHITESPACE"," ",196],["T_STRING","_update",196],"(",["T_ARRAY","array",196],["T_WHITESPACE"," ",196],["T_VARIABLE","$data",196],")",["T_WHITESPACE","\n    ",196],"{",["T_WHITESPACE","\n        ",197],["T_VARIABLE","$this",198],["T_OBJECT_OPERATOR","->",198],["T_STRING","_critical",198],"(",["T_STRING","self",198],["T_DOUBLE_COLON","::",198],["T_STRING","RESOURCE_METHOD_NOT_ALLOWED",198],")",";",["T_WHITESPACE","\n    ",198],"}",["T_WHITESPACE","\n\n    ",199],["T_DOC_COMMENT","\/**\n     * Product website unassign\n     *\/",201],["T_WHITESPACE","\n    ",203],["T_PROTECTED","protected",204],["T_WHITESPACE"," ",204],["T_FUNCTION","function",204],["T_WHITESPACE"," ",204],["T_STRING","_delete",204],"(",")",["T_WHITESPACE","\n    ",204],"{",["T_WHITESPACE","\n        ",205],["T_COMMENT","\/* @var $product Mage_Catalog_Model_Product *\/",206],["T_WHITESPACE","\n        ",206],["T_VARIABLE","$product",207],["T_WHITESPACE"," ",207],"=",["T_WHITESPACE"," ",207],["T_VARIABLE","$this",207],["T_OBJECT_OPERATOR","->",207],["T_STRING","_loadProductById",207],"(",["T_VARIABLE","$this",207],["T_OBJECT_OPERATOR","->",207],["T_STRING","getRequest",207],"(",")",["T_OBJECT_OPERATOR","->",207],["T_STRING","getParam",207],"(",["T_CONSTANT_ENCAPSED_STRING","'product_id'",207],")",")",";",["T_WHITESPACE","\n\n        ",207],["T_COMMENT","\/* @var $website Mage_Core_Model_Website *\/",209],["T_WHITESPACE","\n        ",209],["T_VARIABLE","$website",210],["T_WHITESPACE"," ",210],"=",["T_WHITESPACE"," ",210],["T_VARIABLE","$this",210],["T_OBJECT_OPERATOR","->",210],["T_STRING","_loadWebsiteById",210],"(",["T_VARIABLE","$this",210],["T_OBJECT_OPERATOR","->",210],["T_STRING","getRequest",210],"(",")",["T_OBJECT_OPERATOR","->",210],["T_STRING","getParam",210],"(",["T_CONSTANT_ENCAPSED_STRING","'website_id'",210],")",")",";",["T_WHITESPACE","\n\n        ",210],["T_COMMENT","\/* @var $validator Mage_Catalog_Model_Api2_Product_Website_Validator_Admin_Website *\/",212],["T_WHITESPACE","\n        ",212],["T_VARIABLE","$validator",213],["T_WHITESPACE"," ",213],"=",["T_WHITESPACE"," ",213],["T_STRING","Mage",213],["T_DOUBLE_COLON","::",213],["T_STRING","getModel",213],"(",["T_CONSTANT_ENCAPSED_STRING","'catalog\/api2_product_website_validator_admin_website'",213],")",";",["T_WHITESPACE","\n        ",213],["T_IF","if",214],["T_WHITESPACE"," ",214],"(","!",["T_VARIABLE","$validator",214],["T_OBJECT_OPERATOR","->",214],["T_STRING","isWebsiteAssignedToProduct",214],"(",["T_VARIABLE","$website",214],",",["T_WHITESPACE"," ",214],["T_VARIABLE","$product",214],")",")",["T_WHITESPACE"," ",214],"{",["T_WHITESPACE","\n            ",214],["T_FOREACH","foreach",215],["T_WHITESPACE"," ",215],"(",["T_VARIABLE","$validator",215],["T_OBJECT_OPERATOR","->",215],["T_STRING","getErrors",215],"(",")",["T_WHITESPACE"," ",215],["T_AS","as",215],["T_WHITESPACE"," ",215],["T_VARIABLE","$error",215],")",["T_WHITESPACE"," ",215],"{",["T_WHITESPACE","\n                ",215],["T_VARIABLE","$this",216],["T_OBJECT_OPERATOR","->",216],["T_STRING","_error",216],"(",["T_VARIABLE","$error",216],",",["T_WHITESPACE"," ",216],["T_STRING","Mage_Api2_Model_Server",216],["T_DOUBLE_COLON","::",216],["T_STRING","HTTP_BAD_REQUEST",216],")",";",["T_WHITESPACE","\n            ",216],"}",["T_WHITESPACE","\n            ",217],["T_VARIABLE","$this",218],["T_OBJECT_OPERATOR","->",218],["T_STRING","_critical",218],"(",["T_STRING","self",218],["T_DOUBLE_COLON","::",218],["T_STRING","RESOURCE_DATA_PRE_VALIDATION_ERROR",218],")",";",["T_WHITESPACE","\n        ",218],"}",["T_WHITESPACE","\n\n        ",219],["T_VARIABLE","$websiteIds",221],["T_WHITESPACE"," ",221],"=",["T_WHITESPACE"," ",221],["T_VARIABLE","$product",221],["T_OBJECT_OPERATOR","->",221],["T_STRING","getWebsiteIds",221],"(",")",";",["T_WHITESPACE","\n        ",221],["T_COMMENT","\/\/ Existence of a key is checked in the validator\n",222],["T_WHITESPACE","        ",223],["T_UNSET","unset",223],"(",["T_VARIABLE","$websiteIds",223],"[",["T_STRING","array_search",223],"(",["T_VARIABLE","$website",223],["T_OBJECT_OPERATOR","->",223],["T_STRING","getId",223],"(",")",",",["T_WHITESPACE"," ",223],["T_VARIABLE","$websiteIds",223],")","]",")",";",["T_WHITESPACE","\n        ",223],["T_VARIABLE","$product",224],["T_OBJECT_OPERATOR","->",224],["T_STRING","setWebsiteIds",224],"(",["T_VARIABLE","$websiteIds",224],")",";",["T_WHITESPACE","\n\n        ",224],["T_TRY","try",226],["T_WHITESPACE"," ",226],"{",["T_WHITESPACE","\n            ",226],["T_VARIABLE","$product",227],["T_OBJECT_OPERATOR","->",227],["T_STRING","save",227],"(",")",";",["T_WHITESPACE","\n        ",227],"}",["T_WHITESPACE"," ",228],["T_CATCH","catch",228],["T_WHITESPACE"," ",228],"(",["T_STRING","Mage_Core_Exception",228],["T_WHITESPACE"," ",228],["T_VARIABLE","$e",228],")",["T_WHITESPACE"," ",228],"{",["T_WHITESPACE","\n            ",228],["T_VARIABLE","$this",229],["T_OBJECT_OPERATOR","->",229],["T_STRING","_critical",229],"(",["T_VARIABLE","$e",229],["T_OBJECT_OPERATOR","->",229],["T_STRING","getMessage",229],"(",")",",",["T_WHITESPACE"," ",229],["T_STRING","Mage_Api2_Model_Server",229],["T_DOUBLE_COLON","::",229],["T_STRING","HTTP_INTERNAL_ERROR",229],")",";",["T_WHITESPACE","\n        ",229],"}",["T_WHITESPACE"," ",230],["T_CATCH","catch",230],["T_WHITESPACE"," ",230],"(",["T_STRING","Exception",230],["T_WHITESPACE"," ",230],["T_VARIABLE","$e",230],")",["T_WHITESPACE"," ",230],"{",["T_WHITESPACE","\n            ",230],["T_VARIABLE","$this",231],["T_OBJECT_OPERATOR","->",231],["T_STRING","_critical",231],"(",["T_STRING","self",231],["T_DOUBLE_COLON","::",231],["T_STRING","RESOURCE_INTERNAL_ERROR",231],")",";",["T_WHITESPACE","\n        ",231],"}",["T_WHITESPACE","\n    ",232],"}",["T_WHITESPACE","\n\n    ",233],["T_DOC_COMMENT","\/**\n     * Get resource location\n     *\n     * @param Mage_Core_Model_Website $website\n     * @return string URL\n     *\/",235],["T_WHITESPACE","\n    ",240],["T_PROTECTED","protected",241],["T_WHITESPACE"," ",241],["T_FUNCTION","function",241],["T_WHITESPACE"," ",241],["T_STRING","_getLocation",241],"(",["T_VARIABLE","$website",241],")",["T_WHITESPACE","\n    ",241],"{",["T_WHITESPACE","\n        ",242],["T_COMMENT","\/* @var $apiTypeRoute Mage_Api2_Model_Route_ApiType *\/",243],["T_WHITESPACE","\n        ",243],["T_VARIABLE","$apiTypeRoute",244],["T_WHITESPACE"," ",244],"=",["T_WHITESPACE"," ",244],["T_STRING","Mage",244],["T_DOUBLE_COLON","::",244],["T_STRING","getModel",244],"(",["T_CONSTANT_ENCAPSED_STRING","'api2\/route_apiType'",244],")",";",["T_WHITESPACE","\n\n        ",244],["T_VARIABLE","$chain",246],["T_WHITESPACE"," ",246],"=",["T_WHITESPACE"," ",246],["T_VARIABLE","$apiTypeRoute",246],["T_OBJECT_OPERATOR","->",246],["T_STRING","chain",246],"(",["T_WHITESPACE","\n            ",246],["T_NEW","new",247],["T_WHITESPACE"," ",247],["T_STRING","Zend_Controller_Router_Route",247],"(",["T_VARIABLE","$this",247],["T_OBJECT_OPERATOR","->",247],["T_STRING","getConfig",247],"(",")",["T_OBJECT_OPERATOR","->",247],["T_STRING","getRouteWithEntityTypeAction",247],"(",["T_VARIABLE","$this",247],["T_OBJECT_OPERATOR","->",247],["T_STRING","getResourceType",247],"(",")",")",")",["T_WHITESPACE","\n        ",247],")",";",["T_WHITESPACE","\n        ",248],["T_VARIABLE","$params",249],["T_WHITESPACE"," ",249],"=",["T_WHITESPACE"," ",249],["T_ARRAY","array",249],"(",["T_WHITESPACE","\n            ",249],["T_CONSTANT_ENCAPSED_STRING","'api_type'",250],["T_WHITESPACE"," ",250],["T_DOUBLE_ARROW","=>",250],["T_WHITESPACE"," ",250],["T_VARIABLE","$this",250],["T_OBJECT_OPERATOR","->",250],["T_STRING","getRequest",250],"(",")",["T_OBJECT_OPERATOR","->",250],["T_STRING","getApiType",250],"(",")",",",["T_WHITESPACE","\n            ",250],["T_CONSTANT_ENCAPSED_STRING","'product_id'",251],["T_WHITESPACE"," ",251],["T_DOUBLE_ARROW","=>",251],["T_WHITESPACE"," ",251],["T_VARIABLE","$this",251],["T_OBJECT_OPERATOR","->",251],["T_STRING","getRequest",251],"(",")",["T_OBJECT_OPERATOR","->",251],["T_STRING","getParam",251],"(",["T_CONSTANT_ENCAPSED_STRING","'product_id'",251],")",",",["T_WHITESPACE","\n            ",251],["T_CONSTANT_ENCAPSED_STRING","'website_id'",252],["T_WHITESPACE"," ",252],["T_DOUBLE_ARROW","=>",252],["T_WHITESPACE"," ",252],["T_VARIABLE","$website",252],["T_OBJECT_OPERATOR","->",252],["T_STRING","getId",252],"(",")",["T_WHITESPACE","\n        ",252],")",";",["T_WHITESPACE","\n        ",253],["T_VARIABLE","$uri",254],["T_WHITESPACE"," ",254],"=",["T_WHITESPACE"," ",254],["T_VARIABLE","$chain",254],["T_OBJECT_OPERATOR","->",254],["T_STRING","assemble",254],"(",["T_VARIABLE","$params",254],")",";",["T_WHITESPACE","\n\n        ",254],["T_RETURN","return",256],["T_WHITESPACE"," ",256],["T_CONSTANT_ENCAPSED_STRING","'\/'",256],["T_WHITESPACE"," ",256],".",["T_WHITESPACE"," ",256],["T_VARIABLE","$uri",256],";",["T_WHITESPACE","\n    ",256],"}",["T_WHITESPACE","\n",257],"}",["T_WHITESPACE","\n",258]]
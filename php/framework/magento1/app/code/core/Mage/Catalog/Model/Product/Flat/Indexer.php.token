[["T_OPEN_TAG","<?php\n",1],["T_DOC_COMMENT","\/**\n * Magento\n *\n * NOTICE OF LICENSE\n *\n * This source file is subject to the Open Software License (OSL 3.0)\n * that is bundled with this package in the file LICENSE.txt.\n * It is also available through the world-wide-web at this URL:\n * http:\/\/opensource.org\/licenses\/osl-3.0.php\n * If you did not receive a copy of the license and are unable to\n * obtain it through the world-wide-web, please send an email\n * to license@magento.com so we can send you a copy immediately.\n *\n * DISCLAIMER\n *\n * Do not edit or add to this file if you wish to upgrade Magento to newer\n * versions in the future. If you wish to customize Magento for your\n * needs please refer to http:\/\/www.magento.com for more information.\n *\n * @category    Mage\n * @package     Mage_Catalog\n * @copyright  Copyright (c) 2006-2016 X.commerce, Inc. and affiliates (http:\/\/www.magento.com)\n * @license    http:\/\/opensource.org\/licenses\/osl-3.0.php  Open Software License (OSL 3.0)\n *\/",2],["T_WHITESPACE","\n\n\n",25],["T_DOC_COMMENT","\/**\n * Catalog Product Flat Indexer Model\n *\n * @method Mage_Catalog_Model_Resource_Product_Flat_Indexer _getResource()\n * @method Mage_Catalog_Model_Resource_Product_Flat_Indexer getResource()\n * @method int getEntityTypeId()\n * @method Mage_Catalog_Model_Product_Flat_Indexer setEntityTypeId(int $value)\n * @method int getAttributeSetId()\n * @method Mage_Catalog_Model_Product_Flat_Indexer setAttributeSetId(int $value)\n * @method string getTypeId()\n * @method Mage_Catalog_Model_Product_Flat_Indexer setTypeId(string $value)\n * @method string getSku()\n * @method Mage_Catalog_Model_Product_Flat_Indexer setSku(string $value)\n * @method int getHasOptions()\n * @method Mage_Catalog_Model_Product_Flat_Indexer setHasOptions(int $value)\n * @method int getRequiredOptions()\n * @method Mage_Catalog_Model_Product_Flat_Indexer setRequiredOptions(int $value)\n * @method string getCreatedAt()\n * @method Mage_Catalog_Model_Product_Flat_Indexer setCreatedAt(string $value)\n * @method string getUpdatedAt()\n * @method Mage_Catalog_Model_Product_Flat_Indexer setUpdatedAt(string $value)\n *\n * @category    Mage\n * @package     Mage_Catalog\n * @author      Magento Core Team <core@magentocommerce.com>\n *\/",28],["T_WHITESPACE","\n",53],["T_CLASS","class",54],["T_WHITESPACE"," ",54],["T_STRING","Mage_Catalog_Model_Product_Flat_Indexer",54],["T_WHITESPACE"," ",54],["T_EXTENDS","extends",54],["T_WHITESPACE"," ",54],["T_STRING","Mage_Core_Model_Abstract",54],["T_WHITESPACE","\n",54],"{",["T_WHITESPACE","\n    ",55],["T_DOC_COMMENT","\/**\n     * Catalog product flat entity for indexers\n     *\/",56],["T_WHITESPACE","\n    ",58],["T_CONST","const",59],["T_WHITESPACE"," ",59],["T_STRING","ENTITY",59],["T_WHITESPACE"," ",59],"=",["T_WHITESPACE"," ",59],["T_CONSTANT_ENCAPSED_STRING","'catalog_product_flat'",59],";",["T_WHITESPACE","\n\n    ",59],["T_DOC_COMMENT","\/**\n     * Indexers rebuild event type\n     *\/",61],["T_WHITESPACE","\n    ",63],["T_CONST","const",64],["T_WHITESPACE"," ",64],["T_STRING","EVENT_TYPE_REBUILD",64],["T_WHITESPACE"," ",64],"=",["T_WHITESPACE"," ",64],["T_CONSTANT_ENCAPSED_STRING","'catalog_product_flat_rebuild'",64],";",["T_WHITESPACE","\n\n    ",64],["T_DOC_COMMENT","\/**\n     * Standart model resource initialization\n     *\n     *\/",66],["T_WHITESPACE","\n    ",69],["T_PROTECTED","protected",70],["T_WHITESPACE"," ",70],["T_FUNCTION","function",70],["T_WHITESPACE"," ",70],["T_STRING","_construct",70],"(",")",["T_WHITESPACE","\n    ",70],"{",["T_WHITESPACE","\n        ",71],["T_VARIABLE","$this",72],["T_OBJECT_OPERATOR","->",72],["T_STRING","_init",72],"(",["T_CONSTANT_ENCAPSED_STRING","'catalog\/product_flat_indexer'",72],")",";",["T_WHITESPACE","\n    ",72],"}",["T_WHITESPACE","\n\n    ",73],["T_DOC_COMMENT","\/**\n     * Rebuild Catalog Product Flat Data\n     *\n     * @param mixed $store\n     * @return Mage_Catalog_Model_Product_Flat_Indexer\n     *\/",75],["T_WHITESPACE","\n    ",80],["T_PUBLIC","public",81],["T_WHITESPACE"," ",81],["T_FUNCTION","function",81],["T_WHITESPACE"," ",81],["T_STRING","rebuild",81],"(",["T_VARIABLE","$store",81],["T_WHITESPACE"," ",81],"=",["T_WHITESPACE"," ",81],["T_STRING","null",81],")",["T_WHITESPACE","\n    ",81],"{",["T_WHITESPACE","\n        ",82],["T_IF","if",83],["T_WHITESPACE"," ",83],"(",["T_STRING","is_null",83],"(",["T_VARIABLE","$store",83],")",")",["T_WHITESPACE"," ",83],"{",["T_WHITESPACE","\n            ",83],["T_VARIABLE","$this",84],["T_OBJECT_OPERATOR","->",84],["T_STRING","_getResource",84],"(",")",["T_OBJECT_OPERATOR","->",84],["T_STRING","prepareFlatTables",84],"(",")",";",["T_WHITESPACE","\n        ",84],"}",["T_WHITESPACE"," ",85],["T_ELSE","else",85],["T_WHITESPACE"," ",85],"{",["T_WHITESPACE","\n            ",85],["T_VARIABLE","$this",86],["T_OBJECT_OPERATOR","->",86],["T_STRING","_getResource",86],"(",")",["T_OBJECT_OPERATOR","->",86],["T_STRING","prepareFlatTable",86],"(",["T_VARIABLE","$store",86],")",";",["T_WHITESPACE","\n        ",86],"}",["T_WHITESPACE","\n        ",87],["T_STRING","Mage",88],["T_DOUBLE_COLON","::",88],["T_STRING","getSingleton",88],"(",["T_CONSTANT_ENCAPSED_STRING","'index\/indexer'",88],")",["T_OBJECT_OPERATOR","->",88],["T_STRING","processEntityAction",88],"(",["T_WHITESPACE","\n            ",88],["T_NEW","new",89],["T_WHITESPACE"," ",89],["T_STRING","Varien_Object",89],"(",["T_ARRAY","array",89],"(",["T_CONSTANT_ENCAPSED_STRING","'id'",89],["T_WHITESPACE"," ",89],["T_DOUBLE_ARROW","=>",89],["T_WHITESPACE"," ",89],["T_VARIABLE","$store",89],")",")",",",["T_WHITESPACE","\n            ",89],["T_STRING","self",90],["T_DOUBLE_COLON","::",90],["T_STRING","ENTITY",90],",",["T_WHITESPACE","\n            ",90],["T_STRING","self",91],["T_DOUBLE_COLON","::",91],["T_STRING","EVENT_TYPE_REBUILD",91],["T_WHITESPACE","\n        ",91],")",";",["T_WHITESPACE","\n        ",92],["T_RETURN","return",93],["T_WHITESPACE"," ",93],["T_VARIABLE","$this",93],";",["T_WHITESPACE","\n    ",93],"}",["T_WHITESPACE","\n\n    ",94],["T_DOC_COMMENT","\/**\n     * Update attribute data for flat table\n     *\n     * @param string $attributeCode\n     * @param int $store\n     * @param int|array $productIds\n     * @return Mage_Catalog_Model_Product_Flat_Indexer\n     *\/",96],["T_WHITESPACE","\n    ",103],["T_PUBLIC","public",104],["T_WHITESPACE"," ",104],["T_FUNCTION","function",104],["T_WHITESPACE"," ",104],["T_STRING","updateAttribute",104],"(",["T_VARIABLE","$attributeCode",104],",",["T_WHITESPACE"," ",104],["T_VARIABLE","$store",104],["T_WHITESPACE"," ",104],"=",["T_WHITESPACE"," ",104],["T_STRING","null",104],",",["T_WHITESPACE"," ",104],["T_VARIABLE","$productIds",104],["T_WHITESPACE"," ",104],"=",["T_WHITESPACE"," ",104],["T_STRING","null",104],")",["T_WHITESPACE","\n    ",104],"{",["T_WHITESPACE","\n        ",105],["T_IF","if",106],["T_WHITESPACE"," ",106],"(",["T_STRING","is_null",106],"(",["T_VARIABLE","$store",106],")",")",["T_WHITESPACE"," ",106],"{",["T_WHITESPACE","\n            ",106],["T_FOREACH","foreach",107],["T_WHITESPACE"," ",107],"(",["T_STRING","Mage",107],["T_DOUBLE_COLON","::",107],["T_STRING","app",107],"(",")",["T_OBJECT_OPERATOR","->",107],["T_STRING","getStores",107],"(",")",["T_WHITESPACE"," ",107],["T_AS","as",107],["T_WHITESPACE"," ",107],["T_VARIABLE","$store",107],")",["T_WHITESPACE"," ",107],"{",["T_WHITESPACE","\n                ",107],["T_VARIABLE","$this",108],["T_OBJECT_OPERATOR","->",108],["T_STRING","updateAttribute",108],"(",["T_VARIABLE","$attributeCode",108],",",["T_WHITESPACE"," ",108],["T_VARIABLE","$store",108],["T_OBJECT_OPERATOR","->",108],["T_STRING","getId",108],"(",")",",",["T_WHITESPACE"," ",108],["T_VARIABLE","$productIds",108],")",";",["T_WHITESPACE","\n            ",108],"}",["T_WHITESPACE","\n\n            ",109],["T_RETURN","return",111],["T_WHITESPACE"," ",111],["T_VARIABLE","$this",111],";",["T_WHITESPACE","\n        ",111],"}",["T_WHITESPACE","\n\n        ",112],["T_VARIABLE","$this",114],["T_OBJECT_OPERATOR","->",114],["T_STRING","_getResource",114],"(",")",["T_OBJECT_OPERATOR","->",114],["T_STRING","prepareFlatTable",114],"(",["T_VARIABLE","$store",114],")",";",["T_WHITESPACE","\n        ",114],["T_VARIABLE","$attribute",115],["T_WHITESPACE"," ",115],"=",["T_WHITESPACE"," ",115],["T_VARIABLE","$this",115],["T_OBJECT_OPERATOR","->",115],["T_STRING","_getResource",115],"(",")",["T_OBJECT_OPERATOR","->",115],["T_STRING","getAttribute",115],"(",["T_VARIABLE","$attributeCode",115],")",";",["T_WHITESPACE","\n        ",115],["T_VARIABLE","$this",116],["T_OBJECT_OPERATOR","->",116],["T_STRING","_getResource",116],"(",")",["T_OBJECT_OPERATOR","->",116],["T_STRING","updateAttribute",116],"(",["T_VARIABLE","$attribute",116],",",["T_WHITESPACE"," ",116],["T_VARIABLE","$store",116],",",["T_WHITESPACE"," ",116],["T_VARIABLE","$productIds",116],")",";",["T_WHITESPACE","\n        ",116],["T_VARIABLE","$this",117],["T_OBJECT_OPERATOR","->",117],["T_STRING","_getResource",117],"(",")",["T_OBJECT_OPERATOR","->",117],["T_STRING","updateChildrenDataFromParent",117],"(",["T_VARIABLE","$store",117],",",["T_WHITESPACE"," ",117],["T_VARIABLE","$productIds",117],")",";",["T_WHITESPACE","\n\n        ",117],["T_RETURN","return",119],["T_WHITESPACE"," ",119],["T_VARIABLE","$this",119],";",["T_WHITESPACE","\n    ",119],"}",["T_WHITESPACE","\n\n    ",120],["T_DOC_COMMENT","\/**\n     * Prepare datastorage for catalog product flat\n     *\n     * @param int $store\n     * @return Mage_Catalog_Model_Product_Flat_Indexer\n     *\/",122],["T_WHITESPACE","\n    ",127],["T_PUBLIC","public",128],["T_WHITESPACE"," ",128],["T_FUNCTION","function",128],["T_WHITESPACE"," ",128],["T_STRING","prepareDataStorage",128],"(",["T_VARIABLE","$store",128],["T_WHITESPACE"," ",128],"=",["T_WHITESPACE"," ",128],["T_STRING","null",128],")",["T_WHITESPACE","\n    ",128],"{",["T_WHITESPACE","\n        ",129],["T_IF","if",130],["T_WHITESPACE"," ",130],"(",["T_STRING","is_null",130],"(",["T_VARIABLE","$store",130],")",")",["T_WHITESPACE"," ",130],"{",["T_WHITESPACE","\n            ",130],["T_FOREACH","foreach",131],["T_WHITESPACE"," ",131],"(",["T_STRING","Mage",131],["T_DOUBLE_COLON","::",131],["T_STRING","app",131],"(",")",["T_OBJECT_OPERATOR","->",131],["T_STRING","getStores",131],"(",")",["T_WHITESPACE"," ",131],["T_AS","as",131],["T_WHITESPACE"," ",131],["T_VARIABLE","$store",131],")",["T_WHITESPACE"," ",131],"{",["T_WHITESPACE","\n                ",131],["T_VARIABLE","$this",132],["T_OBJECT_OPERATOR","->",132],["T_STRING","prepareDataStorage",132],"(",["T_VARIABLE","$store",132],["T_OBJECT_OPERATOR","->",132],["T_STRING","getId",132],"(",")",")",";",["T_WHITESPACE","\n            ",132],"}",["T_WHITESPACE","\n\n            ",133],["T_RETURN","return",135],["T_WHITESPACE"," ",135],["T_VARIABLE","$this",135],";",["T_WHITESPACE","\n        ",135],"}",["T_WHITESPACE","\n\n        ",136],["T_VARIABLE","$this",138],["T_OBJECT_OPERATOR","->",138],["T_STRING","_getResource",138],"(",")",["T_OBJECT_OPERATOR","->",138],["T_STRING","prepareFlatTable",138],"(",["T_VARIABLE","$store",138],")",";",["T_WHITESPACE","\n\n        ",138],["T_RETURN","return",140],["T_WHITESPACE"," ",140],["T_VARIABLE","$this",140],";",["T_WHITESPACE","\n    ",140],"}",["T_WHITESPACE","\n\n    ",141],["T_DOC_COMMENT","\/**\n     * Update events observer attributes\n     *\n     * @param int $store\n     * @return Mage_Catalog_Model_Product_Flat_Indexer\n     *\/",143],["T_WHITESPACE","\n    ",148],["T_PUBLIC","public",149],["T_WHITESPACE"," ",149],["T_FUNCTION","function",149],["T_WHITESPACE"," ",149],["T_STRING","updateEventAttributes",149],"(",["T_VARIABLE","$store",149],["T_WHITESPACE"," ",149],"=",["T_WHITESPACE"," ",149],["T_STRING","null",149],")",["T_WHITESPACE","\n    ",149],"{",["T_WHITESPACE","\n        ",150],["T_IF","if",151],["T_WHITESPACE"," ",151],"(",["T_STRING","is_null",151],"(",["T_VARIABLE","$store",151],")",")",["T_WHITESPACE"," ",151],"{",["T_WHITESPACE","\n            ",151],["T_FOREACH","foreach",152],["T_WHITESPACE"," ",152],"(",["T_STRING","Mage",152],["T_DOUBLE_COLON","::",152],["T_STRING","app",152],"(",")",["T_OBJECT_OPERATOR","->",152],["T_STRING","getStores",152],"(",")",["T_WHITESPACE"," ",152],["T_AS","as",152],["T_WHITESPACE"," ",152],["T_VARIABLE","$store",152],")",["T_WHITESPACE"," ",152],"{",["T_WHITESPACE","\n                ",152],["T_VARIABLE","$this",153],["T_OBJECT_OPERATOR","->",153],["T_STRING","updateEventAttributes",153],"(",["T_VARIABLE","$store",153],["T_OBJECT_OPERATOR","->",153],["T_STRING","getId",153],"(",")",")",";",["T_WHITESPACE","\n            ",153],"}",["T_WHITESPACE","\n\n            ",154],["T_RETURN","return",156],["T_WHITESPACE"," ",156],["T_VARIABLE","$this",156],";",["T_WHITESPACE","\n        ",156],"}",["T_WHITESPACE","\n\n        ",157],["T_VARIABLE","$this",159],["T_OBJECT_OPERATOR","->",159],["T_STRING","_getResource",159],"(",")",["T_OBJECT_OPERATOR","->",159],["T_STRING","prepareFlatTable",159],"(",["T_VARIABLE","$store",159],")",";",["T_WHITESPACE","\n        ",159],["T_VARIABLE","$this",160],["T_OBJECT_OPERATOR","->",160],["T_STRING","_getResource",160],"(",")",["T_OBJECT_OPERATOR","->",160],["T_STRING","updateEventAttributes",160],"(",["T_VARIABLE","$store",160],")",";",["T_WHITESPACE","\n        ",160],["T_VARIABLE","$this",161],["T_OBJECT_OPERATOR","->",161],["T_STRING","_getResource",161],"(",")",["T_OBJECT_OPERATOR","->",161],["T_STRING","updateRelationProducts",161],"(",["T_VARIABLE","$store",161],")",";",["T_WHITESPACE","\n\n        ",161],["T_RETURN","return",163],["T_WHITESPACE"," ",163],["T_VARIABLE","$this",163],";",["T_WHITESPACE","\n    ",163],"}",["T_WHITESPACE","\n\n    ",164],["T_DOC_COMMENT","\/**\n     * Update product status\n     *\n     * @param int $productId\n     * @param int $status\n     * @param int $store\n     * @return Mage_Catalog_Model_Product_Flat_Indexer\n     *\/",166],["T_WHITESPACE","\n    ",173],["T_PUBLIC","public",174],["T_WHITESPACE"," ",174],["T_FUNCTION","function",174],["T_WHITESPACE"," ",174],["T_STRING","updateProductStatus",174],"(",["T_VARIABLE","$productId",174],",",["T_WHITESPACE"," ",174],["T_VARIABLE","$status",174],",",["T_WHITESPACE"," ",174],["T_VARIABLE","$store",174],["T_WHITESPACE"," ",174],"=",["T_WHITESPACE"," ",174],["T_STRING","null",174],")",["T_WHITESPACE","\n    ",174],"{",["T_WHITESPACE","\n        ",175],["T_IF","if",176],["T_WHITESPACE"," ",176],"(",["T_STRING","is_null",176],"(",["T_VARIABLE","$store",176],")",")",["T_WHITESPACE"," ",176],"{",["T_WHITESPACE","\n            ",176],["T_FOREACH","foreach",177],["T_WHITESPACE"," ",177],"(",["T_STRING","Mage",177],["T_DOUBLE_COLON","::",177],["T_STRING","app",177],"(",")",["T_OBJECT_OPERATOR","->",177],["T_STRING","getStores",177],"(",")",["T_WHITESPACE"," ",177],["T_AS","as",177],["T_WHITESPACE"," ",177],["T_VARIABLE","$store",177],")",["T_WHITESPACE"," ",177],"{",["T_WHITESPACE","\n                ",177],["T_VARIABLE","$this",178],["T_OBJECT_OPERATOR","->",178],["T_STRING","updateProductStatus",178],"(",["T_VARIABLE","$productId",178],",",["T_WHITESPACE"," ",178],["T_VARIABLE","$status",178],",",["T_WHITESPACE"," ",178],["T_VARIABLE","$store",178],["T_OBJECT_OPERATOR","->",178],["T_STRING","getId",178],"(",")",")",";",["T_WHITESPACE","\n            ",178],"}",["T_WHITESPACE","\n            ",179],["T_RETURN","return",180],["T_WHITESPACE"," ",180],["T_VARIABLE","$this",180],";",["T_WHITESPACE","\n        ",180],"}",["T_WHITESPACE","\n\n        ",181],["T_IF","if",183],["T_WHITESPACE"," ",183],"(",["T_VARIABLE","$status",183],["T_WHITESPACE"," ",183],["T_IS_EQUAL","==",183],["T_WHITESPACE"," ",183],["T_STRING","Mage_Catalog_Model_Product_Status",183],["T_DOUBLE_COLON","::",183],["T_STRING","STATUS_ENABLED",183],")",["T_WHITESPACE"," ",183],"{",["T_WHITESPACE","\n            ",183],["T_VARIABLE","$this",184],["T_OBJECT_OPERATOR","->",184],["T_STRING","_getResource",184],"(",")",["T_OBJECT_OPERATOR","->",184],["T_STRING","updateProduct",184],"(",["T_VARIABLE","$productId",184],",",["T_WHITESPACE"," ",184],["T_VARIABLE","$store",184],")",";",["T_WHITESPACE","\n            ",184],["T_VARIABLE","$this",185],["T_OBJECT_OPERATOR","->",185],["T_STRING","_getResource",185],"(",")",["T_OBJECT_OPERATOR","->",185],["T_STRING","updateChildrenDataFromParent",185],"(",["T_VARIABLE","$store",185],",",["T_WHITESPACE"," ",185],["T_VARIABLE","$productId",185],")",";",["T_WHITESPACE","\n        ",185],"}",["T_WHITESPACE","\n        ",186],["T_ELSE","else",187],["T_WHITESPACE"," ",187],"{",["T_WHITESPACE","\n            ",187],["T_VARIABLE","$this",188],["T_OBJECT_OPERATOR","->",188],["T_STRING","_getResource",188],"(",")",["T_OBJECT_OPERATOR","->",188],["T_STRING","removeProduct",188],"(",["T_VARIABLE","$productId",188],",",["T_WHITESPACE"," ",188],["T_VARIABLE","$store",188],")",";",["T_WHITESPACE","\n        ",188],"}",["T_WHITESPACE","\n\n        ",189],["T_RETURN","return",191],["T_WHITESPACE"," ",191],["T_VARIABLE","$this",191],";",["T_WHITESPACE","\n    ",191],"}",["T_WHITESPACE","\n\n    ",192],["T_DOC_COMMENT","\/**\n     * Update Catalog Product Flat data\n     *\n     * @param int|array $productIds\n     * @param int $store\n     * @return Mage_Catalog_Model_Product_Flat_Indexer\n     *\/",194],["T_WHITESPACE","\n    ",200],["T_PUBLIC","public",201],["T_WHITESPACE"," ",201],["T_FUNCTION","function",201],["T_WHITESPACE"," ",201],["T_STRING","updateProduct",201],"(",["T_VARIABLE","$productIds",201],",",["T_WHITESPACE"," ",201],["T_VARIABLE","$store",201],["T_WHITESPACE"," ",201],"=",["T_WHITESPACE"," ",201],["T_STRING","null",201],")",["T_WHITESPACE","\n    ",201],"{",["T_WHITESPACE","\n        ",202],["T_IF","if",203],["T_WHITESPACE"," ",203],"(",["T_STRING","is_null",203],"(",["T_VARIABLE","$store",203],")",")",["T_WHITESPACE"," ",203],"{",["T_WHITESPACE","\n            ",203],["T_FOREACH","foreach",204],["T_WHITESPACE"," ",204],"(",["T_STRING","Mage",204],["T_DOUBLE_COLON","::",204],["T_STRING","app",204],"(",")",["T_OBJECT_OPERATOR","->",204],["T_STRING","getStores",204],"(",")",["T_WHITESPACE"," ",204],["T_AS","as",204],["T_WHITESPACE"," ",204],["T_VARIABLE","$store",204],")",["T_WHITESPACE"," ",204],"{",["T_WHITESPACE","\n                ",204],["T_VARIABLE","$this",205],["T_OBJECT_OPERATOR","->",205],["T_STRING","updateProduct",205],"(",["T_VARIABLE","$productIds",205],",",["T_WHITESPACE"," ",205],["T_VARIABLE","$store",205],["T_OBJECT_OPERATOR","->",205],["T_STRING","getId",205],"(",")",")",";",["T_WHITESPACE","\n            ",205],"}",["T_WHITESPACE","\n            ",206],["T_RETURN","return",207],["T_WHITESPACE"," ",207],["T_VARIABLE","$this",207],";",["T_WHITESPACE","\n        ",207],"}",["T_WHITESPACE","\n\n        ",208],["T_VARIABLE","$resource",210],["T_WHITESPACE"," ",210],"=",["T_WHITESPACE"," ",210],["T_VARIABLE","$this",210],["T_OBJECT_OPERATOR","->",210],["T_STRING","_getResource",210],"(",")",";",["T_WHITESPACE","\n        ",210],["T_VARIABLE","$resource",211],["T_OBJECT_OPERATOR","->",211],["T_STRING","beginTransaction",211],"(",")",";",["T_WHITESPACE","\n        ",211],["T_TRY","try",212],["T_WHITESPACE"," ",212],"{",["T_WHITESPACE","\n            ",212],["T_VARIABLE","$resource",213],["T_OBJECT_OPERATOR","->",213],["T_STRING","removeProduct",213],"(",["T_VARIABLE","$productIds",213],",",["T_WHITESPACE"," ",213],["T_VARIABLE","$store",213],")",";",["T_WHITESPACE","\n            ",213],["T_VARIABLE","$resource",214],["T_OBJECT_OPERATOR","->",214],["T_STRING","updateProduct",214],"(",["T_VARIABLE","$productIds",214],",",["T_WHITESPACE"," ",214],["T_VARIABLE","$store",214],")",";",["T_WHITESPACE","\n            ",214],["T_VARIABLE","$resource",215],["T_OBJECT_OPERATOR","->",215],["T_STRING","updateRelationProducts",215],"(",["T_VARIABLE","$store",215],",",["T_WHITESPACE"," ",215],["T_VARIABLE","$productIds",215],")",";",["T_WHITESPACE","\n            ",215],["T_VARIABLE","$resource",216],["T_OBJECT_OPERATOR","->",216],["T_STRING","commit",216],"(",")",";",["T_WHITESPACE","\n        ",216],"}",["T_WHITESPACE"," ",217],["T_CATCH","catch",217],["T_WHITESPACE"," ",217],"(",["T_STRING","Exception",217],["T_WHITESPACE"," ",217],["T_VARIABLE","$e",217],")","{",["T_WHITESPACE","\n            ",217],["T_VARIABLE","$resource",218],["T_OBJECT_OPERATOR","->",218],["T_STRING","rollBack",218],"(",")",";",["T_WHITESPACE","\n            ",218],["T_THROW","throw",219],["T_WHITESPACE"," ",219],["T_VARIABLE","$e",219],";",["T_WHITESPACE","\n        ",219],"}",["T_WHITESPACE","\n\n        ",220],["T_RETURN","return",222],["T_WHITESPACE"," ",222],["T_VARIABLE","$this",222],";",["T_WHITESPACE","\n    ",222],"}",["T_WHITESPACE","\n\n    ",223],["T_DOC_COMMENT","\/**\n     * Save Catalog Product(s) Flat data\n     *\n     * @param int|array $productIds\n     * @param int $store\n     * @return Mage_Catalog_Model_Product_Flat_Indexer\n     *\/",225],["T_WHITESPACE","\n    ",231],["T_PUBLIC","public",232],["T_WHITESPACE"," ",232],["T_FUNCTION","function",232],["T_WHITESPACE"," ",232],["T_STRING","saveProduct",232],"(",["T_VARIABLE","$productIds",232],",",["T_WHITESPACE"," ",232],["T_VARIABLE","$store",232],["T_WHITESPACE"," ",232],"=",["T_WHITESPACE"," ",232],["T_STRING","null",232],")",["T_WHITESPACE","\n    ",232],"{",["T_WHITESPACE","\n        ",233],["T_IF","if",234],["T_WHITESPACE"," ",234],"(",["T_STRING","is_null",234],"(",["T_VARIABLE","$store",234],")",")",["T_WHITESPACE"," ",234],"{",["T_WHITESPACE","\n            ",234],["T_FOREACH","foreach",235],["T_WHITESPACE"," ",235],"(",["T_STRING","Mage",235],["T_DOUBLE_COLON","::",235],["T_STRING","app",235],"(",")",["T_OBJECT_OPERATOR","->",235],["T_STRING","getStores",235],"(",")",["T_WHITESPACE"," ",235],["T_AS","as",235],["T_WHITESPACE"," ",235],["T_VARIABLE","$store",235],")",["T_WHITESPACE"," ",235],"{",["T_WHITESPACE","\n                ",235],["T_VARIABLE","$this",236],["T_OBJECT_OPERATOR","->",236],["T_STRING","saveProduct",236],"(",["T_VARIABLE","$productIds",236],",",["T_WHITESPACE"," ",236],["T_VARIABLE","$store",236],["T_OBJECT_OPERATOR","->",236],["T_STRING","getId",236],"(",")",")",";",["T_WHITESPACE","\n            ",236],"}",["T_WHITESPACE","\n            ",237],["T_RETURN","return",238],["T_WHITESPACE"," ",238],["T_VARIABLE","$this",238],";",["T_WHITESPACE","\n        ",238],"}",["T_WHITESPACE","\n\n        ",239],["T_VARIABLE","$resource",241],["T_WHITESPACE"," ",241],"=",["T_WHITESPACE"," ",241],["T_VARIABLE","$this",241],["T_OBJECT_OPERATOR","->",241],["T_STRING","_getResource",241],"(",")",";",["T_WHITESPACE","\n        ",241],["T_VARIABLE","$resource",242],["T_OBJECT_OPERATOR","->",242],["T_STRING","beginTransaction",242],"(",")",";",["T_WHITESPACE","\n        ",242],["T_TRY","try",243],["T_WHITESPACE"," ",243],"{",["T_WHITESPACE","\n            ",243],["T_VARIABLE","$resource",244],["T_OBJECT_OPERATOR","->",244],["T_STRING","removeProduct",244],"(",["T_VARIABLE","$productIds",244],",",["T_WHITESPACE"," ",244],["T_VARIABLE","$store",244],")",";",["T_WHITESPACE","\n            ",244],["T_VARIABLE","$resource",245],["T_OBJECT_OPERATOR","->",245],["T_STRING","saveProduct",245],"(",["T_VARIABLE","$productIds",245],",",["T_WHITESPACE"," ",245],["T_VARIABLE","$store",245],")",";",["T_WHITESPACE","\n            ",245],["T_VARIABLE","$resource",246],["T_OBJECT_OPERATOR","->",246],["T_STRING","updateRelationProducts",246],"(",["T_VARIABLE","$store",246],",",["T_WHITESPACE"," ",246],["T_VARIABLE","$productIds",246],")",";",["T_WHITESPACE","\n            ",246],["T_VARIABLE","$resource",247],["T_OBJECT_OPERATOR","->",247],["T_STRING","commit",247],"(",")",";",["T_WHITESPACE","\n        ",247],"}",["T_WHITESPACE"," ",248],["T_CATCH","catch",248],["T_WHITESPACE"," ",248],"(",["T_STRING","Exception",248],["T_WHITESPACE"," ",248],["T_VARIABLE","$e",248],")","{",["T_WHITESPACE","\n            ",248],["T_VARIABLE","$resource",249],["T_OBJECT_OPERATOR","->",249],["T_STRING","rollBack",249],"(",")",";",["T_WHITESPACE","\n            ",249],["T_THROW","throw",250],["T_WHITESPACE"," ",250],["T_VARIABLE","$e",250],";",["T_WHITESPACE","\n        ",250],"}",["T_WHITESPACE","\n\n        ",251],["T_RETURN","return",253],["T_WHITESPACE"," ",253],["T_VARIABLE","$this",253],";",["T_WHITESPACE","\n    ",253],"}",["T_WHITESPACE","\n\n    ",254],["T_DOC_COMMENT","\/**\n     * Remove product from flat\n     *\n     * @param int|array $productIds\n     * @param int $store\n     * @return Mage_Catalog_Model_Product_Flat_Indexer\n     *\/",256],["T_WHITESPACE","\n    ",262],["T_PUBLIC","public",263],["T_WHITESPACE"," ",263],["T_FUNCTION","function",263],["T_WHITESPACE"," ",263],["T_STRING","removeProduct",263],"(",["T_VARIABLE","$productIds",263],",",["T_WHITESPACE"," ",263],["T_VARIABLE","$store",263],["T_WHITESPACE"," ",263],"=",["T_WHITESPACE"," ",263],["T_STRING","null",263],")",["T_WHITESPACE","\n    ",263],"{",["T_WHITESPACE","\n        ",264],["T_IF","if",265],["T_WHITESPACE"," ",265],"(",["T_STRING","is_null",265],"(",["T_VARIABLE","$store",265],")",")",["T_WHITESPACE"," ",265],"{",["T_WHITESPACE","\n            ",265],["T_FOREACH","foreach",266],["T_WHITESPACE"," ",266],"(",["T_STRING","Mage",266],["T_DOUBLE_COLON","::",266],["T_STRING","app",266],"(",")",["T_OBJECT_OPERATOR","->",266],["T_STRING","getStores",266],"(",")",["T_WHITESPACE"," ",266],["T_AS","as",266],["T_WHITESPACE"," ",266],["T_VARIABLE","$store",266],")",["T_WHITESPACE"," ",266],"{",["T_WHITESPACE","\n                ",266],["T_VARIABLE","$this",267],["T_OBJECT_OPERATOR","->",267],["T_STRING","removeProduct",267],"(",["T_VARIABLE","$productIds",267],",",["T_WHITESPACE"," ",267],["T_VARIABLE","$store",267],["T_OBJECT_OPERATOR","->",267],["T_STRING","getId",267],"(",")",")",";",["T_WHITESPACE","\n            ",267],"}",["T_WHITESPACE","\n            ",268],["T_RETURN","return",269],["T_WHITESPACE"," ",269],["T_VARIABLE","$this",269],";",["T_WHITESPACE","\n        ",269],"}",["T_WHITESPACE","\n\n        ",270],["T_VARIABLE","$this",272],["T_OBJECT_OPERATOR","->",272],["T_STRING","_getResource",272],"(",")",["T_OBJECT_OPERATOR","->",272],["T_STRING","removeProduct",272],"(",["T_VARIABLE","$productIds",272],",",["T_WHITESPACE"," ",272],["T_VARIABLE","$store",272],")",";",["T_WHITESPACE","\n\n        ",272],["T_RETURN","return",274],["T_WHITESPACE"," ",274],["T_VARIABLE","$this",274],";",["T_WHITESPACE","\n    ",274],"}",["T_WHITESPACE","\n\n    ",275],["T_DOC_COMMENT","\/**\n     * Delete store process\n     *\n     * @param int $store\n     * @return Mage_Catalog_Model_Product_Flat_Indexer\n     *\/",277],["T_WHITESPACE","\n    ",282],["T_PUBLIC","public",283],["T_WHITESPACE"," ",283],["T_FUNCTION","function",283],["T_WHITESPACE"," ",283],["T_STRING","deleteStore",283],"(",["T_VARIABLE","$store",283],")",["T_WHITESPACE","\n    ",283],"{",["T_WHITESPACE","\n        ",284],["T_VARIABLE","$this",285],["T_OBJECT_OPERATOR","->",285],["T_STRING","_getResource",285],"(",")",["T_OBJECT_OPERATOR","->",285],["T_STRING","deleteFlatTable",285],"(",["T_VARIABLE","$store",285],")",";",["T_WHITESPACE","\n        ",285],["T_RETURN","return",286],["T_WHITESPACE"," ",286],["T_VARIABLE","$this",286],";",["T_WHITESPACE","\n    ",286],"}",["T_WHITESPACE","\n\n    ",287],["T_DOC_COMMENT","\/**\n     * Rebuild Catalog Product Flat Data for all stores\n     *\n     * @return Mage_Catalog_Model_Product_Flat_Indexer\n     *\/",289],["T_WHITESPACE","\n    ",293],["T_PUBLIC","public",294],["T_WHITESPACE"," ",294],["T_FUNCTION","function",294],["T_WHITESPACE"," ",294],["T_STRING","reindexAll",294],"(",")",["T_WHITESPACE","\n    ",294],"{",["T_WHITESPACE","\n        ",295],["T_VARIABLE","$this",296],["T_OBJECT_OPERATOR","->",296],["T_STRING","_getResource",296],"(",")",["T_OBJECT_OPERATOR","->",296],["T_STRING","reindexAll",296],"(",")",";",["T_WHITESPACE","\n        ",296],["T_RETURN","return",297],["T_WHITESPACE"," ",297],["T_VARIABLE","$this",297],";",["T_WHITESPACE","\n    ",297],"}",["T_WHITESPACE","\n\n    ",298],["T_DOC_COMMENT","\/**\n     * Retrieve list of attribute codes for flat\n     *\n     * @return array\n     *\/",300],["T_WHITESPACE","\n    ",304],["T_PUBLIC","public",305],["T_WHITESPACE"," ",305],["T_FUNCTION","function",305],["T_WHITESPACE"," ",305],["T_STRING","getAttributeCodes",305],"(",")",["T_WHITESPACE","\n    ",305],"{",["T_WHITESPACE","\n        ",306],["T_RETURN","return",307],["T_WHITESPACE"," ",307],["T_VARIABLE","$this",307],["T_OBJECT_OPERATOR","->",307],["T_STRING","_getResource",307],"(",")",["T_OBJECT_OPERATOR","->",307],["T_STRING","getAttributeCodes",307],"(",")",";",["T_WHITESPACE","\n    ",307],"}",["T_WHITESPACE","\n",308],"}",["T_WHITESPACE","\n",309]]
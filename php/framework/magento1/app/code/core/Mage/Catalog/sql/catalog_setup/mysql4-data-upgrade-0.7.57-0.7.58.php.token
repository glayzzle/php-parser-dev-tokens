[["T_OPEN_TAG","<?php\n",1],["T_DOC_COMMENT","\/**\n * Magento\n *\n * NOTICE OF LICENSE\n *\n * This source file is subject to the Open Software License (OSL 3.0)\n * that is bundled with this package in the file LICENSE.txt.\n * It is also available through the world-wide-web at this URL:\n * http:\/\/opensource.org\/licenses\/osl-3.0.php\n * If you did not receive a copy of the license and are unable to\n * obtain it through the world-wide-web, please send an email\n * to license@magento.com so we can send you a copy immediately.\n *\n * DISCLAIMER\n *\n * Do not edit or add to this file if you wish to upgrade Magento to newer\n * versions in the future. If you wish to customize Magento for your\n * needs please refer to http:\/\/www.magento.com for more information.\n *\n * @category    Mage\n * @package     Mage_Catalog\n * @copyright  Copyright (c) 2006-2016 X.commerce, Inc. and affiliates (http:\/\/www.magento.com)\n * @license    http:\/\/opensource.org\/licenses\/osl-3.0.php  Open Software License (OSL 3.0)\n *\/",2],["T_WHITESPACE","\n\n",25],["T_VARIABLE","$installer",27],["T_WHITESPACE"," ",27],"=",["T_WHITESPACE"," ",27],["T_VARIABLE","$this",27],";",["T_WHITESPACE","\n",27],["T_COMMENT","\/* @var $installer Mage_Catalog_Model_Resource_Eav_Mysql4_Setup *\/",28],["T_WHITESPACE","\n\n",28],["T_COMMENT","\/*\n\/\/ Modify Groups and Attributes for Category\n$entityTypeId     = $installer->getEntityTypeId('catalog_category');\n$attributeSetId   = $installer->getDefaultAttributeSetId($entityTypeId);\n$attributeGroupId = $installer->getDefaultAttributeGroupId($entityTypeId, $attributeSetId);\n\n\/\/ update General Group\n$installer->updateAttributeGroup(\n    $entityTypeId,\n    $attributeSetId,\n    $attributeGroupId,\n    'attribute_group_name',\n    'General Information'\n);\n$installer->updateAttributeGroup(\n    $entityTypeId,\n    $attributeSetId,\n    $attributeGroupId,\n    'sort_order',\n    '10'\n);\n\n\/\/ Add groups\n$groups = array(\n    'display'   => array(\n        'name'  => 'Display Settings',\n        'sort'  => 20,\n        'id'    => null\n    ),\n    'design'    => array(\n        'name'  => 'Custom Design',\n        'sort'  => 30,\n        'id'    => null\n    )\n);\n\nforeach ($groups as $k => $groupProp) {\n    \/\/if ($k == 'display') continue;\n    \/\/$installer->getConnection()->raw_query(\"INSERT INTO `eav_attribute_group` (`attribute_group_id`, `attribute_set_id`, `attribute_group_name`, `sort_order`) VALUES (null, \".$attributeSetId.\", '\".$groupProp['name'].\"', \".$groupProp['sort'].\");\");\n    $installer->addAttributeGroup($entityTypeId, $attributeSetId, $groupProp['name'], $groupProp['sort']);\n    $groups[$k]['id'] = $installer->getAttributeGroupId($entityTypeId, $attributeSetId, $groupProp['name']);\n}\n\n\/\/ Add Catalog Default Sort Attributes\n$installer->addAttribute($entityTypeId, 'available_sort_by', array(\n    'input'         => 'multiselect',\n    'type'          => 'text',\n    'label'         => 'Available Product Listing Sort By',\n    'source'        => 'catalog\/category_attribute_source_sortby',\n    'backend'       => 'catalog\/category_attribute_backend_sortby',\n    'required'      => 1,\n    'global'        => Mage_Catalog_Model_Resource_Eav_Attribute::SCOPE_STORE,\n    'visible'       => 1,\n    'input_renderer'=> 'adminhtml\/catalog_category_helper_sortby_available',\n));\n$installer->addAttribute($entityTypeId, 'default_sort_by', array(\n    'input'         => 'select',\n    'label'         => 'Default Product Listing Sort By',\n    'source'        => 'catalog\/category_attribute_source_sortby',\n    'backend'       => 'catalog\/category_attribute_backend_sortby',\n    'required'      => 1,\n    'global'        => Mage_Catalog_Model_Resource_Eav_Attribute::SCOPE_STORE,\n    'visible'       => 1,\n    'input_renderer'=> 'adminhtml\/catalog_category_helper_sortby_default',\n));\n\n\/\/ update attributes group and sort\n$attributes = array(\n    'custom_design'         => array(\n        'group' => 'design',\n        'sort'  => 10\n    ),\n    'custom_design_apply'   => array(\n        'group' => 'design',\n        'sort'  => 20\n    ),\n    'custom_design_from'    => array(\n        'group' => 'design',\n        'sort'  => 30\n    ),\n    'custom_design_to'      => array(\n        'group' => 'design',\n        'sort'  => 40\n    ),\n    'page_layout'           => array(\n        'group' => 'design',\n        'sort'  => 50\n    ),\n    'custom_layout_update'  => array(\n        'group' => 'design',\n        'sort'  => 60\n    ),\n    'display_mode'          => array(\n        'group' => 'display',\n        'sort'  => 10\n    ),\n    'landing_page'          => array(\n        'group' => 'display',\n        'sort'  => 20\n    ),\n    'is_anchor'             => array(\n        'group' => 'display',\n        'sort'  => 30\n    ),\n    'available_sort_by'     => array(\n        'group' => 'display',\n        'sort'  => 40\n    ),\n    'default_sort_by'       => array(\n        'group' => 'display',\n        'sort'  => 50\n    ),\n);\n\nforeach ($attributes as $attributeCode => $attributeProp) {\n    $installer->addAttributeToGroup(\n        $entityTypeId,\n        $attributeSetId,\n        $groups[$attributeProp['group']]['id'],\n        $attributeCode,\n        $attributeProp['sort']\n    );\n}\n*\/",30],["T_WHITESPACE","\n",153]]
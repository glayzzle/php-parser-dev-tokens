[["T_OPEN_TAG","<?php\n",1],["T_DOC_COMMENT","\/**\n * Magento\n *\n * NOTICE OF LICENSE\n *\n * This source file is subject to the Open Software License (OSL 3.0)\n * that is bundled with this package in the file LICENSE.txt.\n * It is also available through the world-wide-web at this URL:\n * http:\/\/opensource.org\/licenses\/osl-3.0.php\n * If you did not receive a copy of the license and are unable to\n * obtain it through the world-wide-web, please send an email\n * to license@magento.com so we can send you a copy immediately.\n *\n * DISCLAIMER\n *\n * Do not edit or add to this file if you wish to upgrade Magento to newer\n * versions in the future. If you wish to customize Magento for your\n * needs please refer to http:\/\/www.magento.com for more information.\n *\n * @category    Mage\n * @package     Mage_Catalog\n * @copyright  Copyright (c) 2006-2016 X.commerce, Inc. and affiliates (http:\/\/www.magento.com)\n * @license    http:\/\/opensource.org\/licenses\/osl-3.0.php  Open Software License (OSL 3.0)\n *\/",2],["T_WHITESPACE","\n\n",25],["T_DOC_COMMENT","\/**\n * Catalog image helper\n *\n * @author      Magento Core Team <core@magentocommerce.com>\n *\/",27],["T_WHITESPACE","\n",31],["T_CLASS","class",32],["T_WHITESPACE"," ",32],["T_STRING","Mage_Catalog_Helper_Image",32],["T_WHITESPACE"," ",32],["T_EXTENDS","extends",32],["T_WHITESPACE"," ",32],["T_STRING","Mage_Core_Helper_Abstract",32],["T_WHITESPACE","\n",32],"{",["T_WHITESPACE","\n    ",33],["T_CONST","const",34],["T_WHITESPACE"," ",34],["T_STRING","XML_NODE_PRODUCT_BASE_IMAGE_WIDTH",34],["T_WHITESPACE"," ",34],"=",["T_WHITESPACE"," ",34],["T_CONSTANT_ENCAPSED_STRING","'catalog\/product_image\/base_width'",34],";",["T_WHITESPACE","\n    ",34],["T_CONST","const",35],["T_WHITESPACE"," ",35],["T_STRING","XML_NODE_PRODUCT_SMALL_IMAGE_WIDTH",35],["T_WHITESPACE"," ",35],"=",["T_WHITESPACE"," ",35],["T_CONSTANT_ENCAPSED_STRING","'catalog\/product_image\/small_width'",35],";",["T_WHITESPACE","\n    ",35],["T_CONST","const",36],["T_WHITESPACE"," ",36],["T_STRING","XML_NODE_PRODUCT_MAX_DIMENSION",36],["T_WHITESPACE"," ",36],"=",["T_WHITESPACE"," ",36],["T_CONSTANT_ENCAPSED_STRING","'catalog\/product_image\/max_dimension'",36],";",["T_WHITESPACE","\n\n    ",36],["T_DOC_COMMENT","\/**\n     * Current model\n     *\n     * @var Mage_Catalog_Model_Product_Image\n     *\/",38],["T_WHITESPACE","\n    ",42],["T_PROTECTED","protected",43],["T_WHITESPACE"," ",43],["T_VARIABLE","$_model",43],";",["T_WHITESPACE","\n\n    ",43],["T_DOC_COMMENT","\/**\n     * Scheduled for resize image\n     *\n     * @var bool\n     *\/",45],["T_WHITESPACE","\n    ",49],["T_PROTECTED","protected",50],["T_WHITESPACE"," ",50],["T_VARIABLE","$_scheduleResize",50],["T_WHITESPACE"," ",50],"=",["T_WHITESPACE"," ",50],["T_STRING","false",50],";",["T_WHITESPACE","\n\n    ",50],["T_DOC_COMMENT","\/**\n     * Scheduled for rotate image\n     *\n     * @var bool\n     *\/",52],["T_WHITESPACE","\n    ",56],["T_PROTECTED","protected",57],["T_WHITESPACE"," ",57],["T_VARIABLE","$_scheduleRotate",57],["T_WHITESPACE"," ",57],"=",["T_WHITESPACE"," ",57],["T_STRING","false",57],";",["T_WHITESPACE","\n\n    ",57],["T_DOC_COMMENT","\/**\n     * Angle\n     *\n     * @var int\n     *\/",59],["T_WHITESPACE","\n    ",63],["T_PROTECTED","protected",64],["T_WHITESPACE"," ",64],["T_VARIABLE","$_angle",64],";",["T_WHITESPACE","\n\n    ",64],["T_DOC_COMMENT","\/**\n     * Watermark file name\n     *\n     * @var string\n     *\/",66],["T_WHITESPACE","\n    ",70],["T_PROTECTED","protected",71],["T_WHITESPACE"," ",71],["T_VARIABLE","$_watermark",71],";",["T_WHITESPACE","\n\n    ",71],["T_DOC_COMMENT","\/**\n     * Watermark Position\n     *\n     * @var string\n     *\/",73],["T_WHITESPACE","\n    ",77],["T_PROTECTED","protected",78],["T_WHITESPACE"," ",78],["T_VARIABLE","$_watermarkPosition",78],";",["T_WHITESPACE","\n\n    ",78],["T_DOC_COMMENT","\/**\n     * Watermark Size\n     *\n     * @var string\n     *\/",80],["T_WHITESPACE","\n    ",84],["T_PROTECTED","protected",85],["T_WHITESPACE"," ",85],["T_VARIABLE","$_watermarkSize",85],";",["T_WHITESPACE","\n\n    ",85],["T_DOC_COMMENT","\/**\n     * Watermark Image opacity\n     *\n     * @var int\n     *\/",87],["T_WHITESPACE","\n    ",91],["T_PROTECTED","protected",92],["T_WHITESPACE"," ",92],["T_VARIABLE","$_watermarkImageOpacity",92],";",["T_WHITESPACE","\n\n    ",92],["T_DOC_COMMENT","\/**\n     * Current Product\n     *\n     * @var Mage_Catalog_Model_Product\n     *\/",94],["T_WHITESPACE","\n    ",98],["T_PROTECTED","protected",99],["T_WHITESPACE"," ",99],["T_VARIABLE","$_product",99],";",["T_WHITESPACE","\n\n    ",99],["T_DOC_COMMENT","\/**\n     * Image File\n     *\n     * @var string\n     *\/",101],["T_WHITESPACE","\n    ",105],["T_PROTECTED","protected",106],["T_WHITESPACE"," ",106],["T_VARIABLE","$_imageFile",106],";",["T_WHITESPACE","\n\n    ",106],["T_DOC_COMMENT","\/**\n     * Image Placeholder\n     *\n     * @var string\n     *\/",108],["T_WHITESPACE","\n    ",112],["T_PROTECTED","protected",113],["T_WHITESPACE"," ",113],["T_VARIABLE","$_placeholder",113],";",["T_WHITESPACE","\n\n    ",113],["T_DOC_COMMENT","\/**\n     * Reset all previous data\n     *\n     * @return Mage_Catalog_Helper_Image\n     *\/",115],["T_WHITESPACE","\n    ",119],["T_PROTECTED","protected",120],["T_WHITESPACE"," ",120],["T_FUNCTION","function",120],["T_WHITESPACE"," ",120],["T_STRING","_reset",120],"(",")",["T_WHITESPACE","\n    ",120],"{",["T_WHITESPACE","\n        ",121],["T_VARIABLE","$this",122],["T_OBJECT_OPERATOR","->",122],["T_STRING","_model",122],["T_WHITESPACE"," ",122],"=",["T_WHITESPACE"," ",122],["T_STRING","null",122],";",["T_WHITESPACE","\n        ",122],["T_VARIABLE","$this",123],["T_OBJECT_OPERATOR","->",123],["T_STRING","_scheduleResize",123],["T_WHITESPACE"," ",123],"=",["T_WHITESPACE"," ",123],["T_STRING","false",123],";",["T_WHITESPACE","\n        ",123],["T_VARIABLE","$this",124],["T_OBJECT_OPERATOR","->",124],["T_STRING","_scheduleRotate",124],["T_WHITESPACE"," ",124],"=",["T_WHITESPACE"," ",124],["T_STRING","false",124],";",["T_WHITESPACE","\n        ",124],["T_VARIABLE","$this",125],["T_OBJECT_OPERATOR","->",125],["T_STRING","_angle",125],["T_WHITESPACE"," ",125],"=",["T_WHITESPACE"," ",125],["T_STRING","null",125],";",["T_WHITESPACE","\n        ",125],["T_VARIABLE","$this",126],["T_OBJECT_OPERATOR","->",126],["T_STRING","_watermark",126],["T_WHITESPACE"," ",126],"=",["T_WHITESPACE"," ",126],["T_STRING","null",126],";",["T_WHITESPACE","\n        ",126],["T_VARIABLE","$this",127],["T_OBJECT_OPERATOR","->",127],["T_STRING","_watermarkPosition",127],["T_WHITESPACE"," ",127],"=",["T_WHITESPACE"," ",127],["T_STRING","null",127],";",["T_WHITESPACE","\n        ",127],["T_VARIABLE","$this",128],["T_OBJECT_OPERATOR","->",128],["T_STRING","_watermarkSize",128],["T_WHITESPACE"," ",128],"=",["T_WHITESPACE"," ",128],["T_STRING","null",128],";",["T_WHITESPACE","\n        ",128],["T_VARIABLE","$this",129],["T_OBJECT_OPERATOR","->",129],["T_STRING","_watermarkImageOpacity",129],["T_WHITESPACE"," ",129],"=",["T_WHITESPACE"," ",129],["T_STRING","null",129],";",["T_WHITESPACE","\n        ",129],["T_VARIABLE","$this",130],["T_OBJECT_OPERATOR","->",130],["T_STRING","_product",130],["T_WHITESPACE"," ",130],"=",["T_WHITESPACE"," ",130],["T_STRING","null",130],";",["T_WHITESPACE","\n        ",130],["T_VARIABLE","$this",131],["T_OBJECT_OPERATOR","->",131],["T_STRING","_imageFile",131],["T_WHITESPACE"," ",131],"=",["T_WHITESPACE"," ",131],["T_STRING","null",131],";",["T_WHITESPACE","\n        ",131],["T_RETURN","return",132],["T_WHITESPACE"," ",132],["T_VARIABLE","$this",132],";",["T_WHITESPACE","\n    ",132],"}",["T_WHITESPACE","\n\n    ",133],["T_DOC_COMMENT","\/**\n     * Initialize Helper to work with Image\n     *\n     * @param Mage_Catalog_Model_Product $product\n     * @param string $attributeName\n     * @param mixed $imageFile\n     * @return Mage_Catalog_Helper_Image\n     *\/",135],["T_WHITESPACE","\n    ",142],["T_PUBLIC","public",143],["T_WHITESPACE"," ",143],["T_FUNCTION","function",143],["T_WHITESPACE"," ",143],["T_STRING","init",143],"(",["T_STRING","Mage_Catalog_Model_Product",143],["T_WHITESPACE"," ",143],["T_VARIABLE","$product",143],",",["T_WHITESPACE"," ",143],["T_VARIABLE","$attributeName",143],",",["T_WHITESPACE"," ",143],["T_VARIABLE","$imageFile",143],"=",["T_STRING","null",143],")",["T_WHITESPACE","\n    ",143],"{",["T_WHITESPACE","\n        ",144],["T_VARIABLE","$this",145],["T_OBJECT_OPERATOR","->",145],["T_STRING","_reset",145],"(",")",";",["T_WHITESPACE","\n        ",145],["T_VARIABLE","$this",146],["T_OBJECT_OPERATOR","->",146],["T_STRING","_setModel",146],"(",["T_STRING","Mage",146],["T_DOUBLE_COLON","::",146],["T_STRING","getModel",146],"(",["T_CONSTANT_ENCAPSED_STRING","'catalog\/product_image'",146],")",")",";",["T_WHITESPACE","\n        ",146],["T_VARIABLE","$this",147],["T_OBJECT_OPERATOR","->",147],["T_STRING","_getModel",147],"(",")",["T_OBJECT_OPERATOR","->",147],["T_STRING","setDestinationSubdir",147],"(",["T_VARIABLE","$attributeName",147],")",";",["T_WHITESPACE","\n        ",147],["T_VARIABLE","$this",148],["T_OBJECT_OPERATOR","->",148],["T_STRING","setProduct",148],"(",["T_VARIABLE","$product",148],")",";",["T_WHITESPACE","\n\n        ",148],["T_VARIABLE","$this",150],["T_OBJECT_OPERATOR","->",150],["T_STRING","setWatermark",150],"(",["T_WHITESPACE","\n            ",150],["T_STRING","Mage",151],["T_DOUBLE_COLON","::",151],["T_STRING","getStoreConfig",151],"(","\"",["T_ENCAPSED_AND_WHITESPACE","design\/watermark\/",151],["T_CURLY_OPEN","{",151],["T_VARIABLE","$this",151],["T_OBJECT_OPERATOR","->",151],["T_STRING","_getModel",151],"(",")",["T_OBJECT_OPERATOR","->",151],["T_STRING","getDestinationSubdir",151],"(",")","}",["T_ENCAPSED_AND_WHITESPACE","_image",151],"\"",")",["T_WHITESPACE","\n        ",151],")",";",["T_WHITESPACE","\n        ",152],["T_VARIABLE","$this",153],["T_OBJECT_OPERATOR","->",153],["T_STRING","setWatermarkImageOpacity",153],"(",["T_WHITESPACE","\n            ",153],["T_STRING","Mage",154],["T_DOUBLE_COLON","::",154],["T_STRING","getStoreConfig",154],"(","\"",["T_ENCAPSED_AND_WHITESPACE","design\/watermark\/",154],["T_CURLY_OPEN","{",154],["T_VARIABLE","$this",154],["T_OBJECT_OPERATOR","->",154],["T_STRING","_getModel",154],"(",")",["T_OBJECT_OPERATOR","->",154],["T_STRING","getDestinationSubdir",154],"(",")","}",["T_ENCAPSED_AND_WHITESPACE","_imageOpacity",154],"\"",")",["T_WHITESPACE","\n        ",154],")",";",["T_WHITESPACE","\n        ",155],["T_VARIABLE","$this",156],["T_OBJECT_OPERATOR","->",156],["T_STRING","setWatermarkPosition",156],"(",["T_WHITESPACE","\n            ",156],["T_STRING","Mage",157],["T_DOUBLE_COLON","::",157],["T_STRING","getStoreConfig",157],"(","\"",["T_ENCAPSED_AND_WHITESPACE","design\/watermark\/",157],["T_CURLY_OPEN","{",157],["T_VARIABLE","$this",157],["T_OBJECT_OPERATOR","->",157],["T_STRING","_getModel",157],"(",")",["T_OBJECT_OPERATOR","->",157],["T_STRING","getDestinationSubdir",157],"(",")","}",["T_ENCAPSED_AND_WHITESPACE","_position",157],"\"",")",["T_WHITESPACE","\n        ",157],")",";",["T_WHITESPACE","\n        ",158],["T_VARIABLE","$this",159],["T_OBJECT_OPERATOR","->",159],["T_STRING","setWatermarkSize",159],"(",["T_WHITESPACE","\n            ",159],["T_STRING","Mage",160],["T_DOUBLE_COLON","::",160],["T_STRING","getStoreConfig",160],"(","\"",["T_ENCAPSED_AND_WHITESPACE","design\/watermark\/",160],["T_CURLY_OPEN","{",160],["T_VARIABLE","$this",160],["T_OBJECT_OPERATOR","->",160],["T_STRING","_getModel",160],"(",")",["T_OBJECT_OPERATOR","->",160],["T_STRING","getDestinationSubdir",160],"(",")","}",["T_ENCAPSED_AND_WHITESPACE","_size",160],"\"",")",["T_WHITESPACE","\n        ",160],")",";",["T_WHITESPACE","\n\n        ",161],["T_IF","if",163],["T_WHITESPACE"," ",163],"(",["T_VARIABLE","$imageFile",163],")",["T_WHITESPACE"," ",163],"{",["T_WHITESPACE","\n            ",163],["T_VARIABLE","$this",164],["T_OBJECT_OPERATOR","->",164],["T_STRING","setImageFile",164],"(",["T_VARIABLE","$imageFile",164],")",";",["T_WHITESPACE","\n        ",164],"}",["T_WHITESPACE"," ",165],["T_ELSE","else",165],["T_WHITESPACE"," ",165],"{",["T_WHITESPACE","\n            ",165],["T_COMMENT","\/\/ add for work original size\n",166],["T_WHITESPACE","            ",167],["T_VARIABLE","$this",167],["T_OBJECT_OPERATOR","->",167],["T_STRING","_getModel",167],"(",")",["T_OBJECT_OPERATOR","->",167],["T_STRING","setBaseFile",167],"(",["T_VARIABLE","$this",167],["T_OBJECT_OPERATOR","->",167],["T_STRING","getProduct",167],"(",")",["T_OBJECT_OPERATOR","->",167],["T_STRING","getData",167],"(",["T_VARIABLE","$this",167],["T_OBJECT_OPERATOR","->",167],["T_STRING","_getModel",167],"(",")",["T_OBJECT_OPERATOR","->",167],["T_STRING","getDestinationSubdir",167],"(",")",")",")",";",["T_WHITESPACE","\n        ",167],"}",["T_WHITESPACE","\n        ",168],["T_RETURN","return",169],["T_WHITESPACE"," ",169],["T_VARIABLE","$this",169],";",["T_WHITESPACE","\n    ",169],"}",["T_WHITESPACE","\n\n    ",170],["T_DOC_COMMENT","\/**\n     * Schedule resize of the image\n     * $width *or* $height can be null - in this case, lacking dimension will be calculated.\n     *\n     * @see Mage_Catalog_Model_Product_Image\n     * @param int $width\n     * @param int $height\n     * @return Mage_Catalog_Helper_Image\n     *\/",172],["T_WHITESPACE","\n    ",180],["T_PUBLIC","public",181],["T_WHITESPACE"," ",181],["T_FUNCTION","function",181],["T_WHITESPACE"," ",181],["T_STRING","resize",181],"(",["T_VARIABLE","$width",181],",",["T_WHITESPACE"," ",181],["T_VARIABLE","$height",181],["T_WHITESPACE"," ",181],"=",["T_WHITESPACE"," ",181],["T_STRING","null",181],")",["T_WHITESPACE","\n    ",181],"{",["T_WHITESPACE","\n        ",182],["T_VARIABLE","$this",183],["T_OBJECT_OPERATOR","->",183],["T_STRING","_getModel",183],"(",")",["T_OBJECT_OPERATOR","->",183],["T_STRING","setWidth",183],"(",["T_VARIABLE","$width",183],")",["T_OBJECT_OPERATOR","->",183],["T_STRING","setHeight",183],"(",["T_VARIABLE","$height",183],")",";",["T_WHITESPACE","\n        ",183],["T_VARIABLE","$this",184],["T_OBJECT_OPERATOR","->",184],["T_STRING","_scheduleResize",184],["T_WHITESPACE"," ",184],"=",["T_WHITESPACE"," ",184],["T_STRING","true",184],";",["T_WHITESPACE","\n        ",184],["T_RETURN","return",185],["T_WHITESPACE"," ",185],["T_VARIABLE","$this",185],";",["T_WHITESPACE","\n    ",185],"}",["T_WHITESPACE","\n\n    ",186],["T_DOC_COMMENT","\/**\n     * Set image quality, values in percentage from 0 to 100\n     *\n     * @param int $quality\n     * @return Mage_Catalog_Helper_Image\n     *\/",188],["T_WHITESPACE","\n    ",193],["T_PUBLIC","public",194],["T_WHITESPACE"," ",194],["T_FUNCTION","function",194],["T_WHITESPACE"," ",194],["T_STRING","setQuality",194],"(",["T_VARIABLE","$quality",194],")",["T_WHITESPACE","\n    ",194],"{",["T_WHITESPACE","\n        ",195],["T_VARIABLE","$this",196],["T_OBJECT_OPERATOR","->",196],["T_STRING","_getModel",196],"(",")",["T_OBJECT_OPERATOR","->",196],["T_STRING","setQuality",196],"(",["T_VARIABLE","$quality",196],")",";",["T_WHITESPACE","\n        ",196],["T_RETURN","return",197],["T_WHITESPACE"," ",197],["T_VARIABLE","$this",197],";",["T_WHITESPACE","\n    ",197],"}",["T_WHITESPACE","\n\n    ",198],["T_DOC_COMMENT","\/**\n     * Guarantee, that image picture width\/height will not be distorted.\n     * Applicable before calling resize()\n     * It is true by default.\n     *\n     * @see Mage_Catalog_Model_Product_Image\n     * @param bool $flag\n     * @return Mage_Catalog_Helper_Image\n     *\/",200],["T_WHITESPACE","\n    ",208],["T_PUBLIC","public",209],["T_WHITESPACE"," ",209],["T_FUNCTION","function",209],["T_WHITESPACE"," ",209],["T_STRING","keepAspectRatio",209],"(",["T_VARIABLE","$flag",209],")",["T_WHITESPACE","\n    ",209],"{",["T_WHITESPACE","\n        ",210],["T_VARIABLE","$this",211],["T_OBJECT_OPERATOR","->",211],["T_STRING","_getModel",211],"(",")",["T_OBJECT_OPERATOR","->",211],["T_STRING","setKeepAspectRatio",211],"(",["T_VARIABLE","$flag",211],")",";",["T_WHITESPACE","\n        ",211],["T_RETURN","return",212],["T_WHITESPACE"," ",212],["T_VARIABLE","$this",212],";",["T_WHITESPACE","\n    ",212],"}",["T_WHITESPACE","\n\n    ",213],["T_DOC_COMMENT","\/**\n     * Guarantee, that image will have dimensions, set in $width\/$height\n     * Applicable before calling resize()\n     * Not applicable, if keepAspectRatio(false)\n     *\n     * $position - TODO, not used for now - picture position inside the frame.\n     *\n     * @see Mage_Catalog_Model_Product_Image\n     * @param bool $flag\n     * @param array $position\n     * @return Mage_Catalog_Helper_Image\n     *\/",215],["T_WHITESPACE","\n    ",226],["T_PUBLIC","public",227],["T_WHITESPACE"," ",227],["T_FUNCTION","function",227],["T_WHITESPACE"," ",227],["T_STRING","keepFrame",227],"(",["T_VARIABLE","$flag",227],",",["T_WHITESPACE"," ",227],["T_VARIABLE","$position",227],["T_WHITESPACE"," ",227],"=",["T_WHITESPACE"," ",227],["T_ARRAY","array",227],"(",["T_CONSTANT_ENCAPSED_STRING","'center'",227],",",["T_WHITESPACE"," ",227],["T_CONSTANT_ENCAPSED_STRING","'middle'",227],")",")",["T_WHITESPACE","\n    ",227],"{",["T_WHITESPACE","\n        ",228],["T_VARIABLE","$this",229],["T_OBJECT_OPERATOR","->",229],["T_STRING","_getModel",229],"(",")",["T_OBJECT_OPERATOR","->",229],["T_STRING","setKeepFrame",229],"(",["T_VARIABLE","$flag",229],")",";",["T_WHITESPACE","\n        ",229],["T_RETURN","return",230],["T_WHITESPACE"," ",230],["T_VARIABLE","$this",230],";",["T_WHITESPACE","\n    ",230],"}",["T_WHITESPACE","\n\n    ",231],["T_DOC_COMMENT","\/**\n     * Guarantee, that image will not lose transparency if any.\n     * Applicable before calling resize()\n     * It is true by default.\n     *\n     * $alphaOpacity - TODO, not used for now\n     *\n     * @see Mage_Catalog_Model_Product_Image\n     * @param bool $flag\n     * @param int $alphaOpacity\n     * @return Mage_Catalog_Helper_Image\n     *\/",233],["T_WHITESPACE","\n    ",244],["T_PUBLIC","public",245],["T_WHITESPACE"," ",245],["T_FUNCTION","function",245],["T_WHITESPACE"," ",245],["T_STRING","keepTransparency",245],"(",["T_VARIABLE","$flag",245],",",["T_WHITESPACE"," ",245],["T_VARIABLE","$alphaOpacity",245],["T_WHITESPACE"," ",245],"=",["T_WHITESPACE"," ",245],["T_STRING","null",245],")",["T_WHITESPACE","\n    ",245],"{",["T_WHITESPACE","\n        ",246],["T_VARIABLE","$this",247],["T_OBJECT_OPERATOR","->",247],["T_STRING","_getModel",247],"(",")",["T_OBJECT_OPERATOR","->",247],["T_STRING","setKeepTransparency",247],"(",["T_VARIABLE","$flag",247],")",";",["T_WHITESPACE","\n        ",247],["T_RETURN","return",248],["T_WHITESPACE"," ",248],["T_VARIABLE","$this",248],";",["T_WHITESPACE","\n    ",248],"}",["T_WHITESPACE","\n\n    ",249],["T_DOC_COMMENT","\/**\n     * Guarantee, that image picture will not be bigger, than it was.\n     * Applicable before calling resize()\n     * It is false by default\n     *\n     * @param bool $flag\n     * @return Mage_Catalog_Helper_Image\n     *\/",251],["T_WHITESPACE","\n    ",258],["T_PUBLIC","public",259],["T_WHITESPACE"," ",259],["T_FUNCTION","function",259],["T_WHITESPACE"," ",259],["T_STRING","constrainOnly",259],"(",["T_VARIABLE","$flag",259],")",["T_WHITESPACE","\n    ",259],"{",["T_WHITESPACE","\n        ",260],["T_VARIABLE","$this",261],["T_OBJECT_OPERATOR","->",261],["T_STRING","_getModel",261],"(",")",["T_OBJECT_OPERATOR","->",261],["T_STRING","setConstrainOnly",261],"(",["T_VARIABLE","$flag",261],")",";",["T_WHITESPACE","\n        ",261],["T_RETURN","return",262],["T_WHITESPACE"," ",262],["T_VARIABLE","$this",262],";",["T_WHITESPACE","\n    ",262],"}",["T_WHITESPACE","\n\n    ",263],["T_DOC_COMMENT","\/**\n     * Set color to fill image frame with.\n     * Applicable before calling resize()\n     * The keepTransparency(true) overrides this (if image has transparent color)\n     * It is white by default.\n     *\n     * @see Mage_Catalog_Model_Product_Image\n     * @param array $colorRGB\n     * @return Mage_Catalog_Helper_Image\n     *\/",265],["T_WHITESPACE","\n    ",274],["T_PUBLIC","public",275],["T_WHITESPACE"," ",275],["T_FUNCTION","function",275],["T_WHITESPACE"," ",275],["T_STRING","backgroundColor",275],"(",["T_VARIABLE","$colorRGB",275],")",["T_WHITESPACE","\n    ",275],"{",["T_WHITESPACE","\n        ",276],["T_COMMENT","\/\/ assume that 3 params were given instead of array\n",277],["T_WHITESPACE","        ",278],["T_IF","if",278],["T_WHITESPACE"," ",278],"(","!",["T_STRING","is_array",278],"(",["T_VARIABLE","$colorRGB",278],")",")",["T_WHITESPACE"," ",278],"{",["T_WHITESPACE","\n            ",278],["T_VARIABLE","$colorRGB",279],["T_WHITESPACE"," ",279],"=",["T_WHITESPACE"," ",279],["T_STRING","func_get_args",279],"(",")",";",["T_WHITESPACE","\n        ",279],"}",["T_WHITESPACE","\n        ",280],["T_VARIABLE","$this",281],["T_OBJECT_OPERATOR","->",281],["T_STRING","_getModel",281],"(",")",["T_OBJECT_OPERATOR","->",281],["T_STRING","setBackgroundColor",281],"(",["T_VARIABLE","$colorRGB",281],")",";",["T_WHITESPACE","\n        ",281],["T_RETURN","return",282],["T_WHITESPACE"," ",282],["T_VARIABLE","$this",282],";",["T_WHITESPACE","\n    ",282],"}",["T_WHITESPACE","\n\n    ",283],["T_DOC_COMMENT","\/**\n     * Rotate image into specified angle\n     *\n     * @param int $angle\n     * @return Mage_Catalog_Helper_Image\n     *\/",285],["T_WHITESPACE","\n    ",290],["T_PUBLIC","public",291],["T_WHITESPACE"," ",291],["T_FUNCTION","function",291],["T_WHITESPACE"," ",291],["T_STRING","rotate",291],"(",["T_VARIABLE","$angle",291],")",["T_WHITESPACE","\n    ",291],"{",["T_WHITESPACE","\n        ",292],["T_VARIABLE","$this",293],["T_OBJECT_OPERATOR","->",293],["T_STRING","setAngle",293],"(",["T_VARIABLE","$angle",293],")",";",["T_WHITESPACE","\n        ",293],["T_VARIABLE","$this",294],["T_OBJECT_OPERATOR","->",294],["T_STRING","_getModel",294],"(",")",["T_OBJECT_OPERATOR","->",294],["T_STRING","setAngle",294],"(",["T_VARIABLE","$angle",294],")",";",["T_WHITESPACE","\n        ",294],["T_VARIABLE","$this",295],["T_OBJECT_OPERATOR","->",295],["T_STRING","_scheduleRotate",295],["T_WHITESPACE"," ",295],"=",["T_WHITESPACE"," ",295],["T_STRING","true",295],";",["T_WHITESPACE","\n        ",295],["T_RETURN","return",296],["T_WHITESPACE"," ",296],["T_VARIABLE","$this",296],";",["T_WHITESPACE","\n    ",296],"}",["T_WHITESPACE","\n\n    ",297],["T_DOC_COMMENT","\/**\n     * Add watermark to image\n     * size param in format 100x200\n     *\n     * @param string $fileName\n     * @param string $position\n     * @param string $size\n     * @param int $imageOpacity\n     * @return Mage_Catalog_Helper_Image\n     *\/",299],["T_WHITESPACE","\n    ",308],["T_PUBLIC","public",309],["T_WHITESPACE"," ",309],["T_FUNCTION","function",309],["T_WHITESPACE"," ",309],["T_STRING","watermark",309],"(",["T_VARIABLE","$fileName",309],",",["T_WHITESPACE"," ",309],["T_VARIABLE","$position",309],",",["T_WHITESPACE"," ",309],["T_VARIABLE","$size",309],"=",["T_STRING","null",309],",",["T_WHITESPACE"," ",309],["T_VARIABLE","$imageOpacity",309],"=",["T_STRING","null",309],")",["T_WHITESPACE","\n    ",309],"{",["T_WHITESPACE","\n        ",310],["T_VARIABLE","$this",311],["T_OBJECT_OPERATOR","->",311],["T_STRING","setWatermark",311],"(",["T_VARIABLE","$fileName",311],")",["T_WHITESPACE","\n            ",311],["T_OBJECT_OPERATOR","->",312],["T_STRING","setWatermarkPosition",312],"(",["T_VARIABLE","$position",312],")",["T_WHITESPACE","\n            ",312],["T_OBJECT_OPERATOR","->",313],["T_STRING","setWatermarkSize",313],"(",["T_VARIABLE","$size",313],")",["T_WHITESPACE","\n            ",313],["T_OBJECT_OPERATOR","->",314],["T_STRING","setWatermarkImageOpacity",314],"(",["T_VARIABLE","$imageOpacity",314],")",";",["T_WHITESPACE","\n        ",314],["T_RETURN","return",315],["T_WHITESPACE"," ",315],["T_VARIABLE","$this",315],";",["T_WHITESPACE","\n    ",315],"}",["T_WHITESPACE","\n\n    ",316],["T_DOC_COMMENT","\/**\n     * Set placeholder\n     *\n     * @param string $fileName\n     * @return void\n     *\/",318],["T_WHITESPACE","\n    ",323],["T_PUBLIC","public",324],["T_WHITESPACE"," ",324],["T_FUNCTION","function",324],["T_WHITESPACE"," ",324],["T_STRING","placeholder",324],"(",["T_VARIABLE","$fileName",324],")",["T_WHITESPACE","\n    ",324],"{",["T_WHITESPACE","\n        ",325],["T_VARIABLE","$this",326],["T_OBJECT_OPERATOR","->",326],["T_STRING","_placeholder",326],["T_WHITESPACE"," ",326],"=",["T_WHITESPACE"," ",326],["T_VARIABLE","$fileName",326],";",["T_WHITESPACE","\n    ",326],"}",["T_WHITESPACE","\n\n    ",327],["T_DOC_COMMENT","\/**\n     * Get Placeholder\n     *\n     * @return string\n     *\/",329],["T_WHITESPACE","\n    ",333],["T_PUBLIC","public",334],["T_WHITESPACE"," ",334],["T_FUNCTION","function",334],["T_WHITESPACE"," ",334],["T_STRING","getPlaceholder",334],"(",")",["T_WHITESPACE","\n    ",334],"{",["T_WHITESPACE","\n        ",335],["T_IF","if",336],["T_WHITESPACE"," ",336],"(","!",["T_VARIABLE","$this",336],["T_OBJECT_OPERATOR","->",336],["T_STRING","_placeholder",336],")",["T_WHITESPACE"," ",336],"{",["T_WHITESPACE","\n            ",336],["T_VARIABLE","$attr",337],["T_WHITESPACE"," ",337],"=",["T_WHITESPACE"," ",337],["T_VARIABLE","$this",337],["T_OBJECT_OPERATOR","->",337],["T_STRING","_getModel",337],"(",")",["T_OBJECT_OPERATOR","->",337],["T_STRING","getDestinationSubdir",337],"(",")",";",["T_WHITESPACE","\n            ",337],["T_VARIABLE","$this",338],["T_OBJECT_OPERATOR","->",338],["T_STRING","_placeholder",338],["T_WHITESPACE"," ",338],"=",["T_WHITESPACE"," ",338],["T_CONSTANT_ENCAPSED_STRING","'images\/catalog\/product\/placeholder\/'",338],".",["T_VARIABLE","$attr",338],".",["T_CONSTANT_ENCAPSED_STRING","'.jpg'",338],";",["T_WHITESPACE","\n        ",338],"}",["T_WHITESPACE","\n        ",339],["T_RETURN","return",340],["T_WHITESPACE"," ",340],["T_VARIABLE","$this",340],["T_OBJECT_OPERATOR","->",340],["T_STRING","_placeholder",340],";",["T_WHITESPACE","\n    ",340],"}",["T_WHITESPACE","\n\n    ",341],["T_DOC_COMMENT","\/**\n     * Return Image URL\n     *\n     * @return string\n     *\/",343],["T_WHITESPACE","\n    ",347],["T_PUBLIC","public",348],["T_WHITESPACE"," ",348],["T_FUNCTION","function",348],["T_WHITESPACE"," ",348],["T_STRING","__toString",348],"(",")",["T_WHITESPACE","\n    ",348],"{",["T_WHITESPACE","\n        ",349],["T_TRY","try",350],["T_WHITESPACE"," ",350],"{",["T_WHITESPACE","\n            ",350],["T_VARIABLE","$model",351],["T_WHITESPACE"," ",351],"=",["T_WHITESPACE"," ",351],["T_VARIABLE","$this",351],["T_OBJECT_OPERATOR","->",351],["T_STRING","_getModel",351],"(",")",";",["T_WHITESPACE","\n\n            ",351],["T_IF","if",353],["T_WHITESPACE"," ",353],"(",["T_VARIABLE","$this",353],["T_OBJECT_OPERATOR","->",353],["T_STRING","getImageFile",353],"(",")",")",["T_WHITESPACE"," ",353],"{",["T_WHITESPACE","\n                ",353],["T_VARIABLE","$model",354],["T_OBJECT_OPERATOR","->",354],["T_STRING","setBaseFile",354],"(",["T_VARIABLE","$this",354],["T_OBJECT_OPERATOR","->",354],["T_STRING","getImageFile",354],"(",")",")",";",["T_WHITESPACE","\n            ",354],"}",["T_WHITESPACE"," ",355],["T_ELSE","else",355],["T_WHITESPACE"," ",355],"{",["T_WHITESPACE","\n                ",355],["T_VARIABLE","$model",356],["T_OBJECT_OPERATOR","->",356],["T_STRING","setBaseFile",356],"(",["T_VARIABLE","$this",356],["T_OBJECT_OPERATOR","->",356],["T_STRING","getProduct",356],"(",")",["T_OBJECT_OPERATOR","->",356],["T_STRING","getData",356],"(",["T_VARIABLE","$model",356],["T_OBJECT_OPERATOR","->",356],["T_STRING","getDestinationSubdir",356],"(",")",")",")",";",["T_WHITESPACE","\n            ",356],"}",["T_WHITESPACE","\n\n            ",357],["T_IF","if",359],["T_WHITESPACE"," ",359],"(",["T_VARIABLE","$model",359],["T_OBJECT_OPERATOR","->",359],["T_STRING","isCached",359],"(",")",")",["T_WHITESPACE"," ",359],"{",["T_WHITESPACE","\n                ",359],["T_RETURN","return",360],["T_WHITESPACE"," ",360],["T_VARIABLE","$model",360],["T_OBJECT_OPERATOR","->",360],["T_STRING","getUrl",360],"(",")",";",["T_WHITESPACE","\n            ",360],"}",["T_WHITESPACE"," ",361],["T_ELSE","else",361],["T_WHITESPACE"," ",361],"{",["T_WHITESPACE","\n                ",361],["T_IF","if",362],["T_WHITESPACE"," ",362],"(",["T_VARIABLE","$this",362],["T_OBJECT_OPERATOR","->",362],["T_STRING","_scheduleRotate",362],")",["T_WHITESPACE"," ",362],"{",["T_WHITESPACE","\n                    ",362],["T_VARIABLE","$model",363],["T_OBJECT_OPERATOR","->",363],["T_STRING","rotate",363],"(",["T_VARIABLE","$this",363],["T_OBJECT_OPERATOR","->",363],["T_STRING","getAngle",363],"(",")",")",";",["T_WHITESPACE","\n                ",363],"}",["T_WHITESPACE","\n\n                ",364],["T_IF","if",366],["T_WHITESPACE"," ",366],"(",["T_VARIABLE","$this",366],["T_OBJECT_OPERATOR","->",366],["T_STRING","_scheduleResize",366],")",["T_WHITESPACE"," ",366],"{",["T_WHITESPACE","\n                    ",366],["T_VARIABLE","$model",367],["T_OBJECT_OPERATOR","->",367],["T_STRING","resize",367],"(",")",";",["T_WHITESPACE","\n                ",367],"}",["T_WHITESPACE","\n\n                ",368],["T_IF","if",370],["T_WHITESPACE"," ",370],"(",["T_VARIABLE","$this",370],["T_OBJECT_OPERATOR","->",370],["T_STRING","getWatermark",370],"(",")",")",["T_WHITESPACE"," ",370],"{",["T_WHITESPACE","\n                    ",370],["T_VARIABLE","$model",371],["T_OBJECT_OPERATOR","->",371],["T_STRING","setWatermark",371],"(",["T_VARIABLE","$this",371],["T_OBJECT_OPERATOR","->",371],["T_STRING","getWatermark",371],"(",")",")",";",["T_WHITESPACE","\n                ",371],"}",["T_WHITESPACE","\n\n                ",372],["T_VARIABLE","$url",374],["T_WHITESPACE"," ",374],"=",["T_WHITESPACE"," ",374],["T_VARIABLE","$model",374],["T_OBJECT_OPERATOR","->",374],["T_STRING","saveFile",374],"(",")",["T_OBJECT_OPERATOR","->",374],["T_STRING","getUrl",374],"(",")",";",["T_WHITESPACE","\n            ",374],"}",["T_WHITESPACE","\n        ",375],"}",["T_WHITESPACE"," ",376],["T_CATCH","catch",376],["T_WHITESPACE"," ",376],"(",["T_STRING","Exception",376],["T_WHITESPACE"," ",376],["T_VARIABLE","$e",376],")",["T_WHITESPACE"," ",376],"{",["T_WHITESPACE","\n            ",376],["T_VARIABLE","$url",377],["T_WHITESPACE"," ",377],"=",["T_WHITESPACE"," ",377],["T_STRING","Mage",377],["T_DOUBLE_COLON","::",377],["T_STRING","getDesign",377],"(",")",["T_OBJECT_OPERATOR","->",377],["T_STRING","getSkinUrl",377],"(",["T_VARIABLE","$this",377],["T_OBJECT_OPERATOR","->",377],["T_STRING","getPlaceholder",377],"(",")",")",";",["T_WHITESPACE","\n        ",377],"}",["T_WHITESPACE","\n        ",378],["T_RETURN","return",379],["T_WHITESPACE"," ",379],["T_VARIABLE","$url",379],";",["T_WHITESPACE","\n    ",379],"}",["T_WHITESPACE","\n\n    ",380],["T_DOC_COMMENT","\/**\n     * Set current Image model\n     *\n     * @param Mage_Catalog_Model_Product_Image $model\n     * @return Mage_Catalog_Helper_Image\n     *\/",382],["T_WHITESPACE","\n    ",387],["T_PROTECTED","protected",388],["T_WHITESPACE"," ",388],["T_FUNCTION","function",388],["T_WHITESPACE"," ",388],["T_STRING","_setModel",388],"(",["T_VARIABLE","$model",388],")",["T_WHITESPACE","\n    ",388],"{",["T_WHITESPACE","\n        ",389],["T_VARIABLE","$this",390],["T_OBJECT_OPERATOR","->",390],["T_STRING","_model",390],["T_WHITESPACE"," ",390],"=",["T_WHITESPACE"," ",390],["T_VARIABLE","$model",390],";",["T_WHITESPACE","\n        ",390],["T_RETURN","return",391],["T_WHITESPACE"," ",391],["T_VARIABLE","$this",391],";",["T_WHITESPACE","\n    ",391],"}",["T_WHITESPACE","\n\n    ",392],["T_DOC_COMMENT","\/**\n     * Get current Image model\n     *\n     * @return Mage_Catalog_Model_Product_Image\n     *\/",394],["T_WHITESPACE","\n    ",398],["T_PROTECTED","protected",399],["T_WHITESPACE"," ",399],["T_FUNCTION","function",399],["T_WHITESPACE"," ",399],["T_STRING","_getModel",399],"(",")",["T_WHITESPACE","\n    ",399],"{",["T_WHITESPACE","\n        ",400],["T_RETURN","return",401],["T_WHITESPACE"," ",401],["T_VARIABLE","$this",401],["T_OBJECT_OPERATOR","->",401],["T_STRING","_model",401],";",["T_WHITESPACE","\n    ",401],"}",["T_WHITESPACE","\n\n    ",402],["T_DOC_COMMENT","\/**\n     * Set Rotation Angle\n     *\n     * @param int $angle\n     * @return Mage_Catalog_Helper_Image\n     *\/",404],["T_WHITESPACE","\n    ",409],["T_PROTECTED","protected",410],["T_WHITESPACE"," ",410],["T_FUNCTION","function",410],["T_WHITESPACE"," ",410],["T_STRING","setAngle",410],"(",["T_VARIABLE","$angle",410],")",["T_WHITESPACE","\n    ",410],"{",["T_WHITESPACE","\n        ",411],["T_VARIABLE","$this",412],["T_OBJECT_OPERATOR","->",412],["T_STRING","_angle",412],["T_WHITESPACE"," ",412],"=",["T_WHITESPACE"," ",412],["T_VARIABLE","$angle",412],";",["T_WHITESPACE","\n        ",412],["T_RETURN","return",413],["T_WHITESPACE"," ",413],["T_VARIABLE","$this",413],";",["T_WHITESPACE","\n    ",413],"}",["T_WHITESPACE","\n\n    ",414],["T_DOC_COMMENT","\/**\n     * Get Rotation Angle\n     *\n     * @return int\n     *\/",416],["T_WHITESPACE","\n    ",420],["T_PROTECTED","protected",421],["T_WHITESPACE"," ",421],["T_FUNCTION","function",421],["T_WHITESPACE"," ",421],["T_STRING","getAngle",421],"(",")",["T_WHITESPACE","\n    ",421],"{",["T_WHITESPACE","\n        ",422],["T_RETURN","return",423],["T_WHITESPACE"," ",423],["T_VARIABLE","$this",423],["T_OBJECT_OPERATOR","->",423],["T_STRING","_angle",423],";",["T_WHITESPACE","\n    ",423],"}",["T_WHITESPACE","\n\n    ",424],["T_DOC_COMMENT","\/**\n     * Set watermark file name\n     *\n     * @param string $watermark\n     * @return Mage_Catalog_Helper_Image\n     *\/",426],["T_WHITESPACE","\n    ",431],["T_PROTECTED","protected",432],["T_WHITESPACE"," ",432],["T_FUNCTION","function",432],["T_WHITESPACE"," ",432],["T_STRING","setWatermark",432],"(",["T_VARIABLE","$watermark",432],")",["T_WHITESPACE","\n    ",432],"{",["T_WHITESPACE","\n        ",433],["T_VARIABLE","$this",434],["T_OBJECT_OPERATOR","->",434],["T_STRING","_watermark",434],["T_WHITESPACE"," ",434],"=",["T_WHITESPACE"," ",434],["T_VARIABLE","$watermark",434],";",["T_WHITESPACE","\n        ",434],["T_VARIABLE","$this",435],["T_OBJECT_OPERATOR","->",435],["T_STRING","_getModel",435],"(",")",["T_OBJECT_OPERATOR","->",435],["T_STRING","setWatermarkFile",435],"(",["T_VARIABLE","$watermark",435],")",";",["T_WHITESPACE","\n        ",435],["T_RETURN","return",436],["T_WHITESPACE"," ",436],["T_VARIABLE","$this",436],";",["T_WHITESPACE","\n    ",436],"}",["T_WHITESPACE","\n\n    ",437],["T_DOC_COMMENT","\/**\n     * Get watermark file name\n     *\n     * @return string\n     *\/",439],["T_WHITESPACE","\n    ",443],["T_PROTECTED","protected",444],["T_WHITESPACE"," ",444],["T_FUNCTION","function",444],["T_WHITESPACE"," ",444],["T_STRING","getWatermark",444],"(",")",["T_WHITESPACE","\n    ",444],"{",["T_WHITESPACE","\n        ",445],["T_RETURN","return",446],["T_WHITESPACE"," ",446],["T_VARIABLE","$this",446],["T_OBJECT_OPERATOR","->",446],["T_STRING","_watermark",446],";",["T_WHITESPACE","\n    ",446],"}",["T_WHITESPACE","\n\n    ",447],["T_DOC_COMMENT","\/**\n     * Set watermark position\n     *\n     * @param string $position\n     * @return Mage_Catalog_Helper_Image\n     *\/",449],["T_WHITESPACE","\n    ",454],["T_PROTECTED","protected",455],["T_WHITESPACE"," ",455],["T_FUNCTION","function",455],["T_WHITESPACE"," ",455],["T_STRING","setWatermarkPosition",455],"(",["T_VARIABLE","$position",455],")",["T_WHITESPACE","\n    ",455],"{",["T_WHITESPACE","\n        ",456],["T_VARIABLE","$this",457],["T_OBJECT_OPERATOR","->",457],["T_STRING","_watermarkPosition",457],["T_WHITESPACE"," ",457],"=",["T_WHITESPACE"," ",457],["T_VARIABLE","$position",457],";",["T_WHITESPACE","\n        ",457],["T_VARIABLE","$this",458],["T_OBJECT_OPERATOR","->",458],["T_STRING","_getModel",458],"(",")",["T_OBJECT_OPERATOR","->",458],["T_STRING","setWatermarkPosition",458],"(",["T_VARIABLE","$position",458],")",";",["T_WHITESPACE","\n        ",458],["T_RETURN","return",459],["T_WHITESPACE"," ",459],["T_VARIABLE","$this",459],";",["T_WHITESPACE","\n    ",459],"}",["T_WHITESPACE","\n\n    ",460],["T_DOC_COMMENT","\/**\n     * Get watermark position\n     *\n     * @return string\n     *\/",462],["T_WHITESPACE","\n    ",466],["T_PROTECTED","protected",467],["T_WHITESPACE"," ",467],["T_FUNCTION","function",467],["T_WHITESPACE"," ",467],["T_STRING","getWatermarkPosition",467],"(",")",["T_WHITESPACE","\n    ",467],"{",["T_WHITESPACE","\n        ",468],["T_RETURN","return",469],["T_WHITESPACE"," ",469],["T_VARIABLE","$this",469],["T_OBJECT_OPERATOR","->",469],["T_STRING","_watermarkPosition",469],";",["T_WHITESPACE","\n    ",469],"}",["T_WHITESPACE","\n\n    ",470],["T_DOC_COMMENT","\/**\n     * Set watermark size\n     * param size in format 100x200\n     *\n     * @param string $size\n     * @return Mage_Catalog_Helper_Image\n     *\/",472],["T_WHITESPACE","\n    ",478],["T_PUBLIC","public",479],["T_WHITESPACE"," ",479],["T_FUNCTION","function",479],["T_WHITESPACE"," ",479],["T_STRING","setWatermarkSize",479],"(",["T_VARIABLE","$size",479],")",["T_WHITESPACE","\n    ",479],"{",["T_WHITESPACE","\n        ",480],["T_VARIABLE","$this",481],["T_OBJECT_OPERATOR","->",481],["T_STRING","_watermarkSize",481],["T_WHITESPACE"," ",481],"=",["T_WHITESPACE"," ",481],["T_VARIABLE","$size",481],";",["T_WHITESPACE","\n        ",481],["T_VARIABLE","$this",482],["T_OBJECT_OPERATOR","->",482],["T_STRING","_getModel",482],"(",")",["T_OBJECT_OPERATOR","->",482],["T_STRING","setWatermarkSize",482],"(",["T_VARIABLE","$this",482],["T_OBJECT_OPERATOR","->",482],["T_STRING","parseSize",482],"(",["T_VARIABLE","$size",482],")",")",";",["T_WHITESPACE","\n        ",482],["T_RETURN","return",483],["T_WHITESPACE"," ",483],["T_VARIABLE","$this",483],";",["T_WHITESPACE","\n    ",483],"}",["T_WHITESPACE","\n\n    ",484],["T_DOC_COMMENT","\/**\n     * Get watermark size\n     *\n     * @return string\n     *\/",486],["T_WHITESPACE","\n    ",490],["T_PROTECTED","protected",491],["T_WHITESPACE"," ",491],["T_FUNCTION","function",491],["T_WHITESPACE"," ",491],["T_STRING","getWatermarkSize",491],"(",")",["T_WHITESPACE","\n    ",491],"{",["T_WHITESPACE","\n        ",492],["T_RETURN","return",493],["T_WHITESPACE"," ",493],["T_VARIABLE","$this",493],["T_OBJECT_OPERATOR","->",493],["T_STRING","_watermarkSize",493],";",["T_WHITESPACE","\n    ",493],"}",["T_WHITESPACE","\n\n    ",494],["T_DOC_COMMENT","\/**\n     * Set watermark image opacity\n     *\n     * @param int $imageOpacity\n     * @return Mage_Catalog_Helper_Image\n     *\/",496],["T_WHITESPACE","\n    ",501],["T_PUBLIC","public",502],["T_WHITESPACE"," ",502],["T_FUNCTION","function",502],["T_WHITESPACE"," ",502],["T_STRING","setWatermarkImageOpacity",502],"(",["T_VARIABLE","$imageOpacity",502],")",["T_WHITESPACE","\n    ",502],"{",["T_WHITESPACE","\n        ",503],["T_VARIABLE","$this",504],["T_OBJECT_OPERATOR","->",504],["T_STRING","_watermarkImageOpacity",504],["T_WHITESPACE"," ",504],"=",["T_WHITESPACE"," ",504],["T_VARIABLE","$imageOpacity",504],";",["T_WHITESPACE","\n        ",504],["T_VARIABLE","$this",505],["T_OBJECT_OPERATOR","->",505],["T_STRING","_getModel",505],"(",")",["T_OBJECT_OPERATOR","->",505],["T_STRING","setWatermarkImageOpacity",505],"(",["T_VARIABLE","$imageOpacity",505],")",";",["T_WHITESPACE","\n        ",505],["T_RETURN","return",506],["T_WHITESPACE"," ",506],["T_VARIABLE","$this",506],";",["T_WHITESPACE","\n    ",506],"}",["T_WHITESPACE","\n\n    ",507],["T_DOC_COMMENT","\/**\n     * Get watermark image opacity\n     *\n     * @return int\n     *\/",509],["T_WHITESPACE","\n    ",513],["T_PROTECTED","protected",514],["T_WHITESPACE"," ",514],["T_FUNCTION","function",514],["T_WHITESPACE"," ",514],["T_STRING","getWatermarkImageOpacity",514],"(",")",["T_WHITESPACE","\n    ",514],"{",["T_WHITESPACE","\n        ",515],["T_IF","if",516],["T_WHITESPACE"," ",516],"(",["T_VARIABLE","$this",516],["T_OBJECT_OPERATOR","->",516],["T_STRING","_watermarkImageOpacity",516],")",["T_WHITESPACE"," ",516],"{",["T_WHITESPACE","\n            ",516],["T_RETURN","return",517],["T_WHITESPACE"," ",517],["T_VARIABLE","$this",517],["T_OBJECT_OPERATOR","->",517],["T_STRING","_watermarkImageOpacity",517],";",["T_WHITESPACE","\n        ",517],"}",["T_WHITESPACE","\n\n        ",518],["T_RETURN","return",520],["T_WHITESPACE"," ",520],["T_VARIABLE","$this",520],["T_OBJECT_OPERATOR","->",520],["T_STRING","_getModel",520],"(",")",["T_OBJECT_OPERATOR","->",520],["T_STRING","getWatermarkImageOpacity",520],"(",")",";",["T_WHITESPACE","\n    ",520],"}",["T_WHITESPACE","\n\n    ",521],["T_DOC_COMMENT","\/**\n     * Set current Product\n     *\n     * @param Mage_Catalog_Model_Product $product\n     * @return Mage_Catalog_Helper_Image\n     *\/",523],["T_WHITESPACE","\n    ",528],["T_PROTECTED","protected",529],["T_WHITESPACE"," ",529],["T_FUNCTION","function",529],["T_WHITESPACE"," ",529],["T_STRING","setProduct",529],"(",["T_VARIABLE","$product",529],")",["T_WHITESPACE","\n    ",529],"{",["T_WHITESPACE","\n        ",530],["T_VARIABLE","$this",531],["T_OBJECT_OPERATOR","->",531],["T_STRING","_product",531],["T_WHITESPACE"," ",531],"=",["T_WHITESPACE"," ",531],["T_VARIABLE","$product",531],";",["T_WHITESPACE","\n        ",531],["T_RETURN","return",532],["T_WHITESPACE"," ",532],["T_VARIABLE","$this",532],";",["T_WHITESPACE","\n    ",532],"}",["T_WHITESPACE","\n\n    ",533],["T_DOC_COMMENT","\/**\n     * Get current Product\n     *\n     * @return Mage_Catalog_Model_Product\n     *\/",535],["T_WHITESPACE","\n    ",539],["T_PROTECTED","protected",540],["T_WHITESPACE"," ",540],["T_FUNCTION","function",540],["T_WHITESPACE"," ",540],["T_STRING","getProduct",540],"(",")",["T_WHITESPACE","\n    ",540],"{",["T_WHITESPACE","\n        ",541],["T_RETURN","return",542],["T_WHITESPACE"," ",542],["T_VARIABLE","$this",542],["T_OBJECT_OPERATOR","->",542],["T_STRING","_product",542],";",["T_WHITESPACE","\n    ",542],"}",["T_WHITESPACE","\n\n    ",543],["T_DOC_COMMENT","\/**\n     * Set Image file\n     *\n     * @param string $file\n     * @return Mage_Catalog_Helper_Image\n     *\/",545],["T_WHITESPACE","\n    ",550],["T_PROTECTED","protected",551],["T_WHITESPACE"," ",551],["T_FUNCTION","function",551],["T_WHITESPACE"," ",551],["T_STRING","setImageFile",551],"(",["T_VARIABLE","$file",551],")",["T_WHITESPACE","\n    ",551],"{",["T_WHITESPACE","\n        ",552],["T_VARIABLE","$this",553],["T_OBJECT_OPERATOR","->",553],["T_STRING","_imageFile",553],["T_WHITESPACE"," ",553],"=",["T_WHITESPACE"," ",553],["T_VARIABLE","$file",553],";",["T_WHITESPACE","\n        ",553],["T_RETURN","return",554],["T_WHITESPACE"," ",554],["T_VARIABLE","$this",554],";",["T_WHITESPACE","\n    ",554],"}",["T_WHITESPACE","\n\n    ",555],["T_DOC_COMMENT","\/**\n     * Get Image file\n     *\n     * @return string\n     *\/",557],["T_WHITESPACE","\n    ",561],["T_PROTECTED","protected",562],["T_WHITESPACE"," ",562],["T_FUNCTION","function",562],["T_WHITESPACE"," ",562],["T_STRING","getImageFile",562],"(",")",["T_WHITESPACE","\n    ",562],"{",["T_WHITESPACE","\n        ",563],["T_RETURN","return",564],["T_WHITESPACE"," ",564],["T_VARIABLE","$this",564],["T_OBJECT_OPERATOR","->",564],["T_STRING","_imageFile",564],";",["T_WHITESPACE","\n    ",564],"}",["T_WHITESPACE","\n\n    ",565],["T_DOC_COMMENT","\/**\n     * Retrieve size from string\n     *\n     * @param string $string\n     * @return array|bool\n     *\/",567],["T_WHITESPACE","\n    ",572],["T_PROTECTED","protected",573],["T_WHITESPACE"," ",573],["T_FUNCTION","function",573],["T_WHITESPACE"," ",573],["T_STRING","parseSize",573],"(",["T_VARIABLE","$string",573],")",["T_WHITESPACE","\n    ",573],"{",["T_WHITESPACE","\n        ",574],["T_VARIABLE","$size",575],["T_WHITESPACE"," ",575],"=",["T_WHITESPACE"," ",575],["T_STRING","explode",575],"(",["T_CONSTANT_ENCAPSED_STRING","'x'",575],",",["T_WHITESPACE"," ",575],["T_STRING","strtolower",575],"(",["T_VARIABLE","$string",575],")",")",";",["T_WHITESPACE","\n        ",575],["T_IF","if",576],["T_WHITESPACE"," ",576],"(",["T_STRING","sizeof",576],"(",["T_VARIABLE","$size",576],")",["T_WHITESPACE"," ",576],["T_IS_EQUAL","==",576],["T_WHITESPACE"," ",576],["T_LNUMBER","2",576],")",["T_WHITESPACE"," ",576],"{",["T_WHITESPACE","\n            ",576],["T_RETURN","return",577],["T_WHITESPACE"," ",577],["T_ARRAY","array",577],"(",["T_WHITESPACE","\n                ",577],["T_CONSTANT_ENCAPSED_STRING","'width'",578],["T_WHITESPACE"," ",578],["T_DOUBLE_ARROW","=>",578],["T_WHITESPACE"," ",578],"(",["T_VARIABLE","$size",578],"[",["T_LNUMBER","0",578],"]",["T_WHITESPACE"," ",578],">",["T_WHITESPACE"," ",578],["T_LNUMBER","0",578],")",["T_WHITESPACE"," ",578],"?",["T_WHITESPACE"," ",578],["T_VARIABLE","$size",578],"[",["T_LNUMBER","0",578],"]",["T_WHITESPACE"," ",578],":",["T_WHITESPACE"," ",578],["T_STRING","null",578],",",["T_WHITESPACE","\n                ",578],["T_CONSTANT_ENCAPSED_STRING","'heigth'",579],["T_WHITESPACE"," ",579],["T_DOUBLE_ARROW","=>",579],["T_WHITESPACE"," ",579],"(",["T_VARIABLE","$size",579],"[",["T_LNUMBER","1",579],"]",["T_WHITESPACE"," ",579],">",["T_WHITESPACE"," ",579],["T_LNUMBER","0",579],")",["T_WHITESPACE"," ",579],"?",["T_WHITESPACE"," ",579],["T_VARIABLE","$size",579],"[",["T_LNUMBER","1",579],"]",["T_WHITESPACE"," ",579],":",["T_WHITESPACE"," ",579],["T_STRING","null",579],",",["T_WHITESPACE","\n            ",579],")",";",["T_WHITESPACE","\n        ",580],"}",["T_WHITESPACE","\n        ",581],["T_RETURN","return",582],["T_WHITESPACE"," ",582],["T_STRING","false",582],";",["T_WHITESPACE","\n    ",582],"}",["T_WHITESPACE","\n\n    ",583],["T_DOC_COMMENT","\/**\n     * Retrieve original image width\n     *\n     * @return int|null\n     *\/",585],["T_WHITESPACE","\n    ",589],["T_PUBLIC","public",590],["T_WHITESPACE"," ",590],["T_FUNCTION","function",590],["T_WHITESPACE"," ",590],["T_STRING","getOriginalWidth",590],"(",")",["T_WHITESPACE","\n    ",590],"{",["T_WHITESPACE","\n        ",591],["T_RETURN","return",592],["T_WHITESPACE"," ",592],["T_VARIABLE","$this",592],["T_OBJECT_OPERATOR","->",592],["T_STRING","_getModel",592],"(",")",["T_OBJECT_OPERATOR","->",592],["T_STRING","getImageProcessor",592],"(",")",["T_OBJECT_OPERATOR","->",592],["T_STRING","getOriginalWidth",592],"(",")",";",["T_WHITESPACE","\n    ",592],"}",["T_WHITESPACE","\n\n    ",593],["T_DOC_COMMENT","\/**\n     * Retrieve original image height\n     *\n     * @deprecated\n     * @return int|null\n     *\/",595],["T_WHITESPACE","\n    ",600],["T_PUBLIC","public",601],["T_WHITESPACE"," ",601],["T_FUNCTION","function",601],["T_WHITESPACE"," ",601],["T_STRING","getOriginalHeigh",601],"(",")",["T_WHITESPACE","\n    ",601],"{",["T_WHITESPACE","\n        ",602],["T_RETURN","return",603],["T_WHITESPACE"," ",603],["T_VARIABLE","$this",603],["T_OBJECT_OPERATOR","->",603],["T_STRING","getOriginalHeight",603],"(",")",";",["T_WHITESPACE","\n    ",603],"}",["T_WHITESPACE","\n\n    ",604],["T_DOC_COMMENT","\/**\n     * Retrieve original image height\n     *\n     * @return int|null\n     *\/",606],["T_WHITESPACE","\n    ",610],["T_PUBLIC","public",611],["T_WHITESPACE"," ",611],["T_FUNCTION","function",611],["T_WHITESPACE"," ",611],["T_STRING","getOriginalHeight",611],"(",")",["T_WHITESPACE","\n    ",611],"{",["T_WHITESPACE","\n        ",612],["T_RETURN","return",613],["T_WHITESPACE"," ",613],["T_VARIABLE","$this",613],["T_OBJECT_OPERATOR","->",613],["T_STRING","_getModel",613],"(",")",["T_OBJECT_OPERATOR","->",613],["T_STRING","getImageProcessor",613],"(",")",["T_OBJECT_OPERATOR","->",613],["T_STRING","getOriginalHeight",613],"(",")",";",["T_WHITESPACE","\n    ",613],"}",["T_WHITESPACE","\n\n    ",614],["T_DOC_COMMENT","\/**\n     * Retrieve Original image size as array\n     * 0 - width, 1 - height\n     *\n     * @return array\n     *\/",616],["T_WHITESPACE","\n    ",621],["T_PUBLIC","public",622],["T_WHITESPACE"," ",622],["T_FUNCTION","function",622],["T_WHITESPACE"," ",622],["T_STRING","getOriginalSizeArray",622],"(",")",["T_WHITESPACE","\n    ",622],"{",["T_WHITESPACE","\n        ",623],["T_RETURN","return",624],["T_WHITESPACE"," ",624],["T_ARRAY","array",624],"(",["T_WHITESPACE","\n            ",624],["T_VARIABLE","$this",625],["T_OBJECT_OPERATOR","->",625],["T_STRING","getOriginalWidth",625],"(",")",",",["T_WHITESPACE","\n            ",625],["T_VARIABLE","$this",626],["T_OBJECT_OPERATOR","->",626],["T_STRING","getOriginalHeight",626],"(",")",["T_WHITESPACE","\n        ",626],")",";",["T_WHITESPACE","\n    ",627],"}",["T_WHITESPACE","\n\n    ",628],["T_DOC_COMMENT","\/**\n     * Check - is this file an image\n     *\n     * @param string $filePath\n     * @return bool\n     * @throws Mage_Core_Exception\n     *\/",630],["T_WHITESPACE","\n    ",636],["T_PUBLIC","public",637],["T_WHITESPACE"," ",637],["T_FUNCTION","function",637],["T_WHITESPACE"," ",637],["T_STRING","validateUploadFile",637],"(",["T_VARIABLE","$filePath",637],")",["T_WHITESPACE"," ",637],"{",["T_WHITESPACE","\n        ",637],["T_VARIABLE","$maxDimension",638],["T_WHITESPACE"," ",638],"=",["T_WHITESPACE"," ",638],["T_STRING","Mage",638],["T_DOUBLE_COLON","::",638],["T_STRING","getStoreConfig",638],"(",["T_STRING","self",638],["T_DOUBLE_COLON","::",638],["T_STRING","XML_NODE_PRODUCT_MAX_DIMENSION",638],")",";",["T_WHITESPACE","\n        ",638],["T_VARIABLE","$imageInfo",639],["T_WHITESPACE"," ",639],"=",["T_WHITESPACE"," ",639],["T_STRING","getimagesize",639],"(",["T_VARIABLE","$filePath",639],")",";",["T_WHITESPACE","\n        ",639],["T_IF","if",640],["T_WHITESPACE"," ",640],"(","!",["T_VARIABLE","$imageInfo",640],")",["T_WHITESPACE"," ",640],"{",["T_WHITESPACE","\n            ",640],["T_STRING","Mage",641],["T_DOUBLE_COLON","::",641],["T_STRING","throwException",641],"(",["T_VARIABLE","$this",641],["T_OBJECT_OPERATOR","->",641],["T_STRING","__",641],"(",["T_CONSTANT_ENCAPSED_STRING","'Disallowed file type.'",641],")",")",";",["T_WHITESPACE","\n        ",641],"}",["T_WHITESPACE","\n\n        ",642],["T_IF","if",644],["T_WHITESPACE"," ",644],"(",["T_VARIABLE","$imageInfo",644],"[",["T_LNUMBER","0",644],"]",["T_WHITESPACE"," ",644],">",["T_WHITESPACE"," ",644],["T_VARIABLE","$maxDimension",644],["T_WHITESPACE"," ",644],["T_BOOLEAN_OR","||",644],["T_WHITESPACE"," ",644],["T_VARIABLE","$imageInfo",644],"[",["T_LNUMBER","1",644],"]",["T_WHITESPACE"," ",644],">",["T_WHITESPACE"," ",644],["T_VARIABLE","$maxDimension",644],")",["T_WHITESPACE"," ",644],"{",["T_WHITESPACE","\n            ",644],["T_STRING","Mage",645],["T_DOUBLE_COLON","::",645],["T_STRING","throwException",645],"(",["T_VARIABLE","$this",645],["T_OBJECT_OPERATOR","->",645],["T_STRING","__",645],"(",["T_CONSTANT_ENCAPSED_STRING","'Disalollowed file format.'",645],")",")",";",["T_WHITESPACE","\n        ",645],"}",["T_WHITESPACE","\n\n        ",646],["T_VARIABLE","$_processor",648],["T_WHITESPACE"," ",648],"=",["T_WHITESPACE"," ",648],["T_NEW","new",648],["T_WHITESPACE"," ",648],["T_STRING","Varien_Image",648],"(",["T_VARIABLE","$filePath",648],")",";",["T_WHITESPACE","\n        ",648],["T_RETURN","return",649],["T_WHITESPACE"," ",649],["T_VARIABLE","$_processor",649],["T_OBJECT_OPERATOR","->",649],["T_STRING","getMimeType",649],"(",")",["T_WHITESPACE"," ",649],["T_IS_NOT_IDENTICAL","!==",649],["T_WHITESPACE"," ",649],["T_STRING","null",649],";",["T_WHITESPACE","\n    ",649],"}",["T_WHITESPACE","\n\n",650],"}",["T_WHITESPACE","\n",652]]
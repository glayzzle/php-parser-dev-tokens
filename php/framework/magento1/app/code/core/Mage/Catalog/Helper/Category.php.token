[["T_OPEN_TAG","<?php\n",1],["T_DOC_COMMENT","\/**\n * Magento\n *\n * NOTICE OF LICENSE\n *\n * This source file is subject to the Open Software License (OSL 3.0)\n * that is bundled with this package in the file LICENSE.txt.\n * It is also available through the world-wide-web at this URL:\n * http:\/\/opensource.org\/licenses\/osl-3.0.php\n * If you did not receive a copy of the license and are unable to\n * obtain it through the world-wide-web, please send an email\n * to license@magento.com so we can send you a copy immediately.\n *\n * DISCLAIMER\n *\n * Do not edit or add to this file if you wish to upgrade Magento to newer\n * versions in the future. If you wish to customize Magento for your\n * needs please refer to http:\/\/www.magento.com for more information.\n *\n * @category    Mage\n * @package     Mage_Catalog\n * @copyright  Copyright (c) 2006-2016 X.commerce, Inc. and affiliates (http:\/\/www.magento.com)\n * @license    http:\/\/opensource.org\/licenses\/osl-3.0.php  Open Software License (OSL 3.0)\n *\/",2],["T_WHITESPACE","\n\n",25],["T_DOC_COMMENT","\/**\n * Catalog category helper\n *\n * @category   Mage\n * @package    Mage_Catalog\n * @author      Magento Core Team <core@magentocommerce.com>\n *\/",27],["T_WHITESPACE","\n",33],["T_CLASS","class",34],["T_WHITESPACE"," ",34],["T_STRING","Mage_Catalog_Helper_Category",34],["T_WHITESPACE"," ",34],["T_EXTENDS","extends",34],["T_WHITESPACE"," ",34],["T_STRING","Mage_Core_Helper_Abstract",34],["T_WHITESPACE","\n",34],"{",["T_WHITESPACE","\n    ",35],["T_CONST","const",36],["T_WHITESPACE"," ",36],["T_STRING","XML_PATH_CATEGORY_URL_SUFFIX",36],["T_WHITESPACE","          ",36],"=",["T_WHITESPACE"," ",36],["T_CONSTANT_ENCAPSED_STRING","'catalog\/seo\/category_url_suffix'",36],";",["T_WHITESPACE","\n    ",36],["T_CONST","const",37],["T_WHITESPACE"," ",37],["T_STRING","XML_PATH_USE_CATEGORY_CANONICAL_TAG",37],["T_WHITESPACE","   ",37],"=",["T_WHITESPACE"," ",37],["T_CONSTANT_ENCAPSED_STRING","'catalog\/seo\/category_canonical_tag'",37],";",["T_WHITESPACE","\n    ",37],["T_CONST","const",38],["T_WHITESPACE"," ",38],["T_STRING","XML_PATH_CATEGORY_ROOT_ID",38],["T_WHITESPACE","             ",38],"=",["T_WHITESPACE"," ",38],["T_CONSTANT_ENCAPSED_STRING","'catalog\/category\/root_id'",38],";",["T_WHITESPACE","\n\n    ",38],["T_DOC_COMMENT","\/**\n     * Store categories cache\n     *\n     * @var array\n     *\/",40],["T_WHITESPACE","\n    ",44],["T_PROTECTED","protected",45],["T_WHITESPACE"," ",45],["T_VARIABLE","$_storeCategories",45],["T_WHITESPACE"," ",45],"=",["T_WHITESPACE"," ",45],["T_ARRAY","array",45],"(",")",";",["T_WHITESPACE","\n\n    ",45],["T_DOC_COMMENT","\/**\n     * Cache for category rewrite suffix\n     *\n     * @var array\n     *\/",47],["T_WHITESPACE","\n    ",51],["T_PROTECTED","protected",52],["T_WHITESPACE"," ",52],["T_VARIABLE","$_categoryUrlSuffix",52],["T_WHITESPACE"," ",52],"=",["T_WHITESPACE"," ",52],["T_ARRAY","array",52],"(",")",";",["T_WHITESPACE","\n\n    ",52],["T_DOC_COMMENT","\/**\n     * Retrieve current store categories\n     *\n     * @param   boolean|string $sorted\n     * @param   boolean $asCollection\n     * @return  Varien_Data_Tree_Node_Collection|Mage_Catalog_Model_Resource_Eav_Mysql4_Category_Collection|array\n     *\/",54],["T_WHITESPACE","\n    ",60],["T_PUBLIC","public",61],["T_WHITESPACE"," ",61],["T_FUNCTION","function",61],["T_WHITESPACE"," ",61],["T_STRING","getStoreCategories",61],"(",["T_VARIABLE","$sorted",61],"=",["T_STRING","false",61],",",["T_WHITESPACE"," ",61],["T_VARIABLE","$asCollection",61],"=",["T_STRING","false",61],",",["T_WHITESPACE"," ",61],["T_VARIABLE","$toLoad",61],"=",["T_STRING","true",61],")",["T_WHITESPACE","\n    ",61],"{",["T_WHITESPACE","\n        ",62],["T_VARIABLE","$parent",63],["T_WHITESPACE","     ",63],"=",["T_WHITESPACE"," ",63],["T_STRING","Mage",63],["T_DOUBLE_COLON","::",63],["T_STRING","app",63],"(",")",["T_OBJECT_OPERATOR","->",63],["T_STRING","getStore",63],"(",")",["T_OBJECT_OPERATOR","->",63],["T_STRING","getRootCategoryId",63],"(",")",";",["T_WHITESPACE","\n        ",63],["T_VARIABLE","$cacheKey",64],["T_WHITESPACE","   ",64],"=",["T_WHITESPACE"," ",64],["T_STRING","sprintf",64],"(",["T_CONSTANT_ENCAPSED_STRING","'%d-%d-%d-%d'",64],",",["T_WHITESPACE"," ",64],["T_VARIABLE","$parent",64],",",["T_WHITESPACE"," ",64],["T_VARIABLE","$sorted",64],",",["T_WHITESPACE"," ",64],["T_VARIABLE","$asCollection",64],",",["T_WHITESPACE"," ",64],["T_VARIABLE","$toLoad",64],")",";",["T_WHITESPACE","\n        ",64],["T_IF","if",65],["T_WHITESPACE"," ",65],"(",["T_ISSET","isset",65],"(",["T_VARIABLE","$this",65],["T_OBJECT_OPERATOR","->",65],["T_STRING","_storeCategories",65],"[",["T_VARIABLE","$cacheKey",65],"]",")",")",["T_WHITESPACE"," ",65],"{",["T_WHITESPACE","\n            ",65],["T_RETURN","return",66],["T_WHITESPACE"," ",66],["T_VARIABLE","$this",66],["T_OBJECT_OPERATOR","->",66],["T_STRING","_storeCategories",66],"[",["T_VARIABLE","$cacheKey",66],"]",";",["T_WHITESPACE","\n        ",66],"}",["T_WHITESPACE","\n\n        ",67],["T_DOC_COMMENT","\/**\n         * Check if parent node of the store still exists\n         *\/",69],["T_WHITESPACE","\n        ",71],["T_VARIABLE","$category",72],["T_WHITESPACE"," ",72],"=",["T_WHITESPACE"," ",72],["T_STRING","Mage",72],["T_DOUBLE_COLON","::",72],["T_STRING","getModel",72],"(",["T_CONSTANT_ENCAPSED_STRING","'catalog\/category'",72],")",";",["T_WHITESPACE","\n        ",72],["T_COMMENT","\/* @var $category Mage_Catalog_Model_Category *\/",73],["T_WHITESPACE","\n        ",73],["T_IF","if",74],["T_WHITESPACE"," ",74],"(","!",["T_VARIABLE","$category",74],["T_OBJECT_OPERATOR","->",74],["T_STRING","checkId",74],"(",["T_VARIABLE","$parent",74],")",")",["T_WHITESPACE"," ",74],"{",["T_WHITESPACE","\n            ",74],["T_IF","if",75],["T_WHITESPACE"," ",75],"(",["T_VARIABLE","$asCollection",75],")",["T_WHITESPACE"," ",75],"{",["T_WHITESPACE","\n                ",75],["T_RETURN","return",76],["T_WHITESPACE"," ",76],["T_NEW","new",76],["T_WHITESPACE"," ",76],["T_STRING","Varien_Data_Collection",76],"(",")",";",["T_WHITESPACE","\n            ",76],"}",["T_WHITESPACE","\n            ",77],["T_RETURN","return",78],["T_WHITESPACE"," ",78],["T_ARRAY","array",78],"(",")",";",["T_WHITESPACE","\n        ",78],"}",["T_WHITESPACE","\n\n        ",79],["T_VARIABLE","$recursionLevel",81],["T_WHITESPACE","  ",81],"=",["T_WHITESPACE"," ",81],["T_STRING","max",81],"(",["T_LNUMBER","0",81],",",["T_WHITESPACE"," ",81],["T_INT_CAST","(int)",81],["T_WHITESPACE"," ",81],["T_STRING","Mage",81],["T_DOUBLE_COLON","::",81],["T_STRING","app",81],"(",")",["T_OBJECT_OPERATOR","->",81],["T_STRING","getStore",81],"(",")",["T_OBJECT_OPERATOR","->",81],["T_STRING","getConfig",81],"(",["T_CONSTANT_ENCAPSED_STRING","'catalog\/navigation\/max_depth'",81],")",")",";",["T_WHITESPACE","\n        ",81],["T_VARIABLE","$storeCategories",82],["T_WHITESPACE"," ",82],"=",["T_WHITESPACE"," ",82],["T_VARIABLE","$category",82],["T_OBJECT_OPERATOR","->",82],["T_STRING","getCategories",82],"(",["T_VARIABLE","$parent",82],",",["T_WHITESPACE"," ",82],["T_VARIABLE","$recursionLevel",82],",",["T_WHITESPACE"," ",82],["T_VARIABLE","$sorted",82],",",["T_WHITESPACE"," ",82],["T_VARIABLE","$asCollection",82],",",["T_WHITESPACE"," ",82],["T_VARIABLE","$toLoad",82],")",";",["T_WHITESPACE","\n\n        ",82],["T_VARIABLE","$this",84],["T_OBJECT_OPERATOR","->",84],["T_STRING","_storeCategories",84],"[",["T_VARIABLE","$cacheKey",84],"]",["T_WHITESPACE"," ",84],"=",["T_WHITESPACE"," ",84],["T_VARIABLE","$storeCategories",84],";",["T_WHITESPACE","\n        ",84],["T_RETURN","return",85],["T_WHITESPACE"," ",85],["T_VARIABLE","$storeCategories",85],";",["T_WHITESPACE","\n    ",85],"}",["T_WHITESPACE","\n\n    ",86],["T_DOC_COMMENT","\/**\n     * Retrieve category url\n     *\n     * @param   Mage_Catalog_Model_Category $category\n     * @return  string\n     *\/",88],["T_WHITESPACE","\n    ",93],["T_PUBLIC","public",94],["T_WHITESPACE"," ",94],["T_FUNCTION","function",94],["T_WHITESPACE"," ",94],["T_STRING","getCategoryUrl",94],"(",["T_VARIABLE","$category",94],")",["T_WHITESPACE","\n    ",94],"{",["T_WHITESPACE","\n        ",95],["T_IF","if",96],["T_WHITESPACE"," ",96],"(",["T_VARIABLE","$category",96],["T_WHITESPACE"," ",96],["T_INSTANCEOF","instanceof",96],["T_WHITESPACE"," ",96],["T_STRING","Mage_Catalog_Model_Category",96],")",["T_WHITESPACE"," ",96],"{",["T_WHITESPACE","\n            ",96],["T_RETURN","return",97],["T_WHITESPACE"," ",97],["T_VARIABLE","$category",97],["T_OBJECT_OPERATOR","->",97],["T_STRING","getUrl",97],"(",")",";",["T_WHITESPACE","\n        ",97],"}",["T_WHITESPACE","\n        ",98],["T_RETURN","return",99],["T_WHITESPACE"," ",99],["T_STRING","Mage",99],["T_DOUBLE_COLON","::",99],["T_STRING","getModel",99],"(",["T_CONSTANT_ENCAPSED_STRING","'catalog\/category'",99],")",["T_WHITESPACE","\n            ",99],["T_OBJECT_OPERATOR","->",100],["T_STRING","setData",100],"(",["T_VARIABLE","$category",100],["T_OBJECT_OPERATOR","->",100],["T_STRING","getData",100],"(",")",")",["T_WHITESPACE","\n            ",100],["T_OBJECT_OPERATOR","->",101],["T_STRING","getUrl",101],"(",")",";",["T_WHITESPACE","\n    ",101],"}",["T_WHITESPACE","\n\n    ",102],["T_DOC_COMMENT","\/**\n     * Check if a category can be shown\n     *\n     * @param  Mage_Catalog_Model_Category|int $category\n     * @return boolean\n     *\/",104],["T_WHITESPACE","\n    ",109],["T_PUBLIC","public",110],["T_WHITESPACE"," ",110],["T_FUNCTION","function",110],["T_WHITESPACE"," ",110],["T_STRING","canShow",110],"(",["T_VARIABLE","$category",110],")",["T_WHITESPACE","\n    ",110],"{",["T_WHITESPACE","\n        ",111],["T_IF","if",112],["T_WHITESPACE"," ",112],"(",["T_STRING","is_int",112],"(",["T_VARIABLE","$category",112],")",")",["T_WHITESPACE"," ",112],"{",["T_WHITESPACE","\n            ",112],["T_VARIABLE","$category",113],["T_WHITESPACE"," ",113],"=",["T_WHITESPACE"," ",113],["T_STRING","Mage",113],["T_DOUBLE_COLON","::",113],["T_STRING","getModel",113],"(",["T_CONSTANT_ENCAPSED_STRING","'catalog\/category'",113],")",["T_OBJECT_OPERATOR","->",113],["T_STRING","load",113],"(",["T_VARIABLE","$category",113],")",";",["T_WHITESPACE","\n        ",113],"}",["T_WHITESPACE","\n\n        ",114],["T_IF","if",116],["T_WHITESPACE"," ",116],"(","!",["T_VARIABLE","$category",116],["T_OBJECT_OPERATOR","->",116],["T_STRING","getId",116],"(",")",")",["T_WHITESPACE"," ",116],"{",["T_WHITESPACE","\n            ",116],["T_RETURN","return",117],["T_WHITESPACE"," ",117],["T_STRING","false",117],";",["T_WHITESPACE","\n        ",117],"}",["T_WHITESPACE","\n\n        ",118],["T_IF","if",120],["T_WHITESPACE"," ",120],"(","!",["T_VARIABLE","$category",120],["T_OBJECT_OPERATOR","->",120],["T_STRING","getIsActive",120],"(",")",")",["T_WHITESPACE"," ",120],"{",["T_WHITESPACE","\n            ",120],["T_RETURN","return",121],["T_WHITESPACE"," ",121],["T_STRING","false",121],";",["T_WHITESPACE","\n        ",121],"}",["T_WHITESPACE","\n        ",122],["T_IF","if",123],["T_WHITESPACE"," ",123],"(","!",["T_VARIABLE","$category",123],["T_OBJECT_OPERATOR","->",123],["T_STRING","isInRootCategoryList",123],"(",")",")",["T_WHITESPACE"," ",123],"{",["T_WHITESPACE","\n            ",123],["T_RETURN","return",124],["T_WHITESPACE"," ",124],["T_STRING","false",124],";",["T_WHITESPACE","\n        ",124],"}",["T_WHITESPACE","\n\n        ",125],["T_RETURN","return",127],["T_WHITESPACE"," ",127],["T_STRING","true",127],";",["T_WHITESPACE","\n    ",127],"}",["T_WHITESPACE","\n\n",128],["T_DOC_COMMENT","\/**\n     * Retrieve category rewrite sufix for store\n     *\n     * @param int $storeId\n     * @return string\n     *\/",130],["T_WHITESPACE","\n    ",135],["T_PUBLIC","public",136],["T_WHITESPACE"," ",136],["T_FUNCTION","function",136],["T_WHITESPACE"," ",136],["T_STRING","getCategoryUrlSuffix",136],"(",["T_VARIABLE","$storeId",136],["T_WHITESPACE"," ",136],"=",["T_WHITESPACE"," ",136],["T_STRING","null",136],")",["T_WHITESPACE","\n    ",136],"{",["T_WHITESPACE","\n        ",137],["T_IF","if",138],["T_WHITESPACE"," ",138],"(",["T_STRING","is_null",138],"(",["T_VARIABLE","$storeId",138],")",")",["T_WHITESPACE"," ",138],"{",["T_WHITESPACE","\n            ",138],["T_VARIABLE","$storeId",139],["T_WHITESPACE"," ",139],"=",["T_WHITESPACE"," ",139],["T_STRING","Mage",139],["T_DOUBLE_COLON","::",139],["T_STRING","app",139],"(",")",["T_OBJECT_OPERATOR","->",139],["T_STRING","getStore",139],"(",")",["T_OBJECT_OPERATOR","->",139],["T_STRING","getId",139],"(",")",";",["T_WHITESPACE","\n        ",139],"}",["T_WHITESPACE","\n\n        ",140],["T_IF","if",142],["T_WHITESPACE"," ",142],"(","!",["T_ISSET","isset",142],"(",["T_VARIABLE","$this",142],["T_OBJECT_OPERATOR","->",142],["T_STRING","_categoryUrlSuffix",142],"[",["T_VARIABLE","$storeId",142],"]",")",")",["T_WHITESPACE"," ",142],"{",["T_WHITESPACE","\n            ",142],["T_VARIABLE","$this",143],["T_OBJECT_OPERATOR","->",143],["T_STRING","_categoryUrlSuffix",143],"[",["T_VARIABLE","$storeId",143],"]",["T_WHITESPACE"," ",143],"=",["T_WHITESPACE"," ",143],["T_STRING","Mage",143],["T_DOUBLE_COLON","::",143],["T_STRING","getStoreConfig",143],"(",["T_STRING","self",143],["T_DOUBLE_COLON","::",143],["T_STRING","XML_PATH_CATEGORY_URL_SUFFIX",143],",",["T_WHITESPACE"," ",143],["T_VARIABLE","$storeId",143],")",";",["T_WHITESPACE","\n        ",143],"}",["T_WHITESPACE","\n        ",144],["T_RETURN","return",145],["T_WHITESPACE"," ",145],["T_VARIABLE","$this",145],["T_OBJECT_OPERATOR","->",145],["T_STRING","_categoryUrlSuffix",145],"[",["T_VARIABLE","$storeId",145],"]",";",["T_WHITESPACE","\n    ",145],"}",["T_WHITESPACE","\n\n    ",146],["T_DOC_COMMENT","\/**\n     * Retrieve clear url for category as parrent\n     *\n     * @param string $url\n     * @param bool $slash\n     * @param int $storeId\n     *\n     * @return string\n     *\/",148],["T_WHITESPACE","\n    ",156],["T_PUBLIC","public",157],["T_WHITESPACE"," ",157],["T_FUNCTION","function",157],["T_WHITESPACE"," ",157],["T_STRING","getCategoryUrlPath",157],"(",["T_VARIABLE","$urlPath",157],",",["T_WHITESPACE"," ",157],["T_VARIABLE","$slash",157],["T_WHITESPACE"," ",157],"=",["T_WHITESPACE"," ",157],["T_STRING","false",157],",",["T_WHITESPACE"," ",157],["T_VARIABLE","$storeId",157],["T_WHITESPACE"," ",157],"=",["T_WHITESPACE"," ",157],["T_STRING","null",157],")",["T_WHITESPACE","\n    ",157],"{",["T_WHITESPACE","\n        ",158],["T_IF","if",159],["T_WHITESPACE"," ",159],"(","!",["T_VARIABLE","$this",159],["T_OBJECT_OPERATOR","->",159],["T_STRING","getCategoryUrlSuffix",159],"(",["T_VARIABLE","$storeId",159],")",")",["T_WHITESPACE"," ",159],"{",["T_WHITESPACE","\n            ",159],["T_RETURN","return",160],["T_WHITESPACE"," ",160],["T_VARIABLE","$urlPath",160],";",["T_WHITESPACE","\n        ",160],"}",["T_WHITESPACE","\n\n        ",161],["T_IF","if",163],["T_WHITESPACE"," ",163],"(",["T_VARIABLE","$slash",163],")",["T_WHITESPACE"," ",163],"{",["T_WHITESPACE","\n            ",163],["T_VARIABLE","$regexp",164],["T_WHITESPACE","     ",164],"=",["T_WHITESPACE"," ",164],["T_CONSTANT_ENCAPSED_STRING","'#('",164],".",["T_STRING","preg_quote",164],"(",["T_VARIABLE","$this",164],["T_OBJECT_OPERATOR","->",164],["T_STRING","getCategoryUrlSuffix",164],"(",["T_VARIABLE","$storeId",164],")",",",["T_WHITESPACE"," ",164],["T_CONSTANT_ENCAPSED_STRING","'#'",164],")",".",["T_CONSTANT_ENCAPSED_STRING","')\/$#i'",164],";",["T_WHITESPACE","\n            ",164],["T_VARIABLE","$replace",165],["T_WHITESPACE","    ",165],"=",["T_WHITESPACE"," ",165],["T_CONSTANT_ENCAPSED_STRING","'\/'",165],";",["T_WHITESPACE","\n        ",165],"}",["T_WHITESPACE","\n        ",166],["T_ELSE","else",167],["T_WHITESPACE"," ",167],"{",["T_WHITESPACE","\n            ",167],["T_VARIABLE","$regexp",168],["T_WHITESPACE","     ",168],"=",["T_WHITESPACE"," ",168],["T_CONSTANT_ENCAPSED_STRING","'#('",168],".",["T_STRING","preg_quote",168],"(",["T_VARIABLE","$this",168],["T_OBJECT_OPERATOR","->",168],["T_STRING","getCategoryUrlSuffix",168],"(",["T_VARIABLE","$storeId",168],")",",",["T_WHITESPACE"," ",168],["T_CONSTANT_ENCAPSED_STRING","'#'",168],")",".",["T_CONSTANT_ENCAPSED_STRING","')$#i'",168],";",["T_WHITESPACE","\n            ",168],["T_VARIABLE","$replace",169],["T_WHITESPACE","    ",169],"=",["T_WHITESPACE"," ",169],["T_CONSTANT_ENCAPSED_STRING","''",169],";",["T_WHITESPACE","\n        ",169],"}",["T_WHITESPACE","\n\n        ",170],["T_RETURN","return",172],["T_WHITESPACE"," ",172],["T_STRING","preg_replace",172],"(",["T_VARIABLE","$regexp",172],",",["T_WHITESPACE"," ",172],["T_VARIABLE","$replace",172],",",["T_WHITESPACE"," ",172],["T_VARIABLE","$urlPath",172],")",";",["T_WHITESPACE","\n    ",172],"}",["T_WHITESPACE","\n\n    ",173],["T_DOC_COMMENT","\/**\n     * Check if <link rel=\"canonical\"> can be used for category\n     *\n     * @param $store\n     * @return bool\n     *\/",175],["T_WHITESPACE","\n    ",180],["T_PUBLIC","public",181],["T_WHITESPACE"," ",181],["T_FUNCTION","function",181],["T_WHITESPACE"," ",181],["T_STRING","canUseCanonicalTag",181],"(",["T_VARIABLE","$store",181],["T_WHITESPACE"," ",181],"=",["T_WHITESPACE"," ",181],["T_STRING","null",181],")",["T_WHITESPACE","\n    ",181],"{",["T_WHITESPACE","\n        ",182],["T_RETURN","return",183],["T_WHITESPACE"," ",183],["T_STRING","Mage",183],["T_DOUBLE_COLON","::",183],["T_STRING","getStoreConfig",183],"(",["T_STRING","self",183],["T_DOUBLE_COLON","::",183],["T_STRING","XML_PATH_USE_CATEGORY_CANONICAL_TAG",183],",",["T_WHITESPACE"," ",183],["T_VARIABLE","$store",183],")",";",["T_WHITESPACE","\n    ",183],"}",["T_WHITESPACE","\n",184],"}",["T_WHITESPACE","\n",185]]
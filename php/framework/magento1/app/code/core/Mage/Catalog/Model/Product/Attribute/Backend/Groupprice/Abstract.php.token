[["T_OPEN_TAG","<?php\n",1],["T_DOC_COMMENT","\/**\n * Magento\n *\n * NOTICE OF LICENSE\n *\n * This source file is subject to the Open Software License (OSL 3.0)\n * that is bundled with this package in the file LICENSE.txt.\n * It is also available through the world-wide-web at this URL:\n * http:\/\/opensource.org\/licenses\/osl-3.0.php\n * If you did not receive a copy of the license and are unable to\n * obtain it through the world-wide-web, please send an email\n * to license@magento.com so we can send you a copy immediately.\n *\n * DISCLAIMER\n *\n * Do not edit or add to this file if you wish to upgrade Magento to newer\n * versions in the future. If you wish to customize Magento for your\n * needs please refer to http:\/\/www.magento.com for more information.\n *\n * @category    Mage\n * @package     Mage_Catalog\n * @copyright  Copyright (c) 2006-2016 X.commerce, Inc. and affiliates (http:\/\/www.magento.com)\n * @license    http:\/\/opensource.org\/licenses\/osl-3.0.php  Open Software License (OSL 3.0)\n *\/",2],["T_WHITESPACE","\n\n\n",25],["T_DOC_COMMENT","\/**\n * Catalog product abstract group price backend attribute model\n *\n * @category   Mage\n * @package    Mage_Catalog\n * @author     Magento Core Team <core@magentocommerce.com>\n *\/",28],["T_WHITESPACE","\n",34],["T_ABSTRACT","abstract",35],["T_WHITESPACE"," ",35],["T_CLASS","class",35],["T_WHITESPACE"," ",35],["T_STRING","Mage_Catalog_Model_Product_Attribute_Backend_Groupprice_Abstract",35],["T_WHITESPACE","\n    ",35],["T_EXTENDS","extends",36],["T_WHITESPACE"," ",36],["T_STRING","Mage_Catalog_Model_Product_Attribute_Backend_Price",36],["T_WHITESPACE","\n",36],"{",["T_WHITESPACE","\n    ",37],["T_DOC_COMMENT","\/**\n     * Website currency codes and rates\n     *\n     * @var array\n     *\/",38],["T_WHITESPACE","\n    ",42],["T_PROTECTED","protected",43],["T_WHITESPACE"," ",43],["T_VARIABLE","$_rates",43],";",["T_WHITESPACE","\n\n    ",43],["T_DOC_COMMENT","\/**\n     * Error message when duplicates\n     *\n     * @abstract\n     * @return string\n     *\/",45],["T_WHITESPACE","\n    ",50],["T_ABSTRACT","abstract",51],["T_WHITESPACE"," ",51],["T_PROTECTED","protected",51],["T_WHITESPACE"," ",51],["T_FUNCTION","function",51],["T_WHITESPACE"," ",51],["T_STRING","_getDuplicateErrorMessage",51],"(",")",";",["T_WHITESPACE","\n\n    ",51],["T_DOC_COMMENT","\/**\n     * Retrieve websites currency rates and base currency codes\n     *\n     * @return array\n     *\/",53],["T_WHITESPACE","\n    ",57],["T_PROTECTED","protected",58],["T_WHITESPACE"," ",58],["T_FUNCTION","function",58],["T_WHITESPACE"," ",58],["T_STRING","_getWebsiteCurrencyRates",58],"(",")",["T_WHITESPACE","\n    ",58],"{",["T_WHITESPACE","\n        ",59],["T_IF","if",60],["T_WHITESPACE"," ",60],"(",["T_STRING","is_null",60],"(",["T_VARIABLE","$this",60],["T_OBJECT_OPERATOR","->",60],["T_STRING","_rates",60],")",")",["T_WHITESPACE"," ",60],"{",["T_WHITESPACE","\n            ",60],["T_VARIABLE","$this",61],["T_OBJECT_OPERATOR","->",61],["T_STRING","_rates",61],["T_WHITESPACE"," ",61],"=",["T_WHITESPACE"," ",61],["T_ARRAY","array",61],"(",")",";",["T_WHITESPACE","\n            ",61],["T_VARIABLE","$baseCurrency",62],["T_WHITESPACE"," ",62],"=",["T_WHITESPACE"," ",62],["T_STRING","Mage",62],["T_DOUBLE_COLON","::",62],["T_STRING","app",62],"(",")",["T_OBJECT_OPERATOR","->",62],["T_STRING","getBaseCurrencyCode",62],"(",")",";",["T_WHITESPACE","\n            ",62],["T_FOREACH","foreach",63],["T_WHITESPACE"," ",63],"(",["T_STRING","Mage",63],["T_DOUBLE_COLON","::",63],["T_STRING","app",63],"(",")",["T_OBJECT_OPERATOR","->",63],["T_STRING","getWebsites",63],"(",")",["T_WHITESPACE"," ",63],["T_AS","as",63],["T_WHITESPACE"," ",63],["T_VARIABLE","$website",63],")",["T_WHITESPACE"," ",63],"{",["T_WHITESPACE","\n                ",63],["T_COMMENT","\/* @var $website Mage_Core_Model_Website *\/",64],["T_WHITESPACE","\n                ",64],["T_IF","if",65],["T_WHITESPACE"," ",65],"(",["T_VARIABLE","$website",65],["T_OBJECT_OPERATOR","->",65],["T_STRING","getBaseCurrencyCode",65],"(",")",["T_WHITESPACE"," ",65],["T_IS_NOT_EQUAL","!=",65],["T_WHITESPACE"," ",65],["T_VARIABLE","$baseCurrency",65],")",["T_WHITESPACE"," ",65],"{",["T_WHITESPACE","\n                    ",65],["T_VARIABLE","$rate",66],["T_WHITESPACE"," ",66],"=",["T_WHITESPACE"," ",66],["T_STRING","Mage",66],["T_DOUBLE_COLON","::",66],["T_STRING","getModel",66],"(",["T_CONSTANT_ENCAPSED_STRING","'directory\/currency'",66],")",["T_WHITESPACE","\n                        ",66],["T_OBJECT_OPERATOR","->",67],["T_STRING","load",67],"(",["T_VARIABLE","$baseCurrency",67],")",["T_WHITESPACE","\n                        ",67],["T_OBJECT_OPERATOR","->",68],["T_STRING","getRate",68],"(",["T_VARIABLE","$website",68],["T_OBJECT_OPERATOR","->",68],["T_STRING","getBaseCurrencyCode",68],"(",")",")",";",["T_WHITESPACE","\n                    ",68],["T_IF","if",69],["T_WHITESPACE"," ",69],"(","!",["T_VARIABLE","$rate",69],")",["T_WHITESPACE"," ",69],"{",["T_WHITESPACE","\n                        ",69],["T_VARIABLE","$rate",70],["T_WHITESPACE"," ",70],"=",["T_WHITESPACE"," ",70],["T_LNUMBER","1",70],";",["T_WHITESPACE","\n                    ",70],"}",["T_WHITESPACE","\n                    ",71],["T_VARIABLE","$this",72],["T_OBJECT_OPERATOR","->",72],["T_STRING","_rates",72],"[",["T_VARIABLE","$website",72],["T_OBJECT_OPERATOR","->",72],["T_STRING","getId",72],"(",")","]",["T_WHITESPACE"," ",72],"=",["T_WHITESPACE"," ",72],["T_ARRAY","array",72],"(",["T_WHITESPACE","\n                        ",72],["T_CONSTANT_ENCAPSED_STRING","'code'",73],["T_WHITESPACE"," ",73],["T_DOUBLE_ARROW","=>",73],["T_WHITESPACE"," ",73],["T_VARIABLE","$website",73],["T_OBJECT_OPERATOR","->",73],["T_STRING","getBaseCurrencyCode",73],"(",")",",",["T_WHITESPACE","\n                        ",73],["T_CONSTANT_ENCAPSED_STRING","'rate'",74],["T_WHITESPACE"," ",74],["T_DOUBLE_ARROW","=>",74],["T_WHITESPACE"," ",74],["T_VARIABLE","$rate",74],["T_WHITESPACE","\n                    ",74],")",";",["T_WHITESPACE","\n                ",75],"}",["T_WHITESPACE"," ",76],["T_ELSE","else",76],["T_WHITESPACE"," ",76],"{",["T_WHITESPACE","\n                    ",76],["T_VARIABLE","$this",77],["T_OBJECT_OPERATOR","->",77],["T_STRING","_rates",77],"[",["T_VARIABLE","$website",77],["T_OBJECT_OPERATOR","->",77],["T_STRING","getId",77],"(",")","]",["T_WHITESPACE"," ",77],"=",["T_WHITESPACE"," ",77],["T_ARRAY","array",77],"(",["T_WHITESPACE","\n                        ",77],["T_CONSTANT_ENCAPSED_STRING","'code'",78],["T_WHITESPACE"," ",78],["T_DOUBLE_ARROW","=>",78],["T_WHITESPACE"," ",78],["T_VARIABLE","$baseCurrency",78],",",["T_WHITESPACE","\n                        ",78],["T_CONSTANT_ENCAPSED_STRING","'rate'",79],["T_WHITESPACE"," ",79],["T_DOUBLE_ARROW","=>",79],["T_WHITESPACE"," ",79],["T_LNUMBER","1",79],["T_WHITESPACE","\n                    ",79],")",";",["T_WHITESPACE","\n                ",80],"}",["T_WHITESPACE","\n            ",81],"}",["T_WHITESPACE","\n        ",82],"}",["T_WHITESPACE","\n        ",83],["T_RETURN","return",84],["T_WHITESPACE"," ",84],["T_VARIABLE","$this",84],["T_OBJECT_OPERATOR","->",84],["T_STRING","_rates",84],";",["T_WHITESPACE","\n    ",84],"}",["T_WHITESPACE","\n\n    ",85],["T_DOC_COMMENT","\/**\n     * Get additional unique fields\n     *\n     * @param array $objectArray\n     * @return array\n     *\/",87],["T_WHITESPACE","\n    ",92],["T_PROTECTED","protected",93],["T_WHITESPACE"," ",93],["T_FUNCTION","function",93],["T_WHITESPACE"," ",93],["T_STRING","_getAdditionalUniqueFields",93],"(",["T_VARIABLE","$objectArray",93],")",["T_WHITESPACE","\n    ",93],"{",["T_WHITESPACE","\n        ",94],["T_RETURN","return",95],["T_WHITESPACE"," ",95],["T_ARRAY","array",95],"(",")",";",["T_WHITESPACE","\n    ",95],"}",["T_WHITESPACE","\n\n    ",96],["T_DOC_COMMENT","\/**\n     * Whether group price value fixed or percent of original price\n     *\n     * @param Mage_Catalog_Model_Product_Type_Price $priceObject\n     * @return bool\n     *\/",98],["T_WHITESPACE","\n    ",103],["T_PROTECTED","protected",104],["T_WHITESPACE"," ",104],["T_FUNCTION","function",104],["T_WHITESPACE"," ",104],["T_STRING","_isPriceFixed",104],"(",["T_VARIABLE","$priceObject",104],")",["T_WHITESPACE","\n    ",104],"{",["T_WHITESPACE","\n        ",105],["T_RETURN","return",106],["T_WHITESPACE"," ",106],["T_VARIABLE","$priceObject",106],["T_OBJECT_OPERATOR","->",106],["T_STRING","isGroupPriceFixed",106],"(",")",";",["T_WHITESPACE","\n    ",106],"}",["T_WHITESPACE","\n\n    ",107],["T_DOC_COMMENT","\/**\n     * Validate group price data\n     *\n     * @param Mage_Catalog_Model_Product $object\n     * @throws Mage_Core_Exception\n     * @return bool\n     *\/",109],["T_WHITESPACE","\n    ",115],["T_PUBLIC","public",116],["T_WHITESPACE"," ",116],["T_FUNCTION","function",116],["T_WHITESPACE"," ",116],["T_STRING","validate",116],"(",["T_VARIABLE","$object",116],")",["T_WHITESPACE","\n    ",116],"{",["T_WHITESPACE","\n        ",117],["T_VARIABLE","$attribute",118],["T_WHITESPACE"," ",118],"=",["T_WHITESPACE"," ",118],["T_VARIABLE","$this",118],["T_OBJECT_OPERATOR","->",118],["T_STRING","getAttribute",118],"(",")",";",["T_WHITESPACE","\n        ",118],["T_VARIABLE","$priceRows",119],["T_WHITESPACE"," ",119],"=",["T_WHITESPACE"," ",119],["T_VARIABLE","$object",119],["T_OBJECT_OPERATOR","->",119],["T_STRING","getData",119],"(",["T_VARIABLE","$attribute",119],["T_OBJECT_OPERATOR","->",119],["T_STRING","getName",119],"(",")",")",";",["T_WHITESPACE","\n        ",119],["T_IF","if",120],["T_WHITESPACE"," ",120],"(",["T_EMPTY","empty",120],"(",["T_VARIABLE","$priceRows",120],")",")",["T_WHITESPACE"," ",120],"{",["T_WHITESPACE","\n            ",120],["T_RETURN","return",121],["T_WHITESPACE"," ",121],["T_STRING","true",121],";",["T_WHITESPACE","\n        ",121],"}",["T_WHITESPACE","\n\n        ",122],["T_COMMENT","\/\/ validate per website\n",124],["T_WHITESPACE","        ",125],["T_VARIABLE","$duplicates",125],["T_WHITESPACE"," ",125],"=",["T_WHITESPACE"," ",125],["T_ARRAY","array",125],"(",")",";",["T_WHITESPACE","\n        ",125],["T_FOREACH","foreach",126],["T_WHITESPACE"," ",126],"(",["T_VARIABLE","$priceRows",126],["T_WHITESPACE"," ",126],["T_AS","as",126],["T_WHITESPACE"," ",126],["T_VARIABLE","$priceRow",126],")",["T_WHITESPACE"," ",126],"{",["T_WHITESPACE","\n            ",126],["T_IF","if",127],["T_WHITESPACE"," ",127],"(","!",["T_EMPTY","empty",127],"(",["T_VARIABLE","$priceRow",127],"[",["T_CONSTANT_ENCAPSED_STRING","'delete'",127],"]",")",")",["T_WHITESPACE"," ",127],"{",["T_WHITESPACE","\n                ",127],["T_CONTINUE","continue",128],";",["T_WHITESPACE","\n            ",128],"}",["T_WHITESPACE","\n            ",129],["T_VARIABLE","$compare",130],["T_WHITESPACE"," ",130],"=",["T_WHITESPACE"," ",130],["T_STRING","join",130],"(",["T_CONSTANT_ENCAPSED_STRING","'-'",130],",",["T_WHITESPACE"," ",130],["T_STRING","array_merge",130],"(",["T_WHITESPACE","\n                ",130],["T_ARRAY","array",131],"(",["T_VARIABLE","$priceRow",131],"[",["T_CONSTANT_ENCAPSED_STRING","'website_id'",131],"]",",",["T_WHITESPACE"," ",131],["T_VARIABLE","$priceRow",131],"[",["T_CONSTANT_ENCAPSED_STRING","'cust_group'",131],"]",")",",",["T_WHITESPACE","\n                ",131],["T_VARIABLE","$this",132],["T_OBJECT_OPERATOR","->",132],["T_STRING","_getAdditionalUniqueFields",132],"(",["T_VARIABLE","$priceRow",132],")",["T_WHITESPACE","\n            ",132],")",")",";",["T_WHITESPACE","\n            ",133],["T_IF","if",134],["T_WHITESPACE"," ",134],"(",["T_ISSET","isset",134],"(",["T_VARIABLE","$duplicates",134],"[",["T_VARIABLE","$compare",134],"]",")",")",["T_WHITESPACE"," ",134],"{",["T_WHITESPACE","\n                ",134],["T_STRING","Mage",135],["T_DOUBLE_COLON","::",135],["T_STRING","throwException",135],"(",["T_VARIABLE","$this",135],["T_OBJECT_OPERATOR","->",135],["T_STRING","_getDuplicateErrorMessage",135],"(",")",")",";",["T_WHITESPACE","\n            ",135],"}",["T_WHITESPACE","\n            ",136],["T_VARIABLE","$duplicates",137],"[",["T_VARIABLE","$compare",137],"]",["T_WHITESPACE"," ",137],"=",["T_WHITESPACE"," ",137],["T_STRING","true",137],";",["T_WHITESPACE","\n        ",137],"}",["T_WHITESPACE","\n\n        ",138],["T_COMMENT","\/\/ if attribute scope is website and edit in store view scope\n",140],["T_WHITESPACE","        ",141],["T_COMMENT","\/\/ add global group prices for duplicates find\n",141],["T_WHITESPACE","        ",142],["T_IF","if",142],["T_WHITESPACE"," ",142],"(","!",["T_VARIABLE","$attribute",142],["T_OBJECT_OPERATOR","->",142],["T_STRING","isScopeGlobal",142],"(",")",["T_WHITESPACE"," ",142],["T_BOOLEAN_AND","&&",142],["T_WHITESPACE"," ",142],["T_VARIABLE","$object",142],["T_OBJECT_OPERATOR","->",142],["T_STRING","getStoreId",142],"(",")",")",["T_WHITESPACE"," ",142],"{",["T_WHITESPACE","\n            ",142],["T_VARIABLE","$origGroupPrices",143],["T_WHITESPACE"," ",143],"=",["T_WHITESPACE"," ",143],["T_VARIABLE","$object",143],["T_OBJECT_OPERATOR","->",143],["T_STRING","getOrigData",143],"(",["T_VARIABLE","$attribute",143],["T_OBJECT_OPERATOR","->",143],["T_STRING","getName",143],"(",")",")",";",["T_WHITESPACE","\n            ",143],["T_FOREACH","foreach",144],["T_WHITESPACE"," ",144],"(",["T_VARIABLE","$origGroupPrices",144],["T_WHITESPACE"," ",144],["T_AS","as",144],["T_WHITESPACE"," ",144],["T_VARIABLE","$price",144],")",["T_WHITESPACE"," ",144],"{",["T_WHITESPACE","\n                ",144],["T_IF","if",145],["T_WHITESPACE"," ",145],"(",["T_VARIABLE","$price",145],"[",["T_CONSTANT_ENCAPSED_STRING","'website_id'",145],"]",["T_WHITESPACE"," ",145],["T_IS_EQUAL","==",145],["T_WHITESPACE"," ",145],["T_LNUMBER","0",145],")",["T_WHITESPACE"," ",145],"{",["T_WHITESPACE","\n                    ",145],["T_VARIABLE","$compare",146],["T_WHITESPACE"," ",146],"=",["T_WHITESPACE"," ",146],["T_STRING","join",146],"(",["T_CONSTANT_ENCAPSED_STRING","'-'",146],",",["T_WHITESPACE"," ",146],["T_STRING","array_merge",146],"(",["T_WHITESPACE","\n                        ",146],["T_ARRAY","array",147],"(",["T_VARIABLE","$price",147],"[",["T_CONSTANT_ENCAPSED_STRING","'website_id'",147],"]",",",["T_WHITESPACE"," ",147],["T_VARIABLE","$price",147],"[",["T_CONSTANT_ENCAPSED_STRING","'cust_group'",147],"]",")",",",["T_WHITESPACE","\n                        ",147],["T_VARIABLE","$this",148],["T_OBJECT_OPERATOR","->",148],["T_STRING","_getAdditionalUniqueFields",148],"(",["T_VARIABLE","$price",148],")",["T_WHITESPACE","\n                    ",148],")",")",";",["T_WHITESPACE","\n                    ",149],["T_VARIABLE","$duplicates",150],"[",["T_VARIABLE","$compare",150],"]",["T_WHITESPACE"," ",150],"=",["T_WHITESPACE"," ",150],["T_STRING","true",150],";",["T_WHITESPACE","\n                ",150],"}",["T_WHITESPACE","\n            ",151],"}",["T_WHITESPACE","\n        ",152],"}",["T_WHITESPACE","\n\n        ",153],["T_COMMENT","\/\/ validate currency\n",155],["T_WHITESPACE","        ",156],["T_VARIABLE","$baseCurrency",156],["T_WHITESPACE"," ",156],"=",["T_WHITESPACE"," ",156],["T_STRING","Mage",156],["T_DOUBLE_COLON","::",156],["T_STRING","app",156],"(",")",["T_OBJECT_OPERATOR","->",156],["T_STRING","getBaseCurrencyCode",156],"(",")",";",["T_WHITESPACE","\n        ",156],["T_VARIABLE","$rates",157],["T_WHITESPACE"," ",157],"=",["T_WHITESPACE"," ",157],["T_VARIABLE","$this",157],["T_OBJECT_OPERATOR","->",157],["T_STRING","_getWebsiteCurrencyRates",157],"(",")",";",["T_WHITESPACE","\n        ",157],["T_FOREACH","foreach",158],["T_WHITESPACE"," ",158],"(",["T_VARIABLE","$priceRows",158],["T_WHITESPACE"," ",158],["T_AS","as",158],["T_WHITESPACE"," ",158],["T_VARIABLE","$priceRow",158],")",["T_WHITESPACE"," ",158],"{",["T_WHITESPACE","\n            ",158],["T_IF","if",159],["T_WHITESPACE"," ",159],"(","!",["T_EMPTY","empty",159],"(",["T_VARIABLE","$priceRow",159],"[",["T_CONSTANT_ENCAPSED_STRING","'delete'",159],"]",")",")",["T_WHITESPACE"," ",159],"{",["T_WHITESPACE","\n                ",159],["T_CONTINUE","continue",160],";",["T_WHITESPACE","\n            ",160],"}",["T_WHITESPACE","\n            ",161],["T_IF","if",162],["T_WHITESPACE"," ",162],"(",["T_VARIABLE","$priceRow",162],"[",["T_CONSTANT_ENCAPSED_STRING","'website_id'",162],"]",["T_WHITESPACE"," ",162],["T_IS_EQUAL","==",162],["T_WHITESPACE"," ",162],["T_LNUMBER","0",162],")",["T_WHITESPACE"," ",162],"{",["T_WHITESPACE","\n                ",162],["T_CONTINUE","continue",163],";",["T_WHITESPACE","\n            ",163],"}",["T_WHITESPACE","\n\n            ",164],["T_VARIABLE","$globalCompare",166],["T_WHITESPACE"," ",166],"=",["T_WHITESPACE"," ",166],["T_STRING","join",166],"(",["T_CONSTANT_ENCAPSED_STRING","'-'",166],",",["T_WHITESPACE"," ",166],["T_STRING","array_merge",166],"(",["T_WHITESPACE","\n                ",166],["T_ARRAY","array",167],"(",["T_LNUMBER","0",167],",",["T_WHITESPACE"," ",167],["T_VARIABLE","$priceRow",167],"[",["T_CONSTANT_ENCAPSED_STRING","'cust_group'",167],"]",")",",",["T_WHITESPACE","\n                ",167],["T_VARIABLE","$this",168],["T_OBJECT_OPERATOR","->",168],["T_STRING","_getAdditionalUniqueFields",168],"(",["T_VARIABLE","$priceRow",168],")",["T_WHITESPACE","\n            ",168],")",")",";",["T_WHITESPACE","\n            ",169],["T_VARIABLE","$websiteCurrency",170],["T_WHITESPACE"," ",170],"=",["T_WHITESPACE"," ",170],["T_VARIABLE","$rates",170],"[",["T_VARIABLE","$priceRow",170],"[",["T_CONSTANT_ENCAPSED_STRING","'website_id'",170],"]","]","[",["T_CONSTANT_ENCAPSED_STRING","'code'",170],"]",";",["T_WHITESPACE","\n\n            ",170],["T_IF","if",172],["T_WHITESPACE"," ",172],"(",["T_VARIABLE","$baseCurrency",172],["T_WHITESPACE"," ",172],["T_IS_EQUAL","==",172],["T_WHITESPACE"," ",172],["T_VARIABLE","$websiteCurrency",172],["T_WHITESPACE"," ",172],["T_BOOLEAN_AND","&&",172],["T_WHITESPACE"," ",172],["T_ISSET","isset",172],"(",["T_VARIABLE","$duplicates",172],"[",["T_VARIABLE","$globalCompare",172],"]",")",")",["T_WHITESPACE"," ",172],"{",["T_WHITESPACE","\n                ",172],["T_STRING","Mage",173],["T_DOUBLE_COLON","::",173],["T_STRING","throwException",173],"(",["T_VARIABLE","$this",173],["T_OBJECT_OPERATOR","->",173],["T_STRING","_getDuplicateErrorMessage",173],"(",")",")",";",["T_WHITESPACE","\n            ",173],"}",["T_WHITESPACE","\n        ",174],"}",["T_WHITESPACE","\n\n        ",175],["T_RETURN","return",177],["T_WHITESPACE"," ",177],["T_STRING","true",177],";",["T_WHITESPACE","\n    ",177],"}",["T_WHITESPACE","\n\n    ",178],["T_DOC_COMMENT","\/**\n     * Prepare group prices data for website\n     *\n     * @param array $priceData\n     * @param string $productTypeId\n     * @param int $websiteId\n     * @return array\n     *\/",180],["T_WHITESPACE","\n    ",187],["T_PUBLIC","public",188],["T_WHITESPACE"," ",188],["T_FUNCTION","function",188],["T_WHITESPACE"," ",188],["T_STRING","preparePriceData",188],"(",["T_ARRAY","array",188],["T_WHITESPACE"," ",188],["T_VARIABLE","$priceData",188],",",["T_WHITESPACE"," ",188],["T_VARIABLE","$productTypeId",188],",",["T_WHITESPACE"," ",188],["T_VARIABLE","$websiteId",188],")",["T_WHITESPACE","\n    ",188],"{",["T_WHITESPACE","\n        ",189],["T_VARIABLE","$rates",190],["T_WHITESPACE","  ",190],"=",["T_WHITESPACE"," ",190],["T_VARIABLE","$this",190],["T_OBJECT_OPERATOR","->",190],["T_STRING","_getWebsiteCurrencyRates",190],"(",")",";",["T_WHITESPACE","\n        ",190],["T_VARIABLE","$data",191],["T_WHITESPACE","   ",191],"=",["T_WHITESPACE"," ",191],["T_ARRAY","array",191],"(",")",";",["T_WHITESPACE","\n        ",191],["T_VARIABLE","$price",192],["T_WHITESPACE","  ",192],"=",["T_WHITESPACE"," ",192],["T_STRING","Mage",192],["T_DOUBLE_COLON","::",192],["T_STRING","getSingleton",192],"(",["T_CONSTANT_ENCAPSED_STRING","'catalog\/product_type'",192],")",["T_OBJECT_OPERATOR","->",192],["T_STRING","priceFactory",192],"(",["T_VARIABLE","$productTypeId",192],")",";",["T_WHITESPACE","\n        ",192],["T_FOREACH","foreach",193],["T_WHITESPACE"," ",193],"(",["T_VARIABLE","$priceData",193],["T_WHITESPACE"," ",193],["T_AS","as",193],["T_WHITESPACE"," ",193],["T_VARIABLE","$v",193],")",["T_WHITESPACE"," ",193],"{",["T_WHITESPACE","\n            ",193],["T_VARIABLE","$key",194],["T_WHITESPACE"," ",194],"=",["T_WHITESPACE"," ",194],["T_STRING","join",194],"(",["T_CONSTANT_ENCAPSED_STRING","'-'",194],",",["T_WHITESPACE"," ",194],["T_STRING","array_merge",194],"(",["T_ARRAY","array",194],"(",["T_VARIABLE","$v",194],"[",["T_CONSTANT_ENCAPSED_STRING","'cust_group'",194],"]",")",",",["T_WHITESPACE"," ",194],["T_VARIABLE","$this",194],["T_OBJECT_OPERATOR","->",194],["T_STRING","_getAdditionalUniqueFields",194],"(",["T_VARIABLE","$v",194],")",")",")",";",["T_WHITESPACE","\n            ",194],["T_IF","if",195],["T_WHITESPACE"," ",195],"(",["T_VARIABLE","$v",195],"[",["T_CONSTANT_ENCAPSED_STRING","'website_id'",195],"]",["T_WHITESPACE"," ",195],["T_IS_EQUAL","==",195],["T_WHITESPACE"," ",195],["T_VARIABLE","$websiteId",195],")",["T_WHITESPACE"," ",195],"{",["T_WHITESPACE","\n                ",195],["T_VARIABLE","$data",196],"[",["T_VARIABLE","$key",196],"]",["T_WHITESPACE"," ",196],"=",["T_WHITESPACE"," ",196],["T_VARIABLE","$v",196],";",["T_WHITESPACE","\n                ",196],["T_VARIABLE","$data",197],"[",["T_VARIABLE","$key",197],"]","[",["T_CONSTANT_ENCAPSED_STRING","'website_price'",197],"]",["T_WHITESPACE"," ",197],"=",["T_WHITESPACE"," ",197],["T_VARIABLE","$v",197],"[",["T_CONSTANT_ENCAPSED_STRING","'price'",197],"]",";",["T_WHITESPACE","\n            ",197],"}",["T_WHITESPACE"," ",198],["T_ELSE","else",198],["T_WHITESPACE"," ",198],["T_IF","if",198],["T_WHITESPACE"," ",198],"(",["T_VARIABLE","$v",198],"[",["T_CONSTANT_ENCAPSED_STRING","'website_id'",198],"]",["T_WHITESPACE"," ",198],["T_IS_EQUAL","==",198],["T_WHITESPACE"," ",198],["T_LNUMBER","0",198],["T_WHITESPACE"," ",198],["T_BOOLEAN_AND","&&",198],["T_WHITESPACE"," ",198],"!",["T_ISSET","isset",198],"(",["T_VARIABLE","$data",198],"[",["T_VARIABLE","$key",198],"]",")",")",["T_WHITESPACE"," ",198],"{",["T_WHITESPACE","\n                ",198],["T_VARIABLE","$data",199],"[",["T_VARIABLE","$key",199],"]",["T_WHITESPACE"," ",199],"=",["T_WHITESPACE"," ",199],["T_VARIABLE","$v",199],";",["T_WHITESPACE","\n                ",199],["T_VARIABLE","$data",200],"[",["T_VARIABLE","$key",200],"]","[",["T_CONSTANT_ENCAPSED_STRING","'website_id'",200],"]",["T_WHITESPACE"," ",200],"=",["T_WHITESPACE"," ",200],["T_VARIABLE","$websiteId",200],";",["T_WHITESPACE","\n                ",200],["T_IF","if",201],["T_WHITESPACE"," ",201],"(",["T_VARIABLE","$this",201],["T_OBJECT_OPERATOR","->",201],["T_STRING","_isPriceFixed",201],"(",["T_VARIABLE","$price",201],")",")",["T_WHITESPACE"," ",201],"{",["T_WHITESPACE","\n                    ",201],["T_VARIABLE","$data",202],"[",["T_VARIABLE","$key",202],"]","[",["T_CONSTANT_ENCAPSED_STRING","'price'",202],"]",["T_WHITESPACE"," ",202],"=",["T_WHITESPACE"," ",202],["T_VARIABLE","$v",202],"[",["T_CONSTANT_ENCAPSED_STRING","'price'",202],"]",["T_WHITESPACE"," ",202],"*",["T_WHITESPACE"," ",202],["T_VARIABLE","$rates",202],"[",["T_VARIABLE","$websiteId",202],"]","[",["T_CONSTANT_ENCAPSED_STRING","'rate'",202],"]",";",["T_WHITESPACE","\n                    ",202],["T_VARIABLE","$data",203],"[",["T_VARIABLE","$key",203],"]","[",["T_CONSTANT_ENCAPSED_STRING","'website_price'",203],"]",["T_WHITESPACE"," ",203],"=",["T_WHITESPACE"," ",203],["T_VARIABLE","$v",203],"[",["T_CONSTANT_ENCAPSED_STRING","'price'",203],"]",["T_WHITESPACE"," ",203],"*",["T_WHITESPACE"," ",203],["T_VARIABLE","$rates",203],"[",["T_VARIABLE","$websiteId",203],"]","[",["T_CONSTANT_ENCAPSED_STRING","'rate'",203],"]",";",["T_WHITESPACE","\n                ",203],"}",["T_WHITESPACE","\n            ",204],"}",["T_WHITESPACE","\n        ",205],"}",["T_WHITESPACE","\n\n        ",206],["T_RETURN","return",208],["T_WHITESPACE"," ",208],["T_VARIABLE","$data",208],";",["T_WHITESPACE","\n    ",208],"}",["T_WHITESPACE","\n\n    ",209],["T_DOC_COMMENT","\/**\n     * Assign group prices to product data\n     *\n     * @param Mage_Catalog_Model_Product $object\n     * @return Mage_Catalog_Model_Product_Attribute_Backend_Groupprice_Abstract\n     *\/",211],["T_WHITESPACE","\n    ",216],["T_PUBLIC","public",217],["T_WHITESPACE"," ",217],["T_FUNCTION","function",217],["T_WHITESPACE"," ",217],["T_STRING","afterLoad",217],"(",["T_VARIABLE","$object",217],")",["T_WHITESPACE","\n    ",217],"{",["T_WHITESPACE","\n        ",218],["T_VARIABLE","$storeId",219],["T_WHITESPACE","   ",219],"=",["T_WHITESPACE"," ",219],["T_VARIABLE","$object",219],["T_OBJECT_OPERATOR","->",219],["T_STRING","getStoreId",219],"(",")",";",["T_WHITESPACE","\n        ",219],["T_VARIABLE","$websiteId",220],["T_WHITESPACE"," ",220],"=",["T_WHITESPACE"," ",220],["T_STRING","null",220],";",["T_WHITESPACE","\n        ",220],["T_IF","if",221],["T_WHITESPACE"," ",221],"(",["T_VARIABLE","$this",221],["T_OBJECT_OPERATOR","->",221],["T_STRING","getAttribute",221],"(",")",["T_OBJECT_OPERATOR","->",221],["T_STRING","isScopeGlobal",221],"(",")",")",["T_WHITESPACE"," ",221],"{",["T_WHITESPACE","\n            ",221],["T_VARIABLE","$websiteId",222],["T_WHITESPACE"," ",222],"=",["T_WHITESPACE"," ",222],["T_LNUMBER","0",222],";",["T_WHITESPACE","\n        ",222],"}",["T_WHITESPACE"," ",223],["T_ELSE","else",223],["T_WHITESPACE"," ",223],["T_IF","if",223],["T_WHITESPACE"," ",223],"(",["T_VARIABLE","$storeId",223],")",["T_WHITESPACE"," ",223],"{",["T_WHITESPACE","\n            ",223],["T_VARIABLE","$websiteId",224],["T_WHITESPACE"," ",224],"=",["T_WHITESPACE"," ",224],["T_STRING","Mage",224],["T_DOUBLE_COLON","::",224],["T_STRING","app",224],"(",")",["T_OBJECT_OPERATOR","->",224],["T_STRING","getStore",224],"(",["T_VARIABLE","$storeId",224],")",["T_OBJECT_OPERATOR","->",224],["T_STRING","getWebsiteId",224],"(",")",";",["T_WHITESPACE","\n        ",224],"}",["T_WHITESPACE","\n\n        ",225],["T_VARIABLE","$data",227],["T_WHITESPACE"," ",227],"=",["T_WHITESPACE"," ",227],["T_VARIABLE","$this",227],["T_OBJECT_OPERATOR","->",227],["T_STRING","_getResource",227],"(",")",["T_OBJECT_OPERATOR","->",227],["T_STRING","loadPriceData",227],"(",["T_VARIABLE","$object",227],["T_OBJECT_OPERATOR","->",227],["T_STRING","getId",227],"(",")",",",["T_WHITESPACE"," ",227],["T_VARIABLE","$websiteId",227],")",";",["T_WHITESPACE","\n        ",227],["T_FOREACH","foreach",228],["T_WHITESPACE"," ",228],"(",["T_VARIABLE","$data",228],["T_WHITESPACE"," ",228],["T_AS","as",228],["T_WHITESPACE"," ",228],["T_VARIABLE","$k",228],["T_WHITESPACE"," ",228],["T_DOUBLE_ARROW","=>",228],["T_WHITESPACE"," ",228],["T_VARIABLE","$v",228],")",["T_WHITESPACE"," ",228],"{",["T_WHITESPACE","\n            ",228],["T_VARIABLE","$data",229],"[",["T_VARIABLE","$k",229],"]","[",["T_CONSTANT_ENCAPSED_STRING","'website_price'",229],"]",["T_WHITESPACE"," ",229],"=",["T_WHITESPACE"," ",229],["T_VARIABLE","$v",229],"[",["T_CONSTANT_ENCAPSED_STRING","'price'",229],"]",";",["T_WHITESPACE","\n            ",229],["T_VARIABLE","$data",230],"[",["T_VARIABLE","$k",230],"]","[",["T_CONSTANT_ENCAPSED_STRING","'is_percent'",230],"]",["T_WHITESPACE","    ",230],"=",["T_WHITESPACE"," ",230],["T_ISSET","isset",230],"(",["T_VARIABLE","$v",230],"[",["T_CONSTANT_ENCAPSED_STRING","'is_percent'",230],"]",")",["T_WHITESPACE"," ",230],"?",["T_WHITESPACE"," ",230],["T_ISSET","isset",230],"(",["T_VARIABLE","$v",230],"[",["T_CONSTANT_ENCAPSED_STRING","'is_percent'",230],"]",")",["T_WHITESPACE"," ",230],":",["T_WHITESPACE"," ",230],["T_LNUMBER","0",230],";",["T_WHITESPACE","\n            ",230],["T_IF","if",231],["T_WHITESPACE"," ",231],"(",["T_VARIABLE","$v",231],"[",["T_CONSTANT_ENCAPSED_STRING","'all_groups'",231],"]",")",["T_WHITESPACE"," ",231],"{",["T_WHITESPACE","\n                ",231],["T_VARIABLE","$data",232],"[",["T_VARIABLE","$k",232],"]","[",["T_CONSTANT_ENCAPSED_STRING","'cust_group'",232],"]",["T_WHITESPACE"," ",232],"=",["T_WHITESPACE"," ",232],["T_STRING","Mage_Customer_Model_Group",232],["T_DOUBLE_COLON","::",232],["T_STRING","CUST_GROUP_ALL",232],";",["T_WHITESPACE","\n            ",232],"}",["T_WHITESPACE","\n        ",233],"}",["T_WHITESPACE","\n\n        ",234],["T_IF","if",236],["T_WHITESPACE"," ",236],"(","!",["T_VARIABLE","$object",236],["T_OBJECT_OPERATOR","->",236],["T_STRING","getData",236],"(",["T_CONSTANT_ENCAPSED_STRING","'_edit_mode'",236],")",["T_WHITESPACE"," ",236],["T_BOOLEAN_AND","&&",236],["T_WHITESPACE"," ",236],["T_VARIABLE","$websiteId",236],")",["T_WHITESPACE"," ",236],"{",["T_WHITESPACE","\n            ",236],["T_VARIABLE","$data",237],["T_WHITESPACE"," ",237],"=",["T_WHITESPACE"," ",237],["T_VARIABLE","$this",237],["T_OBJECT_OPERATOR","->",237],["T_STRING","preparePriceData",237],"(",["T_VARIABLE","$data",237],",",["T_WHITESPACE"," ",237],["T_VARIABLE","$object",237],["T_OBJECT_OPERATOR","->",237],["T_STRING","getTypeId",237],"(",")",",",["T_WHITESPACE"," ",237],["T_VARIABLE","$websiteId",237],")",";",["T_WHITESPACE","\n        ",237],"}",["T_WHITESPACE","\n\n        ",238],["T_VARIABLE","$object",240],["T_OBJECT_OPERATOR","->",240],["T_STRING","setData",240],"(",["T_VARIABLE","$this",240],["T_OBJECT_OPERATOR","->",240],["T_STRING","getAttribute",240],"(",")",["T_OBJECT_OPERATOR","->",240],["T_STRING","getName",240],"(",")",",",["T_WHITESPACE"," ",240],["T_VARIABLE","$data",240],")",";",["T_WHITESPACE","\n        ",240],["T_VARIABLE","$object",241],["T_OBJECT_OPERATOR","->",241],["T_STRING","setOrigData",241],"(",["T_VARIABLE","$this",241],["T_OBJECT_OPERATOR","->",241],["T_STRING","getAttribute",241],"(",")",["T_OBJECT_OPERATOR","->",241],["T_STRING","getName",241],"(",")",",",["T_WHITESPACE"," ",241],["T_VARIABLE","$data",241],")",";",["T_WHITESPACE","\n\n        ",241],["T_VARIABLE","$valueChangedKey",243],["T_WHITESPACE"," ",243],"=",["T_WHITESPACE"," ",243],["T_VARIABLE","$this",243],["T_OBJECT_OPERATOR","->",243],["T_STRING","getAttribute",243],"(",")",["T_OBJECT_OPERATOR","->",243],["T_STRING","getName",243],"(",")",["T_WHITESPACE"," ",243],".",["T_WHITESPACE"," ",243],["T_CONSTANT_ENCAPSED_STRING","'_changed'",243],";",["T_WHITESPACE","\n        ",243],["T_VARIABLE","$object",244],["T_OBJECT_OPERATOR","->",244],["T_STRING","setOrigData",244],"(",["T_VARIABLE","$valueChangedKey",244],",",["T_WHITESPACE"," ",244],["T_LNUMBER","0",244],")",";",["T_WHITESPACE","\n        ",244],["T_VARIABLE","$object",245],["T_OBJECT_OPERATOR","->",245],["T_STRING","setData",245],"(",["T_VARIABLE","$valueChangedKey",245],",",["T_WHITESPACE"," ",245],["T_LNUMBER","0",245],")",";",["T_WHITESPACE","\n\n        ",245],["T_RETURN","return",247],["T_WHITESPACE"," ",247],["T_VARIABLE","$this",247],";",["T_WHITESPACE","\n    ",247],"}",["T_WHITESPACE","\n\n    ",248],["T_DOC_COMMENT","\/**\n     * After Save Attribute manipulation\n     *\n     * @param Mage_Catalog_Model_Product $object\n     * @return Mage_Catalog_Model_Product_Attribute_Backend_Groupprice_Abstract\n     *\/",250],["T_WHITESPACE","\n    ",255],["T_PUBLIC","public",256],["T_WHITESPACE"," ",256],["T_FUNCTION","function",256],["T_WHITESPACE"," ",256],["T_STRING","afterSave",256],"(",["T_VARIABLE","$object",256],")",["T_WHITESPACE","\n    ",256],"{",["T_WHITESPACE","\n        ",257],["T_VARIABLE","$websiteId",258],["T_WHITESPACE","  ",258],"=",["T_WHITESPACE"," ",258],["T_STRING","Mage",258],["T_DOUBLE_COLON","::",258],["T_STRING","app",258],"(",")",["T_OBJECT_OPERATOR","->",258],["T_STRING","getStore",258],"(",["T_VARIABLE","$object",258],["T_OBJECT_OPERATOR","->",258],["T_STRING","getStoreId",258],"(",")",")",["T_OBJECT_OPERATOR","->",258],["T_STRING","getWebsiteId",258],"(",")",";",["T_WHITESPACE","\n        ",258],["T_VARIABLE","$isGlobal",259],["T_WHITESPACE","   ",259],"=",["T_WHITESPACE"," ",259],["T_VARIABLE","$this",259],["T_OBJECT_OPERATOR","->",259],["T_STRING","getAttribute",259],"(",")",["T_OBJECT_OPERATOR","->",259],["T_STRING","isScopeGlobal",259],"(",")",["T_WHITESPACE"," ",259],["T_BOOLEAN_OR","||",259],["T_WHITESPACE"," ",259],["T_VARIABLE","$websiteId",259],["T_WHITESPACE"," ",259],["T_IS_EQUAL","==",259],["T_WHITESPACE"," ",259],["T_LNUMBER","0",259],";",["T_WHITESPACE","\n\n        ",259],["T_VARIABLE","$priceRows",261],["T_WHITESPACE"," ",261],"=",["T_WHITESPACE"," ",261],["T_VARIABLE","$object",261],["T_OBJECT_OPERATOR","->",261],["T_STRING","getData",261],"(",["T_VARIABLE","$this",261],["T_OBJECT_OPERATOR","->",261],["T_STRING","getAttribute",261],"(",")",["T_OBJECT_OPERATOR","->",261],["T_STRING","getName",261],"(",")",")",";",["T_WHITESPACE","\n        ",261],["T_IF","if",262],["T_WHITESPACE"," ",262],"(",["T_EMPTY","empty",262],"(",["T_VARIABLE","$priceRows",262],")",")",["T_WHITESPACE"," ",262],"{",["T_WHITESPACE","\n            ",262],["T_IF","if",263],["T_WHITESPACE"," ",263],"(",["T_VARIABLE","$isGlobal",263],")",["T_WHITESPACE"," ",263],"{",["T_WHITESPACE","\n                ",263],["T_VARIABLE","$this",264],["T_OBJECT_OPERATOR","->",264],["T_STRING","_getResource",264],"(",")",["T_OBJECT_OPERATOR","->",264],["T_STRING","deletePriceData",264],"(",["T_VARIABLE","$object",264],["T_OBJECT_OPERATOR","->",264],["T_STRING","getId",264],"(",")",")",";",["T_WHITESPACE","\n            ",264],"}",["T_WHITESPACE"," ",265],["T_ELSE","else",265],["T_WHITESPACE"," ",265],"{",["T_WHITESPACE","\n                ",265],["T_VARIABLE","$this",266],["T_OBJECT_OPERATOR","->",266],["T_STRING","_getResource",266],"(",")",["T_OBJECT_OPERATOR","->",266],["T_STRING","deletePriceData",266],"(",["T_VARIABLE","$object",266],["T_OBJECT_OPERATOR","->",266],["T_STRING","getId",266],"(",")",",",["T_WHITESPACE"," ",266],["T_VARIABLE","$websiteId",266],")",";",["T_WHITESPACE","\n            ",266],"}",["T_WHITESPACE","\n            ",267],["T_RETURN","return",268],["T_WHITESPACE"," ",268],["T_VARIABLE","$this",268],";",["T_WHITESPACE","\n        ",268],"}",["T_WHITESPACE","\n\n        ",269],["T_VARIABLE","$old",271],["T_WHITESPACE"," ",271],"=",["T_WHITESPACE"," ",271],["T_ARRAY","array",271],"(",")",";",["T_WHITESPACE","\n        ",271],["T_VARIABLE","$new",272],["T_WHITESPACE"," ",272],"=",["T_WHITESPACE"," ",272],["T_ARRAY","array",272],"(",")",";",["T_WHITESPACE","\n\n        ",272],["T_COMMENT","\/\/ prepare original data for compare\n",274],["T_WHITESPACE","        ",275],["T_VARIABLE","$origGroupPrices",275],["T_WHITESPACE"," ",275],"=",["T_WHITESPACE"," ",275],["T_VARIABLE","$object",275],["T_OBJECT_OPERATOR","->",275],["T_STRING","getOrigData",275],"(",["T_VARIABLE","$this",275],["T_OBJECT_OPERATOR","->",275],["T_STRING","getAttribute",275],"(",")",["T_OBJECT_OPERATOR","->",275],["T_STRING","getName",275],"(",")",")",";",["T_WHITESPACE","\n        ",275],["T_IF","if",276],["T_WHITESPACE"," ",276],"(","!",["T_STRING","is_array",276],"(",["T_VARIABLE","$origGroupPrices",276],")",")",["T_WHITESPACE"," ",276],"{",["T_WHITESPACE","\n            ",276],["T_VARIABLE","$origGroupPrices",277],["T_WHITESPACE"," ",277],"=",["T_WHITESPACE"," ",277],["T_ARRAY","array",277],"(",")",";",["T_WHITESPACE","\n        ",277],"}",["T_WHITESPACE","\n        ",278],["T_FOREACH","foreach",279],["T_WHITESPACE"," ",279],"(",["T_VARIABLE","$origGroupPrices",279],["T_WHITESPACE"," ",279],["T_AS","as",279],["T_WHITESPACE"," ",279],["T_VARIABLE","$data",279],")",["T_WHITESPACE"," ",279],"{",["T_WHITESPACE","\n            ",279],["T_IF","if",280],["T_WHITESPACE"," ",280],"(",["T_VARIABLE","$data",280],"[",["T_CONSTANT_ENCAPSED_STRING","'website_id'",280],"]",["T_WHITESPACE"," ",280],">",["T_WHITESPACE"," ",280],["T_LNUMBER","0",280],["T_WHITESPACE"," ",280],["T_BOOLEAN_OR","||",280],["T_WHITESPACE"," ",280],"(",["T_VARIABLE","$data",280],"[",["T_CONSTANT_ENCAPSED_STRING","'website_id'",280],"]",["T_WHITESPACE"," ",280],["T_IS_EQUAL","==",280],["T_WHITESPACE"," ",280],["T_CONSTANT_ENCAPSED_STRING","'0'",280],["T_WHITESPACE"," ",280],["T_BOOLEAN_AND","&&",280],["T_WHITESPACE"," ",280],["T_VARIABLE","$isGlobal",280],")",")",["T_WHITESPACE"," ",280],"{",["T_WHITESPACE","\n                ",280],["T_VARIABLE","$key",281],["T_WHITESPACE"," ",281],"=",["T_WHITESPACE"," ",281],["T_STRING","join",281],"(",["T_CONSTANT_ENCAPSED_STRING","'-'",281],",",["T_WHITESPACE"," ",281],["T_STRING","array_merge",281],"(",["T_WHITESPACE","\n                    ",281],["T_ARRAY","array",282],"(",["T_VARIABLE","$data",282],"[",["T_CONSTANT_ENCAPSED_STRING","'website_id'",282],"]",",",["T_WHITESPACE"," ",282],["T_VARIABLE","$data",282],"[",["T_CONSTANT_ENCAPSED_STRING","'cust_group'",282],"]",")",",",["T_WHITESPACE","\n                    ",282],["T_VARIABLE","$this",283],["T_OBJECT_OPERATOR","->",283],["T_STRING","_getAdditionalUniqueFields",283],"(",["T_VARIABLE","$data",283],")",["T_WHITESPACE","\n                ",283],")",")",";",["T_WHITESPACE","\n                ",284],["T_VARIABLE","$old",285],"[",["T_VARIABLE","$key",285],"]",["T_WHITESPACE"," ",285],"=",["T_WHITESPACE"," ",285],["T_VARIABLE","$data",285],";",["T_WHITESPACE","\n            ",285],"}",["T_WHITESPACE","\n        ",286],"}",["T_WHITESPACE","\n\n        ",287],["T_COMMENT","\/\/ prepare data for save\n",289],["T_WHITESPACE","        ",290],["T_FOREACH","foreach",290],["T_WHITESPACE"," ",290],"(",["T_VARIABLE","$priceRows",290],["T_WHITESPACE"," ",290],["T_AS","as",290],["T_WHITESPACE"," ",290],["T_VARIABLE","$data",290],")",["T_WHITESPACE"," ",290],"{",["T_WHITESPACE","\n            ",290],["T_VARIABLE","$hasEmptyData",291],["T_WHITESPACE"," ",291],"=",["T_WHITESPACE"," ",291],["T_STRING","false",291],";",["T_WHITESPACE","\n            ",291],["T_FOREACH","foreach",292],["T_WHITESPACE"," ",292],"(",["T_VARIABLE","$this",292],["T_OBJECT_OPERATOR","->",292],["T_STRING","_getAdditionalUniqueFields",292],"(",["T_VARIABLE","$data",292],")",["T_WHITESPACE"," ",292],["T_AS","as",292],["T_WHITESPACE"," ",292],["T_VARIABLE","$field",292],")",["T_WHITESPACE"," ",292],"{",["T_WHITESPACE","\n                ",292],["T_IF","if",293],["T_WHITESPACE"," ",293],"(",["T_EMPTY","empty",293],"(",["T_VARIABLE","$field",293],")",")",["T_WHITESPACE"," ",293],"{",["T_WHITESPACE","\n                    ",293],["T_VARIABLE","$hasEmptyData",294],["T_WHITESPACE"," ",294],"=",["T_WHITESPACE"," ",294],["T_STRING","true",294],";",["T_WHITESPACE","\n                    ",294],["T_BREAK","break",295],";",["T_WHITESPACE","\n                ",295],"}",["T_WHITESPACE","\n            ",296],"}",["T_WHITESPACE","\n\n            ",297],["T_IF","if",299],["T_WHITESPACE"," ",299],"(",["T_VARIABLE","$hasEmptyData",299],["T_WHITESPACE"," ",299],["T_BOOLEAN_OR","||",299],["T_WHITESPACE"," ",299],"!",["T_ISSET","isset",299],"(",["T_VARIABLE","$data",299],"[",["T_CONSTANT_ENCAPSED_STRING","'cust_group'",299],"]",")",["T_WHITESPACE"," ",299],["T_BOOLEAN_OR","||",299],["T_WHITESPACE"," ",299],"!",["T_EMPTY","empty",299],"(",["T_VARIABLE","$data",299],"[",["T_CONSTANT_ENCAPSED_STRING","'delete'",299],"]",")",")",["T_WHITESPACE"," ",299],"{",["T_WHITESPACE","\n                ",299],["T_CONTINUE","continue",300],";",["T_WHITESPACE","\n            ",300],"}",["T_WHITESPACE","\n            ",301],["T_IF","if",302],["T_WHITESPACE"," ",302],"(",["T_VARIABLE","$this",302],["T_OBJECT_OPERATOR","->",302],["T_STRING","getAttribute",302],"(",")",["T_OBJECT_OPERATOR","->",302],["T_STRING","isScopeGlobal",302],"(",")",["T_WHITESPACE"," ",302],["T_BOOLEAN_AND","&&",302],["T_WHITESPACE"," ",302],["T_VARIABLE","$data",302],"[",["T_CONSTANT_ENCAPSED_STRING","'website_id'",302],"]",["T_WHITESPACE"," ",302],">",["T_WHITESPACE"," ",302],["T_LNUMBER","0",302],")",["T_WHITESPACE"," ",302],"{",["T_WHITESPACE","\n                ",302],["T_CONTINUE","continue",303],";",["T_WHITESPACE","\n            ",303],"}",["T_WHITESPACE","\n            ",304],["T_IF","if",305],["T_WHITESPACE"," ",305],"(","!",["T_VARIABLE","$isGlobal",305],["T_WHITESPACE"," ",305],["T_BOOLEAN_AND","&&",305],["T_WHITESPACE"," ",305],["T_INT_CAST","(int)",305],["T_VARIABLE","$data",305],"[",["T_CONSTANT_ENCAPSED_STRING","'website_id'",305],"]",["T_WHITESPACE"," ",305],["T_IS_EQUAL","==",305],["T_WHITESPACE"," ",305],["T_LNUMBER","0",305],")",["T_WHITESPACE"," ",305],"{",["T_WHITESPACE","\n                ",305],["T_CONTINUE","continue",306],";",["T_WHITESPACE","\n            ",306],"}",["T_WHITESPACE","\n\n            ",307],["T_VARIABLE","$key",309],["T_WHITESPACE"," ",309],"=",["T_WHITESPACE"," ",309],["T_STRING","join",309],"(",["T_CONSTANT_ENCAPSED_STRING","'-'",309],",",["T_WHITESPACE"," ",309],["T_STRING","array_merge",309],"(",["T_WHITESPACE","\n                ",309],["T_ARRAY","array",310],"(",["T_VARIABLE","$data",310],"[",["T_CONSTANT_ENCAPSED_STRING","'website_id'",310],"]",",",["T_WHITESPACE"," ",310],["T_VARIABLE","$data",310],"[",["T_CONSTANT_ENCAPSED_STRING","'cust_group'",310],"]",")",",",["T_WHITESPACE","\n                ",310],["T_VARIABLE","$this",311],["T_OBJECT_OPERATOR","->",311],["T_STRING","_getAdditionalUniqueFields",311],"(",["T_VARIABLE","$data",311],")",["T_WHITESPACE","\n            ",311],")",")",";",["T_WHITESPACE","\n\n            ",312],["T_VARIABLE","$useForAllGroups",314],["T_WHITESPACE"," ",314],"=",["T_WHITESPACE"," ",314],["T_VARIABLE","$data",314],"[",["T_CONSTANT_ENCAPSED_STRING","'cust_group'",314],"]",["T_WHITESPACE"," ",314],["T_IS_EQUAL","==",314],["T_WHITESPACE"," ",314],["T_STRING","Mage_Customer_Model_Group",314],["T_DOUBLE_COLON","::",314],["T_STRING","CUST_GROUP_ALL",314],";",["T_WHITESPACE","\n            ",314],["T_VARIABLE","$customerGroupId",315],["T_WHITESPACE"," ",315],"=",["T_WHITESPACE"," ",315],"!",["T_VARIABLE","$useForAllGroups",315],["T_WHITESPACE"," ",315],"?",["T_WHITESPACE"," ",315],["T_VARIABLE","$data",315],"[",["T_CONSTANT_ENCAPSED_STRING","'cust_group'",315],"]",["T_WHITESPACE"," ",315],":",["T_WHITESPACE"," ",315],["T_LNUMBER","0",315],";",["T_WHITESPACE","\n\n            ",315],["T_VARIABLE","$new",317],"[",["T_VARIABLE","$key",317],"]",["T_WHITESPACE"," ",317],"=",["T_WHITESPACE"," ",317],["T_STRING","array_merge",317],"(",["T_ARRAY","array",317],"(",["T_WHITESPACE","\n                ",317],["T_CONSTANT_ENCAPSED_STRING","'website_id'",318],["T_WHITESPACE","        ",318],["T_DOUBLE_ARROW","=>",318],["T_WHITESPACE"," ",318],["T_VARIABLE","$data",318],"[",["T_CONSTANT_ENCAPSED_STRING","'website_id'",318],"]",",",["T_WHITESPACE","\n                ",318],["T_CONSTANT_ENCAPSED_STRING","'all_groups'",319],["T_WHITESPACE","        ",319],["T_DOUBLE_ARROW","=>",319],["T_WHITESPACE"," ",319],["T_VARIABLE","$useForAllGroups",319],["T_WHITESPACE"," ",319],"?",["T_WHITESPACE"," ",319],["T_LNUMBER","1",319],["T_WHITESPACE"," ",319],":",["T_WHITESPACE"," ",319],["T_LNUMBER","0",319],",",["T_WHITESPACE","\n                ",319],["T_CONSTANT_ENCAPSED_STRING","'customer_group_id'",320],["T_WHITESPACE"," ",320],["T_DOUBLE_ARROW","=>",320],["T_WHITESPACE"," ",320],["T_VARIABLE","$customerGroupId",320],",",["T_WHITESPACE","\n                ",320],["T_CONSTANT_ENCAPSED_STRING","'value'",321],["T_WHITESPACE","             ",321],["T_DOUBLE_ARROW","=>",321],["T_WHITESPACE"," ",321],["T_VARIABLE","$data",321],"[",["T_CONSTANT_ENCAPSED_STRING","'price'",321],"]",",",["T_WHITESPACE","\n                ",321],["T_CONSTANT_ENCAPSED_STRING","'is_percent'",322],["T_WHITESPACE","        ",322],["T_DOUBLE_ARROW","=>",322],["T_WHITESPACE"," ",322],["T_ISSET","isset",322],"(",["T_VARIABLE","$data",322],"[",["T_CONSTANT_ENCAPSED_STRING","'is_percent'",322],"]",")",["T_WHITESPACE"," ",322],"?",["T_WHITESPACE"," ",322],["T_VARIABLE","$data",322],"[",["T_CONSTANT_ENCAPSED_STRING","'is_percent'",322],"]",["T_WHITESPACE"," ",322],":",["T_WHITESPACE"," ",322],["T_LNUMBER","0",322],",",["T_WHITESPACE","\n            ",322],")",",",["T_WHITESPACE"," ",323],["T_VARIABLE","$this",323],["T_OBJECT_OPERATOR","->",323],["T_STRING","_getAdditionalUniqueFields",323],"(",["T_VARIABLE","$data",323],")",")",";",["T_WHITESPACE","\n        ",323],"}",["T_WHITESPACE","\n\n        ",324],["T_VARIABLE","$delete",326],["T_WHITESPACE"," ",326],"=",["T_WHITESPACE"," ",326],["T_STRING","array_diff_key",326],"(",["T_VARIABLE","$old",326],",",["T_WHITESPACE"," ",326],["T_VARIABLE","$new",326],")",";",["T_WHITESPACE","\n        ",326],["T_VARIABLE","$insert",327],["T_WHITESPACE"," ",327],"=",["T_WHITESPACE"," ",327],["T_STRING","array_diff_key",327],"(",["T_VARIABLE","$new",327],",",["T_WHITESPACE"," ",327],["T_VARIABLE","$old",327],")",";",["T_WHITESPACE","\n        ",327],["T_VARIABLE","$update",328],["T_WHITESPACE"," ",328],"=",["T_WHITESPACE"," ",328],["T_STRING","array_intersect_key",328],"(",["T_VARIABLE","$new",328],",",["T_WHITESPACE"," ",328],["T_VARIABLE","$old",328],")",";",["T_WHITESPACE","\n\n        ",328],["T_VARIABLE","$isChanged",330],["T_WHITESPACE","  ",330],"=",["T_WHITESPACE"," ",330],["T_STRING","false",330],";",["T_WHITESPACE","\n        ",330],["T_VARIABLE","$productId",331],["T_WHITESPACE","  ",331],"=",["T_WHITESPACE"," ",331],["T_VARIABLE","$object",331],["T_OBJECT_OPERATOR","->",331],["T_STRING","getId",331],"(",")",";",["T_WHITESPACE","\n\n        ",331],["T_IF","if",333],["T_WHITESPACE"," ",333],"(","!",["T_EMPTY","empty",333],"(",["T_VARIABLE","$delete",333],")",")",["T_WHITESPACE"," ",333],"{",["T_WHITESPACE","\n            ",333],["T_FOREACH","foreach",334],["T_WHITESPACE"," ",334],"(",["T_VARIABLE","$delete",334],["T_WHITESPACE"," ",334],["T_AS","as",334],["T_WHITESPACE"," ",334],["T_VARIABLE","$data",334],")",["T_WHITESPACE"," ",334],"{",["T_WHITESPACE","\n                ",334],["T_VARIABLE","$this",335],["T_OBJECT_OPERATOR","->",335],["T_STRING","_getResource",335],"(",")",["T_OBJECT_OPERATOR","->",335],["T_STRING","deletePriceData",335],"(",["T_VARIABLE","$productId",335],",",["T_WHITESPACE"," ",335],["T_STRING","null",335],",",["T_WHITESPACE"," ",335],["T_VARIABLE","$data",335],"[",["T_CONSTANT_ENCAPSED_STRING","'price_id'",335],"]",")",";",["T_WHITESPACE","\n                ",335],["T_VARIABLE","$isChanged",336],["T_WHITESPACE"," ",336],"=",["T_WHITESPACE"," ",336],["T_STRING","true",336],";",["T_WHITESPACE","\n            ",336],"}",["T_WHITESPACE","\n        ",337],"}",["T_WHITESPACE","\n\n        ",338],["T_IF","if",340],["T_WHITESPACE"," ",340],"(","!",["T_EMPTY","empty",340],"(",["T_VARIABLE","$insert",340],")",")",["T_WHITESPACE"," ",340],"{",["T_WHITESPACE","\n            ",340],["T_FOREACH","foreach",341],["T_WHITESPACE"," ",341],"(",["T_VARIABLE","$insert",341],["T_WHITESPACE"," ",341],["T_AS","as",341],["T_WHITESPACE"," ",341],["T_VARIABLE","$data",341],")",["T_WHITESPACE"," ",341],"{",["T_WHITESPACE","\n                ",341],["T_VARIABLE","$price",342],["T_WHITESPACE"," ",342],"=",["T_WHITESPACE"," ",342],["T_NEW","new",342],["T_WHITESPACE"," ",342],["T_STRING","Varien_Object",342],"(",["T_VARIABLE","$data",342],")",";",["T_WHITESPACE","\n                ",342],["T_VARIABLE","$price",343],["T_OBJECT_OPERATOR","->",343],["T_STRING","setEntityId",343],"(",["T_VARIABLE","$productId",343],")",";",["T_WHITESPACE","\n                ",343],["T_VARIABLE","$this",344],["T_OBJECT_OPERATOR","->",344],["T_STRING","_getResource",344],"(",")",["T_OBJECT_OPERATOR","->",344],["T_STRING","savePriceData",344],"(",["T_VARIABLE","$price",344],")",";",["T_WHITESPACE","\n\n                ",344],["T_VARIABLE","$isChanged",346],["T_WHITESPACE"," ",346],"=",["T_WHITESPACE"," ",346],["T_STRING","true",346],";",["T_WHITESPACE","\n            ",346],"}",["T_WHITESPACE","\n        ",347],"}",["T_WHITESPACE","\n\n        ",348],["T_IF","if",350],["T_WHITESPACE"," ",350],"(","!",["T_EMPTY","empty",350],"(",["T_VARIABLE","$update",350],")",")",["T_WHITESPACE"," ",350],"{",["T_WHITESPACE","\n            ",350],["T_FOREACH","foreach",351],["T_WHITESPACE"," ",351],"(",["T_VARIABLE","$update",351],["T_WHITESPACE"," ",351],["T_AS","as",351],["T_WHITESPACE"," ",351],["T_VARIABLE","$k",351],["T_WHITESPACE"," ",351],["T_DOUBLE_ARROW","=>",351],["T_WHITESPACE"," ",351],["T_VARIABLE","$v",351],")",["T_WHITESPACE"," ",351],"{",["T_WHITESPACE","\n                ",351],["T_IF","if",352],["T_WHITESPACE"," ",352],"(",["T_VARIABLE","$old",352],"[",["T_VARIABLE","$k",352],"]","[",["T_CONSTANT_ENCAPSED_STRING","'price'",352],"]",["T_WHITESPACE"," ",352],["T_IS_NOT_EQUAL","!=",352],["T_WHITESPACE"," ",352],["T_VARIABLE","$v",352],"[",["T_CONSTANT_ENCAPSED_STRING","'value'",352],"]",["T_WHITESPACE"," ",352],["T_BOOLEAN_OR","||",352],["T_WHITESPACE"," ",352],["T_VARIABLE","$old",352],"[",["T_VARIABLE","$k",352],"]","[",["T_CONSTANT_ENCAPSED_STRING","'is_percent'",352],"]",["T_WHITESPACE"," ",352],["T_IS_NOT_EQUAL","!=",352],["T_WHITESPACE"," ",352],["T_VARIABLE","$v",352],"[",["T_CONSTANT_ENCAPSED_STRING","'is_percent'",352],"]",")",["T_WHITESPACE"," ",352],"{",["T_WHITESPACE","\n                    ",352],["T_VARIABLE","$price",353],["T_WHITESPACE"," ",353],"=",["T_WHITESPACE"," ",353],["T_NEW","new",353],["T_WHITESPACE"," ",353],["T_STRING","Varien_Object",353],"(",["T_ARRAY","array",353],"(",["T_WHITESPACE","\n                        ",353],["T_CONSTANT_ENCAPSED_STRING","'value_id'",354],["T_WHITESPACE","   ",354],["T_DOUBLE_ARROW","=>",354],["T_WHITESPACE"," ",354],["T_VARIABLE","$old",354],"[",["T_VARIABLE","$k",354],"]","[",["T_CONSTANT_ENCAPSED_STRING","'price_id'",354],"]",",",["T_WHITESPACE","\n                        ",354],["T_CONSTANT_ENCAPSED_STRING","'value'",355],["T_WHITESPACE","      ",355],["T_DOUBLE_ARROW","=>",355],["T_WHITESPACE"," ",355],["T_VARIABLE","$v",355],"[",["T_CONSTANT_ENCAPSED_STRING","'value'",355],"]",",",["T_WHITESPACE","\n                        ",355],["T_CONSTANT_ENCAPSED_STRING","'is_percent'",356],["T_WHITESPACE"," ",356],["T_DOUBLE_ARROW","=>",356],["T_WHITESPACE"," ",356],["T_VARIABLE","$v",356],"[",["T_CONSTANT_ENCAPSED_STRING","'is_percent'",356],"]",["T_WHITESPACE","\n                    ",356],")",")",";",["T_WHITESPACE","\n                    ",357],["T_VARIABLE","$this",358],["T_OBJECT_OPERATOR","->",358],["T_STRING","_getResource",358],"(",")",["T_OBJECT_OPERATOR","->",358],["T_STRING","savePriceData",358],"(",["T_VARIABLE","$price",358],")",";",["T_WHITESPACE","\n\n                    ",358],["T_VARIABLE","$isChanged",360],["T_WHITESPACE"," ",360],"=",["T_WHITESPACE"," ",360],["T_STRING","true",360],";",["T_WHITESPACE","\n                ",360],"}",["T_WHITESPACE","\n            ",361],"}",["T_WHITESPACE","\n        ",362],"}",["T_WHITESPACE","\n\n        ",363],["T_IF","if",365],["T_WHITESPACE"," ",365],"(",["T_VARIABLE","$isChanged",365],")",["T_WHITESPACE"," ",365],"{",["T_WHITESPACE","\n            ",365],["T_VARIABLE","$valueChangedKey",366],["T_WHITESPACE"," ",366],"=",["T_WHITESPACE"," ",366],["T_VARIABLE","$this",366],["T_OBJECT_OPERATOR","->",366],["T_STRING","getAttribute",366],"(",")",["T_OBJECT_OPERATOR","->",366],["T_STRING","getName",366],"(",")",["T_WHITESPACE"," ",366],".",["T_WHITESPACE"," ",366],["T_CONSTANT_ENCAPSED_STRING","'_changed'",366],";",["T_WHITESPACE","\n            ",366],["T_VARIABLE","$object",367],["T_OBJECT_OPERATOR","->",367],["T_STRING","setData",367],"(",["T_VARIABLE","$valueChangedKey",367],",",["T_WHITESPACE"," ",367],["T_LNUMBER","1",367],")",";",["T_WHITESPACE","\n        ",367],"}",["T_WHITESPACE","\n\n        ",368],["T_RETURN","return",370],["T_WHITESPACE"," ",370],["T_VARIABLE","$this",370],";",["T_WHITESPACE","\n    ",370],"}",["T_WHITESPACE","\n",371],"}",["T_WHITESPACE","\n",372]]
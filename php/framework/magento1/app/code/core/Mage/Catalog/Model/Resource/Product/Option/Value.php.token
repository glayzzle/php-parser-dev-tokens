[["T_OPEN_TAG","<?php\n",1],["T_DOC_COMMENT","\/**\n * Magento\n *\n * NOTICE OF LICENSE\n *\n * This source file is subject to the Open Software License (OSL 3.0)\n * that is bundled with this package in the file LICENSE.txt.\n * It is also available through the world-wide-web at this URL:\n * http:\/\/opensource.org\/licenses\/osl-3.0.php\n * If you did not receive a copy of the license and are unable to\n * obtain it through the world-wide-web, please send an email\n * to license@magento.com so we can send you a copy immediately.\n *\n * DISCLAIMER\n *\n * Do not edit or add to this file if you wish to upgrade Magento to newer\n * versions in the future. If you wish to customize Magento for your\n * needs please refer to http:\/\/www.magento.com for more information.\n *\n * @category    Mage\n * @package     Mage_Catalog\n * @copyright  Copyright (c) 2006-2016 X.commerce, Inc. and affiliates (http:\/\/www.magento.com)\n * @license    http:\/\/opensource.org\/licenses\/osl-3.0.php  Open Software License (OSL 3.0)\n *\/",2],["T_WHITESPACE","\n\n\n",25],["T_DOC_COMMENT","\/**\n * Catalog product custom option resource model\n *\n * @category    Mage\n * @package     Mage_Catalog\n * @author      Magento Core Team <core@magentocommerce.com>\n *\/",28],["T_WHITESPACE","\n",34],["T_CLASS","class",35],["T_WHITESPACE"," ",35],["T_STRING","Mage_Catalog_Model_Resource_Product_Option_Value",35],["T_WHITESPACE"," ",35],["T_EXTENDS","extends",35],["T_WHITESPACE"," ",35],["T_STRING","Mage_Core_Model_Resource_Db_Abstract",35],["T_WHITESPACE","\n",35],"{",["T_WHITESPACE","\n    ",36],["T_DOC_COMMENT","\/**\n     * Define main table and initialize connection\n     *\n     *\/",37],["T_WHITESPACE","\n    ",40],["T_PROTECTED","protected",41],["T_WHITESPACE"," ",41],["T_FUNCTION","function",41],["T_WHITESPACE"," ",41],["T_STRING","_construct",41],"(",")",["T_WHITESPACE","\n    ",41],"{",["T_WHITESPACE","\n        ",42],["T_VARIABLE","$this",43],["T_OBJECT_OPERATOR","->",43],["T_STRING","_init",43],"(",["T_CONSTANT_ENCAPSED_STRING","'catalog\/product_option_type_value'",43],",",["T_WHITESPACE"," ",43],["T_CONSTANT_ENCAPSED_STRING","'option_type_id'",43],")",";",["T_WHITESPACE","\n    ",43],"}",["T_WHITESPACE","\n\n    ",44],["T_DOC_COMMENT","\/**\n     * Proceeed operations after object is saved\n     * Save options store data\n     *\n     * @param Mage_Core_Model_Abstract $object\n     * @return Mage_Core_Model_Resource_Db_Abstract\n     *\/",46],["T_WHITESPACE","\n    ",52],["T_PROTECTED","protected",53],["T_WHITESPACE"," ",53],["T_FUNCTION","function",53],["T_WHITESPACE"," ",53],["T_STRING","_afterSave",53],"(",["T_STRING","Mage_Core_Model_Abstract",53],["T_WHITESPACE"," ",53],["T_VARIABLE","$object",53],")",["T_WHITESPACE","\n    ",53],"{",["T_WHITESPACE","\n        ",54],["T_VARIABLE","$this",55],["T_OBJECT_OPERATOR","->",55],["T_STRING","_saveValuePrices",55],"(",["T_VARIABLE","$object",55],")",";",["T_WHITESPACE","\n        ",55],["T_VARIABLE","$this",56],["T_OBJECT_OPERATOR","->",56],["T_STRING","_saveValueTitles",56],"(",["T_VARIABLE","$object",56],")",";",["T_WHITESPACE","\n\n        ",56],["T_RETURN","return",58],["T_WHITESPACE"," ",58],["T_STRING","parent",58],["T_DOUBLE_COLON","::",58],["T_STRING","_afterSave",58],"(",["T_VARIABLE","$object",58],")",";",["T_WHITESPACE","\n    ",58],"}",["T_WHITESPACE","\n\n    ",59],["T_DOC_COMMENT","\/**\n     * Save option value price data\n     *\n     * @param Mage_Core_Model_Abstract $object\n     *\/",61],["T_WHITESPACE","\n    ",65],["T_PROTECTED","protected",66],["T_WHITESPACE"," ",66],["T_FUNCTION","function",66],["T_WHITESPACE"," ",66],["T_STRING","_saveValuePrices",66],"(",["T_STRING","Mage_Core_Model_Abstract",66],["T_WHITESPACE"," ",66],["T_VARIABLE","$object",66],")",["T_WHITESPACE","\n    ",66],"{",["T_WHITESPACE","\n        ",67],["T_VARIABLE","$priceTable",68],["T_WHITESPACE"," ",68],"=",["T_WHITESPACE"," ",68],["T_VARIABLE","$this",68],["T_OBJECT_OPERATOR","->",68],["T_STRING","getTable",68],"(",["T_CONSTANT_ENCAPSED_STRING","'catalog\/product_option_type_price'",68],")",";",["T_WHITESPACE","\n\n        ",68],["T_VARIABLE","$price",70],["T_WHITESPACE","      ",70],"=",["T_WHITESPACE"," ",70],["T_DOUBLE_CAST","(float)",70],["T_STRING","sprintf",70],"(",["T_CONSTANT_ENCAPSED_STRING","'%F'",70],",",["T_WHITESPACE"," ",70],["T_VARIABLE","$object",70],["T_OBJECT_OPERATOR","->",70],["T_STRING","getPrice",70],"(",")",")",";",["T_WHITESPACE","\n        ",70],["T_VARIABLE","$priceType",71],["T_WHITESPACE","  ",71],"=",["T_WHITESPACE"," ",71],["T_VARIABLE","$object",71],["T_OBJECT_OPERATOR","->",71],["T_STRING","getPriceType",71],"(",")",";",["T_WHITESPACE","\n\n        ",71],["T_IF","if",73],["T_WHITESPACE"," ",73],"(","!",["T_VARIABLE","$object",73],["T_OBJECT_OPERATOR","->",73],["T_STRING","getData",73],"(",["T_CONSTANT_ENCAPSED_STRING","'scope'",73],",",["T_WHITESPACE"," ",73],["T_CONSTANT_ENCAPSED_STRING","'price'",73],")",")",["T_WHITESPACE"," ",73],"{",["T_WHITESPACE","\n            ",73],["T_COMMENT","\/\/save for store_id = 0\n",74],["T_WHITESPACE","            ",75],["T_VARIABLE","$select",75],["T_WHITESPACE"," ",75],"=",["T_WHITESPACE"," ",75],["T_VARIABLE","$this",75],["T_OBJECT_OPERATOR","->",75],["T_STRING","_getReadAdapter",75],"(",")",["T_OBJECT_OPERATOR","->",75],["T_STRING","select",75],"(",")",["T_WHITESPACE","\n                ",75],["T_OBJECT_OPERATOR","->",76],["T_STRING","from",76],"(",["T_VARIABLE","$priceTable",76],",",["T_WHITESPACE"," ",76],["T_CONSTANT_ENCAPSED_STRING","'option_type_id'",76],")",["T_WHITESPACE","\n                ",76],["T_OBJECT_OPERATOR","->",77],["T_STRING","where",77],"(",["T_CONSTANT_ENCAPSED_STRING","'option_type_id = ?'",77],",",["T_WHITESPACE"," ",77],["T_INT_CAST","(int)",77],["T_VARIABLE","$object",77],["T_OBJECT_OPERATOR","->",77],["T_STRING","getId",77],"(",")",")",["T_WHITESPACE","\n                ",77],["T_OBJECT_OPERATOR","->",78],["T_STRING","where",78],"(",["T_CONSTANT_ENCAPSED_STRING","'store_id = ?'",78],",",["T_WHITESPACE"," ",78],["T_STRING","Mage_Catalog_Model_Abstract",78],["T_DOUBLE_COLON","::",78],["T_STRING","DEFAULT_STORE_ID",78],")",";",["T_WHITESPACE","\n            ",78],["T_VARIABLE","$optionTypeId",79],["T_WHITESPACE"," ",79],"=",["T_WHITESPACE"," ",79],["T_VARIABLE","$this",79],["T_OBJECT_OPERATOR","->",79],["T_STRING","_getReadAdapter",79],"(",")",["T_OBJECT_OPERATOR","->",79],["T_STRING","fetchOne",79],"(",["T_VARIABLE","$select",79],")",";",["T_WHITESPACE","\n\n            ",79],["T_IF","if",81],["T_WHITESPACE"," ",81],"(",["T_VARIABLE","$optionTypeId",81],")",["T_WHITESPACE"," ",81],"{",["T_WHITESPACE","\n                ",81],["T_IF","if",82],["T_WHITESPACE"," ",82],"(",["T_VARIABLE","$object",82],["T_OBJECT_OPERATOR","->",82],["T_STRING","getStoreId",82],"(",")",["T_WHITESPACE"," ",82],["T_IS_EQUAL","==",82],["T_WHITESPACE"," ",82],["T_CONSTANT_ENCAPSED_STRING","'0'",82],")",["T_WHITESPACE"," ",82],"{",["T_WHITESPACE","\n                    ",82],["T_VARIABLE","$bind",83],["T_WHITESPACE","  ",83],"=",["T_WHITESPACE"," ",83],["T_ARRAY","array",83],"(",["T_WHITESPACE","\n                        ",83],["T_CONSTANT_ENCAPSED_STRING","'price'",84],["T_WHITESPACE","         ",84],["T_DOUBLE_ARROW","=>",84],["T_WHITESPACE"," ",84],["T_VARIABLE","$price",84],",",["T_WHITESPACE","\n                        ",84],["T_CONSTANT_ENCAPSED_STRING","'price_type'",85],["T_WHITESPACE","    ",85],["T_DOUBLE_ARROW","=>",85],["T_WHITESPACE"," ",85],["T_VARIABLE","$priceType",85],["T_WHITESPACE","\n                    ",85],")",";",["T_WHITESPACE","\n                    ",86],["T_VARIABLE","$where",87],["T_WHITESPACE"," ",87],"=",["T_WHITESPACE"," ",87],["T_ARRAY","array",87],"(",["T_WHITESPACE","\n                        ",87],["T_CONSTANT_ENCAPSED_STRING","'option_type_id = ?'",88],["T_WHITESPACE","    ",88],["T_DOUBLE_ARROW","=>",88],["T_WHITESPACE"," ",88],["T_VARIABLE","$optionTypeId",88],",",["T_WHITESPACE","\n                        ",88],["T_CONSTANT_ENCAPSED_STRING","'store_id = ?'",89],["T_WHITESPACE","          ",89],["T_DOUBLE_ARROW","=>",89],["T_WHITESPACE"," ",89],["T_STRING","Mage_Catalog_Model_Abstract",89],["T_DOUBLE_COLON","::",89],["T_STRING","DEFAULT_STORE_ID",89],["T_WHITESPACE","\n                    ",89],")",";",["T_WHITESPACE","\n\n                    ",90],["T_VARIABLE","$this",92],["T_OBJECT_OPERATOR","->",92],["T_STRING","_getWriteAdapter",92],"(",")",["T_OBJECT_OPERATOR","->",92],["T_STRING","update",92],"(",["T_VARIABLE","$priceTable",92],",",["T_WHITESPACE"," ",92],["T_VARIABLE","$bind",92],",",["T_WHITESPACE"," ",92],["T_VARIABLE","$where",92],")",";",["T_WHITESPACE","\n                ",92],"}",["T_WHITESPACE","\n            ",93],"}",["T_WHITESPACE"," ",94],["T_ELSE","else",94],["T_WHITESPACE"," ",94],"{",["T_WHITESPACE","\n                ",94],["T_VARIABLE","$bind",95],["T_WHITESPACE","  ",95],"=",["T_WHITESPACE"," ",95],["T_ARRAY","array",95],"(",["T_WHITESPACE","\n                    ",95],["T_CONSTANT_ENCAPSED_STRING","'option_type_id'",96],["T_WHITESPACE","    ",96],["T_DOUBLE_ARROW","=>",96],["T_WHITESPACE"," ",96],["T_INT_CAST","(int)",96],["T_VARIABLE","$object",96],["T_OBJECT_OPERATOR","->",96],["T_STRING","getId",96],"(",")",",",["T_WHITESPACE","\n                    ",96],["T_CONSTANT_ENCAPSED_STRING","'store_id'",97],["T_WHITESPACE","          ",97],["T_DOUBLE_ARROW","=>",97],["T_WHITESPACE"," ",97],["T_STRING","Mage_Catalog_Model_Abstract",97],["T_DOUBLE_COLON","::",97],["T_STRING","DEFAULT_STORE_ID",97],",",["T_WHITESPACE","\n                    ",97],["T_CONSTANT_ENCAPSED_STRING","'price'",98],["T_WHITESPACE","             ",98],["T_DOUBLE_ARROW","=>",98],["T_WHITESPACE"," ",98],["T_VARIABLE","$price",98],",",["T_WHITESPACE","\n                    ",98],["T_CONSTANT_ENCAPSED_STRING","'price_type'",99],["T_WHITESPACE","        ",99],["T_DOUBLE_ARROW","=>",99],["T_WHITESPACE"," ",99],["T_VARIABLE","$priceType",99],["T_WHITESPACE","\n                ",99],")",";",["T_WHITESPACE","\n                ",100],["T_VARIABLE","$this",101],["T_OBJECT_OPERATOR","->",101],["T_STRING","_getWriteAdapter",101],"(",")",["T_OBJECT_OPERATOR","->",101],["T_STRING","insert",101],"(",["T_VARIABLE","$priceTable",101],",",["T_WHITESPACE"," ",101],["T_VARIABLE","$bind",101],")",";",["T_WHITESPACE","\n            ",101],"}",["T_WHITESPACE","\n        ",102],"}",["T_WHITESPACE","\n\n        ",103],["T_VARIABLE","$scope",105],["T_WHITESPACE"," ",105],"=",["T_WHITESPACE"," ",105],["T_INT_CAST","(int)",105],["T_STRING","Mage",105],["T_DOUBLE_COLON","::",105],["T_STRING","app",105],"(",")",["T_OBJECT_OPERATOR","->",105],["T_STRING","getStore",105],"(",")",["T_OBJECT_OPERATOR","->",105],["T_STRING","getConfig",105],"(",["T_STRING","Mage_Core_Model_Store",105],["T_DOUBLE_COLON","::",105],["T_STRING","XML_PATH_PRICE_SCOPE",105],")",";",["T_WHITESPACE","\n\n        ",105],["T_IF","if",107],["T_WHITESPACE"," ",107],"(",["T_VARIABLE","$object",107],["T_OBJECT_OPERATOR","->",107],["T_STRING","getStoreId",107],"(",")",["T_WHITESPACE"," ",107],["T_IS_NOT_EQUAL","!=",107],["T_WHITESPACE"," ",107],["T_CONSTANT_ENCAPSED_STRING","'0'",107],["T_WHITESPACE"," ",107],["T_BOOLEAN_AND","&&",107],["T_WHITESPACE"," ",107],["T_VARIABLE","$scope",107],["T_WHITESPACE"," ",107],["T_IS_EQUAL","==",107],["T_WHITESPACE"," ",107],["T_STRING","Mage_Core_Model_Store",107],["T_DOUBLE_COLON","::",107],["T_STRING","PRICE_SCOPE_WEBSITE",107],["T_WHITESPACE","\n            ",107],["T_BOOLEAN_AND","&&",108],["T_WHITESPACE"," ",108],"!",["T_VARIABLE","$object",108],["T_OBJECT_OPERATOR","->",108],["T_STRING","getData",108],"(",["T_CONSTANT_ENCAPSED_STRING","'scope'",108],",",["T_WHITESPACE"," ",108],["T_CONSTANT_ENCAPSED_STRING","'price'",108],")",")",["T_WHITESPACE"," ",108],"{",["T_WHITESPACE","\n\n            ",108],["T_VARIABLE","$baseCurrency",110],["T_WHITESPACE"," ",110],"=",["T_WHITESPACE"," ",110],["T_STRING","Mage",110],["T_DOUBLE_COLON","::",110],["T_STRING","app",110],"(",")",["T_OBJECT_OPERATOR","->",110],["T_STRING","getBaseCurrencyCode",110],"(",")",";",["T_WHITESPACE","\n\n            ",110],["T_VARIABLE","$storeIds",112],["T_WHITESPACE"," ",112],"=",["T_WHITESPACE"," ",112],["T_STRING","Mage",112],["T_DOUBLE_COLON","::",112],["T_STRING","app",112],"(",")",["T_OBJECT_OPERATOR","->",112],["T_STRING","getStore",112],"(",["T_VARIABLE","$object",112],["T_OBJECT_OPERATOR","->",112],["T_STRING","getStoreId",112],"(",")",")",["T_WHITESPACE","\n                ",112],["T_OBJECT_OPERATOR","->",113],["T_STRING","getWebsite",113],"(",")",["T_WHITESPACE","\n                ",113],["T_OBJECT_OPERATOR","->",114],["T_STRING","getStoreIds",114],"(",")",";",["T_WHITESPACE","\n            ",114],["T_IF","if",115],["T_WHITESPACE"," ",115],"(",["T_STRING","is_array",115],"(",["T_VARIABLE","$storeIds",115],")",")",["T_WHITESPACE"," ",115],"{",["T_WHITESPACE","\n                ",115],["T_FOREACH","foreach",116],["T_WHITESPACE"," ",116],"(",["T_VARIABLE","$storeIds",116],["T_WHITESPACE"," ",116],["T_AS","as",116],["T_WHITESPACE"," ",116],["T_VARIABLE","$storeId",116],")",["T_WHITESPACE"," ",116],"{",["T_WHITESPACE","\n                    ",116],["T_IF","if",117],["T_WHITESPACE"," ",117],"(",["T_VARIABLE","$priceType",117],["T_WHITESPACE"," ",117],["T_IS_EQUAL","==",117],["T_WHITESPACE"," ",117],["T_CONSTANT_ENCAPSED_STRING","'fixed'",117],")",["T_WHITESPACE"," ",117],"{",["T_WHITESPACE","\n                        ",117],["T_VARIABLE","$storeCurrency",118],["T_WHITESPACE"," ",118],"=",["T_WHITESPACE"," ",118],["T_STRING","Mage",118],["T_DOUBLE_COLON","::",118],["T_STRING","app",118],"(",")",["T_OBJECT_OPERATOR","->",118],["T_STRING","getStore",118],"(",["T_VARIABLE","$storeId",118],")",["T_OBJECT_OPERATOR","->",118],["T_STRING","getBaseCurrencyCode",118],"(",")",";",["T_WHITESPACE","\n                        ",118],["T_VARIABLE","$rate",119],["T_WHITESPACE"," ",119],"=",["T_WHITESPACE"," ",119],["T_STRING","Mage",119],["T_DOUBLE_COLON","::",119],["T_STRING","getModel",119],"(",["T_CONSTANT_ENCAPSED_STRING","'directory\/currency'",119],")",["T_OBJECT_OPERATOR","->",119],["T_STRING","load",119],"(",["T_VARIABLE","$baseCurrency",119],")",["T_OBJECT_OPERATOR","->",119],["T_STRING","getRate",119],"(",["T_VARIABLE","$storeCurrency",119],")",";",["T_WHITESPACE","\n                        ",119],["T_IF","if",120],["T_WHITESPACE"," ",120],"(","!",["T_VARIABLE","$rate",120],")",["T_WHITESPACE"," ",120],"{",["T_WHITESPACE","\n                            ",120],["T_VARIABLE","$rate",121],["T_WHITESPACE"," ",121],"=",["T_WHITESPACE"," ",121],["T_LNUMBER","1",121],";",["T_WHITESPACE","\n                        ",121],"}",["T_WHITESPACE","\n                        ",122],["T_VARIABLE","$newPrice",123],["T_WHITESPACE"," ",123],"=",["T_WHITESPACE"," ",123],["T_VARIABLE","$price",123],["T_WHITESPACE"," ",123],"*",["T_WHITESPACE"," ",123],["T_VARIABLE","$rate",123],";",["T_WHITESPACE","\n                    ",123],"}",["T_WHITESPACE"," ",124],["T_ELSE","else",124],["T_WHITESPACE"," ",124],"{",["T_WHITESPACE","\n                        ",124],["T_VARIABLE","$newPrice",125],["T_WHITESPACE"," ",125],"=",["T_WHITESPACE"," ",125],["T_VARIABLE","$price",125],";",["T_WHITESPACE","\n                    ",125],"}",["T_WHITESPACE","\n\n                    ",126],["T_VARIABLE","$select",128],["T_WHITESPACE"," ",128],"=",["T_WHITESPACE"," ",128],["T_VARIABLE","$this",128],["T_OBJECT_OPERATOR","->",128],["T_STRING","_getReadAdapter",128],"(",")",["T_OBJECT_OPERATOR","->",128],["T_STRING","select",128],"(",")",["T_WHITESPACE","\n                        ",128],["T_OBJECT_OPERATOR","->",129],["T_STRING","from",129],"(",["T_VARIABLE","$priceTable",129],",",["T_WHITESPACE"," ",129],["T_CONSTANT_ENCAPSED_STRING","'option_type_id'",129],")",["T_WHITESPACE","\n                        ",129],["T_OBJECT_OPERATOR","->",130],["T_STRING","where",130],"(",["T_CONSTANT_ENCAPSED_STRING","'option_type_id = ?'",130],",",["T_WHITESPACE"," ",130],["T_INT_CAST","(int)",130],["T_VARIABLE","$object",130],["T_OBJECT_OPERATOR","->",130],["T_STRING","getId",130],"(",")",")",["T_WHITESPACE","\n                        ",130],["T_OBJECT_OPERATOR","->",131],["T_STRING","where",131],"(",["T_CONSTANT_ENCAPSED_STRING","'store_id = ?'",131],",",["T_WHITESPACE"," ",131],["T_INT_CAST","(int)",131],["T_VARIABLE","$storeId",131],")",";",["T_WHITESPACE","\n                    ",131],["T_VARIABLE","$optionTypeId",132],["T_WHITESPACE"," ",132],"=",["T_WHITESPACE"," ",132],["T_VARIABLE","$this",132],["T_OBJECT_OPERATOR","->",132],["T_STRING","_getReadAdapter",132],"(",")",["T_OBJECT_OPERATOR","->",132],["T_STRING","fetchOne",132],"(",["T_VARIABLE","$select",132],")",";",["T_WHITESPACE","\n\n                    ",132],["T_IF","if",134],["T_WHITESPACE"," ",134],"(",["T_VARIABLE","$optionTypeId",134],")",["T_WHITESPACE"," ",134],"{",["T_WHITESPACE","\n                        ",134],["T_VARIABLE","$bind",135],["T_WHITESPACE","  ",135],"=",["T_WHITESPACE"," ",135],["T_ARRAY","array",135],"(",["T_WHITESPACE","\n                            ",135],["T_CONSTANT_ENCAPSED_STRING","'price'",136],["T_WHITESPACE","         ",136],["T_DOUBLE_ARROW","=>",136],["T_WHITESPACE"," ",136],["T_VARIABLE","$newPrice",136],",",["T_WHITESPACE","\n                            ",136],["T_CONSTANT_ENCAPSED_STRING","'price_type'",137],["T_WHITESPACE","    ",137],["T_DOUBLE_ARROW","=>",137],["T_WHITESPACE"," ",137],["T_VARIABLE","$priceType",137],["T_WHITESPACE","\n                        ",137],")",";",["T_WHITESPACE","\n                        ",138],["T_VARIABLE","$where",139],["T_WHITESPACE"," ",139],"=",["T_WHITESPACE"," ",139],["T_ARRAY","array",139],"(",["T_WHITESPACE","\n                            ",139],["T_CONSTANT_ENCAPSED_STRING","'option_type_id = ?'",140],["T_WHITESPACE","    ",140],["T_DOUBLE_ARROW","=>",140],["T_WHITESPACE"," ",140],["T_INT_CAST","(int)",140],["T_VARIABLE","$optionTypeId",140],",",["T_WHITESPACE","\n                            ",140],["T_CONSTANT_ENCAPSED_STRING","'store_id = ?'",141],["T_WHITESPACE","          ",141],["T_DOUBLE_ARROW","=>",141],["T_WHITESPACE"," ",141],["T_INT_CAST","(int)",141],["T_VARIABLE","$storeId",141],["T_WHITESPACE","\n                        ",141],")",";",["T_WHITESPACE","\n\n                        ",142],["T_VARIABLE","$this",144],["T_OBJECT_OPERATOR","->",144],["T_STRING","_getWriteAdapter",144],"(",")",["T_OBJECT_OPERATOR","->",144],["T_STRING","update",144],"(",["T_VARIABLE","$priceTable",144],",",["T_WHITESPACE"," ",144],["T_VARIABLE","$bind",144],",",["T_WHITESPACE"," ",144],["T_VARIABLE","$where",144],")",";",["T_WHITESPACE","\n                    ",144],"}",["T_WHITESPACE"," ",145],["T_ELSE","else",145],["T_WHITESPACE"," ",145],"{",["T_WHITESPACE","\n                        ",145],["T_VARIABLE","$bind",146],["T_WHITESPACE","  ",146],"=",["T_WHITESPACE"," ",146],["T_ARRAY","array",146],"(",["T_WHITESPACE","\n                            ",146],["T_CONSTANT_ENCAPSED_STRING","'option_type_id'",147],["T_WHITESPACE","    ",147],["T_DOUBLE_ARROW","=>",147],["T_WHITESPACE"," ",147],["T_INT_CAST","(int)",147],["T_VARIABLE","$object",147],["T_OBJECT_OPERATOR","->",147],["T_STRING","getId",147],"(",")",",",["T_WHITESPACE","\n                            ",147],["T_CONSTANT_ENCAPSED_STRING","'store_id'",148],["T_WHITESPACE","          ",148],["T_DOUBLE_ARROW","=>",148],["T_WHITESPACE"," ",148],["T_INT_CAST","(int)",148],["T_VARIABLE","$storeId",148],",",["T_WHITESPACE","\n                            ",148],["T_CONSTANT_ENCAPSED_STRING","'price'",149],["T_WHITESPACE","             ",149],["T_DOUBLE_ARROW","=>",149],["T_WHITESPACE"," ",149],["T_VARIABLE","$newPrice",149],",",["T_WHITESPACE","\n                            ",149],["T_CONSTANT_ENCAPSED_STRING","'price_type'",150],["T_WHITESPACE","        ",150],["T_DOUBLE_ARROW","=>",150],["T_WHITESPACE"," ",150],["T_VARIABLE","$priceType",150],["T_WHITESPACE","\n                        ",150],")",";",["T_WHITESPACE","\n\n                        ",151],["T_VARIABLE","$this",153],["T_OBJECT_OPERATOR","->",153],["T_STRING","_getWriteAdapter",153],"(",")",["T_OBJECT_OPERATOR","->",153],["T_STRING","insert",153],"(",["T_VARIABLE","$priceTable",153],",",["T_WHITESPACE"," ",153],["T_VARIABLE","$bind",153],")",";",["T_WHITESPACE","\n                    ",153],"}",["T_WHITESPACE","\n                ",154],"}",["T_COMMENT","\/\/ end of foreach()\n",155],["T_WHITESPACE","            ",156],"}",["T_WHITESPACE","\n        ",156],"}",["T_WHITESPACE"," ",157],["T_ELSE","else",157],["T_WHITESPACE"," ",157],["T_IF","if",157],["T_WHITESPACE"," ",157],"(",["T_VARIABLE","$scope",157],["T_WHITESPACE"," ",157],["T_IS_EQUAL","==",157],["T_WHITESPACE"," ",157],["T_STRING","Mage_Core_Model_Store",157],["T_DOUBLE_COLON","::",157],["T_STRING","PRICE_SCOPE_WEBSITE",157],["T_WHITESPACE"," ",157],["T_BOOLEAN_AND","&&",157],["T_WHITESPACE"," ",157],["T_VARIABLE","$object",157],["T_OBJECT_OPERATOR","->",157],["T_STRING","getData",157],"(",["T_CONSTANT_ENCAPSED_STRING","'scope'",157],",",["T_WHITESPACE"," ",157],["T_CONSTANT_ENCAPSED_STRING","'price'",157],")",")",["T_WHITESPACE"," ",157],"{",["T_WHITESPACE","\n            ",157],["T_VARIABLE","$where",158],["T_WHITESPACE"," ",158],"=",["T_WHITESPACE"," ",158],["T_ARRAY","array",158],"(",["T_WHITESPACE","\n                ",158],["T_CONSTANT_ENCAPSED_STRING","'option_type_id = ?'",159],["T_WHITESPACE","    ",159],["T_DOUBLE_ARROW","=>",159],["T_WHITESPACE"," ",159],["T_INT_CAST","(int)",159],["T_VARIABLE","$object",159],["T_OBJECT_OPERATOR","->",159],["T_STRING","getId",159],"(",")",",",["T_WHITESPACE","\n                ",159],["T_CONSTANT_ENCAPSED_STRING","'store_id = ?'",160],["T_WHITESPACE","          ",160],["T_DOUBLE_ARROW","=>",160],["T_WHITESPACE"," ",160],["T_INT_CAST","(int)",160],["T_VARIABLE","$object",160],["T_OBJECT_OPERATOR","->",160],["T_STRING","getStoreId",160],"(",")",",",["T_WHITESPACE","\n            ",160],")",";",["T_WHITESPACE","\n            ",161],["T_VARIABLE","$this",162],["T_OBJECT_OPERATOR","->",162],["T_STRING","_getWriteAdapter",162],"(",")",["T_OBJECT_OPERATOR","->",162],["T_STRING","delete",162],"(",["T_VARIABLE","$priceTable",162],",",["T_WHITESPACE"," ",162],["T_VARIABLE","$where",162],")",";",["T_WHITESPACE","\n        ",162],"}",["T_WHITESPACE","\n\n    ",163],"}",["T_WHITESPACE","\n\n    ",165],["T_DOC_COMMENT","\/**\n     * Save option value title data\n     *\n     * @param Mage_Core_Model_Abstract $object\n     *\/",167],["T_WHITESPACE","\n    ",171],["T_PROTECTED","protected",172],["T_WHITESPACE"," ",172],["T_FUNCTION","function",172],["T_WHITESPACE"," ",172],["T_STRING","_saveValueTitles",172],"(",["T_STRING","Mage_Core_Model_Abstract",172],["T_WHITESPACE"," ",172],["T_VARIABLE","$object",172],")",["T_WHITESPACE","\n    ",172],"{",["T_WHITESPACE","\n        ",173],["T_VARIABLE","$titleTable",174],["T_WHITESPACE"," ",174],"=",["T_WHITESPACE"," ",174],["T_VARIABLE","$this",174],["T_OBJECT_OPERATOR","->",174],["T_STRING","getTable",174],"(",["T_CONSTANT_ENCAPSED_STRING","'catalog\/product_option_type_title'",174],")",";",["T_WHITESPACE","\n\n        ",174],["T_IF","if",176],["T_WHITESPACE"," ",176],"(","!",["T_VARIABLE","$object",176],["T_OBJECT_OPERATOR","->",176],["T_STRING","getData",176],"(",["T_CONSTANT_ENCAPSED_STRING","'scope'",176],",",["T_WHITESPACE"," ",176],["T_CONSTANT_ENCAPSED_STRING","'title'",176],")",")",["T_WHITESPACE"," ",176],"{",["T_WHITESPACE","\n            ",176],["T_VARIABLE","$select",177],["T_WHITESPACE"," ",177],"=",["T_WHITESPACE"," ",177],["T_VARIABLE","$this",177],["T_OBJECT_OPERATOR","->",177],["T_STRING","_getReadAdapter",177],"(",")",["T_OBJECT_OPERATOR","->",177],["T_STRING","select",177],"(",")",["T_WHITESPACE","\n                ",177],["T_OBJECT_OPERATOR","->",178],["T_STRING","from",178],"(",["T_VARIABLE","$titleTable",178],",",["T_WHITESPACE"," ",178],["T_ARRAY","array",178],"(",["T_CONSTANT_ENCAPSED_STRING","'option_type_id'",178],")",")",["T_WHITESPACE","\n                ",178],["T_OBJECT_OPERATOR","->",179],["T_STRING","where",179],"(",["T_CONSTANT_ENCAPSED_STRING","'option_type_id = ?'",179],",",["T_WHITESPACE"," ",179],["T_INT_CAST","(int)",179],["T_VARIABLE","$object",179],["T_OBJECT_OPERATOR","->",179],["T_STRING","getId",179],"(",")",")",["T_WHITESPACE","\n                ",179],["T_OBJECT_OPERATOR","->",180],["T_STRING","where",180],"(",["T_CONSTANT_ENCAPSED_STRING","'store_id = ?'",180],",",["T_WHITESPACE"," ",180],["T_LNUMBER","0",180],")",";",["T_WHITESPACE","\n            ",180],["T_VARIABLE","$optionTypeId",181],["T_WHITESPACE"," ",181],"=",["T_WHITESPACE"," ",181],["T_VARIABLE","$this",181],["T_OBJECT_OPERATOR","->",181],["T_STRING","_getReadAdapter",181],"(",")",["T_OBJECT_OPERATOR","->",181],["T_STRING","fetchOne",181],"(",["T_VARIABLE","$select",181],")",";",["T_WHITESPACE","\n\n            ",181],["T_IF","if",183],["T_WHITESPACE"," ",183],"(",["T_VARIABLE","$optionTypeId",183],")",["T_WHITESPACE"," ",183],"{",["T_WHITESPACE","\n                ",183],["T_IF","if",184],["T_WHITESPACE"," ",184],"(",["T_VARIABLE","$object",184],["T_OBJECT_OPERATOR","->",184],["T_STRING","getStoreId",184],"(",")",["T_WHITESPACE"," ",184],["T_IS_EQUAL","==",184],["T_WHITESPACE"," ",184],["T_CONSTANT_ENCAPSED_STRING","'0'",184],")",["T_WHITESPACE"," ",184],"{",["T_WHITESPACE","\n                    ",184],["T_VARIABLE","$where",185],["T_WHITESPACE"," ",185],"=",["T_WHITESPACE"," ",185],["T_ARRAY","array",185],"(",["T_WHITESPACE","\n                        ",185],["T_CONSTANT_ENCAPSED_STRING","'option_type_id = ?'",186],["T_WHITESPACE","    ",186],["T_DOUBLE_ARROW","=>",186],["T_WHITESPACE"," ",186],["T_INT_CAST","(int)",186],["T_VARIABLE","$optionTypeId",186],",",["T_WHITESPACE","\n                        ",186],["T_CONSTANT_ENCAPSED_STRING","'store_id = ?'",187],["T_WHITESPACE","          ",187],["T_DOUBLE_ARROW","=>",187],["T_WHITESPACE"," ",187],["T_STRING","Mage_Catalog_Model_Abstract",187],["T_DOUBLE_COLON","::",187],["T_STRING","DEFAULT_STORE_ID",187],["T_WHITESPACE","\n                    ",187],")",";",["T_WHITESPACE","\n                    ",188],["T_VARIABLE","$bind",189],["T_WHITESPACE","  ",189],"=",["T_WHITESPACE"," ",189],["T_ARRAY","array",189],"(",["T_WHITESPACE","\n                        ",189],["T_CONSTANT_ENCAPSED_STRING","'title'",190],["T_WHITESPACE"," ",190],["T_DOUBLE_ARROW","=>",190],["T_WHITESPACE"," ",190],["T_VARIABLE","$object",190],["T_OBJECT_OPERATOR","->",190],["T_STRING","getTitle",190],"(",")",["T_WHITESPACE","\n                    ",190],")",";",["T_WHITESPACE","\n                    ",191],["T_VARIABLE","$this",192],["T_OBJECT_OPERATOR","->",192],["T_STRING","_getWriteAdapter",192],"(",")",["T_OBJECT_OPERATOR","->",192],["T_STRING","update",192],"(",["T_VARIABLE","$titleTable",192],",",["T_WHITESPACE"," ",192],["T_VARIABLE","$bind",192],",",["T_WHITESPACE"," ",192],["T_VARIABLE","$where",192],")",";",["T_WHITESPACE","\n                ",192],"}",["T_WHITESPACE","\n            ",193],"}",["T_WHITESPACE"," ",194],["T_ELSE","else",194],["T_WHITESPACE"," ",194],"{",["T_WHITESPACE","\n                ",194],["T_VARIABLE","$bind",195],["T_WHITESPACE","  ",195],"=",["T_WHITESPACE"," ",195],["T_ARRAY","array",195],"(",["T_WHITESPACE","\n                    ",195],["T_CONSTANT_ENCAPSED_STRING","'option_type_id'",196],["T_WHITESPACE","    ",196],["T_DOUBLE_ARROW","=>",196],["T_WHITESPACE"," ",196],["T_INT_CAST","(int)",196],["T_VARIABLE","$object",196],["T_OBJECT_OPERATOR","->",196],["T_STRING","getId",196],"(",")",",",["T_WHITESPACE","\n                    ",196],["T_CONSTANT_ENCAPSED_STRING","'store_id'",197],["T_WHITESPACE","          ",197],["T_DOUBLE_ARROW","=>",197],["T_WHITESPACE"," ",197],["T_STRING","Mage_Catalog_Model_Abstract",197],["T_DOUBLE_COLON","::",197],["T_STRING","DEFAULT_STORE_ID",197],",",["T_WHITESPACE","\n                    ",197],["T_CONSTANT_ENCAPSED_STRING","'title'",198],["T_WHITESPACE","             ",198],["T_DOUBLE_ARROW","=>",198],["T_WHITESPACE"," ",198],["T_VARIABLE","$object",198],["T_OBJECT_OPERATOR","->",198],["T_STRING","getTitle",198],"(",")",["T_WHITESPACE","\n                ",198],")",";",["T_WHITESPACE","\n                ",199],["T_VARIABLE","$this",200],["T_OBJECT_OPERATOR","->",200],["T_STRING","_getWriteAdapter",200],"(",")",["T_OBJECT_OPERATOR","->",200],["T_STRING","insert",200],"(",["T_VARIABLE","$titleTable",200],",",["T_WHITESPACE"," ",200],["T_VARIABLE","$bind",200],")",";",["T_WHITESPACE","\n            ",200],"}",["T_WHITESPACE","\n        ",201],"}",["T_WHITESPACE","\n\n        ",202],["T_IF","if",204],["T_WHITESPACE"," ",204],"(",["T_VARIABLE","$object",204],["T_OBJECT_OPERATOR","->",204],["T_STRING","getStoreId",204],"(",")",["T_WHITESPACE"," ",204],["T_IS_NOT_EQUAL","!=",204],["T_WHITESPACE"," ",204],["T_CONSTANT_ENCAPSED_STRING","'0'",204],["T_WHITESPACE"," ",204],["T_BOOLEAN_AND","&&",204],["T_WHITESPACE"," ",204],"!",["T_VARIABLE","$object",204],["T_OBJECT_OPERATOR","->",204],["T_STRING","getData",204],"(",["T_CONSTANT_ENCAPSED_STRING","'scope'",204],",",["T_WHITESPACE"," ",204],["T_CONSTANT_ENCAPSED_STRING","'title'",204],")",")",["T_WHITESPACE"," ",204],"{",["T_WHITESPACE","\n            ",204],["T_VARIABLE","$select",205],["T_WHITESPACE"," ",205],"=",["T_WHITESPACE"," ",205],["T_VARIABLE","$this",205],["T_OBJECT_OPERATOR","->",205],["T_STRING","_getReadAdapter",205],"(",")",["T_OBJECT_OPERATOR","->",205],["T_STRING","select",205],"(",")",["T_WHITESPACE","\n                ",205],["T_OBJECT_OPERATOR","->",206],["T_STRING","from",206],"(",["T_VARIABLE","$titleTable",206],",",["T_WHITESPACE"," ",206],["T_ARRAY","array",206],"(",["T_CONSTANT_ENCAPSED_STRING","'option_type_id'",206],")",")",["T_WHITESPACE","\n                ",206],["T_OBJECT_OPERATOR","->",207],["T_STRING","where",207],"(",["T_CONSTANT_ENCAPSED_STRING","'option_type_id = ?'",207],",",["T_WHITESPACE"," ",207],["T_INT_CAST","(int)",207],["T_VARIABLE","$object",207],["T_OBJECT_OPERATOR","->",207],["T_STRING","getId",207],"(",")",")",["T_WHITESPACE","\n                ",207],["T_OBJECT_OPERATOR","->",208],["T_STRING","where",208],"(",["T_CONSTANT_ENCAPSED_STRING","'store_id = ?'",208],",",["T_WHITESPACE"," ",208],["T_INT_CAST","(int)",208],["T_VARIABLE","$object",208],["T_OBJECT_OPERATOR","->",208],["T_STRING","getStoreId",208],"(",")",")",";",["T_WHITESPACE","\n            ",208],["T_VARIABLE","$optionTypeId",209],["T_WHITESPACE"," ",209],"=",["T_WHITESPACE"," ",209],["T_VARIABLE","$this",209],["T_OBJECT_OPERATOR","->",209],["T_STRING","_getReadAdapter",209],"(",")",["T_OBJECT_OPERATOR","->",209],["T_STRING","fetchOne",209],"(",["T_VARIABLE","$select",209],")",";",["T_WHITESPACE","\n\n            ",209],["T_IF","if",211],["T_WHITESPACE"," ",211],"(",["T_VARIABLE","$optionTypeId",211],")",["T_WHITESPACE"," ",211],"{",["T_WHITESPACE","\n                ",211],["T_VARIABLE","$bind",212],["T_WHITESPACE","  ",212],"=",["T_WHITESPACE"," ",212],["T_ARRAY","array",212],"(",["T_WHITESPACE","\n                    ",212],["T_CONSTANT_ENCAPSED_STRING","'title'",213],["T_WHITESPACE"," ",213],["T_DOUBLE_ARROW","=>",213],["T_WHITESPACE"," ",213],["T_VARIABLE","$object",213],["T_OBJECT_OPERATOR","->",213],["T_STRING","getTitle",213],"(",")",["T_WHITESPACE","\n                ",213],")",";",["T_WHITESPACE","\n                ",214],["T_VARIABLE","$where",215],["T_WHITESPACE"," ",215],"=",["T_WHITESPACE"," ",215],["T_ARRAY","array",215],"(",["T_WHITESPACE","\n                    ",215],["T_CONSTANT_ENCAPSED_STRING","'option_type_id = ?'",216],["T_WHITESPACE","    ",216],["T_DOUBLE_ARROW","=>",216],["T_WHITESPACE"," ",216],["T_INT_CAST","(int)",216],["T_VARIABLE","$optionTypeId",216],",",["T_WHITESPACE","\n                    ",216],["T_CONSTANT_ENCAPSED_STRING","'store_id = ?'",217],["T_WHITESPACE","          ",217],["T_DOUBLE_ARROW","=>",217],["T_WHITESPACE"," ",217],["T_INT_CAST","(int)",217],["T_VARIABLE","$object",217],["T_OBJECT_OPERATOR","->",217],["T_STRING","getStoreId",217],"(",")",["T_WHITESPACE","\n                ",217],")",";",["T_WHITESPACE","\n                ",218],["T_VARIABLE","$this",219],["T_OBJECT_OPERATOR","->",219],["T_STRING","_getWriteAdapter",219],"(",")",["T_OBJECT_OPERATOR","->",219],["T_STRING","update",219],"(",["T_VARIABLE","$titleTable",219],",",["T_WHITESPACE"," ",219],["T_VARIABLE","$bind",219],",",["T_WHITESPACE"," ",219],["T_VARIABLE","$where",219],")",";",["T_WHITESPACE","\n            ",219],"}",["T_WHITESPACE"," ",220],["T_ELSE","else",220],["T_WHITESPACE"," ",220],"{",["T_WHITESPACE","\n                ",220],["T_VARIABLE","$bind",221],["T_WHITESPACE","  ",221],"=",["T_WHITESPACE"," ",221],["T_ARRAY","array",221],"(",["T_WHITESPACE","\n                    ",221],["T_CONSTANT_ENCAPSED_STRING","'option_type_id'",222],["T_WHITESPACE","    ",222],["T_DOUBLE_ARROW","=>",222],["T_WHITESPACE"," ",222],["T_INT_CAST","(int)",222],["T_VARIABLE","$object",222],["T_OBJECT_OPERATOR","->",222],["T_STRING","getId",222],"(",")",",",["T_WHITESPACE","\n                    ",222],["T_CONSTANT_ENCAPSED_STRING","'store_id'",223],["T_WHITESPACE","          ",223],["T_DOUBLE_ARROW","=>",223],["T_WHITESPACE"," ",223],["T_INT_CAST","(int)",223],["T_VARIABLE","$object",223],["T_OBJECT_OPERATOR","->",223],["T_STRING","getStoreId",223],"(",")",",",["T_WHITESPACE","\n                    ",223],["T_CONSTANT_ENCAPSED_STRING","'title'",224],["T_WHITESPACE","             ",224],["T_DOUBLE_ARROW","=>",224],["T_WHITESPACE"," ",224],["T_VARIABLE","$object",224],["T_OBJECT_OPERATOR","->",224],["T_STRING","getTitle",224],"(",")",["T_WHITESPACE","\n                ",224],")",";",["T_WHITESPACE","\n                ",225],["T_VARIABLE","$this",226],["T_OBJECT_OPERATOR","->",226],["T_STRING","_getWriteAdapter",226],"(",")",["T_OBJECT_OPERATOR","->",226],["T_STRING","insert",226],"(",["T_VARIABLE","$titleTable",226],",",["T_WHITESPACE"," ",226],["T_VARIABLE","$bind",226],")",";",["T_WHITESPACE","\n            ",226],"}",["T_WHITESPACE","\n        ",227],"}",["T_WHITESPACE"," ",228],["T_ELSE","else",228],["T_WHITESPACE"," ",228],["T_IF","if",228],["T_WHITESPACE"," ",228],"(",["T_VARIABLE","$object",228],["T_OBJECT_OPERATOR","->",228],["T_STRING","getData",228],"(",["T_CONSTANT_ENCAPSED_STRING","'scope'",228],",",["T_WHITESPACE"," ",228],["T_CONSTANT_ENCAPSED_STRING","'title'",228],")",")",["T_WHITESPACE"," ",228],"{",["T_WHITESPACE","\n            ",228],["T_VARIABLE","$where",229],["T_WHITESPACE"," ",229],"=",["T_WHITESPACE"," ",229],["T_ARRAY","array",229],"(",["T_WHITESPACE","\n                ",229],["T_CONSTANT_ENCAPSED_STRING","'option_type_id = ?'",230],["T_WHITESPACE","    ",230],["T_DOUBLE_ARROW","=>",230],["T_WHITESPACE"," ",230],["T_INT_CAST","(int)",230],["T_VARIABLE","$object",230],["T_OBJECT_OPERATOR","->",230],["T_STRING","getId",230],"(",")",",",["T_WHITESPACE","\n                ",230],["T_CONSTANT_ENCAPSED_STRING","'store_id = ?'",231],["T_WHITESPACE","          ",231],["T_DOUBLE_ARROW","=>",231],["T_WHITESPACE"," ",231],["T_INT_CAST","(int)",231],["T_VARIABLE","$object",231],["T_OBJECT_OPERATOR","->",231],["T_STRING","getStoreId",231],"(",")",["T_WHITESPACE","\n            ",231],")",";",["T_WHITESPACE","\n            ",232],["T_VARIABLE","$this",233],["T_OBJECT_OPERATOR","->",233],["T_STRING","_getWriteAdapter",233],"(",")",["T_OBJECT_OPERATOR","->",233],["T_STRING","delete",233],"(",["T_VARIABLE","$titleTable",233],",",["T_WHITESPACE"," ",233],["T_VARIABLE","$where",233],")",";",["T_WHITESPACE","\n        ",233],"}",["T_WHITESPACE","\n    ",234],"}",["T_WHITESPACE","\n\n    ",235],["T_DOC_COMMENT","\/**\n     * Delete values by option id\n     *\n     * @param int $optionId\n     * @return Mage_Catalog_Model_Resource_Product_Option_Value\n     *\/",237],["T_WHITESPACE","\n    ",242],["T_PUBLIC","public",243],["T_WHITESPACE"," ",243],["T_FUNCTION","function",243],["T_WHITESPACE"," ",243],["T_STRING","deleteValue",243],"(",["T_VARIABLE","$optionId",243],")",["T_WHITESPACE","\n    ",243],"{",["T_WHITESPACE","\n        ",244],["T_VARIABLE","$statement",245],["T_WHITESPACE"," ",245],"=",["T_WHITESPACE"," ",245],["T_VARIABLE","$this",245],["T_OBJECT_OPERATOR","->",245],["T_STRING","_getReadAdapter",245],"(",")",["T_OBJECT_OPERATOR","->",245],["T_STRING","select",245],"(",")",["T_WHITESPACE","\n            ",245],["T_OBJECT_OPERATOR","->",246],["T_STRING","from",246],"(",["T_VARIABLE","$this",246],["T_OBJECT_OPERATOR","->",246],["T_STRING","getTable",246],"(",["T_CONSTANT_ENCAPSED_STRING","'catalog\/product_option_type_value'",246],")",")",["T_WHITESPACE","\n            ",246],["T_OBJECT_OPERATOR","->",247],["T_STRING","where",247],"(",["T_CONSTANT_ENCAPSED_STRING","'option_id = ?'",247],",",["T_WHITESPACE"," ",247],["T_VARIABLE","$optionId",247],")",";",["T_WHITESPACE","\n\n        ",247],["T_VARIABLE","$rowSet",249],["T_WHITESPACE"," ",249],"=",["T_WHITESPACE"," ",249],["T_VARIABLE","$this",249],["T_OBJECT_OPERATOR","->",249],["T_STRING","_getReadAdapter",249],"(",")",["T_OBJECT_OPERATOR","->",249],["T_STRING","fetchAll",249],"(",["T_VARIABLE","$statement",249],")",";",["T_WHITESPACE","\n\n        ",249],["T_FOREACH","foreach",251],["T_WHITESPACE"," ",251],"(",["T_VARIABLE","$rowSet",251],["T_WHITESPACE"," ",251],["T_AS","as",251],["T_WHITESPACE"," ",251],["T_VARIABLE","$optionType",251],")",["T_WHITESPACE"," ",251],"{",["T_WHITESPACE","\n            ",251],["T_VARIABLE","$this",252],["T_OBJECT_OPERATOR","->",252],["T_STRING","deleteValues",252],"(",["T_VARIABLE","$optionType",252],"[",["T_CONSTANT_ENCAPSED_STRING","'option_type_id'",252],"]",")",";",["T_WHITESPACE","\n        ",252],"}",["T_WHITESPACE","\n\n        ",253],["T_VARIABLE","$this",255],["T_OBJECT_OPERATOR","->",255],["T_STRING","_getWriteAdapter",255],"(",")",["T_OBJECT_OPERATOR","->",255],["T_STRING","delete",255],"(",["T_WHITESPACE","\n            ",255],["T_VARIABLE","$this",256],["T_OBJECT_OPERATOR","->",256],["T_STRING","getMainTable",256],"(",")",",",["T_WHITESPACE","\n            ",256],["T_ARRAY","array",257],"(",["T_WHITESPACE","\n                ",257],["T_CONSTANT_ENCAPSED_STRING","'option_id = ?'",258],["T_WHITESPACE"," ",258],["T_DOUBLE_ARROW","=>",258],["T_WHITESPACE"," ",258],["T_VARIABLE","$optionId",258],",",["T_WHITESPACE","\n            ",258],")",["T_WHITESPACE","\n        ",259],")",";",["T_WHITESPACE","\n\n        ",260],["T_RETURN","return",262],["T_WHITESPACE"," ",262],["T_VARIABLE","$this",262],";",["T_WHITESPACE","\n    ",262],"}",["T_WHITESPACE","\n\n    ",263],["T_DOC_COMMENT","\/**\n     * Delete values by option type\n     *\n     * @param int $optionTypeId\n     *\/",265],["T_WHITESPACE","\n    ",269],["T_PUBLIC","public",270],["T_WHITESPACE"," ",270],["T_FUNCTION","function",270],["T_WHITESPACE"," ",270],["T_STRING","deleteValues",270],"(",["T_VARIABLE","$optionTypeId",270],")",["T_WHITESPACE","\n    ",270],"{",["T_WHITESPACE","\n        ",271],["T_VARIABLE","$condition",272],["T_WHITESPACE"," ",272],"=",["T_WHITESPACE"," ",272],["T_ARRAY","array",272],"(",["T_WHITESPACE","\n            ",272],["T_CONSTANT_ENCAPSED_STRING","'option_type_id = ?'",273],["T_WHITESPACE"," ",273],["T_DOUBLE_ARROW","=>",273],["T_WHITESPACE"," ",273],["T_VARIABLE","$optionTypeId",273],["T_WHITESPACE","\n        ",273],")",";",["T_WHITESPACE","\n\n        ",274],["T_VARIABLE","$this",276],["T_OBJECT_OPERATOR","->",276],["T_STRING","_getWriteAdapter",276],"(",")",["T_OBJECT_OPERATOR","->",276],["T_STRING","delete",276],"(",["T_WHITESPACE","\n            ",276],["T_VARIABLE","$this",277],["T_OBJECT_OPERATOR","->",277],["T_STRING","getTable",277],"(",["T_CONSTANT_ENCAPSED_STRING","'catalog\/product_option_type_price'",277],")",",",["T_WHITESPACE","\n            ",277],["T_VARIABLE","$condition",278],["T_WHITESPACE","\n        ",278],")",";",["T_WHITESPACE","\n\n        ",279],["T_VARIABLE","$this",281],["T_OBJECT_OPERATOR","->",281],["T_STRING","_getWriteAdapter",281],"(",")",["T_OBJECT_OPERATOR","->",281],["T_STRING","delete",281],"(",["T_WHITESPACE","\n            ",281],["T_VARIABLE","$this",282],["T_OBJECT_OPERATOR","->",282],["T_STRING","getTable",282],"(",["T_CONSTANT_ENCAPSED_STRING","'catalog\/product_option_type_title'",282],")",",",["T_WHITESPACE","\n            ",282],["T_VARIABLE","$condition",283],["T_WHITESPACE","\n        ",283],")",";",["T_WHITESPACE","\n    ",284],"}",["T_WHITESPACE","\n\n    ",285],["T_DOC_COMMENT","\/**\n     * Duplicate product options value\n     *\n     * @param Mage_Catalog_Model_Product_Option_Value $object\n     * @param int $oldOptionId\n     * @param int $newOptionId\n     * @return Mage_Catalog_Model_Product_Option_Value\n     *\/",287],["T_WHITESPACE","\n    ",294],["T_PUBLIC","public",295],["T_WHITESPACE"," ",295],["T_FUNCTION","function",295],["T_WHITESPACE"," ",295],["T_STRING","duplicate",295],"(",["T_STRING","Mage_Catalog_Model_Product_Option_Value",295],["T_WHITESPACE"," ",295],["T_VARIABLE","$object",295],",",["T_WHITESPACE"," ",295],["T_VARIABLE","$oldOptionId",295],",",["T_WHITESPACE"," ",295],["T_VARIABLE","$newOptionId",295],")",["T_WHITESPACE","\n    ",295],"{",["T_WHITESPACE","\n        ",296],["T_VARIABLE","$writeAdapter",297],["T_WHITESPACE"," ",297],"=",["T_WHITESPACE"," ",297],["T_VARIABLE","$this",297],["T_OBJECT_OPERATOR","->",297],["T_STRING","_getWriteAdapter",297],"(",")",";",["T_WHITESPACE","\n        ",297],["T_VARIABLE","$readAdapter",298],["T_WHITESPACE","  ",298],"=",["T_WHITESPACE"," ",298],["T_VARIABLE","$this",298],["T_OBJECT_OPERATOR","->",298],["T_STRING","_getReadAdapter",298],"(",")",";",["T_WHITESPACE","\n        ",298],["T_VARIABLE","$select",299],["T_WHITESPACE","       ",299],"=",["T_WHITESPACE"," ",299],["T_VARIABLE","$readAdapter",299],["T_OBJECT_OPERATOR","->",299],["T_STRING","select",299],"(",")",["T_WHITESPACE","\n            ",299],["T_OBJECT_OPERATOR","->",300],["T_STRING","from",300],"(",["T_VARIABLE","$this",300],["T_OBJECT_OPERATOR","->",300],["T_STRING","getMainTable",300],"(",")",")",["T_WHITESPACE","\n            ",300],["T_OBJECT_OPERATOR","->",301],["T_STRING","where",301],"(",["T_CONSTANT_ENCAPSED_STRING","'option_id = ?'",301],",",["T_WHITESPACE"," ",301],["T_VARIABLE","$oldOptionId",301],")",";",["T_WHITESPACE","\n        ",301],["T_VARIABLE","$valueData",302],["T_WHITESPACE"," ",302],"=",["T_WHITESPACE"," ",302],["T_VARIABLE","$readAdapter",302],["T_OBJECT_OPERATOR","->",302],["T_STRING","fetchAll",302],"(",["T_VARIABLE","$select",302],")",";",["T_WHITESPACE","\n\n        ",302],["T_VARIABLE","$valueCond",304],["T_WHITESPACE"," ",304],"=",["T_WHITESPACE"," ",304],["T_ARRAY","array",304],"(",")",";",["T_WHITESPACE","\n\n        ",304],["T_FOREACH","foreach",306],["T_WHITESPACE"," ",306],"(",["T_VARIABLE","$valueData",306],["T_WHITESPACE"," ",306],["T_AS","as",306],["T_WHITESPACE"," ",306],["T_VARIABLE","$data",306],")",["T_WHITESPACE"," ",306],"{",["T_WHITESPACE","\n            ",306],["T_VARIABLE","$optionTypeId",307],["T_WHITESPACE"," ",307],"=",["T_WHITESPACE"," ",307],["T_VARIABLE","$data",307],"[",["T_VARIABLE","$this",307],["T_OBJECT_OPERATOR","->",307],["T_STRING","getIdFieldName",307],"(",")","]",";",["T_WHITESPACE","\n            ",307],["T_UNSET","unset",308],"(",["T_VARIABLE","$data",308],"[",["T_VARIABLE","$this",308],["T_OBJECT_OPERATOR","->",308],["T_STRING","getIdFieldName",308],"(",")","]",")",";",["T_WHITESPACE","\n            ",308],["T_VARIABLE","$data",309],"[",["T_CONSTANT_ENCAPSED_STRING","'option_id'",309],"]",["T_WHITESPACE"," ",309],"=",["T_WHITESPACE"," ",309],["T_VARIABLE","$newOptionId",309],";",["T_WHITESPACE","\n\n            ",309],["T_VARIABLE","$writeAdapter",311],["T_OBJECT_OPERATOR","->",311],["T_STRING","insert",311],"(",["T_VARIABLE","$this",311],["T_OBJECT_OPERATOR","->",311],["T_STRING","getMainTable",311],"(",")",",",["T_WHITESPACE"," ",311],["T_VARIABLE","$data",311],")",";",["T_WHITESPACE","\n            ",311],["T_VARIABLE","$valueCond",312],"[",["T_VARIABLE","$optionTypeId",312],"]",["T_WHITESPACE"," ",312],"=",["T_WHITESPACE"," ",312],["T_VARIABLE","$writeAdapter",312],["T_OBJECT_OPERATOR","->",312],["T_STRING","lastInsertId",312],"(",["T_VARIABLE","$this",312],["T_OBJECT_OPERATOR","->",312],["T_STRING","getMainTable",312],"(",")",")",";",["T_WHITESPACE","\n        ",312],"}",["T_WHITESPACE","\n\n        ",313],["T_UNSET","unset",315],"(",["T_VARIABLE","$valueData",315],")",";",["T_WHITESPACE","\n\n        ",315],["T_FOREACH","foreach",317],["T_WHITESPACE"," ",317],"(",["T_VARIABLE","$valueCond",317],["T_WHITESPACE"," ",317],["T_AS","as",317],["T_WHITESPACE"," ",317],["T_VARIABLE","$oldTypeId",317],["T_WHITESPACE"," ",317],["T_DOUBLE_ARROW","=>",317],["T_WHITESPACE"," ",317],["T_VARIABLE","$newTypeId",317],")",["T_WHITESPACE"," ",317],"{",["T_WHITESPACE","\n            ",317],["T_COMMENT","\/\/ price\n",318],["T_WHITESPACE","            ",319],["T_VARIABLE","$priceTable",319],["T_WHITESPACE"," ",319],"=",["T_WHITESPACE"," ",319],["T_VARIABLE","$this",319],["T_OBJECT_OPERATOR","->",319],["T_STRING","getTable",319],"(",["T_CONSTANT_ENCAPSED_STRING","'catalog\/product_option_type_price'",319],")",";",["T_WHITESPACE","\n            ",319],["T_VARIABLE","$columns",320],["T_WHITESPACE"," ",320],"=",["T_WHITESPACE"," ",320],["T_ARRAY","array",320],"(",["T_WHITESPACE","\n                ",320],["T_NEW","new",321],["T_WHITESPACE"," ",321],["T_STRING","Zend_Db_Expr",321],"(",["T_VARIABLE","$newTypeId",321],")",",",["T_WHITESPACE","\n                ",321],["T_CONSTANT_ENCAPSED_STRING","'store_id'",322],",",["T_WHITESPACE"," ",322],["T_CONSTANT_ENCAPSED_STRING","'price'",322],",",["T_WHITESPACE"," ",322],["T_CONSTANT_ENCAPSED_STRING","'price_type'",322],["T_WHITESPACE","\n            ",322],")",";",["T_WHITESPACE","\n\n            ",323],["T_VARIABLE","$select",325],["T_WHITESPACE"," ",325],"=",["T_WHITESPACE"," ",325],["T_VARIABLE","$readAdapter",325],["T_OBJECT_OPERATOR","->",325],["T_STRING","select",325],"(",")",["T_WHITESPACE","\n                ",325],["T_OBJECT_OPERATOR","->",326],["T_STRING","from",326],"(",["T_VARIABLE","$priceTable",326],",",["T_WHITESPACE"," ",326],["T_ARRAY","array",326],"(",")",")",["T_WHITESPACE","\n                ",326],["T_OBJECT_OPERATOR","->",327],["T_STRING","where",327],"(",["T_CONSTANT_ENCAPSED_STRING","'option_type_id = ?'",327],",",["T_WHITESPACE"," ",327],["T_VARIABLE","$oldTypeId",327],")",["T_WHITESPACE","\n                ",327],["T_OBJECT_OPERATOR","->",328],["T_STRING","columns",328],"(",["T_VARIABLE","$columns",328],")",";",["T_WHITESPACE","\n            ",328],["T_VARIABLE","$insertSelect",329],["T_WHITESPACE"," ",329],"=",["T_WHITESPACE"," ",329],["T_VARIABLE","$writeAdapter",329],["T_OBJECT_OPERATOR","->",329],["T_STRING","insertFromSelect",329],"(",["T_VARIABLE","$select",329],",",["T_WHITESPACE"," ",329],["T_VARIABLE","$priceTable",329],",",["T_WHITESPACE","\n                ",329],["T_ARRAY","array",330],"(",["T_CONSTANT_ENCAPSED_STRING","'option_type_id'",330],",",["T_WHITESPACE"," ",330],["T_CONSTANT_ENCAPSED_STRING","'store_id'",330],",",["T_WHITESPACE"," ",330],["T_CONSTANT_ENCAPSED_STRING","'price'",330],",",["T_WHITESPACE"," ",330],["T_CONSTANT_ENCAPSED_STRING","'price_type'",330],")",")",";",["T_WHITESPACE","\n            ",330],["T_VARIABLE","$writeAdapter",331],["T_OBJECT_OPERATOR","->",331],["T_STRING","query",331],"(",["T_VARIABLE","$insertSelect",331],")",";",["T_WHITESPACE","\n\n            ",331],["T_COMMENT","\/\/ title\n",333],["T_WHITESPACE","            ",334],["T_VARIABLE","$titleTable",334],["T_WHITESPACE"," ",334],"=",["T_WHITESPACE"," ",334],["T_VARIABLE","$this",334],["T_OBJECT_OPERATOR","->",334],["T_STRING","getTable",334],"(",["T_CONSTANT_ENCAPSED_STRING","'catalog\/product_option_type_title'",334],")",";",["T_WHITESPACE","\n            ",334],["T_VARIABLE","$columns",335],["T_WHITESPACE"," ",335],"=",["T_WHITESPACE"," ",335],["T_ARRAY","array",335],"(",["T_WHITESPACE","\n                ",335],["T_NEW","new",336],["T_WHITESPACE"," ",336],["T_STRING","Zend_Db_Expr",336],"(",["T_VARIABLE","$newTypeId",336],")",",",["T_WHITESPACE","\n                ",336],["T_CONSTANT_ENCAPSED_STRING","'store_id'",337],",",["T_WHITESPACE"," ",337],["T_CONSTANT_ENCAPSED_STRING","'title'",337],["T_WHITESPACE","\n            ",337],")",";",["T_WHITESPACE","\n\n            ",338],["T_VARIABLE","$select",340],["T_WHITESPACE"," ",340],"=",["T_WHITESPACE"," ",340],["T_VARIABLE","$this",340],["T_OBJECT_OPERATOR","->",340],["T_STRING","_getReadAdapter",340],"(",")",["T_OBJECT_OPERATOR","->",340],["T_STRING","select",340],"(",")",["T_WHITESPACE","\n                ",340],["T_OBJECT_OPERATOR","->",341],["T_STRING","from",341],"(",["T_VARIABLE","$titleTable",341],",",["T_WHITESPACE"," ",341],["T_ARRAY","array",341],"(",")",")",["T_WHITESPACE","\n                ",341],["T_OBJECT_OPERATOR","->",342],["T_STRING","where",342],"(",["T_CONSTANT_ENCAPSED_STRING","'option_type_id = ?'",342],",",["T_WHITESPACE"," ",342],["T_VARIABLE","$oldTypeId",342],")",["T_WHITESPACE","\n                ",342],["T_OBJECT_OPERATOR","->",343],["T_STRING","columns",343],"(",["T_VARIABLE","$columns",343],")",";",["T_WHITESPACE","\n            ",343],["T_VARIABLE","$insertSelect",344],["T_WHITESPACE"," ",344],"=",["T_WHITESPACE"," ",344],["T_VARIABLE","$writeAdapter",344],["T_OBJECT_OPERATOR","->",344],["T_STRING","insertFromSelect",344],"(",["T_VARIABLE","$select",344],",",["T_WHITESPACE"," ",344],["T_VARIABLE","$titleTable",344],",",["T_WHITESPACE","\n                ",344],["T_ARRAY","array",345],"(",["T_CONSTANT_ENCAPSED_STRING","'option_type_id'",345],",",["T_WHITESPACE"," ",345],["T_CONSTANT_ENCAPSED_STRING","'store_id'",345],",",["T_WHITESPACE"," ",345],["T_CONSTANT_ENCAPSED_STRING","'title'",345],")",")",";",["T_WHITESPACE","\n            ",345],["T_VARIABLE","$writeAdapter",346],["T_OBJECT_OPERATOR","->",346],["T_STRING","query",346],"(",["T_VARIABLE","$insertSelect",346],")",";",["T_WHITESPACE","\n        ",346],"}",["T_WHITESPACE","\n\n        ",347],["T_RETURN","return",349],["T_WHITESPACE"," ",349],["T_VARIABLE","$object",349],";",["T_WHITESPACE","\n    ",349],"}",["T_WHITESPACE","\n",350],"}",["T_WHITESPACE","\n",351]]
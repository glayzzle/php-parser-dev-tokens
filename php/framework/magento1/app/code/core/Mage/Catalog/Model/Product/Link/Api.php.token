[["T_OPEN_TAG","<?php\n",1],["T_DOC_COMMENT","\/**\n * Magento\n *\n * NOTICE OF LICENSE\n *\n * This source file is subject to the Open Software License (OSL 3.0)\n * that is bundled with this package in the file LICENSE.txt.\n * It is also available through the world-wide-web at this URL:\n * http:\/\/opensource.org\/licenses\/osl-3.0.php\n * If you did not receive a copy of the license and are unable to\n * obtain it through the world-wide-web, please send an email\n * to license@magento.com so we can send you a copy immediately.\n *\n * DISCLAIMER\n *\n * Do not edit or add to this file if you wish to upgrade Magento to newer\n * versions in the future. If you wish to customize Magento for your\n * needs please refer to http:\/\/www.magento.com for more information.\n *\n * @category    Mage\n * @package     Mage_Catalog\n * @copyright  Copyright (c) 2006-2016 X.commerce, Inc. and affiliates (http:\/\/www.magento.com)\n * @license    http:\/\/opensource.org\/licenses\/osl-3.0.php  Open Software License (OSL 3.0)\n *\/",2],["T_WHITESPACE","\n\n",25],["T_DOC_COMMENT","\/**\n * Catalog product link api\n *\n * @category   Mage\n * @package    Mage_Catalog\n * @author     Magento Core Team <core@magentocommerce.com>\n *\/",27],["T_WHITESPACE","\n",33],["T_CLASS","class",34],["T_WHITESPACE"," ",34],["T_STRING","Mage_Catalog_Model_Product_Link_Api",34],["T_WHITESPACE"," ",34],["T_EXTENDS","extends",34],["T_WHITESPACE"," ",34],["T_STRING","Mage_Catalog_Model_Api_Resource",34],["T_WHITESPACE","\n",34],"{",["T_WHITESPACE","\n    ",35],["T_DOC_COMMENT","\/**\n     * Product link type mapping, used for references and validation\n     *\n     * @var array\n     *\/",36],["T_WHITESPACE","\n    ",40],["T_PROTECTED","protected",41],["T_WHITESPACE"," ",41],["T_VARIABLE","$_typeMap",41],["T_WHITESPACE"," ",41],"=",["T_WHITESPACE"," ",41],["T_ARRAY","array",41],"(",["T_WHITESPACE","\n        ",41],["T_CONSTANT_ENCAPSED_STRING","'related'",42],["T_WHITESPACE","       ",42],["T_DOUBLE_ARROW","=>",42],["T_WHITESPACE"," ",42],["T_STRING","Mage_Catalog_Model_Product_Link",42],["T_DOUBLE_COLON","::",42],["T_STRING","LINK_TYPE_RELATED",42],",",["T_WHITESPACE","\n        ",42],["T_CONSTANT_ENCAPSED_STRING","'up_sell'",43],["T_WHITESPACE","       ",43],["T_DOUBLE_ARROW","=>",43],["T_WHITESPACE"," ",43],["T_STRING","Mage_Catalog_Model_Product_Link",43],["T_DOUBLE_COLON","::",43],["T_STRING","LINK_TYPE_UPSELL",43],",",["T_WHITESPACE","\n        ",43],["T_CONSTANT_ENCAPSED_STRING","'cross_sell'",44],["T_WHITESPACE","    ",44],["T_DOUBLE_ARROW","=>",44],["T_WHITESPACE"," ",44],["T_STRING","Mage_Catalog_Model_Product_Link",44],["T_DOUBLE_COLON","::",44],["T_STRING","LINK_TYPE_CROSSSELL",44],",",["T_WHITESPACE","\n        ",44],["T_CONSTANT_ENCAPSED_STRING","'grouped'",45],["T_WHITESPACE","       ",45],["T_DOUBLE_ARROW","=>",45],["T_WHITESPACE"," ",45],["T_STRING","Mage_Catalog_Model_Product_Link",45],["T_DOUBLE_COLON","::",45],["T_STRING","LINK_TYPE_GROUPED",45],["T_WHITESPACE","\n    ",45],")",";",["T_WHITESPACE","\n\n    ",46],["T_PUBLIC","public",48],["T_WHITESPACE"," ",48],["T_FUNCTION","function",48],["T_WHITESPACE"," ",48],["T_STRING","__construct",48],"(",")",["T_WHITESPACE","\n    ",48],"{",["T_WHITESPACE","\n        ",49],["T_VARIABLE","$this",50],["T_OBJECT_OPERATOR","->",50],["T_STRING","_storeIdSessionField",50],["T_WHITESPACE"," ",50],"=",["T_WHITESPACE"," ",50],["T_CONSTANT_ENCAPSED_STRING","'product_store_id'",50],";",["T_WHITESPACE","\n    ",50],"}",["T_WHITESPACE","\n\n    ",51],["T_DOC_COMMENT","\/**\n     * Retrieve product link associations\n     *\n     * @param string $type\n     * @param int|sku $productId\n     * @param  string $identifierType\n     * @return array\n     *\/",53],["T_WHITESPACE","\n    ",60],["T_PUBLIC","public",61],["T_WHITESPACE"," ",61],["T_FUNCTION","function",61],["T_WHITESPACE"," ",61],["T_STRING","items",61],"(",["T_VARIABLE","$type",61],",",["T_WHITESPACE"," ",61],["T_VARIABLE","$productId",61],",",["T_WHITESPACE"," ",61],["T_VARIABLE","$identifierType",61],["T_WHITESPACE"," ",61],"=",["T_WHITESPACE"," ",61],["T_STRING","null",61],")",["T_WHITESPACE","\n    ",61],"{",["T_WHITESPACE","\n        ",62],["T_VARIABLE","$typeId",63],["T_WHITESPACE"," ",63],"=",["T_WHITESPACE"," ",63],["T_VARIABLE","$this",63],["T_OBJECT_OPERATOR","->",63],["T_STRING","_getTypeId",63],"(",["T_VARIABLE","$type",63],")",";",["T_WHITESPACE","\n\n        ",63],["T_VARIABLE","$product",65],["T_WHITESPACE"," ",65],"=",["T_WHITESPACE"," ",65],["T_VARIABLE","$this",65],["T_OBJECT_OPERATOR","->",65],["T_STRING","_initProduct",65],"(",["T_VARIABLE","$productId",65],",",["T_WHITESPACE"," ",65],["T_VARIABLE","$identifierType",65],")",";",["T_WHITESPACE","\n\n        ",65],["T_VARIABLE","$link",67],["T_WHITESPACE"," ",67],"=",["T_WHITESPACE"," ",67],["T_VARIABLE","$product",67],["T_OBJECT_OPERATOR","->",67],["T_STRING","getLinkInstance",67],"(",")",["T_WHITESPACE","\n            ",67],["T_OBJECT_OPERATOR","->",68],["T_STRING","setLinkTypeId",68],"(",["T_VARIABLE","$typeId",68],")",";",["T_WHITESPACE","\n\n        ",68],["T_VARIABLE","$collection",70],["T_WHITESPACE"," ",70],"=",["T_WHITESPACE"," ",70],["T_VARIABLE","$this",70],["T_OBJECT_OPERATOR","->",70],["T_STRING","_initCollection",70],"(",["T_VARIABLE","$link",70],",",["T_WHITESPACE"," ",70],["T_VARIABLE","$product",70],")",";",["T_WHITESPACE","\n\n        ",70],["T_VARIABLE","$result",72],["T_WHITESPACE"," ",72],"=",["T_WHITESPACE"," ",72],["T_ARRAY","array",72],"(",")",";",["T_WHITESPACE","\n\n        ",72],["T_FOREACH","foreach",74],["T_WHITESPACE"," ",74],"(",["T_VARIABLE","$collection",74],["T_WHITESPACE"," ",74],["T_AS","as",74],["T_WHITESPACE"," ",74],["T_VARIABLE","$linkedProduct",74],")",["T_WHITESPACE"," ",74],"{",["T_WHITESPACE","\n            ",74],["T_VARIABLE","$row",75],["T_WHITESPACE"," ",75],"=",["T_WHITESPACE"," ",75],["T_ARRAY","array",75],"(",["T_WHITESPACE","\n                ",75],["T_CONSTANT_ENCAPSED_STRING","'product_id'",76],["T_WHITESPACE"," ",76],["T_DOUBLE_ARROW","=>",76],["T_WHITESPACE"," ",76],["T_VARIABLE","$linkedProduct",76],["T_OBJECT_OPERATOR","->",76],["T_STRING","getId",76],"(",")",",",["T_WHITESPACE","\n                ",76],["T_CONSTANT_ENCAPSED_STRING","'type'",77],["T_WHITESPACE","       ",77],["T_DOUBLE_ARROW","=>",77],["T_WHITESPACE"," ",77],["T_VARIABLE","$linkedProduct",77],["T_OBJECT_OPERATOR","->",77],["T_STRING","getTypeId",77],"(",")",",",["T_WHITESPACE","\n                ",77],["T_CONSTANT_ENCAPSED_STRING","'set'",78],["T_WHITESPACE","        ",78],["T_DOUBLE_ARROW","=>",78],["T_WHITESPACE"," ",78],["T_VARIABLE","$linkedProduct",78],["T_OBJECT_OPERATOR","->",78],["T_STRING","getAttributeSetId",78],"(",")",",",["T_WHITESPACE","\n                ",78],["T_CONSTANT_ENCAPSED_STRING","'sku'",79],["T_WHITESPACE","        ",79],["T_DOUBLE_ARROW","=>",79],["T_WHITESPACE"," ",79],["T_VARIABLE","$linkedProduct",79],["T_OBJECT_OPERATOR","->",79],["T_STRING","getSku",79],"(",")",["T_WHITESPACE","\n            ",79],")",";",["T_WHITESPACE","\n\n            ",80],["T_FOREACH","foreach",82],["T_WHITESPACE"," ",82],"(",["T_VARIABLE","$link",82],["T_OBJECT_OPERATOR","->",82],["T_STRING","getAttributes",82],"(",")",["T_WHITESPACE"," ",82],["T_AS","as",82],["T_WHITESPACE"," ",82],["T_VARIABLE","$attribute",82],")",["T_WHITESPACE"," ",82],"{",["T_WHITESPACE","\n                ",82],["T_VARIABLE","$row",83],"[",["T_VARIABLE","$attribute",83],"[",["T_CONSTANT_ENCAPSED_STRING","'code'",83],"]","]",["T_WHITESPACE"," ",83],"=",["T_WHITESPACE"," ",83],["T_VARIABLE","$linkedProduct",83],["T_OBJECT_OPERATOR","->",83],["T_STRING","getData",83],"(",["T_VARIABLE","$attribute",83],"[",["T_CONSTANT_ENCAPSED_STRING","'code'",83],"]",")",";",["T_WHITESPACE","\n            ",83],"}",["T_WHITESPACE","\n\n            ",84],["T_VARIABLE","$result",86],"[","]",["T_WHITESPACE"," ",86],"=",["T_WHITESPACE"," ",86],["T_VARIABLE","$row",86],";",["T_WHITESPACE","\n        ",86],"}",["T_WHITESPACE","\n\n        ",87],["T_RETURN","return",89],["T_WHITESPACE"," ",89],["T_VARIABLE","$result",89],";",["T_WHITESPACE","\n    ",89],"}",["T_WHITESPACE","\n\n    ",90],["T_DOC_COMMENT","\/**\n     * Add product link association\n     *\n     * @param string $type\n     * @param int|string $productId\n     * @param int|string $linkedProductId\n     * @param array $data\n     * @param  string $identifierType\n     * @return boolean\n     *\/",92],["T_WHITESPACE","\n    ",101],["T_PUBLIC","public",102],["T_WHITESPACE"," ",102],["T_FUNCTION","function",102],["T_WHITESPACE"," ",102],["T_STRING","assign",102],"(",["T_VARIABLE","$type",102],",",["T_WHITESPACE"," ",102],["T_VARIABLE","$productId",102],",",["T_WHITESPACE"," ",102],["T_VARIABLE","$linkedProductId",102],",",["T_WHITESPACE"," ",102],["T_VARIABLE","$data",102],["T_WHITESPACE"," ",102],"=",["T_WHITESPACE"," ",102],["T_ARRAY","array",102],"(",")",",",["T_WHITESPACE"," ",102],["T_VARIABLE","$identifierType",102],["T_WHITESPACE"," ",102],"=",["T_WHITESPACE"," ",102],["T_STRING","null",102],")",["T_WHITESPACE","\n    ",102],"{",["T_WHITESPACE","\n        ",103],["T_VARIABLE","$typeId",104],["T_WHITESPACE"," ",104],"=",["T_WHITESPACE"," ",104],["T_VARIABLE","$this",104],["T_OBJECT_OPERATOR","->",104],["T_STRING","_getTypeId",104],"(",["T_VARIABLE","$type",104],")",";",["T_WHITESPACE","\n\n        ",104],["T_VARIABLE","$product",106],["T_WHITESPACE"," ",106],"=",["T_WHITESPACE"," ",106],["T_VARIABLE","$this",106],["T_OBJECT_OPERATOR","->",106],["T_STRING","_initProduct",106],"(",["T_VARIABLE","$productId",106],",",["T_WHITESPACE"," ",106],["T_VARIABLE","$identifierType",106],")",";",["T_WHITESPACE","\n\n        ",106],["T_VARIABLE","$link",108],["T_WHITESPACE"," ",108],"=",["T_WHITESPACE"," ",108],["T_VARIABLE","$product",108],["T_OBJECT_OPERATOR","->",108],["T_STRING","getLinkInstance",108],"(",")",["T_WHITESPACE","\n            ",108],["T_OBJECT_OPERATOR","->",109],["T_STRING","setLinkTypeId",109],"(",["T_VARIABLE","$typeId",109],")",";",["T_WHITESPACE","\n\n        ",109],["T_VARIABLE","$collection",111],["T_WHITESPACE"," ",111],"=",["T_WHITESPACE"," ",111],["T_VARIABLE","$this",111],["T_OBJECT_OPERATOR","->",111],["T_STRING","_initCollection",111],"(",["T_VARIABLE","$link",111],",",["T_WHITESPACE"," ",111],["T_VARIABLE","$product",111],")",";",["T_WHITESPACE","\n        ",111],["T_VARIABLE","$idBySku",112],["T_WHITESPACE"," ",112],"=",["T_WHITESPACE"," ",112],["T_VARIABLE","$product",112],["T_OBJECT_OPERATOR","->",112],["T_STRING","getIdBySku",112],"(",["T_VARIABLE","$linkedProductId",112],")",";",["T_WHITESPACE","\n        ",112],["T_IF","if",113],["T_WHITESPACE"," ",113],"(",["T_VARIABLE","$idBySku",113],")",["T_WHITESPACE"," ",113],"{",["T_WHITESPACE","\n            ",113],["T_VARIABLE","$linkedProductId",114],["T_WHITESPACE"," ",114],"=",["T_WHITESPACE"," ",114],["T_VARIABLE","$idBySku",114],";",["T_WHITESPACE","\n        ",114],"}",["T_WHITESPACE","\n\n        ",115],["T_VARIABLE","$links",117],["T_WHITESPACE"," ",117],"=",["T_WHITESPACE"," ",117],["T_VARIABLE","$this",117],["T_OBJECT_OPERATOR","->",117],["T_STRING","_collectionToEditableArray",117],"(",["T_VARIABLE","$collection",117],")",";",["T_WHITESPACE","\n\n        ",117],["T_VARIABLE","$links",119],"[",["T_INT_CAST","(int)",119],["T_VARIABLE","$linkedProductId",119],"]",["T_WHITESPACE"," ",119],"=",["T_WHITESPACE"," ",119],["T_ARRAY","array",119],"(",")",";",["T_WHITESPACE","\n\n        ",119],["T_FOREACH","foreach",121],["T_WHITESPACE"," ",121],"(",["T_VARIABLE","$collection",121],["T_OBJECT_OPERATOR","->",121],["T_STRING","getLinkModel",121],"(",")",["T_OBJECT_OPERATOR","->",121],["T_STRING","getAttributes",121],"(",")",["T_WHITESPACE"," ",121],["T_AS","as",121],["T_WHITESPACE"," ",121],["T_VARIABLE","$attribute",121],")",["T_WHITESPACE"," ",121],"{",["T_WHITESPACE","\n            ",121],["T_IF","if",122],["T_WHITESPACE"," ",122],"(",["T_ISSET","isset",122],"(",["T_VARIABLE","$data",122],"[",["T_VARIABLE","$attribute",122],"[",["T_CONSTANT_ENCAPSED_STRING","'code'",122],"]","]",")",")",["T_WHITESPACE"," ",122],"{",["T_WHITESPACE","\n                ",122],["T_VARIABLE","$links",123],"[",["T_INT_CAST","(int)",123],["T_VARIABLE","$linkedProductId",123],"]","[",["T_VARIABLE","$attribute",123],"[",["T_CONSTANT_ENCAPSED_STRING","'code'",123],"]","]",["T_WHITESPACE"," ",123],"=",["T_WHITESPACE"," ",123],["T_VARIABLE","$data",123],"[",["T_VARIABLE","$attribute",123],"[",["T_CONSTANT_ENCAPSED_STRING","'code'",123],"]","]",";",["T_WHITESPACE","\n            ",123],"}",["T_WHITESPACE","\n        ",124],"}",["T_WHITESPACE","\n\n        ",125],["T_TRY","try",127],["T_WHITESPACE"," ",127],"{",["T_WHITESPACE","\n            ",127],["T_IF","if",128],["T_WHITESPACE"," ",128],"(",["T_VARIABLE","$type",128],["T_WHITESPACE"," ",128],["T_IS_EQUAL","==",128],["T_WHITESPACE"," ",128],["T_CONSTANT_ENCAPSED_STRING","'grouped'",128],")",["T_WHITESPACE"," ",128],"{",["T_WHITESPACE","\n                ",128],["T_VARIABLE","$link",129],["T_OBJECT_OPERATOR","->",129],["T_STRING","getResource",129],"(",")",["T_OBJECT_OPERATOR","->",129],["T_STRING","saveGroupedLinks",129],"(",["T_VARIABLE","$product",129],",",["T_WHITESPACE"," ",129],["T_VARIABLE","$links",129],",",["T_WHITESPACE"," ",129],["T_VARIABLE","$typeId",129],")",";",["T_WHITESPACE","\n            ",129],"}",["T_WHITESPACE"," ",130],["T_ELSE","else",130],["T_WHITESPACE"," ",130],"{",["T_WHITESPACE","\n                ",130],["T_VARIABLE","$link",131],["T_OBJECT_OPERATOR","->",131],["T_STRING","getResource",131],"(",")",["T_OBJECT_OPERATOR","->",131],["T_STRING","saveProductLinks",131],"(",["T_VARIABLE","$product",131],",",["T_WHITESPACE"," ",131],["T_VARIABLE","$links",131],",",["T_WHITESPACE"," ",131],["T_VARIABLE","$typeId",131],")",";",["T_WHITESPACE","\n            ",131],"}",["T_WHITESPACE","\n\n            ",132],["T_VARIABLE","$_linkInstance",134],["T_WHITESPACE"," ",134],"=",["T_WHITESPACE"," ",134],["T_STRING","Mage",134],["T_DOUBLE_COLON","::",134],["T_STRING","getSingleton",134],"(",["T_CONSTANT_ENCAPSED_STRING","'catalog\/product_link'",134],")",";",["T_WHITESPACE","\n            ",134],["T_VARIABLE","$_linkInstance",135],["T_OBJECT_OPERATOR","->",135],["T_STRING","saveProductRelations",135],"(",["T_VARIABLE","$product",135],")",";",["T_WHITESPACE","\n\n            ",135],["T_VARIABLE","$indexerStock",137],["T_WHITESPACE"," ",137],"=",["T_WHITESPACE"," ",137],["T_STRING","Mage",137],["T_DOUBLE_COLON","::",137],["T_STRING","getModel",137],"(",["T_CONSTANT_ENCAPSED_STRING","'cataloginventory\/stock_status'",137],")",";",["T_WHITESPACE","\n            ",137],["T_VARIABLE","$indexerStock",138],["T_OBJECT_OPERATOR","->",138],["T_STRING","updateStatus",138],"(",["T_VARIABLE","$productId",138],")",";",["T_WHITESPACE","\n\n            ",138],["T_VARIABLE","$indexerPrice",140],["T_WHITESPACE"," ",140],"=",["T_WHITESPACE"," ",140],["T_STRING","Mage",140],["T_DOUBLE_COLON","::",140],["T_STRING","getResourceModel",140],"(",["T_CONSTANT_ENCAPSED_STRING","'catalog\/product_indexer_price'",140],")",";",["T_WHITESPACE","\n            ",140],["T_VARIABLE","$indexerPrice",141],["T_OBJECT_OPERATOR","->",141],["T_STRING","reindexProductIds",141],"(",["T_VARIABLE","$productId",141],")",";",["T_WHITESPACE","\n        ",141],"}",["T_WHITESPACE"," ",142],["T_CATCH","catch",142],["T_WHITESPACE"," ",142],"(",["T_STRING","Exception",142],["T_WHITESPACE"," ",142],["T_VARIABLE","$e",142],")",["T_WHITESPACE"," ",142],"{",["T_WHITESPACE","\n            ",142],["T_VARIABLE","$this",143],["T_OBJECT_OPERATOR","->",143],["T_STRING","_fault",143],"(",["T_CONSTANT_ENCAPSED_STRING","'data_invalid'",143],",",["T_WHITESPACE"," ",143],["T_STRING","Mage",143],["T_DOUBLE_COLON","::",143],["T_STRING","helper",143],"(",["T_CONSTANT_ENCAPSED_STRING","'catalog'",143],")",["T_OBJECT_OPERATOR","->",143],["T_STRING","__",143],"(",["T_CONSTANT_ENCAPSED_STRING","'Link product does not exist.'",143],")",")",";",["T_WHITESPACE","\n        ",143],"}",["T_WHITESPACE","\n\n        ",144],["T_RETURN","return",146],["T_WHITESPACE"," ",146],["T_STRING","true",146],";",["T_WHITESPACE","\n    ",146],"}",["T_WHITESPACE","\n\n    ",147],["T_DOC_COMMENT","\/**\n     * Update product link association info\n     *\n     * @param string $type\n     * @param int|string $productId\n     * @param int|string $linkedProductId\n     * @param array $data\n     * @param  string $identifierType\n     * @return boolean\n     *\/",149],["T_WHITESPACE","\n    ",158],["T_PUBLIC","public",159],["T_WHITESPACE"," ",159],["T_FUNCTION","function",159],["T_WHITESPACE"," ",159],["T_STRING","update",159],"(",["T_VARIABLE","$type",159],",",["T_WHITESPACE"," ",159],["T_VARIABLE","$productId",159],",",["T_WHITESPACE"," ",159],["T_VARIABLE","$linkedProductId",159],",",["T_WHITESPACE"," ",159],["T_VARIABLE","$data",159],["T_WHITESPACE"," ",159],"=",["T_WHITESPACE"," ",159],["T_ARRAY","array",159],"(",")",",",["T_WHITESPACE"," ",159],["T_VARIABLE","$identifierType",159],["T_WHITESPACE"," ",159],"=",["T_WHITESPACE"," ",159],["T_STRING","null",159],")",["T_WHITESPACE","\n    ",159],"{",["T_WHITESPACE","\n        ",160],["T_VARIABLE","$typeId",161],["T_WHITESPACE"," ",161],"=",["T_WHITESPACE"," ",161],["T_VARIABLE","$this",161],["T_OBJECT_OPERATOR","->",161],["T_STRING","_getTypeId",161],"(",["T_VARIABLE","$type",161],")",";",["T_WHITESPACE","\n\n        ",161],["T_VARIABLE","$product",163],["T_WHITESPACE"," ",163],"=",["T_WHITESPACE"," ",163],["T_VARIABLE","$this",163],["T_OBJECT_OPERATOR","->",163],["T_STRING","_initProduct",163],"(",["T_VARIABLE","$productId",163],",",["T_WHITESPACE"," ",163],["T_VARIABLE","$identifierType",163],")",";",["T_WHITESPACE","\n\n        ",163],["T_VARIABLE","$link",165],["T_WHITESPACE"," ",165],"=",["T_WHITESPACE"," ",165],["T_VARIABLE","$product",165],["T_OBJECT_OPERATOR","->",165],["T_STRING","getLinkInstance",165],"(",")",["T_WHITESPACE","\n            ",165],["T_OBJECT_OPERATOR","->",166],["T_STRING","setLinkTypeId",166],"(",["T_VARIABLE","$typeId",166],")",";",["T_WHITESPACE","\n\n        ",166],["T_VARIABLE","$collection",168],["T_WHITESPACE"," ",168],"=",["T_WHITESPACE"," ",168],["T_VARIABLE","$this",168],["T_OBJECT_OPERATOR","->",168],["T_STRING","_initCollection",168],"(",["T_VARIABLE","$link",168],",",["T_WHITESPACE"," ",168],["T_VARIABLE","$product",168],")",";",["T_WHITESPACE","\n\n        ",168],["T_VARIABLE","$links",170],["T_WHITESPACE"," ",170],"=",["T_WHITESPACE"," ",170],["T_VARIABLE","$this",170],["T_OBJECT_OPERATOR","->",170],["T_STRING","_collectionToEditableArray",170],"(",["T_VARIABLE","$collection",170],")",";",["T_WHITESPACE","\n\n        ",170],["T_VARIABLE","$idBySku",172],["T_WHITESPACE"," ",172],"=",["T_WHITESPACE"," ",172],["T_VARIABLE","$product",172],["T_OBJECT_OPERATOR","->",172],["T_STRING","getIdBySku",172],"(",["T_VARIABLE","$linkedProductId",172],")",";",["T_WHITESPACE","\n        ",172],["T_IF","if",173],["T_WHITESPACE"," ",173],"(",["T_VARIABLE","$idBySku",173],")",["T_WHITESPACE"," ",173],"{",["T_WHITESPACE","\n            ",173],["T_VARIABLE","$linkedProductId",174],["T_WHITESPACE"," ",174],"=",["T_WHITESPACE"," ",174],["T_VARIABLE","$idBySku",174],";",["T_WHITESPACE","\n        ",174],"}",["T_WHITESPACE","\n\n        ",175],["T_FOREACH","foreach",177],["T_WHITESPACE"," ",177],"(",["T_VARIABLE","$collection",177],["T_OBJECT_OPERATOR","->",177],["T_STRING","getLinkModel",177],"(",")",["T_OBJECT_OPERATOR","->",177],["T_STRING","getAttributes",177],"(",")",["T_WHITESPACE"," ",177],["T_AS","as",177],["T_WHITESPACE"," ",177],["T_VARIABLE","$attribute",177],")",["T_WHITESPACE"," ",177],"{",["T_WHITESPACE","\n            ",177],["T_IF","if",178],["T_WHITESPACE"," ",178],"(",["T_ISSET","isset",178],"(",["T_VARIABLE","$data",178],"[",["T_VARIABLE","$attribute",178],"[",["T_CONSTANT_ENCAPSED_STRING","'code'",178],"]","]",")",")",["T_WHITESPACE"," ",178],"{",["T_WHITESPACE","\n                ",178],["T_VARIABLE","$links",179],"[",["T_INT_CAST","(int)",179],["T_VARIABLE","$linkedProductId",179],"]","[",["T_VARIABLE","$attribute",179],"[",["T_CONSTANT_ENCAPSED_STRING","'code'",179],"]","]",["T_WHITESPACE"," ",179],"=",["T_WHITESPACE"," ",179],["T_VARIABLE","$data",179],"[",["T_VARIABLE","$attribute",179],"[",["T_CONSTANT_ENCAPSED_STRING","'code'",179],"]","]",";",["T_WHITESPACE","\n            ",179],"}",["T_WHITESPACE","\n        ",180],"}",["T_WHITESPACE","\n\n        ",181],["T_TRY","try",183],["T_WHITESPACE"," ",183],"{",["T_WHITESPACE","\n            ",183],["T_IF","if",184],["T_WHITESPACE"," ",184],"(",["T_VARIABLE","$type",184],["T_WHITESPACE"," ",184],["T_IS_EQUAL","==",184],["T_WHITESPACE"," ",184],["T_CONSTANT_ENCAPSED_STRING","'grouped'",184],")",["T_WHITESPACE"," ",184],"{",["T_WHITESPACE","\n                ",184],["T_VARIABLE","$link",185],["T_OBJECT_OPERATOR","->",185],["T_STRING","getResource",185],"(",")",["T_OBJECT_OPERATOR","->",185],["T_STRING","saveGroupedLinks",185],"(",["T_VARIABLE","$product",185],",",["T_WHITESPACE"," ",185],["T_VARIABLE","$links",185],",",["T_WHITESPACE"," ",185],["T_VARIABLE","$typeId",185],")",";",["T_WHITESPACE","\n            ",185],"}",["T_WHITESPACE"," ",186],["T_ELSE","else",186],["T_WHITESPACE"," ",186],"{",["T_WHITESPACE","\n                ",186],["T_VARIABLE","$link",187],["T_OBJECT_OPERATOR","->",187],["T_STRING","getResource",187],"(",")",["T_OBJECT_OPERATOR","->",187],["T_STRING","saveProductLinks",187],"(",["T_VARIABLE","$product",187],",",["T_WHITESPACE"," ",187],["T_VARIABLE","$links",187],",",["T_WHITESPACE"," ",187],["T_VARIABLE","$typeId",187],")",";",["T_WHITESPACE","\n            ",187],"}",["T_WHITESPACE","\n\n            ",188],["T_VARIABLE","$_linkInstance",190],["T_WHITESPACE"," ",190],"=",["T_WHITESPACE"," ",190],["T_STRING","Mage",190],["T_DOUBLE_COLON","::",190],["T_STRING","getSingleton",190],"(",["T_CONSTANT_ENCAPSED_STRING","'catalog\/product_link'",190],")",";",["T_WHITESPACE","\n            ",190],["T_VARIABLE","$_linkInstance",191],["T_OBJECT_OPERATOR","->",191],["T_STRING","saveProductRelations",191],"(",["T_VARIABLE","$product",191],")",";",["T_WHITESPACE","\n\n            ",191],["T_VARIABLE","$indexerStock",193],["T_WHITESPACE"," ",193],"=",["T_WHITESPACE"," ",193],["T_STRING","Mage",193],["T_DOUBLE_COLON","::",193],["T_STRING","getModel",193],"(",["T_CONSTANT_ENCAPSED_STRING","'cataloginventory\/stock_status'",193],")",";",["T_WHITESPACE","\n            ",193],["T_VARIABLE","$indexerStock",194],["T_OBJECT_OPERATOR","->",194],["T_STRING","updateStatus",194],"(",["T_VARIABLE","$productId",194],")",";",["T_WHITESPACE","\n\n            ",194],["T_VARIABLE","$indexerPrice",196],["T_WHITESPACE"," ",196],"=",["T_WHITESPACE"," ",196],["T_STRING","Mage",196],["T_DOUBLE_COLON","::",196],["T_STRING","getResourceModel",196],"(",["T_CONSTANT_ENCAPSED_STRING","'catalog\/product_indexer_price'",196],")",";",["T_WHITESPACE","\n            ",196],["T_VARIABLE","$indexerPrice",197],["T_OBJECT_OPERATOR","->",197],["T_STRING","reindexProductIds",197],"(",["T_VARIABLE","$productId",197],")",";",["T_WHITESPACE","\n        ",197],"}",["T_WHITESPACE"," ",198],["T_CATCH","catch",198],["T_WHITESPACE"," ",198],"(",["T_STRING","Exception",198],["T_WHITESPACE"," ",198],["T_VARIABLE","$e",198],")",["T_WHITESPACE"," ",198],"{",["T_WHITESPACE","\n            ",198],["T_VARIABLE","$this",199],["T_OBJECT_OPERATOR","->",199],["T_STRING","_fault",199],"(",["T_CONSTANT_ENCAPSED_STRING","'data_invalid'",199],",",["T_WHITESPACE"," ",199],["T_STRING","Mage",199],["T_DOUBLE_COLON","::",199],["T_STRING","helper",199],"(",["T_CONSTANT_ENCAPSED_STRING","'catalog'",199],")",["T_OBJECT_OPERATOR","->",199],["T_STRING","__",199],"(",["T_CONSTANT_ENCAPSED_STRING","'Link product does not exist.'",199],")",")",";",["T_WHITESPACE","\n        ",199],"}",["T_WHITESPACE","\n\n        ",200],["T_RETURN","return",202],["T_WHITESPACE"," ",202],["T_STRING","true",202],";",["T_WHITESPACE","\n    ",202],"}",["T_WHITESPACE","\n\n    ",203],["T_DOC_COMMENT","\/**\n     * Remove product link association\n     *\n     * @param string $type\n     * @param int|string $productId\n     * @param int|string $linkedProductId\n     * @param  string $identifierType\n     * @return boolean\n     *\/",205],["T_WHITESPACE","\n    ",213],["T_PUBLIC","public",214],["T_WHITESPACE"," ",214],["T_FUNCTION","function",214],["T_WHITESPACE"," ",214],["T_STRING","remove",214],"(",["T_VARIABLE","$type",214],",",["T_WHITESPACE"," ",214],["T_VARIABLE","$productId",214],",",["T_WHITESPACE"," ",214],["T_VARIABLE","$linkedProductId",214],",",["T_WHITESPACE"," ",214],["T_VARIABLE","$identifierType",214],["T_WHITESPACE"," ",214],"=",["T_WHITESPACE"," ",214],["T_STRING","null",214],")",["T_WHITESPACE","\n    ",214],"{",["T_WHITESPACE","\n        ",215],["T_VARIABLE","$typeId",216],["T_WHITESPACE"," ",216],"=",["T_WHITESPACE"," ",216],["T_VARIABLE","$this",216],["T_OBJECT_OPERATOR","->",216],["T_STRING","_getTypeId",216],"(",["T_VARIABLE","$type",216],")",";",["T_WHITESPACE","\n\n        ",216],["T_VARIABLE","$product",218],["T_WHITESPACE"," ",218],"=",["T_WHITESPACE"," ",218],["T_VARIABLE","$this",218],["T_OBJECT_OPERATOR","->",218],["T_STRING","_initProduct",218],"(",["T_VARIABLE","$productId",218],",",["T_WHITESPACE"," ",218],["T_VARIABLE","$identifierType",218],")",";",["T_WHITESPACE","\n\n        ",218],["T_VARIABLE","$link",220],["T_WHITESPACE"," ",220],"=",["T_WHITESPACE"," ",220],["T_VARIABLE","$product",220],["T_OBJECT_OPERATOR","->",220],["T_STRING","getLinkInstance",220],"(",")",["T_WHITESPACE","\n            ",220],["T_OBJECT_OPERATOR","->",221],["T_STRING","setLinkTypeId",221],"(",["T_VARIABLE","$typeId",221],")",";",["T_WHITESPACE","\n\n        ",221],["T_VARIABLE","$collection",223],["T_WHITESPACE"," ",223],"=",["T_WHITESPACE"," ",223],["T_VARIABLE","$this",223],["T_OBJECT_OPERATOR","->",223],["T_STRING","_initCollection",223],"(",["T_VARIABLE","$link",223],",",["T_WHITESPACE"," ",223],["T_VARIABLE","$product",223],")",";",["T_WHITESPACE","\n\n        ",223],["T_VARIABLE","$idBySku",225],["T_WHITESPACE"," ",225],"=",["T_WHITESPACE"," ",225],["T_VARIABLE","$product",225],["T_OBJECT_OPERATOR","->",225],["T_STRING","getIdBySku",225],"(",["T_VARIABLE","$linkedProductId",225],")",";",["T_WHITESPACE","\n        ",225],["T_IF","if",226],["T_WHITESPACE"," ",226],"(",["T_VARIABLE","$idBySku",226],")",["T_WHITESPACE"," ",226],"{",["T_WHITESPACE","\n            ",226],["T_VARIABLE","$linkedProductId",227],["T_WHITESPACE"," ",227],"=",["T_WHITESPACE"," ",227],["T_VARIABLE","$idBySku",227],";",["T_WHITESPACE","\n        ",227],"}",["T_WHITESPACE","\n\n        ",228],["T_VARIABLE","$links",230],["T_WHITESPACE"," ",230],"=",["T_WHITESPACE"," ",230],["T_VARIABLE","$this",230],["T_OBJECT_OPERATOR","->",230],["T_STRING","_collectionToEditableArray",230],"(",["T_VARIABLE","$collection",230],")",";",["T_WHITESPACE","\n\n        ",230],["T_IF","if",232],["T_WHITESPACE"," ",232],"(",["T_ISSET","isset",232],"(",["T_VARIABLE","$links",232],"[",["T_VARIABLE","$linkedProductId",232],"]",")",")",["T_WHITESPACE"," ",232],"{",["T_WHITESPACE","\n            ",232],["T_UNSET","unset",233],"(",["T_VARIABLE","$links",233],"[",["T_VARIABLE","$linkedProductId",233],"]",")",";",["T_WHITESPACE","\n        ",233],"}",["T_WHITESPACE","\n\n        ",234],["T_TRY","try",236],["T_WHITESPACE"," ",236],"{",["T_WHITESPACE","\n            ",236],["T_VARIABLE","$link",237],["T_OBJECT_OPERATOR","->",237],["T_STRING","getResource",237],"(",")",["T_OBJECT_OPERATOR","->",237],["T_STRING","saveProductLinks",237],"(",["T_VARIABLE","$product",237],",",["T_WHITESPACE"," ",237],["T_VARIABLE","$links",237],",",["T_WHITESPACE"," ",237],["T_VARIABLE","$typeId",237],")",";",["T_WHITESPACE","\n        ",237],"}",["T_WHITESPACE"," ",238],["T_CATCH","catch",238],["T_WHITESPACE"," ",238],"(",["T_STRING","Exception",238],["T_WHITESPACE"," ",238],["T_VARIABLE","$e",238],")",["T_WHITESPACE"," ",238],"{",["T_WHITESPACE","\n            ",238],["T_VARIABLE","$this",239],["T_OBJECT_OPERATOR","->",239],["T_STRING","_fault",239],"(",["T_CONSTANT_ENCAPSED_STRING","'not_removed'",239],")",";",["T_WHITESPACE","\n        ",239],"}",["T_WHITESPACE","\n\n        ",240],["T_RETURN","return",242],["T_WHITESPACE"," ",242],["T_STRING","true",242],";",["T_WHITESPACE","\n    ",242],"}",["T_WHITESPACE","\n\n    ",243],["T_DOC_COMMENT","\/**\n     * Retrieve attribute list for specified type\n     *\n     * @param string $type\n     * @return array\n     *\/",245],["T_WHITESPACE","\n    ",250],["T_PUBLIC","public",251],["T_WHITESPACE"," ",251],["T_FUNCTION","function",251],["T_WHITESPACE"," ",251],["T_STRING","attributes",251],"(",["T_VARIABLE","$type",251],")",["T_WHITESPACE","\n    ",251],"{",["T_WHITESPACE","\n        ",252],["T_VARIABLE","$typeId",253],["T_WHITESPACE"," ",253],"=",["T_WHITESPACE"," ",253],["T_VARIABLE","$this",253],["T_OBJECT_OPERATOR","->",253],["T_STRING","_getTypeId",253],"(",["T_VARIABLE","$type",253],")",";",["T_WHITESPACE","\n\n        ",253],["T_VARIABLE","$attributes",255],["T_WHITESPACE"," ",255],"=",["T_WHITESPACE"," ",255],["T_STRING","Mage",255],["T_DOUBLE_COLON","::",255],["T_STRING","getModel",255],"(",["T_CONSTANT_ENCAPSED_STRING","'catalog\/product_link'",255],")",["T_WHITESPACE","\n            ",255],["T_OBJECT_OPERATOR","->",256],["T_STRING","getAttributes",256],"(",["T_VARIABLE","$typeId",256],")",";",["T_WHITESPACE","\n\n        ",256],["T_VARIABLE","$result",258],["T_WHITESPACE"," ",258],"=",["T_WHITESPACE"," ",258],["T_ARRAY","array",258],"(",")",";",["T_WHITESPACE","\n\n        ",258],["T_FOREACH","foreach",260],["T_WHITESPACE"," ",260],"(",["T_VARIABLE","$attributes",260],["T_WHITESPACE"," ",260],["T_AS","as",260],["T_WHITESPACE"," ",260],["T_VARIABLE","$attribute",260],")",["T_WHITESPACE"," ",260],"{",["T_WHITESPACE","\n            ",260],["T_VARIABLE","$result",261],"[","]",["T_WHITESPACE"," ",261],"=",["T_WHITESPACE"," ",261],["T_ARRAY","array",261],"(",["T_WHITESPACE","\n                ",261],["T_CONSTANT_ENCAPSED_STRING","'code'",262],["T_WHITESPACE","  ",262],["T_DOUBLE_ARROW","=>",262],["T_WHITESPACE"," ",262],["T_VARIABLE","$attribute",262],"[",["T_CONSTANT_ENCAPSED_STRING","'code'",262],"]",",",["T_WHITESPACE","\n                ",262],["T_CONSTANT_ENCAPSED_STRING","'type'",263],["T_WHITESPACE","  ",263],["T_DOUBLE_ARROW","=>",263],["T_WHITESPACE"," ",263],["T_VARIABLE","$attribute",263],"[",["T_CONSTANT_ENCAPSED_STRING","'type'",263],"]",["T_WHITESPACE","\n            ",263],")",";",["T_WHITESPACE","\n        ",264],"}",["T_WHITESPACE","\n\n        ",265],["T_RETURN","return",267],["T_WHITESPACE"," ",267],["T_VARIABLE","$result",267],";",["T_WHITESPACE","\n    ",267],"}",["T_WHITESPACE","\n\n    ",268],["T_DOC_COMMENT","\/**\n     * Retrieve link types\n     *\n     * @return array\n     *\/",270],["T_WHITESPACE","\n    ",274],["T_PUBLIC","public",275],["T_WHITESPACE"," ",275],["T_FUNCTION","function",275],["T_WHITESPACE"," ",275],["T_STRING","types",275],"(",")",["T_WHITESPACE","\n    ",275],"{",["T_WHITESPACE","\n        ",276],["T_RETURN","return",277],["T_WHITESPACE"," ",277],["T_STRING","array_keys",277],"(",["T_VARIABLE","$this",277],["T_OBJECT_OPERATOR","->",277],["T_STRING","_typeMap",277],")",";",["T_WHITESPACE","\n    ",277],"}",["T_WHITESPACE","\n\n    ",278],["T_DOC_COMMENT","\/**\n     * Retrieve link type id by code\n     *\n     * @param string $type\n     * @return int\n     *\/",280],["T_WHITESPACE","\n    ",285],["T_PROTECTED","protected",286],["T_WHITESPACE"," ",286],["T_FUNCTION","function",286],["T_WHITESPACE"," ",286],["T_STRING","_getTypeId",286],"(",["T_VARIABLE","$type",286],")",["T_WHITESPACE","\n    ",286],"{",["T_WHITESPACE","\n        ",287],["T_IF","if",288],["T_WHITESPACE"," ",288],"(","!",["T_ISSET","isset",288],"(",["T_VARIABLE","$this",288],["T_OBJECT_OPERATOR","->",288],["T_STRING","_typeMap",288],"[",["T_VARIABLE","$type",288],"]",")",")",["T_WHITESPACE"," ",288],"{",["T_WHITESPACE","\n            ",288],["T_VARIABLE","$this",289],["T_OBJECT_OPERATOR","->",289],["T_STRING","_fault",289],"(",["T_CONSTANT_ENCAPSED_STRING","'type_not_exists'",289],")",";",["T_WHITESPACE","\n        ",289],"}",["T_WHITESPACE","\n\n        ",290],["T_RETURN","return",292],["T_WHITESPACE"," ",292],["T_VARIABLE","$this",292],["T_OBJECT_OPERATOR","->",292],["T_STRING","_typeMap",292],"[",["T_VARIABLE","$type",292],"]",";",["T_WHITESPACE","\n    ",292],"}",["T_WHITESPACE","\n\n    ",293],["T_DOC_COMMENT","\/**\n     * Initialize and return product model\n     *\n     * @param int $productId\n     * @param  string $identifierType\n     * @return Mage_Catalog_Model_Product\n     *\/",295],["T_WHITESPACE","\n    ",301],["T_PROTECTED","protected",302],["T_WHITESPACE"," ",302],["T_FUNCTION","function",302],["T_WHITESPACE"," ",302],["T_STRING","_initProduct",302],"(",["T_VARIABLE","$productId",302],",",["T_WHITESPACE"," ",302],["T_VARIABLE","$identifierType",302],["T_WHITESPACE"," ",302],"=",["T_WHITESPACE"," ",302],["T_STRING","null",302],")",["T_WHITESPACE","\n    ",302],"{",["T_WHITESPACE","\n        ",303],["T_VARIABLE","$product",304],["T_WHITESPACE"," ",304],"=",["T_WHITESPACE"," ",304],["T_STRING","Mage",304],["T_DOUBLE_COLON","::",304],["T_STRING","helper",304],"(",["T_CONSTANT_ENCAPSED_STRING","'catalog\/product'",304],")",["T_OBJECT_OPERATOR","->",304],["T_STRING","getProduct",304],"(",["T_VARIABLE","$productId",304],",",["T_WHITESPACE"," ",304],["T_STRING","null",304],",",["T_WHITESPACE"," ",304],["T_VARIABLE","$identifierType",304],")",";",["T_WHITESPACE","\n        ",304],["T_IF","if",305],["T_WHITESPACE"," ",305],"(","!",["T_VARIABLE","$product",305],["T_OBJECT_OPERATOR","->",305],["T_STRING","getId",305],"(",")",")",["T_WHITESPACE"," ",305],"{",["T_WHITESPACE","\n            ",305],["T_VARIABLE","$this",306],["T_OBJECT_OPERATOR","->",306],["T_STRING","_fault",306],"(",["T_CONSTANT_ENCAPSED_STRING","'product_not_exists'",306],")",";",["T_WHITESPACE","\n        ",306],"}",["T_WHITESPACE","\n\n        ",307],["T_RETURN","return",309],["T_WHITESPACE"," ",309],["T_VARIABLE","$product",309],";",["T_WHITESPACE","\n    ",309],"}",["T_WHITESPACE","\n\n    ",310],["T_DOC_COMMENT","\/**\n     * Initialize and return linked products collection\n     *\n     * @param Mage_Catalog_Model_Product_Link $link\n     * @param Mage_Catalog_Model_Product $product\n     * @return Mage_Catalog_Model_Resource_Eav_Mysql4_Product_Link_Product_Collection\n     *\/",312],["T_WHITESPACE","\n    ",318],["T_PROTECTED","protected",319],["T_WHITESPACE"," ",319],["T_FUNCTION","function",319],["T_WHITESPACE"," ",319],["T_STRING","_initCollection",319],"(",["T_VARIABLE","$link",319],",",["T_WHITESPACE"," ",319],["T_VARIABLE","$product",319],")",["T_WHITESPACE","\n    ",319],"{",["T_WHITESPACE","\n        ",320],["T_VARIABLE","$collection",321],["T_WHITESPACE"," ",321],"=",["T_WHITESPACE"," ",321],["T_VARIABLE","$link",321],["T_WHITESPACE","\n            ",321],["T_OBJECT_OPERATOR","->",322],["T_STRING","getProductCollection",322],"(",")",["T_WHITESPACE","\n            ",322],["T_OBJECT_OPERATOR","->",323],["T_STRING","setIsStrongMode",323],"(",")",["T_WHITESPACE","\n            ",323],["T_OBJECT_OPERATOR","->",324],["T_STRING","setProduct",324],"(",["T_VARIABLE","$product",324],")",";",["T_WHITESPACE","\n\n        ",324],["T_RETURN","return",326],["T_WHITESPACE"," ",326],["T_VARIABLE","$collection",326],";",["T_WHITESPACE","\n    ",326],"}",["T_WHITESPACE","\n\n    ",327],["T_DOC_COMMENT","\/**\n     * Export collection to editable array\n     *\n     * @param Mage_Catalog_Model_Resource_Eav_Mysql4_Product_Link_Product_Collection $collection\n     * @return array\n     *\/",329],["T_WHITESPACE","\n    ",334],["T_PROTECTED","protected",335],["T_WHITESPACE"," ",335],["T_FUNCTION","function",335],["T_WHITESPACE"," ",335],["T_STRING","_collectionToEditableArray",335],"(",["T_VARIABLE","$collection",335],")",["T_WHITESPACE","\n    ",335],"{",["T_WHITESPACE","\n        ",336],["T_VARIABLE","$result",337],["T_WHITESPACE"," ",337],"=",["T_WHITESPACE"," ",337],["T_ARRAY","array",337],"(",")",";",["T_WHITESPACE","\n\n        ",337],["T_FOREACH","foreach",339],["T_WHITESPACE"," ",339],"(",["T_VARIABLE","$collection",339],["T_WHITESPACE"," ",339],["T_AS","as",339],["T_WHITESPACE"," ",339],["T_VARIABLE","$linkedProduct",339],")",["T_WHITESPACE"," ",339],"{",["T_WHITESPACE","\n            ",339],["T_VARIABLE","$result",340],"[",["T_VARIABLE","$linkedProduct",340],["T_OBJECT_OPERATOR","->",340],["T_STRING","getId",340],"(",")","]",["T_WHITESPACE"," ",340],"=",["T_WHITESPACE"," ",340],["T_ARRAY","array",340],"(",")",";",["T_WHITESPACE","\n\n            ",340],["T_FOREACH","foreach",342],["T_WHITESPACE"," ",342],"(",["T_VARIABLE","$collection",342],["T_OBJECT_OPERATOR","->",342],["T_STRING","getLinkModel",342],"(",")",["T_OBJECT_OPERATOR","->",342],["T_STRING","getAttributes",342],"(",")",["T_WHITESPACE"," ",342],["T_AS","as",342],["T_WHITESPACE"," ",342],["T_VARIABLE","$attribute",342],")",["T_WHITESPACE"," ",342],"{",["T_WHITESPACE","\n                ",342],["T_VARIABLE","$result",343],"[",["T_VARIABLE","$linkedProduct",343],["T_OBJECT_OPERATOR","->",343],["T_STRING","getId",343],"(",")","]","[",["T_VARIABLE","$attribute",343],"[",["T_CONSTANT_ENCAPSED_STRING","'code'",343],"]","]",["T_WHITESPACE"," ",343],"=",["T_WHITESPACE"," ",343],["T_VARIABLE","$linkedProduct",343],["T_OBJECT_OPERATOR","->",343],["T_STRING","getData",343],"(",["T_VARIABLE","$attribute",343],"[",["T_CONSTANT_ENCAPSED_STRING","'code'",343],"]",")",";",["T_WHITESPACE","\n            ",343],"}",["T_WHITESPACE","\n        ",344],"}",["T_WHITESPACE","\n\n        ",345],["T_RETURN","return",347],["T_WHITESPACE"," ",347],["T_VARIABLE","$result",347],";",["T_WHITESPACE","\n    ",347],"}",["T_WHITESPACE","\n",348],"}",["T_WHITESPACE"," ",349],["T_COMMENT","\/\/ Class Mage_Catalog_Model_Product_Link_Api End\n",349]]
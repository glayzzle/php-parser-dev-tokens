[["T_OPEN_TAG","<?php\n",1],["T_DOC_COMMENT","\/**\n * Magento\n *\n * NOTICE OF LICENSE\n *\n * This source file is subject to the Open Software License (OSL 3.0)\n * that is bundled with this package in the file LICENSE.txt.\n * It is also available through the world-wide-web at this URL:\n * http:\/\/opensource.org\/licenses\/osl-3.0.php\n * If you did not receive a copy of the license and are unable to\n * obtain it through the world-wide-web, please send an email\n * to license@magento.com so we can send you a copy immediately.\n *\n * DISCLAIMER\n *\n * Do not edit or add to this file if you wish to upgrade Magento to newer\n * versions in the future. If you wish to customize Magento for your\n * needs please refer to http:\/\/www.magento.com for more information.\n *\n * @category    Mage\n * @package     Mage_Catalog\n * @copyright  Copyright (c) 2006-2016 X.commerce, Inc. and affiliates (http:\/\/www.magento.com)\n * @license    http:\/\/opensource.org\/licenses\/osl-3.0.php  Open Software License (OSL 3.0)\n *\/",2],["T_WHITESPACE","\n\n\n",25],["T_DOC_COMMENT","\/**\n * Catalog product EAV additional attribute resource collection\n *\n * @category    Mage\n * @package     Mage_Catalog\n * @author      Magento Core Team <core@magentocommerce.com>\n *\/",28],["T_WHITESPACE","\n",34],["T_CLASS","class",35],["T_WHITESPACE"," ",35],["T_STRING","Mage_Catalog_Model_Resource_Product_Attribute_Collection",35],["T_WHITESPACE","\n    ",35],["T_EXTENDS","extends",36],["T_WHITESPACE"," ",36],["T_STRING","Mage_Eav_Model_Resource_Entity_Attribute_Collection",36],["T_WHITESPACE","\n",36],"{",["T_WHITESPACE","\n    ",37],["T_DOC_COMMENT","\/**\n     * Resource model initialization\n     *\n     *\/",38],["T_WHITESPACE","\n    ",41],["T_PROTECTED","protected",42],["T_WHITESPACE"," ",42],["T_FUNCTION","function",42],["T_WHITESPACE"," ",42],["T_STRING","_construct",42],"(",")",["T_WHITESPACE","\n    ",42],"{",["T_WHITESPACE","\n        ",43],["T_VARIABLE","$this",44],["T_OBJECT_OPERATOR","->",44],["T_STRING","_init",44],"(",["T_CONSTANT_ENCAPSED_STRING","'catalog\/resource_eav_attribute'",44],",",["T_WHITESPACE"," ",44],["T_CONSTANT_ENCAPSED_STRING","'eav\/entity_attribute'",44],")",";",["T_WHITESPACE","\n    ",44],"}",["T_WHITESPACE","\n\n    ",45],["T_DOC_COMMENT","\/**\n     * initialize select object\n     *\n     * @return Mage_Catalog_Model_Resource_Product_Attribute_Collection\n     *\/",47],["T_WHITESPACE","\n    ",51],["T_PROTECTED","protected",52],["T_WHITESPACE"," ",52],["T_FUNCTION","function",52],["T_WHITESPACE"," ",52],["T_STRING","_initSelect",52],"(",")",["T_WHITESPACE","\n    ",52],"{",["T_WHITESPACE","\n        ",53],["T_VARIABLE","$entityTypeId",54],["T_WHITESPACE"," ",54],"=",["T_WHITESPACE"," ",54],["T_INT_CAST","(int)",54],["T_STRING","Mage",54],["T_DOUBLE_COLON","::",54],["T_STRING","getModel",54],"(",["T_CONSTANT_ENCAPSED_STRING","'eav\/entity'",54],")",["T_OBJECT_OPERATOR","->",54],["T_STRING","setType",54],"(",["T_STRING","Mage_Catalog_Model_Product",54],["T_DOUBLE_COLON","::",54],["T_STRING","ENTITY",54],")",["T_OBJECT_OPERATOR","->",54],["T_STRING","getTypeId",54],"(",")",";",["T_WHITESPACE","\n        ",54],["T_VARIABLE","$columns",55],["T_WHITESPACE"," ",55],"=",["T_WHITESPACE"," ",55],["T_VARIABLE","$this",55],["T_OBJECT_OPERATOR","->",55],["T_STRING","getConnection",55],"(",")",["T_OBJECT_OPERATOR","->",55],["T_STRING","describeTable",55],"(",["T_VARIABLE","$this",55],["T_OBJECT_OPERATOR","->",55],["T_STRING","getResource",55],"(",")",["T_OBJECT_OPERATOR","->",55],["T_STRING","getMainTable",55],"(",")",")",";",["T_WHITESPACE","\n        ",55],["T_UNSET","unset",56],"(",["T_VARIABLE","$columns",56],"[",["T_CONSTANT_ENCAPSED_STRING","'attribute_id'",56],"]",")",";",["T_WHITESPACE","\n        ",56],["T_VARIABLE","$retColumns",57],["T_WHITESPACE"," ",57],"=",["T_WHITESPACE"," ",57],["T_ARRAY","array",57],"(",")",";",["T_WHITESPACE","\n        ",57],["T_FOREACH","foreach",58],["T_WHITESPACE"," ",58],"(",["T_VARIABLE","$columns",58],["T_WHITESPACE"," ",58],["T_AS","as",58],["T_WHITESPACE"," ",58],["T_VARIABLE","$labelColumn",58],["T_WHITESPACE"," ",58],["T_DOUBLE_ARROW","=>",58],["T_WHITESPACE"," ",58],["T_VARIABLE","$columnData",58],")",["T_WHITESPACE"," ",58],"{",["T_WHITESPACE","\n            ",58],["T_VARIABLE","$retColumns",59],"[",["T_VARIABLE","$labelColumn",59],"]",["T_WHITESPACE"," ",59],"=",["T_WHITESPACE"," ",59],["T_VARIABLE","$labelColumn",59],";",["T_WHITESPACE","\n            ",59],["T_IF","if",60],["T_WHITESPACE"," ",60],"(",["T_VARIABLE","$columnData",60],"[",["T_CONSTANT_ENCAPSED_STRING","'DATA_TYPE'",60],"]",["T_WHITESPACE"," ",60],["T_IS_EQUAL","==",60],["T_WHITESPACE"," ",60],["T_STRING","Varien_Db_Ddl_Table",60],["T_DOUBLE_COLON","::",60],["T_STRING","TYPE_TEXT",60],")",["T_WHITESPACE"," ",60],"{",["T_WHITESPACE","\n                ",60],["T_VARIABLE","$retColumns",61],"[",["T_VARIABLE","$labelColumn",61],"]",["T_WHITESPACE"," ",61],"=",["T_WHITESPACE"," ",61],["T_STRING","Mage",61],["T_DOUBLE_COLON","::",61],["T_STRING","getResourceHelper",61],"(",["T_CONSTANT_ENCAPSED_STRING","'core'",61],")",["T_OBJECT_OPERATOR","->",61],["T_STRING","castField",61],"(",["T_CONSTANT_ENCAPSED_STRING","'main_table.'",61],".",["T_VARIABLE","$labelColumn",61],")",";",["T_WHITESPACE","\n            ",61],"}",["T_WHITESPACE","\n        ",62],"}",["T_WHITESPACE","\n        ",63],["T_VARIABLE","$this",64],["T_OBJECT_OPERATOR","->",64],["T_STRING","getSelect",64],"(",")",["T_WHITESPACE","\n            ",64],["T_OBJECT_OPERATOR","->",65],["T_STRING","from",65],"(",["T_ARRAY","array",65],"(",["T_CONSTANT_ENCAPSED_STRING","'main_table'",65],["T_WHITESPACE"," ",65],["T_DOUBLE_ARROW","=>",65],["T_WHITESPACE"," ",65],["T_VARIABLE","$this",65],["T_OBJECT_OPERATOR","->",65],["T_STRING","getResource",65],"(",")",["T_OBJECT_OPERATOR","->",65],["T_STRING","getMainTable",65],"(",")",")",",",["T_WHITESPACE"," ",65],["T_VARIABLE","$retColumns",65],")",["T_WHITESPACE","\n            ",65],["T_OBJECT_OPERATOR","->",66],["T_STRING","join",66],"(",["T_WHITESPACE","\n                ",66],["T_ARRAY","array",67],"(",["T_CONSTANT_ENCAPSED_STRING","'additional_table'",67],["T_WHITESPACE"," ",67],["T_DOUBLE_ARROW","=>",67],["T_WHITESPACE"," ",67],["T_VARIABLE","$this",67],["T_OBJECT_OPERATOR","->",67],["T_STRING","getTable",67],"(",["T_CONSTANT_ENCAPSED_STRING","'catalog\/eav_attribute'",67],")",")",",",["T_WHITESPACE","\n                ",67],["T_CONSTANT_ENCAPSED_STRING","'additional_table.attribute_id = main_table.attribute_id'",68],["T_WHITESPACE","\n                ",68],")",["T_WHITESPACE","\n            ",69],["T_OBJECT_OPERATOR","->",70],["T_STRING","where",70],"(",["T_CONSTANT_ENCAPSED_STRING","'main_table.entity_type_id = ?'",70],",",["T_WHITESPACE"," ",70],["T_VARIABLE","$entityTypeId",70],")",";",["T_WHITESPACE","\n        ",70],["T_RETURN","return",71],["T_WHITESPACE"," ",71],["T_VARIABLE","$this",71],";",["T_WHITESPACE","\n    ",71],"}",["T_WHITESPACE","\n\n    ",72],["T_DOC_COMMENT","\/**\n     * Specify attribute entity type filter.\n     * Entity type is defined.\n     *\n     * @param  int $typeId\n     * @return Mage_Catalog_Model_Resource_Product_Attribute_Collection\n     *\/",74],["T_WHITESPACE","\n    ",80],["T_PUBLIC","public",81],["T_WHITESPACE"," ",81],["T_FUNCTION","function",81],["T_WHITESPACE"," ",81],["T_STRING","setEntityTypeFilter",81],"(",["T_VARIABLE","$typeId",81],")",["T_WHITESPACE","\n    ",81],"{",["T_WHITESPACE","\n        ",82],["T_RETURN","return",83],["T_WHITESPACE"," ",83],["T_VARIABLE","$this",83],";",["T_WHITESPACE","\n    ",83],"}",["T_WHITESPACE","\n\n    ",84],["T_DOC_COMMENT","\/**\n     * Return array of fields to load attribute values\n     *\n     * @return array\n     *\/",86],["T_WHITESPACE","\n    ",90],["T_PROTECTED","protected",91],["T_WHITESPACE"," ",91],["T_FUNCTION","function",91],["T_WHITESPACE"," ",91],["T_STRING","_getLoadDataFields",91],"(",")",["T_WHITESPACE","\n    ",91],"{",["T_WHITESPACE","\n        ",92],["T_VARIABLE","$fields",93],["T_WHITESPACE"," ",93],"=",["T_WHITESPACE"," ",93],["T_STRING","array_merge",93],"(",["T_WHITESPACE","\n            ",93],["T_STRING","parent",94],["T_DOUBLE_COLON","::",94],["T_STRING","_getLoadDataFields",94],"(",")",",",["T_WHITESPACE","\n            ",94],["T_ARRAY","array",95],"(",["T_WHITESPACE","\n                ",95],["T_CONSTANT_ENCAPSED_STRING","'additional_table.is_global'",96],",",["T_WHITESPACE","\n                ",96],["T_CONSTANT_ENCAPSED_STRING","'additional_table.is_html_allowed_on_front'",97],",",["T_WHITESPACE","\n                ",97],["T_CONSTANT_ENCAPSED_STRING","'additional_table.is_wysiwyg_enabled'",98],["T_WHITESPACE","\n            ",98],")",["T_WHITESPACE","\n        ",99],")",";",["T_WHITESPACE","\n\n        ",100],["T_RETURN","return",102],["T_WHITESPACE"," ",102],["T_VARIABLE","$fields",102],";",["T_WHITESPACE","\n    ",102],"}",["T_WHITESPACE","\n\n    ",103],["T_DOC_COMMENT","\/**\n     * Remove price from attribute list\n     *\n     * @return Mage_Catalog_Model_Resource_Product_Attribute_Collection\n     *\/",105],["T_WHITESPACE","\n    ",109],["T_PUBLIC","public",110],["T_WHITESPACE"," ",110],["T_FUNCTION","function",110],["T_WHITESPACE"," ",110],["T_STRING","removePriceFilter",110],"(",")",["T_WHITESPACE","\n    ",110],"{",["T_WHITESPACE","\n        ",111],["T_RETURN","return",112],["T_WHITESPACE"," ",112],["T_VARIABLE","$this",112],["T_OBJECT_OPERATOR","->",112],["T_STRING","addFieldToFilter",112],"(",["T_CONSTANT_ENCAPSED_STRING","'main_table.attribute_code'",112],",",["T_WHITESPACE"," ",112],["T_ARRAY","array",112],"(",["T_CONSTANT_ENCAPSED_STRING","'neq'",112],["T_WHITESPACE"," ",112],["T_DOUBLE_ARROW","=>",112],["T_WHITESPACE"," ",112],["T_CONSTANT_ENCAPSED_STRING","'price'",112],")",")",";",["T_WHITESPACE","\n    ",112],"}",["T_WHITESPACE","\n\n    ",113],["T_DOC_COMMENT","\/**\n     * Specify \"is_visible_in_advanced_search\" filter\n     *\n     * @return Mage_Catalog_Model_Resource_Product_Attribute_Collection\n     *\/",115],["T_WHITESPACE","\n    ",119],["T_PUBLIC","public",120],["T_WHITESPACE"," ",120],["T_FUNCTION","function",120],["T_WHITESPACE"," ",120],["T_STRING","addDisplayInAdvancedSearchFilter",120],"(",")",["T_WHITESPACE","\n    ",120],"{",["T_WHITESPACE","\n        ",121],["T_RETURN","return",122],["T_WHITESPACE"," ",122],["T_VARIABLE","$this",122],["T_OBJECT_OPERATOR","->",122],["T_STRING","addFieldToFilter",122],"(",["T_CONSTANT_ENCAPSED_STRING","'additional_table.is_visible_in_advanced_search'",122],",",["T_WHITESPACE"," ",122],["T_LNUMBER","1",122],")",";",["T_WHITESPACE","\n    ",122],"}",["T_WHITESPACE","\n\n    ",123],["T_DOC_COMMENT","\/**\n     * Specify \"is_filterable\" filter\n     *\n     * @return Mage_Catalog_Model_Resource_Product_Attribute_Collection\n     *\/",125],["T_WHITESPACE","\n    ",129],["T_PUBLIC","public",130],["T_WHITESPACE"," ",130],["T_FUNCTION","function",130],["T_WHITESPACE"," ",130],["T_STRING","addIsFilterableFilter",130],"(",")",["T_WHITESPACE","\n    ",130],"{",["T_WHITESPACE","\n        ",131],["T_RETURN","return",132],["T_WHITESPACE"," ",132],["T_VARIABLE","$this",132],["T_OBJECT_OPERATOR","->",132],["T_STRING","addFieldToFilter",132],"(",["T_CONSTANT_ENCAPSED_STRING","'additional_table.is_filterable'",132],",",["T_WHITESPACE"," ",132],["T_ARRAY","array",132],"(",["T_CONSTANT_ENCAPSED_STRING","'gt'",132],["T_WHITESPACE"," ",132],["T_DOUBLE_ARROW","=>",132],["T_WHITESPACE"," ",132],["T_LNUMBER","0",132],")",")",";",["T_WHITESPACE","\n    ",132],"}",["T_WHITESPACE","\n\n    ",133],["T_DOC_COMMENT","\/**\n     * Add filterable in search filter\n     *\n     * @return Mage_Catalog_Model_Resource_Product_Attribute_Collection\n     *\/",135],["T_WHITESPACE","\n    ",139],["T_PUBLIC","public",140],["T_WHITESPACE"," ",140],["T_FUNCTION","function",140],["T_WHITESPACE"," ",140],["T_STRING","addIsFilterableInSearchFilter",140],"(",")",["T_WHITESPACE","\n    ",140],"{",["T_WHITESPACE","\n        ",141],["T_RETURN","return",142],["T_WHITESPACE"," ",142],["T_VARIABLE","$this",142],["T_OBJECT_OPERATOR","->",142],["T_STRING","addFieldToFilter",142],"(",["T_CONSTANT_ENCAPSED_STRING","'additional_table.is_filterable_in_search'",142],",",["T_WHITESPACE"," ",142],["T_ARRAY","array",142],"(",["T_CONSTANT_ENCAPSED_STRING","'gt'",142],["T_WHITESPACE"," ",142],["T_DOUBLE_ARROW","=>",142],["T_WHITESPACE"," ",142],["T_LNUMBER","0",142],")",")",";",["T_WHITESPACE","\n    ",142],"}",["T_WHITESPACE","\n\n    ",143],["T_DOC_COMMENT","\/**\n     * Specify filter by \"is_visible\" field\n     *\n     * @return Mage_Catalog_Model_Resource_Product_Attribute_Collection\n     *\/",145],["T_WHITESPACE","\n    ",149],["T_PUBLIC","public",150],["T_WHITESPACE"," ",150],["T_FUNCTION","function",150],["T_WHITESPACE"," ",150],["T_STRING","addVisibleFilter",150],"(",")",["T_WHITESPACE","\n    ",150],"{",["T_WHITESPACE","\n        ",151],["T_RETURN","return",152],["T_WHITESPACE"," ",152],["T_VARIABLE","$this",152],["T_OBJECT_OPERATOR","->",152],["T_STRING","addFieldToFilter",152],"(",["T_CONSTANT_ENCAPSED_STRING","'additional_table.is_visible'",152],",",["T_WHITESPACE"," ",152],["T_LNUMBER","1",152],")",";",["T_WHITESPACE","\n    ",152],"}",["T_WHITESPACE","\n\n    ",153],["T_DOC_COMMENT","\/**\n     * Specify \"is_searchable\" filter\n     *\n     * @return Mage_Catalog_Model_Resource_Product_Attribute_Collection\n     *\/",155],["T_WHITESPACE","\n    ",159],["T_PUBLIC","public",160],["T_WHITESPACE"," ",160],["T_FUNCTION","function",160],["T_WHITESPACE"," ",160],["T_STRING","addIsSearchableFilter",160],"(",")",["T_WHITESPACE","\n    ",160],"{",["T_WHITESPACE","\n        ",161],["T_RETURN","return",162],["T_WHITESPACE"," ",162],["T_VARIABLE","$this",162],["T_OBJECT_OPERATOR","->",162],["T_STRING","addFieldToFilter",162],"(",["T_CONSTANT_ENCAPSED_STRING","'additional_table.is_searchable'",162],",",["T_WHITESPACE"," ",162],["T_LNUMBER","1",162],")",";",["T_WHITESPACE","\n    ",162],"}",["T_WHITESPACE","\n\n    ",163],["T_DOC_COMMENT","\/**\n     * Specify filter for attributes that have to be indexed\n     *\n     * @param bool $addRequiredCodes\n     * @return Mage_Catalog_Model_Resource_Product_Attribute_Collection\n     *\/",165],["T_WHITESPACE","\n    ",170],["T_PUBLIC","public",171],["T_WHITESPACE"," ",171],["T_FUNCTION","function",171],["T_WHITESPACE"," ",171],["T_STRING","addToIndexFilter",171],"(",["T_VARIABLE","$addRequiredCodes",171],["T_WHITESPACE"," ",171],"=",["T_WHITESPACE"," ",171],["T_STRING","false",171],")",["T_WHITESPACE","\n    ",171],"{",["T_WHITESPACE","\n        ",172],["T_VARIABLE","$conditions",173],["T_WHITESPACE"," ",173],"=",["T_WHITESPACE"," ",173],["T_ARRAY","array",173],"(",["T_WHITESPACE","\n            ",173],["T_CONSTANT_ENCAPSED_STRING","'additional_table.is_searchable = 1'",174],",",["T_WHITESPACE","\n            ",174],["T_CONSTANT_ENCAPSED_STRING","'additional_table.is_visible_in_advanced_search = 1'",175],",",["T_WHITESPACE","\n            ",175],["T_CONSTANT_ENCAPSED_STRING","'additional_table.is_filterable > 0'",176],",",["T_WHITESPACE","\n            ",176],["T_CONSTANT_ENCAPSED_STRING","'additional_table.is_filterable_in_search = 1'",177],",",["T_WHITESPACE","\n            ",177],["T_CONSTANT_ENCAPSED_STRING","'additional_table.used_for_sort_by = 1'",178],["T_WHITESPACE","\n        ",178],")",";",["T_WHITESPACE","\n\n        ",179],["T_IF","if",181],["T_WHITESPACE"," ",181],"(",["T_VARIABLE","$addRequiredCodes",181],")",["T_WHITESPACE"," ",181],"{",["T_WHITESPACE","\n            ",181],["T_VARIABLE","$conditions",182],"[","]",["T_WHITESPACE"," ",182],"=",["T_WHITESPACE"," ",182],["T_VARIABLE","$this",182],["T_OBJECT_OPERATOR","->",182],["T_STRING","getConnection",182],"(",")",["T_OBJECT_OPERATOR","->",182],["T_STRING","quoteInto",182],"(",["T_CONSTANT_ENCAPSED_STRING","'main_table.attribute_code IN (?)'",182],",",["T_WHITESPACE","\n                ",182],["T_ARRAY","array",183],"(",["T_CONSTANT_ENCAPSED_STRING","'status'",183],",",["T_WHITESPACE"," ",183],["T_CONSTANT_ENCAPSED_STRING","'visibility'",183],")",")",";",["T_WHITESPACE","\n        ",183],"}",["T_WHITESPACE","\n\n        ",184],["T_VARIABLE","$this",186],["T_OBJECT_OPERATOR","->",186],["T_STRING","getSelect",186],"(",")",["T_OBJECT_OPERATOR","->",186],["T_STRING","where",186],"(",["T_STRING","sprintf",186],"(",["T_CONSTANT_ENCAPSED_STRING","'(%s)'",186],",",["T_WHITESPACE"," ",186],["T_STRING","implode",186],"(",["T_CONSTANT_ENCAPSED_STRING","' OR '",186],",",["T_WHITESPACE"," ",186],["T_VARIABLE","$conditions",186],")",")",")",";",["T_WHITESPACE","\n\n        ",186],["T_RETURN","return",188],["T_WHITESPACE"," ",188],["T_VARIABLE","$this",188],";",["T_WHITESPACE","\n    ",188],"}",["T_WHITESPACE","\n\n    ",189],["T_DOC_COMMENT","\/**\n     * Specify filter for attributes used in quick search\n     *\n     * @return Mage_Catalog_Model_Resource_Eav_Mysql4_Product_Attribute_Collection\n     *\/",191],["T_WHITESPACE","\n    ",195],["T_PUBLIC","public",196],["T_WHITESPACE"," ",196],["T_FUNCTION","function",196],["T_WHITESPACE"," ",196],["T_STRING","addSearchableAttributeFilter",196],"(",")",["T_WHITESPACE","\n    ",196],"{",["T_WHITESPACE","\n        ",197],["T_VARIABLE","$this",198],["T_OBJECT_OPERATOR","->",198],["T_STRING","getSelect",198],"(",")",["T_OBJECT_OPERATOR","->",198],["T_STRING","where",198],"(",["T_WHITESPACE","\n            ",198],["T_CONSTANT_ENCAPSED_STRING","'additional_table.is_searchable = 1 OR '",199],".",["T_WHITESPACE","\n            ",199],["T_VARIABLE","$this",200],["T_OBJECT_OPERATOR","->",200],["T_STRING","getConnection",200],"(",")",["T_OBJECT_OPERATOR","->",200],["T_STRING","quoteInto",200],"(",["T_CONSTANT_ENCAPSED_STRING","'main_table.attribute_code IN (?)'",200],",",["T_WHITESPACE"," ",200],["T_ARRAY","array",200],"(",["T_CONSTANT_ENCAPSED_STRING","'status'",200],",",["T_WHITESPACE"," ",200],["T_CONSTANT_ENCAPSED_STRING","'visibility'",200],")",")",["T_WHITESPACE","\n        ",200],")",";",["T_WHITESPACE","\n\n        ",201],["T_RETURN","return",203],["T_WHITESPACE"," ",203],["T_VARIABLE","$this",203],";",["T_WHITESPACE","\n    ",203],"}",["T_WHITESPACE","\n",204],"}",["T_WHITESPACE","\n",205]]
[["T_OPEN_TAG","<?php\n",1],["T_DOC_COMMENT","\/**\n * Magento\n *\n * NOTICE OF LICENSE\n *\n * This source file is subject to the Open Software License (OSL 3.0)\n * that is bundled with this package in the file LICENSE.txt.\n * It is also available through the world-wide-web at this URL:\n * http:\/\/opensource.org\/licenses\/osl-3.0.php\n * If you did not receive a copy of the license and are unable to\n * obtain it through the world-wide-web, please send an email\n * to license@magento.com so we can send you a copy immediately.\n *\n * DISCLAIMER\n *\n * Do not edit or add to this file if you wish to upgrade Magento to newer\n * versions in the future. If you wish to customize Magento for your\n * needs please refer to http:\/\/www.magento.com for more information.\n *\n * @category    Mage\n * @package     Mage_Catalog\n * @copyright  Copyright (c) 2006-2016 X.commerce, Inc. and affiliates (http:\/\/www.magento.com)\n * @license    http:\/\/opensource.org\/licenses\/osl-3.0.php  Open Software License (OSL 3.0)\n *\/",2],["T_WHITESPACE","\n\n\n",25],["T_DOC_COMMENT","\/**\n * Catalog Observer\n *\n * @category   Mage\n * @package    Mage_Catalog\n * @author     Magento Core Team <core@magentocommerce.com>\n *\/",28],["T_WHITESPACE","\n",34],["T_CLASS","class",35],["T_WHITESPACE"," ",35],["T_STRING","Mage_Catalog_Model_Observer",35],["T_WHITESPACE","\n",35],"{",["T_WHITESPACE","\n    ",36],["T_DOC_COMMENT","\/**\n     * Process catalog ata related with store data changes\n     *\n     * @param   Varien_Event_Observer $observer\n     * @return  Mage_Catalog_Model_Observer\n     *\/",37],["T_WHITESPACE","\n    ",42],["T_PUBLIC","public",43],["T_WHITESPACE"," ",43],["T_FUNCTION","function",43],["T_WHITESPACE"," ",43],["T_STRING","storeEdit",43],"(",["T_STRING","Varien_Event_Observer",43],["T_WHITESPACE"," ",43],["T_VARIABLE","$observer",43],")",["T_WHITESPACE","\n    ",43],"{",["T_WHITESPACE","\n        ",44],["T_DOC_COMMENT","\/** @var $store Mage_Core_Model_Store *\/",45],["T_WHITESPACE","\n        ",45],["T_VARIABLE","$store",46],["T_WHITESPACE"," ",46],"=",["T_WHITESPACE"," ",46],["T_VARIABLE","$observer",46],["T_OBJECT_OPERATOR","->",46],["T_STRING","getEvent",46],"(",")",["T_OBJECT_OPERATOR","->",46],["T_STRING","getStore",46],"(",")",";",["T_WHITESPACE","\n        ",46],["T_IF","if",47],["T_WHITESPACE"," ",47],"(",["T_VARIABLE","$store",47],["T_OBJECT_OPERATOR","->",47],["T_STRING","dataHasChangedFor",47],"(",["T_CONSTANT_ENCAPSED_STRING","'group_id'",47],")",")",["T_WHITESPACE"," ",47],"{",["T_WHITESPACE","\n            ",47],["T_STRING","Mage",48],["T_DOUBLE_COLON","::",48],["T_STRING","app",48],"(",")",["T_OBJECT_OPERATOR","->",48],["T_STRING","reinitStores",48],"(",")",";",["T_WHITESPACE","\n            ",48],["T_DOC_COMMENT","\/** @var $categoryFlatHelper Mage_Catalog_Helper_Category_Flat *\/",49],["T_WHITESPACE","\n            ",49],["T_VARIABLE","$categoryFlatHelper",50],["T_WHITESPACE"," ",50],"=",["T_WHITESPACE"," ",50],["T_STRING","Mage",50],["T_DOUBLE_COLON","::",50],["T_STRING","helper",50],"(",["T_CONSTANT_ENCAPSED_STRING","'catalog\/category_flat'",50],")",";",["T_WHITESPACE","\n            ",50],["T_IF","if",51],["T_WHITESPACE"," ",51],"(",["T_VARIABLE","$categoryFlatHelper",51],["T_OBJECT_OPERATOR","->",51],["T_STRING","isAvailable",51],"(",")",["T_WHITESPACE"," ",51],["T_BOOLEAN_AND","&&",51],["T_WHITESPACE"," ",51],["T_VARIABLE","$categoryFlatHelper",51],["T_OBJECT_OPERATOR","->",51],["T_STRING","isBuilt",51],"(",")",")",["T_WHITESPACE"," ",51],"{",["T_WHITESPACE","\n                ",51],["T_STRING","Mage",52],["T_DOUBLE_COLON","::",52],["T_STRING","getResourceModel",52],"(",["T_CONSTANT_ENCAPSED_STRING","'catalog\/category_flat'",52],")",["T_OBJECT_OPERATOR","->",52],["T_STRING","synchronize",52],"(",["T_STRING","null",52],",",["T_WHITESPACE"," ",52],["T_ARRAY","array",52],"(",["T_VARIABLE","$store",52],["T_OBJECT_OPERATOR","->",52],["T_STRING","getId",52],"(",")",")",")",";",["T_WHITESPACE","\n            ",52],"}",["T_WHITESPACE","\n            ",53],["T_STRING","Mage",54],["T_DOUBLE_COLON","::",54],["T_STRING","getResourceSingleton",54],"(",["T_CONSTANT_ENCAPSED_STRING","'catalog\/product'",54],")",["T_OBJECT_OPERATOR","->",54],["T_STRING","refreshEnabledIndex",54],"(",["T_VARIABLE","$store",54],")",";",["T_WHITESPACE","\n        ",54],"}",["T_WHITESPACE","\n        ",55],["T_RETURN","return",56],["T_WHITESPACE"," ",56],["T_VARIABLE","$this",56],";",["T_WHITESPACE","\n    ",56],"}",["T_WHITESPACE","\n\n    ",57],["T_DOC_COMMENT","\/**\n     * Process catalog data related with new store\n     *\n     * @param   Varien_Event_Observer $observer\n     * @return  Mage_Catalog_Model_Observer\n     *\/",59],["T_WHITESPACE","\n    ",64],["T_PUBLIC","public",65],["T_WHITESPACE"," ",65],["T_FUNCTION","function",65],["T_WHITESPACE"," ",65],["T_STRING","storeAdd",65],"(",["T_STRING","Varien_Event_Observer",65],["T_WHITESPACE"," ",65],["T_VARIABLE","$observer",65],")",["T_WHITESPACE","\n    ",65],"{",["T_WHITESPACE","\n        ",66],["T_COMMENT","\/* @var $store Mage_Core_Model_Store *\/",67],["T_WHITESPACE","\n        ",67],["T_VARIABLE","$store",68],["T_WHITESPACE"," ",68],"=",["T_WHITESPACE"," ",68],["T_VARIABLE","$observer",68],["T_OBJECT_OPERATOR","->",68],["T_STRING","getEvent",68],"(",")",["T_OBJECT_OPERATOR","->",68],["T_STRING","getStore",68],"(",")",";",["T_WHITESPACE","\n        ",68],["T_STRING","Mage",69],["T_DOUBLE_COLON","::",69],["T_STRING","app",69],"(",")",["T_OBJECT_OPERATOR","->",69],["T_STRING","reinitStores",69],"(",")",";",["T_WHITESPACE","\n        ",69],["T_STRING","Mage",70],["T_DOUBLE_COLON","::",70],["T_STRING","getConfig",70],"(",")",["T_OBJECT_OPERATOR","->",70],["T_STRING","reinit",70],"(",")",";",["T_WHITESPACE","\n        ",70],["T_DOC_COMMENT","\/** @var $categoryFlatHelper Mage_Catalog_Helper_Category_Flat *\/",71],["T_WHITESPACE","\n        ",71],["T_VARIABLE","$categoryFlatHelper",72],["T_WHITESPACE"," ",72],"=",["T_WHITESPACE"," ",72],["T_STRING","Mage",72],["T_DOUBLE_COLON","::",72],["T_STRING","helper",72],"(",["T_CONSTANT_ENCAPSED_STRING","'catalog\/category_flat'",72],")",";",["T_WHITESPACE","\n        ",72],["T_IF","if",73],["T_WHITESPACE"," ",73],"(",["T_VARIABLE","$categoryFlatHelper",73],["T_OBJECT_OPERATOR","->",73],["T_STRING","isAvailable",73],"(",")",["T_WHITESPACE"," ",73],["T_BOOLEAN_AND","&&",73],["T_WHITESPACE"," ",73],["T_VARIABLE","$categoryFlatHelper",73],["T_OBJECT_OPERATOR","->",73],["T_STRING","isBuilt",73],"(",")",")",["T_WHITESPACE"," ",73],"{",["T_WHITESPACE","\n            ",73],["T_STRING","Mage",74],["T_DOUBLE_COLON","::",74],["T_STRING","getResourceModel",74],"(",["T_CONSTANT_ENCAPSED_STRING","'catalog\/category_flat'",74],")",["T_OBJECT_OPERATOR","->",74],["T_STRING","synchronize",74],"(",["T_STRING","null",74],",",["T_WHITESPACE"," ",74],["T_ARRAY","array",74],"(",["T_VARIABLE","$store",74],["T_OBJECT_OPERATOR","->",74],["T_STRING","getId",74],"(",")",")",")",";",["T_WHITESPACE","\n        ",74],"}",["T_WHITESPACE","\n        ",75],["T_STRING","Mage",76],["T_DOUBLE_COLON","::",76],["T_STRING","getResourceModel",76],"(",["T_CONSTANT_ENCAPSED_STRING","'catalog\/product'",76],")",["T_OBJECT_OPERATOR","->",76],["T_STRING","refreshEnabledIndex",76],"(",["T_VARIABLE","$store",76],")",";",["T_WHITESPACE","\n        ",76],["T_RETURN","return",77],["T_WHITESPACE"," ",77],["T_VARIABLE","$this",77],";",["T_WHITESPACE","\n    ",77],"}",["T_WHITESPACE","\n\n    ",78],["T_DOC_COMMENT","\/**\n     * Process catalog data related with store group root category\n     *\n     * @param   Varien_Event_Observer $observer\n     * @return  Mage_Catalog_Model_Observer\n     *\/",80],["T_WHITESPACE","\n    ",85],["T_PUBLIC","public",86],["T_WHITESPACE"," ",86],["T_FUNCTION","function",86],["T_WHITESPACE"," ",86],["T_STRING","storeGroupSave",86],"(",["T_STRING","Varien_Event_Observer",86],["T_WHITESPACE"," ",86],["T_VARIABLE","$observer",86],")",["T_WHITESPACE","\n    ",86],"{",["T_WHITESPACE","\n        ",87],["T_COMMENT","\/* @var $group Mage_Core_Model_Store_Group *\/",88],["T_WHITESPACE","\n        ",88],["T_VARIABLE","$group",89],["T_WHITESPACE"," ",89],"=",["T_WHITESPACE"," ",89],["T_VARIABLE","$observer",89],["T_OBJECT_OPERATOR","->",89],["T_STRING","getEvent",89],"(",")",["T_OBJECT_OPERATOR","->",89],["T_STRING","getGroup",89],"(",")",";",["T_WHITESPACE","\n        ",89],["T_IF","if",90],["T_WHITESPACE"," ",90],"(",["T_VARIABLE","$group",90],["T_OBJECT_OPERATOR","->",90],["T_STRING","dataHasChangedFor",90],"(",["T_CONSTANT_ENCAPSED_STRING","'root_category_id'",90],")",["T_WHITESPACE"," ",90],["T_BOOLEAN_OR","||",90],["T_WHITESPACE"," ",90],["T_VARIABLE","$group",90],["T_OBJECT_OPERATOR","->",90],["T_STRING","dataHasChangedFor",90],"(",["T_CONSTANT_ENCAPSED_STRING","'website_id'",90],")",")",["T_WHITESPACE"," ",90],"{",["T_WHITESPACE","\n            ",90],["T_STRING","Mage",91],["T_DOUBLE_COLON","::",91],["T_STRING","app",91],"(",")",["T_OBJECT_OPERATOR","->",91],["T_STRING","reinitStores",91],"(",")",";",["T_WHITESPACE","\n            ",91],["T_FOREACH","foreach",92],["T_WHITESPACE"," ",92],"(",["T_VARIABLE","$group",92],["T_OBJECT_OPERATOR","->",92],["T_STRING","getStores",92],"(",")",["T_WHITESPACE"," ",92],["T_AS","as",92],["T_WHITESPACE"," ",92],["T_VARIABLE","$store",92],")",["T_WHITESPACE"," ",92],"{",["T_WHITESPACE","\n                ",92],["T_DOC_COMMENT","\/** @var $categoryFlatHelper Mage_Catalog_Helper_Category_Flat *\/",93],["T_WHITESPACE","\n                ",93],["T_VARIABLE","$categoryFlatHelper",94],["T_WHITESPACE"," ",94],"=",["T_WHITESPACE"," ",94],["T_STRING","Mage",94],["T_DOUBLE_COLON","::",94],["T_STRING","helper",94],"(",["T_CONSTANT_ENCAPSED_STRING","'catalog\/category_flat'",94],")",";",["T_WHITESPACE","\n                ",94],["T_IF","if",95],["T_WHITESPACE"," ",95],"(",["T_VARIABLE","$categoryFlatHelper",95],["T_OBJECT_OPERATOR","->",95],["T_STRING","isAvailable",95],"(",")",["T_WHITESPACE"," ",95],["T_BOOLEAN_AND","&&",95],["T_WHITESPACE"," ",95],["T_VARIABLE","$categoryFlatHelper",95],["T_OBJECT_OPERATOR","->",95],["T_STRING","isBuilt",95],"(",")",")",["T_WHITESPACE"," ",95],"{",["T_WHITESPACE","\n                    ",95],["T_STRING","Mage",96],["T_DOUBLE_COLON","::",96],["T_STRING","getResourceModel",96],"(",["T_CONSTANT_ENCAPSED_STRING","'catalog\/category_flat'",96],")",["T_OBJECT_OPERATOR","->",96],["T_STRING","synchronize",96],"(",["T_STRING","null",96],",",["T_WHITESPACE"," ",96],["T_ARRAY","array",96],"(",["T_VARIABLE","$store",96],["T_OBJECT_OPERATOR","->",96],["T_STRING","getId",96],"(",")",")",")",";",["T_WHITESPACE","\n                ",96],"}",["T_WHITESPACE","\n            ",97],"}",["T_WHITESPACE","\n        ",98],"}",["T_WHITESPACE","\n        ",99],["T_RETURN","return",100],["T_WHITESPACE"," ",100],["T_VARIABLE","$this",100],";",["T_WHITESPACE","\n    ",100],"}",["T_WHITESPACE","\n\n    ",101],["T_DOC_COMMENT","\/**\n     * Process delete of store\n     *\n     * @param Varien_Event_Observer $observer\n     * @return Mage_Catalog_Model_Observer\n     *\/",103],["T_WHITESPACE","\n    ",108],["T_PUBLIC","public",109],["T_WHITESPACE"," ",109],["T_FUNCTION","function",109],["T_WHITESPACE"," ",109],["T_STRING","storeDelete",109],"(",["T_STRING","Varien_Event_Observer",109],["T_WHITESPACE"," ",109],["T_VARIABLE","$observer",109],")",["T_WHITESPACE","\n    ",109],"{",["T_WHITESPACE","\n        ",110],["T_DOC_COMMENT","\/** @var $categoryFlatHelper Mage_Catalog_Helper_Category_Flat *\/",111],["T_WHITESPACE","\n        ",111],["T_VARIABLE","$categoryFlatHelper",112],["T_WHITESPACE"," ",112],"=",["T_WHITESPACE"," ",112],["T_STRING","Mage",112],["T_DOUBLE_COLON","::",112],["T_STRING","helper",112],"(",["T_CONSTANT_ENCAPSED_STRING","'catalog\/category_flat'",112],")",";",["T_WHITESPACE","\n        ",112],["T_IF","if",113],["T_WHITESPACE"," ",113],"(",["T_VARIABLE","$categoryFlatHelper",113],["T_OBJECT_OPERATOR","->",113],["T_STRING","isAvailable",113],"(",")",["T_WHITESPACE"," ",113],["T_BOOLEAN_AND","&&",113],["T_WHITESPACE"," ",113],["T_VARIABLE","$categoryFlatHelper",113],["T_OBJECT_OPERATOR","->",113],["T_STRING","isBuilt",113],"(",")",")",["T_WHITESPACE"," ",113],"{",["T_WHITESPACE","\n            ",113],["T_VARIABLE","$store",114],["T_WHITESPACE"," ",114],"=",["T_WHITESPACE"," ",114],["T_VARIABLE","$observer",114],["T_OBJECT_OPERATOR","->",114],["T_STRING","getEvent",114],"(",")",["T_OBJECT_OPERATOR","->",114],["T_STRING","getStore",114],"(",")",";",["T_WHITESPACE","\n            ",114],["T_STRING","Mage",115],["T_DOUBLE_COLON","::",115],["T_STRING","getResourceModel",115],"(",["T_CONSTANT_ENCAPSED_STRING","'catalog\/category_flat'",115],")",["T_OBJECT_OPERATOR","->",115],["T_STRING","deleteStores",115],"(",["T_VARIABLE","$store",115],["T_OBJECT_OPERATOR","->",115],["T_STRING","getId",115],"(",")",")",";",["T_WHITESPACE","\n        ",115],"}",["T_WHITESPACE","\n        ",116],["T_RETURN","return",117],["T_WHITESPACE"," ",117],["T_VARIABLE","$this",117],";",["T_WHITESPACE","\n    ",117],"}",["T_WHITESPACE","\n\n    ",118],["T_DOC_COMMENT","\/**\n     * Process catalog data after category move\n     *\n     * @param   Varien_Event_Observer $observer\n     * @return  Mage_Catalog_Model_Observer\n     *\/",120],["T_WHITESPACE","\n    ",125],["T_PUBLIC","public",126],["T_WHITESPACE"," ",126],["T_FUNCTION","function",126],["T_WHITESPACE"," ",126],["T_STRING","categoryMove",126],"(",["T_STRING","Varien_Event_Observer",126],["T_WHITESPACE"," ",126],["T_VARIABLE","$observer",126],")",["T_WHITESPACE","\n    ",126],"{",["T_WHITESPACE","\n        ",127],["T_VARIABLE","$categoryId",128],["T_WHITESPACE"," ",128],"=",["T_WHITESPACE"," ",128],["T_VARIABLE","$observer",128],["T_OBJECT_OPERATOR","->",128],["T_STRING","getEvent",128],"(",")",["T_OBJECT_OPERATOR","->",128],["T_STRING","getCategoryId",128],"(",")",";",["T_WHITESPACE","\n        ",128],["T_VARIABLE","$prevParentId",129],["T_WHITESPACE"," ",129],"=",["T_WHITESPACE"," ",129],["T_VARIABLE","$observer",129],["T_OBJECT_OPERATOR","->",129],["T_STRING","getEvent",129],"(",")",["T_OBJECT_OPERATOR","->",129],["T_STRING","getPrevParentId",129],"(",")",";",["T_WHITESPACE","\n        ",129],["T_VARIABLE","$parentId",130],["T_WHITESPACE"," ",130],"=",["T_WHITESPACE"," ",130],["T_VARIABLE","$observer",130],["T_OBJECT_OPERATOR","->",130],["T_STRING","getEvent",130],"(",")",["T_OBJECT_OPERATOR","->",130],["T_STRING","getParentId",130],"(",")",";",["T_WHITESPACE","\n        ",130],["T_DOC_COMMENT","\/** @var $categoryFlatHelper Mage_Catalog_Helper_Category_Flat *\/",131],["T_WHITESPACE","\n        ",131],["T_VARIABLE","$categoryFlatHelper",132],["T_WHITESPACE"," ",132],"=",["T_WHITESPACE"," ",132],["T_STRING","Mage",132],["T_DOUBLE_COLON","::",132],["T_STRING","helper",132],"(",["T_CONSTANT_ENCAPSED_STRING","'catalog\/category_flat'",132],")",";",["T_WHITESPACE","\n        ",132],["T_IF","if",133],["T_WHITESPACE"," ",133],"(",["T_VARIABLE","$categoryFlatHelper",133],["T_OBJECT_OPERATOR","->",133],["T_STRING","isAvailable",133],"(",")",["T_WHITESPACE"," ",133],["T_BOOLEAN_AND","&&",133],["T_WHITESPACE"," ",133],["T_VARIABLE","$categoryFlatHelper",133],["T_OBJECT_OPERATOR","->",133],["T_STRING","isBuilt",133],"(",")",")",["T_WHITESPACE"," ",133],"{",["T_WHITESPACE","\n            ",133],["T_STRING","Mage",134],["T_DOUBLE_COLON","::",134],["T_STRING","getResourceModel",134],"(",["T_CONSTANT_ENCAPSED_STRING","'catalog\/category_flat'",134],")",["T_OBJECT_OPERATOR","->",134],["T_STRING","move",134],"(",["T_VARIABLE","$categoryId",134],",",["T_WHITESPACE"," ",134],["T_VARIABLE","$prevParentId",134],",",["T_WHITESPACE"," ",134],["T_VARIABLE","$parentId",134],")",";",["T_WHITESPACE","\n        ",134],"}",["T_WHITESPACE","\n        ",135],["T_RETURN","return",136],["T_WHITESPACE"," ",136],["T_VARIABLE","$this",136],";",["T_WHITESPACE","\n    ",136],"}",["T_WHITESPACE","\n\n    ",137],["T_DOC_COMMENT","\/**\n     * Process catalog data after products import\n     *\n     * @param   Varien_Event_Observer $observer\n     * @return  Mage_Catalog_Model_Observer\n     *\/",139],["T_WHITESPACE","\n    ",144],["T_PUBLIC","public",145],["T_WHITESPACE"," ",145],["T_FUNCTION","function",145],["T_WHITESPACE"," ",145],["T_STRING","catalogProductImportAfter",145],"(",["T_STRING","Varien_Event_Observer",145],["T_WHITESPACE"," ",145],["T_VARIABLE","$observer",145],")",["T_WHITESPACE","\n    ",145],"{",["T_WHITESPACE","\n        ",146],["T_STRING","Mage",147],["T_DOUBLE_COLON","::",147],["T_STRING","getModel",147],"(",["T_CONSTANT_ENCAPSED_STRING","'catalog\/url'",147],")",["T_OBJECT_OPERATOR","->",147],["T_STRING","refreshRewrites",147],"(",")",";",["T_WHITESPACE","\n        ",147],["T_STRING","Mage",148],["T_DOUBLE_COLON","::",148],["T_STRING","getResourceSingleton",148],"(",["T_CONSTANT_ENCAPSED_STRING","'catalog\/category'",148],")",["T_OBJECT_OPERATOR","->",148],["T_STRING","refreshProductIndex",148],"(",")",";",["T_WHITESPACE","\n        ",148],["T_RETURN","return",149],["T_WHITESPACE"," ",149],["T_VARIABLE","$this",149],";",["T_WHITESPACE","\n    ",149],"}",["T_WHITESPACE","\n\n    ",150],["T_DOC_COMMENT","\/**\n     * Catalog Product Compare Items Clean\n     *\n     * @param Varien_Event_Observer $observer\n     * @return Mage_Catalog_Model_Observer\n     *\/",152],["T_WHITESPACE","\n    ",157],["T_PUBLIC","public",158],["T_WHITESPACE"," ",158],["T_FUNCTION","function",158],["T_WHITESPACE"," ",158],["T_STRING","catalogProductCompareClean",158],"(",["T_STRING","Varien_Event_Observer",158],["T_WHITESPACE"," ",158],["T_VARIABLE","$observer",158],")",["T_WHITESPACE","\n    ",158],"{",["T_WHITESPACE","\n        ",159],["T_STRING","Mage",160],["T_DOUBLE_COLON","::",160],["T_STRING","getModel",160],"(",["T_CONSTANT_ENCAPSED_STRING","'catalog\/product_compare_item'",160],")",["T_OBJECT_OPERATOR","->",160],["T_STRING","clean",160],"(",")",";",["T_WHITESPACE","\n        ",160],["T_RETURN","return",161],["T_WHITESPACE"," ",161],["T_VARIABLE","$this",161],";",["T_WHITESPACE","\n    ",161],"}",["T_WHITESPACE","\n\n    ",162],["T_DOC_COMMENT","\/**\n     * After save event of category\n     *\n     * @param Varien_Event_Observer $observer\n     * @return Mage_Catalog_Model_Observer\n     *\/",164],["T_WHITESPACE","\n    ",169],["T_PUBLIC","public",170],["T_WHITESPACE"," ",170],["T_FUNCTION","function",170],["T_WHITESPACE"," ",170],["T_STRING","categorySaveAfter",170],"(",["T_STRING","Varien_Event_Observer",170],["T_WHITESPACE"," ",170],["T_VARIABLE","$observer",170],")",["T_WHITESPACE","\n    ",170],"{",["T_WHITESPACE","\n        ",171],["T_DOC_COMMENT","\/** @var $categoryFlatHelper Mage_Catalog_Helper_Category_Flat *\/",172],["T_WHITESPACE","\n        ",172],["T_VARIABLE","$categoryFlatHelper",173],["T_WHITESPACE"," ",173],"=",["T_WHITESPACE"," ",173],["T_STRING","Mage",173],["T_DOUBLE_COLON","::",173],["T_STRING","helper",173],"(",["T_CONSTANT_ENCAPSED_STRING","'catalog\/category_flat'",173],")",";",["T_WHITESPACE","\n        ",173],["T_IF","if",174],["T_WHITESPACE"," ",174],"(",["T_VARIABLE","$categoryFlatHelper",174],["T_OBJECT_OPERATOR","->",174],["T_STRING","isAvailable",174],"(",")",["T_WHITESPACE"," ",174],["T_BOOLEAN_AND","&&",174],["T_WHITESPACE"," ",174],["T_VARIABLE","$categoryFlatHelper",174],["T_OBJECT_OPERATOR","->",174],["T_STRING","isBuilt",174],"(",")",")",["T_WHITESPACE"," ",174],"{",["T_WHITESPACE","\n            ",174],["T_VARIABLE","$category",175],["T_WHITESPACE"," ",175],"=",["T_WHITESPACE"," ",175],["T_VARIABLE","$observer",175],["T_OBJECT_OPERATOR","->",175],["T_STRING","getEvent",175],"(",")",["T_OBJECT_OPERATOR","->",175],["T_STRING","getCategory",175],"(",")",";",["T_WHITESPACE","\n            ",175],["T_STRING","Mage",176],["T_DOUBLE_COLON","::",176],["T_STRING","getResourceModel",176],"(",["T_CONSTANT_ENCAPSED_STRING","'catalog\/category_flat'",176],")",["T_OBJECT_OPERATOR","->",176],["T_STRING","synchronize",176],"(",["T_VARIABLE","$category",176],")",";",["T_WHITESPACE","\n        ",176],"}",["T_WHITESPACE","\n        ",177],["T_RETURN","return",178],["T_WHITESPACE"," ",178],["T_VARIABLE","$this",178],";",["T_WHITESPACE","\n    ",178],"}",["T_WHITESPACE","\n\n    ",179],["T_DOC_COMMENT","\/**\n     * Checking whether the using static urls in WYSIWYG allowed event\n     *\n     * @param Varien_Event_Observer $observer\n     * @return Mage_Catalog_Model_Observer\n     *\/",181],["T_WHITESPACE","\n    ",186],["T_PUBLIC","public",187],["T_WHITESPACE"," ",187],["T_FUNCTION","function",187],["T_WHITESPACE"," ",187],["T_STRING","catalogCheckIsUsingStaticUrlsAllowed",187],"(",["T_STRING","Varien_Event_Observer",187],["T_WHITESPACE"," ",187],["T_VARIABLE","$observer",187],")",["T_WHITESPACE","\n    ",187],"{",["T_WHITESPACE","\n        ",188],["T_VARIABLE","$storeId",189],["T_WHITESPACE"," ",189],"=",["T_WHITESPACE"," ",189],["T_VARIABLE","$observer",189],["T_OBJECT_OPERATOR","->",189],["T_STRING","getEvent",189],"(",")",["T_OBJECT_OPERATOR","->",189],["T_STRING","getData",189],"(",["T_CONSTANT_ENCAPSED_STRING","'store_id'",189],")",";",["T_WHITESPACE","\n        ",189],["T_VARIABLE","$result",190],["T_WHITESPACE","  ",190],"=",["T_WHITESPACE"," ",190],["T_VARIABLE","$observer",190],["T_OBJECT_OPERATOR","->",190],["T_STRING","getEvent",190],"(",")",["T_OBJECT_OPERATOR","->",190],["T_STRING","getData",190],"(",["T_CONSTANT_ENCAPSED_STRING","'result'",190],")",";",["T_WHITESPACE","\n        ",190],["T_VARIABLE","$result",191],["T_OBJECT_OPERATOR","->",191],["T_STRING","isAllowed",191],["T_WHITESPACE"," ",191],"=",["T_WHITESPACE"," ",191],["T_STRING","Mage",191],["T_DOUBLE_COLON","::",191],["T_STRING","helper",191],"(",["T_CONSTANT_ENCAPSED_STRING","'catalog'",191],")",["T_OBJECT_OPERATOR","->",191],["T_STRING","setStoreId",191],"(",["T_VARIABLE","$storeId",191],")",["T_OBJECT_OPERATOR","->",191],["T_STRING","isUsingStaticUrlsAllowed",191],"(",")",";",["T_WHITESPACE","\n    ",191],"}",["T_WHITESPACE","\n\n    ",192],["T_DOC_COMMENT","\/**\n     * Cron job method for product prices to reindex\n     *\n     * @param Mage_Cron_Model_Schedule $schedule\n     *\/",194],["T_WHITESPACE","\n    ",198],["T_PUBLIC","public",199],["T_WHITESPACE"," ",199],["T_FUNCTION","function",199],["T_WHITESPACE"," ",199],["T_STRING","reindexProductPrices",199],"(",["T_STRING","Mage_Cron_Model_Schedule",199],["T_WHITESPACE"," ",199],["T_VARIABLE","$schedule",199],")",["T_WHITESPACE","\n    ",199],"{",["T_WHITESPACE","\n        ",200],["T_VARIABLE","$indexProcess",201],["T_WHITESPACE"," ",201],"=",["T_WHITESPACE"," ",201],["T_STRING","Mage",201],["T_DOUBLE_COLON","::",201],["T_STRING","getSingleton",201],"(",["T_CONSTANT_ENCAPSED_STRING","'index\/indexer'",201],")",["T_OBJECT_OPERATOR","->",201],["T_STRING","getProcessByCode",201],"(",["T_CONSTANT_ENCAPSED_STRING","'catalog_product_price'",201],")",";",["T_WHITESPACE","\n        ",201],["T_IF","if",202],["T_WHITESPACE"," ",202],"(",["T_VARIABLE","$indexProcess",202],")",["T_WHITESPACE"," ",202],"{",["T_WHITESPACE","\n            ",202],["T_VARIABLE","$indexProcess",203],["T_OBJECT_OPERATOR","->",203],["T_STRING","reindexAll",203],"(",")",";",["T_WHITESPACE","\n        ",203],"}",["T_WHITESPACE","\n    ",204],"}",["T_WHITESPACE","\n\n    ",205],["T_DOC_COMMENT","\/**\n     * Adds catalog categories to top menu\n     *\n     * @param Varien_Event_Observer $observer\n     *\/",207],["T_WHITESPACE","\n    ",211],["T_PUBLIC","public",212],["T_WHITESPACE"," ",212],["T_FUNCTION","function",212],["T_WHITESPACE"," ",212],["T_STRING","addCatalogToTopmenuItems",212],"(",["T_STRING","Varien_Event_Observer",212],["T_WHITESPACE"," ",212],["T_VARIABLE","$observer",212],")",["T_WHITESPACE","\n    ",212],"{",["T_WHITESPACE","\n        ",213],["T_VARIABLE","$block",214],["T_WHITESPACE"," ",214],"=",["T_WHITESPACE"," ",214],["T_VARIABLE","$observer",214],["T_OBJECT_OPERATOR","->",214],["T_STRING","getEvent",214],"(",")",["T_OBJECT_OPERATOR","->",214],["T_STRING","getBlock",214],"(",")",";",["T_WHITESPACE","\n        ",214],["T_VARIABLE","$block",215],["T_OBJECT_OPERATOR","->",215],["T_STRING","addCacheTag",215],"(",["T_STRING","Mage_Catalog_Model_Category",215],["T_DOUBLE_COLON","::",215],["T_STRING","CACHE_TAG",215],")",";",["T_WHITESPACE","\n        ",215],["T_VARIABLE","$this",216],["T_OBJECT_OPERATOR","->",216],["T_STRING","_addCategoriesToMenu",216],"(",["T_WHITESPACE","\n            ",216],["T_STRING","Mage",217],["T_DOUBLE_COLON","::",217],["T_STRING","helper",217],"(",["T_CONSTANT_ENCAPSED_STRING","'catalog\/category'",217],")",["T_OBJECT_OPERATOR","->",217],["T_STRING","getStoreCategories",217],"(",")",",",["T_WHITESPACE"," ",217],["T_VARIABLE","$observer",217],["T_OBJECT_OPERATOR","->",217],["T_STRING","getMenu",217],"(",")",",",["T_WHITESPACE"," ",217],["T_VARIABLE","$block",217],["T_WHITESPACE","\n        ",217],")",";",["T_WHITESPACE","\n    ",218],"}",["T_WHITESPACE","\n\n    ",219],["T_DOC_COMMENT","\/**\n     * Recursively adds categories to top menu\n     *\n     * @param Varien_Data_Tree_Node_Collection|array $categories\n     * @param Varien_Data_Tree_Node $parentCategoryNode\n     * @param Mage_Page_Block_Html_Topmenu $menuBlock\n     * @param bool $addTags\n     *\/",221],["T_WHITESPACE","\n    ",228],["T_PROTECTED","protected",229],["T_WHITESPACE"," ",229],["T_FUNCTION","function",229],["T_WHITESPACE"," ",229],["T_STRING","_addCategoriesToMenu",229],"(",["T_VARIABLE","$categories",229],",",["T_WHITESPACE"," ",229],["T_VARIABLE","$parentCategoryNode",229],",",["T_WHITESPACE"," ",229],["T_VARIABLE","$menuBlock",229],",",["T_WHITESPACE"," ",229],["T_VARIABLE","$addTags",229],["T_WHITESPACE"," ",229],"=",["T_WHITESPACE"," ",229],["T_STRING","false",229],")",["T_WHITESPACE","\n    ",229],"{",["T_WHITESPACE","\n        ",230],["T_VARIABLE","$categoryModel",231],["T_WHITESPACE"," ",231],"=",["T_WHITESPACE"," ",231],["T_STRING","Mage",231],["T_DOUBLE_COLON","::",231],["T_STRING","getModel",231],"(",["T_CONSTANT_ENCAPSED_STRING","'catalog\/category'",231],")",";",["T_WHITESPACE","\n        ",231],["T_FOREACH","foreach",232],["T_WHITESPACE"," ",232],"(",["T_VARIABLE","$categories",232],["T_WHITESPACE"," ",232],["T_AS","as",232],["T_WHITESPACE"," ",232],["T_VARIABLE","$category",232],")",["T_WHITESPACE"," ",232],"{",["T_WHITESPACE","\n            ",232],["T_IF","if",233],["T_WHITESPACE"," ",233],"(","!",["T_VARIABLE","$category",233],["T_OBJECT_OPERATOR","->",233],["T_STRING","getIsActive",233],"(",")",")",["T_WHITESPACE"," ",233],"{",["T_WHITESPACE","\n                ",233],["T_CONTINUE","continue",234],";",["T_WHITESPACE","\n            ",234],"}",["T_WHITESPACE","\n\n            ",235],["T_VARIABLE","$nodeId",237],["T_WHITESPACE"," ",237],"=",["T_WHITESPACE"," ",237],["T_CONSTANT_ENCAPSED_STRING","'category-node-'",237],["T_WHITESPACE"," ",237],".",["T_WHITESPACE"," ",237],["T_VARIABLE","$category",237],["T_OBJECT_OPERATOR","->",237],["T_STRING","getId",237],"(",")",";",["T_WHITESPACE","\n\n            ",237],["T_VARIABLE","$categoryModel",239],["T_OBJECT_OPERATOR","->",239],["T_STRING","setId",239],"(",["T_VARIABLE","$category",239],["T_OBJECT_OPERATOR","->",239],["T_STRING","getId",239],"(",")",")",";",["T_WHITESPACE","\n            ",239],["T_IF","if",240],["T_WHITESPACE"," ",240],"(",["T_VARIABLE","$addTags",240],")",["T_WHITESPACE"," ",240],"{",["T_WHITESPACE","\n                ",240],["T_VARIABLE","$menuBlock",241],["T_OBJECT_OPERATOR","->",241],["T_STRING","addModelTags",241],"(",["T_VARIABLE","$categoryModel",241],")",";",["T_WHITESPACE","\n            ",241],"}",["T_WHITESPACE","\n\n            ",242],["T_VARIABLE","$tree",244],["T_WHITESPACE"," ",244],"=",["T_WHITESPACE"," ",244],["T_VARIABLE","$parentCategoryNode",244],["T_OBJECT_OPERATOR","->",244],["T_STRING","getTree",244],"(",")",";",["T_WHITESPACE","\n            ",244],["T_VARIABLE","$categoryData",245],["T_WHITESPACE"," ",245],"=",["T_WHITESPACE"," ",245],["T_ARRAY","array",245],"(",["T_WHITESPACE","\n                ",245],["T_CONSTANT_ENCAPSED_STRING","'name'",246],["T_WHITESPACE"," ",246],["T_DOUBLE_ARROW","=>",246],["T_WHITESPACE"," ",246],["T_VARIABLE","$category",246],["T_OBJECT_OPERATOR","->",246],["T_STRING","getName",246],"(",")",",",["T_WHITESPACE","\n                ",246],["T_CONSTANT_ENCAPSED_STRING","'id'",247],["T_WHITESPACE"," ",247],["T_DOUBLE_ARROW","=>",247],["T_WHITESPACE"," ",247],["T_VARIABLE","$nodeId",247],",",["T_WHITESPACE","\n                ",247],["T_CONSTANT_ENCAPSED_STRING","'url'",248],["T_WHITESPACE"," ",248],["T_DOUBLE_ARROW","=>",248],["T_WHITESPACE"," ",248],["T_STRING","Mage",248],["T_DOUBLE_COLON","::",248],["T_STRING","helper",248],"(",["T_CONSTANT_ENCAPSED_STRING","'catalog\/category'",248],")",["T_OBJECT_OPERATOR","->",248],["T_STRING","getCategoryUrl",248],"(",["T_VARIABLE","$category",248],")",",",["T_WHITESPACE","\n                ",248],["T_CONSTANT_ENCAPSED_STRING","'is_active'",249],["T_WHITESPACE"," ",249],["T_DOUBLE_ARROW","=>",249],["T_WHITESPACE"," ",249],["T_VARIABLE","$this",249],["T_OBJECT_OPERATOR","->",249],["T_STRING","_isActiveMenuCategory",249],"(",["T_VARIABLE","$category",249],")",["T_WHITESPACE","\n            ",249],")",";",["T_WHITESPACE","\n            ",250],["T_VARIABLE","$categoryNode",251],["T_WHITESPACE"," ",251],"=",["T_WHITESPACE"," ",251],["T_NEW","new",251],["T_WHITESPACE"," ",251],["T_STRING","Varien_Data_Tree_Node",251],"(",["T_VARIABLE","$categoryData",251],",",["T_WHITESPACE"," ",251],["T_CONSTANT_ENCAPSED_STRING","'id'",251],",",["T_WHITESPACE"," ",251],["T_VARIABLE","$tree",251],",",["T_WHITESPACE"," ",251],["T_VARIABLE","$parentCategoryNode",251],")",";",["T_WHITESPACE","\n            ",251],["T_VARIABLE","$parentCategoryNode",252],["T_OBJECT_OPERATOR","->",252],["T_STRING","addChild",252],"(",["T_VARIABLE","$categoryNode",252],")",";",["T_WHITESPACE","\n\n            ",252],["T_VARIABLE","$flatHelper",254],["T_WHITESPACE"," ",254],"=",["T_WHITESPACE"," ",254],["T_STRING","Mage",254],["T_DOUBLE_COLON","::",254],["T_STRING","helper",254],"(",["T_CONSTANT_ENCAPSED_STRING","'catalog\/category_flat'",254],")",";",["T_WHITESPACE","\n            ",254],["T_IF","if",255],["T_WHITESPACE"," ",255],"(",["T_VARIABLE","$flatHelper",255],["T_OBJECT_OPERATOR","->",255],["T_STRING","isEnabled",255],"(",")",["T_WHITESPACE"," ",255],["T_BOOLEAN_AND","&&",255],["T_WHITESPACE"," ",255],["T_VARIABLE","$flatHelper",255],["T_OBJECT_OPERATOR","->",255],["T_STRING","isBuilt",255],"(",["T_STRING","true",255],")",")",["T_WHITESPACE"," ",255],"{",["T_WHITESPACE","\n                ",255],["T_VARIABLE","$subcategories",256],["T_WHITESPACE"," ",256],"=",["T_WHITESPACE"," ",256],["T_ARRAY_CAST","(array)",256],["T_VARIABLE","$category",256],["T_OBJECT_OPERATOR","->",256],["T_STRING","getChildrenNodes",256],"(",")",";",["T_WHITESPACE","\n            ",256],"}",["T_WHITESPACE"," ",257],["T_ELSE","else",257],["T_WHITESPACE"," ",257],"{",["T_WHITESPACE","\n                ",257],["T_VARIABLE","$subcategories",258],["T_WHITESPACE"," ",258],"=",["T_WHITESPACE"," ",258],["T_VARIABLE","$category",258],["T_OBJECT_OPERATOR","->",258],["T_STRING","getChildren",258],"(",")",";",["T_WHITESPACE","\n            ",258],"}",["T_WHITESPACE","\n\n            ",259],["T_VARIABLE","$this",261],["T_OBJECT_OPERATOR","->",261],["T_STRING","_addCategoriesToMenu",261],"(",["T_VARIABLE","$subcategories",261],",",["T_WHITESPACE"," ",261],["T_VARIABLE","$categoryNode",261],",",["T_WHITESPACE"," ",261],["T_VARIABLE","$menuBlock",261],",",["T_WHITESPACE"," ",261],["T_VARIABLE","$addTags",261],")",";",["T_WHITESPACE","\n        ",261],"}",["T_WHITESPACE","\n    ",262],"}",["T_WHITESPACE","\n\n    ",263],["T_DOC_COMMENT","\/**\n     * Checks whether category belongs to active category's path\n     *\n     * @param Varien_Data_Tree_Node $category\n     * @return bool\n     *\/",265],["T_WHITESPACE","\n    ",270],["T_PROTECTED","protected",271],["T_WHITESPACE"," ",271],["T_FUNCTION","function",271],["T_WHITESPACE"," ",271],["T_STRING","_isActiveMenuCategory",271],"(",["T_VARIABLE","$category",271],")",["T_WHITESPACE","\n    ",271],"{",["T_WHITESPACE","\n        ",272],["T_VARIABLE","$catalogLayer",273],["T_WHITESPACE"," ",273],"=",["T_WHITESPACE"," ",273],["T_STRING","Mage",273],["T_DOUBLE_COLON","::",273],["T_STRING","getSingleton",273],"(",["T_CONSTANT_ENCAPSED_STRING","'catalog\/layer'",273],")",";",["T_WHITESPACE","\n        ",273],["T_IF","if",274],["T_WHITESPACE"," ",274],"(","!",["T_VARIABLE","$catalogLayer",274],")",["T_WHITESPACE"," ",274],"{",["T_WHITESPACE","\n            ",274],["T_RETURN","return",275],["T_WHITESPACE"," ",275],["T_STRING","false",275],";",["T_WHITESPACE","\n        ",275],"}",["T_WHITESPACE","\n\n        ",276],["T_VARIABLE","$currentCategory",278],["T_WHITESPACE"," ",278],"=",["T_WHITESPACE"," ",278],["T_VARIABLE","$catalogLayer",278],["T_OBJECT_OPERATOR","->",278],["T_STRING","getCurrentCategory",278],"(",")",";",["T_WHITESPACE","\n        ",278],["T_IF","if",279],["T_WHITESPACE"," ",279],"(","!",["T_VARIABLE","$currentCategory",279],")",["T_WHITESPACE"," ",279],"{",["T_WHITESPACE","\n            ",279],["T_RETURN","return",280],["T_WHITESPACE"," ",280],["T_STRING","false",280],";",["T_WHITESPACE","\n        ",280],"}",["T_WHITESPACE","\n\n        ",281],["T_VARIABLE","$categoryPathIds",283],["T_WHITESPACE"," ",283],"=",["T_WHITESPACE"," ",283],["T_STRING","explode",283],"(",["T_CONSTANT_ENCAPSED_STRING","','",283],",",["T_WHITESPACE"," ",283],["T_VARIABLE","$currentCategory",283],["T_OBJECT_OPERATOR","->",283],["T_STRING","getPathInStore",283],"(",")",")",";",["T_WHITESPACE","\n        ",283],["T_RETURN","return",284],["T_WHITESPACE"," ",284],["T_STRING","in_array",284],"(",["T_VARIABLE","$category",284],["T_OBJECT_OPERATOR","->",284],["T_STRING","getId",284],"(",")",",",["T_WHITESPACE"," ",284],["T_VARIABLE","$categoryPathIds",284],")",";",["T_WHITESPACE","\n    ",284],"}",["T_WHITESPACE","\n\n    ",285],["T_DOC_COMMENT","\/**\n     * Checks whether attribute_code by current module is reserved\n     *\n     * @param Varien_Event_Observer $observer\n     * @throws Mage_Core_Exception\n     *\/",287],["T_WHITESPACE","\n    ",292],["T_PUBLIC","public",293],["T_WHITESPACE"," ",293],["T_FUNCTION","function",293],["T_WHITESPACE"," ",293],["T_STRING","checkReservedAttributeCodes",293],"(",["T_STRING","Varien_Event_Observer",293],["T_WHITESPACE"," ",293],["T_VARIABLE","$observer",293],")",["T_WHITESPACE","\n    ",293],"{",["T_WHITESPACE","\n        ",294],["T_DOC_COMMENT","\/** @var $attribute Mage_Catalog_Model_Entity_Attribute *\/",295],["T_WHITESPACE","\n        ",295],["T_VARIABLE","$attribute",296],["T_WHITESPACE"," ",296],"=",["T_WHITESPACE"," ",296],["T_VARIABLE","$observer",296],["T_OBJECT_OPERATOR","->",296],["T_STRING","getEvent",296],"(",")",["T_OBJECT_OPERATOR","->",296],["T_STRING","getAttribute",296],"(",")",";",["T_WHITESPACE","\n        ",296],["T_IF","if",297],["T_WHITESPACE"," ",297],"(","!",["T_STRING","is_object",297],"(",["T_VARIABLE","$attribute",297],")",")",["T_WHITESPACE"," ",297],"{",["T_WHITESPACE","\n            ",297],["T_RETURN","return",298],";",["T_WHITESPACE","\n        ",298],"}",["T_WHITESPACE","\n        ",299],["T_DOC_COMMENT","\/** @var $product Mage_Catalog_Model_Product *\/",300],["T_WHITESPACE","\n        ",300],["T_VARIABLE","$product",301],["T_WHITESPACE"," ",301],"=",["T_WHITESPACE"," ",301],["T_STRING","Mage",301],["T_DOUBLE_COLON","::",301],["T_STRING","getModel",301],"(",["T_CONSTANT_ENCAPSED_STRING","'catalog\/product'",301],")",";",["T_WHITESPACE","\n        ",301],["T_IF","if",302],["T_WHITESPACE"," ",302],"(",["T_VARIABLE","$product",302],["T_OBJECT_OPERATOR","->",302],["T_STRING","isReservedAttribute",302],"(",["T_VARIABLE","$attribute",302],")",")",["T_WHITESPACE"," ",302],"{",["T_WHITESPACE","\n            ",302],["T_THROW","throw",303],["T_WHITESPACE"," ",303],["T_NEW","new",303],["T_WHITESPACE"," ",303],["T_STRING","Mage_Core_Exception",303],"(",["T_WHITESPACE","\n                ",303],["T_STRING","Mage",304],["T_DOUBLE_COLON","::",304],["T_STRING","helper",304],"(",["T_CONSTANT_ENCAPSED_STRING","'catalog'",304],")",["T_OBJECT_OPERATOR","->",304],["T_STRING","__",304],"(",["T_CONSTANT_ENCAPSED_STRING","'The attribute code \\'%s\\' is reserved by system. Please try another attribute code'",304],",",["T_WHITESPACE"," ",304],["T_VARIABLE","$attribute",304],["T_OBJECT_OPERATOR","->",304],["T_STRING","getAttributeCode",304],"(",")",")",["T_WHITESPACE","\n            ",304],")",";",["T_WHITESPACE","\n        ",305],"}",["T_WHITESPACE","\n    ",306],"}",["T_WHITESPACE","\n",307],"}",["T_WHITESPACE","\n",308]]
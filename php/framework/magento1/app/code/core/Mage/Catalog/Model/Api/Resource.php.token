[["T_OPEN_TAG","<?php\n",1],["T_DOC_COMMENT","\/**\n * Magento\n *\n * NOTICE OF LICENSE\n *\n * This source file is subject to the Open Software License (OSL 3.0)\n * that is bundled with this package in the file LICENSE.txt.\n * It is also available through the world-wide-web at this URL:\n * http:\/\/opensource.org\/licenses\/osl-3.0.php\n * If you did not receive a copy of the license and are unable to\n * obtain it through the world-wide-web, please send an email\n * to license@magento.com so we can send you a copy immediately.\n *\n * DISCLAIMER\n *\n * Do not edit or add to this file if you wish to upgrade Magento to newer\n * versions in the future. If you wish to customize Magento for your\n * needs please refer to http:\/\/www.magento.com for more information.\n *\n * @category    Mage\n * @package     Mage_Catalog\n * @copyright  Copyright (c) 2006-2016 X.commerce, Inc. and affiliates (http:\/\/www.magento.com)\n * @license    http:\/\/opensource.org\/licenses\/osl-3.0.php  Open Software License (OSL 3.0)\n *\/",2],["T_WHITESPACE","\n\n",25],["T_DOC_COMMENT","\/**\n * Catalog api resource\n *\n * @category   Mage\n * @package    Mage_Catalog\n * @author     Magento Core Team <core@magentocommerce.com>\n *\/",27],["T_WHITESPACE","\n",33],["T_CLASS","class",34],["T_WHITESPACE"," ",34],["T_STRING","Mage_Catalog_Model_Api_Resource",34],["T_WHITESPACE"," ",34],["T_EXTENDS","extends",34],["T_WHITESPACE"," ",34],["T_STRING","Mage_Api_Model_Resource_Abstract",34],["T_WHITESPACE","\n",34],"{",["T_WHITESPACE","\n    ",35],["T_DOC_COMMENT","\/**\n     * Default ignored attribute codes\n     *\n     * @var array\n     *\/",36],["T_WHITESPACE","\n    ",40],["T_PROTECTED","protected",41],["T_WHITESPACE"," ",41],["T_VARIABLE","$_ignoredAttributeCodes",41],["T_WHITESPACE"," ",41],"=",["T_WHITESPACE"," ",41],["T_ARRAY","array",41],"(",["T_CONSTANT_ENCAPSED_STRING","'entity_id'",41],",",["T_WHITESPACE"," ",41],["T_CONSTANT_ENCAPSED_STRING","'attribute_set_id'",41],",",["T_WHITESPACE"," ",41],["T_CONSTANT_ENCAPSED_STRING","'entity_type_id'",41],")",";",["T_WHITESPACE","\n\n    ",41],["T_DOC_COMMENT","\/**\n     * Default ignored attribute types\n     *\n     * @var array\n     *\/",43],["T_WHITESPACE","\n    ",47],["T_PROTECTED","protected",48],["T_WHITESPACE"," ",48],["T_VARIABLE","$_ignoredAttributeTypes",48],["T_WHITESPACE"," ",48],"=",["T_WHITESPACE"," ",48],["T_ARRAY","array",48],"(",")",";",["T_WHITESPACE","\n\n    ",48],["T_DOC_COMMENT","\/**\n     * Field name in session for saving store id\n     * @var string\n     *\/",50],["T_WHITESPACE","\n    ",53],["T_PROTECTED","protected",54],["T_WHITESPACE"," ",54],["T_VARIABLE","$_storeIdSessionField",54],["T_WHITESPACE","   ",54],"=",["T_WHITESPACE"," ",54],["T_CONSTANT_ENCAPSED_STRING","'store_id'",54],";",["T_WHITESPACE","\n\n    ",54],["T_DOC_COMMENT","\/**\n     * Name of resource model in ACL list\n     * @var string\n     *\/",56],["T_WHITESPACE","\n    ",59],["T_PROTECTED","protected",60],["T_WHITESPACE"," ",60],["T_VARIABLE","$_resourceAttributeAclName",60],["T_WHITESPACE"," ",60],"=",["T_WHITESPACE"," ",60],["T_CONSTANT_ENCAPSED_STRING","'catalog\/category\/attributes\/field_'",60],";",["T_WHITESPACE","\n\n    ",60],["T_DOC_COMMENT","\/**\n     * Check is attribute allowed\n     *\n     * @param Mage_Eav_Model_Entity_Attribute_Abstract $attribute\n     * @param array $attributes\n     * @return boolean\n     *\/",62],["T_WHITESPACE","\n    ",68],["T_PROTECTED","protected",69],["T_WHITESPACE"," ",69],["T_FUNCTION","function",69],["T_WHITESPACE"," ",69],["T_STRING","_isAllowedAttribute",69],"(",["T_VARIABLE","$attribute",69],",",["T_WHITESPACE"," ",69],["T_VARIABLE","$attributes",69],["T_WHITESPACE"," ",69],"=",["T_WHITESPACE"," ",69],["T_STRING","null",69],")",["T_WHITESPACE","\n    ",69],"{",["T_WHITESPACE","\n\n        ",70],["T_IF","if",72],["T_WHITESPACE"," ",72],"(",["T_STRING","Mage",72],["T_DOUBLE_COLON","::",72],["T_STRING","getSingleton",72],"(",["T_CONSTANT_ENCAPSED_STRING","'api\/server'",72],")",["T_OBJECT_OPERATOR","->",72],["T_STRING","getApiName",72],"(",")",["T_WHITESPACE"," ",72],["T_IS_EQUAL","==",72],["T_WHITESPACE"," ",72],["T_CONSTANT_ENCAPSED_STRING","'rest'",72],")",["T_WHITESPACE"," ",72],"{",["T_WHITESPACE","\n            ",72],["T_IF","if",73],["T_WHITESPACE"," ",73],"(","!",["T_VARIABLE","$this",73],["T_OBJECT_OPERATOR","->",73],["T_STRING","_checkAttributeAcl",73],"(",["T_VARIABLE","$attribute",73],")",")",["T_WHITESPACE"," ",73],"{",["T_WHITESPACE","\n                ",73],["T_RETURN","return",74],["T_WHITESPACE"," ",74],["T_STRING","false",74],";",["T_WHITESPACE","\n            ",74],"}",["T_WHITESPACE","\n        ",75],"}",["T_WHITESPACE","\n\n        ",76],["T_IF","if",78],["T_WHITESPACE"," ",78],"(",["T_STRING","is_array",78],"(",["T_VARIABLE","$attributes",78],")",["T_WHITESPACE","\n            ",78],["T_BOOLEAN_AND","&&",79],["T_WHITESPACE"," ",79],"!","(",["T_WHITESPACE"," ",79],["T_STRING","in_array",79],"(",["T_VARIABLE","$attribute",79],["T_OBJECT_OPERATOR","->",79],["T_STRING","getAttributeCode",79],"(",")",",",["T_WHITESPACE"," ",79],["T_VARIABLE","$attributes",79],")",["T_WHITESPACE","\n                  ",79],["T_BOOLEAN_OR","||",80],["T_WHITESPACE"," ",80],["T_STRING","in_array",80],"(",["T_VARIABLE","$attribute",80],["T_OBJECT_OPERATOR","->",80],["T_STRING","getAttributeId",80],"(",")",",",["T_WHITESPACE"," ",80],["T_VARIABLE","$attributes",80],")",")",")",["T_WHITESPACE"," ",80],"{",["T_WHITESPACE","\n            ",80],["T_RETURN","return",81],["T_WHITESPACE"," ",81],["T_STRING","false",81],";",["T_WHITESPACE","\n        ",81],"}",["T_WHITESPACE","\n\n        ",82],["T_RETURN","return",84],["T_WHITESPACE"," ",84],"!",["T_STRING","in_array",84],"(",["T_VARIABLE","$attribute",84],["T_OBJECT_OPERATOR","->",84],["T_STRING","getFrontendInput",84],"(",")",",",["T_WHITESPACE"," ",84],["T_VARIABLE","$this",84],["T_OBJECT_OPERATOR","->",84],["T_STRING","_ignoredAttributeTypes",84],")",["T_WHITESPACE","\n               ",84],["T_BOOLEAN_AND","&&",85],["T_WHITESPACE"," ",85],"!",["T_STRING","in_array",85],"(",["T_VARIABLE","$attribute",85],["T_OBJECT_OPERATOR","->",85],["T_STRING","getAttributeCode",85],"(",")",",",["T_WHITESPACE"," ",85],["T_VARIABLE","$this",85],["T_OBJECT_OPERATOR","->",85],["T_STRING","_ignoredAttributeCodes",85],")",";",["T_WHITESPACE","\n    ",85],"}",["T_WHITESPACE","\n\n    ",86],["T_DOC_COMMENT","\/**\n     * Retrives store id from store code, if no store id specified,\n     * it use seted session or admin store\n     *\n     * @param string|int $store\n     * @return int\n     *\/",88],["T_WHITESPACE","\n    ",94],["T_PROTECTED","protected",95],["T_WHITESPACE"," ",95],["T_FUNCTION","function",95],["T_WHITESPACE"," ",95],["T_STRING","_getStoreId",95],"(",["T_VARIABLE","$store",95],["T_WHITESPACE"," ",95],"=",["T_WHITESPACE"," ",95],["T_STRING","null",95],")",["T_WHITESPACE","\n    ",95],"{",["T_WHITESPACE","\n        ",96],["T_IF","if",97],["T_WHITESPACE"," ",97],"(",["T_STRING","is_null",97],"(",["T_VARIABLE","$store",97],")",")",["T_WHITESPACE"," ",97],"{",["T_WHITESPACE","\n            ",97],["T_VARIABLE","$store",98],["T_WHITESPACE"," ",98],"=",["T_WHITESPACE"," ",98],"(",["T_VARIABLE","$this",98],["T_OBJECT_OPERATOR","->",98],["T_STRING","_getSession",98],"(",")",["T_OBJECT_OPERATOR","->",98],["T_STRING","hasData",98],"(",["T_VARIABLE","$this",98],["T_OBJECT_OPERATOR","->",98],["T_STRING","_storeIdSessionField",98],")",["T_WHITESPACE","\n                        ",98],"?",["T_WHITESPACE"," ",99],["T_VARIABLE","$this",99],["T_OBJECT_OPERATOR","->",99],["T_STRING","_getSession",99],"(",")",["T_OBJECT_OPERATOR","->",99],["T_STRING","getData",99],"(",["T_VARIABLE","$this",99],["T_OBJECT_OPERATOR","->",99],["T_STRING","_storeIdSessionField",99],")",["T_WHITESPACE"," ",99],":",["T_WHITESPACE"," ",99],["T_LNUMBER","0",99],")",";",["T_WHITESPACE","\n        ",99],"}",["T_WHITESPACE","\n\n        ",100],["T_TRY","try",102],["T_WHITESPACE"," ",102],"{",["T_WHITESPACE","\n            ",102],["T_VARIABLE","$storeId",103],["T_WHITESPACE"," ",103],"=",["T_WHITESPACE"," ",103],["T_STRING","Mage",103],["T_DOUBLE_COLON","::",103],["T_STRING","app",103],"(",")",["T_OBJECT_OPERATOR","->",103],["T_STRING","getStore",103],"(",["T_VARIABLE","$store",103],")",["T_OBJECT_OPERATOR","->",103],["T_STRING","getId",103],"(",")",";",["T_WHITESPACE","\n        ",103],"}",["T_WHITESPACE"," ",104],["T_CATCH","catch",104],["T_WHITESPACE"," ",104],"(",["T_STRING","Mage_Core_Model_Store_Exception",104],["T_WHITESPACE"," ",104],["T_VARIABLE","$e",104],")",["T_WHITESPACE"," ",104],"{",["T_WHITESPACE","\n            ",104],["T_VARIABLE","$this",105],["T_OBJECT_OPERATOR","->",105],["T_STRING","_fault",105],"(",["T_CONSTANT_ENCAPSED_STRING","'store_not_exists'",105],")",";",["T_WHITESPACE","\n        ",105],"}",["T_WHITESPACE","\n\n        ",106],["T_RETURN","return",108],["T_WHITESPACE"," ",108],["T_VARIABLE","$storeId",108],";",["T_WHITESPACE","\n    ",108],"}",["T_WHITESPACE","\n\n    ",109],["T_DOC_COMMENT","\/**\n     * Return loaded product instance\n     *\n     * @param  int|string $productId (SKU or ID)\n     * @param  int|string $store\n     * @param  string $identifierType\n     * @return Mage_Catalog_Model_Product\n     *\/",111],["T_WHITESPACE","\n    ",118],["T_PROTECTED","protected",119],["T_WHITESPACE"," ",119],["T_FUNCTION","function",119],["T_WHITESPACE"," ",119],["T_STRING","_getProduct",119],"(",["T_VARIABLE","$productId",119],",",["T_WHITESPACE"," ",119],["T_VARIABLE","$store",119],["T_WHITESPACE"," ",119],"=",["T_WHITESPACE"," ",119],["T_STRING","null",119],",",["T_WHITESPACE"," ",119],["T_VARIABLE","$identifierType",119],["T_WHITESPACE"," ",119],"=",["T_WHITESPACE"," ",119],["T_STRING","null",119],")",["T_WHITESPACE","\n    ",119],"{",["T_WHITESPACE","\n        ",120],["T_VARIABLE","$product",121],["T_WHITESPACE"," ",121],"=",["T_WHITESPACE"," ",121],["T_STRING","Mage",121],["T_DOUBLE_COLON","::",121],["T_STRING","helper",121],"(",["T_CONSTANT_ENCAPSED_STRING","'catalog\/product'",121],")",["T_OBJECT_OPERATOR","->",121],["T_STRING","getProduct",121],"(",["T_VARIABLE","$productId",121],",",["T_WHITESPACE"," ",121],["T_VARIABLE","$this",121],["T_OBJECT_OPERATOR","->",121],["T_STRING","_getStoreId",121],"(",["T_VARIABLE","$store",121],")",",",["T_WHITESPACE"," ",121],["T_VARIABLE","$identifierType",121],")",";",["T_WHITESPACE","\n        ",121],["T_IF","if",122],["T_WHITESPACE"," ",122],"(",["T_STRING","is_null",122],"(",["T_VARIABLE","$product",122],["T_OBJECT_OPERATOR","->",122],["T_STRING","getId",122],"(",")",")",")",["T_WHITESPACE"," ",122],"{",["T_WHITESPACE","\n            ",122],["T_VARIABLE","$this",123],["T_OBJECT_OPERATOR","->",123],["T_STRING","_fault",123],"(",["T_CONSTANT_ENCAPSED_STRING","'product_not_exists'",123],")",";",["T_WHITESPACE","\n        ",123],"}",["T_WHITESPACE","\n        ",124],["T_RETURN","return",125],["T_WHITESPACE"," ",125],["T_VARIABLE","$product",125],";",["T_WHITESPACE","\n    ",125],"}",["T_WHITESPACE","\n\n    ",126],["T_DOC_COMMENT","\/**\n     * Set current store for catalog.\n     *\n     * @param string|int $store\n     * @return int\n     *\/",128],["T_WHITESPACE","\n    ",133],["T_PUBLIC","public",134],["T_WHITESPACE"," ",134],["T_FUNCTION","function",134],["T_WHITESPACE"," ",134],["T_STRING","currentStore",134],"(",["T_VARIABLE","$store",134],"=",["T_STRING","null",134],")",["T_WHITESPACE","\n    ",134],"{",["T_WHITESPACE","\n        ",135],["T_IF","if",136],["T_WHITESPACE"," ",136],"(","!",["T_STRING","is_null",136],"(",["T_VARIABLE","$store",136],")",")",["T_WHITESPACE"," ",136],"{",["T_WHITESPACE","\n            ",136],["T_TRY","try",137],["T_WHITESPACE"," ",137],"{",["T_WHITESPACE","\n                ",137],["T_VARIABLE","$storeId",138],["T_WHITESPACE"," ",138],"=",["T_WHITESPACE"," ",138],["T_STRING","Mage",138],["T_DOUBLE_COLON","::",138],["T_STRING","app",138],"(",")",["T_OBJECT_OPERATOR","->",138],["T_STRING","getStore",138],"(",["T_VARIABLE","$store",138],")",["T_OBJECT_OPERATOR","->",138],["T_STRING","getId",138],"(",")",";",["T_WHITESPACE","\n            ",138],"}",["T_WHITESPACE"," ",139],["T_CATCH","catch",139],["T_WHITESPACE"," ",139],"(",["T_STRING","Mage_Core_Model_Store_Exception",139],["T_WHITESPACE"," ",139],["T_VARIABLE","$e",139],")",["T_WHITESPACE"," ",139],"{",["T_WHITESPACE","\n                ",139],["T_VARIABLE","$this",140],["T_OBJECT_OPERATOR","->",140],["T_STRING","_fault",140],"(",["T_CONSTANT_ENCAPSED_STRING","'store_not_exists'",140],")",";",["T_WHITESPACE","\n            ",140],"}",["T_WHITESPACE","\n\n            ",141],["T_VARIABLE","$this",143],["T_OBJECT_OPERATOR","->",143],["T_STRING","_getSession",143],"(",")",["T_OBJECT_OPERATOR","->",143],["T_STRING","setData",143],"(",["T_VARIABLE","$this",143],["T_OBJECT_OPERATOR","->",143],["T_STRING","_storeIdSessionField",143],",",["T_WHITESPACE"," ",143],["T_VARIABLE","$storeId",143],")",";",["T_WHITESPACE","\n        ",143],"}",["T_WHITESPACE","\n\n        ",144],["T_RETURN","return",146],["T_WHITESPACE"," ",146],["T_VARIABLE","$this",146],["T_OBJECT_OPERATOR","->",146],["T_STRING","_getStoreId",146],"(",")",";",["T_WHITESPACE","\n    ",146],"}",["T_WHITESPACE","\n",147],"}",["T_WHITESPACE"," ",148],["T_COMMENT","\/\/ Class Mage_Catalog_Model_Api_Resource End\n",148]]
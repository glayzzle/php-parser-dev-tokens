[["T_OPEN_TAG","<?php\n",1],["T_DOC_COMMENT","\/**\n * Magento\n *\n * NOTICE OF LICENSE\n *\n * This source file is subject to the Open Software License (OSL 3.0)\n * that is bundled with this package in the file LICENSE.txt.\n * It is also available through the world-wide-web at this URL:\n * http:\/\/opensource.org\/licenses\/osl-3.0.php\n * If you did not receive a copy of the license and are unable to\n * obtain it through the world-wide-web, please send an email\n * to license@magento.com so we can send you a copy immediately.\n *\n * DISCLAIMER\n *\n * Do not edit or add to this file if you wish to upgrade Magento to newer\n * versions in the future. If you wish to customize Magento for your\n * needs please refer to http:\/\/www.magento.com for more information.\n *\n * @category    Mage\n * @package     Mage_GoogleAnalytics\n * @copyright  Copyright (c) 2006-2016 X.commerce, Inc. and affiliates (http:\/\/www.magento.com)\n * @license    http:\/\/opensource.org\/licenses\/osl-3.0.php  Open Software License (OSL 3.0)\n *\/",2],["T_WHITESPACE","\n\n\n",25],["T_DOC_COMMENT","\/**\n * GoogleAnalitics Page Block\n *\n * @category   Mage\n * @package    Mage_GoogleAnalytics\n * @author     Magento Core Team <core@magentocommerce.com>\n *\/",28],["T_WHITESPACE","\n",34],["T_CLASS","class",35],["T_WHITESPACE"," ",35],["T_STRING","Mage_GoogleAnalytics_Block_Ga",35],["T_WHITESPACE"," ",35],["T_EXTENDS","extends",35],["T_WHITESPACE"," ",35],["T_STRING","Mage_Core_Block_Template",35],["T_WHITESPACE","\n",35],"{",["T_WHITESPACE","\n    ",36],["T_DOC_COMMENT","\/**\n     * @deprecated after 1.4.1.1\n     * @see self::_getOrdersTrackingCode()\n     * @return string\n     *\/",37],["T_WHITESPACE","\n    ",41],["T_PUBLIC","public",42],["T_WHITESPACE"," ",42],["T_FUNCTION","function",42],["T_WHITESPACE"," ",42],["T_STRING","getQuoteOrdersHtml",42],"(",")",["T_WHITESPACE","\n    ",42],"{",["T_WHITESPACE","\n        ",43],["T_RETURN","return",44],["T_WHITESPACE"," ",44],["T_CONSTANT_ENCAPSED_STRING","''",44],";",["T_WHITESPACE","\n    ",44],"}",["T_WHITESPACE","\n\n    ",45],["T_DOC_COMMENT","\/**\n     * @deprecated after 1.4.1.1\n     * self::_getOrdersTrackingCode()\n     * @return string\n     *\/",47],["T_WHITESPACE","\n    ",51],["T_PUBLIC","public",52],["T_WHITESPACE"," ",52],["T_FUNCTION","function",52],["T_WHITESPACE"," ",52],["T_STRING","getOrderHtml",52],"(",")",["T_WHITESPACE","\n    ",52],"{",["T_WHITESPACE","\n        ",53],["T_RETURN","return",54],["T_WHITESPACE"," ",54],["T_CONSTANT_ENCAPSED_STRING","''",54],";",["T_WHITESPACE","\n    ",54],"}",["T_WHITESPACE","\n\n    ",55],["T_DOC_COMMENT","\/**\n     * @deprecated after 1.4.1.1\n     * @see _toHtml()\n     * @return string\n     *\/",57],["T_WHITESPACE","\n    ",61],["T_PUBLIC","public",62],["T_WHITESPACE"," ",62],["T_FUNCTION","function",62],["T_WHITESPACE"," ",62],["T_STRING","getAccount",62],"(",")",["T_WHITESPACE","\n    ",62],"{",["T_WHITESPACE","\n        ",63],["T_RETURN","return",64],["T_WHITESPACE"," ",64],["T_CONSTANT_ENCAPSED_STRING","''",64],";",["T_WHITESPACE","\n    ",64],"}",["T_WHITESPACE","\n\n    ",65],["T_DOC_COMMENT","\/**\n     * Get a specific page name (may be customized via layout)\n     *\n     * @return string|null\n     *\/",67],["T_WHITESPACE","\n    ",71],["T_PUBLIC","public",72],["T_WHITESPACE"," ",72],["T_FUNCTION","function",72],["T_WHITESPACE"," ",72],["T_STRING","getPageName",72],"(",")",["T_WHITESPACE","\n    ",72],"{",["T_WHITESPACE","\n        ",73],["T_RETURN","return",74],["T_WHITESPACE"," ",74],["T_VARIABLE","$this",74],["T_OBJECT_OPERATOR","->",74],["T_STRING","_getData",74],"(",["T_CONSTANT_ENCAPSED_STRING","'page_name'",74],")",";",["T_WHITESPACE","\n    ",74],"}",["T_WHITESPACE","\n\n    ",75],["T_DOC_COMMENT","\/**\n     * Render regular page tracking javascript code\n     * The custom \"page name\" may be set from layout or somewhere else. It must start from slash.\n     *\n     * @param string $accountId\n     * @return string\n     *\/",77],["T_WHITESPACE","\n    ",83],["T_PROTECTED","protected",84],["T_WHITESPACE"," ",84],["T_FUNCTION","function",84],["T_WHITESPACE"," ",84],["T_STRING","_getPageTrackingCode",84],"(",["T_VARIABLE","$accountId",84],")",["T_WHITESPACE","\n    ",84],"{",["T_WHITESPACE","\n        ",85],["T_IF","if",86],["T_WHITESPACE"," ",86],"(",["T_VARIABLE","$this",86],["T_OBJECT_OPERATOR","->",86],["T_STRING","helper",86],"(",["T_CONSTANT_ENCAPSED_STRING","'googleanalytics'",86],")",["T_OBJECT_OPERATOR","->",86],["T_STRING","isUseUniversalAnalytics",86],"(",")",")",["T_WHITESPACE"," ",86],"{",["T_WHITESPACE","\n            ",86],["T_RETURN","return",87],["T_WHITESPACE"," ",87],["T_VARIABLE","$this",87],["T_OBJECT_OPERATOR","->",87],["T_STRING","_getPageTrackingCodeUniversal",87],"(",["T_VARIABLE","$accountId",87],")",";",["T_WHITESPACE","\n        ",87],"}",["T_WHITESPACE"," ",88],["T_ELSE","else",88],["T_WHITESPACE"," ",88],"{",["T_WHITESPACE","\n            ",88],["T_RETURN","return",89],["T_WHITESPACE"," ",89],["T_VARIABLE","$this",89],["T_OBJECT_OPERATOR","->",89],["T_STRING","_getPageTrackingCodeAnalytics",89],"(",["T_VARIABLE","$accountId",89],")",";",["T_WHITESPACE","\n        ",89],"}",["T_WHITESPACE","\n    ",90],"}",["T_WHITESPACE","\n\n    ",91],["T_DOC_COMMENT","\/**\n     * Render regular page tracking javascript code\n     * The custom \"page name\" may be set from layout or somewhere else. It must start from slash.\n     *\n     * @param string $accountId\n     * @return string\n     *\/",93],["T_WHITESPACE","\n    ",99],["T_PROTECTED","protected",100],["T_WHITESPACE"," ",100],["T_FUNCTION","function",100],["T_WHITESPACE"," ",100],["T_STRING","_getPageTrackingCodeUniversal",100],"(",["T_VARIABLE","$accountId",100],")",["T_WHITESPACE","\n    ",100],"{",["T_WHITESPACE","\n        ",101],["T_RETURN","return",102],["T_WHITESPACE"," ",102],"\"",["T_ENCAPSED_AND_WHITESPACE","\nga('create', '",102],["T_CURLY_OPEN","{",103],["T_VARIABLE","$this",103],["T_OBJECT_OPERATOR","->",103],["T_STRING","jsQuoteEscape",103],"(",["T_VARIABLE","$accountId",103],")","}",["T_ENCAPSED_AND_WHITESPACE","', 'auto');\n",103],"\"",["T_WHITESPACE"," ",104],".",["T_WHITESPACE"," ",104],["T_VARIABLE","$this",104],["T_OBJECT_OPERATOR","->",104],["T_STRING","_getAnonymizationCode",104],"(",")",["T_WHITESPACE"," ",104],".",["T_WHITESPACE"," ",104],["T_CONSTANT_ENCAPSED_STRING","\"\nga('send', 'pageview');\n\"",104],";",["T_WHITESPACE","\n    ",106],"}",["T_WHITESPACE","\n\n    ",107],["T_DOC_COMMENT","\/**\n     * Render regular page tracking javascript code\n     * The custom \"page name\" may be set from layout or somewhere else. It must start from slash.\n     *\n     * @link http:\/\/code.google.com\/apis\/analytics\/docs\/gaJS\/gaJSApiBasicConfiguration.html#_gat.GA_Tracker_._trackPageview\n     * @link http:\/\/code.google.com\/apis\/analytics\/docs\/gaJS\/gaJSApi_gaq.html\n     * @param string $accountId\n     * @return string\n     *\/",109],["T_WHITESPACE","\n    ",117],["T_PROTECTED","protected",118],["T_WHITESPACE"," ",118],["T_FUNCTION","function",118],["T_WHITESPACE"," ",118],["T_STRING","_getPageTrackingCodeAnalytics",118],"(",["T_VARIABLE","$accountId",118],")",["T_WHITESPACE","\n    ",118],"{",["T_WHITESPACE","\n        ",119],["T_VARIABLE","$pageName",120],["T_WHITESPACE","   ",120],"=",["T_WHITESPACE"," ",120],["T_STRING","trim",120],"(",["T_VARIABLE","$this",120],["T_OBJECT_OPERATOR","->",120],["T_STRING","getPageName",120],"(",")",")",";",["T_WHITESPACE","\n        ",120],["T_VARIABLE","$optPageURL",121],["T_WHITESPACE"," ",121],"=",["T_WHITESPACE"," ",121],["T_CONSTANT_ENCAPSED_STRING","''",121],";",["T_WHITESPACE","\n        ",121],["T_IF","if",122],["T_WHITESPACE"," ",122],"(",["T_VARIABLE","$pageName",122],["T_WHITESPACE"," ",122],["T_BOOLEAN_AND","&&",122],["T_WHITESPACE"," ",122],["T_STRING","preg_match",122],"(",["T_CONSTANT_ENCAPSED_STRING","'\/^\\\/.*\/i'",122],",",["T_WHITESPACE"," ",122],["T_VARIABLE","$pageName",122],")",")",["T_WHITESPACE"," ",122],"{",["T_WHITESPACE","\n            ",122],["T_VARIABLE","$optPageURL",123],["T_WHITESPACE"," ",123],"=",["T_WHITESPACE"," ",123],"\"",["T_ENCAPSED_AND_WHITESPACE",", '",123],["T_CURLY_OPEN","{",123],["T_VARIABLE","$this",123],["T_OBJECT_OPERATOR","->",123],["T_STRING","jsQuoteEscape",123],"(",["T_VARIABLE","$pageName",123],")","}",["T_ENCAPSED_AND_WHITESPACE","'",123],"\"",";",["T_WHITESPACE","\n        ",123],"}",["T_WHITESPACE","\n        ",124],["T_RETURN","return",125],["T_WHITESPACE"," ",125],"\"",["T_ENCAPSED_AND_WHITESPACE","\n_gaq.push(['_setAccount', '",125],["T_CURLY_OPEN","{",126],["T_VARIABLE","$this",126],["T_OBJECT_OPERATOR","->",126],["T_STRING","jsQuoteEscape",126],"(",["T_VARIABLE","$accountId",126],")","}",["T_ENCAPSED_AND_WHITESPACE","']);\n",126],"\"",["T_WHITESPACE"," ",127],".",["T_WHITESPACE"," ",127],["T_VARIABLE","$this",127],["T_OBJECT_OPERATOR","->",127],["T_STRING","_getAnonymizationCode",127],"(",")",["T_WHITESPACE"," ",127],".",["T_WHITESPACE"," ",127],"\"",["T_ENCAPSED_AND_WHITESPACE","\n_gaq.push(['_trackPageview'",127],["T_CURLY_OPEN","{",128],["T_VARIABLE","$optPageURL",128],"}",["T_ENCAPSED_AND_WHITESPACE","]);\n",128],"\"",";",["T_WHITESPACE","\n    ",129],"}",["T_WHITESPACE","\n\n    ",130],["T_DOC_COMMENT","\/**\n     * Render information about specified orders and their items\n     *\n     * @return string\n     *\/",132],["T_WHITESPACE","\n    ",136],["T_PROTECTED","protected",137],["T_WHITESPACE"," ",137],["T_FUNCTION","function",137],["T_WHITESPACE"," ",137],["T_STRING","_getOrdersTrackingCode",137],"(",")",["T_WHITESPACE","\n    ",137],"{",["T_WHITESPACE","\n        ",138],["T_IF","if",139],["T_WHITESPACE"," ",139],"(",["T_VARIABLE","$this",139],["T_OBJECT_OPERATOR","->",139],["T_STRING","helper",139],"(",["T_CONSTANT_ENCAPSED_STRING","'googleanalytics'",139],")",["T_OBJECT_OPERATOR","->",139],["T_STRING","isUseUniversalAnalytics",139],"(",")",")",["T_WHITESPACE"," ",139],"{",["T_WHITESPACE","\n            ",139],["T_RETURN","return",140],["T_WHITESPACE"," ",140],["T_VARIABLE","$this",140],["T_OBJECT_OPERATOR","->",140],["T_STRING","_getOrdersTrackingCodeUniversal",140],"(",")",";",["T_WHITESPACE","\n        ",140],"}",["T_WHITESPACE"," ",141],["T_ELSE","else",141],["T_WHITESPACE"," ",141],"{",["T_WHITESPACE","\n            ",141],["T_RETURN","return",142],["T_WHITESPACE"," ",142],["T_VARIABLE","$this",142],["T_OBJECT_OPERATOR","->",142],["T_STRING","_getOrdersTrackingCodeAnalytics",142],"(",")",";",["T_WHITESPACE","\n        ",142],"}",["T_WHITESPACE","\n    ",143],"}",["T_WHITESPACE","\n\n    ",144],["T_DOC_COMMENT","\/**\n     * Render information about specified orders and their items\n     *\n     * @return string\n     *\/",146],["T_WHITESPACE","\n    ",150],["T_PROTECTED","protected",151],["T_WHITESPACE"," ",151],["T_FUNCTION","function",151],["T_WHITESPACE"," ",151],["T_STRING","_getOrdersTrackingCodeUniversal",151],"(",")",["T_WHITESPACE","\n    ",151],"{",["T_WHITESPACE","\n        ",152],["T_VARIABLE","$orderIds",153],["T_WHITESPACE"," ",153],"=",["T_WHITESPACE"," ",153],["T_VARIABLE","$this",153],["T_OBJECT_OPERATOR","->",153],["T_STRING","getOrderIds",153],"(",")",";",["T_WHITESPACE","\n        ",153],["T_IF","if",154],["T_WHITESPACE"," ",154],"(",["T_EMPTY","empty",154],"(",["T_VARIABLE","$orderIds",154],")",["T_WHITESPACE"," ",154],["T_BOOLEAN_OR","||",154],["T_WHITESPACE"," ",154],"!",["T_STRING","is_array",154],"(",["T_VARIABLE","$orderIds",154],")",")",["T_WHITESPACE"," ",154],"{",["T_WHITESPACE","\n            ",154],["T_RETURN","return",155],";",["T_WHITESPACE","\n        ",155],"}",["T_WHITESPACE","\n        ",156],["T_VARIABLE","$collection",157],["T_WHITESPACE"," ",157],"=",["T_WHITESPACE"," ",157],["T_STRING","Mage",157],["T_DOUBLE_COLON","::",157],["T_STRING","getResourceModel",157],"(",["T_CONSTANT_ENCAPSED_STRING","'sales\/order_collection'",157],")",["T_WHITESPACE","\n            ",157],["T_OBJECT_OPERATOR","->",158],["T_STRING","addFieldToFilter",158],"(",["T_CONSTANT_ENCAPSED_STRING","'entity_id'",158],",",["T_WHITESPACE"," ",158],["T_ARRAY","array",158],"(",["T_CONSTANT_ENCAPSED_STRING","'in'",158],["T_WHITESPACE"," ",158],["T_DOUBLE_ARROW","=>",158],["T_WHITESPACE"," ",158],["T_VARIABLE","$orderIds",158],")",")",";",["T_WHITESPACE","\n        ",158],["T_VARIABLE","$result",159],["T_WHITESPACE"," ",159],"=",["T_WHITESPACE"," ",159],["T_ARRAY","array",159],"(",")",";",["T_WHITESPACE","\n        ",159],["T_VARIABLE","$result",160],"[","]",["T_WHITESPACE"," ",160],"=",["T_WHITESPACE"," ",160],["T_CONSTANT_ENCAPSED_STRING","\"ga('require', 'ecommerce')\"",160],";",["T_WHITESPACE","\n        ",160],["T_FOREACH","foreach",161],["T_WHITESPACE"," ",161],"(",["T_VARIABLE","$collection",161],["T_WHITESPACE"," ",161],["T_AS","as",161],["T_WHITESPACE"," ",161],["T_VARIABLE","$order",161],")",["T_WHITESPACE"," ",161],"{",["T_WHITESPACE","\n            ",161],["T_VARIABLE","$result",162],"[","]",["T_WHITESPACE"," ",162],"=",["T_WHITESPACE"," ",162],["T_STRING","sprintf",162],"(",["T_CONSTANT_ENCAPSED_STRING","\"ga('ecommerce:addTransaction', {\n'id': '%s',\n'affiliation': '%s',\n'revenue': '%s',\n'tax': '%s',\n'shipping': '%s'\n});\"",162],",",["T_WHITESPACE","\n                ",168],["T_VARIABLE","$order",169],["T_OBJECT_OPERATOR","->",169],["T_STRING","getIncrementId",169],"(",")",",",["T_WHITESPACE","\n                ",169],["T_VARIABLE","$this",170],["T_OBJECT_OPERATOR","->",170],["T_STRING","jsQuoteEscape",170],"(",["T_STRING","Mage",170],["T_DOUBLE_COLON","::",170],["T_STRING","app",170],"(",")",["T_OBJECT_OPERATOR","->",170],["T_STRING","getStore",170],"(",")",["T_OBJECT_OPERATOR","->",170],["T_STRING","getFrontendName",170],"(",")",")",",",["T_WHITESPACE","\n                ",170],["T_VARIABLE","$order",171],["T_OBJECT_OPERATOR","->",171],["T_STRING","getBaseGrandTotal",171],"(",")",",",["T_WHITESPACE","\n                ",171],["T_VARIABLE","$order",172],["T_OBJECT_OPERATOR","->",172],["T_STRING","getBaseTaxAmount",172],"(",")",",",["T_WHITESPACE","\n                ",172],["T_VARIABLE","$order",173],["T_OBJECT_OPERATOR","->",173],["T_STRING","getBaseShippingAmount",173],"(",")",["T_WHITESPACE","\n            ",173],")",";",["T_WHITESPACE","\n            ",174],["T_FOREACH","foreach",175],["T_WHITESPACE"," ",175],"(",["T_VARIABLE","$order",175],["T_OBJECT_OPERATOR","->",175],["T_STRING","getAllVisibleItems",175],"(",")",["T_WHITESPACE"," ",175],["T_AS","as",175],["T_WHITESPACE"," ",175],["T_VARIABLE","$item",175],")",["T_WHITESPACE"," ",175],"{",["T_WHITESPACE","\n                ",175],["T_VARIABLE","$result",176],"[","]",["T_WHITESPACE"," ",176],"=",["T_WHITESPACE"," ",176],["T_STRING","sprintf",176],"(",["T_CONSTANT_ENCAPSED_STRING","\"ga('ecommerce:addItem', {\n'id': '%s',\n'sku': '%s',\n'name': '%s',\n'category': '%s',\n'price': '%s',\n'quantity': '%s'\n});\"",176],",",["T_WHITESPACE","\n                    ",183],["T_VARIABLE","$order",184],["T_OBJECT_OPERATOR","->",184],["T_STRING","getIncrementId",184],"(",")",",",["T_WHITESPACE","\n                    ",184],["T_VARIABLE","$this",185],["T_OBJECT_OPERATOR","->",185],["T_STRING","jsQuoteEscape",185],"(",["T_VARIABLE","$item",185],["T_OBJECT_OPERATOR","->",185],["T_STRING","getSku",185],"(",")",")",",",["T_WHITESPACE","\n                    ",185],["T_VARIABLE","$this",186],["T_OBJECT_OPERATOR","->",186],["T_STRING","jsQuoteEscape",186],"(",["T_VARIABLE","$item",186],["T_OBJECT_OPERATOR","->",186],["T_STRING","getName",186],"(",")",")",",",["T_WHITESPACE","\n                    ",186],["T_STRING","null",187],",",["T_WHITESPACE"," ",187],["T_COMMENT","\/\/ there is no \"category\" defined for the order item\n",187],["T_WHITESPACE","                    ",188],["T_VARIABLE","$item",188],["T_OBJECT_OPERATOR","->",188],["T_STRING","getBasePrice",188],"(",")",",",["T_WHITESPACE","\n                    ",188],["T_VARIABLE","$item",189],["T_OBJECT_OPERATOR","->",189],["T_STRING","getQtyOrdered",189],"(",")",["T_WHITESPACE","\n                ",189],")",";",["T_WHITESPACE","\n            ",190],"}",["T_WHITESPACE","\n            ",191],["T_VARIABLE","$result",192],"[","]",["T_WHITESPACE"," ",192],"=",["T_WHITESPACE"," ",192],["T_CONSTANT_ENCAPSED_STRING","\"ga('ecommerce:send');\"",192],";",["T_WHITESPACE","\n        ",192],"}",["T_WHITESPACE","\n        ",193],["T_RETURN","return",194],["T_WHITESPACE"," ",194],["T_STRING","implode",194],"(",["T_CONSTANT_ENCAPSED_STRING","\"\\n\"",194],",",["T_WHITESPACE"," ",194],["T_VARIABLE","$result",194],")",";",["T_WHITESPACE","\n    ",194],"}",["T_WHITESPACE","\n\n    ",195],["T_DOC_COMMENT","\/**\n     * Render information about specified orders and their items\n     *\n     * @link http:\/\/code.google.com\/apis\/analytics\/docs\/gaJS\/gaJSApiEcommerce.html#_gat.GA_Tracker_._addTrans\n     * @return string\n     *\/",197],["T_WHITESPACE","\n    ",202],["T_PROTECTED","protected",203],["T_WHITESPACE"," ",203],["T_FUNCTION","function",203],["T_WHITESPACE"," ",203],["T_STRING","_getOrdersTrackingCodeAnalytics",203],"(",")",["T_WHITESPACE","\n    ",203],"{",["T_WHITESPACE","\n        ",204],["T_VARIABLE","$orderIds",205],["T_WHITESPACE"," ",205],"=",["T_WHITESPACE"," ",205],["T_VARIABLE","$this",205],["T_OBJECT_OPERATOR","->",205],["T_STRING","getOrderIds",205],"(",")",";",["T_WHITESPACE","\n        ",205],["T_IF","if",206],["T_WHITESPACE"," ",206],"(",["T_EMPTY","empty",206],"(",["T_VARIABLE","$orderIds",206],")",["T_WHITESPACE"," ",206],["T_BOOLEAN_OR","||",206],["T_WHITESPACE"," ",206],"!",["T_STRING","is_array",206],"(",["T_VARIABLE","$orderIds",206],")",")",["T_WHITESPACE"," ",206],"{",["T_WHITESPACE","\n            ",206],["T_RETURN","return",207],";",["T_WHITESPACE","\n        ",207],"}",["T_WHITESPACE","\n        ",208],["T_VARIABLE","$collection",209],["T_WHITESPACE"," ",209],"=",["T_WHITESPACE"," ",209],["T_STRING","Mage",209],["T_DOUBLE_COLON","::",209],["T_STRING","getResourceModel",209],"(",["T_CONSTANT_ENCAPSED_STRING","'sales\/order_collection'",209],")",["T_WHITESPACE","\n            ",209],["T_OBJECT_OPERATOR","->",210],["T_STRING","addFieldToFilter",210],"(",["T_CONSTANT_ENCAPSED_STRING","'entity_id'",210],",",["T_WHITESPACE"," ",210],["T_ARRAY","array",210],"(",["T_CONSTANT_ENCAPSED_STRING","'in'",210],["T_WHITESPACE"," ",210],["T_DOUBLE_ARROW","=>",210],["T_WHITESPACE"," ",210],["T_VARIABLE","$orderIds",210],")",")",";",["T_WHITESPACE","\n        ",210],["T_VARIABLE","$result",211],["T_WHITESPACE"," ",211],"=",["T_WHITESPACE"," ",211],["T_ARRAY","array",211],"(",")",";",["T_WHITESPACE","\n        ",211],["T_FOREACH","foreach",212],["T_WHITESPACE"," ",212],"(",["T_VARIABLE","$collection",212],["T_WHITESPACE"," ",212],["T_AS","as",212],["T_WHITESPACE"," ",212],["T_VARIABLE","$order",212],")",["T_WHITESPACE"," ",212],"{",["T_WHITESPACE","\n            ",212],["T_IF","if",213],["T_WHITESPACE"," ",213],"(",["T_VARIABLE","$order",213],["T_OBJECT_OPERATOR","->",213],["T_STRING","getIsVirtual",213],"(",")",")",["T_WHITESPACE"," ",213],"{",["T_WHITESPACE","\n                ",213],["T_VARIABLE","$address",214],["T_WHITESPACE"," ",214],"=",["T_WHITESPACE"," ",214],["T_VARIABLE","$order",214],["T_OBJECT_OPERATOR","->",214],["T_STRING","getBillingAddress",214],"(",")",";",["T_WHITESPACE","\n            ",214],"}",["T_WHITESPACE"," ",215],["T_ELSE","else",215],["T_WHITESPACE"," ",215],"{",["T_WHITESPACE","\n                ",215],["T_VARIABLE","$address",216],["T_WHITESPACE"," ",216],"=",["T_WHITESPACE"," ",216],["T_VARIABLE","$order",216],["T_OBJECT_OPERATOR","->",216],["T_STRING","getShippingAddress",216],"(",")",";",["T_WHITESPACE","\n            ",216],"}",["T_WHITESPACE","\n            ",217],["T_VARIABLE","$result",218],"[","]",["T_WHITESPACE"," ",218],"=",["T_WHITESPACE"," ",218],["T_STRING","sprintf",218],"(",["T_CONSTANT_ENCAPSED_STRING","\"_gaq.push(['_addTrans', '%s', '%s', '%s', '%s', '%s', '%s', '%s', '%s']);\"",218],",",["T_WHITESPACE","\n                ",218],["T_VARIABLE","$order",219],["T_OBJECT_OPERATOR","->",219],["T_STRING","getIncrementId",219],"(",")",",",["T_WHITESPACE","\n                ",219],["T_VARIABLE","$this",220],["T_OBJECT_OPERATOR","->",220],["T_STRING","jsQuoteEscape",220],"(",["T_STRING","Mage",220],["T_DOUBLE_COLON","::",220],["T_STRING","app",220],"(",")",["T_OBJECT_OPERATOR","->",220],["T_STRING","getStore",220],"(",")",["T_OBJECT_OPERATOR","->",220],["T_STRING","getFrontendName",220],"(",")",")",",",["T_WHITESPACE","\n                ",220],["T_VARIABLE","$order",221],["T_OBJECT_OPERATOR","->",221],["T_STRING","getBaseGrandTotal",221],"(",")",",",["T_WHITESPACE","\n                ",221],["T_VARIABLE","$order",222],["T_OBJECT_OPERATOR","->",222],["T_STRING","getBaseTaxAmount",222],"(",")",",",["T_WHITESPACE","\n                ",222],["T_VARIABLE","$order",223],["T_OBJECT_OPERATOR","->",223],["T_STRING","getBaseShippingAmount",223],"(",")",",",["T_WHITESPACE","\n                ",223],["T_VARIABLE","$this",224],["T_OBJECT_OPERATOR","->",224],["T_STRING","jsQuoteEscape",224],"(",["T_STRING","Mage",224],["T_DOUBLE_COLON","::",224],["T_STRING","helper",224],"(",["T_CONSTANT_ENCAPSED_STRING","'core'",224],")",["T_OBJECT_OPERATOR","->",224],["T_STRING","escapeHtml",224],"(",["T_VARIABLE","$address",224],["T_OBJECT_OPERATOR","->",224],["T_STRING","getCity",224],"(",")",")",")",",",["T_WHITESPACE","\n                ",224],["T_VARIABLE","$this",225],["T_OBJECT_OPERATOR","->",225],["T_STRING","jsQuoteEscape",225],"(",["T_STRING","Mage",225],["T_DOUBLE_COLON","::",225],["T_STRING","helper",225],"(",["T_CONSTANT_ENCAPSED_STRING","'core'",225],")",["T_OBJECT_OPERATOR","->",225],["T_STRING","escapeHtml",225],"(",["T_VARIABLE","$address",225],["T_OBJECT_OPERATOR","->",225],["T_STRING","getRegion",225],"(",")",")",")",",",["T_WHITESPACE","\n                ",225],["T_VARIABLE","$this",226],["T_OBJECT_OPERATOR","->",226],["T_STRING","jsQuoteEscape",226],"(",["T_STRING","Mage",226],["T_DOUBLE_COLON","::",226],["T_STRING","helper",226],"(",["T_CONSTANT_ENCAPSED_STRING","'core'",226],")",["T_OBJECT_OPERATOR","->",226],["T_STRING","escapeHtml",226],"(",["T_VARIABLE","$address",226],["T_OBJECT_OPERATOR","->",226],["T_STRING","getCountry",226],"(",")",")",")",["T_WHITESPACE","\n            ",226],")",";",["T_WHITESPACE","\n            ",227],["T_FOREACH","foreach",228],["T_WHITESPACE"," ",228],"(",["T_VARIABLE","$order",228],["T_OBJECT_OPERATOR","->",228],["T_STRING","getAllVisibleItems",228],"(",")",["T_WHITESPACE"," ",228],["T_AS","as",228],["T_WHITESPACE"," ",228],["T_VARIABLE","$item",228],")",["T_WHITESPACE"," ",228],"{",["T_WHITESPACE","\n                ",228],["T_VARIABLE","$result",229],"[","]",["T_WHITESPACE"," ",229],"=",["T_WHITESPACE"," ",229],["T_STRING","sprintf",229],"(",["T_CONSTANT_ENCAPSED_STRING","\"_gaq.push(['_addItem', '%s', '%s', '%s', '%s', '%s', '%s']);\"",229],",",["T_WHITESPACE","\n                    ",229],["T_VARIABLE","$order",230],["T_OBJECT_OPERATOR","->",230],["T_STRING","getIncrementId",230],"(",")",",",["T_WHITESPACE","\n                    ",230],["T_VARIABLE","$this",231],["T_OBJECT_OPERATOR","->",231],["T_STRING","jsQuoteEscape",231],"(",["T_VARIABLE","$item",231],["T_OBJECT_OPERATOR","->",231],["T_STRING","getSku",231],"(",")",")",",",["T_WHITESPACE"," ",231],["T_VARIABLE","$this",231],["T_OBJECT_OPERATOR","->",231],["T_STRING","jsQuoteEscape",231],"(",["T_VARIABLE","$item",231],["T_OBJECT_OPERATOR","->",231],["T_STRING","getName",231],"(",")",")",",",["T_WHITESPACE","\n                    ",231],["T_STRING","null",232],",",["T_WHITESPACE"," ",232],["T_COMMENT","\/\/ there is no \"category\" defined for the order item\n",232],["T_WHITESPACE","                    ",233],["T_VARIABLE","$item",233],["T_OBJECT_OPERATOR","->",233],["T_STRING","getBasePrice",233],"(",")",",",["T_WHITESPACE"," ",233],["T_VARIABLE","$item",233],["T_OBJECT_OPERATOR","->",233],["T_STRING","getQtyOrdered",233],"(",")",["T_WHITESPACE","\n                ",233],")",";",["T_WHITESPACE","\n            ",234],"}",["T_WHITESPACE","\n            ",235],["T_VARIABLE","$result",236],"[","]",["T_WHITESPACE"," ",236],"=",["T_WHITESPACE"," ",236],["T_CONSTANT_ENCAPSED_STRING","\"_gaq.push(['_trackTrans']);\"",236],";",["T_WHITESPACE","\n        ",236],"}",["T_WHITESPACE","\n        ",237],["T_RETURN","return",238],["T_WHITESPACE"," ",238],["T_STRING","implode",238],"(",["T_CONSTANT_ENCAPSED_STRING","\"\\n\"",238],",",["T_WHITESPACE"," ",238],["T_VARIABLE","$result",238],")",";",["T_WHITESPACE","\n    ",238],"}",["T_WHITESPACE","\n\n    ",239],["T_DOC_COMMENT","\/**\n     * Render IP anonymization code for page tracking javascript code\n     *\n     * @return string\n     *\/",241],["T_WHITESPACE","\n    ",245],["T_PROTECTED","protected",246],["T_WHITESPACE"," ",246],["T_FUNCTION","function",246],["T_WHITESPACE"," ",246],["T_STRING","_getAnonymizationCode",246],"(",")",["T_WHITESPACE","\n    ",246],"{",["T_WHITESPACE","\n        ",247],["T_IF","if",248],["T_WHITESPACE"," ",248],"(","!",["T_STRING","Mage",248],["T_DOUBLE_COLON","::",248],["T_STRING","helper",248],"(",["T_CONSTANT_ENCAPSED_STRING","'googleanalytics'",248],")",["T_OBJECT_OPERATOR","->",248],["T_STRING","isIpAnonymizationEnabled",248],"(",")",")",["T_WHITESPACE"," ",248],"{",["T_WHITESPACE","\n            ",248],["T_RETURN","return",249],["T_WHITESPACE"," ",249],["T_CONSTANT_ENCAPSED_STRING","''",249],";",["T_WHITESPACE","\n        ",249],"}",["T_WHITESPACE","\n        ",250],["T_IF","if",251],["T_WHITESPACE"," ",251],"(",["T_VARIABLE","$this",251],["T_OBJECT_OPERATOR","->",251],["T_STRING","helper",251],"(",["T_CONSTANT_ENCAPSED_STRING","'googleanalytics'",251],")",["T_OBJECT_OPERATOR","->",251],["T_STRING","isUseUniversalAnalytics",251],"(",")",")",["T_WHITESPACE"," ",251],"{",["T_WHITESPACE","\n            ",251],["T_RETURN","return",252],["T_WHITESPACE"," ",252],["T_VARIABLE","$this",252],["T_OBJECT_OPERATOR","->",252],["T_STRING","_getAnonymizationCodeUniversal",252],"(",")",";",["T_WHITESPACE","\n        ",252],"}",["T_WHITESPACE"," ",253],["T_ELSE","else",253],["T_WHITESPACE"," ",253],"{",["T_WHITESPACE","\n            ",253],["T_RETURN","return",254],["T_WHITESPACE"," ",254],["T_VARIABLE","$this",254],["T_OBJECT_OPERATOR","->",254],["T_STRING","_getAnonymizationCodeAnalytics",254],"(",")",";",["T_WHITESPACE","\n        ",254],"}",["T_WHITESPACE","\n    ",255],"}",["T_WHITESPACE","\n\n    ",256],["T_DOC_COMMENT","\/**\n     * Render IP anonymization code for page tracking javascript universal analytics code\n     *\n     * @return string\n     *\/",258],["T_WHITESPACE","\n    ",262],["T_PROTECTED","protected",263],["T_WHITESPACE"," ",263],["T_FUNCTION","function",263],["T_WHITESPACE"," ",263],["T_STRING","_getAnonymizationCodeUniversal",263],"(",")",["T_WHITESPACE","\n    ",263],"{",["T_WHITESPACE","\n        ",264],["T_RETURN","return",265],["T_WHITESPACE"," ",265],["T_CONSTANT_ENCAPSED_STRING","\"ga('set', 'anonymizeIp', true);\"",265],";",["T_WHITESPACE","\n    ",265],"}",["T_WHITESPACE","\n\n    ",266],["T_DOC_COMMENT","\/**\n     * Render IP anonymization code for page tracking javascript google analytics code\n     *\n     * @return string\n     *\/",268],["T_WHITESPACE","\n    ",272],["T_PROTECTED","protected",273],["T_WHITESPACE"," ",273],["T_FUNCTION","function",273],["T_WHITESPACE"," ",273],["T_STRING","_getAnonymizationCodeAnalytics",273],"(",")",["T_WHITESPACE","\n    ",273],"{",["T_WHITESPACE","\n        ",274],["T_RETURN","return",275],["T_WHITESPACE"," ",275],["T_CONSTANT_ENCAPSED_STRING","\"_gaq.push (['_gat._anonymizeIp']);\"",275],";",["T_WHITESPACE","\n    ",275],"}",["T_WHITESPACE","\n\n    ",276],["T_DOC_COMMENT","\/**\n     * Is ga available\n     *\n     * @return bool\n     *\/",278],["T_WHITESPACE","\n    ",282],["T_PROTECTED","protected",283],["T_WHITESPACE"," ",283],["T_FUNCTION","function",283],["T_WHITESPACE"," ",283],["T_STRING","_isAvailable",283],"(",")",["T_WHITESPACE","\n    ",283],"{",["T_WHITESPACE","\n        ",284],["T_RETURN","return",285],["T_WHITESPACE"," ",285],["T_STRING","Mage",285],["T_DOUBLE_COLON","::",285],["T_STRING","helper",285],"(",["T_CONSTANT_ENCAPSED_STRING","'googleanalytics'",285],")",["T_OBJECT_OPERATOR","->",285],["T_STRING","isGoogleAnalyticsAvailable",285],"(",")",";",["T_WHITESPACE","\n    ",285],"}",["T_WHITESPACE","\n\n    ",286],["T_DOC_COMMENT","\/**\n     * Render GA tracking scripts\n     *\n     * @return string\n     *\/",288],["T_WHITESPACE","\n    ",292],["T_PROTECTED","protected",293],["T_WHITESPACE"," ",293],["T_FUNCTION","function",293],["T_WHITESPACE"," ",293],["T_STRING","_toHtml",293],"(",")",["T_WHITESPACE","\n    ",293],"{",["T_WHITESPACE","\n        ",294],["T_IF","if",295],["T_WHITESPACE"," ",295],"(","!",["T_VARIABLE","$this",295],["T_OBJECT_OPERATOR","->",295],["T_STRING","_isAvailable",295],"(",")",")",["T_WHITESPACE"," ",295],"{",["T_WHITESPACE","\n            ",295],["T_RETURN","return",296],["T_WHITESPACE"," ",296],["T_CONSTANT_ENCAPSED_STRING","''",296],";",["T_WHITESPACE","\n        ",296],"}",["T_WHITESPACE","\n        ",297],["T_RETURN","return",298],["T_WHITESPACE"," ",298],["T_STRING","parent",298],["T_DOUBLE_COLON","::",298],["T_STRING","_toHtml",298],"(",")",";",["T_WHITESPACE","\n    ",298],"}",["T_WHITESPACE","\n",299],"}",["T_WHITESPACE","\n",300]]
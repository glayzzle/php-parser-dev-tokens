[["T_OPEN_TAG","<?php\n",1],["T_DOC_COMMENT","\/**\n * Magento\n *\n * NOTICE OF LICENSE\n *\n * This source file is subject to the Open Software License (OSL 3.0)\n * that is bundled with this package in the file LICENSE.txt.\n * It is also available through the world-wide-web at this URL:\n * http:\/\/opensource.org\/licenses\/osl-3.0.php\n * If you did not receive a copy of the license and are unable to\n * obtain it through the world-wide-web, please send an email\n * to license@magento.com so we can send you a copy immediately.\n *\n * DISCLAIMER\n *\n * Do not edit or add to this file if you wish to upgrade Magento to newer\n * versions in the future. If you wish to customize Magento for your\n * needs please refer to http:\/\/www.magento.com for more information.\n *\n * @category    Mage\n * @package     Mage_Backup\n * @copyright  Copyright (c) 2006-2016 X.commerce, Inc. and affiliates (http:\/\/www.magento.com)\n * @license    http:\/\/opensource.org\/licenses\/osl-3.0.php  Open Software License (OSL 3.0)\n *\/",2],["T_WHITESPACE","\n\n",25],["T_DOC_COMMENT","\/**\n * Backup data helper\n *\/",27],["T_WHITESPACE","\n",29],["T_CLASS","class",30],["T_WHITESPACE"," ",30],["T_STRING","Mage_Backup_Helper_Data",30],["T_WHITESPACE"," ",30],["T_EXTENDS","extends",30],["T_WHITESPACE"," ",30],["T_STRING","Mage_Core_Helper_Abstract",30],["T_WHITESPACE","\n",30],"{",["T_WHITESPACE","\n    ",31],["T_DOC_COMMENT","\/**\n     * Backup type constant for database backup\n     *\/",32],["T_WHITESPACE","\n    ",34],["T_CONST","const",35],["T_WHITESPACE"," ",35],["T_STRING","TYPE_DB",35],["T_WHITESPACE"," ",35],"=",["T_WHITESPACE"," ",35],["T_CONSTANT_ENCAPSED_STRING","'db'",35],";",["T_WHITESPACE","\n\n    ",35],["T_DOC_COMMENT","\/**\n     * Backup type constant for filesystem backup\n     *\/",37],["T_WHITESPACE","\n    ",39],["T_CONST","const",40],["T_WHITESPACE"," ",40],["T_STRING","TYPE_FILESYSTEM",40],["T_WHITESPACE"," ",40],"=",["T_WHITESPACE"," ",40],["T_CONSTANT_ENCAPSED_STRING","'filesystem'",40],";",["T_WHITESPACE","\n\n    ",40],["T_DOC_COMMENT","\/**\n     * Backup type constant for full system backup(database + filesystem)\n     *\/",42],["T_WHITESPACE","\n    ",44],["T_CONST","const",45],["T_WHITESPACE"," ",45],["T_STRING","TYPE_SYSTEM_SNAPSHOT",45],["T_WHITESPACE"," ",45],"=",["T_WHITESPACE"," ",45],["T_CONSTANT_ENCAPSED_STRING","'snapshot'",45],";",["T_WHITESPACE","\n\n    ",45],["T_DOC_COMMENT","\/**\n     * Backup type constant for media and database backup\n     *\/",47],["T_WHITESPACE","\n    ",49],["T_CONST","const",50],["T_WHITESPACE"," ",50],["T_STRING","TYPE_MEDIA",50],["T_WHITESPACE"," ",50],"=",["T_WHITESPACE"," ",50],["T_CONSTANT_ENCAPSED_STRING","'media'",50],";",["T_WHITESPACE","\n\n    ",50],["T_DOC_COMMENT","\/**\n     * Backup type constant for full system backup excluding media folder\n     *\/",52],["T_WHITESPACE","\n    ",54],["T_CONST","const",55],["T_WHITESPACE"," ",55],["T_STRING","TYPE_SNAPSHOT_WITHOUT_MEDIA",55],["T_WHITESPACE"," ",55],"=",["T_WHITESPACE"," ",55],["T_CONSTANT_ENCAPSED_STRING","'nomedia'",55],";",["T_WHITESPACE","\n\n    ",55],["T_DOC_COMMENT","\/**\n     * Get all possible backup type values with descriptive title\n     *\n     * @return array\n     *\/",57],["T_WHITESPACE","\n    ",61],["T_PUBLIC","public",62],["T_WHITESPACE"," ",62],["T_FUNCTION","function",62],["T_WHITESPACE"," ",62],["T_STRING","getBackupTypes",62],"(",")",["T_WHITESPACE","\n    ",62],"{",["T_WHITESPACE","\n        ",63],["T_RETURN","return",64],["T_WHITESPACE"," ",64],["T_ARRAY","array",64],"(",["T_WHITESPACE","\n            ",64],["T_STRING","self",65],["T_DOUBLE_COLON","::",65],["T_STRING","TYPE_DB",65],["T_WHITESPACE","                     ",65],["T_DOUBLE_ARROW","=>",65],["T_WHITESPACE"," ",65],["T_VARIABLE","$this",65],["T_OBJECT_OPERATOR","->",65],["T_STRING","__",65],"(",["T_CONSTANT_ENCAPSED_STRING","'Database'",65],")",",",["T_WHITESPACE","\n            ",65],["T_STRING","self",66],["T_DOUBLE_COLON","::",66],["T_STRING","TYPE_MEDIA",66],["T_WHITESPACE","                  ",66],["T_DOUBLE_ARROW","=>",66],["T_WHITESPACE"," ",66],["T_VARIABLE","$this",66],["T_OBJECT_OPERATOR","->",66],["T_STRING","__",66],"(",["T_CONSTANT_ENCAPSED_STRING","'Database and Media'",66],")",",",["T_WHITESPACE","\n            ",66],["T_STRING","self",67],["T_DOUBLE_COLON","::",67],["T_STRING","TYPE_SYSTEM_SNAPSHOT",67],["T_WHITESPACE","        ",67],["T_DOUBLE_ARROW","=>",67],["T_WHITESPACE"," ",67],["T_VARIABLE","$this",67],["T_OBJECT_OPERATOR","->",67],["T_STRING","__",67],"(",["T_CONSTANT_ENCAPSED_STRING","'System'",67],")",",",["T_WHITESPACE","\n            ",67],["T_STRING","self",68],["T_DOUBLE_COLON","::",68],["T_STRING","TYPE_SNAPSHOT_WITHOUT_MEDIA",68],["T_WHITESPACE"," ",68],["T_DOUBLE_ARROW","=>",68],["T_WHITESPACE"," ",68],["T_VARIABLE","$this",68],["T_OBJECT_OPERATOR","->",68],["T_STRING","__",68],"(",["T_CONSTANT_ENCAPSED_STRING","'System (excluding Media)'",68],")",["T_WHITESPACE","\n        ",68],")",";",["T_WHITESPACE","\n    ",69],"}",["T_WHITESPACE","\n\n    ",70],["T_DOC_COMMENT","\/**\n     * Get all possible backup type values\n     *\n     * @return array\n     *\/",72],["T_WHITESPACE","\n    ",76],["T_PUBLIC","public",77],["T_WHITESPACE"," ",77],["T_FUNCTION","function",77],["T_WHITESPACE"," ",77],["T_STRING","getBackupTypesList",77],"(",")",["T_WHITESPACE","\n    ",77],"{",["T_WHITESPACE","\n        ",78],["T_RETURN","return",79],["T_WHITESPACE"," ",79],["T_ARRAY","array",79],"(",["T_WHITESPACE","\n            ",79],["T_STRING","self",80],["T_DOUBLE_COLON","::",80],["T_STRING","TYPE_DB",80],",",["T_WHITESPACE","\n            ",80],["T_STRING","self",81],["T_DOUBLE_COLON","::",81],["T_STRING","TYPE_SYSTEM_SNAPSHOT",81],",",["T_WHITESPACE","\n            ",81],["T_STRING","self",82],["T_DOUBLE_COLON","::",82],["T_STRING","TYPE_SNAPSHOT_WITHOUT_MEDIA",82],",",["T_WHITESPACE","\n            ",82],["T_STRING","self",83],["T_DOUBLE_COLON","::",83],["T_STRING","TYPE_MEDIA",83],["T_WHITESPACE","\n        ",83],")",";",["T_WHITESPACE","\n    ",84],"}",["T_WHITESPACE","\n\n    ",85],["T_DOC_COMMENT","\/**\n     * Get default backup type value\n     *\n     * @return string\n     *\/",87],["T_WHITESPACE","\n    ",91],["T_PUBLIC","public",92],["T_WHITESPACE"," ",92],["T_FUNCTION","function",92],["T_WHITESPACE"," ",92],["T_STRING","getDefaultBackupType",92],"(",")",["T_WHITESPACE","\n    ",92],"{",["T_WHITESPACE","\n        ",93],["T_RETURN","return",94],["T_WHITESPACE"," ",94],["T_STRING","self",94],["T_DOUBLE_COLON","::",94],["T_STRING","TYPE_DB",94],";",["T_WHITESPACE","\n    ",94],"}",["T_WHITESPACE","\n\n    ",95],["T_DOC_COMMENT","\/**\n     * Get directory path where backups stored\n     *\n     * @return string\n     *\/",97],["T_WHITESPACE","\n    ",101],["T_PUBLIC","public",102],["T_WHITESPACE"," ",102],["T_FUNCTION","function",102],["T_WHITESPACE"," ",102],["T_STRING","getBackupsDir",102],"(",")",["T_WHITESPACE","\n    ",102],"{",["T_WHITESPACE","\n        ",103],["T_RETURN","return",104],["T_WHITESPACE"," ",104],["T_STRING","Mage",104],["T_DOUBLE_COLON","::",104],["T_STRING","getBaseDir",104],"(",["T_CONSTANT_ENCAPSED_STRING","'var'",104],")",["T_WHITESPACE"," ",104],".",["T_WHITESPACE"," ",104],["T_STRING","DS",104],["T_WHITESPACE"," ",104],".",["T_WHITESPACE"," ",104],["T_CONSTANT_ENCAPSED_STRING","'backups'",104],";",["T_WHITESPACE","\n    ",104],"}",["T_WHITESPACE","\n\n    ",105],["T_DOC_COMMENT","\/**\n     * Get backup file extension by backup type\n     *\n     * @param string $type\n     * @return string\n     *\/",107],["T_WHITESPACE","\n    ",112],["T_PUBLIC","public",113],["T_WHITESPACE"," ",113],["T_FUNCTION","function",113],["T_WHITESPACE"," ",113],["T_STRING","getExtensionByType",113],"(",["T_VARIABLE","$type",113],")",["T_WHITESPACE","\n    ",113],"{",["T_WHITESPACE","\n        ",114],["T_VARIABLE","$extensions",115],["T_WHITESPACE"," ",115],"=",["T_WHITESPACE"," ",115],["T_VARIABLE","$this",115],["T_OBJECT_OPERATOR","->",115],["T_STRING","getExtensions",115],"(",")",";",["T_WHITESPACE","\n        ",115],["T_RETURN","return",116],["T_WHITESPACE"," ",116],["T_ISSET","isset",116],"(",["T_VARIABLE","$extensions",116],"[",["T_VARIABLE","$type",116],"]",")",["T_WHITESPACE"," ",116],"?",["T_WHITESPACE"," ",116],["T_VARIABLE","$extensions",116],"[",["T_VARIABLE","$type",116],"]",["T_WHITESPACE"," ",116],":",["T_WHITESPACE"," ",116],["T_CONSTANT_ENCAPSED_STRING","''",116],";",["T_WHITESPACE","\n    ",116],"}",["T_WHITESPACE","\n\n    ",117],["T_DOC_COMMENT","\/**\n     * Get all types to extensions map\n     *\n     * @return array\n     *\/",119],["T_WHITESPACE","\n    ",123],["T_PUBLIC","public",124],["T_WHITESPACE"," ",124],["T_FUNCTION","function",124],["T_WHITESPACE"," ",124],["T_STRING","getExtensions",124],"(",")",["T_WHITESPACE","\n    ",124],"{",["T_WHITESPACE","\n        ",125],["T_RETURN","return",126],["T_WHITESPACE"," ",126],["T_ARRAY","array",126],"(",["T_WHITESPACE","\n            ",126],["T_STRING","self",127],["T_DOUBLE_COLON","::",127],["T_STRING","TYPE_SYSTEM_SNAPSHOT",127],["T_WHITESPACE"," ",127],["T_DOUBLE_ARROW","=>",127],["T_WHITESPACE"," ",127],["T_CONSTANT_ENCAPSED_STRING","'tgz'",127],",",["T_WHITESPACE","\n            ",127],["T_STRING","self",128],["T_DOUBLE_COLON","::",128],["T_STRING","TYPE_SNAPSHOT_WITHOUT_MEDIA",128],["T_WHITESPACE"," ",128],["T_DOUBLE_ARROW","=>",128],["T_WHITESPACE"," ",128],["T_CONSTANT_ENCAPSED_STRING","'tgz'",128],",",["T_WHITESPACE","\n            ",128],["T_STRING","self",129],["T_DOUBLE_COLON","::",129],["T_STRING","TYPE_MEDIA",129],["T_WHITESPACE"," ",129],["T_DOUBLE_ARROW","=>",129],["T_WHITESPACE"," ",129],["T_CONSTANT_ENCAPSED_STRING","'tgz'",129],",",["T_WHITESPACE","\n            ",129],["T_STRING","self",130],["T_DOUBLE_COLON","::",130],["T_STRING","TYPE_DB",130],["T_WHITESPACE"," ",130],["T_DOUBLE_ARROW","=>",130],["T_WHITESPACE"," ",130],["T_CONSTANT_ENCAPSED_STRING","'gz'",130],["T_WHITESPACE","\n        ",130],")",";",["T_WHITESPACE","\n    ",131],"}",["T_WHITESPACE","\n\n    ",132],["T_DOC_COMMENT","\/**\n     * Generate backup download name\n     *\n     * @param Mage_Backup_Model_Backup $backup\n     * @return string\n     *\/",134],["T_WHITESPACE","\n    ",139],["T_PUBLIC","public",140],["T_WHITESPACE"," ",140],["T_FUNCTION","function",140],["T_WHITESPACE"," ",140],["T_STRING","generateBackupDownloadName",140],"(",["T_STRING","Mage_Backup_Model_Backup",140],["T_WHITESPACE"," ",140],["T_VARIABLE","$backup",140],")",["T_WHITESPACE","\n    ",140],"{",["T_WHITESPACE","\n        ",141],["T_VARIABLE","$additionalExtension",142],["T_WHITESPACE"," ",142],"=",["T_WHITESPACE"," ",142],["T_VARIABLE","$backup",142],["T_OBJECT_OPERATOR","->",142],["T_STRING","getType",142],"(",")",["T_WHITESPACE"," ",142],["T_IS_EQUAL","==",142],["T_WHITESPACE"," ",142],["T_STRING","self",142],["T_DOUBLE_COLON","::",142],["T_STRING","TYPE_DB",142],["T_WHITESPACE"," ",142],"?",["T_WHITESPACE"," ",142],["T_CONSTANT_ENCAPSED_STRING","'.sql'",142],["T_WHITESPACE"," ",142],":",["T_WHITESPACE"," ",142],["T_CONSTANT_ENCAPSED_STRING","''",142],";",["T_WHITESPACE","\n        ",142],["T_RETURN","return",143],["T_WHITESPACE"," ",143],["T_VARIABLE","$backup",143],["T_OBJECT_OPERATOR","->",143],["T_STRING","getType",143],"(",")",["T_WHITESPACE"," ",143],".",["T_WHITESPACE"," ",143],["T_CONSTANT_ENCAPSED_STRING","'-'",143],["T_WHITESPACE"," ",143],".",["T_WHITESPACE"," ",143],["T_STRING","date",143],"(",["T_CONSTANT_ENCAPSED_STRING","'YmdHis'",143],",",["T_WHITESPACE"," ",143],["T_VARIABLE","$backup",143],["T_OBJECT_OPERATOR","->",143],["T_STRING","getTime",143],"(",")",")",["T_WHITESPACE"," ",143],".",["T_WHITESPACE"," ",143],["T_VARIABLE","$additionalExtension",143],["T_WHITESPACE"," ",143],".",["T_WHITESPACE"," ",143],["T_CONSTANT_ENCAPSED_STRING","'.'",143],["T_WHITESPACE","\n            ",143],".",["T_WHITESPACE"," ",144],["T_VARIABLE","$this",144],["T_OBJECT_OPERATOR","->",144],["T_STRING","getExtensionByType",144],"(",["T_VARIABLE","$backup",144],["T_OBJECT_OPERATOR","->",144],["T_STRING","getType",144],"(",")",")",";",["T_WHITESPACE","\n    ",144],"}",["T_WHITESPACE","\n\n    ",145],["T_DOC_COMMENT","\/**\n     * Check Permission for Rollback\n     *\n     * @return boolean\n     *\/",147],["T_WHITESPACE","\n    ",151],["T_PUBLIC","public",152],["T_WHITESPACE"," ",152],["T_FUNCTION","function",152],["T_WHITESPACE"," ",152],["T_STRING","isRollbackAllowed",152],"(",")","{",["T_WHITESPACE","\n        ",152],["T_RETURN","return",153],["T_WHITESPACE"," ",153],["T_STRING","Mage",153],["T_DOUBLE_COLON","::",153],["T_STRING","getSingleton",153],"(",["T_CONSTANT_ENCAPSED_STRING","'admin\/session'",153],")",["T_OBJECT_OPERATOR","->",153],["T_STRING","isAllowed",153],"(",["T_CONSTANT_ENCAPSED_STRING","'system\/tools\/backup\/rollback'",153],["T_WHITESPACE"," ",153],")",";",["T_WHITESPACE","\n    ",153],"}",["T_WHITESPACE","\n\n    ",154],["T_DOC_COMMENT","\/**\n     * Get paths that should be ignored when creating system snapshots\n     *\n     * @return array\n     *\/",156],["T_WHITESPACE","\n    ",160],["T_PUBLIC","public",161],["T_WHITESPACE"," ",161],["T_FUNCTION","function",161],["T_WHITESPACE"," ",161],["T_STRING","getBackupIgnorePaths",161],"(",")",["T_WHITESPACE","\n    ",161],"{",["T_WHITESPACE","\n        ",162],["T_RETURN","return",163],["T_WHITESPACE"," ",163],["T_ARRAY","array",163],"(",["T_WHITESPACE","\n            ",163],["T_CONSTANT_ENCAPSED_STRING","'.svn'",164],",",["T_WHITESPACE","\n            ",164],["T_CONSTANT_ENCAPSED_STRING","'maintenance.flag'",165],",",["T_WHITESPACE","\n            ",165],["T_STRING","Mage",166],["T_DOUBLE_COLON","::",166],["T_STRING","getBaseDir",166],"(",["T_CONSTANT_ENCAPSED_STRING","'var'",166],")",["T_WHITESPACE"," ",166],".",["T_WHITESPACE"," ",166],["T_STRING","DS",166],["T_WHITESPACE"," ",166],".",["T_WHITESPACE"," ",166],["T_CONSTANT_ENCAPSED_STRING","'session'",166],",",["T_WHITESPACE","\n            ",166],["T_STRING","Mage",167],["T_DOUBLE_COLON","::",167],["T_STRING","getBaseDir",167],"(",["T_CONSTANT_ENCAPSED_STRING","'var'",167],")",["T_WHITESPACE"," ",167],".",["T_WHITESPACE"," ",167],["T_STRING","DS",167],["T_WHITESPACE"," ",167],".",["T_WHITESPACE"," ",167],["T_CONSTANT_ENCAPSED_STRING","'cache'",167],",",["T_WHITESPACE","\n            ",167],["T_STRING","Mage",168],["T_DOUBLE_COLON","::",168],["T_STRING","getBaseDir",168],"(",["T_CONSTANT_ENCAPSED_STRING","'var'",168],")",["T_WHITESPACE"," ",168],".",["T_WHITESPACE"," ",168],["T_STRING","DS",168],["T_WHITESPACE"," ",168],".",["T_WHITESPACE"," ",168],["T_CONSTANT_ENCAPSED_STRING","'full_page_cache'",168],",",["T_WHITESPACE","\n            ",168],["T_STRING","Mage",169],["T_DOUBLE_COLON","::",169],["T_STRING","getBaseDir",169],"(",["T_CONSTANT_ENCAPSED_STRING","'var'",169],")",["T_WHITESPACE"," ",169],".",["T_WHITESPACE"," ",169],["T_STRING","DS",169],["T_WHITESPACE"," ",169],".",["T_WHITESPACE"," ",169],["T_CONSTANT_ENCAPSED_STRING","'locks'",169],",",["T_WHITESPACE","\n            ",169],["T_STRING","Mage",170],["T_DOUBLE_COLON","::",170],["T_STRING","getBaseDir",170],"(",["T_CONSTANT_ENCAPSED_STRING","'var'",170],")",["T_WHITESPACE"," ",170],".",["T_WHITESPACE"," ",170],["T_STRING","DS",170],["T_WHITESPACE"," ",170],".",["T_WHITESPACE"," ",170],["T_CONSTANT_ENCAPSED_STRING","'log'",170],",",["T_WHITESPACE","\n            ",170],["T_STRING","Mage",171],["T_DOUBLE_COLON","::",171],["T_STRING","getBaseDir",171],"(",["T_CONSTANT_ENCAPSED_STRING","'var'",171],")",["T_WHITESPACE"," ",171],".",["T_WHITESPACE"," ",171],["T_STRING","DS",171],["T_WHITESPACE"," ",171],".",["T_WHITESPACE"," ",171],["T_CONSTANT_ENCAPSED_STRING","'report'",171],["T_WHITESPACE","\n        ",171],")",";",["T_WHITESPACE","\n    ",172],"}",["T_WHITESPACE","\n\n    ",173],["T_DOC_COMMENT","\/**\n     * Get paths that should be ignored when rolling back system snapshots\n     *\n     * @return array\n     *\/",175],["T_WHITESPACE","\n    ",179],["T_PUBLIC","public",180],["T_WHITESPACE"," ",180],["T_FUNCTION","function",180],["T_WHITESPACE"," ",180],["T_STRING","getRollbackIgnorePaths",180],"(",")",["T_WHITESPACE","\n    ",180],"{",["T_WHITESPACE","\n        ",181],["T_RETURN","return",182],["T_WHITESPACE"," ",182],["T_ARRAY","array",182],"(",["T_WHITESPACE","\n            ",182],["T_CONSTANT_ENCAPSED_STRING","'.svn'",183],",",["T_WHITESPACE","\n            ",183],["T_CONSTANT_ENCAPSED_STRING","'maintenance.flag'",184],",",["T_WHITESPACE","\n            ",184],["T_STRING","Mage",185],["T_DOUBLE_COLON","::",185],["T_STRING","getBaseDir",185],"(",["T_CONSTANT_ENCAPSED_STRING","'var'",185],")",["T_WHITESPACE"," ",185],".",["T_WHITESPACE"," ",185],["T_STRING","DS",185],["T_WHITESPACE"," ",185],".",["T_WHITESPACE"," ",185],["T_CONSTANT_ENCAPSED_STRING","'session'",185],",",["T_WHITESPACE","\n            ",185],["T_STRING","Mage",186],["T_DOUBLE_COLON","::",186],["T_STRING","getBaseDir",186],"(",["T_CONSTANT_ENCAPSED_STRING","'var'",186],")",["T_WHITESPACE"," ",186],".",["T_WHITESPACE"," ",186],["T_STRING","DS",186],["T_WHITESPACE"," ",186],".",["T_WHITESPACE"," ",186],["T_CONSTANT_ENCAPSED_STRING","'locks'",186],",",["T_WHITESPACE","\n            ",186],["T_STRING","Mage",187],["T_DOUBLE_COLON","::",187],["T_STRING","getBaseDir",187],"(",["T_CONSTANT_ENCAPSED_STRING","'var'",187],")",["T_WHITESPACE"," ",187],".",["T_WHITESPACE"," ",187],["T_STRING","DS",187],["T_WHITESPACE"," ",187],".",["T_WHITESPACE"," ",187],["T_CONSTANT_ENCAPSED_STRING","'log'",187],",",["T_WHITESPACE","\n            ",187],["T_STRING","Mage",188],["T_DOUBLE_COLON","::",188],["T_STRING","getBaseDir",188],"(",["T_CONSTANT_ENCAPSED_STRING","'var'",188],")",["T_WHITESPACE"," ",188],".",["T_WHITESPACE"," ",188],["T_STRING","DS",188],["T_WHITESPACE"," ",188],".",["T_WHITESPACE"," ",188],["T_CONSTANT_ENCAPSED_STRING","'report'",188],",",["T_WHITESPACE","\n            ",188],["T_STRING","Mage",189],["T_DOUBLE_COLON","::",189],["T_STRING","getBaseDir",189],"(",["T_CONSTANT_ENCAPSED_STRING","'app'",189],")",["T_WHITESPACE"," ",189],".",["T_WHITESPACE"," ",189],["T_STRING","DS",189],["T_WHITESPACE"," ",189],".",["T_WHITESPACE"," ",189],["T_CONSTANT_ENCAPSED_STRING","'Mage.php'",189],",",["T_WHITESPACE","\n            ",189],["T_STRING","Mage",190],["T_DOUBLE_COLON","::",190],["T_STRING","getBaseDir",190],"(",")",["T_WHITESPACE"," ",190],".",["T_WHITESPACE"," ",190],["T_STRING","DS",190],["T_WHITESPACE"," ",190],".",["T_WHITESPACE"," ",190],["T_CONSTANT_ENCAPSED_STRING","'errors'",190],",",["T_WHITESPACE","\n            ",190],["T_STRING","Mage",191],["T_DOUBLE_COLON","::",191],["T_STRING","getBaseDir",191],"(",")",["T_WHITESPACE"," ",191],".",["T_WHITESPACE"," ",191],["T_STRING","DS",191],["T_WHITESPACE"," ",191],".",["T_WHITESPACE"," ",191],["T_CONSTANT_ENCAPSED_STRING","'index.php'",191],["T_WHITESPACE","\n        ",191],")",";",["T_WHITESPACE","\n    ",192],"}",["T_WHITESPACE","\n\n    ",193],["T_DOC_COMMENT","\/**\n     * Put store into maintenance mode\n     *\n     * @return bool\n     *\/",195],["T_WHITESPACE","\n    ",199],["T_PUBLIC","public",200],["T_WHITESPACE"," ",200],["T_FUNCTION","function",200],["T_WHITESPACE"," ",200],["T_STRING","turnOnMaintenanceMode",200],"(",")",["T_WHITESPACE","\n    ",200],"{",["T_WHITESPACE","\n        ",201],["T_VARIABLE","$maintenanceFlagFile",202],["T_WHITESPACE"," ",202],"=",["T_WHITESPACE"," ",202],["T_VARIABLE","$this",202],["T_OBJECT_OPERATOR","->",202],["T_STRING","getMaintenanceFlagFilePath",202],"(",")",";",["T_WHITESPACE","\n        ",202],["T_VARIABLE","$result",203],["T_WHITESPACE"," ",203],"=",["T_WHITESPACE"," ",203],["T_STRING","file_put_contents",203],"(",["T_VARIABLE","$maintenanceFlagFile",203],",",["T_WHITESPACE"," ",203],["T_CONSTANT_ENCAPSED_STRING","'maintenance'",203],")",";",["T_WHITESPACE","\n\n        ",203],["T_RETURN","return",205],["T_WHITESPACE"," ",205],["T_VARIABLE","$result",205],["T_WHITESPACE"," ",205],["T_IS_NOT_IDENTICAL","!==",205],["T_WHITESPACE"," ",205],["T_STRING","false",205],";",["T_WHITESPACE","\n    ",205],"}",["T_WHITESPACE","\n\n    ",206],["T_DOC_COMMENT","\/**\n     * Turn off store maintenance mode\n     *\/",208],["T_WHITESPACE","\n    ",210],["T_PUBLIC","public",211],["T_WHITESPACE"," ",211],["T_FUNCTION","function",211],["T_WHITESPACE"," ",211],["T_STRING","turnOffMaintenanceMode",211],"(",")",["T_WHITESPACE","\n    ",211],"{",["T_WHITESPACE","\n        ",212],["T_VARIABLE","$maintenanceFlagFile",213],["T_WHITESPACE"," ",213],"=",["T_WHITESPACE"," ",213],["T_VARIABLE","$this",213],["T_OBJECT_OPERATOR","->",213],["T_STRING","getMaintenanceFlagFilePath",213],"(",")",";",["T_WHITESPACE","\n        ",213],"@",["T_STRING","unlink",214],"(",["T_VARIABLE","$maintenanceFlagFile",214],")",";",["T_WHITESPACE","\n    ",214],"}",["T_WHITESPACE","\n\n    ",215],["T_DOC_COMMENT","\/**\n     * Get backup create success message by backup type\n     *\n     * @param string $type\n     * @return string\n     *\/",217],["T_WHITESPACE","\n    ",222],["T_PUBLIC","public",223],["T_WHITESPACE"," ",223],["T_FUNCTION","function",223],["T_WHITESPACE"," ",223],["T_STRING","getCreateSuccessMessageByType",223],"(",["T_VARIABLE","$type",223],")",["T_WHITESPACE","\n    ",223],"{",["T_WHITESPACE","\n        ",224],["T_VARIABLE","$messagesMap",225],["T_WHITESPACE"," ",225],"=",["T_WHITESPACE"," ",225],["T_ARRAY","array",225],"(",["T_WHITESPACE","\n            ",225],["T_STRING","self",226],["T_DOUBLE_COLON","::",226],["T_STRING","TYPE_SYSTEM_SNAPSHOT",226],["T_WHITESPACE"," ",226],["T_DOUBLE_ARROW","=>",226],["T_WHITESPACE"," ",226],["T_VARIABLE","$this",226],["T_OBJECT_OPERATOR","->",226],["T_STRING","__",226],"(",["T_CONSTANT_ENCAPSED_STRING","'The system backup has been created.'",226],")",",",["T_WHITESPACE","\n            ",226],["T_STRING","self",227],["T_DOUBLE_COLON","::",227],["T_STRING","TYPE_SNAPSHOT_WITHOUT_MEDIA",227],["T_WHITESPACE"," ",227],["T_DOUBLE_ARROW","=>",227],["T_WHITESPACE"," ",227],["T_VARIABLE","$this",227],["T_OBJECT_OPERATOR","->",227],["T_STRING","__",227],"(",["T_CONSTANT_ENCAPSED_STRING","'The system (excluding Media) backup has been created.'",227],")",",",["T_WHITESPACE","\n            ",227],["T_STRING","self",228],["T_DOUBLE_COLON","::",228],["T_STRING","TYPE_MEDIA",228],["T_WHITESPACE"," ",228],["T_DOUBLE_ARROW","=>",228],["T_WHITESPACE"," ",228],["T_VARIABLE","$this",228],["T_OBJECT_OPERATOR","->",228],["T_STRING","__",228],"(",["T_CONSTANT_ENCAPSED_STRING","'The database and media backup has been created.'",228],")",",",["T_WHITESPACE","\n            ",228],["T_STRING","self",229],["T_DOUBLE_COLON","::",229],["T_STRING","TYPE_DB",229],["T_WHITESPACE"," ",229],["T_DOUBLE_ARROW","=>",229],["T_WHITESPACE"," ",229],["T_VARIABLE","$this",229],["T_OBJECT_OPERATOR","->",229],["T_STRING","__",229],"(",["T_CONSTANT_ENCAPSED_STRING","'The database backup has been created.'",229],")",["T_WHITESPACE","\n        ",229],")",";",["T_WHITESPACE","\n\n        ",230],["T_IF","if",232],["T_WHITESPACE"," ",232],"(","!",["T_ISSET","isset",232],"(",["T_VARIABLE","$messagesMap",232],"[",["T_VARIABLE","$type",232],"]",")",")",["T_WHITESPACE"," ",232],"{",["T_WHITESPACE","\n            ",232],["T_RETURN","return",233],";",["T_WHITESPACE","\n        ",233],"}",["T_WHITESPACE","\n\n        ",234],["T_RETURN","return",236],["T_WHITESPACE"," ",236],["T_VARIABLE","$messagesMap",236],"[",["T_VARIABLE","$type",236],"]",";",["T_WHITESPACE","\n    ",236],"}",["T_WHITESPACE","\n\n    ",237],["T_DOC_COMMENT","\/**\n     * Get path to maintenance flag file\n     *\n     * @return string\n     *\/",239],["T_WHITESPACE","\n    ",243],["T_PROTECTED","protected",244],["T_WHITESPACE"," ",244],["T_FUNCTION","function",244],["T_WHITESPACE"," ",244],["T_STRING","getMaintenanceFlagFilePath",244],"(",")",["T_WHITESPACE","\n    ",244],"{",["T_WHITESPACE","\n        ",245],["T_RETURN","return",246],["T_WHITESPACE"," ",246],["T_STRING","Mage",246],["T_DOUBLE_COLON","::",246],["T_STRING","getBaseDir",246],"(",")",["T_WHITESPACE"," ",246],".",["T_WHITESPACE"," ",246],["T_STRING","DS",246],["T_WHITESPACE"," ",246],".",["T_WHITESPACE"," ",246],["T_CONSTANT_ENCAPSED_STRING","'maintenance.flag'",246],";",["T_WHITESPACE","\n    ",246],"}",["T_WHITESPACE","\n\n    ",247],["T_DOC_COMMENT","\/**\n     * Invalidate Cache\n     * @return Mage_Backup_Helper_Data\n     *\/",249],["T_WHITESPACE","\n    ",252],["T_PUBLIC","public",253],["T_WHITESPACE"," ",253],["T_FUNCTION","function",253],["T_WHITESPACE"," ",253],["T_STRING","invalidateCache",253],"(",")",["T_WHITESPACE","\n    ",253],"{",["T_WHITESPACE","\n        ",254],["T_IF","if",255],["T_WHITESPACE"," ",255],"(",["T_VARIABLE","$cacheTypesNode",255],["T_WHITESPACE"," ",255],"=",["T_WHITESPACE"," ",255],["T_STRING","Mage",255],["T_DOUBLE_COLON","::",255],["T_STRING","getConfig",255],"(",")",["T_OBJECT_OPERATOR","->",255],["T_STRING","getNode",255],"(",["T_STRING","Mage_Core_Model_Cache",255],["T_DOUBLE_COLON","::",255],["T_STRING","XML_PATH_TYPES",255],")",")",["T_WHITESPACE"," ",255],"{",["T_WHITESPACE","\n            ",255],["T_VARIABLE","$cacheTypesList",256],["T_WHITESPACE"," ",256],"=",["T_WHITESPACE"," ",256],["T_STRING","array_keys",256],"(",["T_VARIABLE","$cacheTypesNode",256],["T_OBJECT_OPERATOR","->",256],["T_STRING","asArray",256],"(",")",")",";",["T_WHITESPACE","\n            ",256],["T_STRING","Mage",257],["T_DOUBLE_COLON","::",257],["T_STRING","app",257],"(",")",["T_OBJECT_OPERATOR","->",257],["T_STRING","getCacheInstance",257],"(",")",["T_OBJECT_OPERATOR","->",257],["T_STRING","invalidateType",257],"(",["T_VARIABLE","$cacheTypesList",257],")",";",["T_WHITESPACE","\n        ",257],"}",["T_WHITESPACE","\n        ",258],["T_RETURN","return",259],["T_WHITESPACE"," ",259],["T_VARIABLE","$this",259],";",["T_WHITESPACE","\n    ",259],"}",["T_WHITESPACE","\n\n    ",260],["T_DOC_COMMENT","\/**\n     * Invalidate Indexer\n     *\n     * @return Mage_Backup_Helper_Data\n     *\/",262],["T_WHITESPACE","\n    ",266],["T_PUBLIC","public",267],["T_WHITESPACE"," ",267],["T_FUNCTION","function",267],["T_WHITESPACE"," ",267],["T_STRING","invalidateIndexer",267],"(",")",["T_WHITESPACE","\n    ",267],"{",["T_WHITESPACE","\n        ",268],["T_FOREACH","foreach",269],["T_WHITESPACE"," ",269],"(",["T_STRING","Mage",269],["T_DOUBLE_COLON","::",269],["T_STRING","getResourceModel",269],"(",["T_CONSTANT_ENCAPSED_STRING","'index\/process_collection'",269],")",["T_WHITESPACE"," ",269],["T_AS","as",269],["T_WHITESPACE"," ",269],["T_VARIABLE","$process",269],")","{",["T_WHITESPACE","\n            ",269],["T_VARIABLE","$process",270],["T_OBJECT_OPERATOR","->",270],["T_STRING","changeStatus",270],"(",["T_STRING","Mage_Index_Model_Process",270],["T_DOUBLE_COLON","::",270],["T_STRING","STATUS_REQUIRE_REINDEX",270],")",";",["T_WHITESPACE","\n        ",270],"}",["T_WHITESPACE","\n        ",271],["T_RETURN","return",272],["T_WHITESPACE"," ",272],["T_VARIABLE","$this",272],";",["T_WHITESPACE","\n    ",272],"}",["T_WHITESPACE","\n\n    ",273],["T_DOC_COMMENT","\/**\n     * Creates backup's display name from it's name\n     *\n     * @param string $name\n     * @return string\n     *\/",275],["T_WHITESPACE","\n    ",280],["T_PUBLIC","public",281],["T_WHITESPACE"," ",281],["T_FUNCTION","function",281],["T_WHITESPACE"," ",281],["T_STRING","nameToDisplayName",281],"(",["T_VARIABLE","$name",281],")",["T_WHITESPACE","\n    ",281],"{",["T_WHITESPACE","\n        ",282],["T_RETURN","return",283],["T_WHITESPACE"," ",283],["T_STRING","str_replace",283],"(",["T_CONSTANT_ENCAPSED_STRING","'_'",283],",",["T_WHITESPACE"," ",283],["T_CONSTANT_ENCAPSED_STRING","' '",283],",",["T_WHITESPACE"," ",283],["T_VARIABLE","$name",283],")",";",["T_WHITESPACE","\n    ",283],"}",["T_WHITESPACE","\n\n    ",284],["T_DOC_COMMENT","\/**\n     * Extracts information from backup's filename\n     *\n     * @param string $filename\n     * @return Varien_Object\n     *\/",286],["T_WHITESPACE","\n    ",291],["T_PUBLIC","public",292],["T_WHITESPACE"," ",292],["T_FUNCTION","function",292],["T_WHITESPACE"," ",292],["T_STRING","extractDataFromFilename",292],"(",["T_VARIABLE","$filename",292],")",["T_WHITESPACE","\n    ",292],"{",["T_WHITESPACE","\n        ",293],["T_VARIABLE","$extensions",294],["T_WHITESPACE"," ",294],"=",["T_WHITESPACE"," ",294],["T_VARIABLE","$this",294],["T_OBJECT_OPERATOR","->",294],["T_STRING","getExtensions",294],"(",")",";",["T_WHITESPACE","\n\n        ",294],["T_VARIABLE","$filenameWithoutExtension",296],["T_WHITESPACE"," ",296],"=",["T_WHITESPACE"," ",296],["T_VARIABLE","$filename",296],";",["T_WHITESPACE","\n\n        ",296],["T_FOREACH","foreach",298],["T_WHITESPACE"," ",298],"(",["T_VARIABLE","$extensions",298],["T_WHITESPACE"," ",298],["T_AS","as",298],["T_WHITESPACE"," ",298],["T_VARIABLE","$extension",298],")",["T_WHITESPACE"," ",298],"{",["T_WHITESPACE","\n            ",298],["T_VARIABLE","$filenameWithoutExtension",299],["T_WHITESPACE"," ",299],"=",["T_WHITESPACE"," ",299],["T_STRING","preg_replace",299],"(",["T_CONSTANT_ENCAPSED_STRING","'\/'",299],["T_WHITESPACE"," ",299],".",["T_WHITESPACE"," ",299],["T_STRING","preg_quote",299],"(",["T_VARIABLE","$extension",299],",",["T_WHITESPACE"," ",299],["T_CONSTANT_ENCAPSED_STRING","'\/'",299],")",["T_WHITESPACE"," ",299],".",["T_WHITESPACE"," ",299],["T_CONSTANT_ENCAPSED_STRING","'$\/'",299],",",["T_WHITESPACE"," ",299],["T_CONSTANT_ENCAPSED_STRING","''",299],",",["T_WHITESPACE","\n                ",299],["T_VARIABLE","$filenameWithoutExtension",300],["T_WHITESPACE","\n            ",300],")",";",["T_WHITESPACE","\n        ",301],"}",["T_WHITESPACE","\n\n        ",302],["T_VARIABLE","$filenameWithoutExtension",304],["T_WHITESPACE"," ",304],"=",["T_WHITESPACE"," ",304],["T_STRING","substr",304],"(",["T_VARIABLE","$filenameWithoutExtension",304],",",["T_WHITESPACE"," ",304],["T_LNUMBER","0",304],",",["T_WHITESPACE"," ",304],["T_STRING","strrpos",304],"(",["T_VARIABLE","$filenameWithoutExtension",304],",",["T_WHITESPACE"," ",304],["T_CONSTANT_ENCAPSED_STRING","\".\"",304],")",")",";",["T_WHITESPACE","\n\n        ",304],["T_LIST","list",306],"(",["T_VARIABLE","$time",306],",",["T_WHITESPACE"," ",306],["T_VARIABLE","$type",306],")",["T_WHITESPACE"," ",306],"=",["T_WHITESPACE"," ",306],["T_STRING","explode",306],"(",["T_CONSTANT_ENCAPSED_STRING","\"_\"",306],",",["T_WHITESPACE"," ",306],["T_VARIABLE","$filenameWithoutExtension",306],")",";",["T_WHITESPACE","\n\n        ",306],["T_VARIABLE","$name",308],["T_WHITESPACE"," ",308],"=",["T_WHITESPACE"," ",308],["T_STRING","str_replace",308],"(",["T_VARIABLE","$time",308],["T_WHITESPACE"," ",308],".",["T_WHITESPACE"," ",308],["T_CONSTANT_ENCAPSED_STRING","'_'",308],["T_WHITESPACE"," ",308],".",["T_WHITESPACE"," ",308],["T_VARIABLE","$type",308],",",["T_WHITESPACE"," ",308],["T_CONSTANT_ENCAPSED_STRING","''",308],",",["T_WHITESPACE"," ",308],["T_VARIABLE","$filenameWithoutExtension",308],")",";",["T_WHITESPACE","\n\n        ",308],["T_IF","if",310],["T_WHITESPACE"," ",310],"(","!",["T_EMPTY","empty",310],"(",["T_VARIABLE","$name",310],")",")",["T_WHITESPACE"," ",310],"{",["T_WHITESPACE","\n            ",310],["T_VARIABLE","$name",311],["T_WHITESPACE"," ",311],"=",["T_WHITESPACE"," ",311],["T_STRING","substr",311],"(",["T_VARIABLE","$name",311],",",["T_WHITESPACE"," ",311],["T_LNUMBER","1",311],")",";",["T_WHITESPACE","\n        ",311],"}",["T_WHITESPACE","\n\n        ",312],["T_VARIABLE","$result",314],["T_WHITESPACE"," ",314],"=",["T_WHITESPACE"," ",314],["T_NEW","new",314],["T_WHITESPACE"," ",314],["T_STRING","Varien_Object",314],"(",")",";",["T_WHITESPACE","\n        ",314],["T_VARIABLE","$result",315],["T_OBJECT_OPERATOR","->",315],["T_STRING","addData",315],"(",["T_ARRAY","array",315],"(",["T_WHITESPACE","\n            ",315],["T_CONSTANT_ENCAPSED_STRING","'name'",316],["T_WHITESPACE"," ",316],["T_DOUBLE_ARROW","=>",316],["T_WHITESPACE"," ",316],["T_VARIABLE","$name",316],",",["T_WHITESPACE","\n            ",316],["T_CONSTANT_ENCAPSED_STRING","'type'",317],["T_WHITESPACE"," ",317],["T_DOUBLE_ARROW","=>",317],["T_WHITESPACE"," ",317],["T_VARIABLE","$type",317],",",["T_WHITESPACE","\n            ",317],["T_CONSTANT_ENCAPSED_STRING","'time'",318],["T_WHITESPACE"," ",318],["T_DOUBLE_ARROW","=>",318],["T_WHITESPACE"," ",318],["T_VARIABLE","$time",318],["T_WHITESPACE","\n        ",318],")",")",";",["T_WHITESPACE","\n\n        ",319],["T_RETURN","return",321],["T_WHITESPACE"," ",321],["T_VARIABLE","$result",321],";",["T_WHITESPACE","\n    ",321],"}",["T_WHITESPACE","\n",322],"}",["T_WHITESPACE","\n",323]]
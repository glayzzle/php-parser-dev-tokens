[["T_OPEN_TAG","<?php\n",1],["T_DOC_COMMENT","\/**\n * Magento\n *\n * NOTICE OF LICENSE\n *\n * This source file is subject to the Open Software License (OSL 3.0)\n * that is bundled with this package in the file LICENSE.txt.\n * It is also available through the world-wide-web at this URL:\n * http:\/\/opensource.org\/licenses\/osl-3.0.php\n * If you did not receive a copy of the license and are unable to\n * obtain it through the world-wide-web, please send an email\n * to license@magento.com so we can send you a copy immediately.\n *\n * DISCLAIMER\n *\n * Do not edit or add to this file if you wish to upgrade Magento to newer\n * versions in the future. If you wish to customize Magento for your\n * needs please refer to http:\/\/www.magento.com for more information.\n *\n * @category    Mage\n * @package     Mage_Backup\n * @copyright  Copyright (c) 2006-2016 X.commerce, Inc. and affiliates (http:\/\/www.magento.com)\n * @license    http:\/\/opensource.org\/licenses\/osl-3.0.php  Open Software License (OSL 3.0)\n *\/",2],["T_WHITESPACE","\n\n\n",25],["T_DOC_COMMENT","\/**\n * Database backup resource model\n *\n * @category    Mage\n * @package     Mage_Backup\n * @author      Magento Core Team <core@magentocommerce.com>\n *\/",28],["T_WHITESPACE","\n",34],["T_CLASS","class",35],["T_WHITESPACE"," ",35],["T_STRING","Mage_Backup_Model_Resource_Db",35],["T_WHITESPACE","\n",35],"{",["T_WHITESPACE","\n    ",36],["T_DOC_COMMENT","\/**\n     * Database connection adapter\n     *\n     * @var Varien_Db_Adapter_Pdo_Mysql\n     *\/",37],["T_WHITESPACE","\n    ",41],["T_PROTECTED","protected",42],["T_WHITESPACE"," ",42],["T_VARIABLE","$_write",42],";",["T_WHITESPACE","\n\n    ",42],["T_DOC_COMMENT","\/**\n     * tables Foreign key data array\n     * [tbl_name] = array(create foreign key strings)\n     *\n     * @var array\n     *\/",44],["T_WHITESPACE","\n    ",49],["T_PROTECTED","protected",50],["T_WHITESPACE"," ",50],["T_VARIABLE","$_foreignKeys",50],["T_WHITESPACE","    ",50],"=",["T_WHITESPACE"," ",50],["T_ARRAY","array",50],"(",")",";",["T_WHITESPACE","\n\n    ",50],["T_DOC_COMMENT","\/**\n     * Initialize Backup DB resource model\n     *\n     *\/",52],["T_WHITESPACE","\n    ",55],["T_PUBLIC","public",56],["T_WHITESPACE"," ",56],["T_FUNCTION","function",56],["T_WHITESPACE"," ",56],["T_STRING","__construct",56],"(",")",["T_WHITESPACE","\n    ",56],"{",["T_WHITESPACE","\n        ",57],["T_VARIABLE","$this",58],["T_OBJECT_OPERATOR","->",58],["T_STRING","_write",58],["T_WHITESPACE"," ",58],"=",["T_WHITESPACE"," ",58],["T_STRING","Mage",58],["T_DOUBLE_COLON","::",58],["T_STRING","getSingleton",58],"(",["T_CONSTANT_ENCAPSED_STRING","'core\/resource'",58],")",["T_OBJECT_OPERATOR","->",58],["T_STRING","getConnection",58],"(",["T_CONSTANT_ENCAPSED_STRING","'backup_write'",58],")",";",["T_WHITESPACE","\n    ",58],"}",["T_WHITESPACE","\n\n    ",59],["T_DOC_COMMENT","\/**\n     * Enter description here ...\n     *\n     * @deprecated after 1.4.0.0-alpha2\n     *\n     *\/",61],["T_WHITESPACE","\n    ",66],["T_PUBLIC","public",67],["T_WHITESPACE"," ",67],["T_FUNCTION","function",67],["T_WHITESPACE"," ",67],["T_STRING","crear",67],"(",")",["T_WHITESPACE","\n    ",67],"{",["T_WHITESPACE","\n        ",68],["T_VARIABLE","$this",69],["T_OBJECT_OPERATOR","->",69],["T_STRING","clear",69],"(",")",";",["T_WHITESPACE","\n    ",69],"}",["T_WHITESPACE","\n\n    ",70],["T_DOC_COMMENT","\/**\n     * Clear data\n     *\n     *\/",72],["T_WHITESPACE","\n    ",75],["T_PUBLIC","public",76],["T_WHITESPACE"," ",76],["T_FUNCTION","function",76],["T_WHITESPACE"," ",76],["T_STRING","clear",76],"(",")",["T_WHITESPACE","\n    ",76],"{",["T_WHITESPACE","\n        ",77],["T_VARIABLE","$this",78],["T_OBJECT_OPERATOR","->",78],["T_STRING","_foreignKeys",78],["T_WHITESPACE"," ",78],"=",["T_WHITESPACE"," ",78],["T_ARRAY","array",78],"(",")",";",["T_WHITESPACE","\n    ",78],"}",["T_WHITESPACE","\n\n    ",79],["T_DOC_COMMENT","\/**\n     * Retrieve table list\n     *\n     * @return array\n     *\/",81],["T_WHITESPACE","\n    ",85],["T_PUBLIC","public",86],["T_WHITESPACE"," ",86],["T_FUNCTION","function",86],["T_WHITESPACE"," ",86],["T_STRING","getTables",86],"(",")",["T_WHITESPACE","\n    ",86],"{",["T_WHITESPACE","\n        ",87],["T_RETURN","return",88],["T_WHITESPACE"," ",88],["T_VARIABLE","$this",88],["T_OBJECT_OPERATOR","->",88],["T_STRING","_write",88],["T_OBJECT_OPERATOR","->",88],["T_STRING","listTables",88],"(",")",";",["T_WHITESPACE","\n    ",88],"}",["T_WHITESPACE","\n\n    ",89],["T_DOC_COMMENT","\/**\n     * Retrieve SQL fragment for drop table\n     *\n     * @param string $tableName\n     * @return string\n     *\/",91],["T_WHITESPACE","\n    ",96],["T_PUBLIC","public",97],["T_WHITESPACE"," ",97],["T_FUNCTION","function",97],["T_WHITESPACE"," ",97],["T_STRING","getTableDropSql",97],"(",["T_VARIABLE","$tableName",97],")",["T_WHITESPACE","\n    ",97],"{",["T_WHITESPACE","\n        ",98],["T_RETURN","return",99],["T_WHITESPACE"," ",99],["T_STRING","Mage",99],["T_DOUBLE_COLON","::",99],["T_STRING","getResourceHelper",99],"(",["T_CONSTANT_ENCAPSED_STRING","'backup'",99],")",["T_OBJECT_OPERATOR","->",99],["T_STRING","getTableDropSql",99],"(",["T_VARIABLE","$tableName",99],")",";",["T_WHITESPACE","\n    ",99],"}",["T_WHITESPACE","\n\n    ",100],["T_DOC_COMMENT","\/**\n     * Retrieve SQL fragment for create table\n     *\n     * @param string $tableName\n     * @param bool $withForeignKeys\n     * @return string\n     *\/",102],["T_WHITESPACE","\n    ",108],["T_PUBLIC","public",109],["T_WHITESPACE"," ",109],["T_FUNCTION","function",109],["T_WHITESPACE"," ",109],["T_STRING","getTableCreateSql",109],"(",["T_VARIABLE","$tableName",109],",",["T_WHITESPACE"," ",109],["T_VARIABLE","$withForeignKeys",109],["T_WHITESPACE"," ",109],"=",["T_WHITESPACE"," ",109],["T_STRING","false",109],")",["T_WHITESPACE","\n    ",109],"{",["T_WHITESPACE","\n        ",110],["T_RETURN","return",111],["T_WHITESPACE"," ",111],["T_STRING","Mage",111],["T_DOUBLE_COLON","::",111],["T_STRING","getResourceHelper",111],"(",["T_CONSTANT_ENCAPSED_STRING","'backup'",111],")",["T_OBJECT_OPERATOR","->",111],["T_STRING","getTableCreateSql",111],"(",["T_VARIABLE","$tableName",111],",",["T_WHITESPACE"," ",111],["T_VARIABLE","$withForeignKeys",111],["T_WHITESPACE"," ",111],"=",["T_WHITESPACE"," ",111],["T_STRING","false",111],")",";",["T_WHITESPACE","\n    ",111],"}",["T_WHITESPACE","\n\n    ",112],["T_DOC_COMMENT","\/**\n     * Retrieve foreign keys for table(s)\n     *\n     * @param string|null $tableName\n     * @return string\n     *\/",114],["T_WHITESPACE","\n    ",119],["T_PUBLIC","public",120],["T_WHITESPACE"," ",120],["T_FUNCTION","function",120],["T_WHITESPACE"," ",120],["T_STRING","getTableForeignKeysSql",120],"(",["T_VARIABLE","$tableName",120],["T_WHITESPACE"," ",120],"=",["T_WHITESPACE"," ",120],["T_STRING","null",120],")",["T_WHITESPACE","\n    ",120],"{",["T_WHITESPACE","\n        ",121],["T_VARIABLE","$fkScript",122],["T_WHITESPACE"," ",122],"=",["T_WHITESPACE"," ",122],["T_CONSTANT_ENCAPSED_STRING","''",122],";",["T_WHITESPACE","\n        ",122],["T_IF","if",123],["T_WHITESPACE"," ",123],"(","!",["T_VARIABLE","$tableName",123],")",["T_WHITESPACE"," ",123],"{",["T_WHITESPACE","\n            ",123],["T_VARIABLE","$tables",124],["T_WHITESPACE"," ",124],"=",["T_WHITESPACE"," ",124],["T_VARIABLE","$this",124],["T_OBJECT_OPERATOR","->",124],["T_STRING","getTables",124],"(",")",";",["T_WHITESPACE","\n            ",124],["T_FOREACH","foreach",125],"(",["T_VARIABLE","$tables",125],["T_WHITESPACE"," ",125],["T_AS","as",125],["T_WHITESPACE"," ",125],["T_VARIABLE","$table",125],")",["T_WHITESPACE"," ",125],"{",["T_WHITESPACE","\n                ",125],["T_VARIABLE","$tableFkScript",126],["T_WHITESPACE"," ",126],"=",["T_WHITESPACE"," ",126],["T_STRING","Mage",126],["T_DOUBLE_COLON","::",126],["T_STRING","getResourceHelper",126],"(",["T_CONSTANT_ENCAPSED_STRING","'backup'",126],")",["T_OBJECT_OPERATOR","->",126],["T_STRING","getTableForeignKeysSql",126],"(",["T_VARIABLE","$table",126],")",";",["T_WHITESPACE","\n                ",126],["T_IF","if",127],["T_WHITESPACE"," ",127],"(","!",["T_EMPTY","empty",127],"(",["T_VARIABLE","$tableFkScript",127],")",")",["T_WHITESPACE"," ",127],"{",["T_WHITESPACE","\n                    ",127],["T_VARIABLE","$fkScript",128],["T_WHITESPACE"," ",128],["T_CONCAT_EQUAL",".=",128],["T_WHITESPACE"," ",128],["T_CONSTANT_ENCAPSED_STRING","\"\\n\"",128],["T_WHITESPACE"," ",128],".",["T_WHITESPACE"," ",128],["T_VARIABLE","$tableFkScript",128],";",["T_WHITESPACE","\n                ",128],"}",["T_WHITESPACE","\n            ",129],"}",["T_WHITESPACE","\n        ",130],"}",["T_WHITESPACE"," ",131],["T_ELSE","else",131],["T_WHITESPACE"," ",131],"{",["T_WHITESPACE","\n            ",131],["T_VARIABLE","$fkScript",132],["T_WHITESPACE"," ",132],"=",["T_WHITESPACE"," ",132],["T_VARIABLE","$this",132],["T_OBJECT_OPERATOR","->",132],["T_STRING","getTableForeignKeysSql",132],"(",["T_VARIABLE","$tableName",132],")",";",["T_WHITESPACE","\n        ",132],"}",["T_WHITESPACE","\n        ",133],["T_RETURN","return",134],["T_WHITESPACE"," ",134],["T_VARIABLE","$fkScript",134],";",["T_WHITESPACE","\n    ",134],"}",["T_WHITESPACE","\n\n    ",135],["T_DOC_COMMENT","\/**\n     * Retrieve table status\n     *\n     * @param string $tableName\n     * @return Varien_Object\n     *\/",137],["T_WHITESPACE","\n    ",142],["T_PUBLIC","public",143],["T_WHITESPACE"," ",143],["T_FUNCTION","function",143],["T_WHITESPACE"," ",143],["T_STRING","getTableStatus",143],"(",["T_VARIABLE","$tableName",143],")",["T_WHITESPACE","\n    ",143],"{",["T_WHITESPACE","\n        ",144],["T_VARIABLE","$row",145],["T_WHITESPACE"," ",145],"=",["T_WHITESPACE"," ",145],["T_VARIABLE","$this",145],["T_OBJECT_OPERATOR","->",145],["T_STRING","_write",145],["T_OBJECT_OPERATOR","->",145],["T_STRING","showTableStatus",145],"(",["T_VARIABLE","$tableName",145],")",";",["T_WHITESPACE","\n\n        ",145],["T_IF","if",147],["T_WHITESPACE"," ",147],"(",["T_VARIABLE","$row",147],")",["T_WHITESPACE"," ",147],"{",["T_WHITESPACE","\n            ",147],["T_VARIABLE","$statusObject",148],["T_WHITESPACE"," ",148],"=",["T_WHITESPACE"," ",148],["T_NEW","new",148],["T_WHITESPACE"," ",148],["T_STRING","Varien_Object",148],"(",")",";",["T_WHITESPACE","\n            ",148],["T_VARIABLE","$statusObject",149],["T_OBJECT_OPERATOR","->",149],["T_STRING","setIdFieldName",149],"(",["T_CONSTANT_ENCAPSED_STRING","'name'",149],")",";",["T_WHITESPACE","\n            ",149],["T_FOREACH","foreach",150],["T_WHITESPACE"," ",150],"(",["T_VARIABLE","$row",150],["T_WHITESPACE"," ",150],["T_AS","as",150],["T_WHITESPACE"," ",150],["T_VARIABLE","$field",150],["T_WHITESPACE"," ",150],["T_DOUBLE_ARROW","=>",150],["T_WHITESPACE"," ",150],["T_VARIABLE","$value",150],")",["T_WHITESPACE"," ",150],"{",["T_WHITESPACE","\n                ",150],["T_VARIABLE","$statusObject",151],["T_OBJECT_OPERATOR","->",151],["T_STRING","setData",151],"(",["T_STRING","strtolower",151],"(",["T_VARIABLE","$field",151],")",",",["T_WHITESPACE"," ",151],["T_VARIABLE","$value",151],")",";",["T_WHITESPACE","\n            ",151],"}",["T_WHITESPACE","\n\n            ",152],["T_VARIABLE","$cntRow",154],["T_WHITESPACE"," ",154],"=",["T_WHITESPACE"," ",154],["T_VARIABLE","$this",154],["T_OBJECT_OPERATOR","->",154],["T_STRING","_write",154],["T_OBJECT_OPERATOR","->",154],["T_STRING","fetchRow",154],"(",["T_WHITESPACE","\n                    ",154],["T_VARIABLE","$this",155],["T_OBJECT_OPERATOR","->",155],["T_STRING","_write",155],["T_OBJECT_OPERATOR","->",155],["T_STRING","select",155],"(",")",["T_OBJECT_OPERATOR","->",155],["T_STRING","from",155],"(",["T_VARIABLE","$tableName",155],",",["T_WHITESPACE"," ",155],["T_CONSTANT_ENCAPSED_STRING","'COUNT(1) as rows'",155],")",")",";",["T_WHITESPACE","\n            ",155],["T_VARIABLE","$statusObject",156],["T_OBJECT_OPERATOR","->",156],["T_STRING","setRows",156],"(",["T_VARIABLE","$cntRow",156],"[",["T_CONSTANT_ENCAPSED_STRING","'rows'",156],"]",")",";",["T_WHITESPACE","\n\n            ",156],["T_RETURN","return",158],["T_WHITESPACE"," ",158],["T_VARIABLE","$statusObject",158],";",["T_WHITESPACE","\n        ",158],"}",["T_WHITESPACE","\n\n        ",159],["T_RETURN","return",161],["T_WHITESPACE"," ",161],["T_STRING","false",161],";",["T_WHITESPACE","\n    ",161],"}",["T_WHITESPACE","\n\n    ",162],["T_DOC_COMMENT","\/**\n     * Quote Table Row\n     *\n     * @deprecated\n     *\n     * @param string $tableName\n     * @param array $row\n     * @return string\n     *\/",164],["T_WHITESPACE","\n    ",172],["T_PROTECTED","protected",173],["T_WHITESPACE"," ",173],["T_FUNCTION","function",173],["T_WHITESPACE"," ",173],["T_STRING","_quoteRow",173],"(",["T_VARIABLE","$tableName",173],",",["T_WHITESPACE"," ",173],["T_ARRAY","array",173],["T_WHITESPACE"," ",173],["T_VARIABLE","$row",173],")",["T_WHITESPACE","\n    ",173],"{",["T_WHITESPACE","\n        ",174],["T_RETURN","return",175],["T_WHITESPACE"," ",175],["T_VARIABLE","$row",175],";",["T_WHITESPACE","\n    ",175],"}",["T_WHITESPACE","\n\n    ",176],["T_DOC_COMMENT","\/**\n     * Retrive table partical data SQL insert\n     *\n     * @param string $tableName\n     * @param int $count\n     * @param int $offset\n     * @return string\n     *\/",178],["T_WHITESPACE","\n    ",185],["T_PUBLIC","public",186],["T_WHITESPACE"," ",186],["T_FUNCTION","function",186],["T_WHITESPACE"," ",186],["T_STRING","getTableDataSql",186],"(",["T_VARIABLE","$tableName",186],",",["T_WHITESPACE"," ",186],["T_VARIABLE","$count",186],["T_WHITESPACE"," ",186],"=",["T_WHITESPACE"," ",186],["T_STRING","null",186],",",["T_WHITESPACE"," ",186],["T_VARIABLE","$offset",186],["T_WHITESPACE"," ",186],"=",["T_WHITESPACE"," ",186],["T_STRING","null",186],")",["T_WHITESPACE","\n    ",186],"{",["T_WHITESPACE","\n        ",187],["T_RETURN","return",188],["T_WHITESPACE"," ",188],["T_STRING","Mage",188],["T_DOUBLE_COLON","::",188],["T_STRING","getResourceHelper",188],"(",["T_CONSTANT_ENCAPSED_STRING","'backup'",188],")",["T_OBJECT_OPERATOR","->",188],["T_STRING","getPartInsertSql",188],"(",["T_VARIABLE","$tableName",188],",",["T_WHITESPACE"," ",188],["T_VARIABLE","$count",188],",",["T_WHITESPACE"," ",188],["T_VARIABLE","$offset",188],")",";",["T_WHITESPACE","\n    ",188],"}",["T_WHITESPACE","\n\n    ",189],["T_DOC_COMMENT","\/**\n     * Enter description here...\n     *\n     * @param unknown_type $tableName\n     * @param unknown_type $addDropIfExists\n     * @return unknown\n     *\/",191],["T_WHITESPACE","\n    ",197],["T_PUBLIC","public",198],["T_WHITESPACE"," ",198],["T_FUNCTION","function",198],["T_WHITESPACE"," ",198],["T_STRING","getTableCreateScript",198],"(",["T_VARIABLE","$tableName",198],",",["T_WHITESPACE"," ",198],["T_VARIABLE","$addDropIfExists",198],["T_WHITESPACE"," ",198],"=",["T_WHITESPACE"," ",198],["T_STRING","false",198],")",["T_WHITESPACE","\n    ",198],"{",["T_WHITESPACE","\n        ",199],["T_RETURN","return",200],["T_WHITESPACE"," ",200],["T_STRING","Mage",200],["T_DOUBLE_COLON","::",200],["T_STRING","getResourceHelper",200],"(",["T_CONSTANT_ENCAPSED_STRING","'backup'",200],")",["T_OBJECT_OPERATOR","->",200],["T_STRING","getTableCreateScript",200],"(",["T_VARIABLE","$tableName",200],",",["T_WHITESPACE"," ",200],["T_VARIABLE","$addDropIfExists",200],")",";",";",["T_WHITESPACE","\n    ",200],"}",["T_WHITESPACE","\n\n    ",201],["T_DOC_COMMENT","\/**\n     * Retrieve table header comment\n     *\n     * @param unknown_type $tableName\n     * @return string\n     *\/",203],["T_WHITESPACE","\n    ",208],["T_PUBLIC","public",209],["T_WHITESPACE"," ",209],["T_FUNCTION","function",209],["T_WHITESPACE"," ",209],["T_STRING","getTableHeader",209],"(",["T_VARIABLE","$tableName",209],")",["T_WHITESPACE","\n    ",209],"{",["T_WHITESPACE","\n        ",210],["T_VARIABLE","$quotedTableName",211],["T_WHITESPACE"," ",211],"=",["T_WHITESPACE"," ",211],["T_VARIABLE","$this",211],["T_OBJECT_OPERATOR","->",211],["T_STRING","_write",211],["T_OBJECT_OPERATOR","->",211],["T_STRING","quoteIdentifier",211],"(",["T_VARIABLE","$tableName",211],")",";",["T_WHITESPACE","\n        ",211],["T_RETURN","return",212],["T_WHITESPACE"," ",212],["T_CONSTANT_ENCAPSED_STRING","\"\\n--\\n\"",212],["T_WHITESPACE","\n            ",212],".",["T_WHITESPACE"," ",213],"\"",["T_ENCAPSED_AND_WHITESPACE","-- Table structure for table ",213],["T_CURLY_OPEN","{",213],["T_VARIABLE","$quotedTableName",213],"}",["T_ENCAPSED_AND_WHITESPACE","\\n",213],"\"",["T_WHITESPACE","\n            ",213],".",["T_WHITESPACE"," ",214],["T_CONSTANT_ENCAPSED_STRING","\"--\\n\\n\"",214],";",["T_WHITESPACE","\n    ",214],"}",["T_WHITESPACE","\n\n    ",215],["T_DOC_COMMENT","\/**\n     * Return table data dump\n     *\n     * @param string $tableName\n     * @param bool $step\n     * @return string\n     *\/",217],["T_WHITESPACE","\n    ",223],["T_PUBLIC","public",224],["T_WHITESPACE"," ",224],["T_FUNCTION","function",224],["T_WHITESPACE"," ",224],["T_STRING","getTableDataDump",224],"(",["T_VARIABLE","$tableName",224],",",["T_WHITESPACE"," ",224],["T_VARIABLE","$step",224],["T_WHITESPACE"," ",224],"=",["T_WHITESPACE"," ",224],["T_STRING","false",224],")",["T_WHITESPACE","\n    ",224],"{",["T_WHITESPACE","\n        ",225],["T_RETURN","return",226],["T_WHITESPACE"," ",226],["T_VARIABLE","$this",226],["T_OBJECT_OPERATOR","->",226],["T_STRING","getTableDataSql",226],"(",["T_VARIABLE","$tableName",226],")",";",["T_WHITESPACE","\n    ",226],"}",["T_WHITESPACE","\n\n    ",227],["T_DOC_COMMENT","\/**\n     * Returns SQL header data\n     *\n     * @return string\n     *\/",229],["T_WHITESPACE","\n    ",233],["T_PUBLIC","public",234],["T_WHITESPACE"," ",234],["T_FUNCTION","function",234],["T_WHITESPACE"," ",234],["T_STRING","getHeader",234],"(",")",["T_WHITESPACE","\n    ",234],"{",["T_WHITESPACE","\n        ",235],["T_RETURN","return",236],["T_WHITESPACE"," ",236],["T_STRING","Mage",236],["T_DOUBLE_COLON","::",236],["T_STRING","getResourceHelper",236],"(",["T_CONSTANT_ENCAPSED_STRING","'backup'",236],")",["T_OBJECT_OPERATOR","->",236],["T_STRING","getHeader",236],"(",")",";",["T_WHITESPACE","\n    ",236],"}",["T_WHITESPACE","\n\n    ",237],["T_DOC_COMMENT","\/**\n     * Returns SQL footer data\n     *\n     * @return string\n     *\/",239],["T_WHITESPACE","\n    ",243],["T_PUBLIC","public",244],["T_WHITESPACE"," ",244],["T_FUNCTION","function",244],["T_WHITESPACE"," ",244],["T_STRING","getFooter",244],"(",")",["T_WHITESPACE","\n    ",244],"{",["T_WHITESPACE","\n        ",245],["T_RETURN","return",246],["T_WHITESPACE"," ",246],["T_STRING","Mage",246],["T_DOUBLE_COLON","::",246],["T_STRING","getResourceHelper",246],"(",["T_CONSTANT_ENCAPSED_STRING","'backup'",246],")",["T_OBJECT_OPERATOR","->",246],["T_STRING","getFooter",246],"(",")",";",["T_WHITESPACE","\n    ",246],"}",["T_WHITESPACE","\n\n    ",247],["T_DOC_COMMENT","\/**\n     * Retrieve before insert data SQL fragment\n     *\n     * @param string $tableName\n     * @return string\n     *\/",249],["T_WHITESPACE","\n    ",254],["T_PUBLIC","public",255],["T_WHITESPACE"," ",255],["T_FUNCTION","function",255],["T_WHITESPACE"," ",255],["T_STRING","getTableDataBeforeSql",255],"(",["T_VARIABLE","$tableName",255],")",["T_WHITESPACE","\n    ",255],"{",["T_WHITESPACE","\n        ",256],["T_RETURN","return",257],["T_WHITESPACE"," ",257],["T_STRING","Mage",257],["T_DOUBLE_COLON","::",257],["T_STRING","getResourceHelper",257],"(",["T_CONSTANT_ENCAPSED_STRING","'backup'",257],")",["T_OBJECT_OPERATOR","->",257],["T_STRING","getTableDataBeforeSql",257],"(",["T_VARIABLE","$tableName",257],")",";",["T_WHITESPACE","\n    ",257],"}",["T_WHITESPACE","\n\n    ",258],["T_DOC_COMMENT","\/**\n     * Retrieve after insert data SQL fragment\n     *\n     * @param string $tableName\n     * @return string\n     *\/",260],["T_WHITESPACE","\n    ",265],["T_PUBLIC","public",266],["T_WHITESPACE"," ",266],["T_FUNCTION","function",266],["T_WHITESPACE"," ",266],["T_STRING","getTableDataAfterSql",266],"(",["T_VARIABLE","$tableName",266],")",["T_WHITESPACE","\n    ",266],"{",["T_WHITESPACE","\n        ",267],["T_RETURN","return",268],["T_WHITESPACE"," ",268],["T_STRING","Mage",268],["T_DOUBLE_COLON","::",268],["T_STRING","getResourceHelper",268],"(",["T_CONSTANT_ENCAPSED_STRING","'backup'",268],")",["T_OBJECT_OPERATOR","->",268],["T_STRING","getTableDataAfterSql",268],"(",["T_VARIABLE","$tableName",268],")",";",["T_WHITESPACE","\n    ",268],"}",["T_WHITESPACE","\n\n    ",269],["T_DOC_COMMENT","\/**\n     * Start transaction mode\n     *\n     * @return Mage_Backup_Model_Resource_Db\n     *\/",271],["T_WHITESPACE","\n    ",275],["T_PUBLIC","public",276],["T_WHITESPACE"," ",276],["T_FUNCTION","function",276],["T_WHITESPACE"," ",276],["T_STRING","beginTransaction",276],"(",")",["T_WHITESPACE","\n    ",276],"{",["T_WHITESPACE","\n        ",277],["T_STRING","Mage",278],["T_DOUBLE_COLON","::",278],["T_STRING","getResourceHelper",278],"(",["T_CONSTANT_ENCAPSED_STRING","'backup'",278],")",["T_OBJECT_OPERATOR","->",278],["T_STRING","turnOnSerializableMode",278],"(",")",";",["T_WHITESPACE","\n        ",278],["T_VARIABLE","$this",279],["T_OBJECT_OPERATOR","->",279],["T_STRING","_write",279],["T_OBJECT_OPERATOR","->",279],["T_STRING","beginTransaction",279],"(",")",";",["T_WHITESPACE","\n        ",279],["T_RETURN","return",280],["T_WHITESPACE"," ",280],["T_VARIABLE","$this",280],";",["T_WHITESPACE","\n    ",280],"}",["T_WHITESPACE","\n\n    ",281],["T_DOC_COMMENT","\/**\n     * Commit transaction\n     *\n     * @return Mage_Backup_Model_Resource_Db\n     *\/",283],["T_WHITESPACE","\n    ",287],["T_PUBLIC","public",288],["T_WHITESPACE"," ",288],["T_FUNCTION","function",288],["T_WHITESPACE"," ",288],["T_STRING","commitTransaction",288],"(",")",["T_WHITESPACE","\n    ",288],"{",["T_WHITESPACE","\n        ",289],["T_VARIABLE","$this",290],["T_OBJECT_OPERATOR","->",290],["T_STRING","_write",290],["T_OBJECT_OPERATOR","->",290],["T_STRING","commit",290],"(",")",";",["T_WHITESPACE","\n        ",290],["T_STRING","Mage",291],["T_DOUBLE_COLON","::",291],["T_STRING","getResourceHelper",291],"(",["T_CONSTANT_ENCAPSED_STRING","'backup'",291],")",["T_OBJECT_OPERATOR","->",291],["T_STRING","turnOnReadCommittedMode",291],"(",")",";",["T_WHITESPACE","\n        ",291],["T_RETURN","return",292],["T_WHITESPACE"," ",292],["T_VARIABLE","$this",292],";",["T_WHITESPACE","\n    ",292],"}",["T_WHITESPACE","\n\n    ",293],["T_DOC_COMMENT","\/**\n     * Rollback transaction\n     *\n     * @return Mage_Backup_Model_Resource_Db\n     *\/",295],["T_WHITESPACE","\n    ",299],["T_PUBLIC","public",300],["T_WHITESPACE"," ",300],["T_FUNCTION","function",300],["T_WHITESPACE"," ",300],["T_STRING","rollBackTransaction",300],"(",")",["T_WHITESPACE","\n    ",300],"{",["T_WHITESPACE","\n        ",301],["T_VARIABLE","$this",302],["T_OBJECT_OPERATOR","->",302],["T_STRING","_write",302],["T_OBJECT_OPERATOR","->",302],["T_STRING","rollBack",302],"(",")",";",["T_WHITESPACE","\n        ",302],["T_RETURN","return",303],["T_WHITESPACE"," ",303],["T_VARIABLE","$this",303],";",["T_WHITESPACE","\n    ",303],"}",["T_WHITESPACE","\n\n    ",304],["T_DOC_COMMENT","\/**\n     * Run sql code\n     *\n     * @param $command\n     * @return Mage_Backup_Model_Resource_Db\n     *\/",306],["T_WHITESPACE","\n    ",311],["T_PUBLIC","public",312],["T_WHITESPACE"," ",312],["T_FUNCTION","function",312],["T_WHITESPACE"," ",312],["T_STRING","runCommand",312],"(",["T_VARIABLE","$command",312],")","{",["T_WHITESPACE","\n        ",312],["T_VARIABLE","$this",313],["T_OBJECT_OPERATOR","->",313],["T_STRING","_write",313],["T_OBJECT_OPERATOR","->",313],["T_STRING","query",313],"(",["T_VARIABLE","$command",313],")",";",["T_WHITESPACE","\n        ",313],["T_RETURN","return",314],["T_WHITESPACE"," ",314],["T_VARIABLE","$this",314],";",["T_WHITESPACE","\n    ",314],"}",["T_WHITESPACE","\n",315],"}",["T_WHITESPACE","\n",316]]
[["T_OPEN_TAG","<?php\n",1],["T_DOC_COMMENT","\/**\n * Magento\n *\n * NOTICE OF LICENSE\n *\n * This source file is subject to the Open Software License (OSL 3.0)\n * that is bundled with this package in the file LICENSE.txt.\n * It is also available through the world-wide-web at this URL:\n * http:\/\/opensource.org\/licenses\/osl-3.0.php\n * If you did not receive a copy of the license and are unable to\n * obtain it through the world-wide-web, please send an email\n * to license@magento.com so we can send you a copy immediately.\n *\n * DISCLAIMER\n *\n * Do not edit or add to this file if you wish to upgrade Magento to newer\n * versions in the future. If you wish to customize Magento for your\n * needs please refer to http:\/\/www.magento.com for more information.\n *\n * @category    Mage\n * @package     Mage_Backup\n * @copyright  Copyright (c) 2006-2016 X.commerce, Inc. and affiliates (http:\/\/www.magento.com)\n * @license    http:\/\/opensource.org\/licenses\/osl-3.0.php  Open Software License (OSL 3.0)\n *\/",2],["T_WHITESPACE","\n\n",25],["T_DOC_COMMENT","\/**\n * Backup file item model\n *\n * @category   Mage\n * @package    Mage_Backup\n * @author     Magento Core Team <core@magentocommerce.com>\n *\/",27],["T_WHITESPACE","\n",33],["T_CLASS","class",34],["T_WHITESPACE"," ",34],["T_STRING","Mage_Backup_Model_Backup",34],["T_WHITESPACE"," ",34],["T_EXTENDS","extends",34],["T_WHITESPACE"," ",34],["T_STRING","Varien_Object",34],["T_WHITESPACE","\n",34],"{",["T_WHITESPACE","\n    ",35],["T_COMMENT","\/* internal constants *\/",36],["T_WHITESPACE","\n    ",36],["T_CONST","const",37],["T_WHITESPACE"," ",37],["T_STRING","COMPRESS_RATE",37],["T_WHITESPACE","     ",37],"=",["T_WHITESPACE"," ",37],["T_LNUMBER","9",37],";",["T_WHITESPACE","\n\n    ",37],["T_DOC_COMMENT","\/**\n     * Type of backup file\n     *\n     * @var string\n     *\/",39],["T_WHITESPACE","\n    ",43],["T_PRIVATE","private",44],["T_WHITESPACE"," ",44],["T_VARIABLE","$_type",44],["T_WHITESPACE","  ",44],"=",["T_WHITESPACE"," ",44],["T_CONSTANT_ENCAPSED_STRING","'db'",44],";",["T_WHITESPACE","\n\n    ",44],["T_DOC_COMMENT","\/**\n     * Gz file pointer\n     *\n     * @var resource\n     *\/",46],["T_WHITESPACE","\n    ",50],["T_PROTECTED","protected",51],["T_WHITESPACE"," ",51],["T_VARIABLE","$_handler",51],["T_WHITESPACE"," ",51],"=",["T_WHITESPACE"," ",51],["T_STRING","null",51],";",["T_WHITESPACE","\n\n    ",51],["T_DOC_COMMENT","\/**\n     * Load backup file info\n     *\n     * @param string fileName\n     * @param string filePath\n     * @return Mage_Backup_Model_Backup\n     *\/",53],["T_WHITESPACE","\n    ",59],["T_PUBLIC","public",60],["T_WHITESPACE"," ",60],["T_FUNCTION","function",60],["T_WHITESPACE"," ",60],["T_STRING","load",60],"(",["T_VARIABLE","$fileName",60],",",["T_WHITESPACE"," ",60],["T_VARIABLE","$filePath",60],")",["T_WHITESPACE","\n    ",60],"{",["T_WHITESPACE","\n        ",61],["T_VARIABLE","$backupData",62],["T_WHITESPACE"," ",62],"=",["T_WHITESPACE"," ",62],["T_STRING","Mage",62],["T_DOUBLE_COLON","::",62],["T_STRING","helper",62],"(",["T_CONSTANT_ENCAPSED_STRING","'backup'",62],")",["T_OBJECT_OPERATOR","->",62],["T_STRING","extractDataFromFilename",62],"(",["T_VARIABLE","$fileName",62],")",";",["T_WHITESPACE","\n\n        ",62],["T_VARIABLE","$this",64],["T_OBJECT_OPERATOR","->",64],["T_STRING","addData",64],"(",["T_ARRAY","array",64],"(",["T_WHITESPACE","\n            ",64],["T_CONSTANT_ENCAPSED_STRING","'id'",65],["T_WHITESPACE","   ",65],["T_DOUBLE_ARROW","=>",65],["T_WHITESPACE"," ",65],["T_VARIABLE","$filePath",65],["T_WHITESPACE"," ",65],".",["T_WHITESPACE"," ",65],["T_STRING","DS",65],["T_WHITESPACE"," ",65],".",["T_WHITESPACE"," ",65],["T_VARIABLE","$fileName",65],",",["T_WHITESPACE","\n            ",65],["T_CONSTANT_ENCAPSED_STRING","'time'",66],["T_WHITESPACE"," ",66],["T_DOUBLE_ARROW","=>",66],["T_WHITESPACE"," ",66],["T_INT_CAST","(int)",66],["T_VARIABLE","$backupData",66],["T_OBJECT_OPERATOR","->",66],["T_STRING","getTime",66],"(",")",",",["T_WHITESPACE","\n            ",66],["T_CONSTANT_ENCAPSED_STRING","'path'",67],["T_WHITESPACE"," ",67],["T_DOUBLE_ARROW","=>",67],["T_WHITESPACE"," ",67],["T_VARIABLE","$filePath",67],",",["T_WHITESPACE","\n            ",67],["T_CONSTANT_ENCAPSED_STRING","'extension'",68],["T_WHITESPACE"," ",68],["T_DOUBLE_ARROW","=>",68],["T_WHITESPACE"," ",68],["T_STRING","Mage",68],["T_DOUBLE_COLON","::",68],["T_STRING","helper",68],"(",["T_CONSTANT_ENCAPSED_STRING","'backup'",68],")",["T_OBJECT_OPERATOR","->",68],["T_STRING","getExtensionByType",68],"(",["T_VARIABLE","$backupData",68],["T_OBJECT_OPERATOR","->",68],["T_STRING","getType",68],"(",")",")",",",["T_WHITESPACE","\n            ",68],["T_CONSTANT_ENCAPSED_STRING","'display_name'",69],["T_WHITESPACE"," ",69],["T_DOUBLE_ARROW","=>",69],["T_WHITESPACE"," ",69],["T_STRING","Mage",69],["T_DOUBLE_COLON","::",69],["T_STRING","helper",69],"(",["T_CONSTANT_ENCAPSED_STRING","'backup'",69],")",["T_OBJECT_OPERATOR","->",69],["T_STRING","nameToDisplayName",69],"(",["T_VARIABLE","$backupData",69],["T_OBJECT_OPERATOR","->",69],["T_STRING","getName",69],"(",")",")",",",["T_WHITESPACE","\n            ",69],["T_CONSTANT_ENCAPSED_STRING","'name'",70],["T_WHITESPACE"," ",70],["T_DOUBLE_ARROW","=>",70],["T_WHITESPACE"," ",70],["T_VARIABLE","$backupData",70],["T_OBJECT_OPERATOR","->",70],["T_STRING","getName",70],"(",")",",",["T_WHITESPACE","\n            ",70],["T_CONSTANT_ENCAPSED_STRING","'date_object'",71],["T_WHITESPACE"," ",71],["T_DOUBLE_ARROW","=>",71],["T_WHITESPACE"," ",71],["T_NEW","new",71],["T_WHITESPACE"," ",71],["T_STRING","Zend_Date",71],"(",["T_INT_CAST","(int)",71],["T_VARIABLE","$backupData",71],["T_OBJECT_OPERATOR","->",71],["T_STRING","getTime",71],"(",")",",",["T_WHITESPACE"," ",71],["T_STRING","Mage",71],["T_DOUBLE_COLON","::",71],["T_STRING","app",71],"(",")",["T_OBJECT_OPERATOR","->",71],["T_STRING","getLocale",71],"(",")",["T_OBJECT_OPERATOR","->",71],["T_STRING","getLocaleCode",71],"(",")",")",["T_WHITESPACE","\n        ",71],")",")",";",["T_WHITESPACE","\n\n        ",72],["T_VARIABLE","$this",74],["T_OBJECT_OPERATOR","->",74],["T_STRING","setType",74],"(",["T_VARIABLE","$backupData",74],["T_OBJECT_OPERATOR","->",74],["T_STRING","getType",74],"(",")",")",";",["T_WHITESPACE","\n        ",74],["T_RETURN","return",75],["T_WHITESPACE"," ",75],["T_VARIABLE","$this",75],";",["T_WHITESPACE","\n    ",75],"}",["T_WHITESPACE","\n\n    ",76],["T_DOC_COMMENT","\/**\n     * Checks backup file exists.\n     *\n     * @return boolean\n     *\/",78],["T_WHITESPACE","\n    ",82],["T_PUBLIC","public",83],["T_WHITESPACE"," ",83],["T_FUNCTION","function",83],["T_WHITESPACE"," ",83],["T_STRING","exists",83],"(",")",["T_WHITESPACE","\n    ",83],"{",["T_WHITESPACE","\n        ",84],["T_RETURN","return",85],["T_WHITESPACE"," ",85],["T_STRING","is_file",85],"(",["T_VARIABLE","$this",85],["T_OBJECT_OPERATOR","->",85],["T_STRING","getPath",85],"(",")",["T_WHITESPACE"," ",85],".",["T_WHITESPACE"," ",85],["T_STRING","DS",85],["T_WHITESPACE"," ",85],".",["T_WHITESPACE"," ",85],["T_VARIABLE","$this",85],["T_OBJECT_OPERATOR","->",85],["T_STRING","getFileName",85],"(",")",")",";",["T_WHITESPACE","\n    ",85],"}",["T_WHITESPACE","\n\n    ",86],["T_DOC_COMMENT","\/**\n     * Return file name of backup file\n     *\n     * @return string\n     *\/",88],["T_WHITESPACE","\n    ",92],["T_PUBLIC","public",93],["T_WHITESPACE"," ",93],["T_FUNCTION","function",93],["T_WHITESPACE"," ",93],["T_STRING","getFileName",93],"(",")",["T_WHITESPACE","\n    ",93],"{",["T_WHITESPACE","\n        ",94],["T_VARIABLE","$filename",95],["T_WHITESPACE"," ",95],"=",["T_WHITESPACE"," ",95],["T_VARIABLE","$this",95],["T_OBJECT_OPERATOR","->",95],["T_STRING","getTime",95],"(",")",["T_WHITESPACE"," ",95],".",["T_WHITESPACE"," ",95],["T_CONSTANT_ENCAPSED_STRING","\"_\"",95],["T_WHITESPACE"," ",95],".",["T_WHITESPACE"," ",95],["T_VARIABLE","$this",95],["T_OBJECT_OPERATOR","->",95],["T_STRING","getType",95],"(",")",";",["T_WHITESPACE","\n        ",95],["T_VARIABLE","$backupName",96],["T_WHITESPACE"," ",96],"=",["T_WHITESPACE"," ",96],["T_VARIABLE","$this",96],["T_OBJECT_OPERATOR","->",96],["T_STRING","getName",96],"(",")",";",["T_WHITESPACE","\n\n        ",96],["T_IF","if",98],["T_WHITESPACE"," ",98],"(","!",["T_EMPTY","empty",98],"(",["T_VARIABLE","$backupName",98],")",")",["T_WHITESPACE"," ",98],"{",["T_WHITESPACE","\n            ",98],["T_VARIABLE","$filename",99],["T_WHITESPACE"," ",99],["T_CONCAT_EQUAL",".=",99],["T_WHITESPACE"," ",99],["T_CONSTANT_ENCAPSED_STRING","'_'",99],["T_WHITESPACE"," ",99],".",["T_WHITESPACE"," ",99],["T_VARIABLE","$backupName",99],";",["T_WHITESPACE","\n        ",99],"}",["T_WHITESPACE","\n\n        ",100],["T_VARIABLE","$filename",102],["T_WHITESPACE"," ",102],["T_CONCAT_EQUAL",".=",102],["T_WHITESPACE"," ",102],["T_CONSTANT_ENCAPSED_STRING","'.'",102],["T_WHITESPACE"," ",102],".",["T_WHITESPACE"," ",102],["T_STRING","Mage",102],["T_DOUBLE_COLON","::",102],["T_STRING","helper",102],"(",["T_CONSTANT_ENCAPSED_STRING","'backup'",102],")",["T_OBJECT_OPERATOR","->",102],["T_STRING","getExtensionByType",102],"(",["T_VARIABLE","$this",102],["T_OBJECT_OPERATOR","->",102],["T_STRING","getType",102],"(",")",")",";",["T_WHITESPACE","\n\n        ",102],["T_RETURN","return",104],["T_WHITESPACE"," ",104],["T_VARIABLE","$filename",104],";",["T_WHITESPACE","\n    ",104],"}",["T_WHITESPACE","\n\n    ",105],["T_DOC_COMMENT","\/**\n     * Sets type of file\n     *\n     * @param string $value\n     * @return Mage_Backup_Model_Backup\n     *\/",107],["T_WHITESPACE","\n    ",112],["T_PUBLIC","public",113],["T_WHITESPACE"," ",113],["T_FUNCTION","function",113],["T_WHITESPACE"," ",113],["T_STRING","setType",113],"(",["T_VARIABLE","$value",113],"=",["T_CONSTANT_ENCAPSED_STRING","'db'",113],")",["T_WHITESPACE","\n    ",113],"{",["T_WHITESPACE","\n        ",114],["T_VARIABLE","$possibleTypes",115],["T_WHITESPACE"," ",115],"=",["T_WHITESPACE"," ",115],["T_STRING","Mage",115],["T_DOUBLE_COLON","::",115],["T_STRING","helper",115],"(",["T_CONSTANT_ENCAPSED_STRING","'backup'",115],")",["T_OBJECT_OPERATOR","->",115],["T_STRING","getBackupTypesList",115],"(",")",";",["T_WHITESPACE","\n        ",115],["T_IF","if",116],"(","!",["T_STRING","in_array",116],"(",["T_VARIABLE","$value",116],",",["T_WHITESPACE"," ",116],["T_VARIABLE","$possibleTypes",116],")",")",["T_WHITESPACE"," ",116],"{",["T_WHITESPACE","\n            ",116],["T_VARIABLE","$value",117],["T_WHITESPACE"," ",117],"=",["T_WHITESPACE"," ",117],["T_STRING","Mage",117],["T_DOUBLE_COLON","::",117],["T_STRING","helper",117],"(",["T_CONSTANT_ENCAPSED_STRING","'backup'",117],")",["T_OBJECT_OPERATOR","->",117],["T_STRING","getDefaultBackupType",117],"(",")",";",["T_WHITESPACE","\n        ",117],"}",["T_WHITESPACE","\n\n        ",118],["T_VARIABLE","$this",120],["T_OBJECT_OPERATOR","->",120],["T_STRING","_type",120],["T_WHITESPACE"," ",120],"=",["T_WHITESPACE"," ",120],["T_VARIABLE","$value",120],";",["T_WHITESPACE","\n        ",120],["T_VARIABLE","$this",121],["T_OBJECT_OPERATOR","->",121],["T_STRING","setData",121],"(",["T_CONSTANT_ENCAPSED_STRING","'type'",121],",",["T_WHITESPACE"," ",121],["T_VARIABLE","$this",121],["T_OBJECT_OPERATOR","->",121],["T_STRING","_type",121],")",";",["T_WHITESPACE","\n\n        ",121],["T_RETURN","return",123],["T_WHITESPACE"," ",123],["T_VARIABLE","$this",123],";",["T_WHITESPACE","\n    ",123],"}",["T_WHITESPACE","\n\n    ",124],["T_DOC_COMMENT","\/**\n     * Returns type of backup file\n     *\n     * @return string\n     *\/",126],["T_WHITESPACE","\n    ",130],["T_PUBLIC","public",131],["T_WHITESPACE"," ",131],["T_FUNCTION","function",131],["T_WHITESPACE"," ",131],["T_STRING","getType",131],"(",")",["T_WHITESPACE","\n    ",131],"{",["T_WHITESPACE","\n        ",132],["T_RETURN","return",133],["T_WHITESPACE"," ",133],["T_VARIABLE","$this",133],["T_OBJECT_OPERATOR","->",133],["T_STRING","_type",133],";",["T_WHITESPACE","\n    ",133],"}",["T_WHITESPACE","\n\n    ",134],["T_DOC_COMMENT","\/**\n     * Set the backup file content\n     *\n     * @param string $content\n     * @return Mage_Backup_Model_Backup\n     * @throws Mage_Backup_Exception\n     *\/",136],["T_WHITESPACE","\n    ",142],["T_PUBLIC","public",143],["T_WHITESPACE"," ",143],["T_FUNCTION","function",143],["T_WHITESPACE"," ",143],["T_STRING","setFile",143],"(","&",["T_VARIABLE","$content",143],")",["T_WHITESPACE","\n    ",143],"{",["T_WHITESPACE","\n        ",144],["T_IF","if",145],["T_WHITESPACE"," ",145],"(","!",["T_VARIABLE","$this",145],["T_OBJECT_OPERATOR","->",145],["T_STRING","hasData",145],"(",["T_CONSTANT_ENCAPSED_STRING","'time'",145],")",["T_WHITESPACE"," ",145],["T_BOOLEAN_OR","||",145],["T_WHITESPACE"," ",145],"!",["T_VARIABLE","$this",145],["T_OBJECT_OPERATOR","->",145],["T_STRING","hasData",145],"(",["T_CONSTANT_ENCAPSED_STRING","'type'",145],")",["T_WHITESPACE"," ",145],["T_BOOLEAN_OR","||",145],["T_WHITESPACE"," ",145],"!",["T_VARIABLE","$this",145],["T_OBJECT_OPERATOR","->",145],["T_STRING","hasData",145],"(",["T_CONSTANT_ENCAPSED_STRING","'path'",145],")",")",["T_WHITESPACE"," ",145],"{",["T_WHITESPACE","\n            ",145],["T_STRING","Mage",146],["T_DOUBLE_COLON","::",146],["T_STRING","throwException",146],"(",["T_STRING","Mage",146],["T_DOUBLE_COLON","::",146],["T_STRING","helper",146],"(",["T_CONSTANT_ENCAPSED_STRING","'backup'",146],")",["T_OBJECT_OPERATOR","->",146],["T_STRING","__",146],"(",["T_CONSTANT_ENCAPSED_STRING","'Wrong order of creation for new backup.'",146],")",")",";",["T_WHITESPACE","\n        ",146],"}",["T_WHITESPACE","\n\n        ",147],["T_VARIABLE","$ioProxy",149],["T_WHITESPACE"," ",149],"=",["T_WHITESPACE"," ",149],["T_NEW","new",149],["T_WHITESPACE"," ",149],["T_STRING","Varien_Io_File",149],"(",")",";",["T_WHITESPACE","\n        ",149],["T_VARIABLE","$ioProxy",150],["T_OBJECT_OPERATOR","->",150],["T_STRING","setAllowCreateFolders",150],"(",["T_STRING","true",150],")",";",["T_WHITESPACE","\n        ",150],["T_VARIABLE","$ioProxy",151],["T_OBJECT_OPERATOR","->",151],["T_STRING","open",151],"(",["T_ARRAY","array",151],"(",["T_CONSTANT_ENCAPSED_STRING","'path'",151],["T_DOUBLE_ARROW","=>",151],["T_VARIABLE","$this",151],["T_OBJECT_OPERATOR","->",151],["T_STRING","getPath",151],"(",")",")",")",";",["T_WHITESPACE","\n\n        ",151],["T_VARIABLE","$compress",153],["T_WHITESPACE"," ",153],"=",["T_WHITESPACE"," ",153],["T_LNUMBER","0",153],";",["T_WHITESPACE","\n        ",153],["T_IF","if",154],["T_WHITESPACE"," ",154],"(",["T_STRING","extension_loaded",154],"(",["T_CONSTANT_ENCAPSED_STRING","\"zlib\"",154],")",")",["T_WHITESPACE"," ",154],"{",["T_WHITESPACE","\n            ",154],["T_VARIABLE","$compress",155],["T_WHITESPACE"," ",155],"=",["T_WHITESPACE"," ",155],["T_LNUMBER","1",155],";",["T_WHITESPACE","\n        ",155],"}",["T_WHITESPACE","\n\n        ",156],["T_VARIABLE","$rawContent",158],["T_WHITESPACE"," ",158],"=",["T_WHITESPACE"," ",158],["T_CONSTANT_ENCAPSED_STRING","''",158],";",["T_WHITESPACE","\n        ",158],["T_IF","if",159],["T_WHITESPACE"," ",159],"(",["T_WHITESPACE"," ",159],["T_VARIABLE","$compress",159],["T_WHITESPACE"," ",159],")",["T_WHITESPACE"," ",159],"{",["T_WHITESPACE","\n            ",159],["T_VARIABLE","$rawContent",160],["T_WHITESPACE"," ",160],"=",["T_WHITESPACE"," ",160],["T_STRING","gzcompress",160],"(",["T_WHITESPACE"," ",160],["T_VARIABLE","$content",160],",",["T_WHITESPACE"," ",160],["T_STRING","self",160],["T_DOUBLE_COLON","::",160],["T_STRING","COMPRESS_RATE",160],["T_WHITESPACE"," ",160],")",";",["T_WHITESPACE","\n        ",160],"}",["T_WHITESPACE"," ",161],["T_ELSE","else",161],["T_WHITESPACE"," ",161],"{",["T_WHITESPACE","\n            ",161],["T_VARIABLE","$rawContent",162],["T_WHITESPACE"," ",162],"=",["T_WHITESPACE"," ",162],["T_VARIABLE","$content",162],";",["T_WHITESPACE","\n        ",162],"}",["T_WHITESPACE","\n\n        ",163],["T_VARIABLE","$fileHeaders",165],["T_WHITESPACE"," ",165],"=",["T_WHITESPACE"," ",165],["T_STRING","pack",165],"(",["T_CONSTANT_ENCAPSED_STRING","\"ll\"",165],",",["T_WHITESPACE"," ",165],["T_VARIABLE","$compress",165],",",["T_WHITESPACE"," ",165],["T_STRING","strlen",165],"(",["T_VARIABLE","$rawContent",165],")",")",";",["T_WHITESPACE","\n        ",165],["T_VARIABLE","$ioProxy",166],["T_OBJECT_OPERATOR","->",166],["T_STRING","write",166],"(",["T_VARIABLE","$this",166],["T_OBJECT_OPERATOR","->",166],["T_STRING","getFileName",166],"(",")",",",["T_WHITESPACE"," ",166],["T_VARIABLE","$fileHeaders",166],["T_WHITESPACE"," ",166],".",["T_WHITESPACE"," ",166],["T_VARIABLE","$rawContent",166],")",";",["T_WHITESPACE","\n        ",166],["T_RETURN","return",167],["T_WHITESPACE"," ",167],["T_VARIABLE","$this",167],";",["T_WHITESPACE","\n    ",167],"}",["T_WHITESPACE","\n\n    ",168],["T_DOC_COMMENT","\/**\n     * Return content of backup file\n     *\n     * @todo rewrite to Varien_IO, but there no possibility read part of files.\n     * @return string\n     * @throws Mage_Backup_Exception\n     *\/",170],["T_WHITESPACE","\n    ",176],["T_PUBLIC","public",177],["T_WHITESPACE"," ",177],["T_FUNCTION","function",177],["T_WHITESPACE"," ",177],"&",["T_STRING","getFile",177],"(",")",["T_WHITESPACE","\n    ",177],"{",["T_WHITESPACE","\n\n        ",178],["T_IF","if",180],["T_WHITESPACE"," ",180],"(","!",["T_VARIABLE","$this",180],["T_OBJECT_OPERATOR","->",180],["T_STRING","exists",180],"(",")",")",["T_WHITESPACE"," ",180],"{",["T_WHITESPACE","\n            ",180],["T_STRING","Mage",181],["T_DOUBLE_COLON","::",181],["T_STRING","throwException",181],"(",["T_STRING","Mage",181],["T_DOUBLE_COLON","::",181],["T_STRING","helper",181],"(",["T_CONSTANT_ENCAPSED_STRING","'backup'",181],")",["T_OBJECT_OPERATOR","->",181],["T_STRING","__",181],"(",["T_CONSTANT_ENCAPSED_STRING","\"Backup file does not exist.\"",181],")",")",";",["T_WHITESPACE","\n        ",181],"}",["T_WHITESPACE","\n\n        ",182],["T_VARIABLE","$fResource",184],["T_WHITESPACE"," ",184],"=",["T_WHITESPACE"," ",184],"@",["T_STRING","fopen",184],"(",["T_VARIABLE","$this",184],["T_OBJECT_OPERATOR","->",184],["T_STRING","getPath",184],"(",")",["T_WHITESPACE"," ",184],".",["T_WHITESPACE"," ",184],["T_STRING","DS",184],["T_WHITESPACE"," ",184],".",["T_WHITESPACE"," ",184],["T_VARIABLE","$this",184],["T_OBJECT_OPERATOR","->",184],["T_STRING","getFileName",184],"(",")",",",["T_WHITESPACE"," ",184],["T_CONSTANT_ENCAPSED_STRING","\"rb\"",184],")",";",["T_WHITESPACE","\n        ",184],["T_IF","if",185],["T_WHITESPACE"," ",185],"(","!",["T_VARIABLE","$fResource",185],")",["T_WHITESPACE"," ",185],"{",["T_WHITESPACE","\n            ",185],["T_STRING","Mage",186],["T_DOUBLE_COLON","::",186],["T_STRING","throwException",186],"(",["T_STRING","Mage",186],["T_DOUBLE_COLON","::",186],["T_STRING","helper",186],"(",["T_CONSTANT_ENCAPSED_STRING","'backup'",186],")",["T_OBJECT_OPERATOR","->",186],["T_STRING","__",186],"(",["T_CONSTANT_ENCAPSED_STRING","\"Cannot read backup file.\"",186],")",")",";",["T_WHITESPACE","\n        ",186],"}",["T_WHITESPACE","\n\n        ",187],["T_VARIABLE","$content",189],["T_WHITESPACE"," ",189],"=",["T_WHITESPACE"," ",189],["T_CONSTANT_ENCAPSED_STRING","''",189],";",["T_WHITESPACE","\n        ",189],["T_VARIABLE","$compressed",190],["T_WHITESPACE"," ",190],"=",["T_WHITESPACE"," ",190],["T_LNUMBER","0",190],";",["T_WHITESPACE","\n\n        ",190],["T_VARIABLE","$info",192],["T_WHITESPACE"," ",192],"=",["T_WHITESPACE"," ",192],["T_STRING","unpack",192],"(",["T_CONSTANT_ENCAPSED_STRING","\"lcompress\/llength\"",192],",",["T_WHITESPACE"," ",192],["T_STRING","fread",192],"(",["T_VARIABLE","$fResource",192],",",["T_WHITESPACE"," ",192],["T_LNUMBER","8",192],")",")",";",["T_WHITESPACE","\n        ",192],["T_IF","if",193],["T_WHITESPACE"," ",193],"(",["T_VARIABLE","$info",193],"[",["T_CONSTANT_ENCAPSED_STRING","'compress'",193],"]",")",["T_WHITESPACE"," ",193],"{",["T_WHITESPACE"," ",193],["T_COMMENT","\/\/ If file compressed by zlib\n",193],["T_WHITESPACE","            ",194],["T_VARIABLE","$compressed",194],["T_WHITESPACE"," ",194],"=",["T_WHITESPACE"," ",194],["T_LNUMBER","1",194],";",["T_WHITESPACE","\n        ",194],"}",["T_WHITESPACE","\n\n        ",195],["T_IF","if",197],["T_WHITESPACE"," ",197],"(",["T_VARIABLE","$compressed",197],["T_WHITESPACE"," ",197],["T_BOOLEAN_AND","&&",197],["T_WHITESPACE"," ",197],"!",["T_STRING","extension_loaded",197],"(",["T_CONSTANT_ENCAPSED_STRING","\"zlib\"",197],")",")",["T_WHITESPACE"," ",197],"{",["T_WHITESPACE","\n            ",197],["T_STRING","fclose",198],"(",["T_VARIABLE","$fResource",198],")",";",["T_WHITESPACE","\n            ",198],["T_STRING","Mage",199],["T_DOUBLE_COLON","::",199],["T_STRING","throwException",199],"(",["T_STRING","Mage",199],["T_DOUBLE_COLON","::",199],["T_STRING","helper",199],"(",["T_CONSTANT_ENCAPSED_STRING","'backup'",199],")",["T_OBJECT_OPERATOR","->",199],["T_STRING","__",199],"(",["T_CONSTANT_ENCAPSED_STRING","'The file was compressed with Zlib, but this extension is not installed on server.'",199],")",")",";",["T_WHITESPACE","\n        ",199],"}",["T_WHITESPACE","\n\n        ",200],["T_IF","if",202],["T_WHITESPACE"," ",202],"(",["T_VARIABLE","$compressed",202],")",["T_WHITESPACE"," ",202],"{",["T_WHITESPACE","\n            ",202],["T_VARIABLE","$content",203],["T_WHITESPACE"," ",203],"=",["T_WHITESPACE"," ",203],["T_STRING","gzuncompress",203],"(",["T_STRING","fread",203],"(",["T_VARIABLE","$fResource",203],",",["T_WHITESPACE"," ",203],["T_VARIABLE","$info",203],"[",["T_CONSTANT_ENCAPSED_STRING","'length'",203],"]",")",")",";",["T_WHITESPACE","\n        ",203],"}",["T_WHITESPACE"," ",204],["T_ELSE","else",204],["T_WHITESPACE"," ",204],"{",["T_WHITESPACE","\n            ",204],["T_VARIABLE","$content",205],["T_WHITESPACE"," ",205],"=",["T_WHITESPACE"," ",205],["T_STRING","fread",205],"(",["T_VARIABLE","$fResource",205],",",["T_WHITESPACE"," ",205],["T_VARIABLE","$info",205],"[",["T_CONSTANT_ENCAPSED_STRING","'length'",205],"]",")",";",["T_WHITESPACE","\n        ",205],"}",["T_WHITESPACE","\n\n        ",206],["T_STRING","fclose",208],"(",["T_VARIABLE","$fResource",208],")",";",["T_WHITESPACE","\n\n        ",208],["T_RETURN","return",210],["T_WHITESPACE"," ",210],["T_VARIABLE","$content",210],";",["T_WHITESPACE","\n    ",210],"}",["T_WHITESPACE","\n\n    ",211],["T_DOC_COMMENT","\/**\n     * Delete backup file\n     *\n     * @throws Mage_Backup_Exception\n     * @return Mage_Backup_Model_Backup\n     *\/",213],["T_WHITESPACE","\n    ",218],["T_PUBLIC","public",219],["T_WHITESPACE"," ",219],["T_FUNCTION","function",219],["T_WHITESPACE"," ",219],["T_STRING","deleteFile",219],"(",")",["T_WHITESPACE","\n    ",219],"{",["T_WHITESPACE","\n        ",220],["T_IF","if",221],["T_WHITESPACE"," ",221],"(","!",["T_VARIABLE","$this",221],["T_OBJECT_OPERATOR","->",221],["T_STRING","exists",221],"(",")",")",["T_WHITESPACE"," ",221],"{",["T_WHITESPACE","\n            ",221],["T_STRING","Mage",222],["T_DOUBLE_COLON","::",222],["T_STRING","throwException",222],"(",["T_STRING","Mage",222],["T_DOUBLE_COLON","::",222],["T_STRING","helper",222],"(",["T_CONSTANT_ENCAPSED_STRING","'backup'",222],")",["T_OBJECT_OPERATOR","->",222],["T_STRING","__",222],"(",["T_CONSTANT_ENCAPSED_STRING","\"Backup file does not exist.\"",222],")",")",";",["T_WHITESPACE","\n        ",222],"}",["T_WHITESPACE","\n\n        ",223],["T_VARIABLE","$ioProxy",225],["T_WHITESPACE"," ",225],"=",["T_WHITESPACE"," ",225],["T_NEW","new",225],["T_WHITESPACE"," ",225],["T_STRING","Varien_Io_File",225],"(",")",";",["T_WHITESPACE","\n        ",225],["T_VARIABLE","$ioProxy",226],["T_OBJECT_OPERATOR","->",226],["T_STRING","open",226],"(",["T_ARRAY","array",226],"(",["T_CONSTANT_ENCAPSED_STRING","'path'",226],["T_DOUBLE_ARROW","=>",226],["T_VARIABLE","$this",226],["T_OBJECT_OPERATOR","->",226],["T_STRING","getPath",226],"(",")",")",")",";",["T_WHITESPACE","\n        ",226],["T_VARIABLE","$ioProxy",227],["T_OBJECT_OPERATOR","->",227],["T_STRING","rm",227],"(",["T_VARIABLE","$this",227],["T_OBJECT_OPERATOR","->",227],["T_STRING","getFileName",227],"(",")",")",";",["T_WHITESPACE","\n        ",227],["T_RETURN","return",228],["T_WHITESPACE"," ",228],["T_VARIABLE","$this",228],";",["T_WHITESPACE","\n    ",228],"}",["T_WHITESPACE","\n\n    ",229],["T_DOC_COMMENT","\/**\n     * Open backup file (write or read mode)\n     *\n     * @param bool $write\n     * @return Mage_Backup_Model_Backup\n     *\/",231],["T_WHITESPACE","\n    ",236],["T_PUBLIC","public",237],["T_WHITESPACE"," ",237],["T_FUNCTION","function",237],["T_WHITESPACE"," ",237],["T_STRING","open",237],"(",["T_VARIABLE","$write",237],["T_WHITESPACE"," ",237],"=",["T_WHITESPACE"," ",237],["T_STRING","false",237],")",["T_WHITESPACE","\n    ",237],"{",["T_WHITESPACE","\n        ",238],["T_IF","if",239],["T_WHITESPACE"," ",239],"(",["T_STRING","is_null",239],"(",["T_VARIABLE","$this",239],["T_OBJECT_OPERATOR","->",239],["T_STRING","getPath",239],"(",")",")",")",["T_WHITESPACE"," ",239],"{",["T_WHITESPACE","\n            ",239],["T_STRING","Mage",240],["T_DOUBLE_COLON","::",240],["T_STRING","exception",240],"(",["T_CONSTANT_ENCAPSED_STRING","'Mage_Backup'",240],",",["T_WHITESPACE"," ",240],["T_STRING","Mage",240],["T_DOUBLE_COLON","::",240],["T_STRING","helper",240],"(",["T_CONSTANT_ENCAPSED_STRING","'backup'",240],")",["T_OBJECT_OPERATOR","->",240],["T_STRING","__",240],"(",["T_CONSTANT_ENCAPSED_STRING","'Backup file path was not specified.'",240],")",")",";",["T_WHITESPACE","\n        ",240],"}",["T_WHITESPACE","\n\n        ",241],["T_VARIABLE","$ioAdapter",243],["T_WHITESPACE"," ",243],"=",["T_WHITESPACE"," ",243],["T_NEW","new",243],["T_WHITESPACE"," ",243],["T_STRING","Varien_Io_File",243],"(",")",";",["T_WHITESPACE","\n        ",243],["T_TRY","try",244],["T_WHITESPACE"," ",244],"{",["T_WHITESPACE","\n            ",244],["T_VARIABLE","$path",245],["T_WHITESPACE"," ",245],"=",["T_WHITESPACE"," ",245],["T_VARIABLE","$ioAdapter",245],["T_OBJECT_OPERATOR","->",245],["T_STRING","getCleanPath",245],"(",["T_VARIABLE","$this",245],["T_OBJECT_OPERATOR","->",245],["T_STRING","getPath",245],"(",")",")",";",["T_WHITESPACE","\n            ",245],["T_VARIABLE","$ioAdapter",246],["T_OBJECT_OPERATOR","->",246],["T_STRING","checkAndCreateFolder",246],"(",["T_VARIABLE","$path",246],")",";",["T_WHITESPACE","\n            ",246],["T_VARIABLE","$filePath",247],["T_WHITESPACE"," ",247],"=",["T_WHITESPACE"," ",247],["T_VARIABLE","$path",247],["T_WHITESPACE"," ",247],".",["T_WHITESPACE"," ",247],["T_STRING","DS",247],["T_WHITESPACE"," ",247],".",["T_WHITESPACE"," ",247],["T_VARIABLE","$this",247],["T_OBJECT_OPERATOR","->",247],["T_STRING","getFileName",247],"(",")",";",["T_WHITESPACE","\n        ",247],"}",["T_WHITESPACE","\n        ",248],["T_CATCH","catch",249],["T_WHITESPACE"," ",249],"(",["T_STRING","Exception",249],["T_WHITESPACE"," ",249],["T_VARIABLE","$e",249],")",["T_WHITESPACE"," ",249],"{",["T_WHITESPACE","\n            ",249],["T_STRING","Mage",250],["T_DOUBLE_COLON","::",250],["T_STRING","exception",250],"(",["T_CONSTANT_ENCAPSED_STRING","'Mage_Backup'",250],",",["T_WHITESPACE"," ",250],["T_VARIABLE","$e",250],["T_OBJECT_OPERATOR","->",250],["T_STRING","getMessage",250],"(",")",")",";",["T_WHITESPACE","\n        ",250],"}",["T_WHITESPACE","\n\n        ",251],["T_IF","if",253],["T_WHITESPACE"," ",253],"(",["T_VARIABLE","$write",253],["T_WHITESPACE"," ",253],["T_BOOLEAN_AND","&&",253],["T_WHITESPACE"," ",253],["T_VARIABLE","$ioAdapter",253],["T_OBJECT_OPERATOR","->",253],["T_STRING","fileExists",253],"(",["T_VARIABLE","$filePath",253],")",")",["T_WHITESPACE"," ",253],"{",["T_WHITESPACE","\n            ",253],["T_VARIABLE","$ioAdapter",254],["T_OBJECT_OPERATOR","->",254],["T_STRING","rm",254],"(",["T_VARIABLE","$filePath",254],")",";",["T_WHITESPACE","\n        ",254],"}",["T_WHITESPACE","\n        ",255],["T_IF","if",256],["T_WHITESPACE"," ",256],"(","!",["T_VARIABLE","$write",256],["T_WHITESPACE"," ",256],["T_BOOLEAN_AND","&&",256],["T_WHITESPACE"," ",256],"!",["T_VARIABLE","$ioAdapter",256],["T_OBJECT_OPERATOR","->",256],["T_STRING","fileExists",256],"(",["T_VARIABLE","$filePath",256],")",")",["T_WHITESPACE"," ",256],"{",["T_WHITESPACE","\n            ",256],["T_STRING","Mage",257],["T_DOUBLE_COLON","::",257],["T_STRING","exception",257],"(",["T_CONSTANT_ENCAPSED_STRING","'Mage_Backup'",257],",",["T_WHITESPACE"," ",257],["T_STRING","Mage",257],["T_DOUBLE_COLON","::",257],["T_STRING","helper",257],"(",["T_CONSTANT_ENCAPSED_STRING","'backup'",257],")",["T_OBJECT_OPERATOR","->",257],["T_STRING","__",257],"(",["T_CONSTANT_ENCAPSED_STRING","'Backup file \"%s\" does not exist.'",257],",",["T_WHITESPACE"," ",257],["T_VARIABLE","$this",257],["T_OBJECT_OPERATOR","->",257],["T_STRING","getFileName",257],"(",")",")",")",";",["T_WHITESPACE","\n        ",257],"}",["T_WHITESPACE","\n\n        ",258],["T_VARIABLE","$mode",260],["T_WHITESPACE"," ",260],"=",["T_WHITESPACE"," ",260],["T_VARIABLE","$write",260],["T_WHITESPACE"," ",260],"?",["T_WHITESPACE"," ",260],["T_CONSTANT_ENCAPSED_STRING","'wb'",260],["T_WHITESPACE"," ",260],".",["T_WHITESPACE"," ",260],["T_STRING","self",260],["T_DOUBLE_COLON","::",260],["T_STRING","COMPRESS_RATE",260],["T_WHITESPACE"," ",260],":",["T_WHITESPACE"," ",260],["T_CONSTANT_ENCAPSED_STRING","'rb'",260],";",["T_WHITESPACE","\n\n        ",260],["T_VARIABLE","$this",262],["T_OBJECT_OPERATOR","->",262],["T_STRING","_handler",262],["T_WHITESPACE"," ",262],"=",["T_WHITESPACE"," ",262],"@",["T_STRING","gzopen",262],"(",["T_VARIABLE","$filePath",262],",",["T_WHITESPACE"," ",262],["T_VARIABLE","$mode",262],")",";",["T_WHITESPACE","\n\n        ",262],["T_IF","if",264],["T_WHITESPACE"," ",264],"(","!",["T_VARIABLE","$this",264],["T_OBJECT_OPERATOR","->",264],["T_STRING","_handler",264],")",["T_WHITESPACE"," ",264],"{",["T_WHITESPACE","\n            ",264],["T_THROW","throw",265],["T_WHITESPACE"," ",265],["T_NEW","new",265],["T_WHITESPACE"," ",265],["T_STRING","Mage_Backup_Exception_NotEnoughPermissions",265],"(",["T_WHITESPACE","\n                ",265],["T_STRING","Mage",266],["T_DOUBLE_COLON","::",266],["T_STRING","helper",266],"(",["T_CONSTANT_ENCAPSED_STRING","'backup'",266],")",["T_OBJECT_OPERATOR","->",266],["T_STRING","__",266],"(",["T_CONSTANT_ENCAPSED_STRING","'Backup file \"%s\" cannot be read from or written to.'",266],",",["T_WHITESPACE"," ",266],["T_VARIABLE","$this",266],["T_OBJECT_OPERATOR","->",266],["T_STRING","getFileName",266],"(",")",")",["T_WHITESPACE","\n            ",266],")",";",["T_WHITESPACE","\n        ",267],"}",["T_WHITESPACE","\n\n        ",268],["T_RETURN","return",270],["T_WHITESPACE"," ",270],["T_VARIABLE","$this",270],";",["T_WHITESPACE","\n    ",270],"}",["T_WHITESPACE","\n\n    ",271],["T_DOC_COMMENT","\/**\n     * Read backup uncomressed data\n     *\n     * @param int $length\n     * @return string\n     *\/",273],["T_WHITESPACE","\n    ",278],["T_PUBLIC","public",279],["T_WHITESPACE"," ",279],["T_FUNCTION","function",279],["T_WHITESPACE"," ",279],["T_STRING","read",279],"(",["T_VARIABLE","$length",279],")",["T_WHITESPACE","\n    ",279],"{",["T_WHITESPACE","\n        ",280],["T_IF","if",281],["T_WHITESPACE"," ",281],"(",["T_STRING","is_null",281],"(",["T_VARIABLE","$this",281],["T_OBJECT_OPERATOR","->",281],["T_STRING","_handler",281],")",")",["T_WHITESPACE"," ",281],"{",["T_WHITESPACE","\n            ",281],["T_STRING","Mage",282],["T_DOUBLE_COLON","::",282],["T_STRING","exception",282],"(",["T_CONSTANT_ENCAPSED_STRING","'Mage_Backup'",282],",",["T_WHITESPACE"," ",282],["T_STRING","Mage",282],["T_DOUBLE_COLON","::",282],["T_STRING","helper",282],"(",["T_CONSTANT_ENCAPSED_STRING","'backup'",282],")",["T_OBJECT_OPERATOR","->",282],["T_STRING","__",282],"(",["T_CONSTANT_ENCAPSED_STRING","'Backup file handler was unspecified.'",282],")",")",";",["T_WHITESPACE","\n        ",282],"}",["T_WHITESPACE","\n\n        ",283],["T_RETURN","return",285],["T_WHITESPACE"," ",285],["T_STRING","gzread",285],"(",["T_VARIABLE","$this",285],["T_OBJECT_OPERATOR","->",285],["T_STRING","_handler",285],",",["T_WHITESPACE"," ",285],["T_VARIABLE","$length",285],")",";",["T_WHITESPACE","\n    ",285],"}",["T_WHITESPACE","\n\n    ",286],["T_PUBLIC","public",288],["T_WHITESPACE"," ",288],["T_FUNCTION","function",288],["T_WHITESPACE"," ",288],["T_STRING","eof",288],"(",")",["T_WHITESPACE","\n    ",288],"{",["T_WHITESPACE","\n        ",289],["T_IF","if",290],["T_WHITESPACE"," ",290],"(",["T_STRING","is_null",290],"(",["T_VARIABLE","$this",290],["T_OBJECT_OPERATOR","->",290],["T_STRING","_handler",290],")",")",["T_WHITESPACE"," ",290],"{",["T_WHITESPACE","\n            ",290],["T_STRING","Mage",291],["T_DOUBLE_COLON","::",291],["T_STRING","exception",291],"(",["T_CONSTANT_ENCAPSED_STRING","'Mage_Backup'",291],",",["T_WHITESPACE"," ",291],["T_STRING","Mage",291],["T_DOUBLE_COLON","::",291],["T_STRING","helper",291],"(",["T_CONSTANT_ENCAPSED_STRING","'backup'",291],")",["T_OBJECT_OPERATOR","->",291],["T_STRING","__",291],"(",["T_CONSTANT_ENCAPSED_STRING","'Backup file handler was unspecified.'",291],")",")",";",["T_WHITESPACE","\n        ",291],"}",["T_WHITESPACE","\n\n        ",292],["T_RETURN","return",294],["T_WHITESPACE"," ",294],["T_STRING","gzeof",294],"(",["T_VARIABLE","$this",294],["T_OBJECT_OPERATOR","->",294],["T_STRING","_handler",294],")",";",["T_WHITESPACE","\n    ",294],"}",["T_WHITESPACE","\n\n    ",295],["T_DOC_COMMENT","\/**\n     * Write to backup file\n     *\n     * @param string $string\n     * @return Mage_Backup_Model_Backup\n     *\/",297],["T_WHITESPACE","\n    ",302],["T_PUBLIC","public",303],["T_WHITESPACE"," ",303],["T_FUNCTION","function",303],["T_WHITESPACE"," ",303],["T_STRING","write",303],"(",["T_VARIABLE","$string",303],")",["T_WHITESPACE","\n    ",303],"{",["T_WHITESPACE","\n        ",304],["T_IF","if",305],["T_WHITESPACE"," ",305],"(",["T_STRING","is_null",305],"(",["T_VARIABLE","$this",305],["T_OBJECT_OPERATOR","->",305],["T_STRING","_handler",305],")",")",["T_WHITESPACE"," ",305],"{",["T_WHITESPACE","\n            ",305],["T_STRING","Mage",306],["T_DOUBLE_COLON","::",306],["T_STRING","exception",306],"(",["T_CONSTANT_ENCAPSED_STRING","'Mage_Backup'",306],",",["T_WHITESPACE"," ",306],["T_STRING","Mage",306],["T_DOUBLE_COLON","::",306],["T_STRING","helper",306],"(",["T_CONSTANT_ENCAPSED_STRING","'backup'",306],")",["T_OBJECT_OPERATOR","->",306],["T_STRING","__",306],"(",["T_CONSTANT_ENCAPSED_STRING","'Backup file handler was unspecified.'",306],")",")",";",["T_WHITESPACE","\n        ",306],"}",["T_WHITESPACE","\n\n        ",307],["T_TRY","try",309],["T_WHITESPACE"," ",309],"{",["T_WHITESPACE","\n            ",309],["T_STRING","gzwrite",310],"(",["T_VARIABLE","$this",310],["T_OBJECT_OPERATOR","->",310],["T_STRING","_handler",310],",",["T_WHITESPACE"," ",310],["T_VARIABLE","$string",310],")",";",["T_WHITESPACE","\n        ",310],"}",["T_WHITESPACE","\n        ",311],["T_CATCH","catch",312],["T_WHITESPACE"," ",312],"(",["T_STRING","Exception",312],["T_WHITESPACE"," ",312],["T_VARIABLE","$e",312],")",["T_WHITESPACE"," ",312],"{",["T_WHITESPACE","\n            ",312],["T_STRING","Mage",313],["T_DOUBLE_COLON","::",313],["T_STRING","exception",313],"(",["T_CONSTANT_ENCAPSED_STRING","'Mage_Backup'",313],",",["T_WHITESPACE"," ",313],["T_STRING","Mage",313],["T_DOUBLE_COLON","::",313],["T_STRING","helper",313],"(",["T_CONSTANT_ENCAPSED_STRING","'backup'",313],")",["T_OBJECT_OPERATOR","->",313],["T_STRING","__",313],"(",["T_CONSTANT_ENCAPSED_STRING","'An error occurred while writing to the backup file \"%s\".'",313],",",["T_WHITESPACE"," ",313],["T_VARIABLE","$this",313],["T_OBJECT_OPERATOR","->",313],["T_STRING","getFileName",313],"(",")",")",")",";",["T_WHITESPACE","\n        ",313],"}",["T_WHITESPACE","\n\n        ",314],["T_RETURN","return",316],["T_WHITESPACE"," ",316],["T_VARIABLE","$this",316],";",["T_WHITESPACE","\n    ",316],"}",["T_WHITESPACE","\n\n    ",317],["T_DOC_COMMENT","\/**\n     * Close open backup file\n     *\n     * @return Mage_Backup_Model_Backup\n     *\/",319],["T_WHITESPACE","\n    ",323],["T_PUBLIC","public",324],["T_WHITESPACE"," ",324],["T_FUNCTION","function",324],["T_WHITESPACE"," ",324],["T_STRING","close",324],"(",")",["T_WHITESPACE","\n    ",324],"{",["T_WHITESPACE","\n        ",325],"@",["T_STRING","gzclose",326],"(",["T_VARIABLE","$this",326],["T_OBJECT_OPERATOR","->",326],["T_STRING","_handler",326],")",";",["T_WHITESPACE","\n        ",326],["T_VARIABLE","$this",327],["T_OBJECT_OPERATOR","->",327],["T_STRING","_handler",327],["T_WHITESPACE"," ",327],"=",["T_WHITESPACE"," ",327],["T_STRING","null",327],";",["T_WHITESPACE","\n\n        ",327],["T_RETURN","return",329],["T_WHITESPACE"," ",329],["T_VARIABLE","$this",329],";",["T_WHITESPACE","\n    ",329],"}",["T_WHITESPACE","\n\n    ",330],["T_DOC_COMMENT","\/**\n     * Print output\n     *\n     *\/",332],["T_WHITESPACE","\n    ",335],["T_PUBLIC","public",336],["T_WHITESPACE"," ",336],["T_FUNCTION","function",336],["T_WHITESPACE"," ",336],["T_STRING","output",336],"(",")",["T_WHITESPACE","\n    ",336],"{",["T_WHITESPACE","\n        ",337],["T_IF","if",338],["T_WHITESPACE"," ",338],"(","!",["T_VARIABLE","$this",338],["T_OBJECT_OPERATOR","->",338],["T_STRING","exists",338],"(",")",")",["T_WHITESPACE"," ",338],"{",["T_WHITESPACE","\n            ",338],["T_RETURN","return",339],["T_WHITESPACE"," ",339],";",["T_WHITESPACE","\n        ",339],"}",["T_WHITESPACE","\n\n        ",340],["T_VARIABLE","$ioAdapter",342],["T_WHITESPACE"," ",342],"=",["T_WHITESPACE"," ",342],["T_NEW","new",342],["T_WHITESPACE"," ",342],["T_STRING","Varien_Io_File",342],"(",")",";",["T_WHITESPACE","\n        ",342],["T_VARIABLE","$ioAdapter",343],["T_OBJECT_OPERATOR","->",343],["T_STRING","open",343],"(",["T_ARRAY","array",343],"(",["T_CONSTANT_ENCAPSED_STRING","'path'",343],["T_WHITESPACE"," ",343],["T_DOUBLE_ARROW","=>",343],["T_WHITESPACE"," ",343],["T_VARIABLE","$this",343],["T_OBJECT_OPERATOR","->",343],["T_STRING","getPath",343],"(",")",")",")",";",["T_WHITESPACE","\n\n        ",343],["T_VARIABLE","$ioAdapter",345],["T_OBJECT_OPERATOR","->",345],["T_STRING","streamOpen",345],"(",["T_VARIABLE","$this",345],["T_OBJECT_OPERATOR","->",345],["T_STRING","getFileName",345],"(",")",",",["T_WHITESPACE"," ",345],["T_CONSTANT_ENCAPSED_STRING","'r'",345],")",";",["T_WHITESPACE","\n        ",345],["T_WHILE","while",346],["T_WHITESPACE"," ",346],"(",["T_VARIABLE","$buffer",346],["T_WHITESPACE"," ",346],"=",["T_WHITESPACE"," ",346],["T_VARIABLE","$ioAdapter",346],["T_OBJECT_OPERATOR","->",346],["T_STRING","streamRead",346],"(",")",")",["T_WHITESPACE"," ",346],"{",["T_WHITESPACE","\n            ",346],["T_ECHO","echo",347],["T_WHITESPACE"," ",347],["T_VARIABLE","$buffer",347],";",["T_WHITESPACE","\n        ",347],"}",["T_WHITESPACE","\n        ",348],["T_VARIABLE","$ioAdapter",349],["T_OBJECT_OPERATOR","->",349],["T_STRING","streamClose",349],"(",")",";",["T_WHITESPACE","\n    ",349],"}",["T_WHITESPACE","\n\n    ",350],["T_PUBLIC","public",352],["T_WHITESPACE"," ",352],["T_FUNCTION","function",352],["T_WHITESPACE"," ",352],["T_STRING","getSize",352],"(",")",["T_WHITESPACE","\n    ",352],"{",["T_WHITESPACE","\n        ",353],["T_IF","if",354],["T_WHITESPACE"," ",354],"(","!",["T_STRING","is_null",354],"(",["T_VARIABLE","$this",354],["T_OBJECT_OPERATOR","->",354],["T_STRING","getData",354],"(",["T_CONSTANT_ENCAPSED_STRING","'size'",354],")",")",")",["T_WHITESPACE"," ",354],"{",["T_WHITESPACE","\n            ",354],["T_RETURN","return",355],["T_WHITESPACE"," ",355],["T_VARIABLE","$this",355],["T_OBJECT_OPERATOR","->",355],["T_STRING","getData",355],"(",["T_CONSTANT_ENCAPSED_STRING","'size'",355],")",";",["T_WHITESPACE","\n        ",355],"}",["T_WHITESPACE","\n\n        ",356],["T_IF","if",358],["T_WHITESPACE"," ",358],"(",["T_VARIABLE","$this",358],["T_OBJECT_OPERATOR","->",358],["T_STRING","exists",358],"(",")",")",["T_WHITESPACE"," ",358],"{",["T_WHITESPACE","\n            ",358],["T_VARIABLE","$this",359],["T_OBJECT_OPERATOR","->",359],["T_STRING","setData",359],"(",["T_CONSTANT_ENCAPSED_STRING","'size'",359],",",["T_WHITESPACE"," ",359],["T_STRING","filesize",359],"(",["T_VARIABLE","$this",359],["T_OBJECT_OPERATOR","->",359],["T_STRING","getPath",359],"(",")",["T_WHITESPACE"," ",359],".",["T_WHITESPACE"," ",359],["T_STRING","DS",359],["T_WHITESPACE"," ",359],".",["T_WHITESPACE"," ",359],["T_VARIABLE","$this",359],["T_OBJECT_OPERATOR","->",359],["T_STRING","getFileName",359],"(",")",")",")",";",["T_WHITESPACE","\n            ",359],["T_RETURN","return",360],["T_WHITESPACE"," ",360],["T_VARIABLE","$this",360],["T_OBJECT_OPERATOR","->",360],["T_STRING","getData",360],"(",["T_CONSTANT_ENCAPSED_STRING","'size'",360],")",";",["T_WHITESPACE","\n        ",360],"}",["T_WHITESPACE","\n\n        ",361],["T_RETURN","return",363],["T_WHITESPACE"," ",363],["T_LNUMBER","0",363],";",["T_WHITESPACE","\n    ",363],"}",["T_WHITESPACE","\n\n    ",364],["T_DOC_COMMENT","\/**\n     * Validate user password\n     *\n     * @param string $password\n     * @return bool\n     *\/",366],["T_WHITESPACE","\n    ",371],["T_PUBLIC","public",372],["T_WHITESPACE"," ",372],["T_FUNCTION","function",372],["T_WHITESPACE"," ",372],["T_STRING","validateUserPassword",372],"(",["T_VARIABLE","$password",372],")",["T_WHITESPACE","\n    ",372],"{",["T_WHITESPACE","\n        ",373],["T_VARIABLE","$userPasswordHash",374],["T_WHITESPACE"," ",374],"=",["T_WHITESPACE"," ",374],["T_STRING","Mage",374],["T_DOUBLE_COLON","::",374],["T_STRING","getModel",374],"(",["T_CONSTANT_ENCAPSED_STRING","'admin\/session'",374],")",["T_OBJECT_OPERATOR","->",374],["T_STRING","getUser",374],"(",")",["T_OBJECT_OPERATOR","->",374],["T_STRING","getPassword",374],"(",")",";",["T_WHITESPACE","\n        ",374],["T_RETURN","return",375],["T_WHITESPACE"," ",375],["T_STRING","Mage",375],["T_DOUBLE_COLON","::",375],["T_STRING","helper",375],"(",["T_CONSTANT_ENCAPSED_STRING","'core'",375],")",["T_OBJECT_OPERATOR","->",375],["T_STRING","validateHash",375],"(",["T_VARIABLE","$password",375],",",["T_WHITESPACE"," ",375],["T_VARIABLE","$userPasswordHash",375],")",";",["T_WHITESPACE","\n    ",375],"}",["T_WHITESPACE","\n\n    ",376],["T_DOC_COMMENT","\/**\n     * Load backup by it's type and creation timestamp\n     *\n     * @param int $timestamp\n     * @param string $type\n     * @return Mage_Backup_Model_Backup\n     *\/",378],["T_WHITESPACE","\n    ",384],["T_PUBLIC","public",385],["T_WHITESPACE"," ",385],["T_FUNCTION","function",385],["T_WHITESPACE"," ",385],["T_STRING","loadByTimeAndType",385],"(",["T_VARIABLE","$timestamp",385],",",["T_WHITESPACE"," ",385],["T_VARIABLE","$type",385],")",["T_WHITESPACE","\n    ",385],"{",["T_WHITESPACE","\n        ",386],["T_VARIABLE","$backupsCollection",387],["T_WHITESPACE"," ",387],"=",["T_WHITESPACE"," ",387],["T_STRING","Mage",387],["T_DOUBLE_COLON","::",387],["T_STRING","getSingleton",387],"(",["T_CONSTANT_ENCAPSED_STRING","'backup\/fs_collection'",387],")",";",["T_WHITESPACE","\n        ",387],["T_VARIABLE","$backupId",388],["T_WHITESPACE"," ",388],"=",["T_WHITESPACE"," ",388],["T_VARIABLE","$timestamp",388],["T_WHITESPACE"," ",388],".",["T_WHITESPACE"," ",388],["T_CONSTANT_ENCAPSED_STRING","'_'",388],["T_WHITESPACE"," ",388],".",["T_WHITESPACE"," ",388],["T_VARIABLE","$type",388],";",["T_WHITESPACE","\n\n        ",388],["T_FOREACH","foreach",390],["T_WHITESPACE"," ",390],"(",["T_VARIABLE","$backupsCollection",390],["T_WHITESPACE"," ",390],["T_AS","as",390],["T_WHITESPACE"," ",390],["T_VARIABLE","$backup",390],")",["T_WHITESPACE"," ",390],"{",["T_WHITESPACE","\n            ",390],["T_IF","if",391],["T_WHITESPACE"," ",391],"(",["T_VARIABLE","$backup",391],["T_OBJECT_OPERATOR","->",391],["T_STRING","getId",391],"(",")",["T_WHITESPACE"," ",391],["T_IS_EQUAL","==",391],["T_WHITESPACE"," ",391],["T_VARIABLE","$backupId",391],")",["T_WHITESPACE"," ",391],"{",["T_WHITESPACE","\n                ",391],["T_VARIABLE","$this",392],["T_OBJECT_OPERATOR","->",392],["T_STRING","setType",392],"(",["T_VARIABLE","$backup",392],["T_OBJECT_OPERATOR","->",392],["T_STRING","getType",392],"(",")",")",["T_WHITESPACE","\n                    ",392],["T_OBJECT_OPERATOR","->",393],["T_STRING","setTime",393],"(",["T_VARIABLE","$backup",393],["T_OBJECT_OPERATOR","->",393],["T_STRING","getTime",393],"(",")",")",["T_WHITESPACE","\n                    ",393],["T_OBJECT_OPERATOR","->",394],["T_STRING","setName",394],"(",["T_VARIABLE","$backup",394],["T_OBJECT_OPERATOR","->",394],["T_STRING","getName",394],"(",")",")",["T_WHITESPACE","\n                    ",394],["T_OBJECT_OPERATOR","->",395],["T_STRING","setPath",395],"(",["T_VARIABLE","$backup",395],["T_OBJECT_OPERATOR","->",395],["T_STRING","getPath",395],"(",")",")",";",["T_WHITESPACE","\n                ",395],["T_BREAK","break",396],";",["T_WHITESPACE","\n            ",396],"}",["T_WHITESPACE","\n        ",397],"}",["T_WHITESPACE","\n\n        ",398],["T_RETURN","return",400],["T_WHITESPACE"," ",400],["T_VARIABLE","$this",400],";",["T_WHITESPACE","\n    ",400],"}",["T_WHITESPACE","\n",401],"}",["T_WHITESPACE","\n",402]]
[["T_OPEN_TAG","<?php\n",1],["T_DOC_COMMENT","\/**\n * Magento\n *\n * NOTICE OF LICENSE\n *\n * This source file is subject to the Open Software License (OSL 3.0)\n * that is bundled with this package in the file LICENSE.txt.\n * It is also available through the world-wide-web at this URL:\n * http:\/\/opensource.org\/licenses\/osl-3.0.php\n * If you did not receive a copy of the license and are unable to\n * obtain it through the world-wide-web, please send an email\n * to license@magento.com so we can send you a copy immediately.\n *\n * DISCLAIMER\n *\n * Do not edit or add to this file if you wish to upgrade Magento to newer\n * versions in the future. If you wish to customize Magento for your\n * needs please refer to http:\/\/www.magento.com for more information.\n *\n * @category    Mage\n * @package     Mage_Api\n * @copyright  Copyright (c) 2006-2016 X.commerce, Inc. and affiliates (http:\/\/www.magento.com)\n * @license    http:\/\/opensource.org\/licenses\/osl-3.0.php  Open Software License (OSL 3.0)\n *\/",2],["T_WHITESPACE","\n\n",25],["T_DOC_COMMENT","\/**\n * Webservice soap adapter\n *\n * @category   Mage\n * @package    Mage_Api\n * @author     Magento Core Team <core@magentocommerce.com>\n *\/",27],["T_WHITESPACE","\n",33],["T_CLASS","class",34],["T_WHITESPACE"," ",34],["T_STRING","Mage_Api_Model_Server_Adapter_Soap",34],["T_WHITESPACE","\n    ",34],["T_EXTENDS","extends",35],["T_WHITESPACE"," ",35],["T_STRING","Varien_Object",35],["T_WHITESPACE","\n    ",35],["T_IMPLEMENTS","implements",36],["T_WHITESPACE"," ",36],["T_STRING","Mage_Api_Model_Server_Adapter_Interface",36],["T_WHITESPACE","\n",36],"{",["T_WHITESPACE","\n    ",37],["T_DOC_COMMENT","\/**\n     * Wsdl config\n     *\n     * @var Varien_Object\n     *\/",38],["T_WHITESPACE","\n    ",42],["T_PROTECTED","protected",43],["T_WHITESPACE"," ",43],["T_VARIABLE","$wsdlConfig",43],["T_WHITESPACE"," ",43],"=",["T_WHITESPACE"," ",43],["T_STRING","null",43],";",["T_WHITESPACE","\n\n    ",43],["T_DOC_COMMENT","\/**\n     * Soap server\n     *\n     * @var SoapServer\n     *\/",45],["T_WHITESPACE","\n    ",49],["T_PROTECTED","protected",50],["T_WHITESPACE"," ",50],["T_VARIABLE","$_soap",50],["T_WHITESPACE"," ",50],"=",["T_WHITESPACE"," ",50],["T_STRING","null",50],";",["T_WHITESPACE","\n\n    ",50],["T_DOC_COMMENT","\/**\n     * Internal constructor\n     *\/",52],["T_WHITESPACE","\n    ",54],["T_PROTECTED","protected",55],["T_WHITESPACE"," ",55],["T_FUNCTION","function",55],["T_WHITESPACE"," ",55],["T_STRING","_construct",55],"(",")",["T_WHITESPACE","\n    ",55],"{",["T_WHITESPACE","\n        ",56],["T_VARIABLE","$this",57],["T_OBJECT_OPERATOR","->",57],["T_STRING","wsdlConfig",57],["T_WHITESPACE"," ",57],"=",["T_WHITESPACE"," ",57],["T_VARIABLE","$this",57],["T_OBJECT_OPERATOR","->",57],["T_STRING","_getWsdlConfig",57],"(",")",";",["T_WHITESPACE","\n    ",57],"}",["T_WHITESPACE","\n\n    ",58],["T_DOC_COMMENT","\/**\n     * Get wsdl config\n     *\n     * @return Varien_Object\n     *\/",60],["T_WHITESPACE","\n    ",64],["T_PROTECTED","protected",65],["T_WHITESPACE"," ",65],["T_FUNCTION","function",65],["T_WHITESPACE"," ",65],["T_STRING","_getWsdlConfig",65],"(",")",["T_WHITESPACE","\n    ",65],"{",["T_WHITESPACE","\n        ",66],["T_VARIABLE","$wsdlConfig",67],["T_WHITESPACE"," ",67],"=",["T_WHITESPACE"," ",67],["T_NEW","new",67],["T_WHITESPACE"," ",67],["T_STRING","Varien_Object",67],"(",")",";",["T_WHITESPACE","\n        ",67],["T_VARIABLE","$queryParams",68],["T_WHITESPACE"," ",68],"=",["T_WHITESPACE"," ",68],["T_VARIABLE","$this",68],["T_OBJECT_OPERATOR","->",68],["T_STRING","getController",68],"(",")",["T_OBJECT_OPERATOR","->",68],["T_STRING","getRequest",68],"(",")",["T_OBJECT_OPERATOR","->",68],["T_STRING","getQuery",68],"(",")",";",["T_WHITESPACE","\n        ",68],["T_IF","if",69],["T_WHITESPACE"," ",69],"(",["T_ISSET","isset",69],"(",["T_VARIABLE","$queryParams",69],"[",["T_CONSTANT_ENCAPSED_STRING","'wsdl'",69],"]",")",")",["T_WHITESPACE"," ",69],"{",["T_WHITESPACE","\n            ",69],["T_UNSET","unset",70],"(",["T_VARIABLE","$queryParams",70],"[",["T_CONSTANT_ENCAPSED_STRING","'wsdl'",70],"]",")",";",["T_WHITESPACE","\n        ",70],"}",["T_WHITESPACE","\n\n        ",71],["T_VARIABLE","$wsdlConfig",73],["T_OBJECT_OPERATOR","->",73],["T_STRING","setUrl",73],"(",["T_STRING","htmlspecialchars",73],"(",["T_STRING","Mage",73],["T_DOUBLE_COLON","::",73],["T_STRING","getUrl",73],"(",["T_CONSTANT_ENCAPSED_STRING","'*\/*\/*'",73],",",["T_WHITESPACE"," ",73],["T_ARRAY","array",73],"(",["T_CONSTANT_ENCAPSED_STRING","'_query'",73],["T_DOUBLE_ARROW","=>",73],["T_VARIABLE","$queryParams",73],")",")",")",")",";",["T_WHITESPACE","\n        ",73],["T_VARIABLE","$wsdlConfig",74],["T_OBJECT_OPERATOR","->",74],["T_STRING","setName",74],"(",["T_CONSTANT_ENCAPSED_STRING","'Magento'",74],")",";",["T_WHITESPACE","\n        ",74],["T_VARIABLE","$wsdlConfig",75],["T_OBJECT_OPERATOR","->",75],["T_STRING","setHandler",75],"(",["T_VARIABLE","$this",75],["T_OBJECT_OPERATOR","->",75],["T_STRING","getHandler",75],"(",")",")",";",["T_WHITESPACE","\n        ",75],["T_RETURN","return",76],["T_WHITESPACE"," ",76],["T_VARIABLE","$wsdlConfig",76],";",["T_WHITESPACE","\n    ",76],"}",["T_WHITESPACE","\n\n    ",77],["T_DOC_COMMENT","\/**\n     * Set handler class name for webservice\n     *\n     * @param string $handler\n     * @return Mage_Api_Model_Server_Adapter_Soap\n     *\/",79],["T_WHITESPACE","\n    ",84],["T_PUBLIC","public",85],["T_WHITESPACE"," ",85],["T_FUNCTION","function",85],["T_WHITESPACE"," ",85],["T_STRING","setHandler",85],"(",["T_VARIABLE","$handler",85],")",["T_WHITESPACE","\n    ",85],"{",["T_WHITESPACE","\n        ",86],["T_VARIABLE","$this",87],["T_OBJECT_OPERATOR","->",87],["T_STRING","setData",87],"(",["T_CONSTANT_ENCAPSED_STRING","'handler'",87],",",["T_WHITESPACE"," ",87],["T_VARIABLE","$handler",87],")",";",["T_WHITESPACE","\n        ",87],["T_RETURN","return",88],["T_WHITESPACE"," ",88],["T_VARIABLE","$this",88],";",["T_WHITESPACE","\n    ",88],"}",["T_WHITESPACE","\n\n    ",89],["T_DOC_COMMENT","\/**\n     * Retrive handler class name for webservice\n     *\n     * @return string\n     *\/",91],["T_WHITESPACE","\n    ",95],["T_PUBLIC","public",96],["T_WHITESPACE"," ",96],["T_FUNCTION","function",96],["T_WHITESPACE"," ",96],["T_STRING","getHandler",96],"(",")",["T_WHITESPACE","\n    ",96],"{",["T_WHITESPACE","\n        ",97],["T_RETURN","return",98],["T_WHITESPACE"," ",98],["T_VARIABLE","$this",98],["T_OBJECT_OPERATOR","->",98],["T_STRING","getData",98],"(",["T_CONSTANT_ENCAPSED_STRING","'handler'",98],")",";",["T_WHITESPACE","\n    ",98],"}",["T_WHITESPACE","\n\n    ",99],["T_DOC_COMMENT","\/**\n     * Set webservice api controller\n     *\n     * @param Mage_Api_Controller_Action $controller\n     * @return Mage_Api_Model_Server_Adapter_Soap\n     *\/",101],["T_WHITESPACE","\n    ",106],["T_PUBLIC","public",107],["T_WHITESPACE"," ",107],["T_FUNCTION","function",107],["T_WHITESPACE"," ",107],["T_STRING","setController",107],"(",["T_STRING","Mage_Api_Controller_Action",107],["T_WHITESPACE"," ",107],["T_VARIABLE","$controller",107],")",["T_WHITESPACE","\n    ",107],"{",["T_WHITESPACE","\n         ",108],["T_VARIABLE","$this",109],["T_OBJECT_OPERATOR","->",109],["T_STRING","setData",109],"(",["T_CONSTANT_ENCAPSED_STRING","'controller'",109],",",["T_WHITESPACE"," ",109],["T_VARIABLE","$controller",109],")",";",["T_WHITESPACE","\n         ",109],["T_RETURN","return",110],["T_WHITESPACE"," ",110],["T_VARIABLE","$this",110],";",["T_WHITESPACE","\n    ",110],"}",["T_WHITESPACE","\n\n    ",111],["T_DOC_COMMENT","\/**\n     * Retrive webservice api controller. If no controller have been set - emulate it by the use of Varien_Object\n     *\n     * @return Mage_Api_Controller_Action|Varien_Object\n     *\/",113],["T_WHITESPACE","\n    ",117],["T_PUBLIC","public",118],["T_WHITESPACE"," ",118],["T_FUNCTION","function",118],["T_WHITESPACE"," ",118],["T_STRING","getController",118],"(",")",["T_WHITESPACE","\n    ",118],"{",["T_WHITESPACE","\n        ",119],["T_VARIABLE","$controller",120],["T_WHITESPACE"," ",120],"=",["T_WHITESPACE"," ",120],["T_VARIABLE","$this",120],["T_OBJECT_OPERATOR","->",120],["T_STRING","getData",120],"(",["T_CONSTANT_ENCAPSED_STRING","'controller'",120],")",";",["T_WHITESPACE","\n\n        ",120],["T_IF","if",122],["T_WHITESPACE"," ",122],"(",["T_STRING","null",122],["T_WHITESPACE"," ",122],["T_IS_IDENTICAL","===",122],["T_WHITESPACE"," ",122],["T_VARIABLE","$controller",122],")",["T_WHITESPACE"," ",122],"{",["T_WHITESPACE","\n            ",122],["T_VARIABLE","$controller",123],["T_WHITESPACE"," ",123],"=",["T_WHITESPACE"," ",123],["T_NEW","new",123],["T_WHITESPACE"," ",123],["T_STRING","Varien_Object",123],"(",["T_WHITESPACE","\n                ",123],["T_ARRAY","array",124],"(",["T_CONSTANT_ENCAPSED_STRING","'request'",124],["T_WHITESPACE"," ",124],["T_DOUBLE_ARROW","=>",124],["T_WHITESPACE"," ",124],["T_STRING","Mage",124],["T_DOUBLE_COLON","::",124],["T_STRING","app",124],"(",")",["T_OBJECT_OPERATOR","->",124],["T_STRING","getRequest",124],"(",")",",",["T_WHITESPACE"," ",124],["T_CONSTANT_ENCAPSED_STRING","'response'",124],["T_WHITESPACE"," ",124],["T_DOUBLE_ARROW","=>",124],["T_WHITESPACE"," ",124],["T_STRING","Mage",124],["T_DOUBLE_COLON","::",124],["T_STRING","app",124],"(",")",["T_OBJECT_OPERATOR","->",124],["T_STRING","getResponse",124],"(",")",")",["T_WHITESPACE","\n            ",124],")",";",["T_WHITESPACE","\n\n            ",125],["T_VARIABLE","$this",127],["T_OBJECT_OPERATOR","->",127],["T_STRING","setData",127],"(",["T_CONSTANT_ENCAPSED_STRING","'controller'",127],",",["T_WHITESPACE"," ",127],["T_VARIABLE","$controller",127],")",";",["T_WHITESPACE","\n        ",127],"}",["T_WHITESPACE","\n        ",128],["T_RETURN","return",129],["T_WHITESPACE"," ",129],["T_VARIABLE","$controller",129],";",["T_WHITESPACE","\n    ",129],"}",["T_WHITESPACE","\n\n    ",130],["T_DOC_COMMENT","\/**\n     * Run webservice\n     *\n     * @param Mage_Api_Controller_Action $controller\n     * @return Mage_Api_Model_Server_Adapter_Soap\n     *\/",132],["T_WHITESPACE","\n    ",137],["T_PUBLIC","public",138],["T_WHITESPACE"," ",138],["T_FUNCTION","function",138],["T_WHITESPACE"," ",138],["T_STRING","run",138],"(",")",["T_WHITESPACE","\n    ",138],"{",["T_WHITESPACE","\n        ",139],["T_VARIABLE","$apiConfigCharset",140],["T_WHITESPACE"," ",140],"=",["T_WHITESPACE"," ",140],["T_STRING","Mage",140],["T_DOUBLE_COLON","::",140],["T_STRING","getStoreConfig",140],"(",["T_CONSTANT_ENCAPSED_STRING","\"api\/config\/charset\"",140],")",";",["T_WHITESPACE","\n\n        ",140],["T_IF","if",142],["T_WHITESPACE"," ",142],"(",["T_VARIABLE","$this",142],["T_OBJECT_OPERATOR","->",142],["T_STRING","getController",142],"(",")",["T_OBJECT_OPERATOR","->",142],["T_STRING","getRequest",142],"(",")",["T_OBJECT_OPERATOR","->",142],["T_STRING","getParam",142],"(",["T_CONSTANT_ENCAPSED_STRING","'wsdl'",142],")",["T_WHITESPACE"," ",142],["T_IS_NOT_IDENTICAL","!==",142],["T_WHITESPACE"," ",142],["T_STRING","null",142],")",["T_WHITESPACE"," ",142],"{",["T_WHITESPACE","\n            ",142],["T_COMMENT","\/\/ Generating wsdl content from template\n",143],["T_WHITESPACE","            ",144],["T_VARIABLE","$io",144],["T_WHITESPACE"," ",144],"=",["T_WHITESPACE"," ",144],["T_NEW","new",144],["T_WHITESPACE"," ",144],["T_STRING","Varien_Io_File",144],"(",")",";",["T_WHITESPACE","\n            ",144],["T_VARIABLE","$io",145],["T_OBJECT_OPERATOR","->",145],["T_STRING","open",145],"(",["T_ARRAY","array",145],"(",["T_CONSTANT_ENCAPSED_STRING","'path'",145],["T_DOUBLE_ARROW","=>",145],["T_STRING","Mage",145],["T_DOUBLE_COLON","::",145],["T_STRING","getModuleDir",145],"(",["T_CONSTANT_ENCAPSED_STRING","'etc'",145],",",["T_WHITESPACE"," ",145],["T_CONSTANT_ENCAPSED_STRING","'Mage_Api'",145],")",")",")",";",["T_WHITESPACE","\n\n            ",145],["T_VARIABLE","$wsdlContent",147],["T_WHITESPACE"," ",147],"=",["T_WHITESPACE"," ",147],["T_VARIABLE","$io",147],["T_OBJECT_OPERATOR","->",147],["T_STRING","read",147],"(",["T_CONSTANT_ENCAPSED_STRING","'wsdl.xml'",147],")",";",["T_WHITESPACE","\n\n            ",147],["T_VARIABLE","$template",149],["T_WHITESPACE"," ",149],"=",["T_WHITESPACE"," ",149],["T_STRING","Mage",149],["T_DOUBLE_COLON","::",149],["T_STRING","getModel",149],"(",["T_CONSTANT_ENCAPSED_STRING","'core\/email_template_filter'",149],")",";",["T_WHITESPACE","\n\n            ",149],["T_VARIABLE","$template",151],["T_OBJECT_OPERATOR","->",151],["T_STRING","setVariables",151],"(",["T_ARRAY","array",151],"(",["T_CONSTANT_ENCAPSED_STRING","'wsdl'",151],["T_WHITESPACE"," ",151],["T_DOUBLE_ARROW","=>",151],["T_WHITESPACE"," ",151],["T_VARIABLE","$this",151],["T_OBJECT_OPERATOR","->",151],["T_STRING","wsdlConfig",151],")",")",";",["T_WHITESPACE","\n\n            ",151],["T_VARIABLE","$this",153],["T_OBJECT_OPERATOR","->",153],["T_STRING","getController",153],"(",")",["T_OBJECT_OPERATOR","->",153],["T_STRING","getResponse",153],"(",")",["T_WHITESPACE","\n                ",153],["T_OBJECT_OPERATOR","->",154],["T_STRING","clearHeaders",154],"(",")",["T_WHITESPACE","\n                ",154],["T_OBJECT_OPERATOR","->",155],["T_STRING","setHeader",155],"(",["T_CONSTANT_ENCAPSED_STRING","'Content-Type'",155],",",["T_CONSTANT_ENCAPSED_STRING","'text\/xml; charset='",155],".",["T_VARIABLE","$apiConfigCharset",155],")",["T_WHITESPACE","\n                ",155],["T_OBJECT_OPERATOR","->",156],["T_STRING","setBody",156],"(",["T_WHITESPACE","\n                    ",156],["T_STRING","preg_replace",157],"(",["T_WHITESPACE","\n                        ",157],["T_CONSTANT_ENCAPSED_STRING","'\/<\\?xml version=\"([^\\\"]+)\"([^\\>]+)>\/i'",158],",",["T_WHITESPACE","\n                        ",158],["T_CONSTANT_ENCAPSED_STRING","'<?xml version=\"$1\" encoding=\"'",159],".",["T_VARIABLE","$apiConfigCharset",159],".",["T_CONSTANT_ENCAPSED_STRING","'\"?>'",159],",",["T_WHITESPACE","\n                        ",159],["T_VARIABLE","$template",160],["T_OBJECT_OPERATOR","->",160],["T_STRING","filter",160],"(",["T_VARIABLE","$wsdlContent",160],")",["T_WHITESPACE","\n                    ",160],")",["T_WHITESPACE","\n                ",161],")",";",["T_WHITESPACE","\n        ",162],"}",["T_WHITESPACE"," ",163],["T_ELSE","else",163],["T_WHITESPACE"," ",163],"{",["T_WHITESPACE","\n            ",163],["T_TRY","try",164],["T_WHITESPACE"," ",164],"{",["T_WHITESPACE","\n                ",164],["T_VARIABLE","$this",165],["T_OBJECT_OPERATOR","->",165],["T_STRING","_instantiateServer",165],"(",")",";",["T_WHITESPACE","\n\n                ",165],["T_VARIABLE","$this",167],["T_OBJECT_OPERATOR","->",167],["T_STRING","getController",167],"(",")",["T_OBJECT_OPERATOR","->",167],["T_STRING","getResponse",167],"(",")",["T_WHITESPACE","\n                    ",167],["T_OBJECT_OPERATOR","->",168],["T_STRING","clearHeaders",168],"(",")",["T_WHITESPACE","\n                    ",168],["T_OBJECT_OPERATOR","->",169],["T_STRING","setHeader",169],"(",["T_CONSTANT_ENCAPSED_STRING","'Content-Type'",169],",",["T_CONSTANT_ENCAPSED_STRING","'text\/xml; charset='",169],".",["T_VARIABLE","$apiConfigCharset",169],")",["T_WHITESPACE","\n                    ",169],["T_OBJECT_OPERATOR","->",170],["T_STRING","setBody",170],"(",["T_WHITESPACE","\n                            ",170],["T_STRING","preg_replace",171],"(",["T_WHITESPACE","\n                                ",171],["T_CONSTANT_ENCAPSED_STRING","'\/<\\?xml version=\"([^\\\"]+)\"([^\\>]+)>\/i'",172],",",["T_WHITESPACE","\n                                ",172],["T_CONSTANT_ENCAPSED_STRING","'<?xml version=\"$1\" encoding=\"'",173],".",["T_VARIABLE","$apiConfigCharset",173],".",["T_CONSTANT_ENCAPSED_STRING","'\"?>'",173],",",["T_WHITESPACE","\n                                ",173],["T_VARIABLE","$this",174],["T_OBJECT_OPERATOR","->",174],["T_STRING","_soap",174],["T_OBJECT_OPERATOR","->",174],["T_STRING","handle",174],"(",")",["T_WHITESPACE","\n                            ",174],")",["T_WHITESPACE","\n                    ",175],")",";",["T_WHITESPACE","\n            ",176],"}",["T_WHITESPACE"," ",177],["T_CATCH","catch",177],"(",["T_WHITESPACE"," ",177],["T_STRING","Zend_Soap_Server_Exception",177],["T_WHITESPACE"," ",177],["T_VARIABLE","$e",177],["T_WHITESPACE"," ",177],")",["T_WHITESPACE"," ",177],"{",["T_WHITESPACE","\n                ",177],["T_VARIABLE","$this",178],["T_OBJECT_OPERATOR","->",178],["T_STRING","fault",178],"(",["T_WHITESPACE"," ",178],["T_VARIABLE","$e",178],["T_OBJECT_OPERATOR","->",178],["T_STRING","getCode",178],"(",")",",",["T_WHITESPACE"," ",178],["T_VARIABLE","$e",178],["T_OBJECT_OPERATOR","->",178],["T_STRING","getMessage",178],"(",")",["T_WHITESPACE"," ",178],")",";",["T_WHITESPACE","\n            ",178],"}",["T_WHITESPACE"," ",179],["T_CATCH","catch",179],"(",["T_WHITESPACE"," ",179],["T_STRING","Exception",179],["T_WHITESPACE"," ",179],["T_VARIABLE","$e",179],["T_WHITESPACE"," ",179],")",["T_WHITESPACE"," ",179],"{",["T_WHITESPACE","\n                ",179],["T_VARIABLE","$this",180],["T_OBJECT_OPERATOR","->",180],["T_STRING","fault",180],"(",["T_WHITESPACE"," ",180],["T_VARIABLE","$e",180],["T_OBJECT_OPERATOR","->",180],["T_STRING","getCode",180],"(",")",",",["T_WHITESPACE"," ",180],["T_VARIABLE","$e",180],["T_OBJECT_OPERATOR","->",180],["T_STRING","getMessage",180],"(",")",["T_WHITESPACE"," ",180],")",";",["T_WHITESPACE","\n            ",180],"}",["T_WHITESPACE","\n        ",181],"}",["T_WHITESPACE","\n\n        ",182],["T_RETURN","return",184],["T_WHITESPACE"," ",184],["T_VARIABLE","$this",184],";",["T_WHITESPACE","\n    ",184],"}",["T_WHITESPACE","\n\n    ",185],["T_DOC_COMMENT","\/**\n     * Dispatch webservice fault\n     *\n     * @param int $code\n     * @param string $message\n     *\/",187],["T_WHITESPACE","\n    ",192],["T_PUBLIC","public",193],["T_WHITESPACE"," ",193],["T_FUNCTION","function",193],["T_WHITESPACE"," ",193],["T_STRING","fault",193],"(",["T_VARIABLE","$code",193],",",["T_WHITESPACE"," ",193],["T_VARIABLE","$message",193],")",["T_WHITESPACE","\n    ",193],"{",["T_WHITESPACE","\n        ",194],["T_IF","if",195],["T_WHITESPACE"," ",195],"(",["T_VARIABLE","$this",195],["T_OBJECT_OPERATOR","->",195],["T_STRING","_extensionLoaded",195],"(",")",")",["T_WHITESPACE"," ",195],"{",["T_WHITESPACE","\n            ",195],["T_THROW","throw",196],["T_WHITESPACE"," ",196],["T_NEW","new",196],["T_WHITESPACE"," ",196],["T_STRING","SoapFault",196],"(",["T_VARIABLE","$code",196],",",["T_WHITESPACE"," ",196],["T_VARIABLE","$message",196],")",";",["T_WHITESPACE","\n        ",196],"}",["T_WHITESPACE"," ",197],["T_ELSE","else",197],["T_WHITESPACE"," ",197],"{",["T_WHITESPACE","\n            ",197],["T_EXIT","die",198],"(",["T_CONSTANT_ENCAPSED_STRING","'<SOAP-ENV:Envelope xmlns:SOAP-ENV=\"http:\/\/schemas.xmlsoap.org\/soap\/envelope\/\">\n                <SOAP-ENV:Body>\n                <SOAP-ENV:Fault>\n                <faultcode>'",198],["T_WHITESPACE"," ",201],".",["T_WHITESPACE"," ",201],["T_VARIABLE","$code",201],["T_WHITESPACE"," ",201],".",["T_WHITESPACE"," ",201],["T_CONSTANT_ENCAPSED_STRING","'<\/faultcode>\n                <faultstring>'",201],["T_WHITESPACE"," ",202],".",["T_WHITESPACE"," ",202],["T_VARIABLE","$message",202],["T_WHITESPACE"," ",202],".",["T_WHITESPACE"," ",202],["T_CONSTANT_ENCAPSED_STRING","'<\/faultstring>\n                <\/SOAP-ENV:Fault>\n                <\/SOAP-ENV:Body>\n                <\/SOAP-ENV:Envelope>'",202],")",";",["T_WHITESPACE","\n        ",205],"}",["T_WHITESPACE","\n\n    ",206],"}",["T_WHITESPACE","\n\n    ",208],["T_DOC_COMMENT","\/**\n     * Check whether Soap extension is loaded\n     *\n     * @return boolean\n     *\/",210],["T_WHITESPACE","\n    ",214],["T_PROTECTED","protected",215],["T_WHITESPACE"," ",215],["T_FUNCTION","function",215],["T_WHITESPACE"," ",215],["T_STRING","_extensionLoaded",215],"(",")",["T_WHITESPACE","\n    ",215],"{",["T_WHITESPACE","\n        ",216],["T_RETURN","return",217],["T_WHITESPACE"," ",217],["T_STRING","class_exists",217],"(",["T_CONSTANT_ENCAPSED_STRING","'SoapServer'",217],",",["T_WHITESPACE"," ",217],["T_STRING","false",217],")",";",["T_WHITESPACE","\n    ",217],"}",["T_WHITESPACE","\n\n    ",218],["T_DOC_COMMENT","\/**\n     * Transform wsdl url if $_SERVER[\"PHP_AUTH_USER\"] is set\n     *\n     * @param array\n     * @return String\n     *\/",220],["T_WHITESPACE","\n    ",225],["T_PROTECTED","protected",226],["T_WHITESPACE"," ",226],["T_FUNCTION","function",226],["T_WHITESPACE"," ",226],["T_STRING","getWsdlUrl",226],"(",["T_VARIABLE","$params",226],["T_WHITESPACE"," ",226],"=",["T_WHITESPACE"," ",226],["T_STRING","null",226],",",["T_WHITESPACE"," ",226],["T_VARIABLE","$withAuth",226],["T_WHITESPACE"," ",226],"=",["T_WHITESPACE"," ",226],["T_STRING","true",226],")",["T_WHITESPACE","\n    ",226],"{",["T_WHITESPACE","\n        ",227],["T_VARIABLE","$urlModel",228],["T_WHITESPACE"," ",228],"=",["T_WHITESPACE"," ",228],["T_STRING","Mage",228],["T_DOUBLE_COLON","::",228],["T_STRING","getModel",228],"(",["T_CONSTANT_ENCAPSED_STRING","'core\/url'",228],")",["T_WHITESPACE","\n            ",228],["T_OBJECT_OPERATOR","->",229],["T_STRING","setUseSession",229],"(",["T_STRING","false",229],")",";",["T_WHITESPACE","\n\n        ",229],["T_VARIABLE","$wsdlUrl",231],["T_WHITESPACE"," ",231],"=",["T_WHITESPACE"," ",231],["T_VARIABLE","$params",231],["T_WHITESPACE"," ",231],["T_IS_NOT_IDENTICAL","!==",231],["T_WHITESPACE"," ",231],["T_STRING","null",231],["T_WHITESPACE","\n            ",231],"?",["T_WHITESPACE"," ",232],["T_VARIABLE","$urlModel",232],["T_OBJECT_OPERATOR","->",232],["T_STRING","getUrl",232],"(",["T_CONSTANT_ENCAPSED_STRING","'*\/*\/*'",232],",",["T_WHITESPACE"," ",232],["T_ARRAY","array",232],"(",["T_CONSTANT_ENCAPSED_STRING","'_current'",232],["T_WHITESPACE"," ",232],["T_DOUBLE_ARROW","=>",232],["T_WHITESPACE"," ",232],["T_STRING","true",232],",",["T_WHITESPACE"," ",232],["T_CONSTANT_ENCAPSED_STRING","'_query'",232],["T_WHITESPACE"," ",232],["T_DOUBLE_ARROW","=>",232],["T_WHITESPACE"," ",232],["T_VARIABLE","$params",232],")",")",["T_WHITESPACE","\n            ",232],":",["T_WHITESPACE"," ",233],["T_VARIABLE","$urlModel",233],["T_OBJECT_OPERATOR","->",233],["T_STRING","getUrl",233],"(",["T_CONSTANT_ENCAPSED_STRING","'*\/*\/*'",233],")",";",["T_WHITESPACE","\n\n        ",233],["T_IF","if",235],["T_WHITESPACE"," ",235],"(",["T_WHITESPACE"," ",235],["T_VARIABLE","$withAuth",235],["T_WHITESPACE"," ",235],")",["T_WHITESPACE"," ",235],"{",["T_WHITESPACE","\n            ",235],["T_VARIABLE","$phpAuthUser",236],["T_WHITESPACE"," ",236],"=",["T_WHITESPACE"," ",236],["T_STRING","rawurlencode",236],"(",["T_VARIABLE","$this",236],["T_OBJECT_OPERATOR","->",236],["T_STRING","getController",236],"(",")",["T_OBJECT_OPERATOR","->",236],["T_STRING","getRequest",236],"(",")",["T_OBJECT_OPERATOR","->",236],["T_STRING","getServer",236],"(",["T_CONSTANT_ENCAPSED_STRING","'PHP_AUTH_USER'",236],",",["T_WHITESPACE"," ",236],["T_STRING","false",236],")",")",";",["T_WHITESPACE","\n            ",236],["T_VARIABLE","$phpAuthPw",237],["T_WHITESPACE"," ",237],"=",["T_WHITESPACE"," ",237],["T_STRING","rawurlencode",237],"(",["T_VARIABLE","$this",237],["T_OBJECT_OPERATOR","->",237],["T_STRING","getController",237],"(",")",["T_OBJECT_OPERATOR","->",237],["T_STRING","getRequest",237],"(",")",["T_OBJECT_OPERATOR","->",237],["T_STRING","getServer",237],"(",["T_CONSTANT_ENCAPSED_STRING","'PHP_AUTH_PW'",237],",",["T_WHITESPACE"," ",237],["T_STRING","false",237],")",")",";",["T_WHITESPACE","\n            ",237],["T_VARIABLE","$scheme",238],["T_WHITESPACE"," ",238],"=",["T_WHITESPACE"," ",238],["T_STRING","rawurlencode",238],"(",["T_VARIABLE","$this",238],["T_OBJECT_OPERATOR","->",238],["T_STRING","getController",238],"(",")",["T_OBJECT_OPERATOR","->",238],["T_STRING","getRequest",238],"(",")",["T_OBJECT_OPERATOR","->",238],["T_STRING","getScheme",238],"(",")",")",";",["T_WHITESPACE","\n\n            ",238],["T_IF","if",240],["T_WHITESPACE"," ",240],"(",["T_VARIABLE","$phpAuthUser",240],["T_WHITESPACE"," ",240],["T_BOOLEAN_AND","&&",240],["T_WHITESPACE"," ",240],["T_VARIABLE","$phpAuthPw",240],")",["T_WHITESPACE"," ",240],"{",["T_WHITESPACE","\n                ",240],["T_VARIABLE","$wsdlUrl",241],["T_WHITESPACE"," ",241],"=",["T_WHITESPACE"," ",241],["T_STRING","sprintf",241],"(",["T_CONSTANT_ENCAPSED_STRING","\"%s:\/\/%s:%s@%s\"",241],",",["T_WHITESPACE"," ",241],["T_VARIABLE","$scheme",241],",",["T_WHITESPACE"," ",241],["T_VARIABLE","$phpAuthUser",241],",",["T_WHITESPACE"," ",241],["T_VARIABLE","$phpAuthPw",241],",",["T_WHITESPACE","\n                    ",241],["T_STRING","str_replace",242],"(",["T_VARIABLE","$scheme",242],["T_WHITESPACE"," ",242],".",["T_WHITESPACE"," ",242],["T_CONSTANT_ENCAPSED_STRING","':\/\/'",242],",",["T_WHITESPACE"," ",242],["T_CONSTANT_ENCAPSED_STRING","''",242],",",["T_WHITESPACE"," ",242],["T_VARIABLE","$wsdlUrl",242],")",")",";",["T_WHITESPACE","\n            ",242],"}",["T_WHITESPACE","\n        ",243],"}",["T_WHITESPACE","\n\n        ",244],["T_RETURN","return",246],["T_WHITESPACE"," ",246],["T_VARIABLE","$wsdlUrl",246],";",["T_WHITESPACE","\n    ",246],"}",["T_WHITESPACE","\n\n    ",247],["T_DOC_COMMENT","\/**\n     * Try to instantiate Zend_Soap_Server\n     * If schema import error is caught, it will retry in 1 second.\n     *\n     * @throws Zend_Soap_Server_Exception\n     *\/",249],["T_WHITESPACE","\n    ",254],["T_PROTECTED","protected",255],["T_WHITESPACE"," ",255],["T_FUNCTION","function",255],["T_WHITESPACE"," ",255],["T_STRING","_instantiateServer",255],"(",")",["T_WHITESPACE","\n    ",255],"{",["T_WHITESPACE","\n        ",256],["T_VARIABLE","$apiConfigCharset",257],["T_WHITESPACE"," ",257],"=",["T_WHITESPACE"," ",257],["T_STRING","Mage",257],["T_DOUBLE_COLON","::",257],["T_STRING","getStoreConfig",257],"(",["T_CONSTANT_ENCAPSED_STRING","'api\/config\/charset'",257],")",";",["T_WHITESPACE","\n        ",257],["T_VARIABLE","$wsdlCacheEnabled",258],["T_WHITESPACE"," ",258],"=",["T_WHITESPACE"," ",258],["T_BOOL_CAST","(bool)",258],["T_WHITESPACE"," ",258],["T_STRING","Mage",258],["T_DOUBLE_COLON","::",258],["T_STRING","getStoreConfig",258],"(",["T_CONSTANT_ENCAPSED_STRING","'api\/config\/wsdl_cache_enabled'",258],")",";",["T_WHITESPACE","\n\n        ",258],["T_IF","if",260],["T_WHITESPACE"," ",260],"(",["T_VARIABLE","$wsdlCacheEnabled",260],")",["T_WHITESPACE"," ",260],"{",["T_WHITESPACE","\n            ",260],["T_STRING","ini_set",261],"(",["T_CONSTANT_ENCAPSED_STRING","'soap.wsdl_cache_enabled'",261],",",["T_WHITESPACE"," ",261],["T_CONSTANT_ENCAPSED_STRING","'1'",261],")",";",["T_WHITESPACE","\n        ",261],"}",["T_WHITESPACE"," ",262],["T_ELSE","else",262],["T_WHITESPACE"," ",262],"{",["T_WHITESPACE","\n            ",262],["T_STRING","ini_set",263],"(",["T_CONSTANT_ENCAPSED_STRING","'soap.wsdl_cache_enabled'",263],",",["T_WHITESPACE"," ",263],["T_CONSTANT_ENCAPSED_STRING","'0'",263],")",";",["T_WHITESPACE","\n        ",263],"}",["T_WHITESPACE","\n\n        ",264],["T_VARIABLE","$tries",266],["T_WHITESPACE"," ",266],"=",["T_WHITESPACE"," ",266],["T_LNUMBER","0",266],";",["T_WHITESPACE","\n        ",266],["T_DO","do",267],["T_WHITESPACE"," ",267],"{",["T_WHITESPACE","\n            ",267],["T_VARIABLE","$retry",268],["T_WHITESPACE"," ",268],"=",["T_WHITESPACE"," ",268],["T_STRING","false",268],";",["T_WHITESPACE","\n            ",268],["T_TRY","try",269],["T_WHITESPACE"," ",269],"{",["T_WHITESPACE","\n                ",269],["T_VARIABLE","$this",270],["T_OBJECT_OPERATOR","->",270],["T_STRING","_soap",270],["T_WHITESPACE"," ",270],"=",["T_WHITESPACE"," ",270],["T_NEW","new",270],["T_WHITESPACE"," ",270],["T_STRING","Zend_Soap_Server",270],"(",["T_VARIABLE","$this",270],["T_OBJECT_OPERATOR","->",270],["T_STRING","getWsdlUrl",270],"(",["T_ARRAY","array",270],"(",["T_CONSTANT_ENCAPSED_STRING","\"wsdl\"",270],["T_WHITESPACE"," ",270],["T_DOUBLE_ARROW","=>",270],["T_WHITESPACE"," ",270],["T_LNUMBER","1",270],")",")",",",["T_WHITESPACE","\n                    ",270],["T_ARRAY","array",271],"(",["T_CONSTANT_ENCAPSED_STRING","'encoding'",271],["T_WHITESPACE"," ",271],["T_DOUBLE_ARROW","=>",271],["T_WHITESPACE"," ",271],["T_VARIABLE","$apiConfigCharset",271],")",")",";",["T_WHITESPACE","\n            ",271],"}",["T_WHITESPACE"," ",272],["T_CATCH","catch",272],["T_WHITESPACE"," ",272],"(",["T_STRING","SoapFault",272],["T_WHITESPACE"," ",272],["T_VARIABLE","$e",272],")",["T_WHITESPACE"," ",272],"{",["T_WHITESPACE","\n                ",272],["T_IF","if",273],["T_WHITESPACE"," ",273],"(",["T_STRING","false",273],["T_WHITESPACE"," ",273],["T_IS_NOT_IDENTICAL","!==",273],["T_WHITESPACE"," ",273],["T_STRING","strpos",273],"(",["T_VARIABLE","$e",273],["T_OBJECT_OPERATOR","->",273],["T_STRING","getMessage",273],"(",")",",",["T_WHITESPACE","\n                    ",273],["T_CONSTANT_ENCAPSED_STRING","\"can't import schema from 'http:\/\/schemas.xmlsoap.org\/soap\/encoding\/'\"",274],")",["T_WHITESPACE","\n                ",274],")",["T_WHITESPACE"," ",275],"{",["T_WHITESPACE","\n                    ",275],["T_VARIABLE","$retry",276],["T_WHITESPACE"," ",276],"=",["T_WHITESPACE"," ",276],["T_STRING","true",276],";",["T_WHITESPACE","\n                    ",276],["T_STRING","sleep",277],"(",["T_LNUMBER","1",277],")",";",["T_WHITESPACE","\n                ",277],"}",["T_WHITESPACE"," ",278],["T_ELSE","else",278],["T_WHITESPACE"," ",278],"{",["T_WHITESPACE","\n                    ",278],["T_THROW","throw",279],["T_WHITESPACE"," ",279],["T_VARIABLE","$e",279],";",["T_WHITESPACE","\n                ",279],"}",["T_WHITESPACE","\n                ",280],["T_VARIABLE","$tries",281],["T_INC","++",281],";",["T_WHITESPACE","\n            ",281],"}",["T_WHITESPACE","\n        ",282],"}",["T_WHITESPACE"," ",283],["T_WHILE","while",283],["T_WHITESPACE"," ",283],"(",["T_VARIABLE","$retry",283],["T_WHITESPACE"," ",283],["T_BOOLEAN_AND","&&",283],["T_WHITESPACE"," ",283],["T_VARIABLE","$tries",283],["T_WHITESPACE"," ",283],"<",["T_WHITESPACE"," ",283],["T_LNUMBER","5",283],")",";",["T_WHITESPACE","\n        ",283],["T_STRING","use_soap_error_handler",284],"(",["T_STRING","false",284],")",";",["T_WHITESPACE","\n        ",284],["T_VARIABLE","$this",285],["T_OBJECT_OPERATOR","->",285],["T_STRING","_soap",285],["T_WHITESPACE","\n            ",285],["T_OBJECT_OPERATOR","->",286],["T_STRING","setReturnResponse",286],"(",["T_STRING","true",286],")",["T_WHITESPACE","\n            ",286],["T_OBJECT_OPERATOR","->",287],["T_STRING","setClass",287],"(",["T_VARIABLE","$this",287],["T_OBJECT_OPERATOR","->",287],["T_STRING","getHandler",287],"(",")",")",";",["T_WHITESPACE","\n    ",287],"}",["T_WHITESPACE","\n",288],"}",["T_WHITESPACE","\n",289]]
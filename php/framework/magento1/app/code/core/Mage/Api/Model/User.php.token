[["T_OPEN_TAG","<?php\n",1],["T_DOC_COMMENT","\/**\n * Magento\n *\n * NOTICE OF LICENSE\n *\n * This source file is subject to the Open Software License (OSL 3.0)\n * that is bundled with this package in the file LICENSE.txt.\n * It is also available through the world-wide-web at this URL:\n * http:\/\/opensource.org\/licenses\/osl-3.0.php\n * If you did not receive a copy of the license and are unable to\n * obtain it through the world-wide-web, please send an email\n * to license@magento.com so we can send you a copy immediately.\n *\n * DISCLAIMER\n *\n * Do not edit or add to this file if you wish to upgrade Magento to newer\n * versions in the future. If you wish to customize Magento for your\n * needs please refer to http:\/\/www.magento.com for more information.\n *\n * @category    Mage\n * @package     Mage_Api\n * @copyright  Copyright (c) 2006-2016 X.commerce, Inc. and affiliates (http:\/\/www.magento.com)\n * @license    http:\/\/opensource.org\/licenses\/osl-3.0.php  Open Software License (OSL 3.0)\n *\/",2],["T_WHITESPACE","\n\n",25],["T_DOC_COMMENT","\/**\n * Api model\n *\n * @method Mage_Api_Model_Resource_User _getResource()\n * @method Mage_Api_Model_Resource_User getResource()\n * @method string getFirstname()\n * @method Mage_Api_Model_User setFirstname(string $value)\n * @method string getLastname()\n * @method Mage_Api_Model_User setLastname(string $value)\n * @method string getEmail()\n * @method Mage_Api_Model_User setEmail(string $value)\n * @method string getUsername()\n * @method Mage_Api_Model_User setUsername(string $value)\n * @method string getApiKey()\n * @method Mage_Api_Model_User setApiKey(string $value)\n * @method string getCreated()\n * @method Mage_Api_Model_User setCreated(string $value)\n * @method string getModified()\n * @method Mage_Api_Model_User setModified(string $value)\n * @method int getLognum()\n * @method Mage_Api_Model_User setLognum(int $value)\n * @method int getReloadAclFlag()\n * @method Mage_Api_Model_User setReloadAclFlag(int $value)\n * @method int getIsActive()\n * @method Mage_Api_Model_User setIsActive(int $value)\n *\n * @category    Mage\n * @package     Mage_Api\n * @author      Magento Core Team <core@magentocommerce.com>\n *\/",27],["T_WHITESPACE","\n",56],["T_CLASS","class",57],["T_WHITESPACE"," ",57],["T_STRING","Mage_Api_Model_User",57],["T_WHITESPACE"," ",57],["T_EXTENDS","extends",57],["T_WHITESPACE"," ",57],["T_STRING","Mage_Core_Model_Abstract",57],["T_WHITESPACE","\n",57],"{",["T_WHITESPACE","\n    ",58],["T_DOC_COMMENT","\/**\n     * Prefix of model events names\n     *\n     * @var string\n     *\/",59],["T_WHITESPACE","\n    ",63],["T_PROTECTED","protected",64],["T_WHITESPACE"," ",64],["T_VARIABLE","$_eventPrefix",64],["T_WHITESPACE"," ",64],"=",["T_WHITESPACE"," ",64],["T_CONSTANT_ENCAPSED_STRING","'api_user'",64],";",["T_WHITESPACE","\n\n    ",64],["T_DOC_COMMENT","\/**\n     * Constructor\n     *\/",66],["T_WHITESPACE","\n    ",68],["T_PROTECTED","protected",69],["T_WHITESPACE"," ",69],["T_FUNCTION","function",69],["T_WHITESPACE"," ",69],["T_STRING","_construct",69],"(",")",["T_WHITESPACE","\n    ",69],"{",["T_WHITESPACE","\n        ",70],["T_VARIABLE","$this",71],["T_OBJECT_OPERATOR","->",71],["T_STRING","_init",71],"(",["T_CONSTANT_ENCAPSED_STRING","'api\/user'",71],")",";",["T_WHITESPACE","\n    ",71],"}",["T_WHITESPACE","\n\n    ",72],["T_DOC_COMMENT","\/**\n     * Save user\n     *\n     * @return Mage_Api_Model_User|Mage_Core_Model_Abstract\n     *\/",74],["T_WHITESPACE","\n    ",78],["T_PUBLIC","public",79],["T_WHITESPACE"," ",79],["T_FUNCTION","function",79],["T_WHITESPACE"," ",79],["T_STRING","save",79],"(",")",["T_WHITESPACE","\n    ",79],"{",["T_WHITESPACE","\n        ",80],["T_VARIABLE","$this",81],["T_OBJECT_OPERATOR","->",81],["T_STRING","_beforeSave",81],"(",")",";",["T_WHITESPACE","\n        ",81],["T_VARIABLE","$data",82],["T_WHITESPACE"," ",82],"=",["T_WHITESPACE"," ",82],["T_ARRAY","array",82],"(",["T_WHITESPACE","\n                ",82],["T_CONSTANT_ENCAPSED_STRING","'firstname'",83],["T_WHITESPACE"," ",83],["T_DOUBLE_ARROW","=>",83],["T_WHITESPACE"," ",83],["T_VARIABLE","$this",83],["T_OBJECT_OPERATOR","->",83],["T_STRING","getFirstname",83],"(",")",",",["T_WHITESPACE","\n                ",83],["T_CONSTANT_ENCAPSED_STRING","'lastname'",84],["T_WHITESPACE","  ",84],["T_DOUBLE_ARROW","=>",84],["T_WHITESPACE"," ",84],["T_VARIABLE","$this",84],["T_OBJECT_OPERATOR","->",84],["T_STRING","getLastname",84],"(",")",",",["T_WHITESPACE","\n                ",84],["T_CONSTANT_ENCAPSED_STRING","'email'",85],["T_WHITESPACE","     ",85],["T_DOUBLE_ARROW","=>",85],["T_WHITESPACE"," ",85],["T_VARIABLE","$this",85],["T_OBJECT_OPERATOR","->",85],["T_STRING","getEmail",85],"(",")",",",["T_WHITESPACE","\n                ",85],["T_CONSTANT_ENCAPSED_STRING","'modified'",86],["T_WHITESPACE","  ",86],["T_DOUBLE_ARROW","=>",86],["T_WHITESPACE"," ",86],["T_STRING","Mage",86],["T_DOUBLE_COLON","::",86],["T_STRING","getSingleton",86],"(",["T_CONSTANT_ENCAPSED_STRING","'core\/date'",86],")",["T_OBJECT_OPERATOR","->",86],["T_STRING","gmtDate",86],"(",")",["T_WHITESPACE","\n            ",86],")",";",["T_WHITESPACE","\n\n        ",87],["T_IF","if",89],["T_WHITESPACE"," ",89],"(",["T_VARIABLE","$this",89],["T_OBJECT_OPERATOR","->",89],["T_STRING","getId",89],"(",")",["T_WHITESPACE"," ",89],">",["T_WHITESPACE"," ",89],["T_LNUMBER","0",89],")",["T_WHITESPACE"," ",89],"{",["T_WHITESPACE","\n            ",89],["T_VARIABLE","$data",90],"[",["T_CONSTANT_ENCAPSED_STRING","'user_id'",90],"]",["T_WHITESPACE","   ",90],"=",["T_WHITESPACE"," ",90],["T_VARIABLE","$this",90],["T_OBJECT_OPERATOR","->",90],["T_STRING","getId",90],"(",")",";",["T_WHITESPACE","\n        ",90],"}",["T_WHITESPACE","\n\n        ",91],["T_IF","if",93],["T_WHITESPACE"," ",93],"(",["T_WHITESPACE"," ",93],["T_VARIABLE","$this",93],["T_OBJECT_OPERATOR","->",93],["T_STRING","getUsername",93],"(",")",["T_WHITESPACE"," ",93],")",["T_WHITESPACE"," ",93],"{",["T_WHITESPACE","\n            ",93],["T_VARIABLE","$data",94],"[",["T_CONSTANT_ENCAPSED_STRING","'username'",94],"]",["T_WHITESPACE","   ",94],"=",["T_WHITESPACE"," ",94],["T_VARIABLE","$this",94],["T_OBJECT_OPERATOR","->",94],["T_STRING","getUsername",94],"(",")",";",["T_WHITESPACE","\n        ",94],"}",["T_WHITESPACE","\n\n        ",95],["T_IF","if",97],["T_WHITESPACE"," ",97],"(",["T_VARIABLE","$this",97],["T_OBJECT_OPERATOR","->",97],["T_STRING","getApiKey",97],"(",")",")",["T_WHITESPACE"," ",97],"{",["T_WHITESPACE","\n            ",97],["T_VARIABLE","$data",98],"[",["T_CONSTANT_ENCAPSED_STRING","'api_key'",98],"]",["T_WHITESPACE","   ",98],"=",["T_WHITESPACE"," ",98],["T_VARIABLE","$this",98],["T_OBJECT_OPERATOR","->",98],["T_STRING","_getEncodedApiKey",98],"(",["T_VARIABLE","$this",98],["T_OBJECT_OPERATOR","->",98],["T_STRING","getApiKey",98],"(",")",")",";",["T_WHITESPACE","\n        ",98],"}",["T_WHITESPACE","\n\n        ",99],["T_IF","if",101],["T_WHITESPACE"," ",101],"(",["T_VARIABLE","$this",101],["T_OBJECT_OPERATOR","->",101],["T_STRING","getNewApiKey",101],"(",")",")",["T_WHITESPACE"," ",101],"{",["T_WHITESPACE","\n            ",101],["T_VARIABLE","$data",102],"[",["T_CONSTANT_ENCAPSED_STRING","'api_key'",102],"]",["T_WHITESPACE","   ",102],"=",["T_WHITESPACE"," ",102],["T_VARIABLE","$this",102],["T_OBJECT_OPERATOR","->",102],["T_STRING","_getEncodedApiKey",102],"(",["T_VARIABLE","$this",102],["T_OBJECT_OPERATOR","->",102],["T_STRING","getNewApiKey",102],"(",")",")",";",["T_WHITESPACE","\n        ",102],"}",["T_WHITESPACE","\n\n        ",103],["T_IF","if",105],["T_WHITESPACE"," ",105],"(",["T_WHITESPACE"," ",105],"!",["T_STRING","is_null",105],"(",["T_VARIABLE","$this",105],["T_OBJECT_OPERATOR","->",105],["T_STRING","getIsActive",105],"(",")",")",["T_WHITESPACE"," ",105],")",["T_WHITESPACE"," ",105],"{",["T_WHITESPACE","\n            ",105],["T_VARIABLE","$data",106],"[",["T_CONSTANT_ENCAPSED_STRING","'is_active'",106],"]",["T_WHITESPACE","  ",106],"=",["T_WHITESPACE"," ",106],["T_STRING","intval",106],"(",["T_VARIABLE","$this",106],["T_OBJECT_OPERATOR","->",106],["T_STRING","getIsActive",106],"(",")",")",";",["T_WHITESPACE","\n        ",106],"}",["T_WHITESPACE","\n\n        ",107],["T_VARIABLE","$this",109],["T_OBJECT_OPERATOR","->",109],["T_STRING","setData",109],"(",["T_VARIABLE","$data",109],")",";",["T_WHITESPACE","\n        ",109],["T_VARIABLE","$this",110],["T_OBJECT_OPERATOR","->",110],["T_STRING","_getResource",110],"(",")",["T_OBJECT_OPERATOR","->",110],["T_STRING","save",110],"(",["T_VARIABLE","$this",110],")",";",["T_WHITESPACE","\n        ",110],["T_VARIABLE","$this",111],["T_OBJECT_OPERATOR","->",111],["T_STRING","_afterSave",111],"(",")",";",["T_WHITESPACE","\n        ",111],["T_RETURN","return",112],["T_WHITESPACE"," ",112],["T_VARIABLE","$this",112],";",["T_WHITESPACE","\n    ",112],"}",["T_WHITESPACE","\n\n    ",113],["T_DOC_COMMENT","\/**\n     * Delete user\n     *\n     * @return Mage_Api_Model_User|Mage_Core_Model_Abstract\n     *\/",115],["T_WHITESPACE","\n    ",119],["T_PUBLIC","public",120],["T_WHITESPACE"," ",120],["T_FUNCTION","function",120],["T_WHITESPACE"," ",120],["T_STRING","delete",120],"(",")",["T_WHITESPACE","\n    ",120],"{",["T_WHITESPACE","\n        ",121],["T_VARIABLE","$this",122],["T_OBJECT_OPERATOR","->",122],["T_STRING","_beforeDelete",122],"(",")",";",["T_WHITESPACE","\n        ",122],["T_VARIABLE","$this",123],["T_OBJECT_OPERATOR","->",123],["T_STRING","_getResource",123],"(",")",["T_OBJECT_OPERATOR","->",123],["T_STRING","delete",123],"(",["T_VARIABLE","$this",123],")",";",["T_WHITESPACE","\n        ",123],["T_VARIABLE","$this",124],["T_OBJECT_OPERATOR","->",124],["T_STRING","_afterDelete",124],"(",")",";",["T_WHITESPACE","\n        ",124],["T_RETURN","return",125],["T_WHITESPACE"," ",125],["T_VARIABLE","$this",125],";",["T_WHITESPACE","\n    ",125],"}",["T_WHITESPACE","\n\n    ",126],["T_DOC_COMMENT","\/**\n     * Save relations for users\n     *\n     * @return Mage_Api_Model_User\n     *\/",128],["T_WHITESPACE","\n    ",132],["T_PUBLIC","public",133],["T_WHITESPACE"," ",133],["T_FUNCTION","function",133],["T_WHITESPACE"," ",133],["T_STRING","saveRelations",133],"(",")",["T_WHITESPACE","\n    ",133],"{",["T_WHITESPACE","\n        ",134],["T_VARIABLE","$this",135],["T_OBJECT_OPERATOR","->",135],["T_STRING","_getResource",135],"(",")",["T_OBJECT_OPERATOR","->",135],["T_STRING","_saveRelations",135],"(",["T_VARIABLE","$this",135],")",";",["T_WHITESPACE","\n        ",135],["T_RETURN","return",136],["T_WHITESPACE"," ",136],["T_VARIABLE","$this",136],";",["T_WHITESPACE","\n    ",136],"}",["T_WHITESPACE","\n\n    ",137],["T_DOC_COMMENT","\/**\n     * Get user roles\n     *\n     * @return array\n     *\/",139],["T_WHITESPACE","\n    ",143],["T_PUBLIC","public",144],["T_WHITESPACE"," ",144],["T_FUNCTION","function",144],["T_WHITESPACE"," ",144],["T_STRING","getRoles",144],"(",")",["T_WHITESPACE","\n    ",144],"{",["T_WHITESPACE","\n        ",145],["T_RETURN","return",146],["T_WHITESPACE"," ",146],["T_VARIABLE","$this",146],["T_OBJECT_OPERATOR","->",146],["T_STRING","_getResource",146],"(",")",["T_OBJECT_OPERATOR","->",146],["T_STRING","_getRoles",146],"(",["T_VARIABLE","$this",146],")",";",["T_WHITESPACE","\n    ",146],"}",["T_WHITESPACE","\n\n    ",147],["T_DOC_COMMENT","\/**\n     * Delete user from role\n     *\n     * @return Mage_Api_Model_User\n     *\/",149],["T_WHITESPACE","\n    ",153],["T_PUBLIC","public",154],["T_WHITESPACE"," ",154],["T_FUNCTION","function",154],["T_WHITESPACE"," ",154],["T_STRING","deleteFromRole",154],"(",")",["T_WHITESPACE","\n    ",154],"{",["T_WHITESPACE","\n        ",155],["T_VARIABLE","$this",156],["T_OBJECT_OPERATOR","->",156],["T_STRING","_getResource",156],"(",")",["T_OBJECT_OPERATOR","->",156],["T_STRING","deleteFromRole",156],"(",["T_VARIABLE","$this",156],")",";",["T_WHITESPACE","\n        ",156],["T_RETURN","return",157],["T_WHITESPACE"," ",157],["T_VARIABLE","$this",157],";",["T_WHITESPACE","\n    ",157],"}",["T_WHITESPACE","\n\n    ",158],["T_DOC_COMMENT","\/**\n     * Check is user role exists\n     *\n     * @return bool\n     *\/",160],["T_WHITESPACE","\n    ",164],["T_PUBLIC","public",165],["T_WHITESPACE"," ",165],["T_FUNCTION","function",165],["T_WHITESPACE"," ",165],["T_STRING","roleUserExists",165],"(",")",["T_WHITESPACE","\n    ",165],"{",["T_WHITESPACE","\n        ",166],["T_VARIABLE","$result",167],["T_WHITESPACE"," ",167],"=",["T_WHITESPACE"," ",167],["T_VARIABLE","$this",167],["T_OBJECT_OPERATOR","->",167],["T_STRING","_getResource",167],"(",")",["T_OBJECT_OPERATOR","->",167],["T_STRING","roleUserExists",167],"(",["T_VARIABLE","$this",167],")",";",["T_WHITESPACE","\n        ",167],["T_RETURN","return",168],["T_WHITESPACE"," ",168],"(",["T_WHITESPACE"," ",168],["T_STRING","is_array",168],"(",["T_VARIABLE","$result",168],")",["T_WHITESPACE"," ",168],["T_BOOLEAN_AND","&&",168],["T_WHITESPACE"," ",168],["T_STRING","count",168],"(",["T_VARIABLE","$result",168],")",["T_WHITESPACE"," ",168],">",["T_WHITESPACE"," ",168],["T_LNUMBER","0",168],["T_WHITESPACE"," ",168],")",["T_WHITESPACE"," ",168],"?",["T_WHITESPACE"," ",168],["T_STRING","true",168],["T_WHITESPACE"," ",168],":",["T_WHITESPACE"," ",168],["T_STRING","false",168],";",["T_WHITESPACE","\n    ",168],"}",["T_WHITESPACE","\n\n    ",169],["T_DOC_COMMENT","\/**\n     * Add user\n     *\n     * @return Mage_Api_Model_User\n     *\/",171],["T_WHITESPACE","\n    ",175],["T_PUBLIC","public",176],["T_WHITESPACE"," ",176],["T_FUNCTION","function",176],["T_WHITESPACE"," ",176],["T_STRING","add",176],"(",")",["T_WHITESPACE","\n    ",176],"{",["T_WHITESPACE","\n        ",177],["T_VARIABLE","$this",178],["T_OBJECT_OPERATOR","->",178],["T_STRING","_getResource",178],"(",")",["T_OBJECT_OPERATOR","->",178],["T_STRING","add",178],"(",["T_VARIABLE","$this",178],")",";",["T_WHITESPACE","\n        ",178],["T_RETURN","return",179],["T_WHITESPACE"," ",179],["T_VARIABLE","$this",179],";",["T_WHITESPACE","\n    ",179],"}",["T_WHITESPACE","\n\n    ",180],["T_DOC_COMMENT","\/**\n     * Check if user exists\n     *\n     * @return bool\n     *\/",182],["T_WHITESPACE","\n    ",186],["T_PUBLIC","public",187],["T_WHITESPACE"," ",187],["T_FUNCTION","function",187],["T_WHITESPACE"," ",187],["T_STRING","userExists",187],"(",")",["T_WHITESPACE","\n    ",187],"{",["T_WHITESPACE","\n        ",188],["T_VARIABLE","$result",189],["T_WHITESPACE"," ",189],"=",["T_WHITESPACE"," ",189],["T_VARIABLE","$this",189],["T_OBJECT_OPERATOR","->",189],["T_STRING","_getResource",189],"(",")",["T_OBJECT_OPERATOR","->",189],["T_STRING","userExists",189],"(",["T_VARIABLE","$this",189],")",";",["T_WHITESPACE","\n        ",189],["T_RETURN","return",190],["T_WHITESPACE"," ",190],"(",["T_WHITESPACE"," ",190],["T_STRING","is_array",190],"(",["T_VARIABLE","$result",190],")",["T_WHITESPACE"," ",190],["T_BOOLEAN_AND","&&",190],["T_WHITESPACE"," ",190],["T_STRING","count",190],"(",["T_VARIABLE","$result",190],")",["T_WHITESPACE"," ",190],">",["T_WHITESPACE"," ",190],["T_LNUMBER","0",190],["T_WHITESPACE"," ",190],")",["T_WHITESPACE"," ",190],"?",["T_WHITESPACE"," ",190],["T_STRING","true",190],["T_WHITESPACE"," ",190],":",["T_WHITESPACE"," ",190],["T_STRING","false",190],";",["T_WHITESPACE","\n    ",190],"}",["T_WHITESPACE","\n\n    ",191],["T_DOC_COMMENT","\/**\n     * Get collection of users\n     *\n     * @return Object|Mage_Api_Model_Resource_User_Collection\n     *\/",193],["T_WHITESPACE","\n    ",197],["T_PUBLIC","public",198],["T_WHITESPACE"," ",198],["T_FUNCTION","function",198],["T_WHITESPACE"," ",198],["T_STRING","getCollection",198],"(",")",["T_WHITESPACE"," ",198],"{",["T_WHITESPACE","\n        ",198],["T_RETURN","return",199],["T_WHITESPACE"," ",199],["T_STRING","Mage",199],["T_DOUBLE_COLON","::",199],["T_STRING","getResourceModel",199],"(",["T_CONSTANT_ENCAPSED_STRING","'api\/user_collection'",199],")",";",["T_WHITESPACE","\n    ",199],"}",["T_WHITESPACE","\n\n    ",200],["T_DOC_COMMENT","\/**\n     * Get user's name\n     *\n     * @param string $separator\n     * @return string\n     *\/",202],["T_WHITESPACE","\n    ",207],["T_PUBLIC","public",208],["T_WHITESPACE"," ",208],["T_FUNCTION","function",208],["T_WHITESPACE"," ",208],["T_STRING","getName",208],"(",["T_VARIABLE","$separator",208],["T_WHITESPACE"," ",208],"=",["T_WHITESPACE"," ",208],["T_CONSTANT_ENCAPSED_STRING","' '",208],")",["T_WHITESPACE","\n    ",208],"{",["T_WHITESPACE","\n        ",209],["T_RETURN","return",210],["T_WHITESPACE"," ",210],["T_VARIABLE","$this",210],["T_OBJECT_OPERATOR","->",210],["T_STRING","getFirstname",210],"(",")",".",["T_VARIABLE","$separator",210],".",["T_VARIABLE","$this",210],["T_OBJECT_OPERATOR","->",210],["T_STRING","getLastname",210],"(",")",";",["T_WHITESPACE","\n    ",210],"}",["T_WHITESPACE","\n\n    ",211],["T_DOC_COMMENT","\/**\n     * Get user's id\n     *\n     * @return string\n     *\/",213],["T_WHITESPACE","\n    ",217],["T_PUBLIC","public",218],["T_WHITESPACE"," ",218],["T_FUNCTION","function",218],["T_WHITESPACE"," ",218],["T_STRING","getId",218],"(",")",["T_WHITESPACE","\n    ",218],"{",["T_WHITESPACE","\n        ",219],["T_RETURN","return",220],["T_WHITESPACE"," ",220],["T_VARIABLE","$this",220],["T_OBJECT_OPERATOR","->",220],["T_STRING","getUserId",220],"(",")",";",["T_WHITESPACE","\n    ",220],"}",["T_WHITESPACE","\n\n    ",221],["T_DOC_COMMENT","\/**\n     * Get user ACL role\n     *\n     * @return string\n     *\/",223],["T_WHITESPACE","\n    ",227],["T_PUBLIC","public",228],["T_WHITESPACE"," ",228],["T_FUNCTION","function",228],["T_WHITESPACE"," ",228],["T_STRING","getAclRole",228],"(",")",["T_WHITESPACE","\n    ",228],"{",["T_WHITESPACE","\n        ",229],["T_RETURN","return",230],["T_WHITESPACE"," ",230],["T_CONSTANT_ENCAPSED_STRING","'U'",230],".",["T_VARIABLE","$this",230],["T_OBJECT_OPERATOR","->",230],["T_STRING","getUserId",230],"(",")",";",["T_WHITESPACE","\n    ",230],"}",["T_WHITESPACE","\n\n    ",231],["T_DOC_COMMENT","\/**\n     * Authenticate user name and api key and save loaded record\n     *\n     * @param string $username\n     * @param string $apiKey\n     * @return boolean\n     *\/",233],["T_WHITESPACE","\n    ",239],["T_PUBLIC","public",240],["T_WHITESPACE"," ",240],["T_FUNCTION","function",240],["T_WHITESPACE"," ",240],["T_STRING","authenticate",240],"(",["T_VARIABLE","$username",240],",",["T_WHITESPACE"," ",240],["T_VARIABLE","$apiKey",240],")",["T_WHITESPACE","\n    ",240],"{",["T_WHITESPACE","\n        ",241],["T_VARIABLE","$this",242],["T_OBJECT_OPERATOR","->",242],["T_STRING","loadByUsername",242],"(",["T_VARIABLE","$username",242],")",";",["T_WHITESPACE","\n        ",242],["T_IF","if",243],["T_WHITESPACE"," ",243],"(","!",["T_VARIABLE","$this",243],["T_OBJECT_OPERATOR","->",243],["T_STRING","getId",243],"(",")",")",["T_WHITESPACE"," ",243],"{",["T_WHITESPACE","\n            ",243],["T_RETURN","return",244],["T_WHITESPACE"," ",244],["T_STRING","false",244],";",["T_WHITESPACE","\n        ",244],"}",["T_WHITESPACE","\n        ",245],["T_VARIABLE","$auth",246],["T_WHITESPACE"," ",246],"=",["T_WHITESPACE"," ",246],["T_STRING","Mage",246],["T_DOUBLE_COLON","::",246],["T_STRING","helper",246],"(",["T_CONSTANT_ENCAPSED_STRING","'core'",246],")",["T_OBJECT_OPERATOR","->",246],["T_STRING","validateHash",246],"(",["T_VARIABLE","$apiKey",246],",",["T_WHITESPACE"," ",246],["T_VARIABLE","$this",246],["T_OBJECT_OPERATOR","->",246],["T_STRING","getApiKey",246],"(",")",")",";",["T_WHITESPACE","\n        ",246],["T_IF","if",247],["T_WHITESPACE"," ",247],"(",["T_VARIABLE","$auth",247],")",["T_WHITESPACE"," ",247],"{",["T_WHITESPACE","\n            ",247],["T_RETURN","return",248],["T_WHITESPACE"," ",248],["T_STRING","true",248],";",["T_WHITESPACE","\n        ",248],"}",["T_WHITESPACE"," ",249],["T_ELSE","else",249],["T_WHITESPACE"," ",249],"{",["T_WHITESPACE","\n            ",249],["T_VARIABLE","$this",250],["T_OBJECT_OPERATOR","->",250],["T_STRING","unsetData",250],"(",")",";",["T_WHITESPACE","\n            ",250],["T_RETURN","return",251],["T_WHITESPACE"," ",251],["T_STRING","false",251],";",["T_WHITESPACE","\n        ",251],"}",["T_WHITESPACE","\n    ",252],"}",["T_WHITESPACE","\n\n    ",253],["T_DOC_COMMENT","\/**\n     * Login user\n     *\n     * @param   string $username\n     * @param   string $apiKey\n     * @return  Mage_Api_Model_User\n     *\/",255],["T_WHITESPACE","\n    ",261],["T_PUBLIC","public",262],["T_WHITESPACE"," ",262],["T_FUNCTION","function",262],["T_WHITESPACE"," ",262],["T_STRING","login",262],"(",["T_VARIABLE","$username",262],",",["T_WHITESPACE"," ",262],["T_VARIABLE","$apiKey",262],")",["T_WHITESPACE","\n    ",262],"{",["T_WHITESPACE","\n        ",263],["T_VARIABLE","$sessId",264],["T_WHITESPACE"," ",264],"=",["T_WHITESPACE"," ",264],["T_VARIABLE","$this",264],["T_OBJECT_OPERATOR","->",264],["T_STRING","getSessid",264],"(",")",";",["T_WHITESPACE","\n        ",264],["T_IF","if",265],["T_WHITESPACE"," ",265],"(",["T_VARIABLE","$this",265],["T_OBJECT_OPERATOR","->",265],["T_STRING","authenticate",265],"(",["T_VARIABLE","$username",265],",",["T_WHITESPACE"," ",265],["T_VARIABLE","$apiKey",265],")",")",["T_WHITESPACE"," ",265],"{",["T_WHITESPACE","\n            ",265],["T_VARIABLE","$this",266],["T_OBJECT_OPERATOR","->",266],["T_STRING","setSessid",266],"(",["T_VARIABLE","$sessId",266],")",";",["T_WHITESPACE","\n            ",266],["T_VARIABLE","$this",267],["T_OBJECT_OPERATOR","->",267],["T_STRING","getResource",267],"(",")",["T_OBJECT_OPERATOR","->",267],["T_STRING","cleanOldSessions",267],"(",["T_VARIABLE","$this",267],")",["T_WHITESPACE","\n                ",267],["T_OBJECT_OPERATOR","->",268],["T_STRING","recordLogin",268],"(",["T_VARIABLE","$this",268],")",["T_WHITESPACE","\n                ",268],["T_OBJECT_OPERATOR","->",269],["T_STRING","recordSession",269],"(",["T_VARIABLE","$this",269],")",";",["T_WHITESPACE","\n            ",269],["T_STRING","Mage",270],["T_DOUBLE_COLON","::",270],["T_STRING","dispatchEvent",270],"(",["T_CONSTANT_ENCAPSED_STRING","'api_user_authenticated'",270],",",["T_WHITESPACE"," ",270],["T_ARRAY","array",270],"(",["T_WHITESPACE","\n               ",270],["T_CONSTANT_ENCAPSED_STRING","'model'",271],["T_WHITESPACE","    ",271],["T_DOUBLE_ARROW","=>",271],["T_WHITESPACE"," ",271],["T_VARIABLE","$this",271],",",["T_WHITESPACE","\n               ",271],["T_CONSTANT_ENCAPSED_STRING","'api_key'",272],["T_WHITESPACE","  ",272],["T_DOUBLE_ARROW","=>",272],["T_WHITESPACE"," ",272],["T_VARIABLE","$apiKey",272],",",["T_WHITESPACE","\n            ",272],")",")",";",["T_WHITESPACE","\n        ",273],"}",["T_WHITESPACE","\n\n        ",274],["T_RETURN","return",276],["T_WHITESPACE"," ",276],["T_VARIABLE","$this",276],";",["T_WHITESPACE","\n    ",276],"}",["T_WHITESPACE","\n\n    ",277],["T_DOC_COMMENT","\/**\n     * Reload user\n     *\n     * @return Mage_Api_Model_User\n     *\/",279],["T_WHITESPACE","\n    ",283],["T_PUBLIC","public",284],["T_WHITESPACE"," ",284],["T_FUNCTION","function",284],["T_WHITESPACE"," ",284],["T_STRING","reload",284],"(",")",["T_WHITESPACE","\n    ",284],"{",["T_WHITESPACE","\n        ",285],["T_VARIABLE","$this",286],["T_OBJECT_OPERATOR","->",286],["T_STRING","load",286],"(",["T_VARIABLE","$this",286],["T_OBJECT_OPERATOR","->",286],["T_STRING","getId",286],"(",")",")",";",["T_WHITESPACE","\n        ",286],["T_RETURN","return",287],["T_WHITESPACE"," ",287],["T_VARIABLE","$this",287],";",["T_WHITESPACE","\n    ",287],"}",["T_WHITESPACE","\n\n    ",288],["T_DOC_COMMENT","\/**\n     * Load user by username\n     *\n     * @param string $username\n     * @return Mage_Api_Model_User\n     *\/",290],["T_WHITESPACE","\n    ",295],["T_PUBLIC","public",296],["T_WHITESPACE"," ",296],["T_FUNCTION","function",296],["T_WHITESPACE"," ",296],["T_STRING","loadByUsername",296],"(",["T_VARIABLE","$username",296],")",["T_WHITESPACE","\n    ",296],"{",["T_WHITESPACE","\n        ",297],["T_VARIABLE","$this",298],["T_OBJECT_OPERATOR","->",298],["T_STRING","setData",298],"(",["T_VARIABLE","$this",298],["T_OBJECT_OPERATOR","->",298],["T_STRING","getResource",298],"(",")",["T_OBJECT_OPERATOR","->",298],["T_STRING","loadByUsername",298],"(",["T_VARIABLE","$username",298],")",")",";",["T_WHITESPACE","\n        ",298],["T_RETURN","return",299],["T_WHITESPACE"," ",299],["T_VARIABLE","$this",299],";",["T_WHITESPACE","\n    ",299],"}",["T_WHITESPACE","\n\n    ",300],["T_DOC_COMMENT","\/**\n     * Load user by session id\n     *\n     * @param string $sessId\n     * @return Mage_Api_Model_User\n     *\/",302],["T_WHITESPACE","\n    ",307],["T_PUBLIC","public",308],["T_WHITESPACE"," ",308],["T_FUNCTION","function",308],["T_WHITESPACE"," ",308],["T_STRING","loadBySessId",308],["T_WHITESPACE"," ",308],"(",["T_VARIABLE","$sessId",308],")",["T_WHITESPACE","\n    ",308],"{",["T_WHITESPACE","\n        ",309],["T_VARIABLE","$this",310],["T_OBJECT_OPERATOR","->",310],["T_STRING","setData",310],"(",["T_VARIABLE","$this",310],["T_OBJECT_OPERATOR","->",310],["T_STRING","getResource",310],"(",")",["T_OBJECT_OPERATOR","->",310],["T_STRING","loadBySessId",310],"(",["T_VARIABLE","$sessId",310],")",")",";",["T_WHITESPACE","\n        ",310],["T_RETURN","return",311],["T_WHITESPACE"," ",311],["T_VARIABLE","$this",311],";",["T_WHITESPACE","\n    ",311],"}",["T_WHITESPACE","\n\n    ",312],["T_DOC_COMMENT","\/**\n     * Logout user by session id\n     *\n     * @param string $sessid\n     * @return Mage_Api_Model_User\n     *\/",314],["T_WHITESPACE","\n    ",319],["T_PUBLIC","public",320],["T_WHITESPACE"," ",320],["T_FUNCTION","function",320],["T_WHITESPACE"," ",320],["T_STRING","logoutBySessId",320],"(",["T_VARIABLE","$sessid",320],")",["T_WHITESPACE","\n    ",320],"{",["T_WHITESPACE","\n        ",321],["T_VARIABLE","$this",322],["T_OBJECT_OPERATOR","->",322],["T_STRING","getResource",322],"(",")",["T_OBJECT_OPERATOR","->",322],["T_STRING","clearBySessId",322],"(",["T_VARIABLE","$sessid",322],")",";",["T_WHITESPACE","\n        ",322],["T_RETURN","return",323],["T_WHITESPACE"," ",323],["T_VARIABLE","$this",323],";",["T_WHITESPACE","\n    ",323],"}",["T_WHITESPACE","\n\n    ",324],["T_DOC_COMMENT","\/**\n     * Check if user is assigned to role\n     *\n     * @param int|Mage_Core_Model_Abstract $user\n     * @return array|null\n     *\/",326],["T_WHITESPACE","\n    ",331],["T_PUBLIC","public",332],["T_WHITESPACE"," ",332],["T_FUNCTION","function",332],["T_WHITESPACE"," ",332],["T_STRING","hasAssigned2Role",332],"(",["T_VARIABLE","$user",332],")",["T_WHITESPACE","\n    ",332],"{",["T_WHITESPACE","\n        ",333],["T_RETURN","return",334],["T_WHITESPACE"," ",334],["T_VARIABLE","$this",334],["T_OBJECT_OPERATOR","->",334],["T_STRING","getResource",334],"(",")",["T_OBJECT_OPERATOR","->",334],["T_STRING","hasAssigned2Role",334],"(",["T_VARIABLE","$user",334],")",";",["T_WHITESPACE","\n    ",334],"}",["T_WHITESPACE","\n\n    ",335],["T_DOC_COMMENT","\/**\n     * Retrieve encoded api key\n     *\n     * @param string $apiKey\n     * @return string\n     *\/",337],["T_WHITESPACE","\n    ",342],["T_PROTECTED","protected",343],["T_WHITESPACE"," ",343],["T_FUNCTION","function",343],["T_WHITESPACE"," ",343],["T_STRING","_getEncodedApiKey",343],"(",["T_VARIABLE","$apiKey",343],")",["T_WHITESPACE","\n    ",343],"{",["T_WHITESPACE","\n        ",344],["T_RETURN","return",345],["T_WHITESPACE"," ",345],["T_VARIABLE","$this",345],["T_OBJECT_OPERATOR","->",345],["T_STRING","_getHelper",345],"(",["T_CONSTANT_ENCAPSED_STRING","'core'",345],")",["T_OBJECT_OPERATOR","->",345],["T_STRING","getHash",345],"(",["T_VARIABLE","$apiKey",345],",",["T_WHITESPACE"," ",345],["T_STRING","Mage_Admin_Model_User",345],["T_DOUBLE_COLON","::",345],["T_STRING","HASH_SALT_LENGTH",345],")",";",["T_WHITESPACE","\n    ",345],"}",["T_WHITESPACE","\n\n    ",346],["T_DOC_COMMENT","\/**\n     * Get helper instance\n     *\n     * @param string $helperName\n     * @return Mage_Core_Helper_Abstract\n     *\/",348],["T_WHITESPACE","\n    ",353],["T_PROTECTED","protected",354],["T_WHITESPACE"," ",354],["T_FUNCTION","function",354],["T_WHITESPACE"," ",354],["T_STRING","_getHelper",354],"(",["T_VARIABLE","$helperName",354],")",["T_WHITESPACE","\n    ",354],"{",["T_WHITESPACE","\n        ",355],["T_RETURN","return",356],["T_WHITESPACE"," ",356],["T_STRING","Mage",356],["T_DOUBLE_COLON","::",356],["T_STRING","helper",356],"(",["T_VARIABLE","$helperName",356],")",";",["T_WHITESPACE","\n    ",356],"}",["T_WHITESPACE","\n",357],"}",["T_WHITESPACE","\n",358]]
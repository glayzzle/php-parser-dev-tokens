[["T_OPEN_TAG","<?php\n",1],["T_DOC_COMMENT","\/**\n * Magento\n *\n * NOTICE OF LICENSE\n *\n * This source file is subject to the Open Software License (OSL 3.0)\n * that is bundled with this package in the file LICENSE.txt.\n * It is also available through the world-wide-web at this URL:\n * http:\/\/opensource.org\/licenses\/osl-3.0.php\n * If you did not receive a copy of the license and are unable to\n * obtain it through the world-wide-web, please send an email\n * to license@magento.com so we can send you a copy immediately.\n *\n * DISCLAIMER\n *\n * Do not edit or add to this file if you wish to upgrade Magento to newer\n * versions in the future. If you wish to customize Magento for your\n * needs please refer to http:\/\/www.magento.com for more information.\n *\n * @category    Mage\n * @package     Mage_Api\n * @copyright  Copyright (c) 2006-2016 X.commerce, Inc. and affiliates (http:\/\/www.magento.com)\n * @license    http:\/\/opensource.org\/licenses\/osl-3.0.php  Open Software License (OSL 3.0)\n *\/",2],["T_WHITESPACE","\n\n",25],["T_DOC_COMMENT","\/**\n * Webservice api session\n *\n * @category   Mage\n * @package    Mage_Api\n * @author     Magento Core Team <core@magentocommerce.com>\n *\/",27],["T_WHITESPACE","\n",33],["T_CLASS","class",34],["T_WHITESPACE"," ",34],["T_STRING","Mage_Api_Model_Session",34],["T_WHITESPACE"," ",34],["T_EXTENDS","extends",34],["T_WHITESPACE"," ",34],["T_STRING","Mage_Core_Model_Session_Abstract",34],["T_WHITESPACE","\n",34],"{",["T_WHITESPACE","\n    ",35],["T_PUBLIC","public",36],["T_WHITESPACE"," ",36],["T_VARIABLE","$sessionIds",36],["T_WHITESPACE"," ",36],"=",["T_WHITESPACE"," ",36],["T_ARRAY","array",36],"(",")",";",["T_WHITESPACE","\n    ",36],["T_PROTECTED","protected",37],["T_WHITESPACE"," ",37],["T_VARIABLE","$_currentSessId",37],["T_WHITESPACE"," ",37],"=",["T_WHITESPACE"," ",37],["T_STRING","null",37],";",["T_WHITESPACE","\n\n    ",37],["T_PUBLIC","public",39],["T_WHITESPACE"," ",39],["T_FUNCTION","function",39],["T_WHITESPACE"," ",39],["T_STRING","start",39],"(",["T_VARIABLE","$sessionName",39],"=",["T_STRING","null",39],")",["T_WHITESPACE","\n    ",39],"{",["T_WHITESPACE","\n",40],["T_COMMENT","\/\/        parent::start($sessionName=null);\n",41],["T_WHITESPACE","        ",42],["T_VARIABLE","$this",42],["T_OBJECT_OPERATOR","->",42],["T_STRING","_currentSessId",42],["T_WHITESPACE"," ",42],"=",["T_WHITESPACE"," ",42],["T_STRING","md5",42],"(",["T_STRING","time",42],"(",")",["T_WHITESPACE"," ",42],".",["T_WHITESPACE"," ",42],["T_STRING","uniqid",42],"(",["T_CONSTANT_ENCAPSED_STRING","''",42],",",["T_WHITESPACE"," ",42],["T_STRING","true",42],")",["T_WHITESPACE"," ",42],".",["T_WHITESPACE"," ",42],["T_VARIABLE","$sessionName",42],")",";",["T_WHITESPACE","\n        ",42],["T_VARIABLE","$this",43],["T_OBJECT_OPERATOR","->",43],["T_STRING","sessionIds",43],"[","]",["T_WHITESPACE"," ",43],"=",["T_WHITESPACE"," ",43],["T_VARIABLE","$this",43],["T_OBJECT_OPERATOR","->",43],["T_STRING","getSessionId",43],"(",")",";",["T_WHITESPACE","\n        ",43],["T_RETURN","return",44],["T_WHITESPACE"," ",44],["T_VARIABLE","$this",44],";",["T_WHITESPACE","\n    ",44],"}",["T_WHITESPACE","\n\n    ",45],["T_PUBLIC","public",47],["T_WHITESPACE"," ",47],["T_FUNCTION","function",47],["T_WHITESPACE"," ",47],["T_STRING","init",47],"(",["T_VARIABLE","$namespace",47],",",["T_WHITESPACE"," ",47],["T_VARIABLE","$sessionName",47],"=",["T_STRING","null",47],")",["T_WHITESPACE","\n    ",47],"{",["T_WHITESPACE","\n        ",48],["T_IF","if",49],["T_WHITESPACE"," ",49],"(",["T_STRING","is_null",49],"(",["T_VARIABLE","$this",49],["T_OBJECT_OPERATOR","->",49],["T_STRING","_currentSessId",49],")",")",["T_WHITESPACE"," ",49],"{",["T_WHITESPACE","\n            ",49],["T_VARIABLE","$this",50],["T_OBJECT_OPERATOR","->",50],["T_STRING","start",50],"(",")",";",["T_WHITESPACE","\n        ",50],"}",["T_WHITESPACE","\n        ",51],["T_RETURN","return",52],["T_WHITESPACE"," ",52],["T_VARIABLE","$this",52],";",["T_WHITESPACE","\n    ",52],"}",["T_WHITESPACE","\n\n    ",53],["T_PUBLIC","public",55],["T_WHITESPACE"," ",55],["T_FUNCTION","function",55],["T_WHITESPACE"," ",55],["T_STRING","getSessionId",55],"(",")",["T_WHITESPACE","\n    ",55],"{",["T_WHITESPACE","\n        ",56],["T_RETURN","return",57],["T_WHITESPACE"," ",57],["T_VARIABLE","$this",57],["T_OBJECT_OPERATOR","->",57],["T_STRING","_currentSessId",57],";",["T_WHITESPACE","\n    ",57],"}",["T_WHITESPACE","\n\n    ",58],["T_PUBLIC","public",60],["T_WHITESPACE"," ",60],["T_FUNCTION","function",60],["T_WHITESPACE"," ",60],["T_STRING","setSessionId",60],"(",["T_VARIABLE","$sessId",60],["T_WHITESPACE"," ",60],"=",["T_WHITESPACE"," ",60],["T_STRING","null",60],")",["T_WHITESPACE","\n    ",60],"{",["T_WHITESPACE","\n        ",61],["T_IF","if",62],["T_WHITESPACE"," ",62],"(","!",["T_STRING","is_null",62],"(",["T_VARIABLE","$sessId",62],")",")",["T_WHITESPACE"," ",62],"{",["T_WHITESPACE","\n            ",62],["T_VARIABLE","$this",63],["T_OBJECT_OPERATOR","->",63],["T_STRING","_currentSessId",63],["T_WHITESPACE"," ",63],"=",["T_WHITESPACE"," ",63],["T_VARIABLE","$sessId",63],";",["T_WHITESPACE","\n        ",63],"}",["T_WHITESPACE","\n        ",64],["T_RETURN","return",65],["T_WHITESPACE"," ",65],["T_VARIABLE","$this",65],";",["T_WHITESPACE","\n    ",65],"}",["T_WHITESPACE","\n\n    ",66],["T_PUBLIC","public",68],["T_WHITESPACE"," ",68],["T_FUNCTION","function",68],["T_WHITESPACE"," ",68],["T_STRING","revalidateCookie",68],"(",")",["T_WHITESPACE","\n    ",68],"{",["T_WHITESPACE","\n        ",69],["T_COMMENT","\/\/ In api we don't use cookies\n",70],["T_WHITESPACE","    ",71],"}",["T_WHITESPACE","\n\n    ",71],["T_PUBLIC","public",73],["T_WHITESPACE"," ",73],["T_FUNCTION","function",73],["T_WHITESPACE"," ",73],["T_STRING","clear",73],"(",")",["T_WHITESPACE"," ",73],"{",["T_WHITESPACE","\n        ",73],["T_IF","if",74],["T_WHITESPACE"," ",74],"(",["T_VARIABLE","$sessId",74],["T_WHITESPACE"," ",74],"=",["T_WHITESPACE"," ",74],["T_VARIABLE","$this",74],["T_OBJECT_OPERATOR","->",74],["T_STRING","getSessionId",74],"(",")",")",["T_WHITESPACE"," ",74],"{",["T_WHITESPACE","\n            ",74],["T_TRY","try",75],["T_WHITESPACE"," ",75],"{",["T_WHITESPACE","\n                ",75],["T_STRING","Mage",76],["T_DOUBLE_COLON","::",76],["T_STRING","getModel",76],"(",["T_CONSTANT_ENCAPSED_STRING","'api\/user'",76],")",["T_OBJECT_OPERATOR","->",76],["T_STRING","logoutBySessId",76],"(",["T_VARIABLE","$sessId",76],")",";",["T_WHITESPACE","\n            ",76],"}",["T_WHITESPACE"," ",77],["T_CATCH","catch",77],["T_WHITESPACE"," ",77],"(",["T_STRING","Exception",77],["T_WHITESPACE"," ",77],["T_VARIABLE","$e",77],")",["T_WHITESPACE"," ",77],"{",["T_WHITESPACE","\n                ",77],["T_RETURN","return",78],["T_WHITESPACE"," ",78],["T_STRING","false",78],";",["T_WHITESPACE","\n            ",78],"}",["T_WHITESPACE","\n        ",79],"}",["T_WHITESPACE","\n        ",80],["T_RETURN","return",81],["T_WHITESPACE"," ",81],["T_STRING","true",81],";",["T_WHITESPACE","\n    ",81],"}",["T_WHITESPACE","\n\n    ",82],["T_PUBLIC","public",84],["T_WHITESPACE"," ",84],["T_FUNCTION","function",84],["T_WHITESPACE"," ",84],["T_STRING","login",84],"(",["T_VARIABLE","$username",84],",",["T_WHITESPACE"," ",84],["T_VARIABLE","$apiKey",84],")",["T_WHITESPACE","\n    ",84],"{",["T_WHITESPACE","\n        ",85],["T_VARIABLE","$user",86],["T_WHITESPACE"," ",86],"=",["T_WHITESPACE"," ",86],["T_STRING","Mage",86],["T_DOUBLE_COLON","::",86],["T_STRING","getModel",86],"(",["T_CONSTANT_ENCAPSED_STRING","'api\/user'",86],")",["T_WHITESPACE","\n            ",86],["T_OBJECT_OPERATOR","->",87],["T_STRING","setSessid",87],"(",["T_VARIABLE","$this",87],["T_OBJECT_OPERATOR","->",87],["T_STRING","getSessionId",87],"(",")",")",["T_WHITESPACE","\n            ",87],["T_OBJECT_OPERATOR","->",88],["T_STRING","login",88],"(",["T_VARIABLE","$username",88],",",["T_WHITESPACE"," ",88],["T_VARIABLE","$apiKey",88],")",";",["T_WHITESPACE","\n\n        ",88],["T_IF","if",90],["T_WHITESPACE"," ",90],"(",["T_WHITESPACE"," ",90],["T_VARIABLE","$user",90],["T_OBJECT_OPERATOR","->",90],["T_STRING","getId",90],"(",")",["T_WHITESPACE"," ",90],["T_BOOLEAN_AND","&&",90],["T_WHITESPACE"," ",90],["T_VARIABLE","$user",90],["T_OBJECT_OPERATOR","->",90],["T_STRING","getIsActive",90],"(",")",["T_WHITESPACE"," ",90],["T_IS_NOT_EQUAL","!=",90],["T_WHITESPACE"," ",90],["T_CONSTANT_ENCAPSED_STRING","'1'",90],["T_WHITESPACE"," ",90],")",["T_WHITESPACE"," ",90],"{",["T_WHITESPACE","\n            ",90],["T_STRING","Mage",91],["T_DOUBLE_COLON","::",91],["T_STRING","throwException",91],"(",["T_STRING","Mage",91],["T_DOUBLE_COLON","::",91],["T_STRING","helper",91],"(",["T_CONSTANT_ENCAPSED_STRING","'api'",91],")",["T_OBJECT_OPERATOR","->",91],["T_STRING","__",91],"(",["T_CONSTANT_ENCAPSED_STRING","'Your account has been deactivated.'",91],")",")",";",["T_WHITESPACE","\n        ",91],"}",["T_WHITESPACE"," ",92],["T_ELSEIF","elseif",92],["T_WHITESPACE"," ",92],"(","!",["T_STRING","Mage",92],["T_DOUBLE_COLON","::",92],["T_STRING","getModel",92],"(",["T_CONSTANT_ENCAPSED_STRING","'api\/user'",92],")",["T_OBJECT_OPERATOR","->",92],["T_STRING","hasAssigned2Role",92],"(",["T_VARIABLE","$user",92],["T_OBJECT_OPERATOR","->",92],["T_STRING","getId",92],"(",")",")",")",["T_WHITESPACE"," ",92],"{",["T_WHITESPACE","\n            ",92],["T_STRING","Mage",93],["T_DOUBLE_COLON","::",93],["T_STRING","throwException",93],"(",["T_STRING","Mage",93],["T_DOUBLE_COLON","::",93],["T_STRING","helper",93],"(",["T_CONSTANT_ENCAPSED_STRING","'api'",93],")",["T_OBJECT_OPERATOR","->",93],["T_STRING","__",93],"(",["T_CONSTANT_ENCAPSED_STRING","'Access denied.'",93],")",")",";",["T_WHITESPACE","\n        ",93],"}",["T_WHITESPACE"," ",94],["T_ELSE","else",94],["T_WHITESPACE"," ",94],"{",["T_WHITESPACE","\n            ",94],["T_IF","if",95],["T_WHITESPACE"," ",95],"(",["T_VARIABLE","$user",95],["T_OBJECT_OPERATOR","->",95],["T_STRING","getId",95],"(",")",")",["T_WHITESPACE"," ",95],"{",["T_WHITESPACE","\n                ",95],["T_VARIABLE","$this",96],["T_OBJECT_OPERATOR","->",96],["T_STRING","setUser",96],"(",["T_VARIABLE","$user",96],")",";",["T_WHITESPACE","\n                ",96],["T_VARIABLE","$this",97],["T_OBJECT_OPERATOR","->",97],["T_STRING","setAcl",97],"(",["T_STRING","Mage",97],["T_DOUBLE_COLON","::",97],["T_STRING","getResourceModel",97],"(",["T_CONSTANT_ENCAPSED_STRING","'api\/acl'",97],")",["T_OBJECT_OPERATOR","->",97],["T_STRING","loadAcl",97],"(",")",")",";",["T_WHITESPACE","\n            ",97],"}",["T_WHITESPACE"," ",98],["T_ELSE","else",98],["T_WHITESPACE"," ",98],"{",["T_WHITESPACE","\n                ",98],["T_STRING","Mage",99],["T_DOUBLE_COLON","::",99],["T_STRING","throwException",99],"(",["T_STRING","Mage",99],["T_DOUBLE_COLON","::",99],["T_STRING","helper",99],"(",["T_CONSTANT_ENCAPSED_STRING","'api'",99],")",["T_OBJECT_OPERATOR","->",99],["T_STRING","__",99],"(",["T_CONSTANT_ENCAPSED_STRING","'Unable to login.'",99],")",")",";",["T_WHITESPACE","\n            ",99],"}",["T_WHITESPACE","\n        ",100],"}",["T_WHITESPACE","\n\n        ",101],["T_RETURN","return",103],["T_WHITESPACE"," ",103],["T_VARIABLE","$user",103],";",["T_WHITESPACE","\n    ",103],"}",["T_WHITESPACE","\n\n    ",104],["T_PUBLIC","public",106],["T_WHITESPACE"," ",106],["T_FUNCTION","function",106],["T_WHITESPACE"," ",106],["T_STRING","refreshAcl",106],"(",["T_VARIABLE","$user",106],"=",["T_STRING","null",106],")",["T_WHITESPACE","\n    ",106],"{",["T_WHITESPACE","\n        ",107],["T_IF","if",108],["T_WHITESPACE"," ",108],"(",["T_STRING","is_null",108],"(",["T_VARIABLE","$user",108],")",")",["T_WHITESPACE"," ",108],"{",["T_WHITESPACE","\n            ",108],["T_VARIABLE","$user",109],["T_WHITESPACE"," ",109],"=",["T_WHITESPACE"," ",109],["T_VARIABLE","$this",109],["T_OBJECT_OPERATOR","->",109],["T_STRING","getUser",109],"(",")",";",["T_WHITESPACE","\n        ",109],"}",["T_WHITESPACE","\n        ",110],["T_IF","if",111],["T_WHITESPACE"," ",111],"(","!",["T_VARIABLE","$user",111],")",["T_WHITESPACE"," ",111],"{",["T_WHITESPACE","\n            ",111],["T_RETURN","return",112],["T_WHITESPACE"," ",112],["T_VARIABLE","$this",112],";",["T_WHITESPACE","\n        ",112],"}",["T_WHITESPACE","\n        ",113],["T_IF","if",114],["T_WHITESPACE"," ",114],"(","!",["T_VARIABLE","$this",114],["T_OBJECT_OPERATOR","->",114],["T_STRING","getAcl",114],"(",")",["T_WHITESPACE"," ",114],["T_BOOLEAN_OR","||",114],["T_WHITESPACE"," ",114],["T_VARIABLE","$user",114],["T_OBJECT_OPERATOR","->",114],["T_STRING","getReloadAclFlag",114],"(",")",")",["T_WHITESPACE"," ",114],"{",["T_WHITESPACE","\n            ",114],["T_VARIABLE","$this",115],["T_OBJECT_OPERATOR","->",115],["T_STRING","setAcl",115],"(",["T_STRING","Mage",115],["T_DOUBLE_COLON","::",115],["T_STRING","getResourceModel",115],"(",["T_CONSTANT_ENCAPSED_STRING","'api\/acl'",115],")",["T_OBJECT_OPERATOR","->",115],["T_STRING","loadAcl",115],"(",")",")",";",["T_WHITESPACE","\n        ",115],"}",["T_WHITESPACE","\n        ",116],["T_IF","if",117],["T_WHITESPACE"," ",117],"(",["T_VARIABLE","$user",117],["T_OBJECT_OPERATOR","->",117],["T_STRING","getReloadAclFlag",117],"(",")",")",["T_WHITESPACE"," ",117],"{",["T_WHITESPACE","\n            ",117],["T_VARIABLE","$user",118],["T_OBJECT_OPERATOR","->",118],["T_STRING","unsetData",118],"(",["T_CONSTANT_ENCAPSED_STRING","'api_key'",118],")",";",["T_WHITESPACE","\n            ",118],["T_VARIABLE","$user",119],["T_OBJECT_OPERATOR","->",119],["T_STRING","setReloadAclFlag",119],"(",["T_CONSTANT_ENCAPSED_STRING","'0'",119],")",["T_OBJECT_OPERATOR","->",119],["T_STRING","save",119],"(",")",";",["T_WHITESPACE","\n        ",119],"}",["T_WHITESPACE","\n        ",120],["T_RETURN","return",121],["T_WHITESPACE"," ",121],["T_VARIABLE","$this",121],";",["T_WHITESPACE","\n    ",121],"}",["T_WHITESPACE","\n\n    ",122],["T_DOC_COMMENT","\/**\n     * Check current user permission on resource and privilege\n     *\n     *\n     * @param   string $resource\n     * @param   string $privilege\n     * @return  bool\n     *\/",124],["T_WHITESPACE","\n    ",131],["T_PUBLIC","public",132],["T_WHITESPACE"," ",132],["T_FUNCTION","function",132],["T_WHITESPACE"," ",132],["T_STRING","isAllowed",132],"(",["T_VARIABLE","$resource",132],",",["T_WHITESPACE"," ",132],["T_VARIABLE","$privilege",132],"=",["T_STRING","null",132],")",["T_WHITESPACE","\n    ",132],"{",["T_WHITESPACE","\n        ",133],["T_VARIABLE","$user",134],["T_WHITESPACE"," ",134],"=",["T_WHITESPACE"," ",134],["T_VARIABLE","$this",134],["T_OBJECT_OPERATOR","->",134],["T_STRING","getUser",134],"(",")",";",["T_WHITESPACE","\n        ",134],["T_VARIABLE","$acl",135],["T_WHITESPACE"," ",135],"=",["T_WHITESPACE"," ",135],["T_VARIABLE","$this",135],["T_OBJECT_OPERATOR","->",135],["T_STRING","getAcl",135],"(",")",";",["T_WHITESPACE","\n\n        ",135],["T_IF","if",137],["T_WHITESPACE"," ",137],"(",["T_VARIABLE","$user",137],["T_WHITESPACE"," ",137],["T_BOOLEAN_AND","&&",137],["T_WHITESPACE"," ",137],["T_VARIABLE","$acl",137],")",["T_WHITESPACE"," ",137],"{",["T_WHITESPACE","\n            ",137],["T_TRY","try",138],["T_WHITESPACE"," ",138],"{",["T_WHITESPACE","\n                ",138],["T_IF","if",139],["T_WHITESPACE"," ",139],"(",["T_VARIABLE","$acl",139],["T_OBJECT_OPERATOR","->",139],["T_STRING","isAllowed",139],"(",["T_VARIABLE","$user",139],["T_OBJECT_OPERATOR","->",139],["T_STRING","getAclRole",139],"(",")",",",["T_WHITESPACE"," ",139],["T_CONSTANT_ENCAPSED_STRING","'all'",139],",",["T_WHITESPACE"," ",139],["T_STRING","null",139],")",")","{",["T_WHITESPACE","\n                    ",139],["T_RETURN","return",140],["T_WHITESPACE"," ",140],["T_STRING","true",140],";",["T_WHITESPACE","\n                ",140],"}",["T_WHITESPACE","\n            ",141],"}",["T_WHITESPACE"," ",142],["T_CATCH","catch",142],["T_WHITESPACE"," ",142],"(",["T_STRING","Exception",142],["T_WHITESPACE"," ",142],["T_VARIABLE","$e",142],")",["T_WHITESPACE"," ",142],"{","}",["T_WHITESPACE","\n\n            ",142],["T_TRY","try",144],["T_WHITESPACE"," ",144],"{",["T_WHITESPACE","\n                ",144],["T_RETURN","return",145],["T_WHITESPACE"," ",145],["T_VARIABLE","$acl",145],["T_OBJECT_OPERATOR","->",145],["T_STRING","isAllowed",145],"(",["T_VARIABLE","$user",145],["T_OBJECT_OPERATOR","->",145],["T_STRING","getAclRole",145],"(",")",",",["T_WHITESPACE"," ",145],["T_VARIABLE","$resource",145],",",["T_WHITESPACE"," ",145],["T_VARIABLE","$privilege",145],")",";",["T_WHITESPACE","\n            ",145],"}",["T_WHITESPACE"," ",146],["T_CATCH","catch",146],["T_WHITESPACE"," ",146],"(",["T_STRING","Exception",146],["T_WHITESPACE"," ",146],["T_VARIABLE","$e",146],")",["T_WHITESPACE"," ",146],"{",["T_WHITESPACE","\n                ",146],["T_RETURN","return",147],["T_WHITESPACE"," ",147],["T_STRING","false",147],";",["T_WHITESPACE","\n            ",147],"}",["T_WHITESPACE","\n        ",148],"}",["T_WHITESPACE","\n        ",149],["T_RETURN","return",150],["T_WHITESPACE"," ",150],["T_STRING","false",150],";",["T_WHITESPACE","\n    ",150],"}",["T_WHITESPACE","\n\n    ",151],["T_DOC_COMMENT","\/**\n     *  Check session expiration\n     *\n     *  @return  boolean\n     *\/",153],["T_WHITESPACE","\n    ",157],["T_PUBLIC","public",158],["T_WHITESPACE"," ",158],["T_FUNCTION","function",158],["T_WHITESPACE"," ",158],["T_STRING","isSessionExpired",158],["T_WHITESPACE"," ",158],"(",["T_VARIABLE","$user",158],")",["T_WHITESPACE","\n    ",158],"{",["T_WHITESPACE","\n        ",159],["T_IF","if",160],["T_WHITESPACE"," ",160],"(","!",["T_VARIABLE","$user",160],["T_OBJECT_OPERATOR","->",160],["T_STRING","getId",160],"(",")",")",["T_WHITESPACE"," ",160],"{",["T_WHITESPACE","\n            ",160],["T_RETURN","return",161],["T_WHITESPACE"," ",161],["T_STRING","true",161],";",["T_WHITESPACE","\n        ",161],"}",["T_WHITESPACE","\n        ",162],["T_VARIABLE","$timeout",163],["T_WHITESPACE"," ",163],"=",["T_WHITESPACE"," ",163],["T_STRING","strtotime",163],"(",["T_WHITESPACE"," ",163],["T_STRING","now",163],"(",")",["T_WHITESPACE"," ",163],")",["T_WHITESPACE"," ",163],"-",["T_WHITESPACE"," ",163],["T_STRING","strtotime",163],"(",["T_WHITESPACE"," ",163],["T_VARIABLE","$user",163],["T_OBJECT_OPERATOR","->",163],["T_STRING","getLogdate",163],"(",")",["T_WHITESPACE"," ",163],")",";",["T_WHITESPACE","\n        ",163],["T_RETURN","return",164],["T_WHITESPACE"," ",164],["T_VARIABLE","$timeout",164],["T_WHITESPACE"," ",164],">",["T_WHITESPACE"," ",164],["T_STRING","Mage",164],["T_DOUBLE_COLON","::",164],["T_STRING","getStoreConfig",164],"(",["T_CONSTANT_ENCAPSED_STRING","'api\/config\/session_timeout'",164],")",";",["T_WHITESPACE","\n    ",164],"}",["T_WHITESPACE","\n\n\n    ",165],["T_PUBLIC","public",168],["T_WHITESPACE"," ",168],["T_FUNCTION","function",168],["T_WHITESPACE"," ",168],["T_STRING","isLoggedIn",168],"(",["T_VARIABLE","$sessId",168],["T_WHITESPACE"," ",168],"=",["T_WHITESPACE"," ",168],["T_STRING","false",168],")",["T_WHITESPACE","\n    ",168],"{",["T_WHITESPACE","\n        ",169],["T_VARIABLE","$userExists",170],["T_WHITESPACE"," ",170],"=",["T_WHITESPACE"," ",170],["T_VARIABLE","$this",170],["T_OBJECT_OPERATOR","->",170],["T_STRING","getUser",170],"(",")",["T_WHITESPACE"," ",170],["T_BOOLEAN_AND","&&",170],["T_WHITESPACE"," ",170],["T_VARIABLE","$this",170],["T_OBJECT_OPERATOR","->",170],["T_STRING","getUser",170],"(",")",["T_OBJECT_OPERATOR","->",170],["T_STRING","getId",170],"(",")",";",["T_WHITESPACE","\n\n        ",170],["T_IF","if",172],["T_WHITESPACE"," ",172],"(","!",["T_VARIABLE","$userExists",172],["T_WHITESPACE"," ",172],["T_BOOLEAN_AND","&&",172],["T_WHITESPACE"," ",172],["T_VARIABLE","$sessId",172],["T_WHITESPACE"," ",172],["T_IS_NOT_IDENTICAL","!==",172],["T_WHITESPACE"," ",172],["T_STRING","false",172],")",["T_WHITESPACE"," ",172],"{",["T_WHITESPACE","\n            ",172],["T_RETURN","return",173],["T_WHITESPACE"," ",173],["T_VARIABLE","$this",173],["T_OBJECT_OPERATOR","->",173],["T_STRING","_renewBySessId",173],"(",["T_VARIABLE","$sessId",173],")",";",["T_WHITESPACE","\n        ",173],"}",["T_WHITESPACE","\n\n        ",174],["T_IF","if",176],["T_WHITESPACE"," ",176],"(",["T_VARIABLE","$userExists",176],")",["T_WHITESPACE"," ",176],"{",["T_WHITESPACE","\n            ",176],["T_STRING","Mage",177],["T_DOUBLE_COLON","::",177],["T_STRING","register",177],"(",["T_CONSTANT_ENCAPSED_STRING","'isSecureArea'",177],",",["T_WHITESPACE"," ",177],["T_STRING","true",177],",",["T_WHITESPACE"," ",177],["T_STRING","true",177],")",";",["T_WHITESPACE","\n        ",177],"}",["T_WHITESPACE","\n        ",178],["T_RETURN","return",179],["T_WHITESPACE"," ",179],["T_VARIABLE","$userExists",179],";",["T_WHITESPACE","\n    ",179],"}",["T_WHITESPACE","\n\n    ",180],["T_DOC_COMMENT","\/**\n     *  Renew user by session ID if session not expired\n     *\n     *  @param    string $sessId\n     *  @return  boolean\n     *\/",182],["T_WHITESPACE","\n    ",187],["T_PROTECTED","protected",188],["T_WHITESPACE"," ",188],["T_FUNCTION","function",188],["T_WHITESPACE"," ",188],["T_STRING","_renewBySessId",188],["T_WHITESPACE"," ",188],"(",["T_VARIABLE","$sessId",188],")",["T_WHITESPACE","\n    ",188],"{",["T_WHITESPACE","\n        ",189],["T_VARIABLE","$user",190],["T_WHITESPACE"," ",190],"=",["T_WHITESPACE"," ",190],["T_STRING","Mage",190],["T_DOUBLE_COLON","::",190],["T_STRING","getModel",190],"(",["T_CONSTANT_ENCAPSED_STRING","'api\/user'",190],")",["T_OBJECT_OPERATOR","->",190],["T_STRING","loadBySessId",190],"(",["T_VARIABLE","$sessId",190],")",";",["T_WHITESPACE","\n        ",190],["T_IF","if",191],["T_WHITESPACE"," ",191],"(","!",["T_VARIABLE","$user",191],["T_OBJECT_OPERATOR","->",191],["T_STRING","getId",191],"(",")",["T_WHITESPACE"," ",191],["T_BOOLEAN_OR","||",191],["T_WHITESPACE"," ",191],"!",["T_VARIABLE","$user",191],["T_OBJECT_OPERATOR","->",191],["T_STRING","getSessid",191],"(",")",")",["T_WHITESPACE"," ",191],"{",["T_WHITESPACE","\n            ",191],["T_RETURN","return",192],["T_WHITESPACE"," ",192],["T_STRING","false",192],";",["T_WHITESPACE","\n        ",192],"}",["T_WHITESPACE","\n\n        ",193],["T_IF","if",195],["T_WHITESPACE"," ",195],"(",["T_VARIABLE","$user",195],["T_OBJECT_OPERATOR","->",195],["T_STRING","getSessid",195],"(",")",["T_WHITESPACE"," ",195],["T_IS_EQUAL","==",195],["T_WHITESPACE"," ",195],["T_VARIABLE","$sessId",195],["T_WHITESPACE"," ",195],["T_BOOLEAN_AND","&&",195],["T_WHITESPACE"," ",195],"!",["T_VARIABLE","$this",195],["T_OBJECT_OPERATOR","->",195],["T_STRING","isSessionExpired",195],"(",["T_VARIABLE","$user",195],")",")",["T_WHITESPACE"," ",195],"{",["T_WHITESPACE","\n            ",195],["T_VARIABLE","$this",196],["T_OBJECT_OPERATOR","->",196],["T_STRING","setUser",196],"(",["T_VARIABLE","$user",196],")",";",["T_WHITESPACE","\n            ",196],["T_VARIABLE","$this",197],["T_OBJECT_OPERATOR","->",197],["T_STRING","setAcl",197],"(",["T_STRING","Mage",197],["T_DOUBLE_COLON","::",197],["T_STRING","getResourceModel",197],"(",["T_CONSTANT_ENCAPSED_STRING","'api\/acl'",197],")",["T_OBJECT_OPERATOR","->",197],["T_STRING","loadAcl",197],"(",")",")",";",["T_WHITESPACE","\n\n            ",197],["T_VARIABLE","$user",199],["T_OBJECT_OPERATOR","->",199],["T_STRING","getResource",199],"(",")",["T_OBJECT_OPERATOR","->",199],["T_STRING","recordLogin",199],"(",["T_VARIABLE","$user",199],")",["T_WHITESPACE","\n                ",199],["T_OBJECT_OPERATOR","->",200],["T_STRING","recordSession",200],"(",["T_VARIABLE","$user",200],")",";",["T_WHITESPACE","\n\n            ",200],["T_RETURN","return",202],["T_WHITESPACE"," ",202],["T_STRING","true",202],";",["T_WHITESPACE","\n        ",202],"}",["T_WHITESPACE","\n        ",203],["T_RETURN","return",204],["T_WHITESPACE"," ",204],["T_STRING","false",204],";",["T_WHITESPACE","\n    ",204],"}",["T_WHITESPACE","\n\n",205],"}",["T_WHITESPACE"," ",207],["T_COMMENT","\/\/ Class Mage_Api_Model_Session End\n",207]]
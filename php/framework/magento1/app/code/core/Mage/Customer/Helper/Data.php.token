[["T_OPEN_TAG","<?php\n",1],["T_DOC_COMMENT","\/**\n * Magento\n *\n * NOTICE OF LICENSE\n *\n * This source file is subject to the Open Software License (OSL 3.0)\n * that is bundled with this package in the file LICENSE.txt.\n * It is also available through the world-wide-web at this URL:\n * http:\/\/opensource.org\/licenses\/osl-3.0.php\n * If you did not receive a copy of the license and are unable to\n * obtain it through the world-wide-web, please send an email\n * to license@magento.com so we can send you a copy immediately.\n *\n * DISCLAIMER\n *\n * Do not edit or add to this file if you wish to upgrade Magento to newer\n * versions in the future. If you wish to customize Magento for your\n * needs please refer to http:\/\/www.magento.com for more information.\n *\n * @category    Mage\n * @package     Mage_Customer\n * @copyright  Copyright (c) 2006-2016 X.commerce, Inc. and affiliates (http:\/\/www.magento.com)\n * @license    http:\/\/opensource.org\/licenses\/osl-3.0.php  Open Software License (OSL 3.0)\n *\/",2],["T_WHITESPACE","\n\n\n",25],["T_DOC_COMMENT","\/**\n * Customer Data Helper\n *\n * @category   Mage\n * @package    Mage_Customer\n * @author     Magento Core Team <core@magentocommerce.com>\n *\/",28],["T_WHITESPACE","\n",34],["T_CLASS","class",35],["T_WHITESPACE"," ",35],["T_STRING","Mage_Customer_Helper_Data",35],["T_WHITESPACE"," ",35],["T_EXTENDS","extends",35],["T_WHITESPACE"," ",35],["T_STRING","Mage_Core_Helper_Abstract",35],["T_WHITESPACE","\n",35],"{",["T_WHITESPACE","\n    ",36],["T_DOC_COMMENT","\/**\n     * Query param name for last url visited\n     *\/",37],["T_WHITESPACE","\n    ",39],["T_CONST","const",40],["T_WHITESPACE"," ",40],["T_STRING","REFERER_QUERY_PARAM_NAME",40],["T_WHITESPACE"," ",40],"=",["T_WHITESPACE"," ",40],["T_CONSTANT_ENCAPSED_STRING","'referer'",40],";",["T_WHITESPACE","\n\n    ",40],["T_DOC_COMMENT","\/**\n     * Route for customer account login page\n     *\/",42],["T_WHITESPACE","\n    ",44],["T_CONST","const",45],["T_WHITESPACE"," ",45],["T_STRING","ROUTE_ACCOUNT_LOGIN",45],["T_WHITESPACE"," ",45],"=",["T_WHITESPACE"," ",45],["T_CONSTANT_ENCAPSED_STRING","'customer\/account\/login'",45],";",["T_WHITESPACE","\n\n    ",45],["T_DOC_COMMENT","\/**\n     * Config name for Redirect Customer to Account Dashboard after Logging in setting\n     *\/",47],["T_WHITESPACE","\n    ",49],["T_CONST","const",50],["T_WHITESPACE"," ",50],["T_STRING","XML_PATH_CUSTOMER_STARTUP_REDIRECT_TO_DASHBOARD",50],["T_WHITESPACE"," ",50],"=",["T_WHITESPACE"," ",50],["T_CONSTANT_ENCAPSED_STRING","'customer\/startup\/redirect_dashboard'",50],";",["T_WHITESPACE","\n\n    ",50],["T_DOC_COMMENT","\/**\n     * Config paths to VAT related customer groups\n     *\/",52],["T_WHITESPACE","\n    ",54],["T_CONST","const",55],["T_WHITESPACE"," ",55],["T_STRING","XML_PATH_CUSTOMER_VIV_INTRA_UNION_GROUP",55],["T_WHITESPACE"," ",55],"=",["T_WHITESPACE"," ",55],["T_CONSTANT_ENCAPSED_STRING","'customer\/create_account\/viv_intra_union_group'",55],";",["T_WHITESPACE","\n    ",55],["T_CONST","const",56],["T_WHITESPACE"," ",56],["T_STRING","XML_PATH_CUSTOMER_VIV_DOMESTIC_GROUP",56],["T_WHITESPACE"," ",56],"=",["T_WHITESPACE"," ",56],["T_CONSTANT_ENCAPSED_STRING","'customer\/create_account\/viv_domestic_group'",56],";",["T_WHITESPACE","\n    ",56],["T_CONST","const",57],["T_WHITESPACE"," ",57],["T_STRING","XML_PATH_CUSTOMER_VIV_INVALID_GROUP",57],["T_WHITESPACE"," ",57],"=",["T_WHITESPACE"," ",57],["T_CONSTANT_ENCAPSED_STRING","'customer\/create_account\/viv_invalid_group'",57],";",["T_WHITESPACE","\n    ",57],["T_CONST","const",58],["T_WHITESPACE"," ",58],["T_STRING","XML_PATH_CUSTOMER_VIV_ERROR_GROUP",58],["T_WHITESPACE"," ",58],"=",["T_WHITESPACE"," ",58],["T_CONSTANT_ENCAPSED_STRING","'customer\/create_account\/viv_error_group'",58],";",["T_WHITESPACE","\n\n    ",58],["T_DOC_COMMENT","\/**\n     * Config path to option that enables\/disables automatic group assignment based on VAT\n     *\/",60],["T_WHITESPACE","\n    ",62],["T_CONST","const",63],["T_WHITESPACE"," ",63],["T_STRING","XML_PATH_CUSTOMER_VIV_GROUP_AUTO_ASSIGN",63],["T_WHITESPACE"," ",63],"=",["T_WHITESPACE"," ",63],["T_CONSTANT_ENCAPSED_STRING","'customer\/create_account\/viv_disable_auto_group_assign_default'",63],";",["T_WHITESPACE","\n\n    ",63],["T_DOC_COMMENT","\/**\n     * Config path to support email\n     *\/",65],["T_WHITESPACE","\n    ",67],["T_CONST","const",68],["T_WHITESPACE"," ",68],["T_STRING","XML_PATH_SUPPORT_EMAIL",68],["T_WHITESPACE"," ",68],"=",["T_WHITESPACE"," ",68],["T_CONSTANT_ENCAPSED_STRING","'trans_email\/ident_support\/email'",68],";",["T_WHITESPACE","\n\n    ",68],["T_DOC_COMMENT","\/**\n     * WSDL of VAT validation service\n     *\n     *\/",70],["T_WHITESPACE","\n    ",73],["T_CONST","const",74],["T_WHITESPACE"," ",74],["T_STRING","VAT_VALIDATION_WSDL_URL",74],["T_WHITESPACE"," ",74],"=",["T_WHITESPACE"," ",74],["T_CONSTANT_ENCAPSED_STRING","'http:\/\/ec.europa.eu\/taxation_customs\/vies\/services\/checkVatService?wsdl'",74],";",["T_WHITESPACE","\n\n    ",74],["T_DOC_COMMENT","\/**\n     * Configuration path to expiration period of reset password link\n     *\/",76],["T_WHITESPACE","\n    ",78],["T_CONST","const",79],["T_WHITESPACE"," ",79],["T_STRING","XML_PATH_CUSTOMER_RESET_PASSWORD_LINK_EXPIRATION_PERIOD",79],["T_WHITESPACE","\n        ",79],"=",["T_WHITESPACE"," ",80],["T_CONSTANT_ENCAPSED_STRING","'default\/customer\/password\/reset_link_expiration_period'",80],";",["T_WHITESPACE","\n\n    ",80],["T_DOC_COMMENT","\/**\n     * Configuration path to require admin password on customer password change\n     *\/",82],["T_WHITESPACE","\n    ",84],["T_CONST","const",85],["T_WHITESPACE"," ",85],["T_STRING","XML_PATH_CUSTOMER_REQUIRE_ADMIN_USER_TO_CHANGE_USER_PASSWORD",85],["T_WHITESPACE","\n        ",85],"=",["T_WHITESPACE"," ",86],["T_CONSTANT_ENCAPSED_STRING","'customer\/password\/require_admin_user_to_change_user_password'",86],";",["T_WHITESPACE","\n\n    ",86],["T_DOC_COMMENT","\/**\n     * Configuration path to password forgotten flow change\n     *\/",88],["T_WHITESPACE","\n    ",90],["T_CONST","const",91],["T_WHITESPACE"," ",91],["T_STRING","XML_PATH_CUSTOMER_FORGOT_PASSWORD_FLOW_SECURE",91],["T_WHITESPACE"," ",91],"=",["T_WHITESPACE"," ",91],["T_CONSTANT_ENCAPSED_STRING","'admin\/security\/forgot_password_flow_secure'",91],";",["T_WHITESPACE","\n    ",91],["T_CONST","const",92],["T_WHITESPACE"," ",92],["T_STRING","XML_PATH_CUSTOMER_FORGOT_PASSWORD_EMAIL_TIMES",92],["T_WHITESPACE"," ",92],"=",["T_WHITESPACE"," ",92],["T_CONSTANT_ENCAPSED_STRING","'admin\/security\/forgot_password_email_times'",92],";",["T_WHITESPACE","\n    ",92],["T_CONST","const",93],["T_WHITESPACE"," ",93],["T_STRING","XML_PATH_CUSTOMER_FORGOT_PASSWORD_IP_TIMES",93],["T_WHITESPACE","    ",93],"=",["T_WHITESPACE"," ",93],["T_CONSTANT_ENCAPSED_STRING","'admin\/security\/forgot_password_ip_times'",93],";",["T_WHITESPACE","\n\n    ",93],["T_DOC_COMMENT","\/**\n     * VAT class constants\n     *\/",95],["T_WHITESPACE","\n    ",97],["T_CONST","const",98],["T_WHITESPACE"," ",98],["T_STRING","VAT_CLASS_DOMESTIC",98],["T_WHITESPACE","    ",98],"=",["T_WHITESPACE"," ",98],["T_CONSTANT_ENCAPSED_STRING","'domestic'",98],";",["T_WHITESPACE","\n    ",98],["T_CONST","const",99],["T_WHITESPACE"," ",99],["T_STRING","VAT_CLASS_INTRA_UNION",99],["T_WHITESPACE"," ",99],"=",["T_WHITESPACE"," ",99],["T_CONSTANT_ENCAPSED_STRING","'intra_union'",99],";",["T_WHITESPACE","\n    ",99],["T_CONST","const",100],["T_WHITESPACE"," ",100],["T_STRING","VAT_CLASS_INVALID",100],["T_WHITESPACE","     ",100],"=",["T_WHITESPACE"," ",100],["T_CONSTANT_ENCAPSED_STRING","'invalid'",100],";",["T_WHITESPACE","\n    ",100],["T_CONST","const",101],["T_WHITESPACE"," ",101],["T_STRING","VAT_CLASS_ERROR",101],["T_WHITESPACE","       ",101],"=",["T_WHITESPACE"," ",101],["T_CONSTANT_ENCAPSED_STRING","'error'",101],";",["T_WHITESPACE","\n\n    ",101],["T_DOC_COMMENT","\/**\n     * Customer groups collection\n     *\n     * @var Mage_Customer_Model_Entity_Group_Collection\n     *\/",103],["T_WHITESPACE","\n    ",107],["T_PROTECTED","protected",108],["T_WHITESPACE"," ",108],["T_VARIABLE","$_groups",108],";",["T_WHITESPACE","\n\n    ",108],["T_DOC_COMMENT","\/**\n     * Check customer is logged in\n     *\n     * @return bool\n     *\/",110],["T_WHITESPACE","\n    ",114],["T_PUBLIC","public",115],["T_WHITESPACE"," ",115],["T_FUNCTION","function",115],["T_WHITESPACE"," ",115],["T_STRING","isLoggedIn",115],"(",")",["T_WHITESPACE","\n    ",115],"{",["T_WHITESPACE","\n        ",116],["T_RETURN","return",117],["T_WHITESPACE"," ",117],["T_STRING","Mage",117],["T_DOUBLE_COLON","::",117],["T_STRING","getSingleton",117],"(",["T_CONSTANT_ENCAPSED_STRING","'customer\/session'",117],")",["T_OBJECT_OPERATOR","->",117],["T_STRING","isLoggedIn",117],"(",")",";",["T_WHITESPACE","\n    ",117],"}",["T_WHITESPACE","\n\n    ",118],["T_DOC_COMMENT","\/**\n     * Retrieve logged in customer\n     *\n     * @return Mage_Customer_Model_Customer\n     *\/",120],["T_WHITESPACE","\n    ",124],["T_PUBLIC","public",125],["T_WHITESPACE"," ",125],["T_FUNCTION","function",125],["T_WHITESPACE"," ",125],["T_STRING","getCustomer",125],"(",")",["T_WHITESPACE","\n    ",125],"{",["T_WHITESPACE","\n        ",126],["T_IF","if",127],["T_WHITESPACE"," ",127],"(",["T_EMPTY","empty",127],"(",["T_VARIABLE","$this",127],["T_OBJECT_OPERATOR","->",127],["T_STRING","_customer",127],")",")",["T_WHITESPACE"," ",127],"{",["T_WHITESPACE","\n            ",127],["T_VARIABLE","$this",128],["T_OBJECT_OPERATOR","->",128],["T_STRING","_customer",128],["T_WHITESPACE"," ",128],"=",["T_WHITESPACE"," ",128],["T_STRING","Mage",128],["T_DOUBLE_COLON","::",128],["T_STRING","getSingleton",128],"(",["T_CONSTANT_ENCAPSED_STRING","'customer\/session'",128],")",["T_OBJECT_OPERATOR","->",128],["T_STRING","getCustomer",128],"(",")",";",["T_WHITESPACE","\n        ",128],"}",["T_WHITESPACE","\n        ",129],["T_RETURN","return",130],["T_WHITESPACE"," ",130],["T_VARIABLE","$this",130],["T_OBJECT_OPERATOR","->",130],["T_STRING","_customer",130],";",["T_WHITESPACE","\n    ",130],"}",["T_WHITESPACE","\n\n    ",131],["T_DOC_COMMENT","\/**\n     * Retrieve customer groups collection\n     *\n     * @return Mage_Customer_Model_Entity_Group_Collection\n     *\/",133],["T_WHITESPACE","\n    ",137],["T_PUBLIC","public",138],["T_WHITESPACE"," ",138],["T_FUNCTION","function",138],["T_WHITESPACE"," ",138],["T_STRING","getGroups",138],"(",")",["T_WHITESPACE","\n    ",138],"{",["T_WHITESPACE","\n        ",139],["T_IF","if",140],["T_WHITESPACE"," ",140],"(",["T_EMPTY","empty",140],"(",["T_VARIABLE","$this",140],["T_OBJECT_OPERATOR","->",140],["T_STRING","_groups",140],")",")",["T_WHITESPACE"," ",140],"{",["T_WHITESPACE","\n            ",140],["T_VARIABLE","$this",141],["T_OBJECT_OPERATOR","->",141],["T_STRING","_groups",141],["T_WHITESPACE"," ",141],"=",["T_WHITESPACE"," ",141],["T_STRING","Mage",141],["T_DOUBLE_COLON","::",141],["T_STRING","getModel",141],"(",["T_CONSTANT_ENCAPSED_STRING","'customer\/group'",141],")",["T_OBJECT_OPERATOR","->",141],["T_STRING","getResourceCollection",141],"(",")",["T_WHITESPACE","\n                ",141],["T_OBJECT_OPERATOR","->",142],["T_STRING","setRealGroupsFilter",142],"(",")",["T_WHITESPACE","\n                ",142],["T_OBJECT_OPERATOR","->",143],["T_STRING","load",143],"(",")",";",["T_WHITESPACE","\n        ",143],"}",["T_WHITESPACE","\n        ",144],["T_RETURN","return",145],["T_WHITESPACE"," ",145],["T_VARIABLE","$this",145],["T_OBJECT_OPERATOR","->",145],["T_STRING","_groups",145],";",["T_WHITESPACE","\n    ",145],"}",["T_WHITESPACE","\n\n    ",146],["T_DOC_COMMENT","\/**\n     * Retrieve current (logged in) customer object\n     *\n     * @return Mage_Customer_Model_Customer\n     *\/",148],["T_WHITESPACE","\n    ",152],["T_PUBLIC","public",153],["T_WHITESPACE"," ",153],["T_FUNCTION","function",153],["T_WHITESPACE"," ",153],["T_STRING","getCurrentCustomer",153],"(",")",["T_WHITESPACE","\n    ",153],"{",["T_WHITESPACE","\n        ",154],["T_RETURN","return",155],["T_WHITESPACE"," ",155],["T_VARIABLE","$this",155],["T_OBJECT_OPERATOR","->",155],["T_STRING","getCustomer",155],"(",")",";",["T_WHITESPACE","\n    ",155],"}",["T_WHITESPACE","\n\n    ",156],["T_DOC_COMMENT","\/**\n     * Retrieve full customer name from provided object\n     *\n     * @param Varien_Object $object\n     * @return string\n     *\/",158],["T_WHITESPACE","\n    ",163],["T_PUBLIC","public",164],["T_WHITESPACE"," ",164],["T_FUNCTION","function",164],["T_WHITESPACE"," ",164],["T_STRING","getFullCustomerName",164],"(",["T_VARIABLE","$object",164],["T_WHITESPACE"," ",164],"=",["T_WHITESPACE"," ",164],["T_STRING","null",164],")",["T_WHITESPACE","\n    ",164],"{",["T_WHITESPACE","\n        ",165],["T_VARIABLE","$name",166],["T_WHITESPACE"," ",166],"=",["T_WHITESPACE"," ",166],["T_CONSTANT_ENCAPSED_STRING","''",166],";",["T_WHITESPACE","\n        ",166],["T_IF","if",167],["T_WHITESPACE"," ",167],"(",["T_STRING","is_null",167],"(",["T_VARIABLE","$object",167],")",")",["T_WHITESPACE"," ",167],"{",["T_WHITESPACE","\n            ",167],["T_VARIABLE","$name",168],["T_WHITESPACE"," ",168],"=",["T_WHITESPACE"," ",168],["T_VARIABLE","$this",168],["T_OBJECT_OPERATOR","->",168],["T_STRING","getCustomerName",168],"(",")",";",["T_WHITESPACE","\n        ",168],"}",["T_WHITESPACE"," ",169],["T_ELSE","else",169],["T_WHITESPACE"," ",169],"{",["T_WHITESPACE","\n            ",169],["T_VARIABLE","$config",170],["T_WHITESPACE"," ",170],"=",["T_WHITESPACE"," ",170],["T_STRING","Mage",170],["T_DOUBLE_COLON","::",170],["T_STRING","getSingleton",170],"(",["T_CONSTANT_ENCAPSED_STRING","'eav\/config'",170],")",";",["T_WHITESPACE","\n\n            ",170],["T_IF","if",172],["T_WHITESPACE"," ",172],"(",["T_WHITESPACE","\n                ",172],["T_VARIABLE","$config",173],["T_OBJECT_OPERATOR","->",173],["T_STRING","getAttribute",173],"(",["T_CONSTANT_ENCAPSED_STRING","'customer'",173],",",["T_WHITESPACE"," ",173],["T_CONSTANT_ENCAPSED_STRING","'prefix'",173],")",["T_OBJECT_OPERATOR","->",173],["T_STRING","getIsVisible",173],"(",")",["T_WHITESPACE","\n                ",173],["T_BOOLEAN_AND","&&",174],["T_WHITESPACE"," ",174],"(",["T_WHITESPACE","\n                    ",174],["T_VARIABLE","$object",175],["T_OBJECT_OPERATOR","->",175],["T_STRING","getPrefix",175],"(",")",["T_WHITESPACE","\n                    ",175],["T_BOOLEAN_OR","||",176],["T_WHITESPACE"," ",176],["T_VARIABLE","$object",176],["T_OBJECT_OPERATOR","->",176],["T_STRING","getCustomerPrefix",176],"(",")",["T_WHITESPACE","\n                    ",176],")",["T_WHITESPACE","\n                ",177],")",["T_WHITESPACE"," ",178],"{",["T_WHITESPACE","\n                    ",178],["T_VARIABLE","$name",179],["T_WHITESPACE"," ",179],["T_CONCAT_EQUAL",".=",179],["T_WHITESPACE"," ",179],"(",["T_VARIABLE","$object",179],["T_OBJECT_OPERATOR","->",179],["T_STRING","getPrefix",179],"(",")",["T_WHITESPACE"," ",179],"?",["T_WHITESPACE"," ",179],["T_VARIABLE","$object",179],["T_OBJECT_OPERATOR","->",179],["T_STRING","getPrefix",179],"(",")",["T_WHITESPACE"," ",179],":",["T_WHITESPACE"," ",179],["T_VARIABLE","$object",179],["T_OBJECT_OPERATOR","->",179],["T_STRING","getCustomerPrefix",179],"(",")",")",["T_WHITESPACE"," ",179],".",["T_WHITESPACE"," ",179],["T_CONSTANT_ENCAPSED_STRING","' '",179],";",["T_WHITESPACE","\n            ",179],"}",["T_WHITESPACE","\n\n            ",180],["T_VARIABLE","$name",182],["T_WHITESPACE"," ",182],["T_CONCAT_EQUAL",".=",182],["T_WHITESPACE"," ",182],["T_VARIABLE","$object",182],["T_OBJECT_OPERATOR","->",182],["T_STRING","getFirstname",182],"(",")",["T_WHITESPACE"," ",182],"?",["T_WHITESPACE"," ",182],["T_VARIABLE","$object",182],["T_OBJECT_OPERATOR","->",182],["T_STRING","getFirstname",182],"(",")",["T_WHITESPACE"," ",182],":",["T_WHITESPACE"," ",182],["T_VARIABLE","$object",182],["T_OBJECT_OPERATOR","->",182],["T_STRING","getCustomerFirstname",182],"(",")",";",["T_WHITESPACE","\n\n            ",182],["T_IF","if",184],["T_WHITESPACE"," ",184],"(",["T_VARIABLE","$config",184],["T_OBJECT_OPERATOR","->",184],["T_STRING","getAttribute",184],"(",["T_CONSTANT_ENCAPSED_STRING","'customer'",184],",",["T_WHITESPACE"," ",184],["T_CONSTANT_ENCAPSED_STRING","'middlename'",184],")",["T_OBJECT_OPERATOR","->",184],["T_STRING","getIsVisible",184],"(",")",["T_WHITESPACE","\n                ",184],["T_BOOLEAN_AND","&&",185],["T_WHITESPACE"," ",185],"(",["T_WHITESPACE","\n                    ",185],["T_VARIABLE","$object",186],["T_OBJECT_OPERATOR","->",186],["T_STRING","getMiddlename",186],"(",")",["T_WHITESPACE","\n                    ",186],["T_BOOLEAN_OR","||",187],["T_WHITESPACE"," ",187],["T_VARIABLE","$object",187],["T_OBJECT_OPERATOR","->",187],["T_STRING","getCustomerMiddlename",187],"(",")",["T_WHITESPACE","\n                    ",187],")",["T_WHITESPACE","\n                ",188],")",["T_WHITESPACE"," ",189],"{",["T_WHITESPACE","\n                    ",189],["T_VARIABLE","$name",190],["T_WHITESPACE"," ",190],["T_CONCAT_EQUAL",".=",190],["T_WHITESPACE"," ",190],["T_CONSTANT_ENCAPSED_STRING","' '",190],["T_WHITESPACE"," ",190],".",["T_WHITESPACE"," ",190],"(",["T_WHITESPACE","\n                        ",190],["T_VARIABLE","$object",191],["T_OBJECT_OPERATOR","->",191],["T_STRING","getMiddlename",191],"(",")",["T_WHITESPACE","\n                        ",191],"?",["T_WHITESPACE"," ",192],["T_VARIABLE","$object",192],["T_OBJECT_OPERATOR","->",192],["T_STRING","getMiddlename",192],"(",")",["T_WHITESPACE","\n                        ",192],":",["T_WHITESPACE"," ",193],["T_VARIABLE","$object",193],["T_OBJECT_OPERATOR","->",193],["T_STRING","getCustomerMiddlename",193],"(",")",["T_WHITESPACE","\n                    ",193],")",";",["T_WHITESPACE","\n            ",194],"}",["T_WHITESPACE","\n\n            ",195],["T_VARIABLE","$name",197],["T_WHITESPACE"," ",197],["T_CONCAT_EQUAL",".=",197],["T_WHITESPACE"," ",197],["T_CONSTANT_ENCAPSED_STRING","' '",197],["T_WHITESPACE"," ",197],".",["T_WHITESPACE"," ",197],"(",["T_WHITESPACE","\n                ",197],["T_VARIABLE","$object",198],["T_OBJECT_OPERATOR","->",198],["T_STRING","getLastname",198],"(",")",["T_WHITESPACE","\n                ",198],"?",["T_WHITESPACE"," ",199],["T_VARIABLE","$object",199],["T_OBJECT_OPERATOR","->",199],["T_STRING","getLastname",199],"(",")",["T_WHITESPACE","\n                ",199],":",["T_WHITESPACE"," ",200],["T_VARIABLE","$object",200],["T_OBJECT_OPERATOR","->",200],["T_STRING","getCustomerLastname",200],"(",")",["T_WHITESPACE","\n            ",200],")",";",["T_WHITESPACE","\n\n            ",201],["T_IF","if",203],["T_WHITESPACE"," ",203],"(",["T_VARIABLE","$config",203],["T_OBJECT_OPERATOR","->",203],["T_STRING","getAttribute",203],"(",["T_CONSTANT_ENCAPSED_STRING","'customer'",203],",",["T_WHITESPACE"," ",203],["T_CONSTANT_ENCAPSED_STRING","'suffix'",203],")",["T_OBJECT_OPERATOR","->",203],["T_STRING","getIsVisible",203],"(",")",["T_WHITESPACE","\n                ",203],["T_BOOLEAN_AND","&&",204],["T_WHITESPACE"," ",204],"(",["T_WHITESPACE","\n                    ",204],["T_VARIABLE","$object",205],["T_OBJECT_OPERATOR","->",205],["T_STRING","getSuffix",205],"(",")",["T_WHITESPACE","\n                    ",205],["T_BOOLEAN_OR","||",206],["T_WHITESPACE"," ",206],["T_VARIABLE","$object",206],["T_OBJECT_OPERATOR","->",206],["T_STRING","getCustomerSuffix",206],"(",")",["T_WHITESPACE","\n                    ",206],")",["T_WHITESPACE","\n                ",207],")",["T_WHITESPACE"," ",208],"{",["T_WHITESPACE","\n                    ",208],["T_VARIABLE","$name",209],["T_WHITESPACE"," ",209],["T_CONCAT_EQUAL",".=",209],["T_WHITESPACE"," ",209],["T_CONSTANT_ENCAPSED_STRING","' '",209],["T_WHITESPACE"," ",209],".",["T_WHITESPACE"," ",209],"(",["T_WHITESPACE","\n                        ",209],["T_VARIABLE","$object",210],["T_OBJECT_OPERATOR","->",210],["T_STRING","getSuffix",210],"(",")",["T_WHITESPACE","\n                        ",210],"?",["T_WHITESPACE"," ",211],["T_VARIABLE","$object",211],["T_OBJECT_OPERATOR","->",211],["T_STRING","getSuffix",211],"(",")",["T_WHITESPACE","\n                        ",211],":",["T_WHITESPACE"," ",212],["T_VARIABLE","$object",212],["T_OBJECT_OPERATOR","->",212],["T_STRING","getCustomerSuffix",212],"(",")",["T_WHITESPACE","\n                    ",212],")",";",["T_WHITESPACE","\n            ",213],"}",["T_WHITESPACE","\n        ",214],"}",["T_WHITESPACE","\n        ",215],["T_RETURN","return",216],["T_WHITESPACE"," ",216],["T_VARIABLE","$name",216],";",["T_WHITESPACE","\n    ",216],"}",["T_WHITESPACE","\n\n    ",217],["T_DOC_COMMENT","\/**\n     * Retrieve current customer name\n     *\n     * @return string\n     *\/",219],["T_WHITESPACE","\n    ",223],["T_PUBLIC","public",224],["T_WHITESPACE"," ",224],["T_FUNCTION","function",224],["T_WHITESPACE"," ",224],["T_STRING","getCustomerName",224],"(",")",["T_WHITESPACE","\n    ",224],"{",["T_WHITESPACE","\n        ",225],["T_RETURN","return",226],["T_WHITESPACE"," ",226],["T_VARIABLE","$this",226],["T_OBJECT_OPERATOR","->",226],["T_STRING","getCustomer",226],"(",")",["T_OBJECT_OPERATOR","->",226],["T_STRING","getName",226],"(",")",";",["T_WHITESPACE","\n    ",226],"}",["T_WHITESPACE","\n\n    ",227],["T_DOC_COMMENT","\/**\n     * Check customer has address\n     *\n     * @return bool\n     *\/",229],["T_WHITESPACE","\n    ",233],["T_PUBLIC","public",234],["T_WHITESPACE"," ",234],["T_FUNCTION","function",234],["T_WHITESPACE"," ",234],["T_STRING","customerHasAddresses",234],"(",")",["T_WHITESPACE","\n    ",234],"{",["T_WHITESPACE","\n        ",235],["T_RETURN","return",236],["T_WHITESPACE"," ",236],["T_STRING","count",236],"(",["T_VARIABLE","$this",236],["T_OBJECT_OPERATOR","->",236],["T_STRING","getCustomer",236],"(",")",["T_OBJECT_OPERATOR","->",236],["T_STRING","getAddresses",236],"(",")",")",["T_WHITESPACE"," ",236],">",["T_WHITESPACE"," ",236],["T_LNUMBER","0",236],";",["T_WHITESPACE","\n    ",236],"}",["T_WHITESPACE","\n\n    ",237],["T_COMMENT","\/**************************************************************************\n     * Customer urls\n     *\/",239],["T_WHITESPACE","\n\n    ",241],["T_DOC_COMMENT","\/**\n     * Retrieve customer login url\n     *\n     * @return string\n     *\/",243],["T_WHITESPACE","\n    ",247],["T_PUBLIC","public",248],["T_WHITESPACE"," ",248],["T_FUNCTION","function",248],["T_WHITESPACE"," ",248],["T_STRING","getLoginUrl",248],"(",")",["T_WHITESPACE","\n    ",248],"{",["T_WHITESPACE","\n        ",249],["T_RETURN","return",250],["T_WHITESPACE"," ",250],["T_VARIABLE","$this",250],["T_OBJECT_OPERATOR","->",250],["T_STRING","_getUrl",250],"(",["T_STRING","self",250],["T_DOUBLE_COLON","::",250],["T_STRING","ROUTE_ACCOUNT_LOGIN",250],",",["T_WHITESPACE"," ",250],["T_VARIABLE","$this",250],["T_OBJECT_OPERATOR","->",250],["T_STRING","getLoginUrlParams",250],"(",")",")",";",["T_WHITESPACE","\n    ",250],"}",["T_WHITESPACE","\n\n    ",251],["T_DOC_COMMENT","\/**\n     * Retrieve parameters of customer login url\n     *\n     * @return array\n     *\/",253],["T_WHITESPACE","\n    ",257],["T_PUBLIC","public",258],["T_WHITESPACE"," ",258],["T_FUNCTION","function",258],["T_WHITESPACE"," ",258],["T_STRING","getLoginUrlParams",258],"(",")",["T_WHITESPACE","\n    ",258],"{",["T_WHITESPACE","\n        ",259],["T_VARIABLE","$params",260],["T_WHITESPACE"," ",260],"=",["T_WHITESPACE"," ",260],["T_ARRAY","array",260],"(",")",";",["T_WHITESPACE","\n\n        ",260],["T_VARIABLE","$referer",262],["T_WHITESPACE"," ",262],"=",["T_WHITESPACE"," ",262],["T_VARIABLE","$this",262],["T_OBJECT_OPERATOR","->",262],["T_STRING","_getRequest",262],"(",")",["T_OBJECT_OPERATOR","->",262],["T_STRING","getParam",262],"(",["T_STRING","self",262],["T_DOUBLE_COLON","::",262],["T_STRING","REFERER_QUERY_PARAM_NAME",262],")",";",["T_WHITESPACE","\n\n        ",262],["T_IF","if",264],["T_WHITESPACE"," ",264],"(","!",["T_VARIABLE","$referer",264],["T_WHITESPACE"," ",264],["T_BOOLEAN_AND","&&",264],["T_WHITESPACE"," ",264],"!",["T_STRING","Mage",264],["T_DOUBLE_COLON","::",264],["T_STRING","getStoreConfigFlag",264],"(",["T_STRING","self",264],["T_DOUBLE_COLON","::",264],["T_STRING","XML_PATH_CUSTOMER_STARTUP_REDIRECT_TO_DASHBOARD",264],")",["T_WHITESPACE","\n            ",264],["T_BOOLEAN_AND","&&",265],["T_WHITESPACE"," ",265],"!",["T_STRING","Mage",265],["T_DOUBLE_COLON","::",265],["T_STRING","getSingleton",265],"(",["T_CONSTANT_ENCAPSED_STRING","'customer\/session'",265],")",["T_OBJECT_OPERATOR","->",265],["T_STRING","getNoReferer",265],"(",")",["T_WHITESPACE","\n        ",265],")",["T_WHITESPACE"," ",266],"{",["T_WHITESPACE","\n            ",266],["T_VARIABLE","$referer",267],["T_WHITESPACE"," ",267],"=",["T_WHITESPACE"," ",267],["T_STRING","Mage",267],["T_DOUBLE_COLON","::",267],["T_STRING","getUrl",267],"(",["T_CONSTANT_ENCAPSED_STRING","'*\/*\/*'",267],",",["T_WHITESPACE"," ",267],["T_ARRAY","array",267],"(",["T_CONSTANT_ENCAPSED_STRING","'_current'",267],["T_WHITESPACE"," ",267],["T_DOUBLE_ARROW","=>",267],["T_WHITESPACE"," ",267],["T_STRING","true",267],",",["T_WHITESPACE"," ",267],["T_CONSTANT_ENCAPSED_STRING","'_use_rewrite'",267],["T_WHITESPACE"," ",267],["T_DOUBLE_ARROW","=>",267],["T_WHITESPACE"," ",267],["T_STRING","true",267],")",")",";",["T_WHITESPACE","\n            ",267],["T_VARIABLE","$referer",268],["T_WHITESPACE"," ",268],"=",["T_WHITESPACE"," ",268],["T_STRING","Mage",268],["T_DOUBLE_COLON","::",268],["T_STRING","helper",268],"(",["T_CONSTANT_ENCAPSED_STRING","'core'",268],")",["T_OBJECT_OPERATOR","->",268],["T_STRING","urlEncode",268],"(",["T_VARIABLE","$referer",268],")",";",["T_WHITESPACE","\n        ",268],"}",["T_WHITESPACE","\n\n        ",269],["T_IF","if",271],["T_WHITESPACE"," ",271],"(",["T_VARIABLE","$referer",271],")",["T_WHITESPACE"," ",271],"{",["T_WHITESPACE","\n            ",271],["T_VARIABLE","$params",272],["T_WHITESPACE"," ",272],"=",["T_WHITESPACE"," ",272],["T_ARRAY","array",272],"(",["T_STRING","self",272],["T_DOUBLE_COLON","::",272],["T_STRING","REFERER_QUERY_PARAM_NAME",272],["T_WHITESPACE"," ",272],["T_DOUBLE_ARROW","=>",272],["T_WHITESPACE"," ",272],["T_VARIABLE","$referer",272],")",";",["T_WHITESPACE","\n        ",272],"}",["T_WHITESPACE","\n\n        ",273],["T_RETURN","return",275],["T_WHITESPACE"," ",275],["T_VARIABLE","$params",275],";",["T_WHITESPACE","\n    ",275],"}",["T_WHITESPACE","\n\n    ",276],["T_DOC_COMMENT","\/**\n     * Retrieve customer login POST URL\n     *\n     * @return string\n     *\/",278],["T_WHITESPACE","\n    ",282],["T_PUBLIC","public",283],["T_WHITESPACE"," ",283],["T_FUNCTION","function",283],["T_WHITESPACE"," ",283],["T_STRING","getLoginPostUrl",283],"(",")",["T_WHITESPACE","\n    ",283],"{",["T_WHITESPACE","\n        ",284],["T_VARIABLE","$params",285],["T_WHITESPACE"," ",285],"=",["T_WHITESPACE"," ",285],["T_ARRAY","array",285],"(",")",";",["T_WHITESPACE","\n        ",285],["T_IF","if",286],["T_WHITESPACE"," ",286],"(",["T_VARIABLE","$this",286],["T_OBJECT_OPERATOR","->",286],["T_STRING","_getRequest",286],"(",")",["T_OBJECT_OPERATOR","->",286],["T_STRING","getParam",286],"(",["T_STRING","self",286],["T_DOUBLE_COLON","::",286],["T_STRING","REFERER_QUERY_PARAM_NAME",286],")",")",["T_WHITESPACE"," ",286],"{",["T_WHITESPACE","\n            ",286],["T_VARIABLE","$params",287],["T_WHITESPACE"," ",287],"=",["T_WHITESPACE"," ",287],["T_ARRAY","array",287],"(",["T_WHITESPACE","\n                ",287],["T_STRING","self",288],["T_DOUBLE_COLON","::",288],["T_STRING","REFERER_QUERY_PARAM_NAME",288],["T_WHITESPACE"," ",288],["T_DOUBLE_ARROW","=>",288],["T_WHITESPACE"," ",288],["T_VARIABLE","$this",288],["T_OBJECT_OPERATOR","->",288],["T_STRING","_getRequest",288],"(",")",["T_OBJECT_OPERATOR","->",288],["T_STRING","getParam",288],"(",["T_STRING","self",288],["T_DOUBLE_COLON","::",288],["T_STRING","REFERER_QUERY_PARAM_NAME",288],")",["T_WHITESPACE","\n            ",288],")",";",["T_WHITESPACE","\n        ",289],"}",["T_WHITESPACE","\n        ",290],["T_RETURN","return",291],["T_WHITESPACE"," ",291],["T_VARIABLE","$this",291],["T_OBJECT_OPERATOR","->",291],["T_STRING","_getUrl",291],"(",["T_CONSTANT_ENCAPSED_STRING","'customer\/account\/loginPost'",291],",",["T_WHITESPACE"," ",291],["T_VARIABLE","$params",291],")",";",["T_WHITESPACE","\n    ",291],"}",["T_WHITESPACE","\n\n    ",292],["T_DOC_COMMENT","\/**\n     * Retrieve customer logout url\n     *\n     * @return string\n     *\/",294],["T_WHITESPACE","\n    ",298],["T_PUBLIC","public",299],["T_WHITESPACE"," ",299],["T_FUNCTION","function",299],["T_WHITESPACE"," ",299],["T_STRING","getLogoutUrl",299],"(",")",["T_WHITESPACE","\n    ",299],"{",["T_WHITESPACE","\n        ",300],["T_RETURN","return",301],["T_WHITESPACE"," ",301],["T_VARIABLE","$this",301],["T_OBJECT_OPERATOR","->",301],["T_STRING","_getUrl",301],"(",["T_CONSTANT_ENCAPSED_STRING","'customer\/account\/logout'",301],")",";",["T_WHITESPACE","\n    ",301],"}",["T_WHITESPACE","\n\n    ",302],["T_DOC_COMMENT","\/**\n     * Retrieve customer dashboard url\n     *\n     * @return string\n     *\/",304],["T_WHITESPACE","\n    ",308],["T_PUBLIC","public",309],["T_WHITESPACE"," ",309],["T_FUNCTION","function",309],["T_WHITESPACE"," ",309],["T_STRING","getDashboardUrl",309],"(",")",["T_WHITESPACE","\n    ",309],"{",["T_WHITESPACE","\n        ",310],["T_RETURN","return",311],["T_WHITESPACE"," ",311],["T_VARIABLE","$this",311],["T_OBJECT_OPERATOR","->",311],["T_STRING","_getUrl",311],"(",["T_CONSTANT_ENCAPSED_STRING","'customer\/account'",311],")",";",["T_WHITESPACE","\n    ",311],"}",["T_WHITESPACE","\n\n    ",312],["T_DOC_COMMENT","\/**\n     * Retrieve customer account page url\n     *\n     * @return string\n     *\/",314],["T_WHITESPACE","\n    ",318],["T_PUBLIC","public",319],["T_WHITESPACE"," ",319],["T_FUNCTION","function",319],["T_WHITESPACE"," ",319],["T_STRING","getAccountUrl",319],"(",")",["T_WHITESPACE","\n    ",319],"{",["T_WHITESPACE","\n        ",320],["T_RETURN","return",321],["T_WHITESPACE"," ",321],["T_VARIABLE","$this",321],["T_OBJECT_OPERATOR","->",321],["T_STRING","_getUrl",321],"(",["T_CONSTANT_ENCAPSED_STRING","'customer\/account'",321],")",";",["T_WHITESPACE","\n    ",321],"}",["T_WHITESPACE","\n\n    ",322],["T_DOC_COMMENT","\/**\n     * Retrieve customer register form url\n     *\n     * @return string\n     *\/",324],["T_WHITESPACE","\n    ",328],["T_PUBLIC","public",329],["T_WHITESPACE"," ",329],["T_FUNCTION","function",329],["T_WHITESPACE"," ",329],["T_STRING","getRegisterUrl",329],"(",")",["T_WHITESPACE","\n    ",329],"{",["T_WHITESPACE","\n        ",330],["T_RETURN","return",331],["T_WHITESPACE"," ",331],["T_VARIABLE","$this",331],["T_OBJECT_OPERATOR","->",331],["T_STRING","_getUrl",331],"(",["T_CONSTANT_ENCAPSED_STRING","'customer\/account\/create'",331],")",";",["T_WHITESPACE","\n    ",331],"}",["T_WHITESPACE","\n\n    ",332],["T_DOC_COMMENT","\/**\n     * Retrieve customer register form post url\n     *\n     * @return string\n     *\/",334],["T_WHITESPACE","\n    ",338],["T_PUBLIC","public",339],["T_WHITESPACE"," ",339],["T_FUNCTION","function",339],["T_WHITESPACE"," ",339],["T_STRING","getRegisterPostUrl",339],"(",")",["T_WHITESPACE","\n    ",339],"{",["T_WHITESPACE","\n        ",340],["T_RETURN","return",341],["T_WHITESPACE"," ",341],["T_VARIABLE","$this",341],["T_OBJECT_OPERATOR","->",341],["T_STRING","_getUrl",341],"(",["T_CONSTANT_ENCAPSED_STRING","'customer\/account\/createpost'",341],")",";",["T_WHITESPACE","\n    ",341],"}",["T_WHITESPACE","\n\n    ",342],["T_DOC_COMMENT","\/**\n     * Retrieve customer account edit form url\n     *\n     * @return string\n     *\/",344],["T_WHITESPACE","\n    ",348],["T_PUBLIC","public",349],["T_WHITESPACE"," ",349],["T_FUNCTION","function",349],["T_WHITESPACE"," ",349],["T_STRING","getEditUrl",349],"(",")",["T_WHITESPACE","\n    ",349],"{",["T_WHITESPACE","\n        ",350],["T_RETURN","return",351],["T_WHITESPACE"," ",351],["T_VARIABLE","$this",351],["T_OBJECT_OPERATOR","->",351],["T_STRING","_getUrl",351],"(",["T_CONSTANT_ENCAPSED_STRING","'customer\/account\/edit'",351],")",";",["T_WHITESPACE","\n    ",351],"}",["T_WHITESPACE","\n\n    ",352],["T_DOC_COMMENT","\/**\n     * Retrieve customer edit POST URL\n     *\n     * @return string\n     *\/",354],["T_WHITESPACE","\n    ",358],["T_PUBLIC","public",359],["T_WHITESPACE"," ",359],["T_FUNCTION","function",359],["T_WHITESPACE"," ",359],["T_STRING","getEditPostUrl",359],"(",")",["T_WHITESPACE","\n    ",359],"{",["T_WHITESPACE","\n        ",360],["T_RETURN","return",361],["T_WHITESPACE"," ",361],["T_VARIABLE","$this",361],["T_OBJECT_OPERATOR","->",361],["T_STRING","_getUrl",361],"(",["T_CONSTANT_ENCAPSED_STRING","'customer\/account\/editpost'",361],")",";",["T_WHITESPACE","\n    ",361],"}",["T_WHITESPACE","\n\n    ",362],["T_DOC_COMMENT","\/**\n     * Retrieve url of forgot password page\n     *\n     * @return string\n     *\/",364],["T_WHITESPACE","\n    ",368],["T_PUBLIC","public",369],["T_WHITESPACE"," ",369],["T_FUNCTION","function",369],["T_WHITESPACE"," ",369],["T_STRING","getForgotPasswordUrl",369],"(",")",["T_WHITESPACE","\n    ",369],"{",["T_WHITESPACE","\n        ",370],["T_RETURN","return",371],["T_WHITESPACE"," ",371],["T_VARIABLE","$this",371],["T_OBJECT_OPERATOR","->",371],["T_STRING","_getUrl",371],"(",["T_CONSTANT_ENCAPSED_STRING","'customer\/account\/forgotpassword'",371],")",";",["T_WHITESPACE","\n    ",371],"}",["T_WHITESPACE","\n\n    ",372],["T_DOC_COMMENT","\/**\n     * Check is confirmation required\n     *\n     * @return bool\n     *\/",374],["T_WHITESPACE","\n    ",378],["T_PUBLIC","public",379],["T_WHITESPACE"," ",379],["T_FUNCTION","function",379],["T_WHITESPACE"," ",379],["T_STRING","isConfirmationRequired",379],"(",")",["T_WHITESPACE","\n    ",379],"{",["T_WHITESPACE","\n        ",380],["T_RETURN","return",381],["T_WHITESPACE"," ",381],["T_VARIABLE","$this",381],["T_OBJECT_OPERATOR","->",381],["T_STRING","getCustomer",381],"(",")",["T_OBJECT_OPERATOR","->",381],["T_STRING","isConfirmationRequired",381],"(",")",";",["T_WHITESPACE","\n    ",381],"}",["T_WHITESPACE","\n\n    ",382],["T_DOC_COMMENT","\/**\n     * Retrieve confirmation URL for Email\n     *\n     * @param string $email\n     * @return string\n     *\/",384],["T_WHITESPACE","\n    ",389],["T_PUBLIC","public",390],["T_WHITESPACE"," ",390],["T_FUNCTION","function",390],["T_WHITESPACE"," ",390],["T_STRING","getEmailConfirmationUrl",390],"(",["T_VARIABLE","$email",390],["T_WHITESPACE"," ",390],"=",["T_WHITESPACE"," ",390],["T_STRING","null",390],")",["T_WHITESPACE","\n    ",390],"{",["T_WHITESPACE","\n        ",391],["T_RETURN","return",392],["T_WHITESPACE"," ",392],["T_VARIABLE","$this",392],["T_OBJECT_OPERATOR","->",392],["T_STRING","_getUrl",392],"(",["T_CONSTANT_ENCAPSED_STRING","'customer\/account\/confirmation'",392],",",["T_WHITESPACE"," ",392],["T_ARRAY","array",392],"(",["T_CONSTANT_ENCAPSED_STRING","'email'",392],["T_WHITESPACE"," ",392],["T_DOUBLE_ARROW","=>",392],["T_WHITESPACE"," ",392],["T_VARIABLE","$email",392],")",")",";",["T_WHITESPACE","\n    ",392],"}",["T_WHITESPACE","\n\n    ",393],["T_DOC_COMMENT","\/**\n     * Check whether customers registration is allowed\n     *\n     * @return bool\n     *\/",395],["T_WHITESPACE","\n    ",399],["T_PUBLIC","public",400],["T_WHITESPACE"," ",400],["T_FUNCTION","function",400],["T_WHITESPACE"," ",400],["T_STRING","isRegistrationAllowed",400],"(",")",["T_WHITESPACE","\n    ",400],"{",["T_WHITESPACE","\n        ",401],["T_VARIABLE","$result",402],["T_WHITESPACE"," ",402],"=",["T_WHITESPACE"," ",402],["T_NEW","new",402],["T_WHITESPACE"," ",402],["T_STRING","Varien_Object",402],"(",["T_ARRAY","array",402],"(",["T_CONSTANT_ENCAPSED_STRING","'is_allowed'",402],["T_WHITESPACE"," ",402],["T_DOUBLE_ARROW","=>",402],["T_WHITESPACE"," ",402],["T_STRING","true",402],")",")",";",["T_WHITESPACE","\n        ",402],["T_STRING","Mage",403],["T_DOUBLE_COLON","::",403],["T_STRING","dispatchEvent",403],"(",["T_CONSTANT_ENCAPSED_STRING","'customer_registration_is_allowed'",403],",",["T_WHITESPACE"," ",403],["T_ARRAY","array",403],"(",["T_CONSTANT_ENCAPSED_STRING","'result'",403],["T_WHITESPACE"," ",403],["T_DOUBLE_ARROW","=>",403],["T_WHITESPACE"," ",403],["T_VARIABLE","$result",403],")",")",";",["T_WHITESPACE","\n        ",403],["T_RETURN","return",404],["T_WHITESPACE"," ",404],["T_VARIABLE","$result",404],["T_OBJECT_OPERATOR","->",404],["T_STRING","getIsAllowed",404],"(",")",";",["T_WHITESPACE","\n    ",404],"}",["T_WHITESPACE","\n\n    ",405],["T_DOC_COMMENT","\/**\n     * Retrieve name prefix dropdown options\n     *\n     * @return array|bool\n     *\/",407],["T_WHITESPACE","\n    ",411],["T_PUBLIC","public",412],["T_WHITESPACE"," ",412],["T_FUNCTION","function",412],["T_WHITESPACE"," ",412],["T_STRING","getNamePrefixOptions",412],"(",["T_VARIABLE","$store",412],["T_WHITESPACE"," ",412],"=",["T_WHITESPACE"," ",412],["T_STRING","null",412],")",["T_WHITESPACE","\n    ",412],"{",["T_WHITESPACE","\n        ",413],["T_RETURN","return",414],["T_WHITESPACE"," ",414],["T_VARIABLE","$this",414],["T_OBJECT_OPERATOR","->",414],["T_STRING","_prepareNamePrefixSuffixOptions",414],"(",["T_WHITESPACE","\n            ",414],["T_STRING","Mage",415],["T_DOUBLE_COLON","::",415],["T_STRING","helper",415],"(",["T_CONSTANT_ENCAPSED_STRING","'customer\/address'",415],")",["T_OBJECT_OPERATOR","->",415],["T_STRING","getConfig",415],"(",["T_CONSTANT_ENCAPSED_STRING","'prefix_options'",415],",",["T_WHITESPACE"," ",415],["T_VARIABLE","$store",415],")",["T_WHITESPACE","\n        ",415],")",";",["T_WHITESPACE","\n    ",416],"}",["T_WHITESPACE","\n\n    ",417],["T_DOC_COMMENT","\/**\n     * Retrieve name suffix dropdown options\n     *\n     * @return array|bool\n     *\/",419],["T_WHITESPACE","\n    ",423],["T_PUBLIC","public",424],["T_WHITESPACE"," ",424],["T_FUNCTION","function",424],["T_WHITESPACE"," ",424],["T_STRING","getNameSuffixOptions",424],"(",["T_VARIABLE","$store",424],["T_WHITESPACE"," ",424],"=",["T_WHITESPACE"," ",424],["T_STRING","null",424],")",["T_WHITESPACE","\n    ",424],"{",["T_WHITESPACE","\n        ",425],["T_RETURN","return",426],["T_WHITESPACE"," ",426],["T_VARIABLE","$this",426],["T_OBJECT_OPERATOR","->",426],["T_STRING","_prepareNamePrefixSuffixOptions",426],"(",["T_WHITESPACE","\n            ",426],["T_STRING","Mage",427],["T_DOUBLE_COLON","::",427],["T_STRING","helper",427],"(",["T_CONSTANT_ENCAPSED_STRING","'customer\/address'",427],")",["T_OBJECT_OPERATOR","->",427],["T_STRING","getConfig",427],"(",["T_CONSTANT_ENCAPSED_STRING","'suffix_options'",427],",",["T_WHITESPACE"," ",427],["T_VARIABLE","$store",427],")",["T_WHITESPACE","\n        ",427],")",";",["T_WHITESPACE","\n    ",428],"}",["T_WHITESPACE","\n\n    ",429],["T_DOC_COMMENT","\/**\n     * Unserialize and clear name prefix or suffix options\n     *\n     * @param string $options\n     * @return array|bool\n     *\/",431],["T_WHITESPACE","\n    ",436],["T_PROTECTED","protected",437],["T_WHITESPACE"," ",437],["T_FUNCTION","function",437],["T_WHITESPACE"," ",437],["T_STRING","_prepareNamePrefixSuffixOptions",437],"(",["T_VARIABLE","$options",437],")",["T_WHITESPACE","\n    ",437],"{",["T_WHITESPACE","\n        ",438],["T_VARIABLE","$options",439],["T_WHITESPACE"," ",439],"=",["T_WHITESPACE"," ",439],["T_STRING","trim",439],"(",["T_VARIABLE","$options",439],")",";",["T_WHITESPACE","\n        ",439],["T_IF","if",440],["T_WHITESPACE"," ",440],"(",["T_EMPTY","empty",440],"(",["T_VARIABLE","$options",440],")",")",["T_WHITESPACE"," ",440],"{",["T_WHITESPACE","\n            ",440],["T_RETURN","return",441],["T_WHITESPACE"," ",441],["T_STRING","false",441],";",["T_WHITESPACE","\n        ",441],"}",["T_WHITESPACE","\n        ",442],["T_VARIABLE","$result",443],["T_WHITESPACE"," ",443],"=",["T_WHITESPACE"," ",443],["T_ARRAY","array",443],"(",")",";",["T_WHITESPACE","\n        ",443],["T_VARIABLE","$options",444],["T_WHITESPACE"," ",444],"=",["T_WHITESPACE"," ",444],["T_STRING","explode",444],"(",["T_CONSTANT_ENCAPSED_STRING","';'",444],",",["T_WHITESPACE"," ",444],["T_VARIABLE","$options",444],")",";",["T_WHITESPACE","\n        ",444],["T_FOREACH","foreach",445],["T_WHITESPACE"," ",445],"(",["T_VARIABLE","$options",445],["T_WHITESPACE"," ",445],["T_AS","as",445],["T_WHITESPACE"," ",445],["T_VARIABLE","$value",445],")",["T_WHITESPACE"," ",445],"{",["T_WHITESPACE","\n            ",445],["T_VARIABLE","$value",446],["T_WHITESPACE"," ",446],"=",["T_WHITESPACE"," ",446],["T_VARIABLE","$this",446],["T_OBJECT_OPERATOR","->",446],["T_STRING","escapeHtml",446],"(",["T_STRING","trim",446],"(",["T_VARIABLE","$value",446],")",")",";",["T_WHITESPACE","\n            ",446],["T_VARIABLE","$result",447],"[",["T_VARIABLE","$value",447],"]",["T_WHITESPACE"," ",447],"=",["T_WHITESPACE"," ",447],["T_VARIABLE","$value",447],";",["T_WHITESPACE","\n        ",447],"}",["T_WHITESPACE","\n        ",448],["T_RETURN","return",449],["T_WHITESPACE"," ",449],["T_VARIABLE","$result",449],";",["T_WHITESPACE","\n    ",449],"}",["T_WHITESPACE","\n\n    ",450],["T_DOC_COMMENT","\/**\n     * Generate unique token for reset password confirmation link\n     *\n     * @return string\n     *\/",452],["T_WHITESPACE","\n    ",456],["T_PUBLIC","public",457],["T_WHITESPACE"," ",457],["T_FUNCTION","function",457],["T_WHITESPACE"," ",457],["T_STRING","generateResetPasswordLinkToken",457],"(",")",["T_WHITESPACE","\n    ",457],"{",["T_WHITESPACE","\n        ",458],["T_RETURN","return",459],["T_WHITESPACE"," ",459],["T_STRING","Mage",459],["T_DOUBLE_COLON","::",459],["T_STRING","helper",459],"(",["T_CONSTANT_ENCAPSED_STRING","'core'",459],")",["T_OBJECT_OPERATOR","->",459],["T_STRING","uniqHash",459],"(",")",";",["T_WHITESPACE","\n    ",459],"}",["T_WHITESPACE","\n\n    ",460],["T_DOC_COMMENT","\/**\n     * Retrieve customer reset password link expiration period in days\n     *\n     * @return int\n     *\/",462],["T_WHITESPACE","\n    ",466],["T_PUBLIC","public",467],["T_WHITESPACE"," ",467],["T_FUNCTION","function",467],["T_WHITESPACE"," ",467],["T_STRING","getResetPasswordLinkExpirationPeriod",467],"(",")",["T_WHITESPACE","\n    ",467],"{",["T_WHITESPACE","\n        ",468],["T_RETURN","return",469],["T_WHITESPACE"," ",469],["T_INT_CAST","(int)",469],["T_WHITESPACE"," ",469],["T_STRING","Mage",469],["T_DOUBLE_COLON","::",469],["T_STRING","getConfig",469],"(",")",["T_OBJECT_OPERATOR","->",469],["T_STRING","getNode",469],"(",["T_STRING","self",469],["T_DOUBLE_COLON","::",469],["T_STRING","XML_PATH_CUSTOMER_RESET_PASSWORD_LINK_EXPIRATION_PERIOD",469],")",";",["T_WHITESPACE","\n    ",469],"}",["T_WHITESPACE","\n\n    ",470],["T_DOC_COMMENT","\/**\n     * Retrieve is require admin password on customer password change\n     *\n     * @return bool\n     *\/",472],["T_WHITESPACE","\n    ",476],["T_PUBLIC","public",477],["T_WHITESPACE"," ",477],["T_FUNCTION","function",477],["T_WHITESPACE"," ",477],["T_STRING","getIsRequireAdminUserToChangeUserPassword",477],"(",")",["T_WHITESPACE","\n    ",477],"{",["T_WHITESPACE","\n        ",478],["T_RETURN","return",479],["T_WHITESPACE"," ",479],["T_STRING","Mage",479],["T_DOUBLE_COLON","::",479],["T_STRING","getStoreConfigFlag",479],"(",["T_STRING","self",479],["T_DOUBLE_COLON","::",479],["T_STRING","XML_PATH_CUSTOMER_REQUIRE_ADMIN_USER_TO_CHANGE_USER_PASSWORD",479],")",";",["T_WHITESPACE","\n    ",479],"}",["T_WHITESPACE","\n\n    ",480],["T_DOC_COMMENT","\/**\n     * Get default customer group id\n     *\n     * @param Mage_Core_Model_Store|string|int $store\n     * @return int\n     *\/",482],["T_WHITESPACE","\n    ",487],["T_PUBLIC","public",488],["T_WHITESPACE"," ",488],["T_FUNCTION","function",488],["T_WHITESPACE"," ",488],["T_STRING","getDefaultCustomerGroupId",488],"(",["T_VARIABLE","$store",488],["T_WHITESPACE"," ",488],"=",["T_WHITESPACE"," ",488],["T_STRING","null",488],")",["T_WHITESPACE","\n    ",488],"{",["T_WHITESPACE","\n        ",489],["T_RETURN","return",490],["T_WHITESPACE"," ",490],["T_INT_CAST","(int)",490],["T_STRING","Mage",490],["T_DOUBLE_COLON","::",490],["T_STRING","getStoreConfig",490],"(",["T_STRING","Mage_Customer_Model_Group",490],["T_DOUBLE_COLON","::",490],["T_STRING","XML_PATH_DEFAULT_ID",490],",",["T_WHITESPACE"," ",490],["T_VARIABLE","$store",490],")",";",["T_WHITESPACE","\n    ",490],"}",["T_WHITESPACE","\n\n    ",491],["T_DOC_COMMENT","\/**\n     * Retrieve forgot password flow secure type\n     *\n     * @return int\n     *\/",493],["T_WHITESPACE","\n    ",497],["T_PUBLIC","public",498],["T_WHITESPACE"," ",498],["T_FUNCTION","function",498],["T_WHITESPACE"," ",498],["T_STRING","getCustomerForgotPasswordFlowSecure",498],"(",")",["T_WHITESPACE","\n    ",498],"{",["T_WHITESPACE","\n        ",499],["T_RETURN","return",500],["T_WHITESPACE"," ",500],["T_INT_CAST","(int)",500],["T_STRING","Mage",500],["T_DOUBLE_COLON","::",500],["T_STRING","getStoreConfig",500],"(",["T_STRING","self",500],["T_DOUBLE_COLON","::",500],["T_STRING","XML_PATH_CUSTOMER_FORGOT_PASSWORD_FLOW_SECURE",500],")",";",["T_WHITESPACE","\n    ",500],"}",["T_WHITESPACE","\n\n    ",501],["T_DOC_COMMENT","\/**\n     * Retrieve forgot password requests to times per 24 hours from 1 e-mail\n     *\n     * @return int\n     *\/",503],["T_WHITESPACE","\n    ",507],["T_PUBLIC","public",508],["T_WHITESPACE"," ",508],["T_FUNCTION","function",508],["T_WHITESPACE"," ",508],["T_STRING","getCustomerForgotPasswordEmailTimes",508],"(",")",["T_WHITESPACE","\n    ",508],"{",["T_WHITESPACE","\n        ",509],["T_RETURN","return",510],["T_WHITESPACE"," ",510],["T_INT_CAST","(int)",510],["T_STRING","Mage",510],["T_DOUBLE_COLON","::",510],["T_STRING","getStoreConfig",510],"(",["T_STRING","self",510],["T_DOUBLE_COLON","::",510],["T_STRING","XML_PATH_CUSTOMER_FORGOT_PASSWORD_EMAIL_TIMES",510],")",";",["T_WHITESPACE","\n    ",510],"}",["T_WHITESPACE","\n\n    ",511],["T_DOC_COMMENT","\/**\n     * Retrieve forgot password requests to times per hour from 1 IP\n     *\n     * @return int\n     *\/",513],["T_WHITESPACE","\n    ",517],["T_PUBLIC","public",518],["T_WHITESPACE"," ",518],["T_FUNCTION","function",518],["T_WHITESPACE"," ",518],["T_STRING","getCustomerForgotPasswordIpTimes",518],"(",")",["T_WHITESPACE","\n    ",518],"{",["T_WHITESPACE","\n        ",519],["T_RETURN","return",520],["T_WHITESPACE"," ",520],["T_INT_CAST","(int)",520],["T_STRING","Mage",520],["T_DOUBLE_COLON","::",520],["T_STRING","getStoreConfig",520],"(",["T_STRING","self",520],["T_DOUBLE_COLON","::",520],["T_STRING","XML_PATH_CUSTOMER_FORGOT_PASSWORD_IP_TIMES",520],")",";",["T_WHITESPACE","\n    ",520],"}",["T_WHITESPACE","\n\n    ",521],["T_DOC_COMMENT","\/**\n     * Retrieve customer group ID based on his VAT number\n     *\n     * @param string $customerCountryCode\n     * @param Varien_Object $vatValidationResult\n     * @param Mage_Core_Model_Store|string|int $store\n     * @return null|int\n     *\/",523],["T_WHITESPACE","\n    ",530],["T_PUBLIC","public",531],["T_WHITESPACE"," ",531],["T_FUNCTION","function",531],["T_WHITESPACE"," ",531],["T_STRING","getCustomerGroupIdBasedOnVatNumber",531],"(",["T_VARIABLE","$customerCountryCode",531],",",["T_WHITESPACE"," ",531],["T_VARIABLE","$vatValidationResult",531],",",["T_WHITESPACE"," ",531],["T_VARIABLE","$store",531],["T_WHITESPACE"," ",531],"=",["T_WHITESPACE"," ",531],["T_STRING","null",531],")",["T_WHITESPACE","\n    ",531],"{",["T_WHITESPACE","\n        ",532],["T_VARIABLE","$groupId",533],["T_WHITESPACE"," ",533],"=",["T_WHITESPACE"," ",533],["T_STRING","null",533],";",["T_WHITESPACE","\n\n        ",533],["T_VARIABLE","$vatClass",535],["T_WHITESPACE"," ",535],"=",["T_WHITESPACE"," ",535],["T_VARIABLE","$this",535],["T_OBJECT_OPERATOR","->",535],["T_STRING","getCustomerVatClass",535],"(",["T_VARIABLE","$customerCountryCode",535],",",["T_WHITESPACE"," ",535],["T_VARIABLE","$vatValidationResult",535],",",["T_WHITESPACE"," ",535],["T_VARIABLE","$store",535],")",";",["T_WHITESPACE","\n\n        ",535],["T_VARIABLE","$vatClassToGroupXmlPathMap",537],["T_WHITESPACE"," ",537],"=",["T_WHITESPACE"," ",537],["T_ARRAY","array",537],"(",["T_WHITESPACE","\n            ",537],["T_STRING","self",538],["T_DOUBLE_COLON","::",538],["T_STRING","VAT_CLASS_DOMESTIC",538],["T_WHITESPACE"," ",538],["T_DOUBLE_ARROW","=>",538],["T_WHITESPACE"," ",538],["T_STRING","self",538],["T_DOUBLE_COLON","::",538],["T_STRING","XML_PATH_CUSTOMER_VIV_DOMESTIC_GROUP",538],",",["T_WHITESPACE","\n            ",538],["T_STRING","self",539],["T_DOUBLE_COLON","::",539],["T_STRING","VAT_CLASS_INTRA_UNION",539],["T_WHITESPACE"," ",539],["T_DOUBLE_ARROW","=>",539],["T_WHITESPACE"," ",539],["T_STRING","self",539],["T_DOUBLE_COLON","::",539],["T_STRING","XML_PATH_CUSTOMER_VIV_INTRA_UNION_GROUP",539],",",["T_WHITESPACE","\n            ",539],["T_STRING","self",540],["T_DOUBLE_COLON","::",540],["T_STRING","VAT_CLASS_INVALID",540],["T_WHITESPACE"," ",540],["T_DOUBLE_ARROW","=>",540],["T_WHITESPACE"," ",540],["T_STRING","self",540],["T_DOUBLE_COLON","::",540],["T_STRING","XML_PATH_CUSTOMER_VIV_INVALID_GROUP",540],",",["T_WHITESPACE","\n            ",540],["T_STRING","self",541],["T_DOUBLE_COLON","::",541],["T_STRING","VAT_CLASS_ERROR",541],["T_WHITESPACE"," ",541],["T_DOUBLE_ARROW","=>",541],["T_WHITESPACE"," ",541],["T_STRING","self",541],["T_DOUBLE_COLON","::",541],["T_STRING","XML_PATH_CUSTOMER_VIV_ERROR_GROUP",541],["T_WHITESPACE","\n        ",541],")",";",["T_WHITESPACE","\n\n        ",542],["T_IF","if",544],["T_WHITESPACE"," ",544],"(",["T_ISSET","isset",544],"(",["T_VARIABLE","$vatClassToGroupXmlPathMap",544],"[",["T_VARIABLE","$vatClass",544],"]",")",")",["T_WHITESPACE"," ",544],"{",["T_WHITESPACE","\n            ",544],["T_VARIABLE","$groupId",545],["T_WHITESPACE"," ",545],"=",["T_WHITESPACE"," ",545],["T_INT_CAST","(int)",545],["T_STRING","Mage",545],["T_DOUBLE_COLON","::",545],["T_STRING","getStoreConfig",545],"(",["T_VARIABLE","$vatClassToGroupXmlPathMap",545],"[",["T_VARIABLE","$vatClass",545],"]",",",["T_WHITESPACE"," ",545],["T_VARIABLE","$store",545],")",";",["T_WHITESPACE","\n        ",545],"}",["T_WHITESPACE","\n\n        ",546],["T_RETURN","return",548],["T_WHITESPACE"," ",548],["T_VARIABLE","$groupId",548],";",["T_WHITESPACE","\n    ",548],"}",["T_WHITESPACE","\n\n    ",549],["T_DOC_COMMENT","\/**\n     * Send request to VAT validation service and return validation result\n     *\n     * @param string $countryCode\n     * @param string $vatNumber\n     * @param string $requesterCountryCode\n     * @param string $requesterVatNumber\n     *\n     * @return Varien_Object\n     *\/",551],["T_WHITESPACE","\n    ",560],["T_PUBLIC","public",561],["T_WHITESPACE"," ",561],["T_FUNCTION","function",561],["T_WHITESPACE"," ",561],["T_STRING","checkVatNumber",561],"(",["T_VARIABLE","$countryCode",561],",",["T_WHITESPACE"," ",561],["T_VARIABLE","$vatNumber",561],",",["T_WHITESPACE"," ",561],["T_VARIABLE","$requesterCountryCode",561],["T_WHITESPACE"," ",561],"=",["T_WHITESPACE"," ",561],["T_CONSTANT_ENCAPSED_STRING","''",561],",",["T_WHITESPACE"," ",561],["T_VARIABLE","$requesterVatNumber",561],["T_WHITESPACE"," ",561],"=",["T_WHITESPACE"," ",561],["T_CONSTANT_ENCAPSED_STRING","''",561],")",["T_WHITESPACE","\n    ",561],"{",["T_WHITESPACE","\n        ",562],["T_COMMENT","\/\/ Default response\n",563],["T_WHITESPACE","        ",564],["T_VARIABLE","$gatewayResponse",564],["T_WHITESPACE"," ",564],"=",["T_WHITESPACE"," ",564],["T_NEW","new",564],["T_WHITESPACE"," ",564],["T_STRING","Varien_Object",564],"(",["T_ARRAY","array",564],"(",["T_WHITESPACE","\n            ",564],["T_CONSTANT_ENCAPSED_STRING","'is_valid'",565],["T_WHITESPACE"," ",565],["T_DOUBLE_ARROW","=>",565],["T_WHITESPACE"," ",565],["T_STRING","false",565],",",["T_WHITESPACE","\n            ",565],["T_CONSTANT_ENCAPSED_STRING","'request_date'",566],["T_WHITESPACE"," ",566],["T_DOUBLE_ARROW","=>",566],["T_WHITESPACE"," ",566],["T_CONSTANT_ENCAPSED_STRING","''",566],",",["T_WHITESPACE","\n            ",566],["T_CONSTANT_ENCAPSED_STRING","'request_identifier'",567],["T_WHITESPACE"," ",567],["T_DOUBLE_ARROW","=>",567],["T_WHITESPACE"," ",567],["T_CONSTANT_ENCAPSED_STRING","''",567],",",["T_WHITESPACE","\n            ",567],["T_CONSTANT_ENCAPSED_STRING","'request_success'",568],["T_WHITESPACE"," ",568],["T_DOUBLE_ARROW","=>",568],["T_WHITESPACE"," ",568],["T_STRING","false",568],["T_WHITESPACE","\n        ",568],")",")",";",["T_WHITESPACE","\n\n        ",569],["T_IF","if",571],["T_WHITESPACE"," ",571],"(","!",["T_STRING","extension_loaded",571],"(",["T_CONSTANT_ENCAPSED_STRING","'soap'",571],")",")",["T_WHITESPACE"," ",571],"{",["T_WHITESPACE","\n            ",571],["T_STRING","Mage",572],["T_DOUBLE_COLON","::",572],["T_STRING","logException",572],"(",["T_STRING","Mage",572],["T_DOUBLE_COLON","::",572],["T_STRING","exception",572],"(",["T_CONSTANT_ENCAPSED_STRING","'Mage_Core'",572],",",["T_WHITESPACE","\n                ",572],["T_STRING","Mage",573],["T_DOUBLE_COLON","::",573],["T_STRING","helper",573],"(",["T_CONSTANT_ENCAPSED_STRING","'core'",573],")",["T_OBJECT_OPERATOR","->",573],["T_STRING","__",573],"(",["T_CONSTANT_ENCAPSED_STRING","'PHP SOAP extension is required.'",573],")",")",")",";",["T_WHITESPACE","\n            ",573],["T_RETURN","return",574],["T_WHITESPACE"," ",574],["T_VARIABLE","$gatewayResponse",574],";",["T_WHITESPACE","\n        ",574],"}",["T_WHITESPACE","\n\n        ",575],["T_IF","if",577],["T_WHITESPACE"," ",577],"(","!",["T_VARIABLE","$this",577],["T_OBJECT_OPERATOR","->",577],["T_STRING","canCheckVatNumber",577],"(",["T_VARIABLE","$countryCode",577],",",["T_WHITESPACE"," ",577],["T_VARIABLE","$vatNumber",577],",",["T_WHITESPACE"," ",577],["T_VARIABLE","$requesterCountryCode",577],",",["T_WHITESPACE"," ",577],["T_VARIABLE","$requesterVatNumber",577],")",")",["T_WHITESPACE"," ",577],"{",["T_WHITESPACE","\n            ",577],["T_RETURN","return",578],["T_WHITESPACE"," ",578],["T_VARIABLE","$gatewayResponse",578],";",["T_WHITESPACE","\n        ",578],"}",["T_WHITESPACE","\n\n        ",579],["T_TRY","try",581],["T_WHITESPACE"," ",581],"{",["T_WHITESPACE","\n            ",581],["T_VARIABLE","$soapClient",582],["T_WHITESPACE"," ",582],"=",["T_WHITESPACE"," ",582],["T_VARIABLE","$this",582],["T_OBJECT_OPERATOR","->",582],["T_STRING","_createVatNumberValidationSoapClient",582],"(",")",";",["T_WHITESPACE","\n\n            ",582],["T_VARIABLE","$requestParams",584],["T_WHITESPACE"," ",584],"=",["T_WHITESPACE"," ",584],["T_ARRAY","array",584],"(",")",";",["T_WHITESPACE","\n            ",584],["T_VARIABLE","$requestParams",585],"[",["T_CONSTANT_ENCAPSED_STRING","'countryCode'",585],"]",["T_WHITESPACE"," ",585],"=",["T_WHITESPACE"," ",585],["T_VARIABLE","$countryCode",585],";",["T_WHITESPACE","\n            ",585],["T_VARIABLE","$requestParams",586],"[",["T_CONSTANT_ENCAPSED_STRING","'vatNumber'",586],"]",["T_WHITESPACE"," ",586],"=",["T_WHITESPACE"," ",586],["T_STRING","str_replace",586],"(",["T_ARRAY","array",586],"(",["T_CONSTANT_ENCAPSED_STRING","' '",586],",",["T_WHITESPACE"," ",586],["T_CONSTANT_ENCAPSED_STRING","'-'",586],")",",",["T_WHITESPACE"," ",586],["T_ARRAY","array",586],"(",["T_CONSTANT_ENCAPSED_STRING","''",586],",",["T_WHITESPACE"," ",586],["T_CONSTANT_ENCAPSED_STRING","''",586],")",",",["T_WHITESPACE"," ",586],["T_VARIABLE","$vatNumber",586],")",";",["T_WHITESPACE","\n            ",586],["T_VARIABLE","$requestParams",587],"[",["T_CONSTANT_ENCAPSED_STRING","'requesterCountryCode'",587],"]",["T_WHITESPACE"," ",587],"=",["T_WHITESPACE"," ",587],["T_VARIABLE","$requesterCountryCode",587],";",["T_WHITESPACE","\n            ",587],["T_VARIABLE","$requestParams",588],"[",["T_CONSTANT_ENCAPSED_STRING","'requesterVatNumber'",588],"]",["T_WHITESPACE"," ",588],"=",["T_WHITESPACE"," ",588],["T_STRING","str_replace",588],"(",["T_ARRAY","array",588],"(",["T_CONSTANT_ENCAPSED_STRING","' '",588],",",["T_WHITESPACE"," ",588],["T_CONSTANT_ENCAPSED_STRING","'-'",588],")",",",["T_WHITESPACE"," ",588],["T_ARRAY","array",588],"(",["T_CONSTANT_ENCAPSED_STRING","''",588],",",["T_WHITESPACE"," ",588],["T_CONSTANT_ENCAPSED_STRING","''",588],")",",",["T_WHITESPACE"," ",588],["T_VARIABLE","$requesterVatNumber",588],")",";",["T_WHITESPACE","\n\n            ",588],["T_COMMENT","\/\/ Send request to service\n",590],["T_WHITESPACE","            ",591],["T_VARIABLE","$result",591],["T_WHITESPACE"," ",591],"=",["T_WHITESPACE"," ",591],["T_VARIABLE","$soapClient",591],["T_OBJECT_OPERATOR","->",591],["T_STRING","checkVatApprox",591],"(",["T_VARIABLE","$requestParams",591],")",";",["T_WHITESPACE","\n\n            ",591],["T_VARIABLE","$gatewayResponse",593],["T_OBJECT_OPERATOR","->",593],["T_STRING","setIsValid",593],"(",["T_BOOL_CAST","(boolean)",593],["T_WHITESPACE"," ",593],["T_VARIABLE","$result",593],["T_OBJECT_OPERATOR","->",593],["T_STRING","valid",593],")",";",["T_WHITESPACE","\n            ",593],["T_VARIABLE","$gatewayResponse",594],["T_OBJECT_OPERATOR","->",594],["T_STRING","setRequestDate",594],"(",["T_STRING_CAST","(string)",594],["T_WHITESPACE"," ",594],["T_VARIABLE","$result",594],["T_OBJECT_OPERATOR","->",594],["T_STRING","requestDate",594],")",";",["T_WHITESPACE","\n            ",594],["T_VARIABLE","$gatewayResponse",595],["T_OBJECT_OPERATOR","->",595],["T_STRING","setRequestIdentifier",595],"(",["T_STRING_CAST","(string)",595],["T_WHITESPACE"," ",595],["T_VARIABLE","$result",595],["T_OBJECT_OPERATOR","->",595],["T_STRING","requestIdentifier",595],")",";",["T_WHITESPACE","\n            ",595],["T_VARIABLE","$gatewayResponse",596],["T_OBJECT_OPERATOR","->",596],["T_STRING","setRequestSuccess",596],"(",["T_STRING","true",596],")",";",["T_WHITESPACE","\n        ",596],"}",["T_WHITESPACE"," ",597],["T_CATCH","catch",597],["T_WHITESPACE"," ",597],"(",["T_STRING","Exception",597],["T_WHITESPACE"," ",597],["T_VARIABLE","$exception",597],")",["T_WHITESPACE"," ",597],"{",["T_WHITESPACE","\n            ",597],["T_VARIABLE","$gatewayResponse",598],["T_OBJECT_OPERATOR","->",598],["T_STRING","setIsValid",598],"(",["T_STRING","false",598],")",";",["T_WHITESPACE","\n            ",598],["T_VARIABLE","$gatewayResponse",599],["T_OBJECT_OPERATOR","->",599],["T_STRING","setRequestDate",599],"(",["T_CONSTANT_ENCAPSED_STRING","''",599],")",";",["T_WHITESPACE","\n            ",599],["T_VARIABLE","$gatewayResponse",600],["T_OBJECT_OPERATOR","->",600],["T_STRING","setRequestIdentifier",600],"(",["T_CONSTANT_ENCAPSED_STRING","''",600],")",";",["T_WHITESPACE","\n        ",600],"}",["T_WHITESPACE","\n\n        ",601],["T_RETURN","return",603],["T_WHITESPACE"," ",603],["T_VARIABLE","$gatewayResponse",603],";",["T_WHITESPACE","\n    ",603],"}",["T_WHITESPACE","\n\n    ",604],["T_DOC_COMMENT","\/**\n     * Check if parameters are valid to send to VAT validation service\n     *\n     * @param string $countryCode\n     * @param string $vatNumber\n     * @param string $requesterCountryCode\n     * @param string $requesterVatNumber\n     *\n     * @return boolean\n     *\/",606],["T_WHITESPACE","\n    ",615],["T_PUBLIC","public",616],["T_WHITESPACE"," ",616],["T_FUNCTION","function",616],["T_WHITESPACE"," ",616],["T_STRING","canCheckVatNumber",616],"(",["T_VARIABLE","$countryCode",616],",",["T_WHITESPACE"," ",616],["T_VARIABLE","$vatNumber",616],",",["T_WHITESPACE"," ",616],["T_VARIABLE","$requesterCountryCode",616],",",["T_WHITESPACE"," ",616],["T_VARIABLE","$requesterVatNumber",616],")",["T_WHITESPACE","\n    ",616],"{",["T_WHITESPACE","\n        ",617],["T_VARIABLE","$result",618],["T_WHITESPACE"," ",618],"=",["T_WHITESPACE"," ",618],["T_STRING","true",618],";",["T_WHITESPACE","\n        ",618],["T_DOC_COMMENT","\/** @var $coreHelper Mage_Core_Helper_Data *\/",619],["T_WHITESPACE","\n        ",619],["T_VARIABLE","$coreHelper",620],["T_WHITESPACE"," ",620],"=",["T_WHITESPACE"," ",620],["T_STRING","Mage",620],["T_DOUBLE_COLON","::",620],["T_STRING","helper",620],"(",["T_CONSTANT_ENCAPSED_STRING","'core'",620],")",";",["T_WHITESPACE","\n\n        ",620],["T_IF","if",622],["T_WHITESPACE"," ",622],"(","!",["T_STRING","is_string",622],"(",["T_VARIABLE","$countryCode",622],")",["T_WHITESPACE","\n            ",622],["T_BOOLEAN_OR","||",623],["T_WHITESPACE"," ",623],"!",["T_STRING","is_string",623],"(",["T_VARIABLE","$vatNumber",623],")",["T_WHITESPACE","\n            ",623],["T_BOOLEAN_OR","||",624],["T_WHITESPACE"," ",624],"!",["T_STRING","is_string",624],"(",["T_VARIABLE","$requesterCountryCode",624],")",["T_WHITESPACE","\n            ",624],["T_BOOLEAN_OR","||",625],["T_WHITESPACE"," ",625],"!",["T_STRING","is_string",625],"(",["T_VARIABLE","$requesterVatNumber",625],")",["T_WHITESPACE","\n            ",625],["T_BOOLEAN_OR","||",626],["T_WHITESPACE"," ",626],["T_EMPTY","empty",626],"(",["T_VARIABLE","$countryCode",626],")",["T_WHITESPACE","\n            ",626],["T_BOOLEAN_OR","||",627],["T_WHITESPACE"," ",627],"!",["T_VARIABLE","$coreHelper",627],["T_OBJECT_OPERATOR","->",627],["T_STRING","isCountryInEU",627],"(",["T_VARIABLE","$countryCode",627],")",["T_WHITESPACE","\n            ",627],["T_BOOLEAN_OR","||",628],["T_WHITESPACE"," ",628],["T_EMPTY","empty",628],"(",["T_VARIABLE","$vatNumber",628],")",["T_WHITESPACE","\n            ",628],["T_BOOLEAN_OR","||",629],["T_WHITESPACE"," ",629],"(",["T_EMPTY","empty",629],"(",["T_VARIABLE","$requesterCountryCode",629],")",["T_WHITESPACE"," ",629],["T_BOOLEAN_AND","&&",629],["T_WHITESPACE"," ",629],"!",["T_EMPTY","empty",629],"(",["T_VARIABLE","$requesterVatNumber",629],")",")",["T_WHITESPACE","\n            ",629],["T_BOOLEAN_OR","||",630],["T_WHITESPACE"," ",630],"(","!",["T_EMPTY","empty",630],"(",["T_VARIABLE","$requesterCountryCode",630],")",["T_WHITESPACE"," ",630],["T_BOOLEAN_AND","&&",630],["T_WHITESPACE"," ",630],["T_EMPTY","empty",630],"(",["T_VARIABLE","$requesterVatNumber",630],")",")",["T_WHITESPACE","\n            ",630],["T_BOOLEAN_OR","||",631],["T_WHITESPACE"," ",631],"(","!",["T_EMPTY","empty",631],"(",["T_VARIABLE","$requesterCountryCode",631],")",["T_WHITESPACE"," ",631],["T_BOOLEAN_AND","&&",631],["T_WHITESPACE"," ",631],"!",["T_VARIABLE","$coreHelper",631],["T_OBJECT_OPERATOR","->",631],["T_STRING","isCountryInEU",631],"(",["T_VARIABLE","$requesterCountryCode",631],")",")",["T_WHITESPACE","\n        ",631],")",["T_WHITESPACE"," ",632],"{",["T_WHITESPACE","\n            ",632],["T_VARIABLE","$result",633],["T_WHITESPACE"," ",633],"=",["T_WHITESPACE"," ",633],["T_STRING","false",633],";",["T_WHITESPACE","\n        ",633],"}",["T_WHITESPACE","\n\n        ",634],["T_RETURN","return",636],["T_WHITESPACE"," ",636],["T_VARIABLE","$result",636],";",["T_WHITESPACE","\n    ",636],"}",["T_WHITESPACE","\n\n    ",637],["T_DOC_COMMENT","\/**\n     * Get VAT class\n     *\n     * @param string $customerCountryCode\n     * @param Varien_Object $vatValidationResult\n     * @param Mage_Core_Model_Store|string|int|null $store\n     * @return null|string\n     *\/",639],["T_WHITESPACE","\n    ",646],["T_PUBLIC","public",647],["T_WHITESPACE"," ",647],["T_FUNCTION","function",647],["T_WHITESPACE"," ",647],["T_STRING","getCustomerVatClass",647],"(",["T_VARIABLE","$customerCountryCode",647],",",["T_WHITESPACE"," ",647],["T_VARIABLE","$vatValidationResult",647],",",["T_WHITESPACE"," ",647],["T_VARIABLE","$store",647],["T_WHITESPACE"," ",647],"=",["T_WHITESPACE"," ",647],["T_STRING","null",647],")",["T_WHITESPACE","\n    ",647],"{",["T_WHITESPACE","\n        ",648],["T_VARIABLE","$vatClass",649],["T_WHITESPACE"," ",649],"=",["T_WHITESPACE"," ",649],["T_STRING","null",649],";",["T_WHITESPACE","\n\n        ",649],["T_VARIABLE","$isVatNumberValid",651],["T_WHITESPACE"," ",651],"=",["T_WHITESPACE"," ",651],["T_VARIABLE","$vatValidationResult",651],["T_OBJECT_OPERATOR","->",651],["T_STRING","getIsValid",651],"(",")",";",["T_WHITESPACE","\n\n        ",651],["T_IF","if",653],["T_WHITESPACE"," ",653],"(",["T_STRING","is_string",653],"(",["T_VARIABLE","$customerCountryCode",653],")",["T_WHITESPACE","\n            ",653],["T_BOOLEAN_AND","&&",654],["T_WHITESPACE"," ",654],"!",["T_EMPTY","empty",654],"(",["T_VARIABLE","$customerCountryCode",654],")",["T_WHITESPACE","\n            ",654],["T_BOOLEAN_AND","&&",655],["T_WHITESPACE"," ",655],["T_VARIABLE","$customerCountryCode",655],["T_WHITESPACE"," ",655],["T_IS_IDENTICAL","===",655],["T_WHITESPACE"," ",655],["T_STRING","Mage",655],["T_DOUBLE_COLON","::",655],["T_STRING","helper",655],"(",["T_CONSTANT_ENCAPSED_STRING","'core'",655],")",["T_OBJECT_OPERATOR","->",655],["T_STRING","getMerchantCountryCode",655],"(",["T_VARIABLE","$store",655],")",["T_WHITESPACE","\n            ",655],["T_BOOLEAN_AND","&&",656],["T_WHITESPACE"," ",656],["T_VARIABLE","$isVatNumberValid",656],["T_WHITESPACE","\n        ",656],")",["T_WHITESPACE"," ",657],"{",["T_WHITESPACE","\n            ",657],["T_VARIABLE","$vatClass",658],["T_WHITESPACE"," ",658],"=",["T_WHITESPACE"," ",658],["T_STRING","self",658],["T_DOUBLE_COLON","::",658],["T_STRING","VAT_CLASS_DOMESTIC",658],";",["T_WHITESPACE","\n        ",658],"}",["T_WHITESPACE"," ",659],["T_ELSEIF","elseif",659],["T_WHITESPACE"," ",659],"(",["T_VARIABLE","$isVatNumberValid",659],")",["T_WHITESPACE"," ",659],"{",["T_WHITESPACE","\n            ",659],["T_VARIABLE","$vatClass",660],["T_WHITESPACE"," ",660],"=",["T_WHITESPACE"," ",660],["T_STRING","self",660],["T_DOUBLE_COLON","::",660],["T_STRING","VAT_CLASS_INTRA_UNION",660],";",["T_WHITESPACE","\n        ",660],"}",["T_WHITESPACE"," ",661],["T_ELSE","else",661],["T_WHITESPACE"," ",661],"{",["T_WHITESPACE","\n            ",661],["T_VARIABLE","$vatClass",662],["T_WHITESPACE"," ",662],"=",["T_WHITESPACE"," ",662],["T_STRING","self",662],["T_DOUBLE_COLON","::",662],["T_STRING","VAT_CLASS_INVALID",662],";",["T_WHITESPACE","\n        ",662],"}",["T_WHITESPACE","\n\n        ",663],["T_IF","if",665],["T_WHITESPACE"," ",665],"(","!",["T_VARIABLE","$vatValidationResult",665],["T_OBJECT_OPERATOR","->",665],["T_STRING","getRequestSuccess",665],"(",")",")",["T_WHITESPACE"," ",665],"{",["T_WHITESPACE","\n            ",665],["T_VARIABLE","$vatClass",666],["T_WHITESPACE"," ",666],"=",["T_WHITESPACE"," ",666],["T_STRING","self",666],["T_DOUBLE_COLON","::",666],["T_STRING","VAT_CLASS_ERROR",666],";",["T_WHITESPACE","\n        ",666],"}",["T_WHITESPACE","\n\n        ",667],["T_RETURN","return",669],["T_WHITESPACE"," ",669],["T_VARIABLE","$vatClass",669],";",["T_WHITESPACE","\n    ",669],"}",["T_WHITESPACE","\n\n    ",670],["T_DOC_COMMENT","\/**\n     * Get validation message that will be displayed to user by VAT validation result object\n     *\n     * @param Mage_Customer_Model_Address $customerAddress\n     * @param bool $customerGroupAutoAssignDisabled\n     * @param Varien_Object $validationResult\n     * @return Varien_Object\n     *\/",672],["T_WHITESPACE","\n    ",679],["T_PUBLIC","public",680],["T_WHITESPACE"," ",680],["T_FUNCTION","function",680],["T_WHITESPACE"," ",680],["T_STRING","getVatValidationUserMessage",680],"(",["T_VARIABLE","$customerAddress",680],",",["T_WHITESPACE"," ",680],["T_VARIABLE","$customerGroupAutoAssignDisabled",680],",",["T_WHITESPACE"," ",680],["T_VARIABLE","$validationResult",680],")",["T_WHITESPACE","\n    ",680],"{",["T_WHITESPACE","\n        ",681],["T_VARIABLE","$message",682],["T_WHITESPACE"," ",682],"=",["T_WHITESPACE"," ",682],["T_CONSTANT_ENCAPSED_STRING","''",682],";",["T_WHITESPACE","\n        ",682],["T_VARIABLE","$isError",683],["T_WHITESPACE"," ",683],"=",["T_WHITESPACE"," ",683],["T_STRING","true",683],";",["T_WHITESPACE","\n        ",683],["T_VARIABLE","$customerVatClass",684],["T_WHITESPACE"," ",684],"=",["T_WHITESPACE"," ",684],["T_VARIABLE","$this",684],["T_OBJECT_OPERATOR","->",684],["T_STRING","getCustomerVatClass",684],"(",["T_VARIABLE","$customerAddress",684],["T_OBJECT_OPERATOR","->",684],["T_STRING","getCountryId",684],"(",")",",",["T_WHITESPACE"," ",684],["T_VARIABLE","$validationResult",684],")",";",["T_WHITESPACE","\n        ",684],["T_VARIABLE","$groupAutoAssignDisabled",685],["T_WHITESPACE"," ",685],"=",["T_WHITESPACE"," ",685],["T_STRING","Mage",685],["T_DOUBLE_COLON","::",685],["T_STRING","getStoreConfigFlag",685],"(",["T_STRING","self",685],["T_DOUBLE_COLON","::",685],["T_STRING","XML_PATH_CUSTOMER_VIV_GROUP_AUTO_ASSIGN",685],")",";",["T_WHITESPACE","\n\n        ",685],["T_VARIABLE","$willChargeTaxMessage",687],["T_WHITESPACE","    ",687],"=",["T_WHITESPACE"," ",687],["T_VARIABLE","$this",687],["T_OBJECT_OPERATOR","->",687],["T_STRING","__",687],"(",["T_CONSTANT_ENCAPSED_STRING","'You will be charged tax.'",687],")",";",["T_WHITESPACE","\n        ",687],["T_VARIABLE","$willNotChargeTaxMessage",688],["T_WHITESPACE"," ",688],"=",["T_WHITESPACE"," ",688],["T_VARIABLE","$this",688],["T_OBJECT_OPERATOR","->",688],["T_STRING","__",688],"(",["T_CONSTANT_ENCAPSED_STRING","'You will not be charged tax.'",688],")",";",["T_WHITESPACE","\n\n        ",688],["T_IF","if",690],["T_WHITESPACE"," ",690],"(",["T_VARIABLE","$validationResult",690],["T_OBJECT_OPERATOR","->",690],["T_STRING","getIsValid",690],"(",")",")",["T_WHITESPACE"," ",690],"{",["T_WHITESPACE","\n            ",690],["T_VARIABLE","$message",691],["T_WHITESPACE"," ",691],"=",["T_WHITESPACE"," ",691],["T_VARIABLE","$this",691],["T_OBJECT_OPERATOR","->",691],["T_STRING","__",691],"(",["T_CONSTANT_ENCAPSED_STRING","'Your VAT ID was successfully validated.'",691],")",";",["T_WHITESPACE","\n            ",691],["T_VARIABLE","$isError",692],["T_WHITESPACE"," ",692],"=",["T_WHITESPACE"," ",692],["T_STRING","false",692],";",["T_WHITESPACE","\n\n            ",692],["T_IF","if",694],["T_WHITESPACE"," ",694],"(","!",["T_VARIABLE","$groupAutoAssignDisabled",694],["T_WHITESPACE"," ",694],["T_BOOLEAN_AND","&&",694],["T_WHITESPACE"," ",694],"!",["T_VARIABLE","$customerGroupAutoAssignDisabled",694],")",["T_WHITESPACE"," ",694],"{",["T_WHITESPACE","\n                ",694],["T_VARIABLE","$message",695],["T_WHITESPACE"," ",695],["T_CONCAT_EQUAL",".=",695],["T_WHITESPACE"," ",695],["T_CONSTANT_ENCAPSED_STRING","' '",695],["T_WHITESPACE"," ",695],".",["T_WHITESPACE"," ",695],"(",["T_VARIABLE","$customerVatClass",695],["T_WHITESPACE"," ",695],["T_IS_EQUAL","==",695],["T_WHITESPACE"," ",695],["T_STRING","self",695],["T_DOUBLE_COLON","::",695],["T_STRING","VAT_CLASS_DOMESTIC",695],["T_WHITESPACE","\n                    ",695],"?",["T_WHITESPACE"," ",696],["T_VARIABLE","$willChargeTaxMessage",696],["T_WHITESPACE","\n                    ",696],":",["T_WHITESPACE"," ",697],["T_VARIABLE","$willNotChargeTaxMessage",697],")",";",["T_WHITESPACE","\n            ",697],"}",["T_WHITESPACE","\n        ",698],"}",["T_WHITESPACE"," ",699],["T_ELSE","else",699],["T_WHITESPACE"," ",699],["T_IF","if",699],["T_WHITESPACE"," ",699],"(",["T_VARIABLE","$validationResult",699],["T_OBJECT_OPERATOR","->",699],["T_STRING","getRequestSuccess",699],"(",")",")",["T_WHITESPACE"," ",699],"{",["T_WHITESPACE","\n            ",699],["T_VARIABLE","$message",700],["T_WHITESPACE"," ",700],"=",["T_WHITESPACE"," ",700],["T_STRING","sprintf",700],"(",["T_WHITESPACE","\n                ",700],["T_VARIABLE","$this",701],["T_OBJECT_OPERATOR","->",701],["T_STRING","__",701],"(",["T_CONSTANT_ENCAPSED_STRING","'The VAT ID entered (%s) is not a valid VAT ID.'",701],")",["T_WHITESPACE"," ",701],".",["T_WHITESPACE"," ",701],["T_CONSTANT_ENCAPSED_STRING","' '",701],",",["T_WHITESPACE","\n                ",701],["T_VARIABLE","$this",702],["T_OBJECT_OPERATOR","->",702],["T_STRING","escapeHtml",702],"(",["T_VARIABLE","$customerAddress",702],["T_OBJECT_OPERATOR","->",702],["T_STRING","getVatId",702],"(",")",")",["T_WHITESPACE","\n            ",702],")",";",["T_WHITESPACE","\n            ",703],["T_IF","if",704],["T_WHITESPACE"," ",704],"(","!",["T_VARIABLE","$groupAutoAssignDisabled",704],["T_WHITESPACE"," ",704],["T_BOOLEAN_AND","&&",704],["T_WHITESPACE"," ",704],"!",["T_VARIABLE","$customerGroupAutoAssignDisabled",704],")",["T_WHITESPACE"," ",704],"{",["T_WHITESPACE","\n                ",704],["T_VARIABLE","$message",705],["T_WHITESPACE"," ",705],["T_CONCAT_EQUAL",".=",705],["T_WHITESPACE"," ",705],["T_VARIABLE","$willChargeTaxMessage",705],";",["T_WHITESPACE","\n            ",705],"}",["T_WHITESPACE","\n        ",706],"}",["T_WHITESPACE","\n        ",707],["T_ELSE","else",708],["T_WHITESPACE"," ",708],"{",["T_WHITESPACE","\n            ",708],["T_VARIABLE","$contactUsMessage",709],["T_WHITESPACE"," ",709],"=",["T_WHITESPACE"," ",709],["T_STRING","sprintf",709],"(",["T_VARIABLE","$this",709],["T_OBJECT_OPERATOR","->",709],["T_STRING","__",709],"(",["T_CONSTANT_ENCAPSED_STRING","'If you believe this is an error, please contact us at %s'",709],")",",",["T_WHITESPACE","\n                ",709],["T_STRING","Mage",710],["T_DOUBLE_COLON","::",710],["T_STRING","getStoreConfig",710],"(",["T_STRING","self",710],["T_DOUBLE_COLON","::",710],["T_STRING","XML_PATH_SUPPORT_EMAIL",710],")",")",";",["T_WHITESPACE","\n\n            ",710],["T_VARIABLE","$message",712],["T_WHITESPACE"," ",712],"=",["T_WHITESPACE"," ",712],["T_VARIABLE","$this",712],["T_OBJECT_OPERATOR","->",712],["T_STRING","__",712],"(",["T_CONSTANT_ENCAPSED_STRING","'Your Tax ID cannot be validated.'",712],")",["T_WHITESPACE"," ",712],".",["T_WHITESPACE"," ",712],["T_CONSTANT_ENCAPSED_STRING","' '",712],["T_WHITESPACE","\n                ",712],".",["T_WHITESPACE"," ",713],"(","!",["T_VARIABLE","$groupAutoAssignDisabled",713],["T_WHITESPACE"," ",713],["T_BOOLEAN_AND","&&",713],["T_WHITESPACE"," ",713],"!",["T_VARIABLE","$customerGroupAutoAssignDisabled",713],["T_WHITESPACE","\n                    ",713],"?",["T_WHITESPACE"," ",714],["T_VARIABLE","$willChargeTaxMessage",714],["T_WHITESPACE"," ",714],".",["T_WHITESPACE"," ",714],["T_CONSTANT_ENCAPSED_STRING","' '",714],["T_WHITESPACE"," ",714],":",["T_WHITESPACE"," ",714],["T_CONSTANT_ENCAPSED_STRING","''",714],")",["T_WHITESPACE","\n                ",714],".",["T_WHITESPACE"," ",715],["T_VARIABLE","$contactUsMessage",715],";",["T_WHITESPACE","\n        ",715],"}",["T_WHITESPACE","\n\n        ",716],["T_VARIABLE","$validationMessageEnvelope",718],["T_WHITESPACE"," ",718],"=",["T_WHITESPACE"," ",718],["T_NEW","new",718],["T_WHITESPACE"," ",718],["T_STRING","Varien_Object",718],"(",")",";",["T_WHITESPACE","\n        ",718],["T_VARIABLE","$validationMessageEnvelope",719],["T_OBJECT_OPERATOR","->",719],["T_STRING","setMessage",719],"(",["T_VARIABLE","$message",719],")",";",["T_WHITESPACE","\n        ",719],["T_VARIABLE","$validationMessageEnvelope",720],["T_OBJECT_OPERATOR","->",720],["T_STRING","setIsError",720],"(",["T_VARIABLE","$isError",720],")",";",["T_WHITESPACE","\n\n        ",720],["T_RETURN","return",722],["T_WHITESPACE"," ",722],["T_VARIABLE","$validationMessageEnvelope",722],";",["T_WHITESPACE","\n    ",722],"}",["T_WHITESPACE","\n\n    ",723],["T_DOC_COMMENT","\/**\n     * Create SOAP client based on VAT validation service WSDL\n     *\n     * @param boolean $trace\n     * @return SoapClient\n     *\/",725],["T_WHITESPACE","\n    ",730],["T_PROTECTED","protected",731],["T_WHITESPACE"," ",731],["T_FUNCTION","function",731],["T_WHITESPACE"," ",731],["T_STRING","_createVatNumberValidationSoapClient",731],"(",["T_VARIABLE","$trace",731],["T_WHITESPACE"," ",731],"=",["T_WHITESPACE"," ",731],["T_STRING","false",731],")",["T_WHITESPACE","\n    ",731],"{",["T_WHITESPACE","\n        ",732],["T_RETURN","return",733],["T_WHITESPACE"," ",733],["T_NEW","new",733],["T_WHITESPACE"," ",733],["T_STRING","SoapClient",733],"(",["T_STRING","self",733],["T_DOUBLE_COLON","::",733],["T_STRING","VAT_VALIDATION_WSDL_URL",733],",",["T_WHITESPACE"," ",733],["T_ARRAY","array",733],"(",["T_CONSTANT_ENCAPSED_STRING","'trace'",733],["T_WHITESPACE"," ",733],["T_DOUBLE_ARROW","=>",733],["T_WHITESPACE"," ",733],["T_VARIABLE","$trace",733],")",")",";",["T_WHITESPACE","\n    ",733],"}",["T_WHITESPACE","\n",734],"}",["T_WHITESPACE","\n",735]]
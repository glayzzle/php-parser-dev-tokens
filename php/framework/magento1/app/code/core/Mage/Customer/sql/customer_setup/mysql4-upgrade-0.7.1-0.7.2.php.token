[["T_OPEN_TAG","<?php\n",1],["T_DOC_COMMENT","\/**\n * Magento\n *\n * NOTICE OF LICENSE\n *\n * This source file is subject to the Open Software License (OSL 3.0)\n * that is bundled with this package in the file LICENSE.txt.\n * It is also available through the world-wide-web at this URL:\n * http:\/\/opensource.org\/licenses\/osl-3.0.php\n * If you did not receive a copy of the license and are unable to\n * obtain it through the world-wide-web, please send an email\n * to license@magento.com so we can send you a copy immediately.\n *\n * DISCLAIMER\n *\n * Do not edit or add to this file if you wish to upgrade Magento to newer\n * versions in the future. If you wish to customize Magento for your\n * needs please refer to http:\/\/www.magento.com for more information.\n *\n * @category    Mage\n * @package     Mage_Customer\n * @copyright  Copyright (c) 2006-2016 X.commerce, Inc. and affiliates (http:\/\/www.magento.com)\n * @license    http:\/\/opensource.org\/licenses\/osl-3.0.php  Open Software License (OSL 3.0)\n *\/",2],["T_WHITESPACE","\n\n",25],["T_DOC_COMMENT","\/**\n * FOREIGN KEY update\n *\n * @category   Mage\n * @package    Mage_Customer\n * @author      Magento Core Team <core@magentocommerce.com>\n *\/",27],["T_WHITESPACE","\n\n",33],["T_VARIABLE","$installer",35],["T_WHITESPACE"," ",35],"=",["T_WHITESPACE"," ",35],["T_VARIABLE","$this",35],";",["T_WHITESPACE","\n",35],["T_COMMENT","\/* @var $installer Mage_Core_Model_Resource_Setup *\/",36],["T_WHITESPACE","\n\n",36],["T_VARIABLE","$installer",38],["T_OBJECT_OPERATOR","->",38],["T_STRING","startSetup",38],"(",")",";",["T_WHITESPACE","\n\n",38],["T_VARIABLE","$this",40],["T_OBJECT_OPERATOR","->",40],["T_STRING","getConnection",40],"(",")",["T_OBJECT_OPERATOR","->",40],["T_STRING","dropColumn",40],"(",["T_VARIABLE","$this",40],["T_OBJECT_OPERATOR","->",40],["T_STRING","getTable",40],"(",["T_CONSTANT_ENCAPSED_STRING","'customer_address_entity'",40],")",",",["T_WHITESPACE"," ",40],["T_CONSTANT_ENCAPSED_STRING","'store_id'",40],")",";",["T_WHITESPACE","\n\n",40],["T_VARIABLE","$installer",42],["T_OBJECT_OPERATOR","->",42],["T_STRING","run",42],"(","\"",["T_ENCAPSED_AND_WHITESPACE","\nALTER TABLE ",42],["T_CURLY_OPEN","{",43],["T_VARIABLE","$this",43],["T_OBJECT_OPERATOR","->",43],["T_STRING","getTable",43],"(",["T_CONSTANT_ENCAPSED_STRING","'customer_entity'",43],")","}",["T_ENCAPSED_AND_WHITESPACE","\n    DROP INDEX `FK_CUSTOMER_ENTITY_STORE`;\nALTER TABLE ",43],["T_CURLY_OPEN","{",45],["T_VARIABLE","$this",45],["T_OBJECT_OPERATOR","->",45],["T_STRING","getTable",45],"(",["T_CONSTANT_ENCAPSED_STRING","'customer_entity'",45],")","}",["T_ENCAPSED_AND_WHITESPACE","\n    CHANGE `store_id` `store_id` smallint(5) unsigned NULL DEFAULT '0';\nALTER TABLE ",45],["T_CURLY_OPEN","{",47],["T_VARIABLE","$this",47],["T_OBJECT_OPERATOR","->",47],["T_STRING","getTable",47],"(",["T_CONSTANT_ENCAPSED_STRING","'customer_entity'",47],")","}",["T_ENCAPSED_AND_WHITESPACE","\n    ADD CONSTRAINT `FK_CUSTOMER_ENTITY_STORE` FOREIGN KEY (`store_id`)\n    REFERENCES ",47],["T_CURLY_OPEN","{",49],["T_VARIABLE","$this",49],["T_OBJECT_OPERATOR","->",49],["T_STRING","getTable",49],"(",["T_CONSTANT_ENCAPSED_STRING","'core_store'",49],")","}",["T_ENCAPSED_AND_WHITESPACE"," (`store_id`)\n        ON UPDATE CASCADE\n        ON DELETE SET NULL;\n",49],"\"",")",";",["T_WHITESPACE","\n",52],["T_VARIABLE","$installer",53],["T_OBJECT_OPERATOR","->",53],["T_STRING","run",53],"(","\"",["T_ENCAPSED_AND_WHITESPACE","\nALTER TABLE ",53],["T_CURLY_OPEN","{",54],["T_VARIABLE","$this",54],["T_OBJECT_OPERATOR","->",54],["T_STRING","getTable",54],"(",["T_CONSTANT_ENCAPSED_STRING","'customer_entity'",54],")","}",["T_ENCAPSED_AND_WHITESPACE","\n    DROP INDEX `FK_CUSTOMER_ENTITY_ENTITY_TYPE`,\n    ADD INDEX `IDX_ENTITY_TYPE` (`entity_type_id`);\n",54],"\"",")",";",["T_WHITESPACE","\n",57],["T_VARIABLE","$installer",58],["T_OBJECT_OPERATOR","->",58],["T_STRING","run",58],"(","\"",["T_ENCAPSED_AND_WHITESPACE","\nALTER TABLE ",58],["T_CURLY_OPEN","{",59],["T_VARIABLE","$this",59],["T_OBJECT_OPERATOR","->",59],["T_STRING","getTable",59],"(",["T_CONSTANT_ENCAPSED_STRING","'customer_entity'",59],")","}",["T_ENCAPSED_AND_WHITESPACE","\n    DROP INDEX `FK_CUSTOMER_ENTITY_PARENT_ENTITY`,\n    ADD INDEX `IDX_PARENT_ENTITY` (`parent_id`);\n",59],"\"",")",";",["T_WHITESPACE","\n\n",62],["T_VARIABLE","$this",64],["T_OBJECT_OPERATOR","->",64],["T_STRING","getConnection",64],"(",")",["T_OBJECT_OPERATOR","->",64],["T_STRING","dropColumn",64],"(",["T_VARIABLE","$this",64],["T_OBJECT_OPERATOR","->",64],["T_STRING","getTable",64],"(",["T_CONSTANT_ENCAPSED_STRING","'customer_entity_varchar'",64],")",",",["T_WHITESPACE"," ",64],["T_CONSTANT_ENCAPSED_STRING","'store_id'",64],")",";",["T_WHITESPACE","\n",64],["T_VARIABLE","$this",65],["T_OBJECT_OPERATOR","->",65],["T_STRING","getConnection",65],"(",")",["T_OBJECT_OPERATOR","->",65],["T_STRING","dropColumn",65],"(",["T_VARIABLE","$this",65],["T_OBJECT_OPERATOR","->",65],["T_STRING","getTable",65],"(",["T_CONSTANT_ENCAPSED_STRING","'customer_entity_text'",65],")",",",["T_WHITESPACE"," ",65],["T_CONSTANT_ENCAPSED_STRING","'store_id'",65],")",";",["T_WHITESPACE","\n",65],["T_VARIABLE","$this",66],["T_OBJECT_OPERATOR","->",66],["T_STRING","getConnection",66],"(",")",["T_OBJECT_OPERATOR","->",66],["T_STRING","dropColumn",66],"(",["T_VARIABLE","$this",66],["T_OBJECT_OPERATOR","->",66],["T_STRING","getTable",66],"(",["T_CONSTANT_ENCAPSED_STRING","'customer_entity_int'",66],")",",",["T_WHITESPACE"," ",66],["T_CONSTANT_ENCAPSED_STRING","'store_id'",66],")",";",["T_WHITESPACE","\n",66],["T_VARIABLE","$this",67],["T_OBJECT_OPERATOR","->",67],["T_STRING","getConnection",67],"(",")",["T_OBJECT_OPERATOR","->",67],["T_STRING","dropColumn",67],"(",["T_VARIABLE","$this",67],["T_OBJECT_OPERATOR","->",67],["T_STRING","getTable",67],"(",["T_CONSTANT_ENCAPSED_STRING","'customer_entity_decimal'",67],")",",",["T_WHITESPACE"," ",67],["T_CONSTANT_ENCAPSED_STRING","'store_id'",67],")",";",["T_WHITESPACE","\n",67],["T_VARIABLE","$this",68],["T_OBJECT_OPERATOR","->",68],["T_STRING","getConnection",68],"(",")",["T_OBJECT_OPERATOR","->",68],["T_STRING","dropColumn",68],"(",["T_VARIABLE","$this",68],["T_OBJECT_OPERATOR","->",68],["T_STRING","getTable",68],"(",["T_CONSTANT_ENCAPSED_STRING","'customer_entity_datetime'",68],")",",",["T_WHITESPACE"," ",68],["T_CONSTANT_ENCAPSED_STRING","'store_id'",68],")",";",["T_WHITESPACE","\n\n",68],["T_VARIABLE","$this",70],["T_OBJECT_OPERATOR","->",70],["T_STRING","getConnection",70],"(",")",["T_OBJECT_OPERATOR","->",70],["T_STRING","dropColumn",70],"(",["T_VARIABLE","$this",70],["T_OBJECT_OPERATOR","->",70],["T_STRING","getTable",70],"(",["T_CONSTANT_ENCAPSED_STRING","'customer_address_entity_varchar'",70],")",",",["T_WHITESPACE"," ",70],["T_CONSTANT_ENCAPSED_STRING","'store_id'",70],")",";",["T_WHITESPACE","\n",70],["T_VARIABLE","$this",71],["T_OBJECT_OPERATOR","->",71],["T_STRING","getConnection",71],"(",")",["T_OBJECT_OPERATOR","->",71],["T_STRING","dropColumn",71],"(",["T_VARIABLE","$this",71],["T_OBJECT_OPERATOR","->",71],["T_STRING","getTable",71],"(",["T_CONSTANT_ENCAPSED_STRING","'customer_address_entity_text'",71],")",",",["T_WHITESPACE"," ",71],["T_CONSTANT_ENCAPSED_STRING","'store_id'",71],")",";",["T_WHITESPACE","\n",71],["T_VARIABLE","$this",72],["T_OBJECT_OPERATOR","->",72],["T_STRING","getConnection",72],"(",")",["T_OBJECT_OPERATOR","->",72],["T_STRING","dropColumn",72],"(",["T_VARIABLE","$this",72],["T_OBJECT_OPERATOR","->",72],["T_STRING","getTable",72],"(",["T_CONSTANT_ENCAPSED_STRING","'customer_address_entity_int'",72],")",",",["T_WHITESPACE"," ",72],["T_CONSTANT_ENCAPSED_STRING","'store_id'",72],")",";",["T_WHITESPACE","\n",72],["T_VARIABLE","$this",73],["T_OBJECT_OPERATOR","->",73],["T_STRING","getConnection",73],"(",")",["T_OBJECT_OPERATOR","->",73],["T_STRING","dropColumn",73],"(",["T_VARIABLE","$this",73],["T_OBJECT_OPERATOR","->",73],["T_STRING","getTable",73],"(",["T_CONSTANT_ENCAPSED_STRING","'customer_address_entity_decimal'",73],")",",",["T_WHITESPACE"," ",73],["T_CONSTANT_ENCAPSED_STRING","'store_id'",73],")",";",["T_WHITESPACE","\n",73],["T_VARIABLE","$this",74],["T_OBJECT_OPERATOR","->",74],["T_STRING","getConnection",74],"(",")",["T_OBJECT_OPERATOR","->",74],["T_STRING","dropColumn",74],"(",["T_VARIABLE","$this",74],["T_OBJECT_OPERATOR","->",74],["T_STRING","getTable",74],"(",["T_CONSTANT_ENCAPSED_STRING","'customer_address_entity_datetime'",74],")",",",["T_WHITESPACE"," ",74],["T_CONSTANT_ENCAPSED_STRING","'store_id'",74],")",";",["T_WHITESPACE","\n\n",74],["T_VARIABLE","$installer",76],["T_OBJECT_OPERATOR","->",76],["T_STRING","endSetup",76],"(",")",";",["T_WHITESPACE","\n",76]]
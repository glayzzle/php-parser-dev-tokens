[["T_OPEN_TAG","<?php\n",1],["T_DOC_COMMENT","\/**\n * Magento\n *\n * NOTICE OF LICENSE\n *\n * This source file is subject to the Open Software License (OSL 3.0)\n * that is bundled with this package in the file LICENSE.txt.\n * It is also available through the world-wide-web at this URL:\n * http:\/\/opensource.org\/licenses\/osl-3.0.php\n * If you did not receive a copy of the license and are unable to\n * obtain it through the world-wide-web, please send an email\n * to license@magento.com so we can send you a copy immediately.\n *\n * DISCLAIMER\n *\n * Do not edit or add to this file if you wish to upgrade Magento to newer\n * versions in the future. If you wish to customize Magento for your\n * needs please refer to http:\/\/www.magento.com for more information.\n *\n * @category    Mage\n * @package     Mage_Customer\n * @copyright  Copyright (c) 2006-2016 X.commerce, Inc. and affiliates (http:\/\/www.magento.com)\n * @license    http:\/\/opensource.org\/licenses\/osl-3.0.php  Open Software License (OSL 3.0)\n *\/",2],["T_WHITESPACE","\n\n\n",25],["T_DOC_COMMENT","\/**\n * Customer address controller\n *\n * @category   Mage\n * @package    Mage_Customer\n * @author      Magento Core Team <core@magentocommerce.com>\n *\/",28],["T_WHITESPACE","\n",34],["T_CLASS","class",35],["T_WHITESPACE"," ",35],["T_STRING","Mage_Customer_AddressController",35],["T_WHITESPACE"," ",35],["T_EXTENDS","extends",35],["T_WHITESPACE"," ",35],["T_STRING","Mage_Core_Controller_Front_Action",35],["T_WHITESPACE","\n",35],"{",["T_WHITESPACE","\n    ",36],["T_DOC_COMMENT","\/**\n     * Retrieve customer session object\n     *\n     * @return Mage_Customer_Model_Session\n     *\/",37],["T_WHITESPACE","\n    ",41],["T_PROTECTED","protected",42],["T_WHITESPACE"," ",42],["T_FUNCTION","function",42],["T_WHITESPACE"," ",42],["T_STRING","_getSession",42],"(",")",["T_WHITESPACE","\n    ",42],"{",["T_WHITESPACE","\n        ",43],["T_RETURN","return",44],["T_WHITESPACE"," ",44],["T_STRING","Mage",44],["T_DOUBLE_COLON","::",44],["T_STRING","getSingleton",44],"(",["T_CONSTANT_ENCAPSED_STRING","'customer\/session'",44],")",";",["T_WHITESPACE","\n    ",44],"}",["T_WHITESPACE","\n\n    ",45],["T_PUBLIC","public",47],["T_WHITESPACE"," ",47],["T_FUNCTION","function",47],["T_WHITESPACE"," ",47],["T_STRING","preDispatch",47],"(",")",["T_WHITESPACE","\n    ",47],"{",["T_WHITESPACE","\n        ",48],["T_STRING","parent",49],["T_DOUBLE_COLON","::",49],["T_STRING","preDispatch",49],"(",")",";",["T_WHITESPACE","\n\n        ",49],["T_IF","if",51],["T_WHITESPACE"," ",51],"(","!",["T_STRING","Mage",51],["T_DOUBLE_COLON","::",51],["T_STRING","getSingleton",51],"(",["T_CONSTANT_ENCAPSED_STRING","'customer\/session'",51],")",["T_OBJECT_OPERATOR","->",51],["T_STRING","authenticate",51],"(",["T_VARIABLE","$this",51],")",")",["T_WHITESPACE"," ",51],"{",["T_WHITESPACE","\n            ",51],["T_VARIABLE","$this",52],["T_OBJECT_OPERATOR","->",52],["T_STRING","setFlag",52],"(",["T_CONSTANT_ENCAPSED_STRING","''",52],",",["T_WHITESPACE"," ",52],["T_CONSTANT_ENCAPSED_STRING","'no-dispatch'",52],",",["T_WHITESPACE"," ",52],["T_STRING","true",52],")",";",["T_WHITESPACE","\n        ",52],"}",["T_WHITESPACE","\n    ",53],"}",["T_WHITESPACE","\n\n    ",54],["T_DOC_COMMENT","\/**\n     * Customer addresses list\n     *\/",56],["T_WHITESPACE","\n    ",58],["T_PUBLIC","public",59],["T_WHITESPACE"," ",59],["T_FUNCTION","function",59],["T_WHITESPACE"," ",59],["T_STRING","indexAction",59],"(",")",["T_WHITESPACE","\n    ",59],"{",["T_WHITESPACE","\n        ",60],["T_IF","if",61],["T_WHITESPACE"," ",61],"(",["T_STRING","count",61],"(",["T_VARIABLE","$this",61],["T_OBJECT_OPERATOR","->",61],["T_STRING","_getSession",61],"(",")",["T_OBJECT_OPERATOR","->",61],["T_STRING","getCustomer",61],"(",")",["T_OBJECT_OPERATOR","->",61],["T_STRING","getAddresses",61],"(",")",")",")",["T_WHITESPACE"," ",61],"{",["T_WHITESPACE","\n            ",61],["T_VARIABLE","$this",62],["T_OBJECT_OPERATOR","->",62],["T_STRING","loadLayout",62],"(",")",";",["T_WHITESPACE","\n            ",62],["T_VARIABLE","$this",63],["T_OBJECT_OPERATOR","->",63],["T_STRING","_initLayoutMessages",63],"(",["T_CONSTANT_ENCAPSED_STRING","'customer\/session'",63],")",";",["T_WHITESPACE","\n            ",63],["T_VARIABLE","$this",64],["T_OBJECT_OPERATOR","->",64],["T_STRING","_initLayoutMessages",64],"(",["T_CONSTANT_ENCAPSED_STRING","'catalog\/session'",64],")",";",["T_WHITESPACE","\n\n            ",64],["T_VARIABLE","$block",66],["T_WHITESPACE"," ",66],"=",["T_WHITESPACE"," ",66],["T_VARIABLE","$this",66],["T_OBJECT_OPERATOR","->",66],["T_STRING","getLayout",66],"(",")",["T_OBJECT_OPERATOR","->",66],["T_STRING","getBlock",66],"(",["T_CONSTANT_ENCAPSED_STRING","'address_book'",66],")",";",["T_WHITESPACE","\n            ",66],["T_IF","if",67],["T_WHITESPACE"," ",67],"(",["T_VARIABLE","$block",67],")",["T_WHITESPACE"," ",67],"{",["T_WHITESPACE","\n                ",67],["T_VARIABLE","$block",68],["T_OBJECT_OPERATOR","->",68],["T_STRING","setRefererUrl",68],"(",["T_VARIABLE","$this",68],["T_OBJECT_OPERATOR","->",68],["T_STRING","_getRefererUrl",68],"(",")",")",";",["T_WHITESPACE","\n            ",68],"}",["T_WHITESPACE","\n            ",69],["T_VARIABLE","$this",70],["T_OBJECT_OPERATOR","->",70],["T_STRING","renderLayout",70],"(",")",";",["T_WHITESPACE","\n        ",70],"}",["T_WHITESPACE"," ",71],["T_ELSE","else",71],["T_WHITESPACE"," ",71],"{",["T_WHITESPACE","\n            ",71],["T_VARIABLE","$this",72],["T_OBJECT_OPERATOR","->",72],["T_STRING","getResponse",72],"(",")",["T_OBJECT_OPERATOR","->",72],["T_STRING","setRedirect",72],"(",["T_STRING","Mage",72],["T_DOUBLE_COLON","::",72],["T_STRING","getUrl",72],"(",["T_CONSTANT_ENCAPSED_STRING","'*\/*\/new'",72],")",")",";",["T_WHITESPACE","\n        ",72],"}",["T_WHITESPACE","\n    ",73],"}",["T_WHITESPACE","\n\n    ",74],["T_PUBLIC","public",76],["T_WHITESPACE"," ",76],["T_FUNCTION","function",76],["T_WHITESPACE"," ",76],["T_STRING","editAction",76],"(",")",["T_WHITESPACE","\n    ",76],"{",["T_WHITESPACE","\n        ",77],["T_VARIABLE","$this",78],["T_OBJECT_OPERATOR","->",78],["T_STRING","_forward",78],"(",["T_CONSTANT_ENCAPSED_STRING","'form'",78],")",";",["T_WHITESPACE","\n    ",78],"}",["T_WHITESPACE","\n\n    ",79],["T_PUBLIC","public",81],["T_WHITESPACE"," ",81],["T_FUNCTION","function",81],["T_WHITESPACE"," ",81],["T_STRING","newAction",81],"(",")",["T_WHITESPACE","\n    ",81],"{",["T_WHITESPACE","\n        ",82],["T_VARIABLE","$this",83],["T_OBJECT_OPERATOR","->",83],["T_STRING","_forward",83],"(",["T_CONSTANT_ENCAPSED_STRING","'form'",83],")",";",["T_WHITESPACE","\n    ",83],"}",["T_WHITESPACE","\n\n    ",84],["T_DOC_COMMENT","\/**\n     * Address book form\n     *\/",86],["T_WHITESPACE","\n    ",88],["T_PUBLIC","public",89],["T_WHITESPACE"," ",89],["T_FUNCTION","function",89],["T_WHITESPACE"," ",89],["T_STRING","formAction",89],"(",")",["T_WHITESPACE","\n    ",89],"{",["T_WHITESPACE","\n        ",90],["T_VARIABLE","$this",91],["T_OBJECT_OPERATOR","->",91],["T_STRING","loadLayout",91],"(",")",";",["T_WHITESPACE","\n        ",91],["T_VARIABLE","$this",92],["T_OBJECT_OPERATOR","->",92],["T_STRING","_initLayoutMessages",92],"(",["T_CONSTANT_ENCAPSED_STRING","'customer\/session'",92],")",";",["T_WHITESPACE","\n        ",92],["T_VARIABLE","$navigationBlock",93],["T_WHITESPACE"," ",93],"=",["T_WHITESPACE"," ",93],["T_VARIABLE","$this",93],["T_OBJECT_OPERATOR","->",93],["T_STRING","getLayout",93],"(",")",["T_OBJECT_OPERATOR","->",93],["T_STRING","getBlock",93],"(",["T_CONSTANT_ENCAPSED_STRING","'customer_account_navigation'",93],")",";",["T_WHITESPACE","\n        ",93],["T_IF","if",94],["T_WHITESPACE"," ",94],"(",["T_VARIABLE","$navigationBlock",94],")",["T_WHITESPACE"," ",94],"{",["T_WHITESPACE","\n            ",94],["T_VARIABLE","$navigationBlock",95],["T_OBJECT_OPERATOR","->",95],["T_STRING","setActive",95],"(",["T_CONSTANT_ENCAPSED_STRING","'customer\/address'",95],")",";",["T_WHITESPACE","\n        ",95],"}",["T_WHITESPACE","\n        ",96],["T_VARIABLE","$this",97],["T_OBJECT_OPERATOR","->",97],["T_STRING","renderLayout",97],"(",")",";",["T_WHITESPACE","\n    ",97],"}",["T_WHITESPACE","\n\n    ",98],["T_PUBLIC","public",100],["T_WHITESPACE"," ",100],["T_FUNCTION","function",100],["T_WHITESPACE"," ",100],["T_STRING","formPostAction",100],"(",")",["T_WHITESPACE","\n    ",100],"{",["T_WHITESPACE","\n        ",101],["T_IF","if",102],["T_WHITESPACE"," ",102],"(","!",["T_VARIABLE","$this",102],["T_OBJECT_OPERATOR","->",102],["T_STRING","_validateFormKey",102],"(",")",")",["T_WHITESPACE"," ",102],"{",["T_WHITESPACE","\n            ",102],["T_RETURN","return",103],["T_WHITESPACE"," ",103],["T_VARIABLE","$this",103],["T_OBJECT_OPERATOR","->",103],["T_STRING","_redirect",103],"(",["T_CONSTANT_ENCAPSED_STRING","'*\/*\/'",103],")",";",["T_WHITESPACE","\n        ",103],"}",["T_WHITESPACE","\n        ",104],["T_COMMENT","\/\/ Save data\n",105],["T_WHITESPACE","        ",106],["T_IF","if",106],["T_WHITESPACE"," ",106],"(",["T_VARIABLE","$this",106],["T_OBJECT_OPERATOR","->",106],["T_STRING","getRequest",106],"(",")",["T_OBJECT_OPERATOR","->",106],["T_STRING","isPost",106],"(",")",")",["T_WHITESPACE"," ",106],"{",["T_WHITESPACE","\n            ",106],["T_VARIABLE","$customer",107],["T_WHITESPACE"," ",107],"=",["T_WHITESPACE"," ",107],["T_VARIABLE","$this",107],["T_OBJECT_OPERATOR","->",107],["T_STRING","_getSession",107],"(",")",["T_OBJECT_OPERATOR","->",107],["T_STRING","getCustomer",107],"(",")",";",["T_WHITESPACE","\n            ",107],["T_COMMENT","\/* @var $address Mage_Customer_Model_Address *\/",108],["T_WHITESPACE","\n            ",108],["T_VARIABLE","$address",109],["T_WHITESPACE","  ",109],"=",["T_WHITESPACE"," ",109],["T_STRING","Mage",109],["T_DOUBLE_COLON","::",109],["T_STRING","getModel",109],"(",["T_CONSTANT_ENCAPSED_STRING","'customer\/address'",109],")",";",["T_WHITESPACE","\n            ",109],["T_VARIABLE","$addressId",110],["T_WHITESPACE"," ",110],"=",["T_WHITESPACE"," ",110],["T_VARIABLE","$this",110],["T_OBJECT_OPERATOR","->",110],["T_STRING","getRequest",110],"(",")",["T_OBJECT_OPERATOR","->",110],["T_STRING","getParam",110],"(",["T_CONSTANT_ENCAPSED_STRING","'id'",110],")",";",["T_WHITESPACE","\n            ",110],["T_IF","if",111],["T_WHITESPACE"," ",111],"(",["T_VARIABLE","$addressId",111],")",["T_WHITESPACE"," ",111],"{",["T_WHITESPACE","\n                ",111],["T_VARIABLE","$existsAddress",112],["T_WHITESPACE"," ",112],"=",["T_WHITESPACE"," ",112],["T_VARIABLE","$customer",112],["T_OBJECT_OPERATOR","->",112],["T_STRING","getAddressById",112],"(",["T_VARIABLE","$addressId",112],")",";",["T_WHITESPACE","\n                ",112],["T_IF","if",113],["T_WHITESPACE"," ",113],"(",["T_VARIABLE","$existsAddress",113],["T_OBJECT_OPERATOR","->",113],["T_STRING","getId",113],"(",")",["T_WHITESPACE"," ",113],["T_BOOLEAN_AND","&&",113],["T_WHITESPACE"," ",113],["T_VARIABLE","$existsAddress",113],["T_OBJECT_OPERATOR","->",113],["T_STRING","getCustomerId",113],"(",")",["T_WHITESPACE"," ",113],["T_IS_EQUAL","==",113],["T_WHITESPACE"," ",113],["T_VARIABLE","$customer",113],["T_OBJECT_OPERATOR","->",113],["T_STRING","getId",113],"(",")",")",["T_WHITESPACE"," ",113],"{",["T_WHITESPACE","\n                    ",113],["T_VARIABLE","$address",114],["T_OBJECT_OPERATOR","->",114],["T_STRING","setId",114],"(",["T_VARIABLE","$existsAddress",114],["T_OBJECT_OPERATOR","->",114],["T_STRING","getId",114],"(",")",")",";",["T_WHITESPACE","\n                ",114],"}",["T_WHITESPACE","\n            ",115],"}",["T_WHITESPACE","\n\n            ",116],["T_VARIABLE","$errors",118],["T_WHITESPACE"," ",118],"=",["T_WHITESPACE"," ",118],["T_ARRAY","array",118],"(",")",";",["T_WHITESPACE","\n\n            ",118],["T_COMMENT","\/* @var $addressForm Mage_Customer_Model_Form *\/",120],["T_WHITESPACE","\n            ",120],["T_VARIABLE","$addressForm",121],["T_WHITESPACE"," ",121],"=",["T_WHITESPACE"," ",121],["T_STRING","Mage",121],["T_DOUBLE_COLON","::",121],["T_STRING","getModel",121],"(",["T_CONSTANT_ENCAPSED_STRING","'customer\/form'",121],")",";",["T_WHITESPACE","\n            ",121],["T_VARIABLE","$addressForm",122],["T_OBJECT_OPERATOR","->",122],["T_STRING","setFormCode",122],"(",["T_CONSTANT_ENCAPSED_STRING","'customer_address_edit'",122],")",["T_WHITESPACE","\n                ",122],["T_OBJECT_OPERATOR","->",123],["T_STRING","setEntity",123],"(",["T_VARIABLE","$address",123],")",";",["T_WHITESPACE","\n            ",123],["T_VARIABLE","$addressData",124],["T_WHITESPACE","    ",124],"=",["T_WHITESPACE"," ",124],["T_VARIABLE","$addressForm",124],["T_OBJECT_OPERATOR","->",124],["T_STRING","extractData",124],"(",["T_VARIABLE","$this",124],["T_OBJECT_OPERATOR","->",124],["T_STRING","getRequest",124],"(",")",")",";",["T_WHITESPACE","\n            ",124],["T_VARIABLE","$addressErrors",125],["T_WHITESPACE","  ",125],"=",["T_WHITESPACE"," ",125],["T_VARIABLE","$addressForm",125],["T_OBJECT_OPERATOR","->",125],["T_STRING","validateData",125],"(",["T_VARIABLE","$addressData",125],")",";",["T_WHITESPACE","\n            ",125],["T_IF","if",126],["T_WHITESPACE"," ",126],"(",["T_VARIABLE","$addressErrors",126],["T_WHITESPACE"," ",126],["T_IS_NOT_IDENTICAL","!==",126],["T_WHITESPACE"," ",126],["T_STRING","true",126],")",["T_WHITESPACE"," ",126],"{",["T_WHITESPACE","\n                ",126],["T_VARIABLE","$errors",127],["T_WHITESPACE"," ",127],"=",["T_WHITESPACE"," ",127],["T_VARIABLE","$addressErrors",127],";",["T_WHITESPACE","\n            ",127],"}",["T_WHITESPACE","\n\n            ",128],["T_TRY","try",130],["T_WHITESPACE"," ",130],"{",["T_WHITESPACE","\n                ",130],["T_VARIABLE","$addressForm",131],["T_OBJECT_OPERATOR","->",131],["T_STRING","compactData",131],"(",["T_VARIABLE","$addressData",131],")",";",["T_WHITESPACE","\n                ",131],["T_VARIABLE","$address",132],["T_OBJECT_OPERATOR","->",132],["T_STRING","setCustomerId",132],"(",["T_VARIABLE","$customer",132],["T_OBJECT_OPERATOR","->",132],["T_STRING","getId",132],"(",")",")",["T_WHITESPACE","\n                    ",132],["T_OBJECT_OPERATOR","->",133],["T_STRING","setIsDefaultBilling",133],"(",["T_VARIABLE","$this",133],["T_OBJECT_OPERATOR","->",133],["T_STRING","getRequest",133],"(",")",["T_OBJECT_OPERATOR","->",133],["T_STRING","getParam",133],"(",["T_CONSTANT_ENCAPSED_STRING","'default_billing'",133],",",["T_WHITESPACE"," ",133],["T_STRING","false",133],")",")",["T_WHITESPACE","\n                    ",133],["T_OBJECT_OPERATOR","->",134],["T_STRING","setIsDefaultShipping",134],"(",["T_VARIABLE","$this",134],["T_OBJECT_OPERATOR","->",134],["T_STRING","getRequest",134],"(",")",["T_OBJECT_OPERATOR","->",134],["T_STRING","getParam",134],"(",["T_CONSTANT_ENCAPSED_STRING","'default_shipping'",134],",",["T_WHITESPACE"," ",134],["T_STRING","false",134],")",")",";",["T_WHITESPACE","\n\n                ",134],["T_VARIABLE","$addressErrors",136],["T_WHITESPACE"," ",136],"=",["T_WHITESPACE"," ",136],["T_VARIABLE","$address",136],["T_OBJECT_OPERATOR","->",136],["T_STRING","validate",136],"(",")",";",["T_WHITESPACE","\n                ",136],["T_IF","if",137],["T_WHITESPACE"," ",137],"(",["T_VARIABLE","$addressErrors",137],["T_WHITESPACE"," ",137],["T_IS_NOT_IDENTICAL","!==",137],["T_WHITESPACE"," ",137],["T_STRING","true",137],")",["T_WHITESPACE"," ",137],"{",["T_WHITESPACE","\n                    ",137],["T_VARIABLE","$errors",138],["T_WHITESPACE"," ",138],"=",["T_WHITESPACE"," ",138],["T_STRING","array_merge",138],"(",["T_VARIABLE","$errors",138],",",["T_WHITESPACE"," ",138],["T_VARIABLE","$addressErrors",138],")",";",["T_WHITESPACE","\n                ",138],"}",["T_WHITESPACE","\n\n                ",139],["T_IF","if",141],["T_WHITESPACE"," ",141],"(",["T_STRING","count",141],"(",["T_VARIABLE","$errors",141],")",["T_WHITESPACE"," ",141],["T_IS_IDENTICAL","===",141],["T_WHITESPACE"," ",141],["T_LNUMBER","0",141],")",["T_WHITESPACE"," ",141],"{",["T_WHITESPACE","\n                    ",141],["T_VARIABLE","$address",142],["T_OBJECT_OPERATOR","->",142],["T_STRING","save",142],"(",")",";",["T_WHITESPACE","\n                    ",142],["T_VARIABLE","$this",143],["T_OBJECT_OPERATOR","->",143],["T_STRING","_getSession",143],"(",")",["T_OBJECT_OPERATOR","->",143],["T_STRING","addSuccess",143],"(",["T_VARIABLE","$this",143],["T_OBJECT_OPERATOR","->",143],["T_STRING","__",143],"(",["T_CONSTANT_ENCAPSED_STRING","'The address has been saved.'",143],")",")",";",["T_WHITESPACE","\n                    ",143],["T_VARIABLE","$this",144],["T_OBJECT_OPERATOR","->",144],["T_STRING","_redirectSuccess",144],"(",["T_STRING","Mage",144],["T_DOUBLE_COLON","::",144],["T_STRING","getUrl",144],"(",["T_CONSTANT_ENCAPSED_STRING","'*\/*\/index'",144],",",["T_WHITESPACE"," ",144],["T_ARRAY","array",144],"(",["T_CONSTANT_ENCAPSED_STRING","'_secure'",144],["T_DOUBLE_ARROW","=>",144],["T_STRING","true",144],")",")",")",";",["T_WHITESPACE","\n                    ",144],["T_RETURN","return",145],";",["T_WHITESPACE","\n                ",145],"}",["T_WHITESPACE"," ",146],["T_ELSE","else",146],["T_WHITESPACE"," ",146],"{",["T_WHITESPACE","\n                    ",146],["T_VARIABLE","$this",147],["T_OBJECT_OPERATOR","->",147],["T_STRING","_getSession",147],"(",")",["T_OBJECT_OPERATOR","->",147],["T_STRING","setAddressFormData",147],"(",["T_VARIABLE","$this",147],["T_OBJECT_OPERATOR","->",147],["T_STRING","getRequest",147],"(",")",["T_OBJECT_OPERATOR","->",147],["T_STRING","getPost",147],"(",")",")",";",["T_WHITESPACE","\n                    ",147],["T_FOREACH","foreach",148],["T_WHITESPACE"," ",148],"(",["T_VARIABLE","$errors",148],["T_WHITESPACE"," ",148],["T_AS","as",148],["T_WHITESPACE"," ",148],["T_VARIABLE","$errorMessage",148],")",["T_WHITESPACE"," ",148],"{",["T_WHITESPACE","\n                        ",148],["T_VARIABLE","$this",149],["T_OBJECT_OPERATOR","->",149],["T_STRING","_getSession",149],"(",")",["T_OBJECT_OPERATOR","->",149],["T_STRING","addError",149],"(",["T_VARIABLE","$errorMessage",149],")",";",["T_WHITESPACE","\n                    ",149],"}",["T_WHITESPACE","\n                ",150],"}",["T_WHITESPACE","\n            ",151],"}",["T_WHITESPACE"," ",152],["T_CATCH","catch",152],["T_WHITESPACE"," ",152],"(",["T_STRING","Mage_Core_Exception",152],["T_WHITESPACE"," ",152],["T_VARIABLE","$e",152],")",["T_WHITESPACE"," ",152],"{",["T_WHITESPACE","\n                ",152],["T_VARIABLE","$this",153],["T_OBJECT_OPERATOR","->",153],["T_STRING","_getSession",153],"(",")",["T_OBJECT_OPERATOR","->",153],["T_STRING","setAddressFormData",153],"(",["T_VARIABLE","$this",153],["T_OBJECT_OPERATOR","->",153],["T_STRING","getRequest",153],"(",")",["T_OBJECT_OPERATOR","->",153],["T_STRING","getPost",153],"(",")",")",["T_WHITESPACE","\n                    ",153],["T_OBJECT_OPERATOR","->",154],["T_STRING","addException",154],"(",["T_VARIABLE","$e",154],",",["T_WHITESPACE"," ",154],["T_VARIABLE","$e",154],["T_OBJECT_OPERATOR","->",154],["T_STRING","getMessage",154],"(",")",")",";",["T_WHITESPACE","\n            ",154],"}",["T_WHITESPACE"," ",155],["T_CATCH","catch",155],["T_WHITESPACE"," ",155],"(",["T_STRING","Exception",155],["T_WHITESPACE"," ",155],["T_VARIABLE","$e",155],")",["T_WHITESPACE"," ",155],"{",["T_WHITESPACE","\n                ",155],["T_VARIABLE","$this",156],["T_OBJECT_OPERATOR","->",156],["T_STRING","_getSession",156],"(",")",["T_OBJECT_OPERATOR","->",156],["T_STRING","setAddressFormData",156],"(",["T_VARIABLE","$this",156],["T_OBJECT_OPERATOR","->",156],["T_STRING","getRequest",156],"(",")",["T_OBJECT_OPERATOR","->",156],["T_STRING","getPost",156],"(",")",")",["T_WHITESPACE","\n                    ",156],["T_OBJECT_OPERATOR","->",157],["T_STRING","addException",157],"(",["T_VARIABLE","$e",157],",",["T_WHITESPACE"," ",157],["T_VARIABLE","$this",157],["T_OBJECT_OPERATOR","->",157],["T_STRING","__",157],"(",["T_CONSTANT_ENCAPSED_STRING","'Cannot save address.'",157],")",")",";",["T_WHITESPACE","\n            ",157],"}",["T_WHITESPACE","\n        ",158],"}",["T_WHITESPACE","\n\n        ",159],["T_RETURN","return",161],["T_WHITESPACE"," ",161],["T_VARIABLE","$this",161],["T_OBJECT_OPERATOR","->",161],["T_STRING","_redirectError",161],"(",["T_STRING","Mage",161],["T_DOUBLE_COLON","::",161],["T_STRING","getUrl",161],"(",["T_CONSTANT_ENCAPSED_STRING","'*\/*\/edit'",161],",",["T_WHITESPACE"," ",161],["T_ARRAY","array",161],"(",["T_CONSTANT_ENCAPSED_STRING","'id'",161],["T_WHITESPACE"," ",161],["T_DOUBLE_ARROW","=>",161],["T_WHITESPACE"," ",161],["T_VARIABLE","$address",161],["T_OBJECT_OPERATOR","->",161],["T_STRING","getId",161],"(",")",")",")",")",";",["T_WHITESPACE","\n    ",161],"}",["T_WHITESPACE","\n\n    ",162],["T_PUBLIC","public",164],["T_WHITESPACE"," ",164],["T_FUNCTION","function",164],["T_WHITESPACE"," ",164],["T_STRING","deleteAction",164],"(",")",["T_WHITESPACE","\n    ",164],"{",["T_WHITESPACE","\n        ",165],["T_IF","if",166],["T_WHITESPACE"," ",166],"(","!",["T_VARIABLE","$this",166],["T_OBJECT_OPERATOR","->",166],["T_STRING","_validateFormKey",166],"(",")",")",["T_WHITESPACE"," ",166],"{",["T_WHITESPACE","\n            ",166],["T_RETURN","return",167],["T_WHITESPACE"," ",167],["T_VARIABLE","$this",167],["T_OBJECT_OPERATOR","->",167],["T_STRING","_redirect",167],"(",["T_CONSTANT_ENCAPSED_STRING","'*\/*\/'",167],")",";",["T_WHITESPACE","\n        ",167],"}",["T_WHITESPACE","\n        ",168],["T_VARIABLE","$addressId",169],["T_WHITESPACE"," ",169],"=",["T_WHITESPACE"," ",169],["T_VARIABLE","$this",169],["T_OBJECT_OPERATOR","->",169],["T_STRING","getRequest",169],"(",")",["T_OBJECT_OPERATOR","->",169],["T_STRING","getParam",169],"(",["T_CONSTANT_ENCAPSED_STRING","'id'",169],",",["T_WHITESPACE"," ",169],["T_STRING","false",169],")",";",["T_WHITESPACE","\n\n        ",169],["T_IF","if",171],["T_WHITESPACE"," ",171],"(",["T_VARIABLE","$addressId",171],")",["T_WHITESPACE"," ",171],"{",["T_WHITESPACE","\n            ",171],["T_VARIABLE","$address",172],["T_WHITESPACE"," ",172],"=",["T_WHITESPACE"," ",172],["T_STRING","Mage",172],["T_DOUBLE_COLON","::",172],["T_STRING","getModel",172],"(",["T_CONSTANT_ENCAPSED_STRING","'customer\/address'",172],")",["T_OBJECT_OPERATOR","->",172],["T_STRING","load",172],"(",["T_VARIABLE","$addressId",172],")",";",["T_WHITESPACE","\n\n            ",172],["T_COMMENT","\/\/ Validate address_id <=> customer_id\n",174],["T_WHITESPACE","            ",175],["T_IF","if",175],["T_WHITESPACE"," ",175],"(",["T_VARIABLE","$address",175],["T_OBJECT_OPERATOR","->",175],["T_STRING","getCustomerId",175],"(",")",["T_WHITESPACE"," ",175],["T_IS_NOT_EQUAL","!=",175],["T_WHITESPACE"," ",175],["T_VARIABLE","$this",175],["T_OBJECT_OPERATOR","->",175],["T_STRING","_getSession",175],"(",")",["T_OBJECT_OPERATOR","->",175],["T_STRING","getCustomerId",175],"(",")",")",["T_WHITESPACE"," ",175],"{",["T_WHITESPACE","\n                ",175],["T_VARIABLE","$this",176],["T_OBJECT_OPERATOR","->",176],["T_STRING","_getSession",176],"(",")",["T_OBJECT_OPERATOR","->",176],["T_STRING","addError",176],"(",["T_VARIABLE","$this",176],["T_OBJECT_OPERATOR","->",176],["T_STRING","__",176],"(",["T_CONSTANT_ENCAPSED_STRING","'The address does not belong to this customer.'",176],")",")",";",["T_WHITESPACE","\n                ",176],["T_VARIABLE","$this",177],["T_OBJECT_OPERATOR","->",177],["T_STRING","getResponse",177],"(",")",["T_OBJECT_OPERATOR","->",177],["T_STRING","setRedirect",177],"(",["T_STRING","Mage",177],["T_DOUBLE_COLON","::",177],["T_STRING","getUrl",177],"(",["T_CONSTANT_ENCAPSED_STRING","'*\/*\/index'",177],")",")",";",["T_WHITESPACE","\n                ",177],["T_RETURN","return",178],";",["T_WHITESPACE","\n            ",178],"}",["T_WHITESPACE","\n\n            ",179],["T_TRY","try",181],["T_WHITESPACE"," ",181],"{",["T_WHITESPACE","\n                ",181],["T_VARIABLE","$address",182],["T_OBJECT_OPERATOR","->",182],["T_STRING","delete",182],"(",")",";",["T_WHITESPACE","\n                ",182],["T_VARIABLE","$this",183],["T_OBJECT_OPERATOR","->",183],["T_STRING","_getSession",183],"(",")",["T_OBJECT_OPERATOR","->",183],["T_STRING","addSuccess",183],"(",["T_VARIABLE","$this",183],["T_OBJECT_OPERATOR","->",183],["T_STRING","__",183],"(",["T_CONSTANT_ENCAPSED_STRING","'The address has been deleted.'",183],")",")",";",["T_WHITESPACE","\n            ",183],"}",["T_WHITESPACE"," ",184],["T_CATCH","catch",184],["T_WHITESPACE"," ",184],"(",["T_STRING","Exception",184],["T_WHITESPACE"," ",184],["T_VARIABLE","$e",184],")","{",["T_WHITESPACE","\n                ",184],["T_VARIABLE","$this",185],["T_OBJECT_OPERATOR","->",185],["T_STRING","_getSession",185],"(",")",["T_OBJECT_OPERATOR","->",185],["T_STRING","addException",185],"(",["T_VARIABLE","$e",185],",",["T_WHITESPACE"," ",185],["T_VARIABLE","$this",185],["T_OBJECT_OPERATOR","->",185],["T_STRING","__",185],"(",["T_CONSTANT_ENCAPSED_STRING","'An error occurred while deleting the address.'",185],")",")",";",["T_WHITESPACE","\n            ",185],"}",["T_WHITESPACE","\n        ",186],"}",["T_WHITESPACE","\n        ",187],["T_VARIABLE","$this",188],["T_OBJECT_OPERATOR","->",188],["T_STRING","getResponse",188],"(",")",["T_OBJECT_OPERATOR","->",188],["T_STRING","setRedirect",188],"(",["T_STRING","Mage",188],["T_DOUBLE_COLON","::",188],["T_STRING","getUrl",188],"(",["T_CONSTANT_ENCAPSED_STRING","'*\/*\/index'",188],")",")",";",["T_WHITESPACE","\n    ",188],"}",["T_WHITESPACE","\n",189],"}",["T_WHITESPACE","\n",190]]
[["T_OPEN_TAG","<?php\n",1],["T_DOC_COMMENT","\/**\n * Magento\n *\n * NOTICE OF LICENSE\n *\n * This source file is subject to the Open Software License (OSL 3.0)\n * that is bundled with this package in the file LICENSE.txt.\n * It is also available through the world-wide-web at this URL:\n * http:\/\/opensource.org\/licenses\/osl-3.0.php\n * If you did not receive a copy of the license and are unable to\n * obtain it through the world-wide-web, please send an email\n * to license@magento.com so we can send you a copy immediately.\n *\n * DISCLAIMER\n *\n * Do not edit or add to this file if you wish to upgrade Magento to newer\n * versions in the future. If you wish to customize Magento for your\n * needs please refer to http:\/\/www.magento.com for more information.\n *\n * @category    Mage\n * @package     Mage_Customer\n * @copyright  Copyright (c) 2006-2016 X.commerce, Inc. and affiliates (http:\/\/www.magento.com)\n * @license    http:\/\/opensource.org\/licenses\/osl-3.0.php  Open Software License (OSL 3.0)\n *\/",2],["T_WHITESPACE","\n\n\n",25],["T_CLASS","class",28],["T_WHITESPACE"," ",28],["T_STRING","Mage_Customer_Model_Convert_Parser_Customer",28],["T_WHITESPACE","\n    ",28],["T_EXTENDS","extends",29],["T_WHITESPACE"," ",29],["T_STRING","Mage_Eav_Model_Convert_Parser_Abstract",29],["T_WHITESPACE","\n",29],"{",["T_WHITESPACE","\n    ",30],["T_CONST","const",31],["T_WHITESPACE"," ",31],["T_STRING","MULTI_DELIMITER",31],["T_WHITESPACE"," ",31],"=",["T_WHITESPACE"," ",31],["T_CONSTANT_ENCAPSED_STRING","' , '",31],";",["T_WHITESPACE","\n\n    ",31],["T_PROTECTED","protected",33],["T_WHITESPACE"," ",33],["T_VARIABLE","$_resource",33],";",["T_WHITESPACE","\n\n    ",33],["T_DOC_COMMENT","\/**\n     * Product collections per store\n     *\n     * @var array\n     *\/",35],["T_WHITESPACE","\n    ",39],["T_PROTECTED","protected",40],["T_WHITESPACE"," ",40],["T_VARIABLE","$_collections",40],";",["T_WHITESPACE","\n\n    ",40],["T_PROTECTED","protected",42],["T_WHITESPACE"," ",42],["T_VARIABLE","$_customerModel",42],";",["T_WHITESPACE","\n    ",42],["T_PROTECTED","protected",43],["T_WHITESPACE"," ",43],["T_VARIABLE","$_customerAddressModel",43],";",["T_WHITESPACE","\n    ",43],["T_PROTECTED","protected",44],["T_WHITESPACE"," ",44],["T_VARIABLE","$_newsletterModel",44],";",["T_WHITESPACE","\n    ",44],["T_PROTECTED","protected",45],["T_WHITESPACE"," ",45],["T_VARIABLE","$_store",45],";",["T_WHITESPACE","\n    ",45],["T_PROTECTED","protected",46],["T_WHITESPACE"," ",46],["T_VARIABLE","$_storeId",46],";",["T_WHITESPACE","\n\n    ",46],["T_PROTECTED","protected",48],["T_WHITESPACE"," ",48],["T_VARIABLE","$_stores",48],";",["T_WHITESPACE","\n\n    ",48],["T_DOC_COMMENT","\/**\n     * Website collection array\n     *\n     * @var array\n     *\/",50],["T_WHITESPACE","\n    ",54],["T_PROTECTED","protected",55],["T_WHITESPACE"," ",55],["T_VARIABLE","$_websites",55],";",["T_WHITESPACE","\n    ",55],["T_PROTECTED","protected",56],["T_WHITESPACE"," ",56],["T_VARIABLE","$_attributes",56],["T_WHITESPACE"," ",56],"=",["T_WHITESPACE"," ",56],["T_ARRAY","array",56],"(",")",";",["T_WHITESPACE","\n\n    ",56],["T_PROTECTED","protected",58],["T_WHITESPACE"," ",58],["T_VARIABLE","$_fields",58],";",["T_WHITESPACE","\n\n    ",58],["T_DOC_COMMENT","\/**\n     * Array to contain customer groups\n     * @var null|array\n     *\/",60],["T_WHITESPACE","\n    ",63],["T_PROTECTED","protected",64],["T_WHITESPACE"," ",64],["T_VARIABLE","$_customerGroups",64],["T_WHITESPACE"," ",64],"=",["T_WHITESPACE"," ",64],["T_STRING","null",64],";",["T_WHITESPACE","\n\n    ",64],["T_PUBLIC","public",66],["T_WHITESPACE"," ",66],["T_FUNCTION","function",66],["T_WHITESPACE"," ",66],["T_STRING","getFields",66],"(",")",["T_WHITESPACE","\n    ",66],"{",["T_WHITESPACE","\n        ",67],["T_IF","if",68],["T_WHITESPACE"," ",68],"(","!",["T_VARIABLE","$this",68],["T_OBJECT_OPERATOR","->",68],["T_STRING","_fields",68],")",["T_WHITESPACE"," ",68],"{",["T_WHITESPACE","\n            ",68],["T_VARIABLE","$this",69],["T_OBJECT_OPERATOR","->",69],["T_STRING","_fields",69],["T_WHITESPACE"," ",69],"=",["T_WHITESPACE"," ",69],["T_STRING","Mage",69],["T_DOUBLE_COLON","::",69],["T_STRING","getConfig",69],"(",")",["T_OBJECT_OPERATOR","->",69],["T_STRING","getFieldset",69],"(",["T_CONSTANT_ENCAPSED_STRING","'customer_dataflow'",69],",",["T_WHITESPACE"," ",69],["T_CONSTANT_ENCAPSED_STRING","'admin'",69],")",";",["T_WHITESPACE","\n        ",69],"}",["T_WHITESPACE","\n        ",70],["T_RETURN","return",71],["T_WHITESPACE"," ",71],["T_VARIABLE","$this",71],["T_OBJECT_OPERATOR","->",71],["T_STRING","_fields",71],";",["T_WHITESPACE","\n    ",71],"}",["T_WHITESPACE","\n\n    ",72],["T_DOC_COMMENT","\/**\n     * Retrieve customer model cache\n     *\n     * @return Mage_Customer_Model_Customer\n     *\/",74],["T_WHITESPACE","\n    ",78],["T_PUBLIC","public",79],["T_WHITESPACE"," ",79],["T_FUNCTION","function",79],["T_WHITESPACE"," ",79],["T_STRING","getCustomerModel",79],"(",")",["T_WHITESPACE","\n    ",79],"{",["T_WHITESPACE","\n        ",80],["T_IF","if",81],["T_WHITESPACE"," ",81],"(",["T_STRING","is_null",81],"(",["T_VARIABLE","$this",81],["T_OBJECT_OPERATOR","->",81],["T_STRING","_customerModel",81],")",")",["T_WHITESPACE"," ",81],"{",["T_WHITESPACE","\n            ",81],["T_VARIABLE","$object",82],["T_WHITESPACE"," ",82],"=",["T_WHITESPACE"," ",82],["T_STRING","Mage",82],["T_DOUBLE_COLON","::",82],["T_STRING","getModel",82],"(",["T_CONSTANT_ENCAPSED_STRING","'customer\/customer'",82],")",";",["T_WHITESPACE","\n            ",82],["T_VARIABLE","$this",83],["T_OBJECT_OPERATOR","->",83],["T_STRING","_customerModel",83],["T_WHITESPACE"," ",83],"=",["T_WHITESPACE"," ",83],["T_STRING","Mage",83],["T_DOUBLE_COLON","::",83],["T_STRING","objects",83],"(",")",["T_OBJECT_OPERATOR","->",83],["T_STRING","save",83],"(",["T_VARIABLE","$object",83],")",";",["T_WHITESPACE","\n        ",83],"}",["T_WHITESPACE","\n        ",84],["T_RETURN","return",85],["T_WHITESPACE"," ",85],["T_STRING","Mage",85],["T_DOUBLE_COLON","::",85],["T_STRING","objects",85],"(",")",["T_OBJECT_OPERATOR","->",85],["T_STRING","load",85],"(",["T_VARIABLE","$this",85],["T_OBJECT_OPERATOR","->",85],["T_STRING","_customerModel",85],")",";",["T_WHITESPACE","\n    ",85],"}",["T_WHITESPACE","\n\n    ",86],["T_DOC_COMMENT","\/**\n     * Retrieve customer address model cache\n     *\n     * @return Mage_Customer_Model_Address\n     *\/",88],["T_WHITESPACE","\n    ",92],["T_PUBLIC","public",93],["T_WHITESPACE"," ",93],["T_FUNCTION","function",93],["T_WHITESPACE"," ",93],["T_STRING","getCustomerAddressModel",93],"(",")",["T_WHITESPACE","\n    ",93],"{",["T_WHITESPACE","\n        ",94],["T_IF","if",95],["T_WHITESPACE"," ",95],"(",["T_STRING","is_null",95],"(",["T_VARIABLE","$this",95],["T_OBJECT_OPERATOR","->",95],["T_STRING","_customerAddressModel",95],")",")",["T_WHITESPACE"," ",95],"{",["T_WHITESPACE","\n            ",95],["T_VARIABLE","$object",96],["T_WHITESPACE"," ",96],"=",["T_WHITESPACE"," ",96],["T_STRING","Mage",96],["T_DOUBLE_COLON","::",96],["T_STRING","getModel",96],"(",["T_CONSTANT_ENCAPSED_STRING","'customer\/address'",96],")",";",["T_WHITESPACE","\n            ",96],["T_VARIABLE","$this",97],["T_OBJECT_OPERATOR","->",97],["T_STRING","_customerAddressModel",97],["T_WHITESPACE"," ",97],"=",["T_WHITESPACE"," ",97],["T_STRING","Mage",97],["T_DOUBLE_COLON","::",97],["T_STRING","objects",97],"(",")",["T_OBJECT_OPERATOR","->",97],["T_STRING","save",97],"(",["T_VARIABLE","$object",97],")",";",["T_WHITESPACE","\n        ",97],"}",["T_WHITESPACE","\n        ",98],["T_RETURN","return",99],["T_WHITESPACE"," ",99],["T_STRING","Mage",99],["T_DOUBLE_COLON","::",99],["T_STRING","objects",99],"(",")",["T_OBJECT_OPERATOR","->",99],["T_STRING","load",99],"(",["T_VARIABLE","$this",99],["T_OBJECT_OPERATOR","->",99],["T_STRING","_customerAddressModel",99],")",";",["T_WHITESPACE","\n    ",99],"}",["T_WHITESPACE","\n\n    ",100],["T_DOC_COMMENT","\/**\n     * Retrieve newsletter subscribers model cache\n     *\n     * @return Mage_Newsletter_Model_Subscriber\n     *\/",102],["T_WHITESPACE","\n    ",106],["T_PUBLIC","public",107],["T_WHITESPACE"," ",107],["T_FUNCTION","function",107],["T_WHITESPACE"," ",107],["T_STRING","getNewsletterModel",107],"(",")",["T_WHITESPACE","\n    ",107],"{",["T_WHITESPACE","\n        ",108],["T_IF","if",109],["T_WHITESPACE"," ",109],"(",["T_STRING","is_null",109],"(",["T_VARIABLE","$this",109],["T_OBJECT_OPERATOR","->",109],["T_STRING","_newsletterModel",109],")",")",["T_WHITESPACE"," ",109],"{",["T_WHITESPACE","\n            ",109],["T_VARIABLE","$object",110],["T_WHITESPACE"," ",110],"=",["T_WHITESPACE"," ",110],["T_STRING","Mage",110],["T_DOUBLE_COLON","::",110],["T_STRING","getModel",110],"(",["T_CONSTANT_ENCAPSED_STRING","'newsletter\/subscriber'",110],")",";",["T_WHITESPACE","\n            ",110],["T_VARIABLE","$this",111],["T_OBJECT_OPERATOR","->",111],["T_STRING","_newsletterModel",111],["T_WHITESPACE"," ",111],"=",["T_WHITESPACE"," ",111],["T_STRING","Mage",111],["T_DOUBLE_COLON","::",111],["T_STRING","objects",111],"(",")",["T_OBJECT_OPERATOR","->",111],["T_STRING","save",111],"(",["T_VARIABLE","$object",111],")",";",["T_WHITESPACE","\n        ",111],"}",["T_WHITESPACE","\n        ",112],["T_RETURN","return",113],["T_WHITESPACE"," ",113],["T_STRING","Mage",113],["T_DOUBLE_COLON","::",113],["T_STRING","objects",113],"(",")",["T_OBJECT_OPERATOR","->",113],["T_STRING","load",113],"(",["T_VARIABLE","$this",113],["T_OBJECT_OPERATOR","->",113],["T_STRING","_newsletterModel",113],")",";",["T_WHITESPACE","\n    ",113],"}",["T_WHITESPACE","\n\n    ",114],["T_DOC_COMMENT","\/**\n     * Retrieve current store model\n     *\n     * @return Mage_Core_Model_Store\n     *\/",116],["T_WHITESPACE","\n    ",120],["T_PUBLIC","public",121],["T_WHITESPACE"," ",121],["T_FUNCTION","function",121],["T_WHITESPACE"," ",121],["T_STRING","getStore",121],"(",")",["T_WHITESPACE","\n    ",121],"{",["T_WHITESPACE","\n        ",122],["T_IF","if",123],["T_WHITESPACE"," ",123],"(",["T_STRING","is_null",123],"(",["T_VARIABLE","$this",123],["T_OBJECT_OPERATOR","->",123],["T_STRING","_store",123],")",")",["T_WHITESPACE"," ",123],"{",["T_WHITESPACE","\n            ",123],["T_TRY","try",124],["T_WHITESPACE"," ",124],"{",["T_WHITESPACE","\n                ",124],["T_VARIABLE","$store",125],["T_WHITESPACE"," ",125],"=",["T_WHITESPACE"," ",125],["T_STRING","Mage",125],["T_DOUBLE_COLON","::",125],["T_STRING","app",125],"(",")",["T_OBJECT_OPERATOR","->",125],["T_STRING","getStore",125],"(",["T_VARIABLE","$this",125],["T_OBJECT_OPERATOR","->",125],["T_STRING","getVar",125],"(",["T_CONSTANT_ENCAPSED_STRING","'store'",125],")",")",";",["T_WHITESPACE","\n            ",125],"}",["T_WHITESPACE","\n            ",126],["T_CATCH","catch",127],["T_WHITESPACE"," ",127],"(",["T_STRING","Exception",127],["T_WHITESPACE"," ",127],["T_VARIABLE","$e",127],")",["T_WHITESPACE"," ",127],"{",["T_WHITESPACE","\n                ",127],["T_VARIABLE","$this",128],["T_OBJECT_OPERATOR","->",128],["T_STRING","addException",128],"(",["T_STRING","Mage",128],["T_DOUBLE_COLON","::",128],["T_STRING","helper",128],"(",["T_CONSTANT_ENCAPSED_STRING","'catalog'",128],")",["T_OBJECT_OPERATOR","->",128],["T_STRING","__",128],"(",["T_CONSTANT_ENCAPSED_STRING","'An invalid store was specified.'",128],")",",",["T_WHITESPACE"," ",128],["T_STRING","Varien_Convert_Exception",128],["T_DOUBLE_COLON","::",128],["T_STRING","FATAL",128],")",";",["T_WHITESPACE","\n                ",128],["T_THROW","throw",129],["T_WHITESPACE"," ",129],["T_VARIABLE","$e",129],";",["T_WHITESPACE","\n            ",129],"}",["T_WHITESPACE","\n            ",130],["T_VARIABLE","$this",131],["T_OBJECT_OPERATOR","->",131],["T_STRING","_store",131],["T_WHITESPACE"," ",131],"=",["T_WHITESPACE"," ",131],["T_VARIABLE","$store",131],";",["T_WHITESPACE","\n        ",131],"}",["T_WHITESPACE","\n        ",132],["T_RETURN","return",133],["T_WHITESPACE"," ",133],["T_VARIABLE","$this",133],["T_OBJECT_OPERATOR","->",133],["T_STRING","_store",133],";",["T_WHITESPACE","\n    ",133],"}",["T_WHITESPACE","\n\n    ",134],["T_DOC_COMMENT","\/**\n     * Retrieve store ID\n     *\n     * @return int\n     *\/",136],["T_WHITESPACE","\n    ",140],["T_PUBLIC","public",141],["T_WHITESPACE"," ",141],["T_FUNCTION","function",141],["T_WHITESPACE"," ",141],["T_STRING","getStoreId",141],"(",")",["T_WHITESPACE","\n    ",141],"{",["T_WHITESPACE","\n        ",142],["T_IF","if",143],["T_WHITESPACE"," ",143],"(",["T_STRING","is_null",143],"(",["T_VARIABLE","$this",143],["T_OBJECT_OPERATOR","->",143],["T_STRING","_storeId",143],")",")",["T_WHITESPACE"," ",143],"{",["T_WHITESPACE","\n            ",143],["T_VARIABLE","$this",144],["T_OBJECT_OPERATOR","->",144],["T_STRING","_storeId",144],["T_WHITESPACE"," ",144],"=",["T_WHITESPACE"," ",144],["T_VARIABLE","$this",144],["T_OBJECT_OPERATOR","->",144],["T_STRING","getStore",144],"(",")",["T_OBJECT_OPERATOR","->",144],["T_STRING","getId",144],"(",")",";",["T_WHITESPACE","\n        ",144],"}",["T_WHITESPACE","\n        ",145],["T_RETURN","return",146],["T_WHITESPACE"," ",146],["T_VARIABLE","$this",146],["T_OBJECT_OPERATOR","->",146],["T_STRING","_storeId",146],";",["T_WHITESPACE","\n    ",146],"}",["T_WHITESPACE","\n\n    ",147],["T_PUBLIC","public",149],["T_WHITESPACE"," ",149],["T_FUNCTION","function",149],["T_WHITESPACE"," ",149],["T_STRING","getStoreById",149],"(",["T_VARIABLE","$storeId",149],")",["T_WHITESPACE","\n    ",149],"{",["T_WHITESPACE","\n        ",150],["T_IF","if",151],["T_WHITESPACE"," ",151],"(",["T_STRING","is_null",151],"(",["T_VARIABLE","$this",151],["T_OBJECT_OPERATOR","->",151],["T_STRING","_stores",151],")",")",["T_WHITESPACE"," ",151],"{",["T_WHITESPACE","\n            ",151],["T_VARIABLE","$this",152],["T_OBJECT_OPERATOR","->",152],["T_STRING","_stores",152],["T_WHITESPACE"," ",152],"=",["T_WHITESPACE"," ",152],["T_STRING","Mage",152],["T_DOUBLE_COLON","::",152],["T_STRING","app",152],"(",")",["T_OBJECT_OPERATOR","->",152],["T_STRING","getStores",152],"(",["T_STRING","true",152],")",";",["T_WHITESPACE","\n        ",152],"}",["T_WHITESPACE","\n        ",153],["T_IF","if",154],["T_WHITESPACE"," ",154],"(",["T_ISSET","isset",154],"(",["T_VARIABLE","$this",154],["T_OBJECT_OPERATOR","->",154],["T_STRING","_stores",154],"[",["T_VARIABLE","$storeId",154],"]",")",")",["T_WHITESPACE"," ",154],"{",["T_WHITESPACE","\n            ",154],["T_RETURN","return",155],["T_WHITESPACE"," ",155],["T_VARIABLE","$this",155],["T_OBJECT_OPERATOR","->",155],["T_STRING","_stores",155],"[",["T_VARIABLE","$storeId",155],"]",";",["T_WHITESPACE","\n        ",155],"}",["T_WHITESPACE","\n        ",156],["T_RETURN","return",157],["T_WHITESPACE"," ",157],["T_STRING","false",157],";",["T_WHITESPACE","\n    ",157],"}",["T_WHITESPACE","\n\n    ",158],["T_DOC_COMMENT","\/**\n     * Retrieve website model by id\n     *\n     * @param int $websiteId\n     * @return Mage_Core_Model_Website\n     *\/",160],["T_WHITESPACE","\n    ",165],["T_PUBLIC","public",166],["T_WHITESPACE"," ",166],["T_FUNCTION","function",166],["T_WHITESPACE"," ",166],["T_STRING","getWebsiteById",166],"(",["T_VARIABLE","$websiteId",166],")",["T_WHITESPACE","\n    ",166],"{",["T_WHITESPACE","\n        ",167],["T_IF","if",168],["T_WHITESPACE"," ",168],"(",["T_STRING","is_null",168],"(",["T_VARIABLE","$this",168],["T_OBJECT_OPERATOR","->",168],["T_STRING","_websites",168],")",")",["T_WHITESPACE"," ",168],"{",["T_WHITESPACE","\n            ",168],["T_VARIABLE","$this",169],["T_OBJECT_OPERATOR","->",169],["T_STRING","_websites",169],["T_WHITESPACE"," ",169],"=",["T_WHITESPACE"," ",169],["T_STRING","Mage",169],["T_DOUBLE_COLON","::",169],["T_STRING","app",169],"(",")",["T_OBJECT_OPERATOR","->",169],["T_STRING","getWebsites",169],"(",["T_STRING","true",169],")",";",["T_WHITESPACE","\n        ",169],"}",["T_WHITESPACE","\n        ",170],["T_IF","if",171],["T_WHITESPACE"," ",171],"(",["T_ISSET","isset",171],"(",["T_VARIABLE","$this",171],["T_OBJECT_OPERATOR","->",171],["T_STRING","_websites",171],"[",["T_VARIABLE","$websiteId",171],"]",")",")",["T_WHITESPACE"," ",171],"{",["T_WHITESPACE","\n            ",171],["T_RETURN","return",172],["T_WHITESPACE"," ",172],["T_VARIABLE","$this",172],["T_OBJECT_OPERATOR","->",172],["T_STRING","_websites",172],"[",["T_VARIABLE","$websiteId",172],"]",";",["T_WHITESPACE","\n        ",172],"}",["T_WHITESPACE","\n        ",173],["T_RETURN","return",174],["T_WHITESPACE"," ",174],["T_STRING","false",174],";",["T_WHITESPACE","\n    ",174],"}",["T_WHITESPACE","\n\n    ",175],["T_DOC_COMMENT","\/**\n     * Retrieve eav entity attribute model\n     *\n     * @param string $code\n     * @return Mage_Eav_Model_Entity_Attribute\n     *\/",177],["T_WHITESPACE","\n    ",182],["T_PUBLIC","public",183],["T_WHITESPACE"," ",183],["T_FUNCTION","function",183],["T_WHITESPACE"," ",183],["T_STRING","getAttribute",183],"(",["T_VARIABLE","$code",183],")",["T_WHITESPACE","\n    ",183],"{",["T_WHITESPACE","\n        ",184],["T_IF","if",185],["T_WHITESPACE"," ",185],"(","!",["T_ISSET","isset",185],"(",["T_VARIABLE","$this",185],["T_OBJECT_OPERATOR","->",185],["T_STRING","_attributes",185],"[",["T_VARIABLE","$code",185],"]",")",")",["T_WHITESPACE"," ",185],"{",["T_WHITESPACE","\n            ",185],["T_VARIABLE","$this",186],["T_OBJECT_OPERATOR","->",186],["T_STRING","_attributes",186],"[",["T_VARIABLE","$code",186],"]",["T_WHITESPACE"," ",186],"=",["T_WHITESPACE"," ",186],["T_VARIABLE","$this",186],["T_OBJECT_OPERATOR","->",186],["T_STRING","getCustomerModel",186],"(",")",["T_OBJECT_OPERATOR","->",186],["T_STRING","getResource",186],"(",")",["T_OBJECT_OPERATOR","->",186],["T_STRING","getAttribute",186],"(",["T_VARIABLE","$code",186],")",";",["T_WHITESPACE","\n        ",186],"}",["T_WHITESPACE","\n        ",187],["T_RETURN","return",188],["T_WHITESPACE"," ",188],["T_VARIABLE","$this",188],["T_OBJECT_OPERATOR","->",188],["T_STRING","_attributes",188],"[",["T_VARIABLE","$code",188],"]",";",["T_WHITESPACE","\n    ",188],"}",["T_WHITESPACE","\n\n    ",189],["T_DOC_COMMENT","\/**\n     * @return Mage_Catalog_Model_Mysql4_Convert\n     *\/",191],["T_WHITESPACE","\n    ",193],["T_PUBLIC","public",194],["T_WHITESPACE"," ",194],["T_FUNCTION","function",194],["T_WHITESPACE"," ",194],["T_STRING","getResource",194],"(",")",["T_WHITESPACE","\n    ",194],"{",["T_WHITESPACE","\n        ",195],["T_IF","if",196],["T_WHITESPACE"," ",196],"(","!",["T_VARIABLE","$this",196],["T_OBJECT_OPERATOR","->",196],["T_STRING","_resource",196],")",["T_WHITESPACE"," ",196],"{",["T_WHITESPACE","\n            ",196],["T_VARIABLE","$this",197],["T_OBJECT_OPERATOR","->",197],["T_STRING","_resource",197],["T_WHITESPACE"," ",197],"=",["T_WHITESPACE"," ",197],["T_STRING","Mage",197],["T_DOUBLE_COLON","::",197],["T_STRING","getResourceSingleton",197],"(",["T_CONSTANT_ENCAPSED_STRING","'catalog_entity\/convert'",197],")",";",["T_WHITESPACE","\n                ",197],["T_COMMENT","#->loadStores()\n",198],["T_WHITESPACE","                ",199],["T_COMMENT","#->loadProducts()\n",199],["T_WHITESPACE","                ",200],["T_COMMENT","#->loadAttributeSets()\n",200],["T_WHITESPACE","                ",201],["T_COMMENT","#->loadAttributeOptions();\n",201],["T_WHITESPACE","        ",202],"}",["T_WHITESPACE","\n        ",202],["T_RETURN","return",203],["T_WHITESPACE"," ",203],["T_VARIABLE","$this",203],["T_OBJECT_OPERATOR","->",203],["T_STRING","_resource",203],";",["T_WHITESPACE","\n    ",203],"}",["T_WHITESPACE","\n\n    ",204],["T_PUBLIC","public",206],["T_WHITESPACE"," ",206],["T_FUNCTION","function",206],["T_WHITESPACE"," ",206],["T_STRING","getCollection",206],"(",["T_VARIABLE","$storeId",206],")",["T_WHITESPACE","\n    ",206],"{",["T_WHITESPACE","\n        ",207],["T_IF","if",208],["T_WHITESPACE"," ",208],"(","!",["T_ISSET","isset",208],"(",["T_VARIABLE","$this",208],["T_OBJECT_OPERATOR","->",208],["T_STRING","_collections",208],"[",["T_VARIABLE","$storeId",208],"]",")",")",["T_WHITESPACE"," ",208],"{",["T_WHITESPACE","\n            ",208],["T_VARIABLE","$this",209],["T_OBJECT_OPERATOR","->",209],["T_STRING","_collections",209],"[",["T_VARIABLE","$storeId",209],"]",["T_WHITESPACE"," ",209],"=",["T_WHITESPACE"," ",209],["T_STRING","Mage",209],["T_DOUBLE_COLON","::",209],["T_STRING","getResourceModel",209],"(",["T_CONSTANT_ENCAPSED_STRING","'customer\/customer_collection'",209],")",";",["T_WHITESPACE","\n            ",209],["T_VARIABLE","$this",210],["T_OBJECT_OPERATOR","->",210],["T_STRING","_collections",210],"[",["T_VARIABLE","$storeId",210],"]",["T_OBJECT_OPERATOR","->",210],["T_STRING","getEntity",210],"(",")",["T_OBJECT_OPERATOR","->",210],["T_STRING","setStore",210],"(",["T_VARIABLE","$storeId",210],")",";",["T_WHITESPACE","\n        ",210],"}",["T_WHITESPACE","\n        ",211],["T_RETURN","return",212],["T_WHITESPACE"," ",212],["T_VARIABLE","$this",212],["T_OBJECT_OPERATOR","->",212],["T_STRING","_collections",212],"[",["T_VARIABLE","$storeId",212],"]",";",["T_WHITESPACE","\n    ",212],"}",["T_WHITESPACE","\n\n    ",213],["T_PUBLIC","public",215],["T_WHITESPACE"," ",215],["T_FUNCTION","function",215],["T_WHITESPACE"," ",215],["T_STRING","unparse",215],"(",")",["T_WHITESPACE","\n    ",215],"{",["T_WHITESPACE","\n        ",216],["T_VARIABLE","$systemFields",217],["T_WHITESPACE"," ",217],"=",["T_WHITESPACE"," ",217],["T_ARRAY","array",217],"(",")",";",["T_WHITESPACE","\n        ",217],["T_FOREACH","foreach",218],["T_WHITESPACE"," ",218],"(",["T_VARIABLE","$this",218],["T_OBJECT_OPERATOR","->",218],["T_STRING","getFields",218],"(",")",["T_WHITESPACE"," ",218],["T_AS","as",218],["T_WHITESPACE"," ",218],["T_VARIABLE","$code",218],["T_DOUBLE_ARROW","=>",218],["T_VARIABLE","$node",218],")",["T_WHITESPACE"," ",218],"{",["T_WHITESPACE","\n            ",218],["T_IF","if",219],["T_WHITESPACE"," ",219],"(",["T_VARIABLE","$node",219],["T_OBJECT_OPERATOR","->",219],["T_STRING","is",219],"(",["T_CONSTANT_ENCAPSED_STRING","'system'",219],")",")",["T_WHITESPACE"," ",219],"{",["T_WHITESPACE","\n                ",219],["T_VARIABLE","$systemFields",220],"[","]",["T_WHITESPACE"," ",220],"=",["T_WHITESPACE"," ",220],["T_VARIABLE","$code",220],";",["T_WHITESPACE","\n            ",220],"}",["T_WHITESPACE","\n        ",221],"}",["T_WHITESPACE","\n\n        ",222],["T_VARIABLE","$entityIds",224],["T_WHITESPACE"," ",224],"=",["T_WHITESPACE"," ",224],["T_VARIABLE","$this",224],["T_OBJECT_OPERATOR","->",224],["T_STRING","getData",224],"(",")",";",["T_WHITESPACE","\n\n        ",224],["T_FOREACH","foreach",226],["T_WHITESPACE"," ",226],"(",["T_VARIABLE","$entityIds",226],["T_WHITESPACE"," ",226],["T_AS","as",226],["T_WHITESPACE"," ",226],["T_VARIABLE","$i",226],["T_WHITESPACE"," ",226],["T_DOUBLE_ARROW","=>",226],["T_WHITESPACE"," ",226],["T_VARIABLE","$entityId",226],")",["T_WHITESPACE"," ",226],"{",["T_WHITESPACE","\n            ",226],["T_VARIABLE","$customer",227],["T_WHITESPACE"," ",227],"=",["T_WHITESPACE"," ",227],["T_VARIABLE","$this",227],["T_OBJECT_OPERATOR","->",227],["T_STRING","getCustomerModel",227],"(",")",["T_WHITESPACE","\n                ",227],["T_OBJECT_OPERATOR","->",228],["T_STRING","setData",228],"(",["T_ARRAY","array",228],"(",")",")",["T_WHITESPACE","\n                ",228],["T_OBJECT_OPERATOR","->",229],["T_STRING","load",229],"(",["T_VARIABLE","$entityId",229],")",";",["T_WHITESPACE","\n            ",229],["T_COMMENT","\/* @var $customer Mage_Customer_Model_Customer *\/",230],["T_WHITESPACE","\n\n            ",230],["T_VARIABLE","$position",232],["T_WHITESPACE"," ",232],"=",["T_WHITESPACE"," ",232],["T_STRING","Mage",232],["T_DOUBLE_COLON","::",232],["T_STRING","helper",232],"(",["T_CONSTANT_ENCAPSED_STRING","'catalog'",232],")",["T_OBJECT_OPERATOR","->",232],["T_STRING","__",232],"(",["T_CONSTANT_ENCAPSED_STRING","'Line %d, Email: %s'",232],",",["T_WHITESPACE"," ",232],"(",["T_VARIABLE","$i",232],"+",["T_LNUMBER","1",232],")",",",["T_WHITESPACE"," ",232],["T_VARIABLE","$customer",232],["T_OBJECT_OPERATOR","->",232],["T_STRING","getEmail",232],"(",")",")",";",["T_WHITESPACE","\n            ",232],["T_VARIABLE","$this",233],["T_OBJECT_OPERATOR","->",233],["T_STRING","setPosition",233],"(",["T_VARIABLE","$position",233],")",";",["T_WHITESPACE","\n\n            ",233],["T_VARIABLE","$row",235],["T_WHITESPACE"," ",235],"=",["T_WHITESPACE"," ",235],["T_ARRAY","array",235],"(",")",";",["T_WHITESPACE","\n\n            ",235],["T_FOREACH","foreach",237],["T_WHITESPACE"," ",237],"(",["T_VARIABLE","$customer",237],["T_OBJECT_OPERATOR","->",237],["T_STRING","getData",237],"(",")",["T_WHITESPACE"," ",237],["T_AS","as",237],["T_WHITESPACE"," ",237],["T_VARIABLE","$field",237],["T_WHITESPACE"," ",237],["T_DOUBLE_ARROW","=>",237],["T_WHITESPACE"," ",237],["T_VARIABLE","$value",237],")",["T_WHITESPACE"," ",237],"{",["T_WHITESPACE","\n                ",237],["T_IF","if",238],["T_WHITESPACE"," ",238],"(",["T_VARIABLE","$field",238],["T_WHITESPACE"," ",238],["T_IS_EQUAL","==",238],["T_WHITESPACE"," ",238],["T_CONSTANT_ENCAPSED_STRING","'website_id'",238],")",["T_WHITESPACE"," ",238],"{",["T_WHITESPACE","\n                    ",238],["T_VARIABLE","$website",239],["T_WHITESPACE"," ",239],"=",["T_WHITESPACE"," ",239],["T_VARIABLE","$this",239],["T_OBJECT_OPERATOR","->",239],["T_STRING","getWebsiteById",239],"(",["T_VARIABLE","$value",239],")",";",["T_WHITESPACE","\n                    ",239],["T_IF","if",240],["T_WHITESPACE"," ",240],"(",["T_VARIABLE","$website",240],["T_WHITESPACE"," ",240],["T_IS_IDENTICAL","===",240],["T_WHITESPACE"," ",240],["T_STRING","false",240],")",["T_WHITESPACE"," ",240],"{",["T_WHITESPACE","\n                        ",240],["T_VARIABLE","$website",241],["T_WHITESPACE"," ",241],"=",["T_WHITESPACE"," ",241],["T_VARIABLE","$this",241],["T_OBJECT_OPERATOR","->",241],["T_STRING","getWebsiteById",241],"(",["T_LNUMBER","0",241],")",";",["T_WHITESPACE","\n                    ",241],"}",["T_WHITESPACE","\n                    ",242],["T_VARIABLE","$row",243],"[",["T_CONSTANT_ENCAPSED_STRING","'website'",243],"]",["T_WHITESPACE"," ",243],"=",["T_WHITESPACE"," ",243],["T_VARIABLE","$website",243],["T_OBJECT_OPERATOR","->",243],["T_STRING","getCode",243],"(",")",";",["T_WHITESPACE","\n                    ",243],["T_CONTINUE","continue",244],";",["T_WHITESPACE","\n                ",244],"}",["T_WHITESPACE","\n\n                ",245],["T_IF","if",247],["T_WHITESPACE"," ",247],"(",["T_STRING","in_array",247],"(",["T_VARIABLE","$field",247],",",["T_WHITESPACE"," ",247],["T_VARIABLE","$systemFields",247],")",["T_WHITESPACE"," ",247],["T_BOOLEAN_OR","||",247],["T_WHITESPACE"," ",247],["T_STRING","is_object",247],"(",["T_VARIABLE","$value",247],")",")",["T_WHITESPACE"," ",247],"{",["T_WHITESPACE","\n                    ",247],["T_CONTINUE","continue",248],";",["T_WHITESPACE","\n                ",248],"}",["T_WHITESPACE","\n\n                ",249],["T_VARIABLE","$attribute",251],["T_WHITESPACE"," ",251],"=",["T_WHITESPACE"," ",251],["T_VARIABLE","$this",251],["T_OBJECT_OPERATOR","->",251],["T_STRING","getAttribute",251],"(",["T_VARIABLE","$field",251],")",";",["T_WHITESPACE","\n                ",251],["T_IF","if",252],["T_WHITESPACE"," ",252],"(","!",["T_VARIABLE","$attribute",252],")",["T_WHITESPACE"," ",252],"{",["T_WHITESPACE","\n                    ",252],["T_CONTINUE","continue",253],";",["T_WHITESPACE","\n                ",253],"}",["T_WHITESPACE","\n\n                ",254],["T_IF","if",256],["T_WHITESPACE"," ",256],"(",["T_VARIABLE","$attribute",256],["T_OBJECT_OPERATOR","->",256],["T_STRING","usesSource",256],"(",")",")",["T_WHITESPACE"," ",256],"{",["T_WHITESPACE","\n\n                    ",256],["T_VARIABLE","$option",258],["T_WHITESPACE"," ",258],"=",["T_WHITESPACE"," ",258],["T_VARIABLE","$attribute",258],["T_OBJECT_OPERATOR","->",258],["T_STRING","getSource",258],"(",")",["T_OBJECT_OPERATOR","->",258],["T_STRING","getOptionText",258],"(",["T_VARIABLE","$value",258],")",";",["T_WHITESPACE","\n                    ",258],["T_IF","if",259],["T_WHITESPACE"," ",259],"(",["T_VARIABLE","$value",259],["T_WHITESPACE"," ",259],["T_BOOLEAN_AND","&&",259],["T_WHITESPACE"," ",259],["T_EMPTY","empty",259],"(",["T_VARIABLE","$option",259],")",")",["T_WHITESPACE"," ",259],"{",["T_WHITESPACE","\n                        ",259],["T_VARIABLE","$message",260],["T_WHITESPACE"," ",260],"=",["T_WHITESPACE"," ",260],["T_STRING","Mage",260],["T_DOUBLE_COLON","::",260],["T_STRING","helper",260],"(",["T_CONSTANT_ENCAPSED_STRING","'catalog'",260],")",["T_OBJECT_OPERATOR","->",260],["T_STRING","__",260],"(",["T_CONSTANT_ENCAPSED_STRING","\"An invalid option ID is specified for %s (%s), skipping the record.\"",260],",",["T_WHITESPACE"," ",260],["T_VARIABLE","$field",260],",",["T_WHITESPACE"," ",260],["T_VARIABLE","$value",260],")",";",["T_WHITESPACE","\n                        ",260],["T_VARIABLE","$this",261],["T_OBJECT_OPERATOR","->",261],["T_STRING","addException",261],"(",["T_VARIABLE","$message",261],",",["T_WHITESPACE"," ",261],["T_STRING","Mage_Dataflow_Model_Convert_Exception",261],["T_DOUBLE_COLON","::",261],["T_STRING","ERROR",261],")",";",["T_WHITESPACE","\n                        ",261],["T_CONTINUE","continue",262],";",["T_WHITESPACE","\n                    ",262],"}",["T_WHITESPACE","\n                    ",263],["T_IF","if",264],["T_WHITESPACE"," ",264],"(",["T_STRING","is_array",264],"(",["T_VARIABLE","$option",264],")",")",["T_WHITESPACE"," ",264],"{",["T_WHITESPACE","\n                        ",264],["T_VARIABLE","$value",265],["T_WHITESPACE"," ",265],"=",["T_WHITESPACE"," ",265],["T_STRING","join",265],"(",["T_STRING","self",265],["T_DOUBLE_COLON","::",265],["T_STRING","MULTI_DELIMITER",265],",",["T_WHITESPACE"," ",265],["T_VARIABLE","$option",265],")",";",["T_WHITESPACE","\n                    ",265],"}",["T_WHITESPACE"," ",266],["T_ELSE","else",266],["T_WHITESPACE"," ",266],"{",["T_WHITESPACE","\n                        ",266],["T_VARIABLE","$value",267],["T_WHITESPACE"," ",267],"=",["T_WHITESPACE"," ",267],["T_VARIABLE","$option",267],";",["T_WHITESPACE","\n                    ",267],"}",["T_WHITESPACE","\n                    ",268],["T_UNSET","unset",269],"(",["T_VARIABLE","$option",269],")",";",["T_WHITESPACE","\n                ",269],"}",["T_WHITESPACE","\n                ",270],["T_ELSEIF","elseif",271],["T_WHITESPACE"," ",271],"(",["T_STRING","is_array",271],"(",["T_VARIABLE","$value",271],")",")",["T_WHITESPACE"," ",271],"{",["T_WHITESPACE","\n                    ",271],["T_CONTINUE","continue",272],";",["T_WHITESPACE","\n                ",272],"}",["T_WHITESPACE","\n                ",273],["T_VARIABLE","$row",274],"[",["T_VARIABLE","$field",274],"]",["T_WHITESPACE"," ",274],"=",["T_WHITESPACE"," ",274],["T_VARIABLE","$value",274],";",["T_WHITESPACE","\n            ",274],"}",["T_WHITESPACE","\n\n            ",275],["T_VARIABLE","$defaultBillingId",277],["T_WHITESPACE","  ",277],"=",["T_WHITESPACE"," ",277],["T_VARIABLE","$customer",277],["T_OBJECT_OPERATOR","->",277],["T_STRING","getDefaultBilling",277],"(",")",";",["T_WHITESPACE","\n            ",277],["T_VARIABLE","$defaultShippingId",278],["T_WHITESPACE"," ",278],"=",["T_WHITESPACE"," ",278],["T_VARIABLE","$customer",278],["T_OBJECT_OPERATOR","->",278],["T_STRING","getDefaultShipping",278],"(",")",";",["T_WHITESPACE","\n\n            ",278],["T_VARIABLE","$customerAddress",280],["T_WHITESPACE"," ",280],"=",["T_WHITESPACE"," ",280],["T_VARIABLE","$this",280],["T_OBJECT_OPERATOR","->",280],["T_STRING","getCustomerAddressModel",280],"(",")",";",["T_WHITESPACE","\n\n            ",280],["T_IF","if",282],["T_WHITESPACE"," ",282],"(","!",["T_VARIABLE","$defaultBillingId",282],")",["T_WHITESPACE"," ",282],"{",["T_WHITESPACE","\n                ",282],["T_FOREACH","foreach",283],["T_WHITESPACE"," ",283],"(",["T_VARIABLE","$this",283],["T_OBJECT_OPERATOR","->",283],["T_STRING","getFields",283],"(",")",["T_WHITESPACE"," ",283],["T_AS","as",283],["T_WHITESPACE"," ",283],["T_VARIABLE","$code",283],["T_DOUBLE_ARROW","=>",283],["T_VARIABLE","$node",283],")",["T_WHITESPACE"," ",283],"{",["T_WHITESPACE","\n                    ",283],["T_IF","if",284],["T_WHITESPACE"," ",284],"(",["T_VARIABLE","$node",284],["T_OBJECT_OPERATOR","->",284],["T_STRING","is",284],"(",["T_CONSTANT_ENCAPSED_STRING","'billing'",284],")",")",["T_WHITESPACE"," ",284],"{",["T_WHITESPACE","\n                        ",284],["T_VARIABLE","$row",285],"[",["T_CONSTANT_ENCAPSED_STRING","'billing_'",285],".",["T_VARIABLE","$code",285],"]",["T_WHITESPACE"," ",285],"=",["T_WHITESPACE"," ",285],["T_STRING","null",285],";",["T_WHITESPACE","\n                    ",285],"}",["T_WHITESPACE","\n                ",286],"}",["T_WHITESPACE","\n            ",287],"}",["T_WHITESPACE","\n            ",288],["T_ELSE","else",289],["T_WHITESPACE"," ",289],"{",["T_WHITESPACE","\n                ",289],["T_VARIABLE","$customerAddress",290],["T_OBJECT_OPERATOR","->",290],["T_STRING","load",290],"(",["T_VARIABLE","$defaultBillingId",290],")",";",["T_WHITESPACE","\n\n                ",290],["T_FOREACH","foreach",292],["T_WHITESPACE"," ",292],"(",["T_VARIABLE","$this",292],["T_OBJECT_OPERATOR","->",292],["T_STRING","getFields",292],"(",")",["T_WHITESPACE"," ",292],["T_AS","as",292],["T_WHITESPACE"," ",292],["T_VARIABLE","$code",292],["T_DOUBLE_ARROW","=>",292],["T_VARIABLE","$node",292],")",["T_WHITESPACE"," ",292],"{",["T_WHITESPACE","\n                    ",292],["T_IF","if",293],["T_WHITESPACE"," ",293],"(",["T_VARIABLE","$node",293],["T_OBJECT_OPERATOR","->",293],["T_STRING","is",293],"(",["T_CONSTANT_ENCAPSED_STRING","'billing'",293],")",")",["T_WHITESPACE"," ",293],"{",["T_WHITESPACE","\n                        ",293],["T_VARIABLE","$row",294],"[",["T_CONSTANT_ENCAPSED_STRING","'billing_'",294],".",["T_VARIABLE","$code",294],"]",["T_WHITESPACE"," ",294],"=",["T_WHITESPACE"," ",294],["T_VARIABLE","$customerAddress",294],["T_OBJECT_OPERATOR","->",294],["T_STRING","getDataUsingMethod",294],"(",["T_VARIABLE","$code",294],")",";",["T_WHITESPACE","\n                    ",294],"}",["T_WHITESPACE","\n                ",295],"}",["T_WHITESPACE","\n            ",296],"}",["T_WHITESPACE","\n\n            ",297],["T_IF","if",299],["T_WHITESPACE"," ",299],"(","!",["T_VARIABLE","$defaultShippingId",299],")",["T_WHITESPACE"," ",299],"{",["T_WHITESPACE","\n                ",299],["T_FOREACH","foreach",300],["T_WHITESPACE"," ",300],"(",["T_VARIABLE","$this",300],["T_OBJECT_OPERATOR","->",300],["T_STRING","getFields",300],"(",")",["T_WHITESPACE"," ",300],["T_AS","as",300],["T_WHITESPACE"," ",300],["T_VARIABLE","$code",300],["T_DOUBLE_ARROW","=>",300],["T_VARIABLE","$node",300],")",["T_WHITESPACE"," ",300],"{",["T_WHITESPACE","\n                    ",300],["T_IF","if",301],["T_WHITESPACE"," ",301],"(",["T_VARIABLE","$node",301],["T_OBJECT_OPERATOR","->",301],["T_STRING","is",301],"(",["T_CONSTANT_ENCAPSED_STRING","'shipping'",301],")",")",["T_WHITESPACE"," ",301],"{",["T_WHITESPACE","\n                        ",301],["T_VARIABLE","$row",302],"[",["T_CONSTANT_ENCAPSED_STRING","'shipping_'",302],".",["T_VARIABLE","$code",302],"]",["T_WHITESPACE"," ",302],"=",["T_WHITESPACE"," ",302],["T_STRING","null",302],";",["T_WHITESPACE","\n                    ",302],"}",["T_WHITESPACE","\n                ",303],"}",["T_WHITESPACE","\n            ",304],"}",["T_WHITESPACE","\n            ",305],["T_ELSE","else",306],["T_WHITESPACE"," ",306],"{",["T_WHITESPACE","\n                ",306],["T_IF","if",307],["T_WHITESPACE"," ",307],"(",["T_VARIABLE","$defaultShippingId",307],["T_WHITESPACE"," ",307],["T_IS_NOT_EQUAL","!=",307],["T_WHITESPACE"," ",307],["T_VARIABLE","$defaultBillingId",307],")",["T_WHITESPACE"," ",307],"{",["T_WHITESPACE","\n                    ",307],["T_VARIABLE","$customerAddress",308],["T_OBJECT_OPERATOR","->",308],["T_STRING","load",308],"(",["T_VARIABLE","$defaultShippingId",308],")",";",["T_WHITESPACE","\n                ",308],"}",["T_WHITESPACE","\n                ",309],["T_FOREACH","foreach",310],["T_WHITESPACE"," ",310],"(",["T_VARIABLE","$this",310],["T_OBJECT_OPERATOR","->",310],["T_STRING","getFields",310],"(",")",["T_WHITESPACE"," ",310],["T_AS","as",310],["T_WHITESPACE"," ",310],["T_VARIABLE","$code",310],["T_DOUBLE_ARROW","=>",310],["T_VARIABLE","$node",310],")",["T_WHITESPACE"," ",310],"{",["T_WHITESPACE","\n                    ",310],["T_IF","if",311],["T_WHITESPACE"," ",311],"(",["T_VARIABLE","$node",311],["T_OBJECT_OPERATOR","->",311],["T_STRING","is",311],"(",["T_CONSTANT_ENCAPSED_STRING","'shipping'",311],")",")",["T_WHITESPACE"," ",311],"{",["T_WHITESPACE","\n                        ",311],["T_VARIABLE","$row",312],"[",["T_CONSTANT_ENCAPSED_STRING","'shipping_'",312],".",["T_VARIABLE","$code",312],"]",["T_WHITESPACE"," ",312],"=",["T_WHITESPACE"," ",312],["T_VARIABLE","$customerAddress",312],["T_OBJECT_OPERATOR","->",312],["T_STRING","getDataUsingMethod",312],"(",["T_VARIABLE","$code",312],")",";",["T_WHITESPACE","\n                    ",312],"}",["T_WHITESPACE","\n                ",313],"}",["T_WHITESPACE","\n            ",314],"}",["T_WHITESPACE","\n\n            ",315],["T_VARIABLE","$store",317],["T_WHITESPACE"," ",317],"=",["T_WHITESPACE"," ",317],["T_VARIABLE","$this",317],["T_OBJECT_OPERATOR","->",317],["T_STRING","getStoreById",317],"(",["T_VARIABLE","$customer",317],["T_OBJECT_OPERATOR","->",317],["T_STRING","getStoreId",317],"(",")",")",";",["T_WHITESPACE","\n            ",317],["T_IF","if",318],["T_WHITESPACE"," ",318],"(",["T_VARIABLE","$store",318],["T_WHITESPACE"," ",318],["T_IS_IDENTICAL","===",318],["T_WHITESPACE"," ",318],["T_STRING","false",318],")",["T_WHITESPACE"," ",318],"{",["T_WHITESPACE","\n                ",318],["T_VARIABLE","$store",319],["T_WHITESPACE"," ",319],"=",["T_WHITESPACE"," ",319],["T_VARIABLE","$this",319],["T_OBJECT_OPERATOR","->",319],["T_STRING","getStoreById",319],"(",["T_LNUMBER","0",319],")",";",["T_WHITESPACE","\n            ",319],"}",["T_WHITESPACE","\n            ",320],["T_VARIABLE","$row",321],"[",["T_CONSTANT_ENCAPSED_STRING","'created_in'",321],"]",["T_WHITESPACE"," ",321],"=",["T_WHITESPACE"," ",321],["T_VARIABLE","$store",321],["T_OBJECT_OPERATOR","->",321],["T_STRING","getCode",321],"(",")",";",["T_WHITESPACE","\n\n            ",321],["T_VARIABLE","$newsletter",323],["T_WHITESPACE"," ",323],"=",["T_WHITESPACE"," ",323],["T_VARIABLE","$this",323],["T_OBJECT_OPERATOR","->",323],["T_STRING","getNewsletterModel",323],"(",")",["T_WHITESPACE","\n                ",323],["T_OBJECT_OPERATOR","->",324],["T_STRING","setData",324],"(",["T_ARRAY","array",324],"(",")",")",["T_WHITESPACE","\n                ",324],["T_OBJECT_OPERATOR","->",325],["T_STRING","loadByCustomer",325],"(",["T_VARIABLE","$customer",325],")",";",["T_WHITESPACE","\n            ",325],["T_VARIABLE","$row",326],"[",["T_CONSTANT_ENCAPSED_STRING","'is_subscribed'",326],"]",["T_WHITESPACE"," ",326],"=",["T_WHITESPACE"," ",326],"(",["T_VARIABLE","$newsletter",326],["T_OBJECT_OPERATOR","->",326],["T_STRING","getId",326],"(",")",["T_WHITESPACE","\n                ",326],["T_BOOLEAN_AND","&&",327],["T_WHITESPACE"," ",327],["T_VARIABLE","$newsletter",327],["T_OBJECT_OPERATOR","->",327],["T_STRING","getSubscriberStatus",327],"(",")",["T_WHITESPACE"," ",327],["T_IS_EQUAL","==",327],["T_WHITESPACE"," ",327],["T_STRING","Mage_Newsletter_Model_Subscriber",327],["T_DOUBLE_COLON","::",327],["T_STRING","STATUS_SUBSCRIBED",327],")",["T_WHITESPACE","\n                ",327],"?",["T_WHITESPACE"," ",328],["T_LNUMBER","1",328],["T_WHITESPACE"," ",328],":",["T_WHITESPACE"," ",328],["T_LNUMBER","0",328],";",["T_WHITESPACE","\n\n            ",328],["T_IF","if",330],"(",["T_VARIABLE","$customer",330],["T_OBJECT_OPERATOR","->",330],["T_STRING","getGroupId",330],"(",")",")","{",["T_WHITESPACE","\n                ",330],["T_VARIABLE","$groupCode",331],["T_WHITESPACE"," ",331],"=",["T_WHITESPACE"," ",331],["T_VARIABLE","$this",331],["T_OBJECT_OPERATOR","->",331],["T_STRING","_getCustomerGroupCode",331],"(",["T_VARIABLE","$customer",331],")",";",["T_WHITESPACE","\n                ",331],["T_IF","if",332],["T_WHITESPACE"," ",332],"(",["T_STRING","is_null",332],"(",["T_VARIABLE","$groupCode",332],")",")",["T_WHITESPACE"," ",332],"{",["T_WHITESPACE","\n                    ",332],["T_VARIABLE","$this",333],["T_OBJECT_OPERATOR","->",333],["T_STRING","addException",333],"(",["T_WHITESPACE","\n                        ",333],["T_STRING","Mage",334],["T_DOUBLE_COLON","::",334],["T_STRING","helper",334],"(",["T_CONSTANT_ENCAPSED_STRING","'catalog'",334],")",["T_OBJECT_OPERATOR","->",334],["T_STRING","__",334],"(",["T_CONSTANT_ENCAPSED_STRING","\"An invalid group ID is specified, skipping the record.\"",334],")",",",["T_WHITESPACE","\n                        ",334],["T_STRING","Mage_Dataflow_Model_Convert_Exception",335],["T_DOUBLE_COLON","::",335],["T_STRING","ERROR",335],["T_WHITESPACE","\n                    ",335],")",";",["T_WHITESPACE","\n                    ",336],["T_CONTINUE","continue",337],";",["T_WHITESPACE","\n                ",337],"}",["T_WHITESPACE"," ",338],["T_ELSE","else",338],["T_WHITESPACE"," ",338],"{",["T_WHITESPACE","\n                    ",338],["T_VARIABLE","$row",339],"[",["T_CONSTANT_ENCAPSED_STRING","'group'",339],"]",["T_WHITESPACE"," ",339],"=",["T_WHITESPACE"," ",339],["T_VARIABLE","$groupCode",339],";",["T_WHITESPACE","\n                ",339],"}",["T_WHITESPACE","\n            ",340],"}",["T_WHITESPACE","\n\n            ",341],["T_VARIABLE","$batchExport",343],["T_WHITESPACE"," ",343],"=",["T_WHITESPACE"," ",343],["T_VARIABLE","$this",343],["T_OBJECT_OPERATOR","->",343],["T_STRING","getBatchExportModel",343],"(",")",["T_WHITESPACE","\n                ",343],["T_OBJECT_OPERATOR","->",344],["T_STRING","setId",344],"(",["T_STRING","null",344],")",["T_WHITESPACE","\n                ",344],["T_OBJECT_OPERATOR","->",345],["T_STRING","setBatchId",345],"(",["T_VARIABLE","$this",345],["T_OBJECT_OPERATOR","->",345],["T_STRING","getBatchModel",345],"(",")",["T_OBJECT_OPERATOR","->",345],["T_STRING","getId",345],"(",")",")",["T_WHITESPACE","\n                ",345],["T_OBJECT_OPERATOR","->",346],["T_STRING","setBatchData",346],"(",["T_VARIABLE","$row",346],")",["T_WHITESPACE","\n                ",346],["T_OBJECT_OPERATOR","->",347],["T_STRING","setStatus",347],"(",["T_LNUMBER","1",347],")",["T_WHITESPACE","\n                ",347],["T_OBJECT_OPERATOR","->",348],["T_STRING","save",348],"(",")",";",["T_WHITESPACE","\n        ",348],"}",["T_WHITESPACE","\n\n        ",349],["T_RETURN","return",351],["T_WHITESPACE"," ",351],["T_VARIABLE","$this",351],";",["T_WHITESPACE","\n    ",351],"}",["T_WHITESPACE","\n\n    ",352],["T_PUBLIC","public",354],["T_WHITESPACE"," ",354],["T_FUNCTION","function",354],["T_WHITESPACE"," ",354],["T_STRING","getExternalAttributes",354],"(",")",["T_WHITESPACE","\n    ",354],"{",["T_WHITESPACE","\n        ",355],["T_VARIABLE","$internal",356],["T_WHITESPACE"," ",356],"=",["T_WHITESPACE"," ",356],["T_ARRAY","array",356],"(",["T_WHITESPACE","\n            ",356],["T_CONSTANT_ENCAPSED_STRING","'store_id'",357],",",["T_WHITESPACE","\n            ",357],["T_CONSTANT_ENCAPSED_STRING","'entity_id'",358],",",["T_WHITESPACE","\n            ",358],["T_CONSTANT_ENCAPSED_STRING","'website_id'",359],",",["T_WHITESPACE","\n            ",359],["T_CONSTANT_ENCAPSED_STRING","'group_id'",360],",",["T_WHITESPACE","\n            ",360],["T_CONSTANT_ENCAPSED_STRING","'created_in'",361],",",["T_WHITESPACE","\n            ",361],["T_CONSTANT_ENCAPSED_STRING","'default_billing'",362],",",["T_WHITESPACE","\n            ",362],["T_CONSTANT_ENCAPSED_STRING","'default_shipping'",363],",",["T_WHITESPACE","\n            ",363],["T_CONSTANT_ENCAPSED_STRING","'country_id'",364],["T_WHITESPACE","\n        ",364],")",";",["T_WHITESPACE","\n\n        ",365],["T_VARIABLE","$customerAttributes",367],["T_WHITESPACE"," ",367],"=",["T_WHITESPACE"," ",367],["T_STRING","Mage",367],["T_DOUBLE_COLON","::",367],["T_STRING","getResourceModel",367],"(",["T_CONSTANT_ENCAPSED_STRING","'customer\/attribute_collection'",367],")",["T_WHITESPACE","\n            ",367],["T_OBJECT_OPERATOR","->",368],["T_STRING","load",368],"(",")",["T_OBJECT_OPERATOR","->",368],["T_STRING","getIterator",368],"(",")",";",["T_WHITESPACE","\n\n        ",368],["T_VARIABLE","$addressAttributes",370],["T_WHITESPACE"," ",370],"=",["T_WHITESPACE"," ",370],["T_STRING","Mage",370],["T_DOUBLE_COLON","::",370],["T_STRING","getResourceModel",370],"(",["T_CONSTANT_ENCAPSED_STRING","'customer\/address_attribute_collection'",370],")",["T_WHITESPACE","\n            ",370],["T_OBJECT_OPERATOR","->",371],["T_STRING","load",371],"(",")",["T_OBJECT_OPERATOR","->",371],["T_STRING","getIterator",371],"(",")",";",["T_WHITESPACE","\n\n        ",371],["T_VARIABLE","$attributes",373],["T_WHITESPACE"," ",373],"=",["T_WHITESPACE"," ",373],["T_ARRAY","array",373],"(",["T_WHITESPACE","\n            ",373],["T_CONSTANT_ENCAPSED_STRING","'website'",374],["T_WHITESPACE","       ",374],["T_DOUBLE_ARROW","=>",374],["T_WHITESPACE"," ",374],["T_CONSTANT_ENCAPSED_STRING","'website'",374],",",["T_WHITESPACE","\n            ",374],["T_CONSTANT_ENCAPSED_STRING","'email'",375],["T_WHITESPACE","         ",375],["T_DOUBLE_ARROW","=>",375],["T_WHITESPACE"," ",375],["T_CONSTANT_ENCAPSED_STRING","'email'",375],",",["T_WHITESPACE","\n            ",375],["T_CONSTANT_ENCAPSED_STRING","'group'",376],["T_WHITESPACE","         ",376],["T_DOUBLE_ARROW","=>",376],["T_WHITESPACE"," ",376],["T_CONSTANT_ENCAPSED_STRING","'group'",376],",",["T_WHITESPACE","\n            ",376],["T_CONSTANT_ENCAPSED_STRING","'create_in'",377],["T_WHITESPACE","     ",377],["T_DOUBLE_ARROW","=>",377],["T_WHITESPACE"," ",377],["T_CONSTANT_ENCAPSED_STRING","'create_in'",377],",",["T_WHITESPACE","\n            ",377],["T_CONSTANT_ENCAPSED_STRING","'is_subscribed'",378],["T_WHITESPACE"," ",378],["T_DOUBLE_ARROW","=>",378],["T_WHITESPACE"," ",378],["T_CONSTANT_ENCAPSED_STRING","'is_subscribed'",378],["T_WHITESPACE","\n        ",378],")",";",["T_WHITESPACE","\n\n        ",379],["T_FOREACH","foreach",381],["T_WHITESPACE"," ",381],"(",["T_VARIABLE","$customerAttributes",381],["T_WHITESPACE"," ",381],["T_AS","as",381],["T_WHITESPACE"," ",381],["T_VARIABLE","$attr",381],")",["T_WHITESPACE"," ",381],"{",["T_WHITESPACE","\n            ",381],["T_VARIABLE","$code",382],["T_WHITESPACE"," ",382],"=",["T_WHITESPACE"," ",382],["T_VARIABLE","$attr",382],["T_OBJECT_OPERATOR","->",382],["T_STRING","getAttributeCode",382],"(",")",";",["T_WHITESPACE","\n            ",382],["T_IF","if",383],["T_WHITESPACE"," ",383],"(",["T_STRING","in_array",383],"(",["T_VARIABLE","$code",383],",",["T_WHITESPACE"," ",383],["T_VARIABLE","$internal",383],")",["T_WHITESPACE"," ",383],["T_BOOLEAN_OR","||",383],["T_WHITESPACE"," ",383],["T_VARIABLE","$attr",383],["T_OBJECT_OPERATOR","->",383],["T_STRING","getFrontendInput",383],"(",")",["T_IS_EQUAL","==",383],["T_CONSTANT_ENCAPSED_STRING","'hidden'",383],")",["T_WHITESPACE"," ",383],"{",["T_WHITESPACE","\n                ",383],["T_CONTINUE","continue",384],";",["T_WHITESPACE","\n            ",384],"}",["T_WHITESPACE","\n            ",385],["T_VARIABLE","$attributes",386],"[",["T_VARIABLE","$code",386],"]",["T_WHITESPACE"," ",386],"=",["T_WHITESPACE"," ",386],["T_VARIABLE","$code",386],";",["T_WHITESPACE","\n        ",386],"}",["T_WHITESPACE","\n        ",387],["T_VARIABLE","$attributes",388],"[",["T_CONSTANT_ENCAPSED_STRING","'password_hash'",388],"]",["T_WHITESPACE"," ",388],"=",["T_WHITESPACE"," ",388],["T_CONSTANT_ENCAPSED_STRING","'password_hash'",388],";",["T_WHITESPACE","\n\n        ",388],["T_FOREACH","foreach",390],["T_WHITESPACE"," ",390],"(",["T_VARIABLE","$addressAttributes",390],["T_WHITESPACE"," ",390],["T_AS","as",390],["T_WHITESPACE"," ",390],["T_VARIABLE","$attr",390],")",["T_WHITESPACE"," ",390],"{",["T_WHITESPACE","\n            ",390],["T_VARIABLE","$code",391],["T_WHITESPACE"," ",391],"=",["T_WHITESPACE"," ",391],["T_VARIABLE","$attr",391],["T_OBJECT_OPERATOR","->",391],["T_STRING","getAttributeCode",391],"(",")",";",["T_WHITESPACE","\n            ",391],["T_IF","if",392],["T_WHITESPACE"," ",392],"(",["T_STRING","in_array",392],"(",["T_VARIABLE","$code",392],",",["T_WHITESPACE"," ",392],["T_VARIABLE","$internal",392],")",["T_WHITESPACE"," ",392],["T_BOOLEAN_OR","||",392],["T_WHITESPACE"," ",392],["T_VARIABLE","$attr",392],["T_OBJECT_OPERATOR","->",392],["T_STRING","getFrontendInput",392],"(",")",["T_IS_EQUAL","==",392],["T_CONSTANT_ENCAPSED_STRING","'hidden'",392],")",["T_WHITESPACE"," ",392],"{",["T_WHITESPACE","\n                ",392],["T_CONTINUE","continue",393],";",["T_WHITESPACE","\n            ",393],"}",["T_WHITESPACE","\n\n            ",394],["T_IF","if",396],["T_WHITESPACE"," ",396],"(",["T_VARIABLE","$code",396],["T_WHITESPACE"," ",396],["T_IS_EQUAL","==",396],["T_WHITESPACE"," ",396],["T_CONSTANT_ENCAPSED_STRING","'street'",396],")",["T_WHITESPACE"," ",396],"{",["T_WHITESPACE","\n                ",396],["T_VARIABLE","$attributes",397],"[",["T_CONSTANT_ENCAPSED_STRING","'billing_'",397],".",["T_VARIABLE","$code",397],".",["T_CONSTANT_ENCAPSED_STRING","'_full'",397],"]",["T_WHITESPACE"," ",397],"=",["T_WHITESPACE"," ",397],["T_CONSTANT_ENCAPSED_STRING","'billing_'",397],".",["T_VARIABLE","$code",397],";",["T_WHITESPACE","\n            ",397],"}",["T_WHITESPACE"," ",398],["T_ELSE","else",398],["T_WHITESPACE"," ",398],"{",["T_WHITESPACE","\n                ",398],["T_VARIABLE","$attributes",399],"[",["T_CONSTANT_ENCAPSED_STRING","'billing_'",399],".",["T_VARIABLE","$code",399],"]",["T_WHITESPACE"," ",399],"=",["T_WHITESPACE"," ",399],["T_CONSTANT_ENCAPSED_STRING","'billing_'",399],".",["T_VARIABLE","$code",399],";",["T_WHITESPACE","\n            ",399],"}",["T_WHITESPACE","\n        ",400],"}",["T_WHITESPACE","\n        ",401],["T_VARIABLE","$attributes",402],"[",["T_CONSTANT_ENCAPSED_STRING","'billing_country'",402],"]",["T_WHITESPACE"," ",402],"=",["T_WHITESPACE"," ",402],["T_CONSTANT_ENCAPSED_STRING","'billing_country'",402],";",["T_WHITESPACE","\n\n        ",402],["T_FOREACH","foreach",404],["T_WHITESPACE"," ",404],"(",["T_VARIABLE","$addressAttributes",404],["T_WHITESPACE"," ",404],["T_AS","as",404],["T_WHITESPACE"," ",404],["T_VARIABLE","$attr",404],")",["T_WHITESPACE"," ",404],"{",["T_WHITESPACE","\n            ",404],["T_VARIABLE","$code",405],["T_WHITESPACE"," ",405],"=",["T_WHITESPACE"," ",405],["T_VARIABLE","$attr",405],["T_OBJECT_OPERATOR","->",405],["T_STRING","getAttributeCode",405],"(",")",";",["T_WHITESPACE","\n            ",405],["T_IF","if",406],["T_WHITESPACE"," ",406],"(",["T_STRING","in_array",406],"(",["T_VARIABLE","$code",406],",",["T_WHITESPACE"," ",406],["T_VARIABLE","$internal",406],")",["T_WHITESPACE"," ",406],["T_BOOLEAN_OR","||",406],["T_WHITESPACE"," ",406],["T_VARIABLE","$attr",406],["T_OBJECT_OPERATOR","->",406],["T_STRING","getFrontendInput",406],"(",")",["T_IS_EQUAL","==",406],["T_CONSTANT_ENCAPSED_STRING","'hidden'",406],")",["T_WHITESPACE"," ",406],"{",["T_WHITESPACE","\n                ",406],["T_CONTINUE","continue",407],";",["T_WHITESPACE","\n            ",407],"}",["T_WHITESPACE","\n\n            ",408],["T_IF","if",410],["T_WHITESPACE"," ",410],"(",["T_VARIABLE","$code",410],["T_WHITESPACE"," ",410],["T_IS_EQUAL","==",410],["T_WHITESPACE"," ",410],["T_CONSTANT_ENCAPSED_STRING","'street'",410],")",["T_WHITESPACE"," ",410],"{",["T_WHITESPACE","\n                ",410],["T_VARIABLE","$attributes",411],"[",["T_CONSTANT_ENCAPSED_STRING","'shipping_'",411],".",["T_VARIABLE","$code",411],".",["T_CONSTANT_ENCAPSED_STRING","'_full'",411],"]",["T_WHITESPACE"," ",411],"=",["T_WHITESPACE"," ",411],["T_CONSTANT_ENCAPSED_STRING","'shipping_'",411],".",["T_VARIABLE","$code",411],";",["T_WHITESPACE","\n            ",411],"}",["T_WHITESPACE"," ",412],["T_ELSE","else",412],["T_WHITESPACE"," ",412],"{",["T_WHITESPACE","\n                ",412],["T_VARIABLE","$attributes",413],"[",["T_CONSTANT_ENCAPSED_STRING","'shipping_'",413],".",["T_VARIABLE","$code",413],"]",["T_WHITESPACE"," ",413],"=",["T_WHITESPACE"," ",413],["T_CONSTANT_ENCAPSED_STRING","'shipping_'",413],".",["T_VARIABLE","$code",413],";",["T_WHITESPACE","\n            ",413],"}",["T_WHITESPACE","\n        ",414],"}",["T_WHITESPACE","\n        ",415],["T_VARIABLE","$attributes",416],"[",["T_CONSTANT_ENCAPSED_STRING","'shipping_country'",416],"]",["T_WHITESPACE"," ",416],"=",["T_WHITESPACE"," ",416],["T_CONSTANT_ENCAPSED_STRING","'shipping_country'",416],";",["T_WHITESPACE","\n\n        ",416],["T_RETURN","return",418],["T_WHITESPACE"," ",418],["T_VARIABLE","$attributes",418],";",["T_WHITESPACE","\n    ",418],"}",["T_WHITESPACE","\n\n    ",419],["T_DOC_COMMENT","\/**\n     * Gets group code by customer's groupId\n     *\n     * @param Mage_Customer_Model_Customer $customer\n     * @return string|null\n     *\/",421],["T_WHITESPACE","\n    ",426],["T_PROTECTED","protected",427],["T_WHITESPACE"," ",427],["T_FUNCTION","function",427],["T_WHITESPACE"," ",427],["T_STRING","_getCustomerGroupCode",427],"(",["T_VARIABLE","$customer",427],")",["T_WHITESPACE","\n    ",427],"{",["T_WHITESPACE","\n        ",428],["T_IF","if",429],["T_WHITESPACE"," ",429],"(",["T_STRING","is_null",429],"(",["T_VARIABLE","$this",429],["T_OBJECT_OPERATOR","->",429],["T_STRING","_customerGroups",429],")",")",["T_WHITESPACE"," ",429],"{",["T_WHITESPACE","\n            ",429],["T_VARIABLE","$groups",430],["T_WHITESPACE"," ",430],"=",["T_WHITESPACE"," ",430],["T_STRING","Mage",430],["T_DOUBLE_COLON","::",430],["T_STRING","getResourceModel",430],"(",["T_CONSTANT_ENCAPSED_STRING","'customer\/group_collection'",430],")",["T_WHITESPACE","\n                    ",430],["T_OBJECT_OPERATOR","->",431],["T_STRING","load",431],"(",")",";",["T_WHITESPACE","\n\n            ",431],["T_FOREACH","foreach",433],["T_WHITESPACE"," ",433],"(",["T_VARIABLE","$groups",433],["T_WHITESPACE"," ",433],["T_AS","as",433],["T_WHITESPACE"," ",433],["T_VARIABLE","$group",433],")",["T_WHITESPACE"," ",433],"{",["T_WHITESPACE","\n                ",433],["T_VARIABLE","$this",434],["T_OBJECT_OPERATOR","->",434],["T_STRING","_customerGroups",434],"[",["T_VARIABLE","$group",434],["T_OBJECT_OPERATOR","->",434],["T_STRING","getId",434],"(",")","]",["T_WHITESPACE"," ",434],"=",["T_WHITESPACE"," ",434],["T_VARIABLE","$group",434],["T_OBJECT_OPERATOR","->",434],["T_STRING","getData",434],"(",["T_CONSTANT_ENCAPSED_STRING","'customer_group_code'",434],")",";",["T_WHITESPACE","\n            ",434],"}",["T_WHITESPACE","\n        ",435],"}",["T_WHITESPACE","\n\n        ",436],["T_IF","if",438],["T_WHITESPACE"," ",438],"(",["T_ISSET","isset",438],"(",["T_VARIABLE","$this",438],["T_OBJECT_OPERATOR","->",438],["T_STRING","_customerGroups",438],"[",["T_VARIABLE","$customer",438],["T_OBJECT_OPERATOR","->",438],["T_STRING","getGroupId",438],"(",")","]",")",")",["T_WHITESPACE"," ",438],"{",["T_WHITESPACE","\n            ",438],["T_RETURN","return",439],["T_WHITESPACE"," ",439],["T_VARIABLE","$this",439],["T_OBJECT_OPERATOR","->",439],["T_STRING","_customerGroups",439],"[",["T_VARIABLE","$customer",439],["T_OBJECT_OPERATOR","->",439],["T_STRING","getGroupId",439],"(",")","]",";",["T_WHITESPACE","\n        ",439],"}",["T_WHITESPACE"," ",440],["T_ELSE","else",440],["T_WHITESPACE"," ",440],"{",["T_WHITESPACE","\n            ",440],["T_RETURN","return",441],["T_WHITESPACE"," ",441],["T_STRING","null",441],";",["T_WHITESPACE","\n        ",441],"}",["T_WHITESPACE","\n    ",442],"}",["T_WHITESPACE","\n\n   ",443],["T_COMMENT","\/* ########### THE CODE BELOW IS NOT USED ############# *\/",445],["T_WHITESPACE","\n\n    ",445],["T_PUBLIC","public",447],["T_WHITESPACE"," ",447],["T_FUNCTION","function",447],["T_WHITESPACE"," ",447],["T_STRING","unparse__OLD",447],"(",")",["T_WHITESPACE","\n    ",447],"{",["T_WHITESPACE","\n        ",448],["T_VARIABLE","$collections",449],["T_WHITESPACE"," ",449],"=",["T_WHITESPACE"," ",449],["T_VARIABLE","$this",449],["T_OBJECT_OPERATOR","->",449],["T_STRING","getData",449],"(",")",";",["T_WHITESPACE","\n",449],["T_COMMENT","\/\/        if ($collections instanceof Mage_Eav_Model_Entity_Collection_Abstract) {\n",450],["T_COMMENT","\/\/            $collections = array($collections->getEntity()->getStoreId()=>$collections);\n",451],["T_COMMENT","\/\/        } elseif (!is_array($collections)) {\n",452],["T_COMMENT","\/\/            $this->addException(Mage::helper('customer')->__(\"Array of Entity collections is expected.\"), Varien_Convert_Exception::FATAL);\n",453],["T_COMMENT","\/\/        }\n",454],["T_WHITESPACE","\n",455],["T_COMMENT","\/\/        foreach ($collections as $storeId=>$collection) {\n",456],["T_COMMENT","\/\/           if (!$collection instanceof Mage_Eav_Model_Entity_Collection_Abstract) {\n",457],["T_COMMENT","\/\/               $this->addException(Mage::helper('customer')->__(\"Entity collection is expected.\"), Varien_Convert_Exception::FATAL);\n",458],["T_COMMENT","\/\/            }\n",459],["T_WHITESPACE","\n            ",460],["T_VARIABLE","$data",461],["T_WHITESPACE"," ",461],"=",["T_WHITESPACE"," ",461],["T_ARRAY","array",461],"(",")",";",["T_WHITESPACE","\n\n            ",461],["T_FOREACH","foreach",463],["T_WHITESPACE"," ",463],"(",["T_VARIABLE","$collections",463],["T_OBJECT_OPERATOR","->",463],["T_STRING","getIterator",463],"(",")",["T_WHITESPACE"," ",463],["T_AS","as",463],["T_WHITESPACE"," ",463],["T_VARIABLE","$i",463],["T_DOUBLE_ARROW","=>",463],["T_VARIABLE","$model",463],")",["T_WHITESPACE"," ",463],"{",["T_WHITESPACE","\n                ",463],["T_VARIABLE","$this",464],["T_OBJECT_OPERATOR","->",464],["T_STRING","setPosition",464],"(",["T_CONSTANT_ENCAPSED_STRING","'Line: '",464],".","(",["T_VARIABLE","$i",464],"+",["T_LNUMBER","1",464],")",".",["T_CONSTANT_ENCAPSED_STRING","', Email: '",464],".",["T_VARIABLE","$model",464],["T_OBJECT_OPERATOR","->",464],["T_STRING","getEmail",464],"(",")",")",";",["T_WHITESPACE","\n\n\n\n                ",464],["T_COMMENT","\/\/ Will be removed after confirmation from Dima or Moshe\n",468],["T_WHITESPACE","                ",469],["T_VARIABLE","$row",469],["T_WHITESPACE"," ",469],"=",["T_WHITESPACE"," ",469],["T_ARRAY","array",469],"(",["T_WHITESPACE","\n                    ",469],["T_CONSTANT_ENCAPSED_STRING","'store_view'",470],["T_DOUBLE_ARROW","=>",470],["T_VARIABLE","$this",470],["T_OBJECT_OPERATOR","->",470],["T_STRING","getStoreCode",470],"(",["T_VARIABLE","$this",470],["T_OBJECT_OPERATOR","->",470],["T_STRING","getVar",470],"(",["T_CONSTANT_ENCAPSED_STRING","'store'",470],")",["T_WHITESPACE"," ",470],"?",["T_WHITESPACE"," ",470],["T_VARIABLE","$this",470],["T_OBJECT_OPERATOR","->",470],["T_STRING","getVar",470],"(",["T_CONSTANT_ENCAPSED_STRING","'store'",470],")",["T_WHITESPACE"," ",470],":",["T_WHITESPACE"," ",470],["T_VARIABLE","$storeId",470],")",",",["T_WHITESPACE","\n                ",470],")",";",["T_WHITESPACE"," ",471],["T_COMMENT","\/\/ End\n",471],["T_WHITESPACE","\n                ",472],["T_FOREACH","foreach",473],["T_WHITESPACE"," ",473],"(",["T_VARIABLE","$model",473],["T_OBJECT_OPERATOR","->",473],["T_STRING","getData",473],"(",")",["T_WHITESPACE"," ",473],["T_AS","as",473],["T_WHITESPACE"," ",473],["T_VARIABLE","$field",473],["T_DOUBLE_ARROW","=>",473],["T_VARIABLE","$value",473],")",["T_WHITESPACE"," ",473],"{",["T_WHITESPACE","\n                    ",473],["T_COMMENT","\/\/ set website_id\n",474],["T_WHITESPACE","                    ",475],["T_IF","if",475],["T_WHITESPACE"," ",475],"(",["T_VARIABLE","$field",475],["T_WHITESPACE"," ",475],["T_IS_EQUAL","==",475],["T_WHITESPACE"," ",475],["T_CONSTANT_ENCAPSED_STRING","'website_id'",475],")",["T_WHITESPACE"," ",475],"{",["T_WHITESPACE","\n                      ",475],["T_VARIABLE","$row",476],"[",["T_CONSTANT_ENCAPSED_STRING","'website_code'",476],"]",["T_WHITESPACE"," ",476],"=",["T_WHITESPACE"," ",476],["T_STRING","Mage",476],["T_DOUBLE_COLON","::",476],["T_STRING","getModel",476],"(",["T_CONSTANT_ENCAPSED_STRING","'core\/website'",476],")",["T_OBJECT_OPERATOR","->",476],["T_STRING","load",476],"(",["T_VARIABLE","$value",476],")",["T_OBJECT_OPERATOR","->",476],["T_STRING","getCode",476],"(",")",";",["T_WHITESPACE","\n                      ",476],["T_CONTINUE","continue",477],";",["T_WHITESPACE","\n                    ",477],"}",["T_WHITESPACE"," ",478],["T_COMMENT","\/\/ end\n",478],["T_WHITESPACE","\n                    ",479],["T_IF","if",480],["T_WHITESPACE"," ",480],"(",["T_STRING","in_array",480],"(",["T_VARIABLE","$field",480],",",["T_WHITESPACE"," ",480],["T_VARIABLE","$systemFields",480],")",")",["T_WHITESPACE"," ",480],"{",["T_WHITESPACE","\n                        ",480],["T_CONTINUE","continue",481],";",["T_WHITESPACE","\n                    ",481],"}",["T_WHITESPACE","\n\n                    ",482],["T_VARIABLE","$attribute",484],["T_WHITESPACE"," ",484],"=",["T_WHITESPACE"," ",484],["T_VARIABLE","$model",484],["T_OBJECT_OPERATOR","->",484],["T_STRING","getResource",484],"(",")",["T_OBJECT_OPERATOR","->",484],["T_STRING","getAttribute",484],"(",["T_VARIABLE","$field",484],")",";",["T_WHITESPACE","\n                    ",484],["T_IF","if",485],["T_WHITESPACE"," ",485],"(","!",["T_VARIABLE","$attribute",485],")",["T_WHITESPACE"," ",485],"{",["T_WHITESPACE","\n                        ",485],["T_CONTINUE","continue",486],";",["T_WHITESPACE","\n                    ",486],"}",["T_WHITESPACE","\n\n                    ",487],["T_IF","if",489],["T_WHITESPACE"," ",489],"(",["T_VARIABLE","$attribute",489],["T_OBJECT_OPERATOR","->",489],["T_STRING","usesSource",489],"(",")",")",["T_WHITESPACE"," ",489],"{",["T_WHITESPACE","\n                        ",489],["T_VARIABLE","$option",490],["T_WHITESPACE"," ",490],"=",["T_WHITESPACE"," ",490],["T_VARIABLE","$attribute",490],["T_OBJECT_OPERATOR","->",490],["T_STRING","getSource",490],"(",")",["T_OBJECT_OPERATOR","->",490],["T_STRING","getOptionText",490],"(",["T_VARIABLE","$value",490],")",";",["T_WHITESPACE","\n\n                        ",490],["T_IF","if",492],["T_WHITESPACE"," ",492],"(",["T_STRING","false",492],["T_IS_IDENTICAL","===",492],["T_VARIABLE","$option",492],")",["T_WHITESPACE"," ",492],"{",["T_WHITESPACE","\n                            ",492],["T_VARIABLE","$this",493],["T_OBJECT_OPERATOR","->",493],["T_STRING","addException",493],"(",["T_STRING","Mage",493],["T_DOUBLE_COLON","::",493],["T_STRING","helper",493],"(",["T_CONSTANT_ENCAPSED_STRING","'customer'",493],")",["T_OBJECT_OPERATOR","->",493],["T_STRING","__",493],"(",["T_CONSTANT_ENCAPSED_STRING","\"An invalid option ID is specified for %s (%s), skipping the record.\"",493],",",["T_WHITESPACE"," ",493],["T_VARIABLE","$field",493],",",["T_WHITESPACE"," ",493],["T_VARIABLE","$value",493],")",",",["T_WHITESPACE"," ",493],["T_STRING","Mage_Dataflow_Model_Convert_Exception",493],["T_DOUBLE_COLON","::",493],["T_STRING","ERROR",493],")",";",["T_WHITESPACE","\n                            ",493],["T_CONTINUE","continue",494],";",["T_WHITESPACE","\n                        ",494],"}",["T_WHITESPACE","\n                        ",495],["T_IF","if",496],["T_WHITESPACE"," ",496],"(",["T_STRING","is_array",496],"(",["T_VARIABLE","$option",496],")",")",["T_WHITESPACE"," ",496],"{",["T_WHITESPACE","\n                            ",496],["T_VARIABLE","$value",497],["T_WHITESPACE"," ",497],"=",["T_WHITESPACE"," ",497],["T_VARIABLE","$option",497],"[",["T_CONSTANT_ENCAPSED_STRING","'label'",497],"]",";",["T_WHITESPACE","\n                        ",497],"}",["T_WHITESPACE"," ",498],["T_ELSE","else",498],["T_WHITESPACE"," ",498],"{",["T_WHITESPACE","\n                            ",498],["T_VARIABLE","$value",499],["T_WHITESPACE"," ",499],"=",["T_WHITESPACE"," ",499],["T_VARIABLE","$option",499],";",["T_WHITESPACE","\n                        ",499],"}",["T_WHITESPACE","\n                    ",500],"}",["T_WHITESPACE","\n                    ",501],["T_VARIABLE","$row",502],"[",["T_VARIABLE","$field",502],"]",["T_WHITESPACE"," ",502],"=",["T_WHITESPACE"," ",502],["T_VARIABLE","$value",502],";",["T_WHITESPACE","\n\n                    ",502],["T_VARIABLE","$billingAddress",504],["T_WHITESPACE"," ",504],"=",["T_WHITESPACE"," ",504],["T_VARIABLE","$model",504],["T_OBJECT_OPERATOR","->",504],["T_STRING","getDefaultBillingAddress",504],"(",")",";",["T_WHITESPACE","\n                    ",504],["T_IF","if",505],"(",["T_VARIABLE","$billingAddress",505],["T_WHITESPACE"," ",505],["T_INSTANCEOF","instanceof",505],["T_WHITESPACE"," ",505],["T_STRING","Mage_Customer_Model_Address",505],")","{",["T_WHITESPACE","\n                        ",505],["T_VARIABLE","$billingAddress",506],["T_OBJECT_OPERATOR","->",506],["T_STRING","explodeStreetAddress",506],"(",")",";",["T_WHITESPACE","\n                        ",506],["T_VARIABLE","$row",507],"[",["T_CONSTANT_ENCAPSED_STRING","'billing_street1'",507],"]",["T_WHITESPACE","     ",507],"=",["T_WHITESPACE"," ",507],["T_VARIABLE","$billingAddress",507],["T_OBJECT_OPERATOR","->",507],["T_STRING","getStreet1",507],"(",")",";",["T_WHITESPACE","\n                        ",507],["T_VARIABLE","$row",508],"[",["T_CONSTANT_ENCAPSED_STRING","'billing_street2'",508],"]",["T_WHITESPACE","     ",508],"=",["T_WHITESPACE"," ",508],["T_VARIABLE","$billingAddress",508],["T_OBJECT_OPERATOR","->",508],["T_STRING","getStreet2",508],"(",")",";",["T_WHITESPACE","\n                        ",508],["T_VARIABLE","$row",509],"[",["T_CONSTANT_ENCAPSED_STRING","'billing_city'",509],"]",["T_WHITESPACE","        ",509],"=",["T_WHITESPACE"," ",509],["T_VARIABLE","$billingAddress",509],["T_OBJECT_OPERATOR","->",509],["T_STRING","getCity",509],"(",")",";",["T_WHITESPACE","\n                        ",509],["T_VARIABLE","$row",510],"[",["T_CONSTANT_ENCAPSED_STRING","'billing_region'",510],"]",["T_WHITESPACE","      ",510],"=",["T_WHITESPACE"," ",510],["T_VARIABLE","$billingAddress",510],["T_OBJECT_OPERATOR","->",510],["T_STRING","getRegion",510],"(",")",";",["T_WHITESPACE","\n                        ",510],["T_VARIABLE","$row",511],"[",["T_CONSTANT_ENCAPSED_STRING","'billing_country'",511],"]",["T_WHITESPACE","     ",511],"=",["T_WHITESPACE"," ",511],["T_VARIABLE","$billingAddress",511],["T_OBJECT_OPERATOR","->",511],["T_STRING","getCountry",511],"(",")",";",["T_WHITESPACE","\n                        ",511],["T_VARIABLE","$row",512],"[",["T_CONSTANT_ENCAPSED_STRING","'billing_postcode'",512],"]",["T_WHITESPACE","    ",512],"=",["T_WHITESPACE"," ",512],["T_VARIABLE","$billingAddress",512],["T_OBJECT_OPERATOR","->",512],["T_STRING","getPostcode",512],"(",")",";",["T_WHITESPACE","\n                        ",512],["T_VARIABLE","$row",513],"[",["T_CONSTANT_ENCAPSED_STRING","'billing_telephone'",513],"]",["T_WHITESPACE","   ",513],"=",["T_WHITESPACE"," ",513],["T_VARIABLE","$billingAddress",513],["T_OBJECT_OPERATOR","->",513],["T_STRING","getTelephone",513],"(",")",";",["T_WHITESPACE","\n                    ",513],"}",["T_WHITESPACE","\n\n                    ",514],["T_VARIABLE","$shippingAddress",516],["T_WHITESPACE"," ",516],"=",["T_WHITESPACE"," ",516],["T_VARIABLE","$model",516],["T_OBJECT_OPERATOR","->",516],["T_STRING","getDefaultShippingAddress",516],"(",")",";",["T_WHITESPACE","\n                    ",516],["T_IF","if",517],"(",["T_VARIABLE","$shippingAddress",517],["T_WHITESPACE"," ",517],["T_INSTANCEOF","instanceof",517],["T_WHITESPACE"," ",517],["T_STRING","Mage_Customer_Model_Address",517],")","{",["T_WHITESPACE","\n                        ",517],["T_VARIABLE","$shippingAddress",518],["T_OBJECT_OPERATOR","->",518],["T_STRING","explodeStreetAddress",518],"(",")",";",["T_WHITESPACE","\n                        ",518],["T_VARIABLE","$row",519],"[",["T_CONSTANT_ENCAPSED_STRING","'shipping_street1'",519],"]",["T_WHITESPACE","    ",519],"=",["T_WHITESPACE"," ",519],["T_VARIABLE","$shippingAddress",519],["T_OBJECT_OPERATOR","->",519],["T_STRING","getStreet1",519],"(",")",";",["T_WHITESPACE","\n                        ",519],["T_VARIABLE","$row",520],"[",["T_CONSTANT_ENCAPSED_STRING","'shipping_street2'",520],"]",["T_WHITESPACE","    ",520],"=",["T_WHITESPACE"," ",520],["T_VARIABLE","$shippingAddress",520],["T_OBJECT_OPERATOR","->",520],["T_STRING","getStreet2",520],"(",")",";",["T_WHITESPACE","\n                        ",520],["T_VARIABLE","$row",521],"[",["T_CONSTANT_ENCAPSED_STRING","'shipping_city'",521],"]",["T_WHITESPACE","       ",521],"=",["T_WHITESPACE"," ",521],["T_VARIABLE","$shippingAddress",521],["T_OBJECT_OPERATOR","->",521],["T_STRING","getCity",521],"(",")",";",["T_WHITESPACE","\n                        ",521],["T_VARIABLE","$row",522],"[",["T_CONSTANT_ENCAPSED_STRING","'shipping_region'",522],"]",["T_WHITESPACE","     ",522],"=",["T_WHITESPACE"," ",522],["T_VARIABLE","$shippingAddress",522],["T_OBJECT_OPERATOR","->",522],["T_STRING","getRegion",522],"(",")",";",["T_WHITESPACE","\n                        ",522],["T_VARIABLE","$row",523],"[",["T_CONSTANT_ENCAPSED_STRING","'shipping_country'",523],"]",["T_WHITESPACE","    ",523],"=",["T_WHITESPACE"," ",523],["T_VARIABLE","$shippingAddress",523],["T_OBJECT_OPERATOR","->",523],["T_STRING","getCountry",523],"(",")",";",["T_WHITESPACE","\n                        ",523],["T_VARIABLE","$row",524],"[",["T_CONSTANT_ENCAPSED_STRING","'shipping_postcode'",524],"]",["T_WHITESPACE","   ",524],"=",["T_WHITESPACE"," ",524],["T_VARIABLE","$shippingAddress",524],["T_OBJECT_OPERATOR","->",524],["T_STRING","getPostcode",524],"(",")",";",["T_WHITESPACE","\n                        ",524],["T_VARIABLE","$row",525],"[",["T_CONSTANT_ENCAPSED_STRING","'shipping_telephone'",525],"]",["T_WHITESPACE","  ",525],"=",["T_WHITESPACE"," ",525],["T_VARIABLE","$shippingAddress",525],["T_OBJECT_OPERATOR","->",525],["T_STRING","getTelephone",525],"(",")",";",["T_WHITESPACE","\n                    ",525],"}",["T_WHITESPACE","\n\n                    ",526],["T_IF","if",528],"(",["T_VARIABLE","$model",528],["T_OBJECT_OPERATOR","->",528],["T_STRING","getGroupId",528],"(",")",")","{",["T_WHITESPACE","\n                        ",528],["T_VARIABLE","$group",529],["T_WHITESPACE"," ",529],"=",["T_WHITESPACE"," ",529],["T_STRING","Mage",529],["T_DOUBLE_COLON","::",529],["T_STRING","getResourceModel",529],"(",["T_CONSTANT_ENCAPSED_STRING","'customer\/group_collection'",529],")",["T_WHITESPACE","\n                        ",529],["T_OBJECT_OPERATOR","->",530],["T_STRING","addFilter",530],"(",["T_CONSTANT_ENCAPSED_STRING","'customer_group_id'",530],",",["T_VARIABLE","$model",530],["T_OBJECT_OPERATOR","->",530],["T_STRING","getGroupId",530],"(",")",")",["T_WHITESPACE","\n                        ",530],["T_OBJECT_OPERATOR","->",531],["T_STRING","load",531],"(",")",";",["T_WHITESPACE","\n                        ",531],["T_VARIABLE","$row",532],"[",["T_CONSTANT_ENCAPSED_STRING","'group'",532],"]","=",["T_VARIABLE","$group",532],["T_OBJECT_OPERATOR","->",532],["T_STRING","getFirstItem",532],"(",")",["T_OBJECT_OPERATOR","->",532],["T_STRING","getData",532],"(",["T_CONSTANT_ENCAPSED_STRING","'customer_group_code'",532],")",";",["T_WHITESPACE","\n                    ",532],"}",["T_WHITESPACE","\n                ",533],"}",["T_WHITESPACE","\n                ",534],["T_VARIABLE","$subscriber",535],["T_WHITESPACE"," ",535],"=",["T_WHITESPACE"," ",535],["T_STRING","Mage",535],["T_DOUBLE_COLON","::",535],["T_STRING","getModel",535],"(",["T_CONSTANT_ENCAPSED_STRING","'newsletter\/subscriber'",535],")",["T_OBJECT_OPERATOR","->",535],["T_STRING","loadByCustomer",535],"(",["T_VARIABLE","$model",535],")",";",["T_WHITESPACE","\n                ",535],["T_IF","if",536],["T_WHITESPACE"," ",536],"(",["T_VARIABLE","$subscriber",536],["T_OBJECT_OPERATOR","->",536],["T_STRING","getId",536],"(",")",")",["T_WHITESPACE"," ",536],"{",["T_WHITESPACE","\n                    ",536],["T_IF","if",537],["T_WHITESPACE"," ",537],"(",["T_VARIABLE","$subscriber",537],["T_OBJECT_OPERATOR","->",537],["T_STRING","getSubscriberStatus",537],"(",")",["T_WHITESPACE"," ",537],["T_IS_EQUAL","==",537],["T_WHITESPACE"," ",537],["T_STRING","Mage_Newsletter_Model_Subscriber",537],["T_DOUBLE_COLON","::",537],["T_STRING","STATUS_SUBSCRIBED",537],")",["T_WHITESPACE"," ",537],"{",["T_WHITESPACE","\n                        ",537],["T_VARIABLE","$row",538],"[",["T_CONSTANT_ENCAPSED_STRING","'is_subscribed'",538],"]",["T_WHITESPACE"," ",538],"=",["T_WHITESPACE"," ",538],["T_STRING","Mage_Customer_Model_Customer",538],["T_DOUBLE_COLON","::",538],["T_STRING","SUBSCRIBED_YES",538],";",["T_WHITESPACE","\n                    ",538],"}",["T_WHITESPACE"," ",539],["T_ELSE","else",539],["T_WHITESPACE"," ",539],"{",["T_WHITESPACE","\n                        ",539],["T_VARIABLE","$row",540],"[",["T_CONSTANT_ENCAPSED_STRING","'is_subscribed'",540],"]",["T_WHITESPACE"," ",540],"=",["T_WHITESPACE"," ",540],["T_STRING","Mage_Customer_Model_Customer",540],["T_DOUBLE_COLON","::",540],["T_STRING","SUBSCRIBED_NO",540],";",["T_WHITESPACE","\n                    ",540],"}",["T_WHITESPACE","\n                ",541],"}",["T_WHITESPACE","\n                ",542],["T_IF","if",543],"(","!",["T_ISSET","isset",543],"(",["T_VARIABLE","$row",543],"[",["T_CONSTANT_ENCAPSED_STRING","'created_in'",543],"]",")",")","{",["T_WHITESPACE","\n                    ",543],["T_VARIABLE","$row",544],"[",["T_CONSTANT_ENCAPSED_STRING","'created_in'",544],"]",["T_WHITESPACE"," ",544],"=",["T_WHITESPACE"," ",544],["T_CONSTANT_ENCAPSED_STRING","'Admin'",544],";",["T_WHITESPACE","\n                ",544],"}",["T_WHITESPACE","\n                ",545],["T_VARIABLE","$data",546],"[","]",["T_WHITESPACE"," ",546],"=",["T_WHITESPACE"," ",546],["T_VARIABLE","$row",546],";",["T_WHITESPACE","\n\n            ",546],"}",["T_WHITESPACE","\n",548],["T_COMMENT","\/\/       }\n",549],["T_WHITESPACE","        ",550],["T_VARIABLE","$this",550],["T_OBJECT_OPERATOR","->",550],["T_STRING","setData",550],"(",["T_VARIABLE","$data",550],")",";",["T_WHITESPACE","\n        ",550],["T_RETURN","return",551],["T_WHITESPACE"," ",551],["T_VARIABLE","$this",551],";",["T_WHITESPACE","\n    ",551],"}",["T_WHITESPACE","\n\n    ",552],["T_DOC_COMMENT","\/**\n     * @deprecated not used anymore\n     *\/",554],["T_WHITESPACE","\n    ",556],["T_PUBLIC","public",557],["T_WHITESPACE"," ",557],["T_FUNCTION","function",557],["T_WHITESPACE"," ",557],["T_STRING","parse",557],"(",")",["T_WHITESPACE","\n    ",557],"{",["T_WHITESPACE","\n        ",558],["T_VARIABLE","$data",559],["T_WHITESPACE"," ",559],"=",["T_WHITESPACE"," ",559],["T_VARIABLE","$this",559],["T_OBJECT_OPERATOR","->",559],["T_STRING","getData",559],"(",")",";",["T_WHITESPACE","\n\n        ",559],["T_VARIABLE","$entityTypeId",561],["T_WHITESPACE"," ",561],"=",["T_WHITESPACE"," ",561],["T_STRING","Mage",561],["T_DOUBLE_COLON","::",561],["T_STRING","getSingleton",561],"(",["T_CONSTANT_ENCAPSED_STRING","'eav\/config'",561],")",["T_OBJECT_OPERATOR","->",561],["T_STRING","getEntityType",561],"(",["T_CONSTANT_ENCAPSED_STRING","'customer'",561],")",["T_OBJECT_OPERATOR","->",561],["T_STRING","getId",561],"(",")",";",["T_WHITESPACE","\n        ",561],["T_VARIABLE","$result",562],["T_WHITESPACE"," ",562],"=",["T_WHITESPACE"," ",562],["T_ARRAY","array",562],"(",")",";",["T_WHITESPACE","\n        ",562],["T_FOREACH","foreach",563],["T_WHITESPACE"," ",563],"(",["T_VARIABLE","$data",563],["T_WHITESPACE"," ",563],["T_AS","as",563],["T_WHITESPACE"," ",563],["T_VARIABLE","$i",563],["T_DOUBLE_ARROW","=>",563],["T_VARIABLE","$row",563],")",["T_WHITESPACE"," ",563],"{",["T_WHITESPACE","\n            ",563],["T_VARIABLE","$this",564],["T_OBJECT_OPERATOR","->",564],["T_STRING","setPosition",564],"(",["T_CONSTANT_ENCAPSED_STRING","'Line: '",564],".","(",["T_VARIABLE","$i",564],"+",["T_LNUMBER","1",564],")",")",";",["T_WHITESPACE","\n            ",564],["T_TRY","try",565],["T_WHITESPACE"," ",565],"{",["T_WHITESPACE","\n\n                ",565],["T_COMMENT","\/\/ validate SKU\n",567],["T_WHITESPACE","                ",568],["T_IF","if",568],["T_WHITESPACE"," ",568],"(",["T_EMPTY","empty",568],"(",["T_VARIABLE","$row",568],"[",["T_CONSTANT_ENCAPSED_STRING","'email'",568],"]",")",")",["T_WHITESPACE"," ",568],"{",["T_WHITESPACE","\n                    ",568],["T_VARIABLE","$this",569],["T_OBJECT_OPERATOR","->",569],["T_STRING","addException",569],"(",["T_STRING","Mage",569],["T_DOUBLE_COLON","::",569],["T_STRING","helper",569],"(",["T_CONSTANT_ENCAPSED_STRING","'customer'",569],")",["T_OBJECT_OPERATOR","->",569],["T_STRING","__",569],"(",["T_CONSTANT_ENCAPSED_STRING","'Missing email, skipping the record.'",569],")",",",["T_WHITESPACE"," ",569],["T_STRING","Varien_Convert_Exception",569],["T_DOUBLE_COLON","::",569],["T_STRING","ERROR",569],")",";",["T_WHITESPACE","\n                    ",569],["T_CONTINUE","continue",570],";",["T_WHITESPACE","\n                ",570],"}",["T_WHITESPACE","\n                ",571],["T_VARIABLE","$this",572],["T_OBJECT_OPERATOR","->",572],["T_STRING","setPosition",572],"(",["T_CONSTANT_ENCAPSED_STRING","'Line: '",572],".","(",["T_VARIABLE","$i",572],"+",["T_LNUMBER","1",572],")",".",["T_CONSTANT_ENCAPSED_STRING","', email: '",572],".",["T_VARIABLE","$row",572],"[",["T_CONSTANT_ENCAPSED_STRING","'email'",572],"]",")",";",["T_WHITESPACE","\n\n                ",572],["T_COMMENT","\/\/ try to get entity_id by sku if not set\n",574],["T_WHITESPACE","                ",575],["T_COMMENT","\/*\n                if (empty($row['entity_id'])) {\n                    $row['entity_id'] = $this->getResource()->getProductIdBySku($row['email']);\n                }\n                *\/",575],["T_WHITESPACE","\n\n                ",579],["T_COMMENT","\/\/ if attribute_set not set use default\n",581],["T_WHITESPACE","                ",582],["T_IF","if",582],["T_WHITESPACE"," ",582],"(",["T_EMPTY","empty",582],"(",["T_VARIABLE","$row",582],"[",["T_CONSTANT_ENCAPSED_STRING","'attribute_set'",582],"]",")",")",["T_WHITESPACE"," ",582],"{",["T_WHITESPACE","\n                    ",582],["T_VARIABLE","$row",583],"[",["T_CONSTANT_ENCAPSED_STRING","'attribute_set'",583],"]",["T_WHITESPACE"," ",583],"=",["T_WHITESPACE"," ",583],["T_CONSTANT_ENCAPSED_STRING","'Default'",583],";",["T_WHITESPACE","\n                ",583],"}",["T_WHITESPACE","\n\n                ",584],["T_COMMENT","\/\/ get attribute_set_id, if not throw error\n",586],["T_WHITESPACE","                ",587],["T_VARIABLE","$row",587],"[",["T_CONSTANT_ENCAPSED_STRING","'attribute_set_id'",587],"]",["T_WHITESPACE"," ",587],"=",["T_WHITESPACE"," ",587],["T_VARIABLE","$this",587],["T_OBJECT_OPERATOR","->",587],["T_STRING","getAttributeSetId",587],"(",["T_VARIABLE","$entityTypeId",587],",",["T_WHITESPACE"," ",587],["T_VARIABLE","$row",587],"[",["T_CONSTANT_ENCAPSED_STRING","'attribute_set'",587],"]",")",";",["T_WHITESPACE","\n                ",587],["T_IF","if",588],["T_WHITESPACE"," ",588],"(","!",["T_VARIABLE","$row",588],"[",["T_CONSTANT_ENCAPSED_STRING","'attribute_set_id'",588],"]",")",["T_WHITESPACE"," ",588],"{",["T_WHITESPACE","\n                    ",588],["T_VARIABLE","$this",589],["T_OBJECT_OPERATOR","->",589],["T_STRING","addException",589],"(",["T_STRING","Mage",589],["T_DOUBLE_COLON","::",589],["T_STRING","helper",589],"(",["T_CONSTANT_ENCAPSED_STRING","'customer'",589],")",["T_OBJECT_OPERATOR","->",589],["T_STRING","__",589],"(",["T_CONSTANT_ENCAPSED_STRING","\"Invalid attribute set specified, skipping the record.\"",589],")",",",["T_WHITESPACE"," ",589],["T_STRING","Varien_Convert_Exception",589],["T_DOUBLE_COLON","::",589],["T_STRING","ERROR",589],")",";",["T_WHITESPACE","\n                    ",589],["T_CONTINUE","continue",590],";",["T_WHITESPACE","\n                ",590],"}",["T_WHITESPACE","\n\n                ",591],["T_IF","if",593],["T_WHITESPACE"," ",593],"(",["T_EMPTY","empty",593],"(",["T_VARIABLE","$row",593],"[",["T_CONSTANT_ENCAPSED_STRING","'group'",593],"]",")",")",["T_WHITESPACE"," ",593],"{",["T_WHITESPACE","\n                    ",593],["T_VARIABLE","$row",594],"[",["T_CONSTANT_ENCAPSED_STRING","'group'",594],"]",["T_WHITESPACE"," ",594],"=",["T_WHITESPACE"," ",594],["T_CONSTANT_ENCAPSED_STRING","'General'",594],";",["T_WHITESPACE","\n                ",594],"}",["T_WHITESPACE","\n\n                ",595],["T_IF","if",597],["T_WHITESPACE"," ",597],"(",["T_EMPTY","empty",597],"(",["T_VARIABLE","$row",597],"[",["T_CONSTANT_ENCAPSED_STRING","'firstname'",597],"]",")",")",["T_WHITESPACE"," ",597],"{",["T_WHITESPACE","\n                    ",597],["T_VARIABLE","$this",598],["T_OBJECT_OPERATOR","->",598],["T_STRING","addException",598],"(",["T_STRING","Mage",598],["T_DOUBLE_COLON","::",598],["T_STRING","helper",598],"(",["T_CONSTANT_ENCAPSED_STRING","'customer'",598],")",["T_OBJECT_OPERATOR","->",598],["T_STRING","__",598],"(",["T_CONSTANT_ENCAPSED_STRING","'Missing firstname, skipping the record.'",598],")",",",["T_WHITESPACE"," ",598],["T_STRING","Varien_Convert_Exception",598],["T_DOUBLE_COLON","::",598],["T_STRING","ERROR",598],")",";",["T_WHITESPACE","\n                    ",598],["T_CONTINUE","continue",599],";",["T_WHITESPACE","\n                ",599],"}",["T_WHITESPACE","\n                ",600],["T_COMMENT","\/\/$this->setPosition('Line: '.($i+1).', Firstname: '.$row['firstname']);\n",601],["T_WHITESPACE","\n                ",602],["T_IF","if",603],["T_WHITESPACE"," ",603],"(",["T_EMPTY","empty",603],"(",["T_VARIABLE","$row",603],"[",["T_CONSTANT_ENCAPSED_STRING","'lastname'",603],"]",")",")",["T_WHITESPACE"," ",603],"{",["T_WHITESPACE","\n                    ",603],["T_VARIABLE","$this",604],["T_OBJECT_OPERATOR","->",604],["T_STRING","addException",604],"(",["T_STRING","Mage",604],["T_DOUBLE_COLON","::",604],["T_STRING","helper",604],"(",["T_CONSTANT_ENCAPSED_STRING","'customer'",604],")",["T_OBJECT_OPERATOR","->",604],["T_STRING","__",604],"(",["T_CONSTANT_ENCAPSED_STRING","'Missing lastname, skipping the record.'",604],")",",",["T_WHITESPACE"," ",604],["T_STRING","Varien_Convert_Exception",604],["T_DOUBLE_COLON","::",604],["T_STRING","ERROR",604],")",";",["T_WHITESPACE","\n                    ",604],["T_CONTINUE","continue",605],";",["T_WHITESPACE","\n                ",605],"}",["T_WHITESPACE","\n                ",606],["T_COMMENT","\/\/$this->setPosition('Line: '.($i+1).', Lastname: '.$row['lastname']);\n",607],["T_WHITESPACE","\n                ",608],["T_COMMENT","\/*\n                \/\/ get product type_id, if not throw error\n                $row['type_id'] = $this->getProductTypeId($row['type']);\n                if (!$row['type_id']) {\n                    $this->addException(Mage::helper('catalog')->__(\"Invalid product type specified, skipping the record.\"), Varien_Convert_Exception::ERROR);\n                    continue;\n                }\n                *\/",609],["T_WHITESPACE","\n\n                ",616],["T_COMMENT","\/\/ get store ids\n",618],["T_WHITESPACE","                ",619],["T_VARIABLE","$storeIds",619],["T_WHITESPACE"," ",619],"=",["T_WHITESPACE"," ",619],["T_VARIABLE","$this",619],["T_OBJECT_OPERATOR","->",619],["T_STRING","getStoreIds",619],"(",["T_ISSET","isset",619],"(",["T_VARIABLE","$row",619],"[",["T_CONSTANT_ENCAPSED_STRING","'store'",619],"]",")",["T_WHITESPACE"," ",619],"?",["T_WHITESPACE"," ",619],["T_VARIABLE","$row",619],"[",["T_CONSTANT_ENCAPSED_STRING","'store'",619],"]",["T_WHITESPACE"," ",619],":",["T_WHITESPACE"," ",619],["T_VARIABLE","$this",619],["T_OBJECT_OPERATOR","->",619],["T_STRING","getVar",619],"(",["T_CONSTANT_ENCAPSED_STRING","'store'",619],")",")",";",["T_WHITESPACE","\n                ",619],["T_IF","if",620],["T_WHITESPACE"," ",620],"(","!",["T_VARIABLE","$storeIds",620],")",["T_WHITESPACE"," ",620],"{",["T_WHITESPACE","\n                    ",620],["T_VARIABLE","$this",621],["T_OBJECT_OPERATOR","->",621],["T_STRING","addException",621],"(",["T_STRING","Mage",621],["T_DOUBLE_COLON","::",621],["T_STRING","helper",621],"(",["T_CONSTANT_ENCAPSED_STRING","'customer'",621],")",["T_OBJECT_OPERATOR","->",621],["T_STRING","__",621],"(",["T_CONSTANT_ENCAPSED_STRING","\"Invalid store specified, skipping the record.\"",621],")",",",["T_WHITESPACE"," ",621],["T_STRING","Varien_Convert_Exception",621],["T_DOUBLE_COLON","::",621],["T_STRING","ERROR",621],")",";",["T_WHITESPACE","\n                    ",621],["T_CONTINUE","continue",622],";",["T_WHITESPACE","\n                ",622],"}",["T_WHITESPACE","\n\n                ",623],["T_COMMENT","\/\/ import data\n",625],["T_WHITESPACE","                ",626],["T_VARIABLE","$rowError",626],["T_WHITESPACE"," ",626],"=",["T_WHITESPACE"," ",626],["T_STRING","false",626],";",["T_WHITESPACE","\n                ",626],["T_FOREACH","foreach",627],["T_WHITESPACE"," ",627],"(",["T_VARIABLE","$storeIds",627],["T_WHITESPACE"," ",627],["T_AS","as",627],["T_WHITESPACE"," ",627],["T_VARIABLE","$storeId",627],")",["T_WHITESPACE"," ",627],"{",["T_WHITESPACE","\n                    ",627],["T_VARIABLE","$collection",628],["T_WHITESPACE"," ",628],"=",["T_WHITESPACE"," ",628],["T_VARIABLE","$this",628],["T_OBJECT_OPERATOR","->",628],["T_STRING","getCollection",628],"(",["T_VARIABLE","$storeId",628],")",";",["T_WHITESPACE","\n                    ",628],["T_COMMENT","\/\/print_r($collection);\n",629],["T_WHITESPACE","                    ",630],["T_VARIABLE","$entity",630],["T_WHITESPACE"," ",630],"=",["T_WHITESPACE"," ",630],["T_VARIABLE","$collection",630],["T_OBJECT_OPERATOR","->",630],["T_STRING","getEntity",630],"(",")",";",["T_WHITESPACE","\n\n                    ",630],["T_VARIABLE","$model",632],["T_WHITESPACE"," ",632],"=",["T_WHITESPACE"," ",632],["T_STRING","Mage",632],["T_DOUBLE_COLON","::",632],["T_STRING","getModel",632],"(",["T_CONSTANT_ENCAPSED_STRING","'customer\/customer'",632],")",";",["T_WHITESPACE","\n                    ",632],["T_VARIABLE","$model",633],["T_OBJECT_OPERATOR","->",633],["T_STRING","setStoreId",633],"(",["T_VARIABLE","$storeId",633],")",";",["T_WHITESPACE","\n                    ",633],["T_IF","if",634],["T_WHITESPACE"," ",634],"(","!",["T_EMPTY","empty",634],"(",["T_VARIABLE","$row",634],"[",["T_CONSTANT_ENCAPSED_STRING","'entity_id'",634],"]",")",")",["T_WHITESPACE"," ",634],"{",["T_WHITESPACE","\n                        ",634],["T_VARIABLE","$model",635],["T_OBJECT_OPERATOR","->",635],["T_STRING","load",635],"(",["T_VARIABLE","$row",635],"[",["T_CONSTANT_ENCAPSED_STRING","'entity_id'",635],"]",")",";",["T_WHITESPACE","\n                    ",635],"}",["T_WHITESPACE","\n                    ",636],["T_FOREACH","foreach",637],["T_WHITESPACE"," ",637],"(",["T_VARIABLE","$row",637],["T_WHITESPACE"," ",637],["T_AS","as",637],["T_WHITESPACE"," ",637],["T_VARIABLE","$field",637],["T_DOUBLE_ARROW","=>",637],["T_VARIABLE","$value",637],")",["T_WHITESPACE"," ",637],"{",["T_WHITESPACE","\n                        ",637],["T_VARIABLE","$attribute",638],["T_WHITESPACE"," ",638],"=",["T_WHITESPACE"," ",638],["T_VARIABLE","$entity",638],["T_OBJECT_OPERATOR","->",638],["T_STRING","getAttribute",638],"(",["T_VARIABLE","$field",638],")",";",["T_WHITESPACE","\n                        ",638],["T_IF","if",639],["T_WHITESPACE"," ",639],"(","!",["T_VARIABLE","$attribute",639],")",["T_WHITESPACE"," ",639],"{",["T_WHITESPACE","\n                            ",639],["T_CONTINUE","continue",640],";",["T_WHITESPACE","\n                            ",640],["T_COMMENT","#$this->addException(Mage::helper('catalog')->__(\"Unknown attribute: %s.\", $field), Varien_Convert_Exception::ERROR);\n",641],["T_WHITESPACE","\n                        ",642],"}",["T_WHITESPACE","\n\n                        ",643],["T_IF","if",645],["T_WHITESPACE"," ",645],"(",["T_VARIABLE","$attribute",645],["T_OBJECT_OPERATOR","->",645],["T_STRING","usesSource",645],"(",")",")",["T_WHITESPACE"," ",645],"{",["T_WHITESPACE","\n                            ",645],["T_VARIABLE","$source",646],["T_WHITESPACE"," ",646],"=",["T_WHITESPACE"," ",646],["T_VARIABLE","$attribute",646],["T_OBJECT_OPERATOR","->",646],["T_STRING","getSource",646],"(",")",";",["T_WHITESPACE","\n                            ",646],["T_VARIABLE","$optionId",647],["T_WHITESPACE"," ",647],"=",["T_WHITESPACE"," ",647],["T_VARIABLE","$this",647],["T_OBJECT_OPERATOR","->",647],["T_STRING","getSourceOptionId",647],"(",["T_VARIABLE","$source",647],",",["T_WHITESPACE"," ",647],["T_VARIABLE","$value",647],")",";",["T_WHITESPACE","\n                            ",647],["T_IF","if",648],["T_WHITESPACE"," ",648],"(",["T_STRING","is_null",648],"(",["T_VARIABLE","$optionId",648],")",")",["T_WHITESPACE"," ",648],"{",["T_WHITESPACE","\n                                ",648],["T_VARIABLE","$rowError",649],["T_WHITESPACE"," ",649],"=",["T_WHITESPACE"," ",649],["T_STRING","true",649],";",["T_WHITESPACE","\n                                ",649],["T_VARIABLE","$this",650],["T_OBJECT_OPERATOR","->",650],["T_STRING","addException",650],"(",["T_STRING","Mage",650],["T_DOUBLE_COLON","::",650],["T_STRING","helper",650],"(",["T_CONSTANT_ENCAPSED_STRING","'customer'",650],")",["T_OBJECT_OPERATOR","->",650],["T_STRING","__",650],"(",["T_CONSTANT_ENCAPSED_STRING","\"Invalid attribute option specified for attribute %s (%s), skipping the record.\"",650],",",["T_WHITESPACE"," ",650],["T_VARIABLE","$field",650],",",["T_WHITESPACE"," ",650],["T_VARIABLE","$value",650],")",",",["T_WHITESPACE"," ",650],["T_STRING","Varien_Convert_Exception",650],["T_DOUBLE_COLON","::",650],["T_STRING","ERROR",650],")",";",["T_WHITESPACE","\n                                ",650],["T_CONTINUE","continue",651],";",["T_WHITESPACE","\n                            ",651],"}",["T_WHITESPACE","\n                            ",652],["T_VARIABLE","$value",653],["T_WHITESPACE"," ",653],"=",["T_WHITESPACE"," ",653],["T_VARIABLE","$optionId",653],";",["T_WHITESPACE","\n                        ",653],"}",["T_WHITESPACE","\n                        ",654],["T_VARIABLE","$model",655],["T_OBJECT_OPERATOR","->",655],["T_STRING","setData",655],"(",["T_VARIABLE","$field",655],",",["T_WHITESPACE"," ",655],["T_VARIABLE","$value",655],")",";",["T_WHITESPACE","\n\n                    ",655],"}",["T_COMMENT","\/\/foreach ($row as $field=>$value)\n",657],["T_WHITESPACE","\n\n                    ",658],["T_VARIABLE","$billingAddress",660],["T_WHITESPACE"," ",660],"=",["T_WHITESPACE"," ",660],["T_VARIABLE","$model",660],["T_OBJECT_OPERATOR","->",660],["T_STRING","getPrimaryBillingAddress",660],"(",")",";",["T_WHITESPACE","\n                    ",660],["T_VARIABLE","$customer",661],["T_WHITESPACE"," ",661],"=",["T_WHITESPACE"," ",661],["T_STRING","Mage",661],["T_DOUBLE_COLON","::",661],["T_STRING","getModel",661],"(",["T_CONSTANT_ENCAPSED_STRING","'customer\/customer'",661],")",["T_OBJECT_OPERATOR","->",661],["T_STRING","load",661],"(",["T_VARIABLE","$model",661],["T_OBJECT_OPERATOR","->",661],["T_STRING","getId",661],"(",")",")",";",["T_WHITESPACE","\n\n\n                    ",661],["T_IF","if",664],["T_WHITESPACE"," ",664],"(","!",["T_VARIABLE","$billingAddress",664],["T_WHITESPACE","  ",664],["T_INSTANCEOF","instanceof",664],["T_WHITESPACE"," ",664],["T_STRING","Mage_Customer_Model_Address",664],")",["T_WHITESPACE"," ",664],"{",["T_WHITESPACE","\n                        ",664],["T_VARIABLE","$billingAddress",665],["T_WHITESPACE"," ",665],"=",["T_WHITESPACE"," ",665],["T_STRING","Mage",665],["T_DOUBLE_COLON","::",665],["T_STRING","getModel",665],"(",["T_CONSTANT_ENCAPSED_STRING","'customer\/address'",665],")",";",["T_WHITESPACE","\n                        ",665],["T_IF","if",666],["T_WHITESPACE"," ",666],"(",["T_VARIABLE","$customer",666],["T_OBJECT_OPERATOR","->",666],["T_STRING","getId",666],"(",")",["T_WHITESPACE"," ",666],["T_BOOLEAN_AND","&&",666],["T_WHITESPACE"," ",666],["T_VARIABLE","$customer",666],["T_OBJECT_OPERATOR","->",666],["T_STRING","getDefaultBilling",666],"(",")",")",["T_WHITESPACE"," ",666],"{",["T_WHITESPACE","\n                            ",666],["T_VARIABLE","$billingAddress",667],["T_OBJECT_OPERATOR","->",667],["T_STRING","setId",667],"(",["T_VARIABLE","$customer",667],["T_OBJECT_OPERATOR","->",667],["T_STRING","getDefaultBilling",667],"(",")",")",";",["T_WHITESPACE","\n                        ",667],"}",["T_WHITESPACE","\n                    ",668],"}",["T_WHITESPACE","\n\n                    ",669],["T_VARIABLE","$regions",671],["T_WHITESPACE"," ",671],"=",["T_WHITESPACE"," ",671],["T_STRING","Mage",671],["T_DOUBLE_COLON","::",671],["T_STRING","getResourceModel",671],"(",["T_CONSTANT_ENCAPSED_STRING","'directory\/region_collection'",671],")",["T_WHITESPACE","\n                        ",671],["T_OBJECT_OPERATOR","->",672],["T_STRING","addRegionNameFilter",672],"(",["T_VARIABLE","$row",672],"[",["T_CONSTANT_ENCAPSED_STRING","'billing_region'",672],"]",")",["T_WHITESPACE","\n                        ",672],["T_OBJECT_OPERATOR","->",673],["T_STRING","load",673],"(",")",";",["T_WHITESPACE","\n                    ",673],["T_IF","if",674],["T_WHITESPACE"," ",674],"(",["T_VARIABLE","$regions",674],")",["T_WHITESPACE"," ",674],["T_FOREACH","foreach",674],"(",["T_VARIABLE","$regions",674],["T_WHITESPACE"," ",674],["T_AS","as",674],["T_WHITESPACE"," ",674],["T_VARIABLE","$region",674],")",["T_WHITESPACE"," ",674],"{",["T_WHITESPACE","\n                       ",674],["T_VARIABLE","$regionId",675],["T_WHITESPACE"," ",675],"=",["T_WHITESPACE"," ",675],["T_VARIABLE","$region",675],["T_OBJECT_OPERATOR","->",675],["T_STRING","getId",675],"(",")",";",["T_WHITESPACE","\n                    ",675],"}",["T_WHITESPACE","\n\n                    ",676],["T_VARIABLE","$billingAddress",678],["T_OBJECT_OPERATOR","->",678],["T_STRING","setFirstname",678],"(",["T_VARIABLE","$row",678],"[",["T_CONSTANT_ENCAPSED_STRING","'firstname'",678],"]",")",";",["T_WHITESPACE","\n                    ",678],["T_VARIABLE","$billingAddress",679],["T_OBJECT_OPERATOR","->",679],["T_STRING","setLastname",679],"(",["T_VARIABLE","$row",679],"[",["T_CONSTANT_ENCAPSED_STRING","'lastname'",679],"]",")",";",["T_WHITESPACE","\n                    ",679],["T_VARIABLE","$billingAddress",680],["T_OBJECT_OPERATOR","->",680],["T_STRING","setCity",680],"(",["T_VARIABLE","$row",680],"[",["T_CONSTANT_ENCAPSED_STRING","'billing_city'",680],"]",")",";",["T_WHITESPACE","\n                    ",680],["T_VARIABLE","$billingAddress",681],["T_OBJECT_OPERATOR","->",681],["T_STRING","setRegion",681],"(",["T_VARIABLE","$row",681],"[",["T_CONSTANT_ENCAPSED_STRING","'billing_region'",681],"]",")",";",["T_WHITESPACE","\n                    ",681],["T_VARIABLE","$billingAddress",682],["T_OBJECT_OPERATOR","->",682],["T_STRING","setRegionId",682],"(",["T_VARIABLE","$regionId",682],")",";",["T_WHITESPACE","\n                    ",682],["T_VARIABLE","$billingAddress",683],["T_OBJECT_OPERATOR","->",683],["T_STRING","setCountryId",683],"(",["T_VARIABLE","$row",683],"[",["T_CONSTANT_ENCAPSED_STRING","'billing_country'",683],"]",")",";",["T_WHITESPACE","\n                    ",683],["T_VARIABLE","$billingAddress",684],["T_OBJECT_OPERATOR","->",684],["T_STRING","setPostcode",684],"(",["T_VARIABLE","$row",684],"[",["T_CONSTANT_ENCAPSED_STRING","'billing_postcode'",684],"]",")",";",["T_WHITESPACE","\n                    ",684],["T_VARIABLE","$billingAddress",685],["T_OBJECT_OPERATOR","->",685],["T_STRING","setStreet",685],"(",["T_ARRAY","array",685],"(",["T_VARIABLE","$row",685],"[",["T_CONSTANT_ENCAPSED_STRING","'billing_street1'",685],"]",",",["T_VARIABLE","$row",685],"[",["T_CONSTANT_ENCAPSED_STRING","'billing_street2'",685],"]",")",")",";",["T_WHITESPACE","\n                    ",685],["T_IF","if",686],["T_WHITESPACE"," ",686],"(","!",["T_EMPTY","empty",686],"(",["T_VARIABLE","$row",686],"[",["T_CONSTANT_ENCAPSED_STRING","'billing_telephone'",686],"]",")",")",["T_WHITESPACE"," ",686],"{",["T_WHITESPACE","\n                        ",686],["T_VARIABLE","$billingAddress",687],["T_OBJECT_OPERATOR","->",687],["T_STRING","setTelephone",687],"(",["T_VARIABLE","$row",687],"[",["T_CONSTANT_ENCAPSED_STRING","'billing_telephone'",687],"]",")",";",["T_WHITESPACE","\n                    ",687],"}",["T_WHITESPACE","\n\n                    ",688],["T_IF","if",690],["T_WHITESPACE"," ",690],"(","!",["T_VARIABLE","$model",690],["T_OBJECT_OPERATOR","->",690],["T_STRING","getDefaultBilling",690],"(",")",")",["T_WHITESPACE"," ",690],"{",["T_WHITESPACE","\n                        ",690],["T_VARIABLE","$billingAddress",691],["T_OBJECT_OPERATOR","->",691],["T_STRING","setCustomerId",691],"(",["T_VARIABLE","$model",691],["T_OBJECT_OPERATOR","->",691],["T_STRING","getId",691],"(",")",")",";",["T_WHITESPACE","\n                        ",691],["T_VARIABLE","$billingAddress",692],["T_OBJECT_OPERATOR","->",692],["T_STRING","setIsDefaultBilling",692],"(",["T_STRING","true",692],")",";",["T_WHITESPACE","\n                        ",692],["T_VARIABLE","$billingAddress",693],["T_OBJECT_OPERATOR","->",693],["T_STRING","save",693],"(",")",";",["T_WHITESPACE","\n                        ",693],["T_VARIABLE","$model",694],["T_OBJECT_OPERATOR","->",694],["T_STRING","setDefaultBilling",694],"(",["T_VARIABLE","$billingAddress",694],["T_OBJECT_OPERATOR","->",694],["T_STRING","getId",694],"(",")",")",";",["T_WHITESPACE","\n                        ",694],["T_VARIABLE","$model",695],["T_OBJECT_OPERATOR","->",695],["T_STRING","addAddress",695],"(",["T_VARIABLE","$billingAddress",695],")",";",["T_WHITESPACE","\n                        ",695],["T_IF","if",696],["T_WHITESPACE"," ",696],"(",["T_VARIABLE","$customer",696],["T_OBJECT_OPERATOR","->",696],["T_STRING","getDefaultBilling",696],"(",")",")",["T_WHITESPACE"," ",696],"{",["T_WHITESPACE","\n                            ",696],["T_VARIABLE","$model",697],["T_OBJECT_OPERATOR","->",697],["T_STRING","setDefaultBilling",697],"(",["T_VARIABLE","$customer",697],["T_OBJECT_OPERATOR","->",697],["T_STRING","getDefaultBilling",697],"(",")",")",";",["T_WHITESPACE","\n                        ",697],"}",["T_WHITESPACE"," ",698],["T_ELSE","else",698],["T_WHITESPACE"," ",698],"{",["T_WHITESPACE","\n                            ",698],["T_VARIABLE","$shippingAddress",699],["T_OBJECT_OPERATOR","->",699],["T_STRING","save",699],"(",")",";",["T_WHITESPACE","\n                            ",699],["T_VARIABLE","$model",700],["T_OBJECT_OPERATOR","->",700],["T_STRING","setDefaultShipping",700],"(",["T_VARIABLE","$billingAddress",700],["T_OBJECT_OPERATOR","->",700],["T_STRING","getId",700],"(",")",")",";",["T_WHITESPACE","\n                            ",700],["T_VARIABLE","$model",701],["T_OBJECT_OPERATOR","->",701],["T_STRING","addAddress",701],"(",["T_VARIABLE","$billingAddress",701],")",";",["T_WHITESPACE","\n\n                        ",701],"}",["T_WHITESPACE","\n                    ",703],"}",["T_WHITESPACE","\n\n                    ",704],["T_VARIABLE","$shippingAddress",706],["T_WHITESPACE"," ",706],"=",["T_WHITESPACE"," ",706],["T_VARIABLE","$model",706],["T_OBJECT_OPERATOR","->",706],["T_STRING","getPrimaryShippingAddress",706],"(",")",";",["T_WHITESPACE","\n                    ",706],["T_IF","if",707],["T_WHITESPACE"," ",707],"(","!",["T_VARIABLE","$shippingAddress",707],["T_WHITESPACE"," ",707],["T_INSTANCEOF","instanceof",707],["T_WHITESPACE"," ",707],["T_STRING","Mage_Customer_Model_Address",707],")",["T_WHITESPACE"," ",707],"{",["T_WHITESPACE","\n                        ",707],["T_VARIABLE","$shippingAddress",708],["T_WHITESPACE"," ",708],"=",["T_WHITESPACE"," ",708],["T_STRING","Mage",708],["T_DOUBLE_COLON","::",708],["T_STRING","getModel",708],"(",["T_CONSTANT_ENCAPSED_STRING","'customer\/address'",708],")",";",["T_WHITESPACE","\n                        ",708],["T_IF","if",709],["T_WHITESPACE"," ",709],"(",["T_VARIABLE","$customer",709],["T_OBJECT_OPERATOR","->",709],["T_STRING","getId",709],"(",")",["T_WHITESPACE"," ",709],["T_BOOLEAN_AND","&&",709],["T_WHITESPACE"," ",709],["T_VARIABLE","$customer",709],["T_OBJECT_OPERATOR","->",709],["T_STRING","getDefaultShipping",709],"(",")",")",["T_WHITESPACE"," ",709],"{",["T_WHITESPACE","\n                            ",709],["T_VARIABLE","$shippingAddress",710],["T_OBJECT_OPERATOR","->",710],["T_STRING","setId",710],"(",["T_VARIABLE","$customer",710],["T_OBJECT_OPERATOR","->",710],["T_STRING","getDefaultShipping",710],"(",")",")",";",["T_WHITESPACE","\n                        ",710],"}",["T_WHITESPACE","\n                    ",711],"}",["T_WHITESPACE","\n\n                    ",712],["T_VARIABLE","$regions",714],["T_WHITESPACE"," ",714],"=",["T_WHITESPACE"," ",714],["T_STRING","Mage",714],["T_DOUBLE_COLON","::",714],["T_STRING","getResourceModel",714],"(",["T_CONSTANT_ENCAPSED_STRING","'directory\/region_collection'",714],")",["T_WHITESPACE","\n                        ",714],["T_OBJECT_OPERATOR","->",715],["T_STRING","addRegionNameFilter",715],"(",["T_VARIABLE","$row",715],"[",["T_CONSTANT_ENCAPSED_STRING","'shipping_region'",715],"]",")",["T_WHITESPACE","\n                        ",715],["T_OBJECT_OPERATOR","->",716],["T_STRING","load",716],"(",")",";",["T_WHITESPACE","\n                    ",716],["T_IF","if",717],["T_WHITESPACE"," ",717],"(",["T_VARIABLE","$regions",717],")",["T_WHITESPACE"," ",717],["T_FOREACH","foreach",717],"(",["T_VARIABLE","$regions",717],["T_WHITESPACE"," ",717],["T_AS","as",717],["T_WHITESPACE"," ",717],["T_VARIABLE","$region",717],")",["T_WHITESPACE"," ",717],"{",["T_WHITESPACE","\n                       ",717],["T_VARIABLE","$regionId",718],["T_WHITESPACE"," ",718],"=",["T_WHITESPACE"," ",718],["T_VARIABLE","$region",718],["T_OBJECT_OPERATOR","->",718],["T_STRING","getId",718],"(",")",";",["T_WHITESPACE","\n                    ",718],"}",["T_WHITESPACE","\n\n                    ",719],["T_VARIABLE","$shippingAddress",721],["T_OBJECT_OPERATOR","->",721],["T_STRING","setFirstname",721],"(",["T_VARIABLE","$row",721],"[",["T_CONSTANT_ENCAPSED_STRING","'firstname'",721],"]",")",";",["T_WHITESPACE","\n                    ",721],["T_VARIABLE","$shippingAddress",722],["T_OBJECT_OPERATOR","->",722],["T_STRING","setLastname",722],"(",["T_VARIABLE","$row",722],"[",["T_CONSTANT_ENCAPSED_STRING","'lastname'",722],"]",")",";",["T_WHITESPACE","\n                    ",722],["T_VARIABLE","$shippingAddress",723],["T_OBJECT_OPERATOR","->",723],["T_STRING","setCity",723],"(",["T_VARIABLE","$row",723],"[",["T_CONSTANT_ENCAPSED_STRING","'shipping_city'",723],"]",")",";",["T_WHITESPACE","\n                    ",723],["T_VARIABLE","$shippingAddress",724],["T_OBJECT_OPERATOR","->",724],["T_STRING","setRegion",724],"(",["T_VARIABLE","$row",724],"[",["T_CONSTANT_ENCAPSED_STRING","'shipping_region'",724],"]",")",";",["T_WHITESPACE","\n                    ",724],["T_VARIABLE","$shippingAddress",725],["T_OBJECT_OPERATOR","->",725],["T_STRING","setRegionId",725],"(",["T_VARIABLE","$regionId",725],")",";",["T_WHITESPACE","\n                    ",725],["T_VARIABLE","$shippingAddress",726],["T_OBJECT_OPERATOR","->",726],["T_STRING","setCountryId",726],"(",["T_VARIABLE","$row",726],"[",["T_CONSTANT_ENCAPSED_STRING","'shipping_country'",726],"]",")",";",["T_WHITESPACE","\n                    ",726],["T_VARIABLE","$shippingAddress",727],["T_OBJECT_OPERATOR","->",727],["T_STRING","setPostcode",727],"(",["T_VARIABLE","$row",727],"[",["T_CONSTANT_ENCAPSED_STRING","'shipping_postcode'",727],"]",")",";",["T_WHITESPACE","\n                    ",727],["T_VARIABLE","$shippingAddress",728],["T_OBJECT_OPERATOR","->",728],["T_STRING","setStreet",728],"(",["T_ARRAY","array",728],"(",["T_VARIABLE","$row",728],"[",["T_CONSTANT_ENCAPSED_STRING","'shipping_street1'",728],"]",",",["T_WHITESPACE"," ",728],["T_VARIABLE","$row",728],"[",["T_CONSTANT_ENCAPSED_STRING","'shipping_street2'",728],"]",")",")",";",["T_WHITESPACE","\n                    ",728],["T_VARIABLE","$shippingAddress",729],["T_OBJECT_OPERATOR","->",729],["T_STRING","setCustomerId",729],"(",["T_VARIABLE","$model",729],["T_OBJECT_OPERATOR","->",729],["T_STRING","getId",729],"(",")",")",";",["T_WHITESPACE","\n                    ",729],["T_IF","if",730],["T_WHITESPACE"," ",730],"(","!",["T_EMPTY","empty",730],"(",["T_VARIABLE","$row",730],"[",["T_CONSTANT_ENCAPSED_STRING","'shipping_telephone'",730],"]",")",")",["T_WHITESPACE"," ",730],"{",["T_WHITESPACE","\n                        ",730],["T_VARIABLE","$shippingAddress",731],["T_OBJECT_OPERATOR","->",731],["T_STRING","setTelephone",731],"(",["T_VARIABLE","$row",731],"[",["T_CONSTANT_ENCAPSED_STRING","'shipping_telephone'",731],"]",")",";",["T_WHITESPACE","\n                    ",731],"}",["T_WHITESPACE","\n\n                    ",732],["T_IF","if",734],["T_WHITESPACE"," ",734],"(","!",["T_VARIABLE","$model",734],["T_OBJECT_OPERATOR","->",734],["T_STRING","getDefaultShipping",734],"(",")",")",["T_WHITESPACE"," ",734],"{",["T_WHITESPACE","\n                        ",734],["T_IF","if",735],["T_WHITESPACE"," ",735],"(",["T_VARIABLE","$customer",735],["T_OBJECT_OPERATOR","->",735],["T_STRING","getDefaultShipping",735],"(",")",")",["T_WHITESPACE"," ",735],"{",["T_WHITESPACE","\n                            ",735],["T_VARIABLE","$model",736],["T_OBJECT_OPERATOR","->",736],["T_STRING","setDefaultShipping",736],"(",["T_VARIABLE","$customer",736],["T_OBJECT_OPERATOR","->",736],["T_STRING","getDefaultShipping",736],"(",")",")",";",["T_WHITESPACE","\n                        ",736],"}",["T_WHITESPACE"," ",737],["T_ELSE","else",737],["T_WHITESPACE"," ",737],"{",["T_WHITESPACE","\n                            ",737],["T_VARIABLE","$shippingAddress",738],["T_OBJECT_OPERATOR","->",738],["T_STRING","save",738],"(",")",";",["T_WHITESPACE","\n                            ",738],["T_VARIABLE","$model",739],["T_OBJECT_OPERATOR","->",739],["T_STRING","setDefaultShipping",739],"(",["T_VARIABLE","$shippingAddress",739],["T_OBJECT_OPERATOR","->",739],["T_STRING","getId",739],"(",")",")",";",["T_WHITESPACE","\n                            ",739],["T_VARIABLE","$model",740],["T_OBJECT_OPERATOR","->",740],["T_STRING","addAddress",740],"(",["T_VARIABLE","$shippingAddress",740],")",";",["T_WHITESPACE","\n\n                        ",740],"}",["T_WHITESPACE","\n                        ",742],["T_VARIABLE","$shippingAddress",743],["T_OBJECT_OPERATOR","->",743],["T_STRING","setIsDefaultShipping",743],"(",["T_STRING","true",743],")",";",["T_WHITESPACE","\n                    ",743],"}",["T_WHITESPACE","\n\n                    ",744],["T_IF","if",746],["T_WHITESPACE"," ",746],"(","!",["T_VARIABLE","$rowError",746],")",["T_WHITESPACE"," ",746],"{",["T_WHITESPACE","\n                        ",746],["T_VARIABLE","$collection",747],["T_OBJECT_OPERATOR","->",747],["T_STRING","addItem",747],"(",["T_VARIABLE","$model",747],")",";",["T_WHITESPACE","\n                    ",747],"}",["T_WHITESPACE","\n\n                ",748],"}",["T_WHITESPACE"," ",750],["T_COMMENT","\/\/foreach ($storeIds as $storeId)\n",750],["T_WHITESPACE","\n            ",751],"}",["T_WHITESPACE"," ",752],["T_CATCH","catch",752],["T_WHITESPACE"," ",752],"(",["T_STRING","Exception",752],["T_WHITESPACE"," ",752],["T_VARIABLE","$e",752],")",["T_WHITESPACE"," ",752],"{",["T_WHITESPACE","\n                ",752],["T_IF","if",753],["T_WHITESPACE"," ",753],"(","!",["T_VARIABLE","$e",753],["T_WHITESPACE"," ",753],["T_INSTANCEOF","instanceof",753],["T_WHITESPACE"," ",753],["T_STRING","Mage_Dataflow_Model_Convert_Exception",753],")",["T_WHITESPACE"," ",753],"{",["T_WHITESPACE","\n                    ",753],["T_VARIABLE","$this",754],["T_OBJECT_OPERATOR","->",754],["T_STRING","addException",754],"(",["T_STRING","Mage",754],["T_DOUBLE_COLON","::",754],["T_STRING","helper",754],"(",["T_CONSTANT_ENCAPSED_STRING","'customer'",754],")",["T_OBJECT_OPERATOR","->",754],["T_STRING","__",754],"(",["T_CONSTANT_ENCAPSED_STRING","'An error occurred while retrieving the option value: %s.'",754],",",["T_WHITESPACE"," ",754],["T_VARIABLE","$e",754],["T_OBJECT_OPERATOR","->",754],["T_STRING","getMessage",754],"(",")",")",",",["T_WHITESPACE"," ",754],["T_STRING","Mage_Dataflow_Model_Convert_Exception",754],["T_DOUBLE_COLON","::",754],["T_STRING","FATAL",754],")",";",["T_WHITESPACE","\n                ",754],"}",["T_WHITESPACE","\n            ",755],"}",["T_WHITESPACE","\n        ",756],"}",["T_WHITESPACE","\n        ",757],["T_VARIABLE","$this",758],["T_OBJECT_OPERATOR","->",758],["T_STRING","setData",758],"(",["T_VARIABLE","$this",758],["T_OBJECT_OPERATOR","->",758],["T_STRING","_collections",758],")",";",["T_WHITESPACE","\n        ",758],["T_RETURN","return",759],["T_WHITESPACE"," ",759],["T_VARIABLE","$this",759],";",["T_WHITESPACE","\n    ",759],"}",["T_WHITESPACE","\n",760],"}",["T_WHITESPACE","\n",761]]
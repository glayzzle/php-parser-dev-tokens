[["T_OPEN_TAG","<?php\n",1],["T_DOC_COMMENT","\/**\n * Magento\n *\n * NOTICE OF LICENSE\n *\n * This source file is subject to the Open Software License (OSL 3.0)\n * that is bundled with this package in the file LICENSE.txt.\n * It is also available through the world-wide-web at this URL:\n * http:\/\/opensource.org\/licenses\/osl-3.0.php\n * If you did not receive a copy of the license and are unable to\n * obtain it through the world-wide-web, please send an email\n * to license@magento.com so we can send you a copy immediately.\n *\n * DISCLAIMER\n *\n * Do not edit or add to this file if you wish to upgrade Magento to newer\n * versions in the future. If you wish to customize Magento for your\n * needs please refer to http:\/\/www.magento.com for more information.\n *\n * @category    Mage\n * @package     Mage_Customer\n * @copyright  Copyright (c) 2006-2016 X.commerce, Inc. and affiliates (http:\/\/www.magento.com)\n * @license    http:\/\/opensource.org\/licenses\/osl-3.0.php  Open Software License (OSL 3.0)\n *\/",2],["T_WHITESPACE","\n\n",25],["T_DOC_COMMENT","\/**\n * Customer model\n *\n * @category    Mage\n * @package     Mage_Customer\n * @author      Magento Core Team <core@magentocommerce.com>\n *\/",27],["T_WHITESPACE","\n",33],["T_CLASS","class",34],["T_WHITESPACE"," ",34],["T_STRING","Mage_Customer_Model_Customer",34],["T_WHITESPACE"," ",34],["T_EXTENDS","extends",34],["T_WHITESPACE"," ",34],["T_STRING","Mage_Core_Model_Abstract",34],["T_WHITESPACE","\n",34],"{",["T_WHITESPACE","\n    ",35],["T_COMMENT","\/**#@+\n     * Configuration pathes for email templates and identities\n     *\/",36],["T_WHITESPACE","\n    ",38],["T_CONST","const",39],["T_WHITESPACE"," ",39],["T_STRING","XML_PATH_REGISTER_EMAIL_TEMPLATE",39],["T_WHITESPACE"," ",39],"=",["T_WHITESPACE"," ",39],["T_CONSTANT_ENCAPSED_STRING","'customer\/create_account\/email_template'",39],";",["T_WHITESPACE","\n    ",39],["T_CONST","const",40],["T_WHITESPACE"," ",40],["T_STRING","XML_PATH_REGISTER_EMAIL_IDENTITY",40],["T_WHITESPACE"," ",40],"=",["T_WHITESPACE"," ",40],["T_CONSTANT_ENCAPSED_STRING","'customer\/create_account\/email_identity'",40],";",["T_WHITESPACE","\n    ",40],["T_CONST","const",41],["T_WHITESPACE"," ",41],["T_STRING","XML_PATH_REMIND_EMAIL_TEMPLATE",41],["T_WHITESPACE"," ",41],"=",["T_WHITESPACE"," ",41],["T_CONSTANT_ENCAPSED_STRING","'customer\/password\/remind_email_template'",41],";",["T_WHITESPACE","\n    ",41],["T_CONST","const",42],["T_WHITESPACE"," ",42],["T_STRING","XML_PATH_FORGOT_EMAIL_TEMPLATE",42],["T_WHITESPACE"," ",42],"=",["T_WHITESPACE"," ",42],["T_CONSTANT_ENCAPSED_STRING","'customer\/password\/forgot_email_template'",42],";",["T_WHITESPACE","\n    ",42],["T_CONST","const",43],["T_WHITESPACE"," ",43],["T_STRING","XML_PATH_FORGOT_EMAIL_IDENTITY",43],["T_WHITESPACE"," ",43],"=",["T_WHITESPACE"," ",43],["T_CONSTANT_ENCAPSED_STRING","'customer\/password\/forgot_email_identity'",43],";",["T_WHITESPACE","\n    ",43],["T_CONST","const",44],["T_WHITESPACE"," ",44],["T_STRING","XML_PATH_DEFAULT_EMAIL_DOMAIN",44],["T_WHITESPACE","         ",44],"=",["T_WHITESPACE"," ",44],["T_CONSTANT_ENCAPSED_STRING","'customer\/create_account\/email_domain'",44],";",["T_WHITESPACE","\n    ",44],["T_CONST","const",45],["T_WHITESPACE"," ",45],["T_STRING","XML_PATH_IS_CONFIRM",45],["T_WHITESPACE","                   ",45],"=",["T_WHITESPACE"," ",45],["T_CONSTANT_ENCAPSED_STRING","'customer\/create_account\/confirm'",45],";",["T_WHITESPACE","\n    ",45],["T_CONST","const",46],["T_WHITESPACE"," ",46],["T_STRING","XML_PATH_CONFIRM_EMAIL_TEMPLATE",46],["T_WHITESPACE","       ",46],"=",["T_WHITESPACE"," ",46],["T_CONSTANT_ENCAPSED_STRING","'customer\/create_account\/email_confirmation_template'",46],";",["T_WHITESPACE","\n    ",46],["T_CONST","const",47],["T_WHITESPACE"," ",47],["T_STRING","XML_PATH_CONFIRMED_EMAIL_TEMPLATE",47],["T_WHITESPACE","     ",47],"=",["T_WHITESPACE"," ",47],["T_CONSTANT_ENCAPSED_STRING","'customer\/create_account\/email_confirmed_template'",47],";",["T_WHITESPACE","\n    ",47],["T_CONST","const",48],["T_WHITESPACE"," ",48],["T_STRING","XML_PATH_GENERATE_HUMAN_FRIENDLY_ID",48],["T_WHITESPACE","   ",48],"=",["T_WHITESPACE"," ",48],["T_CONSTANT_ENCAPSED_STRING","'customer\/create_account\/generate_human_friendly_id'",48],";",["T_WHITESPACE","\n    ",48],["T_CONST","const",49],["T_WHITESPACE"," ",49],["T_STRING","XML_PATH_CHANGED_PASSWORD_OR_EMAIL_TEMPLATE",49],["T_WHITESPACE"," ",49],"=",["T_WHITESPACE"," ",49],["T_CONSTANT_ENCAPSED_STRING","'customer\/changed_account\/password_or_email_template'",49],";",["T_WHITESPACE","\n    ",49],["T_CONST","const",50],["T_WHITESPACE"," ",50],["T_STRING","XML_PATH_CHANGED_PASSWORD_OR_EMAIL_IDENTITY",50],["T_WHITESPACE"," ",50],"=",["T_WHITESPACE"," ",50],["T_CONSTANT_ENCAPSED_STRING","'customer\/changed_account\/password_or_email_identity'",50],";",["T_WHITESPACE","\n    ",50],["T_COMMENT","\/**#@-*\/",51],["T_WHITESPACE","\n\n    ",51],["T_COMMENT","\/**#@+\n     * Codes of exceptions related to customer model\n     *\/",53],["T_WHITESPACE","\n    ",55],["T_CONST","const",56],["T_WHITESPACE"," ",56],["T_STRING","EXCEPTION_EMAIL_NOT_CONFIRMED",56],["T_WHITESPACE","       ",56],"=",["T_WHITESPACE"," ",56],["T_LNUMBER","1",56],";",["T_WHITESPACE","\n    ",56],["T_CONST","const",57],["T_WHITESPACE"," ",57],["T_STRING","EXCEPTION_INVALID_EMAIL_OR_PASSWORD",57],["T_WHITESPACE"," ",57],"=",["T_WHITESPACE"," ",57],["T_LNUMBER","2",57],";",["T_WHITESPACE","\n    ",57],["T_CONST","const",58],["T_WHITESPACE"," ",58],["T_STRING","EXCEPTION_EMAIL_EXISTS",58],["T_WHITESPACE","              ",58],"=",["T_WHITESPACE"," ",58],["T_LNUMBER","3",58],";",["T_WHITESPACE","\n    ",58],["T_CONST","const",59],["T_WHITESPACE"," ",59],["T_STRING","EXCEPTION_INVALID_RESET_PASSWORD_LINK_TOKEN",59],["T_WHITESPACE"," ",59],"=",["T_WHITESPACE"," ",59],["T_LNUMBER","4",59],";",["T_WHITESPACE","\n    ",59],["T_COMMENT","\/**#@-*\/",60],["T_WHITESPACE","\n\n    ",60],["T_COMMENT","\/**#@+\n     * Subscriptions\n     *\/",62],["T_WHITESPACE","\n    ",64],["T_CONST","const",65],["T_WHITESPACE"," ",65],["T_STRING","SUBSCRIBED_YES",65],["T_WHITESPACE"," ",65],"=",["T_WHITESPACE"," ",65],["T_CONSTANT_ENCAPSED_STRING","'yes'",65],";",["T_WHITESPACE","\n    ",65],["T_CONST","const",66],["T_WHITESPACE"," ",66],["T_STRING","SUBSCRIBED_NO",66],["T_WHITESPACE","  ",66],"=",["T_WHITESPACE"," ",66],["T_CONSTANT_ENCAPSED_STRING","'no'",66],";",["T_WHITESPACE","\n    ",66],["T_COMMENT","\/**#@-*\/",67],["T_WHITESPACE","\n\n    ",67],["T_CONST","const",69],["T_WHITESPACE"," ",69],["T_STRING","CACHE_TAG",69],["T_WHITESPACE"," ",69],"=",["T_WHITESPACE"," ",69],["T_CONSTANT_ENCAPSED_STRING","'customer'",69],";",["T_WHITESPACE","\n\n    ",69],["T_DOC_COMMENT","\/**\n     * Minimum Password Length\n     *\/",71],["T_WHITESPACE","\n    ",73],["T_CONST","const",74],["T_WHITESPACE"," ",74],["T_STRING","MINIMUM_PASSWORD_LENGTH",74],["T_WHITESPACE"," ",74],"=",["T_WHITESPACE"," ",74],["T_LNUMBER","6",74],";",["T_WHITESPACE","\n\n    ",74],["T_DOC_COMMENT","\/**\n     * Model event prefix\n     *\n     * @var string\n     *\/",76],["T_WHITESPACE","\n    ",80],["T_PROTECTED","protected",81],["T_WHITESPACE"," ",81],["T_VARIABLE","$_eventPrefix",81],["T_WHITESPACE"," ",81],"=",["T_WHITESPACE"," ",81],["T_CONSTANT_ENCAPSED_STRING","'customer'",81],";",["T_WHITESPACE","\n\n    ",81],["T_DOC_COMMENT","\/**\n     * Name of the event object\n     *\n     * @var string\n     *\/",83],["T_WHITESPACE","\n    ",87],["T_PROTECTED","protected",88],["T_WHITESPACE"," ",88],["T_VARIABLE","$_eventObject",88],["T_WHITESPACE"," ",88],"=",["T_WHITESPACE"," ",88],["T_CONSTANT_ENCAPSED_STRING","'customer'",88],";",["T_WHITESPACE","\n\n    ",88],["T_DOC_COMMENT","\/**\n     * List of errors\n     *\n     * @var array\n     *\/",90],["T_WHITESPACE","\n    ",94],["T_PROTECTED","protected",95],["T_WHITESPACE"," ",95],["T_VARIABLE","$_errors",95],["T_WHITESPACE"," ",95],"=",["T_WHITESPACE"," ",95],["T_ARRAY","array",95],"(",")",";",["T_WHITESPACE","\n\n    ",95],["T_DOC_COMMENT","\/**\n     * Assoc array of customer attributes\n     *\n     * @var array\n     *\/",97],["T_WHITESPACE","\n    ",101],["T_PROTECTED","protected",102],["T_WHITESPACE"," ",102],["T_VARIABLE","$_attributes",102],";",["T_WHITESPACE","\n\n    ",102],["T_DOC_COMMENT","\/**\n     * Customer addresses array\n     *\n     * @var array\n     * @deprecated after 1.4.0.0-rc1\n     *\/",104],["T_WHITESPACE","\n    ",109],["T_PROTECTED","protected",110],["T_WHITESPACE"," ",110],["T_VARIABLE","$_addresses",110],["T_WHITESPACE"," ",110],"=",["T_WHITESPACE"," ",110],["T_STRING","null",110],";",["T_WHITESPACE","\n\n    ",110],["T_DOC_COMMENT","\/**\n     * Customer addresses collection\n     *\n     * @var Mage_Customer_Model_Entity_Address_Collection\n     *\/",112],["T_WHITESPACE","\n    ",116],["T_PROTECTED","protected",117],["T_WHITESPACE"," ",117],["T_VARIABLE","$_addressesCollection",117],";",["T_WHITESPACE","\n\n    ",117],["T_DOC_COMMENT","\/**\n     * Is model deleteable\n     *\n     * @var boolean\n     *\/",119],["T_WHITESPACE","\n    ",123],["T_PROTECTED","protected",124],["T_WHITESPACE"," ",124],["T_VARIABLE","$_isDeleteable",124],["T_WHITESPACE"," ",124],"=",["T_WHITESPACE"," ",124],["T_STRING","true",124],";",["T_WHITESPACE","\n\n    ",124],["T_DOC_COMMENT","\/**\n     * Is model readonly\n     *\n     * @var boolean\n     *\/",126],["T_WHITESPACE","\n    ",130],["T_PROTECTED","protected",131],["T_WHITESPACE"," ",131],["T_VARIABLE","$_isReadonly",131],["T_WHITESPACE"," ",131],"=",["T_WHITESPACE"," ",131],["T_STRING","false",131],";",["T_WHITESPACE","\n\n    ",131],["T_DOC_COMMENT","\/**\n     * Model cache tag for clear cache in after save and after delete\n     *\n     * @var string\n     *\/",133],["T_WHITESPACE","\n    ",137],["T_PROTECTED","protected",138],["T_WHITESPACE"," ",138],["T_VARIABLE","$_cacheTag",138],["T_WHITESPACE"," ",138],"=",["T_WHITESPACE"," ",138],["T_STRING","self",138],["T_DOUBLE_COLON","::",138],["T_STRING","CACHE_TAG",138],";",["T_WHITESPACE","\n\n    ",138],["T_DOC_COMMENT","\/**\n     * Confirmation requirement flag\n     *\n     * @var boolean\n     *\/",140],["T_WHITESPACE","\n    ",144],["T_PRIVATE","private",145],["T_WHITESPACE"," ",145],["T_STATIC","static",145],["T_WHITESPACE"," ",145],["T_VARIABLE","$_isConfirmationRequired",145],";",["T_WHITESPACE","\n\n    ",145],["T_DOC_COMMENT","\/**\n     * Initialize customer model\n     *\/",147],["T_WHITESPACE","\n    ",149],["T_FUNCTION","function",150],["T_WHITESPACE"," ",150],["T_STRING","_construct",150],"(",")",["T_WHITESPACE","\n    ",150],"{",["T_WHITESPACE","\n        ",151],["T_VARIABLE","$this",152],["T_OBJECT_OPERATOR","->",152],["T_STRING","_init",152],"(",["T_CONSTANT_ENCAPSED_STRING","'customer\/customer'",152],")",";",["T_WHITESPACE","\n    ",152],"}",["T_WHITESPACE","\n\n    ",153],["T_DOC_COMMENT","\/**\n     * Retrieve customer sharing configuration model\n     *\n     * @return Mage_Customer_Model_Config_Share\n     *\/",155],["T_WHITESPACE","\n    ",159],["T_PUBLIC","public",160],["T_WHITESPACE"," ",160],["T_FUNCTION","function",160],["T_WHITESPACE"," ",160],["T_STRING","getSharingConfig",160],"(",")",["T_WHITESPACE","\n    ",160],"{",["T_WHITESPACE","\n        ",161],["T_RETURN","return",162],["T_WHITESPACE"," ",162],["T_STRING","Mage",162],["T_DOUBLE_COLON","::",162],["T_STRING","getSingleton",162],"(",["T_CONSTANT_ENCAPSED_STRING","'customer\/config_share'",162],")",";",["T_WHITESPACE","\n    ",162],"}",["T_WHITESPACE","\n\n    ",163],["T_DOC_COMMENT","\/**\n     * Authenticate customer\n     *\n     * @param  string $login\n     * @param  string $password\n     * @throws Mage_Core_Exception\n     * @return true\n     *\n     *\/",165],["T_WHITESPACE","\n    ",173],["T_PUBLIC","public",174],["T_WHITESPACE"," ",174],["T_FUNCTION","function",174],["T_WHITESPACE"," ",174],["T_STRING","authenticate",174],"(",["T_VARIABLE","$login",174],",",["T_WHITESPACE"," ",174],["T_VARIABLE","$password",174],")",["T_WHITESPACE","\n    ",174],"{",["T_WHITESPACE","\n        ",175],["T_VARIABLE","$this",176],["T_OBJECT_OPERATOR","->",176],["T_STRING","loadByEmail",176],"(",["T_VARIABLE","$login",176],")",";",["T_WHITESPACE","\n        ",176],["T_IF","if",177],["T_WHITESPACE"," ",177],"(",["T_VARIABLE","$this",177],["T_OBJECT_OPERATOR","->",177],["T_STRING","getConfirmation",177],"(",")",["T_WHITESPACE"," ",177],["T_BOOLEAN_AND","&&",177],["T_WHITESPACE"," ",177],["T_VARIABLE","$this",177],["T_OBJECT_OPERATOR","->",177],["T_STRING","isConfirmationRequired",177],"(",")",")",["T_WHITESPACE"," ",177],"{",["T_WHITESPACE","\n            ",177],["T_THROW","throw",178],["T_WHITESPACE"," ",178],["T_STRING","Mage",178],["T_DOUBLE_COLON","::",178],["T_STRING","exception",178],"(",["T_CONSTANT_ENCAPSED_STRING","'Mage_Core'",178],",",["T_WHITESPACE"," ",178],["T_STRING","Mage",178],["T_DOUBLE_COLON","::",178],["T_STRING","helper",178],"(",["T_CONSTANT_ENCAPSED_STRING","'customer'",178],")",["T_OBJECT_OPERATOR","->",178],["T_STRING","__",178],"(",["T_CONSTANT_ENCAPSED_STRING","'This account is not confirmed.'",178],")",",",["T_WHITESPACE","\n                ",178],["T_STRING","self",179],["T_DOUBLE_COLON","::",179],["T_STRING","EXCEPTION_EMAIL_NOT_CONFIRMED",179],["T_WHITESPACE","\n            ",179],")",";",["T_WHITESPACE","\n        ",180],"}",["T_WHITESPACE","\n        ",181],["T_IF","if",182],["T_WHITESPACE"," ",182],"(","!",["T_VARIABLE","$this",182],["T_OBJECT_OPERATOR","->",182],["T_STRING","validatePassword",182],"(",["T_VARIABLE","$password",182],")",")",["T_WHITESPACE"," ",182],"{",["T_WHITESPACE","\n            ",182],["T_THROW","throw",183],["T_WHITESPACE"," ",183],["T_STRING","Mage",183],["T_DOUBLE_COLON","::",183],["T_STRING","exception",183],"(",["T_CONSTANT_ENCAPSED_STRING","'Mage_Core'",183],",",["T_WHITESPACE"," ",183],["T_STRING","Mage",183],["T_DOUBLE_COLON","::",183],["T_STRING","helper",183],"(",["T_CONSTANT_ENCAPSED_STRING","'customer'",183],")",["T_OBJECT_OPERATOR","->",183],["T_STRING","__",183],"(",["T_CONSTANT_ENCAPSED_STRING","'Invalid login or password.'",183],")",",",["T_WHITESPACE","\n                ",183],["T_STRING","self",184],["T_DOUBLE_COLON","::",184],["T_STRING","EXCEPTION_INVALID_EMAIL_OR_PASSWORD",184],["T_WHITESPACE","\n            ",184],")",";",["T_WHITESPACE","\n        ",185],"}",["T_WHITESPACE","\n        ",186],["T_STRING","Mage",187],["T_DOUBLE_COLON","::",187],["T_STRING","dispatchEvent",187],"(",["T_CONSTANT_ENCAPSED_STRING","'customer_customer_authenticated'",187],",",["T_WHITESPACE"," ",187],["T_ARRAY","array",187],"(",["T_WHITESPACE","\n           ",187],["T_CONSTANT_ENCAPSED_STRING","'model'",188],["T_WHITESPACE","    ",188],["T_DOUBLE_ARROW","=>",188],["T_WHITESPACE"," ",188],["T_VARIABLE","$this",188],",",["T_WHITESPACE","\n           ",188],["T_CONSTANT_ENCAPSED_STRING","'password'",189],["T_WHITESPACE"," ",189],["T_DOUBLE_ARROW","=>",189],["T_WHITESPACE"," ",189],["T_VARIABLE","$password",189],",",["T_WHITESPACE","\n        ",189],")",")",";",["T_WHITESPACE","\n\n        ",190],["T_RETURN","return",192],["T_WHITESPACE"," ",192],["T_STRING","true",192],";",["T_WHITESPACE","\n    ",192],"}",["T_WHITESPACE","\n\n    ",193],["T_DOC_COMMENT","\/**\n     * Load customer by email\n     *\n     * @param   string $customerEmail\n     * @return  Mage_Customer_Model_Customer\n     *\/",195],["T_WHITESPACE","\n    ",200],["T_PUBLIC","public",201],["T_WHITESPACE"," ",201],["T_FUNCTION","function",201],["T_WHITESPACE"," ",201],["T_STRING","loadByEmail",201],"(",["T_VARIABLE","$customerEmail",201],")",["T_WHITESPACE","\n    ",201],"{",["T_WHITESPACE","\n        ",202],["T_VARIABLE","$this",203],["T_OBJECT_OPERATOR","->",203],["T_STRING","_getResource",203],"(",")",["T_OBJECT_OPERATOR","->",203],["T_STRING","loadByEmail",203],"(",["T_VARIABLE","$this",203],",",["T_WHITESPACE"," ",203],["T_VARIABLE","$customerEmail",203],")",";",["T_WHITESPACE","\n        ",203],["T_RETURN","return",204],["T_WHITESPACE"," ",204],["T_VARIABLE","$this",204],";",["T_WHITESPACE","\n    ",204],"}",["T_WHITESPACE","\n\n\n    ",205],["T_DOC_COMMENT","\/**\n     * Processing object before save data\n     *\n     * @return Mage_Customer_Model_Customer\n     *\/",208],["T_WHITESPACE","\n    ",212],["T_PROTECTED","protected",213],["T_WHITESPACE"," ",213],["T_FUNCTION","function",213],["T_WHITESPACE"," ",213],["T_STRING","_beforeSave",213],"(",")",["T_WHITESPACE","\n    ",213],"{",["T_WHITESPACE","\n        ",214],["T_STRING","parent",215],["T_DOUBLE_COLON","::",215],["T_STRING","_beforeSave",215],"(",")",";",["T_WHITESPACE","\n\n        ",215],["T_VARIABLE","$storeId",217],["T_WHITESPACE"," ",217],"=",["T_WHITESPACE"," ",217],["T_VARIABLE","$this",217],["T_OBJECT_OPERATOR","->",217],["T_STRING","getStoreId",217],"(",")",";",["T_WHITESPACE","\n        ",217],["T_IF","if",218],["T_WHITESPACE"," ",218],"(",["T_VARIABLE","$storeId",218],["T_WHITESPACE"," ",218],["T_IS_IDENTICAL","===",218],["T_WHITESPACE"," ",218],["T_STRING","null",218],")",["T_WHITESPACE"," ",218],"{",["T_WHITESPACE","\n            ",218],["T_VARIABLE","$this",219],["T_OBJECT_OPERATOR","->",219],["T_STRING","setStoreId",219],"(",["T_STRING","Mage",219],["T_DOUBLE_COLON","::",219],["T_STRING","app",219],"(",")",["T_OBJECT_OPERATOR","->",219],["T_STRING","getStore",219],"(",")",["T_OBJECT_OPERATOR","->",219],["T_STRING","getId",219],"(",")",")",";",["T_WHITESPACE","\n        ",219],"}",["T_WHITESPACE","\n\n        ",220],["T_VARIABLE","$this",222],["T_OBJECT_OPERATOR","->",222],["T_STRING","getGroupId",222],"(",")",";",["T_WHITESPACE","\n        ",222],["T_RETURN","return",223],["T_WHITESPACE"," ",223],["T_VARIABLE","$this",223],";",["T_WHITESPACE","\n    ",223],"}",["T_WHITESPACE","\n\n    ",224],["T_DOC_COMMENT","\/**\n     * Change customer password\n     *\n     * @param   string $newPassword\n     * @return  Mage_Customer_Model_Customer\n     *\/",226],["T_WHITESPACE","\n    ",231],["T_PUBLIC","public",232],["T_WHITESPACE"," ",232],["T_FUNCTION","function",232],["T_WHITESPACE"," ",232],["T_STRING","changePassword",232],"(",["T_VARIABLE","$newPassword",232],")",["T_WHITESPACE","\n    ",232],"{",["T_WHITESPACE","\n        ",233],["T_VARIABLE","$this",234],["T_OBJECT_OPERATOR","->",234],["T_STRING","_getResource",234],"(",")",["T_OBJECT_OPERATOR","->",234],["T_STRING","changePassword",234],"(",["T_VARIABLE","$this",234],",",["T_WHITESPACE"," ",234],["T_VARIABLE","$newPassword",234],")",";",["T_WHITESPACE","\n        ",234],["T_RETURN","return",235],["T_WHITESPACE"," ",235],["T_VARIABLE","$this",235],";",["T_WHITESPACE","\n    ",235],"}",["T_WHITESPACE","\n\n    ",236],["T_DOC_COMMENT","\/**\n     * Get full customer name\n     *\n     * @return string\n     *\/",238],["T_WHITESPACE","\n    ",242],["T_PUBLIC","public",243],["T_WHITESPACE"," ",243],["T_FUNCTION","function",243],["T_WHITESPACE"," ",243],["T_STRING","getName",243],"(",")",["T_WHITESPACE","\n    ",243],"{",["T_WHITESPACE","\n        ",244],["T_VARIABLE","$name",245],["T_WHITESPACE"," ",245],"=",["T_WHITESPACE"," ",245],["T_CONSTANT_ENCAPSED_STRING","''",245],";",["T_WHITESPACE","\n        ",245],["T_VARIABLE","$config",246],["T_WHITESPACE"," ",246],"=",["T_WHITESPACE"," ",246],["T_STRING","Mage",246],["T_DOUBLE_COLON","::",246],["T_STRING","getSingleton",246],"(",["T_CONSTANT_ENCAPSED_STRING","'eav\/config'",246],")",";",["T_WHITESPACE","\n        ",246],["T_IF","if",247],["T_WHITESPACE"," ",247],"(",["T_VARIABLE","$config",247],["T_OBJECT_OPERATOR","->",247],["T_STRING","getAttribute",247],"(",["T_CONSTANT_ENCAPSED_STRING","'customer'",247],",",["T_WHITESPACE"," ",247],["T_CONSTANT_ENCAPSED_STRING","'prefix'",247],")",["T_OBJECT_OPERATOR","->",247],["T_STRING","getIsVisible",247],"(",")",["T_WHITESPACE"," ",247],["T_BOOLEAN_AND","&&",247],["T_WHITESPACE"," ",247],["T_VARIABLE","$this",247],["T_OBJECT_OPERATOR","->",247],["T_STRING","getPrefix",247],"(",")",")",["T_WHITESPACE"," ",247],"{",["T_WHITESPACE","\n            ",247],["T_VARIABLE","$name",248],["T_WHITESPACE"," ",248],["T_CONCAT_EQUAL",".=",248],["T_WHITESPACE"," ",248],["T_VARIABLE","$this",248],["T_OBJECT_OPERATOR","->",248],["T_STRING","getPrefix",248],"(",")",["T_WHITESPACE"," ",248],".",["T_WHITESPACE"," ",248],["T_CONSTANT_ENCAPSED_STRING","' '",248],";",["T_WHITESPACE","\n        ",248],"}",["T_WHITESPACE","\n        ",249],["T_VARIABLE","$name",250],["T_WHITESPACE"," ",250],["T_CONCAT_EQUAL",".=",250],["T_WHITESPACE"," ",250],["T_VARIABLE","$this",250],["T_OBJECT_OPERATOR","->",250],["T_STRING","getFirstname",250],"(",")",";",["T_WHITESPACE","\n        ",250],["T_IF","if",251],["T_WHITESPACE"," ",251],"(",["T_VARIABLE","$config",251],["T_OBJECT_OPERATOR","->",251],["T_STRING","getAttribute",251],"(",["T_CONSTANT_ENCAPSED_STRING","'customer'",251],",",["T_WHITESPACE"," ",251],["T_CONSTANT_ENCAPSED_STRING","'middlename'",251],")",["T_OBJECT_OPERATOR","->",251],["T_STRING","getIsVisible",251],"(",")",["T_WHITESPACE"," ",251],["T_BOOLEAN_AND","&&",251],["T_WHITESPACE"," ",251],["T_VARIABLE","$this",251],["T_OBJECT_OPERATOR","->",251],["T_STRING","getMiddlename",251],"(",")",")",["T_WHITESPACE"," ",251],"{",["T_WHITESPACE","\n            ",251],["T_VARIABLE","$name",252],["T_WHITESPACE"," ",252],["T_CONCAT_EQUAL",".=",252],["T_WHITESPACE"," ",252],["T_CONSTANT_ENCAPSED_STRING","' '",252],["T_WHITESPACE"," ",252],".",["T_WHITESPACE"," ",252],["T_VARIABLE","$this",252],["T_OBJECT_OPERATOR","->",252],["T_STRING","getMiddlename",252],"(",")",";",["T_WHITESPACE","\n        ",252],"}",["T_WHITESPACE","\n        ",253],["T_VARIABLE","$name",254],["T_WHITESPACE"," ",254],["T_CONCAT_EQUAL",".=",254],["T_WHITESPACE","  ",254],["T_CONSTANT_ENCAPSED_STRING","' '",254],["T_WHITESPACE"," ",254],".",["T_WHITESPACE"," ",254],["T_VARIABLE","$this",254],["T_OBJECT_OPERATOR","->",254],["T_STRING","getLastname",254],"(",")",";",["T_WHITESPACE","\n        ",254],["T_IF","if",255],["T_WHITESPACE"," ",255],"(",["T_VARIABLE","$config",255],["T_OBJECT_OPERATOR","->",255],["T_STRING","getAttribute",255],"(",["T_CONSTANT_ENCAPSED_STRING","'customer'",255],",",["T_WHITESPACE"," ",255],["T_CONSTANT_ENCAPSED_STRING","'suffix'",255],")",["T_OBJECT_OPERATOR","->",255],["T_STRING","getIsVisible",255],"(",")",["T_WHITESPACE"," ",255],["T_BOOLEAN_AND","&&",255],["T_WHITESPACE"," ",255],["T_VARIABLE","$this",255],["T_OBJECT_OPERATOR","->",255],["T_STRING","getSuffix",255],"(",")",")",["T_WHITESPACE"," ",255],"{",["T_WHITESPACE","\n            ",255],["T_VARIABLE","$name",256],["T_WHITESPACE"," ",256],["T_CONCAT_EQUAL",".=",256],["T_WHITESPACE"," ",256],["T_CONSTANT_ENCAPSED_STRING","' '",256],["T_WHITESPACE"," ",256],".",["T_WHITESPACE"," ",256],["T_VARIABLE","$this",256],["T_OBJECT_OPERATOR","->",256],["T_STRING","getSuffix",256],"(",")",";",["T_WHITESPACE","\n        ",256],"}",["T_WHITESPACE","\n        ",257],["T_RETURN","return",258],["T_WHITESPACE"," ",258],["T_VARIABLE","$name",258],";",["T_WHITESPACE","\n    ",258],"}",["T_WHITESPACE","\n\n    ",259],["T_DOC_COMMENT","\/**\n     * Add address to address collection\n     *\n     * @param   Mage_Customer_Model_Address $address\n     * @return  Mage_Customer_Model_Customer\n     *\/",261],["T_WHITESPACE","\n    ",266],["T_PUBLIC","public",267],["T_WHITESPACE"," ",267],["T_FUNCTION","function",267],["T_WHITESPACE"," ",267],["T_STRING","addAddress",267],"(",["T_STRING","Mage_Customer_Model_Address",267],["T_WHITESPACE"," ",267],["T_VARIABLE","$address",267],")",["T_WHITESPACE","\n    ",267],"{",["T_WHITESPACE","\n        ",268],["T_VARIABLE","$this",269],["T_OBJECT_OPERATOR","->",269],["T_STRING","getAddressesCollection",269],"(",")",["T_OBJECT_OPERATOR","->",269],["T_STRING","addItem",269],"(",["T_VARIABLE","$address",269],")",";",["T_WHITESPACE","\n        ",269],["T_VARIABLE","$this",270],["T_OBJECT_OPERATOR","->",270],["T_STRING","getAddresses",270],"(",")",";",["T_WHITESPACE","\n        ",270],["T_VARIABLE","$this",271],["T_OBJECT_OPERATOR","->",271],["T_STRING","_addresses",271],"[","]",["T_WHITESPACE"," ",271],"=",["T_WHITESPACE"," ",271],["T_VARIABLE","$address",271],";",["T_WHITESPACE","\n        ",271],["T_RETURN","return",272],["T_WHITESPACE"," ",272],["T_VARIABLE","$this",272],";",["T_WHITESPACE","\n    ",272],"}",["T_WHITESPACE","\n\n    ",273],["T_DOC_COMMENT","\/**\n     * Retrieve customer address by address id\n     *\n     * @param   int $addressId\n     * @return  Mage_Customer_Model_Address\n     *\/",275],["T_WHITESPACE","\n    ",280],["T_PUBLIC","public",281],["T_WHITESPACE"," ",281],["T_FUNCTION","function",281],["T_WHITESPACE"," ",281],["T_STRING","getAddressById",281],"(",["T_VARIABLE","$addressId",281],")",["T_WHITESPACE","\n    ",281],"{",["T_WHITESPACE","\n        ",282],["T_VARIABLE","$address",283],["T_WHITESPACE"," ",283],"=",["T_WHITESPACE"," ",283],["T_STRING","Mage",283],["T_DOUBLE_COLON","::",283],["T_STRING","getModel",283],"(",["T_CONSTANT_ENCAPSED_STRING","'customer\/address'",283],")",["T_OBJECT_OPERATOR","->",283],["T_STRING","load",283],"(",["T_VARIABLE","$addressId",283],")",";",["T_WHITESPACE","\n        ",283],["T_IF","if",284],["T_WHITESPACE"," ",284],"(",["T_VARIABLE","$this",284],["T_OBJECT_OPERATOR","->",284],["T_STRING","getId",284],"(",")",["T_WHITESPACE"," ",284],["T_IS_EQUAL","==",284],["T_WHITESPACE"," ",284],["T_VARIABLE","$address",284],["T_OBJECT_OPERATOR","->",284],["T_STRING","getParentId",284],"(",")",")",["T_WHITESPACE"," ",284],"{",["T_WHITESPACE","\n            ",284],["T_RETURN","return",285],["T_WHITESPACE"," ",285],["T_VARIABLE","$address",285],";",["T_WHITESPACE","\n        ",285],"}",["T_WHITESPACE","\n        ",286],["T_RETURN","return",287],["T_WHITESPACE"," ",287],["T_STRING","Mage",287],["T_DOUBLE_COLON","::",287],["T_STRING","getModel",287],"(",["T_CONSTANT_ENCAPSED_STRING","'customer\/address'",287],")",";",["T_WHITESPACE","\n    ",287],"}",["T_WHITESPACE","\n\n    ",288],["T_DOC_COMMENT","\/**\n     * Getting customer address object from collection by identifier\n     *\n     * @param int $addressId\n     * @return Mage_Customer_Model_Address\n     *\/",290],["T_WHITESPACE","\n    ",295],["T_PUBLIC","public",296],["T_WHITESPACE"," ",296],["T_FUNCTION","function",296],["T_WHITESPACE"," ",296],["T_STRING","getAddressItemById",296],"(",["T_VARIABLE","$addressId",296],")",["T_WHITESPACE","\n    ",296],"{",["T_WHITESPACE","\n        ",297],["T_RETURN","return",298],["T_WHITESPACE"," ",298],["T_VARIABLE","$this",298],["T_OBJECT_OPERATOR","->",298],["T_STRING","getAddressesCollection",298],"(",")",["T_OBJECT_OPERATOR","->",298],["T_STRING","getItemById",298],"(",["T_VARIABLE","$addressId",298],")",";",["T_WHITESPACE","\n    ",298],"}",["T_WHITESPACE","\n\n    ",299],["T_DOC_COMMENT","\/**\n     * Retrieve not loaded address collection\n     *\n     * @return Mage_Customer_Model_Entity_Address_Collection\n     *\/",301],["T_WHITESPACE","\n    ",305],["T_PUBLIC","public",306],["T_WHITESPACE"," ",306],["T_FUNCTION","function",306],["T_WHITESPACE"," ",306],["T_STRING","getAddressCollection",306],"(",")",["T_WHITESPACE","\n    ",306],"{",["T_WHITESPACE","\n        ",307],["T_RETURN","return",308],["T_WHITESPACE"," ",308],["T_STRING","Mage",308],["T_DOUBLE_COLON","::",308],["T_STRING","getResourceModel",308],"(",["T_CONSTANT_ENCAPSED_STRING","'customer\/address_collection'",308],")",";",["T_WHITESPACE","\n    ",308],"}",["T_WHITESPACE","\n\n    ",309],["T_DOC_COMMENT","\/**\n     * Customer addresses collection\n     *\n     * @return Mage_Customer_Model_Entity_Address_Collection\n     *\/",311],["T_WHITESPACE","\n    ",315],["T_PUBLIC","public",316],["T_WHITESPACE"," ",316],["T_FUNCTION","function",316],["T_WHITESPACE"," ",316],["T_STRING","getAddressesCollection",316],"(",")",["T_WHITESPACE","\n    ",316],"{",["T_WHITESPACE","\n        ",317],["T_IF","if",318],["T_WHITESPACE"," ",318],"(",["T_VARIABLE","$this",318],["T_OBJECT_OPERATOR","->",318],["T_STRING","_addressesCollection",318],["T_WHITESPACE"," ",318],["T_IS_IDENTICAL","===",318],["T_WHITESPACE"," ",318],["T_STRING","null",318],")",["T_WHITESPACE"," ",318],"{",["T_WHITESPACE","\n            ",318],["T_VARIABLE","$this",319],["T_OBJECT_OPERATOR","->",319],["T_STRING","_addressesCollection",319],["T_WHITESPACE"," ",319],"=",["T_WHITESPACE"," ",319],["T_VARIABLE","$this",319],["T_OBJECT_OPERATOR","->",319],["T_STRING","getAddressCollection",319],"(",")",["T_WHITESPACE","\n                ",319],["T_OBJECT_OPERATOR","->",320],["T_STRING","setCustomerFilter",320],"(",["T_VARIABLE","$this",320],")",["T_WHITESPACE","\n                ",320],["T_OBJECT_OPERATOR","->",321],["T_STRING","addAttributeToSelect",321],"(",["T_CONSTANT_ENCAPSED_STRING","'*'",321],")",";",["T_WHITESPACE","\n            ",321],["T_FOREACH","foreach",322],["T_WHITESPACE"," ",322],"(",["T_VARIABLE","$this",322],["T_OBJECT_OPERATOR","->",322],["T_STRING","_addressesCollection",322],["T_WHITESPACE"," ",322],["T_AS","as",322],["T_WHITESPACE"," ",322],["T_VARIABLE","$address",322],")",["T_WHITESPACE"," ",322],"{",["T_WHITESPACE","\n                ",322],["T_VARIABLE","$address",323],["T_OBJECT_OPERATOR","->",323],["T_STRING","setCustomer",323],"(",["T_VARIABLE","$this",323],")",";",["T_WHITESPACE","\n            ",323],"}",["T_WHITESPACE","\n        ",324],"}",["T_WHITESPACE","\n\n        ",325],["T_RETURN","return",327],["T_WHITESPACE"," ",327],["T_VARIABLE","$this",327],["T_OBJECT_OPERATOR","->",327],["T_STRING","_addressesCollection",327],";",["T_WHITESPACE","\n    ",327],"}",["T_WHITESPACE","\n\n    ",328],["T_DOC_COMMENT","\/**\n     * Retrieve customer address array\n     *\n     * @return array\n     *\/",330],["T_WHITESPACE","\n    ",334],["T_PUBLIC","public",335],["T_WHITESPACE"," ",335],["T_FUNCTION","function",335],["T_WHITESPACE"," ",335],["T_STRING","getAddresses",335],"(",")",["T_WHITESPACE","\n    ",335],"{",["T_WHITESPACE","\n        ",336],["T_VARIABLE","$this",337],["T_OBJECT_OPERATOR","->",337],["T_STRING","_addresses",337],["T_WHITESPACE"," ",337],"=",["T_WHITESPACE"," ",337],["T_VARIABLE","$this",337],["T_OBJECT_OPERATOR","->",337],["T_STRING","getAddressesCollection",337],"(",")",["T_OBJECT_OPERATOR","->",337],["T_STRING","getItems",337],"(",")",";",["T_WHITESPACE","\n        ",337],["T_RETURN","return",338],["T_WHITESPACE"," ",338],["T_VARIABLE","$this",338],["T_OBJECT_OPERATOR","->",338],["T_STRING","_addresses",338],";",["T_WHITESPACE","\n    ",338],"}",["T_WHITESPACE","\n\n    ",339],["T_DOC_COMMENT","\/**\n     * Retrieve all customer attributes\n     *\n     * @return array\n     *\/",341],["T_WHITESPACE","\n    ",345],["T_PUBLIC","public",346],["T_WHITESPACE"," ",346],["T_FUNCTION","function",346],["T_WHITESPACE"," ",346],["T_STRING","getAttributes",346],"(",")",["T_WHITESPACE","\n    ",346],"{",["T_WHITESPACE","\n        ",347],["T_IF","if",348],["T_WHITESPACE"," ",348],"(",["T_VARIABLE","$this",348],["T_OBJECT_OPERATOR","->",348],["T_STRING","_attributes",348],["T_WHITESPACE"," ",348],["T_IS_IDENTICAL","===",348],["T_WHITESPACE"," ",348],["T_STRING","null",348],")",["T_WHITESPACE"," ",348],"{",["T_WHITESPACE","\n            ",348],["T_VARIABLE","$this",349],["T_OBJECT_OPERATOR","->",349],["T_STRING","_attributes",349],["T_WHITESPACE"," ",349],"=",["T_WHITESPACE"," ",349],["T_VARIABLE","$this",349],["T_OBJECT_OPERATOR","->",349],["T_STRING","_getResource",349],"(",")",["T_WHITESPACE","\n            ",349],["T_OBJECT_OPERATOR","->",350],["T_STRING","loadAllAttributes",350],"(",["T_VARIABLE","$this",350],")",["T_WHITESPACE","\n            ",350],["T_OBJECT_OPERATOR","->",351],["T_STRING","getSortedAttributes",351],"(",")",";",["T_WHITESPACE","\n        ",351],"}",["T_WHITESPACE","\n        ",352],["T_RETURN","return",353],["T_WHITESPACE"," ",353],["T_VARIABLE","$this",353],["T_OBJECT_OPERATOR","->",353],["T_STRING","_attributes",353],";",["T_WHITESPACE","\n    ",353],"}",["T_WHITESPACE","\n\n    ",354],["T_DOC_COMMENT","\/**\n     * Get customer attribute model object\n     *\n     * @param   string $attributeCode\n     * @return  Mage_Customer_Model_Entity_Attribute | null\n     *\/",356],["T_WHITESPACE","\n    ",361],["T_PUBLIC","public",362],["T_WHITESPACE"," ",362],["T_FUNCTION","function",362],["T_WHITESPACE"," ",362],["T_STRING","getAttribute",362],"(",["T_VARIABLE","$attributeCode",362],")",["T_WHITESPACE","\n    ",362],"{",["T_WHITESPACE","\n        ",363],["T_VARIABLE","$this",364],["T_OBJECT_OPERATOR","->",364],["T_STRING","getAttributes",364],"(",")",";",["T_WHITESPACE","\n        ",364],["T_IF","if",365],["T_WHITESPACE"," ",365],"(",["T_ISSET","isset",365],"(",["T_VARIABLE","$this",365],["T_OBJECT_OPERATOR","->",365],["T_STRING","_attributes",365],"[",["T_VARIABLE","$attributeCode",365],"]",")",")",["T_WHITESPACE"," ",365],"{",["T_WHITESPACE","\n            ",365],["T_RETURN","return",366],["T_WHITESPACE"," ",366],["T_VARIABLE","$this",366],["T_OBJECT_OPERATOR","->",366],["T_STRING","_attributes",366],"[",["T_VARIABLE","$attributeCode",366],"]",";",["T_WHITESPACE","\n        ",366],"}",["T_WHITESPACE","\n        ",367],["T_RETURN","return",368],["T_WHITESPACE"," ",368],["T_STRING","null",368],";",["T_WHITESPACE","\n    ",368],"}",["T_WHITESPACE","\n\n    ",369],["T_DOC_COMMENT","\/**\n     * Set plain and hashed password\n     *\n     * @param string $password\n     * @return Mage_Customer_Model_Customer\n     *\/",371],["T_WHITESPACE","\n    ",376],["T_PUBLIC","public",377],["T_WHITESPACE"," ",377],["T_FUNCTION","function",377],["T_WHITESPACE"," ",377],["T_STRING","setPassword",377],"(",["T_VARIABLE","$password",377],")",["T_WHITESPACE","\n    ",377],"{",["T_WHITESPACE","\n        ",378],["T_VARIABLE","$this",379],["T_OBJECT_OPERATOR","->",379],["T_STRING","setData",379],"(",["T_CONSTANT_ENCAPSED_STRING","'password'",379],",",["T_WHITESPACE"," ",379],["T_VARIABLE","$password",379],")",";",["T_WHITESPACE","\n        ",379],["T_VARIABLE","$this",380],["T_OBJECT_OPERATOR","->",380],["T_STRING","setPasswordHash",380],"(",["T_VARIABLE","$this",380],["T_OBJECT_OPERATOR","->",380],["T_STRING","hashPassword",380],"(",["T_VARIABLE","$password",380],")",")",";",["T_WHITESPACE","\n        ",380],["T_VARIABLE","$this",381],["T_OBJECT_OPERATOR","->",381],["T_STRING","setPasswordConfirmation",381],"(",["T_STRING","null",381],")",";",["T_WHITESPACE","\n        ",381],["T_RETURN","return",382],["T_WHITESPACE"," ",382],["T_VARIABLE","$this",382],";",["T_WHITESPACE","\n    ",382],"}",["T_WHITESPACE","\n\n    ",383],["T_DOC_COMMENT","\/**\n     * Hash customer password\n     *\n     * @param   string $password\n     * @param   int    $salt\n     * @return  string\n     *\/",385],["T_WHITESPACE","\n    ",391],["T_PUBLIC","public",392],["T_WHITESPACE"," ",392],["T_FUNCTION","function",392],["T_WHITESPACE"," ",392],["T_STRING","hashPassword",392],"(",["T_VARIABLE","$password",392],",",["T_WHITESPACE"," ",392],["T_VARIABLE","$salt",392],["T_WHITESPACE"," ",392],"=",["T_WHITESPACE"," ",392],["T_STRING","null",392],")",["T_WHITESPACE","\n    ",392],"{",["T_WHITESPACE","\n        ",393],["T_RETURN","return",394],["T_WHITESPACE"," ",394],["T_VARIABLE","$this",394],["T_OBJECT_OPERATOR","->",394],["T_STRING","_getHelper",394],"(",["T_CONSTANT_ENCAPSED_STRING","'core'",394],")",["T_WHITESPACE","\n            ",394],["T_OBJECT_OPERATOR","->",395],["T_STRING","getHash",395],"(",["T_STRING","trim",395],"(",["T_VARIABLE","$password",395],")",",",["T_WHITESPACE"," ",395],"!",["T_STRING","is_null",395],"(",["T_VARIABLE","$salt",395],")",["T_WHITESPACE"," ",395],"?",["T_WHITESPACE"," ",395],["T_VARIABLE","$salt",395],["T_WHITESPACE"," ",395],":",["T_WHITESPACE"," ",395],["T_STRING","Mage_Admin_Model_User",395],["T_DOUBLE_COLON","::",395],["T_STRING","HASH_SALT_LENGTH",395],")",";",["T_WHITESPACE","\n    ",395],"}",["T_WHITESPACE","\n\n    ",396],["T_DOC_COMMENT","\/**\n     * Get helper instance\n     *\n     * @param string $helperName\n     * @return Mage_Core_Helper_Abstract\n     *\/",398],["T_WHITESPACE","\n    ",403],["T_PROTECTED","protected",404],["T_WHITESPACE"," ",404],["T_FUNCTION","function",404],["T_WHITESPACE"," ",404],["T_STRING","_getHelper",404],"(",["T_VARIABLE","$helperName",404],")",["T_WHITESPACE","\n    ",404],"{",["T_WHITESPACE","\n        ",405],["T_RETURN","return",406],["T_WHITESPACE"," ",406],["T_STRING","Mage",406],["T_DOUBLE_COLON","::",406],["T_STRING","helper",406],"(",["T_VARIABLE","$helperName",406],")",";",["T_WHITESPACE","\n    ",406],"}",["T_WHITESPACE","\n\n    ",407],["T_DOC_COMMENT","\/**\n     * Retrieve random password\n     *\n     * @param   int $length\n     * @return  string\n     *\/",409],["T_WHITESPACE","\n    ",414],["T_PUBLIC","public",415],["T_WHITESPACE"," ",415],["T_FUNCTION","function",415],["T_WHITESPACE"," ",415],["T_STRING","generatePassword",415],"(",["T_VARIABLE","$length",415],["T_WHITESPACE"," ",415],"=",["T_WHITESPACE"," ",415],["T_LNUMBER","8",415],")",["T_WHITESPACE","\n    ",415],"{",["T_WHITESPACE","\n        ",416],["T_VARIABLE","$chars",417],["T_WHITESPACE"," ",417],"=",["T_WHITESPACE"," ",417],["T_STRING","Mage_Core_Helper_Data",417],["T_DOUBLE_COLON","::",417],["T_STRING","CHARS_PASSWORD_LOWERS",417],["T_WHITESPACE","\n            ",417],".",["T_WHITESPACE"," ",418],["T_STRING","Mage_Core_Helper_Data",418],["T_DOUBLE_COLON","::",418],["T_STRING","CHARS_PASSWORD_UPPERS",418],["T_WHITESPACE","\n            ",418],".",["T_WHITESPACE"," ",419],["T_STRING","Mage_Core_Helper_Data",419],["T_DOUBLE_COLON","::",419],["T_STRING","CHARS_PASSWORD_DIGITS",419],["T_WHITESPACE","\n            ",419],".",["T_WHITESPACE"," ",420],["T_STRING","Mage_Core_Helper_Data",420],["T_DOUBLE_COLON","::",420],["T_STRING","CHARS_PASSWORD_SPECIALS",420],";",["T_WHITESPACE","\n        ",420],["T_RETURN","return",421],["T_WHITESPACE"," ",421],["T_STRING","Mage",421],["T_DOUBLE_COLON","::",421],["T_STRING","helper",421],"(",["T_CONSTANT_ENCAPSED_STRING","'core'",421],")",["T_OBJECT_OPERATOR","->",421],["T_STRING","getRandomString",421],"(",["T_VARIABLE","$length",421],",",["T_WHITESPACE"," ",421],["T_VARIABLE","$chars",421],")",";",["T_WHITESPACE","\n    ",421],"}",["T_WHITESPACE","\n\n    ",422],["T_DOC_COMMENT","\/**\n     * Validate password with salted hash\n     *\n     * @param string $password\n     * @return boolean\n     *\/",424],["T_WHITESPACE","\n    ",429],["T_PUBLIC","public",430],["T_WHITESPACE"," ",430],["T_FUNCTION","function",430],["T_WHITESPACE"," ",430],["T_STRING","validatePassword",430],"(",["T_VARIABLE","$password",430],")",["T_WHITESPACE","\n    ",430],"{",["T_WHITESPACE","\n        ",431],["T_VARIABLE","$hash",432],["T_WHITESPACE"," ",432],"=",["T_WHITESPACE"," ",432],["T_VARIABLE","$this",432],["T_OBJECT_OPERATOR","->",432],["T_STRING","getPasswordHash",432],"(",")",";",["T_WHITESPACE","\n        ",432],["T_IF","if",433],["T_WHITESPACE"," ",433],"(","!",["T_VARIABLE","$hash",433],")",["T_WHITESPACE"," ",433],"{",["T_WHITESPACE","\n            ",433],["T_RETURN","return",434],["T_WHITESPACE"," ",434],["T_STRING","false",434],";",["T_WHITESPACE","\n        ",434],"}",["T_WHITESPACE","\n        ",435],["T_RETURN","return",436],["T_WHITESPACE"," ",436],["T_STRING","Mage",436],["T_DOUBLE_COLON","::",436],["T_STRING","helper",436],"(",["T_CONSTANT_ENCAPSED_STRING","'core'",436],")",["T_OBJECT_OPERATOR","->",436],["T_STRING","validateHash",436],"(",["T_VARIABLE","$password",436],",",["T_WHITESPACE"," ",436],["T_VARIABLE","$hash",436],")",";",["T_WHITESPACE","\n    ",436],"}",["T_WHITESPACE","\n\n\n    ",437],["T_DOC_COMMENT","\/**\n     * Encrypt password\n     *\n     * @param   string $password\n     * @return  string\n     *\/",440],["T_WHITESPACE","\n    ",445],["T_PUBLIC","public",446],["T_WHITESPACE"," ",446],["T_FUNCTION","function",446],["T_WHITESPACE"," ",446],["T_STRING","encryptPassword",446],"(",["T_VARIABLE","$password",446],")",["T_WHITESPACE","\n    ",446],"{",["T_WHITESPACE","\n        ",447],["T_RETURN","return",448],["T_WHITESPACE"," ",448],["T_STRING","Mage",448],["T_DOUBLE_COLON","::",448],["T_STRING","helper",448],"(",["T_CONSTANT_ENCAPSED_STRING","'core'",448],")",["T_OBJECT_OPERATOR","->",448],["T_STRING","encrypt",448],"(",["T_VARIABLE","$password",448],")",";",["T_WHITESPACE","\n    ",448],"}",["T_WHITESPACE","\n\n    ",449],["T_DOC_COMMENT","\/**\n     * Decrypt password\n     *\n     * @param   string $password\n     * @return  string\n     *\/",451],["T_WHITESPACE","\n    ",456],["T_PUBLIC","public",457],["T_WHITESPACE"," ",457],["T_FUNCTION","function",457],["T_WHITESPACE"," ",457],["T_STRING","decryptPassword",457],"(",["T_VARIABLE","$password",457],")",["T_WHITESPACE","\n    ",457],"{",["T_WHITESPACE","\n        ",458],["T_RETURN","return",459],["T_WHITESPACE"," ",459],["T_STRING","Mage",459],["T_DOUBLE_COLON","::",459],["T_STRING","helper",459],"(",["T_CONSTANT_ENCAPSED_STRING","'core'",459],")",["T_OBJECT_OPERATOR","->",459],["T_STRING","decrypt",459],"(",["T_VARIABLE","$password",459],")",";",["T_WHITESPACE","\n    ",459],"}",["T_WHITESPACE","\n\n    ",460],["T_DOC_COMMENT","\/**\n     * Retrieve default address by type(attribute)\n     *\n     * @param   string $attributeCode address type attribute code\n     * @return  Mage_Customer_Model_Address\n     *\/",462],["T_WHITESPACE","\n    ",467],["T_PUBLIC","public",468],["T_WHITESPACE"," ",468],["T_FUNCTION","function",468],["T_WHITESPACE"," ",468],["T_STRING","getPrimaryAddress",468],"(",["T_VARIABLE","$attributeCode",468],")",["T_WHITESPACE","\n    ",468],"{",["T_WHITESPACE","\n        ",469],["T_VARIABLE","$primaryAddress",470],["T_WHITESPACE"," ",470],"=",["T_WHITESPACE"," ",470],["T_VARIABLE","$this",470],["T_OBJECT_OPERATOR","->",470],["T_STRING","getAddressesCollection",470],"(",")",["T_OBJECT_OPERATOR","->",470],["T_STRING","getItemById",470],"(",["T_VARIABLE","$this",470],["T_OBJECT_OPERATOR","->",470],["T_STRING","getData",470],"(",["T_VARIABLE","$attributeCode",470],")",")",";",["T_WHITESPACE","\n\n        ",470],["T_RETURN","return",472],["T_WHITESPACE"," ",472],["T_VARIABLE","$primaryAddress",472],["T_WHITESPACE"," ",472],"?",["T_WHITESPACE"," ",472],["T_VARIABLE","$primaryAddress",472],["T_WHITESPACE"," ",472],":",["T_WHITESPACE"," ",472],["T_STRING","false",472],";",["T_WHITESPACE","\n    ",472],"}",["T_WHITESPACE","\n\n    ",473],["T_DOC_COMMENT","\/**\n     * Get customer default billing address\n     *\n     * @return Mage_Customer_Model_Address\n     *\/",475],["T_WHITESPACE","\n    ",479],["T_PUBLIC","public",480],["T_WHITESPACE"," ",480],["T_FUNCTION","function",480],["T_WHITESPACE"," ",480],["T_STRING","getPrimaryBillingAddress",480],"(",")",["T_WHITESPACE","\n    ",480],"{",["T_WHITESPACE","\n        ",481],["T_RETURN","return",482],["T_WHITESPACE"," ",482],["T_VARIABLE","$this",482],["T_OBJECT_OPERATOR","->",482],["T_STRING","getPrimaryAddress",482],"(",["T_CONSTANT_ENCAPSED_STRING","'default_billing'",482],")",";",["T_WHITESPACE","\n    ",482],"}",["T_WHITESPACE","\n\n    ",483],["T_DOC_COMMENT","\/**\n     * Get customer default billing address\n     *\n     * @return Mage_Customer_Model_Address\n     *\/",485],["T_WHITESPACE","\n    ",489],["T_PUBLIC","public",490],["T_WHITESPACE"," ",490],["T_FUNCTION","function",490],["T_WHITESPACE"," ",490],["T_STRING","getDefaultBillingAddress",490],"(",")",["T_WHITESPACE","\n    ",490],"{",["T_WHITESPACE","\n        ",491],["T_RETURN","return",492],["T_WHITESPACE"," ",492],["T_VARIABLE","$this",492],["T_OBJECT_OPERATOR","->",492],["T_STRING","getPrimaryBillingAddress",492],"(",")",";",["T_WHITESPACE","\n    ",492],"}",["T_WHITESPACE","\n\n    ",493],["T_DOC_COMMENT","\/**\n     * Get default customer shipping address\n     *\n     * @return Mage_Customer_Model_Address\n     *\/",495],["T_WHITESPACE","\n    ",499],["T_PUBLIC","public",500],["T_WHITESPACE"," ",500],["T_FUNCTION","function",500],["T_WHITESPACE"," ",500],["T_STRING","getPrimaryShippingAddress",500],"(",")",["T_WHITESPACE","\n    ",500],"{",["T_WHITESPACE","\n        ",501],["T_RETURN","return",502],["T_WHITESPACE"," ",502],["T_VARIABLE","$this",502],["T_OBJECT_OPERATOR","->",502],["T_STRING","getPrimaryAddress",502],"(",["T_CONSTANT_ENCAPSED_STRING","'default_shipping'",502],")",";",["T_WHITESPACE","\n    ",502],"}",["T_WHITESPACE","\n\n    ",503],["T_DOC_COMMENT","\/**\n     * Get default customer shipping address\n     *\n     * @return Mage_Customer_Model_Address\n     *\/",505],["T_WHITESPACE","\n    ",509],["T_PUBLIC","public",510],["T_WHITESPACE"," ",510],["T_FUNCTION","function",510],["T_WHITESPACE"," ",510],["T_STRING","getDefaultShippingAddress",510],"(",")",["T_WHITESPACE","\n    ",510],"{",["T_WHITESPACE","\n        ",511],["T_RETURN","return",512],["T_WHITESPACE"," ",512],["T_VARIABLE","$this",512],["T_OBJECT_OPERATOR","->",512],["T_STRING","getPrimaryShippingAddress",512],"(",")",";",["T_WHITESPACE","\n    ",512],"}",["T_WHITESPACE","\n\n    ",513],["T_DOC_COMMENT","\/**\n     * Retrieve ids of default addresses\n     *\n     * @return array\n     *\/",515],["T_WHITESPACE","\n    ",519],["T_PUBLIC","public",520],["T_WHITESPACE"," ",520],["T_FUNCTION","function",520],["T_WHITESPACE"," ",520],["T_STRING","getPrimaryAddressIds",520],"(",")",["T_WHITESPACE","\n    ",520],"{",["T_WHITESPACE","\n        ",521],["T_VARIABLE","$ids",522],["T_WHITESPACE"," ",522],"=",["T_WHITESPACE"," ",522],["T_ARRAY","array",522],"(",")",";",["T_WHITESPACE","\n        ",522],["T_IF","if",523],["T_WHITESPACE"," ",523],"(",["T_VARIABLE","$this",523],["T_OBJECT_OPERATOR","->",523],["T_STRING","getDefaultBilling",523],"(",")",")",["T_WHITESPACE"," ",523],"{",["T_WHITESPACE","\n            ",523],["T_VARIABLE","$ids",524],"[","]",["T_WHITESPACE"," ",524],"=",["T_WHITESPACE"," ",524],["T_VARIABLE","$this",524],["T_OBJECT_OPERATOR","->",524],["T_STRING","getDefaultBilling",524],"(",")",";",["T_WHITESPACE","\n        ",524],"}",["T_WHITESPACE","\n        ",525],["T_IF","if",526],["T_WHITESPACE"," ",526],"(",["T_VARIABLE","$this",526],["T_OBJECT_OPERATOR","->",526],["T_STRING","getDefaultShipping",526],"(",")",")",["T_WHITESPACE"," ",526],"{",["T_WHITESPACE","\n            ",526],["T_VARIABLE","$ids",527],"[","]",["T_WHITESPACE"," ",527],"=",["T_WHITESPACE"," ",527],["T_VARIABLE","$this",527],["T_OBJECT_OPERATOR","->",527],["T_STRING","getDefaultShipping",527],"(",")",";",["T_WHITESPACE","\n        ",527],"}",["T_WHITESPACE","\n        ",528],["T_RETURN","return",529],["T_WHITESPACE"," ",529],["T_VARIABLE","$ids",529],";",["T_WHITESPACE","\n    ",529],"}",["T_WHITESPACE","\n\n    ",530],["T_DOC_COMMENT","\/**\n     * Retrieve all customer default addresses\n     *\n     * @return array\n     *\/",532],["T_WHITESPACE","\n    ",536],["T_PUBLIC","public",537],["T_WHITESPACE"," ",537],["T_FUNCTION","function",537],["T_WHITESPACE"," ",537],["T_STRING","getPrimaryAddresses",537],"(",")",["T_WHITESPACE","\n    ",537],"{",["T_WHITESPACE","\n        ",538],["T_VARIABLE","$addresses",539],["T_WHITESPACE"," ",539],"=",["T_WHITESPACE"," ",539],["T_ARRAY","array",539],"(",")",";",["T_WHITESPACE","\n        ",539],["T_VARIABLE","$primaryBilling",540],["T_WHITESPACE"," ",540],"=",["T_WHITESPACE"," ",540],["T_VARIABLE","$this",540],["T_OBJECT_OPERATOR","->",540],["T_STRING","getPrimaryBillingAddress",540],"(",")",";",["T_WHITESPACE","\n        ",540],["T_IF","if",541],["T_WHITESPACE"," ",541],"(",["T_VARIABLE","$primaryBilling",541],")",["T_WHITESPACE"," ",541],"{",["T_WHITESPACE","\n            ",541],["T_VARIABLE","$addresses",542],"[","]",["T_WHITESPACE"," ",542],"=",["T_WHITESPACE"," ",542],["T_VARIABLE","$primaryBilling",542],";",["T_WHITESPACE","\n            ",542],["T_VARIABLE","$primaryBilling",543],["T_OBJECT_OPERATOR","->",543],["T_STRING","setIsPrimaryBilling",543],"(",["T_STRING","true",543],")",";",["T_WHITESPACE","\n        ",543],"}",["T_WHITESPACE","\n\n        ",544],["T_VARIABLE","$primaryShipping",546],["T_WHITESPACE"," ",546],"=",["T_WHITESPACE"," ",546],["T_VARIABLE","$this",546],["T_OBJECT_OPERATOR","->",546],["T_STRING","getPrimaryShippingAddress",546],"(",")",";",["T_WHITESPACE","\n        ",546],["T_IF","if",547],["T_WHITESPACE"," ",547],"(",["T_VARIABLE","$primaryShipping",547],")",["T_WHITESPACE"," ",547],"{",["T_WHITESPACE","\n            ",547],["T_IF","if",548],["T_WHITESPACE"," ",548],"(",["T_VARIABLE","$primaryBilling",548],["T_OBJECT_OPERATOR","->",548],["T_STRING","getId",548],"(",")",["T_WHITESPACE"," ",548],["T_IS_EQUAL","==",548],["T_WHITESPACE"," ",548],["T_VARIABLE","$primaryShipping",548],["T_OBJECT_OPERATOR","->",548],["T_STRING","getId",548],"(",")",")",["T_WHITESPACE"," ",548],"{",["T_WHITESPACE","\n                ",548],["T_VARIABLE","$primaryBilling",549],["T_OBJECT_OPERATOR","->",549],["T_STRING","setIsPrimaryShipping",549],"(",["T_STRING","true",549],")",";",["T_WHITESPACE","\n            ",549],"}",["T_WHITESPACE"," ",550],["T_ELSE","else",550],["T_WHITESPACE"," ",550],"{",["T_WHITESPACE","\n                ",550],["T_VARIABLE","$primaryShipping",551],["T_OBJECT_OPERATOR","->",551],["T_STRING","setIsPrimaryShipping",551],"(",["T_STRING","true",551],")",";",["T_WHITESPACE","\n                ",551],["T_VARIABLE","$addresses",552],"[","]",["T_WHITESPACE"," ",552],"=",["T_WHITESPACE"," ",552],["T_VARIABLE","$primaryShipping",552],";",["T_WHITESPACE","\n            ",552],"}",["T_WHITESPACE","\n        ",553],"}",["T_WHITESPACE","\n        ",554],["T_RETURN","return",555],["T_WHITESPACE"," ",555],["T_VARIABLE","$addresses",555],";",["T_WHITESPACE","\n    ",555],"}",["T_WHITESPACE","\n\n    ",556],["T_DOC_COMMENT","\/**\n     * Retrieve not default addresses\n     *\n     * @return array\n     *\/",558],["T_WHITESPACE","\n    ",562],["T_PUBLIC","public",563],["T_WHITESPACE"," ",563],["T_FUNCTION","function",563],["T_WHITESPACE"," ",563],["T_STRING","getAdditionalAddresses",563],"(",")",["T_WHITESPACE","\n    ",563],"{",["T_WHITESPACE","\n        ",564],["T_VARIABLE","$addresses",565],["T_WHITESPACE"," ",565],"=",["T_WHITESPACE"," ",565],["T_ARRAY","array",565],"(",")",";",["T_WHITESPACE","\n        ",565],["T_VARIABLE","$primatyIds",566],["T_WHITESPACE"," ",566],"=",["T_WHITESPACE"," ",566],["T_VARIABLE","$this",566],["T_OBJECT_OPERATOR","->",566],["T_STRING","getPrimaryAddressIds",566],"(",")",";",["T_WHITESPACE","\n        ",566],["T_FOREACH","foreach",567],["T_WHITESPACE"," ",567],"(",["T_VARIABLE","$this",567],["T_OBJECT_OPERATOR","->",567],["T_STRING","getAddressesCollection",567],"(",")",["T_WHITESPACE"," ",567],["T_AS","as",567],["T_WHITESPACE"," ",567],["T_VARIABLE","$address",567],")",["T_WHITESPACE"," ",567],"{",["T_WHITESPACE","\n            ",567],["T_IF","if",568],["T_WHITESPACE"," ",568],"(","!",["T_STRING","in_array",568],"(",["T_VARIABLE","$address",568],["T_OBJECT_OPERATOR","->",568],["T_STRING","getId",568],"(",")",",",["T_WHITESPACE"," ",568],["T_VARIABLE","$primatyIds",568],")",")",["T_WHITESPACE"," ",568],"{",["T_WHITESPACE","\n                ",568],["T_VARIABLE","$addresses",569],"[","]",["T_WHITESPACE"," ",569],"=",["T_WHITESPACE"," ",569],["T_VARIABLE","$address",569],";",["T_WHITESPACE","\n            ",569],"}",["T_WHITESPACE","\n        ",570],"}",["T_WHITESPACE","\n        ",571],["T_RETURN","return",572],["T_WHITESPACE"," ",572],["T_VARIABLE","$addresses",572],";",["T_WHITESPACE","\n    ",572],"}",["T_WHITESPACE","\n\n    ",573],["T_DOC_COMMENT","\/**\n     * Check if address is primary\n     *\n     * @param Mage_Customer_Model_Address $address\n     * @return boolean\n     *\/",575],["T_WHITESPACE","\n    ",580],["T_PUBLIC","public",581],["T_WHITESPACE"," ",581],["T_FUNCTION","function",581],["T_WHITESPACE"," ",581],["T_STRING","isAddressPrimary",581],"(",["T_STRING","Mage_Customer_Model_Address",581],["T_WHITESPACE"," ",581],["T_VARIABLE","$address",581],")",["T_WHITESPACE","\n    ",581],"{",["T_WHITESPACE","\n        ",582],["T_IF","if",583],["T_WHITESPACE"," ",583],"(","!",["T_VARIABLE","$address",583],["T_OBJECT_OPERATOR","->",583],["T_STRING","getId",583],"(",")",")",["T_WHITESPACE"," ",583],"{",["T_WHITESPACE","\n            ",583],["T_RETURN","return",584],["T_WHITESPACE"," ",584],["T_STRING","false",584],";",["T_WHITESPACE","\n        ",584],"}",["T_WHITESPACE","\n        ",585],["T_RETURN","return",586],["T_WHITESPACE"," ",586],"(",["T_VARIABLE","$address",586],["T_OBJECT_OPERATOR","->",586],["T_STRING","getId",586],"(",")",["T_WHITESPACE"," ",586],["T_IS_EQUAL","==",586],["T_WHITESPACE"," ",586],["T_VARIABLE","$this",586],["T_OBJECT_OPERATOR","->",586],["T_STRING","getDefaultBilling",586],"(",")",")",["T_WHITESPACE"," ",586],["T_BOOLEAN_OR","||",586],["T_WHITESPACE"," ",586],"(",["T_VARIABLE","$address",586],["T_OBJECT_OPERATOR","->",586],["T_STRING","getId",586],"(",")",["T_WHITESPACE"," ",586],["T_IS_EQUAL","==",586],["T_WHITESPACE"," ",586],["T_VARIABLE","$this",586],["T_OBJECT_OPERATOR","->",586],["T_STRING","getDefaultShipping",586],"(",")",")",";",["T_WHITESPACE","\n    ",586],"}",["T_WHITESPACE","\n\n    ",587],["T_DOC_COMMENT","\/**\n     * Send email with new account related information\n     *\n     * @param string $type\n     * @param string $backUrl\n     * @param string $storeId\n     * @param string $password\n     * @throws Mage_Core_Exception\n     * @return Mage_Customer_Model_Customer\n     *\/",589],["T_WHITESPACE","\n    ",598],["T_PUBLIC","public",599],["T_WHITESPACE"," ",599],["T_FUNCTION","function",599],["T_WHITESPACE"," ",599],["T_STRING","sendNewAccountEmail",599],"(",["T_VARIABLE","$type",599],["T_WHITESPACE"," ",599],"=",["T_WHITESPACE"," ",599],["T_CONSTANT_ENCAPSED_STRING","'registered'",599],",",["T_WHITESPACE"," ",599],["T_VARIABLE","$backUrl",599],["T_WHITESPACE"," ",599],"=",["T_WHITESPACE"," ",599],["T_CONSTANT_ENCAPSED_STRING","''",599],",",["T_WHITESPACE"," ",599],["T_VARIABLE","$storeId",599],["T_WHITESPACE"," ",599],"=",["T_WHITESPACE"," ",599],["T_CONSTANT_ENCAPSED_STRING","'0'",599],",",["T_WHITESPACE"," ",599],["T_VARIABLE","$password",599],["T_WHITESPACE"," ",599],"=",["T_WHITESPACE"," ",599],["T_STRING","null",599],")",["T_WHITESPACE","\n    ",599],"{",["T_WHITESPACE","\n        ",600],["T_VARIABLE","$types",601],["T_WHITESPACE"," ",601],"=",["T_WHITESPACE"," ",601],["T_ARRAY","array",601],"(",["T_WHITESPACE","\n            ",601],["T_CONSTANT_ENCAPSED_STRING","'registered'",602],["T_WHITESPACE","   ",602],["T_DOUBLE_ARROW","=>",602],["T_WHITESPACE"," ",602],["T_STRING","self",602],["T_DOUBLE_COLON","::",602],["T_STRING","XML_PATH_REGISTER_EMAIL_TEMPLATE",602],",",["T_WHITESPACE"," ",602],["T_COMMENT","\/\/ welcome email, when confirmation is disabled\n",602],["T_WHITESPACE","            ",603],["T_CONSTANT_ENCAPSED_STRING","'confirmed'",603],["T_WHITESPACE","    ",603],["T_DOUBLE_ARROW","=>",603],["T_WHITESPACE"," ",603],["T_STRING","self",603],["T_DOUBLE_COLON","::",603],["T_STRING","XML_PATH_CONFIRMED_EMAIL_TEMPLATE",603],",",["T_WHITESPACE"," ",603],["T_COMMENT","\/\/ welcome email, when confirmation is enabled\n",603],["T_WHITESPACE","            ",604],["T_CONSTANT_ENCAPSED_STRING","'confirmation'",604],["T_WHITESPACE"," ",604],["T_DOUBLE_ARROW","=>",604],["T_WHITESPACE"," ",604],["T_STRING","self",604],["T_DOUBLE_COLON","::",604],["T_STRING","XML_PATH_CONFIRM_EMAIL_TEMPLATE",604],",",["T_WHITESPACE"," ",604],["T_COMMENT","\/\/ email with confirmation link\n",604],["T_WHITESPACE","        ",605],")",";",["T_WHITESPACE","\n        ",605],["T_IF","if",606],["T_WHITESPACE"," ",606],"(","!",["T_ISSET","isset",606],"(",["T_VARIABLE","$types",606],"[",["T_VARIABLE","$type",606],"]",")",")",["T_WHITESPACE"," ",606],"{",["T_WHITESPACE","\n            ",606],["T_STRING","Mage",607],["T_DOUBLE_COLON","::",607],["T_STRING","throwException",607],"(",["T_STRING","Mage",607],["T_DOUBLE_COLON","::",607],["T_STRING","helper",607],"(",["T_CONSTANT_ENCAPSED_STRING","'customer'",607],")",["T_OBJECT_OPERATOR","->",607],["T_STRING","__",607],"(",["T_CONSTANT_ENCAPSED_STRING","'Wrong transactional account email type'",607],")",")",";",["T_WHITESPACE","\n        ",607],"}",["T_WHITESPACE","\n\n        ",608],["T_IF","if",610],["T_WHITESPACE"," ",610],"(","!",["T_VARIABLE","$storeId",610],")",["T_WHITESPACE"," ",610],"{",["T_WHITESPACE","\n            ",610],["T_VARIABLE","$storeId",611],["T_WHITESPACE"," ",611],"=",["T_WHITESPACE"," ",611],["T_VARIABLE","$this",611],["T_OBJECT_OPERATOR","->",611],["T_STRING","_getWebsiteStoreId",611],"(",["T_VARIABLE","$this",611],["T_OBJECT_OPERATOR","->",611],["T_STRING","getSendemailStoreId",611],"(",")",")",";",["T_WHITESPACE","\n        ",611],"}",["T_WHITESPACE","\n\n        ",612],["T_IF","if",614],["T_WHITESPACE"," ",614],"(","!",["T_STRING","is_null",614],"(",["T_VARIABLE","$password",614],")",")",["T_WHITESPACE"," ",614],"{",["T_WHITESPACE","\n            ",614],["T_VARIABLE","$this",615],["T_OBJECT_OPERATOR","->",615],["T_STRING","setPassword",615],"(",["T_VARIABLE","$password",615],")",";",["T_WHITESPACE","\n        ",615],"}",["T_WHITESPACE","\n\n        ",616],["T_VARIABLE","$this",618],["T_OBJECT_OPERATOR","->",618],["T_STRING","_sendEmailTemplate",618],"(",["T_VARIABLE","$types",618],"[",["T_VARIABLE","$type",618],"]",",",["T_WHITESPACE"," ",618],["T_STRING","self",618],["T_DOUBLE_COLON","::",618],["T_STRING","XML_PATH_REGISTER_EMAIL_IDENTITY",618],",",["T_WHITESPACE","\n            ",618],["T_ARRAY","array",619],"(",["T_CONSTANT_ENCAPSED_STRING","'customer'",619],["T_WHITESPACE"," ",619],["T_DOUBLE_ARROW","=>",619],["T_WHITESPACE"," ",619],["T_VARIABLE","$this",619],",",["T_WHITESPACE"," ",619],["T_CONSTANT_ENCAPSED_STRING","'back_url'",619],["T_WHITESPACE"," ",619],["T_DOUBLE_ARROW","=>",619],["T_WHITESPACE"," ",619],["T_VARIABLE","$backUrl",619],")",",",["T_WHITESPACE"," ",619],["T_VARIABLE","$storeId",619],")",";",["T_WHITESPACE","\n        ",619],["T_VARIABLE","$this",620],["T_OBJECT_OPERATOR","->",620],["T_STRING","cleanPasswordsValidationData",620],"(",")",";",["T_WHITESPACE","\n\n        ",620],["T_RETURN","return",622],["T_WHITESPACE"," ",622],["T_VARIABLE","$this",622],";",["T_WHITESPACE","\n    ",622],"}",["T_WHITESPACE","\n\n    ",623],["T_DOC_COMMENT","\/**\n     * Check if accounts confirmation is required in config\n     *\n     * @return bool\n     *\/",625],["T_WHITESPACE","\n    ",629],["T_PUBLIC","public",630],["T_WHITESPACE"," ",630],["T_FUNCTION","function",630],["T_WHITESPACE"," ",630],["T_STRING","isConfirmationRequired",630],"(",")",["T_WHITESPACE","\n    ",630],"{",["T_WHITESPACE","\n        ",631],["T_IF","if",632],["T_WHITESPACE"," ",632],"(",["T_VARIABLE","$this",632],["T_OBJECT_OPERATOR","->",632],["T_STRING","canSkipConfirmation",632],"(",")",")",["T_WHITESPACE"," ",632],"{",["T_WHITESPACE","\n            ",632],["T_RETURN","return",633],["T_WHITESPACE"," ",633],["T_STRING","false",633],";",["T_WHITESPACE","\n        ",633],"}",["T_WHITESPACE","\n        ",634],["T_IF","if",635],["T_WHITESPACE"," ",635],"(",["T_STRING","self",635],["T_DOUBLE_COLON","::",635],["T_VARIABLE","$_isConfirmationRequired",635],["T_WHITESPACE"," ",635],["T_IS_IDENTICAL","===",635],["T_WHITESPACE"," ",635],["T_STRING","null",635],")",["T_WHITESPACE"," ",635],"{",["T_WHITESPACE","\n            ",635],["T_VARIABLE","$storeId",636],["T_WHITESPACE"," ",636],"=",["T_WHITESPACE"," ",636],["T_VARIABLE","$this",636],["T_OBJECT_OPERATOR","->",636],["T_STRING","getStoreId",636],"(",")",["T_WHITESPACE"," ",636],"?",["T_WHITESPACE"," ",636],["T_VARIABLE","$this",636],["T_OBJECT_OPERATOR","->",636],["T_STRING","getStoreId",636],"(",")",["T_WHITESPACE"," ",636],":",["T_WHITESPACE"," ",636],["T_STRING","null",636],";",["T_WHITESPACE","\n            ",636],["T_STRING","self",637],["T_DOUBLE_COLON","::",637],["T_VARIABLE","$_isConfirmationRequired",637],["T_WHITESPACE"," ",637],"=",["T_WHITESPACE"," ",637],["T_BOOL_CAST","(bool)",637],["T_STRING","Mage",637],["T_DOUBLE_COLON","::",637],["T_STRING","getStoreConfig",637],"(",["T_STRING","self",637],["T_DOUBLE_COLON","::",637],["T_STRING","XML_PATH_IS_CONFIRM",637],",",["T_WHITESPACE"," ",637],["T_VARIABLE","$storeId",637],")",";",["T_WHITESPACE","\n        ",637],"}",["T_WHITESPACE","\n\n        ",638],["T_RETURN","return",640],["T_WHITESPACE"," ",640],["T_STRING","self",640],["T_DOUBLE_COLON","::",640],["T_VARIABLE","$_isConfirmationRequired",640],";",["T_WHITESPACE","\n    ",640],"}",["T_WHITESPACE","\n\n    ",641],["T_DOC_COMMENT","\/**\n     * Generate random confirmation key\n     *\n     * @return string\n     *\/",643],["T_WHITESPACE","\n    ",647],["T_PUBLIC","public",648],["T_WHITESPACE"," ",648],["T_FUNCTION","function",648],["T_WHITESPACE"," ",648],["T_STRING","getRandomConfirmationKey",648],"(",")",["T_WHITESPACE","\n    ",648],"{",["T_WHITESPACE","\n        ",649],["T_RETURN","return",650],["T_WHITESPACE"," ",650],["T_STRING","md5",650],"(",["T_STRING","uniqid",650],"(",")",")",";",["T_WHITESPACE","\n    ",650],"}",["T_WHITESPACE","\n\n    ",651],["T_DOC_COMMENT","\/**\n     * Send email with new customer password\n     *\n     * @return Mage_Customer_Model_Customer\n     *\/",653],["T_WHITESPACE","\n    ",657],["T_PUBLIC","public",658],["T_WHITESPACE"," ",658],["T_FUNCTION","function",658],["T_WHITESPACE"," ",658],["T_STRING","sendPasswordReminderEmail",658],"(",")",["T_WHITESPACE","\n    ",658],"{",["T_WHITESPACE","\n        ",659],["T_VARIABLE","$storeId",660],["T_WHITESPACE"," ",660],"=",["T_WHITESPACE"," ",660],["T_VARIABLE","$this",660],["T_OBJECT_OPERATOR","->",660],["T_STRING","getStoreId",660],"(",")",";",["T_WHITESPACE","\n        ",660],["T_IF","if",661],["T_WHITESPACE"," ",661],"(","!",["T_VARIABLE","$storeId",661],")",["T_WHITESPACE"," ",661],"{",["T_WHITESPACE","\n            ",661],["T_VARIABLE","$storeId",662],["T_WHITESPACE"," ",662],"=",["T_WHITESPACE"," ",662],["T_VARIABLE","$this",662],["T_OBJECT_OPERATOR","->",662],["T_STRING","_getWebsiteStoreId",662],"(",")",";",["T_WHITESPACE","\n        ",662],"}",["T_WHITESPACE","\n\n        ",663],["T_VARIABLE","$this",665],["T_OBJECT_OPERATOR","->",665],["T_STRING","_sendEmailTemplate",665],"(",["T_STRING","self",665],["T_DOUBLE_COLON","::",665],["T_STRING","XML_PATH_REMIND_EMAIL_TEMPLATE",665],",",["T_WHITESPACE"," ",665],["T_STRING","self",665],["T_DOUBLE_COLON","::",665],["T_STRING","XML_PATH_FORGOT_EMAIL_IDENTITY",665],",",["T_WHITESPACE","\n            ",665],["T_ARRAY","array",666],"(",["T_CONSTANT_ENCAPSED_STRING","'customer'",666],["T_WHITESPACE"," ",666],["T_DOUBLE_ARROW","=>",666],["T_WHITESPACE"," ",666],["T_VARIABLE","$this",666],")",",",["T_WHITESPACE"," ",666],["T_VARIABLE","$storeId",666],")",";",["T_WHITESPACE","\n\n        ",666],["T_RETURN","return",668],["T_WHITESPACE"," ",668],["T_VARIABLE","$this",668],";",["T_WHITESPACE","\n    ",668],"}",["T_WHITESPACE","\n\n    ",669],["T_DOC_COMMENT","\/**\n     * Send info email about changed password or email\n     *\n     * @return Mage_Customer_Model_Customer\n     *\/",671],["T_WHITESPACE","\n    ",675],["T_PUBLIC","public",676],["T_WHITESPACE"," ",676],["T_FUNCTION","function",676],["T_WHITESPACE"," ",676],["T_STRING","sendChangedPasswordOrEmail",676],"(",")",["T_WHITESPACE","\n    ",676],"{",["T_WHITESPACE","\n        ",677],["T_VARIABLE","$storeId",678],["T_WHITESPACE"," ",678],"=",["T_WHITESPACE"," ",678],["T_VARIABLE","$this",678],["T_OBJECT_OPERATOR","->",678],["T_STRING","getStoreId",678],"(",")",";",["T_WHITESPACE","\n        ",678],["T_IF","if",679],["T_WHITESPACE"," ",679],"(","!",["T_VARIABLE","$storeId",679],")",["T_WHITESPACE"," ",679],"{",["T_WHITESPACE","\n            ",679],["T_VARIABLE","$storeId",680],["T_WHITESPACE"," ",680],"=",["T_WHITESPACE"," ",680],["T_VARIABLE","$this",680],["T_OBJECT_OPERATOR","->",680],["T_STRING","_getWebsiteStoreId",680],"(",")",";",["T_WHITESPACE","\n        ",680],"}",["T_WHITESPACE","\n\n        ",681],["T_VARIABLE","$this",683],["T_OBJECT_OPERATOR","->",683],["T_STRING","_sendEmailTemplate",683],"(",["T_STRING","self",683],["T_DOUBLE_COLON","::",683],["T_STRING","XML_PATH_CHANGED_PASSWORD_OR_EMAIL_TEMPLATE",683],",",["T_WHITESPACE","\n            ",683],["T_STRING","self",684],["T_DOUBLE_COLON","::",684],["T_STRING","XML_PATH_CHANGED_PASSWORD_OR_EMAIL_IDENTITY",684],",",["T_WHITESPACE","\n            ",684],["T_ARRAY","array",685],"(",["T_CONSTANT_ENCAPSED_STRING","'customer'",685],["T_WHITESPACE"," ",685],["T_DOUBLE_ARROW","=>",685],["T_WHITESPACE"," ",685],["T_VARIABLE","$this",685],")",",",["T_WHITESPACE"," ",685],["T_VARIABLE","$storeId",685],",",["T_WHITESPACE"," ",685],["T_VARIABLE","$this",685],["T_OBJECT_OPERATOR","->",685],["T_STRING","getOldEmail",685],"(",")",")",";",["T_WHITESPACE","\n\n        ",685],["T_RETURN","return",687],["T_WHITESPACE"," ",687],["T_VARIABLE","$this",687],";",["T_WHITESPACE","\n    ",687],"}",["T_WHITESPACE","\n\n    ",688],["T_DOC_COMMENT","\/**\n     * Send corresponding email template\n     *\n     * @param string $emailTemplate configuration path of email template\n     * @param string $emailSender configuration path of email identity\n     * @param array $templateParams\n     * @param int|null $storeId\n     * @param string|null $customerEmail\n     * @return Mage_Customer_Model_Customer\n     *\/",690],["T_WHITESPACE","\n    ",699],["T_PROTECTED","protected",700],["T_WHITESPACE"," ",700],["T_FUNCTION","function",700],["T_WHITESPACE"," ",700],["T_STRING","_sendEmailTemplate",700],"(",["T_VARIABLE","$template",700],",",["T_WHITESPACE"," ",700],["T_VARIABLE","$sender",700],",",["T_WHITESPACE"," ",700],["T_VARIABLE","$templateParams",700],["T_WHITESPACE"," ",700],"=",["T_WHITESPACE"," ",700],["T_ARRAY","array",700],"(",")",",",["T_WHITESPACE"," ",700],["T_VARIABLE","$storeId",700],["T_WHITESPACE"," ",700],"=",["T_WHITESPACE"," ",700],["T_STRING","null",700],",",["T_WHITESPACE"," ",700],["T_VARIABLE","$customerEmail",700],["T_WHITESPACE"," ",700],"=",["T_WHITESPACE"," ",700],["T_STRING","null",700],")",["T_WHITESPACE","\n    ",700],"{",["T_WHITESPACE","\n        ",701],["T_VARIABLE","$customerEmail",702],["T_WHITESPACE"," ",702],"=",["T_WHITESPACE"," ",702],"(",["T_VARIABLE","$customerEmail",702],")",["T_WHITESPACE"," ",702],"?",["T_WHITESPACE"," ",702],["T_VARIABLE","$customerEmail",702],["T_WHITESPACE"," ",702],":",["T_WHITESPACE"," ",702],["T_VARIABLE","$this",702],["T_OBJECT_OPERATOR","->",702],["T_STRING","getEmail",702],"(",")",";",["T_WHITESPACE","\n        ",702],["T_DOC_COMMENT","\/** @var $mailer Mage_Core_Model_Email_Template_Mailer *\/",703],["T_WHITESPACE","\n        ",703],["T_VARIABLE","$mailer",704],["T_WHITESPACE"," ",704],"=",["T_WHITESPACE"," ",704],["T_STRING","Mage",704],["T_DOUBLE_COLON","::",704],["T_STRING","getModel",704],"(",["T_CONSTANT_ENCAPSED_STRING","'core\/email_template_mailer'",704],")",";",["T_WHITESPACE","\n        ",704],["T_VARIABLE","$emailInfo",705],["T_WHITESPACE"," ",705],"=",["T_WHITESPACE"," ",705],["T_STRING","Mage",705],["T_DOUBLE_COLON","::",705],["T_STRING","getModel",705],"(",["T_CONSTANT_ENCAPSED_STRING","'core\/email_info'",705],")",";",["T_WHITESPACE","\n        ",705],["T_VARIABLE","$emailInfo",706],["T_OBJECT_OPERATOR","->",706],["T_STRING","addTo",706],"(",["T_VARIABLE","$customerEmail",706],",",["T_WHITESPACE"," ",706],["T_VARIABLE","$this",706],["T_OBJECT_OPERATOR","->",706],["T_STRING","getName",706],"(",")",")",";",["T_WHITESPACE","\n        ",706],["T_VARIABLE","$mailer",707],["T_OBJECT_OPERATOR","->",707],["T_STRING","addEmailInfo",707],"(",["T_VARIABLE","$emailInfo",707],")",";",["T_WHITESPACE","\n\n        ",707],["T_COMMENT","\/\/ Set all required params and send emails\n",709],["T_WHITESPACE","        ",710],["T_VARIABLE","$mailer",710],["T_OBJECT_OPERATOR","->",710],["T_STRING","setSender",710],"(",["T_STRING","Mage",710],["T_DOUBLE_COLON","::",710],["T_STRING","getStoreConfig",710],"(",["T_VARIABLE","$sender",710],",",["T_WHITESPACE"," ",710],["T_VARIABLE","$storeId",710],")",")",";",["T_WHITESPACE","\n        ",710],["T_VARIABLE","$mailer",711],["T_OBJECT_OPERATOR","->",711],["T_STRING","setStoreId",711],"(",["T_VARIABLE","$storeId",711],")",";",["T_WHITESPACE","\n        ",711],["T_VARIABLE","$mailer",712],["T_OBJECT_OPERATOR","->",712],["T_STRING","setTemplateId",712],"(",["T_STRING","Mage",712],["T_DOUBLE_COLON","::",712],["T_STRING","getStoreConfig",712],"(",["T_VARIABLE","$template",712],",",["T_WHITESPACE"," ",712],["T_VARIABLE","$storeId",712],")",")",";",["T_WHITESPACE","\n        ",712],["T_VARIABLE","$mailer",713],["T_OBJECT_OPERATOR","->",713],["T_STRING","setTemplateParams",713],"(",["T_VARIABLE","$templateParams",713],")",";",["T_WHITESPACE","\n        ",713],["T_VARIABLE","$mailer",714],["T_OBJECT_OPERATOR","->",714],["T_STRING","send",714],"(",")",";",["T_WHITESPACE","\n        ",714],["T_RETURN","return",715],["T_WHITESPACE"," ",715],["T_VARIABLE","$this",715],";",["T_WHITESPACE","\n    ",715],"}",["T_WHITESPACE","\n\n    ",716],["T_DOC_COMMENT","\/**\n     * Send email with reset password confirmation link\n     *\n     * @return Mage_Customer_Model_Customer\n     *\/",718],["T_WHITESPACE","\n    ",722],["T_PUBLIC","public",723],["T_WHITESPACE"," ",723],["T_FUNCTION","function",723],["T_WHITESPACE"," ",723],["T_STRING","sendPasswordResetConfirmationEmail",723],"(",")",["T_WHITESPACE","\n    ",723],"{",["T_WHITESPACE","\n        ",724],["T_VARIABLE","$storeId",725],["T_WHITESPACE"," ",725],"=",["T_WHITESPACE"," ",725],["T_STRING","Mage",725],["T_DOUBLE_COLON","::",725],["T_STRING","app",725],"(",")",["T_OBJECT_OPERATOR","->",725],["T_STRING","getStore",725],"(",")",["T_OBJECT_OPERATOR","->",725],["T_STRING","getId",725],"(",")",";",["T_WHITESPACE","\n        ",725],["T_IF","if",726],["T_WHITESPACE"," ",726],"(","!",["T_VARIABLE","$storeId",726],")",["T_WHITESPACE"," ",726],"{",["T_WHITESPACE","\n            ",726],["T_VARIABLE","$storeId",727],["T_WHITESPACE"," ",727],"=",["T_WHITESPACE"," ",727],["T_VARIABLE","$this",727],["T_OBJECT_OPERATOR","->",727],["T_STRING","_getWebsiteStoreId",727],"(",")",";",["T_WHITESPACE","\n        ",727],"}",["T_WHITESPACE","\n\n        ",728],["T_VARIABLE","$this",730],["T_OBJECT_OPERATOR","->",730],["T_STRING","_sendEmailTemplate",730],"(",["T_STRING","self",730],["T_DOUBLE_COLON","::",730],["T_STRING","XML_PATH_FORGOT_EMAIL_TEMPLATE",730],",",["T_WHITESPACE"," ",730],["T_STRING","self",730],["T_DOUBLE_COLON","::",730],["T_STRING","XML_PATH_FORGOT_EMAIL_IDENTITY",730],",",["T_WHITESPACE","\n            ",730],["T_ARRAY","array",731],"(",["T_CONSTANT_ENCAPSED_STRING","'customer'",731],["T_WHITESPACE"," ",731],["T_DOUBLE_ARROW","=>",731],["T_WHITESPACE"," ",731],["T_VARIABLE","$this",731],")",",",["T_WHITESPACE"," ",731],["T_VARIABLE","$storeId",731],")",";",["T_WHITESPACE","\n\n        ",731],["T_RETURN","return",733],["T_WHITESPACE"," ",733],["T_VARIABLE","$this",733],";",["T_WHITESPACE","\n    ",733],"}",["T_WHITESPACE","\n\n    ",734],["T_DOC_COMMENT","\/**\n     * Retrieve customer group identifier\n     *\n     * @return int\n     *\/",736],["T_WHITESPACE","\n    ",740],["T_PUBLIC","public",741],["T_WHITESPACE"," ",741],["T_FUNCTION","function",741],["T_WHITESPACE"," ",741],["T_STRING","getGroupId",741],"(",")",["T_WHITESPACE","\n    ",741],"{",["T_WHITESPACE","\n        ",742],["T_IF","if",743],["T_WHITESPACE"," ",743],"(","!",["T_VARIABLE","$this",743],["T_OBJECT_OPERATOR","->",743],["T_STRING","hasData",743],"(",["T_CONSTANT_ENCAPSED_STRING","'group_id'",743],")",")",["T_WHITESPACE"," ",743],"{",["T_WHITESPACE","\n            ",743],["T_VARIABLE","$storeId",744],["T_WHITESPACE"," ",744],"=",["T_WHITESPACE"," ",744],["T_VARIABLE","$this",744],["T_OBJECT_OPERATOR","->",744],["T_STRING","getStoreId",744],"(",")",["T_WHITESPACE"," ",744],"?",["T_WHITESPACE"," ",744],["T_VARIABLE","$this",744],["T_OBJECT_OPERATOR","->",744],["T_STRING","getStoreId",744],"(",")",["T_WHITESPACE"," ",744],":",["T_WHITESPACE"," ",744],["T_STRING","Mage",744],["T_DOUBLE_COLON","::",744],["T_STRING","app",744],"(",")",["T_OBJECT_OPERATOR","->",744],["T_STRING","getStore",744],"(",")",["T_OBJECT_OPERATOR","->",744],["T_STRING","getId",744],"(",")",";",["T_WHITESPACE","\n            ",744],["T_VARIABLE","$groupId",745],["T_WHITESPACE"," ",745],"=",["T_WHITESPACE"," ",745],["T_STRING","Mage",745],["T_DOUBLE_COLON","::",745],["T_STRING","getStoreConfig",745],"(",["T_STRING","Mage_Customer_Model_Group",745],["T_DOUBLE_COLON","::",745],["T_STRING","XML_PATH_DEFAULT_ID",745],",",["T_WHITESPACE"," ",745],["T_VARIABLE","$storeId",745],")",";",["T_WHITESPACE","\n            ",745],["T_VARIABLE","$this",746],["T_OBJECT_OPERATOR","->",746],["T_STRING","setData",746],"(",["T_CONSTANT_ENCAPSED_STRING","'group_id'",746],",",["T_WHITESPACE"," ",746],["T_VARIABLE","$groupId",746],")",";",["T_WHITESPACE","\n        ",746],"}",["T_WHITESPACE","\n        ",747],["T_RETURN","return",748],["T_WHITESPACE"," ",748],["T_VARIABLE","$this",748],["T_OBJECT_OPERATOR","->",748],["T_STRING","getData",748],"(",["T_CONSTANT_ENCAPSED_STRING","'group_id'",748],")",";",["T_WHITESPACE","\n    ",748],"}",["T_WHITESPACE","\n\n    ",749],["T_DOC_COMMENT","\/**\n     * Retrieve customer tax class identifier\n     *\n     * @return int\n     *\/",751],["T_WHITESPACE","\n    ",755],["T_PUBLIC","public",756],["T_WHITESPACE"," ",756],["T_FUNCTION","function",756],["T_WHITESPACE"," ",756],["T_STRING","getTaxClassId",756],"(",")",["T_WHITESPACE","\n    ",756],"{",["T_WHITESPACE","\n        ",757],["T_IF","if",758],["T_WHITESPACE"," ",758],"(","!",["T_VARIABLE","$this",758],["T_OBJECT_OPERATOR","->",758],["T_STRING","getData",758],"(",["T_CONSTANT_ENCAPSED_STRING","'tax_class_id'",758],")",")",["T_WHITESPACE"," ",758],"{",["T_WHITESPACE","\n            ",758],["T_VARIABLE","$this",759],["T_OBJECT_OPERATOR","->",759],["T_STRING","setTaxClassId",759],"(",["T_STRING","Mage",759],["T_DOUBLE_COLON","::",759],["T_STRING","getModel",759],"(",["T_CONSTANT_ENCAPSED_STRING","'customer\/group'",759],")",["T_OBJECT_OPERATOR","->",759],["T_STRING","getTaxClassId",759],"(",["T_VARIABLE","$this",759],["T_OBJECT_OPERATOR","->",759],["T_STRING","getGroupId",759],"(",")",")",")",";",["T_WHITESPACE","\n        ",759],"}",["T_WHITESPACE","\n        ",760],["T_RETURN","return",761],["T_WHITESPACE"," ",761],["T_VARIABLE","$this",761],["T_OBJECT_OPERATOR","->",761],["T_STRING","getData",761],"(",["T_CONSTANT_ENCAPSED_STRING","'tax_class_id'",761],")",";",["T_WHITESPACE","\n    ",761],"}",["T_WHITESPACE","\n\n    ",762],["T_DOC_COMMENT","\/**\n     * Check store availability for customer\n     *\n     * @param   Mage_Core_Model_Store | int $store\n     * @return  bool\n     *\/",764],["T_WHITESPACE","\n    ",769],["T_PUBLIC","public",770],["T_WHITESPACE"," ",770],["T_FUNCTION","function",770],["T_WHITESPACE"," ",770],["T_STRING","isInStore",770],"(",["T_VARIABLE","$store",770],")",["T_WHITESPACE","\n    ",770],"{",["T_WHITESPACE","\n        ",771],["T_IF","if",772],["T_WHITESPACE"," ",772],"(",["T_VARIABLE","$store",772],["T_WHITESPACE"," ",772],["T_INSTANCEOF","instanceof",772],["T_WHITESPACE"," ",772],["T_STRING","Mage_Core_Model_Store",772],")",["T_WHITESPACE"," ",772],"{",["T_WHITESPACE","\n            ",772],["T_VARIABLE","$storeId",773],["T_WHITESPACE"," ",773],"=",["T_WHITESPACE"," ",773],["T_VARIABLE","$store",773],["T_OBJECT_OPERATOR","->",773],["T_STRING","getId",773],"(",")",";",["T_WHITESPACE","\n        ",773],"}",["T_WHITESPACE"," ",774],["T_ELSE","else",774],["T_WHITESPACE"," ",774],"{",["T_WHITESPACE","\n            ",774],["T_VARIABLE","$storeId",775],["T_WHITESPACE"," ",775],"=",["T_WHITESPACE"," ",775],["T_VARIABLE","$store",775],";",["T_WHITESPACE","\n        ",775],"}",["T_WHITESPACE","\n\n        ",776],["T_VARIABLE","$availableStores",778],["T_WHITESPACE"," ",778],"=",["T_WHITESPACE"," ",778],["T_VARIABLE","$this",778],["T_OBJECT_OPERATOR","->",778],["T_STRING","getSharedStoreIds",778],"(",")",";",["T_WHITESPACE","\n        ",778],["T_RETURN","return",779],["T_WHITESPACE"," ",779],["T_STRING","in_array",779],"(",["T_VARIABLE","$storeId",779],",",["T_WHITESPACE"," ",779],["T_VARIABLE","$availableStores",779],")",";",["T_WHITESPACE","\n    ",779],"}",["T_WHITESPACE","\n\n    ",780],["T_DOC_COMMENT","\/**\n     * Retrieve store where customer was created\n     *\n     * @return Mage_Core_Model_Store\n     *\/",782],["T_WHITESPACE","\n    ",786],["T_PUBLIC","public",787],["T_WHITESPACE"," ",787],["T_FUNCTION","function",787],["T_WHITESPACE"," ",787],["T_STRING","getStore",787],"(",")",["T_WHITESPACE","\n    ",787],"{",["T_WHITESPACE","\n        ",788],["T_RETURN","return",789],["T_WHITESPACE"," ",789],["T_STRING","Mage",789],["T_DOUBLE_COLON","::",789],["T_STRING","app",789],"(",")",["T_OBJECT_OPERATOR","->",789],["T_STRING","getStore",789],"(",["T_VARIABLE","$this",789],["T_OBJECT_OPERATOR","->",789],["T_STRING","getStoreId",789],"(",")",")",";",["T_WHITESPACE","\n    ",789],"}",["T_WHITESPACE","\n\n    ",790],["T_DOC_COMMENT","\/**\n     * Retrieve shared store ids\n     *\n     * @return array\n     *\/",792],["T_WHITESPACE","\n    ",796],["T_PUBLIC","public",797],["T_WHITESPACE"," ",797],["T_FUNCTION","function",797],["T_WHITESPACE"," ",797],["T_STRING","getSharedStoreIds",797],"(",")",["T_WHITESPACE","\n    ",797],"{",["T_WHITESPACE","\n        ",798],["T_VARIABLE","$ids",799],["T_WHITESPACE"," ",799],"=",["T_WHITESPACE"," ",799],["T_VARIABLE","$this",799],["T_OBJECT_OPERATOR","->",799],["T_STRING","_getData",799],"(",["T_CONSTANT_ENCAPSED_STRING","'shared_store_ids'",799],")",";",["T_WHITESPACE","\n        ",799],["T_IF","if",800],["T_WHITESPACE"," ",800],"(",["T_VARIABLE","$ids",800],["T_WHITESPACE"," ",800],["T_IS_IDENTICAL","===",800],["T_WHITESPACE"," ",800],["T_STRING","null",800],")",["T_WHITESPACE"," ",800],"{",["T_WHITESPACE","\n            ",800],["T_VARIABLE","$ids",801],["T_WHITESPACE"," ",801],"=",["T_WHITESPACE"," ",801],["T_ARRAY","array",801],"(",")",";",["T_WHITESPACE","\n            ",801],["T_IF","if",802],["T_WHITESPACE"," ",802],"(",["T_BOOL_CAST","(bool)",802],["T_VARIABLE","$this",802],["T_OBJECT_OPERATOR","->",802],["T_STRING","getSharingConfig",802],"(",")",["T_OBJECT_OPERATOR","->",802],["T_STRING","isWebsiteScope",802],"(",")",")",["T_WHITESPACE"," ",802],"{",["T_WHITESPACE","\n                ",802],["T_VARIABLE","$ids",803],["T_WHITESPACE"," ",803],"=",["T_WHITESPACE"," ",803],["T_STRING","Mage",803],["T_DOUBLE_COLON","::",803],["T_STRING","app",803],"(",")",["T_OBJECT_OPERATOR","->",803],["T_STRING","getWebsite",803],"(",["T_VARIABLE","$this",803],["T_OBJECT_OPERATOR","->",803],["T_STRING","getWebsiteId",803],"(",")",")",["T_OBJECT_OPERATOR","->",803],["T_STRING","getStoreIds",803],"(",")",";",["T_WHITESPACE","\n            ",803],"}",["T_WHITESPACE"," ",804],["T_ELSE","else",804],["T_WHITESPACE"," ",804],"{",["T_WHITESPACE","\n                ",804],["T_FOREACH","foreach",805],["T_WHITESPACE"," ",805],"(",["T_STRING","Mage",805],["T_DOUBLE_COLON","::",805],["T_STRING","app",805],"(",")",["T_OBJECT_OPERATOR","->",805],["T_STRING","getStores",805],"(",")",["T_WHITESPACE"," ",805],["T_AS","as",805],["T_WHITESPACE"," ",805],["T_VARIABLE","$store",805],")",["T_WHITESPACE"," ",805],"{",["T_WHITESPACE","\n                    ",805],["T_VARIABLE","$ids",806],"[","]",["T_WHITESPACE"," ",806],"=",["T_WHITESPACE"," ",806],["T_VARIABLE","$store",806],["T_OBJECT_OPERATOR","->",806],["T_STRING","getId",806],"(",")",";",["T_WHITESPACE","\n                ",806],"}",["T_WHITESPACE","\n            ",807],"}",["T_WHITESPACE","\n            ",808],["T_VARIABLE","$this",809],["T_OBJECT_OPERATOR","->",809],["T_STRING","setData",809],"(",["T_CONSTANT_ENCAPSED_STRING","'shared_store_ids'",809],",",["T_WHITESPACE"," ",809],["T_VARIABLE","$ids",809],")",";",["T_WHITESPACE","\n        ",809],"}",["T_WHITESPACE","\n\n        ",810],["T_RETURN","return",812],["T_WHITESPACE"," ",812],["T_VARIABLE","$ids",812],";",["T_WHITESPACE","\n    ",812],"}",["T_WHITESPACE","\n\n    ",813],["T_DOC_COMMENT","\/**\n     * Retrive shared website ids\n     *\n     * @return array\n     *\/",815],["T_WHITESPACE","\n    ",819],["T_PUBLIC","public",820],["T_WHITESPACE"," ",820],["T_FUNCTION","function",820],["T_WHITESPACE"," ",820],["T_STRING","getSharedWebsiteIds",820],"(",")",["T_WHITESPACE","\n    ",820],"{",["T_WHITESPACE","\n        ",821],["T_VARIABLE","$ids",822],["T_WHITESPACE"," ",822],"=",["T_WHITESPACE"," ",822],["T_VARIABLE","$this",822],["T_OBJECT_OPERATOR","->",822],["T_STRING","_getData",822],"(",["T_CONSTANT_ENCAPSED_STRING","'shared_website_ids'",822],")",";",["T_WHITESPACE","\n        ",822],["T_IF","if",823],["T_WHITESPACE"," ",823],"(",["T_VARIABLE","$ids",823],["T_WHITESPACE"," ",823],["T_IS_IDENTICAL","===",823],["T_WHITESPACE"," ",823],["T_STRING","null",823],")",["T_WHITESPACE"," ",823],"{",["T_WHITESPACE","\n            ",823],["T_VARIABLE","$ids",824],["T_WHITESPACE"," ",824],"=",["T_WHITESPACE"," ",824],["T_ARRAY","array",824],"(",")",";",["T_WHITESPACE","\n            ",824],["T_IF","if",825],["T_WHITESPACE"," ",825],"(",["T_BOOL_CAST","(bool)",825],["T_VARIABLE","$this",825],["T_OBJECT_OPERATOR","->",825],["T_STRING","getSharingConfig",825],"(",")",["T_OBJECT_OPERATOR","->",825],["T_STRING","isWebsiteScope",825],"(",")",")",["T_WHITESPACE"," ",825],"{",["T_WHITESPACE","\n                ",825],["T_VARIABLE","$ids",826],"[","]",["T_WHITESPACE"," ",826],"=",["T_WHITESPACE"," ",826],["T_VARIABLE","$this",826],["T_OBJECT_OPERATOR","->",826],["T_STRING","getWebsiteId",826],"(",")",";",["T_WHITESPACE","\n            ",826],"}",["T_WHITESPACE"," ",827],["T_ELSE","else",827],["T_WHITESPACE"," ",827],"{",["T_WHITESPACE","\n                ",827],["T_FOREACH","foreach",828],["T_WHITESPACE"," ",828],"(",["T_STRING","Mage",828],["T_DOUBLE_COLON","::",828],["T_STRING","app",828],"(",")",["T_OBJECT_OPERATOR","->",828],["T_STRING","getWebsites",828],"(",")",["T_WHITESPACE"," ",828],["T_AS","as",828],["T_WHITESPACE"," ",828],["T_VARIABLE","$website",828],")",["T_WHITESPACE"," ",828],"{",["T_WHITESPACE","\n                    ",828],["T_VARIABLE","$ids",829],"[","]",["T_WHITESPACE"," ",829],"=",["T_WHITESPACE"," ",829],["T_VARIABLE","$website",829],["T_OBJECT_OPERATOR","->",829],["T_STRING","getId",829],"(",")",";",["T_WHITESPACE","\n                ",829],"}",["T_WHITESPACE","\n            ",830],"}",["T_WHITESPACE","\n            ",831],["T_VARIABLE","$this",832],["T_OBJECT_OPERATOR","->",832],["T_STRING","setData",832],"(",["T_CONSTANT_ENCAPSED_STRING","'shared_website_ids'",832],",",["T_WHITESPACE"," ",832],["T_VARIABLE","$ids",832],")",";",["T_WHITESPACE","\n        ",832],"}",["T_WHITESPACE","\n        ",833],["T_RETURN","return",834],["T_WHITESPACE"," ",834],["T_VARIABLE","$ids",834],";",["T_WHITESPACE","\n    ",834],"}",["T_WHITESPACE","\n\n    ",835],["T_DOC_COMMENT","\/**\n     * Set store to customer\n     *\n     * @param Mage_Core_Model_Store $store\n     * @return Mage_Customer_Model_Customer\n     *\/",837],["T_WHITESPACE","\n    ",842],["T_PUBLIC","public",843],["T_WHITESPACE"," ",843],["T_FUNCTION","function",843],["T_WHITESPACE"," ",843],["T_STRING","setStore",843],"(",["T_STRING","Mage_Core_Model_Store",843],["T_WHITESPACE"," ",843],["T_VARIABLE","$store",843],")",["T_WHITESPACE","\n    ",843],"{",["T_WHITESPACE","\n        ",844],["T_VARIABLE","$this",845],["T_OBJECT_OPERATOR","->",845],["T_STRING","setStoreId",845],"(",["T_VARIABLE","$store",845],["T_OBJECT_OPERATOR","->",845],["T_STRING","getId",845],"(",")",")",";",["T_WHITESPACE","\n        ",845],["T_VARIABLE","$this",846],["T_OBJECT_OPERATOR","->",846],["T_STRING","setWebsiteId",846],"(",["T_VARIABLE","$store",846],["T_OBJECT_OPERATOR","->",846],["T_STRING","getWebsite",846],"(",")",["T_OBJECT_OPERATOR","->",846],["T_STRING","getId",846],"(",")",")",";",["T_WHITESPACE","\n        ",846],["T_RETURN","return",847],["T_WHITESPACE"," ",847],["T_VARIABLE","$this",847],";",["T_WHITESPACE","\n    ",847],"}",["T_WHITESPACE","\n\n    ",848],["T_DOC_COMMENT","\/**\n     * Validate customer attribute values.\n     * For existing customer password + confirmation will be validated only when password is set (i.e. its change is requested)\n     *\n     * @return bool\n     *\/",850],["T_WHITESPACE","\n    ",855],["T_PUBLIC","public",856],["T_WHITESPACE"," ",856],["T_FUNCTION","function",856],["T_WHITESPACE"," ",856],["T_STRING","validate",856],"(",")",["T_WHITESPACE","\n    ",856],"{",["T_WHITESPACE","\n        ",857],["T_VARIABLE","$errors",858],["T_WHITESPACE"," ",858],"=",["T_WHITESPACE"," ",858],["T_ARRAY","array",858],"(",")",";",["T_WHITESPACE","\n        ",858],["T_IF","if",859],["T_WHITESPACE"," ",859],"(","!",["T_STRING","Zend_Validate",859],["T_DOUBLE_COLON","::",859],["T_STRING","is",859],"(",["T_WHITESPACE"," ",859],["T_STRING","trim",859],"(",["T_VARIABLE","$this",859],["T_OBJECT_OPERATOR","->",859],["T_STRING","getFirstname",859],"(",")",")",["T_WHITESPACE"," ",859],",",["T_WHITESPACE"," ",859],["T_CONSTANT_ENCAPSED_STRING","'NotEmpty'",859],")",")",["T_WHITESPACE"," ",859],"{",["T_WHITESPACE","\n            ",859],["T_VARIABLE","$errors",860],"[","]",["T_WHITESPACE"," ",860],"=",["T_WHITESPACE"," ",860],["T_STRING","Mage",860],["T_DOUBLE_COLON","::",860],["T_STRING","helper",860],"(",["T_CONSTANT_ENCAPSED_STRING","'customer'",860],")",["T_OBJECT_OPERATOR","->",860],["T_STRING","__",860],"(",["T_CONSTANT_ENCAPSED_STRING","'The first name cannot be empty.'",860],")",";",["T_WHITESPACE","\n        ",860],"}",["T_WHITESPACE","\n\n        ",861],["T_IF","if",863],["T_WHITESPACE"," ",863],"(","!",["T_STRING","Zend_Validate",863],["T_DOUBLE_COLON","::",863],["T_STRING","is",863],"(",["T_WHITESPACE"," ",863],["T_STRING","trim",863],"(",["T_VARIABLE","$this",863],["T_OBJECT_OPERATOR","->",863],["T_STRING","getLastname",863],"(",")",")",["T_WHITESPACE"," ",863],",",["T_WHITESPACE"," ",863],["T_CONSTANT_ENCAPSED_STRING","'NotEmpty'",863],")",")",["T_WHITESPACE"," ",863],"{",["T_WHITESPACE","\n            ",863],["T_VARIABLE","$errors",864],"[","]",["T_WHITESPACE"," ",864],"=",["T_WHITESPACE"," ",864],["T_STRING","Mage",864],["T_DOUBLE_COLON","::",864],["T_STRING","helper",864],"(",["T_CONSTANT_ENCAPSED_STRING","'customer'",864],")",["T_OBJECT_OPERATOR","->",864],["T_STRING","__",864],"(",["T_CONSTANT_ENCAPSED_STRING","'The last name cannot be empty.'",864],")",";",["T_WHITESPACE","\n        ",864],"}",["T_WHITESPACE","\n\n        ",865],["T_IF","if",867],["T_WHITESPACE"," ",867],"(","!",["T_STRING","Zend_Validate",867],["T_DOUBLE_COLON","::",867],["T_STRING","is",867],"(",["T_VARIABLE","$this",867],["T_OBJECT_OPERATOR","->",867],["T_STRING","getEmail",867],"(",")",",",["T_WHITESPACE"," ",867],["T_CONSTANT_ENCAPSED_STRING","'EmailAddress'",867],")",")",["T_WHITESPACE"," ",867],"{",["T_WHITESPACE","\n            ",867],["T_VARIABLE","$errors",868],"[","]",["T_WHITESPACE"," ",868],"=",["T_WHITESPACE"," ",868],["T_STRING","Mage",868],["T_DOUBLE_COLON","::",868],["T_STRING","helper",868],"(",["T_CONSTANT_ENCAPSED_STRING","'customer'",868],")",["T_OBJECT_OPERATOR","->",868],["T_STRING","__",868],"(",["T_CONSTANT_ENCAPSED_STRING","'Invalid email address \"%s\".'",868],",",["T_WHITESPACE"," ",868],["T_VARIABLE","$this",868],["T_OBJECT_OPERATOR","->",868],["T_STRING","getEmail",868],"(",")",")",";",["T_WHITESPACE","\n        ",868],"}",["T_WHITESPACE","\n\n        ",869],["T_VARIABLE","$password",871],["T_WHITESPACE"," ",871],"=",["T_WHITESPACE"," ",871],["T_VARIABLE","$this",871],["T_OBJECT_OPERATOR","->",871],["T_STRING","getPassword",871],"(",")",";",["T_WHITESPACE","\n        ",871],["T_IF","if",872],["T_WHITESPACE"," ",872],"(","!",["T_VARIABLE","$this",872],["T_OBJECT_OPERATOR","->",872],["T_STRING","getId",872],"(",")",["T_WHITESPACE"," ",872],["T_BOOLEAN_AND","&&",872],["T_WHITESPACE"," ",872],"!",["T_STRING","Zend_Validate",872],["T_DOUBLE_COLON","::",872],["T_STRING","is",872],"(",["T_VARIABLE","$password",872],["T_WHITESPACE"," ",872],",",["T_WHITESPACE"," ",872],["T_CONSTANT_ENCAPSED_STRING","'NotEmpty'",872],")",")",["T_WHITESPACE"," ",872],"{",["T_WHITESPACE","\n            ",872],["T_VARIABLE","$errors",873],"[","]",["T_WHITESPACE"," ",873],"=",["T_WHITESPACE"," ",873],["T_STRING","Mage",873],["T_DOUBLE_COLON","::",873],["T_STRING","helper",873],"(",["T_CONSTANT_ENCAPSED_STRING","'customer'",873],")",["T_OBJECT_OPERATOR","->",873],["T_STRING","__",873],"(",["T_CONSTANT_ENCAPSED_STRING","'The password cannot be empty.'",873],")",";",["T_WHITESPACE","\n        ",873],"}",["T_WHITESPACE","\n        ",874],["T_IF","if",875],["T_WHITESPACE"," ",875],"(",["T_STRING","strlen",875],"(",["T_VARIABLE","$password",875],")",["T_WHITESPACE"," ",875],["T_BOOLEAN_AND","&&",875],["T_WHITESPACE"," ",875],"!",["T_STRING","Zend_Validate",875],["T_DOUBLE_COLON","::",875],["T_STRING","is",875],"(",["T_VARIABLE","$password",875],",",["T_WHITESPACE"," ",875],["T_CONSTANT_ENCAPSED_STRING","'StringLength'",875],",",["T_WHITESPACE"," ",875],["T_ARRAY","array",875],"(",["T_STRING","self",875],["T_DOUBLE_COLON","::",875],["T_STRING","MINIMUM_PASSWORD_LENGTH",875],")",")",")",["T_WHITESPACE"," ",875],"{",["T_WHITESPACE","\n            ",875],["T_VARIABLE","$errors",876],"[","]",["T_WHITESPACE"," ",876],"=",["T_WHITESPACE"," ",876],["T_STRING","Mage",876],["T_DOUBLE_COLON","::",876],["T_STRING","helper",876],"(",["T_CONSTANT_ENCAPSED_STRING","'customer'",876],")",["T_WHITESPACE","\n                ",876],["T_OBJECT_OPERATOR","->",877],["T_STRING","__",877],"(",["T_CONSTANT_ENCAPSED_STRING","'The minimum password length is %s'",877],",",["T_WHITESPACE"," ",877],["T_STRING","self",877],["T_DOUBLE_COLON","::",877],["T_STRING","MINIMUM_PASSWORD_LENGTH",877],")",";",["T_WHITESPACE","\n        ",877],"}",["T_WHITESPACE","\n        ",878],["T_VARIABLE","$confirmation",879],["T_WHITESPACE"," ",879],"=",["T_WHITESPACE"," ",879],["T_VARIABLE","$this",879],["T_OBJECT_OPERATOR","->",879],["T_STRING","getPasswordConfirmation",879],"(",")",";",["T_WHITESPACE","\n        ",879],["T_IF","if",880],["T_WHITESPACE"," ",880],"(",["T_VARIABLE","$password",880],["T_WHITESPACE"," ",880],["T_IS_NOT_EQUAL","!=",880],["T_WHITESPACE"," ",880],["T_VARIABLE","$confirmation",880],")",["T_WHITESPACE"," ",880],"{",["T_WHITESPACE","\n            ",880],["T_VARIABLE","$errors",881],"[","]",["T_WHITESPACE"," ",881],"=",["T_WHITESPACE"," ",881],["T_STRING","Mage",881],["T_DOUBLE_COLON","::",881],["T_STRING","helper",881],"(",["T_CONSTANT_ENCAPSED_STRING","'customer'",881],")",["T_OBJECT_OPERATOR","->",881],["T_STRING","__",881],"(",["T_CONSTANT_ENCAPSED_STRING","'Please make sure your passwords match.'",881],")",";",["T_WHITESPACE","\n        ",881],"}",["T_WHITESPACE","\n\n        ",882],["T_VARIABLE","$entityType",884],["T_WHITESPACE"," ",884],"=",["T_WHITESPACE"," ",884],["T_STRING","Mage",884],["T_DOUBLE_COLON","::",884],["T_STRING","getSingleton",884],"(",["T_CONSTANT_ENCAPSED_STRING","'eav\/config'",884],")",["T_OBJECT_OPERATOR","->",884],["T_STRING","getEntityType",884],"(",["T_CONSTANT_ENCAPSED_STRING","'customer'",884],")",";",["T_WHITESPACE","\n        ",884],["T_VARIABLE","$attribute",885],["T_WHITESPACE"," ",885],"=",["T_WHITESPACE"," ",885],["T_STRING","Mage",885],["T_DOUBLE_COLON","::",885],["T_STRING","getModel",885],"(",["T_CONSTANT_ENCAPSED_STRING","'customer\/attribute'",885],")",["T_OBJECT_OPERATOR","->",885],["T_STRING","loadByCode",885],"(",["T_VARIABLE","$entityType",885],",",["T_WHITESPACE"," ",885],["T_CONSTANT_ENCAPSED_STRING","'dob'",885],")",";",["T_WHITESPACE","\n        ",885],["T_IF","if",886],["T_WHITESPACE"," ",886],"(",["T_VARIABLE","$attribute",886],["T_OBJECT_OPERATOR","->",886],["T_STRING","getIsRequired",886],"(",")",["T_WHITESPACE"," ",886],["T_BOOLEAN_AND","&&",886],["T_WHITESPACE"," ",886],["T_CONSTANT_ENCAPSED_STRING","''",886],["T_WHITESPACE"," ",886],["T_IS_EQUAL","==",886],["T_WHITESPACE"," ",886],["T_STRING","trim",886],"(",["T_VARIABLE","$this",886],["T_OBJECT_OPERATOR","->",886],["T_STRING","getDob",886],"(",")",")",")",["T_WHITESPACE"," ",886],"{",["T_WHITESPACE","\n            ",886],["T_VARIABLE","$errors",887],"[","]",["T_WHITESPACE"," ",887],"=",["T_WHITESPACE"," ",887],["T_STRING","Mage",887],["T_DOUBLE_COLON","::",887],["T_STRING","helper",887],"(",["T_CONSTANT_ENCAPSED_STRING","'customer'",887],")",["T_OBJECT_OPERATOR","->",887],["T_STRING","__",887],"(",["T_CONSTANT_ENCAPSED_STRING","'The Date of Birth is required.'",887],")",";",["T_WHITESPACE","\n        ",887],"}",["T_WHITESPACE","\n        ",888],["T_VARIABLE","$attribute",889],["T_WHITESPACE"," ",889],"=",["T_WHITESPACE"," ",889],["T_STRING","Mage",889],["T_DOUBLE_COLON","::",889],["T_STRING","getModel",889],"(",["T_CONSTANT_ENCAPSED_STRING","'customer\/attribute'",889],")",["T_OBJECT_OPERATOR","->",889],["T_STRING","loadByCode",889],"(",["T_VARIABLE","$entityType",889],",",["T_WHITESPACE"," ",889],["T_CONSTANT_ENCAPSED_STRING","'taxvat'",889],")",";",["T_WHITESPACE","\n        ",889],["T_IF","if",890],["T_WHITESPACE"," ",890],"(",["T_VARIABLE","$attribute",890],["T_OBJECT_OPERATOR","->",890],["T_STRING","getIsRequired",890],"(",")",["T_WHITESPACE"," ",890],["T_BOOLEAN_AND","&&",890],["T_WHITESPACE"," ",890],["T_CONSTANT_ENCAPSED_STRING","''",890],["T_WHITESPACE"," ",890],["T_IS_EQUAL","==",890],["T_WHITESPACE"," ",890],["T_STRING","trim",890],"(",["T_VARIABLE","$this",890],["T_OBJECT_OPERATOR","->",890],["T_STRING","getTaxvat",890],"(",")",")",")",["T_WHITESPACE"," ",890],"{",["T_WHITESPACE","\n            ",890],["T_VARIABLE","$errors",891],"[","]",["T_WHITESPACE"," ",891],"=",["T_WHITESPACE"," ",891],["T_STRING","Mage",891],["T_DOUBLE_COLON","::",891],["T_STRING","helper",891],"(",["T_CONSTANT_ENCAPSED_STRING","'customer'",891],")",["T_OBJECT_OPERATOR","->",891],["T_STRING","__",891],"(",["T_CONSTANT_ENCAPSED_STRING","'The TAX\/VAT number is required.'",891],")",";",["T_WHITESPACE","\n        ",891],"}",["T_WHITESPACE","\n        ",892],["T_VARIABLE","$attribute",893],["T_WHITESPACE"," ",893],"=",["T_WHITESPACE"," ",893],["T_STRING","Mage",893],["T_DOUBLE_COLON","::",893],["T_STRING","getModel",893],"(",["T_CONSTANT_ENCAPSED_STRING","'customer\/attribute'",893],")",["T_OBJECT_OPERATOR","->",893],["T_STRING","loadByCode",893],"(",["T_VARIABLE","$entityType",893],",",["T_WHITESPACE"," ",893],["T_CONSTANT_ENCAPSED_STRING","'gender'",893],")",";",["T_WHITESPACE","\n        ",893],["T_IF","if",894],["T_WHITESPACE"," ",894],"(",["T_VARIABLE","$attribute",894],["T_OBJECT_OPERATOR","->",894],["T_STRING","getIsRequired",894],"(",")",["T_WHITESPACE"," ",894],["T_BOOLEAN_AND","&&",894],["T_WHITESPACE"," ",894],["T_CONSTANT_ENCAPSED_STRING","''",894],["T_WHITESPACE"," ",894],["T_IS_EQUAL","==",894],["T_WHITESPACE"," ",894],["T_STRING","trim",894],"(",["T_VARIABLE","$this",894],["T_OBJECT_OPERATOR","->",894],["T_STRING","getGender",894],"(",")",")",")",["T_WHITESPACE"," ",894],"{",["T_WHITESPACE","\n            ",894],["T_VARIABLE","$errors",895],"[","]",["T_WHITESPACE"," ",895],"=",["T_WHITESPACE"," ",895],["T_STRING","Mage",895],["T_DOUBLE_COLON","::",895],["T_STRING","helper",895],"(",["T_CONSTANT_ENCAPSED_STRING","'customer'",895],")",["T_OBJECT_OPERATOR","->",895],["T_STRING","__",895],"(",["T_CONSTANT_ENCAPSED_STRING","'Gender is required.'",895],")",";",["T_WHITESPACE","\n        ",895],"}",["T_WHITESPACE","\n\n        ",896],["T_IF","if",898],["T_WHITESPACE"," ",898],"(",["T_EMPTY","empty",898],"(",["T_VARIABLE","$errors",898],")",")",["T_WHITESPACE"," ",898],"{",["T_WHITESPACE","\n            ",898],["T_RETURN","return",899],["T_WHITESPACE"," ",899],["T_STRING","true",899],";",["T_WHITESPACE","\n        ",899],"}",["T_WHITESPACE","\n        ",900],["T_RETURN","return",901],["T_WHITESPACE"," ",901],["T_VARIABLE","$errors",901],";",["T_WHITESPACE","\n    ",901],"}",["T_WHITESPACE","\n\n    ",902],["T_DOC_COMMENT","\/**\n     * Validate customer attribute values on password reset\n     * @return bool\n     *\/",904],["T_WHITESPACE","\n    ",907],["T_PUBLIC","public",908],["T_WHITESPACE"," ",908],["T_FUNCTION","function",908],["T_WHITESPACE"," ",908],["T_STRING","validateResetPassword",908],"(",")",["T_WHITESPACE","\n    ",908],"{",["T_WHITESPACE","\n        ",909],["T_VARIABLE","$errors",910],["T_WHITESPACE","   ",910],"=",["T_WHITESPACE"," ",910],["T_ARRAY","array",910],"(",")",";",["T_WHITESPACE","\n        ",910],["T_VARIABLE","$password",911],["T_WHITESPACE"," ",911],"=",["T_WHITESPACE"," ",911],["T_VARIABLE","$this",911],["T_OBJECT_OPERATOR","->",911],["T_STRING","getPassword",911],"(",")",";",["T_WHITESPACE","\n        ",911],["T_IF","if",912],["T_WHITESPACE"," ",912],"(","!",["T_STRING","Zend_Validate",912],["T_DOUBLE_COLON","::",912],["T_STRING","is",912],"(",["T_VARIABLE","$password",912],",",["T_WHITESPACE"," ",912],["T_CONSTANT_ENCAPSED_STRING","'NotEmpty'",912],")",")",["T_WHITESPACE"," ",912],"{",["T_WHITESPACE","\n            ",912],["T_VARIABLE","$errors",913],"[","]",["T_WHITESPACE"," ",913],"=",["T_WHITESPACE"," ",913],["T_STRING","Mage",913],["T_DOUBLE_COLON","::",913],["T_STRING","helper",913],"(",["T_CONSTANT_ENCAPSED_STRING","'customer'",913],")",["T_OBJECT_OPERATOR","->",913],["T_STRING","__",913],"(",["T_CONSTANT_ENCAPSED_STRING","'The password cannot be empty.'",913],")",";",["T_WHITESPACE","\n        ",913],"}",["T_WHITESPACE","\n        ",914],["T_IF","if",915],["T_WHITESPACE"," ",915],"(","!",["T_STRING","Zend_Validate",915],["T_DOUBLE_COLON","::",915],["T_STRING","is",915],"(",["T_VARIABLE","$password",915],",",["T_WHITESPACE"," ",915],["T_CONSTANT_ENCAPSED_STRING","'StringLength'",915],",",["T_WHITESPACE"," ",915],["T_ARRAY","array",915],"(",["T_STRING","self",915],["T_DOUBLE_COLON","::",915],["T_STRING","MINIMUM_PASSWORD_LENGTH",915],")",")",")",["T_WHITESPACE"," ",915],"{",["T_WHITESPACE","\n            ",915],["T_VARIABLE","$errors",916],"[","]",["T_WHITESPACE"," ",916],"=",["T_WHITESPACE"," ",916],["T_STRING","Mage",916],["T_DOUBLE_COLON","::",916],["T_STRING","helper",916],"(",["T_CONSTANT_ENCAPSED_STRING","'customer'",916],")",["T_WHITESPACE","\n                ",916],["T_OBJECT_OPERATOR","->",917],["T_STRING","__",917],"(",["T_CONSTANT_ENCAPSED_STRING","'The minimum password length is %s'",917],",",["T_WHITESPACE"," ",917],["T_STRING","self",917],["T_DOUBLE_COLON","::",917],["T_STRING","MINIMUM_PASSWORD_LENGTH",917],")",";",["T_WHITESPACE","\n        ",917],"}",["T_WHITESPACE","\n        ",918],["T_VARIABLE","$confirmation",919],["T_WHITESPACE"," ",919],"=",["T_WHITESPACE"," ",919],["T_VARIABLE","$this",919],["T_OBJECT_OPERATOR","->",919],["T_STRING","getPasswordConfirmation",919],"(",")",";",["T_WHITESPACE","\n        ",919],["T_IF","if",920],["T_WHITESPACE"," ",920],"(",["T_VARIABLE","$password",920],["T_WHITESPACE"," ",920],["T_IS_NOT_EQUAL","!=",920],["T_WHITESPACE"," ",920],["T_VARIABLE","$confirmation",920],")",["T_WHITESPACE"," ",920],"{",["T_WHITESPACE","\n            ",920],["T_VARIABLE","$errors",921],"[","]",["T_WHITESPACE"," ",921],"=",["T_WHITESPACE"," ",921],["T_STRING","Mage",921],["T_DOUBLE_COLON","::",921],["T_STRING","helper",921],"(",["T_CONSTANT_ENCAPSED_STRING","'customer'",921],")",["T_OBJECT_OPERATOR","->",921],["T_STRING","__",921],"(",["T_CONSTANT_ENCAPSED_STRING","'Please make sure your passwords match.'",921],")",";",["T_WHITESPACE","\n        ",921],"}",["T_WHITESPACE","\n\n        ",922],["T_IF","if",924],["T_WHITESPACE"," ",924],"(",["T_EMPTY","empty",924],"(",["T_VARIABLE","$errors",924],")",")",["T_WHITESPACE"," ",924],"{",["T_WHITESPACE","\n            ",924],["T_RETURN","return",925],["T_WHITESPACE"," ",925],["T_STRING","true",925],";",["T_WHITESPACE","\n        ",925],"}",["T_WHITESPACE","\n        ",926],["T_RETURN","return",927],["T_WHITESPACE"," ",927],["T_VARIABLE","$errors",927],";",["T_WHITESPACE","\n    ",927],"}",["T_WHITESPACE","\n\n    ",928],["T_DOC_COMMENT","\/**\n     * Import customer data from text array\n     *\n     * @param array $row\n     * @return Mage_Customer_Model_Customer\n     *\/",930],["T_WHITESPACE","\n    ",935],["T_PUBLIC","public",936],["T_WHITESPACE"," ",936],["T_FUNCTION","function",936],["T_WHITESPACE"," ",936],["T_STRING","importFromTextArray",936],"(",["T_ARRAY","array",936],["T_WHITESPACE"," ",936],["T_VARIABLE","$row",936],")",["T_WHITESPACE","\n    ",936],"{",["T_WHITESPACE","\n        ",937],["T_VARIABLE","$this",938],["T_OBJECT_OPERATOR","->",938],["T_STRING","resetErrors",938],"(",")",";",["T_WHITESPACE","\n        ",938],["T_VARIABLE","$line",939],["T_WHITESPACE"," ",939],"=",["T_WHITESPACE"," ",939],["T_VARIABLE","$row",939],"[",["T_CONSTANT_ENCAPSED_STRING","'i'",939],"]",";",["T_WHITESPACE","\n        ",939],["T_VARIABLE","$row",940],["T_WHITESPACE"," ",940],"=",["T_WHITESPACE"," ",940],["T_VARIABLE","$row",940],"[",["T_CONSTANT_ENCAPSED_STRING","'row'",940],"]",";",["T_WHITESPACE","\n\n        ",940],["T_VARIABLE","$regions",942],["T_WHITESPACE"," ",942],"=",["T_WHITESPACE"," ",942],["T_STRING","Mage",942],["T_DOUBLE_COLON","::",942],["T_STRING","getResourceModel",942],"(",["T_CONSTANT_ENCAPSED_STRING","'directory\/region_collection'",942],")",";",["T_WHITESPACE","\n\n        ",942],["T_VARIABLE","$website",944],["T_WHITESPACE"," ",944],"=",["T_WHITESPACE"," ",944],["T_STRING","Mage",944],["T_DOUBLE_COLON","::",944],["T_STRING","getModel",944],"(",["T_CONSTANT_ENCAPSED_STRING","'core\/website'",944],")",["T_OBJECT_OPERATOR","->",944],["T_STRING","load",944],"(",["T_VARIABLE","$row",944],"[",["T_CONSTANT_ENCAPSED_STRING","'website_code'",944],"]",",",["T_WHITESPACE"," ",944],["T_CONSTANT_ENCAPSED_STRING","'code'",944],")",";",["T_WHITESPACE","\n\n        ",944],["T_IF","if",946],["T_WHITESPACE"," ",946],"(","!",["T_VARIABLE","$website",946],["T_OBJECT_OPERATOR","->",946],["T_STRING","getId",946],"(",")",")",["T_WHITESPACE"," ",946],"{",["T_WHITESPACE","\n            ",946],["T_VARIABLE","$this",947],["T_OBJECT_OPERATOR","->",947],["T_STRING","addError",947],"(",["T_STRING","Mage",947],["T_DOUBLE_COLON","::",947],["T_STRING","helper",947],"(",["T_CONSTANT_ENCAPSED_STRING","'customer'",947],")",["T_OBJECT_OPERATOR","->",947],["T_STRING","__",947],"(",["T_CONSTANT_ENCAPSED_STRING","'Invalid website, skipping the record, line: %s'",947],",",["T_WHITESPACE"," ",947],["T_VARIABLE","$line",947],")",")",";",["T_WHITESPACE","\n\n        ",947],"}",["T_WHITESPACE"," ",949],["T_ELSE","else",949],["T_WHITESPACE"," ",949],"{",["T_WHITESPACE","\n            ",949],["T_VARIABLE","$row",950],"[",["T_CONSTANT_ENCAPSED_STRING","'website_id'",950],"]",["T_WHITESPACE"," ",950],"=",["T_WHITESPACE"," ",950],["T_VARIABLE","$website",950],["T_OBJECT_OPERATOR","->",950],["T_STRING","getWebsiteId",950],"(",")",";",["T_WHITESPACE","\n            ",950],["T_VARIABLE","$this",951],["T_OBJECT_OPERATOR","->",951],["T_STRING","setWebsiteId",951],"(",["T_VARIABLE","$row",951],"[",["T_CONSTANT_ENCAPSED_STRING","'website_id'",951],"]",")",";",["T_WHITESPACE","\n        ",951],"}",["T_WHITESPACE","\n\n        ",952],["T_COMMENT","\/\/ Validate Email\n",954],["T_WHITESPACE","        ",955],["T_IF","if",955],["T_WHITESPACE"," ",955],"(",["T_EMPTY","empty",955],"(",["T_VARIABLE","$row",955],"[",["T_CONSTANT_ENCAPSED_STRING","'email'",955],"]",")",")",["T_WHITESPACE"," ",955],"{",["T_WHITESPACE","\n            ",955],["T_VARIABLE","$this",956],["T_OBJECT_OPERATOR","->",956],["T_STRING","addError",956],"(",["T_STRING","Mage",956],["T_DOUBLE_COLON","::",956],["T_STRING","helper",956],"(",["T_CONSTANT_ENCAPSED_STRING","'customer'",956],")",["T_OBJECT_OPERATOR","->",956],["T_STRING","__",956],"(",["T_CONSTANT_ENCAPSED_STRING","'Missing email, skipping the record, line: %s'",956],",",["T_WHITESPACE"," ",956],["T_VARIABLE","$line",956],")",")",";",["T_WHITESPACE","\n        ",956],"}",["T_WHITESPACE"," ",957],["T_ELSE","else",957],["T_WHITESPACE"," ",957],"{",["T_WHITESPACE","\n            ",957],["T_VARIABLE","$this",958],["T_OBJECT_OPERATOR","->",958],["T_STRING","loadByEmail",958],"(",["T_VARIABLE","$row",958],"[",["T_CONSTANT_ENCAPSED_STRING","'email'",958],"]",")",";",["T_WHITESPACE","\n        ",958],"}",["T_WHITESPACE","\n\n        ",959],["T_IF","if",961],["T_WHITESPACE"," ",961],"(",["T_EMPTY","empty",961],"(",["T_VARIABLE","$row",961],"[",["T_CONSTANT_ENCAPSED_STRING","'entity_id'",961],"]",")",")",["T_WHITESPACE"," ",961],"{",["T_WHITESPACE","\n            ",961],["T_IF","if",962],["T_WHITESPACE"," ",962],"(",["T_VARIABLE","$this",962],["T_OBJECT_OPERATOR","->",962],["T_STRING","getData",962],"(",["T_CONSTANT_ENCAPSED_STRING","'entity_id'",962],")",")",["T_WHITESPACE"," ",962],"{",["T_WHITESPACE","\n                ",962],["T_VARIABLE","$this",963],["T_OBJECT_OPERATOR","->",963],["T_STRING","addError",963],"(",["T_STRING","Mage",963],["T_DOUBLE_COLON","::",963],["T_STRING","helper",963],"(",["T_CONSTANT_ENCAPSED_STRING","'customer'",963],")",["T_OBJECT_OPERATOR","->",963],["T_STRING","__",963],"(",["T_CONSTANT_ENCAPSED_STRING","'The customer email (%s) already exists, skipping the record, line: %s'",963],",",["T_WHITESPACE"," ",963],["T_VARIABLE","$row",963],"[",["T_CONSTANT_ENCAPSED_STRING","'email'",963],"]",",",["T_WHITESPACE"," ",963],["T_VARIABLE","$line",963],")",")",";",["T_WHITESPACE","\n            ",963],"}",["T_WHITESPACE","\n        ",964],"}",["T_WHITESPACE"," ",965],["T_ELSE","else",965],["T_WHITESPACE"," ",965],"{",["T_WHITESPACE","\n            ",965],["T_IF","if",966],["T_WHITESPACE"," ",966],"(",["T_VARIABLE","$row",966],"[",["T_CONSTANT_ENCAPSED_STRING","'entity_id'",966],"]",["T_WHITESPACE"," ",966],["T_IS_NOT_EQUAL","!=",966],["T_WHITESPACE"," ",966],["T_VARIABLE","$this",966],["T_OBJECT_OPERATOR","->",966],["T_STRING","getData",966],"(",["T_CONSTANT_ENCAPSED_STRING","'entity_id'",966],")",")",["T_WHITESPACE"," ",966],"{",["T_WHITESPACE","\n                ",966],["T_VARIABLE","$this",967],["T_OBJECT_OPERATOR","->",967],["T_STRING","addError",967],"(",["T_STRING","Mage",967],["T_DOUBLE_COLON","::",967],["T_STRING","helper",967],"(",["T_CONSTANT_ENCAPSED_STRING","'customer'",967],")",["T_OBJECT_OPERATOR","->",967],["T_STRING","__",967],"(",["T_CONSTANT_ENCAPSED_STRING","'The customer ID and email did not match, skipping the record, line: %s'",967],",",["T_WHITESPACE"," ",967],["T_VARIABLE","$line",967],")",")",";",["T_WHITESPACE","\n            ",967],"}",["T_WHITESPACE"," ",968],["T_ELSE","else",968],["T_WHITESPACE"," ",968],"{",["T_WHITESPACE","\n                ",968],["T_VARIABLE","$this",969],["T_OBJECT_OPERATOR","->",969],["T_STRING","unsetData",969],"(",")",";",["T_WHITESPACE","\n                ",969],["T_VARIABLE","$this",970],["T_OBJECT_OPERATOR","->",970],["T_STRING","load",970],"(",["T_VARIABLE","$row",970],"[",["T_CONSTANT_ENCAPSED_STRING","'entity_id'",970],"]",")",";",["T_WHITESPACE","\n                ",970],["T_IF","if",971],["T_WHITESPACE"," ",971],"(",["T_ISSET","isset",971],"(",["T_VARIABLE","$row",971],"[",["T_CONSTANT_ENCAPSED_STRING","'store_view'",971],"]",")",")",["T_WHITESPACE"," ",971],"{",["T_WHITESPACE","\n                    ",971],["T_VARIABLE","$storeId",972],["T_WHITESPACE"," ",972],"=",["T_WHITESPACE"," ",972],["T_STRING","Mage",972],["T_DOUBLE_COLON","::",972],["T_STRING","app",972],"(",")",["T_OBJECT_OPERATOR","->",972],["T_STRING","getStore",972],"(",["T_VARIABLE","$row",972],"[",["T_CONSTANT_ENCAPSED_STRING","'store_view'",972],"]",")",["T_OBJECT_OPERATOR","->",972],["T_STRING","getId",972],"(",")",";",["T_WHITESPACE","\n                    ",972],["T_IF","if",973],["T_WHITESPACE"," ",973],"(",["T_VARIABLE","$storeId",973],")",["T_WHITESPACE"," ",973],["T_VARIABLE","$this",973],["T_OBJECT_OPERATOR","->",973],["T_STRING","setStoreId",973],"(",["T_VARIABLE","$storeId",973],")",";",["T_WHITESPACE","\n                ",973],"}",["T_WHITESPACE","\n            ",974],"}",["T_WHITESPACE","\n        ",975],"}",["T_WHITESPACE","\n\n        ",976],["T_IF","if",978],["T_WHITESPACE"," ",978],"(",["T_EMPTY","empty",978],"(",["T_VARIABLE","$row",978],"[",["T_CONSTANT_ENCAPSED_STRING","'website_code'",978],"]",")",")",["T_WHITESPACE"," ",978],"{",["T_WHITESPACE","\n            ",978],["T_VARIABLE","$this",979],["T_OBJECT_OPERATOR","->",979],["T_STRING","addError",979],"(",["T_STRING","Mage",979],["T_DOUBLE_COLON","::",979],["T_STRING","helper",979],"(",["T_CONSTANT_ENCAPSED_STRING","'customer'",979],")",["T_OBJECT_OPERATOR","->",979],["T_STRING","__",979],"(",["T_CONSTANT_ENCAPSED_STRING","'Missing website, skipping the record, line: %s'",979],",",["T_WHITESPACE"," ",979],["T_VARIABLE","$line",979],")",")",";",["T_WHITESPACE","\n        ",979],"}",["T_WHITESPACE","\n\n        ",980],["T_IF","if",982],["T_WHITESPACE"," ",982],"(",["T_EMPTY","empty",982],"(",["T_VARIABLE","$row",982],"[",["T_CONSTANT_ENCAPSED_STRING","'group'",982],"]",")",")",["T_WHITESPACE"," ",982],"{",["T_WHITESPACE","\n            ",982],["T_VARIABLE","$row",983],"[",["T_CONSTANT_ENCAPSED_STRING","'group'",983],"]",["T_WHITESPACE"," ",983],"=",["T_WHITESPACE"," ",983],["T_CONSTANT_ENCAPSED_STRING","'General'",983],";",["T_WHITESPACE","\n        ",983],"}",["T_WHITESPACE","\n\n        ",984],["T_IF","if",986],["T_WHITESPACE"," ",986],"(",["T_EMPTY","empty",986],"(",["T_VARIABLE","$row",986],"[",["T_CONSTANT_ENCAPSED_STRING","'firstname'",986],"]",")",")",["T_WHITESPACE"," ",986],"{",["T_WHITESPACE","\n            ",986],["T_VARIABLE","$this",987],["T_OBJECT_OPERATOR","->",987],["T_STRING","addError",987],"(",["T_STRING","Mage",987],["T_DOUBLE_COLON","::",987],["T_STRING","helper",987],"(",["T_CONSTANT_ENCAPSED_STRING","'customer'",987],")",["T_OBJECT_OPERATOR","->",987],["T_STRING","__",987],"(",["T_CONSTANT_ENCAPSED_STRING","'Missing first name, skipping the record, line: %s'",987],",",["T_WHITESPACE"," ",987],["T_VARIABLE","$line",987],")",")",";",["T_WHITESPACE","\n        ",987],"}",["T_WHITESPACE","\n        ",988],["T_IF","if",989],["T_WHITESPACE"," ",989],"(",["T_EMPTY","empty",989],"(",["T_VARIABLE","$row",989],"[",["T_CONSTANT_ENCAPSED_STRING","'lastname'",989],"]",")",")",["T_WHITESPACE"," ",989],"{",["T_WHITESPACE","\n            ",989],["T_VARIABLE","$this",990],["T_OBJECT_OPERATOR","->",990],["T_STRING","addError",990],"(",["T_STRING","Mage",990],["T_DOUBLE_COLON","::",990],["T_STRING","helper",990],"(",["T_CONSTANT_ENCAPSED_STRING","'customer'",990],")",["T_OBJECT_OPERATOR","->",990],["T_STRING","__",990],"(",["T_CONSTANT_ENCAPSED_STRING","'Missing last name, skipping the record, line: %s'",990],",",["T_WHITESPACE"," ",990],["T_VARIABLE","$line",990],")",")",";",["T_WHITESPACE","\n        ",990],"}",["T_WHITESPACE","\n\n        ",991],["T_IF","if",993],["T_WHITESPACE"," ",993],"(","!",["T_EMPTY","empty",993],"(",["T_VARIABLE","$row",993],"[",["T_CONSTANT_ENCAPSED_STRING","'password_new'",993],"]",")",")",["T_WHITESPACE"," ",993],"{",["T_WHITESPACE","\n            ",993],["T_VARIABLE","$this",994],["T_OBJECT_OPERATOR","->",994],["T_STRING","setPassword",994],"(",["T_VARIABLE","$row",994],"[",["T_CONSTANT_ENCAPSED_STRING","'password_new'",994],"]",")",";",["T_WHITESPACE","\n            ",994],["T_UNSET","unset",995],"(",["T_VARIABLE","$row",995],"[",["T_CONSTANT_ENCAPSED_STRING","'password_new'",995],"]",")",";",["T_WHITESPACE","\n            ",995],["T_IF","if",996],["T_WHITESPACE"," ",996],"(","!",["T_EMPTY","empty",996],"(",["T_VARIABLE","$row",996],"[",["T_CONSTANT_ENCAPSED_STRING","'password_hash'",996],"]",")",")",["T_WHITESPACE"," ",996],["T_UNSET","unset",996],"(",["T_VARIABLE","$row",996],"[",["T_CONSTANT_ENCAPSED_STRING","'password_hash'",996],"]",")",";",["T_WHITESPACE","\n        ",996],"}",["T_WHITESPACE","\n\n        ",997],["T_VARIABLE","$errors",999],["T_WHITESPACE"," ",999],"=",["T_WHITESPACE"," ",999],["T_VARIABLE","$this",999],["T_OBJECT_OPERATOR","->",999],["T_STRING","getErrors",999],"(",")",";",["T_WHITESPACE","\n        ",999],["T_IF","if",1000],["T_WHITESPACE"," ",1000],"(",["T_VARIABLE","$errors",1000],")",["T_WHITESPACE"," ",1000],"{",["T_WHITESPACE","\n            ",1000],["T_VARIABLE","$this",1001],["T_OBJECT_OPERATOR","->",1001],["T_STRING","unsetData",1001],"(",")",";",["T_WHITESPACE","\n            ",1001],["T_VARIABLE","$this",1002],["T_OBJECT_OPERATOR","->",1002],["T_STRING","printError",1002],"(",["T_STRING","implode",1002],"(",["T_CONSTANT_ENCAPSED_STRING","'<br \/>'",1002],",",["T_WHITESPACE"," ",1002],["T_VARIABLE","$errors",1002],")",")",";",["T_WHITESPACE","\n            ",1002],["T_RETURN","return",1003],";",["T_WHITESPACE","\n        ",1003],"}",["T_WHITESPACE","\n\n        ",1004],["T_FOREACH","foreach",1006],["T_WHITESPACE"," ",1006],"(",["T_VARIABLE","$row",1006],["T_WHITESPACE"," ",1006],["T_AS","as",1006],["T_WHITESPACE"," ",1006],["T_VARIABLE","$field",1006],["T_WHITESPACE"," ",1006],["T_DOUBLE_ARROW","=>",1006],["T_WHITESPACE"," ",1006],["T_VARIABLE","$value",1006],")",["T_WHITESPACE"," ",1006],"{",["T_WHITESPACE","\n            ",1006],["T_VARIABLE","$this",1007],["T_OBJECT_OPERATOR","->",1007],["T_STRING","setData",1007],"(",["T_VARIABLE","$field",1007],",",["T_WHITESPACE"," ",1007],["T_VARIABLE","$value",1007],")",";",["T_WHITESPACE","\n        ",1007],"}",["T_WHITESPACE","\n\n        ",1008],["T_IF","if",1010],["T_WHITESPACE"," ",1010],"(","!",["T_VARIABLE","$this",1010],["T_OBJECT_OPERATOR","->",1010],["T_STRING","validateAddress",1010],"(",["T_VARIABLE","$row",1010],",",["T_WHITESPACE"," ",1010],["T_CONSTANT_ENCAPSED_STRING","'billing'",1010],")",")",["T_WHITESPACE"," ",1010],"{",["T_WHITESPACE","\n            ",1010],["T_VARIABLE","$this",1011],["T_OBJECT_OPERATOR","->",1011],["T_STRING","printError",1011],"(",["T_STRING","Mage",1011],["T_DOUBLE_COLON","::",1011],["T_STRING","helper",1011],"(",["T_CONSTANT_ENCAPSED_STRING","'customer'",1011],")",["T_OBJECT_OPERATOR","->",1011],["T_STRING","__",1011],"(",["T_CONSTANT_ENCAPSED_STRING","'Invalid billing address for (%s)'",1011],",",["T_WHITESPACE"," ",1011],["T_VARIABLE","$row",1011],"[",["T_CONSTANT_ENCAPSED_STRING","'email'",1011],"]",")",",",["T_WHITESPACE"," ",1011],["T_VARIABLE","$line",1011],")",";",["T_WHITESPACE","\n        ",1011],"}",["T_WHITESPACE"," ",1012],["T_ELSE","else",1012],["T_WHITESPACE"," ",1012],"{",["T_WHITESPACE","\n            ",1012],["T_COMMENT","\/\/ Handling billing address\n",1013],["T_WHITESPACE","            ",1014],["T_VARIABLE","$billingAddress",1014],["T_WHITESPACE"," ",1014],"=",["T_WHITESPACE"," ",1014],["T_VARIABLE","$this",1014],["T_OBJECT_OPERATOR","->",1014],["T_STRING","getPrimaryBillingAddress",1014],"(",")",";",["T_WHITESPACE","\n            ",1014],["T_IF","if",1015],["T_WHITESPACE"," ",1015],"(","!",["T_VARIABLE","$billingAddress",1015],["T_WHITESPACE","  ",1015],["T_INSTANCEOF","instanceof",1015],["T_WHITESPACE"," ",1015],["T_STRING","Mage_Customer_Model_Address",1015],")",["T_WHITESPACE"," ",1015],"{",["T_WHITESPACE","\n                ",1015],["T_VARIABLE","$billingAddress",1016],["T_WHITESPACE"," ",1016],"=",["T_WHITESPACE"," ",1016],["T_STRING","Mage",1016],["T_DOUBLE_COLON","::",1016],["T_STRING","getModel",1016],"(",["T_CONSTANT_ENCAPSED_STRING","'customer\/address'",1016],")",";",["T_WHITESPACE","\n            ",1016],"}",["T_WHITESPACE","\n\n            ",1017],["T_VARIABLE","$regions",1019],["T_OBJECT_OPERATOR","->",1019],["T_STRING","addRegionNameFilter",1019],"(",["T_VARIABLE","$row",1019],"[",["T_CONSTANT_ENCAPSED_STRING","'billing_region'",1019],"]",")",["T_OBJECT_OPERATOR","->",1019],["T_STRING","load",1019],"(",")",";",["T_WHITESPACE","\n            ",1019],["T_IF","if",1020],["T_WHITESPACE"," ",1020],"(",["T_VARIABLE","$regions",1020],")",["T_WHITESPACE"," ",1020],["T_FOREACH","foreach",1020],"(",["T_VARIABLE","$regions",1020],["T_WHITESPACE"," ",1020],["T_AS","as",1020],["T_WHITESPACE"," ",1020],["T_VARIABLE","$region",1020],")",["T_WHITESPACE"," ",1020],"{",["T_WHITESPACE","\n                ",1020],["T_VARIABLE","$regionId",1021],["T_WHITESPACE"," ",1021],"=",["T_WHITESPACE"," ",1021],["T_STRING","intval",1021],"(",["T_VARIABLE","$region",1021],["T_OBJECT_OPERATOR","->",1021],["T_STRING","getId",1021],"(",")",")",";",["T_WHITESPACE","\n            ",1021],"}",["T_WHITESPACE","\n\n            ",1022],["T_VARIABLE","$billingAddress",1024],["T_OBJECT_OPERATOR","->",1024],["T_STRING","setFirstname",1024],"(",["T_VARIABLE","$row",1024],"[",["T_CONSTANT_ENCAPSED_STRING","'firstname'",1024],"]",")",";",["T_WHITESPACE","\n            ",1024],["T_VARIABLE","$billingAddress",1025],["T_OBJECT_OPERATOR","->",1025],["T_STRING","setLastname",1025],"(",["T_VARIABLE","$row",1025],"[",["T_CONSTANT_ENCAPSED_STRING","'lastname'",1025],"]",")",";",["T_WHITESPACE","\n            ",1025],["T_VARIABLE","$billingAddress",1026],["T_OBJECT_OPERATOR","->",1026],["T_STRING","setCity",1026],"(",["T_VARIABLE","$row",1026],"[",["T_CONSTANT_ENCAPSED_STRING","'billing_city'",1026],"]",")",";",["T_WHITESPACE","\n            ",1026],["T_VARIABLE","$billingAddress",1027],["T_OBJECT_OPERATOR","->",1027],["T_STRING","setRegion",1027],"(",["T_VARIABLE","$row",1027],"[",["T_CONSTANT_ENCAPSED_STRING","'billing_region'",1027],"]",")",";",["T_WHITESPACE","\n            ",1027],["T_IF","if",1028],["T_WHITESPACE"," ",1028],"(",["T_ISSET","isset",1028],"(",["T_VARIABLE","$regionId",1028],")",")",["T_WHITESPACE"," ",1028],"{",["T_WHITESPACE","\n                ",1028],["T_VARIABLE","$billingAddress",1029],["T_OBJECT_OPERATOR","->",1029],["T_STRING","setRegionId",1029],"(",["T_VARIABLE","$regionId",1029],")",";",["T_WHITESPACE","\n            ",1029],"}",["T_WHITESPACE","\n            ",1030],["T_VARIABLE","$billingAddress",1031],["T_OBJECT_OPERATOR","->",1031],["T_STRING","setCountryId",1031],"(",["T_VARIABLE","$row",1031],"[",["T_CONSTANT_ENCAPSED_STRING","'billing_country'",1031],"]",")",";",["T_WHITESPACE","\n            ",1031],["T_VARIABLE","$billingAddress",1032],["T_OBJECT_OPERATOR","->",1032],["T_STRING","setPostcode",1032],"(",["T_VARIABLE","$row",1032],"[",["T_CONSTANT_ENCAPSED_STRING","'billing_postcode'",1032],"]",")",";",["T_WHITESPACE","\n            ",1032],["T_IF","if",1033],["T_WHITESPACE"," ",1033],"(",["T_ISSET","isset",1033],"(",["T_VARIABLE","$row",1033],"[",["T_CONSTANT_ENCAPSED_STRING","'billing_street2'",1033],"]",")",")",["T_WHITESPACE"," ",1033],"{",["T_WHITESPACE","\n                ",1033],["T_VARIABLE","$billingAddress",1034],["T_OBJECT_OPERATOR","->",1034],["T_STRING","setStreet",1034],"(",["T_ARRAY","array",1034],"(",["T_VARIABLE","$row",1034],"[",["T_CONSTANT_ENCAPSED_STRING","'billing_street1'",1034],"]",",",["T_WHITESPACE"," ",1034],["T_VARIABLE","$row",1034],"[",["T_CONSTANT_ENCAPSED_STRING","'billing_street2'",1034],"]",")",")",";",["T_WHITESPACE","\n            ",1034],"}",["T_WHITESPACE"," ",1035],["T_ELSE","else",1035],["T_WHITESPACE"," ",1035],"{",["T_WHITESPACE","\n                ",1035],["T_VARIABLE","$billingAddress",1036],["T_OBJECT_OPERATOR","->",1036],["T_STRING","setStreet",1036],"(",["T_ARRAY","array",1036],"(",["T_VARIABLE","$row",1036],"[",["T_CONSTANT_ENCAPSED_STRING","'billing_street1'",1036],"]",")",")",";",["T_WHITESPACE","\n            ",1036],"}",["T_WHITESPACE","\n            ",1037],["T_IF","if",1038],["T_WHITESPACE"," ",1038],"(",["T_ISSET","isset",1038],"(",["T_VARIABLE","$row",1038],"[",["T_CONSTANT_ENCAPSED_STRING","'billing_telephone'",1038],"]",")",")",["T_WHITESPACE"," ",1038],"{",["T_WHITESPACE","\n                ",1038],["T_VARIABLE","$billingAddress",1039],["T_OBJECT_OPERATOR","->",1039],["T_STRING","setTelephone",1039],"(",["T_VARIABLE","$row",1039],"[",["T_CONSTANT_ENCAPSED_STRING","'billing_telephone'",1039],"]",")",";",["T_WHITESPACE","\n            ",1039],"}",["T_WHITESPACE","\n\n            ",1040],["T_IF","if",1042],["T_WHITESPACE"," ",1042],"(","!",["T_VARIABLE","$billingAddress",1042],["T_OBJECT_OPERATOR","->",1042],["T_STRING","getId",1042],"(",")",")",["T_WHITESPACE"," ",1042],"{",["T_WHITESPACE","\n                ",1042],["T_VARIABLE","$billingAddress",1043],["T_OBJECT_OPERATOR","->",1043],["T_STRING","setIsDefaultBilling",1043],"(",["T_STRING","true",1043],")",";",["T_WHITESPACE","\n                ",1043],["T_IF","if",1044],["T_WHITESPACE"," ",1044],"(",["T_VARIABLE","$this",1044],["T_OBJECT_OPERATOR","->",1044],["T_STRING","getDefaultBilling",1044],"(",")",")",["T_WHITESPACE"," ",1044],"{",["T_WHITESPACE","\n                    ",1044],["T_VARIABLE","$this",1045],["T_OBJECT_OPERATOR","->",1045],["T_STRING","setData",1045],"(",["T_CONSTANT_ENCAPSED_STRING","'default_billing'",1045],",",["T_WHITESPACE"," ",1045],["T_CONSTANT_ENCAPSED_STRING","''",1045],")",";",["T_WHITESPACE","\n                ",1045],"}",["T_WHITESPACE","\n                ",1046],["T_VARIABLE","$this",1047],["T_OBJECT_OPERATOR","->",1047],["T_STRING","addAddress",1047],"(",["T_VARIABLE","$billingAddress",1047],")",";",["T_WHITESPACE","\n            ",1047],"}",["T_WHITESPACE"," ",1048],["T_COMMENT","\/\/ End handling billing address\n",1048],["T_WHITESPACE","        ",1049],"}",["T_WHITESPACE","\n\n        ",1049],["T_IF","if",1051],["T_WHITESPACE"," ",1051],"(","!",["T_VARIABLE","$this",1051],["T_OBJECT_OPERATOR","->",1051],["T_STRING","validateAddress",1051],"(",["T_VARIABLE","$row",1051],",",["T_WHITESPACE"," ",1051],["T_CONSTANT_ENCAPSED_STRING","'shipping'",1051],")",")",["T_WHITESPACE"," ",1051],"{",["T_WHITESPACE","\n            ",1051],["T_VARIABLE","$this",1052],["T_OBJECT_OPERATOR","->",1052],["T_STRING","printError",1052],"(",["T_STRING","Mage",1052],["T_DOUBLE_COLON","::",1052],["T_STRING","helper",1052],"(",["T_CONSTANT_ENCAPSED_STRING","'customer'",1052],")",["T_OBJECT_OPERATOR","->",1052],["T_STRING","__",1052],"(",["T_CONSTANT_ENCAPSED_STRING","'Invalid shipping address for (%s)'",1052],",",["T_WHITESPACE"," ",1052],["T_VARIABLE","$row",1052],"[",["T_CONSTANT_ENCAPSED_STRING","'email'",1052],"]",")",",",["T_WHITESPACE"," ",1052],["T_VARIABLE","$line",1052],")",";",["T_WHITESPACE","\n        ",1052],"}",["T_WHITESPACE"," ",1053],["T_ELSE","else",1053],["T_WHITESPACE"," ",1053],"{",["T_WHITESPACE","\n            ",1053],["T_COMMENT","\/\/ Handling shipping address\n",1054],["T_WHITESPACE","            ",1055],["T_VARIABLE","$shippingAddress",1055],["T_WHITESPACE"," ",1055],"=",["T_WHITESPACE"," ",1055],["T_VARIABLE","$this",1055],["T_OBJECT_OPERATOR","->",1055],["T_STRING","getPrimaryShippingAddress",1055],"(",")",";",["T_WHITESPACE","\n            ",1055],["T_IF","if",1056],["T_WHITESPACE"," ",1056],"(","!",["T_VARIABLE","$shippingAddress",1056],["T_WHITESPACE"," ",1056],["T_INSTANCEOF","instanceof",1056],["T_WHITESPACE"," ",1056],["T_STRING","Mage_Customer_Model_Address",1056],")",["T_WHITESPACE"," ",1056],"{",["T_WHITESPACE","\n                ",1056],["T_VARIABLE","$shippingAddress",1057],["T_WHITESPACE"," ",1057],"=",["T_WHITESPACE"," ",1057],["T_STRING","Mage",1057],["T_DOUBLE_COLON","::",1057],["T_STRING","getModel",1057],"(",["T_CONSTANT_ENCAPSED_STRING","'customer\/address'",1057],")",";",["T_WHITESPACE","\n            ",1057],"}",["T_WHITESPACE","\n\n            ",1058],["T_VARIABLE","$regions",1060],["T_OBJECT_OPERATOR","->",1060],["T_STRING","addRegionNameFilter",1060],"(",["T_VARIABLE","$row",1060],"[",["T_CONSTANT_ENCAPSED_STRING","'shipping_region'",1060],"]",")",["T_OBJECT_OPERATOR","->",1060],["T_STRING","load",1060],"(",")",";",["T_WHITESPACE","\n\n            ",1060],["T_IF","if",1062],["T_WHITESPACE"," ",1062],"(",["T_VARIABLE","$regions",1062],")",["T_WHITESPACE"," ",1062],["T_FOREACH","foreach",1062],"(",["T_VARIABLE","$regions",1062],["T_WHITESPACE"," ",1062],["T_AS","as",1062],["T_WHITESPACE"," ",1062],["T_VARIABLE","$region",1062],")",["T_WHITESPACE"," ",1062],"{",["T_WHITESPACE","\n               ",1062],["T_VARIABLE","$regionId",1063],["T_WHITESPACE"," ",1063],"=",["T_WHITESPACE"," ",1063],["T_STRING","intval",1063],"(",["T_VARIABLE","$region",1063],["T_OBJECT_OPERATOR","->",1063],["T_STRING","getId",1063],"(",")",")",";",["T_WHITESPACE","\n            ",1063],"}",["T_WHITESPACE","\n\n            ",1064],["T_VARIABLE","$shippingAddress",1066],["T_OBJECT_OPERATOR","->",1066],["T_STRING","setFirstname",1066],"(",["T_VARIABLE","$row",1066],"[",["T_CONSTANT_ENCAPSED_STRING","'firstname'",1066],"]",")",";",["T_WHITESPACE","\n            ",1066],["T_VARIABLE","$shippingAddress",1067],["T_OBJECT_OPERATOR","->",1067],["T_STRING","setLastname",1067],"(",["T_VARIABLE","$row",1067],"[",["T_CONSTANT_ENCAPSED_STRING","'lastname'",1067],"]",")",";",["T_WHITESPACE","\n            ",1067],["T_VARIABLE","$shippingAddress",1068],["T_OBJECT_OPERATOR","->",1068],["T_STRING","setCity",1068],"(",["T_VARIABLE","$row",1068],"[",["T_CONSTANT_ENCAPSED_STRING","'shipping_city'",1068],"]",")",";",["T_WHITESPACE","\n            ",1068],["T_VARIABLE","$shippingAddress",1069],["T_OBJECT_OPERATOR","->",1069],["T_STRING","setRegion",1069],"(",["T_VARIABLE","$row",1069],"[",["T_CONSTANT_ENCAPSED_STRING","'shipping_region'",1069],"]",")",";",["T_WHITESPACE","\n            ",1069],["T_IF","if",1070],["T_WHITESPACE"," ",1070],"(",["T_ISSET","isset",1070],"(",["T_VARIABLE","$regionId",1070],")",")",["T_WHITESPACE"," ",1070],"{",["T_WHITESPACE","\n                ",1070],["T_VARIABLE","$shippingAddress",1071],["T_OBJECT_OPERATOR","->",1071],["T_STRING","setRegionId",1071],"(",["T_VARIABLE","$regionId",1071],")",";",["T_WHITESPACE","\n            ",1071],"}",["T_WHITESPACE","\n            ",1072],["T_VARIABLE","$shippingAddress",1073],["T_OBJECT_OPERATOR","->",1073],["T_STRING","setCountryId",1073],"(",["T_VARIABLE","$row",1073],"[",["T_CONSTANT_ENCAPSED_STRING","'shipping_country'",1073],"]",")",";",["T_WHITESPACE","\n            ",1073],["T_VARIABLE","$shippingAddress",1074],["T_OBJECT_OPERATOR","->",1074],["T_STRING","setPostcode",1074],"(",["T_VARIABLE","$row",1074],"[",["T_CONSTANT_ENCAPSED_STRING","'shipping_postcode'",1074],"]",")",";",["T_WHITESPACE","\n            ",1074],["T_IF","if",1075],["T_WHITESPACE"," ",1075],"(",["T_ISSET","isset",1075],"(",["T_VARIABLE","$row",1075],"[",["T_CONSTANT_ENCAPSED_STRING","'shipping_street2'",1075],"]",")",")",["T_WHITESPACE"," ",1075],"{",["T_WHITESPACE","\n                ",1075],["T_VARIABLE","$shippingAddress",1076],["T_OBJECT_OPERATOR","->",1076],["T_STRING","setStreet",1076],"(",["T_ARRAY","array",1076],"(",["T_VARIABLE","$row",1076],"[",["T_CONSTANT_ENCAPSED_STRING","'shipping_street1'",1076],"]",",",["T_WHITESPACE"," ",1076],["T_VARIABLE","$row",1076],"[",["T_CONSTANT_ENCAPSED_STRING","'shipping_street2'",1076],"]",")",")",";",["T_WHITESPACE","\n            ",1076],"}",["T_WHITESPACE"," ",1077],["T_ELSE","else",1077],["T_WHITESPACE"," ",1077],"{",["T_WHITESPACE","\n                ",1077],["T_VARIABLE","$shippingAddress",1078],["T_OBJECT_OPERATOR","->",1078],["T_STRING","setStreet",1078],"(",["T_ARRAY","array",1078],"(",["T_VARIABLE","$row",1078],"[",["T_CONSTANT_ENCAPSED_STRING","'shipping_street1'",1078],"]",")",")",";",["T_WHITESPACE","\n            ",1078],"}",["T_WHITESPACE","\n            ",1079],["T_IF","if",1080],["T_WHITESPACE"," ",1080],"(","!",["T_EMPTY","empty",1080],"(",["T_VARIABLE","$row",1080],"[",["T_CONSTANT_ENCAPSED_STRING","'shipping_telephone'",1080],"]",")",")",["T_WHITESPACE"," ",1080],"{",["T_WHITESPACE","\n                ",1080],["T_VARIABLE","$shippingAddress",1081],["T_OBJECT_OPERATOR","->",1081],["T_STRING","setTelephone",1081],"(",["T_VARIABLE","$row",1081],"[",["T_CONSTANT_ENCAPSED_STRING","'shipping_telephone'",1081],"]",")",";",["T_WHITESPACE","\n            ",1081],"}",["T_WHITESPACE","\n\n            ",1082],["T_IF","if",1084],["T_WHITESPACE"," ",1084],"(","!",["T_VARIABLE","$shippingAddress",1084],["T_OBJECT_OPERATOR","->",1084],["T_STRING","getId",1084],"(",")",")",["T_WHITESPACE"," ",1084],"{",["T_WHITESPACE","\n               ",1084],["T_VARIABLE","$shippingAddress",1085],["T_OBJECT_OPERATOR","->",1085],["T_STRING","setIsDefaultShipping",1085],"(",["T_STRING","true",1085],")",";",["T_WHITESPACE","\n               ",1085],["T_VARIABLE","$this",1086],["T_OBJECT_OPERATOR","->",1086],["T_STRING","addAddress",1086],"(",["T_VARIABLE","$shippingAddress",1086],")",";",["T_WHITESPACE","\n            ",1086],"}",["T_WHITESPACE","\n            ",1087],["T_COMMENT","\/\/ End handling shipping address\n",1088],["T_WHITESPACE","        ",1089],"}",["T_WHITESPACE","\n        ",1089],["T_IF","if",1090],["T_WHITESPACE"," ",1090],"(","!",["T_EMPTY","empty",1090],"(",["T_VARIABLE","$row",1090],"[",["T_CONSTANT_ENCAPSED_STRING","'is_subscribed'",1090],"]",")",")",["T_WHITESPACE"," ",1090],"{",["T_WHITESPACE","\n            ",1090],["T_VARIABLE","$isSubscribed",1091],["T_WHITESPACE"," ",1091],"=",["T_WHITESPACE"," ",1091],["T_BOOL_CAST","(bool)",1091],["T_STRING","strtolower",1091],"(",["T_VARIABLE","$row",1091],"[",["T_CONSTANT_ENCAPSED_STRING","'is_subscribed'",1091],"]",")",["T_WHITESPACE"," ",1091],["T_IS_EQUAL","==",1091],["T_WHITESPACE"," ",1091],["T_STRING","self",1091],["T_DOUBLE_COLON","::",1091],["T_STRING","SUBSCRIBED_YES",1091],";",["T_WHITESPACE","\n            ",1091],["T_VARIABLE","$this",1092],["T_OBJECT_OPERATOR","->",1092],["T_STRING","setIsSubscribed",1092],"(",["T_VARIABLE","$isSubscribed",1092],")",";",["T_WHITESPACE","\n        ",1092],"}",["T_WHITESPACE","\n        ",1093],["T_UNSET","unset",1094],"(",["T_VARIABLE","$row",1094],")",";",["T_WHITESPACE","\n        ",1094],["T_RETURN","return",1095],["T_WHITESPACE"," ",1095],["T_VARIABLE","$this",1095],";",["T_WHITESPACE","\n    ",1095],"}",["T_WHITESPACE","\n\n    ",1096],["T_DOC_COMMENT","\/**\n     * Unset subscription\n     *\n     * @return Mage_Customer_Model_Customer\n     *\/",1098],["T_WHITESPACE","\n    ",1102],["T_FUNCTION","function",1103],["T_WHITESPACE"," ",1103],["T_STRING","unsetSubscription",1103],"(",")",["T_WHITESPACE","\n    ",1103],"{",["T_WHITESPACE","\n        ",1104],["T_IF","if",1105],["T_WHITESPACE"," ",1105],"(",["T_ISSET","isset",1105],"(",["T_VARIABLE","$this",1105],["T_OBJECT_OPERATOR","->",1105],["T_STRING","_isSubscribed",1105],")",")",["T_WHITESPACE"," ",1105],"{",["T_WHITESPACE","\n            ",1105],["T_UNSET","unset",1106],"(",["T_VARIABLE","$this",1106],["T_OBJECT_OPERATOR","->",1106],["T_STRING","_isSubscribed",1106],")",";",["T_WHITESPACE","\n        ",1106],"}",["T_WHITESPACE","\n        ",1107],["T_RETURN","return",1108],["T_WHITESPACE"," ",1108],["T_VARIABLE","$this",1108],";",["T_WHITESPACE","\n    ",1108],"}",["T_WHITESPACE","\n\n    ",1109],["T_DOC_COMMENT","\/**\n     * Clean all addresses\n     *\n     * @return Mage_Customer_Model_Customer\n     *\/",1111],["T_WHITESPACE","\n    ",1115],["T_FUNCTION","function",1116],["T_WHITESPACE"," ",1116],["T_STRING","cleanAllAddresses",1116],"(",")",["T_WHITESPACE"," ",1116],"{",["T_WHITESPACE","\n        ",1116],["T_VARIABLE","$this",1117],["T_OBJECT_OPERATOR","->",1117],["T_STRING","_addressesCollection",1117],["T_WHITESPACE"," ",1117],"=",["T_WHITESPACE"," ",1117],["T_STRING","null",1117],";",["T_WHITESPACE","\n        ",1117],["T_VARIABLE","$this",1118],["T_OBJECT_OPERATOR","->",1118],["T_STRING","_addresses",1118],["T_WHITESPACE","           ",1118],"=",["T_WHITESPACE"," ",1118],["T_STRING","null",1118],";",["T_WHITESPACE","\n    ",1118],"}",["T_WHITESPACE","\n\n    ",1119],["T_DOC_COMMENT","\/**\n     * Add error\n     *\n     * @return Mage_Customer_Model_Customer\n     *\/",1121],["T_WHITESPACE","\n    ",1125],["T_FUNCTION","function",1126],["T_WHITESPACE"," ",1126],["T_STRING","addError",1126],"(",["T_VARIABLE","$error",1126],")",["T_WHITESPACE","\n    ",1126],"{",["T_WHITESPACE","\n        ",1127],["T_VARIABLE","$this",1128],["T_OBJECT_OPERATOR","->",1128],["T_STRING","_errors",1128],"[","]",["T_WHITESPACE"," ",1128],"=",["T_WHITESPACE"," ",1128],["T_VARIABLE","$error",1128],";",["T_WHITESPACE","\n        ",1128],["T_RETURN","return",1129],["T_WHITESPACE"," ",1129],["T_VARIABLE","$this",1129],";",["T_WHITESPACE","\n    ",1129],"}",["T_WHITESPACE","\n\n    ",1130],["T_DOC_COMMENT","\/**\n     * Retreive errors\n     *\n     * @return array\n     *\/",1132],["T_WHITESPACE","\n    ",1136],["T_FUNCTION","function",1137],["T_WHITESPACE"," ",1137],["T_STRING","getErrors",1137],"(",")",["T_WHITESPACE","\n    ",1137],"{",["T_WHITESPACE","\n        ",1138],["T_RETURN","return",1139],["T_WHITESPACE"," ",1139],["T_VARIABLE","$this",1139],["T_OBJECT_OPERATOR","->",1139],["T_STRING","_errors",1139],";",["T_WHITESPACE","\n    ",1139],"}",["T_WHITESPACE","\n\n    ",1140],["T_DOC_COMMENT","\/**\n     * Reset errors array\n     *\n     * @return Mage_Customer_Model_Customer\n     *\/",1142],["T_WHITESPACE","\n    ",1146],["T_FUNCTION","function",1147],["T_WHITESPACE"," ",1147],["T_STRING","resetErrors",1147],"(",")",["T_WHITESPACE","\n    ",1147],"{",["T_WHITESPACE","\n        ",1148],["T_VARIABLE","$this",1149],["T_OBJECT_OPERATOR","->",1149],["T_STRING","_errors",1149],["T_WHITESPACE"," ",1149],"=",["T_WHITESPACE"," ",1149],["T_ARRAY","array",1149],"(",")",";",["T_WHITESPACE","\n        ",1149],["T_RETURN","return",1150],["T_WHITESPACE"," ",1150],["T_VARIABLE","$this",1150],";",["T_WHITESPACE","\n    ",1150],"}",["T_WHITESPACE","\n\n    ",1151],["T_DOC_COMMENT","\/**\n     * Print error\n     *\n     * @param $error\n     * @param $line\n     * @return boolean\n     *\/",1153],["T_WHITESPACE","\n    ",1159],["T_FUNCTION","function",1160],["T_WHITESPACE"," ",1160],["T_STRING","printError",1160],"(",["T_VARIABLE","$error",1160],",",["T_WHITESPACE"," ",1160],["T_VARIABLE","$line",1160],["T_WHITESPACE"," ",1160],"=",["T_WHITESPACE"," ",1160],["T_STRING","null",1160],")",["T_WHITESPACE","\n    ",1160],"{",["T_WHITESPACE","\n        ",1161],["T_IF","if",1162],["T_WHITESPACE"," ",1162],"(",["T_VARIABLE","$error",1162],["T_WHITESPACE"," ",1162],["T_IS_EQUAL","==",1162],["T_WHITESPACE"," ",1162],["T_STRING","null",1162],")",["T_WHITESPACE"," ",1162],"{",["T_WHITESPACE","\n            ",1162],["T_RETURN","return",1163],["T_WHITESPACE"," ",1163],["T_STRING","false",1163],";",["T_WHITESPACE","\n        ",1163],"}",["T_WHITESPACE","\n\n        ",1164],["T_VARIABLE","$liStyle",1166],["T_WHITESPACE"," ",1166],"=",["T_WHITESPACE"," ",1166],["T_CONSTANT_ENCAPSED_STRING","'background-color: #FDD; '",1166],";",["T_WHITESPACE","\n        ",1166],["T_ECHO","echo",1167],["T_WHITESPACE"," ",1167],["T_CONSTANT_ENCAPSED_STRING","'<li style=\"'",1167],["T_WHITESPACE"," ",1167],".",["T_WHITESPACE"," ",1167],["T_VARIABLE","$liStyle",1167],["T_WHITESPACE"," ",1167],".",["T_WHITESPACE"," ",1167],["T_CONSTANT_ENCAPSED_STRING","'\">'",1167],";",["T_WHITESPACE","\n        ",1167],["T_ECHO","echo",1168],["T_WHITESPACE"," ",1168],["T_CONSTANT_ENCAPSED_STRING","'<img src=\"'",1168],["T_WHITESPACE"," ",1168],".",["T_WHITESPACE"," ",1168],["T_STRING","Mage",1168],["T_DOUBLE_COLON","::",1168],["T_STRING","getDesign",1168],"(",")",["T_OBJECT_OPERATOR","->",1168],["T_STRING","getSkinUrl",1168],"(",["T_CONSTANT_ENCAPSED_STRING","'images\/error_msg_icon.gif'",1168],")",["T_WHITESPACE"," ",1168],".",["T_WHITESPACE"," ",1168],["T_CONSTANT_ENCAPSED_STRING","'\" class=\"v-middle\"\/>'",1168],";",["T_WHITESPACE","\n        ",1168],["T_ECHO","echo",1169],["T_WHITESPACE"," ",1169],["T_VARIABLE","$error",1169],";",["T_WHITESPACE","\n        ",1169],["T_IF","if",1170],["T_WHITESPACE"," ",1170],"(",["T_VARIABLE","$line",1170],")",["T_WHITESPACE"," ",1170],"{",["T_WHITESPACE","\n            ",1170],["T_ECHO","echo",1171],["T_WHITESPACE"," ",1171],["T_CONSTANT_ENCAPSED_STRING","'<small>, Line: <b>'",1171],["T_WHITESPACE"," ",1171],".",["T_WHITESPACE"," ",1171],["T_VARIABLE","$line",1171],["T_WHITESPACE"," ",1171],".",["T_WHITESPACE"," ",1171],["T_CONSTANT_ENCAPSED_STRING","'<\/b><\/small>'",1171],";",["T_WHITESPACE","\n        ",1171],"}",["T_WHITESPACE","\n        ",1172],["T_ECHO","echo",1173],["T_WHITESPACE"," ",1173],["T_CONSTANT_ENCAPSED_STRING","'<\/li>'",1173],";",["T_WHITESPACE","\n    ",1173],"}",["T_WHITESPACE","\n\n    ",1174],["T_DOC_COMMENT","\/**\n     * Validate address\n     *\n     * @param array $data\n     * @param string $type\n     * @return bool\n     *\/",1176],["T_WHITESPACE","\n    ",1182],["T_FUNCTION","function",1183],["T_WHITESPACE"," ",1183],["T_STRING","validateAddress",1183],"(",["T_ARRAY","array",1183],["T_WHITESPACE"," ",1183],["T_VARIABLE","$data",1183],",",["T_WHITESPACE"," ",1183],["T_VARIABLE","$type",1183],["T_WHITESPACE"," ",1183],"=",["T_WHITESPACE"," ",1183],["T_CONSTANT_ENCAPSED_STRING","'billing'",1183],")",["T_WHITESPACE","\n    ",1183],"{",["T_WHITESPACE","\n        ",1184],["T_VARIABLE","$fields",1185],["T_WHITESPACE"," ",1185],"=",["T_WHITESPACE"," ",1185],["T_ARRAY","array",1185],"(",["T_CONSTANT_ENCAPSED_STRING","'city'",1185],",",["T_WHITESPACE"," ",1185],["T_CONSTANT_ENCAPSED_STRING","'country'",1185],",",["T_WHITESPACE"," ",1185],["T_CONSTANT_ENCAPSED_STRING","'postcode'",1185],",",["T_WHITESPACE"," ",1185],["T_CONSTANT_ENCAPSED_STRING","'telephone'",1185],",",["T_WHITESPACE"," ",1185],["T_CONSTANT_ENCAPSED_STRING","'street1'",1185],")",";",["T_WHITESPACE","\n        ",1185],["T_VARIABLE","$usca",1186],["T_WHITESPACE","   ",1186],"=",["T_WHITESPACE"," ",1186],["T_ARRAY","array",1186],"(",["T_CONSTANT_ENCAPSED_STRING","'US'",1186],",",["T_WHITESPACE"," ",1186],["T_CONSTANT_ENCAPSED_STRING","'CA'",1186],")",";",["T_WHITESPACE","\n        ",1186],["T_VARIABLE","$prefix",1187],["T_WHITESPACE"," ",1187],"=",["T_WHITESPACE"," ",1187],["T_VARIABLE","$type",1187],["T_WHITESPACE"," ",1187],"?",["T_WHITESPACE"," ",1187],["T_VARIABLE","$type",1187],["T_WHITESPACE"," ",1187],".",["T_WHITESPACE"," ",1187],["T_CONSTANT_ENCAPSED_STRING","'_'",1187],["T_WHITESPACE"," ",1187],":",["T_WHITESPACE"," ",1187],["T_CONSTANT_ENCAPSED_STRING","''",1187],";",["T_WHITESPACE","\n\n        ",1187],["T_IF","if",1189],["T_WHITESPACE"," ",1189],"(",["T_VARIABLE","$data",1189],")",["T_WHITESPACE"," ",1189],"{",["T_WHITESPACE","\n            ",1189],["T_FOREACH","foreach",1190],["T_WHITESPACE"," ",1190],"(",["T_VARIABLE","$fields",1190],["T_WHITESPACE"," ",1190],["T_AS","as",1190],["T_WHITESPACE"," ",1190],["T_VARIABLE","$field",1190],")",["T_WHITESPACE"," ",1190],"{",["T_WHITESPACE","\n                ",1190],["T_IF","if",1191],["T_WHITESPACE"," ",1191],"(","!",["T_ISSET","isset",1191],"(",["T_VARIABLE","$data",1191],"[",["T_VARIABLE","$prefix",1191],["T_WHITESPACE"," ",1191],".",["T_WHITESPACE"," ",1191],["T_VARIABLE","$field",1191],"]",")",")",["T_WHITESPACE"," ",1191],"{",["T_WHITESPACE","\n                    ",1191],["T_RETURN","return",1192],["T_WHITESPACE"," ",1192],["T_STRING","false",1192],";",["T_WHITESPACE","\n                ",1192],"}",["T_WHITESPACE","\n                ",1193],["T_IF","if",1194],["T_WHITESPACE"," ",1194],"(",["T_VARIABLE","$field",1194],["T_WHITESPACE"," ",1194],["T_IS_EQUAL","==",1194],["T_WHITESPACE"," ",1194],["T_CONSTANT_ENCAPSED_STRING","'country'",1194],["T_WHITESPACE","\n                    ",1194],["T_BOOLEAN_AND","&&",1195],["T_WHITESPACE"," ",1195],["T_STRING","in_array",1195],"(",["T_STRING","strtolower",1195],"(",["T_VARIABLE","$data",1195],"[",["T_VARIABLE","$prefix",1195],["T_WHITESPACE"," ",1195],".",["T_WHITESPACE"," ",1195],["T_VARIABLE","$field",1195],"]",")",",",["T_WHITESPACE"," ",1195],["T_ARRAY","array",1195],"(",["T_CONSTANT_ENCAPSED_STRING","'US'",1195],",",["T_WHITESPACE"," ",1195],["T_CONSTANT_ENCAPSED_STRING","'CA'",1195],")",")",")",["T_WHITESPACE"," ",1195],"{",["T_WHITESPACE","\n\n                    ",1195],["T_IF","if",1197],["T_WHITESPACE"," ",1197],"(","!",["T_ISSET","isset",1197],"(",["T_VARIABLE","$data",1197],"[",["T_VARIABLE","$prefix",1197],["T_WHITESPACE"," ",1197],".",["T_WHITESPACE"," ",1197],["T_CONSTANT_ENCAPSED_STRING","'region'",1197],"]",")",")",["T_WHITESPACE"," ",1197],"{",["T_WHITESPACE","\n                        ",1197],["T_RETURN","return",1198],["T_WHITESPACE"," ",1198],["T_STRING","false",1198],";",["T_WHITESPACE","\n                    ",1198],"}",["T_WHITESPACE","\n\n                    ",1199],["T_VARIABLE","$region",1201],["T_WHITESPACE"," ",1201],"=",["T_WHITESPACE"," ",1201],["T_STRING","Mage",1201],["T_DOUBLE_COLON","::",1201],["T_STRING","getModel",1201],"(",["T_CONSTANT_ENCAPSED_STRING","'directory\/region'",1201],")",["T_WHITESPACE","\n                        ",1201],["T_OBJECT_OPERATOR","->",1202],["T_STRING","loadByName",1202],"(",["T_VARIABLE","$data",1202],"[",["T_VARIABLE","$prefix",1202],["T_WHITESPACE"," ",1202],".",["T_WHITESPACE"," ",1202],["T_CONSTANT_ENCAPSED_STRING","'region'",1202],"]",")",";",["T_WHITESPACE","\n                    ",1202],["T_IF","if",1203],["T_WHITESPACE"," ",1203],"(","!",["T_VARIABLE","$region",1203],["T_OBJECT_OPERATOR","->",1203],["T_STRING","getId",1203],"(",")",")",["T_WHITESPACE"," ",1203],"{",["T_WHITESPACE","\n                        ",1203],["T_RETURN","return",1204],["T_WHITESPACE"," ",1204],["T_STRING","false",1204],";",["T_WHITESPACE","\n                    ",1204],"}",["T_WHITESPACE","\n                    ",1205],["T_UNSET","unset",1206],"(",["T_VARIABLE","$region",1206],")",";",["T_WHITESPACE","\n                ",1206],"}",["T_WHITESPACE","\n            ",1207],"}",["T_WHITESPACE","\n            ",1208],["T_UNSET","unset",1209],"(",["T_VARIABLE","$data",1209],")",";",["T_WHITESPACE","\n            ",1209],["T_RETURN","return",1210],["T_WHITESPACE"," ",1210],["T_STRING","true",1210],";",["T_WHITESPACE","\n        ",1210],"}",["T_WHITESPACE","\n        ",1211],["T_RETURN","return",1212],["T_WHITESPACE"," ",1212],["T_STRING","false",1212],";",["T_WHITESPACE","\n    ",1212],"}",["T_WHITESPACE","\n\n    ",1213],["T_DOC_COMMENT","\/**\n     * Prepare customer for delete\n     *\/",1215],["T_WHITESPACE","\n    ",1217],["T_PROTECTED","protected",1218],["T_WHITESPACE"," ",1218],["T_FUNCTION","function",1218],["T_WHITESPACE"," ",1218],["T_STRING","_beforeDelete",1218],"(",")",["T_WHITESPACE","\n    ",1218],"{",["T_WHITESPACE","\n        ",1219],["T_VARIABLE","$this",1220],["T_OBJECT_OPERATOR","->",1220],["T_STRING","_protectFromNonAdmin",1220],"(",")",";",["T_WHITESPACE","\n        ",1220],["T_RETURN","return",1221],["T_WHITESPACE"," ",1221],["T_STRING","parent",1221],["T_DOUBLE_COLON","::",1221],["T_STRING","_beforeDelete",1221],"(",")",";",["T_WHITESPACE","\n    ",1221],"}",["T_WHITESPACE","\n\n    ",1222],["T_DOC_COMMENT","\/**\n     * Get customer created at date timestamp\n     *\n     * @return int|null\n     *\/",1224],["T_WHITESPACE","\n    ",1228],["T_PUBLIC","public",1229],["T_WHITESPACE"," ",1229],["T_FUNCTION","function",1229],["T_WHITESPACE"," ",1229],["T_STRING","getCreatedAtTimestamp",1229],"(",")",["T_WHITESPACE","\n    ",1229],"{",["T_WHITESPACE","\n        ",1230],["T_VARIABLE","$date",1231],["T_WHITESPACE"," ",1231],"=",["T_WHITESPACE"," ",1231],["T_VARIABLE","$this",1231],["T_OBJECT_OPERATOR","->",1231],["T_STRING","getCreatedAt",1231],"(",")",";",["T_WHITESPACE","\n        ",1231],["T_IF","if",1232],["T_WHITESPACE"," ",1232],"(",["T_VARIABLE","$date",1232],")",["T_WHITESPACE"," ",1232],"{",["T_WHITESPACE","\n            ",1232],["T_RETURN","return",1233],["T_WHITESPACE"," ",1233],["T_STRING","Varien_Date",1233],["T_DOUBLE_COLON","::",1233],["T_STRING","toTimestamp",1233],"(",["T_VARIABLE","$date",1233],")",";",["T_WHITESPACE","\n        ",1233],"}",["T_WHITESPACE","\n        ",1234],["T_RETURN","return",1235],["T_WHITESPACE"," ",1235],["T_STRING","null",1235],";",["T_WHITESPACE","\n    ",1235],"}",["T_WHITESPACE","\n\n    ",1236],["T_DOC_COMMENT","\/**\n     * Reset all model data\n     *\n     * @return Mage_Customer_Model_Customer\n     *\/",1238],["T_WHITESPACE","\n    ",1242],["T_PUBLIC","public",1243],["T_WHITESPACE"," ",1243],["T_FUNCTION","function",1243],["T_WHITESPACE"," ",1243],["T_STRING","reset",1243],"(",")",["T_WHITESPACE","\n    ",1243],"{",["T_WHITESPACE","\n        ",1244],["T_VARIABLE","$this",1245],["T_OBJECT_OPERATOR","->",1245],["T_STRING","setData",1245],"(",["T_ARRAY","array",1245],"(",")",")",";",["T_WHITESPACE","\n        ",1245],["T_VARIABLE","$this",1246],["T_OBJECT_OPERATOR","->",1246],["T_STRING","setOrigData",1246],"(",")",";",["T_WHITESPACE","\n        ",1246],["T_VARIABLE","$this",1247],["T_OBJECT_OPERATOR","->",1247],["T_STRING","_attributes",1247],["T_WHITESPACE"," ",1247],"=",["T_WHITESPACE"," ",1247],["T_STRING","null",1247],";",["T_WHITESPACE","\n\n        ",1247],["T_RETURN","return",1249],["T_WHITESPACE"," ",1249],["T_VARIABLE","$this",1249],";",["T_WHITESPACE","\n    ",1249],"}",["T_WHITESPACE","\n\n    ",1250],["T_DOC_COMMENT","\/**\n     * Checks model is deleteable\n     *\n     * @return boolean\n     *\/",1252],["T_WHITESPACE","\n    ",1256],["T_PUBLIC","public",1257],["T_WHITESPACE"," ",1257],["T_FUNCTION","function",1257],["T_WHITESPACE"," ",1257],["T_STRING","isDeleteable",1257],"(",")",["T_WHITESPACE","\n    ",1257],"{",["T_WHITESPACE","\n        ",1258],["T_RETURN","return",1259],["T_WHITESPACE"," ",1259],["T_VARIABLE","$this",1259],["T_OBJECT_OPERATOR","->",1259],["T_STRING","_isDeleteable",1259],";",["T_WHITESPACE","\n    ",1259],"}",["T_WHITESPACE","\n\n    ",1260],["T_DOC_COMMENT","\/**\n     * Set is deleteable flag\n     *\n     * @param boolean $value\n     * @return Mage_Customer_Model_Customer\n     *\/",1262],["T_WHITESPACE","\n    ",1267],["T_PUBLIC","public",1268],["T_WHITESPACE"," ",1268],["T_FUNCTION","function",1268],["T_WHITESPACE"," ",1268],["T_STRING","setIsDeleteable",1268],"(",["T_VARIABLE","$value",1268],")",["T_WHITESPACE","\n    ",1268],"{",["T_WHITESPACE","\n        ",1269],["T_VARIABLE","$this",1270],["T_OBJECT_OPERATOR","->",1270],["T_STRING","_isDeleteable",1270],["T_WHITESPACE"," ",1270],"=",["T_WHITESPACE"," ",1270],["T_BOOL_CAST","(bool)",1270],["T_VARIABLE","$value",1270],";",["T_WHITESPACE","\n        ",1270],["T_RETURN","return",1271],["T_WHITESPACE"," ",1271],["T_VARIABLE","$this",1271],";",["T_WHITESPACE","\n    ",1271],"}",["T_WHITESPACE","\n\n    ",1272],["T_DOC_COMMENT","\/**\n     * Checks model is readonly\n     *\n     * @return boolean\n     *\/",1274],["T_WHITESPACE","\n    ",1278],["T_PUBLIC","public",1279],["T_WHITESPACE"," ",1279],["T_FUNCTION","function",1279],["T_WHITESPACE"," ",1279],["T_STRING","isReadonly",1279],"(",")",["T_WHITESPACE","\n    ",1279],"{",["T_WHITESPACE","\n        ",1280],["T_RETURN","return",1281],["T_WHITESPACE"," ",1281],["T_VARIABLE","$this",1281],["T_OBJECT_OPERATOR","->",1281],["T_STRING","_isReadonly",1281],";",["T_WHITESPACE","\n    ",1281],"}",["T_WHITESPACE","\n\n    ",1282],["T_DOC_COMMENT","\/**\n     * Set is readonly flag\n     *\n     * @param boolean $value\n     * @return Mage_Customer_Model_Customer\n     *\/",1284],["T_WHITESPACE","\n    ",1289],["T_PUBLIC","public",1290],["T_WHITESPACE"," ",1290],["T_FUNCTION","function",1290],["T_WHITESPACE"," ",1290],["T_STRING","setIsReadonly",1290],"(",["T_VARIABLE","$value",1290],")",["T_WHITESPACE","\n    ",1290],"{",["T_WHITESPACE","\n        ",1291],["T_VARIABLE","$this",1292],["T_OBJECT_OPERATOR","->",1292],["T_STRING","_isReadonly",1292],["T_WHITESPACE"," ",1292],"=",["T_WHITESPACE"," ",1292],["T_BOOL_CAST","(bool)",1292],["T_VARIABLE","$value",1292],";",["T_WHITESPACE","\n        ",1292],["T_RETURN","return",1293],["T_WHITESPACE"," ",1293],["T_VARIABLE","$this",1293],";",["T_WHITESPACE","\n    ",1293],"}",["T_WHITESPACE","\n\n    ",1294],["T_DOC_COMMENT","\/**\n     * Check whether confirmation may be skipped when registering using certain email address\n     *\n     * @return bool\n     *\/",1296],["T_WHITESPACE","\n    ",1300],["T_PUBLIC","public",1301],["T_WHITESPACE"," ",1301],["T_FUNCTION","function",1301],["T_WHITESPACE"," ",1301],["T_STRING","canSkipConfirmation",1301],"(",")",["T_WHITESPACE","\n    ",1301],"{",["T_WHITESPACE","\n        ",1302],["T_RETURN","return",1303],["T_WHITESPACE"," ",1303],["T_VARIABLE","$this",1303],["T_OBJECT_OPERATOR","->",1303],["T_STRING","getId",1303],"(",")",["T_WHITESPACE"," ",1303],["T_BOOLEAN_AND","&&",1303],["T_WHITESPACE"," ",1303],["T_VARIABLE","$this",1303],["T_OBJECT_OPERATOR","->",1303],["T_STRING","hasSkipConfirmationIfEmail",1303],"(",")",["T_WHITESPACE","\n            ",1303],["T_BOOLEAN_AND","&&",1304],["T_WHITESPACE"," ",1304],["T_STRING","strtolower",1304],"(",["T_VARIABLE","$this",1304],["T_OBJECT_OPERATOR","->",1304],["T_STRING","getSkipConfirmationIfEmail",1304],"(",")",")",["T_WHITESPACE"," ",1304],["T_IS_IDENTICAL","===",1304],["T_WHITESPACE"," ",1304],["T_STRING","strtolower",1304],"(",["T_VARIABLE","$this",1304],["T_OBJECT_OPERATOR","->",1304],["T_STRING","getEmail",1304],"(",")",")",";",["T_WHITESPACE","\n    ",1304],"}",["T_WHITESPACE","\n\n    ",1305],["T_DOC_COMMENT","\/**\n     * Clone current object\n     *\/",1307],["T_WHITESPACE","\n    ",1309],["T_PUBLIC","public",1310],["T_WHITESPACE"," ",1310],["T_FUNCTION","function",1310],["T_WHITESPACE"," ",1310],["T_STRING","__clone",1310],"(",")",["T_WHITESPACE","\n    ",1310],"{",["T_WHITESPACE","\n        ",1311],["T_VARIABLE","$newAddressCollection",1312],["T_WHITESPACE"," ",1312],"=",["T_WHITESPACE"," ",1312],["T_VARIABLE","$this",1312],["T_OBJECT_OPERATOR","->",1312],["T_STRING","getPrimaryAddresses",1312],"(",")",";",["T_WHITESPACE","\n        ",1312],["T_VARIABLE","$newAddressCollection",1313],["T_WHITESPACE"," ",1313],"=",["T_WHITESPACE"," ",1313],["T_STRING","array_merge",1313],"(",["T_VARIABLE","$newAddressCollection",1313],",",["T_WHITESPACE"," ",1313],["T_VARIABLE","$this",1313],["T_OBJECT_OPERATOR","->",1313],["T_STRING","getAdditionalAddresses",1313],"(",")",")",";",["T_WHITESPACE","\n        ",1313],["T_VARIABLE","$this",1314],["T_OBJECT_OPERATOR","->",1314],["T_STRING","setId",1314],"(",["T_STRING","null",1314],")",";",["T_WHITESPACE","\n        ",1314],["T_VARIABLE","$this",1315],["T_OBJECT_OPERATOR","->",1315],["T_STRING","cleanAllAddresses",1315],"(",")",";",["T_WHITESPACE","\n        ",1315],["T_FOREACH","foreach",1316],["T_WHITESPACE"," ",1316],"(",["T_VARIABLE","$newAddressCollection",1316],["T_WHITESPACE"," ",1316],["T_AS","as",1316],["T_WHITESPACE"," ",1316],["T_VARIABLE","$address",1316],")",["T_WHITESPACE"," ",1316],"{",["T_WHITESPACE","\n            ",1316],["T_VARIABLE","$this",1317],["T_OBJECT_OPERATOR","->",1317],["T_STRING","addAddress",1317],"(",["T_CLONE","clone",1317],["T_WHITESPACE"," ",1317],["T_VARIABLE","$address",1317],")",";",["T_WHITESPACE","\n        ",1317],"}",["T_WHITESPACE","\n    ",1318],"}",["T_WHITESPACE","\n\n    ",1319],["T_DOC_COMMENT","\/**\n     * Return Entity Type instance\n     *\n     * @return Mage_Eav_Model_Entity_Type\n     *\/",1321],["T_WHITESPACE","\n    ",1325],["T_PUBLIC","public",1326],["T_WHITESPACE"," ",1326],["T_FUNCTION","function",1326],["T_WHITESPACE"," ",1326],["T_STRING","getEntityType",1326],"(",")",["T_WHITESPACE","\n    ",1326],"{",["T_WHITESPACE","\n        ",1327],["T_RETURN","return",1328],["T_WHITESPACE"," ",1328],["T_VARIABLE","$this",1328],["T_OBJECT_OPERATOR","->",1328],["T_STRING","_getResource",1328],"(",")",["T_OBJECT_OPERATOR","->",1328],["T_STRING","getEntityType",1328],"(",")",";",["T_WHITESPACE","\n    ",1328],"}",["T_WHITESPACE","\n\n    ",1329],["T_DOC_COMMENT","\/**\n     * Return Entity Type ID\n     *\n     * @return int\n     *\/",1331],["T_WHITESPACE","\n    ",1335],["T_PUBLIC","public",1336],["T_WHITESPACE"," ",1336],["T_FUNCTION","function",1336],["T_WHITESPACE"," ",1336],["T_STRING","getEntityTypeId",1336],"(",")",["T_WHITESPACE","\n    ",1336],"{",["T_WHITESPACE","\n        ",1337],["T_VARIABLE","$entityTypeId",1338],["T_WHITESPACE"," ",1338],"=",["T_WHITESPACE"," ",1338],["T_VARIABLE","$this",1338],["T_OBJECT_OPERATOR","->",1338],["T_STRING","getData",1338],"(",["T_CONSTANT_ENCAPSED_STRING","'entity_type_id'",1338],")",";",["T_WHITESPACE","\n        ",1338],["T_IF","if",1339],["T_WHITESPACE"," ",1339],"(","!",["T_VARIABLE","$entityTypeId",1339],")",["T_WHITESPACE"," ",1339],"{",["T_WHITESPACE","\n            ",1339],["T_VARIABLE","$entityTypeId",1340],["T_WHITESPACE"," ",1340],"=",["T_WHITESPACE"," ",1340],["T_VARIABLE","$this",1340],["T_OBJECT_OPERATOR","->",1340],["T_STRING","getEntityType",1340],"(",")",["T_OBJECT_OPERATOR","->",1340],["T_STRING","getId",1340],"(",")",";",["T_WHITESPACE","\n            ",1340],["T_VARIABLE","$this",1341],["T_OBJECT_OPERATOR","->",1341],["T_STRING","setData",1341],"(",["T_CONSTANT_ENCAPSED_STRING","'entity_type_id'",1341],",",["T_WHITESPACE"," ",1341],["T_VARIABLE","$entityTypeId",1341],")",";",["T_WHITESPACE","\n        ",1341],"}",["T_WHITESPACE","\n        ",1342],["T_RETURN","return",1343],["T_WHITESPACE"," ",1343],["T_VARIABLE","$entityTypeId",1343],";",["T_WHITESPACE","\n    ",1343],"}",["T_WHITESPACE","\n\n    ",1344],["T_DOC_COMMENT","\/**\n     * Get either first store ID from a set website or the provided as default\n     *\n     * @param int|string|null $storeId\n     *\n     * @return int\n     *\/",1346],["T_WHITESPACE","\n    ",1352],["T_PROTECTED","protected",1353],["T_WHITESPACE"," ",1353],["T_FUNCTION","function",1353],["T_WHITESPACE"," ",1353],["T_STRING","_getWebsiteStoreId",1353],"(",["T_VARIABLE","$defaultStoreId",1353],["T_WHITESPACE"," ",1353],"=",["T_WHITESPACE"," ",1353],["T_STRING","null",1353],")",["T_WHITESPACE","\n    ",1353],"{",["T_WHITESPACE","\n        ",1354],["T_IF","if",1355],["T_WHITESPACE"," ",1355],"(",["T_VARIABLE","$this",1355],["T_OBJECT_OPERATOR","->",1355],["T_STRING","getWebsiteId",1355],"(",")",["T_WHITESPACE"," ",1355],["T_IS_NOT_EQUAL","!=",1355],["T_WHITESPACE"," ",1355],["T_LNUMBER","0",1355],["T_WHITESPACE"," ",1355],["T_BOOLEAN_AND","&&",1355],["T_WHITESPACE"," ",1355],["T_EMPTY","empty",1355],"(",["T_VARIABLE","$defaultStoreId",1355],")",")",["T_WHITESPACE"," ",1355],"{",["T_WHITESPACE","\n            ",1355],["T_VARIABLE","$storeIds",1356],["T_WHITESPACE"," ",1356],"=",["T_WHITESPACE"," ",1356],["T_STRING","Mage",1356],["T_DOUBLE_COLON","::",1356],["T_STRING","app",1356],"(",")",["T_OBJECT_OPERATOR","->",1356],["T_STRING","getWebsite",1356],"(",["T_VARIABLE","$this",1356],["T_OBJECT_OPERATOR","->",1356],["T_STRING","getWebsiteId",1356],"(",")",")",["T_OBJECT_OPERATOR","->",1356],["T_STRING","getStoreIds",1356],"(",")",";",["T_WHITESPACE","\n            ",1356],["T_STRING","reset",1357],"(",["T_VARIABLE","$storeIds",1357],")",";",["T_WHITESPACE","\n            ",1357],["T_VARIABLE","$defaultStoreId",1358],["T_WHITESPACE"," ",1358],"=",["T_WHITESPACE"," ",1358],["T_STRING","current",1358],"(",["T_VARIABLE","$storeIds",1358],")",";",["T_WHITESPACE","\n        ",1358],"}",["T_WHITESPACE","\n        ",1359],["T_RETURN","return",1360],["T_WHITESPACE"," ",1360],["T_VARIABLE","$defaultStoreId",1360],";",["T_WHITESPACE","\n    ",1360],"}",["T_WHITESPACE","\n\n    ",1361],["T_DOC_COMMENT","\/**\n     * Change reset password link token\n     *\n     * Stores new reset password link token\n     *\n     * @param string $newResetPasswordLinkToken\n     * @return Mage_Customer_Model_Customer\n     *\/",1363],["T_WHITESPACE","\n    ",1370],["T_PUBLIC","public",1371],["T_WHITESPACE"," ",1371],["T_FUNCTION","function",1371],["T_WHITESPACE"," ",1371],["T_STRING","changeResetPasswordLinkToken",1371],"(",["T_VARIABLE","$newResetPasswordLinkToken",1371],")",["T_WHITESPACE"," ",1371],"{",["T_WHITESPACE","\n        ",1371],["T_IF","if",1372],["T_WHITESPACE"," ",1372],"(","!",["T_STRING","is_string",1372],"(",["T_VARIABLE","$newResetPasswordLinkToken",1372],")",["T_WHITESPACE"," ",1372],["T_BOOLEAN_OR","||",1372],["T_WHITESPACE"," ",1372],["T_EMPTY","empty",1372],"(",["T_VARIABLE","$newResetPasswordLinkToken",1372],")",")",["T_WHITESPACE"," ",1372],"{",["T_WHITESPACE","\n            ",1372],["T_THROW","throw",1373],["T_WHITESPACE"," ",1373],["T_STRING","Mage",1373],["T_DOUBLE_COLON","::",1373],["T_STRING","exception",1373],"(",["T_CONSTANT_ENCAPSED_STRING","'Mage_Core'",1373],",",["T_WHITESPACE"," ",1373],["T_STRING","Mage",1373],["T_DOUBLE_COLON","::",1373],["T_STRING","helper",1373],"(",["T_CONSTANT_ENCAPSED_STRING","'customer'",1373],")",["T_OBJECT_OPERATOR","->",1373],["T_STRING","__",1373],"(",["T_CONSTANT_ENCAPSED_STRING","'Invalid password reset token.'",1373],")",",",["T_WHITESPACE","\n                ",1373],["T_STRING","self",1374],["T_DOUBLE_COLON","::",1374],["T_STRING","EXCEPTION_INVALID_RESET_PASSWORD_LINK_TOKEN",1374],")",";",["T_WHITESPACE","\n        ",1374],"}",["T_WHITESPACE","\n        ",1375],["T_VARIABLE","$this",1376],["T_OBJECT_OPERATOR","->",1376],["T_STRING","_getResource",1376],"(",")",["T_OBJECT_OPERATOR","->",1376],["T_STRING","changeResetPasswordLinkToken",1376],"(",["T_VARIABLE","$this",1376],",",["T_WHITESPACE"," ",1376],["T_VARIABLE","$newResetPasswordLinkToken",1376],")",";",["T_WHITESPACE","\n        ",1376],["T_RETURN","return",1377],["T_WHITESPACE"," ",1377],["T_VARIABLE","$this",1377],";",["T_WHITESPACE","\n    ",1377],"}",["T_WHITESPACE","\n\n    ",1378],["T_DOC_COMMENT","\/**\n     * Check if current reset password link token is expired\n     *\n     * @return boolean\n     *\/",1380],["T_WHITESPACE","\n    ",1384],["T_PUBLIC","public",1385],["T_WHITESPACE"," ",1385],["T_FUNCTION","function",1385],["T_WHITESPACE"," ",1385],["T_STRING","isResetPasswordLinkTokenExpired",1385],"(",")",["T_WHITESPACE","\n    ",1385],"{",["T_WHITESPACE","\n        ",1386],["T_VARIABLE","$resetPasswordLinkToken",1387],["T_WHITESPACE"," ",1387],"=",["T_WHITESPACE"," ",1387],["T_VARIABLE","$this",1387],["T_OBJECT_OPERATOR","->",1387],["T_STRING","getRpToken",1387],"(",")",";",["T_WHITESPACE","\n        ",1387],["T_VARIABLE","$resetPasswordLinkTokenCreatedAt",1388],["T_WHITESPACE"," ",1388],"=",["T_WHITESPACE"," ",1388],["T_VARIABLE","$this",1388],["T_OBJECT_OPERATOR","->",1388],["T_STRING","getRpTokenCreatedAt",1388],"(",")",";",["T_WHITESPACE","\n\n        ",1388],["T_IF","if",1390],["T_WHITESPACE"," ",1390],"(",["T_EMPTY","empty",1390],"(",["T_VARIABLE","$resetPasswordLinkToken",1390],")",["T_WHITESPACE"," ",1390],["T_BOOLEAN_OR","||",1390],["T_WHITESPACE"," ",1390],["T_EMPTY","empty",1390],"(",["T_VARIABLE","$resetPasswordLinkTokenCreatedAt",1390],")",")",["T_WHITESPACE"," ",1390],"{",["T_WHITESPACE","\n            ",1390],["T_RETURN","return",1391],["T_WHITESPACE"," ",1391],["T_STRING","true",1391],";",["T_WHITESPACE","\n        ",1391],"}",["T_WHITESPACE","\n\n        ",1392],["T_VARIABLE","$tokenExpirationPeriod",1394],["T_WHITESPACE"," ",1394],"=",["T_WHITESPACE"," ",1394],["T_STRING","Mage",1394],["T_DOUBLE_COLON","::",1394],["T_STRING","helper",1394],"(",["T_CONSTANT_ENCAPSED_STRING","'customer'",1394],")",["T_OBJECT_OPERATOR","->",1394],["T_STRING","getResetPasswordLinkExpirationPeriod",1394],"(",")",";",["T_WHITESPACE","\n\n        ",1394],["T_VARIABLE","$currentDate",1396],["T_WHITESPACE"," ",1396],"=",["T_WHITESPACE"," ",1396],["T_STRING","Varien_Date",1396],["T_DOUBLE_COLON","::",1396],["T_STRING","now",1396],"(",")",";",["T_WHITESPACE","\n        ",1396],["T_VARIABLE","$currentTimestamp",1397],["T_WHITESPACE"," ",1397],"=",["T_WHITESPACE"," ",1397],["T_STRING","Varien_Date",1397],["T_DOUBLE_COLON","::",1397],["T_STRING","toTimestamp",1397],"(",["T_VARIABLE","$currentDate",1397],")",";",["T_WHITESPACE","\n        ",1397],["T_VARIABLE","$tokenTimestamp",1398],["T_WHITESPACE"," ",1398],"=",["T_WHITESPACE"," ",1398],["T_STRING","Varien_Date",1398],["T_DOUBLE_COLON","::",1398],["T_STRING","toTimestamp",1398],"(",["T_VARIABLE","$resetPasswordLinkTokenCreatedAt",1398],")",";",["T_WHITESPACE","\n        ",1398],["T_IF","if",1399],["T_WHITESPACE"," ",1399],"(",["T_VARIABLE","$tokenTimestamp",1399],["T_WHITESPACE"," ",1399],">",["T_WHITESPACE"," ",1399],["T_VARIABLE","$currentTimestamp",1399],")",["T_WHITESPACE"," ",1399],"{",["T_WHITESPACE","\n            ",1399],["T_RETURN","return",1400],["T_WHITESPACE"," ",1400],["T_STRING","true",1400],";",["T_WHITESPACE","\n        ",1400],"}",["T_WHITESPACE","\n\n        ",1401],["T_VARIABLE","$hoursDifference",1403],["T_WHITESPACE"," ",1403],"=",["T_WHITESPACE"," ",1403],["T_STRING","floor",1403],"(","(",["T_VARIABLE","$currentTimestamp",1403],["T_WHITESPACE"," ",1403],"-",["T_WHITESPACE"," ",1403],["T_VARIABLE","$tokenTimestamp",1403],")",["T_WHITESPACE"," ",1403],"\/",["T_WHITESPACE"," ",1403],"(",["T_LNUMBER","60",1403],["T_WHITESPACE"," ",1403],"*",["T_WHITESPACE"," ",1403],["T_LNUMBER","60",1403],")",")",";",["T_WHITESPACE","\n        ",1403],["T_IF","if",1404],["T_WHITESPACE"," ",1404],"(",["T_VARIABLE","$hoursDifference",1404],["T_WHITESPACE"," ",1404],["T_IS_GREATER_OR_EQUAL",">=",1404],["T_WHITESPACE"," ",1404],["T_VARIABLE","$tokenExpirationPeriod",1404],")",["T_WHITESPACE"," ",1404],"{",["T_WHITESPACE","\n            ",1404],["T_RETURN","return",1405],["T_WHITESPACE"," ",1405],["T_STRING","true",1405],";",["T_WHITESPACE","\n        ",1405],"}",["T_WHITESPACE","\n\n        ",1406],["T_RETURN","return",1408],["T_WHITESPACE"," ",1408],["T_STRING","false",1408],";",["T_WHITESPACE","\n    ",1408],"}",["T_WHITESPACE","\n\n    ",1409],["T_DOC_COMMENT","\/**\n     * Clean password's validation data (password, password_confirmation)\n     *\n     * @return Mage_Customer_Model_Customer\n     *\/",1411],["T_WHITESPACE","\n    ",1415],["T_PUBLIC","public",1416],["T_WHITESPACE"," ",1416],["T_FUNCTION","function",1416],["T_WHITESPACE"," ",1416],["T_STRING","cleanPasswordsValidationData",1416],"(",")",["T_WHITESPACE","\n    ",1416],"{",["T_WHITESPACE","\n        ",1417],["T_VARIABLE","$this",1418],["T_OBJECT_OPERATOR","->",1418],["T_STRING","setData",1418],"(",["T_CONSTANT_ENCAPSED_STRING","'password'",1418],",",["T_WHITESPACE"," ",1418],["T_STRING","null",1418],")",";",["T_WHITESPACE","\n        ",1418],["T_VARIABLE","$this",1419],["T_OBJECT_OPERATOR","->",1419],["T_STRING","setData",1419],"(",["T_CONSTANT_ENCAPSED_STRING","'password_confirmation'",1419],",",["T_WHITESPACE"," ",1419],["T_STRING","null",1419],")",";",["T_WHITESPACE","\n        ",1419],["T_RETURN","return",1420],["T_WHITESPACE"," ",1420],["T_VARIABLE","$this",1420],";",["T_WHITESPACE","\n    ",1420],"}",["T_WHITESPACE","\n",1421],"}",["T_WHITESPACE","\n",1422]]
[["T_OPEN_TAG","<?php\n",1],["T_DOC_COMMENT","\/**\n * Magento\n *\n * NOTICE OF LICENSE\n *\n * This source file is subject to the Open Software License (OSL 3.0)\n * that is bundled with this package in the file LICENSE.txt.\n * It is also available through the world-wide-web at this URL:\n * http:\/\/opensource.org\/licenses\/osl-3.0.php\n * If you did not receive a copy of the license and are unable to\n * obtain it through the world-wide-web, please send an email\n * to license@magento.com so we can send you a copy immediately.\n *\n * DISCLAIMER\n *\n * Do not edit or add to this file if you wish to upgrade Magento to newer\n * versions in the future. If you wish to customize Magento for your\n * needs please refer to http:\/\/www.magento.com for more information.\n *\n * @category    Mage\n * @package     Mage_Customer\n * @copyright  Copyright (c) 2006-2016 X.commerce, Inc. and affiliates (http:\/\/www.magento.com)\n * @license    http:\/\/opensource.org\/licenses\/osl-3.0.php  Open Software License (OSL 3.0)\n *\/",2],["T_WHITESPACE","\n\n",25],["T_DOC_COMMENT","\/**\n * Customer address helper\n *\n * @author      Magento Core Team <core@magentocommerce.com>\n *\/",27],["T_WHITESPACE","\n",31],["T_CLASS","class",32],["T_WHITESPACE"," ",32],["T_STRING","Mage_Customer_Helper_Address",32],["T_WHITESPACE"," ",32],["T_EXTENDS","extends",32],["T_WHITESPACE"," ",32],["T_STRING","Mage_Core_Helper_Abstract",32],["T_WHITESPACE","\n",32],"{",["T_WHITESPACE","\n    ",33],["T_DOC_COMMENT","\/**\n     * VAT Validation parameters XML paths\n     *\/",34],["T_WHITESPACE","\n    ",36],["T_CONST","const",37],["T_WHITESPACE"," ",37],["T_STRING","XML_PATH_VIV_DISABLE_AUTO_ASSIGN_DEFAULT",37],["T_WHITESPACE"," ",37],"=",["T_WHITESPACE"," ",37],["T_CONSTANT_ENCAPSED_STRING","'customer\/create_account\/viv_disable_auto_group_assign_default'",37],";",["T_WHITESPACE","\n    ",37],["T_CONST","const",38],["T_WHITESPACE"," ",38],["T_STRING","XML_PATH_VIV_ON_EACH_TRANSACTION",38],["T_WHITESPACE","         ",38],"=",["T_WHITESPACE"," ",38],["T_CONSTANT_ENCAPSED_STRING","'customer\/create_account\/viv_on_each_transaction'",38],";",["T_WHITESPACE","\n    ",38],["T_CONST","const",39],["T_WHITESPACE"," ",39],["T_STRING","XML_PATH_VAT_VALIDATION_ENABLED",39],["T_WHITESPACE","          ",39],"=",["T_WHITESPACE"," ",39],["T_CONSTANT_ENCAPSED_STRING","'customer\/create_account\/auto_group_assign'",39],";",["T_WHITESPACE","\n    ",39],["T_CONST","const",40],["T_WHITESPACE"," ",40],["T_STRING","XML_PATH_VIV_TAX_CALCULATION_ADDRESS_TYPE",40],["T_WHITESPACE"," ",40],"=",["T_WHITESPACE"," ",40],["T_CONSTANT_ENCAPSED_STRING","'customer\/create_account\/tax_calculation_address_type'",40],";",["T_WHITESPACE","\n    ",40],["T_CONST","const",41],["T_WHITESPACE"," ",41],["T_STRING","XML_PATH_VAT_FRONTEND_VISIBILITY",41],["T_WHITESPACE"," ",41],"=",["T_WHITESPACE"," ",41],["T_CONSTANT_ENCAPSED_STRING","'customer\/create_account\/vat_frontend_visibility'",41],";",["T_WHITESPACE","\n\n    ",41],["T_DOC_COMMENT","\/**\n     * Array of Customer Address Attributes\n     *\n     * @var array\n     *\/",43],["T_WHITESPACE","\n    ",47],["T_PROTECTED","protected",48],["T_WHITESPACE"," ",48],["T_VARIABLE","$_attributes",48],";",["T_WHITESPACE","\n\n    ",48],["T_DOC_COMMENT","\/**\n     * Customer address config node per website\n     *\n     * @var array\n     *\/",50],["T_WHITESPACE","\n    ",54],["T_PROTECTED","protected",55],["T_WHITESPACE"," ",55],["T_VARIABLE","$_config",55],["T_WHITESPACE","          ",55],"=",["T_WHITESPACE"," ",55],["T_ARRAY","array",55],"(",")",";",["T_WHITESPACE","\n\n    ",55],["T_DOC_COMMENT","\/**\n     * Customer Number of Lines in a Street Address per website\n     *\n     * @var array\n     *\/",57],["T_WHITESPACE","\n    ",61],["T_PROTECTED","protected",62],["T_WHITESPACE"," ",62],["T_VARIABLE","$_streetLines",62],["T_WHITESPACE","     ",62],"=",["T_WHITESPACE"," ",62],["T_ARRAY","array",62],"(",")",";",["T_WHITESPACE","\n    ",62],["T_PROTECTED","protected",63],["T_WHITESPACE"," ",63],["T_VARIABLE","$_formatTemplate",63],["T_WHITESPACE","  ",63],"=",["T_WHITESPACE"," ",63],["T_ARRAY","array",63],"(",")",";",["T_WHITESPACE","\n\n    ",63],["T_DOC_COMMENT","\/**\n     * Addresses url\n     *\/",65],["T_WHITESPACE","\n    ",67],["T_PUBLIC","public",68],["T_WHITESPACE"," ",68],["T_FUNCTION","function",68],["T_WHITESPACE"," ",68],["T_STRING","getBookUrl",68],"(",")",["T_WHITESPACE","\n    ",68],"{",["T_WHITESPACE","\n\n    ",69],"}",["T_WHITESPACE","\n\n    ",71],["T_PUBLIC","public",73],["T_WHITESPACE"," ",73],["T_FUNCTION","function",73],["T_WHITESPACE"," ",73],["T_STRING","getEditUrl",73],"(",")",["T_WHITESPACE","\n    ",73],"{",["T_WHITESPACE","\n\n    ",74],"}",["T_WHITESPACE","\n\n    ",76],["T_PUBLIC","public",78],["T_WHITESPACE"," ",78],["T_FUNCTION","function",78],["T_WHITESPACE"," ",78],["T_STRING","getDeleteUrl",78],"(",")",["T_WHITESPACE","\n    ",78],"{",["T_WHITESPACE","\n\n    ",79],"}",["T_WHITESPACE","\n\n    ",81],["T_PUBLIC","public",83],["T_WHITESPACE"," ",83],["T_FUNCTION","function",83],["T_WHITESPACE"," ",83],["T_STRING","getCreateUrl",83],"(",")",["T_WHITESPACE","\n    ",83],"{",["T_WHITESPACE","\n\n    ",84],"}",["T_WHITESPACE","\n\n    ",86],["T_PUBLIC","public",88],["T_WHITESPACE"," ",88],["T_FUNCTION","function",88],["T_WHITESPACE"," ",88],["T_STRING","getRenderer",88],"(",["T_VARIABLE","$renderer",88],")",["T_WHITESPACE","\n    ",88],"{",["T_WHITESPACE","\n        ",89],["T_IF","if",90],"(",["T_STRING","is_string",90],"(",["T_VARIABLE","$renderer",90],")",["T_WHITESPACE"," ",90],["T_BOOLEAN_AND","&&",90],["T_WHITESPACE"," ",90],["T_VARIABLE","$className",90],["T_WHITESPACE"," ",90],"=",["T_WHITESPACE"," ",90],["T_STRING","Mage",90],["T_DOUBLE_COLON","::",90],["T_STRING","getConfig",90],"(",")",["T_OBJECT_OPERATOR","->",90],["T_STRING","getBlockClassName",90],"(",["T_VARIABLE","$renderer",90],")",")",["T_WHITESPACE"," ",90],"{",["T_WHITESPACE","\n            ",90],["T_RETURN","return",91],["T_WHITESPACE"," ",91],["T_NEW","new",91],["T_WHITESPACE"," ",91],["T_VARIABLE","$className",91],"(",")",";",["T_WHITESPACE","\n        ",91],"}",["T_WHITESPACE"," ",92],["T_ELSE","else",92],["T_WHITESPACE"," ",92],"{",["T_WHITESPACE","\n            ",92],["T_RETURN","return",93],["T_WHITESPACE"," ",93],["T_VARIABLE","$renderer",93],";",["T_WHITESPACE","\n        ",93],"}",["T_WHITESPACE","\n    ",94],"}",["T_WHITESPACE","\n\n    ",95],["T_DOC_COMMENT","\/**\n     * Return customer address config value by key and store\n     *\n     * @param string $key\n     * @param Mage_Core_Model_Store|int|string $store\n     * @return string|null\n     *\/",97],["T_WHITESPACE","\n    ",103],["T_PUBLIC","public",104],["T_WHITESPACE"," ",104],["T_FUNCTION","function",104],["T_WHITESPACE"," ",104],["T_STRING","getConfig",104],"(",["T_VARIABLE","$key",104],",",["T_WHITESPACE"," ",104],["T_VARIABLE","$store",104],["T_WHITESPACE"," ",104],"=",["T_WHITESPACE"," ",104],["T_STRING","null",104],")",["T_WHITESPACE","\n    ",104],"{",["T_WHITESPACE","\n        ",105],["T_VARIABLE","$websiteId",106],["T_WHITESPACE"," ",106],"=",["T_WHITESPACE"," ",106],["T_STRING","Mage",106],["T_DOUBLE_COLON","::",106],["T_STRING","app",106],"(",")",["T_OBJECT_OPERATOR","->",106],["T_STRING","getStore",106],"(",["T_VARIABLE","$store",106],")",["T_OBJECT_OPERATOR","->",106],["T_STRING","getWebsiteId",106],"(",")",";",["T_WHITESPACE","\n\n        ",106],["T_IF","if",108],["T_WHITESPACE"," ",108],"(","!",["T_ISSET","isset",108],"(",["T_VARIABLE","$this",108],["T_OBJECT_OPERATOR","->",108],["T_STRING","_config",108],"[",["T_VARIABLE","$websiteId",108],"]",")",")",["T_WHITESPACE"," ",108],"{",["T_WHITESPACE","\n            ",108],["T_VARIABLE","$this",109],["T_OBJECT_OPERATOR","->",109],["T_STRING","_config",109],"[",["T_VARIABLE","$websiteId",109],"]",["T_WHITESPACE"," ",109],"=",["T_WHITESPACE"," ",109],["T_STRING","Mage",109],["T_DOUBLE_COLON","::",109],["T_STRING","getStoreConfig",109],"(",["T_CONSTANT_ENCAPSED_STRING","'customer\/address'",109],",",["T_WHITESPACE"," ",109],["T_VARIABLE","$store",109],")",";",["T_WHITESPACE","\n        ",109],"}",["T_WHITESPACE","\n        ",110],["T_RETURN","return",111],["T_WHITESPACE"," ",111],["T_ISSET","isset",111],"(",["T_VARIABLE","$this",111],["T_OBJECT_OPERATOR","->",111],["T_STRING","_config",111],"[",["T_VARIABLE","$websiteId",111],"]","[",["T_VARIABLE","$key",111],"]",")",["T_WHITESPACE"," ",111],"?",["T_WHITESPACE"," ",111],["T_STRING_CAST","(string)",111],["T_VARIABLE","$this",111],["T_OBJECT_OPERATOR","->",111],["T_STRING","_config",111],"[",["T_VARIABLE","$websiteId",111],"]","[",["T_VARIABLE","$key",111],"]",["T_WHITESPACE"," ",111],":",["T_WHITESPACE"," ",111],["T_STRING","null",111],";",["T_WHITESPACE","\n    ",111],"}",["T_WHITESPACE","\n\n    ",112],["T_DOC_COMMENT","\/**\n     * Return Number of Lines in a Street Address for store\n     *\n     * @param Mage_Core_Model_Store|int|string $store\n     * @return int\n     *\/",114],["T_WHITESPACE","\n    ",119],["T_PUBLIC","public",120],["T_WHITESPACE"," ",120],["T_FUNCTION","function",120],["T_WHITESPACE"," ",120],["T_STRING","getStreetLines",120],"(",["T_VARIABLE","$store",120],["T_WHITESPACE"," ",120],"=",["T_WHITESPACE"," ",120],["T_STRING","null",120],")",["T_WHITESPACE","\n    ",120],"{",["T_WHITESPACE","\n        ",121],["T_VARIABLE","$websiteId",122],["T_WHITESPACE"," ",122],"=",["T_WHITESPACE"," ",122],["T_STRING","Mage",122],["T_DOUBLE_COLON","::",122],["T_STRING","app",122],"(",")",["T_OBJECT_OPERATOR","->",122],["T_STRING","getStore",122],"(",["T_VARIABLE","$store",122],")",["T_OBJECT_OPERATOR","->",122],["T_STRING","getWebsiteId",122],"(",")",";",["T_WHITESPACE","\n        ",122],["T_IF","if",123],["T_WHITESPACE"," ",123],"(","!",["T_ISSET","isset",123],"(",["T_VARIABLE","$this",123],["T_OBJECT_OPERATOR","->",123],["T_STRING","_streetLines",123],"[",["T_VARIABLE","$websiteId",123],"]",")",")",["T_WHITESPACE"," ",123],"{",["T_WHITESPACE","\n            ",123],["T_VARIABLE","$attribute",124],["T_WHITESPACE"," ",124],"=",["T_WHITESPACE"," ",124],["T_STRING","Mage",124],["T_DOUBLE_COLON","::",124],["T_STRING","getSingleton",124],"(",["T_CONSTANT_ENCAPSED_STRING","'eav\/config'",124],")",["T_OBJECT_OPERATOR","->",124],["T_STRING","getAttribute",124],"(",["T_CONSTANT_ENCAPSED_STRING","'customer_address'",124],",",["T_WHITESPACE"," ",124],["T_CONSTANT_ENCAPSED_STRING","'street'",124],")",";",["T_WHITESPACE","\n            ",124],["T_VARIABLE","$lines",125],["T_WHITESPACE"," ",125],"=",["T_WHITESPACE"," ",125],["T_INT_CAST","(int)",125],["T_VARIABLE","$attribute",125],["T_OBJECT_OPERATOR","->",125],["T_STRING","getMultilineCount",125],"(",")",";",["T_WHITESPACE","\n            ",125],["T_IF","if",126],"(",["T_VARIABLE","$lines",126],["T_WHITESPACE"," ",126],["T_IS_SMALLER_OR_EQUAL","<=",126],["T_WHITESPACE"," ",126],["T_LNUMBER","0",126],")",["T_WHITESPACE"," ",126],"{",["T_WHITESPACE","\n                ",126],["T_VARIABLE","$lines",127],["T_WHITESPACE"," ",127],"=",["T_WHITESPACE"," ",127],["T_LNUMBER","2",127],";",["T_WHITESPACE","\n            ",127],"}",["T_WHITESPACE","\n            ",128],["T_VARIABLE","$this",129],["T_OBJECT_OPERATOR","->",129],["T_STRING","_streetLines",129],"[",["T_VARIABLE","$websiteId",129],"]",["T_WHITESPACE"," ",129],"=",["T_WHITESPACE"," ",129],["T_STRING","min",129],"(",["T_LNUMBER","20",129],",",["T_WHITESPACE"," ",129],["T_VARIABLE","$lines",129],")",";",["T_WHITESPACE","\n        ",129],"}",["T_WHITESPACE","\n\n        ",130],["T_RETURN","return",132],["T_WHITESPACE"," ",132],["T_VARIABLE","$this",132],["T_OBJECT_OPERATOR","->",132],["T_STRING","_streetLines",132],"[",["T_VARIABLE","$websiteId",132],"]",";",["T_WHITESPACE","\n    ",132],"}",["T_WHITESPACE","\n\n    ",133],["T_PUBLIC","public",135],["T_WHITESPACE"," ",135],["T_FUNCTION","function",135],["T_WHITESPACE"," ",135],["T_STRING","getFormat",135],"(",["T_VARIABLE","$code",135],")",["T_WHITESPACE","\n    ",135],"{",["T_WHITESPACE","\n        ",136],["T_VARIABLE","$format",137],["T_WHITESPACE"," ",137],"=",["T_WHITESPACE"," ",137],["T_STRING","Mage",137],["T_DOUBLE_COLON","::",137],["T_STRING","getSingleton",137],"(",["T_CONSTANT_ENCAPSED_STRING","'customer\/address_config'",137],")",["T_OBJECT_OPERATOR","->",137],["T_STRING","getFormatByCode",137],"(",["T_VARIABLE","$code",137],")",";",["T_WHITESPACE","\n        ",137],["T_RETURN","return",138],["T_WHITESPACE"," ",138],["T_VARIABLE","$format",138],["T_OBJECT_OPERATOR","->",138],["T_STRING","getRenderer",138],"(",")",["T_WHITESPACE"," ",138],"?",["T_WHITESPACE"," ",138],["T_VARIABLE","$format",138],["T_OBJECT_OPERATOR","->",138],["T_STRING","getRenderer",138],"(",")",["T_OBJECT_OPERATOR","->",138],["T_STRING","getFormat",138],"(",")",["T_WHITESPACE"," ",138],":",["T_WHITESPACE"," ",138],["T_CONSTANT_ENCAPSED_STRING","''",138],";",["T_WHITESPACE","\n    ",138],"}",["T_WHITESPACE","\n\n    ",139],["T_DOC_COMMENT","\/**\n     * Determine if specified address config value can be shown\n     *\n     * @param string $key\n     * @return bool\n     *\/",141],["T_WHITESPACE","\n    ",146],["T_PUBLIC","public",147],["T_WHITESPACE"," ",147],["T_FUNCTION","function",147],["T_WHITESPACE"," ",147],["T_STRING","canShowConfig",147],"(",["T_VARIABLE","$key",147],")",["T_WHITESPACE","\n    ",147],"{",["T_WHITESPACE","\n        ",148],["T_RETURN","return",149],["T_WHITESPACE"," ",149],["T_BOOL_CAST","(bool)",149],["T_VARIABLE","$this",149],["T_OBJECT_OPERATOR","->",149],["T_STRING","getConfig",149],"(",["T_VARIABLE","$key",149],")",";",["T_WHITESPACE","\n    ",149],"}",["T_WHITESPACE","\n\n    ",150],["T_DOC_COMMENT","\/**\n     * Return array of Customer Address Attributes\n     *\n     * @return array\n     *\/",152],["T_WHITESPACE","\n    ",156],["T_PUBLIC","public",157],["T_WHITESPACE"," ",157],["T_FUNCTION","function",157],["T_WHITESPACE"," ",157],["T_STRING","getAttributes",157],"(",")",["T_WHITESPACE","\n    ",157],"{",["T_WHITESPACE","\n        ",158],["T_IF","if",159],["T_WHITESPACE"," ",159],"(",["T_STRING","is_null",159],"(",["T_VARIABLE","$this",159],["T_OBJECT_OPERATOR","->",159],["T_STRING","_attributes",159],")",")",["T_WHITESPACE"," ",159],"{",["T_WHITESPACE","\n            ",159],["T_VARIABLE","$this",160],["T_OBJECT_OPERATOR","->",160],["T_STRING","_attributes",160],["T_WHITESPACE"," ",160],"=",["T_WHITESPACE"," ",160],["T_ARRAY","array",160],"(",")",";",["T_WHITESPACE","\n            ",160],["T_COMMENT","\/* @var $config Mage_Eav_Model_Config *\/",161],["T_WHITESPACE","\n            ",161],["T_VARIABLE","$config",162],["T_WHITESPACE"," ",162],"=",["T_WHITESPACE"," ",162],["T_STRING","Mage",162],["T_DOUBLE_COLON","::",162],["T_STRING","getSingleton",162],"(",["T_CONSTANT_ENCAPSED_STRING","'eav\/config'",162],")",";",["T_WHITESPACE","\n            ",162],["T_FOREACH","foreach",163],["T_WHITESPACE"," ",163],"(",["T_VARIABLE","$config",163],["T_OBJECT_OPERATOR","->",163],["T_STRING","getEntityAttributeCodes",163],"(",["T_CONSTANT_ENCAPSED_STRING","'customer_address'",163],")",["T_WHITESPACE"," ",163],["T_AS","as",163],["T_WHITESPACE"," ",163],["T_VARIABLE","$attributeCode",163],")",["T_WHITESPACE"," ",163],"{",["T_WHITESPACE","\n                ",163],["T_VARIABLE","$this",164],["T_OBJECT_OPERATOR","->",164],["T_STRING","_attributes",164],"[",["T_VARIABLE","$attributeCode",164],"]",["T_WHITESPACE"," ",164],"=",["T_WHITESPACE"," ",164],["T_VARIABLE","$config",164],["T_OBJECT_OPERATOR","->",164],["T_STRING","getAttribute",164],"(",["T_CONSTANT_ENCAPSED_STRING","'customer_address'",164],",",["T_WHITESPACE"," ",164],["T_VARIABLE","$attributeCode",164],")",";",["T_WHITESPACE","\n            ",164],"}",["T_WHITESPACE","\n        ",165],"}",["T_WHITESPACE","\n        ",166],["T_RETURN","return",167],["T_WHITESPACE"," ",167],["T_VARIABLE","$this",167],["T_OBJECT_OPERATOR","->",167],["T_STRING","_attributes",167],";",["T_WHITESPACE","\n    ",167],"}",["T_WHITESPACE","\n\n    ",168],["T_DOC_COMMENT","\/**\n     * Get string with frontend validation classes for attribute\n     *\n     * @param string $attributeCode\n     * @return string\n     *\/",170],["T_WHITESPACE","\n    ",175],["T_PUBLIC","public",176],["T_WHITESPACE"," ",176],["T_FUNCTION","function",176],["T_WHITESPACE"," ",176],["T_STRING","getAttributeValidationClass",176],"(",["T_VARIABLE","$attributeCode",176],")",["T_WHITESPACE","\n    ",176],"{",["T_WHITESPACE","\n        ",177],["T_DOC_COMMENT","\/** @var $attribute Mage_Customer_Model_Attribute *\/",178],["T_WHITESPACE","\n        ",178],["T_VARIABLE","$attribute",179],["T_WHITESPACE"," ",179],"=",["T_WHITESPACE"," ",179],["T_ISSET","isset",179],"(",["T_VARIABLE","$this",179],["T_OBJECT_OPERATOR","->",179],["T_STRING","_attributes",179],"[",["T_VARIABLE","$attributeCode",179],"]",")",["T_WHITESPACE"," ",179],"?",["T_WHITESPACE"," ",179],["T_VARIABLE","$this",179],["T_OBJECT_OPERATOR","->",179],["T_STRING","_attributes",179],"[",["T_VARIABLE","$attributeCode",179],"]",["T_WHITESPACE","\n            ",179],":",["T_WHITESPACE"," ",180],["T_STRING","Mage",180],["T_DOUBLE_COLON","::",180],["T_STRING","getSingleton",180],"(",["T_CONSTANT_ENCAPSED_STRING","'eav\/config'",180],")",["T_OBJECT_OPERATOR","->",180],["T_STRING","getAttribute",180],"(",["T_CONSTANT_ENCAPSED_STRING","'customer_address'",180],",",["T_WHITESPACE"," ",180],["T_VARIABLE","$attributeCode",180],")",";",["T_WHITESPACE","\n        ",180],["T_VARIABLE","$class",181],["T_WHITESPACE"," ",181],"=",["T_WHITESPACE"," ",181],["T_VARIABLE","$attribute",181],["T_WHITESPACE"," ",181],"?",["T_WHITESPACE"," ",181],["T_VARIABLE","$attribute",181],["T_OBJECT_OPERATOR","->",181],["T_STRING","getFrontend",181],"(",")",["T_OBJECT_OPERATOR","->",181],["T_STRING","getClass",181],"(",")",["T_WHITESPACE"," ",181],":",["T_WHITESPACE"," ",181],["T_CONSTANT_ENCAPSED_STRING","''",181],";",["T_WHITESPACE","\n\n        ",181],["T_IF","if",183],["T_WHITESPACE"," ",183],"(",["T_STRING","in_array",183],"(",["T_VARIABLE","$attributeCode",183],",",["T_WHITESPACE"," ",183],["T_ARRAY","array",183],"(",["T_CONSTANT_ENCAPSED_STRING","'firstname'",183],",",["T_WHITESPACE"," ",183],["T_CONSTANT_ENCAPSED_STRING","'middlename'",183],",",["T_WHITESPACE"," ",183],["T_CONSTANT_ENCAPSED_STRING","'lastname'",183],",",["T_WHITESPACE"," ",183],["T_CONSTANT_ENCAPSED_STRING","'prefix'",183],",",["T_WHITESPACE"," ",183],["T_CONSTANT_ENCAPSED_STRING","'suffix'",183],",",["T_WHITESPACE"," ",183],["T_CONSTANT_ENCAPSED_STRING","'taxvat'",183],")",")",")",["T_WHITESPACE"," ",183],"{",["T_WHITESPACE","\n            ",183],["T_IF","if",184],["T_WHITESPACE"," ",184],"(",["T_VARIABLE","$class",184],["T_WHITESPACE"," ",184],["T_BOOLEAN_AND","&&",184],["T_WHITESPACE"," ",184],"!",["T_VARIABLE","$attribute",184],["T_OBJECT_OPERATOR","->",184],["T_STRING","getIsVisible",184],"(",")",")",["T_WHITESPACE"," ",184],"{",["T_WHITESPACE","\n                ",184],["T_VARIABLE","$class",185],["T_WHITESPACE"," ",185],"=",["T_WHITESPACE"," ",185],["T_CONSTANT_ENCAPSED_STRING","''",185],";",["T_WHITESPACE"," ",185],["T_COMMENT","\/\/ address attribute is not visible thus its validation rules are not applied\n",185],["T_WHITESPACE","            ",186],"}",["T_WHITESPACE","\n\n            ",186],["T_DOC_COMMENT","\/** @var $customerAttribute Mage_Customer_Model_Attribute *\/",188],["T_WHITESPACE","\n            ",188],["T_VARIABLE","$customerAttribute",189],["T_WHITESPACE"," ",189],"=",["T_WHITESPACE"," ",189],["T_STRING","Mage",189],["T_DOUBLE_COLON","::",189],["T_STRING","getSingleton",189],"(",["T_CONSTANT_ENCAPSED_STRING","'eav\/config'",189],")",["T_OBJECT_OPERATOR","->",189],["T_STRING","getAttribute",189],"(",["T_CONSTANT_ENCAPSED_STRING","'customer'",189],",",["T_WHITESPACE"," ",189],["T_VARIABLE","$attributeCode",189],")",";",["T_WHITESPACE","\n            ",189],["T_VARIABLE","$class",190],["T_WHITESPACE"," ",190],["T_CONCAT_EQUAL",".=",190],["T_WHITESPACE"," ",190],["T_VARIABLE","$customerAttribute",190],["T_WHITESPACE"," ",190],["T_BOOLEAN_AND","&&",190],["T_WHITESPACE"," ",190],["T_VARIABLE","$customerAttribute",190],["T_OBJECT_OPERATOR","->",190],["T_STRING","getIsVisible",190],"(",")",["T_WHITESPACE","\n                ",190],"?",["T_WHITESPACE"," ",191],["T_VARIABLE","$customerAttribute",191],["T_OBJECT_OPERATOR","->",191],["T_STRING","getFrontend",191],"(",")",["T_OBJECT_OPERATOR","->",191],["T_STRING","getClass",191],"(",")",["T_WHITESPACE"," ",191],":",["T_WHITESPACE"," ",191],["T_CONSTANT_ENCAPSED_STRING","''",191],";",["T_WHITESPACE","\n            ",191],["T_VARIABLE","$class",192],["T_WHITESPACE"," ",192],"=",["T_WHITESPACE"," ",192],["T_STRING","implode",192],"(",["T_CONSTANT_ENCAPSED_STRING","' '",192],",",["T_WHITESPACE"," ",192],["T_STRING","array_unique",192],"(",["T_STRING","array_filter",192],"(",["T_STRING","explode",192],"(",["T_CONSTANT_ENCAPSED_STRING","' '",192],",",["T_WHITESPACE"," ",192],["T_VARIABLE","$class",192],")",")",")",")",";",["T_WHITESPACE","\n        ",192],"}",["T_WHITESPACE","\n\n        ",193],["T_RETURN","return",195],["T_WHITESPACE"," ",195],["T_VARIABLE","$class",195],";",["T_WHITESPACE","\n    ",195],"}",["T_WHITESPACE","\n\n    ",196],["T_DOC_COMMENT","\/**\n     * Convert streets array to new street lines count\n     * Examples of use:\n     *  $origStreets = array('street1', 'street2', 'street3', 'street4')\n     *  $toCount = 3\n     *  Result:\n     *   array('street1 street2', 'street3', 'street4')\n     *  $toCount = 2\n     *  Result:\n     *   array('street1 street2', 'street3 street4')\n     *\n     * @param array $origStreets\n     * @param int   $toCount\n     * @return array\n     *\/",198],["T_WHITESPACE","\n    ",212],["T_PUBLIC","public",213],["T_WHITESPACE"," ",213],["T_FUNCTION","function",213],["T_WHITESPACE"," ",213],["T_STRING","convertStreetLines",213],"(",["T_VARIABLE","$origStreets",213],",",["T_WHITESPACE"," ",213],["T_VARIABLE","$toCount",213],")",["T_WHITESPACE","\n    ",213],"{",["T_WHITESPACE","\n        ",214],["T_VARIABLE","$lines",215],["T_WHITESPACE"," ",215],"=",["T_WHITESPACE"," ",215],["T_ARRAY","array",215],"(",")",";",["T_WHITESPACE","\n        ",215],["T_IF","if",216],["T_WHITESPACE"," ",216],"(","!",["T_EMPTY","empty",216],"(",["T_VARIABLE","$origStreets",216],")",["T_WHITESPACE"," ",216],["T_BOOLEAN_AND","&&",216],["T_WHITESPACE"," ",216],["T_VARIABLE","$toCount",216],["T_WHITESPACE"," ",216],">",["T_WHITESPACE"," ",216],["T_LNUMBER","0",216],")",["T_WHITESPACE"," ",216],"{",["T_WHITESPACE","\n            ",216],["T_VARIABLE","$countArgs",217],["T_WHITESPACE"," ",217],"=",["T_WHITESPACE"," ",217],["T_INT_CAST","(int)",217],["T_STRING","floor",217],"(",["T_STRING","count",217],"(",["T_VARIABLE","$origStreets",217],")","\/",["T_VARIABLE","$toCount",217],")",";",["T_WHITESPACE","\n            ",217],["T_VARIABLE","$modulo",218],["T_WHITESPACE"," ",218],"=",["T_WHITESPACE"," ",218],["T_STRING","count",218],"(",["T_VARIABLE","$origStreets",218],")",["T_WHITESPACE"," ",218],"%",["T_WHITESPACE"," ",218],["T_VARIABLE","$toCount",218],";",["T_WHITESPACE","\n            ",218],["T_VARIABLE","$offset",219],["T_WHITESPACE"," ",219],"=",["T_WHITESPACE"," ",219],["T_LNUMBER","0",219],";",["T_WHITESPACE","\n            ",219],["T_VARIABLE","$neededLinesCount",220],["T_WHITESPACE"," ",220],"=",["T_WHITESPACE"," ",220],["T_LNUMBER","0",220],";",["T_WHITESPACE","\n            ",220],["T_FOR","for",221],["T_WHITESPACE"," ",221],"(",["T_VARIABLE","$i",221],["T_WHITESPACE"," ",221],"=",["T_WHITESPACE"," ",221],["T_LNUMBER","0",221],";",["T_WHITESPACE"," ",221],["T_VARIABLE","$i",221],["T_WHITESPACE"," ",221],"<",["T_WHITESPACE"," ",221],["T_VARIABLE","$toCount",221],";",["T_WHITESPACE"," ",221],["T_VARIABLE","$i",221],["T_INC","++",221],")",["T_WHITESPACE"," ",221],"{",["T_WHITESPACE","\n                ",221],["T_VARIABLE","$offset",222],["T_WHITESPACE"," ",222],["T_PLUS_EQUAL","+=",222],["T_WHITESPACE"," ",222],["T_VARIABLE","$neededLinesCount",222],";",["T_WHITESPACE","\n                ",222],["T_VARIABLE","$neededLinesCount",223],["T_WHITESPACE"," ",223],"=",["T_WHITESPACE"," ",223],["T_VARIABLE","$countArgs",223],";",["T_WHITESPACE","\n                ",223],["T_IF","if",224],["T_WHITESPACE"," ",224],"(",["T_VARIABLE","$modulo",224],["T_WHITESPACE"," ",224],">",["T_WHITESPACE"," ",224],["T_LNUMBER","0",224],")",["T_WHITESPACE"," ",224],"{",["T_WHITESPACE","\n                    ",224],["T_INC","++",225],["T_VARIABLE","$neededLinesCount",225],";",["T_WHITESPACE","\n                    ",225],["T_DEC","--",226],["T_VARIABLE","$modulo",226],";",["T_WHITESPACE","\n                ",226],"}",["T_WHITESPACE","\n                ",227],["T_VARIABLE","$values",228],["T_WHITESPACE"," ",228],"=",["T_WHITESPACE"," ",228],["T_STRING","array_slice",228],"(",["T_VARIABLE","$origStreets",228],",",["T_WHITESPACE"," ",228],["T_VARIABLE","$offset",228],",",["T_WHITESPACE"," ",228],["T_VARIABLE","$neededLinesCount",228],")",";",["T_WHITESPACE","\n                ",228],["T_IF","if",229],["T_WHITESPACE"," ",229],"(",["T_STRING","is_array",229],"(",["T_VARIABLE","$values",229],")",")",["T_WHITESPACE"," ",229],"{",["T_WHITESPACE","\n                    ",229],["T_VARIABLE","$lines",230],"[","]",["T_WHITESPACE"," ",230],"=",["T_WHITESPACE"," ",230],["T_STRING","implode",230],"(",["T_CONSTANT_ENCAPSED_STRING","' '",230],",",["T_WHITESPACE"," ",230],["T_VARIABLE","$values",230],")",";",["T_WHITESPACE","\n                ",230],"}",["T_WHITESPACE","\n            ",231],"}",["T_WHITESPACE","\n        ",232],"}",["T_WHITESPACE","\n\n        ",233],["T_RETURN","return",235],["T_WHITESPACE"," ",235],["T_VARIABLE","$lines",235],";",["T_WHITESPACE","\n    ",235],"}",["T_WHITESPACE","\n\n    ",236],["T_DOC_COMMENT","\/**\n     * Check whether VAT ID validation is enabled\n     *\n     * @param Mage_Core_Model_Store|string|int $store\n     * @return bool\n     *\/",238],["T_WHITESPACE","\n    ",243],["T_PUBLIC","public",244],["T_WHITESPACE"," ",244],["T_FUNCTION","function",244],["T_WHITESPACE"," ",244],["T_STRING","isVatValidationEnabled",244],"(",["T_VARIABLE","$store",244],["T_WHITESPACE"," ",244],"=",["T_WHITESPACE"," ",244],["T_STRING","null",244],")",["T_WHITESPACE","\n    ",244],"{",["T_WHITESPACE","\n        ",245],["T_RETURN","return",246],["T_WHITESPACE"," ",246],["T_BOOL_CAST","(bool)",246],["T_STRING","Mage",246],["T_DOUBLE_COLON","::",246],["T_STRING","getStoreConfig",246],"(",["T_STRING","self",246],["T_DOUBLE_COLON","::",246],["T_STRING","XML_PATH_VAT_VALIDATION_ENABLED",246],",",["T_WHITESPACE"," ",246],["T_VARIABLE","$store",246],")",";",["T_WHITESPACE","\n    ",246],"}",["T_WHITESPACE","\n\n    ",247],["T_DOC_COMMENT","\/**\n     * Retrieve disable auto group assign default value\n     *\n     * @return bool\n     *\/",249],["T_WHITESPACE","\n    ",253],["T_PUBLIC","public",254],["T_WHITESPACE"," ",254],["T_FUNCTION","function",254],["T_WHITESPACE"," ",254],["T_STRING","getDisableAutoGroupAssignDefaultValue",254],"(",")",["T_WHITESPACE","\n    ",254],"{",["T_WHITESPACE","\n        ",255],["T_RETURN","return",256],["T_WHITESPACE"," ",256],["T_BOOL_CAST","(bool)",256],["T_STRING","Mage",256],["T_DOUBLE_COLON","::",256],["T_STRING","getStoreConfig",256],"(",["T_STRING","self",256],["T_DOUBLE_COLON","::",256],["T_STRING","XML_PATH_VIV_DISABLE_AUTO_ASSIGN_DEFAULT",256],")",";",["T_WHITESPACE","\n    ",256],"}",["T_WHITESPACE","\n\n    ",257],["T_DOC_COMMENT","\/**\n     * Retrieve 'validate on each transaction' value\n     *\n     * @param Mage_Core_Model_Store|string|int $store\n     * @return bool\n     *\/",259],["T_WHITESPACE","\n    ",264],["T_PUBLIC","public",265],["T_WHITESPACE"," ",265],["T_FUNCTION","function",265],["T_WHITESPACE"," ",265],["T_STRING","getValidateOnEachTransaction",265],"(",["T_VARIABLE","$store",265],["T_WHITESPACE"," ",265],"=",["T_WHITESPACE"," ",265],["T_STRING","null",265],")",["T_WHITESPACE","\n    ",265],"{",["T_WHITESPACE","\n        ",266],["T_RETURN","return",267],["T_WHITESPACE"," ",267],["T_BOOL_CAST","(bool)",267],["T_STRING","Mage",267],["T_DOUBLE_COLON","::",267],["T_STRING","getStoreConfig",267],"(",["T_STRING","self",267],["T_DOUBLE_COLON","::",267],["T_STRING","XML_PATH_VIV_ON_EACH_TRANSACTION",267],",",["T_WHITESPACE"," ",267],["T_VARIABLE","$store",267],")",";",["T_WHITESPACE","\n    ",267],"}",["T_WHITESPACE","\n\n    ",268],["T_DOC_COMMENT","\/**\n     * Retrieve customer address type on which tax calculation must be based\n     *\n     * @param Mage_Core_Model_Store|string|int|null $store\n     * @return string\n     *\/",270],["T_WHITESPACE","\n    ",275],["T_PUBLIC","public",276],["T_WHITESPACE"," ",276],["T_FUNCTION","function",276],["T_WHITESPACE"," ",276],["T_STRING","getTaxCalculationAddressType",276],"(",["T_VARIABLE","$store",276],["T_WHITESPACE"," ",276],"=",["T_WHITESPACE"," ",276],["T_STRING","null",276],")",["T_WHITESPACE","\n    ",276],"{",["T_WHITESPACE","\n        ",277],["T_RETURN","return",278],["T_WHITESPACE"," ",278],["T_STRING_CAST","(string)",278],["T_STRING","Mage",278],["T_DOUBLE_COLON","::",278],["T_STRING","getStoreConfig",278],"(",["T_STRING","self",278],["T_DOUBLE_COLON","::",278],["T_STRING","XML_PATH_VIV_TAX_CALCULATION_ADDRESS_TYPE",278],",",["T_WHITESPACE"," ",278],["T_VARIABLE","$store",278],")",";",["T_WHITESPACE","\n    ",278],"}",["T_WHITESPACE","\n\n    ",279],["T_DOC_COMMENT","\/**\n     * Check if VAT ID address attribute has to be shown on frontend (on Customer Address management forms)\n     *\n     * @return boolean\n     *\/",281],["T_WHITESPACE","\n    ",285],["T_PUBLIC","public",286],["T_WHITESPACE"," ",286],["T_FUNCTION","function",286],["T_WHITESPACE"," ",286],["T_STRING","isVatAttributeVisible",286],"(",")",["T_WHITESPACE","\n    ",286],"{",["T_WHITESPACE","\n        ",287],["T_RETURN","return",288],["T_WHITESPACE"," ",288],["T_BOOL_CAST","(bool)",288],["T_STRING","Mage",288],["T_DOUBLE_COLON","::",288],["T_STRING","getStoreConfig",288],"(",["T_STRING","self",288],["T_DOUBLE_COLON","::",288],["T_STRING","XML_PATH_VAT_FRONTEND_VISIBILITY",288],")",";",["T_WHITESPACE","\n    ",288],"}",["T_WHITESPACE","\n",289],"}",["T_WHITESPACE","\n",290]]
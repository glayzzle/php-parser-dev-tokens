[["T_OPEN_TAG","<?php\n",1],["T_DOC_COMMENT","\/**\n * Magento\n *\n * NOTICE OF LICENSE\n *\n * This source file is subject to the Open Software License (OSL 3.0)\n * that is bundled with this package in the file LICENSE.txt.\n * It is also available through the world-wide-web at this URL:\n * http:\/\/opensource.org\/licenses\/osl-3.0.php\n * If you did not receive a copy of the license and are unable to\n * obtain it through the world-wide-web, please send an email\n * to license@magento.com so we can send you a copy immediately.\n *\n * DISCLAIMER\n *\n * Do not edit or add to this file if you wish to upgrade Magento to newer\n * versions in the future. If you wish to customize Magento for your\n * needs please refer to http:\/\/www.magento.com for more information.\n *\n * @category    Mage\n * @package     Mage_Customer\n * @copyright  Copyright (c) 2006-2016 X.commerce, Inc. and affiliates (http:\/\/www.magento.com)\n * @license    http:\/\/opensource.org\/licenses\/osl-3.0.php  Open Software License (OSL 3.0)\n *\/",2],["T_WHITESPACE","\n\n",25],["T_DOC_COMMENT","\/**\n * API2 class for customer address rest\n *\n * @category   Mage\n * @package    Mage_Customer\n * @author     Magento Core Team <core@magentocommerce.com>\n *\/",27],["T_WHITESPACE","\n",33],["T_ABSTRACT","abstract",34],["T_WHITESPACE"," ",34],["T_CLASS","class",34],["T_WHITESPACE"," ",34],["T_STRING","Mage_Customer_Model_Api2_Customer_Address_Rest",34],["T_WHITESPACE"," ",34],["T_EXTENDS","extends",34],["T_WHITESPACE"," ",34],["T_STRING","Mage_Customer_Model_Api2_Customer_Address",34],["T_WHITESPACE","\n",34],"{",["T_WHITESPACE","\n    ",35],["T_DOC_COMMENT","\/**\n     * Create customer address\n     *\n     * @param array $data\n     * @throws Mage_Api2_Exception\n     * @return string\n     *\/",36],["T_WHITESPACE","\n    ",42],["T_PROTECTED","protected",43],["T_WHITESPACE"," ",43],["T_FUNCTION","function",43],["T_WHITESPACE"," ",43],["T_STRING","_create",43],"(",["T_ARRAY","array",43],["T_WHITESPACE"," ",43],["T_VARIABLE","$data",43],")",["T_WHITESPACE","\n    ",43],"{",["T_WHITESPACE","\n        ",44],["T_COMMENT","\/* @var $customer Mage_Customer_Model_Customer *\/",45],["T_WHITESPACE","\n        ",45],["T_VARIABLE","$customer",46],["T_WHITESPACE"," ",46],"=",["T_WHITESPACE"," ",46],["T_VARIABLE","$this",46],["T_OBJECT_OPERATOR","->",46],["T_STRING","_loadCustomerById",46],"(",["T_VARIABLE","$this",46],["T_OBJECT_OPERATOR","->",46],["T_STRING","getRequest",46],"(",")",["T_OBJECT_OPERATOR","->",46],["T_STRING","getParam",46],"(",["T_CONSTANT_ENCAPSED_STRING","'customer_id'",46],")",")",";",["T_WHITESPACE","\n        ",46],["T_VARIABLE","$validator",47],["T_WHITESPACE"," ",47],"=",["T_WHITESPACE"," ",47],["T_VARIABLE","$this",47],["T_OBJECT_OPERATOR","->",47],["T_STRING","_getValidator",47],"(",")",";",["T_WHITESPACE","\n\n        ",47],["T_VARIABLE","$data",49],["T_WHITESPACE"," ",49],"=",["T_WHITESPACE"," ",49],["T_VARIABLE","$validator",49],["T_OBJECT_OPERATOR","->",49],["T_STRING","filter",49],"(",["T_VARIABLE","$data",49],")",";",["T_WHITESPACE","\n        ",49],["T_IF","if",50],["T_WHITESPACE"," ",50],"(","!",["T_VARIABLE","$validator",50],["T_OBJECT_OPERATOR","->",50],["T_STRING","isValidData",50],"(",["T_VARIABLE","$data",50],")",["T_WHITESPACE"," ",50],["T_BOOLEAN_OR","||",50],["T_WHITESPACE"," ",50],"!",["T_VARIABLE","$validator",50],["T_OBJECT_OPERATOR","->",50],["T_STRING","isValidDataForCreateAssociationWithCountry",50],"(",["T_VARIABLE","$data",50],")",")",["T_WHITESPACE"," ",50],"{",["T_WHITESPACE","\n            ",50],["T_FOREACH","foreach",51],["T_WHITESPACE"," ",51],"(",["T_VARIABLE","$validator",51],["T_OBJECT_OPERATOR","->",51],["T_STRING","getErrors",51],"(",")",["T_WHITESPACE"," ",51],["T_AS","as",51],["T_WHITESPACE"," ",51],["T_VARIABLE","$error",51],")",["T_WHITESPACE"," ",51],"{",["T_WHITESPACE","\n                ",51],["T_VARIABLE","$this",52],["T_OBJECT_OPERATOR","->",52],["T_STRING","_error",52],"(",["T_VARIABLE","$error",52],",",["T_WHITESPACE"," ",52],["T_STRING","Mage_Api2_Model_Server",52],["T_DOUBLE_COLON","::",52],["T_STRING","HTTP_BAD_REQUEST",52],")",";",["T_WHITESPACE","\n            ",52],"}",["T_WHITESPACE","\n            ",53],["T_VARIABLE","$this",54],["T_OBJECT_OPERATOR","->",54],["T_STRING","_critical",54],"(",["T_STRING","self",54],["T_DOUBLE_COLON","::",54],["T_STRING","RESOURCE_DATA_PRE_VALIDATION_ERROR",54],")",";",["T_WHITESPACE","\n        ",54],"}",["T_WHITESPACE","\n\n        ",55],["T_IF","if",57],["T_WHITESPACE"," ",57],"(",["T_ISSET","isset",57],"(",["T_VARIABLE","$data",57],"[",["T_CONSTANT_ENCAPSED_STRING","'region'",57],"]",")",["T_WHITESPACE"," ",57],["T_BOOLEAN_AND","&&",57],["T_WHITESPACE"," ",57],["T_ISSET","isset",57],"(",["T_VARIABLE","$data",57],"[",["T_CONSTANT_ENCAPSED_STRING","'country_id'",57],"]",")",")",["T_WHITESPACE"," ",57],"{",["T_WHITESPACE","\n            ",57],["T_VARIABLE","$data",58],"[",["T_CONSTANT_ENCAPSED_STRING","'region'",58],"]",["T_WHITESPACE"," ",58],"=",["T_WHITESPACE"," ",58],["T_VARIABLE","$this",58],["T_OBJECT_OPERATOR","->",58],["T_STRING","_getRegionIdByNameOrCode",58],"(",["T_VARIABLE","$data",58],"[",["T_CONSTANT_ENCAPSED_STRING","'region'",58],"]",",",["T_WHITESPACE"," ",58],["T_VARIABLE","$data",58],"[",["T_CONSTANT_ENCAPSED_STRING","'country_id'",58],"]",")",";",["T_WHITESPACE","\n        ",58],"}",["T_WHITESPACE","\n\n        ",59],["T_COMMENT","\/* @var $address Mage_Customer_Model_Address *\/",61],["T_WHITESPACE","\n        ",61],["T_VARIABLE","$address",62],["T_WHITESPACE"," ",62],"=",["T_WHITESPACE"," ",62],["T_STRING","Mage",62],["T_DOUBLE_COLON","::",62],["T_STRING","getModel",62],"(",["T_CONSTANT_ENCAPSED_STRING","'customer\/address'",62],")",";",["T_WHITESPACE","\n        ",62],["T_VARIABLE","$address",63],["T_OBJECT_OPERATOR","->",63],["T_STRING","setData",63],"(",["T_VARIABLE","$data",63],")",";",["T_WHITESPACE","\n        ",63],["T_VARIABLE","$address",64],["T_OBJECT_OPERATOR","->",64],["T_STRING","setCustomer",64],"(",["T_VARIABLE","$customer",64],")",";",["T_WHITESPACE","\n\n        ",64],["T_TRY","try",66],["T_WHITESPACE"," ",66],"{",["T_WHITESPACE","\n            ",66],["T_VARIABLE","$address",67],["T_OBJECT_OPERATOR","->",67],["T_STRING","save",67],"(",")",";",["T_WHITESPACE","\n        ",67],"}",["T_WHITESPACE"," ",68],["T_CATCH","catch",68],["T_WHITESPACE"," ",68],"(",["T_STRING","Mage_Core_Exception",68],["T_WHITESPACE"," ",68],["T_VARIABLE","$e",68],")",["T_WHITESPACE"," ",68],"{",["T_WHITESPACE","\n            ",68],["T_VARIABLE","$this",69],["T_OBJECT_OPERATOR","->",69],["T_STRING","_error",69],"(",["T_VARIABLE","$e",69],["T_OBJECT_OPERATOR","->",69],["T_STRING","getMessage",69],"(",")",",",["T_WHITESPACE"," ",69],["T_STRING","Mage_Api2_Model_Server",69],["T_DOUBLE_COLON","::",69],["T_STRING","HTTP_INTERNAL_ERROR",69],")",";",["T_WHITESPACE","\n        ",69],"}",["T_WHITESPACE"," ",70],["T_CATCH","catch",70],["T_WHITESPACE"," ",70],"(",["T_STRING","Exception",70],["T_WHITESPACE"," ",70],["T_VARIABLE","$e",70],")",["T_WHITESPACE"," ",70],"{",["T_WHITESPACE","\n            ",70],["T_VARIABLE","$this",71],["T_OBJECT_OPERATOR","->",71],["T_STRING","_critical",71],"(",["T_STRING","self",71],["T_DOUBLE_COLON","::",71],["T_STRING","RESOURCE_INTERNAL_ERROR",71],")",";",["T_WHITESPACE","\n        ",71],"}",["T_WHITESPACE","\n        ",72],["T_RETURN","return",73],["T_WHITESPACE"," ",73],["T_VARIABLE","$this",73],["T_OBJECT_OPERATOR","->",73],["T_STRING","_getLocation",73],"(",["T_VARIABLE","$address",73],")",";",["T_WHITESPACE","\n    ",73],"}",["T_WHITESPACE","\n\n    ",74],["T_DOC_COMMENT","\/**\n     * Retrieve information about specified customer address\n     *\n     * @throws Mage_Api2_Exception\n     * @return array\n     *\/",76],["T_WHITESPACE","\n    ",81],["T_PROTECTED","protected",82],["T_WHITESPACE"," ",82],["T_FUNCTION","function",82],["T_WHITESPACE"," ",82],["T_STRING","_retrieve",82],"(",")",["T_WHITESPACE","\n    ",82],"{",["T_WHITESPACE","\n        ",83],["T_COMMENT","\/* @var $address Mage_Customer_Model_Address *\/",84],["T_WHITESPACE","\n        ",84],["T_VARIABLE","$address",85],["T_WHITESPACE"," ",85],"=",["T_WHITESPACE"," ",85],["T_VARIABLE","$this",85],["T_OBJECT_OPERATOR","->",85],["T_STRING","_loadCustomerAddressById",85],"(",["T_VARIABLE","$this",85],["T_OBJECT_OPERATOR","->",85],["T_STRING","getRequest",85],"(",")",["T_OBJECT_OPERATOR","->",85],["T_STRING","getParam",85],"(",["T_CONSTANT_ENCAPSED_STRING","'id'",85],")",")",";",["T_WHITESPACE","\n        ",85],["T_VARIABLE","$addressData",86],["T_WHITESPACE"," ",86],"=",["T_WHITESPACE"," ",86],["T_VARIABLE","$address",86],["T_OBJECT_OPERATOR","->",86],["T_STRING","getData",86],"(",")",";",["T_WHITESPACE","\n        ",86],["T_VARIABLE","$addressData",87],"[",["T_CONSTANT_ENCAPSED_STRING","'street'",87],"]",["T_WHITESPACE"," ",87],"=",["T_WHITESPACE"," ",87],["T_VARIABLE","$address",87],["T_OBJECT_OPERATOR","->",87],["T_STRING","getStreet",87],"(",")",";",["T_WHITESPACE","\n        ",87],["T_RETURN","return",88],["T_WHITESPACE"," ",88],["T_VARIABLE","$addressData",88],";",["T_WHITESPACE","\n    ",88],"}",["T_WHITESPACE","\n\n    ",89],["T_DOC_COMMENT","\/**\n     * Get customer addresses list\n     *\n     * @return array\n     *\/",91],["T_WHITESPACE","\n    ",95],["T_PROTECTED","protected",96],["T_WHITESPACE"," ",96],["T_FUNCTION","function",96],["T_WHITESPACE"," ",96],["T_STRING","_retrieveCollection",96],"(",")",["T_WHITESPACE","\n    ",96],"{",["T_WHITESPACE","\n        ",97],["T_VARIABLE","$data",98],["T_WHITESPACE"," ",98],"=",["T_WHITESPACE"," ",98],["T_ARRAY","array",98],"(",")",";",["T_WHITESPACE","\n        ",98],["T_COMMENT","\/* @var $address Mage_Customer_Model_Address *\/",99],["T_WHITESPACE","\n        ",99],["T_FOREACH","foreach",100],["T_WHITESPACE"," ",100],"(",["T_VARIABLE","$this",100],["T_OBJECT_OPERATOR","->",100],["T_STRING","_getCollectionForRetrieve",100],"(",")",["T_WHITESPACE"," ",100],["T_AS","as",100],["T_WHITESPACE"," ",100],["T_VARIABLE","$address",100],")",["T_WHITESPACE"," ",100],"{",["T_WHITESPACE","\n            ",100],["T_VARIABLE","$addressData",101],["T_WHITESPACE","           ",101],"=",["T_WHITESPACE"," ",101],["T_VARIABLE","$address",101],["T_OBJECT_OPERATOR","->",101],["T_STRING","getData",101],"(",")",";",["T_WHITESPACE","\n            ",101],["T_VARIABLE","$addressData",102],"[",["T_CONSTANT_ENCAPSED_STRING","'street'",102],"]",["T_WHITESPACE"," ",102],"=",["T_WHITESPACE"," ",102],["T_VARIABLE","$address",102],["T_OBJECT_OPERATOR","->",102],["T_STRING","getStreet",102],"(",")",";",["T_WHITESPACE","\n            ",102],["T_VARIABLE","$data",103],"[","]",["T_WHITESPACE","                ",103],"=",["T_WHITESPACE"," ",103],["T_STRING","array_merge",103],"(",["T_VARIABLE","$addressData",103],",",["T_WHITESPACE"," ",103],["T_VARIABLE","$this",103],["T_OBJECT_OPERATOR","->",103],["T_STRING","_getDefaultAddressesInfo",103],"(",["T_VARIABLE","$address",103],")",")",";",["T_WHITESPACE","\n        ",103],"}",["T_WHITESPACE","\n        ",104],["T_RETURN","return",105],["T_WHITESPACE"," ",105],["T_VARIABLE","$data",105],";",["T_WHITESPACE","\n    ",105],"}",["T_WHITESPACE","\n\n    ",106],["T_DOC_COMMENT","\/**\n     * Retrieve collection instances\n     *\n     * @return Mage_Customer_Model_Resource_Address_Collection\n     *\/",108],["T_WHITESPACE","\n    ",112],["T_PROTECTED","protected",113],["T_WHITESPACE"," ",113],["T_FUNCTION","function",113],["T_WHITESPACE"," ",113],["T_STRING","_getCollectionForRetrieve",113],"(",")",["T_WHITESPACE","\n    ",113],"{",["T_WHITESPACE","\n        ",114],["T_COMMENT","\/* @var $customer Mage_Customer_Model_Customer *\/",115],["T_WHITESPACE","\n        ",115],["T_VARIABLE","$customer",116],["T_WHITESPACE"," ",116],"=",["T_WHITESPACE"," ",116],["T_VARIABLE","$this",116],["T_OBJECT_OPERATOR","->",116],["T_STRING","_loadCustomerById",116],"(",["T_VARIABLE","$this",116],["T_OBJECT_OPERATOR","->",116],["T_STRING","getRequest",116],"(",")",["T_OBJECT_OPERATOR","->",116],["T_STRING","getParam",116],"(",["T_CONSTANT_ENCAPSED_STRING","'customer_id'",116],")",")",";",["T_WHITESPACE","\n\n        ",116],["T_COMMENT","\/* @var $collection Mage_Customer_Model_Resource_Address_Collection *\/",118],["T_WHITESPACE","\n        ",118],["T_VARIABLE","$collection",119],["T_WHITESPACE"," ",119],"=",["T_WHITESPACE"," ",119],["T_VARIABLE","$customer",119],["T_OBJECT_OPERATOR","->",119],["T_STRING","getAddressesCollection",119],"(",")",";",["T_WHITESPACE","\n\n        ",119],["T_VARIABLE","$this",121],["T_OBJECT_OPERATOR","->",121],["T_STRING","_applyCollectionModifiers",121],"(",["T_VARIABLE","$collection",121],")",";",["T_WHITESPACE","\n        ",121],["T_RETURN","return",122],["T_WHITESPACE"," ",122],["T_VARIABLE","$collection",122],";",["T_WHITESPACE","\n    ",122],"}",["T_WHITESPACE","\n\n    ",123],["T_DOC_COMMENT","\/**\n     * Get array with default addresses information if possible\n     *\n     * @param Mage_Customer_Model_Address $address\n     * @return array\n     *\/",125],["T_WHITESPACE","\n    ",130],["T_PROTECTED","protected",131],["T_WHITESPACE"," ",131],["T_FUNCTION","function",131],["T_WHITESPACE"," ",131],["T_STRING","_getDefaultAddressesInfo",131],"(",["T_STRING","Mage_Customer_Model_Address",131],["T_WHITESPACE"," ",131],["T_VARIABLE","$address",131],")",["T_WHITESPACE","\n    ",131],"{",["T_WHITESPACE","\n        ",132],["T_RETURN","return",133],["T_WHITESPACE"," ",133],["T_ARRAY","array",133],"(",["T_WHITESPACE","\n            ",133],["T_CONSTANT_ENCAPSED_STRING","'is_default_billing'",134],["T_WHITESPACE","  ",134],["T_DOUBLE_ARROW","=>",134],["T_WHITESPACE"," ",134],["T_INT_CAST","(int)",134],["T_VARIABLE","$this",134],["T_OBJECT_OPERATOR","->",134],["T_STRING","_isDefaultBillingAddress",134],"(",["T_VARIABLE","$address",134],")",",",["T_WHITESPACE","\n            ",134],["T_CONSTANT_ENCAPSED_STRING","'is_default_shipping'",135],["T_WHITESPACE"," ",135],["T_DOUBLE_ARROW","=>",135],["T_WHITESPACE"," ",135],["T_INT_CAST","(int)",135],["T_VARIABLE","$this",135],["T_OBJECT_OPERATOR","->",135],["T_STRING","_isDefaultShippingAddress",135],"(",["T_VARIABLE","$address",135],")",["T_WHITESPACE","\n        ",135],")",";",["T_WHITESPACE","\n    ",136],"}",["T_WHITESPACE","\n\n    ",137],["T_DOC_COMMENT","\/**\n     * Update specified stock item\n     *\n     * @param array $data\n     * @throws Mage_Api2_Exception\n     *\/",139],["T_WHITESPACE","\n    ",144],["T_PROTECTED","protected",145],["T_WHITESPACE"," ",145],["T_FUNCTION","function",145],["T_WHITESPACE"," ",145],["T_STRING","_update",145],"(",["T_ARRAY","array",145],["T_WHITESPACE"," ",145],["T_VARIABLE","$data",145],")",["T_WHITESPACE","\n    ",145],"{",["T_WHITESPACE","\n        ",146],["T_COMMENT","\/* @var $address Mage_Customer_Model_Address *\/",147],["T_WHITESPACE","\n        ",147],["T_VARIABLE","$address",148],["T_WHITESPACE"," ",148],"=",["T_WHITESPACE"," ",148],["T_VARIABLE","$this",148],["T_OBJECT_OPERATOR","->",148],["T_STRING","_loadCustomerAddressById",148],"(",["T_VARIABLE","$this",148],["T_OBJECT_OPERATOR","->",148],["T_STRING","getRequest",148],"(",")",["T_OBJECT_OPERATOR","->",148],["T_STRING","getParam",148],"(",["T_CONSTANT_ENCAPSED_STRING","'id'",148],")",")",";",["T_WHITESPACE","\n        ",148],["T_VARIABLE","$validator",149],["T_WHITESPACE"," ",149],"=",["T_WHITESPACE"," ",149],["T_VARIABLE","$this",149],["T_OBJECT_OPERATOR","->",149],["T_STRING","_getValidator",149],"(",")",";",["T_WHITESPACE","\n\n        ",149],["T_VARIABLE","$data",151],["T_WHITESPACE"," ",151],"=",["T_WHITESPACE"," ",151],["T_VARIABLE","$validator",151],["T_OBJECT_OPERATOR","->",151],["T_STRING","filter",151],"(",["T_VARIABLE","$data",151],")",";",["T_WHITESPACE","\n        ",151],["T_IF","if",152],["T_WHITESPACE"," ",152],"(","!",["T_VARIABLE","$validator",152],["T_OBJECT_OPERATOR","->",152],["T_STRING","isValidData",152],"(",["T_VARIABLE","$data",152],",",["T_WHITESPACE"," ",152],["T_STRING","true",152],")",["T_WHITESPACE","\n            ",152],["T_BOOLEAN_OR","||",153],["T_WHITESPACE"," ",153],"!",["T_VARIABLE","$validator",153],["T_OBJECT_OPERATOR","->",153],["T_STRING","isValidDataForChangeAssociationWithCountry",153],"(",["T_VARIABLE","$address",153],",",["T_WHITESPACE"," ",153],["T_VARIABLE","$data",153],")",")",["T_WHITESPACE"," ",153],"{",["T_WHITESPACE","\n            ",153],["T_FOREACH","foreach",154],["T_WHITESPACE"," ",154],"(",["T_VARIABLE","$validator",154],["T_OBJECT_OPERATOR","->",154],["T_STRING","getErrors",154],"(",")",["T_WHITESPACE"," ",154],["T_AS","as",154],["T_WHITESPACE"," ",154],["T_VARIABLE","$error",154],")",["T_WHITESPACE"," ",154],"{",["T_WHITESPACE","\n                ",154],["T_VARIABLE","$this",155],["T_OBJECT_OPERATOR","->",155],["T_STRING","_error",155],"(",["T_VARIABLE","$error",155],",",["T_WHITESPACE"," ",155],["T_STRING","Mage_Api2_Model_Server",155],["T_DOUBLE_COLON","::",155],["T_STRING","HTTP_BAD_REQUEST",155],")",";",["T_WHITESPACE","\n            ",155],"}",["T_WHITESPACE","\n            ",156],["T_VARIABLE","$this",157],["T_OBJECT_OPERATOR","->",157],["T_STRING","_critical",157],"(",["T_STRING","self",157],["T_DOUBLE_COLON","::",157],["T_STRING","RESOURCE_DATA_PRE_VALIDATION_ERROR",157],")",";",["T_WHITESPACE","\n        ",157],"}",["T_WHITESPACE","\n        ",158],["T_IF","if",159],["T_WHITESPACE"," ",159],"(",["T_ISSET","isset",159],"(",["T_VARIABLE","$data",159],"[",["T_CONSTANT_ENCAPSED_STRING","'region'",159],"]",")",")",["T_WHITESPACE"," ",159],"{",["T_WHITESPACE","\n            ",159],["T_VARIABLE","$data",160],"[",["T_CONSTANT_ENCAPSED_STRING","'region'",160],"]",["T_WHITESPACE"," ",160],"=",["T_WHITESPACE"," ",160],["T_VARIABLE","$this",160],["T_OBJECT_OPERATOR","->",160],["T_STRING","_getRegionIdByNameOrCode",160],"(",["T_WHITESPACE","\n                ",160],["T_VARIABLE","$data",161],"[",["T_CONSTANT_ENCAPSED_STRING","'region'",161],"]",",",["T_WHITESPACE"," ",161],["T_ISSET","isset",161],"(",["T_VARIABLE","$data",161],"[",["T_CONSTANT_ENCAPSED_STRING","'country_id'",161],"]",")",["T_WHITESPACE"," ",161],"?",["T_WHITESPACE"," ",161],["T_VARIABLE","$data",161],"[",["T_CONSTANT_ENCAPSED_STRING","'country_id'",161],"]",["T_WHITESPACE"," ",161],":",["T_WHITESPACE"," ",161],["T_VARIABLE","$address",161],["T_OBJECT_OPERATOR","->",161],["T_STRING","getCountryId",161],"(",")",["T_WHITESPACE","\n            ",161],")",";",["T_WHITESPACE","\n            ",162],["T_VARIABLE","$data",163],"[",["T_CONSTANT_ENCAPSED_STRING","'region_id'",163],"]",["T_WHITESPACE"," ",163],"=",["T_WHITESPACE"," ",163],["T_STRING","null",163],";",["T_WHITESPACE"," ",163],["T_COMMENT","\/\/ to avoid overwrite region during update in address model _beforeSave()\n",163],["T_WHITESPACE","        ",164],"}",["T_WHITESPACE","\n        ",164],["T_VARIABLE","$address",165],["T_OBJECT_OPERATOR","->",165],["T_STRING","addData",165],"(",["T_VARIABLE","$data",165],")",";",["T_WHITESPACE","\n\n        ",165],["T_TRY","try",167],["T_WHITESPACE"," ",167],"{",["T_WHITESPACE","\n            ",167],["T_VARIABLE","$address",168],["T_OBJECT_OPERATOR","->",168],["T_STRING","save",168],"(",")",";",["T_WHITESPACE","\n        ",168],"}",["T_WHITESPACE"," ",169],["T_CATCH","catch",169],["T_WHITESPACE"," ",169],"(",["T_STRING","Mage_Core_Exception",169],["T_WHITESPACE"," ",169],["T_VARIABLE","$e",169],")",["T_WHITESPACE"," ",169],"{",["T_WHITESPACE","\n            ",169],["T_VARIABLE","$this",170],["T_OBJECT_OPERATOR","->",170],["T_STRING","_error",170],"(",["T_VARIABLE","$e",170],["T_OBJECT_OPERATOR","->",170],["T_STRING","getMessage",170],"(",")",",",["T_WHITESPACE"," ",170],["T_STRING","Mage_Api2_Model_Server",170],["T_DOUBLE_COLON","::",170],["T_STRING","HTTP_INTERNAL_ERROR",170],")",";",["T_WHITESPACE","\n        ",170],"}",["T_WHITESPACE"," ",171],["T_CATCH","catch",171],["T_WHITESPACE"," ",171],"(",["T_STRING","Exception",171],["T_WHITESPACE"," ",171],["T_VARIABLE","$e",171],")",["T_WHITESPACE"," ",171],"{",["T_WHITESPACE","\n            ",171],["T_VARIABLE","$this",172],["T_OBJECT_OPERATOR","->",172],["T_STRING","_critical",172],"(",["T_STRING","self",172],["T_DOUBLE_COLON","::",172],["T_STRING","RESOURCE_INTERNAL_ERROR",172],")",";",["T_WHITESPACE","\n        ",172],"}",["T_WHITESPACE","\n    ",173],"}",["T_WHITESPACE","\n\n    ",174],["T_DOC_COMMENT","\/**\n     * Delete customer\n     *\/",176],["T_WHITESPACE","\n    ",178],["T_PROTECTED","protected",179],["T_WHITESPACE"," ",179],["T_FUNCTION","function",179],["T_WHITESPACE"," ",179],["T_STRING","_delete",179],"(",")",["T_WHITESPACE","\n    ",179],"{",["T_WHITESPACE","\n        ",180],["T_COMMENT","\/* @var $address Mage_Customer_Model_Address *\/",181],["T_WHITESPACE","\n        ",181],["T_VARIABLE","$address",182],["T_WHITESPACE"," ",182],"=",["T_WHITESPACE"," ",182],["T_VARIABLE","$this",182],["T_OBJECT_OPERATOR","->",182],["T_STRING","_loadCustomerAddressById",182],"(",["T_VARIABLE","$this",182],["T_OBJECT_OPERATOR","->",182],["T_STRING","getRequest",182],"(",")",["T_OBJECT_OPERATOR","->",182],["T_STRING","getParam",182],"(",["T_CONSTANT_ENCAPSED_STRING","'id'",182],")",")",";",["T_WHITESPACE","\n\n        ",182],["T_IF","if",184],["T_WHITESPACE"," ",184],"(",["T_VARIABLE","$this",184],["T_OBJECT_OPERATOR","->",184],["T_STRING","_isDefaultBillingAddress",184],"(",["T_VARIABLE","$address",184],")",["T_WHITESPACE"," ",184],["T_BOOLEAN_OR","||",184],["T_WHITESPACE"," ",184],["T_VARIABLE","$this",184],["T_OBJECT_OPERATOR","->",184],["T_STRING","_isDefaultShippingAddress",184],"(",["T_VARIABLE","$address",184],")",")",["T_WHITESPACE"," ",184],"{",["T_WHITESPACE","\n            ",184],["T_VARIABLE","$this",185],["T_OBJECT_OPERATOR","->",185],["T_STRING","_critical",185],"(",["T_WHITESPACE","\n                ",185],["T_CONSTANT_ENCAPSED_STRING","'Address is default for customer so is not allowed to be deleted'",186],",",["T_WHITESPACE","\n                ",186],["T_STRING","Mage_Api2_Model_Server",187],["T_DOUBLE_COLON","::",187],["T_STRING","HTTP_BAD_REQUEST",187],["T_WHITESPACE","\n            ",187],")",";",["T_WHITESPACE","\n        ",188],"}",["T_WHITESPACE","\n        ",189],["T_TRY","try",190],["T_WHITESPACE"," ",190],"{",["T_WHITESPACE","\n            ",190],["T_VARIABLE","$address",191],["T_OBJECT_OPERATOR","->",191],["T_STRING","delete",191],"(",")",";",["T_WHITESPACE","\n        ",191],"}",["T_WHITESPACE"," ",192],["T_CATCH","catch",192],["T_WHITESPACE"," ",192],"(",["T_STRING","Mage_Core_Exception",192],["T_WHITESPACE"," ",192],["T_VARIABLE","$e",192],")",["T_WHITESPACE"," ",192],"{",["T_WHITESPACE","\n            ",192],["T_VARIABLE","$this",193],["T_OBJECT_OPERATOR","->",193],["T_STRING","_critical",193],"(",["T_VARIABLE","$e",193],["T_OBJECT_OPERATOR","->",193],["T_STRING","getMessage",193],"(",")",",",["T_WHITESPACE"," ",193],["T_STRING","Mage_Api2_Model_Server",193],["T_DOUBLE_COLON","::",193],["T_STRING","HTTP_INTERNAL_ERROR",193],")",";",["T_WHITESPACE","\n        ",193],"}",["T_WHITESPACE"," ",194],["T_CATCH","catch",194],["T_WHITESPACE"," ",194],"(",["T_STRING","Exception",194],["T_WHITESPACE"," ",194],["T_VARIABLE","$e",194],")",["T_WHITESPACE"," ",194],"{",["T_WHITESPACE","\n            ",194],["T_VARIABLE","$this",195],["T_OBJECT_OPERATOR","->",195],["T_STRING","_critical",195],"(",["T_STRING","self",195],["T_DOUBLE_COLON","::",195],["T_STRING","RESOURCE_INTERNAL_ERROR",195],")",";",["T_WHITESPACE","\n        ",195],"}",["T_WHITESPACE","\n    ",196],"}",["T_WHITESPACE","\n",197],"}",["T_WHITESPACE","\n",198]]
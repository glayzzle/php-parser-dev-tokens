[["T_OPEN_TAG","<?php\n",1],["T_DOC_COMMENT","\/**\n * Magento\n *\n * NOTICE OF LICENSE\n *\n * This source file is subject to the Open Software License (OSL 3.0)\n * that is bundled with this package in the file LICENSE.txt.\n * It is also available through the world-wide-web at this URL:\n * http:\/\/opensource.org\/licenses\/osl-3.0.php\n * If you did not receive a copy of the license and are unable to\n * obtain it through the world-wide-web, please send an email\n * to license@magento.com so we can send you a copy immediately.\n *\n * DISCLAIMER\n *\n * Do not edit or add to this file if you wish to upgrade Magento to newer\n * versions in the future. If you wish to customize Magento for your\n * needs please refer to http:\/\/www.magento.com for more information.\n *\n * @category    Mage\n * @package     Mage_CatalogSearch\n * @copyright  Copyright (c) 2006-2016 X.commerce, Inc. and affiliates (http:\/\/www.magento.com)\n * @license    http:\/\/opensource.org\/licenses\/osl-3.0.php  Open Software License (OSL 3.0)\n *\/",2],["T_WHITESPACE","\n\n",25],["T_DOC_COMMENT","\/**\n * Catalog advanced search model\n *\n * @method Mage_CatalogSearch_Model_Resource_Fulltext _getResource()\n * @method Mage_CatalogSearch_Model_Resource_Fulltext getResource()\n * @method int getProductId()\n * @method Mage_CatalogSearch_Model_Fulltext setProductId(int $value)\n * @method int getStoreId()\n * @method Mage_CatalogSearch_Model_Fulltext setStoreId(int $value)\n * @method string getDataIndex()\n * @method Mage_CatalogSearch_Model_Fulltext setDataIndex(string $value)\n *\n * @category    Mage\n * @package     Mage_CatalogSearch\n * @author      Magento Core Team <core@magentocommerce.com>\n *\/",27],["T_WHITESPACE","\n",42],["T_CLASS","class",43],["T_WHITESPACE"," ",43],["T_STRING","Mage_CatalogSearch_Model_Fulltext",43],["T_WHITESPACE"," ",43],["T_EXTENDS","extends",43],["T_WHITESPACE"," ",43],["T_STRING","Mage_Core_Model_Abstract",43],["T_WHITESPACE","\n",43],"{",["T_WHITESPACE","\n    ",44],["T_CONST","const",45],["T_WHITESPACE"," ",45],["T_STRING","SEARCH_TYPE_LIKE",45],["T_WHITESPACE","              ",45],"=",["T_WHITESPACE"," ",45],["T_LNUMBER","1",45],";",["T_WHITESPACE","\n    ",45],["T_CONST","const",46],["T_WHITESPACE"," ",46],["T_STRING","SEARCH_TYPE_FULLTEXT",46],["T_WHITESPACE","          ",46],"=",["T_WHITESPACE"," ",46],["T_LNUMBER","2",46],";",["T_WHITESPACE","\n    ",46],["T_CONST","const",47],["T_WHITESPACE"," ",47],["T_STRING","SEARCH_TYPE_COMBINE",47],["T_WHITESPACE","           ",47],"=",["T_WHITESPACE"," ",47],["T_LNUMBER","3",47],";",["T_WHITESPACE","\n    ",47],["T_CONST","const",48],["T_WHITESPACE"," ",48],["T_STRING","XML_PATH_CATALOG_SEARCH_TYPE",48],["T_WHITESPACE","  ",48],"=",["T_WHITESPACE"," ",48],["T_CONSTANT_ENCAPSED_STRING","'catalog\/search\/search_type'",48],";",["T_WHITESPACE","\n\n    ",48],["T_DOC_COMMENT","\/**\n     * Whether table changes are allowed\n     *\n     * @deprecated after 1.6.1.0\n     * @var bool\n     *\/",50],["T_WHITESPACE","\n    ",55],["T_PROTECTED","protected",56],["T_WHITESPACE"," ",56],["T_VARIABLE","$_allowTableChanges",56],["T_WHITESPACE"," ",56],"=",["T_WHITESPACE"," ",56],["T_STRING","true",56],";",["T_WHITESPACE","\n\n    ",56],["T_PROTECTED","protected",58],["T_WHITESPACE"," ",58],["T_FUNCTION","function",58],["T_WHITESPACE"," ",58],["T_STRING","_construct",58],"(",")",["T_WHITESPACE","\n    ",58],"{",["T_WHITESPACE","\n        ",59],["T_VARIABLE","$this",60],["T_OBJECT_OPERATOR","->",60],["T_STRING","_init",60],"(",["T_CONSTANT_ENCAPSED_STRING","'catalogsearch\/fulltext'",60],")",";",["T_WHITESPACE","\n    ",60],"}",["T_WHITESPACE","\n\n    ",61],["T_DOC_COMMENT","\/**\n     * Regenerate all Stores index\n     *\n     * Examples:\n     * (null, null) => Regenerate index for all stores\n     * (1, null)    => Regenerate index for store Id=1\n     * (1, 2)       => Regenerate index for product Id=2 and its store view Id=1\n     * (null, 2)    => Regenerate index for all store views of product Id=2\n     *\n     * @param int|null $storeId Store View Id\n     * @param int|array|null $productIds Product Entity Id\n     *\n     * @return Mage_CatalogSearch_Model_Fulltext\n     *\/",63],["T_WHITESPACE","\n    ",76],["T_PUBLIC","public",77],["T_WHITESPACE"," ",77],["T_FUNCTION","function",77],["T_WHITESPACE"," ",77],["T_STRING","rebuildIndex",77],"(",["T_VARIABLE","$storeId",77],["T_WHITESPACE"," ",77],"=",["T_WHITESPACE"," ",77],["T_STRING","null",77],",",["T_WHITESPACE"," ",77],["T_VARIABLE","$productIds",77],["T_WHITESPACE"," ",77],"=",["T_WHITESPACE"," ",77],["T_STRING","null",77],")",["T_WHITESPACE","\n    ",77],"{",["T_WHITESPACE","\n        ",78],["T_STRING","Mage",79],["T_DOUBLE_COLON","::",79],["T_STRING","dispatchEvent",79],"(",["T_CONSTANT_ENCAPSED_STRING","'catalogsearch_index_process_start'",79],",",["T_WHITESPACE"," ",79],["T_ARRAY","array",79],"(",["T_WHITESPACE","\n            ",79],["T_CONSTANT_ENCAPSED_STRING","'store_id'",80],["T_WHITESPACE","      ",80],["T_DOUBLE_ARROW","=>",80],["T_WHITESPACE"," ",80],["T_VARIABLE","$storeId",80],",",["T_WHITESPACE","\n            ",80],["T_CONSTANT_ENCAPSED_STRING","'product_ids'",81],["T_WHITESPACE","   ",81],["T_DOUBLE_ARROW","=>",81],["T_WHITESPACE"," ",81],["T_VARIABLE","$productIds",81],["T_WHITESPACE","\n        ",81],")",")",";",["T_WHITESPACE","\n\n        ",82],["T_VARIABLE","$this",84],["T_OBJECT_OPERATOR","->",84],["T_STRING","getResource",84],"(",")",["T_OBJECT_OPERATOR","->",84],["T_STRING","rebuildIndex",84],"(",["T_VARIABLE","$storeId",84],",",["T_WHITESPACE"," ",84],["T_VARIABLE","$productIds",84],")",";",["T_WHITESPACE","\n\n        ",84],["T_STRING","Mage",86],["T_DOUBLE_COLON","::",86],["T_STRING","dispatchEvent",86],"(",["T_CONSTANT_ENCAPSED_STRING","'catalogsearch_index_process_complete'",86],",",["T_WHITESPACE"," ",86],["T_ARRAY","array",86],"(",")",")",";",["T_WHITESPACE","\n\n        ",86],["T_RETURN","return",88],["T_WHITESPACE"," ",88],["T_VARIABLE","$this",88],";",["T_WHITESPACE","\n    ",88],"}",["T_WHITESPACE","\n\n    ",89],["T_DOC_COMMENT","\/**\n     * Delete index data\n     *\n     * Examples:\n     * (null, null) => Clean index of all stores\n     * (1, null)    => Clean index of store Id=1\n     * (1, 2)       => Clean index of product Id=2 and its store view Id=1\n     * (null, 2)    => Clean index of all store views of product Id=2\n     *\n     * @param int $storeId Store View Id\n     * @param int $productId Product Entity Id\n     * @return Mage_CatalogSearch_Model_Fulltext\n     *\/",91],["T_WHITESPACE","\n    ",103],["T_PUBLIC","public",104],["T_WHITESPACE"," ",104],["T_FUNCTION","function",104],["T_WHITESPACE"," ",104],["T_STRING","cleanIndex",104],"(",["T_VARIABLE","$storeId",104],["T_WHITESPACE"," ",104],"=",["T_WHITESPACE"," ",104],["T_STRING","null",104],",",["T_WHITESPACE"," ",104],["T_VARIABLE","$productId",104],["T_WHITESPACE"," ",104],"=",["T_WHITESPACE"," ",104],["T_STRING","null",104],")",["T_WHITESPACE","\n    ",104],"{",["T_WHITESPACE","\n        ",105],["T_VARIABLE","$this",106],["T_OBJECT_OPERATOR","->",106],["T_STRING","getResource",106],"(",")",["T_OBJECT_OPERATOR","->",106],["T_STRING","cleanIndex",106],"(",["T_VARIABLE","$storeId",106],",",["T_WHITESPACE"," ",106],["T_VARIABLE","$productId",106],")",";",["T_WHITESPACE","\n        ",106],["T_RETURN","return",107],["T_WHITESPACE"," ",107],["T_VARIABLE","$this",107],";",["T_WHITESPACE","\n    ",107],"}",["T_WHITESPACE","\n\n    ",108],["T_DOC_COMMENT","\/**\n     * Reset search results cache\n     *\n     * @return Mage_CatalogSearch_Model_Fulltext\n     *\/",110],["T_WHITESPACE","\n    ",114],["T_PUBLIC","public",115],["T_WHITESPACE"," ",115],["T_FUNCTION","function",115],["T_WHITESPACE"," ",115],["T_STRING","resetSearchResults",115],"(",")",["T_WHITESPACE","\n    ",115],"{",["T_WHITESPACE","\n        ",116],["T_VARIABLE","$this",117],["T_OBJECT_OPERATOR","->",117],["T_STRING","getResource",117],"(",")",["T_OBJECT_OPERATOR","->",117],["T_STRING","resetSearchResults",117],"(",")",";",["T_WHITESPACE","\n        ",117],["T_RETURN","return",118],["T_WHITESPACE"," ",118],["T_VARIABLE","$this",118],";",["T_WHITESPACE","\n    ",118],"}",["T_WHITESPACE","\n\n    ",119],["T_DOC_COMMENT","\/**\n     * Prepare results for query\n     *\n     * @param Mage_CatalogSearch_Model_Query $query\n     * @return Mage_CatalogSearch_Model_Fulltext\n     *\/",121],["T_WHITESPACE","\n    ",126],["T_PUBLIC","public",127],["T_WHITESPACE"," ",127],["T_FUNCTION","function",127],["T_WHITESPACE"," ",127],["T_STRING","prepareResult",127],"(",["T_VARIABLE","$query",127],["T_WHITESPACE"," ",127],"=",["T_WHITESPACE"," ",127],["T_STRING","null",127],")",["T_WHITESPACE","\n    ",127],"{",["T_WHITESPACE","\n        ",128],["T_IF","if",129],["T_WHITESPACE"," ",129],"(","!",["T_VARIABLE","$query",129],["T_WHITESPACE"," ",129],["T_INSTANCEOF","instanceof",129],["T_WHITESPACE"," ",129],["T_STRING","Mage_CatalogSearch_Model_Query",129],")",["T_WHITESPACE"," ",129],"{",["T_WHITESPACE","\n            ",129],["T_VARIABLE","$query",130],["T_WHITESPACE"," ",130],"=",["T_WHITESPACE"," ",130],["T_STRING","Mage",130],["T_DOUBLE_COLON","::",130],["T_STRING","helper",130],"(",["T_CONSTANT_ENCAPSED_STRING","'catalogsearch'",130],")",["T_OBJECT_OPERATOR","->",130],["T_STRING","getQuery",130],"(",")",";",["T_WHITESPACE","\n        ",130],"}",["T_WHITESPACE","\n        ",131],["T_VARIABLE","$queryText",132],["T_WHITESPACE"," ",132],"=",["T_WHITESPACE"," ",132],["T_STRING","Mage",132],["T_DOUBLE_COLON","::",132],["T_STRING","helper",132],"(",["T_CONSTANT_ENCAPSED_STRING","'catalogsearch'",132],")",["T_OBJECT_OPERATOR","->",132],["T_STRING","getQueryText",132],"(",")",";",["T_WHITESPACE","\n        ",132],["T_IF","if",133],["T_WHITESPACE"," ",133],"(",["T_VARIABLE","$query",133],["T_OBJECT_OPERATOR","->",133],["T_STRING","getSynonymFor",133],"(",")",")",["T_WHITESPACE"," ",133],"{",["T_WHITESPACE","\n            ",133],["T_VARIABLE","$queryText",134],["T_WHITESPACE"," ",134],"=",["T_WHITESPACE"," ",134],["T_VARIABLE","$query",134],["T_OBJECT_OPERATOR","->",134],["T_STRING","getSynonymFor",134],"(",")",";",["T_WHITESPACE","\n        ",134],"}",["T_WHITESPACE","\n        ",135],["T_VARIABLE","$this",136],["T_OBJECT_OPERATOR","->",136],["T_STRING","getResource",136],"(",")",["T_OBJECT_OPERATOR","->",136],["T_STRING","prepareResult",136],"(",["T_VARIABLE","$this",136],",",["T_WHITESPACE"," ",136],["T_VARIABLE","$queryText",136],",",["T_WHITESPACE"," ",136],["T_VARIABLE","$query",136],")",";",["T_WHITESPACE","\n        ",136],["T_RETURN","return",137],["T_WHITESPACE"," ",137],["T_VARIABLE","$this",137],";",["T_WHITESPACE","\n    ",137],"}",["T_WHITESPACE","\n\n    ",138],["T_DOC_COMMENT","\/**\n     * Retrieve search type\n     *\n     * @param int $storeId\n     * @return int\n     *\/",140],["T_WHITESPACE","\n    ",145],["T_PUBLIC","public",146],["T_WHITESPACE"," ",146],["T_FUNCTION","function",146],["T_WHITESPACE"," ",146],["T_STRING","getSearchType",146],"(",["T_VARIABLE","$storeId",146],["T_WHITESPACE"," ",146],"=",["T_WHITESPACE"," ",146],["T_STRING","null",146],")",["T_WHITESPACE","\n    ",146],"{",["T_WHITESPACE","\n        ",147],["T_RETURN","return",148],["T_WHITESPACE"," ",148],["T_STRING","Mage",148],["T_DOUBLE_COLON","::",148],["T_STRING","getStoreConfig",148],"(",["T_STRING","self",148],["T_DOUBLE_COLON","::",148],["T_STRING","XML_PATH_CATALOG_SEARCH_TYPE",148],",",["T_WHITESPACE"," ",148],["T_VARIABLE","$storeId",148],")",";",["T_WHITESPACE","\n    ",148],"}",["T_WHITESPACE","\n\n\n\n\n\n    ",149],["T_COMMENT","\/\/ Deprecated methods\n",155],["T_WHITESPACE","\n    ",156],["T_DOC_COMMENT","\/**\n     * Set whether table changes are allowed\n     *\n     * @deprecated after 1.6.1.0\n     *\n     * @param bool $value\n     * @return Mage_CatalogSearch_Model_Fulltext\n     *\/",157],["T_WHITESPACE","\n    ",164],["T_PUBLIC","public",165],["T_WHITESPACE"," ",165],["T_FUNCTION","function",165],["T_WHITESPACE"," ",165],["T_STRING","setAllowTableChanges",165],"(",["T_VARIABLE","$value",165],["T_WHITESPACE"," ",165],"=",["T_WHITESPACE"," ",165],["T_STRING","true",165],")",["T_WHITESPACE","\n    ",165],"{",["T_WHITESPACE","\n        ",166],["T_VARIABLE","$this",167],["T_OBJECT_OPERATOR","->",167],["T_STRING","_allowTableChanges",167],["T_WHITESPACE"," ",167],"=",["T_WHITESPACE"," ",167],["T_VARIABLE","$value",167],";",["T_WHITESPACE","\n        ",167],["T_RETURN","return",168],["T_WHITESPACE"," ",168],["T_VARIABLE","$this",168],";",["T_WHITESPACE","\n    ",168],"}",["T_WHITESPACE","\n\n    ",169],["T_DOC_COMMENT","\/**\n     * Update category products indexes\n     *\n     * @deprecated after 1.6.2.0\n     *\n     * @param array $productIds\n     * @param array $categoryIds\n     *\n     * @return Mage_CatalogSearch_Model_Fulltext\n     *\/",171],["T_WHITESPACE","\n    ",180],["T_PUBLIC","public",181],["T_WHITESPACE"," ",181],["T_FUNCTION","function",181],["T_WHITESPACE"," ",181],["T_STRING","updateCategoryIndex",181],"(",["T_VARIABLE","$productIds",181],",",["T_WHITESPACE"," ",181],["T_VARIABLE","$categoryIds",181],")",["T_WHITESPACE","\n    ",181],"{",["T_WHITESPACE","\n        ",182],["T_VARIABLE","$this",183],["T_OBJECT_OPERATOR","->",183],["T_STRING","getResource",183],"(",")",["T_OBJECT_OPERATOR","->",183],["T_STRING","updateCategoryIndex",183],"(",["T_VARIABLE","$productIds",183],",",["T_WHITESPACE"," ",183],["T_VARIABLE","$categoryIds",183],")",";",["T_WHITESPACE","\n        ",183],["T_RETURN","return",184],["T_WHITESPACE"," ",184],["T_VARIABLE","$this",184],";",["T_WHITESPACE","\n    ",184],"}",["T_WHITESPACE","\n",185],"}",["T_WHITESPACE","\n",186]]
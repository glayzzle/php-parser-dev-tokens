[["T_OPEN_TAG","<?php\n",1],["T_DOC_COMMENT","\/**\n * Magento\n *\n * NOTICE OF LICENSE\n *\n * This source file is subject to the Open Software License (OSL 3.0)\n * that is bundled with this package in the file LICENSE.txt.\n * It is also available through the world-wide-web at this URL:\n * http:\/\/opensource.org\/licenses\/osl-3.0.php\n * If you did not receive a copy of the license and are unable to\n * obtain it through the world-wide-web, please send an email\n * to license@magento.com so we can send you a copy immediately.\n *\n * DISCLAIMER\n *\n * Do not edit or add to this file if you wish to upgrade Magento to newer\n * versions in the future. If you wish to customize Magento for your\n * needs please refer to http:\/\/www.magento.com for more information.\n *\n * @category    Mage\n * @package     Mage_CatalogSearch\n * @copyright  Copyright (c) 2006-2016 X.commerce, Inc. and affiliates (http:\/\/www.magento.com)\n * @license    http:\/\/opensource.org\/licenses\/osl-3.0.php  Open Software License (OSL 3.0)\n *\/",2],["T_WHITESPACE","\n\n",25],["T_DOC_COMMENT","\/**\n * Catalog advanced search model\n *\n * @method Mage_CatalogSearch_Model_Resource_Advanced _getResource()\n * @method Mage_CatalogSearch_Model_Resource_Advanced getResource()\n * @method int getEntityTypeId()\n * @method Mage_CatalogSearch_Model_Advanced setEntityTypeId(int $value)\n * @method int getAttributeSetId()\n * @method Mage_CatalogSearch_Model_Advanced setAttributeSetId(int $value)\n * @method string getTypeId()\n * @method Mage_CatalogSearch_Model_Advanced setTypeId(string $value)\n * @method string getSku()\n * @method Mage_CatalogSearch_Model_Advanced setSku(string $value)\n * @method int getHasOptions()\n * @method Mage_CatalogSearch_Model_Advanced setHasOptions(int $value)\n * @method int getRequiredOptions()\n * @method Mage_CatalogSearch_Model_Advanced setRequiredOptions(int $value)\n * @method string getCreatedAt()\n * @method Mage_CatalogSearch_Model_Advanced setCreatedAt(string $value)\n * @method string getUpdatedAt()\n * @method Mage_CatalogSearch_Model_Advanced setUpdatedAt(string $value)\n *\n * @category    Mage\n * @package     Mage_CatalogSearch\n * @author      Magento Core Team <core@magentocommerce.com>\n *\/",27],["T_WHITESPACE","\n",52],["T_CLASS","class",53],["T_WHITESPACE"," ",53],["T_STRING","Mage_CatalogSearch_Model_Advanced",53],["T_WHITESPACE"," ",53],["T_EXTENDS","extends",53],["T_WHITESPACE"," ",53],["T_STRING","Mage_Core_Model_Abstract",53],["T_WHITESPACE","\n",53],"{",["T_WHITESPACE","\n    ",54],["T_DOC_COMMENT","\/**\n     * User friendly search criteria list\n     *\n     * @var array\n     *\/",55],["T_WHITESPACE","\n    ",59],["T_PROTECTED","protected",60],["T_WHITESPACE"," ",60],["T_VARIABLE","$_searchCriterias",60],["T_WHITESPACE"," ",60],"=",["T_WHITESPACE"," ",60],["T_ARRAY","array",60],"(",")",";",["T_WHITESPACE","\n\n    ",60],["T_DOC_COMMENT","\/**\n     * Current search engine\n     *\n     * @var object|Mage_CatalogSearch_Model_Resource_Fulltext_Engine\n     *\/",62],["T_WHITESPACE","\n    ",66],["T_PROTECTED","protected",67],["T_WHITESPACE"," ",67],["T_VARIABLE","$_engine",67],";",["T_WHITESPACE","\n\n    ",67],["T_DOC_COMMENT","\/**\n     * Found products collection\n     *\n     * @var Mage_CatalogSearch_Model_Resource_Advanced_Collection\n     *\/",69],["T_WHITESPACE","\n    ",73],["T_PROTECTED","protected",74],["T_WHITESPACE"," ",74],["T_VARIABLE","$_productCollection",74],";",["T_WHITESPACE","\n\n    ",74],["T_DOC_COMMENT","\/**\n     * Initialize resource model\n     *\n     *\/",76],["T_WHITESPACE","\n    ",79],["T_PROTECTED","protected",80],["T_WHITESPACE"," ",80],["T_FUNCTION","function",80],["T_WHITESPACE"," ",80],["T_STRING","_construct",80],"(",")",["T_WHITESPACE","\n    ",80],"{",["T_WHITESPACE","\n        ",81],["T_VARIABLE","$this",82],["T_OBJECT_OPERATOR","->",82],["T_STRING","_getEngine",82],"(",")",";",["T_WHITESPACE","\n        ",82],["T_VARIABLE","$this",83],["T_OBJECT_OPERATOR","->",83],["T_STRING","_init",83],"(",["T_CONSTANT_ENCAPSED_STRING","'catalogsearch\/advanced'",83],")",";",["T_WHITESPACE","\n    ",83],"}",["T_WHITESPACE","\n\n    ",84],["T_PROTECTED","protected",86],["T_WHITESPACE"," ",86],["T_FUNCTION","function",86],["T_WHITESPACE"," ",86],["T_STRING","_getEngine",86],"(",")",["T_WHITESPACE","\n    ",86],"{",["T_WHITESPACE","\n        ",87],["T_IF","if",88],["T_WHITESPACE"," ",88],"(",["T_VARIABLE","$this",88],["T_OBJECT_OPERATOR","->",88],["T_STRING","_engine",88],["T_WHITESPACE"," ",88],["T_IS_EQUAL","==",88],["T_WHITESPACE"," ",88],["T_STRING","null",88],")",["T_WHITESPACE"," ",88],"{",["T_WHITESPACE","\n            ",88],["T_VARIABLE","$this",89],["T_OBJECT_OPERATOR","->",89],["T_STRING","_engine",89],["T_WHITESPACE"," ",89],"=",["T_WHITESPACE"," ",89],["T_STRING","Mage",89],["T_DOUBLE_COLON","::",89],["T_STRING","helper",89],"(",["T_CONSTANT_ENCAPSED_STRING","'catalogsearch'",89],")",["T_OBJECT_OPERATOR","->",89],["T_STRING","getEngine",89],"(",")",";",["T_WHITESPACE","\n        ",89],"}",["T_WHITESPACE","\n\n        ",90],["T_RETURN","return",92],["T_WHITESPACE"," ",92],["T_VARIABLE","$this",92],["T_OBJECT_OPERATOR","->",92],["T_STRING","_engine",92],";",["T_WHITESPACE","\n    ",92],"}",["T_WHITESPACE","\n\n    ",93],["T_DOC_COMMENT","\/**\n     * Retrieve resource instance wrapper\n     *\n     * @return Mage_CatalogSearch_Model_Resource_Advanced\n     *\/",95],["T_WHITESPACE","\n    ",99],["T_PROTECTED","protected",100],["T_WHITESPACE"," ",100],["T_FUNCTION","function",100],["T_WHITESPACE"," ",100],["T_STRING","_getResource",100],"(",")",["T_WHITESPACE","\n    ",100],"{",["T_WHITESPACE","\n        ",101],["T_VARIABLE","$resourceName",102],["T_WHITESPACE"," ",102],"=",["T_WHITESPACE"," ",102],["T_VARIABLE","$this",102],["T_OBJECT_OPERATOR","->",102],["T_STRING","_engine",102],["T_OBJECT_OPERATOR","->",102],["T_STRING","getResourceName",102],"(",")",";",["T_WHITESPACE","\n        ",102],["T_IF","if",103],["T_WHITESPACE"," ",103],"(",["T_VARIABLE","$resourceName",103],")",["T_WHITESPACE"," ",103],"{",["T_WHITESPACE","\n            ",103],["T_VARIABLE","$this",104],["T_OBJECT_OPERATOR","->",104],["T_STRING","_resourceName",104],["T_WHITESPACE"," ",104],"=",["T_WHITESPACE"," ",104],["T_VARIABLE","$resourceName",104],";",["T_WHITESPACE","\n        ",104],"}",["T_WHITESPACE","\n        ",105],["T_RETURN","return",106],["T_WHITESPACE"," ",106],["T_STRING","parent",106],["T_DOUBLE_COLON","::",106],["T_STRING","_getResource",106],"(",")",";",["T_WHITESPACE","\n    ",106],"}",["T_WHITESPACE","\n\n    ",107],["T_DOC_COMMENT","\/**\n     * Retrieve array of attributes used in advanced search\n     *\n     * @return array\n     *\/",109],["T_WHITESPACE","\n    ",113],["T_PUBLIC","public",114],["T_WHITESPACE"," ",114],["T_FUNCTION","function",114],["T_WHITESPACE"," ",114],["T_STRING","getAttributes",114],"(",")",["T_WHITESPACE","\n    ",114],"{",["T_WHITESPACE","\n        ",115],["T_COMMENT","\/* @var $attributes Mage_Catalog_Model_Resource_Eav_Resource_Product_Attribute_Collection *\/",116],["T_WHITESPACE","\n        ",116],["T_VARIABLE","$attributes",117],["T_WHITESPACE"," ",117],"=",["T_WHITESPACE"," ",117],["T_VARIABLE","$this",117],["T_OBJECT_OPERATOR","->",117],["T_STRING","getData",117],"(",["T_CONSTANT_ENCAPSED_STRING","'attributes'",117],")",";",["T_WHITESPACE","\n        ",117],["T_IF","if",118],["T_WHITESPACE"," ",118],"(",["T_STRING","is_null",118],"(",["T_VARIABLE","$attributes",118],")",")",["T_WHITESPACE"," ",118],"{",["T_WHITESPACE","\n            ",118],["T_VARIABLE","$product",119],["T_WHITESPACE"," ",119],"=",["T_WHITESPACE"," ",119],["T_STRING","Mage",119],["T_DOUBLE_COLON","::",119],["T_STRING","getModel",119],"(",["T_CONSTANT_ENCAPSED_STRING","'catalog\/product'",119],")",";",["T_WHITESPACE","\n            ",119],["T_VARIABLE","$attributes",120],["T_WHITESPACE"," ",120],"=",["T_WHITESPACE"," ",120],["T_STRING","Mage",120],["T_DOUBLE_COLON","::",120],["T_STRING","getResourceModel",120],"(",["T_CONSTANT_ENCAPSED_STRING","'catalog\/product_attribute_collection'",120],")",["T_WHITESPACE","\n                ",120],["T_OBJECT_OPERATOR","->",121],["T_STRING","addHasOptionsFilter",121],"(",")",["T_WHITESPACE","\n                ",121],["T_OBJECT_OPERATOR","->",122],["T_STRING","addDisplayInAdvancedSearchFilter",122],"(",")",["T_WHITESPACE","\n                ",122],["T_OBJECT_OPERATOR","->",123],["T_STRING","addStoreLabel",123],"(",["T_STRING","Mage",123],["T_DOUBLE_COLON","::",123],["T_STRING","app",123],"(",")",["T_OBJECT_OPERATOR","->",123],["T_STRING","getStore",123],"(",")",["T_OBJECT_OPERATOR","->",123],["T_STRING","getId",123],"(",")",")",["T_WHITESPACE","\n                ",123],["T_OBJECT_OPERATOR","->",124],["T_STRING","setOrder",124],"(",["T_CONSTANT_ENCAPSED_STRING","'main_table.attribute_id'",124],",",["T_WHITESPACE"," ",124],["T_CONSTANT_ENCAPSED_STRING","'asc'",124],")",["T_WHITESPACE","\n                ",124],["T_OBJECT_OPERATOR","->",125],["T_STRING","load",125],"(",")",";",["T_WHITESPACE","\n            ",125],["T_FOREACH","foreach",126],["T_WHITESPACE"," ",126],"(",["T_VARIABLE","$attributes",126],["T_WHITESPACE"," ",126],["T_AS","as",126],["T_WHITESPACE"," ",126],["T_VARIABLE","$attribute",126],")",["T_WHITESPACE"," ",126],"{",["T_WHITESPACE","\n                ",126],["T_VARIABLE","$attribute",127],["T_OBJECT_OPERATOR","->",127],["T_STRING","setEntity",127],"(",["T_VARIABLE","$product",127],["T_OBJECT_OPERATOR","->",127],["T_STRING","getResource",127],"(",")",")",";",["T_WHITESPACE","\n            ",127],"}",["T_WHITESPACE","\n            ",128],["T_VARIABLE","$this",129],["T_OBJECT_OPERATOR","->",129],["T_STRING","setData",129],"(",["T_CONSTANT_ENCAPSED_STRING","'attributes'",129],",",["T_WHITESPACE"," ",129],["T_VARIABLE","$attributes",129],")",";",["T_WHITESPACE","\n        ",129],"}",["T_WHITESPACE","\n        ",130],["T_RETURN","return",131],["T_WHITESPACE"," ",131],["T_VARIABLE","$attributes",131],";",["T_WHITESPACE","\n    ",131],"}",["T_WHITESPACE","\n\n    ",132],["T_DOC_COMMENT","\/**\n     * Prepare search condition for attribute\n     *\n     * @deprecated after 1.4.1.0 - use Mage_CatalogSearch_Model_Resource_Advanced->_prepareCondition()\n     *\n     * @param Mage_Catalog_Model_Resource_Eav_Attribute $attribute\n     * @param string|array $value\n     * @return mixed\n     *\/",134],["T_WHITESPACE","\n    ",142],["T_PROTECTED","protected",143],["T_WHITESPACE"," ",143],["T_FUNCTION","function",143],["T_WHITESPACE"," ",143],["T_STRING","_prepareCondition",143],"(",["T_VARIABLE","$attribute",143],",",["T_WHITESPACE"," ",143],["T_VARIABLE","$value",143],")",["T_WHITESPACE","\n    ",143],"{",["T_WHITESPACE","\n        ",144],["T_RETURN","return",145],["T_WHITESPACE"," ",145],["T_VARIABLE","$this",145],["T_OBJECT_OPERATOR","->",145],["T_STRING","_getResource",145],"(",")",["T_OBJECT_OPERATOR","->",145],["T_STRING","prepareCondition",145],"(",["T_VARIABLE","$attribute",145],",",["T_WHITESPACE"," ",145],["T_VARIABLE","$value",145],",",["T_WHITESPACE"," ",145],["T_VARIABLE","$this",145],["T_OBJECT_OPERATOR","->",145],["T_STRING","getProductCollection",145],"(",")",")",";",["T_WHITESPACE","\n    ",145],"}",["T_WHITESPACE","\n\n    ",146],["T_DOC_COMMENT","\/**\n     * Add advanced search filters to product collection\n     *\n     * @param   array $values\n     * @return  Mage_CatalogSearch_Model_Advanced\n     *\/",148],["T_WHITESPACE","\n    ",153],["T_PUBLIC","public",154],["T_WHITESPACE"," ",154],["T_FUNCTION","function",154],["T_WHITESPACE"," ",154],["T_STRING","addFilters",154],"(",["T_VARIABLE","$values",154],")",["T_WHITESPACE","\n    ",154],"{",["T_WHITESPACE","\n        ",155],["T_VARIABLE","$attributes",156],["T_WHITESPACE","     ",156],"=",["T_WHITESPACE"," ",156],["T_VARIABLE","$this",156],["T_OBJECT_OPERATOR","->",156],["T_STRING","getAttributes",156],"(",")",";",["T_WHITESPACE","\n        ",156],["T_VARIABLE","$hasConditions",157],["T_WHITESPACE","  ",157],"=",["T_WHITESPACE"," ",157],["T_STRING","false",157],";",["T_WHITESPACE","\n        ",157],["T_VARIABLE","$allConditions",158],["T_WHITESPACE","  ",158],"=",["T_WHITESPACE"," ",158],["T_ARRAY","array",158],"(",")",";",["T_WHITESPACE","\n\n        ",158],["T_FOREACH","foreach",160],["T_WHITESPACE"," ",160],"(",["T_VARIABLE","$attributes",160],["T_WHITESPACE"," ",160],["T_AS","as",160],["T_WHITESPACE"," ",160],["T_VARIABLE","$attribute",160],")",["T_WHITESPACE"," ",160],"{",["T_WHITESPACE","\n            ",160],["T_COMMENT","\/* @var $attribute Mage_Catalog_Model_Resource_Eav_Attribute *\/",161],["T_WHITESPACE","\n            ",161],["T_IF","if",162],["T_WHITESPACE"," ",162],"(","!",["T_ISSET","isset",162],"(",["T_VARIABLE","$values",162],"[",["T_VARIABLE","$attribute",162],["T_OBJECT_OPERATOR","->",162],["T_STRING","getAttributeCode",162],"(",")","]",")",")",["T_WHITESPACE"," ",162],"{",["T_WHITESPACE","\n                ",162],["T_CONTINUE","continue",163],";",["T_WHITESPACE","\n            ",163],"}",["T_WHITESPACE","\n            ",164],["T_VARIABLE","$value",165],["T_WHITESPACE"," ",165],"=",["T_WHITESPACE"," ",165],["T_VARIABLE","$values",165],"[",["T_VARIABLE","$attribute",165],["T_OBJECT_OPERATOR","->",165],["T_STRING","getAttributeCode",165],"(",")","]",";",["T_WHITESPACE","\n            ",165],["T_IF","if",166],["T_WHITESPACE"," ",166],"(","!",["T_STRING","is_array",166],"(",["T_VARIABLE","$value",166],")",")",["T_WHITESPACE"," ",166],"{",["T_WHITESPACE","\n                ",166],["T_VARIABLE","$value",167],["T_WHITESPACE"," ",167],"=",["T_WHITESPACE"," ",167],["T_STRING","trim",167],"(",["T_VARIABLE","$value",167],")",";",["T_WHITESPACE","\n            ",167],"}",["T_WHITESPACE","\n\n            ",168],["T_IF","if",170],["T_WHITESPACE"," ",170],"(",["T_VARIABLE","$attribute",170],["T_OBJECT_OPERATOR","->",170],["T_STRING","getAttributeCode",170],"(",")",["T_WHITESPACE"," ",170],["T_IS_EQUAL","==",170],["T_WHITESPACE"," ",170],["T_CONSTANT_ENCAPSED_STRING","'price'",170],")",["T_WHITESPACE"," ",170],"{",["T_WHITESPACE","\n                ",170],["T_VARIABLE","$value",171],"[",["T_CONSTANT_ENCAPSED_STRING","'from'",171],"]",["T_WHITESPACE"," ",171],"=",["T_WHITESPACE"," ",171],["T_ISSET","isset",171],"(",["T_VARIABLE","$value",171],"[",["T_CONSTANT_ENCAPSED_STRING","'from'",171],"]",")",["T_WHITESPACE"," ",171],"?",["T_WHITESPACE"," ",171],["T_STRING","trim",171],"(",["T_VARIABLE","$value",171],"[",["T_CONSTANT_ENCAPSED_STRING","'from'",171],"]",")",["T_WHITESPACE"," ",171],":",["T_WHITESPACE"," ",171],["T_CONSTANT_ENCAPSED_STRING","''",171],";",["T_WHITESPACE","\n                ",171],["T_VARIABLE","$value",172],"[",["T_CONSTANT_ENCAPSED_STRING","'to'",172],"]",["T_WHITESPACE"," ",172],"=",["T_WHITESPACE"," ",172],["T_ISSET","isset",172],"(",["T_VARIABLE","$value",172],"[",["T_CONSTANT_ENCAPSED_STRING","'to'",172],"]",")",["T_WHITESPACE"," ",172],"?",["T_WHITESPACE"," ",172],["T_STRING","trim",172],"(",["T_VARIABLE","$value",172],"[",["T_CONSTANT_ENCAPSED_STRING","'to'",172],"]",")",["T_WHITESPACE"," ",172],":",["T_WHITESPACE"," ",172],["T_CONSTANT_ENCAPSED_STRING","''",172],";",["T_WHITESPACE","\n                ",172],["T_IF","if",173],["T_WHITESPACE"," ",173],"(",["T_STRING","is_numeric",173],"(",["T_VARIABLE","$value",173],"[",["T_CONSTANT_ENCAPSED_STRING","'from'",173],"]",")",["T_WHITESPACE"," ",173],["T_BOOLEAN_OR","||",173],["T_WHITESPACE"," ",173],["T_STRING","is_numeric",173],"(",["T_VARIABLE","$value",173],"[",["T_CONSTANT_ENCAPSED_STRING","'to'",173],"]",")",")",["T_WHITESPACE"," ",173],"{",["T_WHITESPACE","\n                    ",173],["T_IF","if",174],["T_WHITESPACE"," ",174],"(","!",["T_EMPTY","empty",174],"(",["T_VARIABLE","$value",174],"[",["T_CONSTANT_ENCAPSED_STRING","'currency'",174],"]",")",")",["T_WHITESPACE"," ",174],"{",["T_WHITESPACE","\n                        ",174],["T_VARIABLE","$rate",175],["T_WHITESPACE"," ",175],"=",["T_WHITESPACE"," ",175],["T_STRING","Mage",175],["T_DOUBLE_COLON","::",175],["T_STRING","app",175],"(",")",["T_OBJECT_OPERATOR","->",175],["T_STRING","getStore",175],"(",")",["T_OBJECT_OPERATOR","->",175],["T_STRING","getBaseCurrency",175],"(",")",["T_OBJECT_OPERATOR","->",175],["T_STRING","getRate",175],"(",["T_VARIABLE","$value",175],"[",["T_CONSTANT_ENCAPSED_STRING","'currency'",175],"]",")",";",["T_WHITESPACE","\n                    ",175],"}",["T_WHITESPACE"," ",176],["T_ELSE","else",176],["T_WHITESPACE"," ",176],"{",["T_WHITESPACE","\n                        ",176],["T_VARIABLE","$rate",177],["T_WHITESPACE"," ",177],"=",["T_WHITESPACE"," ",177],["T_LNUMBER","1",177],";",["T_WHITESPACE","\n                    ",177],"}",["T_WHITESPACE","\n                    ",178],["T_IF","if",179],["T_WHITESPACE"," ",179],"(",["T_VARIABLE","$this",179],["T_OBJECT_OPERATOR","->",179],["T_STRING","_getResource",179],"(",")",["T_OBJECT_OPERATOR","->",179],["T_STRING","addRatedPriceFilter",179],"(",["T_WHITESPACE","\n                        ",179],["T_VARIABLE","$this",180],["T_OBJECT_OPERATOR","->",180],["T_STRING","getProductCollection",180],"(",")",",",["T_WHITESPACE"," ",180],["T_VARIABLE","$attribute",180],",",["T_WHITESPACE"," ",180],["T_VARIABLE","$value",180],",",["T_WHITESPACE"," ",180],["T_VARIABLE","$rate",180],")",["T_WHITESPACE","\n                    ",180],")",["T_WHITESPACE"," ",181],"{",["T_WHITESPACE","\n                        ",181],["T_VARIABLE","$hasConditions",182],["T_WHITESPACE"," ",182],"=",["T_WHITESPACE"," ",182],["T_STRING","true",182],";",["T_WHITESPACE","\n                        ",182],["T_VARIABLE","$this",183],["T_OBJECT_OPERATOR","->",183],["T_STRING","_addSearchCriteria",183],"(",["T_VARIABLE","$attribute",183],",",["T_WHITESPACE"," ",183],["T_VARIABLE","$value",183],")",";",["T_WHITESPACE","\n                    ",183],"}",["T_WHITESPACE","\n                ",184],"}",["T_WHITESPACE","\n            ",185],"}",["T_WHITESPACE"," ",186],["T_ELSE","else",186],["T_WHITESPACE"," ",186],["T_IF","if",186],["T_WHITESPACE"," ",186],"(",["T_VARIABLE","$attribute",186],["T_OBJECT_OPERATOR","->",186],["T_STRING","isIndexable",186],"(",")",")",["T_WHITESPACE"," ",186],"{",["T_WHITESPACE","\n                ",186],["T_IF","if",187],["T_WHITESPACE"," ",187],"(","!",["T_STRING","is_string",187],"(",["T_VARIABLE","$value",187],")",["T_WHITESPACE"," ",187],["T_BOOLEAN_OR","||",187],["T_WHITESPACE"," ",187],["T_STRING","strlen",187],"(",["T_VARIABLE","$value",187],")",["T_WHITESPACE"," ",187],["T_IS_NOT_EQUAL","!=",187],["T_WHITESPACE"," ",187],["T_LNUMBER","0",187],")",["T_WHITESPACE"," ",187],"{",["T_WHITESPACE","\n                    ",187],["T_IF","if",188],["T_WHITESPACE"," ",188],"(",["T_VARIABLE","$this",188],["T_OBJECT_OPERATOR","->",188],["T_STRING","_getResource",188],"(",")",["T_OBJECT_OPERATOR","->",188],["T_STRING","addIndexableAttributeModifiedFilter",188],"(",["T_WHITESPACE","\n                        ",188],["T_VARIABLE","$this",189],["T_OBJECT_OPERATOR","->",189],["T_STRING","getProductCollection",189],"(",")",",",["T_WHITESPACE"," ",189],["T_VARIABLE","$attribute",189],",",["T_WHITESPACE"," ",189],["T_VARIABLE","$value",189],")",")",["T_WHITESPACE"," ",189],"{",["T_WHITESPACE","\n                        ",189],["T_VARIABLE","$hasConditions",190],["T_WHITESPACE"," ",190],"=",["T_WHITESPACE"," ",190],["T_STRING","true",190],";",["T_WHITESPACE","\n                        ",190],["T_VARIABLE","$this",191],["T_OBJECT_OPERATOR","->",191],["T_STRING","_addSearchCriteria",191],"(",["T_VARIABLE","$attribute",191],",",["T_WHITESPACE"," ",191],["T_VARIABLE","$value",191],")",";",["T_WHITESPACE","\n                    ",191],"}",["T_WHITESPACE","\n                ",192],"}",["T_WHITESPACE","\n            ",193],"}",["T_WHITESPACE"," ",194],["T_ELSE","else",194],["T_WHITESPACE"," ",194],"{",["T_WHITESPACE","\n                ",194],["T_VARIABLE","$condition",195],["T_WHITESPACE"," ",195],"=",["T_WHITESPACE"," ",195],["T_VARIABLE","$this",195],["T_OBJECT_OPERATOR","->",195],["T_STRING","_prepareCondition",195],"(",["T_VARIABLE","$attribute",195],",",["T_WHITESPACE"," ",195],["T_VARIABLE","$value",195],")",";",["T_WHITESPACE","\n                ",195],["T_IF","if",196],["T_WHITESPACE"," ",196],"(",["T_VARIABLE","$condition",196],["T_WHITESPACE"," ",196],["T_IS_IDENTICAL","===",196],["T_WHITESPACE"," ",196],["T_STRING","false",196],")",["T_WHITESPACE"," ",196],"{",["T_WHITESPACE","\n                    ",196],["T_CONTINUE","continue",197],";",["T_WHITESPACE","\n                ",197],"}",["T_WHITESPACE","\n\n                ",198],["T_VARIABLE","$this",200],["T_OBJECT_OPERATOR","->",200],["T_STRING","_addSearchCriteria",200],"(",["T_VARIABLE","$attribute",200],",",["T_WHITESPACE"," ",200],["T_VARIABLE","$value",200],")",";",["T_WHITESPACE","\n\n                ",200],["T_VARIABLE","$table",202],["T_WHITESPACE"," ",202],"=",["T_WHITESPACE"," ",202],["T_VARIABLE","$attribute",202],["T_OBJECT_OPERATOR","->",202],["T_STRING","getBackend",202],"(",")",["T_OBJECT_OPERATOR","->",202],["T_STRING","getTable",202],"(",")",";",["T_WHITESPACE","\n                ",202],["T_IF","if",203],["T_WHITESPACE"," ",203],"(",["T_VARIABLE","$attribute",203],["T_OBJECT_OPERATOR","->",203],["T_STRING","getBackendType",203],"(",")",["T_WHITESPACE"," ",203],["T_IS_EQUAL","==",203],["T_WHITESPACE"," ",203],["T_CONSTANT_ENCAPSED_STRING","'static'",203],")","{",["T_WHITESPACE","\n                    ",203],["T_VARIABLE","$attributeId",204],["T_WHITESPACE"," ",204],"=",["T_WHITESPACE"," ",204],["T_VARIABLE","$attribute",204],["T_OBJECT_OPERATOR","->",204],["T_STRING","getAttributeCode",204],"(",")",";",["T_WHITESPACE","\n                ",204],"}",["T_WHITESPACE"," ",205],["T_ELSE","else",205],["T_WHITESPACE"," ",205],"{",["T_WHITESPACE","\n                    ",205],["T_VARIABLE","$attributeId",206],["T_WHITESPACE"," ",206],"=",["T_WHITESPACE"," ",206],["T_VARIABLE","$attribute",206],["T_OBJECT_OPERATOR","->",206],["T_STRING","getId",206],"(",")",";",["T_WHITESPACE","\n                ",206],"}",["T_WHITESPACE","\n                ",207],["T_VARIABLE","$allConditions",208],"[",["T_VARIABLE","$table",208],"]","[",["T_VARIABLE","$attributeId",208],"]",["T_WHITESPACE"," ",208],"=",["T_WHITESPACE"," ",208],["T_VARIABLE","$condition",208],";",["T_WHITESPACE","\n            ",208],"}",["T_WHITESPACE","\n        ",209],"}",["T_WHITESPACE","\n        ",210],["T_IF","if",211],["T_WHITESPACE"," ",211],"(",["T_VARIABLE","$allConditions",211],")",["T_WHITESPACE"," ",211],"{",["T_WHITESPACE","\n            ",211],["T_VARIABLE","$this",212],["T_OBJECT_OPERATOR","->",212],["T_STRING","getProductCollection",212],"(",")",["T_OBJECT_OPERATOR","->",212],["T_STRING","addFieldsToFilter",212],"(",["T_VARIABLE","$allConditions",212],")",";",["T_WHITESPACE","\n        ",212],"}",["T_WHITESPACE"," ",213],["T_ELSE","else",213],["T_WHITESPACE"," ",213],["T_IF","if",213],["T_WHITESPACE"," ",213],"(","!",["T_VARIABLE","$hasConditions",213],")",["T_WHITESPACE"," ",213],"{",["T_WHITESPACE","\n            ",213],["T_STRING","Mage",214],["T_DOUBLE_COLON","::",214],["T_STRING","throwException",214],"(",["T_STRING","Mage",214],["T_DOUBLE_COLON","::",214],["T_STRING","helper",214],"(",["T_CONSTANT_ENCAPSED_STRING","'catalogsearch'",214],")",["T_OBJECT_OPERATOR","->",214],["T_STRING","__",214],"(",["T_CONSTANT_ENCAPSED_STRING","'Please specify at least one search term.'",214],")",")",";",["T_WHITESPACE","\n        ",214],"}",["T_WHITESPACE","\n\n        ",215],["T_RETURN","return",217],["T_WHITESPACE"," ",217],["T_VARIABLE","$this",217],";",["T_WHITESPACE","\n    ",217],"}",["T_WHITESPACE","\n\n    ",218],["T_DOC_COMMENT","\/**\n     * Add data about search criteria to object state\n     *\n     * @param   Mage_Eav_Model_Entity_Attribute $attribute\n     * @param   mixed $value\n     * @return  Mage_CatalogSearch_Model_Advanced\n     *\/",220],["T_WHITESPACE","\n    ",226],["T_PROTECTED","protected",227],["T_WHITESPACE"," ",227],["T_FUNCTION","function",227],["T_WHITESPACE"," ",227],["T_STRING","_addSearchCriteria",227],"(",["T_VARIABLE","$attribute",227],",",["T_WHITESPACE"," ",227],["T_VARIABLE","$value",227],")",["T_WHITESPACE","\n    ",227],"{",["T_WHITESPACE","\n        ",228],["T_VARIABLE","$name",229],["T_WHITESPACE"," ",229],"=",["T_WHITESPACE"," ",229],["T_VARIABLE","$attribute",229],["T_OBJECT_OPERATOR","->",229],["T_STRING","getStoreLabel",229],"(",")",";",["T_WHITESPACE","\n\n        ",229],["T_IF","if",231],["T_WHITESPACE"," ",231],"(",["T_STRING","is_array",231],"(",["T_VARIABLE","$value",231],")",")",["T_WHITESPACE"," ",231],"{",["T_WHITESPACE","\n            ",231],["T_IF","if",232],["T_WHITESPACE"," ",232],"(",["T_ISSET","isset",232],"(",["T_VARIABLE","$value",232],"[",["T_CONSTANT_ENCAPSED_STRING","'from'",232],"]",")",["T_WHITESPACE"," ",232],["T_BOOLEAN_AND","&&",232],["T_WHITESPACE"," ",232],["T_ISSET","isset",232],"(",["T_VARIABLE","$value",232],"[",["T_CONSTANT_ENCAPSED_STRING","'to'",232],"]",")",")",["T_WHITESPACE"," ",232],"{",["T_WHITESPACE","\n                ",232],["T_IF","if",233],["T_WHITESPACE"," ",233],"(","!",["T_EMPTY","empty",233],"(",["T_VARIABLE","$value",233],"[",["T_CONSTANT_ENCAPSED_STRING","'from'",233],"]",")",["T_WHITESPACE"," ",233],["T_BOOLEAN_OR","||",233],["T_WHITESPACE"," ",233],"!",["T_EMPTY","empty",233],"(",["T_VARIABLE","$value",233],"[",["T_CONSTANT_ENCAPSED_STRING","'to'",233],"]",")",")",["T_WHITESPACE"," ",233],"{",["T_WHITESPACE","\n                    ",233],["T_IF","if",234],["T_WHITESPACE"," ",234],"(",["T_ISSET","isset",234],"(",["T_VARIABLE","$value",234],"[",["T_CONSTANT_ENCAPSED_STRING","'currency'",234],"]",")",")",["T_WHITESPACE"," ",234],"{",["T_WHITESPACE","\n                        ",234],["T_VARIABLE","$currencyModel",235],["T_WHITESPACE"," ",235],"=",["T_WHITESPACE"," ",235],["T_STRING","Mage",235],["T_DOUBLE_COLON","::",235],["T_STRING","getModel",235],"(",["T_CONSTANT_ENCAPSED_STRING","'directory\/currency'",235],")",["T_OBJECT_OPERATOR","->",235],["T_STRING","load",235],"(",["T_VARIABLE","$value",235],"[",["T_CONSTANT_ENCAPSED_STRING","'currency'",235],"]",")",";",["T_WHITESPACE","\n                        ",235],["T_VARIABLE","$from",236],["T_WHITESPACE"," ",236],"=",["T_WHITESPACE"," ",236],["T_VARIABLE","$currencyModel",236],["T_OBJECT_OPERATOR","->",236],["T_STRING","format",236],"(",["T_VARIABLE","$value",236],"[",["T_CONSTANT_ENCAPSED_STRING","'from'",236],"]",",",["T_WHITESPACE"," ",236],["T_ARRAY","array",236],"(",")",",",["T_WHITESPACE"," ",236],["T_STRING","false",236],")",";",["T_WHITESPACE","\n                        ",236],["T_VARIABLE","$to",237],["T_WHITESPACE"," ",237],"=",["T_WHITESPACE"," ",237],["T_VARIABLE","$currencyModel",237],["T_OBJECT_OPERATOR","->",237],["T_STRING","format",237],"(",["T_VARIABLE","$value",237],"[",["T_CONSTANT_ENCAPSED_STRING","'to'",237],"]",",",["T_WHITESPACE"," ",237],["T_ARRAY","array",237],"(",")",",",["T_WHITESPACE"," ",237],["T_STRING","false",237],")",";",["T_WHITESPACE","\n                    ",237],"}",["T_WHITESPACE"," ",238],["T_ELSE","else",238],["T_WHITESPACE"," ",238],"{",["T_WHITESPACE","\n                        ",238],["T_VARIABLE","$currencyModel",239],["T_WHITESPACE"," ",239],"=",["T_WHITESPACE"," ",239],["T_STRING","null",239],";",["T_WHITESPACE","\n                    ",239],"}",["T_WHITESPACE","\n\n                    ",240],["T_IF","if",242],["T_WHITESPACE"," ",242],"(",["T_STRING","strlen",242],"(",["T_VARIABLE","$value",242],"[",["T_CONSTANT_ENCAPSED_STRING","'from'",242],"]",")",["T_WHITESPACE"," ",242],">",["T_WHITESPACE"," ",242],["T_LNUMBER","0",242],["T_WHITESPACE"," ",242],["T_BOOLEAN_AND","&&",242],["T_WHITESPACE"," ",242],["T_STRING","strlen",242],"(",["T_VARIABLE","$value",242],"[",["T_CONSTANT_ENCAPSED_STRING","'to'",242],"]",")",["T_WHITESPACE"," ",242],">",["T_WHITESPACE"," ",242],["T_LNUMBER","0",242],")",["T_WHITESPACE"," ",242],"{",["T_WHITESPACE","\n                        ",242],["T_COMMENT","\/\/ -\n",243],["T_WHITESPACE","                        ",244],["T_VARIABLE","$value",244],["T_WHITESPACE"," ",244],"=",["T_WHITESPACE"," ",244],["T_STRING","sprintf",244],"(",["T_CONSTANT_ENCAPSED_STRING","'%s - %s'",244],",",["T_WHITESPACE","\n                            ",244],"(",["T_VARIABLE","$currencyModel",245],["T_WHITESPACE"," ",245],"?",["T_WHITESPACE"," ",245],["T_VARIABLE","$from",245],["T_WHITESPACE"," ",245],":",["T_WHITESPACE"," ",245],["T_VARIABLE","$value",245],"[",["T_CONSTANT_ENCAPSED_STRING","'from'",245],"]",")",",",["T_WHITESPACE"," ",245],"(",["T_VARIABLE","$currencyModel",245],["T_WHITESPACE"," ",245],"?",["T_WHITESPACE"," ",245],["T_VARIABLE","$to",245],["T_WHITESPACE"," ",245],":",["T_WHITESPACE"," ",245],["T_VARIABLE","$value",245],"[",["T_CONSTANT_ENCAPSED_STRING","'to'",245],"]",")",")",";",["T_WHITESPACE","\n                    ",245],"}",["T_WHITESPACE"," ",246],["T_ELSEIF","elseif",246],["T_WHITESPACE"," ",246],"(",["T_STRING","strlen",246],"(",["T_VARIABLE","$value",246],"[",["T_CONSTANT_ENCAPSED_STRING","'from'",246],"]",")",["T_WHITESPACE"," ",246],">",["T_WHITESPACE"," ",246],["T_LNUMBER","0",246],")",["T_WHITESPACE"," ",246],"{",["T_WHITESPACE","\n                        ",246],["T_COMMENT","\/\/ and more\n",247],["T_WHITESPACE","                        ",248],["T_VARIABLE","$value",248],["T_WHITESPACE"," ",248],"=",["T_WHITESPACE"," ",248],["T_STRING","Mage",248],["T_DOUBLE_COLON","::",248],["T_STRING","helper",248],"(",["T_CONSTANT_ENCAPSED_STRING","'catalogsearch'",248],")",["T_OBJECT_OPERATOR","->",248],["T_STRING","__",248],"(",["T_CONSTANT_ENCAPSED_STRING","'%s and greater'",248],",",["T_WHITESPACE"," ",248],"(",["T_VARIABLE","$currencyModel",248],["T_WHITESPACE"," ",248],"?",["T_WHITESPACE"," ",248],["T_VARIABLE","$from",248],["T_WHITESPACE"," ",248],":",["T_WHITESPACE"," ",248],["T_VARIABLE","$value",248],"[",["T_CONSTANT_ENCAPSED_STRING","'from'",248],"]",")",")",";",["T_WHITESPACE","\n                    ",248],"}",["T_WHITESPACE"," ",249],["T_ELSEIF","elseif",249],["T_WHITESPACE"," ",249],"(",["T_STRING","strlen",249],"(",["T_VARIABLE","$value",249],"[",["T_CONSTANT_ENCAPSED_STRING","'to'",249],"]",")",["T_WHITESPACE"," ",249],">",["T_WHITESPACE"," ",249],["T_LNUMBER","0",249],")",["T_WHITESPACE"," ",249],"{",["T_WHITESPACE","\n                        ",249],["T_COMMENT","\/\/ to\n",250],["T_WHITESPACE","                        ",251],["T_VARIABLE","$value",251],["T_WHITESPACE"," ",251],"=",["T_WHITESPACE"," ",251],["T_STRING","Mage",251],["T_DOUBLE_COLON","::",251],["T_STRING","helper",251],"(",["T_CONSTANT_ENCAPSED_STRING","'catalogsearch'",251],")",["T_OBJECT_OPERATOR","->",251],["T_STRING","__",251],"(",["T_CONSTANT_ENCAPSED_STRING","'up to %s'",251],",",["T_WHITESPACE"," ",251],"(",["T_VARIABLE","$currencyModel",251],["T_WHITESPACE"," ",251],"?",["T_WHITESPACE"," ",251],["T_VARIABLE","$to",251],["T_WHITESPACE"," ",251],":",["T_WHITESPACE"," ",251],["T_VARIABLE","$value",251],"[",["T_CONSTANT_ENCAPSED_STRING","'to'",251],"]",")",")",";",["T_WHITESPACE","\n                    ",251],"}",["T_WHITESPACE","\n                ",252],"}",["T_WHITESPACE"," ",253],["T_ELSE","else",253],["T_WHITESPACE"," ",253],"{",["T_WHITESPACE","\n                    ",253],["T_RETURN","return",254],["T_WHITESPACE"," ",254],["T_VARIABLE","$this",254],";",["T_WHITESPACE","\n                ",254],"}",["T_WHITESPACE","\n            ",255],"}",["T_WHITESPACE","\n        ",256],"}",["T_WHITESPACE","\n\n        ",257],["T_IF","if",259],["T_WHITESPACE"," ",259],"(","(",["T_VARIABLE","$attribute",259],["T_OBJECT_OPERATOR","->",259],["T_STRING","getFrontendInput",259],"(",")",["T_WHITESPACE"," ",259],["T_IS_EQUAL","==",259],["T_WHITESPACE"," ",259],["T_CONSTANT_ENCAPSED_STRING","'select'",259],["T_WHITESPACE"," ",259],["T_BOOLEAN_OR","||",259],["T_WHITESPACE"," ",259],["T_VARIABLE","$attribute",259],["T_OBJECT_OPERATOR","->",259],["T_STRING","getFrontendInput",259],"(",")",["T_WHITESPACE"," ",259],["T_IS_EQUAL","==",259],["T_WHITESPACE"," ",259],["T_CONSTANT_ENCAPSED_STRING","'multiselect'",259],")",["T_WHITESPACE","\n            ",259],["T_BOOLEAN_AND","&&",260],["T_WHITESPACE"," ",260],["T_STRING","is_array",260],"(",["T_VARIABLE","$value",260],")",["T_WHITESPACE","\n        ",260],")",["T_WHITESPACE"," ",261],"{",["T_WHITESPACE","\n            ",261],["T_FOREACH","foreach",262],["T_WHITESPACE"," ",262],"(",["T_VARIABLE","$value",262],["T_WHITESPACE"," ",262],["T_AS","as",262],["T_WHITESPACE"," ",262],["T_VARIABLE","$key",262],["T_WHITESPACE"," ",262],["T_DOUBLE_ARROW","=>",262],["T_WHITESPACE"," ",262],["T_VARIABLE","$val",262],")","{",["T_WHITESPACE","\n                ",262],["T_VARIABLE","$value",263],"[",["T_VARIABLE","$key",263],"]",["T_WHITESPACE"," ",263],"=",["T_WHITESPACE"," ",263],["T_VARIABLE","$attribute",263],["T_OBJECT_OPERATOR","->",263],["T_STRING","getSource",263],"(",")",["T_OBJECT_OPERATOR","->",263],["T_STRING","getOptionText",263],"(",["T_VARIABLE","$val",263],")",";",["T_WHITESPACE","\n\n                ",263],["T_IF","if",265],["T_WHITESPACE"," ",265],"(",["T_STRING","is_array",265],"(",["T_VARIABLE","$value",265],"[",["T_VARIABLE","$key",265],"]",")",")",["T_WHITESPACE"," ",265],"{",["T_WHITESPACE","\n                    ",265],["T_VARIABLE","$value",266],"[",["T_VARIABLE","$key",266],"]",["T_WHITESPACE"," ",266],"=",["T_WHITESPACE"," ",266],["T_VARIABLE","$value",266],"[",["T_VARIABLE","$key",266],"]","[",["T_CONSTANT_ENCAPSED_STRING","'label'",266],"]",";",["T_WHITESPACE","\n                ",266],"}",["T_WHITESPACE","\n            ",267],"}",["T_WHITESPACE","\n            ",268],["T_VARIABLE","$value",269],["T_WHITESPACE"," ",269],"=",["T_WHITESPACE"," ",269],["T_STRING","implode",269],"(",["T_CONSTANT_ENCAPSED_STRING","', '",269],",",["T_WHITESPACE"," ",269],["T_VARIABLE","$value",269],")",";",["T_WHITESPACE","\n        ",269],"}",["T_WHITESPACE"," ",270],["T_ELSE","else",270],["T_WHITESPACE"," ",270],["T_IF","if",270],["T_WHITESPACE"," ",270],"(",["T_VARIABLE","$attribute",270],["T_OBJECT_OPERATOR","->",270],["T_STRING","getFrontendInput",270],"(",")",["T_WHITESPACE"," ",270],["T_IS_EQUAL","==",270],["T_WHITESPACE"," ",270],["T_CONSTANT_ENCAPSED_STRING","'select'",270],["T_WHITESPACE"," ",270],["T_BOOLEAN_OR","||",270],["T_WHITESPACE"," ",270],["T_VARIABLE","$attribute",270],["T_OBJECT_OPERATOR","->",270],["T_STRING","getFrontendInput",270],"(",")",["T_WHITESPACE"," ",270],["T_IS_EQUAL","==",270],["T_WHITESPACE"," ",270],["T_CONSTANT_ENCAPSED_STRING","'multiselect'",270],")",["T_WHITESPACE"," ",270],"{",["T_WHITESPACE","\n            ",270],["T_VARIABLE","$value",271],["T_WHITESPACE"," ",271],"=",["T_WHITESPACE"," ",271],["T_VARIABLE","$attribute",271],["T_OBJECT_OPERATOR","->",271],["T_STRING","getSource",271],"(",")",["T_OBJECT_OPERATOR","->",271],["T_STRING","getOptionText",271],"(",["T_VARIABLE","$value",271],")",";",["T_WHITESPACE","\n            ",271],["T_IF","if",272],["T_WHITESPACE"," ",272],"(",["T_STRING","is_array",272],"(",["T_VARIABLE","$value",272],")",")",["T_WHITESPACE","\n                ",272],["T_VARIABLE","$value",273],["T_WHITESPACE"," ",273],"=",["T_WHITESPACE"," ",273],["T_VARIABLE","$value",273],"[",["T_CONSTANT_ENCAPSED_STRING","'label'",273],"]",";",["T_WHITESPACE","\n        ",273],"}",["T_WHITESPACE"," ",274],["T_ELSE","else",274],["T_WHITESPACE"," ",274],["T_IF","if",274],["T_WHITESPACE"," ",274],"(",["T_VARIABLE","$attribute",274],["T_OBJECT_OPERATOR","->",274],["T_STRING","getFrontendInput",274],"(",")",["T_WHITESPACE"," ",274],["T_IS_EQUAL","==",274],["T_WHITESPACE"," ",274],["T_CONSTANT_ENCAPSED_STRING","'boolean'",274],")",["T_WHITESPACE"," ",274],"{",["T_WHITESPACE","\n            ",274],["T_VARIABLE","$value",275],["T_WHITESPACE"," ",275],"=",["T_WHITESPACE"," ",275],["T_VARIABLE","$value",275],["T_WHITESPACE"," ",275],["T_IS_EQUAL","==",275],["T_WHITESPACE"," ",275],["T_LNUMBER","1",275],["T_WHITESPACE","\n                ",275],"?",["T_WHITESPACE"," ",276],["T_STRING","Mage",276],["T_DOUBLE_COLON","::",276],["T_STRING","helper",276],"(",["T_CONSTANT_ENCAPSED_STRING","'catalogsearch'",276],")",["T_OBJECT_OPERATOR","->",276],["T_STRING","__",276],"(",["T_CONSTANT_ENCAPSED_STRING","'Yes'",276],")",["T_WHITESPACE","\n                ",276],":",["T_WHITESPACE"," ",277],["T_STRING","Mage",277],["T_DOUBLE_COLON","::",277],["T_STRING","helper",277],"(",["T_CONSTANT_ENCAPSED_STRING","'catalogsearch'",277],")",["T_OBJECT_OPERATOR","->",277],["T_STRING","__",277],"(",["T_CONSTANT_ENCAPSED_STRING","'No'",277],")",";",["T_WHITESPACE","\n        ",277],"}",["T_WHITESPACE","\n\n        ",278],["T_VARIABLE","$this",280],["T_OBJECT_OPERATOR","->",280],["T_STRING","_searchCriterias",280],"[","]",["T_WHITESPACE"," ",280],"=",["T_WHITESPACE"," ",280],["T_ARRAY","array",280],"(",["T_CONSTANT_ENCAPSED_STRING","'name'",280],["T_WHITESPACE"," ",280],["T_DOUBLE_ARROW","=>",280],["T_WHITESPACE"," ",280],["T_VARIABLE","$name",280],",",["T_WHITESPACE"," ",280],["T_CONSTANT_ENCAPSED_STRING","'value'",280],["T_WHITESPACE"," ",280],["T_DOUBLE_ARROW","=>",280],["T_WHITESPACE"," ",280],["T_VARIABLE","$value",280],")",";",["T_WHITESPACE","\n        ",280],["T_RETURN","return",281],["T_WHITESPACE"," ",281],["T_VARIABLE","$this",281],";",["T_WHITESPACE","\n    ",281],"}",["T_WHITESPACE","\n\n    ",282],["T_DOC_COMMENT","\/**\n     * Returns prepared search criterias in text\n     *\n     * @return array\n     *\/",284],["T_WHITESPACE","\n    ",288],["T_PUBLIC","public",289],["T_WHITESPACE"," ",289],["T_FUNCTION","function",289],["T_WHITESPACE"," ",289],["T_STRING","getSearchCriterias",289],"(",")",["T_WHITESPACE","\n    ",289],"{",["T_WHITESPACE","\n        ",290],["T_RETURN","return",291],["T_WHITESPACE"," ",291],["T_VARIABLE","$this",291],["T_OBJECT_OPERATOR","->",291],["T_STRING","_searchCriterias",291],";",["T_WHITESPACE","\n    ",291],"}",["T_WHITESPACE","\n\n    ",292],["T_DOC_COMMENT","\/**\n     * Retrieve advanced search product collection\n     *\n     * @return Mage_CatalogSearch_Model_Resource_Advanced_Collection\n     *\/",294],["T_WHITESPACE","\n    ",298],["T_PUBLIC","public",299],["T_WHITESPACE"," ",299],["T_FUNCTION","function",299],["T_WHITESPACE"," ",299],["T_STRING","getProductCollection",299],"(",")","{",["T_WHITESPACE","\n        ",299],["T_IF","if",300],["T_WHITESPACE"," ",300],"(",["T_STRING","is_null",300],"(",["T_VARIABLE","$this",300],["T_OBJECT_OPERATOR","->",300],["T_STRING","_productCollection",300],")",")",["T_WHITESPACE"," ",300],"{",["T_WHITESPACE","\n            ",300],["T_VARIABLE","$collection",301],["T_WHITESPACE"," ",301],"=",["T_WHITESPACE"," ",301],["T_VARIABLE","$this",301],["T_OBJECT_OPERATOR","->",301],["T_STRING","_engine",301],["T_OBJECT_OPERATOR","->",301],["T_STRING","getAdvancedResultCollection",301],"(",")",";",["T_WHITESPACE","\n            ",301],["T_VARIABLE","$this",302],["T_OBJECT_OPERATOR","->",302],["T_STRING","prepareProductCollection",302],"(",["T_VARIABLE","$collection",302],")",";",["T_WHITESPACE","\n            ",302],["T_IF","if",303],["T_WHITESPACE"," ",303],"(","!",["T_VARIABLE","$collection",303],")",["T_WHITESPACE"," ",303],"{",["T_WHITESPACE","\n                ",303],["T_RETURN","return",304],["T_WHITESPACE"," ",304],["T_VARIABLE","$collection",304],";",["T_WHITESPACE","\n            ",304],"}",["T_WHITESPACE","\n            ",305],["T_VARIABLE","$this",306],["T_OBJECT_OPERATOR","->",306],["T_STRING","_productCollection",306],["T_WHITESPACE"," ",306],"=",["T_WHITESPACE"," ",306],["T_VARIABLE","$collection",306],";",["T_WHITESPACE","\n        ",306],"}",["T_WHITESPACE","\n\n        ",307],["T_RETURN","return",309],["T_WHITESPACE"," ",309],["T_VARIABLE","$this",309],["T_OBJECT_OPERATOR","->",309],["T_STRING","_productCollection",309],";",["T_WHITESPACE","\n    ",309],"}",["T_WHITESPACE","\n\n    ",310],["T_DOC_COMMENT","\/**\n     * Prepare product collection\n     *\n     * @param Mage_CatalogSearch_Model_Resource_Advanced_Collection $collection\n     * @return Mage_Catalog_Model_Layer\n     *\/",312],["T_WHITESPACE","\n    ",317],["T_PUBLIC","public",318],["T_WHITESPACE"," ",318],["T_FUNCTION","function",318],["T_WHITESPACE"," ",318],["T_STRING","prepareProductCollection",318],"(",["T_VARIABLE","$collection",318],")",["T_WHITESPACE","\n    ",318],"{",["T_WHITESPACE","\n        ",319],["T_VARIABLE","$collection",320],["T_OBJECT_OPERATOR","->",320],["T_STRING","addAttributeToSelect",320],"(",["T_STRING","Mage",320],["T_DOUBLE_COLON","::",320],["T_STRING","getSingleton",320],"(",["T_CONSTANT_ENCAPSED_STRING","'catalog\/config'",320],")",["T_OBJECT_OPERATOR","->",320],["T_STRING","getProductAttributes",320],"(",")",")",["T_WHITESPACE","\n            ",320],["T_OBJECT_OPERATOR","->",321],["T_STRING","setStore",321],"(",["T_STRING","Mage",321],["T_DOUBLE_COLON","::",321],["T_STRING","app",321],"(",")",["T_OBJECT_OPERATOR","->",321],["T_STRING","getStore",321],"(",")",")",["T_WHITESPACE","\n            ",321],["T_OBJECT_OPERATOR","->",322],["T_STRING","addMinimalPrice",322],"(",")",["T_WHITESPACE","\n            ",322],["T_OBJECT_OPERATOR","->",323],["T_STRING","addTaxPercents",323],"(",")",["T_WHITESPACE","\n            ",323],["T_OBJECT_OPERATOR","->",324],["T_STRING","addStoreFilter",324],"(",")",";",["T_WHITESPACE","\n\n        ",324],["T_STRING","Mage",326],["T_DOUBLE_COLON","::",326],["T_STRING","getSingleton",326],"(",["T_CONSTANT_ENCAPSED_STRING","'catalog\/product_status'",326],")",["T_OBJECT_OPERATOR","->",326],["T_STRING","addVisibleFilterToCollection",326],"(",["T_VARIABLE","$collection",326],")",";",["T_WHITESPACE","\n        ",326],["T_STRING","Mage",327],["T_DOUBLE_COLON","::",327],["T_STRING","getSingleton",327],"(",["T_CONSTANT_ENCAPSED_STRING","'catalog\/product_visibility'",327],")",["T_OBJECT_OPERATOR","->",327],["T_STRING","addVisibleInSearchFilterToCollection",327],"(",["T_VARIABLE","$collection",327],")",";",["T_WHITESPACE","\n        ",327],["T_RETURN","return",328],["T_WHITESPACE"," ",328],["T_VARIABLE","$this",328],";",["T_WHITESPACE","\n    ",328],"}",["T_WHITESPACE","\n",329],"}",["T_WHITESPACE","\n",330]]
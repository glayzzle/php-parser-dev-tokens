[["T_OPEN_TAG","<?php\n",1],["T_DOC_COMMENT","\/**\n * Magento\n *\n * NOTICE OF LICENSE\n *\n * This source file is subject to the Open Software License (OSL 3.0)\n * that is bundled with this package in the file LICENSE.txt.\n * It is also available through the world-wide-web at this URL:\n * http:\/\/opensource.org\/licenses\/osl-3.0.php\n * If you did not receive a copy of the license and are unable to\n * obtain it through the world-wide-web, please send an email\n * to license@magento.com so we can send you a copy immediately.\n *\n * DISCLAIMER\n *\n * Do not edit or add to this file if you wish to upgrade Magento to newer\n * versions in the future. If you wish to customize Magento for your\n * needs please refer to http:\/\/www.magento.com for more information.\n *\n * @category    Mage\n * @package     Mage_Tag\n * @copyright  Copyright (c) 2006-2016 X.commerce, Inc. and affiliates (http:\/\/www.magento.com)\n * @license    http:\/\/opensource.org\/licenses\/osl-3.0.php  Open Software License (OSL 3.0)\n *\/",2],["T_WHITESPACE","\n\n\n",25],["T_DOC_COMMENT","\/**\n * Tag resourse model\n *\n * @category    Mage\n * @package     Mage_Tag\n * @author      Magento Core Team <core@magentocommerce.com>\n *\/",28],["T_WHITESPACE","\n",34],["T_CLASS","class",35],["T_WHITESPACE"," ",35],["T_STRING","Mage_Tag_Model_Resource_Tag",35],["T_WHITESPACE"," ",35],["T_EXTENDS","extends",35],["T_WHITESPACE"," ",35],["T_STRING","Mage_Core_Model_Resource_Db_Abstract",35],["T_WHITESPACE","\n",35],"{",["T_WHITESPACE","\n    ",36],["T_DOC_COMMENT","\/**\n     * Define main table and primary index\n     *\n     *\/",37],["T_WHITESPACE","\n    ",40],["T_PROTECTED","protected",41],["T_WHITESPACE"," ",41],["T_FUNCTION","function",41],["T_WHITESPACE"," ",41],["T_STRING","_construct",41],"(",")",["T_WHITESPACE","\n    ",41],"{",["T_WHITESPACE","\n        ",42],["T_VARIABLE","$this",43],["T_OBJECT_OPERATOR","->",43],["T_STRING","_init",43],"(",["T_CONSTANT_ENCAPSED_STRING","'tag\/tag'",43],",",["T_WHITESPACE"," ",43],["T_CONSTANT_ENCAPSED_STRING","'tag_id'",43],")",";",["T_WHITESPACE","\n    ",43],"}",["T_WHITESPACE","\n\n    ",44],["T_DOC_COMMENT","\/**\n     * Initialize unique fields\n     *\n     * @return Mage_Tag_Model_Resource_Tag\n     *\/",46],["T_WHITESPACE","\n    ",50],["T_PROTECTED","protected",51],["T_WHITESPACE"," ",51],["T_FUNCTION","function",51],["T_WHITESPACE"," ",51],["T_STRING","_initUniqueFields",51],"(",")",["T_WHITESPACE","\n    ",51],"{",["T_WHITESPACE","\n        ",52],["T_VARIABLE","$this",53],["T_OBJECT_OPERATOR","->",53],["T_STRING","_uniqueFields",53],["T_WHITESPACE"," ",53],"=",["T_WHITESPACE"," ",53],["T_ARRAY","array",53],"(",["T_ARRAY","array",53],"(",["T_WHITESPACE","\n            ",53],["T_CONSTANT_ENCAPSED_STRING","'field'",54],["T_WHITESPACE"," ",54],["T_DOUBLE_ARROW","=>",54],["T_WHITESPACE"," ",54],["T_CONSTANT_ENCAPSED_STRING","'name'",54],",",["T_WHITESPACE","\n            ",54],["T_CONSTANT_ENCAPSED_STRING","'title'",55],["T_WHITESPACE"," ",55],["T_DOUBLE_ARROW","=>",55],["T_WHITESPACE"," ",55],["T_STRING","Mage",55],["T_DOUBLE_COLON","::",55],["T_STRING","helper",55],"(",["T_CONSTANT_ENCAPSED_STRING","'tag'",55],")",["T_OBJECT_OPERATOR","->",55],["T_STRING","__",55],"(",["T_CONSTANT_ENCAPSED_STRING","'Tag'",55],")",["T_WHITESPACE","\n        ",55],")",")",";",["T_WHITESPACE","\n        ",56],["T_RETURN","return",57],["T_WHITESPACE"," ",57],["T_VARIABLE","$this",57],";",["T_WHITESPACE","\n    ",57],"}",["T_WHITESPACE","\n\n    ",58],["T_DOC_COMMENT","\/**\n     * Loading tag by name\n     *\n     * @param Mage_Tag_Model_Tag $model\n     * @param string $name\n     * @return array|false\n     *\/",60],["T_WHITESPACE","\n    ",66],["T_PUBLIC","public",67],["T_WHITESPACE"," ",67],["T_FUNCTION","function",67],["T_WHITESPACE"," ",67],["T_STRING","loadByName",67],"(",["T_VARIABLE","$model",67],",",["T_WHITESPACE"," ",67],["T_VARIABLE","$name",67],")",["T_WHITESPACE","\n    ",67],"{",["T_WHITESPACE","\n        ",68],["T_IF","if",69],["T_WHITESPACE"," ",69],"(",["T_WHITESPACE"," ",69],["T_VARIABLE","$name",69],["T_WHITESPACE"," ",69],")",["T_WHITESPACE"," ",69],"{",["T_WHITESPACE","\n            ",69],["T_VARIABLE","$read",70],["T_WHITESPACE"," ",70],"=",["T_WHITESPACE"," ",70],["T_VARIABLE","$this",70],["T_OBJECT_OPERATOR","->",70],["T_STRING","_getReadAdapter",70],"(",")",";",["T_WHITESPACE","\n            ",70],["T_VARIABLE","$select",71],["T_WHITESPACE"," ",71],"=",["T_WHITESPACE"," ",71],["T_VARIABLE","$read",71],["T_OBJECT_OPERATOR","->",71],["T_STRING","select",71],"(",")",";",["T_WHITESPACE","\n            ",71],["T_IF","if",72],["T_WHITESPACE"," ",72],"(",["T_STRING","Mage",72],["T_DOUBLE_COLON","::",72],["T_STRING","helper",72],"(",["T_CONSTANT_ENCAPSED_STRING","'core\/string'",72],")",["T_OBJECT_OPERATOR","->",72],["T_STRING","strlen",72],"(",["T_VARIABLE","$name",72],")",["T_WHITESPACE"," ",72],">",["T_WHITESPACE"," ",72],["T_LNUMBER","255",72],")",["T_WHITESPACE"," ",72],"{",["T_WHITESPACE","\n                ",72],["T_VARIABLE","$name",73],["T_WHITESPACE"," ",73],"=",["T_WHITESPACE"," ",73],["T_STRING","Mage",73],["T_DOUBLE_COLON","::",73],["T_STRING","helper",73],"(",["T_CONSTANT_ENCAPSED_STRING","'core\/string'",73],")",["T_OBJECT_OPERATOR","->",73],["T_STRING","substr",73],"(",["T_VARIABLE","$name",73],",",["T_WHITESPACE"," ",73],["T_LNUMBER","0",73],",",["T_WHITESPACE"," ",73],["T_LNUMBER","255",73],")",";",["T_WHITESPACE","\n            ",73],"}",["T_WHITESPACE","\n\n            ",74],["T_VARIABLE","$select",76],["T_OBJECT_OPERATOR","->",76],["T_STRING","from",76],"(",["T_VARIABLE","$this",76],["T_OBJECT_OPERATOR","->",76],["T_STRING","getMainTable",76],"(",")",")",["T_WHITESPACE","\n                ",76],["T_OBJECT_OPERATOR","->",77],["T_STRING","where",77],"(",["T_CONSTANT_ENCAPSED_STRING","'name = :name'",77],")",";",["T_WHITESPACE","\n            ",77],["T_VARIABLE","$data",78],["T_WHITESPACE"," ",78],"=",["T_WHITESPACE"," ",78],["T_VARIABLE","$read",78],["T_OBJECT_OPERATOR","->",78],["T_STRING","fetchRow",78],"(",["T_VARIABLE","$select",78],",",["T_WHITESPACE"," ",78],["T_ARRAY","array",78],"(",["T_CONSTANT_ENCAPSED_STRING","'name'",78],["T_WHITESPACE"," ",78],["T_DOUBLE_ARROW","=>",78],["T_WHITESPACE"," ",78],["T_VARIABLE","$name",78],")",")",";",["T_WHITESPACE","\n\n            ",78],["T_VARIABLE","$model",80],["T_OBJECT_OPERATOR","->",80],["T_STRING","setData",80],"(","(",["T_WHITESPACE"," ",80],["T_STRING","is_array",80],"(",["T_VARIABLE","$data",80],")",["T_WHITESPACE"," ",80],")",["T_WHITESPACE"," ",80],"?",["T_WHITESPACE"," ",80],["T_VARIABLE","$data",80],["T_WHITESPACE"," ",80],":",["T_WHITESPACE"," ",80],["T_ARRAY","array",80],"(",")",")",";",["T_WHITESPACE","\n        ",80],"}",["T_WHITESPACE"," ",81],["T_ELSE","else",81],["T_WHITESPACE"," ",81],"{",["T_WHITESPACE","\n            ",81],["T_RETURN","return",82],["T_WHITESPACE"," ",82],["T_STRING","false",82],";",["T_WHITESPACE","\n        ",82],"}",["T_WHITESPACE","\n    ",83],"}",["T_WHITESPACE","\n\n    ",84],["T_DOC_COMMENT","\/**\n     * Before saving actions\n     *\n     * @param Mage_Core_Model_Abstract $object\n     * @return Mage_Tag_Model_Resource_Tag\n     *\/",86],["T_WHITESPACE","\n    ",91],["T_PROTECTED","protected",92],["T_WHITESPACE"," ",92],["T_FUNCTION","function",92],["T_WHITESPACE"," ",92],["T_STRING","_beforeSave",92],"(",["T_STRING","Mage_Core_Model_Abstract",92],["T_WHITESPACE"," ",92],["T_VARIABLE","$object",92],")",["T_WHITESPACE","\n    ",92],"{",["T_WHITESPACE","\n        ",93],["T_IF","if",94],["T_WHITESPACE"," ",94],"(","!",["T_VARIABLE","$object",94],["T_OBJECT_OPERATOR","->",94],["T_STRING","getId",94],"(",")",["T_WHITESPACE"," ",94],["T_BOOLEAN_AND","&&",94],["T_WHITESPACE"," ",94],["T_VARIABLE","$object",94],["T_OBJECT_OPERATOR","->",94],["T_STRING","getStatus",94],"(",")",["T_WHITESPACE"," ",94],["T_IS_EQUAL","==",94],["T_WHITESPACE"," ",94],["T_VARIABLE","$object",94],["T_OBJECT_OPERATOR","->",94],["T_STRING","getApprovedStatus",94],"(",")",")",["T_WHITESPACE"," ",94],"{",["T_WHITESPACE","\n            ",94],["T_VARIABLE","$searchTag",95],["T_WHITESPACE"," ",95],"=",["T_WHITESPACE"," ",95],["T_NEW","new",95],["T_WHITESPACE"," ",95],["T_STRING","Varien_Object",95],"(",")",";",["T_WHITESPACE","\n            ",95],["T_VARIABLE","$this",96],["T_OBJECT_OPERATOR","->",96],["T_STRING","loadByName",96],"(",["T_VARIABLE","$searchTag",96],",",["T_WHITESPACE"," ",96],["T_VARIABLE","$object",96],["T_OBJECT_OPERATOR","->",96],["T_STRING","getName",96],"(",")",")",";",["T_WHITESPACE","\n            ",96],["T_IF","if",97],["T_WHITESPACE"," ",97],"(",["T_VARIABLE","$searchTag",97],["T_OBJECT_OPERATOR","->",97],["T_STRING","getData",97],"(",["T_VARIABLE","$this",97],["T_OBJECT_OPERATOR","->",97],["T_STRING","getIdFieldName",97],"(",")",")",["T_WHITESPACE","\n                    ",97],["T_BOOLEAN_AND","&&",98],["T_WHITESPACE"," ",98],["T_VARIABLE","$searchTag",98],["T_OBJECT_OPERATOR","->",98],["T_STRING","getStatus",98],"(",")",["T_WHITESPACE"," ",98],["T_IS_EQUAL","==",98],["T_WHITESPACE"," ",98],["T_VARIABLE","$object",98],["T_OBJECT_OPERATOR","->",98],["T_STRING","getPendingStatus",98],"(",")",")",["T_WHITESPACE"," ",98],"{",["T_WHITESPACE","\n                ",98],["T_VARIABLE","$object",99],["T_OBJECT_OPERATOR","->",99],["T_STRING","setId",99],"(",["T_VARIABLE","$searchTag",99],["T_OBJECT_OPERATOR","->",99],["T_STRING","getData",99],"(",["T_VARIABLE","$this",99],["T_OBJECT_OPERATOR","->",99],["T_STRING","getIdFieldName",99],"(",")",")",")",";",["T_WHITESPACE","\n            ",99],"}",["T_WHITESPACE","\n        ",100],"}",["T_WHITESPACE","\n\n        ",101],["T_IF","if",103],["T_WHITESPACE"," ",103],"(",["T_STRING","Mage",103],["T_DOUBLE_COLON","::",103],["T_STRING","helper",103],"(",["T_CONSTANT_ENCAPSED_STRING","'core\/string'",103],")",["T_OBJECT_OPERATOR","->",103],["T_STRING","strlen",103],"(",["T_VARIABLE","$object",103],["T_OBJECT_OPERATOR","->",103],["T_STRING","getName",103],"(",")",")",["T_WHITESPACE"," ",103],">",["T_WHITESPACE"," ",103],["T_LNUMBER","255",103],")",["T_WHITESPACE"," ",103],"{",["T_WHITESPACE","\n            ",103],["T_VARIABLE","$object",104],["T_OBJECT_OPERATOR","->",104],["T_STRING","setName",104],"(",["T_STRING","Mage",104],["T_DOUBLE_COLON","::",104],["T_STRING","helper",104],"(",["T_CONSTANT_ENCAPSED_STRING","'core\/string'",104],")",["T_OBJECT_OPERATOR","->",104],["T_STRING","substr",104],"(",["T_VARIABLE","$object",104],["T_OBJECT_OPERATOR","->",104],["T_STRING","getName",104],"(",")",",",["T_WHITESPACE"," ",104],["T_LNUMBER","0",104],",",["T_WHITESPACE"," ",104],["T_LNUMBER","255",104],")",")",";",["T_WHITESPACE","\n        ",104],"}",["T_WHITESPACE","\n\n        ",105],["T_RETURN","return",107],["T_WHITESPACE"," ",107],["T_STRING","parent",107],["T_DOUBLE_COLON","::",107],["T_STRING","_beforeSave",107],"(",["T_VARIABLE","$object",107],")",";",["T_WHITESPACE","\n    ",107],"}",["T_WHITESPACE","\n\n    ",108],["T_DOC_COMMENT","\/**\n     * Saving tag's base popularity\n     *\n     * @param Mage_Core_Model_Abstract $object\n     * @return Mage_Core_Model_Resource_Db_Abstract\n     *\/",110],["T_WHITESPACE","\n    ",115],["T_PROTECTED","protected",116],["T_WHITESPACE"," ",116],["T_FUNCTION","function",116],["T_WHITESPACE"," ",116],["T_STRING","_afterSave",116],"(",["T_STRING","Mage_Core_Model_Abstract",116],["T_WHITESPACE"," ",116],["T_VARIABLE","$object",116],")",["T_WHITESPACE","\n    ",116],"{",["T_WHITESPACE","\n        ",117],["T_IF","if",118],["T_WHITESPACE"," ",118],"(","!",["T_VARIABLE","$object",118],["T_OBJECT_OPERATOR","->",118],["T_STRING","getStore",118],"(",")",["T_WHITESPACE"," ",118],["T_BOOLEAN_OR","||",118],["T_WHITESPACE"," ",118],"!",["T_STRING","Mage",118],["T_DOUBLE_COLON","::",118],["T_STRING","app",118],"(",")",["T_OBJECT_OPERATOR","->",118],["T_STRING","getStore",118],"(",")",["T_OBJECT_OPERATOR","->",118],["T_STRING","isAdmin",118],"(",")",")",["T_WHITESPACE"," ",118],"{",["T_WHITESPACE","\n            ",118],["T_RETURN","return",119],["T_WHITESPACE"," ",119],["T_STRING","parent",119],["T_DOUBLE_COLON","::",119],["T_STRING","_afterSave",119],"(",["T_VARIABLE","$object",119],")",";",["T_WHITESPACE","\n        ",119],"}",["T_WHITESPACE","\n\n        ",120],["T_VARIABLE","$tagId",122],["T_WHITESPACE"," ",122],"=",["T_WHITESPACE"," ",122],"(",["T_VARIABLE","$object",122],["T_OBJECT_OPERATOR","->",122],["T_STRING","isObjectNew",122],"(",")",")",["T_WHITESPACE"," ",122],"?",["T_WHITESPACE"," ",122],["T_VARIABLE","$object",122],["T_OBJECT_OPERATOR","->",122],["T_STRING","getTagId",122],"(",")",["T_WHITESPACE"," ",122],":",["T_WHITESPACE"," ",122],["T_VARIABLE","$object",122],["T_OBJECT_OPERATOR","->",122],["T_STRING","getId",122],"(",")",";",["T_WHITESPACE","\n\n        ",122],["T_VARIABLE","$writeAdapter",124],["T_WHITESPACE"," ",124],"=",["T_WHITESPACE"," ",124],["T_VARIABLE","$this",124],["T_OBJECT_OPERATOR","->",124],["T_STRING","_getWriteAdapter",124],"(",")",";",["T_WHITESPACE","\n        ",124],["T_VARIABLE","$writeAdapter",125],["T_OBJECT_OPERATOR","->",125],["T_STRING","insertOnDuplicate",125],"(",["T_VARIABLE","$this",125],["T_OBJECT_OPERATOR","->",125],["T_STRING","getTable",125],"(",["T_CONSTANT_ENCAPSED_STRING","'tag\/properties'",125],")",",",["T_WHITESPACE"," ",125],["T_ARRAY","array",125],"(",["T_WHITESPACE","\n            ",125],["T_CONSTANT_ENCAPSED_STRING","'tag_id'",126],["T_WHITESPACE","            ",126],["T_DOUBLE_ARROW","=>",126],["T_WHITESPACE"," ",126],["T_VARIABLE","$tagId",126],",",["T_WHITESPACE","\n            ",126],["T_CONSTANT_ENCAPSED_STRING","'store_id'",127],["T_WHITESPACE","          ",127],["T_DOUBLE_ARROW","=>",127],["T_WHITESPACE"," ",127],["T_VARIABLE","$object",127],["T_OBJECT_OPERATOR","->",127],["T_STRING","getStore",127],"(",")",",",["T_WHITESPACE","\n            ",127],["T_CONSTANT_ENCAPSED_STRING","'base_popularity'",128],["T_WHITESPACE","   ",128],["T_DOUBLE_ARROW","=>",128],["T_WHITESPACE"," ",128],"(","!",["T_VARIABLE","$object",128],["T_OBJECT_OPERATOR","->",128],["T_STRING","getBasePopularity",128],"(",")",")",["T_WHITESPACE"," ",128],"?",["T_WHITESPACE"," ",128],["T_LNUMBER","0",128],["T_WHITESPACE"," ",128],":",["T_WHITESPACE"," ",128],["T_VARIABLE","$object",128],["T_OBJECT_OPERATOR","->",128],["T_STRING","getBasePopularity",128],"(",")",["T_WHITESPACE","\n        ",128],")",")",";",["T_WHITESPACE","\n\n        ",129],["T_RETURN","return",131],["T_WHITESPACE"," ",131],["T_STRING","parent",131],["T_DOUBLE_COLON","::",131],["T_STRING","_afterSave",131],"(",["T_VARIABLE","$object",131],")",";",["T_WHITESPACE","\n    ",131],"}",["T_WHITESPACE","\n\n    ",132],["T_DOC_COMMENT","\/**\n     * Getting base popularity per store view for specified tag\n     *\n     * @deprecated after 1.4.0.0\n     *\n     * @param int $tagId\n     * @return array\n     *\/",134],["T_WHITESPACE","\n    ",141],["T_PROTECTED","protected",142],["T_WHITESPACE"," ",142],["T_FUNCTION","function",142],["T_WHITESPACE"," ",142],["T_STRING","_getExistingBasePopularity",142],"(",["T_VARIABLE","$tagId",142],")",["T_WHITESPACE","\n    ",142],"{",["T_WHITESPACE","\n        ",143],["T_VARIABLE","$read",144],["T_WHITESPACE"," ",144],"=",["T_WHITESPACE"," ",144],["T_VARIABLE","$this",144],["T_OBJECT_OPERATOR","->",144],["T_STRING","_getReadAdapter",144],"(",")",";",["T_WHITESPACE","\n        ",144],["T_VARIABLE","$selectSummary",145],["T_WHITESPACE"," ",145],"=",["T_WHITESPACE"," ",145],["T_VARIABLE","$read",145],["T_OBJECT_OPERATOR","->",145],["T_STRING","select",145],"(",")",["T_WHITESPACE","\n            ",145],["T_OBJECT_OPERATOR","->",146],["T_STRING","from",146],"(",["T_WHITESPACE","\n                ",146],["T_ARRAY","array",147],"(",["T_CONSTANT_ENCAPSED_STRING","'main'",147],["T_WHITESPACE"," ",147],["T_DOUBLE_ARROW","=>",147],["T_WHITESPACE"," ",147],["T_VARIABLE","$this",147],["T_OBJECT_OPERATOR","->",147],["T_STRING","getTable",147],"(",["T_CONSTANT_ENCAPSED_STRING","'tag\/summary'",147],")",")",",",["T_WHITESPACE","\n                ",147],["T_ARRAY","array",148],"(",["T_CONSTANT_ENCAPSED_STRING","'store_id'",148],",",["T_WHITESPACE"," ",148],["T_CONSTANT_ENCAPSED_STRING","'base_popularity'",148],")",["T_WHITESPACE","\n            ",148],")",["T_WHITESPACE","\n            ",149],["T_OBJECT_OPERATOR","->",150],["T_STRING","where",150],"(",["T_CONSTANT_ENCAPSED_STRING","'main.tag_id = :tag_id'",150],")",["T_WHITESPACE","\n            ",150],["T_OBJECT_OPERATOR","->",151],["T_STRING","where",151],"(",["T_CONSTANT_ENCAPSED_STRING","'main.store_id != 0'",151],")",";",["T_WHITESPACE","\n\n        ",151],["T_RETURN","return",153],["T_WHITESPACE"," ",153],["T_VARIABLE","$read",153],["T_OBJECT_OPERATOR","->",153],["T_STRING","fetchAssoc",153],"(",["T_VARIABLE","$selectSummary",153],",",["T_WHITESPACE"," ",153],["T_ARRAY","array",153],"(",["T_CONSTANT_ENCAPSED_STRING","'tag_id'",153],["T_WHITESPACE"," ",153],["T_DOUBLE_ARROW","=>",153],["T_WHITESPACE"," ",153],["T_VARIABLE","$tagId",153],")",")",";",["T_WHITESPACE","\n    ",153],"}",["T_WHITESPACE","\n\n    ",154],["T_DOC_COMMENT","\/**\n     * Get aggregation data per store view\n     *\n     * @deprecated after 1.4.0.0\n     *\n     * @param int $tagId\n     * @return array\n     *\/",156],["T_WHITESPACE","\n    ",163],["T_PROTECTED","protected",164],["T_WHITESPACE"," ",164],["T_FUNCTION","function",164],["T_WHITESPACE"," ",164],["T_STRING","_getAggregationPerStoreView",164],"(",["T_VARIABLE","$tagId",164],")",["T_WHITESPACE","\n    ",164],"{",["T_WHITESPACE","\n        ",165],["T_VARIABLE","$readAdapter",166],["T_WHITESPACE"," ",166],"=",["T_WHITESPACE"," ",166],["T_VARIABLE","$this",166],["T_OBJECT_OPERATOR","->",166],["T_STRING","_getReadAdapter",166],"(",")",";",["T_WHITESPACE","\n        ",166],["T_VARIABLE","$selectLocal",167],["T_WHITESPACE"," ",167],"=",["T_WHITESPACE"," ",167],["T_VARIABLE","$readAdapter",167],["T_OBJECT_OPERATOR","->",167],["T_STRING","select",167],"(",")",["T_WHITESPACE","\n            ",167],["T_OBJECT_OPERATOR","->",168],["T_STRING","from",168],"(",["T_WHITESPACE","\n                ",168],["T_ARRAY","array",169],"(",["T_CONSTANT_ENCAPSED_STRING","'main'",169],["T_WHITESPACE","  ",169],["T_DOUBLE_ARROW","=>",169],["T_WHITESPACE"," ",169],["T_VARIABLE","$this",169],["T_OBJECT_OPERATOR","->",169],["T_STRING","getTable",169],"(",["T_CONSTANT_ENCAPSED_STRING","'tag\/relation'",169],")",")",",",["T_WHITESPACE","\n                ",169],["T_ARRAY","array",170],"(",["T_WHITESPACE","\n                    ",170],["T_CONSTANT_ENCAPSED_STRING","'customers'",171],["T_WHITESPACE"," ",171],["T_DOUBLE_ARROW","=>",171],["T_WHITESPACE"," ",171],["T_CONSTANT_ENCAPSED_STRING","'COUNT(DISTINCT main.customer_id)'",171],",",["T_WHITESPACE","\n                    ",171],["T_CONSTANT_ENCAPSED_STRING","'products'",172],["T_WHITESPACE","  ",172],["T_DOUBLE_ARROW","=>",172],["T_WHITESPACE"," ",172],["T_CONSTANT_ENCAPSED_STRING","'COUNT(DISTINCT main.product_id)'",172],",",["T_WHITESPACE","\n                    ",172],["T_CONSTANT_ENCAPSED_STRING","'store_id'",173],",",["T_WHITESPACE","\n                    ",173],["T_CONSTANT_ENCAPSED_STRING","'uses'",174],["T_WHITESPACE","      ",174],["T_DOUBLE_ARROW","=>",174],["T_WHITESPACE"," ",174],["T_CONSTANT_ENCAPSED_STRING","'COUNT(main.tag_relation_id)'",174],["T_WHITESPACE","\n                ",174],")",["T_WHITESPACE","\n            ",175],")",["T_WHITESPACE","\n            ",176],["T_OBJECT_OPERATOR","->",177],["T_STRING","join",177],"(",["T_ARRAY","array",177],"(",["T_CONSTANT_ENCAPSED_STRING","'store'",177],["T_WHITESPACE"," ",177],["T_DOUBLE_ARROW","=>",177],["T_WHITESPACE"," ",177],["T_VARIABLE","$this",177],["T_OBJECT_OPERATOR","->",177],["T_STRING","getTable",177],"(",["T_CONSTANT_ENCAPSED_STRING","'core\/store'",177],")",")",",",["T_WHITESPACE","\n                ",177],["T_CONSTANT_ENCAPSED_STRING","'store.store_id = main.store_id AND store.store_id > 0'",178],",",["T_WHITESPACE","\n                ",178],["T_ARRAY","array",179],"(",")",["T_WHITESPACE","\n            ",179],")",["T_WHITESPACE","\n            ",180],["T_OBJECT_OPERATOR","->",181],["T_STRING","join",181],"(",["T_ARRAY","array",181],"(",["T_CONSTANT_ENCAPSED_STRING","'product_website'",181],["T_WHITESPACE"," ",181],["T_DOUBLE_ARROW","=>",181],["T_WHITESPACE"," ",181],["T_VARIABLE","$this",181],["T_OBJECT_OPERATOR","->",181],["T_STRING","getTable",181],"(",["T_CONSTANT_ENCAPSED_STRING","'catalog\/product_website'",181],")",")",",",["T_WHITESPACE","\n                ",181],["T_CONSTANT_ENCAPSED_STRING","'product_website.website_id = store.website_id AND product_website.product_id = main.product_id'",182],",",["T_WHITESPACE","\n                ",182],["T_ARRAY","array",183],"(",")",["T_WHITESPACE","\n            ",183],")",["T_WHITESPACE","\n            ",184],["T_OBJECT_OPERATOR","->",185],["T_STRING","where",185],"(",["T_CONSTANT_ENCAPSED_STRING","'main.tag_id = :tag_id'",185],")",["T_WHITESPACE","\n            ",185],["T_OBJECT_OPERATOR","->",186],["T_STRING","where",186],"(",["T_CONSTANT_ENCAPSED_STRING","'main.active = 1'",186],")",["T_WHITESPACE","\n            ",186],["T_OBJECT_OPERATOR","->",187],["T_STRING","group",187],"(",["T_CONSTANT_ENCAPSED_STRING","'main.store_id'",187],")",";",["T_WHITESPACE","\n\n        ",187],["T_VARIABLE","$selectLocalResult",189],["T_WHITESPACE"," ",189],"=",["T_WHITESPACE"," ",189],["T_VARIABLE","$readAdapter",189],["T_OBJECT_OPERATOR","->",189],["T_STRING","fetchAll",189],"(",["T_VARIABLE","$selectLocal",189],",",["T_WHITESPACE"," ",189],["T_ARRAY","array",189],"(",["T_CONSTANT_ENCAPSED_STRING","'tag_id'",189],["T_WHITESPACE"," ",189],["T_DOUBLE_ARROW","=>",189],["T_WHITESPACE"," ",189],["T_VARIABLE","$tagId",189],")",")",";",["T_WHITESPACE","\n\n        ",189],["T_VARIABLE","$selectHistorical",191],["T_WHITESPACE"," ",191],"=",["T_WHITESPACE"," ",191],["T_VARIABLE","$readAdapter",191],["T_OBJECT_OPERATOR","->",191],["T_STRING","select",191],"(",")",["T_WHITESPACE","\n            ",191],["T_OBJECT_OPERATOR","->",192],["T_STRING","from",192],"(",["T_WHITESPACE","\n                ",192],["T_ARRAY","array",193],"(",["T_CONSTANT_ENCAPSED_STRING","'main'",193],["T_WHITESPACE"," ",193],["T_DOUBLE_ARROW","=>",193],["T_WHITESPACE"," ",193],["T_VARIABLE","$this",193],["T_OBJECT_OPERATOR","->",193],["T_STRING","getTable",193],"(",["T_CONSTANT_ENCAPSED_STRING","'tag\/relation'",193],")",")",",",["T_WHITESPACE","\n                ",193],["T_ARRAY","array",194],"(",["T_CONSTANT_ENCAPSED_STRING","'historical_uses'",194],["T_WHITESPACE"," ",194],["T_DOUBLE_ARROW","=>",194],["T_WHITESPACE"," ",194],["T_CONSTANT_ENCAPSED_STRING","'COUNT(main.tag_relation_id)'",194],",",["T_WHITESPACE","\n                ",194],["T_CONSTANT_ENCAPSED_STRING","'store_id'",195],")",["T_WHITESPACE","\n            ",195],")",["T_WHITESPACE","\n            ",196],["T_OBJECT_OPERATOR","->",197],["T_STRING","join",197],"(",["T_ARRAY","array",197],"(",["T_CONSTANT_ENCAPSED_STRING","'store'",197],["T_WHITESPACE"," ",197],["T_DOUBLE_ARROW","=>",197],["T_WHITESPACE"," ",197],["T_VARIABLE","$this",197],["T_OBJECT_OPERATOR","->",197],["T_STRING","getTable",197],"(",["T_CONSTANT_ENCAPSED_STRING","'core\/store'",197],")",")",",",["T_WHITESPACE","\n                ",197],["T_CONSTANT_ENCAPSED_STRING","'store.store_id = main.store_id AND store.store_id > 0'",198],",",["T_WHITESPACE","\n                ",198],["T_ARRAY","array",199],"(",")",["T_WHITESPACE","\n            ",199],")",["T_WHITESPACE","\n            ",200],["T_OBJECT_OPERATOR","->",201],["T_STRING","join",201],"(",["T_ARRAY","array",201],"(",["T_CONSTANT_ENCAPSED_STRING","'product_website'",201],["T_WHITESPACE"," ",201],["T_DOUBLE_ARROW","=>",201],["T_WHITESPACE"," ",201],["T_VARIABLE","$this",201],["T_OBJECT_OPERATOR","->",201],["T_STRING","getTable",201],"(",["T_CONSTANT_ENCAPSED_STRING","'catalog\/product_website'",201],")",")",",",["T_WHITESPACE","\n                ",201],["T_CONSTANT_ENCAPSED_STRING","'product_website.website_id = store.website_id AND product_website.product_id = main.product_id'",202],",",["T_WHITESPACE","\n                ",202],["T_ARRAY","array",203],"(",")",["T_WHITESPACE","\n            ",203],")",["T_WHITESPACE","\n            ",204],["T_OBJECT_OPERATOR","->",205],["T_STRING","group",205],"(",["T_CONSTANT_ENCAPSED_STRING","'main.store_id'",205],")",["T_WHITESPACE","\n            ",205],["T_OBJECT_OPERATOR","->",206],["T_STRING","where",206],"(",["T_CONSTANT_ENCAPSED_STRING","'main.tag_id = :tag_id'",206],")",["T_WHITESPACE","\n            ",206],["T_OBJECT_OPERATOR","->",207],["T_STRING","where",207],"(",["T_CONSTANT_ENCAPSED_STRING","'main.active = 1'",207],")",";",["T_WHITESPACE","\n\n        ",207],["T_VARIABLE","$selectHistoricalResult",209],["T_WHITESPACE"," ",209],"=",["T_WHITESPACE"," ",209],["T_VARIABLE","$readAdapter",209],["T_OBJECT_OPERATOR","->",209],["T_STRING","fetchAll",209],"(",["T_VARIABLE","$selectHistorical",209],",",["T_WHITESPACE"," ",209],["T_ARRAY","array",209],"(",["T_CONSTANT_ENCAPSED_STRING","'tag_id'",209],["T_WHITESPACE"," ",209],["T_DOUBLE_ARROW","=>",209],["T_WHITESPACE"," ",209],["T_VARIABLE","$tagId",209],")",")",";",["T_WHITESPACE","\n\n        ",209],["T_FOREACH","foreach",211],["T_WHITESPACE"," ",211],"(",["T_VARIABLE","$selectHistoricalResult",211],["T_WHITESPACE"," ",211],["T_AS","as",211],["T_WHITESPACE"," ",211],["T_VARIABLE","$historical",211],")",["T_WHITESPACE"," ",211],"{",["T_WHITESPACE","\n            ",211],["T_FOREACH","foreach",212],["T_WHITESPACE"," ",212],"(",["T_VARIABLE","$selectLocalResult",212],["T_WHITESPACE"," ",212],["T_AS","as",212],["T_WHITESPACE"," ",212],["T_VARIABLE","$key",212],["T_WHITESPACE"," ",212],["T_DOUBLE_ARROW","=>",212],["T_WHITESPACE"," ",212],["T_VARIABLE","$local",212],")",["T_WHITESPACE"," ",212],"{",["T_WHITESPACE","\n                ",212],["T_IF","if",213],["T_WHITESPACE"," ",213],"(",["T_VARIABLE","$local",213],"[",["T_CONSTANT_ENCAPSED_STRING","'store_id'",213],"]",["T_WHITESPACE"," ",213],["T_IS_EQUAL","==",213],["T_WHITESPACE"," ",213],["T_VARIABLE","$historical",213],"[",["T_CONSTANT_ENCAPSED_STRING","'store_id'",213],"]",")",["T_WHITESPACE"," ",213],"{",["T_WHITESPACE","\n                    ",213],["T_VARIABLE","$selectLocalResult",214],"[",["T_VARIABLE","$key",214],"]","[",["T_CONSTANT_ENCAPSED_STRING","'historical_uses'",214],"]",["T_WHITESPACE"," ",214],"=",["T_WHITESPACE"," ",214],["T_VARIABLE","$historical",214],"[",["T_CONSTANT_ENCAPSED_STRING","'historical_uses'",214],"]",";",["T_WHITESPACE","\n                    ",214],["T_BREAK","break",215],";",["T_WHITESPACE","\n                ",215],"}",["T_WHITESPACE","\n            ",216],"}",["T_WHITESPACE","\n        ",217],"}",["T_WHITESPACE","\n\n        ",218],["T_RETURN","return",220],["T_WHITESPACE"," ",220],["T_VARIABLE","$selectLocalResult",220],";",["T_WHITESPACE","\n    ",220],"}",["T_WHITESPACE","\n\n    ",221],["T_DOC_COMMENT","\/**\n     * Get global aggregation data for row with store_id = 0\n     *\n     * @deprecated after 1.4.0.0\n     *\n     * @param int $tagId\n     * @return array\n     *\/",223],["T_WHITESPACE","\n    ",230],["T_PROTECTED","protected",231],["T_WHITESPACE"," ",231],["T_FUNCTION","function",231],["T_WHITESPACE"," ",231],["T_STRING","_getGlobalAggregation",231],"(",["T_VARIABLE","$tagId",231],")",["T_WHITESPACE","\n    ",231],"{",["T_WHITESPACE","\n        ",232],["T_VARIABLE","$readAdapter",233],["T_WHITESPACE"," ",233],"=",["T_WHITESPACE"," ",233],["T_VARIABLE","$this",233],["T_OBJECT_OPERATOR","->",233],["T_STRING","_getReadAdapter",233],"(",")",";",["T_WHITESPACE","\n        ",233],["T_COMMENT","\/\/ customers and products stats\n",234],["T_WHITESPACE","        ",235],["T_VARIABLE","$selectGlobal",235],["T_WHITESPACE"," ",235],"=",["T_WHITESPACE"," ",235],["T_VARIABLE","$readAdapter",235],["T_OBJECT_OPERATOR","->",235],["T_STRING","select",235],"(",")",["T_WHITESPACE","\n            ",235],["T_OBJECT_OPERATOR","->",236],["T_STRING","from",236],"(",["T_WHITESPACE","\n                ",236],["T_ARRAY","array",237],"(",["T_CONSTANT_ENCAPSED_STRING","'main'",237],["T_WHITESPACE"," ",237],["T_DOUBLE_ARROW","=>",237],["T_WHITESPACE"," ",237],["T_VARIABLE","$this",237],["T_OBJECT_OPERATOR","->",237],["T_STRING","getTable",237],"(",["T_CONSTANT_ENCAPSED_STRING","'tag\/relation'",237],")",")",",",["T_WHITESPACE","\n                ",237],["T_ARRAY","array",238],"(",["T_WHITESPACE","\n                    ",238],["T_CONSTANT_ENCAPSED_STRING","'customers'",239],["T_WHITESPACE"," ",239],["T_DOUBLE_ARROW","=>",239],["T_WHITESPACE"," ",239],["T_CONSTANT_ENCAPSED_STRING","'COUNT(DISTINCT main.customer_id)'",239],",",["T_WHITESPACE","\n                    ",239],["T_CONSTANT_ENCAPSED_STRING","'products'",240],["T_WHITESPACE","  ",240],["T_DOUBLE_ARROW","=>",240],["T_WHITESPACE"," ",240],["T_CONSTANT_ENCAPSED_STRING","'COUNT(DISTINCT main.product_id)'",240],",",["T_WHITESPACE","\n                    ",240],["T_CONSTANT_ENCAPSED_STRING","'store_id'",241],["T_WHITESPACE","  ",241],["T_DOUBLE_ARROW","=>",241],["T_WHITESPACE"," ",241],["T_NEW","new",241],["T_WHITESPACE"," ",241],["T_STRING","Zend_Db_Expr",241],"(",["T_LNUMBER","0",241],")",",",["T_WHITESPACE","\n                    ",241],["T_CONSTANT_ENCAPSED_STRING","'uses'",242],["T_WHITESPACE","      ",242],["T_DOUBLE_ARROW","=>",242],["T_WHITESPACE"," ",242],["T_CONSTANT_ENCAPSED_STRING","'COUNT(main.tag_relation_id)'",242],["T_WHITESPACE","\n                ",242],")",["T_WHITESPACE","\n            ",243],")",["T_WHITESPACE","\n            ",244],["T_OBJECT_OPERATOR","->",245],["T_STRING","join",245],"(",["T_ARRAY","array",245],"(",["T_CONSTANT_ENCAPSED_STRING","'store'",245],["T_WHITESPACE"," ",245],["T_DOUBLE_ARROW","=>",245],["T_WHITESPACE"," ",245],["T_VARIABLE","$this",245],["T_OBJECT_OPERATOR","->",245],["T_STRING","getTable",245],"(",["T_CONSTANT_ENCAPSED_STRING","'core\/store'",245],")",")",",",["T_WHITESPACE","\n                ",245],["T_CONSTANT_ENCAPSED_STRING","'store.store_id=main.store_id AND store.store_id>0'",246],",",["T_WHITESPACE","\n                ",246],["T_ARRAY","array",247],"(",")",["T_WHITESPACE","\n            ",247],")",["T_WHITESPACE","\n            ",248],["T_OBJECT_OPERATOR","->",249],["T_STRING","join",249],"(",["T_ARRAY","array",249],"(",["T_CONSTANT_ENCAPSED_STRING","'product_website'",249],["T_WHITESPACE"," ",249],["T_DOUBLE_ARROW","=>",249],["T_WHITESPACE"," ",249],["T_VARIABLE","$this",249],["T_OBJECT_OPERATOR","->",249],["T_STRING","getTable",249],"(",["T_CONSTANT_ENCAPSED_STRING","'catalog\/product_website'",249],")",")",",",["T_WHITESPACE","\n                ",249],["T_CONSTANT_ENCAPSED_STRING","'product_website.website_id = store.website_id AND product_website.product_id = main.product_id'",250],",",["T_WHITESPACE","\n                ",250],["T_ARRAY","array",251],"(",")",["T_WHITESPACE","\n            ",251],")",["T_WHITESPACE","\n            ",252],["T_OBJECT_OPERATOR","->",253],["T_STRING","where",253],"(",["T_CONSTANT_ENCAPSED_STRING","'main.tag_id = :tag_id'",253],")",["T_WHITESPACE","\n            ",253],["T_OBJECT_OPERATOR","->",254],["T_STRING","where",254],"(",["T_CONSTANT_ENCAPSED_STRING","'main.active = 1'",254],")",";",["T_WHITESPACE","\n        ",254],["T_VARIABLE","$result",255],["T_WHITESPACE"," ",255],"=",["T_WHITESPACE"," ",255],["T_VARIABLE","$readAdapter",255],["T_OBJECT_OPERATOR","->",255],["T_STRING","fetchRow",255],"(",["T_VARIABLE","$selectGlobal",255],",",["T_WHITESPACE"," ",255],["T_ARRAY","array",255],"(",["T_CONSTANT_ENCAPSED_STRING","'tag_id'",255],["T_WHITESPACE"," ",255],["T_DOUBLE_ARROW","=>",255],["T_WHITESPACE"," ",255],["T_VARIABLE","$tagId",255],")",")",";",["T_WHITESPACE","\n        ",255],["T_IF","if",256],["T_WHITESPACE"," ",256],"(","!",["T_VARIABLE","$result",256],")",["T_WHITESPACE"," ",256],"{",["T_WHITESPACE","\n            ",256],["T_RETURN","return",257],["T_WHITESPACE"," ",257],["T_ARRAY","array",257],"(",")",";",["T_WHITESPACE","\n        ",257],"}",["T_WHITESPACE","\n\n        ",258],["T_COMMENT","\/\/ historical uses stats\n",260],["T_WHITESPACE","        ",261],["T_VARIABLE","$selectHistoricalGlobal",261],["T_WHITESPACE"," ",261],"=",["T_WHITESPACE"," ",261],["T_VARIABLE","$readAdapter",261],["T_OBJECT_OPERATOR","->",261],["T_STRING","select",261],"(",")",["T_WHITESPACE","\n            ",261],["T_OBJECT_OPERATOR","->",262],["T_STRING","from",262],"(",["T_WHITESPACE","\n                ",262],["T_ARRAY","array",263],"(",["T_CONSTANT_ENCAPSED_STRING","'main'",263],["T_WHITESPACE"," ",263],["T_DOUBLE_ARROW","=>",263],["T_WHITESPACE"," ",263],["T_VARIABLE","$this",263],["T_OBJECT_OPERATOR","->",263],["T_STRING","getTable",263],"(",["T_CONSTANT_ENCAPSED_STRING","'tag\/relation'",263],")",")",",",["T_WHITESPACE","\n                ",263],["T_ARRAY","array",264],"(",["T_CONSTANT_ENCAPSED_STRING","'historical_uses'",264],["T_WHITESPACE"," ",264],["T_DOUBLE_ARROW","=>",264],["T_WHITESPACE"," ",264],["T_CONSTANT_ENCAPSED_STRING","'COUNT(main.tag_relation_id)'",264],")",["T_WHITESPACE","\n            ",264],")",["T_WHITESPACE","\n            ",265],["T_OBJECT_OPERATOR","->",266],["T_STRING","join",266],"(",["T_ARRAY","array",266],"(",["T_CONSTANT_ENCAPSED_STRING","'store'",266],["T_WHITESPACE"," ",266],["T_DOUBLE_ARROW","=>",266],["T_WHITESPACE"," ",266],["T_VARIABLE","$this",266],["T_OBJECT_OPERATOR","->",266],["T_STRING","getTable",266],"(",["T_CONSTANT_ENCAPSED_STRING","'core\/store'",266],")",")",",",["T_WHITESPACE","\n                ",266],["T_CONSTANT_ENCAPSED_STRING","'store.store_id = main.store_id AND store.store_id > 0'",267],",",["T_WHITESPACE","\n                ",267],["T_ARRAY","array",268],"(",")",["T_WHITESPACE","\n            ",268],")",["T_WHITESPACE","\n            ",269],["T_OBJECT_OPERATOR","->",270],["T_STRING","join",270],"(",["T_ARRAY","array",270],"(",["T_CONSTANT_ENCAPSED_STRING","'product_website'",270],["T_WHITESPACE"," ",270],["T_DOUBLE_ARROW","=>",270],["T_WHITESPACE"," ",270],["T_VARIABLE","$this",270],["T_OBJECT_OPERATOR","->",270],["T_STRING","getTable",270],"(",["T_CONSTANT_ENCAPSED_STRING","'catalog\/product_website'",270],")",")",",",["T_WHITESPACE","\n                ",270],["T_CONSTANT_ENCAPSED_STRING","'product_website.website_id = store.website_id AND product_website.product_id = main.product_id'",271],",",["T_WHITESPACE","\n                ",271],["T_ARRAY","array",272],"(",")",["T_WHITESPACE","\n            ",272],")",["T_WHITESPACE","\n            ",273],["T_OBJECT_OPERATOR","->",274],["T_STRING","where",274],"(",["T_CONSTANT_ENCAPSED_STRING","'main.tag_id = :tag_id'",274],")",["T_WHITESPACE","\n            ",274],["T_OBJECT_OPERATOR","->",275],["T_STRING","where",275],"(",["T_CONSTANT_ENCAPSED_STRING","'main.active = 1'",275],")",";",["T_WHITESPACE","\n        ",275],["T_VARIABLE","$result",276],"[",["T_CONSTANT_ENCAPSED_STRING","'historical_uses'",276],"]",["T_WHITESPACE"," ",276],"=",["T_WHITESPACE"," ",276],["T_INT_CAST","(int)",276],["T_WHITESPACE"," ",276],["T_VARIABLE","$readAdapter",276],["T_OBJECT_OPERATOR","->",276],["T_STRING","fetchOne",276],"(",["T_VARIABLE","$selectHistoricalGlobal",276],",",["T_WHITESPACE"," ",276],["T_ARRAY","array",276],"(",["T_CONSTANT_ENCAPSED_STRING","'tag_id'",276],["T_WHITESPACE"," ",276],["T_DOUBLE_ARROW","=>",276],["T_WHITESPACE"," ",276],["T_VARIABLE","$tagId",276],")",")",";",["T_WHITESPACE","\n\n        ",276],["T_RETURN","return",278],["T_WHITESPACE"," ",278],["T_VARIABLE","$result",278],";",["T_WHITESPACE","\n    ",278],"}",["T_WHITESPACE","\n\n    ",279],["T_DOC_COMMENT","\/**\n     * Getting statistics data into buffer.\n     * Replacing our buffer array with new statistics and incoming data.\n     *\n     * @deprecated after 1.4.0.0\n     *\n     * @param Mage_Tag_Model_Tag $object\n     * @return Mage_Tag_Model_Tag\n     *\/",281],["T_WHITESPACE","\n    ",289],["T_PUBLIC","public",290],["T_WHITESPACE"," ",290],["T_FUNCTION","function",290],["T_WHITESPACE"," ",290],["T_STRING","aggregate",290],"(",["T_VARIABLE","$object",290],")",["T_WHITESPACE","\n    ",290],"{",["T_WHITESPACE","\n        ",291],["T_VARIABLE","$tagId",292],["T_WHITESPACE","   ",292],"=",["T_WHITESPACE"," ",292],["T_INT_CAST","(int)",292],["T_VARIABLE","$object",292],["T_OBJECT_OPERATOR","->",292],["T_STRING","getId",292],"(",")",";",["T_WHITESPACE","\n        ",292],["T_VARIABLE","$storeId",293],["T_WHITESPACE"," ",293],"=",["T_WHITESPACE"," ",293],["T_INT_CAST","(int)",293],["T_VARIABLE","$object",293],["T_OBJECT_OPERATOR","->",293],["T_STRING","getStore",293],"(",")",";",["T_WHITESPACE","\n\n        ",293],["T_COMMENT","\/\/ create final summary from existing data and add specified base popularity\n",295],["T_WHITESPACE","        ",296],["T_VARIABLE","$finalSummary",296],["T_WHITESPACE"," ",296],"=",["T_WHITESPACE"," ",296],["T_VARIABLE","$this",296],["T_OBJECT_OPERATOR","->",296],["T_STRING","_getExistingBasePopularity",296],"(",["T_VARIABLE","$tagId",296],")",";",["T_WHITESPACE","\n        ",296],["T_IF","if",297],["T_WHITESPACE"," ",297],"(",["T_VARIABLE","$object",297],["T_OBJECT_OPERATOR","->",297],["T_STRING","hasBasePopularity",297],"(",")",["T_WHITESPACE"," ",297],["T_BOOLEAN_AND","&&",297],["T_WHITESPACE"," ",297],["T_VARIABLE","$storeId",297],")",["T_WHITESPACE"," ",297],"{",["T_WHITESPACE","\n            ",297],["T_VARIABLE","$finalSummary",298],"[",["T_VARIABLE","$storeId",298],"]","[",["T_CONSTANT_ENCAPSED_STRING","'store_id'",298],"]",["T_WHITESPACE"," ",298],"=",["T_WHITESPACE"," ",298],["T_VARIABLE","$storeId",298],";",["T_WHITESPACE","\n            ",298],["T_VARIABLE","$finalSummary",299],"[",["T_VARIABLE","$storeId",299],"]","[",["T_CONSTANT_ENCAPSED_STRING","'base_popularity'",299],"]",["T_WHITESPACE"," ",299],"=",["T_WHITESPACE"," ",299],["T_VARIABLE","$object",299],["T_OBJECT_OPERATOR","->",299],["T_STRING","getBasePopularity",299],"(",")",";",["T_WHITESPACE","\n        ",299],"}",["T_WHITESPACE","\n\n        ",300],["T_COMMENT","\/\/ calculate aggregation data\n",302],["T_WHITESPACE","        ",303],["T_VARIABLE","$summaries",303],["T_WHITESPACE"," ",303],"=",["T_WHITESPACE"," ",303],["T_VARIABLE","$this",303],["T_OBJECT_OPERATOR","->",303],["T_STRING","_getAggregationPerStoreView",303],"(",["T_VARIABLE","$tagId",303],")",";",["T_WHITESPACE","\n        ",303],["T_VARIABLE","$summariesGlobal",304],["T_WHITESPACE"," ",304],"=",["T_WHITESPACE"," ",304],["T_VARIABLE","$this",304],["T_OBJECT_OPERATOR","->",304],["T_STRING","_getGlobalAggregation",304],"(",["T_VARIABLE","$tagId",304],")",";",["T_WHITESPACE","\n        ",304],["T_IF","if",305],["T_WHITESPACE"," ",305],"(",["T_VARIABLE","$summariesGlobal",305],")",["T_WHITESPACE"," ",305],"{",["T_WHITESPACE","\n            ",305],["T_VARIABLE","$summaries",306],"[","]",["T_WHITESPACE"," ",306],"=",["T_WHITESPACE"," ",306],["T_VARIABLE","$summariesGlobal",306],";",["T_WHITESPACE","\n        ",306],"}",["T_WHITESPACE","\n\n        ",307],["T_COMMENT","\/\/ override final summary with aggregated data\n",309],["T_WHITESPACE","        ",310],["T_FOREACH","foreach",310],["T_WHITESPACE"," ",310],"(",["T_VARIABLE","$summaries",310],["T_WHITESPACE"," ",310],["T_AS","as",310],["T_WHITESPACE"," ",310],["T_VARIABLE","$row",310],")",["T_WHITESPACE"," ",310],"{",["T_WHITESPACE","\n            ",310],["T_VARIABLE","$storeId",311],["T_WHITESPACE"," ",311],"=",["T_WHITESPACE"," ",311],["T_INT_CAST","(int)",311],["T_VARIABLE","$row",311],"[",["T_CONSTANT_ENCAPSED_STRING","'store_id'",311],"]",";",["T_WHITESPACE","\n            ",311],["T_FOREACH","foreach",312],["T_WHITESPACE"," ",312],"(",["T_VARIABLE","$row",312],["T_WHITESPACE"," ",312],["T_AS","as",312],["T_WHITESPACE"," ",312],["T_VARIABLE","$key",312],["T_WHITESPACE"," ",312],["T_DOUBLE_ARROW","=>",312],["T_WHITESPACE"," ",312],["T_VARIABLE","$value",312],")",["T_WHITESPACE"," ",312],"{",["T_WHITESPACE","\n                ",312],["T_VARIABLE","$finalSummary",313],"[",["T_VARIABLE","$storeId",313],"]","[",["T_VARIABLE","$key",313],"]",["T_WHITESPACE"," ",313],"=",["T_WHITESPACE"," ",313],["T_VARIABLE","$value",313],";",["T_WHITESPACE","\n            ",313],"}",["T_WHITESPACE","\n        ",314],"}",["T_WHITESPACE","\n\n        ",315],["T_COMMENT","\/\/ prepare static parameters to final summary for insertion\n",317],["T_WHITESPACE","        ",318],["T_FOREACH","foreach",318],["T_WHITESPACE"," ",318],"(",["T_VARIABLE","$finalSummary",318],["T_WHITESPACE"," ",318],["T_AS","as",318],["T_WHITESPACE"," ",318],["T_VARIABLE","$key",318],["T_WHITESPACE"," ",318],["T_DOUBLE_ARROW","=>",318],["T_WHITESPACE"," ",318],["T_VARIABLE","$row",318],")",["T_WHITESPACE"," ",318],"{",["T_WHITESPACE","\n            ",318],["T_VARIABLE","$finalSummary",319],"[",["T_VARIABLE","$key",319],"]","[",["T_CONSTANT_ENCAPSED_STRING","'tag_id'",319],"]",["T_WHITESPACE"," ",319],"=",["T_WHITESPACE"," ",319],["T_VARIABLE","$tagId",319],";",["T_WHITESPACE","\n            ",319],["T_FOREACH","foreach",320],["T_WHITESPACE"," ",320],"(",["T_ARRAY","array",320],"(",["T_CONSTANT_ENCAPSED_STRING","'base_popularity'",320],",",["T_WHITESPACE"," ",320],["T_CONSTANT_ENCAPSED_STRING","'popularity'",320],",",["T_WHITESPACE"," ",320],["T_CONSTANT_ENCAPSED_STRING","'historical_uses'",320],",",["T_WHITESPACE"," ",320],["T_CONSTANT_ENCAPSED_STRING","'uses'",320],",",["T_WHITESPACE"," ",320],["T_CONSTANT_ENCAPSED_STRING","'products'",320],",",["T_WHITESPACE"," ",320],["T_CONSTANT_ENCAPSED_STRING","'customers'",320],")",["T_WHITESPACE"," ",320],["T_AS","as",320],["T_WHITESPACE"," ",320],["T_VARIABLE","$k",320],")",["T_WHITESPACE"," ",320],"{",["T_WHITESPACE","\n                ",320],["T_IF","if",321],["T_WHITESPACE"," ",321],"(","!",["T_ISSET","isset",321],"(",["T_VARIABLE","$row",321],"[",["T_VARIABLE","$k",321],"]",")",")",["T_WHITESPACE"," ",321],"{",["T_WHITESPACE","\n                    ",321],["T_VARIABLE","$finalSummary",322],"[",["T_VARIABLE","$key",322],"]","[",["T_VARIABLE","$k",322],"]",["T_WHITESPACE"," ",322],"=",["T_WHITESPACE"," ",322],["T_LNUMBER","0",322],";",["T_WHITESPACE","\n                ",322],"}",["T_WHITESPACE","\n            ",323],"}",["T_WHITESPACE","\n            ",324],["T_VARIABLE","$finalSummary",325],"[",["T_VARIABLE","$key",325],"]","[",["T_CONSTANT_ENCAPSED_STRING","'popularity'",325],"]",["T_WHITESPACE"," ",325],"=",["T_WHITESPACE"," ",325],["T_VARIABLE","$finalSummary",325],"[",["T_VARIABLE","$key",325],"]","[",["T_CONSTANT_ENCAPSED_STRING","'historical_uses'",325],"]",";",["T_WHITESPACE","\n        ",325],"}",["T_WHITESPACE","\n\n        ",326],["T_COMMENT","\/\/ remove old and insert new data\n",328],["T_WHITESPACE","        ",329],["T_VARIABLE","$write",329],["T_WHITESPACE"," ",329],"=",["T_WHITESPACE"," ",329],["T_VARIABLE","$this",329],["T_OBJECT_OPERATOR","->",329],["T_STRING","_getWriteAdapter",329],"(",")",";",["T_WHITESPACE","\n        ",329],["T_VARIABLE","$write",330],["T_OBJECT_OPERATOR","->",330],["T_STRING","delete",330],"(",["T_WHITESPACE","\n            ",330],["T_VARIABLE","$this",331],["T_OBJECT_OPERATOR","->",331],["T_STRING","getTable",331],"(",["T_CONSTANT_ENCAPSED_STRING","'tag\/summary'",331],")",",",["T_WHITESPACE"," ",331],["T_ARRAY","array",331],"(",["T_CONSTANT_ENCAPSED_STRING","'tag_id = ?'",331],["T_WHITESPACE"," ",331],["T_DOUBLE_ARROW","=>",331],["T_WHITESPACE"," ",331],["T_VARIABLE","$tagId",331],")",["T_WHITESPACE","\n        ",331],")",";",["T_WHITESPACE","\n        ",332],["T_VARIABLE","$write",333],["T_OBJECT_OPERATOR","->",333],["T_STRING","insertMultiple",333],"(",["T_VARIABLE","$this",333],["T_OBJECT_OPERATOR","->",333],["T_STRING","getTable",333],"(",["T_CONSTANT_ENCAPSED_STRING","'tag\/summary'",333],")",",",["T_WHITESPACE"," ",333],["T_VARIABLE","$finalSummary",333],")",";",["T_WHITESPACE","\n\n        ",333],["T_RETURN","return",335],["T_WHITESPACE"," ",335],["T_VARIABLE","$object",335],";",["T_WHITESPACE","\n    ",335],"}",["T_WHITESPACE","\n\n    ",336],["T_DOC_COMMENT","\/**\n     * Decrementing tag products quantity as action for product delete\n     *\n     * @param array $tagsId\n     * @return int The number of affected rows\n     *\/",338],["T_WHITESPACE","\n    ",343],["T_PUBLIC","public",344],["T_WHITESPACE"," ",344],["T_FUNCTION","function",344],["T_WHITESPACE"," ",344],["T_STRING","decrementProducts",344],"(",["T_ARRAY","array",344],["T_WHITESPACE"," ",344],["T_VARIABLE","$tagsId",344],")",["T_WHITESPACE","\n    ",344],"{",["T_WHITESPACE","\n        ",345],["T_VARIABLE","$writeAdapter",346],["T_WHITESPACE"," ",346],"=",["T_WHITESPACE"," ",346],["T_VARIABLE","$this",346],["T_OBJECT_OPERATOR","->",346],["T_STRING","_getWriteAdapter",346],"(",")",";",["T_WHITESPACE","\n        ",346],["T_IF","if",347],["T_WHITESPACE"," ",347],"(",["T_EMPTY","empty",347],"(",["T_VARIABLE","$tagsId",347],")",")",["T_WHITESPACE"," ",347],"{",["T_WHITESPACE","\n            ",347],["T_RETURN","return",348],["T_WHITESPACE"," ",348],["T_LNUMBER","0",348],";",["T_WHITESPACE","\n        ",348],"}",["T_WHITESPACE","\n\n        ",349],["T_RETURN","return",351],["T_WHITESPACE"," ",351],["T_VARIABLE","$writeAdapter",351],["T_OBJECT_OPERATOR","->",351],["T_STRING","update",351],"(",["T_WHITESPACE","\n            ",351],["T_VARIABLE","$this",352],["T_OBJECT_OPERATOR","->",352],["T_STRING","getTable",352],"(",["T_CONSTANT_ENCAPSED_STRING","'tag\/summary'",352],")",",",["T_WHITESPACE","\n            ",352],["T_ARRAY","array",353],"(",["T_CONSTANT_ENCAPSED_STRING","'products'",353],["T_WHITESPACE"," ",353],["T_DOUBLE_ARROW","=>",353],["T_WHITESPACE"," ",353],["T_NEW","new",353],["T_WHITESPACE"," ",353],["T_STRING","Zend_Db_Expr",353],"(",["T_CONSTANT_ENCAPSED_STRING","'products - 1'",353],")",")",",",["T_WHITESPACE","\n            ",353],["T_ARRAY","array",354],"(",["T_CONSTANT_ENCAPSED_STRING","'tag_id IN (?)'",354],["T_WHITESPACE"," ",354],["T_DOUBLE_ARROW","=>",354],["T_WHITESPACE"," ",354],["T_VARIABLE","$tagsId",354],")",["T_WHITESPACE","\n        ",354],")",";",["T_WHITESPACE","\n    ",355],"}",["T_WHITESPACE","\n\n    ",356],["T_DOC_COMMENT","\/**\n     * Add summary data to specified object\n     *\n     * @deprecated after 1.4.0.0\n     *\n     * @param Mage_Tag_Model_Tag $object\n     * @return Mage_Tag_Model_Tag\n     *\/",358],["T_WHITESPACE","\n    ",365],["T_PUBLIC","public",366],["T_WHITESPACE"," ",366],["T_FUNCTION","function",366],["T_WHITESPACE"," ",366],["T_STRING","addSummary",366],"(",["T_VARIABLE","$object",366],")",["T_WHITESPACE","\n    ",366],"{",["T_WHITESPACE","\n        ",367],["T_VARIABLE","$read",368],["T_WHITESPACE"," ",368],"=",["T_WHITESPACE"," ",368],["T_VARIABLE","$this",368],["T_OBJECT_OPERATOR","->",368],["T_STRING","_getReadAdapter",368],"(",")",";",["T_WHITESPACE","\n        ",368],["T_VARIABLE","$select",369],["T_WHITESPACE"," ",369],"=",["T_WHITESPACE"," ",369],["T_VARIABLE","$read",369],["T_OBJECT_OPERATOR","->",369],["T_STRING","select",369],"(",")",["T_WHITESPACE","\n            ",369],["T_OBJECT_OPERATOR","->",370],["T_STRING","from",370],"(",["T_ARRAY","array",370],"(",["T_CONSTANT_ENCAPSED_STRING","'relation'",370],["T_WHITESPACE"," ",370],["T_DOUBLE_ARROW","=>",370],["T_WHITESPACE"," ",370],["T_VARIABLE","$this",370],["T_OBJECT_OPERATOR","->",370],["T_STRING","getTable",370],"(",["T_CONSTANT_ENCAPSED_STRING","'tag\/relation'",370],")",")",",",["T_WHITESPACE"," ",370],["T_ARRAY","array",370],"(",")",")",["T_WHITESPACE","\n            ",370],["T_OBJECT_OPERATOR","->",371],["T_STRING","joinLeft",371],"(",["T_WHITESPACE","\n                ",371],["T_ARRAY","array",372],"(",["T_CONSTANT_ENCAPSED_STRING","'summary'",372],["T_WHITESPACE"," ",372],["T_DOUBLE_ARROW","=>",372],["T_WHITESPACE"," ",372],["T_VARIABLE","$this",372],["T_OBJECT_OPERATOR","->",372],["T_STRING","getTable",372],"(",["T_CONSTANT_ENCAPSED_STRING","'tag\/summary'",372],")",")",",",["T_WHITESPACE","\n                ",372],["T_CONSTANT_ENCAPSED_STRING","'relation.tag_id = summary.tag_id AND relation.store_id = summary.store_id'",373],",",["T_WHITESPACE","\n                ",373],["T_ARRAY","array",374],"(",["T_WHITESPACE","\n                    ",374],["T_CONSTANT_ENCAPSED_STRING","'customers'",375],",",["T_WHITESPACE","\n                    ",375],["T_CONSTANT_ENCAPSED_STRING","'products'",376],",",["T_WHITESPACE","\n                    ",376],["T_CONSTANT_ENCAPSED_STRING","'popularity'",377],["T_WHITESPACE","\n                ",377],")",["T_WHITESPACE","\n            ",378],")",["T_WHITESPACE","\n            ",379],["T_OBJECT_OPERATOR","->",380],["T_STRING","where",380],"(",["T_CONSTANT_ENCAPSED_STRING","'relation.tag_id = :tag_id'",380],")",["T_WHITESPACE","\n            ",380],["T_OBJECT_OPERATOR","->",381],["T_STRING","where",381],"(",["T_CONSTANT_ENCAPSED_STRING","'relation.store_id = :store_id'",381],")",["T_WHITESPACE","\n            ",381],["T_OBJECT_OPERATOR","->",382],["T_STRING","limit",382],"(",["T_LNUMBER","1",382],")",";",["T_WHITESPACE","\n        ",382],["T_VARIABLE","$bind",383],["T_WHITESPACE"," ",383],"=",["T_WHITESPACE"," ",383],["T_ARRAY","array",383],"(",["T_WHITESPACE","\n            ",383],["T_CONSTANT_ENCAPSED_STRING","'tag_id'",384],["T_WHITESPACE"," ",384],["T_DOUBLE_ARROW","=>",384],["T_WHITESPACE"," ",384],["T_INT_CAST","(int)",384],["T_VARIABLE","$object",384],["T_OBJECT_OPERATOR","->",384],["T_STRING","getId",384],"(",")",",",["T_WHITESPACE","\n            ",384],["T_CONSTANT_ENCAPSED_STRING","'store_id'",385],["T_WHITESPACE"," ",385],["T_DOUBLE_ARROW","=>",385],["T_WHITESPACE"," ",385],["T_INT_CAST","(int)",385],["T_VARIABLE","$object",385],["T_OBJECT_OPERATOR","->",385],["T_STRING","getStoreId",385],"(",")",["T_WHITESPACE","\n        ",385],")",";",["T_WHITESPACE","\n        ",386],["T_VARIABLE","$row",387],["T_WHITESPACE"," ",387],"=",["T_WHITESPACE"," ",387],["T_VARIABLE","$read",387],["T_OBJECT_OPERATOR","->",387],["T_STRING","fetchRow",387],"(",["T_VARIABLE","$select",387],",",["T_WHITESPACE"," ",387],["T_VARIABLE","$bind",387],")",";",["T_WHITESPACE","\n        ",387],["T_IF","if",388],["T_WHITESPACE"," ",388],"(",["T_VARIABLE","$row",388],")",["T_WHITESPACE"," ",388],"{",["T_WHITESPACE","\n            ",388],["T_VARIABLE","$object",389],["T_OBJECT_OPERATOR","->",389],["T_STRING","addData",389],"(",["T_VARIABLE","$row",389],")",";",["T_WHITESPACE","\n        ",389],"}",["T_WHITESPACE","\n        ",390],["T_RETURN","return",391],["T_WHITESPACE"," ",391],["T_VARIABLE","$object",391],";",["T_WHITESPACE","\n    ",391],"}",["T_WHITESPACE","\n\n    ",392],["T_DOC_COMMENT","\/**\n     * Retrieve select object for load object data\n     * Redeclare parent method just for adding tag's base popularity if flag exists\n     *\n     * @param string $field\n     * @param mixed $value\n     * @param Mage_Core_Model_Abstract $object\n     * @return Zend_Db_Select\n     *\/",394],["T_WHITESPACE","\n    ",402],["T_PROTECTED","protected",403],["T_WHITESPACE"," ",403],["T_FUNCTION","function",403],["T_WHITESPACE"," ",403],["T_STRING","_getLoadSelect",403],"(",["T_VARIABLE","$field",403],",",["T_WHITESPACE"," ",403],["T_VARIABLE","$value",403],",",["T_WHITESPACE"," ",403],["T_VARIABLE","$object",403],")",["T_WHITESPACE","\n    ",403],"{",["T_WHITESPACE","\n        ",404],["T_VARIABLE","$select",405],["T_WHITESPACE"," ",405],"=",["T_WHITESPACE"," ",405],["T_STRING","parent",405],["T_DOUBLE_COLON","::",405],["T_STRING","_getLoadSelect",405],"(",["T_VARIABLE","$field",405],",",["T_WHITESPACE"," ",405],["T_VARIABLE","$value",405],",",["T_WHITESPACE"," ",405],["T_VARIABLE","$object",405],")",";",["T_WHITESPACE","\n        ",405],["T_IF","if",406],["T_WHITESPACE"," ",406],"(",["T_VARIABLE","$object",406],["T_OBJECT_OPERATOR","->",406],["T_STRING","getAddBasePopularity",406],"(",")",["T_WHITESPACE"," ",406],["T_BOOLEAN_AND","&&",406],["T_WHITESPACE"," ",406],["T_VARIABLE","$object",406],["T_OBJECT_OPERATOR","->",406],["T_STRING","hasStoreId",406],"(",")",")",["T_WHITESPACE"," ",406],"{",["T_WHITESPACE","\n            ",406],["T_VARIABLE","$select",407],["T_OBJECT_OPERATOR","->",407],["T_STRING","joinLeft",407],"(",["T_WHITESPACE","\n                ",407],["T_ARRAY","array",408],"(",["T_CONSTANT_ENCAPSED_STRING","'properties'",408],["T_WHITESPACE"," ",408],["T_DOUBLE_ARROW","=>",408],["T_WHITESPACE"," ",408],["T_VARIABLE","$this",408],["T_OBJECT_OPERATOR","->",408],["T_STRING","getTable",408],"(",["T_CONSTANT_ENCAPSED_STRING","'tag\/properties'",408],")",")",",",["T_WHITESPACE","\n                ",408],"\"",["T_ENCAPSED_AND_WHITESPACE","properties.tag_id = ",409],["T_CURLY_OPEN","{",409],["T_VARIABLE","$this",409],["T_OBJECT_OPERATOR","->",409],["T_STRING","getMainTable",409],"(",")","}",["T_ENCAPSED_AND_WHITESPACE",".tag_id AND properties.store_id = ",409],["T_CURLY_OPEN","{",409],["T_VARIABLE","$object",409],["T_OBJECT_OPERATOR","->",409],["T_STRING","getStoreId",409],"(",")","}","\"",",",["T_WHITESPACE","\n                ",409],["T_CONSTANT_ENCAPSED_STRING","'base_popularity'",410],["T_WHITESPACE","\n            ",410],")",";",["T_WHITESPACE","\n        ",411],"}",["T_WHITESPACE","\n        ",412],["T_RETURN","return",413],["T_WHITESPACE"," ",413],["T_VARIABLE","$select",413],";",["T_WHITESPACE","\n    ",413],"}",["T_WHITESPACE","\n\n    ",414],["T_DOC_COMMENT","\/**\n     * Fetch store ids in which tag visible\n     *\n     * @param Mage_Tag_Model_Resource_Tag $object\n     * @return Mage_Tag_Model_Resource_Tag\n     *\/",416],["T_WHITESPACE","\n    ",421],["T_PROTECTED","protected",422],["T_WHITESPACE"," ",422],["T_FUNCTION","function",422],["T_WHITESPACE"," ",422],["T_STRING","_afterLoad",422],"(",["T_STRING","Mage_Core_Model_Abstract",422],["T_WHITESPACE"," ",422],["T_VARIABLE","$object",422],")",["T_WHITESPACE","\n    ",422],"{",["T_WHITESPACE","\n        ",423],["T_VARIABLE","$read",424],["T_WHITESPACE"," ",424],"=",["T_WHITESPACE"," ",424],["T_VARIABLE","$this",424],["T_OBJECT_OPERATOR","->",424],["T_STRING","_getReadAdapter",424],"(",")",";",["T_WHITESPACE","\n        ",424],["T_VARIABLE","$select",425],["T_WHITESPACE"," ",425],"=",["T_WHITESPACE"," ",425],["T_VARIABLE","$read",425],["T_OBJECT_OPERATOR","->",425],["T_STRING","select",425],"(",")",["T_WHITESPACE","\n            ",425],["T_OBJECT_OPERATOR","->",426],["T_STRING","from",426],"(",["T_VARIABLE","$this",426],["T_OBJECT_OPERATOR","->",426],["T_STRING","getTable",426],"(",["T_CONSTANT_ENCAPSED_STRING","'tag\/summary'",426],")",",",["T_WHITESPACE"," ",426],["T_ARRAY","array",426],"(",["T_CONSTANT_ENCAPSED_STRING","'store_id'",426],")",")",["T_WHITESPACE","\n            ",426],["T_OBJECT_OPERATOR","->",427],["T_STRING","where",427],"(",["T_CONSTANT_ENCAPSED_STRING","'tag_id = :tag_id'",427],")",";",["T_WHITESPACE","\n        ",427],["T_VARIABLE","$storeIds",428],["T_WHITESPACE"," ",428],"=",["T_WHITESPACE"," ",428],["T_VARIABLE","$read",428],["T_OBJECT_OPERATOR","->",428],["T_STRING","fetchCol",428],"(",["T_VARIABLE","$select",428],",",["T_WHITESPACE"," ",428],["T_ARRAY","array",428],"(",["T_CONSTANT_ENCAPSED_STRING","'tag_id'",428],["T_WHITESPACE"," ",428],["T_DOUBLE_ARROW","=>",428],["T_WHITESPACE"," ",428],["T_VARIABLE","$object",428],["T_OBJECT_OPERATOR","->",428],["T_STRING","getId",428],"(",")",")",")",";",["T_WHITESPACE","\n\n        ",428],["T_VARIABLE","$object",430],["T_OBJECT_OPERATOR","->",430],["T_STRING","setVisibleInStoreIds",430],"(",["T_VARIABLE","$storeIds",430],")",";",["T_WHITESPACE","\n\n        ",430],["T_RETURN","return",432],["T_WHITESPACE"," ",432],["T_VARIABLE","$this",432],";",["T_WHITESPACE","\n    ",432],"}",["T_WHITESPACE","\n",433],"}",["T_WHITESPACE","\n",434]]
[["T_OPEN_TAG","<?php\n",1],["T_DOC_COMMENT","\/**\n * Magento\n *\n * NOTICE OF LICENSE\n *\n * This source file is subject to the Open Software License (OSL 3.0)\n * that is bundled with this package in the file LICENSE.txt.\n * It is also available through the world-wide-web at this URL:\n * http:\/\/opensource.org\/licenses\/osl-3.0.php\n * If you did not receive a copy of the license and are unable to\n * obtain it through the world-wide-web, please send an email\n * to license@magento.com so we can send you a copy immediately.\n *\n * DISCLAIMER\n *\n * Do not edit or add to this file if you wish to upgrade Magento to newer\n * versions in the future. If you wish to customize Magento for your\n * needs please refer to http:\/\/www.magento.com for more information.\n *\n * @category    Mage\n * @package     Mage_Reports\n * @copyright  Copyright (c) 2006-2016 X.commerce, Inc. and affiliates (http:\/\/www.magento.com)\n * @license    http:\/\/opensource.org\/licenses\/osl-3.0.php  Open Software License (OSL 3.0)\n *\/",2],["T_WHITESPACE","\n\n\n",25],["T_DOC_COMMENT","\/**\n * Reports Event observer model\n *\n * @category   Mage\n * @package    Mage_Reports\n * @author     Magento Core Team <core@magentocommerce.com>\n *\/",28],["T_WHITESPACE","\n",34],["T_CLASS","class",35],["T_WHITESPACE"," ",35],["T_STRING","Mage_Reports_Model_Event_Observer",35],["T_WHITESPACE","\n",35],"{",["T_WHITESPACE","\n    ",36],["T_PROTECTED","protected",37],["T_WHITESPACE"," ",37],["T_VARIABLE","$_enabledReports",37],["T_WHITESPACE"," ",37],"=",["T_WHITESPACE"," ",37],["T_STRING","true",37],";",["T_WHITESPACE","\n\n    ",37],["T_DOC_COMMENT","\/**\n     * Object initialization\n     *\/",39],["T_WHITESPACE","\n    ",41],["T_PUBLIC","public",42],["T_WHITESPACE"," ",42],["T_FUNCTION","function",42],["T_WHITESPACE"," ",42],["T_STRING","__construct",42],"(",")",["T_WHITESPACE","\n    ",42],"{",["T_WHITESPACE","\n        ",43],["T_VARIABLE","$this",44],["T_OBJECT_OPERATOR","->",44],["T_STRING","_enabledReports",44],["T_WHITESPACE"," ",44],"=",["T_WHITESPACE"," ",44],["T_STRING","Mage",44],["T_DOUBLE_COLON","::",44],["T_STRING","helper",44],"(",["T_CONSTANT_ENCAPSED_STRING","'reports'",44],")",["T_OBJECT_OPERATOR","->",44],["T_STRING","isReportsEnabled",44],"(",")",";",["T_WHITESPACE","\n    ",44],"}",["T_WHITESPACE","\n\n    ",45],["T_DOC_COMMENT","\/**\n     * Abstract Event obeserver logic\n     *\n     * Save event\n     *\n     * @param int $eventTypeId\n     * @param int $objectId\n     * @param int $subjectId\n     * @param int $subtype\n     * @return Mage_Reports_Model_Event_Observer\n     *\/",47],["T_WHITESPACE","\n    ",57],["T_PROTECTED","protected",58],["T_WHITESPACE"," ",58],["T_FUNCTION","function",58],["T_WHITESPACE"," ",58],["T_STRING","_event",58],"(",["T_VARIABLE","$eventTypeId",58],",",["T_WHITESPACE"," ",58],["T_VARIABLE","$objectId",58],",",["T_WHITESPACE"," ",58],["T_VARIABLE","$subjectId",58],["T_WHITESPACE"," ",58],"=",["T_WHITESPACE"," ",58],["T_STRING","null",58],",",["T_WHITESPACE"," ",58],["T_VARIABLE","$subtype",58],["T_WHITESPACE"," ",58],"=",["T_WHITESPACE"," ",58],["T_LNUMBER","0",58],")",["T_WHITESPACE","\n    ",58],"{",["T_WHITESPACE","\n        ",59],["T_IF","if",60],["T_WHITESPACE"," ",60],"(",["T_STRING","is_null",60],"(",["T_VARIABLE","$subjectId",60],")",")",["T_WHITESPACE"," ",60],"{",["T_WHITESPACE","\n            ",60],["T_IF","if",61],["T_WHITESPACE"," ",61],"(",["T_STRING","Mage",61],["T_DOUBLE_COLON","::",61],["T_STRING","getSingleton",61],"(",["T_CONSTANT_ENCAPSED_STRING","'customer\/session'",61],")",["T_OBJECT_OPERATOR","->",61],["T_STRING","isLoggedIn",61],"(",")",")",["T_WHITESPACE"," ",61],"{",["T_WHITESPACE","\n                ",61],["T_VARIABLE","$customer",62],["T_WHITESPACE"," ",62],"=",["T_WHITESPACE"," ",62],["T_STRING","Mage",62],["T_DOUBLE_COLON","::",62],["T_STRING","getSingleton",62],"(",["T_CONSTANT_ENCAPSED_STRING","'customer\/session'",62],")",["T_OBJECT_OPERATOR","->",62],["T_STRING","getCustomer",62],"(",")",";",["T_WHITESPACE","\n                ",62],["T_VARIABLE","$subjectId",63],["T_WHITESPACE"," ",63],"=",["T_WHITESPACE"," ",63],["T_VARIABLE","$customer",63],["T_OBJECT_OPERATOR","->",63],["T_STRING","getId",63],"(",")",";",["T_WHITESPACE","\n            ",63],"}",["T_WHITESPACE","\n            ",64],["T_ELSE","else",65],["T_WHITESPACE"," ",65],"{",["T_WHITESPACE","\n                ",65],["T_VARIABLE","$subjectId",66],["T_WHITESPACE"," ",66],"=",["T_WHITESPACE"," ",66],["T_STRING","Mage",66],["T_DOUBLE_COLON","::",66],["T_STRING","getSingleton",66],"(",["T_CONSTANT_ENCAPSED_STRING","'log\/visitor'",66],")",["T_OBJECT_OPERATOR","->",66],["T_STRING","getId",66],"(",")",";",["T_WHITESPACE","\n                ",66],["T_VARIABLE","$subtype",67],["T_WHITESPACE"," ",67],"=",["T_WHITESPACE"," ",67],["T_LNUMBER","1",67],";",["T_WHITESPACE","\n            ",67],"}",["T_WHITESPACE","\n        ",68],"}",["T_WHITESPACE","\n\n        ",69],["T_VARIABLE","$eventModel",71],["T_WHITESPACE"," ",71],"=",["T_WHITESPACE"," ",71],["T_STRING","Mage",71],["T_DOUBLE_COLON","::",71],["T_STRING","getModel",71],"(",["T_CONSTANT_ENCAPSED_STRING","'reports\/event'",71],")",";",["T_WHITESPACE","\n        ",71],["T_VARIABLE","$storeId",72],["T_WHITESPACE","    ",72],"=",["T_WHITESPACE"," ",72],["T_STRING","Mage",72],["T_DOUBLE_COLON","::",72],["T_STRING","app",72],"(",")",["T_OBJECT_OPERATOR","->",72],["T_STRING","getStore",72],"(",")",["T_OBJECT_OPERATOR","->",72],["T_STRING","getId",72],"(",")",";",["T_WHITESPACE","\n        ",72],["T_VARIABLE","$eventModel",73],["T_WHITESPACE","\n            ",73],["T_OBJECT_OPERATOR","->",74],["T_STRING","setEventTypeId",74],"(",["T_VARIABLE","$eventTypeId",74],")",["T_WHITESPACE","\n            ",74],["T_OBJECT_OPERATOR","->",75],["T_STRING","setObjectId",75],"(",["T_VARIABLE","$objectId",75],")",["T_WHITESPACE","\n            ",75],["T_OBJECT_OPERATOR","->",76],["T_STRING","setSubjectId",76],"(",["T_VARIABLE","$subjectId",76],")",["T_WHITESPACE","\n            ",76],["T_OBJECT_OPERATOR","->",77],["T_STRING","setSubtype",77],"(",["T_VARIABLE","$subtype",77],")",["T_WHITESPACE","\n            ",77],["T_OBJECT_OPERATOR","->",78],["T_STRING","setStoreId",78],"(",["T_VARIABLE","$storeId",78],")",";",["T_WHITESPACE","\n        ",78],["T_VARIABLE","$eventModel",79],["T_OBJECT_OPERATOR","->",79],["T_STRING","save",79],"(",")",";",["T_WHITESPACE","\n\n        ",79],["T_RETURN","return",81],["T_WHITESPACE"," ",81],["T_VARIABLE","$this",81],";",["T_WHITESPACE","\n    ",81],"}",["T_WHITESPACE","\n\n    ",82],["T_DOC_COMMENT","\/**\n     * Customer login action\n     *\n     * @param Varien_Event_Observer $observer\n     * @return Mage_Reports_Model_Event_Observer\n     *\/",84],["T_WHITESPACE","\n    ",89],["T_PUBLIC","public",90],["T_WHITESPACE"," ",90],["T_FUNCTION","function",90],["T_WHITESPACE"," ",90],["T_STRING","customerLogin",90],"(",["T_STRING","Varien_Event_Observer",90],["T_WHITESPACE"," ",90],["T_VARIABLE","$observer",90],")",["T_WHITESPACE","\n    ",90],"{",["T_WHITESPACE","\n        ",91],["T_IF","if",92],["T_WHITESPACE"," ",92],"(","!",["T_STRING","Mage",92],["T_DOUBLE_COLON","::",92],["T_STRING","getSingleton",92],"(",["T_CONSTANT_ENCAPSED_STRING","'customer\/session'",92],")",["T_OBJECT_OPERATOR","->",92],["T_STRING","isLoggedIn",92],"(",")",["T_WHITESPACE"," ",92],["T_BOOLEAN_OR","||",92],["T_WHITESPACE"," ",92],"!",["T_VARIABLE","$this",92],["T_OBJECT_OPERATOR","->",92],["T_STRING","_enabledReports",92],")",["T_WHITESPACE"," ",92],"{",["T_WHITESPACE","\n            ",92],["T_RETURN","return",93],["T_WHITESPACE"," ",93],["T_VARIABLE","$this",93],";",["T_WHITESPACE","\n        ",93],"}",["T_WHITESPACE","\n\n        ",94],["T_VARIABLE","$visitorId",96],["T_WHITESPACE","  ",96],"=",["T_WHITESPACE"," ",96],["T_STRING","Mage",96],["T_DOUBLE_COLON","::",96],["T_STRING","getSingleton",96],"(",["T_CONSTANT_ENCAPSED_STRING","'log\/visitor'",96],")",["T_OBJECT_OPERATOR","->",96],["T_STRING","getId",96],"(",")",";",["T_WHITESPACE","\n        ",96],["T_VARIABLE","$customerId",97],["T_WHITESPACE"," ",97],"=",["T_WHITESPACE"," ",97],["T_STRING","Mage",97],["T_DOUBLE_COLON","::",97],["T_STRING","getSingleton",97],"(",["T_CONSTANT_ENCAPSED_STRING","'customer\/session'",97],")",["T_OBJECT_OPERATOR","->",97],["T_STRING","getCustomerId",97],"(",")",";",["T_WHITESPACE","\n        ",97],["T_VARIABLE","$eventModel",98],["T_WHITESPACE"," ",98],"=",["T_WHITESPACE"," ",98],["T_STRING","Mage",98],["T_DOUBLE_COLON","::",98],["T_STRING","getModel",98],"(",["T_CONSTANT_ENCAPSED_STRING","'reports\/event'",98],")",";",["T_WHITESPACE","\n        ",98],["T_VARIABLE","$eventModel",99],["T_OBJECT_OPERATOR","->",99],["T_STRING","updateCustomerType",99],"(",["T_VARIABLE","$visitorId",99],",",["T_WHITESPACE"," ",99],["T_VARIABLE","$customerId",99],")",";",["T_WHITESPACE","\n\n        ",99],["T_STRING","Mage",101],["T_DOUBLE_COLON","::",101],["T_STRING","getModel",101],"(",["T_CONSTANT_ENCAPSED_STRING","'reports\/product_index_compared'",101],")",["T_WHITESPACE","\n            ",101],["T_OBJECT_OPERATOR","->",102],["T_STRING","updateCustomerFromVisitor",102],"(",")",["T_WHITESPACE","\n            ",102],["T_OBJECT_OPERATOR","->",103],["T_STRING","calculate",103],"(",")",";",["T_WHITESPACE","\n        ",103],["T_STRING","Mage",104],["T_DOUBLE_COLON","::",104],["T_STRING","getModel",104],"(",["T_CONSTANT_ENCAPSED_STRING","'reports\/product_index_viewed'",104],")",["T_WHITESPACE","\n            ",104],["T_OBJECT_OPERATOR","->",105],["T_STRING","updateCustomerFromVisitor",105],"(",")",["T_WHITESPACE","\n            ",105],["T_OBJECT_OPERATOR","->",106],["T_STRING","calculate",106],"(",")",";",["T_WHITESPACE","\n\n        ",106],["T_RETURN","return",108],["T_WHITESPACE"," ",108],["T_VARIABLE","$this",108],";",["T_WHITESPACE","\n    ",108],"}",["T_WHITESPACE","\n\n    ",109],["T_DOC_COMMENT","\/**\n     * Customer logout processing\n     *\n     * @param Varien_Event_Observer $observer\n     * @return Mage_Reports_Model_Event_Observer\n     *\/",111],["T_WHITESPACE","\n    ",116],["T_PUBLIC","public",117],["T_WHITESPACE"," ",117],["T_FUNCTION","function",117],["T_WHITESPACE"," ",117],["T_STRING","customerLogout",117],"(",["T_STRING","Varien_Event_Observer",117],["T_WHITESPACE"," ",117],["T_VARIABLE","$observer",117],")",["T_WHITESPACE","\n    ",117],"{",["T_WHITESPACE","\n        ",118],["T_IF","if",119],["T_WHITESPACE"," ",119],"(",["T_VARIABLE","$this",119],["T_OBJECT_OPERATOR","->",119],["T_STRING","_enabledReports",119],")",["T_WHITESPACE"," ",119],"{",["T_WHITESPACE","\n            ",119],["T_STRING","Mage",120],["T_DOUBLE_COLON","::",120],["T_STRING","getModel",120],"(",["T_CONSTANT_ENCAPSED_STRING","'reports\/product_index_compared'",120],")",["T_WHITESPACE","\n                ",120],["T_OBJECT_OPERATOR","->",121],["T_STRING","purgeVisitorByCustomer",121],"(",")",["T_WHITESPACE","\n                ",121],["T_OBJECT_OPERATOR","->",122],["T_STRING","calculate",122],"(",")",";",["T_WHITESPACE","\n            ",122],["T_STRING","Mage",123],["T_DOUBLE_COLON","::",123],["T_STRING","getModel",123],"(",["T_CONSTANT_ENCAPSED_STRING","'reports\/product_index_viewed'",123],")",["T_WHITESPACE","\n                ",123],["T_OBJECT_OPERATOR","->",124],["T_STRING","purgeVisitorByCustomer",124],"(",")",["T_WHITESPACE","\n                ",124],["T_OBJECT_OPERATOR","->",125],["T_STRING","calculate",125],"(",")",";",["T_WHITESPACE","\n        ",125],"}",["T_WHITESPACE","\n\n        ",126],["T_RETURN","return",128],["T_WHITESPACE"," ",128],["T_VARIABLE","$this",128],";",["T_WHITESPACE","\n    ",128],"}",["T_WHITESPACE","\n\n    ",129],["T_DOC_COMMENT","\/**\n     * View Catalog Product action\n     *\n     * @param Varien_Event_Observer $observer\n     * @return Mage_Reports_Model_Event_Observer\n     *\/",131],["T_WHITESPACE","\n    ",136],["T_PUBLIC","public",137],["T_WHITESPACE"," ",137],["T_FUNCTION","function",137],["T_WHITESPACE"," ",137],["T_STRING","catalogProductView",137],"(",["T_STRING","Varien_Event_Observer",137],["T_WHITESPACE"," ",137],["T_VARIABLE","$observer",137],")",["T_WHITESPACE","\n    ",137],"{",["T_WHITESPACE","\n        ",138],["T_IF","if",139],["T_WHITESPACE"," ",139],"(","!",["T_VARIABLE","$this",139],["T_OBJECT_OPERATOR","->",139],["T_STRING","_enabledReports",139],")",["T_WHITESPACE"," ",139],"{",["T_WHITESPACE","\n            ",139],["T_RETURN","return",140],["T_WHITESPACE"," ",140],["T_VARIABLE","$this",140],";",["T_WHITESPACE","\n        ",140],"}",["T_WHITESPACE","\n\n        ",141],["T_VARIABLE","$productId",143],["T_WHITESPACE"," ",143],"=",["T_WHITESPACE"," ",143],["T_VARIABLE","$observer",143],["T_OBJECT_OPERATOR","->",143],["T_STRING","getEvent",143],"(",")",["T_OBJECT_OPERATOR","->",143],["T_STRING","getProduct",143],"(",")",["T_OBJECT_OPERATOR","->",143],["T_STRING","getId",143],"(",")",";",["T_WHITESPACE","\n\n        ",143],["T_STRING","Mage",145],["T_DOUBLE_COLON","::",145],["T_STRING","getModel",145],"(",["T_CONSTANT_ENCAPSED_STRING","'reports\/product_index_viewed'",145],")",["T_WHITESPACE","\n            ",145],["T_OBJECT_OPERATOR","->",146],["T_STRING","setProductId",146],"(",["T_VARIABLE","$productId",146],")",["T_WHITESPACE","\n            ",146],["T_OBJECT_OPERATOR","->",147],["T_STRING","save",147],"(",")",["T_WHITESPACE","\n            ",147],["T_OBJECT_OPERATOR","->",148],["T_STRING","calculate",148],"(",")",";",["T_WHITESPACE","\n\n        ",148],["T_RETURN","return",150],["T_WHITESPACE"," ",150],["T_VARIABLE","$this",150],["T_OBJECT_OPERATOR","->",150],["T_STRING","_event",150],"(",["T_STRING","Mage_Reports_Model_Event",150],["T_DOUBLE_COLON","::",150],["T_STRING","EVENT_PRODUCT_VIEW",150],",",["T_WHITESPACE"," ",150],["T_VARIABLE","$productId",150],")",";",["T_WHITESPACE","\n    ",150],"}",["T_WHITESPACE","\n\n    ",151],["T_DOC_COMMENT","\/**\n     * Send Product link to friends action\n     *\n     * @param Varien_Event_Observer $observer\n     * @return Mage_Reports_Model_Event_Observer\n     *\/",153],["T_WHITESPACE","\n    ",158],["T_PUBLIC","public",159],["T_WHITESPACE"," ",159],["T_FUNCTION","function",159],["T_WHITESPACE"," ",159],["T_STRING","sendfriendProduct",159],"(",["T_STRING","Varien_Event_Observer",159],["T_WHITESPACE"," ",159],["T_VARIABLE","$observer",159],")",["T_WHITESPACE","\n    ",159],"{",["T_WHITESPACE","\n        ",160],["T_IF","if",161],["T_WHITESPACE"," ",161],"(","!",["T_VARIABLE","$this",161],["T_OBJECT_OPERATOR","->",161],["T_STRING","_enabledReports",161],")",["T_WHITESPACE"," ",161],"{",["T_WHITESPACE","\n            ",161],["T_RETURN","return",162],["T_WHITESPACE"," ",162],["T_VARIABLE","$this",162],";",["T_WHITESPACE","\n        ",162],"}",["T_WHITESPACE","\n\n        ",163],["T_RETURN","return",165],["T_WHITESPACE"," ",165],["T_VARIABLE","$this",165],["T_OBJECT_OPERATOR","->",165],["T_STRING","_event",165],"(",["T_STRING","Mage_Reports_Model_Event",165],["T_DOUBLE_COLON","::",165],["T_STRING","EVENT_PRODUCT_SEND",165],",",["T_WHITESPACE","\n            ",165],["T_VARIABLE","$observer",166],["T_OBJECT_OPERATOR","->",166],["T_STRING","getEvent",166],"(",")",["T_OBJECT_OPERATOR","->",166],["T_STRING","getProduct",166],"(",")",["T_OBJECT_OPERATOR","->",166],["T_STRING","getId",166],"(",")",["T_WHITESPACE","\n        ",166],")",";",["T_WHITESPACE","\n    ",167],"}",["T_WHITESPACE","\n\n    ",168],["T_DOC_COMMENT","\/**\n     * Remove Product from Compare Products action\n     *\n     * Reset count of compared products cache\n     *\n     * @param Varien_Event_Observer $observer\n     * @return Mage_Reports_Model_Event_Observer\n     *\/",170],["T_WHITESPACE","\n    ",177],["T_PUBLIC","public",178],["T_WHITESPACE"," ",178],["T_FUNCTION","function",178],["T_WHITESPACE"," ",178],["T_STRING","catalogProductCompareRemoveProduct",178],"(",["T_STRING","Varien_Event_Observer",178],["T_WHITESPACE"," ",178],["T_VARIABLE","$observer",178],")",["T_WHITESPACE","\n    ",178],"{",["T_WHITESPACE","\n        ",179],["T_IF","if",180],["T_WHITESPACE"," ",180],"(",["T_VARIABLE","$this",180],["T_OBJECT_OPERATOR","->",180],["T_STRING","_enabledReports",180],")",["T_WHITESPACE"," ",180],"{",["T_WHITESPACE","\n            ",180],["T_STRING","Mage",181],["T_DOUBLE_COLON","::",181],["T_STRING","getModel",181],"(",["T_CONSTANT_ENCAPSED_STRING","'reports\/product_index_compared'",181],")",["T_OBJECT_OPERATOR","->",181],["T_STRING","calculate",181],"(",")",";",["T_WHITESPACE","\n        ",181],"}",["T_WHITESPACE","\n\n        ",182],["T_RETURN","return",184],["T_WHITESPACE"," ",184],["T_VARIABLE","$this",184],";",["T_WHITESPACE","\n    ",184],"}",["T_WHITESPACE","\n\n    ",185],["T_DOC_COMMENT","\/**\n     * Remove All Products from Compare Products\n     *\n     * Reset count of compared products cache\n     *\n     * @param Varien_Event_Observer $observer\n     * @return Mage_Reports_Model_Event_Observer\n     *\/",187],["T_WHITESPACE","\n    ",194],["T_PUBLIC","public",195],["T_WHITESPACE"," ",195],["T_FUNCTION","function",195],["T_WHITESPACE"," ",195],["T_STRING","catalogProductCompareClear",195],"(",["T_STRING","Varien_Event_Observer",195],["T_WHITESPACE"," ",195],["T_VARIABLE","$observer",195],")",["T_WHITESPACE","\n    ",195],"{",["T_WHITESPACE","\n        ",196],["T_IF","if",197],["T_WHITESPACE"," ",197],"(",["T_VARIABLE","$this",197],["T_OBJECT_OPERATOR","->",197],["T_STRING","_enabledReports",197],")",["T_WHITESPACE"," ",197],"{",["T_WHITESPACE","\n            ",197],["T_STRING","Mage",198],["T_DOUBLE_COLON","::",198],["T_STRING","getModel",198],"(",["T_CONSTANT_ENCAPSED_STRING","'reports\/product_index_compared'",198],")",["T_OBJECT_OPERATOR","->",198],["T_STRING","calculate",198],"(",")",";",["T_WHITESPACE","\n        ",198],"}",["T_WHITESPACE","\n\n        ",199],["T_RETURN","return",201],["T_WHITESPACE"," ",201],["T_VARIABLE","$this",201],";",["T_WHITESPACE","\n    ",201],"}",["T_WHITESPACE","\n\n    ",202],["T_DOC_COMMENT","\/**\n     * Add Product to Compare Products List action\n     *\n     * Reset count of compared products cache\n     *\n     * @param Varien_Event_Observer $observer\n     * @return unknown\n     *\/",204],["T_WHITESPACE","\n    ",211],["T_PUBLIC","public",212],["T_WHITESPACE"," ",212],["T_FUNCTION","function",212],["T_WHITESPACE"," ",212],["T_STRING","catalogProductCompareAddProduct",212],"(",["T_STRING","Varien_Event_Observer",212],["T_WHITESPACE"," ",212],["T_VARIABLE","$observer",212],")",["T_WHITESPACE","\n    ",212],"{",["T_WHITESPACE","\n        ",213],["T_IF","if",214],["T_WHITESPACE"," ",214],"(","!",["T_VARIABLE","$this",214],["T_OBJECT_OPERATOR","->",214],["T_STRING","_enabledReports",214],")",["T_WHITESPACE"," ",214],"{",["T_WHITESPACE","\n            ",214],["T_RETURN","return",215],["T_WHITESPACE"," ",215],["T_VARIABLE","$this",215],";",["T_WHITESPACE","\n        ",215],"}",["T_WHITESPACE","\n\n        ",216],["T_VARIABLE","$productId",218],["T_WHITESPACE"," ",218],"=",["T_WHITESPACE"," ",218],["T_VARIABLE","$observer",218],["T_OBJECT_OPERATOR","->",218],["T_STRING","getEvent",218],"(",")",["T_OBJECT_OPERATOR","->",218],["T_STRING","getProduct",218],"(",")",["T_OBJECT_OPERATOR","->",218],["T_STRING","getId",218],"(",")",";",["T_WHITESPACE","\n\n        ",218],["T_STRING","Mage",220],["T_DOUBLE_COLON","::",220],["T_STRING","getModel",220],"(",["T_CONSTANT_ENCAPSED_STRING","'reports\/product_index_compared'",220],")",["T_WHITESPACE","\n            ",220],["T_OBJECT_OPERATOR","->",221],["T_STRING","setProductId",221],"(",["T_VARIABLE","$productId",221],")",["T_WHITESPACE","\n            ",221],["T_OBJECT_OPERATOR","->",222],["T_STRING","save",222],"(",")",["T_WHITESPACE","\n            ",222],["T_OBJECT_OPERATOR","->",223],["T_STRING","calculate",223],"(",")",";",["T_WHITESPACE","\n\n        ",223],["T_RETURN","return",225],["T_WHITESPACE"," ",225],["T_VARIABLE","$this",225],["T_OBJECT_OPERATOR","->",225],["T_STRING","_event",225],"(",["T_STRING","Mage_Reports_Model_Event",225],["T_DOUBLE_COLON","::",225],["T_STRING","EVENT_PRODUCT_COMPARE",225],",",["T_WHITESPACE"," ",225],["T_VARIABLE","$productId",225],")",";",["T_WHITESPACE","\n    ",225],"}",["T_WHITESPACE","\n\n    ",226],["T_DOC_COMMENT","\/**\n     * Add product to shopping cart action\n     *\n     * @param Varien_Event_Observer $observer\n     * @return Mage_Reports_Model_Event_Observer\n     *\/",228],["T_WHITESPACE","\n    ",233],["T_PUBLIC","public",234],["T_WHITESPACE"," ",234],["T_FUNCTION","function",234],["T_WHITESPACE"," ",234],["T_STRING","checkoutCartAddProduct",234],"(",["T_STRING","Varien_Event_Observer",234],["T_WHITESPACE"," ",234],["T_VARIABLE","$observer",234],")",["T_WHITESPACE","\n    ",234],"{",["T_WHITESPACE","\n        ",235],["T_IF","if",236],["T_WHITESPACE"," ",236],"(",["T_VARIABLE","$this",236],["T_OBJECT_OPERATOR","->",236],["T_STRING","_enabledReports",236],")",["T_WHITESPACE"," ",236],"{",["T_WHITESPACE","\n            ",236],["T_VARIABLE","$quoteItem",237],["T_WHITESPACE"," ",237],"=",["T_WHITESPACE"," ",237],["T_VARIABLE","$observer",237],["T_OBJECT_OPERATOR","->",237],["T_STRING","getEvent",237],"(",")",["T_OBJECT_OPERATOR","->",237],["T_STRING","getItem",237],"(",")",";",["T_WHITESPACE","\n            ",237],["T_IF","if",238],["T_WHITESPACE"," ",238],"(","!",["T_VARIABLE","$quoteItem",238],["T_OBJECT_OPERATOR","->",238],["T_STRING","getId",238],"(",")",["T_WHITESPACE"," ",238],["T_BOOLEAN_AND","&&",238],["T_WHITESPACE"," ",238],"!",["T_VARIABLE","$quoteItem",238],["T_OBJECT_OPERATOR","->",238],["T_STRING","getParentItem",238],"(",")",")",["T_WHITESPACE"," ",238],"{",["T_WHITESPACE","\n                ",238],["T_VARIABLE","$productId",239],["T_WHITESPACE"," ",239],"=",["T_WHITESPACE"," ",239],["T_VARIABLE","$quoteItem",239],["T_OBJECT_OPERATOR","->",239],["T_STRING","getProductId",239],"(",")",";",["T_WHITESPACE","\n                ",239],["T_VARIABLE","$this",240],["T_OBJECT_OPERATOR","->",240],["T_STRING","_event",240],"(",["T_STRING","Mage_Reports_Model_Event",240],["T_DOUBLE_COLON","::",240],["T_STRING","EVENT_PRODUCT_TO_CART",240],",",["T_WHITESPACE"," ",240],["T_VARIABLE","$productId",240],")",";",["T_WHITESPACE","\n            ",240],"}",["T_WHITESPACE","\n        ",241],"}",["T_WHITESPACE","\n\n        ",242],["T_RETURN","return",244],["T_WHITESPACE"," ",244],["T_VARIABLE","$this",244],";",["T_WHITESPACE","\n    ",244],"}",["T_WHITESPACE","\n\n    ",245],["T_DOC_COMMENT","\/**\n     * Add product to wishlist action\n     *\n     * @param Varien_Event_Observer $observer\n     * @return Mage_Reports_Model_Event_Observer\n     *\/",247],["T_WHITESPACE","\n    ",252],["T_PUBLIC","public",253],["T_WHITESPACE"," ",253],["T_FUNCTION","function",253],["T_WHITESPACE"," ",253],["T_STRING","wishlistAddProduct",253],"(",["T_STRING","Varien_Event_Observer",253],["T_WHITESPACE"," ",253],["T_VARIABLE","$observer",253],")",["T_WHITESPACE","\n    ",253],"{",["T_WHITESPACE","\n        ",254],["T_IF","if",255],["T_WHITESPACE"," ",255],"(","!",["T_VARIABLE","$this",255],["T_OBJECT_OPERATOR","->",255],["T_STRING","_enabledReports",255],")",["T_WHITESPACE"," ",255],"{",["T_WHITESPACE","\n            ",255],["T_RETURN","return",256],["T_WHITESPACE"," ",256],["T_VARIABLE","$this",256],";",["T_WHITESPACE","\n        ",256],"}",["T_WHITESPACE","\n\n        ",257],["T_RETURN","return",259],["T_WHITESPACE"," ",259],["T_VARIABLE","$this",259],["T_OBJECT_OPERATOR","->",259],["T_STRING","_event",259],"(",["T_STRING","Mage_Reports_Model_Event",259],["T_DOUBLE_COLON","::",259],["T_STRING","EVENT_PRODUCT_TO_WISHLIST",259],",",["T_WHITESPACE","\n            ",259],["T_VARIABLE","$observer",260],["T_OBJECT_OPERATOR","->",260],["T_STRING","getEvent",260],"(",")",["T_OBJECT_OPERATOR","->",260],["T_STRING","getProduct",260],"(",")",["T_OBJECT_OPERATOR","->",260],["T_STRING","getId",260],"(",")",["T_WHITESPACE","\n        ",260],")",";",["T_WHITESPACE","\n    ",261],"}",["T_WHITESPACE","\n\n    ",262],["T_DOC_COMMENT","\/**\n     * Share customer wishlist action\n     *\n     * @param Varien_Event_Observer $observer\n     * @return Mage_Reports_Model_Event_Observer\n     *\/",264],["T_WHITESPACE","\n    ",269],["T_PUBLIC","public",270],["T_WHITESPACE"," ",270],["T_FUNCTION","function",270],["T_WHITESPACE"," ",270],["T_STRING","wishlistShare",270],"(",["T_STRING","Varien_Event_Observer",270],["T_WHITESPACE"," ",270],["T_VARIABLE","$observer",270],")",["T_WHITESPACE","\n    ",270],"{",["T_WHITESPACE","\n        ",271],["T_IF","if",272],["T_WHITESPACE"," ",272],"(","!",["T_VARIABLE","$this",272],["T_OBJECT_OPERATOR","->",272],["T_STRING","_enabledReports",272],")",["T_WHITESPACE"," ",272],"{",["T_WHITESPACE","\n            ",272],["T_RETURN","return",273],["T_WHITESPACE"," ",273],["T_VARIABLE","$this",273],";",["T_WHITESPACE","\n        ",273],"}",["T_WHITESPACE","\n\n        ",274],["T_RETURN","return",276],["T_WHITESPACE"," ",276],["T_VARIABLE","$this",276],["T_OBJECT_OPERATOR","->",276],["T_STRING","_event",276],"(",["T_STRING","Mage_Reports_Model_Event",276],["T_DOUBLE_COLON","::",276],["T_STRING","EVENT_WISHLIST_SHARE",276],",",["T_WHITESPACE","\n            ",276],["T_VARIABLE","$observer",277],["T_OBJECT_OPERATOR","->",277],["T_STRING","getEvent",277],"(",")",["T_OBJECT_OPERATOR","->",277],["T_STRING","getWishlist",277],"(",")",["T_OBJECT_OPERATOR","->",277],["T_STRING","getId",277],"(",")",["T_WHITESPACE","\n        ",277],")",";",["T_WHITESPACE","\n    ",278],"}",["T_WHITESPACE","\n\n    ",279],["T_DOC_COMMENT","\/**\n     * Clean events by old visitors\n     *\n     * @see Global Log Clean Settings\n     *\n     * @param Varien_Event_Observer $observer\n     * @return Mage_Reports_Model_Event_Observer\n     *\/",281],["T_WHITESPACE","\n    ",288],["T_PUBLIC","public",289],["T_WHITESPACE"," ",289],["T_FUNCTION","function",289],["T_WHITESPACE"," ",289],["T_STRING","eventClean",289],"(",["T_STRING","Varien_Event_Observer",289],["T_WHITESPACE"," ",289],["T_VARIABLE","$observer",289],")",["T_WHITESPACE","\n    ",289],"{",["T_WHITESPACE","\n        ",290],["T_COMMENT","\/* @var $event Mage_Reports_Model_Event *\/",291],["T_WHITESPACE","\n        ",291],["T_VARIABLE","$event",292],["T_WHITESPACE"," ",292],"=",["T_WHITESPACE"," ",292],["T_STRING","Mage",292],["T_DOUBLE_COLON","::",292],["T_STRING","getModel",292],"(",["T_CONSTANT_ENCAPSED_STRING","'reports\/event'",292],")",";",["T_WHITESPACE","\n        ",292],["T_VARIABLE","$event",293],["T_OBJECT_OPERATOR","->",293],["T_STRING","clean",293],"(",")",";",["T_WHITESPACE","\n\n        ",293],["T_STRING","Mage",295],["T_DOUBLE_COLON","::",295],["T_STRING","getModel",295],"(",["T_CONSTANT_ENCAPSED_STRING","'reports\/product_index_compared'",295],")",["T_OBJECT_OPERATOR","->",295],["T_STRING","clean",295],"(",")",";",["T_WHITESPACE","\n        ",295],["T_STRING","Mage",296],["T_DOUBLE_COLON","::",296],["T_STRING","getModel",296],"(",["T_CONSTANT_ENCAPSED_STRING","'reports\/product_index_viewed'",296],")",["T_OBJECT_OPERATOR","->",296],["T_STRING","clean",296],"(",")",";",["T_WHITESPACE","\n\n        ",296],["T_RETURN","return",298],["T_WHITESPACE"," ",298],["T_VARIABLE","$this",298],";",["T_WHITESPACE","\n    ",298],"}",["T_WHITESPACE","\n",299],"}",["T_WHITESPACE","\n",300]]
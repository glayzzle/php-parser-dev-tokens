[["T_OPEN_TAG","<?php\n",1],["T_DOC_COMMENT","\/**\n * Magento\n *\n * NOTICE OF LICENSE\n *\n * This source file is subject to the Open Software License (OSL 3.0)\n * that is bundled with this package in the file LICENSE.txt.\n * It is also available through the world-wide-web at this URL:\n * http:\/\/opensource.org\/licenses\/osl-3.0.php\n * If you did not receive a copy of the license and are unable to\n * obtain it through the world-wide-web, please send an email\n * to license@magento.com so we can send you a copy immediately.\n *\n * DISCLAIMER\n *\n * Do not edit or add to this file if you wish to upgrade Magento to newer\n * versions in the future. If you wish to customize Magento for your\n * needs please refer to http:\/\/www.magento.com for more information.\n *\n * @category    Mage\n * @package     Mage_Reports\n * @copyright  Copyright (c) 2006-2016 X.commerce, Inc. and affiliates (http:\/\/www.magento.com)\n * @license    http:\/\/opensource.org\/licenses\/osl-3.0.php  Open Software License (OSL 3.0)\n *\/",2],["T_WHITESPACE","\n\n\n",25],["T_DOC_COMMENT","\/**\n * Reports quote collection\n *\n * @category    Mage\n * @package     Mage_Reports\n * @author      Magento Core Team <core@magentocommerce.com>\n *\/",28],["T_WHITESPACE","\n",34],["T_CLASS","class",35],["T_WHITESPACE"," ",35],["T_STRING","Mage_Reports_Model_Resource_Quote_Collection",35],["T_WHITESPACE"," ",35],["T_EXTENDS","extends",35],["T_WHITESPACE"," ",35],["T_STRING","Mage_Sales_Model_Resource_Quote_Collection",35],["T_WHITESPACE","\n",35],"{",["T_WHITESPACE","\n\n    ",36],["T_CONST","const",38],["T_WHITESPACE"," ",38],["T_STRING","SELECT_COUNT_SQL_TYPE_CART",38],["T_WHITESPACE"," ",38],"=",["T_WHITESPACE"," ",38],["T_LNUMBER","1",38],";",["T_WHITESPACE","\n\n    ",38],["T_PROTECTED","protected",40],["T_WHITESPACE"," ",40],["T_VARIABLE","$_selectCountSqlType",40],["T_WHITESPACE"," ",40],"=",["T_WHITESPACE"," ",40],["T_LNUMBER","0",40],";",["T_WHITESPACE","\n\n    ",40],["T_DOC_COMMENT","\/**\n     * Join fields\n     *\n     * @var array\n     *\/",42],["T_WHITESPACE","\n    ",46],["T_PROTECTED","protected",47],["T_WHITESPACE"," ",47],["T_VARIABLE","$_joinedFields",47],["T_WHITESPACE","     ",47],"=",["T_WHITESPACE"," ",47],["T_ARRAY","array",47],"(",")",";",["T_WHITESPACE","\n\n    ",47],["T_DOC_COMMENT","\/**\n     * Map\n     *\n     * @var array\n     *\/",49],["T_WHITESPACE","\n    ",53],["T_PROTECTED","protected",54],["T_WHITESPACE"," ",54],["T_VARIABLE","$_map",54],["T_WHITESPACE","              ",54],"=",["T_WHITESPACE"," ",54],["T_ARRAY","array",54],"(",["T_CONSTANT_ENCAPSED_STRING","'fields'",54],["T_WHITESPACE"," ",54],["T_DOUBLE_ARROW","=>",54],["T_WHITESPACE"," ",54],["T_ARRAY","array",54],"(",["T_CONSTANT_ENCAPSED_STRING","'store_id'",54],["T_WHITESPACE"," ",54],["T_DOUBLE_ARROW","=>",54],["T_WHITESPACE"," ",54],["T_CONSTANT_ENCAPSED_STRING","'main_table.store_id'",54],")",")",";",["T_WHITESPACE","\n\n    ",54],["T_DOC_COMMENT","\/**\n     * Set type for COUNT SQL select\n     *\n     * @param int $type\n     * @return Mage_Reports_Model_Mysql4_Quote_Collection\n     *\/",56],["T_WHITESPACE","\n    ",61],["T_PUBLIC","public",62],["T_WHITESPACE"," ",62],["T_FUNCTION","function",62],["T_WHITESPACE"," ",62],["T_STRING","setSelectCountSqlType",62],"(",["T_VARIABLE","$type",62],")",["T_WHITESPACE","\n    ",62],"{",["T_WHITESPACE","\n        ",63],["T_VARIABLE","$this",64],["T_OBJECT_OPERATOR","->",64],["T_STRING","_selectCountSqlType",64],["T_WHITESPACE"," ",64],"=",["T_WHITESPACE"," ",64],["T_VARIABLE","$type",64],";",["T_WHITESPACE","\n        ",64],["T_RETURN","return",65],["T_WHITESPACE"," ",65],["T_VARIABLE","$this",65],";",["T_WHITESPACE","\n    ",65],"}",["T_WHITESPACE","\n\n    ",66],["T_PROTECTED","protected",68],["T_WHITESPACE"," ",68],["T_FUNCTION","function",68],["T_WHITESPACE"," ",68],["T_STRING","_construct",68],"(",")",["T_WHITESPACE","\n    ",68],"{",["T_WHITESPACE","\n        ",69],["T_STRING","parent",70],["T_DOUBLE_COLON","::",70],["T_STRING","_construct",70],"(",")",";",["T_WHITESPACE","\n        ",70],["T_DOC_COMMENT","\/**\n         * Allow to use analytic function\n         *\/",71],["T_WHITESPACE","\n        ",73],["T_VARIABLE","$this",74],["T_OBJECT_OPERATOR","->",74],["T_STRING","_useAnalyticFunction",74],["T_WHITESPACE"," ",74],"=",["T_WHITESPACE"," ",74],["T_STRING","true",74],";",["T_WHITESPACE","\n    ",74],"}",["T_WHITESPACE","\n\n\n    ",75],["T_DOC_COMMENT","\/**\n     * Prepare for abandoned report\n     *\n     * @param array $storeIds\n     * @param string $filter\n     * @return Mage_Reports_Model_Resource_Quote_Collection\n     *\/",78],["T_WHITESPACE","\n    ",84],["T_PUBLIC","public",85],["T_WHITESPACE"," ",85],["T_FUNCTION","function",85],["T_WHITESPACE"," ",85],["T_STRING","prepareForAbandonedReport",85],"(",["T_VARIABLE","$storeIds",85],",",["T_WHITESPACE"," ",85],["T_VARIABLE","$filter",85],["T_WHITESPACE"," ",85],"=",["T_WHITESPACE"," ",85],["T_STRING","null",85],")",["T_WHITESPACE","\n    ",85],"{",["T_WHITESPACE","\n        ",86],["T_VARIABLE","$this",87],["T_OBJECT_OPERATOR","->",87],["T_STRING","addFieldToFilter",87],"(",["T_CONSTANT_ENCAPSED_STRING","'items_count'",87],",",["T_WHITESPACE"," ",87],["T_ARRAY","array",87],"(",["T_CONSTANT_ENCAPSED_STRING","'neq'",87],["T_WHITESPACE"," ",87],["T_DOUBLE_ARROW","=>",87],["T_WHITESPACE"," ",87],["T_CONSTANT_ENCAPSED_STRING","'0'",87],")",")",["T_WHITESPACE","\n            ",87],["T_OBJECT_OPERATOR","->",88],["T_STRING","addFieldToFilter",88],"(",["T_CONSTANT_ENCAPSED_STRING","'main_table.is_active'",88],",",["T_WHITESPACE"," ",88],["T_CONSTANT_ENCAPSED_STRING","'1'",88],")",["T_WHITESPACE","\n            ",88],["T_OBJECT_OPERATOR","->",89],["T_STRING","addSubtotal",89],"(",["T_VARIABLE","$storeIds",89],",",["T_WHITESPACE"," ",89],["T_VARIABLE","$filter",89],")",["T_WHITESPACE","\n            ",89],["T_OBJECT_OPERATOR","->",90],["T_STRING","addCustomerData",90],"(",["T_VARIABLE","$filter",90],")",["T_WHITESPACE","\n            ",90],["T_OBJECT_OPERATOR","->",91],["T_STRING","setOrder",91],"(",["T_CONSTANT_ENCAPSED_STRING","'updated_at'",91],")",";",["T_WHITESPACE","\n        ",91],["T_IF","if",92],["T_WHITESPACE"," ",92],"(",["T_STRING","is_array",92],"(",["T_VARIABLE","$storeIds",92],")",["T_WHITESPACE"," ",92],["T_BOOLEAN_AND","&&",92],["T_WHITESPACE"," ",92],"!",["T_EMPTY","empty",92],"(",["T_VARIABLE","$storeIds",92],")",")",["T_WHITESPACE"," ",92],"{",["T_WHITESPACE","\n            ",92],["T_VARIABLE","$this",93],["T_OBJECT_OPERATOR","->",93],["T_STRING","addFieldToFilter",93],"(",["T_CONSTANT_ENCAPSED_STRING","'store_id'",93],",",["T_WHITESPACE"," ",93],["T_ARRAY","array",93],"(",["T_CONSTANT_ENCAPSED_STRING","'in'",93],["T_WHITESPACE"," ",93],["T_DOUBLE_ARROW","=>",93],["T_WHITESPACE"," ",93],["T_VARIABLE","$storeIds",93],")",")",";",["T_WHITESPACE","\n        ",93],"}",["T_WHITESPACE","\n\n\n        ",94],["T_RETURN","return",97],["T_WHITESPACE"," ",97],["T_VARIABLE","$this",97],";",["T_WHITESPACE","\n    ",97],"}",["T_WHITESPACE","\n\n    ",98],["T_DOC_COMMENT","\/**\n     * Prepare select query for products in carts report\n     *\n     * @return Mage_Reports_Model_Resource_Quote_Collection\n     *\/",100],["T_WHITESPACE","\n    ",104],["T_PUBLIC","public",105],["T_WHITESPACE"," ",105],["T_FUNCTION","function",105],["T_WHITESPACE"," ",105],["T_STRING","prepareForProductsInCarts",105],"(",")",["T_WHITESPACE","\n    ",105],"{",["T_WHITESPACE","\n        ",106],["T_VARIABLE","$productEntity",107],["T_WHITESPACE","          ",107],"=",["T_WHITESPACE"," ",107],["T_STRING","Mage",107],["T_DOUBLE_COLON","::",107],["T_STRING","getResourceSingleton",107],"(",["T_CONSTANT_ENCAPSED_STRING","'catalog\/product_collection'",107],")",";",["T_WHITESPACE","\n        ",107],["T_VARIABLE","$productAttrName",108],["T_WHITESPACE","        ",108],"=",["T_WHITESPACE"," ",108],["T_VARIABLE","$productEntity",108],["T_OBJECT_OPERATOR","->",108],["T_STRING","getAttribute",108],"(",["T_CONSTANT_ENCAPSED_STRING","'name'",108],")",";",["T_WHITESPACE","\n        ",108],["T_VARIABLE","$productAttrNameId",109],["T_WHITESPACE","      ",109],"=",["T_WHITESPACE"," ",109],["T_INT_CAST","(int)",109],["T_WHITESPACE"," ",109],["T_VARIABLE","$productAttrName",109],["T_OBJECT_OPERATOR","->",109],["T_STRING","getAttributeId",109],"(",")",";",["T_WHITESPACE","\n        ",109],["T_VARIABLE","$productAttrNameTable",110],["T_WHITESPACE","   ",110],"=",["T_WHITESPACE"," ",110],["T_VARIABLE","$productAttrName",110],["T_OBJECT_OPERATOR","->",110],["T_STRING","getBackend",110],"(",")",["T_OBJECT_OPERATOR","->",110],["T_STRING","getTable",110],"(",")",";",["T_WHITESPACE","\n        ",110],["T_VARIABLE","$productAttrPrice",111],["T_WHITESPACE","       ",111],"=",["T_WHITESPACE"," ",111],["T_VARIABLE","$productEntity",111],["T_OBJECT_OPERATOR","->",111],["T_STRING","getAttribute",111],"(",["T_CONSTANT_ENCAPSED_STRING","'price'",111],")",";",["T_WHITESPACE","\n        ",111],["T_VARIABLE","$productAttrPriceId",112],["T_WHITESPACE","     ",112],"=",["T_WHITESPACE"," ",112],["T_INT_CAST","(int)",112],["T_WHITESPACE"," ",112],["T_VARIABLE","$productAttrPrice",112],["T_OBJECT_OPERATOR","->",112],["T_STRING","getAttributeId",112],"(",")",";",["T_WHITESPACE","\n        ",112],["T_VARIABLE","$productAttrPriceTable",113],["T_WHITESPACE","  ",113],"=",["T_WHITESPACE"," ",113],["T_VARIABLE","$productAttrPrice",113],["T_OBJECT_OPERATOR","->",113],["T_STRING","getBackend",113],"(",")",["T_OBJECT_OPERATOR","->",113],["T_STRING","getTable",113],"(",")",";",["T_WHITESPACE","\n\n        ",113],["T_VARIABLE","$ordersSubSelect",115],["T_WHITESPACE"," ",115],"=",["T_WHITESPACE"," ",115],["T_CLONE","clone",115],["T_WHITESPACE"," ",115],["T_VARIABLE","$this",115],["T_OBJECT_OPERATOR","->",115],["T_STRING","getSelect",115],"(",")",";",["T_WHITESPACE","\n        ",115],["T_VARIABLE","$ordersSubSelect",116],["T_OBJECT_OPERATOR","->",116],["T_STRING","reset",116],"(",")",["T_WHITESPACE","\n            ",116],["T_OBJECT_OPERATOR","->",117],["T_STRING","from",117],"(",["T_WHITESPACE","\n                ",117],["T_ARRAY","array",118],"(",["T_CONSTANT_ENCAPSED_STRING","'oi'",118],["T_WHITESPACE"," ",118],["T_DOUBLE_ARROW","=>",118],["T_WHITESPACE"," ",118],["T_VARIABLE","$this",118],["T_OBJECT_OPERATOR","->",118],["T_STRING","getTable",118],"(",["T_CONSTANT_ENCAPSED_STRING","'sales\/order_item'",118],")",")",",",["T_WHITESPACE","\n                ",118],["T_ARRAY","array",119],"(",["T_WHITESPACE","\n                   ",119],["T_CONSTANT_ENCAPSED_STRING","'orders'",120],["T_WHITESPACE"," ",120],["T_DOUBLE_ARROW","=>",120],["T_WHITESPACE"," ",120],["T_NEW","new",120],["T_WHITESPACE"," ",120],["T_STRING","Zend_Db_Expr",120],"(",["T_CONSTANT_ENCAPSED_STRING","'COUNT(1)'",120],")",",",["T_WHITESPACE","\n                   ",120],["T_CONSTANT_ENCAPSED_STRING","'product_id'",121],")",")",["T_WHITESPACE","\n            ",121],["T_OBJECT_OPERATOR","->",122],["T_STRING","group",122],"(",["T_CONSTANT_ENCAPSED_STRING","'oi.product_id'",122],")",";",["T_WHITESPACE","\n\n        ",122],["T_VARIABLE","$this",124],["T_OBJECT_OPERATOR","->",124],["T_STRING","getSelect",124],"(",")",["T_WHITESPACE","\n            ",124],["T_OBJECT_OPERATOR","->",125],["T_STRING","useStraightJoin",125],"(",["T_STRING","true",125],")",["T_WHITESPACE","\n            ",125],["T_OBJECT_OPERATOR","->",126],["T_STRING","reset",126],"(",["T_STRING","Zend_Db_Select",126],["T_DOUBLE_COLON","::",126],["T_STRING","COLUMNS",126],")",["T_WHITESPACE","\n            ",126],["T_OBJECT_OPERATOR","->",127],["T_STRING","joinInner",127],"(",["T_WHITESPACE","\n                ",127],["T_ARRAY","array",128],"(",["T_CONSTANT_ENCAPSED_STRING","'quote_items'",128],["T_WHITESPACE"," ",128],["T_DOUBLE_ARROW","=>",128],["T_WHITESPACE"," ",128],["T_VARIABLE","$this",128],["T_OBJECT_OPERATOR","->",128],["T_STRING","getTable",128],"(",["T_CONSTANT_ENCAPSED_STRING","'sales\/quote_item'",128],")",")",",",["T_WHITESPACE","\n                ",128],["T_CONSTANT_ENCAPSED_STRING","'quote_items.quote_id = main_table.entity_id'",129],",",["T_WHITESPACE","\n                ",129],["T_STRING","null",130],")",["T_WHITESPACE","\n            ",130],["T_OBJECT_OPERATOR","->",131],["T_STRING","joinInner",131],"(",["T_WHITESPACE","\n                ",131],["T_ARRAY","array",132],"(",["T_CONSTANT_ENCAPSED_STRING","'e'",132],["T_WHITESPACE"," ",132],["T_DOUBLE_ARROW","=>",132],["T_WHITESPACE"," ",132],["T_VARIABLE","$this",132],["T_OBJECT_OPERATOR","->",132],["T_STRING","getTable",132],"(",["T_CONSTANT_ENCAPSED_STRING","'catalog\/product'",132],")",")",",",["T_WHITESPACE","\n                ",132],["T_CONSTANT_ENCAPSED_STRING","'e.entity_id = quote_items.product_id'",133],",",["T_WHITESPACE","\n                ",133],["T_STRING","null",134],")",["T_WHITESPACE","\n            ",134],["T_OBJECT_OPERATOR","->",135],["T_STRING","joinInner",135],"(",["T_WHITESPACE","\n                ",135],["T_ARRAY","array",136],"(",["T_CONSTANT_ENCAPSED_STRING","'product_name'",136],["T_WHITESPACE"," ",136],["T_DOUBLE_ARROW","=>",136],["T_WHITESPACE"," ",136],["T_VARIABLE","$productAttrNameTable",136],")",",",["T_WHITESPACE","\n                ",136],"\"",["T_ENCAPSED_AND_WHITESPACE","product_name.entity_id = e.entity_id AND product_name.attribute_id = ",137],["T_CURLY_OPEN","{",137],["T_VARIABLE","$productAttrNameId",137],"}","\"",",",["T_WHITESPACE","\n                ",137],["T_ARRAY","array",138],"(",["T_CONSTANT_ENCAPSED_STRING","'name'",138],["T_DOUBLE_ARROW","=>",138],["T_CONSTANT_ENCAPSED_STRING","'product_name.value'",138],")",")",["T_WHITESPACE","\n            ",138],["T_OBJECT_OPERATOR","->",139],["T_STRING","joinInner",139],"(",["T_WHITESPACE","\n                ",139],["T_ARRAY","array",140],"(",["T_CONSTANT_ENCAPSED_STRING","'product_price'",140],["T_WHITESPACE"," ",140],["T_DOUBLE_ARROW","=>",140],["T_WHITESPACE"," ",140],["T_VARIABLE","$productAttrPriceTable",140],")",",",["T_WHITESPACE","\n                ",140],"\"",["T_ENCAPSED_AND_WHITESPACE","product_price.entity_id = e.entity_id AND product_price.attribute_id = ",141],["T_CURLY_OPEN","{",141],["T_VARIABLE","$productAttrPriceId",141],"}","\"",",",["T_WHITESPACE","\n                ",141],["T_ARRAY","array",142],"(",["T_CONSTANT_ENCAPSED_STRING","'price'",142],["T_WHITESPACE"," ",142],["T_DOUBLE_ARROW","=>",142],["T_WHITESPACE"," ",142],["T_NEW","new",142],["T_WHITESPACE"," ",142],["T_STRING","Zend_Db_Expr",142],"(",["T_CONSTANT_ENCAPSED_STRING","'product_price.value * main_table.base_to_global_rate'",142],")",")",")",["T_WHITESPACE","\n            ",142],["T_OBJECT_OPERATOR","->",143],["T_STRING","joinLeft",143],"(",["T_WHITESPACE","\n                ",143],["T_ARRAY","array",144],"(",["T_CONSTANT_ENCAPSED_STRING","'order_items'",144],["T_WHITESPACE"," ",144],["T_DOUBLE_ARROW","=>",144],["T_WHITESPACE"," ",144],["T_NEW","new",144],["T_WHITESPACE"," ",144],["T_STRING","Zend_Db_Expr",144],"(",["T_STRING","sprintf",144],"(",["T_CONSTANT_ENCAPSED_STRING","'(%s)'",144],",",["T_WHITESPACE"," ",144],["T_VARIABLE","$ordersSubSelect",144],")",")",")",",",["T_WHITESPACE","\n                ",144],["T_CONSTANT_ENCAPSED_STRING","'order_items.product_id = e.entity_id'",145],",",["T_WHITESPACE","\n                ",145],["T_ARRAY","array",146],"(",")",["T_WHITESPACE","\n            ",146],")",["T_WHITESPACE","\n            ",147],["T_OBJECT_OPERATOR","->",148],["T_STRING","columns",148],"(",["T_CONSTANT_ENCAPSED_STRING","'e.*'",148],")",["T_WHITESPACE","\n            ",148],["T_OBJECT_OPERATOR","->",149],["T_STRING","columns",149],"(",["T_ARRAY","array",149],"(",["T_CONSTANT_ENCAPSED_STRING","'carts'",149],["T_WHITESPACE"," ",149],["T_DOUBLE_ARROW","=>",149],["T_WHITESPACE"," ",149],["T_NEW","new",149],["T_WHITESPACE"," ",149],["T_STRING","Zend_Db_Expr",149],"(",["T_CONSTANT_ENCAPSED_STRING","'COUNT(quote_items.item_id)'",149],")",")",")",["T_WHITESPACE","\n            ",149],["T_OBJECT_OPERATOR","->",150],["T_STRING","columns",150],"(",["T_CONSTANT_ENCAPSED_STRING","'order_items.orders'",150],")",["T_WHITESPACE","\n            ",150],["T_OBJECT_OPERATOR","->",151],["T_STRING","where",151],"(",["T_CONSTANT_ENCAPSED_STRING","'main_table.is_active = ?'",151],",",["T_WHITESPACE"," ",151],["T_LNUMBER","1",151],")",["T_WHITESPACE","\n            ",151],["T_OBJECT_OPERATOR","->",152],["T_STRING","group",152],"(",["T_CONSTANT_ENCAPSED_STRING","'quote_items.product_id'",152],")",";",["T_WHITESPACE","\n\n        ",152],["T_RETURN","return",154],["T_WHITESPACE"," ",154],["T_VARIABLE","$this",154],";",["T_WHITESPACE","\n    ",154],"}",["T_WHITESPACE","\n\n    ",155],["T_DOC_COMMENT","\/**\n     * Add store ids to filter\n     *\n     * @param array $storeIds\n     * @return Mage_Reports_Model_Resource_Quote_Collection\n     *\/",157],["T_WHITESPACE","\n    ",162],["T_PUBLIC","public",163],["T_WHITESPACE"," ",163],["T_FUNCTION","function",163],["T_WHITESPACE"," ",163],["T_STRING","addStoreFilter",163],"(",["T_VARIABLE","$storeIds",163],")",["T_WHITESPACE","\n    ",163],"{",["T_WHITESPACE","\n        ",164],["T_VARIABLE","$this",165],["T_OBJECT_OPERATOR","->",165],["T_STRING","addFieldToFilter",165],"(",["T_CONSTANT_ENCAPSED_STRING","'store_id'",165],",",["T_WHITESPACE"," ",165],["T_ARRAY","array",165],"(",["T_CONSTANT_ENCAPSED_STRING","'in'",165],["T_WHITESPACE"," ",165],["T_DOUBLE_ARROW","=>",165],["T_WHITESPACE"," ",165],["T_VARIABLE","$storeIds",165],")",")",";",["T_WHITESPACE","\n        ",165],["T_RETURN","return",166],["T_WHITESPACE"," ",166],["T_VARIABLE","$this",166],";",["T_WHITESPACE","\n    ",166],"}",["T_WHITESPACE","\n\n    ",167],["T_DOC_COMMENT","\/**\n     * Add customer data\n     *\n     * @param unknown_type $filter\n     * @return Mage_Reports_Model_Resource_Quote_Collection\n     *\/",169],["T_WHITESPACE","\n    ",174],["T_PUBLIC","public",175],["T_WHITESPACE"," ",175],["T_FUNCTION","function",175],["T_WHITESPACE"," ",175],["T_STRING","addCustomerData",175],"(",["T_VARIABLE","$filter",175],["T_WHITESPACE"," ",175],"=",["T_WHITESPACE"," ",175],["T_STRING","null",175],")",["T_WHITESPACE","\n    ",175],"{",["T_WHITESPACE","\n        ",176],["T_VARIABLE","$customerEntity",177],["T_WHITESPACE","          ",177],"=",["T_WHITESPACE"," ",177],["T_STRING","Mage",177],["T_DOUBLE_COLON","::",177],["T_STRING","getResourceSingleton",177],"(",["T_CONSTANT_ENCAPSED_STRING","'customer\/customer'",177],")",";",["T_WHITESPACE","\n        ",177],["T_VARIABLE","$attrFirstname",178],["T_WHITESPACE","           ",178],"=",["T_WHITESPACE"," ",178],["T_VARIABLE","$customerEntity",178],["T_OBJECT_OPERATOR","->",178],["T_STRING","getAttribute",178],"(",["T_CONSTANT_ENCAPSED_STRING","'firstname'",178],")",";",["T_WHITESPACE","\n        ",178],["T_VARIABLE","$attrFirstnameId",179],["T_WHITESPACE","         ",179],"=",["T_WHITESPACE"," ",179],["T_INT_CAST","(int)",179],["T_WHITESPACE"," ",179],["T_VARIABLE","$attrFirstname",179],["T_OBJECT_OPERATOR","->",179],["T_STRING","getAttributeId",179],"(",")",";",["T_WHITESPACE","\n        ",179],["T_VARIABLE","$attrFirstnameTableName",180],["T_WHITESPACE","  ",180],"=",["T_WHITESPACE"," ",180],["T_VARIABLE","$attrFirstname",180],["T_OBJECT_OPERATOR","->",180],["T_STRING","getBackend",180],"(",")",["T_OBJECT_OPERATOR","->",180],["T_STRING","getTable",180],"(",")",";",["T_WHITESPACE","\n\n        ",180],["T_VARIABLE","$attrLastname",182],["T_WHITESPACE","            ",182],"=",["T_WHITESPACE"," ",182],["T_VARIABLE","$customerEntity",182],["T_OBJECT_OPERATOR","->",182],["T_STRING","getAttribute",182],"(",["T_CONSTANT_ENCAPSED_STRING","'lastname'",182],")",";",["T_WHITESPACE","\n        ",182],["T_VARIABLE","$attrLastnameId",183],["T_WHITESPACE","          ",183],"=",["T_WHITESPACE"," ",183],["T_INT_CAST","(int)",183],["T_WHITESPACE"," ",183],["T_VARIABLE","$attrLastname",183],["T_OBJECT_OPERATOR","->",183],["T_STRING","getAttributeId",183],"(",")",";",["T_WHITESPACE","\n        ",183],["T_VARIABLE","$attrLastnameTableName",184],["T_WHITESPACE","   ",184],"=",["T_WHITESPACE"," ",184],["T_VARIABLE","$attrLastname",184],["T_OBJECT_OPERATOR","->",184],["T_STRING","getBackend",184],"(",")",["T_OBJECT_OPERATOR","->",184],["T_STRING","getTable",184],"(",")",";",["T_WHITESPACE","\n\n        ",184],["T_VARIABLE","$attrMiddlename",186],["T_WHITESPACE","          ",186],"=",["T_WHITESPACE"," ",186],["T_VARIABLE","$customerEntity",186],["T_OBJECT_OPERATOR","->",186],["T_STRING","getAttribute",186],"(",["T_CONSTANT_ENCAPSED_STRING","'middlename'",186],")",";",["T_WHITESPACE","\n        ",186],["T_VARIABLE","$attrMiddlenameId",187],["T_WHITESPACE","        ",187],"=",["T_WHITESPACE"," ",187],["T_INT_CAST","(int)",187],["T_WHITESPACE"," ",187],["T_VARIABLE","$attrMiddlename",187],["T_OBJECT_OPERATOR","->",187],["T_STRING","getAttributeId",187],"(",")",";",["T_WHITESPACE","\n        ",187],["T_VARIABLE","$attrMiddlenameTableName",188],["T_WHITESPACE"," ",188],"=",["T_WHITESPACE"," ",188],["T_VARIABLE","$attrMiddlename",188],["T_OBJECT_OPERATOR","->",188],["T_STRING","getBackend",188],"(",")",["T_OBJECT_OPERATOR","->",188],["T_STRING","getTable",188],"(",")",";",["T_WHITESPACE","\n\n        ",188],["T_VARIABLE","$attrEmail",190],["T_WHITESPACE","       ",190],"=",["T_WHITESPACE"," ",190],["T_VARIABLE","$customerEntity",190],["T_OBJECT_OPERATOR","->",190],["T_STRING","getAttribute",190],"(",["T_CONSTANT_ENCAPSED_STRING","'email'",190],")",";",["T_WHITESPACE","\n        ",190],["T_VARIABLE","$attrEmailTableName",191],["T_WHITESPACE"," ",191],"=",["T_WHITESPACE"," ",191],["T_VARIABLE","$attrEmail",191],["T_OBJECT_OPERATOR","->",191],["T_STRING","getBackend",191],"(",")",["T_OBJECT_OPERATOR","->",191],["T_STRING","getTable",191],"(",")",";",["T_WHITESPACE","\n\n        ",191],["T_VARIABLE","$adapter",193],["T_WHITESPACE"," ",193],"=",["T_WHITESPACE"," ",193],["T_VARIABLE","$this",193],["T_OBJECT_OPERATOR","->",193],["T_STRING","getSelect",193],"(",")",["T_OBJECT_OPERATOR","->",193],["T_STRING","getAdapter",193],"(",")",";",["T_WHITESPACE","\n        ",193],["T_VARIABLE","$customerName",194],["T_WHITESPACE"," ",194],"=",["T_WHITESPACE"," ",194],["T_VARIABLE","$adapter",194],["T_OBJECT_OPERATOR","->",194],["T_STRING","getConcatSql",194],"(",["T_ARRAY","array",194],"(",["T_CONSTANT_ENCAPSED_STRING","'cust_fname.value'",194],",",["T_WHITESPACE"," ",194],["T_CONSTANT_ENCAPSED_STRING","'cust_mname.value'",194],",",["T_WHITESPACE"," ",194],["T_CONSTANT_ENCAPSED_STRING","'cust_lname.value'",194],",",")",",",["T_WHITESPACE"," ",194],["T_CONSTANT_ENCAPSED_STRING","' '",194],")",";",["T_WHITESPACE","\n        ",194],["T_VARIABLE","$this",195],["T_OBJECT_OPERATOR","->",195],["T_STRING","getSelect",195],"(",")",["T_WHITESPACE","\n            ",195],["T_OBJECT_OPERATOR","->",196],["T_STRING","joinInner",196],"(",["T_WHITESPACE","\n                ",196],["T_ARRAY","array",197],"(",["T_CONSTANT_ENCAPSED_STRING","'cust_email'",197],["T_WHITESPACE"," ",197],["T_DOUBLE_ARROW","=>",197],["T_WHITESPACE"," ",197],["T_VARIABLE","$attrEmailTableName",197],")",",",["T_WHITESPACE","\n                ",197],["T_CONSTANT_ENCAPSED_STRING","'cust_email.entity_id = main_table.customer_id'",198],",",["T_WHITESPACE","\n                ",198],["T_ARRAY","array",199],"(",["T_CONSTANT_ENCAPSED_STRING","'email'",199],["T_WHITESPACE"," ",199],["T_DOUBLE_ARROW","=>",199],["T_WHITESPACE"," ",199],["T_CONSTANT_ENCAPSED_STRING","'cust_email.email'",199],")",["T_WHITESPACE","\n            ",199],")",["T_WHITESPACE","\n            ",200],["T_OBJECT_OPERATOR","->",201],["T_STRING","joinInner",201],"(",["T_WHITESPACE","\n                ",201],["T_ARRAY","array",202],"(",["T_CONSTANT_ENCAPSED_STRING","'cust_fname'",202],["T_WHITESPACE"," ",202],["T_DOUBLE_ARROW","=>",202],["T_WHITESPACE"," ",202],["T_VARIABLE","$attrFirstnameTableName",202],")",",",["T_WHITESPACE","\n                ",202],["T_STRING","implode",203],"(",["T_CONSTANT_ENCAPSED_STRING","' AND '",203],",",["T_WHITESPACE"," ",203],["T_ARRAY","array",203],"(",["T_WHITESPACE","\n                    ",203],["T_CONSTANT_ENCAPSED_STRING","'cust_fname.entity_id = main_table.customer_id'",204],",",["T_WHITESPACE","\n                    ",204],["T_VARIABLE","$adapter",205],["T_OBJECT_OPERATOR","->",205],["T_STRING","quoteInto",205],"(",["T_CONSTANT_ENCAPSED_STRING","'cust_fname.attribute_id = ?'",205],",",["T_WHITESPACE"," ",205],["T_INT_CAST","(int)",205],["T_WHITESPACE"," ",205],["T_VARIABLE","$attrFirstnameId",205],")",",",["T_WHITESPACE","\n                ",205],")",")",",",["T_WHITESPACE","\n                ",206],["T_ARRAY","array",207],"(",["T_CONSTANT_ENCAPSED_STRING","'firstname'",207],["T_WHITESPACE"," ",207],["T_DOUBLE_ARROW","=>",207],["T_WHITESPACE"," ",207],["T_CONSTANT_ENCAPSED_STRING","'cust_fname.value'",207],")",["T_WHITESPACE","\n            ",207],")",["T_WHITESPACE","\n            ",208],["T_OBJECT_OPERATOR","->",209],["T_STRING","joinInner",209],"(",["T_WHITESPACE","\n                ",209],["T_ARRAY","array",210],"(",["T_CONSTANT_ENCAPSED_STRING","'cust_mname'",210],["T_WHITESPACE"," ",210],["T_DOUBLE_ARROW","=>",210],["T_WHITESPACE"," ",210],["T_VARIABLE","$attrMiddlenameTableName",210],")",",",["T_WHITESPACE","\n                ",210],["T_STRING","implode",211],"(",["T_CONSTANT_ENCAPSED_STRING","' AND '",211],",",["T_WHITESPACE"," ",211],["T_ARRAY","array",211],"(",["T_WHITESPACE","\n                    ",211],["T_CONSTANT_ENCAPSED_STRING","'cust_mname.entity_id = main_table.customer_id'",212],",",["T_WHITESPACE","\n                    ",212],["T_VARIABLE","$adapter",213],["T_OBJECT_OPERATOR","->",213],["T_STRING","quoteInto",213],"(",["T_CONSTANT_ENCAPSED_STRING","'cust_mname.attribute_id = ?'",213],",",["T_WHITESPACE"," ",213],["T_INT_CAST","(int)",213],["T_WHITESPACE"," ",213],["T_VARIABLE","$attrMiddlenameId",213],")",",",["T_WHITESPACE","\n                ",213],")",")",",",["T_WHITESPACE","\n                ",214],["T_ARRAY","array",215],"(",["T_CONSTANT_ENCAPSED_STRING","'middlename'",215],["T_WHITESPACE"," ",215],["T_DOUBLE_ARROW","=>",215],["T_WHITESPACE"," ",215],["T_CONSTANT_ENCAPSED_STRING","'cust_mname.value'",215],")",["T_WHITESPACE","\n            ",215],")",["T_WHITESPACE","\n            ",216],["T_OBJECT_OPERATOR","->",217],["T_STRING","joinInner",217],"(",["T_WHITESPACE","\n                ",217],["T_ARRAY","array",218],"(",["T_CONSTANT_ENCAPSED_STRING","'cust_lname'",218],["T_WHITESPACE"," ",218],["T_DOUBLE_ARROW","=>",218],["T_WHITESPACE"," ",218],["T_VARIABLE","$attrLastnameTableName",218],")",",",["T_WHITESPACE","\n                ",218],["T_STRING","implode",219],"(",["T_CONSTANT_ENCAPSED_STRING","' AND '",219],",",["T_WHITESPACE"," ",219],["T_ARRAY","array",219],"(",["T_WHITESPACE","\n                    ",219],["T_CONSTANT_ENCAPSED_STRING","'cust_lname.entity_id = main_table.customer_id'",220],",",["T_WHITESPACE","\n                     ",220],["T_VARIABLE","$adapter",221],["T_OBJECT_OPERATOR","->",221],["T_STRING","quoteInto",221],"(",["T_CONSTANT_ENCAPSED_STRING","'cust_lname.attribute_id = ?'",221],",",["T_WHITESPACE"," ",221],["T_INT_CAST","(int)",221],["T_WHITESPACE"," ",221],["T_VARIABLE","$attrLastnameId",221],")",["T_WHITESPACE","\n                ",221],")",")",",",["T_WHITESPACE","\n                ",222],["T_ARRAY","array",223],"(",["T_WHITESPACE","\n                    ",223],["T_CONSTANT_ENCAPSED_STRING","'lastname'",224],["T_WHITESPACE","      ",224],["T_DOUBLE_ARROW","=>",224],["T_WHITESPACE"," ",224],["T_CONSTANT_ENCAPSED_STRING","'cust_lname.value'",224],",",["T_WHITESPACE","\n                    ",224],["T_CONSTANT_ENCAPSED_STRING","'customer_name'",225],["T_WHITESPACE"," ",225],["T_DOUBLE_ARROW","=>",225],["T_WHITESPACE"," ",225],["T_VARIABLE","$customerName",225],["T_WHITESPACE","\n                ",225],")",["T_WHITESPACE","\n            ",226],")",";",["T_WHITESPACE","\n\n        ",227],["T_VARIABLE","$this",229],["T_OBJECT_OPERATOR","->",229],["T_STRING","_joinedFields",229],"[",["T_CONSTANT_ENCAPSED_STRING","'customer_name'",229],"]",["T_WHITESPACE"," ",229],"=",["T_WHITESPACE"," ",229],["T_VARIABLE","$customerName",229],";",["T_WHITESPACE","\n        ",229],["T_VARIABLE","$this",230],["T_OBJECT_OPERATOR","->",230],["T_STRING","_joinedFields",230],"[",["T_CONSTANT_ENCAPSED_STRING","'email'",230],"]",["T_WHITESPACE","         ",230],"=",["T_WHITESPACE"," ",230],["T_CONSTANT_ENCAPSED_STRING","'cust_email.email'",230],";",["T_WHITESPACE","\n\n        ",230],["T_IF","if",232],["T_WHITESPACE"," ",232],"(",["T_VARIABLE","$filter",232],")",["T_WHITESPACE"," ",232],"{",["T_WHITESPACE","\n            ",232],["T_IF","if",233],["T_WHITESPACE"," ",233],"(",["T_ISSET","isset",233],"(",["T_VARIABLE","$filter",233],"[",["T_CONSTANT_ENCAPSED_STRING","'customer_name'",233],"]",")",")",["T_WHITESPACE"," ",233],"{",["T_WHITESPACE","\n                ",233],["T_VARIABLE","$likeExpr",234],["T_WHITESPACE"," ",234],"=",["T_WHITESPACE"," ",234],["T_CONSTANT_ENCAPSED_STRING","'%'",234],["T_WHITESPACE"," ",234],".",["T_WHITESPACE"," ",234],["T_VARIABLE","$filter",234],"[",["T_CONSTANT_ENCAPSED_STRING","'customer_name'",234],"]",["T_WHITESPACE"," ",234],".",["T_WHITESPACE"," ",234],["T_CONSTANT_ENCAPSED_STRING","'%'",234],";",["T_WHITESPACE","\n                ",234],["T_VARIABLE","$this",235],["T_OBJECT_OPERATOR","->",235],["T_STRING","getSelect",235],"(",")",["T_OBJECT_OPERATOR","->",235],["T_STRING","where",235],"(",["T_VARIABLE","$this",235],["T_OBJECT_OPERATOR","->",235],["T_STRING","_joinedFields",235],"[",["T_CONSTANT_ENCAPSED_STRING","'customer_name'",235],"]",["T_WHITESPACE"," ",235],".",["T_WHITESPACE"," ",235],["T_CONSTANT_ENCAPSED_STRING","' LIKE ?'",235],",",["T_WHITESPACE"," ",235],["T_VARIABLE","$likeExpr",235],")",";",["T_WHITESPACE","\n            ",235],"}",["T_WHITESPACE","\n            ",236],["T_IF","if",237],["T_WHITESPACE"," ",237],"(",["T_ISSET","isset",237],"(",["T_VARIABLE","$filter",237],"[",["T_CONSTANT_ENCAPSED_STRING","'email'",237],"]",")",")",["T_WHITESPACE"," ",237],"{",["T_WHITESPACE","\n                ",237],["T_VARIABLE","$likeExpr",238],["T_WHITESPACE"," ",238],"=",["T_WHITESPACE"," ",238],["T_CONSTANT_ENCAPSED_STRING","'%'",238],["T_WHITESPACE"," ",238],".",["T_WHITESPACE"," ",238],["T_VARIABLE","$filter",238],"[",["T_CONSTANT_ENCAPSED_STRING","'email'",238],"]",["T_WHITESPACE"," ",238],".",["T_WHITESPACE"," ",238],["T_CONSTANT_ENCAPSED_STRING","'%'",238],";",["T_WHITESPACE","\n                ",238],["T_VARIABLE","$this",239],["T_OBJECT_OPERATOR","->",239],["T_STRING","getSelect",239],"(",")",["T_OBJECT_OPERATOR","->",239],["T_STRING","where",239],"(",["T_VARIABLE","$this",239],["T_OBJECT_OPERATOR","->",239],["T_STRING","_joinedFields",239],"[",["T_CONSTANT_ENCAPSED_STRING","'email'",239],"]",["T_WHITESPACE"," ",239],".",["T_WHITESPACE"," ",239],["T_CONSTANT_ENCAPSED_STRING","' LIKE ?'",239],",",["T_WHITESPACE"," ",239],["T_VARIABLE","$likeExpr",239],")",";",["T_WHITESPACE","\n            ",239],"}",["T_WHITESPACE","\n        ",240],"}",["T_WHITESPACE","\n\n        ",241],["T_RETURN","return",243],["T_WHITESPACE"," ",243],["T_VARIABLE","$this",243],";",["T_WHITESPACE","\n    ",243],"}",["T_WHITESPACE","\n\n    ",244],["T_DOC_COMMENT","\/**\n     * Add subtotals\n     *\n     * @param array $storeIds\n     * @param array $filter\n     * @return Mage_Reports_Model_Resource_Quote_Collection\n     *\/",246],["T_WHITESPACE","\n    ",252],["T_PUBLIC","public",253],["T_WHITESPACE"," ",253],["T_FUNCTION","function",253],["T_WHITESPACE"," ",253],["T_STRING","addSubtotal",253],"(",["T_VARIABLE","$storeIds",253],["T_WHITESPACE"," ",253],"=",["T_WHITESPACE"," ",253],["T_CONSTANT_ENCAPSED_STRING","''",253],",",["T_WHITESPACE"," ",253],["T_VARIABLE","$filter",253],["T_WHITESPACE"," ",253],"=",["T_WHITESPACE"," ",253],["T_STRING","null",253],")",["T_WHITESPACE","\n    ",253],"{",["T_WHITESPACE","\n        ",254],["T_IF","if",255],["T_WHITESPACE"," ",255],"(",["T_STRING","is_array",255],"(",["T_VARIABLE","$storeIds",255],")",")",["T_WHITESPACE"," ",255],"{",["T_WHITESPACE","\n            ",255],["T_VARIABLE","$this",256],["T_OBJECT_OPERATOR","->",256],["T_STRING","getSelect",256],"(",")",["T_OBJECT_OPERATOR","->",256],["T_STRING","columns",256],"(",["T_ARRAY","array",256],"(",["T_WHITESPACE","\n                ",256],["T_CONSTANT_ENCAPSED_STRING","'subtotal'",257],["T_WHITESPACE"," ",257],["T_DOUBLE_ARROW","=>",257],["T_WHITESPACE"," ",257],["T_CONSTANT_ENCAPSED_STRING","'(main_table.base_subtotal_with_discount*main_table.base_to_global_rate)'",257],["T_WHITESPACE","\n            ",257],")",")",";",["T_WHITESPACE","\n            ",258],["T_VARIABLE","$this",259],["T_OBJECT_OPERATOR","->",259],["T_STRING","_joinedFields",259],"[",["T_CONSTANT_ENCAPSED_STRING","'subtotal'",259],"]",["T_WHITESPACE"," ",259],"=",["T_WHITESPACE","\n                ",259],["T_CONSTANT_ENCAPSED_STRING","'(main_table.base_subtotal_with_discount*main_table.base_to_global_rate)'",260],";",["T_WHITESPACE","\n        ",260],"}",["T_WHITESPACE"," ",261],["T_ELSE","else",261],["T_WHITESPACE"," ",261],"{",["T_WHITESPACE","\n            ",261],["T_VARIABLE","$this",262],["T_OBJECT_OPERATOR","->",262],["T_STRING","getSelect",262],"(",")",["T_OBJECT_OPERATOR","->",262],["T_STRING","columns",262],"(",["T_ARRAY","array",262],"(",["T_CONSTANT_ENCAPSED_STRING","'subtotal'",262],["T_WHITESPACE"," ",262],["T_DOUBLE_ARROW","=>",262],["T_WHITESPACE"," ",262],["T_CONSTANT_ENCAPSED_STRING","'main_table.base_subtotal_with_discount'",262],")",")",";",["T_WHITESPACE","\n            ",262],["T_VARIABLE","$this",263],["T_OBJECT_OPERATOR","->",263],["T_STRING","_joinedFields",263],"[",["T_CONSTANT_ENCAPSED_STRING","'subtotal'",263],"]",["T_WHITESPACE"," ",263],"=",["T_WHITESPACE"," ",263],["T_CONSTANT_ENCAPSED_STRING","'main_table.base_subtotal_with_discount'",263],";",["T_WHITESPACE","\n        ",263],"}",["T_WHITESPACE","\n\n        ",264],["T_IF","if",266],["T_WHITESPACE"," ",266],"(",["T_VARIABLE","$filter",266],["T_WHITESPACE"," ",266],["T_BOOLEAN_AND","&&",266],["T_WHITESPACE"," ",266],["T_STRING","is_array",266],"(",["T_VARIABLE","$filter",266],")",["T_WHITESPACE"," ",266],["T_BOOLEAN_AND","&&",266],["T_WHITESPACE"," ",266],["T_ISSET","isset",266],"(",["T_VARIABLE","$filter",266],"[",["T_CONSTANT_ENCAPSED_STRING","'subtotal'",266],"]",")",")",["T_WHITESPACE"," ",266],"{",["T_WHITESPACE","\n            ",266],["T_IF","if",267],["T_WHITESPACE"," ",267],"(",["T_ISSET","isset",267],"(",["T_VARIABLE","$filter",267],"[",["T_CONSTANT_ENCAPSED_STRING","'subtotal'",267],"]","[",["T_CONSTANT_ENCAPSED_STRING","'from'",267],"]",")",")",["T_WHITESPACE"," ",267],"{",["T_WHITESPACE","\n                ",267],["T_VARIABLE","$this",268],["T_OBJECT_OPERATOR","->",268],["T_STRING","getSelect",268],"(",")",["T_OBJECT_OPERATOR","->",268],["T_STRING","where",268],"(",["T_WHITESPACE","\n                    ",268],["T_VARIABLE","$this",269],["T_OBJECT_OPERATOR","->",269],["T_STRING","_joinedFields",269],"[",["T_CONSTANT_ENCAPSED_STRING","'subtotal'",269],"]",["T_WHITESPACE"," ",269],".",["T_WHITESPACE"," ",269],["T_CONSTANT_ENCAPSED_STRING","' >= ?'",269],",",["T_WHITESPACE","\n                    ",269],["T_VARIABLE","$filter",270],"[",["T_CONSTANT_ENCAPSED_STRING","'subtotal'",270],"]","[",["T_CONSTANT_ENCAPSED_STRING","'from'",270],"]",",",["T_WHITESPACE"," ",270],["T_STRING","Zend_Db",270],["T_DOUBLE_COLON","::",270],["T_STRING","FLOAT_TYPE",270],["T_WHITESPACE","\n                ",270],")",";",["T_WHITESPACE","\n            ",271],"}",["T_WHITESPACE","\n            ",272],["T_IF","if",273],["T_WHITESPACE"," ",273],"(",["T_ISSET","isset",273],"(",["T_VARIABLE","$filter",273],"[",["T_CONSTANT_ENCAPSED_STRING","'subtotal'",273],"]","[",["T_CONSTANT_ENCAPSED_STRING","'to'",273],"]",")",")",["T_WHITESPACE"," ",273],"{",["T_WHITESPACE","\n                ",273],["T_VARIABLE","$this",274],["T_OBJECT_OPERATOR","->",274],["T_STRING","getSelect",274],"(",")",["T_OBJECT_OPERATOR","->",274],["T_STRING","where",274],"(",["T_WHITESPACE","\n                    ",274],["T_VARIABLE","$this",275],["T_OBJECT_OPERATOR","->",275],["T_STRING","_joinedFields",275],"[",["T_CONSTANT_ENCAPSED_STRING","'subtotal'",275],"]",["T_WHITESPACE"," ",275],".",["T_WHITESPACE"," ",275],["T_CONSTANT_ENCAPSED_STRING","' <= ?'",275],",",["T_WHITESPACE","\n                    ",275],["T_VARIABLE","$filter",276],"[",["T_CONSTANT_ENCAPSED_STRING","'subtotal'",276],"]","[",["T_CONSTANT_ENCAPSED_STRING","'to'",276],"]",",",["T_WHITESPACE"," ",276],["T_STRING","Zend_Db",276],["T_DOUBLE_COLON","::",276],["T_STRING","FLOAT_TYPE",276],["T_WHITESPACE","\n                ",276],")",";",["T_WHITESPACE","\n            ",277],"}",["T_WHITESPACE","\n        ",278],"}",["T_WHITESPACE","\n\n        ",279],["T_RETURN","return",281],["T_WHITESPACE"," ",281],["T_VARIABLE","$this",281],";",["T_WHITESPACE","\n    ",281],"}",["T_WHITESPACE","\n\n    ",282],["T_DOC_COMMENT","\/**\n     * Get select count sql\n     *\n     * @return unknown\n     *\/",284],["T_WHITESPACE","\n    ",288],["T_PUBLIC","public",289],["T_WHITESPACE"," ",289],["T_FUNCTION","function",289],["T_WHITESPACE"," ",289],["T_STRING","getSelectCountSql",289],"(",")",["T_WHITESPACE","\n    ",289],"{",["T_WHITESPACE","\n        ",290],["T_VARIABLE","$countSelect",291],["T_WHITESPACE"," ",291],"=",["T_WHITESPACE"," ",291],["T_CLONE","clone",291],["T_WHITESPACE"," ",291],["T_VARIABLE","$this",291],["T_OBJECT_OPERATOR","->",291],["T_STRING","getSelect",291],"(",")",";",["T_WHITESPACE","\n        ",291],["T_VARIABLE","$countSelect",292],["T_OBJECT_OPERATOR","->",292],["T_STRING","reset",292],"(",["T_STRING","Zend_Db_Select",292],["T_DOUBLE_COLON","::",292],["T_STRING","ORDER",292],")",";",["T_WHITESPACE","\n        ",292],["T_VARIABLE","$countSelect",293],["T_OBJECT_OPERATOR","->",293],["T_STRING","reset",293],"(",["T_STRING","Zend_Db_Select",293],["T_DOUBLE_COLON","::",293],["T_STRING","LIMIT_COUNT",293],")",";",["T_WHITESPACE","\n        ",293],["T_VARIABLE","$countSelect",294],["T_OBJECT_OPERATOR","->",294],["T_STRING","reset",294],"(",["T_STRING","Zend_Db_Select",294],["T_DOUBLE_COLON","::",294],["T_STRING","LIMIT_OFFSET",294],")",";",["T_WHITESPACE","\n        ",294],["T_VARIABLE","$countSelect",295],["T_OBJECT_OPERATOR","->",295],["T_STRING","reset",295],"(",["T_STRING","Zend_Db_Select",295],["T_DOUBLE_COLON","::",295],["T_STRING","COLUMNS",295],")",";",["T_WHITESPACE","\n        ",295],["T_VARIABLE","$countSelect",296],["T_OBJECT_OPERATOR","->",296],["T_STRING","reset",296],"(",["T_STRING","Zend_Db_Select",296],["T_DOUBLE_COLON","::",296],["T_STRING","GROUP",296],")",";",["T_WHITESPACE","\n        ",296],["T_VARIABLE","$countSelect",297],["T_OBJECT_OPERATOR","->",297],["T_STRING","resetJoinLeft",297],"(",")",";",["T_WHITESPACE","\n\n        ",297],["T_IF","if",299],["T_WHITESPACE"," ",299],"(",["T_VARIABLE","$this",299],["T_OBJECT_OPERATOR","->",299],["T_STRING","_selectCountSqlType",299],["T_WHITESPACE"," ",299],["T_IS_EQUAL","==",299],["T_WHITESPACE"," ",299],["T_STRING","self",299],["T_DOUBLE_COLON","::",299],["T_STRING","SELECT_COUNT_SQL_TYPE_CART",299],")",["T_WHITESPACE"," ",299],"{",["T_WHITESPACE","\n            ",299],["T_VARIABLE","$countSelect",300],["T_OBJECT_OPERATOR","->",300],["T_STRING","columns",300],"(",["T_CONSTANT_ENCAPSED_STRING","\"COUNT(DISTINCT e.entity_id)\"",300],")",";",["T_WHITESPACE","\n        ",300],"}",["T_WHITESPACE"," ",301],["T_ELSE","else",301],["T_WHITESPACE"," ",301],"{",["T_WHITESPACE","\n            ",301],["T_VARIABLE","$countSelect",302],["T_OBJECT_OPERATOR","->",302],["T_STRING","columns",302],"(",["T_CONSTANT_ENCAPSED_STRING","\"COUNT(DISTINCT main_table.entity_id)\"",302],")",";",["T_WHITESPACE","\n        ",302],"}",["T_WHITESPACE","\n\n        ",303],["T_RETURN","return",305],["T_WHITESPACE"," ",305],["T_VARIABLE","$countSelect",305],";",["T_WHITESPACE","\n    ",305],"}",["T_WHITESPACE","\n",306],"}",["T_WHITESPACE","\n",307]]
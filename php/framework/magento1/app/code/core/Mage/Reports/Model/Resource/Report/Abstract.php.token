[["T_OPEN_TAG","<?php\n",1],["T_DOC_COMMENT","\/**\n * Magento\n *\n * NOTICE OF LICENSE\n *\n * This source file is subject to the Open Software License (OSL 3.0)\n * that is bundled with this package in the file LICENSE.txt.\n * It is also available through the world-wide-web at this URL:\n * http:\/\/opensource.org\/licenses\/osl-3.0.php\n * If you did not receive a copy of the license and are unable to\n * obtain it through the world-wide-web, please send an email\n * to license@magento.com so we can send you a copy immediately.\n *\n * DISCLAIMER\n *\n * Do not edit or add to this file if you wish to upgrade Magento to newer\n * versions in the future. If you wish to customize Magento for your\n * needs please refer to http:\/\/www.magento.com for more information.\n *\n * @category    Mage\n * @package     Mage_Reports\n * @copyright  Copyright (c) 2006-2016 X.commerce, Inc. and affiliates (http:\/\/www.magento.com)\n * @license    http:\/\/opensource.org\/licenses\/osl-3.0.php  Open Software License (OSL 3.0)\n *\/",2],["T_WHITESPACE","\n\n\n",25],["T_DOC_COMMENT","\/**\n * Abstract report aggregate resource model\n *\n * @category    Mage\n * @package     Mage_Reports\n * @author      Magento Core Team <core@magentocommerce.com>\n *\/",28],["T_WHITESPACE","\n",34],["T_ABSTRACT","abstract",35],["T_WHITESPACE"," ",35],["T_CLASS","class",35],["T_WHITESPACE"," ",35],["T_STRING","Mage_Reports_Model_Resource_Report_Abstract",35],["T_WHITESPACE"," ",35],["T_EXTENDS","extends",35],["T_WHITESPACE"," ",35],["T_STRING","Mage_Core_Model_Resource_Db_Abstract",35],["T_WHITESPACE","\n",35],"{",["T_WHITESPACE","\n    ",36],["T_DOC_COMMENT","\/**\n     * Flag object\n     *\n     * @var Mage_Reports_Model_Flag\n     *\/",37],["T_WHITESPACE","\n    ",41],["T_PROTECTED","protected",42],["T_WHITESPACE"," ",42],["T_VARIABLE","$_flag",42],["T_WHITESPACE","     ",42],"=",["T_WHITESPACE"," ",42],["T_STRING","null",42],";",["T_WHITESPACE","\n\n    ",42],["T_DOC_COMMENT","\/**\n     * Retrive flag object\n     *\n     * @return Mage_Reports_Model_Flag\n     *\/",44],["T_WHITESPACE","\n    ",48],["T_PROTECTED","protected",49],["T_WHITESPACE"," ",49],["T_FUNCTION","function",49],["T_WHITESPACE"," ",49],["T_STRING","_getFlag",49],"(",")",["T_WHITESPACE","\n    ",49],"{",["T_WHITESPACE","\n        ",50],["T_IF","if",51],["T_WHITESPACE"," ",51],"(",["T_VARIABLE","$this",51],["T_OBJECT_OPERATOR","->",51],["T_STRING","_flag",51],["T_WHITESPACE"," ",51],["T_IS_IDENTICAL","===",51],["T_WHITESPACE"," ",51],["T_STRING","null",51],")",["T_WHITESPACE"," ",51],"{",["T_WHITESPACE","\n            ",51],["T_VARIABLE","$this",52],["T_OBJECT_OPERATOR","->",52],["T_STRING","_flag",52],["T_WHITESPACE"," ",52],"=",["T_WHITESPACE"," ",52],["T_STRING","Mage",52],["T_DOUBLE_COLON","::",52],["T_STRING","getModel",52],"(",["T_CONSTANT_ENCAPSED_STRING","'reports\/flag'",52],")",";",["T_WHITESPACE","\n        ",52],"}",["T_WHITESPACE","\n        ",53],["T_RETURN","return",54],["T_WHITESPACE"," ",54],["T_VARIABLE","$this",54],["T_OBJECT_OPERATOR","->",54],["T_STRING","_flag",54],";",["T_WHITESPACE","\n    ",54],"}",["T_WHITESPACE","\n\n    ",55],["T_DOC_COMMENT","\/**\n     * Saves flag\n     *\n     * @param string $code\n     * @param mixed $value\n     * @return Mage_Reports_Model_Resource_Report_Abstract\n     *\/",57],["T_WHITESPACE","\n    ",63],["T_PROTECTED","protected",64],["T_WHITESPACE"," ",64],["T_FUNCTION","function",64],["T_WHITESPACE"," ",64],["T_STRING","_setFlagData",64],"(",["T_VARIABLE","$code",64],",",["T_WHITESPACE"," ",64],["T_VARIABLE","$value",64],["T_WHITESPACE"," ",64],"=",["T_WHITESPACE"," ",64],["T_STRING","null",64],")",["T_WHITESPACE","\n    ",64],"{",["T_WHITESPACE","\n        ",65],["T_VARIABLE","$this",66],["T_OBJECT_OPERATOR","->",66],["T_STRING","_getFlag",66],"(",")",["T_WHITESPACE","\n            ",66],["T_OBJECT_OPERATOR","->",67],["T_STRING","setReportFlagCode",67],"(",["T_VARIABLE","$code",67],")",["T_WHITESPACE","\n            ",67],["T_OBJECT_OPERATOR","->",68],["T_STRING","unsetData",68],"(",")",["T_WHITESPACE","\n            ",68],["T_OBJECT_OPERATOR","->",69],["T_STRING","loadSelf",69],"(",")",";",["T_WHITESPACE","\n\n        ",69],["T_IF","if",71],["T_WHITESPACE"," ",71],"(",["T_VARIABLE","$value",71],["T_WHITESPACE"," ",71],["T_IS_NOT_IDENTICAL","!==",71],["T_WHITESPACE"," ",71],["T_STRING","null",71],")",["T_WHITESPACE"," ",71],"{",["T_WHITESPACE","\n            ",71],["T_VARIABLE","$this",72],["T_OBJECT_OPERATOR","->",72],["T_STRING","_getFlag",72],"(",")",["T_OBJECT_OPERATOR","->",72],["T_STRING","setFlagData",72],"(",["T_VARIABLE","$value",72],")",";",["T_WHITESPACE","\n        ",72],"}",["T_WHITESPACE","\n\n        ",73],["T_VARIABLE","$time",75],["T_WHITESPACE"," ",75],"=",["T_WHITESPACE"," ",75],["T_STRING","Varien_Date",75],["T_DOUBLE_COLON","::",75],["T_STRING","toTimestamp",75],"(",["T_STRING","true",75],")",";",["T_WHITESPACE","\n        ",75],["T_COMMENT","\/\/ touch last_update\n",76],["T_WHITESPACE","        ",77],["T_VARIABLE","$this",77],["T_OBJECT_OPERATOR","->",77],["T_STRING","_getFlag",77],"(",")",["T_OBJECT_OPERATOR","->",77],["T_STRING","setLastUpdate",77],"(",["T_VARIABLE","$this",77],["T_OBJECT_OPERATOR","->",77],["T_STRING","formatDate",77],"(",["T_VARIABLE","$time",77],")",")",";",["T_WHITESPACE","\n\n        ",77],["T_VARIABLE","$this",79],["T_OBJECT_OPERATOR","->",79],["T_STRING","_getFlag",79],"(",")",["T_OBJECT_OPERATOR","->",79],["T_STRING","save",79],"(",")",";",["T_WHITESPACE","\n\n        ",79],["T_RETURN","return",81],["T_WHITESPACE"," ",81],["T_VARIABLE","$this",81],";",["T_WHITESPACE","\n    ",81],"}",["T_WHITESPACE","\n\n    ",82],["T_DOC_COMMENT","\/**\n     * Retrieve flag data\n     *\n     * @param string $code\n     * @return mixed\n     *\/",84],["T_WHITESPACE","\n    ",89],["T_PROTECTED","protected",90],["T_WHITESPACE"," ",90],["T_FUNCTION","function",90],["T_WHITESPACE"," ",90],["T_STRING","_getFlagData",90],"(",["T_VARIABLE","$code",90],")",["T_WHITESPACE","\n    ",90],"{",["T_WHITESPACE","\n        ",91],["T_VARIABLE","$this",92],["T_OBJECT_OPERATOR","->",92],["T_STRING","_getFlag",92],"(",")",["T_WHITESPACE","\n            ",92],["T_OBJECT_OPERATOR","->",93],["T_STRING","setReportFlagCode",93],"(",["T_VARIABLE","$code",93],")",["T_WHITESPACE","\n            ",93],["T_OBJECT_OPERATOR","->",94],["T_STRING","unsetData",94],"(",")",["T_WHITESPACE","\n            ",94],["T_OBJECT_OPERATOR","->",95],["T_STRING","loadSelf",95],"(",")",";",["T_WHITESPACE","\n\n        ",95],["T_RETURN","return",97],["T_WHITESPACE"," ",97],["T_VARIABLE","$this",97],["T_OBJECT_OPERATOR","->",97],["T_STRING","_getFlag",97],"(",")",["T_OBJECT_OPERATOR","->",97],["T_STRING","getFlagData",97],"(",")",";",["T_WHITESPACE","\n    ",97],"}",["T_WHITESPACE","\n\n    ",98],["T_DOC_COMMENT","\/**\n     * Trancate table\n     *\n     * @param string $table\n     * @return Mage_Reports_Model_Resource_Report_Abstract\n     *\/",100],["T_WHITESPACE","\n    ",105],["T_PROTECTED","protected",106],["T_WHITESPACE"," ",106],["T_FUNCTION","function",106],["T_WHITESPACE"," ",106],["T_STRING","_truncateTable",106],"(",["T_VARIABLE","$table",106],")",["T_WHITESPACE","\n    ",106],"{",["T_WHITESPACE","\n        ",107],["T_IF","if",108],["T_WHITESPACE"," ",108],"(",["T_VARIABLE","$this",108],["T_OBJECT_OPERATOR","->",108],["T_STRING","_getWriteAdapter",108],"(",")",["T_OBJECT_OPERATOR","->",108],["T_STRING","getTransactionLevel",108],"(",")",["T_WHITESPACE"," ",108],">",["T_WHITESPACE"," ",108],["T_LNUMBER","0",108],")",["T_WHITESPACE"," ",108],"{",["T_WHITESPACE","\n            ",108],["T_VARIABLE","$this",109],["T_OBJECT_OPERATOR","->",109],["T_STRING","_getWriteAdapter",109],"(",")",["T_OBJECT_OPERATOR","->",109],["T_STRING","delete",109],"(",["T_VARIABLE","$table",109],")",";",["T_WHITESPACE","\n        ",109],"}",["T_WHITESPACE"," ",110],["T_ELSE","else",110],["T_WHITESPACE"," ",110],"{",["T_WHITESPACE","\n            ",110],["T_VARIABLE","$this",111],["T_OBJECT_OPERATOR","->",111],["T_STRING","_getWriteAdapter",111],"(",")",["T_OBJECT_OPERATOR","->",111],["T_STRING","truncateTable",111],"(",["T_VARIABLE","$table",111],")",";",["T_WHITESPACE","\n        ",111],"}",["T_WHITESPACE","\n        ",112],["T_RETURN","return",113],["T_WHITESPACE"," ",113],["T_VARIABLE","$this",113],";",["T_WHITESPACE","\n    ",113],"}",["T_WHITESPACE","\n\n    ",114],["T_DOC_COMMENT","\/**\n     * Clear report table by specified date range.\n     * If specified source table parameters,\n     * condition will be generated by source table subselect.\n     *\n     * @param string $table\n     * @param string|null $from\n     * @param string|null $to\n     * @param Zend_Db_Select|string|null $subSelect\n     * @param unknown_type $doNotUseTruncate\n     * @return Mage_Reports_Model_Resource_Report_Abstract\n     *\/",116],["T_WHITESPACE","\n    ",127],["T_PROTECTED","protected",128],["T_WHITESPACE"," ",128],["T_FUNCTION","function",128],["T_WHITESPACE"," ",128],["T_STRING","_clearTableByDateRange",128],"(",["T_VARIABLE","$table",128],",",["T_WHITESPACE"," ",128],["T_VARIABLE","$from",128],["T_WHITESPACE"," ",128],"=",["T_WHITESPACE"," ",128],["T_STRING","null",128],",",["T_WHITESPACE"," ",128],["T_VARIABLE","$to",128],["T_WHITESPACE"," ",128],"=",["T_WHITESPACE"," ",128],["T_STRING","null",128],",",["T_WHITESPACE"," ",128],["T_VARIABLE","$subSelect",128],["T_WHITESPACE"," ",128],"=",["T_WHITESPACE"," ",128],["T_STRING","null",128],",",["T_WHITESPACE","\n        ",128],["T_VARIABLE","$doNotUseTruncate",129],["T_WHITESPACE"," ",129],"=",["T_WHITESPACE"," ",129],["T_STRING","false",129],")",["T_WHITESPACE","\n    ",129],"{",["T_WHITESPACE","\n        ",130],["T_IF","if",131],["T_WHITESPACE"," ",131],"(",["T_VARIABLE","$from",131],["T_WHITESPACE"," ",131],["T_IS_IDENTICAL","===",131],["T_WHITESPACE"," ",131],["T_STRING","null",131],["T_WHITESPACE"," ",131],["T_BOOLEAN_AND","&&",131],["T_WHITESPACE"," ",131],["T_VARIABLE","$to",131],["T_WHITESPACE"," ",131],["T_IS_IDENTICAL","===",131],["T_WHITESPACE"," ",131],["T_STRING","null",131],["T_WHITESPACE"," ",131],["T_BOOLEAN_AND","&&",131],["T_WHITESPACE"," ",131],"!",["T_VARIABLE","$doNotUseTruncate",131],")",["T_WHITESPACE"," ",131],"{",["T_WHITESPACE","\n            ",131],["T_VARIABLE","$this",132],["T_OBJECT_OPERATOR","->",132],["T_STRING","_truncateTable",132],"(",["T_VARIABLE","$table",132],")",";",["T_WHITESPACE","\n            ",132],["T_RETURN","return",133],["T_WHITESPACE"," ",133],["T_VARIABLE","$this",133],";",["T_WHITESPACE","\n        ",133],"}",["T_WHITESPACE","\n\n        ",134],["T_IF","if",136],["T_WHITESPACE"," ",136],"(",["T_VARIABLE","$subSelect",136],["T_WHITESPACE"," ",136],["T_IS_NOT_IDENTICAL","!==",136],["T_WHITESPACE"," ",136],["T_STRING","null",136],")",["T_WHITESPACE"," ",136],"{",["T_WHITESPACE","\n            ",136],["T_VARIABLE","$deleteCondition",137],["T_WHITESPACE"," ",137],"=",["T_WHITESPACE"," ",137],["T_VARIABLE","$this",137],["T_OBJECT_OPERATOR","->",137],["T_STRING","_makeConditionFromDateRangeSelect",137],"(",["T_VARIABLE","$subSelect",137],",",["T_WHITESPACE"," ",137],["T_CONSTANT_ENCAPSED_STRING","'period'",137],")",";",["T_WHITESPACE","\n        ",137],"}",["T_WHITESPACE"," ",138],["T_ELSE","else",138],["T_WHITESPACE"," ",138],"{",["T_WHITESPACE","\n            ",138],["T_VARIABLE","$condition",139],["T_WHITESPACE"," ",139],"=",["T_WHITESPACE"," ",139],["T_ARRAY","array",139],"(",")",";",["T_WHITESPACE","\n            ",139],["T_IF","if",140],["T_WHITESPACE"," ",140],"(",["T_VARIABLE","$from",140],["T_WHITESPACE"," ",140],["T_IS_NOT_IDENTICAL","!==",140],["T_WHITESPACE"," ",140],["T_STRING","null",140],")",["T_WHITESPACE"," ",140],"{",["T_WHITESPACE","\n                ",140],["T_VARIABLE","$condition",141],"[","]",["T_WHITESPACE"," ",141],"=",["T_WHITESPACE"," ",141],["T_VARIABLE","$this",141],["T_OBJECT_OPERATOR","->",141],["T_STRING","_getWriteAdapter",141],"(",")",["T_OBJECT_OPERATOR","->",141],["T_STRING","quoteInto",141],"(",["T_CONSTANT_ENCAPSED_STRING","'period >= ?'",141],",",["T_WHITESPACE"," ",141],["T_VARIABLE","$from",141],")",";",["T_WHITESPACE","\n            ",141],"}",["T_WHITESPACE","\n\n            ",142],["T_IF","if",144],["T_WHITESPACE"," ",144],"(",["T_VARIABLE","$to",144],["T_WHITESPACE"," ",144],["T_IS_NOT_IDENTICAL","!==",144],["T_WHITESPACE"," ",144],["T_STRING","null",144],")",["T_WHITESPACE"," ",144],"{",["T_WHITESPACE","\n                ",144],["T_VARIABLE","$condition",145],"[","]",["T_WHITESPACE"," ",145],"=",["T_WHITESPACE"," ",145],["T_VARIABLE","$this",145],["T_OBJECT_OPERATOR","->",145],["T_STRING","_getWriteAdapter",145],"(",")",["T_OBJECT_OPERATOR","->",145],["T_STRING","quoteInto",145],"(",["T_CONSTANT_ENCAPSED_STRING","'period <= ?'",145],",",["T_WHITESPACE"," ",145],["T_VARIABLE","$to",145],")",";",["T_WHITESPACE","\n            ",145],"}",["T_WHITESPACE","\n            ",146],["T_VARIABLE","$deleteCondition",147],["T_WHITESPACE"," ",147],"=",["T_WHITESPACE"," ",147],["T_STRING","implode",147],"(",["T_CONSTANT_ENCAPSED_STRING","' AND '",147],",",["T_WHITESPACE"," ",147],["T_VARIABLE","$condition",147],")",";",["T_WHITESPACE","\n        ",147],"}",["T_WHITESPACE","\n        ",148],["T_VARIABLE","$this",149],["T_OBJECT_OPERATOR","->",149],["T_STRING","_getWriteAdapter",149],"(",")",["T_OBJECT_OPERATOR","->",149],["T_STRING","delete",149],"(",["T_VARIABLE","$table",149],",",["T_WHITESPACE"," ",149],["T_VARIABLE","$deleteCondition",149],")",";",["T_WHITESPACE","\n        ",149],["T_RETURN","return",150],["T_WHITESPACE"," ",150],["T_VARIABLE","$this",150],";",["T_WHITESPACE","\n    ",150],"}",["T_WHITESPACE","\n\n    ",151],["T_DOC_COMMENT","\/**\n     * Generate table date range select\n     *\n     * @param string $table\n     * @param string $column\n     * @param string $whereColumn\n     * @param string|null $from\n     * @param string|null $to\n     * @param array $additionalWhere\n     * @param unknown_type $alias\n     * @return Varien_Db_Select\n     *\/",153],["T_WHITESPACE","\n    ",164],["T_PROTECTED","protected",165],["T_WHITESPACE"," ",165],["T_FUNCTION","function",165],["T_WHITESPACE"," ",165],["T_STRING","_getTableDateRangeSelect",165],"(",["T_VARIABLE","$table",165],",",["T_WHITESPACE"," ",165],["T_VARIABLE","$column",165],",",["T_WHITESPACE"," ",165],["T_VARIABLE","$whereColumn",165],",",["T_WHITESPACE"," ",165],["T_VARIABLE","$from",165],["T_WHITESPACE"," ",165],"=",["T_WHITESPACE"," ",165],["T_STRING","null",165],",",["T_WHITESPACE"," ",165],["T_VARIABLE","$to",165],["T_WHITESPACE"," ",165],"=",["T_WHITESPACE"," ",165],["T_STRING","null",165],",",["T_WHITESPACE","\n        ",165],["T_VARIABLE","$additionalWhere",166],["T_WHITESPACE"," ",166],"=",["T_WHITESPACE"," ",166],["T_ARRAY","array",166],"(",")",",",["T_WHITESPACE"," ",166],["T_VARIABLE","$alias",166],["T_WHITESPACE"," ",166],"=",["T_WHITESPACE"," ",166],["T_CONSTANT_ENCAPSED_STRING","'date_range_table'",166],")",["T_WHITESPACE","\n    ",166],"{",["T_WHITESPACE","\n        ",167],["T_VARIABLE","$adapter",168],["T_WHITESPACE"," ",168],"=",["T_WHITESPACE"," ",168],["T_VARIABLE","$this",168],["T_OBJECT_OPERATOR","->",168],["T_STRING","_getReadAdapter",168],"(",")",";",["T_WHITESPACE","\n        ",168],["T_VARIABLE","$select",169],["T_WHITESPACE","  ",169],"=",["T_WHITESPACE"," ",169],["T_VARIABLE","$adapter",169],["T_OBJECT_OPERATOR","->",169],["T_STRING","select",169],"(",")",["T_WHITESPACE","\n            ",169],["T_OBJECT_OPERATOR","->",170],["T_STRING","from",170],"(",["T_WHITESPACE","\n                ",170],["T_ARRAY","array",171],"(",["T_VARIABLE","$alias",171],["T_WHITESPACE"," ",171],["T_DOUBLE_ARROW","=>",171],["T_WHITESPACE"," ",171],["T_VARIABLE","$table",171],")",",",["T_WHITESPACE","\n                ",171],["T_VARIABLE","$adapter",172],["T_OBJECT_OPERATOR","->",172],["T_STRING","getDatePartSql",172],"(",["T_WHITESPACE","\n                    ",172],["T_VARIABLE","$this",173],["T_OBJECT_OPERATOR","->",173],["T_STRING","getStoreTZOffsetQuery",173],"(",["T_ARRAY","array",173],"(",["T_VARIABLE","$alias",173],["T_WHITESPACE"," ",173],["T_DOUBLE_ARROW","=>",173],["T_WHITESPACE"," ",173],["T_VARIABLE","$table",173],")",",",["T_WHITESPACE"," ",173],["T_VARIABLE","$alias",173],["T_WHITESPACE"," ",173],".",["T_WHITESPACE"," ",173],["T_CONSTANT_ENCAPSED_STRING","'.'",173],["T_WHITESPACE"," ",173],".",["T_WHITESPACE"," ",173],["T_VARIABLE","$column",173],",",["T_WHITESPACE"," ",173],["T_VARIABLE","$from",173],",",["T_WHITESPACE"," ",173],["T_VARIABLE","$to",173],")",["T_WHITESPACE","\n                ",173],")",["T_WHITESPACE","\n            ",174],")",["T_WHITESPACE","\n            ",175],["T_OBJECT_OPERATOR","->",176],["T_STRING","distinct",176],"(",["T_STRING","true",176],")",";",["T_WHITESPACE","\n\n        ",176],["T_IF","if",178],["T_WHITESPACE"," ",178],"(",["T_VARIABLE","$from",178],["T_WHITESPACE"," ",178],["T_IS_NOT_IDENTICAL","!==",178],["T_WHITESPACE"," ",178],["T_STRING","null",178],")",["T_WHITESPACE"," ",178],"{",["T_WHITESPACE","\n           ",178],["T_VARIABLE","$select",179],["T_OBJECT_OPERATOR","->",179],["T_STRING","where",179],"(",["T_VARIABLE","$alias",179],["T_WHITESPACE"," ",179],".",["T_WHITESPACE"," ",179],["T_CONSTANT_ENCAPSED_STRING","'.'",179],["T_WHITESPACE"," ",179],".",["T_WHITESPACE"," ",179],["T_VARIABLE","$whereColumn",179],["T_WHITESPACE"," ",179],".",["T_WHITESPACE"," ",179],["T_CONSTANT_ENCAPSED_STRING","' >= ?'",179],",",["T_WHITESPACE"," ",179],["T_VARIABLE","$from",179],")",";",["T_WHITESPACE","\n        ",179],"}",["T_WHITESPACE","\n\n        ",180],["T_IF","if",182],["T_WHITESPACE"," ",182],"(",["T_VARIABLE","$to",182],["T_WHITESPACE"," ",182],["T_IS_NOT_IDENTICAL","!==",182],["T_WHITESPACE"," ",182],["T_STRING","null",182],")",["T_WHITESPACE"," ",182],"{",["T_WHITESPACE","\n           ",182],["T_VARIABLE","$select",183],["T_OBJECT_OPERATOR","->",183],["T_STRING","where",183],"(",["T_VARIABLE","$alias",183],["T_WHITESPACE"," ",183],".",["T_WHITESPACE"," ",183],["T_CONSTANT_ENCAPSED_STRING","'.'",183],["T_WHITESPACE"," ",183],".",["T_WHITESPACE"," ",183],["T_VARIABLE","$whereColumn",183],["T_WHITESPACE"," ",183],".",["T_WHITESPACE"," ",183],["T_CONSTANT_ENCAPSED_STRING","' <= ?'",183],",",["T_WHITESPACE"," ",183],["T_VARIABLE","$to",183],")",";",["T_WHITESPACE","\n        ",183],"}",["T_WHITESPACE","\n\n        ",184],["T_IF","if",186],["T_WHITESPACE"," ",186],"(","!",["T_EMPTY","empty",186],"(",["T_VARIABLE","$additionalWhere",186],")",")",["T_WHITESPACE"," ",186],"{",["T_WHITESPACE","\n            ",186],["T_FOREACH","foreach",187],["T_WHITESPACE"," ",187],"(",["T_VARIABLE","$additionalWhere",187],["T_WHITESPACE"," ",187],["T_AS","as",187],["T_WHITESPACE"," ",187],["T_VARIABLE","$condition",187],")",["T_WHITESPACE"," ",187],"{",["T_WHITESPACE","\n                ",187],["T_IF","if",188],["T_WHITESPACE"," ",188],"(",["T_STRING","is_array",188],"(",["T_VARIABLE","$condition",188],")",["T_WHITESPACE"," ",188],["T_BOOLEAN_AND","&&",188],["T_WHITESPACE"," ",188],["T_STRING","count",188],"(",["T_VARIABLE","$condition",188],")",["T_WHITESPACE"," ",188],["T_IS_EQUAL","==",188],["T_WHITESPACE"," ",188],["T_LNUMBER","2",188],")",["T_WHITESPACE"," ",188],"{",["T_WHITESPACE","\n                   ",188],["T_VARIABLE","$condition",189],["T_WHITESPACE"," ",189],"=",["T_WHITESPACE"," ",189],["T_VARIABLE","$adapter",189],["T_OBJECT_OPERATOR","->",189],["T_STRING","quoteInto",189],"(",["T_VARIABLE","$condition",189],"[",["T_LNUMBER","0",189],"]",",",["T_WHITESPACE"," ",189],["T_VARIABLE","$condition",189],"[",["T_LNUMBER","1",189],"]",")",";",["T_WHITESPACE","\n                ",189],"}",["T_WHITESPACE"," ",190],["T_ELSEIF","elseif",190],["T_WHITESPACE"," ",190],"(",["T_STRING","is_array",190],"(",["T_VARIABLE","$condition",190],")",")",["T_WHITESPACE"," ",190],"{",["T_WHITESPACE"," ",190],["T_COMMENT","\/\/ Invalid condition\n",190],["T_WHITESPACE","                   ",191],["T_CONTINUE","continue",191],";",["T_WHITESPACE","\n                ",191],"}",["T_WHITESPACE","\n                ",192],["T_VARIABLE","$condition",193],["T_WHITESPACE"," ",193],"=",["T_WHITESPACE"," ",193],["T_STRING","str_replace",193],"(",["T_CONSTANT_ENCAPSED_STRING","'{{table}}'",193],",",["T_WHITESPACE"," ",193],["T_VARIABLE","$adapter",193],["T_OBJECT_OPERATOR","->",193],["T_STRING","quoteIdentifier",193],"(",["T_VARIABLE","$alias",193],")",",",["T_WHITESPACE"," ",193],["T_VARIABLE","$condition",193],")",";",["T_WHITESPACE","\n                ",193],["T_VARIABLE","$select",194],["T_OBJECT_OPERATOR","->",194],["T_STRING","where",194],"(",["T_VARIABLE","$condition",194],")",";",["T_WHITESPACE","\n            ",194],"}",["T_WHITESPACE","\n        ",195],"}",["T_WHITESPACE","\n\n        ",196],["T_RETURN","return",198],["T_WHITESPACE"," ",198],["T_VARIABLE","$select",198],";",["T_WHITESPACE","\n    ",198],"}",["T_WHITESPACE","\n\n    ",199],["T_DOC_COMMENT","\/**\n     * Make condition for using in where section\n     * from select statement with single date column\n     *\n     * @result string|false\n     *\n     * @param Varien_Db_Select $select\n     * @param string $periodColumn\n     * @return unknown\n     *\/",201],["T_WHITESPACE","\n    ",210],["T_PROTECTED","protected",211],["T_WHITESPACE"," ",211],["T_FUNCTION","function",211],["T_WHITESPACE"," ",211],["T_STRING","_makeConditionFromDateRangeSelect",211],"(",["T_VARIABLE","$select",211],",",["T_WHITESPACE"," ",211],["T_VARIABLE","$periodColumn",211],")",["T_WHITESPACE","\n    ",211],"{",["T_WHITESPACE","\n        ",212],["T_STATIC","static",213],["T_WHITESPACE"," ",213],["T_VARIABLE","$selectResultCache",213],["T_WHITESPACE"," ",213],"=",["T_WHITESPACE"," ",213],["T_ARRAY","array",213],"(",")",";",["T_WHITESPACE","\n        ",213],["T_VARIABLE","$cacheKey",214],["T_WHITESPACE"," ",214],"=",["T_WHITESPACE"," ",214],["T_STRING_CAST","(string)",214],["T_VARIABLE","$select",214],";",["T_WHITESPACE","\n\n        ",214],["T_IF","if",216],["T_WHITESPACE"," ",216],"(","!",["T_STRING","array_key_exists",216],"(",["T_VARIABLE","$cacheKey",216],",",["T_WHITESPACE"," ",216],["T_VARIABLE","$selectResultCache",216],")",")",["T_WHITESPACE"," ",216],"{",["T_WHITESPACE","\n            ",216],["T_TRY","try",217],["T_WHITESPACE"," ",217],"{",["T_WHITESPACE","\n                ",217],["T_VARIABLE","$selectResult",218],["T_WHITESPACE"," ",218],"=",["T_WHITESPACE"," ",218],["T_ARRAY","array",218],"(",")",";",["T_WHITESPACE","\n                ",218],["T_VARIABLE","$query",219],["T_WHITESPACE"," ",219],"=",["T_WHITESPACE"," ",219],["T_VARIABLE","$this",219],["T_OBJECT_OPERATOR","->",219],["T_STRING","_getReadAdapter",219],"(",")",["T_OBJECT_OPERATOR","->",219],["T_STRING","query",219],"(",["T_VARIABLE","$select",219],")",";",["T_WHITESPACE","\n                ",219],["T_WHILE","while",220],["T_WHITESPACE"," ",220],"(",["T_VARIABLE","$date",220],["T_WHITESPACE"," ",220],"=",["T_WHITESPACE"," ",220],["T_VARIABLE","$query",220],["T_OBJECT_OPERATOR","->",220],["T_STRING","fetchColumn",220],"(",")",")",["T_WHITESPACE"," ",220],"{",["T_WHITESPACE","\n                    ",220],["T_VARIABLE","$selectResult",221],"[","]",["T_WHITESPACE"," ",221],"=",["T_WHITESPACE"," ",221],["T_VARIABLE","$date",221],";",["T_WHITESPACE","\n                ",221],"}",["T_WHITESPACE","\n            ",222],"}",["T_WHITESPACE"," ",223],["T_CATCH","catch",223],["T_WHITESPACE"," ",223],"(",["T_STRING","Exception",223],["T_WHITESPACE"," ",223],["T_VARIABLE","$e",223],")",["T_WHITESPACE"," ",223],"{",["T_WHITESPACE","\n                ",223],["T_VARIABLE","$selectResult",224],["T_WHITESPACE"," ",224],"=",["T_WHITESPACE"," ",224],["T_STRING","false",224],";",["T_WHITESPACE","\n            ",224],"}",["T_WHITESPACE","\n            ",225],["T_VARIABLE","$selectResultCache",226],"[",["T_VARIABLE","$cacheKey",226],"]",["T_WHITESPACE"," ",226],"=",["T_WHITESPACE"," ",226],["T_VARIABLE","$selectResult",226],";",["T_WHITESPACE","\n        ",226],"}",["T_WHITESPACE"," ",227],["T_ELSE","else",227],["T_WHITESPACE"," ",227],"{",["T_WHITESPACE","\n            ",227],["T_VARIABLE","$selectResult",228],["T_WHITESPACE"," ",228],"=",["T_WHITESPACE"," ",228],["T_VARIABLE","$selectResultCache",228],"[",["T_VARIABLE","$cacheKey",228],"]",";",["T_WHITESPACE","\n        ",228],"}",["T_WHITESPACE","\n        ",229],["T_IF","if",230],["T_WHITESPACE"," ",230],"(",["T_VARIABLE","$selectResult",230],["T_WHITESPACE"," ",230],["T_IS_IDENTICAL","===",230],["T_WHITESPACE"," ",230],["T_STRING","false",230],")",["T_WHITESPACE"," ",230],"{",["T_WHITESPACE","\n            ",230],["T_RETURN","return",231],["T_WHITESPACE"," ",231],["T_STRING","false",231],";",["T_WHITESPACE","\n        ",231],"}",["T_WHITESPACE","\n\n        ",232],["T_VARIABLE","$whereCondition",234],["T_WHITESPACE"," ",234],"=",["T_WHITESPACE"," ",234],["T_ARRAY","array",234],"(",")",";",["T_WHITESPACE","\n        ",234],["T_VARIABLE","$adapter",235],["T_WHITESPACE"," ",235],"=",["T_WHITESPACE"," ",235],["T_VARIABLE","$this",235],["T_OBJECT_OPERATOR","->",235],["T_STRING","_getReadAdapter",235],"(",")",";",["T_WHITESPACE","\n        ",235],["T_FOREACH","foreach",236],["T_WHITESPACE"," ",236],"(",["T_VARIABLE","$selectResult",236],["T_WHITESPACE"," ",236],["T_AS","as",236],["T_WHITESPACE"," ",236],["T_VARIABLE","$date",236],")",["T_WHITESPACE"," ",236],"{",["T_WHITESPACE","\n            ",236],["T_VARIABLE","$date",237],["T_WHITESPACE"," ",237],"=",["T_WHITESPACE"," ",237],["T_STRING","substr",237],"(",["T_VARIABLE","$date",237],",",["T_WHITESPACE"," ",237],["T_LNUMBER","0",237],",",["T_WHITESPACE"," ",237],["T_LNUMBER","10",237],")",";",["T_WHITESPACE"," ",237],["T_COMMENT","\/\/ to fix differences in oracle\n",237],["T_WHITESPACE","            ",238],["T_VARIABLE","$whereCondition",238],"[","]",["T_WHITESPACE"," ",238],"=",["T_WHITESPACE"," ",238],["T_VARIABLE","$adapter",238],["T_OBJECT_OPERATOR","->",238],["T_STRING","prepareSqlCondition",238],"(",["T_VARIABLE","$periodColumn",238],",",["T_WHITESPACE"," ",238],["T_ARRAY","array",238],"(",["T_CONSTANT_ENCAPSED_STRING","'like'",238],["T_WHITESPACE"," ",238],["T_DOUBLE_ARROW","=>",238],["T_WHITESPACE"," ",238],["T_VARIABLE","$date",238],")",")",";",["T_WHITESPACE","\n        ",238],"}",["T_WHITESPACE","\n        ",239],["T_VARIABLE","$whereCondition",240],["T_WHITESPACE"," ",240],"=",["T_WHITESPACE"," ",240],["T_STRING","implode",240],"(",["T_CONSTANT_ENCAPSED_STRING","' OR '",240],",",["T_WHITESPACE"," ",240],["T_VARIABLE","$whereCondition",240],")",";",["T_WHITESPACE","\n        ",240],["T_IF","if",241],["T_WHITESPACE"," ",241],"(",["T_VARIABLE","$whereCondition",241],["T_WHITESPACE"," ",241],["T_IS_EQUAL","==",241],["T_WHITESPACE"," ",241],["T_CONSTANT_ENCAPSED_STRING","''",241],")",["T_WHITESPACE"," ",241],"{",["T_WHITESPACE","\n            ",241],["T_VARIABLE","$whereCondition",242],["T_WHITESPACE"," ",242],"=",["T_WHITESPACE"," ",242],["T_CONSTANT_ENCAPSED_STRING","'1=0'",242],";",["T_WHITESPACE","  ",242],["T_COMMENT","\/\/ FALSE condition!\n",242],["T_WHITESPACE","        ",243],"}",["T_WHITESPACE","\n\n        ",243],["T_RETURN","return",245],["T_WHITESPACE"," ",245],["T_VARIABLE","$whereCondition",245],";",["T_WHITESPACE","\n    ",245],"}",["T_WHITESPACE","\n\n    ",246],["T_DOC_COMMENT","\/**\n     * Generate table date range select\n     *\n     * @param string $table\n     * @param string $relatedTable\n     * @param array $joinCondition\n     * @param string $column\n     * @param string $whereColumn\n     * @param string|null $from\n     * @param string|null $to\n     * @param array $additionalWhere\n     * @param unknown_type $alias\n     * @param unknown_type $relatedAlias\n     * @return Varien_Db_Select\n     *\/",248],["T_WHITESPACE","\n    ",262],["T_PROTECTED","protected",263],["T_WHITESPACE"," ",263],["T_FUNCTION","function",263],["T_WHITESPACE"," ",263],["T_STRING","_getTableDateRangeRelatedSelect",263],"(",["T_VARIABLE","$table",263],",",["T_WHITESPACE"," ",263],["T_VARIABLE","$relatedTable",263],",",["T_WHITESPACE"," ",263],["T_VARIABLE","$joinCondition",263],",",["T_WHITESPACE"," ",263],["T_VARIABLE","$column",263],",",["T_WHITESPACE"," ",263],["T_VARIABLE","$whereColumn",263],",",["T_WHITESPACE","\n        ",263],["T_VARIABLE","$from",264],["T_WHITESPACE"," ",264],"=",["T_WHITESPACE"," ",264],["T_STRING","null",264],",",["T_WHITESPACE"," ",264],["T_VARIABLE","$to",264],["T_WHITESPACE"," ",264],"=",["T_WHITESPACE"," ",264],["T_STRING","null",264],",",["T_WHITESPACE"," ",264],["T_VARIABLE","$additionalWhere",264],["T_WHITESPACE"," ",264],"=",["T_WHITESPACE"," ",264],["T_ARRAY","array",264],"(",")",",",["T_WHITESPACE"," ",264],["T_VARIABLE","$alias",264],["T_WHITESPACE"," ",264],"=",["T_WHITESPACE"," ",264],["T_CONSTANT_ENCAPSED_STRING","'date_range_table'",264],",",["T_WHITESPACE","\n        ",264],["T_VARIABLE","$relatedAlias",265],["T_WHITESPACE"," ",265],"=",["T_WHITESPACE"," ",265],["T_CONSTANT_ENCAPSED_STRING","'related_date_range_table'",265],")",["T_WHITESPACE","\n    ",265],"{",["T_WHITESPACE","\n        ",266],["T_VARIABLE","$adapter",267],["T_WHITESPACE"," ",267],"=",["T_WHITESPACE"," ",267],["T_VARIABLE","$this",267],["T_OBJECT_OPERATOR","->",267],["T_STRING","_getReadAdapter",267],"(",")",";",["T_WHITESPACE","\n        ",267],["T_VARIABLE","$joinConditionSql",268],["T_WHITESPACE"," ",268],"=",["T_WHITESPACE"," ",268],["T_ARRAY","array",268],"(",")",";",["T_WHITESPACE","\n\n        ",268],["T_FOREACH","foreach",270],["T_WHITESPACE"," ",270],"(",["T_VARIABLE","$joinCondition",270],["T_WHITESPACE"," ",270],["T_AS","as",270],["T_WHITESPACE"," ",270],["T_VARIABLE","$fkField",270],["T_WHITESPACE"," ",270],["T_DOUBLE_ARROW","=>",270],["T_WHITESPACE"," ",270],["T_VARIABLE","$pkField",270],")",["T_WHITESPACE"," ",270],"{",["T_WHITESPACE","\n            ",270],["T_VARIABLE","$joinConditionSql",271],"[","]",["T_WHITESPACE"," ",271],"=",["T_WHITESPACE"," ",271],["T_STRING","sprintf",271],"(",["T_CONSTANT_ENCAPSED_STRING","'%s.%s = %s.%s'",271],",",["T_WHITESPACE"," ",271],["T_VARIABLE","$alias",271],",",["T_WHITESPACE"," ",271],["T_VARIABLE","$fkField",271],",",["T_WHITESPACE"," ",271],["T_VARIABLE","$relatedAlias",271],",",["T_WHITESPACE"," ",271],["T_VARIABLE","$pkField",271],")",";",["T_WHITESPACE","\n        ",271],"}",["T_WHITESPACE","\n\n        ",272],["T_VARIABLE","$select",274],["T_WHITESPACE"," ",274],"=",["T_WHITESPACE"," ",274],["T_VARIABLE","$adapter",274],["T_OBJECT_OPERATOR","->",274],["T_STRING","select",274],"(",")",["T_WHITESPACE","\n            ",274],["T_OBJECT_OPERATOR","->",275],["T_STRING","from",275],"(",["T_WHITESPACE","\n                ",275],["T_ARRAY","array",276],"(",["T_VARIABLE","$alias",276],["T_WHITESPACE"," ",276],["T_DOUBLE_ARROW","=>",276],["T_WHITESPACE"," ",276],["T_VARIABLE","$table",276],")",",",["T_WHITESPACE","\n                ",276],["T_VARIABLE","$adapter",277],["T_OBJECT_OPERATOR","->",277],["T_STRING","getDatePartSql",277],"(",["T_WHITESPACE","\n                    ",277],["T_VARIABLE","$adapter",278],["T_OBJECT_OPERATOR","->",278],["T_STRING","quoteIdentifier",278],"(",["T_VARIABLE","$alias",278],["T_WHITESPACE"," ",278],".",["T_WHITESPACE"," ",278],["T_CONSTANT_ENCAPSED_STRING","'.'",278],["T_WHITESPACE"," ",278],".",["T_WHITESPACE"," ",278],["T_VARIABLE","$column",278],")",["T_WHITESPACE","\n                ",278],")",["T_WHITESPACE","\n            ",279],")",["T_WHITESPACE","\n            ",280],["T_OBJECT_OPERATOR","->",281],["T_STRING","joinInner",281],"(",["T_WHITESPACE","\n                ",281],["T_ARRAY","array",282],"(",["T_VARIABLE","$relatedAlias",282],["T_WHITESPACE"," ",282],["T_DOUBLE_ARROW","=>",282],["T_WHITESPACE"," ",282],["T_VARIABLE","$relatedTable",282],")",",",["T_WHITESPACE","\n                ",282],["T_STRING","implode",283],"(",["T_CONSTANT_ENCAPSED_STRING","' AND '",283],",",["T_WHITESPACE"," ",283],["T_VARIABLE","$joinConditionSql",283],")",",",["T_WHITESPACE","\n                ",283],["T_ARRAY","array",284],"(",")",["T_WHITESPACE","\n            ",284],")",["T_WHITESPACE","\n            ",285],["T_OBJECT_OPERATOR","->",286],["T_STRING","distinct",286],"(",["T_STRING","true",286],")",";",["T_WHITESPACE","\n\n        ",286],["T_IF","if",288],["T_WHITESPACE"," ",288],"(",["T_VARIABLE","$from",288],["T_WHITESPACE"," ",288],["T_IS_NOT_IDENTICAL","!==",288],["T_WHITESPACE"," ",288],["T_STRING","null",288],")",["T_WHITESPACE"," ",288],"{",["T_WHITESPACE","\n           ",288],["T_VARIABLE","$select",289],["T_OBJECT_OPERATOR","->",289],["T_STRING","where",289],"(",["T_VARIABLE","$relatedAlias",289],["T_WHITESPACE"," ",289],".",["T_WHITESPACE"," ",289],["T_CONSTANT_ENCAPSED_STRING","'.'",289],["T_WHITESPACE"," ",289],".",["T_WHITESPACE"," ",289],["T_VARIABLE","$whereColumn",289],["T_WHITESPACE"," ",289],".",["T_WHITESPACE"," ",289],["T_CONSTANT_ENCAPSED_STRING","' >= ?'",289],",",["T_WHITESPACE"," ",289],["T_VARIABLE","$from",289],")",";",["T_WHITESPACE","\n        ",289],"}",["T_WHITESPACE","\n\n        ",290],["T_IF","if",292],["T_WHITESPACE"," ",292],"(",["T_VARIABLE","$to",292],["T_WHITESPACE"," ",292],["T_IS_NOT_IDENTICAL","!==",292],["T_WHITESPACE"," ",292],["T_STRING","null",292],")",["T_WHITESPACE"," ",292],"{",["T_WHITESPACE","\n           ",292],["T_VARIABLE","$select",293],["T_OBJECT_OPERATOR","->",293],["T_STRING","where",293],"(",["T_VARIABLE","$relatedAlias",293],["T_WHITESPACE"," ",293],".",["T_WHITESPACE"," ",293],["T_CONSTANT_ENCAPSED_STRING","'.'",293],["T_WHITESPACE"," ",293],".",["T_WHITESPACE"," ",293],["T_VARIABLE","$whereColumn",293],["T_WHITESPACE"," ",293],".",["T_WHITESPACE"," ",293],["T_CONSTANT_ENCAPSED_STRING","' <= ?'",293],",",["T_WHITESPACE"," ",293],["T_VARIABLE","$to",293],")",";",["T_WHITESPACE","\n        ",293],"}",["T_WHITESPACE","\n\n        ",294],["T_IF","if",296],["T_WHITESPACE"," ",296],"(","!",["T_EMPTY","empty",296],"(",["T_VARIABLE","$additionalWhere",296],")",")",["T_WHITESPACE"," ",296],"{",["T_WHITESPACE","\n            ",296],["T_FOREACH","foreach",297],["T_WHITESPACE"," ",297],"(",["T_VARIABLE","$additionalWhere",297],["T_WHITESPACE"," ",297],["T_AS","as",297],["T_WHITESPACE"," ",297],["T_VARIABLE","$condition",297],")",["T_WHITESPACE"," ",297],"{",["T_WHITESPACE","\n                ",297],["T_IF","if",298],["T_WHITESPACE"," ",298],"(",["T_STRING","is_array",298],"(",["T_VARIABLE","$condition",298],")",["T_WHITESPACE"," ",298],["T_BOOLEAN_AND","&&",298],["T_WHITESPACE"," ",298],["T_STRING","count",298],"(",["T_VARIABLE","$condition",298],")",["T_WHITESPACE"," ",298],["T_IS_EQUAL","==",298],["T_WHITESPACE"," ",298],["T_LNUMBER","2",298],")",["T_WHITESPACE"," ",298],"{",["T_WHITESPACE","\n                   ",298],["T_VARIABLE","$condition",299],["T_WHITESPACE"," ",299],"=",["T_WHITESPACE"," ",299],["T_VARIABLE","$adapter",299],["T_OBJECT_OPERATOR","->",299],["T_STRING","quoteInto",299],"(",["T_VARIABLE","$condition",299],"[",["T_LNUMBER","0",299],"]",",",["T_WHITESPACE"," ",299],["T_VARIABLE","$condition",299],"[",["T_LNUMBER","1",299],"]",")",";",["T_WHITESPACE","\n                ",299],"}",["T_WHITESPACE"," ",300],["T_ELSEIF","elseif",300],["T_WHITESPACE"," ",300],"(",["T_STRING","is_array",300],"(",["T_VARIABLE","$condition",300],")",")",["T_WHITESPACE"," ",300],"{",["T_WHITESPACE"," ",300],["T_COMMENT","\/\/ Invalid condition\n",300],["T_WHITESPACE","                   ",301],["T_CONTINUE","continue",301],";",["T_WHITESPACE","\n                ",301],"}",["T_WHITESPACE","\n                ",302],["T_VARIABLE","$condition",303],["T_WHITESPACE"," ",303],"=",["T_WHITESPACE"," ",303],["T_STRING","str_replace",303],"(",["T_WHITESPACE","\n                    ",303],["T_ARRAY","array",304],"(",["T_CONSTANT_ENCAPSED_STRING","'{{table}}'",304],",",["T_WHITESPACE"," ",304],["T_CONSTANT_ENCAPSED_STRING","'{{related_table}}'",304],")",",",["T_WHITESPACE","\n                    ",304],["T_ARRAY","array",305],"(",["T_WHITESPACE","\n                        ",305],["T_VARIABLE","$adapter",306],["T_OBJECT_OPERATOR","->",306],["T_STRING","quoteIdentifier",306],"(",["T_VARIABLE","$alias",306],")",",",["T_WHITESPACE","\n                        ",306],["T_VARIABLE","$adapter",307],["T_OBJECT_OPERATOR","->",307],["T_STRING","quoteIdentifier",307],"(",["T_VARIABLE","$relatedAlias",307],")",["T_WHITESPACE","\n                    ",307],")",",",["T_WHITESPACE","\n                    ",308],["T_VARIABLE","$condition",309],["T_WHITESPACE","\n                ",309],")",";",["T_WHITESPACE","\n                ",310],["T_VARIABLE","$select",311],["T_OBJECT_OPERATOR","->",311],["T_STRING","where",311],"(",["T_VARIABLE","$condition",311],")",";",["T_WHITESPACE","\n            ",311],"}",["T_WHITESPACE","\n        ",312],"}",["T_WHITESPACE","\n\n        ",313],["T_RETURN","return",315],["T_WHITESPACE"," ",315],["T_VARIABLE","$select",315],";",["T_WHITESPACE","\n    ",315],"}",["T_WHITESPACE","\n\n    ",316],["T_DOC_COMMENT","\/**\n     * Check range dates and transforms it to strings\n     *\n     * @param mixed $from\n     * @param mixed $to\n     * @return Mage_Reports_Model_Resource_Report_Abstract\n     *\/",318],["T_WHITESPACE","\n    ",324],["T_PROTECTED","protected",325],["T_WHITESPACE"," ",325],["T_FUNCTION","function",325],["T_WHITESPACE"," ",325],["T_STRING","_checkDates",325],"(","&",["T_VARIABLE","$from",325],",",["T_WHITESPACE"," ",325],"&",["T_VARIABLE","$to",325],")",["T_WHITESPACE","\n    ",325],"{",["T_WHITESPACE","\n        ",326],["T_IF","if",327],["T_WHITESPACE"," ",327],"(",["T_VARIABLE","$from",327],["T_WHITESPACE"," ",327],["T_IS_NOT_IDENTICAL","!==",327],["T_WHITESPACE"," ",327],["T_STRING","null",327],")",["T_WHITESPACE"," ",327],"{",["T_WHITESPACE","\n            ",327],["T_VARIABLE","$from",328],["T_WHITESPACE"," ",328],"=",["T_WHITESPACE"," ",328],["T_VARIABLE","$this",328],["T_OBJECT_OPERATOR","->",328],["T_STRING","formatDate",328],"(",["T_VARIABLE","$from",328],")",";",["T_WHITESPACE","\n        ",328],"}",["T_WHITESPACE","\n\n        ",329],["T_IF","if",331],["T_WHITESPACE"," ",331],"(",["T_VARIABLE","$to",331],["T_WHITESPACE"," ",331],["T_IS_NOT_IDENTICAL","!==",331],["T_WHITESPACE"," ",331],["T_STRING","null",331],")",["T_WHITESPACE"," ",331],"{",["T_WHITESPACE","\n            ",331],["T_VARIABLE","$to",332],["T_WHITESPACE"," ",332],"=",["T_WHITESPACE"," ",332],["T_VARIABLE","$this",332],["T_OBJECT_OPERATOR","->",332],["T_STRING","formatDate",332],"(",["T_VARIABLE","$to",332],")",";",["T_WHITESPACE","\n        ",332],"}",["T_WHITESPACE","\n\n        ",333],["T_RETURN","return",335],["T_WHITESPACE"," ",335],["T_VARIABLE","$this",335],";",["T_WHITESPACE","\n    ",335],"}",["T_WHITESPACE","\n\n    ",336],["T_DOC_COMMENT","\/**\n    * Retrieve query for attribute with timezone conversion\n    *\n    * @param string|array $table\n    * @param string $column\n    * @param mixed $from\n    * @param mixed $to\n    * @param int|string|Mage_Core_Model_Store|null $store\n    * @return string\n    *\/",338],["T_WHITESPACE","\n    ",347],["T_PUBLIC","public",348],["T_WHITESPACE"," ",348],["T_FUNCTION","function",348],["T_WHITESPACE"," ",348],["T_STRING","getStoreTZOffsetQuery",348],"(",["T_VARIABLE","$table",348],",",["T_WHITESPACE"," ",348],["T_VARIABLE","$column",348],",",["T_WHITESPACE"," ",348],["T_VARIABLE","$from",348],["T_WHITESPACE"," ",348],"=",["T_WHITESPACE"," ",348],["T_STRING","null",348],",",["T_WHITESPACE"," ",348],["T_VARIABLE","$to",348],["T_WHITESPACE"," ",348],"=",["T_WHITESPACE"," ",348],["T_STRING","null",348],",",["T_WHITESPACE"," ",348],["T_VARIABLE","$store",348],["T_WHITESPACE"," ",348],"=",["T_WHITESPACE"," ",348],["T_STRING","null",348],")",["T_WHITESPACE","\n    ",348],"{",["T_WHITESPACE","\n        ",349],["T_VARIABLE","$column",350],["T_WHITESPACE"," ",350],"=",["T_WHITESPACE"," ",350],["T_VARIABLE","$this",350],["T_OBJECT_OPERATOR","->",350],["T_STRING","_getWriteAdapter",350],"(",")",["T_OBJECT_OPERATOR","->",350],["T_STRING","quoteIdentifier",350],"(",["T_VARIABLE","$column",350],")",";",["T_WHITESPACE","\n\n        ",350],["T_IF","if",352],["T_WHITESPACE"," ",352],"(",["T_STRING","is_null",352],"(",["T_VARIABLE","$from",352],")",")",["T_WHITESPACE"," ",352],"{",["T_WHITESPACE","\n            ",352],["T_VARIABLE","$selectOldest",353],["T_WHITESPACE"," ",353],"=",["T_WHITESPACE"," ",353],["T_VARIABLE","$this",353],["T_OBJECT_OPERATOR","->",353],["T_STRING","_getWriteAdapter",353],"(",")",["T_OBJECT_OPERATOR","->",353],["T_STRING","select",353],"(",")",["T_WHITESPACE","\n                ",353],["T_OBJECT_OPERATOR","->",354],["T_STRING","from",354],"(",["T_WHITESPACE","\n                    ",354],["T_VARIABLE","$table",355],",",["T_WHITESPACE","\n                    ",355],["T_ARRAY","array",356],"(","\"",["T_ENCAPSED_AND_WHITESPACE","MIN(",356],["T_VARIABLE","$column",356],["T_ENCAPSED_AND_WHITESPACE",")",356],"\"",")",["T_WHITESPACE","\n                ",356],")",";",["T_WHITESPACE","\n            ",357],["T_VARIABLE","$from",358],["T_WHITESPACE"," ",358],"=",["T_WHITESPACE"," ",358],["T_VARIABLE","$this",358],["T_OBJECT_OPERATOR","->",358],["T_STRING","_getWriteAdapter",358],"(",")",["T_OBJECT_OPERATOR","->",358],["T_STRING","fetchOne",358],"(",["T_VARIABLE","$selectOldest",358],")",";",["T_WHITESPACE","\n        ",358],"}",["T_WHITESPACE","\n\n        ",359],["T_VARIABLE","$periods",361],["T_WHITESPACE"," ",361],"=",["T_WHITESPACE"," ",361],["T_VARIABLE","$this",361],["T_OBJECT_OPERATOR","->",361],["T_STRING","_getTZOffsetTransitions",361],"(",["T_WHITESPACE","\n            ",361],["T_STRING","Mage",362],["T_DOUBLE_COLON","::",362],["T_STRING","app",362],"(",")",["T_OBJECT_OPERATOR","->",362],["T_STRING","getLocale",362],"(",")",["T_OBJECT_OPERATOR","->",362],["T_STRING","storeDate",362],"(",["T_VARIABLE","$store",362],")",["T_OBJECT_OPERATOR","->",362],["T_STRING","toString",362],"(",["T_STRING","Zend_Date",362],["T_DOUBLE_COLON","::",362],["T_STRING","TIMEZONE_NAME",362],")",",",["T_WHITESPACE"," ",362],["T_VARIABLE","$from",362],",",["T_WHITESPACE"," ",362],["T_VARIABLE","$to",362],["T_WHITESPACE","\n        ",362],")",";",["T_WHITESPACE","\n        ",363],["T_IF","if",364],["T_WHITESPACE"," ",364],"(",["T_EMPTY","empty",364],"(",["T_VARIABLE","$periods",364],")",")",["T_WHITESPACE"," ",364],"{",["T_WHITESPACE","\n            ",364],["T_RETURN","return",365],["T_WHITESPACE"," ",365],["T_VARIABLE","$column",365],";",["T_WHITESPACE","\n        ",365],"}",["T_WHITESPACE","\n\n        ",366],["T_VARIABLE","$query",368],["T_WHITESPACE"," ",368],"=",["T_WHITESPACE"," ",368],["T_CONSTANT_ENCAPSED_STRING","\"\"",368],";",["T_WHITESPACE","\n        ",368],["T_VARIABLE","$periodsCount",369],["T_WHITESPACE"," ",369],"=",["T_WHITESPACE"," ",369],["T_STRING","count",369],"(",["T_VARIABLE","$periods",369],")",";",["T_WHITESPACE","\n\n        ",369],["T_VARIABLE","$i",371],["T_WHITESPACE"," ",371],"=",["T_WHITESPACE"," ",371],["T_LNUMBER","0",371],";",["T_WHITESPACE","\n        ",371],["T_FOREACH","foreach",372],["T_WHITESPACE"," ",372],"(",["T_VARIABLE","$periods",372],["T_WHITESPACE"," ",372],["T_AS","as",372],["T_WHITESPACE"," ",372],["T_VARIABLE","$offset",372],["T_WHITESPACE"," ",372],["T_DOUBLE_ARROW","=>",372],["T_WHITESPACE"," ",372],["T_VARIABLE","$timestamps",372],")",["T_WHITESPACE"," ",372],"{",["T_WHITESPACE","\n            ",372],["T_VARIABLE","$subParts",373],["T_WHITESPACE"," ",373],"=",["T_WHITESPACE"," ",373],["T_ARRAY","array",373],"(",")",";",["T_WHITESPACE","\n            ",373],["T_FOREACH","foreach",374],["T_WHITESPACE"," ",374],"(",["T_VARIABLE","$timestamps",374],["T_WHITESPACE"," ",374],["T_AS","as",374],["T_WHITESPACE"," ",374],["T_VARIABLE","$ts",374],")",["T_WHITESPACE"," ",374],"{",["T_WHITESPACE","\n                ",374],["T_VARIABLE","$subParts",375],"[","]",["T_WHITESPACE"," ",375],"=",["T_WHITESPACE"," ",375],"\"",["T_ENCAPSED_AND_WHITESPACE","(",375],["T_VARIABLE","$column",375],["T_ENCAPSED_AND_WHITESPACE"," between ",375],["T_CURLY_OPEN","{",375],["T_VARIABLE","$ts",375],"[",["T_CONSTANT_ENCAPSED_STRING","'from'",375],"]","}",["T_ENCAPSED_AND_WHITESPACE"," and ",375],["T_CURLY_OPEN","{",375],["T_VARIABLE","$ts",375],"[",["T_CONSTANT_ENCAPSED_STRING","'to'",375],"]","}",["T_ENCAPSED_AND_WHITESPACE",")",375],"\"",";",["T_WHITESPACE","\n            ",375],"}",["T_WHITESPACE","\n\n            ",376],["T_VARIABLE","$then",378],["T_WHITESPACE"," ",378],"=",["T_WHITESPACE"," ",378],["T_VARIABLE","$this",378],["T_OBJECT_OPERATOR","->",378],["T_STRING","_getWriteAdapter",378],"(",")",["T_WHITESPACE","\n                ",378],["T_OBJECT_OPERATOR","->",379],["T_STRING","getDateAddSql",379],"(",["T_VARIABLE","$column",379],",",["T_WHITESPACE"," ",379],["T_VARIABLE","$offset",379],",",["T_WHITESPACE"," ",379],["T_STRING","Varien_Db_Adapter_Interface",379],["T_DOUBLE_COLON","::",379],["T_STRING","INTERVAL_SECOND",379],")",";",["T_WHITESPACE","\n\n            ",379],["T_VARIABLE","$query",381],["T_WHITESPACE"," ",381],["T_CONCAT_EQUAL",".=",381],["T_WHITESPACE"," ",381],"(",["T_INC","++",381],["T_VARIABLE","$i",381],["T_WHITESPACE"," ",381],["T_IS_EQUAL","==",381],["T_WHITESPACE"," ",381],["T_VARIABLE","$periodsCount",381],")",["T_WHITESPACE"," ",381],"?",["T_WHITESPACE"," ",381],["T_VARIABLE","$then",381],["T_WHITESPACE"," ",381],":",["T_WHITESPACE"," ",381],["T_CONSTANT_ENCAPSED_STRING","\"CASE WHEN \"",381],["T_WHITESPACE"," ",381],".",["T_WHITESPACE"," ",381],["T_STRING","join",381],"(",["T_CONSTANT_ENCAPSED_STRING","\" OR \"",381],",",["T_WHITESPACE"," ",381],["T_VARIABLE","$subParts",381],")",["T_WHITESPACE"," ",381],".",["T_WHITESPACE"," ",381],"\"",["T_ENCAPSED_AND_WHITESPACE"," THEN ",381],["T_VARIABLE","$then",381],["T_ENCAPSED_AND_WHITESPACE"," ELSE ",381],"\"",";",["T_WHITESPACE","\n        ",381],"}",["T_WHITESPACE","\n\n        ",382],["T_RETURN","return",384],["T_WHITESPACE"," ",384],["T_VARIABLE","$query",384],["T_WHITESPACE"," ",384],".",["T_WHITESPACE"," ",384],["T_STRING","str_repeat",384],"(",["T_CONSTANT_ENCAPSED_STRING","'END '",384],",",["T_WHITESPACE"," ",384],["T_STRING","count",384],"(",["T_VARIABLE","$periods",384],")",["T_WHITESPACE"," ",384],"-",["T_WHITESPACE"," ",384],["T_LNUMBER","1",384],")",";",["T_WHITESPACE","\n    ",384],"}",["T_WHITESPACE","\n\n    ",385],["T_DOC_COMMENT","\/**\n     * Retrieve transitions for offsets of given timezone\n     *\n     * @param string $timezone\n     * @param mixed $from\n     * @param mixed $to\n     * @return array\n     *\/",387],["T_WHITESPACE","\n    ",394],["T_PROTECTED","protected",395],["T_WHITESPACE"," ",395],["T_FUNCTION","function",395],["T_WHITESPACE"," ",395],["T_STRING","_getTZOffsetTransitions",395],"(",["T_VARIABLE","$timezone",395],",",["T_WHITESPACE"," ",395],["T_VARIABLE","$from",395],["T_WHITESPACE"," ",395],"=",["T_WHITESPACE"," ",395],["T_STRING","null",395],",",["T_WHITESPACE"," ",395],["T_VARIABLE","$to",395],["T_WHITESPACE"," ",395],"=",["T_WHITESPACE"," ",395],["T_STRING","null",395],")",["T_WHITESPACE","\n    ",395],"{",["T_WHITESPACE","\n        ",396],["T_VARIABLE","$tzTransitions",397],["T_WHITESPACE"," ",397],"=",["T_WHITESPACE"," ",397],["T_ARRAY","array",397],"(",")",";",["T_WHITESPACE","\n        ",397],["T_TRY","try",398],["T_WHITESPACE"," ",398],"{",["T_WHITESPACE","\n            ",398],["T_IF","if",399],["T_WHITESPACE"," ",399],"(","!",["T_EMPTY","empty",399],"(",["T_VARIABLE","$from",399],")",")",["T_WHITESPACE"," ",399],"{",["T_WHITESPACE","\n                ",399],["T_VARIABLE","$from",400],["T_WHITESPACE"," ",400],"=",["T_WHITESPACE"," ",400],["T_NEW","new",400],["T_WHITESPACE"," ",400],["T_STRING","Zend_Date",400],"(",["T_VARIABLE","$from",400],",",["T_WHITESPACE"," ",400],["T_STRING","Varien_Date",400],["T_DOUBLE_COLON","::",400],["T_STRING","DATETIME_INTERNAL_FORMAT",400],")",";",["T_WHITESPACE","\n                ",400],["T_VARIABLE","$from",401],["T_WHITESPACE"," ",401],"=",["T_WHITESPACE"," ",401],["T_VARIABLE","$from",401],["T_OBJECT_OPERATOR","->",401],["T_STRING","getTimestamp",401],"(",")",";",["T_WHITESPACE","\n            ",401],"}",["T_WHITESPACE","\n\n            ",402],["T_VARIABLE","$to",404],["T_WHITESPACE"," ",404],"=",["T_WHITESPACE"," ",404],["T_NEW","new",404],["T_WHITESPACE"," ",404],["T_STRING","Zend_Date",404],"(",["T_VARIABLE","$to",404],",",["T_WHITESPACE"," ",404],["T_STRING","Varien_Date",404],["T_DOUBLE_COLON","::",404],["T_STRING","DATETIME_INTERNAL_FORMAT",404],")",";",["T_WHITESPACE","\n            ",404],["T_VARIABLE","$nextPeriod",405],["T_WHITESPACE"," ",405],"=",["T_WHITESPACE"," ",405],["T_VARIABLE","$this",405],["T_OBJECT_OPERATOR","->",405],["T_STRING","_getWriteAdapter",405],"(",")",["T_OBJECT_OPERATOR","->",405],["T_STRING","formatDate",405],"(",["T_VARIABLE","$to",405],["T_OBJECT_OPERATOR","->",405],["T_STRING","toString",405],"(",["T_STRING","Varien_Date",405],["T_DOUBLE_COLON","::",405],["T_STRING","DATETIME_INTERNAL_FORMAT",405],")",")",";",["T_WHITESPACE","\n            ",405],["T_VARIABLE","$to",406],["T_WHITESPACE"," ",406],"=",["T_WHITESPACE"," ",406],["T_VARIABLE","$to",406],["T_OBJECT_OPERATOR","->",406],["T_STRING","getTimestamp",406],"(",")",";",["T_WHITESPACE","\n\n            ",406],["T_VARIABLE","$dtz",408],["T_WHITESPACE"," ",408],"=",["T_WHITESPACE"," ",408],["T_NEW","new",408],["T_WHITESPACE"," ",408],["T_STRING","DateTimeZone",408],"(",["T_VARIABLE","$timezone",408],")",";",["T_WHITESPACE","\n            ",408],["T_VARIABLE","$transitions",409],["T_WHITESPACE"," ",409],"=",["T_WHITESPACE"," ",409],["T_VARIABLE","$dtz",409],["T_OBJECT_OPERATOR","->",409],["T_STRING","getTransitions",409],"(",")",";",["T_WHITESPACE","\n            ",409],["T_VARIABLE","$dateTimeObject",410],["T_WHITESPACE"," ",410],"=",["T_WHITESPACE"," ",410],["T_NEW","new",410],["T_WHITESPACE"," ",410],["T_STRING","Zend_Date",410],"(",["T_CONSTANT_ENCAPSED_STRING","'c'",410],")",";",["T_WHITESPACE","\n            ",410],["T_FOR","for",411],["T_WHITESPACE"," ",411],"(",["T_VARIABLE","$i",411],["T_WHITESPACE"," ",411],"=",["T_WHITESPACE"," ",411],["T_STRING","count",411],"(",["T_VARIABLE","$transitions",411],")",["T_WHITESPACE"," ",411],"-",["T_WHITESPACE"," ",411],["T_LNUMBER","1",411],";",["T_WHITESPACE"," ",411],["T_VARIABLE","$i",411],["T_WHITESPACE"," ",411],["T_IS_GREATER_OR_EQUAL",">=",411],["T_WHITESPACE"," ",411],["T_LNUMBER","0",411],";",["T_WHITESPACE"," ",411],["T_VARIABLE","$i",411],["T_DEC","--",411],")",["T_WHITESPACE"," ",411],"{",["T_WHITESPACE","\n                ",411],["T_VARIABLE","$tr",412],["T_WHITESPACE"," ",412],"=",["T_WHITESPACE"," ",412],["T_VARIABLE","$transitions",412],"[",["T_VARIABLE","$i",412],"]",";",["T_WHITESPACE","\n                ",412],["T_IF","if",413],["T_WHITESPACE"," ",413],"(","!",["T_VARIABLE","$this",413],["T_OBJECT_OPERATOR","->",413],["T_STRING","_isValidTransition",413],"(",["T_VARIABLE","$tr",413],",",["T_WHITESPACE"," ",413],["T_VARIABLE","$to",413],")",")",["T_WHITESPACE"," ",413],"{",["T_WHITESPACE","\n                    ",413],["T_CONTINUE","continue",414],";",["T_WHITESPACE","\n                ",414],"}",["T_WHITESPACE","\n\n                ",415],["T_VARIABLE","$dateTimeObject",417],["T_OBJECT_OPERATOR","->",417],["T_STRING","set",417],"(",["T_VARIABLE","$tr",417],"[",["T_CONSTANT_ENCAPSED_STRING","'time'",417],"]",")",";",["T_WHITESPACE","\n                ",417],["T_VARIABLE","$tr",418],"[",["T_CONSTANT_ENCAPSED_STRING","'time'",418],"]",["T_WHITESPACE"," ",418],"=",["T_WHITESPACE"," ",418],["T_VARIABLE","$this",418],["T_OBJECT_OPERATOR","->",418],["T_STRING","_getWriteAdapter",418],"(",")",["T_WHITESPACE","\n                    ",418],["T_OBJECT_OPERATOR","->",419],["T_STRING","formatDate",419],"(",["T_VARIABLE","$dateTimeObject",419],["T_OBJECT_OPERATOR","->",419],["T_STRING","toString",419],"(",["T_STRING","Varien_Date",419],["T_DOUBLE_COLON","::",419],["T_STRING","DATETIME_INTERNAL_FORMAT",419],")",")",";",["T_WHITESPACE","\n                ",419],["T_VARIABLE","$tzTransitions",420],"[",["T_VARIABLE","$tr",420],"[",["T_CONSTANT_ENCAPSED_STRING","'offset'",420],"]","]","[","]",["T_WHITESPACE"," ",420],"=",["T_WHITESPACE"," ",420],["T_ARRAY","array",420],"(",["T_CONSTANT_ENCAPSED_STRING","'from'",420],["T_WHITESPACE"," ",420],["T_DOUBLE_ARROW","=>",420],["T_WHITESPACE"," ",420],["T_VARIABLE","$tr",420],"[",["T_CONSTANT_ENCAPSED_STRING","'time'",420],"]",",",["T_WHITESPACE"," ",420],["T_CONSTANT_ENCAPSED_STRING","'to'",420],["T_WHITESPACE"," ",420],["T_DOUBLE_ARROW","=>",420],["T_WHITESPACE"," ",420],["T_VARIABLE","$nextPeriod",420],")",";",["T_WHITESPACE","\n\n                ",420],["T_IF","if",422],["T_WHITESPACE"," ",422],"(","!",["T_EMPTY","empty",422],"(",["T_VARIABLE","$from",422],")",["T_WHITESPACE"," ",422],["T_BOOLEAN_AND","&&",422],["T_WHITESPACE"," ",422],["T_VARIABLE","$tr",422],"[",["T_CONSTANT_ENCAPSED_STRING","'ts'",422],"]",["T_WHITESPACE"," ",422],"<",["T_WHITESPACE"," ",422],["T_VARIABLE","$from",422],")",["T_WHITESPACE"," ",422],"{",["T_WHITESPACE","\n                    ",422],["T_BREAK","break",423],";",["T_WHITESPACE","\n                ",423],"}",["T_WHITESPACE","\n                ",424],["T_VARIABLE","$nextPeriod",425],["T_WHITESPACE"," ",425],"=",["T_WHITESPACE"," ",425],["T_VARIABLE","$tr",425],"[",["T_CONSTANT_ENCAPSED_STRING","'time'",425],"]",";",["T_WHITESPACE","\n            ",425],"}",["T_WHITESPACE","\n        ",426],"}",["T_WHITESPACE"," ",427],["T_CATCH","catch",427],["T_WHITESPACE"," ",427],"(",["T_STRING","Exception",427],["T_WHITESPACE"," ",427],["T_VARIABLE","$e",427],")",["T_WHITESPACE"," ",427],"{",["T_WHITESPACE","\n            ",427],["T_VARIABLE","$this",428],["T_OBJECT_OPERATOR","->",428],["T_STRING","_logException",428],"(",["T_VARIABLE","$e",428],")",";",["T_WHITESPACE","\n        ",428],"}",["T_WHITESPACE","\n\n        ",429],["T_RETURN","return",431],["T_WHITESPACE"," ",431],["T_VARIABLE","$tzTransitions",431],";",["T_WHITESPACE","\n    ",431],"}",["T_WHITESPACE","\n\n    ",432],["T_DOC_COMMENT","\/**\n     * Logs the exceptions\n     *\n     * @param Exception $exception\n     *\/",434],["T_WHITESPACE","\n    ",438],["T_PROTECTED","protected",439],["T_WHITESPACE"," ",439],["T_FUNCTION","function",439],["T_WHITESPACE"," ",439],["T_STRING","_logException",439],"(",["T_VARIABLE","$exception",439],")",["T_WHITESPACE","\n    ",439],"{",["T_WHITESPACE","\n        ",440],["T_STRING","Mage",441],["T_DOUBLE_COLON","::",441],["T_STRING","logException",441],"(",["T_VARIABLE","$exception",441],")",";",["T_WHITESPACE","\n    ",441],"}",["T_WHITESPACE","\n\n    ",442],["T_DOC_COMMENT","\/**\n     * Verifies the transition and the \"to\" timestamp\n     *\n     * @param array      $transition\n     * @param int|string $to\n     * @return bool\n     *\/",444],["T_WHITESPACE","\n    ",450],["T_PROTECTED","protected",451],["T_WHITESPACE"," ",451],["T_FUNCTION","function",451],["T_WHITESPACE"," ",451],["T_STRING","_isValidTransition",451],"(",["T_VARIABLE","$transition",451],",",["T_WHITESPACE"," ",451],["T_VARIABLE","$to",451],")",["T_WHITESPACE","\n    ",451],"{",["T_WHITESPACE","\n        ",452],["T_VARIABLE","$result",453],["T_WHITESPACE","         ",453],"=",["T_WHITESPACE"," ",453],["T_STRING","true",453],";",["T_WHITESPACE","\n        ",453],["T_VARIABLE","$timeStamp",454],["T_WHITESPACE","      ",454],"=",["T_WHITESPACE"," ",454],["T_VARIABLE","$transition",454],"[",["T_CONSTANT_ENCAPSED_STRING","'ts'",454],"]",";",["T_WHITESPACE","\n        ",454],["T_VARIABLE","$transitionYear",455],["T_WHITESPACE"," ",455],"=",["T_WHITESPACE"," ",455],["T_STRING","date",455],"(",["T_CONSTANT_ENCAPSED_STRING","'Y'",455],",",["T_WHITESPACE"," ",455],["T_VARIABLE","$timeStamp",455],")",";",["T_WHITESPACE","\n\n        ",455],["T_IF","if",457],["T_WHITESPACE"," ",457],"(",["T_VARIABLE","$transitionYear",457],["T_WHITESPACE"," ",457],">",["T_WHITESPACE"," ",457],["T_LNUMBER","10000",457],["T_WHITESPACE"," ",457],["T_BOOLEAN_OR","||",457],["T_WHITESPACE"," ",457],["T_VARIABLE","$transitionYear",457],["T_WHITESPACE"," ",457],"<",["T_WHITESPACE"," ",457],"-",["T_LNUMBER","10000",457],")",["T_WHITESPACE"," ",457],"{",["T_WHITESPACE","\n            ",457],["T_VARIABLE","$result",458],["T_WHITESPACE"," ",458],"=",["T_WHITESPACE"," ",458],["T_STRING","false",458],";",["T_WHITESPACE","\n        ",458],"}",["T_WHITESPACE"," ",459],["T_ELSE","else",459],["T_WHITESPACE"," ",459],["T_IF","if",459],["T_WHITESPACE"," ",459],"(",["T_VARIABLE","$timeStamp",459],["T_WHITESPACE"," ",459],">",["T_WHITESPACE"," ",459],["T_VARIABLE","$to",459],")",["T_WHITESPACE"," ",459],"{",["T_WHITESPACE","\n            ",459],["T_VARIABLE","$result",460],["T_WHITESPACE"," ",460],"=",["T_WHITESPACE"," ",460],["T_STRING","false",460],";",["T_WHITESPACE","\n        ",460],"}",["T_WHITESPACE","\n\n        ",461],["T_RETURN","return",463],["T_WHITESPACE"," ",463],["T_VARIABLE","$result",463],";",["T_WHITESPACE","\n    ",463],"}",["T_WHITESPACE","\n\n    ",464],["T_DOC_COMMENT","\/**\n     * Retrieve store timezone offset from UTC in the form acceptable by SQL's CONVERT_TZ()\n     *\n     * @param unknown_type $store\n     * @return string\n     *\/",466],["T_WHITESPACE","\n    ",471],["T_PROTECTED","protected",472],["T_WHITESPACE"," ",472],["T_FUNCTION","function",472],["T_WHITESPACE"," ",472],["T_STRING","_getStoreTimezoneUtcOffset",472],"(",["T_VARIABLE","$store",472],["T_WHITESPACE"," ",472],"=",["T_WHITESPACE"," ",472],["T_STRING","null",472],")",["T_WHITESPACE","\n    ",472],"{",["T_WHITESPACE","\n        ",473],["T_RETURN","return",474],["T_WHITESPACE"," ",474],["T_STRING","Mage",474],["T_DOUBLE_COLON","::",474],["T_STRING","app",474],"(",")",["T_OBJECT_OPERATOR","->",474],["T_STRING","getLocale",474],"(",")",["T_OBJECT_OPERATOR","->",474],["T_STRING","storeDate",474],"(",["T_VARIABLE","$store",474],")",["T_OBJECT_OPERATOR","->",474],["T_STRING","toString",474],"(",["T_STRING","Zend_Date",474],["T_DOUBLE_COLON","::",474],["T_STRING","GMT_DIFF_SEP",474],")",";",["T_WHITESPACE","\n    ",474],"}",["T_WHITESPACE","\n\n    ",475],["T_DOC_COMMENT","\/**\n     * Retrieve date in UTC timezone\n     *\n     * @param unknown_type $date\n     * @return Zend_Date|null\n     *\/",477],["T_WHITESPACE","\n    ",482],["T_PROTECTED","protected",483],["T_WHITESPACE"," ",483],["T_FUNCTION","function",483],["T_WHITESPACE"," ",483],["T_STRING","_dateToUtc",483],"(",["T_VARIABLE","$date",483],")",["T_WHITESPACE","\n    ",483],"{",["T_WHITESPACE","\n        ",484],["T_IF","if",485],["T_WHITESPACE"," ",485],"(",["T_VARIABLE","$date",485],["T_WHITESPACE"," ",485],["T_IS_IDENTICAL","===",485],["T_WHITESPACE"," ",485],["T_STRING","null",485],")",["T_WHITESPACE"," ",485],"{",["T_WHITESPACE","\n            ",485],["T_RETURN","return",486],["T_WHITESPACE"," ",486],["T_STRING","null",486],";",["T_WHITESPACE","\n        ",486],"}",["T_WHITESPACE","\n        ",487],["T_VARIABLE","$dateUtc",488],["T_WHITESPACE"," ",488],"=",["T_WHITESPACE"," ",488],["T_NEW","new",488],["T_WHITESPACE"," ",488],["T_STRING","Zend_Date",488],"(",["T_VARIABLE","$date",488],")",";",["T_WHITESPACE","\n        ",488],["T_VARIABLE","$dateUtc",489],["T_OBJECT_OPERATOR","->",489],["T_STRING","setTimezone",489],"(",["T_CONSTANT_ENCAPSED_STRING","'Etc\/UTC'",489],")",";",["T_WHITESPACE","\n        ",489],["T_RETURN","return",490],["T_WHITESPACE"," ",490],["T_VARIABLE","$dateUtc",490],";",["T_WHITESPACE","\n    ",490],"}",["T_WHITESPACE","\n",491],"}",["T_WHITESPACE","\n",492]]
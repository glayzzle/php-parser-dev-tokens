[["T_OPEN_TAG","<?php\n",1],["T_DOC_COMMENT","\/**\n * Magento\n *\n * NOTICE OF LICENSE\n *\n * This source file is subject to the Open Software License (OSL 3.0)\n * that is bundled with this package in the file LICENSE.txt.\n * It is also available through the world-wide-web at this URL:\n * http:\/\/opensource.org\/licenses\/osl-3.0.php\n * If you did not receive a copy of the license and are unable to\n * obtain it through the world-wide-web, please send an email\n * to license@magento.com so we can send you a copy immediately.\n *\n * DISCLAIMER\n *\n * Do not edit or add to this file if you wish to upgrade Magento to newer\n * versions in the future. If you wish to customize Magento for your\n * needs please refer to http:\/\/www.magento.com for more information.\n *\n * @category    Mage\n * @package     Mage_Shipping\n * @copyright  Copyright (c) 2006-2016 X.commerce, Inc. and affiliates (http:\/\/www.magento.com)\n * @license    http:\/\/opensource.org\/licenses\/osl-3.0.php  Open Software License (OSL 3.0)\n *\/",2],["T_WHITESPACE","\n\n\n",25],["T_CLASS","class",28],["T_WHITESPACE"," ",28],["T_STRING","Mage_Shipping_Model_Config",28],["T_WHITESPACE"," ",28],["T_EXTENDS","extends",28],["T_WHITESPACE"," ",28],["T_STRING","Varien_Object",28],["T_WHITESPACE","\n",28],"{",["T_WHITESPACE","\n    ",29],["T_DOC_COMMENT","\/**\n     * Shipping origin settings\n     *\/",30],["T_WHITESPACE","\n    ",32],["T_CONST","const",33],["T_WHITESPACE"," ",33],["T_STRING","XML_PATH_ORIGIN_COUNTRY_ID",33],["T_WHITESPACE"," ",33],"=",["T_WHITESPACE"," ",33],["T_CONSTANT_ENCAPSED_STRING","'shipping\/origin\/country_id'",33],";",["T_WHITESPACE","\n    ",33],["T_CONST","const",34],["T_WHITESPACE"," ",34],["T_STRING","XML_PATH_ORIGIN_REGION_ID",34],["T_WHITESPACE","  ",34],"=",["T_WHITESPACE"," ",34],["T_CONSTANT_ENCAPSED_STRING","'shipping\/origin\/region_id'",34],";",["T_WHITESPACE","\n    ",34],["T_CONST","const",35],["T_WHITESPACE"," ",35],["T_STRING","XML_PATH_ORIGIN_CITY",35],["T_WHITESPACE","       ",35],"=",["T_WHITESPACE"," ",35],["T_CONSTANT_ENCAPSED_STRING","'shipping\/origin\/city'",35],";",["T_WHITESPACE","\n    ",35],["T_CONST","const",36],["T_WHITESPACE"," ",36],["T_STRING","XML_PATH_ORIGIN_POSTCODE",36],["T_WHITESPACE","   ",36],"=",["T_WHITESPACE"," ",36],["T_CONSTANT_ENCAPSED_STRING","'shipping\/origin\/postcode'",36],";",["T_WHITESPACE","\n\n    ",36],["T_PROTECTED","protected",38],["T_WHITESPACE"," ",38],["T_STATIC","static",38],["T_WHITESPACE"," ",38],["T_VARIABLE","$_carriers",38],";",["T_WHITESPACE","\n\n    ",38],["T_DOC_COMMENT","\/**\n     * Retrieve active system carriers\n     *\n     * @param   mixed $store\n     * @return  array\n     *\/",40],["T_WHITESPACE","\n    ",45],["T_PUBLIC","public",46],["T_WHITESPACE"," ",46],["T_FUNCTION","function",46],["T_WHITESPACE"," ",46],["T_STRING","getActiveCarriers",46],"(",["T_VARIABLE","$store",46],["T_WHITESPACE"," ",46],"=",["T_WHITESPACE"," ",46],["T_STRING","null",46],")",["T_WHITESPACE","\n    ",46],"{",["T_WHITESPACE","\n        ",47],["T_VARIABLE","$carriers",48],["T_WHITESPACE"," ",48],"=",["T_WHITESPACE"," ",48],["T_ARRAY","array",48],"(",")",";",["T_WHITESPACE","\n        ",48],["T_VARIABLE","$config",49],["T_WHITESPACE"," ",49],"=",["T_WHITESPACE"," ",49],["T_STRING","Mage",49],["T_DOUBLE_COLON","::",49],["T_STRING","getStoreConfig",49],"(",["T_CONSTANT_ENCAPSED_STRING","'carriers'",49],",",["T_WHITESPACE"," ",49],["T_VARIABLE","$store",49],")",";",["T_WHITESPACE","\n        ",49],["T_FOREACH","foreach",50],["T_WHITESPACE"," ",50],"(",["T_VARIABLE","$config",50],["T_WHITESPACE"," ",50],["T_AS","as",50],["T_WHITESPACE"," ",50],["T_VARIABLE","$code",50],["T_WHITESPACE"," ",50],["T_DOUBLE_ARROW","=>",50],["T_WHITESPACE"," ",50],["T_VARIABLE","$carrierConfig",50],")",["T_WHITESPACE"," ",50],"{",["T_WHITESPACE","\n            ",50],["T_IF","if",51],["T_WHITESPACE"," ",51],"(",["T_STRING","Mage",51],["T_DOUBLE_COLON","::",51],["T_STRING","getStoreConfigFlag",51],"(",["T_CONSTANT_ENCAPSED_STRING","'carriers\/'",51],".",["T_VARIABLE","$code",51],".",["T_CONSTANT_ENCAPSED_STRING","'\/active'",51],",",["T_WHITESPACE"," ",51],["T_VARIABLE","$store",51],")",")",["T_WHITESPACE"," ",51],"{",["T_WHITESPACE","\n                ",51],["T_VARIABLE","$carrierModel",52],["T_WHITESPACE"," ",52],"=",["T_WHITESPACE"," ",52],["T_VARIABLE","$this",52],["T_OBJECT_OPERATOR","->",52],["T_STRING","_getCarrier",52],"(",["T_VARIABLE","$code",52],",",["T_WHITESPACE"," ",52],["T_VARIABLE","$carrierConfig",52],",",["T_WHITESPACE"," ",52],["T_VARIABLE","$store",52],")",";",["T_WHITESPACE","\n                ",52],["T_IF","if",53],["T_WHITESPACE"," ",53],"(",["T_VARIABLE","$carrierModel",53],")",["T_WHITESPACE"," ",53],"{",["T_WHITESPACE","\n                    ",53],["T_VARIABLE","$carriers",54],"[",["T_VARIABLE","$code",54],"]",["T_WHITESPACE"," ",54],"=",["T_WHITESPACE"," ",54],["T_VARIABLE","$carrierModel",54],";",["T_WHITESPACE","\n                ",54],"}",["T_WHITESPACE","\n            ",55],"}",["T_WHITESPACE","\n        ",56],"}",["T_WHITESPACE","\n        ",57],["T_RETURN","return",58],["T_WHITESPACE"," ",58],["T_VARIABLE","$carriers",58],";",["T_WHITESPACE","\n    ",58],"}",["T_WHITESPACE","\n\n    ",59],["T_DOC_COMMENT","\/**\n     * Retrieve all system carriers\n     *\n     * @param   mixed $store\n     * @return  array\n     *\/",61],["T_WHITESPACE","\n    ",66],["T_PUBLIC","public",67],["T_WHITESPACE"," ",67],["T_FUNCTION","function",67],["T_WHITESPACE"," ",67],["T_STRING","getAllCarriers",67],"(",["T_VARIABLE","$store",67],["T_WHITESPACE"," ",67],"=",["T_WHITESPACE"," ",67],["T_STRING","null",67],")",["T_WHITESPACE","\n    ",67],"{",["T_WHITESPACE","\n        ",68],["T_VARIABLE","$carriers",69],["T_WHITESPACE"," ",69],"=",["T_WHITESPACE"," ",69],["T_ARRAY","array",69],"(",")",";",["T_WHITESPACE","\n        ",69],["T_VARIABLE","$config",70],["T_WHITESPACE"," ",70],"=",["T_WHITESPACE"," ",70],["T_STRING","Mage",70],["T_DOUBLE_COLON","::",70],["T_STRING","getStoreConfig",70],"(",["T_CONSTANT_ENCAPSED_STRING","'carriers'",70],",",["T_WHITESPACE"," ",70],["T_VARIABLE","$store",70],")",";",["T_WHITESPACE","\n        ",70],["T_FOREACH","foreach",71],["T_WHITESPACE"," ",71],"(",["T_VARIABLE","$config",71],["T_WHITESPACE"," ",71],["T_AS","as",71],["T_WHITESPACE"," ",71],["T_VARIABLE","$code",71],["T_WHITESPACE"," ",71],["T_DOUBLE_ARROW","=>",71],["T_WHITESPACE"," ",71],["T_VARIABLE","$carrierConfig",71],")",["T_WHITESPACE"," ",71],"{",["T_WHITESPACE","\n            ",71],["T_VARIABLE","$model",72],["T_WHITESPACE"," ",72],"=",["T_WHITESPACE"," ",72],["T_VARIABLE","$this",72],["T_OBJECT_OPERATOR","->",72],["T_STRING","_getCarrier",72],"(",["T_VARIABLE","$code",72],",",["T_WHITESPACE"," ",72],["T_VARIABLE","$carrierConfig",72],",",["T_WHITESPACE"," ",72],["T_VARIABLE","$store",72],")",";",["T_WHITESPACE","\n            ",72],["T_IF","if",73],["T_WHITESPACE"," ",73],"(",["T_VARIABLE","$model",73],")",["T_WHITESPACE"," ",73],"{",["T_WHITESPACE","\n                ",73],["T_VARIABLE","$carriers",74],"[",["T_VARIABLE","$code",74],"]",["T_WHITESPACE"," ",74],"=",["T_WHITESPACE"," ",74],["T_VARIABLE","$model",74],";",["T_WHITESPACE","\n            ",74],"}",["T_WHITESPACE","\n        ",75],"}",["T_WHITESPACE","\n        ",76],["T_RETURN","return",77],["T_WHITESPACE"," ",77],["T_VARIABLE","$carriers",77],";",["T_WHITESPACE","\n    ",77],"}",["T_WHITESPACE","\n\n    ",78],["T_DOC_COMMENT","\/**\n     * Retrieve carrier model instance by carrier code\n     *\n     * @param   string $carrierCode\n     * @param   mixed $store\n     * @return  Mage_Usa_Model_Shipping_Carrier_Abstract\n     *\/",80],["T_WHITESPACE","\n    ",86],["T_PUBLIC","public",87],["T_WHITESPACE"," ",87],["T_FUNCTION","function",87],["T_WHITESPACE"," ",87],["T_STRING","getCarrierInstance",87],"(",["T_VARIABLE","$carrierCode",87],",",["T_WHITESPACE"," ",87],["T_VARIABLE","$store",87],["T_WHITESPACE"," ",87],"=",["T_WHITESPACE"," ",87],["T_STRING","null",87],")",["T_WHITESPACE","\n    ",87],"{",["T_WHITESPACE","\n        ",88],["T_VARIABLE","$carrierConfig",89],["T_WHITESPACE"," ",89],"=",["T_WHITESPACE","  ",89],["T_STRING","Mage",89],["T_DOUBLE_COLON","::",89],["T_STRING","getStoreConfig",89],"(",["T_CONSTANT_ENCAPSED_STRING","'carriers\/'",89],".",["T_VARIABLE","$carrierCode",89],",",["T_WHITESPACE"," ",89],["T_VARIABLE","$store",89],")",";",["T_WHITESPACE","\n        ",89],["T_IF","if",90],["T_WHITESPACE"," ",90],"(","!",["T_EMPTY","empty",90],"(",["T_VARIABLE","$carrierConfig",90],")",")",["T_WHITESPACE"," ",90],"{",["T_WHITESPACE","\n            ",90],["T_RETURN","return",91],["T_WHITESPACE"," ",91],["T_VARIABLE","$this",91],["T_OBJECT_OPERATOR","->",91],["T_STRING","_getCarrier",91],"(",["T_VARIABLE","$carrierCode",91],",",["T_WHITESPACE"," ",91],["T_VARIABLE","$carrierConfig",91],",",["T_WHITESPACE"," ",91],["T_VARIABLE","$store",91],")",";",["T_WHITESPACE","\n        ",91],"}",["T_WHITESPACE","\n        ",92],["T_RETURN","return",93],["T_WHITESPACE"," ",93],["T_STRING","false",93],";",["T_WHITESPACE","\n    ",93],"}",["T_WHITESPACE","\n\n    ",94],["T_DOC_COMMENT","\/**\n     * Get carrier model object\n     *\n     * @param string $code\n     * @param array $config\n     * @param mixed $store\n     * @return Mage_Shipping_Model_Carrier_Abstract\n     *\/",96],["T_WHITESPACE","\n    ",103],["T_PROTECTED","protected",104],["T_WHITESPACE"," ",104],["T_FUNCTION","function",104],["T_WHITESPACE"," ",104],["T_STRING","_getCarrier",104],"(",["T_VARIABLE","$code",104],",",["T_WHITESPACE"," ",104],["T_VARIABLE","$config",104],",",["T_WHITESPACE"," ",104],["T_VARIABLE","$store",104],["T_WHITESPACE"," ",104],"=",["T_WHITESPACE"," ",104],["T_STRING","null",104],")",["T_WHITESPACE","\n    ",104],"{",["T_WHITESPACE","\n        ",105],["T_IF","if",106],["T_WHITESPACE"," ",106],"(","!",["T_ISSET","isset",106],"(",["T_VARIABLE","$config",106],"[",["T_CONSTANT_ENCAPSED_STRING","'model'",106],"]",")",")",["T_WHITESPACE"," ",106],"{",["T_WHITESPACE","\n            ",106],["T_RETURN","return",107],["T_WHITESPACE"," ",107],["T_STRING","false",107],";",["T_WHITESPACE","\n        ",107],"}",["T_WHITESPACE","\n        ",108],["T_VARIABLE","$modelName",109],["T_WHITESPACE"," ",109],"=",["T_WHITESPACE"," ",109],["T_VARIABLE","$config",109],"[",["T_CONSTANT_ENCAPSED_STRING","'model'",109],"]",";",["T_WHITESPACE","\n\n        ",109],["T_DOC_COMMENT","\/**\n         * Added protection from not existing models usage.\n         * Related with module uninstall process\n         *\/",111],["T_WHITESPACE","\n        ",114],["T_TRY","try",115],["T_WHITESPACE"," ",115],"{",["T_WHITESPACE","\n            ",115],["T_VARIABLE","$carrier",116],["T_WHITESPACE"," ",116],"=",["T_WHITESPACE"," ",116],["T_STRING","Mage",116],["T_DOUBLE_COLON","::",116],["T_STRING","getModel",116],"(",["T_VARIABLE","$modelName",116],")",";",["T_WHITESPACE","\n        ",116],"}",["T_WHITESPACE"," ",117],["T_CATCH","catch",117],["T_WHITESPACE"," ",117],"(",["T_STRING","Exception",117],["T_WHITESPACE"," ",117],["T_VARIABLE","$e",117],")",["T_WHITESPACE"," ",117],"{",["T_WHITESPACE","\n            ",117],["T_STRING","Mage",118],["T_DOUBLE_COLON","::",118],["T_STRING","logException",118],"(",["T_VARIABLE","$e",118],")",";",["T_WHITESPACE","\n            ",118],["T_RETURN","return",119],["T_WHITESPACE"," ",119],["T_STRING","false",119],";",["T_WHITESPACE","\n        ",119],"}",["T_WHITESPACE","\n        ",120],["T_VARIABLE","$carrier",121],["T_OBJECT_OPERATOR","->",121],["T_STRING","setId",121],"(",["T_VARIABLE","$code",121],")",["T_OBJECT_OPERATOR","->",121],["T_STRING","setStore",121],"(",["T_VARIABLE","$store",121],")",";",["T_WHITESPACE","\n        ",121],["T_STRING","self",122],["T_DOUBLE_COLON","::",122],["T_VARIABLE","$_carriers",122],"[",["T_VARIABLE","$code",122],"]",["T_WHITESPACE"," ",122],"=",["T_WHITESPACE"," ",122],["T_VARIABLE","$carrier",122],";",["T_WHITESPACE","\n        ",122],["T_RETURN","return",123],["T_WHITESPACE"," ",123],["T_STRING","self",123],["T_DOUBLE_COLON","::",123],["T_VARIABLE","$_carriers",123],"[",["T_VARIABLE","$code",123],"]",";",["T_WHITESPACE","\n    ",123],"}",["T_WHITESPACE","\n",124],"}",["T_WHITESPACE","\n",125]]
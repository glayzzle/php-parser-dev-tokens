[["T_OPEN_TAG","<?php\n",1],["T_DOC_COMMENT","\/**\n * Magento\n *\n * NOTICE OF LICENSE\n *\n * This source file is subject to the Open Software License (OSL 3.0)\n * that is bundled with this package in the file LICENSE.txt.\n * It is also available through the world-wide-web at this URL:\n * http:\/\/opensource.org\/licenses\/osl-3.0.php\n * If you did not receive a copy of the license and are unable to\n * obtain it through the world-wide-web, please send an email\n * to license@magento.com so we can send you a copy immediately.\n *\n * DISCLAIMER\n *\n * Do not edit or add to this file if you wish to upgrade Magento to newer\n * versions in the future. If you wish to customize Magento for your\n * needs please refer to http:\/\/www.magento.com for more information.\n *\n * @category    Mage\n * @package     Mage_Shipping\n * @copyright  Copyright (c) 2006-2016 X.commerce, Inc. and affiliates (http:\/\/www.magento.com)\n * @license    http:\/\/opensource.org\/licenses\/osl-3.0.php  Open Software License (OSL 3.0)\n *\/",2],["T_WHITESPACE","\n\n",25],["T_DOC_COMMENT","\/**\n * Shipping table rates\n *\n * @category   Mage\n * @package    Mage_Shipping\n * @author     Magento Core Team <core@magentocommerce.com>\n *\/",27],["T_WHITESPACE","\n",33],["T_CLASS","class",34],["T_WHITESPACE"," ",34],["T_STRING","Mage_Shipping_Model_Resource_Carrier_Tablerate",34],["T_WHITESPACE"," ",34],["T_EXTENDS","extends",34],["T_WHITESPACE"," ",34],["T_STRING","Mage_Core_Model_Resource_Db_Abstract",34],["T_WHITESPACE","\n",34],"{",["T_WHITESPACE","\n    ",35],["T_DOC_COMMENT","\/**\n     * Import table rates website ID\n     *\n     * @var int\n     *\/",36],["T_WHITESPACE","\n    ",40],["T_PROTECTED","protected",41],["T_WHITESPACE"," ",41],["T_VARIABLE","$_importWebsiteId",41],["T_WHITESPACE","     ",41],"=",["T_WHITESPACE"," ",41],["T_LNUMBER","0",41],";",["T_WHITESPACE","\n\n    ",41],["T_DOC_COMMENT","\/**\n     * Errors in import process\n     *\n     * @var array\n     *\/",43],["T_WHITESPACE","\n    ",47],["T_PROTECTED","protected",48],["T_WHITESPACE"," ",48],["T_VARIABLE","$_importErrors",48],["T_WHITESPACE","        ",48],"=",["T_WHITESPACE"," ",48],["T_ARRAY","array",48],"(",")",";",["T_WHITESPACE","\n\n    ",48],["T_DOC_COMMENT","\/**\n     * Count of imported table rates\n     *\n     * @var int\n     *\/",50],["T_WHITESPACE","\n    ",54],["T_PROTECTED","protected",55],["T_WHITESPACE"," ",55],["T_VARIABLE","$_importedRows",55],["T_WHITESPACE","        ",55],"=",["T_WHITESPACE"," ",55],["T_LNUMBER","0",55],";",["T_WHITESPACE","\n\n    ",55],["T_DOC_COMMENT","\/**\n     * Array of unique table rate keys to protect from duplicates\n     *\n     * @var array\n     *\/",57],["T_WHITESPACE","\n    ",61],["T_PROTECTED","protected",62],["T_WHITESPACE"," ",62],["T_VARIABLE","$_importUniqueHash",62],["T_WHITESPACE","    ",62],"=",["T_WHITESPACE"," ",62],["T_ARRAY","array",62],"(",")",";",["T_WHITESPACE","\n\n    ",62],["T_DOC_COMMENT","\/**\n     * Array of countries keyed by iso2 code\n     *\n     * @var array\n     *\/",64],["T_WHITESPACE","\n    ",68],["T_PROTECTED","protected",69],["T_WHITESPACE"," ",69],["T_VARIABLE","$_importIso2Countries",69],";",["T_WHITESPACE","\n\n    ",69],["T_DOC_COMMENT","\/**\n     * Array of countries keyed by iso3 code\n     *\n     * @var array\n     *\/",71],["T_WHITESPACE","\n    ",75],["T_PROTECTED","protected",76],["T_WHITESPACE"," ",76],["T_VARIABLE","$_importIso3Countries",76],";",["T_WHITESPACE","\n\n    ",76],["T_DOC_COMMENT","\/**\n     * Associative array of countries and regions\n     * [country_id][region_code] = region_id\n     *\n     * @var array\n     *\/",78],["T_WHITESPACE","\n    ",83],["T_PROTECTED","protected",84],["T_WHITESPACE"," ",84],["T_VARIABLE","$_importRegions",84],";",["T_WHITESPACE","\n\n    ",84],["T_DOC_COMMENT","\/**\n     * Import Table Rate condition name\n     *\n     * @var string\n     *\/",86],["T_WHITESPACE","\n    ",90],["T_PROTECTED","protected",91],["T_WHITESPACE"," ",91],["T_VARIABLE","$_importConditionName",91],";",["T_WHITESPACE","\n\n    ",91],["T_DOC_COMMENT","\/**\n     * Array of condition full names\n     *\n     * @var array\n     *\/",93],["T_WHITESPACE","\n    ",97],["T_PROTECTED","protected",98],["T_WHITESPACE"," ",98],["T_VARIABLE","$_conditionFullNames",98],["T_WHITESPACE","  ",98],"=",["T_WHITESPACE"," ",98],["T_ARRAY","array",98],"(",")",";",["T_WHITESPACE","\n\n    ",98],["T_DOC_COMMENT","\/**\n     * Define main table and id field name\n     *\n     * @return void\n     *\/",100],["T_WHITESPACE","\n    ",104],["T_PROTECTED","protected",105],["T_WHITESPACE"," ",105],["T_FUNCTION","function",105],["T_WHITESPACE"," ",105],["T_STRING","_construct",105],"(",")",["T_WHITESPACE","\n    ",105],"{",["T_WHITESPACE","\n        ",106],["T_VARIABLE","$this",107],["T_OBJECT_OPERATOR","->",107],["T_STRING","_init",107],"(",["T_CONSTANT_ENCAPSED_STRING","'shipping\/tablerate'",107],",",["T_WHITESPACE"," ",107],["T_CONSTANT_ENCAPSED_STRING","'pk'",107],")",";",["T_WHITESPACE","\n    ",107],"}",["T_WHITESPACE","\n\n    ",108],["T_DOC_COMMENT","\/**\n     * Return table rate array or false by rate request\n     *\n     * @param Mage_Shipping_Model_Rate_Request $request\n     * @return array|boolean\n     *\/",110],["T_WHITESPACE","\n    ",115],["T_PUBLIC","public",116],["T_WHITESPACE"," ",116],["T_FUNCTION","function",116],["T_WHITESPACE"," ",116],["T_STRING","getRate",116],"(",["T_STRING","Mage_Shipping_Model_Rate_Request",116],["T_WHITESPACE"," ",116],["T_VARIABLE","$request",116],")",["T_WHITESPACE","\n    ",116],"{",["T_WHITESPACE","\n        ",117],["T_VARIABLE","$adapter",118],["T_WHITESPACE"," ",118],"=",["T_WHITESPACE"," ",118],["T_VARIABLE","$this",118],["T_OBJECT_OPERATOR","->",118],["T_STRING","_getReadAdapter",118],"(",")",";",["T_WHITESPACE","\n        ",118],["T_VARIABLE","$bind",119],["T_WHITESPACE"," ",119],"=",["T_WHITESPACE"," ",119],["T_ARRAY","array",119],"(",["T_WHITESPACE","\n            ",119],["T_CONSTANT_ENCAPSED_STRING","':website_id'",120],["T_WHITESPACE"," ",120],["T_DOUBLE_ARROW","=>",120],["T_WHITESPACE"," ",120],["T_INT_CAST","(int)",120],["T_WHITESPACE"," ",120],["T_VARIABLE","$request",120],["T_OBJECT_OPERATOR","->",120],["T_STRING","getWebsiteId",120],"(",")",",",["T_WHITESPACE","\n            ",120],["T_CONSTANT_ENCAPSED_STRING","':country_id'",121],["T_WHITESPACE"," ",121],["T_DOUBLE_ARROW","=>",121],["T_WHITESPACE"," ",121],["T_VARIABLE","$request",121],["T_OBJECT_OPERATOR","->",121],["T_STRING","getDestCountryId",121],"(",")",",",["T_WHITESPACE","\n            ",121],["T_CONSTANT_ENCAPSED_STRING","':region_id'",122],["T_WHITESPACE"," ",122],["T_DOUBLE_ARROW","=>",122],["T_WHITESPACE"," ",122],["T_INT_CAST","(int)",122],["T_WHITESPACE"," ",122],["T_VARIABLE","$request",122],["T_OBJECT_OPERATOR","->",122],["T_STRING","getDestRegionId",122],"(",")",",",["T_WHITESPACE","\n            ",122],["T_CONSTANT_ENCAPSED_STRING","':postcode'",123],["T_WHITESPACE"," ",123],["T_DOUBLE_ARROW","=>",123],["T_WHITESPACE"," ",123],["T_VARIABLE","$request",123],["T_OBJECT_OPERATOR","->",123],["T_STRING","getDestPostcode",123],"(",")",["T_WHITESPACE","\n        ",123],")",";",["T_WHITESPACE","\n        ",124],["T_VARIABLE","$select",125],["T_WHITESPACE"," ",125],"=",["T_WHITESPACE"," ",125],["T_VARIABLE","$adapter",125],["T_OBJECT_OPERATOR","->",125],["T_STRING","select",125],"(",")",["T_WHITESPACE","\n            ",125],["T_OBJECT_OPERATOR","->",126],["T_STRING","from",126],"(",["T_VARIABLE","$this",126],["T_OBJECT_OPERATOR","->",126],["T_STRING","getMainTable",126],"(",")",")",["T_WHITESPACE","\n            ",126],["T_OBJECT_OPERATOR","->",127],["T_STRING","where",127],"(",["T_CONSTANT_ENCAPSED_STRING","'website_id = :website_id'",127],")",["T_WHITESPACE","\n            ",127],["T_OBJECT_OPERATOR","->",128],["T_STRING","order",128],"(",["T_ARRAY","array",128],"(",["T_CONSTANT_ENCAPSED_STRING","'dest_country_id DESC'",128],",",["T_WHITESPACE"," ",128],["T_CONSTANT_ENCAPSED_STRING","'dest_region_id DESC'",128],",",["T_WHITESPACE"," ",128],["T_CONSTANT_ENCAPSED_STRING","'dest_zip DESC'",128],",",["T_WHITESPACE"," ",128],["T_CONSTANT_ENCAPSED_STRING","'condition_value DESC'",128],")",")",["T_WHITESPACE","\n            ",128],["T_OBJECT_OPERATOR","->",129],["T_STRING","limit",129],"(",["T_LNUMBER","1",129],")",";",["T_WHITESPACE","\n\n        ",129],["T_COMMENT","\/\/ Render destination condition\n",131],["T_WHITESPACE","        ",132],["T_VARIABLE","$orWhere",132],["T_WHITESPACE"," ",132],"=",["T_WHITESPACE"," ",132],["T_CONSTANT_ENCAPSED_STRING","'('",132],["T_WHITESPACE"," ",132],".",["T_WHITESPACE"," ",132],["T_STRING","implode",132],"(",["T_CONSTANT_ENCAPSED_STRING","') OR ('",132],",",["T_WHITESPACE"," ",132],["T_ARRAY","array",132],"(",["T_WHITESPACE","\n            ",132],["T_CONSTANT_ENCAPSED_STRING","\"dest_country_id = :country_id AND dest_region_id = :region_id AND dest_zip = :postcode\"",133],",",["T_WHITESPACE","\n            ",133],["T_CONSTANT_ENCAPSED_STRING","\"dest_country_id = :country_id AND dest_region_id = :region_id AND dest_zip = ''\"",134],",",["T_WHITESPACE","\n\n            ",134],["T_COMMENT","\/\/ Handle asterix in dest_zip field\n",136],["T_WHITESPACE","            ",137],["T_CONSTANT_ENCAPSED_STRING","\"dest_country_id = :country_id AND dest_region_id = :region_id AND dest_zip = '*'\"",137],",",["T_WHITESPACE","\n            ",137],["T_CONSTANT_ENCAPSED_STRING","\"dest_country_id = :country_id AND dest_region_id = 0 AND dest_zip = '*'\"",138],",",["T_WHITESPACE","\n            ",138],["T_CONSTANT_ENCAPSED_STRING","\"dest_country_id = '0' AND dest_region_id = :region_id AND dest_zip = '*'\"",139],",",["T_WHITESPACE","\n            ",139],["T_CONSTANT_ENCAPSED_STRING","\"dest_country_id = '0' AND dest_region_id = 0 AND dest_zip = '*'\"",140],",",["T_WHITESPACE","\n\n            ",140],["T_CONSTANT_ENCAPSED_STRING","\"dest_country_id = :country_id AND dest_region_id = 0 AND dest_zip = ''\"",142],",",["T_WHITESPACE","\n            ",142],["T_CONSTANT_ENCAPSED_STRING","\"dest_country_id = :country_id AND dest_region_id = 0 AND dest_zip = :postcode\"",143],",",["T_WHITESPACE","\n            ",143],["T_CONSTANT_ENCAPSED_STRING","\"dest_country_id = :country_id AND dest_region_id = 0 AND dest_zip = '*'\"",144],",",["T_WHITESPACE","\n        ",144],")",")",["T_WHITESPACE"," ",145],".",["T_WHITESPACE"," ",145],["T_CONSTANT_ENCAPSED_STRING","')'",145],";",["T_WHITESPACE","\n        ",145],["T_VARIABLE","$select",146],["T_OBJECT_OPERATOR","->",146],["T_STRING","where",146],"(",["T_VARIABLE","$orWhere",146],")",";",["T_WHITESPACE","\n\n        ",146],["T_COMMENT","\/\/ Render condition by condition name\n",148],["T_WHITESPACE","        ",149],["T_IF","if",149],["T_WHITESPACE"," ",149],"(",["T_STRING","is_array",149],"(",["T_VARIABLE","$request",149],["T_OBJECT_OPERATOR","->",149],["T_STRING","getConditionName",149],"(",")",")",")",["T_WHITESPACE"," ",149],"{",["T_WHITESPACE","\n            ",149],["T_VARIABLE","$orWhere",150],["T_WHITESPACE"," ",150],"=",["T_WHITESPACE"," ",150],["T_ARRAY","array",150],"(",")",";",["T_WHITESPACE","\n            ",150],["T_VARIABLE","$i",151],["T_WHITESPACE"," ",151],"=",["T_WHITESPACE"," ",151],["T_LNUMBER","0",151],";",["T_WHITESPACE","\n            ",151],["T_FOREACH","foreach",152],["T_WHITESPACE"," ",152],"(",["T_VARIABLE","$request",152],["T_OBJECT_OPERATOR","->",152],["T_STRING","getConditionName",152],"(",")",["T_WHITESPACE"," ",152],["T_AS","as",152],["T_WHITESPACE"," ",152],["T_VARIABLE","$conditionName",152],")",["T_WHITESPACE"," ",152],"{",["T_WHITESPACE","\n                ",152],["T_VARIABLE","$bindNameKey",153],["T_WHITESPACE","  ",153],"=",["T_WHITESPACE"," ",153],["T_STRING","sprintf",153],"(",["T_CONSTANT_ENCAPSED_STRING","':condition_name_%d'",153],",",["T_WHITESPACE"," ",153],["T_VARIABLE","$i",153],")",";",["T_WHITESPACE","\n                ",153],["T_VARIABLE","$bindValueKey",154],["T_WHITESPACE"," ",154],"=",["T_WHITESPACE"," ",154],["T_STRING","sprintf",154],"(",["T_CONSTANT_ENCAPSED_STRING","':condition_value_%d'",154],",",["T_WHITESPACE"," ",154],["T_VARIABLE","$i",154],")",";",["T_WHITESPACE","\n                ",154],["T_VARIABLE","$orWhere",155],"[","]",["T_WHITESPACE"," ",155],"=",["T_WHITESPACE"," ",155],"\"",["T_ENCAPSED_AND_WHITESPACE","(condition_name = ",155],["T_CURLY_OPEN","{",155],["T_VARIABLE","$bindNameKey",155],"}",["T_ENCAPSED_AND_WHITESPACE"," AND condition_value <= ",155],["T_CURLY_OPEN","{",155],["T_VARIABLE","$bindValueKey",155],"}",["T_ENCAPSED_AND_WHITESPACE",")",155],"\"",";",["T_WHITESPACE","\n                ",155],["T_VARIABLE","$bind",156],"[",["T_VARIABLE","$bindNameKey",156],"]",["T_WHITESPACE"," ",156],"=",["T_WHITESPACE"," ",156],["T_VARIABLE","$conditionName",156],";",["T_WHITESPACE","\n                ",156],["T_VARIABLE","$bind",157],"[",["T_VARIABLE","$bindValueKey",157],"]",["T_WHITESPACE"," ",157],"=",["T_WHITESPACE"," ",157],["T_VARIABLE","$request",157],["T_OBJECT_OPERATOR","->",157],["T_STRING","getData",157],"(",["T_VARIABLE","$conditionName",157],")",";",["T_WHITESPACE","\n                ",157],["T_VARIABLE","$i",158],["T_INC","++",158],";",["T_WHITESPACE","\n            ",158],"}",["T_WHITESPACE","\n\n            ",159],["T_IF","if",161],["T_WHITESPACE"," ",161],"(",["T_VARIABLE","$orWhere",161],")",["T_WHITESPACE"," ",161],"{",["T_WHITESPACE","\n                ",161],["T_VARIABLE","$select",162],["T_OBJECT_OPERATOR","->",162],["T_STRING","where",162],"(",["T_STRING","implode",162],"(",["T_CONSTANT_ENCAPSED_STRING","' OR '",162],",",["T_WHITESPACE"," ",162],["T_VARIABLE","$orWhere",162],")",")",";",["T_WHITESPACE","\n            ",162],"}",["T_WHITESPACE","\n        ",163],"}",["T_WHITESPACE"," ",164],["T_ELSE","else",164],["T_WHITESPACE"," ",164],"{",["T_WHITESPACE","\n            ",164],["T_VARIABLE","$bind",165],"[",["T_CONSTANT_ENCAPSED_STRING","':condition_name'",165],"]",["T_WHITESPACE","  ",165],"=",["T_WHITESPACE"," ",165],["T_VARIABLE","$request",165],["T_OBJECT_OPERATOR","->",165],["T_STRING","getConditionName",165],"(",")",";",["T_WHITESPACE","\n            ",165],["T_VARIABLE","$bind",166],"[",["T_CONSTANT_ENCAPSED_STRING","':condition_value'",166],"]",["T_WHITESPACE"," ",166],"=",["T_WHITESPACE"," ",166],["T_VARIABLE","$request",166],["T_OBJECT_OPERATOR","->",166],["T_STRING","getData",166],"(",["T_VARIABLE","$request",166],["T_OBJECT_OPERATOR","->",166],["T_STRING","getConditionName",166],"(",")",")",";",["T_WHITESPACE","\n\n            ",166],["T_VARIABLE","$select",168],["T_OBJECT_OPERATOR","->",168],["T_STRING","where",168],"(",["T_CONSTANT_ENCAPSED_STRING","'condition_name = :condition_name'",168],")",";",["T_WHITESPACE","\n            ",168],["T_VARIABLE","$select",169],["T_OBJECT_OPERATOR","->",169],["T_STRING","where",169],"(",["T_CONSTANT_ENCAPSED_STRING","'condition_value <= :condition_value'",169],")",";",["T_WHITESPACE","\n        ",169],"}",["T_WHITESPACE","\n\n        ",170],["T_VARIABLE","$result",172],["T_WHITESPACE"," ",172],"=",["T_WHITESPACE"," ",172],["T_VARIABLE","$adapter",172],["T_OBJECT_OPERATOR","->",172],["T_STRING","fetchRow",172],"(",["T_VARIABLE","$select",172],",",["T_WHITESPACE"," ",172],["T_VARIABLE","$bind",172],")",";",["T_WHITESPACE","\n        ",172],["T_COMMENT","\/\/ Normalize destination zip code\n",173],["T_WHITESPACE","        ",174],["T_IF","if",174],["T_WHITESPACE"," ",174],"(",["T_VARIABLE","$result",174],["T_WHITESPACE"," ",174],["T_BOOLEAN_AND","&&",174],["T_WHITESPACE"," ",174],["T_VARIABLE","$result",174],"[",["T_CONSTANT_ENCAPSED_STRING","'dest_zip'",174],"]",["T_WHITESPACE"," ",174],["T_IS_EQUAL","==",174],["T_WHITESPACE"," ",174],["T_CONSTANT_ENCAPSED_STRING","'*'",174],")",["T_WHITESPACE"," ",174],"{",["T_WHITESPACE","\n            ",174],["T_VARIABLE","$result",175],"[",["T_CONSTANT_ENCAPSED_STRING","'dest_zip'",175],"]",["T_WHITESPACE"," ",175],"=",["T_WHITESPACE"," ",175],["T_CONSTANT_ENCAPSED_STRING","''",175],";",["T_WHITESPACE","\n        ",175],"}",["T_WHITESPACE","\n        ",176],["T_RETURN","return",177],["T_WHITESPACE"," ",177],["T_VARIABLE","$result",177],";",["T_WHITESPACE","\n    ",177],"}",["T_WHITESPACE","\n\n    ",178],["T_DOC_COMMENT","\/**\n     * Upload table rate file and import data from it\n     *\n     * @param Varien_Object $object\n     * @throws Mage_Core_Exception\n     * @return Mage_Shipping_Model_Resource_Carrier_Tablerate\n     *\/",180],["T_WHITESPACE","\n    ",186],["T_PUBLIC","public",187],["T_WHITESPACE"," ",187],["T_FUNCTION","function",187],["T_WHITESPACE"," ",187],["T_STRING","uploadAndImport",187],"(",["T_STRING","Varien_Object",187],["T_WHITESPACE"," ",187],["T_VARIABLE","$object",187],")",["T_WHITESPACE","\n    ",187],"{",["T_WHITESPACE","\n        ",188],["T_IF","if",189],["T_WHITESPACE"," ",189],"(",["T_EMPTY","empty",189],"(",["T_VARIABLE","$_FILES",189],"[",["T_CONSTANT_ENCAPSED_STRING","'groups'",189],"]","[",["T_CONSTANT_ENCAPSED_STRING","'tmp_name'",189],"]","[",["T_CONSTANT_ENCAPSED_STRING","'tablerate'",189],"]","[",["T_CONSTANT_ENCAPSED_STRING","'fields'",189],"]","[",["T_CONSTANT_ENCAPSED_STRING","'import'",189],"]","[",["T_CONSTANT_ENCAPSED_STRING","'value'",189],"]",")",")",["T_WHITESPACE"," ",189],"{",["T_WHITESPACE","\n            ",189],["T_RETURN","return",190],["T_WHITESPACE"," ",190],["T_VARIABLE","$this",190],";",["T_WHITESPACE","\n        ",190],"}",["T_WHITESPACE","\n\n        ",191],["T_VARIABLE","$csvFile",193],["T_WHITESPACE"," ",193],"=",["T_WHITESPACE"," ",193],["T_VARIABLE","$_FILES",193],"[",["T_CONSTANT_ENCAPSED_STRING","'groups'",193],"]","[",["T_CONSTANT_ENCAPSED_STRING","'tmp_name'",193],"]","[",["T_CONSTANT_ENCAPSED_STRING","'tablerate'",193],"]","[",["T_CONSTANT_ENCAPSED_STRING","'fields'",193],"]","[",["T_CONSTANT_ENCAPSED_STRING","'import'",193],"]","[",["T_CONSTANT_ENCAPSED_STRING","'value'",193],"]",";",["T_WHITESPACE","\n        ",193],["T_VARIABLE","$website",194],["T_WHITESPACE"," ",194],"=",["T_WHITESPACE"," ",194],["T_STRING","Mage",194],["T_DOUBLE_COLON","::",194],["T_STRING","app",194],"(",")",["T_OBJECT_OPERATOR","->",194],["T_STRING","getWebsite",194],"(",["T_VARIABLE","$object",194],["T_OBJECT_OPERATOR","->",194],["T_STRING","getScopeId",194],"(",")",")",";",["T_WHITESPACE","\n\n        ",194],["T_VARIABLE","$this",196],["T_OBJECT_OPERATOR","->",196],["T_STRING","_importWebsiteId",196],["T_WHITESPACE","     ",196],"=",["T_WHITESPACE"," ",196],["T_INT_CAST","(int)",196],["T_VARIABLE","$website",196],["T_OBJECT_OPERATOR","->",196],["T_STRING","getId",196],"(",")",";",["T_WHITESPACE","\n        ",196],["T_VARIABLE","$this",197],["T_OBJECT_OPERATOR","->",197],["T_STRING","_importUniqueHash",197],["T_WHITESPACE","    ",197],"=",["T_WHITESPACE"," ",197],["T_ARRAY","array",197],"(",")",";",["T_WHITESPACE","\n        ",197],["T_VARIABLE","$this",198],["T_OBJECT_OPERATOR","->",198],["T_STRING","_importErrors",198],["T_WHITESPACE","        ",198],"=",["T_WHITESPACE"," ",198],["T_ARRAY","array",198],"(",")",";",["T_WHITESPACE","\n        ",198],["T_VARIABLE","$this",199],["T_OBJECT_OPERATOR","->",199],["T_STRING","_importedRows",199],["T_WHITESPACE","        ",199],"=",["T_WHITESPACE"," ",199],["T_LNUMBER","0",199],";",["T_WHITESPACE","\n\n        ",199],["T_VARIABLE","$io",201],["T_WHITESPACE","     ",201],"=",["T_WHITESPACE"," ",201],["T_NEW","new",201],["T_WHITESPACE"," ",201],["T_STRING","Varien_Io_File",201],"(",")",";",["T_WHITESPACE","\n        ",201],["T_VARIABLE","$info",202],["T_WHITESPACE","   ",202],"=",["T_WHITESPACE"," ",202],["T_STRING","pathinfo",202],"(",["T_VARIABLE","$csvFile",202],")",";",["T_WHITESPACE","\n        ",202],["T_VARIABLE","$io",203],["T_OBJECT_OPERATOR","->",203],["T_STRING","open",203],"(",["T_ARRAY","array",203],"(",["T_CONSTANT_ENCAPSED_STRING","'path'",203],["T_WHITESPACE"," ",203],["T_DOUBLE_ARROW","=>",203],["T_WHITESPACE"," ",203],["T_VARIABLE","$info",203],"[",["T_CONSTANT_ENCAPSED_STRING","'dirname'",203],"]",")",")",";",["T_WHITESPACE","\n        ",203],["T_VARIABLE","$io",204],["T_OBJECT_OPERATOR","->",204],["T_STRING","streamOpen",204],"(",["T_VARIABLE","$info",204],"[",["T_CONSTANT_ENCAPSED_STRING","'basename'",204],"]",",",["T_WHITESPACE"," ",204],["T_CONSTANT_ENCAPSED_STRING","'r'",204],")",";",["T_WHITESPACE","\n\n        ",204],["T_COMMENT","\/\/ check and skip headers\n",206],["T_WHITESPACE","        ",207],["T_VARIABLE","$headers",207],["T_WHITESPACE"," ",207],"=",["T_WHITESPACE"," ",207],["T_VARIABLE","$io",207],["T_OBJECT_OPERATOR","->",207],["T_STRING","streamReadCsv",207],"(",")",";",["T_WHITESPACE","\n        ",207],["T_IF","if",208],["T_WHITESPACE"," ",208],"(",["T_VARIABLE","$headers",208],["T_WHITESPACE"," ",208],["T_IS_IDENTICAL","===",208],["T_WHITESPACE"," ",208],["T_STRING","false",208],["T_WHITESPACE"," ",208],["T_BOOLEAN_OR","||",208],["T_WHITESPACE"," ",208],["T_STRING","count",208],"(",["T_VARIABLE","$headers",208],")",["T_WHITESPACE"," ",208],"<",["T_WHITESPACE"," ",208],["T_LNUMBER","5",208],")",["T_WHITESPACE"," ",208],"{",["T_WHITESPACE","\n            ",208],["T_VARIABLE","$io",209],["T_OBJECT_OPERATOR","->",209],["T_STRING","streamClose",209],"(",")",";",["T_WHITESPACE","\n            ",209],["T_STRING","Mage",210],["T_DOUBLE_COLON","::",210],["T_STRING","throwException",210],"(",["T_STRING","Mage",210],["T_DOUBLE_COLON","::",210],["T_STRING","helper",210],"(",["T_CONSTANT_ENCAPSED_STRING","'shipping'",210],")",["T_OBJECT_OPERATOR","->",210],["T_STRING","__",210],"(",["T_CONSTANT_ENCAPSED_STRING","'Invalid Table Rates File Format'",210],")",")",";",["T_WHITESPACE","\n        ",210],"}",["T_WHITESPACE","\n\n        ",211],["T_IF","if",213],["T_WHITESPACE"," ",213],"(",["T_VARIABLE","$object",213],["T_OBJECT_OPERATOR","->",213],["T_STRING","getData",213],"(",["T_CONSTANT_ENCAPSED_STRING","'groups\/tablerate\/fields\/condition_name\/inherit'",213],")",["T_WHITESPACE"," ",213],["T_IS_EQUAL","==",213],["T_WHITESPACE"," ",213],["T_CONSTANT_ENCAPSED_STRING","'1'",213],")",["T_WHITESPACE"," ",213],"{",["T_WHITESPACE","\n            ",213],["T_VARIABLE","$conditionName",214],["T_WHITESPACE"," ",214],"=",["T_WHITESPACE"," ",214],["T_STRING_CAST","(string)",214],["T_STRING","Mage",214],["T_DOUBLE_COLON","::",214],["T_STRING","getConfig",214],"(",")",["T_OBJECT_OPERATOR","->",214],["T_STRING","getNode",214],"(",["T_CONSTANT_ENCAPSED_STRING","'default\/carriers\/tablerate\/condition_name'",214],")",";",["T_WHITESPACE","\n        ",214],"}",["T_WHITESPACE"," ",215],["T_ELSE","else",215],["T_WHITESPACE"," ",215],"{",["T_WHITESPACE","\n            ",215],["T_VARIABLE","$conditionName",216],["T_WHITESPACE"," ",216],"=",["T_WHITESPACE"," ",216],["T_VARIABLE","$object",216],["T_OBJECT_OPERATOR","->",216],["T_STRING","getData",216],"(",["T_CONSTANT_ENCAPSED_STRING","'groups\/tablerate\/fields\/condition_name\/value'",216],")",";",["T_WHITESPACE","\n        ",216],"}",["T_WHITESPACE","\n        ",217],["T_VARIABLE","$this",218],["T_OBJECT_OPERATOR","->",218],["T_STRING","_importConditionName",218],["T_WHITESPACE"," ",218],"=",["T_WHITESPACE"," ",218],["T_VARIABLE","$conditionName",218],";",["T_WHITESPACE","\n\n        ",218],["T_VARIABLE","$adapter",220],["T_WHITESPACE"," ",220],"=",["T_WHITESPACE"," ",220],["T_VARIABLE","$this",220],["T_OBJECT_OPERATOR","->",220],["T_STRING","_getWriteAdapter",220],"(",")",";",["T_WHITESPACE","\n        ",220],["T_VARIABLE","$adapter",221],["T_OBJECT_OPERATOR","->",221],["T_STRING","beginTransaction",221],"(",")",";",["T_WHITESPACE","\n\n        ",221],["T_TRY","try",223],["T_WHITESPACE"," ",223],"{",["T_WHITESPACE","\n            ",223],["T_VARIABLE","$rowNumber",224],["T_WHITESPACE","  ",224],"=",["T_WHITESPACE"," ",224],["T_LNUMBER","1",224],";",["T_WHITESPACE","\n            ",224],["T_VARIABLE","$importData",225],["T_WHITESPACE"," ",225],"=",["T_WHITESPACE"," ",225],["T_ARRAY","array",225],"(",")",";",["T_WHITESPACE","\n\n            ",225],["T_VARIABLE","$this",227],["T_OBJECT_OPERATOR","->",227],["T_STRING","_loadDirectoryCountries",227],"(",")",";",["T_WHITESPACE","\n            ",227],["T_VARIABLE","$this",228],["T_OBJECT_OPERATOR","->",228],["T_STRING","_loadDirectoryRegions",228],"(",")",";",["T_WHITESPACE","\n\n            ",228],["T_COMMENT","\/\/ delete old data by website and condition name\n",230],["T_WHITESPACE","            ",231],["T_VARIABLE","$condition",231],["T_WHITESPACE"," ",231],"=",["T_WHITESPACE"," ",231],["T_ARRAY","array",231],"(",["T_WHITESPACE","\n                ",231],["T_CONSTANT_ENCAPSED_STRING","'website_id = ?'",232],["T_WHITESPACE","     ",232],["T_DOUBLE_ARROW","=>",232],["T_WHITESPACE"," ",232],["T_VARIABLE","$this",232],["T_OBJECT_OPERATOR","->",232],["T_STRING","_importWebsiteId",232],",",["T_WHITESPACE","\n                ",232],["T_CONSTANT_ENCAPSED_STRING","'condition_name = ?'",233],["T_WHITESPACE"," ",233],["T_DOUBLE_ARROW","=>",233],["T_WHITESPACE"," ",233],["T_VARIABLE","$this",233],["T_OBJECT_OPERATOR","->",233],["T_STRING","_importConditionName",233],["T_WHITESPACE","\n            ",233],")",";",["T_WHITESPACE","\n            ",234],["T_VARIABLE","$adapter",235],["T_OBJECT_OPERATOR","->",235],["T_STRING","delete",235],"(",["T_VARIABLE","$this",235],["T_OBJECT_OPERATOR","->",235],["T_STRING","getMainTable",235],"(",")",",",["T_WHITESPACE"," ",235],["T_VARIABLE","$condition",235],")",";",["T_WHITESPACE","\n\n            ",235],["T_WHILE","while",237],["T_WHITESPACE"," ",237],"(",["T_STRING","false",237],["T_WHITESPACE"," ",237],["T_IS_NOT_IDENTICAL","!==",237],["T_WHITESPACE"," ",237],"(",["T_VARIABLE","$csvLine",237],["T_WHITESPACE"," ",237],"=",["T_WHITESPACE"," ",237],["T_VARIABLE","$io",237],["T_OBJECT_OPERATOR","->",237],["T_STRING","streamReadCsv",237],"(",")",")",")",["T_WHITESPACE"," ",237],"{",["T_WHITESPACE","\n                ",237],["T_VARIABLE","$rowNumber",238],["T_WHITESPACE"," ",238],["T_INC","++",238],";",["T_WHITESPACE","\n\n                ",238],["T_IF","if",240],["T_WHITESPACE"," ",240],"(",["T_EMPTY","empty",240],"(",["T_VARIABLE","$csvLine",240],")",")",["T_WHITESPACE"," ",240],"{",["T_WHITESPACE","\n                    ",240],["T_CONTINUE","continue",241],";",["T_WHITESPACE","\n                ",241],"}",["T_WHITESPACE","\n\n                ",242],["T_VARIABLE","$row",244],["T_WHITESPACE"," ",244],"=",["T_WHITESPACE"," ",244],["T_VARIABLE","$this",244],["T_OBJECT_OPERATOR","->",244],["T_STRING","_getImportRow",244],"(",["T_VARIABLE","$csvLine",244],",",["T_WHITESPACE"," ",244],["T_VARIABLE","$rowNumber",244],")",";",["T_WHITESPACE","\n                ",244],["T_IF","if",245],["T_WHITESPACE"," ",245],"(",["T_VARIABLE","$row",245],["T_WHITESPACE"," ",245],["T_IS_NOT_IDENTICAL","!==",245],["T_WHITESPACE"," ",245],["T_STRING","false",245],")",["T_WHITESPACE"," ",245],"{",["T_WHITESPACE","\n                    ",245],["T_VARIABLE","$importData",246],"[","]",["T_WHITESPACE"," ",246],"=",["T_WHITESPACE"," ",246],["T_VARIABLE","$row",246],";",["T_WHITESPACE","\n                ",246],"}",["T_WHITESPACE","\n\n                ",247],["T_IF","if",249],["T_WHITESPACE"," ",249],"(",["T_STRING","count",249],"(",["T_VARIABLE","$importData",249],")",["T_WHITESPACE"," ",249],["T_IS_EQUAL","==",249],["T_WHITESPACE"," ",249],["T_LNUMBER","5000",249],")",["T_WHITESPACE"," ",249],"{",["T_WHITESPACE","\n                    ",249],["T_VARIABLE","$this",250],["T_OBJECT_OPERATOR","->",250],["T_STRING","_saveImportData",250],"(",["T_VARIABLE","$importData",250],")",";",["T_WHITESPACE","\n                    ",250],["T_VARIABLE","$importData",251],["T_WHITESPACE"," ",251],"=",["T_WHITESPACE"," ",251],["T_ARRAY","array",251],"(",")",";",["T_WHITESPACE","\n                ",251],"}",["T_WHITESPACE","\n            ",252],"}",["T_WHITESPACE","\n            ",253],["T_VARIABLE","$this",254],["T_OBJECT_OPERATOR","->",254],["T_STRING","_saveImportData",254],"(",["T_VARIABLE","$importData",254],")",";",["T_WHITESPACE","\n            ",254],["T_VARIABLE","$io",255],["T_OBJECT_OPERATOR","->",255],["T_STRING","streamClose",255],"(",")",";",["T_WHITESPACE","\n        ",255],"}",["T_WHITESPACE"," ",256],["T_CATCH","catch",256],["T_WHITESPACE"," ",256],"(",["T_STRING","Mage_Core_Exception",256],["T_WHITESPACE"," ",256],["T_VARIABLE","$e",256],")",["T_WHITESPACE"," ",256],"{",["T_WHITESPACE","\n            ",256],["T_VARIABLE","$adapter",257],["T_OBJECT_OPERATOR","->",257],["T_STRING","rollback",257],"(",")",";",["T_WHITESPACE","\n            ",257],["T_VARIABLE","$io",258],["T_OBJECT_OPERATOR","->",258],["T_STRING","streamClose",258],"(",")",";",["T_WHITESPACE","\n            ",258],["T_STRING","Mage",259],["T_DOUBLE_COLON","::",259],["T_STRING","throwException",259],"(",["T_VARIABLE","$e",259],["T_OBJECT_OPERATOR","->",259],["T_STRING","getMessage",259],"(",")",")",";",["T_WHITESPACE","\n        ",259],"}",["T_WHITESPACE"," ",260],["T_CATCH","catch",260],["T_WHITESPACE"," ",260],"(",["T_STRING","Exception",260],["T_WHITESPACE"," ",260],["T_VARIABLE","$e",260],")",["T_WHITESPACE"," ",260],"{",["T_WHITESPACE","\n            ",260],["T_VARIABLE","$adapter",261],["T_OBJECT_OPERATOR","->",261],["T_STRING","rollback",261],"(",")",";",["T_WHITESPACE","\n            ",261],["T_VARIABLE","$io",262],["T_OBJECT_OPERATOR","->",262],["T_STRING","streamClose",262],"(",")",";",["T_WHITESPACE","\n            ",262],["T_STRING","Mage",263],["T_DOUBLE_COLON","::",263],["T_STRING","logException",263],"(",["T_VARIABLE","$e",263],")",";",["T_WHITESPACE","\n            ",263],["T_STRING","Mage",264],["T_DOUBLE_COLON","::",264],["T_STRING","throwException",264],"(",["T_STRING","Mage",264],["T_DOUBLE_COLON","::",264],["T_STRING","helper",264],"(",["T_CONSTANT_ENCAPSED_STRING","'shipping'",264],")",["T_OBJECT_OPERATOR","->",264],["T_STRING","__",264],"(",["T_CONSTANT_ENCAPSED_STRING","'An error occurred while import table rates.'",264],")",")",";",["T_WHITESPACE","\n        ",264],"}",["T_WHITESPACE","\n\n        ",265],["T_VARIABLE","$adapter",267],["T_OBJECT_OPERATOR","->",267],["T_STRING","commit",267],"(",")",";",["T_WHITESPACE","\n\n        ",267],["T_IF","if",269],["T_WHITESPACE"," ",269],"(",["T_VARIABLE","$this",269],["T_OBJECT_OPERATOR","->",269],["T_STRING","_importErrors",269],")",["T_WHITESPACE"," ",269],"{",["T_WHITESPACE","\n            ",269],["T_VARIABLE","$error",270],["T_WHITESPACE"," ",270],"=",["T_WHITESPACE"," ",270],["T_STRING","Mage",270],["T_DOUBLE_COLON","::",270],["T_STRING","helper",270],"(",["T_CONSTANT_ENCAPSED_STRING","'shipping'",270],")",["T_OBJECT_OPERATOR","->",270],["T_STRING","__",270],"(",["T_CONSTANT_ENCAPSED_STRING","'File has not been imported. See the following list of errors: %s'",270],",",["T_WHITESPACE"," ",270],["T_STRING","implode",270],"(",["T_CONSTANT_ENCAPSED_STRING","\" \\n\"",270],",",["T_WHITESPACE"," ",270],["T_VARIABLE","$this",270],["T_OBJECT_OPERATOR","->",270],["T_STRING","_importErrors",270],")",")",";",["T_WHITESPACE","\n            ",270],["T_STRING","Mage",271],["T_DOUBLE_COLON","::",271],["T_STRING","throwException",271],"(",["T_VARIABLE","$error",271],")",";",["T_WHITESPACE","\n        ",271],"}",["T_WHITESPACE","\n\n        ",272],["T_RETURN","return",274],["T_WHITESPACE"," ",274],["T_VARIABLE","$this",274],";",["T_WHITESPACE","\n    ",274],"}",["T_WHITESPACE","\n\n    ",275],["T_DOC_COMMENT","\/**\n     * Load directory countries\n     *\n     * @return Mage_Shipping_Model_Resource_Carrier_Tablerate\n     *\/",277],["T_WHITESPACE","\n    ",281],["T_PROTECTED","protected",282],["T_WHITESPACE"," ",282],["T_FUNCTION","function",282],["T_WHITESPACE"," ",282],["T_STRING","_loadDirectoryCountries",282],"(",")",["T_WHITESPACE","\n    ",282],"{",["T_WHITESPACE","\n        ",283],["T_IF","if",284],["T_WHITESPACE"," ",284],"(","!",["T_STRING","is_null",284],"(",["T_VARIABLE","$this",284],["T_OBJECT_OPERATOR","->",284],["T_STRING","_importIso2Countries",284],")",["T_WHITESPACE"," ",284],["T_BOOLEAN_AND","&&",284],["T_WHITESPACE"," ",284],"!",["T_STRING","is_null",284],"(",["T_VARIABLE","$this",284],["T_OBJECT_OPERATOR","->",284],["T_STRING","_importIso3Countries",284],")",")",["T_WHITESPACE"," ",284],"{",["T_WHITESPACE","\n            ",284],["T_RETURN","return",285],["T_WHITESPACE"," ",285],["T_VARIABLE","$this",285],";",["T_WHITESPACE","\n        ",285],"}",["T_WHITESPACE","\n\n        ",286],["T_VARIABLE","$this",288],["T_OBJECT_OPERATOR","->",288],["T_STRING","_importIso2Countries",288],["T_WHITESPACE"," ",288],"=",["T_WHITESPACE"," ",288],["T_ARRAY","array",288],"(",")",";",["T_WHITESPACE","\n        ",288],["T_VARIABLE","$this",289],["T_OBJECT_OPERATOR","->",289],["T_STRING","_importIso3Countries",289],["T_WHITESPACE"," ",289],"=",["T_WHITESPACE"," ",289],["T_ARRAY","array",289],"(",")",";",["T_WHITESPACE","\n\n        ",289],["T_DOC_COMMENT","\/** @var $collection Mage_Directory_Model_Resource_Country_Collection *\/",291],["T_WHITESPACE","\n        ",291],["T_VARIABLE","$collection",292],["T_WHITESPACE"," ",292],"=",["T_WHITESPACE"," ",292],["T_STRING","Mage",292],["T_DOUBLE_COLON","::",292],["T_STRING","getResourceModel",292],"(",["T_CONSTANT_ENCAPSED_STRING","'directory\/country_collection'",292],")",";",["T_WHITESPACE","\n        ",292],["T_FOREACH","foreach",293],["T_WHITESPACE"," ",293],"(",["T_VARIABLE","$collection",293],["T_OBJECT_OPERATOR","->",293],["T_STRING","getData",293],"(",")",["T_WHITESPACE"," ",293],["T_AS","as",293],["T_WHITESPACE"," ",293],["T_VARIABLE","$row",293],")",["T_WHITESPACE"," ",293],"{",["T_WHITESPACE","\n            ",293],["T_VARIABLE","$this",294],["T_OBJECT_OPERATOR","->",294],["T_STRING","_importIso2Countries",294],"[",["T_VARIABLE","$row",294],"[",["T_CONSTANT_ENCAPSED_STRING","'iso2_code'",294],"]","]",["T_WHITESPACE"," ",294],"=",["T_WHITESPACE"," ",294],["T_VARIABLE","$row",294],"[",["T_CONSTANT_ENCAPSED_STRING","'country_id'",294],"]",";",["T_WHITESPACE","\n            ",294],["T_VARIABLE","$this",295],["T_OBJECT_OPERATOR","->",295],["T_STRING","_importIso3Countries",295],"[",["T_VARIABLE","$row",295],"[",["T_CONSTANT_ENCAPSED_STRING","'iso3_code'",295],"]","]",["T_WHITESPACE"," ",295],"=",["T_WHITESPACE"," ",295],["T_VARIABLE","$row",295],"[",["T_CONSTANT_ENCAPSED_STRING","'country_id'",295],"]",";",["T_WHITESPACE","\n        ",295],"}",["T_WHITESPACE","\n\n        ",296],["T_RETURN","return",298],["T_WHITESPACE"," ",298],["T_VARIABLE","$this",298],";",["T_WHITESPACE","\n    ",298],"}",["T_WHITESPACE","\n\n    ",299],["T_DOC_COMMENT","\/**\n     * Load directory regions\n     *\n     * @return Mage_Shipping_Model_Resource_Carrier_Tablerate\n     *\/",301],["T_WHITESPACE","\n    ",305],["T_PROTECTED","protected",306],["T_WHITESPACE"," ",306],["T_FUNCTION","function",306],["T_WHITESPACE"," ",306],["T_STRING","_loadDirectoryRegions",306],"(",")",["T_WHITESPACE","\n    ",306],"{",["T_WHITESPACE","\n        ",307],["T_IF","if",308],["T_WHITESPACE"," ",308],"(","!",["T_STRING","is_null",308],"(",["T_VARIABLE","$this",308],["T_OBJECT_OPERATOR","->",308],["T_STRING","_importRegions",308],")",")",["T_WHITESPACE"," ",308],"{",["T_WHITESPACE","\n            ",308],["T_RETURN","return",309],["T_WHITESPACE"," ",309],["T_VARIABLE","$this",309],";",["T_WHITESPACE","\n        ",309],"}",["T_WHITESPACE","\n\n        ",310],["T_VARIABLE","$this",312],["T_OBJECT_OPERATOR","->",312],["T_STRING","_importRegions",312],["T_WHITESPACE"," ",312],"=",["T_WHITESPACE"," ",312],["T_ARRAY","array",312],"(",")",";",["T_WHITESPACE","\n\n        ",312],["T_DOC_COMMENT","\/** @var $collection Mage_Directory_Model_Resource_Region_Collection *\/",314],["T_WHITESPACE","\n        ",314],["T_VARIABLE","$collection",315],["T_WHITESPACE"," ",315],"=",["T_WHITESPACE"," ",315],["T_STRING","Mage",315],["T_DOUBLE_COLON","::",315],["T_STRING","getResourceModel",315],"(",["T_CONSTANT_ENCAPSED_STRING","'directory\/region_collection'",315],")",";",["T_WHITESPACE","\n        ",315],["T_FOREACH","foreach",316],["T_WHITESPACE"," ",316],"(",["T_VARIABLE","$collection",316],["T_OBJECT_OPERATOR","->",316],["T_STRING","getData",316],"(",")",["T_WHITESPACE"," ",316],["T_AS","as",316],["T_WHITESPACE"," ",316],["T_VARIABLE","$row",316],")",["T_WHITESPACE"," ",316],"{",["T_WHITESPACE","\n            ",316],["T_VARIABLE","$this",317],["T_OBJECT_OPERATOR","->",317],["T_STRING","_importRegions",317],"[",["T_VARIABLE","$row",317],"[",["T_CONSTANT_ENCAPSED_STRING","'country_id'",317],"]","]","[",["T_VARIABLE","$row",317],"[",["T_CONSTANT_ENCAPSED_STRING","'code'",317],"]","]",["T_WHITESPACE"," ",317],"=",["T_WHITESPACE"," ",317],["T_INT_CAST","(int)",317],["T_VARIABLE","$row",317],"[",["T_CONSTANT_ENCAPSED_STRING","'region_id'",317],"]",";",["T_WHITESPACE","\n        ",317],"}",["T_WHITESPACE","\n\n        ",318],["T_RETURN","return",320],["T_WHITESPACE"," ",320],["T_VARIABLE","$this",320],";",["T_WHITESPACE","\n    ",320],"}",["T_WHITESPACE","\n\n    ",321],["T_DOC_COMMENT","\/**\n     * Return import condition full name by condition name code\n     *\n     * @param string $conditionName\n     * @return string\n     *\/",323],["T_WHITESPACE","\n    ",328],["T_PROTECTED","protected",329],["T_WHITESPACE"," ",329],["T_FUNCTION","function",329],["T_WHITESPACE"," ",329],["T_STRING","_getConditionFullName",329],"(",["T_VARIABLE","$conditionName",329],")",["T_WHITESPACE","\n    ",329],"{",["T_WHITESPACE","\n        ",330],["T_IF","if",331],["T_WHITESPACE"," ",331],"(","!",["T_ISSET","isset",331],"(",["T_VARIABLE","$this",331],["T_OBJECT_OPERATOR","->",331],["T_STRING","_conditionFullNames",331],"[",["T_VARIABLE","$conditionName",331],"]",")",")",["T_WHITESPACE"," ",331],"{",["T_WHITESPACE","\n            ",331],["T_VARIABLE","$name",332],["T_WHITESPACE"," ",332],"=",["T_WHITESPACE"," ",332],["T_STRING","Mage",332],["T_DOUBLE_COLON","::",332],["T_STRING","getSingleton",332],"(",["T_CONSTANT_ENCAPSED_STRING","'shipping\/carrier_tablerate'",332],")",["T_OBJECT_OPERATOR","->",332],["T_STRING","getCode",332],"(",["T_CONSTANT_ENCAPSED_STRING","'condition_name_short'",332],",",["T_WHITESPACE"," ",332],["T_VARIABLE","$conditionName",332],")",";",["T_WHITESPACE","\n            ",332],["T_VARIABLE","$this",333],["T_OBJECT_OPERATOR","->",333],["T_STRING","_conditionFullNames",333],"[",["T_VARIABLE","$conditionName",333],"]",["T_WHITESPACE"," ",333],"=",["T_WHITESPACE"," ",333],["T_VARIABLE","$name",333],";",["T_WHITESPACE","\n        ",333],"}",["T_WHITESPACE","\n\n        ",334],["T_RETURN","return",336],["T_WHITESPACE"," ",336],["T_VARIABLE","$this",336],["T_OBJECT_OPERATOR","->",336],["T_STRING","_conditionFullNames",336],"[",["T_VARIABLE","$conditionName",336],"]",";",["T_WHITESPACE","\n    ",336],"}",["T_WHITESPACE","\n\n    ",337],["T_DOC_COMMENT","\/**\n     * Validate row for import and return table rate array or false\n     * Error will be add to _importErrors array\n     *\n     * @param array $row\n     * @param int $rowNumber\n     * @return array|false\n     *\/",339],["T_WHITESPACE","\n    ",346],["T_PROTECTED","protected",347],["T_WHITESPACE"," ",347],["T_FUNCTION","function",347],["T_WHITESPACE"," ",347],["T_STRING","_getImportRow",347],"(",["T_VARIABLE","$row",347],",",["T_WHITESPACE"," ",347],["T_VARIABLE","$rowNumber",347],["T_WHITESPACE"," ",347],"=",["T_WHITESPACE"," ",347],["T_LNUMBER","0",347],")",["T_WHITESPACE","\n    ",347],"{",["T_WHITESPACE","\n        ",348],["T_COMMENT","\/\/ validate row\n",349],["T_WHITESPACE","        ",350],["T_IF","if",350],["T_WHITESPACE"," ",350],"(",["T_STRING","count",350],"(",["T_VARIABLE","$row",350],")",["T_WHITESPACE"," ",350],"<",["T_WHITESPACE"," ",350],["T_LNUMBER","5",350],")",["T_WHITESPACE"," ",350],"{",["T_WHITESPACE","\n            ",350],["T_VARIABLE","$this",351],["T_OBJECT_OPERATOR","->",351],["T_STRING","_importErrors",351],"[","]",["T_WHITESPACE"," ",351],"=",["T_WHITESPACE"," ",351],["T_STRING","Mage",351],["T_DOUBLE_COLON","::",351],["T_STRING","helper",351],"(",["T_CONSTANT_ENCAPSED_STRING","'shipping'",351],")",["T_OBJECT_OPERATOR","->",351],["T_STRING","__",351],"(",["T_CONSTANT_ENCAPSED_STRING","'Invalid Table Rates format in the Row #%s'",351],",",["T_WHITESPACE"," ",351],["T_VARIABLE","$rowNumber",351],")",";",["T_WHITESPACE","\n            ",351],["T_RETURN","return",352],["T_WHITESPACE"," ",352],["T_STRING","false",352],";",["T_WHITESPACE","\n        ",352],"}",["T_WHITESPACE","\n\n        ",353],["T_COMMENT","\/\/ strip whitespace from the beginning and end of each row\n",355],["T_WHITESPACE","        ",356],["T_FOREACH","foreach",356],["T_WHITESPACE"," ",356],"(",["T_VARIABLE","$row",356],["T_WHITESPACE"," ",356],["T_AS","as",356],["T_WHITESPACE"," ",356],["T_VARIABLE","$k",356],["T_WHITESPACE"," ",356],["T_DOUBLE_ARROW","=>",356],["T_WHITESPACE"," ",356],["T_VARIABLE","$v",356],")",["T_WHITESPACE"," ",356],"{",["T_WHITESPACE","\n            ",356],["T_VARIABLE","$row",357],"[",["T_VARIABLE","$k",357],"]",["T_WHITESPACE"," ",357],"=",["T_WHITESPACE"," ",357],["T_STRING","trim",357],"(",["T_VARIABLE","$v",357],")",";",["T_WHITESPACE","\n        ",357],"}",["T_WHITESPACE","\n\n        ",358],["T_COMMENT","\/\/ validate country\n",360],["T_WHITESPACE","        ",361],["T_IF","if",361],["T_WHITESPACE"," ",361],"(",["T_ISSET","isset",361],"(",["T_VARIABLE","$this",361],["T_OBJECT_OPERATOR","->",361],["T_STRING","_importIso2Countries",361],"[",["T_VARIABLE","$row",361],"[",["T_LNUMBER","0",361],"]","]",")",")",["T_WHITESPACE"," ",361],"{",["T_WHITESPACE","\n            ",361],["T_VARIABLE","$countryId",362],["T_WHITESPACE"," ",362],"=",["T_WHITESPACE"," ",362],["T_VARIABLE","$this",362],["T_OBJECT_OPERATOR","->",362],["T_STRING","_importIso2Countries",362],"[",["T_VARIABLE","$row",362],"[",["T_LNUMBER","0",362],"]","]",";",["T_WHITESPACE","\n        ",362],"}",["T_WHITESPACE"," ",363],["T_ELSEIF","elseif",363],["T_WHITESPACE"," ",363],"(",["T_ISSET","isset",363],"(",["T_VARIABLE","$this",363],["T_OBJECT_OPERATOR","->",363],["T_STRING","_importIso3Countries",363],"[",["T_VARIABLE","$row",363],"[",["T_LNUMBER","0",363],"]","]",")",")",["T_WHITESPACE"," ",363],"{",["T_WHITESPACE","\n            ",363],["T_VARIABLE","$countryId",364],["T_WHITESPACE"," ",364],"=",["T_WHITESPACE"," ",364],["T_VARIABLE","$this",364],["T_OBJECT_OPERATOR","->",364],["T_STRING","_importIso3Countries",364],"[",["T_VARIABLE","$row",364],"[",["T_LNUMBER","0",364],"]","]",";",["T_WHITESPACE","\n        ",364],"}",["T_WHITESPACE"," ",365],["T_ELSEIF","elseif",365],["T_WHITESPACE"," ",365],"(",["T_VARIABLE","$row",365],"[",["T_LNUMBER","0",365],"]",["T_WHITESPACE"," ",365],["T_IS_EQUAL","==",365],["T_WHITESPACE"," ",365],["T_CONSTANT_ENCAPSED_STRING","'*'",365],["T_WHITESPACE"," ",365],["T_BOOLEAN_OR","||",365],["T_WHITESPACE"," ",365],["T_VARIABLE","$row",365],"[",["T_LNUMBER","0",365],"]",["T_WHITESPACE"," ",365],["T_IS_EQUAL","==",365],["T_WHITESPACE"," ",365],["T_CONSTANT_ENCAPSED_STRING","''",365],")",["T_WHITESPACE"," ",365],"{",["T_WHITESPACE","\n            ",365],["T_VARIABLE","$countryId",366],["T_WHITESPACE"," ",366],"=",["T_WHITESPACE"," ",366],["T_CONSTANT_ENCAPSED_STRING","'0'",366],";",["T_WHITESPACE","\n        ",366],"}",["T_WHITESPACE"," ",367],["T_ELSE","else",367],["T_WHITESPACE"," ",367],"{",["T_WHITESPACE","\n            ",367],["T_VARIABLE","$this",368],["T_OBJECT_OPERATOR","->",368],["T_STRING","_importErrors",368],"[","]",["T_WHITESPACE"," ",368],"=",["T_WHITESPACE"," ",368],["T_STRING","Mage",368],["T_DOUBLE_COLON","::",368],["T_STRING","helper",368],"(",["T_CONSTANT_ENCAPSED_STRING","'shipping'",368],")",["T_OBJECT_OPERATOR","->",368],["T_STRING","__",368],"(",["T_CONSTANT_ENCAPSED_STRING","'Invalid Country \"%s\" in the Row #%s.'",368],",",["T_WHITESPACE"," ",368],["T_VARIABLE","$row",368],"[",["T_LNUMBER","0",368],"]",",",["T_WHITESPACE"," ",368],["T_VARIABLE","$rowNumber",368],")",";",["T_WHITESPACE","\n            ",368],["T_RETURN","return",369],["T_WHITESPACE"," ",369],["T_STRING","false",369],";",["T_WHITESPACE","\n        ",369],"}",["T_WHITESPACE","\n\n        ",370],["T_COMMENT","\/\/ validate region\n",372],["T_WHITESPACE","        ",373],["T_IF","if",373],["T_WHITESPACE"," ",373],"(",["T_VARIABLE","$countryId",373],["T_WHITESPACE"," ",373],["T_IS_NOT_EQUAL","!=",373],["T_WHITESPACE"," ",373],["T_CONSTANT_ENCAPSED_STRING","'0'",373],["T_WHITESPACE"," ",373],["T_BOOLEAN_AND","&&",373],["T_WHITESPACE"," ",373],["T_ISSET","isset",373],"(",["T_VARIABLE","$this",373],["T_OBJECT_OPERATOR","->",373],["T_STRING","_importRegions",373],"[",["T_VARIABLE","$countryId",373],"]","[",["T_VARIABLE","$row",373],"[",["T_LNUMBER","1",373],"]","]",")",")",["T_WHITESPACE"," ",373],"{",["T_WHITESPACE","\n            ",373],["T_VARIABLE","$regionId",374],["T_WHITESPACE"," ",374],"=",["T_WHITESPACE"," ",374],["T_VARIABLE","$this",374],["T_OBJECT_OPERATOR","->",374],["T_STRING","_importRegions",374],"[",["T_VARIABLE","$countryId",374],"]","[",["T_VARIABLE","$row",374],"[",["T_LNUMBER","1",374],"]","]",";",["T_WHITESPACE","\n        ",374],"}",["T_WHITESPACE"," ",375],["T_ELSEIF","elseif",375],["T_WHITESPACE"," ",375],"(",["T_VARIABLE","$row",375],"[",["T_LNUMBER","1",375],"]",["T_WHITESPACE"," ",375],["T_IS_EQUAL","==",375],["T_WHITESPACE"," ",375],["T_CONSTANT_ENCAPSED_STRING","'*'",375],["T_WHITESPACE"," ",375],["T_BOOLEAN_OR","||",375],["T_WHITESPACE"," ",375],["T_VARIABLE","$row",375],"[",["T_LNUMBER","1",375],"]",["T_WHITESPACE"," ",375],["T_IS_EQUAL","==",375],["T_WHITESPACE"," ",375],["T_CONSTANT_ENCAPSED_STRING","''",375],")",["T_WHITESPACE"," ",375],"{",["T_WHITESPACE","\n            ",375],["T_VARIABLE","$regionId",376],["T_WHITESPACE"," ",376],"=",["T_WHITESPACE"," ",376],["T_LNUMBER","0",376],";",["T_WHITESPACE","\n        ",376],"}",["T_WHITESPACE"," ",377],["T_ELSE","else",377],["T_WHITESPACE"," ",377],"{",["T_WHITESPACE","\n            ",377],["T_VARIABLE","$this",378],["T_OBJECT_OPERATOR","->",378],["T_STRING","_importErrors",378],"[","]",["T_WHITESPACE"," ",378],"=",["T_WHITESPACE"," ",378],["T_STRING","Mage",378],["T_DOUBLE_COLON","::",378],["T_STRING","helper",378],"(",["T_CONSTANT_ENCAPSED_STRING","'shipping'",378],")",["T_OBJECT_OPERATOR","->",378],["T_STRING","__",378],"(",["T_CONSTANT_ENCAPSED_STRING","'Invalid Region\/State \"%s\" in the Row #%s.'",378],",",["T_WHITESPACE"," ",378],["T_VARIABLE","$row",378],"[",["T_LNUMBER","1",378],"]",",",["T_WHITESPACE"," ",378],["T_VARIABLE","$rowNumber",378],")",";",["T_WHITESPACE","\n            ",378],["T_RETURN","return",379],["T_WHITESPACE"," ",379],["T_STRING","false",379],";",["T_WHITESPACE","\n        ",379],"}",["T_WHITESPACE","\n\n        ",380],["T_COMMENT","\/\/ detect zip code\n",382],["T_WHITESPACE","        ",383],["T_IF","if",383],["T_WHITESPACE"," ",383],"(",["T_VARIABLE","$row",383],"[",["T_LNUMBER","2",383],"]",["T_WHITESPACE"," ",383],["T_IS_EQUAL","==",383],["T_WHITESPACE"," ",383],["T_CONSTANT_ENCAPSED_STRING","'*'",383],["T_WHITESPACE"," ",383],["T_BOOLEAN_OR","||",383],["T_WHITESPACE"," ",383],["T_VARIABLE","$row",383],"[",["T_LNUMBER","2",383],"]",["T_WHITESPACE"," ",383],["T_IS_EQUAL","==",383],["T_WHITESPACE"," ",383],["T_CONSTANT_ENCAPSED_STRING","''",383],")",["T_WHITESPACE"," ",383],"{",["T_WHITESPACE","\n            ",383],["T_VARIABLE","$zipCode",384],["T_WHITESPACE"," ",384],"=",["T_WHITESPACE"," ",384],["T_CONSTANT_ENCAPSED_STRING","'*'",384],";",["T_WHITESPACE","\n        ",384],"}",["T_WHITESPACE"," ",385],["T_ELSE","else",385],["T_WHITESPACE"," ",385],"{",["T_WHITESPACE","\n            ",385],["T_VARIABLE","$zipCode",386],["T_WHITESPACE"," ",386],"=",["T_WHITESPACE"," ",386],["T_VARIABLE","$row",386],"[",["T_LNUMBER","2",386],"]",";",["T_WHITESPACE","\n        ",386],"}",["T_WHITESPACE","\n\n        ",387],["T_COMMENT","\/\/ validate condition value\n",389],["T_WHITESPACE","        ",390],["T_VARIABLE","$value",390],["T_WHITESPACE"," ",390],"=",["T_WHITESPACE"," ",390],["T_VARIABLE","$this",390],["T_OBJECT_OPERATOR","->",390],["T_STRING","_parseDecimalValue",390],"(",["T_VARIABLE","$row",390],"[",["T_LNUMBER","3",390],"]",")",";",["T_WHITESPACE","\n        ",390],["T_IF","if",391],["T_WHITESPACE"," ",391],"(",["T_VARIABLE","$value",391],["T_WHITESPACE"," ",391],["T_IS_IDENTICAL","===",391],["T_WHITESPACE"," ",391],["T_STRING","false",391],")",["T_WHITESPACE"," ",391],"{",["T_WHITESPACE","\n            ",391],["T_VARIABLE","$this",392],["T_OBJECT_OPERATOR","->",392],["T_STRING","_importErrors",392],"[","]",["T_WHITESPACE"," ",392],"=",["T_WHITESPACE"," ",392],["T_STRING","Mage",392],["T_DOUBLE_COLON","::",392],["T_STRING","helper",392],"(",["T_CONSTANT_ENCAPSED_STRING","'shipping'",392],")",["T_OBJECT_OPERATOR","->",392],["T_STRING","__",392],"(",["T_CONSTANT_ENCAPSED_STRING","'Invalid %s \"%s\" in the Row #%s.'",392],",",["T_WHITESPACE"," ",392],["T_VARIABLE","$this",392],["T_OBJECT_OPERATOR","->",392],["T_STRING","_getConditionFullName",392],"(",["T_VARIABLE","$this",392],["T_OBJECT_OPERATOR","->",392],["T_STRING","_importConditionName",392],")",",",["T_WHITESPACE"," ",392],["T_VARIABLE","$row",392],"[",["T_LNUMBER","3",392],"]",",",["T_WHITESPACE"," ",392],["T_VARIABLE","$rowNumber",392],")",";",["T_WHITESPACE","\n            ",392],["T_RETURN","return",393],["T_WHITESPACE"," ",393],["T_STRING","false",393],";",["T_WHITESPACE","\n        ",393],"}",["T_WHITESPACE","\n\n        ",394],["T_COMMENT","\/\/ validate price\n",396],["T_WHITESPACE","        ",397],["T_VARIABLE","$price",397],["T_WHITESPACE"," ",397],"=",["T_WHITESPACE"," ",397],["T_VARIABLE","$this",397],["T_OBJECT_OPERATOR","->",397],["T_STRING","_parseDecimalValue",397],"(",["T_VARIABLE","$row",397],"[",["T_LNUMBER","4",397],"]",")",";",["T_WHITESPACE","\n        ",397],["T_IF","if",398],["T_WHITESPACE"," ",398],"(",["T_VARIABLE","$price",398],["T_WHITESPACE"," ",398],["T_IS_IDENTICAL","===",398],["T_WHITESPACE"," ",398],["T_STRING","false",398],")",["T_WHITESPACE"," ",398],"{",["T_WHITESPACE","\n            ",398],["T_VARIABLE","$this",399],["T_OBJECT_OPERATOR","->",399],["T_STRING","_importErrors",399],"[","]",["T_WHITESPACE"," ",399],"=",["T_WHITESPACE"," ",399],["T_STRING","Mage",399],["T_DOUBLE_COLON","::",399],["T_STRING","helper",399],"(",["T_CONSTANT_ENCAPSED_STRING","'shipping'",399],")",["T_OBJECT_OPERATOR","->",399],["T_STRING","__",399],"(",["T_CONSTANT_ENCAPSED_STRING","'Invalid Shipping Price \"%s\" in the Row #%s.'",399],",",["T_WHITESPACE"," ",399],["T_VARIABLE","$row",399],"[",["T_LNUMBER","4",399],"]",",",["T_WHITESPACE"," ",399],["T_VARIABLE","$rowNumber",399],")",";",["T_WHITESPACE","\n            ",399],["T_RETURN","return",400],["T_WHITESPACE"," ",400],["T_STRING","false",400],";",["T_WHITESPACE","\n        ",400],"}",["T_WHITESPACE","\n\n        ",401],["T_COMMENT","\/\/ protect from duplicate\n",403],["T_WHITESPACE","        ",404],["T_VARIABLE","$hash",404],["T_WHITESPACE"," ",404],"=",["T_WHITESPACE"," ",404],["T_STRING","sprintf",404],"(",["T_CONSTANT_ENCAPSED_STRING","\"%s-%d-%s-%F\"",404],",",["T_WHITESPACE"," ",404],["T_VARIABLE","$countryId",404],",",["T_WHITESPACE"," ",404],["T_VARIABLE","$regionId",404],",",["T_WHITESPACE"," ",404],["T_VARIABLE","$zipCode",404],",",["T_WHITESPACE"," ",404],["T_VARIABLE","$value",404],")",";",["T_WHITESPACE","\n        ",404],["T_IF","if",405],["T_WHITESPACE"," ",405],"(",["T_ISSET","isset",405],"(",["T_VARIABLE","$this",405],["T_OBJECT_OPERATOR","->",405],["T_STRING","_importUniqueHash",405],"[",["T_VARIABLE","$hash",405],"]",")",")",["T_WHITESPACE"," ",405],"{",["T_WHITESPACE","\n            ",405],["T_VARIABLE","$this",406],["T_OBJECT_OPERATOR","->",406],["T_STRING","_importErrors",406],"[","]",["T_WHITESPACE"," ",406],"=",["T_WHITESPACE"," ",406],["T_STRING","Mage",406],["T_DOUBLE_COLON","::",406],["T_STRING","helper",406],"(",["T_CONSTANT_ENCAPSED_STRING","'shipping'",406],")",["T_OBJECT_OPERATOR","->",406],["T_STRING","__",406],"(",["T_CONSTANT_ENCAPSED_STRING","'Duplicate Row #%s (Country \"%s\", Region\/State \"%s\", Zip \"%s\" and Value \"%s\").'",406],",",["T_WHITESPACE"," ",406],["T_VARIABLE","$rowNumber",406],",",["T_WHITESPACE"," ",406],["T_VARIABLE","$row",406],"[",["T_LNUMBER","0",406],"]",",",["T_WHITESPACE"," ",406],["T_VARIABLE","$row",406],"[",["T_LNUMBER","1",406],"]",",",["T_WHITESPACE"," ",406],["T_VARIABLE","$zipCode",406],",",["T_WHITESPACE"," ",406],["T_VARIABLE","$value",406],")",";",["T_WHITESPACE","\n            ",406],["T_RETURN","return",407],["T_WHITESPACE"," ",407],["T_STRING","false",407],";",["T_WHITESPACE","\n        ",407],"}",["T_WHITESPACE","\n        ",408],["T_VARIABLE","$this",409],["T_OBJECT_OPERATOR","->",409],["T_STRING","_importUniqueHash",409],"[",["T_VARIABLE","$hash",409],"]",["T_WHITESPACE"," ",409],"=",["T_WHITESPACE"," ",409],["T_STRING","true",409],";",["T_WHITESPACE","\n\n        ",409],["T_RETURN","return",411],["T_WHITESPACE"," ",411],["T_ARRAY","array",411],"(",["T_WHITESPACE","\n            ",411],["T_VARIABLE","$this",412],["T_OBJECT_OPERATOR","->",412],["T_STRING","_importWebsiteId",412],",",["T_WHITESPACE","    ",412],["T_COMMENT","\/\/ website_id\n",412],["T_WHITESPACE","            ",413],["T_VARIABLE","$countryId",413],",",["T_WHITESPACE","                 ",413],["T_COMMENT","\/\/ dest_country_id\n",413],["T_WHITESPACE","            ",414],["T_VARIABLE","$regionId",414],",",["T_WHITESPACE","                  ",414],["T_COMMENT","\/\/ dest_region_id,\n",414],["T_WHITESPACE","            ",415],["T_VARIABLE","$zipCode",415],",",["T_WHITESPACE","                   ",415],["T_COMMENT","\/\/ dest_zip\n",415],["T_WHITESPACE","            ",416],["T_VARIABLE","$this",416],["T_OBJECT_OPERATOR","->",416],["T_STRING","_importConditionName",416],",",["T_COMMENT","\/\/ condition_name,\n",416],["T_WHITESPACE","            ",417],["T_VARIABLE","$value",417],",",["T_WHITESPACE","                     ",417],["T_COMMENT","\/\/ condition_value\n",417],["T_WHITESPACE","            ",418],["T_VARIABLE","$price",418],["T_WHITESPACE","                      ",418],["T_COMMENT","\/\/ price\n",418],["T_WHITESPACE","        ",419],")",";",["T_WHITESPACE","\n    ",419],"}",["T_WHITESPACE","\n\n    ",420],["T_DOC_COMMENT","\/**\n     * Save import data batch\n     *\n     * @param array $data\n     * @return Mage_Shipping_Model_Resource_Carrier_Tablerate\n     *\/",422],["T_WHITESPACE","\n    ",427],["T_PROTECTED","protected",428],["T_WHITESPACE"," ",428],["T_FUNCTION","function",428],["T_WHITESPACE"," ",428],["T_STRING","_saveImportData",428],"(",["T_ARRAY","array",428],["T_WHITESPACE"," ",428],["T_VARIABLE","$data",428],")",["T_WHITESPACE","\n    ",428],"{",["T_WHITESPACE","\n        ",429],["T_IF","if",430],["T_WHITESPACE"," ",430],"(","!",["T_EMPTY","empty",430],"(",["T_VARIABLE","$data",430],")",")",["T_WHITESPACE"," ",430],"{",["T_WHITESPACE","\n            ",430],["T_VARIABLE","$columns",431],["T_WHITESPACE"," ",431],"=",["T_WHITESPACE"," ",431],["T_ARRAY","array",431],"(",["T_CONSTANT_ENCAPSED_STRING","'website_id'",431],",",["T_WHITESPACE"," ",431],["T_CONSTANT_ENCAPSED_STRING","'dest_country_id'",431],",",["T_WHITESPACE"," ",431],["T_CONSTANT_ENCAPSED_STRING","'dest_region_id'",431],",",["T_WHITESPACE"," ",431],["T_CONSTANT_ENCAPSED_STRING","'dest_zip'",431],",",["T_WHITESPACE","\n                ",431],["T_CONSTANT_ENCAPSED_STRING","'condition_name'",432],",",["T_WHITESPACE"," ",432],["T_CONSTANT_ENCAPSED_STRING","'condition_value'",432],",",["T_WHITESPACE"," ",432],["T_CONSTANT_ENCAPSED_STRING","'price'",432],")",";",["T_WHITESPACE","\n            ",432],["T_VARIABLE","$this",433],["T_OBJECT_OPERATOR","->",433],["T_STRING","_getWriteAdapter",433],"(",")",["T_OBJECT_OPERATOR","->",433],["T_STRING","insertArray",433],"(",["T_VARIABLE","$this",433],["T_OBJECT_OPERATOR","->",433],["T_STRING","getMainTable",433],"(",")",",",["T_WHITESPACE"," ",433],["T_VARIABLE","$columns",433],",",["T_WHITESPACE"," ",433],["T_VARIABLE","$data",433],")",";",["T_WHITESPACE","\n            ",433],["T_VARIABLE","$this",434],["T_OBJECT_OPERATOR","->",434],["T_STRING","_importedRows",434],["T_WHITESPACE"," ",434],["T_PLUS_EQUAL","+=",434],["T_WHITESPACE"," ",434],["T_STRING","count",434],"(",["T_VARIABLE","$data",434],")",";",["T_WHITESPACE","\n        ",434],"}",["T_WHITESPACE","\n\n        ",435],["T_RETURN","return",437],["T_WHITESPACE"," ",437],["T_VARIABLE","$this",437],";",["T_WHITESPACE","\n    ",437],"}",["T_WHITESPACE","\n\n    ",438],["T_DOC_COMMENT","\/**\n     * Parse and validate positive decimal value\n     * Return false if value is not decimal or is not positive\n     *\n     * @param string $value\n     * @return bool|float\n     *\/",440],["T_WHITESPACE","\n    ",446],["T_PROTECTED","protected",447],["T_WHITESPACE"," ",447],["T_FUNCTION","function",447],["T_WHITESPACE"," ",447],["T_STRING","_parseDecimalValue",447],"(",["T_VARIABLE","$value",447],")",["T_WHITESPACE","\n    ",447],"{",["T_WHITESPACE","\n        ",448],["T_IF","if",449],["T_WHITESPACE"," ",449],"(","!",["T_STRING","is_numeric",449],"(",["T_VARIABLE","$value",449],")",")",["T_WHITESPACE"," ",449],"{",["T_WHITESPACE","\n            ",449],["T_RETURN","return",450],["T_WHITESPACE"," ",450],["T_STRING","false",450],";",["T_WHITESPACE","\n        ",450],"}",["T_WHITESPACE","\n        ",451],["T_VARIABLE","$value",452],["T_WHITESPACE"," ",452],"=",["T_WHITESPACE"," ",452],["T_DOUBLE_CAST","(float)",452],["T_STRING","sprintf",452],"(",["T_CONSTANT_ENCAPSED_STRING","'%.4F'",452],",",["T_WHITESPACE"," ",452],["T_VARIABLE","$value",452],")",";",["T_WHITESPACE","\n        ",452],["T_IF","if",453],["T_WHITESPACE"," ",453],"(",["T_VARIABLE","$value",453],["T_WHITESPACE"," ",453],"<",["T_WHITESPACE"," ",453],["T_DNUMBER","0.0000",453],")",["T_WHITESPACE"," ",453],"{",["T_WHITESPACE","\n            ",453],["T_RETURN","return",454],["T_WHITESPACE"," ",454],["T_STRING","false",454],";",["T_WHITESPACE","\n        ",454],"}",["T_WHITESPACE","\n        ",455],["T_RETURN","return",456],["T_WHITESPACE"," ",456],["T_VARIABLE","$value",456],";",["T_WHITESPACE","\n    ",456],"}",["T_WHITESPACE","\n\n    ",457],["T_DOC_COMMENT","\/**\n     * Parse and validate positive decimal value\n     *\n     * @see self::_parseDecimalValue()\n     * @deprecated since 1.4.1.0\n     * @param string $value\n     * @return bool|float\n     *\/",459],["T_WHITESPACE","\n    ",466],["T_PROTECTED","protected",467],["T_WHITESPACE"," ",467],["T_FUNCTION","function",467],["T_WHITESPACE"," ",467],["T_STRING","_isPositiveDecimalNumber",467],"(",["T_VARIABLE","$value",467],")",["T_WHITESPACE","\n    ",467],"{",["T_WHITESPACE","\n        ",468],["T_RETURN","return",469],["T_WHITESPACE"," ",469],["T_VARIABLE","$this",469],["T_OBJECT_OPERATOR","->",469],["T_STRING","_parseDecimalValue",469],"(",["T_VARIABLE","$value",469],")",";",["T_WHITESPACE","\n    ",469],"}",["T_WHITESPACE","\n",470],"}",["T_WHITESPACE","\n",471]]
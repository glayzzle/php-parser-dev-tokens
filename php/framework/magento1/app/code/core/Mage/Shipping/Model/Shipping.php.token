[["T_OPEN_TAG","<?php\n",1],["T_DOC_COMMENT","\/**\n * Magento\n *\n * NOTICE OF LICENSE\n *\n * This source file is subject to the Open Software License (OSL 3.0)\n * that is bundled with this package in the file LICENSE.txt.\n * It is also available through the world-wide-web at this URL:\n * http:\/\/opensource.org\/licenses\/osl-3.0.php\n * If you did not receive a copy of the license and are unable to\n * obtain it through the world-wide-web, please send an email\n * to license@magento.com so we can send you a copy immediately.\n *\n * DISCLAIMER\n *\n * Do not edit or add to this file if you wish to upgrade Magento to newer\n * versions in the future. If you wish to customize Magento for your\n * needs please refer to http:\/\/www.magento.com for more information.\n *\n * @category    Mage\n * @package     Mage_Shipping\n * @copyright  Copyright (c) 2006-2016 X.commerce, Inc. and affiliates (http:\/\/www.magento.com)\n * @license    http:\/\/opensource.org\/licenses\/osl-3.0.php  Open Software License (OSL 3.0)\n *\/",2],["T_WHITESPACE","\n\n\n",25],["T_CLASS","class",28],["T_WHITESPACE"," ",28],["T_STRING","Mage_Shipping_Model_Shipping",28],["T_WHITESPACE","\n",28],"{",["T_WHITESPACE","\n    ",29],["T_DOC_COMMENT","\/**\n     * Store address\n     *\/",30],["T_WHITESPACE","\n    ",32],["T_CONST","const",33],["T_WHITESPACE"," ",33],["T_STRING","XML_PATH_STORE_ADDRESS1",33],["T_WHITESPACE","     ",33],"=",["T_WHITESPACE"," ",33],["T_CONSTANT_ENCAPSED_STRING","'shipping\/origin\/street_line1'",33],";",["T_WHITESPACE","\n    ",33],["T_CONST","const",34],["T_WHITESPACE"," ",34],["T_STRING","XML_PATH_STORE_ADDRESS2",34],["T_WHITESPACE","     ",34],"=",["T_WHITESPACE"," ",34],["T_CONSTANT_ENCAPSED_STRING","'shipping\/origin\/street_line2'",34],";",["T_WHITESPACE","\n    ",34],["T_CONST","const",35],["T_WHITESPACE"," ",35],["T_STRING","XML_PATH_STORE_CITY",35],["T_WHITESPACE","         ",35],"=",["T_WHITESPACE"," ",35],["T_CONSTANT_ENCAPSED_STRING","'shipping\/origin\/city'",35],";",["T_WHITESPACE","\n    ",35],["T_CONST","const",36],["T_WHITESPACE"," ",36],["T_STRING","XML_PATH_STORE_REGION_ID",36],["T_WHITESPACE","    ",36],"=",["T_WHITESPACE"," ",36],["T_CONSTANT_ENCAPSED_STRING","'shipping\/origin\/region_id'",36],";",["T_WHITESPACE","\n    ",36],["T_CONST","const",37],["T_WHITESPACE"," ",37],["T_STRING","XML_PATH_STORE_ZIP",37],["T_WHITESPACE","          ",37],"=",["T_WHITESPACE"," ",37],["T_CONSTANT_ENCAPSED_STRING","'shipping\/origin\/postcode'",37],";",["T_WHITESPACE","\n    ",37],["T_CONST","const",38],["T_WHITESPACE"," ",38],["T_STRING","XML_PATH_STORE_COUNTRY_ID",38],["T_WHITESPACE","   ",38],"=",["T_WHITESPACE"," ",38],["T_CONSTANT_ENCAPSED_STRING","'shipping\/origin\/country_id'",38],";",["T_WHITESPACE","\n\n    ",38],["T_DOC_COMMENT","\/**\n     * Default shipping orig for requests\n     *\n     * @var array\n     *\/",40],["T_WHITESPACE","\n    ",44],["T_PROTECTED","protected",45],["T_WHITESPACE"," ",45],["T_VARIABLE","$_orig",45],["T_WHITESPACE"," ",45],"=",["T_WHITESPACE"," ",45],["T_STRING","null",45],";",["T_WHITESPACE","\n\n    ",45],["T_DOC_COMMENT","\/**\n     * Cached result\n     *\n     * @var Mage_Sales_Model_Shipping_Method_Result\n     *\/",47],["T_WHITESPACE","\n    ",51],["T_PROTECTED","protected",52],["T_WHITESPACE"," ",52],["T_VARIABLE","$_result",52],["T_WHITESPACE"," ",52],"=",["T_WHITESPACE"," ",52],["T_STRING","null",52],";",["T_WHITESPACE","\n\n    ",52],["T_DOC_COMMENT","\/**\n     * Part of carrier xml config path\n     *\n     * @var string\n     *\/",54],["T_WHITESPACE","\n    ",58],["T_PROTECTED","protected",59],["T_WHITESPACE"," ",59],["T_VARIABLE","$_availabilityConfigField",59],["T_WHITESPACE"," ",59],"=",["T_WHITESPACE"," ",59],["T_CONSTANT_ENCAPSED_STRING","'active'",59],";",["T_WHITESPACE","\n\n    ",59],["T_DOC_COMMENT","\/**\n     * Get shipping rate result model\n     *\n     * @return Mage_Shipping_Model_Rate_Result\n     *\/",61],["T_WHITESPACE","\n    ",65],["T_PUBLIC","public",66],["T_WHITESPACE"," ",66],["T_FUNCTION","function",66],["T_WHITESPACE"," ",66],["T_STRING","getResult",66],"(",")",["T_WHITESPACE","\n    ",66],"{",["T_WHITESPACE","\n        ",67],["T_IF","if",68],["T_WHITESPACE"," ",68],"(",["T_EMPTY","empty",68],"(",["T_VARIABLE","$this",68],["T_OBJECT_OPERATOR","->",68],["T_STRING","_result",68],")",")",["T_WHITESPACE"," ",68],"{",["T_WHITESPACE","\n            ",68],["T_VARIABLE","$this",69],["T_OBJECT_OPERATOR","->",69],["T_STRING","_result",69],["T_WHITESPACE"," ",69],"=",["T_WHITESPACE"," ",69],["T_STRING","Mage",69],["T_DOUBLE_COLON","::",69],["T_STRING","getModel",69],"(",["T_CONSTANT_ENCAPSED_STRING","'shipping\/rate_result'",69],")",";",["T_WHITESPACE","\n        ",69],"}",["T_WHITESPACE","\n        ",70],["T_RETURN","return",71],["T_WHITESPACE"," ",71],["T_VARIABLE","$this",71],["T_OBJECT_OPERATOR","->",71],["T_STRING","_result",71],";",["T_WHITESPACE","\n    ",71],"}",["T_WHITESPACE","\n\n    ",72],["T_DOC_COMMENT","\/**\n     * Set shipping orig data\n     *\n     * @param array $data\n     * @return null\n     *\/",74],["T_WHITESPACE","\n    ",79],["T_PUBLIC","public",80],["T_WHITESPACE"," ",80],["T_FUNCTION","function",80],["T_WHITESPACE"," ",80],["T_STRING","setOrigData",80],"(",["T_VARIABLE","$data",80],")",["T_WHITESPACE","\n    ",80],"{",["T_WHITESPACE","\n        ",81],["T_VARIABLE","$this",82],["T_OBJECT_OPERATOR","->",82],["T_STRING","_orig",82],["T_WHITESPACE"," ",82],"=",["T_WHITESPACE"," ",82],["T_VARIABLE","$data",82],";",["T_WHITESPACE","\n    ",82],"}",["T_WHITESPACE","\n\n    ",83],["T_DOC_COMMENT","\/**\n     * Reset cached result\n     *\n     * @return Mage_Shipping_Model_Shipping\n     *\/",85],["T_WHITESPACE","\n    ",89],["T_PUBLIC","public",90],["T_WHITESPACE"," ",90],["T_FUNCTION","function",90],["T_WHITESPACE"," ",90],["T_STRING","resetResult",90],"(",")",["T_WHITESPACE","\n    ",90],"{",["T_WHITESPACE","\n        ",91],["T_VARIABLE","$this",92],["T_OBJECT_OPERATOR","->",92],["T_STRING","getResult",92],"(",")",["T_OBJECT_OPERATOR","->",92],["T_STRING","reset",92],"(",")",";",["T_WHITESPACE","\n        ",92],["T_RETURN","return",93],["T_WHITESPACE"," ",93],["T_VARIABLE","$this",93],";",["T_WHITESPACE","\n    ",93],"}",["T_WHITESPACE","\n\n    ",94],["T_DOC_COMMENT","\/**\n     * Retrieve configuration model\n     *\n     * @return Mage_Shipping_Model_Config\n     *\/",96],["T_WHITESPACE","\n    ",100],["T_PUBLIC","public",101],["T_WHITESPACE"," ",101],["T_FUNCTION","function",101],["T_WHITESPACE"," ",101],["T_STRING","getConfig",101],"(",")",["T_WHITESPACE","\n    ",101],"{",["T_WHITESPACE","\n        ",102],["T_RETURN","return",103],["T_WHITESPACE"," ",103],["T_STRING","Mage",103],["T_DOUBLE_COLON","::",103],["T_STRING","getSingleton",103],"(",["T_CONSTANT_ENCAPSED_STRING","'shipping\/config'",103],")",";",["T_WHITESPACE","\n    ",103],"}",["T_WHITESPACE","\n\n    ",104],["T_DOC_COMMENT","\/**\n     * Retrieve all methods for supplied shipping data\n     *\n     * @todo make it ordered\n     * @param Mage_Shipping_Model_Shipping_Method_Request $data\n     * @return Mage_Shipping_Model_Shipping\n     *\/",106],["T_WHITESPACE","\n    ",112],["T_PUBLIC","public",113],["T_WHITESPACE"," ",113],["T_FUNCTION","function",113],["T_WHITESPACE"," ",113],["T_STRING","collectRates",113],"(",["T_STRING","Mage_Shipping_Model_Rate_Request",113],["T_WHITESPACE"," ",113],["T_VARIABLE","$request",113],")",["T_WHITESPACE","\n    ",113],"{",["T_WHITESPACE","\n        ",114],["T_VARIABLE","$storeId",115],["T_WHITESPACE"," ",115],"=",["T_WHITESPACE"," ",115],["T_VARIABLE","$request",115],["T_OBJECT_OPERATOR","->",115],["T_STRING","getStoreId",115],"(",")",";",["T_WHITESPACE","\n        ",115],["T_IF","if",116],["T_WHITESPACE"," ",116],"(","!",["T_VARIABLE","$request",116],["T_OBJECT_OPERATOR","->",116],["T_STRING","getOrig",116],"(",")",")",["T_WHITESPACE"," ",116],"{",["T_WHITESPACE","\n            ",116],["T_VARIABLE","$request",117],["T_WHITESPACE","\n                ",117],["T_OBJECT_OPERATOR","->",118],["T_STRING","setCountryId",118],"(",["T_STRING","Mage",118],["T_DOUBLE_COLON","::",118],["T_STRING","getStoreConfig",118],"(",["T_STRING","self",118],["T_DOUBLE_COLON","::",118],["T_STRING","XML_PATH_STORE_COUNTRY_ID",118],",",["T_WHITESPACE"," ",118],["T_VARIABLE","$request",118],["T_OBJECT_OPERATOR","->",118],["T_STRING","getStore",118],"(",")",")",")",["T_WHITESPACE","\n                ",118],["T_OBJECT_OPERATOR","->",119],["T_STRING","setRegionId",119],"(",["T_STRING","Mage",119],["T_DOUBLE_COLON","::",119],["T_STRING","getStoreConfig",119],"(",["T_STRING","self",119],["T_DOUBLE_COLON","::",119],["T_STRING","XML_PATH_STORE_REGION_ID",119],",",["T_WHITESPACE"," ",119],["T_VARIABLE","$request",119],["T_OBJECT_OPERATOR","->",119],["T_STRING","getStore",119],"(",")",")",")",["T_WHITESPACE","\n                ",119],["T_OBJECT_OPERATOR","->",120],["T_STRING","setCity",120],"(",["T_STRING","Mage",120],["T_DOUBLE_COLON","::",120],["T_STRING","getStoreConfig",120],"(",["T_STRING","self",120],["T_DOUBLE_COLON","::",120],["T_STRING","XML_PATH_STORE_CITY",120],",",["T_WHITESPACE"," ",120],["T_VARIABLE","$request",120],["T_OBJECT_OPERATOR","->",120],["T_STRING","getStore",120],"(",")",")",")",["T_WHITESPACE","\n                ",120],["T_OBJECT_OPERATOR","->",121],["T_STRING","setPostcode",121],"(",["T_STRING","Mage",121],["T_DOUBLE_COLON","::",121],["T_STRING","getStoreConfig",121],"(",["T_STRING","self",121],["T_DOUBLE_COLON","::",121],["T_STRING","XML_PATH_STORE_ZIP",121],",",["T_WHITESPACE"," ",121],["T_VARIABLE","$request",121],["T_OBJECT_OPERATOR","->",121],["T_STRING","getStore",121],"(",")",")",")",";",["T_WHITESPACE","\n        ",121],"}",["T_WHITESPACE","\n\n        ",122],["T_VARIABLE","$limitCarrier",124],["T_WHITESPACE"," ",124],"=",["T_WHITESPACE"," ",124],["T_VARIABLE","$request",124],["T_OBJECT_OPERATOR","->",124],["T_STRING","getLimitCarrier",124],"(",")",";",["T_WHITESPACE","\n        ",124],["T_IF","if",125],["T_WHITESPACE"," ",125],"(","!",["T_VARIABLE","$limitCarrier",125],")",["T_WHITESPACE"," ",125],"{",["T_WHITESPACE","\n            ",125],["T_VARIABLE","$carriers",126],["T_WHITESPACE"," ",126],"=",["T_WHITESPACE"," ",126],["T_STRING","Mage",126],["T_DOUBLE_COLON","::",126],["T_STRING","getStoreConfig",126],"(",["T_CONSTANT_ENCAPSED_STRING","'carriers'",126],",",["T_WHITESPACE"," ",126],["T_VARIABLE","$storeId",126],")",";",["T_WHITESPACE","\n\n            ",126],["T_FOREACH","foreach",128],["T_WHITESPACE"," ",128],"(",["T_VARIABLE","$carriers",128],["T_WHITESPACE"," ",128],["T_AS","as",128],["T_WHITESPACE"," ",128],["T_VARIABLE","$carrierCode",128],["T_WHITESPACE"," ",128],["T_DOUBLE_ARROW","=>",128],["T_WHITESPACE"," ",128],["T_VARIABLE","$carrierConfig",128],")",["T_WHITESPACE"," ",128],"{",["T_WHITESPACE","\n                ",128],["T_VARIABLE","$this",129],["T_OBJECT_OPERATOR","->",129],["T_STRING","collectCarrierRates",129],"(",["T_VARIABLE","$carrierCode",129],",",["T_WHITESPACE"," ",129],["T_VARIABLE","$request",129],")",";",["T_WHITESPACE","\n            ",129],"}",["T_WHITESPACE","\n        ",130],"}",["T_WHITESPACE"," ",131],["T_ELSE","else",131],["T_WHITESPACE"," ",131],"{",["T_WHITESPACE","\n            ",131],["T_IF","if",132],["T_WHITESPACE"," ",132],"(","!",["T_STRING","is_array",132],"(",["T_VARIABLE","$limitCarrier",132],")",")",["T_WHITESPACE"," ",132],"{",["T_WHITESPACE","\n                ",132],["T_VARIABLE","$limitCarrier",133],["T_WHITESPACE"," ",133],"=",["T_WHITESPACE"," ",133],["T_ARRAY","array",133],"(",["T_VARIABLE","$limitCarrier",133],")",";",["T_WHITESPACE","\n            ",133],"}",["T_WHITESPACE","\n            ",134],["T_FOREACH","foreach",135],["T_WHITESPACE"," ",135],"(",["T_VARIABLE","$limitCarrier",135],["T_WHITESPACE"," ",135],["T_AS","as",135],["T_WHITESPACE"," ",135],["T_VARIABLE","$carrierCode",135],")",["T_WHITESPACE"," ",135],"{",["T_WHITESPACE","\n                ",135],["T_VARIABLE","$carrierConfig",136],["T_WHITESPACE"," ",136],"=",["T_WHITESPACE"," ",136],["T_STRING","Mage",136],["T_DOUBLE_COLON","::",136],["T_STRING","getStoreConfig",136],"(",["T_CONSTANT_ENCAPSED_STRING","'carriers\/'",136],["T_WHITESPACE"," ",136],".",["T_WHITESPACE"," ",136],["T_VARIABLE","$carrierCode",136],",",["T_WHITESPACE"," ",136],["T_VARIABLE","$storeId",136],")",";",["T_WHITESPACE","\n                ",136],["T_IF","if",137],["T_WHITESPACE"," ",137],"(","!",["T_VARIABLE","$carrierConfig",137],")",["T_WHITESPACE"," ",137],"{",["T_WHITESPACE","\n                    ",137],["T_CONTINUE","continue",138],";",["T_WHITESPACE","\n                ",138],"}",["T_WHITESPACE","\n                ",139],["T_VARIABLE","$this",140],["T_OBJECT_OPERATOR","->",140],["T_STRING","collectCarrierRates",140],"(",["T_VARIABLE","$carrierCode",140],",",["T_WHITESPACE"," ",140],["T_VARIABLE","$request",140],")",";",["T_WHITESPACE","\n            ",140],"}",["T_WHITESPACE","\n        ",141],"}",["T_WHITESPACE","\n\n        ",142],["T_RETURN","return",144],["T_WHITESPACE"," ",144],["T_VARIABLE","$this",144],";",["T_WHITESPACE","\n    ",144],"}",["T_WHITESPACE","\n\n    ",145],["T_DOC_COMMENT","\/**\n     * Collect rates of given carrier\n     *\n     * @param string                           $carrierCode\n     * @param Mage_Shipping_Model_Rate_Request $request\n     * @return Mage_Shipping_Model_Shipping\n     *\/",147],["T_WHITESPACE","\n    ",153],["T_PUBLIC","public",154],["T_WHITESPACE"," ",154],["T_FUNCTION","function",154],["T_WHITESPACE"," ",154],["T_STRING","collectCarrierRates",154],"(",["T_VARIABLE","$carrierCode",154],",",["T_WHITESPACE"," ",154],["T_VARIABLE","$request",154],")",["T_WHITESPACE","\n    ",154],"{",["T_WHITESPACE","\n        ",155],["T_COMMENT","\/* @var $carrier Mage_Shipping_Model_Carrier_Abstract *\/",156],["T_WHITESPACE","\n        ",156],["T_VARIABLE","$carrier",157],["T_WHITESPACE"," ",157],"=",["T_WHITESPACE"," ",157],["T_VARIABLE","$this",157],["T_OBJECT_OPERATOR","->",157],["T_STRING","getCarrierByCode",157],"(",["T_VARIABLE","$carrierCode",157],",",["T_WHITESPACE"," ",157],["T_VARIABLE","$request",157],["T_OBJECT_OPERATOR","->",157],["T_STRING","getStoreId",157],"(",")",")",";",["T_WHITESPACE","\n        ",157],["T_IF","if",158],["T_WHITESPACE"," ",158],"(","!",["T_VARIABLE","$carrier",158],")",["T_WHITESPACE"," ",158],"{",["T_WHITESPACE","\n            ",158],["T_RETURN","return",159],["T_WHITESPACE"," ",159],["T_VARIABLE","$this",159],";",["T_WHITESPACE","\n        ",159],"}",["T_WHITESPACE","\n        ",160],["T_VARIABLE","$carrier",161],["T_OBJECT_OPERATOR","->",161],["T_STRING","setActiveFlag",161],"(",["T_VARIABLE","$this",161],["T_OBJECT_OPERATOR","->",161],["T_STRING","_availabilityConfigField",161],")",";",["T_WHITESPACE","\n        ",161],["T_VARIABLE","$result",162],["T_WHITESPACE"," ",162],"=",["T_WHITESPACE"," ",162],["T_VARIABLE","$carrier",162],["T_OBJECT_OPERATOR","->",162],["T_STRING","checkAvailableShipCountries",162],"(",["T_VARIABLE","$request",162],")",";",["T_WHITESPACE","\n        ",162],["T_IF","if",163],["T_WHITESPACE"," ",163],"(",["T_STRING","false",163],["T_WHITESPACE"," ",163],["T_IS_NOT_IDENTICAL","!==",163],["T_WHITESPACE"," ",163],["T_VARIABLE","$result",163],["T_WHITESPACE"," ",163],["T_BOOLEAN_AND","&&",163],["T_WHITESPACE"," ",163],"!","(",["T_VARIABLE","$result",163],["T_WHITESPACE"," ",163],["T_INSTANCEOF","instanceof",163],["T_WHITESPACE"," ",163],["T_STRING","Mage_Shipping_Model_Rate_Result_Error",163],")",")",["T_WHITESPACE"," ",163],"{",["T_WHITESPACE","\n            ",163],["T_VARIABLE","$result",164],["T_WHITESPACE"," ",164],"=",["T_WHITESPACE"," ",164],["T_VARIABLE","$carrier",164],["T_OBJECT_OPERATOR","->",164],["T_STRING","proccessAdditionalValidation",164],"(",["T_VARIABLE","$request",164],")",";",["T_WHITESPACE","\n        ",164],"}",["T_WHITESPACE","\n        ",165],["T_COMMENT","\/*\n        * Result will be false if the admin set not to show the shipping module\n        * if the delivery country is not within specific countries\n        *\/",166],["T_WHITESPACE","\n        ",169],["T_IF","if",170],["T_WHITESPACE"," ",170],"(",["T_STRING","false",170],["T_WHITESPACE"," ",170],["T_IS_NOT_IDENTICAL","!==",170],["T_WHITESPACE"," ",170],["T_VARIABLE","$result",170],")","{",["T_WHITESPACE","\n            ",170],["T_IF","if",171],["T_WHITESPACE"," ",171],"(","!",["T_VARIABLE","$result",171],["T_WHITESPACE"," ",171],["T_INSTANCEOF","instanceof",171],["T_WHITESPACE"," ",171],["T_STRING","Mage_Shipping_Model_Rate_Result_Error",171],")",["T_WHITESPACE"," ",171],"{",["T_WHITESPACE","\n                ",171],["T_IF","if",172],["T_WHITESPACE"," ",172],"(",["T_VARIABLE","$carrier",172],["T_OBJECT_OPERATOR","->",172],["T_STRING","getConfigData",172],"(",["T_CONSTANT_ENCAPSED_STRING","'shipment_requesttype'",172],")",")",["T_WHITESPACE"," ",172],"{",["T_WHITESPACE","\n                    ",172],["T_VARIABLE","$packages",173],["T_WHITESPACE"," ",173],"=",["T_WHITESPACE"," ",173],["T_VARIABLE","$this",173],["T_OBJECT_OPERATOR","->",173],["T_STRING","composePackagesForCarrier",173],"(",["T_VARIABLE","$carrier",173],",",["T_WHITESPACE"," ",173],["T_VARIABLE","$request",173],")",";",["T_WHITESPACE","\n                    ",173],["T_IF","if",174],["T_WHITESPACE"," ",174],"(","!",["T_EMPTY","empty",174],"(",["T_VARIABLE","$packages",174],")",")",["T_WHITESPACE"," ",174],"{",["T_WHITESPACE","\n                        ",174],["T_VARIABLE","$sumResults",175],["T_WHITESPACE"," ",175],"=",["T_WHITESPACE"," ",175],["T_ARRAY","array",175],"(",")",";",["T_WHITESPACE","\n                        ",175],["T_FOREACH","foreach",176],["T_WHITESPACE"," ",176],"(",["T_VARIABLE","$packages",176],["T_WHITESPACE"," ",176],["T_AS","as",176],["T_WHITESPACE"," ",176],["T_VARIABLE","$weight",176],["T_WHITESPACE"," ",176],["T_DOUBLE_ARROW","=>",176],["T_WHITESPACE"," ",176],["T_VARIABLE","$packageCount",176],")",["T_WHITESPACE"," ",176],"{",["T_WHITESPACE","\n                            ",176],["T_COMMENT","\/\/clone carrier for multi-requests\n",177],["T_WHITESPACE","                            ",178],["T_VARIABLE","$carrierObj",178],["T_WHITESPACE"," ",178],"=",["T_WHITESPACE"," ",178],["T_CLONE","clone",178],["T_WHITESPACE"," ",178],["T_VARIABLE","$carrier",178],";",["T_WHITESPACE","\n                            ",178],["T_VARIABLE","$request",179],["T_OBJECT_OPERATOR","->",179],["T_STRING","setPackageWeight",179],"(",["T_VARIABLE","$weight",179],")",";",["T_WHITESPACE","\n                            ",179],["T_VARIABLE","$result",180],["T_WHITESPACE"," ",180],"=",["T_WHITESPACE"," ",180],["T_VARIABLE","$carrierObj",180],["T_OBJECT_OPERATOR","->",180],["T_STRING","collectRates",180],"(",["T_VARIABLE","$request",180],")",";",["T_WHITESPACE","\n                            ",180],["T_IF","if",181],["T_WHITESPACE"," ",181],"(","!",["T_VARIABLE","$result",181],")",["T_WHITESPACE"," ",181],"{",["T_WHITESPACE","\n                                ",181],["T_RETURN","return",182],["T_WHITESPACE"," ",182],["T_VARIABLE","$this",182],";",["T_WHITESPACE","\n                            ",182],"}",["T_WHITESPACE"," ",183],["T_ELSE","else",183],["T_WHITESPACE"," ",183],"{",["T_WHITESPACE","\n                                ",183],["T_VARIABLE","$result",184],["T_OBJECT_OPERATOR","->",184],["T_STRING","updateRatePrice",184],"(",["T_VARIABLE","$packageCount",184],")",";",["T_WHITESPACE","\n                            ",184],"}",["T_WHITESPACE","\n                            ",185],["T_VARIABLE","$sumResults",186],"[","]",["T_WHITESPACE"," ",186],"=",["T_WHITESPACE"," ",186],["T_VARIABLE","$result",186],";",["T_WHITESPACE","\n                        ",186],"}",["T_WHITESPACE","\n                        ",187],["T_IF","if",188],["T_WHITESPACE"," ",188],"(","!",["T_EMPTY","empty",188],"(",["T_VARIABLE","$sumResults",188],")",["T_WHITESPACE"," ",188],["T_BOOLEAN_AND","&&",188],["T_WHITESPACE"," ",188],["T_STRING","count",188],"(",["T_VARIABLE","$sumResults",188],")",["T_WHITESPACE"," ",188],">",["T_WHITESPACE"," ",188],["T_LNUMBER","1",188],")",["T_WHITESPACE"," ",188],"{",["T_WHITESPACE","\n                            ",188],["T_VARIABLE","$result",189],["T_WHITESPACE"," ",189],"=",["T_WHITESPACE"," ",189],["T_ARRAY","array",189],"(",")",";",["T_WHITESPACE","\n                            ",189],["T_FOREACH","foreach",190],["T_WHITESPACE"," ",190],"(",["T_VARIABLE","$sumResults",190],["T_WHITESPACE"," ",190],["T_AS","as",190],["T_WHITESPACE"," ",190],["T_VARIABLE","$res",190],")",["T_WHITESPACE"," ",190],"{",["T_WHITESPACE","\n                                ",190],["T_IF","if",191],["T_WHITESPACE"," ",191],"(",["T_EMPTY","empty",191],"(",["T_VARIABLE","$result",191],")",")",["T_WHITESPACE"," ",191],"{",["T_WHITESPACE","\n                                    ",191],["T_VARIABLE","$result",192],["T_WHITESPACE"," ",192],"=",["T_WHITESPACE"," ",192],["T_VARIABLE","$res",192],";",["T_WHITESPACE","\n                                    ",192],["T_CONTINUE","continue",193],";",["T_WHITESPACE","\n                                ",193],"}",["T_WHITESPACE","\n                                ",194],["T_FOREACH","foreach",195],["T_WHITESPACE"," ",195],"(",["T_VARIABLE","$res",195],["T_OBJECT_OPERATOR","->",195],["T_STRING","getAllRates",195],"(",")",["T_WHITESPACE"," ",195],["T_AS","as",195],["T_WHITESPACE"," ",195],["T_VARIABLE","$method",195],")",["T_WHITESPACE"," ",195],"{",["T_WHITESPACE","\n                                    ",195],["T_FOREACH","foreach",196],["T_WHITESPACE"," ",196],"(",["T_VARIABLE","$result",196],["T_OBJECT_OPERATOR","->",196],["T_STRING","getAllRates",196],"(",")",["T_WHITESPACE"," ",196],["T_AS","as",196],["T_WHITESPACE"," ",196],["T_VARIABLE","$resultMethod",196],")",["T_WHITESPACE"," ",196],"{",["T_WHITESPACE","\n                                        ",196],["T_IF","if",197],["T_WHITESPACE"," ",197],"(",["T_VARIABLE","$method",197],["T_OBJECT_OPERATOR","->",197],["T_STRING","getMethod",197],"(",")",["T_WHITESPACE"," ",197],["T_IS_EQUAL","==",197],["T_WHITESPACE"," ",197],["T_VARIABLE","$resultMethod",197],["T_OBJECT_OPERATOR","->",197],["T_STRING","getMethod",197],"(",")",")",["T_WHITESPACE"," ",197],"{",["T_WHITESPACE","\n                                            ",197],["T_VARIABLE","$resultMethod",198],["T_OBJECT_OPERATOR","->",198],["T_STRING","setPrice",198],"(",["T_VARIABLE","$method",198],["T_OBJECT_OPERATOR","->",198],["T_STRING","getPrice",198],"(",")",["T_WHITESPACE"," ",198],"+",["T_WHITESPACE"," ",198],["T_VARIABLE","$resultMethod",198],["T_OBJECT_OPERATOR","->",198],["T_STRING","getPrice",198],"(",")",")",";",["T_WHITESPACE","\n                                            ",198],["T_CONTINUE","continue",199],";",["T_WHITESPACE","\n                                        ",199],"}",["T_WHITESPACE","\n                                    ",200],"}",["T_WHITESPACE","\n                                ",201],"}",["T_WHITESPACE","\n                            ",202],"}",["T_WHITESPACE","\n                        ",203],"}",["T_WHITESPACE","\n                    ",204],"}",["T_WHITESPACE"," ",205],["T_ELSE","else",205],["T_WHITESPACE"," ",205],"{",["T_WHITESPACE","\n                        ",205],["T_VARIABLE","$result",206],["T_WHITESPACE"," ",206],"=",["T_WHITESPACE"," ",206],["T_VARIABLE","$carrier",206],["T_OBJECT_OPERATOR","->",206],["T_STRING","collectRates",206],"(",["T_VARIABLE","$request",206],")",";",["T_WHITESPACE","\n                    ",206],"}",["T_WHITESPACE","\n                ",207],"}",["T_WHITESPACE"," ",208],["T_ELSE","else",208],["T_WHITESPACE"," ",208],"{",["T_WHITESPACE","\n                    ",208],["T_VARIABLE","$result",209],["T_WHITESPACE"," ",209],"=",["T_WHITESPACE"," ",209],["T_VARIABLE","$carrier",209],["T_OBJECT_OPERATOR","->",209],["T_STRING","collectRates",209],"(",["T_VARIABLE","$request",209],")",";",["T_WHITESPACE","\n                ",209],"}",["T_WHITESPACE","\n                ",210],["T_IF","if",211],["T_WHITESPACE"," ",211],"(","!",["T_VARIABLE","$result",211],")",["T_WHITESPACE"," ",211],"{",["T_WHITESPACE","\n                    ",211],["T_RETURN","return",212],["T_WHITESPACE"," ",212],["T_VARIABLE","$this",212],";",["T_WHITESPACE","\n                ",212],"}",["T_WHITESPACE","\n            ",213],"}",["T_WHITESPACE","\n            ",214],["T_IF","if",215],["T_WHITESPACE"," ",215],"(",["T_VARIABLE","$carrier",215],["T_OBJECT_OPERATOR","->",215],["T_STRING","getConfigData",215],"(",["T_CONSTANT_ENCAPSED_STRING","'showmethod'",215],")",["T_WHITESPACE"," ",215],["T_IS_EQUAL","==",215],["T_WHITESPACE"," ",215],["T_LNUMBER","0",215],["T_WHITESPACE"," ",215],["T_BOOLEAN_AND","&&",215],["T_WHITESPACE"," ",215],["T_VARIABLE","$result",215],["T_OBJECT_OPERATOR","->",215],["T_STRING","getError",215],"(",")",")",["T_WHITESPACE"," ",215],"{",["T_WHITESPACE","\n                ",215],["T_RETURN","return",216],["T_WHITESPACE"," ",216],["T_VARIABLE","$this",216],";",["T_WHITESPACE","\n            ",216],"}",["T_WHITESPACE","\n            ",217],["T_COMMENT","\/\/ sort rates by price\n",218],["T_WHITESPACE","            ",219],["T_IF","if",219],["T_WHITESPACE"," ",219],"(",["T_STRING","method_exists",219],"(",["T_VARIABLE","$result",219],",",["T_WHITESPACE"," ",219],["T_CONSTANT_ENCAPSED_STRING","'sortRatesByPrice'",219],")",")",["T_WHITESPACE"," ",219],"{",["T_WHITESPACE","\n                ",219],["T_VARIABLE","$result",220],["T_OBJECT_OPERATOR","->",220],["T_STRING","sortRatesByPrice",220],"(",")",";",["T_WHITESPACE","\n            ",220],"}",["T_WHITESPACE","\n            ",221],["T_VARIABLE","$this",222],["T_OBJECT_OPERATOR","->",222],["T_STRING","getResult",222],"(",")",["T_OBJECT_OPERATOR","->",222],["T_STRING","append",222],"(",["T_VARIABLE","$result",222],")",";",["T_WHITESPACE","\n        ",222],"}",["T_WHITESPACE","\n        ",223],["T_RETURN","return",224],["T_WHITESPACE"," ",224],["T_VARIABLE","$this",224],";",["T_WHITESPACE","\n    ",224],"}",["T_WHITESPACE","\n\n    ",225],["T_DOC_COMMENT","\/**\n     * Compose Packages For Carrier.\n     * Devides order into items and items into parts if it's neccesary\n     *\n     * @param Mage_Shipping_Model_Carrier_Abstract $carrier\n     * @param Mage_Shipping_Model_Rate_Request $request\n     * @return array [int, float]\n     *\/",227],["T_WHITESPACE","\n    ",234],["T_PUBLIC","public",235],["T_WHITESPACE"," ",235],["T_FUNCTION","function",235],["T_WHITESPACE"," ",235],["T_STRING","composePackagesForCarrier",235],"(",["T_VARIABLE","$carrier",235],",",["T_WHITESPACE"," ",235],["T_VARIABLE","$request",235],")",["T_WHITESPACE","\n    ",235],"{",["T_WHITESPACE","\n        ",236],["T_VARIABLE","$allItems",237],["T_WHITESPACE","   ",237],"=",["T_WHITESPACE"," ",237],["T_VARIABLE","$request",237],["T_OBJECT_OPERATOR","->",237],["T_STRING","getAllItems",237],"(",")",";",["T_WHITESPACE","\n        ",237],["T_VARIABLE","$fullItems",238],["T_WHITESPACE","  ",238],"=",["T_WHITESPACE"," ",238],["T_ARRAY","array",238],"(",")",";",["T_WHITESPACE","\n\n        ",238],["T_VARIABLE","$maxWeight",240],["T_WHITESPACE","  ",240],"=",["T_WHITESPACE"," ",240],["T_DOUBLE_CAST","(float)",240],["T_WHITESPACE"," ",240],["T_VARIABLE","$carrier",240],["T_OBJECT_OPERATOR","->",240],["T_STRING","getConfigData",240],"(",["T_CONSTANT_ENCAPSED_STRING","'max_package_weight'",240],")",";",["T_WHITESPACE","\n\n        ",240],["T_FOREACH","foreach",242],["T_WHITESPACE"," ",242],"(",["T_VARIABLE","$allItems",242],["T_WHITESPACE"," ",242],["T_AS","as",242],["T_WHITESPACE"," ",242],["T_VARIABLE","$item",242],")",["T_WHITESPACE"," ",242],"{",["T_WHITESPACE","\n            ",242],["T_IF","if",243],["T_WHITESPACE"," ",243],"(",["T_VARIABLE","$item",243],["T_OBJECT_OPERATOR","->",243],["T_STRING","getProductType",243],"(",")",["T_WHITESPACE"," ",243],["T_IS_EQUAL","==",243],["T_WHITESPACE"," ",243],["T_STRING","Mage_Catalog_Model_Product_Type",243],["T_DOUBLE_COLON","::",243],["T_STRING","TYPE_BUNDLE",243],["T_WHITESPACE","\n                ",243],["T_BOOLEAN_AND","&&",244],["T_WHITESPACE"," ",244],["T_VARIABLE","$item",244],["T_OBJECT_OPERATOR","->",244],["T_STRING","getProduct",244],"(",")",["T_OBJECT_OPERATOR","->",244],["T_STRING","getShipmentType",244],"(",")",["T_WHITESPACE","\n            ",244],")",["T_WHITESPACE"," ",245],"{",["T_WHITESPACE","\n                ",245],["T_CONTINUE","continue",246],";",["T_WHITESPACE","\n            ",246],"}",["T_WHITESPACE","\n\n            ",247],["T_VARIABLE","$qty",249],["T_WHITESPACE","            ",249],"=",["T_WHITESPACE"," ",249],["T_VARIABLE","$item",249],["T_OBJECT_OPERATOR","->",249],["T_STRING","getQty",249],"(",")",";",["T_WHITESPACE","\n            ",249],["T_VARIABLE","$changeQty",250],["T_WHITESPACE","      ",250],"=",["T_WHITESPACE"," ",250],["T_STRING","true",250],";",["T_WHITESPACE","\n            ",250],["T_VARIABLE","$checkWeight",251],["T_WHITESPACE","    ",251],"=",["T_WHITESPACE"," ",251],["T_STRING","true",251],";",["T_WHITESPACE","\n            ",251],["T_VARIABLE","$decimalItems",252],["T_WHITESPACE","   ",252],"=",["T_WHITESPACE"," ",252],["T_ARRAY","array",252],"(",")",";",["T_WHITESPACE","\n\n            ",252],["T_IF","if",254],["T_WHITESPACE"," ",254],"(",["T_VARIABLE","$item",254],["T_OBJECT_OPERATOR","->",254],["T_STRING","getParentItem",254],"(",")",")",["T_WHITESPACE"," ",254],"{",["T_WHITESPACE","\n                ",254],["T_IF","if",255],["T_WHITESPACE"," ",255],"(","!",["T_VARIABLE","$item",255],["T_OBJECT_OPERATOR","->",255],["T_STRING","getParentItem",255],"(",")",["T_OBJECT_OPERATOR","->",255],["T_STRING","getProduct",255],"(",")",["T_OBJECT_OPERATOR","->",255],["T_STRING","getShipmentType",255],"(",")",")",["T_WHITESPACE"," ",255],"{",["T_WHITESPACE","\n                    ",255],["T_CONTINUE","continue",256],";",["T_WHITESPACE","\n                ",256],"}",["T_WHITESPACE","\n                ",257],["T_VARIABLE","$qty",258],["T_WHITESPACE"," ",258],"=",["T_WHITESPACE"," ",258],["T_VARIABLE","$item",258],["T_OBJECT_OPERATOR","->",258],["T_STRING","getIsQtyDecimal",258],"(",")",["T_WHITESPACE","\n                    ",258],"?",["T_WHITESPACE"," ",259],["T_VARIABLE","$item",259],["T_OBJECT_OPERATOR","->",259],["T_STRING","getParentItem",259],"(",")",["T_OBJECT_OPERATOR","->",259],["T_STRING","getQty",259],"(",")",["T_WHITESPACE","\n                    ",259],":",["T_WHITESPACE"," ",260],["T_VARIABLE","$item",260],["T_OBJECT_OPERATOR","->",260],["T_STRING","getParentItem",260],"(",")",["T_OBJECT_OPERATOR","->",260],["T_STRING","getQty",260],"(",")",["T_WHITESPACE"," ",260],"*",["T_WHITESPACE"," ",260],["T_VARIABLE","$item",260],["T_OBJECT_OPERATOR","->",260],["T_STRING","getQty",260],"(",")",";",["T_WHITESPACE","\n            ",260],"}",["T_WHITESPACE","\n\n            ",261],["T_VARIABLE","$itemWeight",263],["T_WHITESPACE"," ",263],"=",["T_WHITESPACE"," ",263],["T_VARIABLE","$item",263],["T_OBJECT_OPERATOR","->",263],["T_STRING","getWeight",263],"(",")",";",["T_WHITESPACE","\n            ",263],["T_IF","if",264],["T_WHITESPACE"," ",264],"(",["T_VARIABLE","$item",264],["T_OBJECT_OPERATOR","->",264],["T_STRING","getIsQtyDecimal",264],"(",")",["T_WHITESPACE"," ",264],["T_BOOLEAN_AND","&&",264],["T_WHITESPACE"," ",264],["T_VARIABLE","$item",264],["T_OBJECT_OPERATOR","->",264],["T_STRING","getProductType",264],"(",")",["T_WHITESPACE"," ",264],["T_IS_NOT_EQUAL","!=",264],["T_WHITESPACE"," ",264],["T_STRING","Mage_Catalog_Model_Product_Type",264],["T_DOUBLE_COLON","::",264],["T_STRING","TYPE_BUNDLE",264],")",["T_WHITESPACE"," ",264],"{",["T_WHITESPACE","\n                ",264],["T_VARIABLE","$stockItem",265],["T_WHITESPACE"," ",265],"=",["T_WHITESPACE"," ",265],["T_VARIABLE","$item",265],["T_OBJECT_OPERATOR","->",265],["T_STRING","getProduct",265],"(",")",["T_OBJECT_OPERATOR","->",265],["T_STRING","getStockItem",265],"(",")",";",["T_WHITESPACE","\n                ",265],["T_IF","if",266],["T_WHITESPACE"," ",266],"(",["T_VARIABLE","$stockItem",266],["T_OBJECT_OPERATOR","->",266],["T_STRING","getIsDecimalDivided",266],"(",")",")",["T_WHITESPACE"," ",266],"{",["T_WHITESPACE","\n                   ",266],["T_IF","if",267],["T_WHITESPACE"," ",267],"(",["T_VARIABLE","$stockItem",267],["T_OBJECT_OPERATOR","->",267],["T_STRING","getEnableQtyIncrements",267],"(",")",["T_WHITESPACE"," ",267],["T_BOOLEAN_AND","&&",267],["T_WHITESPACE"," ",267],["T_VARIABLE","$stockItem",267],["T_OBJECT_OPERATOR","->",267],["T_STRING","getQtyIncrements",267],"(",")",")",["T_WHITESPACE"," ",267],"{",["T_WHITESPACE","\n                        ",267],["T_VARIABLE","$itemWeight",268],["T_WHITESPACE"," ",268],"=",["T_WHITESPACE"," ",268],["T_VARIABLE","$itemWeight",268],["T_WHITESPACE"," ",268],"*",["T_WHITESPACE"," ",268],["T_VARIABLE","$stockItem",268],["T_OBJECT_OPERATOR","->",268],["T_STRING","getQtyIncrements",268],"(",")",";",["T_WHITESPACE","\n                        ",268],["T_VARIABLE","$qty",269],["T_WHITESPACE","        ",269],"=",["T_WHITESPACE"," ",269],["T_STRING","round",269],"(","(",["T_VARIABLE","$item",269],["T_OBJECT_OPERATOR","->",269],["T_STRING","getWeight",269],"(",")",["T_WHITESPACE"," ",269],"\/",["T_WHITESPACE"," ",269],["T_VARIABLE","$itemWeight",269],")",["T_WHITESPACE"," ",269],"*",["T_WHITESPACE"," ",269],["T_VARIABLE","$qty",269],")",";",["T_WHITESPACE","\n                        ",269],["T_VARIABLE","$changeQty",270],["T_WHITESPACE","  ",270],"=",["T_WHITESPACE"," ",270],["T_STRING","false",270],";",["T_WHITESPACE","\n                   ",270],"}",["T_WHITESPACE"," ",271],["T_ELSE","else",271],["T_WHITESPACE"," ",271],"{",["T_WHITESPACE","\n                       ",271],["T_VARIABLE","$itemWeight",272],["T_WHITESPACE"," ",272],"=",["T_WHITESPACE"," ",272],["T_VARIABLE","$itemWeight",272],["T_WHITESPACE"," ",272],"*",["T_WHITESPACE"," ",272],["T_VARIABLE","$item",272],["T_OBJECT_OPERATOR","->",272],["T_STRING","getQty",272],"(",")",";",["T_WHITESPACE","\n                       ",272],["T_IF","if",273],["T_WHITESPACE"," ",273],"(",["T_VARIABLE","$itemWeight",273],["T_WHITESPACE"," ",273],">",["T_WHITESPACE"," ",273],["T_VARIABLE","$maxWeight",273],")",["T_WHITESPACE"," ",273],"{",["T_WHITESPACE","\n                           ",273],["T_VARIABLE","$qtyItem",274],["T_WHITESPACE"," ",274],"=",["T_WHITESPACE"," ",274],["T_STRING","floor",274],"(",["T_VARIABLE","$itemWeight",274],["T_WHITESPACE"," ",274],"\/",["T_WHITESPACE"," ",274],["T_VARIABLE","$maxWeight",274],")",";",["T_WHITESPACE","\n                           ",274],["T_VARIABLE","$decimalItems",275],"[","]",["T_WHITESPACE"," ",275],"=",["T_WHITESPACE"," ",275],["T_ARRAY","array",275],"(",["T_CONSTANT_ENCAPSED_STRING","'weight'",275],["T_WHITESPACE"," ",275],["T_DOUBLE_ARROW","=>",275],["T_WHITESPACE"," ",275],["T_VARIABLE","$maxWeight",275],",",["T_WHITESPACE"," ",275],["T_CONSTANT_ENCAPSED_STRING","'qty'",275],["T_WHITESPACE"," ",275],["T_DOUBLE_ARROW","=>",275],["T_WHITESPACE"," ",275],["T_VARIABLE","$qtyItem",275],")",";",["T_WHITESPACE","\n                           ",275],["T_VARIABLE","$weightItem",276],["T_WHITESPACE"," ",276],"=",["T_WHITESPACE"," ",276],["T_STRING","Mage",276],["T_DOUBLE_COLON","::",276],["T_STRING","helper",276],"(",["T_CONSTANT_ENCAPSED_STRING","'core'",276],")",["T_OBJECT_OPERATOR","->",276],["T_STRING","getExactDivision",276],"(",["T_VARIABLE","$itemWeight",276],",",["T_WHITESPACE"," ",276],["T_VARIABLE","$maxWeight",276],")",";",["T_WHITESPACE","\n                           ",276],["T_IF","if",277],["T_WHITESPACE"," ",277],"(",["T_VARIABLE","$weightItem",277],")",["T_WHITESPACE"," ",277],"{",["T_WHITESPACE","\n                               ",277],["T_VARIABLE","$decimalItems",278],"[","]",["T_WHITESPACE"," ",278],"=",["T_WHITESPACE"," ",278],["T_ARRAY","array",278],"(",["T_CONSTANT_ENCAPSED_STRING","'weight'",278],["T_WHITESPACE"," ",278],["T_DOUBLE_ARROW","=>",278],["T_WHITESPACE"," ",278],["T_VARIABLE","$weightItem",278],",",["T_WHITESPACE"," ",278],["T_CONSTANT_ENCAPSED_STRING","'qty'",278],["T_WHITESPACE"," ",278],["T_DOUBLE_ARROW","=>",278],["T_WHITESPACE"," ",278],["T_LNUMBER","1",278],")",";",["T_WHITESPACE","\n                           ",278],"}",["T_WHITESPACE","\n                           ",279],["T_VARIABLE","$checkWeight",280],["T_WHITESPACE"," ",280],"=",["T_WHITESPACE"," ",280],["T_STRING","false",280],";",["T_WHITESPACE","\n                       ",280],"}",["T_WHITESPACE"," ",281],["T_ELSE","else",281],["T_WHITESPACE"," ",281],"{",["T_WHITESPACE","\n                           ",281],["T_VARIABLE","$itemWeight",282],["T_WHITESPACE"," ",282],"=",["T_WHITESPACE"," ",282],["T_VARIABLE","$itemWeight",282],["T_WHITESPACE"," ",282],"*",["T_WHITESPACE"," ",282],["T_VARIABLE","$item",282],["T_OBJECT_OPERATOR","->",282],["T_STRING","getQty",282],"(",")",";",["T_WHITESPACE","\n                       ",282],"}",["T_WHITESPACE","\n                   ",283],"}",["T_WHITESPACE","\n                ",284],"}",["T_WHITESPACE"," ",285],["T_ELSE","else",285],["T_WHITESPACE"," ",285],"{",["T_WHITESPACE","\n                    ",285],["T_VARIABLE","$itemWeight",286],["T_WHITESPACE"," ",286],"=",["T_WHITESPACE"," ",286],["T_VARIABLE","$itemWeight",286],["T_WHITESPACE"," ",286],"*",["T_WHITESPACE"," ",286],["T_VARIABLE","$item",286],["T_OBJECT_OPERATOR","->",286],["T_STRING","getQty",286],"(",")",";",["T_WHITESPACE","\n                ",286],"}",["T_WHITESPACE","\n            ",287],"}",["T_WHITESPACE","\n\n            ",288],["T_IF","if",290],["T_WHITESPACE"," ",290],"(",["T_VARIABLE","$checkWeight",290],["T_WHITESPACE"," ",290],["T_BOOLEAN_AND","&&",290],["T_WHITESPACE"," ",290],["T_VARIABLE","$maxWeight",290],["T_WHITESPACE"," ",290],["T_BOOLEAN_AND","&&",290],["T_WHITESPACE"," ",290],["T_VARIABLE","$itemWeight",290],["T_WHITESPACE"," ",290],">",["T_WHITESPACE"," ",290],["T_VARIABLE","$maxWeight",290],")",["T_WHITESPACE"," ",290],"{",["T_WHITESPACE","\n                ",290],["T_RETURN","return",291],["T_WHITESPACE"," ",291],["T_ARRAY","array",291],"(",")",";",["T_WHITESPACE","\n            ",291],"}",["T_WHITESPACE","\n\n            ",292],["T_IF","if",294],["T_WHITESPACE"," ",294],"(",["T_VARIABLE","$changeQty",294],["T_WHITESPACE"," ",294],["T_BOOLEAN_AND","&&",294],["T_WHITESPACE"," ",294],"!",["T_VARIABLE","$item",294],["T_OBJECT_OPERATOR","->",294],["T_STRING","getParentItem",294],"(",")",["T_WHITESPACE"," ",294],["T_BOOLEAN_AND","&&",294],["T_WHITESPACE"," ",294],["T_VARIABLE","$item",294],["T_OBJECT_OPERATOR","->",294],["T_STRING","getIsQtyDecimal",294],"(",")",["T_WHITESPACE","\n                ",294],["T_BOOLEAN_AND","&&",295],["T_WHITESPACE"," ",295],["T_VARIABLE","$item",295],["T_OBJECT_OPERATOR","->",295],["T_STRING","getProductType",295],"(",")",["T_WHITESPACE"," ",295],["T_IS_NOT_EQUAL","!=",295],["T_WHITESPACE"," ",295],["T_STRING","Mage_Catalog_Model_Product_Type",295],["T_DOUBLE_COLON","::",295],["T_STRING","TYPE_BUNDLE",295],["T_WHITESPACE","\n            ",295],")",["T_WHITESPACE"," ",296],"{",["T_WHITESPACE","\n                ",296],["T_VARIABLE","$qty",297],["T_WHITESPACE"," ",297],"=",["T_WHITESPACE"," ",297],["T_LNUMBER","1",297],";",["T_WHITESPACE","\n            ",297],"}",["T_WHITESPACE","\n\n            ",298],["T_IF","if",300],["T_WHITESPACE"," ",300],"(","!",["T_EMPTY","empty",300],"(",["T_VARIABLE","$decimalItems",300],")",")",["T_WHITESPACE"," ",300],"{",["T_WHITESPACE","\n                ",300],["T_FOREACH","foreach",301],["T_WHITESPACE"," ",301],"(",["T_VARIABLE","$decimalItems",301],["T_WHITESPACE"," ",301],["T_AS","as",301],["T_WHITESPACE"," ",301],["T_VARIABLE","$decimalItem",301],")",["T_WHITESPACE"," ",301],"{",["T_WHITESPACE","\n                    ",301],["T_VARIABLE","$fullItems",302],["T_WHITESPACE"," ",302],"=",["T_WHITESPACE"," ",302],["T_STRING","array_merge",302],"(",["T_VARIABLE","$fullItems",302],",",["T_WHITESPACE","\n                        ",302],["T_STRING","array_fill",303],"(",["T_LNUMBER","0",303],",",["T_WHITESPACE"," ",303],["T_VARIABLE","$decimalItem",303],"[",["T_CONSTANT_ENCAPSED_STRING","'qty'",303],"]",["T_WHITESPACE"," ",303],"*",["T_WHITESPACE"," ",303],["T_VARIABLE","$qty",303],",",["T_WHITESPACE"," ",303],["T_VARIABLE","$decimalItem",303],"[",["T_CONSTANT_ENCAPSED_STRING","'weight'",303],"]",")",["T_WHITESPACE","\n                    ",303],")",";",["T_WHITESPACE","\n                ",304],"}",["T_WHITESPACE","\n            ",305],"}",["T_WHITESPACE"," ",306],["T_ELSE","else",306],["T_WHITESPACE"," ",306],"{",["T_WHITESPACE","\n                ",306],["T_VARIABLE","$fullItems",307],["T_WHITESPACE"," ",307],"=",["T_WHITESPACE"," ",307],["T_STRING","array_merge",307],"(",["T_VARIABLE","$fullItems",307],",",["T_WHITESPACE"," ",307],["T_STRING","array_fill",307],"(",["T_LNUMBER","0",307],",",["T_WHITESPACE"," ",307],["T_VARIABLE","$qty",307],",",["T_WHITESPACE"," ",307],["T_VARIABLE","$itemWeight",307],")",")",";",["T_WHITESPACE","\n            ",307],"}",["T_WHITESPACE","\n        ",308],"}",["T_WHITESPACE","\n        ",309],["T_STRING","sort",310],"(",["T_VARIABLE","$fullItems",310],")",";",["T_WHITESPACE","\n\n        ",310],["T_RETURN","return",312],["T_WHITESPACE"," ",312],["T_VARIABLE","$this",312],["T_OBJECT_OPERATOR","->",312],["T_STRING","_makePieces",312],"(",["T_VARIABLE","$fullItems",312],",",["T_WHITESPACE"," ",312],["T_VARIABLE","$maxWeight",312],")",";",["T_WHITESPACE","\n    ",312],"}",["T_WHITESPACE","\n\n    ",313],["T_DOC_COMMENT","\/**\n     * Make pieces\n     * Compose packeges list based on given items, so that each package is as heavy as possible\n     *\n     * @param array $items\n     * @param float $maxWeight\n     * @return array\n     *\/",315],["T_WHITESPACE","\n    ",322],["T_PROTECTED","protected",323],["T_WHITESPACE"," ",323],["T_FUNCTION","function",323],["T_WHITESPACE"," ",323],["T_STRING","_makePieces",323],"(",["T_VARIABLE","$items",323],",",["T_WHITESPACE"," ",323],["T_VARIABLE","$maxWeight",323],")",["T_WHITESPACE","\n    ",323],"{",["T_WHITESPACE","\n        ",324],["T_VARIABLE","$pieces",325],["T_WHITESPACE"," ",325],"=",["T_WHITESPACE"," ",325],["T_ARRAY","array",325],"(",")",";",["T_WHITESPACE","\n        ",325],["T_IF","if",326],["T_WHITESPACE"," ",326],"(","!",["T_EMPTY","empty",326],"(",["T_VARIABLE","$items",326],")",")",["T_WHITESPACE"," ",326],"{",["T_WHITESPACE","\n            ",326],["T_VARIABLE","$sumWeight",327],["T_WHITESPACE"," ",327],"=",["T_WHITESPACE"," ",327],["T_LNUMBER","0",327],";",["T_WHITESPACE","\n\n            ",327],["T_VARIABLE","$reverseOrderItems",329],["T_WHITESPACE"," ",329],"=",["T_WHITESPACE"," ",329],["T_VARIABLE","$items",329],";",["T_WHITESPACE","\n            ",329],["T_STRING","arsort",330],"(",["T_VARIABLE","$reverseOrderItems",330],")",";",["T_WHITESPACE","\n\n            ",330],["T_FOREACH","foreach",332],["T_WHITESPACE"," ",332],"(",["T_VARIABLE","$reverseOrderItems",332],["T_WHITESPACE"," ",332],["T_AS","as",332],["T_WHITESPACE"," ",332],["T_VARIABLE","$key",332],["T_WHITESPACE"," ",332],["T_DOUBLE_ARROW","=>",332],["T_WHITESPACE"," ",332],["T_VARIABLE","$weight",332],")",["T_WHITESPACE"," ",332],"{",["T_WHITESPACE","\n                ",332],["T_IF","if",333],["T_WHITESPACE"," ",333],"(","!",["T_ISSET","isset",333],"(",["T_VARIABLE","$items",333],"[",["T_VARIABLE","$key",333],"]",")",")",["T_WHITESPACE"," ",333],"{",["T_WHITESPACE","\n                    ",333],["T_CONTINUE","continue",334],";",["T_WHITESPACE","\n                ",334],"}",["T_WHITESPACE","\n                ",335],["T_UNSET","unset",336],"(",["T_VARIABLE","$items",336],"[",["T_VARIABLE","$key",336],"]",")",";",["T_WHITESPACE","\n                ",336],["T_VARIABLE","$sumWeight",337],["T_WHITESPACE"," ",337],"=",["T_WHITESPACE"," ",337],["T_VARIABLE","$weight",337],";",["T_WHITESPACE","\n                ",337],["T_FOREACH","foreach",338],["T_WHITESPACE"," ",338],"(",["T_VARIABLE","$items",338],["T_WHITESPACE"," ",338],["T_AS","as",338],["T_WHITESPACE"," ",338],["T_VARIABLE","$key",338],["T_WHITESPACE"," ",338],["T_DOUBLE_ARROW","=>",338],["T_WHITESPACE"," ",338],["T_VARIABLE","$weight",338],")",["T_WHITESPACE"," ",338],"{",["T_WHITESPACE","\n                    ",338],["T_IF","if",339],["T_WHITESPACE"," ",339],"(","(",["T_VARIABLE","$sumWeight",339],["T_WHITESPACE"," ",339],"+",["T_WHITESPACE"," ",339],["T_VARIABLE","$weight",339],")",["T_WHITESPACE"," ",339],"<",["T_WHITESPACE"," ",339],["T_VARIABLE","$maxWeight",339],")",["T_WHITESPACE"," ",339],"{",["T_WHITESPACE","\n                        ",339],["T_UNSET","unset",340],"(",["T_VARIABLE","$items",340],"[",["T_VARIABLE","$key",340],"]",")",";",["T_WHITESPACE","\n                        ",340],["T_VARIABLE","$sumWeight",341],["T_WHITESPACE"," ",341],["T_PLUS_EQUAL","+=",341],["T_WHITESPACE"," ",341],["T_VARIABLE","$weight",341],";",["T_WHITESPACE","\n                    ",341],"}",["T_WHITESPACE"," ",342],["T_ELSEIF","elseif",342],["T_WHITESPACE"," ",342],"(","(",["T_VARIABLE","$sumWeight",342],["T_WHITESPACE"," ",342],"+",["T_WHITESPACE"," ",342],["T_VARIABLE","$weight",342],")",["T_WHITESPACE"," ",342],">",["T_WHITESPACE"," ",342],["T_VARIABLE","$maxWeight",342],")",["T_WHITESPACE"," ",342],"{",["T_WHITESPACE","\n                        ",342],["T_VARIABLE","$pieces",343],"[","]",["T_WHITESPACE"," ",343],"=",["T_WHITESPACE"," ",343],["T_STRING_CAST","(string)",343],["T_DOUBLE_CAST","(float)",343],["T_VARIABLE","$sumWeight",343],";",["T_WHITESPACE","\n                        ",343],["T_BREAK","break",344],";",["T_WHITESPACE","\n                    ",344],"}",["T_WHITESPACE"," ",345],["T_ELSE","else",345],["T_WHITESPACE"," ",345],"{",["T_WHITESPACE","\n                        ",345],["T_UNSET","unset",346],"(",["T_VARIABLE","$items",346],"[",["T_VARIABLE","$key",346],"]",")",";",["T_WHITESPACE","\n                        ",346],["T_VARIABLE","$pieces",347],"[","]",["T_WHITESPACE"," ",347],"=",["T_WHITESPACE"," ",347],["T_STRING_CAST","(string)",347],["T_DOUBLE_CAST","(float)",347],"(",["T_VARIABLE","$sumWeight",347],["T_WHITESPACE"," ",347],"+",["T_WHITESPACE"," ",347],["T_VARIABLE","$weight",347],")",";",["T_WHITESPACE","\n                        ",347],["T_VARIABLE","$sumWeight",348],["T_WHITESPACE"," ",348],"=",["T_WHITESPACE"," ",348],["T_LNUMBER","0",348],";",["T_WHITESPACE","\n                        ",348],["T_BREAK","break",349],";",["T_WHITESPACE","\n                    ",349],"}",["T_WHITESPACE","\n                ",350],"}",["T_WHITESPACE","\n            ",351],"}",["T_WHITESPACE","\n            ",352],["T_IF","if",353],["T_WHITESPACE"," ",353],"(",["T_VARIABLE","$sumWeight",353],["T_WHITESPACE"," ",353],">",["T_WHITESPACE"," ",353],["T_LNUMBER","0",353],")",["T_WHITESPACE"," ",353],"{",["T_WHITESPACE","\n                ",353],["T_VARIABLE","$pieces",354],"[","]",["T_WHITESPACE"," ",354],"=",["T_WHITESPACE"," ",354],["T_STRING_CAST","(string)",354],["T_DOUBLE_CAST","(float)",354],["T_VARIABLE","$sumWeight",354],";",["T_WHITESPACE","\n            ",354],"}",["T_WHITESPACE","\n            ",355],["T_VARIABLE","$pieces",356],["T_WHITESPACE"," ",356],"=",["T_WHITESPACE"," ",356],["T_STRING","array_count_values",356],"(",["T_VARIABLE","$pieces",356],")",";",["T_WHITESPACE","\n        ",356],"}",["T_WHITESPACE","\n\n        ",357],["T_RETURN","return",359],["T_WHITESPACE"," ",359],["T_VARIABLE","$pieces",359],";",["T_WHITESPACE","\n    ",359],"}",["T_WHITESPACE","\n\n    ",360],["T_DOC_COMMENT","\/**\n     * Collect rates by address\n     *\n     * @param Varien_Object $address\n     * @param null|bool|array $limitCarrier\n     * @return Mage_Shipping_Model_Shipping\n     *\/",362],["T_WHITESPACE","\n    ",368],["T_PUBLIC","public",369],["T_WHITESPACE"," ",369],["T_FUNCTION","function",369],["T_WHITESPACE"," ",369],["T_STRING","collectRatesByAddress",369],"(",["T_STRING","Varien_Object",369],["T_WHITESPACE"," ",369],["T_VARIABLE","$address",369],",",["T_WHITESPACE"," ",369],["T_VARIABLE","$limitCarrier",369],["T_WHITESPACE"," ",369],"=",["T_WHITESPACE"," ",369],["T_STRING","null",369],")",["T_WHITESPACE","\n    ",369],"{",["T_WHITESPACE","\n        ",370],["T_DOC_COMMENT","\/** @var $request Mage_Shipping_Model_Rate_Request *\/",371],["T_WHITESPACE","\n        ",371],["T_VARIABLE","$request",372],["T_WHITESPACE"," ",372],"=",["T_WHITESPACE"," ",372],["T_STRING","Mage",372],["T_DOUBLE_COLON","::",372],["T_STRING","getModel",372],"(",["T_CONSTANT_ENCAPSED_STRING","'shipping\/rate_request'",372],")",";",["T_WHITESPACE","\n        ",372],["T_VARIABLE","$request",373],["T_OBJECT_OPERATOR","->",373],["T_STRING","setAllItems",373],"(",["T_VARIABLE","$address",373],["T_OBJECT_OPERATOR","->",373],["T_STRING","getAllItems",373],"(",")",")",";",["T_WHITESPACE","\n        ",373],["T_VARIABLE","$request",374],["T_OBJECT_OPERATOR","->",374],["T_STRING","setDestCountryId",374],"(",["T_VARIABLE","$address",374],["T_OBJECT_OPERATOR","->",374],["T_STRING","getCountryId",374],"(",")",")",";",["T_WHITESPACE","\n        ",374],["T_VARIABLE","$request",375],["T_OBJECT_OPERATOR","->",375],["T_STRING","setDestRegionId",375],"(",["T_VARIABLE","$address",375],["T_OBJECT_OPERATOR","->",375],["T_STRING","getRegionId",375],"(",")",")",";",["T_WHITESPACE","\n        ",375],["T_VARIABLE","$request",376],["T_OBJECT_OPERATOR","->",376],["T_STRING","setDestPostcode",376],"(",["T_VARIABLE","$address",376],["T_OBJECT_OPERATOR","->",376],["T_STRING","getPostcode",376],"(",")",")",";",["T_WHITESPACE","\n        ",376],["T_VARIABLE","$request",377],["T_OBJECT_OPERATOR","->",377],["T_STRING","setPackageValue",377],"(",["T_VARIABLE","$address",377],["T_OBJECT_OPERATOR","->",377],["T_STRING","getBaseSubtotal",377],"(",")",")",";",["T_WHITESPACE","\n        ",377],["T_VARIABLE","$request",378],["T_OBJECT_OPERATOR","->",378],["T_STRING","setPackageValueWithDiscount",378],"(",["T_VARIABLE","$address",378],["T_OBJECT_OPERATOR","->",378],["T_STRING","getBaseSubtotalWithDiscount",378],"(",")",")",";",["T_WHITESPACE","\n        ",378],["T_VARIABLE","$request",379],["T_OBJECT_OPERATOR","->",379],["T_STRING","setPackageWeight",379],"(",["T_VARIABLE","$address",379],["T_OBJECT_OPERATOR","->",379],["T_STRING","getWeight",379],"(",")",")",";",["T_WHITESPACE","\n        ",379],["T_VARIABLE","$request",380],["T_OBJECT_OPERATOR","->",380],["T_STRING","setFreeMethodWeight",380],"(",["T_VARIABLE","$address",380],["T_OBJECT_OPERATOR","->",380],["T_STRING","getFreeMethodWeight",380],"(",")",")",";",["T_WHITESPACE","\n        ",380],["T_VARIABLE","$request",381],["T_OBJECT_OPERATOR","->",381],["T_STRING","setPackageQty",381],"(",["T_VARIABLE","$address",381],["T_OBJECT_OPERATOR","->",381],["T_STRING","getItemQty",381],"(",")",")",";",["T_WHITESPACE","\n        ",381],["T_VARIABLE","$request",382],["T_OBJECT_OPERATOR","->",382],["T_STRING","setStoreId",382],"(",["T_STRING","Mage",382],["T_DOUBLE_COLON","::",382],["T_STRING","app",382],"(",")",["T_OBJECT_OPERATOR","->",382],["T_STRING","getStore",382],"(",")",["T_OBJECT_OPERATOR","->",382],["T_STRING","getId",382],"(",")",")",";",["T_WHITESPACE","\n        ",382],["T_VARIABLE","$request",383],["T_OBJECT_OPERATOR","->",383],["T_STRING","setWebsiteId",383],"(",["T_STRING","Mage",383],["T_DOUBLE_COLON","::",383],["T_STRING","app",383],"(",")",["T_OBJECT_OPERATOR","->",383],["T_STRING","getStore",383],"(",")",["T_OBJECT_OPERATOR","->",383],["T_STRING","getWebsiteId",383],"(",")",")",";",["T_WHITESPACE","\n        ",383],["T_VARIABLE","$request",384],["T_OBJECT_OPERATOR","->",384],["T_STRING","setBaseCurrency",384],"(",["T_STRING","Mage",384],["T_DOUBLE_COLON","::",384],["T_STRING","app",384],"(",")",["T_OBJECT_OPERATOR","->",384],["T_STRING","getStore",384],"(",")",["T_OBJECT_OPERATOR","->",384],["T_STRING","getBaseCurrency",384],"(",")",")",";",["T_WHITESPACE","\n        ",384],["T_VARIABLE","$request",385],["T_OBJECT_OPERATOR","->",385],["T_STRING","setPackageCurrency",385],"(",["T_STRING","Mage",385],["T_DOUBLE_COLON","::",385],["T_STRING","app",385],"(",")",["T_OBJECT_OPERATOR","->",385],["T_STRING","getStore",385],"(",")",["T_OBJECT_OPERATOR","->",385],["T_STRING","getCurrentCurrency",385],"(",")",")",";",["T_WHITESPACE","\n        ",385],["T_VARIABLE","$request",386],["T_OBJECT_OPERATOR","->",386],["T_STRING","setLimitCarrier",386],"(",["T_VARIABLE","$limitCarrier",386],")",";",["T_WHITESPACE","\n\n        ",386],["T_VARIABLE","$request",388],["T_OBJECT_OPERATOR","->",388],["T_STRING","setBaseSubtotalInclTax",388],"(",["T_VARIABLE","$address",388],["T_OBJECT_OPERATOR","->",388],["T_STRING","getBaseSubtotalInclTax",388],"(",")",["T_WHITESPACE","\n            ",388],"+",["T_WHITESPACE"," ",389],["T_VARIABLE","$address",389],["T_OBJECT_OPERATOR","->",389],["T_STRING","getBaseExtraTaxAmount",389],"(",")",")",";",["T_WHITESPACE","\n\n        ",389],["T_RETURN","return",391],["T_WHITESPACE"," ",391],["T_VARIABLE","$this",391],["T_OBJECT_OPERATOR","->",391],["T_STRING","collectRates",391],"(",["T_VARIABLE","$request",391],")",";",["T_WHITESPACE","\n    ",391],"}",["T_WHITESPACE","\n\n    ",392],["T_DOC_COMMENT","\/**\n     * Set part of carrier xml config path\n     *\n     * @param string $code\n     * @return Mage_Shipping_Model_Shipping\n     *\/",394],["T_WHITESPACE","\n    ",399],["T_PUBLIC","public",400],["T_WHITESPACE"," ",400],["T_FUNCTION","function",400],["T_WHITESPACE"," ",400],["T_STRING","setCarrierAvailabilityConfigField",400],"(",["T_VARIABLE","$code",400],["T_WHITESPACE"," ",400],"=",["T_WHITESPACE"," ",400],["T_CONSTANT_ENCAPSED_STRING","'active'",400],")",["T_WHITESPACE","\n    ",400],"{",["T_WHITESPACE","\n        ",401],["T_VARIABLE","$this",402],["T_OBJECT_OPERATOR","->",402],["T_STRING","_availabilityConfigField",402],["T_WHITESPACE"," ",402],"=",["T_WHITESPACE"," ",402],["T_VARIABLE","$code",402],";",["T_WHITESPACE","\n        ",402],["T_RETURN","return",403],["T_WHITESPACE"," ",403],["T_VARIABLE","$this",403],";",["T_WHITESPACE","\n    ",403],"}",["T_WHITESPACE","\n\n    ",404],["T_DOC_COMMENT","\/**\n     * Get carrier by its code\n     *\n     * @param string $carrierCode\n     * @param null|int $storeId\n     * @return bool|Mage_Core_Model_Abstract\n     *\/",406],["T_WHITESPACE","\n    ",412],["T_PUBLIC","public",413],["T_WHITESPACE"," ",413],["T_FUNCTION","function",413],["T_WHITESPACE"," ",413],["T_STRING","getCarrierByCode",413],"(",["T_VARIABLE","$carrierCode",413],",",["T_WHITESPACE"," ",413],["T_VARIABLE","$storeId",413],["T_WHITESPACE"," ",413],"=",["T_WHITESPACE"," ",413],["T_STRING","null",413],")",["T_WHITESPACE","\n    ",413],"{",["T_WHITESPACE","\n        ",414],["T_IF","if",415],["T_WHITESPACE"," ",415],"(","!",["T_STRING","Mage",415],["T_DOUBLE_COLON","::",415],["T_STRING","getStoreConfigFlag",415],"(",["T_CONSTANT_ENCAPSED_STRING","'carriers\/'",415],".",["T_VARIABLE","$carrierCode",415],".",["T_CONSTANT_ENCAPSED_STRING","'\/'",415],".",["T_VARIABLE","$this",415],["T_OBJECT_OPERATOR","->",415],["T_STRING","_availabilityConfigField",415],",",["T_WHITESPACE"," ",415],["T_VARIABLE","$storeId",415],")",")",["T_WHITESPACE"," ",415],"{",["T_WHITESPACE","\n            ",415],["T_RETURN","return",416],["T_WHITESPACE"," ",416],["T_STRING","false",416],";",["T_WHITESPACE","\n        ",416],"}",["T_WHITESPACE","\n        ",417],["T_VARIABLE","$className",418],["T_WHITESPACE"," ",418],"=",["T_WHITESPACE"," ",418],["T_STRING","Mage",418],["T_DOUBLE_COLON","::",418],["T_STRING","getStoreConfig",418],"(",["T_CONSTANT_ENCAPSED_STRING","'carriers\/'",418],".",["T_VARIABLE","$carrierCode",418],".",["T_CONSTANT_ENCAPSED_STRING","'\/model'",418],",",["T_WHITESPACE"," ",418],["T_VARIABLE","$storeId",418],")",";",["T_WHITESPACE","\n        ",418],["T_IF","if",419],["T_WHITESPACE"," ",419],"(","!",["T_VARIABLE","$className",419],")",["T_WHITESPACE"," ",419],"{",["T_WHITESPACE","\n            ",419],["T_RETURN","return",420],["T_WHITESPACE"," ",420],["T_STRING","false",420],";",["T_WHITESPACE","\n        ",420],"}",["T_WHITESPACE","\n        ",421],["T_VARIABLE","$obj",422],["T_WHITESPACE"," ",422],"=",["T_WHITESPACE"," ",422],["T_STRING","Mage",422],["T_DOUBLE_COLON","::",422],["T_STRING","getModel",422],"(",["T_VARIABLE","$className",422],")",";",["T_WHITESPACE","\n        ",422],["T_IF","if",423],["T_WHITESPACE"," ",423],"(",["T_VARIABLE","$storeId",423],")",["T_WHITESPACE"," ",423],"{",["T_WHITESPACE","\n            ",423],["T_VARIABLE","$obj",424],["T_OBJECT_OPERATOR","->",424],["T_STRING","setStore",424],"(",["T_VARIABLE","$storeId",424],")",";",["T_WHITESPACE","\n        ",424],"}",["T_WHITESPACE","\n        ",425],["T_RETURN","return",426],["T_WHITESPACE"," ",426],["T_VARIABLE","$obj",426],";",["T_WHITESPACE","\n    ",426],"}",["T_WHITESPACE","\n\n    ",427],["T_DOC_COMMENT","\/**\n     * Prepare and do request to shipment\n     *\n     * @param Mage_Sales_Model_Order_Shipment $orderShipment\n     * @return Varien_Object\n     *\/",429],["T_WHITESPACE","\n    ",434],["T_PUBLIC","public",435],["T_WHITESPACE"," ",435],["T_FUNCTION","function",435],["T_WHITESPACE"," ",435],["T_STRING","requestToShipment",435],"(",["T_STRING","Mage_Sales_Model_Order_Shipment",435],["T_WHITESPACE"," ",435],["T_VARIABLE","$orderShipment",435],")",["T_WHITESPACE","\n    ",435],"{",["T_WHITESPACE","\n        ",436],["T_VARIABLE","$admin",437],["T_WHITESPACE"," ",437],"=",["T_WHITESPACE"," ",437],["T_STRING","Mage",437],["T_DOUBLE_COLON","::",437],["T_STRING","getSingleton",437],"(",["T_CONSTANT_ENCAPSED_STRING","'admin\/session'",437],")",["T_OBJECT_OPERATOR","->",437],["T_STRING","getUser",437],"(",")",";",["T_WHITESPACE","\n        ",437],["T_VARIABLE","$order",438],["T_WHITESPACE"," ",438],"=",["T_WHITESPACE"," ",438],["T_VARIABLE","$orderShipment",438],["T_OBJECT_OPERATOR","->",438],["T_STRING","getOrder",438],"(",")",";",["T_WHITESPACE","\n        ",438],["T_VARIABLE","$address",439],["T_WHITESPACE"," ",439],"=",["T_WHITESPACE"," ",439],["T_VARIABLE","$order",439],["T_OBJECT_OPERATOR","->",439],["T_STRING","getShippingAddress",439],"(",")",";",["T_WHITESPACE","\n        ",439],["T_VARIABLE","$shippingMethod",440],["T_WHITESPACE"," ",440],"=",["T_WHITESPACE"," ",440],["T_VARIABLE","$order",440],["T_OBJECT_OPERATOR","->",440],["T_STRING","getShippingMethod",440],"(",["T_STRING","true",440],")",";",["T_WHITESPACE","\n        ",440],["T_VARIABLE","$shipmentStoreId",441],["T_WHITESPACE"," ",441],"=",["T_WHITESPACE"," ",441],["T_VARIABLE","$orderShipment",441],["T_OBJECT_OPERATOR","->",441],["T_STRING","getStoreId",441],"(",")",";",["T_WHITESPACE","\n        ",441],["T_VARIABLE","$shipmentCarrier",442],["T_WHITESPACE"," ",442],"=",["T_WHITESPACE"," ",442],["T_VARIABLE","$order",442],["T_OBJECT_OPERATOR","->",442],["T_STRING","getShippingCarrier",442],"(",")",";",["T_WHITESPACE","\n        ",442],["T_VARIABLE","$baseCurrencyCode",443],["T_WHITESPACE"," ",443],"=",["T_WHITESPACE"," ",443],["T_STRING","Mage",443],["T_DOUBLE_COLON","::",443],["T_STRING","app",443],"(",")",["T_OBJECT_OPERATOR","->",443],["T_STRING","getStore",443],"(",["T_VARIABLE","$shipmentStoreId",443],")",["T_OBJECT_OPERATOR","->",443],["T_STRING","getBaseCurrencyCode",443],"(",")",";",["T_WHITESPACE","\n        ",443],["T_IF","if",444],["T_WHITESPACE"," ",444],"(","!",["T_VARIABLE","$shipmentCarrier",444],")",["T_WHITESPACE"," ",444],"{",["T_WHITESPACE","\n            ",444],["T_STRING","Mage",445],["T_DOUBLE_COLON","::",445],["T_STRING","throwException",445],"(",["T_CONSTANT_ENCAPSED_STRING","'Invalid carrier: '",445],["T_WHITESPACE"," ",445],".",["T_WHITESPACE"," ",445],["T_VARIABLE","$shippingMethod",445],["T_OBJECT_OPERATOR","->",445],["T_STRING","getCarrierCode",445],"(",")",")",";",["T_WHITESPACE","\n        ",445],"}",["T_WHITESPACE","\n        ",446],["T_VARIABLE","$shipperRegionCode",447],["T_WHITESPACE"," ",447],"=",["T_WHITESPACE"," ",447],["T_STRING","Mage",447],["T_DOUBLE_COLON","::",447],["T_STRING","getStoreConfig",447],"(",["T_STRING","self",447],["T_DOUBLE_COLON","::",447],["T_STRING","XML_PATH_STORE_REGION_ID",447],",",["T_WHITESPACE"," ",447],["T_VARIABLE","$shipmentStoreId",447],")",";",["T_WHITESPACE","\n        ",447],["T_IF","if",448],["T_WHITESPACE"," ",448],"(",["T_STRING","is_numeric",448],"(",["T_VARIABLE","$shipperRegionCode",448],")",")",["T_WHITESPACE"," ",448],"{",["T_WHITESPACE","\n            ",448],["T_VARIABLE","$shipperRegionCode",449],["T_WHITESPACE"," ",449],"=",["T_WHITESPACE"," ",449],["T_STRING","Mage",449],["T_DOUBLE_COLON","::",449],["T_STRING","getModel",449],"(",["T_CONSTANT_ENCAPSED_STRING","'directory\/region'",449],")",["T_OBJECT_OPERATOR","->",449],["T_STRING","load",449],"(",["T_VARIABLE","$shipperRegionCode",449],")",["T_OBJECT_OPERATOR","->",449],["T_STRING","getCode",449],"(",")",";",["T_WHITESPACE","\n        ",449],"}",["T_WHITESPACE","\n\n        ",450],["T_VARIABLE","$recipientRegionCode",452],["T_WHITESPACE"," ",452],"=",["T_WHITESPACE"," ",452],["T_STRING","Mage",452],["T_DOUBLE_COLON","::",452],["T_STRING","getModel",452],"(",["T_CONSTANT_ENCAPSED_STRING","'directory\/region'",452],")",["T_OBJECT_OPERATOR","->",452],["T_STRING","load",452],"(",["T_VARIABLE","$address",452],["T_OBJECT_OPERATOR","->",452],["T_STRING","getRegionId",452],"(",")",")",["T_OBJECT_OPERATOR","->",452],["T_STRING","getCode",452],"(",")",";",["T_WHITESPACE","\n\n        ",452],["T_VARIABLE","$originStreet1",454],["T_WHITESPACE"," ",454],"=",["T_WHITESPACE"," ",454],["T_STRING","Mage",454],["T_DOUBLE_COLON","::",454],["T_STRING","getStoreConfig",454],"(",["T_STRING","self",454],["T_DOUBLE_COLON","::",454],["T_STRING","XML_PATH_STORE_ADDRESS1",454],",",["T_WHITESPACE"," ",454],["T_VARIABLE","$shipmentStoreId",454],")",";",["T_WHITESPACE","\n        ",454],["T_VARIABLE","$originStreet2",455],["T_WHITESPACE"," ",455],"=",["T_WHITESPACE"," ",455],["T_STRING","Mage",455],["T_DOUBLE_COLON","::",455],["T_STRING","getStoreConfig",455],"(",["T_STRING","self",455],["T_DOUBLE_COLON","::",455],["T_STRING","XML_PATH_STORE_ADDRESS2",455],",",["T_WHITESPACE"," ",455],["T_VARIABLE","$shipmentStoreId",455],")",";",["T_WHITESPACE","\n        ",455],["T_VARIABLE","$storeInfo",456],["T_WHITESPACE"," ",456],"=",["T_WHITESPACE"," ",456],["T_NEW","new",456],["T_WHITESPACE"," ",456],["T_STRING","Varien_Object",456],"(",["T_STRING","Mage",456],["T_DOUBLE_COLON","::",456],["T_STRING","getStoreConfig",456],"(",["T_CONSTANT_ENCAPSED_STRING","'general\/store_information'",456],",",["T_WHITESPACE"," ",456],["T_VARIABLE","$shipmentStoreId",456],")",")",";",["T_WHITESPACE","\n\n        ",456],["T_IF","if",458],["T_WHITESPACE"," ",458],"(","!",["T_VARIABLE","$admin",458],["T_OBJECT_OPERATOR","->",458],["T_STRING","getFirstname",458],"(",")",["T_WHITESPACE"," ",458],["T_BOOLEAN_OR","||",458],["T_WHITESPACE"," ",458],"!",["T_VARIABLE","$admin",458],["T_OBJECT_OPERATOR","->",458],["T_STRING","getLastname",458],"(",")",["T_WHITESPACE"," ",458],["T_BOOLEAN_OR","||",458],["T_WHITESPACE"," ",458],"!",["T_VARIABLE","$storeInfo",458],["T_OBJECT_OPERATOR","->",458],["T_STRING","getName",458],"(",")",["T_WHITESPACE"," ",458],["T_BOOLEAN_OR","||",458],["T_WHITESPACE"," ",458],"!",["T_VARIABLE","$storeInfo",458],["T_OBJECT_OPERATOR","->",458],["T_STRING","getPhone",458],"(",")",["T_WHITESPACE","\n            ",458],["T_BOOLEAN_OR","||",459],["T_WHITESPACE"," ",459],"!",["T_VARIABLE","$originStreet1",459],["T_WHITESPACE"," ",459],["T_BOOLEAN_OR","||",459],["T_WHITESPACE"," ",459],"!",["T_STRING","Mage",459],["T_DOUBLE_COLON","::",459],["T_STRING","getStoreConfig",459],"(",["T_STRING","self",459],["T_DOUBLE_COLON","::",459],["T_STRING","XML_PATH_STORE_CITY",459],",",["T_WHITESPACE"," ",459],["T_VARIABLE","$shipmentStoreId",459],")",["T_WHITESPACE","\n            ",459],["T_BOOLEAN_OR","||",460],["T_WHITESPACE"," ",460],"!",["T_VARIABLE","$shipperRegionCode",460],["T_WHITESPACE"," ",460],["T_BOOLEAN_OR","||",460],["T_WHITESPACE"," ",460],"!",["T_STRING","Mage",460],["T_DOUBLE_COLON","::",460],["T_STRING","getStoreConfig",460],"(",["T_STRING","self",460],["T_DOUBLE_COLON","::",460],["T_STRING","XML_PATH_STORE_ZIP",460],",",["T_WHITESPACE"," ",460],["T_VARIABLE","$shipmentStoreId",460],")",["T_WHITESPACE","\n            ",460],["T_BOOLEAN_OR","||",461],["T_WHITESPACE"," ",461],"!",["T_STRING","Mage",461],["T_DOUBLE_COLON","::",461],["T_STRING","getStoreConfig",461],"(",["T_STRING","self",461],["T_DOUBLE_COLON","::",461],["T_STRING","XML_PATH_STORE_COUNTRY_ID",461],",",["T_WHITESPACE"," ",461],["T_VARIABLE","$shipmentStoreId",461],")",["T_WHITESPACE","\n        ",461],")",["T_WHITESPACE"," ",462],"{",["T_WHITESPACE","\n            ",462],["T_STRING","Mage",463],["T_DOUBLE_COLON","::",463],["T_STRING","throwException",463],"(",["T_WHITESPACE","\n                ",463],["T_STRING","Mage",464],["T_DOUBLE_COLON","::",464],["T_STRING","helper",464],"(",["T_CONSTANT_ENCAPSED_STRING","'sales'",464],")",["T_OBJECT_OPERATOR","->",464],["T_STRING","__",464],"(",["T_CONSTANT_ENCAPSED_STRING","'Insufficient information to create shipping label(s). Please verify your Store Information and Shipping Settings.'",464],")",["T_WHITESPACE","\n            ",464],")",";",["T_WHITESPACE","\n        ",465],"}",["T_WHITESPACE","\n\n        ",466],["T_DOC_COMMENT","\/** @var $request Mage_Shipping_Model_Shipment_Request *\/",468],["T_WHITESPACE","\n        ",468],["T_VARIABLE","$request",469],["T_WHITESPACE"," ",469],"=",["T_WHITESPACE"," ",469],["T_STRING","Mage",469],["T_DOUBLE_COLON","::",469],["T_STRING","getModel",469],"(",["T_CONSTANT_ENCAPSED_STRING","'shipping\/shipment_request'",469],")",";",["T_WHITESPACE","\n        ",469],["T_VARIABLE","$request",470],["T_OBJECT_OPERATOR","->",470],["T_STRING","setOrderShipment",470],"(",["T_VARIABLE","$orderShipment",470],")",";",["T_WHITESPACE","\n        ",470],["T_VARIABLE","$request",471],["T_OBJECT_OPERATOR","->",471],["T_STRING","setShipperContactPersonName",471],"(",["T_VARIABLE","$admin",471],["T_OBJECT_OPERATOR","->",471],["T_STRING","getName",471],"(",")",")",";",["T_WHITESPACE","\n        ",471],["T_VARIABLE","$request",472],["T_OBJECT_OPERATOR","->",472],["T_STRING","setShipperContactPersonFirstName",472],"(",["T_VARIABLE","$admin",472],["T_OBJECT_OPERATOR","->",472],["T_STRING","getFirstname",472],"(",")",")",";",["T_WHITESPACE","\n        ",472],["T_VARIABLE","$request",473],["T_OBJECT_OPERATOR","->",473],["T_STRING","setShipperContactPersonLastName",473],"(",["T_VARIABLE","$admin",473],["T_OBJECT_OPERATOR","->",473],["T_STRING","getLastname",473],"(",")",")",";",["T_WHITESPACE","\n        ",473],["T_VARIABLE","$request",474],["T_OBJECT_OPERATOR","->",474],["T_STRING","setShipperContactCompanyName",474],"(",["T_VARIABLE","$storeInfo",474],["T_OBJECT_OPERATOR","->",474],["T_STRING","getName",474],"(",")",")",";",["T_WHITESPACE","\n        ",474],["T_VARIABLE","$request",475],["T_OBJECT_OPERATOR","->",475],["T_STRING","setShipperContactPhoneNumber",475],"(",["T_VARIABLE","$storeInfo",475],["T_OBJECT_OPERATOR","->",475],["T_STRING","getPhone",475],"(",")",")",";",["T_WHITESPACE","\n        ",475],["T_VARIABLE","$request",476],["T_OBJECT_OPERATOR","->",476],["T_STRING","setShipperEmail",476],"(",["T_VARIABLE","$admin",476],["T_OBJECT_OPERATOR","->",476],["T_STRING","getEmail",476],"(",")",")",";",["T_WHITESPACE","\n        ",476],["T_VARIABLE","$request",477],["T_OBJECT_OPERATOR","->",477],["T_STRING","setShipperAddressStreet",477],"(",["T_STRING","trim",477],"(",["T_VARIABLE","$originStreet1",477],["T_WHITESPACE"," ",477],".",["T_WHITESPACE"," ",477],["T_CONSTANT_ENCAPSED_STRING","' '",477],["T_WHITESPACE"," ",477],".",["T_WHITESPACE"," ",477],["T_VARIABLE","$originStreet2",477],")",")",";",["T_WHITESPACE","\n        ",477],["T_VARIABLE","$request",478],["T_OBJECT_OPERATOR","->",478],["T_STRING","setShipperAddressStreet1",478],"(",["T_VARIABLE","$originStreet1",478],")",";",["T_WHITESPACE","\n        ",478],["T_VARIABLE","$request",479],["T_OBJECT_OPERATOR","->",479],["T_STRING","setShipperAddressStreet2",479],"(",["T_VARIABLE","$originStreet2",479],")",";",["T_WHITESPACE","\n        ",479],["T_VARIABLE","$request",480],["T_OBJECT_OPERATOR","->",480],["T_STRING","setShipperAddressCity",480],"(",["T_STRING","Mage",480],["T_DOUBLE_COLON","::",480],["T_STRING","getStoreConfig",480],"(",["T_STRING","self",480],["T_DOUBLE_COLON","::",480],["T_STRING","XML_PATH_STORE_CITY",480],",",["T_WHITESPACE"," ",480],["T_VARIABLE","$shipmentStoreId",480],")",")",";",["T_WHITESPACE","\n        ",480],["T_VARIABLE","$request",481],["T_OBJECT_OPERATOR","->",481],["T_STRING","setShipperAddressStateOrProvinceCode",481],"(",["T_VARIABLE","$shipperRegionCode",481],")",";",["T_WHITESPACE","\n        ",481],["T_VARIABLE","$request",482],["T_OBJECT_OPERATOR","->",482],["T_STRING","setShipperAddressPostalCode",482],"(",["T_STRING","Mage",482],["T_DOUBLE_COLON","::",482],["T_STRING","getStoreConfig",482],"(",["T_STRING","self",482],["T_DOUBLE_COLON","::",482],["T_STRING","XML_PATH_STORE_ZIP",482],",",["T_WHITESPACE"," ",482],["T_VARIABLE","$shipmentStoreId",482],")",")",";",["T_WHITESPACE","\n        ",482],["T_VARIABLE","$request",483],["T_OBJECT_OPERATOR","->",483],["T_STRING","setShipperAddressCountryCode",483],"(",["T_STRING","Mage",483],["T_DOUBLE_COLON","::",483],["T_STRING","getStoreConfig",483],"(",["T_STRING","self",483],["T_DOUBLE_COLON","::",483],["T_STRING","XML_PATH_STORE_COUNTRY_ID",483],",",["T_WHITESPACE"," ",483],["T_VARIABLE","$shipmentStoreId",483],")",")",";",["T_WHITESPACE","\n        ",483],["T_VARIABLE","$request",484],["T_OBJECT_OPERATOR","->",484],["T_STRING","setRecipientContactPersonName",484],"(",["T_STRING","trim",484],"(",["T_VARIABLE","$address",484],["T_OBJECT_OPERATOR","->",484],["T_STRING","getFirstname",484],"(",")",["T_WHITESPACE"," ",484],".",["T_WHITESPACE"," ",484],["T_CONSTANT_ENCAPSED_STRING","' '",484],["T_WHITESPACE"," ",484],".",["T_WHITESPACE"," ",484],["T_VARIABLE","$address",484],["T_OBJECT_OPERATOR","->",484],["T_STRING","getLastname",484],"(",")",")",")",";",["T_WHITESPACE","\n        ",484],["T_VARIABLE","$request",485],["T_OBJECT_OPERATOR","->",485],["T_STRING","setRecipientContactPersonFirstName",485],"(",["T_VARIABLE","$address",485],["T_OBJECT_OPERATOR","->",485],["T_STRING","getFirstname",485],"(",")",")",";",["T_WHITESPACE","\n        ",485],["T_VARIABLE","$request",486],["T_OBJECT_OPERATOR","->",486],["T_STRING","setRecipientContactPersonLastName",486],"(",["T_VARIABLE","$address",486],["T_OBJECT_OPERATOR","->",486],["T_STRING","getLastname",486],"(",")",")",";",["T_WHITESPACE","\n        ",486],["T_VARIABLE","$request",487],["T_OBJECT_OPERATOR","->",487],["T_STRING","setRecipientContactCompanyName",487],"(",["T_VARIABLE","$address",487],["T_OBJECT_OPERATOR","->",487],["T_STRING","getCompany",487],"(",")",")",";",["T_WHITESPACE","\n        ",487],["T_VARIABLE","$request",488],["T_OBJECT_OPERATOR","->",488],["T_STRING","setRecipientContactPhoneNumber",488],"(",["T_VARIABLE","$address",488],["T_OBJECT_OPERATOR","->",488],["T_STRING","getTelephone",488],"(",")",")",";",["T_WHITESPACE","\n        ",488],["T_VARIABLE","$request",489],["T_OBJECT_OPERATOR","->",489],["T_STRING","setRecipientEmail",489],"(",["T_VARIABLE","$address",489],["T_OBJECT_OPERATOR","->",489],["T_STRING","getEmail",489],"(",")",")",";",["T_WHITESPACE","\n        ",489],["T_VARIABLE","$request",490],["T_OBJECT_OPERATOR","->",490],["T_STRING","setRecipientAddressStreet",490],"(",["T_STRING","trim",490],"(",["T_VARIABLE","$address",490],["T_OBJECT_OPERATOR","->",490],["T_STRING","getStreet1",490],"(",")",["T_WHITESPACE"," ",490],".",["T_WHITESPACE"," ",490],["T_CONSTANT_ENCAPSED_STRING","' '",490],["T_WHITESPACE"," ",490],".",["T_WHITESPACE"," ",490],["T_VARIABLE","$address",490],["T_OBJECT_OPERATOR","->",490],["T_STRING","getStreet2",490],"(",")",")",")",";",["T_WHITESPACE","\n        ",490],["T_VARIABLE","$request",491],["T_OBJECT_OPERATOR","->",491],["T_STRING","setRecipientAddressStreet1",491],"(",["T_VARIABLE","$address",491],["T_OBJECT_OPERATOR","->",491],["T_STRING","getStreet1",491],"(",")",")",";",["T_WHITESPACE","\n        ",491],["T_VARIABLE","$request",492],["T_OBJECT_OPERATOR","->",492],["T_STRING","setRecipientAddressStreet2",492],"(",["T_VARIABLE","$address",492],["T_OBJECT_OPERATOR","->",492],["T_STRING","getStreet2",492],"(",")",")",";",["T_WHITESPACE","\n        ",492],["T_VARIABLE","$request",493],["T_OBJECT_OPERATOR","->",493],["T_STRING","setRecipientAddressCity",493],"(",["T_VARIABLE","$address",493],["T_OBJECT_OPERATOR","->",493],["T_STRING","getCity",493],"(",")",")",";",["T_WHITESPACE","\n        ",493],["T_VARIABLE","$request",494],["T_OBJECT_OPERATOR","->",494],["T_STRING","setRecipientAddressStateOrProvinceCode",494],"(",["T_VARIABLE","$address",494],["T_OBJECT_OPERATOR","->",494],["T_STRING","getRegionCode",494],"(",")",")",";",["T_WHITESPACE","\n        ",494],["T_VARIABLE","$request",495],["T_OBJECT_OPERATOR","->",495],["T_STRING","setRecipientAddressRegionCode",495],"(",["T_VARIABLE","$recipientRegionCode",495],")",";",["T_WHITESPACE","\n        ",495],["T_VARIABLE","$request",496],["T_OBJECT_OPERATOR","->",496],["T_STRING","setRecipientAddressPostalCode",496],"(",["T_VARIABLE","$address",496],["T_OBJECT_OPERATOR","->",496],["T_STRING","getPostcode",496],"(",")",")",";",["T_WHITESPACE","\n        ",496],["T_VARIABLE","$request",497],["T_OBJECT_OPERATOR","->",497],["T_STRING","setRecipientAddressCountryCode",497],"(",["T_VARIABLE","$address",497],["T_OBJECT_OPERATOR","->",497],["T_STRING","getCountryId",497],"(",")",")",";",["T_WHITESPACE","\n        ",497],["T_VARIABLE","$request",498],["T_OBJECT_OPERATOR","->",498],["T_STRING","setShippingMethod",498],"(",["T_VARIABLE","$shippingMethod",498],["T_OBJECT_OPERATOR","->",498],["T_STRING","getMethod",498],"(",")",")",";",["T_WHITESPACE","\n        ",498],["T_VARIABLE","$request",499],["T_OBJECT_OPERATOR","->",499],["T_STRING","setPackageWeight",499],"(",["T_VARIABLE","$order",499],["T_OBJECT_OPERATOR","->",499],["T_STRING","getWeight",499],"(",")",")",";",["T_WHITESPACE","\n        ",499],["T_VARIABLE","$request",500],["T_OBJECT_OPERATOR","->",500],["T_STRING","setPackages",500],"(",["T_VARIABLE","$orderShipment",500],["T_OBJECT_OPERATOR","->",500],["T_STRING","getPackages",500],"(",")",")",";",["T_WHITESPACE","\n        ",500],["T_VARIABLE","$request",501],["T_OBJECT_OPERATOR","->",501],["T_STRING","setBaseCurrencyCode",501],"(",["T_VARIABLE","$baseCurrencyCode",501],")",";",["T_WHITESPACE","\n        ",501],["T_VARIABLE","$request",502],["T_OBJECT_OPERATOR","->",502],["T_STRING","setStoreId",502],"(",["T_VARIABLE","$shipmentStoreId",502],")",";",["T_WHITESPACE","\n\n        ",502],["T_RETURN","return",504],["T_WHITESPACE"," ",504],["T_VARIABLE","$shipmentCarrier",504],["T_OBJECT_OPERATOR","->",504],["T_STRING","requestToShipment",504],"(",["T_VARIABLE","$request",504],")",";",["T_WHITESPACE","\n    ",504],"}",["T_WHITESPACE","\n",505],"}",["T_WHITESPACE","\n",506]]
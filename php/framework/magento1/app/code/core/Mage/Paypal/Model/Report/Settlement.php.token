[["T_OPEN_TAG","<?php\n",1],["T_DOC_COMMENT","\/**\n * Magento\n *\n * NOTICE OF LICENSE\n *\n * This source file is subject to the Open Software License (OSL 3.0)\n * that is bundled with this package in the file LICENSE.txt.\n * It is also available through the world-wide-web at this URL:\n * http:\/\/opensource.org\/licenses\/osl-3.0.php\n * If you did not receive a copy of the license and are unable to\n * obtain it through the world-wide-web, please send an email\n * to license@magento.com so we can send you a copy immediately.\n *\n * DISCLAIMER\n *\n * Do not edit or add to this file if you wish to upgrade Magento to newer\n * versions in the future. If you wish to customize Magento for your\n * needs please refer to http:\/\/www.magento.com for more information.\n *\n * @category    Mage\n * @package     Mage_Paypal\n * @copyright  Copyright (c) 2006-2016 X.commerce, Inc. and affiliates (http:\/\/www.magento.com)\n * @license    http:\/\/opensource.org\/licenses\/osl-3.0.php  Open Software License (OSL 3.0)\n *\/",2],["T_WHITESPACE","\n\n",25],["T_COMMENT","\/*\n * Paypal Settlement Report model\n *\n * Perform fetching reports from remote servers with following saving them to database\n * Prepare report rows for Mage_Paypal_Model_Report_Settlement_Row model\n *\n *\/",27],["T_WHITESPACE","\n",33],["T_DOC_COMMENT","\/**\n * Enter description here ...\n *\n * @method Mage_Paypal_Model_Resource_Report_Settlement _getResource()\n * @method Mage_Paypal_Model_Resource_Report_Settlement getResource()\n * @method string getReportDate()\n * @method Mage_Paypal_Model_Report_Settlement setReportDate(string $value)\n * @method string getAccountId()\n * @method Mage_Paypal_Model_Report_Settlement setAccountId(string $value)\n * @method string getFilename()\n * @method Mage_Paypal_Model_Report_Settlement setFilename(string $value)\n * @method string getLastModified()\n * @method Mage_Paypal_Model_Report_Settlement setLastModified(string $value)\n *\n * @category    Mage\n * @package     Mage_Paypal\n * @author      Magento Core Team <core@magentocommerce.com>\n *\/",34],["T_WHITESPACE","\n",51],["T_CLASS","class",52],["T_WHITESPACE"," ",52],["T_STRING","Mage_Paypal_Model_Report_Settlement",52],["T_WHITESPACE"," ",52],["T_EXTENDS","extends",52],["T_WHITESPACE"," ",52],["T_STRING","Mage_Core_Model_Abstract",52],["T_WHITESPACE","\n",52],"{",["T_WHITESPACE","\n    ",53],["T_DOC_COMMENT","\/**\n     * Default PayPal SFTP host\n     * @var string\n     *\/",54],["T_WHITESPACE","\n    ",57],["T_CONST","const",58],["T_WHITESPACE"," ",58],["T_STRING","REPORTS_HOSTNAME",58],["T_WHITESPACE"," ",58],"=",["T_WHITESPACE"," ",58],["T_CONSTANT_ENCAPSED_STRING","\"reports.paypal.com\"",58],";",["T_WHITESPACE","\n\n    ",58],["T_DOC_COMMENT","\/**\n     * Default PayPal SFTP host for sandbox mode\n     * @var string\n     *\/",60],["T_WHITESPACE","\n    ",63],["T_CONST","const",64],["T_WHITESPACE"," ",64],["T_STRING","SANDBOX_REPORTS_HOSTNAME",64],["T_WHITESPACE"," ",64],"=",["T_WHITESPACE"," ",64],["T_CONSTANT_ENCAPSED_STRING","\"reports.sandbox.paypal.com\"",64],";",["T_WHITESPACE","\n\n    ",64],["T_DOC_COMMENT","\/**\n     * PayPal SFTP path\n     * @var string\n     *\/",66],["T_WHITESPACE","\n    ",69],["T_CONST","const",70],["T_WHITESPACE"," ",70],["T_STRING","REPORTS_PATH",70],["T_WHITESPACE"," ",70],"=",["T_WHITESPACE"," ",70],["T_CONSTANT_ENCAPSED_STRING","\"\/ppreports\/outgoing\"",70],";",["T_WHITESPACE","\n\n    ",70],["T_DOC_COMMENT","\/**\n     * Original charset of old report files\n     * @var string\n     *\/",72],["T_WHITESPACE","\n    ",75],["T_CONST","const",76],["T_WHITESPACE"," ",76],["T_STRING","FILES_IN_CHARSET",76],["T_WHITESPACE"," ",76],"=",["T_WHITESPACE"," ",76],["T_CONSTANT_ENCAPSED_STRING","\"UTF-16\"",76],";",["T_WHITESPACE","\n\n    ",76],["T_DOC_COMMENT","\/**\n     * Target charset of report files to be parsed\n     * @var string\n     *\/",78],["T_WHITESPACE","\n    ",81],["T_CONST","const",82],["T_WHITESPACE"," ",82],["T_STRING","FILES_OUT_CHARSET",82],["T_WHITESPACE"," ",82],"=",["T_WHITESPACE"," ",82],["T_CONSTANT_ENCAPSED_STRING","\"UTF-8\"",82],";",["T_WHITESPACE","\n\n    ",82],["T_DOC_COMMENT","\/**\n     * Reports rows storage\n     * @var array\n     *\/",84],["T_WHITESPACE","\n    ",87],["T_PROTECTED","protected",88],["T_WHITESPACE"," ",88],["T_VARIABLE","$_rows",88],["T_WHITESPACE"," ",88],"=",["T_WHITESPACE"," ",88],["T_ARRAY","array",88],"(",")",";",["T_WHITESPACE","\n\n    ",88],["T_PROTECTED","protected",90],["T_WHITESPACE"," ",90],["T_VARIABLE","$_csvColumns",90],["T_WHITESPACE"," ",90],"=",["T_WHITESPACE"," ",90],["T_ARRAY","array",90],"(",["T_WHITESPACE","\n        ",90],["T_CONSTANT_ENCAPSED_STRING","'old'",91],["T_WHITESPACE"," ",91],["T_DOUBLE_ARROW","=>",91],["T_WHITESPACE"," ",91],["T_ARRAY","array",91],"(",["T_WHITESPACE","\n            ",91],["T_CONSTANT_ENCAPSED_STRING","'section_columns'",92],["T_WHITESPACE"," ",92],["T_DOUBLE_ARROW","=>",92],["T_WHITESPACE"," ",92],["T_ARRAY","array",92],"(",["T_WHITESPACE","\n                ",92],["T_CONSTANT_ENCAPSED_STRING","''",93],["T_WHITESPACE"," ",93],["T_DOUBLE_ARROW","=>",93],["T_WHITESPACE"," ",93],["T_LNUMBER","0",93],",",["T_WHITESPACE","\n                ",93],["T_CONSTANT_ENCAPSED_STRING","'TransactionID'",94],["T_WHITESPACE"," ",94],["T_DOUBLE_ARROW","=>",94],["T_WHITESPACE"," ",94],["T_LNUMBER","1",94],",",["T_WHITESPACE","\n                ",94],["T_CONSTANT_ENCAPSED_STRING","'InvoiceID'",95],["T_WHITESPACE"," ",95],["T_DOUBLE_ARROW","=>",95],["T_WHITESPACE"," ",95],["T_LNUMBER","2",95],",",["T_WHITESPACE","\n                ",95],["T_CONSTANT_ENCAPSED_STRING","'PayPalReferenceID'",96],["T_WHITESPACE"," ",96],["T_DOUBLE_ARROW","=>",96],["T_WHITESPACE"," ",96],["T_LNUMBER","3",96],",",["T_WHITESPACE","\n                ",96],["T_CONSTANT_ENCAPSED_STRING","'PayPalReferenceIDType'",97],["T_WHITESPACE"," ",97],["T_DOUBLE_ARROW","=>",97],["T_WHITESPACE"," ",97],["T_LNUMBER","4",97],",",["T_WHITESPACE","\n                ",97],["T_CONSTANT_ENCAPSED_STRING","'TransactionEventCode'",98],["T_WHITESPACE"," ",98],["T_DOUBLE_ARROW","=>",98],["T_WHITESPACE"," ",98],["T_LNUMBER","5",98],",",["T_WHITESPACE","\n                ",98],["T_CONSTANT_ENCAPSED_STRING","'TransactionInitiationDate'",99],["T_WHITESPACE"," ",99],["T_DOUBLE_ARROW","=>",99],["T_WHITESPACE"," ",99],["T_LNUMBER","6",99],",",["T_WHITESPACE","\n                ",99],["T_CONSTANT_ENCAPSED_STRING","'TransactionCompletionDate'",100],["T_WHITESPACE"," ",100],["T_DOUBLE_ARROW","=>",100],["T_WHITESPACE"," ",100],["T_LNUMBER","7",100],",",["T_WHITESPACE","\n                ",100],["T_CONSTANT_ENCAPSED_STRING","'TransactionDebitOrCredit'",101],["T_WHITESPACE"," ",101],["T_DOUBLE_ARROW","=>",101],["T_WHITESPACE"," ",101],["T_LNUMBER","8",101],",",["T_WHITESPACE","\n                ",101],["T_CONSTANT_ENCAPSED_STRING","'GrossTransactionAmount'",102],["T_WHITESPACE"," ",102],["T_DOUBLE_ARROW","=>",102],["T_WHITESPACE"," ",102],["T_LNUMBER","9",102],",",["T_WHITESPACE","\n                ",102],["T_CONSTANT_ENCAPSED_STRING","'GrossTransactionCurrency'",103],["T_WHITESPACE"," ",103],["T_DOUBLE_ARROW","=>",103],["T_WHITESPACE"," ",103],["T_LNUMBER","10",103],",",["T_WHITESPACE","\n                ",103],["T_CONSTANT_ENCAPSED_STRING","'FeeDebitOrCredit'",104],["T_WHITESPACE"," ",104],["T_DOUBLE_ARROW","=>",104],["T_WHITESPACE"," ",104],["T_LNUMBER","11",104],",",["T_WHITESPACE","\n                ",104],["T_CONSTANT_ENCAPSED_STRING","'FeeAmount'",105],["T_WHITESPACE"," ",105],["T_DOUBLE_ARROW","=>",105],["T_WHITESPACE"," ",105],["T_LNUMBER","12",105],",",["T_WHITESPACE","\n                ",105],["T_CONSTANT_ENCAPSED_STRING","'FeeCurrency'",106],["T_WHITESPACE"," ",106],["T_DOUBLE_ARROW","=>",106],["T_WHITESPACE"," ",106],["T_LNUMBER","13",106],",",["T_WHITESPACE","\n                ",106],["T_CONSTANT_ENCAPSED_STRING","'CustomField'",107],["T_WHITESPACE"," ",107],["T_DOUBLE_ARROW","=>",107],["T_WHITESPACE"," ",107],["T_LNUMBER","14",107],",",["T_WHITESPACE","\n                ",107],["T_CONSTANT_ENCAPSED_STRING","'ConsumerID'",108],["T_WHITESPACE"," ",108],["T_DOUBLE_ARROW","=>",108],["T_WHITESPACE"," ",108],["T_LNUMBER","15",108],["T_WHITESPACE","\n            ",108],")",",",["T_WHITESPACE","\n            ",109],["T_CONSTANT_ENCAPSED_STRING","'rowmap'",110],["T_WHITESPACE"," ",110],["T_DOUBLE_ARROW","=>",110],["T_WHITESPACE"," ",110],["T_ARRAY","array",110],"(",["T_WHITESPACE","\n                ",110],["T_CONSTANT_ENCAPSED_STRING","'TransactionID'",111],["T_WHITESPACE"," ",111],["T_DOUBLE_ARROW","=>",111],["T_WHITESPACE"," ",111],["T_CONSTANT_ENCAPSED_STRING","'transaction_id'",111],",",["T_WHITESPACE","\n                ",111],["T_CONSTANT_ENCAPSED_STRING","'InvoiceID'",112],["T_WHITESPACE"," ",112],["T_DOUBLE_ARROW","=>",112],["T_WHITESPACE"," ",112],["T_CONSTANT_ENCAPSED_STRING","'invoice_id'",112],",",["T_WHITESPACE","\n                ",112],["T_CONSTANT_ENCAPSED_STRING","'PayPalReferenceID'",113],["T_WHITESPACE"," ",113],["T_DOUBLE_ARROW","=>",113],["T_WHITESPACE"," ",113],["T_CONSTANT_ENCAPSED_STRING","'paypal_reference_id'",113],",",["T_WHITESPACE","\n                ",113],["T_CONSTANT_ENCAPSED_STRING","'PayPalReferenceIDType'",114],["T_WHITESPACE"," ",114],["T_DOUBLE_ARROW","=>",114],["T_WHITESPACE"," ",114],["T_CONSTANT_ENCAPSED_STRING","'paypal_reference_id_type'",114],",",["T_WHITESPACE","\n                ",114],["T_CONSTANT_ENCAPSED_STRING","'TransactionEventCode'",115],["T_WHITESPACE"," ",115],["T_DOUBLE_ARROW","=>",115],["T_WHITESPACE"," ",115],["T_CONSTANT_ENCAPSED_STRING","'transaction_event_code'",115],",",["T_WHITESPACE","\n                ",115],["T_CONSTANT_ENCAPSED_STRING","'TransactionInitiationDate'",116],["T_WHITESPACE"," ",116],["T_DOUBLE_ARROW","=>",116],["T_WHITESPACE"," ",116],["T_CONSTANT_ENCAPSED_STRING","'transaction_initiation_date'",116],",",["T_WHITESPACE","\n                ",116],["T_CONSTANT_ENCAPSED_STRING","'TransactionCompletionDate'",117],["T_WHITESPACE"," ",117],["T_DOUBLE_ARROW","=>",117],["T_WHITESPACE"," ",117],["T_CONSTANT_ENCAPSED_STRING","'transaction_completion_date'",117],",",["T_WHITESPACE","\n                ",117],["T_CONSTANT_ENCAPSED_STRING","'TransactionDebitOrCredit'",118],["T_WHITESPACE"," ",118],["T_DOUBLE_ARROW","=>",118],["T_WHITESPACE"," ",118],["T_CONSTANT_ENCAPSED_STRING","'transaction_debit_or_credit'",118],",",["T_WHITESPACE","\n                ",118],["T_CONSTANT_ENCAPSED_STRING","'GrossTransactionAmount'",119],["T_WHITESPACE"," ",119],["T_DOUBLE_ARROW","=>",119],["T_WHITESPACE"," ",119],["T_CONSTANT_ENCAPSED_STRING","'gross_transaction_amount'",119],",",["T_WHITESPACE","\n                ",119],["T_CONSTANT_ENCAPSED_STRING","'GrossTransactionCurrency'",120],["T_WHITESPACE"," ",120],["T_DOUBLE_ARROW","=>",120],["T_WHITESPACE"," ",120],["T_CONSTANT_ENCAPSED_STRING","'gross_transaction_currency'",120],",",["T_WHITESPACE","\n                ",120],["T_CONSTANT_ENCAPSED_STRING","'FeeDebitOrCredit'",121],["T_WHITESPACE"," ",121],["T_DOUBLE_ARROW","=>",121],["T_WHITESPACE"," ",121],["T_CONSTANT_ENCAPSED_STRING","'fee_debit_or_credit'",121],",",["T_WHITESPACE","\n                ",121],["T_CONSTANT_ENCAPSED_STRING","'FeeAmount'",122],["T_WHITESPACE"," ",122],["T_DOUBLE_ARROW","=>",122],["T_WHITESPACE"," ",122],["T_CONSTANT_ENCAPSED_STRING","'fee_amount'",122],",",["T_WHITESPACE","\n                ",122],["T_CONSTANT_ENCAPSED_STRING","'FeeCurrency'",123],["T_WHITESPACE"," ",123],["T_DOUBLE_ARROW","=>",123],["T_WHITESPACE"," ",123],["T_CONSTANT_ENCAPSED_STRING","'fee_currency'",123],",",["T_WHITESPACE","\n                ",123],["T_CONSTANT_ENCAPSED_STRING","'CustomField'",124],["T_WHITESPACE"," ",124],["T_DOUBLE_ARROW","=>",124],["T_WHITESPACE"," ",124],["T_CONSTANT_ENCAPSED_STRING","'custom_field'",124],",",["T_WHITESPACE","\n                ",124],["T_CONSTANT_ENCAPSED_STRING","'ConsumerID'",125],["T_WHITESPACE"," ",125],["T_DOUBLE_ARROW","=>",125],["T_WHITESPACE"," ",125],["T_CONSTANT_ENCAPSED_STRING","'consumer_id'",125],["T_WHITESPACE","\n            ",125],")",["T_WHITESPACE","\n        ",126],")",",",["T_WHITESPACE","\n        ",127],["T_CONSTANT_ENCAPSED_STRING","'new'",128],["T_WHITESPACE"," ",128],["T_DOUBLE_ARROW","=>",128],["T_WHITESPACE"," ",128],["T_ARRAY","array",128],"(",["T_WHITESPACE","\n            ",128],["T_CONSTANT_ENCAPSED_STRING","'section_columns'",129],["T_WHITESPACE"," ",129],["T_DOUBLE_ARROW","=>",129],["T_WHITESPACE"," ",129],["T_ARRAY","array",129],"(",["T_WHITESPACE","\n                ",129],["T_CONSTANT_ENCAPSED_STRING","''",130],["T_WHITESPACE"," ",130],["T_DOUBLE_ARROW","=>",130],["T_WHITESPACE"," ",130],["T_LNUMBER","0",130],",",["T_WHITESPACE","\n                ",130],["T_CONSTANT_ENCAPSED_STRING","'Transaction ID'",131],["T_WHITESPACE"," ",131],["T_DOUBLE_ARROW","=>",131],["T_WHITESPACE"," ",131],["T_LNUMBER","1",131],",",["T_WHITESPACE","\n                ",131],["T_CONSTANT_ENCAPSED_STRING","'Invoice ID'",132],["T_WHITESPACE"," ",132],["T_DOUBLE_ARROW","=>",132],["T_WHITESPACE"," ",132],["T_LNUMBER","2",132],",",["T_WHITESPACE","\n                ",132],["T_CONSTANT_ENCAPSED_STRING","'PayPal Reference ID'",133],["T_WHITESPACE"," ",133],["T_DOUBLE_ARROW","=>",133],["T_WHITESPACE"," ",133],["T_LNUMBER","3",133],",",["T_WHITESPACE","\n                ",133],["T_CONSTANT_ENCAPSED_STRING","'PayPal Reference ID Type'",134],["T_WHITESPACE"," ",134],["T_DOUBLE_ARROW","=>",134],["T_WHITESPACE"," ",134],["T_LNUMBER","4",134],",",["T_WHITESPACE","\n                ",134],["T_CONSTANT_ENCAPSED_STRING","'Transaction Event Code'",135],["T_WHITESPACE"," ",135],["T_DOUBLE_ARROW","=>",135],["T_WHITESPACE"," ",135],["T_LNUMBER","5",135],",",["T_WHITESPACE","\n                ",135],["T_CONSTANT_ENCAPSED_STRING","'Transaction Initiation Date'",136],["T_WHITESPACE"," ",136],["T_DOUBLE_ARROW","=>",136],["T_WHITESPACE"," ",136],["T_LNUMBER","6",136],",",["T_WHITESPACE","\n                ",136],["T_CONSTANT_ENCAPSED_STRING","'Transaction Completion Date'",137],["T_WHITESPACE"," ",137],["T_DOUBLE_ARROW","=>",137],["T_WHITESPACE"," ",137],["T_LNUMBER","7",137],",",["T_WHITESPACE","\n                ",137],["T_CONSTANT_ENCAPSED_STRING","'Transaction Debit or Credit'",138],["T_WHITESPACE"," ",138],["T_DOUBLE_ARROW","=>",138],["T_WHITESPACE"," ",138],["T_LNUMBER","8",138],",",["T_WHITESPACE","\n                ",138],["T_CONSTANT_ENCAPSED_STRING","'Gross Transaction Amount'",139],["T_WHITESPACE"," ",139],["T_DOUBLE_ARROW","=>",139],["T_WHITESPACE"," ",139],["T_LNUMBER","9",139],",",["T_WHITESPACE","\n                ",139],["T_CONSTANT_ENCAPSED_STRING","'Gross Transaction Currency'",140],["T_WHITESPACE"," ",140],["T_DOUBLE_ARROW","=>",140],["T_WHITESPACE"," ",140],["T_LNUMBER","10",140],",",["T_WHITESPACE","\n                ",140],["T_CONSTANT_ENCAPSED_STRING","'Fee Debit or Credit'",141],["T_WHITESPACE"," ",141],["T_DOUBLE_ARROW","=>",141],["T_WHITESPACE"," ",141],["T_LNUMBER","11",141],",",["T_WHITESPACE","\n                ",141],["T_CONSTANT_ENCAPSED_STRING","'Fee Amount'",142],["T_WHITESPACE"," ",142],["T_DOUBLE_ARROW","=>",142],["T_WHITESPACE"," ",142],["T_LNUMBER","12",142],",",["T_WHITESPACE","\n                ",142],["T_CONSTANT_ENCAPSED_STRING","'Fee Currency'",143],["T_WHITESPACE"," ",143],["T_DOUBLE_ARROW","=>",143],["T_WHITESPACE"," ",143],["T_LNUMBER","13",143],",",["T_WHITESPACE","\n                ",143],["T_CONSTANT_ENCAPSED_STRING","'Custom Field'",144],["T_WHITESPACE"," ",144],["T_DOUBLE_ARROW","=>",144],["T_WHITESPACE"," ",144],["T_LNUMBER","14",144],",",["T_WHITESPACE","\n                ",144],["T_CONSTANT_ENCAPSED_STRING","'Consumer ID'",145],["T_WHITESPACE"," ",145],["T_DOUBLE_ARROW","=>",145],["T_WHITESPACE"," ",145],["T_LNUMBER","15",145],",",["T_WHITESPACE","\n                ",145],["T_CONSTANT_ENCAPSED_STRING","'Payment Tracking ID'",146],["T_WHITESPACE"," ",146],["T_DOUBLE_ARROW","=>",146],["T_WHITESPACE"," ",146],["T_LNUMBER","16",146],",",["T_WHITESPACE","\n                ",146],["T_CONSTANT_ENCAPSED_STRING","'Store ID'",147],["T_WHITESPACE"," ",147],["T_DOUBLE_ARROW","=>",147],["T_WHITESPACE"," ",147],["T_LNUMBER","17",147],",",["T_WHITESPACE","\n            ",147],")",",",["T_WHITESPACE","\n            ",148],["T_CONSTANT_ENCAPSED_STRING","'rowmap'",149],["T_WHITESPACE"," ",149],["T_DOUBLE_ARROW","=>",149],["T_WHITESPACE"," ",149],["T_ARRAY","array",149],"(",["T_WHITESPACE","\n                ",149],["T_CONSTANT_ENCAPSED_STRING","'Transaction ID'",150],["T_WHITESPACE"," ",150],["T_DOUBLE_ARROW","=>",150],["T_WHITESPACE"," ",150],["T_CONSTANT_ENCAPSED_STRING","'transaction_id'",150],",",["T_WHITESPACE","\n                ",150],["T_CONSTANT_ENCAPSED_STRING","'Invoice ID'",151],["T_WHITESPACE"," ",151],["T_DOUBLE_ARROW","=>",151],["T_WHITESPACE"," ",151],["T_CONSTANT_ENCAPSED_STRING","'invoice_id'",151],",",["T_WHITESPACE","\n                ",151],["T_CONSTANT_ENCAPSED_STRING","'PayPal Reference ID'",152],["T_WHITESPACE"," ",152],["T_DOUBLE_ARROW","=>",152],["T_WHITESPACE"," ",152],["T_CONSTANT_ENCAPSED_STRING","'paypal_reference_id'",152],",",["T_WHITESPACE","\n                ",152],["T_CONSTANT_ENCAPSED_STRING","'PayPal Reference ID Type'",153],["T_WHITESPACE"," ",153],["T_DOUBLE_ARROW","=>",153],["T_WHITESPACE"," ",153],["T_CONSTANT_ENCAPSED_STRING","'paypal_reference_id_type'",153],",",["T_WHITESPACE","\n                ",153],["T_CONSTANT_ENCAPSED_STRING","'Transaction Event Code'",154],["T_WHITESPACE"," ",154],["T_DOUBLE_ARROW","=>",154],["T_WHITESPACE"," ",154],["T_CONSTANT_ENCAPSED_STRING","'transaction_event_code'",154],",",["T_WHITESPACE","\n                ",154],["T_CONSTANT_ENCAPSED_STRING","'Transaction Initiation Date'",155],["T_WHITESPACE"," ",155],["T_DOUBLE_ARROW","=>",155],["T_WHITESPACE"," ",155],["T_CONSTANT_ENCAPSED_STRING","'transaction_initiation_date'",155],",",["T_WHITESPACE","\n                ",155],["T_CONSTANT_ENCAPSED_STRING","'Transaction Completion Date'",156],["T_WHITESPACE"," ",156],["T_DOUBLE_ARROW","=>",156],["T_WHITESPACE"," ",156],["T_CONSTANT_ENCAPSED_STRING","'transaction_completion_date'",156],",",["T_WHITESPACE","\n                ",156],["T_CONSTANT_ENCAPSED_STRING","'Transaction Debit or Credit'",157],["T_WHITESPACE"," ",157],["T_DOUBLE_ARROW","=>",157],["T_WHITESPACE"," ",157],["T_CONSTANT_ENCAPSED_STRING","'transaction_debit_or_credit'",157],",",["T_WHITESPACE","\n                ",157],["T_CONSTANT_ENCAPSED_STRING","'Gross Transaction Amount'",158],["T_WHITESPACE"," ",158],["T_DOUBLE_ARROW","=>",158],["T_WHITESPACE"," ",158],["T_CONSTANT_ENCAPSED_STRING","'gross_transaction_amount'",158],",",["T_WHITESPACE","\n                ",158],["T_CONSTANT_ENCAPSED_STRING","'Gross Transaction Currency'",159],["T_WHITESPACE"," ",159],["T_DOUBLE_ARROW","=>",159],["T_WHITESPACE"," ",159],["T_CONSTANT_ENCAPSED_STRING","'gross_transaction_currency'",159],",",["T_WHITESPACE","\n                ",159],["T_CONSTANT_ENCAPSED_STRING","'Fee Debit or Credit'",160],["T_WHITESPACE"," ",160],["T_DOUBLE_ARROW","=>",160],["T_WHITESPACE"," ",160],["T_CONSTANT_ENCAPSED_STRING","'fee_debit_or_credit'",160],",",["T_WHITESPACE","\n                ",160],["T_CONSTANT_ENCAPSED_STRING","'Fee Amount'",161],["T_WHITESPACE"," ",161],["T_DOUBLE_ARROW","=>",161],["T_WHITESPACE"," ",161],["T_CONSTANT_ENCAPSED_STRING","'fee_amount'",161],",",["T_WHITESPACE","\n                ",161],["T_CONSTANT_ENCAPSED_STRING","'Fee Currency'",162],["T_WHITESPACE"," ",162],["T_DOUBLE_ARROW","=>",162],["T_WHITESPACE"," ",162],["T_CONSTANT_ENCAPSED_STRING","'fee_currency'",162],",",["T_WHITESPACE","\n                ",162],["T_CONSTANT_ENCAPSED_STRING","'Custom Field'",163],["T_WHITESPACE"," ",163],["T_DOUBLE_ARROW","=>",163],["T_WHITESPACE"," ",163],["T_CONSTANT_ENCAPSED_STRING","'custom_field'",163],",",["T_WHITESPACE","\n                ",163],["T_CONSTANT_ENCAPSED_STRING","'Consumer ID'",164],["T_WHITESPACE"," ",164],["T_DOUBLE_ARROW","=>",164],["T_WHITESPACE"," ",164],["T_CONSTANT_ENCAPSED_STRING","'consumer_id'",164],",",["T_WHITESPACE","\n                ",164],["T_CONSTANT_ENCAPSED_STRING","'Payment Tracking ID'",165],["T_WHITESPACE"," ",165],["T_DOUBLE_ARROW","=>",165],["T_WHITESPACE"," ",165],["T_CONSTANT_ENCAPSED_STRING","'payment_tracking_id'",165],",",["T_WHITESPACE","\n                ",165],["T_CONSTANT_ENCAPSED_STRING","'Store ID'",166],["T_WHITESPACE"," ",166],["T_DOUBLE_ARROW","=>",166],["T_WHITESPACE"," ",166],["T_CONSTANT_ENCAPSED_STRING","'store_id'",166],["T_WHITESPACE","\n            ",166],")",["T_WHITESPACE","\n        ",167],")",["T_WHITESPACE","\n    ",168],")",";",["T_WHITESPACE","\n    ",169],["T_DOC_COMMENT","\/**\n     * Initialize resource model\n     *\/",170],["T_WHITESPACE","\n    ",172],["T_PROTECTED","protected",173],["T_WHITESPACE"," ",173],["T_FUNCTION","function",173],["T_WHITESPACE"," ",173],["T_STRING","_construct",173],"(",")",["T_WHITESPACE","\n    ",173],"{",["T_WHITESPACE","\n        ",174],["T_VARIABLE","$this",175],["T_OBJECT_OPERATOR","->",175],["T_STRING","_init",175],"(",["T_CONSTANT_ENCAPSED_STRING","'paypal\/report_settlement'",175],")",";",["T_WHITESPACE","\n    ",175],"}",["T_WHITESPACE","\n\n    ",176],["T_DOC_COMMENT","\/**\n     * Stop saving process if file with same report date, account ID and last modified date was already ferched\n     *\n     * @return Mage_Core_Model_Abstract\n     *\/",178],["T_WHITESPACE","\n    ",182],["T_PROTECTED","protected",183],["T_WHITESPACE"," ",183],["T_FUNCTION","function",183],["T_WHITESPACE"," ",183],["T_STRING","_beforeSave",183],"(",")",["T_WHITESPACE","\n    ",183],"{",["T_WHITESPACE","\n        ",184],["T_VARIABLE","$this",185],["T_OBJECT_OPERATOR","->",185],["T_STRING","_dataSaveAllowed",185],["T_WHITESPACE"," ",185],"=",["T_WHITESPACE"," ",185],["T_STRING","true",185],";",["T_WHITESPACE","\n        ",185],["T_IF","if",186],["T_WHITESPACE"," ",186],"(",["T_VARIABLE","$this",186],["T_OBJECT_OPERATOR","->",186],["T_STRING","getId",186],"(",")",")",["T_WHITESPACE"," ",186],"{",["T_WHITESPACE","\n            ",186],["T_IF","if",187],["T_WHITESPACE"," ",187],"(",["T_VARIABLE","$this",187],["T_OBJECT_OPERATOR","->",187],["T_STRING","getLastModified",187],"(",")",["T_WHITESPACE"," ",187],["T_IS_EQUAL","==",187],["T_WHITESPACE"," ",187],["T_VARIABLE","$this",187],["T_OBJECT_OPERATOR","->",187],["T_STRING","getReportLastModified",187],"(",")",")",["T_WHITESPACE"," ",187],"{",["T_WHITESPACE","\n                ",187],["T_VARIABLE","$this",188],["T_OBJECT_OPERATOR","->",188],["T_STRING","_dataSaveAllowed",188],["T_WHITESPACE"," ",188],"=",["T_WHITESPACE"," ",188],["T_STRING","false",188],";",["T_WHITESPACE","\n            ",188],"}",["T_WHITESPACE","\n        ",189],"}",["T_WHITESPACE","\n        ",190],["T_VARIABLE","$this",191],["T_OBJECT_OPERATOR","->",191],["T_STRING","setLastModified",191],"(",["T_VARIABLE","$this",191],["T_OBJECT_OPERATOR","->",191],["T_STRING","getReportLastModified",191],"(",")",")",";",["T_WHITESPACE","\n        ",191],["T_RETURN","return",192],["T_WHITESPACE"," ",192],["T_STRING","parent",192],["T_DOUBLE_COLON","::",192],["T_STRING","_beforeSave",192],"(",")",";",["T_WHITESPACE","\n    ",192],"}",["T_WHITESPACE","\n\n    ",193],["T_DOC_COMMENT","\/**\n     * Goes to specified host\/path and fetches reports from there.\n     * Save reports to database.\n     *\n     * @param array $config SFTP credentials\n     * @return int Number of report rows that were fetched and saved successfully\n     *\/",195],["T_WHITESPACE","\n    ",201],["T_PUBLIC","public",202],["T_WHITESPACE"," ",202],["T_FUNCTION","function",202],["T_WHITESPACE"," ",202],["T_STRING","fetchAndSave",202],"(",["T_VARIABLE","$config",202],")",["T_WHITESPACE","\n    ",202],"{",["T_WHITESPACE","\n        ",203],["T_VARIABLE","$connection",204],["T_WHITESPACE"," ",204],"=",["T_WHITESPACE"," ",204],["T_NEW","new",204],["T_WHITESPACE"," ",204],["T_STRING","Varien_Io_Sftp",204],"(",")",";",["T_WHITESPACE","\n        ",204],["T_VARIABLE","$connection",205],["T_OBJECT_OPERATOR","->",205],["T_STRING","open",205],"(",["T_ARRAY","array",205],"(",["T_WHITESPACE","\n            ",205],["T_CONSTANT_ENCAPSED_STRING","'host'",206],["T_WHITESPACE","     ",206],["T_DOUBLE_ARROW","=>",206],["T_WHITESPACE"," ",206],["T_VARIABLE","$config",206],"[",["T_CONSTANT_ENCAPSED_STRING","'hostname'",206],"]",",",["T_WHITESPACE","\n            ",206],["T_CONSTANT_ENCAPSED_STRING","'username'",207],["T_WHITESPACE"," ",207],["T_DOUBLE_ARROW","=>",207],["T_WHITESPACE"," ",207],["T_VARIABLE","$config",207],"[",["T_CONSTANT_ENCAPSED_STRING","'username'",207],"]",",",["T_WHITESPACE","\n            ",207],["T_CONSTANT_ENCAPSED_STRING","'password'",208],["T_WHITESPACE"," ",208],["T_DOUBLE_ARROW","=>",208],["T_WHITESPACE"," ",208],["T_VARIABLE","$config",208],"[",["T_CONSTANT_ENCAPSED_STRING","'password'",208],"]",["T_WHITESPACE","\n        ",208],")",")",";",["T_WHITESPACE","\n        ",209],["T_VARIABLE","$connection",210],["T_OBJECT_OPERATOR","->",210],["T_STRING","cd",210],"(",["T_VARIABLE","$config",210],"[",["T_CONSTANT_ENCAPSED_STRING","'path'",210],"]",")",";",["T_WHITESPACE","\n        ",210],["T_VARIABLE","$fetched",211],["T_WHITESPACE"," ",211],"=",["T_WHITESPACE"," ",211],["T_LNUMBER","0",211],";",["T_WHITESPACE","\n        ",211],["T_VARIABLE","$listing",212],["T_WHITESPACE"," ",212],"=",["T_WHITESPACE"," ",212],["T_VARIABLE","$this",212],["T_OBJECT_OPERATOR","->",212],["T_STRING","_filterReportsList",212],"(",["T_VARIABLE","$connection",212],["T_OBJECT_OPERATOR","->",212],["T_STRING","rawls",212],"(",")",")",";",["T_WHITESPACE","\n        ",212],["T_FOREACH","foreach",213],["T_WHITESPACE"," ",213],"(",["T_VARIABLE","$listing",213],["T_WHITESPACE"," ",213],["T_AS","as",213],["T_WHITESPACE"," ",213],["T_VARIABLE","$filename",213],["T_WHITESPACE"," ",213],["T_DOUBLE_ARROW","=>",213],["T_WHITESPACE"," ",213],["T_VARIABLE","$attributes",213],")",["T_WHITESPACE"," ",213],"{",["T_WHITESPACE","\n            ",213],["T_VARIABLE","$localCsv",214],["T_WHITESPACE"," ",214],"=",["T_WHITESPACE"," ",214],["T_STRING","tempnam",214],"(",["T_STRING","Mage",214],["T_DOUBLE_COLON","::",214],["T_STRING","getConfig",214],"(",")",["T_OBJECT_OPERATOR","->",214],["T_STRING","getOptions",214],"(",")",["T_OBJECT_OPERATOR","->",214],["T_STRING","getTmpDir",214],"(",")",",",["T_WHITESPACE"," ",214],["T_CONSTANT_ENCAPSED_STRING","'PayPal_STL'",214],")",";",["T_WHITESPACE","\n            ",214],["T_IF","if",215],["T_WHITESPACE"," ",215],"(",["T_VARIABLE","$connection",215],["T_OBJECT_OPERATOR","->",215],["T_STRING","read",215],"(",["T_VARIABLE","$filename",215],",",["T_WHITESPACE"," ",215],["T_VARIABLE","$localCsv",215],")",")",["T_WHITESPACE"," ",215],"{",["T_WHITESPACE","\n                ",215],["T_IF","if",216],["T_WHITESPACE"," ",216],"(","!",["T_STRING","is_writable",216],"(",["T_VARIABLE","$localCsv",216],")",")",["T_WHITESPACE"," ",216],"{",["T_WHITESPACE","\n                    ",216],["T_STRING","Mage",217],["T_DOUBLE_COLON","::",217],["T_STRING","throwException",217],"(",["T_STRING","Mage",217],["T_DOUBLE_COLON","::",217],["T_STRING","helper",217],"(",["T_CONSTANT_ENCAPSED_STRING","'paypal'",217],")",["T_OBJECT_OPERATOR","->",217],["T_STRING","__",217],"(",["T_CONSTANT_ENCAPSED_STRING","'Cannot create target file for reading reports.'",217],")",")",";",["T_WHITESPACE","\n                ",217],"}",["T_WHITESPACE","\n\n                ",218],["T_VARIABLE","$encoded",220],["T_WHITESPACE"," ",220],"=",["T_WHITESPACE"," ",220],["T_STRING","file_get_contents",220],"(",["T_VARIABLE","$localCsv",220],")",";",["T_WHITESPACE","\n                ",220],["T_VARIABLE","$csvFormat",221],["T_WHITESPACE"," ",221],"=",["T_WHITESPACE"," ",221],["T_CONSTANT_ENCAPSED_STRING","'new'",221],";",["T_WHITESPACE","\n\n                ",221],["T_VARIABLE","$fileEncoding",223],["T_WHITESPACE"," ",223],"=",["T_WHITESPACE"," ",223],["T_STRING","mb_detect_encoding",223],"(",["T_VARIABLE","$encoded",223],")",";",["T_WHITESPACE","\n\n                ",223],["T_IF","if",225],["T_WHITESPACE"," ",225],"(",["T_STRING","self",225],["T_DOUBLE_COLON","::",225],["T_STRING","FILES_OUT_CHARSET",225],["T_WHITESPACE"," ",225],["T_IS_NOT_EQUAL","!=",225],["T_WHITESPACE"," ",225],["T_VARIABLE","$fileEncoding",225],")",["T_WHITESPACE"," ",225],"{",["T_WHITESPACE","\n                    ",225],["T_VARIABLE","$decoded",226],["T_WHITESPACE"," ",226],"=",["T_WHITESPACE"," ",226],"@",["T_STRING","iconv",226],"(",["T_VARIABLE","$fileEncoding",226],",",["T_WHITESPACE"," ",226],["T_STRING","self",226],["T_DOUBLE_COLON","::",226],["T_STRING","FILES_OUT_CHARSET",226],".",["T_CONSTANT_ENCAPSED_STRING","'\/\/IGNORE'",226],",",["T_WHITESPACE"," ",226],["T_VARIABLE","$encoded",226],")",";",["T_WHITESPACE","\n                    ",226],["T_STRING","file_put_contents",227],"(",["T_VARIABLE","$localCsv",227],",",["T_WHITESPACE"," ",227],["T_VARIABLE","$decoded",227],")",";",["T_WHITESPACE","\n                    ",227],["T_VARIABLE","$csvFormat",228],["T_WHITESPACE"," ",228],"=",["T_WHITESPACE"," ",228],["T_CONSTANT_ENCAPSED_STRING","'old'",228],";",["T_WHITESPACE","\n                ",228],"}",["T_WHITESPACE","\n\n                ",229],["T_COMMENT","\/\/ Set last modified date, this value will be overwritten during parsing\n",231],["T_WHITESPACE","                ",232],["T_IF","if",232],["T_WHITESPACE"," ",232],"(",["T_ISSET","isset",232],"(",["T_VARIABLE","$attributes",232],"[",["T_CONSTANT_ENCAPSED_STRING","'mtime'",232],"]",")",")",["T_WHITESPACE"," ",232],"{",["T_WHITESPACE","\n                    ",232],["T_VARIABLE","$lastModified",233],["T_WHITESPACE"," ",233],"=",["T_WHITESPACE"," ",233],["T_NEW","new",233],["T_WHITESPACE"," ",233],["T_STRING","Zend_Date",233],"(",["T_VARIABLE","$attributes",233],"[",["T_CONSTANT_ENCAPSED_STRING","'mtime'",233],"]",")",";",["T_WHITESPACE","\n                    ",233],["T_VARIABLE","$this",234],["T_OBJECT_OPERATOR","->",234],["T_STRING","setReportLastModified",234],"(",["T_VARIABLE","$lastModified",234],["T_OBJECT_OPERATOR","->",234],["T_STRING","toString",234],"(",["T_STRING","Varien_Date",234],["T_DOUBLE_COLON","::",234],["T_STRING","DATETIME_INTERNAL_FORMAT",234],")",")",";",["T_WHITESPACE","\n                ",234],"}",["T_WHITESPACE","\n\n                ",235],["T_VARIABLE","$this",237],["T_OBJECT_OPERATOR","->",237],["T_STRING","setReportDate",237],"(",["T_VARIABLE","$this",237],["T_OBJECT_OPERATOR","->",237],["T_STRING","_fileNameToDate",237],"(",["T_VARIABLE","$filename",237],")",")",["T_WHITESPACE","\n                    ",237],["T_OBJECT_OPERATOR","->",238],["T_STRING","setFilename",238],"(",["T_VARIABLE","$filename",238],")",["T_WHITESPACE","\n                    ",238],["T_OBJECT_OPERATOR","->",239],["T_STRING","parseCsv",239],"(",["T_VARIABLE","$localCsv",239],",",["T_WHITESPACE"," ",239],["T_VARIABLE","$csvFormat",239],")",";",["T_WHITESPACE","\n\n                ",239],["T_IF","if",241],["T_WHITESPACE"," ",241],"(",["T_VARIABLE","$this",241],["T_OBJECT_OPERATOR","->",241],["T_STRING","getAccountId",241],"(",")",")",["T_WHITESPACE"," ",241],"{",["T_WHITESPACE","\n                    ",241],["T_VARIABLE","$this",242],["T_OBJECT_OPERATOR","->",242],["T_STRING","save",242],"(",")",";",["T_WHITESPACE","\n                ",242],"}",["T_WHITESPACE","\n\n                ",243],["T_IF","if",245],["T_WHITESPACE"," ",245],"(",["T_VARIABLE","$this",245],["T_OBJECT_OPERATOR","->",245],["T_STRING","_dataSaveAllowed",245],")",["T_WHITESPACE"," ",245],"{",["T_WHITESPACE","\n                    ",245],["T_VARIABLE","$fetched",246],["T_WHITESPACE"," ",246],["T_PLUS_EQUAL","+=",246],["T_WHITESPACE"," ",246],["T_STRING","count",246],"(",["T_VARIABLE","$this",246],["T_OBJECT_OPERATOR","->",246],["T_STRING","_rows",246],")",";",["T_WHITESPACE","\n                ",246],"}",["T_WHITESPACE","\n                ",247],["T_COMMENT","\/\/ clean object and remove parsed file\n",248],["T_WHITESPACE","                ",249],["T_VARIABLE","$this",249],["T_OBJECT_OPERATOR","->",249],["T_STRING","unsetData",249],"(",")",";",["T_WHITESPACE","\n                ",249],["T_STRING","unlink",250],"(",["T_VARIABLE","$localCsv",250],")",";",["T_WHITESPACE","\n            ",250],"}",["T_WHITESPACE","\n        ",251],"}",["T_WHITESPACE","\n        ",252],["T_RETURN","return",253],["T_WHITESPACE"," ",253],["T_VARIABLE","$fetched",253],";",["T_WHITESPACE","\n    ",253],"}",["T_WHITESPACE","\n\n    ",254],["T_DOC_COMMENT","\/**\n     * Parse CSV file and collect report rows\n     *\n     * @param string $localCsv Path to CSV file\n     * @param string $format CSV format(column names)\n     * @return Mage_Paypal_Model_Report_Settlement\n     *\/",256],["T_WHITESPACE","\n    ",262],["T_PUBLIC","public",263],["T_WHITESPACE"," ",263],["T_FUNCTION","function",263],["T_WHITESPACE"," ",263],["T_STRING","parseCsv",263],"(",["T_VARIABLE","$localCsv",263],",",["T_WHITESPACE"," ",263],["T_VARIABLE","$format",263],["T_WHITESPACE"," ",263],"=",["T_WHITESPACE"," ",263],["T_CONSTANT_ENCAPSED_STRING","'new'",263],")",["T_WHITESPACE","\n    ",263],"{",["T_WHITESPACE","\n        ",264],["T_VARIABLE","$this",265],["T_OBJECT_OPERATOR","->",265],["T_STRING","_rows",265],["T_WHITESPACE"," ",265],"=",["T_WHITESPACE"," ",265],["T_ARRAY","array",265],"(",")",";",["T_WHITESPACE","\n\n        ",265],["T_VARIABLE","$sectionColumns",267],["T_WHITESPACE"," ",267],"=",["T_WHITESPACE"," ",267],["T_VARIABLE","$this",267],["T_OBJECT_OPERATOR","->",267],["T_STRING","_csvColumns",267],"[",["T_VARIABLE","$format",267],"]","[",["T_CONSTANT_ENCAPSED_STRING","'section_columns'",267],"]",";",["T_WHITESPACE","\n        ",267],["T_VARIABLE","$rowMap",268],["T_WHITESPACE"," ",268],"=",["T_WHITESPACE"," ",268],["T_VARIABLE","$this",268],["T_OBJECT_OPERATOR","->",268],["T_STRING","_csvColumns",268],"[",["T_VARIABLE","$format",268],"]","[",["T_CONSTANT_ENCAPSED_STRING","'rowmap'",268],"]",";",["T_WHITESPACE","\n\n        ",268],["T_VARIABLE","$flippedSectionColumns",270],["T_WHITESPACE"," ",270],"=",["T_WHITESPACE"," ",270],["T_STRING","array_flip",270],"(",["T_VARIABLE","$sectionColumns",270],")",";",["T_WHITESPACE","\n        ",270],["T_VARIABLE","$fp",271],["T_WHITESPACE"," ",271],"=",["T_WHITESPACE"," ",271],["T_STRING","fopen",271],"(",["T_VARIABLE","$localCsv",271],",",["T_WHITESPACE"," ",271],["T_CONSTANT_ENCAPSED_STRING","'r'",271],")",";",["T_WHITESPACE","\n        ",271],["T_WHILE","while",272],"(",["T_VARIABLE","$line",272],["T_WHITESPACE"," ",272],"=",["T_WHITESPACE"," ",272],["T_STRING","fgetcsv",272],"(",["T_VARIABLE","$fp",272],")",")",["T_WHITESPACE"," ",272],"{",["T_WHITESPACE","\n            ",272],["T_IF","if",273],["T_WHITESPACE"," ",273],"(",["T_EMPTY","empty",273],"(",["T_VARIABLE","$line",273],")",")",["T_WHITESPACE"," ",273],"{",["T_WHITESPACE"," ",273],["T_COMMENT","\/\/ The line was empty, so skip it.\n",273],["T_WHITESPACE","                ",274],["T_CONTINUE","continue",274],";",["T_WHITESPACE","\n            ",274],"}",["T_WHITESPACE","\n            ",275],["T_VARIABLE","$lineType",276],["T_WHITESPACE"," ",276],"=",["T_WHITESPACE"," ",276],["T_VARIABLE","$line",276],"[",["T_LNUMBER","0",276],"]",";",["T_WHITESPACE","\n            ",276],["T_SWITCH","switch",277],"(",["T_VARIABLE","$lineType",277],")",["T_WHITESPACE"," ",277],"{",["T_WHITESPACE","\n                ",277],["T_CASE","case",278],["T_WHITESPACE"," ",278],["T_CONSTANT_ENCAPSED_STRING","'RH'",278],":",["T_WHITESPACE"," ",278],["T_COMMENT","\/\/ Report header.\n",278],["T_WHITESPACE","                    ",279],["T_VARIABLE","$lastModified",279],["T_WHITESPACE"," ",279],"=",["T_WHITESPACE"," ",279],["T_NEW","new",279],["T_WHITESPACE"," ",279],["T_STRING","Zend_Date",279],"(",["T_VARIABLE","$line",279],"[",["T_LNUMBER","1",279],"]",")",";",["T_WHITESPACE","\n                    ",279],["T_VARIABLE","$this",280],["T_OBJECT_OPERATOR","->",280],["T_STRING","setReportLastModified",280],"(",["T_VARIABLE","$lastModified",280],["T_OBJECT_OPERATOR","->",280],["T_STRING","toString",280],"(",["T_STRING","Varien_Date",280],["T_DOUBLE_COLON","::",280],["T_STRING","DATETIME_INTERNAL_FORMAT",280],")",")",";",["T_WHITESPACE","\n                    ",280],["T_COMMENT","\/\/$this->setAccountId($columns[2]); -- probably we'll just take that from the section header...\n",281],["T_WHITESPACE","                    ",282],["T_BREAK","break",282],";",["T_WHITESPACE","\n                ",282],["T_CASE","case",283],["T_WHITESPACE"," ",283],["T_CONSTANT_ENCAPSED_STRING","'FH'",283],":",["T_WHITESPACE"," ",283],["T_COMMENT","\/\/ File header.\n",283],["T_WHITESPACE","                    ",284],["T_COMMENT","\/\/ Nothing interesting here, move along\n",284],["T_WHITESPACE","                    ",285],["T_BREAK","break",285],";",["T_WHITESPACE","\n                ",285],["T_CASE","case",286],["T_WHITESPACE"," ",286],["T_CONSTANT_ENCAPSED_STRING","'SH'",286],":",["T_WHITESPACE"," ",286],["T_COMMENT","\/\/ Section header.\n",286],["T_WHITESPACE","                    ",287],["T_VARIABLE","$this",287],["T_OBJECT_OPERATOR","->",287],["T_STRING","setAccountId",287],"(",["T_VARIABLE","$line",287],"[",["T_LNUMBER","3",287],"]",")",";",["T_WHITESPACE","\n                    ",287],["T_VARIABLE","$this",288],["T_OBJECT_OPERATOR","->",288],["T_STRING","loadByAccountAndDate",288],"(",")",";",["T_WHITESPACE","\n                    ",288],["T_BREAK","break",289],";",["T_WHITESPACE","\n                ",289],["T_CASE","case",290],["T_WHITESPACE"," ",290],["T_CONSTANT_ENCAPSED_STRING","'CH'",290],":",["T_WHITESPACE"," ",290],["T_COMMENT","\/\/ Section columns.\n",290],["T_WHITESPACE","                    ",291],["T_COMMENT","\/\/ In case ever the column order is changed, we will have the items recorded properly\n",291],["T_WHITESPACE","                    ",292],["T_COMMENT","\/\/ anyway. We have named, not numbered columns.\n",292],["T_WHITESPACE","                    ",293],["T_FOR","for",293],["T_WHITESPACE"," ",293],"(",["T_VARIABLE","$i",293],["T_WHITESPACE"," ",293],"=",["T_WHITESPACE"," ",293],["T_LNUMBER","1",293],";",["T_WHITESPACE"," ",293],["T_VARIABLE","$i",293],["T_WHITESPACE"," ",293],"<",["T_WHITESPACE"," ",293],["T_STRING","count",293],"(",["T_VARIABLE","$line",293],")",";",["T_WHITESPACE"," ",293],["T_VARIABLE","$i",293],["T_INC","++",293],")",["T_WHITESPACE"," ",293],"{",["T_WHITESPACE","\n                        ",293],["T_VARIABLE","$sectionColumns",294],"[",["T_VARIABLE","$line",294],"[",["T_VARIABLE","$i",294],"]","]",["T_WHITESPACE"," ",294],"=",["T_WHITESPACE"," ",294],["T_VARIABLE","$i",294],";",["T_WHITESPACE","\n                    ",294],"}",["T_WHITESPACE","\n                    ",295],["T_VARIABLE","$flippedSectionColumns",296],["T_WHITESPACE"," ",296],"=",["T_WHITESPACE"," ",296],["T_STRING","array_flip",296],"(",["T_VARIABLE","$sectionColumns",296],")",";",["T_WHITESPACE","\n                    ",296],["T_BREAK","break",297],";",["T_WHITESPACE","\n                ",297],["T_CASE","case",298],["T_WHITESPACE"," ",298],["T_CONSTANT_ENCAPSED_STRING","'SB'",298],":",["T_WHITESPACE"," ",298],["T_COMMENT","\/\/ Section body.\n",298],["T_WHITESPACE","                    ",299],["T_VARIABLE","$bodyItem",299],["T_WHITESPACE"," ",299],"=",["T_WHITESPACE"," ",299],["T_ARRAY","array",299],"(",")",";",["T_WHITESPACE","\n                    ",299],["T_FOR","for",300],"(",["T_VARIABLE","$i",300],["T_WHITESPACE"," ",300],"=",["T_WHITESPACE"," ",300],["T_LNUMBER","1",300],";",["T_WHITESPACE"," ",300],["T_VARIABLE","$i",300],["T_WHITESPACE"," ",300],"<",["T_WHITESPACE"," ",300],["T_STRING","count",300],"(",["T_VARIABLE","$line",300],")",";",["T_WHITESPACE"," ",300],["T_VARIABLE","$i",300],["T_INC","++",300],")",["T_WHITESPACE"," ",300],"{",["T_WHITESPACE","\n                        ",300],["T_VARIABLE","$bodyItem",301],"[",["T_VARIABLE","$rowMap",301],"[",["T_VARIABLE","$flippedSectionColumns",301],"[",["T_VARIABLE","$i",301],"]","]","]",["T_WHITESPACE"," ",301],"=",["T_WHITESPACE"," ",301],["T_VARIABLE","$line",301],"[",["T_VARIABLE","$i",301],"]",";",["T_WHITESPACE","\n                    ",301],"}",["T_WHITESPACE","\n                    ",302],["T_VARIABLE","$this",303],["T_OBJECT_OPERATOR","->",303],["T_STRING","_rows",303],"[","]",["T_WHITESPACE"," ",303],"=",["T_WHITESPACE"," ",303],["T_VARIABLE","$bodyItem",303],";",["T_WHITESPACE","\n                    ",303],["T_BREAK","break",304],";",["T_WHITESPACE","\n                ",304],["T_CASE","case",305],["T_WHITESPACE"," ",305],["T_CONSTANT_ENCAPSED_STRING","'SC'",305],":",["T_WHITESPACE"," ",305],["T_COMMENT","\/\/ Section records count.\n",305],["T_WHITESPACE","                ",306],["T_CASE","case",306],["T_WHITESPACE"," ",306],["T_CONSTANT_ENCAPSED_STRING","'RC'",306],":",["T_WHITESPACE"," ",306],["T_COMMENT","\/\/ Report records count.\n",306],["T_WHITESPACE","                ",307],["T_CASE","case",307],["T_WHITESPACE"," ",307],["T_CONSTANT_ENCAPSED_STRING","'SF'",307],":",["T_WHITESPACE"," ",307],["T_COMMENT","\/\/ Section footer.\n",307],["T_WHITESPACE","                ",308],["T_CASE","case",308],["T_WHITESPACE"," ",308],["T_CONSTANT_ENCAPSED_STRING","'FF'",308],":",["T_WHITESPACE"," ",308],["T_COMMENT","\/\/ File footer.\n",308],["T_WHITESPACE","                ",309],["T_CASE","case",309],["T_WHITESPACE"," ",309],["T_CONSTANT_ENCAPSED_STRING","'RF'",309],":",["T_WHITESPACE"," ",309],["T_COMMENT","\/\/ Report footer.\n",309],["T_WHITESPACE","                    ",310],["T_COMMENT","\/\/ Nothing to see here, move along\n",310],["T_WHITESPACE","                    ",311],["T_BREAK","break",311],";",["T_WHITESPACE","\n            ",311],"}",["T_WHITESPACE","\n        ",312],"}",["T_WHITESPACE","\n        ",313],["T_RETURN","return",314],["T_WHITESPACE"," ",314],["T_VARIABLE","$this",314],";",["T_WHITESPACE","\n    ",314],"}",["T_WHITESPACE","\n\n    ",315],["T_DOC_COMMENT","\/**\n     * Load report by unique key (accoutn + report date)\n     *\n     * @return Mage_Paypal_Model_Report_Settlement\n     *\/",317],["T_WHITESPACE","\n    ",321],["T_PUBLIC","public",322],["T_WHITESPACE"," ",322],["T_FUNCTION","function",322],["T_WHITESPACE"," ",322],["T_STRING","loadByAccountAndDate",322],"(",")",["T_WHITESPACE","\n    ",322],"{",["T_WHITESPACE","\n        ",323],["T_VARIABLE","$this",324],["T_OBJECT_OPERATOR","->",324],["T_STRING","getResource",324],"(",")",["T_OBJECT_OPERATOR","->",324],["T_STRING","loadByAccountAndDate",324],"(",["T_VARIABLE","$this",324],",",["T_WHITESPACE"," ",324],["T_VARIABLE","$this",324],["T_OBJECT_OPERATOR","->",324],["T_STRING","getAccountId",324],"(",")",",",["T_WHITESPACE"," ",324],["T_VARIABLE","$this",324],["T_OBJECT_OPERATOR","->",324],["T_STRING","getReportDate",324],"(",")",")",";",["T_WHITESPACE","\n        ",324],["T_RETURN","return",325],["T_WHITESPACE"," ",325],["T_VARIABLE","$this",325],";",["T_WHITESPACE","\n    ",325],"}",["T_WHITESPACE","\n\n    ",326],["T_DOC_COMMENT","\/**\n     * Return collected rows for further processing.\n     *\n     * @return array\n     *\/",328],["T_WHITESPACE","\n    ",332],["T_PUBLIC","public",333],["T_WHITESPACE"," ",333],["T_FUNCTION","function",333],["T_WHITESPACE"," ",333],["T_STRING","getRows",333],"(",")",["T_WHITESPACE","\n    ",333],"{",["T_WHITESPACE","\n        ",334],["T_RETURN","return",335],["T_WHITESPACE"," ",335],["T_VARIABLE","$this",335],["T_OBJECT_OPERATOR","->",335],["T_STRING","_rows",335],";",["T_WHITESPACE","\n    ",335],"}",["T_WHITESPACE","\n\n    ",336],["T_DOC_COMMENT","\/**\n     * Return name for row column\n     *\n     * @param string $field Field name in row model\n     * @return string\n     *\/",338],["T_WHITESPACE","\n    ",343],["T_PUBLIC","public",344],["T_WHITESPACE"," ",344],["T_FUNCTION","function",344],["T_WHITESPACE"," ",344],["T_STRING","getFieldLabel",344],"(",["T_VARIABLE","$field",344],")",["T_WHITESPACE","\n    ",344],"{",["T_WHITESPACE","\n        ",345],["T_SWITCH","switch",346],["T_WHITESPACE"," ",346],"(",["T_VARIABLE","$field",346],")",["T_WHITESPACE"," ",346],"{",["T_WHITESPACE","\n            ",346],["T_CASE","case",347],["T_WHITESPACE"," ",347],["T_CONSTANT_ENCAPSED_STRING","'report_date'",347],":",["T_WHITESPACE","\n                ",347],["T_RETURN","return",348],["T_WHITESPACE"," ",348],["T_STRING","Mage",348],["T_DOUBLE_COLON","::",348],["T_STRING","helper",348],"(",["T_CONSTANT_ENCAPSED_STRING","'paypal'",348],")",["T_OBJECT_OPERATOR","->",348],["T_STRING","__",348],"(",["T_CONSTANT_ENCAPSED_STRING","'Report Date'",348],")",";",["T_WHITESPACE","\n            ",348],["T_CASE","case",349],["T_WHITESPACE"," ",349],["T_CONSTANT_ENCAPSED_STRING","'account_id'",349],":",["T_WHITESPACE","\n                ",349],["T_RETURN","return",350],["T_WHITESPACE"," ",350],["T_STRING","Mage",350],["T_DOUBLE_COLON","::",350],["T_STRING","helper",350],"(",["T_CONSTANT_ENCAPSED_STRING","'paypal'",350],")",["T_OBJECT_OPERATOR","->",350],["T_STRING","__",350],"(",["T_CONSTANT_ENCAPSED_STRING","'Merchant Account'",350],")",";",["T_WHITESPACE","\n            ",350],["T_CASE","case",351],["T_WHITESPACE"," ",351],["T_CONSTANT_ENCAPSED_STRING","'transaction_id'",351],":",["T_WHITESPACE","\n                ",351],["T_RETURN","return",352],["T_WHITESPACE"," ",352],["T_STRING","Mage",352],["T_DOUBLE_COLON","::",352],["T_STRING","helper",352],"(",["T_CONSTANT_ENCAPSED_STRING","'paypal'",352],")",["T_OBJECT_OPERATOR","->",352],["T_STRING","__",352],"(",["T_CONSTANT_ENCAPSED_STRING","'Transaction ID'",352],")",";",["T_WHITESPACE","\n            ",352],["T_CASE","case",353],["T_WHITESPACE"," ",353],["T_CONSTANT_ENCAPSED_STRING","'invoice_id'",353],":",["T_WHITESPACE","\n                ",353],["T_RETURN","return",354],["T_WHITESPACE"," ",354],["T_STRING","Mage",354],["T_DOUBLE_COLON","::",354],["T_STRING","helper",354],"(",["T_CONSTANT_ENCAPSED_STRING","'paypal'",354],")",["T_OBJECT_OPERATOR","->",354],["T_STRING","__",354],"(",["T_CONSTANT_ENCAPSED_STRING","'Invoice ID'",354],")",";",["T_WHITESPACE","\n            ",354],["T_CASE","case",355],["T_WHITESPACE"," ",355],["T_CONSTANT_ENCAPSED_STRING","'paypal_reference_id'",355],":",["T_WHITESPACE","\n                ",355],["T_RETURN","return",356],["T_WHITESPACE"," ",356],["T_STRING","Mage",356],["T_DOUBLE_COLON","::",356],["T_STRING","helper",356],"(",["T_CONSTANT_ENCAPSED_STRING","'paypal'",356],")",["T_OBJECT_OPERATOR","->",356],["T_STRING","__",356],"(",["T_CONSTANT_ENCAPSED_STRING","'PayPal Reference ID'",356],")",";",["T_WHITESPACE","\n            ",356],["T_CASE","case",357],["T_WHITESPACE"," ",357],["T_CONSTANT_ENCAPSED_STRING","'paypal_reference_id_type'",357],":",["T_WHITESPACE","\n                ",357],["T_RETURN","return",358],["T_WHITESPACE"," ",358],["T_STRING","Mage",358],["T_DOUBLE_COLON","::",358],["T_STRING","helper",358],"(",["T_CONSTANT_ENCAPSED_STRING","'paypal'",358],")",["T_OBJECT_OPERATOR","->",358],["T_STRING","__",358],"(",["T_CONSTANT_ENCAPSED_STRING","'PayPal Reference ID Type'",358],")",";",["T_WHITESPACE","\n            ",358],["T_CASE","case",359],["T_WHITESPACE"," ",359],["T_CONSTANT_ENCAPSED_STRING","'transaction_event_code'",359],":",["T_WHITESPACE","\n                ",359],["T_RETURN","return",360],["T_WHITESPACE"," ",360],["T_STRING","Mage",360],["T_DOUBLE_COLON","::",360],["T_STRING","helper",360],"(",["T_CONSTANT_ENCAPSED_STRING","'paypal'",360],")",["T_OBJECT_OPERATOR","->",360],["T_STRING","__",360],"(",["T_CONSTANT_ENCAPSED_STRING","'Event Code'",360],")",";",["T_WHITESPACE","\n            ",360],["T_CASE","case",361],["T_WHITESPACE"," ",361],["T_CONSTANT_ENCAPSED_STRING","'transaction_event'",361],":",["T_WHITESPACE","\n                ",361],["T_RETURN","return",362],["T_WHITESPACE"," ",362],["T_STRING","Mage",362],["T_DOUBLE_COLON","::",362],["T_STRING","helper",362],"(",["T_CONSTANT_ENCAPSED_STRING","'paypal'",362],")",["T_OBJECT_OPERATOR","->",362],["T_STRING","__",362],"(",["T_CONSTANT_ENCAPSED_STRING","'Event'",362],")",";",["T_WHITESPACE","\n            ",362],["T_CASE","case",363],["T_WHITESPACE"," ",363],["T_CONSTANT_ENCAPSED_STRING","'transaction_initiation_date'",363],":",["T_WHITESPACE","\n                ",363],["T_RETURN","return",364],["T_WHITESPACE"," ",364],["T_STRING","Mage",364],["T_DOUBLE_COLON","::",364],["T_STRING","helper",364],"(",["T_CONSTANT_ENCAPSED_STRING","'paypal'",364],")",["T_OBJECT_OPERATOR","->",364],["T_STRING","__",364],"(",["T_CONSTANT_ENCAPSED_STRING","'Initiation Date'",364],")",";",["T_WHITESPACE","\n            ",364],["T_CASE","case",365],["T_WHITESPACE"," ",365],["T_CONSTANT_ENCAPSED_STRING","'transaction_completion_date'",365],":",["T_WHITESPACE","\n                ",365],["T_RETURN","return",366],["T_WHITESPACE"," ",366],["T_STRING","Mage",366],["T_DOUBLE_COLON","::",366],["T_STRING","helper",366],"(",["T_CONSTANT_ENCAPSED_STRING","'paypal'",366],")",["T_OBJECT_OPERATOR","->",366],["T_STRING","__",366],"(",["T_CONSTANT_ENCAPSED_STRING","'Completion Date'",366],")",";",["T_WHITESPACE","\n            ",366],["T_CASE","case",367],["T_WHITESPACE"," ",367],["T_CONSTANT_ENCAPSED_STRING","'transaction_debit_or_credit'",367],":",["T_WHITESPACE","\n                ",367],["T_RETURN","return",368],["T_WHITESPACE"," ",368],["T_STRING","Mage",368],["T_DOUBLE_COLON","::",368],["T_STRING","helper",368],"(",["T_CONSTANT_ENCAPSED_STRING","'paypal'",368],")",["T_OBJECT_OPERATOR","->",368],["T_STRING","__",368],"(",["T_CONSTANT_ENCAPSED_STRING","'Debit or Credit'",368],")",";",["T_WHITESPACE","\n            ",368],["T_CASE","case",369],["T_WHITESPACE"," ",369],["T_CONSTANT_ENCAPSED_STRING","'gross_transaction_amount'",369],":",["T_WHITESPACE","\n                ",369],["T_RETURN","return",370],["T_WHITESPACE"," ",370],["T_STRING","Mage",370],["T_DOUBLE_COLON","::",370],["T_STRING","helper",370],"(",["T_CONSTANT_ENCAPSED_STRING","'paypal'",370],")",["T_OBJECT_OPERATOR","->",370],["T_STRING","__",370],"(",["T_CONSTANT_ENCAPSED_STRING","'Gross Amount'",370],")",";",["T_WHITESPACE","\n            ",370],["T_CASE","case",371],["T_WHITESPACE"," ",371],["T_CONSTANT_ENCAPSED_STRING","'fee_debit_or_credit'",371],":",["T_WHITESPACE","\n                ",371],["T_RETURN","return",372],["T_WHITESPACE"," ",372],["T_STRING","Mage",372],["T_DOUBLE_COLON","::",372],["T_STRING","helper",372],"(",["T_CONSTANT_ENCAPSED_STRING","'paypal'",372],")",["T_OBJECT_OPERATOR","->",372],["T_STRING","__",372],"(",["T_CONSTANT_ENCAPSED_STRING","'Fee Debit or Credit'",372],")",";",["T_WHITESPACE","\n            ",372],["T_CASE","case",373],["T_WHITESPACE"," ",373],["T_CONSTANT_ENCAPSED_STRING","'fee_amount'",373],":",["T_WHITESPACE","\n                ",373],["T_RETURN","return",374],["T_WHITESPACE"," ",374],["T_STRING","Mage",374],["T_DOUBLE_COLON","::",374],["T_STRING","helper",374],"(",["T_CONSTANT_ENCAPSED_STRING","'paypal'",374],")",["T_OBJECT_OPERATOR","->",374],["T_STRING","__",374],"(",["T_CONSTANT_ENCAPSED_STRING","'Fee Amount'",374],")",";",["T_WHITESPACE","\n            ",374],["T_CASE","case",375],["T_WHITESPACE"," ",375],["T_CONSTANT_ENCAPSED_STRING","'custom_field'",375],":",["T_WHITESPACE","\n                ",375],["T_RETURN","return",376],["T_WHITESPACE"," ",376],["T_STRING","Mage",376],["T_DOUBLE_COLON","::",376],["T_STRING","helper",376],"(",["T_CONSTANT_ENCAPSED_STRING","'paypal'",376],")",["T_OBJECT_OPERATOR","->",376],["T_STRING","__",376],"(",["T_CONSTANT_ENCAPSED_STRING","'Custom'",376],")",";",["T_WHITESPACE","\n            ",376],["T_DEFAULT","default",377],":",["T_WHITESPACE","\n                ",377],["T_RETURN","return",378],["T_WHITESPACE"," ",378],["T_VARIABLE","$field",378],";",["T_WHITESPACE","\n        ",378],"}",["T_WHITESPACE","\n    ",379],"}",["T_WHITESPACE","\n\n    ",380],["T_DOC_COMMENT","\/**\n     * Iterate through website configurations and collect all SFTP configurations\n     * Filter config values if necessary\n     *\n     * @param bool $automaticMode Whether to skip settings with disabled Automatic Fetching or not\n     * @return array\n     *\/",382],["T_WHITESPACE","\n    ",388],["T_PUBLIC","public",389],["T_WHITESPACE"," ",389],["T_FUNCTION","function",389],["T_WHITESPACE"," ",389],["T_STRING","getSftpCredentials",389],"(",["T_VARIABLE","$automaticMode",389],["T_WHITESPACE"," ",389],"=",["T_WHITESPACE"," ",389],["T_STRING","false",389],")",["T_WHITESPACE","\n    ",389],"{",["T_WHITESPACE","\n        ",390],["T_VARIABLE","$configs",391],["T_WHITESPACE"," ",391],"=",["T_WHITESPACE"," ",391],["T_ARRAY","array",391],"(",")",";",["T_WHITESPACE","\n        ",391],["T_VARIABLE","$uniques",392],["T_WHITESPACE"," ",392],"=",["T_WHITESPACE"," ",392],["T_ARRAY","array",392],"(",")",";",["T_WHITESPACE","\n        ",392],["T_FOREACH","foreach",393],"(",["T_STRING","Mage",393],["T_DOUBLE_COLON","::",393],["T_STRING","app",393],"(",")",["T_OBJECT_OPERATOR","->",393],["T_STRING","getStores",393],"(",")",["T_WHITESPACE"," ",393],["T_AS","as",393],["T_WHITESPACE"," ",393],["T_VARIABLE","$store",393],")",["T_WHITESPACE"," ",393],"{",["T_WHITESPACE","\n            ",393],["T_COMMENT","\/*@var $store Mage_Core_Model_Store *\/",394],["T_WHITESPACE","\n            ",394],["T_VARIABLE","$active",395],["T_WHITESPACE"," ",395],"=",["T_WHITESPACE"," ",395],["T_BOOL_CAST","(bool)",395],["T_VARIABLE","$store",395],["T_OBJECT_OPERATOR","->",395],["T_STRING","getConfig",395],"(",["T_CONSTANT_ENCAPSED_STRING","'paypal\/fetch_reports\/active'",395],")",";",["T_WHITESPACE","\n            ",395],["T_IF","if",396],["T_WHITESPACE"," ",396],"(","!",["T_VARIABLE","$active",396],["T_WHITESPACE"," ",396],["T_BOOLEAN_AND","&&",396],["T_WHITESPACE"," ",396],["T_VARIABLE","$automaticMode",396],")",["T_WHITESPACE"," ",396],"{",["T_WHITESPACE","\n                ",396],["T_CONTINUE","continue",397],";",["T_WHITESPACE","\n            ",397],"}",["T_WHITESPACE","\n            ",398],["T_VARIABLE","$cfg",399],["T_WHITESPACE"," ",399],"=",["T_WHITESPACE"," ",399],["T_ARRAY","array",399],"(",["T_WHITESPACE","\n                ",399],["T_CONSTANT_ENCAPSED_STRING","'hostname'",400],["T_WHITESPACE","  ",400],["T_DOUBLE_ARROW","=>",400],["T_WHITESPACE"," ",400],["T_VARIABLE","$store",400],["T_OBJECT_OPERATOR","->",400],["T_STRING","getConfig",400],"(",["T_CONSTANT_ENCAPSED_STRING","'paypal\/fetch_reports\/ftp_ip'",400],")",",",["T_WHITESPACE","\n                ",400],["T_CONSTANT_ENCAPSED_STRING","'path'",401],["T_WHITESPACE","      ",401],["T_DOUBLE_ARROW","=>",401],["T_WHITESPACE"," ",401],["T_VARIABLE","$store",401],["T_OBJECT_OPERATOR","->",401],["T_STRING","getConfig",401],"(",["T_CONSTANT_ENCAPSED_STRING","'paypal\/fetch_reports\/ftp_path'",401],")",",",["T_WHITESPACE","\n                ",401],["T_CONSTANT_ENCAPSED_STRING","'username'",402],["T_WHITESPACE","  ",402],["T_DOUBLE_ARROW","=>",402],["T_WHITESPACE"," ",402],["T_VARIABLE","$store",402],["T_OBJECT_OPERATOR","->",402],["T_STRING","getConfig",402],"(",["T_CONSTANT_ENCAPSED_STRING","'paypal\/fetch_reports\/ftp_login'",402],")",",",["T_WHITESPACE","\n                ",402],["T_CONSTANT_ENCAPSED_STRING","'password'",403],["T_WHITESPACE","  ",403],["T_DOUBLE_ARROW","=>",403],["T_WHITESPACE"," ",403],["T_VARIABLE","$store",403],["T_OBJECT_OPERATOR","->",403],["T_STRING","getConfig",403],"(",["T_CONSTANT_ENCAPSED_STRING","'paypal\/fetch_reports\/ftp_password'",403],")",",",["T_WHITESPACE","\n                ",403],["T_CONSTANT_ENCAPSED_STRING","'sandbox'",404],["T_WHITESPACE","   ",404],["T_DOUBLE_ARROW","=>",404],["T_WHITESPACE"," ",404],["T_VARIABLE","$store",404],["T_OBJECT_OPERATOR","->",404],["T_STRING","getConfig",404],"(",["T_CONSTANT_ENCAPSED_STRING","'paypal\/fetch_reports\/ftp_sandbox'",404],")",",",["T_WHITESPACE","\n            ",404],")",";",["T_WHITESPACE","\n            ",405],["T_IF","if",406],["T_WHITESPACE"," ",406],"(",["T_EMPTY","empty",406],"(",["T_VARIABLE","$cfg",406],"[",["T_CONSTANT_ENCAPSED_STRING","'username'",406],"]",")",["T_WHITESPACE"," ",406],["T_BOOLEAN_OR","||",406],["T_WHITESPACE"," ",406],["T_EMPTY","empty",406],"(",["T_VARIABLE","$cfg",406],"[",["T_CONSTANT_ENCAPSED_STRING","'password'",406],"]",")",")",["T_WHITESPACE"," ",406],"{",["T_WHITESPACE","\n                ",406],["T_CONTINUE","continue",407],";",["T_WHITESPACE","\n            ",407],"}",["T_WHITESPACE","\n            ",408],["T_IF","if",409],["T_WHITESPACE"," ",409],"(",["T_EMPTY","empty",409],"(",["T_VARIABLE","$cfg",409],"[",["T_CONSTANT_ENCAPSED_STRING","'hostname'",409],"]",")",["T_WHITESPACE"," ",409],["T_BOOLEAN_OR","||",409],["T_WHITESPACE"," ",409],["T_VARIABLE","$cfg",409],"[",["T_CONSTANT_ENCAPSED_STRING","'sandbox'",409],"]",")",["T_WHITESPACE"," ",409],"{",["T_WHITESPACE","\n                ",409],["T_VARIABLE","$cfg",410],"[",["T_CONSTANT_ENCAPSED_STRING","'hostname'",410],"]",["T_WHITESPACE"," ",410],"=",["T_WHITESPACE"," ",410],["T_VARIABLE","$cfg",410],"[",["T_CONSTANT_ENCAPSED_STRING","'sandbox'",410],"]",["T_WHITESPACE"," ",410],"?",["T_WHITESPACE"," ",410],["T_STRING","self",410],["T_DOUBLE_COLON","::",410],["T_STRING","SANDBOX_REPORTS_HOSTNAME",410],["T_WHITESPACE"," ",410],":",["T_WHITESPACE"," ",410],["T_STRING","self",410],["T_DOUBLE_COLON","::",410],["T_STRING","REPORTS_HOSTNAME",410],";",["T_WHITESPACE","\n            ",410],"}",["T_WHITESPACE","\n            ",411],["T_IF","if",412],["T_WHITESPACE"," ",412],"(",["T_EMPTY","empty",412],"(",["T_VARIABLE","$cfg",412],"[",["T_CONSTANT_ENCAPSED_STRING","'path'",412],"]",")",["T_WHITESPACE"," ",412],["T_BOOLEAN_OR","||",412],["T_WHITESPACE"," ",412],["T_VARIABLE","$cfg",412],"[",["T_CONSTANT_ENCAPSED_STRING","'sandbox'",412],"]",")",["T_WHITESPACE"," ",412],"{",["T_WHITESPACE","\n                ",412],["T_VARIABLE","$cfg",413],"[",["T_CONSTANT_ENCAPSED_STRING","'path'",413],"]",["T_WHITESPACE"," ",413],"=",["T_WHITESPACE"," ",413],["T_STRING","self",413],["T_DOUBLE_COLON","::",413],["T_STRING","REPORTS_PATH",413],";",["T_WHITESPACE","\n            ",413],"}",["T_WHITESPACE","\n            ",414],["T_COMMENT","\/\/ avoid duplicates\n",415],["T_WHITESPACE","            ",416],["T_IF","if",416],["T_WHITESPACE"," ",416],"(",["T_STRING","in_array",416],"(",["T_STRING","serialize",416],"(",["T_VARIABLE","$cfg",416],")",",",["T_WHITESPACE"," ",416],["T_VARIABLE","$uniques",416],")",")",["T_WHITESPACE"," ",416],"{",["T_WHITESPACE","\n                ",416],["T_CONTINUE","continue",417],";",["T_WHITESPACE","\n            ",417],"}",["T_WHITESPACE","\n            ",418],["T_VARIABLE","$uniques",419],"[","]",["T_WHITESPACE"," ",419],"=",["T_WHITESPACE"," ",419],["T_STRING","serialize",419],"(",["T_VARIABLE","$cfg",419],")",";",["T_WHITESPACE","\n            ",419],["T_VARIABLE","$configs",420],"[","]",["T_WHITESPACE"," ",420],"=",["T_WHITESPACE"," ",420],["T_VARIABLE","$cfg",420],";",["T_WHITESPACE","\n        ",420],"}",["T_WHITESPACE","\n        ",421],["T_RETURN","return",422],["T_WHITESPACE"," ",422],["T_VARIABLE","$configs",422],";",["T_WHITESPACE","\n    ",422],"}",["T_WHITESPACE","\n\n    ",423],["T_DOC_COMMENT","\/**\n     * Converts a filename to date of report.\n     *\n     * @param string $filename\n     * @return string\n     *\/",425],["T_WHITESPACE","\n    ",430],["T_PROTECTED","protected",431],["T_WHITESPACE"," ",431],["T_FUNCTION","function",431],["T_WHITESPACE"," ",431],["T_STRING","_fileNameToDate",431],"(",["T_VARIABLE","$filename",431],")",["T_WHITESPACE","\n    ",431],"{",["T_WHITESPACE","\n        ",432],["T_COMMENT","\/\/ Currently filenames look like STL-YYYYMMDD, so that is what we care about.\n",433],["T_WHITESPACE","        ",434],["T_VARIABLE","$dateSnippet",434],["T_WHITESPACE"," ",434],"=",["T_WHITESPACE"," ",434],["T_STRING","substr",434],"(",["T_STRING","basename",434],"(",["T_VARIABLE","$filename",434],")",",",["T_WHITESPACE"," ",434],["T_LNUMBER","4",434],",",["T_WHITESPACE"," ",434],["T_LNUMBER","8",434],")",";",["T_WHITESPACE","\n        ",434],["T_VARIABLE","$result",435],["T_WHITESPACE"," ",435],"=",["T_WHITESPACE"," ",435],["T_STRING","substr",435],"(",["T_VARIABLE","$dateSnippet",435],",",["T_WHITESPACE"," ",435],["T_LNUMBER","0",435],",",["T_WHITESPACE"," ",435],["T_LNUMBER","4",435],")",".",["T_CONSTANT_ENCAPSED_STRING","'-'",435],".",["T_STRING","substr",435],"(",["T_VARIABLE","$dateSnippet",435],",",["T_WHITESPACE"," ",435],["T_LNUMBER","4",435],",",["T_WHITESPACE"," ",435],["T_LNUMBER","2",435],")",".",["T_CONSTANT_ENCAPSED_STRING","'-'",435],".",["T_STRING","substr",435],"(",["T_VARIABLE","$dateSnippet",435],",",["T_WHITESPACE"," ",435],["T_LNUMBER","6",435],",",["T_WHITESPACE"," ",435],["T_LNUMBER","2",435],")",";",["T_WHITESPACE","\n        ",435],["T_RETURN","return",436],["T_WHITESPACE"," ",436],["T_VARIABLE","$result",436],";",["T_WHITESPACE","\n    ",436],"}",["T_WHITESPACE","\n\n    ",437],["T_DOC_COMMENT","\/**\n     * Filter SFTP file list by filename format\n     *\n     * @param array $list List of files as per $connection->rawls()\n     * @return array Trimmed down list of files\n     *\/",439],["T_WHITESPACE","\n    ",444],["T_PROTECTED","protected",445],["T_WHITESPACE"," ",445],["T_FUNCTION","function",445],["T_WHITESPACE"," ",445],["T_STRING","_filterReportsList",445],"(",["T_VARIABLE","$list",445],")",["T_WHITESPACE","\n    ",445],"{",["T_WHITESPACE","\n        ",446],["T_VARIABLE","$result",447],["T_WHITESPACE"," ",447],"=",["T_WHITESPACE"," ",447],["T_ARRAY","array",447],"(",")",";",["T_WHITESPACE","\n        ",447],["T_VARIABLE","$pattern",448],["T_WHITESPACE"," ",448],"=",["T_WHITESPACE"," ",448],["T_CONSTANT_ENCAPSED_STRING","'\/^STL-(\\d{8,8})\\.(\\d{2,2})\\.(.{3,3})\\.CSV$\/'",448],";",["T_WHITESPACE","\n        ",448],["T_FOREACH","foreach",449],["T_WHITESPACE"," ",449],"(",["T_VARIABLE","$list",449],["T_WHITESPACE"," ",449],["T_AS","as",449],["T_WHITESPACE"," ",449],["T_VARIABLE","$filename",449],["T_WHITESPACE"," ",449],["T_DOUBLE_ARROW","=>",449],["T_WHITESPACE"," ",449],["T_VARIABLE","$data",449],")",["T_WHITESPACE"," ",449],"{",["T_WHITESPACE","\n            ",449],["T_IF","if",450],["T_WHITESPACE"," ",450],"(",["T_STRING","preg_match",450],"(",["T_VARIABLE","$pattern",450],",",["T_WHITESPACE"," ",450],["T_VARIABLE","$filename",450],")",")",["T_WHITESPACE"," ",450],"{",["T_WHITESPACE","\n                ",450],["T_VARIABLE","$result",451],"[",["T_VARIABLE","$filename",451],"]",["T_WHITESPACE"," ",451],"=",["T_WHITESPACE"," ",451],["T_VARIABLE","$data",451],";",["T_WHITESPACE","\n            ",451],"}",["T_WHITESPACE","\n        ",452],"}",["T_WHITESPACE","\n        ",453],["T_RETURN","return",454],["T_WHITESPACE"," ",454],["T_VARIABLE","$result",454],";",["T_WHITESPACE","\n    ",454],"}",["T_WHITESPACE","\n",455],"}",["T_WHITESPACE","\n",456]]
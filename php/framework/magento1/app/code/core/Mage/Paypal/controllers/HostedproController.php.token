[["T_OPEN_TAG","<?php\n",1],["T_DOC_COMMENT","\/**\n * Magento\n *\n * NOTICE OF LICENSE\n *\n * This source file is subject to the Open Software License (OSL 3.0)\n * that is bundled with this package in the file LICENSE.txt.\n * It is also available through the world-wide-web at this URL:\n * http:\/\/opensource.org\/licenses\/osl-3.0.php\n * If you did not receive a copy of the license and are unable to\n * obtain it through the world-wide-web, please send an email\n * to license@magento.com so we can send you a copy immediately.\n *\n * DISCLAIMER\n *\n * Do not edit or add to this file if you wish to upgrade Magento to newer\n * versions in the future. If you wish to customize Magento for your\n * needs please refer to http:\/\/www.magento.com for more information.\n *\n * @category    Mage\n * @package     Mage_Paypal\n * @copyright  Copyright (c) 2006-2016 X.commerce, Inc. and affiliates (http:\/\/www.magento.com)\n * @license    http:\/\/opensource.org\/licenses\/osl-3.0.php  Open Software License (OSL 3.0)\n *\/",2],["T_WHITESPACE","\n\n",25],["T_DOC_COMMENT","\/**\n * Hosted Pro Checkout Controller\n *\n * @category   Mage\n * @package    Mage_Paypal\n * @author     Magento Core Team <core@magentocommerce.com>\n *\/",27],["T_WHITESPACE","\n",33],["T_CLASS","class",34],["T_WHITESPACE"," ",34],["T_STRING","Mage_Paypal_HostedproController",34],["T_WHITESPACE"," ",34],["T_EXTENDS","extends",34],["T_WHITESPACE"," ",34],["T_STRING","Mage_Core_Controller_Front_Action",34],["T_WHITESPACE","\n",34],"{",["T_WHITESPACE","\n    ",35],["T_DOC_COMMENT","\/**\n     * When a customer return to website from gateway.\n     *\/",36],["T_WHITESPACE","\n    ",38],["T_PUBLIC","public",39],["T_WHITESPACE"," ",39],["T_FUNCTION","function",39],["T_WHITESPACE"," ",39],["T_STRING","returnAction",39],"(",")",["T_WHITESPACE","\n    ",39],"{",["T_WHITESPACE","\n        ",40],["T_VARIABLE","$session",41],["T_WHITESPACE"," ",41],"=",["T_WHITESPACE"," ",41],["T_VARIABLE","$this",41],["T_OBJECT_OPERATOR","->",41],["T_STRING","_getCheckout",41],"(",")",";",["T_WHITESPACE","\n        ",41],["T_COMMENT","\/\/TODO: some actions with order\n",42],["T_WHITESPACE","        ",43],["T_IF","if",43],["T_WHITESPACE"," ",43],"(",["T_VARIABLE","$session",43],["T_OBJECT_OPERATOR","->",43],["T_STRING","getLastRealOrderId",43],"(",")",")",["T_WHITESPACE"," ",43],"{",["T_WHITESPACE","\n            ",43],["T_VARIABLE","$this",44],["T_OBJECT_OPERATOR","->",44],["T_STRING","_redirect",44],"(",["T_CONSTANT_ENCAPSED_STRING","'checkout\/onepage\/success'",44],")",";",["T_WHITESPACE","\n        ",44],"}",["T_WHITESPACE","\n    ",45],"}",["T_WHITESPACE","\n\n    ",46],["T_DOC_COMMENT","\/**\n     * When a customer cancel payment from gateway.\n     *\/",48],["T_WHITESPACE","\n    ",50],["T_PUBLIC","public",51],["T_WHITESPACE"," ",51],["T_FUNCTION","function",51],["T_WHITESPACE"," ",51],["T_STRING","cancelAction",51],"(",")",["T_WHITESPACE","\n    ",51],"{",["T_WHITESPACE","\n        ",52],["T_VARIABLE","$gotoSection",53],["T_WHITESPACE"," ",53],"=",["T_WHITESPACE"," ",53],["T_VARIABLE","$this",53],["T_OBJECT_OPERATOR","->",53],["T_STRING","_cancelPayment",53],"(",")",";",["T_WHITESPACE","\n        ",53],["T_VARIABLE","$redirectBlock",54],["T_WHITESPACE"," ",54],"=",["T_WHITESPACE"," ",54],["T_VARIABLE","$this",54],["T_OBJECT_OPERATOR","->",54],["T_STRING","_getIframeBlock",54],"(",")",["T_WHITESPACE","\n            ",54],["T_OBJECT_OPERATOR","->",55],["T_STRING","setGotoSection",55],"(",["T_VARIABLE","$gotoSection",55],")",["T_WHITESPACE","\n            ",55],["T_OBJECT_OPERATOR","->",56],["T_STRING","setTemplate",56],"(",["T_CONSTANT_ENCAPSED_STRING","'paypal\/hss\/redirect.phtml'",56],")",";",["T_WHITESPACE","\n        ",56],["T_COMMENT","\/\/TODO: clarify return logic whether customer will be returned in iframe or in parent window\n",57],["T_WHITESPACE","        ",58],["T_VARIABLE","$this",58],["T_OBJECT_OPERATOR","->",58],["T_STRING","getResponse",58],"(",")",["T_OBJECT_OPERATOR","->",58],["T_STRING","setBody",58],"(",["T_VARIABLE","$redirectBlock",58],["T_OBJECT_OPERATOR","->",58],["T_STRING","toHtml",58],"(",")",")",";",["T_WHITESPACE","\n    ",58],"}",["T_WHITESPACE","\n\n    ",59],["T_DOC_COMMENT","\/**\n     * Cancel order, return quote to customer\n     *\n     * @param string $errorMsg\n     * @return mixed\n     *\/",61],["T_WHITESPACE","\n    ",66],["T_PROTECTED","protected",67],["T_WHITESPACE"," ",67],["T_FUNCTION","function",67],["T_WHITESPACE"," ",67],["T_STRING","_cancelPayment",67],"(",["T_VARIABLE","$errorMsg",67],["T_WHITESPACE"," ",67],"=",["T_WHITESPACE"," ",67],["T_CONSTANT_ENCAPSED_STRING","''",67],")",["T_WHITESPACE","\n    ",67],"{",["T_WHITESPACE","\n        ",68],["T_VARIABLE","$gotoSection",69],["T_WHITESPACE"," ",69],"=",["T_WHITESPACE"," ",69],["T_STRING","false",69],";",["T_WHITESPACE","\n        ",69],["T_COMMENT","\/* @var $helper Mage_Paypal_Helper_Checkout *\/",70],["T_WHITESPACE","\n        ",70],["T_VARIABLE","$helper",71],["T_WHITESPACE"," ",71],"=",["T_WHITESPACE"," ",71],["T_STRING","Mage",71],["T_DOUBLE_COLON","::",71],["T_STRING","helper",71],"(",["T_CONSTANT_ENCAPSED_STRING","'paypal\/checkout'",71],")",";",["T_WHITESPACE","\n        ",71],["T_VARIABLE","$helper",72],["T_OBJECT_OPERATOR","->",72],["T_STRING","cancelCurrentOrder",72],"(",["T_VARIABLE","$errorMsg",72],")",";",["T_WHITESPACE","\n        ",72],["T_IF","if",73],["T_WHITESPACE"," ",73],"(",["T_VARIABLE","$helper",73],["T_OBJECT_OPERATOR","->",73],["T_STRING","restoreQuote",73],"(",")",")",["T_WHITESPACE"," ",73],"{",["T_WHITESPACE","\n            ",73],["T_VARIABLE","$gotoSection",74],["T_WHITESPACE"," ",74],"=",["T_WHITESPACE"," ",74],["T_CONSTANT_ENCAPSED_STRING","'payment'",74],";",["T_WHITESPACE","\n        ",74],"}",["T_WHITESPACE","\n        ",75],["T_RETURN","return",76],["T_WHITESPACE"," ",76],["T_VARIABLE","$gotoSection",76],";",["T_WHITESPACE","\n    ",76],"}",["T_WHITESPACE","\n\n    ",77],["T_DOC_COMMENT","\/**\n     * Get frontend checkout session object\n     *\n     * @return Mage_Checkout_Model_Session\n     *\/",79],["T_WHITESPACE","\n    ",83],["T_PROTECTED","protected",84],["T_WHITESPACE"," ",84],["T_FUNCTION","function",84],["T_WHITESPACE"," ",84],["T_STRING","_getCheckout",84],"(",")",["T_WHITESPACE","\n    ",84],"{",["T_WHITESPACE","\n        ",85],["T_RETURN","return",86],["T_WHITESPACE"," ",86],["T_STRING","Mage",86],["T_DOUBLE_COLON","::",86],["T_STRING","getSingleton",86],"(",["T_CONSTANT_ENCAPSED_STRING","'checkout\/session'",86],")",";",["T_WHITESPACE","\n    ",86],"}",["T_WHITESPACE","\n\n    ",87],["T_DOC_COMMENT","\/**\n     * Get iframe block\n     *\n     * @return Mage_Paypal_Block_Hosted_Pro_Iframe\n     *\/",89],["T_WHITESPACE","\n    ",93],["T_PROTECTED","protected",94],["T_WHITESPACE"," ",94],["T_FUNCTION","function",94],["T_WHITESPACE"," ",94],["T_STRING","_getIframeBlock",94],"(",")",["T_WHITESPACE","\n    ",94],"{",["T_WHITESPACE","\n        ",95],["T_VARIABLE","$this",96],["T_OBJECT_OPERATOR","->",96],["T_STRING","loadLayout",96],"(",["T_CONSTANT_ENCAPSED_STRING","'paypal_hosted_pro_iframe'",96],")",";",["T_WHITESPACE","\n        ",96],["T_RETURN","return",97],["T_WHITESPACE"," ",97],["T_VARIABLE","$this",97],["T_OBJECT_OPERATOR","->",97],["T_STRING","getLayout",97],"(",")",["T_WHITESPACE","\n            ",97],["T_OBJECT_OPERATOR","->",98],["T_STRING","getBlock",98],"(",["T_CONSTANT_ENCAPSED_STRING","'hosted.pro.iframe'",98],")",";",["T_WHITESPACE","\n    ",98],"}",["T_WHITESPACE","\n",99],"}",["T_WHITESPACE","\n",100]]
[["T_OPEN_TAG","<?php\n",1],["T_DOC_COMMENT","\/**\n * Magento\n *\n * NOTICE OF LICENSE\n *\n * This source file is subject to the Open Software License (OSL 3.0)\n * that is bundled with this package in the file LICENSE.txt.\n * It is also available through the world-wide-web at this URL:\n * http:\/\/opensource.org\/licenses\/osl-3.0.php\n * If you did not receive a copy of the license and are unable to\n * obtain it through the world-wide-web, please send an email\n * to license@magento.com so we can send you a copy immediately.\n *\n * DISCLAIMER\n *\n * Do not edit or add to this file if you wish to upgrade Magento to newer\n * versions in the future. If you wish to customize Magento for your\n * needs please refer to http:\/\/www.magento.com for more information.\n *\n * @category    Mage\n * @package     Mage_Paypal\n * @copyright  Copyright (c) 2006-2016 X.commerce, Inc. and affiliates (http:\/\/www.magento.com)\n * @license    http:\/\/opensource.org\/licenses\/osl-3.0.php  Open Software License (OSL 3.0)\n *\/",2],["T_WHITESPACE","\n\n",25],["T_DOC_COMMENT","\/**\n * NVP API wrappers model\n * @TODO: move some parts to abstract, don't hesitate to throw exceptions on api calls\n *\/",27],["T_WHITESPACE","\n",30],["T_CLASS","class",31],["T_WHITESPACE"," ",31],["T_STRING","Mage_Paypal_Model_Api_Nvp",31],["T_WHITESPACE"," ",31],["T_EXTENDS","extends",31],["T_WHITESPACE"," ",31],["T_STRING","Mage_Paypal_Model_Api_Abstract",31],["T_WHITESPACE","\n",31],"{",["T_WHITESPACE","\n    ",32],["T_DOC_COMMENT","\/**\n     * Paypal methods definition\n     *\/",33],["T_WHITESPACE","\n    ",35],["T_CONST","const",36],["T_WHITESPACE"," ",36],["T_STRING","DO_DIRECT_PAYMENT",36],["T_WHITESPACE"," ",36],"=",["T_WHITESPACE"," ",36],["T_CONSTANT_ENCAPSED_STRING","'DoDirectPayment'",36],";",["T_WHITESPACE","\n    ",36],["T_CONST","const",37],["T_WHITESPACE"," ",37],["T_STRING","DO_CAPTURE",37],["T_WHITESPACE"," ",37],"=",["T_WHITESPACE"," ",37],["T_CONSTANT_ENCAPSED_STRING","'DoCapture'",37],";",["T_WHITESPACE","\n    ",37],["T_CONST","const",38],["T_WHITESPACE"," ",38],["T_STRING","DO_AUTHORIZATION",38],["T_WHITESPACE"," ",38],"=",["T_WHITESPACE"," ",38],["T_CONSTANT_ENCAPSED_STRING","'DoAuthorization'",38],";",["T_WHITESPACE","\n    ",38],["T_CONST","const",39],["T_WHITESPACE"," ",39],["T_STRING","DO_VOID",39],["T_WHITESPACE"," ",39],"=",["T_WHITESPACE"," ",39],["T_CONSTANT_ENCAPSED_STRING","'DoVoid'",39],";",["T_WHITESPACE","\n    ",39],["T_CONST","const",40],["T_WHITESPACE"," ",40],["T_STRING","REFUND_TRANSACTION",40],["T_WHITESPACE"," ",40],"=",["T_WHITESPACE"," ",40],["T_CONSTANT_ENCAPSED_STRING","'RefundTransaction'",40],";",["T_WHITESPACE","\n    ",40],["T_CONST","const",41],["T_WHITESPACE"," ",41],["T_STRING","SET_EXPRESS_CHECKOUT",41],["T_WHITESPACE"," ",41],"=",["T_WHITESPACE"," ",41],["T_CONSTANT_ENCAPSED_STRING","'SetExpressCheckout'",41],";",["T_WHITESPACE","\n    ",41],["T_CONST","const",42],["T_WHITESPACE"," ",42],["T_STRING","GET_EXPRESS_CHECKOUT_DETAILS",42],["T_WHITESPACE"," ",42],"=",["T_WHITESPACE"," ",42],["T_CONSTANT_ENCAPSED_STRING","'GetExpressCheckoutDetails'",42],";",["T_WHITESPACE","\n    ",42],["T_CONST","const",43],["T_WHITESPACE"," ",43],["T_STRING","DO_EXPRESS_CHECKOUT_PAYMENT",43],["T_WHITESPACE"," ",43],"=",["T_WHITESPACE"," ",43],["T_CONSTANT_ENCAPSED_STRING","'DoExpressCheckoutPayment'",43],";",["T_WHITESPACE","\n    ",43],["T_CONST","const",44],["T_WHITESPACE"," ",44],["T_STRING","CALLBACK_RESPONSE",44],["T_WHITESPACE"," ",44],"=",["T_WHITESPACE"," ",44],["T_CONSTANT_ENCAPSED_STRING","'CallbackResponse'",44],";",["T_WHITESPACE","\n\n    ",44],["T_DOC_COMMENT","\/**\n     * Paypal ManagePendingTransactionStatus actions\n     *\/",46],["T_WHITESPACE","\n    ",48],["T_CONST","const",49],["T_WHITESPACE"," ",49],["T_STRING","PENDING_TRANSACTION_ACCEPT",49],["T_WHITESPACE"," ",49],"=",["T_WHITESPACE"," ",49],["T_CONSTANT_ENCAPSED_STRING","'Accept'",49],";",["T_WHITESPACE","\n    ",49],["T_CONST","const",50],["T_WHITESPACE"," ",50],["T_STRING","PENDING_TRANSACTION_DENY",50],["T_WHITESPACE"," ",50],"=",["T_WHITESPACE"," ",50],["T_CONSTANT_ENCAPSED_STRING","'Deny'",50],";",["T_WHITESPACE","\n\n    ",50],["T_DOC_COMMENT","\/**\n     * Capture types (make authorization close or remain open)\n     * @var string\n     *\/",52],["T_WHITESPACE","\n    ",55],["T_PROTECTED","protected",56],["T_WHITESPACE"," ",56],["T_VARIABLE","$_captureTypeComplete",56],["T_WHITESPACE"," ",56],"=",["T_WHITESPACE"," ",56],["T_CONSTANT_ENCAPSED_STRING","'Complete'",56],";",["T_WHITESPACE","\n    ",56],["T_PROTECTED","protected",57],["T_WHITESPACE"," ",57],["T_VARIABLE","$_captureTypeNotcomplete",57],["T_WHITESPACE"," ",57],"=",["T_WHITESPACE"," ",57],["T_CONSTANT_ENCAPSED_STRING","'NotComplete'",57],";",["T_WHITESPACE","\n\n    ",57],["T_DOC_COMMENT","\/**\n     * Global public interface map\n     * @var array\n     *\/",59],["T_WHITESPACE","\n    ",62],["T_PROTECTED","protected",63],["T_WHITESPACE"," ",63],["T_VARIABLE","$_globalMap",63],["T_WHITESPACE"," ",63],"=",["T_WHITESPACE"," ",63],["T_ARRAY","array",63],"(",["T_WHITESPACE","\n        ",63],["T_COMMENT","\/\/ each call\n",64],["T_WHITESPACE","        ",65],["T_CONSTANT_ENCAPSED_STRING","'VERSION'",65],["T_WHITESPACE","      ",65],["T_DOUBLE_ARROW","=>",65],["T_WHITESPACE"," ",65],["T_CONSTANT_ENCAPSED_STRING","'version'",65],",",["T_WHITESPACE","\n        ",65],["T_CONSTANT_ENCAPSED_STRING","'USER'",66],["T_WHITESPACE","         ",66],["T_DOUBLE_ARROW","=>",66],["T_WHITESPACE"," ",66],["T_CONSTANT_ENCAPSED_STRING","'api_username'",66],",",["T_WHITESPACE","\n        ",66],["T_CONSTANT_ENCAPSED_STRING","'PWD'",67],["T_WHITESPACE","          ",67],["T_DOUBLE_ARROW","=>",67],["T_WHITESPACE"," ",67],["T_CONSTANT_ENCAPSED_STRING","'api_password'",67],",",["T_WHITESPACE","\n        ",67],["T_CONSTANT_ENCAPSED_STRING","'SIGNATURE'",68],["T_WHITESPACE","    ",68],["T_DOUBLE_ARROW","=>",68],["T_WHITESPACE"," ",68],["T_CONSTANT_ENCAPSED_STRING","'api_signature'",68],",",["T_WHITESPACE","\n        ",68],["T_CONSTANT_ENCAPSED_STRING","'BUTTONSOURCE'",69],["T_WHITESPACE"," ",69],["T_DOUBLE_ARROW","=>",69],["T_WHITESPACE"," ",69],["T_CONSTANT_ENCAPSED_STRING","'build_notation_code'",69],",",["T_WHITESPACE","\n\n        ",69],["T_COMMENT","\/\/ for Unilateral payments\n",71],["T_WHITESPACE","        ",72],["T_CONSTANT_ENCAPSED_STRING","'SUBJECT'",72],["T_WHITESPACE","      ",72],["T_DOUBLE_ARROW","=>",72],["T_WHITESPACE"," ",72],["T_CONSTANT_ENCAPSED_STRING","'business_account'",72],",",["T_WHITESPACE","\n\n        ",72],["T_COMMENT","\/\/ commands\n",74],["T_WHITESPACE","        ",75],["T_CONSTANT_ENCAPSED_STRING","'PAYMENTACTION'",75],["T_WHITESPACE"," ",75],["T_DOUBLE_ARROW","=>",75],["T_WHITESPACE"," ",75],["T_CONSTANT_ENCAPSED_STRING","'payment_action'",75],",",["T_WHITESPACE","\n        ",75],["T_CONSTANT_ENCAPSED_STRING","'RETURNURL'",76],["T_WHITESPACE","     ",76],["T_DOUBLE_ARROW","=>",76],["T_WHITESPACE"," ",76],["T_CONSTANT_ENCAPSED_STRING","'return_url'",76],",",["T_WHITESPACE","\n        ",76],["T_CONSTANT_ENCAPSED_STRING","'CANCELURL'",77],["T_WHITESPACE","     ",77],["T_DOUBLE_ARROW","=>",77],["T_WHITESPACE"," ",77],["T_CONSTANT_ENCAPSED_STRING","'cancel_url'",77],",",["T_WHITESPACE","\n        ",77],["T_CONSTANT_ENCAPSED_STRING","'INVNUM'",78],["T_WHITESPACE","        ",78],["T_DOUBLE_ARROW","=>",78],["T_WHITESPACE"," ",78],["T_CONSTANT_ENCAPSED_STRING","'inv_num'",78],",",["T_WHITESPACE","\n        ",78],["T_CONSTANT_ENCAPSED_STRING","'TOKEN'",79],["T_WHITESPACE","         ",79],["T_DOUBLE_ARROW","=>",79],["T_WHITESPACE"," ",79],["T_CONSTANT_ENCAPSED_STRING","'token'",79],",",["T_WHITESPACE","\n        ",79],["T_CONSTANT_ENCAPSED_STRING","'CORRELATIONID'",80],["T_WHITESPACE"," ",80],["T_DOUBLE_ARROW","=>",80],["T_WHITESPACE"," ",80],["T_CONSTANT_ENCAPSED_STRING","'correlation_id'",80],",",["T_WHITESPACE","\n        ",80],["T_CONSTANT_ENCAPSED_STRING","'SOLUTIONTYPE'",81],["T_WHITESPACE","  ",81],["T_DOUBLE_ARROW","=>",81],["T_WHITESPACE"," ",81],["T_CONSTANT_ENCAPSED_STRING","'solution_type'",81],",",["T_WHITESPACE","\n        ",81],["T_CONSTANT_ENCAPSED_STRING","'GIROPAYCANCELURL'",82],["T_WHITESPACE","  ",82],["T_DOUBLE_ARROW","=>",82],["T_WHITESPACE"," ",82],["T_CONSTANT_ENCAPSED_STRING","'giropay_cancel_url'",82],",",["T_WHITESPACE","\n        ",82],["T_CONSTANT_ENCAPSED_STRING","'GIROPAYSUCCESSURL'",83],["T_WHITESPACE"," ",83],["T_DOUBLE_ARROW","=>",83],["T_WHITESPACE"," ",83],["T_CONSTANT_ENCAPSED_STRING","'giropay_success_url'",83],",",["T_WHITESPACE","\n        ",83],["T_CONSTANT_ENCAPSED_STRING","'BANKTXNPENDINGURL'",84],["T_WHITESPACE"," ",84],["T_DOUBLE_ARROW","=>",84],["T_WHITESPACE"," ",84],["T_CONSTANT_ENCAPSED_STRING","'giropay_bank_txn_pending_url'",84],",",["T_WHITESPACE","\n        ",84],["T_CONSTANT_ENCAPSED_STRING","'IPADDRESS'",85],["T_WHITESPACE","         ",85],["T_DOUBLE_ARROW","=>",85],["T_WHITESPACE"," ",85],["T_CONSTANT_ENCAPSED_STRING","'ip_address'",85],",",["T_WHITESPACE","\n        ",85],["T_CONSTANT_ENCAPSED_STRING","'NOTIFYURL'",86],["T_WHITESPACE","         ",86],["T_DOUBLE_ARROW","=>",86],["T_WHITESPACE"," ",86],["T_CONSTANT_ENCAPSED_STRING","'notify_url'",86],",",["T_WHITESPACE","\n        ",86],["T_CONSTANT_ENCAPSED_STRING","'RETURNFMFDETAILS'",87],["T_WHITESPACE","  ",87],["T_DOUBLE_ARROW","=>",87],["T_WHITESPACE"," ",87],["T_CONSTANT_ENCAPSED_STRING","'fraud_management_filters_enabled'",87],",",["T_WHITESPACE","\n        ",87],["T_CONSTANT_ENCAPSED_STRING","'NOTE'",88],["T_WHITESPACE","              ",88],["T_DOUBLE_ARROW","=>",88],["T_WHITESPACE"," ",88],["T_CONSTANT_ENCAPSED_STRING","'note'",88],",",["T_WHITESPACE","\n        ",88],["T_CONSTANT_ENCAPSED_STRING","'REFUNDTYPE'",89],["T_WHITESPACE","        ",89],["T_DOUBLE_ARROW","=>",89],["T_WHITESPACE"," ",89],["T_CONSTANT_ENCAPSED_STRING","'refund_type'",89],",",["T_WHITESPACE","\n        ",89],["T_CONSTANT_ENCAPSED_STRING","'ACTION'",90],["T_WHITESPACE","            ",90],["T_DOUBLE_ARROW","=>",90],["T_WHITESPACE"," ",90],["T_CONSTANT_ENCAPSED_STRING","'action'",90],",",["T_WHITESPACE","\n        ",90],["T_CONSTANT_ENCAPSED_STRING","'REDIRECTREQUIRED'",91],["T_WHITESPACE","  ",91],["T_DOUBLE_ARROW","=>",91],["T_WHITESPACE"," ",91],["T_CONSTANT_ENCAPSED_STRING","'redirect_required'",91],",",["T_WHITESPACE","\n        ",91],["T_CONSTANT_ENCAPSED_STRING","'SUCCESSPAGEREDIRECTREQUESTED'",92],["T_WHITESPACE","  ",92],["T_DOUBLE_ARROW","=>",92],["T_WHITESPACE"," ",92],["T_CONSTANT_ENCAPSED_STRING","'redirect_requested'",92],",",["T_WHITESPACE","\n        ",92],["T_CONSTANT_ENCAPSED_STRING","'REQBILLINGADDRESS'",93],["T_WHITESPACE"," ",93],["T_DOUBLE_ARROW","=>",93],["T_WHITESPACE"," ",93],["T_CONSTANT_ENCAPSED_STRING","'require_billing_address'",93],",",["T_WHITESPACE","\n        ",93],["T_COMMENT","\/\/ style settings\n",94],["T_WHITESPACE","        ",95],["T_CONSTANT_ENCAPSED_STRING","'PAGESTYLE'",95],["T_WHITESPACE","      ",95],["T_DOUBLE_ARROW","=>",95],["T_WHITESPACE"," ",95],["T_CONSTANT_ENCAPSED_STRING","'page_style'",95],",",["T_WHITESPACE","\n        ",95],["T_CONSTANT_ENCAPSED_STRING","'HDRIMG'",96],["T_WHITESPACE","         ",96],["T_DOUBLE_ARROW","=>",96],["T_WHITESPACE"," ",96],["T_CONSTANT_ENCAPSED_STRING","'hdrimg'",96],",",["T_WHITESPACE","\n        ",96],["T_CONSTANT_ENCAPSED_STRING","'HDRBORDERCOLOR'",97],["T_WHITESPACE"," ",97],["T_DOUBLE_ARROW","=>",97],["T_WHITESPACE"," ",97],["T_CONSTANT_ENCAPSED_STRING","'hdrbordercolor'",97],",",["T_WHITESPACE","\n        ",97],["T_CONSTANT_ENCAPSED_STRING","'HDRBACKCOLOR'",98],["T_WHITESPACE","   ",98],["T_DOUBLE_ARROW","=>",98],["T_WHITESPACE"," ",98],["T_CONSTANT_ENCAPSED_STRING","'hdrbackcolor'",98],",",["T_WHITESPACE","\n        ",98],["T_CONSTANT_ENCAPSED_STRING","'PAYFLOWCOLOR'",99],["T_WHITESPACE","   ",99],["T_DOUBLE_ARROW","=>",99],["T_WHITESPACE"," ",99],["T_CONSTANT_ENCAPSED_STRING","'payflowcolor'",99],",",["T_WHITESPACE","\n        ",99],["T_CONSTANT_ENCAPSED_STRING","'LOCALECODE'",100],["T_WHITESPACE","     ",100],["T_DOUBLE_ARROW","=>",100],["T_WHITESPACE"," ",100],["T_CONSTANT_ENCAPSED_STRING","'locale_code'",100],",",["T_WHITESPACE","\n        ",100],["T_CONSTANT_ENCAPSED_STRING","'PAL'",101],["T_WHITESPACE","            ",101],["T_DOUBLE_ARROW","=>",101],["T_WHITESPACE"," ",101],["T_CONSTANT_ENCAPSED_STRING","'pal'",101],",",["T_WHITESPACE","\n        ",101],["T_CONSTANT_ENCAPSED_STRING","'USERSELECTEDFUNDINGSOURCE'",102],["T_WHITESPACE"," ",102],["T_DOUBLE_ARROW","=>",102],["T_WHITESPACE"," ",102],["T_CONSTANT_ENCAPSED_STRING","'funding_source'",102],",",["T_WHITESPACE","\n\n        ",102],["T_COMMENT","\/\/ transaction info\n",104],["T_WHITESPACE","        ",105],["T_CONSTANT_ENCAPSED_STRING","'TRANSACTIONID'",105],["T_WHITESPACE","   ",105],["T_DOUBLE_ARROW","=>",105],["T_WHITESPACE"," ",105],["T_CONSTANT_ENCAPSED_STRING","'transaction_id'",105],",",["T_WHITESPACE","\n        ",105],["T_CONSTANT_ENCAPSED_STRING","'AUTHORIZATIONID'",106],["T_WHITESPACE"," ",106],["T_DOUBLE_ARROW","=>",106],["T_WHITESPACE"," ",106],["T_CONSTANT_ENCAPSED_STRING","'authorization_id'",106],",",["T_WHITESPACE","\n        ",106],["T_CONSTANT_ENCAPSED_STRING","'REFUNDTRANSACTIONID'",107],["T_WHITESPACE"," ",107],["T_DOUBLE_ARROW","=>",107],["T_WHITESPACE"," ",107],["T_CONSTANT_ENCAPSED_STRING","'refund_transaction_id'",107],",",["T_WHITESPACE","\n        ",107],["T_CONSTANT_ENCAPSED_STRING","'COMPLETETYPE'",108],["T_WHITESPACE","    ",108],["T_DOUBLE_ARROW","=>",108],["T_WHITESPACE"," ",108],["T_CONSTANT_ENCAPSED_STRING","'complete_type'",108],",",["T_WHITESPACE","\n        ",108],["T_CONSTANT_ENCAPSED_STRING","'AMT'",109],["T_WHITESPACE"," ",109],["T_DOUBLE_ARROW","=>",109],["T_WHITESPACE"," ",109],["T_CONSTANT_ENCAPSED_STRING","'amount'",109],",",["T_WHITESPACE","\n        ",109],["T_CONSTANT_ENCAPSED_STRING","'ITEMAMT'",110],["T_WHITESPACE"," ",110],["T_DOUBLE_ARROW","=>",110],["T_WHITESPACE"," ",110],["T_CONSTANT_ENCAPSED_STRING","'subtotal_amount'",110],",",["T_WHITESPACE","\n        ",110],["T_CONSTANT_ENCAPSED_STRING","'GROSSREFUNDAMT'",111],["T_WHITESPACE"," ",111],["T_DOUBLE_ARROW","=>",111],["T_WHITESPACE"," ",111],["T_CONSTANT_ENCAPSED_STRING","'refunded_amount'",111],",",["T_WHITESPACE"," ",111],["T_COMMENT","\/\/ possible mistake, check with API reference\n",111],["T_WHITESPACE","\n        ",112],["T_COMMENT","\/\/ payment\/billing info\n",113],["T_WHITESPACE","        ",114],["T_CONSTANT_ENCAPSED_STRING","'CURRENCYCODE'",114],["T_WHITESPACE","  ",114],["T_DOUBLE_ARROW","=>",114],["T_WHITESPACE"," ",114],["T_CONSTANT_ENCAPSED_STRING","'currency_code'",114],",",["T_WHITESPACE","\n        ",114],["T_CONSTANT_ENCAPSED_STRING","'PAYMENTSTATUS'",115],["T_WHITESPACE"," ",115],["T_DOUBLE_ARROW","=>",115],["T_WHITESPACE"," ",115],["T_CONSTANT_ENCAPSED_STRING","'payment_status'",115],",",["T_WHITESPACE","\n        ",115],["T_CONSTANT_ENCAPSED_STRING","'PENDINGREASON'",116],["T_WHITESPACE"," ",116],["T_DOUBLE_ARROW","=>",116],["T_WHITESPACE"," ",116],["T_CONSTANT_ENCAPSED_STRING","'pending_reason'",116],",",["T_WHITESPACE","\n        ",116],["T_CONSTANT_ENCAPSED_STRING","'PROTECTIONELIGIBILITY'",117],["T_WHITESPACE"," ",117],["T_DOUBLE_ARROW","=>",117],["T_WHITESPACE"," ",117],["T_CONSTANT_ENCAPSED_STRING","'protection_eligibility'",117],",",["T_WHITESPACE","\n        ",117],["T_CONSTANT_ENCAPSED_STRING","'PAYERID'",118],["T_WHITESPACE"," ",118],["T_DOUBLE_ARROW","=>",118],["T_WHITESPACE"," ",118],["T_CONSTANT_ENCAPSED_STRING","'payer_id'",118],",",["T_WHITESPACE","\n        ",118],["T_CONSTANT_ENCAPSED_STRING","'PAYERSTATUS'",119],["T_WHITESPACE"," ",119],["T_DOUBLE_ARROW","=>",119],["T_WHITESPACE"," ",119],["T_CONSTANT_ENCAPSED_STRING","'payer_status'",119],",",["T_WHITESPACE","\n        ",119],["T_CONSTANT_ENCAPSED_STRING","'ADDRESSID'",120],["T_WHITESPACE"," ",120],["T_DOUBLE_ARROW","=>",120],["T_WHITESPACE"," ",120],["T_CONSTANT_ENCAPSED_STRING","'address_id'",120],",",["T_WHITESPACE","\n        ",120],["T_CONSTANT_ENCAPSED_STRING","'ADDRESSSTATUS'",121],["T_WHITESPACE"," ",121],["T_DOUBLE_ARROW","=>",121],["T_WHITESPACE"," ",121],["T_CONSTANT_ENCAPSED_STRING","'address_status'",121],",",["T_WHITESPACE","\n        ",121],["T_CONSTANT_ENCAPSED_STRING","'EMAIL'",122],["T_WHITESPACE","         ",122],["T_DOUBLE_ARROW","=>",122],["T_WHITESPACE"," ",122],["T_CONSTANT_ENCAPSED_STRING","'email'",122],",",["T_WHITESPACE","\n            ",122],["T_COMMENT","\/\/ backwards compatibility\n",123],["T_WHITESPACE","            ",124],["T_CONSTANT_ENCAPSED_STRING","'FIRSTNAME'",124],["T_WHITESPACE","     ",124],["T_DOUBLE_ARROW","=>",124],["T_WHITESPACE"," ",124],["T_CONSTANT_ENCAPSED_STRING","'firstname'",124],",",["T_WHITESPACE","\n            ",124],["T_CONSTANT_ENCAPSED_STRING","'LASTNAME'",125],["T_WHITESPACE","      ",125],["T_DOUBLE_ARROW","=>",125],["T_WHITESPACE"," ",125],["T_CONSTANT_ENCAPSED_STRING","'lastname'",125],",",["T_WHITESPACE","\n\n        ",125],["T_COMMENT","\/\/ shipping rate\n",127],["T_WHITESPACE","        ",128],["T_CONSTANT_ENCAPSED_STRING","'SHIPPINGOPTIONNAME'",128],["T_WHITESPACE"," ",128],["T_DOUBLE_ARROW","=>",128],["T_WHITESPACE"," ",128],["T_CONSTANT_ENCAPSED_STRING","'shipping_rate_code'",128],",",["T_WHITESPACE","\n        ",128],["T_CONSTANT_ENCAPSED_STRING","'NOSHIPPING'",129],["T_WHITESPACE","         ",129],["T_DOUBLE_ARROW","=>",129],["T_WHITESPACE"," ",129],["T_CONSTANT_ENCAPSED_STRING","'suppress_shipping'",129],",",["T_WHITESPACE","\n\n        ",129],["T_COMMENT","\/\/ paypal direct credit card information\n",131],["T_WHITESPACE","        ",132],["T_CONSTANT_ENCAPSED_STRING","'CREDITCARDTYPE'",132],["T_WHITESPACE"," ",132],["T_DOUBLE_ARROW","=>",132],["T_WHITESPACE"," ",132],["T_CONSTANT_ENCAPSED_STRING","'credit_card_type'",132],",",["T_WHITESPACE","\n        ",132],["T_CONSTANT_ENCAPSED_STRING","'ACCT'",133],["T_WHITESPACE","           ",133],["T_DOUBLE_ARROW","=>",133],["T_WHITESPACE"," ",133],["T_CONSTANT_ENCAPSED_STRING","'credit_card_number'",133],",",["T_WHITESPACE","\n        ",133],["T_CONSTANT_ENCAPSED_STRING","'EXPDATE'",134],["T_WHITESPACE","        ",134],["T_DOUBLE_ARROW","=>",134],["T_WHITESPACE"," ",134],["T_CONSTANT_ENCAPSED_STRING","'credit_card_expiration_date'",134],",",["T_WHITESPACE","\n        ",134],["T_CONSTANT_ENCAPSED_STRING","'CVV2'",135],["T_WHITESPACE","           ",135],["T_DOUBLE_ARROW","=>",135],["T_WHITESPACE"," ",135],["T_CONSTANT_ENCAPSED_STRING","'credit_card_cvv2'",135],",",["T_WHITESPACE","\n        ",135],["T_CONSTANT_ENCAPSED_STRING","'STARTDATE'",136],["T_WHITESPACE","      ",136],["T_DOUBLE_ARROW","=>",136],["T_WHITESPACE"," ",136],["T_CONSTANT_ENCAPSED_STRING","'maestro_solo_issue_date'",136],",",["T_WHITESPACE"," ",136],["T_COMMENT","\/\/ MMYYYY, always six chars, including leading zero\n",136],["T_WHITESPACE","        ",137],["T_CONSTANT_ENCAPSED_STRING","'ISSUENUMBER'",137],["T_WHITESPACE","    ",137],["T_DOUBLE_ARROW","=>",137],["T_WHITESPACE"," ",137],["T_CONSTANT_ENCAPSED_STRING","'maestro_solo_issue_number'",137],",",["T_WHITESPACE","\n        ",137],["T_CONSTANT_ENCAPSED_STRING","'CVV2MATCH'",138],["T_WHITESPACE","      ",138],["T_DOUBLE_ARROW","=>",138],["T_WHITESPACE"," ",138],["T_CONSTANT_ENCAPSED_STRING","'cvv2_check_result'",138],",",["T_WHITESPACE","\n        ",138],["T_CONSTANT_ENCAPSED_STRING","'AVSCODE'",139],["T_WHITESPACE","        ",139],["T_DOUBLE_ARROW","=>",139],["T_WHITESPACE"," ",139],["T_CONSTANT_ENCAPSED_STRING","'avs_result'",139],",",["T_WHITESPACE","\n        ",139],["T_COMMENT","\/\/ cardinal centinel\n",140],["T_WHITESPACE","        ",141],["T_CONSTANT_ENCAPSED_STRING","'AUTHSTATUS3DS'",141],["T_WHITESPACE"," ",141],["T_DOUBLE_ARROW","=>",141],["T_WHITESPACE"," ",141],["T_CONSTANT_ENCAPSED_STRING","'centinel_authstatus'",141],",",["T_WHITESPACE","\n        ",141],["T_CONSTANT_ENCAPSED_STRING","'MPIVENDOR3DS'",142],["T_WHITESPACE","  ",142],["T_DOUBLE_ARROW","=>",142],["T_WHITESPACE"," ",142],["T_CONSTANT_ENCAPSED_STRING","'centinel_mpivendor'",142],",",["T_WHITESPACE","\n        ",142],["T_CONSTANT_ENCAPSED_STRING","'CAVV'",143],["T_WHITESPACE","         ",143],["T_DOUBLE_ARROW","=>",143],["T_WHITESPACE"," ",143],["T_CONSTANT_ENCAPSED_STRING","'centinel_cavv'",143],",",["T_WHITESPACE","\n        ",143],["T_CONSTANT_ENCAPSED_STRING","'ECI3DS'",144],["T_WHITESPACE","       ",144],["T_DOUBLE_ARROW","=>",144],["T_WHITESPACE"," ",144],["T_CONSTANT_ENCAPSED_STRING","'centinel_eci'",144],",",["T_WHITESPACE","\n        ",144],["T_CONSTANT_ENCAPSED_STRING","'XID'",145],["T_WHITESPACE","          ",145],["T_DOUBLE_ARROW","=>",145],["T_WHITESPACE"," ",145],["T_CONSTANT_ENCAPSED_STRING","'centinel_xid'",145],",",["T_WHITESPACE","\n        ",145],["T_CONSTANT_ENCAPSED_STRING","'VPAS'",146],["T_WHITESPACE","         ",146],["T_DOUBLE_ARROW","=>",146],["T_WHITESPACE"," ",146],["T_CONSTANT_ENCAPSED_STRING","'centinel_vpas_result'",146],",",["T_WHITESPACE","\n        ",146],["T_CONSTANT_ENCAPSED_STRING","'ECISUBMITTED3DS'",147],["T_WHITESPACE"," ",147],["T_DOUBLE_ARROW","=>",147],["T_WHITESPACE"," ",147],["T_CONSTANT_ENCAPSED_STRING","'centinel_eci_result'",147],",",["T_WHITESPACE","\n\n        ",147],["T_COMMENT","\/\/ recurring payment profiles\n",149],["T_COMMENT","\/\/'TOKEN' => 'token',\n",150],["T_WHITESPACE","        ",151],["T_CONSTANT_ENCAPSED_STRING","'SUBSCRIBERNAME'",151],["T_WHITESPACE","    ",151],["T_DOUBLE_ARROW","=>",151],["T_CONSTANT_ENCAPSED_STRING","'subscriber_name'",151],",",["T_WHITESPACE","\n        ",151],["T_CONSTANT_ENCAPSED_STRING","'PROFILESTARTDATE'",152],["T_WHITESPACE","  ",152],["T_DOUBLE_ARROW","=>",152],["T_WHITESPACE"," ",152],["T_CONSTANT_ENCAPSED_STRING","'start_datetime'",152],",",["T_WHITESPACE","\n        ",152],["T_CONSTANT_ENCAPSED_STRING","'PROFILEREFERENCE'",153],["T_WHITESPACE","  ",153],["T_DOUBLE_ARROW","=>",153],["T_WHITESPACE"," ",153],["T_CONSTANT_ENCAPSED_STRING","'internal_reference_id'",153],",",["T_WHITESPACE","\n        ",153],["T_CONSTANT_ENCAPSED_STRING","'DESC'",154],["T_WHITESPACE","              ",154],["T_DOUBLE_ARROW","=>",154],["T_WHITESPACE"," ",154],["T_CONSTANT_ENCAPSED_STRING","'schedule_description'",154],",",["T_WHITESPACE","\n        ",154],["T_CONSTANT_ENCAPSED_STRING","'MAXFAILEDPAYMENTS'",155],["T_WHITESPACE"," ",155],["T_DOUBLE_ARROW","=>",155],["T_WHITESPACE"," ",155],["T_CONSTANT_ENCAPSED_STRING","'suspension_threshold'",155],",",["T_WHITESPACE","\n        ",155],["T_CONSTANT_ENCAPSED_STRING","'AUTOBILLAMT'",156],["T_WHITESPACE","       ",156],["T_DOUBLE_ARROW","=>",156],["T_WHITESPACE"," ",156],["T_CONSTANT_ENCAPSED_STRING","'bill_failed_later'",156],",",["T_WHITESPACE","\n        ",156],["T_CONSTANT_ENCAPSED_STRING","'BILLINGPERIOD'",157],["T_WHITESPACE","     ",157],["T_DOUBLE_ARROW","=>",157],["T_WHITESPACE"," ",157],["T_CONSTANT_ENCAPSED_STRING","'period_unit'",157],",",["T_WHITESPACE","\n        ",157],["T_CONSTANT_ENCAPSED_STRING","'BILLINGFREQUENCY'",158],["T_WHITESPACE","    ",158],["T_DOUBLE_ARROW","=>",158],["T_WHITESPACE"," ",158],["T_CONSTANT_ENCAPSED_STRING","'period_frequency'",158],",",["T_WHITESPACE","\n        ",158],["T_CONSTANT_ENCAPSED_STRING","'TOTALBILLINGCYCLES'",159],["T_WHITESPACE","  ",159],["T_DOUBLE_ARROW","=>",159],["T_WHITESPACE"," ",159],["T_CONSTANT_ENCAPSED_STRING","'period_max_cycles'",159],",",["T_WHITESPACE","\n",159],["T_COMMENT","\/\/'AMT' => 'billing_amount', \/\/ have to use 'amount', see above\n",160],["T_WHITESPACE","        ",161],["T_CONSTANT_ENCAPSED_STRING","'TRIALBILLINGPERIOD'",161],["T_WHITESPACE","      ",161],["T_DOUBLE_ARROW","=>",161],["T_WHITESPACE"," ",161],["T_CONSTANT_ENCAPSED_STRING","'trial_period_unit'",161],",",["T_WHITESPACE","\n        ",161],["T_CONSTANT_ENCAPSED_STRING","'TRIALBILLINGFREQUENCY'",162],["T_WHITESPACE","   ",162],["T_DOUBLE_ARROW","=>",162],["T_WHITESPACE"," ",162],["T_CONSTANT_ENCAPSED_STRING","'trial_period_frequency'",162],",",["T_WHITESPACE","\n        ",162],["T_CONSTANT_ENCAPSED_STRING","'TRIALTOTALBILLINGCYCLES'",163],["T_WHITESPACE"," ",163],["T_DOUBLE_ARROW","=>",163],["T_WHITESPACE"," ",163],["T_CONSTANT_ENCAPSED_STRING","'trial_period_max_cycles'",163],",",["T_WHITESPACE","\n        ",163],["T_CONSTANT_ENCAPSED_STRING","'TRIALAMT'",164],["T_WHITESPACE","            ",164],["T_DOUBLE_ARROW","=>",164],["T_WHITESPACE"," ",164],["T_CONSTANT_ENCAPSED_STRING","'trial_billing_amount'",164],",",["T_WHITESPACE","\n",164],["T_COMMENT","\/\/ 'CURRENCYCODE' => 'currency_code',\n",165],["T_WHITESPACE","        ",166],["T_CONSTANT_ENCAPSED_STRING","'SHIPPINGAMT'",166],["T_WHITESPACE","         ",166],["T_DOUBLE_ARROW","=>",166],["T_WHITESPACE"," ",166],["T_CONSTANT_ENCAPSED_STRING","'shipping_amount'",166],",",["T_WHITESPACE","\n        ",166],["T_CONSTANT_ENCAPSED_STRING","'TAXAMT'",167],["T_WHITESPACE","              ",167],["T_DOUBLE_ARROW","=>",167],["T_WHITESPACE"," ",167],["T_CONSTANT_ENCAPSED_STRING","'tax_amount'",167],",",["T_WHITESPACE","\n        ",167],["T_CONSTANT_ENCAPSED_STRING","'INITAMT'",168],["T_WHITESPACE","             ",168],["T_DOUBLE_ARROW","=>",168],["T_WHITESPACE"," ",168],["T_CONSTANT_ENCAPSED_STRING","'init_amount'",168],",",["T_WHITESPACE","\n        ",168],["T_CONSTANT_ENCAPSED_STRING","'FAILEDINITAMTACTION'",169],["T_WHITESPACE"," ",169],["T_DOUBLE_ARROW","=>",169],["T_WHITESPACE"," ",169],["T_CONSTANT_ENCAPSED_STRING","'init_may_fail'",169],",",["T_WHITESPACE","\n        ",169],["T_CONSTANT_ENCAPSED_STRING","'PROFILEID'",170],["T_WHITESPACE","           ",170],["T_DOUBLE_ARROW","=>",170],["T_WHITESPACE"," ",170],["T_CONSTANT_ENCAPSED_STRING","'recurring_profile_id'",170],",",["T_WHITESPACE","\n        ",170],["T_CONSTANT_ENCAPSED_STRING","'PROFILESTATUS'",171],["T_WHITESPACE","       ",171],["T_DOUBLE_ARROW","=>",171],["T_WHITESPACE"," ",171],["T_CONSTANT_ENCAPSED_STRING","'recurring_profile_status'",171],",",["T_WHITESPACE","\n        ",171],["T_CONSTANT_ENCAPSED_STRING","'STATUS'",172],["T_WHITESPACE","              ",172],["T_DOUBLE_ARROW","=>",172],["T_WHITESPACE"," ",172],["T_CONSTANT_ENCAPSED_STRING","'status'",172],",",["T_WHITESPACE","\n\n        ",172],["T_COMMENT","\/\/Next two fields are used for Brazil only\n",174],["T_WHITESPACE","        ",175],["T_CONSTANT_ENCAPSED_STRING","'TAXID'",175],["T_WHITESPACE","               ",175],["T_DOUBLE_ARROW","=>",175],["T_WHITESPACE"," ",175],["T_CONSTANT_ENCAPSED_STRING","'buyer_tax_id'",175],",",["T_WHITESPACE","\n        ",175],["T_CONSTANT_ENCAPSED_STRING","'TAXIDTYPE'",176],["T_WHITESPACE","           ",176],["T_DOUBLE_ARROW","=>",176],["T_WHITESPACE"," ",176],["T_CONSTANT_ENCAPSED_STRING","'buyer_tax_id_type'",176],",",["T_WHITESPACE","\n\n        ",176],["T_CONSTANT_ENCAPSED_STRING","'BILLINGAGREEMENTID'",178],["T_WHITESPACE"," ",178],["T_DOUBLE_ARROW","=>",178],["T_WHITESPACE"," ",178],["T_CONSTANT_ENCAPSED_STRING","'billing_agreement_id'",178],",",["T_WHITESPACE","\n        ",178],["T_CONSTANT_ENCAPSED_STRING","'REFERENCEID'",179],["T_WHITESPACE"," ",179],["T_DOUBLE_ARROW","=>",179],["T_WHITESPACE"," ",179],["T_CONSTANT_ENCAPSED_STRING","'reference_id'",179],",",["T_WHITESPACE","\n        ",179],["T_CONSTANT_ENCAPSED_STRING","'BILLINGAGREEMENTSTATUS'",180],["T_WHITESPACE"," ",180],["T_DOUBLE_ARROW","=>",180],["T_WHITESPACE"," ",180],["T_CONSTANT_ENCAPSED_STRING","'billing_agreement_status'",180],",",["T_WHITESPACE","\n        ",180],["T_CONSTANT_ENCAPSED_STRING","'BILLINGTYPE'",181],["T_WHITESPACE"," ",181],["T_DOUBLE_ARROW","=>",181],["T_WHITESPACE"," ",181],["T_CONSTANT_ENCAPSED_STRING","'billing_type'",181],",",["T_WHITESPACE","\n        ",181],["T_CONSTANT_ENCAPSED_STRING","'SREET'",182],["T_WHITESPACE"," ",182],["T_DOUBLE_ARROW","=>",182],["T_WHITESPACE"," ",182],["T_CONSTANT_ENCAPSED_STRING","'street'",182],",",["T_WHITESPACE","\n        ",182],["T_CONSTANT_ENCAPSED_STRING","'CITY'",183],["T_WHITESPACE"," ",183],["T_DOUBLE_ARROW","=>",183],["T_WHITESPACE"," ",183],["T_CONSTANT_ENCAPSED_STRING","'city'",183],",",["T_WHITESPACE","\n        ",183],["T_CONSTANT_ENCAPSED_STRING","'STATE'",184],["T_WHITESPACE"," ",184],["T_DOUBLE_ARROW","=>",184],["T_WHITESPACE"," ",184],["T_CONSTANT_ENCAPSED_STRING","'state'",184],",",["T_WHITESPACE","\n        ",184],["T_CONSTANT_ENCAPSED_STRING","'COUNTRYCODE'",185],["T_WHITESPACE"," ",185],["T_DOUBLE_ARROW","=>",185],["T_WHITESPACE"," ",185],["T_CONSTANT_ENCAPSED_STRING","'countrycode'",185],",",["T_WHITESPACE","\n        ",185],["T_CONSTANT_ENCAPSED_STRING","'ZIP'",186],["T_WHITESPACE"," ",186],["T_DOUBLE_ARROW","=>",186],["T_WHITESPACE"," ",186],["T_CONSTANT_ENCAPSED_STRING","'zip'",186],",",["T_WHITESPACE","\n        ",186],["T_CONSTANT_ENCAPSED_STRING","'PAYERBUSINESS'",187],["T_WHITESPACE"," ",187],["T_DOUBLE_ARROW","=>",187],["T_WHITESPACE"," ",187],["T_CONSTANT_ENCAPSED_STRING","'payer_business'",187],",",["T_WHITESPACE","\n    ",187],")",";",["T_WHITESPACE","\n\n    ",188],["T_DOC_COMMENT","\/**\n     * Filter callbacks for preparing internal amounts to NVP request\n     *\n     * @var array\n     *\/",190],["T_WHITESPACE","\n    ",194],["T_PROTECTED","protected",195],["T_WHITESPACE"," ",195],["T_VARIABLE","$_exportToRequestFilters",195],["T_WHITESPACE"," ",195],"=",["T_WHITESPACE"," ",195],["T_ARRAY","array",195],"(",["T_WHITESPACE","\n        ",195],["T_CONSTANT_ENCAPSED_STRING","'AMT'",196],["T_WHITESPACE","         ",196],["T_DOUBLE_ARROW","=>",196],["T_WHITESPACE"," ",196],["T_CONSTANT_ENCAPSED_STRING","'_filterAmount'",196],",",["T_WHITESPACE","\n        ",196],["T_CONSTANT_ENCAPSED_STRING","'ITEMAMT'",197],["T_WHITESPACE","     ",197],["T_DOUBLE_ARROW","=>",197],["T_WHITESPACE"," ",197],["T_CONSTANT_ENCAPSED_STRING","'_filterAmount'",197],",",["T_WHITESPACE","\n        ",197],["T_CONSTANT_ENCAPSED_STRING","'TRIALAMT'",198],["T_WHITESPACE","    ",198],["T_DOUBLE_ARROW","=>",198],["T_WHITESPACE"," ",198],["T_CONSTANT_ENCAPSED_STRING","'_filterAmount'",198],",",["T_WHITESPACE","\n        ",198],["T_CONSTANT_ENCAPSED_STRING","'SHIPPINGAMT'",199],["T_WHITESPACE"," ",199],["T_DOUBLE_ARROW","=>",199],["T_WHITESPACE"," ",199],["T_CONSTANT_ENCAPSED_STRING","'_filterAmount'",199],",",["T_WHITESPACE","\n        ",199],["T_CONSTANT_ENCAPSED_STRING","'TAXAMT'",200],["T_WHITESPACE","      ",200],["T_DOUBLE_ARROW","=>",200],["T_WHITESPACE"," ",200],["T_CONSTANT_ENCAPSED_STRING","'_filterAmount'",200],",",["T_WHITESPACE","\n        ",200],["T_CONSTANT_ENCAPSED_STRING","'INITAMT'",201],["T_WHITESPACE","     ",201],["T_DOUBLE_ARROW","=>",201],["T_WHITESPACE"," ",201],["T_CONSTANT_ENCAPSED_STRING","'_filterAmount'",201],",",["T_WHITESPACE","\n        ",201],["T_CONSTANT_ENCAPSED_STRING","'CREDITCARDTYPE'",202],["T_WHITESPACE"," ",202],["T_DOUBLE_ARROW","=>",202],["T_WHITESPACE"," ",202],["T_CONSTANT_ENCAPSED_STRING","'_filterCcType'",202],",",["T_WHITESPACE","\n",202],["T_COMMENT","\/\/        'PROFILESTARTDATE' => '_filterToPaypalDate',\n",203],["T_WHITESPACE","        ",204],["T_CONSTANT_ENCAPSED_STRING","'AUTOBILLAMT'",204],["T_WHITESPACE"," ",204],["T_DOUBLE_ARROW","=>",204],["T_WHITESPACE"," ",204],["T_CONSTANT_ENCAPSED_STRING","'_filterBillFailedLater'",204],",",["T_WHITESPACE","\n        ",204],["T_CONSTANT_ENCAPSED_STRING","'BILLINGPERIOD'",205],["T_WHITESPACE"," ",205],["T_DOUBLE_ARROW","=>",205],["T_WHITESPACE"," ",205],["T_CONSTANT_ENCAPSED_STRING","'_filterPeriodUnit'",205],",",["T_WHITESPACE","\n        ",205],["T_CONSTANT_ENCAPSED_STRING","'TRIALBILLINGPERIOD'",206],["T_WHITESPACE"," ",206],["T_DOUBLE_ARROW","=>",206],["T_WHITESPACE"," ",206],["T_CONSTANT_ENCAPSED_STRING","'_filterPeriodUnit'",206],",",["T_WHITESPACE","\n        ",206],["T_CONSTANT_ENCAPSED_STRING","'FAILEDINITAMTACTION'",207],["T_WHITESPACE"," ",207],["T_DOUBLE_ARROW","=>",207],["T_WHITESPACE"," ",207],["T_CONSTANT_ENCAPSED_STRING","'_filterInitialAmountMayFail'",207],",",["T_WHITESPACE","\n        ",207],["T_CONSTANT_ENCAPSED_STRING","'BILLINGAGREEMENTSTATUS'",208],["T_WHITESPACE"," ",208],["T_DOUBLE_ARROW","=>",208],["T_WHITESPACE"," ",208],["T_CONSTANT_ENCAPSED_STRING","'_filterBillingAgreementStatus'",208],",",["T_WHITESPACE","\n        ",208],["T_CONSTANT_ENCAPSED_STRING","'NOSHIPPING'",209],["T_WHITESPACE"," ",209],["T_DOUBLE_ARROW","=>",209],["T_WHITESPACE"," ",209],["T_CONSTANT_ENCAPSED_STRING","'_filterInt'",209],",",["T_WHITESPACE","\n    ",209],")",";",["T_WHITESPACE","\n\n    ",210],["T_PROTECTED","protected",212],["T_WHITESPACE"," ",212],["T_VARIABLE","$_importFromRequestFilters",212],["T_WHITESPACE"," ",212],"=",["T_WHITESPACE"," ",212],["T_ARRAY","array",212],"(",["T_WHITESPACE","\n        ",212],["T_CONSTANT_ENCAPSED_STRING","'REDIRECTREQUIRED'",213],["T_WHITESPACE","  ",213],["T_DOUBLE_ARROW","=>",213],["T_WHITESPACE"," ",213],["T_CONSTANT_ENCAPSED_STRING","'_filterToBool'",213],",",["T_WHITESPACE","\n        ",213],["T_CONSTANT_ENCAPSED_STRING","'SUCCESSPAGEREDIRECTREQUESTED'",214],["T_WHITESPACE","  ",214],["T_DOUBLE_ARROW","=>",214],["T_WHITESPACE"," ",214],["T_CONSTANT_ENCAPSED_STRING","'_filterToBool'",214],",",["T_WHITESPACE","\n        ",214],["T_CONSTANT_ENCAPSED_STRING","'PAYMENTSTATUS'",215],["T_WHITESPACE"," ",215],["T_DOUBLE_ARROW","=>",215],["T_WHITESPACE"," ",215],["T_CONSTANT_ENCAPSED_STRING","'_filterPaymentStatusFromNvpToInfo'",215],",",["T_WHITESPACE","\n    ",215],")",";",["T_WHITESPACE","\n\n    ",216],["T_DOC_COMMENT","\/**\n     * Request map for each API call\n     * @var array\n     *\/",218],["T_WHITESPACE","\n    ",221],["T_PROTECTED","protected",222],["T_WHITESPACE"," ",222],["T_VARIABLE","$_eachCallRequest",222],["T_WHITESPACE"," ",222],"=",["T_WHITESPACE"," ",222],["T_ARRAY","array",222],"(",["T_CONSTANT_ENCAPSED_STRING","'VERSION'",222],",",["T_WHITESPACE"," ",222],["T_CONSTANT_ENCAPSED_STRING","'USER'",222],",",["T_WHITESPACE"," ",222],["T_CONSTANT_ENCAPSED_STRING","'PWD'",222],",",["T_WHITESPACE"," ",222],["T_CONSTANT_ENCAPSED_STRING","'SIGNATURE'",222],",",["T_WHITESPACE"," ",222],["T_CONSTANT_ENCAPSED_STRING","'BUTTONSOURCE'",222],",",")",";",["T_WHITESPACE","\n\n    ",222],["T_DOC_COMMENT","\/**\n     * SetExpressCheckout request\/response map\n     * @var array\n     *\/",224],["T_WHITESPACE","\n    ",227],["T_PROTECTED","protected",228],["T_WHITESPACE"," ",228],["T_VARIABLE","$_setExpressCheckoutRequest",228],["T_WHITESPACE"," ",228],"=",["T_WHITESPACE"," ",228],["T_ARRAY","array",228],"(",["T_WHITESPACE","\n        ",228],["T_CONSTANT_ENCAPSED_STRING","'PAYMENTACTION'",229],",",["T_WHITESPACE"," ",229],["T_CONSTANT_ENCAPSED_STRING","'AMT'",229],",",["T_WHITESPACE"," ",229],["T_CONSTANT_ENCAPSED_STRING","'CURRENCYCODE'",229],",",["T_WHITESPACE"," ",229],["T_CONSTANT_ENCAPSED_STRING","'RETURNURL'",229],",",["T_WHITESPACE"," ",229],["T_CONSTANT_ENCAPSED_STRING","'CANCELURL'",229],",",["T_WHITESPACE"," ",229],["T_CONSTANT_ENCAPSED_STRING","'INVNUM'",229],",",["T_WHITESPACE"," ",229],["T_CONSTANT_ENCAPSED_STRING","'SOLUTIONTYPE'",229],",",["T_WHITESPACE"," ",229],["T_CONSTANT_ENCAPSED_STRING","'NOSHIPPING'",229],",",["T_WHITESPACE","\n        ",229],["T_CONSTANT_ENCAPSED_STRING","'GIROPAYCANCELURL'",230],",",["T_WHITESPACE"," ",230],["T_CONSTANT_ENCAPSED_STRING","'GIROPAYSUCCESSURL'",230],",",["T_WHITESPACE"," ",230],["T_CONSTANT_ENCAPSED_STRING","'BANKTXNPENDINGURL'",230],",",["T_WHITESPACE","\n        ",230],["T_CONSTANT_ENCAPSED_STRING","'PAGESTYLE'",231],",",["T_WHITESPACE"," ",231],["T_CONSTANT_ENCAPSED_STRING","'HDRIMG'",231],",",["T_WHITESPACE"," ",231],["T_CONSTANT_ENCAPSED_STRING","'HDRBORDERCOLOR'",231],",",["T_WHITESPACE"," ",231],["T_CONSTANT_ENCAPSED_STRING","'HDRBACKCOLOR'",231],",",["T_WHITESPACE"," ",231],["T_CONSTANT_ENCAPSED_STRING","'PAYFLOWCOLOR'",231],",",["T_WHITESPACE"," ",231],["T_CONSTANT_ENCAPSED_STRING","'LOCALECODE'",231],",",["T_WHITESPACE","\n        ",231],["T_CONSTANT_ENCAPSED_STRING","'BILLINGTYPE'",232],",",["T_WHITESPACE"," ",232],["T_CONSTANT_ENCAPSED_STRING","'SUBJECT'",232],",",["T_WHITESPACE"," ",232],["T_CONSTANT_ENCAPSED_STRING","'ITEMAMT'",232],",",["T_WHITESPACE"," ",232],["T_CONSTANT_ENCAPSED_STRING","'SHIPPINGAMT'",232],",",["T_WHITESPACE"," ",232],["T_CONSTANT_ENCAPSED_STRING","'TAXAMT'",232],",",["T_WHITESPACE"," ",232],["T_CONSTANT_ENCAPSED_STRING","'REQBILLINGADDRESS'",232],",",["T_WHITESPACE","\n        ",232],["T_CONSTANT_ENCAPSED_STRING","'USERSELECTEDFUNDINGSOURCE'",233],["T_WHITESPACE","\n    ",233],")",";",["T_WHITESPACE","\n    ",234],["T_PROTECTED","protected",235],["T_WHITESPACE"," ",235],["T_VARIABLE","$_setExpressCheckoutResponse",235],["T_WHITESPACE"," ",235],"=",["T_WHITESPACE"," ",235],["T_ARRAY","array",235],"(",["T_CONSTANT_ENCAPSED_STRING","'TOKEN'",235],")",";",["T_WHITESPACE","\n\n    ",235],["T_DOC_COMMENT","\/**\n     * GetExpressCheckoutDetails request\/response map\n     * @var array\n     *\/",237],["T_WHITESPACE","\n    ",240],["T_PROTECTED","protected",241],["T_WHITESPACE"," ",241],["T_VARIABLE","$_getExpressCheckoutDetailsRequest",241],["T_WHITESPACE"," ",241],"=",["T_WHITESPACE"," ",241],["T_ARRAY","array",241],"(",["T_CONSTANT_ENCAPSED_STRING","'TOKEN'",241],",",["T_WHITESPACE"," ",241],["T_CONSTANT_ENCAPSED_STRING","'SUBJECT'",241],",",")",";",["T_WHITESPACE","\n\n    ",241],["T_DOC_COMMENT","\/**\n     * DoExpressCheckoutPayment request\/response map\n     * @var array\n     *\/",243],["T_WHITESPACE","\n    ",246],["T_PROTECTED","protected",247],["T_WHITESPACE"," ",247],["T_VARIABLE","$_doExpressCheckoutPaymentRequest",247],["T_WHITESPACE"," ",247],"=",["T_WHITESPACE"," ",247],["T_ARRAY","array",247],"(",["T_WHITESPACE","\n        ",247],["T_CONSTANT_ENCAPSED_STRING","'TOKEN'",248],",",["T_WHITESPACE"," ",248],["T_CONSTANT_ENCAPSED_STRING","'PAYERID'",248],",",["T_WHITESPACE"," ",248],["T_CONSTANT_ENCAPSED_STRING","'PAYMENTACTION'",248],",",["T_WHITESPACE"," ",248],["T_CONSTANT_ENCAPSED_STRING","'AMT'",248],",",["T_WHITESPACE"," ",248],["T_CONSTANT_ENCAPSED_STRING","'CURRENCYCODE'",248],",",["T_WHITESPACE"," ",248],["T_CONSTANT_ENCAPSED_STRING","'IPADDRESS'",248],",",["T_WHITESPACE"," ",248],["T_CONSTANT_ENCAPSED_STRING","'BUTTONSOURCE'",248],",",["T_WHITESPACE"," ",248],["T_CONSTANT_ENCAPSED_STRING","'NOTIFYURL'",248],",",["T_WHITESPACE","\n        ",248],["T_CONSTANT_ENCAPSED_STRING","'RETURNFMFDETAILS'",249],",",["T_WHITESPACE"," ",249],["T_CONSTANT_ENCAPSED_STRING","'SUBJECT'",249],",",["T_WHITESPACE"," ",249],["T_CONSTANT_ENCAPSED_STRING","'ITEMAMT'",249],",",["T_WHITESPACE"," ",249],["T_CONSTANT_ENCAPSED_STRING","'SHIPPINGAMT'",249],",",["T_WHITESPACE"," ",249],["T_CONSTANT_ENCAPSED_STRING","'TAXAMT'",249],",",["T_WHITESPACE","\n    ",249],")",";",["T_WHITESPACE","\n    ",250],["T_PROTECTED","protected",251],["T_WHITESPACE"," ",251],["T_VARIABLE","$_doExpressCheckoutPaymentResponse",251],["T_WHITESPACE"," ",251],"=",["T_WHITESPACE"," ",251],["T_ARRAY","array",251],"(",["T_WHITESPACE","\n        ",251],["T_CONSTANT_ENCAPSED_STRING","'TRANSACTIONID'",252],",",["T_WHITESPACE"," ",252],["T_CONSTANT_ENCAPSED_STRING","'AMT'",252],",",["T_WHITESPACE"," ",252],["T_CONSTANT_ENCAPSED_STRING","'PAYMENTSTATUS'",252],",",["T_WHITESPACE"," ",252],["T_CONSTANT_ENCAPSED_STRING","'PENDINGREASON'",252],",",["T_WHITESPACE"," ",252],["T_CONSTANT_ENCAPSED_STRING","'REDIRECTREQUIRED'",252],["T_WHITESPACE","\n    ",252],")",";",["T_WHITESPACE","\n\n    ",253],["T_DOC_COMMENT","\/**\n     * DoDirectPayment request\/response map\n     * @var array\n     *\/",255],["T_WHITESPACE","\n    ",258],["T_PROTECTED","protected",259],["T_WHITESPACE"," ",259],["T_VARIABLE","$_doDirectPaymentRequest",259],["T_WHITESPACE"," ",259],"=",["T_WHITESPACE"," ",259],["T_ARRAY","array",259],"(",["T_WHITESPACE","\n        ",259],["T_CONSTANT_ENCAPSED_STRING","'PAYMENTACTION'",260],",",["T_WHITESPACE"," ",260],["T_CONSTANT_ENCAPSED_STRING","'IPADDRESS'",260],",",["T_WHITESPACE"," ",260],["T_CONSTANT_ENCAPSED_STRING","'RETURNFMFDETAILS'",260],",",["T_WHITESPACE","\n        ",260],["T_CONSTANT_ENCAPSED_STRING","'AMT'",261],",",["T_WHITESPACE"," ",261],["T_CONSTANT_ENCAPSED_STRING","'CURRENCYCODE'",261],",",["T_WHITESPACE"," ",261],["T_CONSTANT_ENCAPSED_STRING","'INVNUM'",261],",",["T_WHITESPACE"," ",261],["T_CONSTANT_ENCAPSED_STRING","'NOTIFYURL'",261],",",["T_WHITESPACE"," ",261],["T_CONSTANT_ENCAPSED_STRING","'EMAIL'",261],",",["T_WHITESPACE"," ",261],["T_CONSTANT_ENCAPSED_STRING","'ITEMAMT'",261],",",["T_WHITESPACE"," ",261],["T_CONSTANT_ENCAPSED_STRING","'SHIPPINGAMT'",261],",",["T_WHITESPACE"," ",261],["T_CONSTANT_ENCAPSED_STRING","'TAXAMT'",261],",",["T_WHITESPACE","\n        ",261],["T_CONSTANT_ENCAPSED_STRING","'CREDITCARDTYPE'",262],",",["T_WHITESPACE"," ",262],["T_CONSTANT_ENCAPSED_STRING","'ACCT'",262],",",["T_WHITESPACE"," ",262],["T_CONSTANT_ENCAPSED_STRING","'EXPDATE'",262],",",["T_WHITESPACE"," ",262],["T_CONSTANT_ENCAPSED_STRING","'CVV2'",262],",",["T_WHITESPACE"," ",262],["T_CONSTANT_ENCAPSED_STRING","'STARTDATE'",262],",",["T_WHITESPACE"," ",262],["T_CONSTANT_ENCAPSED_STRING","'ISSUENUMBER'",262],",",["T_WHITESPACE","\n        ",262],["T_CONSTANT_ENCAPSED_STRING","'AUTHSTATUS3DS'",263],",",["T_WHITESPACE"," ",263],["T_CONSTANT_ENCAPSED_STRING","'MPIVENDOR3DS'",263],",",["T_WHITESPACE"," ",263],["T_CONSTANT_ENCAPSED_STRING","'CAVV'",263],",",["T_WHITESPACE"," ",263],["T_CONSTANT_ENCAPSED_STRING","'ECI3DS'",263],",",["T_WHITESPACE"," ",263],["T_CONSTANT_ENCAPSED_STRING","'XID'",263],",",["T_WHITESPACE","\n    ",263],")",";",["T_WHITESPACE","\n    ",264],["T_PROTECTED","protected",265],["T_WHITESPACE"," ",265],["T_VARIABLE","$_doDirectPaymentResponse",265],["T_WHITESPACE"," ",265],"=",["T_WHITESPACE"," ",265],["T_ARRAY","array",265],"(",["T_WHITESPACE","\n        ",265],["T_CONSTANT_ENCAPSED_STRING","'TRANSACTIONID'",266],",",["T_WHITESPACE"," ",266],["T_CONSTANT_ENCAPSED_STRING","'AMT'",266],",",["T_WHITESPACE"," ",266],["T_CONSTANT_ENCAPSED_STRING","'AVSCODE'",266],",",["T_WHITESPACE"," ",266],["T_CONSTANT_ENCAPSED_STRING","'CVV2MATCH'",266],",",["T_WHITESPACE"," ",266],["T_CONSTANT_ENCAPSED_STRING","'VPAS'",266],",",["T_WHITESPACE"," ",266],["T_CONSTANT_ENCAPSED_STRING","'ECISUBMITTED3DS'",266],["T_WHITESPACE","\n    ",266],")",";",["T_WHITESPACE","\n\n    ",267],["T_DOC_COMMENT","\/**\n     * DoReauthorization request\/response map\n     * @var array\n     *\/",269],["T_WHITESPACE","\n    ",272],["T_PROTECTED","protected",273],["T_WHITESPACE"," ",273],["T_VARIABLE","$_doReauthorizationRequest",273],["T_WHITESPACE"," ",273],"=",["T_WHITESPACE"," ",273],["T_ARRAY","array",273],"(",["T_CONSTANT_ENCAPSED_STRING","'AUTHORIZATIONID'",273],",",["T_WHITESPACE"," ",273],["T_CONSTANT_ENCAPSED_STRING","'AMT'",273],",",["T_WHITESPACE"," ",273],["T_CONSTANT_ENCAPSED_STRING","'CURRENCYCODE'",273],")",";",["T_WHITESPACE","\n    ",273],["T_PROTECTED","protected",274],["T_WHITESPACE"," ",274],["T_VARIABLE","$_doReauthorizationResponse",274],["T_WHITESPACE"," ",274],"=",["T_WHITESPACE"," ",274],["T_ARRAY","array",274],"(",["T_WHITESPACE","\n        ",274],["T_CONSTANT_ENCAPSED_STRING","'AUTHORIZATIONID'",275],",",["T_WHITESPACE"," ",275],["T_CONSTANT_ENCAPSED_STRING","'PAYMENTSTATUS'",275],",",["T_WHITESPACE"," ",275],["T_CONSTANT_ENCAPSED_STRING","'PENDINGREASON'",275],",",["T_WHITESPACE"," ",275],["T_CONSTANT_ENCAPSED_STRING","'PROTECTIONELIGIBILITY'",275],["T_WHITESPACE","\n    ",275],")",";",["T_WHITESPACE","\n\n    ",276],["T_DOC_COMMENT","\/**\n     * DoCapture request\/response map\n     * @var array\n     *\/",278],["T_WHITESPACE","\n    ",281],["T_PROTECTED","protected",282],["T_WHITESPACE"," ",282],["T_VARIABLE","$_doCaptureRequest",282],["T_WHITESPACE"," ",282],"=",["T_WHITESPACE"," ",282],["T_ARRAY","array",282],"(",["T_CONSTANT_ENCAPSED_STRING","'AUTHORIZATIONID'",282],",",["T_WHITESPACE"," ",282],["T_CONSTANT_ENCAPSED_STRING","'COMPLETETYPE'",282],",",["T_WHITESPACE"," ",282],["T_CONSTANT_ENCAPSED_STRING","'AMT'",282],",",["T_WHITESPACE"," ",282],["T_CONSTANT_ENCAPSED_STRING","'CURRENCYCODE'",282],",",["T_WHITESPACE"," ",282],["T_CONSTANT_ENCAPSED_STRING","'NOTE'",282],",",["T_WHITESPACE"," ",282],["T_CONSTANT_ENCAPSED_STRING","'INVNUM'",282],",",")",";",["T_WHITESPACE","\n    ",282],["T_PROTECTED","protected",283],["T_WHITESPACE"," ",283],["T_VARIABLE","$_doCaptureResponse",283],["T_WHITESPACE"," ",283],"=",["T_WHITESPACE"," ",283],["T_ARRAY","array",283],"(",["T_CONSTANT_ENCAPSED_STRING","'TRANSACTIONID'",283],",",["T_WHITESPACE"," ",283],["T_CONSTANT_ENCAPSED_STRING","'CURRENCYCODE'",283],",",["T_WHITESPACE"," ",283],["T_CONSTANT_ENCAPSED_STRING","'AMT'",283],",",["T_WHITESPACE"," ",283],["T_CONSTANT_ENCAPSED_STRING","'PAYMENTSTATUS'",283],",",["T_WHITESPACE"," ",283],["T_CONSTANT_ENCAPSED_STRING","'PENDINGREASON'",283],",",")",";",["T_WHITESPACE","\n\n\n    ",283],["T_DOC_COMMENT","\/**\n     * DoAuthorization request\/response map\n     * @var array\n     *\/",286],["T_WHITESPACE","\n    ",289],["T_PROTECTED","protected",290],["T_WHITESPACE"," ",290],["T_VARIABLE","$_doAuthorizationRequest",290],["T_WHITESPACE"," ",290],"=",["T_WHITESPACE"," ",290],["T_ARRAY","array",290],"(",["T_CONSTANT_ENCAPSED_STRING","'TRANSACTIONID'",290],",",["T_WHITESPACE"," ",290],["T_CONSTANT_ENCAPSED_STRING","'AMT'",290],",",["T_WHITESPACE"," ",290],["T_CONSTANT_ENCAPSED_STRING","'CURRENCYCODE'",290],")",";",["T_WHITESPACE","\n    ",290],["T_PROTECTED","protected",291],["T_WHITESPACE"," ",291],["T_VARIABLE","$_doAuthorizationResponse",291],["T_WHITESPACE"," ",291],"=",["T_WHITESPACE"," ",291],["T_ARRAY","array",291],"(",["T_CONSTANT_ENCAPSED_STRING","'TRANSACTIONID'",291],",",["T_WHITESPACE"," ",291],["T_CONSTANT_ENCAPSED_STRING","'AMT'",291],")",";",["T_WHITESPACE","\n\n    ",291],["T_DOC_COMMENT","\/**\n     * DoVoid request map\n     * @var array\n     *\/",293],["T_WHITESPACE","\n    ",296],["T_PROTECTED","protected",297],["T_WHITESPACE"," ",297],["T_VARIABLE","$_doVoidRequest",297],["T_WHITESPACE"," ",297],"=",["T_WHITESPACE"," ",297],["T_ARRAY","array",297],"(",["T_CONSTANT_ENCAPSED_STRING","'AUTHORIZATIONID'",297],",",["T_WHITESPACE"," ",297],["T_CONSTANT_ENCAPSED_STRING","'NOTE'",297],",",")",";",["T_WHITESPACE","\n\n    ",297],["T_DOC_COMMENT","\/**\n     * GetTransactionDetailsRequest\n     * @var array\n     *\/",299],["T_WHITESPACE","\n    ",302],["T_PROTECTED","protected",303],["T_WHITESPACE"," ",303],["T_VARIABLE","$_getTransactionDetailsRequest",303],["T_WHITESPACE"," ",303],"=",["T_WHITESPACE"," ",303],["T_ARRAY","array",303],"(",["T_CONSTANT_ENCAPSED_STRING","'TRANSACTIONID'",303],")",";",["T_WHITESPACE","\n    ",303],["T_PROTECTED","protected",304],["T_WHITESPACE"," ",304],["T_VARIABLE","$_getTransactionDetailsResponse",304],["T_WHITESPACE"," ",304],"=",["T_WHITESPACE"," ",304],["T_ARRAY","array",304],"(",["T_WHITESPACE","\n        ",304],["T_CONSTANT_ENCAPSED_STRING","'PAYERID'",305],",",["T_WHITESPACE"," ",305],["T_CONSTANT_ENCAPSED_STRING","'FIRSTNAME'",305],",",["T_WHITESPACE"," ",305],["T_CONSTANT_ENCAPSED_STRING","'LASTNAME'",305],",",["T_WHITESPACE"," ",305],["T_CONSTANT_ENCAPSED_STRING","'TRANSACTIONID'",305],",",["T_WHITESPACE"," ",305],["T_CONSTANT_ENCAPSED_STRING","'PARENTTRANSACTIONID'",305],",",["T_WHITESPACE"," ",305],["T_CONSTANT_ENCAPSED_STRING","'CURRENCYCODE'",305],",",["T_WHITESPACE"," ",305],["T_CONSTANT_ENCAPSED_STRING","'AMT'",305],",",["T_WHITESPACE","\n        ",305],["T_CONSTANT_ENCAPSED_STRING","'PAYMENTSTATUS'",306],",",["T_WHITESPACE"," ",306],["T_CONSTANT_ENCAPSED_STRING","'PENDINGREASON'",306],",",["T_WHITESPACE","\n    ",306],")",";",["T_WHITESPACE","\n\n    ",307],["T_DOC_COMMENT","\/**\n     * RefundTransaction request\/response map\n     * @var array\n     *\/",309],["T_WHITESPACE","\n    ",312],["T_PROTECTED","protected",313],["T_WHITESPACE"," ",313],["T_VARIABLE","$_refundTransactionRequest",313],["T_WHITESPACE"," ",313],"=",["T_WHITESPACE"," ",313],["T_ARRAY","array",313],"(",["T_CONSTANT_ENCAPSED_STRING","'TRANSACTIONID'",313],",",["T_WHITESPACE"," ",313],["T_CONSTANT_ENCAPSED_STRING","'REFUNDTYPE'",313],",",["T_WHITESPACE"," ",313],["T_CONSTANT_ENCAPSED_STRING","'CURRENCYCODE'",313],",",["T_WHITESPACE"," ",313],["T_CONSTANT_ENCAPSED_STRING","'NOTE'",313],",",")",";",["T_WHITESPACE","\n    ",313],["T_PROTECTED","protected",314],["T_WHITESPACE"," ",314],["T_VARIABLE","$_refundTransactionResponse",314],["T_WHITESPACE"," ",314],"=",["T_WHITESPACE"," ",314],["T_ARRAY","array",314],"(",["T_CONSTANT_ENCAPSED_STRING","'REFUNDTRANSACTIONID'",314],",",["T_WHITESPACE"," ",314],["T_CONSTANT_ENCAPSED_STRING","'GROSSREFUNDAMT'",314],",",")",";",["T_WHITESPACE","\n\n    ",314],["T_DOC_COMMENT","\/**\n     * ManagePendingTransactionStatus request\/response map\n     *\/",316],["T_WHITESPACE","\n    ",318],["T_PROTECTED","protected",319],["T_WHITESPACE"," ",319],["T_VARIABLE","$_managePendingTransactionStatusRequest",319],["T_WHITESPACE"," ",319],"=",["T_WHITESPACE"," ",319],["T_ARRAY","array",319],"(",["T_CONSTANT_ENCAPSED_STRING","'TRANSACTIONID'",319],",",["T_WHITESPACE"," ",319],["T_CONSTANT_ENCAPSED_STRING","'ACTION'",319],")",";",["T_WHITESPACE","\n    ",319],["T_PROTECTED","protected",320],["T_WHITESPACE"," ",320],["T_VARIABLE","$_managePendingTransactionStatusResponse",320],["T_WHITESPACE"," ",320],"=",["T_WHITESPACE"," ",320],["T_ARRAY","array",320],"(",["T_CONSTANT_ENCAPSED_STRING","'TRANSACTIONID'",320],",",["T_WHITESPACE"," ",320],["T_CONSTANT_ENCAPSED_STRING","'STATUS'",320],")",";",["T_WHITESPACE","\n\n    ",320],["T_DOC_COMMENT","\/**\n     * GetPalDetails response map\n     * @var array\n     *\/",322],["T_WHITESPACE","\n    ",325],["T_PROTECTED","protected",326],["T_WHITESPACE"," ",326],["T_VARIABLE","$_getPalDetailsResponse",326],["T_WHITESPACE"," ",326],"=",["T_WHITESPACE"," ",326],["T_ARRAY","array",326],"(",["T_CONSTANT_ENCAPSED_STRING","'PAL'",326],")",";",["T_WHITESPACE","\n\n    ",326],["T_DOC_COMMENT","\/**\n     * CreateRecurringPaymentsProfile request\/response map\n     *\n     * @var array\n     *\/",328],["T_WHITESPACE","\n    ",332],["T_PROTECTED","protected",333],["T_WHITESPACE"," ",333],["T_VARIABLE","$_createRecurringPaymentsProfileRequest",333],["T_WHITESPACE"," ",333],"=",["T_WHITESPACE"," ",333],["T_ARRAY","array",333],"(",["T_WHITESPACE","\n        ",333],["T_CONSTANT_ENCAPSED_STRING","'TOKEN'",334],",",["T_WHITESPACE"," ",334],["T_CONSTANT_ENCAPSED_STRING","'SUBSCRIBERNAME'",334],",",["T_WHITESPACE"," ",334],["T_CONSTANT_ENCAPSED_STRING","'PROFILESTARTDATE'",334],",",["T_WHITESPACE"," ",334],["T_CONSTANT_ENCAPSED_STRING","'PROFILEREFERENCE'",334],",",["T_WHITESPACE"," ",334],["T_CONSTANT_ENCAPSED_STRING","'DESC'",334],",",["T_WHITESPACE"," ",334],["T_CONSTANT_ENCAPSED_STRING","'MAXFAILEDPAYMENTS'",334],",",["T_WHITESPACE"," ",334],["T_CONSTANT_ENCAPSED_STRING","'AUTOBILLAMT'",334],",",["T_WHITESPACE","\n        ",334],["T_CONSTANT_ENCAPSED_STRING","'BILLINGPERIOD'",335],",",["T_WHITESPACE"," ",335],["T_CONSTANT_ENCAPSED_STRING","'BILLINGFREQUENCY'",335],",",["T_WHITESPACE"," ",335],["T_CONSTANT_ENCAPSED_STRING","'TOTALBILLINGCYCLES'",335],",",["T_WHITESPACE"," ",335],["T_CONSTANT_ENCAPSED_STRING","'AMT'",335],",",["T_WHITESPACE"," ",335],["T_CONSTANT_ENCAPSED_STRING","'TRIALBILLINGPERIOD'",335],",",["T_WHITESPACE"," ",335],["T_CONSTANT_ENCAPSED_STRING","'TRIALBILLINGFREQUENCY'",335],",",["T_WHITESPACE","\n        ",335],["T_CONSTANT_ENCAPSED_STRING","'TRIALTOTALBILLINGCYCLES'",336],",",["T_WHITESPACE"," ",336],["T_CONSTANT_ENCAPSED_STRING","'TRIALAMT'",336],",",["T_WHITESPACE"," ",336],["T_CONSTANT_ENCAPSED_STRING","'CURRENCYCODE'",336],",",["T_WHITESPACE"," ",336],["T_CONSTANT_ENCAPSED_STRING","'SHIPPINGAMT'",336],",",["T_WHITESPACE"," ",336],["T_CONSTANT_ENCAPSED_STRING","'TAXAMT'",336],",",["T_WHITESPACE"," ",336],["T_CONSTANT_ENCAPSED_STRING","'INITAMT'",336],",",["T_WHITESPACE"," ",336],["T_CONSTANT_ENCAPSED_STRING","'FAILEDINITAMTACTION'",336],["T_WHITESPACE","\n    ",336],")",";",["T_WHITESPACE","\n    ",337],["T_PROTECTED","protected",338],["T_WHITESPACE"," ",338],["T_VARIABLE","$_createRecurringPaymentsProfileResponse",338],["T_WHITESPACE"," ",338],"=",["T_WHITESPACE"," ",338],["T_ARRAY","array",338],"(",["T_WHITESPACE","\n        ",338],["T_CONSTANT_ENCAPSED_STRING","'PROFILEID'",339],",",["T_WHITESPACE"," ",339],["T_CONSTANT_ENCAPSED_STRING","'PROFILESTATUS'",339],["T_WHITESPACE","\n    ",339],")",";",["T_WHITESPACE","\n\n    ",340],["T_DOC_COMMENT","\/**\n     * Request\/response for ManageRecurringPaymentsProfileStatus map\n     *\n     * @var array\n     *\/",342],["T_WHITESPACE","\n    ",346],["T_PROTECTED","protected",347],["T_WHITESPACE"," ",347],["T_VARIABLE","$_manageRecurringPaymentsProfileStatusRequest",347],["T_WHITESPACE"," ",347],"=",["T_WHITESPACE"," ",347],["T_ARRAY","array",347],"(",["T_CONSTANT_ENCAPSED_STRING","'PROFILEID'",347],",",["T_WHITESPACE"," ",347],["T_CONSTANT_ENCAPSED_STRING","'ACTION'",347],")",";",["T_WHITESPACE","\n",347],["T_COMMENT","\/\/    protected $_manageRecurringPaymentsProfileStatusResponse = array('PROFILEID');\n",348],["T_WHITESPACE","\n    ",349],["T_DOC_COMMENT","\/**\n     * Request\/response for GetRecurringPaymentsProfileDetails\n     *\n     * @var array\n     *\/",350],["T_WHITESPACE","\n    ",354],["T_PROTECTED","protected",355],["T_WHITESPACE"," ",355],["T_VARIABLE","$_getRecurringPaymentsProfileDetailsRequest",355],["T_WHITESPACE"," ",355],"=",["T_WHITESPACE"," ",355],["T_ARRAY","array",355],"(",["T_CONSTANT_ENCAPSED_STRING","'PROFILEID'",355],")",";",["T_WHITESPACE","\n    ",355],["T_PROTECTED","protected",356],["T_WHITESPACE"," ",356],["T_VARIABLE","$_getRecurringPaymentsProfileDetailsResponse",356],["T_WHITESPACE"," ",356],"=",["T_WHITESPACE"," ",356],["T_ARRAY","array",356],"(",["T_CONSTANT_ENCAPSED_STRING","'STATUS'",356],",",["T_WHITESPACE"," ",356],["T_COMMENT","\/* TODO: lot of other stuff *\/",356],")",";",["T_WHITESPACE","\n\n    ",356],["T_DOC_COMMENT","\/**\n     * Map for billing address import\/export\n     * @var array\n     *\/",358],["T_WHITESPACE","\n    ",361],["T_PROTECTED","protected",362],["T_WHITESPACE"," ",362],["T_VARIABLE","$_billingAddressMap",362],["T_WHITESPACE"," ",362],"=",["T_WHITESPACE"," ",362],["T_ARRAY","array",362],["T_WHITESPACE"," ",362],"(",["T_WHITESPACE","\n        ",362],["T_CONSTANT_ENCAPSED_STRING","'BUSINESS'",363],["T_WHITESPACE"," ",363],["T_DOUBLE_ARROW","=>",363],["T_WHITESPACE"," ",363],["T_CONSTANT_ENCAPSED_STRING","'company'",363],",",["T_WHITESPACE","\n        ",363],["T_CONSTANT_ENCAPSED_STRING","'NOTETEXT'",364],["T_WHITESPACE"," ",364],["T_DOUBLE_ARROW","=>",364],["T_WHITESPACE"," ",364],["T_CONSTANT_ENCAPSED_STRING","'customer_notes'",364],",",["T_WHITESPACE","\n        ",364],["T_CONSTANT_ENCAPSED_STRING","'EMAIL'",365],["T_WHITESPACE"," ",365],["T_DOUBLE_ARROW","=>",365],["T_WHITESPACE"," ",365],["T_CONSTANT_ENCAPSED_STRING","'email'",365],",",["T_WHITESPACE","\n        ",365],["T_CONSTANT_ENCAPSED_STRING","'FIRSTNAME'",366],["T_WHITESPACE"," ",366],["T_DOUBLE_ARROW","=>",366],["T_WHITESPACE"," ",366],["T_CONSTANT_ENCAPSED_STRING","'firstname'",366],",",["T_WHITESPACE","\n        ",366],["T_CONSTANT_ENCAPSED_STRING","'LASTNAME'",367],["T_WHITESPACE"," ",367],["T_DOUBLE_ARROW","=>",367],["T_WHITESPACE"," ",367],["T_CONSTANT_ENCAPSED_STRING","'lastname'",367],",",["T_WHITESPACE","\n        ",367],["T_CONSTANT_ENCAPSED_STRING","'MIDDLENAME'",368],["T_WHITESPACE"," ",368],["T_DOUBLE_ARROW","=>",368],["T_WHITESPACE"," ",368],["T_CONSTANT_ENCAPSED_STRING","'middlename'",368],",",["T_WHITESPACE","\n        ",368],["T_CONSTANT_ENCAPSED_STRING","'SALUTATION'",369],["T_WHITESPACE"," ",369],["T_DOUBLE_ARROW","=>",369],["T_WHITESPACE"," ",369],["T_CONSTANT_ENCAPSED_STRING","'prefix'",369],",",["T_WHITESPACE","\n        ",369],["T_CONSTANT_ENCAPSED_STRING","'SUFFIX'",370],["T_WHITESPACE"," ",370],["T_DOUBLE_ARROW","=>",370],["T_WHITESPACE"," ",370],["T_CONSTANT_ENCAPSED_STRING","'suffix'",370],",",["T_WHITESPACE","\n\n        ",370],["T_CONSTANT_ENCAPSED_STRING","'COUNTRYCODE'",372],["T_WHITESPACE"," ",372],["T_DOUBLE_ARROW","=>",372],["T_WHITESPACE"," ",372],["T_CONSTANT_ENCAPSED_STRING","'country_id'",372],",",["T_WHITESPACE"," ",372],["T_COMMENT","\/\/ iso-3166 two-character code\n",372],["T_WHITESPACE","        ",373],["T_CONSTANT_ENCAPSED_STRING","'STATE'",373],["T_WHITESPACE","    ",373],["T_DOUBLE_ARROW","=>",373],["T_WHITESPACE"," ",373],["T_CONSTANT_ENCAPSED_STRING","'region'",373],",",["T_WHITESPACE","\n        ",373],["T_CONSTANT_ENCAPSED_STRING","'CITY'",374],["T_WHITESPACE","     ",374],["T_DOUBLE_ARROW","=>",374],["T_WHITESPACE"," ",374],["T_CONSTANT_ENCAPSED_STRING","'city'",374],",",["T_WHITESPACE","\n        ",374],["T_CONSTANT_ENCAPSED_STRING","'STREET'",375],["T_WHITESPACE","   ",375],["T_DOUBLE_ARROW","=>",375],["T_WHITESPACE"," ",375],["T_CONSTANT_ENCAPSED_STRING","'street'",375],",",["T_WHITESPACE","\n        ",375],["T_CONSTANT_ENCAPSED_STRING","'STREET2'",376],["T_WHITESPACE","  ",376],["T_DOUBLE_ARROW","=>",376],["T_WHITESPACE"," ",376],["T_CONSTANT_ENCAPSED_STRING","'street2'",376],",",["T_WHITESPACE","\n        ",376],["T_CONSTANT_ENCAPSED_STRING","'ZIP'",377],["T_WHITESPACE","      ",377],["T_DOUBLE_ARROW","=>",377],["T_WHITESPACE"," ",377],["T_CONSTANT_ENCAPSED_STRING","'postcode'",377],",",["T_WHITESPACE","\n        ",377],["T_CONSTANT_ENCAPSED_STRING","'PHONENUM'",378],["T_WHITESPACE"," ",378],["T_DOUBLE_ARROW","=>",378],["T_WHITESPACE"," ",378],["T_CONSTANT_ENCAPSED_STRING","'telephone'",378],",",["T_WHITESPACE","\n    ",378],")",";",["T_WHITESPACE","\n\n    ",379],["T_DOC_COMMENT","\/**\n     * Map for billing address to do request (not response)\n     * Merging with $_billingAddressMap\n     *\n     * @var array\n     *\/",381],["T_WHITESPACE","\n    ",386],["T_PROTECTED","protected",387],["T_WHITESPACE"," ",387],["T_VARIABLE","$_billingAddressMapRequest",387],["T_WHITESPACE"," ",387],"=",["T_WHITESPACE"," ",387],["T_ARRAY","array",387],["T_WHITESPACE"," ",387],"(",")",";",["T_WHITESPACE","\n\n    ",387],["T_DOC_COMMENT","\/**\n     * Map for shipping address import\/export (extends billing address mapper)\n     * @var array\n     *\/",389],["T_WHITESPACE","\n    ",392],["T_PROTECTED","protected",393],["T_WHITESPACE"," ",393],["T_VARIABLE","$_shippingAddressMap",393],["T_WHITESPACE"," ",393],"=",["T_WHITESPACE"," ",393],["T_ARRAY","array",393],"(",["T_WHITESPACE","\n        ",393],["T_CONSTANT_ENCAPSED_STRING","'SHIPTOCOUNTRYCODE'",394],["T_WHITESPACE"," ",394],["T_DOUBLE_ARROW","=>",394],["T_WHITESPACE"," ",394],["T_CONSTANT_ENCAPSED_STRING","'country_id'",394],",",["T_WHITESPACE","\n        ",394],["T_CONSTANT_ENCAPSED_STRING","'SHIPTOSTATE'",395],["T_WHITESPACE"," ",395],["T_DOUBLE_ARROW","=>",395],["T_WHITESPACE"," ",395],["T_CONSTANT_ENCAPSED_STRING","'region'",395],",",["T_WHITESPACE","\n        ",395],["T_CONSTANT_ENCAPSED_STRING","'SHIPTOCITY'",396],["T_WHITESPACE","    ",396],["T_DOUBLE_ARROW","=>",396],["T_WHITESPACE"," ",396],["T_CONSTANT_ENCAPSED_STRING","'city'",396],",",["T_WHITESPACE","\n        ",396],["T_CONSTANT_ENCAPSED_STRING","'SHIPTOSTREET'",397],["T_WHITESPACE","  ",397],["T_DOUBLE_ARROW","=>",397],["T_WHITESPACE"," ",397],["T_CONSTANT_ENCAPSED_STRING","'street'",397],",",["T_WHITESPACE","\n        ",397],["T_CONSTANT_ENCAPSED_STRING","'SHIPTOSTREET2'",398],["T_WHITESPACE"," ",398],["T_DOUBLE_ARROW","=>",398],["T_WHITESPACE"," ",398],["T_CONSTANT_ENCAPSED_STRING","'street2'",398],",",["T_WHITESPACE","\n        ",398],["T_CONSTANT_ENCAPSED_STRING","'SHIPTOZIP'",399],["T_WHITESPACE"," ",399],["T_DOUBLE_ARROW","=>",399],["T_WHITESPACE"," ",399],["T_CONSTANT_ENCAPSED_STRING","'postcode'",399],",",["T_WHITESPACE","\n        ",399],["T_CONSTANT_ENCAPSED_STRING","'SHIPTOPHONENUM'",400],["T_WHITESPACE"," ",400],["T_DOUBLE_ARROW","=>",400],["T_WHITESPACE"," ",400],["T_CONSTANT_ENCAPSED_STRING","'telephone'",400],",",["T_WHITESPACE","\n        ",400],["T_COMMENT","\/\/ 'SHIPTONAME' will be treated manually in address import\/export methods\n",401],["T_WHITESPACE","    ",402],")",";",["T_WHITESPACE","\n\n    ",402],["T_DOC_COMMENT","\/**\n     * Map for callback request\n     * @var array\n     *\/",404],["T_WHITESPACE","\n    ",407],["T_PROTECTED","protected",408],["T_WHITESPACE"," ",408],["T_VARIABLE","$_callbackRequestMap",408],["T_WHITESPACE"," ",408],"=",["T_WHITESPACE"," ",408],["T_ARRAY","array",408],"(",["T_WHITESPACE","\n        ",408],["T_CONSTANT_ENCAPSED_STRING","'SHIPTOCOUNTRY'",409],["T_WHITESPACE"," ",409],["T_DOUBLE_ARROW","=>",409],["T_WHITESPACE"," ",409],["T_CONSTANT_ENCAPSED_STRING","'country_id'",409],",",["T_WHITESPACE","\n        ",409],["T_CONSTANT_ENCAPSED_STRING","'SHIPTOSTATE'",410],["T_WHITESPACE"," ",410],["T_DOUBLE_ARROW","=>",410],["T_WHITESPACE"," ",410],["T_CONSTANT_ENCAPSED_STRING","'region'",410],",",["T_WHITESPACE","\n        ",410],["T_CONSTANT_ENCAPSED_STRING","'SHIPTOCITY'",411],["T_WHITESPACE","    ",411],["T_DOUBLE_ARROW","=>",411],["T_WHITESPACE"," ",411],["T_CONSTANT_ENCAPSED_STRING","'city'",411],",",["T_WHITESPACE","\n        ",411],["T_CONSTANT_ENCAPSED_STRING","'SHIPTOSTREET'",412],["T_WHITESPACE","  ",412],["T_DOUBLE_ARROW","=>",412],["T_WHITESPACE"," ",412],["T_CONSTANT_ENCAPSED_STRING","'street'",412],",",["T_WHITESPACE","\n        ",412],["T_CONSTANT_ENCAPSED_STRING","'SHIPTOSTREET2'",413],["T_WHITESPACE"," ",413],["T_DOUBLE_ARROW","=>",413],["T_WHITESPACE"," ",413],["T_CONSTANT_ENCAPSED_STRING","'street2'",413],",",["T_WHITESPACE","\n        ",413],["T_CONSTANT_ENCAPSED_STRING","'SHIPTOZIP'",414],["T_WHITESPACE"," ",414],["T_DOUBLE_ARROW","=>",414],["T_WHITESPACE"," ",414],["T_CONSTANT_ENCAPSED_STRING","'postcode'",414],["T_WHITESPACE","\n    ",414],")",";",["T_WHITESPACE","\n\n    ",415],["T_DOC_COMMENT","\/**\n     * Payment information response specifically to be collected after some requests\n     * @var array\n     *\/",417],["T_WHITESPACE","\n    ",420],["T_PROTECTED","protected",421],["T_WHITESPACE"," ",421],["T_VARIABLE","$_paymentInformationResponse",421],["T_WHITESPACE"," ",421],"=",["T_WHITESPACE"," ",421],["T_ARRAY","array",421],"(",["T_WHITESPACE","\n        ",421],["T_CONSTANT_ENCAPSED_STRING","'PAYERID'",422],",",["T_WHITESPACE"," ",422],["T_CONSTANT_ENCAPSED_STRING","'PAYERSTATUS'",422],",",["T_WHITESPACE"," ",422],["T_CONSTANT_ENCAPSED_STRING","'CORRELATIONID'",422],",",["T_WHITESPACE"," ",422],["T_CONSTANT_ENCAPSED_STRING","'ADDRESSID'",422],",",["T_WHITESPACE"," ",422],["T_CONSTANT_ENCAPSED_STRING","'ADDRESSSTATUS'",422],",",["T_WHITESPACE","\n        ",422],["T_CONSTANT_ENCAPSED_STRING","'PAYMENTSTATUS'",423],",",["T_WHITESPACE"," ",423],["T_CONSTANT_ENCAPSED_STRING","'PENDINGREASON'",423],",",["T_WHITESPACE"," ",423],["T_CONSTANT_ENCAPSED_STRING","'PROTECTIONELIGIBILITY'",423],",",["T_WHITESPACE"," ",423],["T_CONSTANT_ENCAPSED_STRING","'EMAIL'",423],",",["T_WHITESPACE"," ",423],["T_CONSTANT_ENCAPSED_STRING","'SHIPPINGOPTIONNAME'",423],",",["T_WHITESPACE"," ",423],["T_CONSTANT_ENCAPSED_STRING","'TAXID'",423],",",["T_WHITESPACE"," ",423],["T_CONSTANT_ENCAPSED_STRING","'TAXIDTYPE'",423],["T_WHITESPACE","\n    ",423],")",";",["T_WHITESPACE","\n\n    ",424],["T_DOC_COMMENT","\/**\n     * Line items export mapping settings\n     * @var array\n     *\/",426],["T_WHITESPACE","\n    ",429],["T_PROTECTED","protected",430],["T_WHITESPACE"," ",430],["T_VARIABLE","$_lineItemTotalExportMap",430],["T_WHITESPACE"," ",430],"=",["T_WHITESPACE"," ",430],["T_ARRAY","array",430],"(",["T_WHITESPACE","\n        ",430],["T_STRING","Mage_Paypal_Model_Cart",431],["T_DOUBLE_COLON","::",431],["T_STRING","TOTAL_SUBTOTAL",431],["T_WHITESPACE"," ",431],["T_DOUBLE_ARROW","=>",431],["T_WHITESPACE"," ",431],["T_CONSTANT_ENCAPSED_STRING","'ITEMAMT'",431],",",["T_WHITESPACE","\n        ",431],["T_STRING","Mage_Paypal_Model_Cart",432],["T_DOUBLE_COLON","::",432],["T_STRING","TOTAL_TAX",432],["T_WHITESPACE","      ",432],["T_DOUBLE_ARROW","=>",432],["T_WHITESPACE"," ",432],["T_CONSTANT_ENCAPSED_STRING","'TAXAMT'",432],",",["T_WHITESPACE","\n        ",432],["T_STRING","Mage_Paypal_Model_Cart",433],["T_DOUBLE_COLON","::",433],["T_STRING","TOTAL_SHIPPING",433],["T_WHITESPACE"," ",433],["T_DOUBLE_ARROW","=>",433],["T_WHITESPACE"," ",433],["T_CONSTANT_ENCAPSED_STRING","'SHIPPINGAMT'",433],",",["T_WHITESPACE","\n    ",433],")",";",["T_WHITESPACE","\n    ",434],["T_PROTECTED","protected",435],["T_WHITESPACE"," ",435],["T_VARIABLE","$_lineItemExportItemsFormat",435],["T_WHITESPACE"," ",435],"=",["T_WHITESPACE"," ",435],["T_ARRAY","array",435],"(",["T_WHITESPACE","\n        ",435],["T_CONSTANT_ENCAPSED_STRING","'id'",436],["T_WHITESPACE","     ",436],["T_DOUBLE_ARROW","=>",436],["T_WHITESPACE"," ",436],["T_CONSTANT_ENCAPSED_STRING","'L_NUMBER%d'",436],",",["T_WHITESPACE","\n        ",436],["T_CONSTANT_ENCAPSED_STRING","'name'",437],["T_WHITESPACE","   ",437],["T_DOUBLE_ARROW","=>",437],["T_WHITESPACE"," ",437],["T_CONSTANT_ENCAPSED_STRING","'L_NAME%d'",437],",",["T_WHITESPACE","\n        ",437],["T_CONSTANT_ENCAPSED_STRING","'qty'",438],["T_WHITESPACE","    ",438],["T_DOUBLE_ARROW","=>",438],["T_WHITESPACE"," ",438],["T_CONSTANT_ENCAPSED_STRING","'L_QTY%d'",438],",",["T_WHITESPACE","\n        ",438],["T_CONSTANT_ENCAPSED_STRING","'amount'",439],["T_WHITESPACE"," ",439],["T_DOUBLE_ARROW","=>",439],["T_WHITESPACE"," ",439],["T_CONSTANT_ENCAPSED_STRING","'L_AMT%d'",439],",",["T_WHITESPACE","\n    ",439],")",";",["T_WHITESPACE","\n\n    ",440],["T_DOC_COMMENT","\/**\n     * Shipping options export to request mapping settings\n     * @var array\n     *\/",442],["T_WHITESPACE","\n    ",445],["T_PROTECTED","protected",446],["T_WHITESPACE"," ",446],["T_VARIABLE","$_shippingOptionsExportItemsFormat",446],["T_WHITESPACE"," ",446],"=",["T_WHITESPACE"," ",446],["T_ARRAY","array",446],"(",["T_WHITESPACE","\n        ",446],["T_CONSTANT_ENCAPSED_STRING","'is_default'",447],["T_WHITESPACE"," ",447],["T_DOUBLE_ARROW","=>",447],["T_WHITESPACE"," ",447],["T_CONSTANT_ENCAPSED_STRING","'L_SHIPPINGOPTIONISDEFAULT%d'",447],",",["T_WHITESPACE","\n        ",447],["T_CONSTANT_ENCAPSED_STRING","'amount'",448],["T_WHITESPACE","     ",448],["T_DOUBLE_ARROW","=>",448],["T_WHITESPACE"," ",448],["T_CONSTANT_ENCAPSED_STRING","'L_SHIPPINGOPTIONAMOUNT%d'",448],",",["T_WHITESPACE","\n        ",448],["T_CONSTANT_ENCAPSED_STRING","'code'",449],["T_WHITESPACE","       ",449],["T_DOUBLE_ARROW","=>",449],["T_WHITESPACE"," ",449],["T_CONSTANT_ENCAPSED_STRING","'L_SHIPPINGOPTIONNAME%d'",449],",",["T_WHITESPACE","\n        ",449],["T_CONSTANT_ENCAPSED_STRING","'name'",450],["T_WHITESPACE","       ",450],["T_DOUBLE_ARROW","=>",450],["T_WHITESPACE"," ",450],["T_CONSTANT_ENCAPSED_STRING","'L_SHIPPINGOPTIONLABEL%d'",450],",",["T_WHITESPACE","\n        ",450],["T_CONSTANT_ENCAPSED_STRING","'tax_amount'",451],["T_WHITESPACE"," ",451],["T_DOUBLE_ARROW","=>",451],["T_WHITESPACE"," ",451],["T_CONSTANT_ENCAPSED_STRING","'L_TAXAMT%d'",451],",",["T_WHITESPACE","\n    ",451],")",";",["T_WHITESPACE","\n\n    ",452],["T_DOC_COMMENT","\/**\n     * init Billing Agreement request\/response map\n     * @var array\n     *\/",454],["T_WHITESPACE","\n    ",457],["T_PROTECTED","protected",458],["T_WHITESPACE"," ",458],["T_VARIABLE","$_customerBillingAgreementRequest",458],["T_WHITESPACE"," ",458],"=",["T_WHITESPACE"," ",458],["T_ARRAY","array",458],"(",["T_CONSTANT_ENCAPSED_STRING","'RETURNURL'",458],",",["T_WHITESPACE"," ",458],["T_CONSTANT_ENCAPSED_STRING","'CANCELURL'",458],",",["T_WHITESPACE"," ",458],["T_CONSTANT_ENCAPSED_STRING","'BILLINGTYPE'",458],")",";",["T_WHITESPACE","\n    ",458],["T_PROTECTED","protected",459],["T_WHITESPACE"," ",459],["T_VARIABLE","$_customerBillingAgreementResponse",459],["T_WHITESPACE"," ",459],"=",["T_WHITESPACE"," ",459],["T_ARRAY","array",459],"(",["T_CONSTANT_ENCAPSED_STRING","'TOKEN'",459],")",";",["T_WHITESPACE","\n\n    ",459],["T_DOC_COMMENT","\/**\n     * Billing Agreement details request\/response map\n     * @var array\n     *\/",461],["T_WHITESPACE","\n    ",464],["T_PROTECTED","protected",465],["T_WHITESPACE"," ",465],["T_VARIABLE","$_billingAgreementCustomerDetailsRequest",465],["T_WHITESPACE"," ",465],"=",["T_WHITESPACE"," ",465],["T_ARRAY","array",465],"(",["T_CONSTANT_ENCAPSED_STRING","'TOKEN'",465],")",";",["T_WHITESPACE","\n    ",465],["T_PROTECTED","protected",466],["T_WHITESPACE"," ",466],["T_VARIABLE","$_billingAgreementCustomerDetailsResponse",466],["T_WHITESPACE"," ",466],"=",["T_WHITESPACE"," ",466],["T_ARRAY","array",466],"(",["T_CONSTANT_ENCAPSED_STRING","'EMAIL'",466],",",["T_WHITESPACE"," ",466],["T_CONSTANT_ENCAPSED_STRING","'PAYERID'",466],",",["T_WHITESPACE"," ",466],["T_CONSTANT_ENCAPSED_STRING","'PAYERSTATUS'",466],",",["T_WHITESPACE"," ",466],["T_CONSTANT_ENCAPSED_STRING","'SHIPTOCOUNTRYCODE'",466],",",["T_WHITESPACE","\n        ",466],["T_CONSTANT_ENCAPSED_STRING","'PAYERBUSINESS'",467],["T_WHITESPACE","\n    ",467],")",";",["T_WHITESPACE","\n\n    ",468],["T_DOC_COMMENT","\/**\n     * Create Billing Agreement request\/response map\n     * @var array\n     *\/",470],["T_WHITESPACE","\n    ",473],["T_PROTECTED","protected",474],["T_WHITESPACE"," ",474],["T_VARIABLE","$_createBillingAgreementRequest",474],["T_WHITESPACE"," ",474],"=",["T_WHITESPACE"," ",474],["T_ARRAY","array",474],"(",["T_CONSTANT_ENCAPSED_STRING","'TOKEN'",474],")",";",["T_WHITESPACE","\n    ",474],["T_PROTECTED","protected",475],["T_WHITESPACE"," ",475],["T_VARIABLE","$_createBillingAgreementResponse",475],["T_WHITESPACE"," ",475],"=",["T_WHITESPACE"," ",475],["T_ARRAY","array",475],"(",["T_CONSTANT_ENCAPSED_STRING","'BILLINGAGREEMENTID'",475],")",";",["T_WHITESPACE","\n\n    ",475],["T_DOC_COMMENT","\/**\n     * Update Billing Agreement request\/response map\n     * @var array\n     *\/",477],["T_WHITESPACE","\n    ",480],["T_PROTECTED","protected",481],["T_WHITESPACE"," ",481],["T_VARIABLE","$_updateBillingAgreementRequest",481],["T_WHITESPACE"," ",481],"=",["T_WHITESPACE"," ",481],["T_ARRAY","array",481],"(",["T_WHITESPACE","\n        ",481],["T_CONSTANT_ENCAPSED_STRING","'REFERENCEID'",482],",",["T_WHITESPACE"," ",482],["T_CONSTANT_ENCAPSED_STRING","'BILLINGAGREEMENTDESCRIPTION'",482],",",["T_WHITESPACE"," ",482],["T_CONSTANT_ENCAPSED_STRING","'BILLINGAGREEMENTSTATUS'",482],",",["T_WHITESPACE"," ",482],["T_CONSTANT_ENCAPSED_STRING","'BILLINGAGREEMENTCUSTOM'",482],["T_WHITESPACE","\n    ",482],")",";",["T_WHITESPACE","\n    ",483],["T_PROTECTED","protected",484],["T_WHITESPACE"," ",484],["T_VARIABLE","$_updateBillingAgreementResponse",484],["T_WHITESPACE"," ",484],"=",["T_WHITESPACE"," ",484],["T_ARRAY","array",484],"(",["T_WHITESPACE","\n        ",484],["T_CONSTANT_ENCAPSED_STRING","'REFERENCEID'",485],",",["T_WHITESPACE"," ",485],["T_CONSTANT_ENCAPSED_STRING","'BILLINGAGREEMENTDESCRIPTION'",485],",",["T_WHITESPACE"," ",485],["T_CONSTANT_ENCAPSED_STRING","'BILLINGAGREEMENTSTATUS'",485],",",["T_WHITESPACE"," ",485],["T_CONSTANT_ENCAPSED_STRING","'BILLINGAGREEMENTCUSTOM'",485],["T_WHITESPACE","\n    ",485],")",";",["T_WHITESPACE","\n\n    ",486],["T_DOC_COMMENT","\/**\n     * Do Reference Transaction request\/response map\n     *\n     * @var array\n     *\/",488],["T_WHITESPACE","\n    ",492],["T_PROTECTED","protected",493],["T_WHITESPACE"," ",493],["T_VARIABLE","$_doReferenceTransactionRequest",493],["T_WHITESPACE"," ",493],"=",["T_WHITESPACE"," ",493],["T_ARRAY","array",493],"(",["T_CONSTANT_ENCAPSED_STRING","'REFERENCEID'",493],",",["T_WHITESPACE"," ",493],["T_CONSTANT_ENCAPSED_STRING","'PAYMENTACTION'",493],",",["T_WHITESPACE"," ",493],["T_CONSTANT_ENCAPSED_STRING","'AMT'",493],",",["T_WHITESPACE"," ",493],["T_CONSTANT_ENCAPSED_STRING","'ITEMAMT'",493],",",["T_WHITESPACE"," ",493],["T_CONSTANT_ENCAPSED_STRING","'SHIPPINGAMT'",493],",",["T_WHITESPACE","\n        ",493],["T_CONSTANT_ENCAPSED_STRING","'TAXAMT'",494],",",["T_WHITESPACE"," ",494],["T_CONSTANT_ENCAPSED_STRING","'INVNUM'",494],",",["T_WHITESPACE"," ",494],["T_CONSTANT_ENCAPSED_STRING","'NOTIFYURL'",494],",",["T_WHITESPACE"," ",494],["T_CONSTANT_ENCAPSED_STRING","'CURRENCYCODE'",494],",",["T_WHITESPACE","\n    ",494],")",";",["T_WHITESPACE","\n\n    ",495],["T_PROTECTED","protected",497],["T_WHITESPACE"," ",497],["T_VARIABLE","$_doReferenceTransactionResponse",497],["T_WHITESPACE"," ",497],"=",["T_WHITESPACE"," ",497],["T_ARRAY","array",497],"(",["T_CONSTANT_ENCAPSED_STRING","'BILLINGAGREEMENTID'",497],",",["T_WHITESPACE"," ",497],["T_CONSTANT_ENCAPSED_STRING","'TRANSACTIONID'",497],")",";",["T_WHITESPACE","\n\n    ",497],["T_DOC_COMMENT","\/**\n     * Fields that should be replaced in debug with '***'\n     *\n     * @var array\n     *\/",499],["T_WHITESPACE","\n    ",503],["T_PROTECTED","protected",504],["T_WHITESPACE"," ",504],["T_VARIABLE","$_debugReplacePrivateDataKeys",504],["T_WHITESPACE"," ",504],"=",["T_WHITESPACE"," ",504],["T_ARRAY","array",504],"(",["T_WHITESPACE","\n\n        ",504],["T_CONSTANT_ENCAPSED_STRING","'ACCT'",506],",",["T_WHITESPACE"," ",506],["T_CONSTANT_ENCAPSED_STRING","'EXPDATE'",506],",",["T_WHITESPACE"," ",506],["T_CONSTANT_ENCAPSED_STRING","'CVV2'",506],",",["T_WHITESPACE"," ",506],["T_CONSTANT_ENCAPSED_STRING","'CARDISSUE'",506],",",["T_WHITESPACE"," ",506],["T_CONSTANT_ENCAPSED_STRING","'CARDSTART'",506],",",["T_WHITESPACE"," ",506],["T_CONSTANT_ENCAPSED_STRING","'CREDITCARDTYPE'",506],",",["T_WHITESPACE"," ",506],["T_CONSTANT_ENCAPSED_STRING","'USER'",506],",",["T_WHITESPACE"," ",506],["T_CONSTANT_ENCAPSED_STRING","'PWD'",506],",",["T_WHITESPACE"," ",506],["T_CONSTANT_ENCAPSED_STRING","'SIGNATURE'",506],["T_WHITESPACE","\n\n    ",506],")",";",["T_WHITESPACE","\n\n    ",508],["T_DOC_COMMENT","\/**\n     * Map of credit card types supported by this API\n     * @var array\n     *\/",510],["T_WHITESPACE","\n    ",513],["T_PROTECTED","protected",514],["T_WHITESPACE"," ",514],["T_VARIABLE","$_supportedCcTypes",514],["T_WHITESPACE"," ",514],"=",["T_WHITESPACE"," ",514],["T_ARRAY","array",514],"(",["T_WHITESPACE","\n        ",514],["T_CONSTANT_ENCAPSED_STRING","'VI'",515],["T_WHITESPACE"," ",515],["T_DOUBLE_ARROW","=>",515],["T_WHITESPACE"," ",515],["T_CONSTANT_ENCAPSED_STRING","'Visa'",515],",",["T_WHITESPACE"," ",515],["T_CONSTANT_ENCAPSED_STRING","'MC'",515],["T_WHITESPACE"," ",515],["T_DOUBLE_ARROW","=>",515],["T_WHITESPACE"," ",515],["T_CONSTANT_ENCAPSED_STRING","'MasterCard'",515],",",["T_WHITESPACE"," ",515],["T_CONSTANT_ENCAPSED_STRING","'DI'",515],["T_WHITESPACE"," ",515],["T_DOUBLE_ARROW","=>",515],["T_WHITESPACE"," ",515],["T_CONSTANT_ENCAPSED_STRING","'Discover'",515],",",["T_WHITESPACE"," ",515],["T_CONSTANT_ENCAPSED_STRING","'AE'",515],["T_WHITESPACE"," ",515],["T_DOUBLE_ARROW","=>",515],["T_WHITESPACE"," ",515],["T_CONSTANT_ENCAPSED_STRING","'Amex'",515],",",["T_WHITESPACE"," ",515],["T_CONSTANT_ENCAPSED_STRING","'SM'",515],["T_WHITESPACE"," ",515],["T_DOUBLE_ARROW","=>",515],["T_WHITESPACE"," ",515],["T_CONSTANT_ENCAPSED_STRING","'Maestro'",515],",",["T_WHITESPACE"," ",515],["T_CONSTANT_ENCAPSED_STRING","'SO'",515],["T_WHITESPACE"," ",515],["T_DOUBLE_ARROW","=>",515],["T_WHITESPACE"," ",515],["T_CONSTANT_ENCAPSED_STRING","'Solo'",515],")",";",["T_WHITESPACE","\n\n    ",515],["T_DOC_COMMENT","\/**\n     * Required fields in the response\n     *\n     * @var array\n     *\/",517],["T_WHITESPACE","\n    ",521],["T_PROTECTED","protected",522],["T_WHITESPACE"," ",522],["T_VARIABLE","$_requiredResponseParams",522],["T_WHITESPACE"," ",522],"=",["T_WHITESPACE"," ",522],["T_ARRAY","array",522],"(",["T_WHITESPACE","\n        ",522],["T_STRING","self",523],["T_DOUBLE_COLON","::",523],["T_STRING","DO_DIRECT_PAYMENT",523],["T_WHITESPACE","             ",523],["T_DOUBLE_ARROW","=>",523],["T_WHITESPACE"," ",523],["T_ARRAY","array",523],"(",["T_CONSTANT_ENCAPSED_STRING","'ACK'",523],",",["T_WHITESPACE"," ",523],["T_CONSTANT_ENCAPSED_STRING","'CORRELATIONID'",523],",",["T_WHITESPACE"," ",523],["T_CONSTANT_ENCAPSED_STRING","'AMT'",523],")",",",["T_WHITESPACE","\n        ",523],["T_STRING","self",524],["T_DOUBLE_COLON","::",524],["T_STRING","DO_EXPRESS_CHECKOUT_PAYMENT",524],["T_WHITESPACE","   ",524],["T_DOUBLE_ARROW","=>",524],["T_WHITESPACE"," ",524],["T_ARRAY","array",524],"(",["T_CONSTANT_ENCAPSED_STRING","'ACK'",524],",",["T_WHITESPACE"," ",524],["T_CONSTANT_ENCAPSED_STRING","'CORRELATIONID'",524],",",["T_WHITESPACE"," ",524],["T_CONSTANT_ENCAPSED_STRING","'AMT'",524],")",",",["T_WHITESPACE","\n    ",524],")",";",["T_WHITESPACE","\n\n    ",525],["T_DOC_COMMENT","\/**\n     * Warning codes recollected after each API call\n     *\n     * @var array\n     *\/",527],["T_WHITESPACE","\n    ",531],["T_PROTECTED","protected",532],["T_WHITESPACE"," ",532],["T_VARIABLE","$_callWarnings",532],["T_WHITESPACE"," ",532],"=",["T_WHITESPACE"," ",532],["T_ARRAY","array",532],"(",")",";",["T_WHITESPACE","\n\n    ",532],["T_DOC_COMMENT","\/**\n     * Error codes recollected after each API call\n     *\n     * @var array\n     *\/",534],["T_WHITESPACE","\n    ",538],["T_PROTECTED","protected",539],["T_WHITESPACE"," ",539],["T_VARIABLE","$_callErrors",539],["T_WHITESPACE"," ",539],"=",["T_WHITESPACE"," ",539],["T_ARRAY","array",539],"(",")",";",["T_WHITESPACE","\n\n    ",539],["T_DOC_COMMENT","\/**\n     * Whether to return raw response information after each call\n     *\n     * @var bool\n     *\/",541],["T_WHITESPACE","\n    ",545],["T_PROTECTED","protected",546],["T_WHITESPACE"," ",546],["T_VARIABLE","$_rawResponseNeeded",546],["T_WHITESPACE"," ",546],"=",["T_WHITESPACE"," ",546],["T_STRING","false",546],";",["T_WHITESPACE","\n\n    ",546],["T_DOC_COMMENT","\/**\n     * API call HTTP headers\n     *\n     * @var array\n     *\/",548],["T_WHITESPACE","\n    ",552],["T_PROTECTED","protected",553],["T_WHITESPACE"," ",553],["T_VARIABLE","$_headers",553],["T_WHITESPACE"," ",553],"=",["T_WHITESPACE"," ",553],["T_ARRAY","array",553],"(",")",";",["T_WHITESPACE","\n\n    ",553],["T_DOC_COMMENT","\/**\n     * API endpoint getter\n     *\n     * @return string\n     *\/",555],["T_WHITESPACE","\n    ",559],["T_PUBLIC","public",560],["T_WHITESPACE"," ",560],["T_FUNCTION","function",560],["T_WHITESPACE"," ",560],["T_STRING","getApiEndpoint",560],"(",")",["T_WHITESPACE","\n    ",560],"{",["T_WHITESPACE","\n        ",561],["T_VARIABLE","$url",562],["T_WHITESPACE"," ",562],"=",["T_WHITESPACE"," ",562],["T_VARIABLE","$this",562],["T_OBJECT_OPERATOR","->",562],["T_STRING","getUseCertAuthentication",562],"(",")",["T_WHITESPACE"," ",562],"?",["T_WHITESPACE"," ",562],["T_CONSTANT_ENCAPSED_STRING","'https:\/\/api%s.paypal.com\/nvp'",562],["T_WHITESPACE"," ",562],":",["T_WHITESPACE"," ",562],["T_CONSTANT_ENCAPSED_STRING","'https:\/\/api-3t%s.paypal.com\/nvp'",562],";",["T_WHITESPACE","\n        ",562],["T_RETURN","return",563],["T_WHITESPACE"," ",563],["T_STRING","sprintf",563],"(",["T_VARIABLE","$url",563],",",["T_WHITESPACE"," ",563],["T_VARIABLE","$this",563],["T_OBJECT_OPERATOR","->",563],["T_STRING","_config",563],["T_OBJECT_OPERATOR","->",563],["T_STRING","sandboxFlag",563],["T_WHITESPACE"," ",563],"?",["T_WHITESPACE"," ",563],["T_CONSTANT_ENCAPSED_STRING","'.sandbox'",563],["T_WHITESPACE"," ",563],":",["T_WHITESPACE"," ",563],["T_CONSTANT_ENCAPSED_STRING","''",563],")",";",["T_WHITESPACE","\n    ",563],"}",["T_WHITESPACE","\n\n    ",564],["T_DOC_COMMENT","\/**\n     * Return Paypal Api version\n     *\n     * @return string\n     *\/",566],["T_WHITESPACE","\n    ",570],["T_PUBLIC","public",571],["T_WHITESPACE"," ",571],["T_FUNCTION","function",571],["T_WHITESPACE"," ",571],["T_STRING","getVersion",571],"(",")",["T_WHITESPACE","\n    ",571],"{",["T_WHITESPACE","\n        ",572],["T_RETURN","return",573],["T_WHITESPACE"," ",573],["T_CONSTANT_ENCAPSED_STRING","'72.0'",573],";",["T_WHITESPACE","\n    ",573],"}",["T_WHITESPACE","\n\n    ",574],["T_DOC_COMMENT","\/**\n     * Retrieve billing agreement type\n     *\n     * @return string\n     *\/",576],["T_WHITESPACE","\n    ",580],["T_PUBLIC","public",581],["T_WHITESPACE"," ",581],["T_FUNCTION","function",581],["T_WHITESPACE"," ",581],["T_STRING","getBillingAgreementType",581],"(",")",["T_WHITESPACE","\n    ",581],"{",["T_WHITESPACE","\n        ",582],["T_RETURN","return",583],["T_WHITESPACE"," ",583],["T_CONSTANT_ENCAPSED_STRING","'MerchantInitiatedBilling'",583],";",["T_WHITESPACE","\n    ",583],"}",["T_WHITESPACE","\n\n    ",584],["T_DOC_COMMENT","\/**\n     * SetExpressCheckout call\n     * @link https:\/\/cms.paypal.com\/us\/cgi-bin\/?&cmd=_render-content&content_ID=developer\/e_howto_api_nvp_r_SetExpressCheckout\n     * TODO: put together style and giropay settings\n     *\/",586],["T_WHITESPACE","\n    ",590],["T_PUBLIC","public",591],["T_WHITESPACE"," ",591],["T_FUNCTION","function",591],["T_WHITESPACE"," ",591],["T_STRING","callSetExpressCheckout",591],"(",")",["T_WHITESPACE","\n    ",591],"{",["T_WHITESPACE","\n        ",592],["T_VARIABLE","$this",593],["T_OBJECT_OPERATOR","->",593],["T_STRING","_prepareExpressCheckoutCallRequest",593],"(",["T_VARIABLE","$this",593],["T_OBJECT_OPERATOR","->",593],["T_STRING","_setExpressCheckoutRequest",593],")",";",["T_WHITESPACE","\n        ",593],["T_VARIABLE","$request",594],["T_WHITESPACE"," ",594],"=",["T_WHITESPACE"," ",594],["T_VARIABLE","$this",594],["T_OBJECT_OPERATOR","->",594],["T_STRING","_exportToRequest",594],"(",["T_VARIABLE","$this",594],["T_OBJECT_OPERATOR","->",594],["T_STRING","_setExpressCheckoutRequest",594],")",";",["T_WHITESPACE","\n        ",594],["T_VARIABLE","$this",595],["T_OBJECT_OPERATOR","->",595],["T_STRING","_exportLineItems",595],"(",["T_VARIABLE","$request",595],")",";",["T_WHITESPACE","\n\n        ",595],["T_COMMENT","\/\/ import\/suppress shipping address, if any\n",597],["T_WHITESPACE","        ",598],["T_VARIABLE","$options",598],["T_WHITESPACE"," ",598],"=",["T_WHITESPACE"," ",598],["T_VARIABLE","$this",598],["T_OBJECT_OPERATOR","->",598],["T_STRING","getShippingOptions",598],"(",")",";",["T_WHITESPACE","\n        ",598],["T_IF","if",599],["T_WHITESPACE"," ",599],"(",["T_VARIABLE","$this",599],["T_OBJECT_OPERATOR","->",599],["T_STRING","getAddress",599],"(",")",")",["T_WHITESPACE"," ",599],"{",["T_WHITESPACE","\n            ",599],["T_VARIABLE","$request",600],["T_WHITESPACE"," ",600],"=",["T_WHITESPACE"," ",600],["T_VARIABLE","$this",600],["T_OBJECT_OPERATOR","->",600],["T_STRING","_importAddresses",600],"(",["T_VARIABLE","$request",600],")",";",["T_WHITESPACE","\n            ",600],["T_VARIABLE","$request",601],"[",["T_CONSTANT_ENCAPSED_STRING","'ADDROVERRIDE'",601],"]",["T_WHITESPACE"," ",601],"=",["T_WHITESPACE"," ",601],["T_LNUMBER","1",601],";",["T_WHITESPACE","\n        ",601],"}",["T_WHITESPACE"," ",602],["T_ELSEIF","elseif",602],["T_WHITESPACE"," ",602],"(",["T_VARIABLE","$options",602],["T_WHITESPACE"," ",602],["T_BOOLEAN_AND","&&",602],["T_WHITESPACE"," ",602],"(",["T_STRING","count",602],"(",["T_VARIABLE","$options",602],")",["T_WHITESPACE"," ",602],["T_IS_SMALLER_OR_EQUAL","<=",602],["T_WHITESPACE"," ",602],["T_LNUMBER","10",602],")",")",["T_WHITESPACE"," ",602],"{",["T_WHITESPACE"," ",602],["T_COMMENT","\/\/ doesn't support more than 10 shipping options\n",602],["T_WHITESPACE","            ",603],["T_VARIABLE","$request",603],"[",["T_CONSTANT_ENCAPSED_STRING","'CALLBACK'",603],"]",["T_WHITESPACE"," ",603],"=",["T_WHITESPACE"," ",603],["T_VARIABLE","$this",603],["T_OBJECT_OPERATOR","->",603],["T_STRING","getShippingOptionsCallbackUrl",603],"(",")",";",["T_WHITESPACE","\n            ",603],["T_VARIABLE","$request",604],"[",["T_CONSTANT_ENCAPSED_STRING","'CALLBACKTIMEOUT'",604],"]",["T_WHITESPACE"," ",604],"=",["T_WHITESPACE"," ",604],["T_LNUMBER","6",604],";",["T_WHITESPACE"," ",604],["T_COMMENT","\/\/ max value\n",604],["T_WHITESPACE","            ",605],["T_VARIABLE","$request",605],"[",["T_CONSTANT_ENCAPSED_STRING","'MAXAMT'",605],"]",["T_WHITESPACE"," ",605],"=",["T_WHITESPACE"," ",605],["T_VARIABLE","$request",605],"[",["T_CONSTANT_ENCAPSED_STRING","'AMT'",605],"]",["T_WHITESPACE"," ",605],"+",["T_WHITESPACE"," ",605],["T_DNUMBER","999.00",605],";",["T_WHITESPACE"," ",605],["T_COMMENT","\/\/ it is impossible to calculate max amount\n",605],["T_WHITESPACE","            ",606],["T_VARIABLE","$this",606],["T_OBJECT_OPERATOR","->",606],["T_STRING","_exportShippingOptions",606],"(",["T_VARIABLE","$request",606],")",";",["T_WHITESPACE","\n        ",606],"}",["T_WHITESPACE","\n\n        ",607],["T_COMMENT","\/\/ add recurring profiles information\n",609],["T_WHITESPACE","        ",610],["T_VARIABLE","$i",610],["T_WHITESPACE"," ",610],"=",["T_WHITESPACE"," ",610],["T_LNUMBER","0",610],";",["T_WHITESPACE","\n        ",610],["T_FOREACH","foreach",611],["T_WHITESPACE"," ",611],"(",["T_VARIABLE","$this",611],["T_OBJECT_OPERATOR","->",611],["T_STRING","_recurringPaymentProfiles",611],["T_WHITESPACE"," ",611],["T_AS","as",611],["T_WHITESPACE"," ",611],["T_VARIABLE","$profile",611],")",["T_WHITESPACE"," ",611],"{",["T_WHITESPACE","\n            ",611],["T_VARIABLE","$request",612],"[","\"",["T_ENCAPSED_AND_WHITESPACE","L_BILLINGTYPE",612],["T_CURLY_OPEN","{",612],["T_VARIABLE","$i",612],"}","\"","]",["T_WHITESPACE"," ",612],"=",["T_WHITESPACE"," ",612],["T_CONSTANT_ENCAPSED_STRING","'RecurringPayments'",612],";",["T_WHITESPACE","\n            ",612],["T_VARIABLE","$request",613],"[","\"",["T_ENCAPSED_AND_WHITESPACE","L_BILLINGAGREEMENTDESCRIPTION",613],["T_CURLY_OPEN","{",613],["T_VARIABLE","$i",613],"}","\"","]",["T_WHITESPACE"," ",613],"=",["T_WHITESPACE"," ",613],["T_VARIABLE","$profile",613],["T_OBJECT_OPERATOR","->",613],["T_STRING","getScheduleDescription",613],"(",")",";",["T_WHITESPACE","\n            ",613],["T_VARIABLE","$i",614],["T_INC","++",614],";",["T_WHITESPACE","\n        ",614],"}",["T_WHITESPACE","\n\n        ",615],["T_VARIABLE","$response",617],["T_WHITESPACE"," ",617],"=",["T_WHITESPACE"," ",617],["T_VARIABLE","$this",617],["T_OBJECT_OPERATOR","->",617],["T_STRING","call",617],"(",["T_STRING","self",617],["T_DOUBLE_COLON","::",617],["T_STRING","SET_EXPRESS_CHECKOUT",617],",",["T_WHITESPACE"," ",617],["T_VARIABLE","$request",617],")",";",["T_WHITESPACE","\n        ",617],["T_VARIABLE","$this",618],["T_OBJECT_OPERATOR","->",618],["T_STRING","_importFromResponse",618],"(",["T_VARIABLE","$this",618],["T_OBJECT_OPERATOR","->",618],["T_STRING","_setExpressCheckoutResponse",618],",",["T_WHITESPACE"," ",618],["T_VARIABLE","$response",618],")",";",["T_WHITESPACE","\n    ",618],"}",["T_WHITESPACE","\n\n    ",619],["T_DOC_COMMENT","\/**\n     * GetExpressCheckoutDetails call\n     * @link https:\/\/cms.paypal.com\/us\/cgi-bin\/?&cmd=_render-content&content_ID=developer\/e_howto_api_nvp_r_GetExpressCheckoutDetails\n     *\/",621],["T_WHITESPACE","\n    ",624],["T_FUNCTION","function",625],["T_WHITESPACE"," ",625],["T_STRING","callGetExpressCheckoutDetails",625],"(",")",["T_WHITESPACE","\n    ",625],"{",["T_WHITESPACE","\n        ",626],["T_VARIABLE","$this",627],["T_OBJECT_OPERATOR","->",627],["T_STRING","_prepareExpressCheckoutCallRequest",627],"(",["T_VARIABLE","$this",627],["T_OBJECT_OPERATOR","->",627],["T_STRING","_getExpressCheckoutDetailsRequest",627],")",";",["T_WHITESPACE","\n        ",627],["T_VARIABLE","$request",628],["T_WHITESPACE"," ",628],"=",["T_WHITESPACE"," ",628],["T_VARIABLE","$this",628],["T_OBJECT_OPERATOR","->",628],["T_STRING","_exportToRequest",628],"(",["T_VARIABLE","$this",628],["T_OBJECT_OPERATOR","->",628],["T_STRING","_getExpressCheckoutDetailsRequest",628],")",";",["T_WHITESPACE","\n        ",628],["T_VARIABLE","$response",629],["T_WHITESPACE"," ",629],"=",["T_WHITESPACE"," ",629],["T_VARIABLE","$this",629],["T_OBJECT_OPERATOR","->",629],["T_STRING","call",629],"(",["T_STRING","self",629],["T_DOUBLE_COLON","::",629],["T_STRING","GET_EXPRESS_CHECKOUT_DETAILS",629],",",["T_WHITESPACE"," ",629],["T_VARIABLE","$request",629],")",";",["T_WHITESPACE","\n        ",629],["T_VARIABLE","$this",630],["T_OBJECT_OPERATOR","->",630],["T_STRING","_importFromResponse",630],"(",["T_VARIABLE","$this",630],["T_OBJECT_OPERATOR","->",630],["T_STRING","_paymentInformationResponse",630],",",["T_WHITESPACE"," ",630],["T_VARIABLE","$response",630],")",";",["T_WHITESPACE","\n        ",630],["T_VARIABLE","$this",631],["T_OBJECT_OPERATOR","->",631],["T_STRING","_exportAddressses",631],"(",["T_VARIABLE","$response",631],")",";",["T_WHITESPACE","\n    ",631],"}",["T_WHITESPACE","\n\n    ",632],["T_DOC_COMMENT","\/**\n     * DoExpressCheckout call\n     * @link https:\/\/cms.paypal.com\/us\/cgi-bin\/?&cmd=_render-content&content_ID=developer\/e_howto_api_nvp_r_DoExpressCheckoutPayment\n     *\/",634],["T_WHITESPACE","\n    ",637],["T_PUBLIC","public",638],["T_WHITESPACE"," ",638],["T_FUNCTION","function",638],["T_WHITESPACE"," ",638],["T_STRING","callDoExpressCheckoutPayment",638],"(",")",["T_WHITESPACE","\n    ",638],"{",["T_WHITESPACE","\n        ",639],["T_VARIABLE","$this",640],["T_OBJECT_OPERATOR","->",640],["T_STRING","_prepareExpressCheckoutCallRequest",640],"(",["T_VARIABLE","$this",640],["T_OBJECT_OPERATOR","->",640],["T_STRING","_doExpressCheckoutPaymentRequest",640],")",";",["T_WHITESPACE","\n        ",640],["T_VARIABLE","$request",641],["T_WHITESPACE"," ",641],"=",["T_WHITESPACE"," ",641],["T_VARIABLE","$this",641],["T_OBJECT_OPERATOR","->",641],["T_STRING","_exportToRequest",641],"(",["T_VARIABLE","$this",641],["T_OBJECT_OPERATOR","->",641],["T_STRING","_doExpressCheckoutPaymentRequest",641],")",";",["T_WHITESPACE","\n        ",641],["T_VARIABLE","$this",642],["T_OBJECT_OPERATOR","->",642],["T_STRING","_exportLineItems",642],"(",["T_VARIABLE","$request",642],")",";",["T_WHITESPACE","\n\n        ",642],["T_VARIABLE","$response",644],["T_WHITESPACE"," ",644],"=",["T_WHITESPACE"," ",644],["T_VARIABLE","$this",644],["T_OBJECT_OPERATOR","->",644],["T_STRING","call",644],"(",["T_STRING","self",644],["T_DOUBLE_COLON","::",644],["T_STRING","DO_EXPRESS_CHECKOUT_PAYMENT",644],",",["T_WHITESPACE"," ",644],["T_VARIABLE","$request",644],")",";",["T_WHITESPACE","\n        ",644],["T_VARIABLE","$this",645],["T_OBJECT_OPERATOR","->",645],["T_STRING","_importFromResponse",645],"(",["T_VARIABLE","$this",645],["T_OBJECT_OPERATOR","->",645],["T_STRING","_paymentInformationResponse",645],",",["T_WHITESPACE"," ",645],["T_VARIABLE","$response",645],")",";",["T_WHITESPACE","\n        ",645],["T_VARIABLE","$this",646],["T_OBJECT_OPERATOR","->",646],["T_STRING","_importFromResponse",646],"(",["T_VARIABLE","$this",646],["T_OBJECT_OPERATOR","->",646],["T_STRING","_doExpressCheckoutPaymentResponse",646],",",["T_WHITESPACE"," ",646],["T_VARIABLE","$response",646],")",";",["T_WHITESPACE","\n        ",646],["T_VARIABLE","$this",647],["T_OBJECT_OPERATOR","->",647],["T_STRING","_importFromResponse",647],"(",["T_VARIABLE","$this",647],["T_OBJECT_OPERATOR","->",647],["T_STRING","_createBillingAgreementResponse",647],",",["T_WHITESPACE"," ",647],["T_VARIABLE","$response",647],")",";",["T_WHITESPACE","\n    ",647],"}",["T_WHITESPACE","\n\n    ",648],["T_DOC_COMMENT","\/**\n     * Process a credit card payment\n     *\/",650],["T_WHITESPACE","\n    ",652],["T_PUBLIC","public",653],["T_WHITESPACE"," ",653],["T_FUNCTION","function",653],["T_WHITESPACE"," ",653],["T_STRING","callDoDirectPayment",653],"(",")",["T_WHITESPACE","\n    ",653],"{",["T_WHITESPACE","\n        ",654],["T_VARIABLE","$request",655],["T_WHITESPACE"," ",655],"=",["T_WHITESPACE"," ",655],["T_VARIABLE","$this",655],["T_OBJECT_OPERATOR","->",655],["T_STRING","_exportToRequest",655],"(",["T_VARIABLE","$this",655],["T_OBJECT_OPERATOR","->",655],["T_STRING","_doDirectPaymentRequest",655],")",";",["T_WHITESPACE","\n        ",655],["T_VARIABLE","$this",656],["T_OBJECT_OPERATOR","->",656],["T_STRING","_exportLineItems",656],"(",["T_VARIABLE","$request",656],")",";",["T_WHITESPACE","\n        ",656],["T_IF","if",657],["T_WHITESPACE"," ",657],"(",["T_VARIABLE","$this",657],["T_OBJECT_OPERATOR","->",657],["T_STRING","getAddress",657],"(",")",")",["T_WHITESPACE"," ",657],"{",["T_WHITESPACE","\n            ",657],["T_VARIABLE","$request",658],["T_WHITESPACE"," ",658],"=",["T_WHITESPACE"," ",658],["T_VARIABLE","$this",658],["T_OBJECT_OPERATOR","->",658],["T_STRING","_importAddresses",658],"(",["T_VARIABLE","$request",658],")",";",["T_WHITESPACE","\n        ",658],"}",["T_WHITESPACE","\n        ",659],["T_VARIABLE","$response",660],["T_WHITESPACE"," ",660],"=",["T_WHITESPACE"," ",660],["T_VARIABLE","$this",660],["T_OBJECT_OPERATOR","->",660],["T_STRING","call",660],"(",["T_STRING","self",660],["T_DOUBLE_COLON","::",660],["T_STRING","DO_DIRECT_PAYMENT",660],",",["T_WHITESPACE"," ",660],["T_VARIABLE","$request",660],")",";",["T_WHITESPACE","\n        ",660],["T_VARIABLE","$this",661],["T_OBJECT_OPERATOR","->",661],["T_STRING","_importFromResponse",661],"(",["T_VARIABLE","$this",661],["T_OBJECT_OPERATOR","->",661],["T_STRING","_doDirectPaymentResponse",661],",",["T_WHITESPACE"," ",661],["T_VARIABLE","$response",661],")",";",["T_WHITESPACE","\n    ",661],"}",["T_WHITESPACE","\n\n    ",662],["T_DOC_COMMENT","\/**\n     * Do Reference Transaction call\n     * @link https:\/\/cms.paypal.com\/us\/cgi-bin\/?&cmd=_render-content&content_ID=developer\/e_howto_api_nvp_r_DoReferenceTransaction\n     *\/",664],["T_WHITESPACE","\n    ",667],["T_PUBLIC","public",668],["T_WHITESPACE"," ",668],["T_FUNCTION","function",668],["T_WHITESPACE"," ",668],["T_STRING","callDoReferenceTransaction",668],"(",")",["T_WHITESPACE","\n    ",668],"{",["T_WHITESPACE","\n        ",669],["T_VARIABLE","$request",670],["T_WHITESPACE"," ",670],"=",["T_WHITESPACE"," ",670],["T_VARIABLE","$this",670],["T_OBJECT_OPERATOR","->",670],["T_STRING","_exportToRequest",670],"(",["T_VARIABLE","$this",670],["T_OBJECT_OPERATOR","->",670],["T_STRING","_doReferenceTransactionRequest",670],")",";",["T_WHITESPACE","\n        ",670],["T_VARIABLE","$this",671],["T_OBJECT_OPERATOR","->",671],["T_STRING","_exportLineItems",671],"(",["T_VARIABLE","$request",671],")",";",["T_WHITESPACE","\n        ",671],["T_VARIABLE","$response",672],["T_WHITESPACE"," ",672],"=",["T_WHITESPACE"," ",672],["T_VARIABLE","$this",672],["T_OBJECT_OPERATOR","->",672],["T_STRING","call",672],"(",["T_CONSTANT_ENCAPSED_STRING","'DoReferenceTransaction'",672],",",["T_WHITESPACE"," ",672],["T_VARIABLE","$request",672],")",";",["T_WHITESPACE","\n        ",672],["T_VARIABLE","$this",673],["T_OBJECT_OPERATOR","->",673],["T_STRING","_importFromResponse",673],"(",["T_VARIABLE","$this",673],["T_OBJECT_OPERATOR","->",673],["T_STRING","_doReferenceTransactionResponse",673],",",["T_WHITESPACE"," ",673],["T_VARIABLE","$response",673],")",";",["T_WHITESPACE","\n    ",673],"}",["T_WHITESPACE","\n\n    ",674],["T_DOC_COMMENT","\/**\n     * Check whether the last call was returned with fraud warning\n     *\n     * @return bool\n     *\/",676],["T_WHITESPACE","\n    ",680],["T_PUBLIC","public",681],["T_WHITESPACE"," ",681],["T_FUNCTION","function",681],["T_WHITESPACE"," ",681],["T_STRING","getIsFraudDetected",681],"(",")",["T_WHITESPACE","\n    ",681],"{",["T_WHITESPACE","\n        ",682],["T_RETURN","return",683],["T_WHITESPACE"," ",683],["T_STRING","in_array",683],"(",["T_LNUMBER","11610",683],",",["T_WHITESPACE"," ",683],["T_VARIABLE","$this",683],["T_OBJECT_OPERATOR","->",683],["T_STRING","_callWarnings",683],")",";",["T_WHITESPACE","\n    ",683],"}",["T_WHITESPACE","\n\n    ",684],["T_DOC_COMMENT","\/**\n     * Made additional request to paypal to get autharization id\n     *\/",686],["T_WHITESPACE","\n    ",688],["T_PUBLIC","public",689],["T_WHITESPACE"," ",689],["T_FUNCTION","function",689],["T_WHITESPACE"," ",689],["T_STRING","callDoReauthorization",689],"(",")",["T_WHITESPACE","\n    ",689],"{",["T_WHITESPACE","\n        ",690],["T_VARIABLE","$request",691],["T_WHITESPACE"," ",691],"=",["T_WHITESPACE"," ",691],["T_VARIABLE","$this",691],["T_OBJECT_OPERATOR","->",691],["T_STRING","_export",691],"(",["T_VARIABLE","$this",691],["T_OBJECT_OPERATOR","->",691],["T_STRING","_doReauthorizationRequest",691],")",";",["T_WHITESPACE","\n        ",691],["T_VARIABLE","$response",692],["T_WHITESPACE"," ",692],"=",["T_WHITESPACE"," ",692],["T_VARIABLE","$this",692],["T_OBJECT_OPERATOR","->",692],["T_STRING","call",692],"(",["T_CONSTANT_ENCAPSED_STRING","'DoReauthorization'",692],",",["T_WHITESPACE"," ",692],["T_VARIABLE","$request",692],")",";",["T_WHITESPACE","\n        ",692],["T_VARIABLE","$this",693],["T_OBJECT_OPERATOR","->",693],["T_STRING","_import",693],"(",["T_VARIABLE","$response",693],",",["T_WHITESPACE"," ",693],["T_VARIABLE","$this",693],["T_OBJECT_OPERATOR","->",693],["T_STRING","_doReauthorizationResponse",693],")",";",["T_WHITESPACE","\n    ",693],"}",["T_WHITESPACE","\n\n    ",694],["T_DOC_COMMENT","\/**\n     * DoCapture call\n     * @link https:\/\/cms.paypal.com\/us\/cgi-bin\/?&cmd=_render-content&content_ID=developer\/e_howto_api_nvp_r_DoCapture\n     *\/",696],["T_WHITESPACE","\n    ",699],["T_PUBLIC","public",700],["T_WHITESPACE"," ",700],["T_FUNCTION","function",700],["T_WHITESPACE"," ",700],["T_STRING","callDoCapture",700],"(",")",["T_WHITESPACE","\n    ",700],"{",["T_WHITESPACE","\n        ",701],["T_VARIABLE","$this",702],["T_OBJECT_OPERATOR","->",702],["T_STRING","setCompleteType",702],"(",["T_VARIABLE","$this",702],["T_OBJECT_OPERATOR","->",702],["T_STRING","_getCaptureCompleteType",702],"(",")",")",";",["T_WHITESPACE","\n        ",702],["T_VARIABLE","$request",703],["T_WHITESPACE"," ",703],"=",["T_WHITESPACE"," ",703],["T_VARIABLE","$this",703],["T_OBJECT_OPERATOR","->",703],["T_STRING","_exportToRequest",703],"(",["T_VARIABLE","$this",703],["T_OBJECT_OPERATOR","->",703],["T_STRING","_doCaptureRequest",703],")",";",["T_WHITESPACE","\n        ",703],["T_VARIABLE","$response",704],["T_WHITESPACE"," ",704],"=",["T_WHITESPACE"," ",704],["T_VARIABLE","$this",704],["T_OBJECT_OPERATOR","->",704],["T_STRING","call",704],"(",["T_STRING","self",704],["T_DOUBLE_COLON","::",704],["T_STRING","DO_CAPTURE",704],",",["T_WHITESPACE"," ",704],["T_VARIABLE","$request",704],")",";",["T_WHITESPACE","\n        ",704],["T_VARIABLE","$this",705],["T_OBJECT_OPERATOR","->",705],["T_STRING","_importFromResponse",705],"(",["T_VARIABLE","$this",705],["T_OBJECT_OPERATOR","->",705],["T_STRING","_paymentInformationResponse",705],",",["T_WHITESPACE"," ",705],["T_VARIABLE","$response",705],")",";",["T_WHITESPACE","\n        ",705],["T_VARIABLE","$this",706],["T_OBJECT_OPERATOR","->",706],["T_STRING","_importFromResponse",706],"(",["T_VARIABLE","$this",706],["T_OBJECT_OPERATOR","->",706],["T_STRING","_doCaptureResponse",706],",",["T_WHITESPACE"," ",706],["T_VARIABLE","$response",706],")",";",["T_WHITESPACE","\n    ",706],"}",["T_WHITESPACE","\n\n    ",707],["T_DOC_COMMENT","\/**\n     * DoAuthorization call\n     *\n     * @link https:\/\/cms.paypal.com\/us\/cgi-bin\/?&cmd=_render-content&content_ID=developer\/e_howto_api_nvp_r_DoAuthorization\n     * @return Mage_Paypal_Model_Api_Nvp\n     *\/",709],["T_WHITESPACE","\n    ",714],["T_PUBLIC","public",715],["T_WHITESPACE"," ",715],["T_FUNCTION","function",715],["T_WHITESPACE"," ",715],["T_STRING","callDoAuthorization",715],"(",")",["T_WHITESPACE","\n    ",715],"{",["T_WHITESPACE","\n        ",716],["T_VARIABLE","$request",717],["T_WHITESPACE"," ",717],"=",["T_WHITESPACE"," ",717],["T_VARIABLE","$this",717],["T_OBJECT_OPERATOR","->",717],["T_STRING","_exportToRequest",717],"(",["T_VARIABLE","$this",717],["T_OBJECT_OPERATOR","->",717],["T_STRING","_doAuthorizationRequest",717],")",";",["T_WHITESPACE","\n        ",717],["T_VARIABLE","$response",718],["T_WHITESPACE"," ",718],"=",["T_WHITESPACE"," ",718],["T_VARIABLE","$this",718],["T_OBJECT_OPERATOR","->",718],["T_STRING","call",718],"(",["T_STRING","self",718],["T_DOUBLE_COLON","::",718],["T_STRING","DO_AUTHORIZATION",718],",",["T_WHITESPACE"," ",718],["T_VARIABLE","$request",718],")",";",["T_WHITESPACE","\n        ",718],["T_VARIABLE","$this",719],["T_OBJECT_OPERATOR","->",719],["T_STRING","_importFromResponse",719],"(",["T_VARIABLE","$this",719],["T_OBJECT_OPERATOR","->",719],["T_STRING","_paymentInformationResponse",719],",",["T_WHITESPACE"," ",719],["T_VARIABLE","$response",719],")",";",["T_WHITESPACE","\n        ",719],["T_VARIABLE","$this",720],["T_OBJECT_OPERATOR","->",720],["T_STRING","_importFromResponse",720],"(",["T_VARIABLE","$this",720],["T_OBJECT_OPERATOR","->",720],["T_STRING","_doAuthorizationResponse",720],",",["T_WHITESPACE"," ",720],["T_VARIABLE","$response",720],")",";",["T_WHITESPACE","\n\n        ",720],["T_RETURN","return",722],["T_WHITESPACE"," ",722],["T_VARIABLE","$this",722],";",["T_WHITESPACE","\n    ",722],"}",["T_WHITESPACE","\n\n\n    ",723],["T_DOC_COMMENT","\/**\n     * DoVoid call\n     * @link https:\/\/cms.paypal.com\/us\/cgi-bin\/?&cmd=_render-content&content_ID=developer\/e_howto_api_nvp_r_DoVoid\n     *\/",726],["T_WHITESPACE","\n    ",729],["T_PUBLIC","public",730],["T_WHITESPACE"," ",730],["T_FUNCTION","function",730],["T_WHITESPACE"," ",730],["T_STRING","callDoVoid",730],"(",")",["T_WHITESPACE","\n    ",730],"{",["T_WHITESPACE","\n        ",731],["T_VARIABLE","$request",732],["T_WHITESPACE"," ",732],"=",["T_WHITESPACE"," ",732],["T_VARIABLE","$this",732],["T_OBJECT_OPERATOR","->",732],["T_STRING","_exportToRequest",732],"(",["T_VARIABLE","$this",732],["T_OBJECT_OPERATOR","->",732],["T_STRING","_doVoidRequest",732],")",";",["T_WHITESPACE","\n        ",732],["T_VARIABLE","$this",733],["T_OBJECT_OPERATOR","->",733],["T_STRING","call",733],"(",["T_STRING","self",733],["T_DOUBLE_COLON","::",733],["T_STRING","DO_VOID",733],",",["T_WHITESPACE"," ",733],["T_VARIABLE","$request",733],")",";",["T_WHITESPACE","\n    ",733],"}",["T_WHITESPACE","\n\n    ",734],["T_DOC_COMMENT","\/**\n     * GetTransactionDetails\n     * @link https:\/\/cms.paypal.com\/us\/cgi-bin\/?&cmd=_render-content&content_ID=developer\/e_howto_api_nvp_r_GetTransactionDetails\n     *\/",736],["T_WHITESPACE","\n    ",739],["T_PUBLIC","public",740],["T_WHITESPACE"," ",740],["T_FUNCTION","function",740],["T_WHITESPACE"," ",740],["T_STRING","callGetTransactionDetails",740],"(",")",["T_WHITESPACE","\n    ",740],"{",["T_WHITESPACE","\n        ",741],["T_VARIABLE","$request",742],["T_WHITESPACE"," ",742],"=",["T_WHITESPACE"," ",742],["T_VARIABLE","$this",742],["T_OBJECT_OPERATOR","->",742],["T_STRING","_exportToRequest",742],"(",["T_VARIABLE","$this",742],["T_OBJECT_OPERATOR","->",742],["T_STRING","_getTransactionDetailsRequest",742],")",";",["T_WHITESPACE","\n        ",742],["T_VARIABLE","$response",743],["T_WHITESPACE"," ",743],"=",["T_WHITESPACE"," ",743],["T_VARIABLE","$this",743],["T_OBJECT_OPERATOR","->",743],["T_STRING","call",743],"(",["T_CONSTANT_ENCAPSED_STRING","'GetTransactionDetails'",743],",",["T_WHITESPACE"," ",743],["T_VARIABLE","$request",743],")",";",["T_WHITESPACE","\n        ",743],["T_VARIABLE","$this",744],["T_OBJECT_OPERATOR","->",744],["T_STRING","_importFromResponse",744],"(",["T_VARIABLE","$this",744],["T_OBJECT_OPERATOR","->",744],["T_STRING","_getTransactionDetailsResponse",744],",",["T_WHITESPACE"," ",744],["T_VARIABLE","$response",744],")",";",["T_WHITESPACE","\n    ",744],"}",["T_WHITESPACE","\n\n    ",745],["T_DOC_COMMENT","\/**\n     * RefundTransaction call\n     * @link https:\/\/cms.paypal.com\/us\/cgi-bin\/?&cmd=_render-content&content_ID=developer\/e_howto_api_nvp_r_RefundTransaction\n     *\/",747],["T_WHITESPACE","\n    ",750],["T_PUBLIC","public",751],["T_WHITESPACE"," ",751],["T_FUNCTION","function",751],["T_WHITESPACE"," ",751],["T_STRING","callRefundTransaction",751],"(",")",["T_WHITESPACE","\n    ",751],"{",["T_WHITESPACE","\n        ",752],["T_VARIABLE","$request",753],["T_WHITESPACE"," ",753],"=",["T_WHITESPACE"," ",753],["T_VARIABLE","$this",753],["T_OBJECT_OPERATOR","->",753],["T_STRING","_exportToRequest",753],"(",["T_VARIABLE","$this",753],["T_OBJECT_OPERATOR","->",753],["T_STRING","_refundTransactionRequest",753],")",";",["T_WHITESPACE","\n        ",753],["T_IF","if",754],["T_WHITESPACE"," ",754],"(",["T_VARIABLE","$this",754],["T_OBJECT_OPERATOR","->",754],["T_STRING","getRefundType",754],"(",")",["T_WHITESPACE"," ",754],["T_IS_IDENTICAL","===",754],["T_WHITESPACE"," ",754],["T_STRING","Mage_Paypal_Model_Config",754],["T_DOUBLE_COLON","::",754],["T_STRING","REFUND_TYPE_PARTIAL",754],")",["T_WHITESPACE"," ",754],"{",["T_WHITESPACE","\n            ",754],["T_VARIABLE","$request",755],"[",["T_CONSTANT_ENCAPSED_STRING","'AMT'",755],"]",["T_WHITESPACE"," ",755],"=",["T_WHITESPACE"," ",755],["T_VARIABLE","$this",755],["T_OBJECT_OPERATOR","->",755],["T_STRING","getAmount",755],"(",")",";",["T_WHITESPACE","\n        ",755],"}",["T_WHITESPACE","\n        ",756],["T_VARIABLE","$response",757],["T_WHITESPACE"," ",757],"=",["T_WHITESPACE"," ",757],["T_VARIABLE","$this",757],["T_OBJECT_OPERATOR","->",757],["T_STRING","call",757],"(",["T_STRING","self",757],["T_DOUBLE_COLON","::",757],["T_STRING","REFUND_TRANSACTION",757],",",["T_WHITESPACE"," ",757],["T_VARIABLE","$request",757],")",";",["T_WHITESPACE","\n        ",757],["T_VARIABLE","$this",758],["T_OBJECT_OPERATOR","->",758],["T_STRING","_importFromResponse",758],"(",["T_VARIABLE","$this",758],["T_OBJECT_OPERATOR","->",758],["T_STRING","_refundTransactionResponse",758],",",["T_WHITESPACE"," ",758],["T_VARIABLE","$response",758],")",";",["T_WHITESPACE","\n    ",758],"}",["T_WHITESPACE","\n\n    ",759],["T_DOC_COMMENT","\/**\n     * ManagePendingTransactionStatus\n     * @link https:\/\/cms.paypal.com\/us\/cgi-bin\/?&cmd=_render-content&content_ID=developer\/e_howto_api_nvp_r_ManagePendingTransactionStatus\n     *\/",761],["T_WHITESPACE","\n    ",764],["T_PUBLIC","public",765],["T_WHITESPACE"," ",765],["T_FUNCTION","function",765],["T_WHITESPACE"," ",765],["T_STRING","callManagePendingTransactionStatus",765],"(",")",["T_WHITESPACE","\n    ",765],"{",["T_WHITESPACE","\n        ",766],["T_VARIABLE","$request",767],["T_WHITESPACE"," ",767],"=",["T_WHITESPACE"," ",767],["T_VARIABLE","$this",767],["T_OBJECT_OPERATOR","->",767],["T_STRING","_exportToRequest",767],"(",["T_VARIABLE","$this",767],["T_OBJECT_OPERATOR","->",767],["T_STRING","_managePendingTransactionStatusRequest",767],")",";",["T_WHITESPACE","\n        ",767],["T_IF","if",768],["T_WHITESPACE"," ",768],"(",["T_ISSET","isset",768],"(",["T_VARIABLE","$request",768],"[",["T_CONSTANT_ENCAPSED_STRING","'ACTION'",768],"]",")",")",["T_WHITESPACE"," ",768],"{",["T_WHITESPACE","\n            ",768],["T_VARIABLE","$request",769],"[",["T_CONSTANT_ENCAPSED_STRING","'ACTION'",769],"]",["T_WHITESPACE"," ",769],"=",["T_WHITESPACE"," ",769],["T_VARIABLE","$this",769],["T_OBJECT_OPERATOR","->",769],["T_STRING","_filterPaymentReviewAction",769],"(",["T_VARIABLE","$request",769],"[",["T_CONSTANT_ENCAPSED_STRING","'ACTION'",769],"]",")",";",["T_WHITESPACE","\n        ",769],"}",["T_WHITESPACE","\n        ",770],["T_VARIABLE","$response",771],["T_WHITESPACE"," ",771],"=",["T_WHITESPACE"," ",771],["T_VARIABLE","$this",771],["T_OBJECT_OPERATOR","->",771],["T_STRING","call",771],"(",["T_CONSTANT_ENCAPSED_STRING","'ManagePendingTransactionStatus'",771],",",["T_WHITESPACE"," ",771],["T_VARIABLE","$request",771],")",";",["T_WHITESPACE","\n        ",771],["T_VARIABLE","$this",772],["T_OBJECT_OPERATOR","->",772],["T_STRING","_importFromResponse",772],"(",["T_VARIABLE","$this",772],["T_OBJECT_OPERATOR","->",772],["T_STRING","_managePendingTransactionStatusResponse",772],",",["T_WHITESPACE"," ",772],["T_VARIABLE","$response",772],")",";",["T_WHITESPACE","\n    ",772],"}",["T_WHITESPACE","\n\n    ",773],["T_DOC_COMMENT","\/**\n     * getPalDetails call\n     * @link https:\/\/www.x.com\/docs\/DOC-1300\n     * @link https:\/\/cms.paypal.com\/us\/cgi-bin\/?cmd=_render-content&content_ID=developer\/e_howto_api_ECButtonIntegration\n     *\/",775],["T_WHITESPACE","\n    ",779],["T_PUBLIC","public",780],["T_WHITESPACE"," ",780],["T_FUNCTION","function",780],["T_WHITESPACE"," ",780],["T_STRING","callGetPalDetails",780],"(",")",["T_WHITESPACE","\n    ",780],"{",["T_WHITESPACE","\n        ",781],["T_VARIABLE","$response",782],["T_WHITESPACE"," ",782],"=",["T_WHITESPACE"," ",782],["T_VARIABLE","$this",782],["T_OBJECT_OPERATOR","->",782],["T_STRING","call",782],"(",["T_CONSTANT_ENCAPSED_STRING","'getPalDetails'",782],",",["T_WHITESPACE"," ",782],["T_ARRAY","array",782],"(",")",")",";",["T_WHITESPACE","\n        ",782],["T_VARIABLE","$this",783],["T_OBJECT_OPERATOR","->",783],["T_STRING","_importFromResponse",783],"(",["T_VARIABLE","$this",783],["T_OBJECT_OPERATOR","->",783],["T_STRING","_getPalDetailsResponse",783],",",["T_WHITESPACE"," ",783],["T_VARIABLE","$response",783],")",";",["T_WHITESPACE","\n    ",783],"}",["T_WHITESPACE","\n\n    ",784],["T_DOC_COMMENT","\/**\n     * Set Customer BillingA greement call\n     *\n     * @link https:\/\/cms.paypal.com\/us\/cgi-bin\/?&cmd=_render-content&content_ID=developer\/e_howto_api_nvp_r_SetCustomerBillingAgreement\n     *\/",786],["T_WHITESPACE","\n    ",790],["T_PUBLIC","public",791],["T_WHITESPACE"," ",791],["T_FUNCTION","function",791],["T_WHITESPACE"," ",791],["T_STRING","callSetCustomerBillingAgreement",791],"(",")",["T_WHITESPACE","\n    ",791],"{",["T_WHITESPACE","\n        ",792],["T_VARIABLE","$request",793],["T_WHITESPACE"," ",793],"=",["T_WHITESPACE"," ",793],["T_VARIABLE","$this",793],["T_OBJECT_OPERATOR","->",793],["T_STRING","_exportToRequest",793],"(",["T_VARIABLE","$this",793],["T_OBJECT_OPERATOR","->",793],["T_STRING","_customerBillingAgreementRequest",793],")",";",["T_WHITESPACE","\n        ",793],["T_VARIABLE","$response",794],["T_WHITESPACE"," ",794],"=",["T_WHITESPACE"," ",794],["T_VARIABLE","$this",794],["T_OBJECT_OPERATOR","->",794],["T_STRING","call",794],"(",["T_CONSTANT_ENCAPSED_STRING","'SetCustomerBillingAgreement'",794],",",["T_WHITESPACE"," ",794],["T_VARIABLE","$request",794],")",";",["T_WHITESPACE","\n        ",794],["T_VARIABLE","$this",795],["T_OBJECT_OPERATOR","->",795],["T_STRING","_importFromResponse",795],"(",["T_VARIABLE","$this",795],["T_OBJECT_OPERATOR","->",795],["T_STRING","_customerBillingAgreementResponse",795],",",["T_WHITESPACE"," ",795],["T_VARIABLE","$response",795],")",";",["T_WHITESPACE","\n    ",795],"}",["T_WHITESPACE","\n\n    ",796],["T_DOC_COMMENT","\/**\n     * Get Billing Agreement Customer Details call\n     *\n     * @link https:\/\/cms.paypal.com\/us\/cgi-bin\/?&cmd=_render-content&content_ID=developer\/e_howto_api_nvp_r_GetBillingAgreementCustomerDetails\n     *\/",798],["T_WHITESPACE","\n    ",802],["T_PUBLIC","public",803],["T_WHITESPACE"," ",803],["T_FUNCTION","function",803],["T_WHITESPACE"," ",803],["T_STRING","callGetBillingAgreementCustomerDetails",803],"(",")",["T_WHITESPACE","\n    ",803],"{",["T_WHITESPACE","\n        ",804],["T_VARIABLE","$request",805],["T_WHITESPACE"," ",805],"=",["T_WHITESPACE"," ",805],["T_VARIABLE","$this",805],["T_OBJECT_OPERATOR","->",805],["T_STRING","_exportToRequest",805],"(",["T_VARIABLE","$this",805],["T_OBJECT_OPERATOR","->",805],["T_STRING","_billingAgreementCustomerDetailsRequest",805],")",";",["T_WHITESPACE","\n        ",805],["T_VARIABLE","$response",806],["T_WHITESPACE"," ",806],"=",["T_WHITESPACE"," ",806],["T_VARIABLE","$this",806],["T_OBJECT_OPERATOR","->",806],["T_STRING","call",806],"(",["T_CONSTANT_ENCAPSED_STRING","'GetBillingAgreementCustomerDetails'",806],",",["T_WHITESPACE"," ",806],["T_VARIABLE","$request",806],")",";",["T_WHITESPACE","\n        ",806],["T_VARIABLE","$this",807],["T_OBJECT_OPERATOR","->",807],["T_STRING","_importFromResponse",807],"(",["T_VARIABLE","$this",807],["T_OBJECT_OPERATOR","->",807],["T_STRING","_billingAgreementCustomerDetailsResponse",807],",",["T_WHITESPACE"," ",807],["T_VARIABLE","$response",807],")",";",["T_WHITESPACE","\n    ",807],"}",["T_WHITESPACE","\n\n    ",808],["T_DOC_COMMENT","\/**\n     * Create Billing Agreement call\n     *\n     *\/",810],["T_WHITESPACE","\n    ",813],["T_PUBLIC","public",814],["T_WHITESPACE"," ",814],["T_FUNCTION","function",814],["T_WHITESPACE"," ",814],["T_STRING","callCreateBillingAgreement",814],"(",")",["T_WHITESPACE","\n    ",814],"{",["T_WHITESPACE","\n        ",815],["T_VARIABLE","$request",816],["T_WHITESPACE"," ",816],"=",["T_WHITESPACE"," ",816],["T_VARIABLE","$this",816],["T_OBJECT_OPERATOR","->",816],["T_STRING","_exportToRequest",816],"(",["T_VARIABLE","$this",816],["T_OBJECT_OPERATOR","->",816],["T_STRING","_createBillingAgreementRequest",816],")",";",["T_WHITESPACE","\n        ",816],["T_VARIABLE","$response",817],["T_WHITESPACE"," ",817],"=",["T_WHITESPACE"," ",817],["T_VARIABLE","$this",817],["T_OBJECT_OPERATOR","->",817],["T_STRING","call",817],"(",["T_CONSTANT_ENCAPSED_STRING","'CreateBillingAgreement'",817],",",["T_WHITESPACE"," ",817],["T_VARIABLE","$request",817],")",";",["T_WHITESPACE","\n        ",817],["T_VARIABLE","$this",818],["T_OBJECT_OPERATOR","->",818],["T_STRING","_importFromResponse",818],"(",["T_VARIABLE","$this",818],["T_OBJECT_OPERATOR","->",818],["T_STRING","_createBillingAgreementResponse",818],",",["T_WHITESPACE"," ",818],["T_VARIABLE","$response",818],")",";",["T_WHITESPACE","\n    ",818],"}",["T_WHITESPACE","\n\n    ",819],["T_DOC_COMMENT","\/**\n     * Billing Agreement Update call\n     *\n     *\/",821],["T_WHITESPACE","\n    ",824],["T_PUBLIC","public",825],["T_WHITESPACE"," ",825],["T_FUNCTION","function",825],["T_WHITESPACE"," ",825],["T_STRING","callUpdateBillingAgreement",825],"(",")",["T_WHITESPACE","\n    ",825],"{",["T_WHITESPACE","\n        ",826],["T_VARIABLE","$request",827],["T_WHITESPACE"," ",827],"=",["T_WHITESPACE"," ",827],["T_VARIABLE","$this",827],["T_OBJECT_OPERATOR","->",827],["T_STRING","_exportToRequest",827],"(",["T_VARIABLE","$this",827],["T_OBJECT_OPERATOR","->",827],["T_STRING","_updateBillingAgreementRequest",827],")",";",["T_WHITESPACE","\n        ",827],["T_TRY","try",828],["T_WHITESPACE"," ",828],"{",["T_WHITESPACE","\n        ",828],["T_VARIABLE","$response",829],["T_WHITESPACE"," ",829],"=",["T_WHITESPACE"," ",829],["T_VARIABLE","$this",829],["T_OBJECT_OPERATOR","->",829],["T_STRING","call",829],"(",["T_CONSTANT_ENCAPSED_STRING","'BillAgreementUpdate'",829],",",["T_WHITESPACE"," ",829],["T_VARIABLE","$request",829],")",";",["T_WHITESPACE","\n        ",829],"}",["T_WHITESPACE"," ",830],["T_CATCH","catch",830],["T_WHITESPACE"," ",830],"(",["T_STRING","Mage_Core_Exception",830],["T_WHITESPACE"," ",830],["T_VARIABLE","$e",830],")",["T_WHITESPACE"," ",830],"{",["T_WHITESPACE","\n            ",830],["T_IF","if",831],["T_WHITESPACE"," ",831],"(",["T_STRING","in_array",831],"(",["T_LNUMBER","10201",831],",",["T_WHITESPACE"," ",831],["T_VARIABLE","$this",831],["T_OBJECT_OPERATOR","->",831],["T_STRING","_callErrors",831],")",")",["T_WHITESPACE"," ",831],"{",["T_WHITESPACE","\n                ",831],["T_VARIABLE","$this",832],["T_OBJECT_OPERATOR","->",832],["T_STRING","setIsBillingAgreementAlreadyCancelled",832],"(",["T_STRING","true",832],")",";",["T_WHITESPACE","\n            ",832],"}",["T_WHITESPACE","\n            ",833],["T_THROW","throw",834],["T_WHITESPACE"," ",834],["T_VARIABLE","$e",834],";",["T_WHITESPACE","\n        ",834],"}",["T_WHITESPACE","\n        ",835],["T_VARIABLE","$this",836],["T_OBJECT_OPERATOR","->",836],["T_STRING","_importFromResponse",836],"(",["T_VARIABLE","$this",836],["T_OBJECT_OPERATOR","->",836],["T_STRING","_updateBillingAgreementResponse",836],",",["T_WHITESPACE"," ",836],["T_VARIABLE","$response",836],")",";",["T_WHITESPACE","\n    ",836],"}",["T_WHITESPACE","\n\n    ",837],["T_DOC_COMMENT","\/**\n     * CreateRecurringPaymentsProfile call\n     *\/",839],["T_WHITESPACE","\n    ",841],["T_PUBLIC","public",842],["T_WHITESPACE"," ",842],["T_FUNCTION","function",842],["T_WHITESPACE"," ",842],["T_STRING","callCreateRecurringPaymentsProfile",842],"(",")",["T_WHITESPACE","\n    ",842],"{",["T_WHITESPACE","\n        ",843],["T_VARIABLE","$request",844],["T_WHITESPACE"," ",844],"=",["T_WHITESPACE"," ",844],["T_VARIABLE","$this",844],["T_OBJECT_OPERATOR","->",844],["T_STRING","_exportToRequest",844],"(",["T_VARIABLE","$this",844],["T_OBJECT_OPERATOR","->",844],["T_STRING","_createRecurringPaymentsProfileRequest",844],")",";",["T_WHITESPACE","\n        ",844],["T_VARIABLE","$response",845],["T_WHITESPACE"," ",845],"=",["T_WHITESPACE"," ",845],["T_VARIABLE","$this",845],["T_OBJECT_OPERATOR","->",845],["T_STRING","call",845],"(",["T_CONSTANT_ENCAPSED_STRING","'CreateRecurringPaymentsProfile'",845],",",["T_WHITESPACE"," ",845],["T_VARIABLE","$request",845],")",";",["T_WHITESPACE","\n        ",845],["T_VARIABLE","$this",846],["T_OBJECT_OPERATOR","->",846],["T_STRING","_importFromResponse",846],"(",["T_VARIABLE","$this",846],["T_OBJECT_OPERATOR","->",846],["T_STRING","_createRecurringPaymentsProfileResponse",846],",",["T_WHITESPACE"," ",846],["T_VARIABLE","$response",846],")",";",["T_WHITESPACE","\n        ",846],["T_VARIABLE","$this",847],["T_OBJECT_OPERATOR","->",847],["T_STRING","_analyzeRecurringProfileStatus",847],"(",["T_VARIABLE","$this",847],["T_OBJECT_OPERATOR","->",847],["T_STRING","getRecurringProfileStatus",847],"(",")",",",["T_WHITESPACE"," ",847],["T_VARIABLE","$this",847],")",";",["T_WHITESPACE","\n    ",847],"}",["T_WHITESPACE","\n\n    ",848],["T_DOC_COMMENT","\/**\n     * ManageRecurringPaymentsProfileStatus call\n     *\/",850],["T_WHITESPACE","\n    ",852],["T_PUBLIC","public",853],["T_WHITESPACE"," ",853],["T_FUNCTION","function",853],["T_WHITESPACE"," ",853],["T_STRING","callManageRecurringPaymentsProfileStatus",853],"(",")",["T_WHITESPACE","\n    ",853],"{",["T_WHITESPACE","\n        ",854],["T_VARIABLE","$request",855],["T_WHITESPACE"," ",855],"=",["T_WHITESPACE"," ",855],["T_VARIABLE","$this",855],["T_OBJECT_OPERATOR","->",855],["T_STRING","_exportToRequest",855],"(",["T_VARIABLE","$this",855],["T_OBJECT_OPERATOR","->",855],["T_STRING","_manageRecurringPaymentsProfileStatusRequest",855],")",";",["T_WHITESPACE","\n        ",855],["T_IF","if",856],["T_WHITESPACE"," ",856],"(",["T_ISSET","isset",856],"(",["T_VARIABLE","$request",856],"[",["T_CONSTANT_ENCAPSED_STRING","'ACTION'",856],"]",")",")",["T_WHITESPACE"," ",856],"{",["T_WHITESPACE","\n            ",856],["T_VARIABLE","$request",857],"[",["T_CONSTANT_ENCAPSED_STRING","'ACTION'",857],"]",["T_WHITESPACE"," ",857],"=",["T_WHITESPACE"," ",857],["T_VARIABLE","$this",857],["T_OBJECT_OPERATOR","->",857],["T_STRING","_filterRecurringProfileActionToNvp",857],"(",["T_VARIABLE","$request",857],"[",["T_CONSTANT_ENCAPSED_STRING","'ACTION'",857],"]",")",";",["T_WHITESPACE","\n        ",857],"}",["T_WHITESPACE","\n        ",858],["T_TRY","try",859],["T_WHITESPACE"," ",859],"{",["T_WHITESPACE","\n            ",859],["T_VARIABLE","$response",860],["T_WHITESPACE"," ",860],"=",["T_WHITESPACE"," ",860],["T_VARIABLE","$this",860],["T_OBJECT_OPERATOR","->",860],["T_STRING","call",860],"(",["T_CONSTANT_ENCAPSED_STRING","'ManageRecurringPaymentsProfileStatus'",860],",",["T_WHITESPACE"," ",860],["T_VARIABLE","$request",860],")",";",["T_WHITESPACE","\n        ",860],"}",["T_WHITESPACE"," ",861],["T_CATCH","catch",861],["T_WHITESPACE"," ",861],"(",["T_STRING","Mage_Core_Exception",861],["T_WHITESPACE"," ",861],["T_VARIABLE","$e",861],")",["T_WHITESPACE"," ",861],"{",["T_WHITESPACE","\n            ",861],["T_IF","if",862],["T_WHITESPACE"," ",862],"(","(",["T_STRING","in_array",862],"(",["T_LNUMBER","11556",862],",",["T_WHITESPACE"," ",862],["T_VARIABLE","$this",862],["T_OBJECT_OPERATOR","->",862],["T_STRING","_callErrors",862],")",["T_WHITESPACE"," ",862],["T_BOOLEAN_AND","&&",862],["T_WHITESPACE"," ",862],["T_CONSTANT_ENCAPSED_STRING","'Cancel'",862],["T_WHITESPACE"," ",862],["T_IS_IDENTICAL","===",862],["T_WHITESPACE"," ",862],["T_VARIABLE","$request",862],"[",["T_CONSTANT_ENCAPSED_STRING","'ACTION'",862],"]",")",["T_WHITESPACE","\n                ",862],["T_BOOLEAN_OR","||",863],["T_WHITESPACE"," ",863],"(",["T_STRING","in_array",863],"(",["T_LNUMBER","11557",863],",",["T_WHITESPACE"," ",863],["T_VARIABLE","$this",863],["T_OBJECT_OPERATOR","->",863],["T_STRING","_callErrors",863],")",["T_WHITESPACE"," ",863],["T_BOOLEAN_AND","&&",863],["T_WHITESPACE"," ",863],["T_CONSTANT_ENCAPSED_STRING","'Suspend'",863],["T_WHITESPACE"," ",863],["T_IS_IDENTICAL","===",863],["T_WHITESPACE"," ",863],["T_VARIABLE","$request",863],"[",["T_CONSTANT_ENCAPSED_STRING","'ACTION'",863],"]",")",["T_WHITESPACE","\n                ",863],["T_BOOLEAN_OR","||",864],["T_WHITESPACE"," ",864],"(",["T_STRING","in_array",864],"(",["T_LNUMBER","11558",864],",",["T_WHITESPACE"," ",864],["T_VARIABLE","$this",864],["T_OBJECT_OPERATOR","->",864],["T_STRING","_callErrors",864],")",["T_WHITESPACE"," ",864],["T_BOOLEAN_AND","&&",864],["T_WHITESPACE"," ",864],["T_CONSTANT_ENCAPSED_STRING","'Reactivate'",864],["T_WHITESPACE"," ",864],["T_IS_IDENTICAL","===",864],["T_WHITESPACE"," ",864],["T_VARIABLE","$request",864],"[",["T_CONSTANT_ENCAPSED_STRING","'ACTION'",864],"]",")",["T_WHITESPACE","\n            ",864],")",["T_WHITESPACE"," ",865],"{",["T_WHITESPACE","\n                ",865],["T_STRING","Mage",866],["T_DOUBLE_COLON","::",866],["T_STRING","throwException",866],"(",["T_STRING","Mage",866],["T_DOUBLE_COLON","::",866],["T_STRING","helper",866],"(",["T_CONSTANT_ENCAPSED_STRING","'paypal'",866],")",["T_OBJECT_OPERATOR","->",866],["T_STRING","__",866],"(",["T_CONSTANT_ENCAPSED_STRING","'Unable to change status. Current status is not correspond to real status.'",866],")",")",";",["T_WHITESPACE","\n            ",866],"}",["T_WHITESPACE","\n            ",867],["T_THROW","throw",868],["T_WHITESPACE"," ",868],["T_VARIABLE","$e",868],";",["T_WHITESPACE","\n        ",868],"}",["T_WHITESPACE","\n    ",869],"}",["T_WHITESPACE","\n\n    ",870],["T_DOC_COMMENT","\/**\n     * GetRecurringPaymentsProfileDetails call\n     *\/",872],["T_WHITESPACE","\n    ",874],["T_PUBLIC","public",875],["T_WHITESPACE"," ",875],["T_FUNCTION","function",875],["T_WHITESPACE"," ",875],["T_STRING","callGetRecurringPaymentsProfileDetails",875],"(",["T_STRING","Varien_Object",875],["T_WHITESPACE"," ",875],["T_VARIABLE","$result",875],")",["T_WHITESPACE","\n    ",875],"{",["T_WHITESPACE","\n        ",876],["T_VARIABLE","$request",877],["T_WHITESPACE"," ",877],"=",["T_WHITESPACE"," ",877],["T_VARIABLE","$this",877],["T_OBJECT_OPERATOR","->",877],["T_STRING","_exportToRequest",877],"(",["T_VARIABLE","$this",877],["T_OBJECT_OPERATOR","->",877],["T_STRING","_getRecurringPaymentsProfileDetailsRequest",877],")",";",["T_WHITESPACE","\n        ",877],["T_VARIABLE","$response",878],["T_WHITESPACE"," ",878],"=",["T_WHITESPACE"," ",878],["T_VARIABLE","$this",878],["T_OBJECT_OPERATOR","->",878],["T_STRING","call",878],"(",["T_CONSTANT_ENCAPSED_STRING","'GetRecurringPaymentsProfileDetails'",878],",",["T_WHITESPACE"," ",878],["T_VARIABLE","$request",878],")",";",["T_WHITESPACE","\n        ",878],["T_VARIABLE","$this",879],["T_OBJECT_OPERATOR","->",879],["T_STRING","_importFromResponse",879],"(",["T_VARIABLE","$this",879],["T_OBJECT_OPERATOR","->",879],["T_STRING","_getRecurringPaymentsProfileDetailsResponse",879],",",["T_WHITESPACE"," ",879],["T_VARIABLE","$response",879],")",";",["T_WHITESPACE","\n        ",879],["T_VARIABLE","$this",880],["T_OBJECT_OPERATOR","->",880],["T_STRING","_analyzeRecurringProfileStatus",880],"(",["T_VARIABLE","$this",880],["T_OBJECT_OPERATOR","->",880],["T_STRING","getStatus",880],"(",")",",",["T_WHITESPACE"," ",880],["T_VARIABLE","$result",880],")",";",["T_WHITESPACE","\n    ",880],"}",["T_WHITESPACE","\n\n    ",881],["T_DOC_COMMENT","\/**\n     * Import callback request array into $this public data\n     *\n     * @param array $request\n     * @return Varien_Object\n     *\/",883],["T_WHITESPACE","\n    ",888],["T_PUBLIC","public",889],["T_WHITESPACE"," ",889],["T_FUNCTION","function",889],["T_WHITESPACE"," ",889],["T_STRING","prepareShippingOptionsCallbackAddress",889],"(",["T_ARRAY","array",889],["T_WHITESPACE"," ",889],["T_VARIABLE","$request",889],")",["T_WHITESPACE","\n    ",889],"{",["T_WHITESPACE","\n        ",890],["T_VARIABLE","$address",891],["T_WHITESPACE"," ",891],"=",["T_WHITESPACE"," ",891],["T_NEW","new",891],["T_WHITESPACE"," ",891],["T_STRING","Varien_Object",891],"(",")",";",["T_WHITESPACE","\n        ",891],["T_STRING","Varien_Object_Mapper",892],["T_DOUBLE_COLON","::",892],["T_STRING","accumulateByMap",892],"(",["T_VARIABLE","$request",892],",",["T_WHITESPACE"," ",892],["T_VARIABLE","$address",892],",",["T_WHITESPACE"," ",892],["T_VARIABLE","$this",892],["T_OBJECT_OPERATOR","->",892],["T_STRING","_callbackRequestMap",892],")",";",["T_WHITESPACE","\n        ",892],["T_VARIABLE","$address",893],["T_OBJECT_OPERATOR","->",893],["T_STRING","setExportedKeys",893],"(",["T_STRING","array_values",893],"(",["T_VARIABLE","$this",893],["T_OBJECT_OPERATOR","->",893],["T_STRING","_callbackRequestMap",893],")",")",";",["T_WHITESPACE","\n        ",893],["T_VARIABLE","$this",894],["T_OBJECT_OPERATOR","->",894],["T_STRING","_applyStreetAndRegionWorkarounds",894],"(",["T_VARIABLE","$address",894],")",";",["T_WHITESPACE","\n        ",894],["T_RETURN","return",895],["T_WHITESPACE"," ",895],["T_VARIABLE","$address",895],";",["T_WHITESPACE","\n    ",895],"}",["T_WHITESPACE","\n\n    ",896],["T_DOC_COMMENT","\/**\n     * Prepare response for shipping options callback\n     *\n     * @return string\n     *\/",898],["T_WHITESPACE","\n    ",902],["T_PUBLIC","public",903],["T_WHITESPACE"," ",903],["T_FUNCTION","function",903],["T_WHITESPACE"," ",903],["T_STRING","formatShippingOptionsCallback",903],"(",")",["T_WHITESPACE","\n    ",903],"{",["T_WHITESPACE","\n        ",904],["T_VARIABLE","$response",905],["T_WHITESPACE"," ",905],"=",["T_WHITESPACE"," ",905],["T_ARRAY","array",905],"(",")",";",["T_WHITESPACE","\n        ",905],["T_IF","if",906],["T_WHITESPACE"," ",906],"(","!",["T_VARIABLE","$this",906],["T_OBJECT_OPERATOR","->",906],["T_STRING","_exportShippingOptions",906],"(",["T_VARIABLE","$response",906],")",")",["T_WHITESPACE"," ",906],"{",["T_WHITESPACE","\n            ",906],["T_VARIABLE","$response",907],"[",["T_CONSTANT_ENCAPSED_STRING","'NO_SHIPPING_OPTION_DETAILS'",907],"]",["T_WHITESPACE"," ",907],"=",["T_WHITESPACE"," ",907],["T_CONSTANT_ENCAPSED_STRING","'1'",907],";",["T_WHITESPACE","\n        ",907],"}",["T_WHITESPACE","\n        ",908],["T_VARIABLE","$response",909],["T_WHITESPACE"," ",909],"=",["T_WHITESPACE"," ",909],["T_VARIABLE","$this",909],["T_OBJECT_OPERATOR","->",909],["T_STRING","_addMethodToRequest",909],"(",["T_STRING","self",909],["T_DOUBLE_COLON","::",909],["T_STRING","CALLBACK_RESPONSE",909],",",["T_WHITESPACE"," ",909],["T_VARIABLE","$response",909],")",";",["T_WHITESPACE","\n        ",909],["T_RETURN","return",910],["T_WHITESPACE"," ",910],["T_VARIABLE","$this",910],["T_OBJECT_OPERATOR","->",910],["T_STRING","_buildQuery",910],"(",["T_VARIABLE","$response",910],")",";",["T_WHITESPACE","\n    ",910],"}",["T_WHITESPACE","\n\n    ",911],["T_DOC_COMMENT","\/**\n     * Add method to request array\n     *\n     * @param string $methodName\n     * @param array $request\n     * @return array\n     *\/",913],["T_WHITESPACE","\n    ",919],["T_PROTECTED","protected",920],["T_WHITESPACE"," ",920],["T_FUNCTION","function",920],["T_WHITESPACE"," ",920],["T_STRING","_addMethodToRequest",920],"(",["T_VARIABLE","$methodName",920],",",["T_WHITESPACE"," ",920],["T_VARIABLE","$request",920],")",["T_WHITESPACE","\n    ",920],"{",["T_WHITESPACE","\n        ",921],["T_VARIABLE","$request",922],"[",["T_CONSTANT_ENCAPSED_STRING","'METHOD'",922],"]",["T_WHITESPACE"," ",922],"=",["T_WHITESPACE"," ",922],["T_VARIABLE","$methodName",922],";",["T_WHITESPACE","\n        ",922],["T_RETURN","return",923],["T_WHITESPACE"," ",923],["T_VARIABLE","$request",923],";",["T_WHITESPACE","\n    ",923],"}",["T_WHITESPACE","\n\n    ",924],["T_DOC_COMMENT","\/**\n     * Do the API call\n     *\n     * @param string $methodName\n     * @param array $request\n     * @return array\n     * @throws Mage_Core_Exception\n     *\/",926],["T_WHITESPACE","\n    ",933],["T_PUBLIC","public",934],["T_WHITESPACE"," ",934],["T_FUNCTION","function",934],["T_WHITESPACE"," ",934],["T_STRING","call",934],"(",["T_VARIABLE","$methodName",934],",",["T_WHITESPACE"," ",934],["T_ARRAY","array",934],["T_WHITESPACE"," ",934],["T_VARIABLE","$request",934],")",["T_WHITESPACE","\n    ",934],"{",["T_WHITESPACE","\n        ",935],["T_VARIABLE","$request",936],["T_WHITESPACE"," ",936],"=",["T_WHITESPACE"," ",936],["T_VARIABLE","$this",936],["T_OBJECT_OPERATOR","->",936],["T_STRING","_addMethodToRequest",936],"(",["T_VARIABLE","$methodName",936],",",["T_WHITESPACE"," ",936],["T_VARIABLE","$request",936],")",";",["T_WHITESPACE","\n        ",936],["T_VARIABLE","$eachCallRequest",937],["T_WHITESPACE"," ",937],"=",["T_WHITESPACE"," ",937],["T_VARIABLE","$this",937],["T_OBJECT_OPERATOR","->",937],["T_STRING","_prepareEachCallRequest",937],"(",["T_VARIABLE","$methodName",937],")",";",["T_WHITESPACE","\n        ",937],["T_IF","if",938],["T_WHITESPACE"," ",938],"(",["T_VARIABLE","$this",938],["T_OBJECT_OPERATOR","->",938],["T_STRING","getUseCertAuthentication",938],"(",")",")",["T_WHITESPACE"," ",938],"{",["T_WHITESPACE","\n            ",938],["T_IF","if",939],["T_WHITESPACE"," ",939],"(",["T_VARIABLE","$key",939],["T_WHITESPACE"," ",939],"=",["T_WHITESPACE"," ",939],["T_STRING","array_search",939],"(",["T_CONSTANT_ENCAPSED_STRING","'SIGNATURE'",939],",",["T_WHITESPACE"," ",939],["T_VARIABLE","$eachCallRequest",939],")",")",["T_WHITESPACE"," ",939],"{",["T_WHITESPACE","\n                ",939],["T_UNSET","unset",940],"(",["T_VARIABLE","$eachCallRequest",940],"[",["T_VARIABLE","$key",940],"]",")",";",["T_WHITESPACE","\n            ",940],"}",["T_WHITESPACE","\n        ",941],"}",["T_WHITESPACE","\n        ",942],["T_VARIABLE","$request",943],["T_WHITESPACE"," ",943],"=",["T_WHITESPACE"," ",943],["T_VARIABLE","$this",943],["T_OBJECT_OPERATOR","->",943],["T_STRING","_exportToRequest",943],"(",["T_VARIABLE","$eachCallRequest",943],",",["T_WHITESPACE"," ",943],["T_VARIABLE","$request",943],")",";",["T_WHITESPACE","\n        ",943],["T_VARIABLE","$debugData",944],["T_WHITESPACE"," ",944],"=",["T_WHITESPACE"," ",944],["T_ARRAY","array",944],"(",["T_CONSTANT_ENCAPSED_STRING","'url'",944],["T_WHITESPACE"," ",944],["T_DOUBLE_ARROW","=>",944],["T_WHITESPACE"," ",944],["T_VARIABLE","$this",944],["T_OBJECT_OPERATOR","->",944],["T_STRING","getApiEndpoint",944],"(",")",",",["T_WHITESPACE"," ",944],["T_VARIABLE","$methodName",944],["T_WHITESPACE"," ",944],["T_DOUBLE_ARROW","=>",944],["T_WHITESPACE"," ",944],["T_VARIABLE","$request",944],")",";",["T_WHITESPACE","\n\n        ",944],["T_TRY","try",946],["T_WHITESPACE"," ",946],"{",["T_WHITESPACE","\n            ",946],["T_VARIABLE","$http",947],["T_WHITESPACE"," ",947],"=",["T_WHITESPACE"," ",947],["T_NEW","new",947],["T_WHITESPACE"," ",947],["T_STRING","Varien_Http_Adapter_Curl",947],"(",")",";",["T_WHITESPACE","\n            ",947],["T_VARIABLE","$config",948],["T_WHITESPACE"," ",948],"=",["T_WHITESPACE"," ",948],["T_ARRAY","array",948],"(",["T_WHITESPACE","\n                ",948],["T_CONSTANT_ENCAPSED_STRING","'timeout'",949],["T_WHITESPACE","    ",949],["T_DOUBLE_ARROW","=>",949],["T_WHITESPACE"," ",949],["T_LNUMBER","60",949],",",["T_WHITESPACE","\n                ",949],["T_CONSTANT_ENCAPSED_STRING","'verifypeer'",950],["T_WHITESPACE"," ",950],["T_DOUBLE_ARROW","=>",950],["T_WHITESPACE"," ",950],["T_VARIABLE","$this",950],["T_OBJECT_OPERATOR","->",950],["T_STRING","_config",950],["T_OBJECT_OPERATOR","->",950],["T_STRING","verifyPeer",950],["T_WHITESPACE","\n            ",950],")",";",["T_WHITESPACE","\n\n            ",951],["T_IF","if",953],["T_WHITESPACE"," ",953],"(",["T_VARIABLE","$this",953],["T_OBJECT_OPERATOR","->",953],["T_STRING","getUseProxy",953],"(",")",")",["T_WHITESPACE"," ",953],"{",["T_WHITESPACE","\n                ",953],["T_VARIABLE","$config",954],"[",["T_CONSTANT_ENCAPSED_STRING","'proxy'",954],"]",["T_WHITESPACE"," ",954],"=",["T_WHITESPACE"," ",954],["T_VARIABLE","$this",954],["T_OBJECT_OPERATOR","->",954],["T_STRING","getProxyHost",954],"(",")",".",["T_WHITESPACE"," ",954],["T_CONSTANT_ENCAPSED_STRING","':'",954],["T_WHITESPACE"," ",954],".",["T_WHITESPACE"," ",954],["T_VARIABLE","$this",954],["T_OBJECT_OPERATOR","->",954],["T_STRING","getProxyPort",954],"(",")",";",["T_WHITESPACE","\n            ",954],"}",["T_WHITESPACE","\n            ",955],["T_IF","if",956],["T_WHITESPACE"," ",956],"(",["T_VARIABLE","$this",956],["T_OBJECT_OPERATOR","->",956],["T_STRING","getUseCertAuthentication",956],"(",")",")",["T_WHITESPACE"," ",956],"{",["T_WHITESPACE","\n                ",956],["T_VARIABLE","$config",957],"[",["T_CONSTANT_ENCAPSED_STRING","'ssl_cert'",957],"]",["T_WHITESPACE"," ",957],"=",["T_WHITESPACE"," ",957],["T_VARIABLE","$this",957],["T_OBJECT_OPERATOR","->",957],["T_STRING","getApiCertificate",957],"(",")",";",["T_WHITESPACE","\n            ",957],"}",["T_WHITESPACE","\n            ",958],["T_VARIABLE","$http",959],["T_OBJECT_OPERATOR","->",959],["T_STRING","setConfig",959],"(",["T_VARIABLE","$config",959],")",";",["T_WHITESPACE","\n            ",959],["T_VARIABLE","$http",960],["T_OBJECT_OPERATOR","->",960],["T_STRING","write",960],"(",["T_WHITESPACE","\n                ",960],["T_STRING","Zend_Http_Client",961],["T_DOUBLE_COLON","::",961],["T_STRING","POST",961],",",["T_WHITESPACE","\n                ",961],["T_VARIABLE","$this",962],["T_OBJECT_OPERATOR","->",962],["T_STRING","getApiEndpoint",962],"(",")",",",["T_WHITESPACE","\n                ",962],["T_CONSTANT_ENCAPSED_STRING","'1.1'",963],",",["T_WHITESPACE","\n                ",963],["T_VARIABLE","$this",964],["T_OBJECT_OPERATOR","->",964],["T_STRING","_headers",964],",",["T_WHITESPACE","\n                ",964],["T_VARIABLE","$this",965],["T_OBJECT_OPERATOR","->",965],["T_STRING","_buildQuery",965],"(",["T_VARIABLE","$request",965],")",["T_WHITESPACE","\n            ",965],")",";",["T_WHITESPACE","\n            ",966],["T_VARIABLE","$response",967],["T_WHITESPACE"," ",967],"=",["T_WHITESPACE"," ",967],["T_VARIABLE","$http",967],["T_OBJECT_OPERATOR","->",967],["T_STRING","read",967],"(",")",";",["T_WHITESPACE","\n        ",967],"}",["T_WHITESPACE"," ",968],["T_CATCH","catch",968],["T_WHITESPACE"," ",968],"(",["T_STRING","Exception",968],["T_WHITESPACE"," ",968],["T_VARIABLE","$e",968],")",["T_WHITESPACE"," ",968],"{",["T_WHITESPACE","\n            ",968],["T_VARIABLE","$debugData",969],"[",["T_CONSTANT_ENCAPSED_STRING","'http_error'",969],"]",["T_WHITESPACE"," ",969],"=",["T_WHITESPACE"," ",969],["T_ARRAY","array",969],"(",["T_CONSTANT_ENCAPSED_STRING","'error'",969],["T_WHITESPACE"," ",969],["T_DOUBLE_ARROW","=>",969],["T_WHITESPACE"," ",969],["T_VARIABLE","$e",969],["T_OBJECT_OPERATOR","->",969],["T_STRING","getMessage",969],"(",")",",",["T_WHITESPACE"," ",969],["T_CONSTANT_ENCAPSED_STRING","'code'",969],["T_WHITESPACE"," ",969],["T_DOUBLE_ARROW","=>",969],["T_WHITESPACE"," ",969],["T_VARIABLE","$e",969],["T_OBJECT_OPERATOR","->",969],["T_STRING","getCode",969],"(",")",")",";",["T_WHITESPACE","\n            ",969],["T_VARIABLE","$this",970],["T_OBJECT_OPERATOR","->",970],["T_STRING","_debug",970],"(",["T_VARIABLE","$debugData",970],")",";",["T_WHITESPACE","\n            ",970],["T_THROW","throw",971],["T_WHITESPACE"," ",971],["T_VARIABLE","$e",971],";",["T_WHITESPACE","\n        ",971],"}",["T_WHITESPACE","\n\n        ",972],["T_VARIABLE","$response",974],["T_WHITESPACE"," ",974],"=",["T_WHITESPACE"," ",974],["T_STRING","preg_split",974],"(",["T_CONSTANT_ENCAPSED_STRING","'\/^\\r?$\/m'",974],",",["T_WHITESPACE"," ",974],["T_VARIABLE","$response",974],",",["T_WHITESPACE"," ",974],["T_LNUMBER","2",974],")",";",["T_WHITESPACE","\n        ",974],["T_VARIABLE","$response",975],["T_WHITESPACE"," ",975],"=",["T_WHITESPACE"," ",975],["T_STRING","trim",975],"(",["T_VARIABLE","$response",975],"[",["T_LNUMBER","1",975],"]",")",";",["T_WHITESPACE","\n        ",975],["T_VARIABLE","$response",976],["T_WHITESPACE"," ",976],"=",["T_WHITESPACE"," ",976],["T_VARIABLE","$this",976],["T_OBJECT_OPERATOR","->",976],["T_STRING","_deformatNVP",976],"(",["T_VARIABLE","$response",976],")",";",["T_WHITESPACE","\n\n        ",976],["T_VARIABLE","$debugData",978],"[",["T_CONSTANT_ENCAPSED_STRING","'response'",978],"]",["T_WHITESPACE"," ",978],"=",["T_WHITESPACE"," ",978],["T_VARIABLE","$response",978],";",["T_WHITESPACE","\n        ",978],["T_VARIABLE","$this",979],["T_OBJECT_OPERATOR","->",979],["T_STRING","_debug",979],"(",["T_VARIABLE","$debugData",979],")",";",["T_WHITESPACE","\n        ",979],["T_VARIABLE","$response",980],["T_WHITESPACE"," ",980],"=",["T_WHITESPACE"," ",980],["T_VARIABLE","$this",980],["T_OBJECT_OPERATOR","->",980],["T_STRING","_postProcessResponse",980],"(",["T_VARIABLE","$response",980],")",";",["T_WHITESPACE","\n\n        ",980],["T_COMMENT","\/\/ handle transport error\n",982],["T_WHITESPACE","        ",983],["T_IF","if",983],["T_WHITESPACE"," ",983],"(",["T_VARIABLE","$http",983],["T_OBJECT_OPERATOR","->",983],["T_STRING","getErrno",983],"(",")",")",["T_WHITESPACE"," ",983],"{",["T_WHITESPACE","\n            ",983],["T_STRING","Mage",984],["T_DOUBLE_COLON","::",984],["T_STRING","logException",984],"(",["T_NEW","new",984],["T_WHITESPACE"," ",984],["T_STRING","Exception",984],"(",["T_WHITESPACE","\n                ",984],["T_STRING","sprintf",985],"(",["T_CONSTANT_ENCAPSED_STRING","'PayPal NVP CURL connection error #%s: %s'",985],",",["T_WHITESPACE"," ",985],["T_VARIABLE","$http",985],["T_OBJECT_OPERATOR","->",985],["T_STRING","getErrno",985],"(",")",",",["T_WHITESPACE"," ",985],["T_VARIABLE","$http",985],["T_OBJECT_OPERATOR","->",985],["T_STRING","getError",985],"(",")",")",["T_WHITESPACE","\n            ",985],")",")",";",["T_WHITESPACE","\n            ",986],["T_VARIABLE","$http",987],["T_OBJECT_OPERATOR","->",987],["T_STRING","close",987],"(",")",";",["T_WHITESPACE","\n\n            ",987],["T_STRING","Mage",989],["T_DOUBLE_COLON","::",989],["T_STRING","throwException",989],"(",["T_STRING","Mage",989],["T_DOUBLE_COLON","::",989],["T_STRING","helper",989],"(",["T_CONSTANT_ENCAPSED_STRING","'paypal'",989],")",["T_OBJECT_OPERATOR","->",989],["T_STRING","__",989],"(",["T_CONSTANT_ENCAPSED_STRING","'Unable to communicate with the PayPal gateway.'",989],")",")",";",["T_WHITESPACE","\n        ",989],"}",["T_WHITESPACE","\n\n        ",990],["T_COMMENT","\/\/ cUrl resource must be closed after checking it for errors\n",992],["T_WHITESPACE","        ",993],["T_VARIABLE","$http",993],["T_OBJECT_OPERATOR","->",993],["T_STRING","close",993],"(",")",";",["T_WHITESPACE","\n\n        ",993],["T_IF","if",995],["T_WHITESPACE"," ",995],"(","!",["T_VARIABLE","$this",995],["T_OBJECT_OPERATOR","->",995],["T_STRING","_validateResponse",995],"(",["T_VARIABLE","$methodName",995],",",["T_WHITESPACE"," ",995],["T_VARIABLE","$response",995],")",")",["T_WHITESPACE"," ",995],"{",["T_WHITESPACE","\n            ",995],["T_STRING","Mage",996],["T_DOUBLE_COLON","::",996],["T_STRING","logException",996],"(",["T_NEW","new",996],["T_WHITESPACE"," ",996],["T_STRING","Exception",996],"(",["T_WHITESPACE","\n                ",996],["T_STRING","Mage",997],["T_DOUBLE_COLON","::",997],["T_STRING","helper",997],"(",["T_CONSTANT_ENCAPSED_STRING","'paypal'",997],")",["T_OBJECT_OPERATOR","->",997],["T_STRING","__",997],"(",["T_CONSTANT_ENCAPSED_STRING","\"PayPal response hasn't required fields.\"",997],")",["T_WHITESPACE","\n            ",997],")",")",";",["T_WHITESPACE","\n            ",998],["T_STRING","Mage",999],["T_DOUBLE_COLON","::",999],["T_STRING","throwException",999],"(",["T_STRING","Mage",999],["T_DOUBLE_COLON","::",999],["T_STRING","helper",999],"(",["T_CONSTANT_ENCAPSED_STRING","'paypal'",999],")",["T_OBJECT_OPERATOR","->",999],["T_STRING","__",999],"(",["T_CONSTANT_ENCAPSED_STRING","'There was an error processing your order. Please contact us or try again later.'",999],")",")",";",["T_WHITESPACE","\n        ",999],"}",["T_WHITESPACE","\n\n        ",1000],["T_VARIABLE","$this",1002],["T_OBJECT_OPERATOR","->",1002],["T_STRING","_callErrors",1002],["T_WHITESPACE"," ",1002],"=",["T_WHITESPACE"," ",1002],["T_ARRAY","array",1002],"(",")",";",["T_WHITESPACE","\n        ",1002],["T_IF","if",1003],["T_WHITESPACE"," ",1003],"(",["T_VARIABLE","$this",1003],["T_OBJECT_OPERATOR","->",1003],["T_STRING","_isCallSuccessful",1003],"(",["T_VARIABLE","$response",1003],")",")",["T_WHITESPACE"," ",1003],"{",["T_WHITESPACE","\n            ",1003],["T_IF","if",1004],["T_WHITESPACE"," ",1004],"(",["T_VARIABLE","$this",1004],["T_OBJECT_OPERATOR","->",1004],["T_STRING","_rawResponseNeeded",1004],")",["T_WHITESPACE"," ",1004],"{",["T_WHITESPACE","\n                ",1004],["T_VARIABLE","$this",1005],["T_OBJECT_OPERATOR","->",1005],["T_STRING","setRawSuccessResponseData",1005],"(",["T_VARIABLE","$response",1005],")",";",["T_WHITESPACE","\n            ",1005],"}",["T_WHITESPACE","\n            ",1006],["T_RETURN","return",1007],["T_WHITESPACE"," ",1007],["T_VARIABLE","$response",1007],";",["T_WHITESPACE","\n        ",1007],"}",["T_WHITESPACE","\n        ",1008],["T_VARIABLE","$this",1009],["T_OBJECT_OPERATOR","->",1009],["T_STRING","_handleCallErrors",1009],"(",["T_VARIABLE","$response",1009],")",";",["T_WHITESPACE","\n        ",1009],["T_RETURN","return",1010],["T_WHITESPACE"," ",1010],["T_VARIABLE","$response",1010],";",["T_WHITESPACE","\n    ",1010],"}",["T_WHITESPACE","\n\n    ",1011],["T_DOC_COMMENT","\/**\n     * Setter for 'raw response needed' flag\n     *\n     * @param bool $flag\n     * @return Mage_Paypal_Model_Api_Nvp\n     *\/",1013],["T_WHITESPACE","\n    ",1018],["T_PUBLIC","public",1019],["T_WHITESPACE"," ",1019],["T_FUNCTION","function",1019],["T_WHITESPACE"," ",1019],["T_STRING","setRawResponseNeeded",1019],"(",["T_VARIABLE","$flag",1019],")",["T_WHITESPACE","\n    ",1019],"{",["T_WHITESPACE","\n        ",1020],["T_VARIABLE","$this",1021],["T_OBJECT_OPERATOR","->",1021],["T_STRING","_rawResponseNeeded",1021],["T_WHITESPACE"," ",1021],"=",["T_WHITESPACE"," ",1021],["T_VARIABLE","$flag",1021],";",["T_WHITESPACE","\n        ",1021],["T_RETURN","return",1022],["T_WHITESPACE"," ",1022],["T_VARIABLE","$this",1022],";",["T_WHITESPACE","\n    ",1022],"}",["T_WHITESPACE","\n\n    ",1023],["T_DOC_COMMENT","\/**\n     * Handle logical errors\n     *\n     * @param array $response\n     * @throws Mage_Core_Exception\n     *\/",1025],["T_WHITESPACE","\n    ",1030],["T_PROTECTED","protected",1031],["T_WHITESPACE"," ",1031],["T_FUNCTION","function",1031],["T_WHITESPACE"," ",1031],["T_STRING","_handleCallErrors",1031],"(",["T_VARIABLE","$response",1031],")",["T_WHITESPACE","\n    ",1031],"{",["T_WHITESPACE","\n        ",1032],["T_VARIABLE","$errors",1033],["T_WHITESPACE"," ",1033],"=",["T_WHITESPACE"," ",1033],["T_VARIABLE","$this",1033],["T_OBJECT_OPERATOR","->",1033],["T_STRING","_extractErrorsFromResponse",1033],"(",["T_VARIABLE","$response",1033],")",";",["T_WHITESPACE","\n        ",1033],["T_VARIABLE","$errorsCount",1034],["T_WHITESPACE"," ",1034],"=",["T_WHITESPACE"," ",1034],["T_STRING","count",1034],"(",["T_VARIABLE","$errors",1034],")",";",["T_WHITESPACE","\n\n        ",1034],["T_IF","if",1036],["T_WHITESPACE"," ",1036],"(","!",["T_VARIABLE","$errorsCount",1036],")",["T_WHITESPACE"," ",1036],"{",["T_WHITESPACE","\n            ",1036],["T_RETURN","return",1037],";",["T_WHITESPACE","\n        ",1037],"}",["T_WHITESPACE","\n\n        ",1038],["T_VARIABLE","$exceptionCode",1040],["T_WHITESPACE"," ",1040],"=",["T_WHITESPACE"," ",1040],["T_LNUMBER","0",1040],";",["T_WHITESPACE","\n\n        ",1040],["T_IF","if",1042],["T_WHITESPACE"," ",1042],"(",["T_VARIABLE","$errorsCount",1042],["T_WHITESPACE"," ",1042],["T_IS_EQUAL","==",1042],["T_WHITESPACE"," ",1042],["T_LNUMBER","1",1042],["T_WHITESPACE"," ",1042],["T_BOOLEAN_AND","&&",1042],["T_WHITESPACE"," ",1042],["T_VARIABLE","$this",1042],["T_OBJECT_OPERATOR","->",1042],["T_STRING","_isProcessableError",1042],"(",["T_VARIABLE","$errors",1042],"[",["T_LNUMBER","0",1042],"]","[",["T_CONSTANT_ENCAPSED_STRING","'code'",1042],"]",")",")",["T_WHITESPACE"," ",1042],"{",["T_WHITESPACE","\n            ",1042],["T_VARIABLE","$exceptionCode",1043],["T_WHITESPACE"," ",1043],"=",["T_WHITESPACE"," ",1043],["T_VARIABLE","$errors",1043],"[",["T_LNUMBER","0",1043],"]","[",["T_CONSTANT_ENCAPSED_STRING","'code'",1043],"]",";",["T_WHITESPACE","\n            ",1043],["T_VARIABLE","$exceptionClass",1044],["T_WHITESPACE"," ",1044],"=",["T_WHITESPACE"," ",1044],["T_CONSTANT_ENCAPSED_STRING","'Mage_Paypal_Model_Api_ProcessableException'",1044],";",["T_WHITESPACE","\n        ",1044],"}",["T_WHITESPACE"," ",1045],["T_ELSE","else",1045],["T_WHITESPACE"," ",1045],"{",["T_WHITESPACE","\n            ",1045],["T_VARIABLE","$exceptionClass",1046],["T_WHITESPACE"," ",1046],"=",["T_WHITESPACE"," ",1046],["T_CONSTANT_ENCAPSED_STRING","'Mage_Core_Exception'",1046],";",["T_WHITESPACE","\n        ",1046],"}",["T_WHITESPACE","\n\n        ",1047],["T_VARIABLE","$errorMessages",1049],["T_WHITESPACE"," ",1049],"=",["T_WHITESPACE"," ",1049],["T_ARRAY","array",1049],"(",")",";",["T_WHITESPACE","\n\n        ",1049],["T_FOREACH","foreach",1051],["T_WHITESPACE"," ",1051],"(",["T_VARIABLE","$errors",1051],["T_WHITESPACE"," ",1051],["T_AS","as",1051],["T_WHITESPACE"," ",1051],["T_VARIABLE","$error",1051],")",["T_WHITESPACE"," ",1051],"{",["T_WHITESPACE","\n            ",1051],["T_VARIABLE","$errorMessages",1052],"[","]",["T_WHITESPACE"," ",1052],"=",["T_WHITESPACE"," ",1052],["T_VARIABLE","$error",1052],"[",["T_CONSTANT_ENCAPSED_STRING","'message'",1052],"]",";",["T_WHITESPACE","\n            ",1052],["T_VARIABLE","$this",1053],["T_OBJECT_OPERATOR","->",1053],["T_STRING","_callErrors",1053],"[","]",["T_WHITESPACE"," ",1053],"=",["T_WHITESPACE"," ",1053],["T_VARIABLE","$error",1053],"[",["T_CONSTANT_ENCAPSED_STRING","'code'",1053],"]",";",["T_WHITESPACE","\n        ",1053],"}",["T_WHITESPACE","\n\n        ",1054],["T_VARIABLE","$errorMessages",1056],["T_WHITESPACE"," ",1056],"=",["T_WHITESPACE"," ",1056],["T_STRING","implode",1056],"(",["T_CONSTANT_ENCAPSED_STRING","' '",1056],",",["T_WHITESPACE"," ",1056],["T_STRING","array_values",1056],"(",["T_VARIABLE","$errorMessages",1056],")",")",";",["T_WHITESPACE","\n        ",1056],["T_VARIABLE","$exceptionLogMessage",1057],["T_WHITESPACE"," ",1057],"=",["T_WHITESPACE"," ",1057],["T_STRING","sprintf",1057],"(",["T_CONSTANT_ENCAPSED_STRING","'PayPal NVP gateway errors: %s Correlation ID: %s. Version: %s.'",1057],",",["T_WHITESPACE","\n            ",1057],["T_VARIABLE","$errorMessages",1058],",",["T_WHITESPACE","\n            ",1058],["T_ISSET","isset",1059],"(",["T_VARIABLE","$response",1059],"[",["T_CONSTANT_ENCAPSED_STRING","'CORRELATIONID'",1059],"]",")",["T_WHITESPACE"," ",1059],"?",["T_WHITESPACE"," ",1059],["T_VARIABLE","$response",1059],"[",["T_CONSTANT_ENCAPSED_STRING","'CORRELATIONID'",1059],"]",["T_WHITESPACE"," ",1059],":",["T_WHITESPACE"," ",1059],["T_CONSTANT_ENCAPSED_STRING","''",1059],",",["T_WHITESPACE","\n            ",1059],["T_ISSET","isset",1060],"(",["T_VARIABLE","$response",1060],"[",["T_CONSTANT_ENCAPSED_STRING","'VERSION'",1060],"]",")",["T_WHITESPACE"," ",1060],"?",["T_WHITESPACE"," ",1060],["T_VARIABLE","$response",1060],"[",["T_CONSTANT_ENCAPSED_STRING","'VERSION'",1060],"]",["T_WHITESPACE"," ",1060],":",["T_WHITESPACE"," ",1060],["T_CONSTANT_ENCAPSED_STRING","''",1060],["T_WHITESPACE","\n        ",1060],")",";",["T_WHITESPACE","\n\n        ",1061],["T_VARIABLE","$exception",1063],["T_WHITESPACE"," ",1063],"=",["T_WHITESPACE"," ",1063],["T_NEW","new",1063],["T_WHITESPACE"," ",1063],["T_VARIABLE","$exceptionClass",1063],"(",["T_VARIABLE","$exceptionLogMessage",1063],",",["T_WHITESPACE"," ",1063],["T_VARIABLE","$exceptionCode",1063],")",";",["T_WHITESPACE","\n        ",1063],["T_STRING","Mage",1064],["T_DOUBLE_COLON","::",1064],["T_STRING","logException",1064],"(",["T_VARIABLE","$exception",1064],")",";",["T_WHITESPACE","\n\n        ",1064],["T_VARIABLE","$exception",1066],["T_OBJECT_OPERATOR","->",1066],["T_STRING","setMessage",1066],"(",["T_STRING","Mage",1066],["T_DOUBLE_COLON","::",1066],["T_STRING","helper",1066],"(",["T_CONSTANT_ENCAPSED_STRING","'paypal'",1066],")",["T_OBJECT_OPERATOR","->",1066],["T_STRING","__",1066],"(",["T_CONSTANT_ENCAPSED_STRING","'PayPal gateway has rejected request. %s'",1066],",",["T_WHITESPACE"," ",1066],["T_VARIABLE","$errorMessages",1066],")",")",";",["T_WHITESPACE","\n\n        ",1066],["T_THROW","throw",1068],["T_WHITESPACE"," ",1068],["T_VARIABLE","$exception",1068],";",["T_WHITESPACE","\n    ",1068],"}",["T_WHITESPACE","\n\n    ",1069],["T_DOC_COMMENT","\/**\n     * Format error message from error code, short error message and long error message\n     *\n     * @param string $errorCode\n     * @param string $shortErrorMessage\n     * @param string $longErrorMessage\n     * @return string\n     *\/",1071],["T_WHITESPACE","\n    ",1078],["T_PROTECTED","protected",1079],["T_WHITESPACE"," ",1079],["T_FUNCTION","function",1079],["T_WHITESPACE"," ",1079],["T_STRING","_formatErrorMessage",1079],"(",["T_VARIABLE","$errorCode",1079],",",["T_WHITESPACE"," ",1079],["T_VARIABLE","$shortErrorMessage",1079],",",["T_WHITESPACE"," ",1079],["T_VARIABLE","$longErrorMessage",1079],")",["T_WHITESPACE","\n    ",1079],"{",["T_WHITESPACE","\n        ",1080],["T_VARIABLE","$longErrorMessage",1081],["T_WHITESPACE","  ",1081],"=",["T_WHITESPACE"," ",1081],["T_STRING","preg_replace",1081],"(",["T_CONSTANT_ENCAPSED_STRING","'\/\\.$\/'",1081],",",["T_WHITESPACE"," ",1081],["T_CONSTANT_ENCAPSED_STRING","''",1081],",",["T_WHITESPACE"," ",1081],["T_VARIABLE","$longErrorMessage",1081],")",";",["T_WHITESPACE","\n        ",1081],["T_VARIABLE","$shortErrorMessage",1082],["T_WHITESPACE"," ",1082],"=",["T_WHITESPACE"," ",1082],["T_STRING","preg_replace",1082],"(",["T_CONSTANT_ENCAPSED_STRING","'\/\\.$\/'",1082],",",["T_WHITESPACE"," ",1082],["T_CONSTANT_ENCAPSED_STRING","''",1082],",",["T_WHITESPACE"," ",1082],["T_VARIABLE","$shortErrorMessage",1082],")",";",["T_WHITESPACE","\n\n        ",1082],["T_RETURN","return",1084],["T_WHITESPACE"," ",1084],["T_VARIABLE","$longErrorMessage",1084],["T_WHITESPACE"," ",1084],"?",["T_WHITESPACE"," ",1084],["T_STRING","sprintf",1084],"(",["T_CONSTANT_ENCAPSED_STRING","'%s (#%s: %s).'",1084],",",["T_WHITESPACE"," ",1084],["T_VARIABLE","$longErrorMessage",1084],",",["T_WHITESPACE"," ",1084],["T_VARIABLE","$errorCode",1084],",",["T_WHITESPACE"," ",1084],["T_VARIABLE","$shortErrorMessage",1084],")",["T_WHITESPACE","\n            ",1084],":",["T_WHITESPACE"," ",1085],["T_STRING","sprintf",1085],"(",["T_CONSTANT_ENCAPSED_STRING","'#%s: %s.'",1085],",",["T_WHITESPACE"," ",1085],["T_VARIABLE","$errorCode",1085],",",["T_WHITESPACE"," ",1085],["T_VARIABLE","$shortErrorMessage",1085],")",";",["T_WHITESPACE","\n    ",1085],"}",["T_WHITESPACE","\n\n\n    ",1086],["T_DOC_COMMENT","\/**\n     * Check whether PayPal error can be processed\n     *\n     * @param int $errorCode\n     * @return bool\n     *\/",1089],["T_WHITESPACE","\n    ",1094],["T_PROTECTED","protected",1095],["T_WHITESPACE"," ",1095],["T_FUNCTION","function",1095],["T_WHITESPACE"," ",1095],["T_STRING","_isProcessableError",1095],"(",["T_VARIABLE","$errorCode",1095],")",["T_WHITESPACE","\n    ",1095],"{",["T_WHITESPACE","\n        ",1096],["T_VARIABLE","$processableErrorsList",1097],["T_WHITESPACE"," ",1097],"=",["T_WHITESPACE"," ",1097],["T_VARIABLE","$this",1097],["T_OBJECT_OPERATOR","->",1097],["T_STRING","getProcessableErrors",1097],"(",")",";",["T_WHITESPACE","\n\n        ",1097],["T_IF","if",1099],["T_WHITESPACE"," ",1099],"(","!",["T_VARIABLE","$processableErrorsList",1099],["T_WHITESPACE"," ",1099],["T_BOOLEAN_OR","||",1099],["T_WHITESPACE"," ",1099],"!",["T_STRING","is_array",1099],"(",["T_VARIABLE","$processableErrorsList",1099],")",")",["T_WHITESPACE"," ",1099],"{",["T_WHITESPACE","\n            ",1099],["T_RETURN","return",1100],["T_WHITESPACE"," ",1100],["T_STRING","false",1100],";",["T_WHITESPACE","\n        ",1100],"}",["T_WHITESPACE","\n\n        ",1101],["T_RETURN","return",1103],["T_WHITESPACE"," ",1103],["T_STRING","in_array",1103],"(",["T_VARIABLE","$errorCode",1103],",",["T_WHITESPACE"," ",1103],["T_VARIABLE","$processableErrorsList",1103],")",";",["T_WHITESPACE","\n    ",1103],"}",["T_WHITESPACE","\n\n    ",1104],["T_DOC_COMMENT","\/**\n     * Extract errors from PayPal's response and return them in array\n     *\n     * @param array $response\n     * @return array\n     *\/",1106],["T_WHITESPACE","\n    ",1111],["T_PROTECTED","protected",1112],["T_WHITESPACE"," ",1112],["T_FUNCTION","function",1112],["T_WHITESPACE"," ",1112],["T_STRING","_extractErrorsFromResponse",1112],"(",["T_VARIABLE","$response",1112],")",["T_WHITESPACE","\n    ",1112],"{",["T_WHITESPACE","\n        ",1113],["T_VARIABLE","$errors",1114],["T_WHITESPACE"," ",1114],"=",["T_WHITESPACE"," ",1114],["T_ARRAY","array",1114],"(",")",";",["T_WHITESPACE","\n\n        ",1114],["T_FOR","for",1116],["T_WHITESPACE"," ",1116],"(",["T_VARIABLE","$i",1116],["T_WHITESPACE"," ",1116],"=",["T_WHITESPACE"," ",1116],["T_LNUMBER","0",1116],";",["T_WHITESPACE"," ",1116],["T_ISSET","isset",1116],"(",["T_VARIABLE","$response",1116],"[","\"",["T_ENCAPSED_AND_WHITESPACE","L_ERRORCODE",1116],["T_CURLY_OPEN","{",1116],["T_VARIABLE","$i",1116],"}","\"","]",")",";",["T_WHITESPACE"," ",1116],["T_VARIABLE","$i",1116],["T_INC","++",1116],")",["T_WHITESPACE"," ",1116],"{",["T_WHITESPACE","\n            ",1116],["T_VARIABLE","$errorCode",1117],["T_WHITESPACE"," ",1117],"=",["T_WHITESPACE"," ",1117],["T_VARIABLE","$response",1117],"[","\"",["T_ENCAPSED_AND_WHITESPACE","L_ERRORCODE",1117],["T_CURLY_OPEN","{",1117],["T_VARIABLE","$i",1117],"}","\"","]",";",["T_WHITESPACE","\n            ",1117],["T_VARIABLE","$errorMessage",1118],["T_WHITESPACE"," ",1118],"=",["T_WHITESPACE"," ",1118],["T_VARIABLE","$this",1118],["T_OBJECT_OPERATOR","->",1118],["T_STRING","_formatErrorMessage",1118],"(",["T_VARIABLE","$errorCode",1118],",",["T_WHITESPACE"," ",1118],["T_VARIABLE","$response",1118],"[","\"",["T_ENCAPSED_AND_WHITESPACE","L_SHORTMESSAGE",1118],["T_CURLY_OPEN","{",1118],["T_VARIABLE","$i",1118],"}","\"","]",",",["T_WHITESPACE","\n                ",1118],["T_VARIABLE","$response",1119],"[","\"",["T_ENCAPSED_AND_WHITESPACE","L_LONGMESSAGE",1119],["T_CURLY_OPEN","{",1119],["T_VARIABLE","$i",1119],"}","\"","]",")",";",["T_WHITESPACE","\n            ",1119],["T_VARIABLE","$errors",1120],"[","]",["T_WHITESPACE"," ",1120],"=",["T_WHITESPACE"," ",1120],["T_ARRAY","array",1120],["T_WHITESPACE"," ",1120],"(",["T_WHITESPACE","\n                ",1120],["T_CONSTANT_ENCAPSED_STRING","'code'",1121],["T_WHITESPACE","    ",1121],["T_DOUBLE_ARROW","=>",1121],["T_WHITESPACE"," ",1121],["T_VARIABLE","$errorCode",1121],",",["T_WHITESPACE","\n                ",1121],["T_CONSTANT_ENCAPSED_STRING","'message'",1122],["T_WHITESPACE"," ",1122],["T_DOUBLE_ARROW","=>",1122],["T_WHITESPACE"," ",1122],["T_VARIABLE","$errorMessage",1122],["T_WHITESPACE","\n            ",1122],")",";",["T_WHITESPACE","\n        ",1123],"}",["T_WHITESPACE","\n\n        ",1124],["T_RETURN","return",1126],["T_WHITESPACE"," ",1126],["T_VARIABLE","$errors",1126],";",["T_WHITESPACE","\n    ",1126],"}",["T_WHITESPACE","\n\n    ",1127],["T_DOC_COMMENT","\/**\n     * Catch success calls and collect warnings\n     *\n     * @param array\n     * @return bool| success flag\n     *\/",1129],["T_WHITESPACE","\n    ",1134],["T_PROTECTED","protected",1135],["T_WHITESPACE"," ",1135],["T_FUNCTION","function",1135],["T_WHITESPACE"," ",1135],["T_STRING","_isCallSuccessful",1135],"(",["T_VARIABLE","$response",1135],")",["T_WHITESPACE","\n    ",1135],"{",["T_WHITESPACE","\n        ",1136],["T_IF","if",1137],["T_WHITESPACE"," ",1137],"(","!",["T_ISSET","isset",1137],"(",["T_VARIABLE","$response",1137],"[",["T_CONSTANT_ENCAPSED_STRING","'ACK'",1137],"]",")",")",["T_WHITESPACE"," ",1137],"{",["T_WHITESPACE","\n            ",1137],["T_RETURN","return",1138],["T_WHITESPACE"," ",1138],["T_STRING","false",1138],";",["T_WHITESPACE","\n        ",1138],"}",["T_WHITESPACE","\n\n        ",1139],["T_VARIABLE","$ack",1141],["T_WHITESPACE"," ",1141],"=",["T_WHITESPACE"," ",1141],["T_STRING","strtoupper",1141],"(",["T_VARIABLE","$response",1141],"[",["T_CONSTANT_ENCAPSED_STRING","'ACK'",1141],"]",")",";",["T_WHITESPACE","\n        ",1141],["T_VARIABLE","$this",1142],["T_OBJECT_OPERATOR","->",1142],["T_STRING","_callWarnings",1142],["T_WHITESPACE"," ",1142],"=",["T_WHITESPACE"," ",1142],["T_ARRAY","array",1142],"(",")",";",["T_WHITESPACE","\n        ",1142],["T_IF","if",1143],["T_WHITESPACE"," ",1143],"(",["T_VARIABLE","$ack",1143],["T_WHITESPACE"," ",1143],["T_IS_EQUAL","==",1143],["T_WHITESPACE"," ",1143],["T_CONSTANT_ENCAPSED_STRING","'SUCCESS'",1143],["T_WHITESPACE"," ",1143],["T_BOOLEAN_OR","||",1143],["T_WHITESPACE"," ",1143],["T_VARIABLE","$ack",1143],["T_WHITESPACE"," ",1143],["T_IS_EQUAL","==",1143],["T_WHITESPACE"," ",1143],["T_CONSTANT_ENCAPSED_STRING","'SUCCESSWITHWARNING'",1143],")",["T_WHITESPACE"," ",1143],"{",["T_WHITESPACE","\n            ",1143],["T_COMMENT","\/\/ collect warnings\n",1144],["T_WHITESPACE","            ",1145],["T_IF","if",1145],["T_WHITESPACE"," ",1145],"(",["T_VARIABLE","$ack",1145],["T_WHITESPACE"," ",1145],["T_IS_EQUAL","==",1145],["T_WHITESPACE"," ",1145],["T_CONSTANT_ENCAPSED_STRING","'SUCCESSWITHWARNING'",1145],")",["T_WHITESPACE"," ",1145],"{",["T_WHITESPACE","\n                ",1145],["T_FOR","for",1146],["T_WHITESPACE"," ",1146],"(",["T_VARIABLE","$i",1146],["T_WHITESPACE"," ",1146],"=",["T_WHITESPACE"," ",1146],["T_LNUMBER","0",1146],";",["T_WHITESPACE"," ",1146],["T_ISSET","isset",1146],"(",["T_VARIABLE","$response",1146],"[","\"",["T_ENCAPSED_AND_WHITESPACE","L_ERRORCODE",1146],["T_CURLY_OPEN","{",1146],["T_VARIABLE","$i",1146],"}","\"","]",")",";",["T_WHITESPACE"," ",1146],["T_VARIABLE","$i",1146],["T_INC","++",1146],")",["T_WHITESPACE"," ",1146],"{",["T_WHITESPACE","\n                    ",1146],["T_VARIABLE","$this",1147],["T_OBJECT_OPERATOR","->",1147],["T_STRING","_callWarnings",1147],"[","]",["T_WHITESPACE"," ",1147],"=",["T_WHITESPACE"," ",1147],["T_VARIABLE","$response",1147],"[","\"",["T_ENCAPSED_AND_WHITESPACE","L_ERRORCODE",1147],["T_CURLY_OPEN","{",1147],["T_VARIABLE","$i",1147],"}","\"","]",";",["T_WHITESPACE","\n                ",1147],"}",["T_WHITESPACE","\n            ",1148],"}",["T_WHITESPACE","\n            ",1149],["T_RETURN","return",1150],["T_WHITESPACE"," ",1150],["T_STRING","true",1150],";",["T_WHITESPACE","\n        ",1150],"}",["T_WHITESPACE","\n        ",1151],["T_RETURN","return",1152],["T_WHITESPACE"," ",1152],["T_STRING","false",1152],";",["T_WHITESPACE","\n    ",1152],"}",["T_WHITESPACE","\n\n    ",1153],["T_DOC_COMMENT","\/**\n     * Validate response array.\n     *\n     * @param string $method\n     * @param array $response\n     * @return bool\n     *\/",1155],["T_WHITESPACE","\n    ",1161],["T_PROTECTED","protected",1162],["T_WHITESPACE"," ",1162],["T_FUNCTION","function",1162],["T_WHITESPACE"," ",1162],["T_STRING","_validateResponse",1162],"(",["T_VARIABLE","$method",1162],",",["T_WHITESPACE"," ",1162],["T_VARIABLE","$response",1162],")",["T_WHITESPACE","\n    ",1162],"{",["T_WHITESPACE","\n        ",1163],["T_IF","if",1164],["T_WHITESPACE"," ",1164],"(",["T_ISSET","isset",1164],"(",["T_VARIABLE","$this",1164],["T_OBJECT_OPERATOR","->",1164],["T_STRING","_requiredResponseParams",1164],"[",["T_VARIABLE","$method",1164],"]",")",")",["T_WHITESPACE"," ",1164],"{",["T_WHITESPACE","\n            ",1164],["T_FOREACH","foreach",1165],["T_WHITESPACE"," ",1165],"(",["T_VARIABLE","$this",1165],["T_OBJECT_OPERATOR","->",1165],["T_STRING","_requiredResponseParams",1165],"[",["T_VARIABLE","$method",1165],"]",["T_WHITESPACE"," ",1165],["T_AS","as",1165],["T_WHITESPACE"," ",1165],["T_VARIABLE","$param",1165],")",["T_WHITESPACE"," ",1165],"{",["T_WHITESPACE","\n                ",1165],["T_IF","if",1166],["T_WHITESPACE"," ",1166],"(","!",["T_ISSET","isset",1166],"(",["T_VARIABLE","$response",1166],"[",["T_VARIABLE","$param",1166],"]",")",")",["T_WHITESPACE"," ",1166],"{",["T_WHITESPACE","\n                    ",1166],["T_RETURN","return",1167],["T_WHITESPACE"," ",1167],["T_STRING","false",1167],";",["T_WHITESPACE","\n                ",1167],"}",["T_WHITESPACE","\n            ",1168],"}",["T_WHITESPACE","\n        ",1169],"}",["T_WHITESPACE","\n        ",1170],["T_RETURN","return",1171],["T_WHITESPACE"," ",1171],["T_STRING","true",1171],";",["T_WHITESPACE","\n    ",1171],"}",["T_WHITESPACE","\n\n    ",1172],["T_DOC_COMMENT","\/**\n     * Parse an NVP response string into an associative array\n     * @param string $nvpstr\n     * @return array\n     *\/",1174],["T_WHITESPACE","\n    ",1178],["T_PROTECTED","protected",1179],["T_WHITESPACE"," ",1179],["T_FUNCTION","function",1179],["T_WHITESPACE"," ",1179],["T_STRING","_deformatNVP",1179],"(",["T_VARIABLE","$nvpstr",1179],")",["T_WHITESPACE","\n    ",1179],"{",["T_WHITESPACE","\n        ",1180],["T_VARIABLE","$intial",1181],"=",["T_LNUMBER","0",1181],";",["T_WHITESPACE","\n        ",1181],["T_VARIABLE","$nvpArray",1182],["T_WHITESPACE"," ",1182],"=",["T_WHITESPACE"," ",1182],["T_ARRAY","array",1182],"(",")",";",["T_WHITESPACE","\n\n        ",1182],["T_VARIABLE","$nvpstr",1184],["T_WHITESPACE"," ",1184],"=",["T_WHITESPACE"," ",1184],["T_STRING","strpos",1184],"(",["T_VARIABLE","$nvpstr",1184],",",["T_WHITESPACE"," ",1184],["T_CONSTANT_ENCAPSED_STRING","\"\\r\\n\\r\\n\"",1184],")",["T_IS_NOT_IDENTICAL","!==",1184],["T_STRING","false",1184],["T_WHITESPACE"," ",1184],"?",["T_WHITESPACE"," ",1184],["T_STRING","substr",1184],"(",["T_VARIABLE","$nvpstr",1184],",",["T_WHITESPACE"," ",1184],["T_STRING","strpos",1184],"(",["T_VARIABLE","$nvpstr",1184],",",["T_WHITESPACE"," ",1184],["T_CONSTANT_ENCAPSED_STRING","\"\\r\\n\\r\\n\"",1184],")","+",["T_LNUMBER","4",1184],")",["T_WHITESPACE"," ",1184],":",["T_WHITESPACE"," ",1184],["T_VARIABLE","$nvpstr",1184],";",["T_WHITESPACE","\n\n        ",1184],["T_WHILE","while",1186],"(",["T_STRING","strlen",1186],"(",["T_VARIABLE","$nvpstr",1186],")",")",["T_WHITESPACE"," ",1186],"{",["T_WHITESPACE","\n            ",1186],["T_COMMENT","\/\/postion of Key\n",1187],["T_WHITESPACE","            ",1188],["T_VARIABLE","$keypos",1188],"=",["T_WHITESPACE"," ",1188],["T_STRING","strpos",1188],"(",["T_VARIABLE","$nvpstr",1188],",",["T_CONSTANT_ENCAPSED_STRING","'='",1188],")",";",["T_WHITESPACE","\n            ",1188],["T_COMMENT","\/\/position of value\n",1189],["T_WHITESPACE","            ",1190],["T_VARIABLE","$valuepos",1190],["T_WHITESPACE"," ",1190],"=",["T_WHITESPACE"," ",1190],["T_STRING","strpos",1190],"(",["T_VARIABLE","$nvpstr",1190],",",["T_CONSTANT_ENCAPSED_STRING","'&'",1190],")",["T_WHITESPACE"," ",1190],"?",["T_WHITESPACE"," ",1190],["T_STRING","strpos",1190],"(",["T_VARIABLE","$nvpstr",1190],",",["T_CONSTANT_ENCAPSED_STRING","'&'",1190],")",":",["T_WHITESPACE"," ",1190],["T_STRING","strlen",1190],"(",["T_VARIABLE","$nvpstr",1190],")",";",["T_WHITESPACE","\n\n            ",1190],["T_COMMENT","\/*getting the Key and Value values and storing in a Associative Array*\/",1192],["T_WHITESPACE","\n            ",1192],["T_VARIABLE","$keyval",1193],"=",["T_STRING","substr",1193],"(",["T_VARIABLE","$nvpstr",1193],",",["T_VARIABLE","$intial",1193],",",["T_VARIABLE","$keypos",1193],")",";",["T_WHITESPACE","\n            ",1193],["T_VARIABLE","$valval",1194],"=",["T_STRING","substr",1194],"(",["T_VARIABLE","$nvpstr",1194],",",["T_VARIABLE","$keypos",1194],"+",["T_LNUMBER","1",1194],",",["T_VARIABLE","$valuepos",1194],"-",["T_VARIABLE","$keypos",1194],"-",["T_LNUMBER","1",1194],")",";",["T_WHITESPACE","\n            ",1194],["T_COMMENT","\/\/decoding the respose\n",1195],["T_WHITESPACE","            ",1196],["T_VARIABLE","$nvpArray",1196],"[",["T_STRING","urldecode",1196],"(",["T_VARIABLE","$keyval",1196],")","]",["T_WHITESPACE"," ",1196],"=",["T_STRING","urldecode",1196],"(",["T_WHITESPACE"," ",1196],["T_VARIABLE","$valval",1196],")",";",["T_WHITESPACE","\n            ",1196],["T_VARIABLE","$nvpstr",1197],"=",["T_STRING","substr",1197],"(",["T_VARIABLE","$nvpstr",1197],",",["T_VARIABLE","$valuepos",1197],"+",["T_LNUMBER","1",1197],",",["T_STRING","strlen",1197],"(",["T_VARIABLE","$nvpstr",1197],")",")",";",["T_WHITESPACE","\n         ",1197],"}",["T_WHITESPACE","\n        ",1198],["T_RETURN","return",1199],["T_WHITESPACE"," ",1199],["T_VARIABLE","$nvpArray",1199],";",["T_WHITESPACE","\n    ",1199],"}",["T_WHITESPACE","\n\n    ",1200],["T_DOC_COMMENT","\/**\n     * NVP doesn't support passing discount total as a separate amount - add it as a line item\n     *\n     * @param array $request\n     * @param int $i\n     * @return true|null\n     *\/",1202],["T_WHITESPACE","\n    ",1208],["T_PROTECTED","protected",1209],["T_WHITESPACE"," ",1209],["T_FUNCTION","function",1209],["T_WHITESPACE"," ",1209],["T_STRING","_exportLineItems",1209],"(",["T_ARRAY","array",1209],["T_WHITESPACE"," ",1209],"&",["T_VARIABLE","$request",1209],",",["T_WHITESPACE"," ",1209],["T_VARIABLE","$i",1209],["T_WHITESPACE"," ",1209],"=",["T_WHITESPACE"," ",1209],["T_LNUMBER","0",1209],")",["T_WHITESPACE","\n    ",1209],"{",["T_WHITESPACE","\n        ",1210],["T_IF","if",1211],["T_WHITESPACE"," ",1211],"(","!",["T_VARIABLE","$this",1211],["T_OBJECT_OPERATOR","->",1211],["T_STRING","_cart",1211],")",["T_WHITESPACE"," ",1211],"{",["T_WHITESPACE","\n            ",1211],["T_RETURN","return",1212],";",["T_WHITESPACE","\n        ",1212],"}",["T_WHITESPACE","\n        ",1213],["T_VARIABLE","$this",1214],["T_OBJECT_OPERATOR","->",1214],["T_STRING","_cart",1214],["T_OBJECT_OPERATOR","->",1214],["T_STRING","isDiscountAsItem",1214],"(",["T_STRING","true",1214],")",";",["T_WHITESPACE","\n        ",1214],["T_RETURN","return",1215],["T_WHITESPACE"," ",1215],["T_STRING","parent",1215],["T_DOUBLE_COLON","::",1215],["T_STRING","_exportLineItems",1215],"(",["T_VARIABLE","$request",1215],",",["T_WHITESPACE"," ",1215],["T_VARIABLE","$i",1215],")",";",["T_WHITESPACE","\n    ",1215],"}",["T_WHITESPACE","\n\n    ",1216],["T_DOC_COMMENT","\/**\n     * Create billing and shipping addresses basing on response data\n     * @param array $data\n     *\/",1218],["T_WHITESPACE","\n    ",1221],["T_PROTECTED","protected",1222],["T_WHITESPACE"," ",1222],["T_FUNCTION","function",1222],["T_WHITESPACE"," ",1222],["T_STRING","_exportAddressses",1222],"(",["T_VARIABLE","$data",1222],")",["T_WHITESPACE","\n    ",1222],"{",["T_WHITESPACE","\n        ",1223],["T_VARIABLE","$address",1224],["T_WHITESPACE"," ",1224],"=",["T_WHITESPACE"," ",1224],["T_NEW","new",1224],["T_WHITESPACE"," ",1224],["T_STRING","Varien_Object",1224],"(",")",";",["T_WHITESPACE","\n        ",1224],["T_STRING","Varien_Object_Mapper",1225],["T_DOUBLE_COLON","::",1225],["T_STRING","accumulateByMap",1225],"(",["T_VARIABLE","$data",1225],",",["T_WHITESPACE"," ",1225],["T_VARIABLE","$address",1225],",",["T_WHITESPACE"," ",1225],["T_VARIABLE","$this",1225],["T_OBJECT_OPERATOR","->",1225],["T_STRING","_billingAddressMap",1225],")",";",["T_WHITESPACE","\n        ",1225],["T_VARIABLE","$address",1226],["T_OBJECT_OPERATOR","->",1226],["T_STRING","setExportedKeys",1226],"(",["T_STRING","array_values",1226],"(",["T_VARIABLE","$this",1226],["T_OBJECT_OPERATOR","->",1226],["T_STRING","_billingAddressMap",1226],")",")",";",["T_WHITESPACE","\n        ",1226],["T_VARIABLE","$this",1227],["T_OBJECT_OPERATOR","->",1227],["T_STRING","_applyStreetAndRegionWorkarounds",1227],"(",["T_VARIABLE","$address",1227],")",";",["T_WHITESPACE","\n        ",1227],["T_VARIABLE","$this",1228],["T_OBJECT_OPERATOR","->",1228],["T_STRING","setExportedBillingAddress",1228],"(",["T_VARIABLE","$address",1228],")",";",["T_WHITESPACE","\n        ",1228],["T_COMMENT","\/\/ assume there is shipping address if there is at least one field specific to shipping\n",1229],["T_WHITESPACE","        ",1230],["T_IF","if",1230],["T_WHITESPACE"," ",1230],"(",["T_ISSET","isset",1230],"(",["T_VARIABLE","$data",1230],"[",["T_CONSTANT_ENCAPSED_STRING","'SHIPTONAME'",1230],"]",")",")",["T_WHITESPACE"," ",1230],"{",["T_WHITESPACE","\n            ",1230],["T_VARIABLE","$shippingAddress",1231],["T_WHITESPACE"," ",1231],"=",["T_WHITESPACE"," ",1231],["T_CLONE","clone",1231],["T_WHITESPACE"," ",1231],["T_VARIABLE","$address",1231],";",["T_WHITESPACE","\n            ",1231],["T_STRING","Varien_Object_Mapper",1232],["T_DOUBLE_COLON","::",1232],["T_STRING","accumulateByMap",1232],"(",["T_VARIABLE","$data",1232],",",["T_WHITESPACE"," ",1232],["T_VARIABLE","$shippingAddress",1232],",",["T_WHITESPACE"," ",1232],["T_VARIABLE","$this",1232],["T_OBJECT_OPERATOR","->",1232],["T_STRING","_shippingAddressMap",1232],")",";",["T_WHITESPACE","\n            ",1232],["T_VARIABLE","$this",1233],["T_OBJECT_OPERATOR","->",1233],["T_STRING","_applyStreetAndRegionWorkarounds",1233],"(",["T_VARIABLE","$shippingAddress",1233],")",";",["T_WHITESPACE","\n            ",1233],["T_COMMENT","\/\/ PayPal doesn't provide detailed shipping name fields, so the name will be overwritten\n",1234],["T_WHITESPACE","            ",1235],["T_VARIABLE","$shippingAddress",1235],["T_OBJECT_OPERATOR","->",1235],["T_STRING","addData",1235],"(",["T_ARRAY","array",1235],"(",["T_WHITESPACE","\n                ",1235],["T_CONSTANT_ENCAPSED_STRING","'firstname'",1236],["T_WHITESPACE","  ",1236],["T_DOUBLE_ARROW","=>",1236],["T_WHITESPACE"," ",1236],["T_VARIABLE","$data",1236],"[",["T_CONSTANT_ENCAPSED_STRING","'SHIPTONAME'",1236],"]",",",["T_WHITESPACE","\n            ",1236],")",")",";",["T_WHITESPACE","\n            ",1237],["T_VARIABLE","$this",1238],["T_OBJECT_OPERATOR","->",1238],["T_STRING","setExportedShippingAddress",1238],"(",["T_VARIABLE","$shippingAddress",1238],")",";",["T_WHITESPACE","\n        ",1238],"}",["T_WHITESPACE","\n    ",1239],"}",["T_WHITESPACE","\n\n    ",1240],["T_DOC_COMMENT","\/**\n     * Adopt specified address object to be compatible with Magento\n     *\n     * @param Varien_Object $address\n     *\/",1242],["T_WHITESPACE","\n    ",1246],["T_PROTECTED","protected",1247],["T_WHITESPACE"," ",1247],["T_FUNCTION","function",1247],["T_WHITESPACE"," ",1247],["T_STRING","_applyStreetAndRegionWorkarounds",1247],"(",["T_STRING","Varien_Object",1247],["T_WHITESPACE"," ",1247],["T_VARIABLE","$address",1247],")",["T_WHITESPACE","\n    ",1247],"{",["T_WHITESPACE","\n        ",1248],["T_COMMENT","\/\/ merge street addresses into 1\n",1249],["T_WHITESPACE","        ",1250],["T_IF","if",1250],["T_WHITESPACE"," ",1250],"(",["T_VARIABLE","$address",1250],["T_OBJECT_OPERATOR","->",1250],["T_STRING","hasStreet2",1250],"(",")",")",["T_WHITESPACE"," ",1250],"{",["T_WHITESPACE","\n             ",1250],["T_VARIABLE","$address",1251],["T_OBJECT_OPERATOR","->",1251],["T_STRING","setStreet",1251],"(",["T_STRING","implode",1251],"(",["T_CONSTANT_ENCAPSED_STRING","\"\\n\"",1251],",",["T_WHITESPACE"," ",1251],["T_ARRAY","array",1251],"(",["T_VARIABLE","$address",1251],["T_OBJECT_OPERATOR","->",1251],["T_STRING","getStreet",1251],"(",")",",",["T_WHITESPACE"," ",1251],["T_VARIABLE","$address",1251],["T_OBJECT_OPERATOR","->",1251],["T_STRING","getStreet2",1251],"(",")",")",")",")",";",["T_WHITESPACE","\n             ",1251],["T_VARIABLE","$address",1252],["T_OBJECT_OPERATOR","->",1252],["T_STRING","unsStreet2",1252],"(",")",";",["T_WHITESPACE","\n        ",1252],"}",["T_WHITESPACE","\n        ",1253],["T_COMMENT","\/\/ attempt to fetch region_id from directory\n",1254],["T_WHITESPACE","        ",1255],["T_IF","if",1255],["T_WHITESPACE"," ",1255],"(",["T_VARIABLE","$address",1255],["T_OBJECT_OPERATOR","->",1255],["T_STRING","getCountryId",1255],"(",")",["T_WHITESPACE"," ",1255],["T_BOOLEAN_AND","&&",1255],["T_WHITESPACE"," ",1255],["T_VARIABLE","$address",1255],["T_OBJECT_OPERATOR","->",1255],["T_STRING","getRegion",1255],"(",")",")",["T_WHITESPACE"," ",1255],"{",["T_WHITESPACE","\n            ",1255],["T_VARIABLE","$regions",1256],["T_WHITESPACE"," ",1256],"=",["T_WHITESPACE"," ",1256],["T_STRING","Mage",1256],["T_DOUBLE_COLON","::",1256],["T_STRING","getModel",1256],"(",["T_CONSTANT_ENCAPSED_STRING","'directory\/country'",1256],")",["T_OBJECT_OPERATOR","->",1256],["T_STRING","loadByCode",1256],"(",["T_VARIABLE","$address",1256],["T_OBJECT_OPERATOR","->",1256],["T_STRING","getCountryId",1256],"(",")",")",["T_OBJECT_OPERATOR","->",1256],["T_STRING","getRegionCollection",1256],"(",")",["T_WHITESPACE","\n                ",1256],["T_OBJECT_OPERATOR","->",1257],["T_STRING","addRegionCodeOrNameFilter",1257],"(",["T_VARIABLE","$address",1257],["T_OBJECT_OPERATOR","->",1257],["T_STRING","getRegion",1257],"(",")",")",["T_WHITESPACE","\n                ",1257],["T_OBJECT_OPERATOR","->",1258],["T_STRING","setPageSize",1258],"(",["T_LNUMBER","1",1258],")",";",["T_WHITESPACE","\n            ",1258],["T_FOREACH","foreach",1259],["T_WHITESPACE"," ",1259],"(",["T_VARIABLE","$regions",1259],["T_WHITESPACE"," ",1259],["T_AS","as",1259],["T_WHITESPACE"," ",1259],["T_VARIABLE","$region",1259],")",["T_WHITESPACE"," ",1259],"{",["T_WHITESPACE","\n                ",1259],["T_VARIABLE","$address",1260],["T_OBJECT_OPERATOR","->",1260],["T_STRING","setRegionId",1260],"(",["T_VARIABLE","$region",1260],["T_OBJECT_OPERATOR","->",1260],["T_STRING","getId",1260],"(",")",")",";",["T_WHITESPACE","\n                ",1260],["T_VARIABLE","$address",1261],["T_OBJECT_OPERATOR","->",1261],["T_STRING","setExportedKeys",1261],"(",["T_STRING","array_merge",1261],"(",["T_VARIABLE","$address",1261],["T_OBJECT_OPERATOR","->",1261],["T_STRING","getExportedKeys",1261],"(",")",",",["T_WHITESPACE"," ",1261],["T_ARRAY","array",1261],"(",["T_CONSTANT_ENCAPSED_STRING","'region_id'",1261],")",")",")",";",["T_WHITESPACE","\n                ",1261],["T_BREAK","break",1262],";",["T_WHITESPACE","\n            ",1262],"}",["T_WHITESPACE","\n        ",1263],"}",["T_WHITESPACE","\n    ",1264],"}",["T_WHITESPACE","\n\n    ",1265],["T_DOC_COMMENT","\/**\n     * Adopt specified request array to be compatible with Paypal\n     * Puerto Rico should be as state of USA and not as a country\n     *\n     * @param array $request\n     *\/",1267],["T_WHITESPACE","\n    ",1272],["T_PROTECTED","protected",1273],["T_WHITESPACE"," ",1273],["T_FUNCTION","function",1273],["T_WHITESPACE"," ",1273],["T_STRING","_applyCountryWorkarounds",1273],"(","&",["T_VARIABLE","$request",1273],")",["T_WHITESPACE","\n    ",1273],"{",["T_WHITESPACE","\n        ",1274],["T_IF","if",1275],["T_WHITESPACE"," ",1275],"(",["T_ISSET","isset",1275],"(",["T_VARIABLE","$request",1275],"[",["T_CONSTANT_ENCAPSED_STRING","'SHIPTOCOUNTRYCODE'",1275],"]",")",["T_WHITESPACE"," ",1275],["T_BOOLEAN_AND","&&",1275],["T_WHITESPACE"," ",1275],["T_VARIABLE","$request",1275],"[",["T_CONSTANT_ENCAPSED_STRING","'SHIPTOCOUNTRYCODE'",1275],"]",["T_WHITESPACE"," ",1275],["T_IS_EQUAL","==",1275],["T_WHITESPACE"," ",1275],["T_CONSTANT_ENCAPSED_STRING","'PR'",1275],")",["T_WHITESPACE"," ",1275],"{",["T_WHITESPACE","\n            ",1275],["T_VARIABLE","$request",1276],"[",["T_CONSTANT_ENCAPSED_STRING","'SHIPTOCOUNTRYCODE'",1276],"]",["T_WHITESPACE"," ",1276],"=",["T_WHITESPACE"," ",1276],["T_CONSTANT_ENCAPSED_STRING","'US'",1276],";",["T_WHITESPACE","\n            ",1276],["T_VARIABLE","$request",1277],"[",["T_CONSTANT_ENCAPSED_STRING","'SHIPTOSTATE'",1277],"]",["T_WHITESPACE","       ",1277],"=",["T_WHITESPACE"," ",1277],["T_CONSTANT_ENCAPSED_STRING","'PR'",1277],";",["T_WHITESPACE","\n        ",1277],"}",["T_WHITESPACE","\n    ",1278],"}",["T_WHITESPACE","\n\n    ",1279],["T_DOC_COMMENT","\/**\n     * Prepare request data basing on provided address\n     *\n     * @deprecated after 1.4.2.0-beta1, use _importAddresses() instead\n     *\n     * @param Varien_Object $address\n     * @param array $to\n     * @return array\n     *\/",1281],["T_WHITESPACE","\n    ",1289],["T_PROTECTED","protected",1290],["T_WHITESPACE"," ",1290],["T_FUNCTION","function",1290],["T_WHITESPACE"," ",1290],["T_STRING","_importAddress",1290],"(",["T_STRING","Varien_Object",1290],["T_WHITESPACE"," ",1290],["T_VARIABLE","$address",1290],",",["T_WHITESPACE"," ",1290],["T_ARRAY","array",1290],["T_WHITESPACE"," ",1290],["T_VARIABLE","$to",1290],")",["T_WHITESPACE","\n    ",1290],"{",["T_WHITESPACE","\n        ",1291],["T_VARIABLE","$this",1292],["T_OBJECT_OPERATOR","->",1292],["T_STRING","setAddress",1292],"(",["T_VARIABLE","$address",1292],")",";",["T_WHITESPACE","\n        ",1292],["T_RETURN","return",1293],["T_WHITESPACE"," ",1293],["T_VARIABLE","$this",1293],["T_OBJECT_OPERATOR","->",1293],["T_STRING","_importAddresses",1293],"(",["T_VARIABLE","$to",1293],")",";",["T_WHITESPACE","\n    ",1293],"}",["T_WHITESPACE","\n\n    ",1294],["T_DOC_COMMENT","\/**\n     * Prepare request data basing on provided addresses\n     *\n     * @param array $to\n     * @return array\n     *\/",1296],["T_WHITESPACE","\n    ",1301],["T_PROTECTED","protected",1302],["T_WHITESPACE"," ",1302],["T_FUNCTION","function",1302],["T_WHITESPACE"," ",1302],["T_STRING","_importAddresses",1302],"(",["T_ARRAY","array",1302],["T_WHITESPACE"," ",1302],["T_VARIABLE","$to",1302],")",["T_WHITESPACE","\n    ",1302],"{",["T_WHITESPACE","\n        ",1303],["T_VARIABLE","$billingAddress",1304],["T_WHITESPACE","  ",1304],"=",["T_WHITESPACE"," ",1304],"(",["T_VARIABLE","$this",1304],["T_OBJECT_OPERATOR","->",1304],["T_STRING","getBillingAddress",1304],"(",")",")",["T_WHITESPACE"," ",1304],"?",["T_WHITESPACE"," ",1304],["T_VARIABLE","$this",1304],["T_OBJECT_OPERATOR","->",1304],["T_STRING","getBillingAddress",1304],"(",")",["T_WHITESPACE"," ",1304],":",["T_WHITESPACE"," ",1304],["T_VARIABLE","$this",1304],["T_OBJECT_OPERATOR","->",1304],["T_STRING","getAddress",1304],"(",")",";",["T_WHITESPACE","\n        ",1304],["T_VARIABLE","$shippingAddress",1305],["T_WHITESPACE"," ",1305],"=",["T_WHITESPACE"," ",1305],["T_VARIABLE","$this",1305],["T_OBJECT_OPERATOR","->",1305],["T_STRING","getAddress",1305],"(",")",";",["T_WHITESPACE","\n\n        ",1305],["T_VARIABLE","$to",1307],["T_WHITESPACE"," ",1307],"=",["T_WHITESPACE"," ",1307],["T_STRING","Varien_Object_Mapper",1307],["T_DOUBLE_COLON","::",1307],["T_STRING","accumulateByMap",1307],"(",["T_WHITESPACE","\n            ",1307],["T_VARIABLE","$billingAddress",1308],",",["T_WHITESPACE","\n            ",1308],["T_VARIABLE","$to",1309],",",["T_WHITESPACE","\n            ",1309],["T_STRING","array_merge",1310],"(",["T_STRING","array_flip",1310],"(",["T_VARIABLE","$this",1310],["T_OBJECT_OPERATOR","->",1310],["T_STRING","_billingAddressMap",1310],")",",",["T_WHITESPACE"," ",1310],["T_VARIABLE","$this",1310],["T_OBJECT_OPERATOR","->",1310],["T_STRING","_billingAddressMapRequest",1310],")",["T_WHITESPACE","\n        ",1310],")",";",["T_WHITESPACE","\n        ",1311],["T_IF","if",1312],["T_WHITESPACE"," ",1312],"(",["T_VARIABLE","$regionCode",1312],["T_WHITESPACE"," ",1312],"=",["T_WHITESPACE"," ",1312],["T_VARIABLE","$this",1312],["T_OBJECT_OPERATOR","->",1312],["T_STRING","_lookupRegionCodeFromAddress",1312],"(",["T_VARIABLE","$billingAddress",1312],")",")",["T_WHITESPACE"," ",1312],"{",["T_WHITESPACE","\n            ",1312],["T_VARIABLE","$to",1313],"[",["T_CONSTANT_ENCAPSED_STRING","'STATE'",1313],"]",["T_WHITESPACE"," ",1313],"=",["T_WHITESPACE"," ",1313],["T_VARIABLE","$regionCode",1313],";",["T_WHITESPACE","\n        ",1313],"}",["T_WHITESPACE","\n        ",1314],["T_IF","if",1315],["T_WHITESPACE"," ",1315],"(","!",["T_VARIABLE","$this",1315],["T_OBJECT_OPERATOR","->",1315],["T_STRING","getSuppressShipping",1315],"(",")",")",["T_WHITESPACE"," ",1315],"{",["T_WHITESPACE","\n            ",1315],["T_VARIABLE","$to",1316],["T_WHITESPACE"," ",1316],"=",["T_WHITESPACE"," ",1316],["T_STRING","Varien_Object_Mapper",1316],["T_DOUBLE_COLON","::",1316],["T_STRING","accumulateByMap",1316],"(",["T_VARIABLE","$shippingAddress",1316],",",["T_WHITESPACE"," ",1316],["T_VARIABLE","$to",1316],",",["T_WHITESPACE"," ",1316],["T_STRING","array_flip",1316],"(",["T_VARIABLE","$this",1316],["T_OBJECT_OPERATOR","->",1316],["T_STRING","_shippingAddressMap",1316],")",")",";",["T_WHITESPACE","\n            ",1316],["T_IF","if",1317],["T_WHITESPACE"," ",1317],"(",["T_VARIABLE","$regionCode",1317],["T_WHITESPACE"," ",1317],"=",["T_WHITESPACE"," ",1317],["T_VARIABLE","$this",1317],["T_OBJECT_OPERATOR","->",1317],["T_STRING","_lookupRegionCodeFromAddress",1317],"(",["T_VARIABLE","$shippingAddress",1317],")",")",["T_WHITESPACE"," ",1317],"{",["T_WHITESPACE","\n                ",1317],["T_VARIABLE","$to",1318],"[",["T_CONSTANT_ENCAPSED_STRING","'SHIPTOSTATE'",1318],"]",["T_WHITESPACE"," ",1318],"=",["T_WHITESPACE"," ",1318],["T_VARIABLE","$regionCode",1318],";",["T_WHITESPACE","\n            ",1318],"}",["T_WHITESPACE","\n            ",1319],["T_VARIABLE","$this",1320],["T_OBJECT_OPERATOR","->",1320],["T_STRING","_importStreetFromAddress",1320],"(",["T_VARIABLE","$shippingAddress",1320],",",["T_WHITESPACE"," ",1320],["T_VARIABLE","$to",1320],",",["T_WHITESPACE"," ",1320],["T_CONSTANT_ENCAPSED_STRING","'SHIPTOSTREET'",1320],",",["T_WHITESPACE"," ",1320],["T_CONSTANT_ENCAPSED_STRING","'SHIPTOSTREET2'",1320],")",";",["T_WHITESPACE","\n            ",1320],["T_VARIABLE","$this",1321],["T_OBJECT_OPERATOR","->",1321],["T_STRING","_importStreetFromAddress",1321],"(",["T_VARIABLE","$billingAddress",1321],",",["T_WHITESPACE"," ",1321],["T_VARIABLE","$to",1321],",",["T_WHITESPACE"," ",1321],["T_CONSTANT_ENCAPSED_STRING","'STREET'",1321],",",["T_WHITESPACE"," ",1321],["T_CONSTANT_ENCAPSED_STRING","'STREET2'",1321],")",";",["T_WHITESPACE","\n            ",1321],["T_VARIABLE","$to",1322],"[",["T_CONSTANT_ENCAPSED_STRING","'SHIPTONAME'",1322],"]",["T_WHITESPACE"," ",1322],"=",["T_WHITESPACE"," ",1322],["T_VARIABLE","$shippingAddress",1322],["T_OBJECT_OPERATOR","->",1322],["T_STRING","getName",1322],"(",")",";",["T_WHITESPACE","\n        ",1322],"}",["T_WHITESPACE","\n        ",1323],["T_VARIABLE","$this",1324],["T_OBJECT_OPERATOR","->",1324],["T_STRING","_applyCountryWorkarounds",1324],"(",["T_VARIABLE","$to",1324],")",";",["T_WHITESPACE","\n        ",1324],["T_RETURN","return",1325],["T_WHITESPACE"," ",1325],["T_VARIABLE","$to",1325],";",["T_WHITESPACE","\n    ",1325],"}",["T_WHITESPACE","\n\n    ",1326],["T_DOC_COMMENT","\/**\n     * Filter for credit card type\n     *\n     * @param string $value\n     * @return string\n     *\/",1328],["T_WHITESPACE","\n    ",1333],["T_PROTECTED","protected",1334],["T_WHITESPACE"," ",1334],["T_FUNCTION","function",1334],["T_WHITESPACE"," ",1334],["T_STRING","_filterCcType",1334],"(",["T_VARIABLE","$value",1334],")",["T_WHITESPACE","\n    ",1334],"{",["T_WHITESPACE","\n        ",1335],["T_IF","if",1336],["T_WHITESPACE"," ",1336],"(",["T_ISSET","isset",1336],"(",["T_VARIABLE","$this",1336],["T_OBJECT_OPERATOR","->",1336],["T_STRING","_supportedCcTypes",1336],"[",["T_VARIABLE","$value",1336],"]",")",")",["T_WHITESPACE"," ",1336],"{",["T_WHITESPACE","\n            ",1336],["T_RETURN","return",1337],["T_WHITESPACE"," ",1337],["T_VARIABLE","$this",1337],["T_OBJECT_OPERATOR","->",1337],["T_STRING","_supportedCcTypes",1337],"[",["T_VARIABLE","$value",1337],"]",";",["T_WHITESPACE","\n        ",1337],"}",["T_WHITESPACE","\n        ",1338],["T_RETURN","return",1339],["T_WHITESPACE"," ",1339],["T_CONSTANT_ENCAPSED_STRING","''",1339],";",["T_WHITESPACE","\n    ",1339],"}",["T_WHITESPACE","\n\n    ",1340],["T_DOC_COMMENT","\/**\n     * Filter for true\/false values (converts to boolean)\n     *\n     * @param mixed $value\n     * @return mixed\n     *\/",1342],["T_WHITESPACE","\n    ",1347],["T_PROTECTED","protected",1348],["T_WHITESPACE"," ",1348],["T_FUNCTION","function",1348],["T_WHITESPACE"," ",1348],["T_STRING","_filterToBool",1348],"(",["T_VARIABLE","$value",1348],")",["T_WHITESPACE","\n    ",1348],"{",["T_WHITESPACE","\n        ",1349],["T_IF","if",1350],["T_WHITESPACE"," ",1350],"(",["T_CONSTANT_ENCAPSED_STRING","'false'",1350],["T_WHITESPACE"," ",1350],["T_IS_IDENTICAL","===",1350],["T_WHITESPACE"," ",1350],["T_VARIABLE","$value",1350],["T_WHITESPACE"," ",1350],["T_BOOLEAN_OR","||",1350],["T_WHITESPACE"," ",1350],["T_CONSTANT_ENCAPSED_STRING","'0'",1350],["T_WHITESPACE"," ",1350],["T_IS_IDENTICAL","===",1350],["T_WHITESPACE"," ",1350],["T_VARIABLE","$value",1350],")",["T_WHITESPACE"," ",1350],"{",["T_WHITESPACE","\n            ",1350],["T_RETURN","return",1351],["T_WHITESPACE"," ",1351],["T_STRING","false",1351],";",["T_WHITESPACE","\n        ",1351],"}",["T_WHITESPACE"," ",1352],["T_ELSEIF","elseif",1352],["T_WHITESPACE"," ",1352],"(",["T_CONSTANT_ENCAPSED_STRING","'true'",1352],["T_WHITESPACE"," ",1352],["T_IS_IDENTICAL","===",1352],["T_WHITESPACE"," ",1352],["T_VARIABLE","$value",1352],["T_WHITESPACE"," ",1352],["T_BOOLEAN_OR","||",1352],["T_WHITESPACE"," ",1352],["T_CONSTANT_ENCAPSED_STRING","'1'",1352],["T_WHITESPACE"," ",1352],["T_IS_IDENTICAL","===",1352],["T_WHITESPACE"," ",1352],["T_VARIABLE","$value",1352],")",["T_WHITESPACE"," ",1352],"{",["T_WHITESPACE","\n            ",1352],["T_RETURN","return",1353],["T_WHITESPACE"," ",1353],["T_STRING","true",1353],";",["T_WHITESPACE","\n        ",1353],"}",["T_WHITESPACE","\n        ",1354],["T_RETURN","return",1355],["T_WHITESPACE"," ",1355],["T_VARIABLE","$value",1355],";",["T_WHITESPACE","\n    ",1355],"}",["T_WHITESPACE","\n\n    ",1356],["T_DOC_COMMENT","\/**\n     * Filter for 'AUTOBILLAMT'\n     *\n     * @param string $value\n     * @return string\n     *\/",1358],["T_WHITESPACE","\n    ",1363],["T_PROTECTED","protected",1364],["T_WHITESPACE"," ",1364],["T_FUNCTION","function",1364],["T_WHITESPACE"," ",1364],["T_STRING","_filterBillFailedLater",1364],"(",["T_VARIABLE","$value",1364],")",["T_WHITESPACE","\n    ",1364],"{",["T_WHITESPACE","\n        ",1365],["T_RETURN","return",1366],["T_WHITESPACE"," ",1366],["T_VARIABLE","$value",1366],["T_WHITESPACE"," ",1366],"?",["T_WHITESPACE"," ",1366],["T_CONSTANT_ENCAPSED_STRING","'AddToNextBilling'",1366],["T_WHITESPACE"," ",1366],":",["T_WHITESPACE"," ",1366],["T_CONSTANT_ENCAPSED_STRING","'NoAutoBill'",1366],";",["T_WHITESPACE","\n    ",1366],"}",["T_WHITESPACE","\n\n    ",1367],["T_DOC_COMMENT","\/**\n     * Filter for 'BILLINGPERIOD' and 'TRIALBILLINGPERIOD'\n     *\n     * @param string $value\n     * @return string\n     *\/",1369],["T_WHITESPACE","\n    ",1374],["T_PROTECTED","protected",1375],["T_WHITESPACE"," ",1375],["T_FUNCTION","function",1375],["T_WHITESPACE"," ",1375],["T_STRING","_filterPeriodUnit",1375],"(",["T_VARIABLE","$value",1375],")",["T_WHITESPACE","\n    ",1375],"{",["T_WHITESPACE","\n        ",1376],["T_SWITCH","switch",1377],["T_WHITESPACE"," ",1377],"(",["T_VARIABLE","$value",1377],")",["T_WHITESPACE"," ",1377],"{",["T_WHITESPACE","\n            ",1377],["T_CASE","case",1378],["T_WHITESPACE"," ",1378],["T_CONSTANT_ENCAPSED_STRING","'day'",1378],":",["T_WHITESPACE","        ",1378],["T_RETURN","return",1378],["T_WHITESPACE"," ",1378],["T_CONSTANT_ENCAPSED_STRING","'Day'",1378],";",["T_WHITESPACE","\n            ",1378],["T_CASE","case",1379],["T_WHITESPACE"," ",1379],["T_CONSTANT_ENCAPSED_STRING","'week'",1379],":",["T_WHITESPACE","       ",1379],["T_RETURN","return",1379],["T_WHITESPACE"," ",1379],["T_CONSTANT_ENCAPSED_STRING","'Week'",1379],";",["T_WHITESPACE","\n            ",1379],["T_CASE","case",1380],["T_WHITESPACE"," ",1380],["T_CONSTANT_ENCAPSED_STRING","'semi_month'",1380],":",["T_WHITESPACE"," ",1380],["T_RETURN","return",1380],["T_WHITESPACE"," ",1380],["T_CONSTANT_ENCAPSED_STRING","'SemiMonth'",1380],";",["T_WHITESPACE","\n            ",1380],["T_CASE","case",1381],["T_WHITESPACE"," ",1381],["T_CONSTANT_ENCAPSED_STRING","'month'",1381],":",["T_WHITESPACE","      ",1381],["T_RETURN","return",1381],["T_WHITESPACE"," ",1381],["T_CONSTANT_ENCAPSED_STRING","'Month'",1381],";",["T_WHITESPACE","\n            ",1381],["T_CASE","case",1382],["T_WHITESPACE"," ",1382],["T_CONSTANT_ENCAPSED_STRING","'year'",1382],":",["T_WHITESPACE","       ",1382],["T_RETURN","return",1382],["T_WHITESPACE"," ",1382],["T_CONSTANT_ENCAPSED_STRING","'Year'",1382],";",["T_WHITESPACE","\n        ",1382],"}",["T_WHITESPACE","\n    ",1383],"}",["T_WHITESPACE","\n\n    ",1384],["T_DOC_COMMENT","\/**\n     * Filter for 'FAILEDINITAMTACTION'\n     *\n     * @param string $value\n     * @return string\n     *\/",1386],["T_WHITESPACE","\n    ",1391],["T_PROTECTED","protected",1392],["T_WHITESPACE"," ",1392],["T_FUNCTION","function",1392],["T_WHITESPACE"," ",1392],["T_STRING","_filterInitialAmountMayFail",1392],"(",["T_VARIABLE","$value",1392],")",["T_WHITESPACE","\n    ",1392],"{",["T_WHITESPACE","\n        ",1393],["T_RETURN","return",1394],["T_WHITESPACE"," ",1394],["T_VARIABLE","$value",1394],["T_WHITESPACE"," ",1394],"?",["T_WHITESPACE"," ",1394],["T_CONSTANT_ENCAPSED_STRING","'ContinueOnFailure'",1394],["T_WHITESPACE"," ",1394],":",["T_WHITESPACE"," ",1394],["T_CONSTANT_ENCAPSED_STRING","'CancelOnFailure'",1394],";",["T_WHITESPACE","\n    ",1394],"}",["T_WHITESPACE","\n\n    ",1395],["T_DOC_COMMENT","\/**\n     * Filter for billing agreement status\n     *\n     * @param string $value\n     * @return string\n     *\/",1397],["T_WHITESPACE","\n    ",1402],["T_PROTECTED","protected",1403],["T_WHITESPACE"," ",1403],["T_FUNCTION","function",1403],["T_WHITESPACE"," ",1403],["T_STRING","_filterBillingAgreementStatus",1403],"(",["T_VARIABLE","$value",1403],")",["T_WHITESPACE","\n    ",1403],"{",["T_WHITESPACE","\n        ",1404],["T_SWITCH","switch",1405],["T_WHITESPACE"," ",1405],"(",["T_VARIABLE","$value",1405],")",["T_WHITESPACE"," ",1405],"{",["T_WHITESPACE","\n            ",1405],["T_CASE","case",1406],["T_WHITESPACE"," ",1406],["T_CONSTANT_ENCAPSED_STRING","'canceled'",1406],":",["T_WHITESPACE","    ",1406],["T_RETURN","return",1406],["T_WHITESPACE"," ",1406],["T_CONSTANT_ENCAPSED_STRING","'Canceled'",1406],";",["T_WHITESPACE","\n            ",1406],["T_CASE","case",1407],["T_WHITESPACE"," ",1407],["T_CONSTANT_ENCAPSED_STRING","'active'",1407],":",["T_WHITESPACE","      ",1407],["T_RETURN","return",1407],["T_WHITESPACE"," ",1407],["T_CONSTANT_ENCAPSED_STRING","'Active'",1407],";",["T_WHITESPACE","\n        ",1407],"}",["T_WHITESPACE","\n    ",1408],"}",["T_WHITESPACE","\n\n    ",1409],["T_DOC_COMMENT","\/**\n     * Convert payment status from NVP format to paypal\/info model format\n     *\n     * @param string $value\n     * @return string|null\n     *\/",1411],["T_WHITESPACE","\n    ",1416],["T_PROTECTED","protected",1417],["T_WHITESPACE"," ",1417],["T_FUNCTION","function",1417],["T_WHITESPACE"," ",1417],["T_STRING","_filterPaymentStatusFromNvpToInfo",1417],"(",["T_VARIABLE","$value",1417],")",["T_WHITESPACE","\n    ",1417],"{",["T_WHITESPACE","\n        ",1418],["T_SWITCH","switch",1419],["T_WHITESPACE"," ",1419],"(",["T_VARIABLE","$value",1419],")",["T_WHITESPACE"," ",1419],"{",["T_WHITESPACE","\n            ",1419],["T_CASE","case",1420],["T_WHITESPACE"," ",1420],["T_CONSTANT_ENCAPSED_STRING","'None'",1420],":",["T_WHITESPACE"," ",1420],["T_RETURN","return",1420],["T_WHITESPACE"," ",1420],["T_STRING","Mage_Paypal_Model_Info",1420],["T_DOUBLE_COLON","::",1420],["T_STRING","PAYMENTSTATUS_NONE",1420],";",["T_WHITESPACE","\n            ",1420],["T_CASE","case",1421],["T_WHITESPACE"," ",1421],["T_CONSTANT_ENCAPSED_STRING","'Completed'",1421],":",["T_WHITESPACE"," ",1421],["T_RETURN","return",1421],["T_WHITESPACE"," ",1421],["T_STRING","Mage_Paypal_Model_Info",1421],["T_DOUBLE_COLON","::",1421],["T_STRING","PAYMENTSTATUS_COMPLETED",1421],";",["T_WHITESPACE","\n            ",1421],["T_CASE","case",1422],["T_WHITESPACE"," ",1422],["T_CONSTANT_ENCAPSED_STRING","'Denied'",1422],":",["T_WHITESPACE"," ",1422],["T_RETURN","return",1422],["T_WHITESPACE"," ",1422],["T_STRING","Mage_Paypal_Model_Info",1422],["T_DOUBLE_COLON","::",1422],["T_STRING","PAYMENTSTATUS_DENIED",1422],";",["T_WHITESPACE","\n            ",1422],["T_CASE","case",1423],["T_WHITESPACE"," ",1423],["T_CONSTANT_ENCAPSED_STRING","'Expired'",1423],":",["T_WHITESPACE"," ",1423],["T_RETURN","return",1423],["T_WHITESPACE"," ",1423],["T_STRING","Mage_Paypal_Model_Info",1423],["T_DOUBLE_COLON","::",1423],["T_STRING","PAYMENTSTATUS_EXPIRED",1423],";",["T_WHITESPACE","\n            ",1423],["T_CASE","case",1424],["T_WHITESPACE"," ",1424],["T_CONSTANT_ENCAPSED_STRING","'Failed'",1424],":",["T_WHITESPACE"," ",1424],["T_RETURN","return",1424],["T_WHITESPACE"," ",1424],["T_STRING","Mage_Paypal_Model_Info",1424],["T_DOUBLE_COLON","::",1424],["T_STRING","PAYMENTSTATUS_FAILED",1424],";",["T_WHITESPACE","\n            ",1424],["T_CASE","case",1425],["T_WHITESPACE"," ",1425],["T_CONSTANT_ENCAPSED_STRING","'In-Progress'",1425],":",["T_WHITESPACE"," ",1425],["T_RETURN","return",1425],["T_WHITESPACE"," ",1425],["T_STRING","Mage_Paypal_Model_Info",1425],["T_DOUBLE_COLON","::",1425],["T_STRING","PAYMENTSTATUS_INPROGRESS",1425],";",["T_WHITESPACE","\n            ",1425],["T_CASE","case",1426],["T_WHITESPACE"," ",1426],["T_CONSTANT_ENCAPSED_STRING","'Pending'",1426],":",["T_WHITESPACE"," ",1426],["T_RETURN","return",1426],["T_WHITESPACE"," ",1426],["T_STRING","Mage_Paypal_Model_Info",1426],["T_DOUBLE_COLON","::",1426],["T_STRING","PAYMENTSTATUS_PENDING",1426],";",["T_WHITESPACE","\n            ",1426],["T_CASE","case",1427],["T_WHITESPACE"," ",1427],["T_CONSTANT_ENCAPSED_STRING","'Refunded'",1427],":",["T_WHITESPACE"," ",1427],["T_RETURN","return",1427],["T_WHITESPACE"," ",1427],["T_STRING","Mage_Paypal_Model_Info",1427],["T_DOUBLE_COLON","::",1427],["T_STRING","PAYMENTSTATUS_REFUNDED",1427],";",["T_WHITESPACE","\n            ",1427],["T_CASE","case",1428],["T_WHITESPACE"," ",1428],["T_CONSTANT_ENCAPSED_STRING","'Partially-Refunded'",1428],":",["T_WHITESPACE"," ",1428],["T_RETURN","return",1428],["T_WHITESPACE"," ",1428],["T_STRING","Mage_Paypal_Model_Info",1428],["T_DOUBLE_COLON","::",1428],["T_STRING","PAYMENTSTATUS_REFUNDEDPART",1428],";",["T_WHITESPACE","\n            ",1428],["T_CASE","case",1429],["T_WHITESPACE"," ",1429],["T_CONSTANT_ENCAPSED_STRING","'Reversed'",1429],":",["T_WHITESPACE"," ",1429],["T_RETURN","return",1429],["T_WHITESPACE"," ",1429],["T_STRING","Mage_Paypal_Model_Info",1429],["T_DOUBLE_COLON","::",1429],["T_STRING","PAYMENTSTATUS_REVERSED",1429],";",["T_WHITESPACE","\n            ",1429],["T_CASE","case",1430],["T_WHITESPACE"," ",1430],["T_CONSTANT_ENCAPSED_STRING","'Canceled-Reversal'",1430],":",["T_WHITESPACE"," ",1430],["T_RETURN","return",1430],["T_WHITESPACE"," ",1430],["T_STRING","Mage_Paypal_Model_Info",1430],["T_DOUBLE_COLON","::",1430],["T_STRING","PAYMENTSTATUS_UNREVERSED",1430],";",["T_WHITESPACE","\n            ",1430],["T_CASE","case",1431],["T_WHITESPACE"," ",1431],["T_CONSTANT_ENCAPSED_STRING","'Processed'",1431],":",["T_WHITESPACE"," ",1431],["T_RETURN","return",1431],["T_WHITESPACE"," ",1431],["T_STRING","Mage_Paypal_Model_Info",1431],["T_DOUBLE_COLON","::",1431],["T_STRING","PAYMENTSTATUS_PROCESSED",1431],";",["T_WHITESPACE","\n            ",1431],["T_CASE","case",1432],["T_WHITESPACE"," ",1432],["T_CONSTANT_ENCAPSED_STRING","'Voided'",1432],":",["T_WHITESPACE"," ",1432],["T_RETURN","return",1432],["T_WHITESPACE"," ",1432],["T_STRING","Mage_Paypal_Model_Info",1432],["T_DOUBLE_COLON","::",1432],["T_STRING","PAYMENTSTATUS_VOIDED",1432],";",["T_WHITESPACE","\n        ",1432],"}",["T_WHITESPACE","\n    ",1433],"}",["T_WHITESPACE","\n\n    ",1434],["T_DOC_COMMENT","\/**\n     * Convert payment review action to NVP-compatible value\n     *\n     * @param string $value\n     * @return string|null\n     *\/",1436],["T_WHITESPACE","\n    ",1441],["T_PROTECTED","protected",1442],["T_WHITESPACE"," ",1442],["T_FUNCTION","function",1442],["T_WHITESPACE"," ",1442],["T_STRING","_filterPaymentReviewAction",1442],"(",["T_VARIABLE","$value",1442],")",["T_WHITESPACE","\n    ",1442],"{",["T_WHITESPACE","\n        ",1443],["T_SWITCH","switch",1444],["T_WHITESPACE"," ",1444],"(",["T_VARIABLE","$value",1444],")",["T_WHITESPACE"," ",1444],"{",["T_WHITESPACE","\n            ",1444],["T_CASE","case",1445],["T_WHITESPACE"," ",1445],["T_STRING","Mage_Paypal_Model_Pro",1445],["T_DOUBLE_COLON","::",1445],["T_STRING","PAYMENT_REVIEW_ACCEPT",1445],":",["T_WHITESPACE","\n                ",1445],["T_RETURN","return",1446],["T_WHITESPACE"," ",1446],["T_CONSTANT_ENCAPSED_STRING","'Accept'",1446],";",["T_WHITESPACE","\n            ",1446],["T_CASE","case",1447],["T_WHITESPACE"," ",1447],["T_STRING","Mage_Paypal_Model_Pro",1447],["T_DOUBLE_COLON","::",1447],["T_STRING","PAYMENT_REVIEW_DENY",1447],":",["T_WHITESPACE","\n                ",1447],["T_RETURN","return",1448],["T_WHITESPACE"," ",1448],["T_CONSTANT_ENCAPSED_STRING","'Deny'",1448],";",["T_WHITESPACE","\n        ",1448],"}",["T_WHITESPACE","\n    ",1449],"}",["T_WHITESPACE","\n\n    ",1450],["T_DOC_COMMENT","\/**\n     * Convert RP management action to NVP format\n     *\n     * @param string $value\n     * @return string|null\n     *\/",1452],["T_WHITESPACE","\n    ",1457],["T_PROTECTED","protected",1458],["T_WHITESPACE"," ",1458],["T_FUNCTION","function",1458],["T_WHITESPACE"," ",1458],["T_STRING","_filterRecurringProfileActionToNvp",1458],"(",["T_VARIABLE","$value",1458],")",["T_WHITESPACE","\n    ",1458],"{",["T_WHITESPACE","\n        ",1459],["T_SWITCH","switch",1460],["T_WHITESPACE"," ",1460],"(",["T_VARIABLE","$value",1460],")",["T_WHITESPACE"," ",1460],"{",["T_WHITESPACE","\n            ",1460],["T_CASE","case",1461],["T_WHITESPACE"," ",1461],["T_CONSTANT_ENCAPSED_STRING","'cancel'",1461],":",["T_WHITESPACE"," ",1461],["T_RETURN","return",1461],["T_WHITESPACE"," ",1461],["T_CONSTANT_ENCAPSED_STRING","'Cancel'",1461],";",["T_WHITESPACE","\n            ",1461],["T_CASE","case",1462],["T_WHITESPACE"," ",1462],["T_CONSTANT_ENCAPSED_STRING","'suspend'",1462],":",["T_WHITESPACE","  ",1462],["T_RETURN","return",1462],["T_WHITESPACE"," ",1462],["T_CONSTANT_ENCAPSED_STRING","'Suspend'",1462],";",["T_WHITESPACE","\n            ",1462],["T_CASE","case",1463],["T_WHITESPACE"," ",1463],["T_CONSTANT_ENCAPSED_STRING","'activate'",1463],":",["T_WHITESPACE"," ",1463],["T_RETURN","return",1463],["T_WHITESPACE"," ",1463],["T_CONSTANT_ENCAPSED_STRING","'Reactivate'",1463],";",["T_WHITESPACE","\n        ",1463],"}",["T_WHITESPACE","\n    ",1464],"}",["T_WHITESPACE","\n\n    ",1465],["T_DOC_COMMENT","\/**\n     * Check the obtained RP status in NVP format and specify the profile state\n     *\n     * @param string $value\n     * @param Varien_Object $result\n     *\/",1467],["T_WHITESPACE","\n    ",1472],["T_PROTECTED","protected",1473],["T_WHITESPACE"," ",1473],["T_FUNCTION","function",1473],["T_WHITESPACE"," ",1473],["T_STRING","_analyzeRecurringProfileStatus",1473],"(",["T_VARIABLE","$value",1473],",",["T_WHITESPACE"," ",1473],["T_STRING","Varien_Object",1473],["T_WHITESPACE"," ",1473],["T_VARIABLE","$result",1473],")",["T_WHITESPACE","\n    ",1473],"{",["T_WHITESPACE","\n        ",1474],["T_SWITCH","switch",1475],["T_WHITESPACE"," ",1475],"(",["T_VARIABLE","$value",1475],")",["T_WHITESPACE"," ",1475],"{",["T_WHITESPACE","\n            ",1475],["T_CASE","case",1476],["T_WHITESPACE"," ",1476],["T_CONSTANT_ENCAPSED_STRING","'ActiveProfile'",1476],":",["T_WHITESPACE","\n            ",1476],["T_CASE","case",1477],["T_WHITESPACE"," ",1477],["T_CONSTANT_ENCAPSED_STRING","'Active'",1477],":",["T_WHITESPACE","\n                ",1477],["T_VARIABLE","$result",1478],["T_OBJECT_OPERATOR","->",1478],["T_STRING","setIsProfileActive",1478],"(",["T_STRING","true",1478],")",";",["T_WHITESPACE","\n                ",1478],["T_BREAK","break",1479],";",["T_WHITESPACE","\n            ",1479],["T_CASE","case",1480],["T_WHITESPACE"," ",1480],["T_CONSTANT_ENCAPSED_STRING","'PendingProfile'",1480],":",["T_WHITESPACE","\n                ",1480],["T_VARIABLE","$result",1481],["T_OBJECT_OPERATOR","->",1481],["T_STRING","setIsProfilePending",1481],"(",["T_STRING","true",1481],")",";",["T_WHITESPACE","\n                ",1481],["T_BREAK","break",1482],";",["T_WHITESPACE","\n            ",1482],["T_CASE","case",1483],["T_WHITESPACE"," ",1483],["T_CONSTANT_ENCAPSED_STRING","'CancelledProfile'",1483],":",["T_WHITESPACE","\n            ",1483],["T_CASE","case",1484],["T_WHITESPACE"," ",1484],["T_CONSTANT_ENCAPSED_STRING","'Cancelled'",1484],":",["T_WHITESPACE","\n                ",1484],["T_VARIABLE","$result",1485],["T_OBJECT_OPERATOR","->",1485],["T_STRING","setIsProfileCanceled",1485],"(",["T_STRING","true",1485],")",";",["T_WHITESPACE","\n                ",1485],["T_BREAK","break",1486],";",["T_WHITESPACE","\n            ",1486],["T_CASE","case",1487],["T_WHITESPACE"," ",1487],["T_CONSTANT_ENCAPSED_STRING","'SuspendedProfile'",1487],":",["T_WHITESPACE","\n            ",1487],["T_CASE","case",1488],["T_WHITESPACE"," ",1488],["T_CONSTANT_ENCAPSED_STRING","'Suspended'",1488],":",["T_WHITESPACE","\n                ",1488],["T_VARIABLE","$result",1489],["T_OBJECT_OPERATOR","->",1489],["T_STRING","setIsProfileSuspended",1489],"(",["T_STRING","true",1489],")",";",["T_WHITESPACE","\n                ",1489],["T_BREAK","break",1490],";",["T_WHITESPACE","\n            ",1490],["T_CASE","case",1491],["T_WHITESPACE"," ",1491],["T_CONSTANT_ENCAPSED_STRING","'ExpiredProfile'",1491],":",["T_WHITESPACE","\n            ",1491],["T_CASE","case",1492],["T_WHITESPACE"," ",1492],["T_CONSTANT_ENCAPSED_STRING","'Expired'",1492],":",["T_WHITESPACE"," ",1492],["T_COMMENT","\/\/ ??\n",1492],["T_WHITESPACE","                ",1493],["T_VARIABLE","$result",1493],["T_OBJECT_OPERATOR","->",1493],["T_STRING","setIsProfileExpired",1493],"(",["T_STRING","true",1493],")",";",["T_WHITESPACE","\n                ",1493],["T_BREAK","break",1494],";",["T_WHITESPACE","\n        ",1494],"}",["T_WHITESPACE","\n    ",1495],"}",["T_WHITESPACE","\n\n    ",1496],["T_DOC_COMMENT","\/**\n     * Return capture type\n     *\n     * @param Varien_Object $payment\n     * @return string\n     *\/",1498],["T_WHITESPACE","\n    ",1503],["T_PROTECTED","protected",1504],["T_WHITESPACE"," ",1504],["T_FUNCTION","function",1504],["T_WHITESPACE"," ",1504],["T_STRING","_getCaptureCompleteType",1504],"(",")",["T_WHITESPACE","\n    ",1504],"{",["T_WHITESPACE","\n        ",1505],["T_RETURN","return",1506],["T_WHITESPACE"," ",1506],"(",["T_VARIABLE","$this",1506],["T_OBJECT_OPERATOR","->",1506],["T_STRING","getIsCaptureComplete",1506],"(",")",")",["T_WHITESPACE","\n                ",1506],"?",["T_WHITESPACE"," ",1507],["T_VARIABLE","$this",1507],["T_OBJECT_OPERATOR","->",1507],["T_STRING","_captureTypeComplete",1507],["T_WHITESPACE","\n                ",1507],":",["T_WHITESPACE"," ",1508],["T_VARIABLE","$this",1508],["T_OBJECT_OPERATOR","->",1508],["T_STRING","_captureTypeNotcomplete",1508],";",["T_WHITESPACE","\n    ",1508],"}",["T_WHITESPACE","\n\n    ",1509],["T_DOC_COMMENT","\/**\n     * Return each call request without unused fields in case of Express Checkout Unilateral payments\n     *\n     * @param string $methodName Current method name\n     * @return array\n     *\/",1511],["T_WHITESPACE","\n    ",1516],["T_PROTECTED","protected",1517],["T_WHITESPACE"," ",1517],["T_FUNCTION","function",1517],["T_WHITESPACE"," ",1517],["T_STRING","_prepareEachCallRequest",1517],"(",["T_VARIABLE","$methodName",1517],")",["T_WHITESPACE","\n    ",1517],"{",["T_WHITESPACE","\n        ",1518],["T_VARIABLE","$expressCheckooutMetods",1519],["T_WHITESPACE"," ",1519],"=",["T_WHITESPACE"," ",1519],["T_ARRAY","array",1519],"(",["T_WHITESPACE","\n            ",1519],["T_STRING","self",1520],["T_DOUBLE_COLON","::",1520],["T_STRING","SET_EXPRESS_CHECKOUT",1520],",",["T_WHITESPACE"," ",1520],["T_STRING","self",1520],["T_DOUBLE_COLON","::",1520],["T_STRING","GET_EXPRESS_CHECKOUT_DETAILS",1520],",",["T_WHITESPACE"," ",1520],["T_STRING","self",1520],["T_DOUBLE_COLON","::",1520],["T_STRING","DO_EXPRESS_CHECKOUT_PAYMENT",1520],["T_WHITESPACE","\n        ",1520],")",";",["T_WHITESPACE","\n        ",1521],["T_IF","if",1522],["T_WHITESPACE"," ",1522],"(","!",["T_STRING","in_array",1522],"(",["T_VARIABLE","$methodName",1522],",",["T_WHITESPACE"," ",1522],["T_VARIABLE","$expressCheckooutMetods",1522],")",["T_WHITESPACE"," ",1522],["T_BOOLEAN_OR","||",1522],["T_WHITESPACE"," ",1522],"!",["T_VARIABLE","$this",1522],["T_OBJECT_OPERATOR","->",1522],["T_STRING","_config",1522],["T_OBJECT_OPERATOR","->",1522],["T_STRING","shouldUseUnilateralPayments",1522],"(",")",")",["T_WHITESPACE"," ",1522],"{",["T_WHITESPACE","\n            ",1522],["T_RETURN","return",1523],["T_WHITESPACE"," ",1523],["T_VARIABLE","$this",1523],["T_OBJECT_OPERATOR","->",1523],["T_STRING","_eachCallRequest",1523],";",["T_WHITESPACE","\n        ",1523],"}",["T_WHITESPACE","\n        ",1524],["T_RETURN","return",1525],["T_WHITESPACE"," ",1525],["T_STRING","array_diff",1525],"(",["T_VARIABLE","$this",1525],["T_OBJECT_OPERATOR","->",1525],["T_STRING","_eachCallRequest",1525],",",["T_WHITESPACE"," ",1525],["T_ARRAY","array",1525],"(",["T_CONSTANT_ENCAPSED_STRING","'USER'",1525],",",["T_WHITESPACE"," ",1525],["T_CONSTANT_ENCAPSED_STRING","'PWD'",1525],",",["T_WHITESPACE"," ",1525],["T_CONSTANT_ENCAPSED_STRING","'SIGNATURE'",1525],")",")",";",["T_WHITESPACE","\n    ",1525],"}",["T_WHITESPACE","\n\n    ",1526],["T_DOC_COMMENT","\/**\n     * Check the EC request against unilateral payments mode and remove the SUBJECT if needed\n     *\n     * @param &array $requestFields\n     *\/",1528],["T_WHITESPACE","\n    ",1532],["T_PROTECTED","protected",1533],["T_WHITESPACE"," ",1533],["T_FUNCTION","function",1533],["T_WHITESPACE"," ",1533],["T_STRING","_prepareExpressCheckoutCallRequest",1533],"(","&",["T_VARIABLE","$requestFields",1533],")",["T_WHITESPACE","\n    ",1533],"{",["T_WHITESPACE","\n        ",1534],["T_IF","if",1535],["T_WHITESPACE"," ",1535],"(","!",["T_VARIABLE","$this",1535],["T_OBJECT_OPERATOR","->",1535],["T_STRING","_config",1535],["T_OBJECT_OPERATOR","->",1535],["T_STRING","shouldUseUnilateralPayments",1535],"(",")",")",["T_WHITESPACE"," ",1535],"{",["T_WHITESPACE","\n            ",1535],["T_IF","if",1536],["T_WHITESPACE"," ",1536],"(",["T_VARIABLE","$key",1536],["T_WHITESPACE"," ",1536],"=",["T_WHITESPACE"," ",1536],["T_STRING","array_search",1536],"(",["T_CONSTANT_ENCAPSED_STRING","'SUBJECT'",1536],",",["T_WHITESPACE"," ",1536],["T_VARIABLE","$requestFields",1536],")",")",["T_WHITESPACE"," ",1536],"{",["T_WHITESPACE","\n                ",1536],["T_UNSET","unset",1537],"(",["T_VARIABLE","$requestFields",1537],"[",["T_VARIABLE","$key",1537],"]",")",";",["T_WHITESPACE","\n            ",1537],"}",["T_WHITESPACE","\n        ",1538],"}",["T_WHITESPACE","\n    ",1539],"}",["T_WHITESPACE","\n\n    ",1540],["T_DOC_COMMENT","\/**\n     * Additional response processing.\n     * Hack to cut off length from API type response params.\n     *\n     * @param  array $response\n     * @return array\n     *\/",1542],["T_WHITESPACE","\n    ",1548],["T_PROTECTED","protected",1549],["T_WHITESPACE"," ",1549],["T_FUNCTION","function",1549],["T_WHITESPACE"," ",1549],["T_STRING","_postProcessResponse",1549],"(",["T_VARIABLE","$response",1549],")",["T_WHITESPACE","\n    ",1549],"{",["T_WHITESPACE","\n        ",1550],["T_FOREACH","foreach",1551],["T_WHITESPACE"," ",1551],"(",["T_VARIABLE","$response",1551],["T_WHITESPACE"," ",1551],["T_AS","as",1551],["T_WHITESPACE"," ",1551],["T_VARIABLE","$key",1551],["T_WHITESPACE"," ",1551],["T_DOUBLE_ARROW","=>",1551],["T_WHITESPACE"," ",1551],["T_VARIABLE","$value",1551],")",["T_WHITESPACE"," ",1551],"{",["T_WHITESPACE","\n            ",1551],["T_VARIABLE","$pos",1552],["T_WHITESPACE"," ",1552],"=",["T_WHITESPACE"," ",1552],["T_STRING","strpos",1552],"(",["T_VARIABLE","$key",1552],",",["T_WHITESPACE"," ",1552],["T_CONSTANT_ENCAPSED_STRING","'['",1552],")",";",["T_WHITESPACE","\n\n            ",1552],["T_IF","if",1554],["T_WHITESPACE"," ",1554],"(",["T_VARIABLE","$pos",1554],["T_WHITESPACE"," ",1554],["T_IS_IDENTICAL","===",1554],["T_WHITESPACE"," ",1554],["T_STRING","false",1554],")",["T_WHITESPACE"," ",1554],"{",["T_WHITESPACE","\n                ",1554],["T_CONTINUE","continue",1555],";",["T_WHITESPACE","\n            ",1555],"}",["T_WHITESPACE","\n\n            ",1556],["T_UNSET","unset",1558],"(",["T_VARIABLE","$response",1558],"[",["T_VARIABLE","$key",1558],"]",")",";",["T_WHITESPACE","\n\n            ",1558],["T_IF","if",1560],["T_WHITESPACE"," ",1560],"(",["T_VARIABLE","$pos",1560],["T_WHITESPACE"," ",1560],["T_IS_NOT_IDENTICAL","!==",1560],["T_WHITESPACE"," ",1560],["T_LNUMBER","0",1560],")",["T_WHITESPACE"," ",1560],"{",["T_WHITESPACE","\n                ",1560],["T_VARIABLE","$modifiedKey",1561],["T_WHITESPACE"," ",1561],"=",["T_WHITESPACE"," ",1561],["T_STRING","substr",1561],"(",["T_VARIABLE","$key",1561],",",["T_WHITESPACE"," ",1561],["T_LNUMBER","0",1561],",",["T_WHITESPACE"," ",1561],["T_VARIABLE","$pos",1561],")",";",["T_WHITESPACE","\n                ",1561],["T_VARIABLE","$response",1562],"[",["T_VARIABLE","$modifiedKey",1562],"]",["T_WHITESPACE"," ",1562],"=",["T_WHITESPACE"," ",1562],["T_VARIABLE","$value",1562],";",["T_WHITESPACE","\n            ",1562],"}",["T_WHITESPACE","\n        ",1563],"}",["T_WHITESPACE","\n\n        ",1564],["T_RETURN","return",1566],["T_WHITESPACE"," ",1566],["T_VARIABLE","$response",1566],";",["T_WHITESPACE","\n    ",1566],"}",["T_WHITESPACE","\n",1567],"}",["T_WHITESPACE","\n",1568]]
[["T_OPEN_TAG","<?php\n",1],["T_DOC_COMMENT","\/**\n * Magento\n *\n * NOTICE OF LICENSE\n *\n * This source file is subject to the Open Software License (OSL 3.0)\n * that is bundled with this package in the file LICENSE.txt.\n * It is also available through the world-wide-web at this URL:\n * http:\/\/opensource.org\/licenses\/osl-3.0.php\n * If you did not receive a copy of the license and are unable to\n * obtain it through the world-wide-web, please send an email\n * to license@magento.com so we can send you a copy immediately.\n *\n * DISCLAIMER\n *\n * Do not edit or add to this file if you wish to upgrade Magento to newer\n * versions in the future. If you wish to customize Magento for your\n * needs please refer to http:\/\/www.magento.com for more information.\n *\n * @category    Mage\n * @package     Mage_Paypal\n * @copyright  Copyright (c) 2006-2016 X.commerce, Inc. and affiliates (http:\/\/www.magento.com)\n * @license    http:\/\/opensource.org\/licenses\/osl-3.0.php  Open Software License (OSL 3.0)\n *\/",2],["T_WHITESPACE","\n\n",25],["T_DOC_COMMENT","\/**\n *  Website Payments Pro Hosted Solution request model to get token.\n *\n * @category    Mage\n * @package     Mage_Paypal\n * @author      Magento Core Team <core@magentocommerce.com>\n *\/",27],["T_WHITESPACE","\n\n",33],["T_CLASS","class",35],["T_WHITESPACE"," ",35],["T_STRING","Mage_Paypal_Model_Hostedpro_Request",35],["T_WHITESPACE"," ",35],["T_EXTENDS","extends",35],["T_WHITESPACE"," ",35],["T_STRING","Varien_Object",35],["T_WHITESPACE","\n",35],"{",["T_WHITESPACE","\n    ",36],["T_DOC_COMMENT","\/**\n     * Request's order model\n     *\n     * @var Mage_Sales_Model_Order\n     *\/",37],["T_WHITESPACE","\n    ",41],["T_PROTECTED","protected",42],["T_WHITESPACE"," ",42],["T_VARIABLE","$_order",42],";",["T_WHITESPACE","\n\n    ",42],["T_DOC_COMMENT","\/**\n     * Request's Hosted Pro payment method model\n     *\n     * @var Mage_Paypal_Model_Hostedpro\n     *\/",44],["T_WHITESPACE","\n    ",48],["T_PROTECTED","protected",49],["T_WHITESPACE"," ",49],["T_VARIABLE","$_paymentMethod",49],";",["T_WHITESPACE","\n\n    ",49],["T_DOC_COMMENT","\/**\n     * Name formate for button variables\n     *\n     * @var string\n     *\/",51],["T_WHITESPACE","\n    ",55],["T_PROTECTED","protected",56],["T_WHITESPACE"," ",56],["T_VARIABLE","$_buttonVarFormat",56],["T_WHITESPACE"," ",56],"=",["T_WHITESPACE"," ",56],["T_CONSTANT_ENCAPSED_STRING","'L_BUTTONVAR%d'",56],";",["T_WHITESPACE","\n\n    ",56],["T_DOC_COMMENT","\/**\n     * Request Parameters which dont have to wrap as button vars\n     *\n     * @var array\n     *\/",58],["T_WHITESPACE","\n    ",62],["T_PROTECTED","protected",63],["T_WHITESPACE"," ",63],["T_VARIABLE","$_notButtonVars",63],["T_WHITESPACE"," ",63],"=",["T_WHITESPACE"," ",63],["T_ARRAY","array",63],["T_WHITESPACE"," ",63],"(",["T_WHITESPACE","\n        ",63],["T_CONSTANT_ENCAPSED_STRING","'METHOD'",64],",",["T_WHITESPACE"," ",64],["T_CONSTANT_ENCAPSED_STRING","'BUTTONCODE'",64],",",["T_WHITESPACE"," ",64],["T_CONSTANT_ENCAPSED_STRING","'BUTTONTYPE'",64],")",";",["T_WHITESPACE","\n\n    ",64],["T_DOC_COMMENT","\/**\n     * Build and return request array from object data\n     *\n     * @return array\n     *\/",66],["T_WHITESPACE","\n    ",70],["T_PUBLIC","public",71],["T_WHITESPACE"," ",71],["T_FUNCTION","function",71],["T_WHITESPACE"," ",71],["T_STRING","getRequestData",71],"(",")",["T_WHITESPACE","\n    ",71],"{",["T_WHITESPACE","\n        ",72],["T_VARIABLE","$requestData",73],["T_WHITESPACE"," ",73],"=",["T_WHITESPACE"," ",73],["T_ARRAY","array",73],"(",")",";",["T_WHITESPACE","\n        ",73],["T_IF","if",74],["T_WHITESPACE"," ",74],"(","!",["T_EMPTY","empty",74],"(",["T_VARIABLE","$this",74],["T_OBJECT_OPERATOR","->",74],["T_STRING","_data",74],")",")",["T_WHITESPACE"," ",74],"{",["T_WHITESPACE","\n            ",74],["T_COMMENT","\/\/ insert params to request as additional button variables,\n",75],["T_WHITESPACE","            ",76],["T_COMMENT","\/\/ except special params from _notButtonVars list\n",76],["T_WHITESPACE","            ",77],["T_VARIABLE","$i",77],["T_WHITESPACE"," ",77],"=",["T_WHITESPACE"," ",77],["T_LNUMBER","0",77],";",["T_WHITESPACE","\n            ",77],["T_FOREACH","foreach",78],["T_WHITESPACE"," ",78],"(",["T_VARIABLE","$this",78],["T_OBJECT_OPERATOR","->",78],["T_STRING","_data",78],["T_WHITESPACE"," ",78],["T_AS","as",78],["T_WHITESPACE"," ",78],["T_VARIABLE","$key",78],["T_WHITESPACE"," ",78],["T_DOUBLE_ARROW","=>",78],["T_WHITESPACE"," ",78],["T_VARIABLE","$value",78],")",["T_WHITESPACE"," ",78],"{",["T_WHITESPACE","\n                ",78],["T_IF","if",79],["T_WHITESPACE"," ",79],"(",["T_STRING","in_array",79],"(",["T_VARIABLE","$key",79],",",["T_WHITESPACE"," ",79],["T_VARIABLE","$this",79],["T_OBJECT_OPERATOR","->",79],["T_STRING","_notButtonVars",79],")",")",["T_WHITESPACE"," ",79],"{",["T_WHITESPACE","\n                    ",79],["T_VARIABLE","$requestData",80],"[",["T_VARIABLE","$key",80],"]",["T_WHITESPACE"," ",80],"=",["T_WHITESPACE"," ",80],["T_VARIABLE","$value",80],";",["T_WHITESPACE","\n                ",80],"}",["T_WHITESPACE"," ",81],["T_ELSE","else",81],["T_WHITESPACE"," ",81],"{",["T_WHITESPACE","\n                    ",81],["T_VARIABLE","$varKey",82],["T_WHITESPACE"," ",82],"=",["T_WHITESPACE"," ",82],["T_STRING","sprintf",82],"(",["T_VARIABLE","$this",82],["T_OBJECT_OPERATOR","->",82],["T_STRING","_buttonVarFormat",82],",",["T_WHITESPACE"," ",82],["T_VARIABLE","$i",82],")",";",["T_WHITESPACE","\n                    ",82],["T_VARIABLE","$requestData",83],"[",["T_VARIABLE","$varKey",83],"]",["T_WHITESPACE"," ",83],"=",["T_WHITESPACE"," ",83],["T_VARIABLE","$key",83],["T_WHITESPACE"," ",83],".",["T_WHITESPACE"," ",83],["T_CONSTANT_ENCAPSED_STRING","'='",83],["T_WHITESPACE"," ",83],".",["T_WHITESPACE"," ",83],["T_VARIABLE","$value",83],";",["T_WHITESPACE","\n                    ",83],["T_VARIABLE","$i",84],["T_INC","++",84],";",["T_WHITESPACE","\n                ",84],"}",["T_WHITESPACE","\n            ",85],"}",["T_WHITESPACE","\n        ",86],"}",["T_WHITESPACE","\n\n        ",87],["T_RETURN","return",89],["T_WHITESPACE"," ",89],["T_VARIABLE","$requestData",89],";",["T_WHITESPACE","\n    ",89],"}",["T_WHITESPACE","\n\n    ",90],["T_DOC_COMMENT","\/**\n     * Append payment data to request\n     *\n     * @param Mage_Paypal_Model_Hostedpro $paymentMethod\n     * @return Mage_Paypal_Model_Hostedpro_Request\n     *\/",92],["T_WHITESPACE","\n    ",97],["T_PUBLIC","public",98],["T_WHITESPACE"," ",98],["T_FUNCTION","function",98],["T_WHITESPACE"," ",98],["T_STRING","setPaymentMethod",98],"(",["T_VARIABLE","$paymentMethod",98],")",["T_WHITESPACE","\n    ",98],"{",["T_WHITESPACE","\n        ",99],["T_VARIABLE","$this",100],["T_OBJECT_OPERATOR","->",100],["T_STRING","_paymentMethod",100],["T_WHITESPACE"," ",100],"=",["T_WHITESPACE"," ",100],["T_VARIABLE","$paymentMethod",100],";",["T_WHITESPACE","\n        ",100],["T_VARIABLE","$requestData",101],["T_WHITESPACE"," ",101],"=",["T_WHITESPACE"," ",101],["T_VARIABLE","$this",101],["T_OBJECT_OPERATOR","->",101],["T_STRING","_getPaymentData",101],"(",["T_VARIABLE","$paymentMethod",101],")",";",["T_WHITESPACE","\n        ",101],["T_VARIABLE","$this",102],["T_OBJECT_OPERATOR","->",102],["T_STRING","addData",102],"(",["T_VARIABLE","$requestData",102],")",";",["T_WHITESPACE","\n\n        ",102],["T_RETURN","return",104],["T_WHITESPACE"," ",104],["T_VARIABLE","$this",104],";",["T_WHITESPACE","\n    ",104],"}",["T_WHITESPACE","\n\n    ",105],["T_DOC_COMMENT","\/**\n     * Append order data to request\n     *\n     * @param Mage_Sales_Model_Order $order\n     * @return Mage_Paypal_Model_Hostedpro_Request\n     *\/",107],["T_WHITESPACE","\n    ",112],["T_PUBLIC","public",113],["T_WHITESPACE"," ",113],["T_FUNCTION","function",113],["T_WHITESPACE"," ",113],["T_STRING","setOrder",113],"(",["T_VARIABLE","$order",113],")",["T_WHITESPACE","\n    ",113],"{",["T_WHITESPACE","\n        ",114],["T_VARIABLE","$this",115],["T_OBJECT_OPERATOR","->",115],["T_STRING","_order",115],["T_WHITESPACE"," ",115],"=",["T_WHITESPACE"," ",115],["T_VARIABLE","$order",115],";",["T_WHITESPACE","\n        ",115],["T_VARIABLE","$requestData",116],["T_WHITESPACE"," ",116],"=",["T_WHITESPACE"," ",116],["T_VARIABLE","$this",116],["T_OBJECT_OPERATOR","->",116],["T_STRING","_getOrderData",116],"(",["T_VARIABLE","$order",116],")",";",["T_WHITESPACE","\n        ",116],["T_VARIABLE","$this",117],["T_OBJECT_OPERATOR","->",117],["T_STRING","addData",117],"(",["T_VARIABLE","$requestData",117],")",";",["T_WHITESPACE","\n\n        ",117],["T_RETURN","return",119],["T_WHITESPACE"," ",119],["T_VARIABLE","$this",119],";",["T_WHITESPACE","\n    ",119],"}",["T_WHITESPACE","\n\n    ",120],["T_DOC_COMMENT","\/**\n     * Get peymet request data as array\n     *\n     * @param Mage_Paypal_Model_Hostedpro $paymentMethod\n     * @return array\n     *\/",122],["T_WHITESPACE","\n    ",127],["T_PROTECTED","protected",128],["T_WHITESPACE"," ",128],["T_FUNCTION","function",128],["T_WHITESPACE"," ",128],["T_STRING","_getPaymentData",128],"(",["T_STRING","Mage_Paypal_Model_Hostedpro",128],["T_WHITESPACE"," ",128],["T_VARIABLE","$paymentMethod",128],")",["T_WHITESPACE","\n    ",128],"{",["T_WHITESPACE","\n        ",129],["T_VARIABLE","$request",130],["T_WHITESPACE"," ",130],"=",["T_WHITESPACE"," ",130],["T_ARRAY","array",130],"(",["T_WHITESPACE","\n            ",130],["T_CONSTANT_ENCAPSED_STRING","'paymentaction'",131],["T_WHITESPACE"," ",131],["T_DOUBLE_ARROW","=>",131],["T_WHITESPACE"," ",131],["T_STRING","strtolower",131],"(",["T_VARIABLE","$paymentMethod",131],["T_OBJECT_OPERATOR","->",131],["T_STRING","getConfigData",131],"(",["T_CONSTANT_ENCAPSED_STRING","'payment_action'",131],")",")",",",["T_WHITESPACE","\n            ",131],["T_CONSTANT_ENCAPSED_STRING","'notify_url'",132],["T_WHITESPACE","    ",132],["T_DOUBLE_ARROW","=>",132],["T_WHITESPACE"," ",132],["T_VARIABLE","$paymentMethod",132],["T_OBJECT_OPERATOR","->",132],["T_STRING","getNotifyUrl",132],"(",")",",",["T_WHITESPACE","\n            ",132],["T_CONSTANT_ENCAPSED_STRING","'cancel_return'",133],["T_WHITESPACE"," ",133],["T_DOUBLE_ARROW","=>",133],["T_WHITESPACE"," ",133],["T_VARIABLE","$paymentMethod",133],["T_OBJECT_OPERATOR","->",133],["T_STRING","getCancelUrl",133],"(",")",",",["T_WHITESPACE","\n            ",133],["T_CONSTANT_ENCAPSED_STRING","'return'",134],["T_WHITESPACE","        ",134],["T_DOUBLE_ARROW","=>",134],["T_WHITESPACE"," ",134],["T_VARIABLE","$paymentMethod",134],["T_OBJECT_OPERATOR","->",134],["T_STRING","getReturnUrl",134],"(",")",",",["T_WHITESPACE","\n            ",134],["T_CONSTANT_ENCAPSED_STRING","'lc'",135],["T_WHITESPACE","            ",135],["T_DOUBLE_ARROW","=>",135],["T_WHITESPACE"," ",135],["T_STRING","substr",135],"(",["T_STRING","Mage",135],["T_DOUBLE_COLON","::",135],["T_STRING","app",135],"(",")",["T_OBJECT_OPERATOR","->",135],["T_STRING","getLocale",135],"(",")",["T_OBJECT_OPERATOR","->",135],["T_STRING","getLocaleCode",135],"(",")",",",["T_WHITESPACE"," ",135],"-",["T_LNUMBER","2",135],")",",",["T_WHITESPACE"," ",135],["T_COMMENT","\/\/gets language from locale code\n",135],["T_WHITESPACE","\n            ",136],["T_CONSTANT_ENCAPSED_STRING","'template'",137],["T_WHITESPACE","              ",137],["T_DOUBLE_ARROW","=>",137],["T_WHITESPACE"," ",137],["T_VARIABLE","$paymentMethod",137],["T_OBJECT_OPERATOR","->",137],["T_STRING","getTemplate",137],"(",")",",",["T_WHITESPACE","\n            ",137],["T_CONSTANT_ENCAPSED_STRING","'showBillingAddress'",138],["T_WHITESPACE","    ",138],["T_DOUBLE_ARROW","=>",138],["T_WHITESPACE"," ",138],["T_CONSTANT_ENCAPSED_STRING","'false'",138],",",["T_WHITESPACE","\n            ",138],["T_CONSTANT_ENCAPSED_STRING","'showShippingAddress'",139],["T_WHITESPACE","   ",139],["T_DOUBLE_ARROW","=>",139],["T_WHITESPACE"," ",139],["T_CONSTANT_ENCAPSED_STRING","'true'",139],",",["T_WHITESPACE","\n            ",139],["T_CONSTANT_ENCAPSED_STRING","'showBillingEmail'",140],["T_WHITESPACE","      ",140],["T_DOUBLE_ARROW","=>",140],["T_WHITESPACE"," ",140],["T_CONSTANT_ENCAPSED_STRING","'false'",140],",",["T_WHITESPACE","\n            ",140],["T_CONSTANT_ENCAPSED_STRING","'showBillingPhone'",141],["T_WHITESPACE","      ",141],["T_DOUBLE_ARROW","=>",141],["T_WHITESPACE"," ",141],["T_CONSTANT_ENCAPSED_STRING","'false'",141],",",["T_WHITESPACE","\n            ",141],["T_CONSTANT_ENCAPSED_STRING","'showCustomerName'",142],["T_WHITESPACE","      ",142],["T_DOUBLE_ARROW","=>",142],["T_WHITESPACE"," ",142],["T_CONSTANT_ENCAPSED_STRING","'false'",142],",",["T_WHITESPACE","\n            ",142],["T_CONSTANT_ENCAPSED_STRING","'showCardInfo'",143],["T_WHITESPACE","          ",143],["T_DOUBLE_ARROW","=>",143],["T_WHITESPACE"," ",143],["T_CONSTANT_ENCAPSED_STRING","'true'",143],",",["T_WHITESPACE","\n            ",143],["T_CONSTANT_ENCAPSED_STRING","'showHostedThankyouPage'",144],["T_DOUBLE_ARROW","=>",144],["T_WHITESPACE"," ",144],["T_CONSTANT_ENCAPSED_STRING","'false'",144],["T_WHITESPACE","\n        ",144],")",";",["T_WHITESPACE","\n\n        ",145],["T_RETURN","return",147],["T_WHITESPACE"," ",147],["T_VARIABLE","$request",147],";",["T_WHITESPACE","\n    ",147],"}",["T_WHITESPACE","\n\n    ",148],["T_DOC_COMMENT","\/**\n     * Get order request data as array\n     *\n     * @param Mage_Sales_Model_Order $order\n     * @return array\n     *\/",150],["T_WHITESPACE","\n    ",155],["T_PROTECTED","protected",156],["T_WHITESPACE"," ",156],["T_FUNCTION","function",156],["T_WHITESPACE"," ",156],["T_STRING","_getOrderData",156],"(",["T_STRING","Mage_Sales_Model_Order",156],["T_WHITESPACE"," ",156],["T_VARIABLE","$order",156],")",["T_WHITESPACE","\n    ",156],"{",["T_WHITESPACE","\n        ",157],["T_VARIABLE","$request",158],["T_WHITESPACE"," ",158],"=",["T_WHITESPACE"," ",158],["T_ARRAY","array",158],"(",["T_WHITESPACE","\n            ",158],["T_CONSTANT_ENCAPSED_STRING","'subtotal'",159],["T_WHITESPACE","      ",159],["T_DOUBLE_ARROW","=>",159],["T_WHITESPACE"," ",159],["T_VARIABLE","$this",159],["T_OBJECT_OPERATOR","->",159],["T_STRING","_formatPrice",159],"(",["T_VARIABLE","$order",159],["T_OBJECT_OPERATOR","->",159],["T_STRING","getBaseSubtotal",159],"(",")",")",",",["T_WHITESPACE","\n            ",159],["T_CONSTANT_ENCAPSED_STRING","'tax'",160],["T_WHITESPACE","           ",160],["T_DOUBLE_ARROW","=>",160],["T_WHITESPACE"," ",160],["T_VARIABLE","$this",160],["T_OBJECT_OPERATOR","->",160],["T_STRING","_formatPrice",160],"(",["T_VARIABLE","$order",160],["T_OBJECT_OPERATOR","->",160],["T_STRING","getBaseTaxAmount",160],"(",")",")",",",["T_WHITESPACE","\n            ",160],["T_CONSTANT_ENCAPSED_STRING","'shipping'",161],["T_WHITESPACE","      ",161],["T_DOUBLE_ARROW","=>",161],["T_WHITESPACE"," ",161],["T_VARIABLE","$this",161],["T_OBJECT_OPERATOR","->",161],["T_STRING","_formatPrice",161],"(",["T_VARIABLE","$order",161],["T_OBJECT_OPERATOR","->",161],["T_STRING","getBaseShippingAmount",161],"(",")",")",",",["T_WHITESPACE","\n            ",161],["T_CONSTANT_ENCAPSED_STRING","'invoice'",162],["T_WHITESPACE","       ",162],["T_DOUBLE_ARROW","=>",162],["T_WHITESPACE"," ",162],["T_VARIABLE","$order",162],["T_OBJECT_OPERATOR","->",162],["T_STRING","getIncrementId",162],"(",")",",",["T_WHITESPACE","\n            ",162],["T_CONSTANT_ENCAPSED_STRING","'address_override'",163],["T_WHITESPACE"," ",163],["T_DOUBLE_ARROW","=>",163],["T_WHITESPACE"," ",163],["T_CONSTANT_ENCAPSED_STRING","'true'",163],",",["T_WHITESPACE","\n            ",163],["T_CONSTANT_ENCAPSED_STRING","'currency_code'",164],["T_WHITESPACE","    ",164],["T_DOUBLE_ARROW","=>",164],["T_WHITESPACE"," ",164],["T_VARIABLE","$order",164],["T_OBJECT_OPERATOR","->",164],["T_STRING","getBaseCurrencyCode",164],"(",")",",",["T_WHITESPACE","\n            ",164],["T_CONSTANT_ENCAPSED_STRING","'buyer_email'",165],["T_WHITESPACE","      ",165],["T_DOUBLE_ARROW","=>",165],["T_WHITESPACE"," ",165],["T_VARIABLE","$order",165],["T_OBJECT_OPERATOR","->",165],["T_STRING","getCustomerEmail",165],"(",")",",",["T_WHITESPACE","\n            ",165],["T_CONSTANT_ENCAPSED_STRING","'discount'",166],["T_WHITESPACE","         ",166],["T_DOUBLE_ARROW","=>",166],["T_WHITESPACE"," ",166],["T_VARIABLE","$this",166],["T_OBJECT_OPERATOR","->",166],["T_STRING","_formatPrice",166],"(",["T_WHITESPACE","\n                ",166],["T_VARIABLE","$order",167],["T_OBJECT_OPERATOR","->",167],["T_STRING","getBaseGiftCardsAmount",167],"(",")",["T_WHITESPACE","\n                ",167],"+",["T_WHITESPACE"," ",168],["T_STRING","abs",168],"(",["T_VARIABLE","$order",168],["T_OBJECT_OPERATOR","->",168],["T_STRING","getBaseDiscountAmount",168],"(",")",")",["T_WHITESPACE","\n                ",168],"+",["T_WHITESPACE"," ",169],["T_VARIABLE","$order",169],["T_OBJECT_OPERATOR","->",169],["T_STRING","getBaseCustomerBalanceAmount",169],"(",")",["T_WHITESPACE","\n            ",169],")",",",["T_WHITESPACE","\n        ",170],")",";",["T_WHITESPACE","\n\n        ",171],["T_COMMENT","\/\/ append to request billing address data\n",173],["T_WHITESPACE","        ",174],["T_IF","if",174],["T_WHITESPACE"," ",174],"(",["T_VARIABLE","$billingAddress",174],["T_WHITESPACE"," ",174],"=",["T_WHITESPACE"," ",174],["T_VARIABLE","$order",174],["T_OBJECT_OPERATOR","->",174],["T_STRING","getBillingAddress",174],"(",")",")",["T_WHITESPACE"," ",174],"{",["T_WHITESPACE","\n            ",174],["T_VARIABLE","$request",175],["T_WHITESPACE"," ",175],"=",["T_WHITESPACE"," ",175],["T_STRING","array_merge",175],"(",["T_VARIABLE","$request",175],",",["T_WHITESPACE"," ",175],["T_VARIABLE","$this",175],["T_OBJECT_OPERATOR","->",175],["T_STRING","_getBillingAddress",175],"(",["T_VARIABLE","$billingAddress",175],")",")",";",["T_WHITESPACE","\n        ",175],"}",["T_WHITESPACE","\n\n        ",176],["T_COMMENT","\/\/ append to request shipping address data\n",178],["T_WHITESPACE","        ",179],["T_IF","if",179],["T_WHITESPACE"," ",179],"(",["T_VARIABLE","$shippingAddress",179],["T_WHITESPACE"," ",179],"=",["T_WHITESPACE"," ",179],["T_VARIABLE","$order",179],["T_OBJECT_OPERATOR","->",179],["T_STRING","getShippingAddress",179],"(",")",")",["T_WHITESPACE"," ",179],"{",["T_WHITESPACE","\n            ",179],["T_VARIABLE","$request",180],["T_WHITESPACE"," ",180],"=",["T_WHITESPACE"," ",180],["T_STRING","array_merge",180],"(",["T_VARIABLE","$request",180],",",["T_WHITESPACE"," ",180],["T_VARIABLE","$this",180],["T_OBJECT_OPERATOR","->",180],["T_STRING","_getShippingAddress",180],"(",["T_VARIABLE","$shippingAddress",180],")",")",";",["T_WHITESPACE","\n        ",180],"}",["T_WHITESPACE","\n\n        ",181],["T_RETURN","return",183],["T_WHITESPACE"," ",183],["T_VARIABLE","$request",183],";",["T_WHITESPACE","\n    ",183],"}",["T_WHITESPACE","\n\n    ",184],["T_DOC_COMMENT","\/**\n     * Get shipping address request data\n     *\n     * @param Varien_Object $address\n     * @return array\n     *\/",186],["T_WHITESPACE","\n    ",191],["T_PROTECTED","protected",192],["T_WHITESPACE"," ",192],["T_FUNCTION","function",192],["T_WHITESPACE"," ",192],["T_STRING","_getShippingAddress",192],"(",["T_STRING","Varien_Object",192],["T_WHITESPACE"," ",192],["T_VARIABLE","$address",192],")",["T_WHITESPACE","\n    ",192],"{",["T_WHITESPACE","\n        ",193],["T_VARIABLE","$request",194],["T_WHITESPACE"," ",194],"=",["T_WHITESPACE"," ",194],["T_ARRAY","array",194],"(",["T_WHITESPACE","\n            ",194],["T_CONSTANT_ENCAPSED_STRING","'first_name'",195],["T_DOUBLE_ARROW","=>",195],["T_WHITESPACE"," ",195],["T_VARIABLE","$address",195],["T_OBJECT_OPERATOR","->",195],["T_STRING","getFirstname",195],"(",")",",",["T_WHITESPACE","\n            ",195],["T_CONSTANT_ENCAPSED_STRING","'last_name'",196],["T_WHITESPACE"," ",196],["T_DOUBLE_ARROW","=>",196],["T_WHITESPACE"," ",196],["T_VARIABLE","$address",196],["T_OBJECT_OPERATOR","->",196],["T_STRING","getLastname",196],"(",")",",",["T_WHITESPACE","\n            ",196],["T_CONSTANT_ENCAPSED_STRING","'city'",197],["T_WHITESPACE","      ",197],["T_DOUBLE_ARROW","=>",197],["T_WHITESPACE"," ",197],["T_VARIABLE","$address",197],["T_OBJECT_OPERATOR","->",197],["T_STRING","getCity",197],"(",")",",",["T_WHITESPACE","\n            ",197],["T_CONSTANT_ENCAPSED_STRING","'state'",198],["T_WHITESPACE","     ",198],["T_DOUBLE_ARROW","=>",198],["T_WHITESPACE"," ",198],["T_VARIABLE","$address",198],["T_OBJECT_OPERATOR","->",198],["T_STRING","getRegionCode",198],"(",")",["T_WHITESPACE"," ",198],"?",["T_WHITESPACE"," ",198],["T_VARIABLE","$address",198],["T_OBJECT_OPERATOR","->",198],["T_STRING","getRegionCode",198],"(",")",["T_WHITESPACE"," ",198],":",["T_WHITESPACE"," ",198],["T_VARIABLE","$address",198],["T_OBJECT_OPERATOR","->",198],["T_STRING","getCity",198],"(",")",",",["T_WHITESPACE","\n            ",198],["T_CONSTANT_ENCAPSED_STRING","'zip'",199],["T_WHITESPACE","       ",199],["T_DOUBLE_ARROW","=>",199],["T_WHITESPACE"," ",199],["T_VARIABLE","$address",199],["T_OBJECT_OPERATOR","->",199],["T_STRING","getPostcode",199],"(",")",",",["T_WHITESPACE","\n            ",199],["T_CONSTANT_ENCAPSED_STRING","'country'",200],["T_WHITESPACE","   ",200],["T_DOUBLE_ARROW","=>",200],["T_WHITESPACE"," ",200],["T_VARIABLE","$address",200],["T_OBJECT_OPERATOR","->",200],["T_STRING","getCountry",200],"(",")",",",["T_WHITESPACE","\n        ",200],")",";",["T_WHITESPACE","\n\n        ",201],["T_COMMENT","\/\/ convert streets to tow lines format\n",203],["T_WHITESPACE","        ",204],["T_VARIABLE","$street",204],["T_WHITESPACE"," ",204],"=",["T_WHITESPACE"," ",204],["T_STRING","Mage",204],["T_DOUBLE_COLON","::",204],["T_STRING","helper",204],"(",["T_CONSTANT_ENCAPSED_STRING","'customer\/address'",204],")",["T_WHITESPACE","\n            ",204],["T_OBJECT_OPERATOR","->",205],["T_STRING","convertStreetLines",205],"(",["T_VARIABLE","$address",205],["T_OBJECT_OPERATOR","->",205],["T_STRING","getStreet",205],"(",")",",",["T_WHITESPACE"," ",205],["T_LNUMBER","2",205],")",";",["T_WHITESPACE","\n\n        ",205],["T_VARIABLE","$request",207],"[",["T_CONSTANT_ENCAPSED_STRING","'address1'",207],"]",["T_WHITESPACE"," ",207],"=",["T_WHITESPACE"," ",207],["T_ISSET","isset",207],"(",["T_VARIABLE","$street",207],"[",["T_LNUMBER","0",207],"]",")",["T_WHITESPACE"," ",207],"?",["T_WHITESPACE"," ",207],["T_VARIABLE","$street",207],"[",["T_LNUMBER","0",207],"]",":",["T_WHITESPACE"," ",207],["T_CONSTANT_ENCAPSED_STRING","''",207],";",["T_WHITESPACE","\n        ",207],["T_VARIABLE","$request",208],"[",["T_CONSTANT_ENCAPSED_STRING","'address2'",208],"]",["T_WHITESPACE"," ",208],"=",["T_WHITESPACE"," ",208],["T_ISSET","isset",208],"(",["T_VARIABLE","$street",208],"[",["T_LNUMBER","1",208],"]",")",["T_WHITESPACE"," ",208],"?",["T_WHITESPACE"," ",208],["T_VARIABLE","$street",208],"[",["T_LNUMBER","1",208],"]",":",["T_WHITESPACE"," ",208],["T_CONSTANT_ENCAPSED_STRING","''",208],";",["T_WHITESPACE","\n\n        ",208],["T_RETURN","return",210],["T_WHITESPACE"," ",210],["T_VARIABLE","$request",210],";",["T_WHITESPACE","\n    ",210],"}",["T_WHITESPACE","\n\n    ",211],["T_DOC_COMMENT","\/**\n     * Get billing address request data\n     *\n     * @param Varien_Object $address\n     * @return array\n     *\/",213],["T_WHITESPACE","\n    ",218],["T_PROTECTED","protected",219],["T_WHITESPACE"," ",219],["T_FUNCTION","function",219],["T_WHITESPACE"," ",219],["T_STRING","_getBillingAddress",219],"(",["T_STRING","Varien_Object",219],["T_WHITESPACE"," ",219],["T_VARIABLE","$address",219],")",["T_WHITESPACE","\n    ",219],"{",["T_WHITESPACE","\n        ",220],["T_VARIABLE","$request",221],["T_WHITESPACE"," ",221],"=",["T_WHITESPACE"," ",221],["T_ARRAY","array",221],"(",["T_WHITESPACE","\n            ",221],["T_CONSTANT_ENCAPSED_STRING","'billing_first_name'",222],["T_DOUBLE_ARROW","=>",222],["T_WHITESPACE"," ",222],["T_VARIABLE","$address",222],["T_OBJECT_OPERATOR","->",222],["T_STRING","getFirstname",222],"(",")",",",["T_WHITESPACE","\n            ",222],["T_CONSTANT_ENCAPSED_STRING","'billing_last_name'",223],["T_WHITESPACE"," ",223],["T_DOUBLE_ARROW","=>",223],["T_WHITESPACE"," ",223],["T_VARIABLE","$address",223],["T_OBJECT_OPERATOR","->",223],["T_STRING","getLastname",223],"(",")",",",["T_WHITESPACE","\n            ",223],["T_CONSTANT_ENCAPSED_STRING","'billing_city'",224],["T_WHITESPACE","      ",224],["T_DOUBLE_ARROW","=>",224],["T_WHITESPACE"," ",224],["T_VARIABLE","$address",224],["T_OBJECT_OPERATOR","->",224],["T_STRING","getCity",224],"(",")",",",["T_WHITESPACE","\n            ",224],["T_CONSTANT_ENCAPSED_STRING","'billing_state'",225],["T_WHITESPACE","     ",225],["T_DOUBLE_ARROW","=>",225],["T_WHITESPACE"," ",225],["T_VARIABLE","$address",225],["T_OBJECT_OPERATOR","->",225],["T_STRING","getRegionCode",225],"(",")",["T_WHITESPACE"," ",225],"?",["T_WHITESPACE"," ",225],["T_VARIABLE","$address",225],["T_OBJECT_OPERATOR","->",225],["T_STRING","getRegionCode",225],"(",")",["T_WHITESPACE"," ",225],":",["T_WHITESPACE"," ",225],["T_VARIABLE","$address",225],["T_OBJECT_OPERATOR","->",225],["T_STRING","getCity",225],"(",")",",",["T_WHITESPACE","\n            ",225],["T_CONSTANT_ENCAPSED_STRING","'billing_zip'",226],["T_WHITESPACE","       ",226],["T_DOUBLE_ARROW","=>",226],["T_WHITESPACE"," ",226],["T_VARIABLE","$address",226],["T_OBJECT_OPERATOR","->",226],["T_STRING","getPostcode",226],"(",")",",",["T_WHITESPACE","\n            ",226],["T_CONSTANT_ENCAPSED_STRING","'billing_country'",227],["T_WHITESPACE","   ",227],["T_DOUBLE_ARROW","=>",227],["T_WHITESPACE"," ",227],["T_VARIABLE","$address",227],["T_OBJECT_OPERATOR","->",227],["T_STRING","getCountry",227],"(",")",",",["T_WHITESPACE","\n        ",227],")",";",["T_WHITESPACE","\n\n        ",228],["T_COMMENT","\/\/ convert streets to tow lines format\n",230],["T_WHITESPACE","        ",231],["T_VARIABLE","$street",231],["T_WHITESPACE"," ",231],"=",["T_WHITESPACE"," ",231],["T_STRING","Mage",231],["T_DOUBLE_COLON","::",231],["T_STRING","helper",231],"(",["T_CONSTANT_ENCAPSED_STRING","'customer\/address'",231],")",["T_WHITESPACE","\n            ",231],["T_OBJECT_OPERATOR","->",232],["T_STRING","convertStreetLines",232],"(",["T_VARIABLE","$address",232],["T_OBJECT_OPERATOR","->",232],["T_STRING","getStreet",232],"(",")",",",["T_WHITESPACE"," ",232],["T_LNUMBER","2",232],")",";",["T_WHITESPACE","\n\n        ",232],["T_VARIABLE","$request",234],"[",["T_CONSTANT_ENCAPSED_STRING","'billing_address1'",234],"]",["T_WHITESPACE"," ",234],"=",["T_WHITESPACE"," ",234],["T_ISSET","isset",234],"(",["T_VARIABLE","$street",234],"[",["T_LNUMBER","0",234],"]",")",["T_WHITESPACE"," ",234],"?",["T_WHITESPACE"," ",234],["T_VARIABLE","$street",234],"[",["T_LNUMBER","0",234],"]",":",["T_WHITESPACE"," ",234],["T_CONSTANT_ENCAPSED_STRING","''",234],";",["T_WHITESPACE","\n        ",234],["T_VARIABLE","$request",235],"[",["T_CONSTANT_ENCAPSED_STRING","'billing_address2'",235],"]",["T_WHITESPACE"," ",235],"=",["T_WHITESPACE"," ",235],["T_ISSET","isset",235],"(",["T_VARIABLE","$street",235],"[",["T_LNUMBER","1",235],"]",")",["T_WHITESPACE"," ",235],"?",["T_WHITESPACE"," ",235],["T_VARIABLE","$street",235],"[",["T_LNUMBER","1",235],"]",":",["T_WHITESPACE"," ",235],["T_CONSTANT_ENCAPSED_STRING","''",235],";",["T_WHITESPACE","\n\n        ",235],["T_RETURN","return",237],["T_WHITESPACE"," ",237],["T_VARIABLE","$request",237],";",["T_WHITESPACE","\n    ",237],"}",["T_WHITESPACE","\n\n    ",238],["T_DOC_COMMENT","\/**\n     * Format price string\n     *\n     * @param mixed $string\n     * @return mixed\n     *\/",240],["T_WHITESPACE","\n    ",245],["T_PROTECTED","protected",246],["T_WHITESPACE"," ",246],["T_FUNCTION","function",246],["T_WHITESPACE"," ",246],["T_STRING","_formatPrice",246],"(",["T_VARIABLE","$string",246],")",["T_WHITESPACE","\n    ",246],"{",["T_WHITESPACE","\n        ",247],["T_RETURN","return",248],["T_WHITESPACE"," ",248],["T_STRING","sprintf",248],"(",["T_CONSTANT_ENCAPSED_STRING","'%.2F'",248],",",["T_WHITESPACE"," ",248],["T_VARIABLE","$string",248],")",";",["T_WHITESPACE","\n    ",248],"}",["T_WHITESPACE","\n",249],"}",["T_WHITESPACE","\n",250]]
[["T_OPEN_TAG","<?php\n",1],["T_DOC_COMMENT","\/**\n * Magento\n *\n * NOTICE OF LICENSE\n *\n * This source file is subject to the Open Software License (OSL 3.0)\n * that is bundled with this package in the file LICENSE.txt.\n * It is also available through the world-wide-web at this URL:\n * http:\/\/opensource.org\/licenses\/osl-3.0.php\n * If you did not receive a copy of the license and are unable to\n * obtain it through the world-wide-web, please send an email\n * to license@magento.com so we can send you a copy immediately.\n *\n * DISCLAIMER\n *\n * Do not edit or add to this file if you wish to upgrade Magento to newer\n * versions in the future. If you wish to customize Magento for your\n * needs please refer to http:\/\/www.magento.com for more information.\n *\n * @category    Mage\n * @package     Mage_Rss\n * @copyright  Copyright (c) 2006-2016 X.commerce, Inc. and affiliates (http:\/\/www.magento.com)\n * @license    http:\/\/opensource.org\/licenses\/osl-3.0.php  Open Software License (OSL 3.0)\n *\/",2],["T_WHITESPACE","\n\n",25],["T_DOC_COMMENT","\/**\n * Review form block\n *\n * @category   Mage\n * @package    Mage_Rss\n * @author      Magento Core Team <core@magentocommerce.com>\n *\/",27],["T_WHITESPACE","\n",33],["T_CLASS","class",34],["T_WHITESPACE"," ",34],["T_STRING","Mage_Rss_Block_Catalog_Salesrule",34],["T_WHITESPACE"," ",34],["T_EXTENDS","extends",34],["T_WHITESPACE"," ",34],["T_STRING","Mage_Rss_Block_Abstract",34],["T_WHITESPACE","\n",34],"{",["T_WHITESPACE","\n    ",35],["T_PROTECTED","protected",36],["T_WHITESPACE"," ",36],["T_FUNCTION","function",36],["T_WHITESPACE"," ",36],["T_STRING","_construct",36],"(",")",["T_WHITESPACE","\n    ",36],"{",["T_WHITESPACE","\n        ",37],["T_COMMENT","\/*\n        * setting cache to save the rss for 10 minutes\n        *\/",38],["T_WHITESPACE","\n        ",40],["T_VARIABLE","$this",41],["T_OBJECT_OPERATOR","->",41],["T_STRING","setCacheKey",41],"(",["T_CONSTANT_ENCAPSED_STRING","'rss_catalog_salesrule_'",41],".",["T_VARIABLE","$this",41],["T_OBJECT_OPERATOR","->",41],["T_STRING","getStoreId",41],"(",")",".",["T_CONSTANT_ENCAPSED_STRING","'_'",41],".",["T_VARIABLE","$this",41],["T_OBJECT_OPERATOR","->",41],["T_STRING","_getCustomerGroupId",41],"(",")",")",";",["T_WHITESPACE","\n        ",41],["T_VARIABLE","$this",42],["T_OBJECT_OPERATOR","->",42],["T_STRING","setCacheLifetime",42],"(",["T_LNUMBER","600",42],")",";",["T_WHITESPACE","\n    ",42],"}",["T_WHITESPACE","\n\n    ",43],["T_DOC_COMMENT","\/**\n     * Generate RSS XML with sales rules data\n     *\n     * @return string\n     *\/",45],["T_WHITESPACE","\n    ",49],["T_PROTECTED","protected",50],["T_WHITESPACE"," ",50],["T_FUNCTION","function",50],["T_WHITESPACE"," ",50],["T_STRING","_toHtml",50],"(",")",["T_WHITESPACE","\n    ",50],"{",["T_WHITESPACE","\n        ",51],["T_VARIABLE","$storeId",52],["T_WHITESPACE","       ",52],"=",["T_WHITESPACE"," ",52],["T_VARIABLE","$this",52],["T_OBJECT_OPERATOR","->",52],["T_STRING","_getStoreId",52],"(",")",";",["T_WHITESPACE","\n        ",52],["T_VARIABLE","$websiteId",53],["T_WHITESPACE","     ",53],"=",["T_WHITESPACE"," ",53],["T_STRING","Mage",53],["T_DOUBLE_COLON","::",53],["T_STRING","app",53],"(",")",["T_OBJECT_OPERATOR","->",53],["T_STRING","getStore",53],"(",["T_VARIABLE","$storeId",53],")",["T_OBJECT_OPERATOR","->",53],["T_STRING","getWebsiteId",53],"(",")",";",["T_WHITESPACE","\n        ",53],["T_VARIABLE","$customerGroup",54],["T_WHITESPACE"," ",54],"=",["T_WHITESPACE"," ",54],["T_VARIABLE","$this",54],["T_OBJECT_OPERATOR","->",54],["T_STRING","_getCustomerGroupId",54],"(",")",";",["T_WHITESPACE","\n        ",54],["T_VARIABLE","$now",55],["T_WHITESPACE","           ",55],"=",["T_WHITESPACE"," ",55],["T_STRING","date",55],"(",["T_CONSTANT_ENCAPSED_STRING","'Y-m-d'",55],")",";",["T_WHITESPACE","\n        ",55],["T_VARIABLE","$url",56],["T_WHITESPACE","           ",56],"=",["T_WHITESPACE"," ",56],["T_STRING","Mage",56],["T_DOUBLE_COLON","::",56],["T_STRING","getUrl",56],"(",["T_CONSTANT_ENCAPSED_STRING","''",56],")",";",["T_WHITESPACE","\n        ",56],["T_VARIABLE","$newUrl",57],["T_WHITESPACE","        ",57],"=",["T_WHITESPACE"," ",57],["T_STRING","Mage",57],["T_DOUBLE_COLON","::",57],["T_STRING","getUrl",57],"(",["T_CONSTANT_ENCAPSED_STRING","'rss\/catalog\/salesrule'",57],")",";",["T_WHITESPACE","\n        ",57],["T_VARIABLE","$lang",58],["T_WHITESPACE","          ",58],"=",["T_WHITESPACE"," ",58],["T_STRING","Mage",58],["T_DOUBLE_COLON","::",58],["T_STRING","getStoreConfig",58],"(",["T_CONSTANT_ENCAPSED_STRING","'general\/locale\/code'",58],")",";",["T_WHITESPACE","\n        ",58],["T_VARIABLE","$title",59],["T_WHITESPACE","       ",59],"=",["T_WHITESPACE"," ",59],["T_STRING","Mage",59],["T_DOUBLE_COLON","::",59],["T_STRING","helper",59],"(",["T_CONSTANT_ENCAPSED_STRING","'rss'",59],")",["T_OBJECT_OPERATOR","->",59],["T_STRING","__",59],"(",["T_CONSTANT_ENCAPSED_STRING","'%s - Discounts and Coupons'",59],",",["T_STRING","Mage",59],["T_DOUBLE_COLON","::",59],["T_STRING","app",59],"(",")",["T_OBJECT_OPERATOR","->",59],["T_STRING","getStore",59],"(",["T_VARIABLE","$storeId",59],")",["T_OBJECT_OPERATOR","->",59],["T_STRING","getName",59],"(",")",")",";",["T_WHITESPACE","\n\n        ",59],["T_DOC_COMMENT","\/** @var $rssObject Mage_Rss_Model_Rss *\/",61],["T_WHITESPACE","\n        ",61],["T_VARIABLE","$rssObject",62],["T_WHITESPACE"," ",62],"=",["T_WHITESPACE"," ",62],["T_STRING","Mage",62],["T_DOUBLE_COLON","::",62],["T_STRING","getModel",62],"(",["T_CONSTANT_ENCAPSED_STRING","'rss\/rss'",62],")",";",["T_WHITESPACE","\n        ",62],["T_DOC_COMMENT","\/** @var $collection Mage_SalesRule_Model_Resource_Rule_Collection *\/",63],["T_WHITESPACE","\n        ",63],["T_VARIABLE","$collection",64],["T_WHITESPACE"," ",64],"=",["T_WHITESPACE"," ",64],["T_STRING","Mage",64],["T_DOUBLE_COLON","::",64],["T_STRING","getModel",64],"(",["T_CONSTANT_ENCAPSED_STRING","'salesrule\/rule'",64],")",["T_OBJECT_OPERATOR","->",64],["T_STRING","getResourceCollection",64],"(",")",";",["T_WHITESPACE","\n\n        ",64],["T_VARIABLE","$data",66],["T_WHITESPACE"," ",66],"=",["T_WHITESPACE"," ",66],["T_ARRAY","array",66],"(",["T_WHITESPACE","\n            ",66],["T_CONSTANT_ENCAPSED_STRING","'title'",67],["T_WHITESPACE","       ",67],["T_DOUBLE_ARROW","=>",67],["T_WHITESPACE"," ",67],["T_VARIABLE","$title",67],",",["T_WHITESPACE","\n            ",67],["T_CONSTANT_ENCAPSED_STRING","'description'",68],["T_WHITESPACE"," ",68],["T_DOUBLE_ARROW","=>",68],["T_WHITESPACE"," ",68],["T_VARIABLE","$title",68],",",["T_WHITESPACE","\n            ",68],["T_CONSTANT_ENCAPSED_STRING","'link'",69],["T_WHITESPACE","        ",69],["T_DOUBLE_ARROW","=>",69],["T_WHITESPACE"," ",69],["T_VARIABLE","$newUrl",69],",",["T_WHITESPACE","\n            ",69],["T_CONSTANT_ENCAPSED_STRING","'charset'",70],["T_WHITESPACE","     ",70],["T_DOUBLE_ARROW","=>",70],["T_WHITESPACE"," ",70],["T_CONSTANT_ENCAPSED_STRING","'UTF-8'",70],",",["T_WHITESPACE","\n            ",70],["T_CONSTANT_ENCAPSED_STRING","'language'",71],["T_WHITESPACE","    ",71],["T_DOUBLE_ARROW","=>",71],["T_WHITESPACE"," ",71],["T_VARIABLE","$lang",71],["T_WHITESPACE","\n        ",71],")",";",["T_WHITESPACE","\n        ",72],["T_VARIABLE","$rssObject",73],["T_OBJECT_OPERATOR","->",73],["T_STRING","_addHeader",73],"(",["T_VARIABLE","$data",73],")",";",["T_WHITESPACE","\n\n        ",73],["T_VARIABLE","$collection",75],["T_OBJECT_OPERATOR","->",75],["T_STRING","addWebsiteGroupDateFilter",75],"(",["T_VARIABLE","$websiteId",75],",",["T_WHITESPACE"," ",75],["T_VARIABLE","$customerGroup",75],",",["T_WHITESPACE"," ",75],["T_VARIABLE","$now",75],")",["T_WHITESPACE","\n            ",75],["T_OBJECT_OPERATOR","->",76],["T_STRING","addFieldToFilter",76],"(",["T_CONSTANT_ENCAPSED_STRING","'is_rss'",76],",",["T_WHITESPACE"," ",76],["T_LNUMBER","1",76],")",["T_WHITESPACE","\n            ",76],["T_OBJECT_OPERATOR","->",77],["T_STRING","setOrder",77],"(",["T_CONSTANT_ENCAPSED_STRING","'from_date'",77],",",["T_CONSTANT_ENCAPSED_STRING","'desc'",77],")",";",["T_WHITESPACE","\n        ",77],["T_VARIABLE","$collection",78],["T_OBJECT_OPERATOR","->",78],["T_STRING","load",78],"(",")",";",["T_WHITESPACE","\n\n        ",78],["T_FOREACH","foreach",80],["T_WHITESPACE"," ",80],"(",["T_VARIABLE","$collection",80],["T_WHITESPACE"," ",80],["T_AS","as",80],["T_WHITESPACE"," ",80],["T_VARIABLE","$sr",80],")",["T_WHITESPACE"," ",80],"{",["T_WHITESPACE","\n            ",80],["T_VARIABLE","$description",81],["T_WHITESPACE"," ",81],"=",["T_WHITESPACE"," ",81],["T_CONSTANT_ENCAPSED_STRING","'<table><tr>'",81],".",["T_WHITESPACE","\n            ",81],["T_CONSTANT_ENCAPSED_STRING","'<td style=\"text-decoration:none;\">'",82],".",["T_VARIABLE","$sr",82],["T_OBJECT_OPERATOR","->",82],["T_STRING","getDescription",82],"(",")",".",["T_WHITESPACE","\n            ",82],["T_CONSTANT_ENCAPSED_STRING","'<br\/>Discount Start Date: '",83],".",["T_VARIABLE","$this",83],["T_OBJECT_OPERATOR","->",83],["T_STRING","formatDate",83],"(",["T_VARIABLE","$sr",83],["T_OBJECT_OPERATOR","->",83],["T_STRING","getFromDate",83],"(",")",",",["T_WHITESPACE"," ",83],["T_CONSTANT_ENCAPSED_STRING","'medium'",83],")",".",["T_WHITESPACE","\n            ",83],"(",["T_WHITESPACE"," ",84],["T_VARIABLE","$sr",84],["T_OBJECT_OPERATOR","->",84],["T_STRING","getToDate",84],"(",")",["T_WHITESPACE"," ",84],"?",["T_WHITESPACE"," ",84],"(",["T_CONSTANT_ENCAPSED_STRING","'<br\/>Discount End Date: '",84],".",["T_VARIABLE","$this",84],["T_OBJECT_OPERATOR","->",84],["T_STRING","formatDate",84],"(",["T_VARIABLE","$sr",84],["T_OBJECT_OPERATOR","->",84],["T_STRING","getToDate",84],"(",")",",",["T_WHITESPACE"," ",84],["T_CONSTANT_ENCAPSED_STRING","'medium'",84],")",")",":",["T_CONSTANT_ENCAPSED_STRING","''",84],")",".",["T_WHITESPACE","\n            ",84],"(",["T_VARIABLE","$sr",85],["T_OBJECT_OPERATOR","->",85],["T_STRING","getCouponCode",85],"(",")",["T_WHITESPACE"," ",85],"?",["T_WHITESPACE"," ",85],["T_CONSTANT_ENCAPSED_STRING","'<br\/> Coupon Code: '",85],".",["T_WHITESPACE"," ",85],["T_VARIABLE","$this",85],["T_OBJECT_OPERATOR","->",85],["T_STRING","escapeHtml",85],"(",["T_VARIABLE","$sr",85],["T_OBJECT_OPERATOR","->",85],["T_STRING","getCouponCode",85],"(",")",")",".",["T_CONSTANT_ENCAPSED_STRING","''",85],["T_WHITESPACE"," ",85],":",["T_WHITESPACE"," ",85],["T_CONSTANT_ENCAPSED_STRING","''",85],")",".",["T_WHITESPACE","\n            ",85],["T_CONSTANT_ENCAPSED_STRING","'<\/td>'",86],".",["T_WHITESPACE","\n            ",86],["T_CONSTANT_ENCAPSED_STRING","'<\/tr><\/table>'",87],";",["T_WHITESPACE","\n             ",87],["T_VARIABLE","$data",88],["T_WHITESPACE"," ",88],"=",["T_WHITESPACE"," ",88],["T_ARRAY","array",88],"(",["T_WHITESPACE","\n                 ",88],["T_CONSTANT_ENCAPSED_STRING","'title'",89],["T_WHITESPACE","       ",89],["T_DOUBLE_ARROW","=>",89],["T_WHITESPACE"," ",89],["T_VARIABLE","$sr",89],["T_OBJECT_OPERATOR","->",89],["T_STRING","getName",89],"(",")",",",["T_WHITESPACE","\n                 ",89],["T_CONSTANT_ENCAPSED_STRING","'description'",90],["T_WHITESPACE"," ",90],["T_DOUBLE_ARROW","=>",90],["T_WHITESPACE"," ",90],["T_VARIABLE","$description",90],",",["T_WHITESPACE","\n                 ",90],["T_CONSTANT_ENCAPSED_STRING","'link'",91],["T_WHITESPACE","        ",91],["T_DOUBLE_ARROW","=>",91],["T_WHITESPACE"," ",91],["T_VARIABLE","$url",91],["T_WHITESPACE","\n             ",91],")",";",["T_WHITESPACE","\n            ",92],["T_VARIABLE","$rssObject",93],["T_OBJECT_OPERATOR","->",93],["T_STRING","_addEntry",93],"(",["T_VARIABLE","$data",93],")",";",["T_WHITESPACE","\n        ",93],"}",["T_WHITESPACE","\n\n        ",94],["T_RETURN","return",96],["T_WHITESPACE"," ",96],["T_VARIABLE","$rssObject",96],["T_OBJECT_OPERATOR","->",96],["T_STRING","createRssXml",96],"(",")",";",["T_WHITESPACE","\n    ",96],"}",["T_WHITESPACE","\n",97],"}",["T_WHITESPACE","\n",98]]
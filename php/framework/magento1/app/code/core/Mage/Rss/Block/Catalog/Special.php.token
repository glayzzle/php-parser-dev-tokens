[["T_OPEN_TAG","<?php\n",1],["T_DOC_COMMENT","\/**\n * Magento\n *\n * NOTICE OF LICENSE\n *\n * This source file is subject to the Open Software License (OSL 3.0)\n * that is bundled with this package in the file LICENSE.txt.\n * It is also available through the world-wide-web at this URL:\n * http:\/\/opensource.org\/licenses\/osl-3.0.php\n * If you did not receive a copy of the license and are unable to\n * obtain it through the world-wide-web, please send an email\n * to license@magento.com so we can send you a copy immediately.\n *\n * DISCLAIMER\n *\n * Do not edit or add to this file if you wish to upgrade Magento to newer\n * versions in the future. If you wish to customize Magento for your\n * needs please refer to http:\/\/www.magento.com for more information.\n *\n * @category    Mage\n * @package     Mage_Rss\n * @copyright  Copyright (c) 2006-2016 X.commerce, Inc. and affiliates (http:\/\/www.magento.com)\n * @license    http:\/\/opensource.org\/licenses\/osl-3.0.php  Open Software License (OSL 3.0)\n *\/",2],["T_WHITESPACE","\n\n",25],["T_DOC_COMMENT","\/**\n * Review form block\n *\n * @category   Mage\n * @package    Mage_Rss\n * @author      Magento Core Team <core@magentocommerce.com>\n *\/",27],["T_WHITESPACE","\n",33],["T_CLASS","class",34],["T_WHITESPACE"," ",34],["T_STRING","Mage_Rss_Block_Catalog_Special",34],["T_WHITESPACE"," ",34],["T_EXTENDS","extends",34],["T_WHITESPACE"," ",34],["T_STRING","Mage_Rss_Block_Catalog_Abstract",34],["T_WHITESPACE","\n",34],"{",["T_WHITESPACE","\n    ",35],["T_DOC_COMMENT","\/**\n     * Zend_Date object for date comparsions\n     *\n     * @var Zend_Date $_currentDate\n     *\/",36],["T_WHITESPACE","\n    ",40],["T_PROTECTED","protected",41],["T_WHITESPACE"," ",41],["T_STATIC","static",41],["T_WHITESPACE"," ",41],["T_VARIABLE","$_currentDate",41],["T_WHITESPACE"," ",41],"=",["T_WHITESPACE"," ",41],["T_STRING","null",41],";",["T_WHITESPACE","\n\n    ",41],["T_PROTECTED","protected",43],["T_WHITESPACE"," ",43],["T_FUNCTION","function",43],["T_WHITESPACE"," ",43],["T_STRING","_construct",43],"(",")",["T_WHITESPACE","\n    ",43],"{",["T_WHITESPACE","\n        ",44],["T_COMMENT","\/*\n        * setting cache to save the rss for 10 minutes\n        *\/",45],["T_WHITESPACE","\n        ",47],["T_VARIABLE","$this",48],["T_OBJECT_OPERATOR","->",48],["T_STRING","setCacheKey",48],"(",["T_CONSTANT_ENCAPSED_STRING","'rss_catalog_special_'",48],".",["T_VARIABLE","$this",48],["T_OBJECT_OPERATOR","->",48],["T_STRING","_getStoreId",48],"(",")",".",["T_CONSTANT_ENCAPSED_STRING","'_'",48],".",["T_VARIABLE","$this",48],["T_OBJECT_OPERATOR","->",48],["T_STRING","_getCustomerGroupId",48],"(",")",")",";",["T_WHITESPACE","\n        ",48],["T_VARIABLE","$this",49],["T_OBJECT_OPERATOR","->",49],["T_STRING","setCacheLifetime",49],"(",["T_LNUMBER","600",49],")",";",["T_WHITESPACE","\n    ",49],"}",["T_WHITESPACE","\n\n    ",50],["T_PROTECTED","protected",52],["T_WHITESPACE"," ",52],["T_FUNCTION","function",52],["T_WHITESPACE"," ",52],["T_STRING","_toHtml",52],"(",")",["T_WHITESPACE","\n    ",52],"{",["T_WHITESPACE","\n         ",53],["T_COMMENT","\/\/store id is store view id\n",54],["T_WHITESPACE","        ",55],["T_VARIABLE","$storeId",55],["T_WHITESPACE"," ",55],"=",["T_WHITESPACE"," ",55],["T_VARIABLE","$this",55],["T_OBJECT_OPERATOR","->",55],["T_STRING","_getStoreId",55],"(",")",";",["T_WHITESPACE","\n        ",55],["T_VARIABLE","$websiteId",56],["T_WHITESPACE"," ",56],"=",["T_WHITESPACE"," ",56],["T_STRING","Mage",56],["T_DOUBLE_COLON","::",56],["T_STRING","app",56],"(",")",["T_OBJECT_OPERATOR","->",56],["T_STRING","getStore",56],"(",["T_VARIABLE","$storeId",56],")",["T_OBJECT_OPERATOR","->",56],["T_STRING","getWebsiteId",56],"(",")",";",["T_WHITESPACE","\n\n        ",56],["T_COMMENT","\/\/customer group id\n",58],["T_WHITESPACE","        ",59],["T_VARIABLE","$customerGroupId",59],["T_WHITESPACE"," ",59],"=",["T_WHITESPACE"," ",59],["T_VARIABLE","$this",59],["T_OBJECT_OPERATOR","->",59],["T_STRING","_getCustomerGroupId",59],"(",")",";",["T_WHITESPACE","\n\n        ",59],["T_VARIABLE","$product",61],["T_WHITESPACE"," ",61],"=",["T_WHITESPACE"," ",61],["T_STRING","Mage",61],["T_DOUBLE_COLON","::",61],["T_STRING","getModel",61],"(",["T_CONSTANT_ENCAPSED_STRING","'catalog\/product'",61],")",";",["T_WHITESPACE","\n\n        ",61],["T_VARIABLE","$fields",63],["T_WHITESPACE"," ",63],"=",["T_WHITESPACE"," ",63],["T_ARRAY","array",63],"(",["T_WHITESPACE","\n            ",63],["T_CONSTANT_ENCAPSED_STRING","'final_price'",64],",",["T_WHITESPACE","\n            ",64],["T_CONSTANT_ENCAPSED_STRING","'price'",65],["T_WHITESPACE","\n        ",65],")",";",["T_WHITESPACE","\n        ",66],["T_VARIABLE","$specials",67],["T_WHITESPACE"," ",67],"=",["T_WHITESPACE"," ",67],["T_VARIABLE","$product",67],["T_OBJECT_OPERATOR","->",67],["T_STRING","setStoreId",67],"(",["T_VARIABLE","$storeId",67],")",["T_OBJECT_OPERATOR","->",67],["T_STRING","getResourceCollection",67],"(",")",["T_WHITESPACE","\n            ",67],["T_OBJECT_OPERATOR","->",68],["T_STRING","addPriceDataFieldFilter",68],"(",["T_CONSTANT_ENCAPSED_STRING","'%s < %s'",68],",",["T_WHITESPACE"," ",68],["T_VARIABLE","$fields",68],")",["T_WHITESPACE","\n            ",68],["T_OBJECT_OPERATOR","->",69],["T_STRING","addPriceData",69],"(",["T_VARIABLE","$customerGroupId",69],",",["T_WHITESPACE"," ",69],["T_VARIABLE","$websiteId",69],")",["T_WHITESPACE","\n            ",69],["T_OBJECT_OPERATOR","->",70],["T_STRING","addAttributeToSelect",70],"(",["T_WHITESPACE","\n                    ",70],["T_ARRAY","array",71],"(",["T_WHITESPACE","\n                        ",71],["T_CONSTANT_ENCAPSED_STRING","'name'",72],",",["T_WHITESPACE"," ",72],["T_CONSTANT_ENCAPSED_STRING","'short_description'",72],",",["T_WHITESPACE"," ",72],["T_CONSTANT_ENCAPSED_STRING","'description'",72],",",["T_WHITESPACE"," ",72],["T_CONSTANT_ENCAPSED_STRING","'price'",72],",",["T_WHITESPACE"," ",72],["T_CONSTANT_ENCAPSED_STRING","'thumbnail'",72],",",["T_WHITESPACE","\n                        ",72],["T_CONSTANT_ENCAPSED_STRING","'special_price'",73],",",["T_WHITESPACE"," ",73],["T_CONSTANT_ENCAPSED_STRING","'special_to_date'",73],",",["T_WHITESPACE","\n                        ",73],["T_CONSTANT_ENCAPSED_STRING","'msrp_enabled'",74],",",["T_WHITESPACE"," ",74],["T_CONSTANT_ENCAPSED_STRING","'msrp_display_actual_price_type'",74],",",["T_WHITESPACE"," ",74],["T_CONSTANT_ENCAPSED_STRING","'msrp'",74],["T_WHITESPACE","\n                    ",74],")",",",["T_WHITESPACE","\n                    ",75],["T_CONSTANT_ENCAPSED_STRING","'left'",76],["T_WHITESPACE","\n            ",76],")",["T_WHITESPACE","\n            ",77],["T_OBJECT_OPERATOR","->",78],["T_STRING","addAttributeToSort",78],"(",["T_CONSTANT_ENCAPSED_STRING","'name'",78],",",["T_WHITESPACE"," ",78],["T_CONSTANT_ENCAPSED_STRING","'asc'",78],")",["T_WHITESPACE","\n        ",78],";",["T_WHITESPACE","\n\n        ",79],["T_VARIABLE","$newurl",81],["T_WHITESPACE"," ",81],"=",["T_WHITESPACE"," ",81],["T_STRING","Mage",81],["T_DOUBLE_COLON","::",81],["T_STRING","getUrl",81],"(",["T_CONSTANT_ENCAPSED_STRING","'rss\/catalog\/special\/store_id\/'",81],["T_WHITESPACE"," ",81],".",["T_WHITESPACE"," ",81],["T_VARIABLE","$storeId",81],")",";",["T_WHITESPACE","\n        ",81],["T_VARIABLE","$title",82],["T_WHITESPACE"," ",82],"=",["T_WHITESPACE"," ",82],["T_STRING","Mage",82],["T_DOUBLE_COLON","::",82],["T_STRING","helper",82],"(",["T_CONSTANT_ENCAPSED_STRING","'rss'",82],")",["T_OBJECT_OPERATOR","->",82],["T_STRING","__",82],"(",["T_CONSTANT_ENCAPSED_STRING","'%s - Special Products'",82],",",["T_WHITESPACE"," ",82],["T_STRING","Mage",82],["T_DOUBLE_COLON","::",82],["T_STRING","app",82],"(",")",["T_OBJECT_OPERATOR","->",82],["T_STRING","getStore",82],"(",")",["T_OBJECT_OPERATOR","->",82],["T_STRING","getFrontendName",82],"(",")",")",";",["T_WHITESPACE","\n        ",82],["T_VARIABLE","$lang",83],["T_WHITESPACE"," ",83],"=",["T_WHITESPACE"," ",83],["T_STRING","Mage",83],["T_DOUBLE_COLON","::",83],["T_STRING","getStoreConfig",83],"(",["T_CONSTANT_ENCAPSED_STRING","'general\/locale\/code'",83],")",";",["T_WHITESPACE","\n\n        ",83],["T_VARIABLE","$rssObj",85],["T_WHITESPACE"," ",85],"=",["T_WHITESPACE"," ",85],["T_STRING","Mage",85],["T_DOUBLE_COLON","::",85],["T_STRING","getModel",85],"(",["T_CONSTANT_ENCAPSED_STRING","'rss\/rss'",85],")",";",["T_WHITESPACE","\n        ",85],["T_VARIABLE","$data",86],["T_WHITESPACE"," ",86],"=",["T_WHITESPACE"," ",86],["T_ARRAY","array",86],"(",["T_CONSTANT_ENCAPSED_STRING","'title'",86],["T_WHITESPACE"," ",86],["T_DOUBLE_ARROW","=>",86],["T_WHITESPACE"," ",86],["T_VARIABLE","$title",86],",",["T_WHITESPACE","\n                ",86],["T_CONSTANT_ENCAPSED_STRING","'description'",87],["T_WHITESPACE"," ",87],["T_DOUBLE_ARROW","=>",87],["T_WHITESPACE"," ",87],["T_VARIABLE","$title",87],",",["T_WHITESPACE","\n                ",87],["T_CONSTANT_ENCAPSED_STRING","'link'",88],["T_WHITESPACE","        ",88],["T_DOUBLE_ARROW","=>",88],["T_WHITESPACE"," ",88],["T_VARIABLE","$newurl",88],",",["T_WHITESPACE","\n                ",88],["T_CONSTANT_ENCAPSED_STRING","'charset'",89],["T_WHITESPACE","     ",89],["T_DOUBLE_ARROW","=>",89],["T_WHITESPACE"," ",89],["T_CONSTANT_ENCAPSED_STRING","'UTF-8'",89],",",["T_WHITESPACE","\n                ",89],["T_CONSTANT_ENCAPSED_STRING","'language'",90],["T_WHITESPACE","    ",90],["T_DOUBLE_ARROW","=>",90],["T_WHITESPACE"," ",90],["T_VARIABLE","$lang",90],["T_WHITESPACE","\n                ",90],")",";",["T_WHITESPACE","\n        ",91],["T_VARIABLE","$rssObj",92],["T_OBJECT_OPERATOR","->",92],["T_STRING","_addHeader",92],"(",["T_VARIABLE","$data",92],")",";",["T_WHITESPACE","\n\n        ",92],["T_VARIABLE","$results",94],["T_WHITESPACE"," ",94],"=",["T_WHITESPACE"," ",94],["T_ARRAY","array",94],"(",")",";",["T_WHITESPACE","\n        ",94],["T_COMMENT","\/*\n        using resource iterator to load the data one by one\n        instead of loading all at the same time. loading all data at the same time can cause the big memory allocation.\n        *\/",95],["T_WHITESPACE","\n        ",98],["T_STRING","Mage",99],["T_DOUBLE_COLON","::",99],["T_STRING","getSingleton",99],"(",["T_CONSTANT_ENCAPSED_STRING","'core\/resource_iterator'",99],")",["T_OBJECT_OPERATOR","->",99],["T_STRING","walk",99],"(",["T_WHITESPACE","\n            ",99],["T_VARIABLE","$specials",100],["T_OBJECT_OPERATOR","->",100],["T_STRING","getSelect",100],"(",")",",",["T_WHITESPACE","\n            ",100],["T_ARRAY","array",101],"(",["T_ARRAY","array",101],"(",["T_VARIABLE","$this",101],",",["T_WHITESPACE"," ",101],["T_CONSTANT_ENCAPSED_STRING","'addSpecialXmlCallback'",101],")",")",",",["T_WHITESPACE","\n            ",101],["T_ARRAY","array",102],"(",["T_CONSTANT_ENCAPSED_STRING","'rssObj'",102],["T_DOUBLE_ARROW","=>",102],["T_WHITESPACE"," ",102],["T_VARIABLE","$rssObj",102],",",["T_WHITESPACE"," ",102],["T_CONSTANT_ENCAPSED_STRING","'results'",102],["T_DOUBLE_ARROW","=>",102],["T_WHITESPACE"," ",102],"&",["T_VARIABLE","$results",102],")",["T_WHITESPACE","\n        ",102],")",";",["T_WHITESPACE","\n\n        ",103],["T_IF","if",105],["T_WHITESPACE"," ",105],"(",["T_STRING","sizeof",105],"(",["T_VARIABLE","$results",105],")",">",["T_LNUMBER","0",105],")",["T_WHITESPACE"," ",105],"{",["T_WHITESPACE","\n            ",105],["T_FOREACH","foreach",106],"(",["T_VARIABLE","$results",106],["T_WHITESPACE"," ",106],["T_AS","as",106],["T_WHITESPACE"," ",106],["T_VARIABLE","$result",106],")","{",["T_WHITESPACE","\n                ",106],["T_COMMENT","\/\/ render a row for RSS feed\n",107],["T_WHITESPACE","                ",108],["T_VARIABLE","$product",108],["T_OBJECT_OPERATOR","->",108],["T_STRING","setData",108],"(",["T_VARIABLE","$result",108],")",";",["T_WHITESPACE","\n                ",108],["T_VARIABLE","$html",109],["T_WHITESPACE"," ",109],"=",["T_WHITESPACE"," ",109],["T_STRING","sprintf",109],"(",["T_CONSTANT_ENCAPSED_STRING","'<table><tr>\n                    <td><a href=\"%s\"><img src=\"%s\" alt=\"\" border=\"0\" align=\"left\" height=\"75\" width=\"75\" \/><\/a><\/td>\n                    <td style=\"text-decoration:none;\">%s'",109],",",["T_WHITESPACE","\n                    ",111],["T_VARIABLE","$product",112],["T_OBJECT_OPERATOR","->",112],["T_STRING","getProductUrl",112],"(",")",",",["T_WHITESPACE","\n                    ",112],["T_VARIABLE","$this",113],["T_OBJECT_OPERATOR","->",113],["T_STRING","helper",113],"(",["T_CONSTANT_ENCAPSED_STRING","'catalog\/image'",113],")",["T_OBJECT_OPERATOR","->",113],["T_STRING","init",113],"(",["T_VARIABLE","$product",113],",",["T_WHITESPACE"," ",113],["T_CONSTANT_ENCAPSED_STRING","'thumbnail'",113],")",["T_OBJECT_OPERATOR","->",113],["T_STRING","resize",113],"(",["T_LNUMBER","75",113],",",["T_WHITESPACE"," ",113],["T_LNUMBER","75",113],")",",",["T_WHITESPACE","\n                    ",113],["T_VARIABLE","$this",114],["T_OBJECT_OPERATOR","->",114],["T_STRING","helper",114],"(",["T_CONSTANT_ENCAPSED_STRING","'catalog\/output'",114],")",["T_OBJECT_OPERATOR","->",114],["T_STRING","productAttribute",114],"(",["T_WHITESPACE","\n                        ",114],["T_VARIABLE","$product",115],",",["T_WHITESPACE","\n                        ",115],["T_VARIABLE","$product",116],["T_OBJECT_OPERATOR","->",116],["T_STRING","getDescription",116],"(",")",",",["T_WHITESPACE","\n                        ",116],["T_CONSTANT_ENCAPSED_STRING","'description'",117],["T_WHITESPACE","\n                    ",117],")",["T_WHITESPACE","\n                ",118],")",";",["T_WHITESPACE","\n\n                ",119],["T_COMMENT","\/\/ add price data if needed\n",121],["T_WHITESPACE","                ",122],["T_IF","if",122],["T_WHITESPACE"," ",122],"(",["T_VARIABLE","$product",122],["T_OBJECT_OPERATOR","->",122],["T_STRING","getAllowedPriceInRss",122],"(",")",")",["T_WHITESPACE"," ",122],"{",["T_WHITESPACE","\n                    ",122],["T_IF","if",123],["T_WHITESPACE"," ",123],"(",["T_STRING","Mage",123],["T_DOUBLE_COLON","::",123],["T_STRING","helper",123],"(",["T_CONSTANT_ENCAPSED_STRING","'catalog'",123],")",["T_OBJECT_OPERATOR","->",123],["T_STRING","canApplyMsrp",123],"(",["T_VARIABLE","$product",123],")",")",["T_WHITESPACE"," ",123],"{",["T_WHITESPACE","\n                        ",123],["T_VARIABLE","$html",124],["T_WHITESPACE"," ",124],["T_CONCAT_EQUAL",".=",124],["T_WHITESPACE"," ",124],["T_CONSTANT_ENCAPSED_STRING","'<br\/><a href=\"'",124],["T_WHITESPACE"," ",124],".",["T_WHITESPACE"," ",124],["T_VARIABLE","$product",124],["T_OBJECT_OPERATOR","->",124],["T_STRING","getProductUrl",124],"(",")",["T_WHITESPACE"," ",124],".",["T_WHITESPACE"," ",124],["T_CONSTANT_ENCAPSED_STRING","'\">'",124],["T_WHITESPACE","\n                            ",124],".",["T_WHITESPACE"," ",125],["T_VARIABLE","$this",125],["T_OBJECT_OPERATOR","->",125],["T_STRING","__",125],"(",["T_CONSTANT_ENCAPSED_STRING","'Click for price'",125],")",["T_WHITESPACE"," ",125],".",["T_WHITESPACE"," ",125],["T_CONSTANT_ENCAPSED_STRING","'<\/a>'",125],";",["T_WHITESPACE","\n                    ",125],"}",["T_WHITESPACE"," ",126],["T_ELSE","else",126],["T_WHITESPACE"," ",126],"{",["T_WHITESPACE","\n                        ",126],["T_VARIABLE","$special",127],["T_WHITESPACE"," ",127],"=",["T_WHITESPACE"," ",127],["T_CONSTANT_ENCAPSED_STRING","''",127],";",["T_WHITESPACE","\n                        ",127],["T_IF","if",128],["T_WHITESPACE"," ",128],"(",["T_VARIABLE","$result",128],"[",["T_CONSTANT_ENCAPSED_STRING","'use_special'",128],"]",")",["T_WHITESPACE"," ",128],"{",["T_WHITESPACE","\n                            ",128],["T_VARIABLE","$special",129],["T_WHITESPACE"," ",129],"=",["T_WHITESPACE"," ",129],["T_CONSTANT_ENCAPSED_STRING","'<br \/>'",129],["T_WHITESPACE"," ",129],".",["T_WHITESPACE"," ",129],["T_STRING","Mage",129],["T_DOUBLE_COLON","::",129],["T_STRING","helper",129],"(",["T_CONSTANT_ENCAPSED_STRING","'catalog'",129],")",["T_OBJECT_OPERATOR","->",129],["T_STRING","__",129],"(",["T_CONSTANT_ENCAPSED_STRING","'Special Expires On: %s'",129],",",["T_WHITESPACE"," ",129],["T_VARIABLE","$this",129],["T_OBJECT_OPERATOR","->",129],["T_STRING","formatDate",129],"(",["T_VARIABLE","$result",129],"[",["T_CONSTANT_ENCAPSED_STRING","'special_to_date'",129],"]",",",["T_WHITESPACE"," ",129],["T_STRING","Mage_Core_Model_Locale",129],["T_DOUBLE_COLON","::",129],["T_STRING","FORMAT_TYPE_MEDIUM",129],")",")",";",["T_WHITESPACE","\n                        ",129],"}",["T_WHITESPACE","\n                        ",130],["T_VARIABLE","$html",131],["T_WHITESPACE"," ",131],["T_CONCAT_EQUAL",".=",131],["T_WHITESPACE"," ",131],["T_STRING","sprintf",131],"(",["T_CONSTANT_ENCAPSED_STRING","'<p>%s %s%s<\/p>'",131],",",["T_WHITESPACE","\n                            ",131],["T_STRING","Mage",132],["T_DOUBLE_COLON","::",132],["T_STRING","helper",132],"(",["T_CONSTANT_ENCAPSED_STRING","'catalog'",132],")",["T_OBJECT_OPERATOR","->",132],["T_STRING","__",132],"(",["T_CONSTANT_ENCAPSED_STRING","'Price: %s'",132],",",["T_WHITESPACE"," ",132],["T_STRING","Mage",132],["T_DOUBLE_COLON","::",132],["T_STRING","helper",132],"(",["T_CONSTANT_ENCAPSED_STRING","'core'",132],")",["T_OBJECT_OPERATOR","->",132],["T_STRING","currency",132],"(",["T_VARIABLE","$result",132],"[",["T_CONSTANT_ENCAPSED_STRING","'price'",132],"]",")",")",",",["T_WHITESPACE","\n                            ",132],["T_STRING","Mage",133],["T_DOUBLE_COLON","::",133],["T_STRING","helper",133],"(",["T_CONSTANT_ENCAPSED_STRING","'catalog'",133],")",["T_OBJECT_OPERATOR","->",133],["T_STRING","__",133],"(",["T_CONSTANT_ENCAPSED_STRING","'Special Price: %s'",133],",",["T_WHITESPACE"," ",133],["T_STRING","Mage",133],["T_DOUBLE_COLON","::",133],["T_STRING","helper",133],"(",["T_CONSTANT_ENCAPSED_STRING","'core'",133],")",["T_OBJECT_OPERATOR","->",133],["T_STRING","currency",133],"(",["T_VARIABLE","$result",133],"[",["T_CONSTANT_ENCAPSED_STRING","'final_price'",133],"]",")",")",",",["T_WHITESPACE","\n                            ",133],["T_VARIABLE","$special",134],["T_WHITESPACE","\n                        ",134],")",";",["T_WHITESPACE","\n                    ",135],"}",["T_WHITESPACE","\n                ",136],"}",["T_WHITESPACE","\n\n                ",137],["T_VARIABLE","$html",139],["T_WHITESPACE"," ",139],["T_CONCAT_EQUAL",".=",139],["T_WHITESPACE"," ",139],["T_CONSTANT_ENCAPSED_STRING","'<\/td><\/tr><\/table>'",139],";",["T_WHITESPACE","\n\n                ",139],["T_VARIABLE","$rssObj",141],["T_OBJECT_OPERATOR","->",141],["T_STRING","_addEntry",141],"(",["T_ARRAY","array",141],"(",["T_WHITESPACE","\n                    ",141],["T_CONSTANT_ENCAPSED_STRING","'title'",142],["T_WHITESPACE","       ",142],["T_DOUBLE_ARROW","=>",142],["T_WHITESPACE"," ",142],["T_VARIABLE","$product",142],["T_OBJECT_OPERATOR","->",142],["T_STRING","getName",142],"(",")",",",["T_WHITESPACE","\n                    ",142],["T_CONSTANT_ENCAPSED_STRING","'link'",143],["T_WHITESPACE","        ",143],["T_DOUBLE_ARROW","=>",143],["T_WHITESPACE"," ",143],["T_VARIABLE","$product",143],["T_OBJECT_OPERATOR","->",143],["T_STRING","getProductUrl",143],"(",")",",",["T_WHITESPACE","\n                    ",143],["T_CONSTANT_ENCAPSED_STRING","'description'",144],["T_WHITESPACE"," ",144],["T_DOUBLE_ARROW","=>",144],["T_WHITESPACE"," ",144],["T_VARIABLE","$html",144],["T_WHITESPACE","\n                ",144],")",")",";",["T_WHITESPACE","\n            ",145],"}",["T_WHITESPACE","\n        ",146],"}",["T_WHITESPACE","\n        ",147],["T_RETURN","return",148],["T_WHITESPACE"," ",148],["T_VARIABLE","$rssObj",148],["T_OBJECT_OPERATOR","->",148],["T_STRING","createRssXml",148],"(",")",";",["T_WHITESPACE","\n    ",148],"}",["T_WHITESPACE","\n\n    ",149],["T_DOC_COMMENT","\/**\n     * Preparing data and adding to rss object\n     *\n     * @param array $args\n     *\/",151],["T_WHITESPACE","\n    ",155],["T_PUBLIC","public",156],["T_WHITESPACE"," ",156],["T_FUNCTION","function",156],["T_WHITESPACE"," ",156],["T_STRING","addSpecialXmlCallback",156],"(",["T_VARIABLE","$args",156],")",["T_WHITESPACE","\n    ",156],"{",["T_WHITESPACE","\n        ",157],["T_IF","if",158],["T_WHITESPACE"," ",158],"(","!",["T_ISSET","isset",158],"(",["T_STRING","self",158],["T_DOUBLE_COLON","::",158],["T_VARIABLE","$_currentDate",158],")",")",["T_WHITESPACE"," ",158],"{",["T_WHITESPACE","\n            ",158],["T_STRING","self",159],["T_DOUBLE_COLON","::",159],["T_VARIABLE","$_currentDate",159],["T_WHITESPACE"," ",159],"=",["T_WHITESPACE"," ",159],["T_NEW","new",159],["T_WHITESPACE"," ",159],["T_STRING","Zend_Date",159],"(",")",";",["T_WHITESPACE","\n        ",159],"}",["T_WHITESPACE","\n\n        ",160],["T_COMMENT","\/\/ dispatch event to determine whether the product will eventually get to the result\n",162],["T_WHITESPACE","        ",163],["T_VARIABLE","$product",163],["T_WHITESPACE"," ",163],"=",["T_WHITESPACE"," ",163],["T_NEW","new",163],["T_WHITESPACE"," ",163],["T_STRING","Varien_Object",163],"(",["T_ARRAY","array",163],"(",["T_CONSTANT_ENCAPSED_STRING","'allowed_in_rss'",163],["T_WHITESPACE"," ",163],["T_DOUBLE_ARROW","=>",163],["T_WHITESPACE"," ",163],["T_STRING","true",163],",",["T_WHITESPACE"," ",163],["T_CONSTANT_ENCAPSED_STRING","'allowed_price_in_rss'",163],["T_WHITESPACE"," ",163],["T_DOUBLE_ARROW","=>",163],["T_WHITESPACE"," ",163],["T_STRING","true",163],")",")",";",["T_WHITESPACE","\n        ",163],["T_VARIABLE","$args",164],"[",["T_CONSTANT_ENCAPSED_STRING","'product'",164],"]",["T_WHITESPACE"," ",164],"=",["T_WHITESPACE"," ",164],["T_VARIABLE","$product",164],";",["T_WHITESPACE","\n        ",164],["T_STRING","Mage",165],["T_DOUBLE_COLON","::",165],["T_STRING","dispatchEvent",165],"(",["T_CONSTANT_ENCAPSED_STRING","'rss_catalog_special_xml_callback'",165],",",["T_WHITESPACE"," ",165],["T_VARIABLE","$args",165],")",";",["T_WHITESPACE","\n        ",165],["T_IF","if",166],["T_WHITESPACE"," ",166],"(","!",["T_VARIABLE","$product",166],["T_OBJECT_OPERATOR","->",166],["T_STRING","getAllowedInRss",166],"(",")",")",["T_WHITESPACE"," ",166],"{",["T_WHITESPACE","\n            ",166],["T_RETURN","return",167],";",["T_WHITESPACE","\n        ",167],"}",["T_WHITESPACE","\n\n        ",168],["T_COMMENT","\/\/ add row to result and determine whether special price is active (less or equal to the final price)\n",170],["T_WHITESPACE","        ",171],["T_VARIABLE","$row",171],["T_WHITESPACE"," ",171],"=",["T_WHITESPACE"," ",171],["T_VARIABLE","$args",171],"[",["T_CONSTANT_ENCAPSED_STRING","'row'",171],"]",";",["T_WHITESPACE","\n        ",171],["T_VARIABLE","$row",172],"[",["T_CONSTANT_ENCAPSED_STRING","'use_special'",172],"]",["T_WHITESPACE"," ",172],"=",["T_WHITESPACE"," ",172],["T_STRING","false",172],";",["T_WHITESPACE","\n        ",172],["T_VARIABLE","$row",173],"[",["T_CONSTANT_ENCAPSED_STRING","'allowed_price_in_rss'",173],"]",["T_WHITESPACE"," ",173],"=",["T_WHITESPACE"," ",173],["T_VARIABLE","$product",173],["T_OBJECT_OPERATOR","->",173],["T_STRING","getAllowedPriceInRss",173],"(",")",";",["T_WHITESPACE","\n        ",173],["T_IF","if",174],["T_WHITESPACE"," ",174],"(",["T_ISSET","isset",174],"(",["T_VARIABLE","$row",174],"[",["T_CONSTANT_ENCAPSED_STRING","'special_to_date'",174],"]",")",["T_WHITESPACE"," ",174],["T_BOOLEAN_AND","&&",174],["T_WHITESPACE"," ",174],["T_VARIABLE","$row",174],"[",["T_CONSTANT_ENCAPSED_STRING","'final_price'",174],"]",["T_WHITESPACE"," ",174],["T_IS_SMALLER_OR_EQUAL","<=",174],["T_WHITESPACE"," ",174],["T_VARIABLE","$row",174],"[",["T_CONSTANT_ENCAPSED_STRING","'special_price'",174],"]",["T_WHITESPACE","\n            ",174],["T_BOOLEAN_AND","&&",175],["T_WHITESPACE"," ",175],["T_VARIABLE","$row",175],"[",["T_CONSTANT_ENCAPSED_STRING","'allowed_price_in_rss'",175],"]",["T_WHITESPACE","\n        ",175],")",["T_WHITESPACE"," ",176],"{",["T_WHITESPACE","\n            ",176],["T_VARIABLE","$compareDate",177],["T_WHITESPACE"," ",177],"=",["T_WHITESPACE"," ",177],["T_STRING","self",177],["T_DOUBLE_COLON","::",177],["T_VARIABLE","$_currentDate",177],["T_OBJECT_OPERATOR","->",177],["T_STRING","compareDate",177],"(",["T_VARIABLE","$row",177],"[",["T_CONSTANT_ENCAPSED_STRING","'special_to_date'",177],"]",",",["T_WHITESPACE"," ",177],["T_STRING","Varien_Date",177],["T_DOUBLE_COLON","::",177],["T_STRING","DATE_INTERNAL_FORMAT",177],")",";",["T_WHITESPACE","\n            ",177],["T_IF","if",178],["T_WHITESPACE"," ",178],"(","-",["T_LNUMBER","1",178],["T_WHITESPACE"," ",178],["T_IS_IDENTICAL","===",178],["T_WHITESPACE"," ",178],["T_VARIABLE","$compareDate",178],["T_WHITESPACE"," ",178],["T_BOOLEAN_OR","||",178],["T_WHITESPACE"," ",178],["T_LNUMBER","0",178],["T_WHITESPACE"," ",178],["T_IS_IDENTICAL","===",178],["T_WHITESPACE"," ",178],["T_VARIABLE","$compareDate",178],")",["T_WHITESPACE"," ",178],"{",["T_WHITESPACE","\n                ",178],["T_VARIABLE","$row",179],"[",["T_CONSTANT_ENCAPSED_STRING","'use_special'",179],"]",["T_WHITESPACE"," ",179],"=",["T_WHITESPACE"," ",179],["T_STRING","true",179],";",["T_WHITESPACE","\n            ",179],"}",["T_WHITESPACE","\n        ",180],"}",["T_WHITESPACE","\n\n       ",181],["T_VARIABLE","$args",183],"[",["T_CONSTANT_ENCAPSED_STRING","'results'",183],"]","[","]",["T_WHITESPACE"," ",183],"=",["T_WHITESPACE"," ",183],["T_VARIABLE","$row",183],";",["T_WHITESPACE","\n    ",183],"}",["T_WHITESPACE","\n\n\n    ",184],["T_DOC_COMMENT","\/**\n     * Function for comparing two items in collection\n     *\n     * @param   Varien_Object $item1\n     * @param   Varien_Object $item2\n     * @return  boolean\n     *\/",187],["T_WHITESPACE","\n    ",193],["T_PUBLIC","public",194],["T_WHITESPACE"," ",194],["T_FUNCTION","function",194],["T_WHITESPACE"," ",194],["T_STRING","sortByStartDate",194],"(",["T_VARIABLE","$a",194],",",["T_WHITESPACE"," ",194],["T_VARIABLE","$b",194],")",["T_WHITESPACE","\n    ",194],"{",["T_WHITESPACE","\n        ",195],["T_RETURN","return",196],["T_WHITESPACE"," ",196],["T_VARIABLE","$a",196],"[",["T_CONSTANT_ENCAPSED_STRING","'start_date'",196],"]",">",["T_VARIABLE","$b",196],"[",["T_CONSTANT_ENCAPSED_STRING","'start_date'",196],"]",["T_WHITESPACE"," ",196],"?",["T_WHITESPACE"," ",196],"-",["T_LNUMBER","1",196],["T_WHITESPACE"," ",196],":",["T_WHITESPACE"," ",196],"(",["T_VARIABLE","$a",196],"[",["T_CONSTANT_ENCAPSED_STRING","'start_date'",196],"]","<",["T_VARIABLE","$b",196],"[",["T_CONSTANT_ENCAPSED_STRING","'start_date'",196],"]",["T_WHITESPACE"," ",196],"?",["T_WHITESPACE"," ",196],["T_LNUMBER","1",196],["T_WHITESPACE"," ",196],":",["T_WHITESPACE"," ",196],["T_LNUMBER","0",196],")",";",["T_WHITESPACE","\n    ",196],"}",["T_WHITESPACE","\n",197],"}",["T_WHITESPACE","\n",198]]
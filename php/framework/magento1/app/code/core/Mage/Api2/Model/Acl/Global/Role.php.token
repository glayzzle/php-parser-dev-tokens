[["T_OPEN_TAG","<?php\n",1],["T_DOC_COMMENT","\/**\n * Magento\n *\n * NOTICE OF LICENSE\n *\n * This source file is subject to the Open Software License (OSL 3.0)\n * that is bundled with this package in the file LICENSE.txt.\n * It is also available through the world-wide-web at this URL:\n * http:\/\/opensource.org\/licenses\/osl-3.0.php\n * If you did not receive a copy of the license and are unable to\n * obtain it through the world-wide-web, please send an email\n * to license@magento.com so we can send you a copy immediately.\n *\n * DISCLAIMER\n *\n * Do not edit or add to this file if you wish to upgrade Magento to newer\n * versions in the future. If you wish to customize Magento for your\n * needs please refer to http:\/\/www.magento.com for more information.\n *\n * @category    Mage\n * @package     Mage_Api2\n * @copyright  Copyright (c) 2006-2016 X.commerce, Inc. and affiliates (http:\/\/www.magento.com)\n * @license    http:\/\/opensource.org\/licenses\/osl-3.0.php  Open Software License (OSL 3.0)\n *\/",2],["T_WHITESPACE","\n\n",25],["T_DOC_COMMENT","\/**\n * API2 Global ACL Role model\n *\n * @category    Mage\n * @package     Mage_Api2\n * @author      Magento Core Team <core@magentocommerce.com>\n * @method Mage_Api2_Model_Resource_Acl_Global_Role_Collection getCollection()\n * @method Mage_Api2_Model_Resource_Acl_Global_Role_Collection getResourceCollection()\n * @method Mage_Api2_Model_Resource_Acl_Global_Role getResource()\n * @method Mage_Api2_Model_Resource_Acl_Global_Role _getResource()\n * @method string getCreatedAt()\n * @method Mage_Api2_Model_Acl_Global_Role setCreatedAt() setCreatedAt(string $createdAt)\n * @method string getUpdatedAt()\n * @method Mage_Api2_Model_Acl_Global_Role setUpdatedAt() setUpdatedAt(string $updatedAt)\n * @method string getRoleName()\n * @method Mage_Api2_Model_Acl_Global_Role setRoleName() setRoleName(string $roleName)\n *\/",27],["T_WHITESPACE","\n",43],["T_CLASS","class",44],["T_WHITESPACE"," ",44],["T_STRING","Mage_Api2_Model_Acl_Global_Role",44],["T_WHITESPACE"," ",44],["T_EXTENDS","extends",44],["T_WHITESPACE"," ",44],["T_STRING","Mage_Core_Model_Abstract",44],["T_WHITESPACE","\n",44],"{",["T_WHITESPACE","\n    ",45],["T_COMMENT","\/**#@+\n     * System roles identifiers\n     *\/",46],["T_WHITESPACE","\n    ",48],["T_CONST","const",49],["T_WHITESPACE"," ",49],["T_STRING","ROLE_GUEST_ID",49],["T_WHITESPACE"," ",49],"=",["T_WHITESPACE"," ",49],["T_LNUMBER","1",49],";",["T_WHITESPACE","\n    ",49],["T_CONST","const",50],["T_WHITESPACE"," ",50],["T_STRING","ROLE_CUSTOMER_ID",50],["T_WHITESPACE"," ",50],"=",["T_WHITESPACE"," ",50],["T_LNUMBER","2",50],";",["T_WHITESPACE","\n    ",50],["T_COMMENT","\/**#@-*\/",51],["T_WHITESPACE","\n\n    ",51],["T_COMMENT","\/**#@+\n     * Config node identifiers\n     *\/",53],["T_WHITESPACE","\n    ",55],["T_CONST","const",56],["T_WHITESPACE"," ",56],["T_STRING","ROLE_CONFIG_NODE_NAME_GUEST",56],["T_WHITESPACE"," ",56],"=",["T_WHITESPACE"," ",56],["T_CONSTANT_ENCAPSED_STRING","'guest'",56],";",["T_WHITESPACE","\n    ",56],["T_CONST","const",57],["T_WHITESPACE"," ",57],["T_STRING","ROLE_CONFIG_NODE_NAME_CUSTOMER",57],["T_WHITESPACE"," ",57],"=",["T_WHITESPACE"," ",57],["T_CONSTANT_ENCAPSED_STRING","'customer'",57],";",["T_WHITESPACE","\n    ",57],["T_CONST","const",58],["T_WHITESPACE"," ",58],["T_STRING","ROLE_CONFIG_NODE_NAME_ADMIN",58],["T_WHITESPACE"," ",58],"=",["T_WHITESPACE"," ",58],["T_CONSTANT_ENCAPSED_STRING","'admin'",58],";",["T_WHITESPACE","\n    ",58],["T_COMMENT","\/**#@-*\/",59],["T_WHITESPACE","\n\n    ",59],["T_DOC_COMMENT","\/**\n     * Permissions model\n     *\n     * @var Mage_Api2_Model_Acl_Global_Rule_ResourcePermission\n     *\/",61],["T_WHITESPACE","\n    ",65],["T_PROTECTED","protected",66],["T_WHITESPACE"," ",66],["T_VARIABLE","$_permissionModel",66],";",["T_WHITESPACE","\n\n    ",66],["T_DOC_COMMENT","\/**\n     * Initialize resource model\n     *\n     * @return void\n     *\/",68],["T_WHITESPACE","\n    ",72],["T_PROTECTED","protected",73],["T_WHITESPACE"," ",73],["T_FUNCTION","function",73],["T_WHITESPACE"," ",73],["T_STRING","_construct",73],"(",")",["T_WHITESPACE","\n    ",73],"{",["T_WHITESPACE","\n        ",74],["T_VARIABLE","$this",75],["T_OBJECT_OPERATOR","->",75],["T_STRING","_init",75],"(",["T_CONSTANT_ENCAPSED_STRING","'api2\/acl_global_role'",75],")",";",["T_WHITESPACE","\n    ",75],"}",["T_WHITESPACE","\n\n    ",76],["T_DOC_COMMENT","\/**\n     * Before save actions\n     *\n     * @return Mage_Api2_Model_Acl_Global_Role\n     *\/",78],["T_WHITESPACE","\n    ",82],["T_PROTECTED","protected",83],["T_WHITESPACE"," ",83],["T_FUNCTION","function",83],["T_WHITESPACE"," ",83],["T_STRING","_beforeSave",83],"(",")",["T_WHITESPACE","\n    ",83],"{",["T_WHITESPACE","\n        ",84],["T_IF","if",85],["T_WHITESPACE"," ",85],"(",["T_VARIABLE","$this",85],["T_OBJECT_OPERATOR","->",85],["T_STRING","isObjectNew",85],"(",")",["T_WHITESPACE"," ",85],["T_BOOLEAN_AND","&&",85],["T_WHITESPACE"," ",85],["T_STRING","null",85],["T_WHITESPACE"," ",85],["T_IS_IDENTICAL","===",85],["T_WHITESPACE"," ",85],["T_VARIABLE","$this",85],["T_OBJECT_OPERATOR","->",85],["T_STRING","getCreatedAt",85],"(",")",")",["T_WHITESPACE"," ",85],"{",["T_WHITESPACE","\n            ",85],["T_VARIABLE","$this",86],["T_OBJECT_OPERATOR","->",86],["T_STRING","setCreatedAt",86],"(",["T_STRING","Varien_Date",86],["T_DOUBLE_COLON","::",86],["T_STRING","now",86],"(",")",")",";",["T_WHITESPACE","\n        ",86],"}",["T_WHITESPACE"," ",87],["T_ELSE","else",87],["T_WHITESPACE"," ",87],"{",["T_WHITESPACE","\n            ",87],["T_VARIABLE","$this",88],["T_OBJECT_OPERATOR","->",88],["T_STRING","setUpdatedAt",88],"(",["T_STRING","Varien_Date",88],["T_DOUBLE_COLON","::",88],["T_STRING","now",88],"(",")",")",";",["T_WHITESPACE","\n        ",88],"}",["T_WHITESPACE","\n\n        ",89],["T_COMMENT","\/\/check and protect guest role\n",91],["T_WHITESPACE","        ",92],["T_IF","if",92],["T_WHITESPACE"," ",92],"(",["T_STRING","Mage_Api2_Model_Acl_Global_Role",92],["T_DOUBLE_COLON","::",92],["T_STRING","isSystemRole",92],"(",["T_VARIABLE","$this",92],")",["T_WHITESPACE","\n            ",92],["T_BOOLEAN_AND","&&",93],["T_WHITESPACE"," ",93],["T_VARIABLE","$this",93],["T_OBJECT_OPERATOR","->",93],["T_STRING","getRoleName",93],"(",")",["T_WHITESPACE"," ",93],["T_IS_NOT_EQUAL","!=",93],["T_WHITESPACE"," ",93],["T_VARIABLE","$this",93],["T_OBJECT_OPERATOR","->",93],["T_STRING","getOrigData",93],"(",["T_CONSTANT_ENCAPSED_STRING","'role_name'",93],")",")",["T_WHITESPACE"," ",93],"{",["T_WHITESPACE","\n\n            ",93],["T_DOC_COMMENT","\/** @var $helper Mage_Core_Helper_Data *\/",95],["T_WHITESPACE","\n            ",95],["T_VARIABLE","$helper",96],["T_WHITESPACE"," ",96],"=",["T_WHITESPACE"," ",96],["T_STRING","Mage",96],["T_DOUBLE_COLON","::",96],["T_STRING","helper",96],"(",["T_CONSTANT_ENCAPSED_STRING","'core'",96],")",";",["T_WHITESPACE","\n\n            ",96],["T_STRING","Mage",98],["T_DOUBLE_COLON","::",98],["T_STRING","throwException",98],"(",["T_WHITESPACE","\n                ",98],["T_STRING","Mage",99],["T_DOUBLE_COLON","::",99],["T_STRING","helper",99],"(",["T_CONSTANT_ENCAPSED_STRING","'api2'",99],")",["T_OBJECT_OPERATOR","->",99],["T_STRING","__",99],"(",["T_CONSTANT_ENCAPSED_STRING","'%s role is a special one and can\\'t be changed.'",99],",",["T_WHITESPACE"," ",99],["T_VARIABLE","$helper",99],["T_OBJECT_OPERATOR","->",99],["T_STRING","escapeHtml",99],"(",["T_VARIABLE","$this",99],["T_OBJECT_OPERATOR","->",99],["T_STRING","getRoleName",99],"(",")",")",")",["T_WHITESPACE","\n            ",99],")",";",["T_WHITESPACE","\n        ",100],"}",["T_WHITESPACE","\n\n        ",101],["T_STRING","parent",103],["T_DOUBLE_COLON","::",103],["T_STRING","_beforeSave",103],"(",")",";",["T_WHITESPACE","\n        ",103],["T_RETURN","return",104],["T_WHITESPACE"," ",104],["T_VARIABLE","$this",104],";",["T_WHITESPACE","\n    ",104],"}",["T_WHITESPACE","\n\n    ",105],["T_DOC_COMMENT","\/**\n     * Perform checks before role delete\n     *\n     * @return Mage_Api2_Model_Acl_Global_Role\n     *\/",107],["T_WHITESPACE","\n    ",111],["T_PROTECTED","protected",112],["T_WHITESPACE"," ",112],["T_FUNCTION","function",112],["T_WHITESPACE"," ",112],["T_STRING","_beforeDelete",112],"(",")",["T_WHITESPACE","\n    ",112],"{",["T_WHITESPACE","\n        ",113],["T_IF","if",114],["T_WHITESPACE"," ",114],"(",["T_STRING","Mage_Api2_Model_Acl_Global_Role",114],["T_DOUBLE_COLON","::",114],["T_STRING","isSystemRole",114],"(",["T_VARIABLE","$this",114],")",")",["T_WHITESPACE"," ",114],"{",["T_WHITESPACE","\n            ",114],["T_DOC_COMMENT","\/** @var $helper Mage_Core_Helper_Data *\/",115],["T_WHITESPACE","\n            ",115],["T_VARIABLE","$helper",116],["T_WHITESPACE"," ",116],"=",["T_WHITESPACE"," ",116],["T_STRING","Mage",116],["T_DOUBLE_COLON","::",116],["T_STRING","helper",116],"(",["T_CONSTANT_ENCAPSED_STRING","'core'",116],")",";",["T_WHITESPACE","\n\n            ",116],["T_STRING","Mage",118],["T_DOUBLE_COLON","::",118],["T_STRING","throwException",118],"(",["T_WHITESPACE","\n                ",118],["T_STRING","Mage",119],["T_DOUBLE_COLON","::",119],["T_STRING","helper",119],"(",["T_CONSTANT_ENCAPSED_STRING","'api2'",119],")",["T_OBJECT_OPERATOR","->",119],["T_STRING","__",119],"(",["T_CONSTANT_ENCAPSED_STRING","'%s role is a special one and can\\'t be deleted.'",119],",",["T_WHITESPACE"," ",119],["T_VARIABLE","$helper",119],["T_OBJECT_OPERATOR","->",119],["T_STRING","escapeHtml",119],"(",["T_VARIABLE","$this",119],["T_OBJECT_OPERATOR","->",119],["T_STRING","getRoleName",119],"(",")",")",")",["T_WHITESPACE","\n            ",119],")",";",["T_WHITESPACE","\n        ",120],"}",["T_WHITESPACE","\n\n        ",121],["T_STRING","parent",123],["T_DOUBLE_COLON","::",123],["T_STRING","_beforeDelete",123],"(",")",";",["T_WHITESPACE","\n        ",123],["T_RETURN","return",124],["T_WHITESPACE"," ",124],["T_VARIABLE","$this",124],";",["T_WHITESPACE","\n    ",124],"}",["T_WHITESPACE","\n\n    ",125],["T_DOC_COMMENT","\/**\n     * Get pairs resources-permissions for current role\n     *\n     * @return Mage_Api2_Model_Acl_Global_Rule_ResourcePermission\n     *\/",127],["T_WHITESPACE","\n    ",131],["T_PUBLIC","public",132],["T_WHITESPACE"," ",132],["T_FUNCTION","function",132],["T_WHITESPACE"," ",132],["T_STRING","getPermissionModel",132],"(",")",["T_WHITESPACE","\n    ",132],"{",["T_WHITESPACE","\n        ",133],["T_IF","if",134],["T_WHITESPACE"," ",134],"(",["T_STRING","null",134],["T_WHITESPACE"," ",134],["T_IS_EQUAL","==",134],["T_WHITESPACE"," ",134],["T_VARIABLE","$this",134],["T_OBJECT_OPERATOR","->",134],["T_STRING","_permissionModel",134],")",["T_WHITESPACE"," ",134],"{",["T_WHITESPACE","\n            ",134],["T_VARIABLE","$this",135],["T_OBJECT_OPERATOR","->",135],["T_STRING","_permissionModel",135],["T_WHITESPACE"," ",135],"=",["T_WHITESPACE"," ",135],["T_STRING","Mage",135],["T_DOUBLE_COLON","::",135],["T_STRING","getModel",135],"(",["T_CONSTANT_ENCAPSED_STRING","'api2\/acl_global_rule_resourcePermission'",135],")",";",["T_WHITESPACE","\n        ",135],"}",["T_WHITESPACE","\n        ",136],["T_RETURN","return",137],["T_WHITESPACE"," ",137],["T_VARIABLE","$this",137],["T_OBJECT_OPERATOR","->",137],["T_STRING","_permissionModel",137],";",["T_WHITESPACE","\n    ",137],"}",["T_WHITESPACE","\n\n    ",138],["T_DOC_COMMENT","\/**\n     * Retrieve system roles\n     *\n     * @return array\n     *\/",140],["T_WHITESPACE","\n    ",144],["T_STATIC","static",145],["T_WHITESPACE"," ",145],["T_PUBLIC","public",145],["T_WHITESPACE"," ",145],["T_FUNCTION","function",145],["T_WHITESPACE"," ",145],["T_STRING","getSystemRoles",145],"(",")",["T_WHITESPACE","\n    ",145],"{",["T_WHITESPACE","\n        ",146],["T_RETURN","return",147],["T_WHITESPACE"," ",147],["T_ARRAY","array",147],"(",["T_WHITESPACE","\n            ",147],["T_STRING","self",148],["T_DOUBLE_COLON","::",148],["T_STRING","ROLE_GUEST_ID",148],",",["T_WHITESPACE","\n            ",148],["T_STRING","self",149],["T_DOUBLE_COLON","::",149],["T_STRING","ROLE_CUSTOMER_ID",149],["T_WHITESPACE","\n        ",149],")",";",["T_WHITESPACE","\n    ",150],"}",["T_WHITESPACE","\n\n    ",151],["T_DOC_COMMENT","\/**\n     * Get role system belonging\n     *\n     * @param Mage_Api2_Model_Acl_Global_Role $role\n     * @return bool\n     *\/",153],["T_WHITESPACE","\n    ",158],["T_PUBLIC","public",159],["T_WHITESPACE"," ",159],["T_STATIC","static",159],["T_WHITESPACE"," ",159],["T_FUNCTION","function",159],["T_WHITESPACE"," ",159],["T_STRING","isSystemRole",159],"(",["T_VARIABLE","$role",159],")",["T_WHITESPACE","\n    ",159],"{",["T_WHITESPACE","\n        ",160],["T_RETURN","return",161],["T_WHITESPACE"," ",161],["T_STRING","in_array",161],"(",["T_VARIABLE","$role",161],["T_OBJECT_OPERATOR","->",161],["T_STRING","getId",161],"(",")",",",["T_WHITESPACE"," ",161],["T_STRING","self",161],["T_DOUBLE_COLON","::",161],["T_STRING","getSystemRoles",161],"(",")",")",";",["T_WHITESPACE","\n    ",161],"}",["T_WHITESPACE","\n\n    ",162],["T_DOC_COMMENT","\/**\n     * Get config node identifiers\n     *\n     * @return string\n     *\/",164],["T_WHITESPACE","\n    ",168],["T_PUBLIC","public",169],["T_WHITESPACE"," ",169],["T_FUNCTION","function",169],["T_WHITESPACE"," ",169],["T_STRING","getConfigNodeName",169],"(",")",["T_WHITESPACE","\n    ",169],"{",["T_WHITESPACE","\n        ",170],["T_SWITCH","switch",171],["T_WHITESPACE"," ",171],"(",["T_VARIABLE","$this",171],["T_OBJECT_OPERATOR","->",171],["T_STRING","getId",171],"(",")",")",["T_WHITESPACE"," ",171],"{",["T_WHITESPACE","\n            ",171],["T_CASE","case",172],["T_WHITESPACE"," ",172],["T_STRING","self",172],["T_DOUBLE_COLON","::",172],["T_STRING","ROLE_GUEST_ID",172],":",["T_WHITESPACE","\n                ",172],["T_VARIABLE","$roleNodeName",173],["T_WHITESPACE"," ",173],"=",["T_WHITESPACE"," ",173],["T_STRING","self",173],["T_DOUBLE_COLON","::",173],["T_STRING","ROLE_CONFIG_NODE_NAME_GUEST",173],";",["T_WHITESPACE","\n                ",173],["T_BREAK","break",174],";",["T_WHITESPACE","\n            ",174],["T_CASE","case",175],["T_WHITESPACE"," ",175],["T_STRING","self",175],["T_DOUBLE_COLON","::",175],["T_STRING","ROLE_CUSTOMER_ID",175],":",["T_WHITESPACE","\n                ",175],["T_VARIABLE","$roleNodeName",176],["T_WHITESPACE"," ",176],"=",["T_WHITESPACE"," ",176],["T_STRING","self",176],["T_DOUBLE_COLON","::",176],["T_STRING","ROLE_CONFIG_NODE_NAME_CUSTOMER",176],";",["T_WHITESPACE","\n                ",176],["T_BREAK","break",177],";",["T_WHITESPACE","\n            ",177],["T_DEFAULT","default",178],":",["T_WHITESPACE","\n                ",178],["T_VARIABLE","$roleNodeName",179],["T_WHITESPACE"," ",179],"=",["T_WHITESPACE"," ",179],["T_STRING","self",179],["T_DOUBLE_COLON","::",179],["T_STRING","ROLE_CONFIG_NODE_NAME_ADMIN",179],";",["T_WHITESPACE","\n        ",179],"}",["T_WHITESPACE","\n        ",180],["T_RETURN","return",181],["T_WHITESPACE"," ",181],["T_VARIABLE","$roleNodeName",181],";",["T_WHITESPACE","\n    ",181],"}",["T_WHITESPACE","\n",182],"}",["T_WHITESPACE","\n",183]]
[["T_OPEN_TAG","<?php\n",1],["T_DOC_COMMENT","\/**\n * Magento\n *\n * NOTICE OF LICENSE\n *\n * This source file is subject to the Open Software License (OSL 3.0)\n * that is bundled with this package in the file LICENSE.txt.\n * It is also available through the world-wide-web at this URL:\n * http:\/\/opensource.org\/licenses\/osl-3.0.php\n * If you did not receive a copy of the license and are unable to\n * obtain it through the world-wide-web, please send an email\n * to license@magento.com so we can send you a copy immediately.\n *\n * DISCLAIMER\n *\n * Do not edit or add to this file if you wish to upgrade Magento to newer\n * versions in the future. If you wish to customize Magento for your\n * needs please refer to http:\/\/www.magento.com for more information.\n *\n * @category    Mage\n * @package     Mage_Api2\n * @copyright  Copyright (c) 2006-2016 X.commerce, Inc. and affiliates (http:\/\/www.magento.com)\n * @license    http:\/\/opensource.org\/licenses\/osl-3.0.php  Open Software License (OSL 3.0)\n *\/",2],["T_WHITESPACE","\n\n",25],["T_DOC_COMMENT","\/**\n * API Request model\n *\n * @category   Mage\n * @package    Mage_Api2\n * @author     Magento Core Team <core@magentocommerce.com>\n *\/",27],["T_WHITESPACE","\n",33],["T_CLASS","class",34],["T_WHITESPACE"," ",34],["T_STRING","Mage_Api2_Model_Request",34],["T_WHITESPACE"," ",34],["T_EXTENDS","extends",34],["T_WHITESPACE"," ",34],["T_STRING","Zend_Controller_Request_Http",34],["T_WHITESPACE","\n",34],"{",["T_WHITESPACE","\n    ",35],["T_DOC_COMMENT","\/**\n     * Character set which must be used in request\n     *\/",36],["T_WHITESPACE","\n    ",38],["T_CONST","const",39],["T_WHITESPACE"," ",39],["T_STRING","REQUEST_CHARSET",39],["T_WHITESPACE"," ",39],"=",["T_WHITESPACE"," ",39],["T_CONSTANT_ENCAPSED_STRING","'utf-8'",39],";",["T_WHITESPACE","\n\n    ",39],["T_COMMENT","\/**#@+\n     * Name of query ($_GET) parameters to use in navigation and so on\n     *\/",41],["T_WHITESPACE","\n    ",43],["T_CONST","const",44],["T_WHITESPACE"," ",44],["T_STRING","QUERY_PARAM_REQ_ATTRS",44],["T_WHITESPACE","   ",44],"=",["T_WHITESPACE"," ",44],["T_CONSTANT_ENCAPSED_STRING","'attrs'",44],";",["T_WHITESPACE","\n    ",44],["T_CONST","const",45],["T_WHITESPACE"," ",45],["T_STRING","QUERY_PARAM_PAGE_NUM",45],["T_WHITESPACE","    ",45],"=",["T_WHITESPACE"," ",45],["T_CONSTANT_ENCAPSED_STRING","'page'",45],";",["T_WHITESPACE","\n    ",45],["T_CONST","const",46],["T_WHITESPACE"," ",46],["T_STRING","QUERY_PARAM_PAGE_SIZE",46],["T_WHITESPACE","   ",46],"=",["T_WHITESPACE"," ",46],["T_CONSTANT_ENCAPSED_STRING","'limit'",46],";",["T_WHITESPACE","\n    ",46],["T_CONST","const",47],["T_WHITESPACE"," ",47],["T_STRING","QUERY_PARAM_ORDER_FIELD",47],["T_WHITESPACE"," ",47],"=",["T_WHITESPACE"," ",47],["T_CONSTANT_ENCAPSED_STRING","'order'",47],";",["T_WHITESPACE","\n    ",47],["T_CONST","const",48],["T_WHITESPACE"," ",48],["T_STRING","QUERY_PARAM_ORDER_DIR",48],["T_WHITESPACE","   ",48],"=",["T_WHITESPACE"," ",48],["T_CONSTANT_ENCAPSED_STRING","'dir'",48],";",["T_WHITESPACE","\n    ",48],["T_CONST","const",49],["T_WHITESPACE"," ",49],["T_STRING","QUERY_PARAM_FILTER",49],["T_WHITESPACE","      ",49],"=",["T_WHITESPACE"," ",49],["T_CONSTANT_ENCAPSED_STRING","'filter'",49],";",["T_WHITESPACE","\n    ",49],["T_COMMENT","\/**#@- *\/",50],["T_WHITESPACE","\n\n    ",50],["T_DOC_COMMENT","\/**\n     * Interpreter adapter\n     *\n     * @var Mage_Api2_Model_Request_Interpreter_Interface\n     *\/",52],["T_WHITESPACE","\n    ",56],["T_PROTECTED","protected",57],["T_WHITESPACE"," ",57],["T_VARIABLE","$_interpreter",57],";",["T_WHITESPACE","\n\n    ",57],["T_DOC_COMMENT","\/**\n     * Body params\n     *\n     * @var array\n     *\/",59],["T_WHITESPACE","\n    ",63],["T_PROTECTED","protected",64],["T_WHITESPACE"," ",64],["T_VARIABLE","$_bodyParams",64],";",["T_WHITESPACE","\n\n    ",64],["T_DOC_COMMENT","\/**\n     * Constructor\n     *\n     * If a $uri is passed, the object will attempt to populate itself using\n     * that information.\n     * Override parent class to allow object instance get via Mage::getSingleton()\n     *\n     * @param string|Zend_Uri $uri\n     *\/",66],["T_WHITESPACE","\n    ",74],["T_PUBLIC","public",75],["T_WHITESPACE"," ",75],["T_FUNCTION","function",75],["T_WHITESPACE"," ",75],["T_STRING","__construct",75],"(",["T_VARIABLE","$uri",75],["T_WHITESPACE"," ",75],"=",["T_WHITESPACE"," ",75],["T_STRING","null",75],")",["T_WHITESPACE","\n    ",75],"{",["T_WHITESPACE","\n        ",76],["T_STRING","parent",77],["T_DOUBLE_COLON","::",77],["T_STRING","__construct",77],"(",["T_VARIABLE","$uri",77],["T_WHITESPACE"," ",77],"?",["T_WHITESPACE"," ",77],["T_VARIABLE","$uri",77],["T_WHITESPACE"," ",77],":",["T_WHITESPACE"," ",77],["T_STRING","null",77],")",";",["T_WHITESPACE","\n    ",77],"}",["T_WHITESPACE","\n\n    ",78],["T_DOC_COMMENT","\/**\n     * Get request interpreter\n     *\n     * @return Mage_Api2_Model_Request_Interpreter_Interface\n     *\/",80],["T_WHITESPACE","\n    ",84],["T_PROTECTED","protected",85],["T_WHITESPACE"," ",85],["T_FUNCTION","function",85],["T_WHITESPACE"," ",85],["T_STRING","_getInterpreter",85],"(",")",["T_WHITESPACE","\n    ",85],"{",["T_WHITESPACE","\n        ",86],["T_IF","if",87],["T_WHITESPACE"," ",87],"(",["T_STRING","null",87],["T_WHITESPACE"," ",87],["T_IS_IDENTICAL","===",87],["T_WHITESPACE"," ",87],["T_VARIABLE","$this",87],["T_OBJECT_OPERATOR","->",87],["T_STRING","_interpreter",87],")",["T_WHITESPACE"," ",87],"{",["T_WHITESPACE","\n            ",87],["T_VARIABLE","$this",88],["T_OBJECT_OPERATOR","->",88],["T_STRING","_interpreter",88],["T_WHITESPACE"," ",88],"=",["T_WHITESPACE"," ",88],["T_STRING","Mage_Api2_Model_Request_Interpreter",88],["T_DOUBLE_COLON","::",88],["T_STRING","factory",88],"(",["T_VARIABLE","$this",88],["T_OBJECT_OPERATOR","->",88],["T_STRING","getContentType",88],"(",")",")",";",["T_WHITESPACE","\n        ",88],"}",["T_WHITESPACE","\n        ",89],["T_RETURN","return",90],["T_WHITESPACE"," ",90],["T_VARIABLE","$this",90],["T_OBJECT_OPERATOR","->",90],["T_STRING","_interpreter",90],";",["T_WHITESPACE","\n    ",90],"}",["T_WHITESPACE","\n\n    ",91],["T_DOC_COMMENT","\/**\n     * Retrieve accept types understandable by requester in a form of array sorted by quality descending\n     *\n     * @return array\n     *\/",93],["T_WHITESPACE","\n    ",97],["T_PUBLIC","public",98],["T_WHITESPACE"," ",98],["T_FUNCTION","function",98],["T_WHITESPACE"," ",98],["T_STRING","getAcceptTypes",98],"(",")",["T_WHITESPACE","\n    ",98],"{",["T_WHITESPACE","\n        ",99],["T_VARIABLE","$qualityToTypes",100],["T_WHITESPACE"," ",100],"=",["T_WHITESPACE"," ",100],["T_ARRAY","array",100],"(",")",";",["T_WHITESPACE","\n        ",100],["T_VARIABLE","$orderedTypes",101],["T_WHITESPACE","   ",101],"=",["T_WHITESPACE"," ",101],["T_ARRAY","array",101],"(",")",";",["T_WHITESPACE","\n\n        ",101],["T_FOREACH","foreach",103],["T_WHITESPACE"," ",103],"(",["T_STRING","preg_split",103],"(",["T_CONSTANT_ENCAPSED_STRING","'\/,\\s*\/'",103],",",["T_WHITESPACE"," ",103],["T_VARIABLE","$this",103],["T_OBJECT_OPERATOR","->",103],["T_STRING","getHeader",103],"(",["T_CONSTANT_ENCAPSED_STRING","'Accept'",103],")",")",["T_WHITESPACE"," ",103],["T_AS","as",103],["T_WHITESPACE"," ",103],["T_VARIABLE","$definition",103],")",["T_WHITESPACE"," ",103],"{",["T_WHITESPACE","\n            ",103],["T_VARIABLE","$typeWithQ",104],["T_WHITESPACE"," ",104],"=",["T_WHITESPACE"," ",104],["T_STRING","explode",104],"(",["T_CONSTANT_ENCAPSED_STRING","';'",104],",",["T_WHITESPACE"," ",104],["T_VARIABLE","$definition",104],")",";",["T_WHITESPACE","\n            ",104],["T_VARIABLE","$mimeType",105],["T_WHITESPACE","  ",105],"=",["T_WHITESPACE"," ",105],["T_STRING","trim",105],"(",["T_STRING","array_shift",105],"(",["T_VARIABLE","$typeWithQ",105],")",")",";",["T_WHITESPACE","\n\n            ",105],["T_COMMENT","\/\/ check MIME type validity\n",107],["T_WHITESPACE","            ",108],["T_IF","if",108],["T_WHITESPACE"," ",108],"(","!",["T_STRING","preg_match",108],"(",["T_CONSTANT_ENCAPSED_STRING","'~^([0-9a-z*+\\-]+)(?:\/([0-9a-z*+\\-\\.]+))?$~i'",108],",",["T_WHITESPACE"," ",108],["T_VARIABLE","$mimeType",108],")",")",["T_WHITESPACE"," ",108],"{",["T_WHITESPACE","\n                ",108],["T_CONTINUE","continue",109],";",["T_WHITESPACE","\n            ",109],"}",["T_WHITESPACE","\n            ",110],["T_VARIABLE","$quality",111],["T_WHITESPACE"," ",111],"=",["T_WHITESPACE"," ",111],["T_CONSTANT_ENCAPSED_STRING","'1.0'",111],";",["T_WHITESPACE"," ",111],["T_COMMENT","\/\/ default value for quality\n",111],["T_WHITESPACE","\n            ",112],["T_IF","if",113],["T_WHITESPACE"," ",113],"(",["T_VARIABLE","$typeWithQ",113],")",["T_WHITESPACE"," ",113],"{",["T_WHITESPACE","\n                ",113],["T_VARIABLE","$qAndValue",114],["T_WHITESPACE"," ",114],"=",["T_WHITESPACE"," ",114],["T_STRING","explode",114],"(",["T_CONSTANT_ENCAPSED_STRING","'='",114],",",["T_WHITESPACE"," ",114],["T_VARIABLE","$typeWithQ",114],"[",["T_LNUMBER","0",114],"]",")",";",["T_WHITESPACE","\n\n                ",114],["T_IF","if",116],["T_WHITESPACE"," ",116],"(",["T_LNUMBER","2",116],["T_WHITESPACE"," ",116],["T_IS_EQUAL","==",116],["T_WHITESPACE"," ",116],["T_STRING","count",116],"(",["T_VARIABLE","$qAndValue",116],")",")",["T_WHITESPACE"," ",116],"{",["T_WHITESPACE","\n                    ",116],["T_VARIABLE","$quality",117],["T_WHITESPACE"," ",117],"=",["T_WHITESPACE"," ",117],["T_VARIABLE","$qAndValue",117],"[",["T_LNUMBER","1",117],"]",";",["T_WHITESPACE","\n                ",117],"}",["T_WHITESPACE","\n            ",118],"}",["T_WHITESPACE","\n            ",119],["T_VARIABLE","$qualityToTypes",120],"[",["T_VARIABLE","$quality",120],"]","[",["T_VARIABLE","$mimeType",120],"]",["T_WHITESPACE"," ",120],"=",["T_WHITESPACE"," ",120],["T_STRING","true",120],";",["T_WHITESPACE","\n        ",120],"}",["T_WHITESPACE","\n        ",121],["T_STRING","krsort",122],"(",["T_VARIABLE","$qualityToTypes",122],")",";",["T_WHITESPACE","\n\n        ",122],["T_FOREACH","foreach",124],["T_WHITESPACE"," ",124],"(",["T_VARIABLE","$qualityToTypes",124],["T_WHITESPACE"," ",124],["T_AS","as",124],["T_WHITESPACE"," ",124],["T_VARIABLE","$typeList",124],")",["T_WHITESPACE"," ",124],"{",["T_WHITESPACE","\n            ",124],["T_VARIABLE","$orderedTypes",125],["T_WHITESPACE"," ",125],["T_PLUS_EQUAL","+=",125],["T_WHITESPACE"," ",125],["T_VARIABLE","$typeList",125],";",["T_WHITESPACE","\n        ",125],"}",["T_WHITESPACE","\n        ",126],["T_RETURN","return",127],["T_WHITESPACE"," ",127],["T_STRING","array_keys",127],"(",["T_VARIABLE","$orderedTypes",127],")",";",["T_WHITESPACE","\n    ",127],"}",["T_WHITESPACE","\n\n    ",128],["T_DOC_COMMENT","\/**\n     * Get api type from Request\n     *\n     * @return string\n     *\/",130],["T_WHITESPACE","\n    ",134],["T_PUBLIC","public",135],["T_WHITESPACE"," ",135],["T_FUNCTION","function",135],["T_WHITESPACE"," ",135],["T_STRING","getApiType",135],"(",")",["T_WHITESPACE","\n    ",135],"{",["T_WHITESPACE","\n        ",136],["T_COMMENT","\/\/ getParam() is not used to avoid parameter fetch from $_GET or $_POST\n",137],["T_WHITESPACE","        ",138],["T_RETURN","return",138],["T_WHITESPACE"," ",138],["T_ISSET","isset",138],"(",["T_VARIABLE","$this",138],["T_OBJECT_OPERATOR","->",138],["T_STRING","_params",138],"[",["T_CONSTANT_ENCAPSED_STRING","'api_type'",138],"]",")",["T_WHITESPACE"," ",138],"?",["T_WHITESPACE"," ",138],["T_VARIABLE","$this",138],["T_OBJECT_OPERATOR","->",138],["T_STRING","_params",138],"[",["T_CONSTANT_ENCAPSED_STRING","'api_type'",138],"]",["T_WHITESPACE"," ",138],":",["T_WHITESPACE"," ",138],["T_STRING","null",138],";",["T_WHITESPACE","\n    ",138],"}",["T_WHITESPACE","\n\n    ",139],["T_DOC_COMMENT","\/**\n     * Fetch data from HTTP Request body\n     *\n     * @return array\n     *\/",141],["T_WHITESPACE","\n    ",145],["T_PUBLIC","public",146],["T_WHITESPACE"," ",146],["T_FUNCTION","function",146],["T_WHITESPACE"," ",146],["T_STRING","getBodyParams",146],"(",")",["T_WHITESPACE","\n    ",146],"{",["T_WHITESPACE","\n        ",147],["T_IF","if",148],["T_WHITESPACE"," ",148],"(",["T_STRING","null",148],["T_WHITESPACE"," ",148],["T_IS_EQUAL","==",148],["T_WHITESPACE"," ",148],["T_VARIABLE","$this",148],["T_OBJECT_OPERATOR","->",148],["T_STRING","_bodyParams",148],")",["T_WHITESPACE"," ",148],"{",["T_WHITESPACE","\n            ",148],["T_VARIABLE","$this",149],["T_OBJECT_OPERATOR","->",149],["T_STRING","_bodyParams",149],["T_WHITESPACE"," ",149],"=",["T_WHITESPACE"," ",149],["T_VARIABLE","$this",149],["T_OBJECT_OPERATOR","->",149],["T_STRING","_getInterpreter",149],"(",")",["T_OBJECT_OPERATOR","->",149],["T_STRING","interpret",149],"(",["T_STRING_CAST","(string)",149],["T_VARIABLE","$this",149],["T_OBJECT_OPERATOR","->",149],["T_STRING","getRawBody",149],"(",")",")",";",["T_WHITESPACE","\n        ",149],"}",["T_WHITESPACE","\n        ",150],["T_RETURN","return",151],["T_WHITESPACE"," ",151],["T_VARIABLE","$this",151],["T_OBJECT_OPERATOR","->",151],["T_STRING","_bodyParams",151],";",["T_WHITESPACE","\n    ",151],"}",["T_WHITESPACE","\n\n    ",152],["T_DOC_COMMENT","\/**\n     * Get Content-Type of request\n     *\n     * @return string\n     * @throws Mage_Api2_Exception\n     *\/",154],["T_WHITESPACE","\n    ",159],["T_PUBLIC","public",160],["T_WHITESPACE"," ",160],["T_FUNCTION","function",160],["T_WHITESPACE"," ",160],["T_STRING","getContentType",160],"(",")",["T_WHITESPACE","\n    ",160],"{",["T_WHITESPACE","\n        ",161],["T_VARIABLE","$headerValue",162],["T_WHITESPACE"," ",162],"=",["T_WHITESPACE"," ",162],["T_VARIABLE","$this",162],["T_OBJECT_OPERATOR","->",162],["T_STRING","getHeader",162],"(",["T_CONSTANT_ENCAPSED_STRING","'Content-Type'",162],")",";",["T_WHITESPACE","\n\n        ",162],["T_IF","if",164],["T_WHITESPACE"," ",164],"(","!",["T_VARIABLE","$headerValue",164],")",["T_WHITESPACE"," ",164],"{",["T_WHITESPACE","\n            ",164],["T_THROW","throw",165],["T_WHITESPACE"," ",165],["T_NEW","new",165],["T_WHITESPACE"," ",165],["T_STRING","Mage_Api2_Exception",165],"(",["T_CONSTANT_ENCAPSED_STRING","'Content-Type header is empty'",165],",",["T_WHITESPACE"," ",165],["T_STRING","Mage_Api2_Model_Server",165],["T_DOUBLE_COLON","::",165],["T_STRING","HTTP_BAD_REQUEST",165],")",";",["T_WHITESPACE","\n        ",165],"}",["T_WHITESPACE","\n        ",166],["T_IF","if",167],["T_WHITESPACE"," ",167],"(","!",["T_STRING","preg_match",167],"(",["T_CONSTANT_ENCAPSED_STRING","'~^([a-z\\d\/\\-+.]+)(?:; *charset=(.+))?$~Ui'",167],",",["T_WHITESPACE"," ",167],["T_VARIABLE","$headerValue",167],",",["T_WHITESPACE"," ",167],["T_VARIABLE","$matches",167],")",")",["T_WHITESPACE"," ",167],"{",["T_WHITESPACE","\n            ",167],["T_THROW","throw",168],["T_WHITESPACE"," ",168],["T_NEW","new",168],["T_WHITESPACE"," ",168],["T_STRING","Mage_Api2_Exception",168],"(",["T_CONSTANT_ENCAPSED_STRING","'Invalid Content-Type header'",168],",",["T_WHITESPACE"," ",168],["T_STRING","Mage_Api2_Model_Server",168],["T_DOUBLE_COLON","::",168],["T_STRING","HTTP_BAD_REQUEST",168],")",";",["T_WHITESPACE","\n        ",168],"}",["T_WHITESPACE","\n        ",169],["T_COMMENT","\/\/ request encoding check if it is specified in header\n",170],["T_WHITESPACE","        ",171],["T_IF","if",171],["T_WHITESPACE"," ",171],"(",["T_ISSET","isset",171],"(",["T_VARIABLE","$matches",171],"[",["T_LNUMBER","2",171],"]",")",["T_WHITESPACE"," ",171],["T_BOOLEAN_AND","&&",171],["T_WHITESPACE"," ",171],["T_STRING","self",171],["T_DOUBLE_COLON","::",171],["T_STRING","REQUEST_CHARSET",171],["T_WHITESPACE"," ",171],["T_IS_NOT_EQUAL","!=",171],["T_WHITESPACE"," ",171],["T_STRING","strtolower",171],"(",["T_VARIABLE","$matches",171],"[",["T_LNUMBER","2",171],"]",")",")",["T_WHITESPACE"," ",171],"{",["T_WHITESPACE","\n            ",171],["T_THROW","throw",172],["T_WHITESPACE"," ",172],["T_NEW","new",172],["T_WHITESPACE"," ",172],["T_STRING","Mage_Api2_Exception",172],"(",["T_WHITESPACE","\n                ",172],["T_CONSTANT_ENCAPSED_STRING","'UTF-8 is the only supported charset'",173],",",["T_WHITESPACE"," ",173],["T_STRING","Mage_Api2_Model_Server",173],["T_DOUBLE_COLON","::",173],["T_STRING","HTTP_BAD_REQUEST",173],["T_WHITESPACE","\n            ",173],")",";",["T_WHITESPACE","\n        ",174],"}",["T_WHITESPACE","\n        ",175],["T_RETURN","return",176],["T_WHITESPACE"," ",176],["T_VARIABLE","$matches",176],"[",["T_LNUMBER","1",176],"]",";",["T_WHITESPACE","\n    ",176],"}",["T_WHITESPACE","\n\n    ",177],["T_DOC_COMMENT","\/**\n     * Get filter settings passed by API user\n     *\n     * @return mixed\n     *\/",179],["T_WHITESPACE","\n    ",183],["T_PUBLIC","public",184],["T_WHITESPACE"," ",184],["T_FUNCTION","function",184],["T_WHITESPACE"," ",184],["T_STRING","getFilter",184],"(",")",["T_WHITESPACE","\n    ",184],"{",["T_WHITESPACE","\n        ",185],["T_RETURN","return",186],["T_WHITESPACE"," ",186],["T_VARIABLE","$this",186],["T_OBJECT_OPERATOR","->",186],["T_STRING","getQuery",186],"(",["T_STRING","self",186],["T_DOUBLE_COLON","::",186],["T_STRING","QUERY_PARAM_FILTER",186],")",";",["T_WHITESPACE","\n    ",186],"}",["T_WHITESPACE","\n\n    ",187],["T_DOC_COMMENT","\/**\n     * Get resource model class name\n     *\n     * @return string|null\n     *\/",189],["T_WHITESPACE","\n    ",193],["T_PUBLIC","public",194],["T_WHITESPACE"," ",194],["T_FUNCTION","function",194],["T_WHITESPACE"," ",194],["T_STRING","getModel",194],"(",")",["T_WHITESPACE","\n    ",194],"{",["T_WHITESPACE","\n        ",195],["T_COMMENT","\/\/ getParam() is not used to avoid parameter fetch from $_GET or $_POST\n",196],["T_WHITESPACE","        ",197],["T_RETURN","return",197],["T_WHITESPACE"," ",197],["T_ISSET","isset",197],"(",["T_VARIABLE","$this",197],["T_OBJECT_OPERATOR","->",197],["T_STRING","_params",197],"[",["T_CONSTANT_ENCAPSED_STRING","'model'",197],"]",")",["T_WHITESPACE"," ",197],"?",["T_WHITESPACE"," ",197],["T_VARIABLE","$this",197],["T_OBJECT_OPERATOR","->",197],["T_STRING","_params",197],"[",["T_CONSTANT_ENCAPSED_STRING","'model'",197],"]",["T_WHITESPACE"," ",197],":",["T_WHITESPACE"," ",197],["T_STRING","null",197],";",["T_WHITESPACE","\n    ",197],"}",["T_WHITESPACE","\n\n    ",198],["T_DOC_COMMENT","\/**\n     * Retrieve one of CRUD operation dependent on HTTP method\n     *\n     * @return string\n     * @throws Mage_Api2_Exception\n     *\/",200],["T_WHITESPACE","\n    ",205],["T_PUBLIC","public",206],["T_WHITESPACE"," ",206],["T_FUNCTION","function",206],["T_WHITESPACE"," ",206],["T_STRING","getOperation",206],"(",")",["T_WHITESPACE","\n    ",206],"{",["T_WHITESPACE","\n        ",207],["T_IF","if",208],["T_WHITESPACE"," ",208],"(","!",["T_VARIABLE","$this",208],["T_OBJECT_OPERATOR","->",208],["T_STRING","isGet",208],"(",")",["T_WHITESPACE"," ",208],["T_BOOLEAN_AND","&&",208],["T_WHITESPACE"," ",208],"!",["T_VARIABLE","$this",208],["T_OBJECT_OPERATOR","->",208],["T_STRING","isPost",208],"(",")",["T_WHITESPACE"," ",208],["T_BOOLEAN_AND","&&",208],["T_WHITESPACE"," ",208],"!",["T_VARIABLE","$this",208],["T_OBJECT_OPERATOR","->",208],["T_STRING","isPut",208],"(",")",["T_WHITESPACE"," ",208],["T_BOOLEAN_AND","&&",208],["T_WHITESPACE"," ",208],"!",["T_VARIABLE","$this",208],["T_OBJECT_OPERATOR","->",208],["T_STRING","isDelete",208],"(",")",")",["T_WHITESPACE"," ",208],"{",["T_WHITESPACE","\n            ",208],["T_THROW","throw",209],["T_WHITESPACE"," ",209],["T_NEW","new",209],["T_WHITESPACE"," ",209],["T_STRING","Mage_Api2_Exception",209],"(",["T_CONSTANT_ENCAPSED_STRING","'Invalid request method'",209],",",["T_WHITESPACE"," ",209],["T_STRING","Mage_Api2_Model_Server",209],["T_DOUBLE_COLON","::",209],["T_STRING","HTTP_BAD_REQUEST",209],")",";",["T_WHITESPACE","\n        ",209],"}",["T_WHITESPACE","\n        ",210],["T_COMMENT","\/\/ Map HTTP methods to classic CRUD verbs\n",211],["T_WHITESPACE","        ",212],["T_VARIABLE","$operationByMethod",212],["T_WHITESPACE"," ",212],"=",["T_WHITESPACE"," ",212],["T_ARRAY","array",212],"(",["T_WHITESPACE","\n            ",212],["T_CONSTANT_ENCAPSED_STRING","'GET'",213],["T_WHITESPACE","    ",213],["T_DOUBLE_ARROW","=>",213],["T_WHITESPACE"," ",213],["T_STRING","Mage_Api2_Model_Resource",213],["T_DOUBLE_COLON","::",213],["T_STRING","OPERATION_RETRIEVE",213],",",["T_WHITESPACE","\n            ",213],["T_CONSTANT_ENCAPSED_STRING","'POST'",214],["T_WHITESPACE","   ",214],["T_DOUBLE_ARROW","=>",214],["T_WHITESPACE"," ",214],["T_STRING","Mage_Api2_Model_Resource",214],["T_DOUBLE_COLON","::",214],["T_STRING","OPERATION_CREATE",214],",",["T_WHITESPACE","\n            ",214],["T_CONSTANT_ENCAPSED_STRING","'PUT'",215],["T_WHITESPACE","    ",215],["T_DOUBLE_ARROW","=>",215],["T_WHITESPACE"," ",215],["T_STRING","Mage_Api2_Model_Resource",215],["T_DOUBLE_COLON","::",215],["T_STRING","OPERATION_UPDATE",215],",",["T_WHITESPACE","\n            ",215],["T_CONSTANT_ENCAPSED_STRING","'DELETE'",216],["T_WHITESPACE"," ",216],["T_DOUBLE_ARROW","=>",216],["T_WHITESPACE"," ",216],["T_STRING","Mage_Api2_Model_Resource",216],["T_DOUBLE_COLON","::",216],["T_STRING","OPERATION_DELETE",216],["T_WHITESPACE","\n        ",216],")",";",["T_WHITESPACE","\n\n        ",217],["T_RETURN","return",219],["T_WHITESPACE"," ",219],["T_VARIABLE","$operationByMethod",219],"[",["T_VARIABLE","$this",219],["T_OBJECT_OPERATOR","->",219],["T_STRING","getMethod",219],"(",")","]",";",["T_WHITESPACE","\n    ",219],"}",["T_WHITESPACE","\n\n    ",220],["T_DOC_COMMENT","\/**\n     * Get sort order direction requested by API user\n     *\n     * @return mixed\n     *\/",222],["T_WHITESPACE","\n    ",226],["T_PUBLIC","public",227],["T_WHITESPACE"," ",227],["T_FUNCTION","function",227],["T_WHITESPACE"," ",227],["T_STRING","getOrderDirection",227],"(",")",["T_WHITESPACE","\n    ",227],"{",["T_WHITESPACE","\n        ",228],["T_RETURN","return",229],["T_WHITESPACE"," ",229],["T_VARIABLE","$this",229],["T_OBJECT_OPERATOR","->",229],["T_STRING","getQuery",229],"(",["T_STRING","self",229],["T_DOUBLE_COLON","::",229],["T_STRING","QUERY_PARAM_ORDER_DIR",229],")",";",["T_WHITESPACE","\n    ",229],"}",["T_WHITESPACE","\n\n    ",230],["T_DOC_COMMENT","\/**\n     * Get sort order field requested by API user\n     *\n     * @return mixed\n     *\/",232],["T_WHITESPACE","\n    ",236],["T_PUBLIC","public",237],["T_WHITESPACE"," ",237],["T_FUNCTION","function",237],["T_WHITESPACE"," ",237],["T_STRING","getOrderField",237],"(",")",["T_WHITESPACE","\n    ",237],"{",["T_WHITESPACE","\n        ",238],["T_RETURN","return",239],["T_WHITESPACE"," ",239],["T_VARIABLE","$this",239],["T_OBJECT_OPERATOR","->",239],["T_STRING","getQuery",239],"(",["T_STRING","self",239],["T_DOUBLE_COLON","::",239],["T_STRING","QUERY_PARAM_ORDER_FIELD",239],")",";",["T_WHITESPACE","\n    ",239],"}",["T_WHITESPACE","\n\n    ",240],["T_DOC_COMMENT","\/**\n     * Retrieve page number requested by API user\n     *\n     * @return mixed\n     *\/",242],["T_WHITESPACE","\n    ",246],["T_PUBLIC","public",247],["T_WHITESPACE"," ",247],["T_FUNCTION","function",247],["T_WHITESPACE"," ",247],["T_STRING","getPageNumber",247],"(",")",["T_WHITESPACE","\n    ",247],"{",["T_WHITESPACE","\n        ",248],["T_RETURN","return",249],["T_WHITESPACE"," ",249],["T_VARIABLE","$this",249],["T_OBJECT_OPERATOR","->",249],["T_STRING","getQuery",249],"(",["T_STRING","self",249],["T_DOUBLE_COLON","::",249],["T_STRING","QUERY_PARAM_PAGE_NUM",249],")",";",["T_WHITESPACE","\n    ",249],"}",["T_WHITESPACE","\n\n    ",250],["T_DOC_COMMENT","\/**\n     * Retrieve page size requested by API user\n     *\n     * @return mixed\n     *\/",252],["T_WHITESPACE","\n    ",256],["T_PUBLIC","public",257],["T_WHITESPACE"," ",257],["T_FUNCTION","function",257],["T_WHITESPACE"," ",257],["T_STRING","getPageSize",257],"(",")",["T_WHITESPACE","\n    ",257],"{",["T_WHITESPACE","\n        ",258],["T_RETURN","return",259],["T_WHITESPACE"," ",259],["T_VARIABLE","$this",259],["T_OBJECT_OPERATOR","->",259],["T_STRING","getQuery",259],"(",["T_STRING","self",259],["T_DOUBLE_COLON","::",259],["T_STRING","QUERY_PARAM_PAGE_SIZE",259],")",";",["T_WHITESPACE","\n    ",259],"}",["T_WHITESPACE","\n\n    ",260],["T_DOC_COMMENT","\/**\n     * Get an array of attribute codes requested by API user\n     *\n     * @return array\n     *\/",262],["T_WHITESPACE","\n    ",266],["T_PUBLIC","public",267],["T_WHITESPACE"," ",267],["T_FUNCTION","function",267],["T_WHITESPACE"," ",267],["T_STRING","getRequestedAttributes",267],"(",")",["T_WHITESPACE","\n    ",267],"{",["T_WHITESPACE","\n        ",268],["T_VARIABLE","$include",269],["T_WHITESPACE"," ",269],"=",["T_WHITESPACE"," ",269],["T_VARIABLE","$this",269],["T_OBJECT_OPERATOR","->",269],["T_STRING","getQuery",269],"(",["T_STRING","self",269],["T_DOUBLE_COLON","::",269],["T_STRING","QUERY_PARAM_REQ_ATTRS",269],",",["T_WHITESPACE"," ",269],["T_ARRAY","array",269],"(",")",")",";",["T_WHITESPACE","\n\n        ",269],["T_COMMENT","\/\/transform comma-separated list\n",271],["T_WHITESPACE","        ",272],["T_IF","if",272],["T_WHITESPACE"," ",272],"(","!",["T_STRING","is_array",272],"(",["T_VARIABLE","$include",272],")",")",["T_WHITESPACE"," ",272],"{",["T_WHITESPACE","\n            ",272],["T_VARIABLE","$include",273],["T_WHITESPACE"," ",273],"=",["T_WHITESPACE"," ",273],["T_STRING","explode",273],"(",["T_CONSTANT_ENCAPSED_STRING","','",273],",",["T_WHITESPACE"," ",273],["T_VARIABLE","$include",273],")",";",["T_WHITESPACE","\n        ",273],"}",["T_WHITESPACE","\n        ",274],["T_RETURN","return",275],["T_WHITESPACE"," ",275],["T_STRING","array_map",275],"(",["T_CONSTANT_ENCAPSED_STRING","'trim'",275],",",["T_WHITESPACE"," ",275],["T_VARIABLE","$include",275],")",";",["T_WHITESPACE","\n    ",275],"}",["T_WHITESPACE","\n\n    ",276],["T_DOC_COMMENT","\/**\n     * Retrieve resource type\n     *\n     * @return string\n     *\/",278],["T_WHITESPACE","\n    ",282],["T_PUBLIC","public",283],["T_WHITESPACE"," ",283],["T_FUNCTION","function",283],["T_WHITESPACE"," ",283],["T_STRING","getResourceType",283],"(",")",["T_WHITESPACE","\n    ",283],"{",["T_WHITESPACE","\n        ",284],["T_COMMENT","\/\/ getParam() is not used to avoid parameter fetch from $_GET or $_POST\n",285],["T_WHITESPACE","        ",286],["T_RETURN","return",286],["T_WHITESPACE"," ",286],["T_ISSET","isset",286],"(",["T_VARIABLE","$this",286],["T_OBJECT_OPERATOR","->",286],["T_STRING","_params",286],"[",["T_CONSTANT_ENCAPSED_STRING","'type'",286],"]",")",["T_WHITESPACE"," ",286],"?",["T_WHITESPACE"," ",286],["T_VARIABLE","$this",286],["T_OBJECT_OPERATOR","->",286],["T_STRING","_params",286],"[",["T_CONSTANT_ENCAPSED_STRING","'type'",286],"]",["T_WHITESPACE"," ",286],":",["T_WHITESPACE"," ",286],["T_STRING","null",286],";",["T_WHITESPACE","\n    ",286],"}",["T_WHITESPACE","\n\n    ",287],["T_DOC_COMMENT","\/**\n     * Get Version header from headers\n     *\n     * @return string\n     *\/",289],["T_WHITESPACE","\n    ",293],["T_PUBLIC","public",294],["T_WHITESPACE"," ",294],["T_FUNCTION","function",294],["T_WHITESPACE"," ",294],["T_STRING","getVersion",294],"(",")",["T_WHITESPACE","\n    ",294],"{",["T_WHITESPACE","\n        ",295],["T_RETURN","return",296],["T_WHITESPACE"," ",296],["T_VARIABLE","$this",296],["T_OBJECT_OPERATOR","->",296],["T_STRING","getHeader",296],"(",["T_CONSTANT_ENCAPSED_STRING","'Version'",296],")",";",["T_WHITESPACE","\n    ",296],"}",["T_WHITESPACE","\n\n    ",297],["T_DOC_COMMENT","\/**\n     * Retrieve action type\n     *\n     * @return string|null\n     *\/",299],["T_WHITESPACE","\n    ",303],["T_PUBLIC","public",304],["T_WHITESPACE"," ",304],["T_FUNCTION","function",304],["T_WHITESPACE"," ",304],["T_STRING","getActionType",304],"(",")",["T_WHITESPACE","\n    ",304],"{",["T_WHITESPACE","\n        ",305],["T_COMMENT","\/\/ getParam() is not used to avoid parameter fetch from $_GET or $_POST\n",306],["T_WHITESPACE","        ",307],["T_RETURN","return",307],["T_WHITESPACE"," ",307],["T_ISSET","isset",307],"(",["T_VARIABLE","$this",307],["T_OBJECT_OPERATOR","->",307],["T_STRING","_params",307],"[",["T_CONSTANT_ENCAPSED_STRING","'action_type'",307],"]",")",["T_WHITESPACE"," ",307],"?",["T_WHITESPACE"," ",307],["T_VARIABLE","$this",307],["T_OBJECT_OPERATOR","->",307],["T_STRING","_params",307],"[",["T_CONSTANT_ENCAPSED_STRING","'action_type'",307],"]",["T_WHITESPACE"," ",307],":",["T_WHITESPACE"," ",307],["T_STRING","null",307],";",["T_WHITESPACE","\n    ",307],"}",["T_WHITESPACE","\n\n    ",308],["T_DOC_COMMENT","\/**\n     * It checks if the array in the request body is an associative one.\n     * It is required for definition of the dynamic aaction type (multi or single)\n     *\n     * @return bool\n     *\/",310],["T_WHITESPACE","\n    ",315],["T_PUBLIC","public",316],["T_WHITESPACE"," ",316],["T_FUNCTION","function",316],["T_WHITESPACE"," ",316],["T_STRING","isAssocArrayInRequestBody",316],"(",")",["T_WHITESPACE","\n    ",316],"{",["T_WHITESPACE","\n        ",317],["T_VARIABLE","$params",318],["T_WHITESPACE"," ",318],"=",["T_WHITESPACE"," ",318],["T_VARIABLE","$this",318],["T_OBJECT_OPERATOR","->",318],["T_STRING","getBodyParams",318],"(",")",";",["T_WHITESPACE","\n        ",318],["T_IF","if",319],["T_WHITESPACE"," ",319],"(",["T_STRING","count",319],"(",["T_VARIABLE","$params",319],")",")",["T_WHITESPACE"," ",319],"{",["T_WHITESPACE","\n            ",319],["T_VARIABLE","$keys",320],["T_WHITESPACE"," ",320],"=",["T_WHITESPACE"," ",320],["T_STRING","array_keys",320],"(",["T_VARIABLE","$params",320],")",";",["T_WHITESPACE","\n            ",320],["T_RETURN","return",321],["T_WHITESPACE"," ",321],"!",["T_STRING","is_numeric",321],"(",["T_VARIABLE","$keys",321],"[",["T_LNUMBER","0",321],"]",")",";",["T_WHITESPACE","\n        ",321],"}",["T_WHITESPACE","\n        ",322],["T_RETURN","return",323],["T_WHITESPACE"," ",323],["T_STRING","false",323],";",["T_WHITESPACE","\n    ",323],"}",["T_WHITESPACE","\n",324],"}",["T_WHITESPACE","\n",325]]
[["T_OPEN_TAG","<?php\n",1],["T_DOC_COMMENT","\/**\n * Magento\n *\n * NOTICE OF LICENSE\n *\n * This source file is subject to the Open Software License (OSL 3.0)\n * that is bundled with this package in the file LICENSE.txt.\n * It is also available through the world-wide-web at this URL:\n * http:\/\/opensource.org\/licenses\/osl-3.0.php\n * If you did not receive a copy of the license and are unable to\n * obtain it through the world-wide-web, please send an email\n * to license@magento.com so we can send you a copy immediately.\n *\n * DISCLAIMER\n *\n * Do not edit or add to this file if you wish to upgrade Magento to newer\n * versions in the future. If you wish to customize Magento for your\n * needs please refer to http:\/\/www.magento.com for more information.\n *\n * @category    Mage\n * @package     Mage_Api2\n * @copyright  Copyright (c) 2006-2016 X.commerce, Inc. and affiliates (http:\/\/www.magento.com)\n * @license    http:\/\/opensource.org\/licenses\/osl-3.0.php  Open Software License (OSL 3.0)\n *\/",2],["T_WHITESPACE","\n\n",25],["T_DOC_COMMENT","\/**\n * Webservice API2 data helper\n *\n * @category   Mage\n * @package    Mage_Api2\n * @author     Magento Core Team <core@magentocommerce.com>\n *\/",27],["T_WHITESPACE","\n",33],["T_CLASS","class",34],["T_WHITESPACE"," ",34],["T_STRING","Mage_Api2_Helper_Data",34],["T_WHITESPACE"," ",34],["T_EXTENDS","extends",34],["T_WHITESPACE"," ",34],["T_STRING","Mage_Core_Helper_Abstract",34],["T_WHITESPACE","\n",34],"{",["T_WHITESPACE","\n    ",35],["T_DOC_COMMENT","\/**\n     * Request interpret adapters\n     *\/",36],["T_WHITESPACE","\n    ",38],["T_CONST","const",39],["T_WHITESPACE"," ",39],["T_STRING","XML_PATH_API2_REQUEST_INTERPRETERS",39],["T_WHITESPACE"," ",39],"=",["T_WHITESPACE"," ",39],["T_CONSTANT_ENCAPSED_STRING","'global\/api2\/request\/interpreters'",39],";",["T_WHITESPACE","\n\n    ",39],["T_DOC_COMMENT","\/**\n     * Response render adapters\n     *\/",41],["T_WHITESPACE","\n    ",43],["T_CONST","const",44],["T_WHITESPACE"," ",44],["T_STRING","XML_PATH_API2_RESPONSE_RENDERS",44],["T_WHITESPACE","     ",44],"=",["T_WHITESPACE"," ",44],["T_CONSTANT_ENCAPSED_STRING","'global\/api2\/response\/renders'",44],";",["T_WHITESPACE","\n\n    ",44],["T_COMMENT","\/**#@+\n     * Config paths\n     *\/",46],["T_WHITESPACE","\n    ",48],["T_CONST","const",49],["T_WHITESPACE"," ",49],["T_STRING","XML_PATH_AUTH_ADAPTERS",49],["T_WHITESPACE"," ",49],"=",["T_WHITESPACE"," ",49],["T_CONSTANT_ENCAPSED_STRING","'global\/api2\/auth_adapters'",49],";",["T_WHITESPACE","\n    ",49],["T_CONST","const",50],["T_WHITESPACE"," ",50],["T_STRING","XML_PATH_USER_TYPES",50],["T_WHITESPACE","    ",50],"=",["T_WHITESPACE"," ",50],["T_CONSTANT_ENCAPSED_STRING","'global\/api2\/user_types'",50],";",["T_WHITESPACE","\n    ",50],["T_COMMENT","\/**#@- *\/",51],["T_WHITESPACE","\n\n    ",51],["T_DOC_COMMENT","\/**\n     * Compare order to be used in adapters list sort\n     *\n     * @param int $a\n     * @param int $b\n     * @return int\n     *\/",53],["T_WHITESPACE","\n    ",59],["T_PROTECTED","protected",60],["T_WHITESPACE"," ",60],["T_STATIC","static",60],["T_WHITESPACE"," ",60],["T_FUNCTION","function",60],["T_WHITESPACE"," ",60],["T_STRING","_compareOrder",60],"(",["T_VARIABLE","$a",60],",",["T_WHITESPACE"," ",60],["T_VARIABLE","$b",60],")",["T_WHITESPACE","\n    ",60],"{",["T_WHITESPACE","\n        ",61],["T_IF","if",62],["T_WHITESPACE"," ",62],"(",["T_VARIABLE","$a",62],"[",["T_CONSTANT_ENCAPSED_STRING","'order'",62],"]",["T_WHITESPACE"," ",62],["T_IS_EQUAL","==",62],["T_WHITESPACE"," ",62],["T_VARIABLE","$b",62],"[",["T_CONSTANT_ENCAPSED_STRING","'order'",62],"]",")",["T_WHITESPACE"," ",62],"{",["T_WHITESPACE","\n            ",62],["T_RETURN","return",63],["T_WHITESPACE"," ",63],["T_LNUMBER","0",63],";",["T_WHITESPACE","\n        ",63],"}",["T_WHITESPACE","\n        ",64],["T_RETURN","return",65],["T_WHITESPACE"," ",65],"(",["T_VARIABLE","$a",65],"[",["T_CONSTANT_ENCAPSED_STRING","'order'",65],"]",["T_WHITESPACE"," ",65],"<",["T_WHITESPACE"," ",65],["T_VARIABLE","$b",65],"[",["T_CONSTANT_ENCAPSED_STRING","'order'",65],"]",")",["T_WHITESPACE"," ",65],"?",["T_WHITESPACE"," ",65],"-",["T_LNUMBER","1",65],["T_WHITESPACE"," ",65],":",["T_WHITESPACE"," ",65],["T_LNUMBER","1",65],";",["T_WHITESPACE","\n    ",65],"}",["T_WHITESPACE","\n\n    ",66],["T_DOC_COMMENT","\/**\n     * Retrieve Auth adapters info from configuration file as array\n     *\n     * @param bool $enabledOnly\n     * @return array\n     *\/",68],["T_WHITESPACE","\n    ",73],["T_PUBLIC","public",74],["T_WHITESPACE"," ",74],["T_FUNCTION","function",74],["T_WHITESPACE"," ",74],["T_STRING","getAuthAdapters",74],"(",["T_VARIABLE","$enabledOnly",74],["T_WHITESPACE"," ",74],"=",["T_WHITESPACE"," ",74],["T_STRING","false",74],")",["T_WHITESPACE","\n    ",74],"{",["T_WHITESPACE","\n        ",75],["T_VARIABLE","$adapters",76],["T_WHITESPACE"," ",76],"=",["T_WHITESPACE"," ",76],["T_STRING","Mage",76],["T_DOUBLE_COLON","::",76],["T_STRING","getConfig",76],"(",")",["T_OBJECT_OPERATOR","->",76],["T_STRING","getNode",76],"(",["T_STRING","self",76],["T_DOUBLE_COLON","::",76],["T_STRING","XML_PATH_AUTH_ADAPTERS",76],")",";",["T_WHITESPACE","\n\n        ",76],["T_IF","if",78],["T_WHITESPACE"," ",78],"(","!",["T_VARIABLE","$adapters",78],")",["T_WHITESPACE"," ",78],"{",["T_WHITESPACE","\n            ",78],["T_RETURN","return",79],["T_WHITESPACE"," ",79],["T_ARRAY","array",79],"(",")",";",["T_WHITESPACE","\n        ",79],"}",["T_WHITESPACE","\n        ",80],["T_VARIABLE","$adapters",81],["T_WHITESPACE"," ",81],"=",["T_WHITESPACE"," ",81],["T_VARIABLE","$adapters",81],["T_OBJECT_OPERATOR","->",81],["T_STRING","asArray",81],"(",")",";",["T_WHITESPACE","\n\n        ",81],["T_IF","if",83],["T_WHITESPACE"," ",83],"(",["T_VARIABLE","$enabledOnly",83],")",["T_WHITESPACE"," ",83],"{",["T_WHITESPACE","\n            ",83],["T_FOREACH","foreach",84],["T_WHITESPACE"," ",84],"(",["T_VARIABLE","$adapters",84],["T_WHITESPACE"," ",84],["T_AS","as",84],["T_WHITESPACE"," ",84],["T_VARIABLE","$adapter",84],")",["T_WHITESPACE"," ",84],"{",["T_WHITESPACE","\n                ",84],["T_IF","if",85],["T_WHITESPACE"," ",85],"(",["T_EMPTY","empty",85],"(",["T_VARIABLE","$adapter",85],"[",["T_CONSTANT_ENCAPSED_STRING","'enabled'",85],"]",")",")",["T_WHITESPACE"," ",85],"{",["T_WHITESPACE","\n                    ",85],["T_UNSET","unset",86],"(",["T_VARIABLE","$adapters",86],")",";",["T_WHITESPACE","\n                ",86],"}",["T_WHITESPACE","\n            ",87],"}",["T_WHITESPACE","\n            ",88],["T_VARIABLE","$adapters",89],["T_WHITESPACE"," ",89],"=",["T_WHITESPACE"," ",89],["T_ARRAY_CAST","(array)",89],["T_WHITESPACE"," ",89],["T_VARIABLE","$adapters",89],";",["T_WHITESPACE","\n        ",89],"}",["T_WHITESPACE","\n        ",90],["T_STRING","uasort",91],"(",["T_VARIABLE","$adapters",91],",",["T_WHITESPACE"," ",91],["T_ARRAY","array",91],"(",["T_CONSTANT_ENCAPSED_STRING","'Mage_Api2_Helper_Data'",91],",",["T_WHITESPACE"," ",91],["T_CONSTANT_ENCAPSED_STRING","'_compareOrder'",91],")",")",";",["T_WHITESPACE","\n\n        ",91],["T_RETURN","return",93],["T_WHITESPACE"," ",93],["T_VARIABLE","$adapters",93],";",["T_WHITESPACE","\n    ",93],"}",["T_WHITESPACE","\n\n    ",94],["T_DOC_COMMENT","\/**\n     * Retrieve enabled user types in form of user type => user model pairs\n     *\n     * @return array\n     *\/",96],["T_WHITESPACE","\n    ",100],["T_PUBLIC","public",101],["T_WHITESPACE"," ",101],["T_FUNCTION","function",101],["T_WHITESPACE"," ",101],["T_STRING","getUserTypes",101],"(",")",["T_WHITESPACE","\n    ",101],"{",["T_WHITESPACE","\n        ",102],["T_VARIABLE","$userModels",103],["T_WHITESPACE"," ",103],"=",["T_WHITESPACE"," ",103],["T_ARRAY","array",103],"(",")",";",["T_WHITESPACE","\n        ",103],["T_VARIABLE","$types",104],["T_WHITESPACE"," ",104],"=",["T_WHITESPACE"," ",104],["T_STRING","Mage",104],["T_DOUBLE_COLON","::",104],["T_STRING","getConfig",104],"(",")",["T_OBJECT_OPERATOR","->",104],["T_STRING","getNode",104],"(",["T_STRING","self",104],["T_DOUBLE_COLON","::",104],["T_STRING","XML_PATH_USER_TYPES",104],")",";",["T_WHITESPACE","\n\n        ",104],["T_IF","if",106],["T_WHITESPACE"," ",106],"(",["T_VARIABLE","$types",106],")",["T_WHITESPACE"," ",106],"{",["T_WHITESPACE","\n            ",106],["T_FOREACH","foreach",107],["T_WHITESPACE"," ",107],"(",["T_VARIABLE","$types",107],["T_OBJECT_OPERATOR","->",107],["T_STRING","asArray",107],"(",")",["T_WHITESPACE"," ",107],["T_AS","as",107],["T_WHITESPACE"," ",107],["T_VARIABLE","$type",107],["T_WHITESPACE"," ",107],["T_DOUBLE_ARROW","=>",107],["T_WHITESPACE"," ",107],["T_VARIABLE","$params",107],")",["T_WHITESPACE"," ",107],"{",["T_WHITESPACE","\n                ",107],["T_IF","if",108],["T_WHITESPACE"," ",108],"(","!",["T_EMPTY","empty",108],"(",["T_VARIABLE","$params",108],"[",["T_CONSTANT_ENCAPSED_STRING","'allowed'",108],"]",")",")",["T_WHITESPACE"," ",108],"{",["T_WHITESPACE","\n                    ",108],["T_VARIABLE","$userModels",109],"[",["T_VARIABLE","$type",109],"]",["T_WHITESPACE"," ",109],"=",["T_WHITESPACE"," ",109],["T_VARIABLE","$params",109],"[",["T_CONSTANT_ENCAPSED_STRING","'model'",109],"]",";",["T_WHITESPACE","\n                ",109],"}",["T_WHITESPACE","\n            ",110],"}",["T_WHITESPACE","\n        ",111],"}",["T_WHITESPACE","\n        ",112],["T_RETURN","return",113],["T_WHITESPACE"," ",113],["T_VARIABLE","$userModels",113],";",["T_WHITESPACE","\n    ",113],"}",["T_WHITESPACE","\n\n    ",114],["T_DOC_COMMENT","\/**\n     * Get interpreter type for Request body according to Content-type HTTP header\n     *\n     * @return array\n     *\/",116],["T_WHITESPACE","\n    ",120],["T_PUBLIC","public",121],["T_WHITESPACE"," ",121],["T_FUNCTION","function",121],["T_WHITESPACE"," ",121],["T_STRING","getRequestInterpreterAdapters",121],"(",")",["T_WHITESPACE","\n    ",121],"{",["T_WHITESPACE","\n        ",122],["T_RETURN","return",123],["T_WHITESPACE"," ",123],["T_ARRAY_CAST","(array)",123],["T_WHITESPACE"," ",123],["T_STRING","Mage",123],["T_DOUBLE_COLON","::",123],["T_STRING","app",123],"(",")",["T_OBJECT_OPERATOR","->",123],["T_STRING","getConfig",123],"(",")",["T_OBJECT_OPERATOR","->",123],["T_STRING","getNode",123],"(",["T_STRING","self",123],["T_DOUBLE_COLON","::",123],["T_STRING","XML_PATH_API2_REQUEST_INTERPRETERS",123],")",";",["T_WHITESPACE","\n    ",123],"}",["T_WHITESPACE","\n\n    ",124],["T_DOC_COMMENT","\/**\n     * Get interpreter type for Request body according to Content-type HTTP header\n     *\n     * @return array\n     *\/",126],["T_WHITESPACE","\n    ",130],["T_PUBLIC","public",131],["T_WHITESPACE"," ",131],["T_FUNCTION","function",131],["T_WHITESPACE"," ",131],["T_STRING","getResponseRenderAdapters",131],"(",")",["T_WHITESPACE","\n    ",131],"{",["T_WHITESPACE","\n        ",132],["T_RETURN","return",133],["T_WHITESPACE"," ",133],["T_ARRAY_CAST","(array)",133],["T_WHITESPACE"," ",133],["T_STRING","Mage",133],["T_DOUBLE_COLON","::",133],["T_STRING","app",133],"(",")",["T_OBJECT_OPERATOR","->",133],["T_STRING","getConfig",133],"(",")",["T_OBJECT_OPERATOR","->",133],["T_STRING","getNode",133],"(",["T_STRING","self",133],["T_DOUBLE_COLON","::",133],["T_STRING","XML_PATH_API2_RESPONSE_RENDERS",133],")",";",["T_WHITESPACE","\n    ",133],"}",["T_WHITESPACE","\n\n    ",134],["T_DOC_COMMENT","\/**\n     * Check API type support\n     *\n     * @param string $type\n     * @return bool\n     *\/",136],["T_WHITESPACE","\n    ",141],["T_PUBLIC","public",142],["T_WHITESPACE"," ",142],["T_FUNCTION","function",142],["T_WHITESPACE"," ",142],["T_STRING","isApiTypeSupported",142],"(",["T_VARIABLE","$type",142],")",["T_WHITESPACE","\n    ",142],"{",["T_WHITESPACE","\n        ",143],["T_RETURN","return",144],["T_WHITESPACE"," ",144],["T_STRING","in_array",144],"(",["T_VARIABLE","$type",144],",",["T_WHITESPACE"," ",144],["T_STRING","Mage_Api2_Model_Server",144],["T_DOUBLE_COLON","::",144],["T_STRING","getApiTypes",144],"(",")",")",";",["T_WHITESPACE","\n    ",144],"}",["T_WHITESPACE","\n\n    ",145],["T_DOC_COMMENT","\/**\n     * Get allowed attributes of a rule\n     *\n     * @param string $userType\n     * @param string $resourceId\n     * @param string $operation One of Mage_Api2_Model_Resource::OPERATION_ATTRIBUTE_... constant\n     * @return array\n     *\/",147],["T_WHITESPACE","\n    ",154],["T_PUBLIC","public",155],["T_WHITESPACE"," ",155],["T_FUNCTION","function",155],["T_WHITESPACE"," ",155],["T_STRING","getAllowedAttributes",155],"(",["T_VARIABLE","$userType",155],",",["T_WHITESPACE"," ",155],["T_VARIABLE","$resourceId",155],",",["T_WHITESPACE"," ",155],["T_VARIABLE","$operation",155],")",["T_WHITESPACE","\n    ",155],"{",["T_WHITESPACE","\n        ",156],["T_DOC_COMMENT","\/** @var $resource Mage_Api2_Model_Resource_Acl_Filter_Attribute *\/",157],["T_WHITESPACE","\n        ",157],["T_VARIABLE","$resource",158],["T_WHITESPACE"," ",158],"=",["T_WHITESPACE"," ",158],["T_STRING","Mage",158],["T_DOUBLE_COLON","::",158],["T_STRING","getResourceModel",158],"(",["T_CONSTANT_ENCAPSED_STRING","'api2\/acl_filter_attribute'",158],")",";",["T_WHITESPACE","\n\n        ",158],["T_VARIABLE","$attributes",160],["T_WHITESPACE"," ",160],"=",["T_WHITESPACE"," ",160],["T_VARIABLE","$resource",160],["T_OBJECT_OPERATOR","->",160],["T_STRING","getAllowedAttributes",160],"(",["T_VARIABLE","$userType",160],",",["T_WHITESPACE"," ",160],["T_VARIABLE","$resourceId",160],",",["T_WHITESPACE"," ",160],["T_VARIABLE","$operation",160],")",";",["T_WHITESPACE","\n\n        ",160],["T_RETURN","return",162],["T_WHITESPACE"," ",162],"(",["T_VARIABLE","$attributes",162],["T_WHITESPACE"," ",162],["T_IS_IDENTICAL","===",162],["T_WHITESPACE"," ",162],["T_STRING","false",162],["T_WHITESPACE"," ",162],["T_BOOLEAN_OR","||",162],["T_WHITESPACE"," ",162],["T_VARIABLE","$attributes",162],["T_WHITESPACE"," ",162],["T_IS_IDENTICAL","===",162],["T_WHITESPACE"," ",162],["T_STRING","null",162],["T_WHITESPACE"," ",162],"?",["T_WHITESPACE"," ",162],["T_ARRAY","array",162],"(",")",["T_WHITESPACE"," ",162],":",["T_WHITESPACE"," ",162],["T_STRING","explode",162],"(",["T_CONSTANT_ENCAPSED_STRING","','",162],",",["T_WHITESPACE"," ",162],["T_VARIABLE","$attributes",162],")",")",";",["T_WHITESPACE","\n    ",162],"}",["T_WHITESPACE","\n\n    ",163],["T_DOC_COMMENT","\/**\n     * Check if ALL attributes are allowed\n     *\n     * @param string $userType\n     * @return bool\n     *\/",165],["T_WHITESPACE","\n    ",170],["T_PUBLIC","public",171],["T_WHITESPACE"," ",171],["T_FUNCTION","function",171],["T_WHITESPACE"," ",171],["T_STRING","isAllAttributesAllowed",171],"(",["T_VARIABLE","$userType",171],")",["T_WHITESPACE","\n    ",171],"{",["T_WHITESPACE","\n        ",172],["T_DOC_COMMENT","\/** @var $resource Mage_Api2_Model_Resource_Acl_Filter_Attribute *\/",173],["T_WHITESPACE","\n        ",173],["T_VARIABLE","$resource",174],["T_WHITESPACE"," ",174],"=",["T_WHITESPACE"," ",174],["T_STRING","Mage",174],["T_DOUBLE_COLON","::",174],["T_STRING","getResourceModel",174],"(",["T_CONSTANT_ENCAPSED_STRING","'api2\/acl_filter_attribute'",174],")",";",["T_WHITESPACE","\n\n        ",174],["T_RETURN","return",176],["T_WHITESPACE"," ",176],["T_VARIABLE","$resource",176],["T_OBJECT_OPERATOR","->",176],["T_STRING","isAllAttributesAllowed",176],"(",["T_VARIABLE","$userType",176],")",";",["T_WHITESPACE","\n    ",176],"}",["T_WHITESPACE","\n\n    ",177],["T_DOC_COMMENT","\/**\n     * Get operation type for specified operation\n     *\n     * @param string $operation One of Mage_Api2_Model_Resource::OPERATION_... constant\n     * @return string One of Mage_Api2_Model_Resource::OPERATION_ATTRIBUTE_... constant\n     * @throws Exception\n     *\/",179],["T_WHITESPACE","\n    ",185],["T_PUBLIC","public",186],["T_WHITESPACE"," ",186],["T_FUNCTION","function",186],["T_WHITESPACE"," ",186],["T_STRING","getTypeOfOperation",186],"(",["T_VARIABLE","$operation",186],")",["T_WHITESPACE","\n    ",186],"{",["T_WHITESPACE","\n        ",187],["T_IF","if",188],["T_WHITESPACE"," ",188],"(",["T_STRING","Mage_Api2_Model_Resource",188],["T_DOUBLE_COLON","::",188],["T_STRING","OPERATION_RETRIEVE",188],["T_WHITESPACE"," ",188],["T_IS_IDENTICAL","===",188],["T_WHITESPACE"," ",188],["T_VARIABLE","$operation",188],")",["T_WHITESPACE"," ",188],"{",["T_WHITESPACE","\n            ",188],["T_RETURN","return",189],["T_WHITESPACE"," ",189],["T_STRING","Mage_Api2_Model_Resource",189],["T_DOUBLE_COLON","::",189],["T_STRING","OPERATION_ATTRIBUTE_READ",189],";",["T_WHITESPACE","\n        ",189],"}",["T_WHITESPACE"," ",190],["T_ELSEIF","elseif",190],["T_WHITESPACE"," ",190],"(",["T_STRING","Mage_Api2_Model_Resource",190],["T_DOUBLE_COLON","::",190],["T_STRING","OPERATION_CREATE",190],["T_WHITESPACE"," ",190],["T_IS_IDENTICAL","===",190],["T_WHITESPACE"," ",190],["T_VARIABLE","$operation",190],")",["T_WHITESPACE"," ",190],"{",["T_WHITESPACE","\n            ",190],["T_RETURN","return",191],["T_WHITESPACE"," ",191],["T_STRING","Mage_Api2_Model_Resource",191],["T_DOUBLE_COLON","::",191],["T_STRING","OPERATION_ATTRIBUTE_WRITE",191],";",["T_WHITESPACE","\n        ",191],"}",["T_WHITESPACE"," ",192],["T_ELSEIF","elseif",192],["T_WHITESPACE"," ",192],"(",["T_STRING","Mage_Api2_Model_Resource",192],["T_DOUBLE_COLON","::",192],["T_STRING","OPERATION_UPDATE",192],["T_WHITESPACE"," ",192],["T_IS_IDENTICAL","===",192],["T_WHITESPACE"," ",192],["T_VARIABLE","$operation",192],")",["T_WHITESPACE"," ",192],"{",["T_WHITESPACE","\n            ",192],["T_RETURN","return",193],["T_WHITESPACE"," ",193],["T_STRING","Mage_Api2_Model_Resource",193],["T_DOUBLE_COLON","::",193],["T_STRING","OPERATION_ATTRIBUTE_WRITE",193],";",["T_WHITESPACE","\n        ",193],"}",["T_WHITESPACE"," ",194],["T_ELSE","else",194],["T_WHITESPACE"," ",194],"{",["T_WHITESPACE","\n            ",194],["T_THROW","throw",195],["T_WHITESPACE"," ",195],["T_NEW","new",195],["T_WHITESPACE"," ",195],["T_STRING","Exception",195],"(",["T_CONSTANT_ENCAPSED_STRING","'Can not determine operation type'",195],")",";",["T_WHITESPACE","\n        ",195],"}",["T_WHITESPACE","\n    ",196],"}",["T_WHITESPACE","\n",197],"}",["T_WHITESPACE","\n",198]]
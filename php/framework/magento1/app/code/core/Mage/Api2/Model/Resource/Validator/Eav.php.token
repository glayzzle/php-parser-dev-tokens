[["T_OPEN_TAG","<?php\n",1],["T_DOC_COMMENT","\/**\n * Magento\n *\n * NOTICE OF LICENSE\n *\n * This source file is subject to the Open Software License (OSL 3.0)\n * that is bundled with this package in the file LICENSE.txt.\n * It is also available through the world-wide-web at this URL:\n * http:\/\/opensource.org\/licenses\/osl-3.0.php\n * If you did not receive a copy of the license and are unable to\n * obtain it through the world-wide-web, please send an email\n * to license@magento.com so we can send you a copy immediately.\n *\n * DISCLAIMER\n *\n * Do not edit or add to this file if you wish to upgrade Magento to newer\n * versions in the future. If you wish to customize Magento for your\n * needs please refer to http:\/\/www.magento.com for more information.\n *\n * @category    Mage\n * @package     Mage_Api2\n * @copyright  Copyright (c) 2006-2016 X.commerce, Inc. and affiliates (http:\/\/www.magento.com)\n * @license    http:\/\/opensource.org\/licenses\/osl-3.0.php  Open Software License (OSL 3.0)\n *\/",2],["T_WHITESPACE","\n\n",25],["T_DOC_COMMENT","\/**\n * API2 EAV Validator\n *\n * @category   Mage\n * @package    Mage_Api2\n * @author     Magento Core Team <core@magentocommerce.com>\n *\/",27],["T_WHITESPACE","\n",33],["T_CLASS","class",34],["T_WHITESPACE"," ",34],["T_STRING","Mage_Api2_Model_Resource_Validator_Eav",34],["T_WHITESPACE"," ",34],["T_EXTENDS","extends",34],["T_WHITESPACE"," ",34],["T_STRING","Mage_Api2_Model_Resource_Validator",34],["T_WHITESPACE","\n",34],"{",["T_WHITESPACE","\n    ",35],["T_DOC_COMMENT","\/**\n     * Config node key of current validator\n     *\/",36],["T_WHITESPACE","\n    ",38],["T_CONST","const",39],["T_WHITESPACE"," ",39],["T_STRING","CONFIG_NODE_KEY",39],["T_WHITESPACE"," ",39],"=",["T_WHITESPACE"," ",39],["T_CONSTANT_ENCAPSED_STRING","'eav'",39],";",["T_WHITESPACE","\n\n    ",39],["T_DOC_COMMENT","\/**\n     * Form path\n     *\n     * @var string\n     *\/",41],["T_WHITESPACE","\n    ",45],["T_PROTECTED","protected",46],["T_WHITESPACE"," ",46],["T_VARIABLE","$_formPath",46],";",["T_WHITESPACE","\n\n    ",46],["T_DOC_COMMENT","\/**\n     * Entity model\n     *\n     * @var Mage_Core_Model_Abstract\n     *\/",48],["T_WHITESPACE","\n    ",52],["T_PROTECTED","protected",53],["T_WHITESPACE"," ",53],["T_VARIABLE","$_entity",53],";",["T_WHITESPACE","\n\n    ",53],["T_DOC_COMMENT","\/**\n     * Form code\n     *\n     * @var string\n     *\/",55],["T_WHITESPACE","\n    ",59],["T_PROTECTED","protected",60],["T_WHITESPACE"," ",60],["T_VARIABLE","$_formCode",60],";",["T_WHITESPACE","\n\n    ",60],["T_DOC_COMMENT","\/**\n     * Eav form model\n     *\n     * @var Mage_Eav_Model_Form\n     *\/",62],["T_WHITESPACE","\n    ",66],["T_PROTECTED","protected",67],["T_WHITESPACE"," ",67],["T_VARIABLE","$_eavForm",67],";",["T_WHITESPACE","\n\n    ",67],["T_DOC_COMMENT","\/**\n     * Construct. Set all depends.\n     *\n     * Required parameteres for options:\n     * - resource\n     *\n     * @param array $options\n     * @throws Exception If passed parameter 'resource' is wrong\n     * @throws Exception If config parameter 'formPath' is empty\n     * @throws Exception If config parameter 'formCode' is empty\n     * @throws Exception If config parameter 'entity' is wrong\n     * @throws Exception If entity is not model\n     * @throws Exception If eav form is not found\n     *\/",69],["T_WHITESPACE","\n    ",82],["T_PUBLIC","public",83],["T_WHITESPACE"," ",83],["T_FUNCTION","function",83],["T_WHITESPACE"," ",83],["T_STRING","__construct",83],"(",["T_VARIABLE","$options",83],")",["T_WHITESPACE","\n    ",83],"{",["T_WHITESPACE","\n        ",84],["T_IF","if",85],["T_WHITESPACE"," ",85],"(","!",["T_ISSET","isset",85],"(",["T_VARIABLE","$options",85],"[",["T_CONSTANT_ENCAPSED_STRING","'resource'",85],"]",")",["T_WHITESPACE"," ",85],["T_BOOLEAN_OR","||",85],["T_WHITESPACE"," ",85],"!",["T_VARIABLE","$options",85],"[",["T_CONSTANT_ENCAPSED_STRING","'resource'",85],"]",["T_WHITESPACE"," ",85],["T_INSTANCEOF","instanceof",85],["T_WHITESPACE"," ",85],["T_STRING","Mage_Api2_Model_Resource",85],")",["T_WHITESPACE"," ",85],"{",["T_WHITESPACE","\n            ",85],["T_THROW","throw",86],["T_WHITESPACE"," ",86],["T_NEW","new",86],["T_WHITESPACE"," ",86],["T_STRING","Exception",86],"(",["T_CONSTANT_ENCAPSED_STRING","\"Passed parameter 'resource' is wrong.\"",86],")",";",["T_WHITESPACE","\n        ",86],"}",["T_WHITESPACE","\n        ",87],["T_VARIABLE","$resource",88],["T_WHITESPACE"," ",88],"=",["T_WHITESPACE"," ",88],["T_VARIABLE","$options",88],"[",["T_CONSTANT_ENCAPSED_STRING","'resource'",88],"]",";",["T_WHITESPACE","\n        ",88],["T_VARIABLE","$userType",89],["T_WHITESPACE"," ",89],"=",["T_WHITESPACE"," ",89],["T_VARIABLE","$resource",89],["T_OBJECT_OPERATOR","->",89],["T_STRING","getUserType",89],"(",")",";",["T_WHITESPACE","\n\n        ",89],["T_VARIABLE","$validationConfig",91],["T_WHITESPACE"," ",91],"=",["T_WHITESPACE"," ",91],["T_VARIABLE","$resource",91],["T_OBJECT_OPERATOR","->",91],["T_STRING","getConfig",91],"(",")",["T_OBJECT_OPERATOR","->",91],["T_STRING","getValidationConfig",91],"(",["T_WHITESPACE","\n            ",91],["T_VARIABLE","$resource",92],["T_OBJECT_OPERATOR","->",92],["T_STRING","getResourceType",92],"(",")",",",["T_WHITESPACE"," ",92],["T_STRING","self",92],["T_DOUBLE_COLON","::",92],["T_STRING","CONFIG_NODE_KEY",92],")",";",["T_WHITESPACE","\n\n        ",92],["T_IF","if",94],["T_WHITESPACE"," ",94],"(",["T_EMPTY","empty",94],"(",["T_VARIABLE","$validationConfig",94],"[",["T_VARIABLE","$userType",94],"]","[",["T_CONSTANT_ENCAPSED_STRING","'form_model'",94],"]",")",")",["T_WHITESPACE"," ",94],"{",["T_WHITESPACE","\n            ",94],["T_THROW","throw",95],["T_WHITESPACE"," ",95],["T_NEW","new",95],["T_WHITESPACE"," ",95],["T_STRING","Exception",95],"(",["T_CONSTANT_ENCAPSED_STRING","\"Config parameter 'formPath' is empty.\"",95],")",";",["T_WHITESPACE","\n        ",95],"}",["T_WHITESPACE","\n        ",96],["T_VARIABLE","$this",97],["T_OBJECT_OPERATOR","->",97],["T_STRING","_formPath",97],["T_WHITESPACE"," ",97],"=",["T_WHITESPACE"," ",97],["T_VARIABLE","$validationConfig",97],"[",["T_VARIABLE","$userType",97],"]","[",["T_CONSTANT_ENCAPSED_STRING","'form_model'",97],"]",";",["T_WHITESPACE","\n\n        ",97],["T_IF","if",99],["T_WHITESPACE"," ",99],"(",["T_EMPTY","empty",99],"(",["T_VARIABLE","$validationConfig",99],"[",["T_VARIABLE","$userType",99],"]","[",["T_CONSTANT_ENCAPSED_STRING","'form_code'",99],"]",")",")",["T_WHITESPACE"," ",99],"{",["T_WHITESPACE","\n            ",99],["T_THROW","throw",100],["T_WHITESPACE"," ",100],["T_NEW","new",100],["T_WHITESPACE"," ",100],["T_STRING","Exception",100],"(",["T_CONSTANT_ENCAPSED_STRING","\"Config parameter 'formCode' is empty.\"",100],")",";",["T_WHITESPACE","\n        ",100],"}",["T_WHITESPACE","\n        ",101],["T_VARIABLE","$this",102],["T_OBJECT_OPERATOR","->",102],["T_STRING","_formCode",102],["T_WHITESPACE"," ",102],"=",["T_WHITESPACE"," ",102],["T_VARIABLE","$validationConfig",102],"[",["T_VARIABLE","$userType",102],"]","[",["T_CONSTANT_ENCAPSED_STRING","'form_code'",102],"]",";",["T_WHITESPACE","\n\n        ",102],["T_IF","if",104],["T_WHITESPACE"," ",104],"(",["T_EMPTY","empty",104],"(",["T_VARIABLE","$validationConfig",104],"[",["T_VARIABLE","$userType",104],"]","[",["T_CONSTANT_ENCAPSED_STRING","'entity_model'",104],"]",")",")",["T_WHITESPACE"," ",104],"{",["T_WHITESPACE","\n            ",104],["T_THROW","throw",105],["T_WHITESPACE"," ",105],["T_NEW","new",105],["T_WHITESPACE"," ",105],["T_STRING","Exception",105],"(",["T_CONSTANT_ENCAPSED_STRING","\"Config parameter 'entity' is wrong.\"",105],")",";",["T_WHITESPACE","\n        ",105],"}",["T_WHITESPACE","\n        ",106],["T_VARIABLE","$this",107],["T_OBJECT_OPERATOR","->",107],["T_STRING","_entity",107],["T_WHITESPACE"," ",107],"=",["T_WHITESPACE"," ",107],["T_STRING","Mage",107],["T_DOUBLE_COLON","::",107],["T_STRING","getModel",107],"(",["T_VARIABLE","$validationConfig",107],"[",["T_VARIABLE","$userType",107],"]","[",["T_CONSTANT_ENCAPSED_STRING","'entity_model'",107],"]",")",";",["T_WHITESPACE","\n        ",107],["T_IF","if",108],["T_WHITESPACE"," ",108],"(",["T_EMPTY","empty",108],"(",["T_VARIABLE","$this",108],["T_OBJECT_OPERATOR","->",108],["T_STRING","_entity",108],")",["T_WHITESPACE"," ",108],["T_BOOLEAN_OR","||",108],["T_WHITESPACE"," ",108],"!",["T_VARIABLE","$this",108],["T_OBJECT_OPERATOR","->",108],["T_STRING","_entity",108],["T_WHITESPACE"," ",108],["T_INSTANCEOF","instanceof",108],["T_WHITESPACE"," ",108],["T_STRING","Mage_Core_Model_Abstract",108],")",["T_WHITESPACE"," ",108],"{",["T_WHITESPACE","\n            ",108],["T_THROW","throw",109],["T_WHITESPACE"," ",109],["T_NEW","new",109],["T_WHITESPACE"," ",109],["T_STRING","Exception",109],"(",["T_CONSTANT_ENCAPSED_STRING","\"Entity is not model.\"",109],")",";",["T_WHITESPACE","\n        ",109],"}",["T_WHITESPACE","\n\n        ",110],["T_VARIABLE","$this",112],["T_OBJECT_OPERATOR","->",112],["T_STRING","_eavForm",112],["T_WHITESPACE"," ",112],"=",["T_WHITESPACE"," ",112],["T_STRING","Mage",112],["T_DOUBLE_COLON","::",112],["T_STRING","getModel",112],"(",["T_VARIABLE","$this",112],["T_OBJECT_OPERATOR","->",112],["T_STRING","_formPath",112],")",";",["T_WHITESPACE","\n        ",112],["T_IF","if",113],["T_WHITESPACE"," ",113],"(",["T_EMPTY","empty",113],"(",["T_VARIABLE","$this",113],["T_OBJECT_OPERATOR","->",113],["T_STRING","_eavForm",113],")",["T_WHITESPACE"," ",113],["T_BOOLEAN_OR","||",113],["T_WHITESPACE"," ",113],"!",["T_VARIABLE","$this",113],["T_OBJECT_OPERATOR","->",113],["T_STRING","_eavForm",113],["T_WHITESPACE"," ",113],["T_INSTANCEOF","instanceof",113],["T_WHITESPACE"," ",113],["T_STRING","Mage_Eav_Model_Form",113],")",["T_WHITESPACE"," ",113],"{",["T_WHITESPACE","\n            ",113],["T_THROW","throw",114],["T_WHITESPACE"," ",114],["T_NEW","new",114],["T_WHITESPACE"," ",114],["T_STRING","Exception",114],"(","\"",["T_ENCAPSED_AND_WHITESPACE","Eav form '",114],["T_CURLY_OPEN","{",114],["T_VARIABLE","$this",114],["T_OBJECT_OPERATOR","->",114],["T_STRING","_formPath",114],"}",["T_ENCAPSED_AND_WHITESPACE","' is not found.",114],"\"",")",";",["T_WHITESPACE","\n        ",114],"}",["T_WHITESPACE","\n        ",115],["T_VARIABLE","$this",116],["T_OBJECT_OPERATOR","->",116],["T_STRING","_eavForm",116],["T_OBJECT_OPERATOR","->",116],["T_STRING","setEntity",116],"(",["T_VARIABLE","$this",116],["T_OBJECT_OPERATOR","->",116],["T_STRING","_entity",116],")",["T_WHITESPACE","\n            ",116],["T_OBJECT_OPERATOR","->",117],["T_STRING","setFormCode",117],"(",["T_VARIABLE","$this",117],["T_OBJECT_OPERATOR","->",117],["T_STRING","_formCode",117],")",["T_WHITESPACE","\n            ",117],["T_OBJECT_OPERATOR","->",118],["T_STRING","ignoreInvisible",118],"(",["T_STRING","false",118],")",";",["T_WHITESPACE","\n    ",118],"}",["T_WHITESPACE","\n\n    ",119],["T_DOC_COMMENT","\/**\n     * Validate attribute value for attributes with source models\n     *\n     * @param Mage_Eav_Model_Entity_Attribute_Abstract $attribute\n     * @param mixed $attrValue\n     * @return array|bool\n     *\/",121],["T_WHITESPACE","\n    ",127],["T_PROTECTED","protected",128],["T_WHITESPACE"," ",128],["T_FUNCTION","function",128],["T_WHITESPACE"," ",128],["T_STRING","_validateAttributeWithSource",128],"(",["T_STRING","Mage_Eav_Model_Entity_Attribute_Abstract",128],["T_WHITESPACE"," ",128],["T_VARIABLE","$attribute",128],",",["T_WHITESPACE"," ",128],["T_VARIABLE","$attrValue",128],")",["T_WHITESPACE","\n    ",128],"{",["T_WHITESPACE","\n        ",129],["T_VARIABLE","$errors",130],["T_WHITESPACE"," ",130],"=",["T_WHITESPACE"," ",130],["T_ARRAY","array",130],"(",")",";",["T_WHITESPACE","\n\n        ",130],["T_COMMENT","\/\/ validate attributes with source models\n",132],["T_WHITESPACE","        ",133],["T_IF","if",133],["T_WHITESPACE"," ",133],"(",["T_STRING","null",133],["T_WHITESPACE"," ",133],["T_IS_NOT_IDENTICAL","!==",133],["T_WHITESPACE"," ",133],["T_VARIABLE","$attrValue",133],["T_WHITESPACE"," ",133],["T_BOOLEAN_AND","&&",133],["T_WHITESPACE"," ",133],["T_VARIABLE","$attribute",133],["T_OBJECT_OPERATOR","->",133],["T_STRING","getSourceModel",133],"(",")",")",["T_WHITESPACE"," ",133],"{",["T_WHITESPACE","\n            ",133],["T_IF","if",134],["T_WHITESPACE"," ",134],"(",["T_CONSTANT_ENCAPSED_STRING","'multiselect'",134],["T_WHITESPACE"," ",134],["T_IS_NOT_IDENTICAL","!==",134],["T_WHITESPACE"," ",134],["T_VARIABLE","$attribute",134],["T_OBJECT_OPERATOR","->",134],["T_STRING","getFrontendInput",134],"(",")",["T_WHITESPACE"," ",134],["T_BOOLEAN_AND","&&",134],["T_WHITESPACE"," ",134],["T_STRING","is_array",134],"(",["T_VARIABLE","$attrValue",134],")",")",["T_WHITESPACE"," ",134],"{",["T_WHITESPACE","\n                ",134],["T_RETURN","return",135],["T_WHITESPACE"," ",135],["T_ARRAY","array",135],"(",["T_CONSTANT_ENCAPSED_STRING","'Invalid value type for '",135],["T_WHITESPACE"," ",135],".",["T_WHITESPACE"," ",135],["T_VARIABLE","$attribute",135],["T_OBJECT_OPERATOR","->",135],["T_STRING","getAttributeCode",135],"(",")",")",";",["T_WHITESPACE","\n            ",135],"}",["T_WHITESPACE","\n            ",136],["T_VARIABLE","$possibleValues",137],["T_WHITESPACE"," ",137],"=",["T_WHITESPACE"," ",137],["T_VARIABLE","$attribute",137],["T_OBJECT_OPERATOR","->",137],["T_STRING","getSource",137],"(",")",["T_OBJECT_OPERATOR","->",137],["T_STRING","getAllOptions",137],"(",["T_STRING","false",137],")",";",["T_WHITESPACE","\n\n            ",137],["T_FOREACH","foreach",139],["T_WHITESPACE"," ",139],"(",["T_ARRAY_CAST","(array)",139],["T_WHITESPACE"," ",139],["T_VARIABLE","$attrValue",139],["T_WHITESPACE"," ",139],["T_AS","as",139],["T_WHITESPACE"," ",139],["T_VARIABLE","$value",139],")",["T_WHITESPACE"," ",139],"{",["T_WHITESPACE","\n                ",139],["T_IF","if",140],["T_WHITESPACE"," ",140],"(",["T_STRING","is_scalar",140],"(",["T_VARIABLE","$value",140],")",")",["T_WHITESPACE"," ",140],"{",["T_WHITESPACE","\n                    ",140],["T_VARIABLE","$value",141],["T_WHITESPACE"," ",141],"=",["T_WHITESPACE"," ",141],["T_STRING_CAST","(string)",141],["T_WHITESPACE"," ",141],["T_VARIABLE","$value",141],";",["T_WHITESPACE","\n                    ",141],["T_VARIABLE","$isValid",142],["T_WHITESPACE"," ",142],"=",["T_WHITESPACE"," ",142],["T_STRING","false",142],";",["T_WHITESPACE","\n                    ",142],["T_FOREACH","foreach",143],["T_WHITESPACE"," ",143],"(",["T_VARIABLE","$possibleValues",143],["T_WHITESPACE"," ",143],["T_AS","as",143],["T_WHITESPACE"," ",143],["T_VARIABLE","$optionData",143],")",["T_WHITESPACE"," ",143],"{",["T_WHITESPACE","\n                        ",143],["T_COMMENT","\/\/ comparison without types check is performed only when both values are numeric\n",144],["T_WHITESPACE","                        ",145],["T_VARIABLE","$useStrictMode",145],["T_WHITESPACE"," ",145],"=",["T_WHITESPACE"," ",145],"!","(",["T_STRING","is_numeric",145],"(",["T_VARIABLE","$value",145],")",["T_WHITESPACE"," ",145],["T_BOOLEAN_AND","&&",145],["T_WHITESPACE"," ",145],["T_STRING","is_numeric",145],"(",["T_VARIABLE","$optionData",145],"[",["T_CONSTANT_ENCAPSED_STRING","'value'",145],"]",")",")",";",["T_WHITESPACE","\n                        ",145],["T_VARIABLE","$isValid",146],["T_WHITESPACE"," ",146],"=",["T_WHITESPACE"," ",146],["T_VARIABLE","$useStrictMode",146],["T_WHITESPACE"," ",146],"?",["T_WHITESPACE"," ",146],["T_VARIABLE","$value",146],["T_WHITESPACE"," ",146],["T_IS_IDENTICAL","===",146],["T_WHITESPACE"," ",146],["T_VARIABLE","$optionData",146],"[",["T_CONSTANT_ENCAPSED_STRING","'value'",146],"]",["T_WHITESPACE"," ",146],":",["T_WHITESPACE"," ",146],["T_VARIABLE","$value",146],["T_WHITESPACE"," ",146],["T_IS_EQUAL","==",146],["T_WHITESPACE"," ",146],["T_VARIABLE","$optionData",146],"[",["T_CONSTANT_ENCAPSED_STRING","'value'",146],"]",";",["T_WHITESPACE","\n                        ",146],["T_IF","if",147],["T_WHITESPACE"," ",147],"(",["T_VARIABLE","$isValid",147],")",["T_WHITESPACE"," ",147],"{",["T_WHITESPACE","\n                            ",147],["T_BREAK","break",148],";",["T_WHITESPACE","\n                        ",148],"}",["T_WHITESPACE","\n                    ",149],"}",["T_WHITESPACE","\n                    ",150],["T_IF","if",151],["T_WHITESPACE"," ",151],"(","!",["T_VARIABLE","$isValid",151],")",["T_WHITESPACE"," ",151],"{",["T_WHITESPACE","\n                        ",151],["T_VARIABLE","$errors",152],"[","]",["T_WHITESPACE"," ",152],"=",["T_WHITESPACE"," ",152],["T_CONSTANT_ENCAPSED_STRING","'Invalid value \"'",152],["T_WHITESPACE"," ",152],".",["T_WHITESPACE"," ",152],["T_VARIABLE","$value",152],["T_WHITESPACE"," ",152],".",["T_WHITESPACE"," ",152],["T_CONSTANT_ENCAPSED_STRING","'\" for '",152],".",["T_WHITESPACE"," ",152],["T_VARIABLE","$attribute",152],["T_OBJECT_OPERATOR","->",152],["T_STRING","getAttributeCode",152],"(",")",";",["T_WHITESPACE","\n                    ",152],"}",["T_WHITESPACE","\n                ",153],"}",["T_WHITESPACE"," ",154],["T_ELSE","else",154],["T_WHITESPACE"," ",154],"{",["T_WHITESPACE","\n                    ",154],["T_VARIABLE","$errors",155],"[","]",["T_WHITESPACE"," ",155],"=",["T_WHITESPACE"," ",155],["T_CONSTANT_ENCAPSED_STRING","'Invalid value type for '",155],["T_WHITESPACE"," ",155],".",["T_WHITESPACE"," ",155],["T_VARIABLE","$attribute",155],["T_OBJECT_OPERATOR","->",155],["T_STRING","getAttributeCode",155],"(",")",";",["T_WHITESPACE","\n                ",155],"}",["T_WHITESPACE","\n            ",156],"}",["T_WHITESPACE","\n        ",157],"}",["T_WHITESPACE","\n        ",158],["T_RETURN","return",159],["T_WHITESPACE"," ",159],["T_VARIABLE","$errors",159],["T_WHITESPACE"," ",159],"?",["T_WHITESPACE"," ",159],["T_VARIABLE","$errors",159],["T_WHITESPACE"," ",159],":",["T_WHITESPACE"," ",159],["T_STRING","true",159],";",["T_WHITESPACE","\n    ",159],"}",["T_WHITESPACE","\n\n    ",160],["T_DOC_COMMENT","\/**\n     * Filter request data.\n     *\n     * @param  array $data\n     * @return array Filtered data\n     *\/",162],["T_WHITESPACE","\n    ",167],["T_PUBLIC","public",168],["T_WHITESPACE"," ",168],["T_FUNCTION","function",168],["T_WHITESPACE"," ",168],["T_STRING","filter",168],"(",["T_ARRAY","array",168],["T_WHITESPACE"," ",168],["T_VARIABLE","$data",168],")",["T_WHITESPACE","\n    ",168],"{",["T_WHITESPACE","\n        ",169],["T_RETURN","return",170],["T_WHITESPACE"," ",170],["T_STRING","array_intersect_key",170],"(",["T_VARIABLE","$this",170],["T_OBJECT_OPERATOR","->",170],["T_STRING","_eavForm",170],["T_OBJECT_OPERATOR","->",170],["T_STRING","extractData",170],"(",["T_VARIABLE","$this",170],["T_OBJECT_OPERATOR","->",170],["T_STRING","_eavForm",170],["T_OBJECT_OPERATOR","->",170],["T_STRING","prepareRequest",170],"(",["T_VARIABLE","$data",170],")",")",",",["T_WHITESPACE"," ",170],["T_VARIABLE","$data",170],")",";",["T_WHITESPACE","\n    ",170],"}",["T_WHITESPACE","\n\n    ",171],["T_DOC_COMMENT","\/**\n     * Validate entity.\n     * If the $partial parameter is TRUE, then we validate only those parameters that were passed.\n     *\n     * If fails validation, then this method returns false, and\n     * getErrors() will return an array of errors that explain why the\n     * validation failed.\n     *\n     * @param array $data\n     * @param bool $partial\n     * @return bool\n     *\/",173],["T_WHITESPACE","\n    ",184],["T_PUBLIC","public",185],["T_WHITESPACE"," ",185],["T_FUNCTION","function",185],["T_WHITESPACE"," ",185],["T_STRING","isValidData",185],"(",["T_ARRAY","array",185],["T_WHITESPACE"," ",185],["T_VARIABLE","$data",185],",",["T_WHITESPACE"," ",185],["T_VARIABLE","$partial",185],["T_WHITESPACE"," ",185],"=",["T_WHITESPACE"," ",185],["T_STRING","false",185],")",["T_WHITESPACE","\n    ",185],"{",["T_WHITESPACE","\n        ",186],["T_VARIABLE","$errors",187],["T_WHITESPACE"," ",187],"=",["T_WHITESPACE"," ",187],["T_ARRAY","array",187],"(",")",";",["T_WHITESPACE","\n        ",187],["T_FOREACH","foreach",188],["T_WHITESPACE"," ",188],"(",["T_VARIABLE","$this",188],["T_OBJECT_OPERATOR","->",188],["T_STRING","_eavForm",188],["T_OBJECT_OPERATOR","->",188],["T_STRING","getAttributes",188],"(",")",["T_WHITESPACE"," ",188],["T_AS","as",188],["T_WHITESPACE"," ",188],["T_VARIABLE","$attribute",188],")",["T_WHITESPACE"," ",188],"{",["T_WHITESPACE","\n            ",188],["T_IF","if",189],["T_WHITESPACE"," ",189],"(",["T_VARIABLE","$partial",189],["T_WHITESPACE"," ",189],["T_BOOLEAN_AND","&&",189],["T_WHITESPACE"," ",189],"!",["T_STRING","array_key_exists",189],"(",["T_VARIABLE","$attribute",189],["T_OBJECT_OPERATOR","->",189],["T_STRING","getAttributeCode",189],"(",")",",",["T_WHITESPACE"," ",189],["T_VARIABLE","$data",189],")",")",["T_WHITESPACE"," ",189],"{",["T_WHITESPACE","\n                ",189],["T_CONTINUE","continue",190],";",["T_WHITESPACE","\n            ",190],"}",["T_WHITESPACE","\n            ",191],["T_IF","if",192],["T_WHITESPACE"," ",192],"(",["T_VARIABLE","$this",192],["T_OBJECT_OPERATOR","->",192],["T_STRING","_eavForm",192],["T_OBJECT_OPERATOR","->",192],["T_STRING","ignoreInvisible",192],"(",")",["T_WHITESPACE"," ",192],["T_BOOLEAN_AND","&&",192],["T_WHITESPACE"," ",192],"!",["T_VARIABLE","$attribute",192],["T_OBJECT_OPERATOR","->",192],["T_STRING","getIsVisible",192],"(",")",")",["T_WHITESPACE"," ",192],"{",["T_WHITESPACE","\n                ",192],["T_CONTINUE","continue",193],";",["T_WHITESPACE","\n            ",193],"}",["T_WHITESPACE","\n            ",194],["T_VARIABLE","$attrValue",195],["T_WHITESPACE"," ",195],"=",["T_WHITESPACE"," ",195],["T_ISSET","isset",195],"(",["T_VARIABLE","$data",195],"[",["T_VARIABLE","$attribute",195],["T_OBJECT_OPERATOR","->",195],["T_STRING","getAttributeCode",195],"(",")","]",")",["T_WHITESPACE"," ",195],"?",["T_WHITESPACE"," ",195],["T_VARIABLE","$data",195],"[",["T_VARIABLE","$attribute",195],["T_OBJECT_OPERATOR","->",195],["T_STRING","getAttributeCode",195],"(",")","]",["T_WHITESPACE"," ",195],":",["T_WHITESPACE"," ",195],["T_STRING","null",195],";",["T_WHITESPACE","\n\n            ",195],["T_VARIABLE","$result",197],["T_WHITESPACE"," ",197],"=",["T_WHITESPACE"," ",197],["T_STRING","Mage_Eav_Model_Attribute_Data",197],["T_DOUBLE_COLON","::",197],["T_STRING","factory",197],"(",["T_VARIABLE","$attribute",197],",",["T_WHITESPACE"," ",197],["T_VARIABLE","$this",197],["T_OBJECT_OPERATOR","->",197],["T_STRING","_eavForm",197],["T_OBJECT_OPERATOR","->",197],["T_STRING","getEntity",197],"(",")",")",["T_WHITESPACE","\n                ",197],["T_OBJECT_OPERATOR","->",198],["T_STRING","setExtractedData",198],"(",["T_VARIABLE","$data",198],")",["T_WHITESPACE","\n                ",198],["T_OBJECT_OPERATOR","->",199],["T_STRING","validateValue",199],"(",["T_VARIABLE","$attrValue",199],")",";",["T_WHITESPACE","\n\n            ",199],["T_IF","if",201],["T_WHITESPACE"," ",201],"(",["T_VARIABLE","$result",201],["T_WHITESPACE"," ",201],["T_IS_NOT_IDENTICAL","!==",201],["T_WHITESPACE"," ",201],["T_STRING","true",201],")",["T_WHITESPACE"," ",201],"{",["T_WHITESPACE","\n                ",201],["T_VARIABLE","$errors",202],["T_WHITESPACE"," ",202],"=",["T_WHITESPACE"," ",202],["T_STRING","array_merge",202],"(",["T_VARIABLE","$errors",202],",",["T_WHITESPACE"," ",202],["T_VARIABLE","$result",202],")",";",["T_WHITESPACE","\n            ",202],"}",["T_WHITESPACE"," ",203],["T_ELSE","else",203],["T_WHITESPACE"," ",203],"{",["T_WHITESPACE","\n                ",203],["T_VARIABLE","$result",204],["T_WHITESPACE"," ",204],"=",["T_WHITESPACE"," ",204],["T_VARIABLE","$this",204],["T_OBJECT_OPERATOR","->",204],["T_STRING","_validateAttributeWithSource",204],"(",["T_VARIABLE","$attribute",204],",",["T_WHITESPACE"," ",204],["T_VARIABLE","$attrValue",204],")",";",["T_WHITESPACE","\n\n                ",204],["T_IF","if",206],["T_WHITESPACE"," ",206],"(",["T_STRING","true",206],["T_WHITESPACE"," ",206],["T_IS_NOT_IDENTICAL","!==",206],["T_WHITESPACE"," ",206],["T_VARIABLE","$result",206],")",["T_WHITESPACE"," ",206],"{",["T_WHITESPACE","\n                    ",206],["T_VARIABLE","$errors",207],["T_WHITESPACE"," ",207],"=",["T_WHITESPACE"," ",207],["T_STRING","array_merge",207],"(",["T_VARIABLE","$errors",207],",",["T_WHITESPACE"," ",207],["T_VARIABLE","$result",207],")",";",["T_WHITESPACE","\n                ",207],"}",["T_WHITESPACE","\n            ",208],"}",["T_WHITESPACE","\n        ",209],"}",["T_WHITESPACE","\n        ",210],["T_VARIABLE","$this",211],["T_OBJECT_OPERATOR","->",211],["T_STRING","_setErrors",211],"(",["T_VARIABLE","$errors",211],")",";",["T_WHITESPACE","\n\n        ",211],["T_RETURN","return",213],["T_WHITESPACE"," ",213],["T_VARIABLE","$errors",213],["T_WHITESPACE"," ",213],"?",["T_WHITESPACE"," ",213],["T_STRING","false",213],["T_WHITESPACE"," ",213],":",["T_WHITESPACE"," ",213],["T_STRING","true",213],";",["T_WHITESPACE","\n    ",213],"}",["T_WHITESPACE","\n\n    ",214],["T_DOC_COMMENT","\/**\n     * Returns an array of errors\n     *\n     * @return array\n     *\/",216],["T_WHITESPACE","\n    ",220],["T_PUBLIC","public",221],["T_WHITESPACE"," ",221],["T_FUNCTION","function",221],["T_WHITESPACE"," ",221],["T_STRING","getErrors",221],"(",")",["T_WHITESPACE","\n    ",221],"{",["T_WHITESPACE","\n        ",222],["T_COMMENT","\/\/ business asked to avoid additional validation message, so we filter it here\n",223],["T_WHITESPACE","        ",224],["T_VARIABLE","$errors",224],["T_WHITESPACE","        ",224],"=",["T_WHITESPACE"," ",224],["T_ARRAY","array",224],"(",")",";",["T_WHITESPACE","\n        ",224],["T_VARIABLE","$requiredAttrs",225],["T_WHITESPACE"," ",225],"=",["T_WHITESPACE"," ",225],["T_ARRAY","array",225],"(",")",";",["T_WHITESPACE","\n        ",225],["T_VARIABLE","$isRequiredRE",226],["T_WHITESPACE","  ",226],"=",["T_WHITESPACE"," ",226],["T_CONSTANT_ENCAPSED_STRING","'\/^'",226],["T_WHITESPACE"," ",226],".",["T_WHITESPACE"," ",226],["T_STRING","str_replace",226],"(",["T_CONSTANT_ENCAPSED_STRING","'%s'",226],",",["T_WHITESPACE"," ",226],["T_CONSTANT_ENCAPSED_STRING","'(.+)'",226],",",["T_WHITESPACE"," ",226],["T_STRING","preg_quote",226],"(",["T_STRING","Mage",226],["T_DOUBLE_COLON","::",226],["T_STRING","helper",226],"(",["T_CONSTANT_ENCAPSED_STRING","'eav'",226],")",["T_OBJECT_OPERATOR","->",226],["T_STRING","__",226],"(",["T_CONSTANT_ENCAPSED_STRING","'\"%s\" is a required value.'",226],")",")",")",["T_WHITESPACE"," ",226],".",["T_WHITESPACE"," ",226],["T_CONSTANT_ENCAPSED_STRING","'$\/'",226],";",["T_WHITESPACE","\n        ",226],["T_VARIABLE","$greaterThanRE",227],["T_WHITESPACE"," ",227],"=",["T_WHITESPACE"," ",227],["T_CONSTANT_ENCAPSED_STRING","'\/^'",227],["T_WHITESPACE"," ",227],".",["T_WHITESPACE"," ",227],["T_STRING","str_replace",227],"(",["T_WHITESPACE","\n            ",227],["T_CONSTANT_ENCAPSED_STRING","'%s'",228],",",["T_WHITESPACE"," ",228],["T_CONSTANT_ENCAPSED_STRING","'(.+)'",228],",",["T_WHITESPACE"," ",228],["T_STRING","preg_quote",228],"(",["T_STRING","Mage",228],["T_DOUBLE_COLON","::",228],["T_STRING","helper",228],"(",["T_CONSTANT_ENCAPSED_STRING","'eav'",228],")",["T_OBJECT_OPERATOR","->",228],["T_STRING","__",228],"(",["T_CONSTANT_ENCAPSED_STRING","'\"%s\" length must be equal or greater than %s characters.'",228],")",")",["T_WHITESPACE","\n        ",228],")",["T_WHITESPACE"," ",229],".",["T_WHITESPACE"," ",229],["T_CONSTANT_ENCAPSED_STRING","'$\/'",229],";",["T_WHITESPACE","\n\n        ",229],["T_COMMENT","\/\/ find all required attributes labels\n",231],["T_WHITESPACE","        ",232],["T_FOREACH","foreach",232],["T_WHITESPACE"," ",232],"(",["T_VARIABLE","$this",232],["T_OBJECT_OPERATOR","->",232],["T_STRING","_errors",232],["T_WHITESPACE"," ",232],["T_AS","as",232],["T_WHITESPACE"," ",232],["T_VARIABLE","$error",232],")",["T_WHITESPACE"," ",232],"{",["T_WHITESPACE","\n            ",232],["T_IF","if",233],["T_WHITESPACE"," ",233],"(",["T_STRING","preg_match",233],"(",["T_VARIABLE","$isRequiredRE",233],",",["T_WHITESPACE"," ",233],["T_VARIABLE","$error",233],",",["T_WHITESPACE"," ",233],["T_VARIABLE","$matches",233],")",")",["T_WHITESPACE"," ",233],"{",["T_WHITESPACE","\n                ",233],["T_VARIABLE","$requiredAttrs",234],"[",["T_VARIABLE","$matches",234],"[",["T_LNUMBER","1",234],"]","]",["T_WHITESPACE"," ",234],"=",["T_WHITESPACE"," ",234],["T_STRING","true",234],";",["T_WHITESPACE","\n            ",234],"}",["T_WHITESPACE","\n        ",235],"}",["T_WHITESPACE","\n        ",236],["T_COMMENT","\/\/ exclude additional messages for required attributes been failed\n",237],["T_WHITESPACE","        ",238],["T_FOREACH","foreach",238],["T_WHITESPACE"," ",238],"(",["T_VARIABLE","$this",238],["T_OBJECT_OPERATOR","->",238],["T_STRING","_errors",238],["T_WHITESPACE"," ",238],["T_AS","as",238],["T_WHITESPACE"," ",238],["T_VARIABLE","$error",238],")",["T_WHITESPACE"," ",238],"{",["T_WHITESPACE","\n            ",238],["T_IF","if",239],["T_WHITESPACE"," ",239],"(",["T_STRING","preg_match",239],"(",["T_VARIABLE","$isRequiredRE",239],",",["T_WHITESPACE"," ",239],["T_VARIABLE","$error",239],")",["T_WHITESPACE","\n                ",239],["T_BOOLEAN_OR","||",240],["T_WHITESPACE"," ",240],"!",["T_STRING","preg_match",240],"(",["T_VARIABLE","$greaterThanRE",240],",",["T_WHITESPACE"," ",240],["T_VARIABLE","$error",240],",",["T_WHITESPACE"," ",240],["T_VARIABLE","$matches",240],")",["T_WHITESPACE","\n                ",240],["T_BOOLEAN_OR","||",241],["T_WHITESPACE"," ",241],"!",["T_ISSET","isset",241],"(",["T_VARIABLE","$requiredAttrs",241],"[",["T_VARIABLE","$matches",241],"[",["T_LNUMBER","1",241],"]","]",")",["T_WHITESPACE","\n            ",241],")",["T_WHITESPACE"," ",242],"{",["T_WHITESPACE","\n                ",242],["T_VARIABLE","$errors",243],"[","]",["T_WHITESPACE"," ",243],"=",["T_WHITESPACE"," ",243],["T_VARIABLE","$error",243],";",["T_WHITESPACE","\n            ",243],"}",["T_WHITESPACE","\n        ",244],"}",["T_WHITESPACE","\n        ",245],["T_RETURN","return",246],["T_WHITESPACE"," ",246],["T_VARIABLE","$errors",246],";",["T_WHITESPACE","\n    ",246],"}",["T_WHITESPACE","\n",247],"}",["T_WHITESPACE","\n",248]]
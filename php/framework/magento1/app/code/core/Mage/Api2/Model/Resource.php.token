[["T_OPEN_TAG","<?php\n",1],["T_DOC_COMMENT","\/**\n * Magento\n *\n * NOTICE OF LICENSE\n *\n * This source file is subject to the Open Software License (OSL 3.0)\n * that is bundled with this package in the file LICENSE.txt.\n * It is also available through the world-wide-web at this URL:\n * http:\/\/opensource.org\/licenses\/osl-3.0.php\n * If you did not receive a copy of the license and are unable to\n * obtain it through the world-wide-web, please send an email\n * to license@magento.com so we can send you a copy immediately.\n *\n * DISCLAIMER\n *\n * Do not edit or add to this file if you wish to upgrade Magento to newer\n * versions in the future. If you wish to customize Magento for your\n * needs please refer to http:\/\/www.magento.com for more information.\n *\n * @category    Mage\n * @package     Mage_Api2\n * @copyright  Copyright (c) 2006-2016 X.commerce, Inc. and affiliates (http:\/\/www.magento.com)\n * @license    http:\/\/opensource.org\/licenses\/osl-3.0.php  Open Software License (OSL 3.0)\n *\/",2],["T_WHITESPACE","\n\n",25],["T_DOC_COMMENT","\/**\n * API2 Abstract Resource\n *\n * @category   Mage\n * @package    Mage_Api2\n * @author     Magento Core Team <core@magentocommerce.com>\n * @method string _create() _create(array $filteredData) creation of an entity\n * @method void _multiCreate() _multiCreate(array $filteredData) processing and creation of a collection\n * @method array _retrieve() retrieving an entity\n * @method array _retrieveCollection() retrieving a collection\n * @method void _update() _update(array $filteredData) update of an entity\n * @method void _multiUpdate() _multiUpdate(array $filteredData) update of a collection\n * @method void _delete() deletion of an entity\n * @method void _multidelete() _multidelete(array $requestData) deletion of a collection\n *\/",27],["T_WHITESPACE","\n",41],["T_ABSTRACT","abstract",42],["T_WHITESPACE"," ",42],["T_CLASS","class",42],["T_WHITESPACE"," ",42],["T_STRING","Mage_Api2_Model_Resource",42],["T_WHITESPACE","\n",42],"{",["T_WHITESPACE","\n    ",43],["T_COMMENT","\/**#@+\n     *  Action types\n     *\/",44],["T_WHITESPACE","\n    ",46],["T_CONST","const",47],["T_WHITESPACE"," ",47],["T_STRING","ACTION_TYPE_ENTITY",47],["T_WHITESPACE"," ",47],"=",["T_WHITESPACE"," ",47],["T_CONSTANT_ENCAPSED_STRING","'entity'",47],";",["T_WHITESPACE","\n    ",47],["T_CONST","const",48],["T_WHITESPACE"," ",48],["T_STRING","ACTION_TYPE_COLLECTION",48],["T_WHITESPACE","  ",48],"=",["T_WHITESPACE"," ",48],["T_CONSTANT_ENCAPSED_STRING","'collection'",48],";",["T_WHITESPACE","\n    ",48],["T_COMMENT","\/**#@-*\/",49],["T_WHITESPACE","\n\n    ",49],["T_COMMENT","\/**#@+\n     * Operations. Resource method names\n     *\/",51],["T_WHITESPACE","\n    ",53],["T_CONST","const",54],["T_WHITESPACE"," ",54],["T_STRING","OPERATION_CREATE",54],["T_WHITESPACE","   ",54],"=",["T_WHITESPACE"," ",54],["T_CONSTANT_ENCAPSED_STRING","'create'",54],";",["T_WHITESPACE","\n    ",54],["T_CONST","const",55],["T_WHITESPACE"," ",55],["T_STRING","OPERATION_RETRIEVE",55],["T_WHITESPACE"," ",55],"=",["T_WHITESPACE"," ",55],["T_CONSTANT_ENCAPSED_STRING","'retrieve'",55],";",["T_WHITESPACE","\n    ",55],["T_CONST","const",56],["T_WHITESPACE"," ",56],["T_STRING","OPERATION_UPDATE",56],["T_WHITESPACE","   ",56],"=",["T_WHITESPACE"," ",56],["T_CONSTANT_ENCAPSED_STRING","'update'",56],";",["T_WHITESPACE","\n    ",56],["T_CONST","const",57],["T_WHITESPACE"," ",57],["T_STRING","OPERATION_DELETE",57],["T_WHITESPACE","   ",57],"=",["T_WHITESPACE"," ",57],["T_CONSTANT_ENCAPSED_STRING","'delete'",57],";",["T_WHITESPACE","\n    ",57],["T_COMMENT","\/**#@-*\/",58],["T_WHITESPACE","\n\n    ",58],["T_COMMENT","\/**#@+\n     * Common operations for attributes\n     *\/",60],["T_WHITESPACE","\n    ",62],["T_CONST","const",63],["T_WHITESPACE"," ",63],["T_STRING","OPERATION_ATTRIBUTE_READ",63],["T_WHITESPACE","  ",63],"=",["T_WHITESPACE"," ",63],["T_CONSTANT_ENCAPSED_STRING","'read'",63],";",["T_WHITESPACE","\n    ",63],["T_CONST","const",64],["T_WHITESPACE"," ",64],["T_STRING","OPERATION_ATTRIBUTE_WRITE",64],["T_WHITESPACE"," ",64],"=",["T_WHITESPACE"," ",64],["T_CONSTANT_ENCAPSED_STRING","'write'",64],";",["T_WHITESPACE","\n    ",64],["T_COMMENT","\/**#@-*\/",65],["T_WHITESPACE","\n\n    ",65],["T_COMMENT","\/**#@+\n     *  Default error messages\n     *\/",67],["T_WHITESPACE","\n    ",69],["T_CONST","const",70],["T_WHITESPACE"," ",70],["T_STRING","RESOURCE_NOT_FOUND",70],["T_WHITESPACE"," ",70],"=",["T_WHITESPACE"," ",70],["T_CONSTANT_ENCAPSED_STRING","'Resource not found.'",70],";",["T_WHITESPACE","\n    ",70],["T_CONST","const",71],["T_WHITESPACE"," ",71],["T_STRING","RESOURCE_METHOD_NOT_ALLOWED",71],["T_WHITESPACE"," ",71],"=",["T_WHITESPACE"," ",71],["T_CONSTANT_ENCAPSED_STRING","'Resource does not support method.'",71],";",["T_WHITESPACE","\n    ",71],["T_CONST","const",72],["T_WHITESPACE"," ",72],["T_STRING","RESOURCE_METHOD_NOT_IMPLEMENTED",72],["T_WHITESPACE"," ",72],"=",["T_WHITESPACE"," ",72],["T_CONSTANT_ENCAPSED_STRING","'Resource method not implemented yet.'",72],";",["T_WHITESPACE","\n    ",72],["T_CONST","const",73],["T_WHITESPACE"," ",73],["T_STRING","RESOURCE_INTERNAL_ERROR",73],["T_WHITESPACE"," ",73],"=",["T_WHITESPACE"," ",73],["T_CONSTANT_ENCAPSED_STRING","'Resource internal error.'",73],";",["T_WHITESPACE","\n    ",73],["T_CONST","const",74],["T_WHITESPACE"," ",74],["T_STRING","RESOURCE_DATA_PRE_VALIDATION_ERROR",74],["T_WHITESPACE"," ",74],"=",["T_WHITESPACE"," ",74],["T_CONSTANT_ENCAPSED_STRING","'Resource data pre-validation error.'",74],";",["T_WHITESPACE","\n    ",74],["T_CONST","const",75],["T_WHITESPACE"," ",75],["T_STRING","RESOURCE_DATA_INVALID",75],["T_WHITESPACE"," ",75],"=",["T_WHITESPACE"," ",75],["T_CONSTANT_ENCAPSED_STRING","'Resource data invalid.'",75],";",["T_WHITESPACE"," ",75],["T_COMMENT","\/\/error while checking data inside method\n",75],["T_WHITESPACE","    ",76],["T_CONST","const",76],["T_WHITESPACE"," ",76],["T_STRING","RESOURCE_UNKNOWN_ERROR",76],["T_WHITESPACE"," ",76],"=",["T_WHITESPACE"," ",76],["T_CONSTANT_ENCAPSED_STRING","'Resource unknown error.'",76],";",["T_WHITESPACE","\n    ",76],["T_CONST","const",77],["T_WHITESPACE"," ",77],["T_STRING","RESOURCE_REQUEST_DATA_INVALID",77],["T_WHITESPACE"," ",77],"=",["T_WHITESPACE"," ",77],["T_CONSTANT_ENCAPSED_STRING","'The request data is invalid.'",77],";",["T_WHITESPACE","\n    ",77],["T_COMMENT","\/**#@-*\/",78],["T_WHITESPACE","\n\n    ",78],["T_COMMENT","\/**#@+\n     *  Default collection resources error messages\n     *\/",80],["T_WHITESPACE","\n    ",82],["T_CONST","const",83],["T_WHITESPACE"," ",83],["T_STRING","RESOURCE_COLLECTION_PAGING_ERROR",83],["T_WHITESPACE","       ",83],"=",["T_WHITESPACE"," ",83],["T_CONSTANT_ENCAPSED_STRING","'Resource collection paging error.'",83],";",["T_WHITESPACE","\n    ",83],["T_CONST","const",84],["T_WHITESPACE"," ",84],["T_STRING","RESOURCE_COLLECTION_PAGING_LIMIT_ERROR",84],["T_WHITESPACE"," ",84],"=",["T_WHITESPACE"," ",84],["T_CONSTANT_ENCAPSED_STRING","'The paging limit exceeds the allowed number.'",84],";",["T_WHITESPACE","\n    ",84],["T_CONST","const",85],["T_WHITESPACE"," ",85],["T_STRING","RESOURCE_COLLECTION_ORDERING_ERROR",85],["T_WHITESPACE","     ",85],"=",["T_WHITESPACE"," ",85],["T_CONSTANT_ENCAPSED_STRING","'Resource collection ordering error.'",85],";",["T_WHITESPACE","\n    ",85],["T_CONST","const",86],["T_WHITESPACE"," ",86],["T_STRING","RESOURCE_COLLECTION_FILTERING_ERROR",86],["T_WHITESPACE","    ",86],"=",["T_WHITESPACE"," ",86],["T_CONSTANT_ENCAPSED_STRING","'Resource collection filtering error.'",86],";",["T_WHITESPACE","\n    ",86],["T_CONST","const",87],["T_WHITESPACE"," ",87],["T_STRING","RESOURCE_COLLECTION_ATTRIBUTES_ERROR",87],["T_WHITESPACE","   ",87],"=",["T_WHITESPACE"," ",87],["T_CONSTANT_ENCAPSED_STRING","'Resource collection including additional attributes error.'",87],";",["T_WHITESPACE","\n    ",87],["T_COMMENT","\/**#@-*\/",88],["T_WHITESPACE","\n\n    ",88],["T_COMMENT","\/**#@+\n     *  Default success messages\n     *\/",90],["T_WHITESPACE","\n    ",92],["T_CONST","const",93],["T_WHITESPACE"," ",93],["T_STRING","RESOURCE_UPDATED_SUCCESSFUL",93],["T_WHITESPACE"," ",93],"=",["T_WHITESPACE"," ",93],["T_CONSTANT_ENCAPSED_STRING","'Resource updated successful.'",93],";",["T_WHITESPACE","\n    ",93],["T_COMMENT","\/**#@-*\/",94],["T_WHITESPACE","\n\n    ",94],["T_COMMENT","\/**#@+\n     * Collection page sizes\n     *\/",96],["T_WHITESPACE","\n    ",98],["T_CONST","const",99],["T_WHITESPACE"," ",99],["T_STRING","PAGE_SIZE_DEFAULT",99],["T_WHITESPACE"," ",99],"=",["T_WHITESPACE"," ",99],["T_LNUMBER","10",99],";",["T_WHITESPACE","\n    ",99],["T_CONST","const",100],["T_WHITESPACE"," ",100],["T_STRING","PAGE_SIZE_MAX",100],["T_WHITESPACE","     ",100],"=",["T_WHITESPACE"," ",100],["T_LNUMBER","100",100],";",["T_WHITESPACE","\n    ",100],["T_COMMENT","\/**#@-*\/",101],["T_WHITESPACE","\n\n    ",101],["T_DOC_COMMENT","\/**\n     * Request\n     *\n     * @var Mage_Api2_Model_Request\n     *\/",103],["T_WHITESPACE","\n    ",107],["T_PROTECTED","protected",108],["T_WHITESPACE"," ",108],["T_VARIABLE","$_request",108],";",["T_WHITESPACE","\n\n    ",108],["T_DOC_COMMENT","\/**\n     * Resource type\n     *\n     * @var string\n     *\/",110],["T_WHITESPACE","\n    ",114],["T_PROTECTED","protected",115],["T_WHITESPACE"," ",115],["T_VARIABLE","$_resourceType",115],";",["T_WHITESPACE","\n\n    ",115],["T_DOC_COMMENT","\/**\n     * Api type\n     *\n     * @var string\n     *\/",117],["T_WHITESPACE","\n    ",121],["T_PROTECTED","protected",122],["T_WHITESPACE"," ",122],["T_VARIABLE","$_apiType",122],";",["T_WHITESPACE","\n\n    ",122],["T_DOC_COMMENT","\/**\n     * API Version\n     *\n     * @var int\n     *\/",124],["T_WHITESPACE","\n    ",128],["T_PROTECTED","protected",129],["T_WHITESPACE"," ",129],["T_VARIABLE","$_version",129],["T_WHITESPACE"," ",129],"=",["T_WHITESPACE"," ",129],["T_STRING","null",129],";",["T_WHITESPACE","\n\n    ",129],["T_DOC_COMMENT","\/**\n     * Response\n     *\n     * @var Zend_Controller_Response_Http\n     *\/",131],["T_WHITESPACE","\n    ",135],["T_PROTECTED","protected",136],["T_WHITESPACE"," ",136],["T_VARIABLE","$_response",136],";",["T_WHITESPACE","\n\n    ",136],["T_DOC_COMMENT","\/**\n     * Attribute Filter\n     *\n     * @var  Mage_Api2_Model_Acl_Filter\n     *\/",138],["T_WHITESPACE","\n    ",142],["T_PROTECTED","protected",143],["T_WHITESPACE"," ",143],["T_VARIABLE","$_filter",143],";",["T_WHITESPACE","\n\n    ",143],["T_DOC_COMMENT","\/**\n     * Renderer\n     *\n     * @var Mage_Api2_Model_Renderer_Interface\n     *\/",145],["T_WHITESPACE","\n    ",149],["T_PROTECTED","protected",150],["T_WHITESPACE"," ",150],["T_VARIABLE","$_renderer",150],";",["T_WHITESPACE","\n\n    ",150],["T_DOC_COMMENT","\/**\n     * Api user\n     *\n     * @var Mage_Api2_Model_Auth_User_Abstract\n     *\/",152],["T_WHITESPACE","\n    ",156],["T_PROTECTED","protected",157],["T_WHITESPACE"," ",157],["T_VARIABLE","$_apiUser",157],";",["T_WHITESPACE","\n\n    ",157],["T_DOC_COMMENT","\/**\n     * User type\n     *\n     * @var string\n     *\/",159],["T_WHITESPACE","\n    ",163],["T_PROTECTED","protected",164],["T_WHITESPACE"," ",164],["T_VARIABLE","$_userType",164],";",["T_WHITESPACE","\n\n    ",164],["T_DOC_COMMENT","\/**\n     * One of Mage_Api2_Model_Resource::ACTION_TYPE_... constant\n     *\n     * @var string\n     *\/",166],["T_WHITESPACE","\n    ",170],["T_PROTECTED","protected",171],["T_WHITESPACE"," ",171],["T_VARIABLE","$_actionType",171],";",["T_WHITESPACE","\n\n    ",171],["T_DOC_COMMENT","\/**\n     * One of Mage_Api2_Model_Resource::OPERATION_... constant\n     *\n     * @var string\n     *\/",173],["T_WHITESPACE","\n    ",177],["T_PROTECTED","protected",178],["T_WHITESPACE"," ",178],["T_VARIABLE","$_operation",178],";",["T_WHITESPACE","\n\n    ",178],["T_DOC_COMMENT","\/**\n     * If TRUE - no rendering will be done and dispatch will return data. Otherwise, by default\n     *\n     * @var bool\n     *\/",180],["T_WHITESPACE","\n    ",184],["T_PROTECTED","protected",185],["T_WHITESPACE"," ",185],["T_VARIABLE","$_returnData",185],["T_WHITESPACE"," ",185],"=",["T_WHITESPACE"," ",185],["T_STRING","false",185],";",["T_WHITESPACE","\n\n    ",185],["T_DOC_COMMENT","\/**\n     * @var Mage_Api2_Model_Multicall\n     *\/",187],["T_WHITESPACE","\n    ",189],["T_PROTECTED","protected",190],["T_WHITESPACE"," ",190],["T_VARIABLE","$_multicall",190],";",["T_WHITESPACE","\n\n    ",190],["T_DOC_COMMENT","\/**\n     * Dispatch\n     * To implement the functionality, you must create a method in the parent one.\n     *\n     * Action type is defined in api2.xml in the routes section and depends on entity (single object)\n     * or collection (several objects).\n     *\n     * HTTP_MULTI_STATUS is used for several status codes in the response\n     *\/",192],["T_WHITESPACE","\n    ",200],["T_PUBLIC","public",201],["T_WHITESPACE"," ",201],["T_FUNCTION","function",201],["T_WHITESPACE"," ",201],["T_STRING","dispatch",201],"(",")",["T_WHITESPACE","\n    ",201],"{",["T_WHITESPACE","\n        ",202],["T_SWITCH","switch",203],["T_WHITESPACE"," ",203],"(",["T_VARIABLE","$this",203],["T_OBJECT_OPERATOR","->",203],["T_STRING","getActionType",203],"(",")",["T_WHITESPACE"," ",203],".",["T_WHITESPACE"," ",203],["T_VARIABLE","$this",203],["T_OBJECT_OPERATOR","->",203],["T_STRING","getOperation",203],"(",")",")",["T_WHITESPACE"," ",203],"{",["T_WHITESPACE","\n            ",203],["T_COMMENT","\/* Create *\/",204],["T_WHITESPACE","\n            ",204],["T_CASE","case",205],["T_WHITESPACE"," ",205],["T_STRING","self",205],["T_DOUBLE_COLON","::",205],["T_STRING","ACTION_TYPE_ENTITY",205],["T_WHITESPACE"," ",205],".",["T_WHITESPACE"," ",205],["T_STRING","self",205],["T_DOUBLE_COLON","::",205],["T_STRING","OPERATION_CREATE",205],":",["T_WHITESPACE","\n                ",205],["T_COMMENT","\/\/ Creation of objects is possible only when working with collection\n",206],["T_WHITESPACE","                ",207],["T_VARIABLE","$this",207],["T_OBJECT_OPERATOR","->",207],["T_STRING","_critical",207],"(",["T_STRING","self",207],["T_DOUBLE_COLON","::",207],["T_STRING","RESOURCE_METHOD_NOT_IMPLEMENTED",207],")",";",["T_WHITESPACE","\n                ",207],["T_BREAK","break",208],";",["T_WHITESPACE","\n            ",208],["T_CASE","case",209],["T_WHITESPACE"," ",209],["T_STRING","self",209],["T_DOUBLE_COLON","::",209],["T_STRING","ACTION_TYPE_COLLECTION",209],["T_WHITESPACE"," ",209],".",["T_WHITESPACE"," ",209],["T_STRING","self",209],["T_DOUBLE_COLON","::",209],["T_STRING","OPERATION_CREATE",209],":",["T_WHITESPACE","\n                ",209],["T_COMMENT","\/\/ If no of the methods(multi or single) is implemented, request body is not checked\n",210],["T_WHITESPACE","                ",211],["T_IF","if",211],["T_WHITESPACE"," ",211],"(","!",["T_VARIABLE","$this",211],["T_OBJECT_OPERATOR","->",211],["T_STRING","_checkMethodExist",211],"(",["T_CONSTANT_ENCAPSED_STRING","'_create'",211],")",["T_WHITESPACE"," ",211],["T_BOOLEAN_AND","&&",211],["T_WHITESPACE"," ",211],"!",["T_VARIABLE","$this",211],["T_OBJECT_OPERATOR","->",211],["T_STRING","_checkMethodExist",211],"(",["T_CONSTANT_ENCAPSED_STRING","'_multiCreate'",211],")",")",["T_WHITESPACE"," ",211],"{",["T_WHITESPACE","\n                    ",211],["T_VARIABLE","$this",212],["T_OBJECT_OPERATOR","->",212],["T_STRING","_critical",212],"(",["T_STRING","self",212],["T_DOUBLE_COLON","::",212],["T_STRING","RESOURCE_METHOD_NOT_IMPLEMENTED",212],")",";",["T_WHITESPACE","\n                ",212],"}",["T_WHITESPACE","\n                ",213],["T_COMMENT","\/\/ If one of the methods(multi or single) is implemented, request body must not be empty\n",214],["T_WHITESPACE","                ",215],["T_VARIABLE","$requestData",215],["T_WHITESPACE"," ",215],"=",["T_WHITESPACE"," ",215],["T_VARIABLE","$this",215],["T_OBJECT_OPERATOR","->",215],["T_STRING","getRequest",215],"(",")",["T_OBJECT_OPERATOR","->",215],["T_STRING","getBodyParams",215],"(",")",";",["T_WHITESPACE","\n                ",215],["T_IF","if",216],["T_WHITESPACE"," ",216],"(",["T_EMPTY","empty",216],"(",["T_VARIABLE","$requestData",216],")",")",["T_WHITESPACE"," ",216],"{",["T_WHITESPACE","\n                    ",216],["T_VARIABLE","$this",217],["T_OBJECT_OPERATOR","->",217],["T_STRING","_critical",217],"(",["T_STRING","self",217],["T_DOUBLE_COLON","::",217],["T_STRING","RESOURCE_REQUEST_DATA_INVALID",217],")",";",["T_WHITESPACE","\n                ",217],"}",["T_WHITESPACE","\n                ",218],["T_COMMENT","\/\/ The create action has the dynamic type which depends on data in the request body\n",219],["T_WHITESPACE","                ",220],["T_IF","if",220],["T_WHITESPACE"," ",220],"(",["T_VARIABLE","$this",220],["T_OBJECT_OPERATOR","->",220],["T_STRING","getRequest",220],"(",")",["T_OBJECT_OPERATOR","->",220],["T_STRING","isAssocArrayInRequestBody",220],"(",")",")",["T_WHITESPACE"," ",220],"{",["T_WHITESPACE","\n                    ",220],["T_VARIABLE","$this",221],["T_OBJECT_OPERATOR","->",221],["T_STRING","_errorIfMethodNotExist",221],"(",["T_CONSTANT_ENCAPSED_STRING","'_create'",221],")",";",["T_WHITESPACE","\n                    ",221],["T_VARIABLE","$filteredData",222],["T_WHITESPACE"," ",222],"=",["T_WHITESPACE"," ",222],["T_VARIABLE","$this",222],["T_OBJECT_OPERATOR","->",222],["T_STRING","getFilter",222],"(",")",["T_OBJECT_OPERATOR","->",222],["T_STRING","in",222],"(",["T_VARIABLE","$requestData",222],")",";",["T_WHITESPACE","\n                    ",222],["T_IF","if",223],["T_WHITESPACE"," ",223],"(",["T_EMPTY","empty",223],"(",["T_VARIABLE","$filteredData",223],")",")",["T_WHITESPACE"," ",223],"{",["T_WHITESPACE","\n                        ",223],["T_VARIABLE","$this",224],["T_OBJECT_OPERATOR","->",224],["T_STRING","_critical",224],"(",["T_STRING","self",224],["T_DOUBLE_COLON","::",224],["T_STRING","RESOURCE_REQUEST_DATA_INVALID",224],")",";",["T_WHITESPACE","\n                    ",224],"}",["T_WHITESPACE","\n                    ",225],["T_VARIABLE","$newItemLocation",226],["T_WHITESPACE"," ",226],"=",["T_WHITESPACE"," ",226],["T_VARIABLE","$this",226],["T_OBJECT_OPERATOR","->",226],["T_STRING","_create",226],"(",["T_VARIABLE","$filteredData",226],")",";",["T_WHITESPACE","\n                    ",226],["T_VARIABLE","$this",227],["T_OBJECT_OPERATOR","->",227],["T_STRING","getResponse",227],"(",")",["T_OBJECT_OPERATOR","->",227],["T_STRING","setHeader",227],"(",["T_CONSTANT_ENCAPSED_STRING","'Location'",227],",",["T_WHITESPACE"," ",227],["T_VARIABLE","$newItemLocation",227],")",";",["T_WHITESPACE","\n                ",227],"}",["T_WHITESPACE"," ",228],["T_ELSE","else",228],["T_WHITESPACE"," ",228],"{",["T_WHITESPACE","\n                    ",228],["T_VARIABLE","$this",229],["T_OBJECT_OPERATOR","->",229],["T_STRING","_errorIfMethodNotExist",229],"(",["T_CONSTANT_ENCAPSED_STRING","'_multiCreate'",229],")",";",["T_WHITESPACE","\n                    ",229],["T_VARIABLE","$filteredData",230],["T_WHITESPACE"," ",230],"=",["T_WHITESPACE"," ",230],["T_VARIABLE","$this",230],["T_OBJECT_OPERATOR","->",230],["T_STRING","getFilter",230],"(",")",["T_OBJECT_OPERATOR","->",230],["T_STRING","collectionIn",230],"(",["T_VARIABLE","$requestData",230],")",";",["T_WHITESPACE","\n                    ",230],["T_VARIABLE","$this",231],["T_OBJECT_OPERATOR","->",231],["T_STRING","_multiCreate",231],"(",["T_VARIABLE","$filteredData",231],")",";",["T_WHITESPACE","\n                    ",231],["T_VARIABLE","$this",232],["T_OBJECT_OPERATOR","->",232],["T_STRING","_render",232],"(",["T_VARIABLE","$this",232],["T_OBJECT_OPERATOR","->",232],["T_STRING","getResponse",232],"(",")",["T_OBJECT_OPERATOR","->",232],["T_STRING","getMessages",232],"(",")",")",";",["T_WHITESPACE","\n                    ",232],["T_VARIABLE","$this",233],["T_OBJECT_OPERATOR","->",233],["T_STRING","getResponse",233],"(",")",["T_OBJECT_OPERATOR","->",233],["T_STRING","setHttpResponseCode",233],"(",["T_STRING","Mage_Api2_Model_Server",233],["T_DOUBLE_COLON","::",233],["T_STRING","HTTP_MULTI_STATUS",233],")",";",["T_WHITESPACE","\n                ",233],"}",["T_WHITESPACE","\n                ",234],["T_BREAK","break",235],";",["T_WHITESPACE","\n            ",235],["T_COMMENT","\/* Retrieve *\/",236],["T_WHITESPACE","\n            ",236],["T_CASE","case",237],["T_WHITESPACE"," ",237],["T_STRING","self",237],["T_DOUBLE_COLON","::",237],["T_STRING","ACTION_TYPE_ENTITY",237],["T_WHITESPACE"," ",237],".",["T_WHITESPACE"," ",237],["T_STRING","self",237],["T_DOUBLE_COLON","::",237],["T_STRING","OPERATION_RETRIEVE",237],":",["T_WHITESPACE","\n                ",237],["T_VARIABLE","$this",238],["T_OBJECT_OPERATOR","->",238],["T_STRING","_errorIfMethodNotExist",238],"(",["T_CONSTANT_ENCAPSED_STRING","'_retrieve'",238],")",";",["T_WHITESPACE","\n                ",238],["T_VARIABLE","$retrievedData",239],["T_WHITESPACE"," ",239],"=",["T_WHITESPACE"," ",239],["T_VARIABLE","$this",239],["T_OBJECT_OPERATOR","->",239],["T_STRING","_retrieve",239],"(",")",";",["T_WHITESPACE","\n                ",239],["T_VARIABLE","$filteredData",240],["T_WHITESPACE","  ",240],"=",["T_WHITESPACE"," ",240],["T_VARIABLE","$this",240],["T_OBJECT_OPERATOR","->",240],["T_STRING","getFilter",240],"(",")",["T_OBJECT_OPERATOR","->",240],["T_STRING","out",240],"(",["T_VARIABLE","$retrievedData",240],")",";",["T_WHITESPACE","\n                ",240],["T_VARIABLE","$this",241],["T_OBJECT_OPERATOR","->",241],["T_STRING","_render",241],"(",["T_VARIABLE","$filteredData",241],")",";",["T_WHITESPACE","\n                ",241],["T_BREAK","break",242],";",["T_WHITESPACE","\n            ",242],["T_CASE","case",243],["T_WHITESPACE"," ",243],["T_STRING","self",243],["T_DOUBLE_COLON","::",243],["T_STRING","ACTION_TYPE_COLLECTION",243],["T_WHITESPACE"," ",243],".",["T_WHITESPACE"," ",243],["T_STRING","self",243],["T_DOUBLE_COLON","::",243],["T_STRING","OPERATION_RETRIEVE",243],":",["T_WHITESPACE","\n                ",243],["T_VARIABLE","$this",244],["T_OBJECT_OPERATOR","->",244],["T_STRING","_errorIfMethodNotExist",244],"(",["T_CONSTANT_ENCAPSED_STRING","'_retrieveCollection'",244],")",";",["T_WHITESPACE","\n                ",244],["T_VARIABLE","$retrievedData",245],["T_WHITESPACE"," ",245],"=",["T_WHITESPACE"," ",245],["T_VARIABLE","$this",245],["T_OBJECT_OPERATOR","->",245],["T_STRING","_retrieveCollection",245],"(",")",";",["T_WHITESPACE","\n                ",245],["T_VARIABLE","$filteredData",246],["T_WHITESPACE","  ",246],"=",["T_WHITESPACE"," ",246],["T_VARIABLE","$this",246],["T_OBJECT_OPERATOR","->",246],["T_STRING","getFilter",246],"(",")",["T_OBJECT_OPERATOR","->",246],["T_STRING","collectionOut",246],"(",["T_VARIABLE","$retrievedData",246],")",";",["T_WHITESPACE","\n                ",246],["T_VARIABLE","$this",247],["T_OBJECT_OPERATOR","->",247],["T_STRING","_render",247],"(",["T_VARIABLE","$filteredData",247],")",";",["T_WHITESPACE","\n                ",247],["T_BREAK","break",248],";",["T_WHITESPACE","\n            ",248],["T_COMMENT","\/* Update *\/",249],["T_WHITESPACE","\n            ",249],["T_CASE","case",250],["T_WHITESPACE"," ",250],["T_STRING","self",250],["T_DOUBLE_COLON","::",250],["T_STRING","ACTION_TYPE_ENTITY",250],["T_WHITESPACE"," ",250],".",["T_WHITESPACE"," ",250],["T_STRING","self",250],["T_DOUBLE_COLON","::",250],["T_STRING","OPERATION_UPDATE",250],":",["T_WHITESPACE","\n                ",250],["T_VARIABLE","$this",251],["T_OBJECT_OPERATOR","->",251],["T_STRING","_errorIfMethodNotExist",251],"(",["T_CONSTANT_ENCAPSED_STRING","'_update'",251],")",";",["T_WHITESPACE","\n                ",251],["T_VARIABLE","$requestData",252],["T_WHITESPACE"," ",252],"=",["T_WHITESPACE"," ",252],["T_VARIABLE","$this",252],["T_OBJECT_OPERATOR","->",252],["T_STRING","getRequest",252],"(",")",["T_OBJECT_OPERATOR","->",252],["T_STRING","getBodyParams",252],"(",")",";",["T_WHITESPACE","\n                ",252],["T_IF","if",253],["T_WHITESPACE"," ",253],"(",["T_EMPTY","empty",253],"(",["T_VARIABLE","$requestData",253],")",")",["T_WHITESPACE"," ",253],"{",["T_WHITESPACE","\n                    ",253],["T_VARIABLE","$this",254],["T_OBJECT_OPERATOR","->",254],["T_STRING","_critical",254],"(",["T_STRING","self",254],["T_DOUBLE_COLON","::",254],["T_STRING","RESOURCE_REQUEST_DATA_INVALID",254],")",";",["T_WHITESPACE","\n                ",254],"}",["T_WHITESPACE","\n                ",255],["T_VARIABLE","$filteredData",256],["T_WHITESPACE"," ",256],"=",["T_WHITESPACE"," ",256],["T_VARIABLE","$this",256],["T_OBJECT_OPERATOR","->",256],["T_STRING","getFilter",256],"(",")",["T_OBJECT_OPERATOR","->",256],["T_STRING","in",256],"(",["T_VARIABLE","$requestData",256],")",";",["T_WHITESPACE","\n                ",256],["T_IF","if",257],["T_WHITESPACE"," ",257],"(",["T_EMPTY","empty",257],"(",["T_VARIABLE","$filteredData",257],")",")",["T_WHITESPACE"," ",257],"{",["T_WHITESPACE","\n                    ",257],["T_VARIABLE","$this",258],["T_OBJECT_OPERATOR","->",258],["T_STRING","_critical",258],"(",["T_STRING","self",258],["T_DOUBLE_COLON","::",258],["T_STRING","RESOURCE_REQUEST_DATA_INVALID",258],")",";",["T_WHITESPACE","\n                ",258],"}",["T_WHITESPACE","\n                ",259],["T_VARIABLE","$this",260],["T_OBJECT_OPERATOR","->",260],["T_STRING","_update",260],"(",["T_VARIABLE","$filteredData",260],")",";",["T_WHITESPACE","\n                ",260],["T_BREAK","break",261],";",["T_WHITESPACE","\n            ",261],["T_CASE","case",262],["T_WHITESPACE"," ",262],["T_STRING","self",262],["T_DOUBLE_COLON","::",262],["T_STRING","ACTION_TYPE_COLLECTION",262],["T_WHITESPACE"," ",262],".",["T_WHITESPACE"," ",262],["T_STRING","self",262],["T_DOUBLE_COLON","::",262],["T_STRING","OPERATION_UPDATE",262],":",["T_WHITESPACE","\n                ",262],["T_VARIABLE","$this",263],["T_OBJECT_OPERATOR","->",263],["T_STRING","_errorIfMethodNotExist",263],"(",["T_CONSTANT_ENCAPSED_STRING","'_multiUpdate'",263],")",";",["T_WHITESPACE","\n                ",263],["T_VARIABLE","$requestData",264],["T_WHITESPACE"," ",264],"=",["T_WHITESPACE"," ",264],["T_VARIABLE","$this",264],["T_OBJECT_OPERATOR","->",264],["T_STRING","getRequest",264],"(",")",["T_OBJECT_OPERATOR","->",264],["T_STRING","getBodyParams",264],"(",")",";",["T_WHITESPACE","\n                ",264],["T_IF","if",265],["T_WHITESPACE"," ",265],"(",["T_EMPTY","empty",265],"(",["T_VARIABLE","$requestData",265],")",")",["T_WHITESPACE"," ",265],"{",["T_WHITESPACE","\n                    ",265],["T_VARIABLE","$this",266],["T_OBJECT_OPERATOR","->",266],["T_STRING","_critical",266],"(",["T_STRING","self",266],["T_DOUBLE_COLON","::",266],["T_STRING","RESOURCE_REQUEST_DATA_INVALID",266],")",";",["T_WHITESPACE","\n                ",266],"}",["T_WHITESPACE","\n                ",267],["T_VARIABLE","$filteredData",268],["T_WHITESPACE"," ",268],"=",["T_WHITESPACE"," ",268],["T_VARIABLE","$this",268],["T_OBJECT_OPERATOR","->",268],["T_STRING","getFilter",268],"(",")",["T_OBJECT_OPERATOR","->",268],["T_STRING","collectionIn",268],"(",["T_VARIABLE","$requestData",268],")",";",["T_WHITESPACE","\n                ",268],["T_VARIABLE","$this",269],["T_OBJECT_OPERATOR","->",269],["T_STRING","_multiUpdate",269],"(",["T_VARIABLE","$filteredData",269],")",";",["T_WHITESPACE","\n                ",269],["T_VARIABLE","$this",270],["T_OBJECT_OPERATOR","->",270],["T_STRING","_render",270],"(",["T_VARIABLE","$this",270],["T_OBJECT_OPERATOR","->",270],["T_STRING","getResponse",270],"(",")",["T_OBJECT_OPERATOR","->",270],["T_STRING","getMessages",270],"(",")",")",";",["T_WHITESPACE","\n                ",270],["T_VARIABLE","$this",271],["T_OBJECT_OPERATOR","->",271],["T_STRING","getResponse",271],"(",")",["T_OBJECT_OPERATOR","->",271],["T_STRING","setHttpResponseCode",271],"(",["T_STRING","Mage_Api2_Model_Server",271],["T_DOUBLE_COLON","::",271],["T_STRING","HTTP_MULTI_STATUS",271],")",";",["T_WHITESPACE","\n                ",271],["T_BREAK","break",272],";",["T_WHITESPACE","\n            ",272],["T_COMMENT","\/* Delete *\/",273],["T_WHITESPACE","\n            ",273],["T_CASE","case",274],["T_WHITESPACE"," ",274],["T_STRING","self",274],["T_DOUBLE_COLON","::",274],["T_STRING","ACTION_TYPE_ENTITY",274],["T_WHITESPACE"," ",274],".",["T_WHITESPACE"," ",274],["T_STRING","self",274],["T_DOUBLE_COLON","::",274],["T_STRING","OPERATION_DELETE",274],":",["T_WHITESPACE","\n                ",274],["T_VARIABLE","$this",275],["T_OBJECT_OPERATOR","->",275],["T_STRING","_errorIfMethodNotExist",275],"(",["T_CONSTANT_ENCAPSED_STRING","'_delete'",275],")",";",["T_WHITESPACE","\n                ",275],["T_VARIABLE","$this",276],["T_OBJECT_OPERATOR","->",276],["T_STRING","_delete",276],"(",")",";",["T_WHITESPACE","\n                ",276],["T_BREAK","break",277],";",["T_WHITESPACE","\n            ",277],["T_CASE","case",278],["T_WHITESPACE"," ",278],["T_STRING","self",278],["T_DOUBLE_COLON","::",278],["T_STRING","ACTION_TYPE_COLLECTION",278],["T_WHITESPACE"," ",278],".",["T_WHITESPACE"," ",278],["T_STRING","self",278],["T_DOUBLE_COLON","::",278],["T_STRING","OPERATION_DELETE",278],":",["T_WHITESPACE","\n                ",278],["T_VARIABLE","$this",279],["T_OBJECT_OPERATOR","->",279],["T_STRING","_errorIfMethodNotExist",279],"(",["T_CONSTANT_ENCAPSED_STRING","'_multiDelete'",279],")",";",["T_WHITESPACE","\n                ",279],["T_VARIABLE","$requestData",280],["T_WHITESPACE"," ",280],"=",["T_WHITESPACE"," ",280],["T_VARIABLE","$this",280],["T_OBJECT_OPERATOR","->",280],["T_STRING","getRequest",280],"(",")",["T_OBJECT_OPERATOR","->",280],["T_STRING","getBodyParams",280],"(",")",";",["T_WHITESPACE","\n                ",280],["T_IF","if",281],["T_WHITESPACE"," ",281],"(",["T_EMPTY","empty",281],"(",["T_VARIABLE","$requestData",281],")",")",["T_WHITESPACE"," ",281],"{",["T_WHITESPACE","\n                    ",281],["T_VARIABLE","$this",282],["T_OBJECT_OPERATOR","->",282],["T_STRING","_critical",282],"(",["T_STRING","self",282],["T_DOUBLE_COLON","::",282],["T_STRING","RESOURCE_REQUEST_DATA_INVALID",282],")",";",["T_WHITESPACE","\n                ",282],"}",["T_WHITESPACE","\n                ",283],["T_VARIABLE","$this",284],["T_OBJECT_OPERATOR","->",284],["T_STRING","_multiDelete",284],"(",["T_VARIABLE","$requestData",284],")",";",["T_WHITESPACE","\n                ",284],["T_VARIABLE","$this",285],["T_OBJECT_OPERATOR","->",285],["T_STRING","getResponse",285],"(",")",["T_OBJECT_OPERATOR","->",285],["T_STRING","setHttpResponseCode",285],"(",["T_STRING","Mage_Api2_Model_Server",285],["T_DOUBLE_COLON","::",285],["T_STRING","HTTP_MULTI_STATUS",285],")",";",["T_WHITESPACE","\n                ",285],["T_BREAK","break",286],";",["T_WHITESPACE","\n            ",286],["T_DEFAULT","default",287],":",["T_WHITESPACE","\n                ",287],["T_VARIABLE","$this",288],["T_OBJECT_OPERATOR","->",288],["T_STRING","_critical",288],"(",["T_STRING","self",288],["T_DOUBLE_COLON","::",288],["T_STRING","RESOURCE_METHOD_NOT_IMPLEMENTED",288],")",";",["T_WHITESPACE","\n                ",288],["T_BREAK","break",289],";",["T_WHITESPACE","\n        ",289],"}",["T_WHITESPACE","\n    ",290],"}",["T_WHITESPACE","\n\n    ",291],["T_DOC_COMMENT","\/**\n     * Trigger error for not-implemented operations\n     *\n     * @param $methodName\n     *\/",293],["T_WHITESPACE","\n    ",297],["T_PROTECTED","protected",298],["T_WHITESPACE"," ",298],["T_FUNCTION","function",298],["T_WHITESPACE"," ",298],["T_STRING","_errorIfMethodNotExist",298],"(",["T_VARIABLE","$methodName",298],")",["T_WHITESPACE","\n    ",298],"{",["T_WHITESPACE","\n        ",299],["T_IF","if",300],["T_WHITESPACE"," ",300],"(","!",["T_VARIABLE","$this",300],["T_OBJECT_OPERATOR","->",300],["T_STRING","_checkMethodExist",300],"(",["T_VARIABLE","$methodName",300],")",")",["T_WHITESPACE"," ",300],"{",["T_WHITESPACE","\n            ",300],["T_VARIABLE","$this",301],["T_OBJECT_OPERATOR","->",301],["T_STRING","_critical",301],"(",["T_STRING","self",301],["T_DOUBLE_COLON","::",301],["T_STRING","RESOURCE_METHOD_NOT_IMPLEMENTED",301],")",";",["T_WHITESPACE","\n        ",301],"}",["T_WHITESPACE","\n    ",302],"}",["T_WHITESPACE","\n\n    ",303],["T_DOC_COMMENT","\/**\n     * Check method exist\n     *\n     * @param $methodName\n     * @return bool\n     *\/",305],["T_WHITESPACE","\n    ",310],["T_PROTECTED","protected",311],["T_WHITESPACE"," ",311],["T_FUNCTION","function",311],["T_WHITESPACE"," ",311],["T_STRING","_checkMethodExist",311],"(",["T_VARIABLE","$methodName",311],")",["T_WHITESPACE","\n    ",311],"{",["T_WHITESPACE","\n        ",312],["T_RETURN","return",313],["T_WHITESPACE"," ",313],["T_STRING","method_exists",313],"(",["T_VARIABLE","$this",313],",",["T_WHITESPACE"," ",313],["T_VARIABLE","$methodName",313],")",";",["T_WHITESPACE","\n    ",313],"}",["T_WHITESPACE","\n\n    ",314],["T_DOC_COMMENT","\/**\n     * Get request\n     *\n     * @throws Exception\n     * @return Mage_Api2_Model_Request\n     *\/",316],["T_WHITESPACE","\n    ",321],["T_PUBLIC","public",322],["T_WHITESPACE"," ",322],["T_FUNCTION","function",322],["T_WHITESPACE"," ",322],["T_STRING","getRequest",322],"(",")",["T_WHITESPACE","\n    ",322],"{",["T_WHITESPACE","\n        ",323],["T_IF","if",324],["T_WHITESPACE"," ",324],"(","!",["T_VARIABLE","$this",324],["T_OBJECT_OPERATOR","->",324],["T_STRING","_request",324],")",["T_WHITESPACE"," ",324],"{",["T_WHITESPACE","\n            ",324],["T_THROW","throw",325],["T_WHITESPACE"," ",325],["T_NEW","new",325],["T_WHITESPACE"," ",325],["T_STRING","Exception",325],"(",["T_CONSTANT_ENCAPSED_STRING","'Request is not set.'",325],")",";",["T_WHITESPACE","\n        ",325],"}",["T_WHITESPACE","\n        ",326],["T_RETURN","return",327],["T_WHITESPACE"," ",327],["T_VARIABLE","$this",327],["T_OBJECT_OPERATOR","->",327],["T_STRING","_request",327],";",["T_WHITESPACE","\n    ",327],"}",["T_WHITESPACE","\n\n    ",328],["T_DOC_COMMENT","\/**\n     * Set request\n     *\n     * @param Mage_Api2_Model_Request $request\n     * @return Mage_Api2_Model_Resource\n     *\/",330],["T_WHITESPACE","\n    ",335],["T_PUBLIC","public",336],["T_WHITESPACE"," ",336],["T_FUNCTION","function",336],["T_WHITESPACE"," ",336],["T_STRING","setRequest",336],"(",["T_STRING","Mage_Api2_Model_Request",336],["T_WHITESPACE"," ",336],["T_VARIABLE","$request",336],")",["T_WHITESPACE","\n    ",336],"{",["T_WHITESPACE","\n        ",337],["T_VARIABLE","$this",338],["T_OBJECT_OPERATOR","->",338],["T_STRING","setResourceType",338],"(",["T_VARIABLE","$request",338],["T_OBJECT_OPERATOR","->",338],["T_STRING","getResourceType",338],"(",")",")",";",["T_WHITESPACE","\n        ",338],["T_VARIABLE","$this",339],["T_OBJECT_OPERATOR","->",339],["T_STRING","setApiType",339],"(",["T_VARIABLE","$request",339],["T_OBJECT_OPERATOR","->",339],["T_STRING","getApiType",339],"(",")",")",";",["T_WHITESPACE","\n        ",339],["T_VARIABLE","$this",340],["T_OBJECT_OPERATOR","->",340],["T_STRING","_request",340],["T_WHITESPACE"," ",340],"=",["T_WHITESPACE"," ",340],["T_VARIABLE","$request",340],";",["T_WHITESPACE","\n        ",340],["T_RETURN","return",341],["T_WHITESPACE"," ",341],["T_VARIABLE","$this",341],";",["T_WHITESPACE","\n    ",341],"}",["T_WHITESPACE","\n\n    ",342],["T_DOC_COMMENT","\/**\n     * Get resource type\n     * If not exists get from Request\n     *\n     * @return string\n     *\/",344],["T_WHITESPACE","\n    ",349],["T_PUBLIC","public",350],["T_WHITESPACE"," ",350],["T_FUNCTION","function",350],["T_WHITESPACE"," ",350],["T_STRING","getResourceType",350],"(",")",["T_WHITESPACE","\n    ",350],"{",["T_WHITESPACE","\n        ",351],["T_IF","if",352],["T_WHITESPACE"," ",352],"(","!",["T_VARIABLE","$this",352],["T_OBJECT_OPERATOR","->",352],["T_STRING","_resourceType",352],")",["T_WHITESPACE"," ",352],"{",["T_WHITESPACE","\n            ",352],["T_VARIABLE","$this",353],["T_OBJECT_OPERATOR","->",353],["T_STRING","setResourceType",353],"(",["T_VARIABLE","$this",353],["T_OBJECT_OPERATOR","->",353],["T_STRING","getRequest",353],"(",")",["T_OBJECT_OPERATOR","->",353],["T_STRING","getResourceType",353],"(",")",")",";",["T_WHITESPACE","\n        ",353],"}",["T_WHITESPACE","\n        ",354],["T_RETURN","return",355],["T_WHITESPACE"," ",355],["T_VARIABLE","$this",355],["T_OBJECT_OPERATOR","->",355],["T_STRING","_resourceType",355],";",["T_WHITESPACE","\n    ",355],"}",["T_WHITESPACE","\n\n    ",356],["T_DOC_COMMENT","\/**\n     * Set resource type\n     *\n     * @param string $resourceType\n     * @return Mage_Api2_Model_Resource\n     *\/",358],["T_WHITESPACE","\n    ",363],["T_PUBLIC","public",364],["T_WHITESPACE"," ",364],["T_FUNCTION","function",364],["T_WHITESPACE"," ",364],["T_STRING","setResourceType",364],"(",["T_VARIABLE","$resourceType",364],")",["T_WHITESPACE","\n    ",364],"{",["T_WHITESPACE","\n        ",365],["T_VARIABLE","$this",366],["T_OBJECT_OPERATOR","->",366],["T_STRING","_resourceType",366],["T_WHITESPACE"," ",366],"=",["T_WHITESPACE"," ",366],["T_VARIABLE","$resourceType",366],";",["T_WHITESPACE","\n        ",366],["T_RETURN","return",367],["T_WHITESPACE"," ",367],["T_VARIABLE","$this",367],";",["T_WHITESPACE","\n    ",367],"}",["T_WHITESPACE","\n\n    ",368],["T_DOC_COMMENT","\/**\n     * Get API type\n     * If not exists get from Request.\n     *\n     * @return string\n     *\/",370],["T_WHITESPACE","\n    ",375],["T_PUBLIC","public",376],["T_WHITESPACE"," ",376],["T_FUNCTION","function",376],["T_WHITESPACE"," ",376],["T_STRING","getApiType",376],"(",")",["T_WHITESPACE","\n    ",376],"{",["T_WHITESPACE","\n        ",377],["T_IF","if",378],["T_WHITESPACE"," ",378],"(","!",["T_VARIABLE","$this",378],["T_OBJECT_OPERATOR","->",378],["T_STRING","_apiType",378],")",["T_WHITESPACE"," ",378],"{",["T_WHITESPACE","\n            ",378],["T_VARIABLE","$this",379],["T_OBJECT_OPERATOR","->",379],["T_STRING","setApiType",379],"(",["T_VARIABLE","$this",379],["T_OBJECT_OPERATOR","->",379],["T_STRING","getRequest",379],"(",")",["T_OBJECT_OPERATOR","->",379],["T_STRING","getApiType",379],"(",")",")",";",["T_WHITESPACE","\n        ",379],"}",["T_WHITESPACE","\n        ",380],["T_RETURN","return",381],["T_WHITESPACE"," ",381],["T_VARIABLE","$this",381],["T_OBJECT_OPERATOR","->",381],["T_STRING","_apiType",381],";",["T_WHITESPACE","\n    ",381],"}",["T_WHITESPACE","\n\n    ",382],["T_DOC_COMMENT","\/**\n     * Set API type\n     *\n     * @param string $apiType\n     * @return Mage_Api2_Model_Resource\n     *\/",384],["T_WHITESPACE","\n    ",389],["T_PUBLIC","public",390],["T_WHITESPACE"," ",390],["T_FUNCTION","function",390],["T_WHITESPACE"," ",390],["T_STRING","setApiType",390],"(",["T_VARIABLE","$apiType",390],")",["T_WHITESPACE","\n    ",390],"{",["T_WHITESPACE","\n        ",391],["T_VARIABLE","$this",392],["T_OBJECT_OPERATOR","->",392],["T_STRING","_apiType",392],["T_WHITESPACE"," ",392],"=",["T_WHITESPACE"," ",392],["T_VARIABLE","$apiType",392],";",["T_WHITESPACE","\n        ",392],["T_RETURN","return",393],["T_WHITESPACE"," ",393],["T_VARIABLE","$this",393],";",["T_WHITESPACE","\n    ",393],"}",["T_WHITESPACE","\n\n    ",394],["T_DOC_COMMENT","\/**\n     * Determine version from class name\n     *\n     * @return int\n     *\/",396],["T_WHITESPACE","\n    ",400],["T_PUBLIC","public",401],["T_WHITESPACE"," ",401],["T_FUNCTION","function",401],["T_WHITESPACE"," ",401],["T_STRING","getVersion",401],"(",")",["T_WHITESPACE","\n    ",401],"{",["T_WHITESPACE","\n        ",402],["T_IF","if",403],["T_WHITESPACE"," ",403],"(",["T_STRING","null",403],["T_WHITESPACE"," ",403],["T_IS_IDENTICAL","===",403],["T_WHITESPACE"," ",403],["T_VARIABLE","$this",403],["T_OBJECT_OPERATOR","->",403],["T_STRING","_version",403],")",["T_WHITESPACE"," ",403],"{",["T_WHITESPACE","\n            ",403],["T_IF","if",404],["T_WHITESPACE"," ",404],"(",["T_STRING","preg_match",404],"(",["T_CONSTANT_ENCAPSED_STRING","'\/^.+([1-9]\\d*)$\/'",404],",",["T_WHITESPACE"," ",404],["T_STRING","get_class",404],"(",["T_VARIABLE","$this",404],")",",",["T_WHITESPACE"," ",404],["T_VARIABLE","$matches",404],")",["T_WHITESPACE"," ",404],")",["T_WHITESPACE"," ",404],"{",["T_WHITESPACE","\n                ",404],["T_VARIABLE","$this",405],["T_OBJECT_OPERATOR","->",405],["T_STRING","setVersion",405],"(",["T_VARIABLE","$matches",405],"[",["T_LNUMBER","1",405],"]",")",";",["T_WHITESPACE","\n            ",405],"}",["T_WHITESPACE"," ",406],["T_ELSE","else",406],["T_WHITESPACE"," ",406],"{",["T_WHITESPACE","\n                ",406],["T_THROW","throw",407],["T_WHITESPACE"," ",407],["T_NEW","new",407],["T_WHITESPACE"," ",407],["T_STRING","Exception",407],"(",["T_CONSTANT_ENCAPSED_STRING","'Can not determine version from class name'",407],")",";",["T_WHITESPACE","\n            ",407],"}",["T_WHITESPACE","\n        ",408],"}",["T_WHITESPACE","\n        ",409],["T_RETURN","return",410],["T_WHITESPACE"," ",410],["T_VARIABLE","$this",410],["T_OBJECT_OPERATOR","->",410],["T_STRING","_version",410],";",["T_WHITESPACE","\n    ",410],"}",["T_WHITESPACE","\n\n    ",411],["T_DOC_COMMENT","\/**\n     * Set API version\n     *\n     * @param int $version\n     *\/",413],["T_WHITESPACE","\n    ",417],["T_PUBLIC","public",418],["T_WHITESPACE"," ",418],["T_FUNCTION","function",418],["T_WHITESPACE"," ",418],["T_STRING","setVersion",418],"(",["T_VARIABLE","$version",418],")",["T_WHITESPACE","\n    ",418],"{",["T_WHITESPACE","\n        ",419],["T_VARIABLE","$this",420],["T_OBJECT_OPERATOR","->",420],["T_STRING","_version",420],["T_WHITESPACE"," ",420],"=",["T_WHITESPACE"," ",420],["T_INT_CAST","(int)",420],["T_VARIABLE","$version",420],";",["T_WHITESPACE","\n    ",420],"}",["T_WHITESPACE","\n\n    ",421],["T_DOC_COMMENT","\/**\n     * Get response\n     *\n     * @return Mage_Api2_Model_Response\n     *\/",423],["T_WHITESPACE","\n    ",427],["T_PUBLIC","public",428],["T_WHITESPACE"," ",428],["T_FUNCTION","function",428],["T_WHITESPACE"," ",428],["T_STRING","getResponse",428],"(",")",["T_WHITESPACE","\n    ",428],"{",["T_WHITESPACE","\n        ",429],["T_IF","if",430],["T_WHITESPACE"," ",430],"(","!",["T_VARIABLE","$this",430],["T_OBJECT_OPERATOR","->",430],["T_STRING","_response",430],")",["T_WHITESPACE"," ",430],"{",["T_WHITESPACE","\n            ",430],["T_THROW","throw",431],["T_WHITESPACE"," ",431],["T_NEW","new",431],["T_WHITESPACE"," ",431],["T_STRING","Exception",431],"(",["T_CONSTANT_ENCAPSED_STRING","'Response is not set.'",431],")",";",["T_WHITESPACE","\n        ",431],"}",["T_WHITESPACE","\n        ",432],["T_RETURN","return",433],["T_WHITESPACE"," ",433],["T_VARIABLE","$this",433],["T_OBJECT_OPERATOR","->",433],["T_STRING","_response",433],";",["T_WHITESPACE","\n    ",433],"}",["T_WHITESPACE","\n\n    ",434],["T_DOC_COMMENT","\/**\n     * Set response\n     *\n     * @param Mage_Api2_Model_Response $response\n     *\/",436],["T_WHITESPACE","\n    ",440],["T_PUBLIC","public",441],["T_WHITESPACE"," ",441],["T_FUNCTION","function",441],["T_WHITESPACE"," ",441],["T_STRING","setResponse",441],"(",["T_STRING","Mage_Api2_Model_Response",441],["T_WHITESPACE"," ",441],["T_VARIABLE","$response",441],")",["T_WHITESPACE","\n    ",441],"{",["T_WHITESPACE","\n        ",442],["T_VARIABLE","$this",443],["T_OBJECT_OPERATOR","->",443],["T_STRING","_response",443],["T_WHITESPACE"," ",443],"=",["T_WHITESPACE"," ",443],["T_VARIABLE","$response",443],";",["T_WHITESPACE","\n    ",443],"}",["T_WHITESPACE","\n\n    ",444],["T_DOC_COMMENT","\/**\n     * Get filter if not exists create\n     *\n     * @return Mage_Api2_Model_Acl_Filter\n     *\/",446],["T_WHITESPACE","\n    ",450],["T_PUBLIC","public",451],["T_WHITESPACE"," ",451],["T_FUNCTION","function",451],["T_WHITESPACE"," ",451],["T_STRING","getFilter",451],"(",")",["T_WHITESPACE","\n    ",451],"{",["T_WHITESPACE","\n        ",452],["T_IF","if",453],["T_WHITESPACE"," ",453],"(","!",["T_VARIABLE","$this",453],["T_OBJECT_OPERATOR","->",453],["T_STRING","_filter",453],")",["T_WHITESPACE"," ",453],"{",["T_WHITESPACE","\n            ",453],["T_DOC_COMMENT","\/** @var $filter Mage_Api2_Model_Acl_Filter *\/",454],["T_WHITESPACE","\n            ",454],["T_VARIABLE","$filter",455],["T_WHITESPACE"," ",455],"=",["T_WHITESPACE"," ",455],["T_STRING","Mage",455],["T_DOUBLE_COLON","::",455],["T_STRING","getModel",455],"(",["T_CONSTANT_ENCAPSED_STRING","'api2\/acl_filter'",455],",",["T_WHITESPACE"," ",455],["T_VARIABLE","$this",455],")",";",["T_WHITESPACE","\n            ",455],["T_VARIABLE","$this",456],["T_OBJECT_OPERATOR","->",456],["T_STRING","setFilter",456],"(",["T_VARIABLE","$filter",456],")",";",["T_WHITESPACE","\n        ",456],"}",["T_WHITESPACE","\n        ",457],["T_RETURN","return",458],["T_WHITESPACE"," ",458],["T_VARIABLE","$this",458],["T_OBJECT_OPERATOR","->",458],["T_STRING","_filter",458],";",["T_WHITESPACE","\n    ",458],"}",["T_WHITESPACE","\n\n    ",459],["T_DOC_COMMENT","\/**\n     * Set filter\n     *\n     * @param Mage_Api2_Model_Acl_Filter $filter\n     *\/",461],["T_WHITESPACE","\n    ",465],["T_PUBLIC","public",466],["T_WHITESPACE"," ",466],["T_FUNCTION","function",466],["T_WHITESPACE"," ",466],["T_STRING","setFilter",466],"(",["T_STRING","Mage_Api2_Model_Acl_Filter",466],["T_WHITESPACE"," ",466],["T_VARIABLE","$filter",466],")",["T_WHITESPACE","\n    ",466],"{",["T_WHITESPACE","\n        ",467],["T_VARIABLE","$this",468],["T_OBJECT_OPERATOR","->",468],["T_STRING","_filter",468],["T_WHITESPACE"," ",468],"=",["T_WHITESPACE"," ",468],["T_VARIABLE","$filter",468],";",["T_WHITESPACE","\n    ",468],"}",["T_WHITESPACE","\n\n    ",469],["T_DOC_COMMENT","\/**\n     * Get renderer if not exists create\n     *\n     * @return Mage_Api2_Model_Renderer_Interface\n     *\/",471],["T_WHITESPACE","\n    ",475],["T_PUBLIC","public",476],["T_WHITESPACE"," ",476],["T_FUNCTION","function",476],["T_WHITESPACE"," ",476],["T_STRING","getRenderer",476],"(",")",["T_WHITESPACE","\n    ",476],"{",["T_WHITESPACE","\n        ",477],["T_IF","if",478],["T_WHITESPACE"," ",478],"(","!",["T_VARIABLE","$this",478],["T_OBJECT_OPERATOR","->",478],["T_STRING","_renderer",478],")",["T_WHITESPACE"," ",478],"{",["T_WHITESPACE","\n            ",478],["T_VARIABLE","$renderer",479],["T_WHITESPACE"," ",479],"=",["T_WHITESPACE"," ",479],["T_STRING","Mage_Api2_Model_Renderer",479],["T_DOUBLE_COLON","::",479],["T_STRING","factory",479],"(",["T_VARIABLE","$this",479],["T_OBJECT_OPERATOR","->",479],["T_STRING","getRequest",479],"(",")",["T_OBJECT_OPERATOR","->",479],["T_STRING","getAcceptTypes",479],"(",")",")",";",["T_WHITESPACE","\n            ",479],["T_VARIABLE","$this",480],["T_OBJECT_OPERATOR","->",480],["T_STRING","setRenderer",480],"(",["T_VARIABLE","$renderer",480],")",";",["T_WHITESPACE","\n        ",480],"}",["T_WHITESPACE","\n\n        ",481],["T_RETURN","return",483],["T_WHITESPACE"," ",483],["T_VARIABLE","$this",483],["T_OBJECT_OPERATOR","->",483],["T_STRING","_renderer",483],";",["T_WHITESPACE","\n    ",483],"}",["T_WHITESPACE","\n\n    ",484],["T_DOC_COMMENT","\/**\n     * Set renderer\n     *\n     * @param Mage_Api2_Model_Renderer_Interface $renderer\n     *\/",486],["T_WHITESPACE","\n    ",490],["T_PUBLIC","public",491],["T_WHITESPACE"," ",491],["T_FUNCTION","function",491],["T_WHITESPACE"," ",491],["T_STRING","setRenderer",491],"(",["T_STRING","Mage_Api2_Model_Renderer_Interface",491],["T_WHITESPACE"," ",491],["T_VARIABLE","$renderer",491],")",["T_WHITESPACE","\n    ",491],"{",["T_WHITESPACE","\n        ",492],["T_VARIABLE","$this",493],["T_OBJECT_OPERATOR","->",493],["T_STRING","_renderer",493],["T_WHITESPACE"," ",493],"=",["T_WHITESPACE"," ",493],["T_VARIABLE","$renderer",493],";",["T_WHITESPACE","\n    ",493],"}",["T_WHITESPACE","\n\n    ",494],["T_DOC_COMMENT","\/**\n     * Get user type\n     * If not exists get from apiUser\n     *\n     * @return string\n     *\/",496],["T_WHITESPACE","\n    ",501],["T_PUBLIC","public",502],["T_WHITESPACE"," ",502],["T_FUNCTION","function",502],["T_WHITESPACE"," ",502],["T_STRING","getUserType",502],"(",")",["T_WHITESPACE","\n    ",502],"{",["T_WHITESPACE","\n        ",503],["T_IF","if",504],["T_WHITESPACE"," ",504],"(","!",["T_VARIABLE","$this",504],["T_OBJECT_OPERATOR","->",504],["T_STRING","_userType",504],")",["T_WHITESPACE"," ",504],"{",["T_WHITESPACE","\n            ",504],["T_VARIABLE","$this",505],["T_OBJECT_OPERATOR","->",505],["T_STRING","setUserType",505],"(",["T_VARIABLE","$this",505],["T_OBJECT_OPERATOR","->",505],["T_STRING","getApiUser",505],"(",")",["T_OBJECT_OPERATOR","->",505],["T_STRING","getType",505],"(",")",")",";",["T_WHITESPACE","\n        ",505],"}",["T_WHITESPACE","\n        ",506],["T_RETURN","return",507],["T_WHITESPACE"," ",507],["T_VARIABLE","$this",507],["T_OBJECT_OPERATOR","->",507],["T_STRING","_userType",507],";",["T_WHITESPACE","\n    ",507],"}",["T_WHITESPACE","\n\n    ",508],["T_DOC_COMMENT","\/**\n     * Set user type\n     *\n     * @param string $userType\n     * @return Mage_Api2_Model_Resource\n     *\/",510],["T_WHITESPACE","\n    ",515],["T_PUBLIC","public",516],["T_WHITESPACE"," ",516],["T_FUNCTION","function",516],["T_WHITESPACE"," ",516],["T_STRING","setUserType",516],"(",["T_VARIABLE","$userType",516],")",["T_WHITESPACE","\n    ",516],"{",["T_WHITESPACE","\n        ",517],["T_VARIABLE","$this",518],["T_OBJECT_OPERATOR","->",518],["T_STRING","_userType",518],["T_WHITESPACE"," ",518],"=",["T_WHITESPACE"," ",518],["T_VARIABLE","$userType",518],";",["T_WHITESPACE","\n        ",518],["T_RETURN","return",519],["T_WHITESPACE"," ",519],["T_VARIABLE","$this",519],";",["T_WHITESPACE","\n    ",519],"}",["T_WHITESPACE","\n\n    ",520],["T_DOC_COMMENT","\/**\n     * Get API user\n     *\n     * @throws Exception\n     * @return Mage_Api2_Model_Auth_User_Abstract\n     *\/",522],["T_WHITESPACE","\n    ",527],["T_PUBLIC","public",528],["T_WHITESPACE"," ",528],["T_FUNCTION","function",528],["T_WHITESPACE"," ",528],["T_STRING","getApiUser",528],"(",")",["T_WHITESPACE","\n    ",528],"{",["T_WHITESPACE","\n        ",529],["T_IF","if",530],["T_WHITESPACE"," ",530],"(","!",["T_VARIABLE","$this",530],["T_OBJECT_OPERATOR","->",530],["T_STRING","_apiUser",530],")",["T_WHITESPACE"," ",530],"{",["T_WHITESPACE","\n            ",530],["T_THROW","throw",531],["T_WHITESPACE"," ",531],["T_NEW","new",531],["T_WHITESPACE"," ",531],["T_STRING","Exception",531],"(",["T_CONSTANT_ENCAPSED_STRING","'API user is not set.'",531],")",";",["T_WHITESPACE","\n        ",531],"}",["T_WHITESPACE","\n        ",532],["T_RETURN","return",533],["T_WHITESPACE"," ",533],["T_VARIABLE","$this",533],["T_OBJECT_OPERATOR","->",533],["T_STRING","_apiUser",533],";",["T_WHITESPACE","\n    ",533],"}",["T_WHITESPACE","\n\n    ",534],["T_DOC_COMMENT","\/**\n     * Set API user\n     *\n     * @param Mage_Api2_Model_Auth_User_Abstract $apiUser\n     * @return Mage_Api2_Model_Resource\n     *\/",536],["T_WHITESPACE","\n    ",541],["T_PUBLIC","public",542],["T_WHITESPACE"," ",542],["T_FUNCTION","function",542],["T_WHITESPACE"," ",542],["T_STRING","setApiUser",542],"(",["T_STRING","Mage_Api2_Model_Auth_User_Abstract",542],["T_WHITESPACE"," ",542],["T_VARIABLE","$apiUser",542],")",["T_WHITESPACE","\n    ",542],"{",["T_WHITESPACE","\n        ",543],["T_VARIABLE","$this",544],["T_OBJECT_OPERATOR","->",544],["T_STRING","_apiUser",544],["T_WHITESPACE"," ",544],"=",["T_WHITESPACE"," ",544],["T_VARIABLE","$apiUser",544],";",["T_WHITESPACE","\n        ",544],["T_RETURN","return",545],["T_WHITESPACE"," ",545],["T_VARIABLE","$this",545],";",["T_WHITESPACE","\n    ",545],"}",["T_WHITESPACE","\n\n    ",546],["T_DOC_COMMENT","\/**\n     * Get action type\n     * If not exists get from Request\n     *\n     * @return string One of Mage_Api2_Model_Resource::ACTION_TYPE_... constant\n     *\/",548],["T_WHITESPACE","\n    ",553],["T_PUBLIC","public",554],["T_WHITESPACE"," ",554],["T_FUNCTION","function",554],["T_WHITESPACE"," ",554],["T_STRING","getActionType",554],"(",")",["T_WHITESPACE","\n    ",554],"{",["T_WHITESPACE","\n        ",555],["T_IF","if",556],["T_WHITESPACE"," ",556],"(","!",["T_VARIABLE","$this",556],["T_OBJECT_OPERATOR","->",556],["T_STRING","_actionType",556],")",["T_WHITESPACE"," ",556],"{",["T_WHITESPACE","\n            ",556],["T_VARIABLE","$this",557],["T_OBJECT_OPERATOR","->",557],["T_STRING","setActionType",557],"(",["T_VARIABLE","$this",557],["T_OBJECT_OPERATOR","->",557],["T_STRING","getRequest",557],"(",")",["T_OBJECT_OPERATOR","->",557],["T_STRING","getActionType",557],"(",")",")",";",["T_WHITESPACE","\n        ",557],"}",["T_WHITESPACE","\n        ",558],["T_RETURN","return",559],["T_WHITESPACE"," ",559],["T_VARIABLE","$this",559],["T_OBJECT_OPERATOR","->",559],["T_STRING","_actionType",559],";",["T_WHITESPACE","\n    ",559],"}",["T_WHITESPACE","\n\n    ",560],["T_DOC_COMMENT","\/**\n     * Set route type\n     *\n     * @param string $actionType One of Mage_Api2_Model_Resource::ACTION_TYPE_... constant\n     * @return Mage_Api2_Model_Resource\n     *\/",562],["T_WHITESPACE","\n    ",567],["T_PUBLIC","public",568],["T_WHITESPACE"," ",568],["T_FUNCTION","function",568],["T_WHITESPACE"," ",568],["T_STRING","setActionType",568],"(",["T_VARIABLE","$actionType",568],")",["T_WHITESPACE","\n    ",568],"{",["T_WHITESPACE","\n        ",569],["T_VARIABLE","$this",570],["T_OBJECT_OPERATOR","->",570],["T_STRING","_actionType",570],["T_WHITESPACE"," ",570],"=",["T_WHITESPACE"," ",570],["T_VARIABLE","$actionType",570],";",["T_WHITESPACE","\n        ",570],["T_RETURN","return",571],["T_WHITESPACE"," ",571],["T_VARIABLE","$this",571],";",["T_WHITESPACE","\n    ",571],"}",["T_WHITESPACE","\n\n    ",572],["T_DOC_COMMENT","\/**\n     * Get operation\n     * If not exists get from Request\n     *\n     * @return string One of Mage_Api2_Model_Resource::OPERATION_... constant\n     *\/",574],["T_WHITESPACE","\n    ",579],["T_PUBLIC","public",580],["T_WHITESPACE"," ",580],["T_FUNCTION","function",580],["T_WHITESPACE"," ",580],["T_STRING","getOperation",580],"(",")",["T_WHITESPACE","\n    ",580],"{",["T_WHITESPACE","\n        ",581],["T_IF","if",582],["T_WHITESPACE"," ",582],"(","!",["T_VARIABLE","$this",582],["T_OBJECT_OPERATOR","->",582],["T_STRING","_operation",582],")",["T_WHITESPACE"," ",582],"{",["T_WHITESPACE","\n            ",582],["T_VARIABLE","$this",583],["T_OBJECT_OPERATOR","->",583],["T_STRING","setOperation",583],"(",["T_VARIABLE","$this",583],["T_OBJECT_OPERATOR","->",583],["T_STRING","getRequest",583],"(",")",["T_OBJECT_OPERATOR","->",583],["T_STRING","getOperation",583],"(",")",")",";",["T_WHITESPACE","\n        ",583],"}",["T_WHITESPACE","\n        ",584],["T_RETURN","return",585],["T_WHITESPACE"," ",585],["T_VARIABLE","$this",585],["T_OBJECT_OPERATOR","->",585],["T_STRING","_operation",585],";",["T_WHITESPACE","\n    ",585],"}",["T_WHITESPACE","\n\n    ",586],["T_DOC_COMMENT","\/**\n     * Set operation\n     *\n     * @param string $operation One of Mage_Api2_Model_Resource::OPERATION_... constant\n     * @return Mage_Api2_Model_Resource\n     *\/",588],["T_WHITESPACE","\n    ",593],["T_PUBLIC","public",594],["T_WHITESPACE"," ",594],["T_FUNCTION","function",594],["T_WHITESPACE"," ",594],["T_STRING","setOperation",594],"(",["T_VARIABLE","$operation",594],")",["T_WHITESPACE","\n    ",594],"{",["T_WHITESPACE","\n        ",595],["T_VARIABLE","$this",596],["T_OBJECT_OPERATOR","->",596],["T_STRING","_operation",596],["T_WHITESPACE"," ",596],"=",["T_WHITESPACE"," ",596],["T_VARIABLE","$operation",596],";",["T_WHITESPACE","\n        ",596],["T_RETURN","return",597],["T_WHITESPACE"," ",597],["T_VARIABLE","$this",597],";",["T_WHITESPACE","\n    ",597],"}",["T_WHITESPACE","\n\n    ",598],["T_DOC_COMMENT","\/**\n     * Get API2 config\n     *\n     * @return Mage_Api2_Model_Config\n     *\/",600],["T_WHITESPACE","\n    ",604],["T_PUBLIC","public",605],["T_WHITESPACE"," ",605],["T_FUNCTION","function",605],["T_WHITESPACE"," ",605],["T_STRING","getConfig",605],"(",")",["T_WHITESPACE","\n    ",605],"{",["T_WHITESPACE","\n        ",606],["T_RETURN","return",607],["T_WHITESPACE"," ",607],["T_STRING","Mage",607],["T_DOUBLE_COLON","::",607],["T_STRING","getSingleton",607],"(",["T_CONSTANT_ENCAPSED_STRING","'api2\/config'",607],")",";",["T_WHITESPACE","\n    ",607],"}",["T_WHITESPACE","\n\n    ",608],["T_DOC_COMMENT","\/**\n     * Get working model\n     *\n     * @return Mage_Core_Model_Abstract\n     *\/",610],["T_WHITESPACE","\n    ",614],["T_PUBLIC","public",615],["T_WHITESPACE"," ",615],["T_FUNCTION","function",615],["T_WHITESPACE"," ",615],["T_STRING","getWorkingModel",615],"(",")",["T_WHITESPACE","\n    ",615],"{",["T_WHITESPACE","\n        ",616],["T_RETURN","return",617],["T_WHITESPACE"," ",617],["T_STRING","Mage",617],["T_DOUBLE_COLON","::",617],["T_STRING","getModel",617],"(",["T_VARIABLE","$this",617],["T_OBJECT_OPERATOR","->",617],["T_STRING","getConfig",617],"(",")",["T_OBJECT_OPERATOR","->",617],["T_STRING","getResourceWorkingModel",617],"(",["T_VARIABLE","$this",617],["T_OBJECT_OPERATOR","->",617],["T_STRING","getResourceType",617],"(",")",")",")",";",["T_WHITESPACE","\n    ",617],"}",["T_WHITESPACE","\n\n    ",618],["T_DOC_COMMENT","\/**\n     * Render data using registered Renderer\n     *\n     * @param mixed $data\n     *\/",620],["T_WHITESPACE","\n    ",624],["T_PROTECTED","protected",625],["T_WHITESPACE"," ",625],["T_FUNCTION","function",625],["T_WHITESPACE"," ",625],["T_STRING","_render",625],"(",["T_VARIABLE","$data",625],")",["T_WHITESPACE","\n    ",625],"{",["T_WHITESPACE","\n        ",626],["T_VARIABLE","$this",627],["T_OBJECT_OPERATOR","->",627],["T_STRING","getResponse",627],"(",")",["T_OBJECT_OPERATOR","->",627],["T_STRING","setMimeType",627],"(",["T_VARIABLE","$this",627],["T_OBJECT_OPERATOR","->",627],["T_STRING","getRenderer",627],"(",")",["T_OBJECT_OPERATOR","->",627],["T_STRING","getMimeType",627],"(",")",")",["T_WHITESPACE","\n            ",627],["T_OBJECT_OPERATOR","->",628],["T_STRING","setBody",628],"(",["T_VARIABLE","$this",628],["T_OBJECT_OPERATOR","->",628],["T_STRING","getRenderer",628],"(",")",["T_OBJECT_OPERATOR","->",628],["T_STRING","render",628],"(",["T_VARIABLE","$data",628],")",")",";",["T_WHITESPACE","\n    ",628],"}",["T_WHITESPACE","\n\n    ",629],["T_DOC_COMMENT","\/**\n     * Throw exception, critical error - stop execution\n     *\n     * @param string $message\n     * @param int $code\n     * @throws Mage_Api2_Exception\n     *\/",631],["T_WHITESPACE","\n    ",637],["T_PROTECTED","protected",638],["T_WHITESPACE"," ",638],["T_FUNCTION","function",638],["T_WHITESPACE"," ",638],["T_STRING","_critical",638],"(",["T_VARIABLE","$message",638],",",["T_WHITESPACE"," ",638],["T_VARIABLE","$code",638],["T_WHITESPACE"," ",638],"=",["T_WHITESPACE"," ",638],["T_STRING","null",638],")",["T_WHITESPACE","\n    ",638],"{",["T_WHITESPACE","\n        ",639],["T_IF","if",640],["T_WHITESPACE"," ",640],"(",["T_VARIABLE","$code",640],["T_WHITESPACE"," ",640],["T_IS_IDENTICAL","===",640],["T_WHITESPACE"," ",640],["T_STRING","null",640],")",["T_WHITESPACE"," ",640],"{",["T_WHITESPACE","\n            ",640],["T_VARIABLE","$errors",641],["T_WHITESPACE"," ",641],"=",["T_WHITESPACE"," ",641],["T_VARIABLE","$this",641],["T_OBJECT_OPERATOR","->",641],["T_STRING","_getCriticalErrors",641],"(",")",";",["T_WHITESPACE","\n            ",641],["T_IF","if",642],["T_WHITESPACE"," ",642],"(","!",["T_ISSET","isset",642],"(",["T_VARIABLE","$errors",642],"[",["T_VARIABLE","$message",642],"]",")",")",["T_WHITESPACE"," ",642],"{",["T_WHITESPACE","\n                ",642],["T_THROW","throw",643],["T_WHITESPACE"," ",643],["T_NEW","new",643],["T_WHITESPACE"," ",643],["T_STRING","Exception",643],"(",["T_WHITESPACE","\n                    ",643],["T_STRING","sprintf",644],"(",["T_CONSTANT_ENCAPSED_STRING","'Invalid error \"%s\" or error code missed.'",644],",",["T_WHITESPACE"," ",644],["T_VARIABLE","$message",644],")",",",["T_WHITESPACE","\n                    ",644],["T_STRING","Mage_Api2_Model_Server",645],["T_DOUBLE_COLON","::",645],["T_STRING","HTTP_INTERNAL_ERROR",645],["T_WHITESPACE","\n                ",645],")",";",["T_WHITESPACE","\n            ",646],"}",["T_WHITESPACE","\n            ",647],["T_VARIABLE","$code",648],["T_WHITESPACE"," ",648],"=",["T_WHITESPACE"," ",648],["T_VARIABLE","$errors",648],"[",["T_VARIABLE","$message",648],"]",";",["T_WHITESPACE","\n        ",648],"}",["T_WHITESPACE","\n        ",649],["T_THROW","throw",650],["T_WHITESPACE"," ",650],["T_NEW","new",650],["T_WHITESPACE"," ",650],["T_STRING","Mage_Api2_Exception",650],"(",["T_VARIABLE","$message",650],",",["T_WHITESPACE"," ",650],["T_VARIABLE","$code",650],")",";",["T_WHITESPACE","\n    ",650],"}",["T_WHITESPACE","\n\n    ",651],["T_DOC_COMMENT","\/**\n     * Retrieve array with critical errors mapped to HTTP codes\n     *\n     * @return array\n     *\/",653],["T_WHITESPACE","\n    ",657],["T_PROTECTED","protected",658],["T_WHITESPACE"," ",658],["T_FUNCTION","function",658],["T_WHITESPACE"," ",658],["T_STRING","_getCriticalErrors",658],"(",")",["T_WHITESPACE","\n    ",658],"{",["T_WHITESPACE","\n        ",659],["T_RETURN","return",660],["T_WHITESPACE"," ",660],["T_ARRAY","array",660],"(",["T_WHITESPACE","\n            ",660],["T_CONSTANT_ENCAPSED_STRING","''",661],["T_WHITESPACE"," ",661],["T_DOUBLE_ARROW","=>",661],["T_WHITESPACE"," ",661],["T_STRING","Mage_Api2_Model_Server",661],["T_DOUBLE_COLON","::",661],["T_STRING","HTTP_BAD_REQUEST",661],",",["T_WHITESPACE","\n            ",661],["T_STRING","self",662],["T_DOUBLE_COLON","::",662],["T_STRING","RESOURCE_NOT_FOUND",662],["T_WHITESPACE"," ",662],["T_DOUBLE_ARROW","=>",662],["T_WHITESPACE"," ",662],["T_STRING","Mage_Api2_Model_Server",662],["T_DOUBLE_COLON","::",662],["T_STRING","HTTP_NOT_FOUND",662],",",["T_WHITESPACE","\n            ",662],["T_STRING","self",663],["T_DOUBLE_COLON","::",663],["T_STRING","RESOURCE_METHOD_NOT_ALLOWED",663],["T_WHITESPACE"," ",663],["T_DOUBLE_ARROW","=>",663],["T_WHITESPACE"," ",663],["T_STRING","Mage_Api2_Model_Server",663],["T_DOUBLE_COLON","::",663],["T_STRING","HTTP_METHOD_NOT_ALLOWED",663],",",["T_WHITESPACE","\n            ",663],["T_STRING","self",664],["T_DOUBLE_COLON","::",664],["T_STRING","RESOURCE_METHOD_NOT_IMPLEMENTED",664],["T_WHITESPACE"," ",664],["T_DOUBLE_ARROW","=>",664],["T_WHITESPACE"," ",664],["T_STRING","Mage_Api2_Model_Server",664],["T_DOUBLE_COLON","::",664],["T_STRING","HTTP_METHOD_NOT_ALLOWED",664],",",["T_WHITESPACE","\n            ",664],["T_STRING","self",665],["T_DOUBLE_COLON","::",665],["T_STRING","RESOURCE_DATA_PRE_VALIDATION_ERROR",665],["T_WHITESPACE"," ",665],["T_DOUBLE_ARROW","=>",665],["T_WHITESPACE"," ",665],["T_STRING","Mage_Api2_Model_Server",665],["T_DOUBLE_COLON","::",665],["T_STRING","HTTP_BAD_REQUEST",665],",",["T_WHITESPACE","\n            ",665],["T_STRING","self",666],["T_DOUBLE_COLON","::",666],["T_STRING","RESOURCE_INTERNAL_ERROR",666],["T_WHITESPACE"," ",666],["T_DOUBLE_ARROW","=>",666],["T_WHITESPACE"," ",666],["T_STRING","Mage_Api2_Model_Server",666],["T_DOUBLE_COLON","::",666],["T_STRING","HTTP_INTERNAL_ERROR",666],",",["T_WHITESPACE","\n            ",666],["T_STRING","self",667],["T_DOUBLE_COLON","::",667],["T_STRING","RESOURCE_UNKNOWN_ERROR",667],["T_WHITESPACE"," ",667],["T_DOUBLE_ARROW","=>",667],["T_WHITESPACE"," ",667],["T_STRING","Mage_Api2_Model_Server",667],["T_DOUBLE_COLON","::",667],["T_STRING","HTTP_BAD_REQUEST",667],",",["T_WHITESPACE","\n            ",667],["T_STRING","self",668],["T_DOUBLE_COLON","::",668],["T_STRING","RESOURCE_REQUEST_DATA_INVALID",668],["T_WHITESPACE"," ",668],["T_DOUBLE_ARROW","=>",668],["T_WHITESPACE"," ",668],["T_STRING","Mage_Api2_Model_Server",668],["T_DOUBLE_COLON","::",668],["T_STRING","HTTP_BAD_REQUEST",668],",",["T_WHITESPACE","\n            ",668],["T_STRING","self",669],["T_DOUBLE_COLON","::",669],["T_STRING","RESOURCE_COLLECTION_PAGING_ERROR",669],["T_WHITESPACE"," ",669],["T_DOUBLE_ARROW","=>",669],["T_WHITESPACE"," ",669],["T_STRING","Mage_Api2_Model_Server",669],["T_DOUBLE_COLON","::",669],["T_STRING","HTTP_BAD_REQUEST",669],",",["T_WHITESPACE","\n            ",669],["T_STRING","self",670],["T_DOUBLE_COLON","::",670],["T_STRING","RESOURCE_COLLECTION_PAGING_LIMIT_ERROR",670],["T_WHITESPACE"," ",670],["T_DOUBLE_ARROW","=>",670],["T_WHITESPACE"," ",670],["T_STRING","Mage_Api2_Model_Server",670],["T_DOUBLE_COLON","::",670],["T_STRING","HTTP_BAD_REQUEST",670],",",["T_WHITESPACE","\n            ",670],["T_STRING","self",671],["T_DOUBLE_COLON","::",671],["T_STRING","RESOURCE_COLLECTION_ORDERING_ERROR",671],["T_WHITESPACE"," ",671],["T_DOUBLE_ARROW","=>",671],["T_WHITESPACE"," ",671],["T_STRING","Mage_Api2_Model_Server",671],["T_DOUBLE_COLON","::",671],["T_STRING","HTTP_BAD_REQUEST",671],",",["T_WHITESPACE","\n            ",671],["T_STRING","self",672],["T_DOUBLE_COLON","::",672],["T_STRING","RESOURCE_COLLECTION_FILTERING_ERROR",672],["T_WHITESPACE"," ",672],["T_DOUBLE_ARROW","=>",672],["T_WHITESPACE"," ",672],["T_STRING","Mage_Api2_Model_Server",672],["T_DOUBLE_COLON","::",672],["T_STRING","HTTP_BAD_REQUEST",672],",",["T_WHITESPACE","\n            ",672],["T_STRING","self",673],["T_DOUBLE_COLON","::",673],["T_STRING","RESOURCE_COLLECTION_ATTRIBUTES_ERROR",673],["T_WHITESPACE"," ",673],["T_DOUBLE_ARROW","=>",673],["T_WHITESPACE"," ",673],["T_STRING","Mage_Api2_Model_Server",673],["T_DOUBLE_COLON","::",673],["T_STRING","HTTP_BAD_REQUEST",673],",",["T_WHITESPACE","\n        ",673],")",";",["T_WHITESPACE","\n    ",674],"}",["T_WHITESPACE","\n\n    ",675],["T_DOC_COMMENT","\/**\n     * Add non-critical error\n     *\n     * @param string $message\n     * @param int $code\n     * @return Mage_Api2_Model_Resource\n     *\/",677],["T_WHITESPACE","\n    ",683],["T_PROTECTED","protected",684],["T_WHITESPACE"," ",684],["T_FUNCTION","function",684],["T_WHITESPACE"," ",684],["T_STRING","_error",684],"(",["T_VARIABLE","$message",684],",",["T_WHITESPACE"," ",684],["T_VARIABLE","$code",684],")",["T_WHITESPACE","\n    ",684],"{",["T_WHITESPACE","\n        ",685],["T_VARIABLE","$this",686],["T_OBJECT_OPERATOR","->",686],["T_STRING","getResponse",686],"(",")",["T_OBJECT_OPERATOR","->",686],["T_STRING","setException",686],"(",["T_NEW","new",686],["T_WHITESPACE"," ",686],["T_STRING","Mage_Api2_Exception",686],"(",["T_VARIABLE","$message",686],",",["T_WHITESPACE"," ",686],["T_VARIABLE","$code",686],")",")",";",["T_WHITESPACE","\n        ",686],["T_RETURN","return",687],["T_WHITESPACE"," ",687],["T_VARIABLE","$this",687],";",["T_WHITESPACE","\n    ",687],"}",["T_WHITESPACE","\n\n    ",688],["T_DOC_COMMENT","\/**\n     * Add success message\n     *\n     * @param string $message\n     * @param int $code\n     * @param array $params\n     * @return Mage_Api2_Model_Resource\n     *\/",690],["T_WHITESPACE","\n    ",697],["T_PROTECTED","protected",698],["T_WHITESPACE"," ",698],["T_FUNCTION","function",698],["T_WHITESPACE"," ",698],["T_STRING","_successMessage",698],"(",["T_VARIABLE","$message",698],",",["T_WHITESPACE"," ",698],["T_VARIABLE","$code",698],",",["T_WHITESPACE"," ",698],["T_VARIABLE","$params",698],["T_WHITESPACE"," ",698],"=",["T_WHITESPACE"," ",698],["T_ARRAY","array",698],"(",")",")",["T_WHITESPACE","\n    ",698],"{",["T_WHITESPACE","\n        ",699],["T_VARIABLE","$this",700],["T_OBJECT_OPERATOR","->",700],["T_STRING","getResponse",700],"(",")",["T_OBJECT_OPERATOR","->",700],["T_STRING","addMessage",700],"(",["T_VARIABLE","$message",700],",",["T_WHITESPACE"," ",700],["T_VARIABLE","$code",700],",",["T_WHITESPACE"," ",700],["T_VARIABLE","$params",700],",",["T_WHITESPACE"," ",700],["T_STRING","Mage_Api2_Model_Response",700],["T_DOUBLE_COLON","::",700],["T_STRING","MESSAGE_TYPE_SUCCESS",700],")",";",["T_WHITESPACE","\n        ",700],["T_RETURN","return",701],["T_WHITESPACE"," ",701],["T_VARIABLE","$this",701],";",["T_WHITESPACE","\n    ",701],"}",["T_WHITESPACE","\n\n    ",702],["T_DOC_COMMENT","\/**\n     * Add error message\n     *\n     * @param string $message\n     * @param int $code\n     * @param array $params\n     * @return Mage_Api2_Model_Resource\n     *\/",704],["T_WHITESPACE","\n    ",711],["T_PROTECTED","protected",712],["T_WHITESPACE"," ",712],["T_FUNCTION","function",712],["T_WHITESPACE"," ",712],["T_STRING","_errorMessage",712],"(",["T_VARIABLE","$message",712],",",["T_WHITESPACE"," ",712],["T_VARIABLE","$code",712],",",["T_WHITESPACE"," ",712],["T_VARIABLE","$params",712],["T_WHITESPACE"," ",712],"=",["T_WHITESPACE"," ",712],["T_ARRAY","array",712],"(",")",")",["T_WHITESPACE","\n    ",712],"{",["T_WHITESPACE","\n        ",713],["T_VARIABLE","$this",714],["T_OBJECT_OPERATOR","->",714],["T_STRING","getResponse",714],"(",")",["T_OBJECT_OPERATOR","->",714],["T_STRING","addMessage",714],"(",["T_VARIABLE","$message",714],",",["T_WHITESPACE"," ",714],["T_VARIABLE","$code",714],",",["T_WHITESPACE"," ",714],["T_VARIABLE","$params",714],",",["T_WHITESPACE"," ",714],["T_STRING","Mage_Api2_Model_Response",714],["T_DOUBLE_COLON","::",714],["T_STRING","MESSAGE_TYPE_ERROR",714],")",";",["T_WHITESPACE","\n        ",714],["T_RETURN","return",715],["T_WHITESPACE"," ",715],["T_VARIABLE","$this",715],";",["T_WHITESPACE","\n    ",715],"}",["T_WHITESPACE","\n\n    ",716],["T_DOC_COMMENT","\/**\n     * Set navigation parameters and apply filters from URL params\n     *\n     * @param Varien_Data_Collection_Db $collection\n     * @return Mage_Api2_Model_Resource\n     *\/",718],["T_WHITESPACE","\n    ",723],["T_FINAL","final",724],["T_WHITESPACE"," ",724],["T_PROTECTED","protected",724],["T_WHITESPACE"," ",724],["T_FUNCTION","function",724],["T_WHITESPACE"," ",724],["T_STRING","_applyCollectionModifiers",724],"(",["T_STRING","Varien_Data_Collection_Db",724],["T_WHITESPACE"," ",724],["T_VARIABLE","$collection",724],")",["T_WHITESPACE","\n    ",724],"{",["T_WHITESPACE","\n        ",725],["T_VARIABLE","$pageNumber",726],["T_WHITESPACE"," ",726],"=",["T_WHITESPACE"," ",726],["T_VARIABLE","$this",726],["T_OBJECT_OPERATOR","->",726],["T_STRING","getRequest",726],"(",")",["T_OBJECT_OPERATOR","->",726],["T_STRING","getPageNumber",726],"(",")",";",["T_WHITESPACE","\n        ",726],["T_IF","if",727],["T_WHITESPACE"," ",727],"(",["T_VARIABLE","$pageNumber",727],["T_WHITESPACE"," ",727],["T_IS_NOT_EQUAL","!=",727],["T_WHITESPACE"," ",727],["T_STRING","abs",727],"(",["T_VARIABLE","$pageNumber",727],")",")",["T_WHITESPACE"," ",727],"{",["T_WHITESPACE","\n            ",727],["T_VARIABLE","$this",728],["T_OBJECT_OPERATOR","->",728],["T_STRING","_critical",728],"(",["T_STRING","self",728],["T_DOUBLE_COLON","::",728],["T_STRING","RESOURCE_COLLECTION_PAGING_ERROR",728],")",";",["T_WHITESPACE","\n        ",728],"}",["T_WHITESPACE","\n\n        ",729],["T_VARIABLE","$pageSize",731],["T_WHITESPACE"," ",731],"=",["T_WHITESPACE"," ",731],["T_VARIABLE","$this",731],["T_OBJECT_OPERATOR","->",731],["T_STRING","getRequest",731],"(",")",["T_OBJECT_OPERATOR","->",731],["T_STRING","getPageSize",731],"(",")",";",["T_WHITESPACE","\n        ",731],["T_IF","if",732],["T_WHITESPACE"," ",732],"(",["T_STRING","null",732],["T_WHITESPACE"," ",732],["T_IS_EQUAL","==",732],["T_WHITESPACE"," ",732],["T_VARIABLE","$pageSize",732],")",["T_WHITESPACE"," ",732],"{",["T_WHITESPACE","\n            ",732],["T_VARIABLE","$pageSize",733],["T_WHITESPACE"," ",733],"=",["T_WHITESPACE"," ",733],["T_STRING","self",733],["T_DOUBLE_COLON","::",733],["T_STRING","PAGE_SIZE_DEFAULT",733],";",["T_WHITESPACE","\n        ",733],"}",["T_WHITESPACE"," ",734],["T_ELSE","else",734],["T_WHITESPACE"," ",734],"{",["T_WHITESPACE","\n            ",734],["T_IF","if",735],["T_WHITESPACE"," ",735],"(",["T_VARIABLE","$pageSize",735],["T_WHITESPACE"," ",735],["T_IS_NOT_EQUAL","!=",735],["T_WHITESPACE"," ",735],["T_STRING","abs",735],"(",["T_VARIABLE","$pageSize",735],")",["T_WHITESPACE"," ",735],["T_BOOLEAN_OR","||",735],["T_WHITESPACE"," ",735],["T_VARIABLE","$pageSize",735],["T_WHITESPACE"," ",735],">",["T_WHITESPACE"," ",735],["T_STRING","self",735],["T_DOUBLE_COLON","::",735],["T_STRING","PAGE_SIZE_MAX",735],")",["T_WHITESPACE"," ",735],"{",["T_WHITESPACE","\n                ",735],["T_VARIABLE","$this",736],["T_OBJECT_OPERATOR","->",736],["T_STRING","_critical",736],"(",["T_STRING","self",736],["T_DOUBLE_COLON","::",736],["T_STRING","RESOURCE_COLLECTION_PAGING_LIMIT_ERROR",736],")",";",["T_WHITESPACE","\n            ",736],"}",["T_WHITESPACE","\n        ",737],"}",["T_WHITESPACE","\n\n        ",738],["T_VARIABLE","$orderField",740],["T_WHITESPACE"," ",740],"=",["T_WHITESPACE"," ",740],["T_VARIABLE","$this",740],["T_OBJECT_OPERATOR","->",740],["T_STRING","getRequest",740],"(",")",["T_OBJECT_OPERATOR","->",740],["T_STRING","getOrderField",740],"(",")",";",["T_WHITESPACE","\n\n        ",740],["T_IF","if",742],["T_WHITESPACE"," ",742],"(",["T_STRING","null",742],["T_WHITESPACE"," ",742],["T_IS_NOT_IDENTICAL","!==",742],["T_WHITESPACE"," ",742],["T_VARIABLE","$orderField",742],")",["T_WHITESPACE"," ",742],"{",["T_WHITESPACE","\n            ",742],["T_VARIABLE","$operation",743],["T_WHITESPACE"," ",743],"=",["T_WHITESPACE"," ",743],["T_STRING","Mage_Api2_Model_Resource",743],["T_DOUBLE_COLON","::",743],["T_STRING","OPERATION_ATTRIBUTE_READ",743],";",["T_WHITESPACE","\n            ",743],["T_IF","if",744],["T_WHITESPACE"," ",744],"(","!",["T_STRING","is_string",744],"(",["T_VARIABLE","$orderField",744],")",["T_WHITESPACE","\n                ",744],["T_BOOLEAN_OR","||",745],["T_WHITESPACE"," ",745],"!",["T_STRING","array_key_exists",745],"(",["T_VARIABLE","$orderField",745],",",["T_WHITESPACE"," ",745],["T_VARIABLE","$this",745],["T_OBJECT_OPERATOR","->",745],["T_STRING","getAvailableAttributes",745],"(",["T_VARIABLE","$this",745],["T_OBJECT_OPERATOR","->",745],["T_STRING","getUserType",745],"(",")",",",["T_WHITESPACE"," ",745],["T_VARIABLE","$operation",745],")",")",["T_WHITESPACE","\n            ",745],")",["T_WHITESPACE"," ",746],"{",["T_WHITESPACE","\n                ",746],["T_VARIABLE","$this",747],["T_OBJECT_OPERATOR","->",747],["T_STRING","_critical",747],"(",["T_STRING","self",747],["T_DOUBLE_COLON","::",747],["T_STRING","RESOURCE_COLLECTION_ORDERING_ERROR",747],")",";",["T_WHITESPACE","\n            ",747],"}",["T_WHITESPACE","\n            ",748],["T_VARIABLE","$collection",749],["T_OBJECT_OPERATOR","->",749],["T_STRING","setOrder",749],"(",["T_VARIABLE","$orderField",749],",",["T_WHITESPACE"," ",749],["T_VARIABLE","$this",749],["T_OBJECT_OPERATOR","->",749],["T_STRING","getRequest",749],"(",")",["T_OBJECT_OPERATOR","->",749],["T_STRING","getOrderDirection",749],"(",")",")",";",["T_WHITESPACE","\n        ",749],"}",["T_WHITESPACE","\n        ",750],["T_VARIABLE","$collection",751],["T_OBJECT_OPERATOR","->",751],["T_STRING","setCurPage",751],"(",["T_VARIABLE","$pageNumber",751],")",["T_OBJECT_OPERATOR","->",751],["T_STRING","setPageSize",751],"(",["T_VARIABLE","$pageSize",751],")",";",["T_WHITESPACE","\n\n        ",751],["T_RETURN","return",753],["T_WHITESPACE"," ",753],["T_VARIABLE","$this",753],["T_OBJECT_OPERATOR","->",753],["T_STRING","_applyFilter",753],"(",["T_VARIABLE","$collection",753],")",";",["T_WHITESPACE","\n    ",753],"}",["T_WHITESPACE","\n\n    ",754],["T_DOC_COMMENT","\/**\n     * Validate filter data and apply it to collection if possible\n     *\n     * @param Varien_Data_Collection_Db $collection\n     * @return Mage_Api2_Model_Resource\n     *\/",756],["T_WHITESPACE","\n    ",761],["T_PROTECTED","protected",762],["T_WHITESPACE"," ",762],["T_FUNCTION","function",762],["T_WHITESPACE"," ",762],["T_STRING","_applyFilter",762],"(",["T_STRING","Varien_Data_Collection_Db",762],["T_WHITESPACE"," ",762],["T_VARIABLE","$collection",762],")",["T_WHITESPACE","\n    ",762],"{",["T_WHITESPACE","\n        ",763],["T_VARIABLE","$filter",764],["T_WHITESPACE"," ",764],"=",["T_WHITESPACE"," ",764],["T_VARIABLE","$this",764],["T_OBJECT_OPERATOR","->",764],["T_STRING","getRequest",764],"(",")",["T_OBJECT_OPERATOR","->",764],["T_STRING","getFilter",764],"(",")",";",["T_WHITESPACE","\n\n        ",764],["T_IF","if",766],["T_WHITESPACE"," ",766],"(","!",["T_VARIABLE","$filter",766],")",["T_WHITESPACE"," ",766],"{",["T_WHITESPACE","\n            ",766],["T_RETURN","return",767],["T_WHITESPACE"," ",767],["T_VARIABLE","$this",767],";",["T_WHITESPACE","\n        ",767],"}",["T_WHITESPACE","\n        ",768],["T_IF","if",769],["T_WHITESPACE"," ",769],"(","!",["T_STRING","is_array",769],"(",["T_VARIABLE","$filter",769],")",")",["T_WHITESPACE"," ",769],"{",["T_WHITESPACE","\n            ",769],["T_VARIABLE","$this",770],["T_OBJECT_OPERATOR","->",770],["T_STRING","_critical",770],"(",["T_STRING","self",770],["T_DOUBLE_COLON","::",770],["T_STRING","RESOURCE_COLLECTION_FILTERING_ERROR",770],")",";",["T_WHITESPACE","\n        ",770],"}",["T_WHITESPACE","\n        ",771],["T_IF","if",772],["T_WHITESPACE"," ",772],"(",["T_STRING","method_exists",772],"(",["T_VARIABLE","$collection",772],",",["T_WHITESPACE"," ",772],["T_CONSTANT_ENCAPSED_STRING","'addAttributeToFilter'",772],")",")",["T_WHITESPACE"," ",772],"{",["T_WHITESPACE","\n            ",772],["T_VARIABLE","$methodName",773],["T_WHITESPACE"," ",773],"=",["T_WHITESPACE"," ",773],["T_CONSTANT_ENCAPSED_STRING","'addAttributeToFilter'",773],";",["T_WHITESPACE","\n        ",773],"}",["T_WHITESPACE"," ",774],["T_ELSEIF","elseif",774],["T_WHITESPACE"," ",774],"(",["T_STRING","method_exists",774],"(",["T_VARIABLE","$collection",774],",",["T_WHITESPACE"," ",774],["T_CONSTANT_ENCAPSED_STRING","'addFieldToFilter'",774],")",")",["T_WHITESPACE"," ",774],"{",["T_WHITESPACE","\n            ",774],["T_VARIABLE","$methodName",775],["T_WHITESPACE"," ",775],"=",["T_WHITESPACE"," ",775],["T_CONSTANT_ENCAPSED_STRING","'addFieldToFilter'",775],";",["T_WHITESPACE","\n        ",775],"}",["T_WHITESPACE"," ",776],["T_ELSE","else",776],["T_WHITESPACE"," ",776],"{",["T_WHITESPACE","\n            ",776],["T_RETURN","return",777],["T_WHITESPACE"," ",777],["T_VARIABLE","$this",777],";",["T_WHITESPACE","\n        ",777],"}",["T_WHITESPACE","\n        ",778],["T_VARIABLE","$allowedAttributes",779],["T_WHITESPACE"," ",779],"=",["T_WHITESPACE"," ",779],["T_VARIABLE","$this",779],["T_OBJECT_OPERATOR","->",779],["T_STRING","getFilter",779],"(",")",["T_OBJECT_OPERATOR","->",779],["T_STRING","getAllowedAttributes",779],"(",["T_STRING","self",779],["T_DOUBLE_COLON","::",779],["T_STRING","OPERATION_ATTRIBUTE_READ",779],")",";",["T_WHITESPACE","\n\n        ",779],["T_FOREACH","foreach",781],["T_WHITESPACE"," ",781],"(",["T_VARIABLE","$filter",781],["T_WHITESPACE"," ",781],["T_AS","as",781],["T_WHITESPACE"," ",781],["T_VARIABLE","$filterEntry",781],")",["T_WHITESPACE"," ",781],"{",["T_WHITESPACE","\n            ",781],["T_IF","if",782],["T_WHITESPACE"," ",782],"(","!",["T_STRING","is_array",782],"(",["T_VARIABLE","$filterEntry",782],")",["T_WHITESPACE","\n                ",782],["T_BOOLEAN_OR","||",783],["T_WHITESPACE"," ",783],"!",["T_STRING","array_key_exists",783],"(",["T_CONSTANT_ENCAPSED_STRING","'attribute'",783],",",["T_WHITESPACE"," ",783],["T_VARIABLE","$filterEntry",783],")",["T_WHITESPACE","\n                ",783],["T_BOOLEAN_OR","||",784],["T_WHITESPACE"," ",784],"!",["T_STRING","in_array",784],"(",["T_VARIABLE","$filterEntry",784],"[",["T_CONSTANT_ENCAPSED_STRING","'attribute'",784],"]",",",["T_WHITESPACE"," ",784],["T_VARIABLE","$allowedAttributes",784],")",["T_WHITESPACE","\n            ",784],")",["T_WHITESPACE"," ",785],"{",["T_WHITESPACE","\n                ",785],["T_VARIABLE","$this",786],["T_OBJECT_OPERATOR","->",786],["T_STRING","_critical",786],"(",["T_STRING","self",786],["T_DOUBLE_COLON","::",786],["T_STRING","RESOURCE_COLLECTION_FILTERING_ERROR",786],")",";",["T_WHITESPACE","\n            ",786],"}",["T_WHITESPACE","\n            ",787],["T_VARIABLE","$attributeCode",788],["T_WHITESPACE"," ",788],"=",["T_WHITESPACE"," ",788],["T_VARIABLE","$filterEntry",788],"[",["T_CONSTANT_ENCAPSED_STRING","'attribute'",788],"]",";",["T_WHITESPACE","\n\n            ",788],["T_UNSET","unset",790],"(",["T_VARIABLE","$filterEntry",790],"[",["T_CONSTANT_ENCAPSED_STRING","'attribute'",790],"]",")",";",["T_WHITESPACE","\n\n            ",790],["T_TRY","try",792],["T_WHITESPACE"," ",792],"{",["T_WHITESPACE","\n                ",792],["T_VARIABLE","$collection",793],["T_OBJECT_OPERATOR","->",793],["T_VARIABLE","$methodName",793],"(",["T_VARIABLE","$attributeCode",793],",",["T_WHITESPACE"," ",793],["T_VARIABLE","$filterEntry",793],")",";",["T_WHITESPACE","\n            ",793],"}",["T_WHITESPACE"," ",794],["T_CATCH","catch",794],"(",["T_STRING","Exception",794],["T_WHITESPACE"," ",794],["T_VARIABLE","$e",794],")",["T_WHITESPACE"," ",794],"{",["T_WHITESPACE","\n                ",794],["T_VARIABLE","$this",795],["T_OBJECT_OPERATOR","->",795],["T_STRING","_critical",795],"(",["T_STRING","self",795],["T_DOUBLE_COLON","::",795],["T_STRING","RESOURCE_COLLECTION_FILTERING_ERROR",795],")",";",["T_WHITESPACE","\n            ",795],"}",["T_WHITESPACE","\n        ",796],"}",["T_WHITESPACE","\n        ",797],["T_RETURN","return",798],["T_WHITESPACE"," ",798],["T_VARIABLE","$this",798],";",["T_WHITESPACE","\n    ",798],"}",["T_WHITESPACE","\n\n    ",799],["T_DOC_COMMENT","\/**\n     * Perform multiple calls to subresources of specified resource\n     *\n     * @param string $resourceInstanceId\n     * @return Mage_Api2_Model_Response\n     *\/",801],["T_WHITESPACE","\n    ",806],["T_PROTECTED","protected",807],["T_WHITESPACE"," ",807],["T_FUNCTION","function",807],["T_WHITESPACE"," ",807],["T_STRING","_multicall",807],"(",["T_VARIABLE","$resourceInstanceId",807],")",["T_WHITESPACE","\n    ",807],"{",["T_WHITESPACE","\n        ",808],["T_IF","if",809],["T_WHITESPACE"," ",809],"(","!",["T_VARIABLE","$this",809],["T_OBJECT_OPERATOR","->",809],["T_STRING","_multicall",809],")",["T_WHITESPACE"," ",809],"{",["T_WHITESPACE","\n            ",809],["T_VARIABLE","$this",810],["T_OBJECT_OPERATOR","->",810],["T_STRING","_multicall",810],["T_WHITESPACE"," ",810],"=",["T_WHITESPACE"," ",810],["T_STRING","Mage",810],["T_DOUBLE_COLON","::",810],["T_STRING","getModel",810],"(",["T_CONSTANT_ENCAPSED_STRING","'api2\/multicall'",810],")",";",["T_WHITESPACE","\n        ",810],"}",["T_WHITESPACE","\n        ",811],["T_VARIABLE","$resourceName",812],["T_WHITESPACE"," ",812],"=",["T_WHITESPACE"," ",812],["T_VARIABLE","$this",812],["T_OBJECT_OPERATOR","->",812],["T_STRING","getResourceType",812],"(",")",";",["T_WHITESPACE","\n        ",812],["T_RETURN","return",813],["T_WHITESPACE"," ",813],["T_VARIABLE","$this",813],["T_OBJECT_OPERATOR","->",813],["T_STRING","_multicall",813],["T_OBJECT_OPERATOR","->",813],["T_STRING","call",813],"(",["T_VARIABLE","$resourceInstanceId",813],",",["T_WHITESPACE"," ",813],["T_VARIABLE","$resourceName",813],",",["T_WHITESPACE"," ",813],["T_VARIABLE","$this",813],["T_OBJECT_OPERATOR","->",813],["T_STRING","getRequest",813],"(",")",")",";",["T_WHITESPACE","\n    ",813],"}",["T_WHITESPACE","\n\n    ",814],["T_DOC_COMMENT","\/**\n     * Create model of specified resource and configure it with current object attributes\n     *\n     * @param string $resourceId Resource identifier\n     * @param array $requestParams Parameters to be set to request\n     * @return Mage_Api2_Model_Resource\n     *\/",816],["T_WHITESPACE","\n    ",822],["T_PROTECTED","protected",823],["T_WHITESPACE"," ",823],["T_FUNCTION","function",823],["T_WHITESPACE"," ",823],["T_STRING","_getSubModel",823],"(",["T_VARIABLE","$resourceId",823],",",["T_WHITESPACE"," ",823],["T_ARRAY","array",823],["T_WHITESPACE"," ",823],["T_VARIABLE","$requestParams",823],")",["T_WHITESPACE","\n    ",823],"{",["T_WHITESPACE","\n        ",824],["T_VARIABLE","$resourceModel",825],["T_WHITESPACE"," ",825],"=",["T_WHITESPACE"," ",825],["T_STRING","Mage_Api2_Model_Dispatcher",825],["T_DOUBLE_COLON","::",825],["T_STRING","loadResourceModel",825],"(",["T_WHITESPACE","\n            ",825],["T_VARIABLE","$this",826],["T_OBJECT_OPERATOR","->",826],["T_STRING","getConfig",826],"(",")",["T_OBJECT_OPERATOR","->",826],["T_STRING","getResourceModel",826],"(",["T_VARIABLE","$resourceId",826],")",",",["T_WHITESPACE","\n            ",826],["T_VARIABLE","$this",827],["T_OBJECT_OPERATOR","->",827],["T_STRING","getApiType",827],"(",")",",",["T_WHITESPACE","\n            ",827],["T_VARIABLE","$this",828],["T_OBJECT_OPERATOR","->",828],["T_STRING","getUserType",828],"(",")",",",["T_WHITESPACE","\n            ",828],["T_VARIABLE","$this",829],["T_OBJECT_OPERATOR","->",829],["T_STRING","getVersion",829],"(",")",["T_WHITESPACE","\n        ",829],")",";",["T_WHITESPACE","\n\n        ",830],["T_DOC_COMMENT","\/** @var $request Mage_Api2_Model_Request *\/",832],["T_WHITESPACE","\n        ",832],["T_VARIABLE","$request",833],["T_WHITESPACE"," ",833],"=",["T_WHITESPACE"," ",833],["T_STRING","Mage",833],["T_DOUBLE_COLON","::",833],["T_STRING","getModel",833],"(",["T_CONSTANT_ENCAPSED_STRING","'api2\/request'",833],")",";",["T_WHITESPACE","\n\n        ",833],["T_VARIABLE","$request",835],["T_OBJECT_OPERATOR","->",835],["T_STRING","setParams",835],"(",["T_VARIABLE","$requestParams",835],")",";",["T_WHITESPACE","\n\n        ",835],["T_VARIABLE","$resourceModel",837],["T_WHITESPACE","\n            ",837],["T_OBJECT_OPERATOR","->",838],["T_STRING","setRequest",838],"(",["T_VARIABLE","$request",838],")",["T_WHITESPACE"," ",838],["T_COMMENT","\/\/ request MUST be set first\n",838],["T_WHITESPACE","            ",839],["T_OBJECT_OPERATOR","->",839],["T_STRING","setApiUser",839],"(",["T_VARIABLE","$this",839],["T_OBJECT_OPERATOR","->",839],["T_STRING","getApiUser",839],"(",")",")",["T_WHITESPACE","\n            ",839],["T_OBJECT_OPERATOR","->",840],["T_STRING","setApiType",840],"(",["T_VARIABLE","$this",840],["T_OBJECT_OPERATOR","->",840],["T_STRING","getApiType",840],"(",")",")",["T_WHITESPACE","\n            ",840],["T_OBJECT_OPERATOR","->",841],["T_STRING","setResourceType",841],"(",["T_VARIABLE","$resourceId",841],")",["T_WHITESPACE","\n            ",841],["T_OBJECT_OPERATOR","->",842],["T_STRING","setOperation",842],"(",["T_VARIABLE","$this",842],["T_OBJECT_OPERATOR","->",842],["T_STRING","getOperation",842],"(",")",")",["T_WHITESPACE","\n            ",842],["T_OBJECT_OPERATOR","->",843],["T_STRING","setReturnData",843],"(",["T_STRING","true",843],")",";",["T_WHITESPACE","\n\n        ",843],["T_RETURN","return",845],["T_WHITESPACE"," ",845],["T_VARIABLE","$resourceModel",845],";",["T_WHITESPACE","\n    ",845],"}",["T_WHITESPACE","\n\n    ",846],["T_DOC_COMMENT","\/**\n     * Check ACL permission for specified resource with current other conditions\n     *\n     * @param string $resourceId Resource identifier\n     * @return bool\n     * @throws Exception\n     *\/",848],["T_WHITESPACE","\n    ",854],["T_PROTECTED","protected",855],["T_WHITESPACE"," ",855],["T_FUNCTION","function",855],["T_WHITESPACE"," ",855],["T_STRING","_isSubCallAllowed",855],"(",["T_VARIABLE","$resourceId",855],")",["T_WHITESPACE","\n    ",855],"{",["T_WHITESPACE","\n        ",856],["T_DOC_COMMENT","\/** @var $globalAcl Mage_Api2_Model_Acl_Global *\/",857],["T_WHITESPACE","\n        ",857],["T_VARIABLE","$globalAcl",858],["T_WHITESPACE"," ",858],"=",["T_WHITESPACE"," ",858],["T_STRING","Mage",858],["T_DOUBLE_COLON","::",858],["T_STRING","getSingleton",858],"(",["T_CONSTANT_ENCAPSED_STRING","'api2\/acl_global'",858],")",";",["T_WHITESPACE","\n\n        ",858],["T_TRY","try",860],["T_WHITESPACE"," ",860],"{",["T_WHITESPACE","\n            ",860],["T_RETURN","return",861],["T_WHITESPACE"," ",861],["T_VARIABLE","$globalAcl",861],["T_OBJECT_OPERATOR","->",861],["T_STRING","isAllowed",861],"(",["T_VARIABLE","$this",861],["T_OBJECT_OPERATOR","->",861],["T_STRING","getApiUser",861],"(",")",",",["T_WHITESPACE"," ",861],["T_VARIABLE","$resourceId",861],",",["T_WHITESPACE"," ",861],["T_VARIABLE","$this",861],["T_OBJECT_OPERATOR","->",861],["T_STRING","getOperation",861],"(",")",")",";",["T_WHITESPACE","\n        ",861],"}",["T_WHITESPACE"," ",862],["T_CATCH","catch",862],["T_WHITESPACE"," ",862],"(",["T_STRING","Mage_Api2_Exception",862],["T_WHITESPACE"," ",862],["T_VARIABLE","$e",862],")",["T_WHITESPACE"," ",862],"{",["T_WHITESPACE","\n            ",862],["T_THROW","throw",863],["T_WHITESPACE"," ",863],["T_NEW","new",863],["T_WHITESPACE"," ",863],["T_STRING","Exception",863],"(",["T_CONSTANT_ENCAPSED_STRING","'Invalid arguments for isAllowed() call'",863],")",";",["T_WHITESPACE","\n        ",863],"}",["T_WHITESPACE","\n    ",864],"}",["T_WHITESPACE","\n\n    ",865],["T_DOC_COMMENT","\/**\n     * Set 'returnData' flag\n     *\n     * @param boolean $flag\n     * @return Mage_Api2_Model_Resource\n     *\/",867],["T_WHITESPACE","\n    ",872],["T_PUBLIC","public",873],["T_WHITESPACE"," ",873],["T_FUNCTION","function",873],["T_WHITESPACE"," ",873],["T_STRING","setReturnData",873],"(",["T_VARIABLE","$flag",873],")",["T_WHITESPACE","\n    ",873],"{",["T_WHITESPACE","\n        ",874],["T_VARIABLE","$this",875],["T_OBJECT_OPERATOR","->",875],["T_STRING","_returnData",875],["T_WHITESPACE"," ",875],"=",["T_WHITESPACE"," ",875],["T_VARIABLE","$flag",875],";",["T_WHITESPACE","\n        ",875],["T_RETURN","return",876],["T_WHITESPACE"," ",876],["T_VARIABLE","$this",876],";",["T_WHITESPACE","\n    ",876],"}",["T_WHITESPACE","\n\n    ",877],["T_DOC_COMMENT","\/**\n     * Get resource location\n     *\n     * @param Mage_Core_Model_Abstract $resource\n     * @return string URL\n     *\/",879],["T_WHITESPACE","\n    ",884],["T_PROTECTED","protected",885],["T_WHITESPACE"," ",885],["T_FUNCTION","function",885],["T_WHITESPACE"," ",885],["T_STRING","_getLocation",885],"(",["T_VARIABLE","$resource",885],")",["T_WHITESPACE","\n    ",885],"{",["T_WHITESPACE","\n        ",886],["T_COMMENT","\/* @var $apiTypeRoute Mage_Api2_Model_Route_ApiType *\/",887],["T_WHITESPACE","\n        ",887],["T_VARIABLE","$apiTypeRoute",888],["T_WHITESPACE"," ",888],"=",["T_WHITESPACE"," ",888],["T_STRING","Mage",888],["T_DOUBLE_COLON","::",888],["T_STRING","getModel",888],"(",["T_CONSTANT_ENCAPSED_STRING","'api2\/route_apiType'",888],")",";",["T_WHITESPACE","\n\n        ",888],["T_VARIABLE","$chain",890],["T_WHITESPACE"," ",890],"=",["T_WHITESPACE"," ",890],["T_VARIABLE","$apiTypeRoute",890],["T_OBJECT_OPERATOR","->",890],["T_STRING","chain",890],"(",["T_WHITESPACE","\n            ",890],["T_NEW","new",891],["T_WHITESPACE"," ",891],["T_STRING","Zend_Controller_Router_Route",891],"(",["T_VARIABLE","$this",891],["T_OBJECT_OPERATOR","->",891],["T_STRING","getConfig",891],"(",")",["T_OBJECT_OPERATOR","->",891],["T_STRING","getRouteWithEntityTypeAction",891],"(",["T_VARIABLE","$this",891],["T_OBJECT_OPERATOR","->",891],["T_STRING","getResourceType",891],"(",")",")",")",["T_WHITESPACE","\n        ",891],")",";",["T_WHITESPACE","\n        ",892],["T_VARIABLE","$params",893],["T_WHITESPACE"," ",893],"=",["T_WHITESPACE"," ",893],["T_ARRAY","array",893],"(",["T_WHITESPACE","\n            ",893],["T_CONSTANT_ENCAPSED_STRING","'api_type'",894],["T_WHITESPACE"," ",894],["T_DOUBLE_ARROW","=>",894],["T_WHITESPACE"," ",894],["T_VARIABLE","$this",894],["T_OBJECT_OPERATOR","->",894],["T_STRING","getRequest",894],"(",")",["T_OBJECT_OPERATOR","->",894],["T_STRING","getApiType",894],"(",")",",",["T_WHITESPACE","\n            ",894],["T_CONSTANT_ENCAPSED_STRING","'id'",895],["T_WHITESPACE","       ",895],["T_DOUBLE_ARROW","=>",895],["T_WHITESPACE"," ",895],["T_VARIABLE","$resource",895],["T_OBJECT_OPERATOR","->",895],["T_STRING","getId",895],"(",")",["T_WHITESPACE","\n        ",895],")",";",["T_WHITESPACE","\n        ",896],["T_VARIABLE","$uri",897],["T_WHITESPACE"," ",897],"=",["T_WHITESPACE"," ",897],["T_VARIABLE","$chain",897],["T_OBJECT_OPERATOR","->",897],["T_STRING","assemble",897],"(",["T_VARIABLE","$params",897],")",";",["T_WHITESPACE","\n\n        ",897],["T_RETURN","return",899],["T_WHITESPACE"," ",899],["T_CONSTANT_ENCAPSED_STRING","'\/'",899],["T_WHITESPACE"," ",899],".",["T_WHITESPACE"," ",899],["T_VARIABLE","$uri",899],";",["T_WHITESPACE","\n    ",899],"}",["T_WHITESPACE","\n\n    ",900],["T_DOC_COMMENT","\/**\n     * Resource specific method to retrieve attributes' codes. May be overriden in child.\n     *\n     * @return array\n     *\/",902],["T_WHITESPACE","\n    ",906],["T_PROTECTED","protected",907],["T_WHITESPACE"," ",907],["T_FUNCTION","function",907],["T_WHITESPACE"," ",907],["T_STRING","_getResourceAttributes",907],"(",")",["T_WHITESPACE","\n    ",907],"{",["T_WHITESPACE","\n        ",908],["T_RETURN","return",909],["T_WHITESPACE"," ",909],["T_ARRAY","array",909],"(",")",";",["T_WHITESPACE","\n    ",909],"}",["T_WHITESPACE","\n\n    ",910],["T_DOC_COMMENT","\/**\n     * Get available attributes of API resource\n     *\n     * @param string $userType\n     * @param string $operation\n     * @return array\n     *\/",912],["T_WHITESPACE","\n    ",918],["T_PUBLIC","public",919],["T_WHITESPACE"," ",919],["T_FUNCTION","function",919],["T_WHITESPACE"," ",919],["T_STRING","getAvailableAttributes",919],"(",["T_VARIABLE","$userType",919],",",["T_WHITESPACE"," ",919],["T_VARIABLE","$operation",919],")",["T_WHITESPACE","\n    ",919],"{",["T_WHITESPACE","\n        ",920],["T_VARIABLE","$available",921],["T_WHITESPACE","     ",921],"=",["T_WHITESPACE"," ",921],["T_VARIABLE","$this",921],["T_OBJECT_OPERATOR","->",921],["T_STRING","getAvailableAttributesFromConfig",921],"(",")",";",["T_WHITESPACE","\n        ",921],["T_VARIABLE","$excludedAttrs",922],["T_WHITESPACE"," ",922],"=",["T_WHITESPACE"," ",922],["T_VARIABLE","$this",922],["T_OBJECT_OPERATOR","->",922],["T_STRING","getExcludedAttributes",922],"(",["T_VARIABLE","$userType",922],",",["T_WHITESPACE"," ",922],["T_VARIABLE","$operation",922],")",";",["T_WHITESPACE","\n        ",922],["T_VARIABLE","$includedAttrs",923],["T_WHITESPACE"," ",923],"=",["T_WHITESPACE"," ",923],["T_VARIABLE","$this",923],["T_OBJECT_OPERATOR","->",923],["T_STRING","getIncludedAttributes",923],"(",["T_VARIABLE","$userType",923],",",["T_WHITESPACE"," ",923],["T_VARIABLE","$operation",923],")",";",["T_WHITESPACE","\n        ",923],["T_VARIABLE","$entityOnlyAttrs",924],["T_WHITESPACE"," ",924],"=",["T_WHITESPACE"," ",924],["T_VARIABLE","$this",924],["T_OBJECT_OPERATOR","->",924],["T_STRING","getEntityOnlyAttributes",924],"(",["T_VARIABLE","$userType",924],",",["T_WHITESPACE"," ",924],["T_VARIABLE","$operation",924],")",";",["T_WHITESPACE","\n        ",924],["T_VARIABLE","$resourceAttrs",925],["T_WHITESPACE"," ",925],"=",["T_WHITESPACE"," ",925],["T_VARIABLE","$this",925],["T_OBJECT_OPERATOR","->",925],["T_STRING","_getResourceAttributes",925],"(",")",";",["T_WHITESPACE","\n\n        ",925],["T_COMMENT","\/\/ if resource returns not-associative array - attributes' codes only\n",927],["T_WHITESPACE","        ",928],["T_IF","if",928],["T_WHITESPACE"," ",928],"(",["T_LNUMBER","0",928],["T_WHITESPACE"," ",928],["T_IS_IDENTICAL","===",928],["T_WHITESPACE"," ",928],["T_STRING","key",928],"(",["T_VARIABLE","$resourceAttrs",928],")",")",["T_WHITESPACE"," ",928],"{",["T_WHITESPACE","\n            ",928],["T_VARIABLE","$resourceAttrs",929],["T_WHITESPACE"," ",929],"=",["T_WHITESPACE"," ",929],["T_STRING","array_combine",929],"(",["T_VARIABLE","$resourceAttrs",929],",",["T_WHITESPACE"," ",929],["T_VARIABLE","$resourceAttrs",929],")",";",["T_WHITESPACE","\n        ",929],"}",["T_WHITESPACE","\n        ",930],["T_FOREACH","foreach",931],["T_WHITESPACE"," ",931],"(",["T_VARIABLE","$resourceAttrs",931],["T_WHITESPACE"," ",931],["T_AS","as",931],["T_WHITESPACE"," ",931],["T_VARIABLE","$attrCode",931],["T_WHITESPACE"," ",931],["T_DOUBLE_ARROW","=>",931],["T_WHITESPACE"," ",931],["T_VARIABLE","$attrLabel",931],")",["T_WHITESPACE"," ",931],"{",["T_WHITESPACE","\n            ",931],["T_IF","if",932],["T_WHITESPACE"," ",932],"(","!",["T_ISSET","isset",932],"(",["T_VARIABLE","$available",932],"[",["T_VARIABLE","$attrCode",932],"]",")",")",["T_WHITESPACE"," ",932],"{",["T_WHITESPACE","\n                ",932],["T_VARIABLE","$available",933],"[",["T_VARIABLE","$attrCode",933],"]",["T_WHITESPACE"," ",933],"=",["T_WHITESPACE"," ",933],["T_EMPTY","empty",933],"(",["T_VARIABLE","$attrLabel",933],")",["T_WHITESPACE"," ",933],"?",["T_WHITESPACE"," ",933],["T_VARIABLE","$attrCode",933],["T_WHITESPACE"," ",933],":",["T_WHITESPACE"," ",933],["T_VARIABLE","$attrLabel",933],";",["T_WHITESPACE","\n            ",933],"}",["T_WHITESPACE","\n        ",934],"}",["T_WHITESPACE","\n        ",935],["T_FOREACH","foreach",936],["T_WHITESPACE"," ",936],"(",["T_STRING","array_keys",936],"(",["T_VARIABLE","$available",936],")",["T_WHITESPACE"," ",936],["T_AS","as",936],["T_WHITESPACE"," ",936],["T_VARIABLE","$code",936],")",["T_WHITESPACE"," ",936],"{",["T_WHITESPACE","\n            ",936],["T_IF","if",937],["T_WHITESPACE"," ",937],"(",["T_STRING","in_array",937],"(",["T_VARIABLE","$code",937],",",["T_WHITESPACE"," ",937],["T_VARIABLE","$excludedAttrs",937],")",["T_WHITESPACE"," ",937],["T_BOOLEAN_OR","||",937],["T_WHITESPACE"," ",937],"(",["T_VARIABLE","$includedAttrs",937],["T_WHITESPACE"," ",937],["T_BOOLEAN_AND","&&",937],["T_WHITESPACE"," ",937],"!",["T_STRING","in_array",937],"(",["T_VARIABLE","$code",937],",",["T_WHITESPACE"," ",937],["T_VARIABLE","$includedAttrs",937],")",")",")",["T_WHITESPACE"," ",937],"{",["T_WHITESPACE","\n                ",937],["T_UNSET","unset",938],"(",["T_VARIABLE","$available",938],"[",["T_VARIABLE","$code",938],"]",")",";",["T_WHITESPACE","\n            ",938],"}",["T_WHITESPACE","\n            ",939],["T_IF","if",940],["T_WHITESPACE"," ",940],"(",["T_STRING","in_array",940],"(",["T_VARIABLE","$code",940],",",["T_WHITESPACE"," ",940],["T_VARIABLE","$entityOnlyAttrs",940],")",")",["T_WHITESPACE"," ",940],"{",["T_WHITESPACE","\n                ",940],["T_VARIABLE","$available",941],"[",["T_VARIABLE","$code",941],"]",["T_WHITESPACE"," ",941],["T_CONCAT_EQUAL",".=",941],["T_WHITESPACE"," ",941],["T_CONSTANT_ENCAPSED_STRING","' *'",941],";",["T_WHITESPACE","\n            ",941],"}",["T_WHITESPACE","\n        ",942],"}",["T_WHITESPACE","\n        ",943],["T_RETURN","return",944],["T_WHITESPACE"," ",944],["T_VARIABLE","$available",944],";",["T_WHITESPACE","\n    ",944],"}",["T_WHITESPACE","\n\n    ",945],["T_DOC_COMMENT","\/**\n     * Get excluded attributes for user type\n     *\n     * @param string $userType\n     * @param string $operation\n     * @return array\n     *\/",947],["T_WHITESPACE","\n    ",953],["T_PUBLIC","public",954],["T_WHITESPACE"," ",954],["T_FUNCTION","function",954],["T_WHITESPACE"," ",954],["T_STRING","getExcludedAttributes",954],"(",["T_VARIABLE","$userType",954],",",["T_WHITESPACE"," ",954],["T_VARIABLE","$operation",954],")",["T_WHITESPACE","\n    ",954],"{",["T_WHITESPACE","\n        ",955],["T_RETURN","return",956],["T_WHITESPACE"," ",956],["T_VARIABLE","$this",956],["T_OBJECT_OPERATOR","->",956],["T_STRING","getConfig",956],"(",")",["T_OBJECT_OPERATOR","->",956],["T_STRING","getResourceExcludedAttributes",956],"(",["T_VARIABLE","$this",956],["T_OBJECT_OPERATOR","->",956],["T_STRING","getResourceType",956],"(",")",",",["T_WHITESPACE"," ",956],["T_VARIABLE","$userType",956],",",["T_WHITESPACE"," ",956],["T_VARIABLE","$operation",956],")",";",["T_WHITESPACE","\n    ",956],"}",["T_WHITESPACE","\n\n    ",957],["T_DOC_COMMENT","\/**\n     * Get forced attributes\n     *\n     * @return array\n     *\/",959],["T_WHITESPACE","\n    ",963],["T_PUBLIC","public",964],["T_WHITESPACE"," ",964],["T_FUNCTION","function",964],["T_WHITESPACE"," ",964],["T_STRING","getForcedAttributes",964],"(",")",["T_WHITESPACE","\n    ",964],"{",["T_WHITESPACE","\n        ",965],["T_RETURN","return",966],["T_WHITESPACE"," ",966],["T_VARIABLE","$this",966],["T_OBJECT_OPERATOR","->",966],["T_STRING","getConfig",966],"(",")",["T_OBJECT_OPERATOR","->",966],["T_STRING","getResourceForcedAttributes",966],"(",["T_VARIABLE","$this",966],["T_OBJECT_OPERATOR","->",966],["T_STRING","getResourceType",966],"(",")",",",["T_WHITESPACE"," ",966],["T_VARIABLE","$this",966],["T_OBJECT_OPERATOR","->",966],["T_STRING","getUserType",966],"(",")",")",";",["T_WHITESPACE","\n    ",966],"}",["T_WHITESPACE","\n\n    ",967],["T_DOC_COMMENT","\/**\n     * Retrieve list of included attributes\n     *\n     * @param string $userType API user type\n     * @param string $operationType Type of operation: one of Mage_Api2_Model_Resource::OPERATION_ATTRIBUTE_... constant\n     * @return array\n     *\/",969],["T_WHITESPACE","\n    ",975],["T_PUBLIC","public",976],["T_WHITESPACE"," ",976],["T_FUNCTION","function",976],["T_WHITESPACE"," ",976],["T_STRING","getIncludedAttributes",976],"(",["T_VARIABLE","$userType",976],",",["T_WHITESPACE"," ",976],["T_VARIABLE","$operationType",976],")",["T_WHITESPACE","\n    ",976],"{",["T_WHITESPACE","\n        ",977],["T_RETURN","return",978],["T_WHITESPACE"," ",978],["T_VARIABLE","$this",978],["T_OBJECT_OPERATOR","->",978],["T_STRING","getConfig",978],"(",")",["T_OBJECT_OPERATOR","->",978],["T_STRING","getResourceIncludedAttributes",978],"(",["T_VARIABLE","$this",978],["T_OBJECT_OPERATOR","->",978],["T_STRING","getResourceType",978],"(",")",",",["T_WHITESPACE"," ",978],["T_VARIABLE","$userType",978],",",["T_WHITESPACE"," ",978],["T_VARIABLE","$operationType",978],")",";",["T_WHITESPACE","\n    ",978],"}",["T_WHITESPACE","\n\n    ",979],["T_DOC_COMMENT","\/**\n     * Retrieve list of entity only attributes\n     *\n     * @param string $userType API user type\n     * @param string $operationType Type of operation: one of Mage_Api2_Model_Resource::OPERATION_ATTRIBUTE_... constant\n     * @return array\n     *\/",981],["T_WHITESPACE","\n    ",987],["T_PUBLIC","public",988],["T_WHITESPACE"," ",988],["T_FUNCTION","function",988],["T_WHITESPACE"," ",988],["T_STRING","getEntityOnlyAttributes",988],"(",["T_VARIABLE","$userType",988],",",["T_WHITESPACE"," ",988],["T_VARIABLE","$operationType",988],")",["T_WHITESPACE","\n    ",988],"{",["T_WHITESPACE","\n        ",989],["T_RETURN","return",990],["T_WHITESPACE"," ",990],["T_VARIABLE","$this",990],["T_OBJECT_OPERATOR","->",990],["T_STRING","getConfig",990],"(",")",["T_OBJECT_OPERATOR","->",990],["T_STRING","getResourceEntityOnlyAttributes",990],"(",["T_VARIABLE","$this",990],["T_OBJECT_OPERATOR","->",990],["T_STRING","getResourceType",990],"(",")",",",["T_WHITESPACE"," ",990],["T_VARIABLE","$userType",990],",",["T_WHITESPACE"," ",990],["T_VARIABLE","$operationType",990],")",";",["T_WHITESPACE","\n    ",990],"}",["T_WHITESPACE","\n\n    ",991],["T_DOC_COMMENT","\/**\n     * Get available attributes of API resource from configuration file\n     *\n     * @return array\n     *\/",993],["T_WHITESPACE","\n    ",997],["T_PUBLIC","public",998],["T_WHITESPACE"," ",998],["T_FUNCTION","function",998],["T_WHITESPACE"," ",998],["T_STRING","getAvailableAttributesFromConfig",998],"(",")",["T_WHITESPACE","\n    ",998],"{",["T_WHITESPACE","\n        ",999],["T_RETURN","return",1000],["T_WHITESPACE"," ",1000],["T_VARIABLE","$this",1000],["T_OBJECT_OPERATOR","->",1000],["T_STRING","getConfig",1000],"(",")",["T_OBJECT_OPERATOR","->",1000],["T_STRING","getResourceAttributes",1000],"(",["T_VARIABLE","$this",1000],["T_OBJECT_OPERATOR","->",1000],["T_STRING","getResourceType",1000],"(",")",")",";",["T_WHITESPACE","\n    ",1000],"}",["T_WHITESPACE","\n\n    ",1001],["T_DOC_COMMENT","\/**\n     * Get available attributes of API resource from data base\n     *\n     * @return array\n     *\/",1003],["T_WHITESPACE","\n    ",1007],["T_PUBLIC","public",1008],["T_WHITESPACE"," ",1008],["T_FUNCTION","function",1008],["T_WHITESPACE"," ",1008],["T_STRING","getDbAttributes",1008],"(",")",["T_WHITESPACE","\n    ",1008],"{",["T_WHITESPACE","\n        ",1009],["T_VARIABLE","$available",1010],["T_WHITESPACE"," ",1010],"=",["T_WHITESPACE"," ",1010],["T_ARRAY","array",1010],"(",")",";",["T_WHITESPACE","\n        ",1010],["T_VARIABLE","$workModel",1011],["T_WHITESPACE"," ",1011],"=",["T_WHITESPACE"," ",1011],["T_VARIABLE","$this",1011],["T_OBJECT_OPERATOR","->",1011],["T_STRING","getConfig",1011],"(",")",["T_OBJECT_OPERATOR","->",1011],["T_STRING","getResourceWorkingModel",1011],"(",["T_VARIABLE","$this",1011],["T_OBJECT_OPERATOR","->",1011],["T_STRING","getResourceType",1011],"(",")",")",";",["T_WHITESPACE","\n\n        ",1011],["T_IF","if",1013],["T_WHITESPACE"," ",1013],"(",["T_VARIABLE","$workModel",1013],")",["T_WHITESPACE"," ",1013],"{",["T_WHITESPACE","\n            ",1013],["T_COMMENT","\/* @var $resource Mage_Core_Model_Resource_Db_Abstract *\/",1014],["T_WHITESPACE","\n            ",1014],["T_VARIABLE","$resource",1015],["T_WHITESPACE"," ",1015],"=",["T_WHITESPACE"," ",1015],["T_STRING","Mage",1015],["T_DOUBLE_COLON","::",1015],["T_STRING","getResourceModel",1015],"(",["T_VARIABLE","$workModel",1015],")",";",["T_WHITESPACE","\n\n            ",1015],["T_IF","if",1017],["T_WHITESPACE"," ",1017],"(",["T_STRING","method_exists",1017],"(",["T_VARIABLE","$resource",1017],",",["T_WHITESPACE"," ",1017],["T_CONSTANT_ENCAPSED_STRING","'getMainTable'",1017],")",")",["T_WHITESPACE"," ",1017],"{",["T_WHITESPACE","\n                ",1017],["T_VARIABLE","$available",1018],["T_WHITESPACE"," ",1018],"=",["T_WHITESPACE"," ",1018],["T_STRING","array_keys",1018],"(",["T_VARIABLE","$resource",1018],["T_OBJECT_OPERATOR","->",1018],["T_STRING","getReadConnection",1018],"(",")",["T_OBJECT_OPERATOR","->",1018],["T_STRING","describeTable",1018],"(",["T_VARIABLE","$resource",1018],["T_OBJECT_OPERATOR","->",1018],["T_STRING","getMainTable",1018],"(",")",")",")",";",["T_WHITESPACE","\n            ",1018],"}",["T_WHITESPACE","\n        ",1019],"}",["T_WHITESPACE","\n        ",1020],["T_RETURN","return",1021],["T_WHITESPACE"," ",1021],["T_VARIABLE","$available",1021],";",["T_WHITESPACE","\n    ",1021],"}",["T_WHITESPACE","\n\n    ",1022],["T_DOC_COMMENT","\/**\n     * Get EAV attributes of working model\n     *\n     * @param bool $onlyVisible OPTIONAL Show only the attributes which are visible on frontend\n     * @param bool $excludeSystem OPTIONAL Exclude attributes marked as system\n     * @return array\n     *\/",1024],["T_WHITESPACE","\n    ",1030],["T_PUBLIC","public",1031],["T_WHITESPACE"," ",1031],["T_FUNCTION","function",1031],["T_WHITESPACE"," ",1031],["T_STRING","getEavAttributes",1031],"(",["T_VARIABLE","$onlyVisible",1031],["T_WHITESPACE"," ",1031],"=",["T_WHITESPACE"," ",1031],["T_STRING","false",1031],",",["T_WHITESPACE"," ",1031],["T_VARIABLE","$excludeSystem",1031],["T_WHITESPACE"," ",1031],"=",["T_WHITESPACE"," ",1031],["T_STRING","false",1031],")",["T_WHITESPACE","\n    ",1031],"{",["T_WHITESPACE","\n        ",1032],["T_VARIABLE","$attributes",1033],["T_WHITESPACE"," ",1033],"=",["T_WHITESPACE"," ",1033],["T_ARRAY","array",1033],"(",")",";",["T_WHITESPACE","\n        ",1033],["T_VARIABLE","$model",1034],["T_WHITESPACE"," ",1034],"=",["T_WHITESPACE"," ",1034],["T_VARIABLE","$this",1034],["T_OBJECT_OPERATOR","->",1034],["T_STRING","getConfig",1034],"(",")",["T_OBJECT_OPERATOR","->",1034],["T_STRING","getResourceWorkingModel",1034],"(",["T_VARIABLE","$this",1034],["T_OBJECT_OPERATOR","->",1034],["T_STRING","getResourceType",1034],"(",")",")",";",["T_WHITESPACE","\n\n        ",1034],["T_DOC_COMMENT","\/** @var $entityType Mage_Eav_Model_Entity_Type *\/",1036],["T_WHITESPACE","\n        ",1036],["T_VARIABLE","$entityType",1037],["T_WHITESPACE"," ",1037],"=",["T_WHITESPACE"," ",1037],["T_STRING","Mage",1037],["T_DOUBLE_COLON","::",1037],["T_STRING","getModel",1037],"(",["T_CONSTANT_ENCAPSED_STRING","'eav\/entity_type'",1037],")",["T_OBJECT_OPERATOR","->",1037],["T_STRING","load",1037],"(",["T_VARIABLE","$model",1037],",",["T_WHITESPACE"," ",1037],["T_CONSTANT_ENCAPSED_STRING","'entity_model'",1037],")",";",["T_WHITESPACE","\n\n        ",1037],["T_DOC_COMMENT","\/** @var $attribute Mage_Eav_Model_Entity_Attribute *\/",1039],["T_WHITESPACE","\n        ",1039],["T_FOREACH","foreach",1040],["T_WHITESPACE"," ",1040],"(",["T_VARIABLE","$entityType",1040],["T_OBJECT_OPERATOR","->",1040],["T_STRING","getAttributeCollection",1040],"(",")",["T_WHITESPACE"," ",1040],["T_AS","as",1040],["T_WHITESPACE"," ",1040],["T_VARIABLE","$attribute",1040],")",["T_WHITESPACE"," ",1040],"{",["T_WHITESPACE","\n            ",1040],["T_IF","if",1041],["T_WHITESPACE"," ",1041],"(",["T_VARIABLE","$onlyVisible",1041],["T_WHITESPACE"," ",1041],["T_BOOLEAN_AND","&&",1041],["T_WHITESPACE"," ",1041],"!",["T_VARIABLE","$attribute",1041],["T_OBJECT_OPERATOR","->",1041],["T_STRING","getIsVisible",1041],"(",")",")",["T_WHITESPACE"," ",1041],"{",["T_WHITESPACE","\n                ",1041],["T_CONTINUE","continue",1042],";",["T_WHITESPACE","\n            ",1042],"}",["T_WHITESPACE","\n            ",1043],["T_IF","if",1044],["T_WHITESPACE"," ",1044],"(",["T_VARIABLE","$excludeSystem",1044],["T_WHITESPACE"," ",1044],["T_BOOLEAN_AND","&&",1044],["T_WHITESPACE"," ",1044],["T_VARIABLE","$attribute",1044],["T_OBJECT_OPERATOR","->",1044],["T_STRING","getIsSystem",1044],"(",")",")",["T_WHITESPACE"," ",1044],"{",["T_WHITESPACE","\n                ",1044],["T_CONTINUE","continue",1045],";",["T_WHITESPACE","\n            ",1045],"}",["T_WHITESPACE","\n            ",1046],["T_VARIABLE","$attributes",1047],"[",["T_VARIABLE","$attribute",1047],["T_OBJECT_OPERATOR","->",1047],["T_STRING","getAttributeCode",1047],"(",")","]",["T_WHITESPACE"," ",1047],"=",["T_WHITESPACE"," ",1047],["T_VARIABLE","$attribute",1047],["T_OBJECT_OPERATOR","->",1047],["T_STRING","getFrontendLabel",1047],"(",")",";",["T_WHITESPACE","\n        ",1047],"}",["T_WHITESPACE","\n\n        ",1048],["T_RETURN","return",1050],["T_WHITESPACE"," ",1050],["T_VARIABLE","$attributes",1050],";",["T_WHITESPACE","\n    ",1050],"}",["T_WHITESPACE","\n\n    ",1051],["T_DOC_COMMENT","\/**\n     * Retrieve current store according to request and API user type\n     *\n     * @return Mage_Core_Model_Store\n     *\/",1053],["T_WHITESPACE","\n    ",1057],["T_PROTECTED","protected",1058],["T_WHITESPACE"," ",1058],["T_FUNCTION","function",1058],["T_WHITESPACE"," ",1058],["T_STRING","_getStore",1058],"(",")",["T_WHITESPACE","\n    ",1058],"{",["T_WHITESPACE","\n        ",1059],["T_VARIABLE","$store",1060],["T_WHITESPACE"," ",1060],"=",["T_WHITESPACE"," ",1060],["T_VARIABLE","$this",1060],["T_OBJECT_OPERATOR","->",1060],["T_STRING","getRequest",1060],"(",")",["T_OBJECT_OPERATOR","->",1060],["T_STRING","getParam",1060],"(",["T_CONSTANT_ENCAPSED_STRING","'store'",1060],")",";",["T_WHITESPACE","\n        ",1060],["T_TRY","try",1061],["T_WHITESPACE"," ",1061],"{",["T_WHITESPACE","\n            ",1061],["T_IF","if",1062],["T_WHITESPACE"," ",1062],"(",["T_VARIABLE","$this",1062],["T_OBJECT_OPERATOR","->",1062],["T_STRING","getUserType",1062],"(",")",["T_WHITESPACE"," ",1062],["T_IS_NOT_EQUAL","!=",1062],["T_WHITESPACE"," ",1062],["T_STRING","Mage_Api2_Model_Auth_User_Admin",1062],["T_DOUBLE_COLON","::",1062],["T_STRING","USER_TYPE",1062],")",["T_WHITESPACE"," ",1062],"{",["T_WHITESPACE","\n                ",1062],["T_COMMENT","\/\/ customer or guest role\n",1063],["T_WHITESPACE","                ",1064],["T_IF","if",1064],["T_WHITESPACE"," ",1064],"(","!",["T_VARIABLE","$store",1064],")",["T_WHITESPACE"," ",1064],"{",["T_WHITESPACE","\n                    ",1064],["T_VARIABLE","$store",1065],["T_WHITESPACE"," ",1065],"=",["T_WHITESPACE"," ",1065],["T_STRING","Mage",1065],["T_DOUBLE_COLON","::",1065],["T_STRING","app",1065],"(",")",["T_OBJECT_OPERATOR","->",1065],["T_STRING","getDefaultStoreView",1065],"(",")",";",["T_WHITESPACE","\n                ",1065],"}",["T_WHITESPACE"," ",1066],["T_ELSE","else",1066],["T_WHITESPACE"," ",1066],"{",["T_WHITESPACE","\n                    ",1066],["T_VARIABLE","$store",1067],["T_WHITESPACE"," ",1067],"=",["T_WHITESPACE"," ",1067],["T_STRING","Mage",1067],["T_DOUBLE_COLON","::",1067],["T_STRING","app",1067],"(",")",["T_OBJECT_OPERATOR","->",1067],["T_STRING","getStore",1067],"(",["T_VARIABLE","$store",1067],")",";",["T_WHITESPACE","\n                ",1067],"}",["T_WHITESPACE","\n            ",1068],"}",["T_WHITESPACE"," ",1069],["T_ELSE","else",1069],["T_WHITESPACE"," ",1069],"{",["T_WHITESPACE","\n                ",1069],["T_COMMENT","\/\/ admin role\n",1070],["T_WHITESPACE","                ",1071],["T_IF","if",1071],["T_WHITESPACE"," ",1071],"(",["T_STRING","is_null",1071],"(",["T_VARIABLE","$store",1071],")",")",["T_WHITESPACE"," ",1071],"{",["T_WHITESPACE","\n                    ",1071],["T_VARIABLE","$store",1072],["T_WHITESPACE"," ",1072],"=",["T_WHITESPACE"," ",1072],["T_STRING","Mage_Catalog_Model_Abstract",1072],["T_DOUBLE_COLON","::",1072],["T_STRING","DEFAULT_STORE_ID",1072],";",["T_WHITESPACE","\n                ",1072],"}",["T_WHITESPACE","\n                ",1073],["T_VARIABLE","$store",1074],["T_WHITESPACE"," ",1074],"=",["T_WHITESPACE"," ",1074],["T_STRING","Mage",1074],["T_DOUBLE_COLON","::",1074],["T_STRING","app",1074],"(",")",["T_OBJECT_OPERATOR","->",1074],["T_STRING","getStore",1074],"(",["T_VARIABLE","$store",1074],")",";",["T_WHITESPACE","\n            ",1074],"}",["T_WHITESPACE","\n        ",1075],"}",["T_WHITESPACE"," ",1076],["T_CATCH","catch",1076],["T_WHITESPACE"," ",1076],"(",["T_STRING","Mage_Core_Model_Store_Exception",1076],["T_WHITESPACE"," ",1076],["T_VARIABLE","$e",1076],")",["T_WHITESPACE"," ",1076],"{",["T_WHITESPACE","\n            ",1076],["T_COMMENT","\/\/ store does not exist\n",1077],["T_WHITESPACE","            ",1078],["T_VARIABLE","$this",1078],["T_OBJECT_OPERATOR","->",1078],["T_STRING","_critical",1078],"(",["T_CONSTANT_ENCAPSED_STRING","'Requested store is invalid'",1078],",",["T_WHITESPACE"," ",1078],["T_STRING","Mage_Api2_Model_Server",1078],["T_DOUBLE_COLON","::",1078],["T_STRING","HTTP_BAD_REQUEST",1078],")",";",["T_WHITESPACE","\n        ",1078],"}",["T_WHITESPACE","\n        ",1079],["T_RETURN","return",1080],["T_WHITESPACE"," ",1080],["T_VARIABLE","$store",1080],";",["T_WHITESPACE","\n    ",1080],"}",["T_WHITESPACE","\n",1081],"}",["T_WHITESPACE","\n",1082]]
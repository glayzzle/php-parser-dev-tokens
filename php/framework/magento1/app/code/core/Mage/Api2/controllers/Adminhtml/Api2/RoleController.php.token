[["T_OPEN_TAG","<?php\n",1],["T_DOC_COMMENT","\/**\n * Magento\n *\n * NOTICE OF LICENSE\n *\n * This source file is subject to the Open Software License (OSL 3.0)\n * that is bundled with this package in the file LICENSE.txt.\n * It is also available through the world-wide-web at this URL:\n * http:\/\/opensource.org\/licenses\/osl-3.0.php\n * If you did not receive a copy of the license and are unable to\n * obtain it through the world-wide-web, please send an email\n * to license@magento.com so we can send you a copy immediately.\n *\n * DISCLAIMER\n *\n * Do not edit or add to this file if you wish to upgrade Magento to newer\n * versions in the future. If you wish to customize Magento for your\n * needs please refer to http:\/\/www.magento.com for more information.\n *\n * @category    Mage\n * @package     Mage_Api2\n * @copyright  Copyright (c) 2006-2016 X.commerce, Inc. and affiliates (http:\/\/www.magento.com)\n * @license    http:\/\/opensource.org\/licenses\/osl-3.0.php  Open Software License (OSL 3.0)\n *\/",2],["T_WHITESPACE","\n\n",25],["T_DOC_COMMENT","\/**\n * API2 roles controller\n *\n * @category   Mage\n * @package    Mage_Api2\n * @author     Magento Core Team <core@magentocommerce.com>\n *\/",27],["T_WHITESPACE","\n",33],["T_CLASS","class",34],["T_WHITESPACE"," ",34],["T_STRING","Mage_Api2_Adminhtml_Api2_RoleController",34],["T_WHITESPACE"," ",34],["T_EXTENDS","extends",34],["T_WHITESPACE"," ",34],["T_STRING","Mage_Adminhtml_Controller_Action",34],["T_WHITESPACE","\n",34],"{",["T_WHITESPACE","\n    ",35],["T_DOC_COMMENT","\/**\n     * Show grid\n     *\/",36],["T_WHITESPACE","\n    ",38],["T_PUBLIC","public",39],["T_WHITESPACE"," ",39],["T_FUNCTION","function",39],["T_WHITESPACE"," ",39],["T_STRING","indexAction",39],"(",")",["T_WHITESPACE","\n    ",39],"{",["T_WHITESPACE","\n        ",40],["T_VARIABLE","$this",41],["T_OBJECT_OPERATOR","->",41],["T_STRING","_title",41],"(",["T_VARIABLE","$this",41],["T_OBJECT_OPERATOR","->",41],["T_STRING","__",41],"(",["T_CONSTANT_ENCAPSED_STRING","'System'",41],")",")",["T_WHITESPACE","\n             ",41],["T_OBJECT_OPERATOR","->",42],["T_STRING","_title",42],"(",["T_VARIABLE","$this",42],["T_OBJECT_OPERATOR","->",42],["T_STRING","__",42],"(",["T_CONSTANT_ENCAPSED_STRING","'Web Services'",42],")",")",["T_WHITESPACE","\n             ",42],["T_OBJECT_OPERATOR","->",43],["T_STRING","_title",43],"(",["T_VARIABLE","$this",43],["T_OBJECT_OPERATOR","->",43],["T_STRING","__",43],"(",["T_CONSTANT_ENCAPSED_STRING","'REST Roles'",43],")",")",";",["T_WHITESPACE","\n\n        ",43],["T_VARIABLE","$this",45],["T_OBJECT_OPERATOR","->",45],["T_STRING","loadLayout",45],"(",")",["T_OBJECT_OPERATOR","->",45],["T_STRING","_setActiveMenu",45],"(",["T_CONSTANT_ENCAPSED_STRING","'system\/services\/roles'",45],")",";",["T_WHITESPACE","\n        ",45],["T_VARIABLE","$this",46],["T_OBJECT_OPERATOR","->",46],["T_STRING","_addBreadcrumb",46],"(",["T_VARIABLE","$this",46],["T_OBJECT_OPERATOR","->",46],["T_STRING","__",46],"(",["T_CONSTANT_ENCAPSED_STRING","'Web services'",46],")",",",["T_WHITESPACE"," ",46],["T_VARIABLE","$this",46],["T_OBJECT_OPERATOR","->",46],["T_STRING","__",46],"(",["T_CONSTANT_ENCAPSED_STRING","'Web services'",46],")",")",";",["T_WHITESPACE","\n        ",46],["T_VARIABLE","$this",47],["T_OBJECT_OPERATOR","->",47],["T_STRING","_addBreadcrumb",47],"(",["T_VARIABLE","$this",47],["T_OBJECT_OPERATOR","->",47],["T_STRING","__",47],"(",["T_CONSTANT_ENCAPSED_STRING","'REST Roles'",47],")",",",["T_WHITESPACE"," ",47],["T_VARIABLE","$this",47],["T_OBJECT_OPERATOR","->",47],["T_STRING","__",47],"(",["T_CONSTANT_ENCAPSED_STRING","'REST Roles'",47],")",")",";",["T_WHITESPACE","\n        ",47],["T_VARIABLE","$this",48],["T_OBJECT_OPERATOR","->",48],["T_STRING","_addBreadcrumb",48],"(",["T_VARIABLE","$this",48],["T_OBJECT_OPERATOR","->",48],["T_STRING","__",48],"(",["T_CONSTANT_ENCAPSED_STRING","'Roles'",48],")",",",["T_WHITESPACE"," ",48],["T_VARIABLE","$this",48],["T_OBJECT_OPERATOR","->",48],["T_STRING","__",48],"(",["T_CONSTANT_ENCAPSED_STRING","'Roles'",48],")",")",";",["T_WHITESPACE","\n\n        ",48],["T_VARIABLE","$this",50],["T_OBJECT_OPERATOR","->",50],["T_STRING","renderLayout",50],"(",")",";",["T_WHITESPACE","\n    ",50],"}",["T_WHITESPACE","\n\n    ",51],["T_DOC_COMMENT","\/**\n     * Updating grid by ajax\n     *\/",53],["T_WHITESPACE","\n    ",55],["T_PUBLIC","public",56],["T_WHITESPACE"," ",56],["T_FUNCTION","function",56],["T_WHITESPACE"," ",56],["T_STRING","gridAction",56],"(",")",["T_WHITESPACE","\n    ",56],"{",["T_WHITESPACE","\n        ",57],["T_VARIABLE","$this",58],["T_OBJECT_OPERATOR","->",58],["T_STRING","loadLayout",58],"(",")",";",["T_WHITESPACE","\n        ",58],["T_VARIABLE","$this",59],["T_OBJECT_OPERATOR","->",59],["T_STRING","renderLayout",59],"(",")",";",["T_WHITESPACE","\n    ",59],"}",["T_WHITESPACE","\n\n    ",60],["T_DOC_COMMENT","\/**\n     * Updating users grid by ajax\n     *\/",62],["T_WHITESPACE","\n    ",64],["T_PUBLIC","public",65],["T_WHITESPACE"," ",65],["T_FUNCTION","function",65],["T_WHITESPACE"," ",65],["T_STRING","usersGridAction",65],"(",")",["T_WHITESPACE","\n    ",65],"{",["T_WHITESPACE","\n        ",66],["T_VARIABLE","$id",67],["T_WHITESPACE"," ",67],"=",["T_WHITESPACE"," ",67],["T_VARIABLE","$this",67],["T_OBJECT_OPERATOR","->",67],["T_STRING","getRequest",67],"(",")",["T_OBJECT_OPERATOR","->",67],["T_STRING","getParam",67],"(",["T_CONSTANT_ENCAPSED_STRING","'id'",67],",",["T_WHITESPACE"," ",67],["T_STRING","false",67],")",";",["T_WHITESPACE","\n\n        ",67],["T_VARIABLE","$this",69],["T_OBJECT_OPERATOR","->",69],["T_STRING","loadLayout",69],"(",")",";",["T_WHITESPACE","\n        ",69],["T_DOC_COMMENT","\/** @var $grid Mage_Api2_Block_Adminhtml_Roles_Tab_Users *\/",70],["T_WHITESPACE","\n        ",70],["T_VARIABLE","$grid",71],["T_WHITESPACE"," ",71],"=",["T_WHITESPACE"," ",71],["T_VARIABLE","$this",71],["T_OBJECT_OPERATOR","->",71],["T_STRING","getLayout",71],"(",")",["T_OBJECT_OPERATOR","->",71],["T_STRING","getBlock",71],"(",["T_CONSTANT_ENCAPSED_STRING","'adminhtml.role.edit.tab.users'",71],")",";",["T_WHITESPACE","\n        ",71],["T_VARIABLE","$grid",72],["T_OBJECT_OPERATOR","->",72],["T_STRING","setUsers",72],"(",["T_VARIABLE","$this",72],["T_OBJECT_OPERATOR","->",72],["T_STRING","_getUsers",72],"(",["T_VARIABLE","$id",72],")",")",";",["T_WHITESPACE","\n\n        ",72],["T_VARIABLE","$this",74],["T_OBJECT_OPERATOR","->",74],["T_STRING","renderLayout",74],"(",")",";",["T_WHITESPACE","\n    ",74],"}",["T_WHITESPACE","\n\n    ",75],["T_DOC_COMMENT","\/**\n     * Create new role\n     *\/",77],["T_WHITESPACE","\n    ",79],["T_PUBLIC","public",80],["T_WHITESPACE"," ",80],["T_FUNCTION","function",80],["T_WHITESPACE"," ",80],["T_STRING","newAction",80],"(",")",["T_WHITESPACE","\n    ",80],"{",["T_WHITESPACE","\n        ",81],["T_VARIABLE","$this",82],["T_OBJECT_OPERATOR","->",82],["T_STRING","_title",82],"(",["T_VARIABLE","$this",82],["T_OBJECT_OPERATOR","->",82],["T_STRING","__",82],"(",["T_CONSTANT_ENCAPSED_STRING","'System'",82],")",")",["T_WHITESPACE","\n             ",82],["T_OBJECT_OPERATOR","->",83],["T_STRING","_title",83],"(",["T_VARIABLE","$this",83],["T_OBJECT_OPERATOR","->",83],["T_STRING","__",83],"(",["T_CONSTANT_ENCAPSED_STRING","'Web Services'",83],")",")",["T_WHITESPACE","\n             ",83],["T_OBJECT_OPERATOR","->",84],["T_STRING","_title",84],"(",["T_VARIABLE","$this",84],["T_OBJECT_OPERATOR","->",84],["T_STRING","__",84],"(",["T_CONSTANT_ENCAPSED_STRING","'Rest Roles'",84],")",")",";",["T_WHITESPACE","\n\n        ",84],["T_VARIABLE","$this",86],["T_OBJECT_OPERATOR","->",86],["T_STRING","loadLayout",86],"(",")",["T_OBJECT_OPERATOR","->",86],["T_STRING","_setActiveMenu",86],"(",["T_CONSTANT_ENCAPSED_STRING","'system\/services\/roles'",86],")",";",["T_WHITESPACE","\n        ",86],["T_VARIABLE","$this",87],["T_OBJECT_OPERATOR","->",87],["T_STRING","_addBreadcrumb",87],"(",["T_VARIABLE","$this",87],["T_OBJECT_OPERATOR","->",87],["T_STRING","__",87],"(",["T_CONSTANT_ENCAPSED_STRING","'Web services'",87],")",",",["T_WHITESPACE"," ",87],["T_VARIABLE","$this",87],["T_OBJECT_OPERATOR","->",87],["T_STRING","__",87],"(",["T_CONSTANT_ENCAPSED_STRING","'Web services'",87],")",")",";",["T_WHITESPACE","\n        ",87],["T_VARIABLE","$this",88],["T_OBJECT_OPERATOR","->",88],["T_STRING","_addBreadcrumb",88],"(",["T_VARIABLE","$this",88],["T_OBJECT_OPERATOR","->",88],["T_STRING","__",88],"(",["T_CONSTANT_ENCAPSED_STRING","'REST Roles'",88],")",",",["T_WHITESPACE"," ",88],["T_VARIABLE","$this",88],["T_OBJECT_OPERATOR","->",88],["T_STRING","__",88],"(",["T_CONSTANT_ENCAPSED_STRING","'REST Roles'",88],")",")",";",["T_WHITESPACE","\n        ",88],["T_VARIABLE","$this",89],["T_OBJECT_OPERATOR","->",89],["T_STRING","_addBreadcrumb",89],"(",["T_VARIABLE","$this",89],["T_OBJECT_OPERATOR","->",89],["T_STRING","__",89],"(",["T_CONSTANT_ENCAPSED_STRING","'Roles'",89],")",",",["T_WHITESPACE"," ",89],["T_VARIABLE","$this",89],["T_OBJECT_OPERATOR","->",89],["T_STRING","__",89],"(",["T_CONSTANT_ENCAPSED_STRING","'Roles'",89],")",")",";",["T_WHITESPACE","\n\n        ",89],["T_VARIABLE","$breadCrumb",91],["T_WHITESPACE"," ",91],"=",["T_WHITESPACE"," ",91],["T_VARIABLE","$this",91],["T_OBJECT_OPERATOR","->",91],["T_STRING","__",91],"(",["T_CONSTANT_ENCAPSED_STRING","'Add New Role'",91],")",";",["T_WHITESPACE","\n        ",91],["T_VARIABLE","$breadCrumbTitle",92],["T_WHITESPACE"," ",92],"=",["T_WHITESPACE"," ",92],["T_VARIABLE","$this",92],["T_OBJECT_OPERATOR","->",92],["T_STRING","__",92],"(",["T_CONSTANT_ENCAPSED_STRING","'Add New Role'",92],")",";",["T_WHITESPACE","\n        ",92],["T_VARIABLE","$this",93],["T_OBJECT_OPERATOR","->",93],["T_STRING","_title",93],"(",["T_VARIABLE","$this",93],["T_OBJECT_OPERATOR","->",93],["T_STRING","__",93],"(",["T_CONSTANT_ENCAPSED_STRING","'New Role'",93],")",")",";",["T_WHITESPACE","\n\n        ",93],["T_VARIABLE","$this",95],["T_OBJECT_OPERATOR","->",95],["T_STRING","_addBreadcrumb",95],"(",["T_VARIABLE","$breadCrumb",95],",",["T_WHITESPACE"," ",95],["T_VARIABLE","$breadCrumbTitle",95],")",";",["T_WHITESPACE","\n\n        ",95],["T_VARIABLE","$this",97],["T_OBJECT_OPERATOR","->",97],["T_STRING","renderLayout",97],"(",")",";",["T_WHITESPACE","\n    ",97],"}",["T_WHITESPACE","\n\n    ",98],["T_DOC_COMMENT","\/**\n     * Edit role\n     *\/",100],["T_WHITESPACE","\n    ",102],["T_PUBLIC","public",103],["T_WHITESPACE"," ",103],["T_FUNCTION","function",103],["T_WHITESPACE"," ",103],["T_STRING","editAction",103],"(",")",["T_WHITESPACE","\n    ",103],"{",["T_WHITESPACE","\n        ",104],["T_VARIABLE","$id",105],["T_WHITESPACE"," ",105],"=",["T_WHITESPACE"," ",105],["T_INT_CAST","(int)",105],["T_WHITESPACE"," ",105],["T_VARIABLE","$this",105],["T_OBJECT_OPERATOR","->",105],["T_STRING","getRequest",105],"(",")",["T_OBJECT_OPERATOR","->",105],["T_STRING","getParam",105],"(",["T_CONSTANT_ENCAPSED_STRING","'id'",105],")",";",["T_WHITESPACE","\n        ",105],["T_DOC_COMMENT","\/** @var $role Mage_Api2_Model_Acl_Global_Role *\/",106],["T_WHITESPACE","\n        ",106],["T_VARIABLE","$role",107],["T_WHITESPACE"," ",107],"=",["T_WHITESPACE"," ",107],["T_STRING","Mage",107],["T_DOUBLE_COLON","::",107],["T_STRING","getModel",107],"(",["T_CONSTANT_ENCAPSED_STRING","'api2\/acl_global_role'",107],")",["T_OBJECT_OPERATOR","->",107],["T_STRING","load",107],"(",["T_VARIABLE","$id",107],")",";",["T_WHITESPACE","\n\n        ",107],["T_IF","if",109],["T_WHITESPACE"," ",109],"(","!",["T_VARIABLE","$role",109],["T_OBJECT_OPERATOR","->",109],["T_STRING","getId",109],"(",")",")",["T_WHITESPACE"," ",109],"{",["T_WHITESPACE","\n            ",109],["T_VARIABLE","$this",110],["T_OBJECT_OPERATOR","->",110],["T_STRING","_getSession",110],"(",")",["T_OBJECT_OPERATOR","->",110],["T_STRING","addError",110],"(",["T_VARIABLE","$this",110],["T_OBJECT_OPERATOR","->",110],["T_STRING","__",110],"(",["T_CONSTANT_ENCAPSED_STRING","'Role \"%s\" not found.'",110],",",["T_WHITESPACE"," ",110],["T_VARIABLE","$id",110],")",")",";",["T_WHITESPACE","\n            ",110],["T_VARIABLE","$this",111],["T_OBJECT_OPERATOR","->",111],["T_STRING","_redirect",111],"(",["T_CONSTANT_ENCAPSED_STRING","'*\/*\/'",111],")",";",["T_WHITESPACE","\n            ",111],["T_RETURN","return",112],";",["T_WHITESPACE","\n        ",112],"}",["T_WHITESPACE","\n\n        ",113],["T_VARIABLE","$this",115],["T_OBJECT_OPERATOR","->",115],["T_STRING","loadLayout",115],"(",")",["T_OBJECT_OPERATOR","->",115],["T_STRING","_setActiveMenu",115],"(",["T_CONSTANT_ENCAPSED_STRING","'system\/services\/roles'",115],")",";",["T_WHITESPACE","\n\n        ",115],["T_VARIABLE","$this",117],["T_OBJECT_OPERATOR","->",117],["T_STRING","_title",117],"(",["T_VARIABLE","$this",117],["T_OBJECT_OPERATOR","->",117],["T_STRING","__",117],"(",["T_CONSTANT_ENCAPSED_STRING","'System'",117],")",")",["T_WHITESPACE","\n             ",117],["T_OBJECT_OPERATOR","->",118],["T_STRING","_title",118],"(",["T_VARIABLE","$this",118],["T_OBJECT_OPERATOR","->",118],["T_STRING","__",118],"(",["T_CONSTANT_ENCAPSED_STRING","'Web Services'",118],")",")",["T_WHITESPACE","\n             ",118],["T_OBJECT_OPERATOR","->",119],["T_STRING","_title",119],"(",["T_VARIABLE","$this",119],["T_OBJECT_OPERATOR","->",119],["T_STRING","__",119],"(",["T_CONSTANT_ENCAPSED_STRING","'Rest Roles'",119],")",")",";",["T_WHITESPACE","\n\n        ",119],["T_VARIABLE","$breadCrumb",121],["T_WHITESPACE"," ",121],"=",["T_WHITESPACE"," ",121],["T_VARIABLE","$this",121],["T_OBJECT_OPERATOR","->",121],["T_STRING","__",121],"(",["T_CONSTANT_ENCAPSED_STRING","'Edit Role'",121],")",";",["T_WHITESPACE","\n        ",121],["T_VARIABLE","$breadCrumbTitle",122],["T_WHITESPACE"," ",122],"=",["T_WHITESPACE"," ",122],["T_VARIABLE","$this",122],["T_OBJECT_OPERATOR","->",122],["T_STRING","__",122],"(",["T_CONSTANT_ENCAPSED_STRING","'Edit Role'",122],")",";",["T_WHITESPACE","\n        ",122],["T_VARIABLE","$this",123],["T_OBJECT_OPERATOR","->",123],["T_STRING","_title",123],"(",["T_VARIABLE","$this",123],["T_OBJECT_OPERATOR","->",123],["T_STRING","__",123],"(",["T_CONSTANT_ENCAPSED_STRING","'Edit Role'",123],")",")",";",["T_WHITESPACE","\n        ",123],["T_VARIABLE","$this",124],["T_OBJECT_OPERATOR","->",124],["T_STRING","_addBreadcrumb",124],"(",["T_VARIABLE","$breadCrumb",124],",",["T_WHITESPACE"," ",124],["T_VARIABLE","$breadCrumbTitle",124],")",";",["T_WHITESPACE","\n\n        ",124],["T_DOC_COMMENT","\/** @var $tabs Mage_Api2_Block_Adminhtml_Roles_Tabs *\/",126],["T_WHITESPACE","\n        ",126],["T_VARIABLE","$tabs",127],["T_WHITESPACE"," ",127],"=",["T_WHITESPACE"," ",127],["T_VARIABLE","$this",127],["T_OBJECT_OPERATOR","->",127],["T_STRING","getLayout",127],"(",")",["T_OBJECT_OPERATOR","->",127],["T_STRING","getBlock",127],"(",["T_CONSTANT_ENCAPSED_STRING","'adminhtml.role.edit.tabs'",127],")",";",["T_WHITESPACE","\n        ",127],["T_VARIABLE","$tabs",128],["T_OBJECT_OPERATOR","->",128],["T_STRING","setRole",128],"(",["T_VARIABLE","$role",128],")",";",["T_WHITESPACE","\n        ",128],["T_DOC_COMMENT","\/** @var $child Mage_Adminhtml_Block_Template *\/",129],["T_WHITESPACE","\n        ",129],["T_FOREACH","foreach",130],["T_WHITESPACE"," ",130],"(",["T_VARIABLE","$tabs",130],["T_OBJECT_OPERATOR","->",130],["T_STRING","getChild",130],"(",")",["T_WHITESPACE"," ",130],["T_AS","as",130],["T_WHITESPACE"," ",130],["T_VARIABLE","$child",130],")",["T_WHITESPACE"," ",130],"{",["T_WHITESPACE","\n            ",130],["T_VARIABLE","$child",131],["T_OBJECT_OPERATOR","->",131],["T_STRING","setData",131],"(",["T_CONSTANT_ENCAPSED_STRING","'role'",131],",",["T_WHITESPACE"," ",131],["T_VARIABLE","$role",131],")",";",["T_WHITESPACE","\n        ",131],"}",["T_WHITESPACE","\n\n        ",132],["T_DOC_COMMENT","\/** @var $buttons Mage_Api2_Block_Adminhtml_Roles_Buttons *\/",134],["T_WHITESPACE","\n        ",134],["T_VARIABLE","$buttons",135],["T_WHITESPACE"," ",135],"=",["T_WHITESPACE"," ",135],["T_VARIABLE","$this",135],["T_OBJECT_OPERATOR","->",135],["T_STRING","getLayout",135],"(",")",["T_OBJECT_OPERATOR","->",135],["T_STRING","getBlock",135],"(",["T_CONSTANT_ENCAPSED_STRING","'adminhtml.roles.buttons'",135],")",";",["T_WHITESPACE","\n        ",135],["T_VARIABLE","$buttons",136],["T_OBJECT_OPERATOR","->",136],["T_STRING","setRole",136],"(",["T_VARIABLE","$role",136],")",";",["T_WHITESPACE","\n\n        ",136],["T_DOC_COMMENT","\/** @var $users Mage_Api2_Block_Adminhtml_Roles_Tab_Users *\/",138],["T_WHITESPACE","\n        ",138],["T_VARIABLE","$users",139],["T_WHITESPACE"," ",139],"=",["T_WHITESPACE"," ",139],["T_VARIABLE","$this",139],["T_OBJECT_OPERATOR","->",139],["T_STRING","getLayout",139],"(",")",["T_OBJECT_OPERATOR","->",139],["T_STRING","getBlock",139],"(",["T_CONSTANT_ENCAPSED_STRING","'adminhtml.role.edit.tab.users'",139],")",";",["T_WHITESPACE","\n        ",139],["T_VARIABLE","$users",140],["T_OBJECT_OPERATOR","->",140],["T_STRING","setUsers",140],"(",["T_VARIABLE","$this",140],["T_OBJECT_OPERATOR","->",140],["T_STRING","_getUsers",140],"(",["T_VARIABLE","$id",140],")",")",";",["T_WHITESPACE","\n\n        ",140],["T_COMMENT","\/\/$this->getLayout()->getBlock('adminhtml.role.edit.tab.resources')->getResTreeJson();\n",142],["T_WHITESPACE","        ",143],["T_COMMENT","\/\/exit;\n",143],["T_WHITESPACE","\n        ",144],["T_VARIABLE","$this",145],["T_OBJECT_OPERATOR","->",145],["T_STRING","renderLayout",145],"(",")",";",["T_WHITESPACE","\n    ",145],"}",["T_WHITESPACE","\n\n    ",146],["T_DOC_COMMENT","\/**\n     * Save role\n     *\/",148],["T_WHITESPACE","\n    ",150],["T_PUBLIC","public",151],["T_WHITESPACE"," ",151],["T_FUNCTION","function",151],["T_WHITESPACE"," ",151],["T_STRING","saveAction",151],"(",")",["T_WHITESPACE","\n    ",151],"{",["T_WHITESPACE","\n        ",152],["T_VARIABLE","$request",153],["T_WHITESPACE"," ",153],"=",["T_WHITESPACE"," ",153],["T_VARIABLE","$this",153],["T_OBJECT_OPERATOR","->",153],["T_STRING","getRequest",153],"(",")",";",["T_WHITESPACE","\n\n        ",153],["T_VARIABLE","$id",155],["T_WHITESPACE"," ",155],"=",["T_WHITESPACE"," ",155],["T_VARIABLE","$request",155],["T_OBJECT_OPERATOR","->",155],["T_STRING","getParam",155],"(",["T_CONSTANT_ENCAPSED_STRING","'id'",155],",",["T_WHITESPACE"," ",155],["T_STRING","false",155],")",";",["T_WHITESPACE","\n        ",155],["T_DOC_COMMENT","\/** @var $role Mage_Api2_Model_Acl_Global_Role *\/",156],["T_WHITESPACE","\n        ",156],["T_VARIABLE","$role",157],["T_WHITESPACE"," ",157],"=",["T_WHITESPACE"," ",157],["T_STRING","Mage",157],["T_DOUBLE_COLON","::",157],["T_STRING","getModel",157],"(",["T_CONSTANT_ENCAPSED_STRING","'api2\/acl_global_role'",157],")",["T_OBJECT_OPERATOR","->",157],["T_STRING","load",157],"(",["T_VARIABLE","$id",157],")",";",["T_WHITESPACE","\n\n        ",157],["T_IF","if",159],["T_WHITESPACE"," ",159],"(","!",["T_VARIABLE","$role",159],["T_OBJECT_OPERATOR","->",159],["T_STRING","getId",159],"(",")",["T_WHITESPACE"," ",159],["T_BOOLEAN_AND","&&",159],["T_WHITESPACE"," ",159],["T_VARIABLE","$id",159],")",["T_WHITESPACE"," ",159],"{",["T_WHITESPACE","\n            ",159],["T_VARIABLE","$this",160],["T_OBJECT_OPERATOR","->",160],["T_STRING","_getSession",160],"(",")",["T_OBJECT_OPERATOR","->",160],["T_STRING","addError",160],"(",["T_WHITESPACE","\n                ",160],["T_VARIABLE","$this",161],["T_OBJECT_OPERATOR","->",161],["T_STRING","__",161],"(",["T_CONSTANT_ENCAPSED_STRING","'Role \"%s\" no longer exists'",161],",",["T_WHITESPACE"," ",161],["T_VARIABLE","$role",161],["T_OBJECT_OPERATOR","->",161],["T_STRING","getData",161],"(",["T_CONSTANT_ENCAPSED_STRING","'role_name'",161],")",")",")",";",["T_WHITESPACE","\n            ",161],["T_VARIABLE","$this",162],["T_OBJECT_OPERATOR","->",162],["T_STRING","_redirect",162],"(",["T_CONSTANT_ENCAPSED_STRING","'*\/*\/'",162],")",";",["T_WHITESPACE","\n            ",162],["T_RETURN","return",163],";",["T_WHITESPACE","\n        ",163],"}",["T_WHITESPACE","\n\n        ",164],["T_COMMENT","\/\/Validate current admin password\n",166],["T_WHITESPACE","        ",167],["T_VARIABLE","$currentPassword",167],["T_WHITESPACE"," ",167],"=",["T_WHITESPACE"," ",167],["T_VARIABLE","$request",167],["T_OBJECT_OPERATOR","->",167],["T_STRING","getParam",167],"(",["T_CONSTANT_ENCAPSED_STRING","'current_password'",167],",",["T_WHITESPACE"," ",167],["T_STRING","null",167],")",";",["T_WHITESPACE","\n        ",167],["T_VARIABLE","$request",168],["T_OBJECT_OPERATOR","->",168],["T_STRING","setParam",168],"(",["T_CONSTANT_ENCAPSED_STRING","'current_password'",168],",",["T_WHITESPACE"," ",168],["T_STRING","null",168],")",";",["T_WHITESPACE","\n        ",168],["T_VARIABLE","$result",169],["T_WHITESPACE"," ",169],"=",["T_WHITESPACE"," ",169],["T_VARIABLE","$this",169],["T_OBJECT_OPERATOR","->",169],["T_STRING","_validateCurrentPassword",169],"(",["T_VARIABLE","$currentPassword",169],")",";",["T_WHITESPACE","\n\n        ",169],["T_IF","if",171],["T_WHITESPACE"," ",171],"(",["T_STRING","is_array",171],"(",["T_VARIABLE","$result",171],")",")",["T_WHITESPACE"," ",171],"{",["T_WHITESPACE","\n            ",171],["T_FOREACH","foreach",172],["T_WHITESPACE"," ",172],"(",["T_VARIABLE","$result",172],["T_WHITESPACE"," ",172],["T_AS","as",172],["T_WHITESPACE"," ",172],["T_VARIABLE","$error",172],")",["T_WHITESPACE"," ",172],"{",["T_WHITESPACE","\n                ",172],["T_VARIABLE","$this",173],["T_OBJECT_OPERATOR","->",173],["T_STRING","_getSession",173],"(",")",["T_OBJECT_OPERATOR","->",173],["T_STRING","addError",173],"(",["T_VARIABLE","$error",173],")",";",["T_WHITESPACE","\n            ",173],"}",["T_WHITESPACE","\n            ",174],["T_IF","if",175],["T_WHITESPACE"," ",175],"(",["T_VARIABLE","$id",175],")",["T_WHITESPACE"," ",175],"{",["T_WHITESPACE","\n                ",175],["T_VARIABLE","$this",176],["T_OBJECT_OPERATOR","->",176],["T_STRING","_redirect",176],"(",["T_CONSTANT_ENCAPSED_STRING","'*\/*\/edit'",176],",",["T_WHITESPACE"," ",176],["T_ARRAY","array",176],"(",["T_CONSTANT_ENCAPSED_STRING","'id'",176],["T_WHITESPACE"," ",176],["T_DOUBLE_ARROW","=>",176],["T_WHITESPACE"," ",176],["T_VARIABLE","$id",176],")",")",";",["T_WHITESPACE","\n            ",176],"}",["T_WHITESPACE"," ",177],["T_ELSE","else",177],["T_WHITESPACE"," ",177],"{",["T_WHITESPACE","\n                ",177],["T_VARIABLE","$this",178],["T_OBJECT_OPERATOR","->",178],["T_STRING","_redirect",178],"(",["T_CONSTANT_ENCAPSED_STRING","'*\/*\/new'",178],")",";",["T_WHITESPACE","\n            ",178],"}",["T_WHITESPACE","\n            ",179],["T_RETURN","return",180],";",["T_WHITESPACE","\n        ",180],"}",["T_WHITESPACE","\n\n        ",181],["T_VARIABLE","$roleUsers",183],["T_WHITESPACE","  ",183],"=",["T_WHITESPACE"," ",183],["T_VARIABLE","$request",183],["T_OBJECT_OPERATOR","->",183],["T_STRING","getParam",183],"(",["T_CONSTANT_ENCAPSED_STRING","'in_role_users'",183],",",["T_WHITESPACE"," ",183],["T_STRING","null",183],")",";",["T_WHITESPACE","\n        ",183],["T_STRING","parse_str",184],"(",["T_VARIABLE","$roleUsers",184],",",["T_WHITESPACE"," ",184],["T_VARIABLE","$roleUsers",184],")",";",["T_WHITESPACE","\n        ",184],["T_VARIABLE","$roleUsers",185],["T_WHITESPACE"," ",185],"=",["T_WHITESPACE"," ",185],["T_STRING","array_keys",185],"(",["T_VARIABLE","$roleUsers",185],")",";",["T_WHITESPACE","\n\n        ",185],["T_VARIABLE","$oldRoleUsers",187],["T_WHITESPACE"," ",187],"=",["T_WHITESPACE"," ",187],["T_VARIABLE","$this",187],["T_OBJECT_OPERATOR","->",187],["T_STRING","getRequest",187],"(",")",["T_OBJECT_OPERATOR","->",187],["T_STRING","getParam",187],"(",["T_CONSTANT_ENCAPSED_STRING","'in_role_users_old'",187],")",";",["T_WHITESPACE","\n        ",187],["T_STRING","parse_str",188],"(",["T_VARIABLE","$oldRoleUsers",188],",",["T_WHITESPACE"," ",188],["T_VARIABLE","$oldRoleUsers",188],")",";",["T_WHITESPACE","\n        ",188],["T_VARIABLE","$oldRoleUsers",189],["T_WHITESPACE"," ",189],"=",["T_WHITESPACE"," ",189],["T_STRING","array_keys",189],"(",["T_VARIABLE","$oldRoleUsers",189],")",";",["T_WHITESPACE","\n\n        ",189],["T_DOC_COMMENT","\/** @var $session Mage_Adminhtml_Model_Session *\/",191],["T_WHITESPACE","\n        ",191],["T_VARIABLE","$session",192],["T_WHITESPACE"," ",192],"=",["T_WHITESPACE"," ",192],["T_VARIABLE","$this",192],["T_OBJECT_OPERATOR","->",192],["T_STRING","_getSession",192],"(",")",";",["T_WHITESPACE","\n\n        ",192],["T_TRY","try",194],["T_WHITESPACE"," ",194],"{",["T_WHITESPACE","\n            ",194],["T_VARIABLE","$role",195],["T_OBJECT_OPERATOR","->",195],["T_STRING","setRoleName",195],"(",["T_VARIABLE","$this",195],["T_OBJECT_OPERATOR","->",195],["T_STRING","getRequest",195],"(",")",["T_OBJECT_OPERATOR","->",195],["T_STRING","getParam",195],"(",["T_CONSTANT_ENCAPSED_STRING","'role_name'",195],",",["T_WHITESPACE"," ",195],["T_STRING","false",195],")",")",["T_WHITESPACE","\n                    ",195],["T_OBJECT_OPERATOR","->",196],["T_STRING","save",196],"(",")",";",["T_WHITESPACE","\n\n            ",196],["T_FOREACH","foreach",198],"(",["T_VARIABLE","$oldRoleUsers",198],["T_WHITESPACE"," ",198],["T_AS","as",198],["T_WHITESPACE"," ",198],["T_VARIABLE","$oUid",198],")",["T_WHITESPACE"," ",198],"{",["T_WHITESPACE","\n                ",198],["T_VARIABLE","$this",199],["T_OBJECT_OPERATOR","->",199],["T_STRING","_deleteUserFromRole",199],"(",["T_VARIABLE","$oUid",199],",",["T_WHITESPACE"," ",199],["T_VARIABLE","$role",199],["T_OBJECT_OPERATOR","->",199],["T_STRING","getId",199],"(",")",")",";",["T_WHITESPACE","\n            ",199],"}",["T_WHITESPACE","\n\n            ",200],["T_FOREACH","foreach",202],["T_WHITESPACE"," ",202],"(",["T_VARIABLE","$roleUsers",202],["T_WHITESPACE"," ",202],["T_AS","as",202],["T_WHITESPACE"," ",202],["T_VARIABLE","$nRuid",202],")",["T_WHITESPACE"," ",202],"{",["T_WHITESPACE","\n                ",202],["T_VARIABLE","$this",203],["T_OBJECT_OPERATOR","->",203],["T_STRING","_addUserToRole",203],"(",["T_VARIABLE","$nRuid",203],",",["T_WHITESPACE"," ",203],["T_VARIABLE","$role",203],["T_OBJECT_OPERATOR","->",203],["T_STRING","getId",203],"(",")",")",";",["T_WHITESPACE","\n            ",203],"}",["T_WHITESPACE","\n\n            ",204],["T_DOC_COMMENT","\/**\n             * Save rules with resources\n             *\/",206],["T_WHITESPACE","\n            ",208],["T_DOC_COMMENT","\/** @var $rule Mage_Api2_Model_Acl_Global_Rule *\/",209],["T_WHITESPACE","\n            ",209],["T_VARIABLE","$rule",210],["T_WHITESPACE"," ",210],"=",["T_WHITESPACE"," ",210],["T_STRING","Mage",210],["T_DOUBLE_COLON","::",210],["T_STRING","getModel",210],"(",["T_CONSTANT_ENCAPSED_STRING","'api2\/acl_global_rule'",210],")",";",["T_WHITESPACE","\n            ",210],["T_IF","if",211],["T_WHITESPACE"," ",211],"(",["T_VARIABLE","$id",211],")",["T_WHITESPACE"," ",211],"{",["T_WHITESPACE","\n                ",211],["T_VARIABLE","$collection",212],["T_WHITESPACE"," ",212],"=",["T_WHITESPACE"," ",212],["T_VARIABLE","$rule",212],["T_OBJECT_OPERATOR","->",212],["T_STRING","getCollection",212],"(",")",";",["T_WHITESPACE","\n                ",212],["T_VARIABLE","$collection",213],["T_OBJECT_OPERATOR","->",213],["T_STRING","addFilterByRoleId",213],"(",["T_VARIABLE","$role",213],["T_OBJECT_OPERATOR","->",213],["T_STRING","getId",213],"(",")",")",";",["T_WHITESPACE","\n\n                ",213],["T_DOC_COMMENT","\/** @var $model Mage_Api2_Model_Acl_Global_Rule *\/",215],["T_WHITESPACE","\n                ",215],["T_FOREACH","foreach",216],["T_WHITESPACE"," ",216],"(",["T_VARIABLE","$collection",216],["T_WHITESPACE"," ",216],["T_AS","as",216],["T_WHITESPACE"," ",216],["T_VARIABLE","$model",216],")",["T_WHITESPACE"," ",216],"{",["T_WHITESPACE","\n                    ",216],["T_VARIABLE","$model",217],["T_OBJECT_OPERATOR","->",217],["T_STRING","delete",217],"(",")",";",["T_WHITESPACE","\n                ",217],"}",["T_WHITESPACE","\n            ",218],"}",["T_WHITESPACE","\n\n            ",219],["T_DOC_COMMENT","\/** @var $ruleTree Mage_Api2_Model_Acl_Global_Rule_Tree *\/",221],["T_WHITESPACE","\n            ",221],["T_VARIABLE","$ruleTree",222],["T_WHITESPACE"," ",222],"=",["T_WHITESPACE"," ",222],["T_STRING","Mage",222],["T_DOUBLE_COLON","::",222],["T_STRING","getSingleton",222],"(",["T_WHITESPACE","\n                ",222],["T_CONSTANT_ENCAPSED_STRING","'api2\/acl_global_rule_tree'",223],",",["T_WHITESPACE","\n                ",223],["T_ARRAY","array",224],"(",["T_CONSTANT_ENCAPSED_STRING","'type'",224],["T_WHITESPACE"," ",224],["T_DOUBLE_ARROW","=>",224],["T_WHITESPACE"," ",224],["T_STRING","Mage_Api2_Model_Acl_Global_Rule_Tree",224],["T_DOUBLE_COLON","::",224],["T_STRING","TYPE_PRIVILEGE",224],")",["T_WHITESPACE","\n            ",224],")",";",["T_WHITESPACE","\n            ",225],["T_VARIABLE","$resources",226],["T_WHITESPACE"," ",226],"=",["T_WHITESPACE"," ",226],["T_VARIABLE","$ruleTree",226],["T_OBJECT_OPERATOR","->",226],["T_STRING","getPostResources",226],"(",")",";",["T_WHITESPACE","\n            ",226],["T_VARIABLE","$id",227],["T_WHITESPACE"," ",227],"=",["T_WHITESPACE"," ",227],["T_VARIABLE","$role",227],["T_OBJECT_OPERATOR","->",227],["T_STRING","getId",227],"(",")",";",["T_WHITESPACE","\n            ",227],["T_FOREACH","foreach",228],["T_WHITESPACE"," ",228],"(",["T_VARIABLE","$resources",228],["T_WHITESPACE"," ",228],["T_AS","as",228],["T_WHITESPACE"," ",228],["T_VARIABLE","$resourceId",228],["T_WHITESPACE"," ",228],["T_DOUBLE_ARROW","=>",228],["T_WHITESPACE"," ",228],["T_VARIABLE","$privileges",228],")",["T_WHITESPACE"," ",228],"{",["T_WHITESPACE","\n                ",228],["T_FOREACH","foreach",229],["T_WHITESPACE"," ",229],"(",["T_VARIABLE","$privileges",229],["T_WHITESPACE"," ",229],["T_AS","as",229],["T_WHITESPACE"," ",229],["T_VARIABLE","$privilege",229],["T_WHITESPACE"," ",229],["T_DOUBLE_ARROW","=>",229],["T_WHITESPACE"," ",229],["T_VARIABLE","$allow",229],")",["T_WHITESPACE"," ",229],"{",["T_WHITESPACE","\n                    ",229],["T_IF","if",230],["T_WHITESPACE"," ",230],"(","!",["T_VARIABLE","$allow",230],")",["T_WHITESPACE"," ",230],"{",["T_WHITESPACE","\n                        ",230],["T_CONTINUE","continue",231],";",["T_WHITESPACE","\n                    ",231],"}",["T_WHITESPACE","\n\n                    ",232],["T_VARIABLE","$rule",234],["T_OBJECT_OPERATOR","->",234],["T_STRING","setId",234],"(",["T_STRING","null",234],")",["T_WHITESPACE","\n                            ",234],["T_OBJECT_OPERATOR","->",235],["T_STRING","isObjectNew",235],"(",["T_STRING","true",235],")",";",["T_WHITESPACE","\n\n                    ",235],["T_VARIABLE","$rule",237],["T_OBJECT_OPERATOR","->",237],["T_STRING","setRoleId",237],"(",["T_VARIABLE","$id",237],")",["T_WHITESPACE","\n                            ",237],["T_OBJECT_OPERATOR","->",238],["T_STRING","setResourceId",238],"(",["T_VARIABLE","$resourceId",238],")",["T_WHITESPACE","\n                            ",238],["T_OBJECT_OPERATOR","->",239],["T_STRING","setPrivilege",239],"(",["T_VARIABLE","$privilege",239],")",["T_WHITESPACE","\n                            ",239],["T_OBJECT_OPERATOR","->",240],["T_STRING","save",240],"(",")",";",["T_WHITESPACE","\n                ",240],"}",["T_WHITESPACE","\n            ",241],"}",["T_WHITESPACE","\n\n            ",242],["T_VARIABLE","$session",244],["T_OBJECT_OPERATOR","->",244],["T_STRING","addSuccess",244],"(",["T_VARIABLE","$this",244],["T_OBJECT_OPERATOR","->",244],["T_STRING","__",244],"(",["T_CONSTANT_ENCAPSED_STRING","'The role has been saved.'",244],")",")",";",["T_WHITESPACE","\n        ",244],"}",["T_WHITESPACE"," ",245],["T_CATCH","catch",245],["T_WHITESPACE"," ",245],"(",["T_STRING","Mage_Core_Exception",245],["T_WHITESPACE"," ",245],["T_VARIABLE","$e",245],")",["T_WHITESPACE"," ",245],"{",["T_WHITESPACE","\n            ",245],["T_VARIABLE","$session",246],["T_OBJECT_OPERATOR","->",246],["T_STRING","addError",246],"(",["T_VARIABLE","$e",246],["T_OBJECT_OPERATOR","->",246],["T_STRING","getMessage",246],"(",")",")",";",["T_WHITESPACE","\n        ",246],"}",["T_WHITESPACE"," ",247],["T_CATCH","catch",247],["T_WHITESPACE"," ",247],"(",["T_STRING","Exception",247],["T_WHITESPACE"," ",247],["T_VARIABLE","$e",247],")",["T_WHITESPACE"," ",247],"{",["T_WHITESPACE","\n            ",247],["T_VARIABLE","$session",248],["T_OBJECT_OPERATOR","->",248],["T_STRING","addException",248],"(",["T_VARIABLE","$e",248],",",["T_WHITESPACE"," ",248],["T_VARIABLE","$this",248],["T_OBJECT_OPERATOR","->",248],["T_STRING","__",248],"(",["T_CONSTANT_ENCAPSED_STRING","'An error occurred while saving role.'",248],")",")",";",["T_WHITESPACE","\n        ",248],"}",["T_WHITESPACE","\n\n        ",249],["T_VARIABLE","$this",251],["T_OBJECT_OPERATOR","->",251],["T_STRING","_redirect",251],"(",["T_CONSTANT_ENCAPSED_STRING","'*\/*\/edit'",251],",",["T_WHITESPACE"," ",251],["T_ARRAY","array",251],"(",["T_CONSTANT_ENCAPSED_STRING","'id'",251],["T_DOUBLE_ARROW","=>",251],["T_VARIABLE","$id",251],")",")",";",["T_WHITESPACE","\n    ",251],"}",["T_WHITESPACE","\n\n    ",252],["T_DOC_COMMENT","\/**\n     * Delete role\n     *\/",254],["T_WHITESPACE","\n    ",256],["T_PUBLIC","public",257],["T_WHITESPACE"," ",257],["T_FUNCTION","function",257],["T_WHITESPACE"," ",257],["T_STRING","deleteAction",257],"(",")",["T_WHITESPACE","\n    ",257],"{",["T_WHITESPACE","\n        ",258],["T_VARIABLE","$id",259],["T_WHITESPACE"," ",259],"=",["T_WHITESPACE"," ",259],["T_VARIABLE","$this",259],["T_OBJECT_OPERATOR","->",259],["T_STRING","getRequest",259],"(",")",["T_OBJECT_OPERATOR","->",259],["T_STRING","getParam",259],"(",["T_CONSTANT_ENCAPSED_STRING","'id'",259],",",["T_WHITESPACE"," ",259],["T_STRING","false",259],")",";",["T_WHITESPACE","\n\n        ",259],["T_TRY","try",261],["T_WHITESPACE"," ",261],"{",["T_WHITESPACE","\n            ",261],["T_DOC_COMMENT","\/** @var $model Mage_Api2_Model_Acl_Global_Role *\/",262],["T_WHITESPACE","\n            ",262],["T_VARIABLE","$model",263],["T_WHITESPACE"," ",263],"=",["T_WHITESPACE"," ",263],["T_STRING","Mage",263],["T_DOUBLE_COLON","::",263],["T_STRING","getModel",263],"(",["T_CONSTANT_ENCAPSED_STRING","\"api2\/acl_global_role\"",263],")",";",["T_WHITESPACE","\n            ",263],["T_VARIABLE","$model",264],["T_OBJECT_OPERATOR","->",264],["T_STRING","load",264],"(",["T_VARIABLE","$id",264],")",["T_OBJECT_OPERATOR","->",264],["T_STRING","delete",264],"(",")",";",["T_WHITESPACE","\n            ",264],["T_VARIABLE","$this",265],["T_OBJECT_OPERATOR","->",265],["T_STRING","_getSession",265],"(",")",["T_OBJECT_OPERATOR","->",265],["T_STRING","addSuccess",265],"(",["T_VARIABLE","$this",265],["T_OBJECT_OPERATOR","->",265],["T_STRING","__",265],"(",["T_CONSTANT_ENCAPSED_STRING","'Role has been deleted.'",265],")",")",";",["T_WHITESPACE","\n        ",265],"}",["T_WHITESPACE"," ",266],["T_CATCH","catch",266],["T_WHITESPACE"," ",266],"(",["T_STRING","Mage_Core_Exception",266],["T_WHITESPACE"," ",266],["T_VARIABLE","$e",266],")",["T_WHITESPACE"," ",266],"{",["T_WHITESPACE","\n            ",266],["T_VARIABLE","$this",267],["T_OBJECT_OPERATOR","->",267],["T_STRING","_getSession",267],"(",")",["T_OBJECT_OPERATOR","->",267],["T_STRING","addError",267],"(",["T_VARIABLE","$e",267],["T_OBJECT_OPERATOR","->",267],["T_STRING","getMessage",267],"(",")",")",";",["T_WHITESPACE","\n        ",267],"}",["T_WHITESPACE"," ",268],["T_CATCH","catch",268],["T_WHITESPACE"," ",268],"(",["T_STRING","Exception",268],["T_WHITESPACE"," ",268],["T_VARIABLE","$e",268],")",["T_WHITESPACE"," ",268],"{",["T_WHITESPACE","\n            ",268],["T_VARIABLE","$this",269],["T_OBJECT_OPERATOR","->",269],["T_STRING","_getSession",269],"(",")",["T_OBJECT_OPERATOR","->",269],["T_STRING","addException",269],"(",["T_VARIABLE","$e",269],",",["T_WHITESPACE"," ",269],["T_VARIABLE","$this",269],["T_OBJECT_OPERATOR","->",269],["T_STRING","__",269],"(",["T_CONSTANT_ENCAPSED_STRING","'An error occurred while deleting the role.'",269],")",")",";",["T_WHITESPACE","\n        ",269],"}",["T_WHITESPACE","\n\n        ",270],["T_VARIABLE","$this",272],["T_OBJECT_OPERATOR","->",272],["T_STRING","_redirect",272],"(",["T_CONSTANT_ENCAPSED_STRING","\"*\/*\/\"",272],")",";",["T_WHITESPACE","\n    ",272],"}",["T_WHITESPACE","\n\n    ",273],["T_DOC_COMMENT","\/**\n     * Check against ACL\n     *\n     * @return bool\n     *\/",275],["T_WHITESPACE","\n    ",279],["T_PROTECTED","protected",280],["T_WHITESPACE"," ",280],["T_FUNCTION","function",280],["T_WHITESPACE"," ",280],["T_STRING","_isAllowed",280],"(",")",["T_WHITESPACE","\n    ",280],"{",["T_WHITESPACE","\n        ",281],["T_DOC_COMMENT","\/** @var $session Mage_Admin_Model_Session *\/",282],["T_WHITESPACE","\n        ",282],["T_VARIABLE","$session",283],["T_WHITESPACE"," ",283],"=",["T_WHITESPACE"," ",283],["T_STRING","Mage",283],["T_DOUBLE_COLON","::",283],["T_STRING","getSingleton",283],"(",["T_CONSTANT_ENCAPSED_STRING","'admin\/session'",283],")",";",["T_WHITESPACE","\n        ",283],["T_RETURN","return",284],["T_WHITESPACE"," ",284],["T_VARIABLE","$session",284],["T_OBJECT_OPERATOR","->",284],["T_STRING","isAllowed",284],"(",["T_CONSTANT_ENCAPSED_STRING","'system\/api\/roles_rest'",284],")",";",["T_WHITESPACE","\n    ",284],"}",["T_WHITESPACE","\n\n    ",285],["T_DOC_COMMENT","\/**\n     * Get API2 roles ajax grid action\n     *\/",287],["T_WHITESPACE","\n    ",289],["T_PUBLIC","public",290],["T_WHITESPACE"," ",290],["T_FUNCTION","function",290],["T_WHITESPACE"," ",290],["T_STRING","rolesGridAction",290],"(",")",["T_WHITESPACE","\n    ",290],"{",["T_WHITESPACE","\n        ",291],["T_DOC_COMMENT","\/** @var $model Mage_Admin_Model_User *\/",292],["T_WHITESPACE","\n        ",292],["T_VARIABLE","$model",293],["T_WHITESPACE"," ",293],"=",["T_WHITESPACE"," ",293],["T_STRING","Mage",293],["T_DOUBLE_COLON","::",293],["T_STRING","getModel",293],"(",["T_CONSTANT_ENCAPSED_STRING","'admin\/user'",293],")",";",["T_WHITESPACE","\n        ",293],["T_VARIABLE","$model",294],["T_OBJECT_OPERATOR","->",294],["T_STRING","load",294],"(",["T_VARIABLE","$this",294],["T_OBJECT_OPERATOR","->",294],["T_STRING","getRequest",294],"(",")",["T_OBJECT_OPERATOR","->",294],["T_STRING","getParam",294],"(",["T_CONSTANT_ENCAPSED_STRING","'user_id'",294],")",")",";",["T_WHITESPACE","\n\n        ",294],["T_STRING","Mage",296],["T_DOUBLE_COLON","::",296],["T_STRING","register",296],"(",["T_CONSTANT_ENCAPSED_STRING","'permissions_user'",296],",",["T_WHITESPACE"," ",296],["T_VARIABLE","$model",296],")",";",["T_WHITESPACE","\n        ",296],["T_VARIABLE","$this",297],["T_OBJECT_OPERATOR","->",297],["T_STRING","getResponse",297],"(",")",["T_WHITESPACE","\n            ",297],["T_OBJECT_OPERATOR","->",298],["T_STRING","setBody",298],"(",["T_VARIABLE","$this",298],["T_OBJECT_OPERATOR","->",298],["T_STRING","getLayout",298],"(",")",["T_OBJECT_OPERATOR","->",298],["T_STRING","createBlock",298],"(",["T_CONSTANT_ENCAPSED_STRING","'api2\/adminhtml_permissions_user_edit_tab_roles'",298],")",["T_OBJECT_OPERATOR","->",298],["T_STRING","toHtml",298],"(",")",")",";",["T_WHITESPACE","\n    ",298],"}",["T_WHITESPACE","\n\n    ",299],["T_DOC_COMMENT","\/**\n     * Get users possessing the role\n     *\n     * @param int $id\n     * @return array|mixed\n     *\/",301],["T_WHITESPACE","\n    ",306],["T_PROTECTED","protected",307],["T_WHITESPACE"," ",307],["T_FUNCTION","function",307],["T_WHITESPACE"," ",307],["T_STRING","_getUsers",307],"(",["T_VARIABLE","$id",307],")",["T_WHITESPACE","\n    ",307],"{",["T_WHITESPACE","\n        ",308],["T_IF","if",309],["T_WHITESPACE"," ",309],"(",["T_WHITESPACE"," ",309],["T_VARIABLE","$this",309],["T_OBJECT_OPERATOR","->",309],["T_STRING","getRequest",309],"(",")",["T_OBJECT_OPERATOR","->",309],["T_STRING","getParam",309],"(",["T_CONSTANT_ENCAPSED_STRING","'in_role_users'",309],")",["T_WHITESPACE"," ",309],["T_IS_NOT_EQUAL","!=",309],["T_WHITESPACE"," ",309],["T_CONSTANT_ENCAPSED_STRING","\"\"",309],["T_WHITESPACE"," ",309],")",["T_WHITESPACE"," ",309],"{",["T_WHITESPACE","\n            ",309],["T_RETURN","return",310],["T_WHITESPACE"," ",310],["T_VARIABLE","$this",310],["T_OBJECT_OPERATOR","->",310],["T_STRING","getRequest",310],"(",")",["T_OBJECT_OPERATOR","->",310],["T_STRING","getParam",310],"(",["T_CONSTANT_ENCAPSED_STRING","'in_role_users'",310],")",";",["T_WHITESPACE","\n        ",310],"}",["T_WHITESPACE","\n\n        ",311],["T_DOC_COMMENT","\/** @var $role Mage_Api2_Model_Acl_Global_Role *\/",313],["T_WHITESPACE","\n        ",313],["T_VARIABLE","$role",314],["T_WHITESPACE"," ",314],"=",["T_WHITESPACE"," ",314],["T_STRING","Mage",314],["T_DOUBLE_COLON","::",314],["T_STRING","getModel",314],"(",["T_CONSTANT_ENCAPSED_STRING","'api2\/acl_global_role'",314],")",";",["T_WHITESPACE","\n        ",314],["T_VARIABLE","$role",315],["T_OBJECT_OPERATOR","->",315],["T_STRING","setId",315],"(",["T_VARIABLE","$id",315],")",";",["T_WHITESPACE","\n\n        ",315],["T_DOC_COMMENT","\/** @var $resource Mage_Api2_Model_Resource_Acl_Global_Role  *\/",317],["T_WHITESPACE","\n        ",317],["T_VARIABLE","$resource",318],["T_WHITESPACE"," ",318],"=",["T_WHITESPACE"," ",318],["T_VARIABLE","$role",318],["T_OBJECT_OPERATOR","->",318],["T_STRING","getResource",318],"(",")",";",["T_WHITESPACE","\n        ",318],["T_VARIABLE","$users",319],["T_WHITESPACE"," ",319],"=",["T_WHITESPACE"," ",319],["T_VARIABLE","$resource",319],["T_OBJECT_OPERATOR","->",319],["T_STRING","getRoleUsers",319],"(",["T_VARIABLE","$role",319],")",";",["T_WHITESPACE","\n\n        ",319],["T_IF","if",321],["T_WHITESPACE"," ",321],"(",["T_STRING","sizeof",321],"(",["T_VARIABLE","$users",321],")",["T_WHITESPACE"," ",321],["T_IS_EQUAL","==",321],["T_WHITESPACE"," ",321],["T_LNUMBER","0",321],")",["T_WHITESPACE"," ",321],"{",["T_WHITESPACE","\n            ",321],["T_VARIABLE","$users",322],["T_WHITESPACE"," ",322],"=",["T_WHITESPACE"," ",322],["T_ARRAY","array",322],"(",")",";",["T_WHITESPACE","\n        ",322],"}",["T_WHITESPACE","\n\n        ",323],["T_RETURN","return",325],["T_WHITESPACE"," ",325],["T_VARIABLE","$users",325],";",["T_WHITESPACE","\n    ",325],"}",["T_WHITESPACE","\n\n    ",326],["T_DOC_COMMENT","\/**\n     * Take away user role\n     *\n     * @param int $adminId\n     * @param int $roleId\n     * @return Mage_Api2_Adminhtml_Api2_RoleController\n     *\/",328],["T_WHITESPACE","\n    ",334],["T_PROTECTED","protected",335],["T_WHITESPACE"," ",335],["T_FUNCTION","function",335],["T_WHITESPACE"," ",335],["T_STRING","_deleteUserFromRole",335],"(",["T_VARIABLE","$adminId",335],",",["T_WHITESPACE"," ",335],["T_VARIABLE","$roleId",335],")",["T_WHITESPACE","\n    ",335],"{",["T_WHITESPACE","\n        ",336],["T_DOC_COMMENT","\/** @var $resourceModel Mage_Api2_Model_Resource_Acl_Global_Role *\/",337],["T_WHITESPACE","\n        ",337],["T_VARIABLE","$resourceModel",338],["T_WHITESPACE"," ",338],"=",["T_WHITESPACE"," ",338],["T_STRING","Mage",338],["T_DOUBLE_COLON","::",338],["T_STRING","getResourceModel",338],"(",["T_CONSTANT_ENCAPSED_STRING","'api2\/acl_global_role'",338],")",";",["T_WHITESPACE","\n        ",338],["T_VARIABLE","$resourceModel",339],["T_OBJECT_OPERATOR","->",339],["T_STRING","deleteAdminToRoleRelation",339],"(",["T_VARIABLE","$adminId",339],",",["T_WHITESPACE"," ",339],["T_VARIABLE","$roleId",339],")",";",["T_WHITESPACE","\n        ",339],["T_RETURN","return",340],["T_WHITESPACE"," ",340],["T_VARIABLE","$this",340],";",["T_WHITESPACE","\n    ",340],"}",["T_WHITESPACE","\n\n    ",341],["T_DOC_COMMENT","\/**\n     * Give user a role\n     *\n     * @param int $adminId\n     * @param int $roleId\n     * @return Mage_Api2_Adminhtml_Api2_RoleController\n     *\/",343],["T_WHITESPACE","\n    ",349],["T_PROTECTED","protected",350],["T_WHITESPACE"," ",350],["T_FUNCTION","function",350],["T_WHITESPACE"," ",350],["T_STRING","_addUserToRole",350],"(",["T_VARIABLE","$adminId",350],",",["T_WHITESPACE"," ",350],["T_VARIABLE","$roleId",350],")",["T_WHITESPACE","\n    ",350],"{",["T_WHITESPACE","\n        ",351],["T_DOC_COMMENT","\/** @var $resourceModel Mage_Api2_Model_Resource_Acl_Global_Role *\/",352],["T_WHITESPACE","\n        ",352],["T_VARIABLE","$resourceModel",353],["T_WHITESPACE"," ",353],"=",["T_WHITESPACE"," ",353],["T_STRING","Mage",353],["T_DOUBLE_COLON","::",353],["T_STRING","getResourceModel",353],"(",["T_CONSTANT_ENCAPSED_STRING","'api2\/acl_global_role'",353],")",";",["T_WHITESPACE","\n        ",353],["T_VARIABLE","$resourceModel",354],["T_OBJECT_OPERATOR","->",354],["T_STRING","saveAdminToRoleRelation",354],"(",["T_VARIABLE","$adminId",354],",",["T_WHITESPACE"," ",354],["T_VARIABLE","$roleId",354],")",";",["T_WHITESPACE","\n        ",354],["T_RETURN","return",355],["T_WHITESPACE"," ",355],["T_VARIABLE","$this",355],";",["T_WHITESPACE","\n    ",355],"}",["T_WHITESPACE","\n",356],"}",["T_WHITESPACE","\n",357]]
[["T_OPEN_TAG","<?php\n",1],["T_DOC_COMMENT","\/**\n * Magento\n *\n * NOTICE OF LICENSE\n *\n * This source file is subject to the Open Software License (OSL 3.0)\n * that is bundled with this package in the file LICENSE.txt.\n * It is also available through the world-wide-web at this URL:\n * http:\/\/opensource.org\/licenses\/osl-3.0.php\n * If you did not receive a copy of the license and are unable to\n * obtain it through the world-wide-web, please send an email\n * to license@magento.com so we can send you a copy immediately.\n *\n * DISCLAIMER\n *\n * Do not edit or add to this file if you wish to upgrade Magento to newer\n * versions in the future. If you wish to customize Magento for your\n * needs please refer to http:\/\/www.magento.com for more information.\n *\n * @category    Mage\n * @package     Mage_Page\n * @copyright  Copyright (c) 2006-2016 X.commerce, Inc. and affiliates (http:\/\/www.magento.com)\n * @license    http:\/\/opensource.org\/licenses\/osl-3.0.php  Open Software License (OSL 3.0)\n *\/",2],["T_WHITESPACE","\n\n",25],["T_DOC_COMMENT","\/**\n * Store and language switcher block\n *\n * @category   Mage\n * @package    Mage_Core\n * @author      Magento Core Team <core@magentocommerce.com>\n *\/",27],["T_WHITESPACE","\n",33],["T_CLASS","class",34],["T_WHITESPACE"," ",34],["T_STRING","Mage_Page_Block_Switch",34],["T_WHITESPACE"," ",34],["T_EXTENDS","extends",34],["T_WHITESPACE"," ",34],["T_STRING","Mage_Core_Block_Template",34],["T_WHITESPACE","\n",34],"{",["T_WHITESPACE","\n    ",35],["T_PROTECTED","protected",36],["T_WHITESPACE"," ",36],["T_VARIABLE","$_storeInUrl",36],";",["T_WHITESPACE","\n\n    ",36],["T_PUBLIC","public",38],["T_WHITESPACE"," ",38],["T_FUNCTION","function",38],["T_WHITESPACE"," ",38],["T_STRING","getCurrentWebsiteId",38],"(",")",["T_WHITESPACE","\n    ",38],"{",["T_WHITESPACE","\n        ",39],["T_RETURN","return",40],["T_WHITESPACE"," ",40],["T_STRING","Mage",40],["T_DOUBLE_COLON","::",40],["T_STRING","app",40],"(",")",["T_OBJECT_OPERATOR","->",40],["T_STRING","getStore",40],"(",")",["T_OBJECT_OPERATOR","->",40],["T_STRING","getWebsiteId",40],"(",")",";",["T_WHITESPACE","\n    ",40],"}",["T_WHITESPACE","\n\n    ",41],["T_PUBLIC","public",43],["T_WHITESPACE"," ",43],["T_FUNCTION","function",43],["T_WHITESPACE"," ",43],["T_STRING","getCurrentGroupId",43],"(",")",["T_WHITESPACE","\n    ",43],"{",["T_WHITESPACE","\n        ",44],["T_RETURN","return",45],["T_WHITESPACE"," ",45],["T_STRING","Mage",45],["T_DOUBLE_COLON","::",45],["T_STRING","app",45],"(",")",["T_OBJECT_OPERATOR","->",45],["T_STRING","getStore",45],"(",")",["T_OBJECT_OPERATOR","->",45],["T_STRING","getGroupId",45],"(",")",";",["T_WHITESPACE","\n    ",45],"}",["T_WHITESPACE","\n\n    ",46],["T_PUBLIC","public",48],["T_WHITESPACE"," ",48],["T_FUNCTION","function",48],["T_WHITESPACE"," ",48],["T_STRING","getCurrentStoreId",48],"(",")",["T_WHITESPACE","\n    ",48],"{",["T_WHITESPACE","\n        ",49],["T_RETURN","return",50],["T_WHITESPACE"," ",50],["T_STRING","Mage",50],["T_DOUBLE_COLON","::",50],["T_STRING","app",50],"(",")",["T_OBJECT_OPERATOR","->",50],["T_STRING","getStore",50],"(",")",["T_OBJECT_OPERATOR","->",50],["T_STRING","getId",50],"(",")",";",["T_WHITESPACE","\n    ",50],"}",["T_WHITESPACE","\n\n    ",51],["T_PUBLIC","public",53],["T_WHITESPACE"," ",53],["T_FUNCTION","function",53],["T_WHITESPACE"," ",53],["T_STRING","getRawGroups",53],"(",")",["T_WHITESPACE","\n    ",53],"{",["T_WHITESPACE","\n        ",54],["T_IF","if",55],["T_WHITESPACE"," ",55],"(","!",["T_VARIABLE","$this",55],["T_OBJECT_OPERATOR","->",55],["T_STRING","hasData",55],"(",["T_CONSTANT_ENCAPSED_STRING","'raw_groups'",55],")",")",["T_WHITESPACE"," ",55],"{",["T_WHITESPACE","\n            ",55],["T_VARIABLE","$websiteGroups",56],["T_WHITESPACE"," ",56],"=",["T_WHITESPACE"," ",56],["T_STRING","Mage",56],["T_DOUBLE_COLON","::",56],["T_STRING","app",56],"(",")",["T_OBJECT_OPERATOR","->",56],["T_STRING","getWebsite",56],"(",")",["T_OBJECT_OPERATOR","->",56],["T_STRING","getGroups",56],"(",")",";",["T_WHITESPACE","\n\n            ",56],["T_VARIABLE","$groups",58],["T_WHITESPACE"," ",58],"=",["T_WHITESPACE"," ",58],["T_ARRAY","array",58],"(",")",";",["T_WHITESPACE","\n            ",58],["T_FOREACH","foreach",59],["T_WHITESPACE"," ",59],"(",["T_VARIABLE","$websiteGroups",59],["T_WHITESPACE"," ",59],["T_AS","as",59],["T_WHITESPACE"," ",59],["T_VARIABLE","$group",59],")",["T_WHITESPACE"," ",59],"{",["T_WHITESPACE","\n                ",59],["T_VARIABLE","$groups",60],"[",["T_VARIABLE","$group",60],["T_OBJECT_OPERATOR","->",60],["T_STRING","getId",60],"(",")","]",["T_WHITESPACE"," ",60],"=",["T_WHITESPACE"," ",60],["T_VARIABLE","$group",60],";",["T_WHITESPACE","\n            ",60],"}",["T_WHITESPACE","\n            ",61],["T_VARIABLE","$this",62],["T_OBJECT_OPERATOR","->",62],["T_STRING","setData",62],"(",["T_CONSTANT_ENCAPSED_STRING","'raw_groups'",62],",",["T_WHITESPACE"," ",62],["T_VARIABLE","$groups",62],")",";",["T_WHITESPACE","\n        ",62],"}",["T_WHITESPACE","\n        ",63],["T_RETURN","return",64],["T_WHITESPACE"," ",64],["T_VARIABLE","$this",64],["T_OBJECT_OPERATOR","->",64],["T_STRING","getData",64],"(",["T_CONSTANT_ENCAPSED_STRING","'raw_groups'",64],")",";",["T_WHITESPACE","\n    ",64],"}",["T_WHITESPACE","\n\n    ",65],["T_PUBLIC","public",67],["T_WHITESPACE"," ",67],["T_FUNCTION","function",67],["T_WHITESPACE"," ",67],["T_STRING","getRawStores",67],"(",")",["T_WHITESPACE","\n    ",67],"{",["T_WHITESPACE","\n        ",68],["T_IF","if",69],["T_WHITESPACE"," ",69],"(","!",["T_VARIABLE","$this",69],["T_OBJECT_OPERATOR","->",69],["T_STRING","hasData",69],"(",["T_CONSTANT_ENCAPSED_STRING","'raw_stores'",69],")",")",["T_WHITESPACE"," ",69],"{",["T_WHITESPACE","\n            ",69],["T_VARIABLE","$websiteStores",70],["T_WHITESPACE"," ",70],"=",["T_WHITESPACE"," ",70],["T_STRING","Mage",70],["T_DOUBLE_COLON","::",70],["T_STRING","app",70],"(",")",["T_OBJECT_OPERATOR","->",70],["T_STRING","getWebsite",70],"(",")",["T_OBJECT_OPERATOR","->",70],["T_STRING","getStores",70],"(",")",";",["T_WHITESPACE","\n            ",70],["T_VARIABLE","$stores",71],["T_WHITESPACE"," ",71],"=",["T_WHITESPACE"," ",71],["T_ARRAY","array",71],"(",")",";",["T_WHITESPACE","\n            ",71],["T_FOREACH","foreach",72],["T_WHITESPACE"," ",72],"(",["T_VARIABLE","$websiteStores",72],["T_WHITESPACE"," ",72],["T_AS","as",72],["T_WHITESPACE"," ",72],["T_VARIABLE","$store",72],")",["T_WHITESPACE"," ",72],"{",["T_WHITESPACE","\n                ",72],["T_COMMENT","\/* @var $store Mage_Core_Model_Store *\/",73],["T_WHITESPACE","\n                ",73],["T_IF","if",74],["T_WHITESPACE"," ",74],"(","!",["T_VARIABLE","$store",74],["T_OBJECT_OPERATOR","->",74],["T_STRING","getIsActive",74],"(",")",")",["T_WHITESPACE"," ",74],"{",["T_WHITESPACE","\n                    ",74],["T_CONTINUE","continue",75],";",["T_WHITESPACE","\n                ",75],"}",["T_WHITESPACE","\n                ",76],["T_VARIABLE","$store",77],["T_OBJECT_OPERATOR","->",77],["T_STRING","setLocaleCode",77],"(",["T_STRING","Mage",77],["T_DOUBLE_COLON","::",77],["T_STRING","getStoreConfig",77],"(",["T_CONSTANT_ENCAPSED_STRING","'general\/locale\/code'",77],",",["T_WHITESPACE"," ",77],["T_VARIABLE","$store",77],["T_OBJECT_OPERATOR","->",77],["T_STRING","getId",77],"(",")",")",")",";",["T_WHITESPACE","\n\n                ",77],["T_VARIABLE","$params",79],["T_WHITESPACE"," ",79],"=",["T_WHITESPACE"," ",79],["T_ARRAY","array",79],"(",["T_WHITESPACE","\n                    ",79],["T_CONSTANT_ENCAPSED_STRING","'_query'",80],["T_WHITESPACE"," ",80],["T_DOUBLE_ARROW","=>",80],["T_WHITESPACE"," ",80],["T_ARRAY","array",80],"(",")",["T_WHITESPACE","\n                ",80],")",";",["T_WHITESPACE","\n                ",81],["T_IF","if",82],["T_WHITESPACE"," ",82],"(","!",["T_VARIABLE","$this",82],["T_OBJECT_OPERATOR","->",82],["T_STRING","isStoreInUrl",82],"(",")",")",["T_WHITESPACE"," ",82],"{",["T_WHITESPACE","\n                    ",82],["T_VARIABLE","$params",83],"[",["T_CONSTANT_ENCAPSED_STRING","'_query'",83],"]","[",["T_CONSTANT_ENCAPSED_STRING","'___store'",83],"]",["T_WHITESPACE"," ",83],"=",["T_WHITESPACE"," ",83],["T_VARIABLE","$store",83],["T_OBJECT_OPERATOR","->",83],["T_STRING","getCode",83],"(",")",";",["T_WHITESPACE","\n                ",83],"}",["T_WHITESPACE","\n                ",84],["T_VARIABLE","$baseUrl",85],["T_WHITESPACE"," ",85],"=",["T_WHITESPACE"," ",85],["T_VARIABLE","$store",85],["T_OBJECT_OPERATOR","->",85],["T_STRING","getUrl",85],"(",["T_CONSTANT_ENCAPSED_STRING","''",85],",",["T_WHITESPACE"," ",85],["T_VARIABLE","$params",85],")",";",["T_WHITESPACE","\n\n                ",85],["T_VARIABLE","$store",87],["T_OBJECT_OPERATOR","->",87],["T_STRING","setHomeUrl",87],"(",["T_VARIABLE","$baseUrl",87],")",";",["T_WHITESPACE","\n                ",87],["T_VARIABLE","$stores",88],"[",["T_VARIABLE","$store",88],["T_OBJECT_OPERATOR","->",88],["T_STRING","getGroupId",88],"(",")","]","[",["T_VARIABLE","$store",88],["T_OBJECT_OPERATOR","->",88],["T_STRING","getId",88],"(",")","]",["T_WHITESPACE"," ",88],"=",["T_WHITESPACE"," ",88],["T_VARIABLE","$store",88],";",["T_WHITESPACE","\n            ",88],"}",["T_WHITESPACE","\n            ",89],["T_VARIABLE","$this",90],["T_OBJECT_OPERATOR","->",90],["T_STRING","setData",90],"(",["T_CONSTANT_ENCAPSED_STRING","'raw_stores'",90],",",["T_WHITESPACE"," ",90],["T_VARIABLE","$stores",90],")",";",["T_WHITESPACE","\n        ",90],"}",["T_WHITESPACE","\n        ",91],["T_RETURN","return",92],["T_WHITESPACE"," ",92],["T_VARIABLE","$this",92],["T_OBJECT_OPERATOR","->",92],["T_STRING","getData",92],"(",["T_CONSTANT_ENCAPSED_STRING","'raw_stores'",92],")",";",["T_WHITESPACE","\n    ",92],"}",["T_WHITESPACE","\n\n    ",93],["T_DOC_COMMENT","\/**\n     * Retrieve list of store groups with default urls set\n     *\n     * @return array\n     *\/",95],["T_WHITESPACE","\n    ",99],["T_PUBLIC","public",100],["T_WHITESPACE"," ",100],["T_FUNCTION","function",100],["T_WHITESPACE"," ",100],["T_STRING","getGroups",100],"(",")",["T_WHITESPACE","\n    ",100],"{",["T_WHITESPACE","\n        ",101],["T_IF","if",102],["T_WHITESPACE"," ",102],"(","!",["T_VARIABLE","$this",102],["T_OBJECT_OPERATOR","->",102],["T_STRING","hasData",102],"(",["T_CONSTANT_ENCAPSED_STRING","'groups'",102],")",")",["T_WHITESPACE"," ",102],"{",["T_WHITESPACE","\n            ",102],["T_VARIABLE","$rawGroups",103],["T_WHITESPACE"," ",103],"=",["T_WHITESPACE"," ",103],["T_VARIABLE","$this",103],["T_OBJECT_OPERATOR","->",103],["T_STRING","getRawGroups",103],"(",")",";",["T_WHITESPACE","\n            ",103],["T_VARIABLE","$rawStores",104],["T_WHITESPACE"," ",104],"=",["T_WHITESPACE"," ",104],["T_VARIABLE","$this",104],["T_OBJECT_OPERATOR","->",104],["T_STRING","getRawStores",104],"(",")",";",["T_WHITESPACE","\n\n            ",104],["T_VARIABLE","$groups",106],["T_WHITESPACE"," ",106],"=",["T_WHITESPACE"," ",106],["T_ARRAY","array",106],"(",")",";",["T_WHITESPACE","\n            ",106],["T_VARIABLE","$localeCode",107],["T_WHITESPACE"," ",107],"=",["T_WHITESPACE"," ",107],["T_STRING","Mage",107],["T_DOUBLE_COLON","::",107],["T_STRING","getStoreConfig",107],"(",["T_CONSTANT_ENCAPSED_STRING","'general\/locale\/code'",107],")",";",["T_WHITESPACE","\n            ",107],["T_FOREACH","foreach",108],["T_WHITESPACE"," ",108],"(",["T_VARIABLE","$rawGroups",108],["T_WHITESPACE"," ",108],["T_AS","as",108],["T_WHITESPACE"," ",108],["T_VARIABLE","$group",108],")",["T_WHITESPACE"," ",108],"{",["T_WHITESPACE","\n                ",108],["T_COMMENT","\/* @var $group Mage_Core_Model_Store_Group *\/",109],["T_WHITESPACE","\n                ",109],["T_IF","if",110],["T_WHITESPACE"," ",110],"(","!",["T_ISSET","isset",110],"(",["T_VARIABLE","$rawStores",110],"[",["T_VARIABLE","$group",110],["T_OBJECT_OPERATOR","->",110],["T_STRING","getId",110],"(",")","]",")",")",["T_WHITESPACE"," ",110],"{",["T_WHITESPACE","\n                    ",110],["T_CONTINUE","continue",111],";",["T_WHITESPACE","\n                ",111],"}",["T_WHITESPACE","\n                ",112],["T_IF","if",113],["T_WHITESPACE"," ",113],"(",["T_VARIABLE","$group",113],["T_OBJECT_OPERATOR","->",113],["T_STRING","getId",113],"(",")",["T_WHITESPACE"," ",113],["T_IS_EQUAL","==",113],["T_WHITESPACE"," ",113],["T_VARIABLE","$this",113],["T_OBJECT_OPERATOR","->",113],["T_STRING","getCurrentGroupId",113],"(",")",")",["T_WHITESPACE"," ",113],"{",["T_WHITESPACE","\n                    ",113],["T_VARIABLE","$groups",114],"[","]",["T_WHITESPACE"," ",114],"=",["T_WHITESPACE"," ",114],["T_VARIABLE","$group",114],";",["T_WHITESPACE","\n                    ",114],["T_CONTINUE","continue",115],";",["T_WHITESPACE","\n                ",115],"}",["T_WHITESPACE","\n\n                ",116],["T_VARIABLE","$store",118],["T_WHITESPACE"," ",118],"=",["T_WHITESPACE"," ",118],["T_VARIABLE","$group",118],["T_OBJECT_OPERATOR","->",118],["T_STRING","getDefaultStoreByLocale",118],"(",["T_VARIABLE","$localeCode",118],")",";",["T_WHITESPACE","\n\n                ",118],["T_IF","if",120],["T_WHITESPACE"," ",120],"(",["T_VARIABLE","$store",120],")",["T_WHITESPACE"," ",120],"{",["T_WHITESPACE","\n                    ",120],["T_VARIABLE","$group",121],["T_OBJECT_OPERATOR","->",121],["T_STRING","setHomeUrl",121],"(",["T_VARIABLE","$store",121],["T_OBJECT_OPERATOR","->",121],["T_STRING","getHomeUrl",121],"(",")",")",";",["T_WHITESPACE","\n                    ",121],["T_VARIABLE","$groups",122],"[","]",["T_WHITESPACE"," ",122],"=",["T_WHITESPACE"," ",122],["T_VARIABLE","$group",122],";",["T_WHITESPACE","\n                ",122],"}",["T_WHITESPACE","\n            ",123],"}",["T_WHITESPACE","\n            ",124],["T_VARIABLE","$this",125],["T_OBJECT_OPERATOR","->",125],["T_STRING","setData",125],"(",["T_CONSTANT_ENCAPSED_STRING","'groups'",125],",",["T_WHITESPACE"," ",125],["T_VARIABLE","$groups",125],")",";",["T_WHITESPACE","\n        ",125],"}",["T_WHITESPACE","\n        ",126],["T_RETURN","return",127],["T_WHITESPACE"," ",127],["T_VARIABLE","$this",127],["T_OBJECT_OPERATOR","->",127],["T_STRING","getData",127],"(",["T_CONSTANT_ENCAPSED_STRING","'groups'",127],")",";",["T_WHITESPACE","\n    ",127],"}",["T_WHITESPACE","\n\n    ",128],["T_PUBLIC","public",130],["T_WHITESPACE"," ",130],["T_FUNCTION","function",130],["T_WHITESPACE"," ",130],["T_STRING","getStores",130],"(",")",["T_WHITESPACE","\n    ",130],"{",["T_WHITESPACE","\n        ",131],["T_IF","if",132],["T_WHITESPACE"," ",132],"(","!",["T_VARIABLE","$this",132],["T_OBJECT_OPERATOR","->",132],["T_STRING","getData",132],"(",["T_CONSTANT_ENCAPSED_STRING","'stores'",132],")",")",["T_WHITESPACE"," ",132],"{",["T_WHITESPACE","\n            ",132],["T_VARIABLE","$rawStores",133],["T_WHITESPACE"," ",133],"=",["T_WHITESPACE"," ",133],["T_VARIABLE","$this",133],["T_OBJECT_OPERATOR","->",133],["T_STRING","getRawStores",133],"(",")",";",["T_WHITESPACE","\n\n            ",133],["T_VARIABLE","$groupId",135],["T_WHITESPACE"," ",135],"=",["T_WHITESPACE"," ",135],["T_VARIABLE","$this",135],["T_OBJECT_OPERATOR","->",135],["T_STRING","getCurrentGroupId",135],"(",")",";",["T_WHITESPACE","\n            ",135],["T_IF","if",136],["T_WHITESPACE"," ",136],"(","!",["T_ISSET","isset",136],"(",["T_VARIABLE","$rawStores",136],"[",["T_VARIABLE","$groupId",136],"]",")",")",["T_WHITESPACE"," ",136],"{",["T_WHITESPACE","\n                ",136],["T_VARIABLE","$stores",137],["T_WHITESPACE"," ",137],"=",["T_WHITESPACE"," ",137],["T_ARRAY","array",137],"(",")",";",["T_WHITESPACE","\n            ",137],"}",["T_WHITESPACE"," ",138],["T_ELSE","else",138],["T_WHITESPACE"," ",138],"{",["T_WHITESPACE","\n                ",138],["T_VARIABLE","$stores",139],["T_WHITESPACE"," ",139],"=",["T_WHITESPACE"," ",139],["T_VARIABLE","$rawStores",139],"[",["T_VARIABLE","$groupId",139],"]",";",["T_WHITESPACE","\n            ",139],"}",["T_WHITESPACE","\n            ",140],["T_VARIABLE","$this",141],["T_OBJECT_OPERATOR","->",141],["T_STRING","setData",141],"(",["T_CONSTANT_ENCAPSED_STRING","'stores'",141],",",["T_WHITESPACE"," ",141],["T_VARIABLE","$stores",141],")",";",["T_WHITESPACE","\n        ",141],"}",["T_WHITESPACE","\n        ",142],["T_RETURN","return",143],["T_WHITESPACE"," ",143],["T_VARIABLE","$this",143],["T_OBJECT_OPERATOR","->",143],["T_STRING","getData",143],"(",["T_CONSTANT_ENCAPSED_STRING","'stores'",143],")",";",["T_WHITESPACE","\n    ",143],"}",["T_WHITESPACE","\n\n    ",144],["T_PUBLIC","public",146],["T_WHITESPACE"," ",146],["T_FUNCTION","function",146],["T_WHITESPACE"," ",146],["T_STRING","getCurrentStoreCode",146],"(",")",["T_WHITESPACE","\n    ",146],"{",["T_WHITESPACE","\n        ",147],["T_RETURN","return",148],["T_WHITESPACE"," ",148],["T_STRING","Mage",148],["T_DOUBLE_COLON","::",148],["T_STRING","app",148],"(",")",["T_OBJECT_OPERATOR","->",148],["T_STRING","getStore",148],"(",")",["T_OBJECT_OPERATOR","->",148],["T_STRING","getCode",148],"(",")",";",["T_WHITESPACE","\n    ",148],"}",["T_WHITESPACE","\n\n    ",149],["T_PUBLIC","public",151],["T_WHITESPACE"," ",151],["T_FUNCTION","function",151],["T_WHITESPACE"," ",151],["T_STRING","isStoreInUrl",151],"(",")",["T_WHITESPACE","\n    ",151],"{",["T_WHITESPACE","\n        ",152],["T_IF","if",153],["T_WHITESPACE"," ",153],"(",["T_STRING","is_null",153],"(",["T_VARIABLE","$this",153],["T_OBJECT_OPERATOR","->",153],["T_STRING","_storeInUrl",153],")",")",["T_WHITESPACE"," ",153],"{",["T_WHITESPACE","\n            ",153],["T_VARIABLE","$this",154],["T_OBJECT_OPERATOR","->",154],["T_STRING","_storeInUrl",154],["T_WHITESPACE"," ",154],"=",["T_WHITESPACE"," ",154],["T_STRING","Mage",154],["T_DOUBLE_COLON","::",154],["T_STRING","getStoreConfigFlag",154],"(",["T_STRING","Mage_Core_Model_Store",154],["T_DOUBLE_COLON","::",154],["T_STRING","XML_PATH_STORE_IN_URL",154],")",";",["T_WHITESPACE","\n        ",154],"}",["T_WHITESPACE","\n        ",155],["T_RETURN","return",156],["T_WHITESPACE"," ",156],["T_VARIABLE","$this",156],["T_OBJECT_OPERATOR","->",156],["T_STRING","_storeInUrl",156],";",["T_WHITESPACE","\n    ",156],"}",["T_WHITESPACE","\n",157],"}",["T_WHITESPACE","\n",158]]
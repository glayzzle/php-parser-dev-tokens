[["T_OPEN_TAG","<?php\n",1],["T_DOC_COMMENT","\/**\n * Magento\n *\n * NOTICE OF LICENSE\n *\n * This source file is subject to the Open Software License (OSL 3.0)\n * that is bundled with this package in the file LICENSE.txt.\n * It is also available through the world-wide-web at this URL:\n * http:\/\/opensource.org\/licenses\/osl-3.0.php\n * If you did not receive a copy of the license and are unable to\n * obtain it through the world-wide-web, please send an email\n * to license@magento.com so we can send you a copy immediately.\n *\n * DISCLAIMER\n *\n * Do not edit or add to this file if you wish to upgrade Magento to newer\n * versions in the future. If you wish to customize Magento for your\n * needs please refer to http:\/\/www.magento.com for more information.\n *\n * @category    Mage\n * @package     Mage_Directory\n * @copyright  Copyright (c) 2006-2016 X.commerce, Inc. and affiliates (http:\/\/www.magento.com)\n * @license    http:\/\/opensource.org\/licenses\/osl-3.0.php  Open Software License (OSL 3.0)\n *\/",2],["T_WHITESPACE","\n\n",25],["T_DOC_COMMENT","\/**\n * Currency model\n *\n * @category   Mage\n * @package    Mage_Directory\n * @author      Magento Core Team <core@magentocommerce.com>\n *\/",27],["T_WHITESPACE","\n",33],["T_CLASS","class",34],["T_WHITESPACE"," ",34],["T_STRING","Mage_Directory_Model_Currency",34],["T_WHITESPACE"," ",34],["T_EXTENDS","extends",34],["T_WHITESPACE"," ",34],["T_STRING","Mage_Core_Model_Abstract",34],["T_WHITESPACE","\n",34],"{",["T_WHITESPACE","\n    ",35],["T_DOC_COMMENT","\/**\n     * CONFIG path constant: ALLOW\n    *\/",36],["T_WHITESPACE","\n    ",38],["T_CONST","const",39],["T_WHITESPACE"," ",39],["T_STRING","XML_PATH_CURRENCY_ALLOW",39],["T_WHITESPACE","   ",39],"=",["T_WHITESPACE"," ",39],["T_CONSTANT_ENCAPSED_STRING","'currency\/options\/allow'",39],";",["T_WHITESPACE","\n    ",39],["T_DOC_COMMENT","\/**\n     * CONFIG path constant: DEFAULT\n     *\/",40],["T_WHITESPACE","\n    ",42],["T_CONST","const",43],["T_WHITESPACE"," ",43],["T_STRING","XML_PATH_CURRENCY_DEFAULT",43],["T_WHITESPACE"," ",43],"=",["T_WHITESPACE"," ",43],["T_CONSTANT_ENCAPSED_STRING","'currency\/options\/default'",43],";",["T_WHITESPACE","\n    ",43],["T_DOC_COMMENT","\/**\n     * CONFIG path constant: BASE\n     *\/",44],["T_WHITESPACE","\n    ",46],["T_CONST","const",47],["T_WHITESPACE"," ",47],["T_STRING","XML_PATH_CURRENCY_BASE",47],["T_WHITESPACE","    ",47],"=",["T_WHITESPACE"," ",47],["T_CONSTANT_ENCAPSED_STRING","'currency\/options\/base'",47],";",["T_WHITESPACE","\n\n    ",47],["T_DOC_COMMENT","\/**\n     * @var Mage_Directory_Model_Currency_Filter - currency filter\n     *\/",49],["T_WHITESPACE","\n    ",51],["T_PROTECTED","protected",52],["T_WHITESPACE"," ",52],["T_VARIABLE","$_filter",52],";",["T_WHITESPACE","\n\n    ",52],["T_DOC_COMMENT","\/**\n     * Currency Rates\n     *\n     * @var array\n     *\/",54],["T_WHITESPACE","\n    ",58],["T_PROTECTED","protected",59],["T_WHITESPACE"," ",59],["T_VARIABLE","$_rates",59],";",["T_WHITESPACE","\n\n\n    ",59],["T_DOC_COMMENT","\/**\n     * Class constructor\n     *\/",62],["T_WHITESPACE","\n    ",64],["T_PROTECTED","protected",65],["T_WHITESPACE"," ",65],["T_FUNCTION","function",65],["T_WHITESPACE"," ",65],["T_STRING","_construct",65],"(",")",["T_WHITESPACE","\n    ",65],"{",["T_WHITESPACE","\n        ",66],["T_VARIABLE","$this",67],["T_OBJECT_OPERATOR","->",67],["T_STRING","_init",67],"(",["T_CONSTANT_ENCAPSED_STRING","'directory\/currency'",67],")",";",["T_WHITESPACE","\n    ",67],"}",["T_WHITESPACE","\n\n    ",68],["T_DOC_COMMENT","\/**\n     * Get currency code\n     *\n     * @return string\n     *\/",70],["T_WHITESPACE","\n    ",74],["T_PUBLIC","public",75],["T_WHITESPACE"," ",75],["T_FUNCTION","function",75],["T_WHITESPACE"," ",75],["T_STRING","getCode",75],"(",")",["T_WHITESPACE","\n    ",75],"{",["T_WHITESPACE","\n        ",76],["T_RETURN","return",77],["T_WHITESPACE"," ",77],["T_VARIABLE","$this",77],["T_OBJECT_OPERATOR","->",77],["T_STRING","_getData",77],"(",["T_CONSTANT_ENCAPSED_STRING","'currency_code'",77],")",";",["T_WHITESPACE","\n    ",77],"}",["T_WHITESPACE","\n\n    ",78],["T_DOC_COMMENT","\/**\n     * Get currency code\n     *\n     * @return string\n     *\/",80],["T_WHITESPACE","\n    ",84],["T_PUBLIC","public",85],["T_WHITESPACE"," ",85],["T_FUNCTION","function",85],["T_WHITESPACE"," ",85],["T_STRING","getCurrencyCode",85],"(",")",["T_WHITESPACE","\n    ",85],"{",["T_WHITESPACE","\n        ",86],["T_RETURN","return",87],["T_WHITESPACE"," ",87],["T_VARIABLE","$this",87],["T_OBJECT_OPERATOR","->",87],["T_STRING","_getData",87],"(",["T_CONSTANT_ENCAPSED_STRING","'currency_code'",87],")",";",["T_WHITESPACE","\n    ",87],"}",["T_WHITESPACE","\n\n    ",88],["T_DOC_COMMENT","\/**\n     * Currency Rates getter\n     *\n     * @return array\n     *\/",90],["T_WHITESPACE","\n    ",94],["T_PUBLIC","public",95],["T_WHITESPACE"," ",95],["T_FUNCTION","function",95],["T_WHITESPACE"," ",95],["T_STRING","getRates",95],"(",")",["T_WHITESPACE","\n    ",95],"{",["T_WHITESPACE","\n        ",96],["T_RETURN","return",97],["T_WHITESPACE"," ",97],["T_VARIABLE","$this",97],["T_OBJECT_OPERATOR","->",97],["T_STRING","_rates",97],";",["T_WHITESPACE","\n    ",97],"}",["T_WHITESPACE","\n\n    ",98],["T_DOC_COMMENT","\/**\n     * Currency Rates setter\n     *\n     * @param array Currency Rates\n     * @return Mage_Directory_Model_Currency\n     *\/",100],["T_WHITESPACE","\n    ",105],["T_PUBLIC","public",106],["T_WHITESPACE"," ",106],["T_FUNCTION","function",106],["T_WHITESPACE"," ",106],["T_STRING","setRates",106],"(",["T_ARRAY","array",106],["T_WHITESPACE"," ",106],["T_VARIABLE","$rates",106],")",["T_WHITESPACE","\n    ",106],"{",["T_WHITESPACE","\n        ",107],["T_VARIABLE","$this",108],["T_OBJECT_OPERATOR","->",108],["T_STRING","_rates",108],["T_WHITESPACE"," ",108],"=",["T_WHITESPACE"," ",108],["T_VARIABLE","$rates",108],";",["T_WHITESPACE","\n        ",108],["T_RETURN","return",109],["T_WHITESPACE"," ",109],["T_VARIABLE","$this",109],";",["T_WHITESPACE","\n    ",109],"}",["T_WHITESPACE","\n\n    ",110],["T_DOC_COMMENT","\/**\n     * Loading currency data\n     *\n     * @param   string $id\n     * @param   string $field\n     * @return  Mage_Directory_Model_Currency\n     *\/",112],["T_WHITESPACE","\n    ",118],["T_PUBLIC","public",119],["T_WHITESPACE"," ",119],["T_FUNCTION","function",119],["T_WHITESPACE"," ",119],["T_STRING","load",119],"(",["T_VARIABLE","$id",119],",",["T_WHITESPACE"," ",119],["T_VARIABLE","$field",119],["T_WHITESPACE"," ",119],"=",["T_WHITESPACE"," ",119],["T_STRING","null",119],")",["T_WHITESPACE","\n    ",119],"{",["T_WHITESPACE","\n        ",120],["T_VARIABLE","$this",121],["T_OBJECT_OPERATOR","->",121],["T_STRING","unsRate",121],"(",")",";",["T_WHITESPACE","\n        ",121],["T_VARIABLE","$this",122],["T_OBJECT_OPERATOR","->",122],["T_STRING","setData",122],"(",["T_CONSTANT_ENCAPSED_STRING","'currency_code'",122],",",["T_WHITESPACE"," ",122],["T_VARIABLE","$id",122],")",";",["T_WHITESPACE","\n        ",122],["T_RETURN","return",123],["T_WHITESPACE"," ",123],["T_VARIABLE","$this",123],";",["T_WHITESPACE","\n    ",123],"}",["T_WHITESPACE","\n\n    ",124],["T_DOC_COMMENT","\/**\n     * Get currency rate (only base=>allowed)\n     *\n     * @param string|Mage_Directory_Model_Currency $toCurrency\n     * @return string\n     * @throws Mage_Core_Exception\n     *\/",126],["T_WHITESPACE","\n    ",132],["T_PUBLIC","public",133],["T_WHITESPACE"," ",133],["T_FUNCTION","function",133],["T_WHITESPACE"," ",133],["T_STRING","getRate",133],"(",["T_VARIABLE","$toCurrency",133],")",["T_WHITESPACE","\n    ",133],"{",["T_WHITESPACE","\n        ",134],["T_IF","if",135],["T_WHITESPACE"," ",135],"(",["T_STRING","is_string",135],"(",["T_VARIABLE","$toCurrency",135],")",")",["T_WHITESPACE"," ",135],"{",["T_WHITESPACE","\n            ",135],["T_VARIABLE","$code",136],["T_WHITESPACE"," ",136],"=",["T_WHITESPACE"," ",136],["T_VARIABLE","$toCurrency",136],";",["T_WHITESPACE","\n        ",136],"}",["T_WHITESPACE"," ",137],["T_ELSEIF","elseif",137],["T_WHITESPACE"," ",137],"(",["T_VARIABLE","$toCurrency",137],["T_WHITESPACE"," ",137],["T_INSTANCEOF","instanceof",137],["T_WHITESPACE"," ",137],["T_STRING","Mage_Directory_Model_Currency",137],")",["T_WHITESPACE"," ",137],"{",["T_WHITESPACE","\n            ",137],["T_VARIABLE","$code",138],["T_WHITESPACE"," ",138],"=",["T_WHITESPACE"," ",138],["T_VARIABLE","$toCurrency",138],["T_OBJECT_OPERATOR","->",138],["T_STRING","getCurrencyCode",138],"(",")",";",["T_WHITESPACE","\n        ",138],"}",["T_WHITESPACE"," ",139],["T_ELSE","else",139],["T_WHITESPACE"," ",139],"{",["T_WHITESPACE","\n            ",139],["T_THROW","throw",140],["T_WHITESPACE"," ",140],["T_STRING","Mage",140],["T_DOUBLE_COLON","::",140],["T_STRING","exception",140],"(",["T_CONSTANT_ENCAPSED_STRING","'Mage_Directory'",140],",",["T_WHITESPACE"," ",140],["T_STRING","Mage",140],["T_DOUBLE_COLON","::",140],["T_STRING","helper",140],"(",["T_CONSTANT_ENCAPSED_STRING","'directory'",140],")",["T_OBJECT_OPERATOR","->",140],["T_STRING","__",140],"(",["T_CONSTANT_ENCAPSED_STRING","'Invalid target currency.'",140],")",")",";",["T_WHITESPACE","\n        ",140],"}",["T_WHITESPACE","\n        ",141],["T_VARIABLE","$rates",142],["T_WHITESPACE"," ",142],"=",["T_WHITESPACE"," ",142],["T_VARIABLE","$this",142],["T_OBJECT_OPERATOR","->",142],["T_STRING","getRates",142],"(",")",";",["T_WHITESPACE","\n        ",142],["T_IF","if",143],["T_WHITESPACE"," ",143],"(","!",["T_ISSET","isset",143],"(",["T_VARIABLE","$rates",143],"[",["T_VARIABLE","$code",143],"]",")",")",["T_WHITESPACE"," ",143],"{",["T_WHITESPACE","\n            ",143],["T_VARIABLE","$rates",144],"[",["T_VARIABLE","$code",144],"]",["T_WHITESPACE"," ",144],"=",["T_WHITESPACE"," ",144],["T_VARIABLE","$this",144],["T_OBJECT_OPERATOR","->",144],["T_STRING","_getResource",144],"(",")",["T_OBJECT_OPERATOR","->",144],["T_STRING","getRate",144],"(",["T_VARIABLE","$this",144],["T_OBJECT_OPERATOR","->",144],["T_STRING","getCode",144],"(",")",",",["T_WHITESPACE"," ",144],["T_VARIABLE","$toCurrency",144],")",";",["T_WHITESPACE","\n            ",144],["T_VARIABLE","$this",145],["T_OBJECT_OPERATOR","->",145],["T_STRING","setRates",145],"(",["T_VARIABLE","$rates",145],")",";",["T_WHITESPACE","\n        ",145],"}",["T_WHITESPACE","\n        ",146],["T_RETURN","return",147],["T_WHITESPACE"," ",147],["T_VARIABLE","$rates",147],"[",["T_VARIABLE","$code",147],"]",";",["T_WHITESPACE","\n    ",147],"}",["T_WHITESPACE","\n\n    ",148],["T_DOC_COMMENT","\/**\n     * Get currency rate (base=>allowed or allowed=>base)\n     *\n     * @param string|Mage_Directory_Model_Currency $toCurrency\n     * @return string\n     * @throws Mage_Core_Exception\n     *\/",150],["T_WHITESPACE","\n    ",156],["T_PUBLIC","public",157],["T_WHITESPACE"," ",157],["T_FUNCTION","function",157],["T_WHITESPACE"," ",157],["T_STRING","getAnyRate",157],"(",["T_VARIABLE","$toCurrency",157],")",["T_WHITESPACE","\n    ",157],"{",["T_WHITESPACE","\n        ",158],["T_IF","if",159],["T_WHITESPACE"," ",159],"(",["T_STRING","is_string",159],"(",["T_VARIABLE","$toCurrency",159],")",")",["T_WHITESPACE"," ",159],"{",["T_WHITESPACE","\n            ",159],["T_VARIABLE","$code",160],["T_WHITESPACE"," ",160],"=",["T_WHITESPACE"," ",160],["T_VARIABLE","$toCurrency",160],";",["T_WHITESPACE","\n        ",160],"}",["T_WHITESPACE"," ",161],["T_ELSEIF","elseif",161],["T_WHITESPACE"," ",161],"(",["T_VARIABLE","$toCurrency",161],["T_WHITESPACE"," ",161],["T_INSTANCEOF","instanceof",161],["T_WHITESPACE"," ",161],["T_STRING","Mage_Directory_Model_Currency",161],")",["T_WHITESPACE"," ",161],"{",["T_WHITESPACE","\n            ",161],["T_VARIABLE","$code",162],["T_WHITESPACE"," ",162],"=",["T_WHITESPACE"," ",162],["T_VARIABLE","$toCurrency",162],["T_OBJECT_OPERATOR","->",162],["T_STRING","getCurrencyCode",162],"(",")",";",["T_WHITESPACE","\n        ",162],"}",["T_WHITESPACE"," ",163],["T_ELSE","else",163],["T_WHITESPACE"," ",163],"{",["T_WHITESPACE","\n            ",163],["T_THROW","throw",164],["T_WHITESPACE"," ",164],["T_STRING","Mage",164],["T_DOUBLE_COLON","::",164],["T_STRING","exception",164],"(",["T_CONSTANT_ENCAPSED_STRING","'Mage_Directory'",164],",",["T_WHITESPACE"," ",164],["T_STRING","Mage",164],["T_DOUBLE_COLON","::",164],["T_STRING","helper",164],"(",["T_CONSTANT_ENCAPSED_STRING","'directory'",164],")",["T_OBJECT_OPERATOR","->",164],["T_STRING","__",164],"(",["T_CONSTANT_ENCAPSED_STRING","'Invalid target currency.'",164],")",")",";",["T_WHITESPACE","\n        ",164],"}",["T_WHITESPACE","\n        ",165],["T_VARIABLE","$rates",166],["T_WHITESPACE"," ",166],"=",["T_WHITESPACE"," ",166],["T_VARIABLE","$this",166],["T_OBJECT_OPERATOR","->",166],["T_STRING","getRates",166],"(",")",";",["T_WHITESPACE","\n        ",166],["T_IF","if",167],["T_WHITESPACE"," ",167],"(","!",["T_ISSET","isset",167],"(",["T_VARIABLE","$rates",167],"[",["T_VARIABLE","$code",167],"]",")",")",["T_WHITESPACE"," ",167],"{",["T_WHITESPACE","\n            ",167],["T_VARIABLE","$rates",168],"[",["T_VARIABLE","$code",168],"]",["T_WHITESPACE"," ",168],"=",["T_WHITESPACE"," ",168],["T_VARIABLE","$this",168],["T_OBJECT_OPERATOR","->",168],["T_STRING","_getResource",168],"(",")",["T_OBJECT_OPERATOR","->",168],["T_STRING","getAnyRate",168],"(",["T_VARIABLE","$this",168],["T_OBJECT_OPERATOR","->",168],["T_STRING","getCode",168],"(",")",",",["T_WHITESPACE"," ",168],["T_VARIABLE","$toCurrency",168],")",";",["T_WHITESPACE","\n            ",168],["T_VARIABLE","$this",169],["T_OBJECT_OPERATOR","->",169],["T_STRING","setRates",169],"(",["T_VARIABLE","$rates",169],")",";",["T_WHITESPACE","\n        ",169],"}",["T_WHITESPACE","\n        ",170],["T_RETURN","return",171],["T_WHITESPACE"," ",171],["T_VARIABLE","$rates",171],"[",["T_VARIABLE","$code",171],"]",";",["T_WHITESPACE","\n    ",171],"}",["T_WHITESPACE","\n\n    ",172],["T_DOC_COMMENT","\/**\n     * Convert price to currency format\n     *\n     * @param float $price\n     * @param null|string|Mage_Directory_Model_Currency $toCurrency\n     * @return float\n     * @throws Exception\n     *\/",174],["T_WHITESPACE","\n    ",181],["T_PUBLIC","public",182],["T_WHITESPACE"," ",182],["T_FUNCTION","function",182],["T_WHITESPACE"," ",182],["T_STRING","convert",182],"(",["T_VARIABLE","$price",182],",",["T_WHITESPACE"," ",182],["T_VARIABLE","$toCurrency",182],["T_WHITESPACE"," ",182],"=",["T_WHITESPACE"," ",182],["T_STRING","null",182],")",["T_WHITESPACE","\n    ",182],"{",["T_WHITESPACE","\n        ",183],["T_IF","if",184],["T_WHITESPACE"," ",184],"(",["T_STRING","is_null",184],"(",["T_VARIABLE","$toCurrency",184],")",")",["T_WHITESPACE"," ",184],"{",["T_WHITESPACE","\n            ",184],["T_RETURN","return",185],["T_WHITESPACE"," ",185],["T_VARIABLE","$price",185],";",["T_WHITESPACE","\n        ",185],"}",["T_WHITESPACE"," ",186],["T_ELSE","else",186],["T_WHITESPACE"," ",186],"{",["T_WHITESPACE","\n            ",186],["T_VARIABLE","$rate",187],["T_WHITESPACE"," ",187],"=",["T_WHITESPACE"," ",187],["T_VARIABLE","$this",187],["T_OBJECT_OPERATOR","->",187],["T_STRING","getRate",187],"(",["T_VARIABLE","$toCurrency",187],")",";",["T_WHITESPACE","\n            ",187],["T_IF","if",188],["T_WHITESPACE"," ",188],"(",["T_VARIABLE","$rate",188],")",["T_WHITESPACE"," ",188],"{",["T_WHITESPACE","\n                ",188],["T_RETURN","return",189],["T_WHITESPACE"," ",189],["T_VARIABLE","$price",189],["T_WHITESPACE"," ",189],"*",["T_WHITESPACE"," ",189],["T_VARIABLE","$rate",189],";",["T_WHITESPACE","\n            ",189],"}",["T_WHITESPACE","\n        ",190],"}",["T_WHITESPACE","\n\n        ",191],["T_THROW","throw",193],["T_WHITESPACE"," ",193],["T_NEW","new",193],["T_WHITESPACE"," ",193],["T_STRING","Exception",193],"(",["T_STRING","Mage",193],["T_DOUBLE_COLON","::",193],["T_STRING","helper",193],"(",["T_CONSTANT_ENCAPSED_STRING","'directory'",193],")",["T_OBJECT_OPERATOR","->",193],["T_STRING","__",193],"(",["T_CONSTANT_ENCAPSED_STRING","'Undefined rate from \"%s-%s\".'",193],",",["T_WHITESPACE"," ",193],["T_VARIABLE","$this",193],["T_OBJECT_OPERATOR","->",193],["T_STRING","getCode",193],"(",")",",",["T_WHITESPACE","\n            ",193],["T_VARIABLE","$toCurrency",194],["T_OBJECT_OPERATOR","->",194],["T_STRING","getCode",194],"(",")",")",")",";",["T_WHITESPACE","\n    ",194],"}",["T_WHITESPACE","\n\n    ",195],["T_DOC_COMMENT","\/**\n     * Get currency filter\n     *\n     * @return Mage_Directory_Model_Currency_Filter\n     *\/",197],["T_WHITESPACE","\n    ",201],["T_PUBLIC","public",202],["T_WHITESPACE"," ",202],["T_FUNCTION","function",202],["T_WHITESPACE"," ",202],["T_STRING","getFilter",202],"(",")",["T_WHITESPACE","\n    ",202],"{",["T_WHITESPACE","\n        ",203],["T_IF","if",204],["T_WHITESPACE"," ",204],"(","!",["T_VARIABLE","$this",204],["T_OBJECT_OPERATOR","->",204],["T_STRING","_filter",204],")",["T_WHITESPACE"," ",204],"{",["T_WHITESPACE","\n            ",204],["T_VARIABLE","$this",205],["T_OBJECT_OPERATOR","->",205],["T_STRING","_filter",205],["T_WHITESPACE"," ",205],"=",["T_WHITESPACE"," ",205],["T_NEW","new",205],["T_WHITESPACE"," ",205],["T_STRING","Mage_Directory_Model_Currency_Filter",205],"(",["T_VARIABLE","$this",205],["T_OBJECT_OPERATOR","->",205],["T_STRING","getCode",205],"(",")",")",";",["T_WHITESPACE","\n        ",205],"}",["T_WHITESPACE","\n\n        ",206],["T_RETURN","return",208],["T_WHITESPACE"," ",208],["T_VARIABLE","$this",208],["T_OBJECT_OPERATOR","->",208],["T_STRING","_filter",208],";",["T_WHITESPACE","\n    ",208],"}",["T_WHITESPACE","\n\n    ",209],["T_DOC_COMMENT","\/**\n     * Format price to currency format\n     *\n     * @param float $price\n     * @param array $options\n     * @param bool $includeContainer\n     * @param bool $addBrackets\n     * @return string\n     *\/",211],["T_WHITESPACE","\n    ",219],["T_PUBLIC","public",220],["T_WHITESPACE"," ",220],["T_FUNCTION","function",220],["T_WHITESPACE"," ",220],["T_STRING","format",220],"(",["T_VARIABLE","$price",220],",",["T_WHITESPACE"," ",220],["T_VARIABLE","$options",220],["T_WHITESPACE"," ",220],"=",["T_WHITESPACE"," ",220],["T_ARRAY","array",220],"(",")",",",["T_WHITESPACE"," ",220],["T_VARIABLE","$includeContainer",220],["T_WHITESPACE"," ",220],"=",["T_WHITESPACE"," ",220],["T_STRING","true",220],",",["T_WHITESPACE"," ",220],["T_VARIABLE","$addBrackets",220],["T_WHITESPACE"," ",220],"=",["T_WHITESPACE"," ",220],["T_STRING","false",220],")",["T_WHITESPACE","\n    ",220],"{",["T_WHITESPACE","\n        ",221],["T_RETURN","return",222],["T_WHITESPACE"," ",222],["T_VARIABLE","$this",222],["T_OBJECT_OPERATOR","->",222],["T_STRING","formatPrecision",222],"(",["T_VARIABLE","$price",222],",",["T_WHITESPACE"," ",222],["T_LNUMBER","2",222],",",["T_WHITESPACE"," ",222],["T_VARIABLE","$options",222],",",["T_WHITESPACE"," ",222],["T_VARIABLE","$includeContainer",222],",",["T_WHITESPACE"," ",222],["T_VARIABLE","$addBrackets",222],")",";",["T_WHITESPACE","\n    ",222],"}",["T_WHITESPACE","\n\n    ",223],["T_DOC_COMMENT","\/**\n     * Apply currency format to number with specific rounding precision\n     *\n     * @param   float $price\n     * @param   int $precision\n     * @param   array $options\n     * @param   bool $includeContainer\n     * @param   bool $addBrackets\n     * @return  string\n     *\/",225],["T_WHITESPACE","\n    ",234],["T_PUBLIC","public",235],["T_WHITESPACE"," ",235],["T_FUNCTION","function",235],["T_WHITESPACE"," ",235],["T_STRING","formatPrecision",235],"(",["T_VARIABLE","$price",235],",",["T_WHITESPACE"," ",235],["T_VARIABLE","$precision",235],",",["T_WHITESPACE"," ",235],["T_VARIABLE","$options",235],["T_WHITESPACE"," ",235],"=",["T_WHITESPACE"," ",235],["T_ARRAY","array",235],"(",")",",",["T_WHITESPACE"," ",235],["T_VARIABLE","$includeContainer",235],["T_WHITESPACE"," ",235],"=",["T_WHITESPACE"," ",235],["T_STRING","true",235],",",["T_WHITESPACE","\n                                    ",235],["T_VARIABLE","$addBrackets",236],["T_WHITESPACE"," ",236],"=",["T_WHITESPACE"," ",236],["T_STRING","false",236],")",["T_WHITESPACE","\n    ",236],"{",["T_WHITESPACE","\n        ",237],["T_IF","if",238],["T_WHITESPACE"," ",238],"(","!",["T_ISSET","isset",238],"(",["T_VARIABLE","$options",238],"[",["T_CONSTANT_ENCAPSED_STRING","'precision'",238],"]",")",")",["T_WHITESPACE"," ",238],"{",["T_WHITESPACE","\n            ",238],["T_VARIABLE","$options",239],"[",["T_CONSTANT_ENCAPSED_STRING","'precision'",239],"]",["T_WHITESPACE"," ",239],"=",["T_WHITESPACE"," ",239],["T_VARIABLE","$precision",239],";",["T_WHITESPACE","\n        ",239],"}",["T_WHITESPACE","\n        ",240],["T_IF","if",241],["T_WHITESPACE"," ",241],"(",["T_VARIABLE","$includeContainer",241],")",["T_WHITESPACE"," ",241],"{",["T_WHITESPACE","\n            ",241],["T_RETURN","return",242],["T_WHITESPACE"," ",242],["T_CONSTANT_ENCAPSED_STRING","'<span class=\"price\">'",242],["T_WHITESPACE"," ",242],".",["T_WHITESPACE"," ",242],"(",["T_VARIABLE","$addBrackets",242],["T_WHITESPACE"," ",242],"?",["T_WHITESPACE"," ",242],["T_CONSTANT_ENCAPSED_STRING","'['",242],["T_WHITESPACE"," ",242],":",["T_WHITESPACE"," ",242],["T_CONSTANT_ENCAPSED_STRING","''",242],")",["T_WHITESPACE"," ",242],".",["T_WHITESPACE"," ",242],["T_VARIABLE","$this",242],["T_OBJECT_OPERATOR","->",242],["T_STRING","formatTxt",242],"(",["T_VARIABLE","$price",242],",",["T_WHITESPACE"," ",242],["T_VARIABLE","$options",242],")",["T_WHITESPACE"," ",242],".",["T_WHITESPACE","\n                ",242],"(",["T_VARIABLE","$addBrackets",243],["T_WHITESPACE"," ",243],"?",["T_WHITESPACE"," ",243],["T_CONSTANT_ENCAPSED_STRING","']'",243],["T_WHITESPACE"," ",243],":",["T_WHITESPACE"," ",243],["T_CONSTANT_ENCAPSED_STRING","''",243],")",["T_WHITESPACE"," ",243],".",["T_WHITESPACE"," ",243],["T_CONSTANT_ENCAPSED_STRING","'<\/span>'",243],";",["T_WHITESPACE","\n        ",243],"}",["T_WHITESPACE","\n        ",244],["T_RETURN","return",245],["T_WHITESPACE"," ",245],["T_VARIABLE","$this",245],["T_OBJECT_OPERATOR","->",245],["T_STRING","formatTxt",245],"(",["T_VARIABLE","$price",245],",",["T_WHITESPACE"," ",245],["T_VARIABLE","$options",245],")",";",["T_WHITESPACE","\n    ",245],"}",["T_WHITESPACE","\n\n    ",246],["T_DOC_COMMENT","\/**\n     * Returns the formatted price\n     *\n     * @param float $price\n     * @param null|array $options\n     * @return string\n     *\/",248],["T_WHITESPACE","\n    ",254],["T_PUBLIC","public",255],["T_WHITESPACE"," ",255],["T_FUNCTION","function",255],["T_WHITESPACE"," ",255],["T_STRING","formatTxt",255],"(",["T_VARIABLE","$price",255],",",["T_WHITESPACE"," ",255],["T_VARIABLE","$options",255],["T_WHITESPACE"," ",255],"=",["T_WHITESPACE"," ",255],["T_ARRAY","array",255],"(",")",")",["T_WHITESPACE","\n    ",255],"{",["T_WHITESPACE","\n        ",256],["T_IF","if",257],["T_WHITESPACE"," ",257],"(","!",["T_STRING","is_numeric",257],"(",["T_VARIABLE","$price",257],")",")",["T_WHITESPACE"," ",257],"{",["T_WHITESPACE","\n            ",257],["T_VARIABLE","$price",258],["T_WHITESPACE"," ",258],"=",["T_WHITESPACE"," ",258],["T_STRING","Mage",258],["T_DOUBLE_COLON","::",258],["T_STRING","app",258],"(",")",["T_OBJECT_OPERATOR","->",258],["T_STRING","getLocale",258],"(",")",["T_OBJECT_OPERATOR","->",258],["T_STRING","getNumber",258],"(",["T_VARIABLE","$price",258],")",";",["T_WHITESPACE","\n        ",258],"}",["T_WHITESPACE","\n        ",259],["T_DOC_COMMENT","\/**\n         * Fix problem with 12 000 000, 1 200 000\n         *\n         * %f - the argument is treated as a float, and presented as a floating-point number (locale aware).\n         * %F - the argument is treated as a float, and presented as a floating-point number (non-locale aware).\n         *\/",260],["T_WHITESPACE","\n        ",265],["T_VARIABLE","$price",266],["T_WHITESPACE"," ",266],"=",["T_WHITESPACE"," ",266],["T_STRING","sprintf",266],"(",["T_CONSTANT_ENCAPSED_STRING","\"%F\"",266],",",["T_WHITESPACE"," ",266],["T_VARIABLE","$price",266],")",";",["T_WHITESPACE","\n        ",266],["T_IF","if",267],["T_WHITESPACE"," ",267],"(",["T_VARIABLE","$price",267],["T_WHITESPACE"," ",267],["T_IS_EQUAL","==",267],["T_WHITESPACE"," ",267],"-",["T_LNUMBER","0",267],")",["T_WHITESPACE"," ",267],"{",["T_WHITESPACE","\n            ",267],["T_VARIABLE","$price",268],["T_WHITESPACE"," ",268],"=",["T_WHITESPACE"," ",268],["T_LNUMBER","0",268],";",["T_WHITESPACE","\n        ",268],"}",["T_WHITESPACE","\n        ",269],["T_RETURN","return",270],["T_WHITESPACE"," ",270],["T_STRING","Mage",270],["T_DOUBLE_COLON","::",270],["T_STRING","app",270],"(",")",["T_OBJECT_OPERATOR","->",270],["T_STRING","getLocale",270],"(",")",["T_OBJECT_OPERATOR","->",270],["T_STRING","currency",270],"(",["T_VARIABLE","$this",270],["T_OBJECT_OPERATOR","->",270],["T_STRING","getCode",270],"(",")",")",["T_OBJECT_OPERATOR","->",270],["T_STRING","toCurrency",270],"(",["T_VARIABLE","$price",270],",",["T_WHITESPACE"," ",270],["T_VARIABLE","$options",270],")",";",["T_WHITESPACE","\n    ",270],"}",["T_WHITESPACE","\n\n    ",271],["T_DOC_COMMENT","\/**\n     * Returns the formatting template for numbers\n     *\n     * @return string\n     *\/",273],["T_WHITESPACE","\n    ",277],["T_PUBLIC","public",278],["T_WHITESPACE"," ",278],["T_FUNCTION","function",278],["T_WHITESPACE"," ",278],["T_STRING","getOutputFormat",278],"(",")",["T_WHITESPACE","\n    ",278],"{",["T_WHITESPACE","\n        ",279],["T_VARIABLE","$formated",280],["T_WHITESPACE"," ",280],"=",["T_WHITESPACE"," ",280],["T_VARIABLE","$this",280],["T_OBJECT_OPERATOR","->",280],["T_STRING","formatTxt",280],"(",["T_LNUMBER","0",280],")",";",["T_WHITESPACE","\n        ",280],["T_VARIABLE","$number",281],["T_WHITESPACE"," ",281],"=",["T_WHITESPACE"," ",281],["T_VARIABLE","$this",281],["T_OBJECT_OPERATOR","->",281],["T_STRING","formatTxt",281],"(",["T_LNUMBER","0",281],",",["T_WHITESPACE"," ",281],["T_ARRAY","array",281],"(",["T_CONSTANT_ENCAPSED_STRING","'display'",281],["T_WHITESPACE"," ",281],["T_DOUBLE_ARROW","=>",281],["T_WHITESPACE"," ",281],["T_STRING","Zend_Currency",281],["T_DOUBLE_COLON","::",281],["T_STRING","NO_SYMBOL",281],")",")",";",["T_WHITESPACE","\n        ",281],["T_RETURN","return",282],["T_WHITESPACE"," ",282],["T_STRING","str_replace",282],"(",["T_VARIABLE","$number",282],",",["T_WHITESPACE"," ",282],["T_CONSTANT_ENCAPSED_STRING","'%s'",282],",",["T_WHITESPACE"," ",282],["T_VARIABLE","$formated",282],")",";",["T_WHITESPACE","\n    ",282],"}",["T_WHITESPACE","\n\n    ",283],["T_DOC_COMMENT","\/**\n     * Retrieve allowed currencies according to config\n     *\n     * @return array\n     *\/",285],["T_WHITESPACE","\n    ",289],["T_PUBLIC","public",290],["T_WHITESPACE"," ",290],["T_FUNCTION","function",290],["T_WHITESPACE"," ",290],["T_STRING","getConfigAllowCurrencies",290],"(",")",["T_WHITESPACE","\n    ",290],"{",["T_WHITESPACE","\n        ",291],["T_VARIABLE","$allowedCurrencies",292],["T_WHITESPACE"," ",292],"=",["T_WHITESPACE"," ",292],["T_VARIABLE","$this",292],["T_OBJECT_OPERATOR","->",292],["T_STRING","_getResource",292],"(",")",["T_OBJECT_OPERATOR","->",292],["T_STRING","getConfigCurrencies",292],"(",["T_VARIABLE","$this",292],",",["T_WHITESPACE"," ",292],["T_STRING","self",292],["T_DOUBLE_COLON","::",292],["T_STRING","XML_PATH_CURRENCY_ALLOW",292],")",";",["T_WHITESPACE","\n        ",292],["T_VARIABLE","$appBaseCurrencyCode",293],["T_WHITESPACE"," ",293],"=",["T_WHITESPACE"," ",293],["T_STRING","Mage",293],["T_DOUBLE_COLON","::",293],["T_STRING","app",293],"(",")",["T_OBJECT_OPERATOR","->",293],["T_STRING","getBaseCurrencyCode",293],"(",")",";",["T_WHITESPACE","\n        ",293],["T_IF","if",294],["T_WHITESPACE"," ",294],"(","!",["T_STRING","in_array",294],"(",["T_VARIABLE","$appBaseCurrencyCode",294],",",["T_WHITESPACE"," ",294],["T_VARIABLE","$allowedCurrencies",294],")",")",["T_WHITESPACE"," ",294],"{",["T_WHITESPACE","\n            ",294],["T_VARIABLE","$allowedCurrencies",295],"[","]",["T_WHITESPACE"," ",295],"=",["T_WHITESPACE"," ",295],["T_VARIABLE","$appBaseCurrencyCode",295],";",["T_WHITESPACE","\n        ",295],"}",["T_WHITESPACE","\n        ",296],["T_FOREACH","foreach",297],["T_WHITESPACE"," ",297],"(",["T_STRING","Mage",297],["T_DOUBLE_COLON","::",297],["T_STRING","app",297],"(",")",["T_OBJECT_OPERATOR","->",297],["T_STRING","getStores",297],"(",")",["T_WHITESPACE"," ",297],["T_AS","as",297],["T_WHITESPACE"," ",297],["T_VARIABLE","$store",297],")",["T_WHITESPACE"," ",297],"{",["T_WHITESPACE","\n            ",297],["T_VARIABLE","$code",298],["T_WHITESPACE"," ",298],"=",["T_WHITESPACE"," ",298],["T_VARIABLE","$store",298],["T_OBJECT_OPERATOR","->",298],["T_STRING","getBaseCurrencyCode",298],"(",")",";",["T_WHITESPACE","\n            ",298],["T_IF","if",299],["T_WHITESPACE"," ",299],"(","!",["T_STRING","in_array",299],"(",["T_VARIABLE","$code",299],",",["T_WHITESPACE"," ",299],["T_VARIABLE","$allowedCurrencies",299],")",")",["T_WHITESPACE"," ",299],"{",["T_WHITESPACE","\n                ",299],["T_VARIABLE","$allowedCurrencies",300],"[","]",["T_WHITESPACE"," ",300],"=",["T_WHITESPACE"," ",300],["T_VARIABLE","$code",300],";",["T_WHITESPACE","\n            ",300],"}",["T_WHITESPACE","\n        ",301],"}",["T_WHITESPACE","\n\n        ",302],["T_RETURN","return",304],["T_WHITESPACE"," ",304],["T_VARIABLE","$allowedCurrencies",304],";",["T_WHITESPACE","\n    ",304],"}",["T_WHITESPACE","\n\n    ",305],["T_DOC_COMMENT","\/**\n     * Retrieve default currencies according to config\n     *\n     * @return array\n     *\/",307],["T_WHITESPACE","\n    ",311],["T_PUBLIC","public",312],["T_WHITESPACE"," ",312],["T_FUNCTION","function",312],["T_WHITESPACE"," ",312],["T_STRING","getConfigDefaultCurrencies",312],"(",")",["T_WHITESPACE","\n    ",312],"{",["T_WHITESPACE","\n        ",313],["T_VARIABLE","$defaultCurrencies",314],["T_WHITESPACE"," ",314],"=",["T_WHITESPACE"," ",314],["T_VARIABLE","$this",314],["T_OBJECT_OPERATOR","->",314],["T_STRING","_getResource",314],"(",")",["T_OBJECT_OPERATOR","->",314],["T_STRING","getConfigCurrencies",314],"(",["T_VARIABLE","$this",314],",",["T_WHITESPACE"," ",314],["T_STRING","self",314],["T_DOUBLE_COLON","::",314],["T_STRING","XML_PATH_CURRENCY_DEFAULT",314],")",";",["T_WHITESPACE","\n        ",314],["T_RETURN","return",315],["T_WHITESPACE"," ",315],["T_VARIABLE","$defaultCurrencies",315],";",["T_WHITESPACE","\n    ",315],"}",["T_WHITESPACE","\n\n\n    ",316],["T_DOC_COMMENT","\/**\n     * Retrieve base currencies according to config\n     *\n     * @return array\n     *\/",319],["T_WHITESPACE","\n    ",323],["T_PUBLIC","public",324],["T_WHITESPACE"," ",324],["T_FUNCTION","function",324],["T_WHITESPACE"," ",324],["T_STRING","getConfigBaseCurrencies",324],"(",")",["T_WHITESPACE","\n    ",324],"{",["T_WHITESPACE","\n        ",325],["T_VARIABLE","$defaultCurrencies",326],["T_WHITESPACE"," ",326],"=",["T_WHITESPACE"," ",326],["T_VARIABLE","$this",326],["T_OBJECT_OPERATOR","->",326],["T_STRING","_getResource",326],"(",")",["T_OBJECT_OPERATOR","->",326],["T_STRING","getConfigCurrencies",326],"(",["T_VARIABLE","$this",326],",",["T_WHITESPACE"," ",326],["T_STRING","self",326],["T_DOUBLE_COLON","::",326],["T_STRING","XML_PATH_CURRENCY_BASE",326],")",";",["T_WHITESPACE","\n        ",326],["T_RETURN","return",327],["T_WHITESPACE"," ",327],["T_VARIABLE","$defaultCurrencies",327],";",["T_WHITESPACE","\n    ",327],"}",["T_WHITESPACE","\n\n    ",328],["T_DOC_COMMENT","\/**\n     * Retrieve currency rates to other currencies\n     *\n     * @param string $currency\n     * @param array $toCurrencies\n     * @return array\n     *\/",330],["T_WHITESPACE","\n    ",336],["T_PUBLIC","public",337],["T_WHITESPACE"," ",337],["T_FUNCTION","function",337],["T_WHITESPACE"," ",337],["T_STRING","getCurrencyRates",337],"(",["T_VARIABLE","$currency",337],",",["T_WHITESPACE"," ",337],["T_VARIABLE","$toCurrencies",337],["T_WHITESPACE"," ",337],"=",["T_WHITESPACE"," ",337],["T_STRING","null",337],")",["T_WHITESPACE","\n    ",337],"{",["T_WHITESPACE","\n        ",338],["T_IF","if",339],["T_WHITESPACE"," ",339],"(",["T_VARIABLE","$currency",339],["T_WHITESPACE"," ",339],["T_INSTANCEOF","instanceof",339],["T_WHITESPACE"," ",339],["T_STRING","Mage_Directory_Model_Currency",339],")",["T_WHITESPACE"," ",339],"{",["T_WHITESPACE","\n            ",339],["T_VARIABLE","$currency",340],["T_WHITESPACE"," ",340],"=",["T_WHITESPACE"," ",340],["T_VARIABLE","$currency",340],["T_OBJECT_OPERATOR","->",340],["T_STRING","getCode",340],"(",")",";",["T_WHITESPACE","\n        ",340],"}",["T_WHITESPACE","\n        ",341],["T_VARIABLE","$data",342],["T_WHITESPACE"," ",342],"=",["T_WHITESPACE"," ",342],["T_VARIABLE","$this",342],["T_OBJECT_OPERATOR","->",342],["T_STRING","_getResource",342],"(",")",["T_OBJECT_OPERATOR","->",342],["T_STRING","getCurrencyRates",342],"(",["T_VARIABLE","$currency",342],",",["T_WHITESPACE"," ",342],["T_VARIABLE","$toCurrencies",342],")",";",["T_WHITESPACE","\n        ",342],["T_RETURN","return",343],["T_WHITESPACE"," ",343],["T_VARIABLE","$data",343],";",["T_WHITESPACE","\n    ",343],"}",["T_WHITESPACE","\n\n    ",344],["T_DOC_COMMENT","\/**\n     * Save currency rates\n     *\n     * @param array $rates\n     * @return object\n     *\/",346],["T_WHITESPACE","\n    ",351],["T_PUBLIC","public",352],["T_WHITESPACE"," ",352],["T_FUNCTION","function",352],["T_WHITESPACE"," ",352],["T_STRING","saveRates",352],"(",["T_VARIABLE","$rates",352],")",["T_WHITESPACE","\n    ",352],"{",["T_WHITESPACE","\n        ",353],["T_VARIABLE","$this",354],["T_OBJECT_OPERATOR","->",354],["T_STRING","_getResource",354],"(",")",["T_OBJECT_OPERATOR","->",354],["T_STRING","saveRates",354],"(",["T_VARIABLE","$rates",354],")",";",["T_WHITESPACE","\n        ",354],["T_RETURN","return",355],["T_WHITESPACE"," ",355],["T_VARIABLE","$this",355],";",["T_WHITESPACE","\n    ",355],"}",["T_WHITESPACE","\n",356],"}",["T_WHITESPACE","\n",357]]
[["T_OPEN_TAG","<?php\n",1],["T_DOC_COMMENT","\/**\n * Magento\n *\n * NOTICE OF LICENSE\n *\n * This source file is subject to the Open Software License (OSL 3.0)\n * that is bundled with this package in the file LICENSE.txt.\n * It is also available through the world-wide-web at this URL:\n * http:\/\/opensource.org\/licenses\/osl-3.0.php\n * If you did not receive a copy of the license and are unable to\n * obtain it through the world-wide-web, please send an email\n * to license@magento.com so we can send you a copy immediately.\n *\n * DISCLAIMER\n *\n * Do not edit or add to this file if you wish to upgrade Magento to newer\n * versions in the future. If you wish to customize Magento for your\n * needs please refer to http:\/\/www.magento.com for more information.\n *\n * @category    Mage\n * @package     Mage_Directory\n * @copyright  Copyright (c) 2006-2016 X.commerce, Inc. and affiliates (http:\/\/www.magento.com)\n * @license    http:\/\/opensource.org\/licenses\/osl-3.0.php  Open Software License (OSL 3.0)\n *\/",2],["T_WHITESPACE","\n\n\n",25],["T_DOC_COMMENT","\/**\n * Country collection\n *\n * @category    Mage\n * @package     Mage_Directory\n * @author      Magento Core Team <core@magentocommerce.com>\n *\/",28],["T_WHITESPACE","\n",34],["T_CLASS","class",35],["T_WHITESPACE"," ",35],["T_STRING","Mage_Directory_Model_Resource_Region_Collection",35],["T_WHITESPACE"," ",35],["T_EXTENDS","extends",35],["T_WHITESPACE"," ",35],["T_STRING","Mage_Core_Model_Resource_Db_Collection_Abstract",35],["T_WHITESPACE","\n",35],"{",["T_WHITESPACE","\n    ",36],["T_DOC_COMMENT","\/**\n     * Locale region name table name\n     *\n     * @var string\n     *\/",37],["T_WHITESPACE","\n    ",41],["T_PROTECTED","protected",42],["T_WHITESPACE"," ",42],["T_VARIABLE","$_regionNameTable",42],";",["T_WHITESPACE","\n\n    ",42],["T_DOC_COMMENT","\/**\n     * Country table name\n     *\n     * @var string\n     *\/",44],["T_WHITESPACE","\n    ",48],["T_PROTECTED","protected",49],["T_WHITESPACE"," ",49],["T_VARIABLE","$_countryTable",49],";",["T_WHITESPACE","\n\n    ",49],["T_DOC_COMMENT","\/**\n     * Define main, country, locale region name tables\n     *\n     *\/",51],["T_WHITESPACE","\n    ",54],["T_PROTECTED","protected",55],["T_WHITESPACE"," ",55],["T_FUNCTION","function",55],["T_WHITESPACE"," ",55],["T_STRING","_construct",55],"(",")",["T_WHITESPACE","\n    ",55],"{",["T_WHITESPACE","\n        ",56],["T_VARIABLE","$this",57],["T_OBJECT_OPERATOR","->",57],["T_STRING","_init",57],"(",["T_CONSTANT_ENCAPSED_STRING","'directory\/region'",57],")",";",["T_WHITESPACE","\n\n        ",57],["T_VARIABLE","$this",59],["T_OBJECT_OPERATOR","->",59],["T_STRING","_countryTable",59],["T_WHITESPACE","    ",59],"=",["T_WHITESPACE"," ",59],["T_VARIABLE","$this",59],["T_OBJECT_OPERATOR","->",59],["T_STRING","getTable",59],"(",["T_CONSTANT_ENCAPSED_STRING","'directory\/country'",59],")",";",["T_WHITESPACE","\n        ",59],["T_VARIABLE","$this",60],["T_OBJECT_OPERATOR","->",60],["T_STRING","_regionNameTable",60],["T_WHITESPACE"," ",60],"=",["T_WHITESPACE"," ",60],["T_VARIABLE","$this",60],["T_OBJECT_OPERATOR","->",60],["T_STRING","getTable",60],"(",["T_CONSTANT_ENCAPSED_STRING","'directory\/country_region_name'",60],")",";",["T_WHITESPACE","\n\n        ",60],["T_VARIABLE","$this",62],["T_OBJECT_OPERATOR","->",62],["T_STRING","addOrder",62],"(",["T_CONSTANT_ENCAPSED_STRING","'name'",62],",",["T_WHITESPACE"," ",62],["T_STRING","Varien_Data_Collection",62],["T_DOUBLE_COLON","::",62],["T_STRING","SORT_ORDER_ASC",62],")",";",["T_WHITESPACE","\n        ",62],["T_VARIABLE","$this",63],["T_OBJECT_OPERATOR","->",63],["T_STRING","addOrder",63],"(",["T_CONSTANT_ENCAPSED_STRING","'default_name'",63],",",["T_WHITESPACE"," ",63],["T_STRING","Varien_Data_Collection",63],["T_DOUBLE_COLON","::",63],["T_STRING","SORT_ORDER_ASC",63],")",";",["T_WHITESPACE","\n    ",63],"}",["T_WHITESPACE","\n\n    ",64],["T_DOC_COMMENT","\/**\n     * Initialize select object\n     *\n     * @return Mage_Directory_Model_Resource_Region_Collection\n     *\/",66],["T_WHITESPACE","\n    ",70],["T_PROTECTED","protected",71],["T_WHITESPACE"," ",71],["T_FUNCTION","function",71],["T_WHITESPACE"," ",71],["T_STRING","_initSelect",71],"(",")",["T_WHITESPACE","\n    ",71],"{",["T_WHITESPACE","\n        ",72],["T_STRING","parent",73],["T_DOUBLE_COLON","::",73],["T_STRING","_initSelect",73],"(",")",";",["T_WHITESPACE","\n        ",73],["T_VARIABLE","$locale",74],["T_WHITESPACE"," ",74],"=",["T_WHITESPACE"," ",74],["T_STRING","Mage",74],["T_DOUBLE_COLON","::",74],["T_STRING","app",74],"(",")",["T_OBJECT_OPERATOR","->",74],["T_STRING","getLocale",74],"(",")",["T_OBJECT_OPERATOR","->",74],["T_STRING","getLocaleCode",74],"(",")",";",["T_WHITESPACE","\n\n        ",74],["T_VARIABLE","$this",76],["T_OBJECT_OPERATOR","->",76],["T_STRING","addBindParam",76],"(",["T_CONSTANT_ENCAPSED_STRING","':region_locale'",76],",",["T_WHITESPACE"," ",76],["T_VARIABLE","$locale",76],")",";",["T_WHITESPACE","\n        ",76],["T_VARIABLE","$this",77],["T_OBJECT_OPERATOR","->",77],["T_STRING","getSelect",77],"(",")",["T_OBJECT_OPERATOR","->",77],["T_STRING","joinLeft",77],"(",["T_WHITESPACE","\n            ",77],["T_ARRAY","array",78],"(",["T_CONSTANT_ENCAPSED_STRING","'rname'",78],["T_WHITESPACE"," ",78],["T_DOUBLE_ARROW","=>",78],["T_WHITESPACE"," ",78],["T_VARIABLE","$this",78],["T_OBJECT_OPERATOR","->",78],["T_STRING","_regionNameTable",78],")",",",["T_WHITESPACE","\n            ",78],["T_CONSTANT_ENCAPSED_STRING","'main_table.region_id = rname.region_id AND rname.locale = :region_locale'",79],",",["T_WHITESPACE","\n            ",79],["T_ARRAY","array",80],"(",["T_CONSTANT_ENCAPSED_STRING","'name'",80],")",")",";",["T_WHITESPACE","\n\n        ",80],["T_RETURN","return",82],["T_WHITESPACE"," ",82],["T_VARIABLE","$this",82],";",["T_WHITESPACE","\n    ",82],"}",["T_WHITESPACE","\n\n    ",83],["T_DOC_COMMENT","\/**\n     * Filter by country_id\n     *\n     * @param string|array $countryId\n     * @return Mage_Directory_Model_Resource_Region_Collection\n     *\/",85],["T_WHITESPACE","\n    ",90],["T_PUBLIC","public",91],["T_WHITESPACE"," ",91],["T_FUNCTION","function",91],["T_WHITESPACE"," ",91],["T_STRING","addCountryFilter",91],"(",["T_VARIABLE","$countryId",91],")",["T_WHITESPACE","\n    ",91],"{",["T_WHITESPACE","\n        ",92],["T_IF","if",93],["T_WHITESPACE"," ",93],"(","!",["T_EMPTY","empty",93],"(",["T_VARIABLE","$countryId",93],")",")",["T_WHITESPACE"," ",93],"{",["T_WHITESPACE","\n            ",93],["T_IF","if",94],["T_WHITESPACE"," ",94],"(",["T_STRING","is_array",94],"(",["T_VARIABLE","$countryId",94],")",")",["T_WHITESPACE"," ",94],"{",["T_WHITESPACE","\n                ",94],["T_VARIABLE","$this",95],["T_OBJECT_OPERATOR","->",95],["T_STRING","addFieldToFilter",95],"(",["T_CONSTANT_ENCAPSED_STRING","'main_table.country_id'",95],",",["T_WHITESPACE"," ",95],["T_ARRAY","array",95],"(",["T_CONSTANT_ENCAPSED_STRING","'in'",95],["T_WHITESPACE"," ",95],["T_DOUBLE_ARROW","=>",95],["T_WHITESPACE"," ",95],["T_VARIABLE","$countryId",95],")",")",";",["T_WHITESPACE","\n            ",95],"}",["T_WHITESPACE"," ",96],["T_ELSE","else",96],["T_WHITESPACE"," ",96],"{",["T_WHITESPACE","\n                ",96],["T_VARIABLE","$this",97],["T_OBJECT_OPERATOR","->",97],["T_STRING","addFieldToFilter",97],"(",["T_CONSTANT_ENCAPSED_STRING","'main_table.country_id'",97],",",["T_WHITESPACE"," ",97],["T_VARIABLE","$countryId",97],")",";",["T_WHITESPACE","\n            ",97],"}",["T_WHITESPACE","\n        ",98],"}",["T_WHITESPACE","\n        ",99],["T_RETURN","return",100],["T_WHITESPACE"," ",100],["T_VARIABLE","$this",100],";",["T_WHITESPACE","\n    ",100],"}",["T_WHITESPACE","\n\n    ",101],["T_DOC_COMMENT","\/**\n     * Filter by country code (ISO 3)\n     *\n     * @param string $countryCode\n     * @return Mage_Directory_Model_Resource_Region_Collection\n     *\/",103],["T_WHITESPACE","\n    ",108],["T_PUBLIC","public",109],["T_WHITESPACE"," ",109],["T_FUNCTION","function",109],["T_WHITESPACE"," ",109],["T_STRING","addCountryCodeFilter",109],"(",["T_VARIABLE","$countryCode",109],")",["T_WHITESPACE","\n    ",109],"{",["T_WHITESPACE","\n        ",110],["T_VARIABLE","$this",111],["T_OBJECT_OPERATOR","->",111],["T_STRING","getSelect",111],"(",")",["T_WHITESPACE","\n            ",111],["T_OBJECT_OPERATOR","->",112],["T_STRING","joinLeft",112],"(",["T_WHITESPACE","\n                ",112],["T_ARRAY","array",113],"(",["T_CONSTANT_ENCAPSED_STRING","'country'",113],["T_WHITESPACE"," ",113],["T_DOUBLE_ARROW","=>",113],["T_WHITESPACE"," ",113],["T_VARIABLE","$this",113],["T_OBJECT_OPERATOR","->",113],["T_STRING","_countryTable",113],")",",",["T_WHITESPACE","\n                ",113],["T_CONSTANT_ENCAPSED_STRING","'main_table.country_id = country.country_id'",114],["T_WHITESPACE","\n                ",114],")",["T_WHITESPACE","\n            ",115],["T_OBJECT_OPERATOR","->",116],["T_STRING","where",116],"(",["T_CONSTANT_ENCAPSED_STRING","'country.iso3_code = ?'",116],",",["T_WHITESPACE"," ",116],["T_VARIABLE","$countryCode",116],")",";",["T_WHITESPACE","\n\n        ",116],["T_RETURN","return",118],["T_WHITESPACE"," ",118],["T_VARIABLE","$this",118],";",["T_WHITESPACE","\n    ",118],"}",["T_WHITESPACE","\n\n    ",119],["T_DOC_COMMENT","\/**\n     * Filter by Region code\n     *\n     * @param string|array $regionCode\n     * @return Mage_Directory_Model_Resource_Region_Collection\n     *\/",121],["T_WHITESPACE","\n    ",126],["T_PUBLIC","public",127],["T_WHITESPACE"," ",127],["T_FUNCTION","function",127],["T_WHITESPACE"," ",127],["T_STRING","addRegionCodeFilter",127],"(",["T_VARIABLE","$regionCode",127],")",["T_WHITESPACE","\n    ",127],"{",["T_WHITESPACE","\n        ",128],["T_IF","if",129],["T_WHITESPACE"," ",129],"(","!",["T_EMPTY","empty",129],"(",["T_VARIABLE","$regionCode",129],")",")",["T_WHITESPACE"," ",129],"{",["T_WHITESPACE","\n            ",129],["T_IF","if",130],["T_WHITESPACE"," ",130],"(",["T_STRING","is_array",130],"(",["T_VARIABLE","$regionCode",130],")",")",["T_WHITESPACE"," ",130],"{",["T_WHITESPACE","\n                ",130],["T_VARIABLE","$this",131],["T_OBJECT_OPERATOR","->",131],["T_STRING","addFieldToFilter",131],"(",["T_CONSTANT_ENCAPSED_STRING","'main_table.code'",131],",",["T_WHITESPACE"," ",131],["T_ARRAY","array",131],"(",["T_CONSTANT_ENCAPSED_STRING","'in'",131],["T_WHITESPACE"," ",131],["T_DOUBLE_ARROW","=>",131],["T_WHITESPACE"," ",131],["T_VARIABLE","$regionCode",131],")",")",";",["T_WHITESPACE","\n            ",131],"}",["T_WHITESPACE"," ",132],["T_ELSE","else",132],["T_WHITESPACE"," ",132],"{",["T_WHITESPACE","\n                ",132],["T_VARIABLE","$this",133],["T_OBJECT_OPERATOR","->",133],["T_STRING","addFieldToFilter",133],"(",["T_CONSTANT_ENCAPSED_STRING","'main_table.code'",133],",",["T_WHITESPACE"," ",133],["T_VARIABLE","$regionCode",133],")",";",["T_WHITESPACE","\n            ",133],"}",["T_WHITESPACE","\n        ",134],"}",["T_WHITESPACE","\n        ",135],["T_RETURN","return",136],["T_WHITESPACE"," ",136],["T_VARIABLE","$this",136],";",["T_WHITESPACE","\n    ",136],"}",["T_WHITESPACE","\n\n    ",137],["T_DOC_COMMENT","\/**\n     * Filter by region name\n     *\n     * @param string|array $regionName\n     * @return Mage_Directory_Model_Resource_Region_Collection\n     *\/",139],["T_WHITESPACE","\n    ",144],["T_PUBLIC","public",145],["T_WHITESPACE"," ",145],["T_FUNCTION","function",145],["T_WHITESPACE"," ",145],["T_STRING","addRegionNameFilter",145],"(",["T_VARIABLE","$regionName",145],")",["T_WHITESPACE","\n    ",145],"{",["T_WHITESPACE","\n        ",146],["T_IF","if",147],["T_WHITESPACE"," ",147],"(","!",["T_EMPTY","empty",147],"(",["T_VARIABLE","$regionName",147],")",")",["T_WHITESPACE"," ",147],"{",["T_WHITESPACE","\n            ",147],["T_IF","if",148],["T_WHITESPACE"," ",148],"(",["T_STRING","is_array",148],"(",["T_VARIABLE","$regionName",148],")",")",["T_WHITESPACE"," ",148],"{",["T_WHITESPACE","\n                ",148],["T_VARIABLE","$this",149],["T_OBJECT_OPERATOR","->",149],["T_STRING","addFieldToFilter",149],"(",["T_CONSTANT_ENCAPSED_STRING","'main_table.default_name'",149],",",["T_WHITESPACE"," ",149],["T_ARRAY","array",149],"(",["T_CONSTANT_ENCAPSED_STRING","'in'",149],["T_WHITESPACE"," ",149],["T_DOUBLE_ARROW","=>",149],["T_WHITESPACE"," ",149],["T_VARIABLE","$regionName",149],")",")",";",["T_WHITESPACE","\n            ",149],"}",["T_WHITESPACE"," ",150],["T_ELSE","else",150],["T_WHITESPACE"," ",150],"{",["T_WHITESPACE","\n                ",150],["T_VARIABLE","$this",151],["T_OBJECT_OPERATOR","->",151],["T_STRING","addFieldToFilter",151],"(",["T_CONSTANT_ENCAPSED_STRING","'main_table.default_name'",151],",",["T_WHITESPACE"," ",151],["T_VARIABLE","$regionName",151],")",";",["T_WHITESPACE","\n            ",151],"}",["T_WHITESPACE","\n        ",152],"}",["T_WHITESPACE","\n        ",153],["T_RETURN","return",154],["T_WHITESPACE"," ",154],["T_VARIABLE","$this",154],";",["T_WHITESPACE","\n    ",154],"}",["T_WHITESPACE","\n\n    ",155],["T_DOC_COMMENT","\/**\n     * Filter region by its code or name\n     *\n     * @param string|array $region\n     * @return Mage_Directory_Model_Resource_Region_Collection\n     *\/",157],["T_WHITESPACE","\n    ",162],["T_PUBLIC","public",163],["T_WHITESPACE"," ",163],["T_FUNCTION","function",163],["T_WHITESPACE"," ",163],["T_STRING","addRegionCodeOrNameFilter",163],"(",["T_VARIABLE","$region",163],")",["T_WHITESPACE","\n    ",163],"{",["T_WHITESPACE","\n        ",164],["T_IF","if",165],["T_WHITESPACE"," ",165],"(","!",["T_EMPTY","empty",165],"(",["T_VARIABLE","$region",165],")",")",["T_WHITESPACE"," ",165],"{",["T_WHITESPACE","\n            ",165],["T_VARIABLE","$condition",166],["T_WHITESPACE"," ",166],"=",["T_WHITESPACE"," ",166],["T_STRING","is_array",166],"(",["T_VARIABLE","$region",166],")",["T_WHITESPACE"," ",166],"?",["T_WHITESPACE"," ",166],["T_ARRAY","array",166],"(",["T_CONSTANT_ENCAPSED_STRING","'in'",166],["T_WHITESPACE"," ",166],["T_DOUBLE_ARROW","=>",166],["T_WHITESPACE"," ",166],["T_VARIABLE","$region",166],")",["T_WHITESPACE"," ",166],":",["T_WHITESPACE"," ",166],["T_VARIABLE","$region",166],";",["T_WHITESPACE","\n            ",166],["T_VARIABLE","$this",167],["T_OBJECT_OPERATOR","->",167],["T_STRING","addFieldToFilter",167],"(",["T_ARRAY","array",167],"(",["T_CONSTANT_ENCAPSED_STRING","'main_table.code'",167],",",["T_WHITESPACE"," ",167],["T_CONSTANT_ENCAPSED_STRING","'main_table.default_name'",167],")",",",["T_WHITESPACE"," ",167],["T_ARRAY","array",167],"(",["T_VARIABLE","$condition",167],",",["T_WHITESPACE"," ",167],["T_VARIABLE","$condition",167],")",")",";",["T_WHITESPACE","\n        ",167],"}",["T_WHITESPACE","\n        ",168],["T_RETURN","return",169],["T_WHITESPACE"," ",169],["T_VARIABLE","$this",169],";",["T_WHITESPACE","\n    ",169],"}",["T_WHITESPACE","\n\n    ",170],["T_DOC_COMMENT","\/**\n     * Convert collection items to select options array\n     *\n     * @return array\n     *\/",172],["T_WHITESPACE","\n    ",176],["T_PUBLIC","public",177],["T_WHITESPACE"," ",177],["T_FUNCTION","function",177],["T_WHITESPACE"," ",177],["T_STRING","toOptionArray",177],"(",")",["T_WHITESPACE","\n    ",177],"{",["T_WHITESPACE","\n        ",178],["T_VARIABLE","$options",179],["T_WHITESPACE"," ",179],"=",["T_WHITESPACE"," ",179],["T_VARIABLE","$this",179],["T_OBJECT_OPERATOR","->",179],["T_STRING","_toOptionArray",179],"(",["T_CONSTANT_ENCAPSED_STRING","'region_id'",179],",",["T_WHITESPACE"," ",179],["T_CONSTANT_ENCAPSED_STRING","'default_name'",179],",",["T_WHITESPACE"," ",179],["T_ARRAY","array",179],"(",["T_CONSTANT_ENCAPSED_STRING","'title'",179],["T_WHITESPACE"," ",179],["T_DOUBLE_ARROW","=>",179],["T_WHITESPACE"," ",179],["T_CONSTANT_ENCAPSED_STRING","'default_name'",179],")",")",";",["T_WHITESPACE","\n        ",179],["T_IF","if",180],["T_WHITESPACE"," ",180],"(",["T_STRING","count",180],"(",["T_VARIABLE","$options",180],")",["T_WHITESPACE"," ",180],">",["T_WHITESPACE"," ",180],["T_LNUMBER","0",180],")",["T_WHITESPACE"," ",180],"{",["T_WHITESPACE","\n            ",180],["T_STRING","array_unshift",181],"(",["T_VARIABLE","$options",181],",",["T_WHITESPACE"," ",181],["T_ARRAY","array",181],"(",["T_WHITESPACE","\n                ",181],["T_CONSTANT_ENCAPSED_STRING","'title '",182],["T_DOUBLE_ARROW","=>",182],["T_WHITESPACE"," ",182],["T_STRING","null",182],",",["T_WHITESPACE","\n                ",182],["T_CONSTANT_ENCAPSED_STRING","'value'",183],["T_WHITESPACE"," ",183],["T_DOUBLE_ARROW","=>",183],["T_WHITESPACE"," ",183],["T_CONSTANT_ENCAPSED_STRING","\"\"",183],",",["T_WHITESPACE","\n                ",183],["T_CONSTANT_ENCAPSED_STRING","'label'",184],["T_WHITESPACE"," ",184],["T_DOUBLE_ARROW","=>",184],["T_WHITESPACE"," ",184],["T_STRING","Mage",184],["T_DOUBLE_COLON","::",184],["T_STRING","helper",184],"(",["T_CONSTANT_ENCAPSED_STRING","'directory'",184],")",["T_OBJECT_OPERATOR","->",184],["T_STRING","__",184],"(",["T_CONSTANT_ENCAPSED_STRING","'-- Please select --'",184],")",["T_WHITESPACE","\n            ",184],")",")",";",["T_WHITESPACE","\n        ",185],"}",["T_WHITESPACE","\n        ",186],["T_RETURN","return",187],["T_WHITESPACE"," ",187],["T_VARIABLE","$options",187],";",["T_WHITESPACE","\n    ",187],"}",["T_WHITESPACE","\n",188],"}",["T_WHITESPACE","\n",189]]
[["T_OPEN_TAG","<?php\n",1],["T_DOC_COMMENT","\/**\n * Magento\n *\n * NOTICE OF LICENSE\n *\n * This source file is subject to the Open Software License (OSL 3.0)\n * that is bundled with this package in the file LICENSE.txt.\n * It is also available through the world-wide-web at this URL:\n * http:\/\/opensource.org\/licenses\/osl-3.0.php\n * If you did not receive a copy of the license and are unable to\n * obtain it through the world-wide-web, please send an email\n * to license@magento.com so we can send you a copy immediately.\n *\n * DISCLAIMER\n *\n * Do not edit or add to this file if you wish to upgrade Magento to newer\n * versions in the future. If you wish to customize Magento for your\n * needs please refer to http:\/\/www.magento.com for more information.\n *\n * @category    Mage\n * @package     Mage_Directory\n * @copyright  Copyright (c) 2006-2016 X.commerce, Inc. and affiliates (http:\/\/www.magento.com)\n * @license    http:\/\/opensource.org\/licenses\/osl-3.0.php  Open Software License (OSL 3.0)\n *\/",2],["T_WHITESPACE","\n\n",25],["T_DOC_COMMENT","\/**\n * Country model\n *\n * @method Mage_Directory_Model_Resource_Country _getResource()\n * @method Mage_Directory_Model_Resource_Country getResource()\n * @method string getCountryId()\n * @method Mage_Directory_Model_Country setCountryId(string $value)\n * @method string getIso2Code()\n * @method Mage_Directory_Model_Country setIso2Code(string $value)\n * @method string getIso3Code()\n * @method Mage_Directory_Model_Country setIso3Code(string $value)\n *\n * @category    Mage\n * @package     Mage_Directory\n * @author      Magento Core Team <core@magentocommerce.com>\n *\/",27],["T_WHITESPACE","\n",42],["T_CLASS","class",43],["T_WHITESPACE"," ",43],["T_STRING","Mage_Directory_Model_Country",43],["T_WHITESPACE"," ",43],["T_EXTENDS","extends",43],["T_WHITESPACE"," ",43],["T_STRING","Mage_Core_Model_Abstract",43],["T_WHITESPACE","\n",43],"{",["T_WHITESPACE","\n    ",44],["T_STATIC","static",45],["T_WHITESPACE"," ",45],["T_PUBLIC","public",45],["T_WHITESPACE"," ",45],["T_VARIABLE","$_format",45],["T_WHITESPACE"," ",45],"=",["T_WHITESPACE"," ",45],["T_ARRAY","array",45],"(",")",";",["T_WHITESPACE","\n\n    ",45],["T_PROTECTED","protected",47],["T_WHITESPACE"," ",47],["T_FUNCTION","function",47],["T_WHITESPACE"," ",47],["T_STRING","_construct",47],"(",")",["T_WHITESPACE","\n    ",47],"{",["T_WHITESPACE","\n        ",48],["T_VARIABLE","$this",49],["T_OBJECT_OPERATOR","->",49],["T_STRING","_init",49],"(",["T_CONSTANT_ENCAPSED_STRING","'directory\/country'",49],")",";",["T_WHITESPACE","\n    ",49],"}",["T_WHITESPACE","\n\n    ",50],["T_PUBLIC","public",52],["T_WHITESPACE"," ",52],["T_FUNCTION","function",52],["T_WHITESPACE"," ",52],["T_STRING","loadByCode",52],"(",["T_VARIABLE","$code",52],")",["T_WHITESPACE","\n    ",52],"{",["T_WHITESPACE","\n        ",53],["T_VARIABLE","$this",54],["T_OBJECT_OPERATOR","->",54],["T_STRING","_getResource",54],"(",")",["T_OBJECT_OPERATOR","->",54],["T_STRING","loadByCode",54],"(",["T_VARIABLE","$this",54],",",["T_WHITESPACE"," ",54],["T_VARIABLE","$code",54],")",";",["T_WHITESPACE","\n        ",54],["T_RETURN","return",55],["T_WHITESPACE"," ",55],["T_VARIABLE","$this",55],";",["T_WHITESPACE","\n    ",55],"}",["T_WHITESPACE","\n\n    ",56],["T_PUBLIC","public",58],["T_WHITESPACE"," ",58],["T_FUNCTION","function",58],["T_WHITESPACE"," ",58],["T_STRING","getRegions",58],"(",")",["T_WHITESPACE","\n    ",58],"{",["T_WHITESPACE","\n        ",59],["T_RETURN","return",60],["T_WHITESPACE"," ",60],["T_VARIABLE","$this",60],["T_OBJECT_OPERATOR","->",60],["T_STRING","getLoadedRegionCollection",60],"(",")",";",["T_WHITESPACE","\n    ",60],"}",["T_WHITESPACE","\n\n    ",61],["T_PUBLIC","public",63],["T_WHITESPACE"," ",63],["T_FUNCTION","function",63],["T_WHITESPACE"," ",63],["T_STRING","getLoadedRegionCollection",63],"(",")",["T_WHITESPACE","\n    ",63],"{",["T_WHITESPACE","\n        ",64],["T_VARIABLE","$collection",65],["T_WHITESPACE"," ",65],"=",["T_WHITESPACE"," ",65],["T_VARIABLE","$this",65],["T_OBJECT_OPERATOR","->",65],["T_STRING","getRegionCollection",65],"(",")",";",["T_WHITESPACE","\n        ",65],["T_VARIABLE","$collection",66],["T_OBJECT_OPERATOR","->",66],["T_STRING","load",66],"(",")",";",["T_WHITESPACE","\n        ",66],["T_RETURN","return",67],["T_WHITESPACE"," ",67],["T_VARIABLE","$collection",67],";",["T_WHITESPACE","\n    ",67],"}",["T_WHITESPACE","\n\n    ",68],["T_PUBLIC","public",70],["T_WHITESPACE"," ",70],["T_FUNCTION","function",70],["T_WHITESPACE"," ",70],["T_STRING","getRegionCollection",70],"(",")",["T_WHITESPACE","\n    ",70],"{",["T_WHITESPACE","\n        ",71],["T_VARIABLE","$collection",72],["T_WHITESPACE"," ",72],"=",["T_WHITESPACE"," ",72],["T_STRING","Mage",72],["T_DOUBLE_COLON","::",72],["T_STRING","getResourceModel",72],"(",["T_CONSTANT_ENCAPSED_STRING","'directory\/region_collection'",72],")",";",["T_WHITESPACE","\n        ",72],["T_VARIABLE","$collection",73],["T_OBJECT_OPERATOR","->",73],["T_STRING","addCountryFilter",73],"(",["T_VARIABLE","$this",73],["T_OBJECT_OPERATOR","->",73],["T_STRING","getId",73],"(",")",")",";",["T_WHITESPACE","\n        ",73],["T_RETURN","return",74],["T_WHITESPACE"," ",74],["T_VARIABLE","$collection",74],";",["T_WHITESPACE","\n    ",74],"}",["T_WHITESPACE","\n\n    ",75],["T_PUBLIC","public",77],["T_WHITESPACE"," ",77],["T_FUNCTION","function",77],["T_WHITESPACE"," ",77],["T_STRING","formatAddress",77],"(",["T_STRING","Varien_Object",77],["T_WHITESPACE"," ",77],["T_VARIABLE","$address",77],",",["T_WHITESPACE"," ",77],["T_VARIABLE","$html",77],"=",["T_STRING","false",77],")",["T_WHITESPACE","\n    ",77],"{",["T_WHITESPACE","\n        ",78],["T_COMMENT","\/\/TODO: is it still used?\n",79],["T_WHITESPACE","        ",80],["T_VARIABLE","$address",80],["T_OBJECT_OPERATOR","->",80],["T_STRING","getRegion",80],"(",")",";",["T_WHITESPACE","\n        ",80],["T_VARIABLE","$address",81],["T_OBJECT_OPERATOR","->",81],["T_STRING","getCountry",81],"(",")",";",["T_WHITESPACE","\n\n\n\n        ",81],["T_VARIABLE","$template",85],["T_WHITESPACE"," ",85],"=",["T_WHITESPACE"," ",85],["T_VARIABLE","$this",85],["T_OBJECT_OPERATOR","->",85],["T_STRING","getData",85],"(",["T_CONSTANT_ENCAPSED_STRING","'address_template_'",85],".","(",["T_VARIABLE","$html",85],["T_WHITESPACE"," ",85],"?",["T_WHITESPACE"," ",85],["T_CONSTANT_ENCAPSED_STRING","'html'",85],["T_WHITESPACE"," ",85],":",["T_WHITESPACE"," ",85],["T_CONSTANT_ENCAPSED_STRING","'plain'",85],")",")",";",["T_WHITESPACE","\n        ",85],["T_IF","if",86],["T_WHITESPACE"," ",86],"(",["T_EMPTY","empty",86],"(",["T_VARIABLE","$template",86],")",")",["T_WHITESPACE"," ",86],"{",["T_WHITESPACE","\n            ",86],["T_IF","if",87],["T_WHITESPACE"," ",87],"(","!",["T_VARIABLE","$this",87],["T_OBJECT_OPERATOR","->",87],["T_STRING","getId",87],"(",")",")",["T_WHITESPACE"," ",87],"{",["T_WHITESPACE","\n                ",87],["T_VARIABLE","$template",88],["T_WHITESPACE"," ",88],"=",["T_WHITESPACE"," ",88],["T_CONSTANT_ENCAPSED_STRING","'{{firstname}} {{lastname}}'",88],";",["T_WHITESPACE","\n            ",88],"}",["T_WHITESPACE"," ",89],["T_ELSEIF","elseif",89],["T_WHITESPACE"," ",89],"(","!",["T_VARIABLE","$html",89],")",["T_WHITESPACE"," ",89],"{",["T_WHITESPACE","\n                ",89],["T_VARIABLE","$template",90],["T_WHITESPACE"," ",90],"=",["T_WHITESPACE"," ",90],["T_CONSTANT_ENCAPSED_STRING","\"{{firstname}} {{lastname}}\n{{company}}\n{{street1}}\n{{street2}}\n{{city}}, {{region}} {{postcode}}\"",90],";",["T_WHITESPACE","\n            ",94],"}",["T_WHITESPACE"," ",95],["T_ELSE","else",95],["T_WHITESPACE"," ",95],"{",["T_WHITESPACE","\n                ",95],["T_VARIABLE","$template",96],["T_WHITESPACE"," ",96],"=",["T_WHITESPACE"," ",96],["T_CONSTANT_ENCAPSED_STRING","\"{{firstname}} {{lastname}}<br\/>\n{{street}}<br\/>\n{{city}}, {{region}} {{postcode}}<br\/>\nT: {{telephone}}\"",96],";",["T_WHITESPACE","\n            ",99],"}",["T_WHITESPACE","\n        ",100],"}",["T_WHITESPACE","\n\n        ",101],["T_VARIABLE","$filter",103],["T_WHITESPACE"," ",103],"=",["T_WHITESPACE"," ",103],["T_NEW","new",103],["T_WHITESPACE"," ",103],["T_STRING","Varien_Filter_Template_Simple",103],"(",")",";",["T_WHITESPACE","\n        ",103],["T_VARIABLE","$addressText",104],["T_WHITESPACE"," ",104],"=",["T_WHITESPACE"," ",104],["T_VARIABLE","$filter",104],["T_OBJECT_OPERATOR","->",104],["T_STRING","setData",104],"(",["T_VARIABLE","$address",104],["T_OBJECT_OPERATOR","->",104],["T_STRING","getData",104],"(",")",")",["T_OBJECT_OPERATOR","->",104],["T_STRING","filter",104],"(",["T_VARIABLE","$template",104],")",";",["T_WHITESPACE","\n\n        ",104],["T_IF","if",106],["T_WHITESPACE"," ",106],"(",["T_VARIABLE","$html",106],")",["T_WHITESPACE"," ",106],"{",["T_WHITESPACE","\n            ",106],["T_VARIABLE","$addressText",107],["T_WHITESPACE"," ",107],"=",["T_WHITESPACE"," ",107],["T_STRING","preg_replace",107],"(",["T_CONSTANT_ENCAPSED_STRING","'#(<br\\s*\/?>\\s*){2,}#im'",107],",",["T_WHITESPACE"," ",107],["T_CONSTANT_ENCAPSED_STRING","'<br\/>'",107],",",["T_WHITESPACE"," ",107],["T_VARIABLE","$addressText",107],")",";",["T_WHITESPACE","\n        ",107],"}",["T_WHITESPACE"," ",108],["T_ELSE","else",108],["T_WHITESPACE"," ",108],"{",["T_WHITESPACE","\n            ",108],["T_VARIABLE","$addressText",109],["T_WHITESPACE"," ",109],"=",["T_WHITESPACE"," ",109],["T_STRING","preg_replace",109],"(",["T_CONSTANT_ENCAPSED_STRING","'#(\\n\\s*){2,}#m'",109],",",["T_WHITESPACE"," ",109],["T_CONSTANT_ENCAPSED_STRING","\"\\n\"",109],",",["T_WHITESPACE"," ",109],["T_VARIABLE","$addressText",109],")",";",["T_WHITESPACE","\n        ",109],"}",["T_WHITESPACE","\n\n        ",110],["T_RETURN","return",112],["T_WHITESPACE"," ",112],["T_VARIABLE","$addressText",112],";",["T_WHITESPACE","\n    ",112],"}",["T_WHITESPACE","\n\n    ",113],["T_DOC_COMMENT","\/**\n     * Retrive formats for\n     *\n     * @return Mage_Directory_Model_Resource_Country_Format_Collection\n     *\/",115],["T_WHITESPACE","\n    ",119],["T_PUBLIC","public",120],["T_WHITESPACE"," ",120],["T_FUNCTION","function",120],["T_WHITESPACE"," ",120],["T_STRING","getFormats",120],"(",")",["T_WHITESPACE","\n    ",120],"{",["T_WHITESPACE","\n        ",121],["T_IF","if",122],["T_WHITESPACE"," ",122],"(","!",["T_ISSET","isset",122],"(",["T_STRING","self",122],["T_DOUBLE_COLON","::",122],["T_VARIABLE","$_format",122],"[",["T_VARIABLE","$this",122],["T_OBJECT_OPERATOR","->",122],["T_STRING","getId",122],"(",")","]",")",["T_WHITESPACE"," ",122],["T_BOOLEAN_AND","&&",122],["T_WHITESPACE"," ",122],["T_VARIABLE","$this",122],["T_OBJECT_OPERATOR","->",122],["T_STRING","getId",122],"(",")",")",["T_WHITESPACE"," ",122],"{",["T_WHITESPACE","\n            ",122],["T_STRING","self",123],["T_DOUBLE_COLON","::",123],["T_VARIABLE","$_format",123],"[",["T_VARIABLE","$this",123],["T_OBJECT_OPERATOR","->",123],["T_STRING","getId",123],"(",")","]",["T_WHITESPACE"," ",123],"=",["T_WHITESPACE"," ",123],["T_STRING","Mage",123],["T_DOUBLE_COLON","::",123],["T_STRING","getModel",123],"(",["T_CONSTANT_ENCAPSED_STRING","'directory\/country_format'",123],")",["T_WHITESPACE","\n                                                ",123],["T_OBJECT_OPERATOR","->",124],["T_STRING","getCollection",124],"(",")",["T_WHITESPACE","\n                                                ",124],["T_OBJECT_OPERATOR","->",125],["T_STRING","setCountryFilter",125],"(",["T_VARIABLE","$this",125],")",["T_WHITESPACE","\n                                                ",125],["T_OBJECT_OPERATOR","->",126],["T_STRING","load",126],"(",")",";",["T_WHITESPACE","\n        ",126],"}",["T_WHITESPACE","\n\n        ",127],["T_IF","if",129],["T_WHITESPACE"," ",129],"(",["T_ISSET","isset",129],"(",["T_STRING","self",129],["T_DOUBLE_COLON","::",129],["T_VARIABLE","$_format",129],"[",["T_VARIABLE","$this",129],["T_OBJECT_OPERATOR","->",129],["T_STRING","getId",129],"(",")","]",")",")",["T_WHITESPACE"," ",129],"{",["T_WHITESPACE","\n            ",129],["T_RETURN","return",130],["T_WHITESPACE"," ",130],["T_STRING","self",130],["T_DOUBLE_COLON","::",130],["T_VARIABLE","$_format",130],"[",["T_VARIABLE","$this",130],["T_OBJECT_OPERATOR","->",130],["T_STRING","getId",130],"(",")","]",";",["T_WHITESPACE","\n        ",130],"}",["T_WHITESPACE","\n\n        ",131],["T_RETURN","return",133],["T_WHITESPACE"," ",133],["T_STRING","null",133],";",["T_WHITESPACE","\n    ",133],"}",["T_WHITESPACE","\n\n    ",134],["T_DOC_COMMENT","\/**\n     * Retrive format\n     *\n     * @param string $type\n     * @return Mage_Directory_Model_Country_Format\n     *\/",136],["T_WHITESPACE","\n    ",141],["T_PUBLIC","public",142],["T_WHITESPACE"," ",142],["T_FUNCTION","function",142],["T_WHITESPACE"," ",142],["T_STRING","getFormat",142],"(",["T_VARIABLE","$type",142],")",["T_WHITESPACE","\n    ",142],"{",["T_WHITESPACE","\n        ",143],["T_IF","if",144],["T_WHITESPACE"," ",144],"(",["T_VARIABLE","$this",144],["T_OBJECT_OPERATOR","->",144],["T_STRING","getFormats",144],"(",")",")",["T_WHITESPACE"," ",144],"{",["T_WHITESPACE","\n            ",144],["T_FOREACH","foreach",145],["T_WHITESPACE"," ",145],"(",["T_VARIABLE","$this",145],["T_OBJECT_OPERATOR","->",145],["T_STRING","getFormats",145],"(",")",["T_WHITESPACE"," ",145],["T_AS","as",145],["T_WHITESPACE"," ",145],["T_VARIABLE","$format",145],")",["T_WHITESPACE"," ",145],"{",["T_WHITESPACE","\n                ",145],["T_IF","if",146],["T_WHITESPACE"," ",146],"(",["T_VARIABLE","$format",146],["T_OBJECT_OPERATOR","->",146],["T_STRING","getType",146],"(",")",["T_IS_EQUAL","==",146],["T_VARIABLE","$type",146],")",["T_WHITESPACE"," ",146],"{",["T_WHITESPACE","\n                    ",146],["T_RETURN","return",147],["T_WHITESPACE"," ",147],["T_VARIABLE","$format",147],";",["T_WHITESPACE","\n                ",147],"}",["T_WHITESPACE","\n            ",148],"}",["T_WHITESPACE","\n        ",149],"}",["T_WHITESPACE","\n        ",150],["T_RETURN","return",151],["T_WHITESPACE"," ",151],["T_STRING","null",151],";",["T_WHITESPACE","\n    ",151],"}",["T_WHITESPACE","\n\n    ",152],["T_PUBLIC","public",154],["T_WHITESPACE"," ",154],["T_FUNCTION","function",154],["T_WHITESPACE"," ",154],["T_STRING","getName",154],"(",")",["T_WHITESPACE","\n    ",154],"{",["T_WHITESPACE","\n        ",155],["T_IF","if",156],"(","!",["T_VARIABLE","$this",156],["T_OBJECT_OPERATOR","->",156],["T_STRING","getData",156],"(",["T_CONSTANT_ENCAPSED_STRING","'name'",156],")",")",["T_WHITESPACE"," ",156],"{",["T_WHITESPACE","\n            ",156],["T_VARIABLE","$this",157],["T_OBJECT_OPERATOR","->",157],["T_STRING","setData",157],"(",["T_WHITESPACE","\n                ",157],["T_CONSTANT_ENCAPSED_STRING","'name'",158],",",["T_WHITESPACE","\n                ",158],["T_STRING","Mage",159],["T_DOUBLE_COLON","::",159],["T_STRING","app",159],"(",")",["T_OBJECT_OPERATOR","->",159],["T_STRING","getLocale",159],"(",")",["T_OBJECT_OPERATOR","->",159],["T_STRING","getCountryTranslation",159],"(",["T_VARIABLE","$this",159],["T_OBJECT_OPERATOR","->",159],["T_STRING","getId",159],"(",")",")",["T_WHITESPACE","\n            ",159],")",";",["T_WHITESPACE","\n        ",160],"}",["T_WHITESPACE","\n        ",161],["T_RETURN","return",162],["T_WHITESPACE"," ",162],["T_VARIABLE","$this",162],["T_OBJECT_OPERATOR","->",162],["T_STRING","getData",162],"(",["T_CONSTANT_ENCAPSED_STRING","'name'",162],")",";",["T_WHITESPACE","\n    ",162],"}",["T_WHITESPACE","\n\n",163],"}",["T_WHITESPACE","\n",165]]
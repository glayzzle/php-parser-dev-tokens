[["T_OPEN_TAG","<?php\n",1],["T_DOC_COMMENT","\/**\n * Magento\n *\n * NOTICE OF LICENSE\n *\n * This source file is subject to the Open Software License (OSL 3.0)\n * that is bundled with this package in the file LICENSE.txt.\n * It is also available through the world-wide-web at this URL:\n * http:\/\/opensource.org\/licenses\/osl-3.0.php\n * If you did not receive a copy of the license and are unable to\n * obtain it through the world-wide-web, please send an email\n * to license@magento.com so we can send you a copy immediately.\n *\n * DISCLAIMER\n *\n * Do not edit or add to this file if you wish to upgrade Magento to newer\n * versions in the future. If you wish to customize Magento for your\n * needs please refer to http:\/\/www.magento.com for more information.\n *\n * @category    Mage\n * @package     Mage_Eav\n * @copyright  Copyright (c) 2006-2016 X.commerce, Inc. and affiliates (http:\/\/www.magento.com)\n * @license    http:\/\/opensource.org\/licenses\/osl-3.0.php  Open Software License (OSL 3.0)\n *\/",2],["T_WHITESPACE","\n\n\n",25],["T_DOC_COMMENT","\/**\n * Eav Form Type Resource Model\n *\n * @category    Mage\n * @package     Mage_Eav\n * @author      Magento Core Team <core@magentocommerce.com>\n *\/",28],["T_WHITESPACE","\n",34],["T_CLASS","class",35],["T_WHITESPACE"," ",35],["T_STRING","Mage_Eav_Model_Resource_Form_Type",35],["T_WHITESPACE"," ",35],["T_EXTENDS","extends",35],["T_WHITESPACE"," ",35],["T_STRING","Mage_Core_Model_Resource_Db_Abstract",35],["T_WHITESPACE","\n",35],"{",["T_WHITESPACE","\n    ",36],["T_DOC_COMMENT","\/**\n     * Initialize connection and define main table\n     *\n     *\/",37],["T_WHITESPACE","\n    ",40],["T_PROTECTED","protected",41],["T_WHITESPACE"," ",41],["T_FUNCTION","function",41],["T_WHITESPACE"," ",41],["T_STRING","_construct",41],"(",")",["T_WHITESPACE","\n    ",41],"{",["T_WHITESPACE","\n        ",42],["T_VARIABLE","$this",43],["T_OBJECT_OPERATOR","->",43],["T_STRING","_init",43],"(",["T_CONSTANT_ENCAPSED_STRING","'eav\/form_type'",43],",",["T_WHITESPACE"," ",43],["T_CONSTANT_ENCAPSED_STRING","'type_id'",43],")",";",["T_WHITESPACE","\n        ",43],["T_VARIABLE","$this",44],["T_OBJECT_OPERATOR","->",44],["T_STRING","addUniqueField",44],"(",["T_ARRAY","array",44],"(",["T_WHITESPACE","\n            ",44],["T_CONSTANT_ENCAPSED_STRING","'field'",45],["T_WHITESPACE"," ",45],["T_DOUBLE_ARROW","=>",45],["T_WHITESPACE"," ",45],["T_ARRAY","array",45],"(",["T_CONSTANT_ENCAPSED_STRING","'code'",45],",",["T_WHITESPACE"," ",45],["T_CONSTANT_ENCAPSED_STRING","'theme'",45],",",["T_WHITESPACE"," ",45],["T_CONSTANT_ENCAPSED_STRING","'store_id'",45],")",",",["T_WHITESPACE","\n            ",45],["T_CONSTANT_ENCAPSED_STRING","'title'",46],["T_WHITESPACE"," ",46],["T_DOUBLE_ARROW","=>",46],["T_WHITESPACE"," ",46],["T_STRING","Mage",46],["T_DOUBLE_COLON","::",46],["T_STRING","helper",46],"(",["T_CONSTANT_ENCAPSED_STRING","'eav'",46],")",["T_OBJECT_OPERATOR","->",46],["T_STRING","__",46],"(",["T_CONSTANT_ENCAPSED_STRING","'Form Type with the same code'",46],")",["T_WHITESPACE","\n        ",46],")",")",";",["T_WHITESPACE","\n    ",47],"}",["T_WHITESPACE","\n\n    ",48],["T_DOC_COMMENT","\/**\n     * Load an object\n     *\n     * @param Mage_Eav_Model_Form_Type $object\n     * @param mixed $value\n     * @param string $field field to load by (defaults to model id)\n     * @return Mage_Eav_Model_Resource_Form_Type\n     *\/",50],["T_WHITESPACE","\n    ",57],["T_PUBLIC","public",58],["T_WHITESPACE"," ",58],["T_FUNCTION","function",58],["T_WHITESPACE"," ",58],["T_STRING","load",58],"(",["T_STRING","Mage_Core_Model_Abstract",58],["T_WHITESPACE"," ",58],["T_VARIABLE","$object",58],",",["T_WHITESPACE"," ",58],["T_VARIABLE","$value",58],",",["T_WHITESPACE"," ",58],["T_VARIABLE","$field",58],["T_WHITESPACE"," ",58],"=",["T_WHITESPACE"," ",58],["T_STRING","null",58],")",["T_WHITESPACE","\n    ",58],"{",["T_WHITESPACE","\n        ",59],["T_IF","if",60],["T_WHITESPACE"," ",60],"(",["T_STRING","is_null",60],"(",["T_VARIABLE","$field",60],")",["T_WHITESPACE"," ",60],["T_BOOLEAN_AND","&&",60],["T_WHITESPACE"," ",60],"!",["T_STRING","is_numeric",60],"(",["T_VARIABLE","$value",60],")",")",["T_WHITESPACE"," ",60],"{",["T_WHITESPACE","\n            ",60],["T_VARIABLE","$field",61],["T_WHITESPACE"," ",61],"=",["T_WHITESPACE"," ",61],["T_CONSTANT_ENCAPSED_STRING","'code'",61],";",["T_WHITESPACE","\n        ",61],"}",["T_WHITESPACE","\n        ",62],["T_RETURN","return",63],["T_WHITESPACE"," ",63],["T_STRING","parent",63],["T_DOUBLE_COLON","::",63],["T_STRING","load",63],"(",["T_VARIABLE","$object",63],",",["T_WHITESPACE"," ",63],["T_VARIABLE","$value",63],",",["T_WHITESPACE"," ",63],["T_VARIABLE","$field",63],")",";",["T_WHITESPACE","\n    ",63],"}",["T_WHITESPACE","\n\n    ",64],["T_DOC_COMMENT","\/**\n     * Retrieve form type entity types\n     *\n     * @param Mage_Eav_Model_Form_Type $object\n     * @return array\n     *\/",66],["T_WHITESPACE","\n    ",71],["T_PUBLIC","public",72],["T_WHITESPACE"," ",72],["T_FUNCTION","function",72],["T_WHITESPACE"," ",72],["T_STRING","getEntityTypes",72],"(",["T_VARIABLE","$object",72],")",["T_WHITESPACE","\n    ",72],"{",["T_WHITESPACE","\n        ",73],["T_VARIABLE","$objectId",74],["T_WHITESPACE"," ",74],"=",["T_WHITESPACE"," ",74],["T_VARIABLE","$object",74],["T_OBJECT_OPERATOR","->",74],["T_STRING","getId",74],"(",")",";",["T_WHITESPACE","\n        ",74],["T_IF","if",75],["T_WHITESPACE"," ",75],"(","!",["T_VARIABLE","$objectId",75],")",["T_WHITESPACE"," ",75],"{",["T_WHITESPACE","\n            ",75],["T_RETURN","return",76],["T_WHITESPACE"," ",76],["T_ARRAY","array",76],"(",")",";",["T_WHITESPACE","\n        ",76],"}",["T_WHITESPACE","\n        ",77],["T_VARIABLE","$adapter",78],["T_WHITESPACE"," ",78],"=",["T_WHITESPACE"," ",78],["T_VARIABLE","$this",78],["T_OBJECT_OPERATOR","->",78],["T_STRING","_getReadAdapter",78],"(",")",";",["T_WHITESPACE","\n        ",78],["T_VARIABLE","$bind",79],["T_WHITESPACE","    ",79],"=",["T_WHITESPACE"," ",79],["T_ARRAY","array",79],"(",["T_CONSTANT_ENCAPSED_STRING","':type_id'",79],["T_WHITESPACE"," ",79],["T_DOUBLE_ARROW","=>",79],["T_WHITESPACE"," ",79],["T_VARIABLE","$objectId",79],")",";",["T_WHITESPACE","\n        ",79],["T_VARIABLE","$select",80],["T_WHITESPACE","  ",80],"=",["T_WHITESPACE"," ",80],["T_VARIABLE","$adapter",80],["T_OBJECT_OPERATOR","->",80],["T_STRING","select",80],"(",")",["T_WHITESPACE","\n            ",80],["T_OBJECT_OPERATOR","->",81],["T_STRING","from",81],"(",["T_VARIABLE","$this",81],["T_OBJECT_OPERATOR","->",81],["T_STRING","getTable",81],"(",["T_CONSTANT_ENCAPSED_STRING","'eav\/form_type_entity'",81],")",",",["T_WHITESPACE"," ",81],["T_CONSTANT_ENCAPSED_STRING","'entity_type_id'",81],")",["T_WHITESPACE","\n            ",81],["T_OBJECT_OPERATOR","->",82],["T_STRING","where",82],"(",["T_CONSTANT_ENCAPSED_STRING","'type_id = :type_id'",82],")",";",["T_WHITESPACE","\n\n        ",82],["T_RETURN","return",84],["T_WHITESPACE"," ",84],["T_VARIABLE","$adapter",84],["T_OBJECT_OPERATOR","->",84],["T_STRING","fetchCol",84],"(",["T_VARIABLE","$select",84],",",["T_WHITESPACE"," ",84],["T_VARIABLE","$bind",84],")",";",["T_WHITESPACE","\n    ",84],"}",["T_WHITESPACE","\n\n    ",85],["T_DOC_COMMENT","\/**\n     * Save entity types after save form type\n     *\n     * @see Mage_Core_Model_Resource_Db_Abstract#_afterSave($object)\n     *\n     * @param Mage_Eav_Model_Form_Type $object\n     * @return Mage_Eav_Model_Resource_Form_Type\n     *\/",87],["T_WHITESPACE","\n    ",94],["T_PROTECTED","protected",95],["T_WHITESPACE"," ",95],["T_FUNCTION","function",95],["T_WHITESPACE"," ",95],["T_STRING","_afterSave",95],"(",["T_STRING","Mage_Core_Model_Abstract",95],["T_WHITESPACE"," ",95],["T_VARIABLE","$object",95],")",["T_WHITESPACE","\n    ",95],"{",["T_WHITESPACE","\n        ",96],["T_IF","if",97],["T_WHITESPACE"," ",97],"(",["T_VARIABLE","$object",97],["T_OBJECT_OPERATOR","->",97],["T_STRING","hasEntityTypes",97],"(",")",")",["T_WHITESPACE"," ",97],"{",["T_WHITESPACE","\n            ",97],["T_VARIABLE","$new",98],["T_WHITESPACE"," ",98],"=",["T_WHITESPACE"," ",98],["T_VARIABLE","$object",98],["T_OBJECT_OPERATOR","->",98],["T_STRING","getEntityTypes",98],"(",")",";",["T_WHITESPACE","\n            ",98],["T_VARIABLE","$old",99],["T_WHITESPACE"," ",99],"=",["T_WHITESPACE"," ",99],["T_VARIABLE","$this",99],["T_OBJECT_OPERATOR","->",99],["T_STRING","getEntityTypes",99],"(",["T_VARIABLE","$object",99],")",";",["T_WHITESPACE","\n\n            ",99],["T_VARIABLE","$insert",101],["T_WHITESPACE"," ",101],"=",["T_WHITESPACE"," ",101],["T_STRING","array_diff",101],"(",["T_VARIABLE","$new",101],",",["T_WHITESPACE"," ",101],["T_VARIABLE","$old",101],")",";",["T_WHITESPACE","\n            ",101],["T_VARIABLE","$delete",102],["T_WHITESPACE"," ",102],"=",["T_WHITESPACE"," ",102],["T_STRING","array_diff",102],"(",["T_VARIABLE","$old",102],",",["T_WHITESPACE"," ",102],["T_VARIABLE","$new",102],")",";",["T_WHITESPACE","\n\n            ",102],["T_VARIABLE","$adapter",104],["T_WHITESPACE","  ",104],"=",["T_WHITESPACE"," ",104],["T_VARIABLE","$this",104],["T_OBJECT_OPERATOR","->",104],["T_STRING","_getWriteAdapter",104],"(",")",";",["T_WHITESPACE","\n\n            ",104],["T_IF","if",106],["T_WHITESPACE"," ",106],"(","!",["T_EMPTY","empty",106],"(",["T_VARIABLE","$insert",106],")",")",["T_WHITESPACE"," ",106],"{",["T_WHITESPACE","\n                ",106],["T_VARIABLE","$data",107],["T_WHITESPACE"," ",107],"=",["T_WHITESPACE"," ",107],["T_ARRAY","array",107],"(",")",";",["T_WHITESPACE","\n                ",107],["T_FOREACH","foreach",108],["T_WHITESPACE"," ",108],"(",["T_VARIABLE","$insert",108],["T_WHITESPACE"," ",108],["T_AS","as",108],["T_WHITESPACE"," ",108],["T_VARIABLE","$entityId",108],")",["T_WHITESPACE"," ",108],"{",["T_WHITESPACE","\n                    ",108],["T_IF","if",109],["T_WHITESPACE"," ",109],"(",["T_EMPTY","empty",109],"(",["T_VARIABLE","$entityId",109],")",")",["T_WHITESPACE"," ",109],"{",["T_WHITESPACE","\n                        ",109],["T_CONTINUE","continue",110],";",["T_WHITESPACE","\n                    ",110],"}",["T_WHITESPACE","\n                    ",111],["T_VARIABLE","$data",112],"[","]",["T_WHITESPACE"," ",112],"=",["T_WHITESPACE"," ",112],["T_ARRAY","array",112],"(",["T_WHITESPACE","\n                        ",112],["T_CONSTANT_ENCAPSED_STRING","'entity_type_id'",113],["T_WHITESPACE"," ",113],["T_DOUBLE_ARROW","=>",113],["T_WHITESPACE"," ",113],["T_INT_CAST","(int)",113],["T_VARIABLE","$entityId",113],",",["T_WHITESPACE","\n                        ",113],["T_CONSTANT_ENCAPSED_STRING","'type_id'",114],["T_WHITESPACE","        ",114],["T_DOUBLE_ARROW","=>",114],["T_WHITESPACE"," ",114],["T_VARIABLE","$object",114],["T_OBJECT_OPERATOR","->",114],["T_STRING","getId",114],"(",")",["T_WHITESPACE","\n                    ",114],")",";",["T_WHITESPACE","\n                ",115],"}",["T_WHITESPACE","\n                ",116],["T_IF","if",117],["T_WHITESPACE"," ",117],"(",["T_VARIABLE","$data",117],")",["T_WHITESPACE"," ",117],"{",["T_WHITESPACE","\n                    ",117],["T_VARIABLE","$adapter",118],["T_OBJECT_OPERATOR","->",118],["T_STRING","insertMultiple",118],"(",["T_VARIABLE","$this",118],["T_OBJECT_OPERATOR","->",118],["T_STRING","getTable",118],"(",["T_CONSTANT_ENCAPSED_STRING","'eav\/form_type_entity'",118],")",",",["T_WHITESPACE"," ",118],["T_VARIABLE","$data",118],")",";",["T_WHITESPACE","\n                ",118],"}",["T_WHITESPACE","\n            ",119],"}",["T_WHITESPACE","\n\n            ",120],["T_IF","if",122],["T_WHITESPACE"," ",122],"(","!",["T_EMPTY","empty",122],"(",["T_VARIABLE","$delete",122],")",")",["T_WHITESPACE"," ",122],"{",["T_WHITESPACE","\n                ",122],["T_VARIABLE","$where",123],["T_WHITESPACE"," ",123],"=",["T_WHITESPACE"," ",123],["T_ARRAY","array",123],"(",["T_WHITESPACE","\n                    ",123],["T_CONSTANT_ENCAPSED_STRING","'entity_type_id IN (?)'",124],["T_WHITESPACE"," ",124],["T_DOUBLE_ARROW","=>",124],["T_WHITESPACE"," ",124],["T_VARIABLE","$delete",124],",",["T_WHITESPACE","\n                    ",124],["T_CONSTANT_ENCAPSED_STRING","'type_id = ?'",125],["T_WHITESPACE","           ",125],["T_DOUBLE_ARROW","=>",125],["T_WHITESPACE"," ",125],["T_VARIABLE","$object",125],["T_OBJECT_OPERATOR","->",125],["T_STRING","getId",125],"(",")",["T_WHITESPACE","\n                ",125],")",";",["T_WHITESPACE","\n                ",126],["T_VARIABLE","$adapter",127],["T_OBJECT_OPERATOR","->",127],["T_STRING","delete",127],"(",["T_VARIABLE","$this",127],["T_OBJECT_OPERATOR","->",127],["T_STRING","getTable",127],"(",["T_CONSTANT_ENCAPSED_STRING","'eav\/form_type_entity'",127],")",",",["T_WHITESPACE"," ",127],["T_VARIABLE","$where",127],")",";",["T_WHITESPACE","\n            ",127],"}",["T_WHITESPACE","\n        ",128],"}",["T_WHITESPACE","\n\n        ",129],["T_RETURN","return",131],["T_WHITESPACE"," ",131],["T_STRING","parent",131],["T_DOUBLE_COLON","::",131],["T_STRING","_afterSave",131],"(",["T_VARIABLE","$object",131],")",";",["T_WHITESPACE","\n    ",131],"}",["T_WHITESPACE","\n\n    ",132],["T_DOC_COMMENT","\/**\n     * Retrieve form type filtered by given attribute\n     *\n     * @param Mage_Eav_Model_Entity_Attribute_Abstract|int $attribute\n     * @return array\n     *\/",134],["T_WHITESPACE","\n    ",139],["T_PUBLIC","public",140],["T_WHITESPACE"," ",140],["T_FUNCTION","function",140],["T_WHITESPACE"," ",140],["T_STRING","getFormTypesByAttribute",140],"(",["T_VARIABLE","$attribute",140],")",["T_WHITESPACE","\n    ",140],"{",["T_WHITESPACE","\n        ",141],["T_IF","if",142],["T_WHITESPACE"," ",142],"(",["T_VARIABLE","$attribute",142],["T_WHITESPACE"," ",142],["T_INSTANCEOF","instanceof",142],["T_WHITESPACE"," ",142],["T_STRING","Mage_Eav_Model_Entity_Attribute_Abstract",142],")",["T_WHITESPACE"," ",142],"{",["T_WHITESPACE","\n            ",142],["T_VARIABLE","$attribute",143],["T_WHITESPACE"," ",143],"=",["T_WHITESPACE"," ",143],["T_VARIABLE","$attribute",143],["T_OBJECT_OPERATOR","->",143],["T_STRING","getId",143],"(",")",";",["T_WHITESPACE","\n        ",143],"}",["T_WHITESPACE","\n        ",144],["T_IF","if",145],["T_WHITESPACE"," ",145],"(","!",["T_VARIABLE","$attribute",145],")",["T_WHITESPACE"," ",145],"{",["T_WHITESPACE","\n            ",145],["T_RETURN","return",146],["T_WHITESPACE"," ",146],["T_ARRAY","array",146],"(",")",";",["T_WHITESPACE","\n        ",146],"}",["T_WHITESPACE","\n        ",147],["T_VARIABLE","$bind",148],["T_WHITESPACE","   ",148],"=",["T_WHITESPACE"," ",148],["T_ARRAY","array",148],"(",["T_CONSTANT_ENCAPSED_STRING","':attribute_id'",148],["T_WHITESPACE"," ",148],["T_DOUBLE_ARROW","=>",148],["T_WHITESPACE"," ",148],["T_VARIABLE","$attribute",148],")",";",["T_WHITESPACE","\n        ",148],["T_VARIABLE","$select",149],["T_WHITESPACE"," ",149],"=",["T_WHITESPACE"," ",149],["T_VARIABLE","$this",149],["T_OBJECT_OPERATOR","->",149],["T_STRING","_getReadAdapter",149],"(",")",["T_OBJECT_OPERATOR","->",149],["T_STRING","select",149],"(",")",["T_WHITESPACE","\n            ",149],["T_OBJECT_OPERATOR","->",150],["T_STRING","from",150],"(",["T_VARIABLE","$this",150],["T_OBJECT_OPERATOR","->",150],["T_STRING","getTable",150],"(",["T_CONSTANT_ENCAPSED_STRING","'eav\/form_element'",150],")",")",["T_WHITESPACE","\n            ",150],["T_OBJECT_OPERATOR","->",151],["T_STRING","where",151],"(",["T_CONSTANT_ENCAPSED_STRING","'attribute_id = :attribute_id'",151],")",";",["T_WHITESPACE","\n\n        ",151],["T_RETURN","return",153],["T_WHITESPACE"," ",153],["T_VARIABLE","$this",153],["T_OBJECT_OPERATOR","->",153],["T_STRING","_getReadAdapter",153],"(",")",["T_OBJECT_OPERATOR","->",153],["T_STRING","fetchAll",153],"(",["T_VARIABLE","$select",153],",",["T_WHITESPACE"," ",153],["T_VARIABLE","$bind",153],")",";",["T_WHITESPACE","\n    ",153],"}",["T_WHITESPACE","\n",154],"}",["T_WHITESPACE","\n",155]]
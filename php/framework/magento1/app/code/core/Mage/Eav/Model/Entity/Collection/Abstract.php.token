[["T_OPEN_TAG","<?php\n",1],["T_DOC_COMMENT","\/**\n * Magento\n *\n * NOTICE OF LICENSE\n *\n * This source file is subject to the Open Software License (OSL 3.0)\n * that is bundled with this package in the file LICENSE.txt.\n * It is also available through the world-wide-web at this URL:\n * http:\/\/opensource.org\/licenses\/osl-3.0.php\n * If you did not receive a copy of the license and are unable to\n * obtain it through the world-wide-web, please send an email\n * to license@magento.com so we can send you a copy immediately.\n *\n * DISCLAIMER\n *\n * Do not edit or add to this file if you wish to upgrade Magento to newer\n * versions in the future. If you wish to customize Magento for your\n * needs please refer to http:\/\/www.magento.com for more information.\n *\n * @category    Mage\n * @package     Mage_Eav\n * @copyright  Copyright (c) 2006-2016 X.commerce, Inc. and affiliates (http:\/\/www.magento.com)\n * @license    http:\/\/opensource.org\/licenses\/osl-3.0.php  Open Software License (OSL 3.0)\n *\/",2],["T_WHITESPACE","\n\n",25],["T_DOC_COMMENT","\/**\n * Entity\/Attribute\/Model - collection abstract\n *\n * @category   Mage\n * @package    Mage_Eav\n * @author      Magento Core Team <core@magentocommerce.com>\n *\/",27],["T_WHITESPACE","\n",33],["T_ABSTRACT","abstract",34],["T_WHITESPACE"," ",34],["T_CLASS","class",34],["T_WHITESPACE"," ",34],["T_STRING","Mage_Eav_Model_Entity_Collection_Abstract",34],["T_WHITESPACE"," ",34],["T_EXTENDS","extends",34],["T_WHITESPACE"," ",34],["T_STRING","Varien_Data_Collection_Db",34],["T_WHITESPACE","\n",34],"{",["T_WHITESPACE","\n    ",35],["T_DOC_COMMENT","\/**\n     * Array of items with item id key\n     *\n     * @var array\n     *\/",36],["T_WHITESPACE","\n    ",40],["T_PROTECTED","protected",41],["T_WHITESPACE"," ",41],["T_VARIABLE","$_itemsById",41],["T_WHITESPACE","                  ",41],"=",["T_WHITESPACE"," ",41],["T_ARRAY","array",41],"(",")",";",["T_WHITESPACE","\n\n    ",41],["T_DOC_COMMENT","\/**\n     * Entity static fields\n     *\n     * @var array\n     *\/",43],["T_WHITESPACE","\n    ",47],["T_PROTECTED","protected",48],["T_WHITESPACE"," ",48],["T_VARIABLE","$_staticFields",48],["T_WHITESPACE","               ",48],"=",["T_WHITESPACE"," ",48],["T_ARRAY","array",48],"(",")",";",["T_WHITESPACE","\n\n    ",48],["T_DOC_COMMENT","\/**\n     * Entity object to define collection's attributes\n     *\n     * @var Mage_Eav_Model_Entity_Abstract\n     *\/",50],["T_WHITESPACE","\n    ",54],["T_PROTECTED","protected",55],["T_WHITESPACE"," ",55],["T_VARIABLE","$_entity",55],";",["T_WHITESPACE","\n\n    ",55],["T_DOC_COMMENT","\/**\n     * Entity types to be fetched for objects in collection\n     *\n     * @var array\n     *\/",57],["T_WHITESPACE","\n    ",61],["T_PROTECTED","protected",62],["T_WHITESPACE"," ",62],["T_VARIABLE","$_selectEntityTypes",62],["T_WHITESPACE","         ",62],"=",["T_WHITESPACE"," ",62],["T_ARRAY","array",62],"(",")",";",["T_WHITESPACE","\n\n    ",62],["T_DOC_COMMENT","\/**\n     * Attributes to be fetched for objects in collection\n     *\n     * @var array\n     *\/",64],["T_WHITESPACE","\n    ",68],["T_PROTECTED","protected",69],["T_WHITESPACE"," ",69],["T_VARIABLE","$_selectAttributes",69],["T_WHITESPACE","          ",69],"=",["T_WHITESPACE"," ",69],["T_ARRAY","array",69],"(",")",";",["T_WHITESPACE","\n\n    ",69],["T_DOC_COMMENT","\/**\n     * Attributes to be filtered order sorted by\n     *\n     * @var array\n     *\/",71],["T_WHITESPACE","\n    ",75],["T_PROTECTED","protected",76],["T_WHITESPACE"," ",76],["T_VARIABLE","$_filterAttributes",76],["T_WHITESPACE","          ",76],"=",["T_WHITESPACE"," ",76],["T_ARRAY","array",76],"(",")",";",["T_WHITESPACE","\n\n    ",76],["T_DOC_COMMENT","\/**\n     * Joined entities\n     *\n     * @var array\n     *\/",78],["T_WHITESPACE","\n    ",82],["T_PROTECTED","protected",83],["T_WHITESPACE"," ",83],["T_VARIABLE","$_joinEntities",83],["T_WHITESPACE","              ",83],"=",["T_WHITESPACE"," ",83],["T_ARRAY","array",83],"(",")",";",["T_WHITESPACE","\n\n    ",83],["T_DOC_COMMENT","\/**\n     * Joined attributes\n     *\n     * @var array\n     *\/",85],["T_WHITESPACE","\n    ",89],["T_PROTECTED","protected",90],["T_WHITESPACE"," ",90],["T_VARIABLE","$_joinAttributes",90],["T_WHITESPACE","            ",90],"=",["T_WHITESPACE"," ",90],["T_ARRAY","array",90],"(",")",";",["T_WHITESPACE","\n\n    ",90],["T_DOC_COMMENT","\/**\n     * Joined fields data\n     *\n     * @var array\n     *\/",92],["T_WHITESPACE","\n    ",96],["T_PROTECTED","protected",97],["T_WHITESPACE"," ",97],["T_VARIABLE","$_joinFields",97],["T_WHITESPACE","                ",97],"=",["T_WHITESPACE"," ",97],["T_ARRAY","array",97],"(",")",";",["T_WHITESPACE","\n\n    ",97],["T_DOC_COMMENT","\/**\n     * Use analytic function flag\n     * If true - allows to prepare final select with analytic functions\n     *\n     * @var bool\n     *\/",99],["T_WHITESPACE","\n    ",104],["T_PROTECTED","protected",105],["T_WHITESPACE"," ",105],["T_VARIABLE","$_useAnalyticFunction",105],["T_WHITESPACE","         ",105],"=",["T_WHITESPACE"," ",105],["T_STRING","false",105],";",["T_WHITESPACE","\n\n    ",105],["T_DOC_COMMENT","\/**\n     * Cast map for attribute order\n     *\n     * @var array\n     *\/",107],["T_WHITESPACE","\n    ",111],["T_PROTECTED","protected",112],["T_WHITESPACE"," ",112],["T_VARIABLE","$_castToIntMap",112],["T_WHITESPACE"," ",112],"=",["T_WHITESPACE"," ",112],["T_ARRAY","array",112],"(",["T_WHITESPACE","\n        ",112],["T_CONSTANT_ENCAPSED_STRING","'validate-digits'",113],["T_WHITESPACE","\n    ",113],")",";",["T_WHITESPACE","\n\n    ",114],["T_DOC_COMMENT","\/**\n     * Collection constructor\n     *\n     * @param Mage_Core_Model_Resource_Abstract $resource\n     *\/",116],["T_WHITESPACE","\n    ",120],["T_PUBLIC","public",121],["T_WHITESPACE"," ",121],["T_FUNCTION","function",121],["T_WHITESPACE"," ",121],["T_STRING","__construct",121],"(",["T_VARIABLE","$resource",121],["T_WHITESPACE"," ",121],"=",["T_WHITESPACE"," ",121],["T_STRING","null",121],")",["T_WHITESPACE","\n    ",121],"{",["T_WHITESPACE","\n        ",122],["T_STRING","parent",123],["T_DOUBLE_COLON","::",123],["T_STRING","__construct",123],"(",")",";",["T_WHITESPACE","\n        ",123],["T_VARIABLE","$this",124],["T_OBJECT_OPERATOR","->",124],["T_STRING","_construct",124],"(",")",";",["T_WHITESPACE","\n        ",124],["T_VARIABLE","$this",125],["T_OBJECT_OPERATOR","->",125],["T_STRING","setConnection",125],"(",["T_VARIABLE","$this",125],["T_OBJECT_OPERATOR","->",125],["T_STRING","getEntity",125],"(",")",["T_OBJECT_OPERATOR","->",125],["T_STRING","getReadConnection",125],"(",")",")",";",["T_WHITESPACE","\n        ",125],["T_VARIABLE","$this",126],["T_OBJECT_OPERATOR","->",126],["T_STRING","_prepareStaticFields",126],"(",")",";",["T_WHITESPACE","\n        ",126],["T_VARIABLE","$this",127],["T_OBJECT_OPERATOR","->",127],["T_STRING","_initSelect",127],"(",")",";",["T_WHITESPACE","\n    ",127],"}",["T_WHITESPACE","\n\n    ",128],["T_DOC_COMMENT","\/**\n     * Initialize collection\n     *\/",130],["T_WHITESPACE","\n    ",132],["T_PROTECTED","protected",133],["T_WHITESPACE"," ",133],["T_FUNCTION","function",133],["T_WHITESPACE"," ",133],["T_STRING","_construct",133],"(",")",["T_WHITESPACE","\n    ",133],"{",["T_WHITESPACE","\n\n    ",134],"}",["T_WHITESPACE","\n\n    ",136],["T_DOC_COMMENT","\/**\n     * Retreive table name\n     *\n     * @param string $table\n     * @return string\n     *\/",138],["T_WHITESPACE","\n    ",143],["T_PUBLIC","public",144],["T_WHITESPACE"," ",144],["T_FUNCTION","function",144],["T_WHITESPACE"," ",144],["T_STRING","getTable",144],"(",["T_VARIABLE","$table",144],")",["T_WHITESPACE","\n    ",144],"{",["T_WHITESPACE","\n        ",145],["T_RETURN","return",146],["T_WHITESPACE"," ",146],["T_VARIABLE","$this",146],["T_OBJECT_OPERATOR","->",146],["T_STRING","getResource",146],"(",")",["T_OBJECT_OPERATOR","->",146],["T_STRING","getTable",146],"(",["T_VARIABLE","$table",146],")",";",["T_WHITESPACE","\n    ",146],"}",["T_WHITESPACE","\n\n    ",147],["T_DOC_COMMENT","\/**\n     * Prepare static entity fields\n     *\n     * @return Mage_Eav_Model_Entity_Collection_Abstract\n     *\/",149],["T_WHITESPACE","\n    ",153],["T_PROTECTED","protected",154],["T_WHITESPACE"," ",154],["T_FUNCTION","function",154],["T_WHITESPACE"," ",154],["T_STRING","_prepareStaticFields",154],"(",")",["T_WHITESPACE","\n    ",154],"{",["T_WHITESPACE","\n        ",155],["T_FOREACH","foreach",156],["T_WHITESPACE"," ",156],"(",["T_VARIABLE","$this",156],["T_OBJECT_OPERATOR","->",156],["T_STRING","getEntity",156],"(",")",["T_OBJECT_OPERATOR","->",156],["T_STRING","getDefaultAttributes",156],"(",")",["T_WHITESPACE"," ",156],["T_AS","as",156],["T_WHITESPACE"," ",156],["T_VARIABLE","$field",156],")",["T_WHITESPACE"," ",156],"{",["T_WHITESPACE","\n            ",156],["T_VARIABLE","$this",157],["T_OBJECT_OPERATOR","->",157],["T_STRING","_staticFields",157],"[",["T_VARIABLE","$field",157],"]",["T_WHITESPACE"," ",157],"=",["T_WHITESPACE"," ",157],["T_VARIABLE","$field",157],";",["T_WHITESPACE","\n        ",157],"}",["T_WHITESPACE","\n        ",158],["T_RETURN","return",159],["T_WHITESPACE"," ",159],["T_VARIABLE","$this",159],";",["T_WHITESPACE","\n    ",159],"}",["T_WHITESPACE","\n\n    ",160],["T_DOC_COMMENT","\/**\n     * Init select\n     *\n     * @return Mage_Eav_Model_Entity_Collection_Abstract\n     *\/",162],["T_WHITESPACE","\n    ",166],["T_PROTECTED","protected",167],["T_WHITESPACE"," ",167],["T_FUNCTION","function",167],["T_WHITESPACE"," ",167],["T_STRING","_initSelect",167],"(",")",["T_WHITESPACE","\n    ",167],"{",["T_WHITESPACE","\n        ",168],["T_VARIABLE","$this",169],["T_OBJECT_OPERATOR","->",169],["T_STRING","getSelect",169],"(",")",["T_OBJECT_OPERATOR","->",169],["T_STRING","from",169],"(",["T_ARRAY","array",169],"(",["T_CONSTANT_ENCAPSED_STRING","'e'",169],["T_WHITESPACE"," ",169],["T_DOUBLE_ARROW","=>",169],["T_WHITESPACE"," ",169],["T_VARIABLE","$this",169],["T_OBJECT_OPERATOR","->",169],["T_STRING","getEntity",169],"(",")",["T_OBJECT_OPERATOR","->",169],["T_STRING","getEntityTable",169],"(",")",")",")",";",["T_WHITESPACE","\n        ",169],["T_IF","if",170],["T_WHITESPACE"," ",170],"(",["T_VARIABLE","$this",170],["T_OBJECT_OPERATOR","->",170],["T_STRING","getEntity",170],"(",")",["T_OBJECT_OPERATOR","->",170],["T_STRING","getTypeId",170],"(",")",")",["T_WHITESPACE"," ",170],"{",["T_WHITESPACE","\n            ",170],["T_VARIABLE","$this",171],["T_OBJECT_OPERATOR","->",171],["T_STRING","addAttributeToFilter",171],"(",["T_CONSTANT_ENCAPSED_STRING","'entity_type_id'",171],",",["T_WHITESPACE"," ",171],["T_VARIABLE","$this",171],["T_OBJECT_OPERATOR","->",171],["T_STRING","getEntity",171],"(",")",["T_OBJECT_OPERATOR","->",171],["T_STRING","getTypeId",171],"(",")",")",";",["T_WHITESPACE","\n        ",171],"}",["T_WHITESPACE","\n        ",172],["T_RETURN","return",173],["T_WHITESPACE"," ",173],["T_VARIABLE","$this",173],";",["T_WHITESPACE","\n    ",173],"}",["T_WHITESPACE","\n\n    ",174],["T_DOC_COMMENT","\/**\n     * Standard resource collection initalization\n     *\n     * @param string $model\n     * @return Mage_Core_Model_Mysql4_Collection_Abstract\n     *\/",176],["T_WHITESPACE","\n    ",181],["T_PROTECTED","protected",182],["T_WHITESPACE"," ",182],["T_FUNCTION","function",182],["T_WHITESPACE"," ",182],["T_STRING","_init",182],"(",["T_VARIABLE","$model",182],",",["T_WHITESPACE"," ",182],["T_VARIABLE","$entityModel",182],["T_WHITESPACE"," ",182],"=",["T_WHITESPACE"," ",182],["T_STRING","null",182],")",["T_WHITESPACE","\n    ",182],"{",["T_WHITESPACE","\n        ",183],["T_VARIABLE","$this",184],["T_OBJECT_OPERATOR","->",184],["T_STRING","setItemObjectClass",184],"(",["T_STRING","Mage",184],["T_DOUBLE_COLON","::",184],["T_STRING","getConfig",184],"(",")",["T_OBJECT_OPERATOR","->",184],["T_STRING","getModelClassName",184],"(",["T_VARIABLE","$model",184],")",")",";",["T_WHITESPACE","\n        ",184],["T_IF","if",185],["T_WHITESPACE"," ",185],"(",["T_VARIABLE","$entityModel",185],["T_WHITESPACE"," ",185],["T_IS_IDENTICAL","===",185],["T_WHITESPACE"," ",185],["T_STRING","null",185],")",["T_WHITESPACE"," ",185],"{",["T_WHITESPACE","\n            ",185],["T_VARIABLE","$entityModel",186],["T_WHITESPACE"," ",186],"=",["T_WHITESPACE"," ",186],["T_VARIABLE","$model",186],";",["T_WHITESPACE","\n        ",186],"}",["T_WHITESPACE","\n        ",187],["T_VARIABLE","$entity",188],["T_WHITESPACE"," ",188],"=",["T_WHITESPACE"," ",188],["T_STRING","Mage",188],["T_DOUBLE_COLON","::",188],["T_STRING","getResourceSingleton",188],"(",["T_VARIABLE","$entityModel",188],")",";",["T_WHITESPACE","\n        ",188],["T_VARIABLE","$this",189],["T_OBJECT_OPERATOR","->",189],["T_STRING","setEntity",189],"(",["T_VARIABLE","$entity",189],")",";",["T_WHITESPACE","\n\n        ",189],["T_RETURN","return",191],["T_WHITESPACE"," ",191],["T_VARIABLE","$this",191],";",["T_WHITESPACE","\n    ",191],"}",["T_WHITESPACE","\n\n    ",192],["T_DOC_COMMENT","\/**\n     * Set entity to use for attributes\n     *\n     * @param Mage_Eav_Model_Entity_Abstract $entity\n     * @throws Mage_Eav_Exception\n     * @return Mage_Eav_Model_Entity_Collection_Abstract\n     *\/",194],["T_WHITESPACE","\n    ",200],["T_PUBLIC","public",201],["T_WHITESPACE"," ",201],["T_FUNCTION","function",201],["T_WHITESPACE"," ",201],["T_STRING","setEntity",201],"(",["T_VARIABLE","$entity",201],")",["T_WHITESPACE","\n    ",201],"{",["T_WHITESPACE","\n        ",202],["T_IF","if",203],["T_WHITESPACE"," ",203],"(",["T_VARIABLE","$entity",203],["T_WHITESPACE"," ",203],["T_INSTANCEOF","instanceof",203],["T_WHITESPACE"," ",203],["T_STRING","Mage_Eav_Model_Entity_Abstract",203],")",["T_WHITESPACE"," ",203],"{",["T_WHITESPACE","\n            ",203],["T_VARIABLE","$this",204],["T_OBJECT_OPERATOR","->",204],["T_STRING","_entity",204],["T_WHITESPACE"," ",204],"=",["T_WHITESPACE"," ",204],["T_VARIABLE","$entity",204],";",["T_WHITESPACE","\n        ",204],"}",["T_WHITESPACE"," ",205],["T_ELSEIF","elseif",205],["T_WHITESPACE"," ",205],"(",["T_STRING","is_string",205],"(",["T_VARIABLE","$entity",205],")",["T_WHITESPACE"," ",205],["T_BOOLEAN_OR","||",205],["T_WHITESPACE"," ",205],["T_VARIABLE","$entity",205],["T_WHITESPACE"," ",205],["T_INSTANCEOF","instanceof",205],["T_WHITESPACE"," ",205],["T_STRING","Mage_Core_Model_Config_Element",205],")",["T_WHITESPACE"," ",205],"{",["T_WHITESPACE","\n            ",205],["T_VARIABLE","$this",206],["T_OBJECT_OPERATOR","->",206],["T_STRING","_entity",206],["T_WHITESPACE"," ",206],"=",["T_WHITESPACE"," ",206],["T_STRING","Mage",206],["T_DOUBLE_COLON","::",206],["T_STRING","getModel",206],"(",["T_CONSTANT_ENCAPSED_STRING","'eav\/entity'",206],")",["T_OBJECT_OPERATOR","->",206],["T_STRING","setType",206],"(",["T_VARIABLE","$entity",206],")",";",["T_WHITESPACE","\n        ",206],"}",["T_WHITESPACE"," ",207],["T_ELSE","else",207],["T_WHITESPACE"," ",207],"{",["T_WHITESPACE","\n            ",207],["T_THROW","throw",208],["T_WHITESPACE"," ",208],["T_STRING","Mage",208],["T_DOUBLE_COLON","::",208],["T_STRING","exception",208],"(",["T_CONSTANT_ENCAPSED_STRING","'Mage_Eav'",208],",",["T_WHITESPACE"," ",208],["T_STRING","Mage",208],["T_DOUBLE_COLON","::",208],["T_STRING","helper",208],"(",["T_CONSTANT_ENCAPSED_STRING","'eav'",208],")",["T_OBJECT_OPERATOR","->",208],["T_STRING","__",208],"(",["T_CONSTANT_ENCAPSED_STRING","'Invalid entity supplied: %s'",208],",",["T_WHITESPACE"," ",208],["T_STRING","print_r",208],"(",["T_VARIABLE","$entity",208],",",["T_WHITESPACE"," ",208],["T_LNUMBER","1",208],")",")",")",";",["T_WHITESPACE","\n        ",208],"}",["T_WHITESPACE","\n        ",209],["T_RETURN","return",210],["T_WHITESPACE"," ",210],["T_VARIABLE","$this",210],";",["T_WHITESPACE","\n    ",210],"}",["T_WHITESPACE","\n\n    ",211],["T_DOC_COMMENT","\/**\n     * Get collection's entity object\n     *\n     * @return Mage_Eav_Model_Entity_Abstract\n     *\/",213],["T_WHITESPACE","\n    ",217],["T_PUBLIC","public",218],["T_WHITESPACE"," ",218],["T_FUNCTION","function",218],["T_WHITESPACE"," ",218],["T_STRING","getEntity",218],"(",")",["T_WHITESPACE","\n    ",218],"{",["T_WHITESPACE","\n        ",219],["T_IF","if",220],["T_WHITESPACE"," ",220],"(",["T_EMPTY","empty",220],"(",["T_VARIABLE","$this",220],["T_OBJECT_OPERATOR","->",220],["T_STRING","_entity",220],")",")",["T_WHITESPACE"," ",220],"{",["T_WHITESPACE","\n            ",220],["T_THROW","throw",221],["T_WHITESPACE"," ",221],["T_STRING","Mage",221],["T_DOUBLE_COLON","::",221],["T_STRING","exception",221],"(",["T_CONSTANT_ENCAPSED_STRING","'Mage_Eav'",221],",",["T_WHITESPACE"," ",221],["T_STRING","Mage",221],["T_DOUBLE_COLON","::",221],["T_STRING","helper",221],"(",["T_CONSTANT_ENCAPSED_STRING","'eav'",221],")",["T_OBJECT_OPERATOR","->",221],["T_STRING","__",221],"(",["T_CONSTANT_ENCAPSED_STRING","'Entity is not initialized'",221],")",")",";",["T_WHITESPACE","\n        ",221],"}",["T_WHITESPACE","\n        ",222],["T_RETURN","return",223],["T_WHITESPACE"," ",223],["T_VARIABLE","$this",223],["T_OBJECT_OPERATOR","->",223],["T_STRING","_entity",223],";",["T_WHITESPACE","\n    ",223],"}",["T_WHITESPACE","\n\n    ",224],["T_DOC_COMMENT","\/**\n     * Get resource instance\n     *\n     * @return Mage_Core_Model_Mysql4_Abstract\n     *\/",226],["T_WHITESPACE","\n    ",230],["T_PUBLIC","public",231],["T_WHITESPACE"," ",231],["T_FUNCTION","function",231],["T_WHITESPACE"," ",231],["T_STRING","getResource",231],"(",")",["T_WHITESPACE","\n    ",231],"{",["T_WHITESPACE","\n        ",232],["T_RETURN","return",233],["T_WHITESPACE"," ",233],["T_VARIABLE","$this",233],["T_OBJECT_OPERATOR","->",233],["T_STRING","getEntity",233],"(",")",";",["T_WHITESPACE","\n    ",233],"}",["T_WHITESPACE","\n\n    ",234],["T_DOC_COMMENT","\/**\n     * Set template object for the collection\n     *\n     * @param   Varien_Object $object\n     * @return  Mage_Eav_Model_Entity_Collection_Abstract\n     *\/",236],["T_WHITESPACE","\n    ",241],["T_PUBLIC","public",242],["T_WHITESPACE"," ",242],["T_FUNCTION","function",242],["T_WHITESPACE"," ",242],["T_STRING","setObject",242],"(",["T_VARIABLE","$object",242],"=",["T_STRING","null",242],")",["T_WHITESPACE","\n    ",242],"{",["T_WHITESPACE","\n        ",243],["T_IF","if",244],["T_WHITESPACE"," ",244],"(",["T_STRING","is_object",244],"(",["T_VARIABLE","$object",244],")",")",["T_WHITESPACE"," ",244],"{",["T_WHITESPACE","\n            ",244],["T_VARIABLE","$this",245],["T_OBJECT_OPERATOR","->",245],["T_STRING","setItemObjectClass",245],"(",["T_STRING","get_class",245],"(",["T_VARIABLE","$object",245],")",")",";",["T_WHITESPACE","\n        ",245],"}",["T_WHITESPACE"," ",246],["T_ELSE","else",246],["T_WHITESPACE"," ",246],"{",["T_WHITESPACE","\n            ",246],["T_VARIABLE","$this",247],["T_OBJECT_OPERATOR","->",247],["T_STRING","setItemObjectClass",247],"(",["T_VARIABLE","$object",247],")",";",["T_WHITESPACE","\n        ",247],"}",["T_WHITESPACE","\n\n        ",248],["T_RETURN","return",250],["T_WHITESPACE"," ",250],["T_VARIABLE","$this",250],";",["T_WHITESPACE","\n    ",250],"}",["T_WHITESPACE","\n\n\n    ",251],["T_DOC_COMMENT","\/**\n     * Add an object to the collection\n     *\n     * @param Varien_Object $object\n     * @return Mage_Eav_Model_Entity_Collection_Abstract\n     *\/",254],["T_WHITESPACE","\n    ",259],["T_PUBLIC","public",260],["T_WHITESPACE"," ",260],["T_FUNCTION","function",260],["T_WHITESPACE"," ",260],["T_STRING","addItem",260],"(",["T_STRING","Varien_Object",260],["T_WHITESPACE"," ",260],["T_VARIABLE","$object",260],")",["T_WHITESPACE","\n    ",260],"{",["T_WHITESPACE","\n        ",261],["T_IF","if",262],["T_WHITESPACE"," ",262],"(",["T_STRING","get_class",262],"(",["T_VARIABLE","$object",262],")",["T_WHITESPACE"," ",262],["T_IS_NOT_IDENTICAL","!==",262],["T_WHITESPACE"," ",262],["T_VARIABLE","$this",262],["T_OBJECT_OPERATOR","->",262],["T_STRING","_itemObjectClass",262],")",["T_WHITESPACE"," ",262],"{",["T_WHITESPACE","\n            ",262],["T_THROW","throw",263],["T_WHITESPACE"," ",263],["T_STRING","Mage",263],["T_DOUBLE_COLON","::",263],["T_STRING","exception",263],"(",["T_CONSTANT_ENCAPSED_STRING","'Mage_Eav'",263],",",["T_WHITESPACE"," ",263],["T_STRING","Mage",263],["T_DOUBLE_COLON","::",263],["T_STRING","helper",263],"(",["T_CONSTANT_ENCAPSED_STRING","'eav'",263],")",["T_OBJECT_OPERATOR","->",263],["T_STRING","__",263],"(",["T_CONSTANT_ENCAPSED_STRING","'Attempt to add an invalid object'",263],")",")",";",["T_WHITESPACE","\n        ",263],"}",["T_WHITESPACE","\n        ",264],["T_RETURN","return",265],["T_WHITESPACE"," ",265],["T_STRING","parent",265],["T_DOUBLE_COLON","::",265],["T_STRING","addItem",265],"(",["T_VARIABLE","$object",265],")",";",["T_WHITESPACE","\n    ",265],"}",["T_WHITESPACE","\n\n    ",266],["T_DOC_COMMENT","\/**\n     * Retrieve entity attribute\n     *\n     * @param   string $attributeCode\n     * @return  Mage_Eav_Model_Entity_Attribute_Abstract\n     *\/",268],["T_WHITESPACE","\n    ",273],["T_PUBLIC","public",274],["T_WHITESPACE"," ",274],["T_FUNCTION","function",274],["T_WHITESPACE"," ",274],["T_STRING","getAttribute",274],"(",["T_VARIABLE","$attributeCode",274],")",["T_WHITESPACE","\n    ",274],"{",["T_WHITESPACE","\n        ",275],["T_IF","if",276],["T_WHITESPACE"," ",276],"(",["T_ISSET","isset",276],"(",["T_VARIABLE","$this",276],["T_OBJECT_OPERATOR","->",276],["T_STRING","_joinAttributes",276],"[",["T_VARIABLE","$attributeCode",276],"]",")",")",["T_WHITESPACE"," ",276],"{",["T_WHITESPACE","\n            ",276],["T_RETURN","return",277],["T_WHITESPACE"," ",277],["T_VARIABLE","$this",277],["T_OBJECT_OPERATOR","->",277],["T_STRING","_joinAttributes",277],"[",["T_VARIABLE","$attributeCode",277],"]","[",["T_CONSTANT_ENCAPSED_STRING","'attribute'",277],"]",";",["T_WHITESPACE","\n        ",277],"}",["T_WHITESPACE","\n\n        ",278],["T_RETURN","return",280],["T_WHITESPACE"," ",280],["T_VARIABLE","$this",280],["T_OBJECT_OPERATOR","->",280],["T_STRING","getEntity",280],"(",")",["T_OBJECT_OPERATOR","->",280],["T_STRING","getAttribute",280],"(",["T_VARIABLE","$attributeCode",280],")",";",["T_WHITESPACE","\n    ",280],"}",["T_WHITESPACE","\n\n    ",281],["T_DOC_COMMENT","\/**\n     * Add attribute filter to collection\n     *\n     * If $attribute is an array will add OR condition with following format:\n     * array(\n     *     array('attribute'=>'firstname', 'like'=>'test%'),\n     *     array('attribute'=>'lastname', 'like'=>'test%'),\n     * )\n     *\n     * @see self::_getConditionSql for $condition\n     * @param Mage_Eav_Model_Entity_Attribute_Interface|integer|string|array $attribute\n     * @param null|string|array $condition\n     * @param string $operator\n     * @return Mage_Eav_Model_Entity_Collection_Abstract\n     *\/",283],["T_WHITESPACE","\n    ",297],["T_PUBLIC","public",298],["T_WHITESPACE"," ",298],["T_FUNCTION","function",298],["T_WHITESPACE"," ",298],["T_STRING","addAttributeToFilter",298],"(",["T_VARIABLE","$attribute",298],",",["T_WHITESPACE"," ",298],["T_VARIABLE","$condition",298],["T_WHITESPACE"," ",298],"=",["T_WHITESPACE"," ",298],["T_STRING","null",298],",",["T_WHITESPACE"," ",298],["T_VARIABLE","$joinType",298],["T_WHITESPACE"," ",298],"=",["T_WHITESPACE"," ",298],["T_CONSTANT_ENCAPSED_STRING","'inner'",298],")",["T_WHITESPACE","\n    ",298],"{",["T_WHITESPACE","\n        ",299],["T_IF","if",300],["T_WHITESPACE"," ",300],"(",["T_VARIABLE","$attribute",300],["T_WHITESPACE"," ",300],["T_IS_IDENTICAL","===",300],["T_WHITESPACE"," ",300],["T_STRING","null",300],")",["T_WHITESPACE"," ",300],"{",["T_WHITESPACE","\n            ",300],["T_VARIABLE","$this",301],["T_OBJECT_OPERATOR","->",301],["T_STRING","getSelect",301],"(",")",";",["T_WHITESPACE","\n            ",301],["T_RETURN","return",302],["T_WHITESPACE"," ",302],["T_VARIABLE","$this",302],";",["T_WHITESPACE","\n        ",302],"}",["T_WHITESPACE","\n\n        ",303],["T_IF","if",305],["T_WHITESPACE"," ",305],"(",["T_STRING","is_numeric",305],"(",["T_VARIABLE","$attribute",305],")",")",["T_WHITESPACE"," ",305],"{",["T_WHITESPACE","\n            ",305],["T_VARIABLE","$attribute",306],["T_WHITESPACE"," ",306],"=",["T_WHITESPACE"," ",306],["T_VARIABLE","$this",306],["T_OBJECT_OPERATOR","->",306],["T_STRING","getEntity",306],"(",")",["T_OBJECT_OPERATOR","->",306],["T_STRING","getAttribute",306],"(",["T_VARIABLE","$attribute",306],")",["T_OBJECT_OPERATOR","->",306],["T_STRING","getAttributeCode",306],"(",")",";",["T_WHITESPACE","\n        ",306],"}",["T_WHITESPACE"," ",307],["T_ELSE","else",307],["T_WHITESPACE"," ",307],["T_IF","if",307],["T_WHITESPACE"," ",307],"(",["T_VARIABLE","$attribute",307],["T_WHITESPACE"," ",307],["T_INSTANCEOF","instanceof",307],["T_WHITESPACE"," ",307],["T_STRING","Mage_Eav_Model_Entity_Attribute_Interface",307],")",["T_WHITESPACE"," ",307],"{",["T_WHITESPACE","\n            ",307],["T_VARIABLE","$attribute",308],["T_WHITESPACE"," ",308],"=",["T_WHITESPACE"," ",308],["T_VARIABLE","$attribute",308],["T_OBJECT_OPERATOR","->",308],["T_STRING","getAttributeCode",308],"(",")",";",["T_WHITESPACE","\n        ",308],"}",["T_WHITESPACE","\n\n        ",309],["T_IF","if",311],["T_WHITESPACE"," ",311],"(",["T_STRING","is_array",311],"(",["T_VARIABLE","$attribute",311],")",")",["T_WHITESPACE"," ",311],"{",["T_WHITESPACE","\n            ",311],["T_VARIABLE","$sqlArr",312],["T_WHITESPACE"," ",312],"=",["T_WHITESPACE"," ",312],["T_ARRAY","array",312],"(",")",";",["T_WHITESPACE","\n            ",312],["T_FOREACH","foreach",313],["T_WHITESPACE"," ",313],"(",["T_VARIABLE","$attribute",313],["T_WHITESPACE"," ",313],["T_AS","as",313],["T_WHITESPACE"," ",313],["T_VARIABLE","$condition",313],")",["T_WHITESPACE"," ",313],"{",["T_WHITESPACE","\n                ",313],["T_VARIABLE","$sqlArr",314],"[","]",["T_WHITESPACE"," ",314],"=",["T_WHITESPACE"," ",314],["T_VARIABLE","$this",314],["T_OBJECT_OPERATOR","->",314],["T_STRING","_getAttributeConditionSql",314],"(",["T_VARIABLE","$condition",314],"[",["T_CONSTANT_ENCAPSED_STRING","'attribute'",314],"]",",",["T_WHITESPACE"," ",314],["T_VARIABLE","$condition",314],",",["T_WHITESPACE"," ",314],["T_VARIABLE","$joinType",314],")",";",["T_WHITESPACE","\n            ",314],"}",["T_WHITESPACE","\n            ",315],["T_VARIABLE","$conditionSql",316],["T_WHITESPACE"," ",316],"=",["T_WHITESPACE"," ",316],["T_CONSTANT_ENCAPSED_STRING","'('",316],".",["T_STRING","implode",316],"(",["T_CONSTANT_ENCAPSED_STRING","') OR ('",316],",",["T_WHITESPACE"," ",316],["T_VARIABLE","$sqlArr",316],")",".",["T_CONSTANT_ENCAPSED_STRING","')'",316],";",["T_WHITESPACE","\n        ",316],"}",["T_WHITESPACE"," ",317],["T_ELSE","else",317],["T_WHITESPACE"," ",317],["T_IF","if",317],["T_WHITESPACE"," ",317],"(",["T_STRING","is_string",317],"(",["T_VARIABLE","$attribute",317],")",")",["T_WHITESPACE"," ",317],"{",["T_WHITESPACE","\n            ",317],["T_IF","if",318],["T_WHITESPACE"," ",318],"(",["T_VARIABLE","$condition",318],["T_WHITESPACE"," ",318],["T_IS_IDENTICAL","===",318],["T_WHITESPACE"," ",318],["T_STRING","null",318],")",["T_WHITESPACE"," ",318],"{",["T_WHITESPACE","\n                ",318],["T_VARIABLE","$condition",319],["T_WHITESPACE"," ",319],"=",["T_WHITESPACE"," ",319],["T_CONSTANT_ENCAPSED_STRING","''",319],";",["T_WHITESPACE","\n            ",319],"}",["T_WHITESPACE","\n            ",320],["T_VARIABLE","$conditionSql",321],["T_WHITESPACE"," ",321],"=",["T_WHITESPACE"," ",321],["T_VARIABLE","$this",321],["T_OBJECT_OPERATOR","->",321],["T_STRING","_getAttributeConditionSql",321],"(",["T_VARIABLE","$attribute",321],",",["T_WHITESPACE"," ",321],["T_VARIABLE","$condition",321],",",["T_WHITESPACE"," ",321],["T_VARIABLE","$joinType",321],")",";",["T_WHITESPACE","\n        ",321],"}",["T_WHITESPACE","\n\n        ",322],["T_IF","if",324],["T_WHITESPACE"," ",324],"(","!",["T_EMPTY","empty",324],"(",["T_VARIABLE","$conditionSql",324],")",")",["T_WHITESPACE"," ",324],"{",["T_WHITESPACE","\n            ",324],["T_VARIABLE","$this",325],["T_OBJECT_OPERATOR","->",325],["T_STRING","getSelect",325],"(",")",["T_OBJECT_OPERATOR","->",325],["T_STRING","where",325],"(",["T_VARIABLE","$conditionSql",325],",",["T_WHITESPACE"," ",325],["T_STRING","null",325],",",["T_WHITESPACE"," ",325],["T_STRING","Varien_Db_Select",325],["T_DOUBLE_COLON","::",325],["T_STRING","TYPE_CONDITION",325],")",";",["T_WHITESPACE","\n        ",325],"}",["T_WHITESPACE"," ",326],["T_ELSE","else",326],["T_WHITESPACE"," ",326],"{",["T_WHITESPACE","\n            ",326],["T_STRING","Mage",327],["T_DOUBLE_COLON","::",327],["T_STRING","throwException",327],"(",["T_CONSTANT_ENCAPSED_STRING","'Invalid attribute identifier for filter ('",327],".",["T_STRING","get_class",327],"(",["T_VARIABLE","$attribute",327],")",".",["T_CONSTANT_ENCAPSED_STRING","')'",327],")",";",["T_WHITESPACE","\n        ",327],"}",["T_WHITESPACE","\n\n        ",328],["T_RETURN","return",330],["T_WHITESPACE"," ",330],["T_VARIABLE","$this",330],";",["T_WHITESPACE","\n    ",330],"}",["T_WHITESPACE","\n\n    ",331],["T_DOC_COMMENT","\/**\n     * Wrapper for compatibility with Varien_Data_Collection_Db\n     *\n     * @param mixed $attribute\n     * @param mixed $condition\n     *\/",333],["T_WHITESPACE","\n    ",338],["T_PUBLIC","public",339],["T_WHITESPACE"," ",339],["T_FUNCTION","function",339],["T_WHITESPACE"," ",339],["T_STRING","addFieldToFilter",339],"(",["T_VARIABLE","$attribute",339],",",["T_WHITESPACE"," ",339],["T_VARIABLE","$condition",339],["T_WHITESPACE"," ",339],"=",["T_WHITESPACE"," ",339],["T_STRING","null",339],")",["T_WHITESPACE","\n    ",339],"{",["T_WHITESPACE","\n        ",340],["T_RETURN","return",341],["T_WHITESPACE"," ",341],["T_VARIABLE","$this",341],["T_OBJECT_OPERATOR","->",341],["T_STRING","addAttributeToFilter",341],"(",["T_VARIABLE","$attribute",341],",",["T_WHITESPACE"," ",341],["T_VARIABLE","$condition",341],")",";",["T_WHITESPACE","\n    ",341],"}",["T_WHITESPACE","\n\n    ",342],["T_DOC_COMMENT","\/**\n     * Add attribute to sort order\n     *\n     * @param string $attribute\n     * @param string $dir\n     * @return Mage_Eav_Model_Entity_Collection_Abstract\n     *\/",344],["T_WHITESPACE","\n    ",350],["T_PUBLIC","public",351],["T_WHITESPACE"," ",351],["T_FUNCTION","function",351],["T_WHITESPACE"," ",351],["T_STRING","addAttributeToSort",351],"(",["T_VARIABLE","$attribute",351],",",["T_WHITESPACE"," ",351],["T_VARIABLE","$dir",351],["T_WHITESPACE"," ",351],"=",["T_WHITESPACE"," ",351],["T_STRING","self",351],["T_DOUBLE_COLON","::",351],["T_STRING","SORT_ORDER_ASC",351],")",["T_WHITESPACE","\n    ",351],"{",["T_WHITESPACE","\n        ",352],["T_IF","if",353],["T_WHITESPACE"," ",353],"(",["T_ISSET","isset",353],"(",["T_VARIABLE","$this",353],["T_OBJECT_OPERATOR","->",353],["T_STRING","_joinFields",353],"[",["T_VARIABLE","$attribute",353],"]",")",")",["T_WHITESPACE"," ",353],"{",["T_WHITESPACE","\n            ",353],["T_VARIABLE","$this",354],["T_OBJECT_OPERATOR","->",354],["T_STRING","getSelect",354],"(",")",["T_OBJECT_OPERATOR","->",354],["T_STRING","order",354],"(",["T_VARIABLE","$this",354],["T_OBJECT_OPERATOR","->",354],["T_STRING","_getAttributeFieldName",354],"(",["T_VARIABLE","$attribute",354],")",".",["T_CONSTANT_ENCAPSED_STRING","' '",354],".",["T_VARIABLE","$dir",354],")",";",["T_WHITESPACE","\n            ",354],["T_RETURN","return",355],["T_WHITESPACE"," ",355],["T_VARIABLE","$this",355],";",["T_WHITESPACE","\n        ",355],"}",["T_WHITESPACE","\n        ",356],["T_IF","if",357],["T_WHITESPACE"," ",357],"(",["T_ISSET","isset",357],"(",["T_VARIABLE","$this",357],["T_OBJECT_OPERATOR","->",357],["T_STRING","_staticFields",357],"[",["T_VARIABLE","$attribute",357],"]",")",")",["T_WHITESPACE"," ",357],"{",["T_WHITESPACE","\n            ",357],["T_VARIABLE","$this",358],["T_OBJECT_OPERATOR","->",358],["T_STRING","getSelect",358],"(",")",["T_OBJECT_OPERATOR","->",358],["T_STRING","order",358],"(","\"",["T_ENCAPSED_AND_WHITESPACE","e.",358],["T_CURLY_OPEN","{",358],["T_VARIABLE","$attribute",358],"}",["T_ENCAPSED_AND_WHITESPACE"," ",358],["T_CURLY_OPEN","{",358],["T_VARIABLE","$dir",358],"}","\"",")",";",["T_WHITESPACE","\n            ",358],["T_RETURN","return",359],["T_WHITESPACE"," ",359],["T_VARIABLE","$this",359],";",["T_WHITESPACE","\n        ",359],"}",["T_WHITESPACE","\n        ",360],["T_IF","if",361],["T_WHITESPACE"," ",361],"(",["T_ISSET","isset",361],"(",["T_VARIABLE","$this",361],["T_OBJECT_OPERATOR","->",361],["T_STRING","_joinAttributes",361],"[",["T_VARIABLE","$attribute",361],"]",")",")",["T_WHITESPACE"," ",361],"{",["T_WHITESPACE","\n            ",361],["T_VARIABLE","$attrInstance",362],["T_WHITESPACE"," ",362],"=",["T_WHITESPACE"," ",362],["T_VARIABLE","$this",362],["T_OBJECT_OPERATOR","->",362],["T_STRING","_joinAttributes",362],"[",["T_VARIABLE","$attribute",362],"]","[",["T_CONSTANT_ENCAPSED_STRING","'attribute'",362],"]",";",["T_WHITESPACE","\n            ",362],["T_VARIABLE","$entityField",363],["T_WHITESPACE"," ",363],"=",["T_WHITESPACE"," ",363],["T_VARIABLE","$this",363],["T_OBJECT_OPERATOR","->",363],["T_STRING","_getAttributeTableAlias",363],"(",["T_VARIABLE","$attribute",363],")",["T_WHITESPACE"," ",363],".",["T_WHITESPACE"," ",363],["T_CONSTANT_ENCAPSED_STRING","'.'",363],["T_WHITESPACE"," ",363],".",["T_WHITESPACE"," ",363],["T_VARIABLE","$attrInstance",363],["T_OBJECT_OPERATOR","->",363],["T_STRING","getAttributeCode",363],"(",")",";",["T_WHITESPACE","\n        ",363],"}",["T_WHITESPACE"," ",364],["T_ELSE","else",364],["T_WHITESPACE"," ",364],"{",["T_WHITESPACE","\n            ",364],["T_VARIABLE","$attrInstance",365],["T_WHITESPACE"," ",365],"=",["T_WHITESPACE"," ",365],["T_VARIABLE","$this",365],["T_OBJECT_OPERATOR","->",365],["T_STRING","getEntity",365],"(",")",["T_OBJECT_OPERATOR","->",365],["T_STRING","getAttribute",365],"(",["T_VARIABLE","$attribute",365],")",";",["T_WHITESPACE","\n            ",365],["T_VARIABLE","$entityField",366],["T_WHITESPACE"," ",366],"=",["T_WHITESPACE"," ",366],["T_CONSTANT_ENCAPSED_STRING","'e.'",366],["T_WHITESPACE"," ",366],".",["T_WHITESPACE"," ",366],["T_VARIABLE","$attribute",366],";",["T_WHITESPACE","\n        ",366],"}",["T_WHITESPACE","\n\n        ",367],["T_IF","if",369],["T_WHITESPACE"," ",369],"(",["T_VARIABLE","$attrInstance",369],")",["T_WHITESPACE"," ",369],"{",["T_WHITESPACE","\n            ",369],["T_IF","if",370],["T_WHITESPACE"," ",370],"(",["T_VARIABLE","$attrInstance",370],["T_OBJECT_OPERATOR","->",370],["T_STRING","getBackend",370],"(",")",["T_OBJECT_OPERATOR","->",370],["T_STRING","isStatic",370],"(",")",")",["T_WHITESPACE"," ",370],"{",["T_WHITESPACE","\n                ",370],["T_VARIABLE","$orderExpr",371],["T_WHITESPACE"," ",371],"=",["T_WHITESPACE"," ",371],["T_VARIABLE","$entityField",371],";",["T_WHITESPACE","\n            ",371],"}",["T_WHITESPACE"," ",372],["T_ELSE","else",372],["T_WHITESPACE"," ",372],"{",["T_WHITESPACE","\n                ",372],["T_VARIABLE","$this",373],["T_OBJECT_OPERATOR","->",373],["T_STRING","_addAttributeJoin",373],"(",["T_VARIABLE","$attribute",373],",",["T_WHITESPACE"," ",373],["T_CONSTANT_ENCAPSED_STRING","'left'",373],")",";",["T_WHITESPACE","\n                ",373],["T_IF","if",374],["T_WHITESPACE"," ",374],"(",["T_ISSET","isset",374],"(",["T_VARIABLE","$this",374],["T_OBJECT_OPERATOR","->",374],["T_STRING","_joinAttributes",374],"[",["T_VARIABLE","$attribute",374],"]",")",["T_BOOLEAN_OR","||",374],["T_ISSET","isset",374],"(",["T_VARIABLE","$this",374],["T_OBJECT_OPERATOR","->",374],["T_STRING","_joinFields",374],"[",["T_VARIABLE","$attribute",374],"]",")",")",["T_WHITESPACE"," ",374],"{",["T_WHITESPACE","\n                    ",374],["T_VARIABLE","$orderExpr",375],["T_WHITESPACE"," ",375],"=",["T_WHITESPACE"," ",375],["T_VARIABLE","$attribute",375],";",["T_WHITESPACE","\n                ",375],"}",["T_WHITESPACE"," ",376],["T_ELSE","else",376],["T_WHITESPACE"," ",376],"{",["T_WHITESPACE","\n                    ",376],["T_VARIABLE","$orderExpr",377],["T_WHITESPACE"," ",377],"=",["T_WHITESPACE"," ",377],["T_VARIABLE","$this",377],["T_OBJECT_OPERATOR","->",377],["T_STRING","_getAttributeTableAlias",377],"(",["T_VARIABLE","$attribute",377],")",".",["T_CONSTANT_ENCAPSED_STRING","'.value'",377],";",["T_WHITESPACE","\n                ",377],"}",["T_WHITESPACE","\n            ",378],"}",["T_WHITESPACE","\n\n            ",379],["T_IF","if",381],["T_WHITESPACE"," ",381],"(",["T_STRING","in_array",381],"(",["T_VARIABLE","$attrInstance",381],["T_OBJECT_OPERATOR","->",381],["T_STRING","getFrontendClass",381],"(",")",",",["T_WHITESPACE"," ",381],["T_VARIABLE","$this",381],["T_OBJECT_OPERATOR","->",381],["T_STRING","_castToIntMap",381],")",")",["T_WHITESPACE"," ",381],"{",["T_WHITESPACE","\n                ",381],["T_VARIABLE","$orderExpr",382],["T_WHITESPACE"," ",382],"=",["T_WHITESPACE"," ",382],["T_STRING","Mage",382],["T_DOUBLE_COLON","::",382],["T_STRING","getResourceHelper",382],"(",["T_CONSTANT_ENCAPSED_STRING","'eav'",382],")",["T_OBJECT_OPERATOR","->",382],["T_STRING","getCastToIntExpression",382],"(",["T_WHITESPACE","\n                    ",382],["T_VARIABLE","$this",383],["T_OBJECT_OPERATOR","->",383],["T_STRING","_prepareOrderExpression",383],"(",["T_VARIABLE","$orderExpr",383],")",["T_WHITESPACE","\n                ",383],")",";",["T_WHITESPACE","\n            ",384],"}",["T_WHITESPACE","\n\n            ",385],["T_VARIABLE","$orderExpr",387],["T_WHITESPACE"," ",387],["T_CONCAT_EQUAL",".=",387],["T_WHITESPACE"," ",387],["T_CONSTANT_ENCAPSED_STRING","' '",387],["T_WHITESPACE"," ",387],".",["T_WHITESPACE"," ",387],["T_VARIABLE","$dir",387],";",["T_WHITESPACE","\n            ",387],["T_VARIABLE","$this",388],["T_OBJECT_OPERATOR","->",388],["T_STRING","getSelect",388],"(",")",["T_OBJECT_OPERATOR","->",388],["T_STRING","order",388],"(",["T_VARIABLE","$orderExpr",388],")",";",["T_WHITESPACE","\n        ",388],"}",["T_WHITESPACE","\n        ",389],["T_RETURN","return",390],["T_WHITESPACE"," ",390],["T_VARIABLE","$this",390],";",["T_WHITESPACE","\n    ",390],"}",["T_WHITESPACE","\n\n    ",391],["T_DOC_COMMENT","\/**\n     * Retrieve attribute expression by specified column\n     *\n     * @param string $field\n     * @return string|Zend_Db_Expr\n     *\/",393],["T_WHITESPACE","\n    ",398],["T_PROTECTED","protected",399],["T_WHITESPACE"," ",399],["T_FUNCTION","function",399],["T_WHITESPACE"," ",399],["T_STRING","_prepareOrderExpression",399],"(",["T_VARIABLE","$field",399],")",["T_WHITESPACE","\n    ",399],"{",["T_WHITESPACE","\n        ",400],["T_FOREACH","foreach",401],["T_WHITESPACE"," ",401],"(",["T_VARIABLE","$this",401],["T_OBJECT_OPERATOR","->",401],["T_STRING","getSelect",401],"(",")",["T_OBJECT_OPERATOR","->",401],["T_STRING","getPart",401],"(",["T_STRING","Zend_Db_Select",401],["T_DOUBLE_COLON","::",401],["T_STRING","COLUMNS",401],")",["T_WHITESPACE"," ",401],["T_AS","as",401],["T_WHITESPACE"," ",401],["T_VARIABLE","$columnEntry",401],")",["T_WHITESPACE"," ",401],"{",["T_WHITESPACE","\n            ",401],["T_IF","if",402],["T_WHITESPACE"," ",402],"(",["T_VARIABLE","$columnEntry",402],"[",["T_LNUMBER","2",402],"]",["T_WHITESPACE"," ",402],["T_IS_NOT_EQUAL","!=",402],["T_WHITESPACE"," ",402],["T_VARIABLE","$field",402],")",["T_WHITESPACE"," ",402],"{",["T_WHITESPACE","\n                ",402],["T_CONTINUE","continue",403],";",["T_WHITESPACE","\n            ",403],"}",["T_WHITESPACE","\n            ",404],["T_IF","if",405],["T_WHITESPACE"," ",405],"(",["T_VARIABLE","$columnEntry",405],"[",["T_LNUMBER","1",405],"]",["T_WHITESPACE"," ",405],["T_INSTANCEOF","instanceof",405],["T_WHITESPACE"," ",405],["T_STRING","Zend_Db_Expr",405],")",["T_WHITESPACE"," ",405],"{",["T_WHITESPACE","\n                ",405],["T_RETURN","return",406],["T_WHITESPACE"," ",406],["T_VARIABLE","$columnEntry",406],"[",["T_LNUMBER","1",406],"]",";",["T_WHITESPACE","\n            ",406],"}",["T_WHITESPACE","\n        ",407],"}",["T_WHITESPACE","\n        ",408],["T_RETURN","return",409],["T_WHITESPACE"," ",409],["T_VARIABLE","$field",409],";",["T_WHITESPACE","\n    ",409],"}",["T_WHITESPACE","\n\n    ",410],["T_DOC_COMMENT","\/**\n     * Add attribute to entities in collection\n     *\n     * If $attribute=='*' select all attributes\n     *\n     * @param   array|string|integer|Mage_Core_Model_Config_Element $attribute\n     * @param   false|string $joinType flag for joining attribute\n     * @return  Mage_Eav_Model_Entity_Collection_Abstract\n     *\/",412],["T_WHITESPACE","\n    ",420],["T_PUBLIC","public",421],["T_WHITESPACE"," ",421],["T_FUNCTION","function",421],["T_WHITESPACE"," ",421],["T_STRING","addAttributeToSelect",421],"(",["T_VARIABLE","$attribute",421],",",["T_WHITESPACE"," ",421],["T_VARIABLE","$joinType",421],["T_WHITESPACE"," ",421],"=",["T_WHITESPACE"," ",421],["T_STRING","false",421],")",["T_WHITESPACE","\n    ",421],"{",["T_WHITESPACE","\n        ",422],["T_IF","if",423],["T_WHITESPACE"," ",423],"(",["T_STRING","is_array",423],"(",["T_VARIABLE","$attribute",423],")",")",["T_WHITESPACE"," ",423],"{",["T_WHITESPACE","\n            ",423],["T_STRING","Mage",424],["T_DOUBLE_COLON","::",424],["T_STRING","getSingleton",424],"(",["T_CONSTANT_ENCAPSED_STRING","'eav\/config'",424],")",["T_OBJECT_OPERATOR","->",424],["T_STRING","loadCollectionAttributes",424],"(",["T_VARIABLE","$this",424],["T_OBJECT_OPERATOR","->",424],["T_STRING","getEntity",424],"(",")",["T_OBJECT_OPERATOR","->",424],["T_STRING","getType",424],"(",")",",",["T_WHITESPACE"," ",424],["T_VARIABLE","$attribute",424],")",";",["T_WHITESPACE","\n            ",424],["T_FOREACH","foreach",425],["T_WHITESPACE"," ",425],"(",["T_VARIABLE","$attribute",425],["T_WHITESPACE"," ",425],["T_AS","as",425],["T_WHITESPACE"," ",425],["T_VARIABLE","$a",425],")",["T_WHITESPACE"," ",425],"{",["T_WHITESPACE","\n                ",425],["T_VARIABLE","$this",426],["T_OBJECT_OPERATOR","->",426],["T_STRING","addAttributeToSelect",426],"(",["T_VARIABLE","$a",426],",",["T_WHITESPACE"," ",426],["T_VARIABLE","$joinType",426],")",";",["T_WHITESPACE","\n            ",426],"}",["T_WHITESPACE","\n            ",427],["T_RETURN","return",428],["T_WHITESPACE"," ",428],["T_VARIABLE","$this",428],";",["T_WHITESPACE","\n        ",428],"}",["T_WHITESPACE","\n        ",429],["T_IF","if",430],["T_WHITESPACE"," ",430],"(",["T_VARIABLE","$joinType",430],["T_WHITESPACE"," ",430],["T_IS_NOT_IDENTICAL","!==",430],["T_WHITESPACE"," ",430],["T_STRING","false",430],["T_WHITESPACE"," ",430],["T_BOOLEAN_AND","&&",430],["T_WHITESPACE"," ",430],"!",["T_VARIABLE","$this",430],["T_OBJECT_OPERATOR","->",430],["T_STRING","getEntity",430],"(",")",["T_OBJECT_OPERATOR","->",430],["T_STRING","getAttribute",430],"(",["T_VARIABLE","$attribute",430],")",["T_OBJECT_OPERATOR","->",430],["T_STRING","isStatic",430],"(",")",")",["T_WHITESPACE"," ",430],"{",["T_WHITESPACE","\n            ",430],["T_VARIABLE","$this",431],["T_OBJECT_OPERATOR","->",431],["T_STRING","_addAttributeJoin",431],"(",["T_VARIABLE","$attribute",431],",",["T_WHITESPACE"," ",431],["T_VARIABLE","$joinType",431],")",";",["T_WHITESPACE","\n        ",431],"}",["T_WHITESPACE"," ",432],["T_ELSEIF","elseif",432],["T_WHITESPACE"," ",432],"(",["T_CONSTANT_ENCAPSED_STRING","'*'",432],["T_WHITESPACE"," ",432],["T_IS_IDENTICAL","===",432],["T_WHITESPACE"," ",432],["T_VARIABLE","$attribute",432],")",["T_WHITESPACE"," ",432],"{",["T_WHITESPACE","\n            ",432],["T_VARIABLE","$entity",433],["T_WHITESPACE"," ",433],"=",["T_WHITESPACE"," ",433],["T_CLONE","clone",433],["T_WHITESPACE"," ",433],["T_VARIABLE","$this",433],["T_OBJECT_OPERATOR","->",433],["T_STRING","getEntity",433],"(",")",";",["T_WHITESPACE","\n            ",433],["T_VARIABLE","$attributes",434],["T_WHITESPACE"," ",434],"=",["T_WHITESPACE"," ",434],["T_VARIABLE","$entity",434],["T_WHITESPACE","\n                ",434],["T_OBJECT_OPERATOR","->",435],["T_STRING","loadAllAttributes",435],"(",")",["T_WHITESPACE","\n                ",435],["T_OBJECT_OPERATOR","->",436],["T_STRING","getAttributesByCode",436],"(",")",";",["T_WHITESPACE","\n            ",436],["T_FOREACH","foreach",437],["T_WHITESPACE"," ",437],"(",["T_VARIABLE","$attributes",437],["T_WHITESPACE"," ",437],["T_AS","as",437],["T_WHITESPACE"," ",437],["T_VARIABLE","$attrCode",437],["T_DOUBLE_ARROW","=>",437],["T_VARIABLE","$attr",437],")",["T_WHITESPACE"," ",437],"{",["T_WHITESPACE","\n                ",437],["T_VARIABLE","$this",438],["T_OBJECT_OPERATOR","->",438],["T_STRING","_selectAttributes",438],"[",["T_VARIABLE","$attrCode",438],"]",["T_WHITESPACE"," ",438],"=",["T_WHITESPACE"," ",438],["T_VARIABLE","$attr",438],["T_OBJECT_OPERATOR","->",438],["T_STRING","getId",438],"(",")",";",["T_WHITESPACE","\n            ",438],"}",["T_WHITESPACE","\n        ",439],"}",["T_WHITESPACE"," ",440],["T_ELSE","else",440],["T_WHITESPACE"," ",440],"{",["T_WHITESPACE","\n            ",440],["T_IF","if",441],["T_WHITESPACE"," ",441],"(",["T_ISSET","isset",441],"(",["T_VARIABLE","$this",441],["T_OBJECT_OPERATOR","->",441],["T_STRING","_joinAttributes",441],"[",["T_VARIABLE","$attribute",441],"]",")",")",["T_WHITESPACE"," ",441],"{",["T_WHITESPACE","\n                ",441],["T_VARIABLE","$attrInstance",442],["T_WHITESPACE"," ",442],"=",["T_WHITESPACE"," ",442],["T_VARIABLE","$this",442],["T_OBJECT_OPERATOR","->",442],["T_STRING","_joinAttributes",442],"[",["T_VARIABLE","$attribute",442],"]","[",["T_CONSTANT_ENCAPSED_STRING","'attribute'",442],"]",";",["T_WHITESPACE","\n            ",442],"}",["T_WHITESPACE"," ",443],["T_ELSE","else",443],["T_WHITESPACE"," ",443],"{",["T_WHITESPACE","\n                ",443],["T_VARIABLE","$attrInstance",444],["T_WHITESPACE"," ",444],"=",["T_WHITESPACE"," ",444],["T_STRING","Mage",444],["T_DOUBLE_COLON","::",444],["T_STRING","getSingleton",444],"(",["T_CONSTANT_ENCAPSED_STRING","'eav\/config'",444],")",["T_WHITESPACE","\n                    ",444],["T_OBJECT_OPERATOR","->",445],["T_STRING","getCollectionAttribute",445],"(",["T_VARIABLE","$this",445],["T_OBJECT_OPERATOR","->",445],["T_STRING","getEntity",445],"(",")",["T_OBJECT_OPERATOR","->",445],["T_STRING","getType",445],"(",")",",",["T_WHITESPACE"," ",445],["T_VARIABLE","$attribute",445],")",";",["T_WHITESPACE","\n            ",445],"}",["T_WHITESPACE","\n            ",446],["T_IF","if",447],["T_WHITESPACE"," ",447],"(",["T_EMPTY","empty",447],"(",["T_VARIABLE","$attrInstance",447],")",")",["T_WHITESPACE"," ",447],"{",["T_WHITESPACE","\n                ",447],["T_THROW","throw",448],["T_WHITESPACE"," ",448],["T_STRING","Mage",448],["T_DOUBLE_COLON","::",448],["T_STRING","exception",448],"(",["T_WHITESPACE","\n                    ",448],["T_CONSTANT_ENCAPSED_STRING","'Mage_Eav'",449],",",["T_WHITESPACE","\n                    ",449],["T_STRING","Mage",450],["T_DOUBLE_COLON","::",450],["T_STRING","helper",450],"(",["T_CONSTANT_ENCAPSED_STRING","'eav'",450],")",["T_OBJECT_OPERATOR","->",450],["T_STRING","__",450],"(",["T_CONSTANT_ENCAPSED_STRING","'Invalid attribute requested: %s'",450],",",["T_WHITESPACE"," ",450],["T_STRING_CAST","(string)",450],["T_VARIABLE","$attribute",450],")",["T_WHITESPACE","\n                ",450],")",";",["T_WHITESPACE","\n            ",451],"}",["T_WHITESPACE","\n            ",452],["T_VARIABLE","$this",453],["T_OBJECT_OPERATOR","->",453],["T_STRING","_selectAttributes",453],"[",["T_VARIABLE","$attrInstance",453],["T_OBJECT_OPERATOR","->",453],["T_STRING","getAttributeCode",453],"(",")","]",["T_WHITESPACE"," ",453],"=",["T_WHITESPACE"," ",453],["T_VARIABLE","$attrInstance",453],["T_OBJECT_OPERATOR","->",453],["T_STRING","getId",453],"(",")",";",["T_WHITESPACE","\n        ",453],"}",["T_WHITESPACE","\n        ",454],["T_RETURN","return",455],["T_WHITESPACE"," ",455],["T_VARIABLE","$this",455],";",["T_WHITESPACE","\n    ",455],"}",["T_WHITESPACE","\n\n    ",456],["T_PUBLIC","public",458],["T_WHITESPACE"," ",458],["T_FUNCTION","function",458],["T_WHITESPACE"," ",458],["T_STRING","addEntityTypeToSelect",458],"(",["T_VARIABLE","$entityType",458],",",["T_WHITESPACE"," ",458],["T_VARIABLE","$prefix",458],")",["T_WHITESPACE","\n    ",458],"{",["T_WHITESPACE","\n        ",459],["T_VARIABLE","$this",460],["T_OBJECT_OPERATOR","->",460],["T_STRING","_selectEntityTypes",460],"[",["T_VARIABLE","$entityType",460],"]",["T_WHITESPACE"," ",460],"=",["T_WHITESPACE"," ",460],["T_ARRAY","array",460],"(",["T_WHITESPACE","\n            ",460],["T_CONSTANT_ENCAPSED_STRING","'prefix'",461],["T_WHITESPACE"," ",461],["T_DOUBLE_ARROW","=>",461],["T_WHITESPACE"," ",461],["T_VARIABLE","$prefix",461],",",["T_WHITESPACE","\n        ",461],")",";",["T_WHITESPACE","\n        ",462],["T_RETURN","return",463],["T_WHITESPACE"," ",463],["T_VARIABLE","$this",463],";",["T_WHITESPACE","\n    ",463],"}",["T_WHITESPACE","\n\n    ",464],["T_DOC_COMMENT","\/**\n     * Add field to static\n     *\n     * @param string $field\n     * @return Mage_Eav_Model_Entity_Collection_Abstract\n     *\/",466],["T_WHITESPACE","\n    ",471],["T_PUBLIC","public",472],["T_WHITESPACE"," ",472],["T_FUNCTION","function",472],["T_WHITESPACE"," ",472],["T_STRING","addStaticField",472],"(",["T_VARIABLE","$field",472],")",["T_WHITESPACE","\n    ",472],"{",["T_WHITESPACE","\n        ",473],["T_IF","if",474],["T_WHITESPACE"," ",474],"(","!",["T_ISSET","isset",474],"(",["T_VARIABLE","$this",474],["T_OBJECT_OPERATOR","->",474],["T_STRING","_staticFields",474],"[",["T_VARIABLE","$field",474],"]",")",")",["T_WHITESPACE"," ",474],"{",["T_WHITESPACE","\n            ",474],["T_VARIABLE","$this",475],["T_OBJECT_OPERATOR","->",475],["T_STRING","_staticFields",475],"[",["T_VARIABLE","$field",475],"]",["T_WHITESPACE"," ",475],"=",["T_WHITESPACE"," ",475],["T_VARIABLE","$field",475],";",["T_WHITESPACE","\n        ",475],"}",["T_WHITESPACE","\n        ",476],["T_RETURN","return",477],["T_WHITESPACE"," ",477],["T_VARIABLE","$this",477],";",["T_WHITESPACE","\n    ",477],"}",["T_WHITESPACE","\n\n    ",478],["T_DOC_COMMENT","\/**\n     * Add attribute expression (SUM, COUNT, etc)\n     *\n     * Example: ('sub_total', 'SUM({{attribute}})', 'revenue')\n     * Example: ('sub_total', 'SUM({{revenue}})', 'revenue')\n     *\n     * For some functions like SUM use groupByAttribute.\n     *\n     * @param string $alias\n     * @param string $expression\n     * @param string $attribute\n     * @return Mage_Eav_Model_Entity_Collection_Abstract\n     *\/",480],["T_WHITESPACE","\n    ",492],["T_PUBLIC","public",493],["T_WHITESPACE"," ",493],["T_FUNCTION","function",493],["T_WHITESPACE"," ",493],["T_STRING","addExpressionAttributeToSelect",493],"(",["T_VARIABLE","$alias",493],",",["T_WHITESPACE"," ",493],["T_VARIABLE","$expression",493],",",["T_WHITESPACE"," ",493],["T_VARIABLE","$attribute",493],")",["T_WHITESPACE","\n    ",493],"{",["T_WHITESPACE","\n        ",494],["T_COMMENT","\/\/ validate alias\n",495],["T_WHITESPACE","        ",496],["T_IF","if",496],["T_WHITESPACE"," ",496],"(",["T_ISSET","isset",496],"(",["T_VARIABLE","$this",496],["T_OBJECT_OPERATOR","->",496],["T_STRING","_joinFields",496],"[",["T_VARIABLE","$alias",496],"]",")",")",["T_WHITESPACE"," ",496],"{",["T_WHITESPACE","\n            ",496],["T_THROW","throw",497],["T_WHITESPACE"," ",497],["T_STRING","Mage",497],["T_DOUBLE_COLON","::",497],["T_STRING","exception",497],"(",["T_WHITESPACE","\n                ",497],["T_CONSTANT_ENCAPSED_STRING","'Mage_Eav'",498],",",["T_WHITESPACE","\n                ",498],["T_STRING","Mage",499],["T_DOUBLE_COLON","::",499],["T_STRING","helper",499],"(",["T_CONSTANT_ENCAPSED_STRING","'eav'",499],")",["T_OBJECT_OPERATOR","->",499],["T_STRING","__",499],"(",["T_CONSTANT_ENCAPSED_STRING","'Joint field or attribute expression with this alias is already declared'",499],")",["T_WHITESPACE","\n            ",499],")",";",["T_WHITESPACE","\n        ",500],"}",["T_WHITESPACE","\n        ",501],["T_IF","if",502],["T_WHITESPACE"," ",502],"(","!",["T_STRING","is_array",502],"(",["T_VARIABLE","$attribute",502],")",")",["T_WHITESPACE"," ",502],"{",["T_WHITESPACE","\n            ",502],["T_VARIABLE","$attribute",503],["T_WHITESPACE"," ",503],"=",["T_WHITESPACE"," ",503],["T_ARRAY","array",503],"(",["T_VARIABLE","$attribute",503],")",";",["T_WHITESPACE","\n        ",503],"}",["T_WHITESPACE","\n\n        ",504],["T_VARIABLE","$fullExpression",506],["T_WHITESPACE"," ",506],"=",["T_WHITESPACE"," ",506],["T_VARIABLE","$expression",506],";",["T_WHITESPACE","\n        ",506],["T_COMMENT","\/\/ Replacing multiple attributes\n",507],["T_WHITESPACE","        ",508],["T_FOREACH","foreach",508],["T_WHITESPACE"," ",508],"(",["T_VARIABLE","$attribute",508],["T_WHITESPACE"," ",508],["T_AS","as",508],["T_WHITESPACE"," ",508],["T_VARIABLE","$attributeItem",508],")",["T_WHITESPACE"," ",508],"{",["T_WHITESPACE","\n            ",508],["T_IF","if",509],["T_WHITESPACE"," ",509],"(",["T_ISSET","isset",509],"(",["T_VARIABLE","$this",509],["T_OBJECT_OPERATOR","->",509],["T_STRING","_staticFields",509],"[",["T_VARIABLE","$attributeItem",509],"]",")",")",["T_WHITESPACE"," ",509],"{",["T_WHITESPACE","\n                ",509],["T_VARIABLE","$attrField",510],["T_WHITESPACE"," ",510],"=",["T_WHITESPACE"," ",510],["T_STRING","sprintf",510],"(",["T_CONSTANT_ENCAPSED_STRING","'e.%s'",510],",",["T_WHITESPACE"," ",510],["T_VARIABLE","$attributeItem",510],")",";",["T_WHITESPACE","\n            ",510],"}",["T_WHITESPACE"," ",511],["T_ELSE","else",511],["T_WHITESPACE"," ",511],"{",["T_WHITESPACE","\n                ",511],["T_VARIABLE","$attributeInstance",512],["T_WHITESPACE"," ",512],"=",["T_WHITESPACE"," ",512],["T_VARIABLE","$this",512],["T_OBJECT_OPERATOR","->",512],["T_STRING","getAttribute",512],"(",["T_VARIABLE","$attributeItem",512],")",";",["T_WHITESPACE","\n\n                ",512],["T_IF","if",514],["T_WHITESPACE"," ",514],"(",["T_VARIABLE","$attributeInstance",514],["T_OBJECT_OPERATOR","->",514],["T_STRING","getBackend",514],"(",")",["T_OBJECT_OPERATOR","->",514],["T_STRING","isStatic",514],"(",")",")",["T_WHITESPACE"," ",514],"{",["T_WHITESPACE","\n                    ",514],["T_VARIABLE","$attrField",515],["T_WHITESPACE"," ",515],"=",["T_WHITESPACE"," ",515],["T_CONSTANT_ENCAPSED_STRING","'e.'",515],["T_WHITESPACE"," ",515],".",["T_WHITESPACE"," ",515],["T_VARIABLE","$attributeItem",515],";",["T_WHITESPACE","\n                ",515],"}",["T_WHITESPACE"," ",516],["T_ELSE","else",516],["T_WHITESPACE"," ",516],"{",["T_WHITESPACE","\n                    ",516],["T_VARIABLE","$this",517],["T_OBJECT_OPERATOR","->",517],["T_STRING","_addAttributeJoin",517],"(",["T_VARIABLE","$attributeItem",517],",",["T_WHITESPACE"," ",517],["T_CONSTANT_ENCAPSED_STRING","'left'",517],")",";",["T_WHITESPACE","\n                    ",517],["T_VARIABLE","$attrField",518],["T_WHITESPACE"," ",518],"=",["T_WHITESPACE"," ",518],["T_VARIABLE","$this",518],["T_OBJECT_OPERATOR","->",518],["T_STRING","_getAttributeFieldName",518],"(",["T_VARIABLE","$attributeItem",518],")",";",["T_WHITESPACE","\n                ",518],"}",["T_WHITESPACE","\n            ",519],"}",["T_WHITESPACE","\n\n            ",520],["T_VARIABLE","$fullExpression",522],["T_WHITESPACE"," ",522],"=",["T_WHITESPACE"," ",522],["T_STRING","str_replace",522],"(",["T_CONSTANT_ENCAPSED_STRING","'{{attribute}}'",522],",",["T_WHITESPACE"," ",522],["T_VARIABLE","$attrField",522],",",["T_WHITESPACE"," ",522],["T_VARIABLE","$fullExpression",522],")",";",["T_WHITESPACE","\n            ",522],["T_VARIABLE","$fullExpression",523],["T_WHITESPACE"," ",523],"=",["T_WHITESPACE"," ",523],["T_STRING","str_replace",523],"(",["T_CONSTANT_ENCAPSED_STRING","'{{'",523],["T_WHITESPACE"," ",523],".",["T_WHITESPACE"," ",523],["T_VARIABLE","$attributeItem",523],["T_WHITESPACE"," ",523],".",["T_WHITESPACE"," ",523],["T_CONSTANT_ENCAPSED_STRING","'}}'",523],",",["T_WHITESPACE"," ",523],["T_VARIABLE","$attrField",523],",",["T_WHITESPACE"," ",523],["T_VARIABLE","$fullExpression",523],")",";",["T_WHITESPACE","\n        ",523],"}",["T_WHITESPACE","\n\n        ",524],["T_VARIABLE","$this",526],["T_OBJECT_OPERATOR","->",526],["T_STRING","getSelect",526],"(",")",["T_OBJECT_OPERATOR","->",526],["T_STRING","columns",526],"(",["T_ARRAY","array",526],"(",["T_VARIABLE","$alias",526],["T_WHITESPACE"," ",526],["T_DOUBLE_ARROW","=>",526],["T_WHITESPACE"," ",526],["T_VARIABLE","$fullExpression",526],")",")",";",["T_WHITESPACE","\n\n        ",526],["T_VARIABLE","$this",528],["T_OBJECT_OPERATOR","->",528],["T_STRING","_joinFields",528],"[",["T_VARIABLE","$alias",528],"]",["T_WHITESPACE"," ",528],"=",["T_WHITESPACE"," ",528],["T_ARRAY","array",528],"(",["T_WHITESPACE","\n            ",528],["T_CONSTANT_ENCAPSED_STRING","'table'",529],["T_WHITESPACE"," ",529],["T_DOUBLE_ARROW","=>",529],["T_WHITESPACE"," ",529],["T_STRING","false",529],",",["T_WHITESPACE","\n            ",529],["T_CONSTANT_ENCAPSED_STRING","'field'",530],["T_WHITESPACE"," ",530],["T_DOUBLE_ARROW","=>",530],["T_WHITESPACE"," ",530],["T_VARIABLE","$fullExpression",530],["T_WHITESPACE","\n        ",530],")",";",["T_WHITESPACE","\n\n        ",531],["T_RETURN","return",533],["T_WHITESPACE"," ",533],["T_VARIABLE","$this",533],";",["T_WHITESPACE","\n    ",533],"}",["T_WHITESPACE","\n\n\n    ",534],["T_DOC_COMMENT","\/**\n     * Groups results by specified attribute\n     *\n     * @param string|array $attribute\n     *\/",537],["T_WHITESPACE","\n    ",541],["T_PUBLIC","public",542],["T_WHITESPACE"," ",542],["T_FUNCTION","function",542],["T_WHITESPACE"," ",542],["T_STRING","groupByAttribute",542],"(",["T_VARIABLE","$attribute",542],")",["T_WHITESPACE","\n    ",542],"{",["T_WHITESPACE","\n        ",543],["T_IF","if",544],["T_WHITESPACE"," ",544],"(",["T_STRING","is_array",544],"(",["T_VARIABLE","$attribute",544],")",")",["T_WHITESPACE"," ",544],"{",["T_WHITESPACE","\n            ",544],["T_FOREACH","foreach",545],["T_WHITESPACE"," ",545],"(",["T_VARIABLE","$attribute",545],["T_WHITESPACE"," ",545],["T_AS","as",545],["T_WHITESPACE"," ",545],["T_VARIABLE","$attributeItem",545],")",["T_WHITESPACE"," ",545],"{",["T_WHITESPACE","\n                ",545],["T_VARIABLE","$this",546],["T_OBJECT_OPERATOR","->",546],["T_STRING","groupByAttribute",546],"(",["T_VARIABLE","$attributeItem",546],")",";",["T_WHITESPACE","\n            ",546],"}",["T_WHITESPACE","\n        ",547],"}",["T_WHITESPACE"," ",548],["T_ELSE","else",548],["T_WHITESPACE"," ",548],"{",["T_WHITESPACE","\n            ",548],["T_IF","if",549],["T_WHITESPACE"," ",549],"(",["T_ISSET","isset",549],"(",["T_VARIABLE","$this",549],["T_OBJECT_OPERATOR","->",549],["T_STRING","_joinFields",549],"[",["T_VARIABLE","$attribute",549],"]",")",")",["T_WHITESPACE"," ",549],"{",["T_WHITESPACE","\n                ",549],["T_VARIABLE","$this",550],["T_OBJECT_OPERATOR","->",550],["T_STRING","getSelect",550],"(",")",["T_OBJECT_OPERATOR","->",550],["T_STRING","group",550],"(",["T_VARIABLE","$this",550],["T_OBJECT_OPERATOR","->",550],["T_STRING","_getAttributeFieldName",550],"(",["T_VARIABLE","$attribute",550],")",")",";",["T_WHITESPACE","\n                ",550],["T_RETURN","return",551],["T_WHITESPACE"," ",551],["T_VARIABLE","$this",551],";",["T_WHITESPACE","\n            ",551],"}",["T_WHITESPACE","\n\n            ",552],["T_IF","if",554],["T_WHITESPACE"," ",554],"(",["T_ISSET","isset",554],"(",["T_VARIABLE","$this",554],["T_OBJECT_OPERATOR","->",554],["T_STRING","_staticFields",554],"[",["T_VARIABLE","$attribute",554],"]",")",")",["T_WHITESPACE"," ",554],"{",["T_WHITESPACE","\n                ",554],["T_VARIABLE","$this",555],["T_OBJECT_OPERATOR","->",555],["T_STRING","getSelect",555],"(",")",["T_OBJECT_OPERATOR","->",555],["T_STRING","group",555],"(",["T_STRING","sprintf",555],"(",["T_CONSTANT_ENCAPSED_STRING","'e.%s'",555],",",["T_WHITESPACE"," ",555],["T_VARIABLE","$attribute",555],")",")",";",["T_WHITESPACE","\n                ",555],["T_RETURN","return",556],["T_WHITESPACE"," ",556],["T_VARIABLE","$this",556],";",["T_WHITESPACE","\n            ",556],"}",["T_WHITESPACE","\n\n            ",557],["T_IF","if",559],["T_WHITESPACE"," ",559],"(",["T_ISSET","isset",559],"(",["T_VARIABLE","$this",559],["T_OBJECT_OPERATOR","->",559],["T_STRING","_joinAttributes",559],"[",["T_VARIABLE","$attribute",559],"]",")",")",["T_WHITESPACE"," ",559],"{",["T_WHITESPACE","\n                ",559],["T_VARIABLE","$attrInstance",560],["T_WHITESPACE"," ",560],"=",["T_WHITESPACE"," ",560],["T_VARIABLE","$this",560],["T_OBJECT_OPERATOR","->",560],["T_STRING","_joinAttributes",560],"[",["T_VARIABLE","$attribute",560],"]","[",["T_CONSTANT_ENCAPSED_STRING","'attribute'",560],"]",";",["T_WHITESPACE","\n                ",560],["T_VARIABLE","$entityField",561],["T_WHITESPACE"," ",561],"=",["T_WHITESPACE"," ",561],["T_VARIABLE","$this",561],["T_OBJECT_OPERATOR","->",561],["T_STRING","_getAttributeTableAlias",561],"(",["T_VARIABLE","$attribute",561],")",["T_WHITESPACE"," ",561],".",["T_WHITESPACE"," ",561],["T_CONSTANT_ENCAPSED_STRING","'.'",561],["T_WHITESPACE"," ",561],".",["T_WHITESPACE"," ",561],["T_VARIABLE","$attrInstance",561],["T_OBJECT_OPERATOR","->",561],["T_STRING","getAttributeCode",561],"(",")",";",["T_WHITESPACE","\n            ",561],"}",["T_WHITESPACE"," ",562],["T_ELSE","else",562],["T_WHITESPACE"," ",562],"{",["T_WHITESPACE","\n                ",562],["T_VARIABLE","$attrInstance",563],["T_WHITESPACE"," ",563],"=",["T_WHITESPACE"," ",563],["T_VARIABLE","$this",563],["T_OBJECT_OPERATOR","->",563],["T_STRING","getEntity",563],"(",")",["T_OBJECT_OPERATOR","->",563],["T_STRING","getAttribute",563],"(",["T_VARIABLE","$attribute",563],")",";",["T_WHITESPACE","\n                ",563],["T_VARIABLE","$entityField",564],["T_WHITESPACE"," ",564],"=",["T_WHITESPACE"," ",564],["T_CONSTANT_ENCAPSED_STRING","'e.'",564],["T_WHITESPACE"," ",564],".",["T_WHITESPACE"," ",564],["T_VARIABLE","$attribute",564],";",["T_WHITESPACE","\n            ",564],"}",["T_WHITESPACE","\n\n            ",565],["T_IF","if",567],["T_WHITESPACE"," ",567],"(",["T_VARIABLE","$attrInstance",567],["T_OBJECT_OPERATOR","->",567],["T_STRING","getBackend",567],"(",")",["T_OBJECT_OPERATOR","->",567],["T_STRING","isStatic",567],"(",")",")",["T_WHITESPACE"," ",567],"{",["T_WHITESPACE","\n                ",567],["T_VARIABLE","$this",568],["T_OBJECT_OPERATOR","->",568],["T_STRING","getSelect",568],"(",")",["T_OBJECT_OPERATOR","->",568],["T_STRING","group",568],"(",["T_VARIABLE","$entityField",568],")",";",["T_WHITESPACE","\n            ",568],"}",["T_WHITESPACE"," ",569],["T_ELSE","else",569],["T_WHITESPACE"," ",569],"{",["T_WHITESPACE","\n                ",569],["T_VARIABLE","$this",570],["T_OBJECT_OPERATOR","->",570],["T_STRING","_addAttributeJoin",570],"(",["T_VARIABLE","$attribute",570],")",";",["T_WHITESPACE","\n                ",570],["T_VARIABLE","$this",571],["T_OBJECT_OPERATOR","->",571],["T_STRING","getSelect",571],"(",")",["T_OBJECT_OPERATOR","->",571],["T_STRING","group",571],"(",["T_VARIABLE","$this",571],["T_OBJECT_OPERATOR","->",571],["T_STRING","_getAttributeTableAlias",571],"(",["T_VARIABLE","$attribute",571],")",".",["T_CONSTANT_ENCAPSED_STRING","'.value'",571],")",";",["T_WHITESPACE","\n            ",571],"}",["T_WHITESPACE","\n        ",572],"}",["T_WHITESPACE","\n\n        ",573],["T_RETURN","return",575],["T_WHITESPACE"," ",575],["T_VARIABLE","$this",575],";",["T_WHITESPACE","\n    ",575],"}",["T_WHITESPACE","\n\n    ",576],["T_DOC_COMMENT","\/**\n     * Add attribute from joined entity to select\n     *\n     * Examples:\n     * ('billing_firstname', 'customer_address\/firstname', 'default_billing')\n     * ('billing_lastname', 'customer_address\/lastname', 'default_billing')\n     * ('shipping_lastname', 'customer_address\/lastname', 'default_billing')\n     * ('shipping_postalcode', 'customer_address\/postalcode', 'default_shipping')\n     * ('shipping_city', $cityAttribute, 'default_shipping')\n     *\n     * Developer is encouraged to use existing instances of attributes and entities\n     * After first use of string entity name it will be cached in the collection\n     *\n     * @todo connect between joined attributes of same entity\n     * @param string $alias alias for the joined attribute\n     * @param string|Mage_Eav_Model_Entity_Attribute_Abstract $attribute\n     * @param string $bind attribute of the main entity to link with joined $filter\n     * @param string $filter primary key for the joined entity (entity_id default)\n     * @param string $joinType inner|left\n     * @return Mage_Eav_Model_Entity_Collection_Abstract\n     *\/",578],["T_WHITESPACE","\n    ",598],["T_PUBLIC","public",599],["T_WHITESPACE"," ",599],["T_FUNCTION","function",599],["T_WHITESPACE"," ",599],["T_STRING","joinAttribute",599],"(",["T_VARIABLE","$alias",599],",",["T_WHITESPACE"," ",599],["T_VARIABLE","$attribute",599],",",["T_WHITESPACE"," ",599],["T_VARIABLE","$bind",599],",",["T_WHITESPACE"," ",599],["T_VARIABLE","$filter",599],"=",["T_STRING","null",599],",",["T_WHITESPACE"," ",599],["T_VARIABLE","$joinType",599],"=",["T_CONSTANT_ENCAPSED_STRING","'inner'",599],",",["T_WHITESPACE"," ",599],["T_VARIABLE","$storeId",599],"=",["T_STRING","null",599],")",["T_WHITESPACE","\n    ",599],"{",["T_WHITESPACE","\n        ",600],["T_COMMENT","\/\/ validate alias\n",601],["T_WHITESPACE","        ",602],["T_IF","if",602],["T_WHITESPACE"," ",602],"(",["T_ISSET","isset",602],"(",["T_VARIABLE","$this",602],["T_OBJECT_OPERATOR","->",602],["T_STRING","_joinAttributes",602],"[",["T_VARIABLE","$alias",602],"]",")",")",["T_WHITESPACE"," ",602],"{",["T_WHITESPACE","\n            ",602],["T_THROW","throw",603],["T_WHITESPACE"," ",603],["T_STRING","Mage",603],["T_DOUBLE_COLON","::",603],["T_STRING","exception",603],"(",["T_WHITESPACE","\n                ",603],["T_CONSTANT_ENCAPSED_STRING","'Mage_Eav'",604],",",["T_WHITESPACE","\n                ",604],["T_STRING","Mage",605],["T_DOUBLE_COLON","::",605],["T_STRING","helper",605],"(",["T_CONSTANT_ENCAPSED_STRING","'eav'",605],")",["T_OBJECT_OPERATOR","->",605],["T_STRING","__",605],"(",["T_CONSTANT_ENCAPSED_STRING","'Invalid alias, already exists in joint attributes'",605],")",["T_WHITESPACE","\n            ",605],")",";",["T_WHITESPACE","\n        ",606],"}",["T_WHITESPACE","\n\n        ",607],["T_COMMENT","\/\/ validate bind attribute\n",609],["T_WHITESPACE","        ",610],["T_IF","if",610],["T_WHITESPACE"," ",610],"(",["T_STRING","is_string",610],"(",["T_VARIABLE","$bind",610],")",")",["T_WHITESPACE"," ",610],"{",["T_WHITESPACE","\n            ",610],["T_VARIABLE","$bindAttribute",611],["T_WHITESPACE"," ",611],"=",["T_WHITESPACE"," ",611],["T_VARIABLE","$this",611],["T_OBJECT_OPERATOR","->",611],["T_STRING","getAttribute",611],"(",["T_VARIABLE","$bind",611],")",";",["T_WHITESPACE","\n        ",611],"}",["T_WHITESPACE","\n\n        ",612],["T_IF","if",614],["T_WHITESPACE"," ",614],"(","!",["T_VARIABLE","$bindAttribute",614],["T_WHITESPACE"," ",614],["T_BOOLEAN_OR","||",614],["T_WHITESPACE"," ",614],"(","!",["T_VARIABLE","$bindAttribute",614],["T_OBJECT_OPERATOR","->",614],["T_STRING","isStatic",614],"(",")",["T_WHITESPACE"," ",614],["T_BOOLEAN_AND","&&",614],["T_WHITESPACE"," ",614],"!",["T_VARIABLE","$bindAttribute",614],["T_OBJECT_OPERATOR","->",614],["T_STRING","getId",614],"(",")",")",")",["T_WHITESPACE"," ",614],"{",["T_WHITESPACE","\n            ",614],["T_THROW","throw",615],["T_WHITESPACE"," ",615],["T_STRING","Mage",615],["T_DOUBLE_COLON","::",615],["T_STRING","exception",615],"(",["T_CONSTANT_ENCAPSED_STRING","'Mage_Eav'",615],",",["T_WHITESPACE"," ",615],["T_STRING","Mage",615],["T_DOUBLE_COLON","::",615],["T_STRING","helper",615],"(",["T_CONSTANT_ENCAPSED_STRING","'eav'",615],")",["T_OBJECT_OPERATOR","->",615],["T_STRING","__",615],"(",["T_CONSTANT_ENCAPSED_STRING","'Invalid foreign key'",615],")",")",";",["T_WHITESPACE","\n        ",615],"}",["T_WHITESPACE","\n\n        ",616],["T_COMMENT","\/\/ try to explode combined entity\/attribute if supplied\n",618],["T_WHITESPACE","        ",619],["T_IF","if",619],["T_WHITESPACE"," ",619],"(",["T_STRING","is_string",619],"(",["T_VARIABLE","$attribute",619],")",")",["T_WHITESPACE"," ",619],"{",["T_WHITESPACE","\n            ",619],["T_VARIABLE","$attrArr",620],["T_WHITESPACE"," ",620],"=",["T_WHITESPACE"," ",620],["T_STRING","explode",620],"(",["T_CONSTANT_ENCAPSED_STRING","'\/'",620],",",["T_WHITESPACE"," ",620],["T_VARIABLE","$attribute",620],")",";",["T_WHITESPACE","\n            ",620],["T_IF","if",621],["T_WHITESPACE"," ",621],"(",["T_ISSET","isset",621],"(",["T_VARIABLE","$attrArr",621],"[",["T_LNUMBER","1",621],"]",")",")",["T_WHITESPACE"," ",621],"{",["T_WHITESPACE","\n                ",621],["T_VARIABLE","$entity",622],["T_WHITESPACE","    ",622],"=",["T_WHITESPACE"," ",622],["T_VARIABLE","$attrArr",622],"[",["T_LNUMBER","0",622],"]",";",["T_WHITESPACE","\n                ",622],["T_VARIABLE","$attribute",623],["T_WHITESPACE"," ",623],"=",["T_WHITESPACE"," ",623],["T_VARIABLE","$attrArr",623],"[",["T_LNUMBER","1",623],"]",";",["T_WHITESPACE","\n            ",623],"}",["T_WHITESPACE","\n        ",624],"}",["T_WHITESPACE","\n\n        ",625],["T_COMMENT","\/\/ validate entity\n",627],["T_WHITESPACE","        ",628],["T_IF","if",628],["T_WHITESPACE"," ",628],"(",["T_EMPTY","empty",628],"(",["T_VARIABLE","$entity",628],")",["T_WHITESPACE"," ",628],["T_BOOLEAN_AND","&&",628],["T_WHITESPACE"," ",628],["T_VARIABLE","$attribute",628],["T_WHITESPACE"," ",628],["T_INSTANCEOF","instanceof",628],["T_WHITESPACE"," ",628],["T_STRING","Mage_Eav_Model_Entity_Attribute_Abstract",628],")",["T_WHITESPACE"," ",628],"{",["T_WHITESPACE","\n            ",628],["T_VARIABLE","$entity",629],["T_WHITESPACE"," ",629],"=",["T_WHITESPACE"," ",629],["T_VARIABLE","$attribute",629],["T_OBJECT_OPERATOR","->",629],["T_STRING","getEntity",629],"(",")",";",["T_WHITESPACE","\n        ",629],"}",["T_WHITESPACE"," ",630],["T_ELSEIF","elseif",630],["T_WHITESPACE"," ",630],"(",["T_STRING","is_string",630],"(",["T_VARIABLE","$entity",630],")",")",["T_WHITESPACE"," ",630],"{",["T_WHITESPACE","\n            ",630],["T_COMMENT","\/\/ retrieve cached entity if possible\n",631],["T_WHITESPACE","            ",632],["T_IF","if",632],["T_WHITESPACE"," ",632],"(",["T_ISSET","isset",632],"(",["T_VARIABLE","$this",632],["T_OBJECT_OPERATOR","->",632],["T_STRING","_joinEntities",632],"[",["T_VARIABLE","$entity",632],"]",")",")",["T_WHITESPACE"," ",632],"{",["T_WHITESPACE","\n                ",632],["T_VARIABLE","$entity",633],["T_WHITESPACE"," ",633],"=",["T_WHITESPACE"," ",633],["T_VARIABLE","$this",633],["T_OBJECT_OPERATOR","->",633],["T_STRING","_joinEntities",633],"[",["T_VARIABLE","$entity",633],"]",";",["T_WHITESPACE","\n            ",633],"}",["T_WHITESPACE"," ",634],["T_ELSE","else",634],["T_WHITESPACE"," ",634],"{",["T_WHITESPACE","\n                ",634],["T_VARIABLE","$entity",635],["T_WHITESPACE"," ",635],"=",["T_WHITESPACE"," ",635],["T_STRING","Mage",635],["T_DOUBLE_COLON","::",635],["T_STRING","getModel",635],"(",["T_CONSTANT_ENCAPSED_STRING","'eav\/entity'",635],")",["T_OBJECT_OPERATOR","->",635],["T_STRING","setType",635],"(",["T_VARIABLE","$attrArr",635],"[",["T_LNUMBER","0",635],"]",")",";",["T_WHITESPACE","\n            ",635],"}",["T_WHITESPACE","\n        ",636],"}",["T_WHITESPACE","\n        ",637],["T_IF","if",638],["T_WHITESPACE"," ",638],"(","!",["T_VARIABLE","$entity",638],["T_WHITESPACE"," ",638],["T_BOOLEAN_OR","||",638],["T_WHITESPACE"," ",638],"!",["T_VARIABLE","$entity",638],["T_OBJECT_OPERATOR","->",638],["T_STRING","getTypeId",638],"(",")",")",["T_WHITESPACE"," ",638],"{",["T_WHITESPACE","\n            ",638],["T_THROW","throw",639],["T_WHITESPACE"," ",639],["T_STRING","Mage",639],["T_DOUBLE_COLON","::",639],["T_STRING","exception",639],"(",["T_CONSTANT_ENCAPSED_STRING","'Mage_Eav'",639],",",["T_WHITESPACE"," ",639],["T_STRING","Mage",639],["T_DOUBLE_COLON","::",639],["T_STRING","helper",639],"(",["T_CONSTANT_ENCAPSED_STRING","'eav'",639],")",["T_OBJECT_OPERATOR","->",639],["T_STRING","__",639],"(",["T_CONSTANT_ENCAPSED_STRING","'Invalid entity type'",639],")",")",";",["T_WHITESPACE","\n        ",639],"}",["T_WHITESPACE","\n\n        ",640],["T_COMMENT","\/\/ cache entity\n",642],["T_WHITESPACE","        ",643],["T_IF","if",643],["T_WHITESPACE"," ",643],"(","!",["T_ISSET","isset",643],"(",["T_VARIABLE","$this",643],["T_OBJECT_OPERATOR","->",643],["T_STRING","_joinEntities",643],"[",["T_VARIABLE","$entity",643],["T_OBJECT_OPERATOR","->",643],["T_STRING","getType",643],"(",")","]",")",")",["T_WHITESPACE"," ",643],"{",["T_WHITESPACE","\n            ",643],["T_VARIABLE","$this",644],["T_OBJECT_OPERATOR","->",644],["T_STRING","_joinEntities",644],"[",["T_VARIABLE","$entity",644],["T_OBJECT_OPERATOR","->",644],["T_STRING","getType",644],"(",")","]",["T_WHITESPACE"," ",644],"=",["T_WHITESPACE"," ",644],["T_VARIABLE","$entity",644],";",["T_WHITESPACE","\n        ",644],"}",["T_WHITESPACE","\n\n        ",645],["T_COMMENT","\/\/ validate attribute\n",647],["T_WHITESPACE","        ",648],["T_IF","if",648],["T_WHITESPACE"," ",648],"(",["T_STRING","is_string",648],"(",["T_VARIABLE","$attribute",648],")",")",["T_WHITESPACE"," ",648],"{",["T_WHITESPACE","\n            ",648],["T_VARIABLE","$attribute",649],["T_WHITESPACE"," ",649],"=",["T_WHITESPACE"," ",649],["T_VARIABLE","$entity",649],["T_OBJECT_OPERATOR","->",649],["T_STRING","getAttribute",649],"(",["T_VARIABLE","$attribute",649],")",";",["T_WHITESPACE","\n        ",649],"}",["T_WHITESPACE","\n        ",650],["T_IF","if",651],["T_WHITESPACE"," ",651],"(","!",["T_VARIABLE","$attribute",651],")",["T_WHITESPACE"," ",651],"{",["T_WHITESPACE","\n            ",651],["T_THROW","throw",652],["T_WHITESPACE"," ",652],["T_STRING","Mage",652],["T_DOUBLE_COLON","::",652],["T_STRING","exception",652],"(",["T_CONSTANT_ENCAPSED_STRING","'Mage_Eav'",652],",",["T_WHITESPACE"," ",652],["T_STRING","Mage",652],["T_DOUBLE_COLON","::",652],["T_STRING","helper",652],"(",["T_CONSTANT_ENCAPSED_STRING","'eav'",652],")",["T_OBJECT_OPERATOR","->",652],["T_STRING","__",652],"(",["T_CONSTANT_ENCAPSED_STRING","'Invalid attribute type'",652],")",")",";",["T_WHITESPACE","\n        ",652],"}",["T_WHITESPACE","\n\n        ",653],["T_IF","if",655],["T_WHITESPACE"," ",655],"(",["T_EMPTY","empty",655],"(",["T_VARIABLE","$filter",655],")",")",["T_WHITESPACE"," ",655],"{",["T_WHITESPACE","\n            ",655],["T_VARIABLE","$filter",656],["T_WHITESPACE"," ",656],"=",["T_WHITESPACE"," ",656],["T_VARIABLE","$entity",656],["T_OBJECT_OPERATOR","->",656],["T_STRING","getEntityIdField",656],"(",")",";",["T_WHITESPACE","\n        ",656],"}",["T_WHITESPACE","\n\n        ",657],["T_COMMENT","\/\/ add joined attribute\n",659],["T_WHITESPACE","        ",660],["T_VARIABLE","$this",660],["T_OBJECT_OPERATOR","->",660],["T_STRING","_joinAttributes",660],"[",["T_VARIABLE","$alias",660],"]",["T_WHITESPACE"," ",660],"=",["T_WHITESPACE"," ",660],["T_ARRAY","array",660],"(",["T_WHITESPACE","\n            ",660],["T_CONSTANT_ENCAPSED_STRING","'bind'",661],["T_WHITESPACE","          ",661],["T_DOUBLE_ARROW","=>",661],["T_WHITESPACE"," ",661],["T_VARIABLE","$bind",661],",",["T_WHITESPACE","\n            ",661],["T_CONSTANT_ENCAPSED_STRING","'bindAttribute'",662],["T_WHITESPACE"," ",662],["T_DOUBLE_ARROW","=>",662],["T_WHITESPACE"," ",662],["T_VARIABLE","$bindAttribute",662],",",["T_WHITESPACE","\n            ",662],["T_CONSTANT_ENCAPSED_STRING","'attribute'",663],["T_WHITESPACE","     ",663],["T_DOUBLE_ARROW","=>",663],["T_WHITESPACE"," ",663],["T_VARIABLE","$attribute",663],",",["T_WHITESPACE","\n            ",663],["T_CONSTANT_ENCAPSED_STRING","'filter'",664],["T_WHITESPACE","        ",664],["T_DOUBLE_ARROW","=>",664],["T_WHITESPACE"," ",664],["T_VARIABLE","$filter",664],",",["T_WHITESPACE","\n            ",664],["T_CONSTANT_ENCAPSED_STRING","'store_id'",665],["T_WHITESPACE","      ",665],["T_DOUBLE_ARROW","=>",665],["T_WHITESPACE"," ",665],["T_VARIABLE","$storeId",665],",",["T_WHITESPACE","\n        ",665],")",";",["T_WHITESPACE","\n\n        ",666],["T_VARIABLE","$this",668],["T_OBJECT_OPERATOR","->",668],["T_STRING","_addAttributeJoin",668],"(",["T_VARIABLE","$alias",668],",",["T_WHITESPACE"," ",668],["T_VARIABLE","$joinType",668],")",";",["T_WHITESPACE","\n\n        ",668],["T_RETURN","return",670],["T_WHITESPACE"," ",670],["T_VARIABLE","$this",670],";",["T_WHITESPACE","\n    ",670],"}",["T_WHITESPACE","\n\n    ",671],["T_DOC_COMMENT","\/**\n     * Join regular table field and use an attribute as fk\n     *\n     * Examples:\n     * ('country_name', 'directory\/country_name', 'name', 'country_id=shipping_country',\n     *      \"{{table}}.language_code='en'\", 'left')\n     *\n     * @param string $alias 'country_name'\n     * @param string $table 'directory\/country_name'\n     * @param string $field 'name'\n     * @param string $bind 'PK(country_id)=FK(shipping_country_id)'\n     * @param string|array $cond \"{{table}}.language_code='en'\" OR array('language_code'=>'en')\n     * @param string $joinType 'left'\n     * @return Mage_Eav_Model_Entity_Collection_Abstract\n     *\/",673],["T_WHITESPACE","\n    ",687],["T_PUBLIC","public",688],["T_WHITESPACE"," ",688],["T_FUNCTION","function",688],["T_WHITESPACE"," ",688],["T_STRING","joinField",688],"(",["T_VARIABLE","$alias",688],",",["T_WHITESPACE"," ",688],["T_VARIABLE","$table",688],",",["T_WHITESPACE"," ",688],["T_VARIABLE","$field",688],",",["T_WHITESPACE"," ",688],["T_VARIABLE","$bind",688],",",["T_WHITESPACE"," ",688],["T_VARIABLE","$cond",688],"=",["T_STRING","null",688],",",["T_WHITESPACE"," ",688],["T_VARIABLE","$joinType",688],"=",["T_CONSTANT_ENCAPSED_STRING","'inner'",688],")",["T_WHITESPACE","\n    ",688],"{",["T_WHITESPACE","\n        ",689],["T_COMMENT","\/\/ validate alias\n",690],["T_WHITESPACE","        ",691],["T_IF","if",691],["T_WHITESPACE"," ",691],"(",["T_ISSET","isset",691],"(",["T_VARIABLE","$this",691],["T_OBJECT_OPERATOR","->",691],["T_STRING","_joinFields",691],"[",["T_VARIABLE","$alias",691],"]",")",")",["T_WHITESPACE"," ",691],"{",["T_WHITESPACE","\n            ",691],["T_THROW","throw",692],["T_WHITESPACE"," ",692],["T_STRING","Mage",692],["T_DOUBLE_COLON","::",692],["T_STRING","exception",692],"(",["T_WHITESPACE","\n                ",692],["T_CONSTANT_ENCAPSED_STRING","'Mage_Eav'",693],",",["T_WHITESPACE","\n                ",693],["T_STRING","Mage",694],["T_DOUBLE_COLON","::",694],["T_STRING","helper",694],"(",["T_CONSTANT_ENCAPSED_STRING","'eav'",694],")",["T_OBJECT_OPERATOR","->",694],["T_STRING","__",694],"(",["T_CONSTANT_ENCAPSED_STRING","'Joined field with this alias is already declared'",694],")",["T_WHITESPACE","\n            ",694],")",";",["T_WHITESPACE","\n        ",695],"}",["T_WHITESPACE","\n\n        ",696],["T_COMMENT","\/\/ validate table\n",698],["T_WHITESPACE","        ",699],["T_IF","if",699],["T_WHITESPACE"," ",699],"(",["T_STRING","strpos",699],"(",["T_VARIABLE","$table",699],",",["T_WHITESPACE"," ",699],["T_CONSTANT_ENCAPSED_STRING","'\/'",699],")",["T_IS_NOT_IDENTICAL","!==",699],["T_STRING","false",699],")",["T_WHITESPACE"," ",699],"{",["T_WHITESPACE","\n            ",699],["T_VARIABLE","$table",700],["T_WHITESPACE"," ",700],"=",["T_WHITESPACE"," ",700],["T_STRING","Mage",700],["T_DOUBLE_COLON","::",700],["T_STRING","getSingleton",700],"(",["T_CONSTANT_ENCAPSED_STRING","'core\/resource'",700],")",["T_OBJECT_OPERATOR","->",700],["T_STRING","getTableName",700],"(",["T_VARIABLE","$table",700],")",";",["T_WHITESPACE","\n        ",700],"}",["T_WHITESPACE","\n        ",701],["T_VARIABLE","$tableAlias",702],["T_WHITESPACE"," ",702],"=",["T_WHITESPACE"," ",702],["T_VARIABLE","$this",702],["T_OBJECT_OPERATOR","->",702],["T_STRING","_getAttributeTableAlias",702],"(",["T_VARIABLE","$alias",702],")",";",["T_WHITESPACE","\n\n        ",702],["T_COMMENT","\/\/ validate bind\n",704],["T_WHITESPACE","        ",705],["T_LIST","list",705],"(",["T_VARIABLE","$pk",705],",",["T_WHITESPACE"," ",705],["T_VARIABLE","$fk",705],")",["T_WHITESPACE"," ",705],"=",["T_WHITESPACE"," ",705],["T_STRING","explode",705],"(",["T_CONSTANT_ENCAPSED_STRING","'='",705],",",["T_WHITESPACE"," ",705],["T_VARIABLE","$bind",705],")",";",["T_WHITESPACE","\n        ",705],["T_VARIABLE","$pk",706],["T_WHITESPACE"," ",706],"=",["T_WHITESPACE"," ",706],["T_VARIABLE","$this",706],["T_OBJECT_OPERATOR","->",706],["T_STRING","getSelect",706],"(",")",["T_OBJECT_OPERATOR","->",706],["T_STRING","getAdapter",706],"(",")",["T_OBJECT_OPERATOR","->",706],["T_STRING","quoteColumnAs",706],"(",["T_STRING","trim",706],"(",["T_VARIABLE","$pk",706],")",",",["T_WHITESPACE"," ",706],["T_STRING","null",706],")",";",["T_WHITESPACE","\n        ",706],["T_VARIABLE","$bindCond",707],["T_WHITESPACE"," ",707],"=",["T_WHITESPACE"," ",707],["T_VARIABLE","$tableAlias",707],["T_WHITESPACE"," ",707],".",["T_WHITESPACE"," ",707],["T_CONSTANT_ENCAPSED_STRING","'.'",707],["T_WHITESPACE"," ",707],".",["T_WHITESPACE"," ",707],["T_STRING","trim",707],"(",["T_VARIABLE","$pk",707],")",["T_WHITESPACE"," ",707],".",["T_WHITESPACE"," ",707],["T_CONSTANT_ENCAPSED_STRING","'='",707],["T_WHITESPACE"," ",707],".",["T_WHITESPACE"," ",707],["T_VARIABLE","$this",707],["T_OBJECT_OPERATOR","->",707],["T_STRING","_getAttributeFieldName",707],"(",["T_STRING","trim",707],"(",["T_VARIABLE","$fk",707],")",")",";",["T_WHITESPACE","\n\n        ",707],["T_COMMENT","\/\/ process join type\n",709],["T_WHITESPACE","        ",710],["T_SWITCH","switch",710],["T_WHITESPACE"," ",710],"(",["T_VARIABLE","$joinType",710],")",["T_WHITESPACE"," ",710],"{",["T_WHITESPACE","\n            ",710],["T_CASE","case",711],["T_WHITESPACE"," ",711],["T_CONSTANT_ENCAPSED_STRING","'left'",711],":",["T_WHITESPACE","\n                ",711],["T_VARIABLE","$joinMethod",712],["T_WHITESPACE"," ",712],"=",["T_WHITESPACE"," ",712],["T_CONSTANT_ENCAPSED_STRING","'joinLeft'",712],";",["T_WHITESPACE","\n                ",712],["T_BREAK","break",713],";",["T_WHITESPACE","\n\n            ",713],["T_DEFAULT","default",715],":",["T_WHITESPACE","\n                ",715],["T_VARIABLE","$joinMethod",716],["T_WHITESPACE"," ",716],"=",["T_WHITESPACE"," ",716],["T_CONSTANT_ENCAPSED_STRING","'join'",716],";",["T_WHITESPACE","\n        ",716],"}",["T_WHITESPACE","\n        ",717],["T_VARIABLE","$condArr",718],["T_WHITESPACE"," ",718],"=",["T_WHITESPACE"," ",718],["T_ARRAY","array",718],"(",["T_VARIABLE","$bindCond",718],")",";",["T_WHITESPACE","\n\n        ",718],["T_COMMENT","\/\/ add where condition if needed\n",720],["T_WHITESPACE","        ",721],["T_IF","if",721],["T_WHITESPACE"," ",721],"(",["T_VARIABLE","$cond",721],["T_WHITESPACE"," ",721],["T_IS_NOT_IDENTICAL","!==",721],["T_WHITESPACE"," ",721],["T_STRING","null",721],")",["T_WHITESPACE"," ",721],"{",["T_WHITESPACE","\n            ",721],["T_IF","if",722],["T_WHITESPACE"," ",722],"(",["T_STRING","is_array",722],"(",["T_VARIABLE","$cond",722],")",")",["T_WHITESPACE"," ",722],"{",["T_WHITESPACE","\n                ",722],["T_FOREACH","foreach",723],["T_WHITESPACE"," ",723],"(",["T_VARIABLE","$cond",723],["T_WHITESPACE"," ",723],["T_AS","as",723],["T_WHITESPACE"," ",723],["T_VARIABLE","$k",723],["T_DOUBLE_ARROW","=>",723],["T_VARIABLE","$v",723],")",["T_WHITESPACE"," ",723],"{",["T_WHITESPACE","\n                    ",723],["T_VARIABLE","$condArr",724],"[","]",["T_WHITESPACE"," ",724],"=",["T_WHITESPACE"," ",724],["T_VARIABLE","$this",724],["T_OBJECT_OPERATOR","->",724],["T_STRING","_getConditionSql",724],"(",["T_VARIABLE","$tableAlias",724],".",["T_CONSTANT_ENCAPSED_STRING","'.'",724],".",["T_VARIABLE","$k",724],",",["T_WHITESPACE"," ",724],["T_VARIABLE","$v",724],")",";",["T_WHITESPACE","\n                ",724],"}",["T_WHITESPACE","\n            ",725],"}",["T_WHITESPACE"," ",726],["T_ELSE","else",726],["T_WHITESPACE"," ",726],"{",["T_WHITESPACE","\n                ",726],["T_VARIABLE","$condArr",727],"[","]",["T_WHITESPACE"," ",727],"=",["T_WHITESPACE"," ",727],["T_STRING","str_replace",727],"(",["T_CONSTANT_ENCAPSED_STRING","'{{table}}'",727],",",["T_WHITESPACE"," ",727],["T_VARIABLE","$tableAlias",727],",",["T_WHITESPACE"," ",727],["T_VARIABLE","$cond",727],")",";",["T_WHITESPACE","\n            ",727],"}",["T_WHITESPACE","\n        ",728],"}",["T_WHITESPACE","\n        ",729],["T_VARIABLE","$cond",730],["T_WHITESPACE"," ",730],"=",["T_WHITESPACE"," ",730],["T_CONSTANT_ENCAPSED_STRING","'('",730],["T_WHITESPACE"," ",730],".",["T_WHITESPACE"," ",730],["T_STRING","implode",730],"(",["T_CONSTANT_ENCAPSED_STRING","') AND ('",730],",",["T_WHITESPACE"," ",730],["T_VARIABLE","$condArr",730],")",["T_WHITESPACE"," ",730],".",["T_WHITESPACE"," ",730],["T_CONSTANT_ENCAPSED_STRING","')'",730],";",["T_WHITESPACE","\n\n        ",730],["T_COMMENT","\/\/ join table\n",732],["T_WHITESPACE","        ",733],["T_VARIABLE","$this",733],["T_OBJECT_OPERATOR","->",733],["T_STRING","getSelect",733],"(",")",["T_WHITESPACE","\n            ",733],["T_OBJECT_OPERATOR","->",734],["T_VARIABLE","$joinMethod",734],"(",["T_ARRAY","array",734],"(",["T_VARIABLE","$tableAlias",734],["T_WHITESPACE"," ",734],["T_DOUBLE_ARROW","=>",734],["T_WHITESPACE"," ",734],["T_VARIABLE","$table",734],")",",",["T_WHITESPACE"," ",734],["T_VARIABLE","$cond",734],",",["T_WHITESPACE"," ",734],"(",["T_VARIABLE","$field",734],["T_WHITESPACE"," ",734],"?",["T_WHITESPACE"," ",734],["T_ARRAY","array",734],"(",["T_VARIABLE","$alias",734],["T_DOUBLE_ARROW","=>",734],["T_VARIABLE","$field",734],")",["T_WHITESPACE"," ",734],":",["T_WHITESPACE"," ",734],["T_ARRAY","array",734],"(",")",")",")",";",["T_WHITESPACE","\n\n        ",734],["T_COMMENT","\/\/ save joined attribute\n",736],["T_WHITESPACE","        ",737],["T_VARIABLE","$this",737],["T_OBJECT_OPERATOR","->",737],["T_STRING","_joinFields",737],"[",["T_VARIABLE","$alias",737],"]",["T_WHITESPACE"," ",737],"=",["T_WHITESPACE"," ",737],["T_ARRAY","array",737],"(",["T_WHITESPACE","\n            ",737],["T_CONSTANT_ENCAPSED_STRING","'table'",738],["T_WHITESPACE"," ",738],["T_DOUBLE_ARROW","=>",738],["T_WHITESPACE"," ",738],["T_VARIABLE","$tableAlias",738],",",["T_WHITESPACE","\n            ",738],["T_CONSTANT_ENCAPSED_STRING","'field'",739],["T_WHITESPACE"," ",739],["T_DOUBLE_ARROW","=>",739],["T_WHITESPACE"," ",739],["T_VARIABLE","$field",739],",",["T_WHITESPACE","\n        ",739],")",";",["T_WHITESPACE","\n\n        ",740],["T_RETURN","return",742],["T_WHITESPACE"," ",742],["T_VARIABLE","$this",742],";",["T_WHITESPACE","\n    ",742],"}",["T_WHITESPACE","\n\n    ",743],["T_DOC_COMMENT","\/**\n     * Join a table\n     *\n     * @param string|array $table\n     * @param string $bind\n     * @param string|array $fields\n     * @param null|array $cond\n     * @param string $joinType\n     * @return Mage_Eav_Model_Entity_Collection_Abstract\n     *\/",745],["T_WHITESPACE","\n    ",754],["T_PUBLIC","public",755],["T_WHITESPACE"," ",755],["T_FUNCTION","function",755],["T_WHITESPACE"," ",755],["T_STRING","joinTable",755],"(",["T_VARIABLE","$table",755],",",["T_WHITESPACE"," ",755],["T_VARIABLE","$bind",755],",",["T_WHITESPACE"," ",755],["T_VARIABLE","$fields",755],["T_WHITESPACE"," ",755],"=",["T_WHITESPACE"," ",755],["T_STRING","null",755],",",["T_WHITESPACE"," ",755],["T_VARIABLE","$cond",755],["T_WHITESPACE"," ",755],"=",["T_WHITESPACE"," ",755],["T_STRING","null",755],",",["T_WHITESPACE"," ",755],["T_VARIABLE","$joinType",755],["T_WHITESPACE"," ",755],"=",["T_WHITESPACE"," ",755],["T_CONSTANT_ENCAPSED_STRING","'inner'",755],")",["T_WHITESPACE","\n    ",755],"{",["T_WHITESPACE","\n        ",756],["T_VARIABLE","$tableAlias",757],["T_WHITESPACE"," ",757],"=",["T_WHITESPACE"," ",757],["T_STRING","null",757],";",["T_WHITESPACE","\n        ",757],["T_IF","if",758],["T_WHITESPACE"," ",758],"(",["T_STRING","is_array",758],"(",["T_VARIABLE","$table",758],")",")",["T_WHITESPACE"," ",758],"{",["T_WHITESPACE","\n            ",758],["T_LIST","list",759],"(",["T_VARIABLE","$tableAlias",759],",",["T_WHITESPACE"," ",759],["T_VARIABLE","$tableName",759],")",["T_WHITESPACE"," ",759],"=",["T_WHITESPACE"," ",759],["T_STRING","each",759],"(",["T_VARIABLE","$table",759],")",";",["T_WHITESPACE","\n        ",759],"}",["T_WHITESPACE"," ",760],["T_ELSE","else",760],["T_WHITESPACE"," ",760],"{",["T_WHITESPACE","\n            ",760],["T_VARIABLE","$tableName",761],["T_WHITESPACE"," ",761],"=",["T_WHITESPACE"," ",761],["T_VARIABLE","$table",761],";",["T_WHITESPACE","\n        ",761],"}",["T_WHITESPACE","\n\n        ",762],["T_COMMENT","\/\/ validate table\n",764],["T_WHITESPACE","        ",765],["T_IF","if",765],["T_WHITESPACE"," ",765],"(",["T_STRING","strpos",765],"(",["T_VARIABLE","$tableName",765],",",["T_WHITESPACE"," ",765],["T_CONSTANT_ENCAPSED_STRING","'\/'",765],")",["T_WHITESPACE"," ",765],["T_IS_NOT_IDENTICAL","!==",765],["T_WHITESPACE"," ",765],["T_STRING","false",765],")",["T_WHITESPACE"," ",765],"{",["T_WHITESPACE","\n            ",765],["T_VARIABLE","$tableName",766],["T_WHITESPACE"," ",766],"=",["T_WHITESPACE"," ",766],["T_STRING","Mage",766],["T_DOUBLE_COLON","::",766],["T_STRING","getSingleton",766],"(",["T_CONSTANT_ENCAPSED_STRING","'core\/resource'",766],")",["T_OBJECT_OPERATOR","->",766],["T_STRING","getTableName",766],"(",["T_VARIABLE","$tableName",766],")",";",["T_WHITESPACE","\n        ",766],"}",["T_WHITESPACE","\n        ",767],["T_IF","if",768],["T_WHITESPACE"," ",768],"(",["T_EMPTY","empty",768],"(",["T_VARIABLE","$tableAlias",768],")",")",["T_WHITESPACE"," ",768],"{",["T_WHITESPACE","\n            ",768],["T_VARIABLE","$tableAlias",769],["T_WHITESPACE"," ",769],"=",["T_WHITESPACE"," ",769],["T_VARIABLE","$tableName",769],";",["T_WHITESPACE","\n        ",769],"}",["T_WHITESPACE","\n\n        ",770],["T_COMMENT","\/\/ validate fields and aliases\n",772],["T_WHITESPACE","        ",773],["T_IF","if",773],["T_WHITESPACE"," ",773],"(","!",["T_VARIABLE","$fields",773],")",["T_WHITESPACE"," ",773],"{",["T_WHITESPACE","\n            ",773],["T_THROW","throw",774],["T_WHITESPACE"," ",774],["T_STRING","Mage",774],["T_DOUBLE_COLON","::",774],["T_STRING","exception",774],"(",["T_CONSTANT_ENCAPSED_STRING","'Mage_Eav'",774],",",["T_WHITESPACE"," ",774],["T_STRING","Mage",774],["T_DOUBLE_COLON","::",774],["T_STRING","helper",774],"(",["T_CONSTANT_ENCAPSED_STRING","'eav'",774],")",["T_OBJECT_OPERATOR","->",774],["T_STRING","__",774],"(",["T_CONSTANT_ENCAPSED_STRING","'Invalid joint fields'",774],")",")",";",["T_WHITESPACE","\n        ",774],"}",["T_WHITESPACE","\n        ",775],["T_FOREACH","foreach",776],["T_WHITESPACE"," ",776],"(",["T_VARIABLE","$fields",776],["T_WHITESPACE"," ",776],["T_AS","as",776],["T_WHITESPACE"," ",776],["T_VARIABLE","$alias",776],["T_DOUBLE_ARROW","=>",776],["T_VARIABLE","$field",776],")",["T_WHITESPACE"," ",776],"{",["T_WHITESPACE","\n            ",776],["T_IF","if",777],["T_WHITESPACE"," ",777],"(",["T_ISSET","isset",777],"(",["T_VARIABLE","$this",777],["T_OBJECT_OPERATOR","->",777],["T_STRING","_joinFields",777],"[",["T_VARIABLE","$alias",777],"]",")",")",["T_WHITESPACE"," ",777],"{",["T_WHITESPACE","\n                ",777],["T_THROW","throw",778],["T_WHITESPACE"," ",778],["T_STRING","Mage",778],["T_DOUBLE_COLON","::",778],["T_STRING","exception",778],"(",["T_WHITESPACE","\n                    ",778],["T_CONSTANT_ENCAPSED_STRING","'Mage_Eav'",779],",",["T_WHITESPACE","\n                    ",779],["T_STRING","Mage",780],["T_DOUBLE_COLON","::",780],["T_STRING","helper",780],"(",["T_CONSTANT_ENCAPSED_STRING","'eav'",780],")",["T_OBJECT_OPERATOR","->",780],["T_STRING","__",780],"(",["T_CONSTANT_ENCAPSED_STRING","'A joint field with this alias (%s) is already declared'",780],",",["T_WHITESPACE"," ",780],["T_VARIABLE","$alias",780],")",["T_WHITESPACE","\n                ",780],")",";",["T_WHITESPACE","\n            ",781],"}",["T_WHITESPACE","\n            ",782],["T_VARIABLE","$this",783],["T_OBJECT_OPERATOR","->",783],["T_STRING","_joinFields",783],"[",["T_VARIABLE","$alias",783],"]",["T_WHITESPACE"," ",783],"=",["T_WHITESPACE"," ",783],["T_ARRAY","array",783],"(",["T_WHITESPACE","\n                ",783],["T_CONSTANT_ENCAPSED_STRING","'table'",784],["T_WHITESPACE"," ",784],["T_DOUBLE_ARROW","=>",784],["T_WHITESPACE"," ",784],["T_VARIABLE","$tableAlias",784],",",["T_WHITESPACE","\n                ",784],["T_CONSTANT_ENCAPSED_STRING","'field'",785],["T_WHITESPACE"," ",785],["T_DOUBLE_ARROW","=>",785],["T_WHITESPACE"," ",785],["T_VARIABLE","$field",785],",",["T_WHITESPACE","\n            ",785],")",";",["T_WHITESPACE","\n        ",786],"}",["T_WHITESPACE","\n\n        ",787],["T_COMMENT","\/\/ validate bind\n",789],["T_WHITESPACE","        ",790],["T_LIST","list",790],"(",["T_VARIABLE","$pk",790],",",["T_WHITESPACE"," ",790],["T_VARIABLE","$fk",790],")",["T_WHITESPACE"," ",790],"=",["T_WHITESPACE"," ",790],["T_STRING","explode",790],"(",["T_CONSTANT_ENCAPSED_STRING","'='",790],",",["T_WHITESPACE"," ",790],["T_VARIABLE","$bind",790],")",";",["T_WHITESPACE","\n        ",790],["T_VARIABLE","$bindCond",791],["T_WHITESPACE"," ",791],"=",["T_WHITESPACE"," ",791],["T_VARIABLE","$tableAlias",791],["T_WHITESPACE"," ",791],".",["T_WHITESPACE"," ",791],["T_CONSTANT_ENCAPSED_STRING","'.'",791],["T_WHITESPACE"," ",791],".",["T_WHITESPACE"," ",791],["T_VARIABLE","$pk",791],["T_WHITESPACE"," ",791],".",["T_WHITESPACE"," ",791],["T_CONSTANT_ENCAPSED_STRING","'='",791],["T_WHITESPACE"," ",791],".",["T_WHITESPACE"," ",791],["T_VARIABLE","$this",791],["T_OBJECT_OPERATOR","->",791],["T_STRING","_getAttributeFieldName",791],"(",["T_VARIABLE","$fk",791],")",";",["T_WHITESPACE","\n\n        ",791],["T_COMMENT","\/\/ process join type\n",793],["T_WHITESPACE","        ",794],["T_SWITCH","switch",794],["T_WHITESPACE"," ",794],"(",["T_VARIABLE","$joinType",794],")",["T_WHITESPACE"," ",794],"{",["T_WHITESPACE","\n            ",794],["T_CASE","case",795],["T_WHITESPACE"," ",795],["T_CONSTANT_ENCAPSED_STRING","'left'",795],":",["T_WHITESPACE","\n                ",795],["T_VARIABLE","$joinMethod",796],["T_WHITESPACE"," ",796],"=",["T_WHITESPACE"," ",796],["T_CONSTANT_ENCAPSED_STRING","'joinLeft'",796],";",["T_WHITESPACE","\n                ",796],["T_BREAK","break",797],";",["T_WHITESPACE","\n\n            ",797],["T_DEFAULT","default",799],":",["T_WHITESPACE","\n                ",799],["T_VARIABLE","$joinMethod",800],["T_WHITESPACE"," ",800],"=",["T_WHITESPACE"," ",800],["T_CONSTANT_ENCAPSED_STRING","'join'",800],";",["T_WHITESPACE","\n        ",800],"}",["T_WHITESPACE","\n        ",801],["T_VARIABLE","$condArr",802],["T_WHITESPACE"," ",802],"=",["T_WHITESPACE"," ",802],["T_ARRAY","array",802],"(",["T_VARIABLE","$bindCond",802],")",";",["T_WHITESPACE","\n\n        ",802],["T_COMMENT","\/\/ add where condition if needed\n",804],["T_WHITESPACE","        ",805],["T_IF","if",805],["T_WHITESPACE"," ",805],"(",["T_VARIABLE","$cond",805],["T_WHITESPACE"," ",805],["T_IS_NOT_IDENTICAL","!==",805],["T_WHITESPACE"," ",805],["T_STRING","null",805],")",["T_WHITESPACE"," ",805],"{",["T_WHITESPACE","\n            ",805],["T_IF","if",806],["T_WHITESPACE"," ",806],"(",["T_STRING","is_array",806],"(",["T_VARIABLE","$cond",806],")",")",["T_WHITESPACE"," ",806],"{",["T_WHITESPACE","\n                ",806],["T_FOREACH","foreach",807],["T_WHITESPACE"," ",807],"(",["T_VARIABLE","$cond",807],["T_WHITESPACE"," ",807],["T_AS","as",807],["T_WHITESPACE"," ",807],["T_VARIABLE","$k",807],["T_WHITESPACE"," ",807],["T_DOUBLE_ARROW","=>",807],["T_WHITESPACE"," ",807],["T_VARIABLE","$v",807],")",["T_WHITESPACE"," ",807],"{",["T_WHITESPACE","\n                    ",807],["T_VARIABLE","$condArr",808],"[","]",["T_WHITESPACE"," ",808],"=",["T_WHITESPACE"," ",808],["T_VARIABLE","$this",808],["T_OBJECT_OPERATOR","->",808],["T_STRING","_getConditionSql",808],"(",["T_VARIABLE","$tableAlias",808],".",["T_CONSTANT_ENCAPSED_STRING","'.'",808],".",["T_VARIABLE","$k",808],",",["T_WHITESPACE"," ",808],["T_VARIABLE","$v",808],")",";",["T_WHITESPACE","\n                ",808],"}",["T_WHITESPACE","\n            ",809],"}",["T_WHITESPACE"," ",810],["T_ELSE","else",810],["T_WHITESPACE"," ",810],"{",["T_WHITESPACE","\n                ",810],["T_VARIABLE","$condArr",811],"[","]",["T_WHITESPACE"," ",811],"=",["T_WHITESPACE"," ",811],["T_STRING","str_replace",811],"(",["T_CONSTANT_ENCAPSED_STRING","'{{table}}'",811],",",["T_WHITESPACE"," ",811],["T_VARIABLE","$tableAlias",811],",",["T_WHITESPACE"," ",811],["T_VARIABLE","$cond",811],")",";",["T_WHITESPACE","\n            ",811],"}",["T_WHITESPACE","\n        ",812],"}",["T_WHITESPACE","\n        ",813],["T_VARIABLE","$cond",814],["T_WHITESPACE"," ",814],"=",["T_WHITESPACE"," ",814],["T_CONSTANT_ENCAPSED_STRING","'('",814],".",["T_STRING","implode",814],"(",["T_CONSTANT_ENCAPSED_STRING","') AND ('",814],",",["T_WHITESPACE"," ",814],["T_VARIABLE","$condArr",814],")",".",["T_CONSTANT_ENCAPSED_STRING","')'",814],";",["T_WHITESPACE","\n\n",814],["T_COMMENT","\/\/ join table\n",816],["T_WHITESPACE","        ",817],["T_VARIABLE","$this",817],["T_OBJECT_OPERATOR","->",817],["T_STRING","getSelect",817],"(",")",["T_OBJECT_OPERATOR","->",817],["T_VARIABLE","$joinMethod",817],"(",["T_ARRAY","array",817],"(",["T_VARIABLE","$tableAlias",817],["T_WHITESPACE"," ",817],["T_DOUBLE_ARROW","=>",817],["T_WHITESPACE"," ",817],["T_VARIABLE","$tableName",817],")",",",["T_WHITESPACE"," ",817],["T_VARIABLE","$cond",817],",",["T_WHITESPACE"," ",817],["T_VARIABLE","$fields",817],")",";",["T_WHITESPACE","\n\n        ",817],["T_RETURN","return",819],["T_WHITESPACE"," ",819],["T_VARIABLE","$this",819],";",["T_WHITESPACE","\n    ",819],"}",["T_WHITESPACE","\n\n    ",820],["T_DOC_COMMENT","\/**\n     * Remove an attribute from selection list\n     *\n     * @param string $attribute\n     * @return Mage_Eav_Model_Entity_Collection_Abstract\n     *\/",822],["T_WHITESPACE","\n    ",827],["T_PUBLIC","public",828],["T_WHITESPACE"," ",828],["T_FUNCTION","function",828],["T_WHITESPACE"," ",828],["T_STRING","removeAttributeToSelect",828],"(",["T_VARIABLE","$attribute",828],["T_WHITESPACE"," ",828],"=",["T_WHITESPACE"," ",828],["T_STRING","null",828],")",["T_WHITESPACE","\n    ",828],"{",["T_WHITESPACE","\n        ",829],["T_IF","if",830],["T_WHITESPACE"," ",830],"(",["T_VARIABLE","$attribute",830],["T_WHITESPACE"," ",830],["T_IS_IDENTICAL","===",830],["T_WHITESPACE"," ",830],["T_STRING","null",830],")",["T_WHITESPACE"," ",830],"{",["T_WHITESPACE","\n            ",830],["T_VARIABLE","$this",831],["T_OBJECT_OPERATOR","->",831],["T_STRING","_selectAttributes",831],["T_WHITESPACE"," ",831],"=",["T_WHITESPACE"," ",831],["T_ARRAY","array",831],"(",")",";",["T_WHITESPACE","\n        ",831],"}",["T_WHITESPACE"," ",832],["T_ELSE","else",832],["T_WHITESPACE"," ",832],"{",["T_WHITESPACE","\n            ",832],["T_UNSET","unset",833],"(",["T_VARIABLE","$this",833],["T_OBJECT_OPERATOR","->",833],["T_STRING","_selectAttributes",833],"[",["T_VARIABLE","$attribute",833],"]",")",";",["T_WHITESPACE","\n        ",833],"}",["T_WHITESPACE","\n        ",834],["T_RETURN","return",835],["T_WHITESPACE"," ",835],["T_VARIABLE","$this",835],";",["T_WHITESPACE","\n    ",835],"}",["T_WHITESPACE","\n\n    ",836],["T_DOC_COMMENT","\/**\n     * Set collection page start and records to show\n     *\n     * @param integer $pageNum\n     * @param integer $pageSize\n     * @return Mage_Eav_Model_Entity_Collection_Abstract\n     *\/",838],["T_WHITESPACE","\n    ",844],["T_PUBLIC","public",845],["T_WHITESPACE"," ",845],["T_FUNCTION","function",845],["T_WHITESPACE"," ",845],["T_STRING","setPage",845],"(",["T_VARIABLE","$pageNum",845],",",["T_WHITESPACE"," ",845],["T_VARIABLE","$pageSize",845],")",["T_WHITESPACE","\n    ",845],"{",["T_WHITESPACE","\n        ",846],["T_VARIABLE","$this",847],["T_OBJECT_OPERATOR","->",847],["T_STRING","setCurPage",847],"(",["T_VARIABLE","$pageNum",847],")",["T_WHITESPACE","\n            ",847],["T_OBJECT_OPERATOR","->",848],["T_STRING","setPageSize",848],"(",["T_VARIABLE","$pageSize",848],")",";",["T_WHITESPACE","\n        ",848],["T_RETURN","return",849],["T_WHITESPACE"," ",849],["T_VARIABLE","$this",849],";",["T_WHITESPACE","\n    ",849],"}",["T_WHITESPACE","\n\n    ",850],["T_DOC_COMMENT","\/**\n     * Load collection data into object items\n     *\n     * @return Mage_Eav_Model_Entity_Collection_Abstract\n     *\/",852],["T_WHITESPACE","\n    ",856],["T_PUBLIC","public",857],["T_WHITESPACE"," ",857],["T_FUNCTION","function",857],["T_WHITESPACE"," ",857],["T_STRING","load",857],"(",["T_VARIABLE","$printQuery",857],["T_WHITESPACE"," ",857],"=",["T_WHITESPACE"," ",857],["T_STRING","false",857],",",["T_WHITESPACE"," ",857],["T_VARIABLE","$logQuery",857],["T_WHITESPACE"," ",857],"=",["T_WHITESPACE"," ",857],["T_STRING","false",857],")",["T_WHITESPACE","\n    ",857],"{",["T_WHITESPACE","\n        ",858],["T_IF","if",859],["T_WHITESPACE"," ",859],"(",["T_VARIABLE","$this",859],["T_OBJECT_OPERATOR","->",859],["T_STRING","isLoaded",859],"(",")",")",["T_WHITESPACE"," ",859],"{",["T_WHITESPACE","\n            ",859],["T_RETURN","return",860],["T_WHITESPACE"," ",860],["T_VARIABLE","$this",860],";",["T_WHITESPACE","\n        ",860],"}",["T_WHITESPACE","\n        ",861],["T_STRING","Varien_Profiler",862],["T_DOUBLE_COLON","::",862],["T_STRING","start",862],"(",["T_CONSTANT_ENCAPSED_STRING","'__EAV_COLLECTION_BEFORE_LOAD__'",862],")",";",["T_WHITESPACE","\n        ",862],["T_STRING","Mage",863],["T_DOUBLE_COLON","::",863],["T_STRING","dispatchEvent",863],"(",["T_CONSTANT_ENCAPSED_STRING","'eav_collection_abstract_load_before'",863],",",["T_WHITESPACE"," ",863],["T_ARRAY","array",863],"(",["T_CONSTANT_ENCAPSED_STRING","'collection'",863],["T_WHITESPACE"," ",863],["T_DOUBLE_ARROW","=>",863],["T_WHITESPACE"," ",863],["T_VARIABLE","$this",863],")",")",";",["T_WHITESPACE","\n        ",863],["T_VARIABLE","$this",864],["T_OBJECT_OPERATOR","->",864],["T_STRING","_beforeLoad",864],"(",")",";",["T_WHITESPACE","\n        ",864],["T_STRING","Varien_Profiler",865],["T_DOUBLE_COLON","::",865],["T_STRING","stop",865],"(",["T_CONSTANT_ENCAPSED_STRING","'__EAV_COLLECTION_BEFORE_LOAD__'",865],")",";",["T_WHITESPACE","\n\n        ",865],["T_VARIABLE","$this",867],["T_OBJECT_OPERATOR","->",867],["T_STRING","_renderFilters",867],"(",")",";",["T_WHITESPACE","\n        ",867],["T_VARIABLE","$this",868],["T_OBJECT_OPERATOR","->",868],["T_STRING","_renderOrders",868],"(",")",";",["T_WHITESPACE","\n\n        ",868],["T_STRING","Varien_Profiler",870],["T_DOUBLE_COLON","::",870],["T_STRING","start",870],"(",["T_CONSTANT_ENCAPSED_STRING","'__EAV_COLLECTION_LOAD_ENT__'",870],")",";",["T_WHITESPACE","\n        ",870],["T_VARIABLE","$this",871],["T_OBJECT_OPERATOR","->",871],["T_STRING","_loadEntities",871],"(",["T_VARIABLE","$printQuery",871],",",["T_WHITESPACE"," ",871],["T_VARIABLE","$logQuery",871],")",";",["T_WHITESPACE","\n        ",871],["T_STRING","Varien_Profiler",872],["T_DOUBLE_COLON","::",872],["T_STRING","stop",872],"(",["T_CONSTANT_ENCAPSED_STRING","'__EAV_COLLECTION_LOAD_ENT__'",872],")",";",["T_WHITESPACE","\n        ",872],["T_STRING","Varien_Profiler",873],["T_DOUBLE_COLON","::",873],["T_STRING","start",873],"(",["T_CONSTANT_ENCAPSED_STRING","'__EAV_COLLECTION_LOAD_ATTR__'",873],")",";",["T_WHITESPACE","\n        ",873],["T_VARIABLE","$this",874],["T_OBJECT_OPERATOR","->",874],["T_STRING","_loadAttributes",874],"(",["T_VARIABLE","$printQuery",874],",",["T_WHITESPACE"," ",874],["T_VARIABLE","$logQuery",874],")",";",["T_WHITESPACE","\n        ",874],["T_STRING","Varien_Profiler",875],["T_DOUBLE_COLON","::",875],["T_STRING","stop",875],"(",["T_CONSTANT_ENCAPSED_STRING","'__EAV_COLLECTION_LOAD_ATTR__'",875],")",";",["T_WHITESPACE","\n\n        ",875],["T_STRING","Varien_Profiler",877],["T_DOUBLE_COLON","::",877],["T_STRING","start",877],"(",["T_CONSTANT_ENCAPSED_STRING","'__EAV_COLLECTION_ORIG_DATA__'",877],")",";",["T_WHITESPACE","\n        ",877],["T_FOREACH","foreach",878],["T_WHITESPACE"," ",878],"(",["T_VARIABLE","$this",878],["T_OBJECT_OPERATOR","->",878],["T_STRING","_items",878],["T_WHITESPACE"," ",878],["T_AS","as",878],["T_WHITESPACE"," ",878],["T_VARIABLE","$item",878],")",["T_WHITESPACE"," ",878],"{",["T_WHITESPACE","\n            ",878],["T_VARIABLE","$item",879],["T_OBJECT_OPERATOR","->",879],["T_STRING","setOrigData",879],"(",")",";",["T_WHITESPACE","\n        ",879],"}",["T_WHITESPACE","\n        ",880],["T_STRING","Varien_Profiler",881],["T_DOUBLE_COLON","::",881],["T_STRING","stop",881],"(",["T_CONSTANT_ENCAPSED_STRING","'__EAV_COLLECTION_ORIG_DATA__'",881],")",";",["T_WHITESPACE","\n\n        ",881],["T_VARIABLE","$this",883],["T_OBJECT_OPERATOR","->",883],["T_STRING","_setIsLoaded",883],"(",")",";",["T_WHITESPACE","\n        ",883],["T_STRING","Varien_Profiler",884],["T_DOUBLE_COLON","::",884],["T_STRING","start",884],"(",["T_CONSTANT_ENCAPSED_STRING","'__EAV_COLLECTION_AFTER_LOAD__'",884],")",";",["T_WHITESPACE","\n        ",884],["T_VARIABLE","$this",885],["T_OBJECT_OPERATOR","->",885],["T_STRING","_afterLoad",885],"(",")",";",["T_WHITESPACE","\n        ",885],["T_STRING","Varien_Profiler",886],["T_DOUBLE_COLON","::",886],["T_STRING","stop",886],"(",["T_CONSTANT_ENCAPSED_STRING","'__EAV_COLLECTION_AFTER_LOAD__'",886],")",";",["T_WHITESPACE","\n        ",886],["T_RETURN","return",887],["T_WHITESPACE"," ",887],["T_VARIABLE","$this",887],";",["T_WHITESPACE","\n    ",887],"}",["T_WHITESPACE","\n\n    ",888],["T_DOC_COMMENT","\/**\n     * Clone and reset collection\n     *\n     * @return Mage_Eav_Model_Entity_Collection_Abstract\n     *\/",890],["T_WHITESPACE","\n    ",894],["T_PROTECTED","protected",895],["T_WHITESPACE"," ",895],["T_FUNCTION","function",895],["T_WHITESPACE"," ",895],["T_STRING","_getAllIdsSelect",895],"(",["T_VARIABLE","$limit",895],["T_WHITESPACE"," ",895],"=",["T_WHITESPACE"," ",895],["T_STRING","null",895],",",["T_WHITESPACE"," ",895],["T_VARIABLE","$offset",895],["T_WHITESPACE"," ",895],"=",["T_WHITESPACE"," ",895],["T_STRING","null",895],")",["T_WHITESPACE","\n    ",895],"{",["T_WHITESPACE","\n        ",896],["T_VARIABLE","$idsSelect",897],["T_WHITESPACE"," ",897],"=",["T_WHITESPACE"," ",897],["T_CLONE","clone",897],["T_WHITESPACE"," ",897],["T_VARIABLE","$this",897],["T_OBJECT_OPERATOR","->",897],["T_STRING","getSelect",897],"(",")",";",["T_WHITESPACE","\n        ",897],["T_VARIABLE","$idsSelect",898],["T_OBJECT_OPERATOR","->",898],["T_STRING","reset",898],"(",["T_STRING","Zend_Db_Select",898],["T_DOUBLE_COLON","::",898],["T_STRING","ORDER",898],")",";",["T_WHITESPACE","\n        ",898],["T_VARIABLE","$idsSelect",899],["T_OBJECT_OPERATOR","->",899],["T_STRING","reset",899],"(",["T_STRING","Zend_Db_Select",899],["T_DOUBLE_COLON","::",899],["T_STRING","LIMIT_COUNT",899],")",";",["T_WHITESPACE","\n        ",899],["T_VARIABLE","$idsSelect",900],["T_OBJECT_OPERATOR","->",900],["T_STRING","reset",900],"(",["T_STRING","Zend_Db_Select",900],["T_DOUBLE_COLON","::",900],["T_STRING","LIMIT_OFFSET",900],")",";",["T_WHITESPACE","\n        ",900],["T_VARIABLE","$idsSelect",901],["T_OBJECT_OPERATOR","->",901],["T_STRING","reset",901],"(",["T_STRING","Zend_Db_Select",901],["T_DOUBLE_COLON","::",901],["T_STRING","COLUMNS",901],")",";",["T_WHITESPACE","\n        ",901],["T_VARIABLE","$idsSelect",902],["T_OBJECT_OPERATOR","->",902],["T_STRING","columns",902],"(",["T_CONSTANT_ENCAPSED_STRING","'e.'",902],["T_WHITESPACE"," ",902],".",["T_WHITESPACE"," ",902],["T_VARIABLE","$this",902],["T_OBJECT_OPERATOR","->",902],["T_STRING","getEntity",902],"(",")",["T_OBJECT_OPERATOR","->",902],["T_STRING","getIdFieldName",902],"(",")",")",";",["T_WHITESPACE","\n        ",902],["T_VARIABLE","$idsSelect",903],["T_OBJECT_OPERATOR","->",903],["T_STRING","limit",903],"(",["T_VARIABLE","$limit",903],",",["T_WHITESPACE"," ",903],["T_VARIABLE","$offset",903],")",";",["T_WHITESPACE","\n\n        ",903],["T_RETURN","return",905],["T_WHITESPACE"," ",905],["T_VARIABLE","$idsSelect",905],";",["T_WHITESPACE","\n    ",905],"}",["T_WHITESPACE","\n\n    ",906],["T_DOC_COMMENT","\/**\n     * Retrive all ids for collection\n     *\n     * @return array\n     *\/",908],["T_WHITESPACE","\n    ",912],["T_PUBLIC","public",913],["T_WHITESPACE"," ",913],["T_FUNCTION","function",913],["T_WHITESPACE"," ",913],["T_STRING","getAllIds",913],"(",["T_VARIABLE","$limit",913],["T_WHITESPACE"," ",913],"=",["T_WHITESPACE"," ",913],["T_STRING","null",913],",",["T_WHITESPACE"," ",913],["T_VARIABLE","$offset",913],["T_WHITESPACE"," ",913],"=",["T_WHITESPACE"," ",913],["T_STRING","null",913],")",["T_WHITESPACE","\n    ",913],"{",["T_WHITESPACE","\n        ",914],["T_RETURN","return",915],["T_WHITESPACE"," ",915],["T_VARIABLE","$this",915],["T_OBJECT_OPERATOR","->",915],["T_STRING","getConnection",915],"(",")",["T_OBJECT_OPERATOR","->",915],["T_STRING","fetchCol",915],"(",["T_VARIABLE","$this",915],["T_OBJECT_OPERATOR","->",915],["T_STRING","_getAllIdsSelect",915],"(",["T_VARIABLE","$limit",915],",",["T_WHITESPACE"," ",915],["T_VARIABLE","$offset",915],")",",",["T_WHITESPACE"," ",915],["T_VARIABLE","$this",915],["T_OBJECT_OPERATOR","->",915],["T_STRING","_bindParams",915],")",";",["T_WHITESPACE","\n    ",915],"}",["T_WHITESPACE","\n\n    ",916],["T_DOC_COMMENT","\/**\n     * Retrive all ids sql\n     *\n     * @deprecated\n     * @return array\n     *\/",918],["T_WHITESPACE","\n    ",923],["T_PUBLIC","public",924],["T_WHITESPACE"," ",924],["T_FUNCTION","function",924],["T_WHITESPACE"," ",924],["T_STRING","getAllIdsSql",924],"(",")",["T_WHITESPACE","\n    ",924],"{",["T_WHITESPACE","\n        ",925],["T_VARIABLE","$idsSelect",926],["T_WHITESPACE"," ",926],"=",["T_WHITESPACE"," ",926],["T_CLONE","clone",926],["T_WHITESPACE"," ",926],["T_VARIABLE","$this",926],["T_OBJECT_OPERATOR","->",926],["T_STRING","getSelect",926],"(",")",";",["T_WHITESPACE","\n        ",926],["T_VARIABLE","$idsSelect",927],["T_OBJECT_OPERATOR","->",927],["T_STRING","reset",927],"(",["T_STRING","Zend_Db_Select",927],["T_DOUBLE_COLON","::",927],["T_STRING","ORDER",927],")",";",["T_WHITESPACE","\n        ",927],["T_VARIABLE","$idsSelect",928],["T_OBJECT_OPERATOR","->",928],["T_STRING","reset",928],"(",["T_STRING","Zend_Db_Select",928],["T_DOUBLE_COLON","::",928],["T_STRING","LIMIT_COUNT",928],")",";",["T_WHITESPACE","\n        ",928],["T_VARIABLE","$idsSelect",929],["T_OBJECT_OPERATOR","->",929],["T_STRING","reset",929],"(",["T_STRING","Zend_Db_Select",929],["T_DOUBLE_COLON","::",929],["T_STRING","LIMIT_OFFSET",929],")",";",["T_WHITESPACE","\n        ",929],["T_VARIABLE","$idsSelect",930],["T_OBJECT_OPERATOR","->",930],["T_STRING","reset",930],"(",["T_STRING","Zend_Db_Select",930],["T_DOUBLE_COLON","::",930],["T_STRING","COLUMNS",930],")",";",["T_WHITESPACE","\n        ",930],["T_VARIABLE","$idsSelect",931],["T_OBJECT_OPERATOR","->",931],["T_STRING","reset",931],"(",["T_STRING","Zend_Db_Select",931],["T_DOUBLE_COLON","::",931],["T_STRING","GROUP",931],")",";",["T_WHITESPACE","\n        ",931],["T_VARIABLE","$idsSelect",932],["T_OBJECT_OPERATOR","->",932],["T_STRING","columns",932],"(",["T_CONSTANT_ENCAPSED_STRING","'e.'",932],".",["T_VARIABLE","$this",932],["T_OBJECT_OPERATOR","->",932],["T_STRING","getEntity",932],"(",")",["T_OBJECT_OPERATOR","->",932],["T_STRING","getIdFieldName",932],"(",")",")",";",["T_WHITESPACE","\n\n        ",932],["T_RETURN","return",934],["T_WHITESPACE"," ",934],["T_VARIABLE","$idsSelect",934],";",["T_WHITESPACE","\n    ",934],"}",["T_WHITESPACE","\n\n    ",935],["T_DOC_COMMENT","\/**\n     * Save all the entities in the collection\n     *\n     * @todo make batch save directly from collection\n     *\/",937],["T_WHITESPACE","\n    ",941],["T_PUBLIC","public",942],["T_WHITESPACE"," ",942],["T_FUNCTION","function",942],["T_WHITESPACE"," ",942],["T_STRING","save",942],"(",")",["T_WHITESPACE","\n    ",942],"{",["T_WHITESPACE","\n        ",943],["T_FOREACH","foreach",944],["T_WHITESPACE"," ",944],"(",["T_VARIABLE","$this",944],["T_OBJECT_OPERATOR","->",944],["T_STRING","getItems",944],"(",")",["T_WHITESPACE"," ",944],["T_AS","as",944],["T_WHITESPACE"," ",944],["T_VARIABLE","$item",944],")",["T_WHITESPACE"," ",944],"{",["T_WHITESPACE","\n            ",944],["T_VARIABLE","$item",945],["T_OBJECT_OPERATOR","->",945],["T_STRING","save",945],"(",")",";",["T_WHITESPACE","\n        ",945],"}",["T_WHITESPACE","\n        ",946],["T_RETURN","return",947],["T_WHITESPACE"," ",947],["T_VARIABLE","$this",947],";",["T_WHITESPACE","\n    ",947],"}",["T_WHITESPACE","\n\n\n    ",948],["T_DOC_COMMENT","\/**\n     * Delete all the entities in the collection\n     *\n     * @todo make batch delete directly from collection\n     *\/",951],["T_WHITESPACE","\n    ",955],["T_PUBLIC","public",956],["T_WHITESPACE"," ",956],["T_FUNCTION","function",956],["T_WHITESPACE"," ",956],["T_STRING","delete",956],"(",")",["T_WHITESPACE","\n    ",956],"{",["T_WHITESPACE","\n        ",957],["T_FOREACH","foreach",958],["T_WHITESPACE"," ",958],"(",["T_VARIABLE","$this",958],["T_OBJECT_OPERATOR","->",958],["T_STRING","getItems",958],"(",")",["T_WHITESPACE"," ",958],["T_AS","as",958],["T_WHITESPACE"," ",958],["T_VARIABLE","$k",958],["T_DOUBLE_ARROW","=>",958],["T_VARIABLE","$item",958],")",["T_WHITESPACE"," ",958],"{",["T_WHITESPACE","\n            ",958],["T_VARIABLE","$this",959],["T_OBJECT_OPERATOR","->",959],["T_STRING","getEntity",959],"(",")",["T_OBJECT_OPERATOR","->",959],["T_STRING","delete",959],"(",["T_VARIABLE","$item",959],")",";",["T_WHITESPACE","\n            ",959],["T_UNSET","unset",960],"(",["T_VARIABLE","$this",960],["T_OBJECT_OPERATOR","->",960],["T_STRING","_items",960],"[",["T_VARIABLE","$k",960],"]",")",";",["T_WHITESPACE","\n        ",960],"}",["T_WHITESPACE","\n        ",961],["T_RETURN","return",962],["T_WHITESPACE"," ",962],["T_VARIABLE","$this",962],";",["T_WHITESPACE","\n    ",962],"}",["T_WHITESPACE","\n\n    ",963],["T_DOC_COMMENT","\/**\n     * Import 2D array into collection as objects\n     *\n     * If the imported items already exist, update the data for existing objects\n     *\n     * @param array $arr\n     * @return Mage_Eav_Model_Entity_Collection_Abstract\n     *\/",965],["T_WHITESPACE","\n    ",972],["T_PUBLIC","public",973],["T_WHITESPACE"," ",973],["T_FUNCTION","function",973],["T_WHITESPACE"," ",973],["T_STRING","importFromArray",973],"(",["T_VARIABLE","$arr",973],")",["T_WHITESPACE","\n    ",973],"{",["T_WHITESPACE","\n        ",974],["T_VARIABLE","$entityIdField",975],["T_WHITESPACE"," ",975],"=",["T_WHITESPACE"," ",975],["T_VARIABLE","$this",975],["T_OBJECT_OPERATOR","->",975],["T_STRING","getEntity",975],"(",")",["T_OBJECT_OPERATOR","->",975],["T_STRING","getEntityIdField",975],"(",")",";",["T_WHITESPACE","\n        ",975],["T_FOREACH","foreach",976],["T_WHITESPACE"," ",976],"(",["T_VARIABLE","$arr",976],["T_WHITESPACE"," ",976],["T_AS","as",976],["T_WHITESPACE"," ",976],["T_VARIABLE","$row",976],")",["T_WHITESPACE"," ",976],"{",["T_WHITESPACE","\n            ",976],["T_VARIABLE","$entityId",977],["T_WHITESPACE"," ",977],"=",["T_WHITESPACE"," ",977],["T_VARIABLE","$row",977],"[",["T_VARIABLE","$entityIdField",977],"]",";",["T_WHITESPACE","\n            ",977],["T_IF","if",978],["T_WHITESPACE"," ",978],"(","!",["T_ISSET","isset",978],"(",["T_VARIABLE","$this",978],["T_OBJECT_OPERATOR","->",978],["T_STRING","_items",978],"[",["T_VARIABLE","$entityId",978],"]",")",")",["T_WHITESPACE"," ",978],"{",["T_WHITESPACE","\n                ",978],["T_VARIABLE","$this",979],["T_OBJECT_OPERATOR","->",979],["T_STRING","_items",979],"[",["T_VARIABLE","$entityId",979],"]",["T_WHITESPACE"," ",979],"=",["T_WHITESPACE"," ",979],["T_VARIABLE","$this",979],["T_OBJECT_OPERATOR","->",979],["T_STRING","getNewEmptyItem",979],"(",")",";",["T_WHITESPACE","\n                ",979],["T_VARIABLE","$this",980],["T_OBJECT_OPERATOR","->",980],["T_STRING","_items",980],"[",["T_VARIABLE","$entityId",980],"]",["T_OBJECT_OPERATOR","->",980],["T_STRING","setData",980],"(",["T_VARIABLE","$row",980],")",";",["T_WHITESPACE","\n            ",980],"}",["T_WHITESPACE"," ",981],["T_ELSE","else",981],["T_WHITESPACE"," ",981],"{",["T_WHITESPACE","\n                ",981],["T_VARIABLE","$this",982],["T_OBJECT_OPERATOR","->",982],["T_STRING","_items",982],"[",["T_VARIABLE","$entityId",982],"]",["T_OBJECT_OPERATOR","->",982],["T_STRING","addData",982],"(",["T_VARIABLE","$row",982],")",";",["T_WHITESPACE","\n            ",982],"}",["T_WHITESPACE","\n        ",983],"}",["T_WHITESPACE","\n        ",984],["T_RETURN","return",985],["T_WHITESPACE"," ",985],["T_VARIABLE","$this",985],";",["T_WHITESPACE","\n    ",985],"}",["T_WHITESPACE","\n\n    ",986],["T_DOC_COMMENT","\/**\n     * Get collection data as a 2D array\n     *\n     * @return array\n     *\/",988],["T_WHITESPACE","\n    ",992],["T_PUBLIC","public",993],["T_WHITESPACE"," ",993],["T_FUNCTION","function",993],["T_WHITESPACE"," ",993],["T_STRING","exportToArray",993],"(",")",["T_WHITESPACE","\n    ",993],"{",["T_WHITESPACE","\n        ",994],["T_VARIABLE","$result",995],["T_WHITESPACE"," ",995],"=",["T_WHITESPACE"," ",995],["T_ARRAY","array",995],"(",")",";",["T_WHITESPACE","\n        ",995],["T_VARIABLE","$entityIdField",996],["T_WHITESPACE"," ",996],"=",["T_WHITESPACE"," ",996],["T_VARIABLE","$this",996],["T_OBJECT_OPERATOR","->",996],["T_STRING","getEntity",996],"(",")",["T_OBJECT_OPERATOR","->",996],["T_STRING","getEntityIdField",996],"(",")",";",["T_WHITESPACE","\n        ",996],["T_FOREACH","foreach",997],["T_WHITESPACE"," ",997],"(",["T_VARIABLE","$this",997],["T_OBJECT_OPERATOR","->",997],["T_STRING","getItems",997],"(",")",["T_WHITESPACE"," ",997],["T_AS","as",997],["T_WHITESPACE"," ",997],["T_VARIABLE","$item",997],")",["T_WHITESPACE"," ",997],"{",["T_WHITESPACE","\n            ",997],["T_VARIABLE","$result",998],"[",["T_VARIABLE","$item",998],["T_OBJECT_OPERATOR","->",998],["T_STRING","getData",998],"(",["T_VARIABLE","$entityIdField",998],")","]",["T_WHITESPACE"," ",998],"=",["T_WHITESPACE"," ",998],["T_VARIABLE","$item",998],["T_OBJECT_OPERATOR","->",998],["T_STRING","getData",998],"(",")",";",["T_WHITESPACE","\n        ",998],"}",["T_WHITESPACE","\n        ",999],["T_RETURN","return",1000],["T_WHITESPACE"," ",1000],["T_VARIABLE","$result",1000],";",["T_WHITESPACE","\n    ",1000],"}",["T_WHITESPACE","\n\n    ",1001],["T_DOC_COMMENT","\/**\n     * Retreive row id field name\n     *\n     * @return string\n     *\/",1003],["T_WHITESPACE","\n    ",1007],["T_PUBLIC","public",1008],["T_WHITESPACE"," ",1008],["T_FUNCTION","function",1008],["T_WHITESPACE"," ",1008],["T_STRING","getRowIdFieldName",1008],"(",")",["T_WHITESPACE","\n    ",1008],"{",["T_WHITESPACE","\n        ",1009],["T_IF","if",1010],["T_WHITESPACE"," ",1010],"(",["T_VARIABLE","$this",1010],["T_OBJECT_OPERATOR","->",1010],["T_STRING","_idFieldName",1010],["T_WHITESPACE"," ",1010],["T_IS_IDENTICAL","===",1010],["T_WHITESPACE"," ",1010],["T_STRING","null",1010],")",["T_WHITESPACE"," ",1010],"{",["T_WHITESPACE","\n            ",1010],["T_VARIABLE","$this",1011],["T_OBJECT_OPERATOR","->",1011],["T_STRING","_setIdFieldName",1011],"(",["T_VARIABLE","$this",1011],["T_OBJECT_OPERATOR","->",1011],["T_STRING","getEntity",1011],"(",")",["T_OBJECT_OPERATOR","->",1011],["T_STRING","getIdFieldName",1011],"(",")",")",";",["T_WHITESPACE","\n        ",1011],"}",["T_WHITESPACE","\n        ",1012],["T_RETURN","return",1013],["T_WHITESPACE"," ",1013],["T_VARIABLE","$this",1013],["T_OBJECT_OPERATOR","->",1013],["T_STRING","getIdFieldName",1013],"(",")",";",["T_WHITESPACE","\n    ",1013],"}",["T_WHITESPACE","\n\n    ",1014],["T_DOC_COMMENT","\/**\n     * Set row id field name\n     * @param string $fieldName\n     * @return Mage_Eav_Model_Entity_Collection_Abstract\n     *\/",1016],["T_WHITESPACE","\n    ",1020],["T_PUBLIC","public",1021],["T_WHITESPACE"," ",1021],["T_FUNCTION","function",1021],["T_WHITESPACE"," ",1021],["T_STRING","setRowIdFieldName",1021],"(",["T_VARIABLE","$fieldName",1021],")",["T_WHITESPACE","\n    ",1021],"{",["T_WHITESPACE","\n        ",1022],["T_RETURN","return",1023],["T_WHITESPACE"," ",1023],["T_VARIABLE","$this",1023],["T_OBJECT_OPERATOR","->",1023],["T_STRING","_setIdFieldName",1023],"(",["T_VARIABLE","$fieldName",1023],")",";",["T_WHITESPACE","\n    ",1023],"}",["T_WHITESPACE","\n\n    ",1024],["T_DOC_COMMENT","\/**\n     * Load entities records into items\n     *\n     * @throws Exception\n     * @return Mage_Eav_Model_Entity_Collection_Abstract\n     *\/",1026],["T_WHITESPACE","\n    ",1031],["T_PUBLIC","public",1032],["T_WHITESPACE"," ",1032],["T_FUNCTION","function",1032],["T_WHITESPACE"," ",1032],["T_STRING","_loadEntities",1032],"(",["T_VARIABLE","$printQuery",1032],["T_WHITESPACE"," ",1032],"=",["T_WHITESPACE"," ",1032],["T_STRING","false",1032],",",["T_WHITESPACE"," ",1032],["T_VARIABLE","$logQuery",1032],["T_WHITESPACE"," ",1032],"=",["T_WHITESPACE"," ",1032],["T_STRING","false",1032],")",["T_WHITESPACE","\n    ",1032],"{",["T_WHITESPACE","\n        ",1033],["T_IF","if",1034],["T_WHITESPACE"," ",1034],"(",["T_VARIABLE","$this",1034],["T_OBJECT_OPERATOR","->",1034],["T_STRING","_pageSize",1034],")",["T_WHITESPACE"," ",1034],"{",["T_WHITESPACE","\n            ",1034],["T_VARIABLE","$this",1035],["T_OBJECT_OPERATOR","->",1035],["T_STRING","getSelect",1035],"(",")",["T_OBJECT_OPERATOR","->",1035],["T_STRING","limitPage",1035],"(",["T_VARIABLE","$this",1035],["T_OBJECT_OPERATOR","->",1035],["T_STRING","getCurPage",1035],"(",")",",",["T_WHITESPACE"," ",1035],["T_VARIABLE","$this",1035],["T_OBJECT_OPERATOR","->",1035],["T_STRING","_pageSize",1035],")",";",["T_WHITESPACE","\n        ",1035],"}",["T_WHITESPACE","\n\n        ",1036],["T_VARIABLE","$this",1038],["T_OBJECT_OPERATOR","->",1038],["T_STRING","printLogQuery",1038],"(",["T_VARIABLE","$printQuery",1038],",",["T_WHITESPACE"," ",1038],["T_VARIABLE","$logQuery",1038],")",";",["T_WHITESPACE","\n\n        ",1038],["T_TRY","try",1040],["T_WHITESPACE"," ",1040],"{",["T_WHITESPACE","\n            ",1040],["T_DOC_COMMENT","\/**\n             * Prepare select query\n             * @var string $query\n             *\/",1041],["T_WHITESPACE","\n            ",1044],["T_VARIABLE","$query",1045],["T_WHITESPACE"," ",1045],"=",["T_WHITESPACE"," ",1045],["T_VARIABLE","$this",1045],["T_OBJECT_OPERATOR","->",1045],["T_STRING","_prepareSelect",1045],"(",["T_VARIABLE","$this",1045],["T_OBJECT_OPERATOR","->",1045],["T_STRING","getSelect",1045],"(",")",")",";",["T_WHITESPACE","\n            ",1045],["T_VARIABLE","$rows",1046],["T_WHITESPACE"," ",1046],"=",["T_WHITESPACE"," ",1046],["T_VARIABLE","$this",1046],["T_OBJECT_OPERATOR","->",1046],["T_STRING","_fetchAll",1046],"(",["T_VARIABLE","$query",1046],")",";",["T_WHITESPACE","\n        ",1046],"}",["T_WHITESPACE"," ",1047],["T_CATCH","catch",1047],["T_WHITESPACE"," ",1047],"(",["T_STRING","Exception",1047],["T_WHITESPACE"," ",1047],["T_VARIABLE","$e",1047],")",["T_WHITESPACE"," ",1047],"{",["T_WHITESPACE","\n            ",1047],["T_STRING","Mage",1048],["T_DOUBLE_COLON","::",1048],["T_STRING","printException",1048],"(",["T_VARIABLE","$e",1048],",",["T_WHITESPACE"," ",1048],["T_VARIABLE","$query",1048],")",";",["T_WHITESPACE","\n            ",1048],["T_VARIABLE","$this",1049],["T_OBJECT_OPERATOR","->",1049],["T_STRING","printLogQuery",1049],"(",["T_STRING","true",1049],",",["T_WHITESPACE"," ",1049],["T_STRING","true",1049],",",["T_WHITESPACE"," ",1049],["T_VARIABLE","$query",1049],")",";",["T_WHITESPACE","\n            ",1049],["T_THROW","throw",1050],["T_WHITESPACE"," ",1050],["T_VARIABLE","$e",1050],";",["T_WHITESPACE","\n        ",1050],"}",["T_WHITESPACE","\n\n        ",1051],["T_FOREACH","foreach",1053],["T_WHITESPACE"," ",1053],"(",["T_VARIABLE","$rows",1053],["T_WHITESPACE"," ",1053],["T_AS","as",1053],["T_WHITESPACE"," ",1053],["T_VARIABLE","$v",1053],")",["T_WHITESPACE"," ",1053],"{",["T_WHITESPACE","\n            ",1053],["T_VARIABLE","$object",1054],["T_WHITESPACE"," ",1054],"=",["T_WHITESPACE"," ",1054],["T_VARIABLE","$this",1054],["T_OBJECT_OPERATOR","->",1054],["T_STRING","getNewEmptyItem",1054],"(",")",["T_WHITESPACE","\n                ",1054],["T_OBJECT_OPERATOR","->",1055],["T_STRING","setData",1055],"(",["T_VARIABLE","$v",1055],")",";",["T_WHITESPACE","\n            ",1055],["T_VARIABLE","$this",1056],["T_OBJECT_OPERATOR","->",1056],["T_STRING","addItem",1056],"(",["T_VARIABLE","$object",1056],")",";",["T_WHITESPACE","\n            ",1056],["T_IF","if",1057],["T_WHITESPACE"," ",1057],"(",["T_ISSET","isset",1057],"(",["T_VARIABLE","$this",1057],["T_OBJECT_OPERATOR","->",1057],["T_STRING","_itemsById",1057],"[",["T_VARIABLE","$object",1057],["T_OBJECT_OPERATOR","->",1057],["T_STRING","getId",1057],"(",")","]",")",")",["T_WHITESPACE"," ",1057],"{",["T_WHITESPACE","\n                ",1057],["T_VARIABLE","$this",1058],["T_OBJECT_OPERATOR","->",1058],["T_STRING","_itemsById",1058],"[",["T_VARIABLE","$object",1058],["T_OBJECT_OPERATOR","->",1058],["T_STRING","getId",1058],"(",")","]","[","]",["T_WHITESPACE"," ",1058],"=",["T_WHITESPACE"," ",1058],["T_VARIABLE","$object",1058],";",["T_WHITESPACE","\n            ",1058],"}",["T_WHITESPACE"," ",1059],["T_ELSE","else",1059],["T_WHITESPACE"," ",1059],"{",["T_WHITESPACE","\n                ",1059],["T_VARIABLE","$this",1060],["T_OBJECT_OPERATOR","->",1060],["T_STRING","_itemsById",1060],"[",["T_VARIABLE","$object",1060],["T_OBJECT_OPERATOR","->",1060],["T_STRING","getId",1060],"(",")","]",["T_WHITESPACE"," ",1060],"=",["T_WHITESPACE"," ",1060],["T_ARRAY","array",1060],"(",["T_VARIABLE","$object",1060],")",";",["T_WHITESPACE","\n            ",1060],"}",["T_WHITESPACE","\n        ",1061],"}",["T_WHITESPACE","\n\n        ",1062],["T_RETURN","return",1064],["T_WHITESPACE"," ",1064],["T_VARIABLE","$this",1064],";",["T_WHITESPACE","\n    ",1064],"}",["T_WHITESPACE","\n\n    ",1065],["T_DOC_COMMENT","\/**\n     * Load attributes into loaded entities\n     *\n     * @throws Exception\n     * @return Mage_Eav_Model_Entity_Collection_Abstract\n     *\/",1067],["T_WHITESPACE","\n    ",1072],["T_PUBLIC","public",1073],["T_WHITESPACE"," ",1073],["T_FUNCTION","function",1073],["T_WHITESPACE"," ",1073],["T_STRING","_loadAttributes",1073],"(",["T_VARIABLE","$printQuery",1073],["T_WHITESPACE"," ",1073],"=",["T_WHITESPACE"," ",1073],["T_STRING","false",1073],",",["T_WHITESPACE"," ",1073],["T_VARIABLE","$logQuery",1073],["T_WHITESPACE"," ",1073],"=",["T_WHITESPACE"," ",1073],["T_STRING","false",1073],")",["T_WHITESPACE","\n    ",1073],"{",["T_WHITESPACE","\n        ",1074],["T_IF","if",1075],["T_WHITESPACE"," ",1075],"(",["T_EMPTY","empty",1075],"(",["T_VARIABLE","$this",1075],["T_OBJECT_OPERATOR","->",1075],["T_STRING","_items",1075],")",["T_WHITESPACE"," ",1075],["T_BOOLEAN_OR","||",1075],["T_WHITESPACE"," ",1075],["T_EMPTY","empty",1075],"(",["T_VARIABLE","$this",1075],["T_OBJECT_OPERATOR","->",1075],["T_STRING","_itemsById",1075],")",["T_WHITESPACE"," ",1075],["T_BOOLEAN_OR","||",1075],["T_WHITESPACE"," ",1075],["T_EMPTY","empty",1075],"(",["T_VARIABLE","$this",1075],["T_OBJECT_OPERATOR","->",1075],["T_STRING","_selectAttributes",1075],")",")",["T_WHITESPACE"," ",1075],"{",["T_WHITESPACE","\n            ",1075],["T_RETURN","return",1076],["T_WHITESPACE"," ",1076],["T_VARIABLE","$this",1076],";",["T_WHITESPACE","\n        ",1076],"}",["T_WHITESPACE","\n\n        ",1077],["T_VARIABLE","$entity",1079],["T_WHITESPACE"," ",1079],"=",["T_WHITESPACE"," ",1079],["T_VARIABLE","$this",1079],["T_OBJECT_OPERATOR","->",1079],["T_STRING","getEntity",1079],"(",")",";",["T_WHITESPACE","\n\n        ",1079],["T_VARIABLE","$tableAttributes",1081],["T_WHITESPACE"," ",1081],"=",["T_WHITESPACE"," ",1081],["T_ARRAY","array",1081],"(",")",";",["T_WHITESPACE","\n        ",1081],["T_VARIABLE","$attributeTypes",1082],["T_WHITESPACE","  ",1082],"=",["T_WHITESPACE"," ",1082],["T_ARRAY","array",1082],"(",")",";",["T_WHITESPACE","\n        ",1082],["T_FOREACH","foreach",1083],["T_WHITESPACE"," ",1083],"(",["T_VARIABLE","$this",1083],["T_OBJECT_OPERATOR","->",1083],["T_STRING","_selectAttributes",1083],["T_WHITESPACE"," ",1083],["T_AS","as",1083],["T_WHITESPACE"," ",1083],["T_VARIABLE","$attributeCode",1083],["T_WHITESPACE"," ",1083],["T_DOUBLE_ARROW","=>",1083],["T_WHITESPACE"," ",1083],["T_VARIABLE","$attributeId",1083],")",["T_WHITESPACE"," ",1083],"{",["T_WHITESPACE","\n            ",1083],["T_IF","if",1084],["T_WHITESPACE"," ",1084],"(","!",["T_VARIABLE","$attributeId",1084],")",["T_WHITESPACE"," ",1084],"{",["T_WHITESPACE","\n                ",1084],["T_CONTINUE","continue",1085],";",["T_WHITESPACE","\n            ",1085],"}",["T_WHITESPACE","\n            ",1086],["T_VARIABLE","$attribute",1087],["T_WHITESPACE"," ",1087],"=",["T_WHITESPACE"," ",1087],["T_STRING","Mage",1087],["T_DOUBLE_COLON","::",1087],["T_STRING","getSingleton",1087],"(",["T_CONSTANT_ENCAPSED_STRING","'eav\/config'",1087],")",["T_OBJECT_OPERATOR","->",1087],["T_STRING","getCollectionAttribute",1087],"(",["T_VARIABLE","$entity",1087],["T_OBJECT_OPERATOR","->",1087],["T_STRING","getType",1087],"(",")",",",["T_WHITESPACE"," ",1087],["T_VARIABLE","$attributeCode",1087],")",";",["T_WHITESPACE","\n            ",1087],["T_IF","if",1088],["T_WHITESPACE"," ",1088],"(",["T_VARIABLE","$attribute",1088],["T_WHITESPACE"," ",1088],["T_BOOLEAN_AND","&&",1088],["T_WHITESPACE"," ",1088],"!",["T_VARIABLE","$attribute",1088],["T_OBJECT_OPERATOR","->",1088],["T_STRING","isStatic",1088],"(",")",")",["T_WHITESPACE"," ",1088],"{",["T_WHITESPACE","\n                ",1088],["T_VARIABLE","$tableAttributes",1089],"[",["T_VARIABLE","$attribute",1089],["T_OBJECT_OPERATOR","->",1089],["T_STRING","getBackendTable",1089],"(",")","]","[","]",["T_WHITESPACE"," ",1089],"=",["T_WHITESPACE"," ",1089],["T_VARIABLE","$attributeId",1089],";",["T_WHITESPACE","\n                ",1089],["T_IF","if",1090],["T_WHITESPACE"," ",1090],"(","!",["T_ISSET","isset",1090],"(",["T_VARIABLE","$attributeTypes",1090],"[",["T_VARIABLE","$attribute",1090],["T_OBJECT_OPERATOR","->",1090],["T_STRING","getBackendTable",1090],"(",")","]",")",")",["T_WHITESPACE"," ",1090],"{",["T_WHITESPACE","\n                    ",1090],["T_VARIABLE","$attributeTypes",1091],"[",["T_VARIABLE","$attribute",1091],["T_OBJECT_OPERATOR","->",1091],["T_STRING","getBackendTable",1091],"(",")","]",["T_WHITESPACE"," ",1091],"=",["T_WHITESPACE"," ",1091],["T_VARIABLE","$attribute",1091],["T_OBJECT_OPERATOR","->",1091],["T_STRING","getBackendType",1091],"(",")",";",["T_WHITESPACE","\n                ",1091],"}",["T_WHITESPACE","\n            ",1092],"}",["T_WHITESPACE","\n        ",1093],"}",["T_WHITESPACE","\n\n        ",1094],["T_VARIABLE","$selects",1096],["T_WHITESPACE"," ",1096],"=",["T_WHITESPACE"," ",1096],["T_ARRAY","array",1096],"(",")",";",["T_WHITESPACE","\n        ",1096],["T_FOREACH","foreach",1097],["T_WHITESPACE"," ",1097],"(",["T_VARIABLE","$tableAttributes",1097],["T_WHITESPACE"," ",1097],["T_AS","as",1097],["T_WHITESPACE"," ",1097],["T_VARIABLE","$table",1097],["T_DOUBLE_ARROW","=>",1097],["T_VARIABLE","$attributes",1097],")",["T_WHITESPACE"," ",1097],"{",["T_WHITESPACE","\n            ",1097],["T_VARIABLE","$select",1098],["T_WHITESPACE"," ",1098],"=",["T_WHITESPACE"," ",1098],["T_VARIABLE","$this",1098],["T_OBJECT_OPERATOR","->",1098],["T_STRING","_getLoadAttributesSelect",1098],"(",["T_VARIABLE","$table",1098],",",["T_WHITESPACE"," ",1098],["T_VARIABLE","$attributes",1098],")",";",["T_WHITESPACE","\n            ",1098],["T_VARIABLE","$selects",1099],"[",["T_VARIABLE","$attributeTypes",1099],"[",["T_VARIABLE","$table",1099],"]","]","[","]",["T_WHITESPACE"," ",1099],"=",["T_WHITESPACE"," ",1099],["T_VARIABLE","$this",1099],["T_OBJECT_OPERATOR","->",1099],["T_STRING","_addLoadAttributesSelectValues",1099],"(",["T_WHITESPACE","\n                ",1099],["T_VARIABLE","$select",1100],",",["T_WHITESPACE","\n                ",1100],["T_VARIABLE","$table",1101],",",["T_WHITESPACE","\n                ",1101],["T_VARIABLE","$attributeTypes",1102],"[",["T_VARIABLE","$table",1102],"]",["T_WHITESPACE","\n            ",1102],")",";",["T_WHITESPACE","\n        ",1103],"}",["T_WHITESPACE","\n        ",1104],["T_VARIABLE","$selectGroups",1105],["T_WHITESPACE"," ",1105],"=",["T_WHITESPACE"," ",1105],["T_STRING","Mage",1105],["T_DOUBLE_COLON","::",1105],["T_STRING","getResourceHelper",1105],"(",["T_CONSTANT_ENCAPSED_STRING","'eav'",1105],")",["T_OBJECT_OPERATOR","->",1105],["T_STRING","getLoadAttributesSelectGroups",1105],"(",["T_VARIABLE","$selects",1105],")",";",["T_WHITESPACE","\n        ",1105],["T_FOREACH","foreach",1106],["T_WHITESPACE"," ",1106],"(",["T_VARIABLE","$selectGroups",1106],["T_WHITESPACE"," ",1106],["T_AS","as",1106],["T_WHITESPACE"," ",1106],["T_VARIABLE","$selects",1106],")",["T_WHITESPACE"," ",1106],"{",["T_WHITESPACE","\n            ",1106],["T_IF","if",1107],["T_WHITESPACE"," ",1107],"(","!",["T_EMPTY","empty",1107],"(",["T_VARIABLE","$selects",1107],")",")",["T_WHITESPACE"," ",1107],"{",["T_WHITESPACE","\n                ",1107],["T_TRY","try",1108],["T_WHITESPACE"," ",1108],"{",["T_WHITESPACE","\n                    ",1108],["T_VARIABLE","$select",1109],["T_WHITESPACE"," ",1109],"=",["T_WHITESPACE"," ",1109],["T_STRING","implode",1109],"(",["T_CONSTANT_ENCAPSED_STRING","' UNION ALL '",1109],",",["T_WHITESPACE"," ",1109],["T_VARIABLE","$selects",1109],")",";",["T_WHITESPACE","\n                    ",1109],["T_VARIABLE","$values",1110],["T_WHITESPACE"," ",1110],"=",["T_WHITESPACE"," ",1110],["T_VARIABLE","$this",1110],["T_OBJECT_OPERATOR","->",1110],["T_STRING","getConnection",1110],"(",")",["T_OBJECT_OPERATOR","->",1110],["T_STRING","fetchAll",1110],"(",["T_VARIABLE","$select",1110],")",";",["T_WHITESPACE","\n                ",1110],"}",["T_WHITESPACE"," ",1111],["T_CATCH","catch",1111],["T_WHITESPACE"," ",1111],"(",["T_STRING","Exception",1111],["T_WHITESPACE"," ",1111],["T_VARIABLE","$e",1111],")",["T_WHITESPACE"," ",1111],"{",["T_WHITESPACE","\n                    ",1111],["T_STRING","Mage",1112],["T_DOUBLE_COLON","::",1112],["T_STRING","printException",1112],"(",["T_VARIABLE","$e",1112],",",["T_WHITESPACE"," ",1112],["T_VARIABLE","$select",1112],")",";",["T_WHITESPACE","\n                    ",1112],["T_VARIABLE","$this",1113],["T_OBJECT_OPERATOR","->",1113],["T_STRING","printLogQuery",1113],"(",["T_STRING","true",1113],",",["T_WHITESPACE"," ",1113],["T_STRING","true",1113],",",["T_WHITESPACE"," ",1113],["T_VARIABLE","$select",1113],")",";",["T_WHITESPACE","\n                    ",1113],["T_THROW","throw",1114],["T_WHITESPACE"," ",1114],["T_VARIABLE","$e",1114],";",["T_WHITESPACE","\n                ",1114],"}",["T_WHITESPACE","\n\n                ",1115],["T_FOREACH","foreach",1117],["T_WHITESPACE"," ",1117],"(",["T_VARIABLE","$values",1117],["T_WHITESPACE"," ",1117],["T_AS","as",1117],["T_WHITESPACE"," ",1117],["T_VARIABLE","$value",1117],")",["T_WHITESPACE"," ",1117],"{",["T_WHITESPACE","\n                    ",1117],["T_VARIABLE","$this",1118],["T_OBJECT_OPERATOR","->",1118],["T_STRING","_setItemAttributeValue",1118],"(",["T_VARIABLE","$value",1118],")",";",["T_WHITESPACE","\n                ",1118],"}",["T_WHITESPACE","\n            ",1119],"}",["T_WHITESPACE","\n        ",1120],"}",["T_WHITESPACE","\n\n        ",1121],["T_RETURN","return",1123],["T_WHITESPACE"," ",1123],["T_VARIABLE","$this",1123],";",["T_WHITESPACE","\n    ",1123],"}",["T_WHITESPACE","\n\n    ",1124],["T_DOC_COMMENT","\/**\n     * Retrieve attributes load select\n     *\n     * @param   string $table\n     * @return  Mage_Eav_Model_Entity_Collection_Abstract\n     *\/",1126],["T_WHITESPACE","\n    ",1131],["T_PROTECTED","protected",1132],["T_WHITESPACE"," ",1132],["T_FUNCTION","function",1132],["T_WHITESPACE"," ",1132],["T_STRING","_getLoadAttributesSelect",1132],"(",["T_VARIABLE","$table",1132],",",["T_WHITESPACE"," ",1132],["T_VARIABLE","$attributeIds",1132],["T_WHITESPACE"," ",1132],"=",["T_WHITESPACE"," ",1132],["T_ARRAY","array",1132],"(",")",")",["T_WHITESPACE","\n    ",1132],"{",["T_WHITESPACE","\n        ",1133],["T_IF","if",1134],["T_WHITESPACE"," ",1134],"(",["T_EMPTY","empty",1134],"(",["T_VARIABLE","$attributeIds",1134],")",")",["T_WHITESPACE"," ",1134],"{",["T_WHITESPACE","\n            ",1134],["T_VARIABLE","$attributeIds",1135],["T_WHITESPACE"," ",1135],"=",["T_WHITESPACE"," ",1135],["T_VARIABLE","$this",1135],["T_OBJECT_OPERATOR","->",1135],["T_STRING","_selectAttributes",1135],";",["T_WHITESPACE","\n        ",1135],"}",["T_WHITESPACE","\n        ",1136],["T_VARIABLE","$helper",1137],["T_WHITESPACE"," ",1137],"=",["T_WHITESPACE"," ",1137],["T_STRING","Mage",1137],["T_DOUBLE_COLON","::",1137],["T_STRING","getResourceHelper",1137],"(",["T_CONSTANT_ENCAPSED_STRING","'eav'",1137],")",";",["T_WHITESPACE","\n        ",1137],["T_VARIABLE","$entityIdField",1138],["T_WHITESPACE"," ",1138],"=",["T_WHITESPACE"," ",1138],["T_VARIABLE","$this",1138],["T_OBJECT_OPERATOR","->",1138],["T_STRING","getEntity",1138],"(",")",["T_OBJECT_OPERATOR","->",1138],["T_STRING","getEntityIdField",1138],"(",")",";",["T_WHITESPACE","\n        ",1138],["T_VARIABLE","$select",1139],["T_WHITESPACE"," ",1139],"=",["T_WHITESPACE"," ",1139],["T_VARIABLE","$this",1139],["T_OBJECT_OPERATOR","->",1139],["T_STRING","getConnection",1139],"(",")",["T_OBJECT_OPERATOR","->",1139],["T_STRING","select",1139],"(",")",["T_WHITESPACE","\n            ",1139],["T_OBJECT_OPERATOR","->",1140],["T_STRING","from",1140],"(",["T_VARIABLE","$table",1140],",",["T_WHITESPACE"," ",1140],["T_ARRAY","array",1140],"(",["T_VARIABLE","$entityIdField",1140],",",["T_WHITESPACE"," ",1140],["T_CONSTANT_ENCAPSED_STRING","'attribute_id'",1140],")",")",["T_WHITESPACE","\n            ",1140],["T_OBJECT_OPERATOR","->",1141],["T_STRING","where",1141],"(",["T_CONSTANT_ENCAPSED_STRING","'entity_type_id =?'",1141],",",["T_WHITESPACE"," ",1141],["T_VARIABLE","$this",1141],["T_OBJECT_OPERATOR","->",1141],["T_STRING","getEntity",1141],"(",")",["T_OBJECT_OPERATOR","->",1141],["T_STRING","getTypeId",1141],"(",")",")",["T_WHITESPACE","\n            ",1141],["T_OBJECT_OPERATOR","->",1142],["T_STRING","where",1142],"(","\"",["T_VARIABLE","$entityIdField",1142],["T_ENCAPSED_AND_WHITESPACE"," IN (?)",1142],"\"",",",["T_WHITESPACE"," ",1142],["T_STRING","array_keys",1142],"(",["T_VARIABLE","$this",1142],["T_OBJECT_OPERATOR","->",1142],["T_STRING","_itemsById",1142],")",")",["T_WHITESPACE","\n            ",1142],["T_OBJECT_OPERATOR","->",1143],["T_STRING","where",1143],"(",["T_CONSTANT_ENCAPSED_STRING","'attribute_id IN (?)'",1143],",",["T_WHITESPACE"," ",1143],["T_VARIABLE","$attributeIds",1143],")",";",["T_WHITESPACE","\n        ",1143],["T_RETURN","return",1144],["T_WHITESPACE"," ",1144],["T_VARIABLE","$select",1144],";",["T_WHITESPACE","\n    ",1144],"}",["T_WHITESPACE","\n\n    ",1145],["T_DOC_COMMENT","\/**\n     * @param Varien_Db_Select $select\n     * @param string $table\n     * @param string $type\n     * @return Varien_Db_Select\n     *\/",1147],["T_WHITESPACE","\n    ",1152],["T_PROTECTED","protected",1153],["T_WHITESPACE"," ",1153],["T_FUNCTION","function",1153],["T_WHITESPACE"," ",1153],["T_STRING","_addLoadAttributesSelectValues",1153],"(",["T_VARIABLE","$select",1153],",",["T_WHITESPACE"," ",1153],["T_VARIABLE","$table",1153],",",["T_WHITESPACE"," ",1153],["T_VARIABLE","$type",1153],")",["T_WHITESPACE","\n    ",1153],"{",["T_WHITESPACE","\n        ",1154],["T_VARIABLE","$helper",1155],["T_WHITESPACE"," ",1155],"=",["T_WHITESPACE"," ",1155],["T_STRING","Mage",1155],["T_DOUBLE_COLON","::",1155],["T_STRING","getResourceHelper",1155],"(",["T_CONSTANT_ENCAPSED_STRING","'eav'",1155],")",";",["T_WHITESPACE","\n        ",1155],["T_VARIABLE","$select",1156],["T_OBJECT_OPERATOR","->",1156],["T_STRING","columns",1156],"(",["T_ARRAY","array",1156],"(",["T_WHITESPACE","\n            ",1156],["T_CONSTANT_ENCAPSED_STRING","'value'",1157],["T_WHITESPACE"," ",1157],["T_DOUBLE_ARROW","=>",1157],["T_WHITESPACE"," ",1157],["T_VARIABLE","$helper",1157],["T_OBJECT_OPERATOR","->",1157],["T_STRING","prepareEavAttributeValue",1157],"(",["T_VARIABLE","$table",1157],".",["T_WHITESPACE"," ",1157],["T_CONSTANT_ENCAPSED_STRING","'.value'",1157],",",["T_WHITESPACE"," ",1157],["T_VARIABLE","$type",1157],")",",",["T_WHITESPACE","\n        ",1157],")",")",";",["T_WHITESPACE","\n\n        ",1158],["T_RETURN","return",1160],["T_WHITESPACE"," ",1160],["T_VARIABLE","$select",1160],";",["T_WHITESPACE","\n    ",1160],"}",["T_WHITESPACE","\n\n    ",1161],["T_DOC_COMMENT","\/**\n     * Initialize entity ubject property value\n     *\n     * $valueInfo is _getLoadAttributesSelect fetch result row\n     *\n     * @param   array $valueInfo\n     * @throws Mage_Eav_Exception\n     * @return  Mage_Eav_Model_Entity_Collection_Abstract\n     *\/",1163],["T_WHITESPACE","\n    ",1171],["T_PROTECTED","protected",1172],["T_WHITESPACE"," ",1172],["T_FUNCTION","function",1172],["T_WHITESPACE"," ",1172],["T_STRING","_setItemAttributeValue",1172],"(",["T_VARIABLE","$valueInfo",1172],")",["T_WHITESPACE","\n    ",1172],"{",["T_WHITESPACE","\n        ",1173],["T_VARIABLE","$entityIdField",1174],["T_WHITESPACE","  ",1174],"=",["T_WHITESPACE"," ",1174],["T_VARIABLE","$this",1174],["T_OBJECT_OPERATOR","->",1174],["T_STRING","getEntity",1174],"(",")",["T_OBJECT_OPERATOR","->",1174],["T_STRING","getEntityIdField",1174],"(",")",";",["T_WHITESPACE","\n        ",1174],["T_VARIABLE","$entityId",1175],["T_WHITESPACE","       ",1175],"=",["T_WHITESPACE"," ",1175],["T_VARIABLE","$valueInfo",1175],"[",["T_VARIABLE","$entityIdField",1175],"]",";",["T_WHITESPACE","\n        ",1175],["T_IF","if",1176],["T_WHITESPACE"," ",1176],"(","!",["T_ISSET","isset",1176],"(",["T_VARIABLE","$this",1176],["T_OBJECT_OPERATOR","->",1176],["T_STRING","_itemsById",1176],"[",["T_VARIABLE","$entityId",1176],"]",")",")",["T_WHITESPACE"," ",1176],"{",["T_WHITESPACE","\n            ",1176],["T_THROW","throw",1177],["T_WHITESPACE"," ",1177],["T_STRING","Mage",1177],["T_DOUBLE_COLON","::",1177],["T_STRING","exception",1177],"(",["T_CONSTANT_ENCAPSED_STRING","'Mage_Eav'",1177],",",["T_WHITESPACE","\n                ",1177],["T_STRING","Mage",1178],["T_DOUBLE_COLON","::",1178],["T_STRING","helper",1178],"(",["T_CONSTANT_ENCAPSED_STRING","'eav'",1178],")",["T_OBJECT_OPERATOR","->",1178],["T_STRING","__",1178],"(",["T_CONSTANT_ENCAPSED_STRING","'Data integrity: No header row found for attribute'",1178],")",["T_WHITESPACE","\n            ",1178],")",";",["T_WHITESPACE","\n        ",1179],"}",["T_WHITESPACE","\n        ",1180],["T_VARIABLE","$attributeCode",1181],["T_WHITESPACE"," ",1181],"=",["T_WHITESPACE"," ",1181],["T_STRING","array_search",1181],"(",["T_VARIABLE","$valueInfo",1181],"[",["T_CONSTANT_ENCAPSED_STRING","'attribute_id'",1181],"]",",",["T_WHITESPACE"," ",1181],["T_VARIABLE","$this",1181],["T_OBJECT_OPERATOR","->",1181],["T_STRING","_selectAttributes",1181],")",";",["T_WHITESPACE","\n        ",1181],["T_IF","if",1182],["T_WHITESPACE"," ",1182],"(","!",["T_VARIABLE","$attributeCode",1182],")",["T_WHITESPACE"," ",1182],"{",["T_WHITESPACE","\n            ",1182],["T_VARIABLE","$attribute",1183],["T_WHITESPACE"," ",1183],"=",["T_WHITESPACE"," ",1183],["T_STRING","Mage",1183],["T_DOUBLE_COLON","::",1183],["T_STRING","getSingleton",1183],"(",["T_CONSTANT_ENCAPSED_STRING","'eav\/config'",1183],")",["T_OBJECT_OPERATOR","->",1183],["T_STRING","getCollectionAttribute",1183],"(",["T_WHITESPACE","\n                ",1183],["T_VARIABLE","$this",1184],["T_OBJECT_OPERATOR","->",1184],["T_STRING","getEntity",1184],"(",")",["T_OBJECT_OPERATOR","->",1184],["T_STRING","getType",1184],"(",")",",",["T_WHITESPACE","\n                ",1184],["T_VARIABLE","$valueInfo",1185],"[",["T_CONSTANT_ENCAPSED_STRING","'attribute_id'",1185],"]",["T_WHITESPACE","\n            ",1185],")",";",["T_WHITESPACE","\n            ",1186],["T_VARIABLE","$attributeCode",1187],["T_WHITESPACE"," ",1187],"=",["T_WHITESPACE"," ",1187],["T_VARIABLE","$attribute",1187],["T_OBJECT_OPERATOR","->",1187],["T_STRING","getAttributeCode",1187],"(",")",";",["T_WHITESPACE","\n        ",1187],"}",["T_WHITESPACE","\n\n        ",1188],["T_FOREACH","foreach",1190],["T_WHITESPACE"," ",1190],"(",["T_VARIABLE","$this",1190],["T_OBJECT_OPERATOR","->",1190],["T_STRING","_itemsById",1190],"[",["T_VARIABLE","$entityId",1190],"]",["T_WHITESPACE"," ",1190],["T_AS","as",1190],["T_WHITESPACE"," ",1190],["T_VARIABLE","$object",1190],")",["T_WHITESPACE"," ",1190],"{",["T_WHITESPACE","\n            ",1190],["T_VARIABLE","$object",1191],["T_OBJECT_OPERATOR","->",1191],["T_STRING","setData",1191],"(",["T_VARIABLE","$attributeCode",1191],",",["T_WHITESPACE"," ",1191],["T_VARIABLE","$valueInfo",1191],"[",["T_CONSTANT_ENCAPSED_STRING","'value'",1191],"]",")",";",["T_WHITESPACE","\n        ",1191],"}",["T_WHITESPACE","\n\n        ",1192],["T_RETURN","return",1194],["T_WHITESPACE"," ",1194],["T_VARIABLE","$this",1194],";",["T_WHITESPACE","\n    ",1194],"}",["T_WHITESPACE","\n\n    ",1195],["T_DOC_COMMENT","\/**\n     * Get alias for attribute value table\n     *\n     * @param string $attributeCode\n     * @return string\n     *\/",1197],["T_WHITESPACE","\n    ",1202],["T_PROTECTED","protected",1203],["T_WHITESPACE"," ",1203],["T_FUNCTION","function",1203],["T_WHITESPACE"," ",1203],["T_STRING","_getAttributeTableAlias",1203],"(",["T_VARIABLE","$attributeCode",1203],")",["T_WHITESPACE","\n    ",1203],"{",["T_WHITESPACE","\n        ",1204],["T_RETURN","return",1205],["T_WHITESPACE"," ",1205],["T_CONSTANT_ENCAPSED_STRING","'at_'",1205],["T_WHITESPACE"," ",1205],".",["T_WHITESPACE"," ",1205],["T_VARIABLE","$attributeCode",1205],";",["T_WHITESPACE","\n    ",1205],"}",["T_WHITESPACE","\n\n    ",1206],["T_DOC_COMMENT","\/**\n     * Retreive attribute field name by attribute code\n     *\n     * @param string $attributeCode\n     * @return string\n     *\/",1208],["T_WHITESPACE","\n    ",1213],["T_PROTECTED","protected",1214],["T_WHITESPACE"," ",1214],["T_FUNCTION","function",1214],["T_WHITESPACE"," ",1214],["T_STRING","_getAttributeFieldName",1214],"(",["T_VARIABLE","$attributeCode",1214],")",["T_WHITESPACE","\n    ",1214],"{",["T_WHITESPACE","\n        ",1215],["T_VARIABLE","$attributeCode",1216],["T_WHITESPACE"," ",1216],"=",["T_WHITESPACE"," ",1216],["T_STRING","trim",1216],"(",["T_VARIABLE","$attributeCode",1216],")",";",["T_WHITESPACE","\n        ",1216],["T_IF","if",1217],["T_WHITESPACE"," ",1217],"(",["T_ISSET","isset",1217],"(",["T_VARIABLE","$this",1217],["T_OBJECT_OPERATOR","->",1217],["T_STRING","_joinAttributes",1217],"[",["T_VARIABLE","$attributeCode",1217],"]","[",["T_CONSTANT_ENCAPSED_STRING","'condition_alias'",1217],"]",")",")",["T_WHITESPACE"," ",1217],"{",["T_WHITESPACE","\n            ",1217],["T_RETURN","return",1218],["T_WHITESPACE"," ",1218],["T_VARIABLE","$this",1218],["T_OBJECT_OPERATOR","->",1218],["T_STRING","_joinAttributes",1218],"[",["T_VARIABLE","$attributeCode",1218],"]","[",["T_CONSTANT_ENCAPSED_STRING","'condition_alias'",1218],"]",";",["T_WHITESPACE","\n        ",1218],"}",["T_WHITESPACE","\n        ",1219],["T_IF","if",1220],["T_WHITESPACE"," ",1220],"(",["T_ISSET","isset",1220],"(",["T_VARIABLE","$this",1220],["T_OBJECT_OPERATOR","->",1220],["T_STRING","_staticFields",1220],"[",["T_VARIABLE","$attributeCode",1220],"]",")",")",["T_WHITESPACE"," ",1220],"{",["T_WHITESPACE","\n            ",1220],["T_RETURN","return",1221],["T_WHITESPACE"," ",1221],["T_STRING","sprintf",1221],"(",["T_CONSTANT_ENCAPSED_STRING","'e.%s'",1221],",",["T_WHITESPACE"," ",1221],["T_VARIABLE","$attributeCode",1221],")",";",["T_WHITESPACE","\n        ",1221],"}",["T_WHITESPACE","\n        ",1222],["T_IF","if",1223],["T_WHITESPACE"," ",1223],"(",["T_ISSET","isset",1223],"(",["T_VARIABLE","$this",1223],["T_OBJECT_OPERATOR","->",1223],["T_STRING","_joinFields",1223],"[",["T_VARIABLE","$attributeCode",1223],"]",")",")",["T_WHITESPACE"," ",1223],"{",["T_WHITESPACE","\n            ",1223],["T_VARIABLE","$attr",1224],["T_WHITESPACE"," ",1224],"=",["T_WHITESPACE"," ",1224],["T_VARIABLE","$this",1224],["T_OBJECT_OPERATOR","->",1224],["T_STRING","_joinFields",1224],"[",["T_VARIABLE","$attributeCode",1224],"]",";",["T_WHITESPACE","\n            ",1224],["T_RETURN","return",1225],["T_WHITESPACE"," ",1225],["T_VARIABLE","$attr",1225],"[",["T_CONSTANT_ENCAPSED_STRING","'table'",1225],"]",["T_WHITESPACE"," ",1225],"?",["T_WHITESPACE"," ",1225],["T_VARIABLE","$attr",1225],"[",["T_CONSTANT_ENCAPSED_STRING","'table'",1225],"]",["T_WHITESPACE"," ",1225],".",["T_WHITESPACE"," ",1225],["T_CONSTANT_ENCAPSED_STRING","'.'",1225],["T_WHITESPACE"," ",1225],".",["T_WHITESPACE"," ",1225],["T_VARIABLE","$attr",1225],"[",["T_CONSTANT_ENCAPSED_STRING","'field'",1225],"]",["T_WHITESPACE"," ",1225],":",["T_WHITESPACE"," ",1225],["T_VARIABLE","$attr",1225],"[",["T_CONSTANT_ENCAPSED_STRING","'field'",1225],"]",";",["T_WHITESPACE","\n        ",1225],"}",["T_WHITESPACE","\n\n        ",1226],["T_VARIABLE","$attribute",1228],["T_WHITESPACE"," ",1228],"=",["T_WHITESPACE"," ",1228],["T_VARIABLE","$this",1228],["T_OBJECT_OPERATOR","->",1228],["T_STRING","getAttribute",1228],"(",["T_VARIABLE","$attributeCode",1228],")",";",["T_WHITESPACE","\n        ",1228],["T_IF","if",1229],["T_WHITESPACE"," ",1229],"(","!",["T_VARIABLE","$attribute",1229],")",["T_WHITESPACE"," ",1229],"{",["T_WHITESPACE","\n            ",1229],["T_THROW","throw",1230],["T_WHITESPACE"," ",1230],["T_STRING","Mage",1230],["T_DOUBLE_COLON","::",1230],["T_STRING","exception",1230],"(",["T_CONSTANT_ENCAPSED_STRING","'Mage_Eav'",1230],",",["T_WHITESPACE"," ",1230],["T_STRING","Mage",1230],["T_DOUBLE_COLON","::",1230],["T_STRING","helper",1230],"(",["T_CONSTANT_ENCAPSED_STRING","'eav'",1230],")",["T_OBJECT_OPERATOR","->",1230],["T_STRING","__",1230],"(",["T_CONSTANT_ENCAPSED_STRING","'Invalid attribute name: %s'",1230],",",["T_WHITESPACE"," ",1230],["T_VARIABLE","$attributeCode",1230],")",")",";",["T_WHITESPACE","\n        ",1230],"}",["T_WHITESPACE","\n\n        ",1231],["T_IF","if",1233],["T_WHITESPACE"," ",1233],"(",["T_VARIABLE","$attribute",1233],["T_OBJECT_OPERATOR","->",1233],["T_STRING","isStatic",1233],"(",")",")",["T_WHITESPACE"," ",1233],"{",["T_WHITESPACE","\n            ",1233],["T_IF","if",1234],["T_WHITESPACE"," ",1234],"(",["T_ISSET","isset",1234],"(",["T_VARIABLE","$this",1234],["T_OBJECT_OPERATOR","->",1234],["T_STRING","_joinAttributes",1234],"[",["T_VARIABLE","$attributeCode",1234],"]",")",")",["T_WHITESPACE"," ",1234],"{",["T_WHITESPACE","\n                ",1234],["T_VARIABLE","$fieldName",1235],["T_WHITESPACE"," ",1235],"=",["T_WHITESPACE"," ",1235],["T_VARIABLE","$this",1235],["T_OBJECT_OPERATOR","->",1235],["T_STRING","_getAttributeTableAlias",1235],"(",["T_VARIABLE","$attributeCode",1235],")",["T_WHITESPACE"," ",1235],".",["T_WHITESPACE"," ",1235],["T_CONSTANT_ENCAPSED_STRING","'.'",1235],["T_WHITESPACE"," ",1235],".",["T_WHITESPACE"," ",1235],["T_VARIABLE","$attributeCode",1235],";",["T_WHITESPACE","\n            ",1235],"}",["T_WHITESPACE"," ",1236],["T_ELSE","else",1236],["T_WHITESPACE"," ",1236],"{",["T_WHITESPACE","\n                ",1236],["T_VARIABLE","$fieldName",1237],["T_WHITESPACE"," ",1237],"=",["T_WHITESPACE"," ",1237],["T_CONSTANT_ENCAPSED_STRING","'e.'",1237],["T_WHITESPACE"," ",1237],".",["T_WHITESPACE"," ",1237],["T_VARIABLE","$attributeCode",1237],";",["T_WHITESPACE","\n            ",1237],"}",["T_WHITESPACE","\n        ",1238],"}",["T_WHITESPACE"," ",1239],["T_ELSE","else",1239],["T_WHITESPACE"," ",1239],"{",["T_WHITESPACE","\n            ",1239],["T_VARIABLE","$fieldName",1240],["T_WHITESPACE"," ",1240],"=",["T_WHITESPACE"," ",1240],["T_VARIABLE","$this",1240],["T_OBJECT_OPERATOR","->",1240],["T_STRING","_getAttributeTableAlias",1240],"(",["T_VARIABLE","$attributeCode",1240],")",["T_WHITESPACE"," ",1240],".",["T_WHITESPACE"," ",1240],["T_CONSTANT_ENCAPSED_STRING","'.value'",1240],";",["T_WHITESPACE","\n        ",1240],"}",["T_WHITESPACE","\n\n        ",1241],["T_RETURN","return",1243],["T_WHITESPACE"," ",1243],["T_VARIABLE","$fieldName",1243],";",["T_WHITESPACE","\n    ",1243],"}",["T_WHITESPACE","\n\n    ",1244],["T_DOC_COMMENT","\/**\n     * Add attribute value table to the join if it wasn't added previously\n     *\n     * @param   string $attributeCode\n     * @param   string $joinType inner|left\n     * @throws  Mage_Eav_Exception\n     * @return  Mage_Eav_Model_Entity_Collection_Abstract\n     *\/",1246],["T_WHITESPACE","\n    ",1253],["T_PROTECTED","protected",1254],["T_WHITESPACE"," ",1254],["T_FUNCTION","function",1254],["T_WHITESPACE"," ",1254],["T_STRING","_addAttributeJoin",1254],"(",["T_VARIABLE","$attributeCode",1254],",",["T_WHITESPACE"," ",1254],["T_VARIABLE","$joinType",1254],["T_WHITESPACE"," ",1254],"=",["T_WHITESPACE"," ",1254],["T_CONSTANT_ENCAPSED_STRING","'inner'",1254],")",["T_WHITESPACE","\n    ",1254],"{",["T_WHITESPACE","\n        ",1255],["T_IF","if",1256],["T_WHITESPACE"," ",1256],"(","!",["T_EMPTY","empty",1256],"(",["T_VARIABLE","$this",1256],["T_OBJECT_OPERATOR","->",1256],["T_STRING","_filterAttributes",1256],"[",["T_VARIABLE","$attributeCode",1256],"]",")",")",["T_WHITESPACE"," ",1256],"{",["T_WHITESPACE","\n            ",1256],["T_RETURN","return",1257],["T_WHITESPACE"," ",1257],["T_VARIABLE","$this",1257],";",["T_WHITESPACE","\n        ",1257],"}",["T_WHITESPACE","\n\n        ",1258],["T_VARIABLE","$adapter",1260],["T_WHITESPACE"," ",1260],"=",["T_WHITESPACE"," ",1260],["T_VARIABLE","$this",1260],["T_OBJECT_OPERATOR","->",1260],["T_STRING","getConnection",1260],"(",")",";",["T_WHITESPACE","\n\n        ",1260],["T_VARIABLE","$attrTable",1262],["T_WHITESPACE"," ",1262],"=",["T_WHITESPACE"," ",1262],["T_VARIABLE","$this",1262],["T_OBJECT_OPERATOR","->",1262],["T_STRING","_getAttributeTableAlias",1262],"(",["T_VARIABLE","$attributeCode",1262],")",";",["T_WHITESPACE","\n        ",1262],["T_IF","if",1263],["T_WHITESPACE"," ",1263],"(",["T_ISSET","isset",1263],"(",["T_VARIABLE","$this",1263],["T_OBJECT_OPERATOR","->",1263],["T_STRING","_joinAttributes",1263],"[",["T_VARIABLE","$attributeCode",1263],"]",")",")",["T_WHITESPACE"," ",1263],"{",["T_WHITESPACE","\n            ",1263],["T_VARIABLE","$attribute",1264],["T_WHITESPACE","      ",1264],"=",["T_WHITESPACE"," ",1264],["T_VARIABLE","$this",1264],["T_OBJECT_OPERATOR","->",1264],["T_STRING","_joinAttributes",1264],"[",["T_VARIABLE","$attributeCode",1264],"]","[",["T_CONSTANT_ENCAPSED_STRING","'attribute'",1264],"]",";",["T_WHITESPACE","\n            ",1264],["T_VARIABLE","$entity",1265],["T_WHITESPACE","         ",1265],"=",["T_WHITESPACE"," ",1265],["T_VARIABLE","$attribute",1265],["T_OBJECT_OPERATOR","->",1265],["T_STRING","getEntity",1265],"(",")",";",["T_WHITESPACE","\n            ",1265],["T_VARIABLE","$entityIdField",1266],["T_WHITESPACE","  ",1266],"=",["T_WHITESPACE"," ",1266],["T_VARIABLE","$entity",1266],["T_OBJECT_OPERATOR","->",1266],["T_STRING","getEntityIdField",1266],"(",")",";",["T_WHITESPACE","\n            ",1266],["T_VARIABLE","$fkName",1267],["T_WHITESPACE","         ",1267],"=",["T_WHITESPACE"," ",1267],["T_VARIABLE","$this",1267],["T_OBJECT_OPERATOR","->",1267],["T_STRING","_joinAttributes",1267],"[",["T_VARIABLE","$attributeCode",1267],"]","[",["T_CONSTANT_ENCAPSED_STRING","'bind'",1267],"]",";",["T_WHITESPACE","\n            ",1267],["T_VARIABLE","$fkAttribute",1268],["T_WHITESPACE","    ",1268],"=",["T_WHITESPACE"," ",1268],["T_VARIABLE","$this",1268],["T_OBJECT_OPERATOR","->",1268],["T_STRING","_joinAttributes",1268],"[",["T_VARIABLE","$attributeCode",1268],"]","[",["T_CONSTANT_ENCAPSED_STRING","'bindAttribute'",1268],"]",";",["T_WHITESPACE","\n            ",1268],["T_VARIABLE","$fkTable",1269],["T_WHITESPACE","        ",1269],"=",["T_WHITESPACE"," ",1269],["T_VARIABLE","$this",1269],["T_OBJECT_OPERATOR","->",1269],["T_STRING","_getAttributeTableAlias",1269],"(",["T_VARIABLE","$fkName",1269],")",";",["T_WHITESPACE","\n\n            ",1269],["T_IF","if",1271],["T_WHITESPACE"," ",1271],"(",["T_VARIABLE","$fkAttribute",1271],["T_OBJECT_OPERATOR","->",1271],["T_STRING","getBackend",1271],"(",")",["T_OBJECT_OPERATOR","->",1271],["T_STRING","isStatic",1271],"(",")",")",["T_WHITESPACE"," ",1271],"{",["T_WHITESPACE","\n                ",1271],["T_IF","if",1272],["T_WHITESPACE"," ",1272],"(",["T_ISSET","isset",1272],"(",["T_VARIABLE","$this",1272],["T_OBJECT_OPERATOR","->",1272],["T_STRING","_joinAttributes",1272],"[",["T_VARIABLE","$fkName",1272],"]",")",")",["T_WHITESPACE"," ",1272],"{",["T_WHITESPACE","\n                    ",1272],["T_VARIABLE","$fk",1273],["T_WHITESPACE"," ",1273],"=",["T_WHITESPACE"," ",1273],["T_VARIABLE","$fkTable",1273],["T_WHITESPACE"," ",1273],".",["T_WHITESPACE"," ",1273],["T_CONSTANT_ENCAPSED_STRING","'.'",1273],["T_WHITESPACE"," ",1273],".",["T_WHITESPACE"," ",1273],["T_VARIABLE","$fkAttribute",1273],["T_OBJECT_OPERATOR","->",1273],["T_STRING","getAttributeCode",1273],"(",")",";",["T_WHITESPACE","\n                ",1273],"}",["T_WHITESPACE"," ",1274],["T_ELSE","else",1274],["T_WHITESPACE"," ",1274],"{",["T_WHITESPACE","\n                    ",1274],["T_VARIABLE","$fk",1275],["T_WHITESPACE"," ",1275],"=",["T_WHITESPACE"," ",1275],["T_CONSTANT_ENCAPSED_STRING","'e.'",1275],["T_WHITESPACE"," ",1275],".",["T_WHITESPACE"," ",1275],["T_VARIABLE","$fkAttribute",1275],["T_OBJECT_OPERATOR","->",1275],["T_STRING","getAttributeCode",1275],"(",")",";",["T_WHITESPACE","\n                ",1275],"}",["T_WHITESPACE","\n            ",1276],"}",["T_WHITESPACE"," ",1277],["T_ELSE","else",1277],["T_WHITESPACE"," ",1277],"{",["T_WHITESPACE","\n                ",1277],["T_VARIABLE","$this",1278],["T_OBJECT_OPERATOR","->",1278],["T_STRING","_addAttributeJoin",1278],"(",["T_VARIABLE","$fkAttribute",1278],["T_OBJECT_OPERATOR","->",1278],["T_STRING","getAttributeCode",1278],"(",")",",",["T_WHITESPACE"," ",1278],["T_VARIABLE","$joinType",1278],")",";",["T_WHITESPACE","\n                ",1278],["T_VARIABLE","$fk",1279],["T_WHITESPACE"," ",1279],"=",["T_WHITESPACE"," ",1279],["T_VARIABLE","$fkTable",1279],["T_WHITESPACE"," ",1279],".",["T_WHITESPACE"," ",1279],["T_CONSTANT_ENCAPSED_STRING","'.value'",1279],";",["T_WHITESPACE","\n            ",1279],"}",["T_WHITESPACE","\n            ",1280],["T_VARIABLE","$pk",1281],["T_WHITESPACE"," ",1281],"=",["T_WHITESPACE"," ",1281],["T_VARIABLE","$attrTable",1281],["T_WHITESPACE"," ",1281],".",["T_WHITESPACE"," ",1281],["T_CONSTANT_ENCAPSED_STRING","'.'",1281],["T_WHITESPACE"," ",1281],".",["T_WHITESPACE"," ",1281],["T_VARIABLE","$this",1281],["T_OBJECT_OPERATOR","->",1281],["T_STRING","_joinAttributes",1281],"[",["T_VARIABLE","$attributeCode",1281],"]","[",["T_CONSTANT_ENCAPSED_STRING","'filter'",1281],"]",";",["T_WHITESPACE","\n        ",1281],"}",["T_WHITESPACE"," ",1282],["T_ELSE","else",1282],["T_WHITESPACE"," ",1282],"{",["T_WHITESPACE","\n            ",1282],["T_VARIABLE","$entity",1283],["T_WHITESPACE","         ",1283],"=",["T_WHITESPACE"," ",1283],["T_VARIABLE","$this",1283],["T_OBJECT_OPERATOR","->",1283],["T_STRING","getEntity",1283],"(",")",";",["T_WHITESPACE","\n            ",1283],["T_VARIABLE","$entityIdField",1284],["T_WHITESPACE","  ",1284],"=",["T_WHITESPACE"," ",1284],["T_VARIABLE","$entity",1284],["T_OBJECT_OPERATOR","->",1284],["T_STRING","getEntityIdField",1284],"(",")",";",["T_WHITESPACE","\n            ",1284],["T_VARIABLE","$attribute",1285],["T_WHITESPACE","      ",1285],"=",["T_WHITESPACE"," ",1285],["T_VARIABLE","$entity",1285],["T_OBJECT_OPERATOR","->",1285],["T_STRING","getAttribute",1285],"(",["T_VARIABLE","$attributeCode",1285],")",";",["T_WHITESPACE","\n            ",1285],["T_VARIABLE","$fk",1286],["T_WHITESPACE","             ",1286],"=",["T_WHITESPACE"," ",1286],["T_CONSTANT_ENCAPSED_STRING","'e.'",1286],["T_WHITESPACE"," ",1286],".",["T_WHITESPACE"," ",1286],["T_VARIABLE","$entityIdField",1286],";",["T_WHITESPACE","\n            ",1286],["T_VARIABLE","$pk",1287],["T_WHITESPACE","             ",1287],"=",["T_WHITESPACE"," ",1287],["T_VARIABLE","$attrTable",1287],["T_WHITESPACE"," ",1287],".",["T_WHITESPACE"," ",1287],["T_CONSTANT_ENCAPSED_STRING","'.'",1287],["T_WHITESPACE"," ",1287],".",["T_WHITESPACE"," ",1287],["T_VARIABLE","$entityIdField",1287],";",["T_WHITESPACE","\n        ",1287],"}",["T_WHITESPACE","\n\n        ",1288],["T_IF","if",1290],["T_WHITESPACE"," ",1290],"(","!",["T_VARIABLE","$attribute",1290],")",["T_WHITESPACE"," ",1290],"{",["T_WHITESPACE","\n            ",1290],["T_THROW","throw",1291],["T_WHITESPACE"," ",1291],["T_STRING","Mage",1291],["T_DOUBLE_COLON","::",1291],["T_STRING","exception",1291],"(",["T_CONSTANT_ENCAPSED_STRING","'Mage_Eav'",1291],",",["T_WHITESPACE"," ",1291],["T_STRING","Mage",1291],["T_DOUBLE_COLON","::",1291],["T_STRING","helper",1291],"(",["T_CONSTANT_ENCAPSED_STRING","'eav'",1291],")",["T_OBJECT_OPERATOR","->",1291],["T_STRING","__",1291],"(",["T_CONSTANT_ENCAPSED_STRING","'Invalid attribute name: %s'",1291],",",["T_WHITESPACE"," ",1291],["T_VARIABLE","$attributeCode",1291],")",")",";",["T_WHITESPACE","\n        ",1291],"}",["T_WHITESPACE","\n\n        ",1292],["T_IF","if",1294],["T_WHITESPACE"," ",1294],"(",["T_VARIABLE","$attribute",1294],["T_OBJECT_OPERATOR","->",1294],["T_STRING","getBackend",1294],"(",")",["T_OBJECT_OPERATOR","->",1294],["T_STRING","isStatic",1294],"(",")",")",["T_WHITESPACE"," ",1294],"{",["T_WHITESPACE","\n            ",1294],["T_VARIABLE","$attrFieldName",1295],["T_WHITESPACE"," ",1295],"=",["T_WHITESPACE"," ",1295],["T_VARIABLE","$attrTable",1295],["T_WHITESPACE"," ",1295],".",["T_WHITESPACE"," ",1295],["T_CONSTANT_ENCAPSED_STRING","'.'",1295],["T_WHITESPACE"," ",1295],".",["T_WHITESPACE"," ",1295],["T_VARIABLE","$attribute",1295],["T_OBJECT_OPERATOR","->",1295],["T_STRING","getAttributeCode",1295],"(",")",";",["T_WHITESPACE","\n        ",1295],"}",["T_WHITESPACE"," ",1296],["T_ELSE","else",1296],["T_WHITESPACE"," ",1296],"{",["T_WHITESPACE","\n            ",1296],["T_VARIABLE","$attrFieldName",1297],["T_WHITESPACE"," ",1297],"=",["T_WHITESPACE"," ",1297],["T_VARIABLE","$attrTable",1297],["T_WHITESPACE"," ",1297],".",["T_WHITESPACE"," ",1297],["T_CONSTANT_ENCAPSED_STRING","'.value'",1297],";",["T_WHITESPACE","\n        ",1297],"}",["T_WHITESPACE","\n\n        ",1298],["T_VARIABLE","$fk",1300],["T_WHITESPACE"," ",1300],"=",["T_WHITESPACE"," ",1300],["T_VARIABLE","$adapter",1300],["T_OBJECT_OPERATOR","->",1300],["T_STRING","quoteColumnAs",1300],"(",["T_VARIABLE","$fk",1300],",",["T_WHITESPACE"," ",1300],["T_STRING","null",1300],")",";",["T_WHITESPACE","\n        ",1300],["T_VARIABLE","$pk",1301],["T_WHITESPACE"," ",1301],"=",["T_WHITESPACE"," ",1301],["T_VARIABLE","$adapter",1301],["T_OBJECT_OPERATOR","->",1301],["T_STRING","quoteColumnAs",1301],"(",["T_VARIABLE","$pk",1301],",",["T_WHITESPACE"," ",1301],["T_STRING","null",1301],")",";",["T_WHITESPACE","\n\n        ",1301],["T_VARIABLE","$condArr",1303],["T_WHITESPACE"," ",1303],"=",["T_WHITESPACE"," ",1303],["T_ARRAY","array",1303],"(","\"",["T_VARIABLE","$pk",1303],["T_ENCAPSED_AND_WHITESPACE"," = ",1303],["T_VARIABLE","$fk",1303],"\"",")",";",["T_WHITESPACE","\n        ",1303],["T_IF","if",1304],["T_WHITESPACE"," ",1304],"(","!",["T_VARIABLE","$attribute",1304],["T_OBJECT_OPERATOR","->",1304],["T_STRING","getBackend",1304],"(",")",["T_OBJECT_OPERATOR","->",1304],["T_STRING","isStatic",1304],"(",")",")",["T_WHITESPACE"," ",1304],"{",["T_WHITESPACE","\n            ",1304],["T_VARIABLE","$condArr",1305],"[","]",["T_WHITESPACE"," ",1305],"=",["T_WHITESPACE"," ",1305],["T_VARIABLE","$this",1305],["T_OBJECT_OPERATOR","->",1305],["T_STRING","getConnection",1305],"(",")",["T_OBJECT_OPERATOR","->",1305],["T_STRING","quoteInto",1305],"(",["T_WHITESPACE","\n                ",1305],["T_VARIABLE","$adapter",1306],["T_OBJECT_OPERATOR","->",1306],["T_STRING","quoteColumnAs",1306],"(","\"",["T_VARIABLE","$attrTable",1306],["T_ENCAPSED_AND_WHITESPACE",".attribute_id",1306],"\"",",",["T_WHITESPACE"," ",1306],["T_STRING","null",1306],")",["T_WHITESPACE"," ",1306],".",["T_WHITESPACE"," ",1306],["T_CONSTANT_ENCAPSED_STRING","' = ?'",1306],",",["T_WHITESPACE"," ",1306],["T_VARIABLE","$attribute",1306],["T_OBJECT_OPERATOR","->",1306],["T_STRING","getId",1306],"(",")",")",";",["T_WHITESPACE","\n        ",1306],"}",["T_WHITESPACE","\n\n        ",1307],["T_DOC_COMMENT","\/**\n         * process join type\n         *\/",1309],["T_WHITESPACE","\n        ",1311],["T_VARIABLE","$joinMethod",1312],["T_WHITESPACE"," ",1312],"=",["T_WHITESPACE"," ",1312],"(",["T_VARIABLE","$joinType",1312],["T_WHITESPACE"," ",1312],["T_IS_EQUAL","==",1312],["T_WHITESPACE"," ",1312],["T_CONSTANT_ENCAPSED_STRING","'left'",1312],")",["T_WHITESPACE"," ",1312],"?",["T_WHITESPACE"," ",1312],["T_CONSTANT_ENCAPSED_STRING","'joinLeft'",1312],["T_WHITESPACE"," ",1312],":",["T_WHITESPACE"," ",1312],["T_CONSTANT_ENCAPSED_STRING","'join'",1312],";",["T_WHITESPACE","\n\n        ",1312],["T_VARIABLE","$this",1314],["T_OBJECT_OPERATOR","->",1314],["T_STRING","_joinAttributeToSelect",1314],"(",["T_VARIABLE","$joinMethod",1314],",",["T_WHITESPACE"," ",1314],["T_VARIABLE","$attribute",1314],",",["T_WHITESPACE"," ",1314],["T_VARIABLE","$attrTable",1314],",",["T_WHITESPACE"," ",1314],["T_VARIABLE","$condArr",1314],",",["T_WHITESPACE"," ",1314],["T_VARIABLE","$attributeCode",1314],",",["T_WHITESPACE"," ",1314],["T_VARIABLE","$attrFieldName",1314],")",";",["T_WHITESPACE","\n\n        ",1314],["T_VARIABLE","$this",1316],["T_OBJECT_OPERATOR","->",1316],["T_STRING","removeAttributeToSelect",1316],"(",["T_VARIABLE","$attributeCode",1316],")",";",["T_WHITESPACE","\n        ",1316],["T_VARIABLE","$this",1317],["T_OBJECT_OPERATOR","->",1317],["T_STRING","_filterAttributes",1317],"[",["T_VARIABLE","$attributeCode",1317],"]",["T_WHITESPACE"," ",1317],"=",["T_WHITESPACE"," ",1317],["T_VARIABLE","$attribute",1317],["T_OBJECT_OPERATOR","->",1317],["T_STRING","getId",1317],"(",")",";",["T_WHITESPACE","\n\n        ",1317],["T_DOC_COMMENT","\/**\n         * Fix double join for using same as filter\n         *\/",1319],["T_WHITESPACE","\n        ",1321],["T_VARIABLE","$this",1322],["T_OBJECT_OPERATOR","->",1322],["T_STRING","_joinFields",1322],"[",["T_VARIABLE","$attributeCode",1322],"]",["T_WHITESPACE"," ",1322],"=",["T_WHITESPACE"," ",1322],["T_ARRAY","array",1322],"(",["T_WHITESPACE","\n            ",1322],["T_CONSTANT_ENCAPSED_STRING","'table'",1323],["T_WHITESPACE"," ",1323],["T_DOUBLE_ARROW","=>",1323],["T_WHITESPACE"," ",1323],["T_CONSTANT_ENCAPSED_STRING","''",1323],",",["T_WHITESPACE","\n            ",1323],["T_CONSTANT_ENCAPSED_STRING","'field'",1324],["T_WHITESPACE"," ",1324],["T_DOUBLE_ARROW","=>",1324],["T_WHITESPACE"," ",1324],["T_VARIABLE","$attrFieldName",1324],",",["T_WHITESPACE","\n        ",1324],")",";",["T_WHITESPACE","\n\n        ",1325],["T_RETURN","return",1327],["T_WHITESPACE"," ",1327],["T_VARIABLE","$this",1327],";",["T_WHITESPACE","\n    ",1327],"}",["T_WHITESPACE","\n\n    ",1328],["T_DOC_COMMENT","\/**\n     * Adding join statement to collection select instance\n     *\n     * @param   string $method\n     * @param   object $attribute\n     * @param   string $tableAlias\n     * @param   array $condition\n     * @param   string $fieldCode\n     * @param   string $fieldAlias\n     * @return  Mage_Eav_Model_Entity_Collection_Abstract\n     *\/",1330],["T_WHITESPACE","\n    ",1340],["T_PROTECTED","protected",1341],["T_WHITESPACE"," ",1341],["T_FUNCTION","function",1341],["T_WHITESPACE"," ",1341],["T_STRING","_joinAttributeToSelect",1341],"(",["T_VARIABLE","$method",1341],",",["T_WHITESPACE"," ",1341],["T_VARIABLE","$attribute",1341],",",["T_WHITESPACE"," ",1341],["T_VARIABLE","$tableAlias",1341],",",["T_WHITESPACE"," ",1341],["T_VARIABLE","$condition",1341],",",["T_WHITESPACE"," ",1341],["T_VARIABLE","$fieldCode",1341],",",["T_WHITESPACE"," ",1341],["T_VARIABLE","$fieldAlias",1341],")",["T_WHITESPACE","\n    ",1341],"{",["T_WHITESPACE","\n        ",1342],["T_VARIABLE","$this",1343],["T_OBJECT_OPERATOR","->",1343],["T_STRING","getSelect",1343],"(",")",["T_OBJECT_OPERATOR","->",1343],["T_VARIABLE","$method",1343],"(",["T_WHITESPACE","\n            ",1343],["T_ARRAY","array",1344],"(",["T_VARIABLE","$tableAlias",1344],["T_WHITESPACE"," ",1344],["T_DOUBLE_ARROW","=>",1344],["T_WHITESPACE"," ",1344],["T_VARIABLE","$attribute",1344],["T_OBJECT_OPERATOR","->",1344],["T_STRING","getBackend",1344],"(",")",["T_OBJECT_OPERATOR","->",1344],["T_STRING","getTable",1344],"(",")",")",",",["T_WHITESPACE","\n            ",1344],["T_CONSTANT_ENCAPSED_STRING","'('",1345],".",["T_STRING","implode",1345],"(",["T_CONSTANT_ENCAPSED_STRING","') AND ('",1345],",",["T_WHITESPACE"," ",1345],["T_VARIABLE","$condition",1345],")",".",["T_CONSTANT_ENCAPSED_STRING","')'",1345],",",["T_WHITESPACE","\n            ",1345],["T_ARRAY","array",1346],"(",["T_VARIABLE","$fieldCode",1346],["T_WHITESPACE"," ",1346],["T_DOUBLE_ARROW","=>",1346],["T_WHITESPACE"," ",1346],["T_VARIABLE","$fieldAlias",1346],")",["T_WHITESPACE","\n        ",1346],")",";",["T_WHITESPACE","\n        ",1347],["T_RETURN","return",1348],["T_WHITESPACE"," ",1348],["T_VARIABLE","$this",1348],";",["T_WHITESPACE","\n    ",1348],"}",["T_WHITESPACE","\n\n    ",1349],["T_DOC_COMMENT","\/**\n     * Get condition sql for the attribute\n     *\n     * @see self::_getConditionSql\n     * @param string $attribute\n     * @param mixed $condition\n     * @param string $joinType\n     * @return string\n     *\/",1351],["T_WHITESPACE","\n    ",1359],["T_PROTECTED","protected",1360],["T_WHITESPACE"," ",1360],["T_FUNCTION","function",1360],["T_WHITESPACE"," ",1360],["T_STRING","_getAttributeConditionSql",1360],"(",["T_VARIABLE","$attribute",1360],",",["T_WHITESPACE"," ",1360],["T_VARIABLE","$condition",1360],",",["T_WHITESPACE"," ",1360],["T_VARIABLE","$joinType",1360],["T_WHITESPACE"," ",1360],"=",["T_WHITESPACE"," ",1360],["T_CONSTANT_ENCAPSED_STRING","'inner'",1360],")",["T_WHITESPACE","\n    ",1360],"{",["T_WHITESPACE","\n        ",1361],["T_IF","if",1362],["T_WHITESPACE"," ",1362],"(",["T_ISSET","isset",1362],"(",["T_VARIABLE","$this",1362],["T_OBJECT_OPERATOR","->",1362],["T_STRING","_joinFields",1362],"[",["T_VARIABLE","$attribute",1362],"]",")",")",["T_WHITESPACE"," ",1362],"{",["T_WHITESPACE","\n\n            ",1362],["T_RETURN","return",1364],["T_WHITESPACE"," ",1364],["T_VARIABLE","$this",1364],["T_OBJECT_OPERATOR","->",1364],["T_STRING","_getConditionSql",1364],"(",["T_VARIABLE","$this",1364],["T_OBJECT_OPERATOR","->",1364],["T_STRING","_getAttributeFieldName",1364],"(",["T_VARIABLE","$attribute",1364],")",",",["T_WHITESPACE"," ",1364],["T_VARIABLE","$condition",1364],")",";",["T_WHITESPACE","\n        ",1364],"}",["T_WHITESPACE","\n        ",1365],["T_IF","if",1366],["T_WHITESPACE"," ",1366],"(",["T_ISSET","isset",1366],"(",["T_VARIABLE","$this",1366],["T_OBJECT_OPERATOR","->",1366],["T_STRING","_staticFields",1366],"[",["T_VARIABLE","$attribute",1366],"]",")",")",["T_WHITESPACE"," ",1366],"{",["T_WHITESPACE","\n            ",1366],["T_RETURN","return",1367],["T_WHITESPACE"," ",1367],["T_VARIABLE","$this",1367],["T_OBJECT_OPERATOR","->",1367],["T_STRING","_getConditionSql",1367],"(",["T_VARIABLE","$this",1367],["T_OBJECT_OPERATOR","->",1367],["T_STRING","getConnection",1367],"(",")",["T_OBJECT_OPERATOR","->",1367],["T_STRING","quoteIdentifier",1367],"(",["T_CONSTANT_ENCAPSED_STRING","'e.'",1367],["T_WHITESPACE"," ",1367],".",["T_WHITESPACE"," ",1367],["T_VARIABLE","$attribute",1367],")",",",["T_WHITESPACE"," ",1367],["T_VARIABLE","$condition",1367],")",";",["T_WHITESPACE","\n        ",1367],"}",["T_WHITESPACE","\n        ",1368],["T_COMMENT","\/\/ process linked attribute\n",1369],["T_WHITESPACE","        ",1370],["T_IF","if",1370],["T_WHITESPACE"," ",1370],"(",["T_ISSET","isset",1370],"(",["T_VARIABLE","$this",1370],["T_OBJECT_OPERATOR","->",1370],["T_STRING","_joinAttributes",1370],"[",["T_VARIABLE","$attribute",1370],"]",")",")",["T_WHITESPACE"," ",1370],"{",["T_WHITESPACE","\n            ",1370],["T_VARIABLE","$entity",1371],["T_WHITESPACE","      ",1371],"=",["T_WHITESPACE"," ",1371],["T_VARIABLE","$this",1371],["T_OBJECT_OPERATOR","->",1371],["T_STRING","getAttribute",1371],"(",["T_VARIABLE","$attribute",1371],")",["T_OBJECT_OPERATOR","->",1371],["T_STRING","getEntity",1371],"(",")",";",["T_WHITESPACE","\n            ",1371],["T_VARIABLE","$entityTable",1372],["T_WHITESPACE"," ",1372],"=",["T_WHITESPACE"," ",1372],["T_VARIABLE","$entity",1372],["T_OBJECT_OPERATOR","->",1372],["T_STRING","getEntityTable",1372],"(",")",";",["T_WHITESPACE","\n        ",1372],"}",["T_WHITESPACE"," ",1373],["T_ELSE","else",1373],["T_WHITESPACE"," ",1373],"{",["T_WHITESPACE","\n            ",1373],["T_VARIABLE","$entity",1374],["T_WHITESPACE","      ",1374],"=",["T_WHITESPACE"," ",1374],["T_VARIABLE","$this",1374],["T_OBJECT_OPERATOR","->",1374],["T_STRING","getEntity",1374],"(",")",";",["T_WHITESPACE","\n            ",1374],["T_VARIABLE","$entityTable",1375],["T_WHITESPACE"," ",1375],"=",["T_WHITESPACE"," ",1375],["T_CONSTANT_ENCAPSED_STRING","'e'",1375],";",["T_WHITESPACE","\n        ",1375],"}",["T_WHITESPACE","\n\n        ",1376],["T_IF","if",1378],["T_WHITESPACE"," ",1378],"(",["T_VARIABLE","$entity",1378],["T_OBJECT_OPERATOR","->",1378],["T_STRING","isAttributeStatic",1378],"(",["T_VARIABLE","$attribute",1378],")",")",["T_WHITESPACE"," ",1378],"{",["T_WHITESPACE","\n            ",1378],["T_VARIABLE","$conditionSql",1379],["T_WHITESPACE"," ",1379],"=",["T_WHITESPACE"," ",1379],["T_VARIABLE","$this",1379],["T_OBJECT_OPERATOR","->",1379],["T_STRING","_getConditionSql",1379],"(",["T_WHITESPACE","\n                ",1379],["T_VARIABLE","$this",1380],["T_OBJECT_OPERATOR","->",1380],["T_STRING","getConnection",1380],"(",")",["T_OBJECT_OPERATOR","->",1380],["T_STRING","quoteIdentifier",1380],"(",["T_CONSTANT_ENCAPSED_STRING","'e.'",1380],["T_WHITESPACE"," ",1380],".",["T_WHITESPACE"," ",1380],["T_VARIABLE","$attribute",1380],")",",",["T_WHITESPACE","\n                ",1380],["T_VARIABLE","$condition",1381],["T_WHITESPACE","\n            ",1381],")",";",["T_WHITESPACE","\n        ",1382],"}",["T_WHITESPACE"," ",1383],["T_ELSE","else",1383],["T_WHITESPACE"," ",1383],"{",["T_WHITESPACE","\n            ",1383],["T_VARIABLE","$this",1384],["T_OBJECT_OPERATOR","->",1384],["T_STRING","_addAttributeJoin",1384],"(",["T_VARIABLE","$attribute",1384],",",["T_WHITESPACE"," ",1384],["T_VARIABLE","$joinType",1384],")",";",["T_WHITESPACE","\n            ",1384],["T_IF","if",1385],["T_WHITESPACE"," ",1385],"(",["T_ISSET","isset",1385],"(",["T_VARIABLE","$this",1385],["T_OBJECT_OPERATOR","->",1385],["T_STRING","_joinAttributes",1385],"[",["T_VARIABLE","$attribute",1385],"]","[",["T_CONSTANT_ENCAPSED_STRING","'condition_alias'",1385],"]",")",")",["T_WHITESPACE"," ",1385],"{",["T_WHITESPACE","\n                ",1385],["T_VARIABLE","$field",1386],["T_WHITESPACE"," ",1386],"=",["T_WHITESPACE"," ",1386],["T_VARIABLE","$this",1386],["T_OBJECT_OPERATOR","->",1386],["T_STRING","_joinAttributes",1386],"[",["T_VARIABLE","$attribute",1386],"]","[",["T_CONSTANT_ENCAPSED_STRING","'condition_alias'",1386],"]",";",["T_WHITESPACE","\n            ",1386],"}",["T_WHITESPACE"," ",1387],["T_ELSE","else",1387],["T_WHITESPACE"," ",1387],"{",["T_WHITESPACE","\n                ",1387],["T_VARIABLE","$field",1388],["T_WHITESPACE"," ",1388],"=",["T_WHITESPACE"," ",1388],["T_VARIABLE","$this",1388],["T_OBJECT_OPERATOR","->",1388],["T_STRING","_getAttributeTableAlias",1388],"(",["T_VARIABLE","$attribute",1388],")",["T_WHITESPACE"," ",1388],".",["T_WHITESPACE"," ",1388],["T_CONSTANT_ENCAPSED_STRING","'.value'",1388],";",["T_WHITESPACE","\n\n            ",1388],"}",["T_WHITESPACE","\n\n            ",1390],["T_VARIABLE","$conditionSql",1392],["T_WHITESPACE"," ",1392],"=",["T_WHITESPACE"," ",1392],["T_VARIABLE","$this",1392],["T_OBJECT_OPERATOR","->",1392],["T_STRING","_getConditionSql",1392],"(",["T_VARIABLE","$field",1392],",",["T_WHITESPACE"," ",1392],["T_VARIABLE","$condition",1392],")",";",["T_WHITESPACE","\n        ",1392],"}",["T_WHITESPACE","\n\n        ",1393],["T_RETURN","return",1395],["T_WHITESPACE"," ",1395],["T_VARIABLE","$conditionSql",1395],";",["T_WHITESPACE","\n    ",1395],"}",["T_WHITESPACE","\n\n    ",1396],["T_DOC_COMMENT","\/**\n     * Set sorting order\n     *\n     * $attribute can also be an array of attributes\n     *\n     * @param string|array $attribute\n     * @param string $dir\n     * @return Mage_Eav_Model_Entity_Collection_Abstract\n     *\/",1398],["T_WHITESPACE","\n    ",1406],["T_PUBLIC","public",1407],["T_WHITESPACE"," ",1407],["T_FUNCTION","function",1407],["T_WHITESPACE"," ",1407],["T_STRING","setOrder",1407],"(",["T_VARIABLE","$attribute",1407],",",["T_WHITESPACE"," ",1407],["T_VARIABLE","$dir",1407],["T_WHITESPACE"," ",1407],"=",["T_WHITESPACE"," ",1407],["T_STRING","self",1407],["T_DOUBLE_COLON","::",1407],["T_STRING","SORT_ORDER_ASC",1407],")",["T_WHITESPACE","\n    ",1407],"{",["T_WHITESPACE","\n        ",1408],["T_IF","if",1409],["T_WHITESPACE"," ",1409],"(",["T_STRING","is_array",1409],"(",["T_VARIABLE","$attribute",1409],")",")",["T_WHITESPACE"," ",1409],"{",["T_WHITESPACE","\n            ",1409],["T_FOREACH","foreach",1410],["T_WHITESPACE"," ",1410],"(",["T_VARIABLE","$attribute",1410],["T_WHITESPACE"," ",1410],["T_AS","as",1410],["T_WHITESPACE"," ",1410],["T_VARIABLE","$attr",1410],")",["T_WHITESPACE"," ",1410],"{",["T_WHITESPACE","\n                ",1410],["T_STRING","parent",1411],["T_DOUBLE_COLON","::",1411],["T_STRING","setOrder",1411],"(",["T_VARIABLE","$attr",1411],",",["T_WHITESPACE"," ",1411],["T_VARIABLE","$dir",1411],")",";",["T_WHITESPACE","\n            ",1411],"}",["T_WHITESPACE","\n            ",1412],["T_RETURN","return",1413],["T_WHITESPACE"," ",1413],["T_VARIABLE","$this",1413],";",["T_WHITESPACE","\n        ",1413],"}",["T_WHITESPACE","\n        ",1414],["T_RETURN","return",1415],["T_WHITESPACE"," ",1415],["T_STRING","parent",1415],["T_DOUBLE_COLON","::",1415],["T_STRING","setOrder",1415],"(",["T_VARIABLE","$attribute",1415],",",["T_WHITESPACE"," ",1415],["T_VARIABLE","$dir",1415],")",";",["T_WHITESPACE","\n    ",1415],"}",["T_WHITESPACE","\n\n    ",1416],["T_DOC_COMMENT","\/**\n     * Retreive array of attributes\n     *\n     * @param array $arrAttributes\n     * @return array\n     *\/",1418],["T_WHITESPACE","\n    ",1423],["T_PUBLIC","public",1424],["T_WHITESPACE"," ",1424],["T_FUNCTION","function",1424],["T_WHITESPACE"," ",1424],["T_STRING","toArray",1424],"(",["T_VARIABLE","$arrAttributes",1424],["T_WHITESPACE"," ",1424],"=",["T_WHITESPACE"," ",1424],["T_ARRAY","array",1424],"(",")",")",["T_WHITESPACE","\n    ",1424],"{",["T_WHITESPACE","\n        ",1425],["T_VARIABLE","$arr",1426],["T_WHITESPACE"," ",1426],"=",["T_WHITESPACE"," ",1426],["T_ARRAY","array",1426],"(",")",";",["T_WHITESPACE","\n        ",1426],["T_FOREACH","foreach",1427],["T_WHITESPACE"," ",1427],"(",["T_VARIABLE","$this",1427],["T_OBJECT_OPERATOR","->",1427],["T_STRING","_items",1427],["T_WHITESPACE"," ",1427],["T_AS","as",1427],["T_WHITESPACE"," ",1427],["T_VARIABLE","$k",1427],["T_WHITESPACE"," ",1427],["T_DOUBLE_ARROW","=>",1427],["T_WHITESPACE"," ",1427],["T_VARIABLE","$item",1427],")",["T_WHITESPACE"," ",1427],"{",["T_WHITESPACE","\n            ",1427],["T_VARIABLE","$arr",1428],"[",["T_VARIABLE","$k",1428],"]",["T_WHITESPACE"," ",1428],"=",["T_WHITESPACE"," ",1428],["T_VARIABLE","$item",1428],["T_OBJECT_OPERATOR","->",1428],["T_STRING","toArray",1428],"(",["T_VARIABLE","$arrAttributes",1428],")",";",["T_WHITESPACE","\n        ",1428],"}",["T_WHITESPACE","\n        ",1429],["T_RETURN","return",1430],["T_WHITESPACE"," ",1430],["T_VARIABLE","$arr",1430],";",["T_WHITESPACE","\n    ",1430],"}",["T_WHITESPACE","\n\n    ",1431],["T_DOC_COMMENT","\/**\n     * Treat \"order by\" items as attributes to sort\n     *\n     * @return Mage_Eav_Model_Entity_Collection_Abstract\n     *\/",1433],["T_WHITESPACE","\n    ",1437],["T_PROTECTED","protected",1438],["T_WHITESPACE"," ",1438],["T_FUNCTION","function",1438],["T_WHITESPACE"," ",1438],["T_STRING","_renderOrders",1438],"(",")",["T_WHITESPACE","\n    ",1438],"{",["T_WHITESPACE","\n        ",1439],["T_IF","if",1440],["T_WHITESPACE"," ",1440],"(","!",["T_VARIABLE","$this",1440],["T_OBJECT_OPERATOR","->",1440],["T_STRING","_isOrdersRendered",1440],")",["T_WHITESPACE"," ",1440],"{",["T_WHITESPACE","\n            ",1440],["T_FOREACH","foreach",1441],["T_WHITESPACE"," ",1441],"(",["T_VARIABLE","$this",1441],["T_OBJECT_OPERATOR","->",1441],["T_STRING","_orders",1441],["T_WHITESPACE"," ",1441],["T_AS","as",1441],["T_WHITESPACE"," ",1441],["T_VARIABLE","$attribute",1441],["T_WHITESPACE"," ",1441],["T_DOUBLE_ARROW","=>",1441],["T_WHITESPACE"," ",1441],["T_VARIABLE","$direction",1441],")",["T_WHITESPACE"," ",1441],"{",["T_WHITESPACE","\n                ",1441],["T_VARIABLE","$this",1442],["T_OBJECT_OPERATOR","->",1442],["T_STRING","addAttributeToSort",1442],"(",["T_VARIABLE","$attribute",1442],",",["T_WHITESPACE"," ",1442],["T_VARIABLE","$direction",1442],")",";",["T_WHITESPACE","\n            ",1442],"}",["T_WHITESPACE","\n            ",1443],["T_VARIABLE","$this",1444],["T_OBJECT_OPERATOR","->",1444],["T_STRING","_isOrdersRendered",1444],["T_WHITESPACE"," ",1444],"=",["T_WHITESPACE"," ",1444],["T_STRING","true",1444],";",["T_WHITESPACE","\n        ",1444],"}",["T_WHITESPACE","\n        ",1445],["T_RETURN","return",1446],["T_WHITESPACE"," ",1446],["T_VARIABLE","$this",1446],";",["T_WHITESPACE","\n    ",1446],"}",["T_WHITESPACE","\n\n    ",1447],["T_DOC_COMMENT","\/**\n     * After load method\n     *\n     * @return Mage_Eav_Model_Entity_Collection_Abstract\n     *\/",1449],["T_WHITESPACE","\n    ",1453],["T_PROTECTED","protected",1454],["T_WHITESPACE"," ",1454],["T_FUNCTION","function",1454],["T_WHITESPACE"," ",1454],["T_STRING","_afterLoad",1454],"(",")",["T_WHITESPACE","\n    ",1454],"{",["T_WHITESPACE","\n        ",1455],["T_RETURN","return",1456],["T_WHITESPACE"," ",1456],["T_VARIABLE","$this",1456],";",["T_WHITESPACE","\n    ",1456],"}",["T_WHITESPACE","\n\n    ",1457],["T_DOC_COMMENT","\/**\n     * Reset collection\n     *\n     * @return Mage_Eav_Model_Entity_Collection_Abstract\n     *\/",1459],["T_WHITESPACE","\n    ",1463],["T_PROTECTED","protected",1464],["T_WHITESPACE"," ",1464],["T_FUNCTION","function",1464],["T_WHITESPACE"," ",1464],["T_STRING","_reset",1464],"(",")",["T_WHITESPACE","\n    ",1464],"{",["T_WHITESPACE","\n        ",1465],["T_STRING","parent",1466],["T_DOUBLE_COLON","::",1466],["T_STRING","_reset",1466],"(",")",";",["T_WHITESPACE","\n\n        ",1466],["T_VARIABLE","$this",1468],["T_OBJECT_OPERATOR","->",1468],["T_STRING","_selectEntityTypes",1468],["T_WHITESPACE"," ",1468],"=",["T_WHITESPACE"," ",1468],["T_ARRAY","array",1468],"(",")",";",["T_WHITESPACE","\n        ",1468],["T_VARIABLE","$this",1469],["T_OBJECT_OPERATOR","->",1469],["T_STRING","_selectAttributes",1469],["T_WHITESPACE","  ",1469],"=",["T_WHITESPACE"," ",1469],["T_ARRAY","array",1469],"(",")",";",["T_WHITESPACE","\n        ",1469],["T_VARIABLE","$this",1470],["T_OBJECT_OPERATOR","->",1470],["T_STRING","_filterAttributes",1470],["T_WHITESPACE","  ",1470],"=",["T_WHITESPACE"," ",1470],["T_ARRAY","array",1470],"(",")",";",["T_WHITESPACE","\n        ",1470],["T_VARIABLE","$this",1471],["T_OBJECT_OPERATOR","->",1471],["T_STRING","_joinEntities",1471],["T_WHITESPACE","      ",1471],"=",["T_WHITESPACE"," ",1471],["T_ARRAY","array",1471],"(",")",";",["T_WHITESPACE","\n        ",1471],["T_VARIABLE","$this",1472],["T_OBJECT_OPERATOR","->",1472],["T_STRING","_joinAttributes",1472],["T_WHITESPACE","    ",1472],"=",["T_WHITESPACE"," ",1472],["T_ARRAY","array",1472],"(",")",";",["T_WHITESPACE","\n        ",1472],["T_VARIABLE","$this",1473],["T_OBJECT_OPERATOR","->",1473],["T_STRING","_joinFields",1473],["T_WHITESPACE","        ",1473],"=",["T_WHITESPACE"," ",1473],["T_ARRAY","array",1473],"(",")",";",["T_WHITESPACE","\n\n        ",1473],["T_RETURN","return",1475],["T_WHITESPACE"," ",1475],["T_VARIABLE","$this",1475],";",["T_WHITESPACE","\n    ",1475],"}",["T_WHITESPACE","\n\n    ",1476],["T_DOC_COMMENT","\/**\n     * Returns already loaded element ids\n     *\n     * return array\n     *\/",1478],["T_WHITESPACE","\n    ",1482],["T_PUBLIC","public",1483],["T_WHITESPACE"," ",1483],["T_FUNCTION","function",1483],["T_WHITESPACE"," ",1483],["T_STRING","getLoadedIds",1483],"(",")",["T_WHITESPACE","\n    ",1483],"{",["T_WHITESPACE","\n        ",1484],["T_RETURN","return",1485],["T_WHITESPACE"," ",1485],["T_STRING","array_keys",1485],"(",["T_VARIABLE","$this",1485],["T_OBJECT_OPERATOR","->",1485],["T_STRING","_items",1485],")",";",["T_WHITESPACE","\n    ",1485],"}",["T_WHITESPACE","\n\n    ",1486],["T_DOC_COMMENT","\/**\n     * Prepare select for load\n     *\n     * @param Varien_Db_Select $select OPTIONAL\n     * @return string\n     *\/",1488],["T_WHITESPACE","\n    ",1493],["T_PUBLIC","public",1494],["T_WHITESPACE"," ",1494],["T_FUNCTION","function",1494],["T_WHITESPACE"," ",1494],["T_STRING","_prepareSelect",1494],"(",["T_STRING","Varien_Db_Select",1494],["T_WHITESPACE"," ",1494],["T_VARIABLE","$select",1494],")",["T_WHITESPACE","\n    ",1494],"{",["T_WHITESPACE","\n        ",1495],["T_IF","if",1496],["T_WHITESPACE"," ",1496],"(",["T_VARIABLE","$this",1496],["T_OBJECT_OPERATOR","->",1496],["T_STRING","_useAnalyticFunction",1496],")",["T_WHITESPACE"," ",1496],"{",["T_WHITESPACE","\n            ",1496],["T_VARIABLE","$helper",1497],["T_WHITESPACE"," ",1497],"=",["T_WHITESPACE"," ",1497],["T_STRING","Mage",1497],["T_DOUBLE_COLON","::",1497],["T_STRING","getResourceHelper",1497],"(",["T_CONSTANT_ENCAPSED_STRING","'core'",1497],")",";",["T_WHITESPACE","\n            ",1497],["T_RETURN","return",1498],["T_WHITESPACE"," ",1498],["T_VARIABLE","$helper",1498],["T_OBJECT_OPERATOR","->",1498],["T_STRING","getQueryUsingAnalyticFunction",1498],"(",["T_VARIABLE","$select",1498],")",";",["T_WHITESPACE","\n        ",1498],"}",["T_WHITESPACE","\n\n        ",1499],["T_RETURN","return",1501],["T_WHITESPACE"," ",1501],["T_STRING_CAST","(string)",1501],["T_VARIABLE","$select",1501],";",["T_WHITESPACE","\n    ",1501],"}",["T_WHITESPACE","\n",1502],"}",["T_WHITESPACE","\n",1503]]
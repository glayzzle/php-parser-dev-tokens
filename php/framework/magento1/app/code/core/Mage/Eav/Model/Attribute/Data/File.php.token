[["T_OPEN_TAG","<?php\n",1],["T_DOC_COMMENT","\/**\n * Magento\n *\n * NOTICE OF LICENSE\n *\n * This source file is subject to the Open Software License (OSL 3.0)\n * that is bundled with this package in the file LICENSE.txt.\n * It is also available through the world-wide-web at this URL:\n * http:\/\/opensource.org\/licenses\/osl-3.0.php\n * If you did not receive a copy of the license and are unable to\n * obtain it through the world-wide-web, please send an email\n * to license@magento.com so we can send you a copy immediately.\n *\n * DISCLAIMER\n *\n * Do not edit or add to this file if you wish to upgrade Magento to newer\n * versions in the future. If you wish to customize Magento for your\n * needs please refer to http:\/\/www.magento.com for more information.\n *\n * @category    Mage\n * @package     Mage_Eav\n * @copyright  Copyright (c) 2006-2016 X.commerce, Inc. and affiliates (http:\/\/www.magento.com)\n * @license    http:\/\/opensource.org\/licenses\/osl-3.0.php  Open Software License (OSL 3.0)\n *\/",2],["T_WHITESPACE","\n\n",25],["T_DOC_COMMENT","\/**\n * EAV Entity Attribute File Data Model\n *\n * @category    Mage\n * @package     Mage_Eav\n * @author      Magento Core Team <core@magentocommerce.com>\n *\/",27],["T_WHITESPACE","\n",33],["T_CLASS","class",34],["T_WHITESPACE"," ",34],["T_STRING","Mage_Eav_Model_Attribute_Data_File",34],["T_WHITESPACE"," ",34],["T_EXTENDS","extends",34],["T_WHITESPACE"," ",34],["T_STRING","Mage_Eav_Model_Attribute_Data_Abstract",34],["T_WHITESPACE","\n",34],"{",["T_WHITESPACE","\n    ",35],["T_DOC_COMMENT","\/**\n     * Validator for check not protected extensions\n     *\n     * @var Mage_Core_Model_File_Validator_NotProtectedExtension\n     *\/",36],["T_WHITESPACE","\n    ",40],["T_PROTECTED","protected",41],["T_WHITESPACE"," ",41],["T_VARIABLE","$_validatorNotProtectedExtensions",41],";",["T_WHITESPACE","\n\n    ",41],["T_DOC_COMMENT","\/**\n     * Extract data from request and return value\n     *\n     * @param Zend_Controller_Request_Http $request\n     * @return array|string\n     *\/",43],["T_WHITESPACE","\n    ",48],["T_PUBLIC","public",49],["T_WHITESPACE"," ",49],["T_FUNCTION","function",49],["T_WHITESPACE"," ",49],["T_STRING","extractValue",49],"(",["T_STRING","Zend_Controller_Request_Http",49],["T_WHITESPACE"," ",49],["T_VARIABLE","$request",49],")",["T_WHITESPACE","\n    ",49],"{",["T_WHITESPACE","\n        ",50],["T_IF","if",51],["T_WHITESPACE"," ",51],"(",["T_VARIABLE","$this",51],["T_OBJECT_OPERATOR","->",51],["T_STRING","getIsAjaxRequest",51],"(",")",")",["T_WHITESPACE"," ",51],"{",["T_WHITESPACE","\n            ",51],["T_RETURN","return",52],["T_WHITESPACE"," ",52],["T_STRING","false",52],";",["T_WHITESPACE","\n        ",52],"}",["T_WHITESPACE","\n\n        ",53],["T_VARIABLE","$extend",55],["T_WHITESPACE"," ",55],"=",["T_WHITESPACE"," ",55],["T_VARIABLE","$this",55],["T_OBJECT_OPERATOR","->",55],["T_STRING","_getRequestValue",55],"(",["T_VARIABLE","$request",55],")",";",["T_WHITESPACE","\n\n        ",55],["T_VARIABLE","$attrCode",57],["T_WHITESPACE","  ",57],"=",["T_WHITESPACE"," ",57],["T_VARIABLE","$this",57],["T_OBJECT_OPERATOR","->",57],["T_STRING","getAttribute",57],"(",")",["T_OBJECT_OPERATOR","->",57],["T_STRING","getAttributeCode",57],"(",")",";",["T_WHITESPACE","\n        ",57],["T_IF","if",58],["T_WHITESPACE"," ",58],"(",["T_VARIABLE","$this",58],["T_OBJECT_OPERATOR","->",58],["T_STRING","_requestScope",58],")",["T_WHITESPACE"," ",58],"{",["T_WHITESPACE","\n            ",58],["T_VARIABLE","$value",59],["T_WHITESPACE","  ",59],"=",["T_WHITESPACE"," ",59],["T_ARRAY","array",59],"(",")",";",["T_WHITESPACE","\n            ",59],["T_IF","if",60],["T_WHITESPACE"," ",60],"(",["T_STRING","strpos",60],"(",["T_VARIABLE","$this",60],["T_OBJECT_OPERATOR","->",60],["T_STRING","_requestScope",60],",",["T_WHITESPACE"," ",60],["T_CONSTANT_ENCAPSED_STRING","'\/'",60],")",["T_WHITESPACE"," ",60],["T_IS_NOT_IDENTICAL","!==",60],["T_WHITESPACE"," ",60],["T_STRING","false",60],")",["T_WHITESPACE"," ",60],"{",["T_WHITESPACE","\n                ",60],["T_VARIABLE","$scopes",61],["T_WHITESPACE"," ",61],"=",["T_WHITESPACE"," ",61],["T_STRING","explode",61],"(",["T_CONSTANT_ENCAPSED_STRING","'\/'",61],",",["T_WHITESPACE"," ",61],["T_VARIABLE","$this",61],["T_OBJECT_OPERATOR","->",61],["T_STRING","_requestScope",61],")",";",["T_WHITESPACE","\n                ",61],["T_VARIABLE","$mainScope",62],["T_WHITESPACE","  ",62],"=",["T_WHITESPACE"," ",62],["T_STRING","array_shift",62],"(",["T_VARIABLE","$scopes",62],")",";",["T_WHITESPACE","\n            ",62],"}",["T_WHITESPACE"," ",63],["T_ELSE","else",63],["T_WHITESPACE"," ",63],"{",["T_WHITESPACE","\n                ",63],["T_VARIABLE","$mainScope",64],["T_WHITESPACE","  ",64],"=",["T_WHITESPACE"," ",64],["T_VARIABLE","$this",64],["T_OBJECT_OPERATOR","->",64],["T_STRING","_requestScope",64],";",["T_WHITESPACE","\n                ",64],["T_VARIABLE","$scopes",65],["T_WHITESPACE","     ",65],"=",["T_WHITESPACE"," ",65],["T_ARRAY","array",65],"(",")",";",["T_WHITESPACE","\n            ",65],"}",["T_WHITESPACE","\n\n            ",66],["T_IF","if",68],["T_WHITESPACE"," ",68],"(","!",["T_EMPTY","empty",68],"(",["T_VARIABLE","$_FILES",68],"[",["T_VARIABLE","$mainScope",68],"]",")",")",["T_WHITESPACE"," ",68],"{",["T_WHITESPACE","\n                ",68],["T_FOREACH","foreach",69],["T_WHITESPACE"," ",69],"(",["T_VARIABLE","$_FILES",69],"[",["T_VARIABLE","$mainScope",69],"]",["T_WHITESPACE"," ",69],["T_AS","as",69],["T_WHITESPACE"," ",69],["T_VARIABLE","$fileKey",69],["T_WHITESPACE"," ",69],["T_DOUBLE_ARROW","=>",69],["T_WHITESPACE"," ",69],["T_VARIABLE","$scopeData",69],")",["T_WHITESPACE"," ",69],"{",["T_WHITESPACE","\n                    ",69],["T_FOREACH","foreach",70],["T_WHITESPACE"," ",70],"(",["T_VARIABLE","$scopes",70],["T_WHITESPACE"," ",70],["T_AS","as",70],["T_WHITESPACE"," ",70],["T_VARIABLE","$scopeName",70],")",["T_WHITESPACE"," ",70],"{",["T_WHITESPACE","\n                        ",70],["T_IF","if",71],["T_WHITESPACE"," ",71],"(",["T_ISSET","isset",71],"(",["T_VARIABLE","$scopeData",71],"[",["T_VARIABLE","$scopeName",71],"]",")",")",["T_WHITESPACE"," ",71],"{",["T_WHITESPACE","\n                            ",71],["T_VARIABLE","$scopeData",72],["T_WHITESPACE"," ",72],"=",["T_WHITESPACE"," ",72],["T_VARIABLE","$scopeData",72],"[",["T_VARIABLE","$scopeName",72],"]",";",["T_WHITESPACE","\n                        ",72],"}",["T_WHITESPACE"," ",73],["T_ELSE","else",73],["T_WHITESPACE"," ",73],"{",["T_WHITESPACE","\n                            ",73],["T_VARIABLE","$scopeData",74],"[",["T_VARIABLE","$scopeName",74],"]",["T_WHITESPACE"," ",74],"=",["T_WHITESPACE"," ",74],["T_ARRAY","array",74],"(",")",";",["T_WHITESPACE","\n                        ",74],"}",["T_WHITESPACE","\n                    ",75],"}",["T_WHITESPACE","\n\n                    ",76],["T_IF","if",78],["T_WHITESPACE"," ",78],"(",["T_ISSET","isset",78],"(",["T_VARIABLE","$scopeData",78],"[",["T_VARIABLE","$attrCode",78],"]",")",")",["T_WHITESPACE"," ",78],"{",["T_WHITESPACE","\n                        ",78],["T_VARIABLE","$value",79],"[",["T_VARIABLE","$fileKey",79],"]",["T_WHITESPACE"," ",79],"=",["T_WHITESPACE"," ",79],["T_VARIABLE","$scopeData",79],"[",["T_VARIABLE","$attrCode",79],"]",";",["T_WHITESPACE","\n                    ",79],"}",["T_WHITESPACE","\n                ",80],"}",["T_WHITESPACE","\n            ",81],"}",["T_WHITESPACE"," ",82],["T_ELSE","else",82],["T_WHITESPACE"," ",82],"{",["T_WHITESPACE","\n                ",82],["T_VARIABLE","$value",83],["T_WHITESPACE"," ",83],"=",["T_WHITESPACE"," ",83],["T_ARRAY","array",83],"(",")",";",["T_WHITESPACE","\n            ",83],"}",["T_WHITESPACE","\n        ",84],"}",["T_WHITESPACE"," ",85],["T_ELSE","else",85],["T_WHITESPACE"," ",85],"{",["T_WHITESPACE","\n            ",85],["T_IF","if",86],["T_WHITESPACE"," ",86],"(",["T_ISSET","isset",86],"(",["T_VARIABLE","$_FILES",86],"[",["T_VARIABLE","$attrCode",86],"]",")",")",["T_WHITESPACE"," ",86],"{",["T_WHITESPACE","\n                ",86],["T_VARIABLE","$value",87],["T_WHITESPACE"," ",87],"=",["T_WHITESPACE"," ",87],["T_VARIABLE","$_FILES",87],"[",["T_VARIABLE","$attrCode",87],"]",";",["T_WHITESPACE","\n            ",87],"}",["T_WHITESPACE"," ",88],["T_ELSE","else",88],["T_WHITESPACE"," ",88],"{",["T_WHITESPACE","\n                ",88],["T_VARIABLE","$value",89],["T_WHITESPACE"," ",89],"=",["T_WHITESPACE"," ",89],["T_ARRAY","array",89],"(",")",";",["T_WHITESPACE","\n            ",89],"}",["T_WHITESPACE","\n        ",90],"}",["T_WHITESPACE","\n\n        ",91],["T_IF","if",93],["T_WHITESPACE"," ",93],"(","!",["T_EMPTY","empty",93],"(",["T_VARIABLE","$extend",93],"[",["T_CONSTANT_ENCAPSED_STRING","'delete'",93],"]",")",")",["T_WHITESPACE"," ",93],"{",["T_WHITESPACE","\n            ",93],["T_VARIABLE","$value",94],"[",["T_CONSTANT_ENCAPSED_STRING","'delete'",94],"]",["T_WHITESPACE"," ",94],"=",["T_WHITESPACE"," ",94],["T_STRING","true",94],";",["T_WHITESPACE","\n        ",94],"}",["T_WHITESPACE","\n\n        ",95],["T_RETURN","return",97],["T_WHITESPACE"," ",97],["T_VARIABLE","$value",97],";",["T_WHITESPACE","\n    ",97],"}",["T_WHITESPACE","\n\n    ",98],["T_DOC_COMMENT","\/**\n     * Validate file by attribute validate rules\n     * Return array of errors\n     *\n     * @param array $value\n     * @return array\n     *\/",100],["T_WHITESPACE","\n    ",106],["T_PROTECTED","protected",107],["T_WHITESPACE"," ",107],["T_FUNCTION","function",107],["T_WHITESPACE"," ",107],["T_STRING","_validateByRules",107],"(",["T_VARIABLE","$value",107],")",["T_WHITESPACE","\n    ",107],"{",["T_WHITESPACE","\n        ",108],["T_VARIABLE","$label",109],["T_WHITESPACE","  ",109],"=",["T_WHITESPACE"," ",109],["T_VARIABLE","$this",109],["T_OBJECT_OPERATOR","->",109],["T_STRING","getAttribute",109],"(",")",["T_OBJECT_OPERATOR","->",109],["T_STRING","getStoreLabel",109],"(",")",";",["T_WHITESPACE","\n        ",109],["T_VARIABLE","$rules",110],["T_WHITESPACE","  ",110],"=",["T_WHITESPACE"," ",110],["T_VARIABLE","$this",110],["T_OBJECT_OPERATOR","->",110],["T_STRING","getAttribute",110],"(",")",["T_OBJECT_OPERATOR","->",110],["T_STRING","getValidateRules",110],"(",")",";",["T_WHITESPACE","\n        ",110],["T_VARIABLE","$extension",111],["T_WHITESPACE","  ",111],"=",["T_WHITESPACE"," ",111],["T_STRING","pathinfo",111],"(",["T_VARIABLE","$value",111],"[",["T_CONSTANT_ENCAPSED_STRING","'name'",111],"]",",",["T_WHITESPACE"," ",111],["T_STRING","PATHINFO_EXTENSION",111],")",";",["T_WHITESPACE","\n\n        ",111],["T_IF","if",113],["T_WHITESPACE"," ",113],"(","!",["T_EMPTY","empty",113],"(",["T_VARIABLE","$rules",113],"[",["T_CONSTANT_ENCAPSED_STRING","'file_extensions'",113],"]",")",")",["T_WHITESPACE"," ",113],"{",["T_WHITESPACE","\n            ",113],["T_VARIABLE","$extensions",114],["T_WHITESPACE"," ",114],"=",["T_WHITESPACE"," ",114],["T_STRING","explode",114],"(",["T_CONSTANT_ENCAPSED_STRING","','",114],",",["T_WHITESPACE"," ",114],["T_VARIABLE","$rules",114],"[",["T_CONSTANT_ENCAPSED_STRING","'file_extensions'",114],"]",")",";",["T_WHITESPACE","\n            ",114],["T_VARIABLE","$extensions",115],["T_WHITESPACE"," ",115],"=",["T_WHITESPACE"," ",115],["T_STRING","array_map",115],"(",["T_CONSTANT_ENCAPSED_STRING","'trim'",115],",",["T_WHITESPACE"," ",115],["T_VARIABLE","$extensions",115],")",";",["T_WHITESPACE","\n            ",115],["T_IF","if",116],["T_WHITESPACE"," ",116],"(","!",["T_STRING","in_array",116],"(",["T_VARIABLE","$extension",116],",",["T_WHITESPACE"," ",116],["T_VARIABLE","$extensions",116],")",")",["T_WHITESPACE"," ",116],"{",["T_WHITESPACE","\n                ",116],["T_RETURN","return",117],["T_WHITESPACE"," ",117],["T_ARRAY","array",117],"(",["T_WHITESPACE","\n                    ",117],["T_STRING","Mage",118],["T_DOUBLE_COLON","::",118],["T_STRING","helper",118],"(",["T_CONSTANT_ENCAPSED_STRING","'eav'",118],")",["T_OBJECT_OPERATOR","->",118],["T_STRING","__",118],"(",["T_CONSTANT_ENCAPSED_STRING","'\"%s\" is not a valid file extension.'",118],",",["T_WHITESPACE"," ",118],["T_VARIABLE","$label",118],")",["T_WHITESPACE","\n                ",118],")",";",["T_WHITESPACE","\n            ",119],"}",["T_WHITESPACE","\n        ",120],"}",["T_WHITESPACE","\n\n        ",121],["T_DOC_COMMENT","\/**\n         * Check protected file extension\n         *\/",123],["T_WHITESPACE","\n        ",125],["T_DOC_COMMENT","\/** @var $validator Mage_Core_Model_File_Validator_NotProtectedExtension *\/",126],["T_WHITESPACE","\n        ",126],["T_VARIABLE","$validator",127],["T_WHITESPACE"," ",127],"=",["T_WHITESPACE"," ",127],["T_STRING","Mage",127],["T_DOUBLE_COLON","::",127],["T_STRING","getSingleton",127],"(",["T_CONSTANT_ENCAPSED_STRING","'core\/file_validator_notProtectedExtension'",127],")",";",["T_WHITESPACE","\n        ",127],["T_IF","if",128],["T_WHITESPACE"," ",128],"(","!",["T_VARIABLE","$validator",128],["T_OBJECT_OPERATOR","->",128],["T_STRING","isValid",128],"(",["T_VARIABLE","$extension",128],")",")",["T_WHITESPACE"," ",128],"{",["T_WHITESPACE","\n            ",128],["T_RETURN","return",129],["T_WHITESPACE"," ",129],["T_VARIABLE","$validator",129],["T_OBJECT_OPERATOR","->",129],["T_STRING","getMessages",129],"(",")",";",["T_WHITESPACE","\n        ",129],"}",["T_WHITESPACE","\n\n        ",130],["T_IF","if",132],["T_WHITESPACE"," ",132],"(","!",["T_STRING","is_uploaded_file",132],"(",["T_VARIABLE","$value",132],"[",["T_CONSTANT_ENCAPSED_STRING","'tmp_name'",132],"]",")",")",["T_WHITESPACE"," ",132],"{",["T_WHITESPACE","\n            ",132],["T_RETURN","return",133],["T_WHITESPACE"," ",133],["T_ARRAY","array",133],"(",["T_WHITESPACE","\n                ",133],["T_STRING","Mage",134],["T_DOUBLE_COLON","::",134],["T_STRING","helper",134],"(",["T_CONSTANT_ENCAPSED_STRING","'eav'",134],")",["T_OBJECT_OPERATOR","->",134],["T_STRING","__",134],"(",["T_CONSTANT_ENCAPSED_STRING","'\"%s\" is not a valid file.'",134],",",["T_WHITESPACE"," ",134],["T_VARIABLE","$label",134],")",["T_WHITESPACE","\n            ",134],")",";",["T_WHITESPACE","\n        ",135],"}",["T_WHITESPACE","\n\n        ",136],["T_IF","if",138],["T_WHITESPACE"," ",138],"(","!",["T_EMPTY","empty",138],"(",["T_VARIABLE","$rules",138],"[",["T_CONSTANT_ENCAPSED_STRING","'max_file_size'",138],"]",")",")",["T_WHITESPACE"," ",138],"{",["T_WHITESPACE","\n            ",138],["T_VARIABLE","$size",139],["T_WHITESPACE"," ",139],"=",["T_WHITESPACE"," ",139],["T_VARIABLE","$value",139],"[",["T_CONSTANT_ENCAPSED_STRING","'size'",139],"]",";",["T_WHITESPACE","\n            ",139],["T_IF","if",140],["T_WHITESPACE"," ",140],"(",["T_VARIABLE","$rules",140],"[",["T_CONSTANT_ENCAPSED_STRING","'max_file_size'",140],"]",["T_WHITESPACE"," ",140],"<",["T_WHITESPACE"," ",140],["T_VARIABLE","$size",140],")",["T_WHITESPACE"," ",140],"{",["T_WHITESPACE","\n                ",140],["T_RETURN","return",141],["T_WHITESPACE"," ",141],["T_ARRAY","array",141],"(",["T_WHITESPACE","\n                    ",141],["T_STRING","Mage",142],["T_DOUBLE_COLON","::",142],["T_STRING","helper",142],"(",["T_CONSTANT_ENCAPSED_STRING","'eav'",142],")",["T_OBJECT_OPERATOR","->",142],["T_STRING","__",142],"(",["T_CONSTANT_ENCAPSED_STRING","'\"%s\" exceeds the allowed file size.'",142],",",["T_WHITESPACE"," ",142],["T_VARIABLE","$label",142],")",["T_WHITESPACE","\n                ",142],")",";",["T_WHITESPACE","\n            ",143],"}",";",["T_WHITESPACE","\n        ",144],"}",["T_WHITESPACE","\n\n        ",145],["T_RETURN","return",147],["T_WHITESPACE"," ",147],["T_ARRAY","array",147],"(",")",";",["T_WHITESPACE","\n    ",147],"}",["T_WHITESPACE","\n\n    ",148],["T_DOC_COMMENT","\/**\n     * Validate data\n     *\n     * @param array|string $value\n     * @throws Mage_Core_Exception\n     * @return boolean\n     *\/",150],["T_WHITESPACE","\n    ",156],["T_PUBLIC","public",157],["T_WHITESPACE"," ",157],["T_FUNCTION","function",157],["T_WHITESPACE"," ",157],["T_STRING","validateValue",157],"(",["T_VARIABLE","$value",157],")",["T_WHITESPACE","\n    ",157],"{",["T_WHITESPACE","\n        ",158],["T_IF","if",159],["T_WHITESPACE"," ",159],"(",["T_VARIABLE","$this",159],["T_OBJECT_OPERATOR","->",159],["T_STRING","getIsAjaxRequest",159],"(",")",")",["T_WHITESPACE"," ",159],"{",["T_WHITESPACE","\n            ",159],["T_RETURN","return",160],["T_WHITESPACE"," ",160],["T_STRING","true",160],";",["T_WHITESPACE","\n        ",160],"}",["T_WHITESPACE","\n\n        ",161],["T_VARIABLE","$errors",163],["T_WHITESPACE","     ",163],"=",["T_WHITESPACE"," ",163],["T_ARRAY","array",163],"(",")",";",["T_WHITESPACE","\n        ",163],["T_VARIABLE","$attribute",164],["T_WHITESPACE","  ",164],"=",["T_WHITESPACE"," ",164],["T_VARIABLE","$this",164],["T_OBJECT_OPERATOR","->",164],["T_STRING","getAttribute",164],"(",")",";",["T_WHITESPACE","\n        ",164],["T_VARIABLE","$label",165],["T_WHITESPACE","      ",165],"=",["T_WHITESPACE"," ",165],["T_VARIABLE","$attribute",165],["T_OBJECT_OPERATOR","->",165],["T_STRING","getStoreLabel",165],"(",")",";",["T_WHITESPACE","\n\n        ",165],["T_VARIABLE","$toDelete",167],["T_WHITESPACE","   ",167],"=",["T_WHITESPACE"," ",167],"!",["T_EMPTY","empty",167],"(",["T_VARIABLE","$value",167],"[",["T_CONSTANT_ENCAPSED_STRING","'delete'",167],"]",")",["T_WHITESPACE"," ",167],"?",["T_WHITESPACE"," ",167],["T_STRING","true",167],["T_WHITESPACE"," ",167],":",["T_WHITESPACE"," ",167],["T_STRING","false",167],";",["T_WHITESPACE","\n        ",167],["T_VARIABLE","$toUpload",168],["T_WHITESPACE","   ",168],"=",["T_WHITESPACE"," ",168],"!",["T_EMPTY","empty",168],"(",["T_VARIABLE","$value",168],"[",["T_CONSTANT_ENCAPSED_STRING","'tmp_name'",168],"]",")",["T_WHITESPACE"," ",168],"?",["T_WHITESPACE"," ",168],["T_STRING","true",168],["T_WHITESPACE"," ",168],":",["T_WHITESPACE"," ",168],["T_STRING","false",168],";",["T_WHITESPACE","\n\n        ",168],["T_IF","if",170],["T_WHITESPACE"," ",170],"(","!",["T_VARIABLE","$toUpload",170],["T_WHITESPACE"," ",170],["T_BOOLEAN_AND","&&",170],["T_WHITESPACE"," ",170],"!",["T_VARIABLE","$toDelete",170],["T_WHITESPACE"," ",170],["T_BOOLEAN_AND","&&",170],["T_WHITESPACE"," ",170],["T_VARIABLE","$this",170],["T_OBJECT_OPERATOR","->",170],["T_STRING","getEntity",170],"(",")",["T_OBJECT_OPERATOR","->",170],["T_STRING","getData",170],"(",["T_VARIABLE","$attribute",170],["T_OBJECT_OPERATOR","->",170],["T_STRING","getAttributeCode",170],"(",")",")",")",["T_WHITESPACE"," ",170],"{",["T_WHITESPACE","\n            ",170],["T_RETURN","return",171],["T_WHITESPACE"," ",171],["T_STRING","true",171],";",["T_WHITESPACE","\n        ",171],"}",["T_WHITESPACE","\n\n        ",172],["T_IF","if",174],["T_WHITESPACE"," ",174],"(","!",["T_VARIABLE","$attribute",174],["T_OBJECT_OPERATOR","->",174],["T_STRING","getIsRequired",174],"(",")",["T_WHITESPACE"," ",174],["T_BOOLEAN_AND","&&",174],["T_WHITESPACE"," ",174],"!",["T_VARIABLE","$toUpload",174],")",["T_WHITESPACE"," ",174],"{",["T_WHITESPACE","\n            ",174],["T_RETURN","return",175],["T_WHITESPACE"," ",175],["T_STRING","true",175],";",["T_WHITESPACE","\n        ",175],"}",["T_WHITESPACE","\n\n        ",176],["T_IF","if",178],["T_WHITESPACE"," ",178],"(",["T_VARIABLE","$attribute",178],["T_OBJECT_OPERATOR","->",178],["T_STRING","getIsRequired",178],"(",")",["T_WHITESPACE"," ",178],["T_BOOLEAN_AND","&&",178],["T_WHITESPACE"," ",178],"!",["T_VARIABLE","$toUpload",178],")",["T_WHITESPACE"," ",178],"{",["T_WHITESPACE","\n            ",178],["T_VARIABLE","$errors",179],"[","]",["T_WHITESPACE"," ",179],"=",["T_WHITESPACE"," ",179],["T_STRING","Mage",179],["T_DOUBLE_COLON","::",179],["T_STRING","helper",179],"(",["T_CONSTANT_ENCAPSED_STRING","'eav'",179],")",["T_OBJECT_OPERATOR","->",179],["T_STRING","__",179],"(",["T_CONSTANT_ENCAPSED_STRING","'\"%s\" is a required value.'",179],",",["T_WHITESPACE"," ",179],["T_VARIABLE","$label",179],")",";",["T_WHITESPACE","\n        ",179],"}",["T_WHITESPACE","\n\n        ",180],["T_IF","if",182],["T_WHITESPACE"," ",182],"(",["T_VARIABLE","$toUpload",182],")",["T_WHITESPACE"," ",182],"{",["T_WHITESPACE","\n            ",182],["T_VARIABLE","$errors",183],["T_WHITESPACE"," ",183],"=",["T_WHITESPACE"," ",183],["T_STRING","array_merge",183],"(",["T_VARIABLE","$errors",183],",",["T_WHITESPACE"," ",183],["T_VARIABLE","$this",183],["T_OBJECT_OPERATOR","->",183],["T_STRING","_validateByRules",183],"(",["T_VARIABLE","$value",183],")",")",";",["T_WHITESPACE","\n        ",183],"}",["T_WHITESPACE","\n\n        ",184],["T_IF","if",186],["T_WHITESPACE"," ",186],"(",["T_STRING","count",186],"(",["T_VARIABLE","$errors",186],")",["T_WHITESPACE"," ",186],["T_IS_EQUAL","==",186],["T_WHITESPACE"," ",186],["T_LNUMBER","0",186],")",["T_WHITESPACE"," ",186],"{",["T_WHITESPACE","\n            ",186],["T_RETURN","return",187],["T_WHITESPACE"," ",187],["T_STRING","true",187],";",["T_WHITESPACE","\n        ",187],"}",["T_WHITESPACE","\n\n        ",188],["T_RETURN","return",190],["T_WHITESPACE"," ",190],["T_VARIABLE","$errors",190],";",["T_WHITESPACE","\n    ",190],"}",["T_WHITESPACE","\n\n    ",191],["T_DOC_COMMENT","\/**\n     * Export attribute value to entity model\n     *\n     * @param Mage_Core_Model_Abstract $entity\n     * @param array|string $value\n     * @return Mage_Eav_Model_Attribute_Data_File\n     *\/",193],["T_WHITESPACE","\n    ",199],["T_PUBLIC","public",200],["T_WHITESPACE"," ",200],["T_FUNCTION","function",200],["T_WHITESPACE"," ",200],["T_STRING","compactValue",200],"(",["T_VARIABLE","$value",200],")",["T_WHITESPACE","\n    ",200],"{",["T_WHITESPACE","\n        ",201],["T_IF","if",202],["T_WHITESPACE"," ",202],"(",["T_VARIABLE","$this",202],["T_OBJECT_OPERATOR","->",202],["T_STRING","getIsAjaxRequest",202],"(",")",")",["T_WHITESPACE"," ",202],"{",["T_WHITESPACE","\n            ",202],["T_RETURN","return",203],["T_WHITESPACE"," ",203],["T_VARIABLE","$this",203],";",["T_WHITESPACE","\n        ",203],"}",["T_WHITESPACE","\n\n        ",204],["T_VARIABLE","$attribute",206],["T_WHITESPACE"," ",206],"=",["T_WHITESPACE"," ",206],["T_VARIABLE","$this",206],["T_OBJECT_OPERATOR","->",206],["T_STRING","getAttribute",206],"(",")",";",["T_WHITESPACE","\n        ",206],["T_VARIABLE","$original",207],["T_WHITESPACE","  ",207],"=",["T_WHITESPACE"," ",207],["T_VARIABLE","$this",207],["T_OBJECT_OPERATOR","->",207],["T_STRING","getEntity",207],"(",")",["T_OBJECT_OPERATOR","->",207],["T_STRING","getData",207],"(",["T_VARIABLE","$attribute",207],["T_OBJECT_OPERATOR","->",207],["T_STRING","getAttributeCode",207],"(",")",")",";",["T_WHITESPACE","\n        ",207],["T_VARIABLE","$toDelete",208],["T_WHITESPACE","  ",208],"=",["T_WHITESPACE"," ",208],["T_STRING","false",208],";",["T_WHITESPACE","\n        ",208],["T_IF","if",209],["T_WHITESPACE"," ",209],"(",["T_VARIABLE","$original",209],")",["T_WHITESPACE"," ",209],"{",["T_WHITESPACE","\n            ",209],["T_IF","if",210],["T_WHITESPACE"," ",210],"(","!",["T_VARIABLE","$attribute",210],["T_OBJECT_OPERATOR","->",210],["T_STRING","getIsRequired",210],"(",")",["T_WHITESPACE"," ",210],["T_BOOLEAN_AND","&&",210],["T_WHITESPACE"," ",210],"!",["T_EMPTY","empty",210],"(",["T_VARIABLE","$value",210],"[",["T_CONSTANT_ENCAPSED_STRING","'delete'",210],"]",")",")",["T_WHITESPACE"," ",210],"{",["T_WHITESPACE","\n                ",210],["T_VARIABLE","$toDelete",211],["T_WHITESPACE","  ",211],"=",["T_WHITESPACE"," ",211],["T_STRING","true",211],";",["T_WHITESPACE","\n            ",211],"}",["T_WHITESPACE","\n            ",212],["T_IF","if",213],["T_WHITESPACE"," ",213],"(","!",["T_EMPTY","empty",213],"(",["T_VARIABLE","$value",213],"[",["T_CONSTANT_ENCAPSED_STRING","'tmp_name'",213],"]",")",")",["T_WHITESPACE"," ",213],"{",["T_WHITESPACE","\n                ",213],["T_VARIABLE","$toDelete",214],["T_WHITESPACE","  ",214],"=",["T_WHITESPACE"," ",214],["T_STRING","true",214],";",["T_WHITESPACE","\n            ",214],"}",["T_WHITESPACE","\n        ",215],"}",["T_WHITESPACE","\n\n        ",216],["T_VARIABLE","$path",218],["T_WHITESPACE","   ",218],"=",["T_WHITESPACE"," ",218],["T_STRING","Mage",218],["T_DOUBLE_COLON","::",218],["T_STRING","getBaseDir",218],"(",["T_CONSTANT_ENCAPSED_STRING","'media'",218],")",["T_WHITESPACE"," ",218],".",["T_WHITESPACE"," ",218],["T_STRING","DS",218],["T_WHITESPACE"," ",218],".",["T_WHITESPACE"," ",218],["T_VARIABLE","$attribute",218],["T_OBJECT_OPERATOR","->",218],["T_STRING","getEntity",218],"(",")",["T_OBJECT_OPERATOR","->",218],["T_STRING","getEntityTypeCode",218],"(",")",";",["T_WHITESPACE","\n\n        ",218],["T_COMMENT","\/\/ unlink entity file\n",220],["T_WHITESPACE","        ",221],["T_IF","if",221],["T_WHITESPACE"," ",221],"(",["T_VARIABLE","$toDelete",221],")",["T_WHITESPACE"," ",221],"{",["T_WHITESPACE","\n            ",221],["T_VARIABLE","$this",222],["T_OBJECT_OPERATOR","->",222],["T_STRING","getEntity",222],"(",")",["T_OBJECT_OPERATOR","->",222],["T_STRING","setData",222],"(",["T_VARIABLE","$attribute",222],["T_OBJECT_OPERATOR","->",222],["T_STRING","getAttributeCode",222],"(",")",",",["T_WHITESPACE"," ",222],["T_CONSTANT_ENCAPSED_STRING","''",222],")",";",["T_WHITESPACE","\n            ",222],["T_VARIABLE","$file",223],["T_WHITESPACE"," ",223],"=",["T_WHITESPACE"," ",223],["T_VARIABLE","$path",223],["T_WHITESPACE"," ",223],".",["T_WHITESPACE"," ",223],["T_VARIABLE","$original",223],";",["T_WHITESPACE","\n            ",223],["T_VARIABLE","$ioFile",224],["T_WHITESPACE"," ",224],"=",["T_WHITESPACE"," ",224],["T_NEW","new",224],["T_WHITESPACE"," ",224],["T_STRING","Varien_Io_File",224],"(",")",";",["T_WHITESPACE","\n            ",224],["T_IF","if",225],["T_WHITESPACE"," ",225],"(",["T_VARIABLE","$ioFile",225],["T_OBJECT_OPERATOR","->",225],["T_STRING","fileExists",225],"(",["T_VARIABLE","$file",225],")",")",["T_WHITESPACE"," ",225],"{",["T_WHITESPACE","\n                ",225],["T_VARIABLE","$ioFile",226],["T_OBJECT_OPERATOR","->",226],["T_STRING","rm",226],"(",["T_VARIABLE","$file",226],")",";",["T_WHITESPACE","\n            ",226],"}",["T_WHITESPACE","\n        ",227],"}",["T_WHITESPACE","\n\n        ",228],["T_IF","if",230],["T_WHITESPACE"," ",230],"(","!",["T_EMPTY","empty",230],"(",["T_VARIABLE","$value",230],"[",["T_CONSTANT_ENCAPSED_STRING","'tmp_name'",230],"]",")",")",["T_WHITESPACE"," ",230],"{",["T_WHITESPACE","\n            ",230],["T_TRY","try",231],["T_WHITESPACE"," ",231],"{",["T_WHITESPACE","\n                ",231],["T_VARIABLE","$uploader",232],["T_WHITESPACE"," ",232],"=",["T_WHITESPACE"," ",232],["T_NEW","new",232],["T_WHITESPACE"," ",232],["T_STRING","Varien_File_Uploader",232],"(",["T_VARIABLE","$value",232],")",";",["T_WHITESPACE","\n                ",232],["T_VARIABLE","$uploader",233],["T_OBJECT_OPERATOR","->",233],["T_STRING","setFilesDispersion",233],"(",["T_STRING","true",233],")",";",["T_WHITESPACE","\n                ",233],["T_VARIABLE","$uploader",234],["T_OBJECT_OPERATOR","->",234],["T_STRING","setFilenamesCaseSensitivity",234],"(",["T_STRING","false",234],")",";",["T_WHITESPACE","\n                ",234],["T_VARIABLE","$uploader",235],["T_OBJECT_OPERATOR","->",235],["T_STRING","setAllowRenameFiles",235],"(",["T_STRING","true",235],")",";",["T_WHITESPACE","\n                ",235],["T_VARIABLE","$uploader",236],["T_OBJECT_OPERATOR","->",236],["T_STRING","save",236],"(",["T_VARIABLE","$path",236],",",["T_WHITESPACE"," ",236],["T_VARIABLE","$value",236],"[",["T_CONSTANT_ENCAPSED_STRING","'name'",236],"]",")",";",["T_WHITESPACE","\n                ",236],["T_VARIABLE","$fileName",237],["T_WHITESPACE"," ",237],"=",["T_WHITESPACE"," ",237],["T_VARIABLE","$uploader",237],["T_OBJECT_OPERATOR","->",237],["T_STRING","getUploadedFileName",237],"(",")",";",["T_WHITESPACE","\n                ",237],["T_VARIABLE","$this",238],["T_OBJECT_OPERATOR","->",238],["T_STRING","getEntity",238],"(",")",["T_OBJECT_OPERATOR","->",238],["T_STRING","setData",238],"(",["T_VARIABLE","$attribute",238],["T_OBJECT_OPERATOR","->",238],["T_STRING","getAttributeCode",238],"(",")",",",["T_WHITESPACE"," ",238],["T_VARIABLE","$fileName",238],")",";",["T_WHITESPACE","\n            ",238],"}",["T_WHITESPACE"," ",239],["T_CATCH","catch",239],["T_WHITESPACE"," ",239],"(",["T_STRING","Exception",239],["T_WHITESPACE"," ",239],["T_VARIABLE","$e",239],")",["T_WHITESPACE"," ",239],"{",["T_WHITESPACE","\n                ",239],["T_STRING","Mage",240],["T_DOUBLE_COLON","::",240],["T_STRING","logException",240],"(",["T_VARIABLE","$e",240],")",";",["T_WHITESPACE","\n            ",240],"}",["T_WHITESPACE","\n        ",241],"}",["T_WHITESPACE","\n\n        ",242],["T_RETURN","return",244],["T_WHITESPACE"," ",244],["T_VARIABLE","$this",244],";",["T_WHITESPACE","\n    ",244],"}",["T_WHITESPACE","\n\n    ",245],["T_DOC_COMMENT","\/**\n     * Restore attribute value from SESSION to entity model\n     *\n     * @param array|string $value\n     * @return Mage_Eav_Model_Attribute_Data_File\n     *\/",247],["T_WHITESPACE","\n    ",252],["T_PUBLIC","public",253],["T_WHITESPACE"," ",253],["T_FUNCTION","function",253],["T_WHITESPACE"," ",253],["T_STRING","restoreValue",253],"(",["T_VARIABLE","$value",253],")",["T_WHITESPACE","\n    ",253],"{",["T_WHITESPACE","\n        ",254],["T_RETURN","return",255],["T_WHITESPACE"," ",255],["T_VARIABLE","$this",255],";",["T_WHITESPACE","\n    ",255],"}",["T_WHITESPACE","\n\n    ",256],["T_DOC_COMMENT","\/**\n     * Return formated attribute value from entity model\n     *\n     * @return string|array\n     *\/",258],["T_WHITESPACE","\n    ",262],["T_PUBLIC","public",263],["T_WHITESPACE"," ",263],["T_FUNCTION","function",263],["T_WHITESPACE"," ",263],["T_STRING","outputValue",263],"(",["T_VARIABLE","$format",263],["T_WHITESPACE"," ",263],"=",["T_WHITESPACE"," ",263],["T_STRING","Mage_Eav_Model_Attribute_Data",263],["T_DOUBLE_COLON","::",263],["T_STRING","OUTPUT_FORMAT_TEXT",263],")",["T_WHITESPACE","\n    ",263],"{",["T_WHITESPACE","\n        ",264],["T_VARIABLE","$output",265],["T_WHITESPACE"," ",265],"=",["T_WHITESPACE"," ",265],["T_CONSTANT_ENCAPSED_STRING","''",265],";",["T_WHITESPACE","\n        ",265],["T_VARIABLE","$value",266],["T_WHITESPACE","  ",266],"=",["T_WHITESPACE"," ",266],["T_VARIABLE","$this",266],["T_OBJECT_OPERATOR","->",266],["T_STRING","getEntity",266],"(",")",["T_OBJECT_OPERATOR","->",266],["T_STRING","getData",266],"(",["T_VARIABLE","$this",266],["T_OBJECT_OPERATOR","->",266],["T_STRING","getAttribute",266],"(",")",["T_OBJECT_OPERATOR","->",266],["T_STRING","getAttributeCode",266],"(",")",")",";",["T_WHITESPACE","\n        ",266],["T_IF","if",267],["T_WHITESPACE"," ",267],"(",["T_VARIABLE","$value",267],")",["T_WHITESPACE"," ",267],"{",["T_WHITESPACE","\n            ",267],["T_SWITCH","switch",268],["T_WHITESPACE"," ",268],"(",["T_VARIABLE","$format",268],")",["T_WHITESPACE"," ",268],"{",["T_WHITESPACE","\n                ",268],["T_CASE","case",269],["T_WHITESPACE"," ",269],["T_STRING","Mage_Eav_Model_Attribute_Data",269],["T_DOUBLE_COLON","::",269],["T_STRING","OUTPUT_FORMAT_JSON",269],":",["T_WHITESPACE","\n                    ",269],["T_VARIABLE","$output",270],["T_WHITESPACE"," ",270],"=",["T_WHITESPACE"," ",270],["T_ARRAY","array",270],"(",["T_WHITESPACE","\n                        ",270],["T_CONSTANT_ENCAPSED_STRING","'value'",271],["T_WHITESPACE","     ",271],["T_DOUBLE_ARROW","=>",271],["T_WHITESPACE"," ",271],["T_VARIABLE","$value",271],",",["T_WHITESPACE","\n                        ",271],["T_CONSTANT_ENCAPSED_STRING","'url_key'",272],["T_WHITESPACE","   ",272],["T_DOUBLE_ARROW","=>",272],["T_WHITESPACE"," ",272],["T_STRING","Mage",272],["T_DOUBLE_COLON","::",272],["T_STRING","helper",272],"(",["T_CONSTANT_ENCAPSED_STRING","'core'",272],")",["T_OBJECT_OPERATOR","->",272],["T_STRING","urlEncode",272],"(",["T_VARIABLE","$value",272],")",["T_WHITESPACE","\n                    ",272],")",";",["T_WHITESPACE","\n                    ",273],["T_BREAK","break",274],";",["T_WHITESPACE","\n            ",274],"}",["T_WHITESPACE","\n        ",275],"}",["T_WHITESPACE","\n\n        ",276],["T_RETURN","return",278],["T_WHITESPACE"," ",278],["T_VARIABLE","$output",278],";",["T_WHITESPACE","\n    ",278],"}",["T_WHITESPACE","\n",279],"}",["T_WHITESPACE","\n",280]]
[["T_OPEN_TAG","<?php\n",1],["T_DOC_COMMENT","\/**\n * Magento\n *\n * NOTICE OF LICENSE\n *\n * This source file is subject to the Open Software License (OSL 3.0)\n * that is bundled with this package in the file LICENSE.txt.\n * It is also available through the world-wide-web at this URL:\n * http:\/\/opensource.org\/licenses\/osl-3.0.php\n * If you did not receive a copy of the license and are unable to\n * obtain it through the world-wide-web, please send an email\n * to license@magento.com so we can send you a copy immediately.\n *\n * DISCLAIMER\n *\n * Do not edit or add to this file if you wish to upgrade Magento to newer\n * versions in the future. If you wish to customize Magento for your\n * needs please refer to http:\/\/www.magento.com for more information.\n *\n * @category    Mage\n * @package     Mage_Eav\n * @copyright  Copyright (c) 2006-2016 X.commerce, Inc. and affiliates (http:\/\/www.magento.com)\n * @license    http:\/\/opensource.org\/licenses\/osl-3.0.php  Open Software License (OSL 3.0)\n *\/",2],["T_WHITESPACE","\n\n\n",25],["T_DOC_COMMENT","\/**\n * EAV attribute resource model\n *\n * @category    Mage\n * @package     Mage_Eav\n * @author      Magento Core Team <core@magentocommerce.com>\n *\/",28],["T_WHITESPACE","\n",34],["T_CLASS","class",35],["T_WHITESPACE"," ",35],["T_STRING","Mage_Eav_Model_Resource_Entity_Attribute",35],["T_WHITESPACE"," ",35],["T_EXTENDS","extends",35],["T_WHITESPACE"," ",35],["T_STRING","Mage_Core_Model_Resource_Db_Abstract",35],["T_WHITESPACE","\n",35],"{",["T_WHITESPACE","\n    ",36],["T_DOC_COMMENT","\/**\n     * Eav Entity attributes cache\n     *\n     * @var array\n     *\/",37],["T_WHITESPACE","\n    ",41],["T_PROTECTED","protected",42],["T_WHITESPACE"," ",42],["T_STATIC","static",42],["T_WHITESPACE"," ",42],["T_VARIABLE","$_entityAttributes",42],["T_WHITESPACE","     ",42],"=",["T_WHITESPACE"," ",42],["T_ARRAY","array",42],"(",")",";",["T_WHITESPACE","\n\n    ",42],["T_DOC_COMMENT","\/**\n     * Define main table\n     *\n     *\/",44],["T_WHITESPACE","\n    ",47],["T_PROTECTED","protected",48],["T_WHITESPACE"," ",48],["T_FUNCTION","function",48],["T_WHITESPACE"," ",48],["T_STRING","_construct",48],"(",")",["T_WHITESPACE","\n    ",48],"{",["T_WHITESPACE","\n        ",49],["T_VARIABLE","$this",50],["T_OBJECT_OPERATOR","->",50],["T_STRING","_init",50],"(",["T_CONSTANT_ENCAPSED_STRING","'eav\/attribute'",50],",",["T_WHITESPACE"," ",50],["T_CONSTANT_ENCAPSED_STRING","'attribute_id'",50],")",";",["T_WHITESPACE","\n    ",50],"}",["T_WHITESPACE","\n\n    ",51],["T_DOC_COMMENT","\/**\n     * Initialize unique fields\n     *\n     * @return Mage_Eav_Model_Resource_Entity_Attribute\n     *\/",53],["T_WHITESPACE","\n    ",57],["T_PROTECTED","protected",58],["T_WHITESPACE"," ",58],["T_FUNCTION","function",58],["T_WHITESPACE"," ",58],["T_STRING","_initUniqueFields",58],"(",")",["T_WHITESPACE","\n    ",58],"{",["T_WHITESPACE","\n        ",59],["T_VARIABLE","$this",60],["T_OBJECT_OPERATOR","->",60],["T_STRING","_uniqueFields",60],["T_WHITESPACE"," ",60],"=",["T_WHITESPACE"," ",60],["T_ARRAY","array",60],"(",["T_ARRAY","array",60],"(",["T_WHITESPACE","\n            ",60],["T_CONSTANT_ENCAPSED_STRING","'field'",61],["T_WHITESPACE"," ",61],["T_DOUBLE_ARROW","=>",61],["T_WHITESPACE"," ",61],["T_ARRAY","array",61],"(",["T_CONSTANT_ENCAPSED_STRING","'attribute_code'",61],",",["T_WHITESPACE"," ",61],["T_CONSTANT_ENCAPSED_STRING","'entity_type_id'",61],")",",",["T_WHITESPACE","\n            ",61],["T_CONSTANT_ENCAPSED_STRING","'title'",62],["T_WHITESPACE"," ",62],["T_DOUBLE_ARROW","=>",62],["T_WHITESPACE"," ",62],["T_STRING","Mage",62],["T_DOUBLE_COLON","::",62],["T_STRING","helper",62],"(",["T_CONSTANT_ENCAPSED_STRING","'eav'",62],")",["T_OBJECT_OPERATOR","->",62],["T_STRING","__",62],"(",["T_CONSTANT_ENCAPSED_STRING","'Attribute with the same code'",62],")",["T_WHITESPACE","\n        ",62],")",")",";",["T_WHITESPACE","\n        ",63],["T_RETURN","return",64],["T_WHITESPACE"," ",64],["T_VARIABLE","$this",64],";",["T_WHITESPACE","\n    ",64],"}",["T_WHITESPACE","\n\n    ",65],["T_DOC_COMMENT","\/**\n     * Load all entity type attributes\n     *\n     * @param int $entityTypeId\n     * @return Mage_Eav_Model_Resource_Entity_Attribute\n     *\/",67],["T_WHITESPACE","\n    ",72],["T_PROTECTED","protected",73],["T_WHITESPACE"," ",73],["T_FUNCTION","function",73],["T_WHITESPACE"," ",73],["T_STRING","_loadTypeAttributes",73],"(",["T_VARIABLE","$entityTypeId",73],")",["T_WHITESPACE","\n    ",73],"{",["T_WHITESPACE","\n        ",74],["T_IF","if",75],["T_WHITESPACE"," ",75],"(","!",["T_ISSET","isset",75],"(",["T_STRING","self",75],["T_DOUBLE_COLON","::",75],["T_VARIABLE","$_entityAttributes",75],"[",["T_VARIABLE","$entityTypeId",75],"]",")",")",["T_WHITESPACE"," ",75],"{",["T_WHITESPACE","\n            ",75],["T_VARIABLE","$adapter",76],["T_WHITESPACE"," ",76],"=",["T_WHITESPACE"," ",76],["T_VARIABLE","$this",76],["T_OBJECT_OPERATOR","->",76],["T_STRING","_getReadAdapter",76],"(",")",";",["T_WHITESPACE","\n            ",76],["T_VARIABLE","$bind",77],["T_WHITESPACE","    ",77],"=",["T_WHITESPACE"," ",77],["T_ARRAY","array",77],"(",["T_CONSTANT_ENCAPSED_STRING","':entity_type_id'",77],["T_WHITESPACE"," ",77],["T_DOUBLE_ARROW","=>",77],["T_WHITESPACE"," ",77],["T_VARIABLE","$entityTypeId",77],")",";",["T_WHITESPACE","\n            ",77],["T_VARIABLE","$select",78],["T_WHITESPACE","  ",78],"=",["T_WHITESPACE"," ",78],["T_VARIABLE","$adapter",78],["T_OBJECT_OPERATOR","->",78],["T_STRING","select",78],"(",")",["T_WHITESPACE","\n                ",78],["T_OBJECT_OPERATOR","->",79],["T_STRING","from",79],"(",["T_VARIABLE","$this",79],["T_OBJECT_OPERATOR","->",79],["T_STRING","getMainTable",79],"(",")",")",["T_WHITESPACE","\n                ",79],["T_OBJECT_OPERATOR","->",80],["T_STRING","where",80],"(",["T_CONSTANT_ENCAPSED_STRING","'entity_type_id = :entity_type_id'",80],")",";",["T_WHITESPACE","\n\n            ",80],["T_VARIABLE","$data",82],["T_WHITESPACE","    ",82],"=",["T_WHITESPACE"," ",82],["T_VARIABLE","$adapter",82],["T_OBJECT_OPERATOR","->",82],["T_STRING","fetchAll",82],"(",["T_VARIABLE","$select",82],",",["T_WHITESPACE"," ",82],["T_VARIABLE","$bind",82],")",";",["T_WHITESPACE","\n            ",82],["T_FOREACH","foreach",83],["T_WHITESPACE"," ",83],"(",["T_VARIABLE","$data",83],["T_WHITESPACE"," ",83],["T_AS","as",83],["T_WHITESPACE"," ",83],["T_VARIABLE","$row",83],")",["T_WHITESPACE"," ",83],"{",["T_WHITESPACE","\n                ",83],["T_STRING","self",84],["T_DOUBLE_COLON","::",84],["T_VARIABLE","$_entityAttributes",84],"[",["T_VARIABLE","$entityTypeId",84],"]","[",["T_VARIABLE","$row",84],"[",["T_CONSTANT_ENCAPSED_STRING","'attribute_code'",84],"]","]",["T_WHITESPACE"," ",84],"=",["T_WHITESPACE"," ",84],["T_VARIABLE","$row",84],";",["T_WHITESPACE","\n            ",84],"}",["T_WHITESPACE","\n        ",85],"}",["T_WHITESPACE","\n\n        ",86],["T_RETURN","return",88],["T_WHITESPACE"," ",88],["T_VARIABLE","$this",88],";",["T_WHITESPACE","\n    ",88],"}",["T_WHITESPACE","\n\n    ",89],["T_DOC_COMMENT","\/**\n     * Load attribute data by attribute code\n     *\n     * @param Mage_Eav_Model_Entity_Attribute $object\n     * @param int $entityTypeId\n     * @param string $code\n     * @return boolean\n     *\/",91],["T_WHITESPACE","\n    ",98],["T_PUBLIC","public",99],["T_WHITESPACE"," ",99],["T_FUNCTION","function",99],["T_WHITESPACE"," ",99],["T_STRING","loadByCode",99],"(",["T_STRING","Mage_Core_Model_Abstract",99],["T_WHITESPACE"," ",99],["T_VARIABLE","$object",99],",",["T_WHITESPACE"," ",99],["T_VARIABLE","$entityTypeId",99],",",["T_WHITESPACE"," ",99],["T_VARIABLE","$code",99],")",["T_WHITESPACE","\n    ",99],"{",["T_WHITESPACE","\n        ",100],["T_VARIABLE","$bind",101],["T_WHITESPACE","   ",101],"=",["T_WHITESPACE"," ",101],["T_ARRAY","array",101],"(",["T_CONSTANT_ENCAPSED_STRING","':entity_type_id'",101],["T_WHITESPACE"," ",101],["T_DOUBLE_ARROW","=>",101],["T_WHITESPACE"," ",101],["T_VARIABLE","$entityTypeId",101],")",";",["T_WHITESPACE","\n        ",101],["T_VARIABLE","$select",102],["T_WHITESPACE"," ",102],"=",["T_WHITESPACE"," ",102],["T_VARIABLE","$this",102],["T_OBJECT_OPERATOR","->",102],["T_STRING","_getLoadSelect",102],"(",["T_CONSTANT_ENCAPSED_STRING","'attribute_code'",102],",",["T_WHITESPACE"," ",102],["T_VARIABLE","$code",102],",",["T_WHITESPACE"," ",102],["T_VARIABLE","$object",102],")",["T_WHITESPACE","\n            ",102],["T_OBJECT_OPERATOR","->",103],["T_STRING","where",103],"(",["T_CONSTANT_ENCAPSED_STRING","'entity_type_id = :entity_type_id'",103],")",";",["T_WHITESPACE","\n        ",103],["T_VARIABLE","$data",104],["T_WHITESPACE"," ",104],"=",["T_WHITESPACE"," ",104],["T_VARIABLE","$this",104],["T_OBJECT_OPERATOR","->",104],["T_STRING","_getReadAdapter",104],"(",")",["T_OBJECT_OPERATOR","->",104],["T_STRING","fetchRow",104],"(",["T_VARIABLE","$select",104],",",["T_WHITESPACE"," ",104],["T_VARIABLE","$bind",104],")",";",["T_WHITESPACE","\n\n        ",104],["T_IF","if",106],["T_WHITESPACE"," ",106],"(",["T_VARIABLE","$data",106],")",["T_WHITESPACE"," ",106],"{",["T_WHITESPACE","\n            ",106],["T_VARIABLE","$object",107],["T_OBJECT_OPERATOR","->",107],["T_STRING","setData",107],"(",["T_VARIABLE","$data",107],")",";",["T_WHITESPACE","\n            ",107],["T_VARIABLE","$this",108],["T_OBJECT_OPERATOR","->",108],["T_STRING","_afterLoad",108],"(",["T_VARIABLE","$object",108],")",";",["T_WHITESPACE","\n            ",108],["T_RETURN","return",109],["T_WHITESPACE"," ",109],["T_STRING","true",109],";",["T_WHITESPACE","\n        ",109],"}",["T_WHITESPACE","\n        ",110],["T_RETURN","return",111],["T_WHITESPACE"," ",111],["T_STRING","false",111],";",["T_WHITESPACE","\n    ",111],"}",["T_WHITESPACE","\n\n    ",112],["T_DOC_COMMENT","\/**\n     * Retrieve Max Sort order for attribute in group\n     *\n     * @param Mage_Core_Model_Abstract $object\n     * @return int\n     *\/",114],["T_WHITESPACE","\n    ",119],["T_PRIVATE","private",120],["T_WHITESPACE"," ",120],["T_FUNCTION","function",120],["T_WHITESPACE"," ",120],["T_STRING","_getMaxSortOrder",120],"(",["T_STRING","Mage_Core_Model_Abstract",120],["T_WHITESPACE"," ",120],["T_VARIABLE","$object",120],")",["T_WHITESPACE","\n    ",120],"{",["T_WHITESPACE","\n        ",121],["T_IF","if",122],["T_WHITESPACE"," ",122],"(",["T_STRING","intval",122],"(",["T_VARIABLE","$object",122],["T_OBJECT_OPERATOR","->",122],["T_STRING","getAttributeGroupId",122],"(",")",")",["T_WHITESPACE"," ",122],">",["T_WHITESPACE"," ",122],["T_LNUMBER","0",122],")",["T_WHITESPACE"," ",122],"{",["T_WHITESPACE","\n            ",122],["T_VARIABLE","$adapter",123],["T_WHITESPACE"," ",123],"=",["T_WHITESPACE"," ",123],["T_VARIABLE","$this",123],["T_OBJECT_OPERATOR","->",123],["T_STRING","_getReadAdapter",123],"(",")",";",["T_WHITESPACE","\n            ",123],["T_VARIABLE","$bind",124],["T_WHITESPACE"," ",124],"=",["T_WHITESPACE"," ",124],["T_ARRAY","array",124],"(",["T_WHITESPACE","\n                ",124],["T_CONSTANT_ENCAPSED_STRING","':attribute_set_id'",125],["T_WHITESPACE","   ",125],["T_DOUBLE_ARROW","=>",125],["T_WHITESPACE"," ",125],["T_VARIABLE","$object",125],["T_OBJECT_OPERATOR","->",125],["T_STRING","getAttributeSetId",125],"(",")",",",["T_WHITESPACE","\n                ",125],["T_CONSTANT_ENCAPSED_STRING","':attribute_group_id'",126],["T_WHITESPACE"," ",126],["T_DOUBLE_ARROW","=>",126],["T_WHITESPACE"," ",126],["T_VARIABLE","$object",126],["T_OBJECT_OPERATOR","->",126],["T_STRING","getAttributeGroupId",126],"(",")",["T_WHITESPACE","\n            ",126],")",";",["T_WHITESPACE","\n            ",127],["T_VARIABLE","$select",128],["T_WHITESPACE"," ",128],"=",["T_WHITESPACE"," ",128],["T_VARIABLE","$adapter",128],["T_OBJECT_OPERATOR","->",128],["T_STRING","select",128],"(",")",["T_WHITESPACE","\n                ",128],["T_OBJECT_OPERATOR","->",129],["T_STRING","from",129],"(",["T_VARIABLE","$this",129],["T_OBJECT_OPERATOR","->",129],["T_STRING","getTable",129],"(",["T_CONSTANT_ENCAPSED_STRING","'eav\/entity_attribute'",129],")",",",["T_WHITESPACE"," ",129],["T_NEW","new",129],["T_WHITESPACE"," ",129],["T_STRING","Zend_Db_Expr",129],"(",["T_CONSTANT_ENCAPSED_STRING","\"MAX(sort_order)\"",129],")",")",["T_WHITESPACE","\n                ",129],["T_OBJECT_OPERATOR","->",130],["T_STRING","where",130],"(",["T_CONSTANT_ENCAPSED_STRING","'attribute_set_id = :attribute_set_id'",130],")",["T_WHITESPACE","\n                ",130],["T_OBJECT_OPERATOR","->",131],["T_STRING","where",131],"(",["T_CONSTANT_ENCAPSED_STRING","'attribute_group_id = :attribute_group_id'",131],")",";",["T_WHITESPACE","\n\n            ",131],["T_RETURN","return",133],["T_WHITESPACE"," ",133],["T_VARIABLE","$adapter",133],["T_OBJECT_OPERATOR","->",133],["T_STRING","fetchOne",133],"(",["T_VARIABLE","$select",133],",",["T_WHITESPACE"," ",133],["T_VARIABLE","$bind",133],")",";",["T_WHITESPACE","\n        ",133],"}",["T_WHITESPACE","\n\n        ",134],["T_RETURN","return",136],["T_WHITESPACE"," ",136],["T_LNUMBER","0",136],";",["T_WHITESPACE","\n    ",136],"}",["T_WHITESPACE","\n\n    ",137],["T_DOC_COMMENT","\/**\n     * Delete entity\n     *\n     * @param Mage_Core_Model_Abstract $object\n     * @return Mage_Eav_Model_Resource_Entity_Attribute\n     *\/",139],["T_WHITESPACE","\n    ",144],["T_PUBLIC","public",145],["T_WHITESPACE"," ",145],["T_FUNCTION","function",145],["T_WHITESPACE"," ",145],["T_STRING","deleteEntity",145],"(",["T_STRING","Mage_Core_Model_Abstract",145],["T_WHITESPACE"," ",145],["T_VARIABLE","$object",145],")",["T_WHITESPACE","\n    ",145],"{",["T_WHITESPACE","\n        ",146],["T_IF","if",147],["T_WHITESPACE"," ",147],"(","!",["T_VARIABLE","$object",147],["T_OBJECT_OPERATOR","->",147],["T_STRING","getEntityAttributeId",147],"(",")",")",["T_WHITESPACE"," ",147],"{",["T_WHITESPACE","\n            ",147],["T_RETURN","return",148],["T_WHITESPACE"," ",148],["T_VARIABLE","$this",148],";",["T_WHITESPACE","\n        ",148],"}",["T_WHITESPACE","\n\n        ",149],["T_VARIABLE","$this",151],["T_OBJECT_OPERATOR","->",151],["T_STRING","_getWriteAdapter",151],"(",")",["T_OBJECT_OPERATOR","->",151],["T_STRING","delete",151],"(",["T_VARIABLE","$this",151],["T_OBJECT_OPERATOR","->",151],["T_STRING","getTable",151],"(",["T_CONSTANT_ENCAPSED_STRING","'eav\/entity_attribute'",151],")",",",["T_WHITESPACE"," ",151],["T_ARRAY","array",151],"(",["T_WHITESPACE","\n            ",151],["T_CONSTANT_ENCAPSED_STRING","'entity_attribute_id = ?'",152],["T_WHITESPACE"," ",152],["T_DOUBLE_ARROW","=>",152],["T_WHITESPACE"," ",152],["T_VARIABLE","$object",152],["T_OBJECT_OPERATOR","->",152],["T_STRING","getEntityAttributeId",152],"(",")",["T_WHITESPACE","\n        ",152],")",")",";",["T_WHITESPACE","\n\n        ",153],["T_RETURN","return",155],["T_WHITESPACE"," ",155],["T_VARIABLE","$this",155],";",["T_WHITESPACE","\n    ",155],"}",["T_WHITESPACE","\n\n    ",156],["T_DOC_COMMENT","\/**\n     * Validate attribute data before save\n     *\n     * @param Mage_Eav_Model_Entity_Attribute $object\n     * @return Mage_Eav_Model_Resource_Entity_Attribute\n     *\/",158],["T_WHITESPACE","\n    ",163],["T_PROTECTED","protected",164],["T_WHITESPACE"," ",164],["T_FUNCTION","function",164],["T_WHITESPACE"," ",164],["T_STRING","_beforeSave",164],"(",["T_STRING","Mage_Core_Model_Abstract",164],["T_WHITESPACE"," ",164],["T_VARIABLE","$object",164],")",["T_WHITESPACE","\n    ",164],"{",["T_WHITESPACE","\n        ",165],["T_VARIABLE","$frontendLabel",166],["T_WHITESPACE"," ",166],"=",["T_WHITESPACE"," ",166],["T_VARIABLE","$object",166],["T_OBJECT_OPERATOR","->",166],["T_STRING","getFrontendLabel",166],"(",")",";",["T_WHITESPACE","\n        ",166],["T_IF","if",167],["T_WHITESPACE"," ",167],"(",["T_STRING","is_array",167],"(",["T_VARIABLE","$frontendLabel",167],")",")",["T_WHITESPACE"," ",167],"{",["T_WHITESPACE","\n            ",167],["T_IF","if",168],["T_WHITESPACE"," ",168],"(","!",["T_ISSET","isset",168],"(",["T_VARIABLE","$frontendLabel",168],"[",["T_LNUMBER","0",168],"]",")",["T_WHITESPACE"," ",168],["T_BOOLEAN_OR","||",168],["T_WHITESPACE"," ",168],["T_STRING","is_null",168],"(",["T_VARIABLE","$frontendLabel",168],"[",["T_LNUMBER","0",168],"]",")",["T_WHITESPACE"," ",168],["T_BOOLEAN_OR","||",168],["T_WHITESPACE"," ",168],["T_VARIABLE","$frontendLabel",168],"[",["T_LNUMBER","0",168],"]",["T_WHITESPACE"," ",168],["T_IS_EQUAL","==",168],["T_WHITESPACE"," ",168],["T_CONSTANT_ENCAPSED_STRING","''",168],")",["T_WHITESPACE"," ",168],"{",["T_WHITESPACE","\n                ",168],["T_STRING","Mage",169],["T_DOUBLE_COLON","::",169],["T_STRING","throwException",169],"(",["T_STRING","Mage",169],["T_DOUBLE_COLON","::",169],["T_STRING","helper",169],"(",["T_CONSTANT_ENCAPSED_STRING","'eav'",169],")",["T_OBJECT_OPERATOR","->",169],["T_STRING","__",169],"(",["T_CONSTANT_ENCAPSED_STRING","'Frontend label is not defined'",169],")",")",";",["T_WHITESPACE","\n            ",169],"}",["T_WHITESPACE","\n            ",170],["T_VARIABLE","$object",171],["T_OBJECT_OPERATOR","->",171],["T_STRING","setFrontendLabel",171],"(",["T_VARIABLE","$frontendLabel",171],"[",["T_LNUMBER","0",171],"]",")",["T_WHITESPACE","\n                   ",171],["T_OBJECT_OPERATOR","->",172],["T_STRING","setStoreLabels",172],"(",["T_VARIABLE","$frontendLabel",172],")",";",["T_WHITESPACE","\n        ",172],"}",["T_WHITESPACE","\n\n        ",173],["T_DOC_COMMENT","\/**\n         * @todo need use default source model of entity type !!!\n         *\/",175],["T_WHITESPACE","\n        ",177],["T_IF","if",178],["T_WHITESPACE"," ",178],"(","!",["T_VARIABLE","$object",178],["T_OBJECT_OPERATOR","->",178],["T_STRING","getId",178],"(",")",")",["T_WHITESPACE"," ",178],"{",["T_WHITESPACE","\n            ",178],["T_IF","if",179],["T_WHITESPACE"," ",179],"(",["T_VARIABLE","$object",179],["T_OBJECT_OPERATOR","->",179],["T_STRING","getFrontendInput",179],"(",")",["T_WHITESPACE"," ",179],["T_IS_EQUAL","==",179],["T_WHITESPACE"," ",179],["T_CONSTANT_ENCAPSED_STRING","'select'",179],")",["T_WHITESPACE"," ",179],"{",["T_WHITESPACE","\n                ",179],["T_VARIABLE","$object",180],["T_OBJECT_OPERATOR","->",180],["T_STRING","setSourceModel",180],"(",["T_CONSTANT_ENCAPSED_STRING","'eav\/entity_attribute_source_table'",180],")",";",["T_WHITESPACE","\n            ",180],"}",["T_WHITESPACE","\n        ",181],"}",["T_WHITESPACE","\n\n        ",182],["T_RETURN","return",184],["T_WHITESPACE"," ",184],["T_STRING","parent",184],["T_DOUBLE_COLON","::",184],["T_STRING","_beforeSave",184],"(",["T_VARIABLE","$object",184],")",";",["T_WHITESPACE","\n    ",184],"}",["T_WHITESPACE","\n\n    ",185],["T_DOC_COMMENT","\/**\n     * Save additional attribute data after save attribute\n     *\n     * @param Mage_Eav_Model_Entity_Attribute $object\n     * @return Mage_Eav_Model_Resource_Entity_Attribute\n     *\/",187],["T_WHITESPACE","\n    ",192],["T_PROTECTED","protected",193],["T_WHITESPACE"," ",193],["T_FUNCTION","function",193],["T_WHITESPACE"," ",193],["T_STRING","_afterSave",193],"(",["T_STRING","Mage_Core_Model_Abstract",193],["T_WHITESPACE"," ",193],["T_VARIABLE","$object",193],")",["T_WHITESPACE","\n    ",193],"{",["T_WHITESPACE","\n        ",194],["T_VARIABLE","$this",195],["T_OBJECT_OPERATOR","->",195],["T_STRING","_saveStoreLabels",195],"(",["T_VARIABLE","$object",195],")",["T_WHITESPACE","\n             ",195],["T_OBJECT_OPERATOR","->",196],["T_STRING","_saveAdditionalAttributeData",196],"(",["T_VARIABLE","$object",196],")",["T_WHITESPACE","\n             ",196],["T_OBJECT_OPERATOR","->",197],["T_STRING","saveInSetIncluding",197],"(",["T_VARIABLE","$object",197],")",["T_WHITESPACE","\n             ",197],["T_OBJECT_OPERATOR","->",198],["T_STRING","_saveOption",198],"(",["T_VARIABLE","$object",198],")",";",["T_WHITESPACE","\n\n        ",198],["T_RETURN","return",200],["T_WHITESPACE"," ",200],["T_STRING","parent",200],["T_DOUBLE_COLON","::",200],["T_STRING","_afterSave",200],"(",["T_VARIABLE","$object",200],")",";",["T_WHITESPACE","\n    ",200],"}",["T_WHITESPACE","\n\n    ",201],["T_DOC_COMMENT","\/**\n     * Save store labels\n     *\n     * @param Mage_Eav_Model_Entity_Attribute $object\n     * @return Mage_Eav_Model_Resource_Entity_Attribute\n     *\/",203],["T_WHITESPACE","\n    ",208],["T_PROTECTED","protected",209],["T_WHITESPACE"," ",209],["T_FUNCTION","function",209],["T_WHITESPACE"," ",209],["T_STRING","_saveStoreLabels",209],"(",["T_STRING","Mage_Core_Model_Abstract",209],["T_WHITESPACE"," ",209],["T_VARIABLE","$object",209],")",["T_WHITESPACE","\n    ",209],"{",["T_WHITESPACE","\n        ",210],["T_VARIABLE","$storeLabels",211],["T_WHITESPACE"," ",211],"=",["T_WHITESPACE"," ",211],["T_VARIABLE","$object",211],["T_OBJECT_OPERATOR","->",211],["T_STRING","getStoreLabels",211],"(",")",";",["T_WHITESPACE","\n        ",211],["T_IF","if",212],["T_WHITESPACE"," ",212],"(",["T_STRING","is_array",212],"(",["T_VARIABLE","$storeLabels",212],")",")",["T_WHITESPACE"," ",212],"{",["T_WHITESPACE","\n            ",212],["T_VARIABLE","$adapter",213],["T_WHITESPACE"," ",213],"=",["T_WHITESPACE"," ",213],["T_VARIABLE","$this",213],["T_OBJECT_OPERATOR","->",213],["T_STRING","_getWriteAdapter",213],"(",")",";",["T_WHITESPACE","\n            ",213],["T_IF","if",214],["T_WHITESPACE"," ",214],"(",["T_VARIABLE","$object",214],["T_OBJECT_OPERATOR","->",214],["T_STRING","getId",214],"(",")",")",["T_WHITESPACE"," ",214],"{",["T_WHITESPACE","\n                ",214],["T_VARIABLE","$condition",215],["T_WHITESPACE"," ",215],"=",["T_WHITESPACE"," ",215],["T_ARRAY","array",215],"(",["T_CONSTANT_ENCAPSED_STRING","'attribute_id =?'",215],["T_WHITESPACE"," ",215],["T_DOUBLE_ARROW","=>",215],["T_WHITESPACE"," ",215],["T_VARIABLE","$object",215],["T_OBJECT_OPERATOR","->",215],["T_STRING","getId",215],"(",")",")",";",["T_WHITESPACE","\n                ",215],["T_VARIABLE","$adapter",216],["T_OBJECT_OPERATOR","->",216],["T_STRING","delete",216],"(",["T_VARIABLE","$this",216],["T_OBJECT_OPERATOR","->",216],["T_STRING","getTable",216],"(",["T_CONSTANT_ENCAPSED_STRING","'eav\/attribute_label'",216],")",",",["T_WHITESPACE"," ",216],["T_VARIABLE","$condition",216],")",";",["T_WHITESPACE","\n            ",216],"}",["T_WHITESPACE","\n            ",217],["T_FOREACH","foreach",218],["T_WHITESPACE"," ",218],"(",["T_VARIABLE","$storeLabels",218],["T_WHITESPACE"," ",218],["T_AS","as",218],["T_WHITESPACE"," ",218],["T_VARIABLE","$storeId",218],["T_WHITESPACE"," ",218],["T_DOUBLE_ARROW","=>",218],["T_WHITESPACE"," ",218],["T_VARIABLE","$label",218],")",["T_WHITESPACE"," ",218],"{",["T_WHITESPACE","\n                ",218],["T_IF","if",219],["T_WHITESPACE"," ",219],"(",["T_VARIABLE","$storeId",219],["T_WHITESPACE"," ",219],["T_IS_EQUAL","==",219],["T_WHITESPACE"," ",219],["T_LNUMBER","0",219],["T_WHITESPACE"," ",219],["T_BOOLEAN_OR","||",219],["T_WHITESPACE"," ",219],"!",["T_STRING","strlen",219],"(",["T_VARIABLE","$label",219],")",")",["T_WHITESPACE"," ",219],"{",["T_WHITESPACE","\n                    ",219],["T_CONTINUE","continue",220],";",["T_WHITESPACE","\n                ",220],"}",["T_WHITESPACE","\n                ",221],["T_VARIABLE","$bind",222],["T_WHITESPACE"," ",222],"=",["T_WHITESPACE"," ",222],["T_ARRAY","array",222],["T_WHITESPACE"," ",222],"(",["T_WHITESPACE","\n                    ",222],["T_CONSTANT_ENCAPSED_STRING","'attribute_id'",223],["T_WHITESPACE"," ",223],["T_DOUBLE_ARROW","=>",223],["T_WHITESPACE"," ",223],["T_VARIABLE","$object",223],["T_OBJECT_OPERATOR","->",223],["T_STRING","getId",223],"(",")",",",["T_WHITESPACE","\n                    ",223],["T_CONSTANT_ENCAPSED_STRING","'store_id'",224],["T_WHITESPACE","     ",224],["T_DOUBLE_ARROW","=>",224],["T_WHITESPACE"," ",224],["T_VARIABLE","$storeId",224],",",["T_WHITESPACE","\n                    ",224],["T_CONSTANT_ENCAPSED_STRING","'value'",225],["T_WHITESPACE","        ",225],["T_DOUBLE_ARROW","=>",225],["T_WHITESPACE"," ",225],["T_VARIABLE","$label",225],["T_WHITESPACE","\n                ",225],")",";",["T_WHITESPACE","\n                ",226],["T_VARIABLE","$adapter",227],["T_OBJECT_OPERATOR","->",227],["T_STRING","insert",227],"(",["T_VARIABLE","$this",227],["T_OBJECT_OPERATOR","->",227],["T_STRING","getTable",227],"(",["T_CONSTANT_ENCAPSED_STRING","'eav\/attribute_label'",227],")",",",["T_WHITESPACE"," ",227],["T_VARIABLE","$bind",227],")",";",["T_WHITESPACE","\n            ",227],"}",["T_WHITESPACE","\n        ",228],"}",["T_WHITESPACE","\n\n        ",229],["T_RETURN","return",231],["T_WHITESPACE"," ",231],["T_VARIABLE","$this",231],";",["T_WHITESPACE","\n    ",231],"}",["T_WHITESPACE","\n\n    ",232],["T_DOC_COMMENT","\/**\n     * Save additional data of attribute\n     *\n     * @param Mage_Eav_Model_Entity_Attribute $object\n     * @return Mage_Eav_Model_Resource_Entity_Attribute\n     *\/",234],["T_WHITESPACE","\n    ",239],["T_PROTECTED","protected",240],["T_WHITESPACE"," ",240],["T_FUNCTION","function",240],["T_WHITESPACE"," ",240],["T_STRING","_saveAdditionalAttributeData",240],"(",["T_STRING","Mage_Core_Model_Abstract",240],["T_WHITESPACE"," ",240],["T_VARIABLE","$object",240],")",["T_WHITESPACE","\n    ",240],"{",["T_WHITESPACE","\n        ",241],["T_VARIABLE","$additionalTable",242],["T_WHITESPACE"," ",242],"=",["T_WHITESPACE"," ",242],["T_VARIABLE","$this",242],["T_OBJECT_OPERATOR","->",242],["T_STRING","getAdditionalAttributeTable",242],"(",["T_VARIABLE","$object",242],["T_OBJECT_OPERATOR","->",242],["T_STRING","getEntityTypeId",242],"(",")",")",";",["T_WHITESPACE","\n        ",242],["T_IF","if",243],["T_WHITESPACE"," ",243],"(",["T_VARIABLE","$additionalTable",243],")",["T_WHITESPACE"," ",243],"{",["T_WHITESPACE","\n            ",243],["T_VARIABLE","$adapter",244],["T_WHITESPACE","    ",244],"=",["T_WHITESPACE"," ",244],["T_VARIABLE","$this",244],["T_OBJECT_OPERATOR","->",244],["T_STRING","_getWriteAdapter",244],"(",")",";",["T_WHITESPACE","\n            ",244],["T_VARIABLE","$data",245],["T_WHITESPACE","       ",245],"=",["T_WHITESPACE"," ",245],["T_VARIABLE","$this",245],["T_OBJECT_OPERATOR","->",245],["T_STRING","_prepareDataForTable",245],"(",["T_VARIABLE","$object",245],",",["T_WHITESPACE"," ",245],["T_VARIABLE","$this",245],["T_OBJECT_OPERATOR","->",245],["T_STRING","getTable",245],"(",["T_VARIABLE","$additionalTable",245],")",")",";",["T_WHITESPACE","\n            ",245],["T_VARIABLE","$bind",246],["T_WHITESPACE","       ",246],"=",["T_WHITESPACE"," ",246],["T_ARRAY","array",246],"(",["T_CONSTANT_ENCAPSED_STRING","':attribute_id'",246],["T_WHITESPACE"," ",246],["T_DOUBLE_ARROW","=>",246],["T_WHITESPACE"," ",246],["T_VARIABLE","$object",246],["T_OBJECT_OPERATOR","->",246],["T_STRING","getId",246],"(",")",")",";",["T_WHITESPACE","\n            ",246],["T_VARIABLE","$select",247],["T_WHITESPACE","     ",247],"=",["T_WHITESPACE"," ",247],["T_VARIABLE","$adapter",247],["T_OBJECT_OPERATOR","->",247],["T_STRING","select",247],"(",")",["T_WHITESPACE","\n                ",247],["T_OBJECT_OPERATOR","->",248],["T_STRING","from",248],"(",["T_VARIABLE","$this",248],["T_OBJECT_OPERATOR","->",248],["T_STRING","getTable",248],"(",["T_VARIABLE","$additionalTable",248],")",",",["T_WHITESPACE"," ",248],["T_ARRAY","array",248],"(",["T_CONSTANT_ENCAPSED_STRING","'attribute_id'",248],")",")",["T_WHITESPACE","\n                ",248],["T_OBJECT_OPERATOR","->",249],["T_STRING","where",249],"(",["T_CONSTANT_ENCAPSED_STRING","'attribute_id = :attribute_id'",249],")",";",["T_WHITESPACE","\n            ",249],["T_VARIABLE","$result",250],["T_WHITESPACE","     ",250],"=",["T_WHITESPACE"," ",250],["T_VARIABLE","$adapter",250],["T_OBJECT_OPERATOR","->",250],["T_STRING","fetchOne",250],"(",["T_VARIABLE","$select",250],",",["T_WHITESPACE"," ",250],["T_VARIABLE","$bind",250],")",";",["T_WHITESPACE","\n            ",250],["T_IF","if",251],["T_WHITESPACE"," ",251],"(",["T_VARIABLE","$result",251],")",["T_WHITESPACE"," ",251],"{",["T_WHITESPACE","\n                ",251],["T_VARIABLE","$where",252],["T_WHITESPACE","  ",252],"=",["T_WHITESPACE"," ",252],["T_ARRAY","array",252],"(",["T_CONSTANT_ENCAPSED_STRING","'attribute_id = ?'",252],["T_WHITESPACE"," ",252],["T_DOUBLE_ARROW","=>",252],["T_WHITESPACE"," ",252],["T_VARIABLE","$object",252],["T_OBJECT_OPERATOR","->",252],["T_STRING","getId",252],"(",")",")",";",["T_WHITESPACE","\n                ",252],["T_VARIABLE","$adapter",253],["T_OBJECT_OPERATOR","->",253],["T_STRING","update",253],"(",["T_VARIABLE","$this",253],["T_OBJECT_OPERATOR","->",253],["T_STRING","getTable",253],"(",["T_VARIABLE","$additionalTable",253],")",",",["T_WHITESPACE"," ",253],["T_VARIABLE","$data",253],",",["T_WHITESPACE"," ",253],["T_VARIABLE","$where",253],")",";",["T_WHITESPACE","\n            ",253],"}",["T_WHITESPACE"," ",254],["T_ELSE","else",254],["T_WHITESPACE"," ",254],"{",["T_WHITESPACE","\n                ",254],["T_VARIABLE","$adapter",255],["T_OBJECT_OPERATOR","->",255],["T_STRING","insert",255],"(",["T_VARIABLE","$this",255],["T_OBJECT_OPERATOR","->",255],["T_STRING","getTable",255],"(",["T_VARIABLE","$additionalTable",255],")",",",["T_WHITESPACE"," ",255],["T_VARIABLE","$data",255],")",";",["T_WHITESPACE","\n            ",255],"}",["T_WHITESPACE","\n        ",256],"}",["T_WHITESPACE","\n\n        ",257],["T_RETURN","return",259],["T_WHITESPACE"," ",259],["T_VARIABLE","$this",259],";",["T_WHITESPACE","\n    ",259],"}",["T_WHITESPACE","\n\n    ",260],["T_DOC_COMMENT","\/**\n     * Save in set including\n     *\n     * @param Mage_Core_Model_Abstract $object\n     * @return Mage_Eav_Model_Resource_Entity_Attribute\n     *\/",262],["T_WHITESPACE","\n    ",267],["T_PUBLIC","public",268],["T_WHITESPACE"," ",268],["T_FUNCTION","function",268],["T_WHITESPACE"," ",268],["T_STRING","saveInSetIncluding",268],"(",["T_STRING","Mage_Core_Model_Abstract",268],["T_WHITESPACE"," ",268],["T_VARIABLE","$object",268],")",["T_WHITESPACE","\n    ",268],"{",["T_WHITESPACE","\n        ",269],["T_VARIABLE","$attributeId",270],["T_WHITESPACE"," ",270],"=",["T_WHITESPACE"," ",270],["T_INT_CAST","(int)",270],["T_WHITESPACE"," ",270],["T_VARIABLE","$object",270],["T_OBJECT_OPERATOR","->",270],["T_STRING","getId",270],"(",")",";",["T_WHITESPACE","\n        ",270],["T_VARIABLE","$setId",271],["T_WHITESPACE","       ",271],"=",["T_WHITESPACE"," ",271],["T_INT_CAST","(int)",271],["T_WHITESPACE"," ",271],["T_VARIABLE","$object",271],["T_OBJECT_OPERATOR","->",271],["T_STRING","getAttributeSetId",271],"(",")",";",["T_WHITESPACE","\n        ",271],["T_VARIABLE","$groupId",272],["T_WHITESPACE","     ",272],"=",["T_WHITESPACE"," ",272],["T_INT_CAST","(int)",272],["T_WHITESPACE"," ",272],["T_VARIABLE","$object",272],["T_OBJECT_OPERATOR","->",272],["T_STRING","getAttributeGroupId",272],"(",")",";",["T_WHITESPACE","\n\n        ",272],["T_IF","if",274],["T_WHITESPACE"," ",274],"(",["T_VARIABLE","$setId",274],["T_WHITESPACE"," ",274],["T_BOOLEAN_AND","&&",274],["T_WHITESPACE"," ",274],["T_VARIABLE","$groupId",274],["T_WHITESPACE"," ",274],["T_BOOLEAN_AND","&&",274],["T_WHITESPACE"," ",274],["T_VARIABLE","$object",274],["T_OBJECT_OPERATOR","->",274],["T_STRING","getEntityTypeId",274],"(",")",")",["T_WHITESPACE"," ",274],"{",["T_WHITESPACE","\n            ",274],["T_VARIABLE","$adapter",275],["T_WHITESPACE"," ",275],"=",["T_WHITESPACE"," ",275],["T_VARIABLE","$this",275],["T_OBJECT_OPERATOR","->",275],["T_STRING","_getWriteAdapter",275],"(",")",";",["T_WHITESPACE","\n            ",275],["T_VARIABLE","$table",276],["T_WHITESPACE","   ",276],"=",["T_WHITESPACE"," ",276],["T_VARIABLE","$this",276],["T_OBJECT_OPERATOR","->",276],["T_STRING","getTable",276],"(",["T_CONSTANT_ENCAPSED_STRING","'eav\/entity_attribute'",276],")",";",["T_WHITESPACE","\n\n            ",276],["T_VARIABLE","$sortOrder",278],["T_WHITESPACE"," ",278],"=",["T_WHITESPACE"," ",278],"(","(",["T_VARIABLE","$object",278],["T_OBJECT_OPERATOR","->",278],["T_STRING","getSortOrder",278],"(",")",")",["T_WHITESPACE"," ",278],"?",["T_WHITESPACE"," ",278],["T_VARIABLE","$object",278],["T_OBJECT_OPERATOR","->",278],["T_STRING","getSortOrder",278],"(",")",["T_WHITESPACE"," ",278],":",["T_WHITESPACE"," ",278],["T_VARIABLE","$this",278],["T_OBJECT_OPERATOR","->",278],["T_STRING","_getMaxSortOrder",278],"(",["T_VARIABLE","$object",278],")",["T_WHITESPACE"," ",278],"+",["T_WHITESPACE"," ",278],["T_LNUMBER","1",278],")",";",["T_WHITESPACE","\n            ",278],["T_VARIABLE","$data",279],["T_WHITESPACE"," ",279],"=",["T_WHITESPACE"," ",279],["T_ARRAY","array",279],"(",["T_WHITESPACE","\n                ",279],["T_CONSTANT_ENCAPSED_STRING","'entity_type_id'",280],["T_WHITESPACE","     ",280],["T_DOUBLE_ARROW","=>",280],["T_WHITESPACE"," ",280],["T_VARIABLE","$object",280],["T_OBJECT_OPERATOR","->",280],["T_STRING","getEntityTypeId",280],"(",")",",",["T_WHITESPACE","\n                ",280],["T_CONSTANT_ENCAPSED_STRING","'attribute_set_id'",281],["T_WHITESPACE","   ",281],["T_DOUBLE_ARROW","=>",281],["T_WHITESPACE"," ",281],["T_VARIABLE","$setId",281],",",["T_WHITESPACE","\n                ",281],["T_CONSTANT_ENCAPSED_STRING","'attribute_group_id'",282],["T_WHITESPACE"," ",282],["T_DOUBLE_ARROW","=>",282],["T_WHITESPACE"," ",282],["T_VARIABLE","$groupId",282],",",["T_WHITESPACE","\n                ",282],["T_CONSTANT_ENCAPSED_STRING","'attribute_id'",283],["T_WHITESPACE","       ",283],["T_DOUBLE_ARROW","=>",283],["T_WHITESPACE"," ",283],["T_VARIABLE","$attributeId",283],",",["T_WHITESPACE","\n                ",283],["T_CONSTANT_ENCAPSED_STRING","'sort_order'",284],["T_WHITESPACE","         ",284],["T_DOUBLE_ARROW","=>",284],["T_WHITESPACE"," ",284],["T_VARIABLE","$sortOrder",284],["T_WHITESPACE","\n            ",284],")",";",["T_WHITESPACE","\n\n            ",285],["T_VARIABLE","$where",287],["T_WHITESPACE"," ",287],"=",["T_WHITESPACE"," ",287],["T_ARRAY","array",287],"(",["T_WHITESPACE","\n                ",287],["T_CONSTANT_ENCAPSED_STRING","'attribute_id =?'",288],["T_WHITESPACE","     ",288],["T_DOUBLE_ARROW","=>",288],["T_WHITESPACE"," ",288],["T_VARIABLE","$attributeId",288],",",["T_WHITESPACE","\n                ",288],["T_CONSTANT_ENCAPSED_STRING","'attribute_set_id =?'",289],["T_WHITESPACE"," ",289],["T_DOUBLE_ARROW","=>",289],["T_WHITESPACE"," ",289],["T_VARIABLE","$setId",289],["T_WHITESPACE","\n            ",289],")",";",["T_WHITESPACE","\n\n            ",290],["T_VARIABLE","$adapter",292],["T_OBJECT_OPERATOR","->",292],["T_STRING","delete",292],"(",["T_VARIABLE","$table",292],",",["T_WHITESPACE"," ",292],["T_VARIABLE","$where",292],")",";",["T_WHITESPACE","\n            ",292],["T_VARIABLE","$adapter",293],["T_OBJECT_OPERATOR","->",293],["T_STRING","insert",293],"(",["T_VARIABLE","$table",293],",",["T_WHITESPACE"," ",293],["T_VARIABLE","$data",293],")",";",["T_WHITESPACE","\n        ",293],"}",["T_WHITESPACE","\n\n        ",294],["T_RETURN","return",296],["T_WHITESPACE"," ",296],["T_VARIABLE","$this",296],";",["T_WHITESPACE","\n    ",296],"}",["T_WHITESPACE","\n\n    ",297],["T_DOC_COMMENT","\/**\n     *  Save attribute options\n     *\n     * @param Mage_Eav_Model_Entity_Attribute $object\n     * @return Mage_Eav_Model_Resource_Entity_Attribute\n     *\/",299],["T_WHITESPACE","\n    ",304],["T_PROTECTED","protected",305],["T_WHITESPACE"," ",305],["T_FUNCTION","function",305],["T_WHITESPACE"," ",305],["T_STRING","_saveOption",305],"(",["T_STRING","Mage_Core_Model_Abstract",305],["T_WHITESPACE"," ",305],["T_VARIABLE","$object",305],")",["T_WHITESPACE","\n    ",305],"{",["T_WHITESPACE","\n        ",306],["T_VARIABLE","$option",307],["T_WHITESPACE"," ",307],"=",["T_WHITESPACE"," ",307],["T_VARIABLE","$object",307],["T_OBJECT_OPERATOR","->",307],["T_STRING","getOption",307],"(",")",";",["T_WHITESPACE","\n        ",307],["T_IF","if",308],["T_WHITESPACE"," ",308],"(",["T_STRING","is_array",308],"(",["T_VARIABLE","$option",308],")",")",["T_WHITESPACE"," ",308],"{",["T_WHITESPACE","\n            ",308],["T_VARIABLE","$adapter",309],["T_WHITESPACE","            ",309],"=",["T_WHITESPACE"," ",309],["T_VARIABLE","$this",309],["T_OBJECT_OPERATOR","->",309],["T_STRING","_getWriteAdapter",309],"(",")",";",["T_WHITESPACE","\n            ",309],["T_VARIABLE","$optionTable",310],["T_WHITESPACE","        ",310],"=",["T_WHITESPACE"," ",310],["T_VARIABLE","$this",310],["T_OBJECT_OPERATOR","->",310],["T_STRING","getTable",310],"(",["T_CONSTANT_ENCAPSED_STRING","'eav\/attribute_option'",310],")",";",["T_WHITESPACE","\n            ",310],["T_VARIABLE","$optionValueTable",311],["T_WHITESPACE","   ",311],"=",["T_WHITESPACE"," ",311],["T_VARIABLE","$this",311],["T_OBJECT_OPERATOR","->",311],["T_STRING","getTable",311],"(",["T_CONSTANT_ENCAPSED_STRING","'eav\/attribute_option_value'",311],")",";",["T_WHITESPACE","\n\n            ",311],["T_VARIABLE","$stores",313],["T_WHITESPACE"," ",313],"=",["T_WHITESPACE"," ",313],["T_STRING","Mage",313],["T_DOUBLE_COLON","::",313],["T_STRING","app",313],"(",")",["T_OBJECT_OPERATOR","->",313],["T_STRING","getStores",313],"(",["T_STRING","true",313],")",";",["T_WHITESPACE","\n            ",313],["T_IF","if",314],["T_WHITESPACE"," ",314],"(",["T_ISSET","isset",314],"(",["T_VARIABLE","$option",314],"[",["T_CONSTANT_ENCAPSED_STRING","'value'",314],"]",")",")",["T_WHITESPACE"," ",314],"{",["T_WHITESPACE","\n                ",314],["T_VARIABLE","$attributeDefaultValue",315],["T_WHITESPACE"," ",315],"=",["T_WHITESPACE"," ",315],["T_ARRAY","array",315],"(",")",";",["T_WHITESPACE","\n                ",315],["T_IF","if",316],["T_WHITESPACE"," ",316],"(","!",["T_STRING","is_array",316],"(",["T_VARIABLE","$object",316],["T_OBJECT_OPERATOR","->",316],["T_STRING","getDefault",316],"(",")",")",")",["T_WHITESPACE"," ",316],"{",["T_WHITESPACE","\n                    ",316],["T_VARIABLE","$object",317],["T_OBJECT_OPERATOR","->",317],["T_STRING","setDefault",317],"(",["T_ARRAY","array",317],"(",")",")",";",["T_WHITESPACE","\n                ",317],"}",["T_WHITESPACE","\n\n                ",318],["T_FOREACH","foreach",320],["T_WHITESPACE"," ",320],"(",["T_VARIABLE","$option",320],"[",["T_CONSTANT_ENCAPSED_STRING","'value'",320],"]",["T_WHITESPACE"," ",320],["T_AS","as",320],["T_WHITESPACE"," ",320],["T_VARIABLE","$optionId",320],["T_WHITESPACE"," ",320],["T_DOUBLE_ARROW","=>",320],["T_WHITESPACE"," ",320],["T_VARIABLE","$values",320],")",["T_WHITESPACE"," ",320],"{",["T_WHITESPACE","\n                    ",320],["T_VARIABLE","$intOptionId",321],["T_WHITESPACE"," ",321],"=",["T_WHITESPACE"," ",321],["T_INT_CAST","(int)",321],["T_WHITESPACE"," ",321],["T_VARIABLE","$optionId",321],";",["T_WHITESPACE","\n                    ",321],["T_IF","if",322],["T_WHITESPACE"," ",322],"(","!",["T_EMPTY","empty",322],"(",["T_VARIABLE","$option",322],"[",["T_CONSTANT_ENCAPSED_STRING","'delete'",322],"]","[",["T_VARIABLE","$optionId",322],"]",")",")",["T_WHITESPACE"," ",322],"{",["T_WHITESPACE","\n                        ",322],["T_IF","if",323],["T_WHITESPACE"," ",323],"(",["T_VARIABLE","$intOptionId",323],")",["T_WHITESPACE"," ",323],"{",["T_WHITESPACE","\n                            ",323],["T_VARIABLE","$adapter",324],["T_OBJECT_OPERATOR","->",324],["T_STRING","delete",324],"(",["T_VARIABLE","$optionTable",324],",",["T_WHITESPACE"," ",324],["T_ARRAY","array",324],"(",["T_CONSTANT_ENCAPSED_STRING","'option_id = ?'",324],["T_WHITESPACE"," ",324],["T_DOUBLE_ARROW","=>",324],["T_WHITESPACE"," ",324],["T_VARIABLE","$intOptionId",324],")",")",";",["T_WHITESPACE","\n                        ",324],"}",["T_WHITESPACE","\n                        ",325],["T_CONTINUE","continue",326],";",["T_WHITESPACE","\n                    ",326],"}",["T_WHITESPACE","\n\n                    ",327],["T_VARIABLE","$sortOrder",329],["T_WHITESPACE"," ",329],"=",["T_WHITESPACE"," ",329],"!",["T_EMPTY","empty",329],"(",["T_VARIABLE","$option",329],"[",["T_CONSTANT_ENCAPSED_STRING","'order'",329],"]","[",["T_VARIABLE","$optionId",329],"]",")",["T_WHITESPACE"," ",329],"?",["T_WHITESPACE"," ",329],["T_VARIABLE","$option",329],"[",["T_CONSTANT_ENCAPSED_STRING","'order'",329],"]","[",["T_VARIABLE","$optionId",329],"]",["T_WHITESPACE"," ",329],":",["T_WHITESPACE"," ",329],["T_LNUMBER","0",329],";",["T_WHITESPACE","\n                    ",329],["T_IF","if",330],["T_WHITESPACE"," ",330],"(","!",["T_VARIABLE","$intOptionId",330],")",["T_WHITESPACE"," ",330],"{",["T_WHITESPACE","\n                        ",330],["T_VARIABLE","$data",331],["T_WHITESPACE"," ",331],"=",["T_WHITESPACE"," ",331],["T_ARRAY","array",331],"(",["T_WHITESPACE","\n                           ",331],["T_CONSTANT_ENCAPSED_STRING","'attribute_id'",332],["T_WHITESPACE","  ",332],["T_DOUBLE_ARROW","=>",332],["T_WHITESPACE"," ",332],["T_VARIABLE","$object",332],["T_OBJECT_OPERATOR","->",332],["T_STRING","getId",332],"(",")",",",["T_WHITESPACE","\n                           ",332],["T_CONSTANT_ENCAPSED_STRING","'sort_order'",333],["T_WHITESPACE","    ",333],["T_DOUBLE_ARROW","=>",333],["T_WHITESPACE"," ",333],["T_VARIABLE","$sortOrder",333],["T_WHITESPACE","\n                        ",333],")",";",["T_WHITESPACE","\n                        ",334],["T_VARIABLE","$adapter",335],["T_OBJECT_OPERATOR","->",335],["T_STRING","insert",335],"(",["T_VARIABLE","$optionTable",335],",",["T_WHITESPACE"," ",335],["T_VARIABLE","$data",335],")",";",["T_WHITESPACE","\n                        ",335],["T_VARIABLE","$intOptionId",336],["T_WHITESPACE"," ",336],"=",["T_WHITESPACE"," ",336],["T_VARIABLE","$adapter",336],["T_OBJECT_OPERATOR","->",336],["T_STRING","lastInsertId",336],"(",["T_VARIABLE","$optionTable",336],")",";",["T_WHITESPACE","\n                    ",336],"}",["T_WHITESPACE"," ",337],["T_ELSE","else",337],["T_WHITESPACE"," ",337],"{",["T_WHITESPACE","\n                        ",337],["T_VARIABLE","$data",338],["T_WHITESPACE","  ",338],"=",["T_WHITESPACE"," ",338],["T_ARRAY","array",338],"(",["T_CONSTANT_ENCAPSED_STRING","'sort_order'",338],["T_WHITESPACE","    ",338],["T_DOUBLE_ARROW","=>",338],["T_WHITESPACE"," ",338],["T_VARIABLE","$sortOrder",338],")",";",["T_WHITESPACE","\n                        ",338],["T_VARIABLE","$where",339],["T_WHITESPACE"," ",339],"=",["T_WHITESPACE"," ",339],["T_ARRAY","array",339],"(",["T_CONSTANT_ENCAPSED_STRING","'option_id =?'",339],["T_WHITESPACE"," ",339],["T_DOUBLE_ARROW","=>",339],["T_WHITESPACE"," ",339],["T_VARIABLE","$intOptionId",339],")",";",["T_WHITESPACE","\n                        ",339],["T_VARIABLE","$adapter",340],["T_OBJECT_OPERATOR","->",340],["T_STRING","update",340],"(",["T_VARIABLE","$optionTable",340],",",["T_WHITESPACE"," ",340],["T_VARIABLE","$data",340],",",["T_WHITESPACE"," ",340],["T_VARIABLE","$where",340],")",";",["T_WHITESPACE","\n                    ",340],"}",["T_WHITESPACE","\n\n                    ",341],["T_IF","if",343],["T_WHITESPACE"," ",343],"(",["T_STRING","in_array",343],"(",["T_VARIABLE","$optionId",343],",",["T_WHITESPACE"," ",343],["T_VARIABLE","$object",343],["T_OBJECT_OPERATOR","->",343],["T_STRING","getDefault",343],"(",")",")",")",["T_WHITESPACE"," ",343],"{",["T_WHITESPACE","\n                        ",343],["T_IF","if",344],["T_WHITESPACE"," ",344],"(",["T_VARIABLE","$object",344],["T_OBJECT_OPERATOR","->",344],["T_STRING","getFrontendInput",344],"(",")",["T_WHITESPACE"," ",344],["T_IS_EQUAL","==",344],["T_WHITESPACE"," ",344],["T_CONSTANT_ENCAPSED_STRING","'multiselect'",344],")",["T_WHITESPACE"," ",344],"{",["T_WHITESPACE","\n                            ",344],["T_VARIABLE","$attributeDefaultValue",345],"[","]",["T_WHITESPACE"," ",345],"=",["T_WHITESPACE"," ",345],["T_VARIABLE","$intOptionId",345],";",["T_WHITESPACE","\n                        ",345],"}",["T_WHITESPACE"," ",346],["T_ELSEIF","elseif",346],["T_WHITESPACE"," ",346],"(",["T_VARIABLE","$object",346],["T_OBJECT_OPERATOR","->",346],["T_STRING","getFrontendInput",346],"(",")",["T_WHITESPACE"," ",346],["T_IS_EQUAL","==",346],["T_WHITESPACE"," ",346],["T_CONSTANT_ENCAPSED_STRING","'select'",346],")",["T_WHITESPACE"," ",346],"{",["T_WHITESPACE","\n                            ",346],["T_VARIABLE","$attributeDefaultValue",347],["T_WHITESPACE"," ",347],"=",["T_WHITESPACE"," ",347],["T_ARRAY","array",347],"(",["T_VARIABLE","$intOptionId",347],")",";",["T_WHITESPACE","\n                        ",347],"}",["T_WHITESPACE","\n                    ",348],"}",["T_WHITESPACE","\n\n                    ",349],["T_COMMENT","\/\/ Default value\n",351],["T_WHITESPACE","                    ",352],["T_IF","if",352],["T_WHITESPACE"," ",352],"(","!",["T_ISSET","isset",352],"(",["T_VARIABLE","$values",352],"[",["T_LNUMBER","0",352],"]",")",")",["T_WHITESPACE"," ",352],"{",["T_WHITESPACE","\n                        ",352],["T_STRING","Mage",353],["T_DOUBLE_COLON","::",353],["T_STRING","throwException",353],"(",["T_STRING","Mage",353],["T_DOUBLE_COLON","::",353],["T_STRING","helper",353],"(",["T_CONSTANT_ENCAPSED_STRING","'eav'",353],")",["T_OBJECT_OPERATOR","->",353],["T_STRING","__",353],"(",["T_CONSTANT_ENCAPSED_STRING","'Default option value is not defined'",353],")",")",";",["T_WHITESPACE","\n                    ",353],"}",["T_WHITESPACE","\n\n                    ",354],["T_VARIABLE","$adapter",356],["T_OBJECT_OPERATOR","->",356],["T_STRING","delete",356],"(",["T_VARIABLE","$optionValueTable",356],",",["T_WHITESPACE"," ",356],["T_ARRAY","array",356],"(",["T_CONSTANT_ENCAPSED_STRING","'option_id =?'",356],["T_WHITESPACE"," ",356],["T_DOUBLE_ARROW","=>",356],["T_WHITESPACE"," ",356],["T_VARIABLE","$intOptionId",356],")",")",";",["T_WHITESPACE","\n                    ",356],["T_FOREACH","foreach",357],["T_WHITESPACE"," ",357],"(",["T_VARIABLE","$stores",357],["T_WHITESPACE"," ",357],["T_AS","as",357],["T_WHITESPACE"," ",357],["T_VARIABLE","$store",357],")",["T_WHITESPACE"," ",357],"{",["T_WHITESPACE","\n                        ",357],["T_IF","if",358],["T_WHITESPACE"," ",358],"(",["T_ISSET","isset",358],"(",["T_VARIABLE","$values",358],"[",["T_VARIABLE","$store",358],["T_OBJECT_OPERATOR","->",358],["T_STRING","getId",358],"(",")","]",")",["T_WHITESPACE","\n                            ",358],["T_BOOLEAN_AND","&&",359],["T_WHITESPACE"," ",359],"(","!",["T_EMPTY","empty",359],"(",["T_VARIABLE","$values",359],"[",["T_VARIABLE","$store",359],["T_OBJECT_OPERATOR","->",359],["T_STRING","getId",359],"(",")","]",")",["T_WHITESPACE","\n                            ",359],["T_BOOLEAN_OR","||",360],["T_WHITESPACE"," ",360],["T_VARIABLE","$values",360],"[",["T_VARIABLE","$store",360],["T_OBJECT_OPERATOR","->",360],["T_STRING","getId",360],"(",")","]",["T_WHITESPACE"," ",360],["T_IS_EQUAL","==",360],["T_WHITESPACE"," ",360],["T_CONSTANT_ENCAPSED_STRING","\"0\"",360],")",["T_WHITESPACE","\n                        ",360],")",["T_WHITESPACE"," ",361],"{",["T_WHITESPACE","\n                            ",361],["T_VARIABLE","$data",362],["T_WHITESPACE"," ",362],"=",["T_WHITESPACE"," ",362],["T_ARRAY","array",362],"(",["T_WHITESPACE","\n                                ",362],["T_CONSTANT_ENCAPSED_STRING","'option_id'",363],["T_WHITESPACE"," ",363],["T_DOUBLE_ARROW","=>",363],["T_WHITESPACE"," ",363],["T_VARIABLE","$intOptionId",363],",",["T_WHITESPACE","\n                                ",363],["T_CONSTANT_ENCAPSED_STRING","'store_id'",364],["T_WHITESPACE","  ",364],["T_DOUBLE_ARROW","=>",364],["T_WHITESPACE"," ",364],["T_VARIABLE","$store",364],["T_OBJECT_OPERATOR","->",364],["T_STRING","getId",364],"(",")",",",["T_WHITESPACE","\n                                ",364],["T_CONSTANT_ENCAPSED_STRING","'value'",365],["T_WHITESPACE","     ",365],["T_DOUBLE_ARROW","=>",365],["T_WHITESPACE"," ",365],["T_VARIABLE","$values",365],"[",["T_VARIABLE","$store",365],["T_OBJECT_OPERATOR","->",365],["T_STRING","getId",365],"(",")","]",",",["T_WHITESPACE","\n                            ",365],")",";",["T_WHITESPACE","\n                            ",366],["T_VARIABLE","$adapter",367],["T_OBJECT_OPERATOR","->",367],["T_STRING","insert",367],"(",["T_VARIABLE","$optionValueTable",367],",",["T_WHITESPACE"," ",367],["T_VARIABLE","$data",367],")",";",["T_WHITESPACE","\n                        ",367],"}",["T_WHITESPACE","\n                    ",368],"}",["T_WHITESPACE","\n                ",369],"}",["T_WHITESPACE","\n                ",370],["T_VARIABLE","$bind",371],["T_WHITESPACE","  ",371],"=",["T_WHITESPACE"," ",371],["T_ARRAY","array",371],"(",["T_CONSTANT_ENCAPSED_STRING","'default_value'",371],["T_WHITESPACE"," ",371],["T_DOUBLE_ARROW","=>",371],["T_WHITESPACE"," ",371],["T_STRING","implode",371],"(",["T_CONSTANT_ENCAPSED_STRING","','",371],",",["T_WHITESPACE"," ",371],["T_VARIABLE","$attributeDefaultValue",371],")",")",";",["T_WHITESPACE","\n                ",371],["T_VARIABLE","$where",372],["T_WHITESPACE"," ",372],"=",["T_WHITESPACE"," ",372],["T_ARRAY","array",372],"(",["T_CONSTANT_ENCAPSED_STRING","'attribute_id =?'",372],["T_WHITESPACE"," ",372],["T_DOUBLE_ARROW","=>",372],["T_WHITESPACE"," ",372],["T_VARIABLE","$object",372],["T_OBJECT_OPERATOR","->",372],["T_STRING","getId",372],"(",")",")",";",["T_WHITESPACE","\n                ",372],["T_VARIABLE","$adapter",373],["T_OBJECT_OPERATOR","->",373],["T_STRING","update",373],"(",["T_VARIABLE","$this",373],["T_OBJECT_OPERATOR","->",373],["T_STRING","getMainTable",373],"(",")",",",["T_WHITESPACE"," ",373],["T_VARIABLE","$bind",373],",",["T_WHITESPACE"," ",373],["T_VARIABLE","$where",373],")",";",["T_WHITESPACE","\n            ",373],"}",["T_WHITESPACE","\n        ",374],"}",["T_WHITESPACE","\n\n        ",375],["T_RETURN","return",377],["T_WHITESPACE"," ",377],["T_VARIABLE","$this",377],";",["T_WHITESPACE","\n    ",377],"}",["T_WHITESPACE","\n\n\n    ",378],["T_DOC_COMMENT","\/**\n     * Retrieve attribute id by entity type code and attribute code\n     *\n     * @param string $entityType\n     * @param string $code\n     * @return int\n     *\/",381],["T_WHITESPACE","\n    ",387],["T_PUBLIC","public",388],["T_WHITESPACE"," ",388],["T_FUNCTION","function",388],["T_WHITESPACE"," ",388],["T_STRING","getIdByCode",388],"(",["T_VARIABLE","$entityType",388],",",["T_WHITESPACE"," ",388],["T_VARIABLE","$code",388],")",["T_WHITESPACE","\n    ",388],"{",["T_WHITESPACE","\n        ",389],["T_VARIABLE","$adapter",390],["T_WHITESPACE"," ",390],"=",["T_WHITESPACE"," ",390],["T_VARIABLE","$this",390],["T_OBJECT_OPERATOR","->",390],["T_STRING","_getReadAdapter",390],"(",")",";",["T_WHITESPACE","\n        ",390],["T_VARIABLE","$bind",391],["T_WHITESPACE","    ",391],"=",["T_WHITESPACE"," ",391],["T_ARRAY","array",391],"(",["T_WHITESPACE","\n            ",391],["T_CONSTANT_ENCAPSED_STRING","':entity_type_code'",392],["T_WHITESPACE"," ",392],["T_DOUBLE_ARROW","=>",392],["T_WHITESPACE"," ",392],["T_VARIABLE","$entityType",392],",",["T_WHITESPACE","\n            ",392],["T_CONSTANT_ENCAPSED_STRING","':attribute_code'",393],["T_WHITESPACE","   ",393],["T_DOUBLE_ARROW","=>",393],["T_WHITESPACE"," ",393],["T_VARIABLE","$code",393],["T_WHITESPACE","\n        ",393],")",";",["T_WHITESPACE","\n        ",394],["T_VARIABLE","$select",395],["T_WHITESPACE"," ",395],"=",["T_WHITESPACE"," ",395],["T_VARIABLE","$adapter",395],["T_OBJECT_OPERATOR","->",395],["T_STRING","select",395],"(",")",["T_WHITESPACE","\n            ",395],["T_OBJECT_OPERATOR","->",396],["T_STRING","from",396],"(",["T_ARRAY","array",396],"(",["T_CONSTANT_ENCAPSED_STRING","'a'",396],["T_WHITESPACE"," ",396],["T_DOUBLE_ARROW","=>",396],["T_WHITESPACE"," ",396],["T_VARIABLE","$this",396],["T_OBJECT_OPERATOR","->",396],["T_STRING","getTable",396],"(",["T_CONSTANT_ENCAPSED_STRING","'eav\/attribute'",396],")",")",",",["T_WHITESPACE"," ",396],["T_ARRAY","array",396],"(",["T_CONSTANT_ENCAPSED_STRING","'a.attribute_id'",396],")",")",["T_WHITESPACE","\n            ",396],["T_OBJECT_OPERATOR","->",397],["T_STRING","join",397],"(",["T_WHITESPACE","\n                ",397],["T_ARRAY","array",398],"(",["T_CONSTANT_ENCAPSED_STRING","'t'",398],["T_WHITESPACE"," ",398],["T_DOUBLE_ARROW","=>",398],["T_WHITESPACE"," ",398],["T_VARIABLE","$this",398],["T_OBJECT_OPERATOR","->",398],["T_STRING","getTable",398],"(",["T_CONSTANT_ENCAPSED_STRING","'eav\/entity_type'",398],")",")",",",["T_WHITESPACE","\n                ",398],["T_CONSTANT_ENCAPSED_STRING","'a.entity_type_id = t.entity_type_id'",399],",",["T_WHITESPACE","\n                ",399],["T_ARRAY","array",400],"(",")",")",["T_WHITESPACE","\n            ",400],["T_OBJECT_OPERATOR","->",401],["T_STRING","where",401],"(",["T_CONSTANT_ENCAPSED_STRING","'t.entity_type_code = :entity_type_code'",401],")",["T_WHITESPACE","\n            ",401],["T_OBJECT_OPERATOR","->",402],["T_STRING","where",402],"(",["T_CONSTANT_ENCAPSED_STRING","'a.attribute_code = :attribute_code'",402],")",";",["T_WHITESPACE","\n\n        ",402],["T_RETURN","return",404],["T_WHITESPACE"," ",404],["T_VARIABLE","$adapter",404],["T_OBJECT_OPERATOR","->",404],["T_STRING","fetchOne",404],"(",["T_VARIABLE","$select",404],",",["T_WHITESPACE"," ",404],["T_VARIABLE","$bind",404],")",";",["T_WHITESPACE","\n    ",404],"}",["T_WHITESPACE","\n\n    ",405],["T_DOC_COMMENT","\/**\n     * Retrieve attribute codes by front-end type\n     *\n     * @param string $frontendType\n     * @return array\n     *\/",407],["T_WHITESPACE","\n    ",412],["T_PUBLIC","public",413],["T_WHITESPACE"," ",413],["T_FUNCTION","function",413],["T_WHITESPACE"," ",413],["T_STRING","getAttributeCodesByFrontendType",413],"(",["T_VARIABLE","$frontendType",413],")",["T_WHITESPACE","\n    ",413],"{",["T_WHITESPACE","\n        ",414],["T_VARIABLE","$adapter",415],["T_WHITESPACE"," ",415],"=",["T_WHITESPACE"," ",415],["T_VARIABLE","$this",415],["T_OBJECT_OPERATOR","->",415],["T_STRING","_getReadAdapter",415],"(",")",";",["T_WHITESPACE","\n        ",415],["T_VARIABLE","$bind",416],["T_WHITESPACE","    ",416],"=",["T_WHITESPACE"," ",416],["T_ARRAY","array",416],"(",["T_CONSTANT_ENCAPSED_STRING","':frontend_input'",416],["T_WHITESPACE"," ",416],["T_DOUBLE_ARROW","=>",416],["T_WHITESPACE"," ",416],["T_VARIABLE","$frontendType",416],")",";",["T_WHITESPACE","\n        ",416],["T_VARIABLE","$select",417],["T_WHITESPACE","  ",417],"=",["T_WHITESPACE"," ",417],["T_VARIABLE","$adapter",417],["T_OBJECT_OPERATOR","->",417],["T_STRING","select",417],"(",")",["T_WHITESPACE","\n            ",417],["T_OBJECT_OPERATOR","->",418],["T_STRING","from",418],"(",["T_VARIABLE","$this",418],["T_OBJECT_OPERATOR","->",418],["T_STRING","getTable",418],"(",["T_CONSTANT_ENCAPSED_STRING","'eav\/attribute'",418],")",",",["T_WHITESPACE"," ",418],["T_CONSTANT_ENCAPSED_STRING","'attribute_code'",418],")",["T_WHITESPACE","\n            ",418],["T_OBJECT_OPERATOR","->",419],["T_STRING","where",419],"(",["T_CONSTANT_ENCAPSED_STRING","'frontend_input = :frontend_input'",419],")",";",["T_WHITESPACE","\n\n        ",419],["T_RETURN","return",421],["T_WHITESPACE"," ",421],["T_VARIABLE","$adapter",421],["T_OBJECT_OPERATOR","->",421],["T_STRING","fetchCol",421],"(",["T_VARIABLE","$select",421],",",["T_WHITESPACE"," ",421],["T_VARIABLE","$bind",421],")",";",["T_WHITESPACE","\n    ",421],"}",["T_WHITESPACE","\n\n    ",422],["T_DOC_COMMENT","\/**\n     * Retrieve Select For Flat Attribute update\n     *\n     * @param Mage_Eav_Model_Entity_Attribute_Abstract $attribute\n     * @param int $storeId\n     * @return Varien_Db_Select\n     *\/",424],["T_WHITESPACE","\n    ",430],["T_PUBLIC","public",431],["T_WHITESPACE"," ",431],["T_FUNCTION","function",431],["T_WHITESPACE"," ",431],["T_STRING","getFlatUpdateSelect",431],"(",["T_STRING","Mage_Eav_Model_Entity_Attribute_Abstract",431],["T_WHITESPACE"," ",431],["T_VARIABLE","$attribute",431],",",["T_WHITESPACE"," ",431],["T_VARIABLE","$storeId",431],")",["T_WHITESPACE","\n    ",431],"{",["T_WHITESPACE","\n        ",432],["T_VARIABLE","$adapter",433],["T_WHITESPACE"," ",433],"=",["T_WHITESPACE"," ",433],["T_VARIABLE","$this",433],["T_OBJECT_OPERATOR","->",433],["T_STRING","_getReadAdapter",433],"(",")",";",["T_WHITESPACE","\n        ",433],["T_VARIABLE","$joinConditionTemplate",434],["T_WHITESPACE"," ",434],"=",["T_WHITESPACE"," ",434],["T_CONSTANT_ENCAPSED_STRING","\"%s.entity_id = %s.entity_id\"",434],["T_WHITESPACE","\n            ",434],".",["T_CONSTANT_ENCAPSED_STRING","\" AND %s.entity_type_id = \"",435],".",["T_VARIABLE","$attribute",435],["T_OBJECT_OPERATOR","->",435],["T_STRING","getEntityTypeId",435],"(",")",["T_WHITESPACE","\n            ",435],".",["T_CONSTANT_ENCAPSED_STRING","\" AND %s.attribute_id = \"",436],".",["T_VARIABLE","$attribute",436],["T_OBJECT_OPERATOR","->",436],["T_STRING","getId",436],"(",")",["T_WHITESPACE","\n            ",436],".",["T_CONSTANT_ENCAPSED_STRING","\" AND %s.store_id = %d\"",437],";",["T_WHITESPACE","\n        ",437],["T_VARIABLE","$joinCondition",438],["T_WHITESPACE"," ",438],"=",["T_WHITESPACE"," ",438],["T_STRING","sprintf",438],"(",["T_VARIABLE","$joinConditionTemplate",438],",",["T_WHITESPACE","\n            ",438],["T_CONSTANT_ENCAPSED_STRING","'e'",439],",",["T_WHITESPACE"," ",439],["T_CONSTANT_ENCAPSED_STRING","'t1'",439],",",["T_WHITESPACE"," ",439],["T_CONSTANT_ENCAPSED_STRING","'t1'",439],",",["T_WHITESPACE"," ",439],["T_CONSTANT_ENCAPSED_STRING","'t1'",439],",",["T_WHITESPACE"," ",439],["T_CONSTANT_ENCAPSED_STRING","'t1'",439],",",["T_WHITESPACE","\n            ",439],["T_STRING","Mage_Core_Model_App",440],["T_DOUBLE_COLON","::",440],["T_STRING","ADMIN_STORE_ID",440],")",";",["T_WHITESPACE","\n        ",440],["T_IF","if",441],["T_WHITESPACE"," ",441],"(",["T_VARIABLE","$attribute",441],["T_OBJECT_OPERATOR","->",441],["T_STRING","getFlatAddChildData",441],"(",")",")",["T_WHITESPACE"," ",441],"{",["T_WHITESPACE","\n            ",441],["T_VARIABLE","$joinCondition",442],["T_WHITESPACE"," ",442],["T_CONCAT_EQUAL",".=",442],["T_WHITESPACE"," ",442],["T_CONSTANT_ENCAPSED_STRING","' AND e.child_id = t1.entity_id'",442],";",["T_WHITESPACE","\n        ",442],"}",["T_WHITESPACE","\n\n        ",443],["T_VARIABLE","$valueExpr",445],["T_WHITESPACE"," ",445],"=",["T_WHITESPACE"," ",445],["T_VARIABLE","$adapter",445],["T_OBJECT_OPERATOR","->",445],["T_STRING","getCheckSql",445],"(",["T_CONSTANT_ENCAPSED_STRING","'t2.value_id > 0'",445],",",["T_WHITESPACE"," ",445],["T_CONSTANT_ENCAPSED_STRING","'t2.value'",445],",",["T_WHITESPACE"," ",445],["T_CONSTANT_ENCAPSED_STRING","'t1.value'",445],")",";",["T_WHITESPACE","\n\n        ",445],["T_DOC_COMMENT","\/** @var $select Varien_Db_Select *\/",447],["T_WHITESPACE","\n        ",447],["T_VARIABLE","$select",448],["T_WHITESPACE"," ",448],"=",["T_WHITESPACE"," ",448],["T_VARIABLE","$adapter",448],["T_OBJECT_OPERATOR","->",448],["T_STRING","select",448],"(",")",["T_WHITESPACE","\n            ",448],["T_OBJECT_OPERATOR","->",449],["T_STRING","joinLeft",449],"(",["T_WHITESPACE","\n                ",449],["T_ARRAY","array",450],"(",["T_CONSTANT_ENCAPSED_STRING","'t1'",450],["T_WHITESPACE"," ",450],["T_DOUBLE_ARROW","=>",450],["T_WHITESPACE"," ",450],["T_VARIABLE","$attribute",450],["T_OBJECT_OPERATOR","->",450],["T_STRING","getBackend",450],"(",")",["T_OBJECT_OPERATOR","->",450],["T_STRING","getTable",450],"(",")",")",",",["T_WHITESPACE","\n                ",450],["T_VARIABLE","$joinCondition",451],",",["T_WHITESPACE","\n                ",451],["T_ARRAY","array",452],"(",")",")",["T_WHITESPACE","\n            ",452],["T_OBJECT_OPERATOR","->",453],["T_STRING","joinLeft",453],"(",["T_WHITESPACE","\n                ",453],["T_ARRAY","array",454],"(",["T_CONSTANT_ENCAPSED_STRING","'t2'",454],["T_WHITESPACE"," ",454],["T_DOUBLE_ARROW","=>",454],["T_WHITESPACE"," ",454],["T_VARIABLE","$attribute",454],["T_OBJECT_OPERATOR","->",454],["T_STRING","getBackend",454],"(",")",["T_OBJECT_OPERATOR","->",454],["T_STRING","getTable",454],"(",")",")",",",["T_WHITESPACE","\n                ",454],["T_STRING","sprintf",455],"(",["T_VARIABLE","$joinConditionTemplate",455],",",["T_WHITESPACE"," ",455],["T_CONSTANT_ENCAPSED_STRING","'e'",455],",",["T_WHITESPACE"," ",455],["T_CONSTANT_ENCAPSED_STRING","'t2'",455],",",["T_WHITESPACE"," ",455],["T_CONSTANT_ENCAPSED_STRING","'t2'",455],",",["T_WHITESPACE"," ",455],["T_CONSTANT_ENCAPSED_STRING","'t2'",455],",",["T_WHITESPACE"," ",455],["T_CONSTANT_ENCAPSED_STRING","'t2'",455],",",["T_WHITESPACE"," ",455],["T_VARIABLE","$storeId",455],")",",",["T_WHITESPACE","\n                ",455],["T_ARRAY","array",456],"(",["T_VARIABLE","$attribute",456],["T_OBJECT_OPERATOR","->",456],["T_STRING","getAttributeCode",456],"(",")",["T_WHITESPACE"," ",456],["T_DOUBLE_ARROW","=>",456],["T_WHITESPACE"," ",456],["T_VARIABLE","$valueExpr",456],")",")",";",["T_WHITESPACE","\n        ",456],["T_IF","if",457],["T_WHITESPACE"," ",457],"(",["T_VARIABLE","$attribute",457],["T_OBJECT_OPERATOR","->",457],["T_STRING","getFlatAddChildData",457],"(",")",")",["T_WHITESPACE"," ",457],"{",["T_WHITESPACE","\n            ",457],["T_VARIABLE","$select",458],["T_OBJECT_OPERATOR","->",458],["T_STRING","where",458],"(",["T_CONSTANT_ENCAPSED_STRING","\"e.is_child = ?\"",458],",",["T_WHITESPACE"," ",458],["T_LNUMBER","0",458],")",";",["T_WHITESPACE","\n        ",458],"}",["T_WHITESPACE","\n\n        ",459],["T_RETURN","return",461],["T_WHITESPACE"," ",461],["T_VARIABLE","$select",461],";",["T_WHITESPACE","\n    ",461],"}",["T_WHITESPACE","\n\n    ",462],["T_DOC_COMMENT","\/**\n     * Returns the column descriptions for a table\n     *\n     * @param string $table\n     * @return array\n     *\/",464],["T_WHITESPACE","\n    ",469],["T_PUBLIC","public",470],["T_WHITESPACE"," ",470],["T_FUNCTION","function",470],["T_WHITESPACE"," ",470],["T_STRING","describeTable",470],"(",["T_VARIABLE","$table",470],")",["T_WHITESPACE","\n    ",470],"{",["T_WHITESPACE","\n        ",471],["T_RETURN","return",472],["T_WHITESPACE"," ",472],["T_VARIABLE","$this",472],["T_OBJECT_OPERATOR","->",472],["T_STRING","_getReadAdapter",472],"(",")",["T_OBJECT_OPERATOR","->",472],["T_STRING","describeTable",472],"(",["T_VARIABLE","$table",472],")",";",["T_WHITESPACE","\n    ",472],"}",["T_WHITESPACE","\n\n    ",473],["T_DOC_COMMENT","\/**\n     * Retrieve additional attribute table name for specified entity type\n     *\n     * @param integer $entityTypeId\n     * @return string\n     *\/",475],["T_WHITESPACE","\n    ",480],["T_PUBLIC","public",481],["T_WHITESPACE"," ",481],["T_FUNCTION","function",481],["T_WHITESPACE"," ",481],["T_STRING","getAdditionalAttributeTable",481],"(",["T_VARIABLE","$entityTypeId",481],")",["T_WHITESPACE","\n    ",481],"{",["T_WHITESPACE","\n        ",482],["T_RETURN","return",483],["T_WHITESPACE"," ",483],["T_STRING","Mage",483],["T_DOUBLE_COLON","::",483],["T_STRING","getResourceSingleton",483],"(",["T_CONSTANT_ENCAPSED_STRING","'eav\/entity_type'",483],")",["T_OBJECT_OPERATOR","->",483],["T_STRING","getAdditionalAttributeTable",483],"(",["T_VARIABLE","$entityTypeId",483],")",";",["T_WHITESPACE","\n    ",483],"}",["T_WHITESPACE","\n\n    ",484],["T_DOC_COMMENT","\/**\n     * Load additional attribute data.\n     * Load label of current active store\n     *\n     * @param Mage_Eav_Model_Entity_Attribute $object\n     * @return Mage_Eav_Model_Resource_Entity_Attribute\n     *\/",486],["T_WHITESPACE","\n    ",492],["T_PROTECTED","protected",493],["T_WHITESPACE"," ",493],["T_FUNCTION","function",493],["T_WHITESPACE"," ",493],["T_STRING","_afterLoad",493],"(",["T_STRING","Mage_Core_Model_Abstract",493],["T_WHITESPACE"," ",493],["T_VARIABLE","$object",493],")",["T_WHITESPACE","\n    ",493],"{",["T_WHITESPACE","\n        ",494],["T_DOC_COMMENT","\/** @var $entityType Mage_Eav_Model_Entity_Type *\/",495],["T_WHITESPACE","\n        ",495],["T_VARIABLE","$entityType",496],["T_WHITESPACE"," ",496],"=",["T_WHITESPACE"," ",496],["T_VARIABLE","$object",496],["T_OBJECT_OPERATOR","->",496],["T_STRING","getData",496],"(",["T_CONSTANT_ENCAPSED_STRING","'entity_type'",496],")",";",["T_WHITESPACE","\n        ",496],["T_IF","if",497],["T_WHITESPACE"," ",497],"(",["T_VARIABLE","$entityType",497],")",["T_WHITESPACE"," ",497],"{",["T_WHITESPACE","\n            ",497],["T_VARIABLE","$additionalTable",498],["T_WHITESPACE"," ",498],"=",["T_WHITESPACE"," ",498],["T_VARIABLE","$entityType",498],["T_OBJECT_OPERATOR","->",498],["T_STRING","getAdditionalAttributeTable",498],"(",")",";",["T_WHITESPACE","\n        ",498],"}",["T_WHITESPACE"," ",499],["T_ELSE","else",499],["T_WHITESPACE"," ",499],"{",["T_WHITESPACE","\n            ",499],["T_VARIABLE","$additionalTable",500],["T_WHITESPACE"," ",500],"=",["T_WHITESPACE"," ",500],["T_VARIABLE","$this",500],["T_OBJECT_OPERATOR","->",500],["T_STRING","getAdditionalAttributeTable",500],"(",["T_VARIABLE","$object",500],["T_OBJECT_OPERATOR","->",500],["T_STRING","getEntityTypeId",500],"(",")",")",";",["T_WHITESPACE","\n        ",500],"}",["T_WHITESPACE","\n\n        ",501],["T_IF","if",503],["T_WHITESPACE"," ",503],"(",["T_VARIABLE","$additionalTable",503],")",["T_WHITESPACE"," ",503],"{",["T_WHITESPACE","\n            ",503],["T_VARIABLE","$adapter",504],["T_WHITESPACE"," ",504],"=",["T_WHITESPACE"," ",504],["T_VARIABLE","$this",504],["T_OBJECT_OPERATOR","->",504],["T_STRING","_getReadAdapter",504],"(",")",";",["T_WHITESPACE","\n            ",504],["T_VARIABLE","$bind",505],["T_WHITESPACE","    ",505],"=",["T_WHITESPACE"," ",505],["T_ARRAY","array",505],"(",["T_CONSTANT_ENCAPSED_STRING","':attribute_id'",505],["T_WHITESPACE"," ",505],["T_DOUBLE_ARROW","=>",505],["T_WHITESPACE"," ",505],["T_VARIABLE","$object",505],["T_OBJECT_OPERATOR","->",505],["T_STRING","getId",505],"(",")",")",";",["T_WHITESPACE","\n            ",505],["T_VARIABLE","$select",506],["T_WHITESPACE","  ",506],"=",["T_WHITESPACE"," ",506],["T_VARIABLE","$adapter",506],["T_OBJECT_OPERATOR","->",506],["T_STRING","select",506],"(",")",["T_WHITESPACE","\n                ",506],["T_OBJECT_OPERATOR","->",507],["T_STRING","from",507],"(",["T_VARIABLE","$this",507],["T_OBJECT_OPERATOR","->",507],["T_STRING","getTable",507],"(",["T_VARIABLE","$additionalTable",507],")",")",["T_WHITESPACE","\n                ",507],["T_OBJECT_OPERATOR","->",508],["T_STRING","where",508],"(",["T_CONSTANT_ENCAPSED_STRING","'attribute_id = :attribute_id'",508],")",";",["T_WHITESPACE","\n\n            ",508],["T_VARIABLE","$result",510],["T_WHITESPACE"," ",510],"=",["T_WHITESPACE"," ",510],["T_VARIABLE","$adapter",510],["T_OBJECT_OPERATOR","->",510],["T_STRING","fetchRow",510],"(",["T_VARIABLE","$select",510],",",["T_WHITESPACE"," ",510],["T_VARIABLE","$bind",510],")",";",["T_WHITESPACE","\n            ",510],["T_IF","if",511],["T_WHITESPACE"," ",511],"(",["T_VARIABLE","$result",511],")",["T_WHITESPACE"," ",511],"{",["T_WHITESPACE","\n                ",511],["T_VARIABLE","$object",512],["T_OBJECT_OPERATOR","->",512],["T_STRING","addData",512],"(",["T_VARIABLE","$result",512],")",";",["T_WHITESPACE","\n            ",512],"}",["T_WHITESPACE","\n        ",513],"}",["T_WHITESPACE","\n\n        ",514],["T_RETURN","return",516],["T_WHITESPACE"," ",516],["T_VARIABLE","$this",516],";",["T_WHITESPACE","\n    ",516],"}",["T_WHITESPACE","\n\n    ",517],["T_DOC_COMMENT","\/**\n     * Retrieve store labels by given attribute id\n     *\n     * @param integer $attributeId\n     * @return array\n     *\/",519],["T_WHITESPACE","\n    ",524],["T_PUBLIC","public",525],["T_WHITESPACE"," ",525],["T_FUNCTION","function",525],["T_WHITESPACE"," ",525],["T_STRING","getStoreLabelsByAttributeId",525],"(",["T_VARIABLE","$attributeId",525],")",["T_WHITESPACE","\n    ",525],"{",["T_WHITESPACE","\n        ",526],["T_VARIABLE","$adapter",527],["T_WHITESPACE","   ",527],"=",["T_WHITESPACE"," ",527],["T_VARIABLE","$this",527],["T_OBJECT_OPERATOR","->",527],["T_STRING","_getReadAdapter",527],"(",")",";",["T_WHITESPACE","\n        ",527],["T_VARIABLE","$bind",528],["T_WHITESPACE","      ",528],"=",["T_WHITESPACE"," ",528],["T_ARRAY","array",528],"(",["T_CONSTANT_ENCAPSED_STRING","':attribute_id'",528],["T_WHITESPACE"," ",528],["T_DOUBLE_ARROW","=>",528],["T_WHITESPACE"," ",528],["T_VARIABLE","$attributeId",528],")",";",["T_WHITESPACE","\n        ",528],["T_VARIABLE","$select",529],["T_WHITESPACE","    ",529],"=",["T_WHITESPACE"," ",529],["T_VARIABLE","$adapter",529],["T_OBJECT_OPERATOR","->",529],["T_STRING","select",529],"(",")",["T_WHITESPACE","\n            ",529],["T_OBJECT_OPERATOR","->",530],["T_STRING","from",530],"(",["T_VARIABLE","$this",530],["T_OBJECT_OPERATOR","->",530],["T_STRING","getTable",530],"(",["T_CONSTANT_ENCAPSED_STRING","'eav\/attribute_label'",530],")",",",["T_WHITESPACE"," ",530],["T_ARRAY","array",530],"(",["T_CONSTANT_ENCAPSED_STRING","'store_id'",530],",",["T_WHITESPACE"," ",530],["T_CONSTANT_ENCAPSED_STRING","'value'",530],")",")",["T_WHITESPACE","\n            ",530],["T_OBJECT_OPERATOR","->",531],["T_STRING","where",531],"(",["T_CONSTANT_ENCAPSED_STRING","'attribute_id = :attribute_id'",531],")",";",["T_WHITESPACE","\n\n        ",531],["T_RETURN","return",533],["T_WHITESPACE"," ",533],["T_VARIABLE","$adapter",533],["T_OBJECT_OPERATOR","->",533],["T_STRING","fetchPairs",533],"(",["T_VARIABLE","$select",533],",",["T_WHITESPACE"," ",533],["T_VARIABLE","$bind",533],")",";",["T_WHITESPACE","\n    ",533],"}",["T_WHITESPACE","\n\n    ",534],["T_DOC_COMMENT","\/**\n     * Load by given attributes ids and return only exist attribute ids\n     *\n     * @param array $attributeIds\n     * @return array\n     *\/",536],["T_WHITESPACE","\n    ",541],["T_PUBLIC","public",542],["T_WHITESPACE"," ",542],["T_FUNCTION","function",542],["T_WHITESPACE"," ",542],["T_STRING","getValidAttributeIds",542],"(",["T_VARIABLE","$attributeIds",542],")",["T_WHITESPACE","\n    ",542],"{",["T_WHITESPACE","\n        ",543],["T_VARIABLE","$adapter",544],["T_WHITESPACE","   ",544],"=",["T_WHITESPACE"," ",544],["T_VARIABLE","$this",544],["T_OBJECT_OPERATOR","->",544],["T_STRING","_getReadAdapter",544],"(",")",";",["T_WHITESPACE","\n        ",544],["T_VARIABLE","$select",545],["T_WHITESPACE","    ",545],"=",["T_WHITESPACE"," ",545],["T_VARIABLE","$adapter",545],["T_OBJECT_OPERATOR","->",545],["T_STRING","select",545],"(",")",["T_WHITESPACE","\n            ",545],["T_OBJECT_OPERATOR","->",546],["T_STRING","from",546],"(",["T_VARIABLE","$this",546],["T_OBJECT_OPERATOR","->",546],["T_STRING","getMainTable",546],"(",")",",",["T_WHITESPACE"," ",546],["T_ARRAY","array",546],"(",["T_CONSTANT_ENCAPSED_STRING","'attribute_id'",546],")",")",["T_WHITESPACE","\n            ",546],["T_OBJECT_OPERATOR","->",547],["T_STRING","where",547],"(",["T_CONSTANT_ENCAPSED_STRING","'attribute_id IN (?)'",547],",",["T_WHITESPACE"," ",547],["T_VARIABLE","$attributeIds",547],")",";",["T_WHITESPACE","\n\n        ",547],["T_RETURN","return",549],["T_WHITESPACE"," ",549],["T_VARIABLE","$adapter",549],["T_OBJECT_OPERATOR","->",549],["T_STRING","fetchCol",549],"(",["T_VARIABLE","$select",549],")",";",["T_WHITESPACE","\n    ",549],"}",["T_WHITESPACE","\n",550],"}",["T_WHITESPACE","\n",551]]
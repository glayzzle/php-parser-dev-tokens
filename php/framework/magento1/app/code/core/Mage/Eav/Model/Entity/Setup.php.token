[["T_OPEN_TAG","<?php\n",1],["T_DOC_COMMENT","\/**\n * Magento\n *\n * NOTICE OF LICENSE\n *\n * This source file is subject to the Open Software License (OSL 3.0)\n * that is bundled with this package in the file LICENSE.txt.\n * It is also available through the world-wide-web at this URL:\n * http:\/\/opensource.org\/licenses\/osl-3.0.php\n * If you did not receive a copy of the license and are unable to\n * obtain it through the world-wide-web, please send an email\n * to license@magento.com so we can send you a copy immediately.\n *\n * DISCLAIMER\n *\n * Do not edit or add to this file if you wish to upgrade Magento to newer\n * versions in the future. If you wish to customize Magento for your\n * needs please refer to http:\/\/www.magento.com for more information.\n *\n * @category    Mage\n * @package     Mage_Eav\n * @copyright  Copyright (c) 2006-2016 X.commerce, Inc. and affiliates (http:\/\/www.magento.com)\n * @license    http:\/\/opensource.org\/licenses\/osl-3.0.php  Open Software License (OSL 3.0)\n *\/",2],["T_WHITESPACE","\n\n\n",25],["T_DOC_COMMENT","\/**\n * EAV Entity Setup Model\n *\n * @category   Mage\n * @package    Mage_Eav\n * @author     Magento Core Team <core@magentocommerce.com>\n *\/",28],["T_WHITESPACE","\n",34],["T_CLASS","class",35],["T_WHITESPACE"," ",35],["T_STRING","Mage_Eav_Model_Entity_Setup",35],["T_WHITESPACE"," ",35],["T_EXTENDS","extends",35],["T_WHITESPACE"," ",35],["T_STRING","Mage_Core_Model_Resource_Setup",35],["T_WHITESPACE","\n",35],"{",["T_WHITESPACE","\n    ",36],["T_DOC_COMMENT","\/**\n     * General Attribute Group Name\n     *\n     * @var string\n     *\/",37],["T_WHITESPACE","\n    ",41],["T_PROTECTED","protected",42],["T_WHITESPACE"," ",42],["T_VARIABLE","$_generalGroupName",42],["T_WHITESPACE","        ",42],"=",["T_WHITESPACE"," ",42],["T_CONSTANT_ENCAPSED_STRING","'General'",42],";",["T_WHITESPACE","\n\n    ",42],["T_DOC_COMMENT","\/**\n     * Default attribute group name to id pairs\n     *\n     * @var array\n     *\/",44],["T_WHITESPACE","\n    ",48],["T_PUBLIC","public",49],["T_WHITESPACE"," ",49],["T_VARIABLE","$defaultGroupIdAssociations",49],["T_WHITESPACE","  ",49],"=",["T_WHITESPACE"," ",49],["T_ARRAY","array",49],"(",["T_WHITESPACE","\n        ",49],["T_CONSTANT_ENCAPSED_STRING","'General'",50],["T_WHITESPACE","   ",50],["T_DOUBLE_ARROW","=>",50],["T_WHITESPACE"," ",50],["T_LNUMBER","1",50],["T_WHITESPACE","\n    ",50],")",";",["T_WHITESPACE","\n\n    ",51],["T_DOC_COMMENT","\/**\n     * Default attribute group name\n     *\n     * @var string\n     *\/",53],["T_WHITESPACE","\n    ",57],["T_PROTECTED","protected",58],["T_WHITESPACE"," ",58],["T_VARIABLE","$_defaultGroupName",58],["T_WHITESPACE","         ",58],"=",["T_WHITESPACE"," ",58],["T_CONSTANT_ENCAPSED_STRING","'Default'",58],";",["T_WHITESPACE","\n\n    ",58],["T_DOC_COMMENT","\/**\n     * Default attribute set name\n     *\n     * @var string\n     *\/",60],["T_WHITESPACE","\n    ",64],["T_PROTECTED","protected",65],["T_WHITESPACE"," ",65],["T_VARIABLE","$_defaultAttributeSetName",65],["T_WHITESPACE","  ",65],"=",["T_WHITESPACE"," ",65],["T_CONSTANT_ENCAPSED_STRING","'Default'",65],";",["T_WHITESPACE","\n\n    ",65],["T_DOC_COMMENT","\/**\n     * Clean cache\n     *\n     * @return Mage_Eav_Model_Entity_Setup\n     *\/",67],["T_WHITESPACE","\n    ",71],["T_PUBLIC","public",72],["T_WHITESPACE"," ",72],["T_FUNCTION","function",72],["T_WHITESPACE"," ",72],["T_STRING","cleanCache",72],"(",")",["T_WHITESPACE","\n    ",72],"{",["T_WHITESPACE","\n        ",73],["T_STRING","Mage",74],["T_DOUBLE_COLON","::",74],["T_STRING","app",74],"(",")",["T_OBJECT_OPERATOR","->",74],["T_STRING","cleanCache",74],"(",["T_ARRAY","array",74],"(",["T_CONSTANT_ENCAPSED_STRING","'eav'",74],")",")",";",["T_WHITESPACE","\n        ",74],["T_RETURN","return",75],["T_WHITESPACE"," ",75],["T_VARIABLE","$this",75],";",["T_WHITESPACE","\n    ",75],"}",["T_WHITESPACE","\n\n    ",76],["T_DOC_COMMENT","\/**\n     * Install Default Group Ids\n     *\n     * @return Mage_Eav_Model_Entity_Setup\n     *\/",78],["T_WHITESPACE","\n    ",82],["T_PUBLIC","public",83],["T_WHITESPACE"," ",83],["T_FUNCTION","function",83],["T_WHITESPACE"," ",83],["T_STRING","installDefaultGroupIds",83],"(",")",["T_WHITESPACE","\n    ",83],"{",["T_WHITESPACE","\n        ",84],["T_VARIABLE","$setIds",85],["T_WHITESPACE"," ",85],"=",["T_WHITESPACE"," ",85],["T_VARIABLE","$this",85],["T_OBJECT_OPERATOR","->",85],["T_STRING","getAllAttributeSetIds",85],"(",")",";",["T_WHITESPACE","\n        ",85],["T_FOREACH","foreach",86],["T_WHITESPACE"," ",86],"(",["T_VARIABLE","$this",86],["T_OBJECT_OPERATOR","->",86],["T_STRING","defaultGroupIdAssociations",86],["T_WHITESPACE"," ",86],["T_AS","as",86],["T_WHITESPACE"," ",86],["T_VARIABLE","$defaultGroupName",86],["T_WHITESPACE"," ",86],["T_DOUBLE_ARROW","=>",86],["T_WHITESPACE"," ",86],["T_VARIABLE","$defaultGroupId",86],")",["T_WHITESPACE"," ",86],"{",["T_WHITESPACE","\n            ",86],["T_FOREACH","foreach",87],["T_WHITESPACE"," ",87],"(",["T_VARIABLE","$setIds",87],["T_WHITESPACE"," ",87],["T_AS","as",87],["T_WHITESPACE"," ",87],["T_VARIABLE","$set",87],")",["T_WHITESPACE"," ",87],"{",["T_WHITESPACE","\n                ",87],["T_VARIABLE","$groupId",88],["T_WHITESPACE"," ",88],"=",["T_WHITESPACE"," ",88],["T_VARIABLE","$this",88],["T_OBJECT_OPERATOR","->",88],["T_STRING","getTableRow",88],"(",["T_CONSTANT_ENCAPSED_STRING","'eav\/attribute_group'",88],",",["T_WHITESPACE","\n                    ",88],["T_CONSTANT_ENCAPSED_STRING","'attribute_group_name'",89],",",["T_WHITESPACE"," ",89],["T_VARIABLE","$defaultGroupName",89],",",["T_WHITESPACE"," ",89],["T_CONSTANT_ENCAPSED_STRING","'attribute_group_id'",89],",",["T_WHITESPACE"," ",89],["T_CONSTANT_ENCAPSED_STRING","'attribute_set_id'",89],",",["T_WHITESPACE"," ",89],["T_VARIABLE","$set",89],["T_WHITESPACE","\n                ",89],")",";",["T_WHITESPACE","\n                ",90],["T_IF","if",91],["T_WHITESPACE"," ",91],"(","!",["T_VARIABLE","$groupId",91],")",["T_WHITESPACE"," ",91],"{",["T_WHITESPACE","\n                    ",91],["T_VARIABLE","$groupId",92],["T_WHITESPACE"," ",92],"=",["T_WHITESPACE"," ",92],["T_VARIABLE","$this",92],["T_OBJECT_OPERATOR","->",92],["T_STRING","getTableRow",92],"(",["T_CONSTANT_ENCAPSED_STRING","'eav\/attribute_group'",92],",",["T_WHITESPACE","\n                        ",92],["T_CONSTANT_ENCAPSED_STRING","'attribute_set_id'",93],",",["T_WHITESPACE"," ",93],["T_VARIABLE","$set",93],",",["T_WHITESPACE"," ",93],["T_CONSTANT_ENCAPSED_STRING","'attribute_group_id'",93],["T_WHITESPACE","\n                    ",93],")",";",["T_WHITESPACE","\n                ",94],"}",["T_WHITESPACE","\n                ",95],["T_VARIABLE","$this",96],["T_OBJECT_OPERATOR","->",96],["T_STRING","updateTableRow",96],"(",["T_CONSTANT_ENCAPSED_STRING","'eav\/attribute_group'",96],",",["T_WHITESPACE","\n                    ",96],["T_CONSTANT_ENCAPSED_STRING","'attribute_group_id'",97],",",["T_WHITESPACE"," ",97],["T_VARIABLE","$groupId",97],",",["T_WHITESPACE"," ",97],["T_CONSTANT_ENCAPSED_STRING","'default_id'",97],",",["T_WHITESPACE"," ",97],["T_VARIABLE","$defaultGroupId",97],["T_WHITESPACE","\n                ",97],")",";",["T_WHITESPACE","\n            ",98],"}",["T_WHITESPACE","\n        ",99],"}",["T_WHITESPACE","\n\n        ",100],["T_RETURN","return",102],["T_WHITESPACE"," ",102],["T_VARIABLE","$this",102],";",["T_WHITESPACE","\n    ",102],"}",["T_WHITESPACE","\n\n\n",103],["T_COMMENT","\/******************* ENTITY TYPES *****************\/",106],["T_WHITESPACE","\n\n    ",106],["T_DOC_COMMENT","\/**\n     * Add an entity type\n     *\n     * If already exists updates the entity type with params data\n     *\n     * @param string $code\n     * @param array $params\n     * @return Mage_Eav_Model_Entity_Setup\n     *\/",108],["T_WHITESPACE","\n    ",116],["T_PUBLIC","public",117],["T_WHITESPACE"," ",117],["T_FUNCTION","function",117],["T_WHITESPACE"," ",117],["T_STRING","addEntityType",117],"(",["T_VARIABLE","$code",117],",",["T_WHITESPACE"," ",117],["T_ARRAY","array",117],["T_WHITESPACE"," ",117],["T_VARIABLE","$params",117],")",["T_WHITESPACE","\n    ",117],"{",["T_WHITESPACE","\n        ",118],["T_VARIABLE","$data",119],["T_WHITESPACE"," ",119],"=",["T_WHITESPACE"," ",119],["T_ARRAY","array",119],"(",["T_WHITESPACE","\n            ",119],["T_CONSTANT_ENCAPSED_STRING","'entity_type_code'",120],["T_WHITESPACE","              ",120],["T_DOUBLE_ARROW","=>",120],["T_WHITESPACE"," ",120],["T_VARIABLE","$code",120],",",["T_WHITESPACE","\n            ",120],["T_CONSTANT_ENCAPSED_STRING","'entity_model'",121],["T_WHITESPACE","                  ",121],["T_DOUBLE_ARROW","=>",121],["T_WHITESPACE"," ",121],["T_VARIABLE","$params",121],"[",["T_CONSTANT_ENCAPSED_STRING","'entity_model'",121],"]",",",["T_WHITESPACE","\n            ",121],["T_CONSTANT_ENCAPSED_STRING","'attribute_model'",122],["T_WHITESPACE","               ",122],["T_DOUBLE_ARROW","=>",122],["T_WHITESPACE"," ",122],["T_VARIABLE","$this",122],["T_OBJECT_OPERATOR","->",122],["T_STRING","_getValue",122],"(",["T_VARIABLE","$params",122],",",["T_WHITESPACE"," ",122],["T_CONSTANT_ENCAPSED_STRING","'attribute_model'",122],")",",",["T_WHITESPACE","\n            ",122],["T_CONSTANT_ENCAPSED_STRING","'entity_table'",123],["T_WHITESPACE","                  ",123],["T_DOUBLE_ARROW","=>",123],["T_WHITESPACE"," ",123],["T_VARIABLE","$this",123],["T_OBJECT_OPERATOR","->",123],["T_STRING","_getValue",123],"(",["T_VARIABLE","$params",123],",",["T_WHITESPACE"," ",123],["T_CONSTANT_ENCAPSED_STRING","'table'",123],",",["T_WHITESPACE"," ",123],["T_CONSTANT_ENCAPSED_STRING","'eav\/entity'",123],")",",",["T_WHITESPACE","\n            ",123],["T_CONSTANT_ENCAPSED_STRING","'value_table_prefix'",124],["T_WHITESPACE","            ",124],["T_DOUBLE_ARROW","=>",124],["T_WHITESPACE"," ",124],["T_VARIABLE","$this",124],["T_OBJECT_OPERATOR","->",124],["T_STRING","_getValue",124],"(",["T_VARIABLE","$params",124],",",["T_WHITESPACE"," ",124],["T_CONSTANT_ENCAPSED_STRING","'table_prefix'",124],")",",",["T_WHITESPACE","\n            ",124],["T_CONSTANT_ENCAPSED_STRING","'entity_id_field'",125],["T_WHITESPACE","               ",125],["T_DOUBLE_ARROW","=>",125],["T_WHITESPACE"," ",125],["T_VARIABLE","$this",125],["T_OBJECT_OPERATOR","->",125],["T_STRING","_getValue",125],"(",["T_VARIABLE","$params",125],",",["T_WHITESPACE"," ",125],["T_CONSTANT_ENCAPSED_STRING","'id_field'",125],")",",",["T_WHITESPACE","\n            ",125],["T_CONSTANT_ENCAPSED_STRING","'increment_model'",126],["T_WHITESPACE","               ",126],["T_DOUBLE_ARROW","=>",126],["T_WHITESPACE"," ",126],["T_VARIABLE","$this",126],["T_OBJECT_OPERATOR","->",126],["T_STRING","_getValue",126],"(",["T_VARIABLE","$params",126],",",["T_WHITESPACE"," ",126],["T_CONSTANT_ENCAPSED_STRING","'increment_model'",126],")",",",["T_WHITESPACE","\n            ",126],["T_CONSTANT_ENCAPSED_STRING","'increment_per_store'",127],["T_WHITESPACE","           ",127],["T_DOUBLE_ARROW","=>",127],["T_WHITESPACE"," ",127],["T_VARIABLE","$this",127],["T_OBJECT_OPERATOR","->",127],["T_STRING","_getValue",127],"(",["T_VARIABLE","$params",127],",",["T_WHITESPACE"," ",127],["T_CONSTANT_ENCAPSED_STRING","'increment_per_store'",127],",",["T_WHITESPACE"," ",127],["T_LNUMBER","0",127],")",",",["T_WHITESPACE","\n            ",127],["T_CONSTANT_ENCAPSED_STRING","'increment_pad_length'",128],["T_WHITESPACE","          ",128],["T_DOUBLE_ARROW","=>",128],["T_WHITESPACE"," ",128],["T_VARIABLE","$this",128],["T_OBJECT_OPERATOR","->",128],["T_STRING","_getValue",128],"(",["T_VARIABLE","$params",128],",",["T_WHITESPACE"," ",128],["T_CONSTANT_ENCAPSED_STRING","'increment_pad_length'",128],",",["T_WHITESPACE"," ",128],["T_LNUMBER","8",128],")",",",["T_WHITESPACE","\n            ",128],["T_CONSTANT_ENCAPSED_STRING","'increment_pad_char'",129],["T_WHITESPACE","            ",129],["T_DOUBLE_ARROW","=>",129],["T_WHITESPACE"," ",129],["T_VARIABLE","$this",129],["T_OBJECT_OPERATOR","->",129],["T_STRING","_getValue",129],"(",["T_VARIABLE","$params",129],",",["T_WHITESPACE"," ",129],["T_CONSTANT_ENCAPSED_STRING","'increment_pad_char'",129],",",["T_WHITESPACE"," ",129],["T_LNUMBER","0",129],")",",",["T_WHITESPACE","\n            ",129],["T_CONSTANT_ENCAPSED_STRING","'additional_attribute_table'",130],["T_WHITESPACE","    ",130],["T_DOUBLE_ARROW","=>",130],["T_WHITESPACE"," ",130],["T_VARIABLE","$this",130],["T_OBJECT_OPERATOR","->",130],["T_STRING","_getValue",130],"(",["T_VARIABLE","$params",130],",",["T_WHITESPACE"," ",130],["T_CONSTANT_ENCAPSED_STRING","'additional_attribute_table'",130],")",",",["T_WHITESPACE","\n            ",130],["T_CONSTANT_ENCAPSED_STRING","'entity_attribute_collection'",131],["T_WHITESPACE","   ",131],["T_DOUBLE_ARROW","=>",131],["T_WHITESPACE"," ",131],["T_VARIABLE","$this",131],["T_OBJECT_OPERATOR","->",131],["T_STRING","_getValue",131],"(",["T_VARIABLE","$params",131],",",["T_WHITESPACE"," ",131],["T_CONSTANT_ENCAPSED_STRING","'entity_attribute_collection'",131],")",",",["T_WHITESPACE","\n        ",131],")",";",["T_WHITESPACE","\n\n        ",132],["T_IF","if",134],["T_WHITESPACE"," ",134],"(",["T_VARIABLE","$this",134],["T_OBJECT_OPERATOR","->",134],["T_STRING","getEntityType",134],"(",["T_VARIABLE","$code",134],",",["T_WHITESPACE"," ",134],["T_CONSTANT_ENCAPSED_STRING","'entity_type_id'",134],")",")",["T_WHITESPACE"," ",134],"{",["T_WHITESPACE","\n            ",134],["T_VARIABLE","$this",135],["T_OBJECT_OPERATOR","->",135],["T_STRING","updateEntityType",135],"(",["T_VARIABLE","$code",135],",",["T_WHITESPACE"," ",135],["T_VARIABLE","$data",135],")",";",["T_WHITESPACE","\n        ",135],"}",["T_WHITESPACE"," ",136],["T_ELSE","else",136],["T_WHITESPACE"," ",136],"{",["T_WHITESPACE","\n            ",136],["T_VARIABLE","$this",137],["T_OBJECT_OPERATOR","->",137],["T_STRING","_conn",137],["T_OBJECT_OPERATOR","->",137],["T_STRING","insert",137],"(",["T_VARIABLE","$this",137],["T_OBJECT_OPERATOR","->",137],["T_STRING","getTable",137],"(",["T_CONSTANT_ENCAPSED_STRING","'eav\/entity_type'",137],")",",",["T_WHITESPACE"," ",137],["T_VARIABLE","$data",137],")",";",["T_WHITESPACE","\n        ",137],"}",["T_WHITESPACE","\n\n        ",138],["T_IF","if",140],["T_WHITESPACE"," ",140],"(","!",["T_EMPTY","empty",140],"(",["T_VARIABLE","$params",140],"[",["T_CONSTANT_ENCAPSED_STRING","'default_group'",140],"]",")",")",["T_WHITESPACE"," ",140],"{",["T_WHITESPACE","\n            ",140],["T_VARIABLE","$defaultGroup",141],["T_WHITESPACE"," ",141],"=",["T_WHITESPACE"," ",141],["T_VARIABLE","$params",141],"[",["T_CONSTANT_ENCAPSED_STRING","'default_group'",141],"]",";",["T_WHITESPACE","\n        ",141],"}",["T_WHITESPACE"," ",142],["T_ELSE","else",142],["T_WHITESPACE"," ",142],"{",["T_WHITESPACE","\n            ",142],["T_VARIABLE","$defaultGroup",143],["T_WHITESPACE"," ",143],"=",["T_WHITESPACE"," ",143],["T_VARIABLE","$this",143],["T_OBJECT_OPERATOR","->",143],["T_STRING","_defaultGroupName",143],";",["T_WHITESPACE","\n        ",143],"}",["T_WHITESPACE","\n\n        ",144],["T_VARIABLE","$this",146],["T_OBJECT_OPERATOR","->",146],["T_STRING","addAttributeSet",146],"(",["T_VARIABLE","$code",146],",",["T_WHITESPACE"," ",146],["T_VARIABLE","$this",146],["T_OBJECT_OPERATOR","->",146],["T_STRING","_defaultAttributeSetName",146],")",";",["T_WHITESPACE","\n        ",146],["T_VARIABLE","$this",147],["T_OBJECT_OPERATOR","->",147],["T_STRING","addAttributeGroup",147],"(",["T_VARIABLE","$code",147],",",["T_WHITESPACE"," ",147],["T_VARIABLE","$this",147],["T_OBJECT_OPERATOR","->",147],["T_STRING","_defaultGroupName",147],",",["T_WHITESPACE"," ",147],["T_VARIABLE","$this",147],["T_OBJECT_OPERATOR","->",147],["T_STRING","_generalGroupName",147],")",";",["T_WHITESPACE","\n\n        ",147],["T_RETURN","return",149],["T_WHITESPACE"," ",149],["T_VARIABLE","$this",149],";",["T_WHITESPACE","\n    ",149],"}",["T_WHITESPACE","\n\n    ",150],["T_DOC_COMMENT","\/**\n     * Update entity row\n     *\n     * @param string $code\n     * @param string $field\n     * @param string $value\n     * @return Mage_Eav_Model_Entity_Setup\n     *\/",152],["T_WHITESPACE","\n    ",159],["T_PUBLIC","public",160],["T_WHITESPACE"," ",160],["T_FUNCTION","function",160],["T_WHITESPACE"," ",160],["T_STRING","updateEntityType",160],"(",["T_VARIABLE","$code",160],",",["T_WHITESPACE"," ",160],["T_VARIABLE","$field",160],",",["T_WHITESPACE"," ",160],["T_VARIABLE","$value",160],["T_WHITESPACE"," ",160],"=",["T_WHITESPACE"," ",160],["T_STRING","null",160],")",["T_WHITESPACE","\n    ",160],"{",["T_WHITESPACE","\n        ",161],["T_VARIABLE","$this",162],["T_OBJECT_OPERATOR","->",162],["T_STRING","updateTableRow",162],"(",["T_CONSTANT_ENCAPSED_STRING","'eav\/entity_type'",162],",",["T_WHITESPACE","\n            ",162],["T_CONSTANT_ENCAPSED_STRING","'entity_type_id'",163],",",["T_WHITESPACE"," ",163],["T_VARIABLE","$this",163],["T_OBJECT_OPERATOR","->",163],["T_STRING","getEntityTypeId",163],"(",["T_VARIABLE","$code",163],")",",",["T_WHITESPACE"," ",163],["T_VARIABLE","$field",163],",",["T_WHITESPACE"," ",163],["T_VARIABLE","$value",163],["T_WHITESPACE","\n        ",163],")",";",["T_WHITESPACE","\n        ",164],["T_RETURN","return",165],["T_WHITESPACE"," ",165],["T_VARIABLE","$this",165],";",["T_WHITESPACE","\n    ",165],"}",["T_WHITESPACE","\n\n    ",166],["T_DOC_COMMENT","\/**\n     * Retrieve Entity Type Data\n     *\n     * @param int|string $id\n     * @param string $field\n     * @return mixed\n     *\/",168],["T_WHITESPACE","\n    ",174],["T_PUBLIC","public",175],["T_WHITESPACE"," ",175],["T_FUNCTION","function",175],["T_WHITESPACE"," ",175],["T_STRING","getEntityType",175],"(",["T_VARIABLE","$id",175],",",["T_WHITESPACE"," ",175],["T_VARIABLE","$field",175],["T_WHITESPACE"," ",175],"=",["T_WHITESPACE"," ",175],["T_STRING","null",175],")",["T_WHITESPACE","\n    ",175],"{",["T_WHITESPACE","\n        ",176],["T_RETURN","return",177],["T_WHITESPACE"," ",177],["T_VARIABLE","$this",177],["T_OBJECT_OPERATOR","->",177],["T_STRING","getTableRow",177],"(",["T_CONSTANT_ENCAPSED_STRING","'eav\/entity_type'",177],",",["T_WHITESPACE","\n            ",177],["T_STRING","is_numeric",178],"(",["T_VARIABLE","$id",178],")",["T_WHITESPACE"," ",178],"?",["T_WHITESPACE"," ",178],["T_CONSTANT_ENCAPSED_STRING","'entity_type_id'",178],["T_WHITESPACE"," ",178],":",["T_WHITESPACE"," ",178],["T_CONSTANT_ENCAPSED_STRING","'entity_type_code'",178],",",["T_WHITESPACE"," ",178],["T_VARIABLE","$id",178],",",["T_WHITESPACE"," ",178],["T_VARIABLE","$field",178],["T_WHITESPACE","\n        ",178],")",";",["T_WHITESPACE","\n    ",179],"}",["T_WHITESPACE","\n\n    ",180],["T_DOC_COMMENT","\/**\n     * Retrieve Entity Type Id By Id or Code\n     *\n     * @param mixed $entityTypeId\n     * @return int\n     *\/",182],["T_WHITESPACE","\n    ",187],["T_PUBLIC","public",188],["T_WHITESPACE"," ",188],["T_FUNCTION","function",188],["T_WHITESPACE"," ",188],["T_STRING","getEntityTypeId",188],"(",["T_VARIABLE","$entityTypeId",188],")",["T_WHITESPACE","\n    ",188],"{",["T_WHITESPACE","\n        ",189],["T_IF","if",190],["T_WHITESPACE"," ",190],"(","!",["T_STRING","is_numeric",190],"(",["T_VARIABLE","$entityTypeId",190],")",")",["T_WHITESPACE"," ",190],"{",["T_WHITESPACE","\n            ",190],["T_VARIABLE","$entityTypeId",191],["T_WHITESPACE"," ",191],"=",["T_WHITESPACE"," ",191],["T_VARIABLE","$this",191],["T_OBJECT_OPERATOR","->",191],["T_STRING","getEntityType",191],"(",["T_VARIABLE","$entityTypeId",191],",",["T_WHITESPACE"," ",191],["T_CONSTANT_ENCAPSED_STRING","'entity_type_id'",191],")",";",["T_WHITESPACE","\n        ",191],"}",["T_WHITESPACE","\n        ",192],["T_IF","if",193],["T_WHITESPACE"," ",193],"(","!",["T_STRING","is_numeric",193],"(",["T_VARIABLE","$entityTypeId",193],")",")",["T_WHITESPACE"," ",193],"{",["T_WHITESPACE","\n            ",193],["T_THROW","throw",194],["T_WHITESPACE"," ",194],["T_STRING","Mage",194],["T_DOUBLE_COLON","::",194],["T_STRING","exception",194],"(",["T_CONSTANT_ENCAPSED_STRING","'Mage_Eav'",194],",",["T_WHITESPACE"," ",194],["T_STRING","Mage",194],["T_DOUBLE_COLON","::",194],["T_STRING","helper",194],"(",["T_CONSTANT_ENCAPSED_STRING","'eav'",194],")",["T_OBJECT_OPERATOR","->",194],["T_STRING","__",194],"(",["T_CONSTANT_ENCAPSED_STRING","'Wrong entity ID'",194],")",")",";",["T_WHITESPACE","\n        ",194],"}",["T_WHITESPACE","\n\n        ",195],["T_RETURN","return",197],["T_WHITESPACE"," ",197],["T_VARIABLE","$entityTypeId",197],";",["T_WHITESPACE","\n    ",197],"}",["T_WHITESPACE","\n\n    ",198],["T_DOC_COMMENT","\/**\n     * Remove entity type by Id or Code\n     *\n     * @param mixed $id\n     * @return Mage_Eav_Model_Entity_Setup\n     *\/",200],["T_WHITESPACE","\n    ",205],["T_PUBLIC","public",206],["T_WHITESPACE"," ",206],["T_FUNCTION","function",206],["T_WHITESPACE"," ",206],["T_STRING","removeEntityType",206],"(",["T_VARIABLE","$id",206],")",["T_WHITESPACE","\n    ",206],"{",["T_WHITESPACE","\n        ",207],["T_IF","if",208],["T_WHITESPACE"," ",208],"(",["T_STRING","is_numeric",208],"(",["T_VARIABLE","$id",208],")",")",["T_WHITESPACE"," ",208],"{",["T_WHITESPACE","\n            ",208],["T_VARIABLE","$this",209],["T_OBJECT_OPERATOR","->",209],["T_STRING","deleteTableRow",209],"(",["T_CONSTANT_ENCAPSED_STRING","'eav\/entity_type'",209],",",["T_WHITESPACE"," ",209],["T_CONSTANT_ENCAPSED_STRING","'entity_type_id'",209],",",["T_WHITESPACE"," ",209],["T_VARIABLE","$id",209],")",";",["T_WHITESPACE","\n        ",209],"}",["T_WHITESPACE"," ",210],["T_ELSE","else",210],["T_WHITESPACE"," ",210],"{",["T_WHITESPACE","\n            ",210],["T_VARIABLE","$this",211],["T_OBJECT_OPERATOR","->",211],["T_STRING","deleteTableRow",211],"(",["T_CONSTANT_ENCAPSED_STRING","'eav\/entity_type'",211],",",["T_WHITESPACE"," ",211],["T_CONSTANT_ENCAPSED_STRING","'entity_type_code'",211],",",["T_WHITESPACE"," ",211],["T_STRING_CAST","(string)",211],["T_VARIABLE","$id",211],")",";",["T_WHITESPACE","\n        ",211],"}",["T_WHITESPACE","\n\n        ",212],["T_RETURN","return",214],["T_WHITESPACE"," ",214],["T_VARIABLE","$this",214],";",["T_WHITESPACE","\n    ",214],"}",["T_WHITESPACE","\n\n",215],["T_COMMENT","\/******************* ATTRIBUTE SETS *****************\/",217],["T_WHITESPACE","\n\n    ",217],["T_DOC_COMMENT","\/**\n     * Retrieve Attribute Set Sort order\n     *\n     * @param mixed $entityTypeId\n     * @param int $sortOrder\n     * @return int\n     *\/",219],["T_WHITESPACE","\n    ",225],["T_PUBLIC","public",226],["T_WHITESPACE"," ",226],["T_FUNCTION","function",226],["T_WHITESPACE"," ",226],["T_STRING","getAttributeSetSortOrder",226],"(",["T_VARIABLE","$entityTypeId",226],",",["T_WHITESPACE"," ",226],["T_VARIABLE","$sortOrder",226],["T_WHITESPACE"," ",226],"=",["T_WHITESPACE"," ",226],["T_STRING","null",226],")",["T_WHITESPACE","\n    ",226],"{",["T_WHITESPACE","\n        ",227],["T_IF","if",228],["T_WHITESPACE"," ",228],"(","!",["T_STRING","is_numeric",228],"(",["T_VARIABLE","$sortOrder",228],")",")",["T_WHITESPACE"," ",228],"{",["T_WHITESPACE","\n            ",228],["T_VARIABLE","$bind",229],["T_WHITESPACE","   ",229],"=",["T_WHITESPACE"," ",229],["T_ARRAY","array",229],"(",["T_CONSTANT_ENCAPSED_STRING","'entity_type_id'",229],["T_WHITESPACE"," ",229],["T_DOUBLE_ARROW","=>",229],["T_WHITESPACE"," ",229],["T_VARIABLE","$this",229],["T_OBJECT_OPERATOR","->",229],["T_STRING","getEntityTypeId",229],"(",["T_VARIABLE","$entityTypeId",229],")",")",";",["T_WHITESPACE","\n            ",229],["T_VARIABLE","$select",230],["T_WHITESPACE"," ",230],"=",["T_WHITESPACE"," ",230],["T_VARIABLE","$this",230],["T_OBJECT_OPERATOR","->",230],["T_STRING","_conn",230],["T_OBJECT_OPERATOR","->",230],["T_STRING","select",230],"(",")",["T_WHITESPACE","\n                ",230],["T_OBJECT_OPERATOR","->",231],["T_STRING","from",231],"(",["T_VARIABLE","$this",231],["T_OBJECT_OPERATOR","->",231],["T_STRING","getTable",231],"(",["T_CONSTANT_ENCAPSED_STRING","'eav\/attribute_set'",231],")",",",["T_WHITESPACE"," ",231],["T_CONSTANT_ENCAPSED_STRING","'MAX(sort_order)'",231],")",["T_WHITESPACE","\n                ",231],["T_OBJECT_OPERATOR","->",232],["T_STRING","where",232],"(",["T_CONSTANT_ENCAPSED_STRING","'entity_type_id = :entity_type_id'",232],")",";",["T_WHITESPACE","\n\n            ",232],["T_VARIABLE","$sortOrder",234],["T_WHITESPACE"," ",234],"=",["T_WHITESPACE"," ",234],["T_VARIABLE","$this",234],["T_OBJECT_OPERATOR","->",234],["T_STRING","_conn",234],["T_OBJECT_OPERATOR","->",234],["T_STRING","fetchOne",234],"(",["T_VARIABLE","$select",234],",",["T_WHITESPACE"," ",234],["T_VARIABLE","$bind",234],")",["T_WHITESPACE"," ",234],"+",["T_WHITESPACE"," ",234],["T_LNUMBER","1",234],";",["T_WHITESPACE","\n        ",234],"}",["T_WHITESPACE","\n\n        ",235],["T_RETURN","return",237],["T_WHITESPACE"," ",237],["T_VARIABLE","$sortOrder",237],";",["T_WHITESPACE","\n    ",237],"}",["T_WHITESPACE","\n\n    ",238],["T_DOC_COMMENT","\/**\n     * Add Attribute Set\n     *\n     * @param mixed $entityTypeId\n     * @param string $name\n     * @param int $sortOrder\n     * @return Mage_Eav_Model_Entity_Setup\n     *\/",240],["T_WHITESPACE","\n    ",247],["T_PUBLIC","public",248],["T_WHITESPACE"," ",248],["T_FUNCTION","function",248],["T_WHITESPACE"," ",248],["T_STRING","addAttributeSet",248],"(",["T_VARIABLE","$entityTypeId",248],",",["T_WHITESPACE"," ",248],["T_VARIABLE","$name",248],",",["T_WHITESPACE"," ",248],["T_VARIABLE","$sortOrder",248],["T_WHITESPACE"," ",248],"=",["T_WHITESPACE"," ",248],["T_STRING","null",248],")",["T_WHITESPACE","\n    ",248],"{",["T_WHITESPACE","\n        ",249],["T_VARIABLE","$data",250],["T_WHITESPACE"," ",250],"=",["T_WHITESPACE"," ",250],["T_ARRAY","array",250],"(",["T_WHITESPACE","\n            ",250],["T_CONSTANT_ENCAPSED_STRING","'entity_type_id'",251],["T_WHITESPACE","        ",251],["T_DOUBLE_ARROW","=>",251],["T_WHITESPACE"," ",251],["T_VARIABLE","$this",251],["T_OBJECT_OPERATOR","->",251],["T_STRING","getEntityTypeId",251],"(",["T_VARIABLE","$entityTypeId",251],")",",",["T_WHITESPACE","\n            ",251],["T_CONSTANT_ENCAPSED_STRING","'attribute_set_name'",252],["T_WHITESPACE","    ",252],["T_DOUBLE_ARROW","=>",252],["T_WHITESPACE"," ",252],["T_VARIABLE","$name",252],",",["T_WHITESPACE","\n            ",252],["T_CONSTANT_ENCAPSED_STRING","'sort_order'",253],["T_WHITESPACE","            ",253],["T_DOUBLE_ARROW","=>",253],["T_WHITESPACE"," ",253],["T_VARIABLE","$this",253],["T_OBJECT_OPERATOR","->",253],["T_STRING","getAttributeSetSortOrder",253],"(",["T_VARIABLE","$entityTypeId",253],",",["T_WHITESPACE"," ",253],["T_VARIABLE","$sortOrder",253],")",",",["T_WHITESPACE","\n        ",253],")",";",["T_WHITESPACE","\n\n        ",254],["T_VARIABLE","$setId",256],["T_WHITESPACE"," ",256],"=",["T_WHITESPACE"," ",256],["T_VARIABLE","$this",256],["T_OBJECT_OPERATOR","->",256],["T_STRING","getAttributeSet",256],"(",["T_VARIABLE","$entityTypeId",256],",",["T_WHITESPACE"," ",256],["T_VARIABLE","$name",256],",",["T_WHITESPACE"," ",256],["T_CONSTANT_ENCAPSED_STRING","'attribute_set_id'",256],")",";",["T_WHITESPACE","\n        ",256],["T_IF","if",257],["T_WHITESPACE"," ",257],"(",["T_VARIABLE","$setId",257],")",["T_WHITESPACE"," ",257],"{",["T_WHITESPACE","\n            ",257],["T_VARIABLE","$this",258],["T_OBJECT_OPERATOR","->",258],["T_STRING","updateAttributeSet",258],"(",["T_VARIABLE","$entityTypeId",258],",",["T_WHITESPACE"," ",258],["T_VARIABLE","$setId",258],",",["T_WHITESPACE"," ",258],["T_VARIABLE","$data",258],")",";",["T_WHITESPACE","\n        ",258],"}",["T_WHITESPACE"," ",259],["T_ELSE","else",259],["T_WHITESPACE"," ",259],"{",["T_WHITESPACE","\n            ",259],["T_VARIABLE","$this",260],["T_OBJECT_OPERATOR","->",260],["T_STRING","_conn",260],["T_OBJECT_OPERATOR","->",260],["T_STRING","insert",260],"(",["T_VARIABLE","$this",260],["T_OBJECT_OPERATOR","->",260],["T_STRING","getTable",260],"(",["T_CONSTANT_ENCAPSED_STRING","'eav\/attribute_set'",260],")",",",["T_WHITESPACE"," ",260],["T_VARIABLE","$data",260],")",";",["T_WHITESPACE","\n\n            ",260],["T_VARIABLE","$this",262],["T_OBJECT_OPERATOR","->",262],["T_STRING","addAttributeGroup",262],"(",["T_VARIABLE","$entityTypeId",262],",",["T_WHITESPACE"," ",262],["T_VARIABLE","$name",262],",",["T_WHITESPACE"," ",262],["T_VARIABLE","$this",262],["T_OBJECT_OPERATOR","->",262],["T_STRING","_generalGroupName",262],")",";",["T_WHITESPACE","\n        ",262],"}",["T_WHITESPACE","\n\n        ",263],["T_RETURN","return",265],["T_WHITESPACE"," ",265],["T_VARIABLE","$this",265],";",["T_WHITESPACE","\n    ",265],"}",["T_WHITESPACE","\n\n    ",266],["T_DOC_COMMENT","\/**\n     * Update attribute set data\n     *\n     * @param mixed $entityTypeId\n     * @param int $id\n     * @param string $field\n     * @param mixed $value\n     * @return Mage_Eav_Model_Entity_Setup\n     *\/",268],["T_WHITESPACE","\n    ",276],["T_PUBLIC","public",277],["T_WHITESPACE"," ",277],["T_FUNCTION","function",277],["T_WHITESPACE"," ",277],["T_STRING","updateAttributeSet",277],"(",["T_VARIABLE","$entityTypeId",277],",",["T_WHITESPACE"," ",277],["T_VARIABLE","$id",277],",",["T_WHITESPACE"," ",277],["T_VARIABLE","$field",277],",",["T_WHITESPACE"," ",277],["T_VARIABLE","$value",277],["T_WHITESPACE"," ",277],"=",["T_WHITESPACE"," ",277],["T_STRING","null",277],")",["T_WHITESPACE","\n    ",277],"{",["T_WHITESPACE","\n        ",278],["T_VARIABLE","$this",279],["T_OBJECT_OPERATOR","->",279],["T_STRING","updateTableRow",279],"(",["T_CONSTANT_ENCAPSED_STRING","'eav\/attribute_set'",279],",",["T_WHITESPACE","\n            ",279],["T_CONSTANT_ENCAPSED_STRING","'attribute_set_id'",280],",",["T_WHITESPACE"," ",280],["T_VARIABLE","$this",280],["T_OBJECT_OPERATOR","->",280],["T_STRING","getAttributeSetId",280],"(",["T_VARIABLE","$entityTypeId",280],",",["T_WHITESPACE"," ",280],["T_VARIABLE","$id",280],")",",",["T_WHITESPACE","\n            ",280],["T_VARIABLE","$field",281],",",["T_WHITESPACE"," ",281],["T_VARIABLE","$value",281],",",["T_WHITESPACE","\n            ",281],["T_CONSTANT_ENCAPSED_STRING","'entity_type_id'",282],",",["T_WHITESPACE"," ",282],["T_VARIABLE","$this",282],["T_OBJECT_OPERATOR","->",282],["T_STRING","getEntityTypeId",282],"(",["T_VARIABLE","$entityTypeId",282],")",["T_WHITESPACE","\n        ",282],")",";",["T_WHITESPACE","\n        ",283],["T_RETURN","return",284],["T_WHITESPACE"," ",284],["T_VARIABLE","$this",284],";",["T_WHITESPACE","\n    ",284],"}",["T_WHITESPACE","\n\n    ",285],["T_DOC_COMMENT","\/**\n     * Retrieve Attribute set data by id or name\n     *\n     * @param mixed $entityTypeId\n     * @param mixed $id\n     * @param string $field\n     * @return mixed\n     *\/",287],["T_WHITESPACE","\n    ",294],["T_PUBLIC","public",295],["T_WHITESPACE"," ",295],["T_FUNCTION","function",295],["T_WHITESPACE"," ",295],["T_STRING","getAttributeSet",295],"(",["T_VARIABLE","$entityTypeId",295],",",["T_WHITESPACE"," ",295],["T_VARIABLE","$id",295],",",["T_WHITESPACE"," ",295],["T_VARIABLE","$field",295],["T_WHITESPACE"," ",295],"=",["T_WHITESPACE"," ",295],["T_STRING","null",295],")",["T_WHITESPACE","\n    ",295],"{",["T_WHITESPACE","\n        ",296],["T_RETURN","return",297],["T_WHITESPACE"," ",297],["T_VARIABLE","$this",297],["T_OBJECT_OPERATOR","->",297],["T_STRING","getTableRow",297],"(",["T_CONSTANT_ENCAPSED_STRING","'eav\/attribute_set'",297],",",["T_WHITESPACE","\n            ",297],["T_STRING","is_numeric",298],"(",["T_VARIABLE","$id",298],")",["T_WHITESPACE"," ",298],"?",["T_WHITESPACE"," ",298],["T_CONSTANT_ENCAPSED_STRING","'attribute_set_id'",298],["T_WHITESPACE"," ",298],":",["T_WHITESPACE"," ",298],["T_CONSTANT_ENCAPSED_STRING","'attribute_set_name'",298],",",["T_WHITESPACE"," ",298],["T_VARIABLE","$id",298],",",["T_WHITESPACE","\n            ",298],["T_VARIABLE","$field",299],",",["T_WHITESPACE","\n            ",299],["T_CONSTANT_ENCAPSED_STRING","'entity_type_id'",300],",",["T_WHITESPACE"," ",300],["T_VARIABLE","$this",300],["T_OBJECT_OPERATOR","->",300],["T_STRING","getEntityTypeId",300],"(",["T_VARIABLE","$entityTypeId",300],")",["T_WHITESPACE","\n        ",300],")",";",["T_WHITESPACE","\n    ",301],"}",["T_WHITESPACE","\n\n    ",302],["T_DOC_COMMENT","\/**\n     * Retrieve Attribute Set Id By Id or Name\n     *\n     * @throws Mage_Eav_Exception\n     * @param mixed $entityTypeId\n     * @param mixed $setId\n     * @return int\n     *\/",304],["T_WHITESPACE","\n    ",311],["T_PUBLIC","public",312],["T_WHITESPACE"," ",312],["T_FUNCTION","function",312],["T_WHITESPACE"," ",312],["T_STRING","getAttributeSetId",312],"(",["T_VARIABLE","$entityTypeId",312],",",["T_WHITESPACE"," ",312],["T_VARIABLE","$setId",312],")",["T_WHITESPACE","\n    ",312],"{",["T_WHITESPACE","\n        ",313],["T_IF","if",314],["T_WHITESPACE"," ",314],"(","!",["T_STRING","is_numeric",314],"(",["T_VARIABLE","$setId",314],")",")",["T_WHITESPACE"," ",314],"{",["T_WHITESPACE","\n            ",314],["T_VARIABLE","$setId",315],["T_WHITESPACE"," ",315],"=",["T_WHITESPACE"," ",315],["T_VARIABLE","$this",315],["T_OBJECT_OPERATOR","->",315],["T_STRING","getAttributeSet",315],"(",["T_VARIABLE","$entityTypeId",315],",",["T_WHITESPACE"," ",315],["T_VARIABLE","$setId",315],",",["T_WHITESPACE"," ",315],["T_CONSTANT_ENCAPSED_STRING","'attribute_set_id'",315],")",";",["T_WHITESPACE","\n        ",315],"}",["T_WHITESPACE","\n        ",316],["T_IF","if",317],["T_WHITESPACE"," ",317],"(","!",["T_STRING","is_numeric",317],"(",["T_VARIABLE","$setId",317],")",")",["T_WHITESPACE"," ",317],"{",["T_WHITESPACE","\n            ",317],["T_THROW","throw",318],["T_WHITESPACE"," ",318],["T_STRING","Mage",318],["T_DOUBLE_COLON","::",318],["T_STRING","exception",318],"(",["T_CONSTANT_ENCAPSED_STRING","'Mage_Eav'",318],",",["T_WHITESPACE"," ",318],["T_STRING","Mage",318],["T_DOUBLE_COLON","::",318],["T_STRING","helper",318],"(",["T_CONSTANT_ENCAPSED_STRING","'eav'",318],")",["T_OBJECT_OPERATOR","->",318],["T_STRING","__",318],"(",["T_CONSTANT_ENCAPSED_STRING","'Wrong attribute set ID'",318],")",")",";",["T_WHITESPACE","\n        ",318],"}",["T_WHITESPACE","\n\n        ",319],["T_RETURN","return",321],["T_WHITESPACE"," ",321],["T_VARIABLE","$setId",321],";",["T_WHITESPACE","\n    ",321],"}",["T_WHITESPACE","\n\n    ",322],["T_DOC_COMMENT","\/**\n     * Remove Attribute Set\n     *\n     * @param mixed $entityTypeId\n     * @param mixed $id\n     * @return Mage_Eav_Model_Entity_Setup\n     *\/",324],["T_WHITESPACE","\n    ",330],["T_PUBLIC","public",331],["T_WHITESPACE"," ",331],["T_FUNCTION","function",331],["T_WHITESPACE"," ",331],["T_STRING","removeAttributeSet",331],"(",["T_VARIABLE","$entityTypeId",331],",",["T_WHITESPACE"," ",331],["T_VARIABLE","$id",331],")",["T_WHITESPACE","\n    ",331],"{",["T_WHITESPACE","\n        ",332],["T_VARIABLE","$this",333],["T_OBJECT_OPERATOR","->",333],["T_STRING","deleteTableRow",333],"(",["T_CONSTANT_ENCAPSED_STRING","'eav\/attribute_set'",333],",",["T_WHITESPACE"," ",333],["T_CONSTANT_ENCAPSED_STRING","'attribute_set_id'",333],",",["T_WHITESPACE"," ",333],["T_VARIABLE","$this",333],["T_OBJECT_OPERATOR","->",333],["T_STRING","getAttributeSetId",333],"(",["T_VARIABLE","$entityTypeId",333],",",["T_WHITESPACE"," ",333],["T_VARIABLE","$id",333],")",")",";",["T_WHITESPACE","\n        ",333],["T_RETURN","return",334],["T_WHITESPACE"," ",334],["T_VARIABLE","$this",334],";",["T_WHITESPACE","\n    ",334],"}",["T_WHITESPACE","\n\n    ",335],["T_DOC_COMMENT","\/**\n     * Set Default Attribute Set to Entity Type\n     *\n     * @param mixed $entityType\n     * @return Mage_Eav_Model_Entity_Setup\n     *\/",337],["T_WHITESPACE","\n    ",342],["T_PUBLIC","public",343],["T_WHITESPACE"," ",343],["T_FUNCTION","function",343],["T_WHITESPACE"," ",343],["T_STRING","setDefaultSetToEntityType",343],"(",["T_VARIABLE","$entityType",343],",",["T_WHITESPACE"," ",343],["T_VARIABLE","$attributeSet",343],["T_WHITESPACE"," ",343],"=",["T_WHITESPACE"," ",343],["T_CONSTANT_ENCAPSED_STRING","'Default'",343],")",["T_WHITESPACE","\n    ",343],"{",["T_WHITESPACE","\n        ",344],["T_VARIABLE","$entityTypeId",345],["T_WHITESPACE"," ",345],"=",["T_WHITESPACE"," ",345],["T_VARIABLE","$this",345],["T_OBJECT_OPERATOR","->",345],["T_STRING","getEntityTypeId",345],"(",["T_VARIABLE","$entityType",345],")",";",["T_WHITESPACE","\n        ",345],["T_VARIABLE","$setId",346],["T_WHITESPACE","        ",346],"=",["T_WHITESPACE"," ",346],["T_VARIABLE","$this",346],["T_OBJECT_OPERATOR","->",346],["T_STRING","getAttributeSetId",346],"(",["T_VARIABLE","$entityTypeId",346],",",["T_WHITESPACE"," ",346],["T_VARIABLE","$attributeSet",346],")",";",["T_WHITESPACE","\n        ",346],["T_VARIABLE","$this",347],["T_OBJECT_OPERATOR","->",347],["T_STRING","updateEntityType",347],"(",["T_VARIABLE","$entityTypeId",347],",",["T_WHITESPACE"," ",347],["T_CONSTANT_ENCAPSED_STRING","'default_attribute_set_id'",347],",",["T_WHITESPACE"," ",347],["T_VARIABLE","$setId",347],")",";",["T_WHITESPACE","\n        ",347],["T_RETURN","return",348],["T_WHITESPACE"," ",348],["T_VARIABLE","$this",348],";",["T_WHITESPACE","\n    ",348],"}",["T_WHITESPACE","\n\n    ",349],["T_DOC_COMMENT","\/**\n     * Get identifiers of all attribute sets\n     *\n     * @return array\n     *\/",351],["T_WHITESPACE","\n    ",355],["T_PUBLIC","public",356],["T_WHITESPACE"," ",356],["T_FUNCTION","function",356],["T_WHITESPACE"," ",356],["T_STRING","getAllAttributeSetIds",356],"(",["T_VARIABLE","$entityTypeId",356],["T_WHITESPACE"," ",356],"=",["T_WHITESPACE"," ",356],["T_STRING","null",356],")",["T_WHITESPACE","\n    ",356],"{",["T_WHITESPACE","\n        ",357],["T_VARIABLE","$select",358],["T_WHITESPACE"," ",358],"=",["T_WHITESPACE"," ",358],["T_VARIABLE","$this",358],["T_OBJECT_OPERATOR","->",358],["T_STRING","_conn",358],["T_OBJECT_OPERATOR","->",358],["T_STRING","select",358],"(",")",["T_WHITESPACE","\n            ",358],["T_OBJECT_OPERATOR","->",359],["T_STRING","from",359],"(",["T_VARIABLE","$this",359],["T_OBJECT_OPERATOR","->",359],["T_STRING","getTable",359],"(",["T_CONSTANT_ENCAPSED_STRING","'eav\/attribute_set'",359],")",",",["T_WHITESPACE"," ",359],["T_CONSTANT_ENCAPSED_STRING","'attribute_set_id'",359],")",";",["T_WHITESPACE","\n\n        ",359],["T_VARIABLE","$bind",361],["T_WHITESPACE"," ",361],"=",["T_WHITESPACE"," ",361],["T_ARRAY","array",361],"(",")",";",["T_WHITESPACE","\n        ",361],["T_IF","if",362],["T_WHITESPACE"," ",362],"(",["T_VARIABLE","$entityTypeId",362],["T_WHITESPACE"," ",362],["T_IS_NOT_IDENTICAL","!==",362],["T_WHITESPACE"," ",362],["T_STRING","null",362],")",["T_WHITESPACE"," ",362],"{",["T_WHITESPACE","\n            ",362],["T_VARIABLE","$bind",363],"[",["T_CONSTANT_ENCAPSED_STRING","'entity_type_id'",363],"]",["T_WHITESPACE"," ",363],"=",["T_WHITESPACE"," ",363],["T_VARIABLE","$this",363],["T_OBJECT_OPERATOR","->",363],["T_STRING","getEntityTypeId",363],"(",["T_VARIABLE","$entityTypeId",363],")",";",["T_WHITESPACE","\n            ",363],["T_VARIABLE","$select",364],["T_OBJECT_OPERATOR","->",364],["T_STRING","where",364],"(",["T_CONSTANT_ENCAPSED_STRING","'entity_type_id = :entity_type_id'",364],")",";",["T_WHITESPACE","\n        ",364],"}",["T_WHITESPACE","\n\n        ",365],["T_RETURN","return",367],["T_WHITESPACE"," ",367],["T_VARIABLE","$this",367],["T_OBJECT_OPERATOR","->",367],["T_STRING","_conn",367],["T_OBJECT_OPERATOR","->",367],["T_STRING","fetchCol",367],"(",["T_VARIABLE","$select",367],",",["T_WHITESPACE"," ",367],["T_VARIABLE","$bind",367],")",";",["T_WHITESPACE","\n    ",367],"}",["T_WHITESPACE","\n\n    ",368],["T_DOC_COMMENT","\/**\n     * Retrieve Default Attribute Set for Entity Type\n     *\n     * @param string|int $entityType\n     * @return int\n     *\/",370],["T_WHITESPACE","\n    ",375],["T_PUBLIC","public",376],["T_WHITESPACE"," ",376],["T_FUNCTION","function",376],["T_WHITESPACE"," ",376],["T_STRING","getDefaultAttributeSetId",376],"(",["T_VARIABLE","$entityType",376],")",["T_WHITESPACE","\n    ",376],"{",["T_WHITESPACE","\n        ",377],["T_VARIABLE","$bind",378],["T_WHITESPACE"," ",378],"=",["T_WHITESPACE"," ",378],["T_ARRAY","array",378],"(",["T_CONSTANT_ENCAPSED_STRING","'entity_type'",378],["T_WHITESPACE"," ",378],["T_DOUBLE_ARROW","=>",378],["T_WHITESPACE"," ",378],["T_VARIABLE","$entityType",378],")",";",["T_WHITESPACE","\n        ",378],["T_IF","if",379],["T_WHITESPACE"," ",379],"(",["T_STRING","is_numeric",379],"(",["T_VARIABLE","$entityType",379],")",")",["T_WHITESPACE"," ",379],"{",["T_WHITESPACE","\n            ",379],["T_VARIABLE","$where",380],["T_WHITESPACE"," ",380],"=",["T_WHITESPACE"," ",380],["T_CONSTANT_ENCAPSED_STRING","'entity_type_id = :entity_type'",380],";",["T_WHITESPACE","\n        ",380],"}",["T_WHITESPACE"," ",381],["T_ELSE","else",381],["T_WHITESPACE"," ",381],"{",["T_WHITESPACE","\n            ",381],["T_VARIABLE","$where",382],["T_WHITESPACE"," ",382],"=",["T_WHITESPACE"," ",382],["T_CONSTANT_ENCAPSED_STRING","'entity_type_code = :entity_type'",382],";",["T_WHITESPACE","\n        ",382],"}",["T_WHITESPACE","\n        ",383],["T_VARIABLE","$select",384],["T_WHITESPACE"," ",384],"=",["T_WHITESPACE"," ",384],["T_VARIABLE","$this",384],["T_OBJECT_OPERATOR","->",384],["T_STRING","getConnection",384],"(",")",["T_OBJECT_OPERATOR","->",384],["T_STRING","select",384],"(",")",["T_WHITESPACE","\n            ",384],["T_OBJECT_OPERATOR","->",385],["T_STRING","from",385],"(",["T_VARIABLE","$this",385],["T_OBJECT_OPERATOR","->",385],["T_STRING","getTable",385],"(",["T_CONSTANT_ENCAPSED_STRING","'eav\/entity_type'",385],")",",",["T_WHITESPACE"," ",385],["T_CONSTANT_ENCAPSED_STRING","'default_attribute_set_id'",385],")",["T_WHITESPACE","\n            ",385],["T_OBJECT_OPERATOR","->",386],["T_STRING","where",386],"(",["T_VARIABLE","$where",386],")",";",["T_WHITESPACE","\n\n        ",386],["T_RETURN","return",388],["T_WHITESPACE"," ",388],["T_VARIABLE","$this",388],["T_OBJECT_OPERATOR","->",388],["T_STRING","getConnection",388],"(",")",["T_OBJECT_OPERATOR","->",388],["T_STRING","fetchOne",388],"(",["T_VARIABLE","$select",388],",",["T_WHITESPACE"," ",388],["T_VARIABLE","$bind",388],")",";",["T_WHITESPACE","\n    ",388],"}",["T_WHITESPACE","\n\n",389],["T_COMMENT","\/******************* ATTRIBUTE GROUPS *****************\/",391],["T_WHITESPACE","\n\n    ",391],["T_DOC_COMMENT","\/**\n     * Retrieve Attribute Group Sort order\n     *\n     * @param mixed $entityTypeId\n     * @param mixed $setId\n     * @param int $sortOrder\n     * @return int\n     *\/",393],["T_WHITESPACE","\n    ",400],["T_PUBLIC","public",401],["T_WHITESPACE"," ",401],["T_FUNCTION","function",401],["T_WHITESPACE"," ",401],["T_STRING","getAttributeGroupSortOrder",401],"(",["T_VARIABLE","$entityTypeId",401],",",["T_WHITESPACE"," ",401],["T_VARIABLE","$setId",401],",",["T_WHITESPACE"," ",401],["T_VARIABLE","$sortOrder",401],["T_WHITESPACE"," ",401],"=",["T_WHITESPACE"," ",401],["T_STRING","null",401],")",["T_WHITESPACE","\n    ",401],"{",["T_WHITESPACE","\n        ",402],["T_IF","if",403],["T_WHITESPACE"," ",403],"(","!",["T_STRING","is_numeric",403],"(",["T_VARIABLE","$sortOrder",403],")",")",["T_WHITESPACE"," ",403],"{",["T_WHITESPACE","\n            ",403],["T_VARIABLE","$bind",404],["T_WHITESPACE","   ",404],"=",["T_WHITESPACE"," ",404],["T_ARRAY","array",404],"(",["T_CONSTANT_ENCAPSED_STRING","'attribute_set_id'",404],["T_WHITESPACE"," ",404],["T_DOUBLE_ARROW","=>",404],["T_WHITESPACE"," ",404],["T_VARIABLE","$this",404],["T_OBJECT_OPERATOR","->",404],["T_STRING","getAttributeSetId",404],"(",["T_VARIABLE","$entityTypeId",404],",",["T_WHITESPACE"," ",404],["T_VARIABLE","$setId",404],")",")",";",["T_WHITESPACE","\n            ",404],["T_VARIABLE","$select",405],["T_WHITESPACE"," ",405],"=",["T_WHITESPACE"," ",405],["T_VARIABLE","$this",405],["T_OBJECT_OPERATOR","->",405],["T_STRING","_conn",405],["T_OBJECT_OPERATOR","->",405],["T_STRING","select",405],"(",")",["T_WHITESPACE","\n                ",405],["T_OBJECT_OPERATOR","->",406],["T_STRING","from",406],"(",["T_VARIABLE","$this",406],["T_OBJECT_OPERATOR","->",406],["T_STRING","getTable",406],"(",["T_CONSTANT_ENCAPSED_STRING","'eav\/attribute_group'",406],")",",",["T_WHITESPACE"," ",406],["T_CONSTANT_ENCAPSED_STRING","'MAX(sort_order)'",406],")",["T_WHITESPACE","\n                ",406],["T_OBJECT_OPERATOR","->",407],["T_STRING","where",407],"(",["T_CONSTANT_ENCAPSED_STRING","'attribute_set_id = :attribute_set_id'",407],")",";",["T_WHITESPACE","\n\n            ",407],["T_VARIABLE","$sortOrder",409],["T_WHITESPACE"," ",409],"=",["T_WHITESPACE"," ",409],["T_VARIABLE","$this",409],["T_OBJECT_OPERATOR","->",409],["T_STRING","_conn",409],["T_OBJECT_OPERATOR","->",409],["T_STRING","fetchOne",409],"(",["T_VARIABLE","$select",409],",",["T_WHITESPACE"," ",409],["T_VARIABLE","$bind",409],")",["T_WHITESPACE"," ",409],"+",["T_WHITESPACE"," ",409],["T_LNUMBER","1",409],";",["T_WHITESPACE","\n        ",409],"}",["T_WHITESPACE","\n\n        ",410],["T_RETURN","return",412],["T_WHITESPACE"," ",412],["T_VARIABLE","$sortOrder",412],";",["T_WHITESPACE","\n    ",412],"}",["T_WHITESPACE","\n\n    ",413],["T_DOC_COMMENT","\/**\n     * Add Attribute Group\n     *\n     * @param mixed $entityTypeId\n     * @param mixed $setId\n     * @param string $name\n     * @param int $sortOrder\n     * @return Mage_Eav_Model_Entity_Setup\n     *\/",415],["T_WHITESPACE","\n    ",423],["T_PUBLIC","public",424],["T_WHITESPACE"," ",424],["T_FUNCTION","function",424],["T_WHITESPACE"," ",424],["T_STRING","addAttributeGroup",424],"(",["T_VARIABLE","$entityTypeId",424],",",["T_WHITESPACE"," ",424],["T_VARIABLE","$setId",424],",",["T_WHITESPACE"," ",424],["T_VARIABLE","$name",424],",",["T_WHITESPACE"," ",424],["T_VARIABLE","$sortOrder",424],["T_WHITESPACE"," ",424],"=",["T_WHITESPACE"," ",424],["T_STRING","null",424],")",["T_WHITESPACE","\n    ",424],"{",["T_WHITESPACE","\n        ",425],["T_VARIABLE","$setId",426],["T_WHITESPACE","  ",426],"=",["T_WHITESPACE"," ",426],["T_VARIABLE","$this",426],["T_OBJECT_OPERATOR","->",426],["T_STRING","getAttributeSetId",426],"(",["T_VARIABLE","$entityTypeId",426],",",["T_WHITESPACE"," ",426],["T_VARIABLE","$setId",426],")",";",["T_WHITESPACE","\n        ",426],["T_VARIABLE","$data",427],["T_WHITESPACE","   ",427],"=",["T_WHITESPACE"," ",427],["T_ARRAY","array",427],"(",["T_WHITESPACE","\n            ",427],["T_CONSTANT_ENCAPSED_STRING","'attribute_set_id'",428],["T_WHITESPACE","      ",428],["T_DOUBLE_ARROW","=>",428],["T_WHITESPACE"," ",428],["T_VARIABLE","$setId",428],",",["T_WHITESPACE","\n            ",428],["T_CONSTANT_ENCAPSED_STRING","'attribute_group_name'",429],["T_WHITESPACE","  ",429],["T_DOUBLE_ARROW","=>",429],["T_WHITESPACE"," ",429],["T_VARIABLE","$name",429],",",["T_WHITESPACE","\n        ",429],")",";",["T_WHITESPACE","\n\n        ",430],["T_IF","if",432],["T_WHITESPACE"," ",432],"(",["T_ISSET","isset",432],"(",["T_VARIABLE","$this",432],["T_OBJECT_OPERATOR","->",432],["T_STRING","defaultGroupIdAssociations",432],"[",["T_VARIABLE","$name",432],"]",")",")",["T_WHITESPACE"," ",432],"{",["T_WHITESPACE","\n            ",432],["T_VARIABLE","$data",433],"[",["T_CONSTANT_ENCAPSED_STRING","'default_id'",433],"]",["T_WHITESPACE"," ",433],"=",["T_WHITESPACE"," ",433],["T_VARIABLE","$this",433],["T_OBJECT_OPERATOR","->",433],["T_STRING","defaultGroupIdAssociations",433],"[",["T_VARIABLE","$name",433],"]",";",["T_WHITESPACE","\n        ",433],"}",["T_WHITESPACE","\n\n        ",434],["T_IF","if",436],["T_WHITESPACE"," ",436],"(",["T_VARIABLE","$sortOrder",436],["T_WHITESPACE"," ",436],["T_IS_NOT_IDENTICAL","!==",436],["T_WHITESPACE"," ",436],["T_STRING","null",436],")",["T_WHITESPACE"," ",436],"{",["T_WHITESPACE","\n            ",436],["T_VARIABLE","$data",437],"[",["T_CONSTANT_ENCAPSED_STRING","'sort_order'",437],"]",["T_WHITESPACE"," ",437],"=",["T_WHITESPACE"," ",437],["T_VARIABLE","$sortOrder",437],";",["T_WHITESPACE","\n        ",437],"}",["T_WHITESPACE","\n\n        ",438],["T_VARIABLE","$groupId",440],["T_WHITESPACE"," ",440],"=",["T_WHITESPACE"," ",440],["T_VARIABLE","$this",440],["T_OBJECT_OPERATOR","->",440],["T_STRING","getAttributeGroup",440],"(",["T_VARIABLE","$entityTypeId",440],",",["T_WHITESPACE"," ",440],["T_VARIABLE","$setId",440],",",["T_WHITESPACE"," ",440],["T_VARIABLE","$name",440],",",["T_WHITESPACE"," ",440],["T_CONSTANT_ENCAPSED_STRING","'attribute_group_id'",440],")",";",["T_WHITESPACE","\n        ",440],["T_IF","if",441],["T_WHITESPACE"," ",441],"(",["T_VARIABLE","$groupId",441],")",["T_WHITESPACE"," ",441],"{",["T_WHITESPACE","\n            ",441],["T_VARIABLE","$this",442],["T_OBJECT_OPERATOR","->",442],["T_STRING","updateAttributeGroup",442],"(",["T_VARIABLE","$entityTypeId",442],",",["T_WHITESPACE"," ",442],["T_VARIABLE","$setId",442],",",["T_WHITESPACE"," ",442],["T_VARIABLE","$groupId",442],",",["T_WHITESPACE"," ",442],["T_VARIABLE","$data",442],")",";",["T_WHITESPACE","\n        ",442],"}",["T_WHITESPACE"," ",443],["T_ELSE","else",443],["T_WHITESPACE"," ",443],"{",["T_WHITESPACE","\n            ",443],["T_IF","if",444],["T_WHITESPACE"," ",444],"(",["T_VARIABLE","$sortOrder",444],["T_WHITESPACE"," ",444],["T_IS_IDENTICAL","===",444],["T_WHITESPACE"," ",444],["T_STRING","null",444],")",["T_WHITESPACE"," ",444],"{",["T_WHITESPACE","\n                ",444],["T_VARIABLE","$data",445],"[",["T_CONSTANT_ENCAPSED_STRING","'sort_order'",445],"]",["T_WHITESPACE"," ",445],"=",["T_WHITESPACE"," ",445],["T_VARIABLE","$this",445],["T_OBJECT_OPERATOR","->",445],["T_STRING","getAttributeGroupSortOrder",445],"(",["T_VARIABLE","$entityTypeId",445],",",["T_WHITESPACE"," ",445],["T_VARIABLE","$setId",445],",",["T_WHITESPACE"," ",445],["T_VARIABLE","$sortOrder",445],")",";",["T_WHITESPACE","\n            ",445],"}",["T_WHITESPACE","\n            ",446],["T_VARIABLE","$this",447],["T_OBJECT_OPERATOR","->",447],["T_STRING","_conn",447],["T_OBJECT_OPERATOR","->",447],["T_STRING","insert",447],"(",["T_VARIABLE","$this",447],["T_OBJECT_OPERATOR","->",447],["T_STRING","getTable",447],"(",["T_CONSTANT_ENCAPSED_STRING","'eav\/attribute_group'",447],")",",",["T_WHITESPACE"," ",447],["T_VARIABLE","$data",447],")",";",["T_WHITESPACE","\n        ",447],"}",["T_WHITESPACE","\n\n        ",448],["T_RETURN","return",450],["T_WHITESPACE"," ",450],["T_VARIABLE","$this",450],";",["T_WHITESPACE","\n    ",450],"}",["T_WHITESPACE","\n\n    ",451],["T_DOC_COMMENT","\/**\n     * Update Attribute Group Data\n     *\n     * @param mixed $entityTypeId\n     * @param mixed $setId\n     * @param mixed $id\n     * @param string $field\n     * @param mixed $value\n     * @return Mage_Eav_Model_Entity_Setup\n     *\/",453],["T_WHITESPACE","\n    ",462],["T_PUBLIC","public",463],["T_WHITESPACE"," ",463],["T_FUNCTION","function",463],["T_WHITESPACE"," ",463],["T_STRING","updateAttributeGroup",463],"(",["T_VARIABLE","$entityTypeId",463],",",["T_WHITESPACE"," ",463],["T_VARIABLE","$setId",463],",",["T_WHITESPACE"," ",463],["T_VARIABLE","$id",463],",",["T_WHITESPACE"," ",463],["T_VARIABLE","$field",463],",",["T_WHITESPACE"," ",463],["T_VARIABLE","$value",463],["T_WHITESPACE"," ",463],"=",["T_WHITESPACE"," ",463],["T_STRING","null",463],")",["T_WHITESPACE","\n    ",463],"{",["T_WHITESPACE","\n        ",464],["T_VARIABLE","$this",465],["T_OBJECT_OPERATOR","->",465],["T_STRING","updateTableRow",465],"(",["T_CONSTANT_ENCAPSED_STRING","'eav\/attribute_group'",465],",",["T_WHITESPACE","\n            ",465],["T_CONSTANT_ENCAPSED_STRING","'attribute_group_id'",466],",",["T_WHITESPACE"," ",466],["T_VARIABLE","$this",466],["T_OBJECT_OPERATOR","->",466],["T_STRING","getAttributeGroupId",466],"(",["T_VARIABLE","$entityTypeId",466],",",["T_WHITESPACE"," ",466],["T_VARIABLE","$setId",466],",",["T_WHITESPACE"," ",466],["T_VARIABLE","$id",466],")",",",["T_WHITESPACE","\n            ",466],["T_VARIABLE","$field",467],",",["T_WHITESPACE"," ",467],["T_VARIABLE","$value",467],",",["T_WHITESPACE","\n            ",467],["T_CONSTANT_ENCAPSED_STRING","'attribute_set_id'",468],",",["T_WHITESPACE"," ",468],["T_VARIABLE","$this",468],["T_OBJECT_OPERATOR","->",468],["T_STRING","getAttributeSetId",468],"(",["T_VARIABLE","$entityTypeId",468],",",["T_WHITESPACE"," ",468],["T_VARIABLE","$setId",468],")",["T_WHITESPACE","\n        ",468],")",";",["T_WHITESPACE","\n\n        ",469],["T_RETURN","return",471],["T_WHITESPACE"," ",471],["T_VARIABLE","$this",471],";",["T_WHITESPACE","\n    ",471],"}",["T_WHITESPACE","\n\n    ",472],["T_DOC_COMMENT","\/**\n     * Retrieve Attribute Group Data\n     *\n     * @param mixed $entityTypeId\n     * @param mixed $setId\n     * @param mixed $id\n     * @param string $field\n     * @return mixed\n     *\/",474],["T_WHITESPACE","\n    ",482],["T_PUBLIC","public",483],["T_WHITESPACE"," ",483],["T_FUNCTION","function",483],["T_WHITESPACE"," ",483],["T_STRING","getAttributeGroup",483],"(",["T_VARIABLE","$entityTypeId",483],",",["T_WHITESPACE"," ",483],["T_VARIABLE","$setId",483],",",["T_WHITESPACE"," ",483],["T_VARIABLE","$id",483],",",["T_WHITESPACE"," ",483],["T_VARIABLE","$field",483],["T_WHITESPACE"," ",483],"=",["T_WHITESPACE"," ",483],["T_STRING","null",483],")",["T_WHITESPACE","\n    ",483],"{",["T_WHITESPACE","\n        ",484],["T_VARIABLE","$searchId",485],["T_WHITESPACE"," ",485],"=",["T_WHITESPACE"," ",485],["T_VARIABLE","$id",485],";",["T_WHITESPACE","\n        ",485],["T_IF","if",486],["T_WHITESPACE"," ",486],"(",["T_STRING","is_numeric",486],"(",["T_VARIABLE","$id",486],")",")",["T_WHITESPACE"," ",486],"{",["T_WHITESPACE","\n            ",486],["T_VARIABLE","$searchField",487],["T_WHITESPACE"," ",487],"=",["T_WHITESPACE"," ",487],["T_CONSTANT_ENCAPSED_STRING","'attribute_group_id'",487],";",["T_WHITESPACE","\n        ",487],"}",["T_WHITESPACE"," ",488],["T_ELSE","else",488],["T_WHITESPACE"," ",488],"{",["T_WHITESPACE","\n            ",488],["T_IF","if",489],["T_WHITESPACE"," ",489],"(",["T_ISSET","isset",489],"(",["T_VARIABLE","$this",489],["T_OBJECT_OPERATOR","->",489],["T_STRING","defaultGroupIdAssociations",489],"[",["T_VARIABLE","$id",489],"]",")",")",["T_WHITESPACE"," ",489],"{",["T_WHITESPACE","\n                ",489],["T_VARIABLE","$searchField",490],["T_WHITESPACE"," ",490],"=",["T_WHITESPACE"," ",490],["T_CONSTANT_ENCAPSED_STRING","'default_id'",490],";",["T_WHITESPACE","\n                ",490],["T_VARIABLE","$searchId",491],["T_WHITESPACE"," ",491],"=",["T_WHITESPACE"," ",491],["T_VARIABLE","$this",491],["T_OBJECT_OPERATOR","->",491],["T_STRING","defaultGroupIdAssociations",491],"[",["T_VARIABLE","$id",491],"]",";",["T_WHITESPACE","\n            ",491],"}",["T_WHITESPACE"," ",492],["T_ELSE","else",492],["T_WHITESPACE"," ",492],"{",["T_WHITESPACE","\n                ",492],["T_VARIABLE","$searchField",493],["T_WHITESPACE"," ",493],"=",["T_WHITESPACE"," ",493],["T_CONSTANT_ENCAPSED_STRING","'attribute_group_name'",493],";",["T_WHITESPACE","\n            ",493],"}",["T_WHITESPACE","\n        ",494],"}",["T_WHITESPACE","\n\n        ",495],["T_RETURN","return",497],["T_WHITESPACE"," ",497],["T_VARIABLE","$this",497],["T_OBJECT_OPERATOR","->",497],["T_STRING","getTableRow",497],"(",["T_CONSTANT_ENCAPSED_STRING","'eav\/attribute_group'",497],",",["T_WHITESPACE","\n            ",497],["T_VARIABLE","$searchField",498],",",["T_WHITESPACE"," ",498],["T_VARIABLE","$searchId",498],",",["T_WHITESPACE"," ",498],["T_VARIABLE","$field",498],",",["T_WHITESPACE","\n            ",498],["T_CONSTANT_ENCAPSED_STRING","'attribute_set_id'",499],",",["T_WHITESPACE"," ",499],["T_VARIABLE","$this",499],["T_OBJECT_OPERATOR","->",499],["T_STRING","getAttributeSetId",499],"(",["T_VARIABLE","$entityTypeId",499],",",["T_WHITESPACE"," ",499],["T_VARIABLE","$setId",499],")",["T_WHITESPACE","\n        ",499],")",";",["T_WHITESPACE","\n    ",500],"}",["T_WHITESPACE","\n\n    ",501],["T_DOC_COMMENT","\/**\n     * Retrieve Attribute Group Id by Id or Name\n     *\n     * @param mixed $entityTypeId\n     * @param mixed $setId\n     * @param mixed $groupId\n     * @return Mage_Eav_Model_Entity_Setup\n     *\/",503],["T_WHITESPACE","\n    ",510],["T_PUBLIC","public",511],["T_WHITESPACE"," ",511],["T_FUNCTION","function",511],["T_WHITESPACE"," ",511],["T_STRING","getAttributeGroupId",511],"(",["T_VARIABLE","$entityTypeId",511],",",["T_WHITESPACE"," ",511],["T_VARIABLE","$setId",511],",",["T_WHITESPACE"," ",511],["T_VARIABLE","$groupId",511],")",["T_WHITESPACE","\n    ",511],"{",["T_WHITESPACE","\n        ",512],["T_IF","if",513],["T_WHITESPACE"," ",513],"(","!",["T_STRING","is_numeric",513],"(",["T_VARIABLE","$groupId",513],")",")",["T_WHITESPACE"," ",513],"{",["T_WHITESPACE","\n            ",513],["T_VARIABLE","$groupId",514],["T_WHITESPACE"," ",514],"=",["T_WHITESPACE"," ",514],["T_VARIABLE","$this",514],["T_OBJECT_OPERATOR","->",514],["T_STRING","getAttributeGroup",514],"(",["T_VARIABLE","$entityTypeId",514],",",["T_WHITESPACE"," ",514],["T_VARIABLE","$setId",514],",",["T_WHITESPACE"," ",514],["T_VARIABLE","$groupId",514],",",["T_WHITESPACE"," ",514],["T_CONSTANT_ENCAPSED_STRING","'attribute_group_id'",514],")",";",["T_WHITESPACE","\n        ",514],"}",["T_WHITESPACE","\n\n        ",515],["T_IF","if",517],["T_WHITESPACE"," ",517],"(","!",["T_STRING","is_numeric",517],"(",["T_VARIABLE","$groupId",517],")",")",["T_WHITESPACE"," ",517],"{",["T_WHITESPACE","\n            ",517],["T_VARIABLE","$groupId",518],["T_WHITESPACE"," ",518],"=",["T_WHITESPACE"," ",518],["T_VARIABLE","$this",518],["T_OBJECT_OPERATOR","->",518],["T_STRING","getDefaultAttributeGroupId",518],"(",["T_VARIABLE","$entityTypeId",518],",",["T_WHITESPACE"," ",518],["T_VARIABLE","$setId",518],")",";",["T_WHITESPACE","\n        ",518],"}",["T_WHITESPACE","\n\n        ",519],["T_IF","if",521],["T_WHITESPACE"," ",521],"(","!",["T_STRING","is_numeric",521],"(",["T_VARIABLE","$groupId",521],")",")",["T_WHITESPACE"," ",521],"{",["T_WHITESPACE","\n            ",521],["T_THROW","throw",522],["T_WHITESPACE"," ",522],["T_STRING","Mage",522],["T_DOUBLE_COLON","::",522],["T_STRING","exception",522],"(",["T_CONSTANT_ENCAPSED_STRING","'Mage_Eav'",522],",",["T_WHITESPACE"," ",522],["T_STRING","Mage",522],["T_DOUBLE_COLON","::",522],["T_STRING","helper",522],"(",["T_CONSTANT_ENCAPSED_STRING","'eav'",522],")",["T_OBJECT_OPERATOR","->",522],["T_STRING","__",522],"(",["T_CONSTANT_ENCAPSED_STRING","'Wrong attribute group ID'",522],")",")",";",["T_WHITESPACE","\n        ",522],"}",["T_WHITESPACE","\n        ",523],["T_RETURN","return",524],["T_WHITESPACE"," ",524],["T_VARIABLE","$groupId",524],";",["T_WHITESPACE","\n    ",524],"}",["T_WHITESPACE","\n\n    ",525],["T_DOC_COMMENT","\/**\n     * Remove Attribute Group By Id or Name\n     *\n     * @param mixed $entityTypeId\n     * @param mixed $setId\n     * @param mixed $id\n     * @return Mage_Eav_Model_Entity_Setup\n     *\/",527],["T_WHITESPACE","\n    ",534],["T_PUBLIC","public",535],["T_WHITESPACE"," ",535],["T_FUNCTION","function",535],["T_WHITESPACE"," ",535],["T_STRING","removeAttributeGroup",535],"(",["T_VARIABLE","$entityTypeId",535],",",["T_WHITESPACE"," ",535],["T_VARIABLE","$setId",535],",",["T_WHITESPACE"," ",535],["T_VARIABLE","$id",535],")",["T_WHITESPACE","\n    ",535],"{",["T_WHITESPACE","\n        ",536],["T_VARIABLE","$this",537],["T_OBJECT_OPERATOR","->",537],["T_STRING","deleteTableRow",537],"(",["T_WHITESPACE","\n            ",537],["T_CONSTANT_ENCAPSED_STRING","'eav\/attribute_group'",538],",",["T_WHITESPACE","\n            ",538],["T_CONSTANT_ENCAPSED_STRING","'attribute_group_id'",539],",",["T_WHITESPACE","\n            ",539],["T_VARIABLE","$this",540],["T_OBJECT_OPERATOR","->",540],["T_STRING","getAttributeGroupId",540],"(",["T_VARIABLE","$entityTypeId",540],",",["T_WHITESPACE"," ",540],["T_VARIABLE","$setId",540],",",["T_WHITESPACE"," ",540],["T_VARIABLE","$id",540],")",["T_WHITESPACE","\n        ",540],")",";",["T_WHITESPACE","\n        ",541],["T_RETURN","return",542],["T_WHITESPACE"," ",542],["T_VARIABLE","$this",542],";",["T_WHITESPACE","\n    ",542],"}",["T_WHITESPACE","\n\n    ",543],["T_DOC_COMMENT","\/**\n     * Retrieve Default Attribute Group Id By Entity Type and Attribute Set\n     *\n     * @param string|int $entityType\n     * @param int $attributeSetId\n     * @return int\n     *\/",545],["T_WHITESPACE","\n    ",551],["T_PUBLIC","public",552],["T_WHITESPACE"," ",552],["T_FUNCTION","function",552],["T_WHITESPACE"," ",552],["T_STRING","getDefaultAttributeGroupId",552],"(",["T_VARIABLE","$entityType",552],",",["T_WHITESPACE"," ",552],["T_VARIABLE","$attributeSetId",552],["T_WHITESPACE"," ",552],"=",["T_WHITESPACE"," ",552],["T_STRING","null",552],")",["T_WHITESPACE","\n    ",552],"{",["T_WHITESPACE","\n        ",553],["T_VARIABLE","$entityType",554],["T_WHITESPACE"," ",554],"=",["T_WHITESPACE"," ",554],["T_VARIABLE","$this",554],["T_OBJECT_OPERATOR","->",554],["T_STRING","getEntityTypeId",554],"(",["T_VARIABLE","$entityType",554],")",";",["T_WHITESPACE","\n        ",554],["T_IF","if",555],["T_WHITESPACE"," ",555],"(","!",["T_STRING","is_numeric",555],"(",["T_VARIABLE","$attributeSetId",555],")",")",["T_WHITESPACE"," ",555],"{",["T_WHITESPACE","\n            ",555],["T_VARIABLE","$attributeSetId",556],["T_WHITESPACE"," ",556],"=",["T_WHITESPACE"," ",556],["T_VARIABLE","$this",556],["T_OBJECT_OPERATOR","->",556],["T_STRING","getDefaultAttributeSetId",556],"(",["T_VARIABLE","$entityType",556],")",";",["T_WHITESPACE","\n        ",556],"}",["T_WHITESPACE","\n        ",557],["T_VARIABLE","$bind",558],["T_WHITESPACE","   ",558],"=",["T_WHITESPACE"," ",558],["T_ARRAY","array",558],"(",["T_CONSTANT_ENCAPSED_STRING","'attribute_set_id'",558],["T_WHITESPACE"," ",558],["T_DOUBLE_ARROW","=>",558],["T_WHITESPACE"," ",558],["T_VARIABLE","$attributeSetId",558],")",";",["T_WHITESPACE","\n        ",558],["T_VARIABLE","$select",559],["T_WHITESPACE"," ",559],"=",["T_WHITESPACE"," ",559],["T_VARIABLE","$this",559],["T_OBJECT_OPERATOR","->",559],["T_STRING","getConnection",559],"(",")",["T_OBJECT_OPERATOR","->",559],["T_STRING","select",559],"(",")",["T_WHITESPACE","\n            ",559],["T_OBJECT_OPERATOR","->",560],["T_STRING","from",560],"(",["T_VARIABLE","$this",560],["T_OBJECT_OPERATOR","->",560],["T_STRING","getTable",560],"(",["T_CONSTANT_ENCAPSED_STRING","'eav\/attribute_group'",560],")",",",["T_WHITESPACE"," ",560],["T_CONSTANT_ENCAPSED_STRING","'attribute_group_id'",560],")",["T_WHITESPACE","\n            ",560],["T_OBJECT_OPERATOR","->",561],["T_STRING","where",561],"(",["T_CONSTANT_ENCAPSED_STRING","'attribute_set_id = :attribute_set_id'",561],")",["T_WHITESPACE","\n            ",561],["T_OBJECT_OPERATOR","->",562],["T_STRING","order",562],"(",["T_ARRAY","array",562],"(",["T_CONSTANT_ENCAPSED_STRING","'default_id '",562],["T_WHITESPACE"," ",562],".",["T_WHITESPACE"," ",562],["T_STRING","Varien_Db_Select",562],["T_DOUBLE_COLON","::",562],["T_STRING","SQL_DESC",562],",",["T_WHITESPACE"," ",562],["T_CONSTANT_ENCAPSED_STRING","'sort_order'",562],")",")",["T_WHITESPACE","\n            ",562],["T_OBJECT_OPERATOR","->",563],["T_STRING","limit",563],"(",["T_LNUMBER","1",563],")",";",["T_WHITESPACE","\n\n        ",563],["T_RETURN","return",565],["T_WHITESPACE"," ",565],["T_VARIABLE","$this",565],["T_OBJECT_OPERATOR","->",565],["T_STRING","getConnection",565],"(",")",["T_OBJECT_OPERATOR","->",565],["T_STRING","fetchOne",565],"(",["T_VARIABLE","$select",565],",",["T_WHITESPACE"," ",565],["T_VARIABLE","$bind",565],")",";",["T_WHITESPACE","\n    ",565],"}",["T_WHITESPACE","\n\n",566],["T_COMMENT","\/******************* ATTRIBUTES *****************\/",568],["T_WHITESPACE","\n\n    ",568],["T_DOC_COMMENT","\/**\n     * Retrieve value from array by key or return default value\n     *\n     * @param array $array\n     * @param string $key\n     * @param string $default\n     * @return string\n     *\/",570],["T_WHITESPACE","\n    ",577],["T_PROTECTED","protected",578],["T_WHITESPACE"," ",578],["T_FUNCTION","function",578],["T_WHITESPACE"," ",578],["T_STRING","_getValue",578],"(",["T_VARIABLE","$array",578],",",["T_WHITESPACE"," ",578],["T_VARIABLE","$key",578],",",["T_WHITESPACE"," ",578],["T_VARIABLE","$default",578],["T_WHITESPACE"," ",578],"=",["T_WHITESPACE"," ",578],["T_STRING","null",578],")",["T_WHITESPACE","\n    ",578],"{",["T_WHITESPACE","\n        ",579],["T_IF","if",580],["T_WHITESPACE"," ",580],"(",["T_ISSET","isset",580],"(",["T_VARIABLE","$array",580],"[",["T_VARIABLE","$key",580],"]",")",["T_WHITESPACE"," ",580],["T_BOOLEAN_AND","&&",580],["T_WHITESPACE"," ",580],["T_STRING","is_bool",580],"(",["T_VARIABLE","$array",580],"[",["T_VARIABLE","$key",580],"]",")",")",["T_WHITESPACE"," ",580],"{",["T_WHITESPACE","\n            ",580],["T_VARIABLE","$array",581],"[",["T_VARIABLE","$key",581],"]",["T_WHITESPACE"," ",581],"=",["T_WHITESPACE"," ",581],["T_INT_CAST","(int)",581],["T_WHITESPACE"," ",581],["T_VARIABLE","$array",581],"[",["T_VARIABLE","$key",581],"]",";",["T_WHITESPACE","\n        ",581],"}",["T_WHITESPACE","\n        ",582],["T_RETURN","return",583],["T_WHITESPACE"," ",583],["T_ISSET","isset",583],"(",["T_VARIABLE","$array",583],"[",["T_VARIABLE","$key",583],"]",")",["T_WHITESPACE"," ",583],"?",["T_WHITESPACE"," ",583],["T_VARIABLE","$array",583],"[",["T_VARIABLE","$key",583],"]",["T_WHITESPACE"," ",583],":",["T_WHITESPACE"," ",583],["T_VARIABLE","$default",583],";",["T_WHITESPACE","\n    ",583],"}",["T_WHITESPACE","\n\n    ",584],["T_DOC_COMMENT","\/**\n     * Prepare attribute values to save\n     *\n     * @param array $attr\n     * @return array\n     *\/",586],["T_WHITESPACE","\n    ",591],["T_PROTECTED","protected",592],["T_WHITESPACE"," ",592],["T_FUNCTION","function",592],["T_WHITESPACE"," ",592],["T_STRING","_prepareValues",592],"(",["T_VARIABLE","$attr",592],")",["T_WHITESPACE","\n    ",592],"{",["T_WHITESPACE","\n        ",593],["T_VARIABLE","$data",594],["T_WHITESPACE"," ",594],"=",["T_WHITESPACE"," ",594],["T_ARRAY","array",594],"(",["T_WHITESPACE","\n            ",594],["T_CONSTANT_ENCAPSED_STRING","'backend_model'",595],["T_WHITESPACE","   ",595],["T_DOUBLE_ARROW","=>",595],["T_WHITESPACE"," ",595],["T_VARIABLE","$this",595],["T_OBJECT_OPERATOR","->",595],["T_STRING","_getValue",595],"(",["T_VARIABLE","$attr",595],",",["T_WHITESPACE"," ",595],["T_CONSTANT_ENCAPSED_STRING","'backend'",595],")",",",["T_WHITESPACE","\n            ",595],["T_CONSTANT_ENCAPSED_STRING","'backend_type'",596],["T_WHITESPACE","    ",596],["T_DOUBLE_ARROW","=>",596],["T_WHITESPACE"," ",596],["T_VARIABLE","$this",596],["T_OBJECT_OPERATOR","->",596],["T_STRING","_getValue",596],"(",["T_VARIABLE","$attr",596],",",["T_WHITESPACE"," ",596],["T_CONSTANT_ENCAPSED_STRING","'type'",596],",",["T_WHITESPACE"," ",596],["T_CONSTANT_ENCAPSED_STRING","'varchar'",596],")",",",["T_WHITESPACE","\n            ",596],["T_CONSTANT_ENCAPSED_STRING","'backend_table'",597],["T_WHITESPACE","   ",597],["T_DOUBLE_ARROW","=>",597],["T_WHITESPACE"," ",597],["T_VARIABLE","$this",597],["T_OBJECT_OPERATOR","->",597],["T_STRING","_getValue",597],"(",["T_VARIABLE","$attr",597],",",["T_WHITESPACE"," ",597],["T_CONSTANT_ENCAPSED_STRING","'table'",597],")",",",["T_WHITESPACE","\n            ",597],["T_CONSTANT_ENCAPSED_STRING","'frontend_model'",598],["T_WHITESPACE","  ",598],["T_DOUBLE_ARROW","=>",598],["T_WHITESPACE"," ",598],["T_VARIABLE","$this",598],["T_OBJECT_OPERATOR","->",598],["T_STRING","_getValue",598],"(",["T_VARIABLE","$attr",598],",",["T_WHITESPACE"," ",598],["T_CONSTANT_ENCAPSED_STRING","'frontend'",598],")",",",["T_WHITESPACE","\n            ",598],["T_CONSTANT_ENCAPSED_STRING","'frontend_input'",599],["T_WHITESPACE","  ",599],["T_DOUBLE_ARROW","=>",599],["T_WHITESPACE"," ",599],["T_VARIABLE","$this",599],["T_OBJECT_OPERATOR","->",599],["T_STRING","_getValue",599],"(",["T_VARIABLE","$attr",599],",",["T_WHITESPACE"," ",599],["T_CONSTANT_ENCAPSED_STRING","'input'",599],",",["T_WHITESPACE"," ",599],["T_CONSTANT_ENCAPSED_STRING","'text'",599],")",",",["T_WHITESPACE","\n            ",599],["T_CONSTANT_ENCAPSED_STRING","'frontend_label'",600],["T_WHITESPACE","  ",600],["T_DOUBLE_ARROW","=>",600],["T_WHITESPACE"," ",600],["T_VARIABLE","$this",600],["T_OBJECT_OPERATOR","->",600],["T_STRING","_getValue",600],"(",["T_VARIABLE","$attr",600],",",["T_WHITESPACE"," ",600],["T_CONSTANT_ENCAPSED_STRING","'label'",600],")",",",["T_WHITESPACE","\n            ",600],["T_CONSTANT_ENCAPSED_STRING","'frontend_class'",601],["T_WHITESPACE","  ",601],["T_DOUBLE_ARROW","=>",601],["T_WHITESPACE"," ",601],["T_VARIABLE","$this",601],["T_OBJECT_OPERATOR","->",601],["T_STRING","_getValue",601],"(",["T_VARIABLE","$attr",601],",",["T_WHITESPACE"," ",601],["T_CONSTANT_ENCAPSED_STRING","'frontend_class'",601],")",",",["T_WHITESPACE","\n            ",601],["T_CONSTANT_ENCAPSED_STRING","'source_model'",602],["T_WHITESPACE","    ",602],["T_DOUBLE_ARROW","=>",602],["T_WHITESPACE"," ",602],["T_VARIABLE","$this",602],["T_OBJECT_OPERATOR","->",602],["T_STRING","_getValue",602],"(",["T_VARIABLE","$attr",602],",",["T_WHITESPACE"," ",602],["T_CONSTANT_ENCAPSED_STRING","'source'",602],")",",",["T_WHITESPACE","\n            ",602],["T_CONSTANT_ENCAPSED_STRING","'is_required'",603],["T_WHITESPACE","     ",603],["T_DOUBLE_ARROW","=>",603],["T_WHITESPACE"," ",603],["T_VARIABLE","$this",603],["T_OBJECT_OPERATOR","->",603],["T_STRING","_getValue",603],"(",["T_VARIABLE","$attr",603],",",["T_WHITESPACE"," ",603],["T_CONSTANT_ENCAPSED_STRING","'required'",603],",",["T_WHITESPACE"," ",603],["T_LNUMBER","1",603],")",",",["T_WHITESPACE","\n            ",603],["T_CONSTANT_ENCAPSED_STRING","'is_user_defined'",604],["T_WHITESPACE"," ",604],["T_DOUBLE_ARROW","=>",604],["T_WHITESPACE"," ",604],["T_VARIABLE","$this",604],["T_OBJECT_OPERATOR","->",604],["T_STRING","_getValue",604],"(",["T_VARIABLE","$attr",604],",",["T_WHITESPACE"," ",604],["T_CONSTANT_ENCAPSED_STRING","'user_defined'",604],",",["T_WHITESPACE"," ",604],["T_LNUMBER","0",604],")",",",["T_WHITESPACE","\n            ",604],["T_CONSTANT_ENCAPSED_STRING","'default_value'",605],["T_WHITESPACE","   ",605],["T_DOUBLE_ARROW","=>",605],["T_WHITESPACE"," ",605],["T_VARIABLE","$this",605],["T_OBJECT_OPERATOR","->",605],["T_STRING","_getValue",605],"(",["T_VARIABLE","$attr",605],",",["T_WHITESPACE"," ",605],["T_CONSTANT_ENCAPSED_STRING","'default'",605],")",",",["T_WHITESPACE","\n            ",605],["T_CONSTANT_ENCAPSED_STRING","'is_unique'",606],["T_WHITESPACE","       ",606],["T_DOUBLE_ARROW","=>",606],["T_WHITESPACE"," ",606],["T_VARIABLE","$this",606],["T_OBJECT_OPERATOR","->",606],["T_STRING","_getValue",606],"(",["T_VARIABLE","$attr",606],",",["T_WHITESPACE"," ",606],["T_CONSTANT_ENCAPSED_STRING","'unique'",606],",",["T_WHITESPACE"," ",606],["T_LNUMBER","0",606],")",",",["T_WHITESPACE","\n            ",606],["T_CONSTANT_ENCAPSED_STRING","'note'",607],["T_WHITESPACE","            ",607],["T_DOUBLE_ARROW","=>",607],["T_WHITESPACE"," ",607],["T_VARIABLE","$this",607],["T_OBJECT_OPERATOR","->",607],["T_STRING","_getValue",607],"(",["T_VARIABLE","$attr",607],",",["T_WHITESPACE"," ",607],["T_CONSTANT_ENCAPSED_STRING","'note'",607],")",",",["T_WHITESPACE","\n            ",607],["T_CONSTANT_ENCAPSED_STRING","'is_global'",608],["T_WHITESPACE","       ",608],["T_DOUBLE_ARROW","=>",608],["T_WHITESPACE"," ",608],["T_VARIABLE","$this",608],["T_OBJECT_OPERATOR","->",608],["T_STRING","_getValue",608],"(",["T_VARIABLE","$attr",608],",",["T_WHITESPACE"," ",608],["T_CONSTANT_ENCAPSED_STRING","'global'",608],",",["T_WHITESPACE"," ",608],["T_LNUMBER","1",608],")",",",["T_WHITESPACE","\n        ",608],")",";",["T_WHITESPACE","\n\n        ",609],["T_RETURN","return",611],["T_WHITESPACE"," ",611],["T_VARIABLE","$data",611],";",["T_WHITESPACE","\n    ",611],"}",["T_WHITESPACE","\n\n    ",612],["T_DOC_COMMENT","\/**\n     * Validate attribute data before insert into table\n     *\n     * @param  array $data\n     * @throws Mage_Eav_Exception\n     * @return true\n     *\/",614],["T_WHITESPACE","\n    ",620],["T_PROTECTED","protected",621],["T_WHITESPACE"," ",621],["T_FUNCTION","function",621],["T_WHITESPACE"," ",621],["T_STRING","_validateAttributeData",621],"(",["T_VARIABLE","$data",621],")",["T_WHITESPACE","\n    ",621],"{",["T_WHITESPACE","\n        ",622],["T_VARIABLE","$attributeCodeMaxLength",623],["T_WHITESPACE"," ",623],"=",["T_WHITESPACE"," ",623],["T_STRING","Mage_Eav_Model_Entity_Attribute",623],["T_DOUBLE_COLON","::",623],["T_STRING","ATTRIBUTE_CODE_MAX_LENGTH",623],";",["T_WHITESPACE","\n\n        ",623],["T_IF","if",625],["T_WHITESPACE"," ",625],"(",["T_ISSET","isset",625],"(",["T_VARIABLE","$data",625],"[",["T_CONSTANT_ENCAPSED_STRING","'attribute_code'",625],"]",")",["T_WHITESPACE"," ",625],["T_BOOLEAN_AND","&&",625],["T_WHITESPACE","\n           ",625],"!",["T_STRING","Zend_Validate",626],["T_DOUBLE_COLON","::",626],["T_STRING","is",626],"(",["T_VARIABLE","$data",626],"[",["T_CONSTANT_ENCAPSED_STRING","'attribute_code'",626],"]",",",["T_WHITESPACE"," ",626],["T_CONSTANT_ENCAPSED_STRING","'StringLength'",626],",",["T_WHITESPACE"," ",626],["T_ARRAY","array",626],"(",["T_CONSTANT_ENCAPSED_STRING","'max'",626],["T_WHITESPACE"," ",626],["T_DOUBLE_ARROW","=>",626],["T_WHITESPACE"," ",626],["T_VARIABLE","$attributeCodeMaxLength",626],")",")",")",["T_WHITESPACE","\n        ",626],"{",["T_WHITESPACE","\n            ",627],["T_THROW","throw",628],["T_WHITESPACE"," ",628],["T_STRING","Mage",628],["T_DOUBLE_COLON","::",628],["T_STRING","exception",628],"(",["T_CONSTANT_ENCAPSED_STRING","'Mage_Eav'",628],",",["T_WHITESPACE","\n                ",628],["T_STRING","Mage",629],["T_DOUBLE_COLON","::",629],["T_STRING","helper",629],"(",["T_CONSTANT_ENCAPSED_STRING","'eav'",629],")",["T_OBJECT_OPERATOR","->",629],["T_STRING","__",629],"(",["T_CONSTANT_ENCAPSED_STRING","'Maximum length of attribute code must be less then %s symbols'",629],",",["T_WHITESPACE"," ",629],["T_VARIABLE","$attributeCodeMaxLength",629],")",["T_WHITESPACE","\n            ",629],")",";",["T_WHITESPACE","\n        ",630],"}",["T_WHITESPACE","\n\n        ",631],["T_RETURN","return",633],["T_WHITESPACE"," ",633],["T_STRING","true",633],";",["T_WHITESPACE","\n    ",633],"}",["T_WHITESPACE","\n\n    ",634],["T_DOC_COMMENT","\/**\n     * Add attribute to an entity type\n     *\n     * If attribute is system will add to all existing attribute sets\n     *\n     * @param string|integer $entityTypeId\n     * @param string $code\n     * @param array $attr\n     * @return Mage_Eav_Model_Entity_Setup\n     *\/",636],["T_WHITESPACE","\n    ",645],["T_PUBLIC","public",646],["T_WHITESPACE"," ",646],["T_FUNCTION","function",646],["T_WHITESPACE"," ",646],["T_STRING","addAttribute",646],"(",["T_VARIABLE","$entityTypeId",646],",",["T_WHITESPACE"," ",646],["T_VARIABLE","$code",646],",",["T_WHITESPACE"," ",646],["T_ARRAY","array",646],["T_WHITESPACE"," ",646],["T_VARIABLE","$attr",646],")",["T_WHITESPACE","\n    ",646],"{",["T_WHITESPACE","\n        ",647],["T_VARIABLE","$entityTypeId",648],["T_WHITESPACE"," ",648],"=",["T_WHITESPACE"," ",648],["T_VARIABLE","$this",648],["T_OBJECT_OPERATOR","->",648],["T_STRING","getEntityTypeId",648],"(",["T_VARIABLE","$entityTypeId",648],")",";",["T_WHITESPACE","\n        ",648],["T_VARIABLE","$data",649],["T_WHITESPACE"," ",649],"=",["T_WHITESPACE"," ",649],["T_STRING","array_merge",649],"(",["T_WHITESPACE","\n            ",649],["T_ARRAY","array",650],"(",["T_WHITESPACE","\n                ",650],["T_CONSTANT_ENCAPSED_STRING","'entity_type_id'",651],["T_WHITESPACE"," ",651],["T_DOUBLE_ARROW","=>",651],["T_WHITESPACE"," ",651],["T_VARIABLE","$entityTypeId",651],",",["T_WHITESPACE","\n                ",651],["T_CONSTANT_ENCAPSED_STRING","'attribute_code'",652],["T_WHITESPACE"," ",652],["T_DOUBLE_ARROW","=>",652],["T_WHITESPACE"," ",652],["T_VARIABLE","$code",652],["T_WHITESPACE","\n            ",652],")",",",["T_WHITESPACE","\n            ",653],["T_VARIABLE","$this",654],["T_OBJECT_OPERATOR","->",654],["T_STRING","_prepareValues",654],"(",["T_VARIABLE","$attr",654],")",["T_WHITESPACE","\n         ",654],")",";",["T_WHITESPACE","\n\n        ",655],["T_VARIABLE","$this",657],["T_OBJECT_OPERATOR","->",657],["T_STRING","_validateAttributeData",657],"(",["T_VARIABLE","$data",657],")",";",["T_WHITESPACE","\n\n        ",657],["T_VARIABLE","$sortOrder",659],["T_WHITESPACE"," ",659],"=",["T_WHITESPACE"," ",659],["T_ISSET","isset",659],"(",["T_VARIABLE","$attr",659],"[",["T_CONSTANT_ENCAPSED_STRING","'sort_order'",659],"]",")",["T_WHITESPACE"," ",659],"?",["T_WHITESPACE"," ",659],["T_VARIABLE","$attr",659],"[",["T_CONSTANT_ENCAPSED_STRING","'sort_order'",659],"]",["T_WHITESPACE"," ",659],":",["T_WHITESPACE"," ",659],["T_STRING","null",659],";",["T_WHITESPACE","\n        ",659],["T_VARIABLE","$attributeId",660],["T_WHITESPACE"," ",660],"=",["T_WHITESPACE"," ",660],["T_VARIABLE","$this",660],["T_OBJECT_OPERATOR","->",660],["T_STRING","getAttribute",660],"(",["T_VARIABLE","$entityTypeId",660],",",["T_WHITESPACE"," ",660],["T_VARIABLE","$code",660],",",["T_WHITESPACE"," ",660],["T_CONSTANT_ENCAPSED_STRING","'attribute_id'",660],")",";",["T_WHITESPACE","\n        ",660],["T_IF","if",661],["T_WHITESPACE"," ",661],"(",["T_VARIABLE","$attributeId",661],")",["T_WHITESPACE"," ",661],"{",["T_WHITESPACE","\n            ",661],["T_VARIABLE","$this",662],["T_OBJECT_OPERATOR","->",662],["T_STRING","updateAttribute",662],"(",["T_VARIABLE","$entityTypeId",662],",",["T_WHITESPACE"," ",662],["T_VARIABLE","$attributeId",662],",",["T_WHITESPACE"," ",662],["T_VARIABLE","$data",662],",",["T_WHITESPACE"," ",662],["T_STRING","null",662],",",["T_WHITESPACE"," ",662],["T_VARIABLE","$sortOrder",662],")",";",["T_WHITESPACE","\n        ",662],"}",["T_WHITESPACE"," ",663],["T_ELSE","else",663],["T_WHITESPACE"," ",663],"{",["T_WHITESPACE","\n            ",663],["T_VARIABLE","$this",664],["T_OBJECT_OPERATOR","->",664],["T_STRING","_insertAttribute",664],"(",["T_VARIABLE","$data",664],")",";",["T_WHITESPACE","\n        ",664],"}",["T_WHITESPACE","\n\n        ",665],["T_IF","if",667],["T_WHITESPACE"," ",667],"(","!",["T_EMPTY","empty",667],"(",["T_VARIABLE","$attr",667],"[",["T_CONSTANT_ENCAPSED_STRING","'group'",667],"]",")",["T_WHITESPACE"," ",667],["T_BOOLEAN_OR","||",667],["T_WHITESPACE"," ",667],["T_EMPTY","empty",667],"(",["T_VARIABLE","$attr",667],"[",["T_CONSTANT_ENCAPSED_STRING","'user_defined'",667],"]",")",")",["T_WHITESPACE"," ",667],"{",["T_WHITESPACE","\n            ",667],["T_VARIABLE","$select",668],["T_WHITESPACE"," ",668],"=",["T_WHITESPACE"," ",668],["T_VARIABLE","$this",668],["T_OBJECT_OPERATOR","->",668],["T_STRING","_conn",668],["T_OBJECT_OPERATOR","->",668],["T_STRING","select",668],"(",")",["T_WHITESPACE","\n                ",668],["T_OBJECT_OPERATOR","->",669],["T_STRING","from",669],"(",["T_VARIABLE","$this",669],["T_OBJECT_OPERATOR","->",669],["T_STRING","getTable",669],"(",["T_CONSTANT_ENCAPSED_STRING","'eav\/attribute_set'",669],")",")",["T_WHITESPACE","\n                ",669],["T_OBJECT_OPERATOR","->",670],["T_STRING","where",670],"(",["T_CONSTANT_ENCAPSED_STRING","'entity_type_id = :entity_type_id'",670],")",";",["T_WHITESPACE","\n            ",670],["T_VARIABLE","$sets",671],["T_WHITESPACE"," ",671],"=",["T_WHITESPACE"," ",671],["T_VARIABLE","$this",671],["T_OBJECT_OPERATOR","->",671],["T_STRING","_conn",671],["T_OBJECT_OPERATOR","->",671],["T_STRING","fetchAll",671],"(",["T_VARIABLE","$select",671],",",["T_WHITESPACE"," ",671],["T_ARRAY","array",671],"(",["T_CONSTANT_ENCAPSED_STRING","'entity_type_id'",671],["T_WHITESPACE"," ",671],["T_DOUBLE_ARROW","=>",671],["T_WHITESPACE"," ",671],["T_VARIABLE","$entityTypeId",671],")",")",";",["T_WHITESPACE","\n            ",671],["T_FOREACH","foreach",672],["T_WHITESPACE"," ",672],"(",["T_VARIABLE","$sets",672],["T_WHITESPACE"," ",672],["T_AS","as",672],["T_WHITESPACE"," ",672],["T_VARIABLE","$set",672],")",["T_WHITESPACE"," ",672],"{",["T_WHITESPACE","\n                ",672],["T_IF","if",673],["T_WHITESPACE"," ",673],"(","!",["T_EMPTY","empty",673],"(",["T_VARIABLE","$attr",673],"[",["T_CONSTANT_ENCAPSED_STRING","'group'",673],"]",")",")",["T_WHITESPACE"," ",673],"{",["T_WHITESPACE","\n                    ",673],["T_VARIABLE","$this",674],["T_OBJECT_OPERATOR","->",674],["T_STRING","addAttributeGroup",674],"(",["T_VARIABLE","$entityTypeId",674],",",["T_WHITESPACE"," ",674],["T_VARIABLE","$set",674],"[",["T_CONSTANT_ENCAPSED_STRING","'attribute_set_id'",674],"]",",",["T_WHITESPACE","\n                        ",674],["T_VARIABLE","$attr",675],"[",["T_CONSTANT_ENCAPSED_STRING","'group'",675],"]",")",";",["T_WHITESPACE","\n                    ",675],["T_VARIABLE","$this",676],["T_OBJECT_OPERATOR","->",676],["T_STRING","addAttributeToSet",676],"(",["T_VARIABLE","$entityTypeId",676],",",["T_WHITESPACE"," ",676],["T_VARIABLE","$set",676],"[",["T_CONSTANT_ENCAPSED_STRING","'attribute_set_id'",676],"]",",",["T_WHITESPACE","\n                        ",676],["T_VARIABLE","$attr",677],"[",["T_CONSTANT_ENCAPSED_STRING","'group'",677],"]",",",["T_WHITESPACE"," ",677],["T_VARIABLE","$code",677],",",["T_WHITESPACE"," ",677],["T_VARIABLE","$sortOrder",677],")",";",["T_WHITESPACE","\n                ",677],"}",["T_WHITESPACE"," ",678],["T_ELSE","else",678],["T_WHITESPACE"," ",678],"{",["T_WHITESPACE","\n                    ",678],["T_VARIABLE","$this",679],["T_OBJECT_OPERATOR","->",679],["T_STRING","addAttributeToSet",679],"(",["T_VARIABLE","$entityTypeId",679],",",["T_WHITESPACE"," ",679],["T_VARIABLE","$set",679],"[",["T_CONSTANT_ENCAPSED_STRING","'attribute_set_id'",679],"]",",",["T_WHITESPACE","\n                        ",679],["T_VARIABLE","$this",680],["T_OBJECT_OPERATOR","->",680],["T_STRING","_generalGroupName",680],",",["T_WHITESPACE"," ",680],["T_VARIABLE","$code",680],",",["T_WHITESPACE"," ",680],["T_VARIABLE","$sortOrder",680],")",";",["T_WHITESPACE","\n                ",680],"}",["T_WHITESPACE","\n            ",681],"}",["T_WHITESPACE","\n        ",682],"}",["T_WHITESPACE","\n\n        ",683],["T_IF","if",685],["T_WHITESPACE"," ",685],"(",["T_ISSET","isset",685],"(",["T_VARIABLE","$attr",685],"[",["T_CONSTANT_ENCAPSED_STRING","'option'",685],"]",")",["T_WHITESPACE"," ",685],["T_BOOLEAN_AND","&&",685],["T_WHITESPACE"," ",685],["T_STRING","is_array",685],"(",["T_VARIABLE","$attr",685],"[",["T_CONSTANT_ENCAPSED_STRING","'option'",685],"]",")",")",["T_WHITESPACE"," ",685],"{",["T_WHITESPACE","\n            ",685],["T_VARIABLE","$option",686],["T_WHITESPACE"," ",686],"=",["T_WHITESPACE"," ",686],["T_VARIABLE","$attr",686],"[",["T_CONSTANT_ENCAPSED_STRING","'option'",686],"]",";",["T_WHITESPACE","\n            ",686],["T_VARIABLE","$option",687],"[",["T_CONSTANT_ENCAPSED_STRING","'attribute_id'",687],"]",["T_WHITESPACE"," ",687],"=",["T_WHITESPACE"," ",687],["T_VARIABLE","$this",687],["T_OBJECT_OPERATOR","->",687],["T_STRING","getAttributeId",687],"(",["T_VARIABLE","$entityTypeId",687],",",["T_WHITESPACE"," ",687],["T_VARIABLE","$code",687],")",";",["T_WHITESPACE","\n            ",687],["T_VARIABLE","$this",688],["T_OBJECT_OPERATOR","->",688],["T_STRING","addAttributeOption",688],"(",["T_VARIABLE","$option",688],")",";",["T_WHITESPACE","\n        ",688],"}",["T_WHITESPACE","\n\n        ",689],["T_RETURN","return",691],["T_WHITESPACE"," ",691],["T_VARIABLE","$this",691],";",["T_WHITESPACE","\n    ",691],"}",["T_WHITESPACE","\n\n    ",692],["T_DOC_COMMENT","\/**\n     * Add Attribure Option\n     *\n     * @param array $option\n     *\/",694],["T_WHITESPACE","\n    ",698],["T_PUBLIC","public",699],["T_WHITESPACE"," ",699],["T_FUNCTION","function",699],["T_WHITESPACE"," ",699],["T_STRING","addAttributeOption",699],"(",["T_VARIABLE","$option",699],")",["T_WHITESPACE","\n    ",699],"{",["T_WHITESPACE","\n        ",700],["T_VARIABLE","$optionTable",701],["T_WHITESPACE","        ",701],"=",["T_WHITESPACE"," ",701],["T_VARIABLE","$this",701],["T_OBJECT_OPERATOR","->",701],["T_STRING","getTable",701],"(",["T_CONSTANT_ENCAPSED_STRING","'eav\/attribute_option'",701],")",";",["T_WHITESPACE","\n        ",701],["T_VARIABLE","$optionValueTable",702],["T_WHITESPACE","   ",702],"=",["T_WHITESPACE"," ",702],["T_VARIABLE","$this",702],["T_OBJECT_OPERATOR","->",702],["T_STRING","getTable",702],"(",["T_CONSTANT_ENCAPSED_STRING","'eav\/attribute_option_value'",702],")",";",["T_WHITESPACE","\n\n        ",702],["T_IF","if",704],["T_WHITESPACE"," ",704],"(",["T_ISSET","isset",704],"(",["T_VARIABLE","$option",704],"[",["T_CONSTANT_ENCAPSED_STRING","'value'",704],"]",")",")",["T_WHITESPACE"," ",704],"{",["T_WHITESPACE","\n            ",704],["T_FOREACH","foreach",705],["T_WHITESPACE"," ",705],"(",["T_VARIABLE","$option",705],"[",["T_CONSTANT_ENCAPSED_STRING","'value'",705],"]",["T_WHITESPACE"," ",705],["T_AS","as",705],["T_WHITESPACE"," ",705],["T_VARIABLE","$optionId",705],["T_WHITESPACE"," ",705],["T_DOUBLE_ARROW","=>",705],["T_WHITESPACE"," ",705],["T_VARIABLE","$values",705],")",["T_WHITESPACE"," ",705],"{",["T_WHITESPACE","\n                ",705],["T_VARIABLE","$intOptionId",706],["T_WHITESPACE"," ",706],"=",["T_WHITESPACE"," ",706],["T_INT_CAST","(int)",706],["T_WHITESPACE"," ",706],["T_VARIABLE","$optionId",706],";",["T_WHITESPACE","\n                ",706],["T_IF","if",707],["T_WHITESPACE"," ",707],"(","!",["T_EMPTY","empty",707],"(",["T_VARIABLE","$option",707],"[",["T_CONSTANT_ENCAPSED_STRING","'delete'",707],"]","[",["T_VARIABLE","$optionId",707],"]",")",")",["T_WHITESPACE"," ",707],"{",["T_WHITESPACE","\n                    ",707],["T_IF","if",708],["T_WHITESPACE"," ",708],"(",["T_VARIABLE","$intOptionId",708],")",["T_WHITESPACE"," ",708],"{",["T_WHITESPACE","\n                        ",708],["T_VARIABLE","$condition",709],["T_WHITESPACE"," ",709],"=",["T_WHITESPACE"," ",709],["T_ARRAY","array",709],"(",["T_CONSTANT_ENCAPSED_STRING","'option_id =?'",709],["T_WHITESPACE"," ",709],["T_DOUBLE_ARROW","=>",709],["T_WHITESPACE"," ",709],["T_VARIABLE","$intOptionId",709],")",";",["T_WHITESPACE","\n                        ",709],["T_VARIABLE","$this",710],["T_OBJECT_OPERATOR","->",710],["T_STRING","_conn",710],["T_OBJECT_OPERATOR","->",710],["T_STRING","delete",710],"(",["T_VARIABLE","$optionTable",710],",",["T_WHITESPACE"," ",710],["T_VARIABLE","$condition",710],")",";",["T_WHITESPACE","\n                    ",710],"}",["T_WHITESPACE","\n                    ",711],["T_CONTINUE","continue",712],";",["T_WHITESPACE","\n                ",712],"}",["T_WHITESPACE","\n\n                ",713],["T_IF","if",715],["T_WHITESPACE"," ",715],"(","!",["T_VARIABLE","$intOptionId",715],")",["T_WHITESPACE"," ",715],"{",["T_WHITESPACE","\n                    ",715],["T_VARIABLE","$data",716],["T_WHITESPACE"," ",716],"=",["T_WHITESPACE"," ",716],["T_ARRAY","array",716],"(",["T_WHITESPACE","\n                        ",716],["T_CONSTANT_ENCAPSED_STRING","'attribute_id'",717],["T_WHITESPACE","  ",717],["T_DOUBLE_ARROW","=>",717],["T_WHITESPACE"," ",717],["T_VARIABLE","$option",717],"[",["T_CONSTANT_ENCAPSED_STRING","'attribute_id'",717],"]",",",["T_WHITESPACE","\n                        ",717],["T_CONSTANT_ENCAPSED_STRING","'sort_order'",718],["T_WHITESPACE","    ",718],["T_DOUBLE_ARROW","=>",718],["T_WHITESPACE"," ",718],["T_ISSET","isset",718],"(",["T_VARIABLE","$option",718],"[",["T_CONSTANT_ENCAPSED_STRING","'order'",718],"]","[",["T_VARIABLE","$optionId",718],"]",")",["T_WHITESPACE"," ",718],"?",["T_WHITESPACE"," ",718],["T_VARIABLE","$option",718],"[",["T_CONSTANT_ENCAPSED_STRING","'order'",718],"]","[",["T_VARIABLE","$optionId",718],"]",["T_WHITESPACE"," ",718],":",["T_WHITESPACE"," ",718],["T_LNUMBER","0",718],",",["T_WHITESPACE","\n                    ",718],")",";",["T_WHITESPACE","\n                    ",719],["T_VARIABLE","$this",720],["T_OBJECT_OPERATOR","->",720],["T_STRING","_conn",720],["T_OBJECT_OPERATOR","->",720],["T_STRING","insert",720],"(",["T_VARIABLE","$optionTable",720],",",["T_WHITESPACE"," ",720],["T_VARIABLE","$data",720],")",";",["T_WHITESPACE","\n                    ",720],["T_VARIABLE","$intOptionId",721],["T_WHITESPACE"," ",721],"=",["T_WHITESPACE"," ",721],["T_VARIABLE","$this",721],["T_OBJECT_OPERATOR","->",721],["T_STRING","_conn",721],["T_OBJECT_OPERATOR","->",721],["T_STRING","lastInsertId",721],"(",["T_VARIABLE","$optionTable",721],")",";",["T_WHITESPACE","\n                ",721],"}",["T_WHITESPACE"," ",722],["T_ELSE","else",722],["T_WHITESPACE"," ",722],"{",["T_WHITESPACE","\n                    ",722],["T_VARIABLE","$data",723],["T_WHITESPACE"," ",723],"=",["T_WHITESPACE"," ",723],["T_ARRAY","array",723],"(",["T_WHITESPACE","\n                        ",723],["T_CONSTANT_ENCAPSED_STRING","'sort_order'",724],["T_WHITESPACE","    ",724],["T_DOUBLE_ARROW","=>",724],["T_WHITESPACE"," ",724],["T_ISSET","isset",724],"(",["T_VARIABLE","$option",724],"[",["T_CONSTANT_ENCAPSED_STRING","'order'",724],"]","[",["T_VARIABLE","$optionId",724],"]",")",["T_WHITESPACE"," ",724],"?",["T_WHITESPACE"," ",724],["T_VARIABLE","$option",724],"[",["T_CONSTANT_ENCAPSED_STRING","'order'",724],"]","[",["T_VARIABLE","$optionId",724],"]",["T_WHITESPACE"," ",724],":",["T_WHITESPACE"," ",724],["T_LNUMBER","0",724],",",["T_WHITESPACE","\n                    ",724],")",";",["T_WHITESPACE","\n                    ",725],["T_VARIABLE","$this",726],["T_OBJECT_OPERATOR","->",726],["T_STRING","_conn",726],["T_OBJECT_OPERATOR","->",726],["T_STRING","update",726],"(",["T_VARIABLE","$optionTable",726],",",["T_WHITESPACE"," ",726],["T_VARIABLE","$data",726],",",["T_WHITESPACE"," ",726],["T_ARRAY","array",726],"(",["T_CONSTANT_ENCAPSED_STRING","'option_id=?'",726],["T_WHITESPACE"," ",726],["T_DOUBLE_ARROW","=>",726],["T_WHITESPACE"," ",726],["T_VARIABLE","$intOptionId",726],")",")",";",["T_WHITESPACE","\n                ",726],"}",["T_WHITESPACE","\n\n                ",727],["T_COMMENT","\/\/ Default value\n",729],["T_WHITESPACE","                ",730],["T_IF","if",730],["T_WHITESPACE"," ",730],"(","!",["T_ISSET","isset",730],"(",["T_VARIABLE","$values",730],"[",["T_LNUMBER","0",730],"]",")",")",["T_WHITESPACE"," ",730],"{",["T_WHITESPACE","\n                    ",730],["T_STRING","Mage",731],["T_DOUBLE_COLON","::",731],["T_STRING","throwException",731],"(",["T_STRING","Mage",731],["T_DOUBLE_COLON","::",731],["T_STRING","helper",731],"(",["T_CONSTANT_ENCAPSED_STRING","'eav'",731],")",["T_OBJECT_OPERATOR","->",731],["T_STRING","__",731],"(",["T_CONSTANT_ENCAPSED_STRING","'Default option value is not defined'",731],")",")",";",["T_WHITESPACE","\n                ",731],"}",["T_WHITESPACE","\n                ",732],["T_VARIABLE","$condition",733],["T_WHITESPACE"," ",733],"=",["T_WHITESPACE"," ",733],["T_ARRAY","array",733],"(",["T_CONSTANT_ENCAPSED_STRING","'option_id =?'",733],["T_WHITESPACE"," ",733],["T_DOUBLE_ARROW","=>",733],["T_WHITESPACE"," ",733],["T_VARIABLE","$intOptionId",733],")",";",["T_WHITESPACE","\n                ",733],["T_VARIABLE","$this",734],["T_OBJECT_OPERATOR","->",734],["T_STRING","_conn",734],["T_OBJECT_OPERATOR","->",734],["T_STRING","delete",734],"(",["T_VARIABLE","$optionValueTable",734],",",["T_WHITESPACE"," ",734],["T_VARIABLE","$condition",734],")",";",["T_WHITESPACE","\n                ",734],["T_FOREACH","foreach",735],["T_WHITESPACE"," ",735],"(",["T_VARIABLE","$values",735],["T_WHITESPACE"," ",735],["T_AS","as",735],["T_WHITESPACE"," ",735],["T_VARIABLE","$storeId",735],["T_WHITESPACE"," ",735],["T_DOUBLE_ARROW","=>",735],["T_WHITESPACE"," ",735],["T_VARIABLE","$value",735],")",["T_WHITESPACE"," ",735],"{",["T_WHITESPACE","\n                    ",735],["T_VARIABLE","$data",736],["T_WHITESPACE"," ",736],"=",["T_WHITESPACE"," ",736],["T_ARRAY","array",736],"(",["T_WHITESPACE","\n                        ",736],["T_CONSTANT_ENCAPSED_STRING","'option_id'",737],["T_WHITESPACE"," ",737],["T_DOUBLE_ARROW","=>",737],["T_WHITESPACE"," ",737],["T_VARIABLE","$intOptionId",737],",",["T_WHITESPACE","\n                        ",737],["T_CONSTANT_ENCAPSED_STRING","'store_id'",738],["T_WHITESPACE","  ",738],["T_DOUBLE_ARROW","=>",738],["T_WHITESPACE"," ",738],["T_VARIABLE","$storeId",738],",",["T_WHITESPACE","\n                        ",738],["T_CONSTANT_ENCAPSED_STRING","'value'",739],["T_WHITESPACE","     ",739],["T_DOUBLE_ARROW","=>",739],["T_WHITESPACE"," ",739],["T_VARIABLE","$value",739],",",["T_WHITESPACE","\n                    ",739],")",";",["T_WHITESPACE","\n                    ",740],["T_VARIABLE","$this",741],["T_OBJECT_OPERATOR","->",741],["T_STRING","_conn",741],["T_OBJECT_OPERATOR","->",741],["T_STRING","insert",741],"(",["T_VARIABLE","$optionValueTable",741],",",["T_WHITESPACE"," ",741],["T_VARIABLE","$data",741],")",";",["T_WHITESPACE","\n                ",741],"}",["T_WHITESPACE","\n            ",742],"}",["T_WHITESPACE","\n        ",743],"}",["T_WHITESPACE"," ",744],["T_ELSE","else",744],["T_WHITESPACE"," ",744],["T_IF","if",744],["T_WHITESPACE"," ",744],"(",["T_ISSET","isset",744],"(",["T_VARIABLE","$option",744],"[",["T_CONSTANT_ENCAPSED_STRING","'values'",744],"]",")",")",["T_WHITESPACE"," ",744],"{",["T_WHITESPACE","\n            ",744],["T_FOREACH","foreach",745],["T_WHITESPACE"," ",745],"(",["T_VARIABLE","$option",745],"[",["T_CONSTANT_ENCAPSED_STRING","'values'",745],"]",["T_WHITESPACE"," ",745],["T_AS","as",745],["T_WHITESPACE"," ",745],["T_VARIABLE","$sortOrder",745],["T_WHITESPACE"," ",745],["T_DOUBLE_ARROW","=>",745],["T_WHITESPACE"," ",745],["T_VARIABLE","$label",745],")",["T_WHITESPACE"," ",745],"{",["T_WHITESPACE","\n                ",745],["T_COMMENT","\/\/ add option\n",746],["T_WHITESPACE","                ",747],["T_VARIABLE","$data",747],["T_WHITESPACE"," ",747],"=",["T_WHITESPACE"," ",747],["T_ARRAY","array",747],"(",["T_WHITESPACE","\n                    ",747],["T_CONSTANT_ENCAPSED_STRING","'attribute_id'",748],["T_WHITESPACE"," ",748],["T_DOUBLE_ARROW","=>",748],["T_WHITESPACE"," ",748],["T_VARIABLE","$option",748],"[",["T_CONSTANT_ENCAPSED_STRING","'attribute_id'",748],"]",",",["T_WHITESPACE","\n                    ",748],["T_CONSTANT_ENCAPSED_STRING","'sort_order'",749],["T_WHITESPACE","   ",749],["T_DOUBLE_ARROW","=>",749],["T_WHITESPACE"," ",749],["T_VARIABLE","$sortOrder",749],",",["T_WHITESPACE","\n                ",749],")",";",["T_WHITESPACE","\n                ",750],["T_VARIABLE","$this",751],["T_OBJECT_OPERATOR","->",751],["T_STRING","_conn",751],["T_OBJECT_OPERATOR","->",751],["T_STRING","insert",751],"(",["T_VARIABLE","$optionTable",751],",",["T_WHITESPACE"," ",751],["T_VARIABLE","$data",751],")",";",["T_WHITESPACE","\n                ",751],["T_VARIABLE","$intOptionId",752],["T_WHITESPACE"," ",752],"=",["T_WHITESPACE"," ",752],["T_VARIABLE","$this",752],["T_OBJECT_OPERATOR","->",752],["T_STRING","_conn",752],["T_OBJECT_OPERATOR","->",752],["T_STRING","lastInsertId",752],"(",["T_VARIABLE","$optionTable",752],")",";",["T_WHITESPACE","\n\n                ",752],["T_VARIABLE","$data",754],["T_WHITESPACE"," ",754],"=",["T_WHITESPACE"," ",754],["T_ARRAY","array",754],"(",["T_WHITESPACE","\n                    ",754],["T_CONSTANT_ENCAPSED_STRING","'option_id'",755],["T_WHITESPACE"," ",755],["T_DOUBLE_ARROW","=>",755],["T_WHITESPACE"," ",755],["T_VARIABLE","$intOptionId",755],",",["T_WHITESPACE","\n                    ",755],["T_CONSTANT_ENCAPSED_STRING","'store_id'",756],["T_WHITESPACE","  ",756],["T_DOUBLE_ARROW","=>",756],["T_WHITESPACE"," ",756],["T_LNUMBER","0",756],",",["T_WHITESPACE","\n                    ",756],["T_CONSTANT_ENCAPSED_STRING","'value'",757],["T_WHITESPACE","     ",757],["T_DOUBLE_ARROW","=>",757],["T_WHITESPACE"," ",757],["T_VARIABLE","$label",757],",",["T_WHITESPACE","\n                ",757],")",";",["T_WHITESPACE","\n                ",758],["T_VARIABLE","$this",759],["T_OBJECT_OPERATOR","->",759],["T_STRING","_conn",759],["T_OBJECT_OPERATOR","->",759],["T_STRING","insert",759],"(",["T_VARIABLE","$optionValueTable",759],",",["T_WHITESPACE"," ",759],["T_VARIABLE","$data",759],")",";",["T_WHITESPACE","\n            ",759],"}",["T_WHITESPACE","\n        ",760],"}",["T_WHITESPACE","\n    ",761],"}",["T_WHITESPACE","\n\n    ",762],["T_DOC_COMMENT","\/**\n     * Update Attribute data and Attribute additional data\n     *\n     * @param mixed $entityTypeId\n     * @param mixed $id\n     * @param string $field\n     * @param mixed $value\n     * @param int $sortOrder\n     * @return Mage_Eav_Model_Entity_Setup\n     *\/",764],["T_WHITESPACE","\n    ",773],["T_PUBLIC","public",774],["T_WHITESPACE"," ",774],["T_FUNCTION","function",774],["T_WHITESPACE"," ",774],["T_STRING","updateAttribute",774],"(",["T_VARIABLE","$entityTypeId",774],",",["T_WHITESPACE"," ",774],["T_VARIABLE","$id",774],",",["T_WHITESPACE"," ",774],["T_VARIABLE","$field",774],",",["T_WHITESPACE"," ",774],["T_VARIABLE","$value",774],["T_WHITESPACE"," ",774],"=",["T_WHITESPACE"," ",774],["T_STRING","null",774],",",["T_WHITESPACE"," ",774],["T_VARIABLE","$sortOrder",774],["T_WHITESPACE"," ",774],"=",["T_WHITESPACE"," ",774],["T_STRING","null",774],")",["T_WHITESPACE","\n    ",774],"{",["T_WHITESPACE","\n        ",775],["T_VARIABLE","$this",776],["T_OBJECT_OPERATOR","->",776],["T_STRING","_updateAttribute",776],"(",["T_VARIABLE","$entityTypeId",776],",",["T_WHITESPACE"," ",776],["T_VARIABLE","$id",776],",",["T_WHITESPACE"," ",776],["T_VARIABLE","$field",776],",",["T_WHITESPACE"," ",776],["T_VARIABLE","$value",776],",",["T_WHITESPACE"," ",776],["T_VARIABLE","$sortOrder",776],")",";",["T_WHITESPACE","\n        ",776],["T_VARIABLE","$this",777],["T_OBJECT_OPERATOR","->",777],["T_STRING","_updateAttributeAdditionalData",777],"(",["T_VARIABLE","$entityTypeId",777],",",["T_WHITESPACE"," ",777],["T_VARIABLE","$id",777],",",["T_WHITESPACE"," ",777],["T_VARIABLE","$field",777],",",["T_WHITESPACE"," ",777],["T_VARIABLE","$value",777],")",";",["T_WHITESPACE","\n        ",777],["T_RETURN","return",778],["T_WHITESPACE"," ",778],["T_VARIABLE","$this",778],";",["T_WHITESPACE","\n    ",778],"}",["T_WHITESPACE","\n\n    ",779],["T_DOC_COMMENT","\/**\n     * Update Attribute data\n     *\n     * @param mixed $entityTypeId\n     * @param mixed $id\n     * @param string $field\n     * @param mixed $value\n     * @param int $sortOrder\n     * @return Mage_Eav_Model_Entity_Setup\n     *\/",781],["T_WHITESPACE","\n    ",790],["T_PROTECTED","protected",791],["T_WHITESPACE"," ",791],["T_FUNCTION","function",791],["T_WHITESPACE"," ",791],["T_STRING","_updateAttribute",791],"(",["T_VARIABLE","$entityTypeId",791],",",["T_WHITESPACE"," ",791],["T_VARIABLE","$id",791],",",["T_WHITESPACE"," ",791],["T_VARIABLE","$field",791],",",["T_WHITESPACE"," ",791],["T_VARIABLE","$value",791],["T_WHITESPACE"," ",791],"=",["T_WHITESPACE"," ",791],["T_STRING","null",791],",",["T_WHITESPACE"," ",791],["T_VARIABLE","$sortOrder",791],["T_WHITESPACE"," ",791],"=",["T_WHITESPACE"," ",791],["T_STRING","null",791],")",["T_WHITESPACE","\n    ",791],"{",["T_WHITESPACE","\n        ",792],["T_IF","if",793],["T_WHITESPACE"," ",793],"(",["T_VARIABLE","$sortOrder",793],["T_WHITESPACE"," ",793],["T_IS_NOT_IDENTICAL","!==",793],["T_WHITESPACE"," ",793],["T_STRING","null",793],")",["T_WHITESPACE"," ",793],"{",["T_WHITESPACE","\n            ",793],["T_VARIABLE","$this",794],["T_OBJECT_OPERATOR","->",794],["T_STRING","updateTableRow",794],"(",["T_CONSTANT_ENCAPSED_STRING","'eav\/entity_attribute'",794],",",["T_WHITESPACE","\n                ",794],["T_CONSTANT_ENCAPSED_STRING","'attribute_id'",795],",",["T_WHITESPACE"," ",795],["T_VARIABLE","$this",795],["T_OBJECT_OPERATOR","->",795],["T_STRING","getAttributeId",795],"(",["T_VARIABLE","$entityTypeId",795],",",["T_WHITESPACE"," ",795],["T_VARIABLE","$id",795],")",",",["T_WHITESPACE","\n                ",795],["T_CONSTANT_ENCAPSED_STRING","'sort_order'",796],",",["T_WHITESPACE"," ",796],["T_VARIABLE","$sortOrder",796],["T_WHITESPACE","\n            ",796],")",";",["T_WHITESPACE","\n        ",797],"}",["T_WHITESPACE","\n\n        ",798],["T_VARIABLE","$attributeFields",800],["T_WHITESPACE"," ",800],"=",["T_WHITESPACE"," ",800],["T_VARIABLE","$this",800],["T_OBJECT_OPERATOR","->",800],["T_STRING","_getAttributeTableFields",800],"(",")",";",["T_WHITESPACE","\n        ",800],["T_IF","if",801],["T_WHITESPACE"," ",801],"(",["T_STRING","is_array",801],"(",["T_VARIABLE","$field",801],")",")",["T_WHITESPACE"," ",801],"{",["T_WHITESPACE","\n            ",801],["T_VARIABLE","$bind",802],["T_WHITESPACE"," ",802],"=",["T_WHITESPACE"," ",802],["T_ARRAY","array",802],"(",")",";",["T_WHITESPACE","\n            ",802],["T_FOREACH","foreach",803],["T_WHITESPACE"," ",803],"(",["T_VARIABLE","$field",803],["T_WHITESPACE"," ",803],["T_AS","as",803],["T_WHITESPACE"," ",803],["T_VARIABLE","$k",803],["T_WHITESPACE"," ",803],["T_DOUBLE_ARROW","=>",803],["T_WHITESPACE"," ",803],["T_VARIABLE","$v",803],")",["T_WHITESPACE"," ",803],"{",["T_WHITESPACE","\n                ",803],["T_IF","if",804],["T_WHITESPACE"," ",804],"(",["T_ISSET","isset",804],"(",["T_VARIABLE","$attributeFields",804],"[",["T_VARIABLE","$k",804],"]",")",")",["T_WHITESPACE"," ",804],"{",["T_WHITESPACE","\n                    ",804],["T_VARIABLE","$bind",805],"[",["T_VARIABLE","$k",805],"]",["T_WHITESPACE"," ",805],"=",["T_WHITESPACE"," ",805],["T_VARIABLE","$this",805],["T_OBJECT_OPERATOR","->",805],["T_STRING","getConnection",805],"(",")",["T_OBJECT_OPERATOR","->",805],["T_STRING","prepareColumnValue",805],"(",["T_VARIABLE","$attributeFields",805],"[",["T_VARIABLE","$k",805],"]",",",["T_WHITESPACE"," ",805],["T_VARIABLE","$v",805],")",";",["T_WHITESPACE","\n                ",805],"}",["T_WHITESPACE","\n            ",806],"}",["T_WHITESPACE","\n            ",807],["T_IF","if",808],["T_WHITESPACE"," ",808],"(","!",["T_VARIABLE","$bind",808],")",["T_WHITESPACE"," ",808],"{",["T_WHITESPACE","\n                ",808],["T_RETURN","return",809],["T_WHITESPACE"," ",809],["T_VARIABLE","$this",809],";",["T_WHITESPACE","\n            ",809],"}",["T_WHITESPACE","\n            ",810],["T_VARIABLE","$field",811],["T_WHITESPACE"," ",811],"=",["T_WHITESPACE"," ",811],["T_VARIABLE","$bind",811],";",["T_WHITESPACE","\n        ",811],"}",["T_WHITESPACE"," ",812],["T_ELSE","else",812],["T_WHITESPACE"," ",812],"{",["T_WHITESPACE","\n            ",812],["T_IF","if",813],["T_WHITESPACE"," ",813],"(","!",["T_ISSET","isset",813],"(",["T_VARIABLE","$attributeFields",813],"[",["T_VARIABLE","$field",813],"]",")",")",["T_WHITESPACE"," ",813],"{",["T_WHITESPACE","\n                ",813],["T_RETURN","return",814],["T_WHITESPACE"," ",814],["T_VARIABLE","$this",814],";",["T_WHITESPACE","\n            ",814],"}",["T_WHITESPACE","\n        ",815],"}",["T_WHITESPACE","\n\n        ",816],["T_VARIABLE","$this",818],["T_OBJECT_OPERATOR","->",818],["T_STRING","updateTableRow",818],"(",["T_CONSTANT_ENCAPSED_STRING","'eav\/attribute'",818],",",["T_WHITESPACE","\n            ",818],["T_CONSTANT_ENCAPSED_STRING","'attribute_id'",819],",",["T_WHITESPACE"," ",819],["T_VARIABLE","$this",819],["T_OBJECT_OPERATOR","->",819],["T_STRING","getAttributeId",819],"(",["T_VARIABLE","$entityTypeId",819],",",["T_WHITESPACE"," ",819],["T_VARIABLE","$id",819],")",",",["T_WHITESPACE","\n            ",819],["T_VARIABLE","$field",820],",",["T_WHITESPACE"," ",820],["T_VARIABLE","$value",820],",",["T_WHITESPACE","\n            ",820],["T_CONSTANT_ENCAPSED_STRING","'entity_type_id'",821],",",["T_WHITESPACE"," ",821],["T_VARIABLE","$this",821],["T_OBJECT_OPERATOR","->",821],["T_STRING","getEntityTypeId",821],"(",["T_VARIABLE","$entityTypeId",821],")",["T_WHITESPACE","\n        ",821],")",";",["T_WHITESPACE","\n\n        ",822],["T_RETURN","return",824],["T_WHITESPACE"," ",824],["T_VARIABLE","$this",824],";",["T_WHITESPACE","\n    ",824],"}",["T_WHITESPACE","\n\n    ",825],["T_DOC_COMMENT","\/**\n     * Update Attribute Additional data\n     *\n     * @param mixed $entityTypeId\n     * @param mixed $id\n     * @param string $field\n     * @param mixed $value\n     * @return Mage_Eav_Model_Entity_Setup\n     *\/",827],["T_WHITESPACE","\n    ",835],["T_PROTECTED","protected",836],["T_WHITESPACE"," ",836],["T_FUNCTION","function",836],["T_WHITESPACE"," ",836],["T_STRING","_updateAttributeAdditionalData",836],"(",["T_VARIABLE","$entityTypeId",836],",",["T_WHITESPACE"," ",836],["T_VARIABLE","$id",836],",",["T_WHITESPACE"," ",836],["T_VARIABLE","$field",836],",",["T_WHITESPACE"," ",836],["T_VARIABLE","$value",836],["T_WHITESPACE"," ",836],"=",["T_WHITESPACE"," ",836],["T_STRING","null",836],")",["T_WHITESPACE","\n    ",836],"{",["T_WHITESPACE","\n        ",837],["T_VARIABLE","$additionalTable",838],["T_WHITESPACE"," ",838],"=",["T_WHITESPACE"," ",838],["T_VARIABLE","$this",838],["T_OBJECT_OPERATOR","->",838],["T_STRING","getEntityType",838],"(",["T_VARIABLE","$entityTypeId",838],",",["T_WHITESPACE"," ",838],["T_CONSTANT_ENCAPSED_STRING","'additional_attribute_table'",838],")",";",["T_WHITESPACE","\n        ",838],["T_IF","if",839],["T_WHITESPACE"," ",839],"(","!",["T_VARIABLE","$additionalTable",839],")",["T_WHITESPACE"," ",839],"{",["T_WHITESPACE","\n            ",839],["T_RETURN","return",840],["T_WHITESPACE"," ",840],["T_VARIABLE","$this",840],";",["T_WHITESPACE","\n        ",840],"}",["T_WHITESPACE","\n        ",841],["T_VARIABLE","$additionalTableExists",842],["T_WHITESPACE"," ",842],"=",["T_WHITESPACE"," ",842],["T_VARIABLE","$this",842],["T_OBJECT_OPERATOR","->",842],["T_STRING","getConnection",842],"(",")",["T_OBJECT_OPERATOR","->",842],["T_STRING","isTableExists",842],"(",["T_VARIABLE","$this",842],["T_OBJECT_OPERATOR","->",842],["T_STRING","getTable",842],"(",["T_VARIABLE","$additionalTable",842],")",")",";",["T_WHITESPACE","\n        ",842],["T_IF","if",843],["T_WHITESPACE"," ",843],"(",["T_VARIABLE","$additionalTable",843],["T_WHITESPACE"," ",843],["T_BOOLEAN_AND","&&",843],["T_WHITESPACE"," ",843],["T_VARIABLE","$additionalTableExists",843],")",["T_WHITESPACE"," ",843],"{",["T_WHITESPACE","\n            ",843],["T_VARIABLE","$attributeFields",844],["T_WHITESPACE"," ",844],"=",["T_WHITESPACE"," ",844],["T_VARIABLE","$this",844],["T_OBJECT_OPERATOR","->",844],["T_STRING","getConnection",844],"(",")",["T_OBJECT_OPERATOR","->",844],["T_STRING","describeTable",844],"(",["T_VARIABLE","$this",844],["T_OBJECT_OPERATOR","->",844],["T_STRING","getTable",844],"(",["T_VARIABLE","$additionalTable",844],")",")",";",["T_WHITESPACE","\n            ",844],["T_IF","if",845],["T_WHITESPACE"," ",845],"(",["T_STRING","is_array",845],"(",["T_VARIABLE","$field",845],")",")",["T_WHITESPACE"," ",845],"{",["T_WHITESPACE","\n                ",845],["T_VARIABLE","$bind",846],["T_WHITESPACE"," ",846],"=",["T_WHITESPACE"," ",846],["T_ARRAY","array",846],"(",")",";",["T_WHITESPACE","\n                ",846],["T_FOREACH","foreach",847],["T_WHITESPACE"," ",847],"(",["T_VARIABLE","$field",847],["T_WHITESPACE"," ",847],["T_AS","as",847],["T_WHITESPACE"," ",847],["T_VARIABLE","$k",847],["T_WHITESPACE"," ",847],["T_DOUBLE_ARROW","=>",847],["T_WHITESPACE"," ",847],["T_VARIABLE","$v",847],")",["T_WHITESPACE"," ",847],"{",["T_WHITESPACE","\n                    ",847],["T_IF","if",848],["T_WHITESPACE"," ",848],"(",["T_ISSET","isset",848],"(",["T_VARIABLE","$attributeFields",848],"[",["T_VARIABLE","$k",848],"]",")",")",["T_WHITESPACE"," ",848],"{",["T_WHITESPACE","\n                        ",848],["T_VARIABLE","$bind",849],"[",["T_VARIABLE","$k",849],"]",["T_WHITESPACE"," ",849],"=",["T_WHITESPACE"," ",849],["T_VARIABLE","$this",849],["T_OBJECT_OPERATOR","->",849],["T_STRING","getConnection",849],"(",")",["T_OBJECT_OPERATOR","->",849],["T_STRING","prepareColumnValue",849],"(",["T_VARIABLE","$attributeFields",849],"[",["T_VARIABLE","$k",849],"]",",",["T_WHITESPACE"," ",849],["T_VARIABLE","$v",849],")",";",["T_WHITESPACE","\n                    ",849],"}",["T_WHITESPACE","\n                ",850],"}",["T_WHITESPACE","\n                ",851],["T_IF","if",852],["T_WHITESPACE"," ",852],"(","!",["T_VARIABLE","$bind",852],")",["T_WHITESPACE"," ",852],"{",["T_WHITESPACE","\n                    ",852],["T_RETURN","return",853],["T_WHITESPACE"," ",853],["T_VARIABLE","$this",853],";",["T_WHITESPACE","\n                ",853],"}",["T_WHITESPACE","\n                ",854],["T_VARIABLE","$field",855],["T_WHITESPACE"," ",855],"=",["T_WHITESPACE"," ",855],["T_VARIABLE","$bind",855],";",["T_WHITESPACE","\n            ",855],"}",["T_WHITESPACE"," ",856],["T_ELSE","else",856],["T_WHITESPACE"," ",856],"{",["T_WHITESPACE","\n                ",856],["T_IF","if",857],["T_WHITESPACE"," ",857],"(","!",["T_ISSET","isset",857],"(",["T_VARIABLE","$attributeFields",857],"[",["T_VARIABLE","$field",857],"]",")",")",["T_WHITESPACE"," ",857],"{",["T_WHITESPACE","\n                    ",857],["T_RETURN","return",858],["T_WHITESPACE"," ",858],["T_VARIABLE","$this",858],";",["T_WHITESPACE","\n                ",858],"}",["T_WHITESPACE","\n            ",859],"}",["T_WHITESPACE","\n            ",860],["T_VARIABLE","$this",861],["T_OBJECT_OPERATOR","->",861],["T_STRING","updateTableRow",861],"(",["T_VARIABLE","$this",861],["T_OBJECT_OPERATOR","->",861],["T_STRING","getTable",861],"(",["T_VARIABLE","$additionalTable",861],")",",",["T_WHITESPACE","\n                ",861],["T_CONSTANT_ENCAPSED_STRING","'attribute_id'",862],",",["T_WHITESPACE"," ",862],["T_VARIABLE","$this",862],["T_OBJECT_OPERATOR","->",862],["T_STRING","getAttributeId",862],"(",["T_VARIABLE","$entityTypeId",862],",",["T_WHITESPACE"," ",862],["T_VARIABLE","$id",862],")",",",["T_WHITESPACE","\n                ",862],["T_VARIABLE","$field",863],",",["T_WHITESPACE"," ",863],["T_VARIABLE","$value",863],["T_WHITESPACE","\n            ",863],")",";",["T_WHITESPACE","\n        ",864],"}",["T_WHITESPACE","\n\n        ",865],["T_RETURN","return",867],["T_WHITESPACE"," ",867],["T_VARIABLE","$this",867],";",["T_WHITESPACE","\n    ",867],"}",["T_WHITESPACE","\n\n    ",868],["T_DOC_COMMENT","\/**\n     * Retrieve Attribute Data By Id or Code\n     *\n     * @param mixed $entityTypeId\n     * @param mixed $id\n     * @param string $field\n     * @return mixed\n     *\/",870],["T_WHITESPACE","\n    ",877],["T_PUBLIC","public",878],["T_WHITESPACE"," ",878],["T_FUNCTION","function",878],["T_WHITESPACE"," ",878],["T_STRING","getAttribute",878],"(",["T_VARIABLE","$entityTypeId",878],",",["T_WHITESPACE"," ",878],["T_VARIABLE","$id",878],",",["T_WHITESPACE"," ",878],["T_VARIABLE","$field",878],["T_WHITESPACE"," ",878],"=",["T_WHITESPACE"," ",878],["T_STRING","null",878],")",["T_WHITESPACE","\n    ",878],"{",["T_WHITESPACE","\n        ",879],["T_VARIABLE","$additionalTable",880],["T_WHITESPACE","    ",880],"=",["T_WHITESPACE"," ",880],["T_VARIABLE","$this",880],["T_OBJECT_OPERATOR","->",880],["T_STRING","getEntityType",880],"(",["T_VARIABLE","$entityTypeId",880],",",["T_WHITESPACE"," ",880],["T_CONSTANT_ENCAPSED_STRING","'additional_attribute_table'",880],")",";",["T_WHITESPACE","\n        ",880],["T_VARIABLE","$entityTypeId",881],["T_WHITESPACE","       ",881],"=",["T_WHITESPACE"," ",881],["T_VARIABLE","$this",881],["T_OBJECT_OPERATOR","->",881],["T_STRING","getEntityTypeId",881],"(",["T_VARIABLE","$entityTypeId",881],")",";",["T_WHITESPACE","\n        ",881],["T_VARIABLE","$idField",882],["T_WHITESPACE","            ",882],"=",["T_WHITESPACE"," ",882],["T_STRING","is_numeric",882],"(",["T_VARIABLE","$id",882],")",["T_WHITESPACE"," ",882],"?",["T_WHITESPACE"," ",882],["T_CONSTANT_ENCAPSED_STRING","'attribute_id'",882],["T_WHITESPACE"," ",882],":",["T_WHITESPACE"," ",882],["T_CONSTANT_ENCAPSED_STRING","'attribute_code'",882],";",["T_WHITESPACE","\n        ",882],["T_IF","if",883],["T_WHITESPACE"," ",883],"(","!",["T_VARIABLE","$additionalTable",883],")",["T_WHITESPACE"," ",883],"{",["T_WHITESPACE","\n            ",883],["T_RETURN","return",884],["T_WHITESPACE"," ",884],["T_VARIABLE","$this",884],["T_OBJECT_OPERATOR","->",884],["T_STRING","getTableRow",884],"(",["T_CONSTANT_ENCAPSED_STRING","'eav\/attribute'",884],",",["T_WHITESPACE"," ",884],["T_VARIABLE","$idField",884],",",["T_WHITESPACE"," ",884],["T_VARIABLE","$id",884],",",["T_WHITESPACE"," ",884],["T_VARIABLE","$field",884],",",["T_WHITESPACE"," ",884],["T_CONSTANT_ENCAPSED_STRING","'entity_type_id'",884],",",["T_WHITESPACE"," ",884],["T_VARIABLE","$entityTypeId",884],")",";",["T_WHITESPACE","\n        ",884],"}",["T_WHITESPACE","\n\n        ",885],["T_VARIABLE","$mainTable",887],["T_WHITESPACE","          ",887],"=",["T_WHITESPACE"," ",887],["T_VARIABLE","$this",887],["T_OBJECT_OPERATOR","->",887],["T_STRING","getTable",887],"(",["T_CONSTANT_ENCAPSED_STRING","'eav\/attribute'",887],")",";",["T_WHITESPACE","\n        ",887],["T_IF","if",888],["T_WHITESPACE"," ",888],"(",["T_EMPTY","empty",888],"(",["T_VARIABLE","$this",888],["T_OBJECT_OPERATOR","->",888],["T_STRING","_setupCache",888],"[",["T_VARIABLE","$mainTable",888],"]","[",["T_VARIABLE","$entityTypeId",888],"]","[",["T_VARIABLE","$id",888],"]",")",")",["T_WHITESPACE"," ",888],"{",["T_WHITESPACE","\n            ",888],["T_VARIABLE","$additionalTable",889],["T_WHITESPACE"," ",889],"=",["T_WHITESPACE"," ",889],["T_VARIABLE","$this",889],["T_OBJECT_OPERATOR","->",889],["T_STRING","getTable",889],"(",["T_VARIABLE","$additionalTable",889],")",";",["T_WHITESPACE","\n            ",889],["T_VARIABLE","$bind",890],["T_WHITESPACE"," ",890],"=",["T_WHITESPACE"," ",890],["T_ARRAY","array",890],"(",["T_WHITESPACE","\n                ",890],["T_CONSTANT_ENCAPSED_STRING","'id'",891],["T_WHITESPACE","                ",891],["T_DOUBLE_ARROW","=>",891],["T_WHITESPACE"," ",891],["T_VARIABLE","$id",891],",",["T_WHITESPACE","\n                ",891],["T_CONSTANT_ENCAPSED_STRING","'entity_type_id'",892],["T_WHITESPACE","    ",892],["T_DOUBLE_ARROW","=>",892],["T_WHITESPACE"," ",892],["T_VARIABLE","$entityTypeId",892],["T_WHITESPACE","\n            ",892],")",";",["T_WHITESPACE","\n            ",893],["T_VARIABLE","$select",894],["T_WHITESPACE"," ",894],"=",["T_WHITESPACE"," ",894],["T_VARIABLE","$this",894],["T_OBJECT_OPERATOR","->",894],["T_STRING","_conn",894],["T_OBJECT_OPERATOR","->",894],["T_STRING","select",894],"(",")",["T_WHITESPACE","\n                ",894],["T_OBJECT_OPERATOR","->",895],["T_STRING","from",895],"(",["T_ARRAY","array",895],"(",["T_CONSTANT_ENCAPSED_STRING","'main'",895],["T_WHITESPACE"," ",895],["T_DOUBLE_ARROW","=>",895],["T_WHITESPACE"," ",895],["T_VARIABLE","$mainTable",895],")",")",["T_WHITESPACE","\n                ",895],["T_OBJECT_OPERATOR","->",896],["T_STRING","join",896],"(",["T_WHITESPACE","\n                    ",896],["T_ARRAY","array",897],"(",["T_CONSTANT_ENCAPSED_STRING","'additional'",897],["T_WHITESPACE"," ",897],["T_DOUBLE_ARROW","=>",897],["T_WHITESPACE"," ",897],["T_VARIABLE","$additionalTable",897],")",",",["T_WHITESPACE","\n                    ",897],["T_CONSTANT_ENCAPSED_STRING","'main.attribute_id = additional.attribute_id'",898],")",["T_WHITESPACE","\n                ",898],["T_OBJECT_OPERATOR","->",899],["T_STRING","where",899],"(","\"",["T_ENCAPSED_AND_WHITESPACE","main.",899],["T_CURLY_OPEN","{",899],["T_VARIABLE","$idField",899],"}",["T_ENCAPSED_AND_WHITESPACE"," = :id",899],"\"",")",["T_WHITESPACE","\n                ",899],["T_OBJECT_OPERATOR","->",900],["T_STRING","where",900],"(",["T_CONSTANT_ENCAPSED_STRING","'main.entity_type_id = :entity_type_id'",900],")",";",["T_WHITESPACE","\n\n            ",900],["T_VARIABLE","$row",902],["T_WHITESPACE"," ",902],"=",["T_WHITESPACE"," ",902],["T_VARIABLE","$this",902],["T_OBJECT_OPERATOR","->",902],["T_STRING","_conn",902],["T_OBJECT_OPERATOR","->",902],["T_STRING","fetchRow",902],"(",["T_VARIABLE","$select",902],",",["T_WHITESPACE"," ",902],["T_VARIABLE","$bind",902],")",";",["T_WHITESPACE","\n            ",902],["T_IF","if",903],["T_WHITESPACE"," ",903],"(","!",["T_VARIABLE","$row",903],")",["T_WHITESPACE"," ",903],"{",["T_WHITESPACE","\n                ",903],["T_VARIABLE","$this",904],["T_OBJECT_OPERATOR","->",904],["T_STRING","_setupCache",904],"[",["T_VARIABLE","$mainTable",904],"]","[",["T_VARIABLE","$entityTypeId",904],"]","[",["T_VARIABLE","$id",904],"]",["T_WHITESPACE"," ",904],"=",["T_WHITESPACE"," ",904],["T_STRING","false",904],";",["T_WHITESPACE","\n            ",904],"}",["T_WHITESPACE"," ",905],["T_ELSE","else",905],["T_WHITESPACE"," ",905],"{",["T_WHITESPACE","\n                ",905],["T_VARIABLE","$this",906],["T_OBJECT_OPERATOR","->",906],["T_STRING","_setupCache",906],"[",["T_VARIABLE","$mainTable",906],"]","[",["T_VARIABLE","$entityTypeId",906],"]","[",["T_VARIABLE","$row",906],"[",["T_CONSTANT_ENCAPSED_STRING","'attribute_id'",906],"]","]",["T_WHITESPACE"," ",906],"=",["T_WHITESPACE"," ",906],["T_VARIABLE","$row",906],";",["T_WHITESPACE","\n                ",906],["T_VARIABLE","$this",907],["T_OBJECT_OPERATOR","->",907],["T_STRING","_setupCache",907],"[",["T_VARIABLE","$mainTable",907],"]","[",["T_VARIABLE","$entityTypeId",907],"]","[",["T_VARIABLE","$row",907],"[",["T_CONSTANT_ENCAPSED_STRING","'attribute_code'",907],"]","]",["T_WHITESPACE"," ",907],"=",["T_WHITESPACE"," ",907],["T_VARIABLE","$row",907],";",["T_WHITESPACE","\n            ",907],"}",["T_WHITESPACE","\n        ",908],"}",["T_WHITESPACE","\n\n        ",909],["T_VARIABLE","$row",911],["T_WHITESPACE"," ",911],"=",["T_WHITESPACE"," ",911],["T_VARIABLE","$this",911],["T_OBJECT_OPERATOR","->",911],["T_STRING","_setupCache",911],"[",["T_VARIABLE","$mainTable",911],"]","[",["T_VARIABLE","$entityTypeId",911],"]","[",["T_VARIABLE","$id",911],"]",";",["T_WHITESPACE","\n        ",911],["T_IF","if",912],["T_WHITESPACE"," ",912],"(",["T_VARIABLE","$field",912],["T_WHITESPACE"," ",912],["T_IS_NOT_IDENTICAL","!==",912],["T_WHITESPACE"," ",912],["T_STRING","null",912],")",["T_WHITESPACE"," ",912],"{",["T_WHITESPACE","\n            ",912],["T_RETURN","return",913],["T_WHITESPACE"," ",913],["T_ISSET","isset",913],"(",["T_VARIABLE","$row",913],"[",["T_VARIABLE","$field",913],"]",")",["T_WHITESPACE"," ",913],"?",["T_WHITESPACE"," ",913],["T_VARIABLE","$row",913],"[",["T_VARIABLE","$field",913],"]",["T_WHITESPACE"," ",913],":",["T_WHITESPACE"," ",913],["T_STRING","false",913],";",["T_WHITESPACE","\n        ",913],"}",["T_WHITESPACE","\n\n        ",914],["T_RETURN","return",916],["T_WHITESPACE"," ",916],["T_VARIABLE","$row",916],";",["T_WHITESPACE","\n    ",916],"}",["T_WHITESPACE","\n\n    ",917],["T_DOC_COMMENT","\/**\n     * Retrieve Attribute Id Data By Id or Code\n     *\n     * @param mixed $entityTypeId\n     * @param mixed $id\n     * @return int\n     *\/",919],["T_WHITESPACE","\n    ",925],["T_PUBLIC","public",926],["T_WHITESPACE"," ",926],["T_FUNCTION","function",926],["T_WHITESPACE"," ",926],["T_STRING","getAttributeId",926],"(",["T_VARIABLE","$entityTypeId",926],",",["T_WHITESPACE"," ",926],["T_VARIABLE","$id",926],")",["T_WHITESPACE","\n    ",926],"{",["T_WHITESPACE","\n        ",927],["T_IF","if",928],["T_WHITESPACE"," ",928],"(","!",["T_STRING","is_numeric",928],"(",["T_VARIABLE","$id",928],")",")",["T_WHITESPACE"," ",928],"{",["T_WHITESPACE","\n            ",928],["T_VARIABLE","$id",929],["T_WHITESPACE"," ",929],"=",["T_WHITESPACE"," ",929],["T_VARIABLE","$this",929],["T_OBJECT_OPERATOR","->",929],["T_STRING","getAttribute",929],"(",["T_VARIABLE","$entityTypeId",929],",",["T_WHITESPACE"," ",929],["T_VARIABLE","$id",929],",",["T_WHITESPACE"," ",929],["T_CONSTANT_ENCAPSED_STRING","'attribute_id'",929],")",";",["T_WHITESPACE","\n        ",929],"}",["T_WHITESPACE","\n        ",930],["T_IF","if",931],["T_WHITESPACE"," ",931],"(","!",["T_STRING","is_numeric",931],"(",["T_VARIABLE","$id",931],")",")",["T_WHITESPACE"," ",931],"{",["T_WHITESPACE","\n            ",931],["T_RETURN","return",932],["T_WHITESPACE"," ",932],["T_STRING","false",932],";",["T_WHITESPACE","\n        ",932],"}",["T_WHITESPACE","\n        ",933],["T_RETURN","return",934],["T_WHITESPACE"," ",934],["T_VARIABLE","$id",934],";",["T_WHITESPACE","\n    ",934],"}",["T_WHITESPACE","\n\n    ",935],["T_DOC_COMMENT","\/**\n     * Return table name for eav attribute\n     *\n     * @param int|string $entityTypeId Entity Type id or Entity Type code\n     * @param int|string $id Attribute id or Attribute code\n     * @return string\n     *\/",937],["T_WHITESPACE","\n    ",943],["T_PUBLIC","public",944],["T_WHITESPACE"," ",944],["T_FUNCTION","function",944],["T_WHITESPACE"," ",944],["T_STRING","getAttributeTable",944],"(",["T_VARIABLE","$entityTypeId",944],",",["T_WHITESPACE"," ",944],["T_VARIABLE","$id",944],")",["T_WHITESPACE","\n    ",944],"{",["T_WHITESPACE","\n        ",945],["T_VARIABLE","$entityKeyName",946],["T_WHITESPACE","    ",946],"=",["T_WHITESPACE"," ",946],["T_STRING","is_numeric",946],"(",["T_VARIABLE","$entityTypeId",946],")",["T_WHITESPACE"," ",946],"?",["T_WHITESPACE"," ",946],["T_CONSTANT_ENCAPSED_STRING","'entity_type_id'",946],["T_WHITESPACE"," ",946],":",["T_WHITESPACE"," ",946],["T_CONSTANT_ENCAPSED_STRING","'entity_type_code'",946],";",["T_WHITESPACE","\n        ",946],["T_VARIABLE","$attributeKeyName",947],["T_WHITESPACE"," ",947],"=",["T_WHITESPACE"," ",947],["T_STRING","is_numeric",947],"(",["T_VARIABLE","$id",947],")",["T_WHITESPACE"," ",947],"?",["T_WHITESPACE"," ",947],["T_CONSTANT_ENCAPSED_STRING","'attribute_id'",947],["T_WHITESPACE"," ",947],":",["T_WHITESPACE"," ",947],["T_CONSTANT_ENCAPSED_STRING","'attribute_code'",947],";",["T_WHITESPACE","\n\n        ",947],["T_VARIABLE","$bind",949],["T_WHITESPACE"," ",949],"=",["T_WHITESPACE"," ",949],["T_ARRAY","array",949],"(",["T_WHITESPACE","\n            ",949],["T_CONSTANT_ENCAPSED_STRING","'id'",950],["T_WHITESPACE","                ",950],["T_DOUBLE_ARROW","=>",950],["T_WHITESPACE"," ",950],["T_VARIABLE","$id",950],",",["T_WHITESPACE","\n            ",950],["T_CONSTANT_ENCAPSED_STRING","'entity_type_id'",951],["T_WHITESPACE","    ",951],["T_DOUBLE_ARROW","=>",951],["T_WHITESPACE"," ",951],["T_VARIABLE","$entityTypeId",951],["T_WHITESPACE","\n        ",951],")",";",["T_WHITESPACE","\n        ",952],["T_VARIABLE","$select",953],["T_WHITESPACE"," ",953],"=",["T_WHITESPACE"," ",953],["T_VARIABLE","$this",953],["T_OBJECT_OPERATOR","->",953],["T_STRING","getConnection",953],"(",")",["T_OBJECT_OPERATOR","->",953],["T_STRING","select",953],"(",")",["T_WHITESPACE","\n            ",953],["T_OBJECT_OPERATOR","->",954],["T_STRING","from",954],"(",["T_WHITESPACE","\n                ",954],["T_ARRAY","array",955],"(",["T_CONSTANT_ENCAPSED_STRING","'entity_type'",955],["T_WHITESPACE"," ",955],["T_DOUBLE_ARROW","=>",955],["T_WHITESPACE"," ",955],["T_VARIABLE","$this",955],["T_OBJECT_OPERATOR","->",955],["T_STRING","getTable",955],"(",["T_CONSTANT_ENCAPSED_STRING","'eav\/entity_type'",955],")",")",",",["T_WHITESPACE","\n                ",955],["T_ARRAY","array",956],"(",["T_CONSTANT_ENCAPSED_STRING","'entity_table'",956],")",")",["T_WHITESPACE","\n            ",956],["T_OBJECT_OPERATOR","->",957],["T_STRING","join",957],"(",["T_WHITESPACE","\n                ",957],["T_ARRAY","array",958],"(",["T_CONSTANT_ENCAPSED_STRING","'attribute'",958],["T_WHITESPACE"," ",958],["T_DOUBLE_ARROW","=>",958],["T_WHITESPACE"," ",958],["T_VARIABLE","$this",958],["T_OBJECT_OPERATOR","->",958],["T_STRING","getTable",958],"(",["T_CONSTANT_ENCAPSED_STRING","'eav\/attribute'",958],")",")",",",["T_WHITESPACE","\n                ",958],["T_CONSTANT_ENCAPSED_STRING","'attribute.entity_type_id = entity_type.entity_type_id'",959],",",["T_WHITESPACE","\n                ",959],["T_ARRAY","array",960],"(",["T_CONSTANT_ENCAPSED_STRING","'backend_type'",960],")",")",["T_WHITESPACE","\n            ",960],["T_OBJECT_OPERATOR","->",961],["T_STRING","where",961],"(","\"",["T_ENCAPSED_AND_WHITESPACE","entity_type.",961],["T_CURLY_OPEN","{",961],["T_VARIABLE","$entityKeyName",961],"}",["T_ENCAPSED_AND_WHITESPACE"," = :entity_type_id",961],"\"",")",["T_WHITESPACE","\n            ",961],["T_OBJECT_OPERATOR","->",962],["T_STRING","where",962],"(","\"",["T_ENCAPSED_AND_WHITESPACE","attribute.",962],["T_CURLY_OPEN","{",962],["T_VARIABLE","$attributeKeyName",962],"}",["T_ENCAPSED_AND_WHITESPACE"," = :id",962],"\"",")",["T_WHITESPACE","\n            ",962],["T_OBJECT_OPERATOR","->",963],["T_STRING","limit",963],"(",["T_LNUMBER","1",963],")",";",["T_WHITESPACE","\n\n        ",963],["T_VARIABLE","$result",965],["T_WHITESPACE"," ",965],"=",["T_WHITESPACE"," ",965],["T_VARIABLE","$this",965],["T_OBJECT_OPERATOR","->",965],["T_STRING","getConnection",965],"(",")",["T_OBJECT_OPERATOR","->",965],["T_STRING","fetchRow",965],"(",["T_VARIABLE","$select",965],",",["T_WHITESPACE"," ",965],["T_VARIABLE","$bind",965],")",";",["T_WHITESPACE","\n        ",965],["T_IF","if",966],["T_WHITESPACE"," ",966],"(",["T_VARIABLE","$result",966],")",["T_WHITESPACE"," ",966],"{",["T_WHITESPACE","\n            ",966],["T_VARIABLE","$table",967],["T_WHITESPACE"," ",967],"=",["T_WHITESPACE"," ",967],["T_VARIABLE","$this",967],["T_OBJECT_OPERATOR","->",967],["T_STRING","getTable",967],"(",["T_VARIABLE","$result",967],"[",["T_CONSTANT_ENCAPSED_STRING","'entity_table'",967],"]",")",";",["T_WHITESPACE","\n            ",967],["T_IF","if",968],["T_WHITESPACE"," ",968],"(",["T_VARIABLE","$result",968],"[",["T_CONSTANT_ENCAPSED_STRING","'backend_type'",968],"]",["T_WHITESPACE"," ",968],["T_IS_NOT_EQUAL","!=",968],["T_WHITESPACE"," ",968],["T_CONSTANT_ENCAPSED_STRING","'static'",968],")",["T_WHITESPACE"," ",968],"{",["T_WHITESPACE","\n                ",968],["T_VARIABLE","$table",969],["T_WHITESPACE"," ",969],["T_CONCAT_EQUAL",".=",969],["T_WHITESPACE"," ",969],["T_CONSTANT_ENCAPSED_STRING","'_'",969],["T_WHITESPACE"," ",969],".",["T_WHITESPACE"," ",969],["T_VARIABLE","$result",969],"[",["T_CONSTANT_ENCAPSED_STRING","'backend_type'",969],"]",";",["T_WHITESPACE","\n            ",969],"}",["T_WHITESPACE","\n            ",970],["T_RETURN","return",971],["T_WHITESPACE"," ",971],["T_VARIABLE","$table",971],";",["T_WHITESPACE","\n        ",971],"}",["T_WHITESPACE","\n\n        ",972],["T_RETURN","return",974],["T_WHITESPACE"," ",974],["T_STRING","false",974],";",["T_WHITESPACE","\n    ",974],"}",["T_WHITESPACE","\n\n    ",975],["T_DOC_COMMENT","\/**\n     * Remove Attribute\n     *\n     * @param mixed $entityTypeId\n     * @param mixed $code\n     * @return Mage_Eav_Model_Entity_Setup\n     *\/",977],["T_WHITESPACE","\n    ",983],["T_PUBLIC","public",984],["T_WHITESPACE"," ",984],["T_FUNCTION","function",984],["T_WHITESPACE"," ",984],["T_STRING","removeAttribute",984],"(",["T_VARIABLE","$entityTypeId",984],",",["T_WHITESPACE"," ",984],["T_VARIABLE","$code",984],")",["T_WHITESPACE","\n    ",984],"{",["T_WHITESPACE","\n        ",985],["T_VARIABLE","$mainTable",986],["T_WHITESPACE","  ",986],"=",["T_WHITESPACE"," ",986],["T_VARIABLE","$this",986],["T_OBJECT_OPERATOR","->",986],["T_STRING","getTable",986],"(",["T_CONSTANT_ENCAPSED_STRING","'eav\/attribute'",986],")",";",["T_WHITESPACE","\n        ",986],["T_VARIABLE","$attribute",987],["T_WHITESPACE","  ",987],"=",["T_WHITESPACE"," ",987],["T_VARIABLE","$this",987],["T_OBJECT_OPERATOR","->",987],["T_STRING","getAttribute",987],"(",["T_VARIABLE","$entityTypeId",987],",",["T_WHITESPACE"," ",987],["T_VARIABLE","$code",987],")",";",["T_WHITESPACE","\n        ",987],["T_IF","if",988],["T_WHITESPACE"," ",988],"(",["T_VARIABLE","$attribute",988],")",["T_WHITESPACE"," ",988],"{",["T_WHITESPACE","\n            ",988],["T_VARIABLE","$this",989],["T_OBJECT_OPERATOR","->",989],["T_STRING","deleteTableRow",989],"(",["T_CONSTANT_ENCAPSED_STRING","'eav\/attribute'",989],",",["T_WHITESPACE"," ",989],["T_CONSTANT_ENCAPSED_STRING","'attribute_id'",989],",",["T_WHITESPACE"," ",989],["T_VARIABLE","$attribute",989],"[",["T_CONSTANT_ENCAPSED_STRING","'attribute_id'",989],"]",")",";",["T_WHITESPACE","\n            ",989],["T_IF","if",990],["T_WHITESPACE"," ",990],"(",["T_ISSET","isset",990],"(",["T_VARIABLE","$this",990],["T_OBJECT_OPERATOR","->",990],["T_STRING","_setupCache",990],"[",["T_VARIABLE","$mainTable",990],"]","[",["T_VARIABLE","$attribute",990],"[",["T_CONSTANT_ENCAPSED_STRING","'entity_type_id'",990],"]","]","[",["T_VARIABLE","$attribute",990],"[",["T_CONSTANT_ENCAPSED_STRING","'attribute_code'",990],"]","]",")",")",["T_WHITESPACE"," ",990],"{",["T_WHITESPACE","\n                ",990],["T_UNSET","unset",991],"(",["T_VARIABLE","$this",991],["T_OBJECT_OPERATOR","->",991],["T_STRING","_setupCache",991],"[",["T_VARIABLE","$mainTable",991],"]","[",["T_VARIABLE","$attribute",991],"[",["T_CONSTANT_ENCAPSED_STRING","'entity_type_id'",991],"]","]","[",["T_VARIABLE","$attribute",991],"[",["T_CONSTANT_ENCAPSED_STRING","'attribute_code'",991],"]","]",")",";",["T_WHITESPACE","\n            ",991],"}",["T_WHITESPACE","\n        ",992],"}",["T_WHITESPACE","\n        ",993],["T_RETURN","return",994],["T_WHITESPACE"," ",994],["T_VARIABLE","$this",994],";",["T_WHITESPACE","\n    ",994],"}",["T_WHITESPACE","\n\n    ",995],["T_DOC_COMMENT","\/**\n     * Retrieve Attribute Sort Order\n     *\n     * @param mixed $entityTypeId\n     * @param mixed $setId\n     * @param mixed $groupId\n     * @param int $sortOrder\n     * @return Mage_Eav_Model_Entity_Setup\n     *\/",997],["T_WHITESPACE","\n    ",1005],["T_PUBLIC","public",1006],["T_WHITESPACE"," ",1006],["T_FUNCTION","function",1006],["T_WHITESPACE"," ",1006],["T_STRING","getAttributeSortOrder",1006],"(",["T_VARIABLE","$entityTypeId",1006],",",["T_WHITESPACE"," ",1006],["T_VARIABLE","$setId",1006],",",["T_WHITESPACE"," ",1006],["T_VARIABLE","$groupId",1006],",",["T_WHITESPACE"," ",1006],["T_VARIABLE","$sortOrder",1006],["T_WHITESPACE"," ",1006],"=",["T_WHITESPACE"," ",1006],["T_STRING","null",1006],")",["T_WHITESPACE","\n    ",1006],"{",["T_WHITESPACE","\n        ",1007],["T_IF","if",1008],["T_WHITESPACE"," ",1008],"(","!",["T_STRING","is_numeric",1008],"(",["T_VARIABLE","$sortOrder",1008],")",")",["T_WHITESPACE"," ",1008],"{",["T_WHITESPACE","\n            ",1008],["T_VARIABLE","$bind",1009],["T_WHITESPACE"," ",1009],"=",["T_WHITESPACE"," ",1009],["T_ARRAY","array",1009],"(",["T_CONSTANT_ENCAPSED_STRING","'attribute_group_id'",1009],["T_WHITESPACE"," ",1009],["T_DOUBLE_ARROW","=>",1009],["T_WHITESPACE"," ",1009],["T_VARIABLE","$this",1009],["T_OBJECT_OPERATOR","->",1009],["T_STRING","getAttributeGroupId",1009],"(",["T_VARIABLE","$entityTypeId",1009],",",["T_WHITESPACE"," ",1009],["T_VARIABLE","$setId",1009],",",["T_WHITESPACE"," ",1009],["T_VARIABLE","$groupId",1009],")",")",";",["T_WHITESPACE","\n            ",1009],["T_VARIABLE","$select",1010],["T_WHITESPACE"," ",1010],"=",["T_WHITESPACE"," ",1010],["T_VARIABLE","$this",1010],["T_OBJECT_OPERATOR","->",1010],["T_STRING","_conn",1010],["T_OBJECT_OPERATOR","->",1010],["T_STRING","select",1010],"(",")",["T_WHITESPACE","\n                ",1010],["T_OBJECT_OPERATOR","->",1011],["T_STRING","from",1011],"(",["T_VARIABLE","$this",1011],["T_OBJECT_OPERATOR","->",1011],["T_STRING","getTable",1011],"(",["T_CONSTANT_ENCAPSED_STRING","'eav\/entity_attribute'",1011],")",",",["T_WHITESPACE"," ",1011],["T_CONSTANT_ENCAPSED_STRING","'MAX(sort_order)'",1011],")",["T_WHITESPACE","\n                ",1011],["T_OBJECT_OPERATOR","->",1012],["T_STRING","where",1012],"(",["T_CONSTANT_ENCAPSED_STRING","'attribute_group_id = :attribute_group_id'",1012],")",";",["T_WHITESPACE","\n\n            ",1012],["T_VARIABLE","$sortOrder",1014],["T_WHITESPACE"," ",1014],"=",["T_WHITESPACE"," ",1014],["T_VARIABLE","$this",1014],["T_OBJECT_OPERATOR","->",1014],["T_STRING","_conn",1014],["T_OBJECT_OPERATOR","->",1014],["T_STRING","fetchOne",1014],"(",["T_VARIABLE","$select",1014],",",["T_WHITESPACE"," ",1014],["T_VARIABLE","$bind",1014],")",["T_WHITESPACE"," ",1014],"+",["T_WHITESPACE"," ",1014],["T_LNUMBER","1",1014],";",["T_WHITESPACE","\n        ",1014],"}",["T_WHITESPACE","\n\n        ",1015],["T_RETURN","return",1017],["T_WHITESPACE"," ",1017],["T_VARIABLE","$sortOrder",1017],";",["T_WHITESPACE","\n    ",1017],"}",["T_WHITESPACE","\n\n    ",1018],["T_DOC_COMMENT","\/**\n     * Add Attribute to All Groups on Attribute Set\n     *\n     * @param mixed $entityTypeId\n     * @param mixed $setId\n     * @param mixed $groupId\n     * @param mixed $attributeId\n     * @param int $sortOrder\n     * @return Mage_Eav_Model_Entity_Setup\n     *\/",1020],["T_WHITESPACE","\n    ",1029],["T_PUBLIC","public",1030],["T_WHITESPACE"," ",1030],["T_FUNCTION","function",1030],["T_WHITESPACE"," ",1030],["T_STRING","addAttributeToSet",1030],"(",["T_VARIABLE","$entityTypeId",1030],",",["T_WHITESPACE"," ",1030],["T_VARIABLE","$setId",1030],",",["T_WHITESPACE"," ",1030],["T_VARIABLE","$groupId",1030],",",["T_WHITESPACE"," ",1030],["T_VARIABLE","$attributeId",1030],",",["T_WHITESPACE"," ",1030],["T_VARIABLE","$sortOrder",1030],"=",["T_STRING","null",1030],")",["T_WHITESPACE","\n    ",1030],"{",["T_WHITESPACE","\n        ",1031],["T_VARIABLE","$entityTypeId",1032],["T_WHITESPACE","   ",1032],"=",["T_WHITESPACE"," ",1032],["T_VARIABLE","$this",1032],["T_OBJECT_OPERATOR","->",1032],["T_STRING","getEntityTypeId",1032],"(",["T_VARIABLE","$entityTypeId",1032],")",";",["T_WHITESPACE","\n        ",1032],["T_VARIABLE","$setId",1033],["T_WHITESPACE","          ",1033],"=",["T_WHITESPACE"," ",1033],["T_VARIABLE","$this",1033],["T_OBJECT_OPERATOR","->",1033],["T_STRING","getAttributeSetId",1033],"(",["T_VARIABLE","$entityTypeId",1033],",",["T_WHITESPACE"," ",1033],["T_VARIABLE","$setId",1033],")",";",["T_WHITESPACE","\n        ",1033],["T_VARIABLE","$groupId",1034],["T_WHITESPACE","        ",1034],"=",["T_WHITESPACE"," ",1034],["T_VARIABLE","$this",1034],["T_OBJECT_OPERATOR","->",1034],["T_STRING","getAttributeGroupId",1034],"(",["T_VARIABLE","$entityTypeId",1034],",",["T_WHITESPACE"," ",1034],["T_VARIABLE","$setId",1034],",",["T_WHITESPACE"," ",1034],["T_VARIABLE","$groupId",1034],")",";",["T_WHITESPACE","\n        ",1034],["T_VARIABLE","$attributeId",1035],["T_WHITESPACE","    ",1035],"=",["T_WHITESPACE"," ",1035],["T_VARIABLE","$this",1035],["T_OBJECT_OPERATOR","->",1035],["T_STRING","getAttributeId",1035],"(",["T_VARIABLE","$entityTypeId",1035],",",["T_WHITESPACE"," ",1035],["T_VARIABLE","$attributeId",1035],")",";",["T_WHITESPACE","\n        ",1035],["T_VARIABLE","$table",1036],["T_WHITESPACE","          ",1036],"=",["T_WHITESPACE"," ",1036],["T_VARIABLE","$this",1036],["T_OBJECT_OPERATOR","->",1036],["T_STRING","getTable",1036],"(",["T_CONSTANT_ENCAPSED_STRING","'eav\/entity_attribute'",1036],")",";",["T_WHITESPACE","\n\n        ",1036],["T_VARIABLE","$bind",1038],["T_WHITESPACE"," ",1038],"=",["T_WHITESPACE"," ",1038],["T_ARRAY","array",1038],"(",["T_WHITESPACE","\n            ",1038],["T_CONSTANT_ENCAPSED_STRING","'attribute_set_id'",1039],["T_WHITESPACE"," ",1039],["T_DOUBLE_ARROW","=>",1039],["T_WHITESPACE"," ",1039],["T_VARIABLE","$setId",1039],",",["T_WHITESPACE","\n            ",1039],["T_CONSTANT_ENCAPSED_STRING","'attribute_id'",1040],["T_WHITESPACE","     ",1040],["T_DOUBLE_ARROW","=>",1040],["T_WHITESPACE"," ",1040],["T_VARIABLE","$attributeId",1040],["T_WHITESPACE","\n        ",1040],")",";",["T_WHITESPACE","\n        ",1041],["T_VARIABLE","$select",1042],["T_WHITESPACE"," ",1042],"=",["T_WHITESPACE"," ",1042],["T_VARIABLE","$this",1042],["T_OBJECT_OPERATOR","->",1042],["T_STRING","_conn",1042],["T_OBJECT_OPERATOR","->",1042],["T_STRING","select",1042],"(",")",["T_WHITESPACE","\n            ",1042],["T_OBJECT_OPERATOR","->",1043],["T_STRING","from",1043],"(",["T_VARIABLE","$table",1043],")",["T_WHITESPACE","\n            ",1043],["T_OBJECT_OPERATOR","->",1044],["T_STRING","where",1044],"(",["T_CONSTANT_ENCAPSED_STRING","'attribute_set_id = :attribute_set_id'",1044],")",["T_WHITESPACE","\n            ",1044],["T_OBJECT_OPERATOR","->",1045],["T_STRING","where",1045],"(",["T_CONSTANT_ENCAPSED_STRING","'attribute_id = :attribute_id'",1045],")",";",["T_WHITESPACE","\n        ",1045],["T_VARIABLE","$result",1046],["T_WHITESPACE"," ",1046],"=",["T_WHITESPACE"," ",1046],["T_VARIABLE","$this",1046],["T_OBJECT_OPERATOR","->",1046],["T_STRING","_conn",1046],["T_OBJECT_OPERATOR","->",1046],["T_STRING","fetchRow",1046],"(",["T_VARIABLE","$select",1046],",",["T_WHITESPACE"," ",1046],["T_VARIABLE","$bind",1046],")",";",["T_WHITESPACE","\n\n        ",1046],["T_IF","if",1048],["T_WHITESPACE"," ",1048],"(",["T_VARIABLE","$result",1048],")",["T_WHITESPACE"," ",1048],"{",["T_WHITESPACE","\n            ",1048],["T_IF","if",1049],["T_WHITESPACE"," ",1049],"(",["T_VARIABLE","$result",1049],"[",["T_CONSTANT_ENCAPSED_STRING","'attribute_group_id'",1049],"]",["T_WHITESPACE"," ",1049],["T_IS_NOT_EQUAL","!=",1049],["T_WHITESPACE"," ",1049],["T_VARIABLE","$groupId",1049],")",["T_WHITESPACE"," ",1049],"{",["T_WHITESPACE","\n                ",1049],["T_VARIABLE","$where",1050],["T_WHITESPACE"," ",1050],"=",["T_WHITESPACE"," ",1050],["T_ARRAY","array",1050],"(",["T_CONSTANT_ENCAPSED_STRING","'entity_attribute_id =?'",1050],["T_WHITESPACE"," ",1050],["T_DOUBLE_ARROW","=>",1050],["T_WHITESPACE"," ",1050],["T_VARIABLE","$result",1050],"[",["T_CONSTANT_ENCAPSED_STRING","'entity_attribute_id'",1050],"]",")",";",["T_WHITESPACE","\n                ",1050],["T_VARIABLE","$data",1051],["T_WHITESPACE","  ",1051],"=",["T_WHITESPACE"," ",1051],["T_ARRAY","array",1051],"(",["T_CONSTANT_ENCAPSED_STRING","'attribute_group_id'",1051],["T_WHITESPACE"," ",1051],["T_DOUBLE_ARROW","=>",1051],["T_WHITESPACE"," ",1051],["T_VARIABLE","$groupId",1051],")",";",["T_WHITESPACE","\n                ",1051],["T_VARIABLE","$this",1052],["T_OBJECT_OPERATOR","->",1052],["T_STRING","_conn",1052],["T_OBJECT_OPERATOR","->",1052],["T_STRING","update",1052],"(",["T_VARIABLE","$table",1052],",",["T_WHITESPACE"," ",1052],["T_VARIABLE","$data",1052],",",["T_WHITESPACE"," ",1052],["T_VARIABLE","$where",1052],")",";",["T_WHITESPACE","\n            ",1052],"}",["T_WHITESPACE","\n        ",1053],"}",["T_WHITESPACE"," ",1054],["T_ELSE","else",1054],["T_WHITESPACE"," ",1054],"{",["T_WHITESPACE","\n            ",1054],["T_VARIABLE","$data",1055],["T_WHITESPACE"," ",1055],"=",["T_WHITESPACE"," ",1055],["T_ARRAY","array",1055],"(",["T_WHITESPACE","\n                ",1055],["T_CONSTANT_ENCAPSED_STRING","'entity_type_id'",1056],["T_WHITESPACE","        ",1056],["T_DOUBLE_ARROW","=>",1056],["T_WHITESPACE"," ",1056],["T_VARIABLE","$entityTypeId",1056],",",["T_WHITESPACE","\n                ",1056],["T_CONSTANT_ENCAPSED_STRING","'attribute_set_id'",1057],["T_WHITESPACE","      ",1057],["T_DOUBLE_ARROW","=>",1057],["T_WHITESPACE"," ",1057],["T_VARIABLE","$setId",1057],",",["T_WHITESPACE","\n                ",1057],["T_CONSTANT_ENCAPSED_STRING","'attribute_group_id'",1058],["T_WHITESPACE","    ",1058],["T_DOUBLE_ARROW","=>",1058],["T_WHITESPACE"," ",1058],["T_VARIABLE","$groupId",1058],",",["T_WHITESPACE","\n                ",1058],["T_CONSTANT_ENCAPSED_STRING","'attribute_id'",1059],["T_WHITESPACE","          ",1059],["T_DOUBLE_ARROW","=>",1059],["T_WHITESPACE"," ",1059],["T_VARIABLE","$attributeId",1059],",",["T_WHITESPACE","\n                ",1059],["T_CONSTANT_ENCAPSED_STRING","'sort_order'",1060],["T_WHITESPACE","            ",1060],["T_DOUBLE_ARROW","=>",1060],["T_WHITESPACE"," ",1060],["T_VARIABLE","$this",1060],["T_OBJECT_OPERATOR","->",1060],["T_STRING","getAttributeSortOrder",1060],"(",["T_VARIABLE","$entityTypeId",1060],",",["T_WHITESPACE"," ",1060],["T_VARIABLE","$setId",1060],",",["T_WHITESPACE"," ",1060],["T_VARIABLE","$groupId",1060],",",["T_WHITESPACE"," ",1060],["T_VARIABLE","$sortOrder",1060],")",",",["T_WHITESPACE","\n            ",1060],")",";",["T_WHITESPACE","\n\n            ",1061],["T_VARIABLE","$this",1063],["T_OBJECT_OPERATOR","->",1063],["T_STRING","_conn",1063],["T_OBJECT_OPERATOR","->",1063],["T_STRING","insert",1063],"(",["T_VARIABLE","$table",1063],",",["T_WHITESPACE"," ",1063],["T_VARIABLE","$data",1063],")",";",["T_WHITESPACE","\n        ",1063],"}",["T_WHITESPACE","\n\n        ",1064],["T_RETURN","return",1066],["T_WHITESPACE"," ",1066],["T_VARIABLE","$this",1066],";",["T_WHITESPACE","\n    ",1066],"}",["T_WHITESPACE","\n\n    ",1067],["T_DOC_COMMENT","\/**\n     * Add or update attribute to group\n     *\n     * @param int|string $entityType\n     * @param int|string $setId\n     * @param int|string $groupId\n     * @param int|string $attributeId\n     * @param int $sortOrder\n     * @return Mage_Eav_Model_Entity_Setup\n     *\/",1069],["T_WHITESPACE","\n    ",1078],["T_PUBLIC","public",1079],["T_WHITESPACE"," ",1079],["T_FUNCTION","function",1079],["T_WHITESPACE"," ",1079],["T_STRING","addAttributeToGroup",1079],"(",["T_VARIABLE","$entityType",1079],",",["T_WHITESPACE"," ",1079],["T_VARIABLE","$setId",1079],",",["T_WHITESPACE"," ",1079],["T_VARIABLE","$groupId",1079],",",["T_WHITESPACE"," ",1079],["T_VARIABLE","$attributeId",1079],",",["T_WHITESPACE"," ",1079],["T_VARIABLE","$sortOrder",1079],["T_WHITESPACE"," ",1079],"=",["T_WHITESPACE"," ",1079],["T_STRING","null",1079],")",["T_WHITESPACE","\n    ",1079],"{",["T_WHITESPACE","\n        ",1080],["T_VARIABLE","$entityType",1081],["T_WHITESPACE","  ",1081],"=",["T_WHITESPACE"," ",1081],["T_VARIABLE","$this",1081],["T_OBJECT_OPERATOR","->",1081],["T_STRING","getEntityTypeId",1081],"(",["T_VARIABLE","$entityType",1081],")",";",["T_WHITESPACE","\n        ",1081],["T_VARIABLE","$setId",1082],["T_WHITESPACE","       ",1082],"=",["T_WHITESPACE"," ",1082],["T_VARIABLE","$this",1082],["T_OBJECT_OPERATOR","->",1082],["T_STRING","getAttributeSetId",1082],"(",["T_VARIABLE","$entityType",1082],",",["T_WHITESPACE"," ",1082],["T_VARIABLE","$setId",1082],")",";",["T_WHITESPACE","\n        ",1082],["T_VARIABLE","$groupId",1083],["T_WHITESPACE","     ",1083],"=",["T_WHITESPACE"," ",1083],["T_VARIABLE","$this",1083],["T_OBJECT_OPERATOR","->",1083],["T_STRING","getAttributeGroupId",1083],"(",["T_VARIABLE","$entityType",1083],",",["T_WHITESPACE"," ",1083],["T_VARIABLE","$setId",1083],",",["T_WHITESPACE"," ",1083],["T_VARIABLE","$groupId",1083],")",";",["T_WHITESPACE","\n        ",1083],["T_VARIABLE","$attributeId",1084],["T_WHITESPACE"," ",1084],"=",["T_WHITESPACE"," ",1084],["T_VARIABLE","$this",1084],["T_OBJECT_OPERATOR","->",1084],["T_STRING","getAttributeId",1084],"(",["T_VARIABLE","$entityType",1084],",",["T_WHITESPACE"," ",1084],["T_VARIABLE","$attributeId",1084],")",";",["T_WHITESPACE","\n\n        ",1084],["T_VARIABLE","$data",1086],["T_WHITESPACE"," ",1086],"=",["T_WHITESPACE"," ",1086],["T_ARRAY","array",1086],"(",["T_WHITESPACE","\n            ",1086],["T_CONSTANT_ENCAPSED_STRING","'entity_type_id'",1087],["T_WHITESPACE","        ",1087],["T_DOUBLE_ARROW","=>",1087],["T_WHITESPACE"," ",1087],["T_VARIABLE","$entityType",1087],",",["T_WHITESPACE","\n            ",1087],["T_CONSTANT_ENCAPSED_STRING","'attribute_set_id'",1088],["T_WHITESPACE","      ",1088],["T_DOUBLE_ARROW","=>",1088],["T_WHITESPACE"," ",1088],["T_VARIABLE","$setId",1088],",",["T_WHITESPACE","\n            ",1088],["T_CONSTANT_ENCAPSED_STRING","'attribute_group_id'",1089],["T_WHITESPACE","    ",1089],["T_DOUBLE_ARROW","=>",1089],["T_WHITESPACE"," ",1089],["T_VARIABLE","$groupId",1089],",",["T_WHITESPACE","\n            ",1089],["T_CONSTANT_ENCAPSED_STRING","'attribute_id'",1090],["T_WHITESPACE","          ",1090],["T_DOUBLE_ARROW","=>",1090],["T_WHITESPACE"," ",1090],["T_VARIABLE","$attributeId",1090],",",["T_WHITESPACE","\n        ",1090],")",";",["T_WHITESPACE","\n\n        ",1091],["T_VARIABLE","$bind",1093],["T_WHITESPACE"," ",1093],"=",["T_WHITESPACE"," ",1093],["T_ARRAY","array",1093],"(",["T_WHITESPACE","\n            ",1093],["T_CONSTANT_ENCAPSED_STRING","'entity_type_id'",1094],["T_WHITESPACE","    ",1094],["T_DOUBLE_ARROW","=>",1094],["T_WHITESPACE"," ",1094],["T_VARIABLE","$entityType",1094],",",["T_WHITESPACE","\n            ",1094],["T_CONSTANT_ENCAPSED_STRING","'attribute_set_id'",1095],["T_WHITESPACE","  ",1095],["T_DOUBLE_ARROW","=>",1095],["T_WHITESPACE"," ",1095],["T_VARIABLE","$setId",1095],",",["T_WHITESPACE","\n            ",1095],["T_CONSTANT_ENCAPSED_STRING","'attribute_id'",1096],["T_WHITESPACE","      ",1096],["T_DOUBLE_ARROW","=>",1096],["T_WHITESPACE"," ",1096],["T_VARIABLE","$attributeId",1096],["T_WHITESPACE","\n        ",1096],")",";",["T_WHITESPACE","\n        ",1097],["T_VARIABLE","$select",1098],["T_WHITESPACE"," ",1098],"=",["T_WHITESPACE"," ",1098],["T_VARIABLE","$this",1098],["T_OBJECT_OPERATOR","->",1098],["T_STRING","getConnection",1098],"(",")",["T_OBJECT_OPERATOR","->",1098],["T_STRING","select",1098],"(",")",["T_WHITESPACE","\n            ",1098],["T_OBJECT_OPERATOR","->",1099],["T_STRING","from",1099],"(",["T_VARIABLE","$this",1099],["T_OBJECT_OPERATOR","->",1099],["T_STRING","getTable",1099],"(",["T_CONSTANT_ENCAPSED_STRING","'eav\/entity_attribute'",1099],")",")",["T_WHITESPACE","\n            ",1099],["T_OBJECT_OPERATOR","->",1100],["T_STRING","where",1100],"(",["T_CONSTANT_ENCAPSED_STRING","'entity_type_id = :entity_type_id'",1100],")",["T_WHITESPACE","\n            ",1100],["T_OBJECT_OPERATOR","->",1101],["T_STRING","where",1101],"(",["T_CONSTANT_ENCAPSED_STRING","'attribute_set_id = :attribute_set_id'",1101],")",["T_WHITESPACE","\n            ",1101],["T_OBJECT_OPERATOR","->",1102],["T_STRING","where",1102],"(",["T_CONSTANT_ENCAPSED_STRING","'attribute_id = :attribute_id'",1102],")",";",["T_WHITESPACE","\n        ",1102],["T_VARIABLE","$row",1103],["T_WHITESPACE"," ",1103],"=",["T_WHITESPACE"," ",1103],["T_VARIABLE","$this",1103],["T_OBJECT_OPERATOR","->",1103],["T_STRING","getConnection",1103],"(",")",["T_OBJECT_OPERATOR","->",1103],["T_STRING","fetchRow",1103],"(",["T_VARIABLE","$select",1103],",",["T_WHITESPACE"," ",1103],["T_VARIABLE","$bind",1103],")",";",["T_WHITESPACE","\n        ",1103],["T_IF","if",1104],["T_WHITESPACE"," ",1104],"(",["T_VARIABLE","$row",1104],")",["T_WHITESPACE"," ",1104],"{",["T_WHITESPACE","\n            ",1104],["T_COMMENT","\/\/ update\n",1105],["T_WHITESPACE","            ",1106],["T_IF","if",1106],["T_WHITESPACE"," ",1106],"(",["T_VARIABLE","$sortOrder",1106],["T_WHITESPACE"," ",1106],["T_IS_NOT_IDENTICAL","!==",1106],["T_WHITESPACE"," ",1106],["T_STRING","null",1106],")",["T_WHITESPACE"," ",1106],"{",["T_WHITESPACE","\n                ",1106],["T_VARIABLE","$data",1107],"[",["T_CONSTANT_ENCAPSED_STRING","'sort_order'",1107],"]",["T_WHITESPACE"," ",1107],"=",["T_WHITESPACE"," ",1107],["T_VARIABLE","$sortOrder",1107],";",["T_WHITESPACE","\n            ",1107],"}",["T_WHITESPACE","\n\n            ",1108],["T_VARIABLE","$this",1110],["T_OBJECT_OPERATOR","->",1110],["T_STRING","getConnection",1110],"(",")",["T_OBJECT_OPERATOR","->",1110],["T_STRING","update",1110],"(",["T_WHITESPACE","\n                ",1110],["T_VARIABLE","$this",1111],["T_OBJECT_OPERATOR","->",1111],["T_STRING","getTable",1111],"(",["T_CONSTANT_ENCAPSED_STRING","'eav\/entity_attribute'",1111],")",",",["T_WHITESPACE","\n                ",1111],["T_VARIABLE","$data",1112],",",["T_WHITESPACE","\n                ",1112],["T_VARIABLE","$this",1113],["T_OBJECT_OPERATOR","->",1113],["T_STRING","getConnection",1113],"(",")",["T_OBJECT_OPERATOR","->",1113],["T_STRING","quoteInto",1113],"(",["T_CONSTANT_ENCAPSED_STRING","'entity_attribute_id=?'",1113],",",["T_WHITESPACE"," ",1113],["T_VARIABLE","$row",1113],"[",["T_CONSTANT_ENCAPSED_STRING","'entity_attribute_id'",1113],"]",")",["T_WHITESPACE","\n            ",1113],")",";",["T_WHITESPACE","\n        ",1114],"}",["T_WHITESPACE"," ",1115],["T_ELSE","else",1115],["T_WHITESPACE"," ",1115],"{",["T_WHITESPACE","\n            ",1115],["T_IF","if",1116],["T_WHITESPACE"," ",1116],"(",["T_VARIABLE","$sortOrder",1116],["T_WHITESPACE"," ",1116],["T_IS_IDENTICAL","===",1116],["T_WHITESPACE"," ",1116],["T_STRING","null",1116],")",["T_WHITESPACE"," ",1116],"{",["T_WHITESPACE","\n                ",1116],["T_VARIABLE","$select",1117],["T_WHITESPACE"," ",1117],"=",["T_WHITESPACE"," ",1117],["T_VARIABLE","$this",1117],["T_OBJECT_OPERATOR","->",1117],["T_STRING","getConnection",1117],"(",")",["T_OBJECT_OPERATOR","->",1117],["T_STRING","select",1117],"(",")",["T_WHITESPACE","\n                    ",1117],["T_OBJECT_OPERATOR","->",1118],["T_STRING","from",1118],"(",["T_VARIABLE","$this",1118],["T_OBJECT_OPERATOR","->",1118],["T_STRING","getTable",1118],"(",["T_CONSTANT_ENCAPSED_STRING","'eav\/entity_attribute'",1118],")",",",["T_WHITESPACE"," ",1118],["T_CONSTANT_ENCAPSED_STRING","'MAX(sort_order)'",1118],")",["T_WHITESPACE","\n                    ",1118],["T_OBJECT_OPERATOR","->",1119],["T_STRING","where",1119],"(",["T_CONSTANT_ENCAPSED_STRING","'entity_type_id = :entity_type_id'",1119],")",["T_WHITESPACE","\n                    ",1119],["T_OBJECT_OPERATOR","->",1120],["T_STRING","where",1120],"(",["T_CONSTANT_ENCAPSED_STRING","'attribute_set_id = :attribute_set_id'",1120],")",["T_WHITESPACE","\n                    ",1120],["T_OBJECT_OPERATOR","->",1121],["T_STRING","where",1121],"(",["T_CONSTANT_ENCAPSED_STRING","'attribute_id = :attribute_id'",1121],")",";",["T_WHITESPACE","\n\n                ",1121],["T_VARIABLE","$sortOrder",1123],["T_WHITESPACE"," ",1123],"=",["T_WHITESPACE"," ",1123],["T_VARIABLE","$this",1123],["T_OBJECT_OPERATOR","->",1123],["T_STRING","getConnection",1123],"(",")",["T_OBJECT_OPERATOR","->",1123],["T_STRING","fetchOne",1123],"(",["T_VARIABLE","$select",1123],",",["T_WHITESPACE"," ",1123],["T_VARIABLE","$bind",1123],")",["T_WHITESPACE"," ",1123],"+",["T_WHITESPACE"," ",1123],["T_LNUMBER","10",1123],";",["T_WHITESPACE","\n            ",1123],"}",["T_WHITESPACE","\n            ",1124],["T_VARIABLE","$sortOrder",1125],["T_WHITESPACE"," ",1125],"=",["T_WHITESPACE"," ",1125],["T_STRING","is_numeric",1125],"(",["T_VARIABLE","$sortOrder",1125],")",["T_WHITESPACE"," ",1125],"?",["T_WHITESPACE"," ",1125],["T_VARIABLE","$sortOrder",1125],["T_WHITESPACE"," ",1125],":",["T_WHITESPACE"," ",1125],["T_LNUMBER","1",1125],";",["T_WHITESPACE","\n            ",1125],["T_VARIABLE","$data",1126],"[",["T_CONSTANT_ENCAPSED_STRING","'sort_order'",1126],"]",["T_WHITESPACE"," ",1126],"=",["T_WHITESPACE"," ",1126],["T_VARIABLE","$sortOrder",1126],";",["T_WHITESPACE","\n            ",1126],["T_VARIABLE","$this",1127],["T_OBJECT_OPERATOR","->",1127],["T_STRING","getConnection",1127],"(",")",["T_OBJECT_OPERATOR","->",1127],["T_STRING","insert",1127],"(",["T_VARIABLE","$this",1127],["T_OBJECT_OPERATOR","->",1127],["T_STRING","getTable",1127],"(",["T_CONSTANT_ENCAPSED_STRING","'eav\/entity_attribute'",1127],")",",",["T_WHITESPACE"," ",1127],["T_VARIABLE","$data",1127],")",";",["T_WHITESPACE","\n        ",1127],"}",["T_WHITESPACE","\n\n        ",1128],["T_RETURN","return",1130],["T_WHITESPACE"," ",1130],["T_VARIABLE","$this",1130],";",["T_WHITESPACE","\n    ",1130],"}",["T_WHITESPACE","\n\n",1131],["T_COMMENT","\/******************* BULK INSTALL *****************\/",1133],["T_WHITESPACE","\n\n    ",1133],["T_DOC_COMMENT","\/**\n     * Install entities\n     *\n     * @param array $entities\n     * @return Mage_Eav_Model_Entity_Setup\n     *\/",1135],["T_WHITESPACE","\n    ",1140],["T_PUBLIC","public",1141],["T_WHITESPACE"," ",1141],["T_FUNCTION","function",1141],["T_WHITESPACE"," ",1141],["T_STRING","installEntities",1141],"(",["T_VARIABLE","$entities",1141],["T_WHITESPACE"," ",1141],"=",["T_WHITESPACE"," ",1141],["T_STRING","null",1141],")",["T_WHITESPACE","\n    ",1141],"{",["T_WHITESPACE","\n        ",1142],["T_VARIABLE","$this",1143],["T_OBJECT_OPERATOR","->",1143],["T_STRING","cleanCache",1143],"(",")",";",["T_WHITESPACE","\n\n        ",1143],["T_IF","if",1145],["T_WHITESPACE"," ",1145],"(",["T_VARIABLE","$entities",1145],["T_WHITESPACE"," ",1145],["T_IS_IDENTICAL","===",1145],["T_WHITESPACE"," ",1145],["T_STRING","null",1145],")",["T_WHITESPACE"," ",1145],"{",["T_WHITESPACE","\n            ",1145],["T_VARIABLE","$entities",1146],["T_WHITESPACE"," ",1146],"=",["T_WHITESPACE"," ",1146],["T_VARIABLE","$this",1146],["T_OBJECT_OPERATOR","->",1146],["T_STRING","getDefaultEntities",1146],"(",")",";",["T_WHITESPACE","\n        ",1146],"}",["T_WHITESPACE","\n\n        ",1147],["T_FOREACH","foreach",1149],["T_WHITESPACE"," ",1149],"(",["T_VARIABLE","$entities",1149],["T_WHITESPACE"," ",1149],["T_AS","as",1149],["T_WHITESPACE"," ",1149],["T_VARIABLE","$entityName",1149],["T_DOUBLE_ARROW","=>",1149],["T_VARIABLE","$entity",1149],")",["T_WHITESPACE"," ",1149],"{",["T_WHITESPACE","\n            ",1149],["T_VARIABLE","$this",1150],["T_OBJECT_OPERATOR","->",1150],["T_STRING","addEntityType",1150],"(",["T_VARIABLE","$entityName",1150],",",["T_WHITESPACE"," ",1150],["T_VARIABLE","$entity",1150],")",";",["T_WHITESPACE","\n\n            ",1150],["T_VARIABLE","$frontendPrefix",1152],["T_WHITESPACE"," ",1152],"=",["T_WHITESPACE"," ",1152],["T_ISSET","isset",1152],"(",["T_VARIABLE","$entity",1152],"[",["T_CONSTANT_ENCAPSED_STRING","'frontend_prefix'",1152],"]",")",["T_WHITESPACE"," ",1152],"?",["T_WHITESPACE"," ",1152],["T_VARIABLE","$entity",1152],"[",["T_CONSTANT_ENCAPSED_STRING","'frontend_prefix'",1152],"]",["T_WHITESPACE"," ",1152],":",["T_WHITESPACE"," ",1152],["T_CONSTANT_ENCAPSED_STRING","''",1152],";",["T_WHITESPACE","\n            ",1152],["T_VARIABLE","$backendPrefix",1153],["T_WHITESPACE","  ",1153],"=",["T_WHITESPACE"," ",1153],["T_ISSET","isset",1153],"(",["T_VARIABLE","$entity",1153],"[",["T_CONSTANT_ENCAPSED_STRING","'backend_prefix'",1153],"]",")",["T_WHITESPACE"," ",1153],"?",["T_WHITESPACE"," ",1153],["T_VARIABLE","$entity",1153],"[",["T_CONSTANT_ENCAPSED_STRING","'backend_prefix'",1153],"]",["T_WHITESPACE"," ",1153],":",["T_WHITESPACE"," ",1153],["T_CONSTANT_ENCAPSED_STRING","''",1153],";",["T_WHITESPACE","\n            ",1153],["T_VARIABLE","$sourcePrefix",1154],["T_WHITESPACE","   ",1154],"=",["T_WHITESPACE"," ",1154],["T_ISSET","isset",1154],"(",["T_VARIABLE","$entity",1154],"[",["T_CONSTANT_ENCAPSED_STRING","'source_prefix'",1154],"]",")",["T_WHITESPACE"," ",1154],"?",["T_WHITESPACE"," ",1154],["T_VARIABLE","$entity",1154],"[",["T_CONSTANT_ENCAPSED_STRING","'source_prefix'",1154],"]",["T_WHITESPACE"," ",1154],":",["T_WHITESPACE"," ",1154],["T_CONSTANT_ENCAPSED_STRING","''",1154],";",["T_WHITESPACE","\n\n            ",1154],["T_FOREACH","foreach",1156],["T_WHITESPACE"," ",1156],"(",["T_VARIABLE","$entity",1156],"[",["T_CONSTANT_ENCAPSED_STRING","'attributes'",1156],"]",["T_WHITESPACE"," ",1156],["T_AS","as",1156],["T_WHITESPACE"," ",1156],["T_VARIABLE","$attrCode",1156],["T_WHITESPACE"," ",1156],["T_DOUBLE_ARROW","=>",1156],["T_WHITESPACE"," ",1156],["T_VARIABLE","$attr",1156],")",["T_WHITESPACE"," ",1156],"{",["T_WHITESPACE","\n                ",1156],["T_IF","if",1157],["T_WHITESPACE"," ",1157],"(","!",["T_EMPTY","empty",1157],"(",["T_VARIABLE","$attr",1157],"[",["T_CONSTANT_ENCAPSED_STRING","'backend'",1157],"]",")",")",["T_WHITESPACE"," ",1157],"{",["T_WHITESPACE","\n                    ",1157],["T_IF","if",1158],["T_WHITESPACE"," ",1158],"(",["T_CONSTANT_ENCAPSED_STRING","'_'",1158],["T_WHITESPACE"," ",1158],["T_IS_IDENTICAL","===",1158],["T_WHITESPACE"," ",1158],["T_VARIABLE","$attr",1158],"[",["T_CONSTANT_ENCAPSED_STRING","'backend'",1158],"]",")",["T_WHITESPACE"," ",1158],"{",["T_WHITESPACE","\n                        ",1158],["T_VARIABLE","$attr",1159],"[",["T_CONSTANT_ENCAPSED_STRING","'backend'",1159],"]",["T_WHITESPACE"," ",1159],"=",["T_WHITESPACE"," ",1159],["T_VARIABLE","$backendPrefix",1159],";",["T_WHITESPACE","\n                    ",1159],"}",["T_WHITESPACE"," ",1160],["T_ELSEIF","elseif",1160],["T_WHITESPACE"," ",1160],"(",["T_CONSTANT_ENCAPSED_STRING","'_'",1160],["T_WHITESPACE"," ",1160],["T_IS_IDENTICAL","===",1160],["T_WHITESPACE"," ",1160],["T_VARIABLE","$attr",1160],"[",["T_CONSTANT_ENCAPSED_STRING","'backend'",1160],"]","{",["T_LNUMBER","0",1160],"}",")",["T_WHITESPACE"," ",1160],"{",["T_WHITESPACE","\n                        ",1160],["T_VARIABLE","$attr",1161],"[",["T_CONSTANT_ENCAPSED_STRING","'backend'",1161],"]",["T_WHITESPACE"," ",1161],"=",["T_WHITESPACE"," ",1161],["T_VARIABLE","$backendPrefix",1161],".",["T_VARIABLE","$attr",1161],"[",["T_CONSTANT_ENCAPSED_STRING","'backend'",1161],"]",";",["T_WHITESPACE","\n                    ",1161],"}",["T_WHITESPACE"," ",1162],["T_ELSE","else",1162],["T_WHITESPACE"," ",1162],"{",["T_WHITESPACE","\n                        ",1162],["T_VARIABLE","$attr",1163],"[",["T_CONSTANT_ENCAPSED_STRING","'backend'",1163],"]",["T_WHITESPACE"," ",1163],"=",["T_WHITESPACE"," ",1163],["T_VARIABLE","$attr",1163],"[",["T_CONSTANT_ENCAPSED_STRING","'backend'",1163],"]",";",["T_WHITESPACE","\n                    ",1163],"}",["T_WHITESPACE","\n                ",1164],"}",["T_WHITESPACE","\n                ",1165],["T_IF","if",1166],["T_WHITESPACE"," ",1166],"(","!",["T_EMPTY","empty",1166],"(",["T_VARIABLE","$attr",1166],"[",["T_CONSTANT_ENCAPSED_STRING","'frontend'",1166],"]",")",")",["T_WHITESPACE"," ",1166],"{",["T_WHITESPACE","\n                    ",1166],["T_IF","if",1167],["T_WHITESPACE"," ",1167],"(",["T_CONSTANT_ENCAPSED_STRING","'_'",1167],["T_WHITESPACE"," ",1167],["T_IS_IDENTICAL","===",1167],["T_WHITESPACE"," ",1167],["T_VARIABLE","$attr",1167],"[",["T_CONSTANT_ENCAPSED_STRING","'frontend'",1167],"]",")",["T_WHITESPACE"," ",1167],"{",["T_WHITESPACE","\n                        ",1167],["T_VARIABLE","$attr",1168],"[",["T_CONSTANT_ENCAPSED_STRING","'frontend'",1168],"]",["T_WHITESPACE"," ",1168],"=",["T_WHITESPACE"," ",1168],["T_VARIABLE","$frontendPrefix",1168],";",["T_WHITESPACE","\n                    ",1168],"}",["T_WHITESPACE"," ",1169],["T_ELSEIF","elseif",1169],["T_WHITESPACE"," ",1169],"(",["T_CONSTANT_ENCAPSED_STRING","'_'",1169],["T_WHITESPACE"," ",1169],["T_IS_IDENTICAL","===",1169],["T_WHITESPACE"," ",1169],["T_VARIABLE","$attr",1169],"[",["T_CONSTANT_ENCAPSED_STRING","'frontend'",1169],"]","{",["T_LNUMBER","0",1169],"}",")",["T_WHITESPACE"," ",1169],"{",["T_WHITESPACE","\n                        ",1169],["T_VARIABLE","$attr",1170],"[",["T_CONSTANT_ENCAPSED_STRING","'frontend'",1170],"]",["T_WHITESPACE"," ",1170],"=",["T_WHITESPACE"," ",1170],["T_VARIABLE","$frontendPrefix",1170],".",["T_VARIABLE","$attr",1170],"[",["T_CONSTANT_ENCAPSED_STRING","'frontend'",1170],"]",";",["T_WHITESPACE","\n                    ",1170],"}",["T_WHITESPACE"," ",1171],["T_ELSE","else",1171],["T_WHITESPACE"," ",1171],"{",["T_WHITESPACE","\n                        ",1171],["T_VARIABLE","$attr",1172],"[",["T_CONSTANT_ENCAPSED_STRING","'frontend'",1172],"]",["T_WHITESPACE"," ",1172],"=",["T_WHITESPACE"," ",1172],["T_VARIABLE","$attr",1172],"[",["T_CONSTANT_ENCAPSED_STRING","'frontend'",1172],"]",";",["T_WHITESPACE","\n                    ",1172],"}",["T_WHITESPACE","\n                ",1173],"}",["T_WHITESPACE","\n                ",1174],["T_IF","if",1175],["T_WHITESPACE"," ",1175],"(","!",["T_EMPTY","empty",1175],"(",["T_VARIABLE","$attr",1175],"[",["T_CONSTANT_ENCAPSED_STRING","'source'",1175],"]",")",")",["T_WHITESPACE"," ",1175],"{",["T_WHITESPACE","\n                    ",1175],["T_IF","if",1176],["T_WHITESPACE"," ",1176],"(",["T_CONSTANT_ENCAPSED_STRING","'_'",1176],["T_WHITESPACE"," ",1176],["T_IS_IDENTICAL","===",1176],["T_WHITESPACE"," ",1176],["T_VARIABLE","$attr",1176],"[",["T_CONSTANT_ENCAPSED_STRING","'source'",1176],"]",")",["T_WHITESPACE"," ",1176],"{",["T_WHITESPACE","\n                        ",1176],["T_VARIABLE","$attr",1177],"[",["T_CONSTANT_ENCAPSED_STRING","'source'",1177],"]",["T_WHITESPACE"," ",1177],"=",["T_WHITESPACE"," ",1177],["T_VARIABLE","$sourcePrefix",1177],";",["T_WHITESPACE","\n                    ",1177],"}",["T_WHITESPACE"," ",1178],["T_ELSEIF","elseif",1178],["T_WHITESPACE"," ",1178],"(",["T_CONSTANT_ENCAPSED_STRING","'_'",1178],["T_WHITESPACE"," ",1178],["T_IS_IDENTICAL","===",1178],["T_WHITESPACE"," ",1178],["T_VARIABLE","$attr",1178],"[",["T_CONSTANT_ENCAPSED_STRING","'source'",1178],"]","{",["T_LNUMBER","0",1178],"}",")",["T_WHITESPACE"," ",1178],"{",["T_WHITESPACE","\n                        ",1178],["T_VARIABLE","$attr",1179],"[",["T_CONSTANT_ENCAPSED_STRING","'source'",1179],"]",["T_WHITESPACE"," ",1179],"=",["T_WHITESPACE"," ",1179],["T_VARIABLE","$sourcePrefix",1179],["T_WHITESPACE"," ",1179],".",["T_WHITESPACE"," ",1179],["T_VARIABLE","$attr",1179],"[",["T_CONSTANT_ENCAPSED_STRING","'source'",1179],"]",";",["T_WHITESPACE","\n                    ",1179],"}",["T_WHITESPACE"," ",1180],["T_ELSE","else",1180],["T_WHITESPACE"," ",1180],"{",["T_WHITESPACE","\n                        ",1180],["T_VARIABLE","$attr",1181],"[",["T_CONSTANT_ENCAPSED_STRING","'source'",1181],"]",["T_WHITESPACE"," ",1181],"=",["T_WHITESPACE"," ",1181],["T_VARIABLE","$attr",1181],"[",["T_CONSTANT_ENCAPSED_STRING","'source'",1181],"]",";",["T_WHITESPACE","\n                    ",1181],"}",["T_WHITESPACE","\n                ",1182],"}",["T_WHITESPACE","\n\n                ",1183],["T_VARIABLE","$this",1185],["T_OBJECT_OPERATOR","->",1185],["T_STRING","addAttribute",1185],"(",["T_VARIABLE","$entityName",1185],",",["T_WHITESPACE"," ",1185],["T_VARIABLE","$attrCode",1185],",",["T_WHITESPACE"," ",1185],["T_VARIABLE","$attr",1185],")",";",["T_WHITESPACE","\n            ",1185],"}",["T_WHITESPACE","\n            ",1186],["T_VARIABLE","$this",1187],["T_OBJECT_OPERATOR","->",1187],["T_STRING","setDefaultSetToEntityType",1187],"(",["T_VARIABLE","$entityName",1187],")",";",["T_WHITESPACE","\n        ",1187],"}",["T_WHITESPACE","\n\n        ",1188],["T_RETURN","return",1190],["T_WHITESPACE"," ",1190],["T_VARIABLE","$this",1190],";",["T_WHITESPACE","\n    ",1190],"}",["T_WHITESPACE","\n\n\n",1191],["T_COMMENT","\/****************************** CREATE ENTITY TABLES ***********************************\/",1194],["T_WHITESPACE","\n\n    ",1194],["T_DOC_COMMENT","\/**\n     * Create entity tables\n     *\n     * @param string $baseName\n     * @param array $options\n     * - no-main\n     * - no-default-types\n     * - types\n     * @return unknown\n     *\/",1196],["T_WHITESPACE","\n    ",1205],["T_PUBLIC","public",1206],["T_WHITESPACE"," ",1206],["T_FUNCTION","function",1206],["T_WHITESPACE"," ",1206],["T_STRING","createEntityTables",1206],"(",["T_VARIABLE","$baseTableName",1206],",",["T_WHITESPACE"," ",1206],["T_ARRAY","array",1206],["T_WHITESPACE"," ",1206],["T_VARIABLE","$options",1206],["T_WHITESPACE"," ",1206],"=",["T_WHITESPACE"," ",1206],["T_ARRAY","array",1206],"(",")",")",["T_WHITESPACE","\n    ",1206],"{",["T_WHITESPACE","\n        ",1207],["T_VARIABLE","$isNoCreateMainTable",1208],["T_WHITESPACE"," ",1208],"=",["T_WHITESPACE"," ",1208],["T_VARIABLE","$this",1208],["T_OBJECT_OPERATOR","->",1208],["T_STRING","_getValue",1208],"(",["T_VARIABLE","$options",1208],",",["T_WHITESPACE"," ",1208],["T_CONSTANT_ENCAPSED_STRING","'no-main'",1208],",",["T_WHITESPACE"," ",1208],["T_STRING","false",1208],")",";",["T_WHITESPACE","\n        ",1208],["T_VARIABLE","$isNoDefaultTypes",1209],["T_WHITESPACE","    ",1209],"=",["T_WHITESPACE"," ",1209],["T_VARIABLE","$this",1209],["T_OBJECT_OPERATOR","->",1209],["T_STRING","_getValue",1209],"(",["T_VARIABLE","$options",1209],",",["T_WHITESPACE"," ",1209],["T_CONSTANT_ENCAPSED_STRING","'no-default-types'",1209],",",["T_WHITESPACE"," ",1209],["T_STRING","false",1209],")",";",["T_WHITESPACE","\n        ",1209],["T_VARIABLE","$customTypes",1210],["T_WHITESPACE","         ",1210],"=",["T_WHITESPACE"," ",1210],["T_VARIABLE","$this",1210],["T_OBJECT_OPERATOR","->",1210],["T_STRING","_getValue",1210],"(",["T_VARIABLE","$options",1210],",",["T_WHITESPACE"," ",1210],["T_CONSTANT_ENCAPSED_STRING","'types'",1210],",",["T_WHITESPACE"," ",1210],["T_ARRAY","array",1210],"(",")",")",";",["T_WHITESPACE","\n        ",1210],["T_VARIABLE","$tables",1211],["T_WHITESPACE","              ",1211],"=",["T_WHITESPACE"," ",1211],["T_ARRAY","array",1211],"(",")",";",["T_WHITESPACE","\n\n        ",1211],["T_IF","if",1213],["T_WHITESPACE"," ",1213],"(","!",["T_VARIABLE","$isNoCreateMainTable",1213],")",["T_WHITESPACE"," ",1213],"{",["T_WHITESPACE","\n            ",1213],["T_DOC_COMMENT","\/**\n             * Create table main eav table\n             *\/",1214],["T_WHITESPACE","\n            ",1216],["T_VARIABLE","$connection",1217],["T_WHITESPACE"," ",1217],"=",["T_WHITESPACE"," ",1217],["T_VARIABLE","$this",1217],["T_OBJECT_OPERATOR","->",1217],["T_STRING","getConnection",1217],"(",")",";",["T_WHITESPACE","\n            ",1217],["T_VARIABLE","$mainTable",1218],["T_WHITESPACE"," ",1218],"=",["T_WHITESPACE"," ",1218],["T_VARIABLE","$connection",1218],["T_WHITESPACE","\n                ",1218],["T_OBJECT_OPERATOR","->",1219],["T_STRING","newTable",1219],"(",["T_VARIABLE","$this",1219],["T_OBJECT_OPERATOR","->",1219],["T_STRING","getTable",1219],"(",["T_VARIABLE","$baseTableName",1219],")",")",["T_WHITESPACE","\n                ",1219],["T_OBJECT_OPERATOR","->",1220],["T_STRING","addColumn",1220],"(",["T_CONSTANT_ENCAPSED_STRING","'entity_id'",1220],",",["T_WHITESPACE"," ",1220],["T_STRING","Varien_Db_Ddl_Table",1220],["T_DOUBLE_COLON","::",1220],["T_STRING","TYPE_INTEGER",1220],",",["T_WHITESPACE"," ",1220],["T_STRING","null",1220],",",["T_WHITESPACE"," ",1220],["T_ARRAY","array",1220],"(",["T_WHITESPACE","\n                    ",1220],["T_CONSTANT_ENCAPSED_STRING","'identity'",1221],["T_WHITESPACE","  ",1221],["T_DOUBLE_ARROW","=>",1221],["T_WHITESPACE"," ",1221],["T_STRING","true",1221],",",["T_WHITESPACE","\n                    ",1221],["T_CONSTANT_ENCAPSED_STRING","'nullable'",1222],["T_WHITESPACE","  ",1222],["T_DOUBLE_ARROW","=>",1222],["T_WHITESPACE"," ",1222],["T_STRING","false",1222],",",["T_WHITESPACE","\n                    ",1222],["T_CONSTANT_ENCAPSED_STRING","'primary'",1223],["T_WHITESPACE","   ",1223],["T_DOUBLE_ARROW","=>",1223],["T_WHITESPACE"," ",1223],["T_STRING","true",1223],",",["T_WHITESPACE","\n                    ",1223],["T_CONSTANT_ENCAPSED_STRING","'unsigned'",1224],["T_WHITESPACE","  ",1224],["T_DOUBLE_ARROW","=>",1224],["T_WHITESPACE"," ",1224],["T_STRING","true",1224],",",["T_WHITESPACE","\n                 ",1224],")",",",["T_WHITESPACE"," ",1225],["T_CONSTANT_ENCAPSED_STRING","'Entity Id'",1225],")",["T_WHITESPACE","\n                ",1225],["T_OBJECT_OPERATOR","->",1226],["T_STRING","addColumn",1226],"(",["T_CONSTANT_ENCAPSED_STRING","'entity_type_id'",1226],",",["T_WHITESPACE"," ",1226],["T_STRING","Varien_Db_Ddl_Table",1226],["T_DOUBLE_COLON","::",1226],["T_STRING","TYPE_SMALLINT",1226],",",["T_WHITESPACE"," ",1226],["T_STRING","null",1226],",",["T_WHITESPACE"," ",1226],["T_ARRAY","array",1226],"(",["T_WHITESPACE","\n                    ",1226],["T_CONSTANT_ENCAPSED_STRING","'unsigned'",1227],["T_WHITESPACE","  ",1227],["T_DOUBLE_ARROW","=>",1227],["T_WHITESPACE"," ",1227],["T_STRING","true",1227],",",["T_WHITESPACE","\n                    ",1227],["T_CONSTANT_ENCAPSED_STRING","'nullable'",1228],["T_WHITESPACE","  ",1228],["T_DOUBLE_ARROW","=>",1228],["T_WHITESPACE"," ",1228],["T_STRING","false",1228],",",["T_WHITESPACE","\n                    ",1228],["T_CONSTANT_ENCAPSED_STRING","'default'",1229],["T_WHITESPACE","   ",1229],["T_DOUBLE_ARROW","=>",1229],["T_WHITESPACE"," ",1229],["T_CONSTANT_ENCAPSED_STRING","'0'",1229],",",["T_WHITESPACE","\n                ",1229],")",",",["T_WHITESPACE"," ",1230],["T_CONSTANT_ENCAPSED_STRING","'Entity Type Id'",1230],")",["T_WHITESPACE","\n                ",1230],["T_OBJECT_OPERATOR","->",1231],["T_STRING","addColumn",1231],"(",["T_CONSTANT_ENCAPSED_STRING","'attribute_set_id'",1231],",",["T_WHITESPACE"," ",1231],["T_STRING","Varien_Db_Ddl_Table",1231],["T_DOUBLE_COLON","::",1231],["T_STRING","TYPE_SMALLINT",1231],",",["T_WHITESPACE"," ",1231],["T_STRING","null",1231],",",["T_WHITESPACE"," ",1231],["T_ARRAY","array",1231],"(",["T_WHITESPACE","\n                    ",1231],["T_CONSTANT_ENCAPSED_STRING","'unsigned'",1232],["T_WHITESPACE","  ",1232],["T_DOUBLE_ARROW","=>",1232],["T_WHITESPACE"," ",1232],["T_STRING","true",1232],",",["T_WHITESPACE","\n                    ",1232],["T_CONSTANT_ENCAPSED_STRING","'nullable'",1233],["T_WHITESPACE","  ",1233],["T_DOUBLE_ARROW","=>",1233],["T_WHITESPACE"," ",1233],["T_STRING","false",1233],",",["T_WHITESPACE","\n                    ",1233],["T_CONSTANT_ENCAPSED_STRING","'default'",1234],["T_WHITESPACE","   ",1234],["T_DOUBLE_ARROW","=>",1234],["T_WHITESPACE"," ",1234],["T_CONSTANT_ENCAPSED_STRING","'0'",1234],",",["T_WHITESPACE","\n                ",1234],")",",",["T_WHITESPACE"," ",1235],["T_CONSTANT_ENCAPSED_STRING","'Attribute Set Id'",1235],")",["T_WHITESPACE","\n                ",1235],["T_OBJECT_OPERATOR","->",1236],["T_STRING","addColumn",1236],"(",["T_CONSTANT_ENCAPSED_STRING","'increment_id'",1236],",",["T_WHITESPACE"," ",1236],["T_STRING","Varien_Db_Ddl_Table",1236],["T_DOUBLE_COLON","::",1236],["T_STRING","TYPE_TEXT",1236],",",["T_WHITESPACE"," ",1236],["T_LNUMBER","50",1236],",",["T_WHITESPACE"," ",1236],["T_ARRAY","array",1236],"(",["T_WHITESPACE","\n                    ",1236],["T_CONSTANT_ENCAPSED_STRING","'nullable'",1237],["T_WHITESPACE","  ",1237],["T_DOUBLE_ARROW","=>",1237],["T_WHITESPACE"," ",1237],["T_STRING","false",1237],",",["T_WHITESPACE","\n                    ",1237],["T_CONSTANT_ENCAPSED_STRING","'default'",1238],["T_WHITESPACE","   ",1238],["T_DOUBLE_ARROW","=>",1238],["T_WHITESPACE"," ",1238],["T_CONSTANT_ENCAPSED_STRING","''",1238],",",["T_WHITESPACE","\n                ",1238],")",",",["T_WHITESPACE"," ",1239],["T_CONSTANT_ENCAPSED_STRING","'Increment Id'",1239],")",["T_WHITESPACE","\n                ",1239],["T_OBJECT_OPERATOR","->",1240],["T_STRING","addColumn",1240],"(",["T_CONSTANT_ENCAPSED_STRING","'store_id'",1240],",",["T_WHITESPACE"," ",1240],["T_STRING","Varien_Db_Ddl_Table",1240],["T_DOUBLE_COLON","::",1240],["T_STRING","TYPE_SMALLINT",1240],",",["T_WHITESPACE"," ",1240],["T_STRING","null",1240],",",["T_WHITESPACE"," ",1240],["T_ARRAY","array",1240],"(",["T_WHITESPACE","\n                    ",1240],["T_CONSTANT_ENCAPSED_STRING","'unsigned'",1241],["T_WHITESPACE","  ",1241],["T_DOUBLE_ARROW","=>",1241],["T_WHITESPACE"," ",1241],["T_STRING","true",1241],",",["T_WHITESPACE","\n                    ",1241],["T_CONSTANT_ENCAPSED_STRING","'nullable'",1242],["T_WHITESPACE","  ",1242],["T_DOUBLE_ARROW","=>",1242],["T_WHITESPACE"," ",1242],["T_STRING","false",1242],",",["T_WHITESPACE","\n                    ",1242],["T_CONSTANT_ENCAPSED_STRING","'default'",1243],["T_WHITESPACE","   ",1243],["T_DOUBLE_ARROW","=>",1243],["T_WHITESPACE"," ",1243],["T_CONSTANT_ENCAPSED_STRING","'0'",1243],",",["T_WHITESPACE","\n                ",1243],")",",",["T_WHITESPACE"," ",1244],["T_CONSTANT_ENCAPSED_STRING","'Store Id'",1244],")",["T_WHITESPACE","\n                ",1244],["T_OBJECT_OPERATOR","->",1245],["T_STRING","addColumn",1245],"(",["T_CONSTANT_ENCAPSED_STRING","'created_at'",1245],",",["T_WHITESPACE"," ",1245],["T_STRING","Varien_Db_Ddl_Table",1245],["T_DOUBLE_COLON","::",1245],["T_STRING","TYPE_TIMESTAMP",1245],",",["T_WHITESPACE"," ",1245],["T_STRING","null",1245],",",["T_WHITESPACE"," ",1245],["T_ARRAY","array",1245],"(",["T_WHITESPACE","\n                    ",1245],["T_CONSTANT_ENCAPSED_STRING","'nullable'",1246],["T_WHITESPACE","  ",1246],["T_DOUBLE_ARROW","=>",1246],["T_WHITESPACE"," ",1246],["T_STRING","false",1246],",",["T_WHITESPACE","\n                ",1246],")",",",["T_WHITESPACE"," ",1247],["T_CONSTANT_ENCAPSED_STRING","'Created At'",1247],")",["T_WHITESPACE","\n                ",1247],["T_OBJECT_OPERATOR","->",1248],["T_STRING","addColumn",1248],"(",["T_CONSTANT_ENCAPSED_STRING","'updated_at'",1248],",",["T_WHITESPACE"," ",1248],["T_STRING","Varien_Db_Ddl_Table",1248],["T_DOUBLE_COLON","::",1248],["T_STRING","TYPE_TIMESTAMP",1248],",",["T_WHITESPACE"," ",1248],["T_STRING","null",1248],",",["T_WHITESPACE"," ",1248],["T_ARRAY","array",1248],"(",["T_WHITESPACE","\n                    ",1248],["T_CONSTANT_ENCAPSED_STRING","'nullable'",1249],["T_WHITESPACE","  ",1249],["T_DOUBLE_ARROW","=>",1249],["T_WHITESPACE"," ",1249],["T_STRING","false",1249],",",["T_WHITESPACE","\n                ",1249],")",",",["T_WHITESPACE"," ",1250],["T_CONSTANT_ENCAPSED_STRING","'Updated At'",1250],")",["T_WHITESPACE","\n                ",1250],["T_OBJECT_OPERATOR","->",1251],["T_STRING","addColumn",1251],"(",["T_CONSTANT_ENCAPSED_STRING","'is_active'",1251],",",["T_WHITESPACE"," ",1251],["T_STRING","Varien_Db_Ddl_Table",1251],["T_DOUBLE_COLON","::",1251],["T_STRING","TYPE_SMALLINT",1251],",",["T_WHITESPACE"," ",1251],["T_STRING","null",1251],",",["T_WHITESPACE"," ",1251],["T_ARRAY","array",1251],"(",["T_WHITESPACE","\n                    ",1251],["T_CONSTANT_ENCAPSED_STRING","'unsigned'",1252],["T_WHITESPACE","  ",1252],["T_DOUBLE_ARROW","=>",1252],["T_WHITESPACE"," ",1252],["T_STRING","true",1252],",",["T_WHITESPACE","\n                    ",1252],["T_CONSTANT_ENCAPSED_STRING","'nullable'",1253],["T_WHITESPACE","  ",1253],["T_DOUBLE_ARROW","=>",1253],["T_WHITESPACE"," ",1253],["T_STRING","false",1253],",",["T_WHITESPACE","\n                    ",1253],["T_CONSTANT_ENCAPSED_STRING","'default'",1254],["T_WHITESPACE","   ",1254],["T_DOUBLE_ARROW","=>",1254],["T_WHITESPACE"," ",1254],["T_CONSTANT_ENCAPSED_STRING","'1'",1254],",",["T_WHITESPACE","\n                ",1254],")",",",["T_WHITESPACE"," ",1255],["T_CONSTANT_ENCAPSED_STRING","'Defines Is Entity Active'",1255],")",["T_WHITESPACE","\n                ",1255],["T_OBJECT_OPERATOR","->",1256],["T_STRING","addIndex",1256],"(",["T_VARIABLE","$this",1256],["T_OBJECT_OPERATOR","->",1256],["T_STRING","getIdxName",1256],"(",["T_VARIABLE","$baseTableName",1256],",",["T_WHITESPACE"," ",1256],["T_ARRAY","array",1256],"(",["T_CONSTANT_ENCAPSED_STRING","'entity_type_id'",1256],")",")",",",["T_WHITESPACE","\n                    ",1256],["T_ARRAY","array",1257],"(",["T_CONSTANT_ENCAPSED_STRING","'entity_type_id'",1257],")",")",["T_WHITESPACE","\n                ",1257],["T_OBJECT_OPERATOR","->",1258],["T_STRING","addIndex",1258],"(",["T_VARIABLE","$this",1258],["T_OBJECT_OPERATOR","->",1258],["T_STRING","getIdxName",1258],"(",["T_VARIABLE","$baseTableName",1258],",",["T_WHITESPACE"," ",1258],["T_ARRAY","array",1258],"(",["T_CONSTANT_ENCAPSED_STRING","'store_id'",1258],")",")",",",["T_WHITESPACE","\n                    ",1258],["T_ARRAY","array",1259],"(",["T_CONSTANT_ENCAPSED_STRING","'store_id'",1259],")",")",["T_WHITESPACE","\n                ",1259],["T_OBJECT_OPERATOR","->",1260],["T_STRING","addForeignKey",1260],"(",["T_VARIABLE","$this",1260],["T_OBJECT_OPERATOR","->",1260],["T_STRING","getFkName",1260],"(",["T_VARIABLE","$baseTableName",1260],",",["T_WHITESPACE"," ",1260],["T_CONSTANT_ENCAPSED_STRING","'entity_type_id'",1260],",",["T_WHITESPACE"," ",1260],["T_CONSTANT_ENCAPSED_STRING","'eav\/entity_type'",1260],",",["T_WHITESPACE"," ",1260],["T_CONSTANT_ENCAPSED_STRING","'entity_type_id'",1260],")",",",["T_WHITESPACE","\n                    ",1260],["T_CONSTANT_ENCAPSED_STRING","'entity_type_id'",1261],",",["T_WHITESPACE"," ",1261],["T_VARIABLE","$this",1261],["T_OBJECT_OPERATOR","->",1261],["T_STRING","getTable",1261],"(",["T_CONSTANT_ENCAPSED_STRING","'eav\/entity_type'",1261],")",",",["T_WHITESPACE"," ",1261],["T_CONSTANT_ENCAPSED_STRING","'entity_type_id'",1261],",",["T_WHITESPACE","\n                    ",1261],["T_STRING","Varien_Db_Ddl_Table",1262],["T_DOUBLE_COLON","::",1262],["T_STRING","ACTION_CASCADE",1262],",",["T_WHITESPACE"," ",1262],["T_STRING","Varien_Db_Ddl_Table",1262],["T_DOUBLE_COLON","::",1262],["T_STRING","ACTION_CASCADE",1262],")",["T_WHITESPACE","\n                ",1262],["T_OBJECT_OPERATOR","->",1263],["T_STRING","addForeignKey",1263],"(",["T_VARIABLE","$this",1263],["T_OBJECT_OPERATOR","->",1263],["T_STRING","getFkName",1263],"(",["T_VARIABLE","$baseTableName",1263],",",["T_WHITESPACE"," ",1263],["T_CONSTANT_ENCAPSED_STRING","'store_id'",1263],",",["T_WHITESPACE"," ",1263],["T_CONSTANT_ENCAPSED_STRING","'core\/store'",1263],",",["T_WHITESPACE"," ",1263],["T_CONSTANT_ENCAPSED_STRING","'store_id'",1263],")",",",["T_WHITESPACE","\n                    ",1263],["T_CONSTANT_ENCAPSED_STRING","'store_id'",1264],",",["T_WHITESPACE"," ",1264],["T_VARIABLE","$this",1264],["T_OBJECT_OPERATOR","->",1264],["T_STRING","getTable",1264],"(",["T_CONSTANT_ENCAPSED_STRING","'core\/store'",1264],")",",",["T_WHITESPACE"," ",1264],["T_CONSTANT_ENCAPSED_STRING","'store_id'",1264],",",["T_WHITESPACE","\n                    ",1264],["T_STRING","Varien_Db_Ddl_Table",1265],["T_DOUBLE_COLON","::",1265],["T_STRING","ACTION_CASCADE",1265],",",["T_WHITESPACE"," ",1265],["T_STRING","Varien_Db_Ddl_Table",1265],["T_DOUBLE_COLON","::",1265],["T_STRING","ACTION_CASCADE",1265],")",["T_WHITESPACE","\n                ",1265],["T_OBJECT_OPERATOR","->",1266],["T_STRING","setComment",1266],"(",["T_CONSTANT_ENCAPSED_STRING","'Eav Entity Main Table'",1266],")",";",["T_WHITESPACE","\n\n            ",1266],["T_VARIABLE","$tables",1268],"[",["T_VARIABLE","$this",1268],["T_OBJECT_OPERATOR","->",1268],["T_STRING","getTable",1268],"(",["T_VARIABLE","$baseTableName",1268],")","]",["T_WHITESPACE"," ",1268],"=",["T_WHITESPACE"," ",1268],["T_VARIABLE","$mainTable",1268],";",["T_WHITESPACE","\n        ",1268],"}",["T_WHITESPACE","\n\n        ",1269],["T_VARIABLE","$types",1271],["T_WHITESPACE"," ",1271],"=",["T_WHITESPACE"," ",1271],["T_ARRAY","array",1271],"(",")",";",["T_WHITESPACE","\n        ",1271],["T_IF","if",1272],["T_WHITESPACE"," ",1272],"(","!",["T_VARIABLE","$isNoDefaultTypes",1272],")",["T_WHITESPACE"," ",1272],"{",["T_WHITESPACE","\n            ",1272],["T_VARIABLE","$types",1273],["T_WHITESPACE"," ",1273],"=",["T_WHITESPACE"," ",1273],["T_ARRAY","array",1273],"(",["T_WHITESPACE","\n                ",1273],["T_CONSTANT_ENCAPSED_STRING","'datetime'",1274],["T_WHITESPACE","  ",1274],["T_DOUBLE_ARROW","=>",1274],["T_WHITESPACE"," ",1274],["T_ARRAY","array",1274],"(",["T_STRING","Varien_Db_Ddl_Table",1274],["T_DOUBLE_COLON","::",1274],["T_STRING","TYPE_DATETIME",1274],",",["T_WHITESPACE"," ",1274],["T_STRING","null",1274],")",",",["T_WHITESPACE","\n                ",1274],["T_CONSTANT_ENCAPSED_STRING","'decimal'",1275],["T_WHITESPACE","   ",1275],["T_DOUBLE_ARROW","=>",1275],["T_WHITESPACE"," ",1275],["T_ARRAY","array",1275],"(",["T_STRING","Varien_Db_Ddl_Table",1275],["T_DOUBLE_COLON","::",1275],["T_STRING","TYPE_DECIMAL",1275],",",["T_WHITESPACE"," ",1275],["T_CONSTANT_ENCAPSED_STRING","'12,4'",1275],")",",",["T_WHITESPACE","\n                ",1275],["T_CONSTANT_ENCAPSED_STRING","'int'",1276],["T_WHITESPACE","       ",1276],["T_DOUBLE_ARROW","=>",1276],["T_WHITESPACE"," ",1276],["T_ARRAY","array",1276],"(",["T_STRING","Varien_Db_Ddl_Table",1276],["T_DOUBLE_COLON","::",1276],["T_STRING","TYPE_INTEGER",1276],",",["T_WHITESPACE"," ",1276],["T_STRING","null",1276],")",",",["T_WHITESPACE","\n                ",1276],["T_CONSTANT_ENCAPSED_STRING","'text'",1277],["T_WHITESPACE","      ",1277],["T_DOUBLE_ARROW","=>",1277],["T_WHITESPACE"," ",1277],["T_ARRAY","array",1277],"(",["T_STRING","Varien_Db_Ddl_Table",1277],["T_DOUBLE_COLON","::",1277],["T_STRING","TYPE_TEXT",1277],",",["T_WHITESPACE"," ",1277],["T_CONSTANT_ENCAPSED_STRING","'64k'",1277],")",",",["T_WHITESPACE","\n                ",1277],["T_CONSTANT_ENCAPSED_STRING","'varchar'",1278],["T_WHITESPACE","   ",1278],["T_DOUBLE_ARROW","=>",1278],["T_WHITESPACE"," ",1278],["T_ARRAY","array",1278],"(",["T_STRING","Varien_Db_Ddl_Table",1278],["T_DOUBLE_COLON","::",1278],["T_STRING","TYPE_TEXT",1278],",",["T_WHITESPACE"," ",1278],["T_CONSTANT_ENCAPSED_STRING","'255'",1278],")",",",["T_WHITESPACE","\n                ",1278],["T_CONSTANT_ENCAPSED_STRING","'char'",1279],["T_WHITESPACE","   ",1279],["T_DOUBLE_ARROW","=>",1279],["T_WHITESPACE"," ",1279],["T_ARRAY","array",1279],"(",["T_STRING","Varien_Db_Ddl_Table",1279],["T_DOUBLE_COLON","::",1279],["T_STRING","TYPE_TEXT",1279],",",["T_WHITESPACE"," ",1279],["T_CONSTANT_ENCAPSED_STRING","'255'",1279],")",["T_WHITESPACE","\n            ",1279],")",";",["T_WHITESPACE","\n        ",1280],"}",["T_WHITESPACE","\n\n        ",1281],["T_IF","if",1283],["T_WHITESPACE"," ",1283],"(","!",["T_EMPTY","empty",1283],"(",["T_VARIABLE","$customTypes",1283],")",")",["T_WHITESPACE"," ",1283],"{",["T_WHITESPACE","\n            ",1283],["T_FOREACH","foreach",1284],["T_WHITESPACE"," ",1284],"(",["T_VARIABLE","$customTypes",1284],["T_WHITESPACE"," ",1284],["T_AS","as",1284],["T_WHITESPACE"," ",1284],["T_VARIABLE","$type",1284],["T_WHITESPACE"," ",1284],["T_DOUBLE_ARROW","=>",1284],["T_WHITESPACE"," ",1284],["T_VARIABLE","$fieldType",1284],")",["T_WHITESPACE"," ",1284],"{",["T_WHITESPACE","\n                ",1284],["T_IF","if",1285],["T_WHITESPACE"," ",1285],"(",["T_STRING","count",1285],"(",["T_VARIABLE","$fieldType",1285],")",["T_WHITESPACE"," ",1285],["T_IS_NOT_EQUAL","!=",1285],["T_WHITESPACE"," ",1285],["T_LNUMBER","2",1285],")",["T_WHITESPACE"," ",1285],"{",["T_WHITESPACE","\n                    ",1285],["T_THROW","throw",1286],["T_WHITESPACE"," ",1286],["T_STRING","Mage",1286],["T_DOUBLE_COLON","::",1286],["T_STRING","exception",1286],"(",["T_CONSTANT_ENCAPSED_STRING","'Mage_Eav'",1286],",",["T_WHITESPACE"," ",1286],["T_STRING","Mage",1286],["T_DOUBLE_COLON","::",1286],["T_STRING","helper",1286],"(",["T_CONSTANT_ENCAPSED_STRING","'eav'",1286],")",["T_OBJECT_OPERATOR","->",1286],["T_STRING","__",1286],"(",["T_CONSTANT_ENCAPSED_STRING","'Wrong type definition for %s'",1286],",",["T_WHITESPACE"," ",1286],["T_VARIABLE","$type",1286],")",")",";",["T_WHITESPACE","\n                ",1286],"}",["T_WHITESPACE","\n                ",1287],["T_VARIABLE","$types",1288],"[",["T_VARIABLE","$type",1288],"]",["T_WHITESPACE"," ",1288],"=",["T_WHITESPACE"," ",1288],["T_VARIABLE","$fieldType",1288],";",["T_WHITESPACE","\n            ",1288],"}",["T_WHITESPACE","\n        ",1289],"}",["T_WHITESPACE","\n\n        ",1290],["T_DOC_COMMENT","\/**\n         * Create table array($baseTableName, $type)\n         *\/",1292],["T_WHITESPACE","\n        ",1294],["T_FOREACH","foreach",1295],["T_WHITESPACE"," ",1295],"(",["T_VARIABLE","$types",1295],["T_WHITESPACE"," ",1295],["T_AS","as",1295],["T_WHITESPACE"," ",1295],["T_VARIABLE","$type",1295],["T_WHITESPACE"," ",1295],["T_DOUBLE_ARROW","=>",1295],["T_WHITESPACE"," ",1295],["T_VARIABLE","$fieldType",1295],")",["T_WHITESPACE"," ",1295],"{",["T_WHITESPACE","\n            ",1295],["T_VARIABLE","$eavTableName",1296],["T_WHITESPACE"," ",1296],"=",["T_WHITESPACE"," ",1296],["T_ARRAY","array",1296],"(",["T_VARIABLE","$baseTableName",1296],",",["T_WHITESPACE"," ",1296],["T_VARIABLE","$type",1296],")",";",["T_WHITESPACE","\n\n            ",1296],["T_VARIABLE","$eavTable",1298],["T_WHITESPACE"," ",1298],"=",["T_WHITESPACE"," ",1298],["T_VARIABLE","$connection",1298],["T_OBJECT_OPERATOR","->",1298],["T_STRING","newTable",1298],"(",["T_VARIABLE","$this",1298],["T_OBJECT_OPERATOR","->",1298],["T_STRING","getTable",1298],"(",["T_VARIABLE","$eavTableName",1298],")",")",";",["T_WHITESPACE","\n            ",1298],["T_VARIABLE","$eavTable",1299],["T_WHITESPACE","\n                ",1299],["T_OBJECT_OPERATOR","->",1300],["T_STRING","addColumn",1300],"(",["T_CONSTANT_ENCAPSED_STRING","'value_id'",1300],",",["T_WHITESPACE"," ",1300],["T_STRING","Varien_Db_Ddl_Table",1300],["T_DOUBLE_COLON","::",1300],["T_STRING","TYPE_INTEGER",1300],",",["T_WHITESPACE"," ",1300],["T_STRING","null",1300],",",["T_WHITESPACE"," ",1300],["T_ARRAY","array",1300],"(",["T_WHITESPACE","\n                    ",1300],["T_CONSTANT_ENCAPSED_STRING","'identity'",1301],["T_WHITESPACE","  ",1301],["T_DOUBLE_ARROW","=>",1301],["T_WHITESPACE"," ",1301],["T_STRING","true",1301],",",["T_WHITESPACE","\n                    ",1301],["T_CONSTANT_ENCAPSED_STRING","'nullable'",1302],["T_WHITESPACE","  ",1302],["T_DOUBLE_ARROW","=>",1302],["T_WHITESPACE"," ",1302],["T_STRING","false",1302],",",["T_WHITESPACE","\n                    ",1302],["T_CONSTANT_ENCAPSED_STRING","'primary'",1303],["T_WHITESPACE","   ",1303],["T_DOUBLE_ARROW","=>",1303],["T_WHITESPACE"," ",1303],["T_STRING","true",1303],",",["T_WHITESPACE","\n                    ",1303],["T_CONSTANT_ENCAPSED_STRING","'unsigned'",1304],["T_WHITESPACE","  ",1304],["T_DOUBLE_ARROW","=>",1304],["T_WHITESPACE"," ",1304],["T_STRING","true",1304],",",["T_WHITESPACE","\n                    ",1304],")",",",["T_WHITESPACE"," ",1305],["T_CONSTANT_ENCAPSED_STRING","'Value Id'",1305],")",["T_WHITESPACE","\n                ",1305],["T_OBJECT_OPERATOR","->",1306],["T_STRING","addColumn",1306],"(",["T_CONSTANT_ENCAPSED_STRING","'entity_type_id'",1306],",",["T_WHITESPACE"," ",1306],["T_STRING","Varien_Db_Ddl_Table",1306],["T_DOUBLE_COLON","::",1306],["T_STRING","TYPE_SMALLINT",1306],",",["T_WHITESPACE"," ",1306],["T_STRING","null",1306],",",["T_WHITESPACE"," ",1306],["T_ARRAY","array",1306],"(",["T_WHITESPACE","\n                    ",1306],["T_CONSTANT_ENCAPSED_STRING","'unsigned'",1307],["T_WHITESPACE","  ",1307],["T_DOUBLE_ARROW","=>",1307],["T_WHITESPACE"," ",1307],["T_STRING","true",1307],",",["T_WHITESPACE","\n                    ",1307],["T_CONSTANT_ENCAPSED_STRING","'nullable'",1308],["T_WHITESPACE","  ",1308],["T_DOUBLE_ARROW","=>",1308],["T_WHITESPACE"," ",1308],["T_STRING","false",1308],",",["T_WHITESPACE","\n                    ",1308],["T_CONSTANT_ENCAPSED_STRING","'default'",1309],["T_WHITESPACE","   ",1309],["T_DOUBLE_ARROW","=>",1309],["T_WHITESPACE"," ",1309],["T_CONSTANT_ENCAPSED_STRING","'0'",1309],",",["T_WHITESPACE","\n                    ",1309],")",",",["T_WHITESPACE"," ",1310],["T_CONSTANT_ENCAPSED_STRING","'Entity Type Id'",1310],")",["T_WHITESPACE","\n                ",1310],["T_OBJECT_OPERATOR","->",1311],["T_STRING","addColumn",1311],"(",["T_CONSTANT_ENCAPSED_STRING","'attribute_id'",1311],",",["T_WHITESPACE"," ",1311],["T_STRING","Varien_Db_Ddl_Table",1311],["T_DOUBLE_COLON","::",1311],["T_STRING","TYPE_SMALLINT",1311],",",["T_WHITESPACE"," ",1311],["T_STRING","null",1311],",",["T_WHITESPACE"," ",1311],["T_ARRAY","array",1311],"(",["T_WHITESPACE","\n                    ",1311],["T_CONSTANT_ENCAPSED_STRING","'unsigned'",1312],["T_WHITESPACE","  ",1312],["T_DOUBLE_ARROW","=>",1312],["T_WHITESPACE"," ",1312],["T_STRING","true",1312],",",["T_WHITESPACE","\n                    ",1312],["T_CONSTANT_ENCAPSED_STRING","'nullable'",1313],["T_WHITESPACE","  ",1313],["T_DOUBLE_ARROW","=>",1313],["T_WHITESPACE"," ",1313],["T_STRING","false",1313],",",["T_WHITESPACE","\n                    ",1313],["T_CONSTANT_ENCAPSED_STRING","'default'",1314],["T_WHITESPACE","   ",1314],["T_DOUBLE_ARROW","=>",1314],["T_WHITESPACE"," ",1314],["T_CONSTANT_ENCAPSED_STRING","'0'",1314],",",["T_WHITESPACE","\n                    ",1314],")",",",["T_WHITESPACE"," ",1315],["T_CONSTANT_ENCAPSED_STRING","'Attribute Id'",1315],")",["T_WHITESPACE","\n                ",1315],["T_OBJECT_OPERATOR","->",1316],["T_STRING","addColumn",1316],"(",["T_CONSTANT_ENCAPSED_STRING","'store_id'",1316],",",["T_WHITESPACE"," ",1316],["T_STRING","Varien_Db_Ddl_Table",1316],["T_DOUBLE_COLON","::",1316],["T_STRING","TYPE_SMALLINT",1316],",",["T_WHITESPACE"," ",1316],["T_STRING","null",1316],",",["T_WHITESPACE"," ",1316],["T_ARRAY","array",1316],"(",["T_WHITESPACE","\n                    ",1316],["T_CONSTANT_ENCAPSED_STRING","'unsigned'",1317],["T_WHITESPACE","  ",1317],["T_DOUBLE_ARROW","=>",1317],["T_WHITESPACE"," ",1317],["T_STRING","true",1317],",",["T_WHITESPACE","\n                    ",1317],["T_CONSTANT_ENCAPSED_STRING","'nullable'",1318],["T_WHITESPACE","  ",1318],["T_DOUBLE_ARROW","=>",1318],["T_WHITESPACE"," ",1318],["T_STRING","false",1318],",",["T_WHITESPACE","\n                    ",1318],["T_CONSTANT_ENCAPSED_STRING","'default'",1319],["T_WHITESPACE","   ",1319],["T_DOUBLE_ARROW","=>",1319],["T_WHITESPACE"," ",1319],["T_CONSTANT_ENCAPSED_STRING","'0'",1319],",",["T_WHITESPACE","\n                    ",1319],")",",",["T_WHITESPACE"," ",1320],["T_CONSTANT_ENCAPSED_STRING","'Store Id'",1320],")",["T_WHITESPACE","\n                ",1320],["T_OBJECT_OPERATOR","->",1321],["T_STRING","addColumn",1321],"(",["T_CONSTANT_ENCAPSED_STRING","'entity_id'",1321],",",["T_WHITESPACE"," ",1321],["T_STRING","Varien_Db_Ddl_Table",1321],["T_DOUBLE_COLON","::",1321],["T_STRING","TYPE_INTEGER",1321],",",["T_WHITESPACE"," ",1321],["T_STRING","null",1321],",",["T_WHITESPACE"," ",1321],["T_ARRAY","array",1321],"(",["T_WHITESPACE","\n                    ",1321],["T_CONSTANT_ENCAPSED_STRING","'unsigned'",1322],["T_WHITESPACE","  ",1322],["T_DOUBLE_ARROW","=>",1322],["T_WHITESPACE"," ",1322],["T_STRING","true",1322],",",["T_WHITESPACE","\n                    ",1322],["T_CONSTANT_ENCAPSED_STRING","'nullable'",1323],["T_WHITESPACE","  ",1323],["T_DOUBLE_ARROW","=>",1323],["T_WHITESPACE"," ",1323],["T_STRING","false",1323],",",["T_WHITESPACE","\n                    ",1323],["T_CONSTANT_ENCAPSED_STRING","'default'",1324],["T_WHITESPACE","   ",1324],["T_DOUBLE_ARROW","=>",1324],["T_WHITESPACE"," ",1324],["T_CONSTANT_ENCAPSED_STRING","'0'",1324],",",["T_WHITESPACE","\n                    ",1324],")",",",["T_WHITESPACE"," ",1325],["T_CONSTANT_ENCAPSED_STRING","'Entity Id'",1325],")",["T_WHITESPACE","\n                ",1325],["T_OBJECT_OPERATOR","->",1326],["T_STRING","addColumn",1326],"(",["T_CONSTANT_ENCAPSED_STRING","'value'",1326],",",["T_WHITESPACE"," ",1326],["T_VARIABLE","$fieldType",1326],"[",["T_LNUMBER","0",1326],"]",",",["T_WHITESPACE"," ",1326],["T_VARIABLE","$fieldType",1326],"[",["T_LNUMBER","1",1326],"]",",",["T_WHITESPACE"," ",1326],["T_ARRAY","array",1326],"(",["T_WHITESPACE","\n                    ",1326],["T_CONSTANT_ENCAPSED_STRING","'nullable'",1327],["T_WHITESPACE","  ",1327],["T_DOUBLE_ARROW","=>",1327],["T_WHITESPACE"," ",1327],["T_STRING","false",1327],",",["T_WHITESPACE","\n                    ",1327],")",",",["T_WHITESPACE"," ",1328],["T_CONSTANT_ENCAPSED_STRING","'Attribute Value'",1328],")",["T_WHITESPACE","\n                ",1328],["T_OBJECT_OPERATOR","->",1329],["T_STRING","addIndex",1329],"(",["T_VARIABLE","$this",1329],["T_OBJECT_OPERATOR","->",1329],["T_STRING","getIdxName",1329],"(",["T_VARIABLE","$eavTableName",1329],",",["T_WHITESPACE"," ",1329],["T_ARRAY","array",1329],"(",["T_CONSTANT_ENCAPSED_STRING","'entity_type_id'",1329],")",")",",",["T_WHITESPACE","\n                    ",1329],["T_ARRAY","array",1330],"(",["T_CONSTANT_ENCAPSED_STRING","'entity_type_id'",1330],")",")",["T_WHITESPACE","\n                ",1330],["T_OBJECT_OPERATOR","->",1331],["T_STRING","addIndex",1331],"(",["T_VARIABLE","$this",1331],["T_OBJECT_OPERATOR","->",1331],["T_STRING","getIdxName",1331],"(",["T_VARIABLE","$eavTableName",1331],",",["T_WHITESPACE"," ",1331],["T_ARRAY","array",1331],"(",["T_CONSTANT_ENCAPSED_STRING","'attribute_id'",1331],")",")",",",["T_WHITESPACE","\n                    ",1331],["T_ARRAY","array",1332],"(",["T_CONSTANT_ENCAPSED_STRING","'attribute_id'",1332],")",")",["T_WHITESPACE","\n                ",1332],["T_OBJECT_OPERATOR","->",1333],["T_STRING","addIndex",1333],"(",["T_VARIABLE","$this",1333],["T_OBJECT_OPERATOR","->",1333],["T_STRING","getIdxName",1333],"(",["T_VARIABLE","$eavTableName",1333],",",["T_WHITESPACE"," ",1333],["T_ARRAY","array",1333],"(",["T_CONSTANT_ENCAPSED_STRING","'store_id'",1333],")",")",",",["T_WHITESPACE","\n                    ",1333],["T_ARRAY","array",1334],"(",["T_CONSTANT_ENCAPSED_STRING","'store_id'",1334],")",")",["T_WHITESPACE","\n                ",1334],["T_OBJECT_OPERATOR","->",1335],["T_STRING","addIndex",1335],"(",["T_VARIABLE","$this",1335],["T_OBJECT_OPERATOR","->",1335],["T_STRING","getIdxName",1335],"(",["T_VARIABLE","$eavTableName",1335],",",["T_WHITESPACE"," ",1335],["T_ARRAY","array",1335],"(",["T_CONSTANT_ENCAPSED_STRING","'entity_id'",1335],")",")",",",["T_WHITESPACE","\n                    ",1335],["T_ARRAY","array",1336],"(",["T_CONSTANT_ENCAPSED_STRING","'entity_id'",1336],")",")",";",["T_WHITESPACE","\n            ",1336],["T_IF","if",1337],["T_WHITESPACE"," ",1337],"(",["T_VARIABLE","$type",1337],["T_WHITESPACE"," ",1337],["T_IS_NOT_IDENTICAL","!==",1337],["T_WHITESPACE"," ",1337],["T_CONSTANT_ENCAPSED_STRING","'text'",1337],")",["T_WHITESPACE"," ",1337],"{",["T_WHITESPACE","\n                ",1337],["T_VARIABLE","$eavTable",1338],["T_OBJECT_OPERATOR","->",1338],["T_STRING","addIndex",1338],"(",["T_VARIABLE","$this",1338],["T_OBJECT_OPERATOR","->",1338],["T_STRING","getIdxName",1338],"(",["T_VARIABLE","$eavTableName",1338],",",["T_WHITESPACE"," ",1338],["T_ARRAY","array",1338],"(",["T_CONSTANT_ENCAPSED_STRING","'attribute_id'",1338],",",["T_WHITESPACE"," ",1338],["T_CONSTANT_ENCAPSED_STRING","'value'",1338],")",")",",",["T_WHITESPACE","\n                    ",1338],["T_ARRAY","array",1339],"(",["T_CONSTANT_ENCAPSED_STRING","'attribute_id'",1339],",",["T_WHITESPACE"," ",1339],["T_CONSTANT_ENCAPSED_STRING","'value'",1339],")",")",";",["T_WHITESPACE","\n                ",1339],["T_VARIABLE","$eavTable",1340],["T_OBJECT_OPERATOR","->",1340],["T_STRING","addIndex",1340],"(",["T_VARIABLE","$this",1340],["T_OBJECT_OPERATOR","->",1340],["T_STRING","getIdxName",1340],"(",["T_VARIABLE","$eavTableName",1340],",",["T_WHITESPACE"," ",1340],["T_ARRAY","array",1340],"(",["T_CONSTANT_ENCAPSED_STRING","'entity_type_id'",1340],",",["T_WHITESPACE"," ",1340],["T_CONSTANT_ENCAPSED_STRING","'value'",1340],")",")",",",["T_WHITESPACE","\n                    ",1340],["T_ARRAY","array",1341],"(",["T_CONSTANT_ENCAPSED_STRING","'entity_type_id'",1341],",",["T_WHITESPACE"," ",1341],["T_CONSTANT_ENCAPSED_STRING","'value'",1341],")",")",";",["T_WHITESPACE","\n            ",1341],"}",["T_WHITESPACE","\n\n            ",1342],["T_VARIABLE","$eavTable",1344],["T_WHITESPACE","\n                ",1344],["T_OBJECT_OPERATOR","->",1345],["T_STRING","addForeignKey",1345],"(",["T_VARIABLE","$this",1345],["T_OBJECT_OPERATOR","->",1345],["T_STRING","getFkName",1345],"(",["T_VARIABLE","$eavTableName",1345],",",["T_WHITESPACE"," ",1345],["T_CONSTANT_ENCAPSED_STRING","'entity_id'",1345],",",["T_WHITESPACE"," ",1345],["T_VARIABLE","$baseTableName",1345],",",["T_WHITESPACE"," ",1345],["T_CONSTANT_ENCAPSED_STRING","'entity_id'",1345],")",",",["T_WHITESPACE","\n                    ",1345],["T_CONSTANT_ENCAPSED_STRING","'entity_id'",1346],",",["T_WHITESPACE"," ",1346],["T_VARIABLE","$this",1346],["T_OBJECT_OPERATOR","->",1346],["T_STRING","getTable",1346],"(",["T_VARIABLE","$baseTableName",1346],")",",",["T_WHITESPACE"," ",1346],["T_CONSTANT_ENCAPSED_STRING","'entity_id'",1346],",",["T_WHITESPACE","\n                    ",1346],["T_STRING","Varien_Db_Ddl_Table",1347],["T_DOUBLE_COLON","::",1347],["T_STRING","ACTION_CASCADE",1347],",",["T_WHITESPACE"," ",1347],["T_STRING","Varien_Db_Ddl_Table",1347],["T_DOUBLE_COLON","::",1347],["T_STRING","ACTION_CASCADE",1347],")",["T_WHITESPACE","\n                ",1347],["T_OBJECT_OPERATOR","->",1348],["T_STRING","addForeignKey",1348],"(",["T_VARIABLE","$this",1348],["T_OBJECT_OPERATOR","->",1348],["T_STRING","getFkName",1348],"(",["T_VARIABLE","$eavTableName",1348],",",["T_WHITESPACE"," ",1348],["T_CONSTANT_ENCAPSED_STRING","'entity_type_id'",1348],",",["T_WHITESPACE"," ",1348],["T_CONSTANT_ENCAPSED_STRING","'eav\/entity_type'",1348],",",["T_WHITESPACE"," ",1348],["T_CONSTANT_ENCAPSED_STRING","'entity_type_id'",1348],")",",",["T_WHITESPACE","\n                    ",1348],["T_CONSTANT_ENCAPSED_STRING","'entity_type_id'",1349],",",["T_WHITESPACE"," ",1349],["T_VARIABLE","$this",1349],["T_OBJECT_OPERATOR","->",1349],["T_STRING","getTable",1349],"(",["T_CONSTANT_ENCAPSED_STRING","'eav\/entity_type'",1349],")",",",["T_WHITESPACE"," ",1349],["T_CONSTANT_ENCAPSED_STRING","'entity_type_id'",1349],",",["T_WHITESPACE","\n                    ",1349],["T_STRING","Varien_Db_Ddl_Table",1350],["T_DOUBLE_COLON","::",1350],["T_STRING","ACTION_CASCADE",1350],",",["T_WHITESPACE"," ",1350],["T_STRING","Varien_Db_Ddl_Table",1350],["T_DOUBLE_COLON","::",1350],["T_STRING","ACTION_CASCADE",1350],")",["T_WHITESPACE","\n                ",1350],["T_OBJECT_OPERATOR","->",1351],["T_STRING","addForeignKey",1351],"(",["T_VARIABLE","$this",1351],["T_OBJECT_OPERATOR","->",1351],["T_STRING","getFkName",1351],"(",["T_VARIABLE","$eavTableName",1351],",",["T_WHITESPACE"," ",1351],["T_CONSTANT_ENCAPSED_STRING","'store_id'",1351],",",["T_WHITESPACE"," ",1351],["T_CONSTANT_ENCAPSED_STRING","'core\/store'",1351],",",["T_WHITESPACE"," ",1351],["T_CONSTANT_ENCAPSED_STRING","'store_id'",1351],")",",",["T_WHITESPACE","\n                    ",1351],["T_CONSTANT_ENCAPSED_STRING","'store_id'",1352],",",["T_WHITESPACE"," ",1352],["T_VARIABLE","$this",1352],["T_OBJECT_OPERATOR","->",1352],["T_STRING","getTable",1352],"(",["T_CONSTANT_ENCAPSED_STRING","'core\/store'",1352],")",",",["T_WHITESPACE"," ",1352],["T_CONSTANT_ENCAPSED_STRING","'store_id'",1352],",",["T_WHITESPACE","\n                    ",1352],["T_STRING","Varien_Db_Ddl_Table",1353],["T_DOUBLE_COLON","::",1353],["T_STRING","ACTION_CASCADE",1353],",",["T_WHITESPACE"," ",1353],["T_STRING","Varien_Db_Ddl_Table",1353],["T_DOUBLE_COLON","::",1353],["T_STRING","ACTION_CASCADE",1353],")",["T_WHITESPACE","\n                ",1353],["T_OBJECT_OPERATOR","->",1354],["T_STRING","setComment",1354],"(",["T_CONSTANT_ENCAPSED_STRING","'Eav Entity Value Table'",1354],")",";",["T_WHITESPACE","\n\n            ",1354],["T_VARIABLE","$tables",1356],"[",["T_VARIABLE","$this",1356],["T_OBJECT_OPERATOR","->",1356],["T_STRING","getTable",1356],"(",["T_VARIABLE","$eavTableName",1356],")","]",["T_WHITESPACE"," ",1356],"=",["T_WHITESPACE"," ",1356],["T_VARIABLE","$eavTable",1356],";",["T_WHITESPACE","\n        ",1356],"}",["T_WHITESPACE","\n\n        ",1357],["T_COMMENT","\/\/ DDL operations are forbidden within transactions\n",1359],["T_WHITESPACE","        ",1360],["T_COMMENT","\/\/ See Varien_Db_Adapter_Pdo_Mysql::_checkDdlTransaction()\n",1360],["T_WHITESPACE","        ",1361],["T_TRY","try",1361],["T_WHITESPACE"," ",1361],"{",["T_WHITESPACE","\n            ",1361],["T_FOREACH","foreach",1362],["T_WHITESPACE"," ",1362],"(",["T_VARIABLE","$tables",1362],["T_WHITESPACE"," ",1362],["T_AS","as",1362],["T_WHITESPACE"," ",1362],["T_VARIABLE","$tableName",1362],["T_WHITESPACE"," ",1362],["T_DOUBLE_ARROW","=>",1362],["T_WHITESPACE"," ",1362],["T_VARIABLE","$table",1362],")",["T_WHITESPACE"," ",1362],"{",["T_WHITESPACE","\n                ",1362],["T_VARIABLE","$connection",1363],["T_OBJECT_OPERATOR","->",1363],["T_STRING","createTable",1363],"(",["T_VARIABLE","$table",1363],")",";",["T_WHITESPACE","\n            ",1363],"}",["T_WHITESPACE","\n        ",1364],"}",["T_WHITESPACE"," ",1365],["T_CATCH","catch",1365],["T_WHITESPACE"," ",1365],"(",["T_STRING","Exception",1365],["T_WHITESPACE"," ",1365],["T_VARIABLE","$e",1365],")",["T_WHITESPACE"," ",1365],"{",["T_WHITESPACE","\n           ",1365],["T_THROW","throw",1366],["T_WHITESPACE"," ",1366],["T_STRING","Mage",1366],["T_DOUBLE_COLON","::",1366],["T_STRING","exception",1366],"(",["T_CONSTANT_ENCAPSED_STRING","'Mage_Eav'",1366],",",["T_WHITESPACE"," ",1366],["T_STRING","Mage",1366],["T_DOUBLE_COLON","::",1366],["T_STRING","helper",1366],"(",["T_CONSTANT_ENCAPSED_STRING","'eav'",1366],")",["T_OBJECT_OPERATOR","->",1366],["T_STRING","__",1366],"(",["T_CONSTANT_ENCAPSED_STRING","'Can\\'t create table: %s'",1366],",",["T_WHITESPACE"," ",1366],["T_VARIABLE","$tableName",1366],")",")",";",["T_WHITESPACE","\n        ",1366],"}",["T_WHITESPACE","\n\n        ",1367],["T_RETURN","return",1369],["T_WHITESPACE"," ",1369],["T_VARIABLE","$this",1369],";",["T_WHITESPACE","\n    ",1369],"}",["T_WHITESPACE","\n\n    ",1370],["T_DOC_COMMENT","\/**\n     * Retrieve attribute table fields\n     *\n     * @return array\n     *\/",1372],["T_WHITESPACE","\n    ",1376],["T_PROTECTED","protected",1377],["T_WHITESPACE"," ",1377],["T_FUNCTION","function",1377],["T_WHITESPACE"," ",1377],["T_STRING","_getAttributeTableFields",1377],"(",")",["T_WHITESPACE","\n    ",1377],"{",["T_WHITESPACE","\n        ",1378],["T_RETURN","return",1379],["T_WHITESPACE"," ",1379],["T_VARIABLE","$this",1379],["T_OBJECT_OPERATOR","->",1379],["T_STRING","getConnection",1379],"(",")",["T_OBJECT_OPERATOR","->",1379],["T_STRING","describeTable",1379],"(",["T_VARIABLE","$this",1379],["T_OBJECT_OPERATOR","->",1379],["T_STRING","getTable",1379],"(",["T_CONSTANT_ENCAPSED_STRING","'eav\/attribute'",1379],")",")",";",["T_WHITESPACE","\n    ",1379],"}",["T_WHITESPACE","\n\n    ",1380],["T_DOC_COMMENT","\/**\n     * Insert attribute and filter data\n     *\n     * @param array $data\n     * @return Mage_Eav_Model_Entity_Setup\n     *\/",1382],["T_WHITESPACE","\n    ",1387],["T_PROTECTED","protected",1388],["T_WHITESPACE"," ",1388],["T_FUNCTION","function",1388],["T_WHITESPACE"," ",1388],["T_STRING","_insertAttribute",1388],"(",["T_ARRAY","array",1388],["T_WHITESPACE"," ",1388],["T_VARIABLE","$data",1388],")",["T_WHITESPACE","\n    ",1388],"{",["T_WHITESPACE","\n        ",1389],["T_VARIABLE","$bind",1390],["T_WHITESPACE","   ",1390],"=",["T_WHITESPACE"," ",1390],["T_ARRAY","array",1390],"(",")",";",["T_WHITESPACE","\n\n        ",1390],["T_VARIABLE","$fields",1392],["T_WHITESPACE"," ",1392],"=",["T_WHITESPACE"," ",1392],["T_VARIABLE","$this",1392],["T_OBJECT_OPERATOR","->",1392],["T_STRING","_getAttributeTableFields",1392],"(",")",";",["T_WHITESPACE","\n\n        ",1392],["T_FOREACH","foreach",1394],["T_WHITESPACE"," ",1394],"(",["T_VARIABLE","$data",1394],["T_WHITESPACE"," ",1394],["T_AS","as",1394],["T_WHITESPACE"," ",1394],["T_VARIABLE","$k",1394],["T_WHITESPACE"," ",1394],["T_DOUBLE_ARROW","=>",1394],["T_WHITESPACE"," ",1394],["T_VARIABLE","$v",1394],")",["T_WHITESPACE"," ",1394],"{",["T_WHITESPACE","\n            ",1394],["T_IF","if",1395],["T_WHITESPACE"," ",1395],"(",["T_ISSET","isset",1395],"(",["T_VARIABLE","$fields",1395],"[",["T_VARIABLE","$k",1395],"]",")",")",["T_WHITESPACE"," ",1395],"{",["T_WHITESPACE","\n                ",1395],["T_VARIABLE","$bind",1396],"[",["T_VARIABLE","$k",1396],"]",["T_WHITESPACE"," ",1396],"=",["T_WHITESPACE"," ",1396],["T_VARIABLE","$this",1396],["T_OBJECT_OPERATOR","->",1396],["T_STRING","getConnection",1396],"(",")",["T_OBJECT_OPERATOR","->",1396],["T_STRING","prepareColumnValue",1396],"(",["T_VARIABLE","$fields",1396],"[",["T_VARIABLE","$k",1396],"]",",",["T_WHITESPACE"," ",1396],["T_VARIABLE","$v",1396],")",";",["T_WHITESPACE","\n            ",1396],"}",["T_WHITESPACE","\n        ",1397],"}",["T_WHITESPACE","\n        ",1398],["T_IF","if",1399],["T_WHITESPACE"," ",1399],"(","!",["T_VARIABLE","$bind",1399],")",["T_WHITESPACE"," ",1399],"{",["T_WHITESPACE","\n            ",1399],["T_RETURN","return",1400],["T_WHITESPACE"," ",1400],["T_VARIABLE","$this",1400],";",["T_WHITESPACE","\n        ",1400],"}",["T_WHITESPACE","\n\n        ",1401],["T_VARIABLE","$this",1403],["T_OBJECT_OPERATOR","->",1403],["T_STRING","getConnection",1403],"(",")",["T_OBJECT_OPERATOR","->",1403],["T_STRING","insert",1403],"(",["T_VARIABLE","$this",1403],["T_OBJECT_OPERATOR","->",1403],["T_STRING","getTable",1403],"(",["T_CONSTANT_ENCAPSED_STRING","'eav\/attribute'",1403],")",",",["T_WHITESPACE"," ",1403],["T_VARIABLE","$bind",1403],")",";",["T_WHITESPACE","\n        ",1403],["T_VARIABLE","$attributeId",1404],["T_WHITESPACE"," ",1404],"=",["T_WHITESPACE"," ",1404],["T_VARIABLE","$this",1404],["T_OBJECT_OPERATOR","->",1404],["T_STRING","getConnection",1404],"(",")",["T_OBJECT_OPERATOR","->",1404],["T_STRING","lastInsertId",1404],"(",["T_VARIABLE","$this",1404],["T_OBJECT_OPERATOR","->",1404],["T_STRING","getTable",1404],"(",["T_CONSTANT_ENCAPSED_STRING","'eav\/attribute'",1404],")",")",";",["T_WHITESPACE","\n        ",1404],["T_VARIABLE","$this",1405],["T_OBJECT_OPERATOR","->",1405],["T_STRING","_insertAttributeAdditionalData",1405],"(",["T_WHITESPACE","\n            ",1405],["T_VARIABLE","$data",1406],"[",["T_CONSTANT_ENCAPSED_STRING","'entity_type_id'",1406],"]",",",["T_WHITESPACE","\n            ",1406],["T_STRING","array_merge",1407],"(",["T_ARRAY","array",1407],"(",["T_CONSTANT_ENCAPSED_STRING","'attribute_id'",1407],["T_WHITESPACE"," ",1407],["T_DOUBLE_ARROW","=>",1407],["T_WHITESPACE"," ",1407],["T_VARIABLE","$attributeId",1407],")",",",["T_WHITESPACE"," ",1407],["T_VARIABLE","$data",1407],")",["T_WHITESPACE","\n        ",1407],")",";",["T_WHITESPACE","\n\n        ",1408],["T_RETURN","return",1410],["T_WHITESPACE"," ",1410],["T_VARIABLE","$this",1410],";",["T_WHITESPACE","\n    ",1410],"}",["T_WHITESPACE","\n\n    ",1411],["T_DOC_COMMENT","\/**\n     * Insert attribute additional data\n     *\n     * @param int $entityTypeId\n     * @param array $data\n     * @return Mage_Eav_Model_Entity_Setup\n     *\/",1413],["T_WHITESPACE","\n    ",1419],["T_PROTECTED","protected",1420],["T_WHITESPACE"," ",1420],["T_FUNCTION","function",1420],["T_WHITESPACE"," ",1420],["T_STRING","_insertAttributeAdditionalData",1420],"(",["T_VARIABLE","$entityTypeId",1420],",",["T_WHITESPACE"," ",1420],["T_ARRAY","array",1420],["T_WHITESPACE"," ",1420],["T_VARIABLE","$data",1420],")",["T_WHITESPACE","\n    ",1420],"{",["T_WHITESPACE","\n        ",1421],["T_VARIABLE","$additionalTable",1422],["T_WHITESPACE"," ",1422],"=",["T_WHITESPACE"," ",1422],["T_VARIABLE","$this",1422],["T_OBJECT_OPERATOR","->",1422],["T_STRING","getEntityType",1422],"(",["T_VARIABLE","$entityTypeId",1422],",",["T_WHITESPACE"," ",1422],["T_CONSTANT_ENCAPSED_STRING","'additional_attribute_table'",1422],")",";",["T_WHITESPACE","\n        ",1422],["T_IF","if",1423],["T_WHITESPACE"," ",1423],"(","!",["T_VARIABLE","$additionalTable",1423],")",["T_WHITESPACE"," ",1423],"{",["T_WHITESPACE","\n            ",1423],["T_RETURN","return",1424],["T_WHITESPACE"," ",1424],["T_VARIABLE","$this",1424],";",["T_WHITESPACE","\n        ",1424],"}",["T_WHITESPACE","\n        ",1425],["T_VARIABLE","$additionalTableExists",1426],["T_WHITESPACE"," ",1426],"=",["T_WHITESPACE"," ",1426],["T_VARIABLE","$this",1426],["T_OBJECT_OPERATOR","->",1426],["T_STRING","getConnection",1426],"(",")",["T_OBJECT_OPERATOR","->",1426],["T_STRING","isTableExists",1426],"(",["T_VARIABLE","$this",1426],["T_OBJECT_OPERATOR","->",1426],["T_STRING","getTable",1426],"(",["T_VARIABLE","$additionalTable",1426],")",")",";",["T_WHITESPACE","\n        ",1426],["T_IF","if",1427],["T_WHITESPACE"," ",1427],"(",["T_VARIABLE","$additionalTable",1427],["T_WHITESPACE"," ",1427],["T_BOOLEAN_AND","&&",1427],["T_WHITESPACE"," ",1427],["T_VARIABLE","$additionalTableExists",1427],")",["T_WHITESPACE"," ",1427],"{",["T_WHITESPACE","\n            ",1427],["T_VARIABLE","$bind",1428],["T_WHITESPACE","   ",1428],"=",["T_WHITESPACE"," ",1428],["T_ARRAY","array",1428],"(",")",";",["T_WHITESPACE","\n            ",1428],["T_VARIABLE","$fields",1429],["T_WHITESPACE"," ",1429],"=",["T_WHITESPACE"," ",1429],["T_VARIABLE","$this",1429],["T_OBJECT_OPERATOR","->",1429],["T_STRING","getConnection",1429],"(",")",["T_OBJECT_OPERATOR","->",1429],["T_STRING","describeTable",1429],"(",["T_VARIABLE","$this",1429],["T_OBJECT_OPERATOR","->",1429],["T_STRING","getTable",1429],"(",["T_VARIABLE","$additionalTable",1429],")",")",";",["T_WHITESPACE","\n            ",1429],["T_FOREACH","foreach",1430],["T_WHITESPACE"," ",1430],"(",["T_VARIABLE","$data",1430],["T_WHITESPACE"," ",1430],["T_AS","as",1430],["T_WHITESPACE"," ",1430],["T_VARIABLE","$k",1430],["T_WHITESPACE"," ",1430],["T_DOUBLE_ARROW","=>",1430],["T_WHITESPACE"," ",1430],["T_VARIABLE","$v",1430],")",["T_WHITESPACE"," ",1430],"{",["T_WHITESPACE","\n                ",1430],["T_IF","if",1431],["T_WHITESPACE"," ",1431],"(",["T_ISSET","isset",1431],"(",["T_VARIABLE","$fields",1431],"[",["T_VARIABLE","$k",1431],"]",")",")",["T_WHITESPACE"," ",1431],"{",["T_WHITESPACE","\n                    ",1431],["T_VARIABLE","$bind",1432],"[",["T_VARIABLE","$k",1432],"]",["T_WHITESPACE"," ",1432],"=",["T_WHITESPACE"," ",1432],["T_VARIABLE","$this",1432],["T_OBJECT_OPERATOR","->",1432],["T_STRING","getConnection",1432],"(",")",["T_OBJECT_OPERATOR","->",1432],["T_STRING","prepareColumnValue",1432],"(",["T_VARIABLE","$fields",1432],"[",["T_VARIABLE","$k",1432],"]",",",["T_WHITESPACE"," ",1432],["T_VARIABLE","$v",1432],")",";",["T_WHITESPACE","\n                ",1432],"}",["T_WHITESPACE","\n            ",1433],"}",["T_WHITESPACE","\n            ",1434],["T_IF","if",1435],["T_WHITESPACE"," ",1435],"(","!",["T_VARIABLE","$bind",1435],")",["T_WHITESPACE"," ",1435],"{",["T_WHITESPACE","\n                ",1435],["T_RETURN","return",1436],["T_WHITESPACE"," ",1436],["T_VARIABLE","$this",1436],";",["T_WHITESPACE","\n            ",1436],"}",["T_WHITESPACE","\n            ",1437],["T_VARIABLE","$this",1438],["T_OBJECT_OPERATOR","->",1438],["T_STRING","getConnection",1438],"(",")",["T_OBJECT_OPERATOR","->",1438],["T_STRING","insert",1438],"(",["T_VARIABLE","$this",1438],["T_OBJECT_OPERATOR","->",1438],["T_STRING","getTable",1438],"(",["T_VARIABLE","$additionalTable",1438],")",",",["T_WHITESPACE"," ",1438],["T_VARIABLE","$bind",1438],")",";",["T_WHITESPACE","\n        ",1438],"}",["T_WHITESPACE","\n\n        ",1439],["T_RETURN","return",1441],["T_WHITESPACE"," ",1441],["T_VARIABLE","$this",1441],";",["T_WHITESPACE","\n    ",1441],"}",["T_WHITESPACE","\n",1442],"}",["T_WHITESPACE","\n",1443]]
[["T_OPEN_TAG","<?php\n",1],["T_DOC_COMMENT","\/**\n * Magento\n *\n * NOTICE OF LICENSE\n *\n * This source file is subject to the Open Software License (OSL 3.0)\n * that is bundled with this package in the file LICENSE.txt.\n * It is also available through the world-wide-web at this URL:\n * http:\/\/opensource.org\/licenses\/osl-3.0.php\n * If you did not receive a copy of the license and are unable to\n * obtain it through the world-wide-web, please send an email\n * to license@magento.com so we can send you a copy immediately.\n *\n * DISCLAIMER\n *\n * Do not edit or add to this file if you wish to upgrade Magento to newer\n * versions in the future. If you wish to customize Magento for your\n * needs please refer to http:\/\/www.magento.com for more information.\n *\n * @category    Mage\n * @package     Mage_XmlConnect\n * @copyright  Copyright (c) 2006-2016 X.commerce, Inc. and affiliates (http:\/\/www.magento.com)\n * @license    http:\/\/opensource.org\/licenses\/osl-3.0.php  Open Software License (OSL 3.0)\n *\/",2],["T_WHITESPACE","\n\n",25],["T_DOC_COMMENT","\/**\n * XmlConnect Adminhtml mobile user controller\n *\n * @category    Mage\n * @package     Mage_XmlConnect\n * @author      Magento Core Team <core@magentocommerce.com>\n *\/",27],["T_WHITESPACE","\n",33],["T_CLASS","class",34],["T_WHITESPACE"," ",34],["T_STRING","Mage_XmlConnect_Adminhtml_Connect_UserController",34],["T_WHITESPACE"," ",34],["T_EXTENDS","extends",34],["T_WHITESPACE"," ",34],["T_STRING","Mage_XmlConnect_Controller_AdminAction",34],["T_WHITESPACE","\n",34],"{",["T_WHITESPACE","\n    ",35],["T_DOC_COMMENT","\/**\n     * Get admin user session\n     *\n     * @return Mage_Admin_Model_Session\n     *\/",36],["T_WHITESPACE","\n    ",40],["T_PROTECTED","protected",41],["T_WHITESPACE"," ",41],["T_FUNCTION","function",41],["T_WHITESPACE"," ",41],["T_STRING","_getSession",41],"(",")",["T_WHITESPACE","\n    ",41],"{",["T_WHITESPACE","\n        ",42],["T_RETURN","return",43],["T_WHITESPACE"," ",43],["T_STRING","Mage",43],["T_DOUBLE_COLON","::",43],["T_STRING","getSingleton",43],"(",["T_CONSTANT_ENCAPSED_STRING","'admin\/session'",43],")",";",["T_WHITESPACE","\n    ",43],"}",["T_WHITESPACE","\n\n    ",44],["T_DOC_COMMENT","\/**\n     * Login form action\n     *\/",46],["T_WHITESPACE","\n    ",48],["T_PUBLIC","public",49],["T_WHITESPACE"," ",49],["T_FUNCTION","function",49],["T_WHITESPACE"," ",49],["T_STRING","loginFormAction",49],"(",")",["T_WHITESPACE","\n    ",49],"{",["T_WHITESPACE","\n        ",50],["T_TRY","try",51],["T_WHITESPACE"," ",51],"{",["T_WHITESPACE","\n            ",51],["T_VARIABLE","$result",52],["T_WHITESPACE"," ",52],"=",["T_WHITESPACE"," ",52],["T_VARIABLE","$this",52],["T_OBJECT_OPERATOR","->",52],["T_STRING","loadLayout",52],"(",["T_STRING","false",52],")",["T_OBJECT_OPERATOR","->",52],["T_STRING","getLayout",52],"(",")",["T_WHITESPACE","\n                ",52],["T_OBJECT_OPERATOR","->",53],["T_STRING","addBlock",53],"(",["T_CONSTANT_ENCAPSED_STRING","'xmlconnect\/adminhtml_connect_loginform'",53],",",["T_WHITESPACE"," ",53],["T_CONSTANT_ENCAPSED_STRING","'login_form'",53],")",["T_OBJECT_OPERATOR","->",53],["T_STRING","toHtml",53],"(",")",";",["T_WHITESPACE","\n            ",53],["T_VARIABLE","$this",54],["T_OBJECT_OPERATOR","->",54],["T_STRING","getResponse",54],"(",")",["T_OBJECT_OPERATOR","->",54],["T_STRING","setBody",54],"(",["T_VARIABLE","$result",54],")",";",["T_WHITESPACE","\n        ",54],"}",["T_WHITESPACE"," ",55],["T_CATCH","catch",55],["T_WHITESPACE"," ",55],"(",["T_STRING","Mage_Core_Exception",55],["T_WHITESPACE"," ",55],["T_VARIABLE","$e",55],")",["T_WHITESPACE"," ",55],"{",["T_WHITESPACE","\n            ",55],["T_STRING","Mage",56],["T_DOUBLE_COLON","::",56],["T_STRING","logException",56],"(",["T_VARIABLE","$e",56],")",";",["T_WHITESPACE","\n            ",56],["T_VARIABLE","$this",57],["T_OBJECT_OPERATOR","->",57],["T_STRING","_message",57],"(",["T_STRING","Mage_XmlConnect_Model_Simplexml_Message_Error",57],["T_DOUBLE_COLON","::",57],["T_STRING","ERROR_USER_SPACE_DEFAULT",57],",",["T_WHITESPACE"," ",57],["T_VARIABLE","$e",57],["T_OBJECT_OPERATOR","->",57],["T_STRING","getMessage",57],"(",")",")",";",["T_WHITESPACE","\n        ",57],"}",["T_WHITESPACE"," ",58],["T_CATCH","catch",58],["T_WHITESPACE"," ",58],"(",["T_STRING","Exception",58],["T_WHITESPACE"," ",58],["T_VARIABLE","$e",58],")",["T_WHITESPACE"," ",58],"{",["T_WHITESPACE","\n            ",58],["T_STRING","Mage",59],["T_DOUBLE_COLON","::",59],["T_STRING","logException",59],"(",["T_VARIABLE","$e",59],")",";",["T_WHITESPACE","\n            ",59],["T_VARIABLE","$this",60],["T_OBJECT_OPERATOR","->",60],["T_STRING","_message",60],"(",["T_WHITESPACE","\n                ",60],["T_STRING","Mage_XmlConnect_Model_Simplexml_Message_Error",61],["T_DOUBLE_COLON","::",61],["T_STRING","ERROR_SERVER_SP_DEFAULT",61],",",["T_WHITESPACE","\n                ",61],["T_VARIABLE","$this",62],["T_OBJECT_OPERATOR","->",62],["T_STRING","__",62],"(",["T_CONSTANT_ENCAPSED_STRING","'An error occurred while loading login form.'",62],")",["T_WHITESPACE","\n            ",62],")",";",["T_WHITESPACE","\n        ",63],"}",["T_WHITESPACE","\n    ",64],"}",["T_WHITESPACE","\n\n    ",65],["T_DOC_COMMENT","\/**\n     * User login action\n     *\/",67],["T_WHITESPACE","\n    ",69],["T_PUBLIC","public",70],["T_WHITESPACE"," ",70],["T_FUNCTION","function",70],["T_WHITESPACE"," ",70],["T_STRING","loginAction",70],"(",")",["T_WHITESPACE","\n    ",70],"{",["T_WHITESPACE","\n        ",71],["T_TRY","try",72],["T_WHITESPACE"," ",72],"{",["T_WHITESPACE","\n            ",72],["T_VARIABLE","$session",73],["T_WHITESPACE"," ",73],"=",["T_WHITESPACE"," ",73],["T_VARIABLE","$this",73],["T_OBJECT_OPERATOR","->",73],["T_STRING","_getSession",73],"(",")",";",["T_WHITESPACE","\n            ",73],["T_VARIABLE","$request",74],["T_WHITESPACE"," ",74],"=",["T_WHITESPACE"," ",74],["T_VARIABLE","$this",74],["T_OBJECT_OPERATOR","->",74],["T_STRING","getRequest",74],"(",")",";",["T_WHITESPACE","\n\n            ",74],["T_IF","if",76],["T_WHITESPACE"," ",76],"(",["T_VARIABLE","$session",76],["T_OBJECT_OPERATOR","->",76],["T_STRING","isLoggedIn",76],"(",")",")",["T_WHITESPACE"," ",76],"{",["T_WHITESPACE","\n                ",76],["T_VARIABLE","$this",77],["T_OBJECT_OPERATOR","->",77],["T_STRING","_message",77],"(",["T_WHITESPACE","\n                    ",77],["T_STRING","Mage_XmlConnect_Model_Simplexml_Message",78],["T_DOUBLE_COLON","::",78],["T_STRING","MESSAGE_STATUS_SUCCESS",78],",",["T_WHITESPACE","\n                    ",78],["T_VARIABLE","$this",79],["T_OBJECT_OPERATOR","->",79],["T_STRING","__",79],"(",["T_CONSTANT_ENCAPSED_STRING","'Authentication complete.'",79],")",["T_WHITESPACE","\n                ",79],")",";",["T_WHITESPACE","\n                ",80],["T_RETURN","return",81],";",["T_WHITESPACE","\n            ",81],"}",["T_WHITESPACE","\n\n            ",82],["T_VARIABLE","$postLogin",84],["T_WHITESPACE"," ",84],"=",["T_WHITESPACE"," ",84],["T_VARIABLE","$request",84],["T_OBJECT_OPERATOR","->",84],["T_STRING","getPost",84],"(",["T_CONSTANT_ENCAPSED_STRING","'login_info'",84],")",";",["T_WHITESPACE","\n            ",84],["T_VARIABLE","$request",85],["T_OBJECT_OPERATOR","->",85],["T_STRING","setPost",85],"(",["T_CONSTANT_ENCAPSED_STRING","'login_info'",85],",",["T_WHITESPACE"," ",85],["T_STRING","null",85],")",";",["T_WHITESPACE","\n            ",85],["T_IF","if",86],["T_WHITESPACE"," ",86],"(",["T_VARIABLE","$postLogin",86],")",["T_WHITESPACE"," ",86],"{",["T_WHITESPACE","\n                ",86],["T_VARIABLE","$username",87],["T_WHITESPACE"," ",87],"=",["T_WHITESPACE"," ",87],["T_ISSET","isset",87],"(",["T_VARIABLE","$postLogin",87],"[",["T_CONSTANT_ENCAPSED_STRING","'username'",87],"]",")",["T_WHITESPACE"," ",87],"?",["T_WHITESPACE"," ",87],["T_VARIABLE","$postLogin",87],"[",["T_CONSTANT_ENCAPSED_STRING","'username'",87],"]",["T_WHITESPACE"," ",87],":",["T_WHITESPACE"," ",87],["T_CONSTANT_ENCAPSED_STRING","''",87],";",["T_WHITESPACE","\n                ",87],["T_VARIABLE","$password",88],["T_WHITESPACE"," ",88],"=",["T_WHITESPACE"," ",88],["T_ISSET","isset",88],"(",["T_VARIABLE","$postLogin",88],"[",["T_CONSTANT_ENCAPSED_STRING","'password'",88],"]",")",["T_WHITESPACE"," ",88],"?",["T_WHITESPACE"," ",88],["T_VARIABLE","$postLogin",88],"[",["T_CONSTANT_ENCAPSED_STRING","'password'",88],"]",["T_WHITESPACE"," ",88],":",["T_WHITESPACE"," ",88],["T_CONSTANT_ENCAPSED_STRING","''",88],";",["T_WHITESPACE","\n                ",88],["T_VARIABLE","$user",89],["T_WHITESPACE"," ",89],"=",["T_WHITESPACE"," ",89],["T_VARIABLE","$session",89],["T_OBJECT_OPERATOR","->",89],["T_STRING","login",89],"(",["T_VARIABLE","$username",89],",",["T_WHITESPACE"," ",89],["T_VARIABLE","$password",89],")",";",["T_WHITESPACE","\n                ",89],["T_VARIABLE","$request",90],["T_OBJECT_OPERATOR","->",90],["T_STRING","setPost",90],"(",["T_CONSTANT_ENCAPSED_STRING","'login'",90],",",["T_WHITESPACE"," ",90],["T_STRING","null",90],")",";",["T_WHITESPACE","\n                ",90],["T_IF","if",91],["T_WHITESPACE"," ",91],"(",["T_VARIABLE","$user",91],["T_WHITESPACE"," ",91],["T_BOOLEAN_AND","&&",91],["T_WHITESPACE"," ",91],["T_VARIABLE","$session",91],["T_OBJECT_OPERATOR","->",91],["T_STRING","isLoggedIn",91],"(",")",")",["T_WHITESPACE"," ",91],"{",["T_WHITESPACE","\n                    ",91],["T_VARIABLE","$this",92],["T_OBJECT_OPERATOR","->",92],["T_STRING","_message",92],"(",["T_WHITESPACE","\n                        ",92],["T_STRING","Mage_XmlConnect_Model_Simplexml_Message",93],["T_DOUBLE_COLON","::",93],["T_STRING","MESSAGE_STATUS_SUCCESS",93],",",["T_WHITESPACE","\n                        ",93],["T_VARIABLE","$this",94],["T_OBJECT_OPERATOR","->",94],["T_STRING","__",94],"(",["T_CONSTANT_ENCAPSED_STRING","'Authentication complete.'",94],")",["T_WHITESPACE","\n                    ",94],")",";",["T_WHITESPACE","\n                    ",95],["T_RETURN","return",96],";",["T_WHITESPACE","\n                ",96],"}",["T_WHITESPACE"," ",97],["T_ELSE","else",97],["T_WHITESPACE"," ",97],"{",["T_WHITESPACE","\n                    ",97],["T_VARIABLE","$this",98],["T_OBJECT_OPERATOR","->",98],["T_STRING","_message",98],"(",["T_WHITESPACE","\n                        ",98],["T_STRING","Mage_XmlConnect_Model_Simplexml_Message_Error",99],["T_DOUBLE_COLON","::",99],["T_STRING","ERROR_USER_SPACE_DEFAULT",99],",",["T_WHITESPACE","\n                        ",99],["T_VARIABLE","$this",100],["T_OBJECT_OPERATOR","->",100],["T_STRING","__",100],"(",["T_CONSTANT_ENCAPSED_STRING","'Invalid login or password.'",100],")",["T_WHITESPACE","\n                    ",100],")",";",["T_WHITESPACE","\n                    ",101],["T_RETURN","return",102],";",["T_WHITESPACE","\n                ",102],"}",["T_WHITESPACE","\n            ",103],"}",["T_WHITESPACE","\n            ",104],["T_VARIABLE","$this",105],["T_OBJECT_OPERATOR","->",105],["T_STRING","_message",105],"(",["T_WHITESPACE","\n                ",105],["T_STRING","Mage_XmlConnect_Model_Simplexml_Message_Error",106],["T_DOUBLE_COLON","::",106],["T_STRING","ERROR_CLIENT_SP_DEFAULT",106],",",["T_WHITESPACE","\n                ",106],["T_VARIABLE","$this",107],["T_OBJECT_OPERATOR","->",107],["T_STRING","__",107],"(",["T_CONSTANT_ENCAPSED_STRING","'Post data is empty.'",107],")",["T_WHITESPACE","\n            ",107],")",";",["T_WHITESPACE","\n        ",108],"}",["T_WHITESPACE"," ",109],["T_CATCH","catch",109],["T_WHITESPACE"," ",109],"(",["T_STRING","Mage_Core_Exception",109],["T_WHITESPACE"," ",109],["T_VARIABLE","$e",109],")",["T_WHITESPACE"," ",109],"{",["T_WHITESPACE","\n            ",109],["T_VARIABLE","$this",110],["T_OBJECT_OPERATOR","->",110],["T_STRING","_message",110],"(",["T_STRING","Mage_XmlConnect_Model_Simplexml_Message_Error",110],["T_DOUBLE_COLON","::",110],["T_STRING","ERROR_USER_SPACE_DEFAULT",110],",",["T_WHITESPACE"," ",110],["T_VARIABLE","$e",110],["T_OBJECT_OPERATOR","->",110],["T_STRING","getMessage",110],"(",")",")",";",["T_WHITESPACE","\n        ",110],"}",["T_WHITESPACE"," ",111],["T_CATCH","catch",111],["T_WHITESPACE"," ",111],"(",["T_STRING","Exception",111],["T_WHITESPACE"," ",111],["T_VARIABLE","$e",111],")",["T_WHITESPACE"," ",111],"{",["T_WHITESPACE","\n            ",111],["T_STRING","Mage",112],["T_DOUBLE_COLON","::",112],["T_STRING","logException",112],"(",["T_VARIABLE","$e",112],")",";",["T_WHITESPACE","\n            ",112],["T_VARIABLE","$this",113],["T_OBJECT_OPERATOR","->",113],["T_STRING","_message",113],"(",["T_WHITESPACE","\n                ",113],["T_STRING","Mage_XmlConnect_Model_Simplexml_Message_Error",114],["T_DOUBLE_COLON","::",114],["T_STRING","ERROR_SERVER_SP_DEFAULT",114],",",["T_WHITESPACE","\n                ",114],["T_VARIABLE","$this",115],["T_OBJECT_OPERATOR","->",115],["T_STRING","__",115],"(",["T_CONSTANT_ENCAPSED_STRING","'An error occurred while loading login form.'",115],")",["T_WHITESPACE","\n            ",115],")",";",["T_WHITESPACE","\n        ",116],"}",["T_WHITESPACE","\n    ",117],"}",["T_WHITESPACE","\n\n    ",118],["T_DOC_COMMENT","\/**\n     * User logout action\n     *\/",120],["T_WHITESPACE","\n    ",122],["T_PUBLIC","public",123],["T_WHITESPACE"," ",123],["T_FUNCTION","function",123],["T_WHITESPACE"," ",123],["T_STRING","logoutAction",123],"(",")",["T_WHITESPACE","\n    ",123],"{",["T_WHITESPACE","\n        ",124],["T_TRY","try",125],["T_WHITESPACE"," ",125],"{",["T_WHITESPACE","\n            ",125],["T_VARIABLE","$this",126],["T_OBJECT_OPERATOR","->",126],["T_STRING","_getSession",126],"(",")",["T_OBJECT_OPERATOR","->",126],["T_STRING","unsetAll",126],"(",")",";",["T_WHITESPACE","\n            ",126],["T_VARIABLE","$this",127],["T_OBJECT_OPERATOR","->",127],["T_STRING","_getSession",127],"(",")",["T_OBJECT_OPERATOR","->",127],["T_STRING","getCookie",127],"(",")",["T_OBJECT_OPERATOR","->",127],["T_STRING","delete",127],"(",["T_VARIABLE","$this",127],["T_OBJECT_OPERATOR","->",127],["T_STRING","_getSession",127],"(",")",["T_OBJECT_OPERATOR","->",127],["T_STRING","getSessionName",127],"(",")",")",";",["T_WHITESPACE","\n            ",127],["T_VARIABLE","$this",128],["T_OBJECT_OPERATOR","->",128],["T_STRING","_message",128],"(",["T_WHITESPACE","\n                ",128],["T_STRING","Mage_XmlConnect_Model_Simplexml_Message",129],["T_DOUBLE_COLON","::",129],["T_STRING","MESSAGE_STATUS_SUCCESS",129],",",["T_WHITESPACE","\n                ",129],["T_STRING","Mage",130],["T_DOUBLE_COLON","::",130],["T_STRING","helper",130],"(",["T_CONSTANT_ENCAPSED_STRING","'adminhtml'",130],")",["T_OBJECT_OPERATOR","->",130],["T_STRING","__",130],"(",["T_CONSTANT_ENCAPSED_STRING","'You have logged out.'",130],")",["T_WHITESPACE","\n            ",130],")",";",["T_WHITESPACE","\n        ",131],"}",["T_WHITESPACE"," ",132],["T_CATCH","catch",132],["T_WHITESPACE"," ",132],"(",["T_STRING","Mage_Core_Exception",132],["T_WHITESPACE"," ",132],["T_VARIABLE","$e",132],")",["T_WHITESPACE"," ",132],"{",["T_WHITESPACE","\n            ",132],["T_VARIABLE","$this",133],["T_OBJECT_OPERATOR","->",133],["T_STRING","_message",133],"(",["T_STRING","Mage_XmlConnect_Model_Simplexml_Message_Error",133],["T_DOUBLE_COLON","::",133],["T_STRING","ERROR_USER_SPACE_DEFAULT",133],",",["T_WHITESPACE"," ",133],["T_VARIABLE","$e",133],["T_OBJECT_OPERATOR","->",133],["T_STRING","getMessage",133],"(",")",")",";",["T_WHITESPACE","\n        ",133],"}",["T_WHITESPACE"," ",134],["T_CATCH","catch",134],["T_WHITESPACE"," ",134],"(",["T_STRING","Exception",134],["T_WHITESPACE"," ",134],["T_VARIABLE","$e",134],")",["T_WHITESPACE"," ",134],"{",["T_WHITESPACE","\n            ",134],["T_STRING","Mage",135],["T_DOUBLE_COLON","::",135],["T_STRING","logException",135],"(",["T_VARIABLE","$e",135],")",";",["T_WHITESPACE","\n            ",135],["T_VARIABLE","$this",136],["T_OBJECT_OPERATOR","->",136],["T_STRING","_message",136],"(",["T_WHITESPACE","\n                ",136],["T_STRING","Mage_XmlConnect_Model_Simplexml_Message_Error",137],["T_DOUBLE_COLON","::",137],["T_STRING","ERROR_SERVER_SP_DEFAULT",137],",",["T_WHITESPACE","\n                ",137],["T_VARIABLE","$this",138],["T_OBJECT_OPERATOR","->",138],["T_STRING","__",138],"(",["T_CONSTANT_ENCAPSED_STRING","'An error occurred while loading login form.'",138],")",["T_WHITESPACE","\n            ",138],")",";",["T_WHITESPACE","\n        ",139],"}",["T_WHITESPACE","\n    ",140],"}",["T_WHITESPACE","\n\n    ",141],["T_DOC_COMMENT","\/**\n     * Check the permission to run actions\n     *\n     * @return boolean\n     *\/",143],["T_WHITESPACE","\n    ",147],["T_PROTECTED","protected",148],["T_WHITESPACE"," ",148],["T_FUNCTION","function",148],["T_WHITESPACE"," ",148],["T_STRING","_isAllowed",148],"(",")",["T_WHITESPACE","\n    ",148],"{",["T_WHITESPACE","\n        ",149],["T_IF","if",150],["T_WHITESPACE"," ",150],"(","!",["T_STRING","Mage",150],["T_DOUBLE_COLON","::",150],["T_STRING","getSingleton",150],"(",["T_CONSTANT_ENCAPSED_STRING","'xmlconnect\/configuration'",150],")",["T_OBJECT_OPERATOR","->",150],["T_STRING","isActiveAdminApp",150],"(",")",")",["T_WHITESPACE"," ",150],"{",["T_WHITESPACE","\n            ",150],["T_VARIABLE","$this",151],["T_OBJECT_OPERATOR","->",151],["T_STRING","_forward",151],"(",["T_CONSTANT_ENCAPSED_STRING","'denied'",151],")",";",["T_WHITESPACE","\n        ",151],"}",["T_WHITESPACE","\n        ",152],["T_RETURN","return",153],["T_WHITESPACE"," ",153],["T_STRING","true",153],";",["T_WHITESPACE","\n    ",153],"}",["T_WHITESPACE","\n\n    ",154],["T_DOC_COMMENT","\/**\n     * Is check cookie required flag\n     *\n     * @return bool\n     *\/",156],["T_WHITESPACE","\n    ",160],["T_PROTECTED","protected",161],["T_WHITESPACE"," ",161],["T_FUNCTION","function",161],["T_WHITESPACE"," ",161],["T_STRING","_isCheckCookieRequired",161],"(",")",["T_WHITESPACE","\n    ",161],"{",["T_WHITESPACE","\n        ",162],["T_RETURN","return",163],["T_WHITESPACE"," ",163],["T_STRING","false",163],";",["T_WHITESPACE","\n    ",163],"}",["T_WHITESPACE","\n",164],"}",["T_WHITESPACE","\n",165]]
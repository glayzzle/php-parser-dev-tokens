[["T_OPEN_TAG","<?php\n",1],["T_DOC_COMMENT","\/**\n * Magento\n *\n * NOTICE OF LICENSE\n *\n * This source file is subject to the Open Software License (OSL 3.0)\n * that is bundled with this package in the file LICENSE.txt.\n * It is also available through the world-wide-web at this URL:\n * http:\/\/opensource.org\/licenses\/osl-3.0.php\n * If you did not receive a copy of the license and are unable to\n * obtain it through the world-wide-web, please send an email\n * to license@magento.com so we can send you a copy immediately.\n *\n * DISCLAIMER\n *\n * Do not edit or add to this file if you wish to upgrade Magento to newer\n * versions in the future. If you wish to customize Magento for your\n * needs please refer to http:\/\/www.magento.com for more information.\n *\n * @category    Mage\n * @package     Mage_XmlConnect\n * @copyright  Copyright (c) 2006-2016 X.commerce, Inc. and affiliates (http:\/\/www.magento.com)\n * @license    http:\/\/opensource.org\/licenses\/osl-3.0.php  Open Software License (OSL 3.0)\n *\/",2],["T_WHITESPACE","\n\n",25],["T_DOC_COMMENT","\/**\n * Product list xml renderer\n *\n * @category    Mage\n * @package     Mage_XmlConnect\n * @author      Magento Core Team <core@magentocommerce.com>\n *\/",27],["T_WHITESPACE","\n",33],["T_CLASS","class",34],["T_WHITESPACE"," ",34],["T_STRING","Mage_XmlConnect_Block_Catalog_Product_List",34],["T_WHITESPACE"," ",34],["T_EXTENDS","extends",34],["T_WHITESPACE"," ",34],["T_STRING","Mage_XmlConnect_Block_Catalog_Product",34],["T_WHITESPACE","\n",34],"{",["T_WHITESPACE","\n    ",35],["T_DOC_COMMENT","\/**\n     * Store product collection\n     *\n     * @var Mage_Eav_Model_Entity_Collection_Abstract\n     *\/",36],["T_WHITESPACE","\n    ",40],["T_PROTECTED","protected",41],["T_WHITESPACE"," ",41],["T_VARIABLE","$_productCollection",41],["T_WHITESPACE"," ",41],"=",["T_WHITESPACE"," ",41],["T_STRING","null",41],";",["T_WHITESPACE","\n\n    ",41],["T_DOC_COMMENT","\/**\n     * Store collected layered navigation filters while applying them\n     *\n     * @var array\n     *\/",43],["T_WHITESPACE","\n    ",47],["T_PROTECTED","protected",48],["T_WHITESPACE"," ",48],["T_VARIABLE","$_collectedFilters",48],["T_WHITESPACE"," ",48],"=",["T_WHITESPACE"," ",48],["T_ARRAY","array",48],"(",")",";",["T_WHITESPACE","\n\n    ",48],["T_DOC_COMMENT","\/**\n     * Produce products list xml object\n     *\n     * @return Mage_XmlConnect_Model_Simplexml_Element\n     *\/",50],["T_WHITESPACE","\n    ",54],["T_PUBLIC","public",55],["T_WHITESPACE"," ",55],["T_FUNCTION","function",55],["T_WHITESPACE"," ",55],["T_STRING","getProductsXmlObject",55],"(",")",["T_WHITESPACE","\n    ",55],"{",["T_WHITESPACE","\n        ",56],["T_VARIABLE","$productsXmlObj",57],["T_WHITESPACE"," ",57],"=",["T_WHITESPACE"," ",57],["T_STRING","Mage",57],["T_DOUBLE_COLON","::",57],["T_STRING","getModel",57],"(",["T_CONSTANT_ENCAPSED_STRING","'xmlconnect\/simplexml_element'",57],",",["T_WHITESPACE"," ",57],["T_CONSTANT_ENCAPSED_STRING","'<products><\/products>'",57],")",";",["T_WHITESPACE","\n        ",57],["T_VARIABLE","$collection",58],["T_WHITESPACE","     ",58],"=",["T_WHITESPACE"," ",58],["T_VARIABLE","$this",58],["T_OBJECT_OPERATOR","->",58],["T_STRING","_getProductCollection",58],"(",")",";",["T_WHITESPACE","\n\n        ",58],["T_IF","if",60],["T_WHITESPACE"," ",60],"(","!",["T_VARIABLE","$collection",60],")",["T_WHITESPACE"," ",60],"{",["T_WHITESPACE","\n            ",60],["T_RETURN","return",61],["T_WHITESPACE"," ",61],["T_STRING","false",61],";",["T_WHITESPACE","\n        ",61],"}",["T_WHITESPACE","\n        ",62],["T_FOREACH","foreach",63],["T_WHITESPACE"," ",63],"(",["T_VARIABLE","$collection",63],["T_OBJECT_OPERATOR","->",63],["T_STRING","getItems",63],"(",")",["T_WHITESPACE"," ",63],["T_AS","as",63],["T_WHITESPACE"," ",63],["T_VARIABLE","$product",63],")",["T_WHITESPACE"," ",63],"{",["T_WHITESPACE","\n            ",63],["T_VARIABLE","$productXmlObj",64],["T_WHITESPACE"," ",64],"=",["T_WHITESPACE"," ",64],["T_VARIABLE","$this",64],["T_OBJECT_OPERATOR","->",64],["T_STRING","productToXmlObject",64],"(",["T_VARIABLE","$product",64],")",";",["T_WHITESPACE","\n            ",64],["T_IF","if",65],["T_WHITESPACE"," ",65],"(",["T_VARIABLE","$productXmlObj",65],")",["T_WHITESPACE"," ",65],"{",["T_WHITESPACE","\n                ",65],["T_VARIABLE","$productsXmlObj",66],["T_OBJECT_OPERATOR","->",66],["T_STRING","appendChild",66],"(",["T_VARIABLE","$productXmlObj",66],")",";",["T_WHITESPACE","\n            ",66],"}",["T_WHITESPACE","\n        ",67],"}",["T_WHITESPACE","\n\n        ",68],["T_RETURN","return",70],["T_WHITESPACE"," ",70],["T_VARIABLE","$productsXmlObj",70],";",["T_WHITESPACE","\n    ",70],"}",["T_WHITESPACE","\n\n    ",71],["T_DOC_COMMENT","\/**\n     * Getter for collected layered navigation filters\n     *\n     * @return array\n     *\/",73],["T_WHITESPACE","\n    ",77],["T_PUBLIC","public",78],["T_WHITESPACE"," ",78],["T_FUNCTION","function",78],["T_WHITESPACE"," ",78],["T_STRING","getCollectedFilters",78],"(",")",["T_WHITESPACE","\n    ",78],"{",["T_WHITESPACE","\n        ",79],["T_RETURN","return",80],["T_WHITESPACE"," ",80],["T_VARIABLE","$this",80],["T_OBJECT_OPERATOR","->",80],["T_STRING","_collectedFilters",80],";",["T_WHITESPACE","\n    ",80],"}",["T_WHITESPACE","\n\n    ",81],["T_DOC_COMMENT","\/**\n     * Retrieve product collection with all prepared data and limitations\n     *\n     * @return Mage_Eav_Model_Entity_Collection_Abstract\n     *\/",83],["T_WHITESPACE","\n    ",87],["T_PROTECTED","protected",88],["T_WHITESPACE"," ",88],["T_FUNCTION","function",88],["T_WHITESPACE"," ",88],["T_STRING","_getProductCollection",88],"(",")",["T_WHITESPACE","\n    ",88],"{",["T_WHITESPACE","\n        ",89],["T_IF","if",90],["T_WHITESPACE"," ",90],"(",["T_STRING","is_null",90],"(",["T_VARIABLE","$this",90],["T_OBJECT_OPERATOR","->",90],["T_STRING","_productCollection",90],")",")",["T_WHITESPACE"," ",90],"{",["T_WHITESPACE","\n            ",90],["T_VARIABLE","$filters",91],["T_WHITESPACE","        ",91],"=",["T_WHITESPACE"," ",91],["T_ARRAY","array",91],"(",")",";",["T_WHITESPACE","\n            ",91],["T_VARIABLE","$request",92],["T_WHITESPACE","        ",92],"=",["T_WHITESPACE"," ",92],["T_VARIABLE","$this",92],["T_OBJECT_OPERATOR","->",92],["T_STRING","getRequest",92],"(",")",";",["T_WHITESPACE","\n            ",92],["T_VARIABLE","$requestParams",93],["T_WHITESPACE","  ",93],"=",["T_WHITESPACE"," ",93],["T_VARIABLE","$request",93],["T_OBJECT_OPERATOR","->",93],["T_STRING","getParams",93],"(",")",";",["T_WHITESPACE","\n            ",93],["T_VARIABLE","$layer",94],["T_WHITESPACE","          ",94],"=",["T_WHITESPACE"," ",94],["T_VARIABLE","$this",94],["T_OBJECT_OPERATOR","->",94],["T_STRING","getLayer",94],"(",")",";",["T_WHITESPACE","\n            ",94],["T_IF","if",95],["T_WHITESPACE"," ",95],"(","!",["T_VARIABLE","$layer",95],")",["T_WHITESPACE"," ",95],"{",["T_WHITESPACE","\n                ",95],["T_RETURN","return",96],["T_WHITESPACE"," ",96],["T_STRING","null",96],";",["T_WHITESPACE","\n            ",96],"}",["T_WHITESPACE","\n            ",97],["T_VARIABLE","$category",98],["T_WHITESPACE","       ",98],"=",["T_WHITESPACE"," ",98],["T_VARIABLE","$this",98],["T_OBJECT_OPERATOR","->",98],["T_STRING","getCategory",98],"(",")",";",["T_WHITESPACE","\n            ",98],["T_IF","if",99],["T_WHITESPACE"," ",99],"(",["T_VARIABLE","$category",99],["T_WHITESPACE"," ",99],["T_BOOLEAN_AND","&&",99],["T_WHITESPACE"," ",99],["T_STRING","is_object",99],"(",["T_VARIABLE","$category",99],")",["T_WHITESPACE"," ",99],["T_BOOLEAN_AND","&&",99],["T_WHITESPACE"," ",99],["T_VARIABLE","$category",99],["T_OBJECT_OPERATOR","->",99],["T_STRING","getId",99],"(",")",")",["T_WHITESPACE"," ",99],"{",["T_WHITESPACE","\n                ",99],["T_VARIABLE","$layer",100],["T_OBJECT_OPERATOR","->",100],["T_STRING","setCurrentCategory",100],"(",["T_VARIABLE","$category",100],")",";",["T_WHITESPACE","\n            ",100],"}",["T_WHITESPACE","\n            ",101],["T_IF","if",102],["T_WHITESPACE"," ",102],"(","!",["T_VARIABLE","$this",102],["T_OBJECT_OPERATOR","->",102],["T_STRING","getNeedBlockApplyingFilters",102],"(",")",")",["T_WHITESPACE"," ",102],"{",["T_WHITESPACE","\n                ",102],["T_VARIABLE","$attributes",103],["T_WHITESPACE","     ",103],"=",["T_WHITESPACE"," ",103],["T_VARIABLE","$layer",103],["T_OBJECT_OPERATOR","->",103],["T_STRING","getFilterableAttributes",103],"(",")",";",["T_WHITESPACE","\n                ",103],["T_DOC_COMMENT","\/**\n                 * Apply filters\n                 *\/",104],["T_WHITESPACE","\n                ",106],["T_FOREACH","foreach",107],["T_WHITESPACE"," ",107],"(",["T_VARIABLE","$attributes",107],["T_WHITESPACE"," ",107],["T_AS","as",107],["T_WHITESPACE"," ",107],["T_VARIABLE","$attributeItem",107],")",["T_WHITESPACE"," ",107],"{",["T_WHITESPACE","\n                    ",107],["T_VARIABLE","$attributeCode",108],["T_WHITESPACE","  ",108],"=",["T_WHITESPACE"," ",108],["T_VARIABLE","$attributeItem",108],["T_OBJECT_OPERATOR","->",108],["T_STRING","getAttributeCode",108],"(",")",";",["T_WHITESPACE","\n                    ",108],["T_LIST","list",109],"(",["T_VARIABLE","$filterModel",109],",",["T_WHITESPACE"," ",109],["T_VARIABLE","$filterBlock",109],")",["T_WHITESPACE"," ",109],"=",["T_WHITESPACE"," ",109],["T_VARIABLE","$this",109],["T_OBJECT_OPERATOR","->",109],["T_STRING","helper",109],"(",["T_CONSTANT_ENCAPSED_STRING","'xmlconnect'",109],")",["T_OBJECT_OPERATOR","->",109],["T_STRING","getFilterByKey",109],"(",["T_VARIABLE","$attributeCode",109],")",";",["T_WHITESPACE","\n\n                    ",109],["T_VARIABLE","$filterModel",111],["T_OBJECT_OPERATOR","->",111],["T_STRING","setLayer",111],"(",["T_VARIABLE","$layer",111],")",["T_OBJECT_OPERATOR","->",111],["T_STRING","setAttributeModel",111],"(",["T_VARIABLE","$attributeItem",111],")",";",["T_WHITESPACE","\n\n                    ",111],["T_VARIABLE","$filterParam",113],["T_WHITESPACE"," ",113],"=",["T_WHITESPACE"," ",113],["T_STRING","parent",113],["T_DOUBLE_COLON","::",113],["T_STRING","REQUEST_FILTER_PARAM_PREFIX",113],["T_WHITESPACE"," ",113],".",["T_WHITESPACE"," ",113],["T_VARIABLE","$attributeCode",113],";",["T_WHITESPACE","\n                    ",113],["T_DOC_COMMENT","\/**\n                     * Set new request var\n                     *\/",114],["T_WHITESPACE","\n                    ",116],["T_IF","if",117],["T_WHITESPACE"," ",117],"(",["T_ISSET","isset",117],"(",["T_VARIABLE","$requestParams",117],"[",["T_VARIABLE","$filterParam",117],"]",")",")",["T_WHITESPACE"," ",117],"{",["T_WHITESPACE","\n                        ",117],["T_VARIABLE","$filterModel",118],["T_OBJECT_OPERATOR","->",118],["T_STRING","setRequestVar",118],"(",["T_VARIABLE","$filterParam",118],")",";",["T_WHITESPACE","\n                    ",118],"}",["T_WHITESPACE","\n                    ",119],["T_VARIABLE","$filterModel",120],["T_OBJECT_OPERATOR","->",120],["T_STRING","apply",120],"(",["T_VARIABLE","$request",120],",",["T_WHITESPACE"," ",120],["T_VARIABLE","$filterBlock",120],")",";",["T_WHITESPACE","\n                    ",120],["T_VARIABLE","$filters",121],"[","]",["T_WHITESPACE"," ",121],"=",["T_WHITESPACE"," ",121],["T_VARIABLE","$filterModel",121],";",["T_WHITESPACE","\n                ",121],"}",["T_WHITESPACE","\n\n                ",122],["T_DOC_COMMENT","\/**\n                 * Separately apply and save category filter\n                 *\/",124],["T_WHITESPACE","\n                ",126],["T_LIST","list",127],"(",["T_VARIABLE","$categoryFilter",127],",",["T_WHITESPACE"," ",127],["T_VARIABLE","$categoryFilterBlock",127],")",["T_WHITESPACE"," ",127],"=",["T_WHITESPACE"," ",127],["T_VARIABLE","$this",127],["T_OBJECT_OPERATOR","->",127],["T_STRING","helper",127],"(",["T_CONSTANT_ENCAPSED_STRING","'xmlconnect'",127],")",["T_OBJECT_OPERATOR","->",127],["T_STRING","getFilterByKey",127],"(",["T_CONSTANT_ENCAPSED_STRING","'category'",127],")",";",["T_WHITESPACE","\n                ",127],["T_VARIABLE","$filterParam",128],["T_WHITESPACE"," ",128],"=",["T_WHITESPACE"," ",128],["T_STRING","parent",128],["T_DOUBLE_COLON","::",128],["T_STRING","REQUEST_FILTER_PARAM_PREFIX",128],["T_WHITESPACE"," ",128],".",["T_WHITESPACE"," ",128],["T_VARIABLE","$categoryFilter",128],["T_OBJECT_OPERATOR","->",128],["T_STRING","getRequestVar",128],"(",")",";",["T_WHITESPACE","\n                ",128],["T_VARIABLE","$categoryFilter",129],["T_OBJECT_OPERATOR","->",129],["T_STRING","setLayer",129],"(",["T_VARIABLE","$layer",129],")",["T_OBJECT_OPERATOR","->",129],["T_STRING","setRequestVar",129],"(",["T_VARIABLE","$filterParam",129],")",["T_WHITESPACE","\n                    ",129],["T_OBJECT_OPERATOR","->",130],["T_STRING","apply",130],"(",["T_VARIABLE","$this",130],["T_OBJECT_OPERATOR","->",130],["T_STRING","getRequest",130],"(",")",",",["T_WHITESPACE"," ",130],["T_VARIABLE","$categoryFilterBlock",130],")",";",["T_WHITESPACE","\n                ",130],["T_VARIABLE","$filters",131],"[","]",["T_WHITESPACE"," ",131],"=",["T_WHITESPACE"," ",131],["T_VARIABLE","$categoryFilter",131],";",["T_WHITESPACE","\n\n                ",131],["T_VARIABLE","$this",133],["T_OBJECT_OPERATOR","->",133],["T_STRING","_collectedFilters",133],["T_WHITESPACE"," ",133],"=",["T_WHITESPACE"," ",133],["T_VARIABLE","$filters",133],";",["T_WHITESPACE","\n            ",133],"}",["T_WHITESPACE","\n\n            ",134],["T_DOC_COMMENT","\/**\n             * Products\n             *\/",136],["T_WHITESPACE","\n            ",138],["T_VARIABLE","$layer",139],["T_WHITESPACE","      ",139],"=",["T_WHITESPACE"," ",139],["T_VARIABLE","$this",139],["T_OBJECT_OPERATOR","->",139],["T_STRING","getLayer",139],"(",")",";",["T_WHITESPACE","\n            ",139],["T_VARIABLE","$collection",140],["T_WHITESPACE"," ",140],"=",["T_WHITESPACE"," ",140],["T_VARIABLE","$layer",140],["T_OBJECT_OPERATOR","->",140],["T_STRING","getProductCollection",140],"(",")",";",["T_WHITESPACE","\n\n            ",140],["T_DOC_COMMENT","\/**\n             * Add rating and review summary, image attribute, apply sort params\n             *\/",142],["T_WHITESPACE","\n            ",144],["T_VARIABLE","$this",145],["T_OBJECT_OPERATOR","->",145],["T_STRING","_prepareCollection",145],"(",["T_VARIABLE","$collection",145],")",";",["T_WHITESPACE","\n\n            ",145],["T_DOC_COMMENT","\/**\n             * Apply offset and count\n             *\/",147],["T_WHITESPACE","\n            ",149],["T_VARIABLE","$offset",150],["T_WHITESPACE"," ",150],"=",["T_WHITESPACE"," ",150],["T_INT_CAST","(int)",150],["T_VARIABLE","$request",150],["T_OBJECT_OPERATOR","->",150],["T_STRING","getParam",150],"(",["T_CONSTANT_ENCAPSED_STRING","'offset'",150],",",["T_WHITESPACE"," ",150],["T_LNUMBER","0",150],")",";",["T_WHITESPACE","\n            ",150],["T_VARIABLE","$count",151],["T_WHITESPACE","  ",151],"=",["T_WHITESPACE"," ",151],["T_INT_CAST","(int)",151],["T_VARIABLE","$request",151],["T_OBJECT_OPERATOR","->",151],["T_STRING","getParam",151],"(",["T_CONSTANT_ENCAPSED_STRING","'count'",151],",",["T_WHITESPACE"," ",151],["T_LNUMBER","0",151],")",";",["T_WHITESPACE","\n            ",151],["T_VARIABLE","$count",152],["T_WHITESPACE","  ",152],"=",["T_WHITESPACE"," ",152],["T_VARIABLE","$count",152],["T_WHITESPACE"," ",152],["T_IS_SMALLER_OR_EQUAL","<=",152],["T_WHITESPACE"," ",152],["T_LNUMBER","0",152],["T_WHITESPACE"," ",152],"?",["T_WHITESPACE"," ",152],["T_LNUMBER","1",152],["T_WHITESPACE"," ",152],":",["T_WHITESPACE"," ",152],["T_VARIABLE","$count",152],";",["T_WHITESPACE","\n            ",152],["T_IF","if",153],["T_WHITESPACE"," ",153],"(",["T_VARIABLE","$offset",153],["T_WHITESPACE"," ",153],"+",["T_WHITESPACE"," ",153],["T_VARIABLE","$count",153],["T_WHITESPACE"," ",153],"<",["T_WHITESPACE"," ",153],["T_VARIABLE","$collection",153],["T_OBJECT_OPERATOR","->",153],["T_STRING","getSize",153],"(",")",")",["T_WHITESPACE"," ",153],"{",["T_WHITESPACE","\n                ",153],["T_VARIABLE","$this",154],["T_OBJECT_OPERATOR","->",154],["T_STRING","setHasProductItems",154],"(",["T_LNUMBER","1",154],")",";",["T_WHITESPACE","\n            ",154],"}",["T_WHITESPACE","\n            ",155],["T_VARIABLE","$collection",156],["T_OBJECT_OPERATOR","->",156],["T_STRING","getSelect",156],"(",")",["T_OBJECT_OPERATOR","->",156],["T_STRING","limit",156],"(",["T_VARIABLE","$count",156],",",["T_WHITESPACE"," ",156],["T_VARIABLE","$offset",156],")",";",["T_WHITESPACE","\n            ",156],["T_VARIABLE","$collection",157],["T_OBJECT_OPERATOR","->",157],["T_STRING","setFlag",157],"(",["T_CONSTANT_ENCAPSED_STRING","'require_stock_items'",157],",",["T_WHITESPACE"," ",157],["T_STRING","true",157],")",";",["T_WHITESPACE","\n\n            ",157],["T_VARIABLE","$this",159],["T_OBJECT_OPERATOR","->",159],["T_STRING","_productCollection",159],["T_WHITESPACE"," ",159],"=",["T_WHITESPACE"," ",159],["T_VARIABLE","$collection",159],";",["T_WHITESPACE","\n        ",159],"}",["T_WHITESPACE","\n        ",160],["T_RETURN","return",161],["T_WHITESPACE"," ",161],["T_VARIABLE","$this",161],["T_OBJECT_OPERATOR","->",161],["T_STRING","_productCollection",161],";",["T_WHITESPACE","\n    ",161],"}",["T_WHITESPACE","\n\n    ",162],["T_DOC_COMMENT","\/**\n     * Add image attribute and apply sort fields to product collection\n     *\n     * @param Mage_Eav_Model_Entity_Collection_Abstract $collection\n     * @return Mage_XmlConnect_Block_Catalog_Product_List\n     *\/",164],["T_WHITESPACE","\n    ",169],["T_PROTECTED","protected",170],["T_WHITESPACE"," ",170],["T_FUNCTION","function",170],["T_WHITESPACE"," ",170],["T_STRING","_prepareCollection",170],"(",["T_VARIABLE","$collection",170],")",["T_WHITESPACE","\n    ",170],"{",["T_WHITESPACE","\n        ",171],["T_DOC_COMMENT","\/**\n         * Apply sort params\n         *\/",172],["T_WHITESPACE","\n        ",174],["T_VARIABLE","$request",175],["T_WHITESPACE"," ",175],"=",["T_WHITESPACE"," ",175],["T_VARIABLE","$this",175],["T_OBJECT_OPERATOR","->",175],["T_STRING","getRequest",175],"(",")",";",["T_WHITESPACE","\n        ",175],["T_VARIABLE","$isOrderValueExist",176],["T_WHITESPACE"," ",176],"=",["T_WHITESPACE"," ",176],["T_STRING","false",176],";",["T_WHITESPACE","\n        ",176],["T_FOREACH","foreach",177],["T_WHITESPACE"," ",177],"(",["T_VARIABLE","$request",177],["T_OBJECT_OPERATOR","->",177],["T_STRING","getParams",177],"(",")",["T_WHITESPACE"," ",177],["T_AS","as",177],["T_WHITESPACE"," ",177],["T_VARIABLE","$key",177],["T_WHITESPACE"," ",177],["T_DOUBLE_ARROW","=>",177],["T_WHITESPACE"," ",177],["T_VARIABLE","$value",177],")",["T_WHITESPACE"," ",177],"{",["T_WHITESPACE","\n            ",177],["T_IF","if",178],["T_WHITESPACE"," ",178],"(",["T_LNUMBER","0",178],["T_WHITESPACE"," ",178],["T_IS_IDENTICAL","===",178],["T_WHITESPACE"," ",178],["T_STRING","strpos",178],"(",["T_VARIABLE","$key",178],",",["T_WHITESPACE"," ",178],["T_STRING","parent",178],["T_DOUBLE_COLON","::",178],["T_STRING","REQUEST_SORT_ORDER_PARAM_PREFIX",178],")",")",["T_WHITESPACE"," ",178],"{",["T_WHITESPACE","\n                ",178],["T_VARIABLE","$key",179],["T_WHITESPACE"," ",179],"=",["T_WHITESPACE"," ",179],["T_STRING","str_replace",179],"(",["T_STRING","parent",179],["T_DOUBLE_COLON","::",179],["T_STRING","REQUEST_SORT_ORDER_PARAM_PREFIX",179],",",["T_WHITESPACE"," ",179],["T_CONSTANT_ENCAPSED_STRING","''",179],",",["T_WHITESPACE"," ",179],["T_VARIABLE","$key",179],")",";",["T_WHITESPACE","\n                ",179],["T_IF","if",180],["T_WHITESPACE"," ",180],"(",["T_VARIABLE","$value",180],["T_WHITESPACE"," ",180],["T_IS_NOT_EQUAL","!=",180],["T_WHITESPACE"," ",180],["T_CONSTANT_ENCAPSED_STRING","'desc'",180],")",["T_WHITESPACE"," ",180],"{",["T_WHITESPACE","\n                    ",180],["T_VARIABLE","$value",181],["T_WHITESPACE"," ",181],"=",["T_WHITESPACE"," ",181],["T_CONSTANT_ENCAPSED_STRING","'asc'",181],";",["T_WHITESPACE","\n                ",181],"}",["T_WHITESPACE","\n                ",182],["T_IF","if",183],["T_WHITESPACE"," ",183],"(",["T_VARIABLE","$key",183],["T_WHITESPACE"," ",183],["T_IS_EQUAL","==",183],["T_WHITESPACE"," ",183],["T_CONSTANT_ENCAPSED_STRING","'relevance'",183],")",["T_WHITESPACE"," ",183],"{",["T_WHITESPACE","\n                    ",183],["T_VARIABLE","$collection",184],["T_OBJECT_OPERATOR","->",184],["T_STRING","getSelect",184],"(",")",["T_OBJECT_OPERATOR","->",184],["T_STRING","order",184],"(","\"",["T_ENCAPSED_AND_WHITESPACE","relevance ",184],["T_CURLY_OPEN","{",184],["T_VARIABLE","$value",184],"}","\"",")",";",["T_WHITESPACE","\n                ",184],"}",["T_WHITESPACE"," ",185],["T_ELSE","else",185],["T_WHITESPACE"," ",185],"{",["T_WHITESPACE","\n                    ",185],["T_VARIABLE","$collection",186],["T_OBJECT_OPERATOR","->",186],["T_STRING","addAttributeToSort",186],"(",["T_VARIABLE","$key",186],",",["T_WHITESPACE"," ",186],["T_VARIABLE","$value",186],")",";",["T_WHITESPACE","\n                ",186],"}",["T_WHITESPACE","\n                ",187],["T_VARIABLE","$isOrderValueExist",188],["T_WHITESPACE"," ",188],"=",["T_WHITESPACE"," ",188],["T_STRING","true",188],";",["T_WHITESPACE","\n            ",188],"}",["T_WHITESPACE","\n        ",189],"}",["T_WHITESPACE","\n        ",190],["T_IF","if",191],["T_WHITESPACE"," ",191],"(","!",["T_VARIABLE","$isOrderValueExist",191],["T_WHITESPACE"," ",191],["T_BOOLEAN_AND","&&",191],["T_WHITESPACE"," ",191],"(",["T_VARIABLE","$collection",191],["T_WHITESPACE"," ",191],["T_INSTANCEOF","instanceof",191],["T_WHITESPACE"," ",191],["T_STRING","Mage_CatalogSearch_Model_Resource_Fulltext_Collection",191],")",")",["T_WHITESPACE"," ",191],"{",["T_WHITESPACE","\n            ",191],["T_VARIABLE","$collection",192],["T_OBJECT_OPERATOR","->",192],["T_STRING","getSelect",192],"(",")",["T_OBJECT_OPERATOR","->",192],["T_STRING","order",192],"(",["T_CONSTANT_ENCAPSED_STRING","\"relevance desc\"",192],")",";",["T_WHITESPACE","\n        ",192],"}",["T_WHITESPACE","\n        ",193],["T_VARIABLE","$collection",194],["T_OBJECT_OPERATOR","->",194],["T_STRING","addAttributeToSelect",194],"(",["T_ARRAY","array",194],"(",["T_CONSTANT_ENCAPSED_STRING","'image'",194],",",["T_WHITESPACE"," ",194],["T_CONSTANT_ENCAPSED_STRING","'name'",194],",",["T_WHITESPACE"," ",194],["T_CONSTANT_ENCAPSED_STRING","'description'",194],")",")",";",["T_WHITESPACE","\n        ",194],["T_RETURN","return",195],["T_WHITESPACE"," ",195],["T_VARIABLE","$this",195],";",["T_WHITESPACE","\n    ",195],"}",["T_WHITESPACE","\n\n    ",196],["T_DOC_COMMENT","\/**\n     * Render products list xml\n     *\n     * @return string\n     *\/",198],["T_WHITESPACE","\n    ",202],["T_PROTECTED","protected",203],["T_WHITESPACE"," ",203],["T_FUNCTION","function",203],["T_WHITESPACE"," ",203],["T_STRING","_toHtml",203],"(",")",["T_WHITESPACE","\n    ",203],"{",["T_WHITESPACE","\n        ",204],["T_RETURN","return",205],["T_WHITESPACE"," ",205],["T_VARIABLE","$this",205],["T_OBJECT_OPERATOR","->",205],["T_STRING","getProductsXmlObject",205],"(",")",["T_OBJECT_OPERATOR","->",205],["T_STRING","asNiceXml",205],"(",")",";",["T_WHITESPACE","\n    ",205],"}",["T_WHITESPACE","\n",206],"}",["T_WHITESPACE","\n",207]]
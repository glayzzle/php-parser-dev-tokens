[["T_OPEN_TAG","<?php\n",1],["T_DOC_COMMENT","\/**\n * Magento\n *\n * NOTICE OF LICENSE\n *\n * This source file is subject to the Open Software License (OSL 3.0)\n * that is bundled with this package in the file LICENSE.txt.\n * It is also available through the world-wide-web at this URL:\n * http:\/\/opensource.org\/licenses\/osl-3.0.php\n * If you did not receive a copy of the license and are unable to\n * obtain it through the world-wide-web, please send an email\n * to license@magento.com so we can send you a copy immediately.\n *\n * DISCLAIMER\n *\n * Do not edit or add to this file if you wish to upgrade Magento to newer\n * versions in the future. If you wish to customize Magento for your\n * needs please refer to http:\/\/www.magento.com for more information.\n *\n * @category    Mage\n * @package     Mage_XmlConnect\n * @copyright  Copyright (c) 2006-2016 X.commerce, Inc. and affiliates (http:\/\/www.magento.com)\n * @license    http:\/\/opensource.org\/licenses\/osl-3.0.php  Open Software License (OSL 3.0)\n *\/",2],["T_WHITESPACE","\n\n",25],["T_DOC_COMMENT","\/**\n * Gift Card product options xml renderer\n *\n * @category    Mage\n * @package     Mage_XmlConnect\n * @author      Magento Core Team <core@magentocommerce.com>\n *\/",27],["T_WHITESPACE","\n",33],["T_CLASS","class",34],["T_WHITESPACE"," ",34],["T_STRING","Mage_XmlConnect_Block_Catalog_Product_Options_Giftcard",34],["T_WHITESPACE"," ",34],["T_EXTENDS","extends",34],["T_WHITESPACE"," ",34],["T_STRING","Mage_XmlConnect_Block_Catalog_Product_Options",34],["T_WHITESPACE","\n",34],"{",["T_WHITESPACE","\n    ",35],["T_DOC_COMMENT","\/**\n     * Get sender name\n     *\n     * @return string\n     *\/",36],["T_WHITESPACE","\n    ",40],["T_PUBLIC","public",41],["T_WHITESPACE"," ",41],["T_FUNCTION","function",41],["T_WHITESPACE"," ",41],["T_STRING","getSenderName",41],"(",")",["T_WHITESPACE","\n    ",41],"{",["T_WHITESPACE","\n        ",42],["T_VARIABLE","$senderName",43],["T_WHITESPACE"," ",43],"=",["T_WHITESPACE"," ",43],["T_VARIABLE","$this",43],["T_OBJECT_OPERATOR","->",43],["T_STRING","getDefaultValue",43],"(",["T_CONSTANT_ENCAPSED_STRING","'giftcard_sender_name'",43],")",";",["T_WHITESPACE","\n        ",43],["T_IF","if",44],["T_WHITESPACE"," ",44],"(","!",["T_STRING","strlen",44],"(",["T_VARIABLE","$senderName",44],")",")",["T_WHITESPACE"," ",44],"{",["T_WHITESPACE","\n            ",44],["T_VARIABLE","$firstName",45],["T_WHITESPACE"," ",45],"=",["T_WHITESPACE"," ",45],["T_STRING_CAST","(string)",45],["T_WHITESPACE"," ",45],["T_STRING","Mage",45],["T_DOUBLE_COLON","::",45],["T_STRING","getSingleton",45],"(",["T_CONSTANT_ENCAPSED_STRING","'customer\/session'",45],")",["T_OBJECT_OPERATOR","->",45],["T_STRING","getCustomer",45],"(",")",["T_OBJECT_OPERATOR","->",45],["T_STRING","getFirstname",45],"(",")",";",["T_WHITESPACE","\n            ",45],["T_VARIABLE","$lastName",46],["T_WHITESPACE","  ",46],"=",["T_WHITESPACE"," ",46],["T_STRING_CAST","(string)",46],["T_WHITESPACE"," ",46],["T_STRING","Mage",46],["T_DOUBLE_COLON","::",46],["T_STRING","getSingleton",46],"(",["T_CONSTANT_ENCAPSED_STRING","'customer\/session'",46],")",["T_OBJECT_OPERATOR","->",46],["T_STRING","getCustomer",46],"(",")",["T_OBJECT_OPERATOR","->",46],["T_STRING","getLastname",46],"(",")",";",["T_WHITESPACE","\n\n            ",46],["T_IF","if",48],["T_WHITESPACE"," ",48],"(",["T_VARIABLE","$firstName",48],["T_WHITESPACE"," ",48],["T_BOOLEAN_AND","&&",48],["T_WHITESPACE"," ",48],["T_VARIABLE","$lastName",48],")",["T_WHITESPACE"," ",48],"{",["T_WHITESPACE","\n                ",48],["T_VARIABLE","$senderName",49],["T_WHITESPACE"," ",49],"=",["T_WHITESPACE"," ",49],["T_VARIABLE","$firstName",49],["T_WHITESPACE"," ",49],".",["T_WHITESPACE"," ",49],["T_CONSTANT_ENCAPSED_STRING","' '",49],["T_WHITESPACE"," ",49],".",["T_WHITESPACE"," ",49],["T_VARIABLE","$lastName",49],";",["T_WHITESPACE","\n            ",49],"}",["T_WHITESPACE"," ",50],["T_ELSE","else",50],["T_WHITESPACE"," ",50],"{",["T_WHITESPACE","\n                ",50],["T_VARIABLE","$senderName",51],["T_WHITESPACE"," ",51],"=",["T_WHITESPACE"," ",51],["T_CONSTANT_ENCAPSED_STRING","''",51],";",["T_WHITESPACE","\n            ",51],"}",["T_WHITESPACE","\n        ",52],"}",["T_WHITESPACE","\n        ",53],["T_RETURN","return",54],["T_WHITESPACE"," ",54],["T_VARIABLE","$senderName",54],";",["T_WHITESPACE","\n    ",54],"}",["T_WHITESPACE","\n\n    ",55],["T_DOC_COMMENT","\/**\n     * Get sender email\n     *\n     * @return string\n     *\/",57],["T_WHITESPACE","\n    ",61],["T_PUBLIC","public",62],["T_WHITESPACE"," ",62],["T_FUNCTION","function",62],["T_WHITESPACE"," ",62],["T_STRING","getSenderEmail",62],"(",")",["T_WHITESPACE","\n    ",62],"{",["T_WHITESPACE","\n        ",63],["T_VARIABLE","$senderEmail",64],["T_WHITESPACE"," ",64],"=",["T_WHITESPACE"," ",64],["T_VARIABLE","$this",64],["T_OBJECT_OPERATOR","->",64],["T_STRING","getDefaultValue",64],"(",["T_CONSTANT_ENCAPSED_STRING","'giftcard_sender_email'",64],")",";",["T_WHITESPACE","\n\n        ",64],["T_IF","if",66],["T_WHITESPACE"," ",66],"(","!",["T_STRING","strlen",66],"(",["T_VARIABLE","$senderEmail",66],")",")",["T_WHITESPACE"," ",66],"{",["T_WHITESPACE","\n            ",66],["T_VARIABLE","$senderEmail",67],["T_WHITESPACE"," ",67],"=",["T_WHITESPACE"," ",67],["T_STRING_CAST","(string)",67],["T_WHITESPACE"," ",67],["T_STRING","Mage",67],["T_DOUBLE_COLON","::",67],["T_STRING","getSingleton",67],"(",["T_CONSTANT_ENCAPSED_STRING","'customer\/session'",67],")",["T_OBJECT_OPERATOR","->",67],["T_STRING","getCustomer",67],"(",")",["T_OBJECT_OPERATOR","->",67],["T_STRING","getEmail",67],"(",")",";",["T_WHITESPACE","\n        ",67],"}",["T_WHITESPACE","\n        ",68],["T_RETURN","return",69],["T_WHITESPACE"," ",69],["T_VARIABLE","$senderEmail",69],";",["T_WHITESPACE","\n    ",69],"}",["T_WHITESPACE","\n\n    ",70],["T_DOC_COMMENT","\/**\n     * Get pre-configured values from product\n     *\n     * @param  $value param id\n     * @return string\n     *\/",72],["T_WHITESPACE","\n    ",77],["T_PROTECTED","protected",78],["T_WHITESPACE"," ",78],["T_FUNCTION","function",78],["T_WHITESPACE"," ",78],["T_STRING","getDefaultValue",78],"(",["T_VARIABLE","$value",78],")",["T_WHITESPACE","\n    ",78],"{",["T_WHITESPACE","\n        ",79],["T_IF","if",80],["T_WHITESPACE"," ",80],"(",["T_VARIABLE","$this",80],["T_OBJECT_OPERATOR","->",80],["T_STRING","getProduct",80],"(",")",")",["T_WHITESPACE"," ",80],"{",["T_WHITESPACE","\n            ",80],["T_RETURN","return",81],["T_WHITESPACE"," ",81],["T_STRING_CAST","(string)",81],["T_WHITESPACE"," ",81],["T_VARIABLE","$this",81],["T_OBJECT_OPERATOR","->",81],["T_STRING","getProduct",81],"(",")",["T_OBJECT_OPERATOR","->",81],["T_STRING","getPreconfiguredValues",81],"(",")",["T_OBJECT_OPERATOR","->",81],["T_STRING","getData",81],"(",["T_VARIABLE","$value",81],")",";",["T_WHITESPACE","\n        ",81],"}",["T_WHITESPACE"," ",82],["T_ELSE","else",82],["T_WHITESPACE"," ",82],"{",["T_WHITESPACE","\n            ",82],["T_RETURN","return",83],["T_WHITESPACE"," ",83],["T_CONSTANT_ENCAPSED_STRING","''",83],";",["T_WHITESPACE","\n        ",83],"}",["T_WHITESPACE","\n    ",84],"}",["T_WHITESPACE","\n\n    ",85],["T_DOC_COMMENT","\/**\n     * Check is message available for current product\n     *\n     * @param Mage_Catalog_Model_Product $product\n     * @return bool|int\n     *\/",87],["T_WHITESPACE","\n    ",92],["T_PUBLIC","public",93],["T_WHITESPACE"," ",93],["T_FUNCTION","function",93],["T_WHITESPACE"," ",93],["T_STRING","isMessageAvailable",93],"(",["T_STRING","Mage_Catalog_Model_Product",93],["T_WHITESPACE"," ",93],["T_VARIABLE","$product",93],")",["T_WHITESPACE","\n    ",93],"{",["T_WHITESPACE","\n        ",94],["T_IF","if",95],["T_WHITESPACE"," ",95],"(",["T_VARIABLE","$product",95],["T_OBJECT_OPERATOR","->",95],["T_STRING","getUseConfigAllowMessage",95],"(",")",")",["T_WHITESPACE"," ",95],"{",["T_WHITESPACE","\n            ",95],["T_RETURN","return",96],["T_WHITESPACE"," ",96],["T_STRING","Mage",96],["T_DOUBLE_COLON","::",96],["T_STRING","getStoreConfigFlag",96],"(",["T_STRING","Enterprise_GiftCard_Model_Giftcard",96],["T_DOUBLE_COLON","::",96],["T_STRING","XML_PATH_ALLOW_MESSAGE",96],")",";",["T_WHITESPACE","\n        ",96],"}",["T_WHITESPACE"," ",97],["T_ELSE","else",97],["T_WHITESPACE"," ",97],"{",["T_WHITESPACE","\n            ",97],["T_RETURN","return",98],["T_WHITESPACE"," ",98],["T_INT_CAST","(int)",98],["T_WHITESPACE"," ",98],["T_VARIABLE","$product",98],["T_OBJECT_OPERATOR","->",98],["T_STRING","getAllowMessage",98],"(",")",";",["T_WHITESPACE","\n        ",98],"}",["T_WHITESPACE","\n    ",99],"}",["T_WHITESPACE","\n\n    ",100],["T_DOC_COMMENT","\/**\n     * Check is email available for product\n     *\n     * @param Mage_Catalog_Model_Product $product\n     * @return bool\n     *\/",102],["T_WHITESPACE","\n    ",107],["T_PUBLIC","public",108],["T_WHITESPACE"," ",108],["T_FUNCTION","function",108],["T_WHITESPACE"," ",108],["T_STRING","isEmailAvailable",108],"(",["T_STRING","Mage_Catalog_Model_Product",108],["T_WHITESPACE"," ",108],["T_VARIABLE","$product",108],")",["T_WHITESPACE","\n    ",108],"{",["T_WHITESPACE","\n        ",109],["T_IF","if",110],["T_WHITESPACE"," ",110],"(",["T_VARIABLE","$product",110],["T_OBJECT_OPERATOR","->",110],["T_STRING","getTypeInstance",110],"(",")",["T_OBJECT_OPERATOR","->",110],["T_STRING","isTypePhysical",110],"(",")",")",["T_WHITESPACE"," ",110],"{",["T_WHITESPACE","\n            ",110],["T_RETURN","return",111],["T_WHITESPACE"," ",111],["T_STRING","false",111],";",["T_WHITESPACE","\n        ",111],"}",["T_WHITESPACE","\n        ",112],["T_RETURN","return",113],["T_WHITESPACE"," ",113],["T_STRING","true",113],";",["T_WHITESPACE","\n    ",113],"}",["T_WHITESPACE","\n\n    ",114],["T_DOC_COMMENT","\/**\n     * Is amount available for product\n     *\n     * @param Mage_Catalog_Model_Product $product\n     * @return bool\n     *\/",116],["T_WHITESPACE","\n    ",121],["T_PUBLIC","public",122],["T_WHITESPACE"," ",122],["T_FUNCTION","function",122],["T_WHITESPACE"," ",122],["T_STRING","isAmountAvailable",122],"(",["T_STRING","Mage_Catalog_Model_Product",122],["T_WHITESPACE"," ",122],["T_VARIABLE","$product",122],")",["T_WHITESPACE","\n    ",122],"{",["T_WHITESPACE","\n        ",123],["T_IF","if",124],["T_WHITESPACE"," ",124],"(","!",["T_VARIABLE","$product",124],["T_OBJECT_OPERATOR","->",124],["T_STRING","getGiftcardAmounts",124],"(",")",")",["T_WHITESPACE"," ",124],"{",["T_WHITESPACE","\n            ",124],["T_RETURN","return",125],["T_WHITESPACE"," ",125],["T_STRING","false",125],";",["T_WHITESPACE","\n        ",125],"}",["T_WHITESPACE","\n        ",126],["T_RETURN","return",127],["T_WHITESPACE"," ",127],["T_STRING","true",127],";",["T_WHITESPACE","\n    ",127],"}",["T_WHITESPACE","\n\n    ",128],["T_DOC_COMMENT","\/**\n     * Generate gift card product options xml\n     *\n     * @param Mage_Catalog_Model_Product $product\n     * @param bool $isObject\n     * @return string | Mage_XmlConnect_Model_Simplexml_Element\n     *\/",130],["T_WHITESPACE","\n    ",136],["T_PUBLIC","public",137],["T_WHITESPACE"," ",137],["T_FUNCTION","function",137],["T_WHITESPACE"," ",137],["T_STRING","getProductOptionsXml",137],"(",["T_STRING","Mage_Catalog_Model_Product",137],["T_WHITESPACE"," ",137],["T_VARIABLE","$product",137],",",["T_WHITESPACE"," ",137],["T_VARIABLE","$isObject",137],["T_WHITESPACE"," ",137],"=",["T_WHITESPACE"," ",137],["T_STRING","false",137],")",["T_WHITESPACE","\n    ",137],"{",["T_WHITESPACE","\n        ",138],["T_DOC_COMMENT","\/** set current product object *\/",139],["T_WHITESPACE","\n        ",139],["T_VARIABLE","$this",140],["T_OBJECT_OPERATOR","->",140],["T_STRING","setProduct",140],"(",["T_VARIABLE","$product",140],")",";",["T_WHITESPACE","\n\n        ",140],["T_DOC_COMMENT","\/** @var $xmlModel Mage_XmlConnect_Model_Simplexml_Element *\/",142],["T_WHITESPACE","\n        ",142],["T_VARIABLE","$xmlModel",143],["T_WHITESPACE"," ",143],"=",["T_WHITESPACE"," ",143],["T_VARIABLE","$this",143],["T_OBJECT_OPERATOR","->",143],["T_STRING","getProductCustomOptionsXmlObject",143],"(",["T_VARIABLE","$product",143],")",";",["T_WHITESPACE","\n\n        ",143],["T_DOC_COMMENT","\/** @var $optionsXmlObj Mage_XmlConnect_Model_Simplexml_Element *\/",145],["T_WHITESPACE","\n        ",145],["T_VARIABLE","$optionsXmlObj",146],["T_WHITESPACE"," ",146],"=",["T_WHITESPACE"," ",146],["T_VARIABLE","$xmlModel",146],["T_OBJECT_OPERATOR","->",146],["T_STRING","options",146],";",["T_WHITESPACE","\n\n        ",146],["T_IF","if",148],["T_WHITESPACE"," ",148],"(","!",["T_VARIABLE","$product",148],["T_OBJECT_OPERATOR","->",148],["T_STRING","isSalable",148],"(",")",")",["T_WHITESPACE"," ",148],"{",["T_WHITESPACE","\n            ",148],["T_RETURN","return",149],["T_WHITESPACE"," ",149],["T_VARIABLE","$isObject",149],["T_WHITESPACE"," ",149],"?",["T_WHITESPACE"," ",149],["T_VARIABLE","$xmlModel",149],["T_WHITESPACE"," ",149],":",["T_WHITESPACE"," ",149],["T_VARIABLE","$xmlModel",149],["T_OBJECT_OPERATOR","->",149],["T_STRING","asNiceXml",149],"(",")",";",["T_WHITESPACE","\n        ",149],"}",["T_WHITESPACE","\n\n        ",150],["T_DOC_COMMENT","\/** @var $priceModel Enterprise_GiftCard_Block_Catalog_Product_Price *\/",152],["T_WHITESPACE","\n        ",152],["T_VARIABLE","$priceModel",153],["T_WHITESPACE"," ",153],"=",["T_WHITESPACE"," ",153],["T_VARIABLE","$product",153],["T_OBJECT_OPERATOR","->",153],["T_STRING","getPriceModel",153],"(",")",";",["T_WHITESPACE","\n\n        ",153],["T_DOC_COMMENT","\/** @var $coreHelper Mage_Core_Helper_Data *\/",155],["T_WHITESPACE","\n        ",155],["T_VARIABLE","$coreHelper",156],["T_WHITESPACE"," ",156],"=",["T_WHITESPACE"," ",156],["T_STRING","Mage",156],["T_DOUBLE_COLON","::",156],["T_STRING","helper",156],"(",["T_CONSTANT_ENCAPSED_STRING","'core'",156],")",";",["T_WHITESPACE","\n\n        ",156],["T_VARIABLE","$configValue",158],["T_WHITESPACE"," ",158],"=",["T_WHITESPACE"," ",158],["T_VARIABLE","$this",158],["T_OBJECT_OPERATOR","->",158],["T_STRING","getDefaultValue",158],"(",["T_CONSTANT_ENCAPSED_STRING","'giftcard_amount'",158],")",";",["T_WHITESPACE","\n\n        ",158],["T_DOC_COMMENT","\/**\n         * Render fixed amounts options\n         *\/",160],["T_WHITESPACE","\n        ",162],["T_DOC_COMMENT","\/** @var $fixedAmountsNode Mage_XmlConnect_Model_Simplexml_Element *\/",163],["T_WHITESPACE","\n        ",163],["T_VARIABLE","$fixedAmountsNode",164],["T_WHITESPACE"," ",164],"=",["T_WHITESPACE"," ",164],["T_VARIABLE","$optionsXmlObj",164],["T_OBJECT_OPERATOR","->",164],["T_STRING","addChild",164],"(",["T_CONSTANT_ENCAPSED_STRING","'fixed_amounts'",164],")",";",["T_WHITESPACE","\n        ",164],["T_IF","if",165],["T_WHITESPACE"," ",165],"(",["T_VARIABLE","$this",165],["T_OBJECT_OPERATOR","->",165],["T_STRING","isAmountAvailable",165],"(",["T_VARIABLE","$product",165],")",")",["T_WHITESPACE"," ",165],"{",["T_WHITESPACE","\n            ",165],["T_VARIABLE","$amounts",166],["T_WHITESPACE"," ",166],"=",["T_WHITESPACE"," ",166],["T_VARIABLE","$priceModel",166],["T_OBJECT_OPERATOR","->",166],["T_STRING","getSortedAmounts",166],"(",["T_VARIABLE","$product",166],")",";",["T_WHITESPACE","\n            ",166],["T_IF","if",167],["T_WHITESPACE"," ",167],"(",["T_STRING","count",167],"(",["T_VARIABLE","$amounts",167],")",")",["T_WHITESPACE"," ",167],"{",["T_WHITESPACE","\n                ",167],["T_FOREACH","foreach",168],["T_WHITESPACE"," ",168],"(",["T_VARIABLE","$amounts",168],["T_WHITESPACE"," ",168],["T_AS","as",168],["T_WHITESPACE"," ",168],["T_VARIABLE","$price",168],")",["T_WHITESPACE"," ",168],"{",["T_WHITESPACE","\n                    ",168],["T_VARIABLE","$amountNode",169],["T_WHITESPACE"," ",169],"=",["T_WHITESPACE"," ",169],["T_VARIABLE","$fixedAmountsNode",169],["T_OBJECT_OPERATOR","->",169],["T_STRING","addChild",169],"(",["T_CONSTANT_ENCAPSED_STRING","'amount'",169],")",";",["T_WHITESPACE","\n                    ",169],["T_IF","if",170],["T_WHITESPACE"," ",170],"(",["T_VARIABLE","$configValue",170],["T_WHITESPACE"," ",170],["T_IS_EQUAL","==",170],["T_WHITESPACE"," ",170],["T_VARIABLE","$price",170],")",["T_WHITESPACE"," ",170],"{",["T_WHITESPACE","\n                        ",170],["T_VARIABLE","$amountNode",171],["T_OBJECT_OPERATOR","->",171],["T_STRING","addAttribute",171],"(",["T_CONSTANT_ENCAPSED_STRING","'selected'",171],",",["T_WHITESPACE"," ",171],["T_LNUMBER","1",171],")",";",["T_WHITESPACE","\n                    ",171],"}",["T_WHITESPACE","\n                    ",172],["T_VARIABLE","$amountNode",173],["T_OBJECT_OPERATOR","->",173],["T_STRING","addAttribute",173],"(",["T_CONSTANT_ENCAPSED_STRING","'formatted_price'",173],",",["T_WHITESPACE"," ",173],["T_VARIABLE","$xmlModel",173],["T_OBJECT_OPERATOR","->",173],["T_STRING","xmlAttribute",173],"(",["T_WHITESPACE","\n                        ",173],["T_VARIABLE","$coreHelper",174],["T_OBJECT_OPERATOR","->",174],["T_STRING","currency",174],"(",["T_VARIABLE","$price",174],",",["T_WHITESPACE"," ",174],["T_STRING","true",174],",",["T_WHITESPACE"," ",174],["T_STRING","false",174],")",["T_WHITESPACE","\n                    ",174],")",")",";",["T_WHITESPACE","\n                    ",175],["T_VARIABLE","$amountNode",176],["T_OBJECT_OPERATOR","->",176],["T_STRING","addAttribute",176],"(",["T_CONSTANT_ENCAPSED_STRING","'price'",176],",",["T_WHITESPACE"," ",176],["T_VARIABLE","$price",176],")",";",["T_WHITESPACE","\n                ",176],"}",["T_WHITESPACE","\n            ",177],"}",["T_WHITESPACE","\n        ",178],"}",["T_WHITESPACE","\n\n        ",179],["T_DOC_COMMENT","\/**\n         * Render open amount options\n         *\/",181],["T_WHITESPACE","\n        ",183],["T_DOC_COMMENT","\/** @var $openAmountNode Mage_XmlConnect_Model_Simplexml_Element *\/",184],["T_WHITESPACE","\n        ",184],["T_VARIABLE","$openAmountNode",185],["T_WHITESPACE"," ",185],"=",["T_WHITESPACE"," ",185],["T_VARIABLE","$optionsXmlObj",185],["T_OBJECT_OPERATOR","->",185],["T_STRING","addChild",185],"(",["T_CONSTANT_ENCAPSED_STRING","'open_amount'",185],")",";",["T_WHITESPACE","\n        ",185],["T_IF","if",186],["T_WHITESPACE"," ",186],"(",["T_VARIABLE","$product",186],["T_OBJECT_OPERATOR","->",186],["T_STRING","getAllowOpenAmount",186],"(",")",")",["T_WHITESPACE"," ",186],"{",["T_WHITESPACE","\n            ",186],["T_VARIABLE","$openAmountNode",187],["T_OBJECT_OPERATOR","->",187],["T_STRING","addAttribute",187],"(",["T_CONSTANT_ENCAPSED_STRING","'enabled'",187],",",["T_WHITESPACE"," ",187],["T_LNUMBER","1",187],")",";",["T_WHITESPACE","\n\n            ",187],["T_IF","if",189],["T_WHITESPACE"," ",189],"(",["T_VARIABLE","$configValue",189],["T_WHITESPACE"," ",189],["T_IS_EQUAL","==",189],["T_WHITESPACE"," ",189],["T_CONSTANT_ENCAPSED_STRING","'custom'",189],")",["T_WHITESPACE"," ",189],"{",["T_WHITESPACE","\n                ",189],["T_VARIABLE","$openAmountNode",190],["T_OBJECT_OPERATOR","->",190],["T_STRING","addAttribute",190],"(",["T_CONSTANT_ENCAPSED_STRING","'selected_amount'",190],",",["T_WHITESPACE"," ",190],["T_VARIABLE","$this",190],["T_OBJECT_OPERATOR","->",190],["T_STRING","getDefaultValue",190],"(",["T_CONSTANT_ENCAPSED_STRING","'custom_giftcard_amount'",190],")",")",";",["T_WHITESPACE","\n            ",190],"}",["T_WHITESPACE","\n            ",191],["T_IF","if",192],["T_WHITESPACE"," ",192],"(",["T_VARIABLE","$priceModel",192],["T_OBJECT_OPERATOR","->",192],["T_STRING","getMinAmount",192],"(",["T_VARIABLE","$product",192],")",")",["T_WHITESPACE"," ",192],"{",["T_WHITESPACE","\n                ",192],["T_VARIABLE","$minPrice",193],["T_WHITESPACE","  ",193],"=",["T_WHITESPACE"," ",193],["T_VARIABLE","$product",193],["T_OBJECT_OPERATOR","->",193],["T_STRING","getOpenAmountMin",193],"(",")",";",["T_WHITESPACE","\n                ",193],["T_VARIABLE","$minAmount",194],["T_WHITESPACE"," ",194],"=",["T_WHITESPACE"," ",194],["T_VARIABLE","$coreHelper",194],["T_OBJECT_OPERATOR","->",194],["T_STRING","currency",194],"(",["T_VARIABLE","$minPrice",194],",",["T_WHITESPACE"," ",194],["T_STRING","true",194],",",["T_WHITESPACE"," ",194],["T_STRING","false",194],")",";",["T_WHITESPACE","\n            ",194],"}",["T_WHITESPACE"," ",195],["T_ELSE","else",195],["T_WHITESPACE"," ",195],"{",["T_WHITESPACE","\n                ",195],["T_VARIABLE","$minAmount",196],["T_WHITESPACE"," ",196],"=",["T_WHITESPACE"," ",196],["T_VARIABLE","$minPrice",196],["T_WHITESPACE"," ",196],"=",["T_WHITESPACE"," ",196],["T_LNUMBER","0",196],";",["T_WHITESPACE","\n            ",196],"}",["T_WHITESPACE","\n            ",197],["T_VARIABLE","$openAmountNode",198],["T_OBJECT_OPERATOR","->",198],["T_STRING","addAttribute",198],"(",["T_CONSTANT_ENCAPSED_STRING","'formatted_min_amount'",198],",",["T_WHITESPACE"," ",198],["T_VARIABLE","$xmlModel",198],["T_OBJECT_OPERATOR","->",198],["T_STRING","xmlAttribute",198],"(",["T_VARIABLE","$minAmount",198],")",")",";",["T_WHITESPACE","\n            ",198],["T_VARIABLE","$openAmountNode",199],["T_OBJECT_OPERATOR","->",199],["T_STRING","addAttribute",199],"(",["T_CONSTANT_ENCAPSED_STRING","'min_amount'",199],",",["T_WHITESPACE"," ",199],["T_VARIABLE","$minPrice",199],")",";",["T_WHITESPACE","\n\n            ",199],["T_IF","if",201],["T_WHITESPACE"," ",201],"(",["T_VARIABLE","$priceModel",201],["T_OBJECT_OPERATOR","->",201],["T_STRING","getMaxAmount",201],"(",["T_VARIABLE","$product",201],")",")",["T_WHITESPACE"," ",201],"{",["T_WHITESPACE","\n                ",201],["T_VARIABLE","$maxPrice",202],["T_WHITESPACE","  ",202],"=",["T_WHITESPACE"," ",202],["T_VARIABLE","$product",202],["T_OBJECT_OPERATOR","->",202],["T_STRING","getOpenAmountMax",202],"(",")",";",["T_WHITESPACE","\n                ",202],["T_VARIABLE","$maxAmount",203],["T_WHITESPACE"," ",203],"=",["T_WHITESPACE"," ",203],["T_VARIABLE","$coreHelper",203],["T_OBJECT_OPERATOR","->",203],["T_STRING","currency",203],"(",["T_VARIABLE","$maxPrice",203],",",["T_WHITESPACE"," ",203],["T_STRING","true",203],",",["T_WHITESPACE"," ",203],["T_STRING","false",203],")",";",["T_WHITESPACE","\n            ",203],"}",["T_WHITESPACE"," ",204],["T_ELSE","else",204],["T_WHITESPACE"," ",204],"{",["T_WHITESPACE","\n                ",204],["T_VARIABLE","$maxAmount",205],["T_WHITESPACE"," ",205],"=",["T_WHITESPACE"," ",205],["T_VARIABLE","$maxPrice",205],["T_WHITESPACE"," ",205],"=",["T_WHITESPACE"," ",205],["T_LNUMBER","0",205],";",["T_WHITESPACE","\n            ",205],"}",["T_WHITESPACE","\n            ",206],["T_VARIABLE","$openAmountNode",207],["T_OBJECT_OPERATOR","->",207],["T_STRING","addAttribute",207],"(",["T_CONSTANT_ENCAPSED_STRING","'formatted_max_amount'",207],",",["T_WHITESPACE"," ",207],["T_VARIABLE","$xmlModel",207],["T_OBJECT_OPERATOR","->",207],["T_STRING","xmlAttribute",207],"(",["T_VARIABLE","$maxAmount",207],")",")",";",["T_WHITESPACE","\n            ",207],["T_VARIABLE","$openAmountNode",208],["T_OBJECT_OPERATOR","->",208],["T_STRING","addAttribute",208],"(",["T_CONSTANT_ENCAPSED_STRING","'max_amount'",208],",",["T_WHITESPACE"," ",208],["T_VARIABLE","$maxPrice",208],")",";",["T_WHITESPACE","\n        ",208],"}",["T_WHITESPACE"," ",209],["T_ELSE","else",209],["T_WHITESPACE"," ",209],"{",["T_WHITESPACE","\n            ",209],["T_VARIABLE","$openAmountNode",210],["T_OBJECT_OPERATOR","->",210],["T_STRING","addAttribute",210],"(",["T_CONSTANT_ENCAPSED_STRING","'enabled'",210],",",["T_WHITESPACE"," ",210],["T_LNUMBER","0",210],")",";",["T_WHITESPACE","\n        ",210],"}",["T_WHITESPACE","\n\n        ",211],["T_DOC_COMMENT","\/**\n         * Render Gift Card form options\n         *\/",213],["T_WHITESPACE","\n        ",215],["T_VARIABLE","$form",216],["T_WHITESPACE"," ",216],"=",["T_WHITESPACE"," ",216],["T_VARIABLE","$optionsXmlObj",216],["T_OBJECT_OPERATOR","->",216],["T_STRING","addCustomChild",216],"(",["T_CONSTANT_ENCAPSED_STRING","'form'",216],",",["T_WHITESPACE"," ",216],["T_STRING","null",216],",",["T_WHITESPACE"," ",216],["T_ARRAY","array",216],"(",["T_WHITESPACE","\n            ",216],["T_CONSTANT_ENCAPSED_STRING","'name'",217],["T_WHITESPACE","      ",217],["T_DOUBLE_ARROW","=>",217],["T_WHITESPACE"," ",217],["T_CONSTANT_ENCAPSED_STRING","'giftcard-send-form'",217],",",["T_WHITESPACE","\n            ",217],["T_CONSTANT_ENCAPSED_STRING","'method'",218],["T_WHITESPACE","    ",218],["T_DOUBLE_ARROW","=>",218],["T_WHITESPACE"," ",218],["T_CONSTANT_ENCAPSED_STRING","'post'",218],["T_WHITESPACE","\n        ",218],")",")",";",["T_WHITESPACE","\n\n        ",219],["T_VARIABLE","$senderFieldset",221],["T_WHITESPACE"," ",221],"=",["T_WHITESPACE"," ",221],["T_VARIABLE","$form",221],["T_OBJECT_OPERATOR","->",221],["T_STRING","addCustomChild",221],"(",["T_CONSTANT_ENCAPSED_STRING","'fieldset'",221],",",["T_WHITESPACE"," ",221],["T_STRING","null",221],",",["T_WHITESPACE"," ",221],["T_ARRAY","array",221],"(",["T_WHITESPACE","\n            ",221],["T_CONSTANT_ENCAPSED_STRING","'legend'",222],["T_WHITESPACE"," ",222],["T_DOUBLE_ARROW","=>",222],["T_WHITESPACE"," ",222],["T_VARIABLE","$this",222],["T_OBJECT_OPERATOR","->",222],["T_STRING","__",222],"(",["T_CONSTANT_ENCAPSED_STRING","'Sender Information'",222],")",["T_WHITESPACE","\n        ",222],")",")",";",["T_WHITESPACE","\n\n        ",223],["T_VARIABLE","$senderFieldset",225],["T_OBJECT_OPERATOR","->",225],["T_STRING","addField",225],"(",["T_CONSTANT_ENCAPSED_STRING","'giftcard_sender_name'",225],",",["T_WHITESPACE"," ",225],["T_CONSTANT_ENCAPSED_STRING","'text'",225],",",["T_WHITESPACE"," ",225],["T_ARRAY","array",225],"(",["T_WHITESPACE","\n            ",225],["T_CONSTANT_ENCAPSED_STRING","'label'",226],["T_WHITESPACE","     ",226],["T_DOUBLE_ARROW","=>",226],["T_WHITESPACE"," ",226],["T_STRING","Mage",226],["T_DOUBLE_COLON","::",226],["T_STRING","helper",226],"(",["T_CONSTANT_ENCAPSED_STRING","'enterprise_giftcard'",226],")",["T_OBJECT_OPERATOR","->",226],["T_STRING","__",226],"(",["T_CONSTANT_ENCAPSED_STRING","'Sender Name'",226],")",",",["T_WHITESPACE","\n            ",226],["T_CONSTANT_ENCAPSED_STRING","'required'",227],["T_WHITESPACE","  ",227],["T_DOUBLE_ARROW","=>",227],["T_WHITESPACE"," ",227],["T_CONSTANT_ENCAPSED_STRING","'true'",227],",",["T_WHITESPACE","\n            ",227],["T_CONSTANT_ENCAPSED_STRING","'value'",228],["T_WHITESPACE","     ",228],["T_DOUBLE_ARROW","=>",228],["T_WHITESPACE"," ",228],["T_VARIABLE","$this",228],["T_OBJECT_OPERATOR","->",228],["T_STRING","getSenderName",228],"(",")",["T_WHITESPACE","\n        ",228],")",")",";",["T_WHITESPACE","\n\n        ",229],["T_VARIABLE","$recipientFieldset",231],["T_WHITESPACE"," ",231],"=",["T_WHITESPACE"," ",231],["T_VARIABLE","$form",231],["T_OBJECT_OPERATOR","->",231],["T_STRING","addCustomChild",231],"(",["T_CONSTANT_ENCAPSED_STRING","'fieldset'",231],",",["T_WHITESPACE"," ",231],["T_STRING","null",231],",",["T_WHITESPACE"," ",231],["T_ARRAY","array",231],"(",["T_WHITESPACE","\n            ",231],["T_CONSTANT_ENCAPSED_STRING","'legend'",232],["T_WHITESPACE"," ",232],["T_DOUBLE_ARROW","=>",232],["T_WHITESPACE"," ",232],["T_VARIABLE","$this",232],["T_OBJECT_OPERATOR","->",232],["T_STRING","__",232],"(",["T_CONSTANT_ENCAPSED_STRING","'Recipient Information'",232],")",["T_WHITESPACE","\n        ",232],")",")",";",["T_WHITESPACE","\n\n        ",233],["T_VARIABLE","$recipientFieldset",235],["T_OBJECT_OPERATOR","->",235],["T_STRING","addField",235],"(",["T_CONSTANT_ENCAPSED_STRING","'giftcard_recipient_name'",235],",",["T_WHITESPACE"," ",235],["T_CONSTANT_ENCAPSED_STRING","'text'",235],",",["T_WHITESPACE"," ",235],["T_ARRAY","array",235],"(",["T_WHITESPACE","\n            ",235],["T_CONSTANT_ENCAPSED_STRING","'label'",236],["T_WHITESPACE","     ",236],["T_DOUBLE_ARROW","=>",236],["T_WHITESPACE"," ",236],["T_STRING","Mage",236],["T_DOUBLE_COLON","::",236],["T_STRING","helper",236],"(",["T_CONSTANT_ENCAPSED_STRING","'enterprise_giftcard'",236],")",["T_OBJECT_OPERATOR","->",236],["T_STRING","__",236],"(",["T_CONSTANT_ENCAPSED_STRING","'Recipient Name'",236],")",",",["T_WHITESPACE","\n            ",236],["T_CONSTANT_ENCAPSED_STRING","'required'",237],["T_WHITESPACE","  ",237],["T_DOUBLE_ARROW","=>",237],["T_WHITESPACE"," ",237],["T_CONSTANT_ENCAPSED_STRING","'true'",237],",",["T_WHITESPACE","\n            ",237],["T_CONSTANT_ENCAPSED_STRING","'value'",238],["T_WHITESPACE","     ",238],["T_DOUBLE_ARROW","=>",238],["T_WHITESPACE"," ",238],["T_VARIABLE","$this",238],["T_OBJECT_OPERATOR","->",238],["T_STRING","getDefaultValue",238],"(",["T_CONSTANT_ENCAPSED_STRING","'giftcard_recipient_name'",238],")",["T_WHITESPACE","\n        ",238],")",")",";",["T_WHITESPACE","\n\n        ",239],["T_IF","if",241],["T_WHITESPACE"," ",241],"(",["T_VARIABLE","$this",241],["T_OBJECT_OPERATOR","->",241],["T_STRING","isEmailAvailable",241],"(",["T_VARIABLE","$product",241],")",")",["T_WHITESPACE"," ",241],"{",["T_WHITESPACE","\n            ",241],["T_VARIABLE","$senderFieldset",242],["T_OBJECT_OPERATOR","->",242],["T_STRING","addField",242],"(",["T_CONSTANT_ENCAPSED_STRING","'giftcard_sender_email'",242],",",["T_WHITESPACE"," ",242],["T_CONSTANT_ENCAPSED_STRING","'email'",242],",",["T_WHITESPACE"," ",242],["T_ARRAY","array",242],"(",["T_WHITESPACE","\n                ",242],["T_CONSTANT_ENCAPSED_STRING","'label'",243],["T_WHITESPACE","     ",243],["T_DOUBLE_ARROW","=>",243],["T_WHITESPACE"," ",243],["T_STRING","Mage",243],["T_DOUBLE_COLON","::",243],["T_STRING","helper",243],"(",["T_CONSTANT_ENCAPSED_STRING","'enterprise_giftcard'",243],")",["T_OBJECT_OPERATOR","->",243],["T_STRING","__",243],"(",["T_CONSTANT_ENCAPSED_STRING","'Sender Email'",243],")",",",["T_WHITESPACE","\n                ",243],["T_CONSTANT_ENCAPSED_STRING","'required'",244],["T_WHITESPACE","  ",244],["T_DOUBLE_ARROW","=>",244],["T_WHITESPACE"," ",244],["T_CONSTANT_ENCAPSED_STRING","'true'",244],",",["T_WHITESPACE","\n                ",244],["T_CONSTANT_ENCAPSED_STRING","'value'",245],["T_WHITESPACE","     ",245],["T_DOUBLE_ARROW","=>",245],["T_WHITESPACE"," ",245],["T_VARIABLE","$this",245],["T_OBJECT_OPERATOR","->",245],["T_STRING","getSenderEmail",245],"(",")",["T_WHITESPACE","\n            ",245],")",")",";",["T_WHITESPACE","\n\n            ",246],["T_VARIABLE","$recipientFieldset",248],["T_OBJECT_OPERATOR","->",248],["T_STRING","addField",248],"(",["T_CONSTANT_ENCAPSED_STRING","'giftcard_recipient_email'",248],",",["T_WHITESPACE"," ",248],["T_CONSTANT_ENCAPSED_STRING","'email'",248],",",["T_WHITESPACE"," ",248],["T_ARRAY","array",248],"(",["T_WHITESPACE","\n                ",248],["T_CONSTANT_ENCAPSED_STRING","'label'",249],["T_WHITESPACE","     ",249],["T_DOUBLE_ARROW","=>",249],["T_WHITESPACE"," ",249],["T_STRING","Mage",249],["T_DOUBLE_COLON","::",249],["T_STRING","helper",249],"(",["T_CONSTANT_ENCAPSED_STRING","'enterprise_giftcard'",249],")",["T_OBJECT_OPERATOR","->",249],["T_STRING","__",249],"(",["T_CONSTANT_ENCAPSED_STRING","'Recipient Email'",249],")",",",["T_WHITESPACE","\n                ",249],["T_CONSTANT_ENCAPSED_STRING","'required'",250],["T_WHITESPACE","  ",250],["T_DOUBLE_ARROW","=>",250],["T_WHITESPACE"," ",250],["T_CONSTANT_ENCAPSED_STRING","'true'",250],",",["T_WHITESPACE","\n                ",250],["T_CONSTANT_ENCAPSED_STRING","'value'",251],["T_WHITESPACE","     ",251],["T_DOUBLE_ARROW","=>",251],["T_WHITESPACE"," ",251],["T_VARIABLE","$this",251],["T_OBJECT_OPERATOR","->",251],["T_STRING","getDefaultValue",251],"(",["T_CONSTANT_ENCAPSED_STRING","'giftcard_recipient_email'",251],")",["T_WHITESPACE","\n            ",251],")",")",";",["T_WHITESPACE","\n        ",252],"}",["T_WHITESPACE","\n\n        ",253],["T_IF","if",255],["T_WHITESPACE"," ",255],"(",["T_VARIABLE","$this",255],["T_OBJECT_OPERATOR","->",255],["T_STRING","isMessageAvailable",255],"(",["T_VARIABLE","$product",255],")",")",["T_WHITESPACE"," ",255],"{",["T_WHITESPACE","\n            ",255],["T_VARIABLE","$messageMaxLength",256],["T_WHITESPACE"," ",256],"=",["T_WHITESPACE"," ",256],["T_INT_CAST","(int)",256],["T_WHITESPACE"," ",256],["T_STRING","Mage",256],["T_DOUBLE_COLON","::",256],["T_STRING","getStoreConfig",256],"(",["T_WHITESPACE","\n                ",256],["T_STRING","Enterprise_GiftCard_Model_Giftcard",257],["T_DOUBLE_COLON","::",257],["T_STRING","XML_PATH_MESSAGE_MAX_LENGTH",257],["T_WHITESPACE","\n            ",257],")",";",["T_WHITESPACE","\n            ",258],["T_VARIABLE","$recipientFieldset",259],["T_OBJECT_OPERATOR","->",259],["T_STRING","addField",259],"(",["T_CONSTANT_ENCAPSED_STRING","'giftcard_message'",259],",",["T_WHITESPACE"," ",259],["T_CONSTANT_ENCAPSED_STRING","'textarea'",259],",",["T_WHITESPACE"," ",259],["T_ARRAY","array",259],"(",["T_WHITESPACE","\n                ",259],["T_CONSTANT_ENCAPSED_STRING","'label'",260],["T_WHITESPACE","     ",260],["T_DOUBLE_ARROW","=>",260],["T_WHITESPACE"," ",260],["T_STRING","Mage",260],["T_DOUBLE_COLON","::",260],["T_STRING","helper",260],"(",["T_CONSTANT_ENCAPSED_STRING","'enterprise_giftcard'",260],")",["T_OBJECT_OPERATOR","->",260],["T_STRING","__",260],"(",["T_CONSTANT_ENCAPSED_STRING","'Message'",260],")",",",["T_WHITESPACE","\n                ",260],["T_CONSTANT_ENCAPSED_STRING","'required'",261],["T_WHITESPACE","  ",261],["T_DOUBLE_ARROW","=>",261],["T_WHITESPACE"," ",261],["T_CONSTANT_ENCAPSED_STRING","'false'",261],",",["T_WHITESPACE","\n                ",261],["T_CONSTANT_ENCAPSED_STRING","'max_length'",262],["T_DOUBLE_ARROW","=>",262],["T_WHITESPACE"," ",262],["T_VARIABLE","$messageMaxLength",262],",",["T_WHITESPACE","\n                ",262],["T_CONSTANT_ENCAPSED_STRING","'value'",263],["T_WHITESPACE","     ",263],["T_DOUBLE_ARROW","=>",263],["T_WHITESPACE"," ",263],["T_VARIABLE","$this",263],["T_OBJECT_OPERATOR","->",263],["T_STRING","getDefaultValue",263],"(",["T_CONSTANT_ENCAPSED_STRING","'giftcard_message'",263],")",["T_WHITESPACE","\n            ",263],")",")",";",["T_WHITESPACE","\n        ",264],"}",["T_WHITESPACE","\n        ",265],["T_RETURN","return",266],["T_WHITESPACE"," ",266],["T_VARIABLE","$isObject",266],["T_WHITESPACE"," ",266],"?",["T_WHITESPACE"," ",266],["T_VARIABLE","$xmlModel",266],["T_WHITESPACE"," ",266],":",["T_WHITESPACE"," ",266],["T_VARIABLE","$xmlModel",266],["T_OBJECT_OPERATOR","->",266],["T_STRING","asNiceXml",266],"(",")",";",["T_WHITESPACE","\n    ",266],"}",["T_WHITESPACE","\n",267],"}",["T_WHITESPACE","\n",268]]
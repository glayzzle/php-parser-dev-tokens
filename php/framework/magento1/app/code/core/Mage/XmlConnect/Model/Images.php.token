[["T_OPEN_TAG","<?php\n",1],["T_DOC_COMMENT","\/**\n * Magento\n *\n * NOTICE OF LICENSE\n *\n * This source file is subject to the Open Software License (OSL 3.0)\n * that is bundled with this package in the file LICENSE.txt.\n * It is also available through the world-wide-web at this URL:\n * http:\/\/opensource.org\/licenses\/osl-3.0.php\n * If you did not receive a copy of the license and are unable to\n * obtain it through the world-wide-web, please send an email\n * to license@magento.com so we can send you a copy immediately.\n *\n * DISCLAIMER\n *\n * Do not edit or add to this file if you wish to upgrade Magento to newer\n * versions in the future. If you wish to customize Magento for your\n * needs please refer to http:\/\/www.magento.com for more information.\n *\n * @category    Mage\n * @package     Mage_XmlConnect\n * @copyright  Copyright (c) 2006-2016 X.commerce, Inc. and affiliates (http:\/\/www.magento.com)\n * @license    http:\/\/opensource.org\/licenses\/osl-3.0.php  Open Software License (OSL 3.0)\n *\/",2],["T_WHITESPACE","\n\n",25],["T_DOC_COMMENT","\/**\n * XmlConnect Images model\n *\n * @category    Mage\n * @package     Mage_XmlConnect\n * @author      Magento Core Team <core@magentocommerce.com>\n *\/",27],["T_WHITESPACE","\n",33],["T_CLASS","class",34],["T_WHITESPACE"," ",34],["T_STRING","Mage_XmlConnect_Model_Images",34],["T_WHITESPACE"," ",34],["T_EXTENDS","extends",34],["T_WHITESPACE"," ",34],["T_STRING","Mage_Core_Model_Abstract",34],["T_WHITESPACE","\n",34],"{",["T_WHITESPACE","\n    ",35],["T_DOC_COMMENT","\/**\n     * Array of required submit data\n     *\n     * @var array\n     *\/",36],["T_WHITESPACE","\n    ",40],["T_PROTECTED","protected",41],["T_WHITESPACE"," ",41],["T_VARIABLE","$_requiredSubmitData",41],["T_WHITESPACE"," ",41],"=",["T_WHITESPACE"," ",41],["T_ARRAY","array",41],"(",["T_CONSTANT_ENCAPSED_STRING","'application_id'",41],",",["T_WHITESPACE"," ",41],["T_CONSTANT_ENCAPSED_STRING","'image_type'",41],",",["T_WHITESPACE"," ",41],["T_CONSTANT_ENCAPSED_STRING","'order'",41],")",";",["T_WHITESPACE","\n\n    ",41],["T_DOC_COMMENT","\/**\n     * Initialize resource model\n     *\/",43],["T_WHITESPACE","\n    ",45],["T_PROTECTED","protected",46],["T_WHITESPACE"," ",46],["T_FUNCTION","function",46],["T_WHITESPACE"," ",46],["T_STRING","_construct",46],"(",")",["T_WHITESPACE","\n    ",46],"{",["T_WHITESPACE","\n        ",47],["T_VARIABLE","$this",48],["T_OBJECT_OPERATOR","->",48],["T_STRING","_init",48],"(",["T_CONSTANT_ENCAPSED_STRING","'xmlconnect\/images'",48],")",";",["T_WHITESPACE","\n        ",48],["T_STRING","parent",49],["T_DOUBLE_COLON","::",49],["T_STRING","_construct",49],"(",")",";",["T_WHITESPACE","\n    ",49],"}",["T_WHITESPACE","\n\n    ",50],["T_DOC_COMMENT","\/**\n     * Delete item and repair order of images\n     *\n     * @return Mage_XmlConnect_Model_Images\n     *\/",52],["T_WHITESPACE","\n    ",56],["T_PUBLIC","public",57],["T_WHITESPACE"," ",57],["T_FUNCTION","function",57],["T_WHITESPACE"," ",57],["T_STRING","deleteAndRepairOrder",57],"(",")",["T_WHITESPACE","\n    ",57],"{",["T_WHITESPACE","\n        ",58],["T_STRING","Mage",59],["T_DOUBLE_COLON","::",59],["T_STRING","helper",59],"(",["T_CONSTANT_ENCAPSED_STRING","'xmlconnect'",59],")",["T_OBJECT_OPERATOR","->",59],["T_STRING","getApplication",59],"(",")",["T_OBJECT_OPERATOR","->",59],["T_STRING","getImageActionModel",59],"(",")",["T_OBJECT_OPERATOR","->",59],["T_STRING","deleteAction",59],"(",["T_VARIABLE","$this",59],["T_OBJECT_OPERATOR","->",59],["T_STRING","getId",59],"(",")",")",";",["T_WHITESPACE","\n        ",59],["T_VARIABLE","$this",60],["T_OBJECT_OPERATOR","->",60],["T_STRING","delete",60],"(",")",["T_OBJECT_OPERATOR","->",60],["T_STRING","_deleteImageFiles",60],"(",["T_VARIABLE","$this",60],["T_OBJECT_OPERATOR","->",60],["T_STRING","getImageFile",60],"(",")",")",["T_OBJECT_OPERATOR","->",60],["T_STRING","getResource",60],"(",")",["T_OBJECT_OPERATOR","->",60],["T_STRING","repairOrder",60],"(",["T_VARIABLE","$this",60],")",";",["T_WHITESPACE","\n        ",60],["T_RETURN","return",61],["T_WHITESPACE"," ",61],["T_VARIABLE","$this",61],";",["T_WHITESPACE","\n    ",61],"}",["T_WHITESPACE","\n\n    ",62],["T_DOC_COMMENT","\/**\n     * Delete image action\n     *\n     * @return Mage_XmlConnect_Model_Images\n     *\/",64],["T_WHITESPACE","\n    ",68],["T_PUBLIC","public",69],["T_WHITESPACE"," ",69],["T_FUNCTION","function",69],["T_WHITESPACE"," ",69],["T_STRING","deleteImageAction",69],"(",")",["T_WHITESPACE","\n    ",69],"{",["T_WHITESPACE","\n        ",70],["T_STRING","Mage",71],["T_DOUBLE_COLON","::",71],["T_STRING","helper",71],"(",["T_CONSTANT_ENCAPSED_STRING","'xmlconnect'",71],")",["T_OBJECT_OPERATOR","->",71],["T_STRING","getApplication",71],"(",")",["T_OBJECT_OPERATOR","->",71],["T_STRING","getImageActionModel",71],"(",")",["T_OBJECT_OPERATOR","->",71],["T_STRING","deleteAction",71],"(",["T_VARIABLE","$this",71],["T_OBJECT_OPERATOR","->",71],["T_STRING","getId",71],"(",")",")",";",["T_WHITESPACE","\n        ",71],["T_RETURN","return",72],["T_WHITESPACE"," ",72],["T_VARIABLE","$this",72],";",["T_WHITESPACE","\n    ",72],"}",["T_WHITESPACE","\n\n    ",73],["T_DOC_COMMENT","\/**\n     * Remove all image files\n     *\n     * @param string $imageFile\n     * @param bool $deleteOriginal\n     * @return Mage_XmlConnect_Model_Images\n     *\/",75],["T_WHITESPACE","\n    ",81],["T_PROTECTED","protected",82],["T_WHITESPACE"," ",82],["T_FUNCTION","function",82],["T_WHITESPACE"," ",82],["T_STRING","_deleteImageFiles",82],"(",["T_VARIABLE","$imageFile",82],",",["T_WHITESPACE"," ",82],["T_VARIABLE","$deleteOriginal",82],["T_WHITESPACE"," ",82],"=",["T_WHITESPACE"," ",82],["T_STRING","true",82],")",["T_WHITESPACE","\n    ",82],"{",["T_WHITESPACE","\n        ",83],["T_VARIABLE","$convertedImageFile",84],["T_WHITESPACE"," ",84],"=",["T_WHITESPACE"," ",84],["T_VARIABLE","$this",84],["T_OBJECT_OPERATOR","->",84],["T_STRING","_convertFileExtensionToPng",84],"(",["T_VARIABLE","$imageFile",84],")",";",["T_WHITESPACE","\n        ",84],["T_VARIABLE","$ioAdapter",85],["T_WHITESPACE"," ",85],"=",["T_WHITESPACE"," ",85],["T_NEW","new",85],["T_WHITESPACE"," ",85],["T_STRING","Varien_Io_File",85],"(",")",";",["T_WHITESPACE","\n        ",85],["T_VARIABLE","$baseImageDir",86],["T_WHITESPACE"," ",86],"=",["T_WHITESPACE"," ",86],["T_STRING","Mage",86],["T_DOUBLE_COLON","::",86],["T_STRING","helper",86],"(",["T_CONSTANT_ENCAPSED_STRING","'xmlconnect\/image'",86],")",["T_OBJECT_OPERATOR","->",86],["T_STRING","getMediaPath",86],"(",["T_CONSTANT_ENCAPSED_STRING","'custom'",86],")",";",["T_WHITESPACE","\n        ",86],["T_IF","if",87],["T_WHITESPACE"," ",87],"(",["T_STRING","is_dir",87],"(",["T_VARIABLE","$baseImageDir",87],")",")",["T_WHITESPACE"," ",87],"{",["T_WHITESPACE","\n            ",87],["T_VARIABLE","$dirArray",88],["T_WHITESPACE"," ",88],"=",["T_WHITESPACE"," ",88],["T_STRING","array_diff",88],"(",["T_STRING","scandir",88],"(",["T_VARIABLE","$baseImageDir",88],")",",",["T_WHITESPACE"," ",88],["T_ARRAY","array",88],"(",["T_CONSTANT_ENCAPSED_STRING","'.'",88],",",["T_WHITESPACE"," ",88],["T_CONSTANT_ENCAPSED_STRING","'..'",88],")",")",";",["T_WHITESPACE","\n            ",88],["T_FOREACH","foreach",89],["T_WHITESPACE"," ",89],"(",["T_VARIABLE","$dirArray",89],["T_WHITESPACE"," ",89],["T_AS","as",89],["T_WHITESPACE"," ",89],["T_VARIABLE","$item",89],")",["T_WHITESPACE"," ",89],"{",["T_WHITESPACE","\n                ",89],["T_IF","if",90],["T_WHITESPACE"," ",90],"(","!",["T_STRING","is_dir",90],"(",["T_VARIABLE","$baseImageDir",90],["T_WHITESPACE"," ",90],".",["T_WHITESPACE"," ",90],["T_STRING","DS",90],["T_WHITESPACE"," ",90],".",["T_WHITESPACE"," ",90],["T_VARIABLE","$item",90],")",")",["T_WHITESPACE"," ",90],"{",["T_WHITESPACE","\n                    ",90],["T_CONTINUE","continue",91],";",["T_WHITESPACE","\n                ",91],"}",["T_WHITESPACE","\n                ",92],["T_VARIABLE","$ioAdapter",93],["T_OBJECT_OPERATOR","->",93],["T_STRING","rm",93],"(",["T_VARIABLE","$baseImageDir",93],["T_WHITESPACE"," ",93],".",["T_WHITESPACE"," ",93],["T_STRING","DS",93],["T_WHITESPACE"," ",93],".",["T_WHITESPACE"," ",93],["T_VARIABLE","$item",93],["T_WHITESPACE"," ",93],".",["T_WHITESPACE"," ",93],["T_STRING","DS",93],["T_WHITESPACE"," ",93],".",["T_WHITESPACE"," ",93],["T_STRING","basename",93],"(",["T_VARIABLE","$convertedImageFile",93],")",")",";",["T_WHITESPACE","\n            ",93],"}",["T_WHITESPACE","\n        ",94],"}",["T_WHITESPACE","\n        ",95],["T_IF","if",96],["T_WHITESPACE"," ",96],"(",["T_VARIABLE","$deleteOriginal",96],")",["T_WHITESPACE"," ",96],"{",["T_WHITESPACE","\n            ",96],["T_VARIABLE","$ioAdapter",97],["T_OBJECT_OPERATOR","->",97],["T_STRING","rm",97],"(",["T_STRING","self",97],["T_DOUBLE_COLON","::",97],["T_STRING","getBasePath",97],"(",")",["T_WHITESPACE"," ",97],".",["T_WHITESPACE"," ",97],["T_STRING","DS",97],["T_WHITESPACE"," ",97],".",["T_WHITESPACE"," ",97],["T_STRING","basename",97],"(",["T_VARIABLE","$imageFile",97],")",")",";",["T_WHITESPACE","\n        ",97],"}",["T_WHITESPACE","\n        ",98],["T_RETURN","return",99],["T_WHITESPACE"," ",99],["T_VARIABLE","$this",99],";",["T_WHITESPACE","\n    ",99],"}",["T_WHITESPACE","\n\n    ",100],["T_DOC_COMMENT","\/**\n     * Check image type\n     *\n     * @param string $type\n     * @return Mage_XmlConnect_Model_Images\n     *\/",102],["T_WHITESPACE","\n    ",107],["T_PUBLIC","public",108],["T_WHITESPACE"," ",108],["T_FUNCTION","function",108],["T_WHITESPACE"," ",108],["T_STRING","checkType",108],"(",["T_VARIABLE","$type",108],["T_WHITESPACE"," ",108],"=",["T_WHITESPACE"," ",108],["T_CONSTANT_ENCAPSED_STRING","''",108],")",["T_WHITESPACE","\n    ",108],"{",["T_WHITESPACE","\n        ",109],["T_IF","if",110],["T_WHITESPACE"," ",110],"(",["T_VARIABLE","$type",110],")",["T_WHITESPACE"," ",110],"{",["T_WHITESPACE","\n            ",110],["T_VARIABLE","$this",111],["T_OBJECT_OPERATOR","->",111],["T_STRING","setImageType",111],"(",["T_VARIABLE","$type",111],")",";",["T_WHITESPACE","\n        ",111],"}",["T_WHITESPACE","\n\n        ",112],["T_IF","if",114],["T_WHITESPACE"," ",114],"(","!",["T_VARIABLE","$this",114],["T_OBJECT_OPERATOR","->",114],["T_STRING","getImageType",114],"(",")",")",["T_WHITESPACE"," ",114],"{",["T_WHITESPACE","\n            ",114],["T_STRING","Mage",115],["T_DOUBLE_COLON","::",115],["T_STRING","throwException",115],"(",["T_STRING","Mage",115],["T_DOUBLE_COLON","::",115],["T_STRING","helper",115],"(",["T_CONSTANT_ENCAPSED_STRING","'xmlconnect'",115],")",["T_OBJECT_OPERATOR","->",115],["T_STRING","__",115],"(",["T_CONSTANT_ENCAPSED_STRING","'Image type is required.'",115],")",")",";",["T_WHITESPACE","\n        ",115],"}",["T_WHITESPACE","\n        ",116],["T_RETURN","return",117],["T_WHITESPACE"," ",117],["T_VARIABLE","$this",117],";",["T_WHITESPACE","\n    ",117],"}",["T_WHITESPACE","\n\n    ",118],["T_DOC_COMMENT","\/**\n     * Get image count for image type\n     *\n     * @param string $type\n     * @return int\n     *\/",120],["T_WHITESPACE","\n    ",125],["T_PUBLIC","public",126],["T_WHITESPACE"," ",126],["T_FUNCTION","function",126],["T_WHITESPACE"," ",126],["T_STRING","getImageCount",126],"(",["T_VARIABLE","$type",126],["T_WHITESPACE"," ",126],"=",["T_WHITESPACE"," ",126],["T_CONSTANT_ENCAPSED_STRING","''",126],")",["T_WHITESPACE","\n    ",126],"{",["T_WHITESPACE","\n        ",127],["T_IF","if",128],["T_WHITESPACE"," ",128],"(","!",["T_VARIABLE","$type",128],")",["T_WHITESPACE"," ",128],"{",["T_WHITESPACE","\n            ",128],["T_VARIABLE","$type",129],["T_WHITESPACE"," ",129],"=",["T_WHITESPACE"," ",129],["T_VARIABLE","$this",129],["T_OBJECT_OPERATOR","->",129],["T_STRING","getImageType",129],"(",")",";",["T_WHITESPACE","\n        ",129],"}",["T_WHITESPACE","\n        ",130],["T_RETURN","return",131],["T_WHITESPACE"," ",131],["T_STRING","Mage",131],["T_DOUBLE_COLON","::",131],["T_STRING","helper",131],"(",["T_CONSTANT_ENCAPSED_STRING","'xmlconnect'",131],")",["T_OBJECT_OPERATOR","->",131],["T_STRING","getDeviceHelper",131],"(",")",["T_OBJECT_OPERATOR","->",131],["T_STRING","getImageCount",131],"(",["T_VARIABLE","$type",131],")",";",["T_WHITESPACE","\n    ",131],"}",["T_WHITESPACE","\n\n    ",132],["T_DOC_COMMENT","\/**\n     * Check is application record exists\n     *\n     * @param int $appId\n     * @return Mage_XmlConnect_Model_Images\n     *\/",134],["T_WHITESPACE","\n    ",139],["T_PUBLIC","public",140],["T_WHITESPACE"," ",140],["T_FUNCTION","function",140],["T_WHITESPACE"," ",140],["T_STRING","checkApplication",140],"(",["T_VARIABLE","$appId",140],["T_WHITESPACE"," ",140],"=",["T_WHITESPACE"," ",140],["T_LNUMBER","0",140],")",["T_WHITESPACE","\n    ",140],"{",["T_WHITESPACE","\n        ",141],["T_IF","if",142],["T_WHITESPACE"," ",142],"(","!",["T_VARIABLE","$appId",142],")",["T_WHITESPACE"," ",142],"{",["T_WHITESPACE","\n            ",142],["T_VARIABLE","$appId",143],["T_WHITESPACE"," ",143],"=",["T_WHITESPACE"," ",143],["T_VARIABLE","$this",143],["T_OBJECT_OPERATOR","->",143],["T_STRING","getApplicationId",143],"(",")",";",["T_WHITESPACE","\n        ",143],"}",["T_WHITESPACE","\n\n        ",144],["T_VARIABLE","$appModel",146],["T_WHITESPACE"," ",146],"=",["T_WHITESPACE"," ",146],["T_STRING","Mage",146],["T_DOUBLE_COLON","::",146],["T_STRING","getModel",146],"(",["T_CONSTANT_ENCAPSED_STRING","'xmlconnect\/application'",146],")",["T_OBJECT_OPERATOR","->",146],["T_STRING","load",146],"(",["T_VARIABLE","$appId",146],")",";",["T_WHITESPACE","\n        ",146],["T_IF","if",147],["T_WHITESPACE"," ",147],"(","!",["T_VARIABLE","$appModel",147],["T_OBJECT_OPERATOR","->",147],["T_STRING","getId",147],"(",")",")",["T_WHITESPACE"," ",147],"{",["T_WHITESPACE","\n            ",147],["T_STRING","Mage",148],["T_DOUBLE_COLON","::",148],["T_STRING","throwException",148],"(",["T_STRING","Mage",148],["T_DOUBLE_COLON","::",148],["T_STRING","helper",148],"(",["T_CONSTANT_ENCAPSED_STRING","'xmlconnect'",148],")",["T_OBJECT_OPERATOR","->",148],["T_STRING","__",148],"(",["T_CONSTANT_ENCAPSED_STRING","'Application doesn\\'t exist.'",148],")",")",";",["T_WHITESPACE","\n        ",148],"}",["T_WHITESPACE","\n        ",149],["T_RETURN","return",150],["T_WHITESPACE"," ",150],["T_VARIABLE","$this",150],";",["T_WHITESPACE","\n    ",150],"}",["T_WHITESPACE","\n\n    ",151],["T_DOC_COMMENT","\/**\n     * Validate submit data\n     *\n     * @param array $data\n     * @return Mage_XmlConnect_Model_Images\n     *\/",153],["T_WHITESPACE","\n    ",158],["T_PUBLIC","public",159],["T_WHITESPACE"," ",159],["T_FUNCTION","function",159],["T_WHITESPACE"," ",159],["T_STRING","validateAndSetSubmitData",159],"(",["T_VARIABLE","$data",159],")",["T_WHITESPACE","\n    ",159],"{",["T_WHITESPACE","\n        ",160],["T_FOREACH","foreach",161],["T_WHITESPACE"," ",161],"(",["T_VARIABLE","$this",161],["T_OBJECT_OPERATOR","->",161],["T_STRING","_requiredSubmitData",161],["T_WHITESPACE"," ",161],["T_AS","as",161],["T_WHITESPACE"," ",161],["T_VARIABLE","$submitValue",161],")",["T_WHITESPACE"," ",161],"{",["T_WHITESPACE","\n            ",161],["T_IF","if",162],["T_WHITESPACE"," ",162],"(",["T_EMPTY","empty",162],"(",["T_VARIABLE","$data",162],"[",["T_VARIABLE","$submitValue",162],"]",")",")",["T_WHITESPACE"," ",162],"{",["T_WHITESPACE","\n                ",162],["T_STRING","Mage",163],["T_DOUBLE_COLON","::",163],["T_STRING","throwException",163],"(",["T_STRING","Mage",163],["T_DOUBLE_COLON","::",163],["T_STRING","helper",163],"(",["T_CONSTANT_ENCAPSED_STRING","'xmlconnect'",163],")",["T_OBJECT_OPERATOR","->",163],["T_STRING","__",163],"(",["T_CONSTANT_ENCAPSED_STRING","'Image %s is required.'",163],",",["T_WHITESPACE"," ",163],["T_VARIABLE","$submitValue",163],")",")",";",["T_WHITESPACE","\n            ",163],"}",["T_WHITESPACE"," ",164],["T_ELSE","else",164],["T_WHITESPACE"," ",164],"{",["T_WHITESPACE","\n                ",164],["T_VARIABLE","$this",165],["T_OBJECT_OPERATOR","->",165],["T_STRING","setData",165],"(",["T_VARIABLE","$submitValue",165],",",["T_WHITESPACE"," ",165],["T_VARIABLE","$data",165],"[",["T_VARIABLE","$submitValue",165],"]",")",";",["T_WHITESPACE","\n            ",165],"}",["T_WHITESPACE","\n        ",166],"}",["T_WHITESPACE","\n        ",167],["T_RETURN","return",168],["T_WHITESPACE"," ",168],["T_VARIABLE","$this",168],";",["T_WHITESPACE","\n    ",168],"}",["T_WHITESPACE","\n\n    ",169],["T_DOC_COMMENT","\/**\n     * Retrieve Base files path\n     *\n     * @param string $filePath\n     * @return string\n     *\/",171],["T_WHITESPACE","\n    ",176],["T_PUBLIC","public",177],["T_WHITESPACE"," ",177],["T_STATIC","static",177],["T_WHITESPACE"," ",177],["T_FUNCTION","function",177],["T_WHITESPACE"," ",177],["T_STRING","getBasePath",177],"(",["T_VARIABLE","$filePath",177],["T_WHITESPACE"," ",177],"=",["T_WHITESPACE"," ",177],["T_CONSTANT_ENCAPSED_STRING","''",177],")",["T_WHITESPACE","\n    ",177],"{",["T_WHITESPACE","\n        ",178],["T_IF","if",179],["T_WHITESPACE"," ",179],"(",["T_VARIABLE","$filePath",179],["T_WHITESPACE"," ",179],["T_BOOLEAN_AND","&&",179],["T_WHITESPACE"," ",179],["T_STRING","strpos",179],"(",["T_VARIABLE","$filePath",179],",",["T_WHITESPACE"," ",179],["T_STRING","DS",179],")",["T_WHITESPACE"," ",179],["T_IS_NOT_IDENTICAL","!==",179],["T_WHITESPACE"," ",179],["T_LNUMBER","0",179],")",["T_WHITESPACE"," ",179],"{",["T_WHITESPACE","\n            ",179],["T_VARIABLE","$filePath",180],["T_WHITESPACE"," ",180],"=",["T_WHITESPACE"," ",180],["T_STRING","DS",180],["T_WHITESPACE"," ",180],".",["T_WHITESPACE"," ",180],["T_VARIABLE","$filePath",180],";",["T_WHITESPACE","\n        ",180],"}",["T_WHITESPACE","\n        ",181],["T_RETURN","return",182],["T_WHITESPACE"," ",182],["T_STRING","Mage",182],["T_DOUBLE_COLON","::",182],["T_STRING","getBaseDir",182],"(",["T_CONSTANT_ENCAPSED_STRING","'media'",182],")",["T_WHITESPACE"," ",182],".",["T_WHITESPACE"," ",182],["T_STRING","DS",182],["T_WHITESPACE"," ",182],".",["T_WHITESPACE"," ",182],["T_CONSTANT_ENCAPSED_STRING","'xmlconnect'",182],["T_WHITESPACE"," ",182],".",["T_WHITESPACE"," ",182],["T_STRING","DS",182],["T_WHITESPACE"," ",182],".",["T_WHITESPACE"," ",182],["T_CONSTANT_ENCAPSED_STRING","'original'",182],["T_WHITESPACE"," ",182],".",["T_WHITESPACE"," ",182],["T_VARIABLE","$filePath",182],";",["T_WHITESPACE","\n    ",182],"}",["T_WHITESPACE","\n\n    ",183],["T_DOC_COMMENT","\/**\n     * Get original image url\n     *\n     * @param string $image\n     * @return string\n     *\/",185],["T_WHITESPACE","\n    ",190],["T_PUBLIC","public",191],["T_WHITESPACE"," ",191],["T_FUNCTION","function",191],["T_WHITESPACE"," ",191],["T_STRING","getImageUrl",191],"(",["T_VARIABLE","$image",191],["T_WHITESPACE"," ",191],"=",["T_WHITESPACE"," ",191],["T_CONSTANT_ENCAPSED_STRING","''",191],")",["T_WHITESPACE","\n    ",191],"{",["T_WHITESPACE","\n        ",192],["T_IF","if",193],["T_WHITESPACE"," ",193],"(",["T_VARIABLE","$image",193],["T_WHITESPACE"," ",193],["T_BOOLEAN_AND","&&",193],["T_WHITESPACE"," ",193],["T_STRING","strpos",193],"(",["T_VARIABLE","$image",193],",",["T_WHITESPACE"," ",193],["T_CONSTANT_ENCAPSED_STRING","'\/'",193],")",["T_WHITESPACE"," ",193],["T_IS_NOT_IDENTICAL","!==",193],["T_WHITESPACE"," ",193],["T_LNUMBER","0",193],")",["T_WHITESPACE"," ",193],"{",["T_WHITESPACE","\n            ",193],["T_VARIABLE","$image",194],["T_WHITESPACE"," ",194],"=",["T_WHITESPACE"," ",194],["T_CONSTANT_ENCAPSED_STRING","'\/'",194],["T_WHITESPACE"," ",194],".",["T_WHITESPACE"," ",194],["T_VARIABLE","$image",194],";",["T_WHITESPACE","\n        ",194],"}",["T_WHITESPACE","\n\n        ",195],["T_RETURN","return",197],["T_WHITESPACE"," ",197],["T_STRING","Mage",197],["T_DOUBLE_COLON","::",197],["T_STRING","getBaseUrl",197],"(",["T_CONSTANT_ENCAPSED_STRING","'media'",197],")",["T_WHITESPACE"," ",197],".",["T_WHITESPACE"," ",197],["T_CONSTANT_ENCAPSED_STRING","'xmlconnect\/original'",197],["T_WHITESPACE"," ",197],".",["T_WHITESPACE"," ",197],["T_VARIABLE","$image",197],";",["T_WHITESPACE","\n    ",197],"}",["T_WHITESPACE","\n\n    ",198],["T_DOC_COMMENT","\/**\n     * Get device image array by type\n     *\n     * @param string $type\n     * @param int $limit\n     * @param int $offset\n     * @return array\n     *\/",200],["T_WHITESPACE","\n    ",207],["T_PUBLIC","public",208],["T_WHITESPACE"," ",208],["T_FUNCTION","function",208],["T_WHITESPACE"," ",208],["T_STRING","getDeviceImagesByType",208],"(",["T_VARIABLE","$type",208],",",["T_WHITESPACE"," ",208],["T_VARIABLE","$limit",208],["T_WHITESPACE"," ",208],"=",["T_WHITESPACE"," ",208],["T_STRING","null",208],",",["T_WHITESPACE"," ",208],["T_VARIABLE","$offset",208],["T_WHITESPACE"," ",208],"=",["T_WHITESPACE"," ",208],["T_STRING","null",208],")",["T_WHITESPACE","\n    ",208],"{",["T_WHITESPACE","\n        ",209],["T_IF","if",210],["T_WHITESPACE"," ",210],"(","!",["T_VARIABLE","$this",210],["T_OBJECT_OPERATOR","->",210],["T_STRING","getApplicationId",210],"(",")",")",["T_WHITESPACE"," ",210],"{",["T_WHITESPACE","\n            ",210],["T_VARIABLE","$this",211],["T_OBJECT_OPERATOR","->",211],["T_STRING","setApplicationId",211],"(",["T_STRING","Mage",211],["T_DOUBLE_COLON","::",211],["T_STRING","helper",211],"(",["T_CONSTANT_ENCAPSED_STRING","'xmlconnect'",211],")",["T_OBJECT_OPERATOR","->",211],["T_STRING","getApplicationId",211],"(",")",")",";",["T_WHITESPACE","\n        ",211],"}",["T_WHITESPACE","\n        ",212],["T_RETURN","return",213],["T_WHITESPACE"," ",213],["T_VARIABLE","$this",213],["T_OBJECT_OPERATOR","->",213],["T_STRING","getCollection",213],"(",")",["T_OBJECT_OPERATOR","->",213],["T_STRING","addApplicationToFilter",213],"(",["T_VARIABLE","$this",213],["T_OBJECT_OPERATOR","->",213],["T_STRING","getApplicationId",213],"(",")",")",["T_OBJECT_OPERATOR","->",213],["T_STRING","addImageTypeToFilter",213],"(",["T_VARIABLE","$type",213],")",["T_WHITESPACE","\n            ",213],["T_OBJECT_OPERATOR","->",214],["T_STRING","setPositionOrder",214],"(",")",["T_OBJECT_OPERATOR","->",214],["T_STRING","setLimit",214],"(",["T_VARIABLE","$limit",214],",",["T_WHITESPACE"," ",214],["T_VARIABLE","$offset",214],")",["T_OBJECT_OPERATOR","->",214],["T_STRING","getData",214],"(",")",";",["T_WHITESPACE","\n    ",214],"}",["T_WHITESPACE","\n\n    ",215],["T_DOC_COMMENT","\/**\n     * Get device image by type\n     *\n     * @param string $type\n     * @return array|bool\n     *\/",217],["T_WHITESPACE","\n    ",222],["T_PUBLIC","public",223],["T_WHITESPACE"," ",223],["T_FUNCTION","function",223],["T_WHITESPACE"," ",223],["T_STRING","getImageItemByType",223],"(",["T_VARIABLE","$type",223],")",["T_WHITESPACE","\n    ",223],"{",["T_WHITESPACE","\n        ",224],["T_IF","if",225],["T_WHITESPACE"," ",225],"(","!",["T_VARIABLE","$this",225],["T_OBJECT_OPERATOR","->",225],["T_STRING","getApplicationId",225],"(",")",")",["T_WHITESPACE"," ",225],"{",["T_WHITESPACE","\n            ",225],["T_VARIABLE","$this",226],["T_OBJECT_OPERATOR","->",226],["T_STRING","setApplicationId",226],"(",["T_STRING","Mage",226],["T_DOUBLE_COLON","::",226],["T_STRING","helper",226],"(",["T_CONSTANT_ENCAPSED_STRING","'xmlconnect'",226],")",["T_OBJECT_OPERATOR","->",226],["T_STRING","getApplicationId",226],"(",")",")",";",["T_WHITESPACE","\n        ",226],"}",["T_WHITESPACE","\n        ",227],["T_RETURN","return",228],["T_WHITESPACE"," ",228],["T_VARIABLE","$this",228],["T_OBJECT_OPERATOR","->",228],["T_STRING","getCollection",228],"(",")",["T_OBJECT_OPERATOR","->",228],["T_STRING","addApplicationToFilter",228],"(",["T_VARIABLE","$this",228],["T_OBJECT_OPERATOR","->",228],["T_STRING","getApplicationId",228],"(",")",")",["T_OBJECT_OPERATOR","->",228],["T_STRING","addImageTypeToFilter",228],"(",["T_VARIABLE","$type",228],")",["T_WHITESPACE","\n            ",228],["T_OBJECT_OPERATOR","->",229],["T_STRING","setPositionOrder",229],"(",")",["T_OBJECT_OPERATOR","->",229],["T_STRING","fetchItem",229],"(",")",";",["T_WHITESPACE","\n    ",229],"}",["T_WHITESPACE","\n\n    ",230],["T_DOC_COMMENT","\/**\n     * Check is image exists in original folder\n     *\n     * @param string $imagePath\n     * @return bool\n     *\/",232],["T_WHITESPACE","\n    ",237],["T_PROTECTED","protected",238],["T_WHITESPACE","  ",238],["T_FUNCTION","function",238],["T_WHITESPACE"," ",238],["T_STRING","_checkImageExists",238],"(",["T_VARIABLE","$imagePath",238],")",["T_WHITESPACE","\n    ",238],"{",["T_WHITESPACE","\n        ",239],["T_VARIABLE","$image",240],["T_WHITESPACE"," ",240],"=",["T_WHITESPACE"," ",240],["T_NEW","new",240],["T_WHITESPACE"," ",240],["T_STRING","Varien_Io_File",240],"(",")",";",["T_WHITESPACE","\n        ",240],["T_RETURN","return",241],["T_WHITESPACE"," ",241],["T_VARIABLE","$image",241],["T_OBJECT_OPERATOR","->",241],["T_STRING","fileExists",241],"(",["T_STRING","self",241],["T_DOUBLE_COLON","::",241],["T_STRING","getBasePath",241],"(",")",["T_WHITESPACE"," ",241],".",["T_WHITESPACE"," ",241],["T_VARIABLE","$imagePath",241],")",";",["T_WHITESPACE","\n    ",241],"}",["T_WHITESPACE","\n\n    ",242],["T_DOC_COMMENT","\/**\n     * Retrieve custom size image url\n     *\n     * @param string $imageFile\n     * @param int $width\n     * @param int $height\n     * @return string|bool\n     *\/",244],["T_WHITESPACE","\n    ",251],["T_PUBLIC","public",252],["T_WHITESPACE"," ",252],["T_FUNCTION","function",252],["T_WHITESPACE"," ",252],["T_STRING","getCustomSizeImageUrl",252],"(",["T_VARIABLE","$imageFile",252],",",["T_WHITESPACE"," ",252],["T_VARIABLE","$width",252],["T_WHITESPACE"," ",252],"=",["T_WHITESPACE"," ",252],["T_LNUMBER","100",252],",",["T_WHITESPACE"," ",252],["T_VARIABLE","$height",252],["T_WHITESPACE"," ",252],"=",["T_WHITESPACE"," ",252],["T_LNUMBER","100",252],")",["T_WHITESPACE","\n    ",252],"{",["T_WHITESPACE","\n        ",253],["T_DOC_COMMENT","\/** @var $imageHelper Mage_XmlConnect_Helper_Image *\/",254],["T_WHITESPACE","\n        ",254],["T_VARIABLE","$imageHelper",255],["T_WHITESPACE"," ",255],"=",["T_WHITESPACE"," ",255],["T_STRING","Mage",255],["T_DOUBLE_COLON","::",255],["T_STRING","helper",255],"(",["T_CONSTANT_ENCAPSED_STRING","'xmlconnect\/image'",255],")",";",["T_WHITESPACE","\n        ",255],["T_VARIABLE","$screenSize",256],["T_WHITESPACE"," ",256],"=",["T_WHITESPACE"," ",256],["T_VARIABLE","$width",256],["T_WHITESPACE"," ",256],".",["T_WHITESPACE"," ",256],["T_CONSTANT_ENCAPSED_STRING","'x'",256],["T_WHITESPACE"," ",256],".",["T_WHITESPACE"," ",256],["T_VARIABLE","$height",256],";",["T_WHITESPACE","\n        ",256],["T_VARIABLE","$customDir",257],["T_WHITESPACE"," ",257],"=",["T_WHITESPACE"," ",257],["T_VARIABLE","$imageHelper",257],["T_OBJECT_OPERATOR","->",257],["T_STRING","getMediaPath",257],"(",["T_CONSTANT_ENCAPSED_STRING","'custom'",257],["T_WHITESPACE"," ",257],".",["T_WHITESPACE"," ",257],["T_STRING","DS",257],["T_WHITESPACE"," ",257],".",["T_WHITESPACE"," ",257],["T_VARIABLE","$screenSize",257],")",";",["T_WHITESPACE","\n        ",257],["T_VARIABLE","$ioFile",258],["T_WHITESPACE"," ",258],"=",["T_WHITESPACE"," ",258],["T_NEW","new",258],["T_WHITESPACE"," ",258],["T_STRING","Varien_Io_File",258],"(",")",";",["T_WHITESPACE","\n        ",258],["T_VARIABLE","$ioFile",259],["T_OBJECT_OPERATOR","->",259],["T_STRING","checkAndCreateFolder",259],"(",["T_VARIABLE","$customDir",259],")",";",["T_WHITESPACE","\n        ",259],["T_VARIABLE","$filePath",260],["T_WHITESPACE"," ",260],"=",["T_WHITESPACE"," ",260],["T_STRING","self",260],["T_DOUBLE_COLON","::",260],["T_STRING","getBasePath",260],"(",")",["T_WHITESPACE"," ",260],".",["T_WHITESPACE"," ",260],["T_STRING","DS",260],["T_WHITESPACE"," ",260],".",["T_WHITESPACE"," ",260],["T_VARIABLE","$imageFile",260],";",["T_WHITESPACE","\n        ",260],["T_VARIABLE","$isImagePng",261],["T_WHITESPACE"," ",261],"=",["T_WHITESPACE"," ",261],["T_STRING","true",261],";",["T_WHITESPACE","\n\n        ",261],["T_IF","if",263],["T_WHITESPACE"," ",263],"(","!",["T_VARIABLE","$ioFile",263],["T_OBJECT_OPERATOR","->",263],["T_STRING","fileExists",263],"(",["T_VARIABLE","$filePath",263],")",")",["T_WHITESPACE"," ",263],"{",["T_WHITESPACE","\n            ",263],["T_RETURN","return",264],["T_WHITESPACE"," ",264],["T_STRING","false",264],";",["T_WHITESPACE","\n        ",264],"}",["T_WHITESPACE","\n\n        ",265],["T_VARIABLE","$originalImageType",267],["T_WHITESPACE"," ",267],"=",["T_WHITESPACE"," ",267],["T_VARIABLE","$this",267],["T_OBJECT_OPERATOR","->",267],["T_STRING","_getImageType",267],"(",["T_VARIABLE","$filePath",267],")",";",["T_WHITESPACE","\n        ",267],["T_IF","if",268],["T_WHITESPACE"," ",268],"(",["T_VARIABLE","$originalImageType",268],["T_WHITESPACE"," ",268],["T_IS_NOT_IDENTICAL","!==",268],["T_WHITESPACE"," ",268],["T_STRING","IMAGETYPE_PNG",268],")",["T_WHITESPACE"," ",268],"{",["T_WHITESPACE","\n            ",268],["T_VARIABLE","$imageFile",269],["T_WHITESPACE"," ",269],"=",["T_WHITESPACE"," ",269],["T_VARIABLE","$this",269],["T_OBJECT_OPERATOR","->",269],["T_STRING","_convertFileExtensionToPng",269],"(",["T_VARIABLE","$imageFile",269],")",";",["T_WHITESPACE","\n            ",269],["T_VARIABLE","$isImagePng",270],["T_WHITESPACE"," ",270],"=",["T_WHITESPACE"," ",270],["T_STRING","false",270],";",["T_WHITESPACE","\n        ",270],"}",["T_WHITESPACE","\n\n        ",271],["T_VARIABLE","$customSizeFile",273],["T_WHITESPACE"," ",273],"=",["T_WHITESPACE"," ",273],["T_VARIABLE","$customDir",273],["T_WHITESPACE"," ",273],".",["T_WHITESPACE"," ",273],["T_STRING","DS",273],["T_WHITESPACE"," ",273],".",["T_WHITESPACE"," ",273],["T_VARIABLE","$imageFile",273],";",["T_WHITESPACE","\n        ",273],["T_IF","if",274],["T_WHITESPACE"," ",274],"(","!",["T_STRING","file_exists",274],"(",["T_VARIABLE","$customSizeFile",274],")",")",["T_WHITESPACE"," ",274],"{",["T_WHITESPACE","\n            ",274],["T_IF","if",275],["T_WHITESPACE"," ",275],"(","!",["T_VARIABLE","$isImagePng",275],")",["T_WHITESPACE"," ",275],"{",["T_WHITESPACE","\n                ",275],["T_VARIABLE","$filePath",276],["T_WHITESPACE"," ",276],"=",["T_WHITESPACE"," ",276],["T_VARIABLE","$this",276],["T_OBJECT_OPERATOR","->",276],["T_STRING","_forcedConvertPng",276],"(",["T_VARIABLE","$filePath",276],",",["T_WHITESPACE"," ",276],["T_VARIABLE","$customSizeFile",276],",",["T_WHITESPACE"," ",276],["T_VARIABLE","$originalImageType",276],")",";",["T_WHITESPACE","\n            ",276],"}",["T_WHITESPACE","\n\n            ",277],["T_VARIABLE","$image",279],["T_WHITESPACE"," ",279],"=",["T_WHITESPACE"," ",279],["T_NEW","new",279],["T_WHITESPACE"," ",279],["T_STRING","Varien_Image",279],"(",["T_VARIABLE","$filePath",279],")",";",["T_WHITESPACE","\n            ",279],["T_VARIABLE","$widthOriginal",280],["T_WHITESPACE"," ",280],"=",["T_WHITESPACE"," ",280],["T_VARIABLE","$image",280],["T_OBJECT_OPERATOR","->",280],["T_STRING","getOriginalWidth",280],"(",")",";",["T_WHITESPACE","\n            ",280],["T_VARIABLE","$heightOriginal",281],["T_WHITESPACE"," ",281],"=",["T_WHITESPACE"," ",281],["T_VARIABLE","$image",281],["T_OBJECT_OPERATOR","->",281],["T_STRING","getOriginalHeight",281],"(",")",";",["T_WHITESPACE","\n\n            ",281],["T_IF","if",283],["T_WHITESPACE"," ",283],"(",["T_VARIABLE","$width",283],["T_WHITESPACE"," ",283],["T_IS_NOT_EQUAL","!=",283],["T_WHITESPACE"," ",283],["T_VARIABLE","$widthOriginal",283],")",["T_WHITESPACE"," ",283],"{",["T_WHITESPACE","\n                ",283],["T_VARIABLE","$widthOriginal",284],["T_WHITESPACE"," ",284],"=",["T_WHITESPACE"," ",284],["T_VARIABLE","$width",284],";",["T_WHITESPACE","\n            ",284],"}",["T_WHITESPACE","\n\n            ",285],["T_IF","if",287],["T_WHITESPACE"," ",287],"(",["T_VARIABLE","$height",287],["T_WHITESPACE"," ",287],["T_IS_NOT_EQUAL","!=",287],["T_WHITESPACE"," ",287],["T_VARIABLE","$heightOriginal",287],")",["T_WHITESPACE"," ",287],"{",["T_WHITESPACE","\n                ",287],["T_VARIABLE","$heightOriginal",288],["T_WHITESPACE"," ",288],"=",["T_WHITESPACE"," ",288],["T_VARIABLE","$height",288],";",["T_WHITESPACE","\n            ",288],"}",["T_WHITESPACE","\n\n            ",289],["T_IF","if",291],["T_WHITESPACE"," ",291],"(","(",["T_VARIABLE","$widthOriginal",291],["T_WHITESPACE"," ",291],["T_IS_NOT_EQUAL","!=",291],["T_WHITESPACE"," ",291],["T_VARIABLE","$image",291],["T_OBJECT_OPERATOR","->",291],["T_STRING","getOriginalWidth",291],"(",")",")",["T_WHITESPACE"," ",291],["T_BOOLEAN_OR","||",291],["T_WHITESPACE"," ",291],"(",["T_VARIABLE","$heightOriginal",291],["T_WHITESPACE"," ",291],["T_IS_NOT_EQUAL","!=",291],["T_WHITESPACE"," ",291],["T_VARIABLE","$image",291],["T_OBJECT_OPERATOR","->",291],["T_STRING","getOriginalHeight",291],"(",")",")",["T_WHITESPACE"," ",291],")",["T_WHITESPACE"," ",291],"{",["T_WHITESPACE","\n                ",291],["T_VARIABLE","$image",292],["T_OBJECT_OPERATOR","->",292],["T_STRING","keepTransparency",292],"(",["T_STRING","true",292],")",";",["T_WHITESPACE","\n                ",292],["T_VARIABLE","$image",293],["T_OBJECT_OPERATOR","->",293],["T_STRING","keepFrame",293],"(",["T_STRING","true",293],")",";",["T_WHITESPACE","\n                ",293],["T_VARIABLE","$image",294],["T_OBJECT_OPERATOR","->",294],["T_STRING","keepAspectRatio",294],"(",["T_STRING","true",294],")",";",["T_WHITESPACE","\n                ",294],["T_VARIABLE","$image",295],["T_OBJECT_OPERATOR","->",295],["T_STRING","backgroundColor",295],"(",["T_ARRAY","array",295],"(",["T_LNUMBER","0",295],",",["T_WHITESPACE"," ",295],["T_LNUMBER","0",295],",",["T_WHITESPACE"," ",295],["T_LNUMBER","0",295],")",")",";",["T_WHITESPACE","\n                ",295],["T_VARIABLE","$image",296],["T_OBJECT_OPERATOR","->",296],["T_STRING","resize",296],"(",["T_VARIABLE","$widthOriginal",296],",",["T_WHITESPACE"," ",296],["T_VARIABLE","$heightOriginal",296],")",";",["T_WHITESPACE","\n                ",296],["T_VARIABLE","$image",297],["T_OBJECT_OPERATOR","->",297],["T_STRING","save",297],"(",["T_VARIABLE","$customDir",297],",",["T_WHITESPACE"," ",297],["T_STRING","basename",297],"(",["T_VARIABLE","$imageFile",297],")",")",";",["T_WHITESPACE","\n            ",297],"}",["T_WHITESPACE"," ",298],["T_ELSE","else",298],["T_WHITESPACE"," ",298],"{",["T_WHITESPACE","\n                ",298],["T_VARIABLE","$ioFile",299],["T_OBJECT_OPERATOR","->",299],["T_STRING","cp",299],"(",["T_VARIABLE","$filePath",299],",",["T_WHITESPACE"," ",299],["T_VARIABLE","$customSizeFile",299],")",";",["T_WHITESPACE","\n            ",299],"}",["T_WHITESPACE","\n        ",300],"}",["T_WHITESPACE","\n        ",301],["T_RETURN","return",302],["T_WHITESPACE"," ",302],["T_VARIABLE","$imageHelper",302],["T_OBJECT_OPERATOR","->",302],["T_STRING","getMediaUrl",302],"(","\"",["T_ENCAPSED_AND_WHITESPACE","custom\/",302],["T_CURLY_OPEN","{",302],["T_VARIABLE","$screenSize",302],"}",["T_ENCAPSED_AND_WHITESPACE","\/",302],"\"",["T_WHITESPACE"," ",302],".",["T_WHITESPACE"," ",302],["T_STRING","basename",302],"(",["T_VARIABLE","$imageFile",302],")",")",";",["T_WHITESPACE","\n    ",302],"}",["T_WHITESPACE","\n\n    ",303],["T_DOC_COMMENT","\/**\n     * Save image data\n     *\n     * @param int $applicationId\n     * @param string $imageFile\n     * @param string $imageType\n     * @param int $order\n     * @return Mage_XmlConnect_Model_Images\n     *\/",305],["T_WHITESPACE","\n    ",313],["T_PUBLIC","public",314],["T_WHITESPACE"," ",314],["T_FUNCTION","function",314],["T_WHITESPACE"," ",314],["T_STRING","saveImage",314],"(",["T_VARIABLE","$applicationId",314],",",["T_WHITESPACE"," ",314],["T_VARIABLE","$imageFile",314],",",["T_WHITESPACE"," ",314],["T_VARIABLE","$imageType",314],",",["T_WHITESPACE"," ",314],["T_VARIABLE","$order",314],")",["T_WHITESPACE","\n    ",314],"{",["T_WHITESPACE","\n        ",315],["T_VARIABLE","$this",316],["T_OBJECT_OPERATOR","->",316],["T_STRING","getResource",316],"(",")",["T_OBJECT_OPERATOR","->",316],["T_STRING","saveImage",316],"(",["T_VARIABLE","$applicationId",316],",",["T_WHITESPACE"," ",316],["T_VARIABLE","$imageFile",316],",",["T_WHITESPACE"," ",316],["T_VARIABLE","$imageType",316],",",["T_WHITESPACE"," ",316],["T_VARIABLE","$order",316],")",";",["T_WHITESPACE","\n        ",316],["T_RETURN","return",317],["T_WHITESPACE"," ",317],["T_VARIABLE","$this",317],";",["T_WHITESPACE","\n    ",317],"}",["T_WHITESPACE","\n\n    ",318],["T_DOC_COMMENT","\/**\n     * Add image node to the config\n     * Used for backward compatibility only\n     *\n     * @param array $config\n     * @return Mage_XmlConnect_Model_Images\n     *\/",320],["T_WHITESPACE","\n    ",326],["T_PUBLIC","public",327],["T_WHITESPACE"," ",327],["T_FUNCTION","function",327],["T_WHITESPACE"," ",327],["T_STRING","loadOldImageNodes",327],"(","&",["T_VARIABLE","$config",327],")",["T_WHITESPACE","\n    ",327],"{",["T_WHITESPACE","\n        ",328],["T_VARIABLE","$iconImageFile",329],["T_WHITESPACE"," ",329],"=",["T_WHITESPACE"," ",329],["T_VARIABLE","$this",329],["T_OBJECT_OPERATOR","->",329],["T_STRING","getImageItemByType",329],"(",["T_STRING","Mage_XmlConnect_Model_Device_Abstract",329],["T_DOUBLE_COLON","::",329],["T_STRING","IMAGE_TYPE_ICON",329],")",";",["T_WHITESPACE","\n\n        ",329],["T_IF","if",331],["T_WHITESPACE"," ",331],"(",["T_STRING","is_object",331],"(",["T_VARIABLE","$iconImageFile",331],")",["T_WHITESPACE"," ",331],["T_BOOLEAN_AND","&&",331],["T_WHITESPACE"," ",331],["T_VARIABLE","$iconImageFile",331],["T_OBJECT_OPERATOR","->",331],["T_STRING","getImageFile",331],"(",")",")",["T_WHITESPACE"," ",331],"{",["T_WHITESPACE","\n            ",331],["T_VARIABLE","$iconImageType",332],["T_WHITESPACE"," ",332],"=",["T_WHITESPACE"," ",332],["T_STRING","Mage_XmlConnect_Model_Device_Abstract",332],["T_DOUBLE_COLON","::",332],["T_STRING","IMAGE_TYPE_ICON",332],";",["T_WHITESPACE","\n            ",332],["T_VARIABLE","$config",333],"[",["T_CONSTANT_ENCAPSED_STRING","'navigationBar'",333],"]","[",["T_CONSTANT_ENCAPSED_STRING","'icon'",333],"]",["T_WHITESPACE"," ",333],"=",["T_WHITESPACE"," ",333],["T_VARIABLE","$this",333],["T_OBJECT_OPERATOR","->",333],["T_STRING","getCustomSizeImageUrl",333],"(",["T_WHITESPACE","\n                ",333],["T_VARIABLE","$iconImageFile",334],["T_OBJECT_OPERATOR","->",334],["T_STRING","getImageFile",334],"(",")",",",["T_WHITESPACE","\n                ",334],["T_VARIABLE","$this",335],["T_OBJECT_OPERATOR","->",335],["T_STRING","getImageLimitParam",335],"(",["T_VARIABLE","$iconImageType",335],",",["T_WHITESPACE"," ",335],["T_CONSTANT_ENCAPSED_STRING","'width'",335],")",",",["T_WHITESPACE","\n                ",335],["T_VARIABLE","$this",336],["T_OBJECT_OPERATOR","->",336],["T_STRING","getImageLimitParam",336],"(",["T_VARIABLE","$iconImageType",336],",",["T_WHITESPACE"," ",336],["T_CONSTANT_ENCAPSED_STRING","'height'",336],")",["T_WHITESPACE","\n            ",336],")",";",["T_WHITESPACE","\n        ",337],"}",["T_WHITESPACE","\n\n        ",338],["T_VARIABLE","$imageArray",340],["T_WHITESPACE"," ",340],"=",["T_WHITESPACE"," ",340],["T_VARIABLE","$this",340],["T_OBJECT_OPERATOR","->",340],["T_STRING","_getOldConfigImageNodeArray",340],"(",")",";",["T_WHITESPACE","\n        ",340],["T_VARIABLE","$imageArray",341],["T_WHITESPACE"," ",341],"=",["T_WHITESPACE"," ",341],["T_VARIABLE","$imageArray",341],"[",["T_STRING","Mage",341],["T_DOUBLE_COLON","::",341],["T_STRING","helper",341],"(",["T_CONSTANT_ENCAPSED_STRING","'xmlconnect'",341],")",["T_OBJECT_OPERATOR","->",341],["T_STRING","getDeviceType",341],"(",")","]",";",["T_WHITESPACE","\n        ",341],["T_FOREACH","foreach",342],["T_WHITESPACE"," ",342],"(",["T_VARIABLE","$imageArray",342],["T_WHITESPACE"," ",342],["T_AS","as",342],["T_WHITESPACE"," ",342],["T_VARIABLE","$node",342],["T_WHITESPACE"," ",342],["T_DOUBLE_ARROW","=>",342],["T_WHITESPACE"," ",342],["T_VARIABLE","$imageType",342],")",["T_WHITESPACE"," ",342],"{",["T_WHITESPACE","\n            ",342],["T_VARIABLE","$imageFile",343],["T_WHITESPACE"," ",343],"=",["T_WHITESPACE"," ",343],["T_VARIABLE","$this",343],["T_OBJECT_OPERATOR","->",343],["T_STRING","getImageItemByType",343],"(",["T_VARIABLE","$imageType",343],")",";",["T_WHITESPACE","\n            ",343],["T_IF","if",344],["T_WHITESPACE"," ",344],"(","!",["T_STRING","is_object",344],"(",["T_VARIABLE","$imageFile",344],")",["T_WHITESPACE"," ",344],["T_BOOLEAN_OR","||",344],["T_WHITESPACE"," ",344],"!",["T_VARIABLE","$imageFile",344],["T_OBJECT_OPERATOR","->",344],["T_STRING","getImageFile",344],"(",")",")",["T_WHITESPACE"," ",344],"{",["T_WHITESPACE","\n                ",344],["T_CONTINUE","continue",345],";",["T_WHITESPACE","\n            ",345],"}",["T_WHITESPACE","\n            ",346],["T_VARIABLE","$config",347],"[",["T_CONSTANT_ENCAPSED_STRING","'body'",347],"]","[",["T_VARIABLE","$node",347],"]",["T_WHITESPACE"," ",347],"=",["T_WHITESPACE"," ",347],["T_VARIABLE","$this",347],["T_OBJECT_OPERATOR","->",347],["T_STRING","getCustomSizeImageUrl",347],"(",["T_WHITESPACE","\n                ",347],["T_VARIABLE","$imageFile",348],["T_OBJECT_OPERATOR","->",348],["T_STRING","getImageFile",348],"(",")",",",["T_WHITESPACE","\n                ",348],["T_VARIABLE","$this",349],["T_OBJECT_OPERATOR","->",349],["T_STRING","getImageLimitParam",349],"(",["T_VARIABLE","$imageType",349],",",["T_WHITESPACE"," ",349],["T_CONSTANT_ENCAPSED_STRING","'width'",349],")",",",["T_WHITESPACE","\n                ",349],["T_VARIABLE","$this",350],["T_OBJECT_OPERATOR","->",350],["T_STRING","getImageLimitParam",350],"(",["T_VARIABLE","$imageType",350],",",["T_WHITESPACE"," ",350],["T_CONSTANT_ENCAPSED_STRING","'height'",350],")",["T_WHITESPACE","\n            ",350],")",";",["T_WHITESPACE","\n        ",351],"}",["T_WHITESPACE","\n        ",352],["T_RETURN","return",353],["T_WHITESPACE"," ",353],["T_VARIABLE","$this",353],";",["T_WHITESPACE","\n    ",353],"}",["T_WHITESPACE","\n\n    ",354],["T_DOC_COMMENT","\/**\n     * Get image url for current screen size\n     *\n     * @param $imageFile\n     * @param $imageType\n     * @return bool|string\n     *\/",356],["T_WHITESPACE","\n    ",362],["T_PUBLIC","public",363],["T_WHITESPACE"," ",363],["T_FUNCTION","function",363],["T_WHITESPACE"," ",363],["T_STRING","getScreenSizeImageUrlByType",363],"(",["T_VARIABLE","$imageFile",363],",",["T_WHITESPACE"," ",363],["T_VARIABLE","$imageType",363],")",["T_WHITESPACE","\n    ",363],"{",["T_WHITESPACE","\n        ",364],["T_IF","if",365],["T_WHITESPACE"," ",365],"(",["T_STRING","is_numeric",365],"(",["T_VARIABLE","$this",365],["T_OBJECT_OPERATOR","->",365],["T_STRING","getImageLimitParam",365],"(",["T_VARIABLE","$imageType",365],")",")",")",["T_WHITESPACE"," ",365],"{",["T_WHITESPACE","\n            ",365],["T_VARIABLE","$width",366],["T_WHITESPACE"," ",366],"=",["T_WHITESPACE"," ",366],["T_VARIABLE","$height",366],["T_WHITESPACE"," ",366],"=",["T_WHITESPACE"," ",366],["T_VARIABLE","$this",366],["T_OBJECT_OPERATOR","->",366],["T_STRING","getImageLimitParam",366],"(",["T_VARIABLE","$imageType",366],")",";",["T_WHITESPACE","\n        ",366],"}",["T_WHITESPACE"," ",367],["T_ELSE","else",367],["T_WHITESPACE"," ",367],"{",["T_WHITESPACE","\n            ",367],["T_VARIABLE","$width",368],["T_WHITESPACE"," ",368],"=",["T_WHITESPACE"," ",368],["T_VARIABLE","$this",368],["T_OBJECT_OPERATOR","->",368],["T_STRING","getImageLimitParam",368],"(",["T_VARIABLE","$imageType",368],",",["T_WHITESPACE"," ",368],["T_CONSTANT_ENCAPSED_STRING","'width'",368],")",";",["T_WHITESPACE","\n            ",368],["T_VARIABLE","$height",369],["T_WHITESPACE"," ",369],"=",["T_WHITESPACE"," ",369],["T_VARIABLE","$this",369],["T_OBJECT_OPERATOR","->",369],["T_STRING","getImageLimitParam",369],"(",["T_VARIABLE","$imageType",369],",",["T_WHITESPACE"," ",369],["T_CONSTANT_ENCAPSED_STRING","'height'",369],")",";",["T_WHITESPACE","\n        ",369],"}",["T_WHITESPACE","\n        ",370],["T_IF","if",371],["T_WHITESPACE"," ",371],"(","!",["T_STRING","is_numeric",371],"(",["T_VARIABLE","$width",371],")",["T_WHITESPACE"," ",371],["T_BOOLEAN_OR","||",371],["T_WHITESPACE"," ",371],"!",["T_STRING","is_numeric",371],"(",["T_VARIABLE","$height",371],")",")",["T_WHITESPACE"," ",371],"{",["T_WHITESPACE","\n            ",371],["T_STRING","Mage",372],["T_DOUBLE_COLON","::",372],["T_STRING","throwException",372],"(",["T_STRING","Mage",372],["T_DOUBLE_COLON","::",372],["T_STRING","helper",372],"(",["T_CONSTANT_ENCAPSED_STRING","'xmlconnect'",372],")",["T_OBJECT_OPERATOR","->",372],["T_STRING","__",372],"(",["T_CONSTANT_ENCAPSED_STRING","'Image limits don\\'t recognized for \"%s\" image type'",372],",",["T_WHITESPACE"," ",372],["T_VARIABLE","$imageType",372],")",")",";",["T_WHITESPACE","\n        ",372],"}",["T_WHITESPACE","\n\n        ",373],["T_RETURN","return",375],["T_WHITESPACE"," ",375],["T_VARIABLE","$this",375],["T_OBJECT_OPERATOR","->",375],["T_STRING","getCustomSizeImageUrl",375],"(",["T_VARIABLE","$imageFile",375],",",["T_WHITESPACE"," ",375],["T_VARIABLE","$width",375],",",["T_WHITESPACE"," ",375],["T_VARIABLE","$height",375],")",";",["T_WHITESPACE","\n    ",375],"}",["T_WHITESPACE","\n\n    ",376],["T_DOC_COMMENT","\/**\n     * Get image limit param value\n     *\n     * @param string $imageType\n     * @param string|null $key\n     * @param string $screenSize\n     * @return mixed\n     *\/",378],["T_WHITESPACE","\n    ",385],["T_PUBLIC","public",386],["T_WHITESPACE"," ",386],["T_FUNCTION","function",386],["T_WHITESPACE"," ",386],["T_STRING","getImageLimitParam",386],"(",["T_VARIABLE","$imageType",386],["T_WHITESPACE"," ",386],"=",["T_WHITESPACE"," ",386],["T_CONSTANT_ENCAPSED_STRING","''",386],",",["T_WHITESPACE"," ",386],["T_VARIABLE","$key",386],["T_WHITESPACE"," ",386],"=",["T_WHITESPACE"," ",386],["T_STRING","null",386],",",["T_WHITESPACE"," ",386],["T_VARIABLE","$screenSize",386],["T_WHITESPACE"," ",386],"=",["T_WHITESPACE"," ",386],["T_CONSTANT_ENCAPSED_STRING","''",386],")",["T_WHITESPACE","\n    ",386],"{",["T_WHITESPACE","\n        ",387],["T_RETURN","return",388],["T_WHITESPACE"," ",388],["T_VARIABLE","$this",388],["T_OBJECT_OPERATOR","->",388],["T_STRING","getImageLimitsModel",388],"(",")",["T_OBJECT_OPERATOR","->",388],["T_STRING","getImageLimitsByType",388],"(",["T_VARIABLE","$imageType",388],",",["T_WHITESPACE"," ",388],["T_VARIABLE","$key",388],",",["T_WHITESPACE"," ",388],["T_VARIABLE","$screenSize",388],")",";",["T_WHITESPACE","\n    ",388],"}",["T_WHITESPACE","\n\n    ",389],["T_DOC_COMMENT","\/**\n     * Get Image Limits model\n     *\n     * @return Mage_XmlConnect_Model_ImageLimits\n     *\/",391],["T_WHITESPACE","\n    ",395],["T_PUBLIC","public",396],["T_WHITESPACE"," ",396],["T_FUNCTION","function",396],["T_WHITESPACE"," ",396],["T_STRING","getImageLimitsModel",396],"(",")",["T_WHITESPACE","\n    ",396],"{",["T_WHITESPACE","\n        ",397],["T_RETURN","return",398],["T_WHITESPACE"," ",398],["T_STRING","Mage",398],["T_DOUBLE_COLON","::",398],["T_STRING","helper",398],"(",["T_CONSTANT_ENCAPSED_STRING","'xmlconnect'",398],")",["T_OBJECT_OPERATOR","->",398],["T_STRING","getApplication",398],"(",")",["T_OBJECT_OPERATOR","->",398],["T_STRING","getImageLimitsModel",398],"(",")",";",["T_WHITESPACE","\n    ",398],"}",["T_WHITESPACE","\n\n    ",399],["T_DOC_COMMENT","\/**\n     * Get old config image node for devices\n     *\n     * @return array\n     *\/",401],["T_WHITESPACE","\n    ",405],["T_PROTECTED","protected",406],["T_WHITESPACE"," ",406],["T_FUNCTION","function",406],["T_WHITESPACE"," ",406],["T_STRING","_getOldConfigImageNodeArray",406],"(",")",["T_WHITESPACE","\n    ",406],"{",["T_WHITESPACE","\n        ",407],["T_COMMENT","\/\/ array as old config node => new image type (separated by device types)\n",408],["T_WHITESPACE","        ",409],["T_RETURN","return",409],["T_WHITESPACE"," ",409],["T_ARRAY","array",409],"(",["T_WHITESPACE","\n            ",409],["T_STRING","Mage_XmlConnect_Helper_Data",410],["T_DOUBLE_COLON","::",410],["T_STRING","DEVICE_TYPE_ANDROID",410],["T_WHITESPACE"," ",410],["T_DOUBLE_ARROW","=>",410],["T_WHITESPACE"," ",410],["T_ARRAY","array",410],"(",["T_WHITESPACE","\n                ",410],["T_CONSTANT_ENCAPSED_STRING","'bannerAndroidImage'",411],["T_WHITESPACE"," ",411],["T_DOUBLE_ARROW","=>",411],["T_WHITESPACE"," ",411],["T_STRING","Mage_XmlConnect_Model_Device_Android",411],["T_DOUBLE_COLON","::",411],["T_STRING","IMAGE_TYPE_PORTRAIT_BANNER",411],["T_WHITESPACE","\n            ",411],")",",",["T_WHITESPACE","\n            ",412],["T_STRING","Mage_XmlConnect_Helper_Data",413],["T_DOUBLE_COLON","::",413],["T_STRING","DEVICE_TYPE_IPHONE",413],["T_WHITESPACE"," ",413],["T_DOUBLE_ARROW","=>",413],["T_WHITESPACE"," ",413],["T_ARRAY","array",413],"(",["T_WHITESPACE","\n                ",413],["T_CONSTANT_ENCAPSED_STRING","'bannerImage'",414],["T_WHITESPACE"," ",414],["T_DOUBLE_ARROW","=>",414],["T_WHITESPACE"," ",414],["T_STRING","Mage_XmlConnect_Model_Device_Iphone",414],["T_DOUBLE_COLON","::",414],["T_STRING","IMAGE_TYPE_PORTRAIT_BANNER",414],",",["T_WHITESPACE","\n                ",414],["T_CONSTANT_ENCAPSED_STRING","'backgroundImage'",415],["T_WHITESPACE"," ",415],["T_DOUBLE_ARROW","=>",415],["T_WHITESPACE"," ",415],["T_STRING","Mage_XmlConnect_Model_Device_Iphone",415],["T_DOUBLE_COLON","::",415],["T_STRING","IMAGE_TYPE_PORTRAIT_BACKGROUND",415],["T_WHITESPACE","\n            ",415],")",",",["T_WHITESPACE","\n            ",416],["T_STRING","Mage_XmlConnect_Helper_Data",417],["T_DOUBLE_COLON","::",417],["T_STRING","DEVICE_TYPE_IPAD",417],["T_WHITESPACE"," ",417],["T_DOUBLE_ARROW","=>",417],["T_WHITESPACE"," ",417],["T_ARRAY","array",417],"(",["T_WHITESPACE","\n                ",417],["T_CONSTANT_ENCAPSED_STRING","'bannerIpadLandscapeImage'",418],["T_WHITESPACE"," ",418],["T_DOUBLE_ARROW","=>",418],["T_WHITESPACE"," ",418],["T_STRING","Mage_XmlConnect_Model_Device_Ipad",418],["T_DOUBLE_COLON","::",418],["T_STRING","IMAGE_TYPE_LANDSCAPE_BANNER",418],",",["T_WHITESPACE","\n                ",418],["T_CONSTANT_ENCAPSED_STRING","'bannerIpadImage'",419],["T_WHITESPACE"," ",419],["T_DOUBLE_ARROW","=>",419],["T_WHITESPACE"," ",419],["T_STRING","Mage_XmlConnect_Model_Device_Ipad",419],["T_DOUBLE_COLON","::",419],["T_STRING","IMAGE_TYPE_PORTRAIT_BANNER",419],",",["T_WHITESPACE","\n                ",419],["T_CONSTANT_ENCAPSED_STRING","'backgroundIpadLandscapeImage'",420],["T_WHITESPACE"," ",420],["T_DOUBLE_ARROW","=>",420],["T_WHITESPACE"," ",420],["T_STRING","Mage_XmlConnect_Model_Device_Ipad",420],["T_DOUBLE_COLON","::",420],["T_STRING","IMAGE_TYPE_LANDSCAPE_BACKGROUND",420],",",["T_WHITESPACE","\n                ",420],["T_CONSTANT_ENCAPSED_STRING","'backgroundIpadPortraitImage'",421],["T_WHITESPACE"," ",421],["T_DOUBLE_ARROW","=>",421],["T_WHITESPACE"," ",421],["T_STRING","Mage_XmlConnect_Model_Device_Ipad",421],["T_DOUBLE_COLON","::",421],["T_STRING","IMAGE_TYPE_PORTRAIT_BACKGROUND",421],["T_WHITESPACE","\n            ",421],")",["T_WHITESPACE","\n        ",422],")",";",["T_WHITESPACE","\n    ",423],"}",["T_WHITESPACE","\n\n    ",424],["T_DOC_COMMENT","\/**\n     * Update old image records in database\n     * For data upgrade usage only\n     *\n     * @see data upgrade file: mysql4-data-upgrade-1.6.0.0-1.6.0.0.1.php\n     * @param array $records\n     * @return null\n     *\/",426],["T_WHITESPACE","\n    ",433],["T_PUBLIC","public",434],["T_WHITESPACE"," ",434],["T_FUNCTION","function",434],["T_WHITESPACE"," ",434],["T_STRING","dataUpgradeOldConfig",434],"(",["T_VARIABLE","$records",434],")",["T_WHITESPACE","\n    ",434],"{",["T_WHITESPACE","\n        ",435],["T_COMMENT","\/\/ array as old config node => new image type (separated by device types)\n",436],["T_WHITESPACE","        ",437],["T_VARIABLE","$oldConfigPathByDeviceType",437],["T_WHITESPACE"," ",437],"=",["T_WHITESPACE"," ",437],["T_VARIABLE","$this",437],["T_OBJECT_OPERATOR","->",437],["T_STRING","_getOldConfigImageNodeArray",437],"(",")",";",["T_WHITESPACE","\n\n        ",437],["T_DOC_COMMENT","\/** @var $applicationModel Mage_XmlConnect_Model_Application *\/",439],["T_WHITESPACE","\n        ",439],["T_VARIABLE","$applicationModel",440],["T_WHITESPACE"," ",440],"=",["T_WHITESPACE"," ",440],["T_STRING","Mage",440],["T_DOUBLE_COLON","::",440],["T_STRING","getModel",440],"(",["T_CONSTANT_ENCAPSED_STRING","'xmlconnect\/application'",440],")",";",["T_WHITESPACE","\n\n        ",440],["T_DOC_COMMENT","\/** @var $configModel Mage_XmlConnect_Model_ConfigData *\/",442],["T_WHITESPACE","\n        ",442],["T_VARIABLE","$configModel",443],["T_WHITESPACE"," ",443],"=",["T_WHITESPACE"," ",443],["T_VARIABLE","$applicationModel",443],["T_OBJECT_OPERATOR","->",443],["T_STRING","getConfigModel",443],"(",")",";",["T_WHITESPACE","\n        ",443],["T_VARIABLE","$deprecatedFlag",444],["T_WHITESPACE"," ",444],"=",["T_WHITESPACE"," ",444],["T_STRING","Mage_XmlConnect_Model_Application",444],["T_DOUBLE_COLON","::",444],["T_STRING","DEPRECATED_CONFIG_FLAG",444],";",["T_WHITESPACE","\n\n        ",444],["T_FOREACH","foreach",446],["T_WHITESPACE"," ",446],"(",["T_VARIABLE","$records",446],["T_WHITESPACE"," ",446],["T_AS","as",446],["T_WHITESPACE"," ",446],["T_VARIABLE","$application_id",446],")",["T_WHITESPACE"," ",446],"{",["T_WHITESPACE","\n            ",446],["T_DOC_COMMENT","\/** @var $applicationModel Mage_XmlConnect_Model_Application *\/",447],["T_WHITESPACE","\n            ",447],["T_VARIABLE","$applicationModel",448],["T_OBJECT_OPERATOR","->",448],["T_STRING","load",448],"(",["T_VARIABLE","$application_id",448],")",";",["T_WHITESPACE","\n            ",448],["T_VARIABLE","$configPathList",449],["T_WHITESPACE"," ",449],"=",["T_WHITESPACE"," ",449],["T_VARIABLE","$oldConfigPathByDeviceType",449],"[",["T_VARIABLE","$applicationModel",449],["T_OBJECT_OPERATOR","->",449],["T_STRING","getType",449],"(",")","]",";",["T_WHITESPACE","\n            ",449],["T_VARIABLE","$configData",450],["T_WHITESPACE"," ",450],"=",["T_WHITESPACE"," ",450],["T_VARIABLE","$configModel",450],["T_OBJECT_OPERATOR","->",450],["T_STRING","loadApplicationData",450],"(",["T_VARIABLE","$application_id",450],")",";",["T_WHITESPACE","\n\n            ",450],["T_COMMENT","\/\/ old icon config path\n",452],["T_WHITESPACE","            ",453],["T_VARIABLE","$iconConfigPath",453],["T_WHITESPACE"," ",453],"=",["T_WHITESPACE"," ",453],["T_CONSTANT_ENCAPSED_STRING","'native\/navigationBar\/icon'",453],";",["T_WHITESPACE","\n            ",453],["T_IF","if",454],["T_WHITESPACE"," ",454],"(","!",["T_EMPTY","empty",454],"(",["T_VARIABLE","$configData",454],"[",["T_VARIABLE","$deprecatedFlag",454],"]","[",["T_VARIABLE","$iconConfigPath",454],"]",")",")",["T_WHITESPACE"," ",454],"{",["T_WHITESPACE","\n                ",454],["T_COMMENT","\/\/ Add icon to image table\n",455],["T_WHITESPACE","                ",456],["T_VARIABLE","$iconFile",456],["T_WHITESPACE"," ",456],"=",["T_WHITESPACE"," ",456],["T_STRING","basename",456],"(",["T_VARIABLE","$configData",456],"[",["T_VARIABLE","$deprecatedFlag",456],"]","[",["T_VARIABLE","$iconConfigPath",456],"]",")",";",["T_WHITESPACE","\n                ",456],["T_VARIABLE","$this",457],["T_OBJECT_OPERATOR","->",457],["T_STRING","saveImage",457],"(",["T_WHITESPACE","\n                    ",457],["T_VARIABLE","$application_id",458],",",["T_WHITESPACE"," ",458],["T_VARIABLE","$iconFile",458],",",["T_WHITESPACE"," ",458],["T_STRING","Mage_XmlConnect_Model_Device_Abstract",458],["T_DOUBLE_COLON","::",458],["T_STRING","IMAGE_TYPE_ICON",458],",",["T_WHITESPACE"," ",458],["T_LNUMBER","1",458],["T_WHITESPACE","\n                ",458],")",";",["T_WHITESPACE","\n\n                ",459],["T_COMMENT","\/\/ delete old icon record from config_data table\n",461],["T_WHITESPACE","                ",462],["T_VARIABLE","$configModel",462],["T_OBJECT_OPERATOR","->",462],["T_STRING","deleteConfig",462],"(",["T_VARIABLE","$application_id",462],",",["T_WHITESPACE"," ",462],["T_VARIABLE","$deprecatedFlag",462],",",["T_WHITESPACE"," ",462],["T_VARIABLE","$iconConfigPath",462],")",";",["T_WHITESPACE","\n\n                ",462],["T_COMMENT","\/\/ delete all icon files from file system\n",464],["T_WHITESPACE","                ",465],["T_VARIABLE","$this",465],["T_OBJECT_OPERATOR","->",465],["T_STRING","_deleteImageFiles",465],"(",["T_VARIABLE","$iconFile",465],",",["T_WHITESPACE"," ",465],["T_STRING","false",465],")",";",["T_WHITESPACE","\n            ",465],"}",["T_WHITESPACE","\n\n            ",466],["T_VARIABLE","$i",468],["T_WHITESPACE"," ",468],"=",["T_WHITESPACE"," ",468],["T_LNUMBER","0",468],";",["T_WHITESPACE","\n            ",468],["T_COMMENT","\/\/ old config path prefix native\/body\/\n",469],["T_WHITESPACE","            ",470],["T_VARIABLE","$configPrefix",470],["T_WHITESPACE"," ",470],"=",["T_WHITESPACE"," ",470],["T_CONSTANT_ENCAPSED_STRING","'native\/body\/'",470],";",["T_WHITESPACE","\n            ",470],["T_FOREACH","foreach",471],["T_WHITESPACE"," ",471],"(",["T_VARIABLE","$configPathList",471],["T_WHITESPACE"," ",471],["T_AS","as",471],["T_WHITESPACE"," ",471],["T_VARIABLE","$configPath",471],["T_WHITESPACE"," ",471],["T_DOUBLE_ARROW","=>",471],["T_WHITESPACE"," ",471],["T_VARIABLE","$imageType",471],")",["T_WHITESPACE"," ",471],"{",["T_WHITESPACE","\n                ",471],["T_IF","if",472],["T_WHITESPACE"," ",472],"(",["T_EMPTY","empty",472],"(",["T_VARIABLE","$configData",472],"[",["T_VARIABLE","$deprecatedFlag",472],"]","[",["T_VARIABLE","$configPrefix",472],["T_WHITESPACE"," ",472],".",["T_WHITESPACE"," ",472],["T_VARIABLE","$configPath",472],"]",")",")",["T_WHITESPACE"," ",472],"{",["T_WHITESPACE","\n                    ",472],["T_CONTINUE","continue",473],";",["T_WHITESPACE","\n                ",473],"}",["T_WHITESPACE","\n                ",474],["T_VARIABLE","$fileName",475],["T_WHITESPACE"," ",475],"=",["T_WHITESPACE"," ",475],["T_STRING","basename",475],"(",["T_VARIABLE","$configData",475],"[",["T_VARIABLE","$deprecatedFlag",475],"]","[",["T_VARIABLE","$configPrefix",475],["T_WHITESPACE"," ",475],".",["T_WHITESPACE"," ",475],["T_VARIABLE","$configPath",475],"]",")",";",["T_WHITESPACE","\n                ",475],["T_COMMENT","\/\/ add new record to image table\n",476],["T_WHITESPACE","                ",477],["T_VARIABLE","$this",477],["T_OBJECT_OPERATOR","->",477],["T_STRING","saveImage",477],"(",["T_VARIABLE","$application_id",477],",",["T_WHITESPACE"," ",477],["T_VARIABLE","$fileName",477],",",["T_WHITESPACE"," ",477],["T_VARIABLE","$imageType",477],",",["T_WHITESPACE"," ",477],["T_INC","++",477],["T_VARIABLE","$i",477],")",";",["T_WHITESPACE","\n\n                ",477],["T_COMMENT","\/\/ delete all image files from file system\n",479],["T_WHITESPACE","                ",480],["T_VARIABLE","$this",480],["T_OBJECT_OPERATOR","->",480],["T_STRING","_deleteImageFiles",480],"(",["T_VARIABLE","$fileName",480],",",["T_WHITESPACE"," ",480],["T_STRING","false",480],")",";",["T_WHITESPACE","\n\n                ",480],["T_COMMENT","\/\/ remove old record from config_data table\n",482],["T_WHITESPACE","                ",483],["T_VARIABLE","$configModel",483],["T_OBJECT_OPERATOR","->",483],["T_STRING","deleteConfig",483],"(",["T_VARIABLE","$application_id",483],",",["T_WHITESPACE"," ",483],["T_VARIABLE","$deprecatedFlag",483],",",["T_WHITESPACE"," ",483],["T_VARIABLE","$configPrefix",483],["T_WHITESPACE"," ",483],".",["T_WHITESPACE"," ",483],["T_VARIABLE","$configPath",483],")",";",["T_WHITESPACE","\n            ",483],"}",["T_WHITESPACE","\n        ",484],"}",["T_WHITESPACE","\n        ",485],["T_RETURN","return",486],["T_WHITESPACE"," ",486],["T_VARIABLE","$this",486],";",["T_WHITESPACE","\n    ",486],"}",["T_WHITESPACE","\n\n    ",487],["T_DOC_COMMENT","\/**\n     * Convert uploaded file to PNG\n     *\n     * @param string $originalFile\n     * @param string $destinationFile\n     * @param int|null $originalImageType\n     * @return string\n     *\/",489],["T_WHITESPACE","\n    ",496],["T_PROTECTED","protected",497],["T_WHITESPACE"," ",497],["T_FUNCTION","function",497],["T_WHITESPACE"," ",497],["T_STRING","_forcedConvertPng",497],"(",["T_VARIABLE","$originalFile",497],",",["T_WHITESPACE"," ",497],["T_VARIABLE","$destinationFile",497],",",["T_WHITESPACE"," ",497],["T_VARIABLE","$originalImageType",497],["T_WHITESPACE"," ",497],"=",["T_WHITESPACE"," ",497],["T_STRING","null",497],")",["T_WHITESPACE","\n    ",497],"{",["T_WHITESPACE","\n        ",498],["T_SWITCH","switch",499],["T_WHITESPACE"," ",499],"(",["T_VARIABLE","$originalImageType",499],")",["T_WHITESPACE"," ",499],"{",["T_WHITESPACE","\n            ",499],["T_CASE","case",500],["T_WHITESPACE"," ",500],["T_STRING","IMAGETYPE_GIF",500],":",["T_WHITESPACE","\n                ",500],["T_VARIABLE","$img",501],["T_WHITESPACE"," ",501],"=",["T_WHITESPACE"," ",501],["T_STRING","imagecreatefromgif",501],"(",["T_VARIABLE","$originalFile",501],")",";",["T_WHITESPACE","\n                ",501],["T_STRING","imagealphablending",502],"(",["T_VARIABLE","$img",502],",",["T_WHITESPACE"," ",502],["T_STRING","false",502],")",";",["T_WHITESPACE","\n                ",502],["T_STRING","imagesavealpha",503],"(",["T_VARIABLE","$img",503],",",["T_WHITESPACE"," ",503],["T_STRING","true",503],")",";",["T_WHITESPACE","\n                ",503],["T_BREAK","break",504],";",["T_WHITESPACE","\n            ",504],["T_CASE","case",505],["T_WHITESPACE"," ",505],["T_STRING","IMAGETYPE_JPEG",505],":",["T_WHITESPACE","\n                ",505],["T_VARIABLE","$img",506],["T_WHITESPACE"," ",506],"=",["T_WHITESPACE"," ",506],["T_STRING","imagecreatefromjpeg",506],"(",["T_VARIABLE","$originalFile",506],")",";",["T_WHITESPACE","\n                ",506],["T_BREAK","break",507],";",["T_WHITESPACE","\n            ",507],["T_CASE","case",508],["T_WHITESPACE"," ",508],["T_STRING","IMAGETYPE_WBMP",508],":",["T_WHITESPACE","\n                ",508],["T_VARIABLE","$img",509],["T_WHITESPACE"," ",509],"=",["T_WHITESPACE"," ",509],["T_STRING","imagecreatefromwbmp",509],"(",["T_VARIABLE","$originalFile",509],")",";",["T_WHITESPACE","\n                ",509],["T_BREAK","break",510],";",["T_WHITESPACE","\n            ",510],["T_CASE","case",511],["T_WHITESPACE"," ",511],["T_STRING","IMAGETYPE_XBM",511],":",["T_WHITESPACE","\n                ",511],["T_VARIABLE","$img",512],["T_WHITESPACE"," ",512],"=",["T_WHITESPACE"," ",512],["T_STRING","imagecreatefromxbm",512],"(",["T_VARIABLE","$originalFile",512],")",";",["T_WHITESPACE","\n                ",512],["T_BREAK","break",513],";",["T_WHITESPACE","\n            ",513],["T_DEFAULT","default",514],":",["T_WHITESPACE","\n                ",514],["T_RETURN","return",515],["T_WHITESPACE"," ",515],["T_CONSTANT_ENCAPSED_STRING","''",515],";",["T_WHITESPACE","\n        ",515],"}",["T_WHITESPACE","\n        ",516],["T_STRING","imagepng",517],"(",["T_VARIABLE","$img",517],",",["T_WHITESPACE"," ",517],["T_VARIABLE","$destinationFile",517],")",";",["T_WHITESPACE","\n        ",517],["T_STRING","imagedestroy",518],"(",["T_VARIABLE","$img",518],")",";",["T_WHITESPACE","\n\n        ",518],["T_RETURN","return",520],["T_WHITESPACE"," ",520],["T_VARIABLE","$destinationFile",520],";",["T_WHITESPACE","\n    ",520],"}",["T_WHITESPACE","\n\n    ",521],["T_DOC_COMMENT","\/**\n     * Convert image file extension to PNG\n     *\n     * @param string $fileName\n     * @return string\n     *\/",523],["T_WHITESPACE","\n    ",528],["T_PROTECTED","protected",529],["T_WHITESPACE"," ",529],["T_FUNCTION","function",529],["T_WHITESPACE"," ",529],["T_STRING","_convertFileExtensionToPng",529],"(",["T_VARIABLE","$fileName",529],")",["T_WHITESPACE","\n    ",529],"{",["T_WHITESPACE","\n        ",530],["T_VARIABLE","$dotPosition",531],["T_WHITESPACE"," ",531],"=",["T_WHITESPACE"," ",531],["T_STRING","strrpos",531],"(",["T_VARIABLE","$fileName",531],",",["T_WHITESPACE"," ",531],["T_CONSTANT_ENCAPSED_STRING","'.'",531],")",";",["T_WHITESPACE","\n        ",531],["T_IF","if",532],["T_WHITESPACE"," ",532],"(",["T_VARIABLE","$dotPosition",532],["T_WHITESPACE"," ",532],["T_IS_NOT_IDENTICAL","!==",532],["T_WHITESPACE"," ",532],["T_STRING","false",532],")",["T_WHITESPACE"," ",532],"{",["T_WHITESPACE","\n            ",532],["T_VARIABLE","$fileName",533],["T_WHITESPACE"," ",533],"=",["T_WHITESPACE"," ",533],["T_STRING","substr",533],"(",["T_VARIABLE","$fileName",533],",",["T_WHITESPACE"," ",533],["T_LNUMBER","0",533],["T_WHITESPACE"," ",533],",",["T_WHITESPACE"," ",533],["T_VARIABLE","$dotPosition",533],")",";",["T_WHITESPACE","\n        ",533],"}",["T_WHITESPACE","\n        ",534],["T_VARIABLE","$fileName",535],["T_WHITESPACE"," ",535],["T_CONCAT_EQUAL",".=",535],["T_WHITESPACE"," ",535],["T_CONSTANT_ENCAPSED_STRING","'.png'",535],";",["T_WHITESPACE","\n\n        ",535],["T_RETURN","return",537],["T_WHITESPACE"," ",537],["T_VARIABLE","$fileName",537],";",["T_WHITESPACE","\n    ",537],"}",["T_WHITESPACE","\n\n    ",538],["T_DOC_COMMENT","\/**\n     * Get image type\n     *\n     * @param string $filePath\n     * @return int\n     *\/",540],["T_WHITESPACE","\n    ",545],["T_PROTECTED","protected",546],["T_WHITESPACE"," ",546],["T_FUNCTION","function",546],["T_WHITESPACE"," ",546],["T_STRING","_getImageType",546],"(",["T_VARIABLE","$filePath",546],")",["T_WHITESPACE","\n    ",546],"{",["T_WHITESPACE","\n        ",547],["T_LIST","list",548],"(",",",",",["T_WHITESPACE"," ",548],["T_VARIABLE","$originalImageType",548],")",["T_WHITESPACE"," ",548],"=",["T_WHITESPACE"," ",548],["T_STRING","getimagesize",548],"(",["T_VARIABLE","$filePath",548],")",";",["T_WHITESPACE","\n        ",548],["T_RETURN","return",549],["T_WHITESPACE"," ",549],["T_VARIABLE","$originalImageType",549],";",["T_WHITESPACE","\n    ",549],"}",["T_WHITESPACE","\n",550],"}",["T_WHITESPACE","\n",551]]
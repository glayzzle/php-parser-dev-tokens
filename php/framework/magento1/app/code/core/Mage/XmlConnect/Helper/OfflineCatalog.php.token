[["T_OPEN_TAG","<?php\n",1],["T_DOC_COMMENT","\/**\n * Magento\n *\n * NOTICE OF LICENSE\n *\n * This source file is subject to the Open Software License (OSL 3.0)\n * that is bundled with this package in the file LICENSE.txt.\n * It is also available through the world-wide-web at this URL:\n * http:\/\/opensource.org\/licenses\/osl-3.0.php\n * If you did not receive a copy of the license and are unable to\n * obtain it through the world-wide-web, please send an email\n * to license@magento.com so we can send you a copy immediately.\n *\n * DISCLAIMER\n *\n * Do not edit or add to this file if you wish to upgrade Magento to newer\n * versions in the future. If you wish to customize Magento for your\n * needs please refer to http:\/\/www.magento.com for more information.\n *\n * @category    Mage\n * @package     Mage_XmlConnect\n * @copyright  Copyright (c) 2006-2016 X.commerce, Inc. and affiliates (http:\/\/www.magento.com)\n * @license    http:\/\/opensource.org\/licenses\/osl-3.0.php  Open Software License (OSL 3.0)\n *\/",2],["T_WHITESPACE","\n\n",25],["T_DOC_COMMENT","\/**\n * XmlConnect offline catalog helper\n *\n * @category    Mage\n * @package     Mage_XmlConnect\n * @author      Magento Core Team <core@magentocommerce.com>\n *\/",27],["T_WHITESPACE","\n",33],["T_CLASS","class",34],["T_WHITESPACE"," ",34],["T_STRING","Mage_XmlConnect_Helper_OfflineCatalog",34],["T_WHITESPACE"," ",34],["T_EXTENDS","extends",34],["T_WHITESPACE"," ",34],["T_STRING","Mage_Core_Helper_Abstract",34],["T_WHITESPACE","\n",34],"{",["T_WHITESPACE","\n    ",35],["T_DOC_COMMENT","\/**\n     * Result folder\n     *\/",36],["T_WHITESPACE","\n    ",38],["T_CONST","const",39],["T_WHITESPACE"," ",39],["T_STRING","RESULT_FOLDER",39],["T_WHITESPACE"," ",39],"=",["T_WHITESPACE"," ",39],["T_CONSTANT_ENCAPSED_STRING","'offline_catalog'",39],";",["T_WHITESPACE","\n\n    ",39],["T_DOC_COMMENT","\/**\n     * Map file\n     *\/",41],["T_WHITESPACE","\n    ",43],["T_CONST","const",44],["T_WHITESPACE"," ",44],["T_STRING","MAP_FILE",44],["T_WHITESPACE"," ",44],"=",["T_WHITESPACE"," ",44],["T_CONSTANT_ENCAPSED_STRING","'_storage.dict'",44],";",["T_WHITESPACE","\n\n    ",44],["T_DOC_COMMENT","\/**\n     * Export url\n     *\/",46],["T_WHITESPACE","\n    ",48],["T_CONST","const",49],["T_WHITESPACE"," ",49],["T_STRING","EXPORT_URL",49],["T_WHITESPACE"," ",49],"=",["T_WHITESPACE"," ",49],["T_CONSTANT_ENCAPSED_STRING","'xmlconnect\/offlineCatalog\/index\/key\/'",49],";",["T_WHITESPACE","\n\n    ",49],["T_DOC_COMMENT","\/**\n     * Varien file IO\n     *\n     * @var null|Varien_Io_File\n     *\/",51],["T_WHITESPACE","\n    ",55],["T_PROTECTED","protected",56],["T_WHITESPACE"," ",56],["T_VARIABLE","$_fileIo",56],";",["T_WHITESPACE","\n\n    ",56],["T_DOC_COMMENT","\/**\n     * Xml object\n     *\n     * @var null|Mage_XmlConnect_Model_Simplexml_Element\n     *\/",58],["T_WHITESPACE","\n    ",62],["T_PROTECTED","protected",63],["T_WHITESPACE"," ",63],["T_VARIABLE","$_xmlObject",63],";",["T_WHITESPACE","\n\n    ",63],["T_DOC_COMMENT","\/**\n     * Layout model\n     *\n     * @var null|Mage_Core_Model_Layout\n     *\/",65],["T_WHITESPACE","\n    ",69],["T_PROTECTED","protected",70],["T_WHITESPACE"," ",70],["T_VARIABLE","$_layout",70],";",["T_WHITESPACE","\n\n    ",70],["T_DOC_COMMENT","\/**\n     * Result dir\n     *\n     * @var null|string\n     *\/",72],["T_WHITESPACE","\n    ",76],["T_PROTECTED","protected",77],["T_WHITESPACE"," ",77],["T_VARIABLE","$_resultDir",77],";",["T_WHITESPACE","\n\n    ",77],["T_DOC_COMMENT","\/**\n     * Application model\n     *\n     * @var null|Mage_XmlConnect_Model_Application\n     *\/",79],["T_WHITESPACE","\n    ",83],["T_PROTECTED","protected",84],["T_WHITESPACE"," ",84],["T_VARIABLE","$_appModel",84],";",["T_WHITESPACE","\n\n    ",84],["T_DOC_COMMENT","\/**\n     * Prepare result directory\n     *\n     * @return Mage_XmlConnect_Helper_OfflineCatalog\n     *\/",86],["T_WHITESPACE","\n    ",90],["T_PUBLIC","public",91],["T_WHITESPACE"," ",91],["T_FUNCTION","function",91],["T_WHITESPACE"," ",91],["T_STRING","prepareResultDirectory",91],"(",")",["T_WHITESPACE","\n    ",91],"{",["T_WHITESPACE","\n        ",92],["T_VARIABLE","$fileModel",93],["T_WHITESPACE"," ",93],"=",["T_WHITESPACE"," ",93],["T_VARIABLE","$this",93],["T_OBJECT_OPERATOR","->",93],["T_STRING","_getFileIo",93],"(",")",";",["T_WHITESPACE","\n        ",93],["T_VARIABLE","$resultDir",94],["T_WHITESPACE"," ",94],"=",["T_WHITESPACE"," ",94],["T_VARIABLE","$this",94],["T_OBJECT_OPERATOR","->",94],["T_STRING","_getResultDir",94],"(",")",";",["T_WHITESPACE","\n        ",94],["T_VARIABLE","$fileModel",95],["T_OBJECT_OPERATOR","->",95],["T_STRING","rmdirRecursive",95],"(",["T_VARIABLE","$resultDir",95],")",";",["T_WHITESPACE","\n        ",95],["T_VARIABLE","$fileModel",96],["T_OBJECT_OPERATOR","->",96],["T_STRING","mkdir",96],"(",["T_VARIABLE","$resultDir",96],")",";",["T_WHITESPACE","\n        ",96],["T_RETURN","return",97],["T_WHITESPACE"," ",97],["T_VARIABLE","$this",97],";",["T_WHITESPACE","\n    ",97],"}",["T_WHITESPACE","\n\n    ",98],["T_DOC_COMMENT","\/**\n     * Get file IO\n     *\n     * @return Varien_Io_File\n     *\/",100],["T_WHITESPACE","\n    ",104],["T_PROTECTED","protected",105],["T_WHITESPACE"," ",105],["T_FUNCTION","function",105],["T_WHITESPACE"," ",105],["T_STRING","_getFileIo",105],"(",")",["T_WHITESPACE","\n    ",105],"{",["T_WHITESPACE","\n        ",106],["T_IF","if",107],["T_WHITESPACE"," ",107],"(",["T_VARIABLE","$this",107],["T_OBJECT_OPERATOR","->",107],["T_STRING","_fileIo",107],["T_WHITESPACE"," ",107],["T_IS_IDENTICAL","===",107],["T_WHITESPACE"," ",107],["T_STRING","null",107],")",["T_WHITESPACE"," ",107],"{",["T_WHITESPACE","\n            ",107],["T_VARIABLE","$this",108],["T_OBJECT_OPERATOR","->",108],["T_STRING","_fileIo",108],["T_WHITESPACE"," ",108],"=",["T_WHITESPACE"," ",108],["T_NEW","new",108],["T_WHITESPACE"," ",108],["T_STRING","Varien_Io_File",108],"(",")",";",["T_WHITESPACE","\n        ",108],"}",["T_WHITESPACE","\n        ",109],["T_RETURN","return",110],["T_WHITESPACE"," ",110],["T_VARIABLE","$this",110],["T_OBJECT_OPERATOR","->",110],["T_STRING","_fileIo",110],";",["T_WHITESPACE","\n    ",110],"}",["T_WHITESPACE","\n\n    ",111],["T_DOC_COMMENT","\/**\n     * Get handles\n     *\n     * @return array\n     *\/",113],["T_WHITESPACE","\n    ",117],["T_PROTECTED","protected",118],["T_WHITESPACE"," ",118],["T_FUNCTION","function",118],["T_WHITESPACE"," ",118],["T_STRING","_getHandles",118],"(",")",["T_WHITESPACE","\n    ",118],"{",["T_WHITESPACE","\n        ",119],["T_RETURN","return",120],["T_WHITESPACE"," ",120],["T_ARRAY","array",120],"(",["T_CONSTANT_ENCAPSED_STRING","'xmlconnect_configuration_index'",120],",",["T_WHITESPACE"," ",120],["T_CONSTANT_ENCAPSED_STRING","'xmlconnect_catalog_categorydetails'",120],",",["T_WHITESPACE","\n            ",120],["T_CONSTANT_ENCAPSED_STRING","'xmlconnect_catalog_productview'",121],",",["T_WHITESPACE"," ",121],["T_CONSTANT_ENCAPSED_STRING","'xmlconnect_homebanners_index'",121],",",["T_WHITESPACE"," ",121],["T_CONSTANT_ENCAPSED_STRING","'xmlconnect_index_index'",121],",",["T_WHITESPACE","\n            ",121],["T_CONSTANT_ENCAPSED_STRING","'xmlconnect_catalog_productgallery'",122],",",["T_WHITESPACE"," ",122],["T_CONSTANT_ENCAPSED_STRING","'xmlconnect_catalog_productreviews'",122],["T_WHITESPACE","\n        ",122],")",";",["T_WHITESPACE","\n    ",123],"}",["T_WHITESPACE","\n\n    ",124],["T_DOC_COMMENT","\/**\n     * Add offline catalog data\n     *\n     * @param string $urlPath\n     * @param string $output\n     * @return Mage_XmlConnect_Helper_OfflineCatalog\n     *\/",126],["T_WHITESPACE","\n    ",132],["T_PUBLIC","public",133],["T_WHITESPACE"," ",133],["T_FUNCTION","function",133],["T_WHITESPACE"," ",133],["T_STRING","addOfflineCatalogData",133],"(",["T_VARIABLE","$urlPath",133],",",["T_WHITESPACE"," ",133],["T_VARIABLE","$output",133],")",["T_WHITESPACE","\n    ",133],"{",["T_WHITESPACE","\n        ",134],["T_VARIABLE","$xmlObj",135],["T_WHITESPACE"," ",135],"=",["T_WHITESPACE"," ",135],["T_VARIABLE","$this",135],["T_OBJECT_OPERATOR","->",135],["T_STRING","_getXmlObject",135],"(",")",";",["T_WHITESPACE","\n        ",135],["T_VARIABLE","$fileName",136],["T_WHITESPACE"," ",136],"=",["T_WHITESPACE"," ",136],["T_STRING","uniqid",136],"(",")",["T_WHITESPACE"," ",136],".",["T_WHITESPACE"," ",136],["T_CONSTANT_ENCAPSED_STRING","'-'",136],["T_WHITESPACE"," ",136],".",["T_WHITESPACE"," ",136],["T_STRING","sha1",136],"(",["T_VARIABLE","$output",136],")",["T_WHITESPACE"," ",136],".",["T_WHITESPACE"," ",136],["T_CONSTANT_ENCAPSED_STRING","'.cache'",136],";",["T_WHITESPACE","\n\n        ",136],["T_VARIABLE","$this",138],["T_OBJECT_OPERATOR","->",138],["T_STRING","saveCacheFile",138],"(",["T_VARIABLE","$fileName",138],",",["T_WHITESPACE"," ",138],["T_VARIABLE","$output",138],")",";",["T_WHITESPACE","\n        ",138],["T_VARIABLE","$xmlObj",139],["T_OBJECT_OPERATOR","->",139],["T_STRING","addCustomChild",139],"(",["T_CONSTANT_ENCAPSED_STRING","'key'",139],",",["T_WHITESPACE"," ",139],["T_VARIABLE","$urlPath",139],")",";",["T_WHITESPACE","\n        ",139],["T_VARIABLE","$xmlObj",140],["T_OBJECT_OPERATOR","->",140],["T_STRING","addCustomChild",140],"(",["T_CONSTANT_ENCAPSED_STRING","'string'",140],",",["T_WHITESPACE"," ",140],["T_VARIABLE","$fileName",140],")",";",["T_WHITESPACE","\n        ",140],["T_RETURN","return",141],["T_WHITESPACE"," ",141],["T_VARIABLE","$this",141],";",["T_WHITESPACE","\n    ",141],"}",["T_WHITESPACE","\n\n    ",142],["T_DOC_COMMENT","\/**\n     * Save cache file\n     *\n     * @param string $fileName\n     * @param string $output\n     * @return Mage_XmlConnect_Helper_OfflineCatalog\n     *\/",144],["T_WHITESPACE","\n    ",150],["T_PUBLIC","public",151],["T_WHITESPACE"," ",151],["T_FUNCTION","function",151],["T_WHITESPACE"," ",151],["T_STRING","saveCacheFile",151],"(",["T_VARIABLE","$fileName",151],",",["T_WHITESPACE"," ",151],["T_VARIABLE","$output",151],")",["T_WHITESPACE","\n    ",151],"{",["T_WHITESPACE","\n        ",152],["T_VARIABLE","$filePath",153],["T_WHITESPACE"," ",153],"=",["T_WHITESPACE"," ",153],["T_VARIABLE","$this",153],["T_OBJECT_OPERATOR","->",153],["T_STRING","_getResultDir",153],"(",")",["T_WHITESPACE"," ",153],".",["T_WHITESPACE"," ",153],["T_STRING","DS",153],["T_WHITESPACE"," ",153],".",["T_WHITESPACE"," ",153],["T_VARIABLE","$fileName",153],";",["T_WHITESPACE","\n        ",153],["T_VARIABLE","$this",154],["T_OBJECT_OPERATOR","->",154],["T_STRING","_getFileIo",154],"(",")",["T_OBJECT_OPERATOR","->",154],["T_STRING","open",154],"(",["T_ARRAY","array",154],"(",["T_CONSTANT_ENCAPSED_STRING","'path'",154],["T_WHITESPACE"," ",154],["T_DOUBLE_ARROW","=>",154],["T_WHITESPACE"," ",154],["T_VARIABLE","$this",154],["T_OBJECT_OPERATOR","->",154],["T_STRING","_getResultDir",154],"(",")",")",")",";",["T_WHITESPACE","\n        ",154],["T_VARIABLE","$this",155],["T_OBJECT_OPERATOR","->",155],["T_STRING","_getFileIo",155],"(",")",["T_OBJECT_OPERATOR","->",155],["T_STRING","write",155],"(",["T_VARIABLE","$filePath",155],",",["T_WHITESPACE"," ",155],["T_VARIABLE","$output",155],")",";",["T_WHITESPACE","\n        ",155],["T_RETURN","return",156],["T_WHITESPACE"," ",156],["T_VARIABLE","$this",156],";",["T_WHITESPACE","\n    ",156],"}",["T_WHITESPACE","\n\n    ",157],["T_DOC_COMMENT","\/**\n     * Get result directory path\n     *\n     * @return string\n     *\/",159],["T_WHITESPACE","\n    ",163],["T_PROTECTED","protected",164],["T_WHITESPACE"," ",164],["T_FUNCTION","function",164],["T_WHITESPACE"," ",164],["T_STRING","_getResultDir",164],"(",")",["T_WHITESPACE","\n    ",164],"{",["T_WHITESPACE","\n        ",165],["T_IF","if",166],["T_WHITESPACE"," ",166],"(",["T_VARIABLE","$this",166],["T_OBJECT_OPERATOR","->",166],["T_STRING","_resultDir",166],["T_WHITESPACE"," ",166],["T_IS_IDENTICAL","===",166],["T_WHITESPACE"," ",166],["T_STRING","null",166],")",["T_WHITESPACE"," ",166],"{",["T_WHITESPACE","\n            ",166],["T_VARIABLE","$this",167],["T_OBJECT_OPERATOR","->",167],["T_STRING","_resultDir",167],["T_WHITESPACE"," ",167],"=",["T_WHITESPACE"," ",167],["T_STRING","Mage",167],["T_DOUBLE_COLON","::",167],["T_STRING","getBaseDir",167],"(",["T_CONSTANT_ENCAPSED_STRING","'var'",167],")",["T_WHITESPACE"," ",167],".",["T_WHITESPACE"," ",167],["T_STRING","DS",167],["T_WHITESPACE"," ",167],".",["T_WHITESPACE"," ",167],["T_STRING","self",167],["T_DOUBLE_COLON","::",167],["T_STRING","RESULT_FOLDER",167],";",["T_WHITESPACE","\n        ",167],"}",["T_WHITESPACE","\n        ",168],["T_RETURN","return",169],["T_WHITESPACE"," ",169],["T_VARIABLE","$this",169],["T_OBJECT_OPERATOR","->",169],["T_STRING","_resultDir",169],";",["T_WHITESPACE","\n    ",169],"}",["T_WHITESPACE","\n\n    ",170],["T_DOC_COMMENT","\/**\n     * Get xml object\n     *\n     * @return Mage_XmlConnect_Model_Simplexml_Element\n     *\/",172],["T_WHITESPACE","\n    ",176],["T_PROTECTED","protected",177],["T_WHITESPACE"," ",177],["T_FUNCTION","function",177],["T_WHITESPACE"," ",177],["T_STRING","_getXmlObject",177],"(",")",["T_WHITESPACE","\n    ",177],"{",["T_WHITESPACE","\n        ",178],["T_IF","if",179],["T_WHITESPACE"," ",179],"(",["T_VARIABLE","$this",179],["T_OBJECT_OPERATOR","->",179],["T_STRING","_xmlObject",179],["T_WHITESPACE"," ",179],["T_IS_IDENTICAL","===",179],["T_WHITESPACE"," ",179],["T_STRING","null",179],")",["T_WHITESPACE"," ",179],"{",["T_WHITESPACE","\n            ",179],["T_VARIABLE","$this",180],["T_OBJECT_OPERATOR","->",180],["T_STRING","_xmlObject",180],["T_WHITESPACE"," ",180],"=",["T_WHITESPACE"," ",180],["T_STRING","Mage",180],["T_DOUBLE_COLON","::",180],["T_STRING","getModel",180],"(",["T_CONSTANT_ENCAPSED_STRING","'xmlconnect\/simplexml_element'",180],",",["T_WHITESPACE"," ",180],["T_CONSTANT_ENCAPSED_STRING","'<dict><\/dict>'",180],")",";",["T_WHITESPACE","\n        ",180],"}",["T_WHITESPACE","\n        ",181],["T_RETURN","return",182],["T_WHITESPACE"," ",182],["T_VARIABLE","$this",182],["T_OBJECT_OPERATOR","->",182],["T_STRING","_xmlObject",182],";",["T_WHITESPACE","\n    ",182],"}",["T_WHITESPACE","\n\n    ",183],["T_DOC_COMMENT","\/**\n     * Get block\n     *\n     * @param string $blockName\n     * @return Mage_Core_Block_Abstract\n     *\/",185],["T_WHITESPACE","\n    ",190],["T_PUBLIC","public",191],["T_WHITESPACE"," ",191],["T_FUNCTION","function",191],["T_WHITESPACE"," ",191],["T_STRING","getBlock",191],"(",["T_VARIABLE","$blockName",191],")",["T_WHITESPACE","\n    ",191],"{",["T_WHITESPACE","\n        ",192],["T_DOC_COMMENT","\/** @var $layout Mage_Core_Model_Layouts *\/",193],["T_WHITESPACE","\n        ",193],["T_VARIABLE","$this",194],["T_OBJECT_OPERATOR","->",194],["T_STRING","_prepareLayout",194],"(",")",";",["T_WHITESPACE","\n        ",194],["T_VARIABLE","$this",195],["T_OBJECT_OPERATOR","->",195],["T_STRING","_layout",195],["T_OBJECT_OPERATOR","->",195],["T_STRING","getUpdate",195],"(",")",["T_OBJECT_OPERATOR","->",195],["T_STRING","load",195],"(",["T_VARIABLE","$this",195],["T_OBJECT_OPERATOR","->",195],["T_STRING","_getHandles",195],"(",")",")",";",["T_WHITESPACE","\n        ",195],["T_VARIABLE","$this",196],["T_OBJECT_OPERATOR","->",196],["T_STRING","_layout",196],["T_OBJECT_OPERATOR","->",196],["T_STRING","generateXml",196],"(",")",["T_OBJECT_OPERATOR","->",196],["T_STRING","generateBlocks",196],"(",")",";",["T_WHITESPACE","\n        ",196],["T_VARIABLE","$block",197],["T_WHITESPACE"," ",197],"=",["T_WHITESPACE"," ",197],["T_VARIABLE","$this",197],["T_OBJECT_OPERATOR","->",197],["T_STRING","_layout",197],["T_OBJECT_OPERATOR","->",197],["T_STRING","getBlock",197],"(",["T_VARIABLE","$blockName",197],")",";",["T_WHITESPACE","\n        ",197],["T_VARIABLE","$this",198],["T_OBJECT_OPERATOR","->",198],["T_STRING","unsetLayout",198],"(",")",";",["T_WHITESPACE","\n        ",198],["T_RETURN","return",199],["T_WHITESPACE"," ",199],["T_VARIABLE","$block",199],";",["T_WHITESPACE","\n    ",199],"}",["T_WHITESPACE","\n\n    ",200],["T_DOC_COMMENT","\/**\n     * Prepare layout\n     *\n     * @return Mage_XmlConnect_Helper_OfflineCatalog\n     *\/",202],["T_WHITESPACE","\n    ",206],["T_PROTECTED","protected",207],["T_WHITESPACE"," ",207],["T_FUNCTION","function",207],["T_WHITESPACE"," ",207],["T_STRING","_prepareLayout",207],"(",")",["T_WHITESPACE","\n    ",207],"{",["T_WHITESPACE","\n        ",208],["T_VARIABLE","$this",209],["T_OBJECT_OPERATOR","->",209],["T_STRING","_layout",209],["T_WHITESPACE"," ",209],"=",["T_WHITESPACE"," ",209],["T_STRING","Mage",209],["T_DOUBLE_COLON","::",209],["T_STRING","getModel",209],"(",["T_CONSTANT_ENCAPSED_STRING","'core\/layout'",209],")",";",["T_WHITESPACE","\n        ",209],["T_RETURN","return",210],["T_WHITESPACE"," ",210],["T_VARIABLE","$this",210],";",["T_WHITESPACE","\n    ",210],"}",["T_WHITESPACE","\n\n    ",211],["T_DOC_COMMENT","\/**\n     * Unset layout\n     *\n     * Only for PHP 5 >= 5.3.0\n     *\n     * @return Mage_XmlConnect_Helper_OfflineCatalog\n     *\/",213],["T_WHITESPACE","\n    ",219],["T_PROTECTED","protected",220],["T_WHITESPACE"," ",220],["T_FUNCTION","function",220],["T_WHITESPACE"," ",220],["T_STRING","unsetLayout",220],"(",")",["T_WHITESPACE","\n    ",220],"{",["T_WHITESPACE","\n        ",221],["T_DOC_COMMENT","\/** @TODO Add support for previous PHP version *\/",222],["T_WHITESPACE","\n        ",222],["T_UNSET","unset",223],"(",["T_VARIABLE","$this",223],["T_OBJECT_OPERATOR","->",223],["T_STRING","_layout",223],")",";",["T_WHITESPACE","\n        ",223],["T_STRING","gc_collect_cycles",224],"(",")",";",["T_WHITESPACE","\n        ",224],["T_RETURN","return",225],["T_WHITESPACE"," ",225],["T_VARIABLE","$this",225],";",["T_WHITESPACE","\n    ",225],"}",["T_WHITESPACE","\n\n    ",226],["T_DOC_COMMENT","\/**\n     * Get current device model\n     *\n     * @return Mage_XmlConnect_Model_Application|null\n     *\/",228],["T_WHITESPACE","\n    ",232],["T_PUBLIC","public",233],["T_WHITESPACE"," ",233],["T_FUNCTION","function",233],["T_WHITESPACE"," ",233],["T_STRING","getCurrentDeviceModel",233],"(",")",["T_WHITESPACE","\n    ",233],"{",["T_WHITESPACE","\n        ",234],["T_RETURN","return",235],["T_WHITESPACE"," ",235],["T_VARIABLE","$this",235],["T_OBJECT_OPERATOR","->",235],["T_STRING","_appModel",235],";",["T_WHITESPACE","\n    ",235],"}",["T_WHITESPACE","\n\n    ",236],["T_DOC_COMMENT","\/**\n     * Set current device model\n     *\n     * @param string $key\n     * @return bool\n     *\/",238],["T_WHITESPACE","\n    ",243],["T_PUBLIC","public",244],["T_WHITESPACE"," ",244],["T_FUNCTION","function",244],["T_WHITESPACE"," ",244],["T_STRING","setCurrentDeviceModel",244],"(",["T_VARIABLE","$key",244],")",["T_WHITESPACE","\n    ",244],"{",["T_WHITESPACE","\n        ",245],["T_VARIABLE","$appCode",246],["T_WHITESPACE"," ",246],"=",["T_WHITESPACE"," ",246],["T_VARIABLE","$this",246],["T_OBJECT_OPERATOR","->",246],["T_STRING","base64UrlDecode",246],"(",["T_VARIABLE","$key",246],")",";",["T_WHITESPACE","\n        ",246],["T_VARIABLE","$appModel",247],["T_WHITESPACE"," ",247],"=",["T_WHITESPACE"," ",247],["T_STRING","Mage",247],["T_DOUBLE_COLON","::",247],["T_STRING","getModel",247],"(",["T_CONSTANT_ENCAPSED_STRING","'xmlConnect\/application'",247],")",["T_OBJECT_OPERATOR","->",247],["T_STRING","loadByCode",247],"(",["T_VARIABLE","$appCode",247],")",";",["T_WHITESPACE","\n        ",247],["T_IF","if",248],["T_WHITESPACE"," ",248],"(","!",["T_VARIABLE","$appModel",248],["T_OBJECT_OPERATOR","->",248],["T_STRING","getId",248],"(",")",")",["T_WHITESPACE"," ",248],"{",["T_WHITESPACE","\n            ",248],["T_RETURN","return",249],["T_WHITESPACE"," ",249],["T_STRING","false",249],";",["T_WHITESPACE","\n        ",249],"}",["T_WHITESPACE","\n        ",250],["T_STRING","Mage",251],["T_DOUBLE_COLON","::",251],["T_STRING","register",251],"(",["T_CONSTANT_ENCAPSED_STRING","'current_app'",251],",",["T_WHITESPACE"," ",251],["T_VARIABLE","$appModel",251],")",";",["T_WHITESPACE","\n        ",251],["T_VARIABLE","$this",252],["T_OBJECT_OPERATOR","->",252],["T_STRING","_appModel",252],["T_WHITESPACE"," ",252],"=",["T_WHITESPACE"," ",252],["T_VARIABLE","$appModel",252],";",["T_WHITESPACE","\n        ",252],["T_RETURN","return",253],["T_WHITESPACE"," ",253],["T_STRING","true",253],";",["T_WHITESPACE","\n    ",253],"}",["T_WHITESPACE","\n\n    ",254],["T_DOC_COMMENT","\/**\n     * Base64 url encode\n     *\n     * @param string $data\n     * @return string\n     *\/",256],["T_WHITESPACE","\n    ",261],["T_PUBLIC","public",262],["T_WHITESPACE"," ",262],["T_FUNCTION","function",262],["T_WHITESPACE"," ",262],["T_STRING","base64UrlEncode",262],"(",["T_VARIABLE","$data",262],")",["T_WHITESPACE","\n    ",262],"{",["T_WHITESPACE","\n        ",263],["T_DOC_COMMENT","\/** @var $decryptHelper Mage_Core_Helper_Data *\/",264],["T_WHITESPACE","\n        ",264],["T_VARIABLE","$decryptHelper",265],["T_WHITESPACE"," ",265],"=",["T_WHITESPACE"," ",265],["T_STRING","Mage",265],["T_DOUBLE_COLON","::",265],["T_STRING","helper",265],"(",["T_CONSTANT_ENCAPSED_STRING","'core\/data'",265],")",";",["T_WHITESPACE","\n        ",265],["T_RETURN","return",266],["T_WHITESPACE"," ",266],["T_STRING","strtr",266],"(",["T_VARIABLE","$decryptHelper",266],["T_OBJECT_OPERATOR","->",266],["T_STRING","encrypt",266],"(",["T_VARIABLE","$data",266],")",",",["T_WHITESPACE"," ",266],["T_CONSTANT_ENCAPSED_STRING","'+\/='",266],",",["T_WHITESPACE"," ",266],["T_CONSTANT_ENCAPSED_STRING","'-_,'",266],")",";",["T_WHITESPACE","\n    ",266],"}",["T_WHITESPACE","\n\n    ",267],["T_DOC_COMMENT","\/**\n     * Base64 url dencode\n     *\n     * @param string $data\n     * @return string\n     *\/",269],["T_WHITESPACE","\n    ",274],["T_PUBLIC","public",275],["T_WHITESPACE"," ",275],["T_FUNCTION","function",275],["T_WHITESPACE"," ",275],["T_STRING","base64UrlDecode",275],"(",["T_VARIABLE","$data",275],")",["T_WHITESPACE","\n    ",275],"{",["T_WHITESPACE","\n        ",276],["T_DOC_COMMENT","\/** @var $decryptHelper Mage_Core_Helper_Data *\/",277],["T_WHITESPACE","\n        ",277],["T_VARIABLE","$decryptHelper",278],["T_WHITESPACE"," ",278],"=",["T_WHITESPACE"," ",278],["T_STRING","Mage",278],["T_DOUBLE_COLON","::",278],["T_STRING","helper",278],"(",["T_CONSTANT_ENCAPSED_STRING","'core\/data'",278],")",";",["T_WHITESPACE","\n        ",278],["T_RETURN","return",279],["T_WHITESPACE"," ",279],["T_VARIABLE","$decryptHelper",279],["T_OBJECT_OPERATOR","->",279],["T_STRING","decrypt",279],"(",["T_STRING","strtr",279],"(",["T_VARIABLE","$data",279],",",["T_WHITESPACE"," ",279],["T_CONSTANT_ENCAPSED_STRING","'-_,'",279],",",["T_WHITESPACE"," ",279],["T_CONSTANT_ENCAPSED_STRING","'+\/='",279],")",")",";",["T_WHITESPACE","\n    ",279],"}",["T_WHITESPACE","\n\n    ",280],["T_DOC_COMMENT","\/**\n     * Render xml object\n     *\n     * @return Mage_XmlConnect_Helper_OfflineCatalog\n     *\/",282],["T_WHITESPACE","\n    ",286],["T_PUBLIC","public",287],["T_WHITESPACE"," ",287],["T_FUNCTION","function",287],["T_WHITESPACE"," ",287],["T_STRING","renderXmlObject",287],"(",")",["T_WHITESPACE","\n    ",287],"{",["T_WHITESPACE","\n        ",288],["T_DOC_COMMENT","\/** @var $result Mage_XmlConnect_Model_Simplexml_Element *\/",289],["T_WHITESPACE","\n        ",289],["T_VARIABLE","$result",290],["T_WHITESPACE"," ",290],"=",["T_WHITESPACE"," ",290],["T_STRING","Mage",290],["T_DOUBLE_COLON","::",290],["T_STRING","getModel",290],"(",["T_CONSTANT_ENCAPSED_STRING","'xmlconnect\/simplexml_element'",290],",",["T_WHITESPACE"," ",290],["T_CONSTANT_ENCAPSED_STRING","'<plist  version=\"1.0\"><\/plist>'",290],")",";",["T_WHITESPACE","\n        ",290],["T_VARIABLE","$result",291],["T_OBJECT_OPERATOR","->",291],["T_STRING","appendChild",291],"(",["T_VARIABLE","$this",291],["T_OBJECT_OPERATOR","->",291],["T_STRING","_getXmlObject",291],"(",")",")",["T_OBJECT_OPERATOR","->",291],["T_STRING","asNiceXml",291],"(",["T_VARIABLE","$this",291],["T_OBJECT_OPERATOR","->",291],["T_STRING","_getResultDir",291],"(",")",["T_WHITESPACE"," ",291],".",["T_WHITESPACE"," ",291],["T_STRING","DS",291],["T_WHITESPACE"," ",291],".",["T_WHITESPACE"," ",291],["T_STRING","self",291],["T_DOUBLE_COLON","::",291],["T_STRING","MAP_FILE",291],")",";",["T_WHITESPACE","\n        ",291],["T_RETURN","return",292],["T_WHITESPACE"," ",292],["T_VARIABLE","$this",292],";",["T_WHITESPACE","\n    ",292],"}",["T_WHITESPACE","\n\n    ",293],["T_DOC_COMMENT","\/**\n     * Get export url\n     *\n     * @return string\n     *\/",295],["T_WHITESPACE","\n    ",299],["T_PUBLIC","public",300],["T_WHITESPACE"," ",300],["T_FUNCTION","function",300],["T_WHITESPACE"," ",300],["T_STRING","getExportUrl",300],"(",")",["T_WHITESPACE","\n    ",300],"{",["T_WHITESPACE","\n        ",301],["T_VARIABLE","$app",302],["T_WHITESPACE"," ",302],"=",["T_WHITESPACE"," ",302],["T_STRING","Mage",302],["T_DOUBLE_COLON","::",302],["T_STRING","helper",302],"(",["T_CONSTANT_ENCAPSED_STRING","'xmlconnect'",302],")",["T_OBJECT_OPERATOR","->",302],["T_STRING","getApplication",302],"(",")",";",["T_WHITESPACE","\n        ",302],["T_VARIABLE","$secretKey",303],["T_WHITESPACE"," ",303],"=",["T_WHITESPACE"," ",303],["T_ARRAY","array",303],"(",["T_CONSTANT_ENCAPSED_STRING","'key'",303],["T_WHITESPACE"," ",303],["T_DOUBLE_ARROW","=>",303],["T_WHITESPACE"," ",303],["T_VARIABLE","$this",303],["T_OBJECT_OPERATOR","->",303],["T_STRING","base64UrlEncode",303],"(",["T_VARIABLE","$app",303],["T_OBJECT_OPERATOR","->",303],["T_STRING","getCode",303],"(",")",")",")",";",["T_WHITESPACE","\n        ",303],["T_VARIABLE","$storeUrl",304],["T_WHITESPACE"," ",304],"=",["T_WHITESPACE"," ",304],["T_STRING","Mage",304],["T_DOUBLE_COLON","::",304],["T_STRING","getModel",304],"(",["T_CONSTANT_ENCAPSED_STRING","'core\/store'",304],")",["T_OBJECT_OPERATOR","->",304],["T_STRING","load",304],"(",["T_VARIABLE","$app",304],["T_OBJECT_OPERATOR","->",304],["T_STRING","getStoreId",304],"(",")",")",["T_OBJECT_OPERATOR","->",304],["T_STRING","getUrl",304],"(",["T_STRING","self",304],["T_DOUBLE_COLON","::",304],["T_STRING","EXPORT_URL",304],",",["T_WHITESPACE"," ",304],["T_VARIABLE","$secretKey",304],")",";",["T_WHITESPACE","\n        ",304],["T_RETURN","return",305],["T_WHITESPACE"," ",305],["T_VARIABLE","$storeUrl",305],";",["T_WHITESPACE","\n    ",305],"}",["T_WHITESPACE","\n",306],"}",["T_WHITESPACE","\n",307]]
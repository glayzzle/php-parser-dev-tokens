[["T_OPEN_TAG","<?php\n",1],["T_DOC_COMMENT","\/**\n * Magento\n *\n * NOTICE OF LICENSE\n *\n * This source file is subject to the Open Software License (OSL 3.0)\n * that is bundled with this package in the file LICENSE.txt.\n * It is also available through the world-wide-web at this URL:\n * http:\/\/opensource.org\/licenses\/osl-3.0.php\n * If you did not receive a copy of the license and are unable to\n * obtain it through the world-wide-web, please send an email\n * to license@magento.com so we can send you a copy immediately.\n *\n * DISCLAIMER\n *\n * Do not edit or add to this file if you wish to upgrade Magento to newer\n * versions in the future. If you wish to customize Magento for your\n * needs please refer to http:\/\/www.magento.com for more information.\n *\n * @category    Mage\n * @package     Mage_XmlConnect\n * @copyright  Copyright (c) 2006-2016 X.commerce, Inc. and affiliates (http:\/\/www.magento.com)\n * @license    http:\/\/opensource.org\/licenses\/osl-3.0.php  Open Software License (OSL 3.0)\n *\/",2],["T_WHITESPACE","\n\n",25],["T_DOC_COMMENT","\/**\n * XmlConnect Images model\n *\n * @category    Mage\n * @package     Mage_XmlConnect\n * @author      Magento Core Team <core@magentocommerce.com>\n *\/",27],["T_WHITESPACE","\n",33],["T_CLASS","class",34],["T_WHITESPACE"," ",34],["T_STRING","Mage_XmlConnect_Model_ImageAction",34],["T_WHITESPACE"," ",34],["T_EXTENDS","extends",34],["T_WHITESPACE"," ",34],["T_STRING","Mage_Core_Model_Abstract",34],["T_WHITESPACE","\n",34],"{",["T_WHITESPACE","\n\n    ",35],["T_DOC_COMMENT","\/**\n     * Default image action configuration category\n     *\/",37],["T_WHITESPACE","\n    ",39],["T_CONST","const",40],["T_WHITESPACE"," ",40],["T_STRING","IMAGE_ACTION_CATEGORY_DEFAULT",40],["T_WHITESPACE"," ",40],"=",["T_WHITESPACE"," ",40],["T_CONSTANT_ENCAPSED_STRING","'image_action'",40],";",["T_WHITESPACE","\n\n    ",40],["T_DOC_COMMENT","\/**\n     * CMS action type\n     *\/",42],["T_WHITESPACE","\n    ",44],["T_CONST","const",45],["T_WHITESPACE"," ",45],["T_STRING","ACTION_TYPE_CMS",45],["T_WHITESPACE"," ",45],"=",["T_WHITESPACE"," ",45],["T_CONSTANT_ENCAPSED_STRING","'cms'",45],";",["T_WHITESPACE","\n\n    ",45],["T_DOC_COMMENT","\/**\n     * Product action type\n     *\/",47],["T_WHITESPACE","\n    ",49],["T_CONST","const",50],["T_WHITESPACE"," ",50],["T_STRING","ACTION_TYPE_PRODUCT",50],["T_WHITESPACE"," ",50],"=",["T_WHITESPACE"," ",50],["T_CONSTANT_ENCAPSED_STRING","'product'",50],";",["T_WHITESPACE","\n\n    ",50],["T_DOC_COMMENT","\/**\n     * Category action type\n     *\/",52],["T_WHITESPACE","\n    ",54],["T_CONST","const",55],["T_WHITESPACE"," ",55],["T_STRING","ACTION_TYPE_CATEGORY",55],["T_WHITESPACE"," ",55],"=",["T_WHITESPACE"," ",55],["T_CONSTANT_ENCAPSED_STRING","'category'",55],";",["T_WHITESPACE","\n\n    ",55],["T_DOC_COMMENT","\/**\n     * Image action types\n     *\n     * @var array\n     *\/",57],["T_WHITESPACE","\n    ",61],["T_PROTECTED","protected",62],["T_WHITESPACE"," ",62],["T_VARIABLE","$_imageActionTypes",62],["T_WHITESPACE"," ",62],"=",["T_WHITESPACE"," ",62],["T_ARRAY","array",62],"(",["T_STRING","self",62],["T_DOUBLE_COLON","::",62],["T_STRING","ACTION_TYPE_CMS",62],",",["T_WHITESPACE"," ",62],["T_STRING","self",62],["T_DOUBLE_COLON","::",62],["T_STRING","ACTION_TYPE_PRODUCT",62],",",["T_WHITESPACE"," ",62],["T_STRING","self",62],["T_DOUBLE_COLON","::",62],["T_STRING","ACTION_TYPE_CATEGORY",62],")",";",["T_WHITESPACE","\n\n    ",62],["T_DOC_COMMENT","\/**\n     * Required image action fields separated by action type\n     *\n     * @var array\n     *\/",64],["T_WHITESPACE","\n    ",68],["T_PROTECTED","protected",69],["T_WHITESPACE"," ",69],["T_VARIABLE","$_requiredImageActionFields",69],["T_WHITESPACE"," ",69],"=",["T_WHITESPACE"," ",69],["T_ARRAY","array",69],"(",["T_WHITESPACE","\n        ",69],["T_STRING","self",70],["T_DOUBLE_COLON","::",70],["T_STRING","ACTION_TYPE_CMS",70],["T_WHITESPACE"," ",70],["T_DOUBLE_ARROW","=>",70],["T_WHITESPACE"," ",70],["T_ARRAY","array",70],"(",["T_CONSTANT_ENCAPSED_STRING","'action_type'",70],",",["T_CONSTANT_ENCAPSED_STRING","'image_id'",70],",",["T_WHITESPACE"," ",70],["T_CONSTANT_ENCAPSED_STRING","'entity_action'",70],",",["T_WHITESPACE"," ",70],["T_CONSTANT_ENCAPSED_STRING","'entity_name'",70],")",",",["T_WHITESPACE","\n        ",70],["T_STRING","self",71],["T_DOUBLE_COLON","::",71],["T_STRING","ACTION_TYPE_PRODUCT",71],["T_WHITESPACE"," ",71],["T_DOUBLE_ARROW","=>",71],["T_WHITESPACE"," ",71],["T_ARRAY","array",71],"(",["T_CONSTANT_ENCAPSED_STRING","'action_type'",71],",",["T_WHITESPACE"," ",71],["T_CONSTANT_ENCAPSED_STRING","'image_id'",71],",",["T_WHITESPACE"," ",71],["T_CONSTANT_ENCAPSED_STRING","'entity_action'",71],",",["T_WHITESPACE"," ",71],["T_CONSTANT_ENCAPSED_STRING","'entity_name'",71],")",",",["T_WHITESPACE","\n        ",71],["T_STRING","self",72],["T_DOUBLE_COLON","::",72],["T_STRING","ACTION_TYPE_CATEGORY",72],["T_WHITESPACE"," ",72],["T_DOUBLE_ARROW","=>",72],["T_WHITESPACE"," ",72],["T_ARRAY","array",72],"(",["T_CONSTANT_ENCAPSED_STRING","'action_type'",72],",",["T_WHITESPACE"," ",72],["T_CONSTANT_ENCAPSED_STRING","'image_id'",72],",",["T_WHITESPACE"," ",72],["T_CONSTANT_ENCAPSED_STRING","'entity_action'",72],",",["T_WHITESPACE"," ",72],["T_CONSTANT_ENCAPSED_STRING","'entity_name'",72],")",["T_WHITESPACE","\n    ",72],")",";",["T_WHITESPACE","\n\n    ",73],["T_DOC_COMMENT","\/**\n     * Image action config path template\n     *\n     * @var string\n     *\/",75],["T_WHITESPACE","\n    ",79],["T_PROTECTED","protected",80],["T_WHITESPACE"," ",80],["T_VARIABLE","$_imageActionConfigPathTemplate",80],["T_WHITESPACE"," ",80],"=",["T_WHITESPACE"," ",80],["T_CONSTANT_ENCAPSED_STRING","'image_id\/%d\/app_id\/%d'",80],";",["T_WHITESPACE","\n\n    ",80],["T_DOC_COMMENT","\/**\n     * Image action data to save\n     *\n     * @var array\n     *\/",82],["T_WHITESPACE","\n    ",86],["T_PROTECTED","protected",87],["T_WHITESPACE"," ",87],["T_VARIABLE","$_currentImageActionData",87],";",["T_WHITESPACE","\n\n    ",87],["T_DOC_COMMENT","\/**\n     * Application model\n     *\n     * @var Mage_XmlConnect_Model_Application\n     *\/",89],["T_WHITESPACE","\n    ",93],["T_PROTECTED","protected",94],["T_WHITESPACE"," ",94],["T_VARIABLE","$_applicationModel",94],";",["T_WHITESPACE","\n\n    ",94],["T_DOC_COMMENT","\/**\n     * Initialize model\n     *\n     * @param null|Mage_XmlConnect_Model_Application $applicationModel\n     *\/",96],["T_WHITESPACE","\n    ",100],["T_PUBLIC","public",101],["T_WHITESPACE"," ",101],["T_FUNCTION","function",101],["T_WHITESPACE"," ",101],["T_STRING","__construct",101],"(",["T_VARIABLE","$applicationModel",101],["T_WHITESPACE"," ",101],"=",["T_WHITESPACE"," ",101],["T_STRING","null",101],")",["T_WHITESPACE","\n    ",101],"{",["T_WHITESPACE","\n        ",102],["T_VARIABLE","$this",103],["T_OBJECT_OPERATOR","->",103],["T_STRING","_setApplicationModel",103],"(",["T_VARIABLE","$applicationModel",103],")",";",["T_WHITESPACE","\n    ",103],"}",["T_WHITESPACE","\n\n    ",104],["T_DOC_COMMENT","\/**\n     * Set application model\n     *\n     * @param Mage_XmlConnect_Model_Application $applicationModel\n     * @return Mage_XmlConnect_Model_Device_Abstract\n     *\/",106],["T_WHITESPACE","\n    ",111],["T_PROTECTED","protected",112],["T_WHITESPACE"," ",112],["T_FUNCTION","function",112],["T_WHITESPACE"," ",112],["T_STRING","_setApplicationModel",112],"(",["T_VARIABLE","$applicationModel",112],["T_WHITESPACE"," ",112],"=",["T_WHITESPACE"," ",112],["T_STRING","null",112],")",["T_WHITESPACE","\n    ",112],"{",["T_WHITESPACE","\n        ",113],["T_IF","if",114],["T_WHITESPACE"," ",114],"(",["T_VARIABLE","$applicationModel",114],["T_WHITESPACE"," ",114],["T_INSTANCEOF","instanceof",114],["T_WHITESPACE"," ",114],["T_STRING","Mage_XmlConnect_Model_Application",114],")",["T_WHITESPACE"," ",114],"{",["T_WHITESPACE","\n            ",114],["T_VARIABLE","$this",115],["T_OBJECT_OPERATOR","->",115],["T_STRING","_applicationModel",115],["T_WHITESPACE"," ",115],"=",["T_WHITESPACE"," ",115],["T_VARIABLE","$applicationModel",115],";",["T_WHITESPACE","\n        ",115],"}",["T_WHITESPACE"," ",116],["T_ELSE","else",116],["T_WHITESPACE"," ",116],"{",["T_WHITESPACE","\n            ",116],["T_VARIABLE","$this",117],["T_OBJECT_OPERATOR","->",117],["T_STRING","_applicationModel",117],["T_WHITESPACE"," ",117],"=",["T_WHITESPACE"," ",117],["T_STRING","Mage",117],["T_DOUBLE_COLON","::",117],["T_STRING","helper",117],"(",["T_CONSTANT_ENCAPSED_STRING","'xmlconnect'",117],")",["T_OBJECT_OPERATOR","->",117],["T_STRING","getApplication",117],"(",")",";",["T_WHITESPACE","\n        ",117],"}",["T_WHITESPACE","\n        ",118],["T_RETURN","return",119],["T_WHITESPACE"," ",119],["T_VARIABLE","$this",119],";",["T_WHITESPACE","\n    ",119],"}",["T_WHITESPACE","\n\n    ",120],["T_DOC_COMMENT","\/**\n     * Get application model\n     *\n     * @return Mage_XmlConnect_Model_Application\n     *\/",122],["T_WHITESPACE","\n    ",126],["T_PROTECTED","protected",127],["T_WHITESPACE"," ",127],["T_FUNCTION","function",127],["T_WHITESPACE"," ",127],["T_STRING","_getApplicationModel",127],"(",")",["T_WHITESPACE","\n    ",127],"{",["T_WHITESPACE","\n        ",128],["T_IF","if",129],["T_WHITESPACE"," ",129],"(",["T_STRING","null",129],["T_WHITESPACE"," ",129],["T_IS_IDENTICAL","===",129],["T_WHITESPACE"," ",129],["T_VARIABLE","$this",129],["T_OBJECT_OPERATOR","->",129],["T_STRING","_applicationModel",129],")",["T_WHITESPACE"," ",129],"{",["T_WHITESPACE","\n            ",129],["T_VARIABLE","$this",130],["T_OBJECT_OPERATOR","->",130],["T_STRING","setApplicationModel",130],"(",["T_STRING","Mage",130],["T_DOUBLE_COLON","::",130],["T_STRING","helper",130],"(",["T_CONSTANT_ENCAPSED_STRING","'xmlconnect'",130],")",["T_OBJECT_OPERATOR","->",130],["T_STRING","getApplication",130],"(",")",")",";",["T_WHITESPACE","\n        ",130],"}",["T_WHITESPACE","\n        ",131],["T_RETURN","return",132],["T_WHITESPACE"," ",132],["T_VARIABLE","$this",132],["T_OBJECT_OPERATOR","->",132],["T_STRING","_applicationModel",132],";",["T_WHITESPACE","\n    ",132],"}",["T_WHITESPACE","\n\n\n    ",133],["T_DOC_COMMENT","\/**\n     * Save image action info\n     *\n     * @param array $imageData\n     * @param string $category\n     * @return Mage_XmlConnect_Model_Device_Abstract\n     *\/",136],["T_WHITESPACE","\n    ",142],["T_PUBLIC","public",143],["T_WHITESPACE"," ",143],["T_FUNCTION","function",143],["T_WHITESPACE"," ",143],["T_STRING","saveImageAction",143],"(",["T_VARIABLE","$imageData",143],",",["T_WHITESPACE"," ",143],["T_VARIABLE","$category",143],["T_WHITESPACE"," ",143],"=",["T_WHITESPACE"," ",143],["T_STRING","self",143],["T_DOUBLE_COLON","::",143],["T_STRING","IMAGE_ACTION_CATEGORY_DEFAULT",143],")",["T_WHITESPACE","\n    ",143],"{",["T_WHITESPACE","\n        ",144],["T_VARIABLE","$this",145],["T_OBJECT_OPERATOR","->",145],["T_STRING","_setCurrentImageActionData",145],"(",["T_STRING","null",145],")",["T_OBJECT_OPERATOR","->",145],["T_STRING","_validateImagePrepareActionData",145],"(",["T_VARIABLE","$imageData",145],")",";",["T_WHITESPACE","\n        ",145],["T_VARIABLE","$actionData",146],["T_WHITESPACE"," ",146],"=",["T_WHITESPACE"," ",146],["T_VARIABLE","$this",146],["T_OBJECT_OPERATOR","->",146],["T_STRING","getCurrentImageActionData",146],"(",")",";",["T_WHITESPACE","\n        ",146],["T_VARIABLE","$configPath",147],["T_WHITESPACE"," ",147],"=",["T_WHITESPACE"," ",147],["T_VARIABLE","$this",147],["T_OBJECT_OPERATOR","->",147],["T_STRING","_createImageActionConfigPath",147],"(",["T_VARIABLE","$actionData",147],"[",["T_CONSTANT_ENCAPSED_STRING","'image_id'",147],"]",")",";",["T_WHITESPACE","\n        ",147],["T_VARIABLE","$this",148],["T_OBJECT_OPERATOR","->",148],["T_STRING","_getApplicationModel",148],"(",")",["T_OBJECT_OPERATOR","->",148],["T_STRING","getConfigModel",148],"(",")",["T_OBJECT_OPERATOR","->",148],["T_STRING","saveConfig",148],"(",["T_VARIABLE","$this",148],["T_OBJECT_OPERATOR","->",148],["T_STRING","_getApplicationModel",148],"(",")",["T_OBJECT_OPERATOR","->",148],["T_STRING","getId",148],"(",")",",",["T_WHITESPACE","\n            ",148],["T_ARRAY","array",149],"(",["T_VARIABLE","$configPath",149],["T_WHITESPACE"," ",149],["T_DOUBLE_ARROW","=>",149],["T_WHITESPACE"," ",149],["T_STRING","serialize",149],"(",["T_VARIABLE","$actionData",149],")",")",",",["T_WHITESPACE"," ",149],["T_VARIABLE","$category",149],")",";",["T_WHITESPACE","\n        ",149],["T_RETURN","return",150],["T_WHITESPACE"," ",150],["T_VARIABLE","$this",150],";",["T_WHITESPACE","\n    ",150],"}",["T_WHITESPACE","\n\n    ",151],["T_DOC_COMMENT","\/**\n     * Validate image action by action type and prepare data for save\n     *\n     * @throws Mage_Core_Exception\n     * @param array $imageData\n     * @return bool\n     *\/",153],["T_WHITESPACE","\n    ",159],["T_PROTECTED","protected",160],["T_WHITESPACE","  ",160],["T_FUNCTION","function",160],["T_WHITESPACE"," ",160],["T_STRING","_validateImagePrepareActionData",160],"(",["T_VARIABLE","$imageData",160],")",["T_WHITESPACE","\n    ",160],"{",["T_WHITESPACE","\n        ",161],["T_IF","if",162],["T_WHITESPACE"," ",162],"(",["T_ISSET","isset",162],"(",["T_VARIABLE","$imageData",162],"[",["T_CONSTANT_ENCAPSED_STRING","'action_type'",162],"]",")",["T_WHITESPACE"," ",162],["T_BOOLEAN_AND","&&",162],["T_WHITESPACE"," ",162],["T_STRING","in_array",162],"(",["T_VARIABLE","$imageData",162],"[",["T_CONSTANT_ENCAPSED_STRING","'action_type'",162],"]",",",["T_WHITESPACE"," ",162],["T_VARIABLE","$this",162],["T_OBJECT_OPERATOR","->",162],["T_STRING","_imageActionTypes",162],")",")",["T_WHITESPACE"," ",162],"{",["T_WHITESPACE","\n            ",162],["T_IF","if",163],["T_WHITESPACE"," ",163],"(",["T_VARIABLE","$imageData",163],"[",["T_CONSTANT_ENCAPSED_STRING","'action_type'",163],"]",["T_WHITESPACE"," ",163],["T_IS_EQUAL","==",163],["T_WHITESPACE"," ",163],["T_STRING","self",163],["T_DOUBLE_COLON","::",163],["T_STRING","ACTION_TYPE_CMS",163],")",["T_WHITESPACE"," ",163],"{",["T_WHITESPACE","\n                ",163],["T_VARIABLE","$imageData",164],"[",["T_CONSTANT_ENCAPSED_STRING","'entity_name'",164],"]",["T_WHITESPACE"," ",164],"=",["T_WHITESPACE"," ",164],["T_STRING","Mage",164],["T_DOUBLE_COLON","::",164],["T_STRING","getModel",164],"(",["T_CONSTANT_ENCAPSED_STRING","'cms\/page'",164],")",["T_OBJECT_OPERATOR","->",164],["T_STRING","load",164],"(",["T_VARIABLE","$imageData",164],"[",["T_CONSTANT_ENCAPSED_STRING","'entity_action'",164],"]",")",["T_OBJECT_OPERATOR","->",164],["T_STRING","getTitle",164],"(",")",";",["T_WHITESPACE","\n            ",164],"}",["T_WHITESPACE","\n            ",165],["T_VARIABLE","$result",166],["T_WHITESPACE"," ",166],"=",["T_WHITESPACE"," ",166],["T_ARRAY","array",166],"(",")",";",["T_WHITESPACE","\n            ",166],["T_FOREACH","foreach",167],["T_WHITESPACE"," ",167],"(",["T_VARIABLE","$this",167],["T_OBJECT_OPERATOR","->",167],["T_STRING","_requiredImageActionFields",167],"[",["T_VARIABLE","$imageData",167],"[",["T_CONSTANT_ENCAPSED_STRING","'action_type'",167],"]","]",["T_WHITESPACE"," ",167],["T_AS","as",167],["T_WHITESPACE"," ",167],["T_VARIABLE","$requiredField",167],")",["T_WHITESPACE"," ",167],"{",["T_WHITESPACE","\n                ",167],["T_IF","if",168],["T_WHITESPACE"," ",168],"(",["T_EMPTY","empty",168],"(",["T_VARIABLE","$imageData",168],"[",["T_VARIABLE","$requiredField",168],"]",")",")",["T_WHITESPACE"," ",168],"{",["T_WHITESPACE","\n                    ",168],["T_STRING","Mage",169],["T_DOUBLE_COLON","::",169],["T_STRING","throwException",169],"(",["T_STRING","Mage",169],["T_DOUBLE_COLON","::",169],["T_STRING","helper",169],"(",["T_CONSTANT_ENCAPSED_STRING","'xmlconnect'",169],")",["T_OBJECT_OPERATOR","->",169],["T_STRING","__",169],"(",["T_CONSTANT_ENCAPSED_STRING","'%s fields is required'",169],",",["T_WHITESPACE"," ",169],["T_VARIABLE","$requiredField",169],")",")",";",["T_WHITESPACE","\n                ",169],"}",["T_WHITESPACE","\n                ",170],["T_VARIABLE","$result",171],"[",["T_VARIABLE","$requiredField",171],"]",["T_WHITESPACE"," ",171],"=",["T_WHITESPACE"," ",171],["T_VARIABLE","$imageData",171],"[",["T_VARIABLE","$requiredField",171],"]",";",["T_WHITESPACE","\n            ",171],"}",["T_WHITESPACE","\n            ",172],["T_VARIABLE","$this",173],["T_OBJECT_OPERATOR","->",173],["T_STRING","_setCurrentImageActionData",173],"(",["T_VARIABLE","$result",173],")",";",["T_WHITESPACE","\n            ",173],["T_RETURN","return",174],["T_WHITESPACE"," ",174],["T_STRING","true",174],";",["T_WHITESPACE","\n        ",174],"}",["T_WHITESPACE"," ",175],["T_ELSE","else",175],["T_WHITESPACE"," ",175],"{",["T_WHITESPACE","\n            ",175],["T_STRING","Mage",176],["T_DOUBLE_COLON","::",176],["T_STRING","throwException",176],"(",["T_STRING","Mage",176],["T_DOUBLE_COLON","::",176],["T_STRING","helper",176],"(",["T_CONSTANT_ENCAPSED_STRING","'xmlconnect'",176],")",["T_OBJECT_OPERATOR","->",176],["T_STRING","__",176],"(",["T_CONSTANT_ENCAPSED_STRING","'Action type does\\'t recognized'",176],")",")",";",["T_WHITESPACE","\n            ",176],["T_RETURN","return",177],["T_WHITESPACE"," ",177],["T_STRING","false",177],";",["T_WHITESPACE","\n        ",177],"}",["T_WHITESPACE","\n    ",178],"}",["T_WHITESPACE","\n\n    ",179],["T_DOC_COMMENT","\/**\n     * Create image action config path\n     *\n     * @param int $imageId\n     * @return string\n     *\/",181],["T_WHITESPACE","\n    ",186],["T_PROTECTED","protected",187],["T_WHITESPACE"," ",187],["T_FUNCTION","function",187],["T_WHITESPACE"," ",187],["T_STRING","_createImageActionConfigPath",187],"(",["T_VARIABLE","$imageId",187],")",["T_WHITESPACE","\n    ",187],"{",["T_WHITESPACE","\n        ",188],["T_RETURN","return",189],["T_WHITESPACE"," ",189],["T_STRING","sprintf",189],"(",["T_VARIABLE","$this",189],["T_OBJECT_OPERATOR","->",189],["T_STRING","_imageActionConfigPathTemplate",189],",",["T_WHITESPACE"," ",189],["T_VARIABLE","$imageId",189],",",["T_WHITESPACE"," ",189],["T_VARIABLE","$this",189],["T_OBJECT_OPERATOR","->",189],["T_STRING","_getApplicationModel",189],"(",")",["T_OBJECT_OPERATOR","->",189],["T_STRING","getId",189],"(",")",")",";",["T_WHITESPACE","\n    ",189],"}",["T_WHITESPACE","\n\n    ",190],["T_DOC_COMMENT","\/**\n     * Set image action data\n     *\n     * @param mixed $data\n     * @return Mage_XmlConnect_Model_Device_Abstract\n     *\/",192],["T_WHITESPACE","\n    ",197],["T_PROTECTED","protected",198],["T_WHITESPACE"," ",198],["T_FUNCTION","function",198],["T_WHITESPACE"," ",198],["T_STRING","_setCurrentImageActionData",198],"(",["T_VARIABLE","$data",198],")",["T_WHITESPACE","\n    ",198],"{",["T_WHITESPACE","\n        ",199],["T_VARIABLE","$this",200],["T_OBJECT_OPERATOR","->",200],["T_STRING","_currentImageActionData",200],["T_WHITESPACE"," ",200],"=",["T_WHITESPACE"," ",200],["T_VARIABLE","$data",200],";",["T_WHITESPACE","\n        ",200],["T_RETURN","return",201],["T_WHITESPACE"," ",201],["T_VARIABLE","$this",201],";",["T_WHITESPACE","\n    ",201],"}",["T_WHITESPACE","\n\n    ",202],["T_DOC_COMMENT","\/**\n     * Action data for currently saved image\n     *\n     * @return array\n     *\/",204],["T_WHITESPACE","\n    ",208],["T_PUBLIC","public",209],["T_WHITESPACE"," ",209],["T_FUNCTION","function",209],["T_WHITESPACE"," ",209],["T_STRING","getCurrentImageActionData",209],"(",")",["T_WHITESPACE","\n    ",209],"{",["T_WHITESPACE","\n        ",210],["T_RETURN","return",211],["T_WHITESPACE"," ",211],["T_VARIABLE","$this",211],["T_OBJECT_OPERATOR","->",211],["T_STRING","_currentImageActionData",211],";",["T_WHITESPACE","\n    ",211],"}",["T_WHITESPACE","\n\n    ",212],["T_DOC_COMMENT","\/**\n     * Get image action data\n     *\n     * @param int $imageId\n     * @return mixed\n     *\/",214],["T_WHITESPACE","\n    ",219],["T_PUBLIC","public",220],["T_WHITESPACE"," ",220],["T_FUNCTION","function",220],["T_WHITESPACE"," ",220],["T_STRING","getImageActionData",220],"(",["T_VARIABLE","$imageId",220],")",["T_WHITESPACE","\n    ",220],"{",["T_WHITESPACE","\n        ",221],["T_VARIABLE","$imageActionConfigData",222],["T_WHITESPACE"," ",222],"=",["T_WHITESPACE"," ",222],["T_VARIABLE","$this",222],["T_OBJECT_OPERATOR","->",222],["T_STRING","_getApplicationModel",222],"(",")",["T_OBJECT_OPERATOR","->",222],["T_STRING","getConfigModel",222],"(",")",["T_OBJECT_OPERATOR","->",222],["T_STRING","loadScalarValue",222],"(",["T_WHITESPACE","\n            ",222],["T_VARIABLE","$this",223],["T_OBJECT_OPERATOR","->",223],["T_STRING","_getApplicationModel",223],"(",")",["T_OBJECT_OPERATOR","->",223],["T_STRING","getId",223],"(",")",",",["T_WHITESPACE","\n            ",223],["T_STRING","self",224],["T_DOUBLE_COLON","::",224],["T_STRING","IMAGE_ACTION_CATEGORY_DEFAULT",224],",",["T_WHITESPACE","\n            ",224],["T_VARIABLE","$this",225],["T_OBJECT_OPERATOR","->",225],["T_STRING","_createImageActionConfigPath",225],"(",["T_VARIABLE","$imageId",225],")",["T_WHITESPACE","\n        ",225],")",";",["T_WHITESPACE","\n        ",226],["T_VARIABLE","$imageActionData",227],["T_WHITESPACE"," ",227],"=",["T_WHITESPACE"," ",227],["T_VARIABLE","$imageActionConfigData",227],["T_WHITESPACE"," ",227],"?",["T_WHITESPACE"," ",227],["T_STRING","unserialize",227],"(",["T_VARIABLE","$imageActionConfigData",227],")",["T_WHITESPACE"," ",227],":",["T_WHITESPACE"," ",227],["T_VARIABLE","$imageActionConfigData",227],";",["T_WHITESPACE","\n        ",227],["T_RETURN","return",228],["T_WHITESPACE"," ",228],["T_VARIABLE","$this",228],["T_OBJECT_OPERATOR","->",228],["T_STRING","_checkImageActionData",228],"(",["T_VARIABLE","$imageActionData",228],")",";",["T_WHITESPACE","\n    ",228],"}",["T_WHITESPACE","\n\n    ",229],["T_DOC_COMMENT","\/**\n     * Check image action data\n     *\n     * @throws Mage_Core_Exception\n     * @param array $imageActionData\n     * @return mixed\n     *\/",231],["T_WHITESPACE","\n    ",237],["T_PROTECTED","protected",238],["T_WHITESPACE"," ",238],["T_FUNCTION","function",238],["T_WHITESPACE"," ",238],["T_STRING","_checkImageActionData",238],"(",["T_VARIABLE","$imageActionData",238],")",["T_WHITESPACE","\n    ",238],"{",["T_WHITESPACE","\n        ",239],["T_IF","if",240],["T_WHITESPACE"," ",240],"(",["T_EMPTY","empty",240],"(",["T_VARIABLE","$imageActionData",240],")",")",["T_WHITESPACE"," ",240],"{",["T_WHITESPACE","\n            ",240],["T_RETURN","return",241],";",["T_WHITESPACE","\n        ",241],"}",["T_WHITESPACE","\n        ",242],["T_VARIABLE","$storeId",243],["T_WHITESPACE"," ",243],"=",["T_WHITESPACE"," ",243],["T_STRING","Mage",243],["T_DOUBLE_COLON","::",243],["T_STRING","app",243],"(",")",["T_OBJECT_OPERATOR","->",243],["T_STRING","getStore",243],"(",")",["T_OBJECT_OPERATOR","->",243],["T_STRING","getId",243],"(",")",";",["T_WHITESPACE","\n        ",243],["T_SWITCH","switch",244],["T_WHITESPACE"," ",244],"(",["T_VARIABLE","$imageActionData",244],"[",["T_CONSTANT_ENCAPSED_STRING","'action_type'",244],"]",")",["T_WHITESPACE"," ",244],"{",["T_WHITESPACE","\n            ",244],["T_CASE","case",245],["T_WHITESPACE"," ",245],["T_STRING","self",245],["T_DOUBLE_COLON","::",245],["T_STRING","ACTION_TYPE_CMS",245],":",["T_WHITESPACE","\n                ",245],["T_VARIABLE","$page",246],["T_WHITESPACE"," ",246],"=",["T_WHITESPACE"," ",246],["T_STRING","Mage",246],["T_DOUBLE_COLON","::",246],["T_STRING","getModel",246],"(",["T_CONSTANT_ENCAPSED_STRING","'cms\/page'",246],")",["T_OBJECT_OPERATOR","->",246],["T_STRING","setStoreId",246],"(",["T_VARIABLE","$storeId",246],")",["T_WHITESPACE","\n                    ",246],["T_OBJECT_OPERATOR","->",247],["T_STRING","load",247],"(",["T_VARIABLE","$imageActionData",247],"[",["T_CONSTANT_ENCAPSED_STRING","'entity_action'",247],"]",",",["T_WHITESPACE"," ",247],["T_CONSTANT_ENCAPSED_STRING","'identifier'",247],")",";",["T_WHITESPACE","\n                ",247],["T_IF","if",248],["T_WHITESPACE"," ",248],"(","!",["T_VARIABLE","$page",248],["T_OBJECT_OPERATOR","->",248],["T_STRING","getId",248],"(",")",["T_WHITESPACE"," ",248],["T_BOOLEAN_AND","&&",248],["T_WHITESPACE"," ",248],["T_VARIABLE","$storeId",248],["T_WHITESPACE"," ",248],["T_IS_EQUAL","==",248],["T_WHITESPACE"," ",248],["T_STRING","Mage_Core_Model_App",248],["T_DOUBLE_COLON","::",248],["T_STRING","ADMIN_STORE_ID",248],")",["T_WHITESPACE"," ",248],"{",["T_WHITESPACE","\n                    ",248],["T_VARIABLE","$this",249],["T_OBJECT_OPERATOR","->",249],["T_STRING","deleteAction",249],"(",["T_VARIABLE","$imageActionData",249],"[",["T_CONSTANT_ENCAPSED_STRING","'image_id'",249],"]",")",";",["T_WHITESPACE","\n                    ",249],["T_RETURN","return",250],";",["T_WHITESPACE","\n                ",250],"}",["T_WHITESPACE"," ",251],["T_ELSEIF","elseif",251],["T_WHITESPACE"," ",251],"(",["T_VARIABLE","$page",251],["T_OBJECT_OPERATOR","->",251],["T_STRING","getId",251],"(",")",")",["T_WHITESPACE"," ",251],"{",["T_WHITESPACE","\n                    ",251],["T_VARIABLE","$imageActionData",252],"[",["T_CONSTANT_ENCAPSED_STRING","'entity_name'",252],"]",["T_WHITESPACE"," ",252],"=",["T_WHITESPACE"," ",252],["T_VARIABLE","$page",252],["T_OBJECT_OPERATOR","->",252],["T_STRING","getTitle",252],"(",")",";",["T_WHITESPACE","\n                ",252],"}",["T_WHITESPACE","\n            ",253],["T_BREAK","break",254],";",["T_WHITESPACE","\n            ",254],["T_CASE","case",255],["T_WHITESPACE"," ",255],["T_STRING","self",255],["T_DOUBLE_COLON","::",255],["T_STRING","ACTION_TYPE_CATEGORY",255],":",["T_WHITESPACE","\n                ",255],["T_VARIABLE","$category",256],["T_WHITESPACE"," ",256],"=",["T_WHITESPACE"," ",256],["T_STRING","Mage",256],["T_DOUBLE_COLON","::",256],["T_STRING","getModel",256],"(",["T_CONSTANT_ENCAPSED_STRING","'catalog\/category'",256],")",["T_OBJECT_OPERATOR","->",256],["T_STRING","load",256],"(",["T_VARIABLE","$imageActionData",256],"[",["T_CONSTANT_ENCAPSED_STRING","'entity_action'",256],"]",")",";",["T_WHITESPACE","\n                ",256],["T_IF","if",257],["T_WHITESPACE"," ",257],"(","!",["T_VARIABLE","$category",257],["T_OBJECT_OPERATOR","->",257],["T_STRING","getId",257],"(",")",")",["T_WHITESPACE"," ",257],"{",["T_WHITESPACE","\n                    ",257],["T_VARIABLE","$this",258],["T_OBJECT_OPERATOR","->",258],["T_STRING","deleteAction",258],"(",["T_VARIABLE","$imageActionData",258],"[",["T_CONSTANT_ENCAPSED_STRING","'image_id'",258],"]",")",";",["T_WHITESPACE","\n                    ",258],["T_RETURN","return",259],";",["T_WHITESPACE","\n                ",259],"}",["T_WHITESPACE"," ",260],["T_ELSEIF","elseif",260],["T_WHITESPACE"," ",260],"(",["T_VARIABLE","$category",260],["T_OBJECT_OPERATOR","->",260],["T_STRING","getIsActive",260],"(",")",["T_WHITESPACE"," ",260],["T_IS_EQUAL","==",260],["T_WHITESPACE"," ",260],["T_LNUMBER","0",260],["T_WHITESPACE"," ",260],["T_BOOLEAN_AND","&&",260],["T_WHITESPACE"," ",260],["T_STRING","Mage_Core_Model_App",260],["T_DOUBLE_COLON","::",260],["T_STRING","ADMIN_STORE_ID",260],["T_WHITESPACE"," ",260],["T_IS_NOT_EQUAL","!=",260],["T_WHITESPACE"," ",260],["T_VARIABLE","$storeId",260],")",["T_WHITESPACE"," ",260],"{",["T_WHITESPACE","\n                    ",260],["T_RETURN","return",261],";",["T_WHITESPACE","\n                ",261],"}",["T_WHITESPACE"," ",262],["T_ELSE","else",262],["T_WHITESPACE"," ",262],"{",["T_WHITESPACE","\n                    ",262],["T_VARIABLE","$imageActionData",263],"[",["T_CONSTANT_ENCAPSED_STRING","'entity_name'",263],"]",["T_WHITESPACE"," ",263],"=",["T_WHITESPACE"," ",263],["T_VARIABLE","$category",263],["T_OBJECT_OPERATOR","->",263],["T_STRING","getName",263],"(",")",";",["T_WHITESPACE","\n                ",263],"}",["T_WHITESPACE","\n            ",264],["T_BREAK","break",265],";",["T_WHITESPACE","\n            ",265],["T_CASE","case",266],["T_WHITESPACE"," ",266],["T_STRING","self",266],["T_DOUBLE_COLON","::",266],["T_STRING","ACTION_TYPE_PRODUCT",266],":",["T_WHITESPACE","\n                ",266],["T_VARIABLE","$product",267],["T_WHITESPACE"," ",267],"=",["T_WHITESPACE"," ",267],["T_STRING","Mage",267],["T_DOUBLE_COLON","::",267],["T_STRING","getModel",267],"(",["T_CONSTANT_ENCAPSED_STRING","'catalog\/product'",267],")",["T_OBJECT_OPERATOR","->",267],["T_STRING","load",267],"(",["T_VARIABLE","$imageActionData",267],"[",["T_CONSTANT_ENCAPSED_STRING","'entity_action'",267],"]",")",";",["T_WHITESPACE","\n                ",267],["T_IF","if",268],["T_WHITESPACE"," ",268],"(","!",["T_VARIABLE","$product",268],["T_OBJECT_OPERATOR","->",268],["T_STRING","getId",268],"(",")",")",["T_WHITESPACE"," ",268],"{",["T_WHITESPACE","\n                    ",268],["T_VARIABLE","$this",269],["T_OBJECT_OPERATOR","->",269],["T_STRING","deleteAction",269],"(",["T_VARIABLE","$imageActionData",269],"[",["T_CONSTANT_ENCAPSED_STRING","'image_id'",269],"]",")",";",["T_WHITESPACE","\n                    ",269],["T_RETURN","return",270],";",["T_WHITESPACE","\n                ",270],"}",["T_WHITESPACE"," ",271],["T_ELSEIF","elseif",271],["T_WHITESPACE"," ",271],"(",["T_VARIABLE","$product",271],["T_OBJECT_OPERATOR","->",271],["T_STRING","getStatus",271],"(",")",["T_WHITESPACE"," ",271],["T_IS_EQUAL","==",271],["T_WHITESPACE"," ",271],["T_STRING","Mage_Catalog_Model_Product_Status",271],["T_DOUBLE_COLON","::",271],["T_STRING","STATUS_DISABLED",271],["T_WHITESPACE","\n                    ",271],["T_BOOLEAN_AND","&&",272],["T_WHITESPACE"," ",272],["T_STRING","Mage_Core_Model_App",272],["T_DOUBLE_COLON","::",272],["T_STRING","ADMIN_STORE_ID",272],["T_WHITESPACE"," ",272],["T_IS_NOT_EQUAL","!=",272],["T_WHITESPACE"," ",272],["T_VARIABLE","$storeId",272],["T_WHITESPACE","\n                ",272],")",["T_WHITESPACE"," ",273],"{",["T_WHITESPACE","\n                    ",273],["T_RETURN","return",274],";",["T_WHITESPACE","\n                ",274],"}",["T_WHITESPACE"," ",275],["T_ELSE","else",275],["T_WHITESPACE"," ",275],"{",["T_WHITESPACE","\n                    ",275],["T_VARIABLE","$imageActionData",276],"[",["T_CONSTANT_ENCAPSED_STRING","'entity_name'",276],"]",["T_WHITESPACE"," ",276],"=",["T_WHITESPACE"," ",276],["T_VARIABLE","$product",276],["T_OBJECT_OPERATOR","->",276],["T_STRING","getName",276],"(",")",";",["T_WHITESPACE","\n                ",276],"}",["T_WHITESPACE","\n            ",277],["T_BREAK","break",278],";",["T_WHITESPACE","\n            ",278],["T_DEFAULT","default",279],":",["T_WHITESPACE","\n                ",279],["T_STRING","Mage",280],["T_DOUBLE_COLON","::",280],["T_STRING","throwException",280],"(",["T_VARIABLE","$this",280],["T_OBJECT_OPERATOR","->",280],["T_STRING","__",280],"(",["T_CONSTANT_ENCAPSED_STRING","'Action type doesn\\'t recognized.'",280],")",")",";",["T_WHITESPACE","\n                ",280],["T_BREAK","break",281],";",["T_WHITESPACE","\n        ",281],"}",["T_WHITESPACE","\n        ",282],["T_RETURN","return",283],["T_WHITESPACE"," ",283],["T_VARIABLE","$imageActionData",283],";",["T_WHITESPACE","\n    ",283],"}",["T_WHITESPACE","\n\n    ",284],["T_DOC_COMMENT","\/**\n     * Delete Image action\n     *\n     * @param int $imageId\n     * @return Mage_XmlConnect_Model_ImageAction\n     *\/",286],["T_WHITESPACE","\n    ",291],["T_PUBLIC","public",292],["T_WHITESPACE"," ",292],["T_FUNCTION","function",292],["T_WHITESPACE"," ",292],["T_STRING","deleteAction",292],"(",["T_VARIABLE","$imageId",292],")",["T_WHITESPACE","\n    ",292],"{",["T_WHITESPACE","\n        ",293],["T_VARIABLE","$this",294],["T_OBJECT_OPERATOR","->",294],["T_STRING","_getApplicationModel",294],"(",")",["T_OBJECT_OPERATOR","->",294],["T_STRING","getConfigModel",294],"(",")",["T_OBJECT_OPERATOR","->",294],["T_STRING","deleteConfig",294],"(",["T_VARIABLE","$this",294],["T_OBJECT_OPERATOR","->",294],["T_STRING","_getApplicationModel",294],"(",")",["T_OBJECT_OPERATOR","->",294],["T_STRING","getId",294],"(",")",",",["T_WHITESPACE","\n            ",294],["T_STRING","self",295],["T_DOUBLE_COLON","::",295],["T_STRING","IMAGE_ACTION_CATEGORY_DEFAULT",295],",",["T_WHITESPACE"," ",295],["T_VARIABLE","$this",295],["T_OBJECT_OPERATOR","->",295],["T_STRING","_createImageActionConfigPath",295],"(",["T_VARIABLE","$imageId",295],")",")",";",["T_WHITESPACE","\n        ",295],["T_RETURN","return",296],["T_WHITESPACE"," ",296],["T_VARIABLE","$this",296],";",["T_WHITESPACE","\n    ",296],"}",["T_WHITESPACE","\n\n    ",297],["T_DOC_COMMENT","\/**\n     * Save images new order\n     *\n     * @param array $imagesOrderData\n     * @param string $type\n     * @return Mage_XmlConnect_Model_ImageAction\n     *\/",299],["T_WHITESPACE","\n    ",305],["T_PUBLIC","public",306],["T_WHITESPACE"," ",306],["T_FUNCTION","function",306],["T_WHITESPACE"," ",306],["T_STRING","saveImageOrder",306],"(",["T_VARIABLE","$imagesOrderData",306],",",["T_WHITESPACE"," ",306],["T_VARIABLE","$type",306],")",["T_WHITESPACE","\n    ",306],"{",["T_WHITESPACE","\n        ",307],["T_IF","if",308],["T_WHITESPACE"," ",308],"(",["T_EMPTY","empty",308],"(",["T_VARIABLE","$imagesOrderData",308],")",")",["T_WHITESPACE"," ",308],"{",["T_WHITESPACE","\n            ",308],["T_RETURN","return",309],["T_WHITESPACE"," ",309],["T_VARIABLE","$this",309],";",["T_WHITESPACE","\n        ",309],"}",["T_WHITESPACE","\n        ",310],["T_DOC_COMMENT","\/** @var $imagesModel Mage_XmlConnect_Model_Images *\/",311],["T_WHITESPACE","\n        ",311],["T_VARIABLE","$imagesModel",312],["T_WHITESPACE"," ",312],"=",["T_WHITESPACE"," ",312],["T_STRING","Mage",312],["T_DOUBLE_COLON","::",312],["T_STRING","getModel",312],"(",["T_CONSTANT_ENCAPSED_STRING","'xmlconnect\/images'",312],")",";",["T_WHITESPACE","\n        ",312],["T_FOREACH","foreach",313],["T_WHITESPACE"," ",313],"(",["T_VARIABLE","$imagesOrderData",313],["T_WHITESPACE"," ",313],["T_AS","as",313],["T_WHITESPACE"," ",313],["T_VARIABLE","$imageId",313],["T_WHITESPACE"," ",313],["T_DOUBLE_ARROW","=>",313],["T_WHITESPACE"," ",313],["T_VARIABLE","$imageOrder",313],")",["T_WHITESPACE"," ",313],"{",["T_WHITESPACE","\n            ",313],["T_VARIABLE","$imagesModel",314],["T_OBJECT_OPERATOR","->",314],["T_STRING","load",314],"(",["T_VARIABLE","$imageId",314],")",";",["T_WHITESPACE","\n            ",314],["T_IF","if",315],["T_WHITESPACE"," ",315],"(",["T_VARIABLE","$imagesModel",315],["T_OBJECT_OPERATOR","->",315],["T_STRING","getImageId",315],"(",")",")",["T_WHITESPACE"," ",315],"{",["T_WHITESPACE","\n                ",315],["T_VARIABLE","$imagesModel",316],["T_OBJECT_OPERATOR","->",316],["T_STRING","setOrder",316],"(",["T_VARIABLE","$imageOrder",316],")",["T_OBJECT_OPERATOR","->",316],["T_STRING","save",316],"(",")",";",["T_WHITESPACE","\n            ",316],"}",["T_WHITESPACE","\n        ",317],"}",["T_WHITESPACE","\n        ",318],["T_RETURN","return",319],["T_WHITESPACE"," ",319],["T_VARIABLE","$this",319],";",["T_WHITESPACE","\n    ",319],"}",["T_WHITESPACE","\n",320],"}",["T_WHITESPACE","\n",321]]
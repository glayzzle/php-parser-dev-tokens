[["T_OPEN_TAG","<?php\n",1],["T_DOC_COMMENT","\/**\n * Magento\n *\n * NOTICE OF LICENSE\n *\n * This source file is subject to the Open Software License (OSL 3.0)\n * that is bundled with this package in the file LICENSE.txt.\n * It is also available through the world-wide-web at this URL:\n * http:\/\/opensource.org\/licenses\/osl-3.0.php\n * If you did not receive a copy of the license and are unable to\n * obtain it through the world-wide-web, please send an email\n * to license@magento.com so we can send you a copy immediately.\n *\n * DISCLAIMER\n *\n * Do not edit or add to this file if you wish to upgrade Magento to newer\n * versions in the future. If you wish to customize Magento for your\n * needs please refer to http:\/\/www.magento.com for more information.\n *\n * @category    Mage\n * @package     Mage_XmlConnect\n * @copyright  Copyright (c) 2006-2016 X.commerce, Inc. and affiliates (http:\/\/www.magento.com)\n * @license    http:\/\/opensource.org\/licenses\/osl-3.0.php  Open Software License (OSL 3.0)\n *\/",2],["T_WHITESPACE","\n\n",25],["T_DOC_COMMENT","\/**\n * Product data xml renderer\n *\n * @category    Mage\n * @package     Mage_XmlConnect\n * @author      Magento Core Team <core@magentocommerce.com>\n *\/",27],["T_WHITESPACE","\n",33],["T_CLASS","class",34],["T_WHITESPACE"," ",34],["T_STRING","Mage_XmlConnect_Block_Catalog_Product",34],["T_WHITESPACE"," ",34],["T_EXTENDS","extends",34],["T_WHITESPACE"," ",34],["T_STRING","Mage_XmlConnect_Block_Catalog",34],["T_WHITESPACE","\n",34],"{",["T_WHITESPACE","\n    ",35],["T_DOC_COMMENT","\/**\n     * Retrieve product attributes as xml object\n     *\n     * @param Mage_Catalog_Model_Product $product\n     * @param string $itemNodeName\n     * @return Mage_XmlConnect_Model_Simplexml_Element\n     *\/",36],["T_WHITESPACE","\n    ",42],["T_PUBLIC","public",43],["T_WHITESPACE"," ",43],["T_FUNCTION","function",43],["T_WHITESPACE"," ",43],["T_STRING","productToXmlObject",43],"(",["T_STRING","Mage_Catalog_Model_Product",43],["T_WHITESPACE"," ",43],["T_VARIABLE","$product",43],",",["T_WHITESPACE"," ",43],["T_VARIABLE","$itemNodeName",43],["T_WHITESPACE"," ",43],"=",["T_WHITESPACE"," ",43],["T_CONSTANT_ENCAPSED_STRING","'item'",43],")",["T_WHITESPACE","\n    ",43],"{",["T_WHITESPACE","\n        ",44],["T_DOC_COMMENT","\/** @var $item Mage_XmlConnect_Model_Simplexml_Element *\/",45],["T_WHITESPACE","\n        ",45],["T_VARIABLE","$item",46],["T_WHITESPACE"," ",46],"=",["T_WHITESPACE"," ",46],["T_STRING","Mage",46],["T_DOUBLE_COLON","::",46],["T_STRING","getModel",46],"(",["T_CONSTANT_ENCAPSED_STRING","'xmlconnect\/simplexml_element'",46],",",["T_WHITESPACE"," ",46],["T_CONSTANT_ENCAPSED_STRING","'<'",46],["T_WHITESPACE"," ",46],".",["T_WHITESPACE"," ",46],["T_VARIABLE","$itemNodeName",46],["T_WHITESPACE"," ",46],".",["T_WHITESPACE"," ",46],["T_CONSTANT_ENCAPSED_STRING","'><\/'",46],["T_WHITESPACE"," ",46],".",["T_WHITESPACE"," ",46],["T_VARIABLE","$itemNodeName",46],["T_WHITESPACE"," ",46],".",["T_WHITESPACE"," ",46],["T_CONSTANT_ENCAPSED_STRING","'>'",46],")",";",["T_WHITESPACE","\n        ",46],["T_IF","if",47],["T_WHITESPACE"," ",47],"(",["T_VARIABLE","$product",47],["T_WHITESPACE"," ",47],["T_BOOLEAN_AND","&&",47],["T_WHITESPACE"," ",47],["T_VARIABLE","$product",47],["T_OBJECT_OPERATOR","->",47],["T_STRING","getId",47],"(",")",")",["T_WHITESPACE"," ",47],"{",["T_WHITESPACE","\n            ",47],["T_VARIABLE","$item",48],["T_OBJECT_OPERATOR","->",48],["T_STRING","addChild",48],"(",["T_CONSTANT_ENCAPSED_STRING","'entity_id'",48],",",["T_WHITESPACE"," ",48],["T_VARIABLE","$product",48],["T_OBJECT_OPERATOR","->",48],["T_STRING","getId",48],"(",")",")",";",["T_WHITESPACE","\n            ",48],["T_VARIABLE","$item",49],["T_OBJECT_OPERATOR","->",49],["T_STRING","addChild",49],"(",["T_CONSTANT_ENCAPSED_STRING","'name'",49],",",["T_WHITESPACE"," ",49],["T_VARIABLE","$item",49],["T_OBJECT_OPERATOR","->",49],["T_STRING","escapeXml",49],"(",["T_VARIABLE","$product",49],["T_OBJECT_OPERATOR","->",49],["T_STRING","getName",49],"(",")",")",")",";",["T_WHITESPACE","\n            ",49],["T_VARIABLE","$item",50],["T_OBJECT_OPERATOR","->",50],["T_STRING","addChild",50],"(",["T_CONSTANT_ENCAPSED_STRING","'entity_type'",50],",",["T_WHITESPACE"," ",50],["T_VARIABLE","$product",50],["T_OBJECT_OPERATOR","->",50],["T_STRING","getTypeId",50],"(",")",")",";",["T_WHITESPACE","\n            ",50],["T_VARIABLE","$item",51],["T_OBJECT_OPERATOR","->",51],["T_STRING","addChild",51],"(",["T_CONSTANT_ENCAPSED_STRING","'short_description'",51],",",["T_WHITESPACE"," ",51],["T_VARIABLE","$item",51],["T_OBJECT_OPERATOR","->",51],["T_STRING","escapeXml",51],"(",["T_VARIABLE","$product",51],["T_OBJECT_OPERATOR","->",51],["T_STRING","getShortDescription",51],"(",")",")",")",";",["T_WHITESPACE","\n            ",51],["T_VARIABLE","$description",52],["T_WHITESPACE"," ",52],"=",["T_WHITESPACE"," ",52],["T_STRING","Mage",52],["T_DOUBLE_COLON","::",52],["T_STRING","helper",52],"(",["T_CONSTANT_ENCAPSED_STRING","'xmlconnect'",52],")",["T_OBJECT_OPERATOR","->",52],["T_STRING","htmlize",52],"(",["T_VARIABLE","$item",52],["T_OBJECT_OPERATOR","->",52],["T_STRING","xmlentities",52],"(",["T_VARIABLE","$product",52],["T_OBJECT_OPERATOR","->",52],["T_STRING","getDescription",52],"(",")",")",")",";",["T_WHITESPACE","\n            ",52],["T_VARIABLE","$item",53],["T_OBJECT_OPERATOR","->",53],["T_STRING","addChild",53],"(",["T_CONSTANT_ENCAPSED_STRING","'description'",53],",",["T_WHITESPACE"," ",53],["T_VARIABLE","$description",53],")",";",["T_WHITESPACE","\n            ",53],["T_VARIABLE","$item",54],["T_OBJECT_OPERATOR","->",54],["T_STRING","addChild",54],"(",["T_CONSTANT_ENCAPSED_STRING","'link'",54],",",["T_WHITESPACE"," ",54],["T_VARIABLE","$product",54],["T_OBJECT_OPERATOR","->",54],["T_STRING","getProductUrl",54],"(",")",")",";",["T_WHITESPACE","\n            ",54],["T_DOC_COMMENT","\/** @var $imageLimitsModel Mage_XmlConnect_Model_Images *\/",55],["T_WHITESPACE","\n            ",55],["T_VARIABLE","$imageLimitsModel",56],["T_WHITESPACE"," ",56],"=",["T_WHITESPACE"," ",56],["T_STRING","Mage",56],["T_DOUBLE_COLON","::",56],["T_STRING","getModel",56],"(",["T_CONSTANT_ENCAPSED_STRING","'xmlconnect\/images'",56],")",";",["T_WHITESPACE","\n\n            ",56],["T_IF","if",58],["T_WHITESPACE"," ",58],"(",["T_VARIABLE","$itemNodeName",58],["T_WHITESPACE"," ",58],["T_IS_EQUAL","==",58],["T_WHITESPACE"," ",58],["T_CONSTANT_ENCAPSED_STRING","'item'",58],")",["T_WHITESPACE"," ",58],"{",["T_WHITESPACE","\n                ",58],["T_VARIABLE","$imageToResize",59],["T_WHITESPACE"," ",59],"=",["T_WHITESPACE"," ",59],["T_VARIABLE","$imageLimitsModel",59],["T_OBJECT_OPERATOR","->",59],["T_STRING","getImageLimitParam",59],"(",["T_CONSTANT_ENCAPSED_STRING","'content\/product_small'",59],")",";",["T_WHITESPACE","\n                ",59],["T_VARIABLE","$propertyToResizeName",60],["T_WHITESPACE"," ",60],"=",["T_WHITESPACE"," ",60],["T_CONSTANT_ENCAPSED_STRING","'small_image'",60],";",["T_WHITESPACE","\n            ",60],"}",["T_WHITESPACE"," ",61],["T_ELSE","else",61],["T_WHITESPACE"," ",61],"{",["T_WHITESPACE","\n                ",61],["T_VARIABLE","$imageToResize",62],["T_WHITESPACE"," ",62],"=",["T_WHITESPACE"," ",62],["T_VARIABLE","$imageLimitsModel",62],["T_OBJECT_OPERATOR","->",62],["T_STRING","getImageLimitParam",62],"(",["T_CONSTANT_ENCAPSED_STRING","'content\/product_big'",62],")",";",["T_WHITESPACE","\n                ",62],["T_VARIABLE","$propertyToResizeName",63],["T_WHITESPACE"," ",63],"=",["T_WHITESPACE"," ",63],["T_CONSTANT_ENCAPSED_STRING","'image'",63],";",["T_WHITESPACE","\n            ",63],"}",["T_WHITESPACE","\n\n            ",64],["T_VARIABLE","$icon",66],["T_WHITESPACE"," ",66],"=",["T_WHITESPACE"," ",66],["T_CLONE","clone",66],["T_WHITESPACE"," ",66],["T_STRING","Mage",66],["T_DOUBLE_COLON","::",66],["T_STRING","helper",66],"(",["T_CONSTANT_ENCAPSED_STRING","'xmlconnect\/catalog_product_image'",66],")",["T_OBJECT_OPERATOR","->",66],["T_STRING","init",66],"(",["T_VARIABLE","$product",66],",",["T_WHITESPACE"," ",66],["T_VARIABLE","$propertyToResizeName",66],")",["T_WHITESPACE","\n                ",66],["T_OBJECT_OPERATOR","->",67],["T_STRING","resize",67],"(",["T_VARIABLE","$imageToResize",67],")",";",["T_WHITESPACE","\n\n            ",67],["T_VARIABLE","$iconXml",69],["T_WHITESPACE"," ",69],"=",["T_WHITESPACE"," ",69],["T_VARIABLE","$item",69],["T_OBJECT_OPERATOR","->",69],["T_STRING","addChild",69],"(",["T_CONSTANT_ENCAPSED_STRING","'icon'",69],",",["T_WHITESPACE"," ",69],["T_VARIABLE","$icon",69],")",";",["T_WHITESPACE","\n            ",69],["T_VARIABLE","$iconXml",70],["T_OBJECT_OPERATOR","->",70],["T_STRING","addAttribute",70],"(",["T_CONSTANT_ENCAPSED_STRING","'modification_time'",70],",",["T_WHITESPACE"," ",70],["T_STRING","filemtime",70],"(",["T_VARIABLE","$icon",70],["T_OBJECT_OPERATOR","->",70],["T_STRING","getNewFile",70],"(",")",")",")",";",["T_WHITESPACE","\n\n            ",70],["T_VARIABLE","$item",72],["T_OBJECT_OPERATOR","->",72],["T_STRING","addChild",72],"(",["T_CONSTANT_ENCAPSED_STRING","'in_stock'",72],",",["T_WHITESPACE"," ",72],["T_INT_CAST","(int)",72],["T_VARIABLE","$product",72],["T_OBJECT_OPERATOR","->",72],["T_STRING","getStockItem",72],"(",")",["T_OBJECT_OPERATOR","->",72],["T_STRING","getIsInStock",72],"(",")",")",";",["T_WHITESPACE","\n            ",72],["T_VARIABLE","$item",73],["T_OBJECT_OPERATOR","->",73],["T_STRING","addChild",73],"(",["T_CONSTANT_ENCAPSED_STRING","'is_salable'",73],",",["T_WHITESPACE"," ",73],["T_INT_CAST","(int)",73],["T_VARIABLE","$product",73],["T_OBJECT_OPERATOR","->",73],["T_STRING","isSalable",73],"(",")",")",";",["T_WHITESPACE","\n            ",73],["T_DOC_COMMENT","\/**\n             * By default all products has gallery (because of collection not load gallery attribute)\n             *\/",74],["T_WHITESPACE","\n            ",76],["T_VARIABLE","$hasGallery",77],["T_WHITESPACE"," ",77],"=",["T_WHITESPACE"," ",77],["T_LNUMBER","1",77],";",["T_WHITESPACE","\n            ",77],["T_IF","if",78],["T_WHITESPACE"," ",78],"(",["T_VARIABLE","$product",78],["T_OBJECT_OPERATOR","->",78],["T_STRING","getMediaGalleryImages",78],"(",")",")",["T_WHITESPACE"," ",78],"{",["T_WHITESPACE","\n                ",78],["T_VARIABLE","$hasGallery",79],["T_WHITESPACE"," ",79],"=",["T_WHITESPACE"," ",79],["T_STRING","sizeof",79],"(",["T_VARIABLE","$product",79],["T_OBJECT_OPERATOR","->",79],["T_STRING","getMediaGalleryImages",79],"(",")",")",["T_WHITESPACE"," ",79],">",["T_WHITESPACE"," ",79],["T_LNUMBER","0",79],["T_WHITESPACE"," ",79],"?",["T_WHITESPACE"," ",79],["T_LNUMBER","1",79],["T_WHITESPACE"," ",79],":",["T_WHITESPACE"," ",79],["T_LNUMBER","0",79],";",["T_WHITESPACE","\n            ",79],"}",["T_WHITESPACE","\n            ",80],["T_VARIABLE","$item",81],["T_OBJECT_OPERATOR","->",81],["T_STRING","addChild",81],"(",["T_CONSTANT_ENCAPSED_STRING","'has_gallery'",81],",",["T_WHITESPACE"," ",81],["T_VARIABLE","$hasGallery",81],")",";",["T_WHITESPACE","\n            ",81],["T_DOC_COMMENT","\/**\n             * If product type is grouped than it has options as its grouped items\n             *\/",82],["T_WHITESPACE","\n            ",84],["T_IF","if",85],["T_WHITESPACE"," ",85],"(",["T_VARIABLE","$product",85],["T_OBJECT_OPERATOR","->",85],["T_STRING","getTypeId",85],"(",")",["T_WHITESPACE"," ",85],["T_IS_EQUAL","==",85],["T_WHITESPACE"," ",85],["T_STRING","Mage_Catalog_Model_Product_Type_Grouped",85],["T_DOUBLE_COLON","::",85],["T_STRING","TYPE_CODE",85],["T_WHITESPACE","\n                ",85],["T_BOOLEAN_OR","||",86],["T_WHITESPACE"," ",86],["T_VARIABLE","$product",86],["T_OBJECT_OPERATOR","->",86],["T_STRING","getTypeId",86],"(",")",["T_WHITESPACE"," ",86],["T_IS_EQUAL","==",86],["T_WHITESPACE"," ",86],["T_STRING","Mage_Catalog_Model_Product_Type_Configurable",86],["T_DOUBLE_COLON","::",86],["T_STRING","TYPE_CODE",86],")",["T_WHITESPACE"," ",86],"{",["T_WHITESPACE","\n                ",86],["T_VARIABLE","$product",87],["T_OBJECT_OPERATOR","->",87],["T_STRING","setHasOptions",87],"(",["T_STRING","true",87],")",";",["T_WHITESPACE","\n            ",87],"}",["T_WHITESPACE","\n            ",88],["T_VARIABLE","$item",89],["T_OBJECT_OPERATOR","->",89],["T_STRING","addChild",89],"(",["T_CONSTANT_ENCAPSED_STRING","'has_options'",89],",",["T_WHITESPACE"," ",89],["T_INT_CAST","(int)",89],["T_VARIABLE","$product",89],["T_OBJECT_OPERATOR","->",89],["T_STRING","getHasOptions",89],"(",")",")",";",["T_WHITESPACE","\n\n            ",89],["T_VARIABLE","$minSaleQty",91],["T_WHITESPACE"," ",91],"=",["T_WHITESPACE"," ",91],["T_STRING","null",91],";",["T_WHITESPACE","\n            ",91],["T_IF","if",92],["T_WHITESPACE"," ",92],"(",["T_VARIABLE","$product",92],["T_OBJECT_OPERATOR","->",92],["T_STRING","hasPreconfiguredValues",92],"(",")",")",["T_WHITESPACE"," ",92],"{",["T_WHITESPACE","\n                ",92],["T_VARIABLE","$minSaleQty",93],["T_WHITESPACE"," ",93],"=",["T_WHITESPACE"," ",93],["T_VARIABLE","$product",93],["T_OBJECT_OPERATOR","->",93],["T_STRING","getPreconfiguredValues",93],"(",")",["T_OBJECT_OPERATOR","->",93],["T_STRING","getData",93],"(",["T_CONSTANT_ENCAPSED_STRING","'qty'",93],")",";",["T_WHITESPACE","\n            ",93],"}",["T_WHITESPACE","\n            ",94],["T_VARIABLE","$minSaleQty",95],["T_WHITESPACE"," ",95],"=",["T_WHITESPACE"," ",95],["T_VARIABLE","$minSaleQty",95],["T_WHITESPACE"," ",95],"?",["T_WHITESPACE"," ",95],["T_VARIABLE","$minSaleQty",95],["T_WHITESPACE"," ",95],":",["T_WHITESPACE"," ",95],["T_VARIABLE","$this",95],["T_OBJECT_OPERATOR","->",95],["T_STRING","_getMinimalQty",95],"(",["T_VARIABLE","$product",95],")",";",["T_WHITESPACE","\n\n            ",95],["T_IF","if",97],["T_WHITESPACE"," ",97],"(",["T_VARIABLE","$minSaleQty",97],")",["T_WHITESPACE"," ",97],"{",["T_WHITESPACE","\n                ",97],["T_VARIABLE","$item",98],["T_OBJECT_OPERATOR","->",98],["T_STRING","addChild",98],"(",["T_CONSTANT_ENCAPSED_STRING","'min_sale_qty'",98],",",["T_WHITESPACE"," ",98],["T_INT_CAST","(int)",98],["T_VARIABLE","$minSaleQty",98],")",";",["T_WHITESPACE","\n            ",98],"}",["T_WHITESPACE","\n\n            ",99],["T_IF","if",101],["T_WHITESPACE"," ",101],"(","!",["T_VARIABLE","$product",101],["T_OBJECT_OPERATOR","->",101],["T_STRING","getRatingSummary",101],"(",")",")",["T_WHITESPACE"," ",101],"{",["T_WHITESPACE","\n                ",101],["T_STRING","Mage",102],["T_DOUBLE_COLON","::",102],["T_STRING","getModel",102],"(",["T_CONSTANT_ENCAPSED_STRING","'review\/review'",102],")",["T_OBJECT_OPERATOR","->",102],["T_STRING","getEntitySummary",102],"(",["T_VARIABLE","$product",102],",",["T_WHITESPACE"," ",102],["T_STRING","Mage",102],["T_DOUBLE_COLON","::",102],["T_STRING","app",102],"(",")",["T_OBJECT_OPERATOR","->",102],["T_STRING","getStore",102],"(",")",["T_OBJECT_OPERATOR","->",102],["T_STRING","getId",102],"(",")",")",";",["T_WHITESPACE","\n            ",102],"}",["T_WHITESPACE","\n\n            ",103],["T_VARIABLE","$item",105],["T_OBJECT_OPERATOR","->",105],["T_STRING","addChild",105],"(",["T_CONSTANT_ENCAPSED_STRING","'rating_summary'",105],",",["T_WHITESPACE"," ",105],["T_STRING","round",105],"(",["T_INT_CAST","(int)",105],["T_VARIABLE","$product",105],["T_OBJECT_OPERATOR","->",105],["T_STRING","getRatingSummary",105],"(",")",["T_OBJECT_OPERATOR","->",105],["T_STRING","getRatingSummary",105],"(",")",["T_WHITESPACE"," ",105],"\/",["T_WHITESPACE"," ",105],["T_LNUMBER","10",105],")",")",";",["T_WHITESPACE","\n            ",105],["T_VARIABLE","$item",106],["T_OBJECT_OPERATOR","->",106],["T_STRING","addChild",106],"(",["T_CONSTANT_ENCAPSED_STRING","'reviews_count'",106],",",["T_WHITESPACE"," ",106],["T_VARIABLE","$product",106],["T_OBJECT_OPERATOR","->",106],["T_STRING","getRatingSummary",106],"(",")",["T_OBJECT_OPERATOR","->",106],["T_STRING","getReviewsCount",106],"(",")",")",";",["T_WHITESPACE","\n\n            ",106],["T_IF","if",108],["T_WHITESPACE"," ",108],"(",["T_VARIABLE","$this",108],["T_OBJECT_OPERATOR","->",108],["T_STRING","getChild",108],"(",["T_CONSTANT_ENCAPSED_STRING","'product_price'",108],")",")",["T_WHITESPACE"," ",108],"{",["T_WHITESPACE","\n                ",108],["T_VARIABLE","$this",109],["T_OBJECT_OPERATOR","->",109],["T_STRING","getChild",109],"(",["T_CONSTANT_ENCAPSED_STRING","'product_price'",109],")",["T_OBJECT_OPERATOR","->",109],["T_STRING","setProduct",109],"(",["T_VARIABLE","$product",109],")",["T_OBJECT_OPERATOR","->",109],["T_STRING","setProductXmlObj",109],"(",["T_VARIABLE","$item",109],")",["T_OBJECT_OPERATOR","->",109],["T_STRING","collectProductPrices",109],"(",")",";",["T_WHITESPACE","\n            ",109],"}",["T_WHITESPACE","\n\n            ",110],["T_IF","if",112],["T_WHITESPACE"," ",112],"(",["T_VARIABLE","$this",112],["T_OBJECT_OPERATOR","->",112],["T_STRING","getChild",112],"(",["T_CONSTANT_ENCAPSED_STRING","'additional_info'",112],")",")",["T_WHITESPACE"," ",112],"{",["T_WHITESPACE","\n                ",112],["T_VARIABLE","$this",113],["T_OBJECT_OPERATOR","->",113],["T_STRING","getChild",113],"(",["T_CONSTANT_ENCAPSED_STRING","'additional_info'",113],")",["T_OBJECT_OPERATOR","->",113],["T_STRING","addAdditionalData",113],"(",["T_VARIABLE","$product",113],",",["T_WHITESPACE"," ",113],["T_VARIABLE","$item",113],")",";",["T_WHITESPACE","\n            ",113],"}",["T_WHITESPACE","\n        ",114],"}",["T_WHITESPACE","\n\n        ",115],["T_RETURN","return",117],["T_WHITESPACE"," ",117],["T_VARIABLE","$item",117],";",["T_WHITESPACE","\n    ",117],"}",["T_WHITESPACE","\n\n    ",118],["T_DOC_COMMENT","\/**\n     * Get MinSaleQty for product\n     *\n     * @param Mage_Catalog_Model_Product $product\n     * @return int|null\n     *\/",120],["T_WHITESPACE","\n    ",125],["T_PROTECTED","protected",126],["T_WHITESPACE"," ",126],["T_FUNCTION","function",126],["T_WHITESPACE"," ",126],["T_STRING","_getMinimalQty",126],"(",["T_VARIABLE","$product",126],")",["T_WHITESPACE","\n    ",126],"{",["T_WHITESPACE","\n        ",127],["T_IF","if",128],["T_WHITESPACE"," ",128],"(",["T_VARIABLE","$stockItem",128],["T_WHITESPACE"," ",128],"=",["T_WHITESPACE"," ",128],["T_VARIABLE","$product",128],["T_OBJECT_OPERATOR","->",128],["T_STRING","getStockItem",128],"(",")",")",["T_WHITESPACE"," ",128],"{",["T_WHITESPACE","\n            ",128],["T_IF","if",129],["T_WHITESPACE"," ",129],"(",["T_VARIABLE","$stockItem",129],["T_OBJECT_OPERATOR","->",129],["T_STRING","getMinSaleQty",129],"(",")",["T_WHITESPACE"," ",129],["T_BOOLEAN_AND","&&",129],["T_WHITESPACE"," ",129],["T_VARIABLE","$stockItem",129],["T_OBJECT_OPERATOR","->",129],["T_STRING","getMinSaleQty",129],"(",")",["T_WHITESPACE"," ",129],">",["T_WHITESPACE"," ",129],["T_LNUMBER","0",129],")",["T_WHITESPACE"," ",129],"{",["T_WHITESPACE","\n                ",129],["T_RETURN","return",130],["T_WHITESPACE"," ",130],"(",["T_VARIABLE","$stockItem",130],["T_OBJECT_OPERATOR","->",130],["T_STRING","getMinSaleQty",130],"(",")",["T_WHITESPACE"," ",130],"*",["T_WHITESPACE"," ",130],["T_LNUMBER","1",130],")",";",["T_WHITESPACE","\n            ",130],"}",["T_WHITESPACE","\n        ",131],"}",["T_WHITESPACE","\n        ",132],["T_RETURN","return",133],["T_WHITESPACE"," ",133],["T_STRING","null",133],";",["T_WHITESPACE","\n    ",133],"}",["T_WHITESPACE","\n\n    ",134],["T_DOC_COMMENT","\/**\n     * Render product info xml\n     *\n     * @throws Mage_Core_Exception\n     * @return string\n     *\/",136],["T_WHITESPACE","\n    ",141],["T_PROTECTED","protected",142],["T_WHITESPACE"," ",142],["T_FUNCTION","function",142],["T_WHITESPACE"," ",142],["T_STRING","_toHtml",142],"(",")",["T_WHITESPACE","\n    ",142],"{",["T_WHITESPACE","\n        ",143],["T_DOC_COMMENT","\/** @var $product Mage_Catalog_Model_Product *\/",144],["T_WHITESPACE","\n        ",144],["T_IF","if",145],["T_WHITESPACE"," ",145],"(",["T_VARIABLE","$this",145],["T_OBJECT_OPERATOR","->",145],["T_STRING","getProduct",145],"(",")",")",["T_WHITESPACE"," ",145],"{",["T_WHITESPACE","\n            ",145],["T_VARIABLE","$product",146],["T_WHITESPACE"," ",146],"=",["T_WHITESPACE"," ",146],["T_VARIABLE","$this",146],["T_OBJECT_OPERATOR","->",146],["T_STRING","getProduct",146],"(",")",";",["T_WHITESPACE","\n        ",146],"}",["T_WHITESPACE"," ",147],["T_ELSE","else",147],["T_WHITESPACE"," ",147],"{",["T_WHITESPACE","\n            ",147],["T_VARIABLE","$product",148],["T_WHITESPACE"," ",148],"=",["T_WHITESPACE"," ",148],["T_STRING","Mage",148],["T_DOUBLE_COLON","::",148],["T_STRING","getModel",148],"(",["T_CONSTANT_ENCAPSED_STRING","'catalog\/product'",148],")",["T_OBJECT_OPERATOR","->",148],["T_STRING","setStoreId",148],"(",["T_STRING","Mage",148],["T_DOUBLE_COLON","::",148],["T_STRING","app",148],"(",")",["T_OBJECT_OPERATOR","->",148],["T_STRING","getStore",148],"(",")",["T_OBJECT_OPERATOR","->",148],["T_STRING","getId",148],"(",")",")",["T_WHITESPACE","\n                ",148],["T_OBJECT_OPERATOR","->",149],["T_STRING","load",149],"(",["T_VARIABLE","$this",149],["T_OBJECT_OPERATOR","->",149],["T_STRING","getRequest",149],"(",")",["T_OBJECT_OPERATOR","->",149],["T_STRING","getParam",149],"(",["T_CONSTANT_ENCAPSED_STRING","'id'",149],",",["T_WHITESPACE"," ",149],["T_LNUMBER","0",149],")",")",";",["T_WHITESPACE","\n            ",149],["T_IF","if",150],["T_WHITESPACE"," ",150],"(","!",["T_VARIABLE","$product",150],")",["T_WHITESPACE"," ",150],"{",["T_WHITESPACE","\n                ",150],["T_STRING","Mage",151],["T_DOUBLE_COLON","::",151],["T_STRING","throwException",151],"(",["T_VARIABLE","$this",151],["T_OBJECT_OPERATOR","->",151],["T_STRING","__",151],"(",["T_CONSTANT_ENCAPSED_STRING","'Selected product is unavailable.'",151],")",")",";",["T_WHITESPACE","\n            ",151],"}",["T_WHITESPACE"," ",152],["T_ELSE","else",152],["T_WHITESPACE"," ",152],"{",["T_WHITESPACE","\n                ",152],["T_VARIABLE","$this",153],["T_OBJECT_OPERATOR","->",153],["T_STRING","setProduct",153],"(",["T_VARIABLE","$product",153],")",";",["T_WHITESPACE","\n            ",153],"}",["T_WHITESPACE","\n        ",154],"}",["T_WHITESPACE","\n        ",155],["T_DOC_COMMENT","\/** @var $productXmlObj Mage_XmlConnect_Model_Simplexml_Element *\/",156],["T_WHITESPACE","\n        ",156],["T_VARIABLE","$productXmlObj",157],["T_WHITESPACE"," ",157],"=",["T_WHITESPACE"," ",157],["T_VARIABLE","$this",157],["T_OBJECT_OPERATOR","->",157],["T_STRING","productToXmlObject",157],"(",["T_VARIABLE","$product",157],",",["T_WHITESPACE"," ",157],["T_CONSTANT_ENCAPSED_STRING","'product'",157],")",";",["T_WHITESPACE","\n\n        ",157],["T_DOC_COMMENT","\/** @var $relatedProductsBlock Mage_XmlConnect_Block_Catalog_Product_Related *\/",159],["T_WHITESPACE","\n        ",159],["T_VARIABLE","$relatedProductsBlock",160],["T_WHITESPACE"," ",160],"=",["T_WHITESPACE"," ",160],["T_VARIABLE","$this",160],["T_OBJECT_OPERATOR","->",160],["T_STRING","getChild",160],"(",["T_CONSTANT_ENCAPSED_STRING","'related_products'",160],")",";",["T_WHITESPACE","\n        ",160],["T_IF","if",161],["T_WHITESPACE"," ",161],"(",["T_VARIABLE","$relatedProductsBlock",161],")",["T_WHITESPACE"," ",161],"{",["T_WHITESPACE","\n            ",161],["T_VARIABLE","$relatedXmlObj",162],["T_WHITESPACE"," ",162],"=",["T_WHITESPACE"," ",162],["T_VARIABLE","$relatedProductsBlock",162],["T_OBJECT_OPERATOR","->",162],["T_STRING","getRelatedProductsXmlObj",162],"(",")",";",["T_WHITESPACE","\n            ",162],["T_VARIABLE","$productXmlObj",163],["T_OBJECT_OPERATOR","->",163],["T_STRING","appendChild",163],"(",["T_VARIABLE","$relatedXmlObj",163],")",";",["T_WHITESPACE","\n        ",163],"}",["T_WHITESPACE","\n\n        ",164],["T_VARIABLE","$productOptions",166],["T_WHITESPACE"," ",166],"=",["T_WHITESPACE"," ",166],["T_VARIABLE","$this",166],["T_OBJECT_OPERATOR","->",166],["T_STRING","getChild",166],"(",["T_CONSTANT_ENCAPSED_STRING","'xmlconnect.catalog.product.options'",166],")",["T_OBJECT_OPERATOR","->",166],["T_STRING","getProductOptionsXmlObject",166],"(",["T_VARIABLE","$product",166],")",";",["T_WHITESPACE","\n        ",166],["T_IF","if",167],["T_WHITESPACE"," ",167],"(",["T_VARIABLE","$productOptions",167],["T_WHITESPACE"," ",167],["T_INSTANCEOF","instanceof",167],["T_WHITESPACE"," ",167],["T_STRING","Mage_XmlConnect_Model_Simplexml_Element",167],")",["T_WHITESPACE"," ",167],"{",["T_WHITESPACE","\n            ",167],["T_VARIABLE","$productXmlObj",168],["T_OBJECT_OPERATOR","->",168],["T_STRING","appendChild",168],"(",["T_VARIABLE","$productOptions",168],")",";",["T_WHITESPACE","\n        ",168],"}",["T_WHITESPACE","\n\n        ",169],["T_RETURN","return",171],["T_WHITESPACE"," ",171],["T_VARIABLE","$productXmlObj",171],["T_OBJECT_OPERATOR","->",171],["T_STRING","asNiceXml",171],"(",")",";",["T_WHITESPACE","\n    ",171],"}",["T_WHITESPACE","\n",172],"}",["T_WHITESPACE","\n",173]]
[["T_OPEN_TAG","<?php\n",1],["T_DOC_COMMENT","\/**\n * Magento\n *\n * NOTICE OF LICENSE\n *\n * This source file is subject to the Open Software License (OSL 3.0)\n * that is bundled with this package in the file LICENSE.txt.\n * It is also available through the world-wide-web at this URL:\n * http:\/\/opensource.org\/licenses\/osl-3.0.php\n * If you did not receive a copy of the license and are unable to\n * obtain it through the world-wide-web, please send an email\n * to license@magento.com so we can send you a copy immediately.\n *\n * DISCLAIMER\n *\n * Do not edit or add to this file if you wish to upgrade Magento to newer\n * versions in the future. If you wish to customize Magento for your\n * needs please refer to http:\/\/www.magento.com for more information.\n *\n * @category    Mage\n * @package     Mage_XmlConnect\n * @copyright  Copyright (c) 2006-2016 X.commerce, Inc. and affiliates (http:\/\/www.magento.com)\n * @license    http:\/\/opensource.org\/licenses\/osl-3.0.php  Open Software License (OSL 3.0)\n *\/",2],["T_WHITESPACE","\n\n",25],["T_DOC_COMMENT","\/**\n * XmlConnect Adminhtml mobile controller\n *\n * @category    Mage\n * @package     Mage_XmlConnect\n * @author      Magento Core Team <core@magentocommerce.com>\n *\/",27],["T_WHITESPACE","\n",33],["T_CLASS","class",34],["T_WHITESPACE"," ",34],["T_STRING","Mage_XmlConnect_Adminhtml_MobileController",34],["T_WHITESPACE"," ",34],["T_EXTENDS","extends",34],["T_WHITESPACE"," ",34],["T_STRING","Mage_Adminhtml_Controller_Action",34],["T_WHITESPACE","\n",34],"{",["T_WHITESPACE","\n    ",35],["T_DOC_COMMENT","\/**\n     * Initialize application\n     *\n     * @param string $paramName\n     * @param bool|string $deviceType\n     * @return Mage_XmlConnect_Model_Application\n     *\/",36],["T_WHITESPACE","\n    ",42],["T_PROTECTED","protected",43],["T_WHITESPACE"," ",43],["T_FUNCTION","function",43],["T_WHITESPACE"," ",43],["T_STRING","_initApp",43],"(",["T_VARIABLE","$paramName",43],["T_WHITESPACE"," ",43],"=",["T_WHITESPACE"," ",43],["T_CONSTANT_ENCAPSED_STRING","'application_id'",43],",",["T_WHITESPACE"," ",43],["T_VARIABLE","$deviceType",43],["T_WHITESPACE"," ",43],"=",["T_WHITESPACE"," ",43],["T_STRING","false",43],")",["T_WHITESPACE","\n    ",43],"{",["T_WHITESPACE","\n        ",44],["T_VARIABLE","$id",45],["T_WHITESPACE"," ",45],"=",["T_WHITESPACE"," ",45],["T_INT_CAST","(int)",45],["T_WHITESPACE"," ",45],["T_VARIABLE","$this",45],["T_OBJECT_OPERATOR","->",45],["T_STRING","getRequest",45],"(",")",["T_OBJECT_OPERATOR","->",45],["T_STRING","getParam",45],"(",["T_VARIABLE","$paramName",45],")",";",["T_WHITESPACE","\n        ",45],["T_VARIABLE","$app",46],["T_WHITESPACE"," ",46],"=",["T_WHITESPACE"," ",46],["T_STRING","Mage",46],["T_DOUBLE_COLON","::",46],["T_STRING","getModel",46],"(",["T_CONSTANT_ENCAPSED_STRING","'xmlconnect\/application'",46],")",";",["T_WHITESPACE","\n        ",46],["T_IF","if",47],["T_WHITESPACE"," ",47],"(",["T_VARIABLE","$id",47],")",["T_WHITESPACE"," ",47],"{",["T_WHITESPACE","\n            ",47],["T_VARIABLE","$app",48],["T_OBJECT_OPERATOR","->",48],["T_STRING","load",48],"(",["T_VARIABLE","$id",48],")",";",["T_WHITESPACE","\n            ",48],["T_IF","if",49],["T_WHITESPACE"," ",49],"(",["T_VARIABLE","$app",49],["T_OBJECT_OPERATOR","->",49],["T_STRING","getId",49],"(",")",")",["T_WHITESPACE"," ",49],"{",["T_WHITESPACE","\n                ",49],["T_VARIABLE","$app",50],["T_OBJECT_OPERATOR","->",50],["T_STRING","loadConfiguration",50],"(",")",";",["T_WHITESPACE","\n            ",50],"}",["T_WHITESPACE","\n        ",51],"}",["T_WHITESPACE"," ",52],["T_ELSE","else",52],["T_WHITESPACE"," ",52],"{",["T_WHITESPACE","\n            ",52],["T_VARIABLE","$app",53],["T_OBJECT_OPERATOR","->",53],["T_STRING","setType",53],"(",["T_VARIABLE","$deviceType",53],")",";",["T_WHITESPACE","\n            ",53],["T_STRING","Mage",54],["T_DOUBLE_COLON","::",54],["T_STRING","register",54],"(",["T_CONSTANT_ENCAPSED_STRING","'current_app'",54],",",["T_WHITESPACE"," ",54],["T_VARIABLE","$app",54],")",";",["T_WHITESPACE","\n            ",54],["T_VARIABLE","$app",55],["T_OBJECT_OPERATOR","->",55],["T_STRING","loadDefaultConfiguration",55],"(",")",";",["T_WHITESPACE","\n            ",55],["T_STRING","Mage",56],["T_DOUBLE_COLON","::",56],["T_STRING","unregister",56],"(",["T_CONSTANT_ENCAPSED_STRING","'current_app'",56],")",";",["T_WHITESPACE","\n        ",56],"}",["T_WHITESPACE","\n        ",57],["T_STRING","Mage",58],["T_DOUBLE_COLON","::",58],["T_STRING","register",58],"(",["T_CONSTANT_ENCAPSED_STRING","'current_app'",58],",",["T_WHITESPACE"," ",58],["T_VARIABLE","$app",58],")",";",["T_WHITESPACE","\n        ",58],["T_RETURN","return",59],["T_WHITESPACE"," ",59],["T_VARIABLE","$app",59],";",["T_WHITESPACE","\n    ",59],"}",["T_WHITESPACE","\n\n    ",60],["T_DOC_COMMENT","\/**\n     * Restore data from session $_POST and $_FILES (processed)\n     *\n     * @todo remove this method from controller\n     * @param array $data\n     * @return array|null\n     *\/",62],["T_WHITESPACE","\n    ",68],["T_PROTECTED","protected",69],["T_WHITESPACE"," ",69],["T_FUNCTION","function",69],["T_WHITESPACE"," ",69],["T_STRING","_restoreSessionFilesFormData",69],"(",["T_VARIABLE","$data",69],")",["T_WHITESPACE","\n    ",69],"{",["T_WHITESPACE","\n        ",70],["T_VARIABLE","$filesData",71],["T_WHITESPACE"," ",71],"=",["T_WHITESPACE"," ",71],["T_STRING","Mage",71],["T_DOUBLE_COLON","::",71],["T_STRING","getSingleton",71],"(",["T_CONSTANT_ENCAPSED_STRING","'adminhtml\/session'",71],")",["T_OBJECT_OPERATOR","->",71],["T_STRING","getUploadedFilesFormData",71],"(",["T_STRING","true",71],")",";",["T_WHITESPACE","\n        ",71],["T_IF","if",72],["T_WHITESPACE"," ",72],"(","!",["T_EMPTY","empty",72],"(",["T_VARIABLE","$filesData",72],")",["T_WHITESPACE"," ",72],["T_BOOLEAN_AND","&&",72],["T_WHITESPACE"," ",72],["T_STRING","is_array",72],"(",["T_VARIABLE","$filesData",72],")",")",["T_WHITESPACE"," ",72],"{",["T_WHITESPACE","\n            ",72],["T_IF","if",73],["T_WHITESPACE"," ",73],"(","!",["T_STRING","is_array",73],"(",["T_VARIABLE","$data",73],")",")",["T_WHITESPACE"," ",73],"{",["T_WHITESPACE","\n                ",73],["T_VARIABLE","$data",74],["T_WHITESPACE"," ",74],"=",["T_WHITESPACE"," ",74],["T_ARRAY","array",74],"(",")",";",["T_WHITESPACE","\n            ",74],"}",["T_WHITESPACE","\n            ",75],["T_FOREACH","foreach",76],["T_WHITESPACE"," ",76],"(",["T_VARIABLE","$filesData",76],["T_WHITESPACE"," ",76],["T_AS","as",76],["T_WHITESPACE"," ",76],["T_VARIABLE","$filePath",76],["T_WHITESPACE"," ",76],["T_DOUBLE_ARROW","=>",76],["T_WHITESPACE"," ",76],["T_VARIABLE","$fileName",76],")",["T_WHITESPACE"," ",76],"{",["T_WHITESPACE","\n                ",76],["T_VARIABLE","$target",77],["T_WHITESPACE"," ",77],"=","&",["T_WHITESPACE"," ",77],["T_VARIABLE","$data",77],";",["T_WHITESPACE","\n                ",77],["T_STRING","Mage",78],["T_DOUBLE_COLON","::",78],["T_STRING","helper",78],"(",["T_CONSTANT_ENCAPSED_STRING","'xmlconnect'",78],")",["T_OBJECT_OPERATOR","->",78],["T_STRING","_injectFieldToArray",78],"(",["T_VARIABLE","$target",78],",",["T_WHITESPACE"," ",78],["T_VARIABLE","$filePath",78],",",["T_WHITESPACE"," ",78],["T_VARIABLE","$fileName",78],")",";",["T_WHITESPACE","\n            ",78],"}",["T_WHITESPACE","\n        ",79],"}",["T_WHITESPACE","\n        ",80],["T_RETURN","return",81],["T_WHITESPACE"," ",81],["T_VARIABLE","$data",81],";",["T_WHITESPACE","\n    ",81],"}",["T_WHITESPACE","\n\n    ",82],["T_DOC_COMMENT","\/**\n     * Mobile applications management\n     *\n     * @return null\n     *\/",84],["T_WHITESPACE","\n    ",88],["T_PUBLIC","public",89],["T_WHITESPACE"," ",89],["T_FUNCTION","function",89],["T_WHITESPACE"," ",89],["T_STRING","indexAction",89],"(",")",["T_WHITESPACE","\n    ",89],"{",["T_WHITESPACE","\n        ",90],["T_VARIABLE","$this",91],["T_OBJECT_OPERATOR","->",91],["T_STRING","loadLayout",91],"(",")",";",["T_WHITESPACE","\n        ",91],["T_VARIABLE","$this",92],["T_OBJECT_OPERATOR","->",92],["T_STRING","_setActiveMenu",92],"(",["T_CONSTANT_ENCAPSED_STRING","'xmlconnect\/mobile'",92],")",";",["T_WHITESPACE","\n        ",92],["T_VARIABLE","$this",93],["T_OBJECT_OPERATOR","->",93],["T_STRING","renderLayout",93],"(",")",";",["T_WHITESPACE","\n    ",93],"}",["T_WHITESPACE","\n\n    ",94],["T_DOC_COMMENT","\/**\n     * Create new app\n     *\n     * @return null\n     *\/",96],["T_WHITESPACE","\n    ",100],["T_PUBLIC","public",101],["T_WHITESPACE"," ",101],["T_FUNCTION","function",101],["T_WHITESPACE"," ",101],["T_STRING","newAction",101],"(",")",["T_WHITESPACE","\n    ",101],"{",["T_WHITESPACE","\n        ",102],["T_STRING","Mage",103],["T_DOUBLE_COLON","::",103],["T_STRING","getSingleton",103],"(",["T_CONSTANT_ENCAPSED_STRING","'adminhtml\/session'",103],")",["T_OBJECT_OPERATOR","->",103],["T_STRING","setData",103],"(",["T_CONSTANT_ENCAPSED_STRING","'new_application'",103],",",["T_WHITESPACE"," ",103],["T_STRING","true",103],")",";",["T_WHITESPACE","\n        ",103],["T_VARIABLE","$this",104],["T_OBJECT_OPERATOR","->",104],["T_STRING","loadLayout",104],"(",")",";",["T_WHITESPACE","\n        ",104],["T_VARIABLE","$this",105],["T_OBJECT_OPERATOR","->",105],["T_STRING","_setActiveMenu",105],"(",["T_CONSTANT_ENCAPSED_STRING","'xmlconnect\/mobile'",105],")",";",["T_WHITESPACE","\n        ",105],["T_VARIABLE","$this",106],["T_OBJECT_OPERATOR","->",106],["T_STRING","renderLayout",106],"(",")",";",["T_WHITESPACE","\n    ",106],"}",["T_WHITESPACE","\n\n    ",107],["T_DOC_COMMENT","\/**\n     * Submission Action, loads application data\n     *\n     * @return null\n     *\/",109],["T_WHITESPACE","\n    ",113],["T_PUBLIC","public",114],["T_WHITESPACE"," ",114],["T_FUNCTION","function",114],["T_WHITESPACE"," ",114],["T_STRING","submissionAction",114],"(",")",["T_WHITESPACE","\n    ",114],"{",["T_WHITESPACE","\n        ",115],["T_TRY","try",116],["T_WHITESPACE"," ",116],"{",["T_WHITESPACE","\n            ",116],["T_VARIABLE","$app",117],["T_WHITESPACE"," ",117],"=",["T_WHITESPACE"," ",117],["T_VARIABLE","$this",117],["T_OBJECT_OPERATOR","->",117],["T_STRING","_initApp",117],"(",")",";",["T_WHITESPACE","\n            ",117],["T_IF","if",118],["T_WHITESPACE"," ",118],"(","!",["T_VARIABLE","$app",118],["T_OBJECT_OPERATOR","->",118],["T_STRING","getId",118],"(",")",")",["T_WHITESPACE"," ",118],"{",["T_WHITESPACE","\n                ",118],["T_VARIABLE","$this",119],["T_OBJECT_OPERATOR","->",119],["T_STRING","_getSession",119],"(",")",["T_OBJECT_OPERATOR","->",119],["T_STRING","addError",119],"(",["T_VARIABLE","$this",119],["T_OBJECT_OPERATOR","->",119],["T_STRING","__",119],"(",["T_CONSTANT_ENCAPSED_STRING","'App does not exist.'",119],")",")",";",["T_WHITESPACE","\n                ",119],["T_VARIABLE","$this",120],["T_OBJECT_OPERATOR","->",120],["T_STRING","_redirect",120],"(",["T_CONSTANT_ENCAPSED_STRING","'*\/*\/'",120],")",";",["T_WHITESPACE","\n                ",120],["T_RETURN","return",121],";",["T_WHITESPACE","\n            ",121],"}",["T_WHITESPACE","\n            ",122],["T_VARIABLE","$app",123],["T_OBJECT_OPERATOR","->",123],["T_STRING","loadSubmit",123],"(",")",";",["T_WHITESPACE","\n            ",123],["T_IF","if",124],["T_WHITESPACE"," ",124],"(",["T_BOOL_CAST","(bool)",124],["T_WHITESPACE"," ",124],["T_STRING","Mage",124],["T_DOUBLE_COLON","::",124],["T_STRING","getSingleton",124],"(",["T_CONSTANT_ENCAPSED_STRING","'adminhtml\/session'",124],")",["T_OBJECT_OPERATOR","->",124],["T_STRING","getLoadSessionFlag",124],"(",["T_STRING","true",124],")",")",["T_WHITESPACE"," ",124],"{",["T_WHITESPACE","\n                ",124],["T_VARIABLE","$data",125],["T_WHITESPACE"," ",125],"=",["T_WHITESPACE"," ",125],["T_VARIABLE","$this",125],["T_OBJECT_OPERATOR","->",125],["T_STRING","_restoreSessionFilesFormData",125],"(",["T_WHITESPACE","\n                    ",125],["T_STRING","Mage",126],["T_DOUBLE_COLON","::",126],["T_STRING","getSingleton",126],"(",["T_CONSTANT_ENCAPSED_STRING","'adminhtml\/session'",126],")",["T_OBJECT_OPERATOR","->",126],["T_STRING","getFormSubmissionData",126],"(",["T_STRING","true",126],")",["T_WHITESPACE","\n                ",126],")",";",["T_WHITESPACE","\n                ",127],["T_IF","if",128],["T_WHITESPACE"," ",128],"(","!",["T_EMPTY","empty",128],"(",["T_VARIABLE","$data",128],")",")",["T_WHITESPACE"," ",128],"{",["T_WHITESPACE","\n                    ",128],["T_VARIABLE","$app",129],["T_OBJECT_OPERATOR","->",129],["T_STRING","setData",129],"(",["T_STRING","Mage",129],["T_DOUBLE_COLON","::",129],["T_STRING","helper",129],"(",["T_CONSTANT_ENCAPSED_STRING","'xmlconnect'",129],")",["T_OBJECT_OPERATOR","->",129],["T_STRING","arrayMergeRecursive",129],"(",["T_VARIABLE","$app",129],["T_OBJECT_OPERATOR","->",129],["T_STRING","getData",129],"(",")",",",["T_WHITESPACE"," ",129],["T_VARIABLE","$data",129],")",")",";",["T_WHITESPACE","\n                ",129],"}",["T_WHITESPACE","\n            ",130],"}",["T_WHITESPACE","\n\n            ",131],["T_VARIABLE","$this",133],["T_OBJECT_OPERATOR","->",133],["T_STRING","loadLayout",133],"(",")",";",["T_WHITESPACE","\n            ",133],["T_VARIABLE","$this",134],["T_OBJECT_OPERATOR","->",134],["T_STRING","_setActiveMenu",134],"(",["T_CONSTANT_ENCAPSED_STRING","'xmlconnect\/mobile'",134],")",";",["T_WHITESPACE","\n            ",134],["T_VARIABLE","$this",135],["T_OBJECT_OPERATOR","->",135],["T_STRING","renderLayout",135],"(",")",";",["T_WHITESPACE","\n        ",135],"}",["T_WHITESPACE"," ",136],["T_CATCH","catch",136],["T_WHITESPACE"," ",136],"(",["T_STRING","Mage_Core_Exception",136],["T_WHITESPACE"," ",136],["T_VARIABLE","$e",136],")",["T_WHITESPACE"," ",136],"{",["T_WHITESPACE","\n            ",136],["T_VARIABLE","$this",137],["T_OBJECT_OPERATOR","->",137],["T_STRING","_getSession",137],"(",")",["T_OBJECT_OPERATOR","->",137],["T_STRING","addError",137],"(",["T_VARIABLE","$e",137],["T_OBJECT_OPERATOR","->",137],["T_STRING","getMessage",137],"(",")",")",";",["T_WHITESPACE","\n            ",137],["T_IF","if",138],["T_WHITESPACE"," ",138],"(",["T_ISSET","isset",138],"(",["T_VARIABLE","$app",138],")",")",["T_WHITESPACE"," ",138],"{",["T_WHITESPACE","\n                ",138],["T_VARIABLE","$this",139],["T_OBJECT_OPERATOR","->",139],["T_STRING","_redirect",139],"(",["T_CONSTANT_ENCAPSED_STRING","'*\/*\/edit'",139],",",["T_WHITESPACE"," ",139],["T_ARRAY","array",139],"(",["T_CONSTANT_ENCAPSED_STRING","'application_id'",139],["T_WHITESPACE"," ",139],["T_DOUBLE_ARROW","=>",139],["T_WHITESPACE"," ",139],["T_VARIABLE","$app",139],["T_OBJECT_OPERATOR","->",139],["T_STRING","getId",139],"(",")",")",")",";",["T_WHITESPACE","\n            ",139],"}",["T_WHITESPACE"," ",140],["T_ELSE","else",140],["T_WHITESPACE"," ",140],"{",["T_WHITESPACE","\n                ",140],["T_VARIABLE","$this",141],["T_OBJECT_OPERATOR","->",141],["T_STRING","_redirect",141],"(",["T_CONSTANT_ENCAPSED_STRING","'*\/*\/'",141],")",";",["T_WHITESPACE","\n            ",141],"}",["T_WHITESPACE","\n        ",142],"}",["T_WHITESPACE"," ",143],["T_CATCH","catch",143],["T_WHITESPACE"," ",143],"(",["T_STRING","Exception",143],["T_WHITESPACE"," ",143],["T_VARIABLE","$e",143],")",["T_WHITESPACE"," ",143],"{",["T_WHITESPACE","\n            ",143],["T_VARIABLE","$this",144],["T_OBJECT_OPERATOR","->",144],["T_STRING","_getSession",144],"(",")",["T_OBJECT_OPERATOR","->",144],["T_STRING","addException",144],"(",["T_VARIABLE","$e",144],",",["T_WHITESPACE"," ",144],["T_VARIABLE","$this",144],["T_OBJECT_OPERATOR","->",144],["T_STRING","__",144],"(",["T_CONSTANT_ENCAPSED_STRING","'Can\\'t open submission form.'",144],")",")",";",["T_WHITESPACE","\n            ",144],["T_IF","if",145],["T_WHITESPACE"," ",145],"(",["T_ISSET","isset",145],"(",["T_VARIABLE","$app",145],")",")",["T_WHITESPACE"," ",145],"{",["T_WHITESPACE","\n                ",145],["T_VARIABLE","$this",146],["T_OBJECT_OPERATOR","->",146],["T_STRING","_redirect",146],"(",["T_CONSTANT_ENCAPSED_STRING","'*\/*\/edit'",146],",",["T_WHITESPACE"," ",146],["T_ARRAY","array",146],"(",["T_CONSTANT_ENCAPSED_STRING","'application_id'",146],["T_WHITESPACE"," ",146],["T_DOUBLE_ARROW","=>",146],["T_WHITESPACE"," ",146],["T_VARIABLE","$app",146],["T_OBJECT_OPERATOR","->",146],["T_STRING","getId",146],"(",")",")",")",";",["T_WHITESPACE","\n            ",146],"}",["T_WHITESPACE"," ",147],["T_ELSE","else",147],["T_WHITESPACE"," ",147],"{",["T_WHITESPACE","\n                ",147],["T_VARIABLE","$this",148],["T_OBJECT_OPERATOR","->",148],["T_STRING","_redirect",148],"(",["T_CONSTANT_ENCAPSED_STRING","'*\/*\/'",148],")",";",["T_WHITESPACE","\n            ",148],"}",["T_WHITESPACE","\n        ",149],"}",["T_WHITESPACE","\n    ",150],"}",["T_WHITESPACE","\n\n    ",151],["T_DOC_COMMENT","\/**\n     * Edit app form\n     *\n     * @return null\n     *\/",153],["T_WHITESPACE","\n    ",157],["T_PUBLIC","public",158],["T_WHITESPACE"," ",158],["T_FUNCTION","function",158],["T_WHITESPACE"," ",158],["T_STRING","editAction",158],"(",")",["T_WHITESPACE","\n    ",158],"{",["T_WHITESPACE","\n        ",159],["T_VARIABLE","$redirectBack",160],["T_WHITESPACE"," ",160],"=",["T_WHITESPACE"," ",160],["T_STRING","false",160],";",["T_WHITESPACE","\n        ",160],["T_TRY","try",161],["T_WHITESPACE"," ",161],"{",["T_WHITESPACE","\n            ",161],["T_VARIABLE","$id",162],["T_WHITESPACE"," ",162],"=",["T_WHITESPACE"," ",162],["T_INT_CAST","(int)",162],["T_WHITESPACE"," ",162],["T_VARIABLE","$this",162],["T_OBJECT_OPERATOR","->",162],["T_STRING","getRequest",162],"(",")",["T_OBJECT_OPERATOR","->",162],["T_STRING","getParam",162],"(",["T_CONSTANT_ENCAPSED_STRING","'application_id'",162],")",";",["T_WHITESPACE","\n            ",162],["T_VARIABLE","$type",163],["T_WHITESPACE"," ",163],"=",["T_WHITESPACE"," ",163],["T_VARIABLE","$this",163],["T_OBJECT_OPERATOR","->",163],["T_STRING","getRequest",163],"(",")",["T_OBJECT_OPERATOR","->",163],["T_STRING","getParam",163],"(",["T_CONSTANT_ENCAPSED_STRING","'type'",163],")",";",["T_WHITESPACE","\n            ",163],["T_VARIABLE","$app",164],["T_WHITESPACE"," ",164],"=",["T_WHITESPACE"," ",164],["T_VARIABLE","$this",164],["T_OBJECT_OPERATOR","->",164],["T_STRING","_initApp",164],"(",["T_CONSTANT_ENCAPSED_STRING","'application_id'",164],",",["T_WHITESPACE"," ",164],["T_VARIABLE","$type",164],")",";",["T_WHITESPACE","\n\n            ",164],["T_IF","if",166],["T_WHITESPACE"," ",166],"(","!",["T_VARIABLE","$app",166],["T_OBJECT_OPERATOR","->",166],["T_STRING","getId",166],"(",")",["T_WHITESPACE"," ",166],["T_BOOLEAN_AND","&&",166],["T_WHITESPACE"," ",166],["T_VARIABLE","$id",166],")",["T_WHITESPACE"," ",166],"{",["T_WHITESPACE","\n                ",166],["T_VARIABLE","$this",167],["T_OBJECT_OPERATOR","->",167],["T_STRING","_getSession",167],"(",")",["T_OBJECT_OPERATOR","->",167],["T_STRING","addError",167],"(",["T_VARIABLE","$this",167],["T_OBJECT_OPERATOR","->",167],["T_STRING","__",167],"(",["T_CONSTANT_ENCAPSED_STRING","'App does not exist.'",167],")",")",";",["T_WHITESPACE","\n                ",167],["T_VARIABLE","$this",168],["T_OBJECT_OPERATOR","->",168],["T_STRING","_redirect",168],"(",["T_CONSTANT_ENCAPSED_STRING","'*\/*\/'",168],")",";",["T_WHITESPACE","\n                ",168],["T_RETURN","return",169],";",["T_WHITESPACE","\n            ",169],"}",["T_WHITESPACE","\n\n            ",170],["T_VARIABLE","$newAppData",172],["T_WHITESPACE"," ",172],"=",["T_WHITESPACE"," ",172],["T_VARIABLE","$this",172],["T_OBJECT_OPERATOR","->",172],["T_STRING","_restoreSessionFilesFormData",172],"(",["T_WHITESPACE","\n                ",172],["T_STRING","Mage",173],["T_DOUBLE_COLON","::",173],["T_STRING","getSingleton",173],"(",["T_CONSTANT_ENCAPSED_STRING","'adminhtml\/session'",173],")",["T_OBJECT_OPERATOR","->",173],["T_STRING","getFormData",173],"(",["T_STRING","true",173],")",["T_WHITESPACE","\n            ",173],")",";",["T_WHITESPACE","\n\n            ",174],["T_IF","if",176],["T_WHITESPACE"," ",176],"(","!",["T_EMPTY","empty",176],"(",["T_VARIABLE","$newAppData",176],")",")",["T_WHITESPACE"," ",176],"{",["T_WHITESPACE","\n                ",176],["T_VARIABLE","$app",177],["T_OBJECT_OPERATOR","->",177],["T_STRING","setData",177],"(",["T_STRING","Mage",177],["T_DOUBLE_COLON","::",177],["T_STRING","helper",177],"(",["T_CONSTANT_ENCAPSED_STRING","'xmlconnect'",177],")",["T_OBJECT_OPERATOR","->",177],["T_STRING","arrayMergeRecursive",177],"(",["T_VARIABLE","$app",177],["T_OBJECT_OPERATOR","->",177],["T_STRING","getData",177],"(",")",",",["T_WHITESPACE"," ",177],["T_VARIABLE","$newAppData",177],")",")",";",["T_WHITESPACE","\n            ",177],"}",["T_WHITESPACE","\n\n            ",178],["T_IF","if",180],["T_WHITESPACE"," ",180],"(",["T_VARIABLE","$app",180],["T_OBJECT_OPERATOR","->",180],["T_STRING","getId",180],"(",")",["T_WHITESPACE"," ",180],["T_BOOLEAN_OR","||",180],["T_WHITESPACE"," ",180],["T_VARIABLE","$app",180],["T_OBJECT_OPERATOR","->",180],["T_STRING","getType",180],"(",")",")",["T_WHITESPACE"," ",180],"{",["T_WHITESPACE","\n                ",180],["T_STRING","Mage",181],["T_DOUBLE_COLON","::",181],["T_STRING","getSingleton",181],"(",["T_CONSTANT_ENCAPSED_STRING","'adminhtml\/session'",181],")",["T_OBJECT_OPERATOR","->",181],["T_STRING","setData",181],"(",["T_CONSTANT_ENCAPSED_STRING","'new_application'",181],",",["T_WHITESPACE"," ",181],["T_STRING","false",181],")",";",["T_WHITESPACE","\n            ",181],"}",["T_WHITESPACE"," ",182],["T_ELSE","else",182],["T_WHITESPACE"," ",182],"{",["T_WHITESPACE","\n                ",182],["T_VARIABLE","$this",183],["T_OBJECT_OPERATOR","->",183],["T_STRING","_redirect",183],"(",["T_CONSTANT_ENCAPSED_STRING","'*\/*\/new'",183],")",";",["T_WHITESPACE","\n            ",183],"}",["T_WHITESPACE","\n\n            ",184],["T_VARIABLE","$devArray",186],["T_WHITESPACE"," ",186],"=",["T_WHITESPACE"," ",186],["T_STRING","Mage",186],["T_DOUBLE_COLON","::",186],["T_STRING","helper",186],"(",["T_CONSTANT_ENCAPSED_STRING","'xmlconnect'",186],")",["T_OBJECT_OPERATOR","->",186],["T_STRING","getSupportedDevices",186],"(",")",";",["T_WHITESPACE","\n            ",186],["T_IF","if",187],["T_WHITESPACE"," ",187],"(",["T_STRING","array_key_exists",187],"(",["T_VARIABLE","$app",187],["T_OBJECT_OPERATOR","->",187],["T_STRING","getType",187],"(",")",",",["T_WHITESPACE"," ",187],["T_VARIABLE","$devArray",187],")",")",["T_WHITESPACE"," ",187],"{",["T_WHITESPACE","\n                ",187],["T_VARIABLE","$deviceTitle",188],["T_WHITESPACE"," ",188],"=",["T_WHITESPACE"," ",188],["T_VARIABLE","$devArray",188],"[",["T_VARIABLE","$app",188],["T_OBJECT_OPERATOR","->",188],["T_STRING","getType",188],"(",")","]",";",["T_WHITESPACE","\n            ",188],"}",["T_WHITESPACE","\n            ",189],["T_VARIABLE","$deviceTitle",190],["T_WHITESPACE"," ",190],"=",["T_WHITESPACE"," ",190],["T_ISSET","isset",190],"(",["T_VARIABLE","$deviceTitle",190],")",["T_WHITESPACE"," ",190],"?",["T_WHITESPACE"," ",190],["T_VARIABLE","$deviceTitle",190],["T_WHITESPACE"," ",190],":",["T_WHITESPACE"," ",190],["T_VARIABLE","$app",190],["T_OBJECT_OPERATOR","->",190],["T_STRING","getType",190],"(",")",";",["T_WHITESPACE","\n            ",190],["T_VARIABLE","$app",191],["T_OBJECT_OPERATOR","->",191],["T_STRING","setDevtype",191],"(",["T_VARIABLE","$deviceTitle",191],")",";",["T_WHITESPACE","\n            ",191],["T_VARIABLE","$app",192],["T_OBJECT_OPERATOR","->",192],["T_STRING","loadSubmit",192],"(",")",";",["T_WHITESPACE","\n            ",192],["T_VARIABLE","$this",193],["T_OBJECT_OPERATOR","->",193],["T_STRING","loadLayout",193],"(",")",";",["T_WHITESPACE","\n            ",193],["T_VARIABLE","$this",194],["T_OBJECT_OPERATOR","->",194],["T_STRING","_setActiveMenu",194],"(",["T_CONSTANT_ENCAPSED_STRING","'xmlconnect\/mobile'",194],")",";",["T_WHITESPACE","\n            ",194],["T_VARIABLE","$this",195],["T_OBJECT_OPERATOR","->",195],["T_STRING","renderLayout",195],"(",")",";",["T_WHITESPACE","\n        ",195],"}",["T_WHITESPACE"," ",196],["T_CATCH","catch",196],["T_WHITESPACE"," ",196],"(",["T_STRING","Mage_Core_Exception",196],["T_WHITESPACE"," ",196],["T_VARIABLE","$e",196],")",["T_WHITESPACE"," ",196],"{",["T_WHITESPACE","\n            ",196],["T_VARIABLE","$this",197],["T_OBJECT_OPERATOR","->",197],["T_STRING","_getSession",197],"(",")",["T_OBJECT_OPERATOR","->",197],["T_STRING","addError",197],"(",["T_VARIABLE","$e",197],["T_OBJECT_OPERATOR","->",197],["T_STRING","getMessage",197],"(",")",")",";",["T_WHITESPACE","\n            ",197],["T_VARIABLE","$redirectBack",198],["T_WHITESPACE"," ",198],"=",["T_WHITESPACE"," ",198],["T_STRING","true",198],";",["T_WHITESPACE","\n            ",198],["T_STRING","Mage",199],["T_DOUBLE_COLON","::",199],["T_STRING","logException",199],"(",["T_VARIABLE","$e",199],")",";",["T_WHITESPACE","\n        ",199],"}",["T_WHITESPACE"," ",200],["T_CATCH","catch",200],["T_WHITESPACE"," ",200],"(",["T_STRING","Exception",200],["T_WHITESPACE"," ",200],["T_VARIABLE","$e",200],")",["T_WHITESPACE"," ",200],"{",["T_WHITESPACE","\n            ",200],["T_VARIABLE","$this",201],["T_OBJECT_OPERATOR","->",201],["T_STRING","_getSession",201],"(",")",["T_OBJECT_OPERATOR","->",201],["T_STRING","addError",201],"(",["T_VARIABLE","$this",201],["T_OBJECT_OPERATOR","->",201],["T_STRING","__",201],"(",["T_CONSTANT_ENCAPSED_STRING","'Unable to load application form.'",201],")",")",";",["T_WHITESPACE","\n            ",201],["T_VARIABLE","$redirectBack",202],["T_WHITESPACE"," ",202],"=",["T_WHITESPACE"," ",202],["T_STRING","true",202],";",["T_WHITESPACE","\n            ",202],["T_STRING","Mage",203],["T_DOUBLE_COLON","::",203],["T_STRING","logException",203],"(",["T_VARIABLE","$e",203],")",";",["T_WHITESPACE","\n        ",203],"}",["T_WHITESPACE","\n        ",204],["T_IF","if",205],["T_WHITESPACE"," ",205],"(",["T_VARIABLE","$redirectBack",205],")",["T_WHITESPACE"," ",205],"{",["T_WHITESPACE","\n            ",205],["T_VARIABLE","$this",206],["T_OBJECT_OPERATOR","->",206],["T_STRING","_redirect",206],"(",["T_CONSTANT_ENCAPSED_STRING","'*\/*\/'",206],")",";",["T_WHITESPACE","\n            ",206],["T_RETURN","return",207],";",["T_WHITESPACE","\n        ",207],"}",["T_WHITESPACE","\n    ",208],"}",["T_WHITESPACE","\n\n    ",209],["T_DOC_COMMENT","\/**\n     * Submit POST application action\n     *\n     * @return null\n     *\/",211],["T_WHITESPACE","\n    ",215],["T_PUBLIC","public",216],["T_WHITESPACE"," ",216],["T_FUNCTION","function",216],["T_WHITESPACE"," ",216],["T_STRING","submissionPostAction",216],"(",")",["T_WHITESPACE","\n    ",216],"{",["T_WHITESPACE","\n        ",217],["T_VARIABLE","$data",218],["T_WHITESPACE"," ",218],"=",["T_WHITESPACE"," ",218],["T_VARIABLE","$this",218],["T_OBJECT_OPERATOR","->",218],["T_STRING","getRequest",218],"(",")",["T_OBJECT_OPERATOR","->",218],["T_STRING","getPost",218],"(",")",";",["T_WHITESPACE","\n        ",218],["T_TRY","try",219],["T_WHITESPACE"," ",219],"{",["T_WHITESPACE","\n            ",219],["T_VARIABLE","$isError",220],["T_WHITESPACE"," ",220],"=",["T_WHITESPACE"," ",220],["T_STRING","false",220],";",["T_WHITESPACE","\n            ",220],["T_IF","if",221],["T_WHITESPACE"," ",221],"(","!",["T_EMPTY","empty",221],"(",["T_VARIABLE","$data",221],")",")",["T_WHITESPACE"," ",221],"{",["T_WHITESPACE","\n                ",221],["T_STRING","Mage",222],["T_DOUBLE_COLON","::",222],["T_STRING","getSingleton",222],"(",["T_CONSTANT_ENCAPSED_STRING","'adminhtml\/session'",222],")",["T_OBJECT_OPERATOR","->",222],["T_STRING","setFormSubmissionData",222],"(",["T_VARIABLE","$this",222],["T_OBJECT_OPERATOR","->",222],["T_STRING","_filterFormDataForSession",222],"(",["T_VARIABLE","$data",222],")",")",";",["T_WHITESPACE","\n            ",222],"}",["T_WHITESPACE","\n            ",223],["T_DOC_COMMENT","\/** @var $app Mage_XmlConnect_Model_Application *\/",224],["T_WHITESPACE","\n            ",224],["T_VARIABLE","$app",225],["T_WHITESPACE"," ",225],"=",["T_WHITESPACE"," ",225],["T_VARIABLE","$this",225],["T_OBJECT_OPERATOR","->",225],["T_STRING","_initApp",225],"(",["T_CONSTANT_ENCAPSED_STRING","'key'",225],")",";",["T_WHITESPACE","\n            ",225],["T_VARIABLE","$app",226],["T_OBJECT_OPERATOR","->",226],["T_STRING","loadSubmit",226],"(",")",";",["T_WHITESPACE","\n            ",226],["T_VARIABLE","$newAppData",227],["T_WHITESPACE"," ",227],"=",["T_WHITESPACE"," ",227],["T_VARIABLE","$this",227],["T_OBJECT_OPERATOR","->",227],["T_STRING","_processUploadedFiles",227],"(",["T_VARIABLE","$app",227],["T_OBJECT_OPERATOR","->",227],["T_STRING","getData",227],"(",")",",",["T_WHITESPACE"," ",227],["T_STRING","true",227],")",";",["T_WHITESPACE","\n            ",227],["T_IF","if",228],["T_WHITESPACE"," ",228],"(","!",["T_EMPTY","empty",228],"(",["T_VARIABLE","$newAppData",228],")",")",["T_WHITESPACE"," ",228],"{",["T_WHITESPACE","\n                ",228],["T_VARIABLE","$app",229],["T_OBJECT_OPERATOR","->",229],["T_STRING","setData",229],"(",["T_STRING","Mage",229],["T_DOUBLE_COLON","::",229],["T_STRING","helper",229],"(",["T_CONSTANT_ENCAPSED_STRING","'xmlconnect'",229],")",["T_OBJECT_OPERATOR","->",229],["T_STRING","arrayMergeRecursive",229],"(",["T_VARIABLE","$app",229],["T_OBJECT_OPERATOR","->",229],["T_STRING","getData",229],"(",")",",",["T_WHITESPACE"," ",229],["T_VARIABLE","$newAppData",229],")",")",";",["T_WHITESPACE","\n            ",229],"}",["T_WHITESPACE","\n\n            ",230],["T_VARIABLE","$params",232],["T_WHITESPACE"," ",232],"=",["T_WHITESPACE"," ",232],["T_VARIABLE","$app",232],["T_OBJECT_OPERATOR","->",232],["T_STRING","prepareSubmitParams",232],"(",["T_VARIABLE","$data",232],")",";",["T_WHITESPACE","\n            ",232],["T_VARIABLE","$errors",233],["T_WHITESPACE"," ",233],"=",["T_WHITESPACE"," ",233],["T_VARIABLE","$app",233],["T_OBJECT_OPERATOR","->",233],["T_STRING","validateSubmit",233],"(",["T_VARIABLE","$params",233],")",";",["T_WHITESPACE","\n\n            ",233],["T_IF","if",235],["T_WHITESPACE"," ",235],"(",["T_VARIABLE","$errors",235],["T_WHITESPACE"," ",235],["T_IS_NOT_IDENTICAL","!==",235],["T_WHITESPACE"," ",235],["T_STRING","true",235],")",["T_WHITESPACE"," ",235],"{",["T_WHITESPACE","\n                ",235],["T_FOREACH","foreach",236],["T_WHITESPACE"," ",236],"(",["T_VARIABLE","$errors",236],["T_WHITESPACE"," ",236],["T_AS","as",236],["T_WHITESPACE"," ",236],["T_VARIABLE","$err",236],")",["T_WHITESPACE"," ",236],"{",["T_WHITESPACE","\n                    ",236],["T_VARIABLE","$this",237],["T_OBJECT_OPERATOR","->",237],["T_STRING","_getSession",237],"(",")",["T_OBJECT_OPERATOR","->",237],["T_STRING","addError",237],"(",["T_VARIABLE","$err",237],")",";",["T_WHITESPACE","\n                ",237],"}",["T_WHITESPACE","\n                ",238],["T_VARIABLE","$isError",239],["T_WHITESPACE"," ",239],"=",["T_WHITESPACE"," ",239],["T_STRING","true",239],";",["T_WHITESPACE","\n            ",239],"}",["T_WHITESPACE","\n            ",240],["T_IF","if",241],["T_WHITESPACE"," ",241],"(","!",["T_VARIABLE","$isError",241],")",["T_WHITESPACE"," ",241],"{",["T_WHITESPACE","\n                ",241],["T_VARIABLE","$this",242],["T_OBJECT_OPERATOR","->",242],["T_STRING","_processPostRequest",242],"(",")",";",["T_WHITESPACE","\n                ",242],["T_VARIABLE","$history",243],["T_WHITESPACE"," ",243],"=",["T_WHITESPACE"," ",243],["T_STRING","Mage",243],["T_DOUBLE_COLON","::",243],["T_STRING","getModel",243],"(",["T_CONSTANT_ENCAPSED_STRING","'xmlconnect\/history'",243],")",";",["T_WHITESPACE","\n                ",243],["T_VARIABLE","$history",244],["T_OBJECT_OPERATOR","->",244],["T_STRING","setData",244],"(",["T_ARRAY","array",244],"(",["T_WHITESPACE","\n                    ",244],["T_CONSTANT_ENCAPSED_STRING","'params'",245],["T_WHITESPACE"," ",245],["T_DOUBLE_ARROW","=>",245],["T_WHITESPACE"," ",245],["T_VARIABLE","$params",245],",",["T_WHITESPACE","\n                    ",245],["T_CONSTANT_ENCAPSED_STRING","'application_id'",246],["T_WHITESPACE"," ",246],["T_DOUBLE_ARROW","=>",246],["T_WHITESPACE"," ",246],["T_VARIABLE","$app",246],["T_OBJECT_OPERATOR","->",246],["T_STRING","getId",246],"(",")",",",["T_WHITESPACE","\n                    ",246],["T_CONSTANT_ENCAPSED_STRING","'created_at'",247],["T_WHITESPACE"," ",247],["T_DOUBLE_ARROW","=>",247],["T_WHITESPACE"," ",247],["T_STRING","Mage",247],["T_DOUBLE_COLON","::",247],["T_STRING","getModel",247],"(",["T_CONSTANT_ENCAPSED_STRING","'core\/date'",247],")",["T_OBJECT_OPERATOR","->",247],["T_STRING","date",247],"(",")",",",["T_WHITESPACE","\n                    ",247],["T_CONSTANT_ENCAPSED_STRING","'store_id'",248],["T_WHITESPACE"," ",248],["T_DOUBLE_ARROW","=>",248],["T_WHITESPACE"," ",248],["T_VARIABLE","$app",248],["T_OBJECT_OPERATOR","->",248],["T_STRING","getStoreId",248],"(",")",",",["T_WHITESPACE","\n                    ",248],["T_CONSTANT_ENCAPSED_STRING","'title'",249],["T_WHITESPACE"," ",249],["T_DOUBLE_ARROW","=>",249],["T_WHITESPACE"," ",249],["T_ISSET","isset",249],"(",["T_VARIABLE","$params",249],"[",["T_CONSTANT_ENCAPSED_STRING","'title'",249],"]",")",["T_WHITESPACE"," ",249],"?",["T_WHITESPACE"," ",249],["T_VARIABLE","$params",249],"[",["T_CONSTANT_ENCAPSED_STRING","'title'",249],"]",["T_WHITESPACE"," ",249],":",["T_WHITESPACE"," ",249],["T_CONSTANT_ENCAPSED_STRING","''",249],",",["T_WHITESPACE","\n                    ",249],["T_CONSTANT_ENCAPSED_STRING","'name'",250],["T_WHITESPACE"," ",250],["T_DOUBLE_ARROW","=>",250],["T_WHITESPACE"," ",250],["T_VARIABLE","$app",250],["T_OBJECT_OPERATOR","->",250],["T_STRING","getName",250],"(",")",",",["T_WHITESPACE","\n                    ",250],["T_CONSTANT_ENCAPSED_STRING","'code'",251],["T_WHITESPACE"," ",251],["T_DOUBLE_ARROW","=>",251],["T_WHITESPACE"," ",251],["T_VARIABLE","$app",251],["T_OBJECT_OPERATOR","->",251],["T_STRING","getCode",251],"(",")",",",["T_WHITESPACE","\n                    ",251],["T_CONSTANT_ENCAPSED_STRING","'activation_key'",252],["T_WHITESPACE"," ",252],["T_DOUBLE_ARROW","=>",252],["T_WHITESPACE"," ",252],["T_ISSET","isset",252],"(",["T_VARIABLE","$params",252],"[",["T_CONSTANT_ENCAPSED_STRING","'resubmission_activation_key'",252],"]",")",["T_WHITESPACE","\n                        ",252],"?",["T_WHITESPACE"," ",253],["T_VARIABLE","$params",253],"[",["T_CONSTANT_ENCAPSED_STRING","'resubmission_activation_key'",253],"]",["T_WHITESPACE"," ",253],":",["T_WHITESPACE"," ",253],["T_VARIABLE","$params",253],"[",["T_CONSTANT_ENCAPSED_STRING","'key'",253],"]",",",["T_WHITESPACE","\n                ",253],")",")",";",["T_WHITESPACE","\n                ",254],["T_VARIABLE","$history",255],["T_OBJECT_OPERATOR","->",255],["T_STRING","save",255],"(",")",";",["T_WHITESPACE","\n                ",255],["T_VARIABLE","$app",256],["T_OBJECT_OPERATOR","->",256],["T_STRING","getResource",256],"(",")",["T_OBJECT_OPERATOR","->",256],["T_STRING","updateApplicationStatus",256],"(",["T_WHITESPACE","\n                    ",256],["T_VARIABLE","$app",257],["T_OBJECT_OPERATOR","->",257],["T_STRING","getId",257],"(",")",",",["T_WHITESPACE"," ",257],["T_STRING","Mage_XmlConnect_Model_Application",257],["T_DOUBLE_COLON","::",257],["T_STRING","APP_STATUS_SUCCESS",257],["T_WHITESPACE","\n                ",257],")",";",["T_WHITESPACE","\n                ",258],["T_VARIABLE","$this",259],["T_OBJECT_OPERATOR","->",259],["T_STRING","_getSession",259],"(",")",["T_OBJECT_OPERATOR","->",259],["T_STRING","addSuccess",259],"(",["T_VARIABLE","$this",259],["T_OBJECT_OPERATOR","->",259],["T_STRING","__",259],"(",["T_CONSTANT_ENCAPSED_STRING","'App has been submitted.'",259],")",")",";",["T_WHITESPACE","\n                ",259],["T_VARIABLE","$this",260],["T_OBJECT_OPERATOR","->",260],["T_STRING","_clearSessionData",260],"(",")",";",["T_WHITESPACE","\n                ",260],["T_VARIABLE","$this",261],["T_OBJECT_OPERATOR","->",261],["T_STRING","_redirect",261],"(",["T_CONSTANT_ENCAPSED_STRING","'*\/*\/edit'",261],",",["T_WHITESPACE"," ",261],["T_ARRAY","array",261],"(",["T_CONSTANT_ENCAPSED_STRING","'application_id'",261],["T_WHITESPACE"," ",261],["T_DOUBLE_ARROW","=>",261],["T_WHITESPACE"," ",261],["T_VARIABLE","$app",261],["T_OBJECT_OPERATOR","->",261],["T_STRING","getId",261],"(",")",")",")",";",["T_WHITESPACE","\n            ",261],"}",["T_WHITESPACE"," ",262],["T_ELSE","else",262],["T_WHITESPACE"," ",262],"{",["T_WHITESPACE","\n                ",262],["T_STRING","Mage",263],["T_DOUBLE_COLON","::",263],["T_STRING","getSingleton",263],"(",["T_CONSTANT_ENCAPSED_STRING","'adminhtml\/session'",263],")",["T_OBJECT_OPERATOR","->",263],["T_STRING","setLoadSessionFlag",263],"(",["T_STRING","true",263],")",";",["T_WHITESPACE","\n                ",263],["T_VARIABLE","$this",264],["T_OBJECT_OPERATOR","->",264],["T_STRING","_redirect",264],"(",["T_CONSTANT_ENCAPSED_STRING","'*\/*\/submission'",264],",",["T_WHITESPACE"," ",264],["T_ARRAY","array",264],"(",["T_CONSTANT_ENCAPSED_STRING","'application_id'",264],["T_WHITESPACE"," ",264],["T_DOUBLE_ARROW","=>",264],["T_WHITESPACE"," ",264],["T_VARIABLE","$app",264],["T_OBJECT_OPERATOR","->",264],["T_STRING","getId",264],"(",")",")",")",";",["T_WHITESPACE","\n            ",264],"}",["T_WHITESPACE","\n        ",265],"}",["T_WHITESPACE"," ",266],["T_CATCH","catch",266],["T_WHITESPACE"," ",266],"(",["T_STRING","Mage_Core_Exception",266],["T_WHITESPACE"," ",266],["T_VARIABLE","$e",266],")",["T_WHITESPACE"," ",266],"{",["T_WHITESPACE","\n            ",266],["T_VARIABLE","$this",267],["T_OBJECT_OPERATOR","->",267],["T_STRING","_getSession",267],"(",")",["T_OBJECT_OPERATOR","->",267],["T_STRING","addError",267],"(",["T_VARIABLE","$e",267],["T_OBJECT_OPERATOR","->",267],["T_STRING","getMessage",267],"(",")",")",";",["T_WHITESPACE","\n            ",267],["T_IF","if",268],["T_WHITESPACE"," ",268],"(",["T_ISSET","isset",268],"(",["T_VARIABLE","$app",268],")",")",["T_WHITESPACE"," ",268],"{",["T_WHITESPACE","\n                ",268],["T_STRING","Mage",269],["T_DOUBLE_COLON","::",269],["T_STRING","getSingleton",269],"(",["T_CONSTANT_ENCAPSED_STRING","'adminhtml\/session'",269],")",["T_OBJECT_OPERATOR","->",269],["T_STRING","setLoadSessionFlag",269],"(",["T_STRING","true",269],")",";",["T_WHITESPACE","\n                ",269],["T_VARIABLE","$this",270],["T_OBJECT_OPERATOR","->",270],["T_STRING","_redirect",270],"(",["T_CONSTANT_ENCAPSED_STRING","'*\/*\/submission'",270],",",["T_WHITESPACE"," ",270],["T_ARRAY","array",270],"(",["T_CONSTANT_ENCAPSED_STRING","'application_id'",270],["T_WHITESPACE"," ",270],["T_DOUBLE_ARROW","=>",270],["T_WHITESPACE"," ",270],["T_VARIABLE","$app",270],["T_OBJECT_OPERATOR","->",270],["T_STRING","getId",270],"(",")",")",")",";",["T_WHITESPACE","\n            ",270],"}",["T_WHITESPACE"," ",271],["T_ELSE","else",271],["T_WHITESPACE"," ",271],"{",["T_WHITESPACE","\n                ",271],["T_VARIABLE","$this",272],["T_OBJECT_OPERATOR","->",272],["T_STRING","_redirect",272],"(",["T_CONSTANT_ENCAPSED_STRING","'*\/*\/'",272],")",";",["T_WHITESPACE","\n            ",272],"}",["T_WHITESPACE","\n        ",273],"}",["T_WHITESPACE"," ",274],["T_CATCH","catch",274],["T_WHITESPACE"," ",274],"(",["T_STRING","Exception",274],["T_WHITESPACE"," ",274],["T_VARIABLE","$e",274],")",["T_WHITESPACE"," ",274],"{",["T_WHITESPACE","\n            ",274],["T_VARIABLE","$this",275],["T_OBJECT_OPERATOR","->",275],["T_STRING","_getSession",275],"(",")",["T_OBJECT_OPERATOR","->",275],["T_STRING","addException",275],"(",["T_VARIABLE","$e",275],",",["T_WHITESPACE"," ",275],["T_VARIABLE","$this",275],["T_OBJECT_OPERATOR","->",275],["T_STRING","__",275],"(",["T_CONSTANT_ENCAPSED_STRING","'Can\\'t submit application.'",275],")",")",";",["T_WHITESPACE","\n            ",275],["T_STRING","Mage",276],["T_DOUBLE_COLON","::",276],["T_STRING","logException",276],"(",["T_VARIABLE","$e",276],")",";",["T_WHITESPACE","\n            ",276],["T_IF","if",277],["T_WHITESPACE"," ",277],"(",["T_ISSET","isset",277],"(",["T_VARIABLE","$app",277],")",")",["T_WHITESPACE"," ",277],"{",["T_WHITESPACE","\n                ",277],["T_STRING","Mage",278],["T_DOUBLE_COLON","::",278],["T_STRING","getSingleton",278],"(",["T_CONSTANT_ENCAPSED_STRING","'adminhtml\/session'",278],")",["T_OBJECT_OPERATOR","->",278],["T_STRING","setLoadSessionFlag",278],"(",["T_STRING","true",278],")",";",["T_WHITESPACE","\n                ",278],["T_VARIABLE","$this",279],["T_OBJECT_OPERATOR","->",279],["T_STRING","_redirect",279],"(",["T_CONSTANT_ENCAPSED_STRING","'*\/*\/submission'",279],",",["T_WHITESPACE"," ",279],["T_ARRAY","array",279],"(",["T_CONSTANT_ENCAPSED_STRING","'application_id'",279],["T_WHITESPACE"," ",279],["T_DOUBLE_ARROW","=>",279],["T_WHITESPACE"," ",279],["T_VARIABLE","$app",279],["T_OBJECT_OPERATOR","->",279],["T_STRING","getId",279],"(",")",")",")",";",["T_WHITESPACE","\n            ",279],"}",["T_WHITESPACE"," ",280],["T_ELSE","else",280],["T_WHITESPACE"," ",280],"{",["T_WHITESPACE","\n                ",280],["T_VARIABLE","$this",281],["T_OBJECT_OPERATOR","->",281],["T_STRING","_redirect",281],"(",["T_CONSTANT_ENCAPSED_STRING","'*\/*\/'",281],")",";",["T_WHITESPACE","\n            ",281],"}",["T_WHITESPACE","\n        ",282],"}",["T_WHITESPACE","\n    ",283],"}",["T_WHITESPACE","\n\n    ",284],["T_DOC_COMMENT","\/**\n     * Format post\/get data for session storage\n     *\n     * @param array $data - $_REQUEST[]\n     * @return array\n     *\/",286],["T_WHITESPACE","\n    ",291],["T_PROTECTED","protected",292],["T_WHITESPACE"," ",292],["T_FUNCTION","function",292],["T_WHITESPACE"," ",292],["T_STRING","_filterFormDataForSession",292],"(",["T_VARIABLE","$data",292],")",["T_WHITESPACE","\n    ",292],"{",["T_WHITESPACE","\n        ",293],["T_VARIABLE","$params",294],["T_WHITESPACE"," ",294],"=",["T_WHITESPACE"," ",294],["T_STRING","null",294],";",["T_WHITESPACE","\n        ",294],["T_IF","if",295],["T_WHITESPACE"," ",295],"(",["T_ISSET","isset",295],"(",["T_VARIABLE","$data",295],"[",["T_CONSTANT_ENCAPSED_STRING","'conf'",295],"]",")",["T_WHITESPACE"," ",295],["T_BOOLEAN_AND","&&",295],["T_WHITESPACE"," ",295],["T_STRING","is_array",295],"(",["T_VARIABLE","$data",295],"[",["T_CONSTANT_ENCAPSED_STRING","'conf'",295],"]",")",")",["T_WHITESPACE"," ",295],"{",["T_WHITESPACE","\n            ",295],["T_IF","if",296],["T_WHITESPACE"," ",296],"(",["T_ISSET","isset",296],"(",["T_VARIABLE","$data",296],"[",["T_CONSTANT_ENCAPSED_STRING","'conf'",296],"]","[",["T_CONSTANT_ENCAPSED_STRING","'submit_text'",296],"]",")",["T_WHITESPACE"," ",296],["T_BOOLEAN_AND","&&",296],["T_WHITESPACE"," ",296],["T_STRING","is_array",296],"(",["T_VARIABLE","$data",296],"[",["T_CONSTANT_ENCAPSED_STRING","'conf'",296],"]","[",["T_CONSTANT_ENCAPSED_STRING","'submit_text'",296],"]",")",")",["T_WHITESPACE"," ",296],"{",["T_WHITESPACE","\n                ",296],["T_VARIABLE","$params",297],["T_WHITESPACE"," ",297],"=",["T_WHITESPACE"," ",297],"&",["T_VARIABLE","$data",297],"[",["T_CONSTANT_ENCAPSED_STRING","'conf'",297],"]","[",["T_CONSTANT_ENCAPSED_STRING","'submit_text'",297],"]",";",["T_WHITESPACE","\n            ",297],"}",["T_WHITESPACE","\n        ",298],"}",["T_WHITESPACE","\n        ",299],["T_IF","if",300],["T_WHITESPACE"," ",300],"(",["T_ISSET","isset",300],"(",["T_VARIABLE","$params",300],"[",["T_CONSTANT_ENCAPSED_STRING","'country'",300],"]",")",["T_WHITESPACE"," ",300],["T_BOOLEAN_AND","&&",300],["T_WHITESPACE"," ",300],["T_STRING","is_array",300],"(",["T_VARIABLE","$params",300],"[",["T_CONSTANT_ENCAPSED_STRING","'country'",300],"]",")",")",["T_WHITESPACE"," ",300],"{",["T_WHITESPACE","\n            ",300],["T_VARIABLE","$data",301],"[",["T_CONSTANT_ENCAPSED_STRING","'conf'",301],"]","[",["T_CONSTANT_ENCAPSED_STRING","'submit_text'",301],"]","[",["T_CONSTANT_ENCAPSED_STRING","'country'",301],"]",["T_WHITESPACE"," ",301],"=",["T_WHITESPACE"," ",301],["T_STRING","implode",301],"(",["T_CONSTANT_ENCAPSED_STRING","','",301],",",["T_WHITESPACE"," ",301],["T_VARIABLE","$params",301],"[",["T_CONSTANT_ENCAPSED_STRING","'country'",301],"]",")",";",["T_WHITESPACE","\n        ",301],"}",["T_WHITESPACE","\n        ",302],["T_RETURN","return",303],["T_WHITESPACE"," ",303],["T_VARIABLE","$data",303],";",["T_WHITESPACE","\n    ",303],"}",["T_WHITESPACE","\n\n    ",304],["T_DOC_COMMENT","\/**\n     * Clear session data\n     * Used after successful save\/submit action\n     *\n     * @return Mage_XmlConnect_Adminhtml_MobileController\n     *\/",306],["T_WHITESPACE","\n    ",311],["T_PROTECTED","protected",312],["T_WHITESPACE"," ",312],["T_FUNCTION","function",312],["T_WHITESPACE"," ",312],["T_STRING","_clearSessionData",312],"(",")",["T_WHITESPACE","\n    ",312],"{",["T_WHITESPACE","\n        ",313],["T_STRING","Mage",314],["T_DOUBLE_COLON","::",314],["T_STRING","getSingleton",314],"(",["T_CONSTANT_ENCAPSED_STRING","'adminhtml\/session'",314],")",["T_OBJECT_OPERATOR","->",314],["T_STRING","unsFormData",314],"(",")",";",["T_WHITESPACE","\n        ",314],["T_STRING","Mage",315],["T_DOUBLE_COLON","::",315],["T_STRING","getSingleton",315],"(",["T_CONSTANT_ENCAPSED_STRING","'adminhtml\/session'",315],")",["T_OBJECT_OPERATOR","->",315],["T_STRING","unsFormSubmissionData",315],"(",")",";",["T_WHITESPACE","\n        ",315],["T_STRING","Mage",316],["T_DOUBLE_COLON","::",316],["T_STRING","getSingleton",316],"(",["T_CONSTANT_ENCAPSED_STRING","'adminhtml\/session'",316],")",["T_OBJECT_OPERATOR","->",316],["T_STRING","unsUploadedFilesFormData",316],"(",")",";",["T_WHITESPACE","\n        ",316],["T_RETURN","return",317],["T_WHITESPACE"," ",317],["T_VARIABLE","$this",317],";",["T_WHITESPACE","\n    ",317],"}",["T_WHITESPACE","\n\n    ",318],["T_DOC_COMMENT","\/**\n     * Send HTTP POST request to magentocommerce.com\n     *\n     * @return null\n     *\/",320],["T_WHITESPACE","\n    ",324],["T_PROTECTED","protected",325],["T_WHITESPACE"," ",325],["T_FUNCTION","function",325],["T_WHITESPACE"," ",325],["T_STRING","_processPostRequest",325],"(",")",["T_WHITESPACE","\n    ",325],"{",["T_WHITESPACE","\n        ",326],["T_TRY","try",327],["T_WHITESPACE"," ",327],"{",["T_WHITESPACE","\n            ",327],["T_DOC_COMMENT","\/** @var $app Mage_XmlConnect_Model_Application *\/",328],["T_WHITESPACE","\n            ",328],["T_VARIABLE","$app",329],["T_WHITESPACE"," ",329],"=",["T_WHITESPACE"," ",329],["T_STRING","Mage",329],["T_DOUBLE_COLON","::",329],["T_STRING","helper",329],"(",["T_CONSTANT_ENCAPSED_STRING","'xmlconnect'",329],")",["T_OBJECT_OPERATOR","->",329],["T_STRING","getApplication",329],"(",")",";",["T_WHITESPACE","\n            ",329],["T_VARIABLE","$params",330],["T_WHITESPACE"," ",330],"=",["T_WHITESPACE"," ",330],["T_VARIABLE","$app",330],["T_OBJECT_OPERATOR","->",330],["T_STRING","getSubmitParams",330],"(",")",";",["T_WHITESPACE","\n\n            ",330],["T_VARIABLE","$appConnectorUrl",332],["T_WHITESPACE"," ",332],"=",["T_WHITESPACE"," ",332],["T_STRING","Mage",332],["T_DOUBLE_COLON","::",332],["T_STRING","getStoreConfig",332],"(",["T_CONSTANT_ENCAPSED_STRING","'xmlconnect\/mobile_application\/magentocommerce_url'",332],")",";",["T_WHITESPACE","\n            ",332],["T_VARIABLE","$curlHandler",333],["T_WHITESPACE"," ",333],"=",["T_WHITESPACE"," ",333],["T_STRING","curl_init",333],"(",["T_VARIABLE","$appConnectorUrl",333],["T_WHITESPACE"," ",333],".",["T_WHITESPACE"," ",333],["T_VARIABLE","$params",333],"[",["T_CONSTANT_ENCAPSED_STRING","'key'",333],"]",")",";",["T_WHITESPACE","\n\n            ",333],["T_COMMENT","\/\/ set URL and other appropriate options\n",335],["T_WHITESPACE","            ",336],["T_STRING","curl_setopt",336],"(",["T_VARIABLE","$curlHandler",336],",",["T_WHITESPACE"," ",336],["T_STRING","CURLOPT_POST",336],",",["T_WHITESPACE"," ",336],["T_LNUMBER","1",336],")",";",["T_WHITESPACE","\n            ",336],["T_STRING","curl_setopt",337],"(",["T_VARIABLE","$curlHandler",337],",",["T_WHITESPACE"," ",337],["T_STRING","CURLOPT_POSTFIELDS",337],",",["T_WHITESPACE"," ",337],["T_VARIABLE","$params",337],")",";",["T_WHITESPACE","\n            ",337],["T_STRING","curl_setopt",338],"(",["T_VARIABLE","$curlHandler",338],",",["T_WHITESPACE"," ",338],["T_STRING","CURLOPT_SSL_VERIFYHOST",338],",",["T_WHITESPACE"," ",338],["T_LNUMBER","2",338],")",";",["T_WHITESPACE","\n            ",338],["T_STRING","curl_setopt",339],"(",["T_VARIABLE","$curlHandler",339],",",["T_WHITESPACE"," ",339],["T_STRING","CURLOPT_RETURNTRANSFER",339],",",["T_WHITESPACE"," ",339],["T_LNUMBER","1",339],")",";",["T_WHITESPACE","\n            ",339],["T_STRING","curl_setopt",340],"(",["T_VARIABLE","$curlHandler",340],",",["T_WHITESPACE"," ",340],["T_STRING","CURLOPT_SSL_VERIFYPEER",340],",",["T_WHITESPACE"," ",340],["T_LNUMBER","1",340],")",";",["T_WHITESPACE","\n            ",340],["T_STRING","curl_setopt",341],"(",["T_VARIABLE","$curlHandler",341],",",["T_WHITESPACE"," ",341],["T_STRING","CURLOPT_TIMEOUT",341],",",["T_WHITESPACE"," ",341],["T_LNUMBER","60",341],")",";",["T_WHITESPACE","\n\n            ",341],["T_COMMENT","\/\/ Execute the request.\n",343],["T_WHITESPACE","            ",344],["T_VARIABLE","$result",344],["T_WHITESPACE"," ",344],"=",["T_WHITESPACE"," ",344],["T_STRING","curl_exec",344],"(",["T_VARIABLE","$curlHandler",344],")",";",["T_WHITESPACE","\n\n            ",344],["T_IF","if",346],["T_WHITESPACE"," ",346],"(",["T_STRING","curl_exec",346],"(",["T_VARIABLE","$curlHandler",346],")",["T_WHITESPACE"," ",346],["T_IS_IDENTICAL","===",346],["T_WHITESPACE"," ",346],["T_STRING","false",346],")",["T_WHITESPACE"," ",346],"{",["T_WHITESPACE","\n                ",346],["T_STRING","Mage",347],["T_DOUBLE_COLON","::",347],["T_STRING","log",347],"(",["T_CONSTANT_ENCAPSED_STRING","'Curl error: '",347],["T_WHITESPACE"," ",347],".",["T_WHITESPACE"," ",347],["T_STRING","curl_error",347],"(",["T_VARIABLE","$curlHandler",347],")",")",";",["T_WHITESPACE","\n                ",347],["T_STRING","Mage",348],["T_DOUBLE_COLON","::",348],["T_STRING","log",348],"(",["T_STRING","curl_getinfo",348],"(",["T_VARIABLE","$curlHandler",348],")",")",";",["T_WHITESPACE","\n            ",348],"}",["T_WHITESPACE","\n\n            ",349],["T_COMMENT","\/\/ close cURL resource, and free up system resources\n",351],["T_WHITESPACE","            ",352],["T_STRING","curl_close",352],"(",["T_VARIABLE","$curlHandler",352],")",";",["T_WHITESPACE","\n\n            ",352],["T_COMMENT","\/\/ Assert that we received an expected message in reponse.\n",354],["T_WHITESPACE","            ",355],["T_VARIABLE","$resultArray",355],["T_WHITESPACE"," ",355],"=",["T_WHITESPACE"," ",355],["T_STRING","json_decode",355],"(",["T_VARIABLE","$result",355],",",["T_WHITESPACE"," ",355],["T_STRING","true",355],")",";",["T_WHITESPACE","\n\n            ",355],["T_VARIABLE","$app",357],["T_OBJECT_OPERATOR","->",357],["T_STRING","setResult",357],"(",["T_VARIABLE","$result",357],")",";",["T_WHITESPACE","\n            ",357],["T_VARIABLE","$success",358],["T_WHITESPACE"," ",358],"=",["T_WHITESPACE"," ",358],["T_ISSET","isset",358],"(",["T_VARIABLE","$resultArray",358],"[",["T_CONSTANT_ENCAPSED_STRING","'success'",358],"]",")",["T_WHITESPACE"," ",358],["T_BOOLEAN_AND","&&",358],["T_WHITESPACE"," ",358],["T_VARIABLE","$resultArray",358],"[",["T_CONSTANT_ENCAPSED_STRING","'success'",358],"]",["T_WHITESPACE"," ",358],["T_IS_IDENTICAL","===",358],["T_WHITESPACE"," ",358],["T_STRING","true",358],";",["T_WHITESPACE","\n\n            ",358],["T_VARIABLE","$app",360],["T_OBJECT_OPERATOR","->",360],["T_STRING","setSuccess",360],"(",["T_VARIABLE","$success",360],")",";",["T_WHITESPACE","\n            ",360],["T_IF","if",361],["T_WHITESPACE"," ",361],"(","!",["T_VARIABLE","$app",361],["T_OBJECT_OPERATOR","->",361],["T_STRING","getSuccess",361],"(",")",")",["T_WHITESPACE"," ",361],"{",["T_WHITESPACE","\n                ",361],["T_VARIABLE","$message",362],["T_WHITESPACE"," ",362],"=",["T_WHITESPACE"," ",362],["T_ISSET","isset",362],"(",["T_VARIABLE","$resultArray",362],"[",["T_CONSTANT_ENCAPSED_STRING","'message'",362],"]",")",["T_WHITESPACE"," ",362],"?",["T_WHITESPACE"," ",362],["T_VARIABLE","$resultArray",362],"[",["T_CONSTANT_ENCAPSED_STRING","'message'",362],"]",":",["T_WHITESPACE"," ",362],["T_CONSTANT_ENCAPSED_STRING","''",362],";",["T_WHITESPACE","\n                ",362],["T_IF","if",363],["T_WHITESPACE"," ",363],"(",["T_STRING","is_array",363],"(",["T_VARIABLE","$message",363],")",")",["T_WHITESPACE"," ",363],"{",["T_WHITESPACE","\n                    ",363],["T_VARIABLE","$message",364],["T_WHITESPACE"," ",364],"=",["T_WHITESPACE"," ",364],["T_STRING","implode",364],"(",["T_CONSTANT_ENCAPSED_STRING","' ,'",364],",",["T_WHITESPACE"," ",364],["T_VARIABLE","$message",364],")",";",["T_WHITESPACE","\n                ",364],"}",["T_WHITESPACE","\n\n                ",365],["T_IF","if",367],["T_WHITESPACE"," ",367],"(",["T_ISSET","isset",367],"(",["T_VARIABLE","$params",367],"[",["T_CONSTANT_ENCAPSED_STRING","'resubmission_activation_key'",367],"]",")",")",["T_WHITESPACE"," ",367],"{",["T_WHITESPACE","\n                    ",367],["T_VARIABLE","$message",368],["T_WHITESPACE"," ",368],"=",["T_WHITESPACE"," ",368],["T_VARIABLE","$this",368],["T_OBJECT_OPERATOR","->",368],["T_STRING","__",368],"(",["T_CONSTANT_ENCAPSED_STRING","'Resubmit App failure. %s'",368],",",["T_WHITESPACE"," ",368],["T_VARIABLE","$message",368],")",";",["T_WHITESPACE","\n                ",368],"}",["T_WHITESPACE"," ",369],["T_ELSE","else",369],["T_WHITESPACE"," ",369],"{",["T_WHITESPACE","\n                    ",369],["T_VARIABLE","$message",370],["T_WHITESPACE"," ",370],"=",["T_WHITESPACE"," ",370],["T_VARIABLE","$this",370],["T_OBJECT_OPERATOR","->",370],["T_STRING","__",370],"(",["T_CONSTANT_ENCAPSED_STRING","'Submit App failure. %s'",370],",",["T_WHITESPACE"," ",370],["T_VARIABLE","$message",370],")",";",["T_WHITESPACE","\n                ",370],"}",["T_WHITESPACE","\n\n                ",371],["T_STRING","Mage",373],["T_DOUBLE_COLON","::",373],["T_STRING","throwException",373],"(",["T_VARIABLE","$message",373],")",";",["T_WHITESPACE","\n            ",373],"}",["T_WHITESPACE","\n        ",374],"}",["T_WHITESPACE"," ",375],["T_CATCH","catch",375],["T_WHITESPACE"," ",375],"(",["T_STRING","Exception",375],["T_WHITESPACE"," ",375],["T_VARIABLE","$e",375],")",["T_WHITESPACE"," ",375],"{",["T_WHITESPACE","\n            ",375],["T_THROW","throw",376],["T_WHITESPACE"," ",376],["T_VARIABLE","$e",376],";",["T_WHITESPACE","\n        ",376],"}",["T_WHITESPACE","\n    ",377],"}",["T_WHITESPACE","\n\n    ",378],["T_DOC_COMMENT","\/**\n     * Save action\n     *\n     * @return null\n     *\/",380],["T_WHITESPACE","\n    ",384],["T_PUBLIC","public",385],["T_WHITESPACE"," ",385],["T_FUNCTION","function",385],["T_WHITESPACE"," ",385],["T_STRING","saveAction",385],"(",")",["T_WHITESPACE","\n    ",385],"{",["T_WHITESPACE","\n        ",386],["T_VARIABLE","$data",387],["T_WHITESPACE"," ",387],"=",["T_WHITESPACE"," ",387],["T_VARIABLE","$this",387],["T_OBJECT_OPERATOR","->",387],["T_STRING","getRequest",387],"(",")",["T_OBJECT_OPERATOR","->",387],["T_STRING","getPost",387],"(",")",";",["T_WHITESPACE","\n        ",387],["T_VARIABLE","$redirectSubmit",388],["T_WHITESPACE"," ",388],"=",["T_WHITESPACE"," ",388],["T_VARIABLE","$this",388],["T_OBJECT_OPERATOR","->",388],["T_STRING","getRequest",388],"(",")",["T_OBJECT_OPERATOR","->",388],["T_STRING","getParam",388],"(",["T_CONSTANT_ENCAPSED_STRING","'submitapp'",388],",",["T_WHITESPACE"," ",388],["T_STRING","false",388],")",";",["T_WHITESPACE","\n        ",388],["T_VARIABLE","$app",389],["T_WHITESPACE"," ",389],"=",["T_WHITESPACE"," ",389],["T_STRING","false",389],";",["T_WHITESPACE","\n        ",389],["T_VARIABLE","$isError",390],["T_WHITESPACE"," ",390],"=",["T_WHITESPACE"," ",390],["T_STRING","false",390],";",["T_WHITESPACE","\n        ",390],["T_IF","if",391],["T_WHITESPACE"," ",391],"(",["T_VARIABLE","$data",391],")",["T_WHITESPACE"," ",391],"{",["T_WHITESPACE","\n            ",391],["T_STRING","Mage",392],["T_DOUBLE_COLON","::",392],["T_STRING","getSingleton",392],"(",["T_CONSTANT_ENCAPSED_STRING","'adminhtml\/session'",392],")",["T_OBJECT_OPERATOR","->",392],["T_STRING","setFormData",392],"(",["T_VARIABLE","$data",392],")",";",["T_WHITESPACE","\n            ",392],["T_TRY","try",393],["T_WHITESPACE"," ",393],"{",["T_WHITESPACE","\n                ",393],["T_VARIABLE","$id",394],["T_WHITESPACE"," ",394],"=",["T_WHITESPACE"," ",394],["T_INT_CAST","(int)",394],["T_WHITESPACE"," ",394],["T_VARIABLE","$this",394],["T_OBJECT_OPERATOR","->",394],["T_STRING","getRequest",394],"(",")",["T_OBJECT_OPERATOR","->",394],["T_STRING","getParam",394],"(",["T_CONSTANT_ENCAPSED_STRING","'application_id'",394],")",";",["T_WHITESPACE","\n\n                ",394],["T_IF","if",396],["T_WHITESPACE"," ",396],"(","!",["T_VARIABLE","$id",396],["T_WHITESPACE"," ",396],["T_BOOLEAN_AND","&&",396],["T_WHITESPACE"," ",396],["T_ISSET","isset",396],"(",["T_VARIABLE","$data",396],"[",["T_CONSTANT_ENCAPSED_STRING","'devtype'",396],"]",")",")",["T_WHITESPACE"," ",396],"{",["T_WHITESPACE","\n                    ",396],["T_VARIABLE","$devArray",397],["T_WHITESPACE"," ",397],"=",["T_WHITESPACE"," ",397],["T_STRING","Mage",397],["T_DOUBLE_COLON","::",397],["T_STRING","helper",397],"(",["T_CONSTANT_ENCAPSED_STRING","'xmlconnect'",397],")",["T_OBJECT_OPERATOR","->",397],["T_STRING","getSupportedDevices",397],"(",")",";",["T_WHITESPACE","\n                    ",397],["T_IF","if",398],["T_WHITESPACE"," ",398],"(","!",["T_STRING","array_key_exists",398],"(",["T_VARIABLE","$data",398],"[",["T_CONSTANT_ENCAPSED_STRING","'devtype'",398],"]",",",["T_WHITESPACE"," ",398],["T_VARIABLE","$devArray",398],")",")",["T_WHITESPACE"," ",398],"{",["T_WHITESPACE","\n                        ",398],["T_VARIABLE","$this",399],["T_OBJECT_OPERATOR","->",399],["T_STRING","_getSession",399],"(",")",["T_OBJECT_OPERATOR","->",399],["T_STRING","addError",399],"(",["T_VARIABLE","$this",399],["T_OBJECT_OPERATOR","->",399],["T_STRING","__",399],"(",["T_CONSTANT_ENCAPSED_STRING","'Wrong device type.'",399],")",")",";",["T_WHITESPACE","\n                        ",399],["T_VARIABLE","$isError",400],["T_WHITESPACE"," ",400],"=",["T_WHITESPACE"," ",400],["T_STRING","true",400],";",["T_WHITESPACE","\n                    ",400],"}",["T_WHITESPACE","\n                ",401],"}",["T_WHITESPACE","\n                ",402],["T_DOC_COMMENT","\/** @var $app Mage_XmlConnect_Model_Application *\/",403],["T_WHITESPACE","\n                ",403],["T_VARIABLE","$app",404],["T_WHITESPACE"," ",404],"=",["T_WHITESPACE"," ",404],["T_VARIABLE","$this",404],["T_OBJECT_OPERATOR","->",404],["T_STRING","_initApp",404],"(",["T_CONSTANT_ENCAPSED_STRING","'application_id'",404],",",["T_WHITESPACE"," ",404],["T_VARIABLE","$data",404],"[",["T_CONSTANT_ENCAPSED_STRING","'devtype'",404],"]",")",";",["T_WHITESPACE","\n                ",404],["T_IF","if",405],["T_WHITESPACE"," ",405],"(","!",["T_VARIABLE","$app",405],["T_OBJECT_OPERATOR","->",405],["T_STRING","getId",405],"(",")",["T_WHITESPACE"," ",405],["T_BOOLEAN_AND","&&",405],["T_WHITESPACE"," ",405],["T_VARIABLE","$id",405],")",["T_WHITESPACE"," ",405],"{",["T_WHITESPACE","\n                    ",405],["T_VARIABLE","$this",406],["T_OBJECT_OPERATOR","->",406],["T_STRING","_getSession",406],"(",")",["T_OBJECT_OPERATOR","->",406],["T_STRING","addError",406],"(",["T_VARIABLE","$this",406],["T_OBJECT_OPERATOR","->",406],["T_STRING","__",406],"(",["T_CONSTANT_ENCAPSED_STRING","'App does not exist.'",406],")",")",";",["T_WHITESPACE","\n                    ",406],["T_VARIABLE","$this",407],["T_OBJECT_OPERATOR","->",407],["T_STRING","_redirect",407],"(",["T_CONSTANT_ENCAPSED_STRING","'*\/*\/'",407],")",";",["T_WHITESPACE","\n                    ",407],["T_RETURN","return",408],";",["T_WHITESPACE","\n                ",408],"}",["T_WHITESPACE","\n                ",409],["T_VARIABLE","$app",410],["T_OBJECT_OPERATOR","->",410],["T_STRING","addData",410],"(",["T_VARIABLE","$this",410],["T_OBJECT_OPERATOR","->",410],["T_STRING","_preparePostData",410],"(",["T_VARIABLE","$data",410],")",")",";",["T_WHITESPACE","\n                ",410],["T_VARIABLE","$app",411],["T_OBJECT_OPERATOR","->",411],["T_STRING","addData",411],"(",["T_VARIABLE","$this",411],["T_OBJECT_OPERATOR","->",411],["T_STRING","_processUploadedFiles",411],"(",["T_VARIABLE","$app",411],["T_OBJECT_OPERATOR","->",411],["T_STRING","getData",411],"(",")",")",")",";",["T_WHITESPACE","\n                ",411],["T_VARIABLE","$errors",412],["T_WHITESPACE"," ",412],"=",["T_WHITESPACE"," ",412],["T_VARIABLE","$app",412],["T_OBJECT_OPERATOR","->",412],["T_STRING","validate",412],"(",")",";",["T_WHITESPACE","\n\n                ",412],["T_IF","if",414],["T_WHITESPACE"," ",414],"(",["T_VARIABLE","$errors",414],["T_WHITESPACE"," ",414],["T_IS_NOT_IDENTICAL","!==",414],["T_WHITESPACE"," ",414],["T_STRING","true",414],")",["T_WHITESPACE"," ",414],"{",["T_WHITESPACE","\n                    ",414],["T_FOREACH","foreach",415],["T_WHITESPACE"," ",415],"(",["T_VARIABLE","$errors",415],["T_WHITESPACE"," ",415],["T_AS","as",415],["T_WHITESPACE"," ",415],["T_VARIABLE","$err",415],")",["T_WHITESPACE"," ",415],"{",["T_WHITESPACE","\n                        ",415],["T_VARIABLE","$this",416],["T_OBJECT_OPERATOR","->",416],["T_STRING","_getSession",416],"(",")",["T_OBJECT_OPERATOR","->",416],["T_STRING","addError",416],"(",["T_VARIABLE","$err",416],")",";",["T_WHITESPACE","\n                    ",416],"}",["T_WHITESPACE","\n                    ",417],["T_VARIABLE","$isError",418],["T_WHITESPACE"," ",418],"=",["T_WHITESPACE"," ",418],["T_STRING","true",418],";",["T_WHITESPACE","\n                ",418],"}",["T_WHITESPACE","\n\n                ",419],["T_IF","if",421],["T_WHITESPACE"," ",421],"(","!",["T_VARIABLE","$isError",421],")",["T_WHITESPACE"," ",421],"{",["T_WHITESPACE","\n                    ",421],["T_VARIABLE","$this",422],["T_OBJECT_OPERATOR","->",422],["T_STRING","_saveThemeAction",422],"(",["T_VARIABLE","$data",422],",",["T_WHITESPACE"," ",422],["T_CONSTANT_ENCAPSED_STRING","'current_theme'",422],")",";",["T_WHITESPACE","\n                    ",422],["T_VARIABLE","$app",423],["T_OBJECT_OPERATOR","->",423],["T_STRING","save",423],"(",")",";",["T_WHITESPACE","\n                    ",423],["T_VARIABLE","$this",424],["T_OBJECT_OPERATOR","->",424],["T_STRING","_getSession",424],"(",")",["T_OBJECT_OPERATOR","->",424],["T_STRING","addSuccess",424],"(",["T_VARIABLE","$this",424],["T_OBJECT_OPERATOR","->",424],["T_STRING","__",424],"(",["T_CONSTANT_ENCAPSED_STRING","'App has been saved.'",424],")",")",";",["T_WHITESPACE","\n                    ",424],["T_VARIABLE","$this",425],["T_OBJECT_OPERATOR","->",425],["T_STRING","_clearSessionData",425],"(",")",";",["T_WHITESPACE","\n                ",425],"}",["T_WHITESPACE","\n            ",426],"}",["T_WHITESPACE"," ",427],["T_CATCH","catch",427],["T_WHITESPACE"," ",427],"(",["T_STRING","Mage_Core_Exception",427],["T_WHITESPACE"," ",427],["T_VARIABLE","$e",427],")",["T_WHITESPACE"," ",427],"{",["T_WHITESPACE","\n                ",427],["T_VARIABLE","$this",428],["T_OBJECT_OPERATOR","->",428],["T_STRING","_getSession",428],"(",")",["T_OBJECT_OPERATOR","->",428],["T_STRING","addException",428],"(",["T_VARIABLE","$e",428],",",["T_WHITESPACE"," ",428],["T_VARIABLE","$e",428],["T_OBJECT_OPERATOR","->",428],["T_STRING","getMessage",428],"(",")",")",";",["T_WHITESPACE","\n                ",428],["T_VARIABLE","$isError",429],["T_WHITESPACE"," ",429],"=",["T_WHITESPACE"," ",429],["T_STRING","true",429],";",["T_WHITESPACE","\n            ",429],"}",["T_WHITESPACE"," ",430],["T_CATCH","catch",430],["T_WHITESPACE"," ",430],"(",["T_STRING","Exception",430],["T_WHITESPACE"," ",430],["T_VARIABLE","$e",430],")",["T_WHITESPACE"," ",430],"{",["T_WHITESPACE","\n                ",430],["T_VARIABLE","$this",431],["T_OBJECT_OPERATOR","->",431],["T_STRING","_getSession",431],"(",")",["T_OBJECT_OPERATOR","->",431],["T_STRING","addException",431],"(",["T_VARIABLE","$e",431],",",["T_WHITESPACE"," ",431],["T_VARIABLE","$this",431],["T_OBJECT_OPERATOR","->",431],["T_STRING","__",431],"(",["T_CONSTANT_ENCAPSED_STRING","'Unable to save app.'",431],")",")",";",["T_WHITESPACE","\n                ",431],["T_VARIABLE","$isError",432],["T_WHITESPACE"," ",432],"=",["T_WHITESPACE"," ",432],["T_STRING","true",432],";",["T_WHITESPACE","\n                ",432],["T_STRING","Mage",433],["T_DOUBLE_COLON","::",433],["T_STRING","logException",433],"(",["T_VARIABLE","$e",433],")",";",["T_WHITESPACE","\n            ",433],"}",["T_WHITESPACE","\n        ",434],"}",["T_WHITESPACE","\n        ",435],["T_VARIABLE","$isApplication",436],["T_WHITESPACE"," ",436],"=",["T_WHITESPACE"," ",436],["T_VARIABLE","$app",436],["T_WHITESPACE"," ",436],["T_INSTANCEOF","instanceof",436],["T_WHITESPACE"," ",436],["T_STRING","Mage_XmlConnect_Model_Application",436],";",["T_WHITESPACE","\n        ",436],["T_IF","if",437],["T_WHITESPACE"," ",437],"(","!",["T_VARIABLE","$isError",437],["T_WHITESPACE"," ",437],["T_BOOLEAN_AND","&&",437],["T_WHITESPACE"," ",437],["T_VARIABLE","$isApplication",437],["T_WHITESPACE"," ",437],["T_BOOLEAN_AND","&&",437],["T_WHITESPACE"," ",437],["T_VARIABLE","$app",437],["T_OBJECT_OPERATOR","->",437],["T_STRING","getId",437],"(",")",["T_WHITESPACE"," ",437],["T_BOOLEAN_AND","&&",437],["T_WHITESPACE"," ",437],["T_VARIABLE","$redirectSubmit",437],")",["T_WHITESPACE"," ",437],"{",["T_WHITESPACE","\n            ",437],["T_VARIABLE","$this",438],["T_OBJECT_OPERATOR","->",438],["T_STRING","_redirect",438],"(",["T_CONSTANT_ENCAPSED_STRING","'*\/*\/submission'",438],",",["T_WHITESPACE"," ",438],["T_ARRAY","array",438],"(",["T_CONSTANT_ENCAPSED_STRING","'application_id'",438],["T_WHITESPACE"," ",438],["T_DOUBLE_ARROW","=>",438],["T_WHITESPACE"," ",438],["T_VARIABLE","$app",438],["T_OBJECT_OPERATOR","->",438],["T_STRING","getId",438],"(",")",")",")",";",["T_WHITESPACE","\n        ",438],"}",["T_WHITESPACE"," ",439],["T_ELSE","else",439],["T_WHITESPACE"," ",439],["T_IF","if",439],["T_WHITESPACE"," ",439],"(",["T_VARIABLE","$isError",439],["T_WHITESPACE"," ",439],["T_BOOLEAN_AND","&&",439],["T_WHITESPACE"," ",439],["T_VARIABLE","$isApplication",439],["T_WHITESPACE"," ",439],["T_BOOLEAN_AND","&&",439],["T_WHITESPACE"," ",439],["T_VARIABLE","$app",439],["T_OBJECT_OPERATOR","->",439],["T_STRING","getId",439],"(",")",")",["T_WHITESPACE"," ",439],"{",["T_WHITESPACE","\n            ",439],["T_STRING","Mage",440],["T_DOUBLE_COLON","::",440],["T_STRING","getSingleton",440],"(",["T_CONSTANT_ENCAPSED_STRING","'adminhtml\/session'",440],")",["T_OBJECT_OPERATOR","->",440],["T_STRING","setLoadSessionFlag",440],"(",["T_STRING","true",440],")",";",["T_WHITESPACE","\n            ",440],["T_VARIABLE","$this",441],["T_OBJECT_OPERATOR","->",441],["T_STRING","_redirect",441],"(",["T_CONSTANT_ENCAPSED_STRING","'*\/*\/edit'",441],",",["T_WHITESPACE"," ",441],["T_ARRAY","array",441],"(",["T_CONSTANT_ENCAPSED_STRING","'application_id'",441],["T_WHITESPACE"," ",441],["T_DOUBLE_ARROW","=>",441],["T_WHITESPACE"," ",441],["T_VARIABLE","$app",441],["T_OBJECT_OPERATOR","->",441],["T_STRING","getId",441],"(",")",")",")",";",["T_WHITESPACE","\n        ",441],"}",["T_WHITESPACE"," ",442],["T_ELSE","else",442],["T_WHITESPACE"," ",442],["T_IF","if",442],["T_WHITESPACE"," ",442],"(",["T_VARIABLE","$isError",442],["T_WHITESPACE"," ",442],["T_BOOLEAN_AND","&&",442],["T_WHITESPACE"," ",442],["T_VARIABLE","$isApplication",442],["T_WHITESPACE"," ",442],["T_BOOLEAN_AND","&&",442],["T_WHITESPACE"," ",442],"!",["T_VARIABLE","$app",442],["T_OBJECT_OPERATOR","->",442],["T_STRING","getId",442],"(",")",["T_WHITESPACE"," ",442],["T_BOOLEAN_AND","&&",442],["T_WHITESPACE"," ",442],["T_VARIABLE","$app",442],["T_OBJECT_OPERATOR","->",442],["T_STRING","getType",442],"(",")",")",["T_WHITESPACE"," ",442],"{",["T_WHITESPACE","\n            ",442],["T_VARIABLE","$this",443],["T_OBJECT_OPERATOR","->",443],["T_STRING","_redirect",443],"(",["T_CONSTANT_ENCAPSED_STRING","'*\/*\/edit'",443],",",["T_WHITESPACE"," ",443],["T_ARRAY","array",443],"(",["T_CONSTANT_ENCAPSED_STRING","'type'",443],["T_WHITESPACE"," ",443],["T_DOUBLE_ARROW","=>",443],["T_WHITESPACE"," ",443],["T_VARIABLE","$app",443],["T_OBJECT_OPERATOR","->",443],["T_STRING","getType",443],"(",")",")",")",";",["T_WHITESPACE","\n        ",443],"}",["T_WHITESPACE"," ",444],["T_ELSE","else",444],["T_WHITESPACE"," ",444],["T_IF","if",444],["T_WHITESPACE"," ",444],"(",["T_VARIABLE","$this",444],["T_OBJECT_OPERATOR","->",444],["T_STRING","getRequest",444],"(",")",["T_OBJECT_OPERATOR","->",444],["T_STRING","getParam",444],"(",["T_CONSTANT_ENCAPSED_STRING","'back'",444],")",["T_WHITESPACE"," ",444],["T_BOOLEAN_AND","&&",444],["T_WHITESPACE"," ",444],["T_VARIABLE","$isApplication",444],")",["T_WHITESPACE"," ",444],"{",["T_WHITESPACE","\n            ",444],["T_VARIABLE","$this",445],["T_OBJECT_OPERATOR","->",445],["T_STRING","_redirect",445],"(",["T_CONSTANT_ENCAPSED_STRING","'*\/*\/edit'",445],",",["T_WHITESPACE"," ",445],["T_ARRAY","array",445],"(",["T_CONSTANT_ENCAPSED_STRING","'application_id'",445],["T_WHITESPACE"," ",445],["T_DOUBLE_ARROW","=>",445],["T_WHITESPACE"," ",445],["T_VARIABLE","$app",445],["T_OBJECT_OPERATOR","->",445],["T_STRING","getId",445],"(",")",")",")",";",["T_WHITESPACE","\n        ",445],"}",["T_WHITESPACE"," ",446],["T_ELSE","else",446],["T_WHITESPACE"," ",446],"{",["T_WHITESPACE","\n            ",446],["T_VARIABLE","$this",447],["T_OBJECT_OPERATOR","->",447],["T_STRING","_redirect",447],"(",["T_CONSTANT_ENCAPSED_STRING","'*\/*\/'",447],")",";",["T_WHITESPACE","\n        ",447],"}",["T_WHITESPACE","\n    ",448],"}",["T_WHITESPACE","\n\n    ",449],["T_DOC_COMMENT","\/**\n     * Save changes to theme\n     *\n     * @param array     $data\n     * @param string    $paramId\n     *\/",451],["T_WHITESPACE","\n    ",456],["T_PROTECTED","protected",457],["T_WHITESPACE"," ",457],["T_FUNCTION","function",457],["T_WHITESPACE"," ",457],["T_STRING","_saveThemeAction",457],"(",["T_VARIABLE","$data",457],",",["T_WHITESPACE"," ",457],["T_VARIABLE","$paramId",457],["T_WHITESPACE"," ",457],"=",["T_WHITESPACE"," ",457],["T_CONSTANT_ENCAPSED_STRING","'saveTheme'",457],")",["T_WHITESPACE","\n    ",457],"{",["T_WHITESPACE","\n        ",458],["T_VARIABLE","$themeName",459],["T_WHITESPACE"," ",459],"=",["T_WHITESPACE"," ",459],["T_STRING","trim",459],"(",["T_VARIABLE","$this",459],["T_OBJECT_OPERATOR","->",459],["T_STRING","getRequest",459],"(",")",["T_OBJECT_OPERATOR","->",459],["T_STRING","getParam",459],"(",["T_VARIABLE","$paramId",459],",",["T_WHITESPACE"," ",459],["T_STRING","false",459],")",")",";",["T_WHITESPACE","\n        ",459],["T_IF","if",460],["T_WHITESPACE"," ",460],"(",["T_VARIABLE","$themeName",460],")",["T_WHITESPACE"," ",460],"{",["T_WHITESPACE","\n            ",460],["T_DOC_COMMENT","\/** @var $themesHelper Mage_XmlConnect_Helper_Theme *\/",461],["T_WHITESPACE","\n            ",461],["T_VARIABLE","$themesHelper",462],["T_WHITESPACE"," ",462],"=",["T_WHITESPACE"," ",462],["T_STRING","Mage",462],["T_DOUBLE_COLON","::",462],["T_STRING","helper",462],"(",["T_CONSTANT_ENCAPSED_STRING","'xmlconnect\/theme'",462],")",";",["T_WHITESPACE","\n            ",462],["T_TRY","try",463],["T_WHITESPACE"," ",463],"{",["T_WHITESPACE","\n                ",463],["T_IF","if",464],["T_WHITESPACE"," ",464],"(",["T_STRING","array_key_exists",464],"(",["T_VARIABLE","$themeName",464],",",["T_WHITESPACE"," ",464],["T_VARIABLE","$themesHelper",464],["T_OBJECT_OPERATOR","->",464],["T_STRING","getAllThemes",464],"(",")",")",")",["T_WHITESPACE"," ",464],"{",["T_WHITESPACE","\n                    ",464],["T_DOC_COMMENT","\/** @var $theme Mage_XmlConnect_Model_Theme *\/",465],["T_WHITESPACE","\n                    ",465],["T_VARIABLE","$theme",466],["T_WHITESPACE"," ",466],"=",["T_WHITESPACE"," ",466],["T_VARIABLE","$themesHelper",466],["T_OBJECT_OPERATOR","->",466],["T_STRING","getThemeByName",466],"(",["T_VARIABLE","$themeName",466],")",";",["T_WHITESPACE","\n                    ",466],["T_IF","if",467],["T_WHITESPACE"," ",467],"(",["T_VARIABLE","$theme",467],["T_WHITESPACE"," ",467],["T_INSTANCEOF","instanceof",467],["T_WHITESPACE"," ",467],["T_STRING","Mage_XmlConnect_Model_Theme",467],")",["T_WHITESPACE"," ",467],"{",["T_WHITESPACE","\n                        ",467],["T_IF","if",468],["T_WHITESPACE"," ",468],"(",["T_VARIABLE","$paramId",468],["T_WHITESPACE"," ",468],["T_IS_EQUAL","==",468],["T_WHITESPACE"," ",468],["T_CONSTANT_ENCAPSED_STRING","'saveTheme'",468],")",["T_WHITESPACE"," ",468],"{",["T_WHITESPACE","\n                            ",468],["T_VARIABLE","$convertedConf",469],["T_WHITESPACE"," ",469],"=",["T_WHITESPACE"," ",469],["T_VARIABLE","$this",469],["T_OBJECT_OPERATOR","->",469],["T_STRING","_convertPost",469],"(",["T_VARIABLE","$data",469],")",";",["T_WHITESPACE","\n                        ",469],"}",["T_WHITESPACE"," ",470],["T_ELSE","else",470],["T_WHITESPACE"," ",470],"{",["T_WHITESPACE","\n                            ",470],["T_IF","if",471],["T_WHITESPACE"," ",471],"(",["T_ISSET","isset",471],"(",["T_VARIABLE","$data",471],"[",["T_CONSTANT_ENCAPSED_STRING","'conf'",471],"]",")",")",["T_WHITESPACE"," ",471],"{",["T_WHITESPACE","\n                                ",471],["T_VARIABLE","$convertedConf",472],["T_WHITESPACE"," ",472],"=",["T_WHITESPACE"," ",472],["T_VARIABLE","$data",472],"[",["T_CONSTANT_ENCAPSED_STRING","'conf'",472],"]",";",["T_WHITESPACE","\n                            ",472],"}",["T_WHITESPACE"," ",473],["T_ELSE","else",473],["T_WHITESPACE"," ",473],"{",["T_WHITESPACE","\n                                ",473],["T_VARIABLE","$response",474],["T_WHITESPACE"," ",474],"=",["T_WHITESPACE"," ",474],["T_ARRAY","array",474],"(",["T_WHITESPACE","\n                                    ",474],["T_CONSTANT_ENCAPSED_STRING","'error'",475],["T_WHITESPACE"," ",475],["T_DOUBLE_ARROW","=>",475],["T_WHITESPACE"," ",475],["T_STRING","true",475],",",["T_WHITESPACE","\n                                    ",475],["T_CONSTANT_ENCAPSED_STRING","'message'",476],["T_WHITESPACE"," ",476],["T_DOUBLE_ARROW","=>",476],["T_WHITESPACE"," ",476],["T_VARIABLE","$this",476],["T_OBJECT_OPERATOR","->",476],["T_STRING","__",476],"(",["T_CONSTANT_ENCAPSED_STRING","'Cannot save theme \"%s\". Incorrect data received'",476],",",["T_WHITESPACE"," ",476],["T_VARIABLE","$themeName",476],")",["T_WHITESPACE","\n                                ",476],")",";",["T_WHITESPACE","\n                            ",477],"}",["T_WHITESPACE","\n                        ",478],"}",["T_WHITESPACE","\n                        ",479],["T_IF","if",480],["T_WHITESPACE"," ",480],"(","!",["T_ISSET","isset",480],"(",["T_VARIABLE","$response",480],")",")",["T_WHITESPACE"," ",480],"{",["T_WHITESPACE","\n                            ",480],["T_VARIABLE","$theme",481],["T_OBJECT_OPERATOR","->",481],["T_STRING","importAndSaveData",481],"(",["T_VARIABLE","$convertedConf",481],")",";",["T_WHITESPACE","\n                            ",481],["T_VARIABLE","$response",482],["T_WHITESPACE"," ",482],"=",["T_WHITESPACE"," ",482],["T_ARRAY","array",482],"(",["T_WHITESPACE","\n                                ",482],["T_CONSTANT_ENCAPSED_STRING","'message'",483],["T_WHITESPACE","   ",483],["T_DOUBLE_ARROW","=>",483],["T_WHITESPACE"," ",483],["T_VARIABLE","$this",483],["T_OBJECT_OPERATOR","->",483],["T_STRING","__",483],"(",["T_CONSTANT_ENCAPSED_STRING","'Changes have been saved to theme.'",483],")",",",["T_WHITESPACE","\n                                ",483],["T_CONSTANT_ENCAPSED_STRING","'themes'",484],["T_WHITESPACE","    ",484],["T_DOUBLE_ARROW","=>",484],["T_WHITESPACE"," ",484],["T_VARIABLE","$themesHelper",484],["T_OBJECT_OPERATOR","->",484],["T_STRING","getAllThemesArray",484],"(",["T_STRING","true",484],")",",",["T_WHITESPACE","\n                                ",484],["T_CONSTANT_ENCAPSED_STRING","'themeSelector'",485],["T_WHITESPACE"," ",485],["T_DOUBLE_ARROW","=>",485],["T_WHITESPACE"," ",485],["T_VARIABLE","$themesHelper",485],["T_OBJECT_OPERATOR","->",485],["T_STRING","getThemesSelector",485],"(",["T_VARIABLE","$themeName",485],")",",",["T_WHITESPACE","\n                                ",485],["T_CONSTANT_ENCAPSED_STRING","'selectedTheme'",486],["T_WHITESPACE"," ",486],["T_DOUBLE_ARROW","=>",486],["T_WHITESPACE"," ",486],["T_VARIABLE","$themeName",486],["T_WHITESPACE","\n                            ",486],")",";",["T_WHITESPACE","\n                        ",487],"}",["T_WHITESPACE","\n                    ",488],"}",["T_WHITESPACE"," ",489],["T_ELSE","else",489],["T_WHITESPACE"," ",489],"{",["T_WHITESPACE","\n                        ",489],["T_VARIABLE","$response",490],["T_WHITESPACE"," ",490],"=",["T_WHITESPACE"," ",490],["T_ARRAY","array",490],"(",["T_CONSTANT_ENCAPSED_STRING","'error'",490],["T_WHITESPACE"," ",490],["T_DOUBLE_ARROW","=>",490],["T_WHITESPACE"," ",490],["T_STRING","true",490],",",["T_WHITESPACE"," ",490],["T_CONSTANT_ENCAPSED_STRING","'message'",490],["T_WHITESPACE"," ",490],["T_DOUBLE_ARROW","=>",490],["T_WHITESPACE"," ",490],["T_VARIABLE","$this",490],["T_OBJECT_OPERATOR","->",490],["T_STRING","__",490],"(",["T_CONSTANT_ENCAPSED_STRING","'Cannot load theme \"%s\".'",490],",",["T_WHITESPACE"," ",490],["T_VARIABLE","$themeName",490],")",")",";",["T_WHITESPACE","\n                    ",490],"}",["T_WHITESPACE","\n                ",491],"}",["T_WHITESPACE"," ",492],["T_ELSE","else",492],["T_WHITESPACE"," ",492],"{",["T_WHITESPACE","\n                    ",492],["T_VARIABLE","$convertedConf",493],["T_WHITESPACE"," ",493],"=",["T_WHITESPACE"," ",493],["T_VARIABLE","$this",493],["T_OBJECT_OPERATOR","->",493],["T_STRING","_convertPost",493],"(",["T_VARIABLE","$data",493],")",";",["T_WHITESPACE","\n                    ",493],["T_VARIABLE","$newTheme",494],["T_WHITESPACE"," ",494],"=",["T_WHITESPACE"," ",494],["T_VARIABLE","$themesHelper",494],["T_OBJECT_OPERATOR","->",494],["T_STRING","createNewTheme",494],"(",["T_VARIABLE","$themeName",494],",",["T_WHITESPACE"," ",494],["T_VARIABLE","$convertedConf",494],")",";",["T_WHITESPACE","\n                    ",494],["T_VARIABLE","$response",495],["T_WHITESPACE"," ",495],"=",["T_WHITESPACE"," ",495],["T_ARRAY","array",495],"(",["T_WHITESPACE","\n                        ",495],["T_CONSTANT_ENCAPSED_STRING","'message'",496],["T_WHITESPACE","       ",496],["T_DOUBLE_ARROW","=>",496],["T_WHITESPACE"," ",496],["T_VARIABLE","$this",496],["T_OBJECT_OPERATOR","->",496],["T_STRING","__",496],"(",["T_CONSTANT_ENCAPSED_STRING","'Theme has been created.'",496],")",",",["T_WHITESPACE","\n                        ",496],["T_CONSTANT_ENCAPSED_STRING","'themes'",497],["T_WHITESPACE","        ",497],["T_DOUBLE_ARROW","=>",497],["T_WHITESPACE"," ",497],["T_VARIABLE","$themesHelper",497],["T_OBJECT_OPERATOR","->",497],["T_STRING","getAllThemesArray",497],"(",["T_STRING","true",497],")",",",["T_WHITESPACE","\n                        ",497],["T_CONSTANT_ENCAPSED_STRING","'themeSelector'",498],["T_WHITESPACE"," ",498],["T_DOUBLE_ARROW","=>",498],["T_WHITESPACE"," ",498],["T_VARIABLE","$themesHelper",498],["T_OBJECT_OPERATOR","->",498],["T_STRING","getThemesSelector",498],"(",["T_VARIABLE","$newTheme",498],["T_OBJECT_OPERATOR","->",498],["T_STRING","getName",498],"(",")",")",",",["T_WHITESPACE","\n                        ",498],["T_CONSTANT_ENCAPSED_STRING","'selectedTheme'",499],["T_WHITESPACE"," ",499],["T_DOUBLE_ARROW","=>",499],["T_WHITESPACE"," ",499],["T_VARIABLE","$newTheme",499],["T_OBJECT_OPERATOR","->",499],["T_STRING","getName",499],"(",")",["T_WHITESPACE","\n                    ",499],")",";",["T_WHITESPACE","\n                ",500],"}",["T_WHITESPACE","\n            ",501],"}",["T_WHITESPACE"," ",502],["T_CATCH","catch",502],["T_WHITESPACE"," ",502],"(",["T_STRING","Mage_Core_Exception",502],["T_WHITESPACE"," ",502],["T_VARIABLE","$e",502],")",["T_WHITESPACE"," ",502],"{",["T_WHITESPACE","\n                ",502],["T_VARIABLE","$response",503],["T_WHITESPACE"," ",503],"=",["T_WHITESPACE"," ",503],["T_ARRAY","array",503],"(",["T_CONSTANT_ENCAPSED_STRING","'error'",503],["T_WHITESPACE"," ",503],["T_DOUBLE_ARROW","=>",503],["T_WHITESPACE"," ",503],["T_STRING","true",503],",",["T_WHITESPACE"," ",503],["T_CONSTANT_ENCAPSED_STRING","'message'",503],["T_WHITESPACE"," ",503],["T_DOUBLE_ARROW","=>",503],["T_WHITESPACE"," ",503],["T_VARIABLE","$e",503],["T_OBJECT_OPERATOR","->",503],["T_STRING","getMessage",503],"(",")",")",";",["T_WHITESPACE","\n            ",503],"}",["T_WHITESPACE"," ",504],["T_CATCH","catch",504],["T_WHITESPACE"," ",504],"(",["T_STRING","Exception",504],["T_WHITESPACE"," ",504],["T_VARIABLE","$e",504],")",["T_WHITESPACE"," ",504],"{",["T_WHITESPACE","\n                ",504],["T_VARIABLE","$response",505],["T_WHITESPACE"," ",505],"=",["T_WHITESPACE"," ",505],["T_ARRAY","array",505],"(",["T_CONSTANT_ENCAPSED_STRING","'error'",505],["T_WHITESPACE"," ",505],["T_DOUBLE_ARROW","=>",505],["T_WHITESPACE"," ",505],["T_STRING","true",505],",",["T_WHITESPACE"," ",505],["T_CONSTANT_ENCAPSED_STRING","'message'",505],["T_WHITESPACE"," ",505],["T_DOUBLE_ARROW","=>",505],["T_WHITESPACE"," ",505],["T_VARIABLE","$this",505],["T_OBJECT_OPERATOR","->",505],["T_STRING","__",505],"(",["T_CONSTANT_ENCAPSED_STRING","'Can\\'t save theme.'",505],")",")",";",["T_WHITESPACE","\n            ",505],"}",["T_WHITESPACE","\n        ",506],"}",["T_WHITESPACE"," ",507],["T_ELSE","else",507],["T_WHITESPACE"," ",507],"{",["T_WHITESPACE","\n            ",507],["T_VARIABLE","$response",508],["T_WHITESPACE"," ",508],"=",["T_WHITESPACE"," ",508],["T_ARRAY","array",508],"(",["T_CONSTANT_ENCAPSED_STRING","'error'",508],["T_WHITESPACE"," ",508],["T_DOUBLE_ARROW","=>",508],["T_WHITESPACE"," ",508],["T_STRING","true",508],",",["T_WHITESPACE"," ",508],["T_CONSTANT_ENCAPSED_STRING","'message'",508],["T_WHITESPACE"," ",508],["T_DOUBLE_ARROW","=>",508],["T_WHITESPACE"," ",508],["T_VARIABLE","$this",508],["T_OBJECT_OPERATOR","->",508],["T_STRING","__",508],"(",["T_CONSTANT_ENCAPSED_STRING","'Theme name is not set.'",508],")",")",";",["T_WHITESPACE","\n        ",508],"}",["T_WHITESPACE","\n        ",509],["T_IF","if",510],["T_WHITESPACE"," ",510],"(",["T_STRING","is_array",510],"(",["T_VARIABLE","$response",510],")",")",["T_WHITESPACE"," ",510],"{",["T_WHITESPACE","\n            ",510],["T_VARIABLE","$response",511],["T_WHITESPACE"," ",511],"=",["T_WHITESPACE"," ",511],["T_STRING","Mage",511],["T_DOUBLE_COLON","::",511],["T_STRING","helper",511],"(",["T_CONSTANT_ENCAPSED_STRING","'core'",511],")",["T_OBJECT_OPERATOR","->",511],["T_STRING","jsonEncode",511],"(",["T_VARIABLE","$response",511],")",";",["T_WHITESPACE","\n            ",511],["T_VARIABLE","$this",512],["T_OBJECT_OPERATOR","->",512],["T_STRING","getResponse",512],"(",")",["T_OBJECT_OPERATOR","->",512],["T_STRING","setBody",512],"(",["T_VARIABLE","$response",512],")",";",["T_WHITESPACE","\n        ",512],"}",["T_WHITESPACE","\n    ",513],"}",["T_WHITESPACE","\n\n    ",514],["T_DOC_COMMENT","\/**\n     * Converts native Ajax data from flat to real array\n     * Convert array key->value pairs inside array like:\n     * \"conf_native_bar_tintcolor\" => $val   to   $conf['native']['bar']['tintcolor'] => $val\n     *\n     * @param array $data $_POST\n     * @return array\n     *\/",516],["T_WHITESPACE","\n    ",523],["T_PROTECTED","protected",524],["T_WHITESPACE"," ",524],["T_FUNCTION","function",524],["T_WHITESPACE"," ",524],["T_STRING","_convertPost",524],"(",["T_VARIABLE","$data",524],")",["T_WHITESPACE","\n    ",524],"{",["T_WHITESPACE","\n        ",525],["T_VARIABLE","$conf",526],["T_WHITESPACE"," ",526],"=",["T_WHITESPACE"," ",526],["T_ARRAY","array",526],"(",")",";",["T_WHITESPACE","\n        ",526],["T_FOREACH","foreach",527],["T_WHITESPACE"," ",527],"(",["T_VARIABLE","$data",527],["T_WHITESPACE"," ",527],["T_AS","as",527],["T_WHITESPACE"," ",527],["T_VARIABLE","$key",527],["T_WHITESPACE"," ",527],["T_DOUBLE_ARROW","=>",527],["T_WHITESPACE"," ",527],["T_VARIABLE","$val",527],")",["T_WHITESPACE"," ",527],"{",["T_WHITESPACE","\n            ",527],["T_VARIABLE","$parts",528],["T_WHITESPACE"," ",528],"=",["T_WHITESPACE"," ",528],["T_STRING","explode",528],"(",["T_CONSTANT_ENCAPSED_STRING","'_'",528],",",["T_WHITESPACE"," ",528],["T_VARIABLE","$key",528],")",";",["T_WHITESPACE","\n            ",528],["T_COMMENT","\/\/ \"4\" - is number of expected params conf_native_bar_tintcolor in correct data\n",529],["T_WHITESPACE","            ",530],["T_IF","if",530],["T_WHITESPACE"," ",530],"(",["T_STRING","is_array",530],"(",["T_VARIABLE","$parts",530],")",["T_WHITESPACE"," ",530],["T_BOOLEAN_AND","&&",530],["T_WHITESPACE"," ",530],["T_STRING","count",530],"(",["T_VARIABLE","$parts",530],")",["T_WHITESPACE"," ",530],["T_IS_EQUAL","==",530],["T_WHITESPACE"," ",530],["T_LNUMBER","4",530],")",["T_WHITESPACE"," ",530],"{",["T_WHITESPACE","\n                ",530],["T_LIST","list",531],"(",",",["T_WHITESPACE"," ",531],["T_VARIABLE","$key1",531],",",["T_WHITESPACE"," ",531],["T_VARIABLE","$key2",531],",",["T_WHITESPACE"," ",531],["T_VARIABLE","$key3",531],")",["T_WHITESPACE"," ",531],"=",["T_WHITESPACE"," ",531],["T_VARIABLE","$parts",531],";",["T_WHITESPACE","\n                ",531],["T_IF","if",532],["T_WHITESPACE"," ",532],"(","!",["T_ISSET","isset",532],"(",["T_VARIABLE","$conf",532],"[",["T_VARIABLE","$key1",532],"]",")",")",["T_WHITESPACE"," ",532],"{",["T_WHITESPACE","\n                    ",532],["T_VARIABLE","$conf",533],"[",["T_VARIABLE","$key1",533],"]",["T_WHITESPACE"," ",533],"=",["T_WHITESPACE"," ",533],["T_ARRAY","array",533],"(",")",";",["T_WHITESPACE","\n                ",533],"}",["T_WHITESPACE","\n                ",534],["T_IF","if",535],["T_WHITESPACE"," ",535],"(","!",["T_ISSET","isset",535],"(",["T_VARIABLE","$conf",535],"[",["T_VARIABLE","$key1",535],"]","[",["T_VARIABLE","$key2",535],"]",")",")",["T_WHITESPACE"," ",535],"{",["T_WHITESPACE","\n                    ",535],["T_VARIABLE","$conf",536],"[",["T_VARIABLE","$key1",536],"]","[",["T_VARIABLE","$key2",536],"]",["T_WHITESPACE"," ",536],"=",["T_WHITESPACE"," ",536],["T_ARRAY","array",536],"(",")",";",["T_WHITESPACE","\n                ",536],"}",["T_WHITESPACE","\n                ",537],["T_VARIABLE","$conf",538],"[",["T_VARIABLE","$key1",538],"]","[",["T_VARIABLE","$key2",538],"]","[",["T_VARIABLE","$key3",538],"]",["T_WHITESPACE"," ",538],"=",["T_WHITESPACE"," ",538],["T_VARIABLE","$val",538],";",["T_WHITESPACE","\n            ",538],"}",["T_WHITESPACE","\n        ",539],"}",["T_WHITESPACE","\n        ",540],["T_RETURN","return",541],["T_WHITESPACE"," ",541],["T_VARIABLE","$conf",541],";",["T_WHITESPACE","\n    ",541],"}",["T_WHITESPACE","\n\n    ",542],["T_DOC_COMMENT","\/**\n     * Save Theme action\n     *\n     * @return null\n     *\/",544],["T_WHITESPACE","\n    ",548],["T_PUBLIC","public",549],["T_WHITESPACE"," ",549],["T_FUNCTION","function",549],["T_WHITESPACE"," ",549],["T_STRING","saveThemeAction",549],"(",")",["T_WHITESPACE","\n    ",549],"{",["T_WHITESPACE","\n        ",550],["T_VARIABLE","$data",551],["T_WHITESPACE"," ",551],"=",["T_WHITESPACE"," ",551],["T_VARIABLE","$this",551],["T_OBJECT_OPERATOR","->",551],["T_STRING","getRequest",551],"(",")",["T_OBJECT_OPERATOR","->",551],["T_STRING","getPost",551],"(",")",";",["T_WHITESPACE","\n        ",551],["T_VARIABLE","$this",552],["T_OBJECT_OPERATOR","->",552],["T_STRING","_saveThemeAction",552],"(",["T_VARIABLE","$data",552],")",";",["T_WHITESPACE","\n    ",552],"}",["T_WHITESPACE","\n\n    ",553],["T_DOC_COMMENT","\/**\n     * Delete theme action\n     *\n     * @return null\n     *\/",555],["T_WHITESPACE","\n    ",559],["T_PUBLIC","public",560],["T_WHITESPACE"," ",560],["T_FUNCTION","function",560],["T_WHITESPACE"," ",560],["T_STRING","deleteThemeAction",560],"(",")",["T_WHITESPACE","\n    ",560],"{",["T_WHITESPACE","\n        ",561],["T_VARIABLE","$themeId",562],["T_WHITESPACE"," ",562],"=",["T_WHITESPACE"," ",562],["T_VARIABLE","$this",562],["T_OBJECT_OPERATOR","->",562],["T_STRING","getRequest",562],"(",")",["T_OBJECT_OPERATOR","->",562],["T_STRING","getParam",562],"(",["T_CONSTANT_ENCAPSED_STRING","'theme_id'",562],",",["T_WHITESPACE"," ",562],["T_STRING","false",562],")",";",["T_WHITESPACE","\n        ",562],["T_IF","if",563],["T_WHITESPACE"," ",563],"(",["T_VARIABLE","$themeId",563],")",["T_WHITESPACE"," ",563],"{",["T_WHITESPACE","\n            ",563],["T_TRY","try",564],["T_WHITESPACE"," ",564],"{",["T_WHITESPACE","\n                ",564],["T_DOC_COMMENT","\/** @var $themesHelper Mage_XmlConnect_Helper_Theme *\/",565],["T_WHITESPACE","\n                ",565],["T_VARIABLE","$themesHelper",566],["T_WHITESPACE"," ",566],"=",["T_WHITESPACE"," ",566],["T_STRING","Mage",566],["T_DOUBLE_COLON","::",566],["T_STRING","helper",566],"(",["T_CONSTANT_ENCAPSED_STRING","'xmlconnect\/theme'",566],")",";",["T_WHITESPACE","\n                ",566],["T_VARIABLE","$result",567],["T_WHITESPACE"," ",567],"=",["T_WHITESPACE"," ",567],["T_VARIABLE","$themesHelper",567],["T_OBJECT_OPERATOR","->",567],["T_STRING","deleteTheme",567],"(",["T_VARIABLE","$themeId",567],")",";",["T_WHITESPACE","\n                ",567],["T_IF","if",568],["T_WHITESPACE"," ",568],"(",["T_VARIABLE","$result",568],")",["T_WHITESPACE"," ",568],"{",["T_WHITESPACE","\n                    ",568],["T_VARIABLE","$response",569],["T_WHITESPACE"," ",569],"=",["T_WHITESPACE"," ",569],["T_ARRAY","array",569],"(",["T_WHITESPACE","\n                        ",569],["T_CONSTANT_ENCAPSED_STRING","'message'",570],["T_WHITESPACE","   ",570],["T_DOUBLE_ARROW","=>",570],["T_WHITESPACE"," ",570],["T_VARIABLE","$this",570],["T_OBJECT_OPERATOR","->",570],["T_STRING","__",570],"(",["T_CONSTANT_ENCAPSED_STRING","'Theme has been delete.'",570],")",",",["T_WHITESPACE","\n                        ",570],["T_CONSTANT_ENCAPSED_STRING","'themes'",571],["T_WHITESPACE","    ",571],["T_DOUBLE_ARROW","=>",571],["T_WHITESPACE"," ",571],["T_VARIABLE","$themesHelper",571],["T_OBJECT_OPERATOR","->",571],["T_STRING","getAllThemesArray",571],"(",["T_STRING","true",571],")",",",["T_WHITESPACE","\n                        ",571],["T_CONSTANT_ENCAPSED_STRING","'themeSelector'",572],["T_WHITESPACE"," ",572],["T_DOUBLE_ARROW","=>",572],["T_WHITESPACE"," ",572],["T_VARIABLE","$themesHelper",572],["T_OBJECT_OPERATOR","->",572],["T_STRING","getThemesSelector",572],"(",")",",",["T_WHITESPACE","\n                        ",572],["T_CONSTANT_ENCAPSED_STRING","'selectedTheme'",573],["T_WHITESPACE"," ",573],["T_DOUBLE_ARROW","=>",573],["T_WHITESPACE"," ",573],["T_VARIABLE","$themesHelper",573],["T_OBJECT_OPERATOR","->",573],["T_STRING","getDefaultThemeName",573],"(",")",["T_WHITESPACE","\n                    ",573],")",";",["T_WHITESPACE","\n                ",574],"}",["T_WHITESPACE"," ",575],["T_ELSE","else",575],["T_WHITESPACE"," ",575],"{",["T_WHITESPACE","\n                    ",575],["T_VARIABLE","$response",576],["T_WHITESPACE"," ",576],"=",["T_WHITESPACE"," ",576],["T_ARRAY","array",576],"(",["T_WHITESPACE","\n                        ",576],["T_CONSTANT_ENCAPSED_STRING","'error'",577],["T_WHITESPACE","     ",577],["T_DOUBLE_ARROW","=>",577],["T_WHITESPACE"," ",577],["T_STRING","true",577],",",["T_WHITESPACE","\n                        ",577],["T_CONSTANT_ENCAPSED_STRING","'message'",578],["T_WHITESPACE","   ",578],["T_DOUBLE_ARROW","=>",578],["T_WHITESPACE"," ",578],["T_VARIABLE","$this",578],["T_OBJECT_OPERATOR","->",578],["T_STRING","__",578],"(",["T_CONSTANT_ENCAPSED_STRING","'Can\\'t delete \"%s\" theme.'",578],",",["T_WHITESPACE"," ",578],["T_VARIABLE","$themeId",578],")",["T_WHITESPACE","\n                    ",578],")",";",["T_WHITESPACE","\n                ",579],"}",["T_WHITESPACE","\n            ",580],"}",["T_WHITESPACE"," ",581],["T_CATCH","catch",581],["T_WHITESPACE"," ",581],"(",["T_STRING","Mage_Core_Exception",581],["T_WHITESPACE"," ",581],["T_VARIABLE","$e",581],")",["T_WHITESPACE"," ",581],"{",["T_WHITESPACE","\n                ",581],["T_VARIABLE","$response",582],["T_WHITESPACE"," ",582],"=",["T_WHITESPACE"," ",582],["T_ARRAY","array",582],"(",["T_CONSTANT_ENCAPSED_STRING","'error'",582],["T_WHITESPACE"," ",582],["T_DOUBLE_ARROW","=>",582],["T_WHITESPACE"," ",582],["T_STRING","true",582],",",["T_WHITESPACE"," ",582],["T_CONSTANT_ENCAPSED_STRING","'message'",582],["T_WHITESPACE"," ",582],["T_DOUBLE_ARROW","=>",582],["T_WHITESPACE"," ",582],["T_VARIABLE","$e",582],["T_OBJECT_OPERATOR","->",582],["T_STRING","getMessage",582],"(",")",")",";",["T_WHITESPACE","\n            ",582],"}",["T_WHITESPACE"," ",583],["T_CATCH","catch",583],["T_WHITESPACE"," ",583],"(",["T_STRING","Exception",583],["T_WHITESPACE"," ",583],["T_VARIABLE","$e",583],")",["T_WHITESPACE"," ",583],"{",["T_WHITESPACE","\n                ",583],["T_VARIABLE","$response",584],["T_WHITESPACE"," ",584],"=",["T_WHITESPACE"," ",584],["T_ARRAY","array",584],"(",["T_WHITESPACE","\n                    ",584],["T_CONSTANT_ENCAPSED_STRING","'error'",585],["T_WHITESPACE","     ",585],["T_DOUBLE_ARROW","=>",585],["T_WHITESPACE"," ",585],["T_STRING","true",585],",",["T_WHITESPACE","\n                    ",585],["T_CONSTANT_ENCAPSED_STRING","'message'",586],["T_WHITESPACE","   ",586],["T_DOUBLE_ARROW","=>",586],["T_WHITESPACE"," ",586],["T_VARIABLE","$this",586],["T_OBJECT_OPERATOR","->",586],["T_STRING","__",586],"(",["T_CONSTANT_ENCAPSED_STRING","'Can\\'t delete \"%s\" theme.'",586],",",["T_WHITESPACE"," ",586],["T_VARIABLE","$themeId",586],")",["T_WHITESPACE","\n                ",586],")",";",["T_WHITESPACE","\n            ",587],"}",["T_WHITESPACE","\n        ",588],"}",["T_WHITESPACE"," ",589],["T_ELSE","else",589],["T_WHITESPACE"," ",589],"{",["T_WHITESPACE","\n            ",589],["T_VARIABLE","$response",590],["T_WHITESPACE"," ",590],"=",["T_WHITESPACE"," ",590],["T_ARRAY","array",590],"(",["T_CONSTANT_ENCAPSED_STRING","'error'",590],["T_WHITESPACE"," ",590],["T_DOUBLE_ARROW","=>",590],["T_WHITESPACE"," ",590],["T_STRING","true",590],",",["T_WHITESPACE"," ",590],["T_CONSTANT_ENCAPSED_STRING","'message'",590],["T_WHITESPACE"," ",590],["T_DOUBLE_ARROW","=>",590],["T_WHITESPACE"," ",590],["T_VARIABLE","$this",590],["T_OBJECT_OPERATOR","->",590],["T_STRING","__",590],"(",["T_CONSTANT_ENCAPSED_STRING","'Theme name is not set.'",590],")",")",";",["T_WHITESPACE","\n        ",590],"}",["T_WHITESPACE","\n        ",591],["T_IF","if",592],["T_WHITESPACE"," ",592],"(",["T_STRING","is_array",592],"(",["T_VARIABLE","$response",592],")",")",["T_WHITESPACE"," ",592],"{",["T_WHITESPACE","\n            ",592],["T_VARIABLE","$response",593],["T_WHITESPACE"," ",593],"=",["T_WHITESPACE"," ",593],["T_STRING","Mage",593],["T_DOUBLE_COLON","::",593],["T_STRING","helper",593],"(",["T_CONSTANT_ENCAPSED_STRING","'core'",593],")",["T_OBJECT_OPERATOR","->",593],["T_STRING","jsonEncode",593],"(",["T_VARIABLE","$response",593],")",";",["T_WHITESPACE","\n            ",593],["T_VARIABLE","$this",594],["T_OBJECT_OPERATOR","->",594],["T_STRING","getResponse",594],"(",")",["T_OBJECT_OPERATOR","->",594],["T_STRING","setBody",594],"(",["T_VARIABLE","$response",594],")",";",["T_WHITESPACE","\n        ",594],"}",["T_WHITESPACE","\n    ",595],"}",["T_WHITESPACE","\n\n    ",596],["T_DOC_COMMENT","\/**\n     * Reset Theme action\n     *\n     * @return null\n     *\/",598],["T_WHITESPACE","\n    ",602],["T_PUBLIC","public",603],["T_WHITESPACE"," ",603],["T_FUNCTION","function",603],["T_WHITESPACE"," ",603],["T_STRING","resetThemeAction",603],"(",")",["T_WHITESPACE","\n    ",603],"{",["T_WHITESPACE","\n        ",604],["T_TRY","try",605],["T_WHITESPACE"," ",605],"{",["T_WHITESPACE","\n            ",605],["T_VARIABLE","$theme",606],["T_WHITESPACE"," ",606],"=",["T_WHITESPACE"," ",606],["T_VARIABLE","$this",606],["T_OBJECT_OPERATOR","->",606],["T_STRING","getRequest",606],"(",")",["T_OBJECT_OPERATOR","->",606],["T_STRING","getPost",606],"(",["T_CONSTANT_ENCAPSED_STRING","'theme'",606],",",["T_WHITESPACE"," ",606],["T_STRING","null",606],")",";",["T_WHITESPACE","\n            ",606],["T_STRING","Mage",607],["T_DOUBLE_COLON","::",607],["T_STRING","helper",607],"(",["T_CONSTANT_ENCAPSED_STRING","'xmlconnect\/theme'",607],")",["T_OBJECT_OPERATOR","->",607],["T_STRING","resetTheme",607],"(",["T_VARIABLE","$theme",607],")",";",["T_WHITESPACE","\n            ",607],["T_VARIABLE","$response",608],["T_WHITESPACE"," ",608],"=",["T_WHITESPACE"," ",608],["T_STRING","Mage",608],["T_DOUBLE_COLON","::",608],["T_STRING","helper",608],"(",["T_CONSTANT_ENCAPSED_STRING","'xmlconnect\/theme'",608],")",["T_OBJECT_OPERATOR","->",608],["T_STRING","getAllThemesArray",608],"(",["T_STRING","true",608],")",";",["T_WHITESPACE","\n        ",608],"}",["T_WHITESPACE"," ",609],["T_CATCH","catch",609],["T_WHITESPACE"," ",609],"(",["T_STRING","Mage_Core_Exception",609],["T_WHITESPACE"," ",609],["T_VARIABLE","$e",609],")",["T_WHITESPACE"," ",609],"{",["T_WHITESPACE","\n            ",609],["T_VARIABLE","$response",610],["T_WHITESPACE"," ",610],"=",["T_WHITESPACE"," ",610],["T_ARRAY","array",610],"(",["T_CONSTANT_ENCAPSED_STRING","'error'",610],["T_WHITESPACE"," ",610],["T_DOUBLE_ARROW","=>",610],["T_WHITESPACE"," ",610],["T_STRING","true",610],",",["T_WHITESPACE"," ",610],["T_CONSTANT_ENCAPSED_STRING","'message'",610],["T_WHITESPACE"," ",610],["T_DOUBLE_ARROW","=>",610],["T_WHITESPACE"," ",610],["T_VARIABLE","$e",610],["T_OBJECT_OPERATOR","->",610],["T_STRING","getMessage",610],"(",")",")",";",["T_WHITESPACE","\n        ",610],"}",["T_WHITESPACE"," ",611],["T_CATCH","catch",611],["T_WHITESPACE"," ",611],"(",["T_STRING","Exception",611],["T_WHITESPACE"," ",611],["T_VARIABLE","$e",611],")",["T_WHITESPACE"," ",611],"{",["T_WHITESPACE","\n            ",611],["T_VARIABLE","$response",612],["T_WHITESPACE"," ",612],"=",["T_WHITESPACE"," ",612],["T_ARRAY","array",612],"(",["T_CONSTANT_ENCAPSED_STRING","'error'",612],["T_WHITESPACE"," ",612],["T_DOUBLE_ARROW","=>",612],["T_WHITESPACE"," ",612],["T_STRING","true",612],",",["T_WHITESPACE"," ",612],["T_CONSTANT_ENCAPSED_STRING","'message'",612],["T_WHITESPACE"," ",612],["T_DOUBLE_ARROW","=>",612],["T_WHITESPACE"," ",612],["T_VARIABLE","$this",612],["T_OBJECT_OPERATOR","->",612],["T_STRING","__",612],"(",["T_CONSTANT_ENCAPSED_STRING","'Can\\'t reset theme.'",612],")",")",";",["T_WHITESPACE","\n        ",612],"}",["T_WHITESPACE","\n        ",613],["T_IF","if",614],["T_WHITESPACE"," ",614],"(",["T_STRING","is_array",614],"(",["T_VARIABLE","$response",614],")",")",["T_WHITESPACE"," ",614],"{",["T_WHITESPACE","\n            ",614],["T_VARIABLE","$response",615],["T_WHITESPACE"," ",615],"=",["T_WHITESPACE"," ",615],["T_STRING","Mage",615],["T_DOUBLE_COLON","::",615],["T_STRING","helper",615],"(",["T_CONSTANT_ENCAPSED_STRING","'core'",615],")",["T_OBJECT_OPERATOR","->",615],["T_STRING","jsonEncode",615],"(",["T_VARIABLE","$response",615],")",";",["T_WHITESPACE","\n            ",615],["T_VARIABLE","$this",616],["T_OBJECT_OPERATOR","->",616],["T_STRING","getResponse",616],"(",")",["T_OBJECT_OPERATOR","->",616],["T_STRING","setBody",616],"(",["T_VARIABLE","$response",616],")",";",["T_WHITESPACE","\n        ",616],"}",["T_WHITESPACE","\n    ",617],"}",["T_WHITESPACE","\n\n    ",618],["T_DOC_COMMENT","\/**\n     * Preview Home action handler\n     *\n     * @return null\n     *\/",620],["T_WHITESPACE","\n    ",624],["T_PUBLIC","public",625],["T_WHITESPACE"," ",625],["T_FUNCTION","function",625],["T_WHITESPACE"," ",625],["T_STRING","previewHomeAction",625],"(",")",["T_WHITESPACE","\n    ",625],"{",["T_WHITESPACE","\n        ",626],["T_VARIABLE","$this",627],["T_OBJECT_OPERATOR","->",627],["T_STRING","_previewAction",627],"(",["T_CONSTANT_ENCAPSED_STRING","'preview_home_content'",627],")",";",["T_WHITESPACE","\n    ",627],"}",["T_WHITESPACE","\n\n    ",628],["T_DOC_COMMENT","\/**\n     * Preview Home landscape mode action handler\n     *\/",630],["T_WHITESPACE","\n    ",632],["T_PUBLIC","public",633],["T_WHITESPACE"," ",633],["T_FUNCTION","function",633],["T_WHITESPACE"," ",633],["T_STRING","previewHomeHorAction",633],"(",")",["T_WHITESPACE","\n    ",633],"{",["T_WHITESPACE","\n        ",634],["T_VARIABLE","$this",635],["T_OBJECT_OPERATOR","->",635],["T_STRING","_previewAction",635],"(",["T_CONSTANT_ENCAPSED_STRING","'preview_home_hor_content'",635],")",";",["T_WHITESPACE","\n    ",635],"}",["T_WHITESPACE","\n\n    ",636],["T_DOC_COMMENT","\/**\n     * Preview Catalog action handler\n     *\n     * @return null\n     *\/",638],["T_WHITESPACE","\n    ",642],["T_PUBLIC","public",643],["T_WHITESPACE"," ",643],["T_FUNCTION","function",643],["T_WHITESPACE"," ",643],["T_STRING","previewCatalogAction",643],"(",")",["T_WHITESPACE","\n    ",643],"{",["T_WHITESPACE","\n        ",644],["T_VARIABLE","$this",645],["T_OBJECT_OPERATOR","->",645],["T_STRING","_previewAction",645],"(",["T_CONSTANT_ENCAPSED_STRING","'preview_catalog_content'",645],")",";",["T_WHITESPACE","\n    ",645],"}",["T_WHITESPACE","\n\n    ",646],["T_DOC_COMMENT","\/**\n     * Preview Catalog landscape mode action handler\n     *\/",648],["T_WHITESPACE","\n    ",650],["T_PUBLIC","public",651],["T_WHITESPACE"," ",651],["T_FUNCTION","function",651],["T_WHITESPACE"," ",651],["T_STRING","previewCatalogHorAction",651],"(",")",["T_WHITESPACE","\n    ",651],"{",["T_WHITESPACE","\n        ",652],["T_VARIABLE","$this",653],["T_OBJECT_OPERATOR","->",653],["T_STRING","_previewAction",653],"(",["T_CONSTANT_ENCAPSED_STRING","'preview_catalog_hor_content'",653],")",";",["T_WHITESPACE","\n    ",653],"}",["T_WHITESPACE","\n\n    ",654],["T_DOC_COMMENT","\/**\n     * Preview Product Info action handler\n     *\/",656],["T_WHITESPACE","\n    ",658],["T_PUBLIC","public",659],["T_WHITESPACE"," ",659],["T_FUNCTION","function",659],["T_WHITESPACE"," ",659],["T_STRING","previewProductinfoAction",659],"(",")",["T_WHITESPACE","\n    ",659],"{",["T_WHITESPACE","\n        ",660],["T_VARIABLE","$this",661],["T_OBJECT_OPERATOR","->",661],["T_STRING","_previewAction",661],"(",["T_CONSTANT_ENCAPSED_STRING","'preview_productinfo_content'",661],")",";",["T_WHITESPACE","\n    ",661],"}",["T_WHITESPACE","\n\n    ",662],["T_DOC_COMMENT","\/**\n     * Preview AirMail Queue Template action handler\n     *\/",664],["T_WHITESPACE","\n    ",666],["T_PUBLIC","public",667],["T_WHITESPACE"," ",667],["T_FUNCTION","function",667],["T_WHITESPACE"," ",667],["T_STRING","previewQueueAction",667],"(",")",["T_WHITESPACE","\n    ",667],"{",["T_WHITESPACE","\n        ",668],["T_VARIABLE","$message",669],["T_WHITESPACE"," ",669],"=",["T_WHITESPACE"," ",669],["T_VARIABLE","$this",669],["T_OBJECT_OPERATOR","->",669],["T_STRING","_initMessage",669],"(",")",";",["T_WHITESPACE","\n        ",669],["T_IF","if",670],["T_WHITESPACE"," ",670],"(",["T_VARIABLE","$message",670],["T_OBJECT_OPERATOR","->",670],["T_STRING","getId",670],"(",")",")",["T_WHITESPACE"," ",670],"{",["T_WHITESPACE","\n            ",670],["T_VARIABLE","$this",671],["T_OBJECT_OPERATOR","->",671],["T_STRING","getRequest",671],"(",")",["T_OBJECT_OPERATOR","->",671],["T_STRING","setParam",671],"(",["T_CONSTANT_ENCAPSED_STRING","'queue_preview'",671],",",["T_WHITESPACE"," ",671],["T_VARIABLE","$message",671],["T_OBJECT_OPERATOR","->",671],["T_STRING","getId",671],"(",")",")",";",["T_WHITESPACE","\n        ",671],"}",["T_WHITESPACE","\n        ",672],["T_VARIABLE","$this",673],["T_OBJECT_OPERATOR","->",673],["T_STRING","_forward",673],"(",["T_CONSTANT_ENCAPSED_STRING","'previewTemplate'",673],")",";",["T_WHITESPACE","\n    ",673],"}",["T_WHITESPACE","\n\n    ",674],["T_DOC_COMMENT","\/**\n     * Preview AirMail Template action handler\n     *\/",676],["T_WHITESPACE","\n    ",678],["T_PUBLIC","public",679],["T_WHITESPACE"," ",679],["T_FUNCTION","function",679],["T_WHITESPACE"," ",679],["T_STRING","previewTemplateAction",679],"(",")",["T_WHITESPACE","\n    ",679],"{",["T_WHITESPACE","\n        ",680],["T_VARIABLE","$this",681],["T_OBJECT_OPERATOR","->",681],["T_STRING","loadLayout",681],"(",["T_CONSTANT_ENCAPSED_STRING","'adminhtml_mobile_template_preview'",681],")",";",["T_WHITESPACE","\n        ",681],["T_VARIABLE","$this",682],["T_OBJECT_OPERATOR","->",682],["T_STRING","renderLayout",682],"(",")",";",["T_WHITESPACE","\n    ",682],"}",["T_WHITESPACE","\n\n    ",683],["T_DOC_COMMENT","\/**\n     * Preview action implementation\n     *\n     * @param string $block\n     *\/",685],["T_WHITESPACE","\n    ",689],["T_PROTECTED","protected",690],["T_WHITESPACE"," ",690],["T_FUNCTION","function",690],["T_WHITESPACE"," ",690],["T_STRING","_previewAction",690],"(",["T_VARIABLE","$block",690],")",["T_WHITESPACE","\n    ",690],"{",["T_WHITESPACE","\n        ",691],["T_VARIABLE","$redirectBack",692],["T_WHITESPACE"," ",692],"=",["T_WHITESPACE"," ",692],["T_STRING","false",692],";",["T_WHITESPACE","\n        ",692],["T_TRY","try",693],["T_WHITESPACE"," ",693],"{",["T_WHITESPACE","\n            ",693],["T_VARIABLE","$deviceType",694],["T_WHITESPACE"," ",694],"=",["T_WHITESPACE"," ",694],["T_VARIABLE","$this",694],["T_OBJECT_OPERATOR","->",694],["T_STRING","getRequest",694],"(",")",["T_OBJECT_OPERATOR","->",694],["T_STRING","getParam",694],"(",["T_CONSTANT_ENCAPSED_STRING","'devtype'",694],")",";",["T_WHITESPACE","\n            ",694],["T_VARIABLE","$app",695],["T_WHITESPACE"," ",695],"=",["T_WHITESPACE"," ",695],["T_VARIABLE","$this",695],["T_OBJECT_OPERATOR","->",695],["T_STRING","_initApp",695],"(",["T_CONSTANT_ENCAPSED_STRING","'application_id'",695],",",["T_WHITESPACE"," ",695],["T_VARIABLE","$deviceType",695],")",";",["T_WHITESPACE","\n            ",695],["T_IF","if",696],["T_WHITESPACE"," ",696],"(","!",["T_VARIABLE","$this",696],["T_OBJECT_OPERATOR","->",696],["T_STRING","getRequest",696],"(",")",["T_OBJECT_OPERATOR","->",696],["T_STRING","getParam",696],"(",["T_CONSTANT_ENCAPSED_STRING","'submission_action'",696],")",")",["T_WHITESPACE"," ",696],"{",["T_WHITESPACE","\n                ",696],["T_VARIABLE","$app",697],["T_OBJECT_OPERATOR","->",697],["T_STRING","addData",697],"(",["T_VARIABLE","$this",697],["T_OBJECT_OPERATOR","->",697],["T_STRING","_preparePostData",697],"(",["T_VARIABLE","$this",697],["T_OBJECT_OPERATOR","->",697],["T_STRING","getRequest",697],"(",")",["T_OBJECT_OPERATOR","->",697],["T_STRING","getPost",697],"(",")",")",")",";",["T_WHITESPACE","\n            ",697],"}",["T_WHITESPACE","\n            ",698],["T_DOC_COMMENT","\/** render base configuration of application *\/",699],["T_WHITESPACE","\n            ",699],["T_VARIABLE","$appConf",700],["T_WHITESPACE"," ",700],"=",["T_WHITESPACE"," ",700],["T_VARIABLE","$app",700],["T_OBJECT_OPERATOR","->",700],["T_STRING","getRenderConf",700],"(",")",";",["T_WHITESPACE","\n            ",700],["T_TRY","try",701],["T_WHITESPACE"," ",701],"{",["T_WHITESPACE","\n                ",701],["T_DOC_COMMENT","\/** try to upload files *\/",702],["T_WHITESPACE","\n                ",702],["T_VARIABLE","$dataUploaded",703],["T_WHITESPACE"," ",703],"=",["T_WHITESPACE"," ",703],["T_VARIABLE","$this",703],["T_OBJECT_OPERATOR","->",703],["T_STRING","_processUploadedFiles",703],"(",["T_VARIABLE","$app",703],["T_OBJECT_OPERATOR","->",703],["T_STRING","getData",703],"(",")",")",";",["T_WHITESPACE","\n                ",703],["T_VARIABLE","$app",704],["T_OBJECT_OPERATOR","->",704],["T_STRING","addData",704],"(",["T_VARIABLE","$dataUploaded",704],")",";",["T_WHITESPACE","\n                ",704],["T_DOC_COMMENT","\/** render configuration with just uploaded images *\/",705],["T_WHITESPACE","\n                ",705],["T_VARIABLE","$appConf",706],["T_WHITESPACE"," ",706],"=",["T_WHITESPACE"," ",706],["T_VARIABLE","$app",706],["T_OBJECT_OPERATOR","->",706],["T_STRING","getRenderConf",706],"(",")",";",["T_WHITESPACE","\n            ",706],"}",["T_WHITESPACE"," ",707],["T_CATCH","catch",707],["T_WHITESPACE"," ",707],"(",["T_STRING","Exception",707],["T_WHITESPACE"," ",707],["T_VARIABLE","$e",707],")",["T_WHITESPACE"," ",707],"{",["T_WHITESPACE","\n                ",707],["T_DOC_COMMENT","\/** when cannot upload - just tell user what is happen *\/",708],["T_WHITESPACE","\n                ",708],["T_VARIABLE","$jsErrorMessage",709],["T_WHITESPACE"," ",709],"=",["T_WHITESPACE"," ",709],["T_STRING","addslashes",709],"(",["T_VARIABLE","$e",709],["T_OBJECT_OPERATOR","->",709],["T_STRING","getMessage",709],"(",")",")",";",["T_WHITESPACE","\n            ",709],"}",["T_WHITESPACE","\n\n            ",710],["T_VARIABLE","$this",712],["T_OBJECT_OPERATOR","->",712],["T_STRING","loadLayout",712],"(",["T_STRING","false",712],")",";",["T_WHITESPACE","\n            ",712],["T_VARIABLE","$preview",713],["T_WHITESPACE"," ",713],"=",["T_WHITESPACE"," ",713],["T_VARIABLE","$this",713],["T_OBJECT_OPERATOR","->",713],["T_STRING","getLayout",713],"(",")",["T_OBJECT_OPERATOR","->",713],["T_STRING","getBlock",713],"(",["T_VARIABLE","$block",713],")",";",["T_WHITESPACE","\n\n            ",713],["T_IF","if",715],["T_WHITESPACE"," ",715],"(",["T_ISSET","isset",715],"(",["T_VARIABLE","$jsErrorMessage",715],")",")",["T_WHITESPACE"," ",715],"{",["T_WHITESPACE","\n                ",715],["T_VARIABLE","$preview",716],["T_OBJECT_OPERATOR","->",716],["T_STRING","setJsErrorMessage",716],"(",["T_VARIABLE","$jsErrorMessage",716],")",";",["T_WHITESPACE","\n            ",716],"}",["T_WHITESPACE","\n            ",717],["T_VARIABLE","$preview",718],["T_OBJECT_OPERATOR","->",718],["T_STRING","setConf",718],"(",["T_VARIABLE","$appConf",718],")",";",["T_WHITESPACE","\n            ",718],["T_STRING","Mage",719],["T_DOUBLE_COLON","::",719],["T_STRING","helper",719],"(",["T_CONSTANT_ENCAPSED_STRING","'xmlconnect'",719],")",["T_OBJECT_OPERATOR","->",719],["T_STRING","getPreviewModel",719],"(",")",["T_OBJECT_OPERATOR","->",719],["T_STRING","setConf",719],"(",["T_VARIABLE","$appConf",719],")",";",["T_WHITESPACE","\n            ",719],["T_VARIABLE","$this",720],["T_OBJECT_OPERATOR","->",720],["T_STRING","renderLayout",720],"(",")",";",["T_WHITESPACE","\n            ",720],["T_RETURN","return",721],";",["T_WHITESPACE","\n        ",721],"}",["T_WHITESPACE"," ",722],["T_CATCH","catch",722],["T_WHITESPACE"," ",722],"(",["T_STRING","Mage_Core_Exception",722],["T_WHITESPACE"," ",722],["T_VARIABLE","$e",722],")",["T_WHITESPACE"," ",722],"{",["T_WHITESPACE","\n            ",722],["T_VARIABLE","$this",723],["T_OBJECT_OPERATOR","->",723],["T_STRING","_getSession",723],"(",")",["T_OBJECT_OPERATOR","->",723],["T_STRING","addException",723],"(",["T_VARIABLE","$e",723],",",["T_WHITESPACE"," ",723],["T_VARIABLE","$e",723],["T_OBJECT_OPERATOR","->",723],["T_STRING","getMessage",723],"(",")",")",";",["T_WHITESPACE","\n            ",723],["T_VARIABLE","$redirectBack",724],["T_WHITESPACE"," ",724],"=",["T_WHITESPACE"," ",724],["T_STRING","true",724],";",["T_WHITESPACE","\n        ",724],"}",["T_WHITESPACE"," ",725],["T_CATCH","catch",725],["T_WHITESPACE"," ",725],"(",["T_STRING","Exception",725],["T_WHITESPACE"," ",725],["T_VARIABLE","$e",725],")",["T_WHITESPACE"," ",725],"{",["T_WHITESPACE","\n            ",725],["T_VARIABLE","$this",726],["T_OBJECT_OPERATOR","->",726],["T_STRING","_getSession",726],"(",")",["T_OBJECT_OPERATOR","->",726],["T_STRING","addException",726],"(",["T_VARIABLE","$e",726],",",["T_WHITESPACE"," ",726],["T_VARIABLE","$this",726],["T_OBJECT_OPERATOR","->",726],["T_STRING","__",726],"(",["T_CONSTANT_ENCAPSED_STRING","'Unable to process preview.'",726],")",")",";",["T_WHITESPACE","\n            ",726],["T_VARIABLE","$redirectBack",727],["T_WHITESPACE"," ",727],"=",["T_WHITESPACE"," ",727],["T_STRING","true",727],";",["T_WHITESPACE","\n        ",727],"}",["T_WHITESPACE","\n        ",728],["T_IF","if",729],["T_WHITESPACE"," ",729],"(",["T_ISSET","isset",729],"(",["T_VARIABLE","$app",729],")",["T_WHITESPACE"," ",729],["T_BOOLEAN_AND","&&",729],["T_WHITESPACE"," ",729],["T_VARIABLE","$app",729],["T_WHITESPACE"," ",729],["T_INSTANCEOF","instanceof",729],["T_WHITESPACE"," ",729],["T_STRING","Mage_XmlConnect_Model_Application",729],["T_WHITESPACE"," ",729],["T_BOOLEAN_AND","&&",729],["T_WHITESPACE"," ",729],["T_VARIABLE","$redirectBack",729],")",["T_WHITESPACE"," ",729],"{",["T_WHITESPACE","\n            ",729],["T_VARIABLE","$this",730],["T_OBJECT_OPERATOR","->",730],["T_STRING","_redirect",730],"(",["T_CONSTANT_ENCAPSED_STRING","'*\/*\/edit'",730],",",["T_WHITESPACE"," ",730],["T_ARRAY","array",730],"(",["T_CONSTANT_ENCAPSED_STRING","'application_id'",730],["T_WHITESPACE"," ",730],["T_DOUBLE_ARROW","=>",730],["T_WHITESPACE"," ",730],["T_VARIABLE","$app",730],["T_OBJECT_OPERATOR","->",730],["T_STRING","getId",730],"(",")",")",")",";",["T_WHITESPACE","\n        ",730],"}",["T_WHITESPACE"," ",731],["T_ELSE","else",731],["T_WHITESPACE"," ",731],"{",["T_WHITESPACE","\n            ",731],["T_VARIABLE","$this",732],["T_OBJECT_OPERATOR","->",732],["T_STRING","_redirect",732],"(",["T_CONSTANT_ENCAPSED_STRING","'*\/*\/'",732],")",";",["T_WHITESPACE","\n        ",732],"}",["T_WHITESPACE","\n    ",733],"}",["T_WHITESPACE","\n\n    ",734],["T_DOC_COMMENT","\/**\n     * Delete app action\n     *\n     * @return null\n     *\/",736],["T_WHITESPACE","\n    ",740],["T_PUBLIC","public",741],["T_WHITESPACE"," ",741],["T_FUNCTION","function",741],["T_WHITESPACE"," ",741],["T_STRING","deleteAction",741],"(",")",["T_WHITESPACE","\n    ",741],"{",["T_WHITESPACE","\n        ",742],["T_TRY","try",743],["T_WHITESPACE"," ",743],"{",["T_WHITESPACE","\n            ",743],["T_VARIABLE","$app",744],["T_WHITESPACE"," ",744],"=",["T_WHITESPACE"," ",744],["T_VARIABLE","$this",744],["T_OBJECT_OPERATOR","->",744],["T_STRING","_initApp",744],"(",")",";",["T_WHITESPACE","\n            ",744],["T_IF","if",745],["T_WHITESPACE"," ",745],"(","!",["T_VARIABLE","$app",745],["T_OBJECT_OPERATOR","->",745],["T_STRING","getIsSubmitted",745],"(",")",")",["T_WHITESPACE"," ",745],"{",["T_WHITESPACE","\n                ",745],["T_VARIABLE","$app",746],["T_OBJECT_OPERATOR","->",746],["T_STRING","delete",746],"(",")",";",["T_WHITESPACE","\n                ",746],["T_VARIABLE","$this",747],["T_OBJECT_OPERATOR","->",747],["T_STRING","_getSession",747],"(",")",["T_OBJECT_OPERATOR","->",747],["T_STRING","addSuccess",747],"(",["T_VARIABLE","$this",747],["T_OBJECT_OPERATOR","->",747],["T_STRING","__",747],"(",["T_CONSTANT_ENCAPSED_STRING","'App has been deleted.'",747],")",")",";",["T_WHITESPACE","\n            ",747],"}",["T_WHITESPACE"," ",748],["T_ELSE","else",748],["T_WHITESPACE"," ",748],"{",["T_WHITESPACE","\n                ",748],["T_STRING","Mage",749],["T_DOUBLE_COLON","::",749],["T_STRING","throwException",749],"(",["T_VARIABLE","$this",749],["T_OBJECT_OPERATOR","->",749],["T_STRING","__",749],"(",["T_CONSTANT_ENCAPSED_STRING","'It\\'s not allowed to delete submitted application.'",749],")",")",";",["T_WHITESPACE","\n            ",749],"}",["T_WHITESPACE","\n        ",750],"}",["T_WHITESPACE"," ",751],["T_CATCH","catch",751],["T_WHITESPACE"," ",751],"(",["T_STRING","Mage_Core_Exception",751],["T_WHITESPACE"," ",751],["T_VARIABLE","$e",751],")",["T_WHITESPACE"," ",751],"{",["T_WHITESPACE","\n            ",751],["T_VARIABLE","$this",752],["T_OBJECT_OPERATOR","->",752],["T_STRING","_getSession",752],"(",")",["T_OBJECT_OPERATOR","->",752],["T_STRING","addException",752],"(",["T_VARIABLE","$e",752],",",["T_WHITESPACE"," ",752],["T_VARIABLE","$e",752],["T_OBJECT_OPERATOR","->",752],["T_STRING","getMessage",752],"(",")",")",";",["T_WHITESPACE","\n        ",752],"}",["T_WHITESPACE"," ",753],["T_CATCH","catch",753],["T_WHITESPACE"," ",753],"(",["T_STRING","Exception",753],["T_WHITESPACE"," ",753],["T_VARIABLE","$e",753],")",["T_WHITESPACE"," ",753],"{",["T_WHITESPACE","\n            ",753],["T_VARIABLE","$this",754],["T_OBJECT_OPERATOR","->",754],["T_STRING","_getSession",754],"(",")",["T_OBJECT_OPERATOR","->",754],["T_STRING","addException",754],"(",["T_VARIABLE","$e",754],",",["T_WHITESPACE"," ",754],["T_VARIABLE","$this",754],["T_OBJECT_OPERATOR","->",754],["T_STRING","__",754],"(",["T_CONSTANT_ENCAPSED_STRING","'Unable to find an app to delete.'",754],")",")",";",["T_WHITESPACE","\n        ",754],"}",["T_WHITESPACE","\n        ",755],["T_VARIABLE","$this",756],["T_OBJECT_OPERATOR","->",756],["T_STRING","_redirect",756],"(",["T_CONSTANT_ENCAPSED_STRING","'*\/*\/'",756],")",";",["T_WHITESPACE","\n    ",756],"}",["T_WHITESPACE","\n\n    ",757],["T_DOC_COMMENT","\/**\n     * Delete template action\n     *\/",759],["T_WHITESPACE","\n    ",761],["T_PUBLIC","public",762],["T_WHITESPACE"," ",762],["T_FUNCTION","function",762],["T_WHITESPACE"," ",762],["T_STRING","deleteTemplateAction",762],"(",")",["T_WHITESPACE","\n    ",762],"{",["T_WHITESPACE","\n        ",763],["T_COMMENT","\/\/ check if we know what should be deleted\n",764],["T_WHITESPACE","        ",765],["T_IF","if",765],["T_WHITESPACE"," ",765],"(",["T_VARIABLE","$id",765],["T_WHITESPACE"," ",765],"=",["T_WHITESPACE"," ",765],["T_VARIABLE","$this",765],["T_OBJECT_OPERATOR","->",765],["T_STRING","getRequest",765],"(",")",["T_OBJECT_OPERATOR","->",765],["T_STRING","getParam",765],"(",["T_CONSTANT_ENCAPSED_STRING","'id'",765],")",")",["T_WHITESPACE"," ",765],"{",["T_WHITESPACE","\n            ",765],["T_TRY","try",766],["T_WHITESPACE"," ",766],"{",["T_WHITESPACE","\n                ",766],["T_COMMENT","\/\/ init template and delete\n",767],["T_WHITESPACE","                ",768],["T_STRING","Mage",768],["T_DOUBLE_COLON","::",768],["T_STRING","getModel",768],"(",["T_CONSTANT_ENCAPSED_STRING","'xmlconnect\/template'",768],")",["T_OBJECT_OPERATOR","->",768],["T_STRING","load",768],"(",["T_VARIABLE","$id",768],")",["T_OBJECT_OPERATOR","->",768],["T_STRING","delete",768],"(",")",";",["T_WHITESPACE","\n\n                ",768],["T_COMMENT","\/\/ display success message\n",770],["T_WHITESPACE","                ",771],["T_STRING","Mage",771],["T_DOUBLE_COLON","::",771],["T_STRING","getSingleton",771],"(",["T_CONSTANT_ENCAPSED_STRING","'adminhtml\/session'",771],")",["T_OBJECT_OPERATOR","->",771],["T_STRING","addSuccess",771],"(",["T_VARIABLE","$this",771],["T_OBJECT_OPERATOR","->",771],["T_STRING","__",771],"(",["T_CONSTANT_ENCAPSED_STRING","'Template has been deleted.'",771],")",")",";",["T_WHITESPACE","\n\n                ",771],["T_COMMENT","\/\/ go to grid\n",773],["T_WHITESPACE","                ",774],["T_VARIABLE","$this",774],["T_OBJECT_OPERATOR","->",774],["T_STRING","_redirect",774],"(",["T_CONSTANT_ENCAPSED_STRING","'*\/*\/template'",774],")",";",["T_WHITESPACE","\n                ",774],["T_RETURN","return",775],";",["T_WHITESPACE","\n\n            ",775],"}",["T_WHITESPACE"," ",777],["T_CATCH","catch",777],["T_WHITESPACE"," ",777],"(",["T_STRING","Exception",777],["T_WHITESPACE"," ",777],["T_VARIABLE","$e",777],")",["T_WHITESPACE"," ",777],"{",["T_WHITESPACE","\n                ",777],["T_COMMENT","\/\/ display error message\n",778],["T_WHITESPACE","                ",779],["T_STRING","Mage",779],["T_DOUBLE_COLON","::",779],["T_STRING","getSingleton",779],"(",["T_CONSTANT_ENCAPSED_STRING","'adminhtml\/session'",779],")",["T_OBJECT_OPERATOR","->",779],["T_STRING","addError",779],"(",["T_VARIABLE","$e",779],["T_OBJECT_OPERATOR","->",779],["T_STRING","getMessage",779],"(",")",")",";",["T_WHITESPACE","\n                ",779],["T_COMMENT","\/\/ go back to edit form\n",780],["T_WHITESPACE","                ",781],["T_VARIABLE","$this",781],["T_OBJECT_OPERATOR","->",781],["T_STRING","_redirect",781],"(",["T_CONSTANT_ENCAPSED_STRING","'*\/*\/template'",781],",",["T_WHITESPACE"," ",781],["T_ARRAY","array",781],"(",["T_CONSTANT_ENCAPSED_STRING","'id'",781],["T_WHITESPACE"," ",781],["T_DOUBLE_ARROW","=>",781],["T_WHITESPACE"," ",781],["T_VARIABLE","$id",781],")",")",";",["T_WHITESPACE","\n                ",781],["T_RETURN","return",782],";",["T_WHITESPACE","\n            ",782],"}",["T_WHITESPACE","\n        ",783],"}",["T_WHITESPACE","\n\n        ",784],["T_COMMENT","\/\/ display error message\n",786],["T_WHITESPACE","        ",787],["T_STRING","Mage",787],["T_DOUBLE_COLON","::",787],["T_STRING","getSingleton",787],"(",["T_CONSTANT_ENCAPSED_STRING","'adminhtml\/session'",787],")",["T_OBJECT_OPERATOR","->",787],["T_STRING","addError",787],"(",["T_VARIABLE","$this",787],["T_OBJECT_OPERATOR","->",787],["T_STRING","__",787],"(",["T_CONSTANT_ENCAPSED_STRING","'Unable to find template to delete.'",787],")",")",";",["T_WHITESPACE","\n    ",787],"}",["T_WHITESPACE","\n\n    ",788],["T_DOC_COMMENT","\/**\n     * Check the permission to run it\n     *\n     * @return boolean\n     *\/",790],["T_WHITESPACE","\n    ",794],["T_PROTECTED","protected",795],["T_WHITESPACE"," ",795],["T_FUNCTION","function",795],["T_WHITESPACE"," ",795],["T_STRING","_isAllowed",795],"(",")",["T_WHITESPACE","\n    ",795],"{",["T_WHITESPACE","\n        ",796],["T_RETURN","return",797],["T_WHITESPACE"," ",797],["T_STRING","Mage",797],["T_DOUBLE_COLON","::",797],["T_STRING","getSingleton",797],"(",["T_CONSTANT_ENCAPSED_STRING","'admin\/session'",797],")",["T_OBJECT_OPERATOR","->",797],["T_STRING","isAllowed",797],"(",["T_CONSTANT_ENCAPSED_STRING","'xmlconnect'",797],")",";",["T_WHITESPACE","\n    ",797],"}",["T_WHITESPACE","\n\n    ",798],["T_DOC_COMMENT","\/**\n     * List application submit history\n     *\/",800],["T_WHITESPACE","\n    ",802],["T_PUBLIC","public",803],["T_WHITESPACE"," ",803],["T_FUNCTION","function",803],["T_WHITESPACE"," ",803],["T_STRING","historyAction",803],"(",")",["T_WHITESPACE","\n    ",803],"{",["T_WHITESPACE","\n        ",804],["T_VARIABLE","$this",805],["T_OBJECT_OPERATOR","->",805],["T_STRING","loadLayout",805],"(",")",";",["T_WHITESPACE","\n        ",805],["T_VARIABLE","$this",806],["T_OBJECT_OPERATOR","->",806],["T_STRING","_setActiveMenu",806],"(",["T_CONSTANT_ENCAPSED_STRING","'xmlconnect\/history'",806],")",";",["T_WHITESPACE","\n        ",806],["T_VARIABLE","$this",807],["T_OBJECT_OPERATOR","->",807],["T_STRING","renderLayout",807],"(",")",";",["T_WHITESPACE","\n    ",807],"}",["T_WHITESPACE","\n\n    ",808],["T_DOC_COMMENT","\/**\n     * Render apps grid\n     *\n     * @return null\n     *\/",810],["T_WHITESPACE","\n    ",814],["T_PUBLIC","public",815],["T_WHITESPACE"," ",815],["T_FUNCTION","function",815],["T_WHITESPACE"," ",815],["T_STRING","gridAction",815],"(",")",["T_WHITESPACE","\n    ",815],"{",["T_WHITESPACE","\n        ",816],["T_VARIABLE","$this",817],["T_OBJECT_OPERATOR","->",817],["T_STRING","loadLayout",817],"(",["T_STRING","false",817],")",";",["T_WHITESPACE","\n        ",817],["T_VARIABLE","$this",818],["T_OBJECT_OPERATOR","->",818],["T_STRING","_setActiveMenu",818],"(",["T_CONSTANT_ENCAPSED_STRING","'xmlconnect\/mobile'",818],")",";",["T_WHITESPACE","\n        ",818],["T_VARIABLE","$this",819],["T_OBJECT_OPERATOR","->",819],["T_STRING","renderLayout",819],"(",")",";",["T_WHITESPACE","\n    ",819],"}",["T_WHITESPACE","\n\n    ",820],["T_DOC_COMMENT","\/**\n     * Process all uploaded files\n     * setup file names to the configuration return array\n     *\n     * @todo remove this method from controller\n     * @param array $data\n     * @param bool $restore\n     * @return array\n     *\/",822],["T_WHITESPACE","\n    ",830],["T_PROTECTED","protected",831],["T_WHITESPACE"," ",831],["T_FUNCTION","function",831],["T_WHITESPACE"," ",831],["T_STRING","_processUploadedFiles",831],"(",["T_VARIABLE","$data",831],",",["T_WHITESPACE"," ",831],["T_VARIABLE","$restore",831],["T_WHITESPACE"," ",831],"=",["T_WHITESPACE"," ",831],["T_STRING","false",831],")",["T_WHITESPACE","\n    ",831],"{",["T_WHITESPACE","\n        ",832],["T_IF","if",833],["T_WHITESPACE"," ",833],"(",["T_VARIABLE","$restore",833],["T_WHITESPACE"," ",833],["T_IS_IDENTICAL","===",833],["T_WHITESPACE"," ",833],["T_STRING","true",833],")",["T_WHITESPACE"," ",833],"{",["T_WHITESPACE","\n            ",833],["T_VARIABLE","$this",834],["T_OBJECT_OPERATOR","->",834],["T_STRING","_uploadedFiles",834],["T_WHITESPACE"," ",834],"=",["T_WHITESPACE"," ",834],["T_STRING","Mage",834],["T_DOUBLE_COLON","::",834],["T_STRING","getSingleton",834],"(",["T_CONSTANT_ENCAPSED_STRING","'adminhtml\/session'",834],")",["T_OBJECT_OPERATOR","->",834],["T_STRING","getUploadedFilesFormDataSubmit",834],"(",")",";",["T_WHITESPACE","\n        ",834],"}",["T_WHITESPACE","\n        ",835],["T_IF","if",836],["T_WHITESPACE"," ",836],"(","!",["T_ISSET","isset",836],"(",["T_VARIABLE","$this",836],["T_OBJECT_OPERATOR","->",836],["T_STRING","_uploadedFiles",836],")",["T_WHITESPACE"," ",836],["T_BOOLEAN_OR","||",836],["T_WHITESPACE"," ",836],"!",["T_STRING","is_array",836],"(",["T_VARIABLE","$this",836],["T_OBJECT_OPERATOR","->",836],["T_STRING","_uploadedFiles",836],")",")",["T_WHITESPACE"," ",836],"{",["T_WHITESPACE","\n            ",836],["T_VARIABLE","$this",837],["T_OBJECT_OPERATOR","->",837],["T_STRING","_uploadedFiles",837],["T_WHITESPACE"," ",837],"=",["T_WHITESPACE"," ",837],["T_ARRAY","array",837],"(",")",";",["T_WHITESPACE","\n        ",837],"}",["T_WHITESPACE","\n\n        ",838],["T_IF","if",840],["T_WHITESPACE"," ",840],"(","!",["T_EMPTY","empty",840],"(",["T_VARIABLE","$_FILES",840],")",")",["T_WHITESPACE"," ",840],"{",["T_WHITESPACE","\n            ",840],["T_FOREACH","foreach",841],["T_WHITESPACE"," ",841],"(",["T_VARIABLE","$_FILES",841],["T_WHITESPACE"," ",841],["T_AS","as",841],["T_WHITESPACE"," ",841],["T_VARIABLE","$field",841],["T_WHITESPACE"," ",841],["T_DOUBLE_ARROW","=>",841],["T_WHITESPACE"," ",841],["T_VARIABLE","$file",841],")",["T_WHITESPACE"," ",841],"{",["T_WHITESPACE","\n                ",841],["T_IF","if",842],["T_WHITESPACE"," ",842],"(","!",["T_EMPTY","empty",842],"(",["T_VARIABLE","$file",842],"[",["T_CONSTANT_ENCAPSED_STRING","'name'",842],"]",")",["T_WHITESPACE"," ",842],["T_BOOLEAN_AND","&&",842],["T_WHITESPACE"," ",842],["T_STRING","is_scalar",842],"(",["T_VARIABLE","$file",842],"[",["T_CONSTANT_ENCAPSED_STRING","'name'",842],"]",")",")",["T_WHITESPACE"," ",842],"{",["T_WHITESPACE","\n                    ",842],["T_VARIABLE","$uploadedFileName",843],["T_WHITESPACE"," ",843],"=",["T_WHITESPACE"," ",843],["T_STRING","Mage",843],["T_DOUBLE_COLON","::",843],["T_STRING","helper",843],"(",["T_CONSTANT_ENCAPSED_STRING","'xmlconnect\/image'",843],")",["T_OBJECT_OPERATOR","->",843],["T_STRING","handleUpload",843],"(",["T_VARIABLE","$field",843],")",";",["T_WHITESPACE","\n                    ",843],["T_IF","if",844],["T_WHITESPACE"," ",844],"(","!",["T_EMPTY","empty",844],"(",["T_VARIABLE","$uploadedFileName",844],")",")",["T_WHITESPACE"," ",844],"{",["T_WHITESPACE","\n                        ",844],["T_VARIABLE","$this",845],["T_OBJECT_OPERATOR","->",845],["T_STRING","_uploadedFiles",845],"[",["T_VARIABLE","$field",845],"]",["T_WHITESPACE"," ",845],"=",["T_WHITESPACE"," ",845],["T_VARIABLE","$uploadedFileName",845],";",["T_WHITESPACE","\n                    ",845],"}",["T_WHITESPACE","\n                ",846],"}",["T_WHITESPACE","\n            ",847],"}",["T_WHITESPACE","\n        ",848],"}",["T_WHITESPACE","\n\n        ",849],["T_FOREACH","foreach",851],["T_WHITESPACE"," ",851],"(",["T_VARIABLE","$this",851],["T_OBJECT_OPERATOR","->",851],["T_STRING","_uploadedFiles",851],["T_WHITESPACE"," ",851],["T_AS","as",851],["T_WHITESPACE"," ",851],["T_VARIABLE","$fieldPath",851],["T_WHITESPACE"," ",851],["T_DOUBLE_ARROW","=>",851],["T_WHITESPACE"," ",851],["T_VARIABLE","$fileName",851],")",["T_WHITESPACE"," ",851],"{",["T_WHITESPACE","\n            ",851],["T_STRING","Mage",852],["T_DOUBLE_COLON","::",852],["T_STRING","helper",852],"(",["T_CONSTANT_ENCAPSED_STRING","'xmlconnect'",852],")",["T_OBJECT_OPERATOR","->",852],["T_STRING","_injectFieldToArray",852],"(",["T_VARIABLE","$data",852],",",["T_WHITESPACE"," ",852],["T_VARIABLE","$fieldPath",852],",",["T_WHITESPACE"," ",852],["T_VARIABLE","$fileName",852],")",";",["T_WHITESPACE","\n        ",852],"}",["T_WHITESPACE","\n        ",853],["T_STRING","Mage",854],["T_DOUBLE_COLON","::",854],["T_STRING","getSingleton",854],"(",["T_CONSTANT_ENCAPSED_STRING","'adminhtml\/session'",854],")",["T_OBJECT_OPERATOR","->",854],["T_STRING","setUploadedFilesFormData",854],"(",["T_VARIABLE","$this",854],["T_OBJECT_OPERATOR","->",854],["T_STRING","_uploadedFiles",854],")",";",["T_WHITESPACE","\n        ",854],["T_IF","if",855],["T_WHITESPACE"," ",855],"(",["T_VARIABLE","$restore",855],["T_WHITESPACE"," ",855],["T_IS_IDENTICAL","===",855],["T_WHITESPACE"," ",855],["T_STRING","true",855],")",["T_WHITESPACE"," ",855],"{",["T_WHITESPACE","\n            ",855],["T_STRING","Mage",856],["T_DOUBLE_COLON","::",856],["T_STRING","getSingleton",856],"(",["T_CONSTANT_ENCAPSED_STRING","'adminhtml\/session'",856],")",["T_OBJECT_OPERATOR","->",856],["T_STRING","setUploadedFilesFormDataSubmit",856],"(",["T_VARIABLE","$this",856],["T_OBJECT_OPERATOR","->",856],["T_STRING","_uploadedFiles",856],")",";",["T_WHITESPACE","\n        ",856],"}",["T_WHITESPACE","\n        ",857],["T_RETURN","return",858],["T_WHITESPACE"," ",858],["T_VARIABLE","$data",858],";",["T_WHITESPACE","\n    ",858],"}",["T_WHITESPACE","\n\n    ",859],["T_DOC_COMMENT","\/**\n     * Prepare post data\n     * Retains previous data in the object.\n     *\n     * @todo remove this method from controller\n     * @param array $arr\n     * @return array\n     *\/",861],["T_WHITESPACE","\n    ",868],["T_PUBLIC","public",869],["T_WHITESPACE"," ",869],["T_FUNCTION","function",869],["T_WHITESPACE"," ",869],["T_STRING","_preparePostData",869],"(",["T_ARRAY","array",869],["T_WHITESPACE"," ",869],["T_VARIABLE","$arr",869],")",["T_WHITESPACE","\n    ",869],"{",["T_WHITESPACE","\n        ",870],["T_UNSET","unset",871],"(",["T_VARIABLE","$arr",871],"[",["T_CONSTANT_ENCAPSED_STRING","'code'",871],"]",")",";",["T_WHITESPACE","\n\n        ",871],["T_VARIABLE","$pageId",873],["T_WHITESPACE"," ",873],"=",["T_WHITESPACE"," ",873],["T_LNUMBER","0",873],";",["T_WHITESPACE","\n        ",873],["T_IF","if",874],["T_WHITESPACE"," ",874],"(","!",["T_EMPTY","empty",874],"(",["T_VARIABLE","$arr",874],"[",["T_CONSTANT_ENCAPSED_STRING","'config_data'",874],"]",")",")",["T_WHITESPACE"," ",874],"{",["T_WHITESPACE","\n            ",874],["T_FOREACH","foreach",875],["T_WHITESPACE"," ",875],"(",["T_VARIABLE","$arr",875],"[",["T_CONSTANT_ENCAPSED_STRING","'config_data'",875],"]",["T_WHITESPACE"," ",875],["T_AS","as",875],["T_WHITESPACE"," ",875],["T_VARIABLE","$path",875],["T_WHITESPACE"," ",875],["T_DOUBLE_ARROW","=>",875],["T_WHITESPACE"," ",875],["T_VARIABLE","$data",875],")",["T_WHITESPACE"," ",875],"{",["T_WHITESPACE","\n                ",875],["T_IF","if",876],["T_WHITESPACE"," ",876],"(","!",["T_STRING","preg_match",876],"(",["T_CONSTANT_ENCAPSED_STRING","'\/^pages:staticpage\\\/(\\d+)$\/'",876],",",["T_WHITESPACE"," ",876],["T_VARIABLE","$path",876],",",["T_WHITESPACE"," ",876],["T_VARIABLE","$pageData",876],")",["T_WHITESPACE","\n                    ",876],["T_BOOLEAN_OR","||",877],["T_WHITESPACE"," ",877],["T_EMPTY","empty",877],"(",["T_VARIABLE","$data",877],"[",["T_CONSTANT_ENCAPSED_STRING","'label'",877],"]",")",["T_WHITESPACE"," ",877],["T_BOOLEAN_OR","||",877],["T_WHITESPACE"," ",877],["T_EMPTY","empty",877],"(",["T_VARIABLE","$data",877],"[",["T_CONSTANT_ENCAPSED_STRING","'id'",877],"]",")",["T_WHITESPACE","\n                ",877],")",["T_WHITESPACE"," ",878],"{",["T_WHITESPACE","\n                    ",878],["T_CONTINUE","continue",879],";",["T_WHITESPACE","\n                ",879],"}",["T_WHITESPACE","\n                ",880],["T_LIST","list",881],"(",["T_VARIABLE","$savedPath",881],",",["T_WHITESPACE"," ",881],["T_VARIABLE","$pageId",881],")",["T_WHITESPACE"," ",881],"=",["T_WHITESPACE"," ",881],["T_VARIABLE","$pageData",881],";",["T_WHITESPACE","\n                ",881],["T_VARIABLE","$arr",882],"[",["T_CONSTANT_ENCAPSED_STRING","'config_data'",882],"]","[",["T_CONSTANT_ENCAPSED_STRING","'pages:staticpage\/'",882],["T_WHITESPACE"," ",882],".",["T_WHITESPACE"," ",882],["T_VARIABLE","$pageId",882],"]",["T_WHITESPACE"," ",882],"=",["T_WHITESPACE"," ",882],["T_STRING","serialize",882],"(",["T_VARIABLE","$data",882],")",";",["T_WHITESPACE","\n            ",882],"}",["T_WHITESPACE","\n        ",883],"}",["T_WHITESPACE","\n        ",884],["T_IF","if",885],["T_WHITESPACE"," ",885],"(",["T_ISSET","isset",885],"(",["T_VARIABLE","$arr",885],"[",["T_CONSTANT_ENCAPSED_STRING","'config_data'",885],"]","[",["T_CONSTANT_ENCAPSED_STRING","'new_pages'",885],"]",")",")",["T_WHITESPACE"," ",885],"{",["T_WHITESPACE","\n            ",885],["T_VARIABLE","$pageId",886],["T_INC","++",886],";",["T_WHITESPACE","\n            ",886],["T_FOREACH","foreach",887],["T_WHITESPACE"," ",887],"(",["T_VARIABLE","$arr",887],"[",["T_CONSTANT_ENCAPSED_STRING","'config_data'",887],"]","[",["T_CONSTANT_ENCAPSED_STRING","'new_pages'",887],"]",["T_WHITESPACE"," ",887],["T_AS","as",887],["T_WHITESPACE"," ",887],["T_VARIABLE","$page",887],")",["T_WHITESPACE"," ",887],"{",["T_WHITESPACE","\n                ",887],["T_IF","if",888],["T_WHITESPACE"," ",888],"(",["T_EMPTY","empty",888],"(",["T_VARIABLE","$page",888],"[",["T_CONSTANT_ENCAPSED_STRING","'label'",888],"]",")",["T_WHITESPACE"," ",888],["T_BOOLEAN_OR","||",888],["T_WHITESPACE"," ",888],["T_EMPTY","empty",888],"(",["T_VARIABLE","$page",888],"[",["T_CONSTANT_ENCAPSED_STRING","'id'",888],"]",")",")",["T_WHITESPACE"," ",888],"{",["T_WHITESPACE","\n                    ",888],["T_CONTINUE","continue",889],";",["T_WHITESPACE","\n                ",889],"}",["T_WHITESPACE","\n                ",890],["T_VARIABLE","$arr",891],"[",["T_CONSTANT_ENCAPSED_STRING","'config_data'",891],"]","[",["T_CONSTANT_ENCAPSED_STRING","'pages:staticpage\/'",891],["T_WHITESPACE"," ",891],".",["T_WHITESPACE"," ",891],["T_VARIABLE","$pageId",891],"]",["T_WHITESPACE"," ",891],"=",["T_WHITESPACE"," ",891],["T_STRING","serialize",891],"(",["T_VARIABLE","$page",891],")",";",["T_WHITESPACE","\n                ",891],["T_VARIABLE","$pageId",892],["T_INC","++",892],";",["T_WHITESPACE","\n            ",892],"}",["T_WHITESPACE","\n            ",893],["T_UNSET","unset",894],"(",["T_VARIABLE","$arr",894],"[",["T_CONSTANT_ENCAPSED_STRING","'config_data'",894],"]","[",["T_CONSTANT_ENCAPSED_STRING","'new_pages'",894],"]",")",";",["T_WHITESPACE","\n        ",894],"}",["T_WHITESPACE","\n\n        ",895],["T_DOC_COMMENT","\/**\n         * Check cache settings\n         *\/",897],["T_WHITESPACE","\n        ",899],["T_VARIABLE","$lifetime",900],["T_WHITESPACE"," ",900],"=",["T_WHITESPACE"," ",900],"&",["T_VARIABLE","$arr",900],"[",["T_CONSTANT_ENCAPSED_STRING","'conf'",900],"]","[",["T_CONSTANT_ENCAPSED_STRING","'native'",900],"]","[",["T_CONSTANT_ENCAPSED_STRING","'cacheLifetime'",900],"]",";",["T_WHITESPACE","\n        ",900],["T_VARIABLE","$lifetime",901],["T_WHITESPACE"," ",901],"=",["T_WHITESPACE"," ",901],["T_VARIABLE","$lifetime",901],["T_WHITESPACE"," ",901],["T_IS_SMALLER_OR_EQUAL","<=",901],["T_WHITESPACE"," ",901],["T_LNUMBER","0",901],["T_WHITESPACE"," ",901],"?",["T_WHITESPACE"," ",901],["T_CONSTANT_ENCAPSED_STRING","''",901],["T_WHITESPACE"," ",901],":",["T_WHITESPACE"," ",901],["T_INT_CAST","(int)",901],["T_VARIABLE","$lifetime",901],";",["T_WHITESPACE","\n\n        ",901],["T_DOC_COMMENT","\/**\n         * Restoring current_theme over selected but not applied theme\n         *\/",903],["T_WHITESPACE","\n        ",905],["T_IF","if",906],["T_WHITESPACE"," ",906],"(",["T_ISSET","isset",906],"(",["T_VARIABLE","$arr",906],"[",["T_CONSTANT_ENCAPSED_STRING","'current_theme'",906],"]",")",")",["T_WHITESPACE"," ",906],"{",["T_WHITESPACE","\n            ",906],["T_VARIABLE","$arr",907],"[",["T_CONSTANT_ENCAPSED_STRING","'conf'",907],"]","[",["T_CONSTANT_ENCAPSED_STRING","'extra'",907],"]","[",["T_CONSTANT_ENCAPSED_STRING","'theme'",907],"]",["T_WHITESPACE"," ",907],"=",["T_WHITESPACE"," ",907],["T_VARIABLE","$arr",907],"[",["T_CONSTANT_ENCAPSED_STRING","'current_theme'",907],"]",";",["T_WHITESPACE","\n        ",907],"}",["T_WHITESPACE","\n        ",908],["T_IF","if",909],["T_WHITESPACE"," ",909],"(","!",["T_ISSET","isset",909],"(",["T_VARIABLE","$arr",909],"[",["T_CONSTANT_ENCAPSED_STRING","'conf'",909],"]","[",["T_CONSTANT_ENCAPSED_STRING","'defaultCheckout'",909],"]",")",")",["T_WHITESPACE"," ",909],"{",["T_WHITESPACE","\n            ",909],["T_VARIABLE","$arr",910],"[",["T_CONSTANT_ENCAPSED_STRING","'conf'",910],"]","[",["T_CONSTANT_ENCAPSED_STRING","'defaultCheckout'",910],"]",["T_WHITESPACE"," ",910],"=",["T_WHITESPACE"," ",910],["T_ARRAY","array",910],"(",")",";",["T_WHITESPACE","\n        ",910],"}",["T_WHITESPACE","\n        ",911],["T_IF","if",912],["T_WHITESPACE"," ",912],"(","!",["T_ISSET","isset",912],"(",["T_VARIABLE","$arr",912],"[",["T_CONSTANT_ENCAPSED_STRING","'conf'",912],"]","[",["T_CONSTANT_ENCAPSED_STRING","'defaultCheckout'",912],"]","[",["T_CONSTANT_ENCAPSED_STRING","'isActive'",912],"]",")",")",["T_WHITESPACE"," ",912],"{",["T_WHITESPACE","\n            ",912],["T_VARIABLE","$arr",913],"[",["T_CONSTANT_ENCAPSED_STRING","'conf'",913],"]","[",["T_CONSTANT_ENCAPSED_STRING","'defaultCheckout'",913],"]","[",["T_CONSTANT_ENCAPSED_STRING","'isActive'",913],"]",["T_WHITESPACE"," ",913],"=",["T_WHITESPACE"," ",913],["T_LNUMBER","0",913],";",["T_WHITESPACE","\n        ",913],"}",["T_WHITESPACE","\n\n        ",914],["T_IF","if",916],["T_WHITESPACE"," ",916],"(","!",["T_ISSET","isset",916],"(",["T_VARIABLE","$arr",916],"[",["T_CONSTANT_ENCAPSED_STRING","'conf'",916],"]","[",["T_CONSTANT_ENCAPSED_STRING","'paypal'",916],"]",")",")",["T_WHITESPACE"," ",916],"{",["T_WHITESPACE","\n            ",916],["T_VARIABLE","$arr",917],"[",["T_CONSTANT_ENCAPSED_STRING","'conf'",917],"]","[",["T_CONSTANT_ENCAPSED_STRING","'paypal'",917],"]",["T_WHITESPACE"," ",917],"=",["T_WHITESPACE"," ",917],["T_ARRAY","array",917],"(",")",";",["T_WHITESPACE","\n        ",917],"}",["T_WHITESPACE","\n        ",918],["T_IF","if",919],["T_WHITESPACE"," ",919],"(","!",["T_ISSET","isset",919],"(",["T_VARIABLE","$arr",919],"[",["T_CONSTANT_ENCAPSED_STRING","'conf'",919],"]","[",["T_CONSTANT_ENCAPSED_STRING","'paypal'",919],"]","[",["T_CONSTANT_ENCAPSED_STRING","'isActive'",919],"]",")",")",["T_WHITESPACE"," ",919],"{",["T_WHITESPACE","\n            ",919],["T_VARIABLE","$arr",920],"[",["T_CONSTANT_ENCAPSED_STRING","'conf'",920],"]","[",["T_CONSTANT_ENCAPSED_STRING","'paypal'",920],"]","[",["T_CONSTANT_ENCAPSED_STRING","'isActive'",920],"]",["T_WHITESPACE"," ",920],"=",["T_WHITESPACE"," ",920],["T_LNUMBER","0",920],";",["T_WHITESPACE","\n        ",920],"}",["T_WHITESPACE","\n        ",921],["T_RETURN","return",922],["T_WHITESPACE"," ",922],["T_VARIABLE","$arr",922],";",["T_WHITESPACE","\n    ",922],"}",["T_WHITESPACE","\n\n    ",923],["T_DOC_COMMENT","\/**\n     * Submission history grid action on submission history tab\n     *\/",925],["T_WHITESPACE","\n    ",927],["T_PUBLIC","public",928],["T_WHITESPACE"," ",928],["T_FUNCTION","function",928],["T_WHITESPACE"," ",928],["T_STRING","submissionHistoryGridAction",928],"(",")",["T_WHITESPACE","\n    ",928],"{",["T_WHITESPACE","\n        ",929],["T_VARIABLE","$this",930],["T_OBJECT_OPERATOR","->",930],["T_STRING","_initApp",930],"(",")",";",["T_WHITESPACE","\n        ",930],["T_VARIABLE","$this",931],["T_OBJECT_OPERATOR","->",931],["T_STRING","loadLayout",931],"(",")",";",["T_WHITESPACE","\n        ",931],["T_VARIABLE","$this",932],["T_OBJECT_OPERATOR","->",932],["T_STRING","renderLayout",932],"(",")",";",["T_WHITESPACE","\n    ",932],"}",["T_WHITESPACE","\n\n    ",933],["T_DOC_COMMENT","\/**\n     * Initialize message queue\n     *\n     * @param string $paramName\n     * @return Mage_XmlConnect_Model_Queue\n     *\/",935],["T_WHITESPACE","\n    ",940],["T_PROTECTED","protected",941],["T_WHITESPACE"," ",941],["T_FUNCTION","function",941],["T_WHITESPACE"," ",941],["T_STRING","_initMessage",941],"(",["T_VARIABLE","$paramName",941],["T_WHITESPACE"," ",941],"=",["T_WHITESPACE"," ",941],["T_CONSTANT_ENCAPSED_STRING","'id'",941],")",["T_WHITESPACE","\n    ",941],"{",["T_WHITESPACE","\n        ",942],["T_VARIABLE","$id",943],["T_WHITESPACE"," ",943],"=",["T_WHITESPACE"," ",943],["T_INT_CAST","(int)",943],["T_WHITESPACE"," ",943],["T_VARIABLE","$this",943],["T_OBJECT_OPERATOR","->",943],["T_STRING","getRequest",943],"(",")",["T_OBJECT_OPERATOR","->",943],["T_STRING","getParam",943],"(",["T_VARIABLE","$paramName",943],")",";",["T_WHITESPACE","\n        ",943],["T_VARIABLE","$message",944],["T_WHITESPACE"," ",944],"=",["T_WHITESPACE"," ",944],["T_STRING","Mage",944],["T_DOUBLE_COLON","::",944],["T_STRING","getModel",944],"(",["T_CONSTANT_ENCAPSED_STRING","'xmlconnect\/queue'",944],")",["T_OBJECT_OPERATOR","->",944],["T_STRING","load",944],"(",["T_VARIABLE","$id",944],")",";",["T_WHITESPACE","\n        ",944],["T_STRING","Mage",945],["T_DOUBLE_COLON","::",945],["T_STRING","unregister",945],"(",["T_CONSTANT_ENCAPSED_STRING","'current_message'",945],")",";",["T_WHITESPACE","\n        ",945],["T_STRING","Mage",946],["T_DOUBLE_COLON","::",946],["T_STRING","register",946],"(",["T_CONSTANT_ENCAPSED_STRING","'current_message'",946],",",["T_WHITESPACE"," ",946],["T_VARIABLE","$message",946],")",";",["T_WHITESPACE","\n        ",946],["T_RETURN","return",947],["T_WHITESPACE"," ",947],["T_VARIABLE","$message",947],";",["T_WHITESPACE","\n    ",947],"}",["T_WHITESPACE","\n\n    ",948],["T_DOC_COMMENT","\/**\n     * Initialize Template object\n     *\n     * @param string $paramName\n     * @return Mage_XmlConnect_Model_Template\n     *\/",950],["T_WHITESPACE","\n    ",955],["T_PROTECTED","protected",956],["T_WHITESPACE"," ",956],["T_FUNCTION","function",956],["T_WHITESPACE"," ",956],["T_STRING","_initTemplate",956],"(",["T_VARIABLE","$paramName",956],["T_WHITESPACE"," ",956],"=",["T_WHITESPACE"," ",956],["T_CONSTANT_ENCAPSED_STRING","'id'",956],")",["T_WHITESPACE","\n    ",956],"{",["T_WHITESPACE","\n        ",957],["T_VARIABLE","$id",958],["T_WHITESPACE"," ",958],"=",["T_WHITESPACE"," ",958],["T_INT_CAST","(int)",958],["T_WHITESPACE"," ",958],["T_VARIABLE","$this",958],["T_OBJECT_OPERATOR","->",958],["T_STRING","getRequest",958],"(",")",["T_OBJECT_OPERATOR","->",958],["T_STRING","getParam",958],"(",["T_VARIABLE","$paramName",958],")",";",["T_WHITESPACE","\n        ",958],["T_VARIABLE","$template",959],["T_WHITESPACE"," ",959],"=",["T_WHITESPACE"," ",959],["T_STRING","Mage",959],["T_DOUBLE_COLON","::",959],["T_STRING","getModel",959],"(",["T_CONSTANT_ENCAPSED_STRING","'xmlconnect\/template'",959],")",["T_OBJECT_OPERATOR","->",959],["T_STRING","load",959],"(",["T_VARIABLE","$id",959],")",";",["T_WHITESPACE","\n        ",959],["T_STRING","Mage",960],["T_DOUBLE_COLON","::",960],["T_STRING","unregister",960],"(",["T_CONSTANT_ENCAPSED_STRING","'current_template'",960],")",";",["T_WHITESPACE","\n        ",960],["T_STRING","Mage",961],["T_DOUBLE_COLON","::",961],["T_STRING","register",961],"(",["T_CONSTANT_ENCAPSED_STRING","'current_template'",961],",",["T_WHITESPACE"," ",961],["T_VARIABLE","$template",961],")",";",["T_WHITESPACE","\n        ",961],["T_RETURN","return",962],["T_WHITESPACE"," ",962],["T_VARIABLE","$template",962],";",["T_WHITESPACE","\n    ",962],"}",["T_WHITESPACE","\n\n    ",963],["T_DOC_COMMENT","\/**\n     * List AirMail message queue grid\n     *\n     * @return null\n     *\/",965],["T_WHITESPACE","\n    ",969],["T_PUBLIC","public",970],["T_WHITESPACE"," ",970],["T_FUNCTION","function",970],["T_WHITESPACE"," ",970],["T_STRING","queueAction",970],"(",")",["T_WHITESPACE","\n    ",970],"{",["T_WHITESPACE","\n        ",971],["T_VARIABLE","$this",972],["T_OBJECT_OPERATOR","->",972],["T_STRING","loadLayout",972],"(",")",";",["T_WHITESPACE","\n        ",972],["T_VARIABLE","$this",973],["T_OBJECT_OPERATOR","->",973],["T_STRING","_setActiveMenu",973],"(",["T_CONSTANT_ENCAPSED_STRING","'xmlconnect\/queue'",973],")",";",["T_WHITESPACE","\n        ",973],["T_VARIABLE","$this",974],["T_OBJECT_OPERATOR","->",974],["T_STRING","renderLayout",974],"(",")",";",["T_WHITESPACE","\n    ",974],"}",["T_WHITESPACE","\n\n    ",975],["T_DOC_COMMENT","\/**\n     * Edit message action\n     *\n     * @return null\n     *\/",977],["T_WHITESPACE","\n    ",981],["T_PUBLIC","public",982],["T_WHITESPACE"," ",982],["T_FUNCTION","function",982],["T_WHITESPACE"," ",982],["T_STRING","editQueueAction",982],"(",")",["T_WHITESPACE","\n    ",982],"{",["T_WHITESPACE","\n        ",983],["T_VARIABLE","$message",984],["T_WHITESPACE"," ",984],"=",["T_WHITESPACE"," ",984],["T_VARIABLE","$this",984],["T_OBJECT_OPERATOR","->",984],["T_STRING","_initMessage",984],"(",")",";",["T_WHITESPACE","\n        ",984],["T_IF","if",985],["T_WHITESPACE"," ",985],"(",["T_VARIABLE","$message",985],["T_OBJECT_OPERATOR","->",985],["T_STRING","getId",985],"(",")",")",["T_WHITESPACE"," ",985],"{",["T_WHITESPACE","\n            ",985],["T_VARIABLE","$this",986],["T_OBJECT_OPERATOR","->",986],["T_STRING","getRequest",986],"(",")",["T_OBJECT_OPERATOR","->",986],["T_STRING","setParam",986],"(",["T_CONSTANT_ENCAPSED_STRING","'template_id'",986],",",["T_WHITESPACE"," ",986],["T_VARIABLE","$message",986],["T_OBJECT_OPERATOR","->",986],["T_STRING","getTemplateId",986],"(",")",")",";",["T_WHITESPACE","\n            ",986],["T_VARIABLE","$this",987],["T_OBJECT_OPERATOR","->",987],["T_STRING","_initTemplate",987],"(",["T_CONSTANT_ENCAPSED_STRING","'template_id'",987],")",";",["T_WHITESPACE","\n        ",987],"}",["T_WHITESPACE","\n        ",988],["T_VARIABLE","$this",989],["T_OBJECT_OPERATOR","->",989],["T_STRING","_forward",989],"(",["T_CONSTANT_ENCAPSED_STRING","'queueMessage'",989],")",";",["T_WHITESPACE","\n    ",989],"}",["T_WHITESPACE","\n\n    ",990],["T_DOC_COMMENT","\/**\n     * Filtering posted data. Converting localized data if needed\n     *\n     * @param array $data\n     * @return array\n     *\/",992],["T_WHITESPACE","\n    ",997],["T_PROTECTED","protected",998],["T_WHITESPACE"," ",998],["T_FUNCTION","function",998],["T_WHITESPACE"," ",998],["T_STRING","_filterPostData",998],"(",["T_VARIABLE","$data",998],")",["T_WHITESPACE","\n    ",998],"{",["T_WHITESPACE","\n        ",999],["T_VARIABLE","$data",1000],["T_WHITESPACE"," ",1000],"=",["T_WHITESPACE"," ",1000],["T_VARIABLE","$this",1000],["T_OBJECT_OPERATOR","->",1000],["T_STRING","_filterDateTime",1000],"(",["T_VARIABLE","$data",1000],",",["T_WHITESPACE"," ",1000],["T_ARRAY","array",1000],"(",["T_CONSTANT_ENCAPSED_STRING","'exec_time'",1000],")",")",";",["T_WHITESPACE","\n        ",1000],["T_RETURN","return",1001],["T_WHITESPACE"," ",1001],["T_VARIABLE","$data",1001],";",["T_WHITESPACE","\n    ",1001],"}",["T_WHITESPACE","\n\n    ",1002],["T_DOC_COMMENT","\/**\n     * Cancel queue action\n     *\n     * @return null\n     *\/",1004],["T_WHITESPACE","\n    ",1008],["T_PUBLIC","public",1009],["T_WHITESPACE"," ",1009],["T_FUNCTION","function",1009],["T_WHITESPACE"," ",1009],["T_STRING","cancelQueueAction",1009],"(",")",["T_WHITESPACE","\n    ",1009],"{",["T_WHITESPACE","\n        ",1010],["T_TRY","try",1011],["T_WHITESPACE"," ",1011],"{",["T_WHITESPACE","\n            ",1011],["T_VARIABLE","$id",1012],["T_WHITESPACE"," ",1012],"=",["T_WHITESPACE"," ",1012],["T_VARIABLE","$this",1012],["T_OBJECT_OPERATOR","->",1012],["T_STRING","getRequest",1012],"(",")",["T_OBJECT_OPERATOR","->",1012],["T_STRING","getParam",1012],"(",["T_CONSTANT_ENCAPSED_STRING","'id'",1012],")",";",["T_WHITESPACE","\n            ",1012],["T_VARIABLE","$message",1013],["T_WHITESPACE"," ",1013],"=",["T_WHITESPACE"," ",1013],["T_VARIABLE","$this",1013],["T_OBJECT_OPERATOR","->",1013],["T_STRING","_initMessage",1013],"(",")",";",["T_WHITESPACE","\n            ",1013],["T_IF","if",1014],["T_WHITESPACE"," ",1014],"(","!",["T_VARIABLE","$message",1014],["T_OBJECT_OPERATOR","->",1014],["T_STRING","getId",1014],"(",")",["T_WHITESPACE"," ",1014],["T_BOOLEAN_AND","&&",1014],["T_WHITESPACE"," ",1014],["T_VARIABLE","$id",1014],")",["T_WHITESPACE"," ",1014],"{",["T_WHITESPACE","\n                ",1014],["T_VARIABLE","$this",1015],["T_OBJECT_OPERATOR","->",1015],["T_STRING","_getSession",1015],"(",")",["T_OBJECT_OPERATOR","->",1015],["T_STRING","addError",1015],"(",["T_VARIABLE","$this",1015],["T_OBJECT_OPERATOR","->",1015],["T_STRING","__",1015],"(",["T_CONSTANT_ENCAPSED_STRING","'Queue does not exist.'",1015],")",")",";",["T_WHITESPACE","\n                ",1015],["T_VARIABLE","$this",1016],["T_OBJECT_OPERATOR","->",1016],["T_STRING","_redirect",1016],"(",["T_CONSTANT_ENCAPSED_STRING","'*\/*\/'",1016],")",";",["T_WHITESPACE","\n                ",1016],["T_RETURN","return",1017],";",["T_WHITESPACE","\n            ",1017],"}",["T_WHITESPACE","\n            ",1018],["T_VARIABLE","$message",1019],["T_OBJECT_OPERATOR","->",1019],["T_STRING","setStatus",1019],"(",["T_STRING","Mage_XmlConnect_Model_Queue",1019],["T_DOUBLE_COLON","::",1019],["T_STRING","STATUS_CANCELED",1019],")",";",["T_WHITESPACE","\n            ",1019],["T_VARIABLE","$message",1020],["T_OBJECT_OPERATOR","->",1020],["T_STRING","save",1020],"(",")",";",["T_WHITESPACE","\n        ",1020],"}",["T_WHITESPACE"," ",1021],["T_CATCH","catch",1021],["T_WHITESPACE"," ",1021],"(",["T_STRING","Mage_Core_Exception",1021],["T_WHITESPACE"," ",1021],["T_VARIABLE","$e",1021],")",["T_WHITESPACE"," ",1021],"{",["T_WHITESPACE","\n            ",1021],["T_VARIABLE","$this",1022],["T_OBJECT_OPERATOR","->",1022],["T_STRING","_getSession",1022],"(",")",["T_OBJECT_OPERATOR","->",1022],["T_STRING","addException",1022],"(",["T_VARIABLE","$e",1022],",",["T_WHITESPACE"," ",1022],["T_VARIABLE","$e",1022],["T_OBJECT_OPERATOR","->",1022],["T_STRING","getMessage",1022],"(",")",")",";",["T_WHITESPACE","\n        ",1022],"}",["T_WHITESPACE"," ",1023],["T_CATCH","catch",1023],["T_WHITESPACE"," ",1023],"(",["T_STRING","Exception",1023],["T_WHITESPACE"," ",1023],["T_VARIABLE","$e",1023],")",["T_WHITESPACE"," ",1023],"{",["T_WHITESPACE","\n            ",1023],["T_VARIABLE","$this",1024],["T_OBJECT_OPERATOR","->",1024],["T_STRING","_getSession",1024],"(",")",["T_OBJECT_OPERATOR","->",1024],["T_STRING","addException",1024],"(",["T_VARIABLE","$e",1024],",",["T_WHITESPACE"," ",1024],["T_VARIABLE","$this",1024],["T_OBJECT_OPERATOR","->",1024],["T_STRING","__",1024],"(",["T_CONSTANT_ENCAPSED_STRING","'Unable to cancel queue.'",1024],")",")",";",["T_WHITESPACE","\n            ",1024],["T_STRING","Mage",1025],["T_DOUBLE_COLON","::",1025],["T_STRING","logException",1025],"(",["T_VARIABLE","$e",1025],")",";",["T_WHITESPACE","\n        ",1025],"}",["T_WHITESPACE","\n\n        ",1026],["T_VARIABLE","$this",1028],["T_OBJECT_OPERATOR","->",1028],["T_STRING","_redirect",1028],"(",["T_CONSTANT_ENCAPSED_STRING","'*\/*\/queue'",1028],")",";",["T_WHITESPACE","\n    ",1028],"}",["T_WHITESPACE","\n\n    ",1029],["T_DOC_COMMENT","\/**\n     * Delete queue action\n     *\n     * @return null\n     *\/",1031],["T_WHITESPACE","\n    ",1035],["T_PUBLIC","public",1036],["T_WHITESPACE"," ",1036],["T_FUNCTION","function",1036],["T_WHITESPACE"," ",1036],["T_STRING","deleteQueueAction",1036],"(",")",["T_WHITESPACE","\n    ",1036],"{",["T_WHITESPACE","\n        ",1037],["T_TRY","try",1038],["T_WHITESPACE"," ",1038],"{",["T_WHITESPACE","\n            ",1038],["T_VARIABLE","$id",1039],["T_WHITESPACE"," ",1039],"=",["T_WHITESPACE"," ",1039],["T_VARIABLE","$this",1039],["T_OBJECT_OPERATOR","->",1039],["T_STRING","getRequest",1039],"(",")",["T_OBJECT_OPERATOR","->",1039],["T_STRING","getParam",1039],"(",["T_CONSTANT_ENCAPSED_STRING","'id'",1039],")",";",["T_WHITESPACE","\n            ",1039],["T_VARIABLE","$message",1040],["T_WHITESPACE"," ",1040],"=",["T_WHITESPACE"," ",1040],["T_VARIABLE","$this",1040],["T_OBJECT_OPERATOR","->",1040],["T_STRING","_initMessage",1040],"(",")",";",["T_WHITESPACE","\n            ",1040],["T_IF","if",1041],["T_WHITESPACE"," ",1041],"(","!",["T_VARIABLE","$message",1041],["T_OBJECT_OPERATOR","->",1041],["T_STRING","getId",1041],"(",")",["T_WHITESPACE"," ",1041],["T_BOOLEAN_AND","&&",1041],["T_WHITESPACE"," ",1041],["T_VARIABLE","$id",1041],")",["T_WHITESPACE"," ",1041],"{",["T_WHITESPACE","\n                ",1041],["T_VARIABLE","$this",1042],["T_OBJECT_OPERATOR","->",1042],["T_STRING","_getSession",1042],"(",")",["T_OBJECT_OPERATOR","->",1042],["T_STRING","addError",1042],"(",["T_VARIABLE","$this",1042],["T_OBJECT_OPERATOR","->",1042],["T_STRING","__",1042],"(",["T_CONSTANT_ENCAPSED_STRING","'Queue does not exist.'",1042],")",")",";",["T_WHITESPACE","\n                ",1042],["T_VARIABLE","$this",1043],["T_OBJECT_OPERATOR","->",1043],["T_STRING","_redirect",1043],"(",["T_CONSTANT_ENCAPSED_STRING","'*\/*\/'",1043],")",";",["T_WHITESPACE","\n                ",1043],["T_RETURN","return",1044],";",["T_WHITESPACE","\n            ",1044],"}",["T_WHITESPACE","\n            ",1045],["T_VARIABLE","$message",1046],["T_OBJECT_OPERATOR","->",1046],["T_STRING","setStatus",1046],"(",["T_STRING","Mage_XmlConnect_Model_Queue",1046],["T_DOUBLE_COLON","::",1046],["T_STRING","STATUS_DELETED",1046],")",";",["T_WHITESPACE","\n            ",1046],["T_VARIABLE","$message",1047],["T_OBJECT_OPERATOR","->",1047],["T_STRING","save",1047],"(",")",";",["T_WHITESPACE","\n        ",1047],"}",["T_WHITESPACE"," ",1048],["T_CATCH","catch",1048],["T_WHITESPACE"," ",1048],"(",["T_STRING","Mage_Core_Exception",1048],["T_WHITESPACE"," ",1048],["T_VARIABLE","$e",1048],")",["T_WHITESPACE"," ",1048],"{",["T_WHITESPACE","\n            ",1048],["T_VARIABLE","$this",1049],["T_OBJECT_OPERATOR","->",1049],["T_STRING","_getSession",1049],"(",")",["T_OBJECT_OPERATOR","->",1049],["T_STRING","addException",1049],"(",["T_VARIABLE","$e",1049],",",["T_WHITESPACE"," ",1049],["T_VARIABLE","$e",1049],["T_OBJECT_OPERATOR","->",1049],["T_STRING","getMessage",1049],"(",")",")",";",["T_WHITESPACE","\n        ",1049],"}",["T_WHITESPACE"," ",1050],["T_CATCH","catch",1050],["T_WHITESPACE"," ",1050],"(",["T_STRING","Exception",1050],["T_WHITESPACE"," ",1050],["T_VARIABLE","$e",1050],")",["T_WHITESPACE"," ",1050],"{",["T_WHITESPACE","\n            ",1050],["T_VARIABLE","$this",1051],["T_OBJECT_OPERATOR","->",1051],["T_STRING","_getSession",1051],"(",")",["T_OBJECT_OPERATOR","->",1051],["T_STRING","addException",1051],"(",["T_VARIABLE","$e",1051],",",["T_WHITESPACE"," ",1051],["T_VARIABLE","$this",1051],["T_OBJECT_OPERATOR","->",1051],["T_STRING","__",1051],"(",["T_CONSTANT_ENCAPSED_STRING","'Unable to delete queue.'",1051],")",")",";",["T_WHITESPACE","\n            ",1051],["T_STRING","Mage",1052],["T_DOUBLE_COLON","::",1052],["T_STRING","logException",1052],"(",["T_VARIABLE","$e",1052],")",";",["T_WHITESPACE","\n        ",1052],"}",["T_WHITESPACE","\n\n        ",1053],["T_VARIABLE","$this",1055],["T_OBJECT_OPERATOR","->",1055],["T_STRING","_redirect",1055],"(",["T_CONSTANT_ENCAPSED_STRING","'*\/*\/queue'",1055],")",";",["T_WHITESPACE","\n    ",1055],"}",["T_WHITESPACE","\n\n    ",1056],["T_DOC_COMMENT","\/**\n     * Cancel selected queue action\n     *\n     * @return null\n     *\/",1058],["T_WHITESPACE","\n    ",1062],["T_PUBLIC","public",1063],["T_WHITESPACE"," ",1063],["T_FUNCTION","function",1063],["T_WHITESPACE"," ",1063],["T_STRING","massCancelQueueAction",1063],"(",")",["T_WHITESPACE","\n    ",1063],"{",["T_WHITESPACE","\n        ",1064],["T_VARIABLE","$queueIds",1065],["T_WHITESPACE"," ",1065],"=",["T_WHITESPACE"," ",1065],["T_VARIABLE","$this",1065],["T_OBJECT_OPERATOR","->",1065],["T_STRING","getRequest",1065],"(",")",["T_OBJECT_OPERATOR","->",1065],["T_STRING","getParam",1065],"(",["T_CONSTANT_ENCAPSED_STRING","'queue'",1065],")",";",["T_WHITESPACE","\n        ",1065],["T_IF","if",1066],"(","!",["T_STRING","is_array",1066],"(",["T_VARIABLE","$queueIds",1066],")",")",["T_WHITESPACE"," ",1066],"{",["T_WHITESPACE","\n             ",1066],["T_STRING","Mage",1067],["T_DOUBLE_COLON","::",1067],["T_STRING","getSingleton",1067],"(",["T_CONSTANT_ENCAPSED_STRING","'adminhtml\/session'",1067],")",["T_OBJECT_OPERATOR","->",1067],["T_STRING","addError",1067],"(",["T_STRING","Mage",1067],["T_DOUBLE_COLON","::",1067],["T_STRING","helper",1067],"(",["T_CONSTANT_ENCAPSED_STRING","'adminhtml'",1067],")",["T_OBJECT_OPERATOR","->",1067],["T_STRING","__",1067],"(",["T_CONSTANT_ENCAPSED_STRING","'Please select message(s).'",1067],")",")",";",["T_WHITESPACE","\n        ",1067],"}",["T_WHITESPACE"," ",1068],["T_ELSE","else",1068],["T_WHITESPACE"," ",1068],"{",["T_WHITESPACE","\n            ",1068],["T_TRY","try",1069],["T_WHITESPACE"," ",1069],"{",["T_WHITESPACE","\n                ",1069],["T_VARIABLE","$queue",1070],["T_WHITESPACE"," ",1070],"=",["T_WHITESPACE"," ",1070],["T_STRING","Mage",1070],["T_DOUBLE_COLON","::",1070],["T_STRING","getModel",1070],"(",["T_CONSTANT_ENCAPSED_STRING","'xmlconnect\/queue'",1070],")",";",["T_WHITESPACE","\n                ",1070],["T_FOREACH","foreach",1071],["T_WHITESPACE"," ",1071],"(",["T_VARIABLE","$queueIds",1071],["T_WHITESPACE"," ",1071],["T_AS","as",1071],["T_WHITESPACE"," ",1071],["T_VARIABLE","$queueId",1071],")",["T_WHITESPACE"," ",1071],"{",["T_WHITESPACE","\n                    ",1071],["T_VARIABLE","$queue",1072],["T_OBJECT_OPERATOR","->",1072],["T_STRING","reset",1072],"(",")",["T_OBJECT_OPERATOR","->",1072],["T_STRING","load",1072],"(",["T_INT_CAST","(int)",1072],["T_VARIABLE","$queueId",1072],")",["T_OBJECT_OPERATOR","->",1072],["T_STRING","setStatus",1072],"(",["T_STRING","Mage_XmlConnect_Model_Queue",1072],["T_DOUBLE_COLON","::",1072],["T_STRING","STATUS_CANCELED",1072],")",["T_WHITESPACE","\n                        ",1072],["T_OBJECT_OPERATOR","->",1073],["T_STRING","save",1073],"(",")",";",["T_WHITESPACE","\n                ",1073],"}",["T_WHITESPACE","\n                ",1074],["T_STRING","Mage",1075],["T_DOUBLE_COLON","::",1075],["T_STRING","getSingleton",1075],"(",["T_CONSTANT_ENCAPSED_STRING","'adminhtml\/session'",1075],")",["T_OBJECT_OPERATOR","->",1075],["T_STRING","addSuccess",1075],"(",["T_WHITESPACE","\n                    ",1075],["T_STRING","Mage",1076],["T_DOUBLE_COLON","::",1076],["T_STRING","helper",1076],"(",["T_CONSTANT_ENCAPSED_STRING","'adminhtml'",1076],")",["T_OBJECT_OPERATOR","->",1076],["T_STRING","__",1076],"(",["T_CONSTANT_ENCAPSED_STRING","'Total of %d record(s) were canceled.'",1076],",",["T_WHITESPACE"," ",1076],["T_STRING","count",1076],"(",["T_VARIABLE","$queueIds",1076],")",")",["T_WHITESPACE","\n                ",1076],")",";",["T_WHITESPACE","\n            ",1077],"}",["T_WHITESPACE"," ",1078],["T_CATCH","catch",1078],["T_WHITESPACE"," ",1078],"(",["T_STRING","Exception",1078],["T_WHITESPACE"," ",1078],["T_VARIABLE","$e",1078],")",["T_WHITESPACE"," ",1078],"{",["T_WHITESPACE","\n                ",1078],["T_STRING","Mage",1079],["T_DOUBLE_COLON","::",1079],["T_STRING","getSingleton",1079],"(",["T_CONSTANT_ENCAPSED_STRING","'adminhtml\/session'",1079],")",["T_OBJECT_OPERATOR","->",1079],["T_STRING","addError",1079],"(",["T_VARIABLE","$e",1079],["T_OBJECT_OPERATOR","->",1079],["T_STRING","getMessage",1079],"(",")",")",";",["T_WHITESPACE","\n            ",1079],"}",["T_WHITESPACE","\n        ",1080],"}",["T_WHITESPACE","\n\n        ",1081],["T_VARIABLE","$this",1083],["T_OBJECT_OPERATOR","->",1083],["T_STRING","_redirect",1083],"(",["T_CONSTANT_ENCAPSED_STRING","'*\/*\/queue'",1083],")",";",["T_WHITESPACE","\n    ",1083],"}",["T_WHITESPACE","\n\n    ",1084],["T_DOC_COMMENT","\/**\n     * Delete selected queue action\n     *\n     * @return null\n     *\/",1086],["T_WHITESPACE","\n    ",1090],["T_PUBLIC","public",1091],["T_WHITESPACE"," ",1091],["T_FUNCTION","function",1091],["T_WHITESPACE"," ",1091],["T_STRING","massDeleteQueueAction",1091],"(",")",["T_WHITESPACE","\n    ",1091],"{",["T_WHITESPACE","\n        ",1092],["T_VARIABLE","$queueIds",1093],["T_WHITESPACE"," ",1093],"=",["T_WHITESPACE"," ",1093],["T_VARIABLE","$this",1093],["T_OBJECT_OPERATOR","->",1093],["T_STRING","getRequest",1093],"(",")",["T_OBJECT_OPERATOR","->",1093],["T_STRING","getParam",1093],"(",["T_CONSTANT_ENCAPSED_STRING","'queue'",1093],")",";",["T_WHITESPACE","\n        ",1093],["T_IF","if",1094],"(","!",["T_STRING","is_array",1094],"(",["T_VARIABLE","$queueIds",1094],")",")",["T_WHITESPACE"," ",1094],"{",["T_WHITESPACE","\n             ",1094],["T_STRING","Mage",1095],["T_DOUBLE_COLON","::",1095],["T_STRING","getSingleton",1095],"(",["T_CONSTANT_ENCAPSED_STRING","'adminhtml\/session'",1095],")",["T_OBJECT_OPERATOR","->",1095],["T_STRING","addError",1095],"(",["T_STRING","Mage",1095],["T_DOUBLE_COLON","::",1095],["T_STRING","helper",1095],"(",["T_CONSTANT_ENCAPSED_STRING","'adminhtml'",1095],")",["T_OBJECT_OPERATOR","->",1095],["T_STRING","__",1095],"(",["T_CONSTANT_ENCAPSED_STRING","'Please select message(s).'",1095],")",")",";",["T_WHITESPACE","\n        ",1095],"}",["T_WHITESPACE"," ",1096],["T_ELSE","else",1096],["T_WHITESPACE"," ",1096],"{",["T_WHITESPACE","\n            ",1096],["T_TRY","try",1097],["T_WHITESPACE"," ",1097],"{",["T_WHITESPACE","\n                ",1097],["T_VARIABLE","$queue",1098],["T_WHITESPACE"," ",1098],"=",["T_WHITESPACE"," ",1098],["T_STRING","Mage",1098],["T_DOUBLE_COLON","::",1098],["T_STRING","getModel",1098],"(",["T_CONSTANT_ENCAPSED_STRING","'xmlconnect\/queue'",1098],")",";",["T_WHITESPACE","\n                ",1098],["T_FOREACH","foreach",1099],["T_WHITESPACE"," ",1099],"(",["T_VARIABLE","$queueIds",1099],["T_WHITESPACE"," ",1099],["T_AS","as",1099],["T_WHITESPACE"," ",1099],["T_VARIABLE","$queueId",1099],")",["T_WHITESPACE"," ",1099],"{",["T_WHITESPACE","\n                    ",1099],["T_VARIABLE","$queue",1100],["T_OBJECT_OPERATOR","->",1100],["T_STRING","reset",1100],"(",")",["T_OBJECT_OPERATOR","->",1100],["T_STRING","load",1100],"(",["T_VARIABLE","$queueId",1100],")",["T_OBJECT_OPERATOR","->",1100],["T_STRING","setStatus",1100],"(",["T_STRING","Mage_XmlConnect_Model_Queue",1100],["T_DOUBLE_COLON","::",1100],["T_STRING","STATUS_DELETED",1100],")",["T_OBJECT_OPERATOR","->",1100],["T_STRING","save",1100],"(",")",";",["T_WHITESPACE","\n                ",1100],"}",["T_WHITESPACE","\n                ",1101],["T_STRING","Mage",1102],["T_DOUBLE_COLON","::",1102],["T_STRING","getSingleton",1102],"(",["T_CONSTANT_ENCAPSED_STRING","'adminhtml\/session'",1102],")",["T_OBJECT_OPERATOR","->",1102],["T_STRING","addSuccess",1102],"(",["T_WHITESPACE","\n                    ",1102],["T_STRING","Mage",1103],["T_DOUBLE_COLON","::",1103],["T_STRING","helper",1103],"(",["T_CONSTANT_ENCAPSED_STRING","'adminhtml'",1103],")",["T_OBJECT_OPERATOR","->",1103],["T_STRING","__",1103],"(",["T_CONSTANT_ENCAPSED_STRING","'Total of %d record(s) were deleted.'",1103],",",["T_WHITESPACE"," ",1103],["T_STRING","count",1103],"(",["T_VARIABLE","$queueIds",1103],")",")",["T_WHITESPACE","\n                ",1103],")",";",["T_WHITESPACE","\n            ",1104],"}",["T_WHITESPACE"," ",1105],["T_CATCH","catch",1105],["T_WHITESPACE"," ",1105],"(",["T_STRING","Exception",1105],["T_WHITESPACE"," ",1105],["T_VARIABLE","$e",1105],")",["T_WHITESPACE"," ",1105],"{",["T_WHITESPACE","\n                ",1105],["T_STRING","Mage",1106],["T_DOUBLE_COLON","::",1106],["T_STRING","getSingleton",1106],"(",["T_CONSTANT_ENCAPSED_STRING","'adminhtml\/session'",1106],")",["T_OBJECT_OPERATOR","->",1106],["T_STRING","addError",1106],"(",["T_VARIABLE","$e",1106],["T_OBJECT_OPERATOR","->",1106],["T_STRING","getMessage",1106],"(",")",")",";",["T_WHITESPACE","\n            ",1106],"}",["T_WHITESPACE","\n        ",1107],"}",["T_WHITESPACE","\n\n        ",1108],["T_VARIABLE","$this",1110],["T_OBJECT_OPERATOR","->",1110],["T_STRING","_redirect",1110],"(",["T_CONSTANT_ENCAPSED_STRING","'*\/*\/queue'",1110],")",";",["T_WHITESPACE","\n    ",1110],"}",["T_WHITESPACE","\n\n    ",1111],["T_DOC_COMMENT","\/**\n     * Save AirMail message action\n     *\n     * @return null\n     *\/",1113],["T_WHITESPACE","\n    ",1117],["T_PUBLIC","public",1118],["T_WHITESPACE"," ",1118],["T_FUNCTION","function",1118],["T_WHITESPACE"," ",1118],["T_STRING","saveMessageAction",1118],"(",")",["T_WHITESPACE","\n    ",1118],"{",["T_WHITESPACE","\n        ",1119],["T_VARIABLE","$data",1120],["T_WHITESPACE","         ",1120],"=",["T_WHITESPACE"," ",1120],["T_VARIABLE","$this",1120],["T_OBJECT_OPERATOR","->",1120],["T_STRING","_filterPostData",1120],"(",["T_VARIABLE","$this",1120],["T_OBJECT_OPERATOR","->",1120],["T_STRING","getRequest",1120],"(",")",["T_OBJECT_OPERATOR","->",1120],["T_STRING","getPost",1120],"(",")",")",";",["T_WHITESPACE","\n        ",1120],["T_VARIABLE","$isError",1121],["T_WHITESPACE","      ",1121],"=",["T_WHITESPACE"," ",1121],["T_STRING","false",1121],";",["T_WHITESPACE","\n        ",1121],["T_VARIABLE","$message",1122],["T_WHITESPACE","      ",1122],"=",["T_WHITESPACE"," ",1122],["T_STRING","false",1122],";",["T_WHITESPACE","\n\n        ",1122],["T_IF","if",1124],["T_WHITESPACE"," ",1124],"(",["T_VARIABLE","$data",1124],")",["T_WHITESPACE"," ",1124],"{",["T_WHITESPACE","\n            ",1124],["T_TRY","try",1125],["T_WHITESPACE"," ",1125],"{",["T_WHITESPACE","\n                ",1125],["T_VARIABLE","$data",1126],["T_WHITESPACE"," ",1126],"=",["T_WHITESPACE"," ",1126],["T_STRING","Mage",1126],["T_DOUBLE_COLON","::",1126],["T_STRING","getModel",1126],"(",["T_CONSTANT_ENCAPSED_STRING","'core\/input_filter_maliciousCode'",1126],")",["T_OBJECT_OPERATOR","->",1126],["T_STRING","filter",1126],"(",["T_VARIABLE","$data",1126],")",";",["T_WHITESPACE","\n                ",1126],["T_VARIABLE","$template",1127],["T_WHITESPACE"," ",1127],"=",["T_WHITESPACE"," ",1127],["T_VARIABLE","$this",1127],["T_OBJECT_OPERATOR","->",1127],["T_STRING","_initTemplate",1127],"(",["T_CONSTANT_ENCAPSED_STRING","'template_id'",1127],")",";",["T_WHITESPACE","\n                ",1127],["T_VARIABLE","$message",1128],["T_WHITESPACE"," ",1128],"=",["T_WHITESPACE"," ",1128],["T_VARIABLE","$this",1128],["T_OBJECT_OPERATOR","->",1128],["T_STRING","_initMessage",1128],"(",")",";",["T_WHITESPACE","\n\n                ",1128],["T_IF","if",1130],["T_WHITESPACE"," ",1130],"(","!",["T_VARIABLE","$template",1130],["T_OBJECT_OPERATOR","->",1130],["T_STRING","getId",1130],"(",")",["T_WHITESPACE"," ",1130],["T_BOOLEAN_AND","&&",1130],["T_WHITESPACE"," ",1130],"!",["T_VARIABLE","$message",1130],["T_OBJECT_OPERATOR","->",1130],["T_STRING","getTemplateId",1130],"(",")",")",["T_WHITESPACE"," ",1130],"{",["T_WHITESPACE","\n                    ",1130],["T_VARIABLE","$this",1131],["T_OBJECT_OPERATOR","->",1131],["T_STRING","_getSession",1131],"(",")",["T_OBJECT_OPERATOR","->",1131],["T_STRING","addError",1131],"(",["T_VARIABLE","$this",1131],["T_OBJECT_OPERATOR","->",1131],["T_STRING","__",1131],"(",["T_CONSTANT_ENCAPSED_STRING","'Template for new AirMail Message does not exist.'",1131],")",")",";",["T_WHITESPACE","\n                    ",1131],["T_VARIABLE","$this",1132],["T_OBJECT_OPERATOR","->",1132],["T_STRING","_redirect",1132],"(",["T_CONSTANT_ENCAPSED_STRING","'*\/*\/queue'",1132],")",";",["T_WHITESPACE","\n                    ",1132],["T_RETURN","return",1133],";",["T_WHITESPACE","\n                ",1133],"}",["T_WHITESPACE","\n\n                ",1134],["T_DOC_COMMENT","\/** @var $app Mage_XmlConnect_Model_Application *\/",1136],["T_WHITESPACE","\n                ",1136],["T_VARIABLE","$app",1137],["T_WHITESPACE"," ",1137],"=",["T_WHITESPACE"," ",1137],["T_STRING","Mage",1137],["T_DOUBLE_COLON","::",1137],["T_STRING","getModel",1137],"(",["T_CONSTANT_ENCAPSED_STRING","'xmlconnect\/application'",1137],")",["T_OBJECT_OPERATOR","->",1137],["T_STRING","loadByCode",1137],"(",["T_VARIABLE","$template",1137],["T_OBJECT_OPERATOR","->",1137],["T_STRING","getAppCode",1137],"(",")",")",";",["T_WHITESPACE","\n                ",1137],["T_VARIABLE","$deviceType",1138],["T_WHITESPACE"," ",1138],"=",["T_WHITESPACE"," ",1138],["T_STRING","Mage",1138],["T_DOUBLE_COLON","::",1138],["T_STRING","helper",1138],"(",["T_CONSTANT_ENCAPSED_STRING","'xmlconnect'",1138],")",["T_OBJECT_OPERATOR","->",1138],["T_STRING","getDeviceType",1138],"(",["T_VARIABLE","$app",1138],")",";",["T_WHITESPACE","\n\n                ",1138],["T_IF","if",1140],["T_WHITESPACE"," ",1140],"(",["T_VARIABLE","$deviceType",1140],["T_WHITESPACE"," ",1140],["T_IS_EQUAL","==",1140],["T_WHITESPACE"," ",1140],["T_STRING","Mage_XmlConnect_Helper_Data",1140],["T_DOUBLE_COLON","::",1140],["T_STRING","DEVICE_TYPE_ANDROID",1140],["T_WHITESPACE","\n                    ",1140],["T_BOOLEAN_AND","&&",1141],["T_WHITESPACE"," ",1141],["T_VARIABLE","$data",1141],"[",["T_CONSTANT_ENCAPSED_STRING","'type'",1141],"]",["T_WHITESPACE"," ",1141],["T_IS_EQUAL","==",1141],["T_WHITESPACE"," ",1141],["T_STRING","Mage_XmlConnect_Model_Queue",1141],["T_DOUBLE_COLON","::",1141],["T_STRING","MESSAGE_TYPE_AIRMAIL",1141],["T_WHITESPACE","\n                ",1141],")",["T_WHITESPACE"," ",1142],"{",["T_WHITESPACE","\n                    ",1142],["T_VARIABLE","$this",1143],["T_OBJECT_OPERATOR","->",1143],["T_STRING","_getSession",1143],"(",")",["T_OBJECT_OPERATOR","->",1143],["T_STRING","addError",1143],"(",["T_VARIABLE","$this",1143],["T_OBJECT_OPERATOR","->",1143],["T_STRING","__",1143],"(",["T_CONSTANT_ENCAPSED_STRING","'Android doesn\\'t support AirMail message type.'",1143],")",")",";",["T_WHITESPACE","\n                    ",1143],["T_VARIABLE","$redirectParams",1144],["T_WHITESPACE"," ",1144],"=",["T_WHITESPACE"," ",1144],["T_VARIABLE","$this",1144],["T_OBJECT_OPERATOR","->",1144],["T_STRING","_getQueueMessageParams",1144],"(",["T_VARIABLE","$message",1144],")",";",["T_WHITESPACE","\n                    ",1144],["T_VARIABLE","$action",1145],["T_WHITESPACE"," ",1145],"=",["T_WHITESPACE"," ",1145],["T_VARIABLE","$message",1145],["T_OBJECT_OPERATOR","->",1145],["T_STRING","getId",1145],"(",")",["T_WHITESPACE"," ",1145],"?",["T_WHITESPACE"," ",1145],["T_CONSTANT_ENCAPSED_STRING","'editQueue'",1145],["T_WHITESPACE"," ",1145],":",["T_WHITESPACE"," ",1145],["T_CONSTANT_ENCAPSED_STRING","'queueMessage'",1145],";",["T_WHITESPACE","\n                    ",1145],["T_VARIABLE","$this",1146],["T_OBJECT_OPERATOR","->",1146],["T_STRING","_redirect",1146],"(",["T_CONSTANT_ENCAPSED_STRING","'*\/*\/'",1146],["T_WHITESPACE"," ",1146],".",["T_WHITESPACE"," ",1146],["T_VARIABLE","$action",1146],",",["T_WHITESPACE"," ",1146],["T_VARIABLE","$redirectParams",1146],")",";",["T_WHITESPACE","\n                    ",1146],["T_RETURN","return",1147],";",["T_WHITESPACE","\n                ",1147],"}",["T_WHITESPACE","\n\n                ",1148],["T_VARIABLE","$temporaryObject",1150],["T_WHITESPACE"," ",1150],"=",["T_WHITESPACE"," ",1150],["T_NEW","new",1150],["T_WHITESPACE"," ",1150],["T_STRING","Varien_Object",1150],"(",")",";",["T_WHITESPACE","\n                ",1150],["T_VARIABLE","$temporaryObject",1151],["T_OBJECT_OPERATOR","->",1151],["T_STRING","setData",1151],"(",["T_VARIABLE","$data",1151],")",";",["T_WHITESPACE","\n\n                ",1151],["T_IF","if",1153],["T_WHITESPACE"," ",1153],"(",["T_VARIABLE","$temporaryObject",1153],["T_OBJECT_OPERATOR","->",1153],["T_STRING","getTemplateId",1153],"(",")",")",["T_WHITESPACE"," ",1153],"{",["T_WHITESPACE","\n                    ",1153],["T_VARIABLE","$message",1154],["T_OBJECT_OPERATOR","->",1154],["T_STRING","setTemplateId",1154],"(",["T_VARIABLE","$temporaryObject",1154],["T_OBJECT_OPERATOR","->",1154],["T_STRING","getTemplateId",1154],"(",")",")",";",["T_WHITESPACE","\n                ",1154],"}",["T_WHITESPACE"," ",1155],["T_ELSE","else",1155],["T_WHITESPACE"," ",1155],"{",["T_WHITESPACE","\n                    ",1155],["T_VARIABLE","$message",1156],["T_OBJECT_OPERATOR","->",1156],["T_STRING","setTemplateId",1156],"(",["T_VARIABLE","$template",1156],["T_OBJECT_OPERATOR","->",1156],["T_STRING","getId",1156],"(",")",")",";",["T_WHITESPACE","\n                ",1156],"}",["T_WHITESPACE","\n\n                ",1157],["T_IF","if",1159],["T_WHITESPACE"," ",1159],"(","!",["T_VARIABLE","$message",1159],["T_OBJECT_OPERATOR","->",1159],["T_STRING","getId",1159],"(",")",")",["T_WHITESPACE"," ",1159],"{",["T_WHITESPACE","\n                    ",1159],["T_COMMENT","\/\/ set status for new messages only\n",1160],["T_WHITESPACE","                    ",1161],["T_VARIABLE","$message",1161],["T_OBJECT_OPERATOR","->",1161],["T_STRING","setStatus",1161],"(",["T_STRING","Mage_XmlConnect_Model_Queue",1161],["T_DOUBLE_COLON","::",1161],["T_STRING","STATUS_IN_QUEUE",1161],")",";",["T_WHITESPACE","\n                ",1161],"}",["T_WHITESPACE"," ",1162],["T_ELSEIF","elseif",1162],["T_WHITESPACE"," ",1162],"(",["T_VARIABLE","$message",1162],["T_OBJECT_OPERATOR","->",1162],["T_STRING","getStatus",1162],"(",")",["T_WHITESPACE"," ",1162],["T_IS_NOT_EQUAL","!=",1162],["T_WHITESPACE"," ",1162],["T_STRING","Mage_XmlConnect_Model_Queue",1162],["T_DOUBLE_COLON","::",1162],["T_STRING","STATUS_IN_QUEUE",1162],")",["T_WHITESPACE"," ",1162],"{",["T_WHITESPACE","\n                    ",1162],["T_VARIABLE","$this",1163],["T_OBJECT_OPERATOR","->",1163],["T_STRING","_getSession",1163],"(",")",["T_OBJECT_OPERATOR","->",1163],["T_STRING","addError",1163],"(",["T_WHITESPACE","\n                        ",1163],["T_VARIABLE","$this",1164],["T_OBJECT_OPERATOR","->",1164],["T_STRING","__",1164],"(",["T_CONSTANT_ENCAPSED_STRING","'Message can be edited when status of the message is \"In Queue\" only.'",1164],")",["T_WHITESPACE","\n                    ",1164],")",";",["T_WHITESPACE","\n                    ",1165],["T_VARIABLE","$this",1166],["T_OBJECT_OPERATOR","->",1166],["T_STRING","_redirect",1166],"(",["T_CONSTANT_ENCAPSED_STRING","'*\/*\/queue'",1166],")",";",["T_WHITESPACE","\n                    ",1166],["T_RETURN","return",1167],";",["T_WHITESPACE","\n                ",1167],"}",["T_WHITESPACE","\n\n                ",1168],["T_SWITCH","switch",1170],["T_WHITESPACE"," ",1170],"(",["T_VARIABLE","$temporaryObject",1170],["T_OBJECT_OPERATOR","->",1170],["T_STRING","getType",1170],"(",")",")",["T_WHITESPACE"," ",1170],"{",["T_WHITESPACE","\n                    ",1170],["T_CASE","case",1171],["T_WHITESPACE"," ",1171],["T_STRING","Mage_XmlConnect_Model_Queue",1171],["T_DOUBLE_COLON","::",1171],["T_STRING","MESSAGE_TYPE_AIRMAIL",1171],":",["T_WHITESPACE","\n                        ",1171],["T_VARIABLE","$message",1172],["T_OBJECT_OPERATOR","->",1172],["T_STRING","setData",1172],"(",["T_CONSTANT_ENCAPSED_STRING","'type'",1172],",",["T_WHITESPACE"," ",1172],["T_STRING","Mage_XmlConnect_Model_Queue",1172],["T_DOUBLE_COLON","::",1172],["T_STRING","MESSAGE_TYPE_AIRMAIL",1172],")",";",["T_WHITESPACE","\n                        ",1172],["T_BREAK","break",1173],";",["T_WHITESPACE","\n\n                    ",1173],["T_CASE","case",1175],["T_WHITESPACE"," ",1175],["T_STRING","Mage_XmlConnect_Model_Queue",1175],["T_DOUBLE_COLON","::",1175],["T_STRING","MESSAGE_TYPE_PUSH",1175],":",["T_WHITESPACE","\n                    ",1175],["T_DEFAULT","default",1176],":",["T_WHITESPACE","\n                        ",1176],["T_VARIABLE","$message",1177],["T_OBJECT_OPERATOR","->",1177],["T_STRING","setData",1177],"(",["T_CONSTANT_ENCAPSED_STRING","'type'",1177],",",["T_WHITESPACE"," ",1177],["T_STRING","Mage_XmlConnect_Model_Queue",1177],["T_DOUBLE_COLON","::",1177],["T_STRING","MESSAGE_TYPE_PUSH",1177],")",";",["T_WHITESPACE","\n                        ",1177],["T_BREAK","break",1178],";",["T_WHITESPACE","\n                ",1178],"}",["T_WHITESPACE","\n                ",1179],["T_IF","if",1180],["T_WHITESPACE"," ",1180],"(",["T_VARIABLE","$temporaryObject",1180],["T_OBJECT_OPERATOR","->",1180],["T_STRING","getExecTime",1180],"(",")",")",["T_WHITESPACE"," ",1180],"{",["T_WHITESPACE","\n                    ",1180],["T_VARIABLE","$execTime",1181],["T_WHITESPACE"," ",1181],"=",["T_WHITESPACE"," ",1181],["T_STRING","Mage",1181],["T_DOUBLE_COLON","::",1181],["T_STRING","getSingleton",1181],"(",["T_CONSTANT_ENCAPSED_STRING","'core\/date'",1181],")",["T_OBJECT_OPERATOR","->",1181],["T_STRING","gmtDate",1181],"(",["T_STRING","null",1181],",",["T_WHITESPACE"," ",1181],["T_VARIABLE","$temporaryObject",1181],["T_OBJECT_OPERATOR","->",1181],["T_STRING","getExecTime",1181],"(",")",")",";",["T_WHITESPACE","\n                    ",1181],["T_VARIABLE","$message",1182],["T_OBJECT_OPERATOR","->",1182],["T_STRING","setExecTime",1182],"(",["T_VARIABLE","$execTime",1182],["T_WHITESPACE"," ",1182],"?",["T_WHITESPACE"," ",1182],["T_VARIABLE","$execTime",1182],["T_WHITESPACE"," ",1182],":",["T_WHITESPACE"," ",1182],["T_STRING","Mage",1182],["T_DOUBLE_COLON","::",1182],["T_STRING","getSingleton",1182],"(",["T_CONSTANT_ENCAPSED_STRING","'core\/date'",1182],")",["T_OBJECT_OPERATOR","->",1182],["T_STRING","gmtDate",1182],"(",")",")",";",["T_WHITESPACE","\n                ",1182],"}",["T_WHITESPACE"," ",1183],["T_ELSE","else",1183],["T_WHITESPACE"," ",1183],"{",["T_WHITESPACE","\n                    ",1183],["T_VARIABLE","$message",1184],["T_OBJECT_OPERATOR","->",1184],["T_STRING","setExecTime",1184],"(",["T_NEW","new",1184],["T_WHITESPACE"," ",1184],["T_STRING","Zend_Db_Expr",1184],"(",["T_CONSTANT_ENCAPSED_STRING","'NULL'",1184],")",")",";",["T_WHITESPACE","\n                ",1184],"}",["T_WHITESPACE","\n                ",1185],["T_IF","if",1186],["T_WHITESPACE"," ",1186],"(",["T_VARIABLE","$template",1186],["T_OBJECT_OPERATOR","->",1186],["T_STRING","getId",1186],"(",")",")",["T_WHITESPACE"," ",1186],"{",["T_WHITESPACE","\n                    ",1186],["T_VARIABLE","$message",1187],["T_OBJECT_OPERATOR","->",1187],["T_STRING","setAppCode",1187],"(",["T_VARIABLE","$template",1187],["T_OBJECT_OPERATOR","->",1187],["T_STRING","getAppCode",1187],"(",")",")",";",["T_WHITESPACE","\n                ",1187],"}",["T_WHITESPACE","\n                ",1188],["T_VARIABLE","$message",1189],["T_OBJECT_OPERATOR","->",1189],["T_STRING","setPushTitle",1189],"(",["T_VARIABLE","$temporaryObject",1189],["T_OBJECT_OPERATOR","->",1189],["T_STRING","getPushTitle",1189],"(",")",")",";",["T_WHITESPACE","\n                ",1189],["T_VARIABLE","$message",1190],["T_OBJECT_OPERATOR","->",1190],["T_STRING","setMessageTitle",1190],"(",["T_VARIABLE","$temporaryObject",1190],["T_OBJECT_OPERATOR","->",1190],["T_STRING","getMessageTitle",1190],"(",")",")",";",["T_WHITESPACE","\n                ",1190],["T_VARIABLE","$message",1191],["T_OBJECT_OPERATOR","->",1191],["T_STRING","setContent",1191],"(",["T_VARIABLE","$temporaryObject",1191],["T_OBJECT_OPERATOR","->",1191],["T_STRING","getContent",1191],"(",")",")",";",["T_WHITESPACE","\n                ",1191],["T_VARIABLE","$message",1192],["T_OBJECT_OPERATOR","->",1192],["T_STRING","save",1192],"(",")",";",["T_WHITESPACE","\n            ",1192],"}",["T_WHITESPACE"," ",1193],["T_CATCH","catch",1193],["T_WHITESPACE"," ",1193],"(",["T_STRING","Mage_Core_Exception",1193],["T_WHITESPACE"," ",1193],["T_VARIABLE","$e",1193],")",["T_WHITESPACE"," ",1193],"{",["T_WHITESPACE","\n                ",1193],["T_VARIABLE","$this",1194],["T_OBJECT_OPERATOR","->",1194],["T_STRING","_getSession",1194],"(",")",["T_OBJECT_OPERATOR","->",1194],["T_STRING","addException",1194],"(",["T_VARIABLE","$e",1194],",",["T_WHITESPACE"," ",1194],["T_VARIABLE","$e",1194],["T_OBJECT_OPERATOR","->",1194],["T_STRING","getMessage",1194],"(",")",")",";",["T_WHITESPACE","\n                ",1194],["T_VARIABLE","$isError",1195],["T_WHITESPACE"," ",1195],"=",["T_WHITESPACE"," ",1195],["T_STRING","true",1195],";",["T_WHITESPACE","\n            ",1195],"}",["T_WHITESPACE"," ",1196],["T_CATCH","catch",1196],["T_WHITESPACE"," ",1196],"(",["T_STRING","Exception",1196],["T_WHITESPACE"," ",1196],["T_VARIABLE","$e",1196],")",["T_WHITESPACE"," ",1196],"{",["T_WHITESPACE","\n                ",1196],["T_VARIABLE","$this",1197],["T_OBJECT_OPERATOR","->",1197],["T_STRING","_getSession",1197],"(",")",["T_OBJECT_OPERATOR","->",1197],["T_STRING","addException",1197],"(",["T_VARIABLE","$e",1197],",",["T_WHITESPACE"," ",1197],["T_VARIABLE","$this",1197],["T_OBJECT_OPERATOR","->",1197],["T_STRING","__",1197],"(",["T_CONSTANT_ENCAPSED_STRING","'Unable to save message.'",1197],")",")",";",["T_WHITESPACE","\n                ",1197],["T_VARIABLE","$isError",1198],["T_WHITESPACE"," ",1198],"=",["T_WHITESPACE"," ",1198],["T_STRING","true",1198],";",["T_WHITESPACE","\n                ",1198],["T_STRING","Mage",1199],["T_DOUBLE_COLON","::",1199],["T_STRING","logException",1199],"(",["T_VARIABLE","$e",1199],")",";",["T_WHITESPACE","\n            ",1199],"}",["T_WHITESPACE","\n        ",1200],"}",["T_WHITESPACE","\n\n        ",1201],["T_IF","if",1203],["T_WHITESPACE"," ",1203],"(",["T_VARIABLE","$isError",1203],")",["T_WHITESPACE"," ",1203],"{",["T_WHITESPACE","\n            ",1203],["T_IF","if",1204],["T_WHITESPACE"," ",1204],"(",["T_VARIABLE","$isError",1204],")",["T_WHITESPACE"," ",1204],"{",["T_WHITESPACE","\n                ",1204],["T_STRING","Mage",1205],["T_DOUBLE_COLON","::",1205],["T_STRING","getSingleton",1205],"(",["T_CONSTANT_ENCAPSED_STRING","'adminhtml\/session'",1205],")",["T_OBJECT_OPERATOR","->",1205],["T_STRING","setLoadSessionFlag",1205],"(",["T_STRING","true",1205],")",";",["T_WHITESPACE","\n            ",1205],"}",["T_WHITESPACE","\n            ",1206],["T_VARIABLE","$redirectParams",1207],["T_WHITESPACE"," ",1207],"=",["T_WHITESPACE"," ",1207],["T_VARIABLE","$this",1207],["T_OBJECT_OPERATOR","->",1207],["T_STRING","_getQueueMessageParams",1207],"(",["T_VARIABLE","$message",1207],")",";",["T_WHITESPACE","\n            ",1207],["T_VARIABLE","$this",1208],["T_OBJECT_OPERATOR","->",1208],["T_STRING","_redirect",1208],"(",["T_CONSTANT_ENCAPSED_STRING","'*\/*\/queueMessage'",1208],",",["T_WHITESPACE"," ",1208],["T_VARIABLE","$redirectParams",1208],")",";",["T_WHITESPACE","\n        ",1208],"}",["T_WHITESPACE"," ",1209],["T_ELSE","else",1209],["T_WHITESPACE"," ",1209],"{",["T_WHITESPACE","\n            ",1209],["T_VARIABLE","$this",1210],["T_OBJECT_OPERATOR","->",1210],["T_STRING","_redirect",1210],"(",["T_CONSTANT_ENCAPSED_STRING","'*\/*\/queue'",1210],")",";",["T_WHITESPACE","\n        ",1210],"}",["T_WHITESPACE","\n    ",1211],"}",["T_WHITESPACE","\n\n    ",1212],["T_DOC_COMMENT","\/**\n     * Get queue message action params\n     *\n     * @param Mage_XmlConnect_Model_Queue $message\n     * @return array\n     *\/",1214],["T_WHITESPACE","\n    ",1219],["T_PROTECTED","protected",1220],["T_WHITESPACE"," ",1220],["T_FUNCTION","function",1220],["T_WHITESPACE"," ",1220],["T_STRING","_getQueueMessageParams",1220],"(",["T_STRING","Mage_XmlConnect_Model_Queue",1220],["T_WHITESPACE"," ",1220],["T_VARIABLE","$message",1220],")",["T_WHITESPACE","\n    ",1220],"{",["T_WHITESPACE","\n        ",1221],["T_VARIABLE","$redirectParams",1222],["T_WHITESPACE"," ",1222],"=",["T_WHITESPACE"," ",1222],["T_ARRAY","array",1222],"(",")",";",["T_WHITESPACE","\n        ",1222],["T_IF","if",1223],["T_WHITESPACE"," ",1223],"(",["T_VARIABLE","$message",1223],["T_WHITESPACE"," ",1223],["T_BOOLEAN_AND","&&",1223],["T_WHITESPACE"," ",1223],["T_VARIABLE","$message",1223],["T_OBJECT_OPERATOR","->",1223],["T_STRING","getId",1223],"(",")",")",["T_WHITESPACE"," ",1223],"{",["T_WHITESPACE","\n            ",1223],["T_VARIABLE","$redirectParams",1224],"[",["T_CONSTANT_ENCAPSED_STRING","'id'",1224],"]",["T_WHITESPACE"," ",1224],"=",["T_WHITESPACE"," ",1224],["T_VARIABLE","$message",1224],["T_OBJECT_OPERATOR","->",1224],["T_STRING","getId",1224],"(",")",";",["T_WHITESPACE","\n        ",1224],"}",["T_WHITESPACE"," ",1225],["T_ELSE","else",1225],["T_WHITESPACE"," ",1225],"{",["T_WHITESPACE","\n            ",1225],["T_VARIABLE","$redirectParams",1226],"[",["T_CONSTANT_ENCAPSED_STRING","'template_id'",1226],"]",["T_WHITESPACE"," ",1226],"=",["T_WHITESPACE"," ",1226],["T_INT_CAST","(int)",1226],["T_WHITESPACE"," ",1226],["T_VARIABLE","$this",1226],["T_OBJECT_OPERATOR","->",1226],["T_STRING","getRequest",1226],"(",")",["T_OBJECT_OPERATOR","->",1226],["T_STRING","getParam",1226],"(",["T_CONSTANT_ENCAPSED_STRING","'template_id'",1226],")",";",["T_WHITESPACE","\n        ",1226],"}",["T_WHITESPACE","\n        ",1227],["T_RETURN","return",1228],["T_WHITESPACE"," ",1228],["T_VARIABLE","$redirectParams",1228],";",["T_WHITESPACE","\n    ",1228],"}",["T_WHITESPACE","\n\n    ",1229],["T_DOC_COMMENT","\/**\n     * Temlate grid\n     *\n     * @return null\n     *\/",1231],["T_WHITESPACE","\n    ",1235],["T_PUBLIC","public",1236],["T_WHITESPACE"," ",1236],["T_FUNCTION","function",1236],["T_WHITESPACE"," ",1236],["T_STRING","templateAction",1236],"(",")",["T_WHITESPACE","\n    ",1236],"{",["T_WHITESPACE","\n        ",1237],["T_VARIABLE","$this",1238],["T_OBJECT_OPERATOR","->",1238],["T_STRING","loadLayout",1238],"(",")",";",["T_WHITESPACE","\n        ",1238],["T_VARIABLE","$this",1239],["T_OBJECT_OPERATOR","->",1239],["T_STRING","_setActiveMenu",1239],"(",["T_CONSTANT_ENCAPSED_STRING","'xmlconnect\/template'",1239],")",";",["T_WHITESPACE","\n        ",1239],["T_VARIABLE","$this",1240],["T_OBJECT_OPERATOR","->",1240],["T_STRING","renderLayout",1240],"(",")",";",["T_WHITESPACE","\n    ",1240],"}",["T_WHITESPACE","\n\n    ",1241],["T_DOC_COMMENT","\/**\n     * Create new template action\n     *\n     * @return null\n     *\/",1243],["T_WHITESPACE","\n    ",1247],["T_PUBLIC","public",1248],["T_WHITESPACE"," ",1248],["T_FUNCTION","function",1248],["T_WHITESPACE"," ",1248],["T_STRING","newTemplateAction",1248],"(",")",["T_WHITESPACE","\n    ",1248],"{",["T_WHITESPACE","\n        ",1249],["T_VARIABLE","$this",1250],["T_OBJECT_OPERATOR","->",1250],["T_STRING","_forward",1250],"(",["T_CONSTANT_ENCAPSED_STRING","'editTemplate'",1250],")",";",["T_WHITESPACE","\n    ",1250],"}",["T_WHITESPACE","\n\n    ",1251],["T_DOC_COMMENT","\/**\n     * Edit template action\n     *\n     * @return null\n     *\/",1253],["T_WHITESPACE","\n    ",1257],["T_PUBLIC","public",1258],["T_WHITESPACE"," ",1258],["T_FUNCTION","function",1258],["T_WHITESPACE"," ",1258],["T_STRING","editTemplateAction",1258],"(",")",["T_WHITESPACE","\n    ",1258],"{",["T_WHITESPACE","\n        ",1259],["T_VARIABLE","$template",1260],["T_WHITESPACE"," ",1260],"=",["T_WHITESPACE"," ",1260],["T_VARIABLE","$this",1260],["T_OBJECT_OPERATOR","->",1260],["T_STRING","_initTemplate",1260],"(",")",";",["T_WHITESPACE","\n\n        ",1260],["T_VARIABLE","$applicationsFound",1262],["T_WHITESPACE"," ",1262],"=",["T_WHITESPACE"," ",1262],["T_STRING","Mage",1262],["T_DOUBLE_COLON","::",1262],["T_STRING","helper",1262],"(",["T_CONSTANT_ENCAPSED_STRING","'xmlconnect'",1262],")",["T_OBJECT_OPERATOR","->",1262],["T_STRING","getApplicationOptions",1262],"(",")",";",["T_WHITESPACE","\n        ",1262],["T_IF","if",1263],["T_WHITESPACE"," ",1263],"(","!",["T_VARIABLE","$template",1263],["T_OBJECT_OPERATOR","->",1263],["T_STRING","getId",1263],"(",")",["T_WHITESPACE"," ",1263],["T_BOOLEAN_AND","&&",1263],["T_WHITESPACE"," ",1263],["T_EMPTY","empty",1263],"(",["T_VARIABLE","$applicationsFound",1263],")",")",["T_WHITESPACE"," ",1263],"{",["T_WHITESPACE","\n            ",1263],["T_VARIABLE","$this",1264],["T_OBJECT_OPERATOR","->",1264],["T_STRING","_getSession",1264],"(",")",["T_OBJECT_OPERATOR","->",1264],["T_STRING","addError",1264],"(",["T_VARIABLE","$this",1264],["T_OBJECT_OPERATOR","->",1264],["T_STRING","__",1264],"(",["T_CONSTANT_ENCAPSED_STRING","'At last one application has to be created.'",1264],")",")",";",["T_WHITESPACE","\n            ",1264],["T_VARIABLE","$this",1265],["T_OBJECT_OPERATOR","->",1265],["T_STRING","_redirect",1265],"(",["T_CONSTANT_ENCAPSED_STRING","'*\/*\/template'",1265],")",";",["T_WHITESPACE","\n            ",1265],["T_RETURN","return",1266],";",["T_WHITESPACE","\n        ",1266],"}",["T_WHITESPACE","\n\n        ",1267],["T_VARIABLE","$this",1269],["T_OBJECT_OPERATOR","->",1269],["T_STRING","loadLayout",1269],"(",")",";",["T_WHITESPACE","\n        ",1269],["T_VARIABLE","$this",1270],["T_OBJECT_OPERATOR","->",1270],["T_STRING","_setActiveMenu",1270],"(",["T_CONSTANT_ENCAPSED_STRING","'xmlconnect\/templates'",1270],")",";",["T_WHITESPACE","\n        ",1270],["T_VARIABLE","$this",1271],["T_OBJECT_OPERATOR","->",1271],["T_STRING","renderLayout",1271],"(",")",";",["T_WHITESPACE","\n    ",1271],"}",["T_WHITESPACE","\n\n    ",1272],["T_DOC_COMMENT","\/**\n     * Save template action\n     *\n     * @return null\n     *\/",1274],["T_WHITESPACE","\n    ",1278],["T_PUBLIC","public",1279],["T_WHITESPACE"," ",1279],["T_FUNCTION","function",1279],["T_WHITESPACE"," ",1279],["T_STRING","saveTemplateAction",1279],"(",")",["T_WHITESPACE","\n    ",1279],"{",["T_WHITESPACE","\n        ",1280],["T_VARIABLE","$data",1281],["T_WHITESPACE"," ",1281],"=",["T_WHITESPACE"," ",1281],["T_VARIABLE","$this",1281],["T_OBJECT_OPERATOR","->",1281],["T_STRING","getRequest",1281],"(",")",["T_OBJECT_OPERATOR","->",1281],["T_STRING","getPost",1281],"(",")",";",["T_WHITESPACE","\n        ",1281],["T_VARIABLE","$template",1282],["T_WHITESPACE"," ",1282],"=",["T_WHITESPACE"," ",1282],["T_STRING","false",1282],";",["T_WHITESPACE","\n        ",1282],["T_VARIABLE","$isError",1283],["T_WHITESPACE"," ",1283],"=",["T_WHITESPACE"," ",1283],["T_STRING","false",1283],";",["T_WHITESPACE","\n        ",1283],["T_IF","if",1284],["T_WHITESPACE"," ",1284],"(",["T_VARIABLE","$data",1284],")",["T_WHITESPACE"," ",1284],"{",["T_WHITESPACE","\n            ",1284],["T_VARIABLE","$data",1285],["T_WHITESPACE"," ",1285],"=",["T_WHITESPACE"," ",1285],["T_STRING","Mage",1285],["T_DOUBLE_COLON","::",1285],["T_STRING","getModel",1285],"(",["T_CONSTANT_ENCAPSED_STRING","'core\/input_filter_maliciousCode'",1285],")",["T_OBJECT_OPERATOR","->",1285],["T_STRING","filter",1285],"(",["T_VARIABLE","$data",1285],")",";",["T_WHITESPACE","\n            ",1285],["T_STRING","Mage",1286],["T_DOUBLE_COLON","::",1286],["T_STRING","getSingleton",1286],"(",["T_CONSTANT_ENCAPSED_STRING","'adminhtml\/session'",1286],")",["T_OBJECT_OPERATOR","->",1286],["T_STRING","setTemplateFormData",1286],"(",["T_VARIABLE","$data",1286],")",";",["T_WHITESPACE","\n            ",1286],["T_TRY","try",1287],["T_WHITESPACE"," ",1287],"{",["T_WHITESPACE","\n                ",1287],["T_VARIABLE","$id",1288],["T_WHITESPACE"," ",1288],"=",["T_WHITESPACE"," ",1288],["T_VARIABLE","$this",1288],["T_OBJECT_OPERATOR","->",1288],["T_STRING","getRequest",1288],"(",")",["T_OBJECT_OPERATOR","->",1288],["T_STRING","getParam",1288],"(",["T_CONSTANT_ENCAPSED_STRING","'id'",1288],")",";",["T_WHITESPACE","\n                ",1288],["T_VARIABLE","$template",1289],["T_WHITESPACE"," ",1289],"=",["T_WHITESPACE"," ",1289],["T_VARIABLE","$this",1289],["T_OBJECT_OPERATOR","->",1289],["T_STRING","_initTemplate",1289],"(",")",";",["T_WHITESPACE","\n                ",1289],["T_IF","if",1290],["T_WHITESPACE"," ",1290],"(","!",["T_VARIABLE","$template",1290],["T_OBJECT_OPERATOR","->",1290],["T_STRING","getId",1290],"(",")",["T_WHITESPACE"," ",1290],["T_BOOLEAN_AND","&&",1290],["T_WHITESPACE"," ",1290],["T_VARIABLE","$id",1290],")",["T_WHITESPACE"," ",1290],"{",["T_WHITESPACE","\n                    ",1290],["T_VARIABLE","$this",1291],["T_OBJECT_OPERATOR","->",1291],["T_STRING","_getSession",1291],"(",")",["T_OBJECT_OPERATOR","->",1291],["T_STRING","addError",1291],"(",["T_VARIABLE","$this",1291],["T_OBJECT_OPERATOR","->",1291],["T_STRING","__",1291],"(",["T_CONSTANT_ENCAPSED_STRING","'Template does not exist.'",1291],")",")",";",["T_WHITESPACE","\n                    ",1291],["T_VARIABLE","$this",1292],["T_OBJECT_OPERATOR","->",1292],["T_STRING","_redirect",1292],"(",["T_CONSTANT_ENCAPSED_STRING","'*\/*\/'",1292],")",";",["T_WHITESPACE","\n                    ",1292],["T_RETURN","return",1293],";",["T_WHITESPACE","\n                ",1293],"}",["T_WHITESPACE","\n                ",1294],["T_VARIABLE","$template",1295],["T_OBJECT_OPERATOR","->",1295],["T_STRING","addData",1295],"(",["T_VARIABLE","$data",1295],")",";",["T_WHITESPACE","\n                ",1295],["T_VARIABLE","$template",1296],["T_OBJECT_OPERATOR","->",1296],["T_STRING","save",1296],"(",")",";",["T_WHITESPACE","\n            ",1296],"}",["T_WHITESPACE"," ",1297],["T_CATCH","catch",1297],["T_WHITESPACE"," ",1297],"(",["T_STRING","Mage_Core_Exception",1297],["T_WHITESPACE"," ",1297],["T_VARIABLE","$e",1297],")",["T_WHITESPACE"," ",1297],"{",["T_WHITESPACE","\n                ",1297],["T_VARIABLE","$this",1298],["T_OBJECT_OPERATOR","->",1298],["T_STRING","_getSession",1298],"(",")",["T_OBJECT_OPERATOR","->",1298],["T_STRING","addException",1298],"(",["T_VARIABLE","$e",1298],",",["T_WHITESPACE"," ",1298],["T_VARIABLE","$e",1298],["T_OBJECT_OPERATOR","->",1298],["T_STRING","getMessage",1298],"(",")",")",";",["T_WHITESPACE","\n                ",1298],["T_VARIABLE","$isError",1299],["T_WHITESPACE"," ",1299],"=",["T_WHITESPACE"," ",1299],["T_STRING","true",1299],";",["T_WHITESPACE","\n            ",1299],"}",["T_WHITESPACE"," ",1300],["T_CATCH","catch",1300],["T_WHITESPACE"," ",1300],"(",["T_STRING","Exception",1300],["T_WHITESPACE"," ",1300],["T_VARIABLE","$e",1300],")",["T_WHITESPACE"," ",1300],"{",["T_WHITESPACE","\n                ",1300],["T_VARIABLE","$this",1301],["T_OBJECT_OPERATOR","->",1301],["T_STRING","_getSession",1301],"(",")",["T_OBJECT_OPERATOR","->",1301],["T_STRING","addException",1301],"(",["T_VARIABLE","$e",1301],",",["T_WHITESPACE"," ",1301],["T_VARIABLE","$this",1301],["T_OBJECT_OPERATOR","->",1301],["T_STRING","__",1301],"(",["T_CONSTANT_ENCAPSED_STRING","'Unable to save template.'",1301],")",")",";",["T_WHITESPACE","\n                ",1301],["T_VARIABLE","$isError",1302],["T_WHITESPACE"," ",1302],"=",["T_WHITESPACE"," ",1302],["T_STRING","true",1302],";",["T_WHITESPACE","\n                ",1302],["T_STRING","Mage",1303],["T_DOUBLE_COLON","::",1303],["T_STRING","logException",1303],"(",["T_VARIABLE","$e",1303],")",";",["T_WHITESPACE","\n            ",1303],"}",["T_WHITESPACE","\n        ",1304],"}",["T_WHITESPACE","\n\n        ",1305],["T_IF","if",1307],["T_WHITESPACE"," ",1307],"(",["T_VARIABLE","$isError",1307],["T_WHITESPACE"," ",1307],["T_BOOLEAN_AND","&&",1307],["T_WHITESPACE"," ",1307],"(",["T_VARIABLE","$template",1307],["T_WHITESPACE"," ",1307],["T_BOOLEAN_AND","&&",1307],["T_WHITESPACE"," ",1307],["T_VARIABLE","$template",1307],["T_OBJECT_OPERATOR","->",1307],["T_STRING","getId",1307],"(",")",")",")",["T_WHITESPACE"," ",1307],"{",["T_WHITESPACE","\n            ",1307],["T_STRING","Mage",1308],["T_DOUBLE_COLON","::",1308],["T_STRING","getSingleton",1308],"(",["T_CONSTANT_ENCAPSED_STRING","'adminhtml\/session'",1308],")",["T_OBJECT_OPERATOR","->",1308],["T_STRING","setLoadSessionFlag",1308],"(",["T_STRING","true",1308],")",";",["T_WHITESPACE","\n            ",1308],["T_VARIABLE","$this",1309],["T_OBJECT_OPERATOR","->",1309],["T_STRING","_redirect",1309],"(",["T_CONSTANT_ENCAPSED_STRING","'*\/*\/editTemplate'",1309],",",["T_WHITESPACE"," ",1309],["T_ARRAY","array",1309],"(",["T_CONSTANT_ENCAPSED_STRING","'id'",1309],["T_WHITESPACE"," ",1309],["T_DOUBLE_ARROW","=>",1309],["T_WHITESPACE"," ",1309],["T_VARIABLE","$template",1309],["T_OBJECT_OPERATOR","->",1309],["T_STRING","getId",1309],"(",")",")",")",";",["T_WHITESPACE","\n        ",1309],"}",["T_WHITESPACE"," ",1310],["T_ELSE","else",1310],["T_WHITESPACE"," ",1310],"{",["T_WHITESPACE","\n            ",1310],["T_VARIABLE","$this",1311],["T_OBJECT_OPERATOR","->",1311],["T_STRING","_redirect",1311],"(",["T_CONSTANT_ENCAPSED_STRING","'*\/*\/template'",1311],")",";",["T_WHITESPACE","\n        ",1311],"}",["T_WHITESPACE","\n    ",1312],"}",["T_WHITESPACE","\n\n    ",1313],["T_DOC_COMMENT","\/**\n     * Add message to queue action\n     *\n     * @return null\n     *\/",1315],["T_WHITESPACE","\n    ",1319],["T_PUBLIC","public",1320],["T_WHITESPACE"," ",1320],["T_FUNCTION","function",1320],["T_WHITESPACE"," ",1320],["T_STRING","queueMessageAction",1320],"(",")",["T_WHITESPACE","\n    ",1320],"{",["T_WHITESPACE","\n        ",1321],["T_VARIABLE","$message",1322],["T_WHITESPACE"," ",1322],"=",["T_WHITESPACE"," ",1322],["T_VARIABLE","$this",1322],["T_OBJECT_OPERATOR","->",1322],["T_STRING","_initMessage",1322],"(",")",";",["T_WHITESPACE","\n        ",1322],["T_IF","if",1323],["T_WHITESPACE"," ",1323],"(","!",["T_VARIABLE","$message",1323],["T_OBJECT_OPERATOR","->",1323],["T_STRING","getId",1323],"(",")",")",["T_WHITESPACE"," ",1323],"{",["T_WHITESPACE","\n            ",1323],["T_VARIABLE","$template",1324],["T_WHITESPACE"," ",1324],"=",["T_WHITESPACE"," ",1324],["T_VARIABLE","$this",1324],["T_OBJECT_OPERATOR","->",1324],["T_STRING","_initTemplate",1324],"(",["T_CONSTANT_ENCAPSED_STRING","'template_id'",1324],")",";",["T_WHITESPACE","\n            ",1324],["T_IF","if",1325],["T_WHITESPACE"," ",1325],"(","!",["T_VARIABLE","$template",1325],["T_OBJECT_OPERATOR","->",1325],["T_STRING","getId",1325],"(",")",")",["T_WHITESPACE"," ",1325],"{",["T_WHITESPACE","\n                ",1325],["T_VARIABLE","$this",1326],["T_OBJECT_OPERATOR","->",1326],["T_STRING","_getSession",1326],"(",")",["T_OBJECT_OPERATOR","->",1326],["T_STRING","addError",1326],"(",["T_VARIABLE","$this",1326],["T_OBJECT_OPERATOR","->",1326],["T_STRING","__",1326],"(",["T_CONSTANT_ENCAPSED_STRING","'Template for new AirMail Message does not exist.'",1326],")",")",";",["T_WHITESPACE","\n                ",1326],["T_VARIABLE","$this",1327],["T_OBJECT_OPERATOR","->",1327],["T_STRING","_redirect",1327],"(",["T_CONSTANT_ENCAPSED_STRING","'*\/*\/template'",1327],")",";",["T_WHITESPACE","\n            ",1327],"}",["T_WHITESPACE","\n        ",1328],"}",["T_WHITESPACE","\n\n        ",1329],["T_IF","if",1331],["T_WHITESPACE"," ",1331],"(",["T_ISSET","isset",1331],"(",["T_VARIABLE","$template",1331],")",")",["T_WHITESPACE"," ",1331],"{",["T_WHITESPACE","\n            ",1331],["T_VARIABLE","$appId",1332],["T_WHITESPACE"," ",1332],"=",["T_WHITESPACE"," ",1332],["T_VARIABLE","$template",1332],["T_OBJECT_OPERATOR","->",1332],["T_STRING","getApplicationId",1332],"(",")",";",["T_WHITESPACE","\n        ",1332],"}",["T_WHITESPACE"," ",1333],["T_ELSE","else",1333],["T_WHITESPACE"," ",1333],"{",["T_WHITESPACE","\n            ",1333],["T_VARIABLE","$appId",1334],["T_WHITESPACE"," ",1334],"=",["T_WHITESPACE"," ",1334],["T_STRING","Mage",1334],["T_DOUBLE_COLON","::",1334],["T_STRING","getModel",1334],"(",["T_CONSTANT_ENCAPSED_STRING","'xmlconnect\/template'",1334],")",["T_OBJECT_OPERATOR","->",1334],["T_STRING","load",1334],"(",["T_VARIABLE","$message",1334],["T_OBJECT_OPERATOR","->",1334],["T_STRING","getTemplateId",1334],"(",")",")",["T_OBJECT_OPERATOR","->",1334],["T_STRING","getApplicationId",1334],"(",")",";",["T_WHITESPACE","\n        ",1334],"}",["T_WHITESPACE","\n\n        ",1335],["T_DOC_COMMENT","\/** @var $app Mage_XmlConnect_Model_Application *\/",1337],["T_WHITESPACE","\n        ",1337],["T_VARIABLE","$app",1338],["T_WHITESPACE"," ",1338],"=",["T_WHITESPACE"," ",1338],["T_STRING","Mage",1338],["T_DOUBLE_COLON","::",1338],["T_STRING","getModel",1338],"(",["T_CONSTANT_ENCAPSED_STRING","'xmlconnect\/application'",1338],")",["T_OBJECT_OPERATOR","->",1338],["T_STRING","load",1338],"(",["T_VARIABLE","$appId",1338],")",";",["T_WHITESPACE","\n\n        ",1338],["T_IF","if",1340],"(","!",["T_VARIABLE","$app",1340],["T_OBJECT_OPERATOR","->",1340],["T_STRING","isNotificationsActive",1340],"(",")",")",["T_WHITESPACE"," ",1340],"{",["T_WHITESPACE","\n            ",1340],["T_VARIABLE","$this",1341],["T_OBJECT_OPERATOR","->",1341],["T_STRING","_getSession",1341],"(",")",["T_OBJECT_OPERATOR","->",1341],["T_STRING","addError",1341],"(",["T_WHITESPACE","\n                ",1341],["T_VARIABLE","$this",1342],["T_OBJECT_OPERATOR","->",1342],["T_STRING","__",1342],"(",["T_CONSTANT_ENCAPSED_STRING","'Queue is allowed only for applications with enabled Push Notification.'",1342],")",["T_WHITESPACE","\n            ",1342],")",";",["T_WHITESPACE","\n            ",1343],["T_VARIABLE","$action",1344],["T_WHITESPACE"," ",1344],"=",["T_WHITESPACE"," ",1344],["T_VARIABLE","$message",1344],["T_OBJECT_OPERATOR","->",1344],["T_STRING","getId",1344],"(",")",["T_WHITESPACE"," ",1344],"?",["T_WHITESPACE"," ",1344],["T_CONSTANT_ENCAPSED_STRING","'queue'",1344],["T_WHITESPACE"," ",1344],":",["T_WHITESPACE"," ",1344],["T_CONSTANT_ENCAPSED_STRING","'template'",1344],";",["T_WHITESPACE","\n            ",1344],["T_VARIABLE","$this",1345],["T_OBJECT_OPERATOR","->",1345],["T_STRING","_redirect",1345],"(",["T_CONSTANT_ENCAPSED_STRING","'*\/*\/'",1345],["T_WHITESPACE"," ",1345],".",["T_WHITESPACE"," ",1345],["T_VARIABLE","$action",1345],")",";",["T_WHITESPACE","\n            ",1345],["T_RETURN","return",1346],";",["T_WHITESPACE","\n        ",1346],"}",["T_WHITESPACE","\n\n        ",1347],["T_VARIABLE","$this",1349],["T_OBJECT_OPERATOR","->",1349],["T_STRING","loadLayout",1349],"(",")",";",["T_WHITESPACE","\n        ",1349],["T_IF","if",1350],["T_WHITESPACE"," ",1350],"(",["T_VARIABLE","$message",1350],["T_OBJECT_OPERATOR","->",1350],["T_STRING","getId",1350],"(",")",")",["T_WHITESPACE"," ",1350],"{",["T_WHITESPACE","\n            ",1350],["T_VARIABLE","$title",1351],["T_WHITESPACE"," ",1351],"=",["T_WHITESPACE"," ",1351],["T_VARIABLE","$this",1351],["T_OBJECT_OPERATOR","->",1351],["T_STRING","__",1351],"(",["T_CONSTANT_ENCAPSED_STRING","'Edit AirMail Message'",1351],")",";",["T_WHITESPACE","\n        ",1351],"}",["T_WHITESPACE"," ",1352],["T_ELSE","else",1352],["T_WHITESPACE"," ",1352],"{",["T_WHITESPACE","\n            ",1352],["T_VARIABLE","$title",1353],["T_WHITESPACE"," ",1353],"=",["T_WHITESPACE"," ",1353],["T_VARIABLE","$this",1353],["T_OBJECT_OPERATOR","->",1353],["T_STRING","__",1353],"(",["T_CONSTANT_ENCAPSED_STRING","'New AirMail Message'",1353],")",";",["T_WHITESPACE","\n        ",1353],"}",["T_WHITESPACE","\n        ",1354],["T_VARIABLE","$this",1355],["T_OBJECT_OPERATOR","->",1355],["T_STRING","_addBreadcrumb",1355],"(",["T_WHITESPACE","\n            ",1355],["T_VARIABLE","$this",1356],["T_OBJECT_OPERATOR","->",1356],["T_STRING","__",1356],"(",["T_CONSTANT_ENCAPSED_STRING","'AirMail Message Queue'",1356],")",",",["T_WHITESPACE"," ",1356],["T_VARIABLE","$this",1356],["T_OBJECT_OPERATOR","->",1356],["T_STRING","__",1356],"(",["T_CONSTANT_ENCAPSED_STRING","'AirMail Message Queue'",1356],")",",",["T_WHITESPACE"," ",1356],["T_VARIABLE","$this",1356],["T_OBJECT_OPERATOR","->",1356],["T_STRING","getUrl",1356],"(",["T_CONSTANT_ENCAPSED_STRING","'*\/*\/queue'",1356],")",["T_WHITESPACE","\n        ",1356],")",";",["T_WHITESPACE","\n        ",1357],["T_VARIABLE","$this",1358],["T_OBJECT_OPERATOR","->",1358],["T_STRING","_addBreadcrumb",1358],"(",["T_VARIABLE","$title",1358],",",["T_WHITESPACE"," ",1358],["T_VARIABLE","$title",1358],")",";",["T_WHITESPACE","\n\n        ",1358],["T_VARIABLE","$this",1360],["T_OBJECT_OPERATOR","->",1360],["T_STRING","_setActiveMenu",1360],"(",["T_CONSTANT_ENCAPSED_STRING","'xmlconnect\/queue'",1360],")",";",["T_WHITESPACE","\n        ",1360],["T_VARIABLE","$this",1361],["T_OBJECT_OPERATOR","->",1361],["T_STRING","renderLayout",1361],"(",")",";",["T_WHITESPACE","\n    ",1361],"}",["T_WHITESPACE","\n\n    ",1362],["T_DOC_COMMENT","\/**\n     * Edit queue message action\n     *\n     * @return null\n     *\/",1364],["T_WHITESPACE","\n    ",1368],["T_PUBLIC","public",1369],["T_WHITESPACE"," ",1369],["T_FUNCTION","function",1369],["T_WHITESPACE"," ",1369],["T_STRING","editMessageAction",1369],"(",")",["T_WHITESPACE","\n    ",1369],"{",["T_WHITESPACE","\n        ",1370],["T_VARIABLE","$this",1371],["T_OBJECT_OPERATOR","->",1371],["T_STRING","_forward",1371],"(",["T_CONSTANT_ENCAPSED_STRING","'queueMessage'",1371],")",";",["T_WHITESPACE","\n    ",1371],"}",["T_WHITESPACE","\n\n    ",1372],["T_DOC_COMMENT","\/**\n     * Upload file controller action\n     *\/",1374],["T_WHITESPACE","\n    ",1376],["T_PUBLIC","public",1377],["T_WHITESPACE"," ",1377],["T_FUNCTION","function",1377],["T_WHITESPACE"," ",1377],["T_STRING","uploadImagesAction",1377],"(",")",["T_WHITESPACE","\n    ",1377],"{",["T_WHITESPACE","\n        ",1378],["T_VARIABLE","$data",1379],["T_WHITESPACE"," ",1379],"=",["T_WHITESPACE"," ",1379],["T_VARIABLE","$this",1379],["T_OBJECT_OPERATOR","->",1379],["T_STRING","getRequest",1379],"(",")",["T_OBJECT_OPERATOR","->",1379],["T_STRING","getParams",1379],"(",")",";",["T_WHITESPACE","\n        ",1379],["T_IF","if",1380],["T_WHITESPACE"," ",1380],"(",["T_ISSET","isset",1380],"(",["T_VARIABLE","$data",1380],"[",["T_CONSTANT_ENCAPSED_STRING","'flowFilename'",1380],"]",")",")",["T_WHITESPACE"," ",1380],"{",["T_WHITESPACE","\n            ",1380],["T_COMMENT","\/\/ Add random string to uploaded file new\n",1381],["T_WHITESPACE","            ",1382],["T_VARIABLE","$newFileName",1382],["T_WHITESPACE"," ",1382],"=",["T_WHITESPACE"," ",1382],["T_STRING","Mage",1382],["T_DOUBLE_COLON","::",1382],["T_STRING","helper",1382],"(",["T_CONSTANT_ENCAPSED_STRING","'core'",1382],")",["T_OBJECT_OPERATOR","->",1382],["T_STRING","getRandomString",1382],"(",["T_LNUMBER","5",1382],")",["T_WHITESPACE"," ",1382],".",["T_WHITESPACE"," ",1382],["T_CONSTANT_ENCAPSED_STRING","'_'",1382],["T_WHITESPACE"," ",1382],".",["T_WHITESPACE"," ",1382],["T_VARIABLE","$data",1382],"[",["T_CONSTANT_ENCAPSED_STRING","'flowFilename'",1382],"]",";",["T_WHITESPACE","\n        ",1382],"}",["T_WHITESPACE","\n        ",1383],["T_TRY","try",1384],["T_WHITESPACE"," ",1384],"{",["T_WHITESPACE","\n            ",1384],["T_VARIABLE","$this",1385],["T_OBJECT_OPERATOR","->",1385],["T_STRING","_initApp",1385],"(",")",";",["T_WHITESPACE","\n            ",1385],["T_DOC_COMMENT","\/** @var $imageModel Mage_XmlConnect_Model_Images *\/",1386],["T_WHITESPACE","\n            ",1386],["T_VARIABLE","$imageModel",1387],["T_WHITESPACE"," ",1387],"=",["T_WHITESPACE"," ",1387],["T_STRING","Mage",1387],["T_DOUBLE_COLON","::",1387],["T_STRING","getModel",1387],"(",["T_CONSTANT_ENCAPSED_STRING","'xmlconnect\/images'",1387],")",";",["T_WHITESPACE","\n            ",1387],["T_IF","if",1388],["T_WHITESPACE"," ",1388],"(",["T_ISSET","isset",1388],"(",["T_VARIABLE","$data",1388],"[",["T_CONSTANT_ENCAPSED_STRING","'image_id'",1388],"]",")",["T_WHITESPACE"," ",1388],["T_BOOLEAN_AND","&&",1388],["T_WHITESPACE"," ",1388],["T_VARIABLE","$data",1388],"[",["T_CONSTANT_ENCAPSED_STRING","'image_id'",1388],"]",["T_WHITESPACE"," ",1388],">",["T_WHITESPACE"," ",1388],["T_LNUMBER","0",1388],")",["T_WHITESPACE"," ",1388],"{",["T_WHITESPACE","\n                ",1388],["T_VARIABLE","$imageModel",1389],["T_OBJECT_OPERATOR","->",1389],["T_STRING","load",1389],"(",["T_VARIABLE","$data",1389],"[",["T_CONSTANT_ENCAPSED_STRING","'image_id'",1389],"]",")",";",["T_WHITESPACE","\n            ",1389],"}",["T_WHITESPACE","\n            ",1390],["T_VARIABLE","$imageModel",1391],["T_OBJECT_OPERATOR","->",1391],["T_STRING","validateAndSetSubmitData",1391],"(",["T_VARIABLE","$data",1391],")",["T_OBJECT_OPERATOR","->",1391],["T_STRING","checkType",1391],"(",")",["T_OBJECT_OPERATOR","->",1391],["T_STRING","checkApplication",1391],"(",")",";",["T_WHITESPACE","\n\n            ",1391],["T_DOC_COMMENT","\/** @var $uploader Mage_Core_Model_File_Uploader *\/",1393],["T_WHITESPACE","\n            ",1393],["T_VARIABLE","$uploader",1394],["T_WHITESPACE"," ",1394],"=",["T_WHITESPACE"," ",1394],["T_STRING","Mage",1394],["T_DOUBLE_COLON","::",1394],["T_STRING","getModel",1394],"(",["T_CONSTANT_ENCAPSED_STRING","'core\/file_uploader'",1394],",",["T_WHITESPACE"," ",1394],["T_VARIABLE","$imageModel",1394],["T_OBJECT_OPERATOR","->",1394],["T_STRING","getImageType",1394],"(",")",")",";",["T_WHITESPACE","\n            ",1394],["T_VARIABLE","$uploader",1395],["T_OBJECT_OPERATOR","->",1395],["T_STRING","setAllowRenameFiles",1395],"(",["T_STRING","true",1395],")",["T_OBJECT_OPERATOR","->",1395],["T_STRING","setAllowedExtensions",1395],"(",["T_ARRAY","array",1395],"(",["T_CONSTANT_ENCAPSED_STRING","'jpg'",1395],",",["T_WHITESPACE"," ",1395],["T_CONSTANT_ENCAPSED_STRING","'jpeg'",1395],",",["T_WHITESPACE"," ",1395],["T_CONSTANT_ENCAPSED_STRING","'gif'",1395],",",["T_WHITESPACE"," ",1395],["T_CONSTANT_ENCAPSED_STRING","'png'",1395],")",")",";",["T_WHITESPACE","\n            ",1395],["T_VARIABLE","$result",1396],["T_WHITESPACE"," ",1396],"=",["T_WHITESPACE"," ",1396],["T_VARIABLE","$uploader",1396],["T_OBJECT_OPERATOR","->",1396],["T_STRING","save",1396],"(",["T_STRING","Mage_XmlConnect_Model_Images",1396],["T_DOUBLE_COLON","::",1396],["T_STRING","getBasePath",1396],"(",")",",",["T_WHITESPACE"," ",1396],["T_VARIABLE","$newFileName",1396],")",";",["T_WHITESPACE","\n            ",1396],["T_VARIABLE","$result",1397],"[",["T_CONSTANT_ENCAPSED_STRING","'thumbnail'",1397],"]",["T_WHITESPACE"," ",1397],"=",["T_WHITESPACE"," ",1397],["T_STRING","Mage",1397],["T_DOUBLE_COLON","::",1397],["T_STRING","getModel",1397],"(",["T_CONSTANT_ENCAPSED_STRING","'xmlconnect\/images'",1397],")",["T_OBJECT_OPERATOR","->",1397],["T_STRING","getCustomSizeImageUrl",1397],"(",["T_WHITESPACE","\n                ",1397],["T_VARIABLE","$result",1398],"[",["T_CONSTANT_ENCAPSED_STRING","'file'",1398],"]",",",["T_WHITESPACE","\n                ",1398],["T_STRING","Mage_XmlConnect_Helper_Data",1399],["T_DOUBLE_COLON","::",1399],["T_STRING","THUMBNAIL_IMAGE_WIDTH",1399],",",["T_WHITESPACE","\n                ",1399],["T_STRING","Mage_XmlConnect_Helper_Data",1400],["T_DOUBLE_COLON","::",1400],["T_STRING","THUMBNAIL_IMAGE_HEIGHT",1400],["T_WHITESPACE","\n            ",1400],")",";",["T_WHITESPACE","\n\n            ",1401],["T_VARIABLE","$imageModel",1403],["T_OBJECT_OPERATOR","->",1403],["T_STRING","setImageFile",1403],"(",["T_VARIABLE","$result",1403],"[",["T_CONSTANT_ENCAPSED_STRING","'file'",1403],"]",")",";",["T_WHITESPACE","\n            ",1403],["T_VARIABLE","$imageModel",1404],["T_OBJECT_OPERATOR","->",1404],["T_STRING","save",1404],"(",")",";",["T_WHITESPACE","\n\n            ",1404],["T_VARIABLE","$result",1406],"[",["T_CONSTANT_ENCAPSED_STRING","'cookie'",1406],"]",["T_WHITESPACE"," ",1406],"=",["T_WHITESPACE"," ",1406],["T_ARRAY","array",1406],"(",["T_WHITESPACE","\n                ",1406],["T_CONSTANT_ENCAPSED_STRING","'name'",1407],["T_WHITESPACE","     ",1407],["T_DOUBLE_ARROW","=>",1407],["T_WHITESPACE"," ",1407],["T_STRING","session_name",1407],"(",")",",",["T_WHITESPACE","\n                ",1407],["T_CONSTANT_ENCAPSED_STRING","'value'",1408],["T_WHITESPACE","    ",1408],["T_DOUBLE_ARROW","=>",1408],["T_WHITESPACE"," ",1408],["T_VARIABLE","$this",1408],["T_OBJECT_OPERATOR","->",1408],["T_STRING","_getSession",1408],"(",")",["T_OBJECT_OPERATOR","->",1408],["T_STRING","getSessionId",1408],"(",")",",",["T_WHITESPACE","\n                ",1408],["T_CONSTANT_ENCAPSED_STRING","'lifetime'",1409],["T_WHITESPACE"," ",1409],["T_DOUBLE_ARROW","=>",1409],["T_WHITESPACE"," ",1409],["T_VARIABLE","$this",1409],["T_OBJECT_OPERATOR","->",1409],["T_STRING","_getSession",1409],"(",")",["T_OBJECT_OPERATOR","->",1409],["T_STRING","getCookieLifetime",1409],"(",")",",",["T_WHITESPACE","\n                ",1409],["T_CONSTANT_ENCAPSED_STRING","'path'",1410],["T_WHITESPACE","     ",1410],["T_DOUBLE_ARROW","=>",1410],["T_WHITESPACE"," ",1410],["T_VARIABLE","$this",1410],["T_OBJECT_OPERATOR","->",1410],["T_STRING","_getSession",1410],"(",")",["T_OBJECT_OPERATOR","->",1410],["T_STRING","getCookiePath",1410],"(",")",",",["T_WHITESPACE","\n                ",1410],["T_CONSTANT_ENCAPSED_STRING","'domain'",1411],["T_WHITESPACE","   ",1411],["T_DOUBLE_ARROW","=>",1411],["T_WHITESPACE"," ",1411],["T_VARIABLE","$this",1411],["T_OBJECT_OPERATOR","->",1411],["T_STRING","_getSession",1411],"(",")",["T_OBJECT_OPERATOR","->",1411],["T_STRING","getCookieDomain",1411],"(",")",",",["T_WHITESPACE","\n                ",1411],["T_CONSTANT_ENCAPSED_STRING","'order'",1412],["T_WHITESPACE","    ",1412],["T_DOUBLE_ARROW","=>",1412],["T_WHITESPACE"," ",1412],["T_VARIABLE","$imageModel",1412],["T_OBJECT_OPERATOR","->",1412],["T_STRING","getOrder",1412],"(",")",",",["T_WHITESPACE","\n                ",1412],["T_CONSTANT_ENCAPSED_STRING","'image_id'",1413],["T_WHITESPACE"," ",1413],["T_DOUBLE_ARROW","=>",1413],["T_WHITESPACE"," ",1413],["T_VARIABLE","$imageModel",1413],["T_OBJECT_OPERATOR","->",1413],["T_STRING","getId",1413],"(",")",",",["T_WHITESPACE","\n                ",1413],["T_CONSTANT_ENCAPSED_STRING","'file_field'",1414],["T_WHITESPACE"," ",1414],["T_DOUBLE_ARROW","=>",1414],["T_WHITESPACE"," ",1414],["T_VARIABLE","$imageModel",1414],["T_OBJECT_OPERATOR","->",1414],["T_STRING","getImageType",1414],"(",")",["T_WHITESPACE","\n            ",1414],")",";",["T_WHITESPACE","\n\n            ",1415],["T_VARIABLE","$result",1417],"[",["T_CONSTANT_ENCAPSED_STRING","'image_list'",1417],"]",["T_WHITESPACE"," ",1417],"=",["T_WHITESPACE"," ",1417],["T_VARIABLE","$this",1417],["T_OBJECT_OPERATOR","->",1417],["T_STRING","getLayout",1417],"(",")",["T_WHITESPACE","\n                ",1417],["T_OBJECT_OPERATOR","->",1418],["T_STRING","addBlock",1418],"(",["T_CONSTANT_ENCAPSED_STRING","'xmlconnect\/adminhtml_mobile_edit_tab_design_images'",1418],",",["T_WHITESPACE"," ",1418],["T_CONSTANT_ENCAPSED_STRING","'design_images'",1418],")",["T_WHITESPACE","\n                ",1418],["T_OBJECT_OPERATOR","->",1419],["T_STRING","getImageList",1419],"(",["T_VARIABLE","$imageModel",1419],["T_OBJECT_OPERATOR","->",1419],["T_STRING","getImageType",1419],"(",")",",",["T_WHITESPACE"," ",1419],["T_VARIABLE","$imageModel",1419],["T_OBJECT_OPERATOR","->",1419],["T_STRING","getImageCount",1419],"(",")",")",";",["T_WHITESPACE","\n\n        ",1419],"}",["T_WHITESPACE"," ",1421],["T_CATCH","catch",1421],["T_WHITESPACE"," ",1421],"(",["T_STRING","Exception",1421],["T_WHITESPACE"," ",1421],["T_VARIABLE","$e",1421],")",["T_WHITESPACE"," ",1421],"{",["T_WHITESPACE","\n            ",1421],["T_VARIABLE","$result",1422],["T_WHITESPACE"," ",1422],"=",["T_WHITESPACE"," ",1422],["T_ARRAY","array",1422],"(",["T_CONSTANT_ENCAPSED_STRING","'error'",1422],["T_WHITESPACE"," ",1422],["T_DOUBLE_ARROW","=>",1422],["T_WHITESPACE"," ",1422],["T_VARIABLE","$e",1422],["T_OBJECT_OPERATOR","->",1422],["T_STRING","getMessage",1422],"(",")",",",["T_WHITESPACE"," ",1422],["T_CONSTANT_ENCAPSED_STRING","'errorcode'",1422],["T_WHITESPACE"," ",1422],["T_DOUBLE_ARROW","=>",1422],["T_WHITESPACE"," ",1422],["T_VARIABLE","$e",1422],["T_OBJECT_OPERATOR","->",1422],["T_STRING","getCode",1422],"(",")",")",";",["T_WHITESPACE","\n        ",1422],"}",["T_WHITESPACE","\n\n        ",1423],["T_VARIABLE","$this",1425],["T_OBJECT_OPERATOR","->",1425],["T_STRING","getResponse",1425],"(",")",["T_OBJECT_OPERATOR","->",1425],["T_STRING","setBody",1425],"(",["T_STRING","Mage",1425],["T_DOUBLE_COLON","::",1425],["T_STRING","helper",1425],"(",["T_CONSTANT_ENCAPSED_STRING","'core'",1425],")",["T_OBJECT_OPERATOR","->",1425],["T_STRING","jsonEncode",1425],"(",["T_VARIABLE","$result",1425],")",")",";",["T_WHITESPACE","\n    ",1425],"}",["T_WHITESPACE","\n\n    ",1426],["T_DOC_COMMENT","\/**\n     * Get image list by type\n     *\/",1428],["T_WHITESPACE","\n    ",1430],["T_PUBLIC","public",1431],["T_WHITESPACE"," ",1431],["T_FUNCTION","function",1431],["T_WHITESPACE"," ",1431],["T_STRING","imageListAction",1431],"(",")",["T_WHITESPACE","\n    ",1431],"{",["T_WHITESPACE","\n        ",1432],["T_VARIABLE","$data",1433],["T_WHITESPACE"," ",1433],"=",["T_WHITESPACE"," ",1433],["T_VARIABLE","$this",1433],["T_OBJECT_OPERATOR","->",1433],["T_STRING","getRequest",1433],"(",")",["T_OBJECT_OPERATOR","->",1433],["T_STRING","getParams",1433],"(",")",";",["T_WHITESPACE","\n        ",1433],["T_VARIABLE","$result",1434],["T_WHITESPACE"," ",1434],"=",["T_WHITESPACE"," ",1434],["T_ARRAY","array",1434],"(",")",";",["T_WHITESPACE","\n        ",1434],["T_TRY","try",1435],["T_WHITESPACE"," ",1435],"{",["T_WHITESPACE","\n            ",1435],["T_VARIABLE","$this",1436],["T_OBJECT_OPERATOR","->",1436],["T_STRING","_initApp",1436],"(",")",";",["T_WHITESPACE","\n            ",1436],["T_DOC_COMMENT","\/** @var $imageModel Mage_XmlConnect_Model_Images *\/",1437],["T_WHITESPACE","\n            ",1437],["T_VARIABLE","$imageModel",1438],["T_WHITESPACE"," ",1438],"=",["T_WHITESPACE"," ",1438],["T_STRING","Mage",1438],["T_DOUBLE_COLON","::",1438],["T_STRING","getModel",1438],"(",["T_CONSTANT_ENCAPSED_STRING","'xmlconnect\/images'",1438],")",";",["T_WHITESPACE","\n            ",1438],["T_IF","if",1439],["T_WHITESPACE"," ",1439],"(","!",["T_EMPTY","empty",1439],"(",["T_VARIABLE","$data",1439],"[",["T_CONSTANT_ENCAPSED_STRING","'image_type'",1439],"]",")",")",["T_WHITESPACE"," ",1439],"{",["T_WHITESPACE","\n                ",1439],["T_VARIABLE","$result",1440],"[",["T_CONSTANT_ENCAPSED_STRING","'image_list'",1440],"]",["T_WHITESPACE"," ",1440],"=",["T_WHITESPACE"," ",1440],["T_VARIABLE","$this",1440],["T_OBJECT_OPERATOR","->",1440],["T_STRING","getLayout",1440],"(",")",["T_WHITESPACE","\n                    ",1440],["T_OBJECT_OPERATOR","->",1441],["T_STRING","addBlock",1441],"(",["T_CONSTANT_ENCAPSED_STRING","'xmlconnect\/adminhtml_mobile_edit_tab_design_images'",1441],",",["T_WHITESPACE"," ",1441],["T_CONSTANT_ENCAPSED_STRING","'design_images'",1441],")",["T_WHITESPACE","\n                    ",1441],["T_OBJECT_OPERATOR","->",1442],["T_STRING","getImageList",1442],"(",["T_VARIABLE","$data",1442],"[",["T_CONSTANT_ENCAPSED_STRING","'image_type'",1442],"]",",",["T_WHITESPACE"," ",1442],["T_VARIABLE","$imageModel",1442],["T_OBJECT_OPERATOR","->",1442],["T_STRING","getImageCount",1442],"(",["T_VARIABLE","$data",1442],"[",["T_CONSTANT_ENCAPSED_STRING","'image_type'",1442],"]",")",")",";",["T_WHITESPACE","\n            ",1442],"}",["T_WHITESPACE","\n        ",1443],"}",["T_WHITESPACE"," ",1444],["T_CATCH","catch",1444],["T_WHITESPACE"," ",1444],"(",["T_STRING","Exception",1444],["T_WHITESPACE"," ",1444],["T_VARIABLE","$e",1444],")",["T_WHITESPACE"," ",1444],"{",["T_WHITESPACE","\n            ",1444],["T_VARIABLE","$result",1445],["T_WHITESPACE"," ",1445],"=",["T_WHITESPACE"," ",1445],["T_ARRAY","array",1445],"(",["T_CONSTANT_ENCAPSED_STRING","'error'",1445],["T_WHITESPACE"," ",1445],["T_DOUBLE_ARROW","=>",1445],["T_WHITESPACE"," ",1445],["T_VARIABLE","$e",1445],["T_OBJECT_OPERATOR","->",1445],["T_STRING","getMessage",1445],"(",")",",",["T_WHITESPACE"," ",1445],["T_CONSTANT_ENCAPSED_STRING","'errorcode'",1445],["T_WHITESPACE"," ",1445],["T_DOUBLE_ARROW","=>",1445],["T_WHITESPACE"," ",1445],["T_VARIABLE","$e",1445],["T_OBJECT_OPERATOR","->",1445],["T_STRING","getCode",1445],"(",")",")",";",["T_WHITESPACE","\n        ",1445],"}",["T_WHITESPACE","\n        ",1446],["T_VARIABLE","$this",1447],["T_OBJECT_OPERATOR","->",1447],["T_STRING","getResponse",1447],"(",")",["T_OBJECT_OPERATOR","->",1447],["T_STRING","setBody",1447],"(",["T_STRING","Mage",1447],["T_DOUBLE_COLON","::",1447],["T_STRING","helper",1447],"(",["T_CONSTANT_ENCAPSED_STRING","'core'",1447],")",["T_OBJECT_OPERATOR","->",1447],["T_STRING","jsonEncode",1447],"(",["T_VARIABLE","$result",1447],")",")",";",["T_WHITESPACE","\n    ",1447],"}",["T_WHITESPACE","\n\n    ",1448],["T_DOC_COMMENT","\/**\n     * Delete device image action\n     *\/",1450],["T_WHITESPACE","\n    ",1452],["T_PUBLIC","public",1453],["T_WHITESPACE"," ",1453],["T_FUNCTION","function",1453],["T_WHITESPACE"," ",1453],["T_STRING","deleteImageAction",1453],"(",")",["T_WHITESPACE","\n    ",1453],"{",["T_WHITESPACE","\n        ",1454],["T_VARIABLE","$imageId",1455],["T_WHITESPACE"," ",1455],"=",["T_WHITESPACE"," ",1455],["T_VARIABLE","$this",1455],["T_OBJECT_OPERATOR","->",1455],["T_STRING","getRequest",1455],"(",")",["T_OBJECT_OPERATOR","->",1455],["T_STRING","getParam",1455],"(",["T_CONSTANT_ENCAPSED_STRING","'image_id'",1455],",",["T_WHITESPACE"," ",1455],["T_STRING","false",1455],")",";",["T_WHITESPACE","\n        ",1455],["T_DOC_COMMENT","\/** @var $imageModel Mage_XmlConnect_Model_Images *\/",1456],["T_WHITESPACE","\n        ",1456],["T_VARIABLE","$imageModel",1457],["T_WHITESPACE"," ",1457],"=",["T_WHITESPACE"," ",1457],["T_STRING","Mage",1457],["T_DOUBLE_COLON","::",1457],["T_STRING","getModel",1457],"(",["T_CONSTANT_ENCAPSED_STRING","'xmlconnect\/images'",1457],")",";",["T_WHITESPACE","\n        ",1457],["T_TRY","try",1458],["T_WHITESPACE"," ",1458],"{",["T_WHITESPACE","\n            ",1458],["T_VARIABLE","$imageModel",1459],["T_OBJECT_OPERATOR","->",1459],["T_STRING","load",1459],"(",["T_VARIABLE","$imageId",1459],")",";",["T_WHITESPACE","\n            ",1459],["T_IF","if",1460],["T_WHITESPACE"," ",1460],"(",["T_VARIABLE","$imageModel",1460],["T_OBJECT_OPERATOR","->",1460],["T_STRING","getId",1460],"(",")",")",["T_WHITESPACE"," ",1460],"{",["T_WHITESPACE","\n                ",1460],["T_VARIABLE","$this",1461],["T_OBJECT_OPERATOR","->",1461],["T_STRING","_initApp",1461],"(",")",";",["T_WHITESPACE","\n                ",1461],["T_VARIABLE","$imageModel",1462],["T_OBJECT_OPERATOR","->",1462],["T_STRING","deleteAndRepairOrder",1462],"(",")",";",["T_WHITESPACE","\n                ",1462],["T_VARIABLE","$result",1463],["T_WHITESPACE"," ",1463],"=",["T_WHITESPACE"," ",1463],["T_ARRAY","array",1463],"(",["T_CONSTANT_ENCAPSED_STRING","'success'",1463],["T_WHITESPACE"," ",1463],["T_DOUBLE_ARROW","=>",1463],["T_WHITESPACE"," ",1463],["T_VARIABLE","$this",1463],["T_OBJECT_OPERATOR","->",1463],["T_STRING","__",1463],"(",["T_CONSTANT_ENCAPSED_STRING","'Image has been deleted.'",1463],")",")",";",["T_WHITESPACE","\n                ",1463],["T_VARIABLE","$result",1464],"[",["T_CONSTANT_ENCAPSED_STRING","'image_list'",1464],"]",["T_WHITESPACE"," ",1464],"=",["T_WHITESPACE"," ",1464],["T_VARIABLE","$this",1464],["T_OBJECT_OPERATOR","->",1464],["T_STRING","getLayout",1464],"(",")",["T_WHITESPACE","\n                    ",1464],["T_OBJECT_OPERATOR","->",1465],["T_STRING","addBlock",1465],"(",["T_CONSTANT_ENCAPSED_STRING","'xmlconnect\/adminhtml_mobile_edit_tab_design_images'",1465],",",["T_WHITESPACE"," ",1465],["T_CONSTANT_ENCAPSED_STRING","'design_images'",1465],")",["T_WHITESPACE","\n                    ",1465],["T_OBJECT_OPERATOR","->",1466],["T_STRING","getImageList",1466],"(",["T_VARIABLE","$imageModel",1466],["T_OBJECT_OPERATOR","->",1466],["T_STRING","getImageType",1466],"(",")",",",["T_WHITESPACE"," ",1466],["T_VARIABLE","$imageModel",1466],["T_OBJECT_OPERATOR","->",1466],["T_STRING","getImageCount",1466],"(",")",")",";",["T_WHITESPACE","\n            ",1466],"}",["T_WHITESPACE"," ",1467],["T_ELSE","else",1467],["T_WHITESPACE"," ",1467],"{",["T_WHITESPACE","\n                ",1467],["T_VARIABLE","$result",1468],["T_WHITESPACE"," ",1468],"=",["T_WHITESPACE"," ",1468],["T_ARRAY","array",1468],"(",["T_CONSTANT_ENCAPSED_STRING","'error'",1468],["T_WHITESPACE"," ",1468],["T_DOUBLE_ARROW","=>",1468],["T_WHITESPACE"," ",1468],["T_VARIABLE","$this",1468],["T_OBJECT_OPERATOR","->",1468],["T_STRING","__",1468],"(",["T_CONSTANT_ENCAPSED_STRING","'Image does not exist. Please reload this page.'",1468],")",")",";",["T_WHITESPACE","\n            ",1468],"}",["T_WHITESPACE","\n        ",1469],"}",["T_WHITESPACE"," ",1470],["T_CATCH","catch",1470],["T_WHITESPACE"," ",1470],"(",["T_STRING","Exception",1470],["T_WHITESPACE"," ",1470],["T_VARIABLE","$e",1470],")",["T_WHITESPACE"," ",1470],"{",["T_WHITESPACE","\n            ",1470],["T_VARIABLE","$result",1471],["T_WHITESPACE"," ",1471],"=",["T_WHITESPACE"," ",1471],["T_ARRAY","array",1471],"(",["T_CONSTANT_ENCAPSED_STRING","'error'",1471],["T_WHITESPACE"," ",1471],["T_DOUBLE_ARROW","=>",1471],["T_WHITESPACE"," ",1471],["T_VARIABLE","$e",1471],["T_OBJECT_OPERATOR","->",1471],["T_STRING","getMessage",1471],"(",")",",",["T_WHITESPACE"," ",1471],["T_CONSTANT_ENCAPSED_STRING","'errorcode'",1471],["T_WHITESPACE"," ",1471],["T_DOUBLE_ARROW","=>",1471],["T_WHITESPACE"," ",1471],["T_VARIABLE","$e",1471],["T_OBJECT_OPERATOR","->",1471],["T_STRING","getCode",1471],"(",")",")",";",["T_WHITESPACE","\n        ",1471],"}",["T_WHITESPACE","\n        ",1472],["T_VARIABLE","$this",1473],["T_OBJECT_OPERATOR","->",1473],["T_STRING","getResponse",1473],"(",")",["T_OBJECT_OPERATOR","->",1473],["T_STRING","setBody",1473],"(",["T_STRING","Mage",1473],["T_DOUBLE_COLON","::",1473],["T_STRING","helper",1473],"(",["T_CONSTANT_ENCAPSED_STRING","'core'",1473],")",["T_OBJECT_OPERATOR","->",1473],["T_STRING","jsonEncode",1473],"(",["T_VARIABLE","$result",1473],")",")",";",["T_WHITESPACE","\n    ",1473],"}",["T_WHITESPACE","\n\n    ",1474],["T_DOC_COMMENT","\/**\n     * Delete device image action\n     *\/",1476],["T_WHITESPACE","\n    ",1478],["T_PUBLIC","public",1479],["T_WHITESPACE"," ",1479],["T_FUNCTION","function",1479],["T_WHITESPACE"," ",1479],["T_STRING","deleteImageDataAction",1479],"(",")",["T_WHITESPACE","\n    ",1479],"{",["T_WHITESPACE","\n        ",1480],["T_VARIABLE","$imageId",1481],["T_WHITESPACE"," ",1481],"=",["T_WHITESPACE"," ",1481],["T_VARIABLE","$this",1481],["T_OBJECT_OPERATOR","->",1481],["T_STRING","getRequest",1481],"(",")",["T_OBJECT_OPERATOR","->",1481],["T_STRING","getParam",1481],"(",["T_CONSTANT_ENCAPSED_STRING","'image_id'",1481],",",["T_WHITESPACE"," ",1481],["T_STRING","false",1481],")",";",["T_WHITESPACE","\n        ",1481],["T_TRY","try",1482],["T_WHITESPACE"," ",1482],"{",["T_WHITESPACE","\n            ",1482],["T_VARIABLE","$this",1483],["T_OBJECT_OPERATOR","->",1483],["T_STRING","_initApp",1483],"(",")",";",["T_WHITESPACE","\n            ",1483],["T_IF","if",1484],["T_WHITESPACE"," ",1484],"(",["T_VARIABLE","$imageId",1484],")",["T_WHITESPACE"," ",1484],"{",["T_WHITESPACE","\n                ",1484],["T_VARIABLE","$image",1485],["T_WHITESPACE"," ",1485],"=",["T_WHITESPACE"," ",1485],["T_STRING","Mage",1485],["T_DOUBLE_COLON","::",1485],["T_STRING","getModel",1485],"(",["T_CONSTANT_ENCAPSED_STRING","'xmlconnect\/images'",1485],")",["T_OBJECT_OPERATOR","->",1485],["T_STRING","load",1485],"(",["T_VARIABLE","$imageId",1485],")",["T_OBJECT_OPERATOR","->",1485],["T_STRING","deleteImageAction",1485],"(",")",";",["T_WHITESPACE","\n                ",1485],["T_VARIABLE","$result",1486],["T_WHITESPACE"," ",1486],"=",["T_WHITESPACE"," ",1486],["T_ARRAY","array",1486],"(",["T_CONSTANT_ENCAPSED_STRING","'success'",1486],["T_WHITESPACE"," ",1486],["T_DOUBLE_ARROW","=>",1486],["T_WHITESPACE"," ",1486],["T_VARIABLE","$this",1486],["T_OBJECT_OPERATOR","->",1486],["T_STRING","__",1486],"(",["T_CONSTANT_ENCAPSED_STRING","'Image has been deleted.'",1486],")",")",";",["T_WHITESPACE","\n                ",1486],["T_VARIABLE","$result",1487],"[",["T_CONSTANT_ENCAPSED_STRING","'image_list'",1487],"]",["T_WHITESPACE"," ",1487],"=",["T_WHITESPACE"," ",1487],["T_VARIABLE","$this",1487],["T_OBJECT_OPERATOR","->",1487],["T_STRING","getLayout",1487],"(",")",["T_WHITESPACE","\n                    ",1487],["T_OBJECT_OPERATOR","->",1488],["T_STRING","addBlock",1488],"(",["T_CONSTANT_ENCAPSED_STRING","'xmlconnect\/adminhtml_mobile_edit_tab_design_images'",1488],",",["T_WHITESPACE"," ",1488],["T_CONSTANT_ENCAPSED_STRING","'design_images'",1488],")",["T_WHITESPACE","\n                    ",1488],["T_OBJECT_OPERATOR","->",1489],["T_STRING","getImageList",1489],"(",["T_VARIABLE","$image",1489],["T_OBJECT_OPERATOR","->",1489],["T_STRING","getImageType",1489],"(",")",",",["T_WHITESPACE"," ",1489],["T_VARIABLE","$image",1489],["T_OBJECT_OPERATOR","->",1489],["T_STRING","getImageCount",1489],"(",")",")",";",["T_WHITESPACE","\n            ",1489],"}",["T_WHITESPACE"," ",1490],["T_ELSE","else",1490],["T_WHITESPACE"," ",1490],"{",["T_WHITESPACE","\n                ",1490],["T_VARIABLE","$result",1491],["T_WHITESPACE"," ",1491],"=",["T_WHITESPACE"," ",1491],["T_ARRAY","array",1491],"(",["T_CONSTANT_ENCAPSED_STRING","'error'",1491],["T_WHITESPACE"," ",1491],["T_DOUBLE_ARROW","=>",1491],["T_WHITESPACE"," ",1491],["T_VARIABLE","$this",1491],["T_OBJECT_OPERATOR","->",1491],["T_STRING","__",1491],"(",["T_CONSTANT_ENCAPSED_STRING","'Image id is required.'",1491],")",")",";",["T_WHITESPACE","\n            ",1491],"}",["T_WHITESPACE","\n        ",1492],"}",["T_WHITESPACE"," ",1493],["T_CATCH","catch",1493],["T_WHITESPACE"," ",1493],"(",["T_STRING","Exception",1493],["T_WHITESPACE"," ",1493],["T_VARIABLE","$e",1493],")",["T_WHITESPACE"," ",1493],"{",["T_WHITESPACE","\n            ",1493],["T_VARIABLE","$result",1494],["T_WHITESPACE"," ",1494],"=",["T_WHITESPACE"," ",1494],["T_ARRAY","array",1494],"(",["T_CONSTANT_ENCAPSED_STRING","'error'",1494],["T_WHITESPACE"," ",1494],["T_DOUBLE_ARROW","=>",1494],["T_WHITESPACE"," ",1494],["T_VARIABLE","$e",1494],["T_OBJECT_OPERATOR","->",1494],["T_STRING","getMessage",1494],"(",")",",",["T_WHITESPACE"," ",1494],["T_CONSTANT_ENCAPSED_STRING","'errorcode'",1494],["T_WHITESPACE"," ",1494],["T_DOUBLE_ARROW","=>",1494],["T_WHITESPACE"," ",1494],["T_VARIABLE","$e",1494],["T_OBJECT_OPERATOR","->",1494],["T_STRING","getCode",1494],"(",")",")",";",["T_WHITESPACE","\n        ",1494],"}",["T_WHITESPACE","\n        ",1495],["T_VARIABLE","$this",1496],["T_OBJECT_OPERATOR","->",1496],["T_STRING","getResponse",1496],"(",")",["T_OBJECT_OPERATOR","->",1496],["T_STRING","setBody",1496],"(",["T_STRING","Mage",1496],["T_DOUBLE_COLON","::",1496],["T_STRING","helper",1496],"(",["T_CONSTANT_ENCAPSED_STRING","'core'",1496],")",["T_OBJECT_OPERATOR","->",1496],["T_STRING","jsonEncode",1496],"(",["T_VARIABLE","$result",1496],")",")",";",["T_WHITESPACE","\n    ",1496],"}",["T_WHITESPACE","\n\n    ",1497],["T_DOC_COMMENT","\/**\n     * Save image action\n     *\/",1499],["T_WHITESPACE","\n    ",1501],["T_PUBLIC","public",1502],["T_WHITESPACE"," ",1502],["T_FUNCTION","function",1502],["T_WHITESPACE"," ",1502],["T_STRING","saveImageDataAction",1502],"(",")",["T_WHITESPACE","\n    ",1502],"{",["T_WHITESPACE","\n        ",1503],["T_VARIABLE","$result",1504],["T_WHITESPACE"," ",1504],"=",["T_WHITESPACE"," ",1504],["T_ARRAY","array",1504],"(",")",";",["T_WHITESPACE","\n        ",1504],["T_TRY","try",1505],["T_WHITESPACE"," ",1505],"{",["T_WHITESPACE","\n            ",1505],["T_VARIABLE","$imageId",1506],["T_WHITESPACE"," ",1506],"=",["T_WHITESPACE"," ",1506],["T_VARIABLE","$this",1506],["T_OBJECT_OPERATOR","->",1506],["T_STRING","getRequest",1506],"(",")",["T_OBJECT_OPERATOR","->",1506],["T_STRING","getParam",1506],"(",["T_CONSTANT_ENCAPSED_STRING","'image_id'",1506],",",["T_WHITESPACE"," ",1506],["T_STRING","false",1506],")",";",["T_WHITESPACE","\n            ",1506],["T_IF","if",1507],["T_WHITESPACE"," ",1507],"(","!",["T_VARIABLE","$imageId",1507],")",["T_WHITESPACE"," ",1507],"{",["T_WHITESPACE","\n                ",1507],["T_STRING","Mage",1508],["T_DOUBLE_COLON","::",1508],["T_STRING","throwException",1508],"(",["T_VARIABLE","$this",1508],["T_OBJECT_OPERATOR","->",1508],["T_STRING","__",1508],"(",["T_CONSTANT_ENCAPSED_STRING","'image_id is required'",1508],")",")",";",["T_WHITESPACE","\n            ",1508],"}",["T_WHITESPACE","\n            ",1509],["T_VARIABLE","$imageConfig",1510],["T_WHITESPACE"," ",1510],"=",["T_WHITESPACE"," ",1510],["T_VARIABLE","$this",1510],["T_OBJECT_OPERATOR","->",1510],["T_STRING","_initApp",1510],"(",")",["T_OBJECT_OPERATOR","->",1510],["T_STRING","getImageActionModel",1510],"(",")",["T_OBJECT_OPERATOR","->",1510],["T_STRING","saveImageAction",1510],"(",["T_VARIABLE","$this",1510],["T_OBJECT_OPERATOR","->",1510],["T_STRING","getRequest",1510],"(",")",["T_OBJECT_OPERATOR","->",1510],["T_STRING","getParams",1510],"(",")",")",["T_WHITESPACE","\n                ",1510],["T_OBJECT_OPERATOR","->",1511],["T_STRING","getCurrentImageActionData",1511],"(",")",";",["T_WHITESPACE","\n            ",1511],["T_VARIABLE","$result",1512],"[",["T_CONSTANT_ENCAPSED_STRING","'success'",1512],"]",["T_WHITESPACE"," ",1512],"=",["T_WHITESPACE"," ",1512],["T_VARIABLE","$this",1512],["T_OBJECT_OPERATOR","->",1512],["T_STRING","__",1512],"(",["T_CONSTANT_ENCAPSED_STRING","'Image action has been saved.'",1512],")",";",["T_WHITESPACE","\n            ",1512],["T_VARIABLE","$result",1513],"[",["T_CONSTANT_ENCAPSED_STRING","'image_action_data'",1513],"]",["T_WHITESPACE"," ",1513],"=",["T_WHITESPACE"," ",1513],["T_VARIABLE","$imageConfig",1513],";",["T_WHITESPACE","\n        ",1513],"}",["T_WHITESPACE"," ",1514],["T_CATCH","catch",1514],["T_WHITESPACE"," ",1514],"(",["T_STRING","Exception",1514],["T_WHITESPACE"," ",1514],["T_VARIABLE","$e",1514],")",["T_WHITESPACE"," ",1514],"{",["T_WHITESPACE","\n            ",1514],["T_STRING","Mage",1515],["T_DOUBLE_COLON","::",1515],["T_STRING","logException",1515],"(",["T_VARIABLE","$e",1515],")",";",["T_WHITESPACE","\n            ",1515],["T_VARIABLE","$result",1516],["T_WHITESPACE"," ",1516],"=",["T_WHITESPACE"," ",1516],["T_ARRAY","array",1516],"(",["T_CONSTANT_ENCAPSED_STRING","'error'",1516],["T_WHITESPACE"," ",1516],["T_DOUBLE_ARROW","=>",1516],["T_WHITESPACE"," ",1516],["T_VARIABLE","$e",1516],["T_OBJECT_OPERATOR","->",1516],["T_STRING","getMessage",1516],"(",")",",",["T_WHITESPACE"," ",1516],["T_CONSTANT_ENCAPSED_STRING","'errorcode'",1516],["T_WHITESPACE"," ",1516],["T_DOUBLE_ARROW","=>",1516],["T_WHITESPACE"," ",1516],["T_VARIABLE","$e",1516],["T_OBJECT_OPERATOR","->",1516],["T_STRING","getCode",1516],"(",")",")",";",["T_WHITESPACE","\n        ",1516],"}",["T_WHITESPACE","\n        ",1517],["T_VARIABLE","$this",1518],["T_OBJECT_OPERATOR","->",1518],["T_STRING","getResponse",1518],"(",")",["T_OBJECT_OPERATOR","->",1518],["T_STRING","setBody",1518],"(",["T_STRING","Mage",1518],["T_DOUBLE_COLON","::",1518],["T_STRING","helper",1518],"(",["T_CONSTANT_ENCAPSED_STRING","'core'",1518],")",["T_OBJECT_OPERATOR","->",1518],["T_STRING","jsonEncode",1518],"(",["T_VARIABLE","$result",1518],")",")",";",["T_WHITESPACE","\n    ",1518],"}",["T_WHITESPACE","\n\n    ",1519],["T_DOC_COMMENT","\/**\n     * Global Search Action\n     *\/",1521],["T_WHITESPACE","\n    ",1523],["T_PUBLIC","public",1524],["T_WHITESPACE"," ",1524],["T_FUNCTION","function",1524],["T_WHITESPACE"," ",1524],["T_STRING","globalSearchAction",1524],"(",")",["T_WHITESPACE","\n    ",1524],"{",["T_WHITESPACE","\n        ",1525],["T_VARIABLE","$start",1526],["T_WHITESPACE"," ",1526],"=",["T_WHITESPACE"," ",1526],["T_VARIABLE","$this",1526],["T_OBJECT_OPERATOR","->",1526],["T_STRING","getRequest",1526],"(",")",["T_OBJECT_OPERATOR","->",1526],["T_STRING","getParam",1526],"(",["T_CONSTANT_ENCAPSED_STRING","'start'",1526],",",["T_WHITESPACE"," ",1526],["T_LNUMBER","1",1526],")",";",["T_WHITESPACE","\n        ",1526],["T_VARIABLE","$limit",1527],["T_WHITESPACE"," ",1527],"=",["T_WHITESPACE"," ",1527],["T_VARIABLE","$this",1527],["T_OBJECT_OPERATOR","->",1527],["T_STRING","getRequest",1527],"(",")",["T_OBJECT_OPERATOR","->",1527],["T_STRING","getParam",1527],"(",["T_CONSTANT_ENCAPSED_STRING","'limit'",1527],",",["T_WHITESPACE"," ",1527],["T_LNUMBER","10",1527],")",";",["T_WHITESPACE","\n        ",1527],["T_VARIABLE","$query",1528],["T_WHITESPACE"," ",1528],"=",["T_WHITESPACE"," ",1528],["T_VARIABLE","$this",1528],["T_OBJECT_OPERATOR","->",1528],["T_STRING","getRequest",1528],"(",")",["T_OBJECT_OPERATOR","->",1528],["T_STRING","getParam",1528],"(",["T_CONSTANT_ENCAPSED_STRING","'query'",1528],",",["T_WHITESPACE"," ",1528],["T_CONSTANT_ENCAPSED_STRING","''",1528],")",";",["T_WHITESPACE","\n        ",1528],["T_VARIABLE","$type",1529],["T_WHITESPACE"," ",1529],"=",["T_WHITESPACE"," ",1529],["T_VARIABLE","$this",1529],["T_OBJECT_OPERATOR","->",1529],["T_STRING","getRequest",1529],"(",")",["T_OBJECT_OPERATOR","->",1529],["T_STRING","getParam",1529],"(",["T_CONSTANT_ENCAPSED_STRING","'type'",1529],",",["T_WHITESPACE"," ",1529],["T_CONSTANT_ENCAPSED_STRING","'product'",1529],")",";",["T_WHITESPACE","\n\n        ",1529],["T_IF","if",1531],["T_WHITESPACE"," ",1531],"(",["T_VARIABLE","$type",1531],["T_WHITESPACE"," ",1531],["T_IS_EQUAL","==",1531],["T_WHITESPACE"," ",1531],["T_CONSTANT_ENCAPSED_STRING","'product'",1531],")",["T_WHITESPACE"," ",1531],"{",["T_WHITESPACE","\n            ",1531],["T_VARIABLE","$searchModel",1532],["T_WHITESPACE"," ",1532],"=",["T_WHITESPACE"," ",1532],["T_STRING","Mage",1532],["T_DOUBLE_COLON","::",1532],["T_STRING","getModel",1532],"(",["T_CONSTANT_ENCAPSED_STRING","'xmlconnect\/adminhtml_search_catalog'",1532],")",";",["T_WHITESPACE","\n        ",1532],"}",["T_WHITESPACE"," ",1533],["T_ELSE","else",1533],["T_WHITESPACE"," ",1533],"{",["T_WHITESPACE","\n            ",1533],["T_VARIABLE","$searchModel",1534],["T_WHITESPACE"," ",1534],"=",["T_WHITESPACE"," ",1534],["T_STRING","Mage",1534],["T_DOUBLE_COLON","::",1534],["T_STRING","getModel",1534],"(",["T_CONSTANT_ENCAPSED_STRING","'xmlconnect\/adminhtml_search_category'",1534],")",";",["T_WHITESPACE","\n        ",1534],"}",["T_WHITESPACE","\n        ",1535],["T_VARIABLE","$results",1536],["T_WHITESPACE"," ",1536],"=",["T_WHITESPACE"," ",1536],["T_VARIABLE","$searchModel",1536],["T_OBJECT_OPERATOR","->",1536],["T_STRING","setStart",1536],"(",["T_VARIABLE","$start",1536],")",["T_OBJECT_OPERATOR","->",1536],["T_STRING","setLimit",1536],"(",["T_VARIABLE","$limit",1536],")",["T_OBJECT_OPERATOR","->",1536],["T_STRING","setQuery",1536],"(",["T_VARIABLE","$query",1536],")",["T_OBJECT_OPERATOR","->",1536],["T_STRING","load",1536],"(",")",["T_OBJECT_OPERATOR","->",1536],["T_STRING","getResults",1536],"(",")",";",["T_WHITESPACE","\n\n        ",1536],["T_VARIABLE","$block",1538],["T_WHITESPACE"," ",1538],"=",["T_WHITESPACE"," ",1538],["T_VARIABLE","$this",1538],["T_OBJECT_OPERATOR","->",1538],["T_STRING","getLayout",1538],"(",")",["T_OBJECT_OPERATOR","->",1538],["T_STRING","createBlock",1538],"(",["T_CONSTANT_ENCAPSED_STRING","'adminhtml\/template'",1538],")",["T_WHITESPACE","\n            ",1538],["T_OBJECT_OPERATOR","->",1539],["T_STRING","setTemplate",1539],"(",["T_CONSTANT_ENCAPSED_STRING","'xmlconnect\/edit\/tab\/design\/autocomplete.phtml'",1539],")",["T_OBJECT_OPERATOR","->",1539],["T_STRING","assign",1539],"(",["T_CONSTANT_ENCAPSED_STRING","'items'",1539],",",["T_WHITESPACE"," ",1539],["T_VARIABLE","$results",1539],")",";",["T_WHITESPACE","\n\n        ",1539],["T_VARIABLE","$this",1541],["T_OBJECT_OPERATOR","->",1541],["T_STRING","getResponse",1541],"(",")",["T_OBJECT_OPERATOR","->",1541],["T_STRING","setBody",1541],"(",["T_VARIABLE","$block",1541],["T_OBJECT_OPERATOR","->",1541],["T_STRING","toHtml",1541],"(",")",")",";",["T_WHITESPACE","\n    ",1541],"}",["T_WHITESPACE","\n\n     ",1542],["T_DOC_COMMENT","\/**\n     * Save image order\n     *\/",1544],["T_WHITESPACE","\n    ",1546],["T_PUBLIC","public",1547],["T_WHITESPACE"," ",1547],["T_FUNCTION","function",1547],["T_WHITESPACE"," ",1547],["T_STRING","saveImageOrderAction",1547],"(",")",["T_WHITESPACE","\n    ",1547],"{",["T_WHITESPACE","\n        ",1548],["T_DOC_COMMENT","\/** @var $imagesModel Mage_XmlConnect_Model_Images *\/",1549],["T_WHITESPACE","\n        ",1549],["T_VARIABLE","$imagesModel",1550],["T_WHITESPACE"," ",1550],"=",["T_WHITESPACE"," ",1550],["T_STRING","Mage",1550],["T_DOUBLE_COLON","::",1550],["T_STRING","getModel",1550],"(",["T_CONSTANT_ENCAPSED_STRING","'xmlconnect\/images'",1550],")",";",["T_WHITESPACE","\n        ",1550],["T_VARIABLE","$imageData",1551],["T_WHITESPACE"," ",1551],"=",["T_WHITESPACE"," ",1551],["T_VARIABLE","$this",1551],["T_OBJECT_OPERATOR","->",1551],["T_STRING","getRequest",1551],"(",")",["T_OBJECT_OPERATOR","->",1551],["T_STRING","getParam",1551],"(",["T_CONSTANT_ENCAPSED_STRING","'data'",1551],",",["T_WHITESPACE"," ",1551],["T_STRING","false",1551],")",";",["T_WHITESPACE","\n        ",1551],["T_VARIABLE","$imageType",1552],["T_WHITESPACE"," ",1552],"=",["T_WHITESPACE"," ",1552],["T_VARIABLE","$this",1552],["T_OBJECT_OPERATOR","->",1552],["T_STRING","getRequest",1552],"(",")",["T_OBJECT_OPERATOR","->",1552],["T_STRING","getParam",1552],"(",["T_CONSTANT_ENCAPSED_STRING","'type'",1552],",",["T_WHITESPACE"," ",1552],["T_STRING","false",1552],")",";",["T_WHITESPACE","\n        ",1552],["T_TRY","try",1553],["T_WHITESPACE"," ",1553],"{",["T_WHITESPACE","\n\n            ",1553],["T_IF","if",1555],["T_WHITESPACE"," ",1555],"(","!",["T_VARIABLE","$imageType",1555],["T_WHITESPACE"," ",1555],["T_BOOLEAN_OR","||",1555],["T_WHITESPACE"," ",1555],"!",["T_VARIABLE","$imageData",1555],")",["T_WHITESPACE"," ",1555],"{",["T_WHITESPACE","\n                ",1555],["T_STRING","Mage",1556],["T_DOUBLE_COLON","::",1556],["T_STRING","throwException",1556],"(",["T_VARIABLE","$this",1556],["T_OBJECT_OPERATOR","->",1556],["T_STRING","__",1556],"(",["T_CONSTANT_ENCAPSED_STRING","'Type and data is required'",1556],")",")",";",["T_WHITESPACE","\n            ",1556],"}",["T_WHITESPACE","\n            ",1557],["T_VARIABLE","$actionModel",1558],["T_WHITESPACE"," ",1558],"=",["T_WHITESPACE"," ",1558],["T_VARIABLE","$this",1558],["T_OBJECT_OPERATOR","->",1558],["T_STRING","_initApp",1558],"(",")",["T_OBJECT_OPERATOR","->",1558],["T_STRING","getImageActionModel",1558],"(",")",";",["T_WHITESPACE","\n\n            ",1558],["T_VARIABLE","$actionModel",1560],["T_OBJECT_OPERATOR","->",1560],["T_STRING","saveImageOrder",1560],"(",["T_VARIABLE","$imageData",1560],",",["T_WHITESPACE"," ",1560],["T_VARIABLE","$imageType",1560],")",";",["T_WHITESPACE","\n            ",1560],["T_VARIABLE","$result",1561],["T_WHITESPACE"," ",1561],"=",["T_WHITESPACE"," ",1561],["T_ARRAY","array",1561],"(",["T_CONSTANT_ENCAPSED_STRING","'success'",1561],["T_WHITESPACE"," ",1561],["T_DOUBLE_ARROW","=>",1561],["T_WHITESPACE"," ",1561],["T_VARIABLE","$this",1561],["T_OBJECT_OPERATOR","->",1561],["T_STRING","__",1561],"(",["T_CONSTANT_ENCAPSED_STRING","'Images order has been updated.'",1561],")",")",";",["T_WHITESPACE","\n            ",1561],["T_VARIABLE","$result",1562],"[",["T_CONSTANT_ENCAPSED_STRING","'image_list'",1562],"]",["T_WHITESPACE"," ",1562],"=",["T_WHITESPACE"," ",1562],["T_VARIABLE","$this",1562],["T_OBJECT_OPERATOR","->",1562],["T_STRING","getLayout",1562],"(",")",["T_WHITESPACE","\n                ",1562],["T_OBJECT_OPERATOR","->",1563],["T_STRING","addBlock",1563],"(",["T_CONSTANT_ENCAPSED_STRING","'xmlconnect\/adminhtml_mobile_edit_tab_design_images'",1563],",",["T_WHITESPACE"," ",1563],["T_CONSTANT_ENCAPSED_STRING","'design_images'",1563],")",["T_WHITESPACE","\n                ",1563],["T_OBJECT_OPERATOR","->",1564],["T_STRING","getImageList",1564],"(",["T_VARIABLE","$imageType",1564],",",["T_WHITESPACE"," ",1564],["T_VARIABLE","$imagesModel",1564],["T_OBJECT_OPERATOR","->",1564],["T_STRING","getImageCount",1564],"(",["T_VARIABLE","$imageType",1564],")",")",";",["T_WHITESPACE","\n        ",1564],"}",["T_WHITESPACE"," ",1565],["T_CATCH","catch",1565],["T_WHITESPACE"," ",1565],"(",["T_STRING","Exception",1565],["T_WHITESPACE"," ",1565],["T_VARIABLE","$e",1565],")",["T_WHITESPACE"," ",1565],"{",["T_WHITESPACE","\n            ",1565],["T_STRING","Mage",1566],["T_DOUBLE_COLON","::",1566],["T_STRING","logException",1566],"(",["T_VARIABLE","$e",1566],")",";",["T_WHITESPACE","\n            ",1566],["T_VARIABLE","$result",1567],["T_WHITESPACE"," ",1567],"=",["T_WHITESPACE"," ",1567],["T_ARRAY","array",1567],"(",["T_CONSTANT_ENCAPSED_STRING","'error'",1567],["T_WHITESPACE"," ",1567],["T_DOUBLE_ARROW","=>",1567],["T_WHITESPACE"," ",1567],["T_VARIABLE","$e",1567],["T_OBJECT_OPERATOR","->",1567],["T_STRING","getMessage",1567],"(",")",",",["T_WHITESPACE"," ",1567],["T_CONSTANT_ENCAPSED_STRING","'errorcode'",1567],["T_WHITESPACE"," ",1567],["T_DOUBLE_ARROW","=>",1567],["T_WHITESPACE"," ",1567],["T_VARIABLE","$e",1567],["T_OBJECT_OPERATOR","->",1567],["T_STRING","getCode",1567],"(",")",")",";",["T_WHITESPACE","\n        ",1567],"}",["T_WHITESPACE","\n        ",1568],["T_VARIABLE","$this",1569],["T_OBJECT_OPERATOR","->",1569],["T_STRING","getResponse",1569],"(",")",["T_OBJECT_OPERATOR","->",1569],["T_STRING","setBody",1569],"(",["T_STRING","Mage",1569],["T_DOUBLE_COLON","::",1569],["T_STRING","helper",1569],"(",["T_CONSTANT_ENCAPSED_STRING","'core'",1569],")",["T_OBJECT_OPERATOR","->",1569],["T_STRING","jsonEncode",1569],"(",["T_VARIABLE","$result",1569],")",")",";",["T_WHITESPACE","\n    ",1569],"}",["T_WHITESPACE","\n",1570],"}",["T_WHITESPACE","\n",1571]]
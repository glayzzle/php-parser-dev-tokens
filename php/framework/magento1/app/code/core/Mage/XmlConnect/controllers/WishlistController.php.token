[["T_OPEN_TAG","<?php\n",1],["T_DOC_COMMENT","\/**\n * Magento\n *\n * NOTICE OF LICENSE\n *\n * This source file is subject to the Open Software License (OSL 3.0)\n * that is bundled with this package in the file LICENSE.txt.\n * It is also available through the world-wide-web at this URL:\n * http:\/\/opensource.org\/licenses\/osl-3.0.php\n * If you did not receive a copy of the license and are unable to\n * obtain it through the world-wide-web, please send an email\n * to license@magento.com so we can send you a copy immediately.\n *\n * DISCLAIMER\n *\n * Do not edit or add to this file if you wish to upgrade Magento to newer\n * versions in the future. If you wish to customize Magento for your\n * needs please refer to http:\/\/www.magento.com for more information.\n *\n * @category    Mage\n * @package     Mage_XmlConnect\n * @copyright  Copyright (c) 2006-2016 X.commerce, Inc. and affiliates (http:\/\/www.magento.com)\n * @license    http:\/\/opensource.org\/licenses\/osl-3.0.php  Open Software License (OSL 3.0)\n *\/",2],["T_WHITESPACE","\n\n",25],["T_DOC_COMMENT","\/**\n * XmlConnect wishlist controller\n *\n * @category    Mage\n * @package     Mage_XmlConnect\n * @author      Magento Core Team <core@magentocommerce.com>\n *\/",27],["T_WHITESPACE","\n",33],["T_CLASS","class",34],["T_WHITESPACE"," ",34],["T_STRING","Mage_XmlConnect_WishlistController",34],["T_WHITESPACE"," ",34],["T_EXTENDS","extends",34],["T_WHITESPACE"," ",34],["T_STRING","Mage_XmlConnect_Controller_Action",34],["T_WHITESPACE","\n",34],"{",["T_WHITESPACE","\n    ",35],["T_DOC_COMMENT","\/**\n     * Check if customer is logged in\n     *\n     * @return null\n     *\/",36],["T_WHITESPACE","\n    ",40],["T_PUBLIC","public",41],["T_WHITESPACE"," ",41],["T_FUNCTION","function",41],["T_WHITESPACE"," ",41],["T_STRING","preDispatch",41],"(",")",["T_WHITESPACE","\n    ",41],"{",["T_WHITESPACE","\n        ",42],["T_STRING","parent",43],["T_DOUBLE_COLON","::",43],["T_STRING","preDispatch",43],"(",")",";",["T_WHITESPACE","\n        ",43],["T_IF","if",44],["T_WHITESPACE"," ",44],"(","!",["T_VARIABLE","$this",44],["T_OBJECT_OPERATOR","->",44],["T_STRING","_getCustomerSession",44],"(",")",["T_OBJECT_OPERATOR","->",44],["T_STRING","isLoggedIn",44],"(",")",")",["T_WHITESPACE"," ",44],"{",["T_WHITESPACE","\n            ",44],["T_VARIABLE","$this",45],["T_OBJECT_OPERATOR","->",45],["T_STRING","setFlag",45],"(",["T_CONSTANT_ENCAPSED_STRING","''",45],",",["T_WHITESPACE"," ",45],["T_STRING","self",45],["T_DOUBLE_COLON","::",45],["T_STRING","FLAG_NO_DISPATCH",45],",",["T_WHITESPACE"," ",45],["T_STRING","true",45],")",";",["T_WHITESPACE","\n            ",45],["T_VARIABLE","$this",46],["T_OBJECT_OPERATOR","->",46],["T_STRING","_message",46],"(",["T_WHITESPACE","\n                ",46],["T_VARIABLE","$this",47],["T_OBJECT_OPERATOR","->",47],["T_STRING","__",47],"(",["T_CONSTANT_ENCAPSED_STRING","'Customer not logged in.'",47],")",",",["T_WHITESPACE"," ",47],["T_STRING","self",47],["T_DOUBLE_COLON","::",47],["T_STRING","MESSAGE_STATUS_ERROR",47],",",["T_WHITESPACE"," ",47],["T_ARRAY","array",47],"(",["T_CONSTANT_ENCAPSED_STRING","'logged_in'",47],["T_WHITESPACE"," ",47],["T_DOUBLE_ARROW","=>",47],["T_WHITESPACE"," ",47],["T_CONSTANT_ENCAPSED_STRING","'0'",47],")",["T_WHITESPACE","\n            ",47],")",";",["T_WHITESPACE","\n            ",48],["T_RETURN","return",49],["T_WHITESPACE"," ",49],";",["T_WHITESPACE","\n        ",49],"}",["T_WHITESPACE","\n    ",50],"}",["T_WHITESPACE","\n\n    ",51],["T_DOC_COMMENT","\/**\n     * Get customer session model\n     *\n     * @return Mage_Customer_Model_Session\n     *\/",53],["T_WHITESPACE","\n    ",57],["T_PROTECTED","protected",58],["T_WHITESPACE"," ",58],["T_FUNCTION","function",58],["T_WHITESPACE"," ",58],["T_STRING","_getCustomerSession",58],"(",")",["T_WHITESPACE","\n    ",58],"{",["T_WHITESPACE","\n        ",59],["T_RETURN","return",60],["T_WHITESPACE"," ",60],["T_STRING","Mage",60],["T_DOUBLE_COLON","::",60],["T_STRING","getSingleton",60],"(",["T_CONSTANT_ENCAPSED_STRING","'customer\/session'",60],")",";",["T_WHITESPACE","\n    ",60],"}",["T_WHITESPACE","\n\n    ",61],["T_DOC_COMMENT","\/**\n     * Retrieve wishlist object\n     *\n     * @return Mage_Wishlist_Model_Wishlist|false\n     *\/",63],["T_WHITESPACE","\n    ",67],["T_PROTECTED","protected",68],["T_WHITESPACE"," ",68],["T_FUNCTION","function",68],["T_WHITESPACE"," ",68],["T_STRING","_getWishlist",68],"(",")",["T_WHITESPACE","\n    ",68],"{",["T_WHITESPACE","\n        ",69],["T_TRY","try",70],["T_WHITESPACE"," ",70],"{",["T_WHITESPACE","\n            ",70],["T_VARIABLE","$wishlist",71],["T_WHITESPACE"," ",71],"=",["T_WHITESPACE"," ",71],["T_STRING","Mage",71],["T_DOUBLE_COLON","::",71],["T_STRING","getModel",71],"(",["T_CONSTANT_ENCAPSED_STRING","'wishlist\/wishlist'",71],")",["T_WHITESPACE","\n                ",71],["T_OBJECT_OPERATOR","->",72],["T_STRING","loadByCustomer",72],"(",["T_VARIABLE","$this",72],["T_OBJECT_OPERATOR","->",72],["T_STRING","_getCustomerSession",72],"(",")",["T_OBJECT_OPERATOR","->",72],["T_STRING","getCustomer",72],"(",")",",",["T_WHITESPACE"," ",72],["T_STRING","true",72],")",";",["T_WHITESPACE","\n            ",72],["T_STRING","Mage",73],["T_DOUBLE_COLON","::",73],["T_STRING","register",73],"(",["T_CONSTANT_ENCAPSED_STRING","'wishlist'",73],",",["T_WHITESPACE"," ",73],["T_VARIABLE","$wishlist",73],")",";",["T_WHITESPACE","\n        ",73],"}",["T_WHITESPACE"," ",74],["T_CATCH","catch",74],["T_WHITESPACE"," ",74],"(",["T_STRING","Mage_Core_Exception",74],["T_WHITESPACE"," ",74],["T_VARIABLE","$e",74],")",["T_WHITESPACE"," ",74],"{",["T_WHITESPACE","\n            ",74],["T_VARIABLE","$this",75],["T_OBJECT_OPERATOR","->",75],["T_STRING","_message",75],"(",["T_VARIABLE","$e",75],["T_OBJECT_OPERATOR","->",75],["T_STRING","getMessage",75],"(",")",",",["T_WHITESPACE"," ",75],["T_STRING","self",75],["T_DOUBLE_COLON","::",75],["T_STRING","MESSAGE_STATUS_ERROR",75],")",";",["T_WHITESPACE","\n            ",75],["T_RETURN","return",76],["T_WHITESPACE"," ",76],["T_STRING","false",76],";",["T_WHITESPACE","\n        ",76],"}",["T_WHITESPACE"," ",77],["T_CATCH","catch",77],["T_WHITESPACE"," ",77],"(",["T_STRING","Exception",77],["T_WHITESPACE"," ",77],["T_VARIABLE","$e",77],")",["T_WHITESPACE"," ",77],"{",["T_WHITESPACE","\n            ",77],["T_VARIABLE","$this",78],["T_OBJECT_OPERATOR","->",78],["T_STRING","_message",78],"(",["T_VARIABLE","$this",78],["T_OBJECT_OPERATOR","->",78],["T_STRING","__",78],"(",["T_CONSTANT_ENCAPSED_STRING","'Can\\'t create wishlist.'",78],")",",",["T_WHITESPACE"," ",78],["T_STRING","self",78],["T_DOUBLE_COLON","::",78],["T_STRING","MESSAGE_STATUS_ERROR",78],")",";",["T_WHITESPACE","\n            ",78],["T_RETURN","return",79],["T_WHITESPACE"," ",79],["T_STRING","false",79],";",["T_WHITESPACE","\n        ",79],"}",["T_WHITESPACE","\n        ",80],["T_RETURN","return",81],["T_WHITESPACE"," ",81],["T_VARIABLE","$wishlist",81],";",["T_WHITESPACE","\n    ",81],"}",["T_WHITESPACE","\n\n    ",82],["T_DOC_COMMENT","\/**\n     * Display customer wishlist\n     *\n     * @return null\n     *\/",84],["T_WHITESPACE","\n    ",88],["T_PUBLIC","public",89],["T_WHITESPACE"," ",89],["T_FUNCTION","function",89],["T_WHITESPACE"," ",89],["T_STRING","indexAction",89],"(",")",["T_WHITESPACE","\n    ",89],"{",["T_WHITESPACE","\n        ",90],["T_IF","if",91],["T_WHITESPACE"," ",91],"(",["T_VARIABLE","$this",91],["T_OBJECT_OPERATOR","->",91],["T_STRING","_checkApiForward",91],"(",["T_CONSTANT_ENCAPSED_STRING","'details'",91],",",["T_WHITESPACE"," ",91],["T_STRING","Mage_XmlConnect_Helper_Data",91],["T_DOUBLE_COLON","::",91],["T_STRING","DEVICE_API_V_23",91],")",")",["T_WHITESPACE"," ",91],"{",["T_WHITESPACE","\n            ",91],["T_RETURN","return",92],";",["T_WHITESPACE","\n        ",92],"}",["T_WHITESPACE","\n        ",93],["T_VARIABLE","$this",94],["T_OBJECT_OPERATOR","->",94],["T_STRING","_getWishlist",94],"(",")",";",["T_WHITESPACE","\n        ",94],["T_TRY","try",95],["T_WHITESPACE"," ",95],"{",["T_WHITESPACE","\n            ",95],["T_VARIABLE","$this",96],["T_OBJECT_OPERATOR","->",96],["T_STRING","loadLayout",96],"(",["T_STRING","false",96],")",";",["T_WHITESPACE","\n            ",96],["T_VARIABLE","$this",97],["T_OBJECT_OPERATOR","->",97],["T_STRING","renderLayout",97],"(",")",";",["T_WHITESPACE","\n        ",97],"}",["T_WHITESPACE"," ",98],["T_CATCH","catch",98],["T_WHITESPACE"," ",98],"(",["T_STRING","Mage_Core_Exception",98],["T_WHITESPACE"," ",98],["T_VARIABLE","$e",98],")",["T_WHITESPACE"," ",98],"{",["T_WHITESPACE","\n            ",98],["T_VARIABLE","$this",99],["T_OBJECT_OPERATOR","->",99],["T_STRING","_message",99],"(",["T_VARIABLE","$e",99],["T_OBJECT_OPERATOR","->",99],["T_STRING","getMessage",99],"(",")",",",["T_WHITESPACE"," ",99],["T_STRING","self",99],["T_DOUBLE_COLON","::",99],["T_STRING","MESSAGE_STATUS_ERROR",99],")",";",["T_WHITESPACE","\n        ",99],"}",["T_WHITESPACE"," ",100],["T_CATCH","catch",100],["T_WHITESPACE"," ",100],"(",["T_STRING","Exception",100],["T_WHITESPACE"," ",100],["T_VARIABLE","$e",100],")",["T_WHITESPACE"," ",100],"{",["T_WHITESPACE","\n            ",100],["T_STRING","Mage",101],["T_DOUBLE_COLON","::",101],["T_STRING","logException",101],"(",["T_VARIABLE","$e",101],")",";",["T_WHITESPACE","\n            ",101],["T_VARIABLE","$this",102],["T_OBJECT_OPERATOR","->",102],["T_STRING","_message",102],"(",["T_WHITESPACE","\n                ",102],["T_VARIABLE","$this",103],["T_OBJECT_OPERATOR","->",103],["T_STRING","__",103],"(",["T_CONSTANT_ENCAPSED_STRING","'An error occurred while loading wishlist.'",103],")",",",["T_WHITESPACE","\n                ",103],["T_STRING","self",104],["T_DOUBLE_COLON","::",104],["T_STRING","MESSAGE_STATUS_ERROR",104],["T_WHITESPACE","\n            ",104],")",";",["T_WHITESPACE","\n        ",105],"}",["T_WHITESPACE","\n    ",106],"}",["T_WHITESPACE","\n\n    ",107],["T_DOC_COMMENT","\/**\n     * Display customer wishlist details\n     *\n     * @return null\n     *\/",109],["T_WHITESPACE","\n    ",113],["T_PUBLIC","public",114],["T_WHITESPACE"," ",114],["T_FUNCTION","function",114],["T_WHITESPACE"," ",114],["T_STRING","detailsAction",114],"(",")",["T_WHITESPACE","\n    ",114],"{",["T_WHITESPACE","\n        ",115],["T_VARIABLE","$this",116],["T_OBJECT_OPERATOR","->",116],["T_STRING","_getWishlist",116],"(",")",";",["T_WHITESPACE","\n        ",116],["T_TRY","try",117],["T_WHITESPACE"," ",117],"{",["T_WHITESPACE","\n            ",117],["T_VARIABLE","$this",118],["T_OBJECT_OPERATOR","->",118],["T_STRING","loadLayout",118],"(",["T_STRING","false",118],")",";",["T_WHITESPACE","\n            ",118],["T_VARIABLE","$this",119],["T_OBJECT_OPERATOR","->",119],["T_STRING","renderLayout",119],"(",")",";",["T_WHITESPACE","\n        ",119],"}",["T_WHITESPACE"," ",120],["T_CATCH","catch",120],["T_WHITESPACE"," ",120],"(",["T_STRING","Mage_Core_Exception",120],["T_WHITESPACE"," ",120],["T_VARIABLE","$e",120],")",["T_WHITESPACE"," ",120],"{",["T_WHITESPACE","\n            ",120],["T_VARIABLE","$this",121],["T_OBJECT_OPERATOR","->",121],["T_STRING","_message",121],"(",["T_VARIABLE","$e",121],["T_OBJECT_OPERATOR","->",121],["T_STRING","getMessage",121],"(",")",",",["T_WHITESPACE"," ",121],["T_STRING","self",121],["T_DOUBLE_COLON","::",121],["T_STRING","MESSAGE_STATUS_ERROR",121],")",";",["T_WHITESPACE","\n        ",121],"}",["T_WHITESPACE"," ",122],["T_CATCH","catch",122],["T_WHITESPACE"," ",122],"(",["T_STRING","Exception",122],["T_WHITESPACE"," ",122],["T_VARIABLE","$e",122],")",["T_WHITESPACE"," ",122],"{",["T_WHITESPACE","\n            ",122],["T_STRING","Mage",123],["T_DOUBLE_COLON","::",123],["T_STRING","logException",123],"(",["T_VARIABLE","$e",123],")",";",["T_WHITESPACE","\n            ",123],["T_VARIABLE","$this",124],["T_OBJECT_OPERATOR","->",124],["T_STRING","_message",124],"(",["T_VARIABLE","$this",124],["T_OBJECT_OPERATOR","->",124],["T_STRING","__",124],"(",["T_CONSTANT_ENCAPSED_STRING","'An error occurred while loading wishlist.'",124],")",",",["T_WHITESPACE"," ",124],["T_STRING","self",124],["T_DOUBLE_COLON","::",124],["T_STRING","MESSAGE_STATUS_ERROR",124],")",";",["T_WHITESPACE","\n        ",124],"}",["T_WHITESPACE","\n    ",125],"}",["T_WHITESPACE","\n\n    ",126],["T_DOC_COMMENT","\/**\n     * Adding new item\n     *\n     * @return null\n     *\/",128],["T_WHITESPACE","\n    ",132],["T_PUBLIC","public",133],["T_WHITESPACE"," ",133],["T_FUNCTION","function",133],["T_WHITESPACE"," ",133],["T_STRING","addAction",133],"(",")",["T_WHITESPACE","\n    ",133],"{",["T_WHITESPACE","\n        ",134],["T_VARIABLE","$wishlist",135],["T_WHITESPACE"," ",135],"=",["T_WHITESPACE"," ",135],["T_VARIABLE","$this",135],["T_OBJECT_OPERATOR","->",135],["T_STRING","_getWishlist",135],"(",")",";",["T_WHITESPACE","\n        ",135],["T_IF","if",136],["T_WHITESPACE"," ",136],"(","!",["T_VARIABLE","$wishlist",136],")",["T_WHITESPACE"," ",136],"{",["T_WHITESPACE","\n            ",136],["T_RETURN","return",137],";",["T_WHITESPACE","\n        ",137],"}",["T_WHITESPACE","\n\n        ",138],["T_VARIABLE","$request",140],["T_WHITESPACE"," ",140],"=",["T_WHITESPACE"," ",140],["T_VARIABLE","$this",140],["T_OBJECT_OPERATOR","->",140],["T_STRING","getRequest",140],"(",")",";",["T_WHITESPACE","\n        ",140],["T_VARIABLE","$productId",141],["T_WHITESPACE"," ",141],"=",["T_WHITESPACE"," ",141],["T_INT_CAST","(int)",141],["T_VARIABLE","$request",141],["T_OBJECT_OPERATOR","->",141],["T_STRING","getParam",141],"(",["T_CONSTANT_ENCAPSED_STRING","'product'",141],")",";",["T_WHITESPACE","\n        ",141],["T_IF","if",142],["T_WHITESPACE"," ",142],"(","!",["T_VARIABLE","$productId",142],")",["T_WHITESPACE"," ",142],"{",["T_WHITESPACE","\n            ",142],["T_VARIABLE","$this",143],["T_OBJECT_OPERATOR","->",143],["T_STRING","_message",143],"(",["T_VARIABLE","$this",143],["T_OBJECT_OPERATOR","->",143],["T_STRING","__",143],"(",["T_CONSTANT_ENCAPSED_STRING","'Product was not specified.'",143],")",",",["T_WHITESPACE"," ",143],["T_STRING","self",143],["T_DOUBLE_COLON","::",143],["T_STRING","MESSAGE_STATUS_ERROR",143],")",";",["T_WHITESPACE","\n            ",143],["T_RETURN","return",144],";",["T_WHITESPACE","\n        ",144],"}",["T_WHITESPACE","\n\n        ",145],["T_VARIABLE","$product",147],["T_WHITESPACE"," ",147],"=",["T_WHITESPACE"," ",147],["T_STRING","Mage",147],["T_DOUBLE_COLON","::",147],["T_STRING","getModel",147],"(",["T_CONSTANT_ENCAPSED_STRING","'catalog\/product'",147],")",["T_OBJECT_OPERATOR","->",147],["T_STRING","load",147],"(",["T_VARIABLE","$productId",147],")",";",["T_WHITESPACE","\n        ",147],["T_IF","if",148],["T_WHITESPACE"," ",148],"(","!",["T_VARIABLE","$product",148],["T_OBJECT_OPERATOR","->",148],["T_STRING","getId",148],"(",")",["T_WHITESPACE"," ",148],["T_BOOLEAN_OR","||",148],["T_WHITESPACE"," ",148],"!",["T_VARIABLE","$product",148],["T_OBJECT_OPERATOR","->",148],["T_STRING","isVisibleInCatalog",148],"(",")",")",["T_WHITESPACE"," ",148],"{",["T_WHITESPACE","\n            ",148],["T_VARIABLE","$this",149],["T_OBJECT_OPERATOR","->",149],["T_STRING","_message",149],"(",["T_VARIABLE","$this",149],["T_OBJECT_OPERATOR","->",149],["T_STRING","__",149],"(",["T_CONSTANT_ENCAPSED_STRING","'Can\\'t specify product.'",149],")",",",["T_WHITESPACE"," ",149],["T_STRING","self",149],["T_DOUBLE_COLON","::",149],["T_STRING","MESSAGE_STATUS_ERROR",149],")",";",["T_WHITESPACE","\n            ",149],["T_RETURN","return",150],";",["T_WHITESPACE","\n        ",150],"}",["T_WHITESPACE","\n\n        ",151],["T_TRY","try",153],["T_WHITESPACE"," ",153],"{",["T_WHITESPACE","\n            ",153],["T_VARIABLE","$buyRequest",154],["T_WHITESPACE"," ",154],"=",["T_WHITESPACE"," ",154],["T_NEW","new",154],["T_WHITESPACE"," ",154],["T_STRING","Varien_Object",154],"(",["T_VARIABLE","$this",154],["T_OBJECT_OPERATOR","->",154],["T_STRING","getRequest",154],"(",")",["T_OBJECT_OPERATOR","->",154],["T_STRING","getParams",154],"(",")",")",";",["T_WHITESPACE","\n            ",154],["T_VARIABLE","$result",155],["T_WHITESPACE"," ",155],"=",["T_WHITESPACE"," ",155],["T_VARIABLE","$wishlist",155],["T_OBJECT_OPERATOR","->",155],["T_STRING","addNewItem",155],"(",["T_VARIABLE","$product",155],",",["T_WHITESPACE"," ",155],["T_VARIABLE","$buyRequest",155],")",";",["T_WHITESPACE","\n            ",155],["T_IF","if",156],["T_WHITESPACE"," ",156],"(",["T_STRING","strlen",156],"(",["T_STRING","trim",156],"(",["T_STRING_CAST","(string)",156],["T_VARIABLE","$request",156],["T_OBJECT_OPERATOR","->",156],["T_STRING","getParam",156],"(",["T_CONSTANT_ENCAPSED_STRING","'description'",156],")",")",")",")",["T_WHITESPACE"," ",156],"{",["T_WHITESPACE","\n                ",156],["T_VARIABLE","$result",157],["T_OBJECT_OPERATOR","->",157],["T_STRING","setDescription",157],"(",["T_VARIABLE","$request",157],["T_OBJECT_OPERATOR","->",157],["T_STRING","getParam",157],"(",["T_CONSTANT_ENCAPSED_STRING","'description'",157],")",")",["T_OBJECT_OPERATOR","->",157],["T_STRING","save",157],"(",")",";",["T_WHITESPACE","\n            ",157],"}",["T_WHITESPACE","\n            ",158],["T_VARIABLE","$wishlist",159],["T_OBJECT_OPERATOR","->",159],["T_STRING","save",159],"(",")",";",["T_WHITESPACE","\n\n            ",159],["T_STRING","Mage",161],["T_DOUBLE_COLON","::",161],["T_STRING","dispatchEvent",161],"(",["T_CONSTANT_ENCAPSED_STRING","'wishlist_add_product'",161],",",["T_WHITESPACE"," ",161],["T_ARRAY","array",161],"(",["T_WHITESPACE","\n                ",161],["T_CONSTANT_ENCAPSED_STRING","'wishlist'",162],["T_WHITESPACE","  ",162],["T_DOUBLE_ARROW","=>",162],["T_WHITESPACE"," ",162],["T_VARIABLE","$wishlist",162],",",["T_WHITESPACE","\n                ",162],["T_CONSTANT_ENCAPSED_STRING","'product'",163],["T_WHITESPACE","   ",163],["T_DOUBLE_ARROW","=>",163],["T_WHITESPACE"," ",163],["T_VARIABLE","$product",163],",",["T_WHITESPACE","\n                ",163],["T_CONSTANT_ENCAPSED_STRING","'item'",164],["T_WHITESPACE","      ",164],["T_DOUBLE_ARROW","=>",164],["T_WHITESPACE"," ",164],["T_VARIABLE","$result",164],["T_WHITESPACE","\n            ",164],")",")",";",["T_WHITESPACE","\n\n            ",165],["T_STRING","Mage",167],["T_DOUBLE_COLON","::",167],["T_STRING","helper",167],"(",["T_CONSTANT_ENCAPSED_STRING","'wishlist'",167],")",["T_OBJECT_OPERATOR","->",167],["T_STRING","calculate",167],"(",")",";",["T_WHITESPACE","\n\n            ",167],["T_VARIABLE","$this",169],["T_OBJECT_OPERATOR","->",169],["T_STRING","_message",169],"(",["T_WHITESPACE","\n                ",169],["T_VARIABLE","$this",170],["T_OBJECT_OPERATOR","->",170],["T_STRING","__",170],"(",["T_CONSTANT_ENCAPSED_STRING","'%1$s has been added to your wishlist.'",170],",",["T_WHITESPACE"," ",170],["T_VARIABLE","$product",170],["T_OBJECT_OPERATOR","->",170],["T_STRING","getName",170],"(",")",")",",",["T_WHITESPACE","\n                ",170],["T_STRING","self",171],["T_DOUBLE_COLON","::",171],["T_STRING","MESSAGE_STATUS_SUCCESS",171],["T_WHITESPACE","\n            ",171],")",";",["T_WHITESPACE","\n        ",172],"}",["T_WHITESPACE"," ",173],["T_CATCH","catch",173],["T_WHITESPACE"," ",173],"(",["T_STRING","Mage_Core_Exception",173],["T_WHITESPACE"," ",173],["T_VARIABLE","$e",173],")",["T_WHITESPACE"," ",173],"{",["T_WHITESPACE","\n            ",173],["T_VARIABLE","$this",174],["T_OBJECT_OPERATOR","->",174],["T_STRING","_message",174],"(",["T_VARIABLE","$e",174],["T_OBJECT_OPERATOR","->",174],["T_STRING","getMessage",174],"(",")",",",["T_WHITESPACE"," ",174],["T_STRING","self",174],["T_DOUBLE_COLON","::",174],["T_STRING","MESSAGE_STATUS_ERROR",174],")",";",["T_WHITESPACE","\n        ",174],"}",["T_WHITESPACE"," ",175],["T_CATCH","catch",175],["T_WHITESPACE"," ",175],"(",["T_STRING","Exception",175],["T_WHITESPACE"," ",175],["T_VARIABLE","$e",175],")",["T_WHITESPACE"," ",175],"{",["T_WHITESPACE","\n            ",175],["T_STRING","Mage",176],["T_DOUBLE_COLON","::",176],["T_STRING","logException",176],"(",["T_VARIABLE","$e",176],")",";",["T_WHITESPACE","\n            ",176],["T_VARIABLE","$this",177],["T_OBJECT_OPERATOR","->",177],["T_STRING","_message",177],"(",["T_WHITESPACE","\n                ",177],["T_VARIABLE","$this",178],["T_OBJECT_OPERATOR","->",178],["T_STRING","__",178],"(",["T_CONSTANT_ENCAPSED_STRING","'An error occurred while adding item to wishlist.'",178],")",",",["T_WHITESPACE"," ",178],["T_STRING","self",178],["T_DOUBLE_COLON","::",178],["T_STRING","MESSAGE_STATUS_ERROR",178],["T_WHITESPACE","\n            ",178],")",";",["T_WHITESPACE","\n        ",179],"}",["T_WHITESPACE","\n    ",180],"}",["T_WHITESPACE","\n\n    ",181],["T_DOC_COMMENT","\/**\n     * Remove item\n     *\n     * @return null\n     *\/",183],["T_WHITESPACE","\n    ",187],["T_PUBLIC","public",188],["T_WHITESPACE"," ",188],["T_FUNCTION","function",188],["T_WHITESPACE"," ",188],["T_STRING","removeAction",188],"(",")",["T_WHITESPACE","\n    ",188],"{",["T_WHITESPACE","\n        ",189],["T_VARIABLE","$wishlist",190],["T_WHITESPACE"," ",190],"=",["T_WHITESPACE"," ",190],["T_VARIABLE","$this",190],["T_OBJECT_OPERATOR","->",190],["T_STRING","_getWishlist",190],"(",")",";",["T_WHITESPACE","\n        ",190],["T_VARIABLE","$id",191],["T_WHITESPACE"," ",191],"=",["T_WHITESPACE"," ",191],["T_INT_CAST","(int)",191],["T_WHITESPACE"," ",191],["T_VARIABLE","$this",191],["T_OBJECT_OPERATOR","->",191],["T_STRING","getRequest",191],"(",")",["T_OBJECT_OPERATOR","->",191],["T_STRING","getParam",191],"(",["T_CONSTANT_ENCAPSED_STRING","'item'",191],")",";",["T_WHITESPACE","\n        ",191],["T_VARIABLE","$item",192],["T_WHITESPACE"," ",192],"=",["T_WHITESPACE"," ",192],["T_STRING","Mage",192],["T_DOUBLE_COLON","::",192],["T_STRING","getModel",192],"(",["T_CONSTANT_ENCAPSED_STRING","'wishlist\/item'",192],")",["T_OBJECT_OPERATOR","->",192],["T_STRING","load",192],"(",["T_VARIABLE","$id",192],")",";",["T_WHITESPACE","\n\n        ",192],["T_IF","if",194],["T_WHITESPACE"," ",194],"(",["T_VARIABLE","$item",194],["T_OBJECT_OPERATOR","->",194],["T_STRING","getWishlistId",194],"(",")",["T_WHITESPACE"," ",194],["T_IS_EQUAL","==",194],["T_WHITESPACE"," ",194],["T_VARIABLE","$wishlist",194],["T_OBJECT_OPERATOR","->",194],["T_STRING","getId",194],"(",")",")",["T_WHITESPACE"," ",194],"{",["T_WHITESPACE","\n            ",194],["T_TRY","try",195],["T_WHITESPACE"," ",195],"{",["T_WHITESPACE","\n                ",195],["T_VARIABLE","$item",196],["T_OBJECT_OPERATOR","->",196],["T_STRING","delete",196],"(",")",";",["T_WHITESPACE","\n                ",196],["T_VARIABLE","$wishlist",197],["T_OBJECT_OPERATOR","->",197],["T_STRING","save",197],"(",")",";",["T_WHITESPACE","\n                ",197],["T_VARIABLE","$this",198],["T_OBJECT_OPERATOR","->",198],["T_STRING","_message",198],"(",["T_VARIABLE","$this",198],["T_OBJECT_OPERATOR","->",198],["T_STRING","__",198],"(",["T_CONSTANT_ENCAPSED_STRING","'Item has been removed from wishlist.'",198],")",",",["T_WHITESPACE"," ",198],["T_STRING","self",198],["T_DOUBLE_COLON","::",198],["T_STRING","MESSAGE_STATUS_SUCCESS",198],")",";",["T_WHITESPACE","\n            ",198],"}",["T_WHITESPACE"," ",199],["T_CATCH","catch",199],["T_WHITESPACE"," ",199],"(",["T_STRING","Mage_Core_Exception",199],["T_WHITESPACE"," ",199],["T_VARIABLE","$e",199],")",["T_WHITESPACE"," ",199],"{",["T_WHITESPACE","\n                ",199],["T_VARIABLE","$this",200],["T_OBJECT_OPERATOR","->",200],["T_STRING","_message",200],"(",["T_VARIABLE","$e",200],["T_OBJECT_OPERATOR","->",200],["T_STRING","getMessage",200],"(",")",",",["T_WHITESPACE"," ",200],["T_STRING","self",200],["T_DOUBLE_COLON","::",200],["T_STRING","MESSAGE_STATUS_ERROR",200],")",";",["T_WHITESPACE","\n            ",200],"}",["T_WHITESPACE"," ",201],["T_CATCH","catch",201],"(",["T_STRING","Exception",201],["T_WHITESPACE"," ",201],["T_VARIABLE","$e",201],")",["T_WHITESPACE"," ",201],"{",["T_WHITESPACE","\n                ",201],["T_VARIABLE","$this",202],["T_OBJECT_OPERATOR","->",202],["T_STRING","_message",202],"(",["T_VARIABLE","$this",202],["T_OBJECT_OPERATOR","->",202],["T_STRING","__",202],"(",["T_CONSTANT_ENCAPSED_STRING","'An error occurred while removing item from wishlist.'",202],")",",",["T_WHITESPACE"," ",202],["T_STRING","self",202],["T_DOUBLE_COLON","::",202],["T_STRING","MESSAGE_STATUS_ERROR",202],")",";",["T_WHITESPACE","\n            ",202],"}",["T_WHITESPACE","\n        ",203],"}",["T_WHITESPACE"," ",204],["T_ELSE","else",204],["T_WHITESPACE"," ",204],"{",["T_WHITESPACE","\n            ",204],["T_VARIABLE","$this",205],["T_OBJECT_OPERATOR","->",205],["T_STRING","_message",205],"(",["T_VARIABLE","$this",205],["T_OBJECT_OPERATOR","->",205],["T_STRING","__",205],"(",["T_CONSTANT_ENCAPSED_STRING","'Specified item does not exist in wishlist.'",205],")",",",["T_WHITESPACE"," ",205],["T_STRING","self",205],["T_DOUBLE_COLON","::",205],["T_STRING","MESSAGE_STATUS_ERROR",205],")",";",["T_WHITESPACE","\n        ",205],"}",["T_WHITESPACE","\n\n        ",206],["T_STRING","Mage",208],["T_DOUBLE_COLON","::",208],["T_STRING","helper",208],"(",["T_CONSTANT_ENCAPSED_STRING","'wishlist'",208],")",["T_OBJECT_OPERATOR","->",208],["T_STRING","calculate",208],"(",")",";",["T_WHITESPACE","\n    ",208],"}",["T_WHITESPACE","\n\n    ",209],["T_DOC_COMMENT","\/**\n     * Clear wishlist action\n     *\n     * @return null\n     *\/",211],["T_WHITESPACE","\n    ",215],["T_PUBLIC","public",216],["T_WHITESPACE"," ",216],["T_FUNCTION","function",216],["T_WHITESPACE"," ",216],["T_STRING","clearAction",216],"(",")",["T_WHITESPACE","\n    ",216],"{",["T_WHITESPACE","\n        ",217],["T_VARIABLE","$wishlist",218],["T_WHITESPACE"," ",218],"=",["T_WHITESPACE"," ",218],["T_VARIABLE","$this",218],["T_OBJECT_OPERATOR","->",218],["T_STRING","_getWishlist",218],"(",")",";",["T_WHITESPACE","\n        ",218],["T_VARIABLE","$items",219],["T_WHITESPACE"," ",219],"=",["T_WHITESPACE"," ",219],["T_VARIABLE","$wishlist",219],["T_OBJECT_OPERATOR","->",219],["T_STRING","getItemCollection",219],"(",")",";",["T_WHITESPACE","\n\n        ",219],["T_TRY","try",221],["T_WHITESPACE"," ",221],"{",["T_WHITESPACE","\n            ",221],["T_FOREACH","foreach",222],["T_WHITESPACE"," ",222],"(",["T_VARIABLE","$items",222],["T_WHITESPACE"," ",222],["T_AS","as",222],["T_WHITESPACE"," ",222],["T_VARIABLE","$item",222],")",["T_WHITESPACE"," ",222],"{",["T_WHITESPACE","\n                ",222],["T_VARIABLE","$item",223],["T_OBJECT_OPERATOR","->",223],["T_STRING","delete",223],"(",")",";",["T_WHITESPACE","\n            ",223],"}",["T_WHITESPACE","\n            ",224],["T_VARIABLE","$wishlist",225],["T_OBJECT_OPERATOR","->",225],["T_STRING","save",225],"(",")",";",["T_WHITESPACE","\n            ",225],["T_VARIABLE","$this",226],["T_OBJECT_OPERATOR","->",226],["T_STRING","_message",226],"(",["T_VARIABLE","$this",226],["T_OBJECT_OPERATOR","->",226],["T_STRING","__",226],"(",["T_CONSTANT_ENCAPSED_STRING","'Wishlist has been cleared.'",226],")",",",["T_WHITESPACE"," ",226],["T_STRING","self",226],["T_DOUBLE_COLON","::",226],["T_STRING","MESSAGE_STATUS_SUCCESS",226],")",";",["T_WHITESPACE","\n        ",226],"}",["T_WHITESPACE"," ",227],["T_CATCH","catch",227],["T_WHITESPACE"," ",227],"(",["T_STRING","Mage_Core_Exception",227],["T_WHITESPACE"," ",227],["T_VARIABLE","$e",227],")",["T_WHITESPACE"," ",227],"{",["T_WHITESPACE","\n            ",227],["T_VARIABLE","$this",228],["T_OBJECT_OPERATOR","->",228],["T_STRING","_message",228],"(",["T_VARIABLE","$e",228],["T_OBJECT_OPERATOR","->",228],["T_STRING","getMessage",228],"(",")",",",["T_WHITESPACE"," ",228],["T_STRING","self",228],["T_DOUBLE_COLON","::",228],["T_STRING","MESSAGE_STATUS_ERROR",228],")",";",["T_WHITESPACE","\n        ",228],"}",["T_WHITESPACE"," ",229],["T_CATCH","catch",229],"(",["T_STRING","Exception",229],["T_WHITESPACE"," ",229],["T_VARIABLE","$e",229],")",["T_WHITESPACE"," ",229],"{",["T_WHITESPACE","\n            ",229],["T_VARIABLE","$this",230],["T_OBJECT_OPERATOR","->",230],["T_STRING","_message",230],"(",["T_WHITESPACE","\n                ",230],["T_VARIABLE","$this",231],["T_OBJECT_OPERATOR","->",231],["T_STRING","__",231],"(",["T_CONSTANT_ENCAPSED_STRING","'An error occurred while removing items from wishlist.'",231],")",",",["T_WHITESPACE"," ",231],["T_STRING","self",231],["T_DOUBLE_COLON","::",231],["T_STRING","MESSAGE_STATUS_ERROR",231],["T_WHITESPACE","\n            ",231],")",";",["T_WHITESPACE","\n        ",232],"}",["T_WHITESPACE","\n\n        ",233],["T_STRING","Mage",235],["T_DOUBLE_COLON","::",235],["T_STRING","helper",235],"(",["T_CONSTANT_ENCAPSED_STRING","'wishlist'",235],")",["T_OBJECT_OPERATOR","->",235],["T_STRING","calculate",235],"(",")",";",["T_WHITESPACE","\n    ",235],"}",["T_WHITESPACE","\n\n    ",236],["T_DOC_COMMENT","\/**\n     * Update wishlist item comments\n     *\n     * @return null\n     *\/",238],["T_WHITESPACE","\n    ",242],["T_PUBLIC","public",243],["T_WHITESPACE"," ",243],["T_FUNCTION","function",243],["T_WHITESPACE"," ",243],["T_STRING","updateAction",243],"(",")",["T_WHITESPACE","\n    ",243],"{",["T_WHITESPACE","\n        ",244],["T_VARIABLE","$post",245],["T_WHITESPACE"," ",245],"=",["T_WHITESPACE"," ",245],["T_VARIABLE","$this",245],["T_OBJECT_OPERATOR","->",245],["T_STRING","getRequest",245],"(",")",["T_OBJECT_OPERATOR","->",245],["T_STRING","getPost",245],"(",")",";",["T_WHITESPACE","\n        ",245],["T_IF","if",246],["T_WHITESPACE"," ",246],"(",["T_VARIABLE","$post",246],["T_WHITESPACE"," ",246],["T_BOOLEAN_AND","&&",246],["T_WHITESPACE"," ",246],["T_ISSET","isset",246],"(",["T_VARIABLE","$post",246],"[",["T_CONSTANT_ENCAPSED_STRING","'description'",246],"]",")",["T_WHITESPACE"," ",246],["T_BOOLEAN_AND","&&",246],["T_WHITESPACE"," ",246],["T_STRING","is_array",246],"(",["T_VARIABLE","$post",246],"[",["T_CONSTANT_ENCAPSED_STRING","'description'",246],"]",")",")",["T_WHITESPACE"," ",246],"{",["T_WHITESPACE","\n            ",246],["T_VARIABLE","$wishlist",247],["T_WHITESPACE"," ",247],"=",["T_WHITESPACE"," ",247],["T_VARIABLE","$this",247],["T_OBJECT_OPERATOR","->",247],["T_STRING","_getWishlist",247],"(",")",";",["T_WHITESPACE","\n            ",247],["T_IF","if",248],["T_WHITESPACE"," ",248],"(","!",["T_VARIABLE","$wishlist",248],")",["T_WHITESPACE"," ",248],"{",["T_WHITESPACE","\n                ",248],["T_RETURN","return",249],";",["T_WHITESPACE","\n            ",249],"}",["T_WHITESPACE","\n            ",250],["T_VARIABLE","$updatedItems",251],["T_WHITESPACE"," ",251],"=",["T_WHITESPACE"," ",251],["T_LNUMBER","0",251],";",["T_WHITESPACE","\n            ",251],["T_VARIABLE","$problemsFlag",252],["T_WHITESPACE"," ",252],"=",["T_WHITESPACE"," ",252],["T_STRING","false",252],";",["T_WHITESPACE","\n\n            ",252],["T_FOREACH","foreach",254],["T_WHITESPACE"," ",254],"(",["T_VARIABLE","$post",254],"[",["T_CONSTANT_ENCAPSED_STRING","'description'",254],"]",["T_WHITESPACE"," ",254],["T_AS","as",254],["T_WHITESPACE"," ",254],["T_VARIABLE","$itemId",254],["T_WHITESPACE"," ",254],["T_DOUBLE_ARROW","=>",254],["T_WHITESPACE"," ",254],["T_VARIABLE","$description",254],")",["T_WHITESPACE"," ",254],"{",["T_WHITESPACE","\n                ",254],["T_DOC_COMMENT","\/** @var $item Mage_Wishlist_Model_Item *\/",255],["T_WHITESPACE","\n                ",255],["T_VARIABLE","$item",256],["T_WHITESPACE"," ",256],"=",["T_WHITESPACE"," ",256],["T_STRING","Mage",256],["T_DOUBLE_COLON","::",256],["T_STRING","getModel",256],"(",["T_CONSTANT_ENCAPSED_STRING","'wishlist\/item'",256],")",["T_OBJECT_OPERATOR","->",256],["T_STRING","load",256],"(",["T_VARIABLE","$itemId",256],")",";",["T_WHITESPACE","\n                ",256],["T_VARIABLE","$description",257],["T_WHITESPACE"," ",257],"=",["T_WHITESPACE"," ",257],["T_STRING_CAST","(string)",257],["T_WHITESPACE"," ",257],["T_VARIABLE","$description",257],";",["T_WHITESPACE","\n                ",257],["T_IF","if",258],["T_WHITESPACE"," ",258],"(",["T_VARIABLE","$item",258],["T_OBJECT_OPERATOR","->",258],["T_STRING","getWishlistId",258],"(",")",["T_WHITESPACE"," ",258],["T_IS_NOT_EQUAL","!=",258],["T_WHITESPACE"," ",258],["T_VARIABLE","$wishlist",258],["T_OBJECT_OPERATOR","->",258],["T_STRING","getId",258],"(",")",")",["T_WHITESPACE"," ",258],"{",["T_WHITESPACE","\n                    ",258],["T_CONTINUE","continue",259],";",["T_WHITESPACE","\n                ",259],"}",["T_WHITESPACE","\n                ",260],["T_TRY","try",261],["T_WHITESPACE"," ",261],"{",["T_WHITESPACE","\n                    ",261],["T_VARIABLE","$item",262],["T_OBJECT_OPERATOR","->",262],["T_STRING","setDescription",262],"(",["T_VARIABLE","$description",262],")",["T_OBJECT_OPERATOR","->",262],["T_STRING","save",262],"(",")",";",["T_WHITESPACE","\n                    ",262],["T_VARIABLE","$updatedItems",263],["T_INC","++",263],";",["T_WHITESPACE","\n                ",263],"}",["T_WHITESPACE"," ",264],["T_CATCH","catch",264],["T_WHITESPACE"," ",264],"(",["T_STRING","Exception",264],["T_WHITESPACE"," ",264],["T_VARIABLE","$e",264],")",["T_WHITESPACE"," ",264],"{",["T_WHITESPACE","\n                    ",264],["T_VARIABLE","$problemsFlag",265],["T_WHITESPACE"," ",265],"=",["T_WHITESPACE"," ",265],["T_STRING","true",265],";",["T_WHITESPACE","\n                ",265],"}",["T_WHITESPACE","\n            ",266],"}",["T_WHITESPACE","\n\n            ",267],["T_COMMENT","\/\/ save wishlist model for setting date of last update\n",269],["T_WHITESPACE","            ",270],["T_IF","if",270],["T_WHITESPACE"," ",270],"(",["T_VARIABLE","$updatedItems",270],")",["T_WHITESPACE"," ",270],"{",["T_WHITESPACE","\n                ",270],["T_TRY","try",271],["T_WHITESPACE"," ",271],"{",["T_WHITESPACE","\n                    ",271],["T_VARIABLE","$wishlist",272],["T_OBJECT_OPERATOR","->",272],["T_STRING","save",272],"(",")",";",["T_WHITESPACE","\n                    ",272],["T_IF","if",273],["T_WHITESPACE"," ",273],"(",["T_VARIABLE","$problemsFlag",273],")",["T_WHITESPACE"," ",273],"{",["T_WHITESPACE","\n                        ",273],["T_VARIABLE","$message",274],["T_WHITESPACE"," ",274],"=",["T_WHITESPACE"," ",274],["T_VARIABLE","$this",274],["T_OBJECT_OPERATOR","->",274],["T_STRING","__",274],"(",["T_CONSTANT_ENCAPSED_STRING","'Wishlist has been updated. But there are accrued some errors while updating some items.'",274],")",";",["T_WHITESPACE","\n                    ",274],"}",["T_WHITESPACE"," ",275],["T_ELSE","else",275],["T_WHITESPACE"," ",275],"{",["T_WHITESPACE","\n                        ",275],["T_VARIABLE","$message",276],["T_WHITESPACE"," ",276],"=",["T_WHITESPACE"," ",276],["T_VARIABLE","$this",276],["T_OBJECT_OPERATOR","->",276],["T_STRING","__",276],"(",["T_CONSTANT_ENCAPSED_STRING","'Wishlist has been updated.'",276],")",";",["T_WHITESPACE","\n                    ",276],"}",["T_WHITESPACE","\n                    ",277],["T_VARIABLE","$this",278],["T_OBJECT_OPERATOR","->",278],["T_STRING","_message",278],"(",["T_VARIABLE","$message",278],",",["T_WHITESPACE"," ",278],["T_STRING","self",278],["T_DOUBLE_COLON","::",278],["T_STRING","MESSAGE_STATUS_SUCCESS",278],")",";",["T_WHITESPACE","\n                ",278],"}",["T_WHITESPACE","\n                ",279],["T_CATCH","catch",280],["T_WHITESPACE"," ",280],"(",["T_STRING","Exception",280],["T_WHITESPACE"," ",280],["T_VARIABLE","$e",280],")",["T_WHITESPACE"," ",280],"{",["T_WHITESPACE","\n                    ",280],["T_VARIABLE","$this",281],["T_OBJECT_OPERATOR","->",281],["T_STRING","_message",281],"(",["T_WHITESPACE","\n                        ",281],["T_VARIABLE","$this",282],["T_OBJECT_OPERATOR","->",282],["T_STRING","__",282],"(",["T_CONSTANT_ENCAPSED_STRING","'Items were updated. But can\\'t update wishlist.'",282],")",",",["T_WHITESPACE","\n                        ",282],["T_STRING","self",283],["T_DOUBLE_COLON","::",283],["T_STRING","MESSAGE_STATUS_SUCCESS",283],["T_WHITESPACE","\n                    ",283],")",";",["T_WHITESPACE","\n                ",284],"}",["T_WHITESPACE","\n            ",285],"}",["T_WHITESPACE"," ",286],["T_ELSE","else",286],["T_WHITESPACE"," ",286],"{",["T_WHITESPACE","\n                ",286],["T_VARIABLE","$this",287],["T_OBJECT_OPERATOR","->",287],["T_STRING","_message",287],"(",["T_VARIABLE","$this",287],["T_OBJECT_OPERATOR","->",287],["T_STRING","__",287],"(",["T_CONSTANT_ENCAPSED_STRING","'No items were updated.'",287],")",",",["T_WHITESPACE"," ",287],["T_STRING","self",287],["T_DOUBLE_COLON","::",287],["T_STRING","MESSAGE_STATUS_ERROR",287],")",";",["T_WHITESPACE","\n            ",287],"}",["T_WHITESPACE","\n        ",288],"}",["T_WHITESPACE"," ",289],["T_ELSE","else",289],["T_WHITESPACE"," ",289],"{",["T_WHITESPACE","\n            ",289],["T_VARIABLE","$this",290],["T_OBJECT_OPERATOR","->",290],["T_STRING","_message",290],"(",["T_VARIABLE","$this",290],["T_OBJECT_OPERATOR","->",290],["T_STRING","__",290],"(",["T_CONSTANT_ENCAPSED_STRING","'No items were specifed to update.'",290],")",",",["T_WHITESPACE"," ",290],["T_STRING","self",290],["T_DOUBLE_COLON","::",290],["T_STRING","MESSAGE_STATUS_ERROR",290],")",";",["T_WHITESPACE","\n        ",290],"}",["T_WHITESPACE","\n    ",291],"}",["T_WHITESPACE","\n\n    ",292],["T_DOC_COMMENT","\/**\n     * Add wishlist item to shopping cart and remove from wishlist\n     *\n     * If Product has required options - item removed from wishlist and redirect\n     * to product view page with message about needed defined required options\n     *\n     * @return null\n     *\/",294],["T_WHITESPACE","\n    ",301],["T_PUBLIC","public",302],["T_WHITESPACE"," ",302],["T_FUNCTION","function",302],["T_WHITESPACE"," ",302],["T_STRING","cartAction",302],"(",")",["T_WHITESPACE","\n    ",302],"{",["T_WHITESPACE","\n        ",303],["T_VARIABLE","$wishlist",304],["T_WHITESPACE","   ",304],"=",["T_WHITESPACE"," ",304],["T_VARIABLE","$this",304],["T_OBJECT_OPERATOR","->",304],["T_STRING","_getWishlist",304],"(",")",";",["T_WHITESPACE","\n        ",304],["T_IF","if",305],["T_WHITESPACE"," ",305],"(","!",["T_VARIABLE","$wishlist",305],")",["T_WHITESPACE"," ",305],"{",["T_WHITESPACE","\n            ",305],["T_RETURN","return",306],";",["T_WHITESPACE","\n        ",306],"}",["T_WHITESPACE","\n        ",307],["T_VARIABLE","$itemId",308],["T_WHITESPACE","     ",308],"=",["T_WHITESPACE"," ",308],["T_INT_CAST","(int)",308],["T_VARIABLE","$this",308],["T_OBJECT_OPERATOR","->",308],["T_STRING","getRequest",308],"(",")",["T_OBJECT_OPERATOR","->",308],["T_STRING","getParam",308],"(",["T_CONSTANT_ENCAPSED_STRING","'item'",308],")",";",["T_WHITESPACE","\n\n        ",308],["T_COMMENT","\/* @var $item Mage_Wishlist_Model_Item *\/",310],["T_WHITESPACE","\n        ",310],["T_VARIABLE","$item",311],["T_WHITESPACE","       ",311],"=",["T_WHITESPACE"," ",311],["T_STRING","Mage",311],["T_DOUBLE_COLON","::",311],["T_STRING","getModel",311],"(",["T_CONSTANT_ENCAPSED_STRING","'wishlist\/item'",311],")",["T_OBJECT_OPERATOR","->",311],["T_STRING","load",311],"(",["T_VARIABLE","$itemId",311],")",";",["T_WHITESPACE","\n\n        ",311],["T_IF","if",313],["T_WHITESPACE"," ",313],"(","!",["T_VARIABLE","$item",313],["T_OBJECT_OPERATOR","->",313],["T_STRING","getId",313],"(",")",["T_WHITESPACE"," ",313],["T_BOOLEAN_OR","||",313],["T_WHITESPACE"," ",313],["T_VARIABLE","$item",313],["T_OBJECT_OPERATOR","->",313],["T_STRING","getWishlistId",313],"(",")",["T_WHITESPACE"," ",313],["T_IS_NOT_EQUAL","!=",313],["T_WHITESPACE"," ",313],["T_VARIABLE","$wishlist",313],["T_OBJECT_OPERATOR","->",313],["T_STRING","getId",313],"(",")",")",["T_WHITESPACE"," ",313],"{",["T_WHITESPACE","\n            ",313],["T_VARIABLE","$this",314],["T_OBJECT_OPERATOR","->",314],["T_STRING","_message",314],"(",["T_VARIABLE","$this",314],["T_OBJECT_OPERATOR","->",314],["T_STRING","__",314],"(",["T_CONSTANT_ENCAPSED_STRING","'Invalid item or wishlist.'",314],")",",",["T_WHITESPACE"," ",314],["T_STRING","self",314],["T_DOUBLE_COLON","::",314],["T_STRING","MESSAGE_STATUS_ERROR",314],")",";",["T_WHITESPACE","\n            ",314],["T_RETURN","return",315],";",["T_WHITESPACE","\n        ",315],"}",["T_WHITESPACE","\n\n        ",316],["T_TRY","try",318],["T_WHITESPACE"," ",318],"{",["T_WHITESPACE","\n            ",318],["T_VARIABLE","$cart",319],["T_WHITESPACE"," ",319],"=",["T_WHITESPACE"," ",319],["T_STRING","Mage",319],["T_DOUBLE_COLON","::",319],["T_STRING","getSingleton",319],"(",["T_CONSTANT_ENCAPSED_STRING","'checkout\/cart'",319],")",";",["T_WHITESPACE","\n            ",319],["T_VARIABLE","$item",320],["T_OBJECT_OPERATOR","->",320],["T_STRING","addToCart",320],"(",["T_VARIABLE","$cart",320],",",["T_WHITESPACE"," ",320],["T_STRING","true",320],")",";",["T_WHITESPACE","\n            ",320],["T_VARIABLE","$cart",321],["T_OBJECT_OPERATOR","->",321],["T_STRING","save",321],"(",")",["T_OBJECT_OPERATOR","->",321],["T_STRING","getQuote",321],"(",")",["T_OBJECT_OPERATOR","->",321],["T_STRING","collectTotals",321],"(",")",";",["T_WHITESPACE","\n            ",321],["T_VARIABLE","$wishlist",322],["T_OBJECT_OPERATOR","->",322],["T_STRING","save",322],"(",")",";",["T_WHITESPACE","\n            ",322],["T_STRING","Mage",323],["T_DOUBLE_COLON","::",323],["T_STRING","helper",323],"(",["T_CONSTANT_ENCAPSED_STRING","'wishlist'",323],")",["T_OBJECT_OPERATOR","->",323],["T_STRING","calculate",323],"(",")",";",["T_WHITESPACE","\n            ",323],["T_VARIABLE","$this",324],["T_OBJECT_OPERATOR","->",324],["T_STRING","_message",324],"(",["T_VARIABLE","$this",324],["T_OBJECT_OPERATOR","->",324],["T_STRING","__",324],"(",["T_CONSTANT_ENCAPSED_STRING","'Item has been added to cart.'",324],")",",",["T_WHITESPACE"," ",324],["T_STRING","self",324],["T_DOUBLE_COLON","::",324],["T_STRING","MESSAGE_STATUS_SUCCESS",324],")",";",["T_WHITESPACE","\n\n        ",324],"}",["T_WHITESPACE"," ",326],["T_CATCH","catch",326],["T_WHITESPACE"," ",326],"(",["T_STRING","Mage_Core_Exception",326],["T_WHITESPACE"," ",326],["T_VARIABLE","$e",326],")",["T_WHITESPACE"," ",326],"{",["T_WHITESPACE","\n            ",326],["T_IF","if",327],["T_WHITESPACE"," ",327],"(",["T_VARIABLE","$e",327],["T_OBJECT_OPERATOR","->",327],["T_STRING","getCode",327],"(",")",["T_WHITESPACE"," ",327],["T_IS_EQUAL","==",327],["T_WHITESPACE"," ",327],["T_STRING","Mage_Wishlist_Model_Item",327],["T_DOUBLE_COLON","::",327],["T_STRING","EXCEPTION_CODE_NOT_SALABLE",327],")",["T_WHITESPACE"," ",327],"{",["T_WHITESPACE","\n                ",327],["T_VARIABLE","$this",328],["T_OBJECT_OPERATOR","->",328],["T_STRING","_message",328],"(",["T_VARIABLE","$this",328],["T_OBJECT_OPERATOR","->",328],["T_STRING","__",328],"(",["T_CONSTANT_ENCAPSED_STRING","'Product(s) currently out of stock.'",328],")",",",["T_WHITESPACE"," ",328],["T_STRING","self",328],["T_DOUBLE_COLON","::",328],["T_STRING","MESSAGE_STATUS_ERROR",328],")",";",["T_WHITESPACE","\n            ",328],"}",["T_WHITESPACE"," ",329],["T_ELSE","else",329],["T_WHITESPACE"," ",329],["T_IF","if",329],["T_WHITESPACE"," ",329],"(",["T_VARIABLE","$e",329],["T_OBJECT_OPERATOR","->",329],["T_STRING","getCode",329],"(",")",["T_WHITESPACE"," ",329],["T_IS_EQUAL","==",329],["T_WHITESPACE"," ",329],["T_STRING","Mage_Wishlist_Model_Item",329],["T_DOUBLE_COLON","::",329],["T_STRING","EXCEPTION_CODE_HAS_REQUIRED_OPTIONS",329],["T_WHITESPACE","\n                ",329],["T_BOOLEAN_OR","||",330],["T_WHITESPACE"," ",330],["T_VARIABLE","$e",330],["T_OBJECT_OPERATOR","->",330],["T_STRING","getCode",330],"(",")",["T_WHITESPACE"," ",330],["T_IS_EQUAL","==",330],["T_WHITESPACE"," ",330],["T_STRING","Mage_Wishlist_Model_Item",330],["T_DOUBLE_COLON","::",330],["T_STRING","EXCEPTION_CODE_IS_GROUPED_PRODUCT",330],["T_WHITESPACE","\n            ",330],")",["T_WHITESPACE"," ",331],"{",["T_WHITESPACE","\n                ",331],["T_VARIABLE","$item",332],["T_OBJECT_OPERATOR","->",332],["T_STRING","delete",332],"(",")",";",["T_WHITESPACE","\n\n                ",332],["T_VARIABLE","$message",334],["T_WHITESPACE"," ",334],"=",["T_WHITESPACE"," ",334],["T_STRING","Mage",334],["T_DOUBLE_COLON","::",334],["T_STRING","getModel",334],"(",["T_CONSTANT_ENCAPSED_STRING","'xmlconnect\/simplexml_element'",334],",",["T_WHITESPACE"," ",334],["T_CONSTANT_ENCAPSED_STRING","'<message><\/message>'",334],")",";",["T_WHITESPACE","\n                ",334],["T_VARIABLE","$message",335],["T_OBJECT_OPERATOR","->",335],["T_STRING","addChild",335],"(",["T_CONSTANT_ENCAPSED_STRING","'status'",335],",",["T_WHITESPACE"," ",335],["T_STRING","self",335],["T_DOUBLE_COLON","::",335],["T_STRING","MESSAGE_STATUS_SUCCESS",335],")",";",["T_WHITESPACE","\n                ",335],["T_VARIABLE","$message",336],["T_OBJECT_OPERATOR","->",336],["T_STRING","addChild",336],"(",["T_CONSTANT_ENCAPSED_STRING","'has_required_options'",336],",",["T_WHITESPACE"," ",336],["T_LNUMBER","1",336],")",";",["T_WHITESPACE","\n                ",336],["T_VARIABLE","$message",337],["T_OBJECT_OPERATOR","->",337],["T_STRING","addChild",337],"(",["T_CONSTANT_ENCAPSED_STRING","'product_id'",337],",",["T_WHITESPACE"," ",337],["T_VARIABLE","$item",337],["T_OBJECT_OPERATOR","->",337],["T_STRING","getProductId",337],"(",")",")",";",["T_WHITESPACE","\n                ",337],["T_VARIABLE","$this",338],["T_OBJECT_OPERATOR","->",338],["T_STRING","getResponse",338],"(",")",["T_OBJECT_OPERATOR","->",338],["T_STRING","setBody",338],"(",["T_VARIABLE","$message",338],["T_OBJECT_OPERATOR","->",338],["T_STRING","asNiceXml",338],"(",")",")",";",["T_WHITESPACE","\n            ",338],"}",["T_WHITESPACE"," ",339],["T_ELSE","else",339],["T_WHITESPACE"," ",339],"{",["T_WHITESPACE","\n                ",339],["T_VARIABLE","$this",340],["T_OBJECT_OPERATOR","->",340],["T_STRING","_message",340],"(",["T_VARIABLE","$e",340],["T_OBJECT_OPERATOR","->",340],["T_STRING","getMessage",340],"(",")",",",["T_WHITESPACE"," ",340],["T_STRING","self",340],["T_DOUBLE_COLON","::",340],["T_STRING","MESSAGE_STATUS_ERROR",340],")",";",["T_WHITESPACE","\n            ",340],"}",["T_WHITESPACE","\n        ",341],"}",["T_WHITESPACE"," ",342],["T_CATCH","catch",342],["T_WHITESPACE"," ",342],"(",["T_STRING","Exception",342],["T_WHITESPACE"," ",342],["T_VARIABLE","$e",342],")",["T_WHITESPACE"," ",342],"{",["T_WHITESPACE","\n            ",342],["T_VARIABLE","$this",343],["T_OBJECT_OPERATOR","->",343],["T_STRING","_message",343],"(",["T_VARIABLE","$this",343],["T_OBJECT_OPERATOR","->",343],["T_STRING","__",343],"(",["T_CONSTANT_ENCAPSED_STRING","'Can\\'t add item to shopping cart.'",343],")",",",["T_WHITESPACE"," ",343],["T_STRING","self",343],["T_DOUBLE_COLON","::",343],["T_STRING","MESSAGE_STATUS_ERROR",343],")",";",["T_WHITESPACE","\n        ",343],"}",["T_WHITESPACE","\n\n        ",344],["T_STRING","Mage",346],["T_DOUBLE_COLON","::",346],["T_STRING","helper",346],"(",["T_CONSTANT_ENCAPSED_STRING","'wishlist'",346],")",["T_OBJECT_OPERATOR","->",346],["T_STRING","calculate",346],"(",")",";",["T_WHITESPACE","\n    ",346],"}",["T_WHITESPACE","\n",347],"}",["T_WHITESPACE","\n",348]]
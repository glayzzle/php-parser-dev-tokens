[["T_OPEN_TAG","<?php\n",1],["T_DOC_COMMENT","\/**\n * Magento\n *\n * NOTICE OF LICENSE\n *\n * This source file is subject to the Open Software License (OSL 3.0)\n * that is bundled with this package in the file LICENSE.txt.\n * It is also available through the world-wide-web at this URL:\n * http:\/\/opensource.org\/licenses\/osl-3.0.php\n * If you did not receive a copy of the license and are unable to\n * obtain it through the world-wide-web, please send an email\n * to license@magento.com so we can send you a copy immediately.\n *\n * DISCLAIMER\n *\n * Do not edit or add to this file if you wish to upgrade Magento to newer\n * versions in the future. If you wish to customize Magento for your\n * needs please refer to http:\/\/www.magento.com for more information.\n *\n * @category    Mage\n * @package     Mage_XmlConnect\n * @copyright  Copyright (c) 2006-2016 X.commerce, Inc. and affiliates (http:\/\/www.magento.com)\n * @license    http:\/\/opensource.org\/licenses\/osl-3.0.php  Open Software License (OSL 3.0)\n *\/",2],["T_WHITESPACE","\n\n",25],["T_DOC_COMMENT","\/**\n * XmlConnect Queue model\n *\n * @category    Mage\n * @package     Mage_Xmlconnect\n * @author      Magento Core Team <core@magentocommerce.com>\n *\/",27],["T_WHITESPACE","\n",33],["T_CLASS","class",34],["T_WHITESPACE"," ",34],["T_STRING","Mage_XmlConnect_Model_Queue",34],["T_WHITESPACE"," ",34],["T_EXTENDS","extends",34],["T_WHITESPACE"," ",34],["T_STRING","Mage_Core_Model_Template",34],["T_WHITESPACE","\n",34],"{",["T_WHITESPACE","\n    ",35],["T_DOC_COMMENT","\/**\n     * Status in queue identifier\n     *\/",36],["T_WHITESPACE","\n    ",38],["T_CONST","const",39],["T_WHITESPACE"," ",39],["T_STRING","STATUS_IN_QUEUE",39],["T_WHITESPACE","   ",39],"=",["T_WHITESPACE"," ",39],["T_LNUMBER","0",39],";",["T_WHITESPACE","\n\n    ",39],["T_DOC_COMMENT","\/**\n     * Status cenceled identifier\n     *\/",41],["T_WHITESPACE","\n    ",43],["T_CONST","const",44],["T_WHITESPACE"," ",44],["T_STRING","STATUS_CANCELED",44],["T_WHITESPACE","   ",44],"=",["T_WHITESPACE"," ",44],["T_LNUMBER","1",44],";",["T_WHITESPACE","\n\n    ",44],["T_DOC_COMMENT","\/**\n     * Status completed identifier\n     *\/",46],["T_WHITESPACE","\n    ",48],["T_CONST","const",49],["T_WHITESPACE"," ",49],["T_STRING","STATUS_COMPLETED",49],["T_WHITESPACE","  ",49],"=",["T_WHITESPACE"," ",49],["T_LNUMBER","2",49],";",["T_WHITESPACE","\n\n    ",49],["T_DOC_COMMENT","\/**\n     * Status deleted identifier\n     *\/",51],["T_WHITESPACE","\n    ",53],["T_CONST","const",54],["T_WHITESPACE"," ",54],["T_STRING","STATUS_DELETED",54],["T_WHITESPACE","    ",54],"=",["T_WHITESPACE"," ",54],["T_LNUMBER","3",54],";",["T_WHITESPACE","\n\n    ",54],["T_DOC_COMMENT","\/**\n     * Airmail message type\n     *\/",56],["T_WHITESPACE","\n    ",58],["T_CONST","const",59],["T_WHITESPACE"," ",59],["T_STRING","MESSAGE_TYPE_AIRMAIL",59],["T_WHITESPACE","  ",59],"=",["T_WHITESPACE"," ",59],["T_CONSTANT_ENCAPSED_STRING","'airmail'",59],";",["T_WHITESPACE","\n\n    ",59],["T_DOC_COMMENT","\/**\n     * Push notification message type\n     *\/",61],["T_WHITESPACE","\n    ",63],["T_CONST","const",64],["T_WHITESPACE"," ",64],["T_STRING","MESSAGE_TYPE_PUSH",64],["T_WHITESPACE","     ",64],"=",["T_WHITESPACE"," ",64],["T_CONSTANT_ENCAPSED_STRING","'push'",64],";",["T_WHITESPACE","\n\n    ",64],["T_DOC_COMMENT","\/**\n     * Notification type config path\n     *\/",66],["T_WHITESPACE","\n    ",68],["T_CONST","const",69],["T_WHITESPACE"," ",69],["T_STRING","XML_PATH_NOTIFICATION_TYPE",69],["T_WHITESPACE"," ",69],"=",["T_WHITESPACE"," ",69],["T_CONSTANT_ENCAPSED_STRING","'xmlconnect\/devices\/%s\/notification_type'",69],";",["T_WHITESPACE","\n\n    ",69],["T_DOC_COMMENT","\/**\n     * Count of message in queue for cron\n     * config path\n     *\/",71],["T_WHITESPACE","\n    ",74],["T_CONST","const",75],["T_WHITESPACE"," ",75],["T_STRING","XML_PATH_CRON_MESSAGES_COUNT",75],["T_WHITESPACE"," ",75],"=",["T_WHITESPACE"," ",75],["T_CONSTANT_ENCAPSED_STRING","'xmlconnect\/mobile_application\/cron_send_messages_count'",75],";",["T_WHITESPACE","\n\n    ",75],["T_DOC_COMMENT","\/**\n     * Current application type\n     *\n     * @var null|string\n     *\/",77],["T_WHITESPACE","\n    ",81],["T_PROTECTED","protected",82],["T_WHITESPACE"," ",82],["T_VARIABLE","$_appType",82],";",["T_WHITESPACE","\n\n    ",82],["T_DOC_COMMENT","\/**\n     * Application code\n     *\n     * @var string\n     *\/",84],["T_WHITESPACE","\n    ",88],["T_PROTECTED","protected",89],["T_WHITESPACE"," ",89],["T_VARIABLE","$_appCode",89],";",["T_WHITESPACE","\n\n    ",89],["T_DOC_COMMENT","\/**\n     * Initialize queue message\n     *\n     * @return null\n     *\/",91],["T_WHITESPACE","\n    ",95],["T_PROTECTED","protected",96],["T_WHITESPACE"," ",96],["T_FUNCTION","function",96],["T_WHITESPACE"," ",96],["T_STRING","_construct",96],"(",")",["T_WHITESPACE","\n    ",96],"{",["T_WHITESPACE","\n        ",97],["T_VARIABLE","$this",98],["T_OBJECT_OPERATOR","->",98],["T_STRING","_init",98],"(",["T_CONSTANT_ENCAPSED_STRING","'xmlconnect\/queue'",98],")",";",["T_WHITESPACE","\n    ",98],"}",["T_WHITESPACE","\n\n    ",99],["T_DOC_COMMENT","\/**\n     * Load object data\n     *\n     * @param int $id\n     * @param string $field\n     * @return Mage_XmlConnect_Model_Queue\n     *\/",101],["T_WHITESPACE","\n    ",107],["T_PUBLIC","public",108],["T_WHITESPACE"," ",108],["T_FUNCTION","function",108],["T_WHITESPACE"," ",108],["T_STRING","load",108],"(",["T_VARIABLE","$id",108],",",["T_WHITESPACE"," ",108],["T_VARIABLE","$field",108],["T_WHITESPACE"," ",108],"=",["T_WHITESPACE"," ",108],["T_STRING","null",108],")",["T_WHITESPACE","\n    ",108],"{",["T_WHITESPACE","\n        ",109],["T_STRING","parent",110],["T_DOUBLE_COLON","::",110],["T_STRING","load",110],"(",["T_VARIABLE","$id",110],",",["T_WHITESPACE"," ",110],["T_VARIABLE","$field",110],")",";",["T_WHITESPACE","\n\n        ",110],["T_IF","if",112],["T_WHITESPACE"," ",112],"(","!",["T_VARIABLE","$this",112],["T_OBJECT_OPERATOR","->",112],["T_STRING","getTemplateId",112],"(",")",["T_WHITESPACE"," ",112],["T_BOOLEAN_AND","&&",112],["T_WHITESPACE"," ",112],["T_STRING","Mage",112],["T_DOUBLE_COLON","::",112],["T_STRING","app",112],"(",")",["T_OBJECT_OPERATOR","->",112],["T_STRING","getRequest",112],"(",")",["T_OBJECT_OPERATOR","->",112],["T_STRING","getParam",112],"(",["T_CONSTANT_ENCAPSED_STRING","'template_id'",112],",",["T_WHITESPACE"," ",112],["T_STRING","false",112],")",")",["T_WHITESPACE"," ",112],"{",["T_WHITESPACE","\n            ",112],["T_VARIABLE","$this",113],["T_OBJECT_OPERATOR","->",113],["T_STRING","setTemplateId",113],"(",["T_STRING","Mage",113],["T_DOUBLE_COLON","::",113],["T_STRING","app",113],"(",")",["T_OBJECT_OPERATOR","->",113],["T_STRING","getRequest",113],"(",")",["T_OBJECT_OPERATOR","->",113],["T_STRING","getParam",113],"(",["T_CONSTANT_ENCAPSED_STRING","'template_id'",113],")",")",";",["T_WHITESPACE","\n        ",113],"}",["T_WHITESPACE","\n\n        ",114],["T_IF","if",116],["T_WHITESPACE"," ",116],"(",["T_VARIABLE","$this",116],["T_OBJECT_OPERATOR","->",116],["T_STRING","getTemplateId",116],"(",")",")",["T_WHITESPACE"," ",116],"{",["T_WHITESPACE","\n            ",116],["T_VARIABLE","$template",117],["T_WHITESPACE"," ",117],"=",["T_WHITESPACE"," ",117],["T_STRING","Mage",117],["T_DOUBLE_COLON","::",117],["T_STRING","getModel",117],"(",["T_CONSTANT_ENCAPSED_STRING","'xmlconnect\/template'",117],")",["T_OBJECT_OPERATOR","->",117],["T_STRING","load",117],"(",["T_VARIABLE","$this",117],["T_OBJECT_OPERATOR","->",117],["T_STRING","getTemplateId",117],"(",")",")",";",["T_WHITESPACE","\n            ",117],["T_VARIABLE","$this",118],["T_OBJECT_OPERATOR","->",118],["T_STRING","setName",118],"(",["T_VARIABLE","$template",118],["T_OBJECT_OPERATOR","->",118],["T_STRING","getName",118],"(",")",")",";",["T_WHITESPACE","\n            ",118],["T_VARIABLE","$this",119],["T_OBJECT_OPERATOR","->",119],["T_STRING","setApplicationId",119],"(",["T_VARIABLE","$template",119],["T_OBJECT_OPERATOR","->",119],["T_STRING","getApplicationId",119],"(",")",")",";",["T_WHITESPACE","\n        ",119],"}",["T_WHITESPACE","\n        ",120],["T_RETURN","return",121],["T_WHITESPACE"," ",121],["T_VARIABLE","$this",121],";",["T_WHITESPACE","\n    ",121],"}",["T_WHITESPACE","\n\n    ",122],["T_DOC_COMMENT","\/**\n     * Get template type\n     *\n     * @return int\n     *\/",124],["T_WHITESPACE","\n    ",128],["T_PUBLIC","public",129],["T_WHITESPACE"," ",129],["T_FUNCTION","function",129],["T_WHITESPACE"," ",129],["T_STRING","getType",129],"(",")",["T_WHITESPACE","\n    ",129],"{",["T_WHITESPACE","\n        ",130],["T_RETURN","return",131],["T_WHITESPACE"," ",131],["T_STRING","self",131],["T_DOUBLE_COLON","::",131],["T_STRING","TYPE_HTML",131],";",["T_WHITESPACE","\n    ",131],"}",["T_WHITESPACE","\n\n    ",132],["T_DOC_COMMENT","\/**\n     * Getter for application type\n     * @return string\n     *\/",134],["T_WHITESPACE","\n    ",137],["T_PUBLIC","public",138],["T_WHITESPACE"," ",138],["T_FUNCTION","function",138],["T_WHITESPACE"," ",138],["T_STRING","getApplicationType",138],"(",")",["T_WHITESPACE","\n    ",138],"{",["T_WHITESPACE","\n        ",139],["T_IF","if",140],["T_WHITESPACE"," ",140],"(",["T_EMPTY","empty",140],"(",["T_VARIABLE","$this",140],["T_OBJECT_OPERATOR","->",140],["T_STRING","_appType",140],")",["T_WHITESPACE"," ",140],["T_BOOLEAN_AND","&&",140],["T_WHITESPACE"," ",140],["T_VARIABLE","$this",140],["T_OBJECT_OPERATOR","->",140],["T_STRING","getAppCode",140],"(",")",")",["T_WHITESPACE"," ",140],"{",["T_WHITESPACE","\n            ",140],["T_VARIABLE","$app",141],["T_WHITESPACE"," ",141],"=",["T_WHITESPACE"," ",141],["T_STRING","Mage",141],["T_DOUBLE_COLON","::",141],["T_STRING","getModel",141],"(",["T_CONSTANT_ENCAPSED_STRING","'xmlconnect\/application'",141],")",["T_OBJECT_OPERATOR","->",141],["T_STRING","loadByCode",141],"(",["T_VARIABLE","$this",141],["T_OBJECT_OPERATOR","->",141],["T_STRING","getAppCode",141],"(",")",")",";",["T_WHITESPACE","\n            ",141],["T_VARIABLE","$this",142],["T_OBJECT_OPERATOR","->",142],["T_STRING","_appType",142],["T_WHITESPACE"," ",142],"=",["T_WHITESPACE"," ",142],["T_VARIABLE","$app",142],["T_OBJECT_OPERATOR","->",142],["T_STRING","getId",142],"(",")",["T_WHITESPACE"," ",142],"?",["T_WHITESPACE"," ",142],["T_VARIABLE","$app",142],["T_OBJECT_OPERATOR","->",142],["T_STRING","getType",142],"(",")",["T_WHITESPACE"," ",142],":",["T_WHITESPACE"," ",142],["T_STRING","null",142],";",["T_WHITESPACE","\n        ",142],"}",["T_WHITESPACE","\n\n        ",143],["T_RETURN","return",145],["T_WHITESPACE"," ",145],["T_VARIABLE","$this",145],["T_OBJECT_OPERATOR","->",145],["T_STRING","_appType",145],";",["T_WHITESPACE","\n    ",145],"}",["T_WHITESPACE","\n\n    ",146],["T_DOC_COMMENT","\/**\n     * Getter for application name\n     *\n     * @return string\n     *\/",148],["T_WHITESPACE","\n    ",152],["T_PUBLIC","public",153],["T_WHITESPACE"," ",153],["T_FUNCTION","function",153],["T_WHITESPACE"," ",153],["T_STRING","getAppName",153],"(",")",["T_WHITESPACE","\n    ",153],"{",["T_WHITESPACE","\n        ",154],["T_IF","if",155],["T_WHITESPACE"," ",155],"(",["T_VARIABLE","$this",155],["T_OBJECT_OPERATOR","->",155],["T_STRING","getApplicationName",155],"(",")",")",["T_WHITESPACE"," ",155],"{",["T_WHITESPACE","\n            ",155],["T_RETURN","return",156],["T_WHITESPACE"," ",156],["T_VARIABLE","$this",156],["T_OBJECT_OPERATOR","->",156],["T_STRING","getApplicationName",156],"(",")",";",["T_WHITESPACE","\n        ",156],"}",["T_WHITESPACE"," ",157],["T_ELSE","else",157],["T_WHITESPACE"," ",157],"{",["T_WHITESPACE","\n            ",157],["T_RETURN","return",158],["T_WHITESPACE"," ",158],["T_STRING","Mage",158],["T_DOUBLE_COLON","::",158],["T_STRING","helper",158],"(",["T_CONSTANT_ENCAPSED_STRING","'xmlconnect'",158],")",["T_OBJECT_OPERATOR","->",158],["T_STRING","getApplicationName",158],"(",["T_VARIABLE","$this",158],["T_OBJECT_OPERATOR","->",158],["T_STRING","getAppCode",158],"(",")",")",";",["T_WHITESPACE","\n        ",158],"}",["T_WHITESPACE","\n    ",159],"}",["T_WHITESPACE","\n\n    ",160],["T_DOC_COMMENT","\/**\n     * Getter for template name\n     *\n     * @return string\n     *\/",162],["T_WHITESPACE","\n    ",166],["T_PUBLIC","public",167],["T_WHITESPACE"," ",167],["T_FUNCTION","function",167],["T_WHITESPACE"," ",167],["T_STRING","getTplName",167],"(",")",["T_WHITESPACE","\n    ",167],"{",["T_WHITESPACE","\n        ",168],["T_IF","if",169],["T_WHITESPACE"," ",169],"(",["T_VARIABLE","$this",169],["T_OBJECT_OPERATOR","->",169],["T_STRING","getTemplateName",169],"(",")",")",["T_WHITESPACE"," ",169],"{",["T_WHITESPACE","\n            ",169],["T_RETURN","return",170],["T_WHITESPACE"," ",170],["T_VARIABLE","$this",170],["T_OBJECT_OPERATOR","->",170],["T_STRING","getTemplateName",170],"(",")",";",["T_WHITESPACE","\n        ",170],"}",["T_WHITESPACE"," ",171],["T_ELSE","else",171],["T_WHITESPACE"," ",171],"{",["T_WHITESPACE","\n            ",171],["T_RETURN","return",172],["T_WHITESPACE"," ",172],["T_STRING","Mage",172],["T_DOUBLE_COLON","::",172],["T_STRING","helper",172],"(",["T_CONSTANT_ENCAPSED_STRING","'xmlconnect'",172],")",["T_OBJECT_OPERATOR","->",172],["T_STRING","getTemplateName",172],"(",["T_VARIABLE","$this",172],["T_OBJECT_OPERATOR","->",172],["T_STRING","getTemplateId",172],"(",")",")",";",["T_WHITESPACE","\n        ",172],"}",["T_WHITESPACE","\n    ",173],"}",["T_WHITESPACE","\n\n    ",174],["T_DOC_COMMENT","\/**\n     * Retrieve processed template\n     *\n     * @param array $variables\n     * @return string\n     *\/",176],["T_WHITESPACE","\n    ",181],["T_PUBLIC","public",182],["T_WHITESPACE"," ",182],["T_FUNCTION","function",182],["T_WHITESPACE"," ",182],["T_STRING","getProcessedTemplate",182],"(",["T_ARRAY","array",182],["T_WHITESPACE"," ",182],["T_VARIABLE","$variables",182],["T_WHITESPACE"," ",182],"=",["T_WHITESPACE"," ",182],["T_ARRAY","array",182],"(",")",")",["T_WHITESPACE","\n    ",182],"{",["T_WHITESPACE","\n        ",183],["T_COMMENT","\/* @var $processor Mage_Widget_Model_Template_Filter *\/",184],["T_WHITESPACE","\n        ",184],["T_VARIABLE","$processor",185],["T_WHITESPACE"," ",185],"=",["T_WHITESPACE"," ",185],["T_STRING","Mage",185],["T_DOUBLE_COLON","::",185],["T_STRING","getModel",185],"(",["T_CONSTANT_ENCAPSED_STRING","'widget\/template_filter'",185],")",";",["T_WHITESPACE","\n\n        ",185],["T_VARIABLE","$variables",187],"[",["T_CONSTANT_ENCAPSED_STRING","'this'",187],"]",["T_WHITESPACE"," ",187],"=",["T_WHITESPACE"," ",187],["T_VARIABLE","$this",187],";",["T_WHITESPACE","\n\n        ",187],["T_IF","if",189],["T_WHITESPACE"," ",189],"(",["T_STRING","Mage",189],["T_DOUBLE_COLON","::",189],["T_STRING","app",189],"(",")",["T_OBJECT_OPERATOR","->",189],["T_STRING","isSingleStoreMode",189],"(",")",")",["T_WHITESPACE"," ",189],"{",["T_WHITESPACE","\n            ",189],["T_VARIABLE","$processor",190],["T_OBJECT_OPERATOR","->",190],["T_STRING","setStoreId",190],"(",["T_STRING","Mage",190],["T_DOUBLE_COLON","::",190],["T_STRING","app",190],"(",")",["T_OBJECT_OPERATOR","->",190],["T_STRING","getStore",190],"(",")",")",";",["T_WHITESPACE","\n        ",190],"}",["T_WHITESPACE"," ",191],["T_ELSE","else",191],["T_WHITESPACE"," ",191],"{",["T_WHITESPACE","\n            ",191],["T_VARIABLE","$processor",192],["T_OBJECT_OPERATOR","->",192],["T_STRING","setStoreId",192],"(",["T_LNUMBER","1",192],")",";",["T_WHITESPACE","\n        ",192],"}",["T_WHITESPACE","\n\n        ",193],["T_VARIABLE","$htmlDescription",195],["T_WHITESPACE"," ",195],"=",["T_WHITESPACE"," ",195],["T_START_HEREDOC","<<<EOT\n",195],["T_ENCAPSED_AND_WHITESPACE","<div style=\"font-size: 0.8em; text-decoration: underline; margin-top: 1.5em; line-height: 2em;\">%s:<\/div>\n",196],["T_END_HEREDOC","EOT",197],";",["T_WHITESPACE","\n\n        ",197],["T_SWITCH","switch",199],["T_WHITESPACE"," ",199],"(",["T_VARIABLE","$this",199],["T_OBJECT_OPERATOR","->",199],["T_STRING","getData",199],"(",["T_CONSTANT_ENCAPSED_STRING","'type'",199],")",")",["T_WHITESPACE"," ",199],"{",["T_WHITESPACE","\n            ",199],["T_CASE","case",200],["T_WHITESPACE"," ",200],["T_STRING","Mage_XmlConnect_Model_Queue",200],["T_DOUBLE_COLON","::",200],["T_STRING","MESSAGE_TYPE_AIRMAIL",200],":",["T_WHITESPACE","\n                ",200],["T_VARIABLE","$html",201],["T_WHITESPACE","  ",201],"=",["T_WHITESPACE"," ",201],["T_STRING","sprintf",201],"(",["T_VARIABLE","$htmlDescription",201],",",["T_WHITESPACE"," ",201],["T_STRING","Mage",201],["T_DOUBLE_COLON","::",201],["T_STRING","helper",201],"(",["T_CONSTANT_ENCAPSED_STRING","'xmlconnect'",201],")",["T_OBJECT_OPERATOR","->",201],["T_STRING","__",201],"(",["T_CONSTANT_ENCAPSED_STRING","'Push title'",201],")",")",["T_WHITESPACE","\n                    ",201],".",["T_WHITESPACE"," ",202],["T_VARIABLE","$this",202],["T_OBJECT_OPERATOR","->",202],["T_STRING","getPushTitle",202],"(",")",["T_WHITESPACE","\n                    ",202],".",["T_WHITESPACE"," ",203],["T_STRING","sprintf",203],"(",["T_VARIABLE","$htmlDescription",203],",",["T_WHITESPACE"," ",203],["T_STRING","Mage",203],["T_DOUBLE_COLON","::",203],["T_STRING","helper",203],"(",["T_CONSTANT_ENCAPSED_STRING","'xmlconnect'",203],")",["T_OBJECT_OPERATOR","->",203],["T_STRING","__",203],"(",["T_CONSTANT_ENCAPSED_STRING","'Message title'",203],")",")",["T_WHITESPACE","\n                    ",203],".",["T_WHITESPACE"," ",204],["T_VARIABLE","$this",204],["T_OBJECT_OPERATOR","->",204],["T_STRING","getMessageTitle",204],"(",")",["T_WHITESPACE","\n                    ",204],".",["T_WHITESPACE"," ",205],["T_STRING","sprintf",205],"(",["T_VARIABLE","$htmlDescription",205],",",["T_WHITESPACE"," ",205],["T_STRING","Mage",205],["T_DOUBLE_COLON","::",205],["T_STRING","helper",205],"(",["T_CONSTANT_ENCAPSED_STRING","'xmlconnect'",205],")",["T_OBJECT_OPERATOR","->",205],["T_STRING","__",205],"(",["T_CONSTANT_ENCAPSED_STRING","'Message content'",205],")",")",["T_WHITESPACE","\n                    ",205],".",["T_WHITESPACE"," ",206],["T_VARIABLE","$processor",206],["T_OBJECT_OPERATOR","->",206],["T_STRING","filter",206],"(",["T_VARIABLE","$this",206],["T_OBJECT_OPERATOR","->",206],["T_STRING","getContent",206],"(",")",")",";",["T_WHITESPACE","\n                ",206],["T_BREAK","break",207],";",["T_WHITESPACE","\n            ",207],["T_CASE","case",208],["T_WHITESPACE"," ",208],["T_STRING","Mage_XmlConnect_Model_Queue",208],["T_DOUBLE_COLON","::",208],["T_STRING","MESSAGE_TYPE_PUSH",208],":",["T_WHITESPACE","\n            ",208],["T_DEFAULT","default",209],":",["T_WHITESPACE","\n                ",209],["T_VARIABLE","$html",210],["T_WHITESPACE","  ",210],"=",["T_WHITESPACE"," ",210],["T_STRING","sprintf",210],"(",["T_VARIABLE","$htmlDescription",210],",",["T_WHITESPACE"," ",210],["T_STRING","Mage",210],["T_DOUBLE_COLON","::",210],["T_STRING","helper",210],"(",["T_CONSTANT_ENCAPSED_STRING","'xmlconnect'",210],")",["T_OBJECT_OPERATOR","->",210],["T_STRING","__",210],"(",["T_CONSTANT_ENCAPSED_STRING","'Push title'",210],")",")",["T_WHITESPACE","\n                    ",210],".",["T_WHITESPACE"," ",211],["T_VARIABLE","$this",211],["T_OBJECT_OPERATOR","->",211],["T_STRING","getPushTitle",211],"(",")",";",["T_WHITESPACE","\n                ",211],["T_BREAK","break",212],";",["T_WHITESPACE","\n        ",212],"}",["T_WHITESPACE","\n        ",213],["T_RETURN","return",214],["T_WHITESPACE"," ",214],["T_VARIABLE","$html",214],";",["T_WHITESPACE","\n    ",214],"}",["T_WHITESPACE","\n\n    ",215],["T_DOC_COMMENT","\/**\n     * Reset all model data\n     *\n     * @return Mage_XmlConnect_Model_Queue\n     *\/",217],["T_WHITESPACE","\n    ",221],["T_PUBLIC","public",222],["T_WHITESPACE"," ",222],["T_FUNCTION","function",222],["T_WHITESPACE"," ",222],["T_STRING","reset",222],"(",")",["T_WHITESPACE","\n    ",222],"{",["T_WHITESPACE","\n        ",223],["T_VARIABLE","$this",224],["T_OBJECT_OPERATOR","->",224],["T_STRING","setData",224],"(",["T_ARRAY","array",224],"(",")",")",";",["T_WHITESPACE","\n        ",224],["T_VARIABLE","$this",225],["T_OBJECT_OPERATOR","->",225],["T_STRING","setOrigData",225],"(",")",";",["T_WHITESPACE","\n\n        ",225],["T_RETURN","return",227],["T_WHITESPACE"," ",227],["T_VARIABLE","$this",227],";",["T_WHITESPACE","\n    ",227],"}",["T_WHITESPACE","\n\n\n    ",228],["T_DOC_COMMENT","\/**\n     * Get JSON-encoded params for broadcast AirMail\n     *  Format of JSON data:\n     *  {\n     *      \"push\": {\n     *          \"aps\": {\n     *              \"alert\": \"New message!\"\n     *          }\n     *      },\n     *      \"title\": \"Message title\",\n     *      \"message\": \"Your full message here.\",\n     *      \"extra\": {\n     *          \"some_key\": \"some_value\"\n     *      }\n     *  }\n     *\n     * @return string\n     *\/",231],["T_WHITESPACE","\n    ",248],["T_PUBLIC","public",249],["T_WHITESPACE"," ",249],["T_FUNCTION","function",249],["T_WHITESPACE"," ",249],["T_STRING","getAirmailBroadcastParams",249],"(",")",["T_WHITESPACE","\n    ",249],"{",["T_WHITESPACE","\n        ",250],["T_VARIABLE","$notificationType",251],["T_WHITESPACE"," ",251],"=",["T_WHITESPACE"," ",251],["T_STRING","Mage",251],["T_DOUBLE_COLON","::",251],["T_STRING","getStoreConfig",251],"(",["T_WHITESPACE","\n            ",251],["T_STRING","sprintf",252],"(",["T_STRING","Mage_XmlConnect_Model_Queue",252],["T_DOUBLE_COLON","::",252],["T_STRING","XML_PATH_NOTIFICATION_TYPE",252],",",["T_WHITESPACE"," ",252],["T_VARIABLE","$this",252],["T_OBJECT_OPERATOR","->",252],["T_STRING","getApplicationType",252],"(",")",")",["T_WHITESPACE","\n        ",252],")",";",["T_WHITESPACE","\n\n        ",253],["T_VARIABLE","$payload",255],["T_WHITESPACE"," ",255],"=",["T_WHITESPACE"," ",255],["T_ARRAY","array",255],"(",["T_WHITESPACE","\n            ",255],["T_CONSTANT_ENCAPSED_STRING","'push'",256],["T_WHITESPACE"," ",256],["T_DOUBLE_ARROW","=>",256],["T_WHITESPACE"," ",256],["T_ARRAY","array",256],"(",["T_VARIABLE","$notificationType",256],["T_WHITESPACE"," ",256],["T_DOUBLE_ARROW","=>",256],["T_WHITESPACE"," ",256],["T_ARRAY","array",256],"(",["T_CONSTANT_ENCAPSED_STRING","'alert'",256],["T_WHITESPACE"," ",256],["T_DOUBLE_ARROW","=>",256],["T_WHITESPACE"," ",256],["T_VARIABLE","$this",256],["T_OBJECT_OPERATOR","->",256],["T_STRING","getPushTitle",256],"(",")",")",")",",",["T_WHITESPACE","\n            ",256],["T_CONSTANT_ENCAPSED_STRING","'title'",257],["T_WHITESPACE"," ",257],["T_DOUBLE_ARROW","=>",257],["T_WHITESPACE"," ",257],["T_VARIABLE","$this",257],["T_OBJECT_OPERATOR","->",257],["T_STRING","getMessageTitle",257],"(",")",",",["T_WHITESPACE","\n            ",257],["T_CONSTANT_ENCAPSED_STRING","'message'",258],["T_WHITESPACE"," ",258],["T_DOUBLE_ARROW","=>",258],["T_WHITESPACE"," ",258],["T_VARIABLE","$this",258],["T_OBJECT_OPERATOR","->",258],["T_STRING","getContent",258],"(",")",",",["T_WHITESPACE","\n        ",258],")",";",["T_WHITESPACE","\n        ",259],["T_RETURN","return",260],["T_WHITESPACE"," ",260],["T_STRING","Mage",260],["T_DOUBLE_COLON","::",260],["T_STRING","helper",260],"(",["T_CONSTANT_ENCAPSED_STRING","'core'",260],")",["T_OBJECT_OPERATOR","->",260],["T_STRING","jsonEncode",260],"(",["T_VARIABLE","$payload",260],")",";",["T_WHITESPACE","\n    ",260],"}",["T_WHITESPACE","\n\n    ",261],["T_DOC_COMMENT","\/**\n     * Get JSON-encoded params for broadcast Push Notification\n     *  Format of JSON data:\n     *  {\n     *      \"aps\": {\n     *           \"badge\": 15,\n     *           \"alert\": \"Hello from Urban Airship!\",\n     *           \"sound\": \"cat.caf\"\n     *      },\n     *      \"exclude_tokens\": [\n     *          \"device token you want to skip\",\n     *          \"another device token you want to skip\"\n     *      ]\n     *  }\n     *\n     * @return string\n     *\/",263],["T_WHITESPACE","\n    ",279],["T_PUBLIC","public",280],["T_WHITESPACE"," ",280],["T_FUNCTION","function",280],["T_WHITESPACE"," ",280],["T_STRING","getPushBroadcastParams",280],"(",")",["T_WHITESPACE","\n    ",280],"{",["T_WHITESPACE","\n        ",281],["T_VARIABLE","$notificationType",282],["T_WHITESPACE"," ",282],"=",["T_WHITESPACE"," ",282],["T_STRING","Mage",282],["T_DOUBLE_COLON","::",282],["T_STRING","getStoreConfig",282],"(",["T_WHITESPACE","\n            ",282],["T_STRING","sprintf",283],"(",["T_STRING","Mage_XmlConnect_Model_Queue",283],["T_DOUBLE_COLON","::",283],["T_STRING","XML_PATH_NOTIFICATION_TYPE",283],",",["T_WHITESPACE"," ",283],["T_VARIABLE","$this",283],["T_OBJECT_OPERATOR","->",283],["T_STRING","getApplicationType",283],"(",")",")",["T_WHITESPACE","\n        ",283],")",";",["T_WHITESPACE","\n\n        ",284],["T_VARIABLE","$payload",286],["T_WHITESPACE"," ",286],"=",["T_WHITESPACE"," ",286],["T_ARRAY","array",286],"(",["T_WHITESPACE","\n            ",286],["T_VARIABLE","$notificationType",287],["T_WHITESPACE"," ",287],["T_DOUBLE_ARROW","=>",287],["T_WHITESPACE"," ",287],["T_ARRAY","array",287],"(",["T_WHITESPACE","\n",287],["T_COMMENT","\/\/                'badge' => 'auto',\n",288],["T_WHITESPACE","                ",289],["T_CONSTANT_ENCAPSED_STRING","'alert'",289],["T_WHITESPACE"," ",289],["T_DOUBLE_ARROW","=>",289],["T_WHITESPACE"," ",289],["T_VARIABLE","$this",289],["T_OBJECT_OPERATOR","->",289],["T_STRING","getPushTitle",289],"(",")",",",["T_WHITESPACE","\n                ",289],["T_CONSTANT_ENCAPSED_STRING","'sound'",290],["T_WHITESPACE"," ",290],["T_DOUBLE_ARROW","=>",290],["T_WHITESPACE"," ",290],["T_CONSTANT_ENCAPSED_STRING","'default'",290],["T_WHITESPACE","\n            ",290],")",["T_WHITESPACE","\n        ",291],")",";",["T_WHITESPACE","\n        ",292],["T_RETURN","return",293],["T_WHITESPACE"," ",293],["T_STRING","Mage",293],["T_DOUBLE_COLON","::",293],["T_STRING","helper",293],"(",["T_CONSTANT_ENCAPSED_STRING","'core'",293],")",["T_OBJECT_OPERATOR","->",293],["T_STRING","jsonEncode",293],"(",["T_VARIABLE","$payload",293],")",";",["T_WHITESPACE","\n    ",293],"}",["T_WHITESPACE","\n\n    ",294],["T_DOC_COMMENT","\/**\n     * Save object data\n     *\n     * @return Mage_Core_Model_Abstract\n     *\/",296],["T_WHITESPACE","\n    ",300],["T_PUBLIC","public",301],["T_WHITESPACE"," ",301],["T_FUNCTION","function",301],["T_WHITESPACE"," ",301],["T_STRING","save",301],"(",")",["T_WHITESPACE","\n    ",301],"{",["T_WHITESPACE","\n        ",302],["T_IF","if",303],["T_WHITESPACE"," ",303],"(","!",["T_VARIABLE","$this",303],["T_OBJECT_OPERATOR","->",303],["T_STRING","getIsSent",303],"(",")",["T_WHITESPACE"," ",303],["T_BOOLEAN_AND","&&",303],["T_WHITESPACE"," ",303],["T_VARIABLE","$this",303],["T_OBJECT_OPERATOR","->",303],["T_STRING","getStatus",303],"(",")",["T_WHITESPACE"," ",303],["T_IS_EQUAL","==",303],["T_WHITESPACE"," ",303],["T_STRING","self",303],["T_DOUBLE_COLON","::",303],["T_STRING","STATUS_IN_QUEUE",303],")",["T_WHITESPACE"," ",303],"{",["T_WHITESPACE","\n            ",303],["T_TRY","try",304],["T_WHITESPACE"," ",304],"{",["T_WHITESPACE","\n                ",304],["T_STRING","Mage",305],["T_DOUBLE_COLON","::",305],["T_STRING","dispatchEvent",305],"(",["T_CONSTANT_ENCAPSED_STRING","'before_save_message_queue'",305],",",["T_WHITESPACE"," ",305],["T_ARRAY","array",305],"(",["T_CONSTANT_ENCAPSED_STRING","'queueMessage'",305],["T_WHITESPACE"," ",305],["T_DOUBLE_ARROW","=>",305],["T_WHITESPACE"," ",305],["T_VARIABLE","$this",305],")",")",";",["T_WHITESPACE","\n            ",305],"}",["T_WHITESPACE"," ",306],["T_CATCH","catch",306],["T_WHITESPACE"," ",306],"(",["T_STRING","Exception",306],["T_WHITESPACE"," ",306],["T_VARIABLE","$e",306],")",["T_WHITESPACE"," ",306],"{",["T_WHITESPACE","\n                ",306],["T_STRING","Mage",307],["T_DOUBLE_COLON","::",307],["T_STRING","logException",307],"(",["T_VARIABLE","$e",307],")",";",["T_WHITESPACE","\n            ",307],"}",["T_WHITESPACE","\n        ",308],"}",["T_WHITESPACE","\n        ",309],["T_RETURN","return",310],["T_WHITESPACE"," ",310],["T_STRING","parent",310],["T_DOUBLE_COLON","::",310],["T_STRING","save",310],"(",")",";",["T_WHITESPACE","\n    ",310],"}",["T_WHITESPACE","\n\n    ",311],["T_DOC_COMMENT","\/**\n     * Get application code\n     *\n     * @return string\n     *\/",313],["T_WHITESPACE","\n    ",317],["T_PUBLIC","public",318],["T_WHITESPACE"," ",318],["T_FUNCTION","function",318],["T_WHITESPACE"," ",318],["T_STRING","getAppCode",318],"(",")",["T_WHITESPACE","\n    ",318],"{",["T_WHITESPACE","\n        ",319],["T_IF","if",320],["T_WHITESPACE"," ",320],"(",["T_STRING","null",320],["T_WHITESPACE"," ",320],["T_IS_IDENTICAL","===",320],["T_WHITESPACE"," ",320],["T_VARIABLE","$this",320],["T_OBJECT_OPERATOR","->",320],["T_STRING","_appCode",320],")",["T_WHITESPACE"," ",320],"{",["T_WHITESPACE","\n            ",320],["T_IF","if",321],["T_WHITESPACE"," ",321],"(",["T_VARIABLE","$this",321],["T_OBJECT_OPERATOR","->",321],["T_STRING","getApplicationId",321],"(",")",")",["T_WHITESPACE"," ",321],"{",["T_WHITESPACE","\n                ",321],["T_VARIABLE","$application",322],["T_WHITESPACE"," ",322],"=",["T_WHITESPACE"," ",322],["T_STRING","Mage",322],["T_DOUBLE_COLON","::",322],["T_STRING","getModel",322],"(",["T_CONSTANT_ENCAPSED_STRING","'xmlconnect\/application'",322],")",["T_OBJECT_OPERATOR","->",322],["T_STRING","load",322],"(",["T_VARIABLE","$this",322],["T_OBJECT_OPERATOR","->",322],["T_STRING","getApplicationId",322],"(",")",")",";",["T_WHITESPACE","\n                ",322],["T_VARIABLE","$this",323],["T_OBJECT_OPERATOR","->",323],["T_STRING","_appCode",323],["T_WHITESPACE"," ",323],"=",["T_WHITESPACE"," ",323],["T_VARIABLE","$application",323],["T_OBJECT_OPERATOR","->",323],["T_STRING","getCode",323],"(",")",";",["T_WHITESPACE","\n            ",323],"}",["T_WHITESPACE","\n        ",324],"}",["T_WHITESPACE","\n        ",325],["T_RETURN","return",326],["T_WHITESPACE"," ",326],["T_VARIABLE","$this",326],["T_OBJECT_OPERATOR","->",326],["T_STRING","_appCode",326],";",["T_WHITESPACE","\n    ",326],"}",["T_WHITESPACE","\n",327],"}",["T_WHITESPACE","\n",328]]
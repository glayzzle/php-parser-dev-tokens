[["T_OPEN_TAG","<?php\n",1],["T_DOC_COMMENT","\/**\n * Magento\n *\n * NOTICE OF LICENSE\n *\n * This source file is subject to the Open Software License (OSL 3.0)\n * that is bundled with this package in the file LICENSE.txt.\n * It is also available through the world-wide-web at this URL:\n * http:\/\/opensource.org\/licenses\/osl-3.0.php\n * If you did not receive a copy of the license and are unable to\n * obtain it through the world-wide-web, please send an email\n * to license@magento.com so we can send you a copy immediately.\n *\n * DISCLAIMER\n *\n * Do not edit or add to this file if you wish to upgrade Magento to newer\n * versions in the future. If you wish to customize Magento for your\n * needs please refer to http:\/\/www.magento.com for more information.\n *\n * @category    Mage\n * @package     Mage_Downloadable\n * @copyright  Copyright (c) 2006-2016 X.commerce, Inc. and affiliates (http:\/\/www.magento.com)\n * @license    http:\/\/opensource.org\/licenses\/osl-3.0.php  Open Software License (OSL 3.0)\n *\/",2],["T_WHITESPACE","\n\n",25],["T_REQUIRE_ONCE","require_once",27],["T_WHITESPACE"," ",27],["T_CONSTANT_ENCAPSED_STRING","'Mage\/Adminhtml\/controllers\/Catalog\/ProductController.php'",27],";",["T_WHITESPACE","\n\n",27],["T_DOC_COMMENT","\/**\n * Adminhtml downloadable product edit\n *\n * @category    Mage\n * @package     Mage_Downloadable\n * @author      Magento Core Team <core@magentocommerce.com>\n *\/",29],["T_WHITESPACE","\n",35],["T_CLASS","class",36],["T_WHITESPACE"," ",36],["T_STRING","Mage_Downloadable_Adminhtml_Downloadable_Product_EditController",36],["T_WHITESPACE"," ",36],["T_EXTENDS","extends",36],["T_WHITESPACE"," ",36],["T_STRING","Mage_Adminhtml_Catalog_ProductController",36],["T_WHITESPACE","\n",36],"{",["T_WHITESPACE","\n\n    ",37],["T_DOC_COMMENT","\/**\n     * Varien class constructor\n     *\n     *\/",39],["T_WHITESPACE","\n    ",42],["T_PROTECTED","protected",43],["T_WHITESPACE"," ",43],["T_FUNCTION","function",43],["T_WHITESPACE"," ",43],["T_STRING","_construct",43],"(",")",["T_WHITESPACE","\n    ",43],"{",["T_WHITESPACE","\n        ",44],["T_VARIABLE","$this",45],["T_OBJECT_OPERATOR","->",45],["T_STRING","setUsedModuleName",45],"(",["T_CONSTANT_ENCAPSED_STRING","'Mage_Downloadable'",45],")",";",["T_WHITESPACE","\n    ",45],"}",["T_WHITESPACE","\n\n    ",46],["T_DOC_COMMENT","\/**\n     * Load downloadable tab fieldsets\n     *\n     *\/",48],["T_WHITESPACE","\n    ",51],["T_PUBLIC","public",52],["T_WHITESPACE"," ",52],["T_FUNCTION","function",52],["T_WHITESPACE"," ",52],["T_STRING","formAction",52],"(",")",["T_WHITESPACE","\n    ",52],"{",["T_WHITESPACE","\n        ",53],["T_VARIABLE","$this",54],["T_OBJECT_OPERATOR","->",54],["T_STRING","_initProduct",54],"(",")",";",["T_WHITESPACE","\n        ",54],["T_VARIABLE","$this",55],["T_OBJECT_OPERATOR","->",55],["T_STRING","getResponse",55],"(",")",["T_OBJECT_OPERATOR","->",55],["T_STRING","setBody",55],"(",["T_WHITESPACE","\n            ",55],["T_VARIABLE","$this",56],["T_OBJECT_OPERATOR","->",56],["T_STRING","getLayout",56],"(",")",["T_OBJECT_OPERATOR","->",56],["T_STRING","createBlock",56],"(",["T_CONSTANT_ENCAPSED_STRING","'downloadable\/adminhtml_catalog_product_edit_tab_downloadable'",56],",",["T_WHITESPACE"," ",56],["T_CONSTANT_ENCAPSED_STRING","'admin.product.downloadable.information'",56],")",["T_WHITESPACE","\n                ",56],["T_OBJECT_OPERATOR","->",57],["T_STRING","toHtml",57],"(",")",["T_WHITESPACE","\n        ",57],")",";",["T_WHITESPACE","\n    ",58],"}",["T_WHITESPACE","\n\n    ",59],["T_DOC_COMMENT","\/**\n     * Download process\n     *\n     * @param string $resource\n     * @param string $resourceType\n     *\/",61],["T_WHITESPACE","\n    ",66],["T_PROTECTED","protected",67],["T_WHITESPACE"," ",67],["T_FUNCTION","function",67],["T_WHITESPACE"," ",67],["T_STRING","_processDownload",67],"(",["T_VARIABLE","$resource",67],",",["T_WHITESPACE"," ",67],["T_VARIABLE","$resourceType",67],")",["T_WHITESPACE","\n    ",67],"{",["T_WHITESPACE","\n        ",68],["T_VARIABLE","$helper",69],["T_WHITESPACE"," ",69],"=",["T_WHITESPACE"," ",69],["T_STRING","Mage",69],["T_DOUBLE_COLON","::",69],["T_STRING","helper",69],"(",["T_CONSTANT_ENCAPSED_STRING","'downloadable\/download'",69],")",";",["T_WHITESPACE","\n        ",69],["T_COMMENT","\/* @var $helper Mage_Downloadable_Helper_Download *\/",70],["T_WHITESPACE","\n\n        ",70],["T_VARIABLE","$helper",72],["T_OBJECT_OPERATOR","->",72],["T_STRING","setResource",72],"(",["T_VARIABLE","$resource",72],",",["T_WHITESPACE"," ",72],["T_VARIABLE","$resourceType",72],")",";",["T_WHITESPACE","\n\n        ",72],["T_VARIABLE","$fileName",74],["T_WHITESPACE","       ",74],"=",["T_WHITESPACE"," ",74],["T_VARIABLE","$helper",74],["T_OBJECT_OPERATOR","->",74],["T_STRING","getFilename",74],"(",")",";",["T_WHITESPACE","\n        ",74],["T_VARIABLE","$contentType",75],["T_WHITESPACE","    ",75],"=",["T_WHITESPACE"," ",75],["T_VARIABLE","$helper",75],["T_OBJECT_OPERATOR","->",75],["T_STRING","getContentType",75],"(",")",";",["T_WHITESPACE","\n\n        ",75],["T_VARIABLE","$this",77],["T_OBJECT_OPERATOR","->",77],["T_STRING","getResponse",77],"(",")",["T_WHITESPACE","\n            ",77],["T_OBJECT_OPERATOR","->",78],["T_STRING","setHttpResponseCode",78],"(",["T_LNUMBER","200",78],")",["T_WHITESPACE","\n            ",78],["T_OBJECT_OPERATOR","->",79],["T_STRING","setHeader",79],"(",["T_CONSTANT_ENCAPSED_STRING","'Pragma'",79],",",["T_WHITESPACE"," ",79],["T_CONSTANT_ENCAPSED_STRING","'public'",79],",",["T_WHITESPACE"," ",79],["T_STRING","true",79],")",["T_WHITESPACE","\n            ",79],["T_OBJECT_OPERATOR","->",80],["T_STRING","setHeader",80],"(",["T_CONSTANT_ENCAPSED_STRING","'Cache-Control'",80],",",["T_WHITESPACE"," ",80],["T_CONSTANT_ENCAPSED_STRING","'must-revalidate, post-check=0, pre-check=0'",80],",",["T_WHITESPACE"," ",80],["T_STRING","true",80],")",["T_WHITESPACE","\n            ",80],["T_OBJECT_OPERATOR","->",81],["T_STRING","setHeader",81],"(",["T_CONSTANT_ENCAPSED_STRING","'Content-type'",81],",",["T_WHITESPACE"," ",81],["T_VARIABLE","$contentType",81],",",["T_WHITESPACE"," ",81],["T_STRING","true",81],")",";",["T_WHITESPACE","\n\n        ",81],["T_IF","if",83],["T_WHITESPACE"," ",83],"(",["T_VARIABLE","$fileSize",83],["T_WHITESPACE"," ",83],"=",["T_WHITESPACE"," ",83],["T_VARIABLE","$helper",83],["T_OBJECT_OPERATOR","->",83],["T_STRING","getFilesize",83],"(",")",")",["T_WHITESPACE"," ",83],"{",["T_WHITESPACE","\n            ",83],["T_VARIABLE","$this",84],["T_OBJECT_OPERATOR","->",84],["T_STRING","getResponse",84],"(",")",["T_WHITESPACE","\n                ",84],["T_OBJECT_OPERATOR","->",85],["T_STRING","setHeader",85],"(",["T_CONSTANT_ENCAPSED_STRING","'Content-Length'",85],",",["T_WHITESPACE"," ",85],["T_VARIABLE","$fileSize",85],")",";",["T_WHITESPACE","\n        ",85],"}",["T_WHITESPACE","\n\n        ",86],["T_IF","if",88],["T_WHITESPACE"," ",88],"(",["T_VARIABLE","$contentDisposition",88],["T_WHITESPACE"," ",88],"=",["T_WHITESPACE"," ",88],["T_VARIABLE","$helper",88],["T_OBJECT_OPERATOR","->",88],["T_STRING","getContentDisposition",88],"(",")",")",["T_WHITESPACE"," ",88],"{",["T_WHITESPACE","\n            ",88],["T_VARIABLE","$this",89],["T_OBJECT_OPERATOR","->",89],["T_STRING","getResponse",89],"(",")",["T_WHITESPACE","\n                ",89],["T_OBJECT_OPERATOR","->",90],["T_STRING","setHeader",90],"(",["T_CONSTANT_ENCAPSED_STRING","'Content-Disposition'",90],",",["T_WHITESPACE"," ",90],["T_VARIABLE","$contentDisposition",90],["T_WHITESPACE"," ",90],".",["T_WHITESPACE"," ",90],["T_CONSTANT_ENCAPSED_STRING","'; filename='",90],".",["T_VARIABLE","$fileName",90],")",";",["T_WHITESPACE","\n        ",90],"}",["T_WHITESPACE","\n\n        ",91],["T_VARIABLE","$this",93],["T_OBJECT_OPERATOR","->",93],["T_STRING","getResponse",93],"(",")",["T_WHITESPACE","\n            ",93],["T_OBJECT_OPERATOR","->",94],["T_STRING","clearBody",94],"(",")",";",["T_WHITESPACE","\n        ",94],["T_VARIABLE","$this",95],["T_OBJECT_OPERATOR","->",95],["T_STRING","getResponse",95],"(",")",["T_WHITESPACE","\n            ",95],["T_OBJECT_OPERATOR","->",96],["T_STRING","sendHeaders",96],"(",")",";",["T_WHITESPACE","\n\n        ",96],["T_VARIABLE","$helper",98],["T_OBJECT_OPERATOR","->",98],["T_STRING","output",98],"(",")",";",["T_WHITESPACE","\n    ",98],"}",["T_WHITESPACE","\n\n    ",99],["T_DOC_COMMENT","\/**\n     * Download link action\n     *\n     *\/",101],["T_WHITESPACE","\n    ",104],["T_PUBLIC","public",105],["T_WHITESPACE"," ",105],["T_FUNCTION","function",105],["T_WHITESPACE"," ",105],["T_STRING","linkAction",105],"(",")",["T_WHITESPACE","\n    ",105],"{",["T_WHITESPACE","\n        ",106],["T_VARIABLE","$linkId",107],["T_WHITESPACE"," ",107],"=",["T_WHITESPACE"," ",107],["T_VARIABLE","$this",107],["T_OBJECT_OPERATOR","->",107],["T_STRING","getRequest",107],"(",")",["T_OBJECT_OPERATOR","->",107],["T_STRING","getParam",107],"(",["T_CONSTANT_ENCAPSED_STRING","'id'",107],",",["T_WHITESPACE"," ",107],["T_LNUMBER","0",107],")",";",["T_WHITESPACE","\n        ",107],["T_VARIABLE","$link",108],["T_WHITESPACE"," ",108],"=",["T_WHITESPACE"," ",108],["T_STRING","Mage",108],["T_DOUBLE_COLON","::",108],["T_STRING","getModel",108],"(",["T_CONSTANT_ENCAPSED_STRING","'downloadable\/link'",108],")",["T_OBJECT_OPERATOR","->",108],["T_STRING","load",108],"(",["T_VARIABLE","$linkId",108],")",";",["T_WHITESPACE","\n        ",108],["T_IF","if",109],["T_WHITESPACE"," ",109],"(",["T_VARIABLE","$link",109],["T_OBJECT_OPERATOR","->",109],["T_STRING","getId",109],"(",")",")",["T_WHITESPACE"," ",109],"{",["T_WHITESPACE","\n            ",109],["T_VARIABLE","$resource",110],["T_WHITESPACE"," ",110],"=",["T_WHITESPACE"," ",110],["T_CONSTANT_ENCAPSED_STRING","''",110],";",["T_WHITESPACE","\n            ",110],["T_VARIABLE","$resourceType",111],["T_WHITESPACE"," ",111],"=",["T_WHITESPACE"," ",111],["T_CONSTANT_ENCAPSED_STRING","''",111],";",["T_WHITESPACE","\n            ",111],["T_IF","if",112],["T_WHITESPACE"," ",112],"(",["T_VARIABLE","$link",112],["T_OBJECT_OPERATOR","->",112],["T_STRING","getLinkType",112],"(",")",["T_WHITESPACE"," ",112],["T_IS_EQUAL","==",112],["T_WHITESPACE"," ",112],["T_STRING","Mage_Downloadable_Helper_Download",112],["T_DOUBLE_COLON","::",112],["T_STRING","LINK_TYPE_URL",112],")",["T_WHITESPACE"," ",112],"{",["T_WHITESPACE","\n                ",112],["T_VARIABLE","$resource",113],["T_WHITESPACE"," ",113],"=",["T_WHITESPACE"," ",113],["T_VARIABLE","$link",113],["T_OBJECT_OPERATOR","->",113],["T_STRING","getLinkUrl",113],"(",")",";",["T_WHITESPACE","\n                ",113],["T_VARIABLE","$resourceType",114],["T_WHITESPACE"," ",114],"=",["T_WHITESPACE"," ",114],["T_STRING","Mage_Downloadable_Helper_Download",114],["T_DOUBLE_COLON","::",114],["T_STRING","LINK_TYPE_URL",114],";",["T_WHITESPACE","\n            ",114],"}",["T_WHITESPACE"," ",115],["T_ELSEIF","elseif",115],["T_WHITESPACE"," ",115],"(",["T_VARIABLE","$link",115],["T_OBJECT_OPERATOR","->",115],["T_STRING","getLinkType",115],"(",")",["T_WHITESPACE"," ",115],["T_IS_EQUAL","==",115],["T_WHITESPACE"," ",115],["T_STRING","Mage_Downloadable_Helper_Download",115],["T_DOUBLE_COLON","::",115],["T_STRING","LINK_TYPE_FILE",115],")",["T_WHITESPACE"," ",115],"{",["T_WHITESPACE","\n                ",115],["T_VARIABLE","$resource",116],["T_WHITESPACE"," ",116],"=",["T_WHITESPACE"," ",116],["T_STRING","Mage",116],["T_DOUBLE_COLON","::",116],["T_STRING","helper",116],"(",["T_CONSTANT_ENCAPSED_STRING","'downloadable\/file'",116],")",["T_OBJECT_OPERATOR","->",116],["T_STRING","getFilePath",116],"(",["T_WHITESPACE","\n                    ",116],["T_STRING","Mage_Downloadable_Model_Link",117],["T_DOUBLE_COLON","::",117],["T_STRING","getBasePath",117],"(",")",",",["T_WHITESPACE"," ",117],["T_VARIABLE","$link",117],["T_OBJECT_OPERATOR","->",117],["T_STRING","getLinkFile",117],"(",")",["T_WHITESPACE","\n                ",117],")",";",["T_WHITESPACE","\n                ",118],["T_VARIABLE","$resourceType",119],["T_WHITESPACE"," ",119],"=",["T_WHITESPACE"," ",119],["T_STRING","Mage_Downloadable_Helper_Download",119],["T_DOUBLE_COLON","::",119],["T_STRING","LINK_TYPE_FILE",119],";",["T_WHITESPACE","\n            ",119],"}",["T_WHITESPACE","\n            ",120],["T_TRY","try",121],["T_WHITESPACE"," ",121],"{",["T_WHITESPACE","\n                ",121],["T_VARIABLE","$this",122],["T_OBJECT_OPERATOR","->",122],["T_STRING","_processDownload",122],"(",["T_VARIABLE","$resource",122],",",["T_WHITESPACE"," ",122],["T_VARIABLE","$resourceType",122],")",";",["T_WHITESPACE","\n            ",122],"}",["T_WHITESPACE"," ",123],["T_CATCH","catch",123],["T_WHITESPACE"," ",123],"(",["T_STRING","Mage_Core_Exception",123],["T_WHITESPACE"," ",123],["T_VARIABLE","$e",123],")",["T_WHITESPACE"," ",123],"{",["T_WHITESPACE","\n                ",123],["T_VARIABLE","$this",124],["T_OBJECT_OPERATOR","->",124],["T_STRING","_getCustomerSession",124],"(",")",["T_OBJECT_OPERATOR","->",124],["T_STRING","addError",124],"(",["T_STRING","Mage",124],["T_DOUBLE_COLON","::",124],["T_STRING","helper",124],"(",["T_CONSTANT_ENCAPSED_STRING","'downloadable'",124],")",["T_OBJECT_OPERATOR","->",124],["T_STRING","__",124],"(",["T_CONSTANT_ENCAPSED_STRING","'An error occurred while getting the requested content.'",124],")",")",";",["T_WHITESPACE","\n            ",124],"}",["T_WHITESPACE","\n        ",125],"}",["T_WHITESPACE","\n        ",126],["T_EXIT","exit",127],"(",["T_LNUMBER","0",127],")",";",["T_WHITESPACE","\n    ",127],"}",["T_WHITESPACE","\n\n",128],"}",["T_WHITESPACE","\n",130]]
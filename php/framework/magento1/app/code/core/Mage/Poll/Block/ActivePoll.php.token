[["T_OPEN_TAG","<?php\n",1],["T_DOC_COMMENT","\/**\n * Magento\n *\n * NOTICE OF LICENSE\n *\n * This source file is subject to the Open Software License (OSL 3.0)\n * that is bundled with this package in the file LICENSE.txt.\n * It is also available through the world-wide-web at this URL:\n * http:\/\/opensource.org\/licenses\/osl-3.0.php\n * If you did not receive a copy of the license and are unable to\n * obtain it through the world-wide-web, please send an email\n * to license@magento.com so we can send you a copy immediately.\n *\n * DISCLAIMER\n *\n * Do not edit or add to this file if you wish to upgrade Magento to newer\n * versions in the future. If you wish to customize Magento for your\n * needs please refer to http:\/\/www.magento.com for more information.\n *\n * @category    Mage\n * @package     Mage_Poll\n * @copyright  Copyright (c) 2006-2016 X.commerce, Inc. and affiliates (http:\/\/www.magento.com)\n * @license    http:\/\/opensource.org\/licenses\/osl-3.0.php  Open Software License (OSL 3.0)\n *\/",2],["T_WHITESPACE","\n\n",25],["T_DOC_COMMENT","\/**\n * Poll block\n *\n * @file        Poll.php\n * @author      Magento Core Team <core@magentocommerce.com>\n *\/",27],["T_WHITESPACE","\n\n",32],["T_CLASS","class",34],["T_WHITESPACE"," ",34],["T_STRING","Mage_Poll_Block_ActivePoll",34],["T_WHITESPACE"," ",34],["T_EXTENDS","extends",34],["T_WHITESPACE"," ",34],["T_STRING","Mage_Core_Block_Template",34],["T_WHITESPACE","\n",34],"{",["T_WHITESPACE","\n    ",35],["T_DOC_COMMENT","\/**\n     * Poll templates\n     *\n     * @var array\n     *\/",36],["T_WHITESPACE","\n    ",40],["T_PROTECTED","protected",41],["T_WHITESPACE"," ",41],["T_VARIABLE","$_templates",41],";",["T_WHITESPACE","\n\n    ",41],["T_DOC_COMMENT","\/**\n     * Current Poll Id\n     *\n     * @var int\n     *\/",43],["T_WHITESPACE","\n    ",47],["T_PROTECTED","protected",48],["T_WHITESPACE"," ",48],["T_VARIABLE","$_pollId",48],["T_WHITESPACE"," ",48],"=",["T_WHITESPACE"," ",48],["T_STRING","null",48],";",["T_WHITESPACE","\n\n    ",48],["T_DOC_COMMENT","\/**\n     * Already voted by current visitor Poll Ids array\n     *\n     * @var array|null\n     *\/",50],["T_WHITESPACE","\n    ",54],["T_PROTECTED","protected",55],["T_WHITESPACE"," ",55],["T_VARIABLE","$_votedIds",55],["T_WHITESPACE"," ",55],"=",["T_WHITESPACE"," ",55],["T_STRING","null",55],";",["T_WHITESPACE","\n\n    ",55],["T_DOC_COMMENT","\/**\n     * Poll model\n     *\n     * @var Mage_Poll_Model_Poll\n     *\/",57],["T_WHITESPACE","\n    ",61],["T_PROTECTED","protected",62],["T_WHITESPACE"," ",62],["T_VARIABLE","$_pollModel",62],";",["T_WHITESPACE","\n\n    ",62],["T_PUBLIC","public",64],["T_WHITESPACE"," ",64],["T_FUNCTION","function",64],["T_WHITESPACE"," ",64],["T_STRING","__construct",64],"(",")",["T_WHITESPACE","\n    ",64],"{",["T_WHITESPACE","\n        ",65],["T_STRING","parent",66],["T_DOUBLE_COLON","::",66],["T_STRING","__construct",66],"(",")",";",["T_WHITESPACE","\n        ",66],["T_VARIABLE","$this",67],["T_OBJECT_OPERATOR","->",67],["T_STRING","_pollModel",67],["T_WHITESPACE"," ",67],"=",["T_WHITESPACE"," ",67],["T_STRING","Mage",67],["T_DOUBLE_COLON","::",67],["T_STRING","getModel",67],"(",["T_CONSTANT_ENCAPSED_STRING","'poll\/poll'",67],")",";",["T_WHITESPACE","\n    ",67],"}",["T_WHITESPACE","\n\n    ",68],["T_DOC_COMMENT","\/**\n     * Set current Poll Id\n     *\n     * @param int $pollId\n     * @return Mage_Poll_Block_ActivePoll\n     *\/",70],["T_WHITESPACE","\n    ",75],["T_PUBLIC","public",76],["T_WHITESPACE"," ",76],["T_FUNCTION","function",76],["T_WHITESPACE"," ",76],["T_STRING","setPollId",76],"(",["T_VARIABLE","$pollId",76],")",["T_WHITESPACE","\n    ",76],"{",["T_WHITESPACE","\n        ",77],["T_VARIABLE","$this",78],["T_OBJECT_OPERATOR","->",78],["T_STRING","_pollId",78],["T_WHITESPACE"," ",78],"=",["T_WHITESPACE"," ",78],["T_VARIABLE","$pollId",78],";",["T_WHITESPACE","\n        ",78],["T_RETURN","return",79],["T_WHITESPACE"," ",79],["T_VARIABLE","$this",79],";",["T_WHITESPACE","\n    ",79],"}",["T_WHITESPACE","\n\n    ",80],["T_DOC_COMMENT","\/**\n     * Get current Poll Id\n     *\n     * @return int|null\n     *\/",82],["T_WHITESPACE","\n    ",86],["T_PUBLIC","public",87],["T_WHITESPACE"," ",87],["T_FUNCTION","function",87],["T_WHITESPACE"," ",87],["T_STRING","getPollId",87],"(",")",["T_WHITESPACE","\n    ",87],"{",["T_WHITESPACE","\n        ",88],["T_RETURN","return",89],["T_WHITESPACE"," ",89],["T_VARIABLE","$this",89],["T_OBJECT_OPERATOR","->",89],["T_STRING","_pollId",89],";",["T_WHITESPACE","\n    ",89],"}",["T_WHITESPACE","\n\n    ",90],["T_DOC_COMMENT","\/**\n     * Retrieve already voted Poll Ids\n     *\n     * @return array|null\n     *\/",92],["T_WHITESPACE","\n    ",96],["T_PUBLIC","public",97],["T_WHITESPACE"," ",97],["T_FUNCTION","function",97],["T_WHITESPACE"," ",97],["T_STRING","getVotedPollsIds",97],"(",")",["T_WHITESPACE","\n    ",97],"{",["T_WHITESPACE","\n        ",98],["T_IF","if",99],["T_WHITESPACE"," ",99],"(",["T_VARIABLE","$this",99],["T_OBJECT_OPERATOR","->",99],["T_STRING","_votedIds",99],["T_WHITESPACE"," ",99],["T_IS_IDENTICAL","===",99],["T_WHITESPACE"," ",99],["T_STRING","null",99],")",["T_WHITESPACE"," ",99],"{",["T_WHITESPACE","\n            ",99],["T_VARIABLE","$this",100],["T_OBJECT_OPERATOR","->",100],["T_STRING","_votedIds",100],["T_WHITESPACE"," ",100],"=",["T_WHITESPACE"," ",100],["T_VARIABLE","$this",100],["T_OBJECT_OPERATOR","->",100],["T_STRING","_pollModel",100],["T_OBJECT_OPERATOR","->",100],["T_STRING","getVotedPollsIds",100],"(",")",";",["T_WHITESPACE","\n        ",100],"}",["T_WHITESPACE","\n        ",101],["T_RETURN","return",102],["T_WHITESPACE"," ",102],["T_VARIABLE","$this",102],["T_OBJECT_OPERATOR","->",102],["T_STRING","_votedIds",102],";",["T_WHITESPACE","\n    ",102],"}",["T_WHITESPACE","\n\n    ",103],["T_DOC_COMMENT","\/**\n     * Get Ids of all active Polls\n     *\n     * @return array\n     *\/",105],["T_WHITESPACE","\n    ",109],["T_PUBLIC","public",110],["T_WHITESPACE"," ",110],["T_FUNCTION","function",110],["T_WHITESPACE"," ",110],["T_STRING","getActivePollsIds",110],"(",")",["T_WHITESPACE","\n    ",110],"{",["T_WHITESPACE","\n        ",111],["T_RETURN","return",112],["T_WHITESPACE"," ",112],["T_VARIABLE","$this",112],["T_OBJECT_OPERATOR","->",112],["T_STRING","_pollModel",112],["T_WHITESPACE","\n            ",112],["T_OBJECT_OPERATOR","->",113],["T_STRING","setExcludeFilter",113],"(",["T_VARIABLE","$this",113],["T_OBJECT_OPERATOR","->",113],["T_STRING","getVotedPollsIds",113],"(",")",")",["T_WHITESPACE","\n            ",113],["T_OBJECT_OPERATOR","->",114],["T_STRING","setStoreFilter",114],"(",["T_STRING","Mage",114],["T_DOUBLE_COLON","::",114],["T_STRING","app",114],"(",")",["T_OBJECT_OPERATOR","->",114],["T_STRING","getStore",114],"(",")",["T_OBJECT_OPERATOR","->",114],["T_STRING","getId",114],"(",")",")",["T_WHITESPACE","\n            ",114],["T_OBJECT_OPERATOR","->",115],["T_STRING","getAllIds",115],"(",")",";",["T_WHITESPACE","\n    ",115],"}",["T_WHITESPACE","\n\n    ",116],["T_DOC_COMMENT","\/**\n     * Get Poll Id to show\n     *\n     * @return int\n     *\/",118],["T_WHITESPACE","\n    ",122],["T_PUBLIC","public",123],["T_WHITESPACE"," ",123],["T_FUNCTION","function",123],["T_WHITESPACE"," ",123],["T_STRING","getPollToShow",123],"(",")",["T_WHITESPACE","\n    ",123],"{",["T_WHITESPACE","\n        ",124],["T_IF","if",125],["T_WHITESPACE"," ",125],"(",["T_VARIABLE","$this",125],["T_OBJECT_OPERATOR","->",125],["T_STRING","getPollId",125],"(",")",")",["T_WHITESPACE"," ",125],"{",["T_WHITESPACE","\n            ",125],["T_RETURN","return",126],["T_WHITESPACE"," ",126],["T_VARIABLE","$this",126],["T_OBJECT_OPERATOR","->",126],["T_STRING","getPollId",126],"(",")",";",["T_WHITESPACE","\n        ",126],"}",["T_WHITESPACE","\n        ",127],["T_COMMENT","\/\/ get last voted poll (from session only)\n",128],["T_WHITESPACE","        ",129],["T_VARIABLE","$pollId",129],["T_WHITESPACE"," ",129],"=",["T_WHITESPACE"," ",129],["T_STRING","Mage",129],["T_DOUBLE_COLON","::",129],["T_STRING","getSingleton",129],"(",["T_CONSTANT_ENCAPSED_STRING","'core\/session'",129],")",["T_OBJECT_OPERATOR","->",129],["T_STRING","getJustVotedPoll",129],"(",")",";",["T_WHITESPACE","\n        ",129],["T_IF","if",130],["T_WHITESPACE"," ",130],"(",["T_EMPTY","empty",130],"(",["T_VARIABLE","$pollId",130],")",")",["T_WHITESPACE"," ",130],"{",["T_WHITESPACE","\n            ",130],["T_COMMENT","\/\/ get random not voted yet poll\n",131],["T_WHITESPACE","            ",132],["T_VARIABLE","$votedIds",132],["T_WHITESPACE"," ",132],"=",["T_WHITESPACE"," ",132],["T_VARIABLE","$this",132],["T_OBJECT_OPERATOR","->",132],["T_STRING","getVotedPollsIds",132],"(",")",";",["T_WHITESPACE","\n            ",132],["T_VARIABLE","$pollId",133],["T_WHITESPACE"," ",133],"=",["T_WHITESPACE"," ",133],["T_VARIABLE","$this",133],["T_OBJECT_OPERATOR","->",133],["T_STRING","_pollModel",133],["T_WHITESPACE","\n                ",133],["T_OBJECT_OPERATOR","->",134],["T_STRING","setExcludeFilter",134],"(",["T_VARIABLE","$votedIds",134],")",["T_WHITESPACE","\n                ",134],["T_OBJECT_OPERATOR","->",135],["T_STRING","setStoreFilter",135],"(",["T_STRING","Mage",135],["T_DOUBLE_COLON","::",135],["T_STRING","app",135],"(",")",["T_OBJECT_OPERATOR","->",135],["T_STRING","getStore",135],"(",")",["T_OBJECT_OPERATOR","->",135],["T_STRING","getId",135],"(",")",")",["T_WHITESPACE","\n                ",135],["T_OBJECT_OPERATOR","->",136],["T_STRING","getRandomId",136],"(",")",";",["T_WHITESPACE","\n        ",136],"}",["T_WHITESPACE","\n        ",137],["T_VARIABLE","$this",138],["T_OBJECT_OPERATOR","->",138],["T_STRING","setPollId",138],"(",["T_VARIABLE","$pollId",138],")",";",["T_WHITESPACE","\n\n        ",138],["T_RETURN","return",140],["T_WHITESPACE"," ",140],["T_VARIABLE","$pollId",140],";",["T_WHITESPACE","\n    ",140],"}",["T_WHITESPACE","\n\n    ",141],["T_DOC_COMMENT","\/**\n     * Get Poll related data\n     *\n     * @param int $pollId\n     * @return array|bool\n     *\/",143],["T_WHITESPACE","\n    ",148],["T_PUBLIC","public",149],["T_WHITESPACE"," ",149],["T_FUNCTION","function",149],["T_WHITESPACE"," ",149],["T_STRING","getPollData",149],"(",["T_VARIABLE","$pollId",149],")",["T_WHITESPACE","\n    ",149],"{",["T_WHITESPACE","\n        ",150],["T_IF","if",151],["T_WHITESPACE"," ",151],"(",["T_EMPTY","empty",151],"(",["T_VARIABLE","$pollId",151],")",")",["T_WHITESPACE"," ",151],"{",["T_WHITESPACE","\n            ",151],["T_RETURN","return",152],["T_WHITESPACE"," ",152],["T_STRING","false",152],";",["T_WHITESPACE","\n        ",152],"}",["T_WHITESPACE","\n        ",153],["T_VARIABLE","$poll",154],["T_WHITESPACE"," ",154],"=",["T_WHITESPACE"," ",154],["T_VARIABLE","$this",154],["T_OBJECT_OPERATOR","->",154],["T_STRING","_pollModel",154],["T_OBJECT_OPERATOR","->",154],["T_STRING","load",154],"(",["T_VARIABLE","$pollId",154],")",";",["T_WHITESPACE","\n\n        ",154],["T_VARIABLE","$pollAnswers",156],["T_WHITESPACE"," ",156],"=",["T_WHITESPACE"," ",156],["T_STRING","Mage",156],["T_DOUBLE_COLON","::",156],["T_STRING","getModel",156],"(",["T_CONSTANT_ENCAPSED_STRING","'poll\/poll_answer'",156],")",["T_WHITESPACE","\n            ",156],["T_OBJECT_OPERATOR","->",157],["T_STRING","getResourceCollection",157],"(",")",["T_WHITESPACE","\n            ",157],["T_OBJECT_OPERATOR","->",158],["T_STRING","addPollFilter",158],"(",["T_VARIABLE","$pollId",158],")",["T_WHITESPACE","\n            ",158],["T_OBJECT_OPERATOR","->",159],["T_STRING","load",159],"(",")",["T_WHITESPACE","\n            ",159],["T_OBJECT_OPERATOR","->",160],["T_STRING","countPercent",160],"(",["T_VARIABLE","$poll",160],")",";",["T_WHITESPACE","\n\n        ",160],["T_COMMENT","\/\/ correct rounded percents to be always equal 100\n",162],["T_WHITESPACE","        ",163],["T_VARIABLE","$percentsSorted",163],["T_WHITESPACE"," ",163],"=",["T_WHITESPACE"," ",163],["T_ARRAY","array",163],"(",")",";",["T_WHITESPACE","\n        ",163],["T_VARIABLE","$answersArr",164],["T_WHITESPACE"," ",164],"=",["T_WHITESPACE"," ",164],["T_ARRAY","array",164],"(",")",";",["T_WHITESPACE","\n        ",164],["T_FOREACH","foreach",165],["T_WHITESPACE"," ",165],"(",["T_VARIABLE","$pollAnswers",165],["T_WHITESPACE"," ",165],["T_AS","as",165],["T_WHITESPACE"," ",165],["T_VARIABLE","$key",165],["T_WHITESPACE"," ",165],["T_DOUBLE_ARROW","=>",165],["T_WHITESPACE"," ",165],["T_VARIABLE","$answer",165],")",["T_WHITESPACE"," ",165],"{",["T_WHITESPACE","\n            ",165],["T_VARIABLE","$percentsSorted",166],"[",["T_VARIABLE","$key",166],"]",["T_WHITESPACE"," ",166],"=",["T_WHITESPACE"," ",166],["T_VARIABLE","$answer",166],["T_OBJECT_OPERATOR","->",166],["T_STRING","getPercent",166],"(",")",";",["T_WHITESPACE","\n            ",166],["T_VARIABLE","$answersArr",167],"[",["T_VARIABLE","$key",167],"]",["T_WHITESPACE"," ",167],"=",["T_WHITESPACE"," ",167],["T_VARIABLE","$answer",167],";",["T_WHITESPACE","\n        ",167],"}",["T_WHITESPACE","\n        ",168],["T_STRING","asort",169],"(",["T_VARIABLE","$percentsSorted",169],")",";",["T_WHITESPACE","\n        ",169],["T_VARIABLE","$total",170],["T_WHITESPACE"," ",170],"=",["T_WHITESPACE"," ",170],["T_LNUMBER","0",170],";",["T_WHITESPACE","\n        ",170],["T_FOREACH","foreach",171],["T_WHITESPACE"," ",171],"(",["T_VARIABLE","$percentsSorted",171],["T_WHITESPACE"," ",171],["T_AS","as",171],["T_WHITESPACE"," ",171],["T_VARIABLE","$key",171],["T_WHITESPACE"," ",171],["T_DOUBLE_ARROW","=>",171],["T_WHITESPACE"," ",171],["T_VARIABLE","$value",171],")",["T_WHITESPACE"," ",171],"{",["T_WHITESPACE","\n            ",171],["T_VARIABLE","$total",172],["T_WHITESPACE"," ",172],["T_PLUS_EQUAL","+=",172],["T_WHITESPACE"," ",172],["T_VARIABLE","$value",172],";",["T_WHITESPACE","\n        ",172],"}",["T_WHITESPACE","\n        ",173],["T_COMMENT","\/\/ change the max value only\n",174],["T_WHITESPACE","        ",175],["T_IF","if",175],["T_WHITESPACE"," ",175],"(",["T_VARIABLE","$total",175],["T_WHITESPACE"," ",175],">",["T_WHITESPACE"," ",175],["T_LNUMBER","0",175],["T_WHITESPACE"," ",175],["T_BOOLEAN_AND","&&",175],["T_WHITESPACE"," ",175],["T_VARIABLE","$total",175],["T_WHITESPACE"," ",175],["T_IS_NOT_IDENTICAL","!==",175],["T_WHITESPACE"," ",175],["T_LNUMBER","100",175],")",["T_WHITESPACE"," ",175],"{",["T_WHITESPACE","\n            ",175],["T_VARIABLE","$answersArr",176],"[",["T_VARIABLE","$key",176],"]",["T_OBJECT_OPERATOR","->",176],["T_STRING","setPercent",176],"(",["T_VARIABLE","$value",176],["T_WHITESPACE"," ",176],"+",["T_WHITESPACE"," ",176],["T_LNUMBER","100",176],["T_WHITESPACE"," ",176],"-",["T_WHITESPACE"," ",176],["T_VARIABLE","$total",176],")",";",["T_WHITESPACE","\n        ",176],"}",["T_WHITESPACE","\n\n        ",177],["T_RETURN","return",179],["T_WHITESPACE"," ",179],["T_ARRAY","array",179],"(",["T_WHITESPACE","\n            ",179],["T_CONSTANT_ENCAPSED_STRING","'poll'",180],["T_WHITESPACE"," ",180],["T_DOUBLE_ARROW","=>",180],["T_WHITESPACE"," ",180],["T_VARIABLE","$poll",180],",",["T_WHITESPACE","\n            ",180],["T_CONSTANT_ENCAPSED_STRING","'poll_answers'",181],["T_WHITESPACE"," ",181],["T_DOUBLE_ARROW","=>",181],["T_WHITESPACE"," ",181],["T_VARIABLE","$pollAnswers",181],",",["T_WHITESPACE","\n            ",181],["T_CONSTANT_ENCAPSED_STRING","'action'",182],["T_WHITESPACE"," ",182],["T_DOUBLE_ARROW","=>",182],["T_WHITESPACE"," ",182],["T_STRING","Mage",182],["T_DOUBLE_COLON","::",182],["T_STRING","getUrl",182],"(",["T_CONSTANT_ENCAPSED_STRING","'poll\/vote\/add'",182],",",["T_WHITESPACE"," ",182],["T_ARRAY","array",182],"(",["T_CONSTANT_ENCAPSED_STRING","'poll_id'",182],["T_WHITESPACE"," ",182],["T_DOUBLE_ARROW","=>",182],["T_WHITESPACE"," ",182],["T_VARIABLE","$pollId",182],",",["T_WHITESPACE"," ",182],["T_CONSTANT_ENCAPSED_STRING","'_secure'",182],["T_WHITESPACE"," ",182],["T_DOUBLE_ARROW","=>",182],["T_WHITESPACE"," ",182],["T_STRING","true",182],")",")",["T_WHITESPACE","\n        ",182],")",";",["T_WHITESPACE","\n    ",183],"}",["T_WHITESPACE","\n\n\n    ",184],["T_DOC_COMMENT","\/**\n     * Add poll template\n     *\n     * @param string $template\n     * @param string $type\n     * @return Mage_Poll_Block_ActivePoll\n     *\/",187],["T_WHITESPACE","\n    ",193],["T_PUBLIC","public",194],["T_WHITESPACE"," ",194],["T_FUNCTION","function",194],["T_WHITESPACE"," ",194],["T_STRING","setPollTemplate",194],"(",["T_VARIABLE","$template",194],",",["T_WHITESPACE"," ",194],["T_VARIABLE","$type",194],")",["T_WHITESPACE","\n    ",194],"{",["T_WHITESPACE","\n        ",195],["T_VARIABLE","$this",196],["T_OBJECT_OPERATOR","->",196],["T_STRING","_templates",196],"[",["T_VARIABLE","$type",196],"]",["T_WHITESPACE"," ",196],"=",["T_WHITESPACE"," ",196],["T_VARIABLE","$template",196],";",["T_WHITESPACE","\n        ",196],["T_RETURN","return",197],["T_WHITESPACE"," ",197],["T_VARIABLE","$this",197],";",["T_WHITESPACE","\n    ",197],"}",["T_WHITESPACE","\n\n    ",198],["T_DOC_COMMENT","\/**\n     * Render block HTML\n     *\n     * @return string\n     *\/",200],["T_WHITESPACE","\n    ",204],["T_PROTECTED","protected",205],["T_WHITESPACE"," ",205],["T_FUNCTION","function",205],["T_WHITESPACE"," ",205],["T_STRING","_toHtml",205],"(",")",["T_WHITESPACE","\n    ",205],"{",["T_WHITESPACE","\n        ",206],["T_DOC_COMMENT","\/** @var $coreSessionModel Mage_Core_Model_Session *\/",207],["T_WHITESPACE","\n        ",207],["T_VARIABLE","$coreSessionModel",208],["T_WHITESPACE"," ",208],"=",["T_WHITESPACE"," ",208],["T_STRING","Mage",208],["T_DOUBLE_COLON","::",208],["T_STRING","getSingleton",208],"(",["T_CONSTANT_ENCAPSED_STRING","'core\/session'",208],")",";",["T_WHITESPACE","\n        ",208],["T_VARIABLE","$justVotedPollId",209],["T_WHITESPACE"," ",209],"=",["T_WHITESPACE"," ",209],["T_VARIABLE","$coreSessionModel",209],["T_OBJECT_OPERATOR","->",209],["T_STRING","getJustVotedPoll",209],"(",")",";",["T_WHITESPACE","\n        ",209],["T_IF","if",210],["T_WHITESPACE"," ",210],"(",["T_VARIABLE","$justVotedPollId",210],["T_WHITESPACE"," ",210],["T_BOOLEAN_AND","&&",210],["T_WHITESPACE"," ",210],"!",["T_VARIABLE","$this",210],["T_OBJECT_OPERATOR","->",210],["T_STRING","_pollModel",210],["T_OBJECT_OPERATOR","->",210],["T_STRING","isVoted",210],"(",["T_VARIABLE","$justVotedPollId",210],")",")",["T_WHITESPACE"," ",210],"{",["T_WHITESPACE","\n            ",210],["T_VARIABLE","$this",211],["T_OBJECT_OPERATOR","->",211],["T_STRING","_pollModel",211],["T_OBJECT_OPERATOR","->",211],["T_STRING","setVoted",211],"(",["T_VARIABLE","$justVotedPollId",211],")",";",["T_WHITESPACE","\n        ",211],"}",["T_WHITESPACE","\n\n        ",212],["T_VARIABLE","$pollId",214],["T_WHITESPACE"," ",214],"=",["T_WHITESPACE"," ",214],["T_VARIABLE","$this",214],["T_OBJECT_OPERATOR","->",214],["T_STRING","getPollToShow",214],"(",")",";",["T_WHITESPACE","\n        ",214],["T_VARIABLE","$data",215],["T_WHITESPACE"," ",215],"=",["T_WHITESPACE"," ",215],["T_VARIABLE","$this",215],["T_OBJECT_OPERATOR","->",215],["T_STRING","getPollData",215],"(",["T_VARIABLE","$pollId",215],")",";",["T_WHITESPACE","\n        ",215],["T_VARIABLE","$this",216],["T_OBJECT_OPERATOR","->",216],["T_STRING","assign",216],"(",["T_VARIABLE","$data",216],")",";",["T_WHITESPACE","\n\n        ",216],["T_VARIABLE","$coreSessionModel",218],["T_OBJECT_OPERATOR","->",218],["T_STRING","setJustVotedPoll",218],"(",["T_STRING","false",218],")",";",["T_WHITESPACE","\n\n        ",218],["T_IF","if",220],["T_WHITESPACE"," ",220],"(",["T_VARIABLE","$this",220],["T_OBJECT_OPERATOR","->",220],["T_STRING","_pollModel",220],["T_OBJECT_OPERATOR","->",220],["T_STRING","isVoted",220],"(",["T_VARIABLE","$pollId",220],")",["T_WHITESPACE"," ",220],["T_IS_IDENTICAL","===",220],["T_WHITESPACE"," ",220],["T_STRING","true",220],["T_WHITESPACE"," ",220],["T_BOOLEAN_OR","||",220],["T_WHITESPACE"," ",220],["T_VARIABLE","$justVotedPollId",220],")",["T_WHITESPACE"," ",220],"{",["T_WHITESPACE","\n            ",220],["T_VARIABLE","$this",221],["T_OBJECT_OPERATOR","->",221],["T_STRING","setTemplate",221],"(",["T_VARIABLE","$this",221],["T_OBJECT_OPERATOR","->",221],["T_STRING","_templates",221],"[",["T_CONSTANT_ENCAPSED_STRING","'results'",221],"]",")",";",["T_WHITESPACE","\n        ",221],"}",["T_WHITESPACE"," ",222],["T_ELSE","else",222],["T_WHITESPACE"," ",222],"{",["T_WHITESPACE","\n            ",222],["T_VARIABLE","$this",223],["T_OBJECT_OPERATOR","->",223],["T_STRING","setTemplate",223],"(",["T_VARIABLE","$this",223],["T_OBJECT_OPERATOR","->",223],["T_STRING","_templates",223],"[",["T_CONSTANT_ENCAPSED_STRING","'poll'",223],"]",")",";",["T_WHITESPACE","\n        ",223],"}",["T_WHITESPACE","\n        ",224],["T_RETURN","return",225],["T_WHITESPACE"," ",225],["T_STRING","parent",225],["T_DOUBLE_COLON","::",225],["T_STRING","_toHtml",225],"(",")",";",["T_WHITESPACE","\n    ",225],"}",["T_WHITESPACE","\n\n\n    ",226],["T_DOC_COMMENT","\/**\n     * Get cache key informative items that must be preserved in cache placeholders\n     * for block to be rerendered by placeholder\n     *\n     * @return array\n     *\/",229],["T_WHITESPACE","\n    ",234],["T_PUBLIC","public",235],["T_WHITESPACE"," ",235],["T_FUNCTION","function",235],["T_WHITESPACE"," ",235],["T_STRING","getCacheKeyInfo",235],"(",")",["T_WHITESPACE","\n    ",235],"{",["T_WHITESPACE","\n        ",236],["T_VARIABLE","$items",237],["T_WHITESPACE"," ",237],"=",["T_WHITESPACE"," ",237],["T_ARRAY","array",237],"(",["T_WHITESPACE","\n            ",237],["T_CONSTANT_ENCAPSED_STRING","'templates'",238],["T_WHITESPACE"," ",238],["T_DOUBLE_ARROW","=>",238],["T_WHITESPACE"," ",238],["T_STRING","serialize",238],"(",["T_VARIABLE","$this",238],["T_OBJECT_OPERATOR","->",238],["T_STRING","_templates",238],")",["T_WHITESPACE","\n        ",238],")",";",["T_WHITESPACE","\n\n        ",239],["T_VARIABLE","$items",241],["T_WHITESPACE"," ",241],"=",["T_WHITESPACE"," ",241],["T_STRING","parent",241],["T_DOUBLE_COLON","::",241],["T_STRING","getCacheKeyInfo",241],"(",")",["T_WHITESPACE"," ",241],"+",["T_WHITESPACE"," ",241],["T_VARIABLE","$items",241],";",["T_WHITESPACE","\n\n        ",241],["T_RETURN","return",243],["T_WHITESPACE"," ",243],["T_VARIABLE","$items",243],";",["T_WHITESPACE","\n    ",243],"}",["T_WHITESPACE","\n\n",244],"}",["T_WHITESPACE","\n",246]]
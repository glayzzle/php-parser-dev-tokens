[["T_OPEN_TAG","<?php\n",1],["T_DOC_COMMENT","\/**\n * Magento\n *\n * NOTICE OF LICENSE\n *\n * This source file is subject to the Open Software License (OSL 3.0)\n * that is bundled with this package in the file LICENSE.txt.\n * It is also available through the world-wide-web at this URL:\n * http:\/\/opensource.org\/licenses\/osl-3.0.php\n * If you did not receive a copy of the license and are unable to\n * obtain it through the world-wide-web, please send an email\n * to license@magento.com so we can send you a copy immediately.\n *\n * DISCLAIMER\n *\n * Do not edit or add to this file if you wish to upgrade Magento to newer\n * versions in the future. If you wish to customize Magento for your\n * needs please refer to http:\/\/www.magento.com for more information.\n *\n * @category    Mage\n * @package     Mage_Poll\n * @copyright  Copyright (c) 2006-2016 X.commerce, Inc. and affiliates (http:\/\/www.magento.com)\n * @license    http:\/\/opensource.org\/licenses\/osl-3.0.php  Open Software License (OSL 3.0)\n *\/",2],["T_WHITESPACE","\n\n",25],["T_DOC_COMMENT","\/**\n * Poll model\n *\n * @method Mage_Poll_Model_Resource_Poll _getResource()\n * @method Mage_Poll_Model_Resource_Poll getResource()\n * @method string getPollTitle()\n * @method Mage_Poll_Model_Poll setPollTitle(string $value)\n * @method Mage_Poll_Model_Poll setVotesCount(int $value)\n * @method int getStoreId()\n * @method Mage_Poll_Model_Poll setStoreId(int $value)\n * @method string getDatePosted()\n * @method Mage_Poll_Model_Poll setDatePosted(string $value)\n * @method string getDateClosed()\n * @method Mage_Poll_Model_Poll setDateClosed(string $value)\n * @method int getActive()\n * @method Mage_Poll_Model_Poll setActive(int $value)\n * @method int getClosed()\n * @method Mage_Poll_Model_Poll setClosed(int $value)\n * @method int getAnswersDisplay()\n * @method Mage_Poll_Model_Poll setAnswersDisplay(int $value)\n *\n * @category    Mage\n * @package     Mage_Poll\n * @author      Magento Core Team <core@magentocommerce.com>\n *\/",27],["T_WHITESPACE","\n\n",51],["T_CLASS","class",53],["T_WHITESPACE"," ",53],["T_STRING","Mage_Poll_Model_Poll",53],["T_WHITESPACE"," ",53],["T_EXTENDS","extends",53],["T_WHITESPACE"," ",53],["T_STRING","Mage_Core_Model_Abstract",53],["T_WHITESPACE","\n",53],"{",["T_WHITESPACE","\n    ",54],["T_CONST","const",55],["T_WHITESPACE"," ",55],["T_STRING","XML_PATH_POLL_CHECK_BY_IP",55],["T_WHITESPACE"," ",55],"=",["T_WHITESPACE"," ",55],["T_CONSTANT_ENCAPSED_STRING","'web\/polls\/poll_check_by_ip'",55],";",["T_WHITESPACE","\n\n    ",55],["T_PROTECTED","protected",57],["T_WHITESPACE"," ",57],["T_VARIABLE","$_pollCookieDefaultName",57],["T_WHITESPACE"," ",57],"=",["T_WHITESPACE"," ",57],["T_CONSTANT_ENCAPSED_STRING","'poll'",57],";",["T_WHITESPACE","\n    ",57],["T_PROTECTED","protected",58],["T_WHITESPACE"," ",58],["T_VARIABLE","$_answersCollection",58],["T_WHITESPACE","   ",58],"=",["T_WHITESPACE"," ",58],["T_ARRAY","array",58],"(",")",";",["T_WHITESPACE","\n    ",58],["T_PROTECTED","protected",59],["T_WHITESPACE"," ",59],["T_VARIABLE","$_storeCollection",59],["T_WHITESPACE","     ",59],"=",["T_WHITESPACE"," ",59],["T_ARRAY","array",59],"(",")",";",["T_WHITESPACE","\n\n    ",59],["T_PROTECTED","protected",61],["T_WHITESPACE"," ",61],["T_FUNCTION","function",61],["T_WHITESPACE"," ",61],["T_STRING","_construct",61],"(",")",["T_WHITESPACE","\n    ",61],"{",["T_WHITESPACE","\n        ",62],["T_VARIABLE","$this",63],["T_OBJECT_OPERATOR","->",63],["T_STRING","_init",63],"(",["T_CONSTANT_ENCAPSED_STRING","'poll\/poll'",63],")",";",["T_WHITESPACE","\n    ",63],"}",["T_WHITESPACE","\n\n    ",64],["T_DOC_COMMENT","\/**\n     * Retrieve Cookie Object\n     *\n     * @return Mage_Core_Model_Cookie\n     *\/",66],["T_WHITESPACE","\n    ",70],["T_PUBLIC","public",71],["T_WHITESPACE"," ",71],["T_FUNCTION","function",71],["T_WHITESPACE"," ",71],["T_STRING","getCookie",71],"(",")",["T_WHITESPACE","\n    ",71],"{",["T_WHITESPACE","\n        ",72],["T_RETURN","return",73],["T_WHITESPACE"," ",73],["T_STRING","Mage",73],["T_DOUBLE_COLON","::",73],["T_STRING","app",73],"(",")",["T_OBJECT_OPERATOR","->",73],["T_STRING","getCookie",73],"(",")",";",["T_WHITESPACE","\n    ",73],"}",["T_WHITESPACE","\n\n    ",74],["T_DOC_COMMENT","\/**\n     * Get Cookie Name\n     *\n     * @param int $pollId\n     * @return string\n     *\/",76],["T_WHITESPACE","\n    ",81],["T_PUBLIC","public",82],["T_WHITESPACE"," ",82],["T_FUNCTION","function",82],["T_WHITESPACE"," ",82],["T_STRING","getCookieName",82],"(",["T_VARIABLE","$pollId",82],["T_WHITESPACE"," ",82],"=",["T_WHITESPACE"," ",82],["T_STRING","null",82],")",["T_WHITESPACE","\n    ",82],"{",["T_WHITESPACE","\n        ",83],["T_RETURN","return",84],["T_WHITESPACE"," ",84],["T_VARIABLE","$this",84],["T_OBJECT_OPERATOR","->",84],["T_STRING","_pollCookieDefaultName",84],["T_WHITESPACE"," ",84],".",["T_WHITESPACE"," ",84],["T_VARIABLE","$this",84],["T_OBJECT_OPERATOR","->",84],["T_STRING","getPollId",84],"(",["T_VARIABLE","$pollId",84],")",";",["T_WHITESPACE","\n    ",84],"}",["T_WHITESPACE","\n\n    ",85],["T_DOC_COMMENT","\/**\n     * Retrieve defined or current Id\n     *\n     * @deprecated since 1.7.0.0\n     * @param int $pollId\n     * @return int\n     *\/",87],["T_WHITESPACE","\n    ",93],["T_PUBLIC","public",94],["T_WHITESPACE"," ",94],["T_FUNCTION","function",94],["T_WHITESPACE"," ",94],["T_STRING","getPoolId",94],"(",["T_VARIABLE","$pollId",94],["T_WHITESPACE"," ",94],"=",["T_WHITESPACE"," ",94],["T_STRING","null",94],")",["T_WHITESPACE","\n    ",94],"{",["T_WHITESPACE","\n        ",95],["T_RETURN","return",96],["T_WHITESPACE"," ",96],["T_VARIABLE","$this",96],["T_OBJECT_OPERATOR","->",96],["T_STRING","getPollId",96],"(",["T_VARIABLE","$pollId",96],")",";",["T_WHITESPACE","\n    ",96],"}",["T_WHITESPACE","\n\n    ",97],["T_DOC_COMMENT","\/**\n     * Retrieve defined or current Id\n     *\n     * @param int|null $pollId\n     * @return int\n     *\/",99],["T_WHITESPACE","\n    ",104],["T_PUBLIC","public",105],["T_WHITESPACE"," ",105],["T_FUNCTION","function",105],["T_WHITESPACE"," ",105],["T_STRING","getPollId",105],"(",["T_VARIABLE","$pollId",105],["T_WHITESPACE"," ",105],"=",["T_WHITESPACE"," ",105],["T_STRING","null",105],")",["T_WHITESPACE","\n    ",105],"{",["T_WHITESPACE","\n        ",106],["T_IF","if",107],["T_WHITESPACE"," ",107],"(",["T_STRING","is_null",107],"(",["T_VARIABLE","$pollId",107],")",")",["T_WHITESPACE"," ",107],"{",["T_WHITESPACE","\n            ",107],["T_VARIABLE","$pollId",108],["T_WHITESPACE"," ",108],"=",["T_WHITESPACE"," ",108],["T_VARIABLE","$this",108],["T_OBJECT_OPERATOR","->",108],["T_STRING","getId",108],"(",")",";",["T_WHITESPACE","\n        ",108],"}",["T_WHITESPACE","\n        ",109],["T_RETURN","return",110],["T_WHITESPACE"," ",110],["T_VARIABLE","$pollId",110],";",["T_WHITESPACE","\n    ",110],"}",["T_WHITESPACE","\n\n    ",111],["T_DOC_COMMENT","\/**\n     * Check if validation by IP option is enabled in config\n     *\n     * @return bool\n     *\/",113],["T_WHITESPACE","\n    ",117],["T_PUBLIC","public",118],["T_WHITESPACE"," ",118],["T_FUNCTION","function",118],["T_WHITESPACE"," ",118],["T_STRING","isValidationByIp",118],"(",")",["T_WHITESPACE","\n    ",118],"{",["T_WHITESPACE","\n        ",119],["T_RETURN","return",120],["T_WHITESPACE"," ",120],"(",["T_LNUMBER","1",120],["T_WHITESPACE"," ",120],["T_IS_EQUAL","==",120],["T_WHITESPACE"," ",120],["T_STRING","Mage",120],["T_DOUBLE_COLON","::",120],["T_STRING","getStoreConfig",120],"(",["T_STRING","self",120],["T_DOUBLE_COLON","::",120],["T_STRING","XML_PATH_POLL_CHECK_BY_IP",120],")",")",";",["T_WHITESPACE","\n    ",120],"}",["T_WHITESPACE","\n\n    ",121],["T_DOC_COMMENT","\/**\n     * Declare poll as voted\n     *\n     * @param   int $pollId\n     * @return  Mage_Poll_Model_Poll\n     *\/",123],["T_WHITESPACE","\n    ",128],["T_PUBLIC","public",129],["T_WHITESPACE"," ",129],["T_FUNCTION","function",129],["T_WHITESPACE"," ",129],["T_STRING","setVoted",129],"(",["T_VARIABLE","$pollId",129],"=",["T_STRING","null",129],")",["T_WHITESPACE","\n    ",129],"{",["T_WHITESPACE","\n        ",130],["T_VARIABLE","$this",131],["T_OBJECT_OPERATOR","->",131],["T_STRING","getCookie",131],"(",")",["T_OBJECT_OPERATOR","->",131],["T_STRING","set",131],"(",["T_VARIABLE","$this",131],["T_OBJECT_OPERATOR","->",131],["T_STRING","getCookieName",131],"(",["T_VARIABLE","$pollId",131],")",",",["T_WHITESPACE"," ",131],["T_VARIABLE","$this",131],["T_OBJECT_OPERATOR","->",131],["T_STRING","getPollId",131],"(",["T_VARIABLE","$pollId",131],")",")",";",["T_WHITESPACE","\n\n        ",131],["T_RETURN","return",133],["T_WHITESPACE"," ",133],["T_VARIABLE","$this",133],";",["T_WHITESPACE","\n    ",133],"}",["T_WHITESPACE","\n\n    ",134],["T_DOC_COMMENT","\/**\n     * Check if poll is voted\n     *\n     * @param   int $pollId\n     * @return  bool\n     *\/",136],["T_WHITESPACE","\n    ",141],["T_PUBLIC","public",142],["T_WHITESPACE"," ",142],["T_FUNCTION","function",142],["T_WHITESPACE"," ",142],["T_STRING","isVoted",142],"(",["T_VARIABLE","$pollId",142],["T_WHITESPACE"," ",142],"=",["T_WHITESPACE"," ",142],["T_STRING","null",142],")",["T_WHITESPACE","\n    ",142],"{",["T_WHITESPACE","\n        ",143],["T_VARIABLE","$pollId",144],["T_WHITESPACE"," ",144],"=",["T_WHITESPACE"," ",144],["T_VARIABLE","$this",144],["T_OBJECT_OPERATOR","->",144],["T_STRING","getPollId",144],"(",["T_VARIABLE","$pollId",144],")",";",["T_WHITESPACE","\n\n        ",144],["T_COMMENT","\/\/ check if it is in cookie\n",146],["T_WHITESPACE","        ",147],["T_VARIABLE","$cookie",147],["T_WHITESPACE"," ",147],"=",["T_WHITESPACE"," ",147],["T_VARIABLE","$this",147],["T_OBJECT_OPERATOR","->",147],["T_STRING","getCookie",147],"(",")",["T_OBJECT_OPERATOR","->",147],["T_STRING","get",147],"(",["T_VARIABLE","$this",147],["T_OBJECT_OPERATOR","->",147],["T_STRING","getCookieName",147],"(",["T_VARIABLE","$pollId",147],")",")",";",["T_WHITESPACE","\n        ",147],["T_IF","if",148],["T_WHITESPACE"," ",148],"(",["T_STRING","false",148],["T_WHITESPACE"," ",148],["T_IS_NOT_IDENTICAL","!==",148],["T_WHITESPACE"," ",148],["T_VARIABLE","$cookie",148],")",["T_WHITESPACE"," ",148],"{",["T_WHITESPACE","\n            ",148],["T_RETURN","return",149],["T_WHITESPACE"," ",149],["T_STRING","true",149],";",["T_WHITESPACE","\n        ",149],"}",["T_WHITESPACE","\n\n        ",150],["T_COMMENT","\/\/ check by ip\n",152],["T_WHITESPACE","        ",153],["T_IF","if",153],["T_WHITESPACE"," ",153],"(",["T_STRING","count",153],"(",["T_VARIABLE","$this",153],["T_OBJECT_OPERATOR","->",153],["T_STRING","_getResource",153],"(",")",["T_OBJECT_OPERATOR","->",153],["T_STRING","getVotedPollIdsByIp",153],"(",["T_STRING","Mage",153],["T_DOUBLE_COLON","::",153],["T_STRING","helper",153],"(",["T_CONSTANT_ENCAPSED_STRING","'core\/http'",153],")",["T_OBJECT_OPERATOR","->",153],["T_STRING","getRemoteAddr",153],"(",")",",",["T_WHITESPACE"," ",153],["T_VARIABLE","$pollId",153],")",")",")",["T_WHITESPACE"," ",153],"{",["T_WHITESPACE","\n            ",153],["T_RETURN","return",154],["T_WHITESPACE"," ",154],["T_STRING","true",154],";",["T_WHITESPACE","\n        ",154],"}",["T_WHITESPACE","\n\n        ",155],["T_RETURN","return",157],["T_WHITESPACE"," ",157],["T_STRING","false",157],";",["T_WHITESPACE","\n    ",157],"}",["T_WHITESPACE","\n\n    ",158],["T_DOC_COMMENT","\/**\n     * Get random active pool identifier\n     *\n     * @return int\n     *\/",160],["T_WHITESPACE","\n    ",164],["T_PUBLIC","public",165],["T_WHITESPACE"," ",165],["T_FUNCTION","function",165],["T_WHITESPACE"," ",165],["T_STRING","getRandomId",165],"(",")",["T_WHITESPACE","\n    ",165],"{",["T_WHITESPACE","\n        ",166],["T_RETURN","return",167],["T_WHITESPACE"," ",167],["T_VARIABLE","$this",167],["T_OBJECT_OPERATOR","->",167],["T_STRING","_getResource",167],"(",")",["T_OBJECT_OPERATOR","->",167],["T_STRING","getRandomId",167],"(",["T_VARIABLE","$this",167],")",";",["T_WHITESPACE","\n    ",167],"}",["T_WHITESPACE","\n\n    ",168],["T_DOC_COMMENT","\/**\n     * Get all ids for not closed polls\n     *\n     * @return array\n     *\/",170],["T_WHITESPACE","\n    ",174],["T_PUBLIC","public",175],["T_WHITESPACE"," ",175],["T_FUNCTION","function",175],["T_WHITESPACE"," ",175],["T_STRING","getAllIds",175],"(",")",["T_WHITESPACE","\n    ",175],"{",["T_WHITESPACE","\n        ",176],["T_RETURN","return",177],["T_WHITESPACE"," ",177],["T_VARIABLE","$this",177],["T_OBJECT_OPERATOR","->",177],["T_STRING","_getResource",177],"(",")",["T_OBJECT_OPERATOR","->",177],["T_STRING","getAllIds",177],"(",["T_VARIABLE","$this",177],")",";",["T_WHITESPACE","\n    ",177],"}",["T_WHITESPACE","\n\n    ",178],["T_DOC_COMMENT","\/**\n     * Add vote to poll\n     *\n     * @return unknown\n     *\/",180],["T_WHITESPACE","\n    ",184],["T_PUBLIC","public",185],["T_WHITESPACE"," ",185],["T_FUNCTION","function",185],["T_WHITESPACE"," ",185],["T_STRING","addVote",185],"(",["T_STRING","Mage_Poll_Model_Poll_Vote",185],["T_WHITESPACE"," ",185],["T_VARIABLE","$vote",185],")",["T_WHITESPACE","\n    ",185],"{",["T_WHITESPACE","\n        ",186],["T_IF","if",187],["T_WHITESPACE"," ",187],"(",["T_VARIABLE","$this",187],["T_OBJECT_OPERATOR","->",187],["T_STRING","hasAnswer",187],"(",["T_VARIABLE","$vote",187],["T_OBJECT_OPERATOR","->",187],["T_STRING","getPollAnswerId",187],"(",")",")",")",["T_WHITESPACE"," ",187],"{",["T_WHITESPACE","\n            ",187],["T_VARIABLE","$vote",188],["T_OBJECT_OPERATOR","->",188],["T_STRING","setPollId",188],"(",["T_VARIABLE","$this",188],["T_OBJECT_OPERATOR","->",188],["T_STRING","getId",188],"(",")",")",["T_WHITESPACE","\n                ",188],["T_OBJECT_OPERATOR","->",189],["T_STRING","save",189],"(",")",";",["T_WHITESPACE","\n            ",189],["T_VARIABLE","$this",190],["T_OBJECT_OPERATOR","->",190],["T_STRING","setVoted",190],"(",")",";",["T_WHITESPACE","\n        ",190],"}",["T_WHITESPACE","\n        ",191],["T_RETURN","return",192],["T_WHITESPACE"," ",192],["T_VARIABLE","$this",192],";",["T_WHITESPACE","\n    ",192],"}",["T_WHITESPACE","\n\n    ",193],["T_DOC_COMMENT","\/**\n     * Check answer existing for poll\n     *\n     * @param   mixed $answer\n     * @return  boll\n     *\/",195],["T_WHITESPACE","\n    ",200],["T_PUBLIC","public",201],["T_WHITESPACE"," ",201],["T_FUNCTION","function",201],["T_WHITESPACE"," ",201],["T_STRING","hasAnswer",201],"(",["T_VARIABLE","$answer",201],")",["T_WHITESPACE","\n    ",201],"{",["T_WHITESPACE","\n        ",202],["T_VARIABLE","$answerId",203],["T_WHITESPACE"," ",203],"=",["T_WHITESPACE"," ",203],["T_STRING","false",203],";",["T_WHITESPACE","\n        ",203],["T_IF","if",204],["T_WHITESPACE"," ",204],"(",["T_STRING","is_numeric",204],"(",["T_VARIABLE","$answer",204],")",")",["T_WHITESPACE"," ",204],"{",["T_WHITESPACE","\n            ",204],["T_VARIABLE","$answerId",205],["T_WHITESPACE"," ",205],"=",["T_WHITESPACE"," ",205],["T_VARIABLE","$answer",205],";",["T_WHITESPACE","\n        ",205],"}",["T_WHITESPACE","\n        ",206],["T_ELSEIF","elseif",207],["T_WHITESPACE"," ",207],"(",["T_VARIABLE","$answer",207],["T_WHITESPACE"," ",207],["T_INSTANCEOF","instanceof",207],["T_WHITESPACE"," ",207],["T_STRING","Mage_Poll_Model_Poll_Answer",207],")",["T_WHITESPACE"," ",207],"{",["T_WHITESPACE","\n            ",207],["T_VARIABLE","$answerId",208],["T_WHITESPACE"," ",208],"=",["T_WHITESPACE"," ",208],["T_VARIABLE","$answer",208],["T_OBJECT_OPERATOR","->",208],["T_STRING","getId",208],"(",")",";",["T_WHITESPACE","\n        ",208],"}",["T_WHITESPACE","\n\n        ",209],["T_IF","if",211],["T_WHITESPACE"," ",211],"(",["T_VARIABLE","$answerId",211],")",["T_WHITESPACE"," ",211],"{",["T_WHITESPACE","\n            ",211],["T_RETURN","return",212],["T_WHITESPACE"," ",212],["T_VARIABLE","$this",212],["T_OBJECT_OPERATOR","->",212],["T_STRING","_getResource",212],"(",")",["T_OBJECT_OPERATOR","->",212],["T_STRING","checkAnswerId",212],"(",["T_VARIABLE","$this",212],",",["T_WHITESPACE"," ",212],["T_VARIABLE","$answerId",212],")",";",["T_WHITESPACE","\n        ",212],"}",["T_WHITESPACE","\n        ",213],["T_RETURN","return",214],["T_WHITESPACE"," ",214],["T_STRING","false",214],";",["T_WHITESPACE","\n    ",214],"}",["T_WHITESPACE","\n\n    ",215],["T_PUBLIC","public",217],["T_WHITESPACE"," ",217],["T_FUNCTION","function",217],["T_WHITESPACE"," ",217],["T_STRING","resetVotesCount",217],"(",")",["T_WHITESPACE","\n    ",217],"{",["T_WHITESPACE","\n        ",218],["T_VARIABLE","$this",219],["T_OBJECT_OPERATOR","->",219],["T_STRING","_getResource",219],"(",")",["T_OBJECT_OPERATOR","->",219],["T_STRING","resetVotesCount",219],"(",["T_VARIABLE","$this",219],")",";",["T_WHITESPACE","\n        ",219],["T_RETURN","return",220],["T_WHITESPACE"," ",220],["T_VARIABLE","$this",220],";",["T_WHITESPACE","\n    ",220],"}",["T_WHITESPACE","\n\n\n    ",221],["T_PUBLIC","public",224],["T_WHITESPACE"," ",224],["T_FUNCTION","function",224],["T_WHITESPACE"," ",224],["T_STRING","getVotedPollsIds",224],"(",")",["T_WHITESPACE","\n    ",224],"{",["T_WHITESPACE","\n        ",225],["T_VARIABLE","$idsArray",226],["T_WHITESPACE"," ",226],"=",["T_WHITESPACE"," ",226],["T_ARRAY","array",226],"(",")",";",["T_WHITESPACE","\n\n        ",226],["T_FOREACH","foreach",228],["T_WHITESPACE"," ",228],"(",["T_VARIABLE","$this",228],["T_OBJECT_OPERATOR","->",228],["T_STRING","getCookie",228],"(",")",["T_OBJECT_OPERATOR","->",228],["T_STRING","get",228],"(",")",["T_WHITESPACE"," ",228],["T_AS","as",228],["T_WHITESPACE"," ",228],["T_VARIABLE","$cookieName",228],["T_WHITESPACE"," ",228],["T_DOUBLE_ARROW","=>",228],["T_WHITESPACE"," ",228],["T_VARIABLE","$cookieValue",228],")",["T_WHITESPACE"," ",228],"{",["T_WHITESPACE","\n            ",228],["T_VARIABLE","$pattern",229],["T_WHITESPACE"," ",229],"=",["T_WHITESPACE"," ",229],["T_CONSTANT_ENCAPSED_STRING","'#^'",229],["T_WHITESPACE"," ",229],".",["T_WHITESPACE"," ",229],["T_STRING","preg_quote",229],"(",["T_VARIABLE","$this",229],["T_OBJECT_OPERATOR","->",229],["T_STRING","_pollCookieDefaultName",229],",",["T_WHITESPACE"," ",229],["T_CONSTANT_ENCAPSED_STRING","'#'",229],")",["T_WHITESPACE"," ",229],".",["T_WHITESPACE"," ",229],["T_CONSTANT_ENCAPSED_STRING","'(\\d+)$#'",229],";",["T_WHITESPACE","\n            ",229],["T_VARIABLE","$match",230],["T_WHITESPACE","   ",230],"=",["T_WHITESPACE"," ",230],["T_ARRAY","array",230],"(",")",";",["T_WHITESPACE","\n            ",230],["T_IF","if",231],["T_WHITESPACE"," ",231],"(",["T_STRING","preg_match",231],"(",["T_VARIABLE","$pattern",231],",",["T_WHITESPACE"," ",231],["T_VARIABLE","$cookieName",231],",",["T_WHITESPACE"," ",231],["T_VARIABLE","$match",231],")",")",["T_WHITESPACE"," ",231],"{",["T_WHITESPACE","\n                ",231],["T_IF","if",232],["T_WHITESPACE"," ",232],"(",["T_VARIABLE","$match",232],"[",["T_LNUMBER","1",232],"]",["T_WHITESPACE"," ",232],["T_IS_NOT_EQUAL","!=",232],["T_WHITESPACE"," ",232],["T_STRING","Mage",232],["T_DOUBLE_COLON","::",232],["T_STRING","getSingleton",232],"(",["T_CONSTANT_ENCAPSED_STRING","'core\/session'",232],")",["T_OBJECT_OPERATOR","->",232],["T_STRING","getJustVotedPoll",232],"(",")",")",["T_WHITESPACE"," ",232],"{",["T_WHITESPACE","\n                    ",232],["T_VARIABLE","$idsArray",233],"[",["T_VARIABLE","$match",233],"[",["T_LNUMBER","1",233],"]","]",["T_WHITESPACE"," ",233],"=",["T_WHITESPACE"," ",233],["T_VARIABLE","$match",233],"[",["T_LNUMBER","1",233],"]",";",["T_WHITESPACE","\n                ",233],"}",["T_WHITESPACE","\n            ",234],"}",["T_WHITESPACE","\n        ",235],"}",["T_WHITESPACE","\n\n        ",236],["T_COMMENT","\/\/ load from db for this ip\n",238],["T_WHITESPACE","        ",239],["T_FOREACH","foreach",239],["T_WHITESPACE"," ",239],"(",["T_VARIABLE","$this",239],["T_OBJECT_OPERATOR","->",239],["T_STRING","_getResource",239],"(",")",["T_OBJECT_OPERATOR","->",239],["T_STRING","getVotedPollIdsByIp",239],"(",["T_STRING","Mage",239],["T_DOUBLE_COLON","::",239],["T_STRING","helper",239],"(",["T_CONSTANT_ENCAPSED_STRING","'core\/http'",239],")",["T_OBJECT_OPERATOR","->",239],["T_STRING","getRemoteAddr",239],"(",")",")",["T_WHITESPACE"," ",239],["T_AS","as",239],["T_WHITESPACE"," ",239],["T_VARIABLE","$pollId",239],")",["T_WHITESPACE"," ",239],"{",["T_WHITESPACE","\n            ",239],["T_VARIABLE","$idsArray",240],"[",["T_VARIABLE","$pollId",240],"]",["T_WHITESPACE"," ",240],"=",["T_WHITESPACE"," ",240],["T_VARIABLE","$pollId",240],";",["T_WHITESPACE","\n        ",240],"}",["T_WHITESPACE","\n\n        ",241],["T_RETURN","return",243],["T_WHITESPACE"," ",243],["T_VARIABLE","$idsArray",243],";",["T_WHITESPACE","\n    ",243],"}",["T_WHITESPACE","\n\n    ",244],["T_PUBLIC","public",246],["T_WHITESPACE"," ",246],["T_FUNCTION","function",246],["T_WHITESPACE"," ",246],["T_STRING","addAnswer",246],"(",["T_VARIABLE","$object",246],")",["T_WHITESPACE","\n    ",246],"{",["T_WHITESPACE","\n        ",247],["T_VARIABLE","$this",248],["T_OBJECT_OPERATOR","->",248],["T_STRING","_answersCollection",248],"[","]",["T_WHITESPACE"," ",248],"=",["T_WHITESPACE"," ",248],["T_VARIABLE","$object",248],";",["T_WHITESPACE","\n        ",248],["T_RETURN","return",249],["T_WHITESPACE"," ",249],["T_VARIABLE","$this",249],";",["T_WHITESPACE","\n    ",249],"}",["T_WHITESPACE","\n\n    ",250],["T_PUBLIC","public",252],["T_WHITESPACE"," ",252],["T_FUNCTION","function",252],["T_WHITESPACE"," ",252],["T_STRING","getAnswers",252],"(",")",["T_WHITESPACE","\n    ",252],"{",["T_WHITESPACE","\n        ",253],["T_RETURN","return",254],["T_WHITESPACE"," ",254],["T_VARIABLE","$this",254],["T_OBJECT_OPERATOR","->",254],["T_STRING","_answersCollection",254],";",["T_WHITESPACE","\n    ",254],"}",["T_WHITESPACE","\n\n    ",255],["T_PUBLIC","public",257],["T_WHITESPACE"," ",257],["T_FUNCTION","function",257],["T_WHITESPACE"," ",257],["T_STRING","addStoreId",257],"(",["T_VARIABLE","$storeId",257],")",["T_WHITESPACE","\n    ",257],"{",["T_WHITESPACE","\n        ",258],["T_VARIABLE","$ids",259],["T_WHITESPACE"," ",259],"=",["T_WHITESPACE"," ",259],["T_VARIABLE","$this",259],["T_OBJECT_OPERATOR","->",259],["T_STRING","getStoreIds",259],"(",")",";",["T_WHITESPACE","\n        ",259],["T_IF","if",260],["T_WHITESPACE"," ",260],"(","!",["T_STRING","in_array",260],"(",["T_VARIABLE","$storeId",260],",",["T_WHITESPACE"," ",260],["T_VARIABLE","$ids",260],")",")",["T_WHITESPACE"," ",260],"{",["T_WHITESPACE","\n            ",260],["T_VARIABLE","$ids",261],"[","]",["T_WHITESPACE"," ",261],"=",["T_WHITESPACE"," ",261],["T_VARIABLE","$storeId",261],";",["T_WHITESPACE","\n        ",261],"}",["T_WHITESPACE","\n        ",262],["T_VARIABLE","$this",263],["T_OBJECT_OPERATOR","->",263],["T_STRING","setStoreIds",263],"(",["T_VARIABLE","$ids",263],")",";",["T_WHITESPACE","\n        ",263],["T_RETURN","return",264],["T_WHITESPACE"," ",264],["T_VARIABLE","$this",264],";",["T_WHITESPACE","\n    ",264],"}",["T_WHITESPACE","\n\n    ",265],["T_PUBLIC","public",267],["T_WHITESPACE"," ",267],["T_FUNCTION","function",267],["T_WHITESPACE"," ",267],["T_STRING","getStoreIds",267],"(",")",["T_WHITESPACE","\n    ",267],"{",["T_WHITESPACE","\n        ",268],["T_VARIABLE","$ids",269],["T_WHITESPACE"," ",269],"=",["T_WHITESPACE"," ",269],["T_VARIABLE","$this",269],["T_OBJECT_OPERATOR","->",269],["T_STRING","_getData",269],"(",["T_CONSTANT_ENCAPSED_STRING","'store_ids'",269],")",";",["T_WHITESPACE","\n        ",269],["T_IF","if",270],["T_WHITESPACE"," ",270],"(",["T_STRING","is_null",270],"(",["T_VARIABLE","$ids",270],")",")",["T_WHITESPACE"," ",270],"{",["T_WHITESPACE","\n            ",270],["T_VARIABLE","$this",271],["T_OBJECT_OPERATOR","->",271],["T_STRING","loadStoreIds",271],"(",")",";",["T_WHITESPACE","\n            ",271],["T_VARIABLE","$ids",272],["T_WHITESPACE"," ",272],"=",["T_WHITESPACE"," ",272],["T_VARIABLE","$this",272],["T_OBJECT_OPERATOR","->",272],["T_STRING","getData",272],"(",["T_CONSTANT_ENCAPSED_STRING","'store_ids'",272],")",";",["T_WHITESPACE","\n        ",272],"}",["T_WHITESPACE","\n        ",273],["T_RETURN","return",274],["T_WHITESPACE"," ",274],["T_VARIABLE","$ids",274],";",["T_WHITESPACE","\n    ",274],"}",["T_WHITESPACE","\n\n    ",275],["T_PUBLIC","public",277],["T_WHITESPACE"," ",277],["T_FUNCTION","function",277],["T_WHITESPACE"," ",277],["T_STRING","loadStoreIds",277],"(",")",["T_WHITESPACE","\n    ",277],"{",["T_WHITESPACE","\n        ",278],["T_VARIABLE","$this",279],["T_OBJECT_OPERATOR","->",279],["T_STRING","_getResource",279],"(",")",["T_OBJECT_OPERATOR","->",279],["T_STRING","loadStoreIds",279],"(",["T_VARIABLE","$this",279],")",";",["T_WHITESPACE","\n    ",279],"}",["T_WHITESPACE","\n\n    ",280],["T_PUBLIC","public",282],["T_WHITESPACE"," ",282],["T_FUNCTION","function",282],["T_WHITESPACE"," ",282],["T_STRING","getVotesCount",282],"(",")",["T_WHITESPACE","\n    ",282],"{",["T_WHITESPACE","\n        ",283],["T_RETURN","return",284],["T_WHITESPACE"," ",284],["T_VARIABLE","$this",284],["T_OBJECT_OPERATOR","->",284],["T_STRING","_getData",284],"(",["T_CONSTANT_ENCAPSED_STRING","'votes_count'",284],")",";",["T_WHITESPACE","\n    ",284],"}",["T_WHITESPACE","\n\n",285],"}",["T_WHITESPACE","\n",287]]
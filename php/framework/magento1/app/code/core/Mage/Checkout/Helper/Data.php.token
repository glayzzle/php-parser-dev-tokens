[["T_OPEN_TAG","<?php\n",1],["T_DOC_COMMENT","\/**\n * Magento\n *\n * NOTICE OF LICENSE\n *\n * This source file is subject to the Open Software License (OSL 3.0)\n * that is bundled with this package in the file LICENSE.txt.\n * It is also available through the world-wide-web at this URL:\n * http:\/\/opensource.org\/licenses\/osl-3.0.php\n * If you did not receive a copy of the license and are unable to\n * obtain it through the world-wide-web, please send an email\n * to license@magento.com so we can send you a copy immediately.\n *\n * DISCLAIMER\n *\n * Do not edit or add to this file if you wish to upgrade Magento to newer\n * versions in the future. If you wish to customize Magento for your\n * needs please refer to http:\/\/www.magento.com for more information.\n *\n * @category    Mage\n * @package     Mage_Checkout\n * @copyright  Copyright (c) 2006-2016 X.commerce, Inc. and affiliates (http:\/\/www.magento.com)\n * @license    http:\/\/opensource.org\/licenses\/osl-3.0.php  Open Software License (OSL 3.0)\n *\/",2],["T_WHITESPACE","\n\n",25],["T_DOC_COMMENT","\/**\n * Checkout default helper\n *\n * @author      Magento Core Team <core@magentocommerce.com>\n *\/",27],["T_WHITESPACE","\n",31],["T_CLASS","class",32],["T_WHITESPACE"," ",32],["T_STRING","Mage_Checkout_Helper_Data",32],["T_WHITESPACE"," ",32],["T_EXTENDS","extends",32],["T_WHITESPACE"," ",32],["T_STRING","Mage_Core_Helper_Abstract",32],["T_WHITESPACE","\n",32],"{",["T_WHITESPACE","\n    ",33],["T_CONST","const",34],["T_WHITESPACE"," ",34],["T_STRING","XML_PATH_GUEST_CHECKOUT",34],["T_WHITESPACE"," ",34],"=",["T_WHITESPACE"," ",34],["T_CONSTANT_ENCAPSED_STRING","'checkout\/options\/guest_checkout'",34],";",["T_WHITESPACE","\n    ",34],["T_CONST","const",35],["T_WHITESPACE"," ",35],["T_STRING","XML_PATH_CUSTOMER_MUST_BE_LOGGED",35],["T_WHITESPACE"," ",35],"=",["T_WHITESPACE"," ",35],["T_CONSTANT_ENCAPSED_STRING","'checkout\/options\/customer_must_be_logged'",35],";",["T_WHITESPACE","\n\n    ",35],["T_PROTECTED","protected",37],["T_WHITESPACE"," ",37],["T_VARIABLE","$_agreements",37],["T_WHITESPACE"," ",37],"=",["T_WHITESPACE"," ",37],["T_STRING","null",37],";",["T_WHITESPACE","\n\n    ",37],["T_DOC_COMMENT","\/**\n     * Retrieve checkout session model\n     *\n     * @return Mage_Checkout_Model_Session\n     *\/",39],["T_WHITESPACE","\n    ",43],["T_PUBLIC","public",44],["T_WHITESPACE"," ",44],["T_FUNCTION","function",44],["T_WHITESPACE"," ",44],["T_STRING","getCheckout",44],"(",")",["T_WHITESPACE","\n    ",44],"{",["T_WHITESPACE","\n        ",45],["T_RETURN","return",46],["T_WHITESPACE"," ",46],["T_STRING","Mage",46],["T_DOUBLE_COLON","::",46],["T_STRING","getSingleton",46],"(",["T_CONSTANT_ENCAPSED_STRING","'checkout\/session'",46],")",";",["T_WHITESPACE","\n    ",46],"}",["T_WHITESPACE","\n\n    ",47],["T_DOC_COMMENT","\/**\n     * Retrieve checkout quote model object\n     *\n     * @return Mage_Sales_Model_Quote\n     *\/",49],["T_WHITESPACE","\n    ",53],["T_PUBLIC","public",54],["T_WHITESPACE"," ",54],["T_FUNCTION","function",54],["T_WHITESPACE"," ",54],["T_STRING","getQuote",54],"(",")",["T_WHITESPACE","\n    ",54],"{",["T_WHITESPACE","\n        ",55],["T_RETURN","return",56],["T_WHITESPACE"," ",56],["T_VARIABLE","$this",56],["T_OBJECT_OPERATOR","->",56],["T_STRING","getCheckout",56],"(",")",["T_OBJECT_OPERATOR","->",56],["T_STRING","getQuote",56],"(",")",";",["T_WHITESPACE","\n    ",56],"}",["T_WHITESPACE","\n\n    ",57],["T_PUBLIC","public",59],["T_WHITESPACE"," ",59],["T_FUNCTION","function",59],["T_WHITESPACE"," ",59],["T_STRING","formatPrice",59],"(",["T_VARIABLE","$price",59],")",["T_WHITESPACE","\n    ",59],"{",["T_WHITESPACE","\n        ",60],["T_RETURN","return",61],["T_WHITESPACE"," ",61],["T_VARIABLE","$this",61],["T_OBJECT_OPERATOR","->",61],["T_STRING","getQuote",61],"(",")",["T_OBJECT_OPERATOR","->",61],["T_STRING","getStore",61],"(",")",["T_OBJECT_OPERATOR","->",61],["T_STRING","formatPrice",61],"(",["T_VARIABLE","$price",61],")",";",["T_WHITESPACE","\n    ",61],"}",["T_WHITESPACE","\n\n    ",62],["T_PUBLIC","public",64],["T_WHITESPACE"," ",64],["T_FUNCTION","function",64],["T_WHITESPACE"," ",64],["T_STRING","convertPrice",64],"(",["T_VARIABLE","$price",64],",",["T_WHITESPACE"," ",64],["T_VARIABLE","$format",64],"=",["T_STRING","true",64],")",["T_WHITESPACE","\n    ",64],"{",["T_WHITESPACE","\n        ",65],["T_RETURN","return",66],["T_WHITESPACE"," ",66],["T_VARIABLE","$this",66],["T_OBJECT_OPERATOR","->",66],["T_STRING","getQuote",66],"(",")",["T_OBJECT_OPERATOR","->",66],["T_STRING","getStore",66],"(",")",["T_OBJECT_OPERATOR","->",66],["T_STRING","convertPrice",66],"(",["T_VARIABLE","$price",66],",",["T_WHITESPACE"," ",66],["T_VARIABLE","$format",66],")",";",["T_WHITESPACE","\n    ",66],"}",["T_WHITESPACE","\n\n    ",67],["T_PUBLIC","public",69],["T_WHITESPACE"," ",69],["T_FUNCTION","function",69],["T_WHITESPACE"," ",69],["T_STRING","getRequiredAgreementIds",69],"(",")",["T_WHITESPACE","\n    ",69],"{",["T_WHITESPACE","\n        ",70],["T_IF","if",71],["T_WHITESPACE"," ",71],"(",["T_STRING","is_null",71],"(",["T_VARIABLE","$this",71],["T_OBJECT_OPERATOR","->",71],["T_STRING","_agreements",71],")",")",["T_WHITESPACE"," ",71],"{",["T_WHITESPACE","\n            ",71],["T_IF","if",72],["T_WHITESPACE"," ",72],"(","!",["T_STRING","Mage",72],["T_DOUBLE_COLON","::",72],["T_STRING","getStoreConfigFlag",72],"(",["T_CONSTANT_ENCAPSED_STRING","'checkout\/options\/enable_agreements'",72],")",")",["T_WHITESPACE"," ",72],"{",["T_WHITESPACE","\n                ",72],["T_VARIABLE","$this",73],["T_OBJECT_OPERATOR","->",73],["T_STRING","_agreements",73],["T_WHITESPACE"," ",73],"=",["T_WHITESPACE"," ",73],["T_ARRAY","array",73],"(",")",";",["T_WHITESPACE","\n            ",73],"}",["T_WHITESPACE"," ",74],["T_ELSE","else",74],["T_WHITESPACE"," ",74],"{",["T_WHITESPACE","\n                ",74],["T_VARIABLE","$this",75],["T_OBJECT_OPERATOR","->",75],["T_STRING","_agreements",75],["T_WHITESPACE"," ",75],"=",["T_WHITESPACE"," ",75],["T_STRING","Mage",75],["T_DOUBLE_COLON","::",75],["T_STRING","getModel",75],"(",["T_CONSTANT_ENCAPSED_STRING","'checkout\/agreement'",75],")",["T_OBJECT_OPERATOR","->",75],["T_STRING","getCollection",75],"(",")",["T_WHITESPACE","\n                    ",75],["T_OBJECT_OPERATOR","->",76],["T_STRING","addStoreFilter",76],"(",["T_STRING","Mage",76],["T_DOUBLE_COLON","::",76],["T_STRING","app",76],"(",")",["T_OBJECT_OPERATOR","->",76],["T_STRING","getStore",76],"(",")",["T_OBJECT_OPERATOR","->",76],["T_STRING","getId",76],"(",")",")",["T_WHITESPACE","\n                    ",76],["T_OBJECT_OPERATOR","->",77],["T_STRING","addFieldToFilter",77],"(",["T_CONSTANT_ENCAPSED_STRING","'is_active'",77],",",["T_WHITESPACE"," ",77],["T_LNUMBER","1",77],")",["T_WHITESPACE","\n                    ",77],["T_OBJECT_OPERATOR","->",78],["T_STRING","getAllIds",78],"(",")",";",["T_WHITESPACE","\n            ",78],"}",["T_WHITESPACE","\n        ",79],"}",["T_WHITESPACE","\n        ",80],["T_RETURN","return",81],["T_WHITESPACE"," ",81],["T_VARIABLE","$this",81],["T_OBJECT_OPERATOR","->",81],["T_STRING","_agreements",81],";",["T_WHITESPACE","\n    ",81],"}",["T_WHITESPACE","\n\n    ",82],["T_DOC_COMMENT","\/**\n     * Get onepage checkout availability\n     *\n     * @return bool\n     *\/",84],["T_WHITESPACE","\n    ",88],["T_PUBLIC","public",89],["T_WHITESPACE"," ",89],["T_FUNCTION","function",89],["T_WHITESPACE"," ",89],["T_STRING","canOnepageCheckout",89],"(",")",["T_WHITESPACE","\n    ",89],"{",["T_WHITESPACE","\n        ",90],["T_RETURN","return",91],["T_WHITESPACE"," ",91],["T_BOOL_CAST","(bool)",91],["T_STRING","Mage",91],["T_DOUBLE_COLON","::",91],["T_STRING","getStoreConfig",91],"(",["T_CONSTANT_ENCAPSED_STRING","'checkout\/options\/onepage_checkout_enabled'",91],")",";",["T_WHITESPACE","\n    ",91],"}",["T_WHITESPACE","\n\n    ",92],["T_DOC_COMMENT","\/**\n     * Get sales item (quote item, order item etc) price including tax based on row total and tax amount\n     * excluding weee tax\n     *\n     * @param   Varien_Object $item\n     * @return  float\n     *\/",94],["T_WHITESPACE","\n    ",100],["T_PUBLIC","public",101],["T_WHITESPACE"," ",101],["T_FUNCTION","function",101],["T_WHITESPACE"," ",101],["T_STRING","getPriceInclTax",101],"(",["T_VARIABLE","$item",101],")",["T_WHITESPACE","\n    ",101],"{",["T_WHITESPACE","\n        ",102],["T_IF","if",103],["T_WHITESPACE"," ",103],"(",["T_VARIABLE","$item",103],["T_OBJECT_OPERATOR","->",103],["T_STRING","getPriceInclTax",103],"(",")",")",["T_WHITESPACE"," ",103],"{",["T_WHITESPACE","\n            ",103],["T_RETURN","return",104],["T_WHITESPACE"," ",104],["T_VARIABLE","$item",104],["T_OBJECT_OPERATOR","->",104],["T_STRING","getPriceInclTax",104],"(",")",";",["T_WHITESPACE","\n        ",104],"}",["T_WHITESPACE","\n        ",105],["T_VARIABLE","$qty",106],["T_WHITESPACE"," ",106],"=",["T_WHITESPACE"," ",106],"(",["T_VARIABLE","$item",106],["T_OBJECT_OPERATOR","->",106],["T_STRING","getQty",106],"(",")",["T_WHITESPACE"," ",106],"?",["T_WHITESPACE"," ",106],["T_VARIABLE","$item",106],["T_OBJECT_OPERATOR","->",106],["T_STRING","getQty",106],"(",")",["T_WHITESPACE"," ",106],":",["T_WHITESPACE"," ",106],"(",["T_VARIABLE","$item",106],["T_OBJECT_OPERATOR","->",106],["T_STRING","getQtyOrdered",106],"(",")",["T_WHITESPACE"," ",106],"?",["T_WHITESPACE"," ",106],["T_VARIABLE","$item",106],["T_OBJECT_OPERATOR","->",106],["T_STRING","getQtyOrdered",106],"(",")",["T_WHITESPACE"," ",106],":",["T_WHITESPACE"," ",106],["T_LNUMBER","1",106],")",")",";",["T_WHITESPACE","\n\n        ",106],["T_COMMENT","\/\/Unit price is rowtotal\/qty\n",108],["T_WHITESPACE","        ",109],["T_RETURN","return",109],["T_WHITESPACE"," ",109],["T_VARIABLE","$qty",109],["T_WHITESPACE"," ",109],">",["T_WHITESPACE"," ",109],["T_LNUMBER","0",109],["T_WHITESPACE"," ",109],"?",["T_WHITESPACE"," ",109],["T_VARIABLE","$this",109],["T_OBJECT_OPERATOR","->",109],["T_STRING","getSubtotalInclTax",109],"(",["T_VARIABLE","$item",109],")","\/",["T_VARIABLE","$qty",109],["T_WHITESPACE"," ",109],":",["T_LNUMBER","0",109],";",["T_WHITESPACE","\n    ",109],"}",["T_WHITESPACE","\n\n    ",110],["T_DOC_COMMENT","\/**\n     * Get sales item (quote item, order item etc) row total price including tax\n     *\n     * @param   Varien_Object $item\n     * @return  float\n     *\/",112],["T_WHITESPACE","\n    ",117],["T_PUBLIC","public",118],["T_WHITESPACE"," ",118],["T_FUNCTION","function",118],["T_WHITESPACE"," ",118],["T_STRING","getSubtotalInclTax",118],"(",["T_VARIABLE","$item",118],")",["T_WHITESPACE","\n    ",118],"{",["T_WHITESPACE","\n        ",119],["T_IF","if",120],["T_WHITESPACE"," ",120],"(",["T_VARIABLE","$item",120],["T_OBJECT_OPERATOR","->",120],["T_STRING","getRowTotalInclTax",120],"(",")",")",["T_WHITESPACE"," ",120],"{",["T_WHITESPACE","\n            ",120],["T_RETURN","return",121],["T_WHITESPACE"," ",121],["T_VARIABLE","$item",121],["T_OBJECT_OPERATOR","->",121],["T_STRING","getRowTotalInclTax",121],"(",")",";",["T_WHITESPACE","\n        ",121],"}",["T_WHITESPACE","\n        ",122],["T_COMMENT","\/\/Since tax amount contains weee tax\n",123],["T_WHITESPACE","        ",124],["T_VARIABLE","$tax",124],["T_WHITESPACE"," ",124],"=",["T_WHITESPACE"," ",124],["T_VARIABLE","$item",124],["T_OBJECT_OPERATOR","->",124],["T_STRING","getTaxAmount",124],"(",")",["T_WHITESPACE"," ",124],"+",["T_WHITESPACE"," ",124],["T_VARIABLE","$item",124],["T_OBJECT_OPERATOR","->",124],["T_STRING","getDiscountTaxCompensation",124],"(",")",["T_WHITESPACE","\n            ",124],"-",["T_WHITESPACE"," ",125],["T_VARIABLE","$this",125],["T_OBJECT_OPERATOR","->",125],["T_STRING","_getWeeeHelper",125],"(",")",["T_OBJECT_OPERATOR","->",125],["T_STRING","getTotalRowTaxAppliedForWeeeTax",125],"(",["T_VARIABLE","$item",125],")",";",";",["T_WHITESPACE","\n\n        ",125],["T_RETURN","return",127],["T_WHITESPACE"," ",127],["T_VARIABLE","$item",127],["T_OBJECT_OPERATOR","->",127],["T_STRING","getRowTotal",127],"(",")",["T_WHITESPACE"," ",127],"+",["T_WHITESPACE"," ",127],["T_VARIABLE","$tax",127],";",["T_WHITESPACE","\n    ",127],"}",["T_WHITESPACE","\n\n    ",128],["T_DOC_COMMENT","\/**\n     * Returns the helper for weee\n     *\n     * @return Mage_Weee_Helper_Data\n     *\/",130],["T_WHITESPACE","\n    ",134],["T_PROTECTED","protected",135],["T_WHITESPACE"," ",135],["T_FUNCTION","function",135],["T_WHITESPACE"," ",135],["T_STRING","_getWeeeHelper",135],"(",")",["T_WHITESPACE","\n    ",135],"{",["T_WHITESPACE","\n        ",136],["T_RETURN","return",137],["T_WHITESPACE"," ",137],["T_STRING","Mage",137],["T_DOUBLE_COLON","::",137],["T_STRING","helper",137],"(",["T_CONSTANT_ENCAPSED_STRING","'weee'",137],")",";",["T_WHITESPACE","\n    ",137],"}",["T_WHITESPACE","\n\n    ",138],["T_DOC_COMMENT","\/**\n     * Get the base price of the item including tax , excluding weee\n     *\n     * @param Varien_Object $item\n     * @return float\n     *\/",140],["T_WHITESPACE","\n    ",145],["T_PUBLIC","public",146],["T_WHITESPACE"," ",146],["T_FUNCTION","function",146],["T_WHITESPACE"," ",146],["T_STRING","getBasePriceInclTax",146],"(",["T_VARIABLE","$item",146],")",["T_WHITESPACE","\n    ",146],"{",["T_WHITESPACE","\n        ",147],["T_VARIABLE","$qty",148],["T_WHITESPACE"," ",148],"=",["T_WHITESPACE"," ",148],"(",["T_VARIABLE","$item",148],["T_OBJECT_OPERATOR","->",148],["T_STRING","getQty",148],"(",")",["T_WHITESPACE"," ",148],"?",["T_WHITESPACE"," ",148],["T_VARIABLE","$item",148],["T_OBJECT_OPERATOR","->",148],["T_STRING","getQty",148],"(",")",["T_WHITESPACE"," ",148],":",["T_WHITESPACE"," ",148],"(",["T_VARIABLE","$item",148],["T_OBJECT_OPERATOR","->",148],["T_STRING","getQtyOrdered",148],"(",")",["T_WHITESPACE"," ",148],"?",["T_WHITESPACE"," ",148],["T_VARIABLE","$item",148],["T_OBJECT_OPERATOR","->",148],["T_STRING","getQtyOrdered",148],"(",")",["T_WHITESPACE"," ",148],":",["T_WHITESPACE"," ",148],["T_LNUMBER","1",148],")",")",";",["T_WHITESPACE","\n\n        ",148],["T_RETURN","return",150],["T_WHITESPACE"," ",150],["T_VARIABLE","$qty",150],["T_WHITESPACE"," ",150],">",["T_WHITESPACE"," ",150],["T_LNUMBER","0",150],["T_WHITESPACE"," ",150],"?",["T_WHITESPACE"," ",150],["T_VARIABLE","$this",150],["T_OBJECT_OPERATOR","->",150],["T_STRING","getBaseSubtotalInclTax",150],"(",["T_VARIABLE","$item",150],")",["T_WHITESPACE"," ",150],"\/",["T_WHITESPACE"," ",150],["T_VARIABLE","$qty",150],["T_WHITESPACE"," ",150],":",["T_WHITESPACE"," ",150],["T_LNUMBER","0",150],";",["T_WHITESPACE","\n    ",150],"}",["T_WHITESPACE","\n\n    ",151],["T_DOC_COMMENT","\/**\n     * Get sales item (quote item, order item etc) row total price including tax excluding wee\n     *\n     * @param Varien_Object $item\n     * @return float\n     *\/",153],["T_WHITESPACE","\n    ",158],["T_PUBLIC","public",159],["T_WHITESPACE"," ",159],["T_FUNCTION","function",159],["T_WHITESPACE"," ",159],["T_STRING","getBaseSubtotalInclTax",159],"(",["T_VARIABLE","$item",159],")",["T_WHITESPACE","\n    ",159],"{",["T_WHITESPACE","\n        ",160],["T_VARIABLE","$tax",161],["T_WHITESPACE"," ",161],"=",["T_WHITESPACE"," ",161],["T_VARIABLE","$item",161],["T_OBJECT_OPERATOR","->",161],["T_STRING","getBaseTaxAmount",161],"(",")",["T_WHITESPACE"," ",161],"+",["T_WHITESPACE"," ",161],["T_VARIABLE","$item",161],["T_OBJECT_OPERATOR","->",161],["T_STRING","getBaseDiscountTaxCompensation",161],"(",")",["T_WHITESPACE","\n            ",161],"-",["T_WHITESPACE"," ",162],["T_VARIABLE","$this",162],["T_OBJECT_OPERATOR","->",162],["T_STRING","_getWeeeHelper",162],"(",")",["T_OBJECT_OPERATOR","->",162],["T_STRING","getBaseTotalRowTaxAppliedForWeeeTax",162],"(",["T_VARIABLE","$item",162],")",";",["T_WHITESPACE","\n        ",162],["T_RETURN","return",163],["T_WHITESPACE"," ",163],["T_VARIABLE","$item",163],["T_OBJECT_OPERATOR","->",163],["T_STRING","getBaseRowTotal",163],"(",")","+",["T_VARIABLE","$tax",163],";",["T_WHITESPACE","\n    ",163],"}",["T_WHITESPACE","\n\n    ",164],["T_DOC_COMMENT","\/**\n     * Send email id payment was failed\n     *\n     * @param Mage_Sales_Model_Quote $checkout\n     * @param string $message\n     * @param string $checkoutType\n     * @return Mage_Checkout_Helper_Data\n     *\/",166],["T_WHITESPACE","\n    ",173],["T_PUBLIC","public",174],["T_WHITESPACE"," ",174],["T_FUNCTION","function",174],["T_WHITESPACE"," ",174],["T_STRING","sendPaymentFailedEmail",174],"(",["T_VARIABLE","$checkout",174],",",["T_WHITESPACE"," ",174],["T_VARIABLE","$message",174],",",["T_WHITESPACE"," ",174],["T_VARIABLE","$checkoutType",174],["T_WHITESPACE"," ",174],"=",["T_WHITESPACE"," ",174],["T_CONSTANT_ENCAPSED_STRING","'onepage'",174],")",["T_WHITESPACE","\n    ",174],"{",["T_WHITESPACE","\n        ",175],["T_VARIABLE","$translate",176],["T_WHITESPACE"," ",176],"=",["T_WHITESPACE"," ",176],["T_STRING","Mage",176],["T_DOUBLE_COLON","::",176],["T_STRING","getSingleton",176],"(",["T_CONSTANT_ENCAPSED_STRING","'core\/translate'",176],")",";",["T_WHITESPACE","\n        ",176],["T_COMMENT","\/* @var $translate Mage_Core_Model_Translate *\/",177],["T_WHITESPACE","\n        ",177],["T_VARIABLE","$translate",178],["T_OBJECT_OPERATOR","->",178],["T_STRING","setTranslateInline",178],"(",["T_STRING","false",178],")",";",["T_WHITESPACE","\n\n        ",178],["T_VARIABLE","$mailTemplate",180],["T_WHITESPACE"," ",180],"=",["T_WHITESPACE"," ",180],["T_STRING","Mage",180],["T_DOUBLE_COLON","::",180],["T_STRING","getModel",180],"(",["T_CONSTANT_ENCAPSED_STRING","'core\/email_template'",180],")",";",["T_WHITESPACE","\n        ",180],["T_COMMENT","\/* @var $mailTemplate Mage_Core_Model_Email_Template *\/",181],["T_WHITESPACE","\n\n        ",181],["T_VARIABLE","$template",183],["T_WHITESPACE"," ",183],"=",["T_WHITESPACE"," ",183],["T_STRING","Mage",183],["T_DOUBLE_COLON","::",183],["T_STRING","getStoreConfig",183],"(",["T_CONSTANT_ENCAPSED_STRING","'checkout\/payment_failed\/template'",183],",",["T_WHITESPACE"," ",183],["T_VARIABLE","$checkout",183],["T_OBJECT_OPERATOR","->",183],["T_STRING","getStoreId",183],"(",")",")",";",["T_WHITESPACE","\n\n        ",183],["T_VARIABLE","$copyTo",185],["T_WHITESPACE"," ",185],"=",["T_WHITESPACE"," ",185],["T_VARIABLE","$this",185],["T_OBJECT_OPERATOR","->",185],["T_STRING","_getEmails",185],"(",["T_CONSTANT_ENCAPSED_STRING","'checkout\/payment_failed\/copy_to'",185],",",["T_WHITESPACE"," ",185],["T_VARIABLE","$checkout",185],["T_OBJECT_OPERATOR","->",185],["T_STRING","getStoreId",185],"(",")",")",";",["T_WHITESPACE","\n        ",185],["T_VARIABLE","$copyMethod",186],["T_WHITESPACE"," ",186],"=",["T_WHITESPACE"," ",186],["T_STRING","Mage",186],["T_DOUBLE_COLON","::",186],["T_STRING","getStoreConfig",186],"(",["T_CONSTANT_ENCAPSED_STRING","'checkout\/payment_failed\/copy_method'",186],",",["T_WHITESPACE"," ",186],["T_VARIABLE","$checkout",186],["T_OBJECT_OPERATOR","->",186],["T_STRING","getStoreId",186],"(",")",")",";",["T_WHITESPACE","\n        ",186],["T_IF","if",187],["T_WHITESPACE"," ",187],"(",["T_VARIABLE","$copyTo",187],["T_WHITESPACE"," ",187],["T_BOOLEAN_AND","&&",187],["T_WHITESPACE"," ",187],["T_VARIABLE","$copyMethod",187],["T_WHITESPACE"," ",187],["T_IS_EQUAL","==",187],["T_WHITESPACE"," ",187],["T_CONSTANT_ENCAPSED_STRING","'bcc'",187],")",["T_WHITESPACE"," ",187],"{",["T_WHITESPACE","\n            ",187],["T_VARIABLE","$mailTemplate",188],["T_OBJECT_OPERATOR","->",188],["T_STRING","addBcc",188],"(",["T_VARIABLE","$copyTo",188],")",";",["T_WHITESPACE","\n        ",188],"}",["T_WHITESPACE","\n\n        ",189],["T_VARIABLE","$_reciever",191],["T_WHITESPACE"," ",191],"=",["T_WHITESPACE"," ",191],["T_STRING","Mage",191],["T_DOUBLE_COLON","::",191],["T_STRING","getStoreConfig",191],"(",["T_CONSTANT_ENCAPSED_STRING","'checkout\/payment_failed\/reciever'",191],",",["T_WHITESPACE"," ",191],["T_VARIABLE","$checkout",191],["T_OBJECT_OPERATOR","->",191],["T_STRING","getStoreId",191],"(",")",")",";",["T_WHITESPACE","\n        ",191],["T_VARIABLE","$sendTo",192],["T_WHITESPACE"," ",192],"=",["T_WHITESPACE"," ",192],["T_ARRAY","array",192],"(",["T_WHITESPACE","\n            ",192],["T_ARRAY","array",193],"(",["T_WHITESPACE","\n                ",193],["T_CONSTANT_ENCAPSED_STRING","'email'",194],["T_WHITESPACE"," ",194],["T_DOUBLE_ARROW","=>",194],["T_WHITESPACE"," ",194],["T_STRING","Mage",194],["T_DOUBLE_COLON","::",194],["T_STRING","getStoreConfig",194],"(",["T_CONSTANT_ENCAPSED_STRING","'trans_email\/ident_'",194],".",["T_VARIABLE","$_reciever",194],".",["T_CONSTANT_ENCAPSED_STRING","'\/email'",194],",",["T_WHITESPACE"," ",194],["T_VARIABLE","$checkout",194],["T_OBJECT_OPERATOR","->",194],["T_STRING","getStoreId",194],"(",")",")",",",["T_WHITESPACE","\n                ",194],["T_CONSTANT_ENCAPSED_STRING","'name'",195],["T_WHITESPACE","  ",195],["T_DOUBLE_ARROW","=>",195],["T_WHITESPACE"," ",195],["T_STRING","Mage",195],["T_DOUBLE_COLON","::",195],["T_STRING","getStoreConfig",195],"(",["T_CONSTANT_ENCAPSED_STRING","'trans_email\/ident_'",195],".",["T_VARIABLE","$_reciever",195],".",["T_CONSTANT_ENCAPSED_STRING","'\/name'",195],",",["T_WHITESPACE"," ",195],["T_VARIABLE","$checkout",195],["T_OBJECT_OPERATOR","->",195],["T_STRING","getStoreId",195],"(",")",")",["T_WHITESPACE","\n            ",195],")",["T_WHITESPACE","\n        ",196],")",";",["T_WHITESPACE","\n\n        ",197],["T_IF","if",199],["T_WHITESPACE"," ",199],"(",["T_VARIABLE","$copyTo",199],["T_WHITESPACE"," ",199],["T_BOOLEAN_AND","&&",199],["T_WHITESPACE"," ",199],["T_VARIABLE","$copyMethod",199],["T_WHITESPACE"," ",199],["T_IS_EQUAL","==",199],["T_WHITESPACE"," ",199],["T_CONSTANT_ENCAPSED_STRING","'copy'",199],")",["T_WHITESPACE"," ",199],"{",["T_WHITESPACE","\n            ",199],["T_FOREACH","foreach",200],["T_WHITESPACE"," ",200],"(",["T_VARIABLE","$copyTo",200],["T_WHITESPACE"," ",200],["T_AS","as",200],["T_WHITESPACE"," ",200],["T_VARIABLE","$email",200],")",["T_WHITESPACE"," ",200],"{",["T_WHITESPACE","\n                ",200],["T_VARIABLE","$sendTo",201],"[","]",["T_WHITESPACE"," ",201],"=",["T_WHITESPACE"," ",201],["T_ARRAY","array",201],"(",["T_WHITESPACE","\n                    ",201],["T_CONSTANT_ENCAPSED_STRING","'email'",202],["T_WHITESPACE"," ",202],["T_DOUBLE_ARROW","=>",202],["T_WHITESPACE"," ",202],["T_VARIABLE","$email",202],",",["T_WHITESPACE","\n                    ",202],["T_CONSTANT_ENCAPSED_STRING","'name'",203],["T_WHITESPACE","  ",203],["T_DOUBLE_ARROW","=>",203],["T_WHITESPACE"," ",203],["T_STRING","null",203],["T_WHITESPACE","\n                ",203],")",";",["T_WHITESPACE","\n            ",204],"}",["T_WHITESPACE","\n        ",205],"}",["T_WHITESPACE","\n        ",206],["T_VARIABLE","$shippingMethod",207],["T_WHITESPACE"," ",207],"=",["T_WHITESPACE"," ",207],["T_CONSTANT_ENCAPSED_STRING","''",207],";",["T_WHITESPACE","\n        ",207],["T_IF","if",208],["T_WHITESPACE"," ",208],"(",["T_VARIABLE","$shippingInfo",208],["T_WHITESPACE"," ",208],"=",["T_WHITESPACE"," ",208],["T_VARIABLE","$checkout",208],["T_OBJECT_OPERATOR","->",208],["T_STRING","getShippingAddress",208],"(",")",["T_OBJECT_OPERATOR","->",208],["T_STRING","getShippingMethod",208],"(",")",")",["T_WHITESPACE"," ",208],"{",["T_WHITESPACE","\n            ",208],["T_VARIABLE","$data",209],["T_WHITESPACE"," ",209],"=",["T_WHITESPACE"," ",209],["T_STRING","explode",209],"(",["T_CONSTANT_ENCAPSED_STRING","'_'",209],",",["T_WHITESPACE"," ",209],["T_VARIABLE","$shippingInfo",209],")",";",["T_WHITESPACE","\n            ",209],["T_VARIABLE","$shippingMethod",210],["T_WHITESPACE"," ",210],"=",["T_WHITESPACE"," ",210],["T_VARIABLE","$data",210],"[",["T_LNUMBER","0",210],"]",";",["T_WHITESPACE","\n        ",210],"}",["T_WHITESPACE","\n\n        ",211],["T_VARIABLE","$paymentMethod",213],["T_WHITESPACE"," ",213],"=",["T_WHITESPACE"," ",213],["T_CONSTANT_ENCAPSED_STRING","''",213],";",["T_WHITESPACE","\n        ",213],["T_IF","if",214],["T_WHITESPACE"," ",214],"(",["T_VARIABLE","$paymentInfo",214],["T_WHITESPACE"," ",214],"=",["T_WHITESPACE"," ",214],["T_VARIABLE","$checkout",214],["T_OBJECT_OPERATOR","->",214],["T_STRING","getPayment",214],"(",")",")",["T_WHITESPACE"," ",214],"{",["T_WHITESPACE","\n            ",214],["T_VARIABLE","$paymentMethod",215],["T_WHITESPACE"," ",215],"=",["T_WHITESPACE"," ",215],["T_VARIABLE","$paymentInfo",215],["T_OBJECT_OPERATOR","->",215],["T_STRING","getMethod",215],"(",")",";",["T_WHITESPACE","\n        ",215],"}",["T_WHITESPACE","\n\n        ",216],["T_VARIABLE","$items",218],["T_WHITESPACE"," ",218],"=",["T_WHITESPACE"," ",218],["T_CONSTANT_ENCAPSED_STRING","''",218],";",["T_WHITESPACE","\n        ",218],["T_FOREACH","foreach",219],["T_WHITESPACE"," ",219],"(",["T_VARIABLE","$checkout",219],["T_OBJECT_OPERATOR","->",219],["T_STRING","getAllVisibleItems",219],"(",")",["T_WHITESPACE"," ",219],["T_AS","as",219],["T_WHITESPACE"," ",219],["T_VARIABLE","$_item",219],")",["T_WHITESPACE"," ",219],"{",["T_WHITESPACE","\n            ",219],["T_COMMENT","\/* @var $_item Mage_Sales_Model_Quote_Item *\/",220],["T_WHITESPACE","\n            ",220],["T_VARIABLE","$items",221],["T_WHITESPACE"," ",221],["T_CONCAT_EQUAL",".=",221],["T_WHITESPACE"," ",221],["T_VARIABLE","$_item",221],["T_OBJECT_OPERATOR","->",221],["T_STRING","getProduct",221],"(",")",["T_OBJECT_OPERATOR","->",221],["T_STRING","getName",221],"(",")",["T_WHITESPACE"," ",221],".",["T_WHITESPACE"," ",221],["T_CONSTANT_ENCAPSED_STRING","'  x '",221],".",["T_WHITESPACE"," ",221],["T_VARIABLE","$_item",221],["T_OBJECT_OPERATOR","->",221],["T_STRING","getQty",221],"(",")",["T_WHITESPACE"," ",221],".",["T_WHITESPACE"," ",221],["T_CONSTANT_ENCAPSED_STRING","'  '",221],["T_WHITESPACE","\n                ",221],".",["T_WHITESPACE"," ",222],["T_VARIABLE","$checkout",222],["T_OBJECT_OPERATOR","->",222],["T_STRING","getStoreCurrencyCode",222],"(",")",["T_WHITESPACE"," ",222],".",["T_WHITESPACE"," ",222],["T_CONSTANT_ENCAPSED_STRING","' '",222],["T_WHITESPACE","\n                ",222],".",["T_WHITESPACE"," ",223],["T_VARIABLE","$_item",223],["T_OBJECT_OPERATOR","->",223],["T_STRING","getProduct",223],"(",")",["T_OBJECT_OPERATOR","->",223],["T_STRING","getFinalPrice",223],"(",["T_VARIABLE","$_item",223],["T_OBJECT_OPERATOR","->",223],["T_STRING","getQty",223],"(",")",")",["T_WHITESPACE"," ",223],".",["T_WHITESPACE"," ",223],["T_CONSTANT_ENCAPSED_STRING","\"\\n\"",223],";",["T_WHITESPACE","\n        ",223],"}",["T_WHITESPACE","\n        ",224],["T_VARIABLE","$total",225],["T_WHITESPACE"," ",225],"=",["T_WHITESPACE"," ",225],["T_VARIABLE","$checkout",225],["T_OBJECT_OPERATOR","->",225],["T_STRING","getStoreCurrencyCode",225],"(",")",["T_WHITESPACE"," ",225],".",["T_WHITESPACE"," ",225],["T_CONSTANT_ENCAPSED_STRING","' '",225],["T_WHITESPACE"," ",225],".",["T_WHITESPACE"," ",225],["T_VARIABLE","$checkout",225],["T_OBJECT_OPERATOR","->",225],["T_STRING","getGrandTotal",225],"(",")",";",["T_WHITESPACE","\n\n        ",225],["T_FOREACH","foreach",227],["T_WHITESPACE"," ",227],"(",["T_VARIABLE","$sendTo",227],["T_WHITESPACE"," ",227],["T_AS","as",227],["T_WHITESPACE"," ",227],["T_VARIABLE","$recipient",227],")",["T_WHITESPACE"," ",227],"{",["T_WHITESPACE","\n            ",227],["T_VARIABLE","$mailTemplate",228],["T_OBJECT_OPERATOR","->",228],["T_STRING","setDesignConfig",228],"(",["T_ARRAY","array",228],"(",["T_CONSTANT_ENCAPSED_STRING","'area'",228],["T_DOUBLE_ARROW","=>",228],["T_CONSTANT_ENCAPSED_STRING","'frontend'",228],",",["T_WHITESPACE"," ",228],["T_CONSTANT_ENCAPSED_STRING","'store'",228],["T_DOUBLE_ARROW","=>",228],["T_VARIABLE","$checkout",228],["T_OBJECT_OPERATOR","->",228],["T_STRING","getStoreId",228],"(",")",")",")",["T_WHITESPACE","\n                ",228],["T_OBJECT_OPERATOR","->",229],["T_STRING","sendTransactional",229],"(",["T_WHITESPACE","\n                ",229],["T_VARIABLE","$template",230],",",["T_WHITESPACE","\n                ",230],["T_STRING","Mage",231],["T_DOUBLE_COLON","::",231],["T_STRING","getStoreConfig",231],"(",["T_CONSTANT_ENCAPSED_STRING","'checkout\/payment_failed\/identity'",231],",",["T_WHITESPACE"," ",231],["T_VARIABLE","$checkout",231],["T_OBJECT_OPERATOR","->",231],["T_STRING","getStoreId",231],"(",")",")",",",["T_WHITESPACE","\n                ",231],["T_VARIABLE","$recipient",232],"[",["T_CONSTANT_ENCAPSED_STRING","'email'",232],"]",",",["T_WHITESPACE","\n                ",232],["T_VARIABLE","$recipient",233],"[",["T_CONSTANT_ENCAPSED_STRING","'name'",233],"]",",",["T_WHITESPACE","\n                    ",233],["T_ARRAY","array",234],"(",["T_WHITESPACE","\n                        ",234],["T_CONSTANT_ENCAPSED_STRING","'reason'",235],["T_WHITESPACE","          ",235],["T_DOUBLE_ARROW","=>",235],["T_WHITESPACE"," ",235],["T_VARIABLE","$message",235],",",["T_WHITESPACE","\n                        ",235],["T_CONSTANT_ENCAPSED_STRING","'checkoutType'",236],["T_WHITESPACE","    ",236],["T_DOUBLE_ARROW","=>",236],["T_WHITESPACE"," ",236],["T_VARIABLE","$checkoutType",236],",",["T_WHITESPACE","\n                        ",236],["T_CONSTANT_ENCAPSED_STRING","'dateAndTime'",237],["T_WHITESPACE","     ",237],["T_DOUBLE_ARROW","=>",237],["T_WHITESPACE"," ",237],["T_STRING","Mage",237],["T_DOUBLE_COLON","::",237],["T_STRING","app",237],"(",")",["T_OBJECT_OPERATOR","->",237],["T_STRING","getLocale",237],"(",")",["T_OBJECT_OPERATOR","->",237],["T_STRING","date",237],"(",")",",",["T_WHITESPACE","\n                        ",237],["T_CONSTANT_ENCAPSED_STRING","'customer'",238],["T_WHITESPACE","        ",238],["T_DOUBLE_ARROW","=>",238],["T_WHITESPACE"," ",238],["T_STRING","Mage",238],["T_DOUBLE_COLON","::",238],["T_STRING","helper",238],"(",["T_CONSTANT_ENCAPSED_STRING","'customer'",238],")",["T_OBJECT_OPERATOR","->",238],["T_STRING","getFullCustomerName",238],"(",["T_VARIABLE","$checkout",238],")",",",["T_WHITESPACE","\n                        ",238],["T_CONSTANT_ENCAPSED_STRING","'customerEmail'",239],["T_WHITESPACE","   ",239],["T_DOUBLE_ARROW","=>",239],["T_WHITESPACE"," ",239],["T_VARIABLE","$checkout",239],["T_OBJECT_OPERATOR","->",239],["T_STRING","getCustomerEmail",239],"(",")",",",["T_WHITESPACE","\n                        ",239],["T_CONSTANT_ENCAPSED_STRING","'billingAddress'",240],["T_WHITESPACE","  ",240],["T_DOUBLE_ARROW","=>",240],["T_WHITESPACE"," ",240],["T_VARIABLE","$checkout",240],["T_OBJECT_OPERATOR","->",240],["T_STRING","getBillingAddress",240],"(",")",",",["T_WHITESPACE","\n                        ",240],["T_CONSTANT_ENCAPSED_STRING","'shippingAddress'",241],["T_WHITESPACE"," ",241],["T_DOUBLE_ARROW","=>",241],["T_WHITESPACE"," ",241],["T_VARIABLE","$checkout",241],["T_OBJECT_OPERATOR","->",241],["T_STRING","getShippingAddress",241],"(",")",",",["T_WHITESPACE","\n                        ",241],["T_CONSTANT_ENCAPSED_STRING","'shippingMethod'",242],["T_WHITESPACE","  ",242],["T_DOUBLE_ARROW","=>",242],["T_WHITESPACE"," ",242],["T_STRING","Mage",242],["T_DOUBLE_COLON","::",242],["T_STRING","getStoreConfig",242],"(",["T_CONSTANT_ENCAPSED_STRING","'carriers\/'",242],["T_WHITESPACE"," ",242],".",["T_WHITESPACE"," ",242],["T_VARIABLE","$shippingMethod",242],["T_WHITESPACE"," ",242],".",["T_WHITESPACE"," ",242],["T_CONSTANT_ENCAPSED_STRING","'\/title'",242],")",",",["T_WHITESPACE","\n                        ",242],["T_CONSTANT_ENCAPSED_STRING","'paymentMethod'",243],["T_WHITESPACE","   ",243],["T_DOUBLE_ARROW","=>",243],["T_WHITESPACE"," ",243],["T_STRING","Mage",243],["T_DOUBLE_COLON","::",243],["T_STRING","getStoreConfig",243],"(",["T_CONSTANT_ENCAPSED_STRING","'payment\/'",243],["T_WHITESPACE"," ",243],".",["T_WHITESPACE"," ",243],["T_VARIABLE","$paymentMethod",243],["T_WHITESPACE"," ",243],".",["T_WHITESPACE"," ",243],["T_CONSTANT_ENCAPSED_STRING","'\/title'",243],")",",",["T_WHITESPACE","\n                        ",243],["T_CONSTANT_ENCAPSED_STRING","'items'",244],["T_WHITESPACE","           ",244],["T_DOUBLE_ARROW","=>",244],["T_WHITESPACE"," ",244],["T_STRING","nl2br",244],"(",["T_VARIABLE","$items",244],")",",",["T_WHITESPACE","\n                        ",244],["T_CONSTANT_ENCAPSED_STRING","'total'",245],["T_WHITESPACE","           ",245],["T_DOUBLE_ARROW","=>",245],["T_WHITESPACE"," ",245],["T_VARIABLE","$total",245],",",["T_WHITESPACE","\n                    ",245],")",["T_WHITESPACE","\n            ",246],")",";",["T_WHITESPACE","\n        ",247],"}",["T_WHITESPACE","\n\n        ",248],["T_VARIABLE","$translate",250],["T_OBJECT_OPERATOR","->",250],["T_STRING","setTranslateInline",250],"(",["T_STRING","true",250],")",";",["T_WHITESPACE","\n\n        ",250],["T_RETURN","return",252],["T_WHITESPACE"," ",252],["T_VARIABLE","$this",252],";",["T_WHITESPACE","\n    ",252],"}",["T_WHITESPACE","\n\n    ",253],["T_PROTECTED","protected",255],["T_WHITESPACE"," ",255],["T_FUNCTION","function",255],["T_WHITESPACE"," ",255],["T_STRING","_getEmails",255],"(",["T_VARIABLE","$configPath",255],",",["T_WHITESPACE"," ",255],["T_VARIABLE","$storeId",255],")",["T_WHITESPACE","\n    ",255],"{",["T_WHITESPACE","\n        ",256],["T_VARIABLE","$data",257],["T_WHITESPACE"," ",257],"=",["T_WHITESPACE"," ",257],["T_STRING","Mage",257],["T_DOUBLE_COLON","::",257],["T_STRING","getStoreConfig",257],"(",["T_VARIABLE","$configPath",257],",",["T_WHITESPACE"," ",257],["T_VARIABLE","$storeId",257],")",";",["T_WHITESPACE","\n        ",257],["T_IF","if",258],["T_WHITESPACE"," ",258],"(","!",["T_EMPTY","empty",258],"(",["T_VARIABLE","$data",258],")",")",["T_WHITESPACE"," ",258],"{",["T_WHITESPACE","\n            ",258],["T_RETURN","return",259],["T_WHITESPACE"," ",259],["T_STRING","explode",259],"(",["T_CONSTANT_ENCAPSED_STRING","','",259],",",["T_WHITESPACE"," ",259],["T_VARIABLE","$data",259],")",";",["T_WHITESPACE","\n        ",259],"}",["T_WHITESPACE","\n        ",260],["T_RETURN","return",261],["T_WHITESPACE"," ",261],["T_STRING","false",261],";",["T_WHITESPACE","\n    ",261],"}",["T_WHITESPACE","\n\n    ",262],["T_DOC_COMMENT","\/**\n     * Check if multishipping checkout is available.\n     * There should be a valid quote in checkout session. If not, only the config value will be returned.\n     *\n     * @return bool\n     *\/",264],["T_WHITESPACE","\n    ",269],["T_PUBLIC","public",270],["T_WHITESPACE"," ",270],["T_FUNCTION","function",270],["T_WHITESPACE"," ",270],["T_STRING","isMultishippingCheckoutAvailable",270],"(",")",["T_WHITESPACE","\n    ",270],"{",["T_WHITESPACE","\n        ",271],["T_VARIABLE","$quote",272],["T_WHITESPACE"," ",272],"=",["T_WHITESPACE"," ",272],["T_VARIABLE","$this",272],["T_OBJECT_OPERATOR","->",272],["T_STRING","getQuote",272],"(",")",";",["T_WHITESPACE","\n        ",272],["T_VARIABLE","$isMultiShipping",273],["T_WHITESPACE"," ",273],"=",["T_WHITESPACE"," ",273],["T_BOOL_CAST","(bool)",273],["T_INT_CAST","(int)",273],["T_STRING","Mage",273],["T_DOUBLE_COLON","::",273],["T_STRING","getStoreConfig",273],"(",["T_CONSTANT_ENCAPSED_STRING","'shipping\/option\/checkout_multiple'",273],")",";",["T_WHITESPACE","\n        ",273],["T_IF","if",274],["T_WHITESPACE"," ",274],"(","(","!",["T_VARIABLE","$quote",274],")",["T_WHITESPACE"," ",274],["T_BOOLEAN_OR","||",274],["T_WHITESPACE"," ",274],"!",["T_VARIABLE","$quote",274],["T_OBJECT_OPERATOR","->",274],["T_STRING","hasItems",274],"(",")",")",["T_WHITESPACE"," ",274],"{",["T_WHITESPACE","\n            ",274],["T_RETURN","return",275],["T_WHITESPACE"," ",275],["T_VARIABLE","$isMultiShipping",275],";",["T_WHITESPACE","\n        ",275],"}",["T_WHITESPACE","\n        ",276],["T_VARIABLE","$maximunQty",277],["T_WHITESPACE"," ",277],"=",["T_WHITESPACE"," ",277],["T_INT_CAST","(int)",277],["T_STRING","Mage",277],["T_DOUBLE_COLON","::",277],["T_STRING","getStoreConfig",277],"(",["T_CONSTANT_ENCAPSED_STRING","'shipping\/option\/checkout_multiple_maximum_qty'",277],")",";",["T_WHITESPACE","\n        ",277],["T_RETURN","return",278],["T_WHITESPACE"," ",278],["T_VARIABLE","$isMultiShipping",278],["T_WHITESPACE","\n            ",278],["T_BOOLEAN_AND","&&",279],["T_WHITESPACE"," ",279],"!",["T_VARIABLE","$quote",279],["T_OBJECT_OPERATOR","->",279],["T_STRING","hasItemsWithDecimalQty",279],"(",")",["T_WHITESPACE","\n            ",279],["T_BOOLEAN_AND","&&",280],["T_WHITESPACE"," ",280],["T_VARIABLE","$quote",280],["T_OBJECT_OPERATOR","->",280],["T_STRING","validateMinimumAmount",280],"(",["T_STRING","true",280],")",["T_WHITESPACE","\n            ",280],["T_BOOLEAN_AND","&&",281],["T_WHITESPACE"," ",281],"(","(",["T_VARIABLE","$quote",281],["T_OBJECT_OPERATOR","->",281],["T_STRING","getItemsSummaryQty",281],"(",")",["T_WHITESPACE"," ",281],"-",["T_WHITESPACE"," ",281],["T_VARIABLE","$quote",281],["T_OBJECT_OPERATOR","->",281],["T_STRING","getItemVirtualQty",281],"(",")",")",["T_WHITESPACE"," ",281],">",["T_WHITESPACE"," ",281],["T_LNUMBER","0",281],")",["T_WHITESPACE","\n            ",281],["T_BOOLEAN_AND","&&",282],["T_WHITESPACE"," ",282],"(",["T_VARIABLE","$quote",282],["T_OBJECT_OPERATOR","->",282],["T_STRING","getItemsSummaryQty",282],"(",")",["T_WHITESPACE"," ",282],["T_IS_SMALLER_OR_EQUAL","<=",282],["T_WHITESPACE"," ",282],["T_VARIABLE","$maximunQty",282],")",["T_WHITESPACE","\n            ",282],["T_BOOLEAN_AND","&&",283],["T_WHITESPACE"," ",283],"!",["T_VARIABLE","$quote",283],["T_OBJECT_OPERATOR","->",283],["T_STRING","hasNominalItems",283],"(",")",["T_WHITESPACE","\n            ",283],";",["T_WHITESPACE","\n    ",284],"}",["T_WHITESPACE","\n\n    ",285],["T_DOC_COMMENT","\/**\n     * Check is allowed Guest Checkout\n     * Use config settings and observer\n     *\n     * @param Mage_Sales_Model_Quote $quote\n     * @param int|Mage_Core_Model_Store $store\n     * @return bool\n     *\/",287],["T_WHITESPACE","\n    ",294],["T_PUBLIC","public",295],["T_WHITESPACE"," ",295],["T_FUNCTION","function",295],["T_WHITESPACE"," ",295],["T_STRING","isAllowedGuestCheckout",295],"(",["T_STRING","Mage_Sales_Model_Quote",295],["T_WHITESPACE"," ",295],["T_VARIABLE","$quote",295],",",["T_WHITESPACE"," ",295],["T_VARIABLE","$store",295],["T_WHITESPACE"," ",295],"=",["T_WHITESPACE"," ",295],["T_STRING","null",295],")",["T_WHITESPACE","\n    ",295],"{",["T_WHITESPACE","\n        ",296],["T_IF","if",297],["T_WHITESPACE"," ",297],"(",["T_VARIABLE","$store",297],["T_WHITESPACE"," ",297],["T_IS_IDENTICAL","===",297],["T_WHITESPACE"," ",297],["T_STRING","null",297],")",["T_WHITESPACE"," ",297],"{",["T_WHITESPACE","\n            ",297],["T_VARIABLE","$store",298],["T_WHITESPACE"," ",298],"=",["T_WHITESPACE"," ",298],["T_VARIABLE","$quote",298],["T_OBJECT_OPERATOR","->",298],["T_STRING","getStoreId",298],"(",")",";",["T_WHITESPACE","\n        ",298],"}",["T_WHITESPACE","\n        ",299],["T_VARIABLE","$guestCheckout",300],["T_WHITESPACE"," ",300],"=",["T_WHITESPACE"," ",300],["T_STRING","Mage",300],["T_DOUBLE_COLON","::",300],["T_STRING","getStoreConfigFlag",300],"(",["T_STRING","self",300],["T_DOUBLE_COLON","::",300],["T_STRING","XML_PATH_GUEST_CHECKOUT",300],",",["T_WHITESPACE"," ",300],["T_VARIABLE","$store",300],")",";",["T_WHITESPACE","\n\n        ",300],["T_IF","if",302],["T_WHITESPACE"," ",302],"(",["T_VARIABLE","$guestCheckout",302],["T_WHITESPACE"," ",302],["T_IS_EQUAL","==",302],["T_WHITESPACE"," ",302],["T_STRING","true",302],")",["T_WHITESPACE"," ",302],"{",["T_WHITESPACE","\n            ",302],["T_VARIABLE","$result",303],["T_WHITESPACE"," ",303],"=",["T_WHITESPACE"," ",303],["T_NEW","new",303],["T_WHITESPACE"," ",303],["T_STRING","Varien_Object",303],"(",")",";",["T_WHITESPACE","\n            ",303],["T_VARIABLE","$result",304],["T_OBJECT_OPERATOR","->",304],["T_STRING","setIsAllowed",304],"(",["T_VARIABLE","$guestCheckout",304],")",";",["T_WHITESPACE","\n            ",304],["T_STRING","Mage",305],["T_DOUBLE_COLON","::",305],["T_STRING","dispatchEvent",305],"(",["T_CONSTANT_ENCAPSED_STRING","'checkout_allow_guest'",305],",",["T_WHITESPACE"," ",305],["T_ARRAY","array",305],"(",["T_WHITESPACE","\n                ",305],["T_CONSTANT_ENCAPSED_STRING","'quote'",306],["T_WHITESPACE","  ",306],["T_DOUBLE_ARROW","=>",306],["T_WHITESPACE"," ",306],["T_VARIABLE","$quote",306],",",["T_WHITESPACE","\n                ",306],["T_CONSTANT_ENCAPSED_STRING","'store'",307],["T_WHITESPACE","  ",307],["T_DOUBLE_ARROW","=>",307],["T_WHITESPACE"," ",307],["T_VARIABLE","$store",307],",",["T_WHITESPACE","\n                ",307],["T_CONSTANT_ENCAPSED_STRING","'result'",308],["T_WHITESPACE"," ",308],["T_DOUBLE_ARROW","=>",308],["T_WHITESPACE"," ",308],["T_VARIABLE","$result",308],["T_WHITESPACE","\n            ",308],")",")",";",["T_WHITESPACE","\n\n            ",309],["T_VARIABLE","$guestCheckout",311],["T_WHITESPACE"," ",311],"=",["T_WHITESPACE"," ",311],["T_VARIABLE","$result",311],["T_OBJECT_OPERATOR","->",311],["T_STRING","getIsAllowed",311],"(",")",";",["T_WHITESPACE","\n        ",311],"}",["T_WHITESPACE","\n\n        ",312],["T_RETURN","return",314],["T_WHITESPACE"," ",314],["T_VARIABLE","$guestCheckout",314],";",["T_WHITESPACE","\n    ",314],"}",["T_WHITESPACE","\n\n    ",315],["T_DOC_COMMENT","\/**\n     * Check if context is checkout\n     *\n     * @return bool\n     *\/",317],["T_WHITESPACE","\n    ",321],["T_PUBLIC","public",322],["T_WHITESPACE"," ",322],["T_FUNCTION","function",322],["T_WHITESPACE"," ",322],["T_STRING","isContextCheckout",322],"(",")",["T_WHITESPACE","\n    ",322],"{",["T_WHITESPACE","\n        ",323],["T_RETURN","return",324],["T_WHITESPACE"," ",324],"(",["T_STRING","Mage",324],["T_DOUBLE_COLON","::",324],["T_STRING","app",324],"(",")",["T_OBJECT_OPERATOR","->",324],["T_STRING","getRequest",324],"(",")",["T_OBJECT_OPERATOR","->",324],["T_STRING","getParam",324],"(",["T_CONSTANT_ENCAPSED_STRING","'context'",324],")",["T_WHITESPACE"," ",324],["T_IS_EQUAL","==",324],["T_WHITESPACE"," ",324],["T_CONSTANT_ENCAPSED_STRING","'checkout'",324],")",";",["T_WHITESPACE","\n    ",324],"}",["T_WHITESPACE","\n\n    ",325],["T_DOC_COMMENT","\/**\n     * Check if user must be logged during checkout process\n     *\n     * @return boolean\n     *\/",327],["T_WHITESPACE","\n    ",331],["T_PUBLIC","public",332],["T_WHITESPACE"," ",332],["T_FUNCTION","function",332],["T_WHITESPACE"," ",332],["T_STRING","isCustomerMustBeLogged",332],"(",")",["T_WHITESPACE","\n    ",332],"{",["T_WHITESPACE","\n        ",333],["T_RETURN","return",334],["T_WHITESPACE"," ",334],["T_STRING","Mage",334],["T_DOUBLE_COLON","::",334],["T_STRING","getStoreConfigFlag",334],"(",["T_STRING","self",334],["T_DOUBLE_COLON","::",334],["T_STRING","XML_PATH_CUSTOMER_MUST_BE_LOGGED",334],")",";",["T_WHITESPACE","\n    ",334],"}",["T_WHITESPACE","\n",335],"}",["T_WHITESPACE","\n",336]]
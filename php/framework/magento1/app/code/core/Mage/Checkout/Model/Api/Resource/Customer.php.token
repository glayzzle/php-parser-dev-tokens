[["T_OPEN_TAG","<?php\n",1],["T_DOC_COMMENT","\/**\n * Magento\n *\n * NOTICE OF LICENSE\n *\n * This source file is subject to the Open Software License (OSL 3.0)\n * that is bundled with this package in the file LICENSE.txt.\n * It is also available through the world-wide-web at this URL:\n * http:\/\/opensource.org\/licenses\/osl-3.0.php\n * If you did not receive a copy of the license and are unable to\n * obtain it through the world-wide-web, please send an email\n * to license@magento.com so we can send you a copy immediately.\n *\n * DISCLAIMER\n *\n * Do not edit or add to this file if you wish to upgrade Magento to newer\n * versions in the future. If you wish to customize Magento for your\n * needs please refer to http:\/\/www.magento.com for more information.\n *\n * @category    Mage\n * @package     Mage_Checkout\n * @copyright  Copyright (c) 2006-2016 X.commerce, Inc. and affiliates (http:\/\/www.magento.com)\n * @license    http:\/\/opensource.org\/licenses\/osl-3.0.php  Open Software License (OSL 3.0)\n *\/",2],["T_WHITESPACE","\n\n",25],["T_DOC_COMMENT","\/**\n * Checkout api resource for Customer\n *\n * @category   Mage\n * @package    Mage_Checkout\n * @author     Magento Core Team <core@magentocommerce.com>\n *\/",27],["T_WHITESPACE","\n",33],["T_CLASS","class",34],["T_WHITESPACE"," ",34],["T_STRING","Mage_Checkout_Model_Api_Resource_Customer",34],["T_WHITESPACE"," ",34],["T_EXTENDS","extends",34],["T_WHITESPACE"," ",34],["T_STRING","Mage_Checkout_Model_Api_Resource",34],["T_WHITESPACE","\n",34],"{",["T_WHITESPACE","\n    ",35],["T_DOC_COMMENT","\/**\n     * Customer address types\n     *\/",36],["T_WHITESPACE","\n    ",38],["T_CONST","const",39],["T_WHITESPACE"," ",39],["T_STRING","ADDRESS_BILLING",39],["T_WHITESPACE","    ",39],"=",["T_WHITESPACE"," ",39],["T_STRING","Mage_Sales_Model_Quote_Address",39],["T_DOUBLE_COLON","::",39],["T_STRING","TYPE_BILLING",39],";",["T_WHITESPACE","\n    ",39],["T_CONST","const",40],["T_WHITESPACE"," ",40],["T_STRING","ADDRESS_SHIPPING",40],["T_WHITESPACE","   ",40],"=",["T_WHITESPACE"," ",40],["T_STRING","Mage_Sales_Model_Quote_Address",40],["T_DOUBLE_COLON","::",40],["T_STRING","TYPE_SHIPPING",40],";",["T_WHITESPACE","\n\n    ",40],["T_DOC_COMMENT","\/**\n     * Customer checkout types\n     *\/",42],["T_WHITESPACE","\n     ",44],["T_CONST","const",45],["T_WHITESPACE"," ",45],["T_STRING","MODE_CUSTOMER",45],["T_WHITESPACE"," ",45],"=",["T_WHITESPACE"," ",45],["T_STRING","Mage_Checkout_Model_Type_Onepage",45],["T_DOUBLE_COLON","::",45],["T_STRING","METHOD_CUSTOMER",45],";",["T_WHITESPACE","\n     ",45],["T_CONST","const",46],["T_WHITESPACE"," ",46],["T_STRING","MODE_REGISTER",46],["T_WHITESPACE"," ",46],"=",["T_WHITESPACE"," ",46],["T_STRING","Mage_Checkout_Model_Type_Onepage",46],["T_DOUBLE_COLON","::",46],["T_STRING","METHOD_REGISTER",46],";",["T_WHITESPACE","\n     ",46],["T_CONST","const",47],["T_WHITESPACE"," ",47],["T_STRING","MODE_GUEST",47],["T_WHITESPACE","    ",47],"=",["T_WHITESPACE"," ",47],["T_STRING","Mage_Checkout_Model_Type_Onepage",47],["T_DOUBLE_COLON","::",47],["T_STRING","METHOD_GUEST",47],";",["T_WHITESPACE","\n\n\n    ",47],["T_DOC_COMMENT","\/**\n     *\n     *\/",50],["T_WHITESPACE","\n    ",52],["T_PROTECTED","protected",53],["T_WHITESPACE"," ",53],["T_FUNCTION","function",53],["T_WHITESPACE"," ",53],["T_STRING","_getCustomer",53],"(",["T_VARIABLE","$customerId",53],")",["T_WHITESPACE","\n    ",53],"{",["T_WHITESPACE","\n        ",54],["T_DOC_COMMENT","\/** @var $customer Mage_Customer_Model_Customer *\/",55],["T_WHITESPACE","\n        ",55],["T_VARIABLE","$customer",56],["T_WHITESPACE"," ",56],"=",["T_WHITESPACE"," ",56],["T_STRING","Mage",56],["T_DOUBLE_COLON","::",56],["T_STRING","getModel",56],"(",["T_CONSTANT_ENCAPSED_STRING","'customer\/customer'",56],")",["T_WHITESPACE","\n            ",56],["T_OBJECT_OPERATOR","->",57],["T_STRING","load",57],"(",["T_VARIABLE","$customerId",57],")",";",["T_WHITESPACE","\n        ",57],["T_IF","if",58],["T_WHITESPACE"," ",58],"(","!",["T_VARIABLE","$customer",58],["T_OBJECT_OPERATOR","->",58],["T_STRING","getId",58],"(",")",")",["T_WHITESPACE"," ",58],"{",["T_WHITESPACE","\n            ",58],["T_VARIABLE","$this",59],["T_OBJECT_OPERATOR","->",59],["T_STRING","_fault",59],"(",["T_CONSTANT_ENCAPSED_STRING","'customer_not_exists'",59],")",";",["T_WHITESPACE","\n        ",59],"}",["T_WHITESPACE","\n\n        ",60],["T_RETURN","return",62],["T_WHITESPACE"," ",62],["T_VARIABLE","$customer",62],";",["T_WHITESPACE","\n    ",62],"}",["T_WHITESPACE","\n\n    ",63],["T_DOC_COMMENT","\/**\n     * Get customer address by identifier\n     *\n     * @param   int $addressId\n     * @return  Mage_Customer_Model_Address\n     *\/",65],["T_WHITESPACE","\n    ",70],["T_PROTECTED","protected",71],["T_WHITESPACE"," ",71],["T_FUNCTION","function",71],["T_WHITESPACE"," ",71],["T_STRING","_getCustomerAddress",71],"(",["T_VARIABLE","$addressId",71],")",["T_WHITESPACE","\n    ",71],"{",["T_WHITESPACE","\n        ",72],["T_VARIABLE","$address",73],["T_WHITESPACE"," ",73],"=",["T_WHITESPACE"," ",73],["T_STRING","Mage",73],["T_DOUBLE_COLON","::",73],["T_STRING","getModel",73],"(",["T_CONSTANT_ENCAPSED_STRING","'customer\/address'",73],")",["T_OBJECT_OPERATOR","->",73],["T_STRING","load",73],"(",["T_INT_CAST","(int)",73],["T_VARIABLE","$addressId",73],")",";",["T_WHITESPACE","\n        ",73],["T_IF","if",74],["T_WHITESPACE"," ",74],"(",["T_STRING","is_null",74],"(",["T_VARIABLE","$address",74],["T_OBJECT_OPERATOR","->",74],["T_STRING","getId",74],"(",")",")",")",["T_WHITESPACE"," ",74],"{",["T_WHITESPACE","\n            ",74],["T_VARIABLE","$this",75],["T_OBJECT_OPERATOR","->",75],["T_STRING","_fault",75],"(",["T_CONSTANT_ENCAPSED_STRING","'invalid_address_id'",75],")",";",["T_WHITESPACE","\n        ",75],"}",["T_WHITESPACE","\n\n        ",76],["T_VARIABLE","$address",78],["T_OBJECT_OPERATOR","->",78],["T_STRING","explodeStreetAddress",78],"(",")",";",["T_WHITESPACE","\n        ",78],["T_IF","if",79],["T_WHITESPACE"," ",79],"(",["T_VARIABLE","$address",79],["T_OBJECT_OPERATOR","->",79],["T_STRING","getRegionId",79],"(",")",")",["T_WHITESPACE"," ",79],"{",["T_WHITESPACE","\n            ",79],["T_VARIABLE","$address",80],["T_OBJECT_OPERATOR","->",80],["T_STRING","setRegion",80],"(",["T_VARIABLE","$address",80],["T_OBJECT_OPERATOR","->",80],["T_STRING","getRegionId",80],"(",")",")",";",["T_WHITESPACE","\n        ",80],"}",["T_WHITESPACE","\n        ",81],["T_RETURN","return",82],["T_WHITESPACE"," ",82],["T_VARIABLE","$address",82],";",["T_WHITESPACE","\n    ",82],"}",["T_WHITESPACE","\n\n    ",83],["T_DOC_COMMENT","\/**\n     * @param Mage_Sales_Model_Quote $quote\n     * @return bool\n     *\/",85],["T_WHITESPACE","\n    ",88],["T_PUBLIC","public",89],["T_WHITESPACE"," ",89],["T_FUNCTION","function",89],["T_WHITESPACE"," ",89],["T_STRING","prepareCustomerForQuote",89],"(",["T_STRING","Mage_Sales_Model_Quote",89],["T_WHITESPACE"," ",89],["T_VARIABLE","$quote",89],")",["T_WHITESPACE","\n    ",89],"{",["T_WHITESPACE","\n        ",90],["T_VARIABLE","$isNewCustomer",91],["T_WHITESPACE"," ",91],"=",["T_WHITESPACE"," ",91],["T_STRING","false",91],";",["T_WHITESPACE","\n        ",91],["T_SWITCH","switch",92],["T_WHITESPACE"," ",92],"(",["T_VARIABLE","$quote",92],["T_OBJECT_OPERATOR","->",92],["T_STRING","getCheckoutMethod",92],"(",")",")",["T_WHITESPACE"," ",92],"{",["T_WHITESPACE","\n        ",92],["T_CASE","case",93],["T_WHITESPACE"," ",93],["T_STRING","self",93],["T_DOUBLE_COLON","::",93],["T_STRING","MODE_GUEST",93],":",["T_WHITESPACE","\n            ",93],["T_VARIABLE","$this",94],["T_OBJECT_OPERATOR","->",94],["T_STRING","_prepareGuestQuote",94],"(",["T_VARIABLE","$quote",94],")",";",["T_WHITESPACE","\n            ",94],["T_BREAK","break",95],";",["T_WHITESPACE","\n        ",95],["T_CASE","case",96],["T_WHITESPACE"," ",96],["T_STRING","self",96],["T_DOUBLE_COLON","::",96],["T_STRING","MODE_REGISTER",96],":",["T_WHITESPACE","\n            ",96],["T_VARIABLE","$this",97],["T_OBJECT_OPERATOR","->",97],["T_STRING","_prepareNewCustomerQuote",97],"(",["T_VARIABLE","$quote",97],")",";",["T_WHITESPACE","\n            ",97],["T_VARIABLE","$isNewCustomer",98],["T_WHITESPACE"," ",98],"=",["T_WHITESPACE"," ",98],["T_STRING","true",98],";",["T_WHITESPACE","\n            ",98],["T_BREAK","break",99],";",["T_WHITESPACE","\n        ",99],["T_DEFAULT","default",100],":",["T_WHITESPACE","\n            ",100],["T_VARIABLE","$this",101],["T_OBJECT_OPERATOR","->",101],["T_STRING","_prepareCustomerQuote",101],"(",["T_VARIABLE","$quote",101],")",";",["T_WHITESPACE","\n            ",101],["T_BREAK","break",102],";",["T_WHITESPACE","\n        ",102],"}",["T_WHITESPACE","\n\n        ",103],["T_RETURN","return",105],["T_WHITESPACE"," ",105],["T_VARIABLE","$isNewCustomer",105],";",["T_WHITESPACE","\n    ",105],"}",["T_WHITESPACE","\n\n    ",106],["T_DOC_COMMENT","\/**\n     * Prepare quote for guest checkout order submit\n     *\n     * @param Mage_Sales_Model_Quote $quote\n     * @return Mage_Checkout_Model_Api_Resource_Customer\n     *\/",108],["T_WHITESPACE","\n    ",113],["T_PROTECTED","protected",114],["T_WHITESPACE"," ",114],["T_FUNCTION","function",114],["T_WHITESPACE"," ",114],["T_STRING","_prepareGuestQuote",114],"(",["T_STRING","Mage_Sales_Model_Quote",114],["T_WHITESPACE"," ",114],["T_VARIABLE","$quote",114],")",["T_WHITESPACE","\n    ",114],"{",["T_WHITESPACE","\n        ",115],["T_VARIABLE","$quote",116],["T_OBJECT_OPERATOR","->",116],["T_STRING","setCustomerId",116],"(",["T_STRING","null",116],")",["T_WHITESPACE","\n            ",116],["T_OBJECT_OPERATOR","->",117],["T_STRING","setCustomerEmail",117],"(",["T_VARIABLE","$quote",117],["T_OBJECT_OPERATOR","->",117],["T_STRING","getBillingAddress",117],"(",")",["T_OBJECT_OPERATOR","->",117],["T_STRING","getEmail",117],"(",")",")",["T_WHITESPACE","\n            ",117],["T_OBJECT_OPERATOR","->",118],["T_STRING","setCustomerIsGuest",118],"(",["T_STRING","true",118],")",["T_WHITESPACE","\n            ",118],["T_OBJECT_OPERATOR","->",119],["T_STRING","setCustomerGroupId",119],"(",["T_STRING","Mage_Customer_Model_Group",119],["T_DOUBLE_COLON","::",119],["T_STRING","NOT_LOGGED_IN_ID",119],")",";",["T_WHITESPACE","\n        ",119],["T_RETURN","return",120],["T_WHITESPACE"," ",120],["T_VARIABLE","$this",120],";",["T_WHITESPACE","\n    ",120],"}",["T_WHITESPACE","\n\n    ",121],["T_DOC_COMMENT","\/**\n     * Prepare quote for customer registration and customer order submit\n     *\n     * @param Mage_Sales_Model_Quote $quote\n     * @return Mage_Checkout_Model_Api_Resource_Customer\n     *\/",123],["T_WHITESPACE","\n    ",128],["T_PROTECTED","protected",129],["T_WHITESPACE"," ",129],["T_FUNCTION","function",129],["T_WHITESPACE"," ",129],["T_STRING","_prepareNewCustomerQuote",129],"(",["T_STRING","Mage_Sales_Model_Quote",129],["T_WHITESPACE"," ",129],["T_VARIABLE","$quote",129],")",["T_WHITESPACE","\n    ",129],"{",["T_WHITESPACE","\n        ",130],["T_VARIABLE","$billing",131],["T_WHITESPACE","    ",131],"=",["T_WHITESPACE"," ",131],["T_VARIABLE","$quote",131],["T_OBJECT_OPERATOR","->",131],["T_STRING","getBillingAddress",131],"(",")",";",["T_WHITESPACE","\n        ",131],["T_VARIABLE","$shipping",132],["T_WHITESPACE","   ",132],"=",["T_WHITESPACE"," ",132],["T_VARIABLE","$quote",132],["T_OBJECT_OPERATOR","->",132],["T_STRING","isVirtual",132],"(",")",["T_WHITESPACE"," ",132],"?",["T_WHITESPACE"," ",132],["T_STRING","null",132],["T_WHITESPACE"," ",132],":",["T_WHITESPACE"," ",132],["T_VARIABLE","$quote",132],["T_OBJECT_OPERATOR","->",132],["T_STRING","getShippingAddress",132],"(",")",";",["T_WHITESPACE","\n\n        ",132],["T_COMMENT","\/\/$customer = Mage::getModel('customer\/customer');\n",134],["T_WHITESPACE","        ",135],["T_VARIABLE","$customer",135],["T_WHITESPACE"," ",135],"=",["T_WHITESPACE"," ",135],["T_VARIABLE","$quote",135],["T_OBJECT_OPERATOR","->",135],["T_STRING","getCustomer",135],"(",")",";",["T_WHITESPACE","\n        ",135],["T_COMMENT","\/* @var $customer Mage_Customer_Model_Customer *\/",136],["T_WHITESPACE","\n        ",136],["T_VARIABLE","$customerBilling",137],["T_WHITESPACE"," ",137],"=",["T_WHITESPACE"," ",137],["T_VARIABLE","$billing",137],["T_OBJECT_OPERATOR","->",137],["T_STRING","exportCustomerAddress",137],"(",")",";",["T_WHITESPACE","\n        ",137],["T_VARIABLE","$customer",138],["T_OBJECT_OPERATOR","->",138],["T_STRING","addAddress",138],"(",["T_VARIABLE","$customerBilling",138],")",";",["T_WHITESPACE","\n        ",138],["T_VARIABLE","$billing",139],["T_OBJECT_OPERATOR","->",139],["T_STRING","setCustomerAddress",139],"(",["T_VARIABLE","$customerBilling",139],")",";",["T_WHITESPACE","\n        ",139],["T_VARIABLE","$customerBilling",140],["T_OBJECT_OPERATOR","->",140],["T_STRING","setIsDefaultBilling",140],"(",["T_STRING","true",140],")",";",["T_WHITESPACE","\n        ",140],["T_IF","if",141],["T_WHITESPACE"," ",141],"(",["T_VARIABLE","$shipping",141],["T_WHITESPACE"," ",141],["T_BOOLEAN_AND","&&",141],["T_WHITESPACE"," ",141],"!",["T_VARIABLE","$shipping",141],["T_OBJECT_OPERATOR","->",141],["T_STRING","getSameAsBilling",141],"(",")",")",["T_WHITESPACE"," ",141],"{",["T_WHITESPACE","\n            ",141],["T_VARIABLE","$customerShipping",142],["T_WHITESPACE"," ",142],"=",["T_WHITESPACE"," ",142],["T_VARIABLE","$shipping",142],["T_OBJECT_OPERATOR","->",142],["T_STRING","exportCustomerAddress",142],"(",")",";",["T_WHITESPACE","\n            ",142],["T_VARIABLE","$customer",143],["T_OBJECT_OPERATOR","->",143],["T_STRING","addAddress",143],"(",["T_VARIABLE","$customerShipping",143],")",";",["T_WHITESPACE","\n            ",143],["T_VARIABLE","$shipping",144],["T_OBJECT_OPERATOR","->",144],["T_STRING","setCustomerAddress",144],"(",["T_VARIABLE","$customerShipping",144],")",";",["T_WHITESPACE","\n            ",144],["T_VARIABLE","$customerShipping",145],["T_OBJECT_OPERATOR","->",145],["T_STRING","setIsDefaultShipping",145],"(",["T_STRING","true",145],")",";",["T_WHITESPACE","\n        ",145],"}",["T_WHITESPACE"," ",146],["T_ELSE","else",146],["T_WHITESPACE"," ",146],"{",["T_WHITESPACE","\n            ",146],["T_VARIABLE","$customerBilling",147],["T_OBJECT_OPERATOR","->",147],["T_STRING","setIsDefaultShipping",147],"(",["T_STRING","true",147],")",";",["T_WHITESPACE","\n        ",147],"}",["T_WHITESPACE","\n\n        ",148],["T_STRING","Mage",150],["T_DOUBLE_COLON","::",150],["T_STRING","helper",150],"(",["T_CONSTANT_ENCAPSED_STRING","'core'",150],")",["T_OBJECT_OPERATOR","->",150],["T_STRING","copyFieldset",150],"(",["T_CONSTANT_ENCAPSED_STRING","'checkout_onepage_quote'",150],",",["T_WHITESPACE"," ",150],["T_CONSTANT_ENCAPSED_STRING","'to_customer'",150],",",["T_WHITESPACE"," ",150],["T_VARIABLE","$quote",150],",",["T_WHITESPACE"," ",150],["T_VARIABLE","$customer",150],")",";",["T_WHITESPACE","\n        ",150],["T_VARIABLE","$customer",151],["T_OBJECT_OPERATOR","->",151],["T_STRING","setPassword",151],"(",["T_VARIABLE","$customer",151],["T_OBJECT_OPERATOR","->",151],["T_STRING","decryptPassword",151],"(",["T_VARIABLE","$quote",151],["T_OBJECT_OPERATOR","->",151],["T_STRING","getPasswordHash",151],"(",")",")",")",";",["T_WHITESPACE","\n        ",151],["T_VARIABLE","$quote",152],["T_OBJECT_OPERATOR","->",152],["T_STRING","setCustomer",152],"(",["T_VARIABLE","$customer",152],")",["T_WHITESPACE","\n            ",152],["T_OBJECT_OPERATOR","->",153],["T_STRING","setCustomerId",153],"(",["T_STRING","true",153],")",";",["T_WHITESPACE","\n\n        ",153],["T_RETURN","return",155],["T_WHITESPACE"," ",155],["T_VARIABLE","$this",155],";",["T_WHITESPACE","\n    ",155],"}",["T_WHITESPACE","\n\n    ",156],["T_DOC_COMMENT","\/**\n     * Prepare quote for customer order submit\n     *\n     * @param Mage_Sales_Model_Quote $quote\n     * @return Mage_Checkout_Model_Api_Resource_Customer\n     *\/",158],["T_WHITESPACE","\n    ",163],["T_PROTECTED","protected",164],["T_WHITESPACE"," ",164],["T_FUNCTION","function",164],["T_WHITESPACE"," ",164],["T_STRING","_prepareCustomerQuote",164],"(",["T_STRING","Mage_Sales_Model_Quote",164],["T_WHITESPACE"," ",164],["T_VARIABLE","$quote",164],")",["T_WHITESPACE","\n    ",164],"{",["T_WHITESPACE","\n        ",165],["T_VARIABLE","$billing",166],["T_WHITESPACE","    ",166],"=",["T_WHITESPACE"," ",166],["T_VARIABLE","$quote",166],["T_OBJECT_OPERATOR","->",166],["T_STRING","getBillingAddress",166],"(",")",";",["T_WHITESPACE","\n        ",166],["T_VARIABLE","$shipping",167],["T_WHITESPACE","   ",167],"=",["T_WHITESPACE"," ",167],["T_VARIABLE","$quote",167],["T_OBJECT_OPERATOR","->",167],["T_STRING","isVirtual",167],"(",")",["T_WHITESPACE"," ",167],"?",["T_WHITESPACE"," ",167],["T_STRING","null",167],["T_WHITESPACE"," ",167],":",["T_WHITESPACE"," ",167],["T_VARIABLE","$quote",167],["T_OBJECT_OPERATOR","->",167],["T_STRING","getShippingAddress",167],"(",")",";",["T_WHITESPACE","\n\n        ",167],["T_VARIABLE","$customer",169],["T_WHITESPACE"," ",169],"=",["T_WHITESPACE"," ",169],["T_VARIABLE","$quote",169],["T_OBJECT_OPERATOR","->",169],["T_STRING","getCustomer",169],"(",")",";",["T_WHITESPACE","\n        ",169],["T_IF","if",170],["T_WHITESPACE"," ",170],"(","!",["T_VARIABLE","$billing",170],["T_OBJECT_OPERATOR","->",170],["T_STRING","getCustomerId",170],"(",")",["T_WHITESPACE"," ",170],["T_BOOLEAN_OR","||",170],["T_WHITESPACE"," ",170],["T_VARIABLE","$billing",170],["T_OBJECT_OPERATOR","->",170],["T_STRING","getSaveInAddressBook",170],"(",")",")",["T_WHITESPACE"," ",170],"{",["T_WHITESPACE","\n            ",170],["T_VARIABLE","$customerBilling",171],["T_WHITESPACE"," ",171],"=",["T_WHITESPACE"," ",171],["T_VARIABLE","$billing",171],["T_OBJECT_OPERATOR","->",171],["T_STRING","exportCustomerAddress",171],"(",")",";",["T_WHITESPACE","\n            ",171],["T_VARIABLE","$customer",172],["T_OBJECT_OPERATOR","->",172],["T_STRING","addAddress",172],"(",["T_VARIABLE","$customerBilling",172],")",";",["T_WHITESPACE","\n            ",172],["T_VARIABLE","$billing",173],["T_OBJECT_OPERATOR","->",173],["T_STRING","setCustomerAddress",173],"(",["T_VARIABLE","$customerBilling",173],")",";",["T_WHITESPACE","\n        ",173],"}",["T_WHITESPACE","\n        ",174],["T_IF","if",175],["T_WHITESPACE"," ",175],"(",["T_VARIABLE","$shipping",175],["T_WHITESPACE"," ",175],["T_BOOLEAN_AND","&&",175],["T_WHITESPACE"," ",175],"(","(","!",["T_VARIABLE","$shipping",175],["T_OBJECT_OPERATOR","->",175],["T_STRING","getCustomerId",175],"(",")",["T_WHITESPACE"," ",175],["T_BOOLEAN_AND","&&",175],["T_WHITESPACE"," ",175],"!",["T_VARIABLE","$shipping",175],["T_OBJECT_OPERATOR","->",175],["T_STRING","getSameAsBilling",175],"(",")",")",["T_WHITESPACE","\n            ",175],["T_BOOLEAN_OR","||",176],["T_WHITESPACE"," ",176],"(","!",["T_VARIABLE","$shipping",176],["T_OBJECT_OPERATOR","->",176],["T_STRING","getSameAsBilling",176],"(",")",["T_WHITESPACE"," ",176],["T_BOOLEAN_AND","&&",176],["T_WHITESPACE"," ",176],["T_VARIABLE","$shipping",176],["T_OBJECT_OPERATOR","->",176],["T_STRING","getSaveInAddressBook",176],"(",")",")",")",")",["T_WHITESPACE"," ",176],"{",["T_WHITESPACE","\n            ",176],["T_VARIABLE","$customerShipping",177],["T_WHITESPACE"," ",177],"=",["T_WHITESPACE"," ",177],["T_VARIABLE","$shipping",177],["T_OBJECT_OPERATOR","->",177],["T_STRING","exportCustomerAddress",177],"(",")",";",["T_WHITESPACE","\n            ",177],["T_VARIABLE","$customer",178],["T_OBJECT_OPERATOR","->",178],["T_STRING","addAddress",178],"(",["T_VARIABLE","$customerShipping",178],")",";",["T_WHITESPACE","\n            ",178],["T_VARIABLE","$shipping",179],["T_OBJECT_OPERATOR","->",179],["T_STRING","setCustomerAddress",179],"(",["T_VARIABLE","$customerShipping",179],")",";",["T_WHITESPACE","\n        ",179],"}",["T_WHITESPACE","\n\n        ",180],["T_IF","if",182],["T_WHITESPACE"," ",182],"(",["T_ISSET","isset",182],"(",["T_VARIABLE","$customerBilling",182],")",["T_WHITESPACE"," ",182],["T_BOOLEAN_AND","&&",182],["T_WHITESPACE"," ",182],"!",["T_VARIABLE","$customer",182],["T_OBJECT_OPERATOR","->",182],["T_STRING","getDefaultBilling",182],"(",")",")",["T_WHITESPACE"," ",182],"{",["T_WHITESPACE","\n            ",182],["T_VARIABLE","$customerBilling",183],["T_OBJECT_OPERATOR","->",183],["T_STRING","setIsDefaultBilling",183],"(",["T_STRING","true",183],")",";",["T_WHITESPACE","\n        ",183],"}",["T_WHITESPACE","\n        ",184],["T_IF","if",185],["T_WHITESPACE"," ",185],"(",["T_VARIABLE","$shipping",185],["T_WHITESPACE"," ",185],["T_BOOLEAN_AND","&&",185],["T_WHITESPACE"," ",185],["T_ISSET","isset",185],"(",["T_VARIABLE","$customerShipping",185],")",["T_WHITESPACE"," ",185],["T_BOOLEAN_AND","&&",185],["T_WHITESPACE"," ",185],"!",["T_VARIABLE","$customer",185],["T_OBJECT_OPERATOR","->",185],["T_STRING","getDefaultShipping",185],"(",")",")",["T_WHITESPACE"," ",185],"{",["T_WHITESPACE","\n            ",185],["T_VARIABLE","$customerShipping",186],["T_OBJECT_OPERATOR","->",186],["T_STRING","setIsDefaultShipping",186],"(",["T_STRING","true",186],")",";",["T_WHITESPACE","\n        ",186],"}",["T_WHITESPACE"," ",187],["T_ELSE","else",187],["T_WHITESPACE"," ",187],["T_IF","if",187],["T_WHITESPACE"," ",187],"(",["T_ISSET","isset",187],"(",["T_VARIABLE","$customerBilling",187],")",["T_WHITESPACE"," ",187],["T_BOOLEAN_AND","&&",187],["T_WHITESPACE"," ",187],"!",["T_VARIABLE","$customer",187],["T_OBJECT_OPERATOR","->",187],["T_STRING","getDefaultShipping",187],"(",")",")",["T_WHITESPACE"," ",187],"{",["T_WHITESPACE","\n            ",187],["T_VARIABLE","$customerBilling",188],["T_OBJECT_OPERATOR","->",188],["T_STRING","setIsDefaultShipping",188],"(",["T_STRING","true",188],")",";",["T_WHITESPACE","\n        ",188],"}",["T_WHITESPACE","\n        ",189],["T_VARIABLE","$quote",190],["T_OBJECT_OPERATOR","->",190],["T_STRING","setCustomer",190],"(",["T_VARIABLE","$customer",190],")",";",["T_WHITESPACE","\n\n        ",190],["T_RETURN","return",192],["T_WHITESPACE"," ",192],["T_VARIABLE","$this",192],";",["T_WHITESPACE","\n    ",192],"}",["T_WHITESPACE","\n\n    ",193],["T_DOC_COMMENT","\/**\n     * Involve new customer to system\n     *\n     * @param Mage_Sales_Model_Quote $quote\n     * @return Mage_Checkout_Model_Api_Resource_Customer\n     *\/",195],["T_WHITESPACE","\n    ",200],["T_PUBLIC","public",201],["T_WHITESPACE"," ",201],["T_FUNCTION","function",201],["T_WHITESPACE"," ",201],["T_STRING","involveNewCustomer",201],"(",["T_STRING","Mage_Sales_Model_Quote",201],["T_WHITESPACE"," ",201],["T_VARIABLE","$quote",201],")",["T_WHITESPACE","\n    ",201],"{",["T_WHITESPACE","\n        ",202],["T_VARIABLE","$customer",203],["T_WHITESPACE"," ",203],"=",["T_WHITESPACE"," ",203],["T_VARIABLE","$quote",203],["T_OBJECT_OPERATOR","->",203],["T_STRING","getCustomer",203],"(",")",";",["T_WHITESPACE","\n        ",203],["T_IF","if",204],["T_WHITESPACE"," ",204],"(",["T_VARIABLE","$customer",204],["T_OBJECT_OPERATOR","->",204],["T_STRING","isConfirmationRequired",204],"(",")",")",["T_WHITESPACE"," ",204],"{",["T_WHITESPACE","\n            ",204],["T_VARIABLE","$customer",205],["T_OBJECT_OPERATOR","->",205],["T_STRING","sendNewAccountEmail",205],"(",["T_CONSTANT_ENCAPSED_STRING","'confirmation'",205],")",";",["T_WHITESPACE","\n        ",205],"}",["T_WHITESPACE"," ",206],["T_ELSE","else",206],["T_WHITESPACE"," ",206],"{",["T_WHITESPACE","\n            ",206],["T_VARIABLE","$customer",207],["T_OBJECT_OPERATOR","->",207],["T_STRING","sendNewAccountEmail",207],"(",")",";",["T_WHITESPACE","\n        ",207],"}",["T_WHITESPACE","\n\n        ",208],["T_RETURN","return",210],["T_WHITESPACE"," ",210],["T_VARIABLE","$this",210],";",["T_WHITESPACE","\n    ",210],"}",["T_WHITESPACE","\n",211],"}",["T_WHITESPACE","\n",212]]
[["T_OPEN_TAG","<?php\n",1],["T_DOC_COMMENT","\/**\n * Magento\n *\n * NOTICE OF LICENSE\n *\n * This source file is subject to the Open Software License (OSL 3.0)\n * that is bundled with this package in the file LICENSE.txt.\n * It is also available through the world-wide-web at this URL:\n * http:\/\/opensource.org\/licenses\/osl-3.0.php\n * If you did not receive a copy of the license and are unable to\n * obtain it through the world-wide-web, please send an email\n * to license@magento.com so we can send you a copy immediately.\n *\n * DISCLAIMER\n *\n * Do not edit or add to this file if you wish to upgrade Magento to newer\n * versions in the future. If you wish to customize Magento for your\n * needs please refer to http:\/\/www.magento.com for more information.\n *\n * @category    Mage\n * @package     Mage_Checkout\n * @copyright  Copyright (c) 2006-2016 X.commerce, Inc. and affiliates (http:\/\/www.magento.com)\n * @license    http:\/\/opensource.org\/licenses\/osl-3.0.php  Open Software License (OSL 3.0)\n *\/",2],["T_WHITESPACE","\n\n",25],["T_DOC_COMMENT","\/**\n * Multishipping checkout controller\n *\n * @author      Magento Core Team <core@magentocommerce.com>\n *\/",27],["T_WHITESPACE","\n",31],["T_CLASS","class",32],["T_WHITESPACE"," ",32],["T_STRING","Mage_Checkout_MultishippingController",32],["T_WHITESPACE"," ",32],["T_EXTENDS","extends",32],["T_WHITESPACE"," ",32],["T_STRING","Mage_Checkout_Controller_Action",32],["T_WHITESPACE","\n",32],"{",["T_WHITESPACE","\n    ",33],["T_DOC_COMMENT","\/**\n     * Retrieve checkout model\n     *\n     * @return Mage_Checkout_Model_Type_Multishipping\n     *\/",34],["T_WHITESPACE","\n    ",38],["T_PROTECTED","protected",39],["T_WHITESPACE"," ",39],["T_FUNCTION","function",39],["T_WHITESPACE"," ",39],["T_STRING","_getCheckout",39],"(",")",["T_WHITESPACE","\n    ",39],"{",["T_WHITESPACE","\n        ",40],["T_RETURN","return",41],["T_WHITESPACE"," ",41],["T_STRING","Mage",41],["T_DOUBLE_COLON","::",41],["T_STRING","getSingleton",41],"(",["T_CONSTANT_ENCAPSED_STRING","'checkout\/type_multishipping'",41],")",";",["T_WHITESPACE","\n    ",41],"}",["T_WHITESPACE","\n\n    ",42],["T_DOC_COMMENT","\/**\n     * Retrieve checkout state model\n     *\n     * @return Mage_Checkout_Model_Type_Multishipping_State\n     *\/",44],["T_WHITESPACE","\n    ",48],["T_PROTECTED","protected",49],["T_WHITESPACE"," ",49],["T_FUNCTION","function",49],["T_WHITESPACE"," ",49],["T_STRING","_getState",49],"(",")",["T_WHITESPACE","\n    ",49],"{",["T_WHITESPACE","\n        ",50],["T_RETURN","return",51],["T_WHITESPACE"," ",51],["T_STRING","Mage",51],["T_DOUBLE_COLON","::",51],["T_STRING","getSingleton",51],"(",["T_CONSTANT_ENCAPSED_STRING","'checkout\/type_multishipping_state'",51],")",";",["T_WHITESPACE","\n    ",51],"}",["T_WHITESPACE","\n\n    ",52],["T_DOC_COMMENT","\/**\n     * Retrieve checkout url heler\n     *\n     * @return Mage_Checkout_Helper_Url\n     *\/",54],["T_WHITESPACE","\n    ",58],["T_PROTECTED","protected",59],["T_WHITESPACE"," ",59],["T_FUNCTION","function",59],["T_WHITESPACE"," ",59],["T_STRING","_getHelper",59],"(",")",["T_WHITESPACE","\n    ",59],"{",["T_WHITESPACE","\n        ",60],["T_RETURN","return",61],["T_WHITESPACE"," ",61],["T_STRING","Mage",61],["T_DOUBLE_COLON","::",61],["T_STRING","helper",61],"(",["T_CONSTANT_ENCAPSED_STRING","'checkout\/url'",61],")",";",["T_WHITESPACE","\n    ",61],"}",["T_WHITESPACE","\n\n    ",62],["T_DOC_COMMENT","\/**\n     * Retrieve checkout session\n     *\n     * @return Mage_Checkout_Model_Session\n     *\/",64],["T_WHITESPACE","\n    ",68],["T_PROTECTED","protected",69],["T_WHITESPACE"," ",69],["T_FUNCTION","function",69],["T_WHITESPACE"," ",69],["T_STRING","_getCheckoutSession",69],"(",")",["T_WHITESPACE","\n    ",69],"{",["T_WHITESPACE","\n        ",70],["T_RETURN","return",71],["T_WHITESPACE"," ",71],["T_STRING","Mage",71],["T_DOUBLE_COLON","::",71],["T_STRING","getSingleton",71],"(",["T_CONSTANT_ENCAPSED_STRING","'checkout\/session'",71],")",";",["T_WHITESPACE","\n    ",71],"}",["T_WHITESPACE","\n\n    ",72],["T_DOC_COMMENT","\/**\n     * Action predispatch\n     *\n     * Check customer authentication for some actions\n     *\n     * @return Mage_Checkout_MultishippingController\n     *\/",74],["T_WHITESPACE","\n    ",80],["T_PUBLIC","public",81],["T_WHITESPACE"," ",81],["T_FUNCTION","function",81],["T_WHITESPACE"," ",81],["T_STRING","preDispatch",81],"(",")",["T_WHITESPACE","\n    ",81],"{",["T_WHITESPACE","\n        ",82],["T_STRING","parent",83],["T_DOUBLE_COLON","::",83],["T_STRING","preDispatch",83],"(",")",";",["T_WHITESPACE","\n\n        ",83],["T_IF","if",85],["T_WHITESPACE"," ",85],"(",["T_VARIABLE","$this",85],["T_OBJECT_OPERATOR","->",85],["T_STRING","getFlag",85],"(",["T_CONSTANT_ENCAPSED_STRING","''",85],",",["T_WHITESPACE"," ",85],["T_CONSTANT_ENCAPSED_STRING","'redirectLogin'",85],")",")",["T_WHITESPACE"," ",85],"{",["T_WHITESPACE","\n            ",85],["T_RETURN","return",86],["T_WHITESPACE"," ",86],["T_VARIABLE","$this",86],";",["T_WHITESPACE","\n        ",86],"}",["T_WHITESPACE","\n\n        ",87],["T_VARIABLE","$action",89],["T_WHITESPACE"," ",89],"=",["T_WHITESPACE"," ",89],["T_STRING","strtolower",89],"(",["T_VARIABLE","$this",89],["T_OBJECT_OPERATOR","->",89],["T_STRING","getRequest",89],"(",")",["T_OBJECT_OPERATOR","->",89],["T_STRING","getActionName",89],"(",")",")",";",["T_WHITESPACE","\n\n        ",89],["T_VARIABLE","$checkoutSessionQuote",91],["T_WHITESPACE"," ",91],"=",["T_WHITESPACE"," ",91],["T_VARIABLE","$this",91],["T_OBJECT_OPERATOR","->",91],["T_STRING","_getCheckoutSession",91],"(",")",["T_OBJECT_OPERATOR","->",91],["T_STRING","getQuote",91],"(",")",";",["T_WHITESPACE","\n        ",91],["T_DOC_COMMENT","\/**\n         * Catch index action call to set some flags before checkout\/type_multishipping model initialization\n         *\/",92],["T_WHITESPACE","\n        ",94],["T_IF","if",95],["T_WHITESPACE"," ",95],"(",["T_VARIABLE","$action",95],["T_WHITESPACE"," ",95],["T_IS_EQUAL","==",95],["T_WHITESPACE"," ",95],["T_CONSTANT_ENCAPSED_STRING","'index'",95],")",["T_WHITESPACE"," ",95],"{",["T_WHITESPACE","\n            ",95],["T_VARIABLE","$checkoutSessionQuote",96],["T_OBJECT_OPERATOR","->",96],["T_STRING","setIsMultiShipping",96],"(",["T_STRING","true",96],")",";",["T_WHITESPACE","\n            ",96],["T_VARIABLE","$this",97],["T_OBJECT_OPERATOR","->",97],["T_STRING","_getCheckoutSession",97],"(",")",["T_OBJECT_OPERATOR","->",97],["T_STRING","setCheckoutState",97],"(",["T_WHITESPACE","\n                ",97],["T_STRING","Mage_Checkout_Model_Session",98],["T_DOUBLE_COLON","::",98],["T_STRING","CHECKOUT_STATE_BEGIN",98],["T_WHITESPACE","\n            ",98],")",";",["T_WHITESPACE","\n        ",99],"}",["T_WHITESPACE"," ",100],["T_ELSEIF","elseif",100],["T_WHITESPACE"," ",100],"(","!",["T_VARIABLE","$checkoutSessionQuote",100],["T_OBJECT_OPERATOR","->",100],["T_STRING","getIsMultiShipping",100],"(",")",["T_WHITESPACE"," ",100],["T_BOOLEAN_AND","&&",100],["T_WHITESPACE","\n            ",100],"!",["T_STRING","in_array",101],"(",["T_VARIABLE","$action",101],",",["T_WHITESPACE"," ",101],["T_ARRAY","array",101],"(",["T_CONSTANT_ENCAPSED_STRING","'login'",101],",",["T_WHITESPACE"," ",101],["T_CONSTANT_ENCAPSED_STRING","'register'",101],",",["T_WHITESPACE"," ",101],["T_CONSTANT_ENCAPSED_STRING","'success'",101],")",")",["T_WHITESPACE","\n        ",101],")",["T_WHITESPACE"," ",102],"{",["T_WHITESPACE","\n            ",102],["T_VARIABLE","$this",103],["T_OBJECT_OPERATOR","->",103],["T_STRING","_redirect",103],"(",["T_CONSTANT_ENCAPSED_STRING","'*\/*\/index'",103],")",";",["T_WHITESPACE","\n            ",103],["T_VARIABLE","$this",104],["T_OBJECT_OPERATOR","->",104],["T_STRING","setFlag",104],"(",["T_CONSTANT_ENCAPSED_STRING","''",104],",",["T_WHITESPACE"," ",104],["T_STRING","self",104],["T_DOUBLE_COLON","::",104],["T_STRING","FLAG_NO_DISPATCH",104],",",["T_WHITESPACE"," ",104],["T_STRING","true",104],")",";",["T_WHITESPACE","\n            ",104],["T_RETURN","return",105],["T_WHITESPACE"," ",105],["T_VARIABLE","$this",105],";",["T_WHITESPACE","\n        ",105],"}",["T_WHITESPACE","\n\n        ",106],["T_IF","if",108],["T_WHITESPACE"," ",108],"(","!",["T_STRING","in_array",108],"(",["T_VARIABLE","$action",108],",",["T_WHITESPACE"," ",108],["T_ARRAY","array",108],"(",["T_CONSTANT_ENCAPSED_STRING","'login'",108],",",["T_WHITESPACE"," ",108],["T_CONSTANT_ENCAPSED_STRING","'register'",108],")",")",")",["T_WHITESPACE"," ",108],"{",["T_WHITESPACE","\n            ",108],["T_IF","if",109],["T_WHITESPACE"," ",109],"(","!",["T_STRING","Mage",109],["T_DOUBLE_COLON","::",109],["T_STRING","getSingleton",109],"(",["T_CONSTANT_ENCAPSED_STRING","'customer\/session'",109],")",["T_OBJECT_OPERATOR","->",109],["T_STRING","authenticate",109],"(",["T_VARIABLE","$this",109],",",["T_WHITESPACE"," ",109],["T_VARIABLE","$this",109],["T_OBJECT_OPERATOR","->",109],["T_STRING","_getHelper",109],"(",")",["T_OBJECT_OPERATOR","->",109],["T_STRING","getMSLoginUrl",109],"(",")",")",")",["T_WHITESPACE"," ",109],"{",["T_WHITESPACE","\n                ",109],["T_VARIABLE","$this",110],["T_OBJECT_OPERATOR","->",110],["T_STRING","setFlag",110],"(",["T_CONSTANT_ENCAPSED_STRING","''",110],",",["T_WHITESPACE"," ",110],["T_STRING","self",110],["T_DOUBLE_COLON","::",110],["T_STRING","FLAG_NO_DISPATCH",110],",",["T_WHITESPACE"," ",110],["T_STRING","true",110],")",";",["T_WHITESPACE","\n            ",110],"}",["T_WHITESPACE","\n\n            ",111],["T_IF","if",113],["T_WHITESPACE"," ",113],"(","!",["T_STRING","Mage",113],["T_DOUBLE_COLON","::",113],["T_STRING","helper",113],"(",["T_CONSTANT_ENCAPSED_STRING","'checkout'",113],")",["T_OBJECT_OPERATOR","->",113],["T_STRING","isMultishippingCheckoutAvailable",113],"(",")",")",["T_WHITESPACE"," ",113],"{",["T_WHITESPACE","\n                ",113],["T_VARIABLE","$error",114],["T_WHITESPACE"," ",114],"=",["T_WHITESPACE"," ",114],["T_VARIABLE","$this",114],["T_OBJECT_OPERATOR","->",114],["T_STRING","_getCheckout",114],"(",")",["T_OBJECT_OPERATOR","->",114],["T_STRING","getMinimumAmountError",114],"(",")",";",["T_WHITESPACE","\n                ",114],["T_VARIABLE","$this",115],["T_OBJECT_OPERATOR","->",115],["T_STRING","_getCheckoutSession",115],"(",")",["T_OBJECT_OPERATOR","->",115],["T_STRING","addError",115],"(",["T_VARIABLE","$error",115],")",";",["T_WHITESPACE","\n                ",115],["T_VARIABLE","$this",116],["T_OBJECT_OPERATOR","->",116],["T_STRING","_redirectUrl",116],"(",["T_VARIABLE","$this",116],["T_OBJECT_OPERATOR","->",116],["T_STRING","_getHelper",116],"(",")",["T_OBJECT_OPERATOR","->",116],["T_STRING","getCartUrl",116],"(",")",")",";",["T_WHITESPACE","\n                ",116],["T_VARIABLE","$this",117],["T_OBJECT_OPERATOR","->",117],["T_STRING","setFlag",117],"(",["T_CONSTANT_ENCAPSED_STRING","''",117],",",["T_WHITESPACE"," ",117],["T_STRING","self",117],["T_DOUBLE_COLON","::",117],["T_STRING","FLAG_NO_DISPATCH",117],",",["T_WHITESPACE"," ",117],["T_STRING","true",117],")",";",["T_WHITESPACE","\n                ",117],["T_RETURN","return",118],["T_WHITESPACE"," ",118],["T_VARIABLE","$this",118],";",["T_WHITESPACE","\n            ",118],"}",["T_WHITESPACE","\n        ",119],"}",["T_WHITESPACE","\n\n        ",120],["T_IF","if",122],["T_WHITESPACE"," ",122],"(","!",["T_VARIABLE","$this",122],["T_OBJECT_OPERATOR","->",122],["T_STRING","_preDispatchValidateCustomer",122],"(",")",")",["T_WHITESPACE"," ",122],"{",["T_WHITESPACE","\n            ",122],["T_RETURN","return",123],["T_WHITESPACE"," ",123],["T_VARIABLE","$this",123],";",["T_WHITESPACE","\n        ",123],"}",["T_WHITESPACE","\n\n        ",124],["T_IF","if",126],["T_WHITESPACE"," ",126],"(",["T_VARIABLE","$this",126],["T_OBJECT_OPERATOR","->",126],["T_STRING","_getCheckoutSession",126],"(",")",["T_OBJECT_OPERATOR","->",126],["T_STRING","getCartWasUpdated",126],"(",["T_STRING","true",126],")",["T_WHITESPACE"," ",126],["T_BOOLEAN_AND","&&",126],["T_WHITESPACE","\n            ",126],"!",["T_STRING","in_array",127],"(",["T_VARIABLE","$action",127],",",["T_WHITESPACE"," ",127],["T_ARRAY","array",127],"(",["T_CONSTANT_ENCAPSED_STRING","'index'",127],",",["T_WHITESPACE"," ",127],["T_CONSTANT_ENCAPSED_STRING","'login'",127],",",["T_WHITESPACE"," ",127],["T_CONSTANT_ENCAPSED_STRING","'register'",127],",",["T_WHITESPACE"," ",127],["T_CONSTANT_ENCAPSED_STRING","'addresses'",127],",",["T_WHITESPACE"," ",127],["T_CONSTANT_ENCAPSED_STRING","'success'",127],")",")",["T_WHITESPACE","\n        ",127],")",["T_WHITESPACE"," ",128],"{",["T_WHITESPACE","\n            ",128],["T_VARIABLE","$this",129],["T_OBJECT_OPERATOR","->",129],["T_STRING","_redirectUrl",129],"(",["T_VARIABLE","$this",129],["T_OBJECT_OPERATOR","->",129],["T_STRING","_getHelper",129],"(",")",["T_OBJECT_OPERATOR","->",129],["T_STRING","getCartUrl",129],"(",")",")",";",["T_WHITESPACE","\n            ",129],["T_VARIABLE","$this",130],["T_OBJECT_OPERATOR","->",130],["T_STRING","setFlag",130],"(",["T_CONSTANT_ENCAPSED_STRING","''",130],",",["T_WHITESPACE"," ",130],["T_STRING","self",130],["T_DOUBLE_COLON","::",130],["T_STRING","FLAG_NO_DISPATCH",130],",",["T_WHITESPACE"," ",130],["T_STRING","true",130],")",";",["T_WHITESPACE","\n        ",130],"}",["T_WHITESPACE","\n\n        ",131],["T_IF","if",133],["T_WHITESPACE"," ",133],"(",["T_VARIABLE","$action",133],["T_WHITESPACE"," ",133],["T_IS_EQUAL","==",133],["T_WHITESPACE"," ",133],["T_CONSTANT_ENCAPSED_STRING","'success'",133],["T_WHITESPACE"," ",133],["T_BOOLEAN_AND","&&",133],["T_WHITESPACE"," ",133],["T_VARIABLE","$this",133],["T_OBJECT_OPERATOR","->",133],["T_STRING","_getCheckout",133],"(",")",["T_OBJECT_OPERATOR","->",133],["T_STRING","getCheckoutSession",133],"(",")",["T_OBJECT_OPERATOR","->",133],["T_STRING","getDisplaySuccess",133],"(",["T_STRING","true",133],")",")",["T_WHITESPACE"," ",133],"{",["T_WHITESPACE","\n            ",133],["T_RETURN","return",134],["T_WHITESPACE"," ",134],["T_VARIABLE","$this",134],";",["T_WHITESPACE","\n        ",134],"}",["T_WHITESPACE","\n\n        ",135],["T_VARIABLE","$quote",137],["T_WHITESPACE"," ",137],"=",["T_WHITESPACE"," ",137],["T_VARIABLE","$this",137],["T_OBJECT_OPERATOR","->",137],["T_STRING","_getCheckout",137],"(",")",["T_OBJECT_OPERATOR","->",137],["T_STRING","getQuote",137],"(",")",";",["T_WHITESPACE","\n        ",137],["T_IF","if",138],["T_WHITESPACE"," ",138],"(","!",["T_VARIABLE","$quote",138],["T_OBJECT_OPERATOR","->",138],["T_STRING","hasItems",138],"(",")",["T_WHITESPACE"," ",138],["T_BOOLEAN_OR","||",138],["T_WHITESPACE"," ",138],["T_VARIABLE","$quote",138],["T_OBJECT_OPERATOR","->",138],["T_STRING","getHasError",138],"(",")",["T_WHITESPACE"," ",138],["T_BOOLEAN_OR","||",138],["T_WHITESPACE"," ",138],["T_VARIABLE","$quote",138],["T_OBJECT_OPERATOR","->",138],["T_STRING","isVirtual",138],"(",")",")",["T_WHITESPACE"," ",138],"{",["T_WHITESPACE","\n            ",138],["T_VARIABLE","$this",139],["T_OBJECT_OPERATOR","->",139],["T_STRING","_redirectUrl",139],"(",["T_VARIABLE","$this",139],["T_OBJECT_OPERATOR","->",139],["T_STRING","_getHelper",139],"(",")",["T_OBJECT_OPERATOR","->",139],["T_STRING","getCartUrl",139],"(",")",")",";",["T_WHITESPACE","\n            ",139],["T_VARIABLE","$this",140],["T_OBJECT_OPERATOR","->",140],["T_STRING","setFlag",140],"(",["T_CONSTANT_ENCAPSED_STRING","''",140],",",["T_WHITESPACE"," ",140],["T_STRING","self",140],["T_DOUBLE_COLON","::",140],["T_STRING","FLAG_NO_DISPATCH",140],",",["T_WHITESPACE"," ",140],["T_STRING","true",140],")",";",["T_WHITESPACE","\n            ",140],["T_RETURN","return",141],";",["T_WHITESPACE","\n        ",141],"}",["T_WHITESPACE","\n\n        ",142],["T_RETURN","return",144],["T_WHITESPACE"," ",144],["T_VARIABLE","$this",144],";",["T_WHITESPACE","\n    ",144],"}",["T_WHITESPACE","\n\n    ",145],["T_DOC_COMMENT","\/**\n     * Index action of Multishipping checkout\n     *\/",147],["T_WHITESPACE","\n    ",149],["T_PUBLIC","public",150],["T_WHITESPACE"," ",150],["T_FUNCTION","function",150],["T_WHITESPACE"," ",150],["T_STRING","indexAction",150],"(",")",["T_WHITESPACE","\n    ",150],"{",["T_WHITESPACE","\n        ",151],["T_VARIABLE","$this",152],["T_OBJECT_OPERATOR","->",152],["T_STRING","_getCheckoutSession",152],"(",")",["T_OBJECT_OPERATOR","->",152],["T_STRING","setCartWasUpdated",152],"(",["T_STRING","false",152],")",";",["T_WHITESPACE","\n        ",152],["T_VARIABLE","$this",153],["T_OBJECT_OPERATOR","->",153],["T_STRING","_redirect",153],"(",["T_CONSTANT_ENCAPSED_STRING","'*\/*\/addresses'",153],")",";",["T_WHITESPACE","\n    ",153],"}",["T_WHITESPACE","\n\n    ",154],["T_DOC_COMMENT","\/**\n     * Multishipping checkout login page\n     *\/",156],["T_WHITESPACE","\n    ",158],["T_PUBLIC","public",159],["T_WHITESPACE"," ",159],["T_FUNCTION","function",159],["T_WHITESPACE"," ",159],["T_STRING","loginAction",159],"(",")",["T_WHITESPACE","\n    ",159],"{",["T_WHITESPACE","\n        ",160],["T_IF","if",161],["T_WHITESPACE"," ",161],"(",["T_STRING","Mage",161],["T_DOUBLE_COLON","::",161],["T_STRING","getSingleton",161],"(",["T_CONSTANT_ENCAPSED_STRING","'customer\/session'",161],")",["T_OBJECT_OPERATOR","->",161],["T_STRING","isLoggedIn",161],"(",")",")",["T_WHITESPACE"," ",161],"{",["T_WHITESPACE","\n            ",161],["T_VARIABLE","$this",162],["T_OBJECT_OPERATOR","->",162],["T_STRING","_redirect",162],"(",["T_CONSTANT_ENCAPSED_STRING","'*\/*\/'",162],")",";",["T_WHITESPACE","\n            ",162],["T_RETURN","return",163],";",["T_WHITESPACE","\n        ",163],"}",["T_WHITESPACE","\n\n        ",164],["T_VARIABLE","$this",166],["T_OBJECT_OPERATOR","->",166],["T_STRING","loadLayout",166],"(",")",";",["T_WHITESPACE","\n        ",166],["T_VARIABLE","$this",167],["T_OBJECT_OPERATOR","->",167],["T_STRING","_initLayoutMessages",167],"(",["T_CONSTANT_ENCAPSED_STRING","'customer\/session'",167],")",";",["T_WHITESPACE","\n\n        ",167],["T_COMMENT","\/\/ set account create url\n",169],["T_WHITESPACE","        ",170],["T_IF","if",170],["T_WHITESPACE"," ",170],"(",["T_VARIABLE","$loginForm",170],["T_WHITESPACE"," ",170],"=",["T_WHITESPACE"," ",170],["T_VARIABLE","$this",170],["T_OBJECT_OPERATOR","->",170],["T_STRING","getLayout",170],"(",")",["T_OBJECT_OPERATOR","->",170],["T_STRING","getBlock",170],"(",["T_CONSTANT_ENCAPSED_STRING","'customer_form_login'",170],")",")",["T_WHITESPACE"," ",170],"{",["T_WHITESPACE","\n            ",170],["T_VARIABLE","$loginForm",171],["T_OBJECT_OPERATOR","->",171],["T_STRING","setCreateAccountUrl",171],"(",["T_VARIABLE","$this",171],["T_OBJECT_OPERATOR","->",171],["T_STRING","_getHelper",171],"(",")",["T_OBJECT_OPERATOR","->",171],["T_STRING","getMSRegisterUrl",171],"(",")",")",";",["T_WHITESPACE","\n        ",171],"}",["T_WHITESPACE","\n        ",172],["T_VARIABLE","$this",173],["T_OBJECT_OPERATOR","->",173],["T_STRING","renderLayout",173],"(",")",";",["T_WHITESPACE","\n    ",173],"}",["T_WHITESPACE","\n\n    ",174],["T_DOC_COMMENT","\/**\n     * Multishipping checkout login page\n     *\/",176],["T_WHITESPACE","\n    ",178],["T_PUBLIC","public",179],["T_WHITESPACE"," ",179],["T_FUNCTION","function",179],["T_WHITESPACE"," ",179],["T_STRING","registerAction",179],"(",")",["T_WHITESPACE","\n    ",179],"{",["T_WHITESPACE","\n        ",180],["T_IF","if",181],["T_WHITESPACE"," ",181],"(",["T_STRING","Mage",181],["T_DOUBLE_COLON","::",181],["T_STRING","getSingleton",181],"(",["T_CONSTANT_ENCAPSED_STRING","'customer\/session'",181],")",["T_OBJECT_OPERATOR","->",181],["T_STRING","isLoggedIn",181],"(",")",")",["T_WHITESPACE"," ",181],"{",["T_WHITESPACE","\n            ",181],["T_VARIABLE","$this",182],["T_OBJECT_OPERATOR","->",182],["T_STRING","_redirectUrl",182],"(",["T_VARIABLE","$this",182],["T_OBJECT_OPERATOR","->",182],["T_STRING","_getHelper",182],"(",")",["T_OBJECT_OPERATOR","->",182],["T_STRING","getMSCheckoutUrl",182],"(",")",")",";",["T_WHITESPACE","\n            ",182],["T_RETURN","return",183],";",["T_WHITESPACE","\n        ",183],"}",["T_WHITESPACE","\n\n        ",184],["T_VARIABLE","$this",186],["T_OBJECT_OPERATOR","->",186],["T_STRING","loadLayout",186],"(",")",";",["T_WHITESPACE","\n        ",186],["T_VARIABLE","$this",187],["T_OBJECT_OPERATOR","->",187],["T_STRING","_initLayoutMessages",187],"(",["T_CONSTANT_ENCAPSED_STRING","'customer\/session'",187],")",";",["T_WHITESPACE","\n\n        ",187],["T_IF","if",189],["T_WHITESPACE"," ",189],"(",["T_VARIABLE","$registerForm",189],["T_WHITESPACE"," ",189],"=",["T_WHITESPACE"," ",189],["T_VARIABLE","$this",189],["T_OBJECT_OPERATOR","->",189],["T_STRING","getLayout",189],"(",")",["T_OBJECT_OPERATOR","->",189],["T_STRING","getBlock",189],"(",["T_CONSTANT_ENCAPSED_STRING","'customer_form_register'",189],")",")",["T_WHITESPACE"," ",189],"{",["T_WHITESPACE","\n            ",189],["T_VARIABLE","$registerForm",190],["T_OBJECT_OPERATOR","->",190],["T_STRING","setShowAddressFields",190],"(",["T_STRING","true",190],")",["T_WHITESPACE","\n                ",190],["T_OBJECT_OPERATOR","->",191],["T_STRING","setBackUrl",191],"(",["T_VARIABLE","$this",191],["T_OBJECT_OPERATOR","->",191],["T_STRING","_getHelper",191],"(",")",["T_OBJECT_OPERATOR","->",191],["T_STRING","getMSLoginUrl",191],"(",")",")",["T_WHITESPACE","\n                ",191],["T_OBJECT_OPERATOR","->",192],["T_STRING","setSuccessUrl",192],"(",["T_VARIABLE","$this",192],["T_OBJECT_OPERATOR","->",192],["T_STRING","_getHelper",192],"(",")",["T_OBJECT_OPERATOR","->",192],["T_STRING","getMSShippingAddressSavedUrl",192],"(",")",")",["T_WHITESPACE","\n                ",192],["T_OBJECT_OPERATOR","->",193],["T_STRING","setErrorUrl",193],"(",["T_VARIABLE","$this",193],["T_OBJECT_OPERATOR","->",193],["T_STRING","_getHelper",193],"(",")",["T_OBJECT_OPERATOR","->",193],["T_STRING","getCurrentUrl",193],"(",")",")",";",["T_WHITESPACE","\n        ",193],"}",["T_WHITESPACE","\n\n        ",194],["T_VARIABLE","$this",196],["T_OBJECT_OPERATOR","->",196],["T_STRING","renderLayout",196],"(",")",";",["T_WHITESPACE","\n    ",196],"}",["T_WHITESPACE","\n\n    ",197],["T_DOC_COMMENT","\/**\n     * Multishipping checkout select address page\n     *\/",199],["T_WHITESPACE","\n    ",201],["T_PUBLIC","public",202],["T_WHITESPACE"," ",202],["T_FUNCTION","function",202],["T_WHITESPACE"," ",202],["T_STRING","addressesAction",202],"(",")",["T_WHITESPACE","\n    ",202],"{",["T_WHITESPACE","\n        ",203],["T_COMMENT","\/\/ If customer do not have addresses\n",204],["T_WHITESPACE","        ",205],["T_IF","if",205],["T_WHITESPACE"," ",205],"(","!",["T_VARIABLE","$this",205],["T_OBJECT_OPERATOR","->",205],["T_STRING","_getCheckout",205],"(",")",["T_OBJECT_OPERATOR","->",205],["T_STRING","getCustomerDefaultShippingAddress",205],"(",")",")",["T_WHITESPACE"," ",205],"{",["T_WHITESPACE","\n            ",205],["T_VARIABLE","$this",206],["T_OBJECT_OPERATOR","->",206],["T_STRING","_redirect",206],"(",["T_CONSTANT_ENCAPSED_STRING","'*\/multishipping_address\/newShipping'",206],")",";",["T_WHITESPACE","\n            ",206],["T_RETURN","return",207],";",["T_WHITESPACE","\n        ",207],"}",["T_WHITESPACE","\n\n        ",208],["T_VARIABLE","$this",210],["T_OBJECT_OPERATOR","->",210],["T_STRING","_getState",210],"(",")",["T_OBJECT_OPERATOR","->",210],["T_STRING","unsCompleteStep",210],"(",["T_WHITESPACE","\n            ",210],["T_STRING","Mage_Checkout_Model_Type_Multishipping_State",211],["T_DOUBLE_COLON","::",211],["T_STRING","STEP_SHIPPING",211],["T_WHITESPACE","\n        ",211],")",";",["T_WHITESPACE","\n\n        ",212],["T_VARIABLE","$this",214],["T_OBJECT_OPERATOR","->",214],["T_STRING","_getState",214],"(",")",["T_OBJECT_OPERATOR","->",214],["T_STRING","setActiveStep",214],"(",["T_WHITESPACE","\n            ",214],["T_STRING","Mage_Checkout_Model_Type_Multishipping_State",215],["T_DOUBLE_COLON","::",215],["T_STRING","STEP_SELECT_ADDRESSES",215],["T_WHITESPACE","\n        ",215],")",";",["T_WHITESPACE","\n        ",216],["T_IF","if",217],["T_WHITESPACE"," ",217],"(","!",["T_VARIABLE","$this",217],["T_OBJECT_OPERATOR","->",217],["T_STRING","_getCheckout",217],"(",")",["T_OBJECT_OPERATOR","->",217],["T_STRING","validateMinimumAmount",217],"(",")",")",["T_WHITESPACE"," ",217],"{",["T_WHITESPACE","\n            ",217],["T_VARIABLE","$message",218],["T_WHITESPACE"," ",218],"=",["T_WHITESPACE"," ",218],["T_VARIABLE","$this",218],["T_OBJECT_OPERATOR","->",218],["T_STRING","_getCheckout",218],"(",")",["T_OBJECT_OPERATOR","->",218],["T_STRING","getMinimumAmountDescription",218],"(",")",";",["T_WHITESPACE","\n            ",218],["T_VARIABLE","$this",219],["T_OBJECT_OPERATOR","->",219],["T_STRING","_getCheckout",219],"(",")",["T_OBJECT_OPERATOR","->",219],["T_STRING","getCheckoutSession",219],"(",")",["T_OBJECT_OPERATOR","->",219],["T_STRING","addNotice",219],"(",["T_VARIABLE","$message",219],")",";",["T_WHITESPACE","\n        ",219],"}",["T_WHITESPACE","\n        ",220],["T_VARIABLE","$this",221],["T_OBJECT_OPERATOR","->",221],["T_STRING","loadLayout",221],"(",")",";",["T_WHITESPACE","\n        ",221],["T_VARIABLE","$this",222],["T_OBJECT_OPERATOR","->",222],["T_STRING","_initLayoutMessages",222],"(",["T_CONSTANT_ENCAPSED_STRING","'customer\/session'",222],")",";",["T_WHITESPACE","\n        ",222],["T_VARIABLE","$this",223],["T_OBJECT_OPERATOR","->",223],["T_STRING","_initLayoutMessages",223],"(",["T_CONSTANT_ENCAPSED_STRING","'checkout\/session'",223],")",";",["T_WHITESPACE","\n        ",223],["T_VARIABLE","$this",224],["T_OBJECT_OPERATOR","->",224],["T_STRING","renderLayout",224],"(",")",";",["T_WHITESPACE","\n    ",224],"}",["T_WHITESPACE","\n\n    ",225],["T_DOC_COMMENT","\/**\n     * Multishipping checkout process posted addresses\n     *\/",227],["T_WHITESPACE","\n    ",229],["T_PUBLIC","public",230],["T_WHITESPACE"," ",230],["T_FUNCTION","function",230],["T_WHITESPACE"," ",230],["T_STRING","addressesPostAction",230],"(",")",["T_WHITESPACE","\n    ",230],"{",["T_WHITESPACE","\n        ",231],["T_IF","if",232],["T_WHITESPACE"," ",232],"(","!",["T_VARIABLE","$this",232],["T_OBJECT_OPERATOR","->",232],["T_STRING","_getCheckout",232],"(",")",["T_OBJECT_OPERATOR","->",232],["T_STRING","getCustomerDefaultShippingAddress",232],"(",")",")",["T_WHITESPACE"," ",232],"{",["T_WHITESPACE","\n            ",232],["T_VARIABLE","$this",233],["T_OBJECT_OPERATOR","->",233],["T_STRING","_redirect",233],"(",["T_CONSTANT_ENCAPSED_STRING","'*\/multishipping_address\/newShipping'",233],")",";",["T_WHITESPACE","\n            ",233],["T_RETURN","return",234],";",["T_WHITESPACE","\n        ",234],"}",["T_WHITESPACE","\n        ",235],["T_TRY","try",236],["T_WHITESPACE"," ",236],"{",["T_WHITESPACE","\n            ",236],["T_IF","if",237],["T_WHITESPACE"," ",237],"(",["T_VARIABLE","$this",237],["T_OBJECT_OPERATOR","->",237],["T_STRING","getRequest",237],"(",")",["T_OBJECT_OPERATOR","->",237],["T_STRING","getParam",237],"(",["T_CONSTANT_ENCAPSED_STRING","'continue'",237],",",["T_WHITESPACE"," ",237],["T_STRING","false",237],")",")",["T_WHITESPACE"," ",237],"{",["T_WHITESPACE","\n                ",237],["T_VARIABLE","$this",238],["T_OBJECT_OPERATOR","->",238],["T_STRING","_getCheckout",238],"(",")",["T_OBJECT_OPERATOR","->",238],["T_STRING","setCollectRatesFlag",238],"(",["T_STRING","true",238],")",";",["T_WHITESPACE","\n                ",238],["T_VARIABLE","$this",239],["T_OBJECT_OPERATOR","->",239],["T_STRING","_getState",239],"(",")",["T_OBJECT_OPERATOR","->",239],["T_STRING","setActiveStep",239],"(",["T_WHITESPACE","\n                    ",239],["T_STRING","Mage_Checkout_Model_Type_Multishipping_State",240],["T_DOUBLE_COLON","::",240],["T_STRING","STEP_SHIPPING",240],["T_WHITESPACE","\n                ",240],")",";",["T_WHITESPACE","\n                ",241],["T_VARIABLE","$this",242],["T_OBJECT_OPERATOR","->",242],["T_STRING","_getState",242],"(",")",["T_OBJECT_OPERATOR","->",242],["T_STRING","setCompleteStep",242],"(",["T_WHITESPACE","\n                    ",242],["T_STRING","Mage_Checkout_Model_Type_Multishipping_State",243],["T_DOUBLE_COLON","::",243],["T_STRING","STEP_SELECT_ADDRESSES",243],["T_WHITESPACE","\n                ",243],")",";",["T_WHITESPACE","\n                ",244],["T_VARIABLE","$this",245],["T_OBJECT_OPERATOR","->",245],["T_STRING","_redirect",245],"(",["T_CONSTANT_ENCAPSED_STRING","'*\/*\/shipping'",245],")",";",["T_WHITESPACE","\n            ",245],"}",["T_WHITESPACE","\n            ",246],["T_ELSEIF","elseif",247],["T_WHITESPACE"," ",247],"(",["T_VARIABLE","$this",247],["T_OBJECT_OPERATOR","->",247],["T_STRING","getRequest",247],"(",")",["T_OBJECT_OPERATOR","->",247],["T_STRING","getParam",247],"(",["T_CONSTANT_ENCAPSED_STRING","'new_address'",247],")",")",["T_WHITESPACE"," ",247],"{",["T_WHITESPACE","\n                ",247],["T_VARIABLE","$this",248],["T_OBJECT_OPERATOR","->",248],["T_STRING","_redirect",248],"(",["T_CONSTANT_ENCAPSED_STRING","'*\/multishipping_address\/newShipping'",248],")",";",["T_WHITESPACE","\n            ",248],"}",["T_WHITESPACE","\n            ",249],["T_ELSE","else",250],["T_WHITESPACE"," ",250],"{",["T_WHITESPACE","\n                ",250],["T_VARIABLE","$this",251],["T_OBJECT_OPERATOR","->",251],["T_STRING","_redirect",251],"(",["T_CONSTANT_ENCAPSED_STRING","'*\/*\/addresses'",251],")",";",["T_WHITESPACE","\n            ",251],"}",["T_WHITESPACE","\n            ",252],["T_IF","if",253],["T_WHITESPACE"," ",253],"(",["T_VARIABLE","$shipToInfo",253],["T_WHITESPACE"," ",253],"=",["T_WHITESPACE"," ",253],["T_VARIABLE","$this",253],["T_OBJECT_OPERATOR","->",253],["T_STRING","getRequest",253],"(",")",["T_OBJECT_OPERATOR","->",253],["T_STRING","getPost",253],"(",["T_CONSTANT_ENCAPSED_STRING","'ship'",253],")",")",["T_WHITESPACE"," ",253],"{",["T_WHITESPACE","\n                ",253],["T_VARIABLE","$this",254],["T_OBJECT_OPERATOR","->",254],["T_STRING","_getCheckout",254],"(",")",["T_OBJECT_OPERATOR","->",254],["T_STRING","setShippingItemsInformation",254],"(",["T_VARIABLE","$shipToInfo",254],")",";",["T_WHITESPACE","\n            ",254],"}",["T_WHITESPACE","\n        ",255],"}",["T_WHITESPACE","\n        ",256],["T_CATCH","catch",257],["T_WHITESPACE"," ",257],"(",["T_STRING","Mage_Core_Exception",257],["T_WHITESPACE"," ",257],["T_VARIABLE","$e",257],")",["T_WHITESPACE"," ",257],"{",["T_WHITESPACE","\n            ",257],["T_VARIABLE","$this",258],["T_OBJECT_OPERATOR","->",258],["T_STRING","_getCheckoutSession",258],"(",")",["T_OBJECT_OPERATOR","->",258],["T_STRING","addError",258],"(",["T_VARIABLE","$e",258],["T_OBJECT_OPERATOR","->",258],["T_STRING","getMessage",258],"(",")",")",";",["T_WHITESPACE","\n            ",258],["T_VARIABLE","$this",259],["T_OBJECT_OPERATOR","->",259],["T_STRING","_redirect",259],"(",["T_CONSTANT_ENCAPSED_STRING","'*\/*\/addresses'",259],")",";",["T_WHITESPACE","\n        ",259],"}",["T_WHITESPACE","\n        ",260],["T_CATCH","catch",261],["T_WHITESPACE"," ",261],"(",["T_STRING","Exception",261],["T_WHITESPACE"," ",261],["T_VARIABLE","$e",261],")",["T_WHITESPACE"," ",261],"{",["T_WHITESPACE","\n            ",261],["T_VARIABLE","$this",262],["T_OBJECT_OPERATOR","->",262],["T_STRING","_getCheckoutSession",262],"(",")",["T_OBJECT_OPERATOR","->",262],["T_STRING","addException",262],"(",["T_WHITESPACE","\n                ",262],["T_VARIABLE","$e",263],",",["T_WHITESPACE","\n                ",263],["T_STRING","Mage",264],["T_DOUBLE_COLON","::",264],["T_STRING","helper",264],"(",["T_CONSTANT_ENCAPSED_STRING","'checkout'",264],")",["T_OBJECT_OPERATOR","->",264],["T_STRING","__",264],"(",["T_CONSTANT_ENCAPSED_STRING","'Data saving problem'",264],")",["T_WHITESPACE","\n            ",264],")",";",["T_WHITESPACE","\n            ",265],["T_VARIABLE","$this",266],["T_OBJECT_OPERATOR","->",266],["T_STRING","_redirect",266],"(",["T_CONSTANT_ENCAPSED_STRING","'*\/*\/addresses'",266],")",";",["T_WHITESPACE","\n        ",266],"}",["T_WHITESPACE","\n    ",267],"}",["T_WHITESPACE","\n\n    ",268],["T_DOC_COMMENT","\/**\n     * Multishipping checkout action to go back to addresses page\n     *\/",270],["T_WHITESPACE","\n    ",272],["T_PUBLIC","public",273],["T_WHITESPACE"," ",273],["T_FUNCTION","function",273],["T_WHITESPACE"," ",273],["T_STRING","backToAddressesAction",273],"(",")",["T_WHITESPACE","\n    ",273],"{",["T_WHITESPACE","\n        ",274],["T_VARIABLE","$this",275],["T_OBJECT_OPERATOR","->",275],["T_STRING","_getState",275],"(",")",["T_OBJECT_OPERATOR","->",275],["T_STRING","setActiveStep",275],"(",["T_WHITESPACE","\n            ",275],["T_STRING","Mage_Checkout_Model_Type_Multishipping_State",276],["T_DOUBLE_COLON","::",276],["T_STRING","STEP_SELECT_ADDRESSES",276],["T_WHITESPACE","\n        ",276],")",";",["T_WHITESPACE","\n        ",277],["T_VARIABLE","$this",278],["T_OBJECT_OPERATOR","->",278],["T_STRING","_getState",278],"(",")",["T_OBJECT_OPERATOR","->",278],["T_STRING","unsCompleteStep",278],"(",["T_WHITESPACE","\n            ",278],["T_STRING","Mage_Checkout_Model_Type_Multishipping_State",279],["T_DOUBLE_COLON","::",279],["T_STRING","STEP_SHIPPING",279],["T_WHITESPACE","\n        ",279],")",";",["T_WHITESPACE","\n        ",280],["T_VARIABLE","$this",281],["T_OBJECT_OPERATOR","->",281],["T_STRING","_redirect",281],"(",["T_CONSTANT_ENCAPSED_STRING","'*\/*\/addresses'",281],")",";",["T_WHITESPACE","\n    ",281],"}",["T_WHITESPACE","\n\n    ",282],["T_DOC_COMMENT","\/**\n     * Multishipping checkout remove item action\n     *\/",284],["T_WHITESPACE","\n    ",286],["T_PUBLIC","public",287],["T_WHITESPACE"," ",287],["T_FUNCTION","function",287],["T_WHITESPACE"," ",287],["T_STRING","removeItemAction",287],"(",")",["T_WHITESPACE","\n    ",287],"{",["T_WHITESPACE","\n        ",288],["T_VARIABLE","$itemId",289],["T_WHITESPACE","     ",289],"=",["T_WHITESPACE"," ",289],["T_VARIABLE","$this",289],["T_OBJECT_OPERATOR","->",289],["T_STRING","getRequest",289],"(",")",["T_OBJECT_OPERATOR","->",289],["T_STRING","getParam",289],"(",["T_CONSTANT_ENCAPSED_STRING","'id'",289],")",";",["T_WHITESPACE","\n        ",289],["T_VARIABLE","$addressId",290],["T_WHITESPACE","  ",290],"=",["T_WHITESPACE"," ",290],["T_VARIABLE","$this",290],["T_OBJECT_OPERATOR","->",290],["T_STRING","getRequest",290],"(",")",["T_OBJECT_OPERATOR","->",290],["T_STRING","getParam",290],"(",["T_CONSTANT_ENCAPSED_STRING","'address'",290],")",";",["T_WHITESPACE","\n        ",290],["T_IF","if",291],["T_WHITESPACE"," ",291],"(",["T_VARIABLE","$addressId",291],["T_WHITESPACE"," ",291],["T_BOOLEAN_AND","&&",291],["T_WHITESPACE"," ",291],["T_VARIABLE","$itemId",291],")",["T_WHITESPACE"," ",291],"{",["T_WHITESPACE","\n            ",291],["T_VARIABLE","$this",292],["T_OBJECT_OPERATOR","->",292],["T_STRING","_getCheckout",292],"(",")",["T_OBJECT_OPERATOR","->",292],["T_STRING","setCollectRatesFlag",292],"(",["T_STRING","true",292],")",";",["T_WHITESPACE","\n            ",292],["T_VARIABLE","$this",293],["T_OBJECT_OPERATOR","->",293],["T_STRING","_getCheckout",293],"(",")",["T_OBJECT_OPERATOR","->",293],["T_STRING","removeAddressItem",293],"(",["T_VARIABLE","$addressId",293],",",["T_WHITESPACE"," ",293],["T_VARIABLE","$itemId",293],")",";",["T_WHITESPACE","\n        ",293],"}",["T_WHITESPACE","\n        ",294],["T_VARIABLE","$this",295],["T_OBJECT_OPERATOR","->",295],["T_STRING","_redirect",295],"(",["T_CONSTANT_ENCAPSED_STRING","'*\/*\/addresses'",295],")",";",["T_WHITESPACE","\n    ",295],"}",["T_WHITESPACE","\n\n    ",296],["T_DOC_COMMENT","\/**\n     * Returns whether the minimum amount has been reached\n     *\n     * @return bool\n     *\/",298],["T_WHITESPACE","\n    ",302],["T_PROTECTED","protected",303],["T_WHITESPACE"," ",303],["T_FUNCTION","function",303],["T_WHITESPACE"," ",303],["T_STRING","_validateMinimumAmount",303],"(",")",["T_WHITESPACE","\n    ",303],"{",["T_WHITESPACE","\n        ",304],["T_IF","if",305],["T_WHITESPACE"," ",305],"(","!",["T_VARIABLE","$this",305],["T_OBJECT_OPERATOR","->",305],["T_STRING","_getCheckout",305],"(",")",["T_OBJECT_OPERATOR","->",305],["T_STRING","validateMinimumAmount",305],"(",")",")",["T_WHITESPACE"," ",305],"{",["T_WHITESPACE","\n            ",305],["T_VARIABLE","$error",306],["T_WHITESPACE"," ",306],"=",["T_WHITESPACE"," ",306],["T_VARIABLE","$this",306],["T_OBJECT_OPERATOR","->",306],["T_STRING","_getCheckout",306],"(",")",["T_OBJECT_OPERATOR","->",306],["T_STRING","getMinimumAmountError",306],"(",")",";",["T_WHITESPACE","\n            ",306],["T_VARIABLE","$this",307],["T_OBJECT_OPERATOR","->",307],["T_STRING","_getCheckout",307],"(",")",["T_OBJECT_OPERATOR","->",307],["T_STRING","getCheckoutSession",307],"(",")",["T_OBJECT_OPERATOR","->",307],["T_STRING","addError",307],"(",["T_VARIABLE","$error",307],")",";",["T_WHITESPACE","\n            ",307],["T_VARIABLE","$this",308],["T_OBJECT_OPERATOR","->",308],["T_STRING","_forward",308],"(",["T_CONSTANT_ENCAPSED_STRING","'backToAddresses'",308],")",";",["T_WHITESPACE","\n            ",308],["T_RETURN","return",309],["T_WHITESPACE"," ",309],["T_STRING","false",309],";",["T_WHITESPACE","\n        ",309],"}",["T_WHITESPACE","\n        ",310],["T_RETURN","return",311],["T_WHITESPACE"," ",311],["T_STRING","true",311],";",["T_WHITESPACE","\n    ",311],"}",["T_WHITESPACE","\n\n    ",312],["T_DOC_COMMENT","\/**\n     * Multishipping checkout shipping information page\n     *\/",314],["T_WHITESPACE","\n    ",316],["T_PUBLIC","public",317],["T_WHITESPACE"," ",317],["T_FUNCTION","function",317],["T_WHITESPACE"," ",317],["T_STRING","shippingAction",317],"(",")",["T_WHITESPACE","\n    ",317],"{",["T_WHITESPACE","\n        ",318],["T_IF","if",319],["T_WHITESPACE"," ",319],"(","!",["T_VARIABLE","$this",319],["T_OBJECT_OPERATOR","->",319],["T_STRING","_validateMinimumAmount",319],"(",")",")",["T_WHITESPACE"," ",319],"{",["T_WHITESPACE","\n            ",319],["T_RETURN","return",320],";",["T_WHITESPACE","\n        ",320],"}",["T_WHITESPACE","\n\n        ",321],["T_IF","if",323],["T_WHITESPACE"," ",323],"(","!",["T_VARIABLE","$this",323],["T_OBJECT_OPERATOR","->",323],["T_STRING","_getState",323],"(",")",["T_OBJECT_OPERATOR","->",323],["T_STRING","getCompleteStep",323],"(",["T_STRING","Mage_Checkout_Model_Type_Multishipping_State",323],["T_DOUBLE_COLON","::",323],["T_STRING","STEP_SELECT_ADDRESSES",323],")",")",["T_WHITESPACE"," ",323],"{",["T_WHITESPACE","\n            ",323],["T_VARIABLE","$this",324],["T_OBJECT_OPERATOR","->",324],["T_STRING","_redirect",324],"(",["T_CONSTANT_ENCAPSED_STRING","'*\/*\/addresses'",324],")",";",["T_WHITESPACE","\n            ",324],["T_RETURN","return",325],["T_WHITESPACE"," ",325],["T_VARIABLE","$this",325],";",["T_WHITESPACE","\n        ",325],"}",["T_WHITESPACE","\n\n        ",326],["T_VARIABLE","$this",328],["T_OBJECT_OPERATOR","->",328],["T_STRING","_getState",328],"(",")",["T_OBJECT_OPERATOR","->",328],["T_STRING","setActiveStep",328],"(",["T_WHITESPACE","\n            ",328],["T_STRING","Mage_Checkout_Model_Type_Multishipping_State",329],["T_DOUBLE_COLON","::",329],["T_STRING","STEP_SHIPPING",329],["T_WHITESPACE","\n        ",329],")",";",["T_WHITESPACE","\n        ",330],["T_VARIABLE","$this",331],["T_OBJECT_OPERATOR","->",331],["T_STRING","loadLayout",331],"(",")",";",["T_WHITESPACE","\n        ",331],["T_VARIABLE","$this",332],["T_OBJECT_OPERATOR","->",332],["T_STRING","_initLayoutMessages",332],"(",["T_CONSTANT_ENCAPSED_STRING","'customer\/session'",332],")",";",["T_WHITESPACE","\n        ",332],["T_VARIABLE","$this",333],["T_OBJECT_OPERATOR","->",333],["T_STRING","_initLayoutMessages",333],"(",["T_CONSTANT_ENCAPSED_STRING","'checkout\/session'",333],")",";",["T_WHITESPACE","\n        ",333],["T_VARIABLE","$this",334],["T_OBJECT_OPERATOR","->",334],["T_STRING","renderLayout",334],"(",")",";",["T_WHITESPACE","\n    ",334],"}",["T_WHITESPACE","\n\n    ",335],["T_DOC_COMMENT","\/**\n     * Multishipping checkout action to go back to shipping\n     *\/",337],["T_WHITESPACE","\n    ",339],["T_PUBLIC","public",340],["T_WHITESPACE"," ",340],["T_FUNCTION","function",340],["T_WHITESPACE"," ",340],["T_STRING","backToShippingAction",340],"(",")",["T_WHITESPACE","\n    ",340],"{",["T_WHITESPACE","\n        ",341],["T_VARIABLE","$this",342],["T_OBJECT_OPERATOR","->",342],["T_STRING","_getState",342],"(",")",["T_OBJECT_OPERATOR","->",342],["T_STRING","setActiveStep",342],"(",["T_WHITESPACE","\n            ",342],["T_STRING","Mage_Checkout_Model_Type_Multishipping_State",343],["T_DOUBLE_COLON","::",343],["T_STRING","STEP_SHIPPING",343],["T_WHITESPACE","\n        ",343],")",";",["T_WHITESPACE","\n        ",344],["T_VARIABLE","$this",345],["T_OBJECT_OPERATOR","->",345],["T_STRING","_getState",345],"(",")",["T_OBJECT_OPERATOR","->",345],["T_STRING","unsCompleteStep",345],"(",["T_WHITESPACE","\n            ",345],["T_STRING","Mage_Checkout_Model_Type_Multishipping_State",346],["T_DOUBLE_COLON","::",346],["T_STRING","STEP_BILLING",346],["T_WHITESPACE","\n        ",346],")",";",["T_WHITESPACE","\n        ",347],["T_VARIABLE","$this",348],["T_OBJECT_OPERATOR","->",348],["T_STRING","_redirect",348],"(",["T_CONSTANT_ENCAPSED_STRING","'*\/*\/shipping'",348],")",";",["T_WHITESPACE","\n    ",348],"}",["T_WHITESPACE","\n\n    ",349],["T_DOC_COMMENT","\/**\n     * Multishipping checkout after the shipping page\n     *\/",351],["T_WHITESPACE","\n    ",353],["T_PUBLIC","public",354],["T_WHITESPACE"," ",354],["T_FUNCTION","function",354],["T_WHITESPACE"," ",354],["T_STRING","shippingPostAction",354],"(",")",["T_WHITESPACE","\n    ",354],"{",["T_WHITESPACE","\n        ",355],["T_VARIABLE","$shippingMethods",356],["T_WHITESPACE"," ",356],"=",["T_WHITESPACE"," ",356],["T_VARIABLE","$this",356],["T_OBJECT_OPERATOR","->",356],["T_STRING","getRequest",356],"(",")",["T_OBJECT_OPERATOR","->",356],["T_STRING","getPost",356],"(",["T_CONSTANT_ENCAPSED_STRING","'shipping_method'",356],")",";",["T_WHITESPACE","\n        ",356],["T_TRY","try",357],["T_WHITESPACE"," ",357],"{",["T_WHITESPACE","\n            ",357],["T_STRING","Mage",358],["T_DOUBLE_COLON","::",358],["T_STRING","dispatchEvent",358],"(",["T_WHITESPACE","\n                ",358],["T_CONSTANT_ENCAPSED_STRING","'checkout_controller_multishipping_shipping_post'",359],",",["T_WHITESPACE","\n                ",359],["T_ARRAY","array",360],"(",["T_CONSTANT_ENCAPSED_STRING","'request'",360],["T_DOUBLE_ARROW","=>",360],["T_VARIABLE","$this",360],["T_OBJECT_OPERATOR","->",360],["T_STRING","getRequest",360],"(",")",",",["T_WHITESPACE"," ",360],["T_CONSTANT_ENCAPSED_STRING","'quote'",360],["T_DOUBLE_ARROW","=>",360],["T_VARIABLE","$this",360],["T_OBJECT_OPERATOR","->",360],["T_STRING","_getCheckout",360],"(",")",["T_OBJECT_OPERATOR","->",360],["T_STRING","getQuote",360],"(",")",")",["T_WHITESPACE","\n            ",360],")",";",["T_WHITESPACE","\n            ",361],["T_VARIABLE","$this",362],["T_OBJECT_OPERATOR","->",362],["T_STRING","_getCheckout",362],"(",")",["T_OBJECT_OPERATOR","->",362],["T_STRING","setShippingMethods",362],"(",["T_VARIABLE","$shippingMethods",362],")",";",["T_WHITESPACE","\n            ",362],["T_VARIABLE","$this",363],["T_OBJECT_OPERATOR","->",363],["T_STRING","_getState",363],"(",")",["T_OBJECT_OPERATOR","->",363],["T_STRING","setActiveStep",363],"(",["T_WHITESPACE","\n                ",363],["T_STRING","Mage_Checkout_Model_Type_Multishipping_State",364],["T_DOUBLE_COLON","::",364],["T_STRING","STEP_BILLING",364],["T_WHITESPACE","\n            ",364],")",";",["T_WHITESPACE","\n            ",365],["T_VARIABLE","$this",366],["T_OBJECT_OPERATOR","->",366],["T_STRING","_getState",366],"(",")",["T_OBJECT_OPERATOR","->",366],["T_STRING","setCompleteStep",366],"(",["T_WHITESPACE","\n                ",366],["T_STRING","Mage_Checkout_Model_Type_Multishipping_State",367],["T_DOUBLE_COLON","::",367],["T_STRING","STEP_SHIPPING",367],["T_WHITESPACE","\n            ",367],")",";",["T_WHITESPACE","\n            ",368],["T_VARIABLE","$this",369],["T_OBJECT_OPERATOR","->",369],["T_STRING","_redirect",369],"(",["T_CONSTANT_ENCAPSED_STRING","'*\/*\/billing'",369],")",";",["T_WHITESPACE","\n        ",369],"}",["T_WHITESPACE","\n        ",370],["T_CATCH","catch",371],["T_WHITESPACE"," ",371],"(",["T_STRING","Exception",371],["T_WHITESPACE"," ",371],["T_VARIABLE","$e",371],")",["T_WHITESPACE"," ",371],"{",["T_WHITESPACE","\n            ",371],["T_VARIABLE","$this",372],["T_OBJECT_OPERATOR","->",372],["T_STRING","_getCheckoutSession",372],"(",")",["T_OBJECT_OPERATOR","->",372],["T_STRING","addError",372],"(",["T_VARIABLE","$e",372],["T_OBJECT_OPERATOR","->",372],["T_STRING","getMessage",372],"(",")",")",";",["T_WHITESPACE","\n            ",372],["T_VARIABLE","$this",373],["T_OBJECT_OPERATOR","->",373],["T_STRING","_redirect",373],"(",["T_CONSTANT_ENCAPSED_STRING","'*\/*\/shipping'",373],")",";",["T_WHITESPACE","\n        ",373],"}",["T_WHITESPACE","\n    ",374],"}",["T_WHITESPACE","\n\n    ",375],["T_DOC_COMMENT","\/**\n     * Multishipping checkout billing information page\n     *\/",377],["T_WHITESPACE","\n    ",379],["T_PUBLIC","public",380],["T_WHITESPACE"," ",380],["T_FUNCTION","function",380],["T_WHITESPACE"," ",380],["T_STRING","billingAction",380],"(",")",["T_WHITESPACE","\n    ",380],"{",["T_WHITESPACE","\n        ",381],["T_VARIABLE","$collectTotals",382],["T_WHITESPACE"," ",382],"=",["T_WHITESPACE"," ",382],["T_STRING","false",382],";",["T_WHITESPACE","\n        ",382],["T_VARIABLE","$quote",383],["T_WHITESPACE"," ",383],"=",["T_WHITESPACE"," ",383],["T_VARIABLE","$this",383],["T_OBJECT_OPERATOR","->",383],["T_STRING","_getCheckoutSession",383],"(",")",["T_OBJECT_OPERATOR","->",383],["T_STRING","getQuote",383],"(",")",";",["T_WHITESPACE","\n\n        ",383],["T_DOC_COMMENT","\/**\n         *  Reset customer balance\n         *\/",385],["T_WHITESPACE","\n        ",387],["T_IF","if",388],["T_WHITESPACE"," ",388],"(",["T_VARIABLE","$quote",388],["T_OBJECT_OPERATOR","->",388],["T_STRING","getUseCustomerBalance",388],"(",")",")",["T_WHITESPACE"," ",388],"{",["T_WHITESPACE","\n            ",388],["T_VARIABLE","$quote",389],["T_OBJECT_OPERATOR","->",389],["T_STRING","setUseCustomerBalance",389],"(",["T_STRING","false",389],")",";",["T_WHITESPACE","\n            ",389],["T_VARIABLE","$collectTotals",390],["T_WHITESPACE"," ",390],"=",["T_WHITESPACE"," ",390],["T_STRING","true",390],";",["T_WHITESPACE","\n        ",390],"}",["T_WHITESPACE","\n\n        ",391],["T_DOC_COMMENT","\/**\n         *  Reset reward points\n         *\/",393],["T_WHITESPACE","\n        ",395],["T_IF","if",396],["T_WHITESPACE"," ",396],"(",["T_VARIABLE","$quote",396],["T_OBJECT_OPERATOR","->",396],["T_STRING","getUseRewardPoints",396],"(",")",")",["T_WHITESPACE"," ",396],"{",["T_WHITESPACE","\n            ",396],["T_VARIABLE","$quote",397],["T_OBJECT_OPERATOR","->",397],["T_STRING","setUseRewardPoints",397],"(",["T_STRING","false",397],")",";",["T_WHITESPACE","\n            ",397],["T_VARIABLE","$collectTotals",398],["T_WHITESPACE"," ",398],"=",["T_WHITESPACE"," ",398],["T_STRING","true",398],";",["T_WHITESPACE","\n        ",398],"}",["T_WHITESPACE","\n\n        ",399],["T_IF","if",401],["T_WHITESPACE"," ",401],"(",["T_VARIABLE","$collectTotals",401],")",["T_WHITESPACE"," ",401],"{",["T_WHITESPACE","\n            ",401],["T_VARIABLE","$quote",402],["T_OBJECT_OPERATOR","->",402],["T_STRING","collectTotals",402],"(",")",["T_OBJECT_OPERATOR","->",402],["T_STRING","save",402],"(",")",";",["T_WHITESPACE","\n        ",402],"}",["T_WHITESPACE","\n\n        ",403],["T_IF","if",405],["T_WHITESPACE"," ",405],"(","!",["T_VARIABLE","$this",405],["T_OBJECT_OPERATOR","->",405],["T_STRING","_validateBilling",405],"(",")",")",["T_WHITESPACE"," ",405],"{",["T_WHITESPACE","\n            ",405],["T_RETURN","return",406],";",["T_WHITESPACE","\n        ",406],"}",["T_WHITESPACE","\n\n        ",407],["T_IF","if",409],["T_WHITESPACE"," ",409],"(","!",["T_VARIABLE","$this",409],["T_OBJECT_OPERATOR","->",409],["T_STRING","_validateMinimumAmount",409],"(",")",")",["T_WHITESPACE"," ",409],"{",["T_WHITESPACE","\n            ",409],["T_RETURN","return",410],";",["T_WHITESPACE","\n        ",410],"}",["T_WHITESPACE","\n\n        ",411],["T_IF","if",413],["T_WHITESPACE"," ",413],"(","!",["T_VARIABLE","$this",413],["T_OBJECT_OPERATOR","->",413],["T_STRING","_getState",413],"(",")",["T_OBJECT_OPERATOR","->",413],["T_STRING","getCompleteStep",413],"(",["T_STRING","Mage_Checkout_Model_Type_Multishipping_State",413],["T_DOUBLE_COLON","::",413],["T_STRING","STEP_SHIPPING",413],")",")",["T_WHITESPACE"," ",413],"{",["T_WHITESPACE","\n            ",413],["T_VARIABLE","$this",414],["T_OBJECT_OPERATOR","->",414],["T_STRING","_redirect",414],"(",["T_CONSTANT_ENCAPSED_STRING","'*\/*\/shipping'",414],")",";",["T_WHITESPACE","\n            ",414],["T_RETURN","return",415],["T_WHITESPACE"," ",415],["T_VARIABLE","$this",415],";",["T_WHITESPACE","\n        ",415],"}",["T_WHITESPACE","\n\n        ",416],["T_VARIABLE","$this",418],["T_OBJECT_OPERATOR","->",418],["T_STRING","_getState",418],"(",")",["T_OBJECT_OPERATOR","->",418],["T_STRING","setActiveStep",418],"(",["T_WHITESPACE","\n            ",418],["T_STRING","Mage_Checkout_Model_Type_Multishipping_State",419],["T_DOUBLE_COLON","::",419],["T_STRING","STEP_BILLING",419],["T_WHITESPACE","\n        ",419],")",";",["T_WHITESPACE","\n\n        ",420],["T_VARIABLE","$this",422],["T_OBJECT_OPERATOR","->",422],["T_STRING","loadLayout",422],"(",")",";",["T_WHITESPACE","\n        ",422],["T_VARIABLE","$this",423],["T_OBJECT_OPERATOR","->",423],["T_STRING","_initLayoutMessages",423],"(",["T_CONSTANT_ENCAPSED_STRING","'customer\/session'",423],")",";",["T_WHITESPACE","\n        ",423],["T_VARIABLE","$this",424],["T_OBJECT_OPERATOR","->",424],["T_STRING","_initLayoutMessages",424],"(",["T_CONSTANT_ENCAPSED_STRING","'checkout\/session'",424],")",";",["T_WHITESPACE","\n        ",424],["T_VARIABLE","$this",425],["T_OBJECT_OPERATOR","->",425],["T_STRING","renderLayout",425],"(",")",";",["T_WHITESPACE","\n    ",425],"}",["T_WHITESPACE","\n\n    ",426],["T_DOC_COMMENT","\/**\n     * Validation of selecting of billing address\n     *\n     * @return boolean\n     *\/",428],["T_WHITESPACE","\n    ",432],["T_PROTECTED","protected",433],["T_WHITESPACE"," ",433],["T_FUNCTION","function",433],["T_WHITESPACE"," ",433],["T_STRING","_validateBilling",433],"(",")",["T_WHITESPACE","\n    ",433],"{",["T_WHITESPACE","\n        ",434],["T_IF","if",435],"(","!",["T_VARIABLE","$this",435],["T_OBJECT_OPERATOR","->",435],["T_STRING","_getCheckout",435],"(",")",["T_OBJECT_OPERATOR","->",435],["T_STRING","getQuote",435],"(",")",["T_OBJECT_OPERATOR","->",435],["T_STRING","getBillingAddress",435],"(",")",["T_OBJECT_OPERATOR","->",435],["T_STRING","getFirstname",435],"(",")",")",["T_WHITESPACE"," ",435],"{",["T_WHITESPACE","\n            ",435],["T_VARIABLE","$this",436],["T_OBJECT_OPERATOR","->",436],["T_STRING","_redirect",436],"(",["T_CONSTANT_ENCAPSED_STRING","'*\/multishipping_address\/selectBilling'",436],")",";",["T_WHITESPACE","\n            ",436],["T_RETURN","return",437],["T_WHITESPACE"," ",437],["T_STRING","false",437],";",["T_WHITESPACE","\n        ",437],"}",["T_WHITESPACE","\n        ",438],["T_RETURN","return",439],["T_WHITESPACE"," ",439],["T_STRING","true",439],";",["T_WHITESPACE","\n    ",439],"}",["T_WHITESPACE","\n\n    ",440],["T_DOC_COMMENT","\/**\n     * Multishipping checkout action to go back to billing\n     *\/",442],["T_WHITESPACE","\n    ",444],["T_PUBLIC","public",445],["T_WHITESPACE"," ",445],["T_FUNCTION","function",445],["T_WHITESPACE"," ",445],["T_STRING","backToBillingAction",445],"(",")",["T_WHITESPACE","\n    ",445],"{",["T_WHITESPACE","\n        ",446],["T_VARIABLE","$this",447],["T_OBJECT_OPERATOR","->",447],["T_STRING","_getState",447],"(",")",["T_OBJECT_OPERATOR","->",447],["T_STRING","setActiveStep",447],"(",["T_WHITESPACE","\n            ",447],["T_STRING","Mage_Checkout_Model_Type_Multishipping_State",448],["T_DOUBLE_COLON","::",448],["T_STRING","STEP_BILLING",448],["T_WHITESPACE","\n        ",448],")",";",["T_WHITESPACE","\n        ",449],["T_VARIABLE","$this",450],["T_OBJECT_OPERATOR","->",450],["T_STRING","_getState",450],"(",")",["T_OBJECT_OPERATOR","->",450],["T_STRING","unsCompleteStep",450],"(",["T_WHITESPACE","\n            ",450],["T_STRING","Mage_Checkout_Model_Type_Multishipping_State",451],["T_DOUBLE_COLON","::",451],["T_STRING","STEP_OVERVIEW",451],["T_WHITESPACE","\n        ",451],")",";",["T_WHITESPACE","\n        ",452],["T_VARIABLE","$this",453],["T_OBJECT_OPERATOR","->",453],["T_STRING","_redirect",453],"(",["T_CONSTANT_ENCAPSED_STRING","'*\/*\/billing'",453],")",";",["T_WHITESPACE","\n    ",453],"}",["T_WHITESPACE","\n\n    ",454],["T_DOC_COMMENT","\/**\n     * Multishipping checkout place order page\n     *\/",456],["T_WHITESPACE","\n    ",458],["T_PUBLIC","public",459],["T_WHITESPACE"," ",459],["T_FUNCTION","function",459],["T_WHITESPACE"," ",459],["T_STRING","overviewAction",459],"(",")",["T_WHITESPACE","\n    ",459],"{",["T_WHITESPACE","\n        ",460],["T_IF","if",461],["T_WHITESPACE"," ",461],"(","!",["T_VARIABLE","$this",461],["T_OBJECT_OPERATOR","->",461],["T_STRING","_validateMinimumAmount",461],"(",")",")",["T_WHITESPACE"," ",461],"{",["T_WHITESPACE","\n            ",461],["T_RETURN","return",462],["T_WHITESPACE"," ",462],["T_VARIABLE","$this",462],";",["T_WHITESPACE","\n        ",462],"}",["T_WHITESPACE","\n\n        ",463],["T_VARIABLE","$this",465],["T_OBJECT_OPERATOR","->",465],["T_STRING","_getState",465],"(",")",["T_OBJECT_OPERATOR","->",465],["T_STRING","setActiveStep",465],"(",["T_STRING","Mage_Checkout_Model_Type_Multishipping_State",465],["T_DOUBLE_COLON","::",465],["T_STRING","STEP_OVERVIEW",465],")",";",["T_WHITESPACE","\n\n        ",465],["T_TRY","try",467],["T_WHITESPACE"," ",467],"{",["T_WHITESPACE","\n            ",467],["T_VARIABLE","$payment",468],["T_WHITESPACE"," ",468],"=",["T_WHITESPACE"," ",468],["T_VARIABLE","$this",468],["T_OBJECT_OPERATOR","->",468],["T_STRING","getRequest",468],"(",")",["T_OBJECT_OPERATOR","->",468],["T_STRING","getPost",468],"(",["T_CONSTANT_ENCAPSED_STRING","'payment'",468],",",["T_WHITESPACE"," ",468],["T_ARRAY","array",468],"(",")",")",";",["T_WHITESPACE","\n            ",468],["T_VARIABLE","$payment",469],"[",["T_CONSTANT_ENCAPSED_STRING","'checks'",469],"]",["T_WHITESPACE"," ",469],"=",["T_WHITESPACE"," ",469],["T_STRING","Mage_Payment_Model_Method_Abstract",469],["T_DOUBLE_COLON","::",469],["T_STRING","CHECK_USE_FOR_MULTISHIPPING",469],["T_WHITESPACE","\n                ",469],"|",["T_WHITESPACE"," ",470],["T_STRING","Mage_Payment_Model_Method_Abstract",470],["T_DOUBLE_COLON","::",470],["T_STRING","CHECK_USE_FOR_COUNTRY",470],["T_WHITESPACE","\n                ",470],"|",["T_WHITESPACE"," ",471],["T_STRING","Mage_Payment_Model_Method_Abstract",471],["T_DOUBLE_COLON","::",471],["T_STRING","CHECK_USE_FOR_CURRENCY",471],["T_WHITESPACE","\n                ",471],"|",["T_WHITESPACE"," ",472],["T_STRING","Mage_Payment_Model_Method_Abstract",472],["T_DOUBLE_COLON","::",472],["T_STRING","CHECK_ORDER_TOTAL_MIN_MAX",472],["T_WHITESPACE","\n                ",472],"|",["T_WHITESPACE"," ",473],["T_STRING","Mage_Payment_Model_Method_Abstract",473],["T_DOUBLE_COLON","::",473],["T_STRING","CHECK_ZERO_TOTAL",473],";",["T_WHITESPACE","\n            ",473],["T_VARIABLE","$this",474],["T_OBJECT_OPERATOR","->",474],["T_STRING","_getCheckout",474],"(",")",["T_OBJECT_OPERATOR","->",474],["T_STRING","setPaymentMethod",474],"(",["T_VARIABLE","$payment",474],")",";",["T_WHITESPACE","\n\n            ",474],["T_VARIABLE","$this",476],["T_OBJECT_OPERATOR","->",476],["T_STRING","_getState",476],"(",")",["T_OBJECT_OPERATOR","->",476],["T_STRING","setCompleteStep",476],"(",["T_WHITESPACE","\n                ",476],["T_STRING","Mage_Checkout_Model_Type_Multishipping_State",477],["T_DOUBLE_COLON","::",477],["T_STRING","STEP_BILLING",477],["T_WHITESPACE","\n            ",477],")",";",["T_WHITESPACE","\n\n            ",478],["T_VARIABLE","$this",480],["T_OBJECT_OPERATOR","->",480],["T_STRING","loadLayout",480],"(",")",";",["T_WHITESPACE","\n            ",480],["T_VARIABLE","$this",481],["T_OBJECT_OPERATOR","->",481],["T_STRING","_initLayoutMessages",481],"(",["T_CONSTANT_ENCAPSED_STRING","'checkout\/session'",481],")",";",["T_WHITESPACE","\n            ",481],["T_VARIABLE","$this",482],["T_OBJECT_OPERATOR","->",482],["T_STRING","_initLayoutMessages",482],"(",["T_CONSTANT_ENCAPSED_STRING","'customer\/session'",482],")",";",["T_WHITESPACE","\n            ",482],["T_VARIABLE","$this",483],["T_OBJECT_OPERATOR","->",483],["T_STRING","renderLayout",483],"(",")",";",["T_WHITESPACE","\n        ",483],"}",["T_WHITESPACE","\n        ",484],["T_CATCH","catch",485],["T_WHITESPACE"," ",485],"(",["T_STRING","Mage_Core_Exception",485],["T_WHITESPACE"," ",485],["T_VARIABLE","$e",485],")",["T_WHITESPACE"," ",485],"{",["T_WHITESPACE","\n            ",485],["T_VARIABLE","$this",486],["T_OBJECT_OPERATOR","->",486],["T_STRING","_getCheckoutSession",486],"(",")",["T_OBJECT_OPERATOR","->",486],["T_STRING","addError",486],"(",["T_VARIABLE","$e",486],["T_OBJECT_OPERATOR","->",486],["T_STRING","getMessage",486],"(",")",")",";",["T_WHITESPACE","\n            ",486],["T_VARIABLE","$this",487],["T_OBJECT_OPERATOR","->",487],["T_STRING","_redirect",487],"(",["T_CONSTANT_ENCAPSED_STRING","'*\/*\/billing'",487],")",";",["T_WHITESPACE","\n        ",487],"}",["T_WHITESPACE","\n        ",488],["T_CATCH","catch",489],["T_WHITESPACE"," ",489],"(",["T_STRING","Exception",489],["T_WHITESPACE"," ",489],["T_VARIABLE","$e",489],")",["T_WHITESPACE"," ",489],"{",["T_WHITESPACE","\n            ",489],["T_STRING","Mage",490],["T_DOUBLE_COLON","::",490],["T_STRING","logException",490],"(",["T_VARIABLE","$e",490],")",";",["T_WHITESPACE","\n            ",490],["T_VARIABLE","$this",491],["T_OBJECT_OPERATOR","->",491],["T_STRING","_getCheckoutSession",491],"(",")",["T_OBJECT_OPERATOR","->",491],["T_STRING","addException",491],"(",["T_VARIABLE","$e",491],",",["T_WHITESPACE"," ",491],["T_VARIABLE","$this",491],["T_OBJECT_OPERATOR","->",491],["T_STRING","__",491],"(",["T_CONSTANT_ENCAPSED_STRING","'Cannot open the overview page'",491],")",")",";",["T_WHITESPACE","\n            ",491],["T_VARIABLE","$this",492],["T_OBJECT_OPERATOR","->",492],["T_STRING","_redirect",492],"(",["T_CONSTANT_ENCAPSED_STRING","'*\/*\/billing'",492],")",";",["T_WHITESPACE","\n        ",492],"}",["T_WHITESPACE","\n    ",493],"}",["T_WHITESPACE","\n\n    ",494],["T_DOC_COMMENT","\/**\n     * Multishipping checkout after the overview page\n     *\/",496],["T_WHITESPACE","\n    ",498],["T_PUBLIC","public",499],["T_WHITESPACE"," ",499],["T_FUNCTION","function",499],["T_WHITESPACE"," ",499],["T_STRING","overviewPostAction",499],"(",")",["T_WHITESPACE","\n    ",499],"{",["T_WHITESPACE","\n        ",500],["T_IF","if",501],["T_WHITESPACE"," ",501],"(","!",["T_VARIABLE","$this",501],["T_OBJECT_OPERATOR","->",501],["T_STRING","_validateFormKey",501],"(",")",")",["T_WHITESPACE"," ",501],"{",["T_WHITESPACE","\n            ",501],["T_VARIABLE","$this",502],["T_OBJECT_OPERATOR","->",502],["T_STRING","_forward",502],"(",["T_CONSTANT_ENCAPSED_STRING","'backToAddresses'",502],")",";",["T_WHITESPACE","\n            ",502],["T_RETURN","return",503],";",["T_WHITESPACE","\n        ",503],"}",["T_WHITESPACE","\n\n        ",504],["T_IF","if",506],["T_WHITESPACE"," ",506],"(","!",["T_VARIABLE","$this",506],["T_OBJECT_OPERATOR","->",506],["T_STRING","_validateMinimumAmount",506],"(",")",")",["T_WHITESPACE"," ",506],"{",["T_WHITESPACE","\n            ",506],["T_RETURN","return",507],";",["T_WHITESPACE","\n        ",507],"}",["T_WHITESPACE","\n\n        ",508],["T_TRY","try",510],["T_WHITESPACE"," ",510],"{",["T_WHITESPACE","\n            ",510],["T_IF","if",511],["T_WHITESPACE"," ",511],"(",["T_VARIABLE","$requiredAgreements",511],["T_WHITESPACE"," ",511],"=",["T_WHITESPACE"," ",511],["T_STRING","Mage",511],["T_DOUBLE_COLON","::",511],["T_STRING","helper",511],"(",["T_CONSTANT_ENCAPSED_STRING","'checkout'",511],")",["T_OBJECT_OPERATOR","->",511],["T_STRING","getRequiredAgreementIds",511],"(",")",")",["T_WHITESPACE"," ",511],"{",["T_WHITESPACE","\n                ",511],["T_VARIABLE","$postedAgreements",512],["T_WHITESPACE"," ",512],"=",["T_WHITESPACE"," ",512],["T_STRING","array_keys",512],"(",["T_VARIABLE","$this",512],["T_OBJECT_OPERATOR","->",512],["T_STRING","getRequest",512],"(",")",["T_OBJECT_OPERATOR","->",512],["T_STRING","getPost",512],"(",["T_CONSTANT_ENCAPSED_STRING","'agreement'",512],",",["T_WHITESPACE"," ",512],["T_ARRAY","array",512],"(",")",")",")",";",["T_WHITESPACE","\n                ",512],["T_IF","if",513],["T_WHITESPACE"," ",513],"(",["T_VARIABLE","$diff",513],["T_WHITESPACE"," ",513],"=",["T_WHITESPACE"," ",513],["T_STRING","array_diff",513],"(",["T_VARIABLE","$requiredAgreements",513],",",["T_WHITESPACE"," ",513],["T_VARIABLE","$postedAgreements",513],")",")",["T_WHITESPACE"," ",513],"{",["T_WHITESPACE","\n                    ",513],["T_VARIABLE","$this",514],["T_OBJECT_OPERATOR","->",514],["T_STRING","_getCheckoutSession",514],"(",")",["T_OBJECT_OPERATOR","->",514],["T_STRING","addError",514],"(",["T_VARIABLE","$this",514],["T_OBJECT_OPERATOR","->",514],["T_STRING","__",514],"(",["T_CONSTANT_ENCAPSED_STRING","'Please agree to all Terms and Conditions before placing the order.'",514],")",")",";",["T_WHITESPACE","\n                    ",514],["T_VARIABLE","$this",515],["T_OBJECT_OPERATOR","->",515],["T_STRING","_redirect",515],"(",["T_CONSTANT_ENCAPSED_STRING","'*\/*\/billing'",515],")",";",["T_WHITESPACE","\n                    ",515],["T_RETURN","return",516],";",["T_WHITESPACE","\n                ",516],"}",["T_WHITESPACE","\n            ",517],"}",["T_WHITESPACE","\n\n            ",518],["T_VARIABLE","$payment",520],["T_WHITESPACE"," ",520],"=",["T_WHITESPACE"," ",520],["T_VARIABLE","$this",520],["T_OBJECT_OPERATOR","->",520],["T_STRING","getRequest",520],"(",")",["T_OBJECT_OPERATOR","->",520],["T_STRING","getPost",520],"(",["T_CONSTANT_ENCAPSED_STRING","'payment'",520],")",";",["T_WHITESPACE","\n            ",520],["T_VARIABLE","$paymentInstance",521],["T_WHITESPACE"," ",521],"=",["T_WHITESPACE"," ",521],["T_VARIABLE","$this",521],["T_OBJECT_OPERATOR","->",521],["T_STRING","_getCheckout",521],"(",")",["T_OBJECT_OPERATOR","->",521],["T_STRING","getQuote",521],"(",")",["T_OBJECT_OPERATOR","->",521],["T_STRING","getPayment",521],"(",")",";",["T_WHITESPACE","\n            ",521],["T_IF","if",522],["T_WHITESPACE"," ",522],"(",["T_ISSET","isset",522],"(",["T_VARIABLE","$payment",522],"[",["T_CONSTANT_ENCAPSED_STRING","'cc_number'",522],"]",")",")",["T_WHITESPACE"," ",522],"{",["T_WHITESPACE","\n                ",522],["T_VARIABLE","$paymentInstance",523],["T_OBJECT_OPERATOR","->",523],["T_STRING","setCcNumber",523],"(",["T_VARIABLE","$payment",523],"[",["T_CONSTANT_ENCAPSED_STRING","'cc_number'",523],"]",")",";",["T_WHITESPACE","\n            ",523],"}",["T_WHITESPACE","\n            ",524],["T_IF","if",525],["T_WHITESPACE"," ",525],"(",["T_ISSET","isset",525],"(",["T_VARIABLE","$payment",525],"[",["T_CONSTANT_ENCAPSED_STRING","'cc_cid'",525],"]",")",")",["T_WHITESPACE"," ",525],"{",["T_WHITESPACE","\n                ",525],["T_VARIABLE","$paymentInstance",526],["T_OBJECT_OPERATOR","->",526],["T_STRING","setCcCid",526],"(",["T_VARIABLE","$payment",526],"[",["T_CONSTANT_ENCAPSED_STRING","'cc_cid'",526],"]",")",";",["T_WHITESPACE","\n            ",526],"}",["T_WHITESPACE","\n            ",527],["T_VARIABLE","$this",528],["T_OBJECT_OPERATOR","->",528],["T_STRING","_getCheckout",528],"(",")",["T_OBJECT_OPERATOR","->",528],["T_STRING","createOrders",528],"(",")",";",["T_WHITESPACE","\n            ",528],["T_VARIABLE","$this",529],["T_OBJECT_OPERATOR","->",529],["T_STRING","_getState",529],"(",")",["T_OBJECT_OPERATOR","->",529],["T_STRING","setActiveStep",529],"(",["T_WHITESPACE","\n                ",529],["T_STRING","Mage_Checkout_Model_Type_Multishipping_State",530],["T_DOUBLE_COLON","::",530],["T_STRING","STEP_SUCCESS",530],["T_WHITESPACE","\n            ",530],")",";",["T_WHITESPACE","\n            ",531],["T_VARIABLE","$this",532],["T_OBJECT_OPERATOR","->",532],["T_STRING","_getState",532],"(",")",["T_OBJECT_OPERATOR","->",532],["T_STRING","setCompleteStep",532],"(",["T_WHITESPACE","\n                ",532],["T_STRING","Mage_Checkout_Model_Type_Multishipping_State",533],["T_DOUBLE_COLON","::",533],["T_STRING","STEP_OVERVIEW",533],["T_WHITESPACE","\n            ",533],")",";",["T_WHITESPACE","\n            ",534],["T_VARIABLE","$this",535],["T_OBJECT_OPERATOR","->",535],["T_STRING","_getCheckout",535],"(",")",["T_OBJECT_OPERATOR","->",535],["T_STRING","getCheckoutSession",535],"(",")",["T_OBJECT_OPERATOR","->",535],["T_STRING","clear",535],"(",")",";",["T_WHITESPACE","\n            ",535],["T_VARIABLE","$this",536],["T_OBJECT_OPERATOR","->",536],["T_STRING","_getCheckout",536],"(",")",["T_OBJECT_OPERATOR","->",536],["T_STRING","getCheckoutSession",536],"(",")",["T_OBJECT_OPERATOR","->",536],["T_STRING","setDisplaySuccess",536],"(",["T_STRING","true",536],")",";",["T_WHITESPACE","\n            ",536],["T_VARIABLE","$this",537],["T_OBJECT_OPERATOR","->",537],["T_STRING","_redirect",537],"(",["T_CONSTANT_ENCAPSED_STRING","'*\/*\/success'",537],")",";",["T_WHITESPACE","\n        ",537],"}",["T_WHITESPACE"," ",538],["T_CATCH","catch",538],["T_WHITESPACE"," ",538],"(",["T_STRING","Mage_Payment_Model_Info_Exception",538],["T_WHITESPACE"," ",538],["T_VARIABLE","$e",538],")",["T_WHITESPACE"," ",538],"{",["T_WHITESPACE","\n            ",538],["T_VARIABLE","$message",539],["T_WHITESPACE"," ",539],"=",["T_WHITESPACE"," ",539],["T_VARIABLE","$e",539],["T_OBJECT_OPERATOR","->",539],["T_STRING","getMessage",539],"(",")",";",["T_WHITESPACE","\n            ",539],["T_IF","if",540],["T_WHITESPACE"," ",540],"(",["T_WHITESPACE"," ",540],"!",["T_EMPTY","empty",540],"(",["T_VARIABLE","$message",540],")",["T_WHITESPACE"," ",540],")",["T_WHITESPACE"," ",540],"{",["T_WHITESPACE","\n                ",540],["T_VARIABLE","$this",541],["T_OBJECT_OPERATOR","->",541],["T_STRING","_getCheckoutSession",541],"(",")",["T_OBJECT_OPERATOR","->",541],["T_STRING","addError",541],"(",["T_VARIABLE","$message",541],")",";",["T_WHITESPACE","\n            ",541],"}",["T_WHITESPACE","\n            ",542],["T_VARIABLE","$this",543],["T_OBJECT_OPERATOR","->",543],["T_STRING","_redirect",543],"(",["T_CONSTANT_ENCAPSED_STRING","'*\/*\/billing'",543],")",";",["T_WHITESPACE","\n        ",543],"}",["T_WHITESPACE"," ",544],["T_CATCH","catch",544],["T_WHITESPACE"," ",544],"(",["T_STRING","Mage_Checkout_Exception",544],["T_WHITESPACE"," ",544],["T_VARIABLE","$e",544],")",["T_WHITESPACE"," ",544],"{",["T_WHITESPACE","\n            ",544],["T_STRING","Mage",545],["T_DOUBLE_COLON","::",545],["T_STRING","helper",545],"(",["T_CONSTANT_ENCAPSED_STRING","'checkout'",545],")",["T_WHITESPACE","\n                ",545],["T_OBJECT_OPERATOR","->",546],["T_STRING","sendPaymentFailedEmail",546],"(",["T_VARIABLE","$this",546],["T_OBJECT_OPERATOR","->",546],["T_STRING","_getCheckout",546],"(",")",["T_OBJECT_OPERATOR","->",546],["T_STRING","getQuote",546],"(",")",",",["T_WHITESPACE"," ",546],["T_VARIABLE","$e",546],["T_OBJECT_OPERATOR","->",546],["T_STRING","getMessage",546],"(",")",",",["T_WHITESPACE"," ",546],["T_CONSTANT_ENCAPSED_STRING","'multi-shipping'",546],")",";",["T_WHITESPACE","\n            ",546],["T_VARIABLE","$this",547],["T_OBJECT_OPERATOR","->",547],["T_STRING","_getCheckout",547],"(",")",["T_OBJECT_OPERATOR","->",547],["T_STRING","getCheckoutSession",547],"(",")",["T_OBJECT_OPERATOR","->",547],["T_STRING","clear",547],"(",")",";",["T_WHITESPACE","\n            ",547],["T_VARIABLE","$this",548],["T_OBJECT_OPERATOR","->",548],["T_STRING","_getCheckoutSession",548],"(",")",["T_OBJECT_OPERATOR","->",548],["T_STRING","addError",548],"(",["T_VARIABLE","$e",548],["T_OBJECT_OPERATOR","->",548],["T_STRING","getMessage",548],"(",")",")",";",["T_WHITESPACE","\n            ",548],["T_VARIABLE","$this",549],["T_OBJECT_OPERATOR","->",549],["T_STRING","_redirect",549],"(",["T_CONSTANT_ENCAPSED_STRING","'*\/cart'",549],")",";",["T_WHITESPACE","\n        ",549],"}",["T_WHITESPACE","\n        ",550],["T_CATCH","catch",551],["T_WHITESPACE"," ",551],"(",["T_STRING","Mage_Core_Exception",551],["T_WHITESPACE"," ",551],["T_VARIABLE","$e",551],")",["T_WHITESPACE"," ",551],"{",["T_WHITESPACE","\n            ",551],["T_STRING","Mage",552],["T_DOUBLE_COLON","::",552],["T_STRING","helper",552],"(",["T_CONSTANT_ENCAPSED_STRING","'checkout'",552],")",["T_WHITESPACE","\n                ",552],["T_OBJECT_OPERATOR","->",553],["T_STRING","sendPaymentFailedEmail",553],"(",["T_VARIABLE","$this",553],["T_OBJECT_OPERATOR","->",553],["T_STRING","_getCheckout",553],"(",")",["T_OBJECT_OPERATOR","->",553],["T_STRING","getQuote",553],"(",")",",",["T_WHITESPACE"," ",553],["T_VARIABLE","$e",553],["T_OBJECT_OPERATOR","->",553],["T_STRING","getMessage",553],"(",")",",",["T_WHITESPACE"," ",553],["T_CONSTANT_ENCAPSED_STRING","'multi-shipping'",553],")",";",["T_WHITESPACE","\n            ",553],["T_VARIABLE","$this",554],["T_OBJECT_OPERATOR","->",554],["T_STRING","_getCheckoutSession",554],"(",")",["T_OBJECT_OPERATOR","->",554],["T_STRING","addError",554],"(",["T_VARIABLE","$e",554],["T_OBJECT_OPERATOR","->",554],["T_STRING","getMessage",554],"(",")",")",";",["T_WHITESPACE","\n            ",554],["T_VARIABLE","$this",555],["T_OBJECT_OPERATOR","->",555],["T_STRING","_redirect",555],"(",["T_CONSTANT_ENCAPSED_STRING","'*\/*\/billing'",555],")",";",["T_WHITESPACE","\n        ",555],"}",["T_WHITESPACE"," ",556],["T_CATCH","catch",556],["T_WHITESPACE"," ",556],"(",["T_STRING","Exception",556],["T_WHITESPACE"," ",556],["T_VARIABLE","$e",556],")",["T_WHITESPACE"," ",556],"{",["T_WHITESPACE","\n            ",556],["T_STRING","Mage",557],["T_DOUBLE_COLON","::",557],["T_STRING","logException",557],"(",["T_VARIABLE","$e",557],")",";",["T_WHITESPACE","\n            ",557],["T_STRING","Mage",558],["T_DOUBLE_COLON","::",558],["T_STRING","helper",558],"(",["T_CONSTANT_ENCAPSED_STRING","'checkout'",558],")",["T_WHITESPACE","\n                ",558],["T_OBJECT_OPERATOR","->",559],["T_STRING","sendPaymentFailedEmail",559],"(",["T_VARIABLE","$this",559],["T_OBJECT_OPERATOR","->",559],["T_STRING","_getCheckout",559],"(",")",["T_OBJECT_OPERATOR","->",559],["T_STRING","getQuote",559],"(",")",",",["T_WHITESPACE"," ",559],["T_VARIABLE","$e",559],["T_OBJECT_OPERATOR","->",559],["T_STRING","getMessage",559],"(",")",",",["T_WHITESPACE"," ",559],["T_CONSTANT_ENCAPSED_STRING","'multi-shipping'",559],")",";",["T_WHITESPACE","\n            ",559],["T_VARIABLE","$this",560],["T_OBJECT_OPERATOR","->",560],["T_STRING","_getCheckoutSession",560],"(",")",["T_OBJECT_OPERATOR","->",560],["T_STRING","addError",560],"(",["T_VARIABLE","$this",560],["T_OBJECT_OPERATOR","->",560],["T_STRING","__",560],"(",["T_CONSTANT_ENCAPSED_STRING","'Order place error.'",560],")",")",";",["T_WHITESPACE","\n            ",560],["T_VARIABLE","$this",561],["T_OBJECT_OPERATOR","->",561],["T_STRING","_redirect",561],"(",["T_CONSTANT_ENCAPSED_STRING","'*\/*\/billing'",561],")",";",["T_WHITESPACE","\n        ",561],"}",["T_WHITESPACE","\n    ",562],"}",["T_WHITESPACE","\n\n    ",563],["T_DOC_COMMENT","\/**\n     * Multishipping checkout success page\n     *\/",565],["T_WHITESPACE","\n    ",567],["T_PUBLIC","public",568],["T_WHITESPACE"," ",568],["T_FUNCTION","function",568],["T_WHITESPACE"," ",568],["T_STRING","successAction",568],"(",")",["T_WHITESPACE","\n    ",568],"{",["T_WHITESPACE","\n        ",569],["T_IF","if",570],["T_WHITESPACE"," ",570],"(","!",["T_VARIABLE","$this",570],["T_OBJECT_OPERATOR","->",570],["T_STRING","_getState",570],"(",")",["T_OBJECT_OPERATOR","->",570],["T_STRING","getCompleteStep",570],"(",["T_STRING","Mage_Checkout_Model_Type_Multishipping_State",570],["T_DOUBLE_COLON","::",570],["T_STRING","STEP_OVERVIEW",570],")",")",["T_WHITESPACE"," ",570],"{",["T_WHITESPACE","\n            ",570],["T_VARIABLE","$this",571],["T_OBJECT_OPERATOR","->",571],["T_STRING","_redirect",571],"(",["T_CONSTANT_ENCAPSED_STRING","'*\/*\/addresses'",571],")",";",["T_WHITESPACE","\n            ",571],["T_RETURN","return",572],["T_WHITESPACE"," ",572],["T_VARIABLE","$this",572],";",["T_WHITESPACE","\n        ",572],"}",["T_WHITESPACE","\n\n        ",573],["T_VARIABLE","$this",575],["T_OBJECT_OPERATOR","->",575],["T_STRING","loadLayout",575],"(",")",";",["T_WHITESPACE","\n        ",575],["T_VARIABLE","$this",576],["T_OBJECT_OPERATOR","->",576],["T_STRING","_initLayoutMessages",576],"(",["T_CONSTANT_ENCAPSED_STRING","'checkout\/session'",576],")",";",["T_WHITESPACE","\n        ",576],["T_VARIABLE","$ids",577],["T_WHITESPACE"," ",577],"=",["T_WHITESPACE"," ",577],["T_VARIABLE","$this",577],["T_OBJECT_OPERATOR","->",577],["T_STRING","_getCheckout",577],"(",")",["T_OBJECT_OPERATOR","->",577],["T_STRING","getOrderIds",577],"(",")",";",["T_WHITESPACE","\n        ",577],["T_STRING","Mage",578],["T_DOUBLE_COLON","::",578],["T_STRING","dispatchEvent",578],"(",["T_CONSTANT_ENCAPSED_STRING","'checkout_multishipping_controller_success_action'",578],",",["T_WHITESPACE"," ",578],["T_ARRAY","array",578],"(",["T_CONSTANT_ENCAPSED_STRING","'order_ids'",578],["T_WHITESPACE"," ",578],["T_DOUBLE_ARROW","=>",578],["T_WHITESPACE"," ",578],["T_VARIABLE","$ids",578],")",")",";",["T_WHITESPACE","\n        ",578],["T_VARIABLE","$this",579],["T_OBJECT_OPERATOR","->",579],["T_STRING","renderLayout",579],"(",")",";",["T_WHITESPACE","\n    ",579],"}",["T_WHITESPACE","\n\n    ",580],["T_DOC_COMMENT","\/**\n     * Redirect to login page\n     *\/",582],["T_WHITESPACE","\n    ",584],["T_PUBLIC","public",585],["T_WHITESPACE"," ",585],["T_FUNCTION","function",585],["T_WHITESPACE"," ",585],["T_STRING","redirectLogin",585],"(",")",["T_WHITESPACE","\n    ",585],"{",["T_WHITESPACE","\n        ",586],["T_VARIABLE","$this",587],["T_OBJECT_OPERATOR","->",587],["T_STRING","setFlag",587],"(",["T_CONSTANT_ENCAPSED_STRING","''",587],",",["T_WHITESPACE"," ",587],["T_CONSTANT_ENCAPSED_STRING","'no-dispatch'",587],",",["T_WHITESPACE"," ",587],["T_STRING","true",587],")",";",["T_WHITESPACE","\n        ",587],["T_STRING","Mage",588],["T_DOUBLE_COLON","::",588],["T_STRING","getSingleton",588],"(",["T_CONSTANT_ENCAPSED_STRING","'customer\/session'",588],")",["T_OBJECT_OPERATOR","->",588],["T_STRING","setBeforeAuthUrl",588],"(",["T_STRING","Mage",588],["T_DOUBLE_COLON","::",588],["T_STRING","getUrl",588],"(",["T_CONSTANT_ENCAPSED_STRING","'*\/*'",588],",",["T_WHITESPACE"," ",588],["T_ARRAY","array",588],"(",["T_CONSTANT_ENCAPSED_STRING","'_secure'",588],["T_DOUBLE_ARROW","=>",588],["T_STRING","true",588],")",")",")",";",["T_WHITESPACE","\n\n        ",588],["T_VARIABLE","$this",590],["T_OBJECT_OPERATOR","->",590],["T_STRING","getResponse",590],"(",")",["T_OBJECT_OPERATOR","->",590],["T_STRING","setRedirect",590],"(",["T_WHITESPACE","\n            ",590],["T_STRING","Mage",591],["T_DOUBLE_COLON","::",591],["T_STRING","helper",591],"(",["T_CONSTANT_ENCAPSED_STRING","'core\/url'",591],")",["T_OBJECT_OPERATOR","->",591],["T_STRING","addRequestParam",591],"(",["T_WHITESPACE","\n                ",591],["T_VARIABLE","$this",592],["T_OBJECT_OPERATOR","->",592],["T_STRING","_getHelper",592],"(",")",["T_OBJECT_OPERATOR","->",592],["T_STRING","getMSLoginUrl",592],"(",")",",",["T_WHITESPACE","\n                ",592],["T_ARRAY","array",593],"(",["T_CONSTANT_ENCAPSED_STRING","'context'",593],["T_WHITESPACE"," ",593],["T_DOUBLE_ARROW","=>",593],["T_WHITESPACE"," ",593],["T_CONSTANT_ENCAPSED_STRING","'checkout'",593],")",["T_WHITESPACE","\n            ",593],")",["T_WHITESPACE","\n        ",594],")",";",["T_WHITESPACE","\n\n        ",595],["T_VARIABLE","$this",597],["T_OBJECT_OPERATOR","->",597],["T_STRING","setFlag",597],"(",["T_CONSTANT_ENCAPSED_STRING","''",597],",",["T_WHITESPACE"," ",597],["T_CONSTANT_ENCAPSED_STRING","'redirectLogin'",597],",",["T_WHITESPACE"," ",597],["T_STRING","true",597],")",";",["T_WHITESPACE","\n    ",597],"}",["T_WHITESPACE","\n",598],"}",["T_WHITESPACE","\n",599]]
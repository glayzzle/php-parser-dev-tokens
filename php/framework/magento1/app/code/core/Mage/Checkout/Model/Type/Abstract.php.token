[["T_OPEN_TAG","<?php\n",1],["T_DOC_COMMENT","\/**\n * Magento\n *\n * NOTICE OF LICENSE\n *\n * This source file is subject to the Open Software License (OSL 3.0)\n * that is bundled with this package in the file LICENSE.txt.\n * It is also available through the world-wide-web at this URL:\n * http:\/\/opensource.org\/licenses\/osl-3.0.php\n * If you did not receive a copy of the license and are unable to\n * obtain it through the world-wide-web, please send an email\n * to license@magento.com so we can send you a copy immediately.\n *\n * DISCLAIMER\n *\n * Do not edit or add to this file if you wish to upgrade Magento to newer\n * versions in the future. If you wish to customize Magento for your\n * needs please refer to http:\/\/www.magento.com for more information.\n *\n * @category    Mage\n * @package     Mage_Checkout\n * @copyright  Copyright (c) 2006-2016 X.commerce, Inc. and affiliates (http:\/\/www.magento.com)\n * @license    http:\/\/opensource.org\/licenses\/osl-3.0.php  Open Software License (OSL 3.0)\n *\/",2],["T_WHITESPACE","\n\n",25],["T_DOC_COMMENT","\/**\n * Cehckout type abstract class\n *\n * @category   Mage\n * @package    Mage_Checkout\n * @author      Magento Core Team <core@magentocommerce.com>\n *\/",27],["T_WHITESPACE","\n",33],["T_ABSTRACT","abstract",34],["T_WHITESPACE"," ",34],["T_CLASS","class",34],["T_WHITESPACE"," ",34],["T_STRING","Mage_Checkout_Model_Type_Abstract",34],["T_WHITESPACE"," ",34],["T_EXTENDS","extends",34],["T_WHITESPACE"," ",34],["T_STRING","Varien_Object",34],["T_WHITESPACE","\n",34],"{",["T_WHITESPACE","\n    ",35],["T_DOC_COMMENT","\/**\n     * Retrieve checkout session model\n     *\n     * @return Mage_Checkout_Model_Session\n     *\/",36],["T_WHITESPACE","\n    ",40],["T_PUBLIC","public",41],["T_WHITESPACE"," ",41],["T_FUNCTION","function",41],["T_WHITESPACE"," ",41],["T_STRING","getCheckoutSession",41],"(",")",["T_WHITESPACE","\n    ",41],"{",["T_WHITESPACE","\n        ",42],["T_VARIABLE","$checkout",43],["T_WHITESPACE"," ",43],"=",["T_WHITESPACE"," ",43],["T_VARIABLE","$this",43],["T_OBJECT_OPERATOR","->",43],["T_STRING","getData",43],"(",["T_CONSTANT_ENCAPSED_STRING","'checkout_session'",43],")",";",["T_WHITESPACE","\n        ",43],["T_IF","if",44],["T_WHITESPACE"," ",44],"(",["T_STRING","is_null",44],"(",["T_VARIABLE","$checkout",44],")",")",["T_WHITESPACE"," ",44],"{",["T_WHITESPACE","\n            ",44],["T_VARIABLE","$checkout",45],["T_WHITESPACE"," ",45],"=",["T_WHITESPACE"," ",45],["T_STRING","Mage",45],["T_DOUBLE_COLON","::",45],["T_STRING","getSingleton",45],"(",["T_CONSTANT_ENCAPSED_STRING","'checkout\/session'",45],")",";",["T_WHITESPACE","\n            ",45],["T_VARIABLE","$this",46],["T_OBJECT_OPERATOR","->",46],["T_STRING","setData",46],"(",["T_CONSTANT_ENCAPSED_STRING","'checkout_session'",46],",",["T_WHITESPACE"," ",46],["T_VARIABLE","$checkout",46],")",";",["T_WHITESPACE","\n        ",46],"}",["T_WHITESPACE","\n        ",47],["T_RETURN","return",48],["T_WHITESPACE"," ",48],["T_VARIABLE","$checkout",48],";",["T_WHITESPACE","\n    ",48],"}",["T_WHITESPACE","\n\n    ",49],["T_DOC_COMMENT","\/**\n     * Retrieve quote model\n     *\n     * @return Mage_Sales_Model_Quote\n     *\/",51],["T_WHITESPACE","\n    ",55],["T_PUBLIC","public",56],["T_WHITESPACE"," ",56],["T_FUNCTION","function",56],["T_WHITESPACE"," ",56],["T_STRING","getQuote",56],"(",")",["T_WHITESPACE","\n    ",56],"{",["T_WHITESPACE","\n        ",57],["T_RETURN","return",58],["T_WHITESPACE"," ",58],["T_VARIABLE","$this",58],["T_OBJECT_OPERATOR","->",58],["T_STRING","getCheckoutSession",58],"(",")",["T_OBJECT_OPERATOR","->",58],["T_STRING","getQuote",58],"(",")",";",["T_WHITESPACE","\n    ",58],"}",["T_WHITESPACE","\n\n    ",59],["T_DOC_COMMENT","\/**\n     * Retrieve quote items\n     *\n     * @return array\n     *\/",61],["T_WHITESPACE","\n    ",65],["T_PUBLIC","public",66],["T_WHITESPACE"," ",66],["T_FUNCTION","function",66],["T_WHITESPACE"," ",66],["T_STRING","getQuoteItems",66],"(",")",["T_WHITESPACE","\n    ",66],"{",["T_WHITESPACE","\n        ",67],["T_RETURN","return",68],["T_WHITESPACE"," ",68],["T_VARIABLE","$this",68],["T_OBJECT_OPERATOR","->",68],["T_STRING","getQuote",68],"(",")",["T_OBJECT_OPERATOR","->",68],["T_STRING","getAllItems",68],"(",")",";",["T_WHITESPACE","\n    ",68],"}",["T_WHITESPACE","\n\n    ",69],["T_DOC_COMMENT","\/**\n     * Retrieve customer session vodel\n     *\n     * @return Mage_Customer_Model_Session\n     *\/",71],["T_WHITESPACE","\n    ",75],["T_PUBLIC","public",76],["T_WHITESPACE"," ",76],["T_FUNCTION","function",76],["T_WHITESPACE"," ",76],["T_STRING","getCustomerSession",76],"(",")",["T_WHITESPACE","\n    ",76],"{",["T_WHITESPACE","\n        ",77],["T_VARIABLE","$customer",78],["T_WHITESPACE"," ",78],"=",["T_WHITESPACE"," ",78],["T_VARIABLE","$this",78],["T_OBJECT_OPERATOR","->",78],["T_STRING","getData",78],"(",["T_CONSTANT_ENCAPSED_STRING","'customer_session'",78],")",";",["T_WHITESPACE","\n        ",78],["T_IF","if",79],["T_WHITESPACE"," ",79],"(",["T_STRING","is_null",79],"(",["T_VARIABLE","$customer",79],")",")",["T_WHITESPACE"," ",79],"{",["T_WHITESPACE","\n            ",79],["T_VARIABLE","$customer",80],["T_WHITESPACE"," ",80],"=",["T_WHITESPACE"," ",80],["T_STRING","Mage",80],["T_DOUBLE_COLON","::",80],["T_STRING","getSingleton",80],"(",["T_CONSTANT_ENCAPSED_STRING","'customer\/session'",80],")",";",["T_WHITESPACE","\n            ",80],["T_VARIABLE","$this",81],["T_OBJECT_OPERATOR","->",81],["T_STRING","setData",81],"(",["T_CONSTANT_ENCAPSED_STRING","'customer_session'",81],",",["T_WHITESPACE"," ",81],["T_VARIABLE","$customer",81],")",";",["T_WHITESPACE","\n        ",81],"}",["T_WHITESPACE","\n        ",82],["T_RETURN","return",83],["T_WHITESPACE"," ",83],["T_VARIABLE","$customer",83],";",["T_WHITESPACE","\n    ",83],"}",["T_WHITESPACE","\n\n    ",84],["T_DOC_COMMENT","\/**\n     * Retrieve customer object\n     *\n     * @return Mage_Customer_Model_Customer\n     *\/",86],["T_WHITESPACE","\n    ",90],["T_PUBLIC","public",91],["T_WHITESPACE"," ",91],["T_FUNCTION","function",91],["T_WHITESPACE"," ",91],["T_STRING","getCustomer",91],"(",")",["T_WHITESPACE","\n    ",91],"{",["T_WHITESPACE","\n        ",92],["T_RETURN","return",93],["T_WHITESPACE"," ",93],["T_VARIABLE","$this",93],["T_OBJECT_OPERATOR","->",93],["T_STRING","getCustomerSession",93],"(",")",["T_OBJECT_OPERATOR","->",93],["T_STRING","getCustomer",93],"(",")",";",["T_WHITESPACE","\n    ",93],"}",["T_WHITESPACE","\n\n    ",94],["T_DOC_COMMENT","\/**\n     * Retrieve customer default shipping address\n     *\n     * @return Mage_Customer_Model_Address || false\n     *\/",96],["T_WHITESPACE","\n    ",100],["T_PUBLIC","public",101],["T_WHITESPACE"," ",101],["T_FUNCTION","function",101],["T_WHITESPACE"," ",101],["T_STRING","getCustomerDefaultShippingAddress",101],"(",")",["T_WHITESPACE","\n    ",101],"{",["T_WHITESPACE","\n        ",102],["T_VARIABLE","$address",103],["T_WHITESPACE"," ",103],"=",["T_WHITESPACE"," ",103],["T_VARIABLE","$this",103],["T_OBJECT_OPERATOR","->",103],["T_STRING","getData",103],"(",["T_CONSTANT_ENCAPSED_STRING","'customer_default_shipping_address'",103],")",";",["T_WHITESPACE","\n        ",103],["T_IF","if",104],["T_WHITESPACE"," ",104],"(",["T_STRING","is_null",104],"(",["T_VARIABLE","$address",104],")",")",["T_WHITESPACE"," ",104],"{",["T_WHITESPACE","\n            ",104],["T_VARIABLE","$address",105],["T_WHITESPACE"," ",105],"=",["T_WHITESPACE"," ",105],["T_VARIABLE","$this",105],["T_OBJECT_OPERATOR","->",105],["T_STRING","getCustomer",105],"(",")",["T_OBJECT_OPERATOR","->",105],["T_STRING","getDefaultShippingAddress",105],"(",")",";",["T_WHITESPACE","\n            ",105],["T_IF","if",106],["T_WHITESPACE"," ",106],"(","!",["T_VARIABLE","$address",106],")",["T_WHITESPACE"," ",106],"{",["T_WHITESPACE","\n                ",106],["T_FOREACH","foreach",107],["T_WHITESPACE"," ",107],"(",["T_VARIABLE","$this",107],["T_OBJECT_OPERATOR","->",107],["T_STRING","getCustomer",107],"(",")",["T_OBJECT_OPERATOR","->",107],["T_STRING","getAddresses",107],"(",")",["T_WHITESPACE"," ",107],["T_AS","as",107],["T_WHITESPACE"," ",107],["T_VARIABLE","$address",107],")",["T_WHITESPACE"," ",107],"{",["T_WHITESPACE","\n                    ",107],["T_IF","if",108],"(",["T_VARIABLE","$address",108],")","{",["T_WHITESPACE","\n                        ",108],["T_BREAK","break",109],";",["T_WHITESPACE","\n                    ",109],"}",["T_WHITESPACE","\n                ",110],"}",["T_WHITESPACE","\n            ",111],"}",["T_WHITESPACE","\n            ",112],["T_VARIABLE","$this",113],["T_OBJECT_OPERATOR","->",113],["T_STRING","setData",113],"(",["T_CONSTANT_ENCAPSED_STRING","'customer_default_shipping_address'",113],",",["T_WHITESPACE"," ",113],["T_VARIABLE","$address",113],")",";",["T_WHITESPACE","\n        ",113],"}",["T_WHITESPACE","\n        ",114],["T_RETURN","return",115],["T_WHITESPACE"," ",115],["T_VARIABLE","$address",115],";",["T_WHITESPACE","\n    ",115],"}",["T_WHITESPACE","\n\n    ",116],["T_DOC_COMMENT","\/**\n     * Retrieve customer default billing address\n     *\n     * @return Mage_Customer_Model_Address || false\n     *\/",118],["T_WHITESPACE","\n    ",122],["T_PUBLIC","public",123],["T_WHITESPACE"," ",123],["T_FUNCTION","function",123],["T_WHITESPACE"," ",123],["T_STRING","getCustomerDefaultBillingAddress",123],"(",")",["T_WHITESPACE","\n    ",123],"{",["T_WHITESPACE","\n        ",124],["T_VARIABLE","$address",125],["T_WHITESPACE"," ",125],"=",["T_WHITESPACE"," ",125],["T_VARIABLE","$this",125],["T_OBJECT_OPERATOR","->",125],["T_STRING","getData",125],"(",["T_CONSTANT_ENCAPSED_STRING","'customer_default_billing_address'",125],")",";",["T_WHITESPACE","\n        ",125],["T_IF","if",126],["T_WHITESPACE"," ",126],"(",["T_STRING","is_null",126],"(",["T_VARIABLE","$address",126],")",")",["T_WHITESPACE"," ",126],"{",["T_WHITESPACE","\n            ",126],["T_VARIABLE","$address",127],["T_WHITESPACE"," ",127],"=",["T_WHITESPACE"," ",127],["T_VARIABLE","$this",127],["T_OBJECT_OPERATOR","->",127],["T_STRING","getCustomer",127],"(",")",["T_OBJECT_OPERATOR","->",127],["T_STRING","getDefaultBillingAddress",127],"(",")",";",["T_WHITESPACE","\n            ",127],["T_IF","if",128],["T_WHITESPACE"," ",128],"(","!",["T_VARIABLE","$address",128],")",["T_WHITESPACE"," ",128],"{",["T_WHITESPACE","\n                ",128],["T_FOREACH","foreach",129],["T_WHITESPACE"," ",129],"(",["T_VARIABLE","$this",129],["T_OBJECT_OPERATOR","->",129],["T_STRING","getCustomer",129],"(",")",["T_OBJECT_OPERATOR","->",129],["T_STRING","getAddresses",129],"(",")",["T_WHITESPACE"," ",129],["T_AS","as",129],["T_WHITESPACE"," ",129],["T_VARIABLE","$address",129],")",["T_WHITESPACE"," ",129],"{",["T_WHITESPACE","\n                    ",129],["T_IF","if",130],"(",["T_VARIABLE","$address",130],")","{",["T_WHITESPACE","\n                        ",130],["T_BREAK","break",131],";",["T_WHITESPACE","\n                    ",131],"}",["T_WHITESPACE","\n                ",132],"}",["T_WHITESPACE","\n            ",133],"}",["T_WHITESPACE","\n            ",134],["T_VARIABLE","$this",135],["T_OBJECT_OPERATOR","->",135],["T_STRING","setData",135],"(",["T_CONSTANT_ENCAPSED_STRING","'customer_default_billing_address'",135],",",["T_WHITESPACE"," ",135],["T_VARIABLE","$address",135],")",";",["T_WHITESPACE","\n        ",135],"}",["T_WHITESPACE","\n        ",136],["T_RETURN","return",137],["T_WHITESPACE"," ",137],["T_VARIABLE","$address",137],";",["T_WHITESPACE","\n    ",137],"}",["T_WHITESPACE","\n\n    ",138],["T_PROTECTED","protected",140],["T_WHITESPACE"," ",140],["T_FUNCTION","function",140],["T_WHITESPACE"," ",140],["T_STRING","_createOrderFromAddress",140],"(",["T_VARIABLE","$address",140],")",["T_WHITESPACE","\n    ",140],"{",["T_WHITESPACE","\n        ",141],["T_VARIABLE","$order",142],["T_WHITESPACE"," ",142],"=",["T_WHITESPACE"," ",142],["T_STRING","Mage",142],["T_DOUBLE_COLON","::",142],["T_STRING","getModel",142],"(",["T_CONSTANT_ENCAPSED_STRING","'sales\/order'",142],")",["T_OBJECT_OPERATOR","->",142],["T_STRING","createFromQuoteAddress",142],"(",["T_VARIABLE","$address",142],")",["T_WHITESPACE","\n            ",142],["T_OBJECT_OPERATOR","->",143],["T_STRING","setCustomerId",143],"(",["T_VARIABLE","$this",143],["T_OBJECT_OPERATOR","->",143],["T_STRING","getCustomer",143],"(",")",["T_OBJECT_OPERATOR","->",143],["T_STRING","getId",143],"(",")",")",["T_WHITESPACE","\n            ",143],["T_OBJECT_OPERATOR","->",144],["T_STRING","setGlobalCurrencyCode",144],"(",["T_CONSTANT_ENCAPSED_STRING","'USD'",144],")",["T_WHITESPACE","\n            ",144],["T_OBJECT_OPERATOR","->",145],["T_STRING","setBaseCurrencyCode",145],"(",["T_CONSTANT_ENCAPSED_STRING","'USD'",145],")",["T_WHITESPACE","\n            ",145],["T_OBJECT_OPERATOR","->",146],["T_STRING","setStoreCurrencyCode",146],"(",["T_CONSTANT_ENCAPSED_STRING","'USD'",146],")",["T_WHITESPACE","\n            ",146],["T_OBJECT_OPERATOR","->",147],["T_STRING","setOrderCurrencyCode",147],"(",["T_CONSTANT_ENCAPSED_STRING","'USD'",147],")",["T_WHITESPACE","\n            ",147],["T_OBJECT_OPERATOR","->",148],["T_STRING","setStoreToBaseRate",148],"(",["T_LNUMBER","1",148],")",["T_WHITESPACE","\n            ",148],["T_OBJECT_OPERATOR","->",149],["T_STRING","setStoreToOrderRate",149],"(",["T_LNUMBER","1",149],")",";",["T_WHITESPACE","\n        ",149],["T_RETURN","return",150],["T_WHITESPACE"," ",150],["T_VARIABLE","$order",150],";",["T_WHITESPACE","\n    ",150],"}",["T_WHITESPACE","\n\n    ",151],["T_DOC_COMMENT","\/**\n     * @deprecated after 1.4.0.0-rc1\n     *\/",153],["T_WHITESPACE","\n    ",155],["T_PROTECTED","protected",156],["T_WHITESPACE"," ",156],["T_FUNCTION","function",156],["T_WHITESPACE"," ",156],["T_STRING","_emailOrderConfirmation",156],"(",["T_VARIABLE","$email",156],",",["T_WHITESPACE"," ",156],["T_VARIABLE","$name",156],",",["T_WHITESPACE"," ",156],["T_VARIABLE","$order",156],")",["T_WHITESPACE","\n    ",156],"{",["T_WHITESPACE","\n        ",157],["T_VARIABLE","$mailer",158],["T_WHITESPACE"," ",158],"=",["T_WHITESPACE"," ",158],["T_STRING","Mage",158],["T_DOUBLE_COLON","::",158],["T_STRING","getModel",158],"(",["T_CONSTANT_ENCAPSED_STRING","'core\/email'",158],")",["T_WHITESPACE","\n            ",158],["T_OBJECT_OPERATOR","->",159],["T_STRING","setTemplate",159],"(",["T_CONSTANT_ENCAPSED_STRING","'email\/order.phtml'",159],")",["T_WHITESPACE","\n            ",159],["T_OBJECT_OPERATOR","->",160],["T_STRING","setType",160],"(",["T_CONSTANT_ENCAPSED_STRING","'html'",160],")",["T_WHITESPACE","\n            ",160],["T_OBJECT_OPERATOR","->",161],["T_STRING","setTemplateVar",161],"(",["T_CONSTANT_ENCAPSED_STRING","'order'",161],",",["T_WHITESPACE"," ",161],["T_VARIABLE","$order",161],")",["T_WHITESPACE","\n            ",161],["T_OBJECT_OPERATOR","->",162],["T_STRING","setTemplateVar",162],"(",["T_CONSTANT_ENCAPSED_STRING","'quote'",162],",",["T_WHITESPACE"," ",162],["T_VARIABLE","$this",162],["T_OBJECT_OPERATOR","->",162],["T_STRING","getQuote",162],"(",")",")",["T_WHITESPACE","\n            ",162],["T_OBJECT_OPERATOR","->",163],["T_STRING","setTemplateVar",163],"(",["T_CONSTANT_ENCAPSED_STRING","'name'",163],",",["T_WHITESPACE"," ",163],["T_VARIABLE","$name",163],")",["T_WHITESPACE","\n            ",163],["T_OBJECT_OPERATOR","->",164],["T_STRING","setToName",164],"(",["T_VARIABLE","$name",164],")",["T_WHITESPACE","\n            ",164],["T_OBJECT_OPERATOR","->",165],["T_STRING","setToEmail",165],"(",["T_VARIABLE","$email",165],")",["T_WHITESPACE","\n            ",165],["T_OBJECT_OPERATOR","->",166],["T_STRING","send",166],"(",")",";",["T_WHITESPACE","\n    ",166],"}",["T_WHITESPACE","\n",167],"}",["T_WHITESPACE","\n",168]]
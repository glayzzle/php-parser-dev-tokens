[["T_OPEN_TAG","<?php\n",1],["T_DOC_COMMENT","\/**\n * Magento\n *\n * NOTICE OF LICENSE\n *\n * This source file is subject to the Open Software License (OSL 3.0)\n * that is bundled with this package in the file LICENSE.txt.\n * It is also available through the world-wide-web at this URL:\n * http:\/\/opensource.org\/licenses\/osl-3.0.php\n * If you did not receive a copy of the license and are unable to\n * obtain it through the world-wide-web, please send an email\n * to license@magento.com so we can send you a copy immediately.\n *\n * DISCLAIMER\n *\n * Do not edit or add to this file if you wish to upgrade Magento to newer\n * versions in the future. If you wish to customize Magento for your\n * needs please refer to http:\/\/www.magento.com for more information.\n *\n * @category    Mage\n * @package     Mage_SalesRule\n * @copyright  Copyright (c) 2006-2016 X.commerce, Inc. and affiliates (http:\/\/www.magento.com)\n * @license    http:\/\/opensource.org\/licenses\/osl-3.0.php  Open Software License (OSL 3.0)\n *\/",2],["T_WHITESPACE","\n\n",25],["T_VARIABLE","$installer",27],["T_WHITESPACE"," ",27],"=",["T_WHITESPACE"," ",27],["T_VARIABLE","$this",27],";",["T_WHITESPACE","\n",27],["T_COMMENT","\/* @var $installer Mage_Core_Model_Resource_Setup *\/",28],["T_WHITESPACE","\n\n",28],["T_VARIABLE","$installer",30],["T_OBJECT_OPERATOR","->",30],["T_STRING","startSetup",30],"(",")",";",["T_WHITESPACE","\n\n",30],["T_VARIABLE","$installer",32],["T_OBJECT_OPERATOR","->",32],["T_STRING","run",32],"(","\"",["T_ENCAPSED_AND_WHITESPACE","\n\nCREATE TABLE `",32],["T_CURLY_OPEN","{",34],["T_VARIABLE","$installer",34],["T_OBJECT_OPERATOR","->",34],["T_STRING","getTable",34],"(",["T_CONSTANT_ENCAPSED_STRING","'salesrule'",34],")","}",["T_ENCAPSED_AND_WHITESPACE","` (\n  `rule_id` int(10) unsigned NOT NULL AUTO_INCREMENT,\n  `name` varchar(255) NOT NULL DEFAULT '',\n  `description` text NOT NULL,\n  `from_date` date DEFAULT '0000-00-00',\n  `to_date` date DEFAULT '0000-00-00',\n  `coupon_code` varchar(255) DEFAULT NULL,\n  `uses_per_coupon` int(11) NOT NULL DEFAULT '0',\n  `uses_per_customer` int(11) NOT NULL DEFAULT '0',\n  `customer_group_ids` varchar(255) NOT NULL DEFAULT '',\n  `is_active` tinyint(1) NOT NULL DEFAULT '0',\n  `conditions_serialized` mediumtext NOT NULL,\n  `actions_serialized` mediumtext NOT NULL,\n  `stop_rules_processing` tinyint(1) NOT NULL DEFAULT '1',\n  `is_advanced` tinyint(3) unsigned NOT NULL DEFAULT '1',\n  `product_ids` text,\n  `sort_order` int(10) unsigned NOT NULL DEFAULT '0',\n  `simple_action` varchar(32) NOT NULL DEFAULT '',\n  `discount_amount` decimal(12,4) NOT NULL DEFAULT '0.0000',\n  `discount_qty` decimal(12,4) unsigned DEFAULT NULL,\n  `discount_step` int(10) unsigned NOT NULL,\n  `simple_free_shipping` tinyint(1) unsigned NOT NULL DEFAULT '0',\n  `apply_to_shipping` tinyint(1) unsigned NOT NULL DEFAULT '0',\n  `times_used` int(11) unsigned NOT NULL DEFAULT '0',\n  `is_rss` tinyint(4) NOT NULL DEFAULT '0',\n  `website_ids` text,\n  PRIMARY KEY (`rule_id`),\n  KEY `sort_order` (`is_active`,`sort_order`,`to_date`,`from_date`)\n) ENGINE=InnoDB AUTO_INCREMENT=125 DEFAULT CHARSET=utf8;\n\nCREATE TABLE `",34],["T_CURLY_OPEN","{",64],["T_VARIABLE","$installer",64],["T_OBJECT_OPERATOR","->",64],["T_STRING","getTable",64],"(",["T_CONSTANT_ENCAPSED_STRING","'salesrule_customer'",64],")","}",["T_ENCAPSED_AND_WHITESPACE","` (\n  `rule_customer_id` int(10) unsigned NOT NULL AUTO_INCREMENT,\n  `rule_id` int(10) unsigned NOT NULL DEFAULT '0',\n  `customer_id` int(10) unsigned NOT NULL DEFAULT '0',\n  `times_used` smallint(11) unsigned NOT NULL DEFAULT '0',\n  PRIMARY KEY (`rule_customer_id`),\n  KEY `rule_id` (`rule_id`, `customer_id`),\n  KEY `customer_id` (`customer_id`, `rule_id`),\n  CONSTRAINT `FK_salesrule_customer_id` FOREIGN KEY (`customer_id`)\n    REFERENCES `",64],["T_CURLY_OPEN","{",73],["T_VARIABLE","$installer",73],["T_OBJECT_OPERATOR","->",73],["T_STRING","getTable",73],"(",["T_CONSTANT_ENCAPSED_STRING","'customer_entity'",73],")","}",["T_ENCAPSED_AND_WHITESPACE","` (`entity_id`) ON DELETE CASCADE ON UPDATE CASCADE,\n  CONSTRAINT `FK_salesrule_customer_rule` FOREIGN KEY (`rule_id`)\n    REFERENCES `",73],["T_CURLY_OPEN","{",75],["T_VARIABLE","$installer",75],["T_OBJECT_OPERATOR","->",75],["T_STRING","getTable",75],"(",["T_CONSTANT_ENCAPSED_STRING","'salesrule'",75],")","}",["T_ENCAPSED_AND_WHITESPACE","` (`rule_id`) ON DELETE CASCADE ON UPDATE CASCADE\n) ENGINE=InnoDB AUTO_INCREMENT=46 DEFAULT CHARSET=utf8;\n\nCREATE TABLE `",75],["T_CURLY_OPEN","{",78],["T_VARIABLE","$installer",78],["T_OBJECT_OPERATOR","->",78],["T_STRING","getTable",78],"(",["T_CONSTANT_ENCAPSED_STRING","'salesrule_label'",78],")","}",["T_ENCAPSED_AND_WHITESPACE","` (\n  `label_id` int(10) unsigned NOT NULL AUTO_INCREMENT,\n  `rule_id` int(10) unsigned NOT NULL,\n  `store_id` smallint(5) unsigned NOT NULL,\n  `label` varchar(255) DEFAULT NULL,\n  PRIMARY KEY (`label_id`),\n  UNIQUE KEY `IDX_RULE_STORE` (`rule_id`,`store_id`),\n  KEY `FK_SALESRULE_LABEL_STORE` (`store_id`),\n  KEY `FK_SALESRULE_LABEL_RULE` (`rule_id`),\n  CONSTRAINT `FK_SALESRULE_LABEL_RULE` FOREIGN KEY (`rule_id`)\n    REFERENCES `",78],["T_CURLY_OPEN","{",88],["T_VARIABLE","$installer",88],["T_OBJECT_OPERATOR","->",88],["T_STRING","getTable",88],"(",["T_CONSTANT_ENCAPSED_STRING","'salesrule'",88],")","}",["T_ENCAPSED_AND_WHITESPACE","` (`rule_id`) ON DELETE CASCADE ON UPDATE CASCADE,\n  CONSTRAINT `FK_SALESRULE_LABEL_STORE` FOREIGN KEY (`store_id`)\n    REFERENCES `",88],["T_CURLY_OPEN","{",90],["T_VARIABLE","$installer",90],["T_OBJECT_OPERATOR","->",90],["T_STRING","getTable",90],"(",["T_CONSTANT_ENCAPSED_STRING","'core_store'",90],")","}",["T_ENCAPSED_AND_WHITESPACE","` (`store_id`) ON DELETE CASCADE ON UPDATE CASCADE\n) ENGINE=InnoDB DEFAULT CHARSET=utf8;\n\nCREATE TABLE `",90],["T_CURLY_OPEN","{",93],["T_VARIABLE","$installer",93],["T_OBJECT_OPERATOR","->",93],["T_STRING","getTable",93],"(",["T_CONSTANT_ENCAPSED_STRING","'coupon_aggregated'",93],")","}",["T_ENCAPSED_AND_WHITESPACE","` (\n  `id` int(11) unsigned NOT NULL AUTO_INCREMENT,\n  `period` date NOT NULL DEFAULT '0000-00-00',\n  `store_id` smallint(5) unsigned DEFAULT NULL,\n  `order_status` varchar(50) NOT NULL DEFAULT '',\n  `coupon_code` varchar(50) NOT NULL DEFAULT '',\n  `coupon_uses` int(11) NOT NULL DEFAULT '0',\n  `subtotal_amount` decimal(12,4) NOT NULL DEFAULT '0.0000',\n  `discount_amount` decimal(12,4) NOT NULL DEFAULT '0.0000',\n  `total_amount` decimal(12,4) NOT NULL DEFAULT '0.0000',\n  PRIMARY KEY (`id`),\n  UNIQUE KEY `UNQ_COUPON_AGGREGATED_PSOC` (`period`,`store_id`,`order_status`,`coupon_code`),\n  KEY `IDX_STORE_ID` (`store_id`),\n  CONSTRAINT `FK_SALESTRULE_COUPON_AGGREGATED_STORE` FOREIGN KEY (`store_id`)\n    REFERENCES `",93],["T_CURLY_OPEN","{",107],["T_VARIABLE","$installer",107],["T_OBJECT_OPERATOR","->",107],["T_STRING","getTable",107],"(",["T_CONSTANT_ENCAPSED_STRING","'core_store'",107],")","}",["T_ENCAPSED_AND_WHITESPACE","` (`store_id`) ON DELETE CASCADE ON UPDATE CASCADE\n) ENGINE=InnoDB DEFAULT CHARSET=utf8;\n\nCREATE TABLE `",107],["T_CURLY_OPEN","{",110],["T_VARIABLE","$installer",110],["T_OBJECT_OPERATOR","->",110],["T_STRING","getTable",110],"(",["T_CONSTANT_ENCAPSED_STRING","'coupon_aggregated_order'",110],")","}",["T_ENCAPSED_AND_WHITESPACE","` (\n  `id` int(11) unsigned NOT NULL AUTO_INCREMENT,\n  `period` date NOT NULL DEFAULT '0000-00-00',\n  `store_id` smallint(5) unsigned DEFAULT NULL,\n  `order_status` varchar(50) NOT NULL DEFAULT '',\n  `coupon_code` varchar(50) NOT NULL DEFAULT '',\n  `coupon_uses` int(11) NOT NULL DEFAULT '0',\n  `subtotal_amount` decimal(12,4) NOT NULL DEFAULT '0.0000',\n  `discount_amount` decimal(12,4) NOT NULL DEFAULT '0.0000',\n  `total_amount` decimal(12,4) NOT NULL DEFAULT '0.0000',\n  PRIMARY KEY (`id`),\n  UNIQUE KEY `UNQ_COUPON_AGGREGATED_ORDER_PSOC` (`period`,`store_id`,`order_status`,`coupon_code`),\n  KEY `IDX_STORE_ID` (`store_id`),\n  CONSTRAINT `FK_SALESTRULE_COUPON_AGGREGATED_ORDER_STORE` FOREIGN KEY (`store_id`)\n    REFERENCES `",110],["T_CURLY_OPEN","{",124],["T_VARIABLE","$installer",124],["T_OBJECT_OPERATOR","->",124],["T_STRING","getTable",124],"(",["T_CONSTANT_ENCAPSED_STRING","'core_store'",124],")","}",["T_ENCAPSED_AND_WHITESPACE","` (`store_id`) ON DELETE CASCADE ON UPDATE CASCADE\n) ENGINE=InnoDB DEFAULT CHARSET=utf8;\n",124],"\"",")",";",["T_WHITESPACE","\n\n",126],["T_DOC_COMMENT","\/**\n * add attributes discount_description, shipping_discount_amount, base_shipping_discount_amount\n *\/",128],["T_WHITESPACE","\n",130],["T_VARIABLE","$installer",131],["T_OBJECT_OPERATOR","->",131],["T_STRING","addAttribute",131],"(",["T_CONSTANT_ENCAPSED_STRING","'quote_address'",131],",",["T_WHITESPACE"," ",131],["T_CONSTANT_ENCAPSED_STRING","'discount_description'",131],",",["T_WHITESPACE"," ",131],["T_ARRAY","array",131],"(",["T_CONSTANT_ENCAPSED_STRING","'type'",131],["T_DOUBLE_ARROW","=>",131],["T_CONSTANT_ENCAPSED_STRING","'varchar'",131],")",")",";",["T_WHITESPACE","\n",131],["T_VARIABLE","$installer",132],["T_OBJECT_OPERATOR","->",132],["T_STRING","addAttribute",132],"(",["T_CONSTANT_ENCAPSED_STRING","'quote_address'",132],",",["T_WHITESPACE"," ",132],["T_CONSTANT_ENCAPSED_STRING","'shipping_discount_amount'",132],",",["T_WHITESPACE"," ",132],["T_ARRAY","array",132],"(",["T_CONSTANT_ENCAPSED_STRING","'type'",132],["T_DOUBLE_ARROW","=>",132],["T_CONSTANT_ENCAPSED_STRING","'decimal'",132],")",")",";",["T_WHITESPACE","\n",132],["T_VARIABLE","$installer",133],["T_OBJECT_OPERATOR","->",133],["T_STRING","addAttribute",133],"(",["T_CONSTANT_ENCAPSED_STRING","'quote_address'",133],",",["T_WHITESPACE"," ",133],["T_CONSTANT_ENCAPSED_STRING","'base_shipping_discount_amount'",133],",",["T_WHITESPACE"," ",133],["T_ARRAY","array",133],"(",["T_CONSTANT_ENCAPSED_STRING","'type'",133],["T_DOUBLE_ARROW","=>",133],["T_CONSTANT_ENCAPSED_STRING","'decimal'",133],")",")",";",["T_WHITESPACE","\n\n\n",133],["T_VARIABLE","$installer",136],["T_OBJECT_OPERATOR","->",136],["T_STRING","addAttribute",136],"(",["T_CONSTANT_ENCAPSED_STRING","'order'",136],",",["T_WHITESPACE"," ",136],["T_CONSTANT_ENCAPSED_STRING","'discount_description'",136],",",["T_WHITESPACE"," ",136],["T_ARRAY","array",136],"(",["T_CONSTANT_ENCAPSED_STRING","'type'",136],["T_DOUBLE_ARROW","=>",136],["T_CONSTANT_ENCAPSED_STRING","'varchar'",136],")",")",";",["T_WHITESPACE","\n",136],["T_VARIABLE","$installer",137],["T_OBJECT_OPERATOR","->",137],["T_STRING","addAttribute",137],"(",["T_CONSTANT_ENCAPSED_STRING","'order'",137],",",["T_WHITESPACE"," ",137],["T_CONSTANT_ENCAPSED_STRING","'shipping_discount_amount'",137],",",["T_WHITESPACE"," ",137],["T_ARRAY","array",137],"(",["T_CONSTANT_ENCAPSED_STRING","'type'",137],["T_DOUBLE_ARROW","=>",137],["T_CONSTANT_ENCAPSED_STRING","'decimal'",137],")",")",";",["T_WHITESPACE","\n",137],["T_VARIABLE","$installer",138],["T_OBJECT_OPERATOR","->",138],["T_STRING","addAttribute",138],"(",["T_CONSTANT_ENCAPSED_STRING","'order'",138],",",["T_WHITESPACE"," ",138],["T_CONSTANT_ENCAPSED_STRING","'base_shipping_discount_amount'",138],",",["T_WHITESPACE"," ",138],["T_ARRAY","array",138],"(",["T_CONSTANT_ENCAPSED_STRING","'type'",138],["T_DOUBLE_ARROW","=>",138],["T_CONSTANT_ENCAPSED_STRING","'decimal'",138],")",")",";",["T_WHITESPACE","\n\n",138],["T_VARIABLE","$installer",140],["T_OBJECT_OPERATOR","->",140],["T_STRING","endSetup",140],"(",")",";",["T_WHITESPACE","\n",140]]
[["T_OPEN_TAG","<?php\n",1],["T_DOC_COMMENT","\/**\n * Magento\n *\n * NOTICE OF LICENSE\n *\n * This source file is subject to the Open Software License (OSL 3.0)\n * that is bundled with this package in the file LICENSE.txt.\n * It is also available through the world-wide-web at this URL:\n * http:\/\/opensource.org\/licenses\/osl-3.0.php\n * If you did not receive a copy of the license and are unable to\n * obtain it through the world-wide-web, please send an email\n * to license@magento.com so we can send you a copy immediately.\n *\n * DISCLAIMER\n *\n * Do not edit or add to this file if you wish to upgrade Magento to newer\n * versions in the future. If you wish to customize Magento for your\n * needs please refer to http:\/\/www.magento.com for more information.\n *\n * @category    Mage\n * @package     Mage_SalesRule\n * @copyright  Copyright (c) 2006-2016 X.commerce, Inc. and affiliates (http:\/\/www.magento.com)\n * @license    http:\/\/opensource.org\/licenses\/osl-3.0.php  Open Software License (OSL 3.0)\n *\/",2],["T_WHITESPACE","\n\n\n",25],["T_DOC_COMMENT","\/**\n * Sales Rule resource model\n *\n * @category Mage\n * @package Mage_SalesRule\n * @author Magento Core Team <core@magentocommerce.com>\n *\/",28],["T_WHITESPACE","\n",34],["T_CLASS","class",35],["T_WHITESPACE"," ",35],["T_STRING","Mage_SalesRule_Model_Resource_Rule",35],["T_WHITESPACE"," ",35],["T_EXTENDS","extends",35],["T_WHITESPACE"," ",35],["T_STRING","Mage_Rule_Model_Resource_Abstract",35],["T_WHITESPACE","\n",35],"{",["T_WHITESPACE","\n    ",36],["T_DOC_COMMENT","\/**\n     * Store associated with rule entities information map\n     *\n     * @var array\n     *\/",37],["T_WHITESPACE","\n    ",41],["T_PROTECTED","protected",42],["T_WHITESPACE"," ",42],["T_VARIABLE","$_associatedEntitiesMap",42],["T_WHITESPACE"," ",42],"=",["T_WHITESPACE"," ",42],["T_ARRAY","array",42],"(",["T_WHITESPACE","\n        ",42],["T_CONSTANT_ENCAPSED_STRING","'website'",43],["T_WHITESPACE"," ",43],["T_DOUBLE_ARROW","=>",43],["T_WHITESPACE"," ",43],["T_ARRAY","array",43],"(",["T_WHITESPACE","\n            ",43],["T_CONSTANT_ENCAPSED_STRING","'associations_table'",44],["T_WHITESPACE"," ",44],["T_DOUBLE_ARROW","=>",44],["T_WHITESPACE"," ",44],["T_CONSTANT_ENCAPSED_STRING","'salesrule\/website'",44],",",["T_WHITESPACE","\n            ",44],["T_CONSTANT_ENCAPSED_STRING","'rule_id_field'",45],["T_WHITESPACE","      ",45],["T_DOUBLE_ARROW","=>",45],["T_WHITESPACE"," ",45],["T_CONSTANT_ENCAPSED_STRING","'rule_id'",45],",",["T_WHITESPACE","\n            ",45],["T_CONSTANT_ENCAPSED_STRING","'entity_id_field'",46],["T_WHITESPACE","    ",46],["T_DOUBLE_ARROW","=>",46],["T_WHITESPACE"," ",46],["T_CONSTANT_ENCAPSED_STRING","'website_id'",46],["T_WHITESPACE","\n        ",46],")",",",["T_WHITESPACE","\n        ",47],["T_CONSTANT_ENCAPSED_STRING","'customer_group'",48],["T_WHITESPACE"," ",48],["T_DOUBLE_ARROW","=>",48],["T_WHITESPACE"," ",48],["T_ARRAY","array",48],"(",["T_WHITESPACE","\n            ",48],["T_CONSTANT_ENCAPSED_STRING","'associations_table'",49],["T_WHITESPACE"," ",49],["T_DOUBLE_ARROW","=>",49],["T_WHITESPACE"," ",49],["T_CONSTANT_ENCAPSED_STRING","'salesrule\/customer_group'",49],",",["T_WHITESPACE","\n            ",49],["T_CONSTANT_ENCAPSED_STRING","'rule_id_field'",50],["T_WHITESPACE","      ",50],["T_DOUBLE_ARROW","=>",50],["T_WHITESPACE"," ",50],["T_CONSTANT_ENCAPSED_STRING","'rule_id'",50],",",["T_WHITESPACE","\n            ",50],["T_CONSTANT_ENCAPSED_STRING","'entity_id_field'",51],["T_WHITESPACE","    ",51],["T_DOUBLE_ARROW","=>",51],["T_WHITESPACE"," ",51],["T_CONSTANT_ENCAPSED_STRING","'customer_group_id'",51],["T_WHITESPACE","\n        ",51],")",["T_WHITESPACE","\n    ",52],")",";",["T_WHITESPACE","\n\n    ",53],["T_DOC_COMMENT","\/**\n     * Initialize main table and table id field\n     *\/",55],["T_WHITESPACE","\n    ",57],["T_PROTECTED","protected",58],["T_WHITESPACE"," ",58],["T_FUNCTION","function",58],["T_WHITESPACE"," ",58],["T_STRING","_construct",58],"(",")",["T_WHITESPACE","\n    ",58],"{",["T_WHITESPACE","\n        ",59],["T_VARIABLE","$this",60],["T_OBJECT_OPERATOR","->",60],["T_STRING","_init",60],"(",["T_CONSTANT_ENCAPSED_STRING","'salesrule\/rule'",60],",",["T_WHITESPACE"," ",60],["T_CONSTANT_ENCAPSED_STRING","'rule_id'",60],")",";",["T_WHITESPACE","\n    ",60],"}",["T_WHITESPACE","\n\n    ",61],["T_DOC_COMMENT","\/**\n     * Add customer group ids and website ids to rule data after load\n     *\n     * @param Mage_Core_Model_Abstract $object\n     *\n     * @return Mage_SalesRule_Model_Resource_Rule\n     *\/",63],["T_WHITESPACE","\n    ",69],["T_PROTECTED","protected",70],["T_WHITESPACE"," ",70],["T_FUNCTION","function",70],["T_WHITESPACE"," ",70],["T_STRING","_afterLoad",70],"(",["T_STRING","Mage_Core_Model_Abstract",70],["T_WHITESPACE"," ",70],["T_VARIABLE","$object",70],")",["T_WHITESPACE","\n    ",70],"{",["T_WHITESPACE","\n        ",71],["T_VARIABLE","$object",72],["T_OBJECT_OPERATOR","->",72],["T_STRING","setData",72],"(",["T_CONSTANT_ENCAPSED_STRING","'customer_group_ids'",72],",",["T_WHITESPACE"," ",72],["T_ARRAY_CAST","(array)",72],["T_VARIABLE","$this",72],["T_OBJECT_OPERATOR","->",72],["T_STRING","getCustomerGroupIds",72],"(",["T_VARIABLE","$object",72],["T_OBJECT_OPERATOR","->",72],["T_STRING","getId",72],"(",")",")",")",";",["T_WHITESPACE","\n        ",72],["T_VARIABLE","$object",73],["T_OBJECT_OPERATOR","->",73],["T_STRING","setData",73],"(",["T_CONSTANT_ENCAPSED_STRING","'website_ids'",73],",",["T_WHITESPACE"," ",73],["T_ARRAY_CAST","(array)",73],["T_VARIABLE","$this",73],["T_OBJECT_OPERATOR","->",73],["T_STRING","getWebsiteIds",73],"(",["T_VARIABLE","$object",73],["T_OBJECT_OPERATOR","->",73],["T_STRING","getId",73],"(",")",")",")",";",["T_WHITESPACE","\n\n        ",73],["T_STRING","parent",75],["T_DOUBLE_COLON","::",75],["T_STRING","_afterLoad",75],"(",["T_VARIABLE","$object",75],")",";",["T_WHITESPACE","\n        ",75],["T_RETURN","return",76],["T_WHITESPACE"," ",76],["T_VARIABLE","$this",76],";",["T_WHITESPACE","\n    ",76],"}",["T_WHITESPACE","\n\n    ",77],["T_DOC_COMMENT","\/**\n     * Prepare sales rule's discount quantity\n     *\n     * @param Mage_Core_Model_Abstract $object\n     *\n     * @return Mage_SalesRule_Model_Resource_Rule\n     *\/",79],["T_WHITESPACE","\n    ",85],["T_PUBLIC","public",86],["T_WHITESPACE"," ",86],["T_FUNCTION","function",86],["T_WHITESPACE"," ",86],["T_STRING","_beforeSave",86],"(",["T_STRING","Mage_Core_Model_Abstract",86],["T_WHITESPACE"," ",86],["T_VARIABLE","$object",86],")",["T_WHITESPACE","\n    ",86],"{",["T_WHITESPACE","\n        ",87],["T_IF","if",88],["T_WHITESPACE"," ",88],"(","!",["T_VARIABLE","$object",88],["T_OBJECT_OPERATOR","->",88],["T_STRING","getDiscountQty",88],"(",")",")",["T_WHITESPACE"," ",88],"{",["T_WHITESPACE","\n            ",88],["T_VARIABLE","$object",89],["T_OBJECT_OPERATOR","->",89],["T_STRING","setDiscountQty",89],"(",["T_NEW","new",89],["T_WHITESPACE"," ",89],["T_STRING","Zend_Db_Expr",89],"(",["T_CONSTANT_ENCAPSED_STRING","'NULL'",89],")",")",";",["T_WHITESPACE","\n        ",89],"}",["T_WHITESPACE","\n\n        ",90],["T_STRING","parent",92],["T_DOUBLE_COLON","::",92],["T_STRING","_beforeSave",92],"(",["T_VARIABLE","$object",92],")",";",["T_WHITESPACE","\n        ",92],["T_RETURN","return",93],["T_WHITESPACE"," ",93],["T_VARIABLE","$this",93],";",["T_WHITESPACE","\n    ",93],"}",["T_WHITESPACE","\n\n    ",94],["T_DOC_COMMENT","\/**\n     * Bind sales rule to customer group(s) and website(s).\n     * Save rule's associated store labels.\n     * Save product attributes used in rule.\n     *\n     * @param Mage_Core_Model_Abstract $object\n     *\n     * @return Mage_SalesRule_Model_Resource_Rule\n     *\/",96],["T_WHITESPACE","\n    ",104],["T_PROTECTED","protected",105],["T_WHITESPACE"," ",105],["T_FUNCTION","function",105],["T_WHITESPACE"," ",105],["T_STRING","_afterSave",105],"(",["T_STRING","Mage_Core_Model_Abstract",105],["T_WHITESPACE"," ",105],["T_VARIABLE","$object",105],")",["T_WHITESPACE","\n    ",105],"{",["T_WHITESPACE","\n        ",106],["T_IF","if",107],["T_WHITESPACE"," ",107],"(",["T_VARIABLE","$object",107],["T_OBJECT_OPERATOR","->",107],["T_STRING","hasStoreLabels",107],"(",")",")",["T_WHITESPACE"," ",107],"{",["T_WHITESPACE","\n            ",107],["T_VARIABLE","$this",108],["T_OBJECT_OPERATOR","->",108],["T_STRING","saveStoreLabels",108],"(",["T_VARIABLE","$object",108],["T_OBJECT_OPERATOR","->",108],["T_STRING","getId",108],"(",")",",",["T_WHITESPACE"," ",108],["T_VARIABLE","$object",108],["T_OBJECT_OPERATOR","->",108],["T_STRING","getStoreLabels",108],"(",")",")",";",["T_WHITESPACE","\n        ",108],"}",["T_WHITESPACE","\n\n        ",109],["T_IF","if",111],["T_WHITESPACE"," ",111],"(",["T_VARIABLE","$object",111],["T_OBJECT_OPERATOR","->",111],["T_STRING","hasWebsiteIds",111],"(",")",")",["T_WHITESPACE"," ",111],"{",["T_WHITESPACE","\n            ",111],["T_VARIABLE","$websiteIds",112],["T_WHITESPACE"," ",112],"=",["T_WHITESPACE"," ",112],["T_VARIABLE","$object",112],["T_OBJECT_OPERATOR","->",112],["T_STRING","getWebsiteIds",112],"(",")",";",["T_WHITESPACE","\n            ",112],["T_IF","if",113],["T_WHITESPACE"," ",113],"(","!",["T_STRING","is_array",113],"(",["T_VARIABLE","$websiteIds",113],")",")",["T_WHITESPACE"," ",113],"{",["T_WHITESPACE","\n                ",113],["T_VARIABLE","$websiteIds",114],["T_WHITESPACE"," ",114],"=",["T_WHITESPACE"," ",114],["T_STRING","explode",114],"(",["T_CONSTANT_ENCAPSED_STRING","','",114],",",["T_WHITESPACE"," ",114],["T_STRING_CAST","(string)",114],["T_VARIABLE","$websiteIds",114],")",";",["T_WHITESPACE","\n            ",114],"}",["T_WHITESPACE","\n            ",115],["T_VARIABLE","$this",116],["T_OBJECT_OPERATOR","->",116],["T_STRING","bindRuleToEntity",116],"(",["T_VARIABLE","$object",116],["T_OBJECT_OPERATOR","->",116],["T_STRING","getId",116],"(",")",",",["T_WHITESPACE"," ",116],["T_VARIABLE","$websiteIds",116],",",["T_WHITESPACE"," ",116],["T_CONSTANT_ENCAPSED_STRING","'website'",116],")",";",["T_WHITESPACE","\n        ",116],"}",["T_WHITESPACE","\n\n        ",117],["T_IF","if",119],["T_WHITESPACE"," ",119],"(",["T_VARIABLE","$object",119],["T_OBJECT_OPERATOR","->",119],["T_STRING","hasCustomerGroupIds",119],"(",")",")",["T_WHITESPACE"," ",119],"{",["T_WHITESPACE","\n            ",119],["T_VARIABLE","$customerGroupIds",120],["T_WHITESPACE"," ",120],"=",["T_WHITESPACE"," ",120],["T_VARIABLE","$object",120],["T_OBJECT_OPERATOR","->",120],["T_STRING","getCustomerGroupIds",120],"(",")",";",["T_WHITESPACE","\n            ",120],["T_IF","if",121],["T_WHITESPACE"," ",121],"(","!",["T_STRING","is_array",121],"(",["T_VARIABLE","$customerGroupIds",121],")",")",["T_WHITESPACE"," ",121],"{",["T_WHITESPACE","\n                ",121],["T_VARIABLE","$customerGroupIds",122],["T_WHITESPACE"," ",122],"=",["T_WHITESPACE"," ",122],["T_STRING","explode",122],"(",["T_CONSTANT_ENCAPSED_STRING","','",122],",",["T_WHITESPACE"," ",122],["T_STRING_CAST","(string)",122],["T_VARIABLE","$customerGroupIds",122],")",";",["T_WHITESPACE","\n            ",122],"}",["T_WHITESPACE","\n            ",123],["T_VARIABLE","$this",124],["T_OBJECT_OPERATOR","->",124],["T_STRING","bindRuleToEntity",124],"(",["T_VARIABLE","$object",124],["T_OBJECT_OPERATOR","->",124],["T_STRING","getId",124],"(",")",",",["T_WHITESPACE"," ",124],["T_VARIABLE","$customerGroupIds",124],",",["T_WHITESPACE"," ",124],["T_CONSTANT_ENCAPSED_STRING","'customer_group'",124],")",";",["T_WHITESPACE","\n        ",124],"}",["T_WHITESPACE","\n\n        ",125],["T_COMMENT","\/\/ Save product attributes used in rule\n",127],["T_WHITESPACE","        ",128],["T_VARIABLE","$ruleProductAttributes",128],["T_WHITESPACE"," ",128],"=",["T_WHITESPACE"," ",128],["T_STRING","array_merge",128],"(",["T_WHITESPACE","\n            ",128],["T_VARIABLE","$this",129],["T_OBJECT_OPERATOR","->",129],["T_STRING","getProductAttributes",129],"(",["T_STRING","serialize",129],"(",["T_VARIABLE","$object",129],["T_OBJECT_OPERATOR","->",129],["T_STRING","getConditions",129],"(",")",["T_OBJECT_OPERATOR","->",129],["T_STRING","asArray",129],"(",")",")",")",",",["T_WHITESPACE","\n            ",129],["T_VARIABLE","$this",130],["T_OBJECT_OPERATOR","->",130],["T_STRING","getProductAttributes",130],"(",["T_STRING","serialize",130],"(",["T_VARIABLE","$object",130],["T_OBJECT_OPERATOR","->",130],["T_STRING","getActions",130],"(",")",["T_OBJECT_OPERATOR","->",130],["T_STRING","asArray",130],"(",")",")",")",["T_WHITESPACE","\n        ",130],")",";",["T_WHITESPACE","\n        ",131],["T_IF","if",132],["T_WHITESPACE"," ",132],"(",["T_STRING","count",132],"(",["T_VARIABLE","$ruleProductAttributes",132],")",")",["T_WHITESPACE"," ",132],"{",["T_WHITESPACE","\n            ",132],["T_VARIABLE","$this",133],["T_OBJECT_OPERATOR","->",133],["T_STRING","setActualProductAttributes",133],"(",["T_VARIABLE","$object",133],",",["T_WHITESPACE"," ",133],["T_VARIABLE","$ruleProductAttributes",133],")",";",["T_WHITESPACE","\n        ",133],"}",["T_WHITESPACE","\n\n        ",134],["T_COMMENT","\/\/ Update auto geterated specific coupons if exists\n",136],["T_WHITESPACE","        ",137],["T_IF","if",137],["T_WHITESPACE"," ",137],"(",["T_VARIABLE","$object",137],["T_OBJECT_OPERATOR","->",137],["T_STRING","getUseAutoGeneration",137],"(",")",["T_WHITESPACE"," ",137],["T_BOOLEAN_AND","&&",137],["T_WHITESPACE"," ",137],["T_VARIABLE","$object",137],["T_OBJECT_OPERATOR","->",137],["T_STRING","hasDataChanges",137],"(",")",")",["T_WHITESPACE"," ",137],"{",["T_WHITESPACE","\n            ",137],["T_STRING","Mage",138],["T_DOUBLE_COLON","::",138],["T_STRING","getResourceModel",138],"(",["T_CONSTANT_ENCAPSED_STRING","'salesrule\/coupon'",138],")",["T_OBJECT_OPERATOR","->",138],["T_STRING","updateSpecificCoupons",138],"(",["T_VARIABLE","$object",138],")",";",["T_WHITESPACE","\n        ",138],"}",["T_WHITESPACE","\n        ",139],["T_RETURN","return",140],["T_WHITESPACE"," ",140],["T_STRING","parent",140],["T_DOUBLE_COLON","::",140],["T_STRING","_afterSave",140],"(",["T_VARIABLE","$object",140],")",";",["T_WHITESPACE","\n    ",140],"}",["T_WHITESPACE","\n\n    ",141],["T_DOC_COMMENT","\/**\n     * Retrieve coupon\/rule uses for specified customer\n     *\n     * @param Mage_SalesRule_Model_Rule $rule\n     * @param int $customerId\n     *\n     * @return string\n     *\/",143],["T_WHITESPACE","\n    ",150],["T_PUBLIC","public",151],["T_WHITESPACE"," ",151],["T_FUNCTION","function",151],["T_WHITESPACE"," ",151],["T_STRING","getCustomerUses",151],"(",["T_VARIABLE","$rule",151],",",["T_WHITESPACE"," ",151],["T_VARIABLE","$customerId",151],")",["T_WHITESPACE","\n    ",151],"{",["T_WHITESPACE","\n        ",152],["T_VARIABLE","$read",153],["T_WHITESPACE"," ",153],"=",["T_WHITESPACE"," ",153],["T_VARIABLE","$this",153],["T_OBJECT_OPERATOR","->",153],["T_STRING","_getReadAdapter",153],"(",")",";",["T_WHITESPACE","\n        ",153],["T_VARIABLE","$select",154],["T_WHITESPACE"," ",154],"=",["T_WHITESPACE"," ",154],["T_VARIABLE","$read",154],["T_OBJECT_OPERATOR","->",154],["T_STRING","select",154],"(",")",["T_OBJECT_OPERATOR","->",154],["T_STRING","from",154],"(",["T_VARIABLE","$this",154],["T_OBJECT_OPERATOR","->",154],["T_STRING","getTable",154],"(",["T_CONSTANT_ENCAPSED_STRING","'rule_customer'",154],")",",",["T_WHITESPACE"," ",154],["T_ARRAY","array",154],"(",["T_CONSTANT_ENCAPSED_STRING","'cnt'",154],["T_DOUBLE_ARROW","=>",154],["T_CONSTANT_ENCAPSED_STRING","'count(*)'",154],")",")",["T_WHITESPACE","\n            ",154],["T_OBJECT_OPERATOR","->",155],["T_STRING","where",155],"(",["T_CONSTANT_ENCAPSED_STRING","'rule_id = :rule_id'",155],")",["T_WHITESPACE","\n            ",155],["T_OBJECT_OPERATOR","->",156],["T_STRING","where",156],"(",["T_CONSTANT_ENCAPSED_STRING","'customer_id = :customer_id'",156],")",";",["T_WHITESPACE","\n        ",156],["T_RETURN","return",157],["T_WHITESPACE"," ",157],["T_VARIABLE","$read",157],["T_OBJECT_OPERATOR","->",157],["T_STRING","fetchOne",157],"(",["T_VARIABLE","$select",157],",",["T_WHITESPACE"," ",157],["T_ARRAY","array",157],"(",["T_CONSTANT_ENCAPSED_STRING","':rule_id'",157],["T_WHITESPACE"," ",157],["T_DOUBLE_ARROW","=>",157],["T_WHITESPACE"," ",157],["T_VARIABLE","$rule",157],["T_OBJECT_OPERATOR","->",157],["T_STRING","getRuleId",157],"(",")",",",["T_WHITESPACE"," ",157],["T_CONSTANT_ENCAPSED_STRING","':customer_id'",157],["T_WHITESPACE"," ",157],["T_DOUBLE_ARROW","=>",157],["T_WHITESPACE"," ",157],["T_VARIABLE","$customerId",157],")",")",";",["T_WHITESPACE","\n    ",157],"}",["T_WHITESPACE","\n\n    ",158],["T_DOC_COMMENT","\/**\n     * Save rule labels for different store views\n     *\n     * @param int $ruleId\n     * @param array $labels\n     *\n     * @return Mage_SalesRule_Model_Resource_Rule\n     *\/",160],["T_WHITESPACE","\n    ",167],["T_PUBLIC","public",168],["T_WHITESPACE"," ",168],["T_FUNCTION","function",168],["T_WHITESPACE"," ",168],["T_STRING","saveStoreLabels",168],"(",["T_VARIABLE","$ruleId",168],",",["T_WHITESPACE"," ",168],["T_VARIABLE","$labels",168],")",["T_WHITESPACE","\n    ",168],"{",["T_WHITESPACE","\n        ",169],["T_VARIABLE","$deleteByStoreIds",170],["T_WHITESPACE"," ",170],"=",["T_WHITESPACE"," ",170],["T_ARRAY","array",170],"(",")",";",["T_WHITESPACE","\n        ",170],["T_VARIABLE","$table",171],["T_WHITESPACE","   ",171],"=",["T_WHITESPACE"," ",171],["T_VARIABLE","$this",171],["T_OBJECT_OPERATOR","->",171],["T_STRING","getTable",171],"(",["T_CONSTANT_ENCAPSED_STRING","'salesrule\/label'",171],")",";",["T_WHITESPACE","\n        ",171],["T_VARIABLE","$adapter",172],["T_WHITESPACE"," ",172],"=",["T_WHITESPACE"," ",172],["T_VARIABLE","$this",172],["T_OBJECT_OPERATOR","->",172],["T_STRING","_getWriteAdapter",172],"(",")",";",["T_WHITESPACE","\n\n        ",172],["T_VARIABLE","$data",174],["T_WHITESPACE","    ",174],"=",["T_WHITESPACE"," ",174],["T_ARRAY","array",174],"(",")",";",["T_WHITESPACE","\n        ",174],["T_FOREACH","foreach",175],["T_WHITESPACE"," ",175],"(",["T_VARIABLE","$labels",175],["T_WHITESPACE"," ",175],["T_AS","as",175],["T_WHITESPACE"," ",175],["T_VARIABLE","$storeId",175],["T_WHITESPACE"," ",175],["T_DOUBLE_ARROW","=>",175],["T_WHITESPACE"," ",175],["T_VARIABLE","$label",175],")",["T_WHITESPACE"," ",175],"{",["T_WHITESPACE","\n            ",175],["T_IF","if",176],["T_WHITESPACE"," ",176],"(",["T_STRING","Mage",176],["T_DOUBLE_COLON","::",176],["T_STRING","helper",176],"(",["T_CONSTANT_ENCAPSED_STRING","'core\/string'",176],")",["T_OBJECT_OPERATOR","->",176],["T_STRING","strlen",176],"(",["T_VARIABLE","$label",176],")",")",["T_WHITESPACE"," ",176],"{",["T_WHITESPACE","\n                ",176],["T_VARIABLE","$data",177],"[","]",["T_WHITESPACE"," ",177],"=",["T_WHITESPACE"," ",177],["T_ARRAY","array",177],"(",["T_CONSTANT_ENCAPSED_STRING","'rule_id'",177],["T_WHITESPACE"," ",177],["T_DOUBLE_ARROW","=>",177],["T_WHITESPACE"," ",177],["T_VARIABLE","$ruleId",177],",",["T_WHITESPACE"," ",177],["T_CONSTANT_ENCAPSED_STRING","'store_id'",177],["T_WHITESPACE"," ",177],["T_DOUBLE_ARROW","=>",177],["T_WHITESPACE"," ",177],["T_VARIABLE","$storeId",177],",",["T_WHITESPACE"," ",177],["T_CONSTANT_ENCAPSED_STRING","'label'",177],["T_WHITESPACE"," ",177],["T_DOUBLE_ARROW","=>",177],["T_WHITESPACE"," ",177],["T_VARIABLE","$label",177],")",";",["T_WHITESPACE","\n            ",177],"}",["T_WHITESPACE"," ",178],["T_ELSE","else",178],["T_WHITESPACE"," ",178],"{",["T_WHITESPACE","\n                ",178],["T_VARIABLE","$deleteByStoreIds",179],"[","]",["T_WHITESPACE"," ",179],"=",["T_WHITESPACE"," ",179],["T_VARIABLE","$storeId",179],";",["T_WHITESPACE","\n            ",179],"}",["T_WHITESPACE","\n        ",180],"}",["T_WHITESPACE","\n\n        ",181],["T_VARIABLE","$adapter",183],["T_OBJECT_OPERATOR","->",183],["T_STRING","beginTransaction",183],"(",")",";",["T_WHITESPACE","\n        ",183],["T_TRY","try",184],["T_WHITESPACE"," ",184],"{",["T_WHITESPACE","\n            ",184],["T_IF","if",185],["T_WHITESPACE"," ",185],"(","!",["T_EMPTY","empty",185],"(",["T_VARIABLE","$data",185],")",")",["T_WHITESPACE"," ",185],"{",["T_WHITESPACE","\n                ",185],["T_VARIABLE","$adapter",186],["T_OBJECT_OPERATOR","->",186],["T_STRING","insertOnDuplicate",186],"(",["T_WHITESPACE","\n                    ",186],["T_VARIABLE","$table",187],",",["T_WHITESPACE","\n                    ",187],["T_VARIABLE","$data",188],",",["T_WHITESPACE","\n                    ",188],["T_ARRAY","array",189],"(",["T_CONSTANT_ENCAPSED_STRING","'label'",189],")",["T_WHITESPACE","\n                ",189],")",";",["T_WHITESPACE","\n            ",190],"}",["T_WHITESPACE","\n\n            ",191],["T_IF","if",193],["T_WHITESPACE"," ",193],"(","!",["T_EMPTY","empty",193],"(",["T_VARIABLE","$deleteByStoreIds",193],")",")",["T_WHITESPACE"," ",193],"{",["T_WHITESPACE","\n                ",193],["T_VARIABLE","$adapter",194],["T_OBJECT_OPERATOR","->",194],["T_STRING","delete",194],"(",["T_VARIABLE","$table",194],",",["T_WHITESPACE"," ",194],["T_ARRAY","array",194],"(",["T_WHITESPACE","\n                    ",194],["T_CONSTANT_ENCAPSED_STRING","'rule_id=?'",195],["T_WHITESPACE","       ",195],["T_DOUBLE_ARROW","=>",195],["T_WHITESPACE"," ",195],["T_VARIABLE","$ruleId",195],",",["T_WHITESPACE","\n                    ",195],["T_CONSTANT_ENCAPSED_STRING","'store_id IN (?)'",196],["T_WHITESPACE"," ",196],["T_DOUBLE_ARROW","=>",196],["T_WHITESPACE"," ",196],["T_VARIABLE","$deleteByStoreIds",196],["T_WHITESPACE","\n                ",196],")",")",";",["T_WHITESPACE","\n            ",197],"}",["T_WHITESPACE","\n        ",198],"}",["T_WHITESPACE"," ",199],["T_CATCH","catch",199],["T_WHITESPACE"," ",199],"(",["T_STRING","Exception",199],["T_WHITESPACE"," ",199],["T_VARIABLE","$e",199],")",["T_WHITESPACE"," ",199],"{",["T_WHITESPACE","\n            ",199],["T_VARIABLE","$adapter",200],["T_OBJECT_OPERATOR","->",200],["T_STRING","rollback",200],"(",")",";",["T_WHITESPACE","\n            ",200],["T_THROW","throw",201],["T_WHITESPACE"," ",201],["T_VARIABLE","$e",201],";",["T_WHITESPACE","\n\n        ",201],"}",["T_WHITESPACE","\n        ",203],["T_VARIABLE","$adapter",204],["T_OBJECT_OPERATOR","->",204],["T_STRING","commit",204],"(",")",";",["T_WHITESPACE","\n\n        ",204],["T_RETURN","return",206],["T_WHITESPACE"," ",206],["T_VARIABLE","$this",206],";",["T_WHITESPACE","\n    ",206],"}",["T_WHITESPACE","\n\n    ",207],["T_DOC_COMMENT","\/**\n     * Get all existing rule labels\n     *\n     * @param int $ruleId\n     * @return array\n     *\/",209],["T_WHITESPACE","\n    ",214],["T_PUBLIC","public",215],["T_WHITESPACE"," ",215],["T_FUNCTION","function",215],["T_WHITESPACE"," ",215],["T_STRING","getStoreLabels",215],"(",["T_VARIABLE","$ruleId",215],")",["T_WHITESPACE","\n    ",215],"{",["T_WHITESPACE","\n        ",216],["T_VARIABLE","$select",217],["T_WHITESPACE"," ",217],"=",["T_WHITESPACE"," ",217],["T_VARIABLE","$this",217],["T_OBJECT_OPERATOR","->",217],["T_STRING","_getReadAdapter",217],"(",")",["T_OBJECT_OPERATOR","->",217],["T_STRING","select",217],"(",")",["T_WHITESPACE","\n            ",217],["T_OBJECT_OPERATOR","->",218],["T_STRING","from",218],"(",["T_VARIABLE","$this",218],["T_OBJECT_OPERATOR","->",218],["T_STRING","getTable",218],"(",["T_CONSTANT_ENCAPSED_STRING","'salesrule\/label'",218],")",",",["T_WHITESPACE"," ",218],["T_ARRAY","array",218],"(",["T_CONSTANT_ENCAPSED_STRING","'store_id'",218],",",["T_WHITESPACE"," ",218],["T_CONSTANT_ENCAPSED_STRING","'label'",218],")",")",["T_WHITESPACE","\n            ",218],["T_OBJECT_OPERATOR","->",219],["T_STRING","where",219],"(",["T_CONSTANT_ENCAPSED_STRING","'rule_id = :rule_id'",219],")",";",["T_WHITESPACE","\n        ",219],["T_RETURN","return",220],["T_WHITESPACE"," ",220],["T_VARIABLE","$this",220],["T_OBJECT_OPERATOR","->",220],["T_STRING","_getReadAdapter",220],"(",")",["T_OBJECT_OPERATOR","->",220],["T_STRING","fetchPairs",220],"(",["T_VARIABLE","$select",220],",",["T_WHITESPACE"," ",220],["T_ARRAY","array",220],"(",["T_CONSTANT_ENCAPSED_STRING","':rule_id'",220],["T_WHITESPACE"," ",220],["T_DOUBLE_ARROW","=>",220],["T_WHITESPACE"," ",220],["T_VARIABLE","$ruleId",220],")",")",";",["T_WHITESPACE","\n    ",220],"}",["T_WHITESPACE","\n\n    ",221],["T_DOC_COMMENT","\/**\n     * Get rule label by specific store id\n     *\n     * @param int $ruleId\n     * @param int $storeId\n     * @return string\n     *\/",223],["T_WHITESPACE","\n    ",229],["T_PUBLIC","public",230],["T_WHITESPACE"," ",230],["T_FUNCTION","function",230],["T_WHITESPACE"," ",230],["T_STRING","getStoreLabel",230],"(",["T_VARIABLE","$ruleId",230],",",["T_WHITESPACE"," ",230],["T_VARIABLE","$storeId",230],")",["T_WHITESPACE","\n    ",230],"{",["T_WHITESPACE","\n        ",231],["T_VARIABLE","$select",232],["T_WHITESPACE"," ",232],"=",["T_WHITESPACE"," ",232],["T_VARIABLE","$this",232],["T_OBJECT_OPERATOR","->",232],["T_STRING","_getReadAdapter",232],"(",")",["T_OBJECT_OPERATOR","->",232],["T_STRING","select",232],"(",")",["T_WHITESPACE","\n            ",232],["T_OBJECT_OPERATOR","->",233],["T_STRING","from",233],"(",["T_VARIABLE","$this",233],["T_OBJECT_OPERATOR","->",233],["T_STRING","getTable",233],"(",["T_CONSTANT_ENCAPSED_STRING","'salesrule\/label'",233],")",",",["T_WHITESPACE"," ",233],["T_CONSTANT_ENCAPSED_STRING","'label'",233],")",["T_WHITESPACE","\n            ",233],["T_OBJECT_OPERATOR","->",234],["T_STRING","where",234],"(",["T_CONSTANT_ENCAPSED_STRING","'rule_id = :rule_id'",234],")",["T_WHITESPACE","\n            ",234],["T_OBJECT_OPERATOR","->",235],["T_STRING","where",235],"(",["T_CONSTANT_ENCAPSED_STRING","'store_id IN(0, :store_id)'",235],")",["T_WHITESPACE","\n            ",235],["T_OBJECT_OPERATOR","->",236],["T_STRING","order",236],"(",["T_CONSTANT_ENCAPSED_STRING","'store_id DESC'",236],")",";",["T_WHITESPACE","\n        ",236],["T_RETURN","return",237],["T_WHITESPACE"," ",237],["T_VARIABLE","$this",237],["T_OBJECT_OPERATOR","->",237],["T_STRING","_getReadAdapter",237],"(",")",["T_OBJECT_OPERATOR","->",237],["T_STRING","fetchOne",237],"(",["T_VARIABLE","$select",237],",",["T_WHITESPACE"," ",237],["T_ARRAY","array",237],"(",["T_CONSTANT_ENCAPSED_STRING","':rule_id'",237],["T_WHITESPACE"," ",237],["T_DOUBLE_ARROW","=>",237],["T_WHITESPACE"," ",237],["T_VARIABLE","$ruleId",237],",",["T_WHITESPACE"," ",237],["T_CONSTANT_ENCAPSED_STRING","':store_id'",237],["T_WHITESPACE"," ",237],["T_DOUBLE_ARROW","=>",237],["T_WHITESPACE"," ",237],["T_VARIABLE","$storeId",237],")",")",";",["T_WHITESPACE","\n    ",237],"}",["T_WHITESPACE","\n\n    ",238],["T_DOC_COMMENT","\/**\n     * Return codes of all product attributes currently used in promo rules for specified customer group and website\n     *\n     * @param unknown_type $websiteId\n     * @param unknown_type $customerGroupId\n     * @return mixed\n     *\/",240],["T_WHITESPACE","\n    ",246],["T_PUBLIC","public",247],["T_WHITESPACE"," ",247],["T_FUNCTION","function",247],["T_WHITESPACE"," ",247],["T_STRING","getActiveAttributes",247],"(",["T_VARIABLE","$websiteId",247],",",["T_WHITESPACE"," ",247],["T_VARIABLE","$customerGroupId",247],")",["T_WHITESPACE","\n    ",247],"{",["T_WHITESPACE","\n        ",248],["T_VARIABLE","$read",249],["T_WHITESPACE"," ",249],"=",["T_WHITESPACE"," ",249],["T_VARIABLE","$this",249],["T_OBJECT_OPERATOR","->",249],["T_STRING","_getReadAdapter",249],"(",")",";",["T_WHITESPACE","\n        ",249],["T_VARIABLE","$select",250],["T_WHITESPACE"," ",250],"=",["T_WHITESPACE"," ",250],["T_VARIABLE","$read",250],["T_OBJECT_OPERATOR","->",250],["T_STRING","select",250],"(",")",["T_WHITESPACE","\n            ",250],["T_OBJECT_OPERATOR","->",251],["T_STRING","from",251],"(",["T_ARRAY","array",251],"(",["T_CONSTANT_ENCAPSED_STRING","'a'",251],["T_WHITESPACE"," ",251],["T_DOUBLE_ARROW","=>",251],["T_WHITESPACE"," ",251],["T_VARIABLE","$this",251],["T_OBJECT_OPERATOR","->",251],["T_STRING","getTable",251],"(",["T_CONSTANT_ENCAPSED_STRING","'salesrule\/product_attribute'",251],")",")",",",["T_WHITESPACE","\n                ",251],["T_NEW","new",252],["T_WHITESPACE"," ",252],["T_STRING","Zend_Db_Expr",252],"(",["T_CONSTANT_ENCAPSED_STRING","'DISTINCT ea.attribute_code'",252],")",")",["T_WHITESPACE","\n            ",252],["T_OBJECT_OPERATOR","->",253],["T_STRING","joinInner",253],"(",["T_ARRAY","array",253],"(",["T_CONSTANT_ENCAPSED_STRING","'ea'",253],["T_WHITESPACE"," ",253],["T_DOUBLE_ARROW","=>",253],["T_WHITESPACE"," ",253],["T_VARIABLE","$this",253],["T_OBJECT_OPERATOR","->",253],["T_STRING","getTable",253],"(",["T_CONSTANT_ENCAPSED_STRING","'eav\/attribute'",253],")",")",",",["T_WHITESPACE"," ",253],["T_CONSTANT_ENCAPSED_STRING","'ea.attribute_id = a.attribute_id'",253],",",["T_WHITESPACE"," ",253],["T_ARRAY","array",253],"(",")",")",";",["T_WHITESPACE","\n        ",253],["T_RETURN","return",254],["T_WHITESPACE"," ",254],["T_VARIABLE","$read",254],["T_OBJECT_OPERATOR","->",254],["T_STRING","fetchAll",254],"(",["T_VARIABLE","$select",254],")",";",["T_WHITESPACE","\n    ",254],"}",["T_WHITESPACE","\n\n    ",255],["T_DOC_COMMENT","\/**\n     * Save product attributes currently used in conditions and actions of rule\n     *\n     * @param Mage_SalesRule_Model_Rule $rule\n     * @param mixed $attributes\n     * @return Mage_SalesRule_Model_Resource_Rule\n     *\/",257],["T_WHITESPACE","\n    ",263],["T_PUBLIC","public",264],["T_WHITESPACE"," ",264],["T_FUNCTION","function",264],["T_WHITESPACE"," ",264],["T_STRING","setActualProductAttributes",264],"(",["T_VARIABLE","$rule",264],",",["T_WHITESPACE"," ",264],["T_VARIABLE","$attributes",264],")",["T_WHITESPACE","\n    ",264],"{",["T_WHITESPACE","\n        ",265],["T_VARIABLE","$write",266],["T_WHITESPACE"," ",266],"=",["T_WHITESPACE"," ",266],["T_VARIABLE","$this",266],["T_OBJECT_OPERATOR","->",266],["T_STRING","_getWriteAdapter",266],"(",")",";",["T_WHITESPACE","\n        ",266],["T_VARIABLE","$write",267],["T_OBJECT_OPERATOR","->",267],["T_STRING","delete",267],"(",["T_VARIABLE","$this",267],["T_OBJECT_OPERATOR","->",267],["T_STRING","getTable",267],"(",["T_CONSTANT_ENCAPSED_STRING","'salesrule\/product_attribute'",267],")",",",["T_WHITESPACE"," ",267],["T_ARRAY","array",267],"(",["T_CONSTANT_ENCAPSED_STRING","'rule_id=?'",267],["T_WHITESPACE"," ",267],["T_DOUBLE_ARROW","=>",267],["T_WHITESPACE"," ",267],["T_VARIABLE","$rule",267],["T_OBJECT_OPERATOR","->",267],["T_STRING","getId",267],"(",")",")",")",";",["T_WHITESPACE","\n\n        ",267],["T_COMMENT","\/\/Getting attribute IDs for attribute codes\n",269],["T_WHITESPACE","        ",270],["T_VARIABLE","$attributeIds",270],["T_WHITESPACE"," ",270],"=",["T_WHITESPACE"," ",270],["T_ARRAY","array",270],"(",")",";",["T_WHITESPACE","\n        ",270],["T_VARIABLE","$select",271],["T_WHITESPACE"," ",271],"=",["T_WHITESPACE"," ",271],["T_VARIABLE","$this",271],["T_OBJECT_OPERATOR","->",271],["T_STRING","_getReadAdapter",271],"(",")",["T_OBJECT_OPERATOR","->",271],["T_STRING","select",271],"(",")",["T_WHITESPACE","\n            ",271],["T_OBJECT_OPERATOR","->",272],["T_STRING","from",272],"(",["T_ARRAY","array",272],"(",["T_CONSTANT_ENCAPSED_STRING","'a'",272],["T_WHITESPACE"," ",272],["T_DOUBLE_ARROW","=>",272],["T_WHITESPACE"," ",272],["T_VARIABLE","$this",272],["T_OBJECT_OPERATOR","->",272],["T_STRING","getTable",272],"(",["T_CONSTANT_ENCAPSED_STRING","'eav\/attribute'",272],")",")",",",["T_WHITESPACE"," ",272],["T_ARRAY","array",272],"(",["T_CONSTANT_ENCAPSED_STRING","'a.attribute_id'",272],")",")",["T_WHITESPACE","\n            ",272],["T_OBJECT_OPERATOR","->",273],["T_STRING","where",273],"(",["T_CONSTANT_ENCAPSED_STRING","'a.attribute_code IN (?)'",273],",",["T_WHITESPACE"," ",273],["T_ARRAY","array",273],"(",["T_VARIABLE","$attributes",273],")",")",";",["T_WHITESPACE","\n        ",273],["T_VARIABLE","$attributesFound",274],["T_WHITESPACE"," ",274],"=",["T_WHITESPACE"," ",274],["T_VARIABLE","$this",274],["T_OBJECT_OPERATOR","->",274],["T_STRING","_getReadAdapter",274],"(",")",["T_OBJECT_OPERATOR","->",274],["T_STRING","fetchAll",274],"(",["T_VARIABLE","$select",274],")",";",["T_WHITESPACE","\n        ",274],["T_IF","if",275],["T_WHITESPACE"," ",275],"(",["T_VARIABLE","$attributesFound",275],")",["T_WHITESPACE"," ",275],"{",["T_WHITESPACE","\n            ",275],["T_FOREACH","foreach",276],["T_WHITESPACE"," ",276],"(",["T_VARIABLE","$attributesFound",276],["T_WHITESPACE"," ",276],["T_AS","as",276],["T_WHITESPACE"," ",276],["T_VARIABLE","$attribute",276],")",["T_WHITESPACE"," ",276],"{",["T_WHITESPACE","\n                ",276],["T_VARIABLE","$attributeIds",277],"[","]",["T_WHITESPACE"," ",277],"=",["T_WHITESPACE"," ",277],["T_VARIABLE","$attribute",277],"[",["T_CONSTANT_ENCAPSED_STRING","'attribute_id'",277],"]",";",["T_WHITESPACE","\n            ",277],"}",["T_WHITESPACE","\n\n            ",278],["T_VARIABLE","$data",280],["T_WHITESPACE"," ",280],"=",["T_WHITESPACE"," ",280],["T_ARRAY","array",280],"(",")",";",["T_WHITESPACE","\n            ",280],["T_FOREACH","foreach",281],["T_WHITESPACE"," ",281],"(",["T_VARIABLE","$rule",281],["T_OBJECT_OPERATOR","->",281],["T_STRING","getCustomerGroupIds",281],"(",")",["T_WHITESPACE"," ",281],["T_AS","as",281],["T_WHITESPACE"," ",281],["T_VARIABLE","$customerGroupId",281],")",["T_WHITESPACE"," ",281],"{",["T_WHITESPACE","\n                ",281],["T_FOREACH","foreach",282],["T_WHITESPACE"," ",282],"(",["T_VARIABLE","$rule",282],["T_OBJECT_OPERATOR","->",282],["T_STRING","getWebsiteIds",282],"(",")",["T_WHITESPACE"," ",282],["T_AS","as",282],["T_WHITESPACE"," ",282],["T_VARIABLE","$websiteId",282],")",["T_WHITESPACE"," ",282],"{",["T_WHITESPACE","\n                    ",282],["T_FOREACH","foreach",283],["T_WHITESPACE"," ",283],"(",["T_VARIABLE","$attributeIds",283],["T_WHITESPACE"," ",283],["T_AS","as",283],["T_WHITESPACE"," ",283],["T_VARIABLE","$attribute",283],")",["T_WHITESPACE"," ",283],"{",["T_WHITESPACE","\n                        ",283],["T_VARIABLE","$data",284],"[","]",["T_WHITESPACE"," ",284],"=",["T_WHITESPACE"," ",284],["T_ARRAY","array",284],["T_WHITESPACE"," ",284],"(",["T_WHITESPACE","\n                            ",284],["T_CONSTANT_ENCAPSED_STRING","'rule_id'",285],["T_WHITESPACE","           ",285],["T_DOUBLE_ARROW","=>",285],["T_WHITESPACE"," ",285],["T_VARIABLE","$rule",285],["T_OBJECT_OPERATOR","->",285],["T_STRING","getId",285],"(",")",",",["T_WHITESPACE","\n                            ",285],["T_CONSTANT_ENCAPSED_STRING","'website_id'",286],["T_WHITESPACE","        ",286],["T_DOUBLE_ARROW","=>",286],["T_WHITESPACE"," ",286],["T_VARIABLE","$websiteId",286],",",["T_WHITESPACE","\n                            ",286],["T_CONSTANT_ENCAPSED_STRING","'customer_group_id'",287],["T_WHITESPACE"," ",287],["T_DOUBLE_ARROW","=>",287],["T_WHITESPACE"," ",287],["T_VARIABLE","$customerGroupId",287],",",["T_WHITESPACE","\n                            ",287],["T_CONSTANT_ENCAPSED_STRING","'attribute_id'",288],["T_WHITESPACE","      ",288],["T_DOUBLE_ARROW","=>",288],["T_WHITESPACE"," ",288],["T_VARIABLE","$attribute",288],["T_WHITESPACE","\n                        ",288],")",";",["T_WHITESPACE","\n                    ",289],"}",["T_WHITESPACE","\n                ",290],"}",["T_WHITESPACE","\n            ",291],"}",["T_WHITESPACE","\n            ",292],["T_VARIABLE","$write",293],["T_OBJECT_OPERATOR","->",293],["T_STRING","insertMultiple",293],"(",["T_VARIABLE","$this",293],["T_OBJECT_OPERATOR","->",293],["T_STRING","getTable",293],"(",["T_CONSTANT_ENCAPSED_STRING","'salesrule\/product_attribute'",293],")",",",["T_WHITESPACE"," ",293],["T_VARIABLE","$data",293],")",";",["T_WHITESPACE","\n        ",293],"}",["T_WHITESPACE","\n\n        ",294],["T_RETURN","return",296],["T_WHITESPACE"," ",296],["T_VARIABLE","$this",296],";",["T_WHITESPACE","\n    ",296],"}",["T_WHITESPACE","\n\n    ",297],["T_DOC_COMMENT","\/**\n     * Collect all product attributes used in serialized rule's action or condition\n     *\n     * @param string $serializedString\n     *\n     * @return array\n     *\/",299],["T_WHITESPACE","\n    ",305],["T_PUBLIC","public",306],["T_WHITESPACE"," ",306],["T_FUNCTION","function",306],["T_WHITESPACE"," ",306],["T_STRING","getProductAttributes",306],"(",["T_VARIABLE","$serializedString",306],")",["T_WHITESPACE","\n    ",306],"{",["T_WHITESPACE","\n        ",307],["T_VARIABLE","$result",308],["T_WHITESPACE"," ",308],"=",["T_WHITESPACE"," ",308],["T_ARRAY","array",308],"(",")",";",["T_WHITESPACE","\n        ",308],["T_IF","if",309],["T_WHITESPACE"," ",309],"(",["T_STRING","preg_match_all",309],"(",["T_CONSTANT_ENCAPSED_STRING","'~s:32:\"salesrule\/rule_condition_product\";s:9:\"attribute\";s:\\d+:\"(.*?)\"~s'",309],",",["T_WHITESPACE","\n            ",309],["T_VARIABLE","$serializedString",310],",",["T_WHITESPACE"," ",310],["T_VARIABLE","$matches",310],")",")","{",["T_WHITESPACE","\n            ",310],["T_FOREACH","foreach",311],["T_WHITESPACE"," ",311],"(",["T_VARIABLE","$matches",311],"[",["T_LNUMBER","1",311],"]",["T_WHITESPACE"," ",311],["T_AS","as",311],["T_WHITESPACE"," ",311],["T_VARIABLE","$offset",311],["T_WHITESPACE"," ",311],["T_DOUBLE_ARROW","=>",311],["T_WHITESPACE"," ",311],["T_VARIABLE","$attributeCode",311],")",["T_WHITESPACE"," ",311],"{",["T_WHITESPACE","\n                ",311],["T_VARIABLE","$result",312],"[","]",["T_WHITESPACE"," ",312],"=",["T_WHITESPACE"," ",312],["T_VARIABLE","$attributeCode",312],";",["T_WHITESPACE","\n            ",312],"}",["T_WHITESPACE","\n        ",313],"}",["T_WHITESPACE","\n\n        ",314],["T_RETURN","return",316],["T_WHITESPACE"," ",316],["T_VARIABLE","$result",316],";",["T_WHITESPACE","\n    ",316],"}",["T_WHITESPACE","\n",317],"}",["T_WHITESPACE","\n",318]]
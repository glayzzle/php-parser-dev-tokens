[["T_OPEN_TAG","<?php\n",1],["T_DOC_COMMENT","\/**\n * Magento\n *\n * NOTICE OF LICENSE\n *\n * This source file is subject to the Open Software License (OSL 3.0)\n * that is bundled with this package in the file LICENSE.txt.\n * It is also available through the world-wide-web at this URL:\n * http:\/\/opensource.org\/licenses\/osl-3.0.php\n * If you did not receive a copy of the license and are unable to\n * obtain it through the world-wide-web, please send an email\n * to license@magento.com so we can send you a copy immediately.\n *\n * DISCLAIMER\n *\n * Do not edit or add to this file if you wish to upgrade Magento to newer\n * versions in the future. If you wish to customize Magento for your\n * needs please refer to http:\/\/www.magento.com for more information.\n *\n * @category    Mage\n * @package     Mage_SalesRule\n * @copyright  Copyright (c) 2006-2016 X.commerce, Inc. and affiliates (http:\/\/www.magento.com)\n * @license    http:\/\/opensource.org\/licenses\/osl-3.0.php  Open Software License (OSL 3.0)\n *\/",2],["T_WHITESPACE","\n\n",25],["T_DOC_COMMENT","\/**\n * Discount calculation model\n *\n * @category    Mage\n * @package     Mage_SalesRule\n * @author      Magento Core Team <core@magentocommerce.com>\n *\/",27],["T_WHITESPACE","\n",33],["T_CLASS","class",34],["T_WHITESPACE"," ",34],["T_STRING","Mage_SalesRule_Model_Quote_Discount",34],["T_WHITESPACE"," ",34],["T_EXTENDS","extends",34],["T_WHITESPACE"," ",34],["T_STRING","Mage_Sales_Model_Quote_Address_Total_Abstract",34],["T_WHITESPACE","\n",34],"{",["T_WHITESPACE","\n    ",35],["T_DOC_COMMENT","\/**\n     * Discount calculation object\n     *\n     * @var Mage_SalesRule_Model_Validator\n     *\/",36],["T_WHITESPACE","\n    ",40],["T_PROTECTED","protected",41],["T_WHITESPACE"," ",41],["T_VARIABLE","$_calculator",41],";",["T_WHITESPACE","\n\n    ",41],["T_DOC_COMMENT","\/**\n     * Initialize discount collector\n     *\/",43],["T_WHITESPACE","\n    ",45],["T_PUBLIC","public",46],["T_WHITESPACE"," ",46],["T_FUNCTION","function",46],["T_WHITESPACE"," ",46],["T_STRING","__construct",46],"(",")",["T_WHITESPACE","\n    ",46],"{",["T_WHITESPACE","\n        ",47],["T_VARIABLE","$this",48],["T_OBJECT_OPERATOR","->",48],["T_STRING","setCode",48],"(",["T_CONSTANT_ENCAPSED_STRING","'discount'",48],")",";",["T_WHITESPACE","\n        ",48],["T_VARIABLE","$this",49],["T_OBJECT_OPERATOR","->",49],["T_STRING","_calculator",49],["T_WHITESPACE"," ",49],"=",["T_WHITESPACE"," ",49],["T_STRING","Mage",49],["T_DOUBLE_COLON","::",49],["T_STRING","getSingleton",49],"(",["T_CONSTANT_ENCAPSED_STRING","'salesrule\/validator'",49],")",";",["T_WHITESPACE","\n    ",49],"}",["T_WHITESPACE","\n\n    ",50],["T_DOC_COMMENT","\/**\n     * Collect address discount amount\n     *\n     * @param   Mage_Sales_Model_Quote_Address $address\n     * @return  Mage_SalesRule_Model_Quote_Discount\n     *\/",52],["T_WHITESPACE","\n    ",57],["T_PUBLIC","public",58],["T_WHITESPACE"," ",58],["T_FUNCTION","function",58],["T_WHITESPACE"," ",58],["T_STRING","collect",58],"(",["T_STRING","Mage_Sales_Model_Quote_Address",58],["T_WHITESPACE"," ",58],["T_VARIABLE","$address",58],")",["T_WHITESPACE","\n    ",58],"{",["T_WHITESPACE","\n        ",59],["T_STRING","parent",60],["T_DOUBLE_COLON","::",60],["T_STRING","collect",60],"(",["T_VARIABLE","$address",60],")",";",["T_WHITESPACE","\n        ",60],["T_VARIABLE","$quote",61],["T_WHITESPACE"," ",61],"=",["T_WHITESPACE"," ",61],["T_VARIABLE","$address",61],["T_OBJECT_OPERATOR","->",61],["T_STRING","getQuote",61],"(",")",";",["T_WHITESPACE","\n        ",61],["T_VARIABLE","$store",62],["T_WHITESPACE"," ",62],"=",["T_WHITESPACE"," ",62],["T_STRING","Mage",62],["T_DOUBLE_COLON","::",62],["T_STRING","app",62],"(",")",["T_OBJECT_OPERATOR","->",62],["T_STRING","getStore",62],"(",["T_VARIABLE","$quote",62],["T_OBJECT_OPERATOR","->",62],["T_STRING","getStoreId",62],"(",")",")",";",["T_WHITESPACE","\n        ",62],["T_VARIABLE","$this",63],["T_OBJECT_OPERATOR","->",63],["T_STRING","_calculator",63],["T_OBJECT_OPERATOR","->",63],["T_STRING","reset",63],"(",["T_VARIABLE","$address",63],")",";",["T_WHITESPACE","\n\n        ",63],["T_VARIABLE","$items",65],["T_WHITESPACE"," ",65],"=",["T_WHITESPACE"," ",65],["T_VARIABLE","$this",65],["T_OBJECT_OPERATOR","->",65],["T_STRING","_getAddressItems",65],"(",["T_VARIABLE","$address",65],")",";",["T_WHITESPACE","\n        ",65],["T_IF","if",66],["T_WHITESPACE"," ",66],"(","!",["T_STRING","count",66],"(",["T_VARIABLE","$items",66],")",")",["T_WHITESPACE"," ",66],"{",["T_WHITESPACE","\n            ",66],["T_RETURN","return",67],["T_WHITESPACE"," ",67],["T_VARIABLE","$this",67],";",["T_WHITESPACE","\n        ",67],"}",["T_WHITESPACE","\n\n        ",68],["T_VARIABLE","$eventArgs",70],["T_WHITESPACE"," ",70],"=",["T_WHITESPACE"," ",70],["T_ARRAY","array",70],"(",["T_WHITESPACE","\n            ",70],["T_CONSTANT_ENCAPSED_STRING","'website_id'",71],["T_WHITESPACE","        ",71],["T_DOUBLE_ARROW","=>",71],["T_WHITESPACE"," ",71],["T_VARIABLE","$store",71],["T_OBJECT_OPERATOR","->",71],["T_STRING","getWebsiteId",71],"(",")",",",["T_WHITESPACE","\n            ",71],["T_CONSTANT_ENCAPSED_STRING","'customer_group_id'",72],["T_WHITESPACE"," ",72],["T_DOUBLE_ARROW","=>",72],["T_WHITESPACE"," ",72],["T_VARIABLE","$quote",72],["T_OBJECT_OPERATOR","->",72],["T_STRING","getCustomerGroupId",72],"(",")",",",["T_WHITESPACE","\n            ",72],["T_CONSTANT_ENCAPSED_STRING","'coupon_code'",73],["T_WHITESPACE","       ",73],["T_DOUBLE_ARROW","=>",73],["T_WHITESPACE"," ",73],["T_VARIABLE","$quote",73],["T_OBJECT_OPERATOR","->",73],["T_STRING","getCouponCode",73],"(",")",",",["T_WHITESPACE","\n        ",73],")",";",["T_WHITESPACE","\n\n        ",74],["T_VARIABLE","$this",76],["T_OBJECT_OPERATOR","->",76],["T_STRING","_calculator",76],["T_OBJECT_OPERATOR","->",76],["T_STRING","init",76],"(",["T_VARIABLE","$store",76],["T_OBJECT_OPERATOR","->",76],["T_STRING","getWebsiteId",76],"(",")",",",["T_WHITESPACE"," ",76],["T_VARIABLE","$quote",76],["T_OBJECT_OPERATOR","->",76],["T_STRING","getCustomerGroupId",76],"(",")",",",["T_WHITESPACE"," ",76],["T_VARIABLE","$quote",76],["T_OBJECT_OPERATOR","->",76],["T_STRING","getCouponCode",76],"(",")",")",";",["T_WHITESPACE","\n        ",76],["T_VARIABLE","$this",77],["T_OBJECT_OPERATOR","->",77],["T_STRING","_calculator",77],["T_OBJECT_OPERATOR","->",77],["T_STRING","initTotals",77],"(",["T_VARIABLE","$items",77],",",["T_WHITESPACE"," ",77],["T_VARIABLE","$address",77],")",";",["T_WHITESPACE","\n\n        ",77],["T_VARIABLE","$address",79],["T_OBJECT_OPERATOR","->",79],["T_STRING","setDiscountDescription",79],"(",["T_ARRAY","array",79],"(",")",")",";",["T_WHITESPACE","\n        ",79],["T_VARIABLE","$items",80],["T_WHITESPACE"," ",80],"=",["T_WHITESPACE"," ",80],["T_VARIABLE","$this",80],["T_OBJECT_OPERATOR","->",80],["T_STRING","_calculator",80],["T_OBJECT_OPERATOR","->",80],["T_STRING","sortItemsByPriority",80],"(",["T_VARIABLE","$items",80],")",";",["T_WHITESPACE","\n        ",80],["T_FOREACH","foreach",81],["T_WHITESPACE"," ",81],"(",["T_VARIABLE","$items",81],["T_WHITESPACE"," ",81],["T_AS","as",81],["T_WHITESPACE"," ",81],["T_VARIABLE","$item",81],")",["T_WHITESPACE"," ",81],"{",["T_WHITESPACE","\n            ",81],["T_IF","if",82],["T_WHITESPACE"," ",82],"(",["T_VARIABLE","$item",82],["T_OBJECT_OPERATOR","->",82],["T_STRING","getNoDiscount",82],"(",")",")",["T_WHITESPACE"," ",82],"{",["T_WHITESPACE","\n                ",82],["T_VARIABLE","$item",83],["T_OBJECT_OPERATOR","->",83],["T_STRING","setDiscountAmount",83],"(",["T_LNUMBER","0",83],")",";",["T_WHITESPACE","\n                ",83],["T_VARIABLE","$item",84],["T_OBJECT_OPERATOR","->",84],["T_STRING","setBaseDiscountAmount",84],"(",["T_LNUMBER","0",84],")",";",["T_WHITESPACE","\n            ",84],"}",["T_WHITESPACE","\n            ",85],["T_ELSE","else",86],["T_WHITESPACE"," ",86],"{",["T_WHITESPACE","\n                ",86],["T_DOC_COMMENT","\/**\n                 * Child item discount we calculate for parent\n                 *\/",87],["T_WHITESPACE","\n                ",89],["T_IF","if",90],["T_WHITESPACE"," ",90],"(",["T_VARIABLE","$item",90],["T_OBJECT_OPERATOR","->",90],["T_STRING","getParentItemId",90],"(",")",")",["T_WHITESPACE"," ",90],"{",["T_WHITESPACE","\n                    ",90],["T_CONTINUE","continue",91],";",["T_WHITESPACE","\n                ",91],"}",["T_WHITESPACE","\n\n                ",92],["T_VARIABLE","$eventArgs",94],"[",["T_CONSTANT_ENCAPSED_STRING","'item'",94],"]",["T_WHITESPACE"," ",94],"=",["T_WHITESPACE"," ",94],["T_VARIABLE","$item",94],";",["T_WHITESPACE","\n                ",94],["T_STRING","Mage",95],["T_DOUBLE_COLON","::",95],["T_STRING","dispatchEvent",95],"(",["T_CONSTANT_ENCAPSED_STRING","'sales_quote_address_discount_item'",95],",",["T_WHITESPACE"," ",95],["T_VARIABLE","$eventArgs",95],")",";",["T_WHITESPACE","\n\n                ",95],["T_IF","if",97],["T_WHITESPACE"," ",97],"(",["T_VARIABLE","$item",97],["T_OBJECT_OPERATOR","->",97],["T_STRING","getHasChildren",97],"(",")",["T_WHITESPACE"," ",97],["T_BOOLEAN_AND","&&",97],["T_WHITESPACE"," ",97],["T_VARIABLE","$item",97],["T_OBJECT_OPERATOR","->",97],["T_STRING","isChildrenCalculated",97],"(",")",")",["T_WHITESPACE"," ",97],"{",["T_WHITESPACE","\n                    ",97],["T_FOREACH","foreach",98],["T_WHITESPACE"," ",98],"(",["T_VARIABLE","$item",98],["T_OBJECT_OPERATOR","->",98],["T_STRING","getChildren",98],"(",")",["T_WHITESPACE"," ",98],["T_AS","as",98],["T_WHITESPACE"," ",98],["T_VARIABLE","$child",98],")",["T_WHITESPACE"," ",98],"{",["T_WHITESPACE","\n                        ",98],["T_VARIABLE","$this",99],["T_OBJECT_OPERATOR","->",99],["T_STRING","_calculator",99],["T_OBJECT_OPERATOR","->",99],["T_STRING","process",99],"(",["T_VARIABLE","$child",99],")",";",["T_WHITESPACE","\n                        ",99],["T_VARIABLE","$eventArgs",100],"[",["T_CONSTANT_ENCAPSED_STRING","'item'",100],"]",["T_WHITESPACE"," ",100],"=",["T_WHITESPACE"," ",100],["T_VARIABLE","$child",100],";",["T_WHITESPACE","\n                        ",100],["T_STRING","Mage",101],["T_DOUBLE_COLON","::",101],["T_STRING","dispatchEvent",101],"(",["T_CONSTANT_ENCAPSED_STRING","'sales_quote_address_discount_item'",101],",",["T_WHITESPACE"," ",101],["T_VARIABLE","$eventArgs",101],")",";",["T_WHITESPACE","\n\n                        ",101],["T_VARIABLE","$this",103],["T_OBJECT_OPERATOR","->",103],["T_STRING","_aggregateItemDiscount",103],"(",["T_VARIABLE","$child",103],")",";",["T_WHITESPACE","\n                    ",103],"}",["T_WHITESPACE","\n                ",104],"}",["T_WHITESPACE"," ",105],["T_ELSE","else",105],["T_WHITESPACE"," ",105],"{",["T_WHITESPACE","\n                    ",105],["T_VARIABLE","$this",106],["T_OBJECT_OPERATOR","->",106],["T_STRING","_calculator",106],["T_OBJECT_OPERATOR","->",106],["T_STRING","process",106],"(",["T_VARIABLE","$item",106],")",";",["T_WHITESPACE","\n                    ",106],["T_VARIABLE","$this",107],["T_OBJECT_OPERATOR","->",107],["T_STRING","_aggregateItemDiscount",107],"(",["T_VARIABLE","$item",107],")",";",["T_WHITESPACE","\n                ",107],"}",["T_WHITESPACE","\n            ",108],"}",["T_WHITESPACE","\n        ",109],"}",["T_WHITESPACE","\n\n        ",110],["T_DOC_COMMENT","\/**\n         * process weee amount\n         *\/",112],["T_WHITESPACE","\n        ",114],["T_IF","if",115],["T_WHITESPACE"," ",115],"(",["T_STRING","Mage",115],["T_DOUBLE_COLON","::",115],["T_STRING","helper",115],"(",["T_CONSTANT_ENCAPSED_STRING","'weee'",115],")",["T_OBJECT_OPERATOR","->",115],["T_STRING","isEnabled",115],"(",")",["T_WHITESPACE"," ",115],["T_BOOLEAN_AND","&&",115],["T_WHITESPACE"," ",115],["T_STRING","Mage",115],["T_DOUBLE_COLON","::",115],["T_STRING","helper",115],"(",["T_CONSTANT_ENCAPSED_STRING","'weee'",115],")",["T_OBJECT_OPERATOR","->",115],["T_STRING","isDiscounted",115],"(",["T_VARIABLE","$store",115],")",")",["T_WHITESPACE"," ",115],"{",["T_WHITESPACE","\n            ",115],["T_VARIABLE","$this",116],["T_OBJECT_OPERATOR","->",116],["T_STRING","_calculator",116],["T_OBJECT_OPERATOR","->",116],["T_STRING","processWeeeAmount",116],"(",["T_VARIABLE","$address",116],",",["T_WHITESPACE"," ",116],["T_VARIABLE","$items",116],")",";",["T_WHITESPACE","\n        ",116],"}",["T_WHITESPACE","\n\n        ",117],["T_DOC_COMMENT","\/**\n         * Process shipping amount discount\n         *\/",119],["T_WHITESPACE","\n        ",121],["T_VARIABLE","$address",122],["T_OBJECT_OPERATOR","->",122],["T_STRING","setShippingDiscountAmount",122],"(",["T_LNUMBER","0",122],")",";",["T_WHITESPACE","\n        ",122],["T_VARIABLE","$address",123],["T_OBJECT_OPERATOR","->",123],["T_STRING","setBaseShippingDiscountAmount",123],"(",["T_LNUMBER","0",123],")",";",["T_WHITESPACE","\n        ",123],["T_IF","if",124],["T_WHITESPACE"," ",124],"(",["T_VARIABLE","$address",124],["T_OBJECT_OPERATOR","->",124],["T_STRING","getShippingAmount",124],"(",")",")",["T_WHITESPACE"," ",124],"{",["T_WHITESPACE","\n            ",124],["T_VARIABLE","$this",125],["T_OBJECT_OPERATOR","->",125],["T_STRING","_calculator",125],["T_OBJECT_OPERATOR","->",125],["T_STRING","processShippingAmount",125],"(",["T_VARIABLE","$address",125],")",";",["T_WHITESPACE","\n            ",125],["T_VARIABLE","$this",126],["T_OBJECT_OPERATOR","->",126],["T_STRING","_addAmount",126],"(","-",["T_VARIABLE","$address",126],["T_OBJECT_OPERATOR","->",126],["T_STRING","getShippingDiscountAmount",126],"(",")",")",";",["T_WHITESPACE","\n            ",126],["T_VARIABLE","$this",127],["T_OBJECT_OPERATOR","->",127],["T_STRING","_addBaseAmount",127],"(","-",["T_VARIABLE","$address",127],["T_OBJECT_OPERATOR","->",127],["T_STRING","getBaseShippingDiscountAmount",127],"(",")",")",";",["T_WHITESPACE","\n        ",127],"}",["T_WHITESPACE","\n\n        ",128],["T_VARIABLE","$this",130],["T_OBJECT_OPERATOR","->",130],["T_STRING","_calculator",130],["T_OBJECT_OPERATOR","->",130],["T_STRING","prepareDescription",130],"(",["T_VARIABLE","$address",130],")",";",["T_WHITESPACE","\n        ",130],["T_RETURN","return",131],["T_WHITESPACE"," ",131],["T_VARIABLE","$this",131],";",["T_WHITESPACE","\n    ",131],"}",["T_WHITESPACE","\n\n    ",132],["T_DOC_COMMENT","\/**\n     * Aggregate item discount information to address data and related properties\n     *\n     * @param   Mage_Sales_Model_Quote_Item_Abstract $item\n     * @return  Mage_SalesRule_Model_Quote_Discount\n     *\/",134],["T_WHITESPACE","\n    ",139],["T_PROTECTED","protected",140],["T_WHITESPACE"," ",140],["T_FUNCTION","function",140],["T_WHITESPACE"," ",140],["T_STRING","_aggregateItemDiscount",140],"(",["T_VARIABLE","$item",140],")",["T_WHITESPACE","\n    ",140],"{",["T_WHITESPACE","\n        ",141],["T_VARIABLE","$this",142],["T_OBJECT_OPERATOR","->",142],["T_STRING","_addAmount",142],"(","-",["T_VARIABLE","$item",142],["T_OBJECT_OPERATOR","->",142],["T_STRING","getDiscountAmount",142],"(",")",")",";",["T_WHITESPACE","\n        ",142],["T_VARIABLE","$this",143],["T_OBJECT_OPERATOR","->",143],["T_STRING","_addBaseAmount",143],"(","-",["T_VARIABLE","$item",143],["T_OBJECT_OPERATOR","->",143],["T_STRING","getBaseDiscountAmount",143],"(",")",")",";",["T_WHITESPACE","\n        ",143],["T_RETURN","return",144],["T_WHITESPACE"," ",144],["T_VARIABLE","$this",144],";",["T_WHITESPACE","\n    ",144],"}",["T_WHITESPACE","\n\n    ",145],["T_DOC_COMMENT","\/**\n     * Add discount total information to address\n     *\n     * @param   Mage_Sales_Model_Quote_Address $address\n     * @return  Mage_SalesRule_Model_Quote_Discount\n     *\/",147],["T_WHITESPACE","\n    ",152],["T_PUBLIC","public",153],["T_WHITESPACE"," ",153],["T_FUNCTION","function",153],["T_WHITESPACE"," ",153],["T_STRING","fetch",153],"(",["T_STRING","Mage_Sales_Model_Quote_Address",153],["T_WHITESPACE"," ",153],["T_VARIABLE","$address",153],")",["T_WHITESPACE","\n    ",153],"{",["T_WHITESPACE","\n        ",154],["T_VARIABLE","$amount",155],["T_WHITESPACE"," ",155],"=",["T_WHITESPACE"," ",155],["T_VARIABLE","$address",155],["T_OBJECT_OPERATOR","->",155],["T_STRING","getDiscountAmount",155],"(",")",";",["T_WHITESPACE","\n\n        ",155],["T_IF","if",157],["T_WHITESPACE"," ",157],"(",["T_VARIABLE","$amount",157],["T_WHITESPACE"," ",157],["T_IS_NOT_EQUAL","!=",157],["T_WHITESPACE"," ",157],["T_LNUMBER","0",157],")",["T_WHITESPACE"," ",157],"{",["T_WHITESPACE","\n            ",157],["T_VARIABLE","$description",158],["T_WHITESPACE"," ",158],"=",["T_WHITESPACE"," ",158],["T_VARIABLE","$address",158],["T_OBJECT_OPERATOR","->",158],["T_STRING","getDiscountDescription",158],"(",")",";",["T_WHITESPACE","\n            ",158],["T_IF","if",159],["T_WHITESPACE"," ",159],"(",["T_STRING","strlen",159],"(",["T_VARIABLE","$description",159],")",")",["T_WHITESPACE"," ",159],"{",["T_WHITESPACE","\n                ",159],["T_VARIABLE","$title",160],["T_WHITESPACE"," ",160],"=",["T_WHITESPACE"," ",160],["T_STRING","Mage",160],["T_DOUBLE_COLON","::",160],["T_STRING","helper",160],"(",["T_CONSTANT_ENCAPSED_STRING","'sales'",160],")",["T_OBJECT_OPERATOR","->",160],["T_STRING","__",160],"(",["T_CONSTANT_ENCAPSED_STRING","'Discount (%s)'",160],",",["T_WHITESPACE"," ",160],["T_VARIABLE","$description",160],")",";",["T_WHITESPACE","\n            ",160],"}",["T_WHITESPACE"," ",161],["T_ELSE","else",161],["T_WHITESPACE"," ",161],"{",["T_WHITESPACE","\n                ",161],["T_VARIABLE","$title",162],["T_WHITESPACE"," ",162],"=",["T_WHITESPACE"," ",162],["T_STRING","Mage",162],["T_DOUBLE_COLON","::",162],["T_STRING","helper",162],"(",["T_CONSTANT_ENCAPSED_STRING","'sales'",162],")",["T_OBJECT_OPERATOR","->",162],["T_STRING","__",162],"(",["T_CONSTANT_ENCAPSED_STRING","'Discount'",162],")",";",["T_WHITESPACE","\n            ",162],"}",["T_WHITESPACE","\n            ",163],["T_VARIABLE","$address",164],["T_OBJECT_OPERATOR","->",164],["T_STRING","addTotal",164],"(",["T_ARRAY","array",164],"(",["T_WHITESPACE","\n                ",164],["T_CONSTANT_ENCAPSED_STRING","'code'",165],["T_WHITESPACE","  ",165],["T_DOUBLE_ARROW","=>",165],["T_WHITESPACE"," ",165],["T_VARIABLE","$this",165],["T_OBJECT_OPERATOR","->",165],["T_STRING","getCode",165],"(",")",",",["T_WHITESPACE","\n                ",165],["T_CONSTANT_ENCAPSED_STRING","'title'",166],["T_WHITESPACE"," ",166],["T_DOUBLE_ARROW","=>",166],["T_WHITESPACE"," ",166],["T_VARIABLE","$title",166],",",["T_WHITESPACE","\n                ",166],["T_CONSTANT_ENCAPSED_STRING","'value'",167],["T_WHITESPACE"," ",167],["T_DOUBLE_ARROW","=>",167],["T_WHITESPACE"," ",167],["T_VARIABLE","$amount",167],["T_WHITESPACE","\n            ",167],")",")",";",["T_WHITESPACE","\n        ",168],"}",["T_WHITESPACE","\n        ",169],["T_RETURN","return",170],["T_WHITESPACE"," ",170],["T_VARIABLE","$this",170],";",["T_WHITESPACE","\n    ",170],"}",["T_WHITESPACE","\n",171],"}",["T_WHITESPACE","\n",172]]
[["T_OPEN_TAG","<?php\n",1],["T_DOC_COMMENT","\/**\n * Magento\n *\n * NOTICE OF LICENSE\n *\n * This source file is subject to the Open Software License (OSL 3.0)\n * that is bundled with this package in the file LICENSE.txt.\n * It is also available through the world-wide-web at this URL:\n * http:\/\/opensource.org\/licenses\/osl-3.0.php\n * If you did not receive a copy of the license and are unable to\n * obtain it through the world-wide-web, please send an email\n * to license@magento.com so we can send you a copy immediately.\n *\n * DISCLAIMER\n *\n * Do not edit or add to this file if you wish to upgrade Magento to newer\n * versions in the future. If you wish to customize Magento for your\n * needs please refer to http:\/\/www.magento.com for more information.\n *\n * @category    Mage\n * @package     Mage_Widget\n * @copyright  Copyright (c) 2006-2016 X.commerce, Inc. and affiliates (http:\/\/www.magento.com)\n * @license    http:\/\/opensource.org\/licenses\/osl-3.0.php  Open Software License (OSL 3.0)\n *\/",2],["T_WHITESPACE","\n\n",25],["T_DOC_COMMENT","\/**\n * Widget Instance Model\n *\n * @method Mage_Widget_Model_Resource_Widget_Instance _getResource()\n * @method Mage_Widget_Model_Resource_Widget_Instance getResource()\n * @method string getTitle()\n * @method Mage_Widget_Model_Widget_Instance setTitle(string $value)\n * @method Mage_Widget_Model_Widget_Instance setStoreIds(string $value)\n * @method Mage_Widget_Model_Widget_Instance setWidgetParameters(string $value)\n * @method int getSortOrder()\n * @method Mage_Widget_Model_Widget_Instance setSortOrder(int $value)\n *\n * @category    Mage\n * @package     Mage_Widget\n * @author      Magento Core Team <core@magentocommerce.com>\n *\/",27],["T_WHITESPACE","\n",42],["T_CLASS","class",43],["T_WHITESPACE"," ",43],["T_STRING","Mage_Widget_Model_Widget_Instance",43],["T_WHITESPACE"," ",43],["T_EXTENDS","extends",43],["T_WHITESPACE"," ",43],["T_STRING","Mage_Core_Model_Abstract",43],["T_WHITESPACE","\n",43],"{",["T_WHITESPACE","\n    ",44],["T_CONST","const",45],["T_WHITESPACE"," ",45],["T_STRING","SPECIFIC_ENTITIES",45],["T_WHITESPACE"," ",45],"=",["T_WHITESPACE"," ",45],["T_CONSTANT_ENCAPSED_STRING","'specific'",45],";",["T_WHITESPACE","\n    ",45],["T_CONST","const",46],["T_WHITESPACE"," ",46],["T_STRING","ALL_ENTITIES",46],["T_WHITESPACE","      ",46],"=",["T_WHITESPACE"," ",46],["T_CONSTANT_ENCAPSED_STRING","'all'",46],";",["T_WHITESPACE","\n\n    ",46],["T_CONST","const",48],["T_WHITESPACE"," ",48],["T_STRING","DEFAULT_LAYOUT_HANDLE",48],["T_WHITESPACE","            ",48],"=",["T_WHITESPACE"," ",48],["T_CONSTANT_ENCAPSED_STRING","'default'",48],";",["T_WHITESPACE","\n    ",48],["T_CONST","const",49],["T_WHITESPACE"," ",49],["T_STRING","PRODUCT_LAYOUT_HANDLE",49],["T_WHITESPACE","            ",49],"=",["T_WHITESPACE"," ",49],["T_CONSTANT_ENCAPSED_STRING","'catalog_product_view'",49],";",["T_WHITESPACE","\n    ",49],["T_CONST","const",50],["T_WHITESPACE"," ",50],["T_STRING","SINGLE_PRODUCT_LAYOUT_HANLDE",50],["T_WHITESPACE","     ",50],"=",["T_WHITESPACE"," ",50],["T_CONSTANT_ENCAPSED_STRING","'PRODUCT_{{ID}}'",50],";",["T_WHITESPACE","\n    ",50],["T_CONST","const",51],["T_WHITESPACE"," ",51],["T_STRING","PRODUCT_TYPE_LAYOUT_HANDLE",51],["T_WHITESPACE","       ",51],"=",["T_WHITESPACE"," ",51],["T_CONSTANT_ENCAPSED_STRING","'PRODUCT_TYPE_{{TYPE}}'",51],";",["T_WHITESPACE","\n    ",51],["T_CONST","const",52],["T_WHITESPACE"," ",52],["T_STRING","ANCHOR_CATEGORY_LAYOUT_HANDLE",52],["T_WHITESPACE","    ",52],"=",["T_WHITESPACE"," ",52],["T_CONSTANT_ENCAPSED_STRING","'catalog_category_layered'",52],";",["T_WHITESPACE","\n    ",52],["T_CONST","const",53],["T_WHITESPACE"," ",53],["T_STRING","NOTANCHOR_CATEGORY_LAYOUT_HANDLE",53],["T_WHITESPACE"," ",53],"=",["T_WHITESPACE"," ",53],["T_CONSTANT_ENCAPSED_STRING","'catalog_category_default'",53],";",["T_WHITESPACE","\n    ",53],["T_CONST","const",54],["T_WHITESPACE"," ",54],["T_STRING","SINGLE_CATEGORY_LAYOUT_HANDLE",54],["T_WHITESPACE","    ",54],"=",["T_WHITESPACE"," ",54],["T_CONSTANT_ENCAPSED_STRING","'CATEGORY_{{ID}}'",54],";",["T_WHITESPACE","\n\n    ",54],["T_CONST","const",56],["T_WHITESPACE"," ",56],["T_STRING","XML_NODE_RELATED_CACHE",56],["T_WHITESPACE"," ",56],"=",["T_WHITESPACE"," ",56],["T_CONSTANT_ENCAPSED_STRING","'global\/widget\/related_cache_types'",56],";",["T_WHITESPACE","\n\n    ",56],["T_PROTECTED","protected",58],["T_WHITESPACE"," ",58],["T_VARIABLE","$_layoutHandles",58],["T_WHITESPACE"," ",58],"=",["T_WHITESPACE"," ",58],["T_ARRAY","array",58],"(",")",";",["T_WHITESPACE","\n\n    ",58],["T_PROTECTED","protected",60],["T_WHITESPACE"," ",60],["T_VARIABLE","$_specificEntitiesLayoutHandles",60],["T_WHITESPACE"," ",60],"=",["T_WHITESPACE"," ",60],["T_ARRAY","array",60],"(",")",";",["T_WHITESPACE","\n\n    ",60],["T_DOC_COMMENT","\/**\n     * @var Varien_Simplexml_Element\n     *\/",62],["T_WHITESPACE","\n    ",64],["T_PROTECTED","protected",65],["T_WHITESPACE"," ",65],["T_VARIABLE","$_widgetConfigXml",65],["T_WHITESPACE"," ",65],"=",["T_WHITESPACE"," ",65],["T_STRING","null",65],";",["T_WHITESPACE","\n\n    ",65],["T_DOC_COMMENT","\/**\n     * Prefix of model events names\n     *\n     * @var string\n     *\/",67],["T_WHITESPACE","\n    ",71],["T_PROTECTED","protected",72],["T_WHITESPACE"," ",72],["T_VARIABLE","$_eventPrefix",72],["T_WHITESPACE"," ",72],"=",["T_WHITESPACE"," ",72],["T_CONSTANT_ENCAPSED_STRING","'widget_widget_instance'",72],";",["T_WHITESPACE","\n\n    ",72],["T_DOC_COMMENT","\/**\n     * Internal Constructor\n     *\/",74],["T_WHITESPACE","\n    ",76],["T_PROTECTED","protected",77],["T_WHITESPACE"," ",77],["T_FUNCTION","function",77],["T_WHITESPACE"," ",77],["T_STRING","_construct",77],"(",")",["T_WHITESPACE","\n    ",77],"{",["T_WHITESPACE","\n        ",78],["T_VARIABLE","$this",79],["T_OBJECT_OPERATOR","->",79],["T_STRING","_cacheTag",79],["T_WHITESPACE"," ",79],"=",["T_WHITESPACE"," ",79],["T_CONSTANT_ENCAPSED_STRING","'widget_instance'",79],";",["T_WHITESPACE","\n        ",79],["T_STRING","parent",80],["T_DOUBLE_COLON","::",80],["T_STRING","_construct",80],"(",")",";",["T_WHITESPACE","\n        ",80],["T_VARIABLE","$this",81],["T_OBJECT_OPERATOR","->",81],["T_STRING","_init",81],"(",["T_CONSTANT_ENCAPSED_STRING","'widget\/widget_instance'",81],")",";",["T_WHITESPACE","\n        ",81],["T_VARIABLE","$this",82],["T_OBJECT_OPERATOR","->",82],["T_STRING","_layoutHandles",82],["T_WHITESPACE"," ",82],"=",["T_WHITESPACE"," ",82],["T_ARRAY","array",82],"(",["T_WHITESPACE","\n            ",82],["T_CONSTANT_ENCAPSED_STRING","'anchor_categories'",83],["T_WHITESPACE"," ",83],["T_DOUBLE_ARROW","=>",83],["T_WHITESPACE"," ",83],["T_STRING","self",83],["T_DOUBLE_COLON","::",83],["T_STRING","ANCHOR_CATEGORY_LAYOUT_HANDLE",83],",",["T_WHITESPACE","\n            ",83],["T_CONSTANT_ENCAPSED_STRING","'notanchor_categories'",84],["T_WHITESPACE"," ",84],["T_DOUBLE_ARROW","=>",84],["T_WHITESPACE"," ",84],["T_STRING","self",84],["T_DOUBLE_COLON","::",84],["T_STRING","NOTANCHOR_CATEGORY_LAYOUT_HANDLE",84],",",["T_WHITESPACE","\n            ",84],["T_CONSTANT_ENCAPSED_STRING","'all_products'",85],["T_WHITESPACE"," ",85],["T_DOUBLE_ARROW","=>",85],["T_WHITESPACE"," ",85],["T_STRING","self",85],["T_DOUBLE_COLON","::",85],["T_STRING","PRODUCT_LAYOUT_HANDLE",85],",",["T_WHITESPACE","\n            ",85],["T_CONSTANT_ENCAPSED_STRING","'all_pages'",86],["T_WHITESPACE"," ",86],["T_DOUBLE_ARROW","=>",86],["T_WHITESPACE"," ",86],["T_STRING","self",86],["T_DOUBLE_COLON","::",86],["T_STRING","DEFAULT_LAYOUT_HANDLE",86],["T_WHITESPACE","\n        ",86],")",";",["T_WHITESPACE","\n        ",87],["T_VARIABLE","$this",88],["T_OBJECT_OPERATOR","->",88],["T_STRING","_specificEntitiesLayoutHandles",88],["T_WHITESPACE"," ",88],"=",["T_WHITESPACE"," ",88],["T_ARRAY","array",88],"(",["T_WHITESPACE","\n            ",88],["T_CONSTANT_ENCAPSED_STRING","'anchor_categories'",89],["T_WHITESPACE"," ",89],["T_DOUBLE_ARROW","=>",89],["T_WHITESPACE"," ",89],["T_STRING","self",89],["T_DOUBLE_COLON","::",89],["T_STRING","SINGLE_CATEGORY_LAYOUT_HANDLE",89],",",["T_WHITESPACE","\n            ",89],["T_CONSTANT_ENCAPSED_STRING","'notanchor_categories'",90],["T_WHITESPACE"," ",90],["T_DOUBLE_ARROW","=>",90],["T_WHITESPACE"," ",90],["T_STRING","self",90],["T_DOUBLE_COLON","::",90],["T_STRING","SINGLE_CATEGORY_LAYOUT_HANDLE",90],",",["T_WHITESPACE","\n            ",90],["T_CONSTANT_ENCAPSED_STRING","'all_products'",91],["T_WHITESPACE"," ",91],["T_DOUBLE_ARROW","=>",91],["T_WHITESPACE"," ",91],["T_STRING","self",91],["T_DOUBLE_COLON","::",91],["T_STRING","SINGLE_PRODUCT_LAYOUT_HANLDE",91],",",["T_WHITESPACE","\n        ",91],")",";",["T_WHITESPACE","\n        ",92],["T_FOREACH","foreach",93],["T_WHITESPACE"," ",93],"(",["T_STRING","Mage_Catalog_Model_Product_Type",93],["T_DOUBLE_COLON","::",93],["T_STRING","getTypes",93],"(",")",["T_WHITESPACE"," ",93],["T_AS","as",93],["T_WHITESPACE"," ",93],["T_VARIABLE","$typeId",93],["T_WHITESPACE"," ",93],["T_DOUBLE_ARROW","=>",93],["T_WHITESPACE"," ",93],["T_VARIABLE","$type",93],")",["T_WHITESPACE"," ",93],"{",["T_WHITESPACE","\n            ",93],["T_VARIABLE","$layoutHandle",94],["T_WHITESPACE"," ",94],"=",["T_WHITESPACE"," ",94],["T_STRING","str_replace",94],"(",["T_CONSTANT_ENCAPSED_STRING","'{{TYPE}}'",94],",",["T_WHITESPACE"," ",94],["T_VARIABLE","$typeId",94],",",["T_WHITESPACE"," ",94],["T_STRING","self",94],["T_DOUBLE_COLON","::",94],["T_STRING","PRODUCT_TYPE_LAYOUT_HANDLE",94],")",";",["T_WHITESPACE","\n            ",94],["T_VARIABLE","$this",95],["T_OBJECT_OPERATOR","->",95],["T_STRING","_layoutHandles",95],"[",["T_VARIABLE","$typeId",95],["T_WHITESPACE"," ",95],".",["T_WHITESPACE"," ",95],["T_CONSTANT_ENCAPSED_STRING","'_products'",95],"]",["T_WHITESPACE"," ",95],"=",["T_WHITESPACE"," ",95],["T_VARIABLE","$layoutHandle",95],";",["T_WHITESPACE","\n            ",95],["T_VARIABLE","$this",96],["T_OBJECT_OPERATOR","->",96],["T_STRING","_specificEntitiesLayoutHandles",96],"[",["T_VARIABLE","$typeId",96],["T_WHITESPACE"," ",96],".",["T_WHITESPACE"," ",96],["T_CONSTANT_ENCAPSED_STRING","'_products'",96],"]",["T_WHITESPACE"," ",96],"=",["T_WHITESPACE"," ",96],["T_STRING","self",96],["T_DOUBLE_COLON","::",96],["T_STRING","SINGLE_PRODUCT_LAYOUT_HANLDE",96],";",["T_WHITESPACE","\n        ",96],"}",["T_WHITESPACE","\n    ",97],"}",["T_WHITESPACE","\n\n     ",98],["T_DOC_COMMENT","\/**\n     * Init mapping array of short fields to\n     * its full names\n     *\n     * @return Varien_Object\n     *\/",100],["T_WHITESPACE","\n    ",105],["T_PROTECTED","protected",106],["T_WHITESPACE"," ",106],["T_FUNCTION","function",106],["T_WHITESPACE"," ",106],["T_STRING","_initOldFieldsMap",106],"(",")",["T_WHITESPACE","\n    ",106],"{",["T_WHITESPACE","\n        ",107],["T_VARIABLE","$this",108],["T_OBJECT_OPERATOR","->",108],["T_STRING","_oldFieldsMap",108],["T_WHITESPACE"," ",108],"=",["T_WHITESPACE"," ",108],["T_ARRAY","array",108],"(",["T_WHITESPACE","\n            ",108],["T_CONSTANT_ENCAPSED_STRING","'type'",109],["T_WHITESPACE"," ",109],["T_DOUBLE_ARROW","=>",109],["T_WHITESPACE"," ",109],["T_CONSTANT_ENCAPSED_STRING","'instance_type'",109],",",["T_WHITESPACE","\n        ",109],")",";",["T_WHITESPACE","\n        ",110],["T_RETURN","return",111],["T_WHITESPACE"," ",111],["T_VARIABLE","$this",111],";",["T_WHITESPACE","\n    ",111],"}",["T_WHITESPACE","\n\n    ",112],["T_DOC_COMMENT","\/**\n     * Processing object before save data\n     *\n     * @return Mage_Widget_Model_Widget_Instance\n     *\/",114],["T_WHITESPACE","\n    ",118],["T_PROTECTED","protected",119],["T_WHITESPACE"," ",119],["T_FUNCTION","function",119],["T_WHITESPACE"," ",119],["T_STRING","_beforeSave",119],"(",")",["T_WHITESPACE","\n    ",119],"{",["T_WHITESPACE","\n        ",120],["T_VARIABLE","$pageGroupIds",121],["T_WHITESPACE"," ",121],"=",["T_WHITESPACE"," ",121],["T_ARRAY","array",121],"(",")",";",["T_WHITESPACE","\n        ",121],["T_VARIABLE","$tmpPageGroups",122],["T_WHITESPACE"," ",122],"=",["T_WHITESPACE"," ",122],["T_ARRAY","array",122],"(",")",";",["T_WHITESPACE","\n        ",122],["T_VARIABLE","$pageGroups",123],["T_WHITESPACE"," ",123],"=",["T_WHITESPACE"," ",123],["T_VARIABLE","$this",123],["T_OBJECT_OPERATOR","->",123],["T_STRING","getData",123],"(",["T_CONSTANT_ENCAPSED_STRING","'page_groups'",123],")",";",["T_WHITESPACE","\n        ",123],["T_IF","if",124],["T_WHITESPACE"," ",124],"(",["T_VARIABLE","$pageGroups",124],")",["T_WHITESPACE"," ",124],"{",["T_WHITESPACE","\n            ",124],["T_FOREACH","foreach",125],["T_WHITESPACE"," ",125],"(",["T_VARIABLE","$pageGroups",125],["T_WHITESPACE"," ",125],["T_AS","as",125],["T_WHITESPACE"," ",125],["T_VARIABLE","$pageGroup",125],")",["T_WHITESPACE"," ",125],"{",["T_WHITESPACE","\n                ",125],["T_IF","if",126],["T_WHITESPACE"," ",126],"(",["T_ISSET","isset",126],"(",["T_VARIABLE","$pageGroup",126],"[",["T_VARIABLE","$pageGroup",126],"[",["T_CONSTANT_ENCAPSED_STRING","'page_group'",126],"]","]",")",")",["T_WHITESPACE"," ",126],"{",["T_WHITESPACE","\n                    ",126],["T_VARIABLE","$pageGroupData",127],["T_WHITESPACE"," ",127],"=",["T_WHITESPACE"," ",127],["T_VARIABLE","$pageGroup",127],"[",["T_VARIABLE","$pageGroup",127],"[",["T_CONSTANT_ENCAPSED_STRING","'page_group'",127],"]","]",";",["T_WHITESPACE","\n                    ",127],["T_IF","if",128],["T_WHITESPACE"," ",128],"(",["T_VARIABLE","$pageGroupData",128],"[",["T_CONSTANT_ENCAPSED_STRING","'page_id'",128],"]",")",["T_WHITESPACE"," ",128],"{",["T_WHITESPACE","\n                        ",128],["T_VARIABLE","$pageGroupIds",129],"[","]",["T_WHITESPACE"," ",129],"=",["T_WHITESPACE"," ",129],["T_VARIABLE","$pageGroupData",129],"[",["T_CONSTANT_ENCAPSED_STRING","'page_id'",129],"]",";",["T_WHITESPACE","\n                    ",129],"}",["T_WHITESPACE","\n                    ",130],["T_IF","if",131],["T_WHITESPACE"," ",131],"(",["T_VARIABLE","$pageGroup",131],"[",["T_CONSTANT_ENCAPSED_STRING","'page_group'",131],"]",["T_WHITESPACE"," ",131],["T_IS_EQUAL","==",131],["T_WHITESPACE"," ",131],["T_CONSTANT_ENCAPSED_STRING","'pages'",131],")",["T_WHITESPACE"," ",131],"{",["T_WHITESPACE","\n                        ",131],["T_VARIABLE","$layoutHandle",132],["T_WHITESPACE"," ",132],"=",["T_WHITESPACE"," ",132],["T_VARIABLE","$pageGroupData",132],"[",["T_CONSTANT_ENCAPSED_STRING","'layout_handle'",132],"]",";",["T_WHITESPACE","\n                    ",132],"}",["T_WHITESPACE"," ",133],["T_ELSE","else",133],["T_WHITESPACE"," ",133],"{",["T_WHITESPACE","\n                        ",133],["T_VARIABLE","$layoutHandle",134],["T_WHITESPACE"," ",134],"=",["T_WHITESPACE"," ",134],["T_VARIABLE","$this",134],["T_OBJECT_OPERATOR","->",134],["T_STRING","_layoutHandles",134],"[",["T_VARIABLE","$pageGroup",134],"[",["T_CONSTANT_ENCAPSED_STRING","'page_group'",134],"]","]",";",["T_WHITESPACE","\n                    ",134],"}",["T_WHITESPACE","\n                    ",135],["T_IF","if",136],["T_WHITESPACE"," ",136],"(","!",["T_ISSET","isset",136],"(",["T_VARIABLE","$pageGroupData",136],"[",["T_CONSTANT_ENCAPSED_STRING","'template'",136],"]",")",")",["T_WHITESPACE"," ",136],"{",["T_WHITESPACE","\n                        ",136],["T_VARIABLE","$pageGroupData",137],"[",["T_CONSTANT_ENCAPSED_STRING","'template'",137],"]",["T_WHITESPACE"," ",137],"=",["T_WHITESPACE"," ",137],["T_CONSTANT_ENCAPSED_STRING","''",137],";",["T_WHITESPACE","\n                    ",137],"}",["T_WHITESPACE","\n                    ",138],["T_VARIABLE","$tmpPageGroup",139],["T_WHITESPACE"," ",139],"=",["T_WHITESPACE"," ",139],["T_ARRAY","array",139],"(",["T_WHITESPACE","\n                        ",139],["T_CONSTANT_ENCAPSED_STRING","'page_id'",140],["T_WHITESPACE"," ",140],["T_DOUBLE_ARROW","=>",140],["T_WHITESPACE"," ",140],["T_VARIABLE","$pageGroupData",140],"[",["T_CONSTANT_ENCAPSED_STRING","'page_id'",140],"]",",",["T_WHITESPACE","\n                        ",140],["T_CONSTANT_ENCAPSED_STRING","'group'",141],["T_WHITESPACE"," ",141],["T_DOUBLE_ARROW","=>",141],["T_WHITESPACE"," ",141],["T_VARIABLE","$pageGroup",141],"[",["T_CONSTANT_ENCAPSED_STRING","'page_group'",141],"]",",",["T_WHITESPACE","\n                        ",141],["T_CONSTANT_ENCAPSED_STRING","'layout_handle'",142],["T_WHITESPACE"," ",142],["T_DOUBLE_ARROW","=>",142],["T_WHITESPACE"," ",142],["T_VARIABLE","$layoutHandle",142],",",["T_WHITESPACE","\n                        ",142],["T_CONSTANT_ENCAPSED_STRING","'for'",143],["T_WHITESPACE"," ",143],["T_DOUBLE_ARROW","=>",143],["T_WHITESPACE"," ",143],["T_VARIABLE","$pageGroupData",143],"[",["T_CONSTANT_ENCAPSED_STRING","'for'",143],"]",",",["T_WHITESPACE","\n                        ",143],["T_CONSTANT_ENCAPSED_STRING","'block_reference'",144],["T_WHITESPACE"," ",144],["T_DOUBLE_ARROW","=>",144],["T_WHITESPACE"," ",144],["T_VARIABLE","$pageGroupData",144],"[",["T_CONSTANT_ENCAPSED_STRING","'block'",144],"]",",",["T_WHITESPACE","\n                        ",144],["T_CONSTANT_ENCAPSED_STRING","'entities'",145],["T_WHITESPACE"," ",145],["T_DOUBLE_ARROW","=>",145],["T_WHITESPACE"," ",145],["T_CONSTANT_ENCAPSED_STRING","''",145],",",["T_WHITESPACE","\n                        ",145],["T_CONSTANT_ENCAPSED_STRING","'layout_handle_updates'",146],["T_WHITESPACE"," ",146],["T_DOUBLE_ARROW","=>",146],["T_WHITESPACE"," ",146],["T_ARRAY","array",146],"(",["T_VARIABLE","$layoutHandle",146],")",",",["T_WHITESPACE","\n                        ",146],["T_CONSTANT_ENCAPSED_STRING","'template'",147],["T_WHITESPACE"," ",147],["T_DOUBLE_ARROW","=>",147],["T_WHITESPACE"," ",147],["T_VARIABLE","$pageGroupData",147],"[",["T_CONSTANT_ENCAPSED_STRING","'template'",147],"]","?",["T_VARIABLE","$pageGroupData",147],"[",["T_CONSTANT_ENCAPSED_STRING","'template'",147],"]",":",["T_CONSTANT_ENCAPSED_STRING","''",147],["T_WHITESPACE","\n                    ",147],")",";",["T_WHITESPACE","\n                    ",148],["T_IF","if",149],["T_WHITESPACE"," ",149],"(",["T_VARIABLE","$pageGroupData",149],"[",["T_CONSTANT_ENCAPSED_STRING","'for'",149],"]",["T_WHITESPACE"," ",149],["T_IS_EQUAL","==",149],["T_WHITESPACE"," ",149],["T_STRING","self",149],["T_DOUBLE_COLON","::",149],["T_STRING","SPECIFIC_ENTITIES",149],")",["T_WHITESPACE"," ",149],"{",["T_WHITESPACE","\n                        ",149],["T_VARIABLE","$layoutHandleUpdates",150],["T_WHITESPACE"," ",150],"=",["T_WHITESPACE"," ",150],["T_ARRAY","array",150],"(",")",";",["T_WHITESPACE","\n                        ",150],["T_FOREACH","foreach",151],["T_WHITESPACE"," ",151],"(",["T_STRING","explode",151],"(",["T_CONSTANT_ENCAPSED_STRING","','",151],",",["T_WHITESPACE"," ",151],["T_VARIABLE","$pageGroupData",151],"[",["T_CONSTANT_ENCAPSED_STRING","'entities'",151],"]",")",["T_WHITESPACE"," ",151],["T_AS","as",151],["T_WHITESPACE"," ",151],["T_VARIABLE","$entity",151],")",["T_WHITESPACE"," ",151],"{",["T_WHITESPACE","\n                            ",151],["T_VARIABLE","$layoutHandleUpdates",152],"[","]",["T_WHITESPACE"," ",152],"=",["T_WHITESPACE"," ",152],["T_STRING","str_replace",152],"(",["T_CONSTANT_ENCAPSED_STRING","'{{ID}}'",152],",",["T_WHITESPACE"," ",152],["T_VARIABLE","$entity",152],",",["T_WHITESPACE","\n                                ",152],["T_VARIABLE","$this",153],["T_OBJECT_OPERATOR","->",153],["T_STRING","_specificEntitiesLayoutHandles",153],"[",["T_VARIABLE","$pageGroup",153],"[",["T_CONSTANT_ENCAPSED_STRING","'page_group'",153],"]","]",")",";",["T_WHITESPACE","\n                        ",153],"}",["T_WHITESPACE","\n                        ",154],["T_VARIABLE","$tmpPageGroup",155],"[",["T_CONSTANT_ENCAPSED_STRING","'entities'",155],"]",["T_WHITESPACE"," ",155],"=",["T_WHITESPACE"," ",155],["T_VARIABLE","$pageGroupData",155],"[",["T_CONSTANT_ENCAPSED_STRING","'entities'",155],"]",";",["T_WHITESPACE","\n                        ",155],["T_VARIABLE","$tmpPageGroup",156],"[",["T_CONSTANT_ENCAPSED_STRING","'layout_handle_updates'",156],"]",["T_WHITESPACE"," ",156],"=",["T_WHITESPACE"," ",156],["T_VARIABLE","$layoutHandleUpdates",156],";",["T_WHITESPACE","\n                    ",156],"}",["T_WHITESPACE","\n                    ",157],["T_VARIABLE","$tmpPageGroups",158],"[","]",["T_WHITESPACE"," ",158],"=",["T_WHITESPACE"," ",158],["T_VARIABLE","$tmpPageGroup",158],";",["T_WHITESPACE","\n                ",158],"}",["T_WHITESPACE","\n            ",159],"}",["T_WHITESPACE","\n        ",160],"}",["T_WHITESPACE","\n        ",161],["T_IF","if",162],["T_WHITESPACE"," ",162],"(",["T_STRING","is_array",162],"(",["T_VARIABLE","$this",162],["T_OBJECT_OPERATOR","->",162],["T_STRING","getData",162],"(",["T_CONSTANT_ENCAPSED_STRING","'store_ids'",162],")",")",")",["T_WHITESPACE"," ",162],"{",["T_WHITESPACE","\n            ",162],["T_VARIABLE","$this",163],["T_OBJECT_OPERATOR","->",163],["T_STRING","setData",163],"(",["T_CONSTANT_ENCAPSED_STRING","'store_ids'",163],",",["T_WHITESPACE"," ",163],["T_STRING","implode",163],"(",["T_CONSTANT_ENCAPSED_STRING","','",163],",",["T_WHITESPACE"," ",163],["T_VARIABLE","$this",163],["T_OBJECT_OPERATOR","->",163],["T_STRING","getData",163],"(",["T_CONSTANT_ENCAPSED_STRING","'store_ids'",163],")",")",")",";",["T_WHITESPACE","\n        ",163],"}",["T_WHITESPACE","\n        ",164],["T_IF","if",165],["T_WHITESPACE"," ",165],"(",["T_STRING","is_array",165],"(",["T_VARIABLE","$this",165],["T_OBJECT_OPERATOR","->",165],["T_STRING","getData",165],"(",["T_CONSTANT_ENCAPSED_STRING","'widget_parameters'",165],")",")",")",["T_WHITESPACE"," ",165],"{",["T_WHITESPACE","\n            ",165],["T_VARIABLE","$this",166],["T_OBJECT_OPERATOR","->",166],["T_STRING","setData",166],"(",["T_CONSTANT_ENCAPSED_STRING","'widget_parameters'",166],",",["T_WHITESPACE"," ",166],["T_STRING","serialize",166],"(",["T_VARIABLE","$this",166],["T_OBJECT_OPERATOR","->",166],["T_STRING","getData",166],"(",["T_CONSTANT_ENCAPSED_STRING","'widget_parameters'",166],")",")",")",";",["T_WHITESPACE","\n        ",166],"}",["T_WHITESPACE","\n        ",167],["T_VARIABLE","$this",168],["T_OBJECT_OPERATOR","->",168],["T_STRING","setData",168],"(",["T_CONSTANT_ENCAPSED_STRING","'page_groups'",168],",",["T_WHITESPACE"," ",168],["T_VARIABLE","$tmpPageGroups",168],")",";",["T_WHITESPACE","\n        ",168],["T_VARIABLE","$this",169],["T_OBJECT_OPERATOR","->",169],["T_STRING","setData",169],"(",["T_CONSTANT_ENCAPSED_STRING","'page_group_ids'",169],",",["T_WHITESPACE"," ",169],["T_VARIABLE","$pageGroupIds",169],")",";",["T_WHITESPACE","\n\n        ",169],["T_RETURN","return",171],["T_WHITESPACE"," ",171],["T_STRING","parent",171],["T_DOUBLE_COLON","::",171],["T_STRING","_beforeSave",171],"(",")",";",["T_WHITESPACE","\n    ",171],"}",["T_WHITESPACE","\n\n    ",172],["T_DOC_COMMENT","\/**\n     * Validate widget instance data\n     *\n     * @return string|boolean\n     *\/",174],["T_WHITESPACE","\n    ",178],["T_PUBLIC","public",179],["T_WHITESPACE"," ",179],["T_FUNCTION","function",179],["T_WHITESPACE"," ",179],["T_STRING","validate",179],"(",")",["T_WHITESPACE","\n    ",179],"{",["T_WHITESPACE","\n        ",180],["T_IF","if",181],["T_WHITESPACE"," ",181],"(",["T_VARIABLE","$this",181],["T_OBJECT_OPERATOR","->",181],["T_STRING","isCompleteToCreate",181],"(",")",")",["T_WHITESPACE"," ",181],"{",["T_WHITESPACE","\n            ",181],["T_RETURN","return",182],["T_WHITESPACE"," ",182],["T_STRING","true",182],";",["T_WHITESPACE","\n        ",182],"}",["T_WHITESPACE","\n        ",183],["T_RETURN","return",184],["T_WHITESPACE"," ",184],["T_STRING","Mage",184],["T_DOUBLE_COLON","::",184],["T_STRING","helper",184],"(",["T_CONSTANT_ENCAPSED_STRING","'widget'",184],")",["T_OBJECT_OPERATOR","->",184],["T_STRING","__",184],"(",["T_CONSTANT_ENCAPSED_STRING","'Widget instance is not full complete to create.'",184],")",";",["T_WHITESPACE","\n    ",184],"}",["T_WHITESPACE","\n\n    ",185],["T_DOC_COMMENT","\/**\n     * Check if widget instance has required data (other data depends on it)\n     *\n     * @return boolean\n     *\/",187],["T_WHITESPACE","\n    ",191],["T_PUBLIC","public",192],["T_WHITESPACE"," ",192],["T_FUNCTION","function",192],["T_WHITESPACE"," ",192],["T_STRING","isCompleteToCreate",192],"(",")",["T_WHITESPACE","\n    ",192],"{",["T_WHITESPACE","\n        ",193],["T_RETURN","return",194],["T_WHITESPACE"," ",194],["T_BOOL_CAST","(bool)",194],"(",["T_VARIABLE","$this",194],["T_OBJECT_OPERATOR","->",194],["T_STRING","getType",194],"(",")",["T_WHITESPACE"," ",194],["T_BOOLEAN_AND","&&",194],["T_WHITESPACE"," ",194],["T_VARIABLE","$this",194],["T_OBJECT_OPERATOR","->",194],["T_STRING","getPackageTheme",194],"(",")",")",";",["T_WHITESPACE","\n    ",194],"}",["T_WHITESPACE","\n\n    ",195],["T_DOC_COMMENT","\/**\n     * Setter\n     * Prepare widget type\n     *\n     * @param string $type\n     * @return Mage_Widget_Model_Widget_Instance\n     *\/",197],["T_WHITESPACE","\n    ",203],["T_PUBLIC","public",204],["T_WHITESPACE"," ",204],["T_FUNCTION","function",204],["T_WHITESPACE"," ",204],["T_STRING","setType",204],"(",["T_VARIABLE","$type",204],")",["T_WHITESPACE","\n    ",204],"{",["T_WHITESPACE","\n        ",205],["T_VARIABLE","$this",206],["T_OBJECT_OPERATOR","->",206],["T_STRING","setData",206],"(",["T_CONSTANT_ENCAPSED_STRING","'type'",206],",",["T_WHITESPACE"," ",206],["T_VARIABLE","$type",206],")",";",["T_WHITESPACE","\n        ",206],["T_VARIABLE","$this",207],["T_OBJECT_OPERATOR","->",207],["T_STRING","_prepareType",207],"(",")",";",["T_WHITESPACE","\n        ",207],["T_RETURN","return",208],["T_WHITESPACE"," ",208],["T_VARIABLE","$this",208],";",["T_WHITESPACE","\n    ",208],"}",["T_WHITESPACE","\n\n    ",209],["T_DOC_COMMENT","\/**\n     * Getter\n     * Prepare widget type\n     *\n     * @return string\n     *\/",211],["T_WHITESPACE","\n    ",216],["T_PUBLIC","public",217],["T_WHITESPACE"," ",217],["T_FUNCTION","function",217],["T_WHITESPACE"," ",217],["T_STRING","getType",217],"(",")",["T_WHITESPACE","\n    ",217],"{",["T_WHITESPACE","\n        ",218],["T_VARIABLE","$this",219],["T_OBJECT_OPERATOR","->",219],["T_STRING","_prepareType",219],"(",")",";",["T_WHITESPACE","\n        ",219],["T_RETURN","return",220],["T_WHITESPACE"," ",220],["T_VARIABLE","$this",220],["T_OBJECT_OPERATOR","->",220],["T_STRING","_getData",220],"(",["T_CONSTANT_ENCAPSED_STRING","'type'",220],")",";",["T_WHITESPACE","\n    ",220],"}",["T_WHITESPACE","\n\n    ",221],["T_DOC_COMMENT","\/**\n     * Replace '-' to '\/', if was passed from request(GET request)\n     *\n     * @return Mage_Widget_Model_Widget_Instance\n     *\/",223],["T_WHITESPACE","\n    ",227],["T_PROTECTED","protected",228],["T_WHITESPACE"," ",228],["T_FUNCTION","function",228],["T_WHITESPACE"," ",228],["T_STRING","_prepareType",228],"(",")",["T_WHITESPACE","\n    ",228],"{",["T_WHITESPACE","\n        ",229],["T_IF","if",230],["T_WHITESPACE"," ",230],"(",["T_STRING","strpos",230],"(",["T_VARIABLE","$this",230],["T_OBJECT_OPERATOR","->",230],["T_STRING","_getData",230],"(",["T_CONSTANT_ENCAPSED_STRING","'type'",230],")",",",["T_WHITESPACE"," ",230],["T_CONSTANT_ENCAPSED_STRING","'-'",230],")",["T_WHITESPACE"," ",230],["T_IS_GREATER_OR_EQUAL",">=",230],["T_WHITESPACE"," ",230],["T_LNUMBER","0",230],")",["T_WHITESPACE"," ",230],"{",["T_WHITESPACE","\n            ",230],["T_VARIABLE","$this",231],["T_OBJECT_OPERATOR","->",231],["T_STRING","setData",231],"(",["T_CONSTANT_ENCAPSED_STRING","'type'",231],",",["T_WHITESPACE"," ",231],["T_STRING","str_replace",231],"(",["T_CONSTANT_ENCAPSED_STRING","'-'",231],",",["T_WHITESPACE"," ",231],["T_CONSTANT_ENCAPSED_STRING","'\/'",231],",",["T_WHITESPACE"," ",231],["T_VARIABLE","$this",231],["T_OBJECT_OPERATOR","->",231],["T_STRING","_getData",231],"(",["T_CONSTANT_ENCAPSED_STRING","'type'",231],")",")",")",";",["T_WHITESPACE","\n        ",231],"}",["T_WHITESPACE","\n        ",232],["T_RETURN","return",233],["T_WHITESPACE"," ",233],["T_VARIABLE","$this",233],";",["T_WHITESPACE","\n    ",233],"}",["T_WHITESPACE","\n\n    ",234],["T_DOC_COMMENT","\/**\n     * Setter\n     * Prepare widget package theme\n     *\n     * @param string $packageTheme\n     * @return Mage_Widget_Model_Widget_Instance\n     *\/",236],["T_WHITESPACE","\n    ",242],["T_PUBLIC","public",243],["T_WHITESPACE"," ",243],["T_FUNCTION","function",243],["T_WHITESPACE"," ",243],["T_STRING","setPackageTheme",243],"(",["T_VARIABLE","$packageTheme",243],")",["T_WHITESPACE","\n    ",243],"{",["T_WHITESPACE","\n        ",244],["T_VARIABLE","$this",245],["T_OBJECT_OPERATOR","->",245],["T_STRING","setData",245],"(",["T_CONSTANT_ENCAPSED_STRING","'package_theme'",245],",",["T_WHITESPACE"," ",245],["T_VARIABLE","$packageTheme",245],")",";",["T_WHITESPACE","\n        ",245],["T_RETURN","return",246],["T_WHITESPACE"," ",246],["T_VARIABLE","$this",246],";",["T_WHITESPACE","\n    ",246],"}",["T_WHITESPACE","\n\n    ",247],["T_DOC_COMMENT","\/**\n     * Getter\n     * Prepare widget package theme\n     *\n     * @return string\n     *\/",249],["T_WHITESPACE","\n    ",254],["T_PUBLIC","public",255],["T_WHITESPACE"," ",255],["T_FUNCTION","function",255],["T_WHITESPACE"," ",255],["T_STRING","getPackageTheme",255],"(",")",["T_WHITESPACE","\n    ",255],"{",["T_WHITESPACE","\n        ",256],["T_RETURN","return",257],["T_WHITESPACE"," ",257],["T_VARIABLE","$this",257],["T_OBJECT_OPERATOR","->",257],["T_STRING","_getData",257],"(",["T_CONSTANT_ENCAPSED_STRING","'package_theme'",257],")",";",["T_WHITESPACE","\n    ",257],"}",["T_WHITESPACE","\n\n    ",258],["T_DOC_COMMENT","\/**\n     * Replace '_' to '\/', if was set from request(GET request)\n     *\n     * @deprecated after 1.6.1.0-alpha1\n     *\n     * @return Mage_Widget_Model_Widget_Instance\n     *\/",260],["T_WHITESPACE","\n    ",266],["T_PROTECTED","protected",267],["T_WHITESPACE"," ",267],["T_FUNCTION","function",267],["T_WHITESPACE"," ",267],["T_STRING","_preparePackageTheme",267],"(",")",["T_WHITESPACE","\n    ",267],"{",["T_WHITESPACE","\n        ",268],["T_RETURN","return",269],["T_WHITESPACE"," ",269],["T_VARIABLE","$this",269],";",["T_WHITESPACE","\n    ",269],"}",["T_WHITESPACE","\n\n    ",270],["T_DOC_COMMENT","\/**\n     * Getter.\n     * If not set return default\n     *\n     * @return string\n     *\/",272],["T_WHITESPACE","\n    ",277],["T_PUBLIC","public",278],["T_WHITESPACE"," ",278],["T_FUNCTION","function",278],["T_WHITESPACE"," ",278],["T_STRING","getArea",278],"(",")",["T_WHITESPACE","\n    ",278],"{",["T_WHITESPACE","\n        ",279],["T_IF","if",280],["T_WHITESPACE"," ",280],"(","!",["T_VARIABLE","$this",280],["T_OBJECT_OPERATOR","->",280],["T_STRING","_getData",280],"(",["T_CONSTANT_ENCAPSED_STRING","'area'",280],")",")",["T_WHITESPACE"," ",280],"{",["T_WHITESPACE","\n            ",280],["T_RETURN","return",281],["T_WHITESPACE"," ",281],["T_STRING","Mage_Core_Model_Design_Package",281],["T_DOUBLE_COLON","::",281],["T_STRING","DEFAULT_AREA",281],";",["T_WHITESPACE","\n        ",281],"}",["T_WHITESPACE","\n        ",282],["T_RETURN","return",283],["T_WHITESPACE"," ",283],["T_VARIABLE","$this",283],["T_OBJECT_OPERATOR","->",283],["T_STRING","_getData",283],"(",["T_CONSTANT_ENCAPSED_STRING","'area'",283],")",";",["T_WHITESPACE","\n    ",283],"}",["T_WHITESPACE","\n\n    ",284],["T_DOC_COMMENT","\/**\n     * Getter\n     *\n     * @return string\n     *\/",286],["T_WHITESPACE","\n    ",290],["T_PUBLIC","public",291],["T_WHITESPACE"," ",291],["T_FUNCTION","function",291],["T_WHITESPACE"," ",291],["T_STRING","getPackage",291],"(",")",["T_WHITESPACE","\n    ",291],"{",["T_WHITESPACE","\n        ",292],["T_IF","if",293],["T_WHITESPACE"," ",293],"(","!",["T_VARIABLE","$this",293],["T_OBJECT_OPERATOR","->",293],["T_STRING","_getData",293],"(",["T_CONSTANT_ENCAPSED_STRING","'package'",293],")",")",["T_WHITESPACE"," ",293],"{",["T_WHITESPACE","\n            ",293],["T_VARIABLE","$this",294],["T_OBJECT_OPERATOR","->",294],["T_STRING","_parsePackageTheme",294],"(",")",";",["T_WHITESPACE","\n        ",294],"}",["T_WHITESPACE","\n        ",295],["T_RETURN","return",296],["T_WHITESPACE"," ",296],["T_VARIABLE","$this",296],["T_OBJECT_OPERATOR","->",296],["T_STRING","_getData",296],"(",["T_CONSTANT_ENCAPSED_STRING","'package'",296],")",";",["T_WHITESPACE","\n    ",296],"}",["T_WHITESPACE","\n\n    ",297],["T_DOC_COMMENT","\/**\n     * Getter\n     *\n     * @return string\n     *\/",299],["T_WHITESPACE","\n    ",303],["T_PUBLIC","public",304],["T_WHITESPACE"," ",304],["T_FUNCTION","function",304],["T_WHITESPACE"," ",304],["T_STRING","getTheme",304],"(",")",["T_WHITESPACE","\n    ",304],"{",["T_WHITESPACE","\n        ",305],["T_IF","if",306],["T_WHITESPACE"," ",306],"(","!",["T_VARIABLE","$this",306],["T_OBJECT_OPERATOR","->",306],["T_STRING","_getData",306],"(",["T_CONSTANT_ENCAPSED_STRING","'theme'",306],")",")",["T_WHITESPACE"," ",306],"{",["T_WHITESPACE","\n            ",306],["T_VARIABLE","$this",307],["T_OBJECT_OPERATOR","->",307],["T_STRING","_parsePackageTheme",307],"(",")",";",["T_WHITESPACE","\n        ",307],"}",["T_WHITESPACE","\n        ",308],["T_RETURN","return",309],["T_WHITESPACE"," ",309],["T_VARIABLE","$this",309],["T_OBJECT_OPERATOR","->",309],["T_STRING","_getData",309],"(",["T_CONSTANT_ENCAPSED_STRING","'theme'",309],")",";",["T_WHITESPACE","\n    ",309],"}",["T_WHITESPACE","\n\n    ",310],["T_DOC_COMMENT","\/**\n     * Parse packageTheme and set parsed package and theme\n     *\n     * @return Mage_Widget_Model_Widget_Instance\n     *\/",312],["T_WHITESPACE","\n    ",316],["T_PROTECTED","protected",317],["T_WHITESPACE"," ",317],["T_FUNCTION","function",317],["T_WHITESPACE"," ",317],["T_STRING","_parsePackageTheme",317],"(",")",["T_WHITESPACE","\n    ",317],"{",["T_WHITESPACE","\n        ",318],["T_IF","if",319],["T_WHITESPACE"," ",319],"(",["T_VARIABLE","$this",319],["T_OBJECT_OPERATOR","->",319],["T_STRING","getPackageTheme",319],"(",")",["T_WHITESPACE"," ",319],["T_BOOLEAN_AND","&&",319],["T_WHITESPACE"," ",319],["T_STRING","strpos",319],"(",["T_VARIABLE","$this",319],["T_OBJECT_OPERATOR","->",319],["T_STRING","getPackageTheme",319],"(",")",",",["T_WHITESPACE"," ",319],["T_CONSTANT_ENCAPSED_STRING","'\/'",319],")",")",["T_WHITESPACE"," ",319],"{",["T_WHITESPACE","\n            ",319],["T_LIST","list",320],"(",["T_VARIABLE","$package",320],",",["T_WHITESPACE"," ",320],["T_VARIABLE","$theme",320],")",["T_WHITESPACE"," ",320],"=",["T_WHITESPACE"," ",320],["T_STRING","explode",320],"(",["T_CONSTANT_ENCAPSED_STRING","'\/'",320],",",["T_WHITESPACE"," ",320],["T_VARIABLE","$this",320],["T_OBJECT_OPERATOR","->",320],["T_STRING","getPackageTheme",320],"(",")",")",";",["T_WHITESPACE","\n            ",320],["T_VARIABLE","$this",321],["T_OBJECT_OPERATOR","->",321],["T_STRING","setData",321],"(",["T_CONSTANT_ENCAPSED_STRING","'package'",321],",",["T_WHITESPACE"," ",321],["T_VARIABLE","$package",321],")",";",["T_WHITESPACE","\n            ",321],["T_VARIABLE","$this",322],["T_OBJECT_OPERATOR","->",322],["T_STRING","setData",322],"(",["T_CONSTANT_ENCAPSED_STRING","'theme'",322],",",["T_WHITESPACE"," ",322],["T_VARIABLE","$theme",322],")",";",["T_WHITESPACE","\n        ",322],"}",["T_WHITESPACE","\n        ",323],["T_RETURN","return",324],["T_WHITESPACE"," ",324],["T_VARIABLE","$this",324],";",["T_WHITESPACE","\n    ",324],"}",["T_WHITESPACE","\n\n    ",325],["T_DOC_COMMENT","\/**\n     * Getter\n     * Explode to array if string setted\n     *\n     * @return array\n     *\/",327],["T_WHITESPACE","\n    ",332],["T_PUBLIC","public",333],["T_WHITESPACE"," ",333],["T_FUNCTION","function",333],["T_WHITESPACE"," ",333],["T_STRING","getStoreIds",333],"(",")",["T_WHITESPACE","\n    ",333],"{",["T_WHITESPACE","\n        ",334],["T_IF","if",335],["T_WHITESPACE"," ",335],"(",["T_STRING","is_string",335],"(",["T_VARIABLE","$this",335],["T_OBJECT_OPERATOR","->",335],["T_STRING","getData",335],"(",["T_CONSTANT_ENCAPSED_STRING","'store_ids'",335],")",")",")",["T_WHITESPACE"," ",335],"{",["T_WHITESPACE","\n            ",335],["T_RETURN","return",336],["T_WHITESPACE"," ",336],["T_STRING","explode",336],"(",["T_CONSTANT_ENCAPSED_STRING","','",336],",",["T_WHITESPACE"," ",336],["T_VARIABLE","$this",336],["T_OBJECT_OPERATOR","->",336],["T_STRING","getData",336],"(",["T_CONSTANT_ENCAPSED_STRING","'store_ids'",336],")",")",";",["T_WHITESPACE","\n        ",336],"}",["T_WHITESPACE","\n        ",337],["T_RETURN","return",338],["T_WHITESPACE"," ",338],["T_VARIABLE","$this",338],["T_OBJECT_OPERATOR","->",338],["T_STRING","getData",338],"(",["T_CONSTANT_ENCAPSED_STRING","'store_ids'",338],")",";",["T_WHITESPACE","\n    ",338],"}",["T_WHITESPACE","\n\n    ",339],["T_DOC_COMMENT","\/**\n     * Getter\n     * Unserialize if serialized string setted\n     *\n     * @return array\n     *\/",341],["T_WHITESPACE","\n    ",346],["T_PUBLIC","public",347],["T_WHITESPACE"," ",347],["T_FUNCTION","function",347],["T_WHITESPACE"," ",347],["T_STRING","getWidgetParameters",347],"(",")",["T_WHITESPACE","\n    ",347],"{",["T_WHITESPACE","\n        ",348],["T_IF","if",349],["T_WHITESPACE"," ",349],"(",["T_STRING","is_string",349],"(",["T_VARIABLE","$this",349],["T_OBJECT_OPERATOR","->",349],["T_STRING","getData",349],"(",["T_CONSTANT_ENCAPSED_STRING","'widget_parameters'",349],")",")",")",["T_WHITESPACE"," ",349],"{",["T_WHITESPACE","\n            ",349],["T_RETURN","return",350],["T_WHITESPACE"," ",350],["T_STRING","unserialize",350],"(",["T_VARIABLE","$this",350],["T_OBJECT_OPERATOR","->",350],["T_STRING","getData",350],"(",["T_CONSTANT_ENCAPSED_STRING","'widget_parameters'",350],")",")",";",["T_WHITESPACE","\n        ",350],"}",["T_WHITESPACE","\n        ",351],["T_RETURN","return",352],["T_WHITESPACE"," ",352],"(",["T_STRING","is_array",352],"(",["T_VARIABLE","$this",352],["T_OBJECT_OPERATOR","->",352],["T_STRING","getData",352],"(",["T_CONSTANT_ENCAPSED_STRING","'widget_parameters'",352],")",")",")",["T_WHITESPACE"," ",352],"?",["T_WHITESPACE"," ",352],["T_VARIABLE","$this",352],["T_OBJECT_OPERATOR","->",352],["T_STRING","getData",352],"(",["T_CONSTANT_ENCAPSED_STRING","'widget_parameters'",352],")",["T_WHITESPACE"," ",352],":",["T_WHITESPACE"," ",352],["T_ARRAY","array",352],"(",")",";",["T_WHITESPACE","\n    ",352],"}",["T_WHITESPACE","\n\n    ",353],["T_DOC_COMMENT","\/**\n     * Retrieve option array of widget types\n     *\n     * @return array\n     *\/",355],["T_WHITESPACE","\n    ",359],["T_PUBLIC","public",360],["T_WHITESPACE"," ",360],["T_FUNCTION","function",360],["T_WHITESPACE"," ",360],["T_STRING","getWidgetsOptionArray",360],"(",")",["T_WHITESPACE","\n    ",360],"{",["T_WHITESPACE","\n        ",361],["T_VARIABLE","$widgets",362],["T_WHITESPACE"," ",362],"=",["T_WHITESPACE"," ",362],["T_ARRAY","array",362],"(",")",";",["T_WHITESPACE","\n        ",362],["T_VARIABLE","$widgetsArr",363],["T_WHITESPACE"," ",363],"=",["T_WHITESPACE"," ",363],["T_STRING","Mage",363],["T_DOUBLE_COLON","::",363],["T_STRING","getSingleton",363],"(",["T_CONSTANT_ENCAPSED_STRING","'widget\/widget'",363],")",["T_OBJECT_OPERATOR","->",363],["T_STRING","getWidgetsArray",363],"(",")",";",["T_WHITESPACE","\n        ",363],["T_FOREACH","foreach",364],["T_WHITESPACE"," ",364],"(",["T_VARIABLE","$widgetsArr",364],["T_WHITESPACE"," ",364],["T_AS","as",364],["T_WHITESPACE"," ",364],["T_VARIABLE","$widget",364],")",["T_WHITESPACE"," ",364],"{",["T_WHITESPACE","\n            ",364],["T_VARIABLE","$widgets",365],"[","]",["T_WHITESPACE"," ",365],"=",["T_WHITESPACE"," ",365],["T_ARRAY","array",365],"(",["T_WHITESPACE","\n                ",365],["T_CONSTANT_ENCAPSED_STRING","'value'",366],["T_WHITESPACE"," ",366],["T_DOUBLE_ARROW","=>",366],["T_WHITESPACE"," ",366],["T_VARIABLE","$widget",366],"[",["T_CONSTANT_ENCAPSED_STRING","'type'",366],"]",",",["T_WHITESPACE","\n                ",366],["T_CONSTANT_ENCAPSED_STRING","'label'",367],["T_WHITESPACE"," ",367],["T_DOUBLE_ARROW","=>",367],["T_WHITESPACE"," ",367],["T_VARIABLE","$widget",367],"[",["T_CONSTANT_ENCAPSED_STRING","'name'",367],"]",["T_WHITESPACE","\n            ",367],")",";",["T_WHITESPACE","\n        ",368],"}",["T_WHITESPACE","\n        ",369],["T_RETURN","return",370],["T_WHITESPACE"," ",370],["T_VARIABLE","$widgets",370],";",["T_WHITESPACE","\n    ",370],"}",["T_WHITESPACE","\n\n    ",371],["T_DOC_COMMENT","\/**\n     * Load widget XML config and merge with theme widget config\n     *\n     * @return Varien_Simplexml_Element|null\n     *\/",373],["T_WHITESPACE","\n    ",377],["T_PUBLIC","public",378],["T_WHITESPACE"," ",378],["T_FUNCTION","function",378],["T_WHITESPACE"," ",378],["T_STRING","getWidgetConfig",378],"(",")",["T_WHITESPACE","\n    ",378],"{",["T_WHITESPACE","\n        ",379],["T_IF","if",380],["T_WHITESPACE"," ",380],"(",["T_VARIABLE","$this",380],["T_OBJECT_OPERATOR","->",380],["T_STRING","_widgetConfigXml",380],["T_WHITESPACE"," ",380],["T_IS_IDENTICAL","===",380],["T_WHITESPACE"," ",380],["T_STRING","null",380],")",["T_WHITESPACE"," ",380],"{",["T_WHITESPACE","\n            ",380],["T_VARIABLE","$this",381],["T_OBJECT_OPERATOR","->",381],["T_STRING","_widgetConfigXml",381],["T_WHITESPACE"," ",381],"=",["T_WHITESPACE"," ",381],["T_STRING","Mage",381],["T_DOUBLE_COLON","::",381],["T_STRING","getSingleton",381],"(",["T_CONSTANT_ENCAPSED_STRING","'widget\/widget'",381],")",["T_WHITESPACE","\n                ",381],["T_OBJECT_OPERATOR","->",382],["T_STRING","getXmlElementByType",382],"(",["T_VARIABLE","$this",382],["T_OBJECT_OPERATOR","->",382],["T_STRING","getType",382],"(",")",")",";",["T_WHITESPACE","\n            ",382],["T_IF","if",383],["T_WHITESPACE"," ",383],"(",["T_VARIABLE","$this",383],["T_OBJECT_OPERATOR","->",383],["T_STRING","_widgetConfigXml",383],")",["T_WHITESPACE"," ",383],"{",["T_WHITESPACE","\n                ",383],["T_VARIABLE","$configFile",384],["T_WHITESPACE"," ",384],"=",["T_WHITESPACE"," ",384],["T_STRING","Mage",384],["T_DOUBLE_COLON","::",384],["T_STRING","getSingleton",384],"(",["T_CONSTANT_ENCAPSED_STRING","'core\/design_package'",384],")",["T_OBJECT_OPERATOR","->",384],["T_STRING","getBaseDir",384],"(",["T_ARRAY","array",384],"(",["T_WHITESPACE","\n                    ",384],["T_CONSTANT_ENCAPSED_STRING","'_area'",385],["T_WHITESPACE","    ",385],["T_DOUBLE_ARROW","=>",385],["T_WHITESPACE"," ",385],["T_VARIABLE","$this",385],["T_OBJECT_OPERATOR","->",385],["T_STRING","getArea",385],"(",")",",",["T_WHITESPACE","\n                    ",385],["T_CONSTANT_ENCAPSED_STRING","'_package'",386],["T_WHITESPACE"," ",386],["T_DOUBLE_ARROW","=>",386],["T_WHITESPACE"," ",386],["T_VARIABLE","$this",386],["T_OBJECT_OPERATOR","->",386],["T_STRING","getPackage",386],"(",")",",",["T_WHITESPACE","\n                    ",386],["T_CONSTANT_ENCAPSED_STRING","'_theme'",387],["T_WHITESPACE","   ",387],["T_DOUBLE_ARROW","=>",387],["T_WHITESPACE"," ",387],["T_VARIABLE","$this",387],["T_OBJECT_OPERATOR","->",387],["T_STRING","getTheme",387],"(",")",",",["T_WHITESPACE","\n                    ",387],["T_CONSTANT_ENCAPSED_STRING","'_type'",388],["T_WHITESPACE","    ",388],["T_DOUBLE_ARROW","=>",388],["T_WHITESPACE"," ",388],["T_CONSTANT_ENCAPSED_STRING","'etc'",388],["T_WHITESPACE","\n                ",388],")",")",["T_WHITESPACE"," ",389],".",["T_WHITESPACE"," ",389],["T_STRING","DS",389],["T_WHITESPACE"," ",389],".",["T_WHITESPACE"," ",389],["T_CONSTANT_ENCAPSED_STRING","'widget.xml'",389],";",["T_WHITESPACE","\n                ",389],["T_IF","if",390],["T_WHITESPACE"," ",390],"(",["T_STRING","is_readable",390],"(",["T_VARIABLE","$configFile",390],")",")",["T_WHITESPACE"," ",390],"{",["T_WHITESPACE","\n                    ",390],["T_VARIABLE","$themeWidgetsConfig",391],["T_WHITESPACE"," ",391],"=",["T_WHITESPACE"," ",391],["T_NEW","new",391],["T_WHITESPACE"," ",391],["T_STRING","Varien_Simplexml_Config",391],"(",")",";",["T_WHITESPACE","\n                    ",391],["T_VARIABLE","$themeWidgetsConfig",392],["T_OBJECT_OPERATOR","->",392],["T_STRING","loadFile",392],"(",["T_VARIABLE","$configFile",392],")",";",["T_WHITESPACE","\n                    ",392],["T_IF","if",393],["T_WHITESPACE"," ",393],"(",["T_VARIABLE","$themeWidgetTypeConfig",393],["T_WHITESPACE"," ",393],"=",["T_WHITESPACE"," ",393],["T_VARIABLE","$themeWidgetsConfig",393],["T_OBJECT_OPERATOR","->",393],["T_STRING","getNode",393],"(",["T_VARIABLE","$this",393],["T_OBJECT_OPERATOR","->",393],["T_STRING","_widgetConfigXml",393],["T_OBJECT_OPERATOR","->",393],["T_STRING","getName",393],"(",")",")",")",["T_WHITESPACE"," ",393],"{",["T_WHITESPACE","\n                        ",393],["T_VARIABLE","$this",394],["T_OBJECT_OPERATOR","->",394],["T_STRING","_widgetConfigXml",394],["T_OBJECT_OPERATOR","->",394],["T_STRING","extend",394],"(",["T_VARIABLE","$themeWidgetTypeConfig",394],")",";",["T_WHITESPACE","\n                    ",394],"}",["T_WHITESPACE","\n                ",395],"}",["T_WHITESPACE","\n            ",396],"}",["T_WHITESPACE","\n        ",397],"}",["T_WHITESPACE","\n        ",398],["T_RETURN","return",399],["T_WHITESPACE"," ",399],["T_VARIABLE","$this",399],["T_OBJECT_OPERATOR","->",399],["T_STRING","_widgetConfigXml",399],";",["T_WHITESPACE","\n    ",399],"}",["T_WHITESPACE","\n\n    ",400],["T_DOC_COMMENT","\/**\n     * Retrieve widget availabel templates\n     *\n     * @return array\n     *\/",402],["T_WHITESPACE","\n    ",406],["T_PUBLIC","public",407],["T_WHITESPACE"," ",407],["T_FUNCTION","function",407],["T_WHITESPACE"," ",407],["T_STRING","getWidgetTemplates",407],"(",")",["T_WHITESPACE","\n    ",407],"{",["T_WHITESPACE","\n        ",408],["T_VARIABLE","$templates",409],["T_WHITESPACE"," ",409],"=",["T_WHITESPACE"," ",409],["T_ARRAY","array",409],"(",")",";",["T_WHITESPACE","\n        ",409],["T_IF","if",410],["T_WHITESPACE"," ",410],"(",["T_VARIABLE","$this",410],["T_OBJECT_OPERATOR","->",410],["T_STRING","getWidgetConfig",410],"(",")",["T_WHITESPACE"," ",410],["T_BOOLEAN_AND","&&",410],["T_WHITESPACE"," ",410],"(",["T_VARIABLE","$configTemplates",410],["T_WHITESPACE"," ",410],"=",["T_WHITESPACE"," ",410],["T_VARIABLE","$this",410],["T_OBJECT_OPERATOR","->",410],["T_STRING","getWidgetConfig",410],"(",")",["T_OBJECT_OPERATOR","->",410],["T_STRING","parameters",410],["T_OBJECT_OPERATOR","->",410],["T_STRING","template",410],")",")",["T_WHITESPACE"," ",410],"{",["T_WHITESPACE","\n            ",410],["T_IF","if",411],["T_WHITESPACE"," ",411],"(",["T_VARIABLE","$configTemplates",411],["T_OBJECT_OPERATOR","->",411],["T_STRING","values",411],["T_WHITESPACE"," ",411],["T_BOOLEAN_AND","&&",411],["T_WHITESPACE"," ",411],["T_VARIABLE","$configTemplates",411],["T_OBJECT_OPERATOR","->",411],["T_STRING","values",411],["T_OBJECT_OPERATOR","->",411],["T_STRING","children",411],"(",")",")",["T_WHITESPACE"," ",411],"{",["T_WHITESPACE","\n                ",411],["T_FOREACH","foreach",412],["T_WHITESPACE"," ",412],"(",["T_VARIABLE","$configTemplates",412],["T_OBJECT_OPERATOR","->",412],["T_STRING","values",412],["T_OBJECT_OPERATOR","->",412],["T_STRING","children",412],"(",")",["T_WHITESPACE"," ",412],["T_AS","as",412],["T_WHITESPACE"," ",412],["T_VARIABLE","$name",412],["T_WHITESPACE"," ",412],["T_DOUBLE_ARROW","=>",412],["T_WHITESPACE"," ",412],["T_VARIABLE","$template",412],")",["T_WHITESPACE"," ",412],"{",["T_WHITESPACE","\n                    ",412],["T_VARIABLE","$helper",413],["T_WHITESPACE"," ",413],"=",["T_WHITESPACE"," ",413],["T_VARIABLE","$template",413],["T_OBJECT_OPERATOR","->",413],["T_STRING","getAttribute",413],"(",["T_CONSTANT_ENCAPSED_STRING","'module'",413],")",["T_WHITESPACE"," ",413],"?",["T_WHITESPACE"," ",413],["T_VARIABLE","$template",413],["T_OBJECT_OPERATOR","->",413],["T_STRING","getAttribute",413],"(",["T_CONSTANT_ENCAPSED_STRING","'module'",413],")",["T_WHITESPACE"," ",413],":",["T_WHITESPACE"," ",413],["T_CONSTANT_ENCAPSED_STRING","'widget'",413],";",["T_WHITESPACE","\n                    ",413],["T_VARIABLE","$templates",414],"[",["T_STRING_CAST","(string)",414],["T_VARIABLE","$name",414],"]",["T_WHITESPACE"," ",414],"=",["T_WHITESPACE"," ",414],["T_ARRAY","array",414],"(",["T_WHITESPACE","\n                        ",414],["T_CONSTANT_ENCAPSED_STRING","'value'",415],["T_WHITESPACE"," ",415],["T_DOUBLE_ARROW","=>",415],["T_WHITESPACE"," ",415],["T_STRING_CAST","(string)",415],["T_VARIABLE","$template",415],["T_OBJECT_OPERATOR","->",415],["T_STRING","value",415],",",["T_WHITESPACE","\n                        ",415],["T_CONSTANT_ENCAPSED_STRING","'label'",416],["T_WHITESPACE"," ",416],["T_DOUBLE_ARROW","=>",416],["T_WHITESPACE"," ",416],["T_STRING","Mage",416],["T_DOUBLE_COLON","::",416],["T_STRING","helper",416],"(",["T_VARIABLE","$helper",416],")",["T_OBJECT_OPERATOR","->",416],["T_STRING","__",416],"(",["T_STRING_CAST","(string)",416],["T_VARIABLE","$template",416],["T_OBJECT_OPERATOR","->",416],["T_STRING","label",416],")",["T_WHITESPACE","\n                    ",416],")",";",["T_WHITESPACE","\n                ",417],"}",["T_WHITESPACE","\n            ",418],"}",["T_WHITESPACE"," ",419],["T_ELSEIF","elseif",419],["T_WHITESPACE"," ",419],"(",["T_VARIABLE","$configTemplates",419],["T_OBJECT_OPERATOR","->",419],["T_STRING","value",419],")",["T_WHITESPACE"," ",419],"{",["T_WHITESPACE","\n                ",419],["T_VARIABLE","$templates",420],"[",["T_CONSTANT_ENCAPSED_STRING","'default'",420],"]",["T_WHITESPACE"," ",420],"=",["T_WHITESPACE"," ",420],["T_ARRAY","array",420],"(",["T_WHITESPACE","\n                    ",420],["T_CONSTANT_ENCAPSED_STRING","'value'",421],["T_WHITESPACE"," ",421],["T_DOUBLE_ARROW","=>",421],["T_WHITESPACE"," ",421],["T_STRING_CAST","(string)",421],["T_VARIABLE","$configTemplates",421],["T_OBJECT_OPERATOR","->",421],["T_STRING","value",421],",",["T_WHITESPACE","\n                    ",421],["T_CONSTANT_ENCAPSED_STRING","'label'",422],["T_WHITESPACE"," ",422],["T_DOUBLE_ARROW","=>",422],["T_WHITESPACE"," ",422],["T_STRING","Mage",422],["T_DOUBLE_COLON","::",422],["T_STRING","helper",422],"(",["T_CONSTANT_ENCAPSED_STRING","'widget'",422],")",["T_OBJECT_OPERATOR","->",422],["T_STRING","__",422],"(",["T_CONSTANT_ENCAPSED_STRING","'Default Template'",422],")",["T_WHITESPACE","\n                ",422],")",";",["T_WHITESPACE","\n            ",423],"}",["T_WHITESPACE","\n        ",424],"}",["T_WHITESPACE","\n        ",425],["T_RETURN","return",426],["T_WHITESPACE"," ",426],["T_VARIABLE","$templates",426],";",["T_WHITESPACE","\n    ",426],"}",["T_WHITESPACE","\n\n    ",427],["T_DOC_COMMENT","\/**\n     * Retrieve blocks that widget support\n     *\n     * @return array\n     *\/",429],["T_WHITESPACE","\n    ",433],["T_PUBLIC","public",434],["T_WHITESPACE"," ",434],["T_FUNCTION","function",434],["T_WHITESPACE"," ",434],["T_STRING","getWidgetSupportedBlocks",434],"(",")",["T_WHITESPACE","\n    ",434],"{",["T_WHITESPACE","\n        ",435],["T_VARIABLE","$blocks",436],["T_WHITESPACE"," ",436],"=",["T_WHITESPACE"," ",436],["T_ARRAY","array",436],"(",")",";",["T_WHITESPACE","\n        ",436],["T_IF","if",437],["T_WHITESPACE"," ",437],"(",["T_VARIABLE","$this",437],["T_OBJECT_OPERATOR","->",437],["T_STRING","getWidgetConfig",437],"(",")",["T_WHITESPACE"," ",437],["T_BOOLEAN_AND","&&",437],["T_WHITESPACE"," ",437],"(",["T_VARIABLE","$supportedBlocks",437],["T_WHITESPACE"," ",437],"=",["T_WHITESPACE"," ",437],["T_VARIABLE","$this",437],["T_OBJECT_OPERATOR","->",437],["T_STRING","getWidgetConfig",437],"(",")",["T_OBJECT_OPERATOR","->",437],["T_STRING","supported_blocks",437],")",")",["T_WHITESPACE"," ",437],"{",["T_WHITESPACE","\n            ",437],["T_FOREACH","foreach",438],["T_WHITESPACE"," ",438],"(",["T_VARIABLE","$supportedBlocks",438],["T_OBJECT_OPERATOR","->",438],["T_STRING","children",438],"(",")",["T_WHITESPACE"," ",438],["T_AS","as",438],["T_WHITESPACE"," ",438],["T_VARIABLE","$block",438],")",["T_WHITESPACE"," ",438],"{",["T_WHITESPACE","\n                ",438],["T_VARIABLE","$blocks",439],"[","]",["T_WHITESPACE"," ",439],"=",["T_WHITESPACE"," ",439],["T_STRING_CAST","(string)",439],["T_VARIABLE","$block",439],["T_OBJECT_OPERATOR","->",439],["T_STRING","block_name",439],";",["T_WHITESPACE","\n            ",439],"}",["T_WHITESPACE","\n        ",440],"}",["T_WHITESPACE","\n        ",441],["T_RETURN","return",442],["T_WHITESPACE"," ",442],["T_VARIABLE","$blocks",442],";",["T_WHITESPACE","\n    ",442],"}",["T_WHITESPACE","\n\n    ",443],["T_DOC_COMMENT","\/**\n     * Retrieve widget templates that supported by given block reference\n     *\n     * @param string $blockReference\n     * @return array\n     *\/",445],["T_WHITESPACE","\n    ",450],["T_PUBLIC","public",451],["T_WHITESPACE"," ",451],["T_FUNCTION","function",451],["T_WHITESPACE"," ",451],["T_STRING","getWidgetSupportedTemplatesByBlock",451],"(",["T_VARIABLE","$blockReference",451],")",["T_WHITESPACE","\n    ",451],"{",["T_WHITESPACE","\n        ",452],["T_VARIABLE","$templates",453],["T_WHITESPACE"," ",453],"=",["T_WHITESPACE"," ",453],["T_ARRAY","array",453],"(",")",";",["T_WHITESPACE","\n        ",453],["T_VARIABLE","$widgetTemplates",454],["T_WHITESPACE"," ",454],"=",["T_WHITESPACE"," ",454],["T_VARIABLE","$this",454],["T_OBJECT_OPERATOR","->",454],["T_STRING","getWidgetTemplates",454],"(",")",";",["T_WHITESPACE","\n        ",454],["T_IF","if",455],["T_WHITESPACE"," ",455],"(",["T_VARIABLE","$this",455],["T_OBJECT_OPERATOR","->",455],["T_STRING","getWidgetConfig",455],"(",")",")",["T_WHITESPACE"," ",455],"{",["T_WHITESPACE","\n            ",455],["T_IF","if",456],["T_WHITESPACE"," ",456],"(","!","(",["T_VARIABLE","$supportedBlocks",456],["T_WHITESPACE"," ",456],"=",["T_WHITESPACE"," ",456],["T_VARIABLE","$this",456],["T_OBJECT_OPERATOR","->",456],["T_STRING","getWidgetConfig",456],"(",")",["T_OBJECT_OPERATOR","->",456],["T_STRING","supported_blocks",456],")",")",["T_WHITESPACE"," ",456],"{",["T_WHITESPACE","\n                ",456],["T_RETURN","return",457],["T_WHITESPACE"," ",457],["T_VARIABLE","$widgetTemplates",457],";",["T_WHITESPACE","\n            ",457],"}",["T_WHITESPACE","\n            ",458],["T_FOREACH","foreach",459],["T_WHITESPACE"," ",459],"(",["T_VARIABLE","$supportedBlocks",459],["T_OBJECT_OPERATOR","->",459],["T_STRING","children",459],"(",")",["T_WHITESPACE"," ",459],["T_AS","as",459],["T_WHITESPACE"," ",459],["T_VARIABLE","$block",459],")",["T_WHITESPACE"," ",459],"{",["T_WHITESPACE","\n                ",459],["T_IF","if",460],["T_WHITESPACE"," ",460],"(",["T_STRING_CAST","(string)",460],["T_VARIABLE","$block",460],["T_OBJECT_OPERATOR","->",460],["T_STRING","block_name",460],["T_WHITESPACE"," ",460],["T_IS_EQUAL","==",460],["T_WHITESPACE"," ",460],["T_VARIABLE","$blockReference",460],")",["T_WHITESPACE"," ",460],"{",["T_WHITESPACE","\n                    ",460],["T_IF","if",461],["T_WHITESPACE"," ",461],"(",["T_VARIABLE","$block",461],["T_OBJECT_OPERATOR","->",461],["T_STRING","template",461],["T_WHITESPACE"," ",461],["T_BOOLEAN_AND","&&",461],["T_WHITESPACE"," ",461],["T_VARIABLE","$block",461],["T_OBJECT_OPERATOR","->",461],["T_STRING","template",461],["T_OBJECT_OPERATOR","->",461],["T_STRING","children",461],"(",")",")",["T_WHITESPACE"," ",461],"{",["T_WHITESPACE","\n                        ",461],["T_FOREACH","foreach",462],["T_WHITESPACE"," ",462],"(",["T_VARIABLE","$block",462],["T_OBJECT_OPERATOR","->",462],["T_STRING","template",462],["T_OBJECT_OPERATOR","->",462],["T_STRING","children",462],"(",")",["T_WHITESPACE"," ",462],["T_AS","as",462],["T_WHITESPACE"," ",462],["T_VARIABLE","$template",462],")",["T_WHITESPACE"," ",462],"{",["T_WHITESPACE","\n                            ",462],["T_IF","if",463],["T_WHITESPACE"," ",463],"(",["T_ISSET","isset",463],"(",["T_VARIABLE","$widgetTemplates",463],"[",["T_STRING_CAST","(string)",463],["T_VARIABLE","$template",463],"]",")",")",["T_WHITESPACE"," ",463],"{",["T_WHITESPACE","\n                                ",463],["T_VARIABLE","$templates",464],"[","]",["T_WHITESPACE"," ",464],"=",["T_WHITESPACE"," ",464],["T_VARIABLE","$widgetTemplates",464],"[",["T_STRING_CAST","(string)",464],["T_VARIABLE","$template",464],"]",";",["T_WHITESPACE","\n                            ",464],"}",["T_WHITESPACE","\n                        ",465],"}",["T_WHITESPACE","\n                    ",466],"}",["T_WHITESPACE"," ",467],["T_ELSE","else",467],["T_WHITESPACE"," ",467],"{",["T_WHITESPACE","\n                        ",467],["T_VARIABLE","$templates",468],"[","]",["T_WHITESPACE"," ",468],"=",["T_WHITESPACE"," ",468],["T_VARIABLE","$widgetTemplates",468],"[",["T_STRING_CAST","(string)",468],["T_VARIABLE","$template",468],"]",";",["T_WHITESPACE","\n                    ",468],"}",["T_WHITESPACE","\n                ",469],"}",["T_WHITESPACE","\n            ",470],"}",["T_WHITESPACE","\n        ",471],"}",["T_WHITESPACE"," ",472],["T_ELSE","else",472],["T_WHITESPACE"," ",472],"{",["T_WHITESPACE","\n            ",472],["T_RETURN","return",473],["T_WHITESPACE"," ",473],["T_VARIABLE","$widgetTemplates",473],";",["T_WHITESPACE","\n        ",473],"}",["T_WHITESPACE","\n        ",474],["T_RETURN","return",475],["T_WHITESPACE"," ",475],["T_VARIABLE","$templates",475],";",["T_WHITESPACE","\n    ",475],"}",["T_WHITESPACE","\n\n    ",476],["T_DOC_COMMENT","\/**\n     * Generate layout update xml\n     *\n     * @param string $blockReference\n     * @param string $templatePath\n     * @return string\n     *\/",478],["T_WHITESPACE","\n    ",484],["T_PUBLIC","public",485],["T_WHITESPACE"," ",485],["T_FUNCTION","function",485],["T_WHITESPACE"," ",485],["T_STRING","generateLayoutUpdateXml",485],"(",["T_VARIABLE","$blockReference",485],",",["T_WHITESPACE"," ",485],["T_VARIABLE","$templatePath",485],["T_WHITESPACE"," ",485],"=",["T_WHITESPACE"," ",485],["T_CONSTANT_ENCAPSED_STRING","''",485],")",["T_WHITESPACE","\n    ",485],"{",["T_WHITESPACE","\n        ",486],["T_VARIABLE","$templateFilename",487],["T_WHITESPACE"," ",487],"=",["T_WHITESPACE"," ",487],["T_STRING","Mage",487],["T_DOUBLE_COLON","::",487],["T_STRING","getSingleton",487],"(",["T_CONSTANT_ENCAPSED_STRING","'core\/design_package'",487],")",["T_OBJECT_OPERATOR","->",487],["T_STRING","getTemplateFilename",487],"(",["T_VARIABLE","$templatePath",487],",",["T_WHITESPACE"," ",487],["T_ARRAY","array",487],"(",["T_WHITESPACE","\n            ",487],["T_CONSTANT_ENCAPSED_STRING","'_area'",488],["T_WHITESPACE","    ",488],["T_DOUBLE_ARROW","=>",488],["T_WHITESPACE"," ",488],["T_VARIABLE","$this",488],["T_OBJECT_OPERATOR","->",488],["T_STRING","getArea",488],"(",")",",",["T_WHITESPACE","\n            ",488],["T_CONSTANT_ENCAPSED_STRING","'_package'",489],["T_WHITESPACE"," ",489],["T_DOUBLE_ARROW","=>",489],["T_WHITESPACE"," ",489],["T_VARIABLE","$this",489],["T_OBJECT_OPERATOR","->",489],["T_STRING","getPackage",489],"(",")",",",["T_WHITESPACE","\n            ",489],["T_CONSTANT_ENCAPSED_STRING","'_theme'",490],["T_WHITESPACE","   ",490],["T_DOUBLE_ARROW","=>",490],["T_WHITESPACE"," ",490],["T_VARIABLE","$this",490],["T_OBJECT_OPERATOR","->",490],["T_STRING","getTheme",490],"(",")",["T_WHITESPACE","\n        ",490],")",")",";",["T_WHITESPACE","\n        ",491],["T_IF","if",492],["T_WHITESPACE"," ",492],"(","!",["T_VARIABLE","$this",492],["T_OBJECT_OPERATOR","->",492],["T_STRING","getId",492],"(",")",["T_WHITESPACE"," ",492],["T_BOOLEAN_AND","&&",492],["T_WHITESPACE"," ",492],"!",["T_VARIABLE","$this",492],["T_OBJECT_OPERATOR","->",492],["T_STRING","isCompleteToCreate",492],"(",")",["T_WHITESPACE","\n            ",492],["T_BOOLEAN_OR","||",493],["T_WHITESPACE"," ",493],"(",["T_VARIABLE","$templatePath",493],["T_WHITESPACE"," ",493],["T_BOOLEAN_AND","&&",493],["T_WHITESPACE"," ",493],"!",["T_STRING","is_readable",493],"(",["T_VARIABLE","$templateFilename",493],")",")",")",["T_WHITESPACE","\n        ",493],"{",["T_WHITESPACE","\n            ",494],["T_RETURN","return",495],["T_WHITESPACE"," ",495],["T_CONSTANT_ENCAPSED_STRING","''",495],";",["T_WHITESPACE","\n        ",495],"}",["T_WHITESPACE","\n        ",496],["T_VARIABLE","$parameters",497],["T_WHITESPACE"," ",497],"=",["T_WHITESPACE"," ",497],["T_VARIABLE","$this",497],["T_OBJECT_OPERATOR","->",497],["T_STRING","getWidgetParameters",497],"(",")",";",["T_WHITESPACE","\n        ",497],["T_VARIABLE","$xml",498],["T_WHITESPACE"," ",498],"=",["T_WHITESPACE"," ",498],["T_CONSTANT_ENCAPSED_STRING","'<reference name=\"'",498],["T_WHITESPACE"," ",498],".",["T_WHITESPACE"," ",498],["T_VARIABLE","$blockReference",498],["T_WHITESPACE"," ",498],".",["T_WHITESPACE"," ",498],["T_CONSTANT_ENCAPSED_STRING","'\">'",498],";",["T_WHITESPACE","\n        ",498],["T_VARIABLE","$template",499],["T_WHITESPACE"," ",499],"=",["T_WHITESPACE"," ",499],["T_CONSTANT_ENCAPSED_STRING","''",499],";",["T_WHITESPACE","\n        ",499],["T_IF","if",500],["T_WHITESPACE"," ",500],"(",["T_ISSET","isset",500],"(",["T_VARIABLE","$parameters",500],"[",["T_CONSTANT_ENCAPSED_STRING","'template'",500],"]",")",")",["T_WHITESPACE"," ",500],"{",["T_WHITESPACE","\n            ",500],["T_UNSET","unset",501],"(",["T_VARIABLE","$parameters",501],"[",["T_CONSTANT_ENCAPSED_STRING","'template'",501],"]",")",";",["T_WHITESPACE","\n        ",501],"}",["T_WHITESPACE","\n        ",502],["T_IF","if",503],["T_WHITESPACE"," ",503],"(",["T_VARIABLE","$templatePath",503],")",["T_WHITESPACE"," ",503],"{",["T_WHITESPACE","\n            ",503],["T_VARIABLE","$template",504],["T_WHITESPACE"," ",504],"=",["T_WHITESPACE"," ",504],["T_CONSTANT_ENCAPSED_STRING","' template=\"'",504],["T_WHITESPACE"," ",504],".",["T_WHITESPACE"," ",504],["T_VARIABLE","$templatePath",504],["T_WHITESPACE"," ",504],".",["T_WHITESPACE"," ",504],["T_CONSTANT_ENCAPSED_STRING","'\"'",504],";",["T_WHITESPACE","\n        ",504],"}",["T_WHITESPACE","\n\n        ",505],["T_VARIABLE","$hash",507],["T_WHITESPACE"," ",507],"=",["T_WHITESPACE"," ",507],["T_STRING","Mage",507],["T_DOUBLE_COLON","::",507],["T_STRING","helper",507],"(",["T_CONSTANT_ENCAPSED_STRING","'core'",507],")",["T_OBJECT_OPERATOR","->",507],["T_STRING","uniqHash",507],"(",")",";",["T_WHITESPACE","\n        ",507],["T_VARIABLE","$xml",508],["T_WHITESPACE"," ",508],["T_CONCAT_EQUAL",".=",508],["T_WHITESPACE"," ",508],["T_CONSTANT_ENCAPSED_STRING","'<block type=\"'",508],["T_WHITESPACE"," ",508],".",["T_WHITESPACE"," ",508],["T_VARIABLE","$this",508],["T_OBJECT_OPERATOR","->",508],["T_STRING","getType",508],"(",")",["T_WHITESPACE"," ",508],".",["T_WHITESPACE"," ",508],["T_CONSTANT_ENCAPSED_STRING","'\" name=\"'",508],["T_WHITESPACE"," ",508],".",["T_WHITESPACE"," ",508],["T_VARIABLE","$hash",508],["T_WHITESPACE"," ",508],".",["T_WHITESPACE"," ",508],["T_CONSTANT_ENCAPSED_STRING","'\"'",508],["T_WHITESPACE"," ",508],".",["T_WHITESPACE"," ",508],["T_VARIABLE","$template",508],["T_WHITESPACE"," ",508],".",["T_WHITESPACE"," ",508],["T_CONSTANT_ENCAPSED_STRING","'>'",508],";",["T_WHITESPACE","\n        ",508],["T_FOREACH","foreach",509],["T_WHITESPACE"," ",509],"(",["T_VARIABLE","$parameters",509],["T_WHITESPACE"," ",509],["T_AS","as",509],["T_WHITESPACE"," ",509],["T_VARIABLE","$name",509],["T_WHITESPACE"," ",509],["T_DOUBLE_ARROW","=>",509],["T_WHITESPACE"," ",509],["T_VARIABLE","$value",509],")",["T_WHITESPACE"," ",509],"{",["T_WHITESPACE","\n            ",509],["T_IF","if",510],["T_WHITESPACE"," ",510],"(",["T_STRING","is_array",510],"(",["T_VARIABLE","$value",510],")",")",["T_WHITESPACE"," ",510],"{",["T_WHITESPACE","\n                ",510],["T_VARIABLE","$value",511],["T_WHITESPACE"," ",511],"=",["T_WHITESPACE"," ",511],["T_STRING","implode",511],"(",["T_CONSTANT_ENCAPSED_STRING","','",511],",",["T_WHITESPACE"," ",511],["T_VARIABLE","$value",511],")",";",["T_WHITESPACE","\n            ",511],"}",["T_WHITESPACE","\n            ",512],["T_IF","if",513],["T_WHITESPACE"," ",513],"(",["T_VARIABLE","$name",513],["T_WHITESPACE"," ",513],["T_BOOLEAN_AND","&&",513],["T_WHITESPACE"," ",513],["T_STRING","strlen",513],"(",["T_STRING_CAST","(string)",513],["T_VARIABLE","$value",513],")",")",["T_WHITESPACE"," ",513],"{",["T_WHITESPACE","\n                ",513],["T_VARIABLE","$xml",514],["T_WHITESPACE"," ",514],["T_CONCAT_EQUAL",".=",514],["T_WHITESPACE"," ",514],["T_CONSTANT_ENCAPSED_STRING","'<action method=\"setData\">'",514],["T_WHITESPACE","\n                    ",514],".",["T_WHITESPACE"," ",515],["T_CONSTANT_ENCAPSED_STRING","'<name>'",515],["T_WHITESPACE"," ",515],".",["T_WHITESPACE"," ",515],["T_VARIABLE","$name",515],["T_WHITESPACE"," ",515],".",["T_WHITESPACE"," ",515],["T_CONSTANT_ENCAPSED_STRING","'<\/name>'",515],["T_WHITESPACE","\n                    ",515],".",["T_WHITESPACE"," ",516],["T_CONSTANT_ENCAPSED_STRING","'<value>'",516],["T_WHITESPACE"," ",516],".",["T_WHITESPACE"," ",516],["T_STRING","Mage",516],["T_DOUBLE_COLON","::",516],["T_STRING","helper",516],"(",["T_CONSTANT_ENCAPSED_STRING","'widget'",516],")",["T_OBJECT_OPERATOR","->",516],["T_STRING","escapeHtml",516],"(",["T_VARIABLE","$value",516],")",["T_WHITESPACE"," ",516],".",["T_WHITESPACE"," ",516],["T_CONSTANT_ENCAPSED_STRING","'<\/value>'",516],["T_WHITESPACE","\n                    ",516],".",["T_WHITESPACE"," ",517],["T_CONSTANT_ENCAPSED_STRING","'<\/action>'",517],";",["T_WHITESPACE","\n            ",517],"}",["T_WHITESPACE","\n        ",518],"}",["T_WHITESPACE","\n        ",519],["T_VARIABLE","$xml",520],["T_WHITESPACE"," ",520],["T_CONCAT_EQUAL",".=",520],["T_WHITESPACE"," ",520],["T_CONSTANT_ENCAPSED_STRING","'<\/block><\/reference>'",520],";",["T_WHITESPACE","\n\n        ",520],["T_RETURN","return",522],["T_WHITESPACE"," ",522],["T_VARIABLE","$xml",522],";",["T_WHITESPACE","\n    ",522],"}",["T_WHITESPACE","\n\n    ",523],["T_DOC_COMMENT","\/**\n     * Invalidate related cache types\n     *\n     * @return Mage_Widget_Model_Widget_Instance\n     *\/",525],["T_WHITESPACE","\n    ",529],["T_PROTECTED","protected",530],["T_WHITESPACE"," ",530],["T_FUNCTION","function",530],["T_WHITESPACE"," ",530],["T_STRING","_invalidateCache",530],"(",")",["T_WHITESPACE","\n    ",530],"{",["T_WHITESPACE","\n        ",531],["T_VARIABLE","$types",532],["T_WHITESPACE"," ",532],"=",["T_WHITESPACE"," ",532],["T_STRING","Mage",532],["T_DOUBLE_COLON","::",532],["T_STRING","getConfig",532],"(",")",["T_OBJECT_OPERATOR","->",532],["T_STRING","getNode",532],"(",["T_STRING","self",532],["T_DOUBLE_COLON","::",532],["T_STRING","XML_NODE_RELATED_CACHE",532],")",";",["T_WHITESPACE","\n        ",532],["T_IF","if",533],["T_WHITESPACE"," ",533],"(",["T_VARIABLE","$types",533],")",["T_WHITESPACE"," ",533],"{",["T_WHITESPACE","\n            ",533],["T_VARIABLE","$types",534],["T_WHITESPACE"," ",534],"=",["T_WHITESPACE"," ",534],["T_VARIABLE","$types",534],["T_OBJECT_OPERATOR","->",534],["T_STRING","asArray",534],"(",")",";",["T_WHITESPACE","\n            ",534],["T_STRING","Mage",535],["T_DOUBLE_COLON","::",535],["T_STRING","app",535],"(",")",["T_OBJECT_OPERATOR","->",535],["T_STRING","getCacheInstance",535],"(",")",["T_OBJECT_OPERATOR","->",535],["T_STRING","invalidateType",535],"(",["T_STRING","array_keys",535],"(",["T_VARIABLE","$types",535],")",")",";",["T_WHITESPACE","\n        ",535],"}",["T_WHITESPACE","\n        ",536],["T_RETURN","return",537],["T_WHITESPACE"," ",537],["T_VARIABLE","$this",537],";",["T_WHITESPACE","\n    ",537],"}",["T_WHITESPACE","\n\n    ",538],["T_DOC_COMMENT","\/**\n     * Invalidate related cache if instance contain layout updates\n     *\/",540],["T_WHITESPACE","\n    ",542],["T_PROTECTED","protected",543],["T_WHITESPACE"," ",543],["T_FUNCTION","function",543],["T_WHITESPACE"," ",543],["T_STRING","_afterSave",543],"(",")",["T_WHITESPACE","\n    ",543],"{",["T_WHITESPACE","\n        ",544],["T_IF","if",545],["T_WHITESPACE"," ",545],"(",["T_VARIABLE","$this",545],["T_OBJECT_OPERATOR","->",545],["T_STRING","dataHasChangedFor",545],"(",["T_CONSTANT_ENCAPSED_STRING","'page_groups'",545],")",["T_WHITESPACE"," ",545],["T_BOOLEAN_OR","||",545],["T_WHITESPACE"," ",545],["T_VARIABLE","$this",545],["T_OBJECT_OPERATOR","->",545],["T_STRING","dataHasChangedFor",545],"(",["T_CONSTANT_ENCAPSED_STRING","'widget_parameters'",545],")",")",["T_WHITESPACE"," ",545],"{",["T_WHITESPACE","\n            ",545],["T_VARIABLE","$this",546],["T_OBJECT_OPERATOR","->",546],["T_STRING","_invalidateCache",546],"(",")",";",["T_WHITESPACE","\n        ",546],"}",["T_WHITESPACE","\n        ",547],["T_RETURN","return",548],["T_WHITESPACE"," ",548],["T_STRING","parent",548],["T_DOUBLE_COLON","::",548],["T_STRING","_afterSave",548],"(",")",";",["T_WHITESPACE","\n    ",548],"}",["T_WHITESPACE","\n\n    ",549],["T_DOC_COMMENT","\/**\n     * Invalidate related cache if instance contain layout updates\n     *\/",551],["T_WHITESPACE","\n    ",553],["T_PROTECTED","protected",554],["T_WHITESPACE"," ",554],["T_FUNCTION","function",554],["T_WHITESPACE"," ",554],["T_STRING","_beforeDelete",554],"(",")",["T_WHITESPACE","\n    ",554],"{",["T_WHITESPACE","\n        ",555],["T_IF","if",556],["T_WHITESPACE"," ",556],"(",["T_VARIABLE","$this",556],["T_OBJECT_OPERATOR","->",556],["T_STRING","getPageGroups",556],"(",")",")",["T_WHITESPACE"," ",556],"{",["T_WHITESPACE","\n            ",556],["T_VARIABLE","$this",557],["T_OBJECT_OPERATOR","->",557],["T_STRING","_invalidateCache",557],"(",")",";",["T_WHITESPACE","\n        ",557],"}",["T_WHITESPACE","\n        ",558],["T_RETURN","return",559],["T_WHITESPACE"," ",559],["T_STRING","parent",559],["T_DOUBLE_COLON","::",559],["T_STRING","_beforeDelete",559],"(",")",";",["T_WHITESPACE","\n    ",559],"}",["T_WHITESPACE","\n",560],"}",["T_WHITESPACE","\n",561]]
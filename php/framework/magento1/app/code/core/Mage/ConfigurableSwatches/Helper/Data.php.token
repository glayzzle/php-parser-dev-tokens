[["T_OPEN_TAG","<?php\n",1],["T_DOC_COMMENT","\/**\n * Magento\n *\n * NOTICE OF LICENSE\n *\n * This source file is subject to the Open Software License (OSL 3.0)\n * that is bundled with this package in the file LICENSE.txt.\n * It is also available through the world-wide-web at this URL:\n * http:\/\/opensource.org\/licenses\/osl-3.0.php\n * If you did not receive a copy of the license and are unable to\n * obtain it through the world-wide-web, please send an email\n * to license@magento.com so we can send you a copy immediately.\n *\n * DISCLAIMER\n *\n * Do not edit or add to this file if you wish to upgrade Magento to newer\n * versions in the future. If you wish to customize Magento for your\n * needs please refer to http:\/\/www.magento.com for more information.\n *\n * @category    Mage\n * @package     Mage_ConfigurableSwatches\n * @copyright  Copyright (c) 2006-2016 X.commerce, Inc. and affiliates (http:\/\/www.magento.com)\n * @license    http:\/\/opensource.org\/licenses\/osl-3.0.php  Open Software License (OSL 3.0)\n *\/",2],["T_WHITESPACE","\n",25],["T_CLASS","class",26],["T_WHITESPACE"," ",26],["T_STRING","Mage_ConfigurableSwatches_Helper_Data",26],["T_WHITESPACE"," ",26],["T_EXTENDS","extends",26],["T_WHITESPACE"," ",26],["T_STRING","Mage_Core_Helper_Abstract",26],["T_WHITESPACE","\n",26],"{",["T_WHITESPACE","\n    ",27],["T_CONST","const",28],["T_WHITESPACE"," ",28],["T_STRING","CONFIG_PATH_BASE",28],["T_WHITESPACE"," ",28],"=",["T_WHITESPACE"," ",28],["T_CONSTANT_ENCAPSED_STRING","'configswatches'",28],";",["T_WHITESPACE","\n    ",28],["T_CONST","const",29],["T_WHITESPACE"," ",29],["T_STRING","CONFIG_PATH_ENABLED",29],["T_WHITESPACE"," ",29],"=",["T_WHITESPACE"," ",29],["T_CONSTANT_ENCAPSED_STRING","'configswatches\/general\/enabled'",29],";",["T_WHITESPACE","\n    ",29],["T_CONST","const",30],["T_WHITESPACE"," ",30],["T_STRING","CONFIG_PATH_SWATCH_ATTRIBUTES",30],["T_WHITESPACE"," ",30],"=",["T_WHITESPACE"," ",30],["T_CONSTANT_ENCAPSED_STRING","'configswatches\/general\/swatch_attributes'",30],";",["T_WHITESPACE","\n    ",30],["T_CONST","const",31],["T_WHITESPACE"," ",31],["T_STRING","CONFIG_PATH_LIST_SWATCH_ATTRIBUTE",31],["T_WHITESPACE"," ",31],"=",["T_WHITESPACE"," ",31],["T_CONSTANT_ENCAPSED_STRING","'configswatches\/general\/product_list_attribute'",31],";",["T_WHITESPACE","\n\n\n    ",31],["T_PROTECTED","protected",34],["T_WHITESPACE"," ",34],["T_VARIABLE","$_enabled",34],["T_WHITESPACE"," ",34],"=",["T_WHITESPACE"," ",34],["T_STRING","null",34],";",["T_WHITESPACE","\n    ",34],["T_PROTECTED","protected",35],["T_WHITESPACE"," ",35],["T_VARIABLE","$_configAttributeIds",35],["T_WHITESPACE"," ",35],"=",["T_WHITESPACE"," ",35],["T_STRING","null",35],";",["T_WHITESPACE","\n\n    ",35],["T_DOC_COMMENT","\/**\n     * Is the extension enabled?\n     *\n     * @return bool\n     *\/",37],["T_WHITESPACE","\n    ",41],["T_PUBLIC","public",42],["T_WHITESPACE"," ",42],["T_FUNCTION","function",42],["T_WHITESPACE"," ",42],["T_STRING","isEnabled",42],"(",")",["T_WHITESPACE","\n    ",42],"{",["T_WHITESPACE","\n        ",43],["T_IF","if",44],["T_WHITESPACE"," ",44],"(",["T_STRING","is_null",44],"(",["T_VARIABLE","$this",44],["T_OBJECT_OPERATOR","->",44],["T_STRING","_enabled",44],")",")",["T_WHITESPACE"," ",44],"{",["T_WHITESPACE","\n            ",44],["T_VARIABLE","$this",45],["T_OBJECT_OPERATOR","->",45],["T_STRING","_enabled",45],["T_WHITESPACE"," ",45],"=",["T_WHITESPACE"," ",45],"(",["T_WHITESPACE","\n                ",45],["T_BOOL_CAST","(bool)",46],["T_WHITESPACE"," ",46],["T_STRING","Mage",46],["T_DOUBLE_COLON","::",46],["T_STRING","getStoreConfig",46],"(",["T_STRING","self",46],["T_DOUBLE_COLON","::",46],["T_STRING","CONFIG_PATH_ENABLED",46],")",["T_WHITESPACE","\n                ",46],["T_BOOLEAN_AND","&&",47],["T_WHITESPACE"," ",47],["T_STRING","Mage",47],["T_DOUBLE_COLON","::",47],["T_STRING","helper",47],"(",["T_CONSTANT_ENCAPSED_STRING","'configurableswatches\/productlist'",47],")",["T_OBJECT_OPERATOR","->",47],["T_STRING","getSwatchAttribute",47],"(",")",["T_WHITESPACE","\n            ",47],")",";",["T_WHITESPACE","\n        ",48],"}",["T_WHITESPACE","\n        ",49],["T_RETURN","return",50],["T_WHITESPACE"," ",50],["T_VARIABLE","$this",50],["T_OBJECT_OPERATOR","->",50],["T_STRING","_enabled",50],";",["T_WHITESPACE","\n    ",50],"}",["T_WHITESPACE","\n\n    ",51],["T_DOC_COMMENT","\/**\n     * Return the formatted hyphenated string\n     *\n     * @param string $str\n     * @return string\n     *\/",53],["T_WHITESPACE","\n    ",58],["T_PUBLIC","public",59],["T_WHITESPACE"," ",59],["T_FUNCTION","function",59],["T_WHITESPACE"," ",59],["T_STRING","getHyphenatedString",59],"(",["T_VARIABLE","$str",59],")",["T_WHITESPACE","\n    ",59],"{",["T_WHITESPACE","\n        ",60],["T_VARIABLE","$result",61],["T_WHITESPACE"," ",61],"=",["T_WHITESPACE"," ",61],["T_STRING","false",61],";",["T_WHITESPACE","\n        ",61],["T_IF","if",62],["T_WHITESPACE"," ",62],"(",["T_STRING","function_exists",62],"(",["T_CONSTANT_ENCAPSED_STRING","'iconv'",62],")",")",["T_WHITESPACE"," ",62],"{",["T_WHITESPACE","\n            ",62],["T_VARIABLE","$result",63],["T_WHITESPACE"," ",63],"=",["T_WHITESPACE"," ",63],"@",["T_STRING","iconv",63],"(",["T_CONSTANT_ENCAPSED_STRING","'UTF-8'",63],",",["T_WHITESPACE"," ",63],["T_CONSTANT_ENCAPSED_STRING","'ASCII\/\/TRANSLIT'",63],",",["T_WHITESPACE"," ",63],["T_VARIABLE","$str",63],")",";",["T_WHITESPACE"," ",63],["T_COMMENT","\/\/ will issue a notice on failure, we handle failure\n",63],["T_WHITESPACE","        ",64],"}",["T_WHITESPACE","\n\n        ",64],["T_IF","if",66],["T_WHITESPACE"," ",66],"(","!",["T_VARIABLE","$result",66],")",["T_WHITESPACE"," ",66],"{",["T_WHITESPACE","\n            ",66],["T_VARIABLE","$result",67],["T_WHITESPACE"," ",67],"=",["T_WHITESPACE"," ",67],["T_STRING","dechex",67],"(",["T_STRING","crc32",67],"(",["T_STRING","self",67],["T_DOUBLE_COLON","::",67],["T_STRING","normalizeKey",67],"(",["T_VARIABLE","$str",67],")",")",")",";",["T_WHITESPACE","\n        ",67],"}",["T_WHITESPACE","\n\n        ",68],["T_RETURN","return",70],["T_WHITESPACE"," ",70],["T_STRING","preg_replace",70],"(",["T_CONSTANT_ENCAPSED_STRING","'\/([^a-z0-9]+)\/'",70],",",["T_WHITESPACE"," ",70],["T_CONSTANT_ENCAPSED_STRING","'-'",70],",",["T_WHITESPACE"," ",70],["T_STRING","self",70],["T_DOUBLE_COLON","::",70],["T_STRING","normalizeKey",70],"(",["T_VARIABLE","$result",70],")",")",";",["T_WHITESPACE","\n    ",70],"}",["T_WHITESPACE","\n\n    ",71],["T_DOC_COMMENT","\/**\n     * Trims and lower-cases strings used as array indexes in json and for string matching in a\n     * multi-byte compatible way if the mbstring module is available.\n     *\n     * @param $key\n     * @return string\n     *\/",73],["T_WHITESPACE","\n    ",79],["T_PUBLIC","public",80],["T_WHITESPACE"," ",80],["T_STATIC","static",80],["T_WHITESPACE"," ",80],["T_FUNCTION","function",80],["T_WHITESPACE"," ",80],["T_STRING","normalizeKey",80],"(",["T_VARIABLE","$key",80],")",["T_WHITESPACE"," ",80],"{",["T_WHITESPACE","\n        ",80],["T_IF","if",81],["T_WHITESPACE"," ",81],"(",["T_STRING","function_exists",81],"(",["T_CONSTANT_ENCAPSED_STRING","'mb_strtolower'",81],")",")",["T_WHITESPACE"," ",81],"{",["T_WHITESPACE","\n            ",81],["T_RETURN","return",82],["T_WHITESPACE"," ",82],["T_STRING","trim",82],"(",["T_STRING","mb_strtolower",82],"(",["T_VARIABLE","$key",82],",",["T_WHITESPACE"," ",82],["T_CONSTANT_ENCAPSED_STRING","'UTF-8'",82],")",")",";",["T_WHITESPACE","\n        ",82],"}",["T_WHITESPACE","\n        ",83],["T_RETURN","return",84],["T_WHITESPACE"," ",84],["T_STRING","trim",84],"(",["T_STRING","strtolower",84],"(",["T_VARIABLE","$key",84],")",")",";",["T_WHITESPACE","\n    ",84],"}",["T_WHITESPACE","\n\n    ",85],["T_DOC_COMMENT","\/**\n     * Get list of attributes that should use swatches\n     *\n     * @return array\n     *\/",87],["T_WHITESPACE","\n    ",91],["T_PUBLIC","public",92],["T_WHITESPACE"," ",92],["T_FUNCTION","function",92],["T_WHITESPACE"," ",92],["T_STRING","getSwatchAttributeIds",92],"(",")",["T_WHITESPACE","\n    ",92],"{",["T_WHITESPACE","\n        ",93],["T_IF","if",94],["T_WHITESPACE"," ",94],"(",["T_STRING","is_null",94],"(",["T_VARIABLE","$this",94],["T_OBJECT_OPERATOR","->",94],["T_STRING","_configAttributeIds",94],")",")",["T_WHITESPACE"," ",94],"{",["T_WHITESPACE","\n            ",94],["T_VARIABLE","$this",95],["T_OBJECT_OPERATOR","->",95],["T_STRING","_configAttributeIds",95],["T_WHITESPACE"," ",95],"=",["T_WHITESPACE"," ",95],["T_ARRAY","array",95],"(",")",";",["T_WHITESPACE","\n            ",95],["T_IF","if",96],["T_WHITESPACE"," ",96],"(",["T_STRING","Mage",96],["T_DOUBLE_COLON","::",96],["T_STRING","getStoreConfig",96],"(",["T_STRING","self",96],["T_DOUBLE_COLON","::",96],["T_STRING","CONFIG_PATH_SWATCH_ATTRIBUTES",96],")",")",["T_WHITESPACE"," ",96],"{",["T_WHITESPACE","\n                ",96],["T_VARIABLE","$this",97],["T_OBJECT_OPERATOR","->",97],["T_STRING","_configAttributeIds",97],["T_WHITESPACE"," ",97],"=",["T_WHITESPACE"," ",97],["T_STRING","explode",97],"(",["T_CONSTANT_ENCAPSED_STRING","','",97],",",["T_WHITESPACE"," ",97],["T_STRING","Mage",97],["T_DOUBLE_COLON","::",97],["T_STRING","getStoreConfig",97],"(",["T_STRING","self",97],["T_DOUBLE_COLON","::",97],["T_STRING","CONFIG_PATH_SWATCH_ATTRIBUTES",97],")",")",";",["T_WHITESPACE","\n            ",97],"}",["T_WHITESPACE","\n        ",98],"}",["T_WHITESPACE","\n        ",99],["T_RETURN","return",100],["T_WHITESPACE"," ",100],["T_VARIABLE","$this",100],["T_OBJECT_OPERATOR","->",100],["T_STRING","_configAttributeIds",100],";",["T_WHITESPACE","\n    ",100],"}",["T_WHITESPACE","\n\n    ",101],["T_DOC_COMMENT","\/**\n     * Determine if an attribute should be a swatch\n     *\n     * @param int|Mage_Eav_Model_Attribute $attr\n     * @return bool\n     *\/",103],["T_WHITESPACE","\n    ",108],["T_PUBLIC","public",109],["T_WHITESPACE"," ",109],["T_FUNCTION","function",109],["T_WHITESPACE"," ",109],["T_STRING","attrIsSwatchType",109],"(",["T_VARIABLE","$attr",109],")",["T_WHITESPACE","\n    ",109],"{",["T_WHITESPACE","\n        ",110],["T_IF","if",111],["T_WHITESPACE"," ",111],"(",["T_VARIABLE","$attr",111],["T_WHITESPACE"," ",111],["T_INSTANCEOF","instanceof",111],["T_WHITESPACE"," ",111],["T_STRING","Varien_Object",111],")",["T_WHITESPACE"," ",111],"{",["T_WHITESPACE","\n            ",111],["T_VARIABLE","$attr",112],["T_WHITESPACE"," ",112],"=",["T_WHITESPACE"," ",112],["T_VARIABLE","$attr",112],["T_OBJECT_OPERATOR","->",112],["T_STRING","getId",112],"(",")",";",["T_WHITESPACE","\n        ",112],"}",["T_WHITESPACE","\n        ",113],["T_VARIABLE","$configAttrs",114],["T_WHITESPACE"," ",114],"=",["T_WHITESPACE"," ",114],["T_VARIABLE","$this",114],["T_OBJECT_OPERATOR","->",114],["T_STRING","getSwatchAttributeIds",114],"(",")",";",["T_WHITESPACE","\n        ",114],["T_RETURN","return",115],["T_WHITESPACE"," ",115],["T_STRING","in_array",115],"(",["T_VARIABLE","$attr",115],",",["T_WHITESPACE"," ",115],["T_VARIABLE","$configAttrs",115],")",";",["T_WHITESPACE","\n    ",115],"}",["T_WHITESPACE","\n\n    ",116],["T_DOC_COMMENT","\/**\n     * Get swatches product javascript\n     *\n     * @return string\n     *\/",118],["T_WHITESPACE","\n    ",122],["T_PUBLIC","public",123],["T_WHITESPACE"," ",123],["T_FUNCTION","function",123],["T_WHITESPACE"," ",123],["T_STRING","getSwatchesProductJs",123],"(",")",["T_WHITESPACE","\n    ",123],"{",["T_WHITESPACE","\n        ",124],["T_DOC_COMMENT","\/**\n         * @var $product Mage_Catalog_Model_Product\n         *\/",125],["T_WHITESPACE","\n        ",127],["T_VARIABLE","$product",128],["T_WHITESPACE"," ",128],"=",["T_WHITESPACE"," ",128],["T_STRING","Mage",128],["T_DOUBLE_COLON","::",128],["T_STRING","registry",128],"(",["T_CONSTANT_ENCAPSED_STRING","'current_product'",128],")",";",["T_WHITESPACE","\n        ",128],["T_IF","if",129],["T_WHITESPACE"," ",129],"(",["T_VARIABLE","$this",129],["T_OBJECT_OPERATOR","->",129],["T_STRING","isEnabled",129],"(",")",["T_WHITESPACE"," ",129],["T_BOOLEAN_AND","&&",129],["T_WHITESPACE"," ",129],["T_VARIABLE","$product",129],")",["T_WHITESPACE"," ",129],"{",["T_WHITESPACE","\n            ",129],["T_VARIABLE","$configAttrs",130],["T_WHITESPACE"," ",130],"=",["T_WHITESPACE"," ",130],["T_VARIABLE","$this",130],["T_OBJECT_OPERATOR","->",130],["T_STRING","getSwatchAttributeIds",130],"(",")",";",["T_WHITESPACE","\n            ",130],["T_VARIABLE","$configurableAttributes",131],["T_WHITESPACE"," ",131],"=",["T_WHITESPACE"," ",131],["T_VARIABLE","$product",131],["T_OBJECT_OPERATOR","->",131],["T_STRING","getTypeInstance",131],"(",["T_STRING","true",131],")",["T_OBJECT_OPERATOR","->",131],["T_STRING","getConfigurableAttributesAsArray",131],"(",["T_VARIABLE","$product",131],")",";",["T_WHITESPACE","\n            ",131],["T_FOREACH","foreach",132],["T_WHITESPACE"," ",132],"(",["T_VARIABLE","$configurableAttributes",132],["T_WHITESPACE"," ",132],["T_AS","as",132],["T_WHITESPACE"," ",132],["T_VARIABLE","$configurableAttribute",132],")",["T_WHITESPACE"," ",132],"{",["T_WHITESPACE","\n                ",132],["T_IF","if",133],["T_WHITESPACE"," ",133],"(",["T_STRING","in_array",133],"(",["T_VARIABLE","$configurableAttribute",133],"[",["T_CONSTANT_ENCAPSED_STRING","'attribute_id'",133],"]",",",["T_WHITESPACE"," ",133],["T_VARIABLE","$configAttrs",133],")",")",["T_WHITESPACE"," ",133],"{",["T_WHITESPACE","\n                    ",133],["T_RETURN","return",134],["T_WHITESPACE"," ",134],["T_CONSTANT_ENCAPSED_STRING","'js\/configurableswatches\/swatches-product.js'",134],";",["T_WHITESPACE","\n                ",134],"}",["T_WHITESPACE","\n            ",135],"}",["T_WHITESPACE","\n        ",136],"}",["T_WHITESPACE","\n        ",137],["T_RETURN","return",138],["T_WHITESPACE"," ",138],["T_CONSTANT_ENCAPSED_STRING","''",138],";",["T_WHITESPACE","\n    ",138],"}",["T_WHITESPACE","\n",139],"}",["T_WHITESPACE","\n",140]]
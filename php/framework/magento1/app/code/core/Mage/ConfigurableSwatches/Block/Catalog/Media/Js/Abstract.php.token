[["T_OPEN_TAG","<?php\n",1],["T_DOC_COMMENT","\/**\n * Magento\n *\n * NOTICE OF LICENSE\n *\n * This source file is subject to the Open Software License (OSL 3.0)\n * that is bundled with this package in the file LICENSE.txt.\n * It is also available through the world-wide-web at this URL:\n * http:\/\/opensource.org\/licenses\/osl-3.0.php\n * If you did not receive a copy of the license and are unable to\n * obtain it through the world-wide-web, please send an email\n * to license@magento.com so we can send you a copy immediately.\n *\n * DISCLAIMER\n *\n * Do not edit or add to this file if you wish to upgrade Magento to newer\n * versions in the future. If you wish to customize Magento for your\n * needs please refer to http:\/\/www.magento.com for more information.\n *\n * @category    Mage\n * @package     Mage_ConfigurableSwatches\n * @copyright  Copyright (c) 2006-2016 X.commerce, Inc. and affiliates (http:\/\/www.magento.com)\n * @license    http:\/\/opensource.org\/licenses\/osl-3.0.php  Open Software License (OSL 3.0)\n *\/",2],["T_WHITESPACE","\n",25],["T_ABSTRACT","abstract",26],["T_WHITESPACE"," ",26],["T_CLASS","class",26],["T_WHITESPACE"," ",26],["T_STRING","Mage_ConfigurableSwatches_Block_Catalog_Media_Js_Abstract",26],["T_WHITESPACE"," ",26],["T_EXTENDS","extends",26],["T_WHITESPACE"," ",26],["T_STRING","Mage_Core_Block_Template",26],["T_WHITESPACE","\n",26],"{",["T_WHITESPACE","\n    ",27],["T_PROTECTED","protected",28],["T_WHITESPACE"," ",28],["T_VARIABLE","$_template",28],["T_WHITESPACE"," ",28],"=",["T_WHITESPACE"," ",28],["T_CONSTANT_ENCAPSED_STRING","'configurableswatches\/catalog\/media\/js.phtml'",28],";",["T_WHITESPACE","\n\n    ",28],["T_DOC_COMMENT","\/**\n     * A list of blocks that contain products. Used to get the current display mode (grid\/list).\n     *\n     * @var array\n     *\/",30],["T_WHITESPACE","\n    ",34],["T_PROTECTED","protected",35],["T_WHITESPACE"," ",35],["T_VARIABLE","$_productListBlocks",35],["T_WHITESPACE"," ",35],"=",["T_WHITESPACE"," ",35],["T_ARRAY","array",35],"(",["T_CONSTANT_ENCAPSED_STRING","'product_list'",35],",",["T_WHITESPACE"," ",35],["T_CONSTANT_ENCAPSED_STRING","'search_result_list'",35],")",";",["T_WHITESPACE","\n\n    ",35],["T_DOC_COMMENT","\/**\n     * Get target product IDs\n     *\n     * @return array\n     *\/",37],["T_WHITESPACE","\n    ",41],["T_ABSTRACT","abstract",42],["T_WHITESPACE"," ",42],["T_PUBLIC","public",42],["T_WHITESPACE"," ",42],["T_FUNCTION","function",42],["T_WHITESPACE"," ",42],["T_STRING","getProducts",42],"(",")",";",["T_WHITESPACE","\n\n    ",42],["T_DOC_COMMENT","\/**\n     * json encode image fallback array\n     *\n     * @param array $imageFallback\n     * @return string\n     *\/",44],["T_WHITESPACE","\n    ",49],["T_PROTECTED","protected",50],["T_WHITESPACE"," ",50],["T_FUNCTION","function",50],["T_WHITESPACE"," ",50],["T_STRING","_getJsImageFallbackString",50],"(",["T_ARRAY","array",50],["T_WHITESPACE"," ",50],["T_VARIABLE","$imageFallback",50],")",["T_WHITESPACE"," ",50],"{",["T_WHITESPACE","\n        ",50],["T_COMMENT","\/* @var $coreHelper Mage_Core_Helper_Data *\/",51],["T_WHITESPACE","\n        ",51],["T_VARIABLE","$coreHelper",52],["T_WHITESPACE"," ",52],"=",["T_WHITESPACE"," ",52],["T_STRING","Mage",52],["T_DOUBLE_COLON","::",52],["T_STRING","helper",52],"(",["T_CONSTANT_ENCAPSED_STRING","'core'",52],")",";",["T_WHITESPACE","\n\n        ",52],["T_RETURN","return",54],["T_WHITESPACE"," ",54],["T_VARIABLE","$coreHelper",54],["T_OBJECT_OPERATOR","->",54],["T_STRING","jsonEncode",54],"(",["T_VARIABLE","$imageFallback",54],")",";",["T_WHITESPACE","\n    ",54],"}",["T_WHITESPACE","\n\n    ",55],["T_DOC_COMMENT","\/**\n     * Image size(s) to attach to children products as array\n     *\n     * @return array\n     *\/",57],["T_WHITESPACE","\n    ",61],["T_ABSTRACT","abstract",62],["T_WHITESPACE"," ",62],["T_PROTECTED","protected",62],["T_WHITESPACE"," ",62],["T_FUNCTION","function",62],["T_WHITESPACE"," ",62],["T_STRING","_getImageSizes",62],"(",")",";",["T_WHITESPACE","\n\n    ",62],["T_DOC_COMMENT","\/**\n     * Get image fallbacks by product as\n     * array(product ID => array( product => product, image_fallback => image fallback ) )\n     *\n     * @param null $keepFrame\n     * @return array\n     *\/",64],["T_WHITESPACE","\n    ",70],["T_PUBLIC","public",71],["T_WHITESPACE"," ",71],["T_FUNCTION","function",71],["T_WHITESPACE"," ",71],["T_STRING","getProductImageFallbacks",71],"(",["T_VARIABLE","$keepFrame",71],["T_WHITESPACE"," ",71],"=",["T_WHITESPACE"," ",71],["T_STRING","null",71],")",["T_WHITESPACE"," ",71],"{",["T_WHITESPACE","\n        ",71],["T_COMMENT","\/* @var $helper Mage_ConfigurableSwatches_Helper_Mediafallback *\/",72],["T_WHITESPACE","\n        ",72],["T_VARIABLE","$helper",73],["T_WHITESPACE"," ",73],"=",["T_WHITESPACE"," ",73],["T_STRING","Mage",73],["T_DOUBLE_COLON","::",73],["T_STRING","helper",73],"(",["T_CONSTANT_ENCAPSED_STRING","'configurableswatches\/mediafallback'",73],")",";",["T_WHITESPACE","\n\n        ",73],["T_VARIABLE","$fallbacks",75],["T_WHITESPACE"," ",75],"=",["T_WHITESPACE"," ",75],["T_ARRAY","array",75],"(",")",";",["T_WHITESPACE","\n\n        ",75],["T_VARIABLE","$products",77],["T_WHITESPACE"," ",77],"=",["T_WHITESPACE"," ",77],["T_VARIABLE","$this",77],["T_OBJECT_OPERATOR","->",77],["T_STRING","getProducts",77],"(",")",";",["T_WHITESPACE","\n\n        ",77],["T_IF","if",79],["T_WHITESPACE"," ",79],"(",["T_VARIABLE","$keepFrame",79],["T_WHITESPACE"," ",79],["T_IS_IDENTICAL","===",79],["T_WHITESPACE"," ",79],["T_STRING","null",79],")",["T_WHITESPACE"," ",79],"{",["T_WHITESPACE","\n            ",79],["T_VARIABLE","$keepFrame",80],["T_WHITESPACE"," ",80],"=",["T_WHITESPACE"," ",80],["T_VARIABLE","$this",80],["T_OBJECT_OPERATOR","->",80],["T_STRING","isKeepFrame",80],"(",")",";",["T_WHITESPACE","\n        ",80],"}",["T_WHITESPACE","\n\n        ",81],["T_COMMENT","\/* @var $product Mage_Catalog_Model_Product *\/",83],["T_WHITESPACE","\n        ",83],["T_FOREACH","foreach",84],["T_WHITESPACE"," ",84],"(",["T_VARIABLE","$products",84],["T_WHITESPACE"," ",84],["T_AS","as",84],["T_WHITESPACE"," ",84],["T_VARIABLE","$product",84],")",["T_WHITESPACE"," ",84],"{",["T_WHITESPACE","\n            ",84],["T_VARIABLE","$imageFallback",85],["T_WHITESPACE"," ",85],"=",["T_WHITESPACE"," ",85],["T_VARIABLE","$helper",85],["T_OBJECT_OPERATOR","->",85],["T_STRING","getConfigurableImagesFallbackArray",85],"(",["T_VARIABLE","$product",85],",",["T_WHITESPACE"," ",85],["T_VARIABLE","$this",85],["T_OBJECT_OPERATOR","->",85],["T_STRING","_getImageSizes",85],"(",")",",",["T_WHITESPACE"," ",85],["T_VARIABLE","$keepFrame",85],")",";",["T_WHITESPACE","\n\n            ",85],["T_VARIABLE","$fallbacks",87],"[",["T_VARIABLE","$product",87],["T_OBJECT_OPERATOR","->",87],["T_STRING","getId",87],"(",")","]",["T_WHITESPACE"," ",87],"=",["T_WHITESPACE"," ",87],["T_ARRAY","array",87],"(",["T_WHITESPACE","\n                ",87],["T_CONSTANT_ENCAPSED_STRING","'product'",88],["T_WHITESPACE"," ",88],["T_DOUBLE_ARROW","=>",88],["T_WHITESPACE"," ",88],["T_VARIABLE","$product",88],",",["T_WHITESPACE","\n                ",88],["T_CONSTANT_ENCAPSED_STRING","'image_fallback'",89],["T_WHITESPACE"," ",89],["T_DOUBLE_ARROW","=>",89],["T_WHITESPACE"," ",89],["T_VARIABLE","$this",89],["T_OBJECT_OPERATOR","->",89],["T_STRING","_getJsImageFallbackString",89],"(",["T_VARIABLE","$imageFallback",89],")",["T_WHITESPACE","\n            ",89],")",";",["T_WHITESPACE","\n        ",90],"}",["T_WHITESPACE","\n\n        ",91],["T_RETURN","return",93],["T_WHITESPACE"," ",93],["T_VARIABLE","$fallbacks",93],";",["T_WHITESPACE","\n    ",93],"}",["T_WHITESPACE","\n\n    ",94],["T_DOC_COMMENT","\/**\n     * Is need keep frame\n     *\n     * @return bool\n     *\/",96],["T_WHITESPACE","\n    ",100],["T_PUBLIC","public",101],["T_WHITESPACE"," ",101],["T_FUNCTION","function",101],["T_WHITESPACE"," ",101],["T_STRING","isKeepFrame",101],"(",")",["T_WHITESPACE","\n    ",101],"{",["T_WHITESPACE","\n        ",102],["T_VARIABLE","$keepFrame",103],["T_WHITESPACE"," ",103],"=",["T_WHITESPACE"," ",103],["T_STRING","false",103],";",["T_WHITESPACE","\n        ",103],["T_FOREACH","foreach",104],["T_WHITESPACE"," ",104],"(",["T_VARIABLE","$this",104],["T_OBJECT_OPERATOR","->",104],["T_STRING","_productListBlocks",104],["T_WHITESPACE"," ",104],["T_AS","as",104],["T_WHITESPACE"," ",104],["T_VARIABLE","$blockName",104],")",["T_WHITESPACE"," ",104],"{",["T_WHITESPACE","\n            ",104],["T_VARIABLE","$listBlock",105],["T_WHITESPACE"," ",105],"=",["T_WHITESPACE"," ",105],["T_VARIABLE","$this",105],["T_OBJECT_OPERATOR","->",105],["T_STRING","getLayout",105],"(",")",["T_OBJECT_OPERATOR","->",105],["T_STRING","getBlock",105],"(",["T_VARIABLE","$blockName",105],")",";",["T_WHITESPACE","\n\n            ",105],["T_IF","if",107],["T_WHITESPACE"," ",107],"(",["T_VARIABLE","$listBlock",107],["T_WHITESPACE"," ",107],["T_BOOLEAN_AND","&&",107],["T_WHITESPACE"," ",107],["T_VARIABLE","$listBlock",107],["T_OBJECT_OPERATOR","->",107],["T_STRING","getMode",107],"(",")",["T_WHITESPACE"," ",107],["T_IS_EQUAL","==",107],["T_WHITESPACE"," ",107],["T_CONSTANT_ENCAPSED_STRING","'grid'",107],")",["T_WHITESPACE"," ",107],"{",["T_WHITESPACE","\n                ",107],["T_VARIABLE","$keepFrame",108],["T_WHITESPACE"," ",108],"=",["T_WHITESPACE"," ",108],["T_STRING","true",108],";",["T_WHITESPACE","\n                ",108],["T_BREAK","break",109],";",["T_WHITESPACE","\n            ",109],"}",["T_WHITESPACE","\n        ",110],"}",["T_WHITESPACE","\n        ",111],["T_RETURN","return",112],["T_WHITESPACE"," ",112],["T_VARIABLE","$keepFrame",112],";",["T_WHITESPACE","\n    ",112],"}",["T_WHITESPACE","\n\n    ",113],["T_DOC_COMMENT","\/**\n     * Get image type to pass to configurable media image JS\n     *\n     * @return string\n     *\/",115],["T_WHITESPACE","\n    ",119],["T_PUBLIC","public",120],["T_WHITESPACE"," ",120],["T_FUNCTION","function",120],["T_WHITESPACE"," ",120],["T_STRING","getImageType",120],"(",")",["T_WHITESPACE"," ",120],"{",["T_WHITESPACE","\n        ",120],["T_RETURN","return",121],["T_WHITESPACE"," ",121],["T_STRING","parent",121],["T_DOUBLE_COLON","::",121],["T_STRING","getImageType",121],"(",")",";",["T_WHITESPACE","\n    ",121],"}",["T_WHITESPACE","\n\n    ",122],["T_DOC_COMMENT","\/**\n     * Prevent actual block render if we are disabled, and i.e. via the module\n     * config as opposed to the advanced module settings page\n     *\n     * @return string\n     *\/",124],["T_WHITESPACE","\n    ",129],["T_PROTECTED","protected",130],["T_WHITESPACE"," ",130],["T_FUNCTION","function",130],["T_WHITESPACE"," ",130],["T_STRING","_toHtml",130],"(",")",["T_WHITESPACE"," ",130],"{",["T_WHITESPACE","\n        ",130],["T_IF","if",131],["T_WHITESPACE"," ",131],"(","!",["T_STRING","Mage",131],["T_DOUBLE_COLON","::",131],["T_STRING","helper",131],"(",["T_CONSTANT_ENCAPSED_STRING","'configurableswatches'",131],")",["T_OBJECT_OPERATOR","->",131],["T_STRING","isEnabled",131],"(",")",")",["T_WHITESPACE"," ",131],"{",["T_WHITESPACE"," ",131],["T_COMMENT","\/\/ functionality disabled\n",131],["T_WHITESPACE","            ",132],["T_RETURN","return",132],["T_WHITESPACE"," ",132],["T_CONSTANT_ENCAPSED_STRING","''",132],";",["T_WHITESPACE"," ",132],["T_COMMENT","\/\/ do not render block\n",132],["T_WHITESPACE","        ",133],"}",["T_WHITESPACE","\n        ",133],["T_RETURN","return",134],["T_WHITESPACE"," ",134],["T_STRING","parent",134],["T_DOUBLE_COLON","::",134],["T_STRING","_toHtml",134],"(",")",";",["T_WHITESPACE","\n    ",134],"}",["T_WHITESPACE","\n",135],"}",["T_WHITESPACE","\n",136]]
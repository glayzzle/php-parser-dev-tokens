[["T_OPEN_TAG","<?php\n",1],["T_DOC_COMMENT","\/**\n * Magento\n *\n * NOTICE OF LICENSE\n *\n * This source file is subject to the Open Software License (OSL 3.0)\n * that is bundled with this package in the file LICENSE.txt.\n * It is also available through the world-wide-web at this URL:\n * http:\/\/opensource.org\/licenses\/osl-3.0.php\n * If you did not receive a copy of the license and are unable to\n * obtain it through the world-wide-web, please send an email\n * to license@magento.com so we can send you a copy immediately.\n *\n * DISCLAIMER\n *\n * Do not edit or add to this file if you wish to upgrade Magento to newer\n * versions in the future. If you wish to customize Magento for your\n * needs please refer to http:\/\/www.magento.com for more information.\n *\n * @category    Mage\n * @package     Mage_Log\n * @copyright  Copyright (c) 2006-2016 X.commerce, Inc. and affiliates (http:\/\/www.magento.com)\n * @license    http:\/\/opensource.org\/licenses\/osl-3.0.php  Open Software License (OSL 3.0)\n *\/",2],["T_WHITESPACE","\n\n\n",25],["T_DOC_COMMENT","\/**\n * Customer log resource\n *\n * @category   Mage\n * @package    Mage_Log\n * @author     Magento Core Team <core@magentocommerce.com>\n *\/",28],["T_WHITESPACE","\n\n",34],["T_CLASS","class",36],["T_WHITESPACE"," ",36],["T_STRING","Mage_Log_Model_Resource_Customer",36],["T_WHITESPACE"," ",36],["T_EXTENDS","extends",36],["T_WHITESPACE"," ",36],["T_STRING","Mage_Core_Model_Resource_Db_Abstract",36],["T_WHITESPACE","\n",36],"{",["T_WHITESPACE","\n    ",37],["T_DOC_COMMENT","\/**\n     * Visitor data table name\n     *\n     * @var string\n     *\/",38],["T_WHITESPACE","\n    ",42],["T_PROTECTED","protected",43],["T_WHITESPACE"," ",43],["T_VARIABLE","$_visitorTable",43],";",["T_WHITESPACE","\n\n    ",43],["T_DOC_COMMENT","\/**\n     * Visitor info data table\n     *\n     * @var string\n     *\/",45],["T_WHITESPACE","\n    ",49],["T_PROTECTED","protected",50],["T_WHITESPACE"," ",50],["T_VARIABLE","$_visitorInfoTable",50],";",["T_WHITESPACE","\n\n    ",50],["T_DOC_COMMENT","\/**\n     * Customer data table\n     *\n     * @var string\n     *\/",52],["T_WHITESPACE","\n    ",56],["T_PROTECTED","protected",57],["T_WHITESPACE"," ",57],["T_VARIABLE","$_customerTable",57],";",["T_WHITESPACE","\n\n    ",57],["T_DOC_COMMENT","\/**\n     * Url info data table\n     *\n     * @var string\n     *\/",59],["T_WHITESPACE","\n    ",63],["T_PROTECTED","protected",64],["T_WHITESPACE"," ",64],["T_VARIABLE","$_urlInfoTable",64],";",["T_WHITESPACE","\n\n    ",64],["T_DOC_COMMENT","\/**\n     * Log URL data table name.\n     *\n     * @var string\n     *\/",66],["T_WHITESPACE","\n    ",70],["T_PROTECTED","protected",71],["T_WHITESPACE"," ",71],["T_VARIABLE","$_urlTable",71],";",["T_WHITESPACE","\n\n    ",71],["T_DOC_COMMENT","\/**\n     * Log quote data table name.\n     *\n     * @var string\n     *\/",73],["T_WHITESPACE","\n    ",77],["T_PROTECTED","protected",78],["T_WHITESPACE"," ",78],["T_VARIABLE","$_quoteTable",78],";",["T_WHITESPACE","\n\n    ",78],["T_DOC_COMMENT","\/**\n     * Resource initialization\n     *\/",80],["T_WHITESPACE","\n    ",82],["T_PROTECTED","protected",83],["T_WHITESPACE"," ",83],["T_FUNCTION","function",83],["T_WHITESPACE"," ",83],["T_STRING","_construct",83],"(",")",["T_WHITESPACE","\n    ",83],"{",["T_WHITESPACE","\n        ",84],["T_VARIABLE","$this",85],["T_OBJECT_OPERATOR","->",85],["T_STRING","_init",85],"(",["T_CONSTANT_ENCAPSED_STRING","'log\/customer'",85],",",["T_WHITESPACE"," ",85],["T_CONSTANT_ENCAPSED_STRING","'log_id'",85],")",";",["T_WHITESPACE","\n\n        ",85],["T_VARIABLE","$this",87],["T_OBJECT_OPERATOR","->",87],["T_STRING","_visitorTable",87],["T_WHITESPACE","        ",87],"=",["T_WHITESPACE"," ",87],["T_VARIABLE","$this",87],["T_OBJECT_OPERATOR","->",87],["T_STRING","getTable",87],"(",["T_CONSTANT_ENCAPSED_STRING","'log\/visitor'",87],")",";",["T_WHITESPACE","\n        ",87],["T_VARIABLE","$this",88],["T_OBJECT_OPERATOR","->",88],["T_STRING","_visitorInfoTable",88],["T_WHITESPACE","    ",88],"=",["T_WHITESPACE"," ",88],["T_VARIABLE","$this",88],["T_OBJECT_OPERATOR","->",88],["T_STRING","getTable",88],"(",["T_CONSTANT_ENCAPSED_STRING","'log\/visitor_info'",88],")",";",["T_WHITESPACE","\n        ",88],["T_VARIABLE","$this",89],["T_OBJECT_OPERATOR","->",89],["T_STRING","_urlTable",89],["T_WHITESPACE","            ",89],"=",["T_WHITESPACE"," ",89],["T_VARIABLE","$this",89],["T_OBJECT_OPERATOR","->",89],["T_STRING","getTable",89],"(",["T_CONSTANT_ENCAPSED_STRING","'log\/url_table'",89],")",";",["T_WHITESPACE","\n        ",89],["T_VARIABLE","$this",90],["T_OBJECT_OPERATOR","->",90],["T_STRING","_urlInfoTable",90],["T_WHITESPACE","        ",90],"=",["T_WHITESPACE"," ",90],["T_VARIABLE","$this",90],["T_OBJECT_OPERATOR","->",90],["T_STRING","getTable",90],"(",["T_CONSTANT_ENCAPSED_STRING","'log\/url_info_table'",90],")",";",["T_WHITESPACE","\n        ",90],["T_VARIABLE","$this",91],["T_OBJECT_OPERATOR","->",91],["T_STRING","_customerTable",91],["T_WHITESPACE","       ",91],"=",["T_WHITESPACE"," ",91],["T_VARIABLE","$this",91],["T_OBJECT_OPERATOR","->",91],["T_STRING","getTable",91],"(",["T_CONSTANT_ENCAPSED_STRING","'log\/customer'",91],")",";",["T_WHITESPACE","\n        ",91],["T_VARIABLE","$this",92],["T_OBJECT_OPERATOR","->",92],["T_STRING","_quoteTable",92],["T_WHITESPACE","          ",92],"=",["T_WHITESPACE"," ",92],["T_VARIABLE","$this",92],["T_OBJECT_OPERATOR","->",92],["T_STRING","getTable",92],"(",["T_CONSTANT_ENCAPSED_STRING","'log\/quote_table'",92],")",";",["T_WHITESPACE","\n    ",92],"}",["T_WHITESPACE","\n\n    ",93],["T_DOC_COMMENT","\/**\n     * Retrieve select object for load object data\n     * \n     * @param string $field\n     * @param mixed $value\n     * @param Mage_Log_Model_Customer $object\n     * @return Varien_Db_Select\n     *\/",95],["T_WHITESPACE","\n    ",102],["T_PROTECTED","protected",103],["T_WHITESPACE"," ",103],["T_FUNCTION","function",103],["T_WHITESPACE"," ",103],["T_STRING","_getLoadSelect",103],"(",["T_VARIABLE","$field",103],",",["T_WHITESPACE"," ",103],["T_VARIABLE","$value",103],",",["T_WHITESPACE"," ",103],["T_VARIABLE","$object",103],")",["T_WHITESPACE","\n    ",103],"{",["T_WHITESPACE","\n        ",104],["T_VARIABLE","$select",105],["T_WHITESPACE"," ",105],"=",["T_WHITESPACE"," ",105],["T_STRING","parent",105],["T_DOUBLE_COLON","::",105],["T_STRING","_getLoadSelect",105],"(",["T_VARIABLE","$field",105],",",["T_WHITESPACE"," ",105],["T_VARIABLE","$value",105],",",["T_WHITESPACE"," ",105],["T_VARIABLE","$object",105],")",";",["T_WHITESPACE","\n        ",105],["T_IF","if",106],["T_WHITESPACE"," ",106],"(",["T_VARIABLE","$field",106],["T_WHITESPACE"," ",106],["T_IS_EQUAL","==",106],["T_WHITESPACE"," ",106],["T_CONSTANT_ENCAPSED_STRING","'customer_id'",106],")",["T_WHITESPACE"," ",106],"{",["T_WHITESPACE","\n            ",106],["T_COMMENT","\/\/ load additional data by last login\n",107],["T_WHITESPACE","            ",108],["T_VARIABLE","$table",108],["T_WHITESPACE","  ",108],"=",["T_WHITESPACE"," ",108],["T_VARIABLE","$this",108],["T_OBJECT_OPERATOR","->",108],["T_STRING","getMainTable",108],"(",")",";",["T_WHITESPACE","\n            ",108],["T_VARIABLE","$select",109],["T_WHITESPACE","\n                ",109],["T_OBJECT_OPERATOR","->",110],["T_STRING","joinInner",110],"(",["T_WHITESPACE","\n                    ",110],["T_ARRAY","array",111],"(",["T_CONSTANT_ENCAPSED_STRING","'lvt'",111],["T_WHITESPACE"," ",111],["T_DOUBLE_ARROW","=>",111],["T_WHITESPACE"," ",111],["T_VARIABLE","$this",111],["T_OBJECT_OPERATOR","->",111],["T_STRING","_visitorTable",111],")",",",["T_WHITESPACE","\n                    ",111],"\"",["T_ENCAPSED_AND_WHITESPACE","lvt.visitor_id = ",112],["T_CURLY_OPEN","{",112],["T_VARIABLE","$table",112],"}",["T_ENCAPSED_AND_WHITESPACE",".visitor_id",112],"\"",",",["T_WHITESPACE","\n                    ",112],["T_ARRAY","array",113],"(",["T_CONSTANT_ENCAPSED_STRING","'last_visit_at'",113],")",")",["T_WHITESPACE","\n                ",113],["T_OBJECT_OPERATOR","->",114],["T_STRING","joinInner",114],"(",["T_WHITESPACE","\n                    ",114],["T_ARRAY","array",115],"(",["T_CONSTANT_ENCAPSED_STRING","'lvit'",115],["T_WHITESPACE"," ",115],["T_DOUBLE_ARROW","=>",115],["T_WHITESPACE"," ",115],["T_VARIABLE","$this",115],["T_OBJECT_OPERATOR","->",115],["T_STRING","_visitorInfoTable",115],")",",",["T_WHITESPACE","\n                    ",115],["T_CONSTANT_ENCAPSED_STRING","'lvt.visitor_id = lvit.visitor_id'",116],",",["T_WHITESPACE","\n                    ",116],["T_ARRAY","array",117],"(",["T_CONSTANT_ENCAPSED_STRING","'http_referer'",117],",",["T_WHITESPACE"," ",117],["T_CONSTANT_ENCAPSED_STRING","'remote_addr'",117],")",")",["T_WHITESPACE","\n                ",117],["T_OBJECT_OPERATOR","->",118],["T_STRING","joinInner",118],"(",["T_WHITESPACE","\n                    ",118],["T_ARRAY","array",119],"(",["T_CONSTANT_ENCAPSED_STRING","'luit'",119],["T_WHITESPACE"," ",119],["T_DOUBLE_ARROW","=>",119],["T_WHITESPACE"," ",119],["T_VARIABLE","$this",119],["T_OBJECT_OPERATOR","->",119],["T_STRING","_urlInfoTable",119],")",",",["T_WHITESPACE","\n                    ",119],["T_CONSTANT_ENCAPSED_STRING","'luit.url_id = lvt.last_url_id'",120],",",["T_WHITESPACE","\n                    ",120],["T_ARRAY","array",121],"(",["T_CONSTANT_ENCAPSED_STRING","'url'",121],")",")",["T_WHITESPACE","\n                ",121],["T_OBJECT_OPERATOR","->",122],["T_STRING","order",122],"(","\"",["T_CURLY_OPEN","{",122],["T_VARIABLE","$table",122],"}",["T_ENCAPSED_AND_WHITESPACE",".login_at DESC",122],"\"",")",["T_WHITESPACE","\n                ",122],["T_OBJECT_OPERATOR","->",123],["T_STRING","limit",123],"(",["T_LNUMBER","1",123],")",";",["T_WHITESPACE","\n        ",123],"}",["T_WHITESPACE","\n        ",124],["T_RETURN","return",125],["T_WHITESPACE"," ",125],["T_VARIABLE","$select",125],";",["T_WHITESPACE","\n    ",125],"}",["T_WHITESPACE","\n",126],"}",["T_WHITESPACE","\n",127]]
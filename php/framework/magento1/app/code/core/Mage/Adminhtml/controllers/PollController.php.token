[["T_OPEN_TAG","<?php\n",1],["T_DOC_COMMENT","\/**\n * Magento\n *\n * NOTICE OF LICENSE\n *\n * This source file is subject to the Open Software License (OSL 3.0)\n * that is bundled with this package in the file LICENSE.txt.\n * It is also available through the world-wide-web at this URL:\n * http:\/\/opensource.org\/licenses\/osl-3.0.php\n * If you did not receive a copy of the license and are unable to\n * obtain it through the world-wide-web, please send an email\n * to license@magento.com so we can send you a copy immediately.\n *\n * DISCLAIMER\n *\n * Do not edit or add to this file if you wish to upgrade Magento to newer\n * versions in the future. If you wish to customize Magento for your\n * needs please refer to http:\/\/www.magento.com for more information.\n *\n * @category    Mage\n * @package     Mage_Adminhtml\n * @copyright  Copyright (c) 2006-2016 X.commerce, Inc. and affiliates (http:\/\/www.magento.com)\n * @license    http:\/\/opensource.org\/licenses\/osl-3.0.php  Open Software License (OSL 3.0)\n *\/",2],["T_WHITESPACE","\n\n",25],["T_DOC_COMMENT","\/**\n * Adminhtml poll manager controller\n *\n * @category   Mage\n * @package    Mage_Adminhtml\n * @author      Magento Core Team <core@magentocommerce.com>\n *\/",27],["T_WHITESPACE","\n",33],["T_CLASS","class",34],["T_WHITESPACE"," ",34],["T_STRING","Mage_Adminhtml_PollController",34],["T_WHITESPACE"," ",34],["T_EXTENDS","extends",34],["T_WHITESPACE"," ",34],["T_STRING","Mage_Adminhtml_Controller_Action",34],["T_WHITESPACE","\n",34],"{",["T_WHITESPACE","\n\n    ",35],["T_PUBLIC","public",37],["T_WHITESPACE"," ",37],["T_FUNCTION","function",37],["T_WHITESPACE"," ",37],["T_STRING","indexAction",37],"(",")",["T_WHITESPACE","\n    ",37],"{",["T_WHITESPACE","\n        ",38],["T_VARIABLE","$this",39],["T_OBJECT_OPERATOR","->",39],["T_STRING","_title",39],"(",["T_VARIABLE","$this",39],["T_OBJECT_OPERATOR","->",39],["T_STRING","__",39],"(",["T_CONSTANT_ENCAPSED_STRING","'CMS'",39],")",")",["T_OBJECT_OPERATOR","->",39],["T_STRING","_title",39],"(",["T_VARIABLE","$this",39],["T_OBJECT_OPERATOR","->",39],["T_STRING","__",39],"(",["T_CONSTANT_ENCAPSED_STRING","'Polls'",39],")",")",";",["T_WHITESPACE","\n\n        ",39],["T_VARIABLE","$this",41],["T_OBJECT_OPERATOR","->",41],["T_STRING","loadLayout",41],"(",")",";",["T_WHITESPACE","\n        ",41],["T_VARIABLE","$this",42],["T_OBJECT_OPERATOR","->",42],["T_STRING","_setActiveMenu",42],"(",["T_CONSTANT_ENCAPSED_STRING","'cms\/poll'",42],")",";",["T_WHITESPACE","\n        ",42],["T_VARIABLE","$this",43],["T_OBJECT_OPERATOR","->",43],["T_STRING","_addBreadcrumb",43],"(",["T_STRING","Mage",43],["T_DOUBLE_COLON","::",43],["T_STRING","helper",43],"(",["T_CONSTANT_ENCAPSED_STRING","'adminhtml'",43],")",["T_OBJECT_OPERATOR","->",43],["T_STRING","__",43],"(",["T_CONSTANT_ENCAPSED_STRING","'Poll Manager'",43],")",",",["T_WHITESPACE"," ",43],["T_STRING","Mage",43],["T_DOUBLE_COLON","::",43],["T_STRING","helper",43],"(",["T_CONSTANT_ENCAPSED_STRING","'adminhtml'",43],")",["T_OBJECT_OPERATOR","->",43],["T_STRING","__",43],"(",["T_CONSTANT_ENCAPSED_STRING","'Poll Manager'",43],")",")",";",["T_WHITESPACE","\n\n        ",43],["T_VARIABLE","$this",45],["T_OBJECT_OPERATOR","->",45],["T_STRING","_addContent",45],"(",["T_VARIABLE","$this",45],["T_OBJECT_OPERATOR","->",45],["T_STRING","getLayout",45],"(",")",["T_OBJECT_OPERATOR","->",45],["T_STRING","createBlock",45],"(",["T_CONSTANT_ENCAPSED_STRING","'adminhtml\/poll_poll'",45],")",")",";",["T_WHITESPACE","\n        ",45],["T_VARIABLE","$this",46],["T_OBJECT_OPERATOR","->",46],["T_STRING","renderLayout",46],"(",")",";",["T_WHITESPACE","\n    ",46],"}",["T_WHITESPACE","\n\n    ",47],["T_PUBLIC","public",49],["T_WHITESPACE"," ",49],["T_FUNCTION","function",49],["T_WHITESPACE"," ",49],["T_STRING","editAction",49],"(",")",["T_WHITESPACE","\n    ",49],"{",["T_WHITESPACE","\n        ",50],["T_VARIABLE","$this",51],["T_OBJECT_OPERATOR","->",51],["T_STRING","_title",51],"(",["T_VARIABLE","$this",51],["T_OBJECT_OPERATOR","->",51],["T_STRING","__",51],"(",["T_CONSTANT_ENCAPSED_STRING","'CMS'",51],")",")",["T_OBJECT_OPERATOR","->",51],["T_STRING","_title",51],"(",["T_VARIABLE","$this",51],["T_OBJECT_OPERATOR","->",51],["T_STRING","__",51],"(",["T_CONSTANT_ENCAPSED_STRING","'Polls'",51],")",")",";",["T_WHITESPACE","\n\n        ",51],["T_VARIABLE","$pollId",53],["T_WHITESPACE","     ",53],"=",["T_WHITESPACE"," ",53],["T_VARIABLE","$this",53],["T_OBJECT_OPERATOR","->",53],["T_STRING","getRequest",53],"(",")",["T_OBJECT_OPERATOR","->",53],["T_STRING","getParam",53],"(",["T_CONSTANT_ENCAPSED_STRING","'id'",53],")",";",["T_WHITESPACE","\n        ",53],["T_VARIABLE","$pollModel",54],["T_WHITESPACE","  ",54],"=",["T_WHITESPACE"," ",54],["T_STRING","Mage",54],["T_DOUBLE_COLON","::",54],["T_STRING","getModel",54],"(",["T_CONSTANT_ENCAPSED_STRING","'poll\/poll'",54],")",["T_OBJECT_OPERATOR","->",54],["T_STRING","load",54],"(",["T_VARIABLE","$pollId",54],")",";",["T_WHITESPACE","\n\n        ",54],["T_IF","if",56],["T_WHITESPACE"," ",56],"(",["T_VARIABLE","$pollModel",56],["T_OBJECT_OPERATOR","->",56],["T_STRING","getId",56],"(",")",["T_WHITESPACE"," ",56],["T_BOOLEAN_OR","||",56],["T_WHITESPACE"," ",56],["T_VARIABLE","$pollId",56],["T_WHITESPACE"," ",56],["T_IS_EQUAL","==",56],["T_WHITESPACE"," ",56],["T_LNUMBER","0",56],")",["T_WHITESPACE"," ",56],"{",["T_WHITESPACE","\n            ",56],["T_VARIABLE","$this",57],["T_OBJECT_OPERATOR","->",57],["T_STRING","_title",57],"(",["T_VARIABLE","$pollModel",57],["T_OBJECT_OPERATOR","->",57],["T_STRING","getId",57],"(",")",["T_WHITESPACE"," ",57],"?",["T_WHITESPACE"," ",57],["T_VARIABLE","$pollModel",57],["T_OBJECT_OPERATOR","->",57],["T_STRING","getPollTitle",57],"(",")",["T_WHITESPACE"," ",57],":",["T_WHITESPACE"," ",57],["T_VARIABLE","$this",57],["T_OBJECT_OPERATOR","->",57],["T_STRING","__",57],"(",["T_CONSTANT_ENCAPSED_STRING","'New Poll'",57],")",")",";",["T_WHITESPACE","\n\n            ",57],["T_STRING","Mage",59],["T_DOUBLE_COLON","::",59],["T_STRING","register",59],"(",["T_CONSTANT_ENCAPSED_STRING","'poll_data'",59],",",["T_WHITESPACE"," ",59],["T_VARIABLE","$pollModel",59],")",";",["T_WHITESPACE","\n\n            ",59],["T_VARIABLE","$this",61],["T_OBJECT_OPERATOR","->",61],["T_STRING","loadLayout",61],"(",")",";",["T_WHITESPACE","\n            ",61],["T_VARIABLE","$this",62],["T_OBJECT_OPERATOR","->",62],["T_STRING","_setActiveMenu",62],"(",["T_CONSTANT_ENCAPSED_STRING","'cms\/poll'",62],")",";",["T_WHITESPACE","\n            ",62],["T_VARIABLE","$this",63],["T_OBJECT_OPERATOR","->",63],["T_STRING","_addBreadcrumb",63],"(",["T_STRING","Mage",63],["T_DOUBLE_COLON","::",63],["T_STRING","helper",63],"(",["T_CONSTANT_ENCAPSED_STRING","'adminhtml'",63],")",["T_OBJECT_OPERATOR","->",63],["T_STRING","__",63],"(",["T_CONSTANT_ENCAPSED_STRING","'Poll Manager'",63],")",",",["T_WHITESPACE"," ",63],["T_STRING","Mage",63],["T_DOUBLE_COLON","::",63],["T_STRING","helper",63],"(",["T_CONSTANT_ENCAPSED_STRING","'adminhtml'",63],")",["T_OBJECT_OPERATOR","->",63],["T_STRING","__",63],"(",["T_CONSTANT_ENCAPSED_STRING","'Poll Manager'",63],")",",",["T_WHITESPACE"," ",63],["T_VARIABLE","$this",63],["T_OBJECT_OPERATOR","->",63],["T_STRING","getUrl",63],"(",["T_CONSTANT_ENCAPSED_STRING","'*\/*\/'",63],")",")",";",["T_WHITESPACE","\n            ",63],["T_VARIABLE","$this",64],["T_OBJECT_OPERATOR","->",64],["T_STRING","_addBreadcrumb",64],"(",["T_STRING","Mage",64],["T_DOUBLE_COLON","::",64],["T_STRING","helper",64],"(",["T_CONSTANT_ENCAPSED_STRING","'adminhtml'",64],")",["T_OBJECT_OPERATOR","->",64],["T_STRING","__",64],"(",["T_CONSTANT_ENCAPSED_STRING","'Edit Poll'",64],")",",",["T_WHITESPACE"," ",64],["T_STRING","Mage",64],["T_DOUBLE_COLON","::",64],["T_STRING","helper",64],"(",["T_CONSTANT_ENCAPSED_STRING","'adminhtml'",64],")",["T_OBJECT_OPERATOR","->",64],["T_STRING","__",64],"(",["T_CONSTANT_ENCAPSED_STRING","'Edit Poll'",64],")",")",";",["T_WHITESPACE","\n\n            ",64],["T_VARIABLE","$this",66],["T_OBJECT_OPERATOR","->",66],["T_STRING","getLayout",66],"(",")",["T_OBJECT_OPERATOR","->",66],["T_STRING","getBlock",66],"(",["T_CONSTANT_ENCAPSED_STRING","'head'",66],")",["T_OBJECT_OPERATOR","->",66],["T_STRING","setCanLoadExtJs",66],"(",["T_STRING","true",66],")",";",["T_WHITESPACE","\n            ",66],["T_VARIABLE","$this",67],["T_OBJECT_OPERATOR","->",67],["T_STRING","_addContent",67],"(",["T_VARIABLE","$this",67],["T_OBJECT_OPERATOR","->",67],["T_STRING","getLayout",67],"(",")",["T_OBJECT_OPERATOR","->",67],["T_STRING","createBlock",67],"(",["T_CONSTANT_ENCAPSED_STRING","'adminhtml\/poll_edit'",67],")",")",["T_WHITESPACE","\n                ",67],["T_OBJECT_OPERATOR","->",68],["T_STRING","_addLeft",68],"(",["T_VARIABLE","$this",68],["T_OBJECT_OPERATOR","->",68],["T_STRING","getLayout",68],"(",")",["T_OBJECT_OPERATOR","->",68],["T_STRING","createBlock",68],"(",["T_CONSTANT_ENCAPSED_STRING","'adminhtml\/poll_edit_tabs'",68],")",")",";",["T_WHITESPACE","\n\n            ",68],["T_VARIABLE","$this",70],["T_OBJECT_OPERATOR","->",70],["T_STRING","renderLayout",70],"(",")",";",["T_WHITESPACE","\n        ",70],"}",["T_WHITESPACE"," ",71],["T_ELSE","else",71],["T_WHITESPACE"," ",71],"{",["T_WHITESPACE","\n            ",71],["T_STRING","Mage",72],["T_DOUBLE_COLON","::",72],["T_STRING","getSingleton",72],"(",["T_CONSTANT_ENCAPSED_STRING","'adminhtml\/session'",72],")",["T_OBJECT_OPERATOR","->",72],["T_STRING","addError",72],"(",["T_STRING","Mage",72],["T_DOUBLE_COLON","::",72],["T_STRING","helper",72],"(",["T_CONSTANT_ENCAPSED_STRING","'poll'",72],")",["T_OBJECT_OPERATOR","->",72],["T_STRING","__",72],"(",["T_CONSTANT_ENCAPSED_STRING","'The poll does not exist.'",72],")",")",";",["T_WHITESPACE","\n            ",72],["T_VARIABLE","$this",73],["T_OBJECT_OPERATOR","->",73],["T_STRING","_redirect",73],"(",["T_CONSTANT_ENCAPSED_STRING","'*\/*\/'",73],")",";",["T_WHITESPACE","\n        ",73],"}",["T_WHITESPACE","\n    ",74],"}",["T_WHITESPACE","\n\n    ",75],["T_PUBLIC","public",77],["T_WHITESPACE"," ",77],["T_FUNCTION","function",77],["T_WHITESPACE"," ",77],["T_STRING","deleteAction",77],"(",")",["T_WHITESPACE","\n    ",77],"{",["T_WHITESPACE","\n        ",78],["T_IF","if",79],["T_WHITESPACE"," ",79],"(",["T_VARIABLE","$id",79],["T_WHITESPACE"," ",79],"=",["T_WHITESPACE"," ",79],["T_VARIABLE","$this",79],["T_OBJECT_OPERATOR","->",79],["T_STRING","getRequest",79],"(",")",["T_OBJECT_OPERATOR","->",79],["T_STRING","getParam",79],"(",["T_CONSTANT_ENCAPSED_STRING","'id'",79],")",")",["T_WHITESPACE"," ",79],"{",["T_WHITESPACE","\n            ",79],["T_TRY","try",80],["T_WHITESPACE"," ",80],"{",["T_WHITESPACE","\n                ",80],["T_VARIABLE","$model",81],["T_WHITESPACE"," ",81],"=",["T_WHITESPACE"," ",81],["T_STRING","Mage",81],["T_DOUBLE_COLON","::",81],["T_STRING","getModel",81],"(",["T_CONSTANT_ENCAPSED_STRING","'poll\/poll'",81],")",";",["T_WHITESPACE","\n                ",81],["T_VARIABLE","$model",82],["T_OBJECT_OPERATOR","->",82],["T_STRING","setId",82],"(",["T_VARIABLE","$id",82],")",";",["T_WHITESPACE","\n                ",82],["T_VARIABLE","$model",83],["T_OBJECT_OPERATOR","->",83],["T_STRING","delete",83],"(",")",";",["T_WHITESPACE","\n                ",83],["T_STRING","Mage",84],["T_DOUBLE_COLON","::",84],["T_STRING","getSingleton",84],"(",["T_CONSTANT_ENCAPSED_STRING","'adminhtml\/session'",84],")",["T_OBJECT_OPERATOR","->",84],["T_STRING","addSuccess",84],"(",["T_STRING","Mage",84],["T_DOUBLE_COLON","::",84],["T_STRING","helper",84],"(",["T_CONSTANT_ENCAPSED_STRING","'adminhtml'",84],")",["T_OBJECT_OPERATOR","->",84],["T_STRING","__",84],"(",["T_CONSTANT_ENCAPSED_STRING","'The poll has been deleted.'",84],")",")",";",["T_WHITESPACE","\n                ",84],["T_VARIABLE","$this",85],["T_OBJECT_OPERATOR","->",85],["T_STRING","_redirect",85],"(",["T_CONSTANT_ENCAPSED_STRING","'*\/*\/'",85],")",";",["T_WHITESPACE","\n                ",85],["T_RETURN","return",86],";",["T_WHITESPACE","\n            ",86],"}",["T_WHITESPACE","\n            ",87],["T_CATCH","catch",88],["T_WHITESPACE"," ",88],"(",["T_STRING","Exception",88],["T_WHITESPACE"," ",88],["T_VARIABLE","$e",88],")",["T_WHITESPACE"," ",88],"{",["T_WHITESPACE","\n                ",88],["T_STRING","Mage",89],["T_DOUBLE_COLON","::",89],["T_STRING","getSingleton",89],"(",["T_CONSTANT_ENCAPSED_STRING","'adminhtml\/session'",89],")",["T_OBJECT_OPERATOR","->",89],["T_STRING","addError",89],"(",["T_VARIABLE","$e",89],["T_OBJECT_OPERATOR","->",89],["T_STRING","getMessage",89],"(",")",")",";",["T_WHITESPACE","\n                ",89],["T_VARIABLE","$this",90],["T_OBJECT_OPERATOR","->",90],["T_STRING","_redirect",90],"(",["T_CONSTANT_ENCAPSED_STRING","'*\/*\/edit'",90],",",["T_WHITESPACE"," ",90],["T_ARRAY","array",90],"(",["T_CONSTANT_ENCAPSED_STRING","'id'",90],["T_WHITESPACE"," ",90],["T_DOUBLE_ARROW","=>",90],["T_WHITESPACE"," ",90],["T_VARIABLE","$this",90],["T_OBJECT_OPERATOR","->",90],["T_STRING","getRequest",90],"(",")",["T_OBJECT_OPERATOR","->",90],["T_STRING","getParam",90],"(",["T_CONSTANT_ENCAPSED_STRING","'id'",90],")",")",")",";",["T_WHITESPACE","\n                ",90],["T_RETURN","return",91],";",["T_WHITESPACE","\n            ",91],"}",["T_WHITESPACE","\n        ",92],"}",["T_WHITESPACE","\n        ",93],["T_STRING","Mage",94],["T_DOUBLE_COLON","::",94],["T_STRING","getSingleton",94],"(",["T_CONSTANT_ENCAPSED_STRING","'adminhtml\/session'",94],")",["T_OBJECT_OPERATOR","->",94],["T_STRING","addError",94],"(",["T_STRING","Mage",94],["T_DOUBLE_COLON","::",94],["T_STRING","helper",94],"(",["T_CONSTANT_ENCAPSED_STRING","'adminhtml'",94],")",["T_OBJECT_OPERATOR","->",94],["T_STRING","__",94],"(",["T_CONSTANT_ENCAPSED_STRING","'Unable to find a poll to delete.'",94],")",")",";",["T_WHITESPACE","\n        ",94],["T_VARIABLE","$this",95],["T_OBJECT_OPERATOR","->",95],["T_STRING","_redirect",95],"(",["T_CONSTANT_ENCAPSED_STRING","'*\/*\/'",95],")",";",["T_WHITESPACE","\n    ",95],"}",["T_WHITESPACE","\n\n    ",96],["T_PUBLIC","public",98],["T_WHITESPACE"," ",98],["T_FUNCTION","function",98],["T_WHITESPACE"," ",98],["T_STRING","saveAction",98],"(",")",["T_WHITESPACE","\n    ",98],"{",["T_WHITESPACE","\n        ",99],["T_STRING","Mage",100],["T_DOUBLE_COLON","::",100],["T_STRING","getSingleton",100],"(",["T_CONSTANT_ENCAPSED_STRING","'adminhtml\/session'",100],")",["T_OBJECT_OPERATOR","->",100],["T_STRING","addSuccess",100],"(",["T_STRING","Mage",100],["T_DOUBLE_COLON","::",100],["T_STRING","helper",100],"(",["T_CONSTANT_ENCAPSED_STRING","'adminhtml'",100],")",["T_OBJECT_OPERATOR","->",100],["T_STRING","__",100],"(",["T_CONSTANT_ENCAPSED_STRING","'The poll has been saved.'",100],")",")",";",["T_WHITESPACE","\n        ",100],["T_STRING","Mage",101],["T_DOUBLE_COLON","::",101],["T_STRING","getSingleton",101],"(",["T_CONSTANT_ENCAPSED_STRING","'adminhtml\/session'",101],")",["T_OBJECT_OPERATOR","->",101],["T_STRING","setPollData",101],"(",["T_STRING","false",101],")",";",["T_WHITESPACE","\n        ",101],["T_VARIABLE","$this",102],["T_OBJECT_OPERATOR","->",102],["T_STRING","_redirect",102],"(",["T_CONSTANT_ENCAPSED_STRING","'*\/*\/'",102],")",";",["T_WHITESPACE","\n    ",102],"}",["T_WHITESPACE","\n\n    ",103],["T_PUBLIC","public",105],["T_WHITESPACE"," ",105],["T_FUNCTION","function",105],["T_WHITESPACE"," ",105],["T_STRING","newAction",105],"(",")",["T_WHITESPACE","\n    ",105],"{",["T_WHITESPACE","\n        ",106],["T_VARIABLE","$this",107],["T_OBJECT_OPERATOR","->",107],["T_STRING","getRequest",107],"(",")",["T_OBJECT_OPERATOR","->",107],["T_STRING","setParam",107],"(",["T_CONSTANT_ENCAPSED_STRING","'id'",107],",",["T_WHITESPACE"," ",107],["T_LNUMBER","0",107],")",";",["T_WHITESPACE","\n        ",107],["T_VARIABLE","$this",108],["T_OBJECT_OPERATOR","->",108],["T_STRING","_forward",108],"(",["T_CONSTANT_ENCAPSED_STRING","'edit'",108],")",";",["T_WHITESPACE","\n    ",108],"}",["T_WHITESPACE","\n\n    ",109],["T_PUBLIC","public",111],["T_WHITESPACE"," ",111],["T_FUNCTION","function",111],["T_WHITESPACE"," ",111],["T_STRING","validateAction",111],"(",")",["T_WHITESPACE","\n    ",111],"{",["T_WHITESPACE","\n        ",112],["T_VARIABLE","$response",113],["T_WHITESPACE"," ",113],"=",["T_WHITESPACE"," ",113],["T_NEW","new",113],["T_WHITESPACE"," ",113],["T_STRING","Varien_Object",113],"(",")",";",["T_WHITESPACE","\n        ",113],["T_VARIABLE","$response",114],["T_OBJECT_OPERATOR","->",114],["T_STRING","setError",114],"(",["T_STRING","false",114],")",";",["T_WHITESPACE","\n\n        ",114],["T_IF","if",116],["T_WHITESPACE"," ",116],"(",["T_WHITESPACE"," ",116],["T_VARIABLE","$this",116],["T_OBJECT_OPERATOR","->",116],["T_STRING","getRequest",116],"(",")",["T_OBJECT_OPERATOR","->",116],["T_STRING","getPost",116],"(",")",["T_WHITESPACE"," ",116],")",["T_WHITESPACE"," ",116],"{",["T_WHITESPACE","\n            ",116],["T_TRY","try",117],["T_WHITESPACE"," ",117],"{",["T_WHITESPACE","\n                ",117],["T_VARIABLE","$pollModel",118],["T_WHITESPACE"," ",118],"=",["T_WHITESPACE"," ",118],["T_STRING","Mage",118],["T_DOUBLE_COLON","::",118],["T_STRING","getModel",118],"(",["T_CONSTANT_ENCAPSED_STRING","'poll\/poll'",118],")",";",["T_WHITESPACE","\n\n                ",118],["T_IF","if",120],"(",["T_WHITESPACE"," ",120],"!",["T_VARIABLE","$this",120],["T_OBJECT_OPERATOR","->",120],["T_STRING","getRequest",120],"(",")",["T_OBJECT_OPERATOR","->",120],["T_STRING","getParam",120],"(",["T_CONSTANT_ENCAPSED_STRING","'id'",120],")",["T_WHITESPACE"," ",120],")",["T_WHITESPACE"," ",120],"{",["T_WHITESPACE","\n                    ",120],["T_VARIABLE","$pollModel",121],["T_OBJECT_OPERATOR","->",121],["T_STRING","setDatePosted",121],"(",["T_STRING","now",121],"(",")",")",";",["T_WHITESPACE","\n                ",121],"}",["T_WHITESPACE","\n\n                ",122],["T_IF","if",124],"(",["T_WHITESPACE"," ",124],["T_VARIABLE","$this",124],["T_OBJECT_OPERATOR","->",124],["T_STRING","getRequest",124],"(",")",["T_OBJECT_OPERATOR","->",124],["T_STRING","getParam",124],"(",["T_CONSTANT_ENCAPSED_STRING","'closed'",124],")",["T_WHITESPACE"," ",124],["T_BOOLEAN_AND","&&",124],["T_WHITESPACE"," ",124],"!",["T_VARIABLE","$this",124],["T_OBJECT_OPERATOR","->",124],["T_STRING","getRequest",124],"(",")",["T_OBJECT_OPERATOR","->",124],["T_STRING","getParam",124],"(",["T_CONSTANT_ENCAPSED_STRING","'was_closed'",124],")",["T_WHITESPACE"," ",124],")",["T_WHITESPACE"," ",124],"{",["T_WHITESPACE","\n                    ",124],["T_VARIABLE","$pollModel",125],["T_OBJECT_OPERATOR","->",125],["T_STRING","setDateClosed",125],"(",["T_STRING","now",125],"(",")",")",";",["T_WHITESPACE","\n                ",125],"}",["T_WHITESPACE","\n\n                ",126],["T_IF","if",128],"(",["T_WHITESPACE"," ",128],"!",["T_VARIABLE","$this",128],["T_OBJECT_OPERATOR","->",128],["T_STRING","getRequest",128],"(",")",["T_OBJECT_OPERATOR","->",128],["T_STRING","getParam",128],"(",["T_CONSTANT_ENCAPSED_STRING","'closed'",128],")",["T_WHITESPACE"," ",128],")",["T_WHITESPACE"," ",128],"{",["T_WHITESPACE","\n                    ",128],["T_VARIABLE","$pollModel",129],["T_OBJECT_OPERATOR","->",129],["T_STRING","setDateClosed",129],"(",["T_NEW","new",129],["T_WHITESPACE"," ",129],["T_STRING","Zend_Db_Expr",129],"(",["T_CONSTANT_ENCAPSED_STRING","'null'",129],")",")",";",["T_WHITESPACE","\n                ",129],"}",["T_WHITESPACE","\n\n                ",130],["T_VARIABLE","$pollModel",132],["T_OBJECT_OPERATOR","->",132],["T_STRING","setPollTitle",132],"(",["T_VARIABLE","$this",132],["T_OBJECT_OPERATOR","->",132],["T_STRING","getRequest",132],"(",")",["T_OBJECT_OPERATOR","->",132],["T_STRING","getParam",132],"(",["T_CONSTANT_ENCAPSED_STRING","'poll_title'",132],")",")",["T_WHITESPACE","\n                      ",132],["T_OBJECT_OPERATOR","->",133],["T_STRING","setClosed",133],"(",["T_VARIABLE","$this",133],["T_OBJECT_OPERATOR","->",133],["T_STRING","getRequest",133],"(",")",["T_OBJECT_OPERATOR","->",133],["T_STRING","getParam",133],"(",["T_CONSTANT_ENCAPSED_STRING","'closed'",133],")",")",";",["T_WHITESPACE","\n\n                ",133],["T_IF","if",135],"(",["T_WHITESPACE"," ",135],["T_VARIABLE","$this",135],["T_OBJECT_OPERATOR","->",135],["T_STRING","getRequest",135],"(",")",["T_OBJECT_OPERATOR","->",135],["T_STRING","getParam",135],"(",["T_CONSTANT_ENCAPSED_STRING","'id'",135],")",["T_WHITESPACE"," ",135],">",["T_WHITESPACE"," ",135],["T_LNUMBER","0",135],["T_WHITESPACE"," ",135],")",["T_WHITESPACE"," ",135],"{",["T_WHITESPACE","\n                    ",135],["T_VARIABLE","$pollModel",136],["T_OBJECT_OPERATOR","->",136],["T_STRING","setId",136],"(",["T_VARIABLE","$this",136],["T_OBJECT_OPERATOR","->",136],["T_STRING","getRequest",136],"(",")",["T_OBJECT_OPERATOR","->",136],["T_STRING","getParam",136],"(",["T_CONSTANT_ENCAPSED_STRING","'id'",136],")",")",";",["T_WHITESPACE","\n                ",136],"}",["T_WHITESPACE","\n\n                ",137],["T_VARIABLE","$stores",139],["T_WHITESPACE"," ",139],"=",["T_WHITESPACE"," ",139],["T_VARIABLE","$this",139],["T_OBJECT_OPERATOR","->",139],["T_STRING","getRequest",139],"(",")",["T_OBJECT_OPERATOR","->",139],["T_STRING","getParam",139],"(",["T_CONSTANT_ENCAPSED_STRING","'store_ids'",139],")",";",["T_WHITESPACE","\n                ",139],["T_IF","if",140],["T_WHITESPACE"," ",140],"(","!",["T_STRING","is_array",140],"(",["T_VARIABLE","$stores",140],")",["T_WHITESPACE"," ",140],["T_BOOLEAN_OR","||",140],["T_WHITESPACE"," ",140],["T_STRING","count",140],"(",["T_VARIABLE","$stores",140],")",["T_WHITESPACE"," ",140],["T_IS_EQUAL","==",140],["T_WHITESPACE"," ",140],["T_LNUMBER","0",140],")",["T_WHITESPACE"," ",140],"{",["T_WHITESPACE","\n                    ",140],["T_STRING","Mage",141],["T_DOUBLE_COLON","::",141],["T_STRING","throwException",141],"(",["T_STRING","Mage",141],["T_DOUBLE_COLON","::",141],["T_STRING","helper",141],"(",["T_CONSTANT_ENCAPSED_STRING","'adminhtml'",141],")",["T_OBJECT_OPERATOR","->",141],["T_STRING","__",141],"(",["T_CONSTANT_ENCAPSED_STRING","'Please, select \"Visible in Stores\" for this poll first.'",141],")",")",";",["T_WHITESPACE","\n                ",141],"}",["T_WHITESPACE","\n\n                ",142],["T_IF","if",144],["T_WHITESPACE"," ",144],"(",["T_STRING","is_array",144],"(",["T_VARIABLE","$stores",144],")",")",["T_WHITESPACE"," ",144],"{",["T_WHITESPACE","\n                    ",144],["T_VARIABLE","$storeIds",145],["T_WHITESPACE"," ",145],"=",["T_WHITESPACE"," ",145],["T_ARRAY","array",145],"(",")",";",["T_WHITESPACE","\n                    ",145],["T_FOREACH","foreach",146],["T_WHITESPACE"," ",146],"(",["T_VARIABLE","$stores",146],["T_WHITESPACE"," ",146],["T_AS","as",146],["T_WHITESPACE"," ",146],["T_VARIABLE","$storeIdList",146],")",["T_WHITESPACE"," ",146],"{",["T_WHITESPACE","\n                        ",146],["T_VARIABLE","$storeIdList",147],["T_WHITESPACE"," ",147],"=",["T_WHITESPACE"," ",147],["T_STRING","explode",147],"(",["T_CONSTANT_ENCAPSED_STRING","','",147],",",["T_WHITESPACE"," ",147],["T_VARIABLE","$storeIdList",147],")",";",["T_WHITESPACE","\n                        ",147],["T_IF","if",148],"(","!",["T_VARIABLE","$storeIdList",148],")",["T_WHITESPACE"," ",148],"{",["T_WHITESPACE","\n                            ",148],["T_CONTINUE","continue",149],";",["T_WHITESPACE","\n                        ",149],"}",["T_WHITESPACE","\n                        ",150],["T_FOREACH","foreach",151],"(",["T_VARIABLE","$storeIdList",151],["T_WHITESPACE"," ",151],["T_AS","as",151],["T_WHITESPACE"," ",151],["T_VARIABLE","$storeId",151],")",["T_WHITESPACE"," ",151],"{",["T_WHITESPACE","\n                            ",151],["T_IF","if",152],"(",["T_WHITESPACE"," ",152],["T_VARIABLE","$storeId",152],["T_WHITESPACE"," ",152],">",["T_WHITESPACE"," ",152],["T_LNUMBER","0",152],["T_WHITESPACE"," ",152],")",["T_WHITESPACE"," ",152],"{",["T_WHITESPACE","\n                                ",152],["T_VARIABLE","$storeIds",153],"[","]",["T_WHITESPACE"," ",153],"=",["T_WHITESPACE"," ",153],["T_VARIABLE","$storeId",153],";",["T_WHITESPACE","\n                            ",153],"}",["T_WHITESPACE","\n                        ",154],"}",["T_WHITESPACE","\n                    ",155],"}",["T_WHITESPACE","\n                    ",156],["T_IF","if",157],["T_WHITESPACE"," ",157],"(",["T_STRING","count",157],"(",["T_VARIABLE","$storeIds",157],")",["T_WHITESPACE"," ",157],["T_IS_IDENTICAL","===",157],["T_WHITESPACE"," ",157],["T_LNUMBER","0",157],")",["T_WHITESPACE"," ",157],"{",["T_WHITESPACE","\n                        ",157],["T_STRING","Mage",158],["T_DOUBLE_COLON","::",158],["T_STRING","throwException",158],"(",["T_STRING","Mage",158],["T_DOUBLE_COLON","::",158],["T_STRING","helper",158],"(",["T_CONSTANT_ENCAPSED_STRING","'adminhtml'",158],")",["T_OBJECT_OPERATOR","->",158],["T_STRING","__",158],"(",["T_CONSTANT_ENCAPSED_STRING","'Please, select \"Visible in Stores\" for this poll first.'",158],")",")",";",["T_WHITESPACE","\n                    ",158],"}",["T_WHITESPACE","\n                    ",159],["T_VARIABLE","$pollModel",160],["T_OBJECT_OPERATOR","->",160],["T_STRING","setStoreIds",160],"(",["T_VARIABLE","$storeIds",160],")",";",["T_WHITESPACE","\n                ",160],"}",["T_WHITESPACE","\n\n                ",161],["T_VARIABLE","$answers",163],["T_WHITESPACE"," ",163],"=",["T_WHITESPACE"," ",163],["T_VARIABLE","$this",163],["T_OBJECT_OPERATOR","->",163],["T_STRING","getRequest",163],"(",")",["T_OBJECT_OPERATOR","->",163],["T_STRING","getParam",163],"(",["T_CONSTANT_ENCAPSED_STRING","'answer'",163],")",";",["T_WHITESPACE","\n\n                ",163],["T_IF","if",165],"(",["T_WHITESPACE"," ",165],"!",["T_STRING","is_array",165],"(",["T_VARIABLE","$answers",165],")",["T_WHITESPACE"," ",165],["T_BOOLEAN_OR","||",165],["T_WHITESPACE"," ",165],["T_STRING","sizeof",165],"(",["T_VARIABLE","$answers",165],")",["T_WHITESPACE"," ",165],["T_IS_EQUAL","==",165],["T_WHITESPACE"," ",165],["T_LNUMBER","0",165],["T_WHITESPACE"," ",165],")",["T_WHITESPACE"," ",165],"{",["T_WHITESPACE","\n                    ",165],["T_STRING","Mage",166],["T_DOUBLE_COLON","::",166],["T_STRING","throwException",166],"(",["T_STRING","Mage",166],["T_DOUBLE_COLON","::",166],["T_STRING","helper",166],"(",["T_CONSTANT_ENCAPSED_STRING","'adminhtml'",166],")",["T_OBJECT_OPERATOR","->",166],["T_STRING","__",166],"(",["T_CONSTANT_ENCAPSED_STRING","'Please, add some answers to this poll first.'",166],")",")",";",["T_WHITESPACE","\n                ",166],"}",["T_WHITESPACE","\n\n                ",167],["T_IF","if",169],"(",["T_WHITESPACE"," ",169],["T_STRING","is_array",169],"(",["T_VARIABLE","$answers",169],")",["T_WHITESPACE"," ",169],")",["T_WHITESPACE"," ",169],"{",["T_WHITESPACE","\n                    ",169],["T_VARIABLE","$_titles",170],["T_WHITESPACE"," ",170],"=",["T_WHITESPACE"," ",170],["T_ARRAY","array",170],"(",")",";",["T_WHITESPACE","\n                    ",170],["T_FOREACH","foreach",171],"(",["T_WHITESPACE"," ",171],["T_VARIABLE","$answers",171],["T_WHITESPACE"," ",171],["T_AS","as",171],["T_WHITESPACE"," ",171],["T_VARIABLE","$key",171],["T_WHITESPACE"," ",171],["T_DOUBLE_ARROW","=>",171],["T_WHITESPACE"," ",171],["T_VARIABLE","$answer",171],["T_WHITESPACE"," ",171],")",["T_WHITESPACE"," ",171],"{",["T_WHITESPACE","\n                        ",171],["T_IF","if",172],"(",["T_WHITESPACE"," ",172],["T_STRING","in_array",172],"(",["T_VARIABLE","$answer",172],"[",["T_CONSTANT_ENCAPSED_STRING","'title'",172],"]",",",["T_WHITESPACE"," ",172],["T_VARIABLE","$_titles",172],")",["T_WHITESPACE"," ",172],")",["T_WHITESPACE"," ",172],"{",["T_WHITESPACE","\n                            ",172],["T_STRING","Mage",173],["T_DOUBLE_COLON","::",173],["T_STRING","throwException",173],"(",["T_STRING","Mage",173],["T_DOUBLE_COLON","::",173],["T_STRING","helper",173],"(",["T_CONSTANT_ENCAPSED_STRING","'adminhtml'",173],")",["T_OBJECT_OPERATOR","->",173],["T_STRING","__",173],"(",["T_CONSTANT_ENCAPSED_STRING","'Your answers contain duplicates.'",173],")",")",";",["T_WHITESPACE","\n                        ",173],"}",["T_WHITESPACE","\n                        ",174],["T_VARIABLE","$_titles",175],"[","]",["T_WHITESPACE"," ",175],"=",["T_WHITESPACE"," ",175],["T_VARIABLE","$answer",175],"[",["T_CONSTANT_ENCAPSED_STRING","'title'",175],"]",";",["T_WHITESPACE","\n\n                        ",175],["T_VARIABLE","$answerModel",177],["T_WHITESPACE"," ",177],"=",["T_WHITESPACE"," ",177],["T_STRING","Mage",177],["T_DOUBLE_COLON","::",177],["T_STRING","getModel",177],"(",["T_CONSTANT_ENCAPSED_STRING","'poll\/poll_answer'",177],")",";",["T_WHITESPACE","\n                        ",177],["T_IF","if",178],"(",["T_WHITESPACE"," ",178],["T_STRING","intval",178],"(",["T_VARIABLE","$key",178],")",["T_WHITESPACE"," ",178],">",["T_WHITESPACE"," ",178],["T_LNUMBER","0",178],["T_WHITESPACE"," ",178],")",["T_WHITESPACE"," ",178],"{",["T_WHITESPACE","\n                            ",178],["T_VARIABLE","$answerModel",179],["T_OBJECT_OPERATOR","->",179],["T_STRING","setId",179],"(",["T_VARIABLE","$key",179],")",";",["T_WHITESPACE","\n                        ",179],"}",["T_WHITESPACE","\n                        ",180],["T_VARIABLE","$answerModel",181],["T_OBJECT_OPERATOR","->",181],["T_STRING","setAnswerTitle",181],"(",["T_VARIABLE","$answer",181],"[",["T_CONSTANT_ENCAPSED_STRING","'title'",181],"]",")",["T_WHITESPACE","\n                            ",181],["T_OBJECT_OPERATOR","->",182],["T_STRING","setVotesCount",182],"(",["T_VARIABLE","$answer",182],"[",["T_CONSTANT_ENCAPSED_STRING","'votes'",182],"]",")",";",["T_WHITESPACE","\n\n                        ",182],["T_VARIABLE","$pollModel",184],["T_OBJECT_OPERATOR","->",184],["T_STRING","addAnswer",184],"(",["T_VARIABLE","$answerModel",184],")",";",["T_WHITESPACE","\n                    ",184],"}",["T_WHITESPACE","\n                ",185],"}",["T_WHITESPACE","\n\n                ",186],["T_VARIABLE","$pollModel",188],["T_OBJECT_OPERATOR","->",188],["T_STRING","save",188],"(",")",";",["T_WHITESPACE","\n\n                ",188],["T_STRING","Mage",190],["T_DOUBLE_COLON","::",190],["T_STRING","register",190],"(",["T_CONSTANT_ENCAPSED_STRING","'current_poll_model'",190],",",["T_WHITESPACE"," ",190],["T_VARIABLE","$pollModel",190],")",";",["T_WHITESPACE","\n\n                ",190],["T_VARIABLE","$answersDelete",192],["T_WHITESPACE"," ",192],"=",["T_WHITESPACE"," ",192],["T_VARIABLE","$this",192],["T_OBJECT_OPERATOR","->",192],["T_STRING","getRequest",192],"(",")",["T_OBJECT_OPERATOR","->",192],["T_STRING","getParam",192],"(",["T_CONSTANT_ENCAPSED_STRING","'deleteAnswer'",192],")",";",["T_WHITESPACE","\n                ",192],["T_IF","if",193],"(",["T_WHITESPACE"," ",193],["T_STRING","is_array",193],"(",["T_VARIABLE","$answersDelete",193],")",["T_WHITESPACE"," ",193],")",["T_WHITESPACE"," ",193],"{",["T_WHITESPACE","\n                    ",193],["T_FOREACH","foreach",194],"(",["T_WHITESPACE"," ",194],["T_VARIABLE","$answersDelete",194],["T_WHITESPACE"," ",194],["T_AS","as",194],["T_WHITESPACE"," ",194],["T_VARIABLE","$answer",194],["T_WHITESPACE"," ",194],")",["T_WHITESPACE"," ",194],"{",["T_WHITESPACE","\n                        ",194],["T_VARIABLE","$answerModel",195],["T_WHITESPACE"," ",195],"=",["T_WHITESPACE"," ",195],["T_STRING","Mage",195],["T_DOUBLE_COLON","::",195],["T_STRING","getModel",195],"(",["T_CONSTANT_ENCAPSED_STRING","'poll\/poll_answer'",195],")",";",["T_WHITESPACE","\n                        ",195],["T_VARIABLE","$answerModel",196],["T_OBJECT_OPERATOR","->",196],["T_STRING","setId",196],"(",["T_VARIABLE","$answer",196],")",["T_WHITESPACE","\n                            ",196],["T_OBJECT_OPERATOR","->",197],["T_STRING","delete",197],"(",")",";",["T_WHITESPACE","\n                    ",197],"}",["T_WHITESPACE","\n                ",198],"}",["T_WHITESPACE","\n            ",199],"}",["T_WHITESPACE","\n            ",200],["T_CATCH","catch",201],["T_WHITESPACE"," ",201],"(",["T_STRING","Exception",201],["T_WHITESPACE"," ",201],["T_VARIABLE","$e",201],")",["T_WHITESPACE"," ",201],"{",["T_WHITESPACE","\n                ",201],["T_STRING","Mage",202],["T_DOUBLE_COLON","::",202],["T_STRING","getSingleton",202],"(",["T_CONSTANT_ENCAPSED_STRING","'adminhtml\/session'",202],")",["T_OBJECT_OPERATOR","->",202],["T_STRING","addError",202],"(",["T_VARIABLE","$e",202],["T_OBJECT_OPERATOR","->",202],["T_STRING","getMessage",202],"(",")",")",";",["T_WHITESPACE","\n                ",202],["T_VARIABLE","$this",203],["T_OBJECT_OPERATOR","->",203],["T_STRING","_initLayoutMessages",203],"(",["T_CONSTANT_ENCAPSED_STRING","'adminhtml\/session'",203],")",";",["T_WHITESPACE","\n                ",203],["T_VARIABLE","$response",204],["T_OBJECT_OPERATOR","->",204],["T_STRING","setError",204],"(",["T_STRING","true",204],")",";",["T_WHITESPACE","\n                ",204],["T_VARIABLE","$response",205],["T_OBJECT_OPERATOR","->",205],["T_STRING","setMessage",205],"(",["T_VARIABLE","$this",205],["T_OBJECT_OPERATOR","->",205],["T_STRING","getLayout",205],"(",")",["T_OBJECT_OPERATOR","->",205],["T_STRING","getMessagesBlock",205],"(",")",["T_OBJECT_OPERATOR","->",205],["T_STRING","getGroupedHtml",205],"(",")",")",";",["T_WHITESPACE","\n            ",205],"}",["T_WHITESPACE","\n        ",206],"}",["T_WHITESPACE","\n        ",207],["T_VARIABLE","$this",208],["T_OBJECT_OPERATOR","->",208],["T_STRING","getResponse",208],"(",")",["T_OBJECT_OPERATOR","->",208],["T_STRING","setBody",208],"(",["T_VARIABLE","$response",208],["T_OBJECT_OPERATOR","->",208],["T_STRING","toJson",208],"(",")",")",";",["T_WHITESPACE","\n    ",208],"}",["T_WHITESPACE","\n\n    ",209],["T_PROTECTED","protected",211],["T_WHITESPACE"," ",211],["T_FUNCTION","function",211],["T_WHITESPACE"," ",211],["T_STRING","_isAllowed",211],"(",")",["T_WHITESPACE","\n    ",211],"{",["T_WHITESPACE","\n        ",212],["T_RETURN","return",213],["T_WHITESPACE"," ",213],["T_STRING","Mage",213],["T_DOUBLE_COLON","::",213],["T_STRING","getSingleton",213],"(",["T_CONSTANT_ENCAPSED_STRING","'admin\/session'",213],")",["T_OBJECT_OPERATOR","->",213],["T_STRING","isAllowed",213],"(",["T_CONSTANT_ENCAPSED_STRING","'cms\/poll'",213],")",";",["T_WHITESPACE","\n    ",213],"}",["T_WHITESPACE","\n\n",214],"}",["T_WHITESPACE","\n",216]]
[["T_OPEN_TAG","<?php\n",1],["T_DOC_COMMENT","\/**\n * Magento\n *\n * NOTICE OF LICENSE\n *\n * This source file is subject to the Open Software License (OSL 3.0)\n * that is bundled with this package in the file LICENSE.txt.\n * It is also available through the world-wide-web at this URL:\n * http:\/\/opensource.org\/licenses\/osl-3.0.php\n * If you did not receive a copy of the license and are unable to\n * obtain it through the world-wide-web, please send an email\n * to license@magento.com so we can send you a copy immediately.\n *\n * DISCLAIMER\n *\n * Do not edit or add to this file if you wish to upgrade Magento to newer\n * versions in the future. If you wish to customize Magento for your\n * needs please refer to http:\/\/www.magento.com for more information.\n *\n * @category    Mage\n * @package     Mage_Adminhtml\n * @copyright  Copyright (c) 2006-2016 X.commerce, Inc. and affiliates (http:\/\/www.magento.com)\n * @license    http:\/\/opensource.org\/licenses\/osl-3.0.php  Open Software License (OSL 3.0)\n *\/",2],["T_WHITESPACE","\n\n",25],["T_DOC_COMMENT","\/**\n * Product Chooser for \"Product Link\" Cms Widget Plugin\n *\n * @category   Mage\n * @package    Mage_Adminhtml\n * @author     Magento Core Team <core@magentocommerce.com>\n *\/",27],["T_WHITESPACE","\n",33],["T_CLASS","class",34],["T_WHITESPACE"," ",34],["T_STRING","Mage_Adminhtml_Block_Catalog_Product_Widget_Chooser",34],["T_WHITESPACE"," ",34],["T_EXTENDS","extends",34],["T_WHITESPACE"," ",34],["T_STRING","Mage_Adminhtml_Block_Widget_Grid",34],["T_WHITESPACE","\n",34],"{",["T_WHITESPACE","\n    ",35],["T_PROTECTED","protected",36],["T_WHITESPACE"," ",36],["T_VARIABLE","$_selectedProducts",36],["T_WHITESPACE"," ",36],"=",["T_WHITESPACE"," ",36],["T_ARRAY","array",36],"(",")",";",["T_WHITESPACE","\n\n    ",36],["T_DOC_COMMENT","\/**\n     * Block construction, prepare grid params\n     *\n     * @param array $arguments Object data\n     *\/",38],["T_WHITESPACE","\n    ",42],["T_PUBLIC","public",43],["T_WHITESPACE"," ",43],["T_FUNCTION","function",43],["T_WHITESPACE"," ",43],["T_STRING","__construct",43],"(",["T_VARIABLE","$arguments",43],"=",["T_ARRAY","array",43],"(",")",")",["T_WHITESPACE","\n    ",43],"{",["T_WHITESPACE","\n        ",44],["T_STRING","parent",45],["T_DOUBLE_COLON","::",45],["T_STRING","__construct",45],"(",["T_VARIABLE","$arguments",45],")",";",["T_WHITESPACE","\n        ",45],["T_VARIABLE","$this",46],["T_OBJECT_OPERATOR","->",46],["T_STRING","setDefaultSort",46],"(",["T_CONSTANT_ENCAPSED_STRING","'name'",46],")",";",["T_WHITESPACE","\n        ",46],["T_VARIABLE","$this",47],["T_OBJECT_OPERATOR","->",47],["T_STRING","setUseAjax",47],"(",["T_STRING","true",47],")",";",["T_WHITESPACE","\n    ",47],"}",["T_WHITESPACE","\n\n    ",48],["T_DOC_COMMENT","\/**\n     * Prepare chooser element HTML\n     *\n     * @param Varien_Data_Form_Element_Abstract $element Form Element\n     * @return Varien_Data_Form_Element_Abstract\n     *\/",50],["T_WHITESPACE","\n    ",55],["T_PUBLIC","public",56],["T_WHITESPACE"," ",56],["T_FUNCTION","function",56],["T_WHITESPACE"," ",56],["T_STRING","prepareElementHtml",56],"(",["T_STRING","Varien_Data_Form_Element_Abstract",56],["T_WHITESPACE"," ",56],["T_VARIABLE","$element",56],")",["T_WHITESPACE","\n    ",56],"{",["T_WHITESPACE","\n        ",57],["T_VARIABLE","$uniqId",58],["T_WHITESPACE"," ",58],"=",["T_WHITESPACE"," ",58],["T_STRING","Mage",58],["T_DOUBLE_COLON","::",58],["T_STRING","helper",58],"(",["T_CONSTANT_ENCAPSED_STRING","'core'",58],")",["T_OBJECT_OPERATOR","->",58],["T_STRING","uniqHash",58],"(",["T_VARIABLE","$element",58],["T_OBJECT_OPERATOR","->",58],["T_STRING","getId",58],"(",")",")",";",["T_WHITESPACE","\n        ",58],["T_VARIABLE","$sourceUrl",59],["T_WHITESPACE"," ",59],"=",["T_WHITESPACE"," ",59],["T_VARIABLE","$this",59],["T_OBJECT_OPERATOR","->",59],["T_STRING","getUrl",59],"(",["T_CONSTANT_ENCAPSED_STRING","'*\/catalog_product_widget\/chooser'",59],",",["T_WHITESPACE"," ",59],["T_ARRAY","array",59],"(",["T_WHITESPACE","\n            ",59],["T_CONSTANT_ENCAPSED_STRING","'uniq_id'",60],["T_WHITESPACE"," ",60],["T_DOUBLE_ARROW","=>",60],["T_WHITESPACE"," ",60],["T_VARIABLE","$uniqId",60],",",["T_WHITESPACE","\n            ",60],["T_CONSTANT_ENCAPSED_STRING","'use_massaction'",61],["T_WHITESPACE"," ",61],["T_DOUBLE_ARROW","=>",61],["T_WHITESPACE"," ",61],["T_STRING","false",61],",",["T_WHITESPACE","\n        ",61],")",")",";",["T_WHITESPACE","\n\n        ",62],["T_VARIABLE","$chooser",64],["T_WHITESPACE"," ",64],"=",["T_WHITESPACE"," ",64],["T_VARIABLE","$this",64],["T_OBJECT_OPERATOR","->",64],["T_STRING","getLayout",64],"(",")",["T_OBJECT_OPERATOR","->",64],["T_STRING","createBlock",64],"(",["T_CONSTANT_ENCAPSED_STRING","'widget\/adminhtml_widget_chooser'",64],")",["T_WHITESPACE","\n            ",64],["T_OBJECT_OPERATOR","->",65],["T_STRING","setElement",65],"(",["T_VARIABLE","$element",65],")",["T_WHITESPACE","\n            ",65],["T_OBJECT_OPERATOR","->",66],["T_STRING","setTranslationHelper",66],"(",["T_VARIABLE","$this",66],["T_OBJECT_OPERATOR","->",66],["T_STRING","getTranslationHelper",66],"(",")",")",["T_WHITESPACE","\n            ",66],["T_OBJECT_OPERATOR","->",67],["T_STRING","setConfig",67],"(",["T_VARIABLE","$this",67],["T_OBJECT_OPERATOR","->",67],["T_STRING","getConfig",67],"(",")",")",["T_WHITESPACE","\n            ",67],["T_OBJECT_OPERATOR","->",68],["T_STRING","setFieldsetId",68],"(",["T_VARIABLE","$this",68],["T_OBJECT_OPERATOR","->",68],["T_STRING","getFieldsetId",68],"(",")",")",["T_WHITESPACE","\n            ",68],["T_OBJECT_OPERATOR","->",69],["T_STRING","setSourceUrl",69],"(",["T_VARIABLE","$sourceUrl",69],")",["T_WHITESPACE","\n            ",69],["T_OBJECT_OPERATOR","->",70],["T_STRING","setUniqId",70],"(",["T_VARIABLE","$uniqId",70],")",";",["T_WHITESPACE","\n\n        ",70],["T_IF","if",72],["T_WHITESPACE"," ",72],"(",["T_VARIABLE","$element",72],["T_OBJECT_OPERATOR","->",72],["T_STRING","getValue",72],"(",")",")",["T_WHITESPACE"," ",72],"{",["T_WHITESPACE","\n            ",72],["T_VARIABLE","$value",73],["T_WHITESPACE"," ",73],"=",["T_WHITESPACE"," ",73],["T_STRING","explode",73],"(",["T_CONSTANT_ENCAPSED_STRING","'\/'",73],",",["T_WHITESPACE"," ",73],["T_VARIABLE","$element",73],["T_OBJECT_OPERATOR","->",73],["T_STRING","getValue",73],"(",")",")",";",["T_WHITESPACE","\n            ",73],["T_VARIABLE","$productId",74],["T_WHITESPACE"," ",74],"=",["T_WHITESPACE"," ",74],["T_STRING","false",74],";",["T_WHITESPACE","\n            ",74],["T_IF","if",75],["T_WHITESPACE"," ",75],"(",["T_ISSET","isset",75],"(",["T_VARIABLE","$value",75],"[",["T_LNUMBER","0",75],"]",")",["T_WHITESPACE"," ",75],["T_BOOLEAN_AND","&&",75],["T_WHITESPACE"," ",75],["T_ISSET","isset",75],"(",["T_VARIABLE","$value",75],"[",["T_LNUMBER","1",75],"]",")",["T_WHITESPACE"," ",75],["T_BOOLEAN_AND","&&",75],["T_WHITESPACE"," ",75],["T_VARIABLE","$value",75],"[",["T_LNUMBER","0",75],"]",["T_WHITESPACE"," ",75],["T_IS_EQUAL","==",75],["T_WHITESPACE"," ",75],["T_CONSTANT_ENCAPSED_STRING","'product'",75],")",["T_WHITESPACE"," ",75],"{",["T_WHITESPACE","\n                ",75],["T_VARIABLE","$productId",76],["T_WHITESPACE"," ",76],"=",["T_WHITESPACE"," ",76],["T_VARIABLE","$value",76],"[",["T_LNUMBER","1",76],"]",";",["T_WHITESPACE","\n            ",76],"}",["T_WHITESPACE","\n            ",77],["T_VARIABLE","$categoryId",78],["T_WHITESPACE"," ",78],"=",["T_WHITESPACE"," ",78],["T_ISSET","isset",78],"(",["T_VARIABLE","$value",78],"[",["T_LNUMBER","2",78],"]",")",["T_WHITESPACE"," ",78],"?",["T_WHITESPACE"," ",78],["T_VARIABLE","$value",78],"[",["T_LNUMBER","2",78],"]",["T_WHITESPACE"," ",78],":",["T_WHITESPACE"," ",78],["T_STRING","false",78],";",["T_WHITESPACE","\n            ",78],["T_VARIABLE","$label",79],["T_WHITESPACE"," ",79],"=",["T_WHITESPACE"," ",79],["T_CONSTANT_ENCAPSED_STRING","''",79],";",["T_WHITESPACE","\n            ",79],["T_IF","if",80],["T_WHITESPACE"," ",80],"(",["T_VARIABLE","$categoryId",80],")",["T_WHITESPACE"," ",80],"{",["T_WHITESPACE","\n                ",80],["T_VARIABLE","$label",81],["T_WHITESPACE"," ",81],"=",["T_WHITESPACE"," ",81],["T_STRING","Mage",81],["T_DOUBLE_COLON","::",81],["T_STRING","getResourceSingleton",81],"(",["T_CONSTANT_ENCAPSED_STRING","'catalog\/category'",81],")",["T_WHITESPACE","\n                    ",81],["T_OBJECT_OPERATOR","->",82],["T_STRING","getAttributeRawValue",82],"(",["T_VARIABLE","$categoryId",82],",",["T_WHITESPACE"," ",82],["T_CONSTANT_ENCAPSED_STRING","'name'",82],",",["T_WHITESPACE"," ",82],["T_STRING","Mage",82],["T_DOUBLE_COLON","::",82],["T_STRING","app",82],"(",")",["T_OBJECT_OPERATOR","->",82],["T_STRING","getStore",82],"(",")",")",["T_WHITESPACE"," ",82],".",["T_WHITESPACE"," ",82],["T_CONSTANT_ENCAPSED_STRING","'\/'",82],";",["T_WHITESPACE","\n            ",82],"}",["T_WHITESPACE","\n            ",83],["T_IF","if",84],["T_WHITESPACE"," ",84],"(",["T_VARIABLE","$productId",84],")",["T_WHITESPACE"," ",84],"{",["T_WHITESPACE","\n                ",84],["T_VARIABLE","$label",85],["T_WHITESPACE"," ",85],["T_CONCAT_EQUAL",".=",85],["T_WHITESPACE"," ",85],["T_STRING","Mage",85],["T_DOUBLE_COLON","::",85],["T_STRING","getResourceSingleton",85],"(",["T_CONSTANT_ENCAPSED_STRING","'catalog\/product'",85],")",["T_WHITESPACE","\n                    ",85],["T_OBJECT_OPERATOR","->",86],["T_STRING","getAttributeRawValue",86],"(",["T_VARIABLE","$productId",86],",",["T_WHITESPACE"," ",86],["T_CONSTANT_ENCAPSED_STRING","'name'",86],",",["T_WHITESPACE"," ",86],["T_STRING","Mage",86],["T_DOUBLE_COLON","::",86],["T_STRING","app",86],"(",")",["T_OBJECT_OPERATOR","->",86],["T_STRING","getStore",86],"(",")",")",";",["T_WHITESPACE","\n            ",86],"}",["T_WHITESPACE","\n            ",87],["T_VARIABLE","$chooser",88],["T_OBJECT_OPERATOR","->",88],["T_STRING","setLabel",88],"(",["T_VARIABLE","$label",88],")",";",["T_WHITESPACE","\n        ",88],"}",["T_WHITESPACE","\n\n        ",89],["T_VARIABLE","$element",91],["T_OBJECT_OPERATOR","->",91],["T_STRING","setData",91],"(",["T_CONSTANT_ENCAPSED_STRING","'after_element_html'",91],",",["T_WHITESPACE"," ",91],["T_VARIABLE","$chooser",91],["T_OBJECT_OPERATOR","->",91],["T_STRING","toHtml",91],"(",")",")",";",["T_WHITESPACE","\n        ",91],["T_RETURN","return",92],["T_WHITESPACE"," ",92],["T_VARIABLE","$element",92],";",["T_WHITESPACE","\n    ",92],"}",["T_WHITESPACE","\n\n    ",93],["T_DOC_COMMENT","\/**\n     * Checkbox Check JS Callback\n     *\n     * @return string\n     *\/",95],["T_WHITESPACE","\n    ",99],["T_PUBLIC","public",100],["T_WHITESPACE"," ",100],["T_FUNCTION","function",100],["T_WHITESPACE"," ",100],["T_STRING","getCheckboxCheckCallback",100],"(",")",["T_WHITESPACE","\n    ",100],"{",["T_WHITESPACE","\n        ",101],["T_IF","if",102],["T_WHITESPACE"," ",102],"(",["T_VARIABLE","$this",102],["T_OBJECT_OPERATOR","->",102],["T_STRING","getUseMassaction",102],"(",")",")",["T_WHITESPACE"," ",102],"{",["T_WHITESPACE","\n            ",102],["T_RETURN","return",103],["T_WHITESPACE"," ",103],["T_CONSTANT_ENCAPSED_STRING","\"function (grid, element) {\n                $(grid.containerId).fire('product:changed', {element: element});\n            }\"",103],";",["T_WHITESPACE","\n        ",105],"}",["T_WHITESPACE","\n    ",106],"}",["T_WHITESPACE","\n\n    ",107],["T_DOC_COMMENT","\/**\n     * Grid Row JS Callback\n     *\n     * @return string\n     *\/",109],["T_WHITESPACE","\n    ",113],["T_PUBLIC","public",114],["T_WHITESPACE"," ",114],["T_FUNCTION","function",114],["T_WHITESPACE"," ",114],["T_STRING","getRowClickCallback",114],"(",")",["T_WHITESPACE","\n    ",114],"{",["T_WHITESPACE","\n        ",115],["T_IF","if",116],["T_WHITESPACE"," ",116],"(","!",["T_VARIABLE","$this",116],["T_OBJECT_OPERATOR","->",116],["T_STRING","getUseMassaction",116],"(",")",")",["T_WHITESPACE"," ",116],"{",["T_WHITESPACE","\n            ",116],["T_VARIABLE","$chooserJsObject",117],["T_WHITESPACE"," ",117],"=",["T_WHITESPACE"," ",117],["T_VARIABLE","$this",117],["T_OBJECT_OPERATOR","->",117],["T_STRING","getId",117],"(",")",";",["T_WHITESPACE","\n            ",117],["T_RETURN","return",118],["T_WHITESPACE"," ",118],["T_CONSTANT_ENCAPSED_STRING","'\n                function (grid, event) {\n                    var trElement = Event.findElement(event, \"tr\");\n                    var productId = trElement.down(\"td\").innerHTML;\n                    var productName = trElement.down(\"td\").next().next().innerHTML;\n                    var optionLabel = productName;\n                    var optionValue = \"product\/\" + productId.replace(\/^\\s+|\\s+$\/g,\"\");\n                    if (grid.categoryId) {\n                        optionValue += \"\/\" + grid.categoryId;\n                    }\n                    if (grid.categoryName) {\n                        optionLabel = grid.categoryName + \" \/ \" + optionLabel;\n                    }\n                    '",118],".",["T_VARIABLE","$chooserJsObject",131],".",["T_CONSTANT_ENCAPSED_STRING","'.setElementValue(optionValue);\n                    '",131],".",["T_VARIABLE","$chooserJsObject",132],".",["T_CONSTANT_ENCAPSED_STRING","'.setElementLabel(optionLabel);\n                    '",132],".",["T_VARIABLE","$chooserJsObject",133],".",["T_CONSTANT_ENCAPSED_STRING","'.close();\n                }\n            '",133],";",["T_WHITESPACE","\n        ",135],"}",["T_WHITESPACE","\n    ",136],"}",["T_WHITESPACE","\n\n    ",137],["T_DOC_COMMENT","\/**\n     * Category Tree node onClick listener js function\n     *\n     * @return string\n     *\/",139],["T_WHITESPACE","\n    ",143],["T_PUBLIC","public",144],["T_WHITESPACE"," ",144],["T_FUNCTION","function",144],["T_WHITESPACE"," ",144],["T_STRING","getCategoryClickListenerJs",144],"(",")",["T_WHITESPACE","\n    ",144],"{",["T_WHITESPACE","\n        ",145],["T_VARIABLE","$js",146],["T_WHITESPACE"," ",146],"=",["T_WHITESPACE"," ",146],["T_CONSTANT_ENCAPSED_STRING","'\n            function (node, e) {\n                {jsObject}.addVarToUrl(\"category_id\", node.attributes.id);\n                {jsObject}.reload({jsObject}.url);\n                {jsObject}.categoryId = node.attributes.id != \"none\" ? node.attributes.id : false;\n                {jsObject}.categoryName = node.attributes.id != \"none\" ? node.text : false;\n            }\n        '",146],";",["T_WHITESPACE","\n        ",153],["T_VARIABLE","$js",154],["T_WHITESPACE"," ",154],"=",["T_WHITESPACE"," ",154],["T_STRING","str_replace",154],"(",["T_CONSTANT_ENCAPSED_STRING","'{jsObject}'",154],",",["T_WHITESPACE"," ",154],["T_VARIABLE","$this",154],["T_OBJECT_OPERATOR","->",154],["T_STRING","getJsObjectName",154],"(",")",",",["T_WHITESPACE"," ",154],["T_VARIABLE","$js",154],")",";",["T_WHITESPACE","\n        ",154],["T_RETURN","return",155],["T_WHITESPACE"," ",155],["T_VARIABLE","$js",155],";",["T_WHITESPACE","\n    ",155],"}",["T_WHITESPACE","\n\n    ",156],["T_DOC_COMMENT","\/**\n     * Filter checked\/unchecked rows in grid\n     *\n     * @param Mage_Adminhtml_Block_Widget_Grid_Column $column\n     * @return Mage_Adminhtml_Block_Catalog_Product_Widget_Chooser\n     *\/",158],["T_WHITESPACE","\n    ",163],["T_PROTECTED","protected",164],["T_WHITESPACE"," ",164],["T_FUNCTION","function",164],["T_WHITESPACE"," ",164],["T_STRING","_addColumnFilterToCollection",164],"(",["T_VARIABLE","$column",164],")",["T_WHITESPACE","\n    ",164],"{",["T_WHITESPACE","\n        ",165],["T_IF","if",166],["T_WHITESPACE"," ",166],"(",["T_VARIABLE","$column",166],["T_OBJECT_OPERATOR","->",166],["T_STRING","getId",166],"(",")",["T_WHITESPACE"," ",166],["T_IS_EQUAL","==",166],["T_WHITESPACE"," ",166],["T_CONSTANT_ENCAPSED_STRING","'in_products'",166],")",["T_WHITESPACE"," ",166],"{",["T_WHITESPACE","\n            ",166],["T_VARIABLE","$selected",167],["T_WHITESPACE"," ",167],"=",["T_WHITESPACE"," ",167],["T_VARIABLE","$this",167],["T_OBJECT_OPERATOR","->",167],["T_STRING","getSelectedProducts",167],"(",")",";",["T_WHITESPACE","\n            ",167],["T_IF","if",168],["T_WHITESPACE"," ",168],"(",["T_VARIABLE","$column",168],["T_OBJECT_OPERATOR","->",168],["T_STRING","getFilter",168],"(",")",["T_OBJECT_OPERATOR","->",168],["T_STRING","getValue",168],"(",")",")",["T_WHITESPACE"," ",168],"{",["T_WHITESPACE","\n                ",168],["T_VARIABLE","$this",169],["T_OBJECT_OPERATOR","->",169],["T_STRING","getCollection",169],"(",")",["T_OBJECT_OPERATOR","->",169],["T_STRING","addFieldToFilter",169],"(",["T_CONSTANT_ENCAPSED_STRING","'entity_id'",169],",",["T_WHITESPACE"," ",169],["T_ARRAY","array",169],"(",["T_CONSTANT_ENCAPSED_STRING","'in'",169],["T_DOUBLE_ARROW","=>",169],["T_VARIABLE","$selected",169],")",")",";",["T_WHITESPACE","\n            ",169],"}",["T_WHITESPACE"," ",170],["T_ELSE","else",170],["T_WHITESPACE"," ",170],"{",["T_WHITESPACE","\n                ",170],["T_VARIABLE","$this",171],["T_OBJECT_OPERATOR","->",171],["T_STRING","getCollection",171],"(",")",["T_OBJECT_OPERATOR","->",171],["T_STRING","addFieldToFilter",171],"(",["T_CONSTANT_ENCAPSED_STRING","'entity_id'",171],",",["T_WHITESPACE"," ",171],["T_ARRAY","array",171],"(",["T_CONSTANT_ENCAPSED_STRING","'nin'",171],["T_DOUBLE_ARROW","=>",171],["T_VARIABLE","$selected",171],")",")",";",["T_WHITESPACE","\n            ",171],"}",["T_WHITESPACE","\n        ",172],"}",["T_WHITESPACE"," ",173],["T_ELSE","else",173],["T_WHITESPACE"," ",173],"{",["T_WHITESPACE","\n            ",173],["T_STRING","parent",174],["T_DOUBLE_COLON","::",174],["T_STRING","_addColumnFilterToCollection",174],"(",["T_VARIABLE","$column",174],")",";",["T_WHITESPACE","\n        ",174],"}",["T_WHITESPACE","\n        ",175],["T_RETURN","return",176],["T_WHITESPACE"," ",176],["T_VARIABLE","$this",176],";",["T_WHITESPACE","\n    ",176],"}",["T_WHITESPACE","\n\n    ",177],["T_DOC_COMMENT","\/**\n     * Prepare products collection, defined collection filters (category, product type)\n     *\n     * @return Mage_Adminhtml_Block_Widget_Grid\n     *\/",179],["T_WHITESPACE","\n    ",183],["T_PROTECTED","protected",184],["T_WHITESPACE"," ",184],["T_FUNCTION","function",184],["T_WHITESPACE"," ",184],["T_STRING","_prepareCollection",184],"(",")",["T_WHITESPACE","\n    ",184],"{",["T_WHITESPACE","\n        ",185],["T_COMMENT","\/* @var $collection Mage_Catalog_Model_Resource_Eav_Mysql4_Product_Collection *\/",186],["T_WHITESPACE","\n        ",186],["T_VARIABLE","$collection",187],["T_WHITESPACE"," ",187],"=",["T_WHITESPACE"," ",187],["T_STRING","Mage",187],["T_DOUBLE_COLON","::",187],["T_STRING","getResourceModel",187],"(",["T_CONSTANT_ENCAPSED_STRING","'catalog\/product_collection'",187],")",["T_WHITESPACE","\n            ",187],["T_OBJECT_OPERATOR","->",188],["T_STRING","setStoreId",188],"(",["T_LNUMBER","0",188],")",["T_WHITESPACE","\n            ",188],["T_OBJECT_OPERATOR","->",189],["T_STRING","addAttributeToSelect",189],"(",["T_CONSTANT_ENCAPSED_STRING","'name'",189],")",";",["T_WHITESPACE","\n\n        ",189],["T_IF","if",191],["T_WHITESPACE"," ",191],"(",["T_VARIABLE","$categoryId",191],["T_WHITESPACE"," ",191],"=",["T_WHITESPACE"," ",191],["T_VARIABLE","$this",191],["T_OBJECT_OPERATOR","->",191],["T_STRING","getCategoryId",191],"(",")",")",["T_WHITESPACE"," ",191],"{",["T_WHITESPACE","\n            ",191],["T_VARIABLE","$category",192],["T_WHITESPACE"," ",192],"=",["T_WHITESPACE"," ",192],["T_STRING","Mage",192],["T_DOUBLE_COLON","::",192],["T_STRING","getModel",192],"(",["T_CONSTANT_ENCAPSED_STRING","'catalog\/category'",192],")",["T_OBJECT_OPERATOR","->",192],["T_STRING","load",192],"(",["T_VARIABLE","$categoryId",192],")",";",["T_WHITESPACE","\n            ",192],["T_IF","if",193],["T_WHITESPACE"," ",193],"(",["T_VARIABLE","$category",193],["T_OBJECT_OPERATOR","->",193],["T_STRING","getId",193],"(",")",")",["T_WHITESPACE"," ",193],"{",["T_WHITESPACE","\n                ",193],["T_COMMENT","\/\/ $collection->addCategoryFilter($category);\n",194],["T_WHITESPACE","                ",195],["T_VARIABLE","$productIds",195],["T_WHITESPACE"," ",195],"=",["T_WHITESPACE"," ",195],["T_VARIABLE","$category",195],["T_OBJECT_OPERATOR","->",195],["T_STRING","getProductsPosition",195],"(",")",";",["T_WHITESPACE","\n                ",195],["T_VARIABLE","$productIds",196],["T_WHITESPACE"," ",196],"=",["T_WHITESPACE"," ",196],["T_STRING","array_keys",196],"(",["T_VARIABLE","$productIds",196],")",";",["T_WHITESPACE","\n                ",196],["T_IF","if",197],["T_WHITESPACE"," ",197],"(",["T_EMPTY","empty",197],"(",["T_VARIABLE","$productIds",197],")",")",["T_WHITESPACE"," ",197],"{",["T_WHITESPACE","\n                    ",197],["T_VARIABLE","$productIds",198],["T_WHITESPACE"," ",198],"=",["T_WHITESPACE"," ",198],["T_LNUMBER","0",198],";",["T_WHITESPACE","\n                ",198],"}",["T_WHITESPACE","\n                ",199],["T_VARIABLE","$collection",200],["T_OBJECT_OPERATOR","->",200],["T_STRING","addFieldToFilter",200],"(",["T_CONSTANT_ENCAPSED_STRING","'entity_id'",200],",",["T_WHITESPACE"," ",200],["T_ARRAY","array",200],"(",["T_CONSTANT_ENCAPSED_STRING","'in'",200],["T_WHITESPACE"," ",200],["T_DOUBLE_ARROW","=>",200],["T_WHITESPACE"," ",200],["T_VARIABLE","$productIds",200],")",")",";",["T_WHITESPACE","\n            ",200],"}",["T_WHITESPACE","\n        ",201],"}",["T_WHITESPACE","\n\n        ",202],["T_IF","if",204],["T_WHITESPACE"," ",204],"(",["T_VARIABLE","$productTypeId",204],["T_WHITESPACE"," ",204],"=",["T_WHITESPACE"," ",204],["T_VARIABLE","$this",204],["T_OBJECT_OPERATOR","->",204],["T_STRING","getProductTypeId",204],"(",")",")",["T_WHITESPACE"," ",204],"{",["T_WHITESPACE","\n            ",204],["T_VARIABLE","$collection",205],["T_OBJECT_OPERATOR","->",205],["T_STRING","addAttributeToFilter",205],"(",["T_CONSTANT_ENCAPSED_STRING","'type_id'",205],",",["T_WHITESPACE"," ",205],["T_VARIABLE","$productTypeId",205],")",";",["T_WHITESPACE","\n        ",205],"}",["T_WHITESPACE","\n\n        ",206],["T_VARIABLE","$this",208],["T_OBJECT_OPERATOR","->",208],["T_STRING","setCollection",208],"(",["T_VARIABLE","$collection",208],")",";",["T_WHITESPACE","\n        ",208],["T_RETURN","return",209],["T_WHITESPACE"," ",209],["T_STRING","parent",209],["T_DOUBLE_COLON","::",209],["T_STRING","_prepareCollection",209],"(",")",";",["T_WHITESPACE","\n    ",209],"}",["T_WHITESPACE","\n\n    ",210],["T_DOC_COMMENT","\/**\n     * Prepare columns for products grid\n     *\n     * @return Mage_Adminhtml_Block_Widget_Grid\n     *\/",212],["T_WHITESPACE","\n    ",216],["T_PROTECTED","protected",217],["T_WHITESPACE"," ",217],["T_FUNCTION","function",217],["T_WHITESPACE"," ",217],["T_STRING","_prepareColumns",217],"(",")",["T_WHITESPACE","\n    ",217],"{",["T_WHITESPACE","\n        ",218],["T_IF","if",219],["T_WHITESPACE"," ",219],"(",["T_VARIABLE","$this",219],["T_OBJECT_OPERATOR","->",219],["T_STRING","getUseMassaction",219],"(",")",")",["T_WHITESPACE"," ",219],"{",["T_WHITESPACE","\n            ",219],["T_VARIABLE","$this",220],["T_OBJECT_OPERATOR","->",220],["T_STRING","addColumn",220],"(",["T_CONSTANT_ENCAPSED_STRING","'in_products'",220],",",["T_WHITESPACE"," ",220],["T_ARRAY","array",220],"(",["T_WHITESPACE","\n                ",220],["T_CONSTANT_ENCAPSED_STRING","'header_css_class'",221],["T_WHITESPACE"," ",221],["T_DOUBLE_ARROW","=>",221],["T_WHITESPACE"," ",221],["T_CONSTANT_ENCAPSED_STRING","'a-center'",221],",",["T_WHITESPACE","\n                ",221],["T_CONSTANT_ENCAPSED_STRING","'type'",222],["T_WHITESPACE","      ",222],["T_DOUBLE_ARROW","=>",222],["T_WHITESPACE"," ",222],["T_CONSTANT_ENCAPSED_STRING","'checkbox'",222],",",["T_WHITESPACE","\n                ",222],["T_CONSTANT_ENCAPSED_STRING","'name'",223],["T_WHITESPACE","      ",223],["T_DOUBLE_ARROW","=>",223],["T_WHITESPACE"," ",223],["T_CONSTANT_ENCAPSED_STRING","'in_products'",223],",",["T_WHITESPACE","\n                ",223],["T_CONSTANT_ENCAPSED_STRING","'inline_css'",224],["T_WHITESPACE"," ",224],["T_DOUBLE_ARROW","=>",224],["T_WHITESPACE"," ",224],["T_CONSTANT_ENCAPSED_STRING","'checkbox entities'",224],",",["T_WHITESPACE","\n                ",224],["T_CONSTANT_ENCAPSED_STRING","'field_name'",225],["T_WHITESPACE"," ",225],["T_DOUBLE_ARROW","=>",225],["T_WHITESPACE"," ",225],["T_CONSTANT_ENCAPSED_STRING","'in_products'",225],",",["T_WHITESPACE","\n                ",225],["T_CONSTANT_ENCAPSED_STRING","'values'",226],["T_WHITESPACE","    ",226],["T_DOUBLE_ARROW","=>",226],["T_WHITESPACE"," ",226],["T_VARIABLE","$this",226],["T_OBJECT_OPERATOR","->",226],["T_STRING","getSelectedProducts",226],"(",")",",",["T_WHITESPACE","\n                ",226],["T_CONSTANT_ENCAPSED_STRING","'align'",227],["T_WHITESPACE","     ",227],["T_DOUBLE_ARROW","=>",227],["T_WHITESPACE"," ",227],["T_CONSTANT_ENCAPSED_STRING","'center'",227],",",["T_WHITESPACE","\n                ",227],["T_CONSTANT_ENCAPSED_STRING","'index'",228],["T_WHITESPACE","     ",228],["T_DOUBLE_ARROW","=>",228],["T_WHITESPACE"," ",228],["T_CONSTANT_ENCAPSED_STRING","'entity_id'",228],",",["T_WHITESPACE","\n                ",228],["T_CONSTANT_ENCAPSED_STRING","'use_index'",229],["T_WHITESPACE"," ",229],["T_DOUBLE_ARROW","=>",229],["T_WHITESPACE"," ",229],["T_STRING","true",229],",",["T_WHITESPACE","\n            ",229],")",")",";",["T_WHITESPACE","\n        ",230],"}",["T_WHITESPACE","\n\n        ",231],["T_VARIABLE","$this",233],["T_OBJECT_OPERATOR","->",233],["T_STRING","addColumn",233],"(",["T_CONSTANT_ENCAPSED_STRING","'entity_id'",233],",",["T_WHITESPACE"," ",233],["T_ARRAY","array",233],"(",["T_WHITESPACE","\n            ",233],["T_CONSTANT_ENCAPSED_STRING","'header'",234],["T_WHITESPACE","    ",234],["T_DOUBLE_ARROW","=>",234],["T_WHITESPACE"," ",234],["T_STRING","Mage",234],["T_DOUBLE_COLON","::",234],["T_STRING","helper",234],"(",["T_CONSTANT_ENCAPSED_STRING","'catalog'",234],")",["T_OBJECT_OPERATOR","->",234],["T_STRING","__",234],"(",["T_CONSTANT_ENCAPSED_STRING","'ID'",234],")",",",["T_WHITESPACE","\n            ",234],["T_CONSTANT_ENCAPSED_STRING","'sortable'",235],["T_WHITESPACE","  ",235],["T_DOUBLE_ARROW","=>",235],["T_WHITESPACE"," ",235],["T_STRING","true",235],",",["T_WHITESPACE","\n            ",235],["T_CONSTANT_ENCAPSED_STRING","'width'",236],["T_WHITESPACE","     ",236],["T_DOUBLE_ARROW","=>",236],["T_WHITESPACE"," ",236],["T_CONSTANT_ENCAPSED_STRING","'60px'",236],",",["T_WHITESPACE","\n            ",236],["T_CONSTANT_ENCAPSED_STRING","'index'",237],["T_WHITESPACE","     ",237],["T_DOUBLE_ARROW","=>",237],["T_WHITESPACE"," ",237],["T_CONSTANT_ENCAPSED_STRING","'entity_id'",237],["T_WHITESPACE","\n        ",237],")",")",";",["T_WHITESPACE","\n        ",238],["T_VARIABLE","$this",239],["T_OBJECT_OPERATOR","->",239],["T_STRING","addColumn",239],"(",["T_CONSTANT_ENCAPSED_STRING","'chooser_sku'",239],",",["T_WHITESPACE"," ",239],["T_ARRAY","array",239],"(",["T_WHITESPACE","\n            ",239],["T_CONSTANT_ENCAPSED_STRING","'header'",240],["T_WHITESPACE","    ",240],["T_DOUBLE_ARROW","=>",240],["T_WHITESPACE"," ",240],["T_STRING","Mage",240],["T_DOUBLE_COLON","::",240],["T_STRING","helper",240],"(",["T_CONSTANT_ENCAPSED_STRING","'catalog'",240],")",["T_OBJECT_OPERATOR","->",240],["T_STRING","__",240],"(",["T_CONSTANT_ENCAPSED_STRING","'SKU'",240],")",",",["T_WHITESPACE","\n            ",240],["T_CONSTANT_ENCAPSED_STRING","'name'",241],["T_WHITESPACE","      ",241],["T_DOUBLE_ARROW","=>",241],["T_WHITESPACE"," ",241],["T_CONSTANT_ENCAPSED_STRING","'chooser_sku'",241],",",["T_WHITESPACE","\n            ",241],["T_CONSTANT_ENCAPSED_STRING","'width'",242],["T_WHITESPACE","     ",242],["T_DOUBLE_ARROW","=>",242],["T_WHITESPACE"," ",242],["T_CONSTANT_ENCAPSED_STRING","'80px'",242],",",["T_WHITESPACE","\n            ",242],["T_CONSTANT_ENCAPSED_STRING","'index'",243],["T_WHITESPACE","     ",243],["T_DOUBLE_ARROW","=>",243],["T_WHITESPACE"," ",243],["T_CONSTANT_ENCAPSED_STRING","'sku'",243],["T_WHITESPACE","\n        ",243],")",")",";",["T_WHITESPACE","\n        ",244],["T_VARIABLE","$this",245],["T_OBJECT_OPERATOR","->",245],["T_STRING","addColumn",245],"(",["T_CONSTANT_ENCAPSED_STRING","'chooser_name'",245],",",["T_WHITESPACE"," ",245],["T_ARRAY","array",245],"(",["T_WHITESPACE","\n            ",245],["T_CONSTANT_ENCAPSED_STRING","'header'",246],["T_WHITESPACE","    ",246],["T_DOUBLE_ARROW","=>",246],["T_WHITESPACE"," ",246],["T_STRING","Mage",246],["T_DOUBLE_COLON","::",246],["T_STRING","helper",246],"(",["T_CONSTANT_ENCAPSED_STRING","'catalog'",246],")",["T_OBJECT_OPERATOR","->",246],["T_STRING","__",246],"(",["T_CONSTANT_ENCAPSED_STRING","'Product Name'",246],")",",",["T_WHITESPACE","\n            ",246],["T_CONSTANT_ENCAPSED_STRING","'name'",247],["T_WHITESPACE","      ",247],["T_DOUBLE_ARROW","=>",247],["T_WHITESPACE"," ",247],["T_CONSTANT_ENCAPSED_STRING","'chooser_name'",247],",",["T_WHITESPACE","\n            ",247],["T_CONSTANT_ENCAPSED_STRING","'index'",248],["T_WHITESPACE","     ",248],["T_DOUBLE_ARROW","=>",248],["T_WHITESPACE"," ",248],["T_CONSTANT_ENCAPSED_STRING","'name'",248],["T_WHITESPACE","\n        ",248],")",")",";",["T_WHITESPACE","\n\n        ",249],["T_RETURN","return",251],["T_WHITESPACE"," ",251],["T_STRING","parent",251],["T_DOUBLE_COLON","::",251],["T_STRING","_prepareColumns",251],"(",")",";",["T_WHITESPACE","\n    ",251],"}",["T_WHITESPACE","\n\n    ",252],["T_DOC_COMMENT","\/**\n     * Adds additional parameter to URL for loading only products grid\n     *\n     * @return string\n     *\/",254],["T_WHITESPACE","\n    ",258],["T_PUBLIC","public",259],["T_WHITESPACE"," ",259],["T_FUNCTION","function",259],["T_WHITESPACE"," ",259],["T_STRING","getGridUrl",259],"(",")",["T_WHITESPACE","\n    ",259],"{",["T_WHITESPACE","\n        ",260],["T_RETURN","return",261],["T_WHITESPACE"," ",261],["T_VARIABLE","$this",261],["T_OBJECT_OPERATOR","->",261],["T_STRING","getUrl",261],"(",["T_CONSTANT_ENCAPSED_STRING","'*\/catalog_product_widget\/chooser'",261],",",["T_WHITESPACE"," ",261],["T_ARRAY","array",261],"(",["T_WHITESPACE","\n            ",261],["T_CONSTANT_ENCAPSED_STRING","'products_grid'",262],["T_WHITESPACE"," ",262],["T_DOUBLE_ARROW","=>",262],["T_WHITESPACE"," ",262],["T_STRING","true",262],",",["T_WHITESPACE","\n            ",262],["T_CONSTANT_ENCAPSED_STRING","'_current'",263],["T_WHITESPACE"," ",263],["T_DOUBLE_ARROW","=>",263],["T_WHITESPACE"," ",263],["T_STRING","true",263],",",["T_WHITESPACE","\n            ",263],["T_CONSTANT_ENCAPSED_STRING","'uniq_id'",264],["T_WHITESPACE"," ",264],["T_DOUBLE_ARROW","=>",264],["T_WHITESPACE"," ",264],["T_VARIABLE","$this",264],["T_OBJECT_OPERATOR","->",264],["T_STRING","getId",264],"(",")",",",["T_WHITESPACE","\n            ",264],["T_CONSTANT_ENCAPSED_STRING","'use_massaction'",265],["T_WHITESPACE"," ",265],["T_DOUBLE_ARROW","=>",265],["T_WHITESPACE"," ",265],["T_VARIABLE","$this",265],["T_OBJECT_OPERATOR","->",265],["T_STRING","getUseMassaction",265],"(",")",",",["T_WHITESPACE","\n            ",265],["T_CONSTANT_ENCAPSED_STRING","'product_type_id'",266],["T_WHITESPACE"," ",266],["T_DOUBLE_ARROW","=>",266],["T_WHITESPACE"," ",266],["T_VARIABLE","$this",266],["T_OBJECT_OPERATOR","->",266],["T_STRING","getProductTypeId",266],"(",")",["T_WHITESPACE","\n        ",266],")",")",";",["T_WHITESPACE","\n    ",267],"}",["T_WHITESPACE","\n\n    ",268],["T_DOC_COMMENT","\/**\n     * Setter\n     *\n     * @param array $selectedProducts\n     * @return Mage_Adminhtml_Block_Catalog_Product_Widget_Chooser\n     *\/",270],["T_WHITESPACE","\n    ",275],["T_PUBLIC","public",276],["T_WHITESPACE"," ",276],["T_FUNCTION","function",276],["T_WHITESPACE"," ",276],["T_STRING","setSelectedProducts",276],"(",["T_VARIABLE","$selectedProducts",276],")",["T_WHITESPACE","\n    ",276],"{",["T_WHITESPACE","\n        ",277],["T_VARIABLE","$this",278],["T_OBJECT_OPERATOR","->",278],["T_STRING","_selectedProducts",278],["T_WHITESPACE"," ",278],"=",["T_WHITESPACE"," ",278],["T_VARIABLE","$selectedProducts",278],";",["T_WHITESPACE","\n        ",278],["T_RETURN","return",279],["T_WHITESPACE"," ",279],["T_VARIABLE","$this",279],";",["T_WHITESPACE","\n    ",279],"}",["T_WHITESPACE","\n\n    ",280],["T_DOC_COMMENT","\/**\n     * Getter\n     *\n     * @return array\n     *\/",282],["T_WHITESPACE","\n    ",286],["T_PUBLIC","public",287],["T_WHITESPACE"," ",287],["T_FUNCTION","function",287],["T_WHITESPACE"," ",287],["T_STRING","getSelectedProducts",287],"(",")",["T_WHITESPACE","\n    ",287],"{",["T_WHITESPACE","\n        ",288],["T_IF","if",289],["T_WHITESPACE"," ",289],"(",["T_VARIABLE","$selectedProducts",289],["T_WHITESPACE"," ",289],"=",["T_WHITESPACE"," ",289],["T_VARIABLE","$this",289],["T_OBJECT_OPERATOR","->",289],["T_STRING","getRequest",289],"(",")",["T_OBJECT_OPERATOR","->",289],["T_STRING","getParam",289],"(",["T_CONSTANT_ENCAPSED_STRING","'selected_products'",289],",",["T_WHITESPACE"," ",289],["T_STRING","null",289],")",")",["T_WHITESPACE"," ",289],"{",["T_WHITESPACE","\n            ",289],["T_VARIABLE","$this",290],["T_OBJECT_OPERATOR","->",290],["T_STRING","setSelectedProducts",290],"(",["T_VARIABLE","$selectedProducts",290],")",";",["T_WHITESPACE","\n        ",290],"}",["T_WHITESPACE","\n        ",291],["T_RETURN","return",292],["T_WHITESPACE"," ",292],["T_VARIABLE","$this",292],["T_OBJECT_OPERATOR","->",292],["T_STRING","_selectedProducts",292],";",["T_WHITESPACE","\n    ",292],"}",["T_WHITESPACE","\n",293],"}",["T_WHITESPACE","\n",294]]
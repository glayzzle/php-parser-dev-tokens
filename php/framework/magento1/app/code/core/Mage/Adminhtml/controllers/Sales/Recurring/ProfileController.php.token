[["T_OPEN_TAG","<?php\n",1],["T_DOC_COMMENT","\/**\n * Magento\n *\n * NOTICE OF LICENSE\n *\n * This source file is subject to the Open Software License (OSL 3.0)\n * that is bundled with this package in the file LICENSE.txt.\n * It is also available through the world-wide-web at this URL:\n * http:\/\/opensource.org\/licenses\/osl-3.0.php\n * If you did not receive a copy of the license and are unable to\n * obtain it through the world-wide-web, please send an email\n * to license@magento.com so we can send you a copy immediately.\n *\n * DISCLAIMER\n *\n * Do not edit or add to this file if you wish to upgrade Magento to newer\n * versions in the future. If you wish to customize Magento for your\n * needs please refer to http:\/\/www.magento.com for more information.\n *\n * @category    Mage\n * @package     Mage_Adminhtml\n * @copyright  Copyright (c) 2006-2016 X.commerce, Inc. and affiliates (http:\/\/www.magento.com)\n * @license    http:\/\/opensource.org\/licenses\/osl-3.0.php  Open Software License (OSL 3.0)\n *\/",2],["T_WHITESPACE","\n\n",25],["T_DOC_COMMENT","\/**\n * Recurring profiles view\/management controller\n *\n * TODO: implement ACL restrictions\n *\/",27],["T_WHITESPACE","\n",31],["T_CLASS","class",32],["T_WHITESPACE"," ",32],["T_STRING","Mage_Adminhtml_Sales_Recurring_ProfileController",32],["T_WHITESPACE"," ",32],["T_EXTENDS","extends",32],["T_WHITESPACE"," ",32],["T_STRING","Mage_Adminhtml_Controller_Action",32],["T_WHITESPACE","\n",32],"{",["T_WHITESPACE","\n    ",33],["T_DOC_COMMENT","\/**\n     * Recurring profiles list\n     *\n     * @return void\n     *\/",34],["T_WHITESPACE","\n    ",38],["T_PUBLIC","public",39],["T_WHITESPACE"," ",39],["T_FUNCTION","function",39],["T_WHITESPACE"," ",39],["T_STRING","indexAction",39],"(",")",["T_WHITESPACE","\n    ",39],"{",["T_WHITESPACE","\n        ",40],["T_VARIABLE","$this",41],["T_OBJECT_OPERATOR","->",41],["T_STRING","_title",41],"(",["T_STRING","Mage",41],["T_DOUBLE_COLON","::",41],["T_STRING","helper",41],"(",["T_CONSTANT_ENCAPSED_STRING","'sales'",41],")",["T_OBJECT_OPERATOR","->",41],["T_STRING","__",41],"(",["T_CONSTANT_ENCAPSED_STRING","'Sales'",41],")",")",["T_OBJECT_OPERATOR","->",41],["T_STRING","_title",41],"(",["T_STRING","Mage",41],["T_DOUBLE_COLON","::",41],["T_STRING","helper",41],"(",["T_CONSTANT_ENCAPSED_STRING","'sales'",41],")",["T_OBJECT_OPERATOR","->",41],["T_STRING","__",41],"(",["T_CONSTANT_ENCAPSED_STRING","'Recurring Profiles'",41],")",")",["T_WHITESPACE","\n            ",41],["T_OBJECT_OPERATOR","->",42],["T_STRING","loadLayout",42],"(",")",["T_WHITESPACE","\n            ",42],["T_OBJECT_OPERATOR","->",43],["T_STRING","_setActiveMenu",43],"(",["T_CONSTANT_ENCAPSED_STRING","'sales\/recurring_profile'",43],")",["T_WHITESPACE","\n            ",43],["T_OBJECT_OPERATOR","->",44],["T_STRING","renderLayout",44],"(",")",";",["T_WHITESPACE","\n        ",44],["T_RETURN","return",45],["T_WHITESPACE"," ",45],["T_VARIABLE","$this",45],";",["T_WHITESPACE","\n    ",45],"}",["T_WHITESPACE","\n\n    ",46],["T_DOC_COMMENT","\/**\n     * View recurring profile detales\n     *\/",48],["T_WHITESPACE","\n    ",50],["T_PUBLIC","public",51],["T_WHITESPACE"," ",51],["T_FUNCTION","function",51],["T_WHITESPACE"," ",51],["T_STRING","viewAction",51],"(",")",["T_WHITESPACE","\n    ",51],"{",["T_WHITESPACE","\n        ",52],["T_TRY","try",53],["T_WHITESPACE"," ",53],"{",["T_WHITESPACE","\n            ",53],["T_VARIABLE","$this",54],["T_OBJECT_OPERATOR","->",54],["T_STRING","_title",54],"(",["T_STRING","Mage",54],["T_DOUBLE_COLON","::",54],["T_STRING","helper",54],"(",["T_CONSTANT_ENCAPSED_STRING","'sales'",54],")",["T_OBJECT_OPERATOR","->",54],["T_STRING","__",54],"(",["T_CONSTANT_ENCAPSED_STRING","'Sales'",54],")",")",["T_OBJECT_OPERATOR","->",54],["T_STRING","_title",54],"(",["T_STRING","Mage",54],["T_DOUBLE_COLON","::",54],["T_STRING","helper",54],"(",["T_CONSTANT_ENCAPSED_STRING","'sales'",54],")",["T_OBJECT_OPERATOR","->",54],["T_STRING","__",54],"(",["T_CONSTANT_ENCAPSED_STRING","'Recurring Profiles'",54],")",")",";",["T_WHITESPACE","\n            ",54],["T_VARIABLE","$profile",55],["T_WHITESPACE"," ",55],"=",["T_WHITESPACE"," ",55],["T_VARIABLE","$this",55],["T_OBJECT_OPERATOR","->",55],["T_STRING","_initProfile",55],"(",")",";",["T_WHITESPACE","\n            ",55],["T_VARIABLE","$this",56],["T_OBJECT_OPERATOR","->",56],["T_STRING","loadLayout",56],"(",")",["T_WHITESPACE","\n                ",56],["T_OBJECT_OPERATOR","->",57],["T_STRING","_setActiveMenu",57],"(",["T_CONSTANT_ENCAPSED_STRING","'sales\/recurring_profile'",57],")",["T_WHITESPACE","\n                ",57],["T_OBJECT_OPERATOR","->",58],["T_STRING","_title",58],"(",["T_STRING","Mage",58],["T_DOUBLE_COLON","::",58],["T_STRING","helper",58],"(",["T_CONSTANT_ENCAPSED_STRING","'sales'",58],")",["T_OBJECT_OPERATOR","->",58],["T_STRING","__",58],"(",["T_CONSTANT_ENCAPSED_STRING","'Profile #%s'",58],",",["T_WHITESPACE"," ",58],["T_VARIABLE","$profile",58],["T_OBJECT_OPERATOR","->",58],["T_STRING","getReferenceId",58],"(",")",")",")",["T_WHITESPACE","\n                ",58],["T_OBJECT_OPERATOR","->",59],["T_STRING","renderLayout",59],"(",")",["T_WHITESPACE","\n            ",59],";",["T_WHITESPACE","\n            ",60],["T_RETURN","return",61],";",["T_WHITESPACE","\n        ",61],"}",["T_WHITESPACE"," ",62],["T_CATCH","catch",62],["T_WHITESPACE"," ",62],"(",["T_STRING","Mage_Core_Exception",62],["T_WHITESPACE"," ",62],["T_VARIABLE","$e",62],")",["T_WHITESPACE"," ",62],"{",["T_WHITESPACE","\n            ",62],["T_VARIABLE","$this",63],["T_OBJECT_OPERATOR","->",63],["T_STRING","_getSession",63],"(",")",["T_OBJECT_OPERATOR","->",63],["T_STRING","addError",63],"(",["T_VARIABLE","$e",63],["T_OBJECT_OPERATOR","->",63],["T_STRING","getMessage",63],"(",")",")",";",["T_WHITESPACE","\n        ",63],"}",["T_WHITESPACE"," ",64],["T_CATCH","catch",64],["T_WHITESPACE"," ",64],"(",["T_STRING","Exception",64],["T_WHITESPACE"," ",64],["T_VARIABLE","$e",64],")",["T_WHITESPACE"," ",64],"{",["T_WHITESPACE","\n            ",64],["T_STRING","Mage",65],["T_DOUBLE_COLON","::",65],["T_STRING","logException",65],"(",["T_VARIABLE","$e",65],")",";",["T_WHITESPACE","\n        ",65],"}",["T_WHITESPACE","\n        ",66],["T_VARIABLE","$this",67],["T_OBJECT_OPERATOR","->",67],["T_STRING","_redirect",67],"(",["T_CONSTANT_ENCAPSED_STRING","'*\/*\/'",67],")",";",["T_WHITESPACE","\n    ",67],"}",["T_WHITESPACE","\n\n    ",68],["T_DOC_COMMENT","\/**\n     * Profiles ajax grid\n     *\/",70],["T_WHITESPACE","\n    ",72],["T_PUBLIC","public",73],["T_WHITESPACE"," ",73],["T_FUNCTION","function",73],["T_WHITESPACE"," ",73],["T_STRING","gridAction",73],"(",")",["T_WHITESPACE","\n    ",73],"{",["T_WHITESPACE","\n        ",74],["T_TRY","try",75],["T_WHITESPACE"," ",75],"{",["T_WHITESPACE","\n            ",75],["T_VARIABLE","$this",76],["T_OBJECT_OPERATOR","->",76],["T_STRING","loadLayout",76],"(",")",["T_OBJECT_OPERATOR","->",76],["T_STRING","renderLayout",76],"(",")",";",["T_WHITESPACE","\n            ",76],["T_RETURN","return",77],";",["T_WHITESPACE","\n        ",77],"}",["T_WHITESPACE"," ",78],["T_CATCH","catch",78],["T_WHITESPACE"," ",78],"(",["T_STRING","Mage_Core_Exception",78],["T_WHITESPACE"," ",78],["T_VARIABLE","$e",78],")",["T_WHITESPACE"," ",78],"{",["T_WHITESPACE","\n            ",78],["T_VARIABLE","$this",79],["T_OBJECT_OPERATOR","->",79],["T_STRING","_getSession",79],"(",")",["T_OBJECT_OPERATOR","->",79],["T_STRING","addError",79],"(",["T_VARIABLE","$e",79],["T_OBJECT_OPERATOR","->",79],["T_STRING","getMessage",79],"(",")",")",";",["T_WHITESPACE","\n        ",79],"}",["T_WHITESPACE"," ",80],["T_CATCH","catch",80],["T_WHITESPACE"," ",80],"(",["T_STRING","Exception",80],["T_WHITESPACE"," ",80],["T_VARIABLE","$e",80],")",["T_WHITESPACE"," ",80],"{",["T_WHITESPACE","\n            ",80],["T_STRING","Mage",81],["T_DOUBLE_COLON","::",81],["T_STRING","logException",81],"(",["T_VARIABLE","$e",81],")",";",["T_WHITESPACE","\n        ",81],"}",["T_WHITESPACE","\n        ",82],["T_VARIABLE","$this",83],["T_OBJECT_OPERATOR","->",83],["T_STRING","_redirect",83],"(",["T_CONSTANT_ENCAPSED_STRING","'*\/*\/'",83],")",";",["T_WHITESPACE","\n    ",83],"}",["T_WHITESPACE","\n\n    ",84],["T_DOC_COMMENT","\/**\n     * Profile orders ajax grid\n     *\/",86],["T_WHITESPACE","\n    ",88],["T_PUBLIC","public",89],["T_WHITESPACE"," ",89],["T_FUNCTION","function",89],["T_WHITESPACE"," ",89],["T_STRING","ordersAction",89],"(",")",["T_WHITESPACE","\n    ",89],"{",["T_WHITESPACE","\n        ",90],["T_TRY","try",91],["T_WHITESPACE"," ",91],"{",["T_WHITESPACE","\n            ",91],["T_VARIABLE","$this",92],["T_OBJECT_OPERATOR","->",92],["T_STRING","_initProfile",92],"(",")",";",["T_WHITESPACE","\n            ",92],["T_VARIABLE","$this",93],["T_OBJECT_OPERATOR","->",93],["T_STRING","loadLayout",93],"(",")",["T_OBJECT_OPERATOR","->",93],["T_STRING","renderLayout",93],"(",")",";",["T_WHITESPACE","\n        ",93],"}",["T_WHITESPACE"," ",94],["T_CATCH","catch",94],["T_WHITESPACE"," ",94],"(",["T_STRING","Exception",94],["T_WHITESPACE"," ",94],["T_VARIABLE","$e",94],")",["T_WHITESPACE"," ",94],"{",["T_WHITESPACE","\n            ",94],["T_STRING","Mage",95],["T_DOUBLE_COLON","::",95],["T_STRING","logException",95],"(",["T_VARIABLE","$e",95],")",";",["T_WHITESPACE","\n            ",95],["T_VARIABLE","$this",96],["T_OBJECT_OPERATOR","->",96],["T_STRING","norouteAction",96],"(",")",";",["T_WHITESPACE","\n        ",96],"}",["T_WHITESPACE","\n    ",97],"}",["T_WHITESPACE","\n\n    ",98],["T_DOC_COMMENT","\/**\n     * Profile state updater action\n     *\/",100],["T_WHITESPACE","\n    ",102],["T_PUBLIC","public",103],["T_WHITESPACE"," ",103],["T_FUNCTION","function",103],["T_WHITESPACE"," ",103],["T_STRING","updateStateAction",103],"(",")",["T_WHITESPACE","\n    ",103],"{",["T_WHITESPACE","\n        ",104],["T_VARIABLE","$profile",105],["T_WHITESPACE"," ",105],"=",["T_WHITESPACE"," ",105],["T_STRING","null",105],";",["T_WHITESPACE","\n        ",105],["T_TRY","try",106],["T_WHITESPACE"," ",106],"{",["T_WHITESPACE","\n            ",106],["T_VARIABLE","$profile",107],["T_WHITESPACE"," ",107],"=",["T_WHITESPACE"," ",107],["T_VARIABLE","$this",107],["T_OBJECT_OPERATOR","->",107],["T_STRING","_initProfile",107],"(",")",";",["T_WHITESPACE","\n\n            ",107],["T_SWITCH","switch",109],["T_WHITESPACE"," ",109],"(",["T_VARIABLE","$this",109],["T_OBJECT_OPERATOR","->",109],["T_STRING","getRequest",109],"(",")",["T_OBJECT_OPERATOR","->",109],["T_STRING","getParam",109],"(",["T_CONSTANT_ENCAPSED_STRING","'action'",109],")",")",["T_WHITESPACE"," ",109],"{",["T_WHITESPACE","\n                ",109],["T_CASE","case",110],["T_WHITESPACE"," ",110],["T_CONSTANT_ENCAPSED_STRING","'cancel'",110],":",["T_WHITESPACE","\n                    ",110],["T_VARIABLE","$profile",111],["T_OBJECT_OPERATOR","->",111],["T_STRING","cancel",111],"(",")",";",["T_WHITESPACE","\n                    ",111],["T_BREAK","break",112],";",["T_WHITESPACE","\n                ",112],["T_CASE","case",113],["T_WHITESPACE"," ",113],["T_CONSTANT_ENCAPSED_STRING","'suspend'",113],":",["T_WHITESPACE","\n                    ",113],["T_VARIABLE","$profile",114],["T_OBJECT_OPERATOR","->",114],["T_STRING","suspend",114],"(",")",";",["T_WHITESPACE","\n                    ",114],["T_BREAK","break",115],";",["T_WHITESPACE","\n                ",115],["T_CASE","case",116],["T_WHITESPACE"," ",116],["T_CONSTANT_ENCAPSED_STRING","'activate'",116],":",["T_WHITESPACE","\n                    ",116],["T_VARIABLE","$profile",117],["T_OBJECT_OPERATOR","->",117],["T_STRING","activate",117],"(",")",";",["T_WHITESPACE","\n                    ",117],["T_BREAK","break",118],";",["T_WHITESPACE","\n            ",118],"}",["T_WHITESPACE","\n            ",119],["T_VARIABLE","$this",120],["T_OBJECT_OPERATOR","->",120],["T_STRING","_getSession",120],"(",")",["T_OBJECT_OPERATOR","->",120],["T_STRING","addSuccess",120],"(",["T_STRING","Mage",120],["T_DOUBLE_COLON","::",120],["T_STRING","helper",120],"(",["T_CONSTANT_ENCAPSED_STRING","'sales'",120],")",["T_OBJECT_OPERATOR","->",120],["T_STRING","__",120],"(",["T_CONSTANT_ENCAPSED_STRING","'The profile state has been updated.'",120],")",")",";",["T_WHITESPACE","\n        ",120],"}",["T_WHITESPACE"," ",121],["T_CATCH","catch",121],["T_WHITESPACE"," ",121],"(",["T_STRING","Mage_Core_Exception",121],["T_WHITESPACE"," ",121],["T_VARIABLE","$e",121],")",["T_WHITESPACE"," ",121],"{",["T_WHITESPACE","\n            ",121],["T_VARIABLE","$this",122],["T_OBJECT_OPERATOR","->",122],["T_STRING","_getSession",122],"(",")",["T_OBJECT_OPERATOR","->",122],["T_STRING","addError",122],"(",["T_VARIABLE","$e",122],["T_OBJECT_OPERATOR","->",122],["T_STRING","getMessage",122],"(",")",")",";",["T_WHITESPACE","\n        ",122],"}",["T_WHITESPACE"," ",123],["T_CATCH","catch",123],["T_WHITESPACE"," ",123],"(",["T_STRING","Exception",123],["T_WHITESPACE"," ",123],["T_VARIABLE","$e",123],")",["T_WHITESPACE"," ",123],"{",["T_WHITESPACE","\n            ",123],["T_VARIABLE","$this",124],["T_OBJECT_OPERATOR","->",124],["T_STRING","_getSession",124],"(",")",["T_OBJECT_OPERATOR","->",124],["T_STRING","addError",124],"(",["T_STRING","Mage",124],["T_DOUBLE_COLON","::",124],["T_STRING","helper",124],"(",["T_CONSTANT_ENCAPSED_STRING","'sales'",124],")",["T_OBJECT_OPERATOR","->",124],["T_STRING","__",124],"(",["T_CONSTANT_ENCAPSED_STRING","'Failed to update the profile.'",124],")",")",";",["T_WHITESPACE","\n            ",124],["T_STRING","Mage",125],["T_DOUBLE_COLON","::",125],["T_STRING","logException",125],"(",["T_VARIABLE","$e",125],")",";",["T_WHITESPACE","\n        ",125],"}",["T_WHITESPACE","\n        ",126],["T_IF","if",127],["T_WHITESPACE"," ",127],"(",["T_VARIABLE","$profile",127],")",["T_WHITESPACE"," ",127],"{",["T_WHITESPACE","\n            ",127],["T_VARIABLE","$this",128],["T_OBJECT_OPERATOR","->",128],["T_STRING","_redirect",128],"(",["T_CONSTANT_ENCAPSED_STRING","'*\/*\/view'",128],",",["T_WHITESPACE"," ",128],["T_ARRAY","array",128],"(",["T_CONSTANT_ENCAPSED_STRING","'profile'",128],["T_WHITESPACE"," ",128],["T_DOUBLE_ARROW","=>",128],["T_WHITESPACE"," ",128],["T_VARIABLE","$profile",128],["T_OBJECT_OPERATOR","->",128],["T_STRING","getId",128],"(",")",")",")",";",["T_WHITESPACE","\n        ",128],"}",["T_WHITESPACE"," ",129],["T_ELSE","else",129],["T_WHITESPACE"," ",129],"{",["T_WHITESPACE","\n            ",129],["T_VARIABLE","$this",130],["T_OBJECT_OPERATOR","->",130],["T_STRING","_redirect",130],"(",["T_CONSTANT_ENCAPSED_STRING","'*\/*\/'",130],")",";",["T_WHITESPACE","\n        ",130],"}",["T_WHITESPACE","\n    ",131],"}",["T_WHITESPACE","\n\n    ",132],["T_DOC_COMMENT","\/**\n     * Profile information updater action\n     *\/",134],["T_WHITESPACE","\n    ",136],["T_PUBLIC","public",137],["T_WHITESPACE"," ",137],["T_FUNCTION","function",137],["T_WHITESPACE"," ",137],["T_STRING","updateProfileAction",137],"(",")",["T_WHITESPACE","\n    ",137],"{",["T_WHITESPACE","\n        ",138],["T_VARIABLE","$profile",139],["T_WHITESPACE"," ",139],"=",["T_WHITESPACE"," ",139],["T_STRING","null",139],";",["T_WHITESPACE","\n        ",139],["T_TRY","try",140],["T_WHITESPACE"," ",140],"{",["T_WHITESPACE","\n            ",140],["T_VARIABLE","$profile",141],["T_WHITESPACE"," ",141],"=",["T_WHITESPACE"," ",141],["T_VARIABLE","$this",141],["T_OBJECT_OPERATOR","->",141],["T_STRING","_initProfile",141],"(",")",";",["T_WHITESPACE","\n            ",141],["T_VARIABLE","$profile",142],["T_OBJECT_OPERATOR","->",142],["T_STRING","fetchUpdate",142],"(",")",";",["T_WHITESPACE","\n            ",142],["T_IF","if",143],["T_WHITESPACE"," ",143],"(",["T_VARIABLE","$profile",143],["T_OBJECT_OPERATOR","->",143],["T_STRING","hasDataChanges",143],"(",")",")",["T_WHITESPACE"," ",143],"{",["T_WHITESPACE","\n                ",143],["T_VARIABLE","$profile",144],["T_OBJECT_OPERATOR","->",144],["T_STRING","save",144],"(",")",";",["T_WHITESPACE","\n                ",144],["T_VARIABLE","$this",145],["T_OBJECT_OPERATOR","->",145],["T_STRING","_getSession",145],"(",")",["T_OBJECT_OPERATOR","->",145],["T_STRING","addSuccess",145],"(",["T_VARIABLE","$this",145],["T_OBJECT_OPERATOR","->",145],["T_STRING","__",145],"(",["T_CONSTANT_ENCAPSED_STRING","'The profile has been updated.'",145],")",")",";",["T_WHITESPACE","\n            ",145],"}",["T_WHITESPACE"," ",146],["T_ELSE","else",146],["T_WHITESPACE"," ",146],"{",["T_WHITESPACE","\n                ",146],["T_VARIABLE","$this",147],["T_OBJECT_OPERATOR","->",147],["T_STRING","_getSession",147],"(",")",["T_OBJECT_OPERATOR","->",147],["T_STRING","addNotice",147],"(",["T_VARIABLE","$this",147],["T_OBJECT_OPERATOR","->",147],["T_STRING","__",147],"(",["T_CONSTANT_ENCAPSED_STRING","'The profile has no changes.'",147],")",")",";",["T_WHITESPACE","\n            ",147],"}",["T_WHITESPACE","\n        ",148],"}",["T_WHITESPACE"," ",149],["T_CATCH","catch",149],["T_WHITESPACE"," ",149],"(",["T_STRING","Mage_Core_Exception",149],["T_WHITESPACE"," ",149],["T_VARIABLE","$e",149],")",["T_WHITESPACE"," ",149],"{",["T_WHITESPACE","\n            ",149],["T_VARIABLE","$this",150],["T_OBJECT_OPERATOR","->",150],["T_STRING","_getSession",150],"(",")",["T_OBJECT_OPERATOR","->",150],["T_STRING","addError",150],"(",["T_VARIABLE","$e",150],["T_OBJECT_OPERATOR","->",150],["T_STRING","getMessage",150],"(",")",")",";",["T_WHITESPACE","\n        ",150],"}",["T_WHITESPACE"," ",151],["T_CATCH","catch",151],["T_WHITESPACE"," ",151],"(",["T_STRING","Exception",151],["T_WHITESPACE"," ",151],["T_VARIABLE","$e",151],")",["T_WHITESPACE"," ",151],"{",["T_WHITESPACE","\n            ",151],["T_VARIABLE","$this",152],["T_OBJECT_OPERATOR","->",152],["T_STRING","_getSession",152],"(",")",["T_OBJECT_OPERATOR","->",152],["T_STRING","addError",152],"(",["T_VARIABLE","$this",152],["T_OBJECT_OPERATOR","->",152],["T_STRING","__",152],"(",["T_CONSTANT_ENCAPSED_STRING","'Failed to update the profile.'",152],")",")",";",["T_WHITESPACE","\n            ",152],["T_STRING","Mage",153],["T_DOUBLE_COLON","::",153],["T_STRING","logException",153],"(",["T_VARIABLE","$e",153],")",";",["T_WHITESPACE","\n        ",153],"}",["T_WHITESPACE","\n        ",154],["T_IF","if",155],["T_WHITESPACE"," ",155],"(",["T_VARIABLE","$profile",155],")",["T_WHITESPACE"," ",155],"{",["T_WHITESPACE","\n            ",155],["T_VARIABLE","$this",156],["T_OBJECT_OPERATOR","->",156],["T_STRING","_redirect",156],"(",["T_CONSTANT_ENCAPSED_STRING","'*\/*\/view'",156],",",["T_WHITESPACE"," ",156],["T_ARRAY","array",156],"(",["T_CONSTANT_ENCAPSED_STRING","'profile'",156],["T_WHITESPACE"," ",156],["T_DOUBLE_ARROW","=>",156],["T_WHITESPACE"," ",156],["T_VARIABLE","$profile",156],["T_OBJECT_OPERATOR","->",156],["T_STRING","getId",156],"(",")",")",")",";",["T_WHITESPACE","\n        ",156],"}",["T_WHITESPACE"," ",157],["T_ELSE","else",157],["T_WHITESPACE"," ",157],"{",["T_WHITESPACE","\n            ",157],["T_VARIABLE","$this",158],["T_OBJECT_OPERATOR","->",158],["T_STRING","_redirect",158],"(",["T_CONSTANT_ENCAPSED_STRING","'*\/*\/'",158],")",";",["T_WHITESPACE","\n        ",158],"}",["T_WHITESPACE","\n    ",159],"}",["T_WHITESPACE","\n\n    ",160],["T_DOC_COMMENT","\/**\n     * Cutomer billing agreements ajax action\n     *\n     *\/",162],["T_WHITESPACE","\n    ",165],["T_PUBLIC","public",166],["T_WHITESPACE"," ",166],["T_FUNCTION","function",166],["T_WHITESPACE"," ",166],["T_STRING","customerGridAction",166],"(",")",["T_WHITESPACE","\n    ",166],"{",["T_WHITESPACE","\n        ",167],["T_VARIABLE","$this",168],["T_OBJECT_OPERATOR","->",168],["T_STRING","_initCustomer",168],"(",")",";",["T_WHITESPACE","\n        ",168],["T_VARIABLE","$this",169],["T_OBJECT_OPERATOR","->",169],["T_STRING","loadLayout",169],"(",["T_STRING","false",169],")",["T_WHITESPACE","\n            ",169],["T_OBJECT_OPERATOR","->",170],["T_STRING","renderLayout",170],"(",")",";",["T_WHITESPACE","\n    ",170],"}",["T_WHITESPACE","\n\n    ",171],["T_DOC_COMMENT","\/**\n     * Initialize customer by ID specified in request\n     *\n     * @return Mage_Adminhtml_Sales_Billing_AgreementController\n     *\/",173],["T_WHITESPACE","\n    ",177],["T_PROTECTED","protected",178],["T_WHITESPACE"," ",178],["T_FUNCTION","function",178],["T_WHITESPACE"," ",178],["T_STRING","_initCustomer",178],"(",")",["T_WHITESPACE","\n    ",178],"{",["T_WHITESPACE","\n        ",179],["T_VARIABLE","$customerId",180],["T_WHITESPACE"," ",180],"=",["T_WHITESPACE"," ",180],["T_INT_CAST","(int)",180],["T_WHITESPACE"," ",180],["T_VARIABLE","$this",180],["T_OBJECT_OPERATOR","->",180],["T_STRING","getRequest",180],"(",")",["T_OBJECT_OPERATOR","->",180],["T_STRING","getParam",180],"(",["T_CONSTANT_ENCAPSED_STRING","'id'",180],")",";",["T_WHITESPACE","\n        ",180],["T_VARIABLE","$customer",181],["T_WHITESPACE"," ",181],"=",["T_WHITESPACE"," ",181],["T_STRING","Mage",181],["T_DOUBLE_COLON","::",181],["T_STRING","getModel",181],"(",["T_CONSTANT_ENCAPSED_STRING","'customer\/customer'",181],")",";",["T_WHITESPACE","\n\n        ",181],["T_IF","if",183],["T_WHITESPACE"," ",183],"(",["T_VARIABLE","$customerId",183],")",["T_WHITESPACE"," ",183],"{",["T_WHITESPACE","\n            ",183],["T_VARIABLE","$customer",184],["T_OBJECT_OPERATOR","->",184],["T_STRING","load",184],"(",["T_VARIABLE","$customerId",184],")",";",["T_WHITESPACE","\n        ",184],"}",["T_WHITESPACE","\n\n        ",185],["T_STRING","Mage",187],["T_DOUBLE_COLON","::",187],["T_STRING","register",187],"(",["T_CONSTANT_ENCAPSED_STRING","'current_customer'",187],",",["T_WHITESPACE"," ",187],["T_VARIABLE","$customer",187],")",";",["T_WHITESPACE","\n        ",187],["T_RETURN","return",188],["T_WHITESPACE"," ",188],["T_VARIABLE","$this",188],";",["T_WHITESPACE","\n    ",188],"}",["T_WHITESPACE","\n\n    ",189],["T_DOC_COMMENT","\/**\n     * Load\/set profile\n     *\n     * @return Mage_Sales_Model_Recurring_Profile\n     *\/",191],["T_WHITESPACE","\n    ",195],["T_PROTECTED","protected",196],["T_WHITESPACE"," ",196],["T_FUNCTION","function",196],["T_WHITESPACE"," ",196],["T_STRING","_initProfile",196],"(",")",["T_WHITESPACE","\n    ",196],"{",["T_WHITESPACE","\n        ",197],["T_VARIABLE","$profile",198],["T_WHITESPACE"," ",198],"=",["T_WHITESPACE"," ",198],["T_STRING","Mage",198],["T_DOUBLE_COLON","::",198],["T_STRING","getModel",198],"(",["T_CONSTANT_ENCAPSED_STRING","'sales\/recurring_profile'",198],")",["T_OBJECT_OPERATOR","->",198],["T_STRING","load",198],"(",["T_VARIABLE","$this",198],["T_OBJECT_OPERATOR","->",198],["T_STRING","getRequest",198],"(",")",["T_OBJECT_OPERATOR","->",198],["T_STRING","getParam",198],"(",["T_CONSTANT_ENCAPSED_STRING","'profile'",198],")",")",";",["T_WHITESPACE","\n        ",198],["T_IF","if",199],["T_WHITESPACE"," ",199],"(","!",["T_VARIABLE","$profile",199],["T_OBJECT_OPERATOR","->",199],["T_STRING","getId",199],"(",")",")",["T_WHITESPACE"," ",199],"{",["T_WHITESPACE","\n            ",199],["T_STRING","Mage",200],["T_DOUBLE_COLON","::",200],["T_STRING","throwException",200],"(",["T_VARIABLE","$this",200],["T_OBJECT_OPERATOR","->",200],["T_STRING","__",200],"(",["T_CONSTANT_ENCAPSED_STRING","'Specified profile does not exist.'",200],")",")",";",["T_WHITESPACE","\n        ",200],"}",["T_WHITESPACE","\n        ",201],["T_STRING","Mage",202],["T_DOUBLE_COLON","::",202],["T_STRING","register",202],"(",["T_CONSTANT_ENCAPSED_STRING","'current_recurring_profile'",202],",",["T_WHITESPACE"," ",202],["T_VARIABLE","$profile",202],")",";",["T_WHITESPACE","\n        ",202],["T_RETURN","return",203],["T_WHITESPACE"," ",203],["T_VARIABLE","$profile",203],";",["T_WHITESPACE","\n    ",203],"}",["T_WHITESPACE","\n\n    ",204],["T_DOC_COMMENT","\/**\n     * Check is allowed access to action\n     *\n     * @return bool\n     *\/",206],["T_WHITESPACE","\n    ",210],["T_PROTECTED","protected",211],["T_WHITESPACE"," ",211],["T_FUNCTION","function",211],["T_WHITESPACE"," ",211],["T_STRING","_isAllowed",211],"(",")",["T_WHITESPACE","\n    ",211],"{",["T_WHITESPACE","\n        ",212],["T_RETURN","return",213],["T_WHITESPACE"," ",213],["T_STRING","Mage",213],["T_DOUBLE_COLON","::",213],["T_STRING","getSingleton",213],"(",["T_CONSTANT_ENCAPSED_STRING","'admin\/session'",213],")",["T_OBJECT_OPERATOR","->",213],["T_STRING","isAllowed",213],"(",["T_CONSTANT_ENCAPSED_STRING","'sales\/recurring_profile'",213],")",";",["T_WHITESPACE","\n    ",213],"}",["T_WHITESPACE","\n",214],"}",["T_WHITESPACE","\n",215]]
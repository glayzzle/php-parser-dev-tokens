[["T_OPEN_TAG","<?php\n",1],["T_DOC_COMMENT","\/**\n * Magento\n *\n * NOTICE OF LICENSE\n *\n * This source file is subject to the Open Software License (OSL 3.0)\n * that is bundled with this package in the file LICENSE.txt.\n * It is also available through the world-wide-web at this URL:\n * http:\/\/opensource.org\/licenses\/osl-3.0.php\n * If you did not receive a copy of the license and are unable to\n * obtain it through the world-wide-web, please send an email\n * to license@magento.com so we can send you a copy immediately.\n *\n * DISCLAIMER\n *\n * Do not edit or add to this file if you wish to upgrade Magento to newer\n * versions in the future. If you wish to customize Magento for your\n * needs please refer to http:\/\/www.magento.com for more information.\n *\n * @category    Mage\n * @package     Mage_Adminhtml\n * @copyright  Copyright (c) 2006-2016 X.commerce, Inc. and affiliates (http:\/\/www.magento.com)\n * @license    http:\/\/opensource.org\/licenses\/osl-3.0.php  Open Software License (OSL 3.0)\n *\/",2],["T_WHITESPACE","\n\n",25],["T_DOC_COMMENT","\/**\n * Adminhtml poll answer controller\n *\n * @category   Mage\n * @package    Mage_Adminhtml\n * @author      Magento Core Team <core@magentocommerce.com>\n *\/",27],["T_WHITESPACE","\n\n",33],["T_CLASS","class",35],["T_WHITESPACE"," ",35],["T_STRING","Mage_Adminhtml_Poll_AnswerController",35],["T_WHITESPACE"," ",35],["T_EXTENDS","extends",35],["T_WHITESPACE"," ",35],["T_STRING","Mage_Adminhtml_Controller_Action",35],["T_WHITESPACE","\n",35],"{",["T_WHITESPACE","\n    ",36],["T_PUBLIC","public",37],["T_WHITESPACE"," ",37],["T_FUNCTION","function",37],["T_WHITESPACE"," ",37],["T_STRING","editAction",37],"(",")",["T_WHITESPACE","\n    ",37],"{",["T_WHITESPACE","\n        ",38],["T_VARIABLE","$this",39],["T_OBJECT_OPERATOR","->",39],["T_STRING","loadLayout",39],"(",")",";",["T_WHITESPACE","\n\n        ",39],["T_VARIABLE","$this",41],["T_OBJECT_OPERATOR","->",41],["T_STRING","_setActiveMenu",41],"(",["T_CONSTANT_ENCAPSED_STRING","'cms\/poll'",41],")",";",["T_WHITESPACE","\n        ",41],["T_VARIABLE","$this",42],["T_OBJECT_OPERATOR","->",42],["T_STRING","_addBreadcrumb",42],"(",["T_STRING","Mage",42],["T_DOUBLE_COLON","::",42],["T_STRING","helper",42],"(",["T_CONSTANT_ENCAPSED_STRING","'poll'",42],")",["T_OBJECT_OPERATOR","->",42],["T_STRING","__",42],"(",["T_CONSTANT_ENCAPSED_STRING","'Poll Manager'",42],")",",",["T_WHITESPACE","\n                              ",42],["T_STRING","Mage",43],["T_DOUBLE_COLON","::",43],["T_STRING","helper",43],"(",["T_CONSTANT_ENCAPSED_STRING","'poll'",43],")",["T_OBJECT_OPERATOR","->",43],["T_STRING","__",43],"(",["T_CONSTANT_ENCAPSED_STRING","'Poll Manager'",43],")",",",["T_WHITESPACE"," ",43],["T_VARIABLE","$this",43],["T_OBJECT_OPERATOR","->",43],["T_STRING","getUrl",43],"(",["T_CONSTANT_ENCAPSED_STRING","'*\/*\/'",43],")",")",";",["T_WHITESPACE","\n        ",43],["T_VARIABLE","$this",44],["T_OBJECT_OPERATOR","->",44],["T_STRING","_addBreadcrumb",44],"(",["T_STRING","Mage",44],["T_DOUBLE_COLON","::",44],["T_STRING","helper",44],"(",["T_CONSTANT_ENCAPSED_STRING","'poll'",44],")",["T_OBJECT_OPERATOR","->",44],["T_STRING","__",44],"(",["T_CONSTANT_ENCAPSED_STRING","'Edit Poll Answer'",44],")",",",["T_WHITESPACE","\n                              ",44],["T_STRING","Mage",45],["T_DOUBLE_COLON","::",45],["T_STRING","helper",45],"(",["T_CONSTANT_ENCAPSED_STRING","'poll'",45],")",["T_OBJECT_OPERATOR","->",45],["T_STRING","__",45],"(",["T_CONSTANT_ENCAPSED_STRING","'Edit Poll Answer'",45],")",")",";",["T_WHITESPACE","\n\n        ",45],["T_VARIABLE","$this",47],["T_OBJECT_OPERATOR","->",47],["T_STRING","_addContent",47],"(",["T_VARIABLE","$this",47],["T_OBJECT_OPERATOR","->",47],["T_STRING","getLayout",47],"(",")",["T_OBJECT_OPERATOR","->",47],["T_STRING","createBlock",47],"(",["T_CONSTANT_ENCAPSED_STRING","'adminhtml\/poll_answer_edit'",47],")",")",";",["T_WHITESPACE","\n\n        ",47],["T_VARIABLE","$this",49],["T_OBJECT_OPERATOR","->",49],["T_STRING","renderLayout",49],"(",")",";",["T_WHITESPACE","\n    ",49],"}",["T_WHITESPACE","\n\n    ",50],["T_PUBLIC","public",52],["T_WHITESPACE"," ",52],["T_FUNCTION","function",52],["T_WHITESPACE"," ",52],["T_STRING","saveAction",52],"(",")",["T_WHITESPACE","\n    ",52],"{",["T_WHITESPACE","\n        ",53],["T_COMMENT","\/\/print '@@';\n",54],["T_WHITESPACE","        ",55],["T_IF","if",55],["T_WHITESPACE"," ",55],"(",["T_WHITESPACE"," ",55],["T_VARIABLE","$post",55],["T_WHITESPACE"," ",55],"=",["T_WHITESPACE"," ",55],["T_VARIABLE","$this",55],["T_OBJECT_OPERATOR","->",55],["T_STRING","getRequest",55],"(",")",["T_OBJECT_OPERATOR","->",55],["T_STRING","getPost",55],"(",")",["T_WHITESPACE"," ",55],")",["T_WHITESPACE"," ",55],"{",["T_WHITESPACE","\n            ",55],["T_TRY","try",56],["T_WHITESPACE"," ",56],"{",["T_WHITESPACE","\n                ",56],["T_VARIABLE","$model",57],["T_WHITESPACE"," ",57],"=",["T_WHITESPACE"," ",57],["T_STRING","Mage",57],["T_DOUBLE_COLON","::",57],["T_STRING","getModel",57],"(",["T_CONSTANT_ENCAPSED_STRING","'poll\/poll_answer'",57],")",";",["T_WHITESPACE","\n                ",57],["T_VARIABLE","$model",58],["T_OBJECT_OPERATOR","->",58],["T_STRING","setData",58],"(",["T_VARIABLE","$post",58],")",["T_WHITESPACE","\n                    ",58],["T_OBJECT_OPERATOR","->",59],["T_STRING","setId",59],"(",["T_VARIABLE","$this",59],["T_OBJECT_OPERATOR","->",59],["T_STRING","getRequest",59],"(",")",["T_OBJECT_OPERATOR","->",59],["T_STRING","getParam",59],"(",["T_CONSTANT_ENCAPSED_STRING","'id'",59],")",")",["T_WHITESPACE","\n                    ",59],["T_OBJECT_OPERATOR","->",60],["T_STRING","save",60],"(",")",";",["T_WHITESPACE","\n\n                ",60],["T_STRING","Mage",62],["T_DOUBLE_COLON","::",62],["T_STRING","getSingleton",62],"(",["T_CONSTANT_ENCAPSED_STRING","'adminhtml\/session'",62],")",["T_OBJECT_OPERATOR","->",62],["T_STRING","addSuccess",62],"(",["T_WHITESPACE","\n                    ",62],["T_STRING","Mage",63],["T_DOUBLE_COLON","::",63],["T_STRING","helper",63],"(",["T_CONSTANT_ENCAPSED_STRING","'poll'",63],")",["T_OBJECT_OPERATOR","->",63],["T_STRING","__",63],"(",["T_CONSTANT_ENCAPSED_STRING","'The answer has been saved.'",63],")",")",";",["T_WHITESPACE","\n                ",63],["T_VARIABLE","$this",64],["T_OBJECT_OPERATOR","->",64],["T_STRING","_redirect",64],"(",["T_CONSTANT_ENCAPSED_STRING","'*\/poll\/edit'",64],",",["T_WHITESPACE","\n                                 ",64],["T_ARRAY","array",65],"(",["T_CONSTANT_ENCAPSED_STRING","'id'",65],["T_WHITESPACE"," ",65],["T_DOUBLE_ARROW","=>",65],["T_WHITESPACE"," ",65],["T_VARIABLE","$this",65],["T_OBJECT_OPERATOR","->",65],["T_STRING","getRequest",65],"(",")",["T_OBJECT_OPERATOR","->",65],["T_STRING","getParam",65],"(",["T_CONSTANT_ENCAPSED_STRING","'poll_id'",65],")",",",["T_WHITESPACE"," ",65],["T_CONSTANT_ENCAPSED_STRING","'tab'",65],["T_WHITESPACE"," ",65],["T_DOUBLE_ARROW","=>",65],["T_WHITESPACE"," ",65],["T_CONSTANT_ENCAPSED_STRING","'answers_section'",65],")",")",";",["T_WHITESPACE","\n                ",65],["T_RETURN","return",66],";",["T_WHITESPACE","\n            ",66],"}",["T_WHITESPACE"," ",67],["T_CATCH","catch",67],["T_WHITESPACE"," ",67],"(",["T_STRING","Exception",67],["T_WHITESPACE"," ",67],["T_VARIABLE","$e",67],")",["T_WHITESPACE"," ",67],"{",["T_WHITESPACE","\n                ",67],["T_STRING","Mage",68],["T_DOUBLE_COLON","::",68],["T_STRING","getSingleton",68],"(",["T_CONSTANT_ENCAPSED_STRING","'adminhtml\/session'",68],")",["T_OBJECT_OPERATOR","->",68],["T_STRING","addError",68],"(",["T_VARIABLE","$e",68],["T_OBJECT_OPERATOR","->",68],["T_STRING","getMessage",68],"(",")",")",";",["T_WHITESPACE","\n                ",68],["T_VARIABLE","$this",69],["T_OBJECT_OPERATOR","->",69],["T_STRING","_redirect",69],"(",["T_CONSTANT_ENCAPSED_STRING","'*\/*\/edit'",69],",",["T_WHITESPACE"," ",69],["T_ARRAY","array",69],"(",["T_CONSTANT_ENCAPSED_STRING","'id'",69],["T_WHITESPACE"," ",69],["T_DOUBLE_ARROW","=>",69],["T_WHITESPACE"," ",69],["T_VARIABLE","$this",69],["T_OBJECT_OPERATOR","->",69],["T_STRING","getRequest",69],"(",")",["T_OBJECT_OPERATOR","->",69],["T_STRING","getParam",69],"(",["T_CONSTANT_ENCAPSED_STRING","'id'",69],")",")",")",";",["T_WHITESPACE","\n                ",69],["T_RETURN","return",70],";",["T_WHITESPACE","\n            ",70],"}",["T_WHITESPACE","\n        ",71],"}",["T_WHITESPACE","\n        ",72],["T_VARIABLE","$this",73],["T_OBJECT_OPERATOR","->",73],["T_STRING","_redirect",73],"(",["T_CONSTANT_ENCAPSED_STRING","'*\/*\/'",73],")",";",["T_WHITESPACE","\n    ",73],"}",["T_WHITESPACE","\n\n    ",74],["T_PUBLIC","public",76],["T_WHITESPACE"," ",76],["T_FUNCTION","function",76],["T_WHITESPACE"," ",76],["T_STRING","gridAction",76],"(",")",["T_WHITESPACE","\n    ",76],"{",["T_WHITESPACE","\n        ",77],["T_VARIABLE","$this",78],["T_OBJECT_OPERATOR","->",78],["T_STRING","getResponse",78],"(",")",["T_OBJECT_OPERATOR","->",78],["T_STRING","setBody",78],"(",["T_WHITESPACE","\n            ",78],["T_VARIABLE","$this",79],["T_OBJECT_OPERATOR","->",79],["T_STRING","getLayout",79],"(",")",["T_OBJECT_OPERATOR","->",79],["T_STRING","createBlock",79],"(",["T_CONSTANT_ENCAPSED_STRING","'adminhtml\/poll_edit_tab_answers_grid'",79],")",["T_OBJECT_OPERATOR","->",79],["T_STRING","toHtml",79],"(",")",["T_WHITESPACE","\n        ",79],")",";",["T_WHITESPACE","\n    ",80],"}",["T_WHITESPACE","\n\n    ",81],["T_PUBLIC","public",83],["T_WHITESPACE"," ",83],["T_FUNCTION","function",83],["T_WHITESPACE"," ",83],["T_STRING","jsonSaveAction",83],"(",")",["T_WHITESPACE","\n    ",83],"{",["T_WHITESPACE","\n        ",84],["T_VARIABLE","$response",85],["T_WHITESPACE"," ",85],"=",["T_WHITESPACE"," ",85],["T_NEW","new",85],["T_WHITESPACE"," ",85],["T_STRING","Varien_Object",85],"(",")",";",["T_WHITESPACE","\n        ",85],["T_VARIABLE","$response",86],["T_OBJECT_OPERATOR","->",86],["T_STRING","setError",86],"(",["T_LNUMBER","0",86],")",";",["T_WHITESPACE","\n\n        ",86],["T_IF","if",88],["T_WHITESPACE"," ",88],"(",["T_WHITESPACE"," ",88],["T_VARIABLE","$post",88],["T_WHITESPACE"," ",88],"=",["T_WHITESPACE"," ",88],["T_VARIABLE","$this",88],["T_OBJECT_OPERATOR","->",88],["T_STRING","getRequest",88],"(",")",["T_OBJECT_OPERATOR","->",88],["T_STRING","getPost",88],"(",")",["T_WHITESPACE"," ",88],")",["T_WHITESPACE"," ",88],"{",["T_WHITESPACE","\n            ",88],["T_VARIABLE","$data",89],["T_WHITESPACE"," ",89],"=",["T_WHITESPACE"," ",89],["T_STRING","Zend_Json",89],["T_DOUBLE_COLON","::",89],["T_STRING","decode",89],"(",["T_VARIABLE","$post",89],"[",["T_CONSTANT_ENCAPSED_STRING","'data'",89],"]",")",";",["T_WHITESPACE","\n            ",89],["T_TRY","try",90],["T_WHITESPACE"," ",90],"{",["T_WHITESPACE","\n                ",90],["T_IF","if",91],"(",["T_WHITESPACE"," ",91],["T_STRING","trim",91],"(",["T_VARIABLE","$data",91],"[",["T_CONSTANT_ENCAPSED_STRING","'answer_title'",91],"]",")",["T_WHITESPACE"," ",91],["T_IS_EQUAL","==",91],["T_WHITESPACE"," ",91],["T_CONSTANT_ENCAPSED_STRING","''",91],["T_WHITESPACE"," ",91],")",["T_WHITESPACE"," ",91],"{",["T_WHITESPACE","\n                    ",91],["T_THROW","throw",92],["T_WHITESPACE"," ",92],["T_NEW","new",92],["T_WHITESPACE"," ",92],["T_STRING","Exception",92],"(",["T_STRING","Mage",92],["T_DOUBLE_COLON","::",92],["T_STRING","helper",92],"(",["T_CONSTANT_ENCAPSED_STRING","'poll'",92],")",["T_OBJECT_OPERATOR","->",92],["T_STRING","__",92],"(",["T_CONSTANT_ENCAPSED_STRING","'Invalid Answer.'",92],")",")",";",["T_WHITESPACE","\n                ",92],"}",["T_WHITESPACE","\n                ",93],["T_VARIABLE","$model",94],["T_WHITESPACE"," ",94],"=",["T_WHITESPACE"," ",94],["T_STRING","Mage",94],["T_DOUBLE_COLON","::",94],["T_STRING","getModel",94],"(",["T_CONSTANT_ENCAPSED_STRING","'poll\/poll_answer'",94],")",";",["T_WHITESPACE","\n                ",94],["T_VARIABLE","$model",95],["T_OBJECT_OPERATOR","->",95],["T_STRING","setData",95],"(",["T_VARIABLE","$data",95],")",["T_WHITESPACE","\n                    ",95],["T_OBJECT_OPERATOR","->",96],["T_STRING","save",96],"(",")",";",["T_WHITESPACE","\n            ",96],"}",["T_WHITESPACE"," ",97],["T_CATCH","catch",97],["T_WHITESPACE"," ",97],"(",["T_STRING","Exception",97],["T_WHITESPACE"," ",97],["T_VARIABLE","$e",97],")",["T_WHITESPACE"," ",97],"{",["T_WHITESPACE","\n                ",97],["T_VARIABLE","$response",98],["T_OBJECT_OPERATOR","->",98],["T_STRING","setError",98],"(",["T_LNUMBER","1",98],")",";",["T_WHITESPACE","\n                ",98],["T_VARIABLE","$response",99],["T_OBJECT_OPERATOR","->",99],["T_STRING","setMessage",99],"(",["T_VARIABLE","$e",99],["T_OBJECT_OPERATOR","->",99],["T_STRING","getMessage",99],"(",")",")",";",["T_WHITESPACE","\n            ",99],"}",["T_WHITESPACE","\n        ",100],"}",["T_WHITESPACE","\n        ",101],["T_VARIABLE","$this",102],["T_OBJECT_OPERATOR","->",102],["T_STRING","getResponse",102],"(",")",["T_OBJECT_OPERATOR","->",102],["T_STRING","setBody",102],"(",["T_WHITESPACE"," ",102],["T_VARIABLE","$response",102],["T_OBJECT_OPERATOR","->",102],["T_STRING","toJson",102],"(",")",["T_WHITESPACE"," ",102],")",";",["T_WHITESPACE","\n    ",102],"}",["T_WHITESPACE","\n\n    ",103],["T_PUBLIC","public",105],["T_WHITESPACE"," ",105],["T_FUNCTION","function",105],["T_WHITESPACE"," ",105],["T_STRING","jsonDeleteAction",105],"(",")",["T_WHITESPACE","\n    ",105],"{",["T_WHITESPACE","\n        ",106],["T_VARIABLE","$response",107],["T_WHITESPACE"," ",107],"=",["T_WHITESPACE"," ",107],["T_NEW","new",107],["T_WHITESPACE"," ",107],["T_STRING","Varien_Object",107],"(",")",";",["T_WHITESPACE","\n        ",107],["T_VARIABLE","$response",108],["T_OBJECT_OPERATOR","->",108],["T_STRING","setError",108],"(",["T_LNUMBER","0",108],")",";",["T_WHITESPACE","\n\n        ",108],["T_IF","if",110],["T_WHITESPACE"," ",110],"(",["T_WHITESPACE"," ",110],["T_VARIABLE","$id",110],["T_WHITESPACE"," ",110],"=",["T_WHITESPACE"," ",110],["T_VARIABLE","$this",110],["T_OBJECT_OPERATOR","->",110],["T_STRING","getRequest",110],"(",")",["T_OBJECT_OPERATOR","->",110],["T_STRING","getParam",110],"(",["T_CONSTANT_ENCAPSED_STRING","'id'",110],")",["T_WHITESPACE"," ",110],")",["T_WHITESPACE"," ",110],"{",["T_WHITESPACE","\n            ",110],["T_TRY","try",111],["T_WHITESPACE"," ",111],"{",["T_WHITESPACE","\n                ",111],["T_VARIABLE","$model",112],["T_WHITESPACE"," ",112],"=",["T_WHITESPACE"," ",112],["T_STRING","Mage",112],["T_DOUBLE_COLON","::",112],["T_STRING","getModel",112],"(",["T_CONSTANT_ENCAPSED_STRING","'poll\/poll_answer'",112],")",";",["T_WHITESPACE","\n                ",112],["T_VARIABLE","$model",113],["T_OBJECT_OPERATOR","->",113],["T_STRING","setId",113],"(",["T_STRING","Zend_Json",113],["T_DOUBLE_COLON","::",113],["T_STRING","decode",113],"(",["T_VARIABLE","$id",113],")",")",["T_WHITESPACE","\n                    ",113],["T_OBJECT_OPERATOR","->",114],["T_STRING","delete",114],"(",")",";",["T_WHITESPACE","\n            ",114],"}",["T_WHITESPACE"," ",115],["T_CATCH","catch",115],["T_WHITESPACE"," ",115],"(",["T_STRING","Exception",115],["T_WHITESPACE"," ",115],["T_VARIABLE","$e",115],")",["T_WHITESPACE"," ",115],"{",["T_WHITESPACE","\n                ",115],["T_VARIABLE","$response",116],["T_OBJECT_OPERATOR","->",116],["T_STRING","setError",116],"(",["T_LNUMBER","1",116],")",";",["T_WHITESPACE","\n                ",116],["T_VARIABLE","$response",117],["T_OBJECT_OPERATOR","->",117],["T_STRING","setMessage",117],"(",["T_VARIABLE","$e",117],["T_OBJECT_OPERATOR","->",117],["T_STRING","getMessage",117],"(",")",")",";",["T_WHITESPACE","\n            ",117],"}",["T_WHITESPACE","\n        ",118],"}",["T_WHITESPACE"," ",119],["T_ELSE","else",119],["T_WHITESPACE"," ",119],"{",["T_WHITESPACE","\n            ",119],["T_VARIABLE","$response",120],["T_OBJECT_OPERATOR","->",120],["T_STRING","setError",120],"(",["T_LNUMBER","1",120],")",";",["T_WHITESPACE","\n            ",120],["T_VARIABLE","$response",121],["T_OBJECT_OPERATOR","->",121],["T_STRING","setMessage",121],"(",["T_STRING","Mage",121],["T_DOUBLE_COLON","::",121],["T_STRING","helper",121],"(",["T_CONSTANT_ENCAPSED_STRING","'poll'",121],")",["T_OBJECT_OPERATOR","->",121],["T_STRING","__",121],"(",["T_CONSTANT_ENCAPSED_STRING","'Unable to find an answer to delete.'",121],")",")",";",["T_WHITESPACE","\n        ",121],"}",["T_WHITESPACE","\n        ",122],["T_VARIABLE","$this",123],["T_OBJECT_OPERATOR","->",123],["T_STRING","getResponse",123],"(",")",["T_OBJECT_OPERATOR","->",123],["T_STRING","setBody",123],"(",["T_WHITESPACE"," ",123],["T_VARIABLE","$response",123],["T_OBJECT_OPERATOR","->",123],["T_STRING","toJson",123],"(",")",["T_WHITESPACE"," ",123],")",";",["T_WHITESPACE","\n    ",123],"}",["T_WHITESPACE","\n\n    ",124],["T_PROTECTED","protected",126],["T_WHITESPACE"," ",126],["T_FUNCTION","function",126],["T_WHITESPACE"," ",126],["T_STRING","_isAllowed",126],"(",")",["T_WHITESPACE","\n    ",126],"{",["T_WHITESPACE","\n        ",127],["T_RETURN","return",128],["T_WHITESPACE"," ",128],["T_STRING","Mage",128],["T_DOUBLE_COLON","::",128],["T_STRING","getSingleton",128],"(",["T_CONSTANT_ENCAPSED_STRING","'admin\/session'",128],")",["T_OBJECT_OPERATOR","->",128],["T_STRING","isAllowed",128],"(",["T_CONSTANT_ENCAPSED_STRING","'cms\/poll'",128],")",";",["T_WHITESPACE","\n    ",128],"}",["T_WHITESPACE","\n\n",129],"}",["T_WHITESPACE","\n",131]]
[["T_OPEN_TAG","<?php\n",1],["T_DOC_COMMENT","\/**\n * Magento\n *\n * NOTICE OF LICENSE\n *\n * This source file is subject to the Open Software License (OSL 3.0)\n * that is bundled with this package in the file LICENSE.txt.\n * It is also available through the world-wide-web at this URL:\n * http:\/\/opensource.org\/licenses\/osl-3.0.php\n * If you did not receive a copy of the license and are unable to\n * obtain it through the world-wide-web, please send an email\n * to license@magento.com so we can send you a copy immediately.\n *\n * DISCLAIMER\n *\n * Do not edit or add to this file if you wish to upgrade Magento to newer\n * versions in the future. If you wish to customize Magento for your\n * needs please refer to http:\/\/www.magento.com for more information.\n *\n * @category    Mage\n * @package     Mage_Adminhtml\n * @copyright  Copyright (c) 2006-2016 X.commerce, Inc. and affiliates (http:\/\/www.magento.com)\n * @license    http:\/\/opensource.org\/licenses\/osl-3.0.php  Open Software License (OSL 3.0)\n *\/",2],["T_WHITESPACE","\n\n",25],["T_DOC_COMMENT","\/**\n * Urlrewrites adminhtml controller\n *\n * @category   Mage\n * @package    Mage_Adminhtml\n * @author      Magento Core Team <core@magentocommerce.com>\n *\/",27],["T_WHITESPACE","\n",33],["T_CLASS","class",34],["T_WHITESPACE"," ",34],["T_STRING","Mage_Adminhtml_UrlrewriteController",34],["T_WHITESPACE"," ",34],["T_EXTENDS","extends",34],["T_WHITESPACE"," ",34],["T_STRING","Mage_Adminhtml_Controller_Action",34],["T_WHITESPACE","\n",34],"{",["T_WHITESPACE","\n    ",35],["T_DOC_COMMENT","\/**\n     * Instantiate urlrewrite, product and category\n     *\n     * @return Mage_Adminhtml_UrlrewriteController\n     *\/",36],["T_WHITESPACE","\n    ",40],["T_PROTECTED","protected",41],["T_WHITESPACE"," ",41],["T_FUNCTION","function",41],["T_WHITESPACE"," ",41],["T_STRING","_initRegistry",41],"(",")",["T_WHITESPACE","\n    ",41],"{",["T_WHITESPACE","\n        ",42],["T_VARIABLE","$this",43],["T_OBJECT_OPERATOR","->",43],["T_STRING","_title",43],"(",["T_VARIABLE","$this",43],["T_OBJECT_OPERATOR","->",43],["T_STRING","__",43],"(",["T_CONSTANT_ENCAPSED_STRING","'Rewrite Rules'",43],")",")",";",["T_WHITESPACE","\n\n        ",43],["T_COMMENT","\/\/ initialize urlrewrite, product and category models\n",45],["T_WHITESPACE","        ",46],["T_STRING","Mage",46],["T_DOUBLE_COLON","::",46],["T_STRING","register",46],"(",["T_CONSTANT_ENCAPSED_STRING","'current_urlrewrite'",46],",",["T_WHITESPACE"," ",46],["T_STRING","Mage",46],["T_DOUBLE_COLON","::",46],["T_STRING","getSingleton",46],"(",["T_CONSTANT_ENCAPSED_STRING","'core\/factory'",46],")",["T_OBJECT_OPERATOR","->",46],["T_STRING","getUrlRewriteInstance",46],"(",")",["T_WHITESPACE","\n            ",46],["T_OBJECT_OPERATOR","->",47],["T_STRING","load",47],"(",["T_VARIABLE","$this",47],["T_OBJECT_OPERATOR","->",47],["T_STRING","getRequest",47],"(",")",["T_OBJECT_OPERATOR","->",47],["T_STRING","getParam",47],"(",["T_CONSTANT_ENCAPSED_STRING","'id'",47],",",["T_WHITESPACE"," ",47],["T_LNUMBER","0",47],")",")",["T_WHITESPACE","\n        ",47],")",";",["T_WHITESPACE","\n        ",48],["T_VARIABLE","$productId",49],["T_WHITESPACE","  ",49],"=",["T_WHITESPACE"," ",49],["T_VARIABLE","$this",49],["T_OBJECT_OPERATOR","->",49],["T_STRING","getRequest",49],"(",")",["T_OBJECT_OPERATOR","->",49],["T_STRING","getParam",49],"(",["T_CONSTANT_ENCAPSED_STRING","'product'",49],",",["T_WHITESPACE"," ",49],["T_LNUMBER","0",49],")",";",["T_WHITESPACE","\n        ",49],["T_VARIABLE","$categoryId",50],["T_WHITESPACE"," ",50],"=",["T_WHITESPACE"," ",50],["T_VARIABLE","$this",50],["T_OBJECT_OPERATOR","->",50],["T_STRING","getRequest",50],"(",")",["T_OBJECT_OPERATOR","->",50],["T_STRING","getParam",50],"(",["T_CONSTANT_ENCAPSED_STRING","'category'",50],",",["T_WHITESPACE"," ",50],["T_LNUMBER","0",50],")",";",["T_WHITESPACE","\n        ",50],["T_IF","if",51],["T_WHITESPACE"," ",51],"(",["T_STRING","Mage",51],["T_DOUBLE_COLON","::",51],["T_STRING","registry",51],"(",["T_CONSTANT_ENCAPSED_STRING","'current_urlrewrite'",51],")",["T_OBJECT_OPERATOR","->",51],["T_STRING","getId",51],"(",")",")",["T_WHITESPACE"," ",51],"{",["T_WHITESPACE","\n            ",51],["T_VARIABLE","$productId",52],["T_WHITESPACE","  ",52],"=",["T_WHITESPACE"," ",52],["T_STRING","Mage",52],["T_DOUBLE_COLON","::",52],["T_STRING","registry",52],"(",["T_CONSTANT_ENCAPSED_STRING","'current_urlrewrite'",52],")",["T_OBJECT_OPERATOR","->",52],["T_STRING","getProductId",52],"(",")",";",["T_WHITESPACE","\n            ",52],["T_VARIABLE","$categoryId",53],["T_WHITESPACE"," ",53],"=",["T_WHITESPACE"," ",53],["T_STRING","Mage",53],["T_DOUBLE_COLON","::",53],["T_STRING","registry",53],"(",["T_CONSTANT_ENCAPSED_STRING","'current_urlrewrite'",53],")",["T_OBJECT_OPERATOR","->",53],["T_STRING","getCategoryId",53],"(",")",";",["T_WHITESPACE","\n        ",53],"}",["T_WHITESPACE","\n\n        ",54],["T_STRING","Mage",56],["T_DOUBLE_COLON","::",56],["T_STRING","register",56],"(",["T_CONSTANT_ENCAPSED_STRING","'current_product'",56],",",["T_WHITESPACE"," ",56],["T_STRING","Mage",56],["T_DOUBLE_COLON","::",56],["T_STRING","getModel",56],"(",["T_CONSTANT_ENCAPSED_STRING","'catalog\/product'",56],")",["T_OBJECT_OPERATOR","->",56],["T_STRING","load",56],"(",["T_VARIABLE","$productId",56],")",")",";",["T_WHITESPACE","\n        ",56],["T_STRING","Mage",57],["T_DOUBLE_COLON","::",57],["T_STRING","register",57],"(",["T_CONSTANT_ENCAPSED_STRING","'current_category'",57],",",["T_WHITESPACE"," ",57],["T_STRING","Mage",57],["T_DOUBLE_COLON","::",57],["T_STRING","getModel",57],"(",["T_CONSTANT_ENCAPSED_STRING","'catalog\/category'",57],")",["T_OBJECT_OPERATOR","->",57],["T_STRING","load",57],"(",["T_VARIABLE","$categoryId",57],")",")",";",["T_WHITESPACE","\n\n        ",57],["T_RETURN","return",59],["T_WHITESPACE"," ",59],["T_VARIABLE","$this",59],";",["T_WHITESPACE","\n    ",59],"}",["T_WHITESPACE","\n\n    ",60],["T_DOC_COMMENT","\/**\n     * Show urlrewrites index page\n     *\n     *\/",62],["T_WHITESPACE","\n    ",65],["T_PUBLIC","public",66],["T_WHITESPACE"," ",66],["T_FUNCTION","function",66],["T_WHITESPACE"," ",66],["T_STRING","indexAction",66],"(",")",["T_WHITESPACE","\n    ",66],"{",["T_WHITESPACE","\n        ",67],["T_VARIABLE","$this",68],["T_OBJECT_OPERATOR","->",68],["T_STRING","_initRegistry",68],"(",")",";",["T_WHITESPACE","\n        ",68],["T_VARIABLE","$this",69],["T_OBJECT_OPERATOR","->",69],["T_STRING","loadLayout",69],"(",")",";",["T_WHITESPACE","\n        ",69],["T_VARIABLE","$this",70],["T_OBJECT_OPERATOR","->",70],["T_STRING","_setActiveMenu",70],"(",["T_CONSTANT_ENCAPSED_STRING","'catalog\/urlrewrite'",70],")",";",["T_WHITESPACE","\n        ",70],["T_VARIABLE","$this",71],["T_OBJECT_OPERATOR","->",71],["T_STRING","_addContent",71],"(",["T_WHITESPACE","\n            ",71],["T_VARIABLE","$this",72],["T_OBJECT_OPERATOR","->",72],["T_STRING","getLayout",72],"(",")",["T_OBJECT_OPERATOR","->",72],["T_STRING","createBlock",72],"(",["T_CONSTANT_ENCAPSED_STRING","'adminhtml\/urlrewrite'",72],")",["T_WHITESPACE","\n        ",72],")",";",["T_WHITESPACE","\n        ",73],["T_VARIABLE","$this",74],["T_OBJECT_OPERATOR","->",74],["T_STRING","renderLayout",74],"(",")",";",["T_WHITESPACE","\n    ",74],"}",["T_WHITESPACE","\n\n    ",75],["T_DOC_COMMENT","\/**\n     * Show urlrewrite edit\/create page\n     *\n     *\/",77],["T_WHITESPACE","\n    ",80],["T_PUBLIC","public",81],["T_WHITESPACE"," ",81],["T_FUNCTION","function",81],["T_WHITESPACE"," ",81],["T_STRING","editAction",81],"(",")",["T_WHITESPACE","\n    ",81],"{",["T_WHITESPACE","\n        ",82],["T_VARIABLE","$this",83],["T_OBJECT_OPERATOR","->",83],["T_STRING","_initRegistry",83],"(",")",";",["T_WHITESPACE","\n\n        ",83],["T_VARIABLE","$this",85],["T_OBJECT_OPERATOR","->",85],["T_STRING","_title",85],"(",["T_VARIABLE","$this",85],["T_OBJECT_OPERATOR","->",85],["T_STRING","__",85],"(",["T_CONSTANT_ENCAPSED_STRING","'URL Rewrite'",85],")",")",";",["T_WHITESPACE","\n\n        ",85],["T_VARIABLE","$this",87],["T_OBJECT_OPERATOR","->",87],["T_STRING","loadLayout",87],"(",")",";",["T_WHITESPACE","\n        ",87],["T_VARIABLE","$this",88],["T_OBJECT_OPERATOR","->",88],["T_STRING","_setActiveMenu",88],"(",["T_CONSTANT_ENCAPSED_STRING","'catalog\/urlrewrite'",88],")",";",["T_WHITESPACE","\n        ",88],["T_VARIABLE","$this",89],["T_OBJECT_OPERATOR","->",89],["T_STRING","_addContent",89],"(",["T_VARIABLE","$this",89],["T_OBJECT_OPERATOR","->",89],["T_STRING","getLayout",89],"(",")",["T_OBJECT_OPERATOR","->",89],["T_STRING","createBlock",89],"(",["T_CONSTANT_ENCAPSED_STRING","'adminhtml\/urlrewrite_edit'",89],")",")",";",["T_WHITESPACE","\n        ",89],["T_VARIABLE","$this",90],["T_OBJECT_OPERATOR","->",90],["T_STRING","getLayout",90],"(",")",["T_OBJECT_OPERATOR","->",90],["T_STRING","getBlock",90],"(",["T_CONSTANT_ENCAPSED_STRING","'head'",90],")",["T_OBJECT_OPERATOR","->",90],["T_STRING","setCanLoadExtJs",90],"(",["T_STRING","true",90],")",";",["T_WHITESPACE","\n        ",90],["T_VARIABLE","$this",91],["T_OBJECT_OPERATOR","->",91],["T_STRING","renderLayout",91],"(",")",";",["T_WHITESPACE","\n    ",91],"}",["T_WHITESPACE","\n\n    ",92],["T_DOC_COMMENT","\/**\n     * Ajax products grid action\n     *\n     *\/",94],["T_WHITESPACE","\n    ",97],["T_PUBLIC","public",98],["T_WHITESPACE"," ",98],["T_FUNCTION","function",98],["T_WHITESPACE"," ",98],["T_STRING","productGridAction",98],"(",")",["T_WHITESPACE","\n    ",98],"{",["T_WHITESPACE","\n        ",99],["T_VARIABLE","$this",100],["T_OBJECT_OPERATOR","->",100],["T_STRING","getResponse",100],"(",")",["T_OBJECT_OPERATOR","->",100],["T_STRING","setBody",100],"(",["T_VARIABLE","$this",100],["T_OBJECT_OPERATOR","->",100],["T_STRING","getLayout",100],"(",")",["T_OBJECT_OPERATOR","->",100],["T_STRING","createBlock",100],"(",["T_CONSTANT_ENCAPSED_STRING","'adminhtml\/urlrewrite_product_grid'",100],")",["T_OBJECT_OPERATOR","->",100],["T_STRING","toHtml",100],"(",")",")",";",["T_WHITESPACE","\n    ",100],"}",["T_WHITESPACE","\n\n    ",101],["T_DOC_COMMENT","\/**\n     * Ajax categories tree loader action\n     *\n     *\/",103],["T_WHITESPACE","\n    ",106],["T_PUBLIC","public",107],["T_WHITESPACE"," ",107],["T_FUNCTION","function",107],["T_WHITESPACE"," ",107],["T_STRING","categoriesJsonAction",107],"(",")",["T_WHITESPACE","\n    ",107],"{",["T_WHITESPACE","\n        ",108],["T_VARIABLE","$id",109],["T_WHITESPACE"," ",109],"=",["T_WHITESPACE"," ",109],["T_VARIABLE","$this",109],["T_OBJECT_OPERATOR","->",109],["T_STRING","getRequest",109],"(",")",["T_OBJECT_OPERATOR","->",109],["T_STRING","getParam",109],"(",["T_CONSTANT_ENCAPSED_STRING","'id'",109],",",["T_WHITESPACE"," ",109],["T_STRING","null",109],")",";",["T_WHITESPACE","\n        ",109],["T_VARIABLE","$this",110],["T_OBJECT_OPERATOR","->",110],["T_STRING","getResponse",110],"(",")",["T_OBJECT_OPERATOR","->",110],["T_STRING","setBody",110],"(",["T_STRING","Mage",110],["T_DOUBLE_COLON","::",110],["T_STRING","getBlockSingleton",110],"(",["T_CONSTANT_ENCAPSED_STRING","'adminhtml\/urlrewrite_category_tree'",110],")",["T_WHITESPACE","\n            ",110],["T_OBJECT_OPERATOR","->",111],["T_STRING","getTreeArray",111],"(",["T_VARIABLE","$id",111],",",["T_WHITESPACE"," ",111],["T_STRING","true",111],",",["T_WHITESPACE"," ",111],["T_LNUMBER","1",111],")",["T_WHITESPACE","\n        ",111],")",";",["T_WHITESPACE","\n    ",112],"}",["T_WHITESPACE","\n\n    ",113],["T_DOC_COMMENT","\/**\n     * Urlrewrite save action\n     *\n     *\/",115],["T_WHITESPACE","\n    ",118],["T_PUBLIC","public",119],["T_WHITESPACE"," ",119],["T_FUNCTION","function",119],["T_WHITESPACE"," ",119],["T_STRING","saveAction",119],"(",")",["T_WHITESPACE","\n    ",119],"{",["T_WHITESPACE","\n        ",120],["T_VARIABLE","$this",121],["T_OBJECT_OPERATOR","->",121],["T_STRING","_initRegistry",121],"(",")",";",["T_WHITESPACE","\n\n        ",121],["T_IF","if",123],["T_WHITESPACE"," ",123],"(",["T_VARIABLE","$data",123],["T_WHITESPACE"," ",123],"=",["T_WHITESPACE"," ",123],["T_VARIABLE","$this",123],["T_OBJECT_OPERATOR","->",123],["T_STRING","getRequest",123],"(",")",["T_OBJECT_OPERATOR","->",123],["T_STRING","getPost",123],"(",")",")",["T_WHITESPACE"," ",123],"{",["T_WHITESPACE","\n            ",123],["T_VARIABLE","$session",124],["T_WHITESPACE"," ",124],"=",["T_WHITESPACE"," ",124],["T_STRING","Mage",124],["T_DOUBLE_COLON","::",124],["T_STRING","getSingleton",124],"(",["T_CONSTANT_ENCAPSED_STRING","'adminhtml\/session'",124],")",";",["T_WHITESPACE","\n            ",124],["T_TRY","try",125],["T_WHITESPACE"," ",125],"{",["T_WHITESPACE","\n                ",125],["T_COMMENT","\/\/ set basic urlrewrite data\n",126],["T_WHITESPACE","                ",127],["T_VARIABLE","$model",127],["T_WHITESPACE"," ",127],"=",["T_WHITESPACE"," ",127],["T_STRING","Mage",127],["T_DOUBLE_COLON","::",127],["T_STRING","registry",127],"(",["T_CONSTANT_ENCAPSED_STRING","'current_urlrewrite'",127],")",";",["T_WHITESPACE","\n\n                ",127],["T_COMMENT","\/\/ Validate request path\n",129],["T_WHITESPACE","                ",130],["T_VARIABLE","$requestPath",130],["T_WHITESPACE"," ",130],"=",["T_WHITESPACE"," ",130],["T_VARIABLE","$this",130],["T_OBJECT_OPERATOR","->",130],["T_STRING","getRequest",130],"(",")",["T_OBJECT_OPERATOR","->",130],["T_STRING","getParam",130],"(",["T_CONSTANT_ENCAPSED_STRING","'request_path'",130],")",";",["T_WHITESPACE","\n                ",130],["T_STRING","Mage",131],["T_DOUBLE_COLON","::",131],["T_STRING","helper",131],"(",["T_CONSTANT_ENCAPSED_STRING","'core\/url_rewrite'",131],")",["T_OBJECT_OPERATOR","->",131],["T_STRING","validateRequestPath",131],"(",["T_VARIABLE","$requestPath",131],")",";",["T_WHITESPACE","\n\n                ",131],["T_COMMENT","\/\/ Proceed and save request\n",133],["T_WHITESPACE","                ",134],["T_VARIABLE","$model",134],["T_OBJECT_OPERATOR","->",134],["T_STRING","setIdPath",134],"(",["T_VARIABLE","$this",134],["T_OBJECT_OPERATOR","->",134],["T_STRING","getRequest",134],"(",")",["T_OBJECT_OPERATOR","->",134],["T_STRING","getParam",134],"(",["T_CONSTANT_ENCAPSED_STRING","'id_path'",134],")",")",["T_WHITESPACE","\n                    ",134],["T_OBJECT_OPERATOR","->",135],["T_STRING","setTargetPath",135],"(",["T_VARIABLE","$this",135],["T_OBJECT_OPERATOR","->",135],["T_STRING","getRequest",135],"(",")",["T_OBJECT_OPERATOR","->",135],["T_STRING","getParam",135],"(",["T_CONSTANT_ENCAPSED_STRING","'target_path'",135],")",")",["T_WHITESPACE","\n                    ",135],["T_OBJECT_OPERATOR","->",136],["T_STRING","setOptions",136],"(",["T_VARIABLE","$this",136],["T_OBJECT_OPERATOR","->",136],["T_STRING","getRequest",136],"(",")",["T_OBJECT_OPERATOR","->",136],["T_STRING","getParam",136],"(",["T_CONSTANT_ENCAPSED_STRING","'options'",136],")",")",["T_WHITESPACE","\n                    ",136],["T_OBJECT_OPERATOR","->",137],["T_STRING","setDescription",137],"(",["T_VARIABLE","$this",137],["T_OBJECT_OPERATOR","->",137],["T_STRING","getRequest",137],"(",")",["T_OBJECT_OPERATOR","->",137],["T_STRING","getParam",137],"(",["T_CONSTANT_ENCAPSED_STRING","'description'",137],")",")",["T_WHITESPACE","\n                    ",137],["T_OBJECT_OPERATOR","->",138],["T_STRING","setRequestPath",138],"(",["T_STRING","strtolower",138],"(",["T_VARIABLE","$requestPath",138],")",")",";",["T_WHITESPACE","\n\n                ",138],["T_IF","if",140],["T_WHITESPACE"," ",140],"(","!",["T_VARIABLE","$model",140],["T_OBJECT_OPERATOR","->",140],["T_STRING","getId",140],"(",")",")",["T_WHITESPACE"," ",140],"{",["T_WHITESPACE","\n                    ",140],["T_VARIABLE","$model",141],["T_OBJECT_OPERATOR","->",141],["T_STRING","setIsSystem",141],"(",["T_LNUMBER","0",141],")",";",["T_WHITESPACE","\n                ",141],"}",["T_WHITESPACE","\n                ",142],["T_IF","if",143],["T_WHITESPACE"," ",143],"(","!",["T_VARIABLE","$model",143],["T_OBJECT_OPERATOR","->",143],["T_STRING","getIsSystem",143],"(",")",")",["T_WHITESPACE"," ",143],"{",["T_WHITESPACE","\n                    ",143],["T_VARIABLE","$model",144],["T_OBJECT_OPERATOR","->",144],["T_STRING","setStoreId",144],"(",["T_VARIABLE","$this",144],["T_OBJECT_OPERATOR","->",144],["T_STRING","getRequest",144],"(",")",["T_OBJECT_OPERATOR","->",144],["T_STRING","getParam",144],"(",["T_CONSTANT_ENCAPSED_STRING","'store_id'",144],",",["T_WHITESPACE"," ",144],["T_LNUMBER","0",144],")",")",";",["T_WHITESPACE","\n                ",144],"}",["T_WHITESPACE","\n\n                ",145],["T_COMMENT","\/\/ override urlrewrite data, basing on current registry combination\n",147],["T_WHITESPACE","                ",148],["T_VARIABLE","$category",148],["T_WHITESPACE"," ",148],"=",["T_WHITESPACE"," ",148],["T_STRING","Mage",148],["T_DOUBLE_COLON","::",148],["T_STRING","registry",148],"(",["T_CONSTANT_ENCAPSED_STRING","'current_category'",148],")",["T_OBJECT_OPERATOR","->",148],["T_STRING","getId",148],"(",")",["T_WHITESPACE"," ",148],"?",["T_WHITESPACE"," ",148],["T_STRING","Mage",148],["T_DOUBLE_COLON","::",148],["T_STRING","registry",148],"(",["T_CONSTANT_ENCAPSED_STRING","'current_category'",148],")",["T_WHITESPACE"," ",148],":",["T_WHITESPACE"," ",148],["T_STRING","null",148],";",["T_WHITESPACE","\n                ",148],["T_IF","if",149],["T_WHITESPACE"," ",149],"(",["T_VARIABLE","$category",149],")",["T_WHITESPACE"," ",149],"{",["T_WHITESPACE","\n                    ",149],["T_VARIABLE","$model",150],["T_OBJECT_OPERATOR","->",150],["T_STRING","setCategoryId",150],"(",["T_VARIABLE","$category",150],["T_OBJECT_OPERATOR","->",150],["T_STRING","getId",150],"(",")",")",";",["T_WHITESPACE","\n                ",150],"}",["T_WHITESPACE","\n                ",151],["T_VARIABLE","$product",152],["T_WHITESPACE","  ",152],"=",["T_WHITESPACE"," ",152],["T_STRING","Mage",152],["T_DOUBLE_COLON","::",152],["T_STRING","registry",152],"(",["T_CONSTANT_ENCAPSED_STRING","'current_product'",152],")",["T_OBJECT_OPERATOR","->",152],["T_STRING","getId",152],"(",")",["T_WHITESPACE"," ",152],"?",["T_WHITESPACE"," ",152],["T_STRING","Mage",152],["T_DOUBLE_COLON","::",152],["T_STRING","registry",152],"(",["T_CONSTANT_ENCAPSED_STRING","'current_product'",152],")",["T_WHITESPACE"," ",152],":",["T_WHITESPACE"," ",152],["T_STRING","null",152],";",["T_WHITESPACE","\n                ",152],["T_IF","if",153],["T_WHITESPACE"," ",153],"(",["T_VARIABLE","$product",153],")",["T_WHITESPACE"," ",153],"{",["T_WHITESPACE","\n                    ",153],["T_VARIABLE","$model",154],["T_OBJECT_OPERATOR","->",154],["T_STRING","setProductId",154],"(",["T_VARIABLE","$product",154],["T_OBJECT_OPERATOR","->",154],["T_STRING","getId",154],"(",")",")",";",["T_WHITESPACE","\n                ",154],"}",["T_WHITESPACE","\n                ",155],["T_IF","if",156],["T_WHITESPACE"," ",156],"(",["T_VARIABLE","$product",156],["T_WHITESPACE"," ",156],["T_BOOLEAN_OR","||",156],["T_WHITESPACE"," ",156],["T_VARIABLE","$category",156],")",["T_WHITESPACE"," ",156],"{",["T_WHITESPACE","\n                    ",156],["T_VARIABLE","$catalogUrlModel",157],["T_WHITESPACE"," ",157],"=",["T_WHITESPACE"," ",157],["T_STRING","Mage",157],["T_DOUBLE_COLON","::",157],["T_STRING","getSingleton",157],"(",["T_CONSTANT_ENCAPSED_STRING","'catalog\/url'",157],")",";",["T_WHITESPACE","\n                    ",157],["T_VARIABLE","$idPath",158],["T_WHITESPACE"," ",158],"=",["T_WHITESPACE"," ",158],["T_VARIABLE","$catalogUrlModel",158],["T_OBJECT_OPERATOR","->",158],["T_STRING","generatePath",158],"(",["T_CONSTANT_ENCAPSED_STRING","'id'",158],",",["T_WHITESPACE"," ",158],["T_VARIABLE","$product",158],",",["T_WHITESPACE"," ",158],["T_VARIABLE","$category",158],")",";",["T_WHITESPACE","\n\n                    ",158],["T_COMMENT","\/\/ if redirect specified try to find friendly URL\n",160],["T_WHITESPACE","                    ",161],["T_VARIABLE","$found",161],["T_WHITESPACE"," ",161],"=",["T_WHITESPACE"," ",161],["T_STRING","false",161],";",["T_WHITESPACE","\n                    ",161],["T_IF","if",162],["T_WHITESPACE"," ",162],"(",["T_STRING","in_array",162],"(",["T_VARIABLE","$model",162],["T_OBJECT_OPERATOR","->",162],["T_STRING","getOptions",162],"(",")",",",["T_WHITESPACE"," ",162],["T_ARRAY","array",162],"(",["T_CONSTANT_ENCAPSED_STRING","'R'",162],",",["T_WHITESPACE"," ",162],["T_CONSTANT_ENCAPSED_STRING","'RP'",162],")",")",")",["T_WHITESPACE"," ",162],"{",["T_WHITESPACE","\n                        ",162],["T_VARIABLE","$rewrite",163],["T_WHITESPACE"," ",163],"=",["T_WHITESPACE"," ",163],["T_STRING","Mage",163],["T_DOUBLE_COLON","::",163],["T_STRING","getResourceModel",163],"(",["T_CONSTANT_ENCAPSED_STRING","'catalog\/url'",163],")",["T_WHITESPACE","\n                            ",163],["T_OBJECT_OPERATOR","->",164],["T_STRING","getRewriteByIdPath",164],"(",["T_VARIABLE","$idPath",164],",",["T_WHITESPACE"," ",164],["T_VARIABLE","$model",164],["T_OBJECT_OPERATOR","->",164],["T_STRING","getStoreId",164],"(",")",")",";",["T_WHITESPACE","\n                        ",164],["T_IF","if",165],["T_WHITESPACE"," ",165],"(","!",["T_VARIABLE","$rewrite",165],")",["T_WHITESPACE"," ",165],"{",["T_WHITESPACE","\n                            ",165],["T_VARIABLE","$exceptionTxt",166],["T_WHITESPACE"," ",166],"=",["T_WHITESPACE"," ",166],["T_CONSTANT_ENCAPSED_STRING","'Chosen product does not associated with the chosen store or category.'",166],";",["T_WHITESPACE","\n                            ",166],["T_STRING","Mage",167],["T_DOUBLE_COLON","::",167],["T_STRING","throwException",167],"(",["T_VARIABLE","$exceptionTxt",167],")",";",["T_WHITESPACE","\n                        ",167],"}",["T_WHITESPACE","\n                        ",168],["T_IF","if",169],"(",["T_VARIABLE","$rewrite",169],["T_OBJECT_OPERATOR","->",169],["T_STRING","getId",169],"(",")",["T_WHITESPACE"," ",169],["T_BOOLEAN_AND","&&",169],["T_WHITESPACE"," ",169],["T_VARIABLE","$rewrite",169],["T_OBJECT_OPERATOR","->",169],["T_STRING","getId",169],"(",")",["T_WHITESPACE"," ",169],["T_IS_NOT_EQUAL","!=",169],["T_WHITESPACE"," ",169],["T_VARIABLE","$model",169],["T_OBJECT_OPERATOR","->",169],["T_STRING","getId",169],"(",")",")",["T_WHITESPACE"," ",169],"{",["T_WHITESPACE","\n                            ",169],["T_VARIABLE","$model",170],["T_OBJECT_OPERATOR","->",170],["T_STRING","setIdPath",170],"(",["T_VARIABLE","$idPath",170],")",";",["T_WHITESPACE","\n                            ",170],["T_VARIABLE","$model",171],["T_OBJECT_OPERATOR","->",171],["T_STRING","setTargetPath",171],"(",["T_VARIABLE","$rewrite",171],["T_OBJECT_OPERATOR","->",171],["T_STRING","getRequestPath",171],"(",")",")",";",["T_WHITESPACE","\n                            ",171],["T_VARIABLE","$found",172],["T_WHITESPACE"," ",172],"=",["T_WHITESPACE"," ",172],["T_STRING","true",172],";",["T_WHITESPACE","\n                        ",172],"}",["T_WHITESPACE","\n                    ",173],"}",["T_WHITESPACE","\n\n                    ",174],["T_IF","if",176],["T_WHITESPACE"," ",176],"(","!",["T_VARIABLE","$found",176],")",["T_WHITESPACE"," ",176],"{",["T_WHITESPACE","\n                        ",176],["T_VARIABLE","$model",177],["T_OBJECT_OPERATOR","->",177],["T_STRING","setIdPath",177],"(",["T_VARIABLE","$idPath",177],")",";",["T_WHITESPACE","\n                        ",177],["T_VARIABLE","$model",178],["T_OBJECT_OPERATOR","->",178],["T_STRING","setTargetPath",178],"(",["T_VARIABLE","$catalogUrlModel",178],["T_OBJECT_OPERATOR","->",178],["T_STRING","generatePath",178],"(",["T_CONSTANT_ENCAPSED_STRING","'target'",178],",",["T_WHITESPACE"," ",178],["T_VARIABLE","$product",178],",",["T_WHITESPACE"," ",178],["T_VARIABLE","$category",178],")",")",";",["T_WHITESPACE","\n                    ",178],"}",["T_WHITESPACE","\n                ",179],"}",["T_WHITESPACE","\n\n                ",180],["T_COMMENT","\/\/ save and redirect\n",182],["T_WHITESPACE","                ",183],["T_VARIABLE","$model",183],["T_OBJECT_OPERATOR","->",183],["T_STRING","save",183],"(",")",";",["T_WHITESPACE","\n                ",183],["T_VARIABLE","$session",184],["T_OBJECT_OPERATOR","->",184],["T_STRING","addSuccess",184],"(",["T_STRING","Mage",184],["T_DOUBLE_COLON","::",184],["T_STRING","helper",184],"(",["T_CONSTANT_ENCAPSED_STRING","'adminhtml'",184],")",["T_OBJECT_OPERATOR","->",184],["T_STRING","__",184],"(",["T_CONSTANT_ENCAPSED_STRING","'The URL Rewrite has been saved.'",184],")",")",";",["T_WHITESPACE","\n                ",184],["T_VARIABLE","$this",185],["T_OBJECT_OPERATOR","->",185],["T_STRING","_redirect",185],"(",["T_CONSTANT_ENCAPSED_STRING","'*\/*\/'",185],")",";",["T_WHITESPACE","\n                ",185],["T_RETURN","return",186],";",["T_WHITESPACE","\n            ",186],"}",["T_WHITESPACE"," ",187],["T_CATCH","catch",187],["T_WHITESPACE"," ",187],"(",["T_STRING","Mage_Core_Exception",187],["T_WHITESPACE"," ",187],["T_VARIABLE","$e",187],")",["T_WHITESPACE"," ",187],"{",["T_WHITESPACE","\n                ",187],["T_VARIABLE","$session",188],["T_OBJECT_OPERATOR","->",188],["T_STRING","addError",188],"(",["T_VARIABLE","$e",188],["T_OBJECT_OPERATOR","->",188],["T_STRING","getMessage",188],"(",")",")",["T_WHITESPACE","\n                    ",188],["T_OBJECT_OPERATOR","->",189],["T_STRING","setUrlrewriteData",189],"(",["T_VARIABLE","$data",189],")",";",["T_WHITESPACE","\n            ",189],"}",["T_WHITESPACE"," ",190],["T_CATCH","catch",190],["T_WHITESPACE"," ",190],"(",["T_STRING","Exception",190],["T_WHITESPACE"," ",190],["T_VARIABLE","$e",190],")",["T_WHITESPACE"," ",190],"{",["T_WHITESPACE","\n                ",190],["T_VARIABLE","$session",191],["T_OBJECT_OPERATOR","->",191],["T_STRING","addException",191],"(",["T_VARIABLE","$e",191],",",["T_WHITESPACE"," ",191],["T_STRING","Mage",191],["T_DOUBLE_COLON","::",191],["T_STRING","helper",191],"(",["T_CONSTANT_ENCAPSED_STRING","'adminhtml'",191],")",["T_OBJECT_OPERATOR","->",191],["T_STRING","__",191],"(",["T_CONSTANT_ENCAPSED_STRING","'An error occurred while saving URL Rewrite.'",191],")",")",["T_WHITESPACE","\n                    ",191],["T_OBJECT_OPERATOR","->",192],["T_STRING","setUrlrewriteData",192],"(",["T_VARIABLE","$data",192],")",";",["T_WHITESPACE","\n                ",192],["T_COMMENT","\/\/ return intentionally omitted\n",193],["T_WHITESPACE","            ",194],"}",["T_WHITESPACE","\n        ",194],"}",["T_WHITESPACE","\n        ",195],["T_VARIABLE","$this",196],["T_OBJECT_OPERATOR","->",196],["T_STRING","_redirectReferer",196],"(",")",";",["T_WHITESPACE","\n    ",196],"}",["T_WHITESPACE","\n\n    ",197],["T_DOC_COMMENT","\/**\n     * Urlrewrite delete action\n     *\n     *\/",199],["T_WHITESPACE","\n    ",202],["T_PUBLIC","public",203],["T_WHITESPACE"," ",203],["T_FUNCTION","function",203],["T_WHITESPACE"," ",203],["T_STRING","deleteAction",203],"(",")",["T_WHITESPACE","\n    ",203],"{",["T_WHITESPACE","\n        ",204],["T_VARIABLE","$this",205],["T_OBJECT_OPERATOR","->",205],["T_STRING","_initRegistry",205],"(",")",";",["T_WHITESPACE","\n\n        ",205],["T_IF","if",207],["T_WHITESPACE"," ",207],"(",["T_STRING","Mage",207],["T_DOUBLE_COLON","::",207],["T_STRING","registry",207],"(",["T_CONSTANT_ENCAPSED_STRING","'current_urlrewrite'",207],")",["T_OBJECT_OPERATOR","->",207],["T_STRING","getId",207],"(",")",")",["T_WHITESPACE"," ",207],"{",["T_WHITESPACE","\n            ",207],["T_TRY","try",208],["T_WHITESPACE"," ",208],"{",["T_WHITESPACE","\n                ",208],["T_STRING","Mage",209],["T_DOUBLE_COLON","::",209],["T_STRING","registry",209],"(",["T_CONSTANT_ENCAPSED_STRING","'current_urlrewrite'",209],")",["T_OBJECT_OPERATOR","->",209],["T_STRING","delete",209],"(",")",";",["T_WHITESPACE","\n                ",209],["T_STRING","Mage",210],["T_DOUBLE_COLON","::",210],["T_STRING","getSingleton",210],"(",["T_CONSTANT_ENCAPSED_STRING","'adminhtml\/session'",210],")",["T_OBJECT_OPERATOR","->",210],["T_STRING","addSuccess",210],"(",["T_WHITESPACE","\n                    ",210],["T_STRING","Mage",211],["T_DOUBLE_COLON","::",211],["T_STRING","helper",211],"(",["T_CONSTANT_ENCAPSED_STRING","'adminhtml'",211],")",["T_OBJECT_OPERATOR","->",211],["T_STRING","__",211],"(",["T_CONSTANT_ENCAPSED_STRING","'The URL Rewrite has been deleted.'",211],")",["T_WHITESPACE","\n                ",211],")",";",["T_WHITESPACE","\n            ",212],"}",["T_WHITESPACE"," ",213],["T_CATCH","catch",213],["T_WHITESPACE"," ",213],"(",["T_STRING","Exception",213],["T_WHITESPACE"," ",213],["T_VARIABLE","$e",213],")",["T_WHITESPACE"," ",213],"{",["T_WHITESPACE","\n                ",213],["T_STRING","Mage",214],["T_DOUBLE_COLON","::",214],["T_STRING","getSingleton",214],"(",["T_CONSTANT_ENCAPSED_STRING","'adminhtml\/session'",214],")",["T_WHITESPACE","\n                    ",214],["T_OBJECT_OPERATOR","->",215],["T_STRING","addException",215],"(",["T_VARIABLE","$e",215],",",["T_WHITESPACE"," ",215],["T_STRING","Mage",215],["T_DOUBLE_COLON","::",215],["T_STRING","helper",215],"(",["T_CONSTANT_ENCAPSED_STRING","'adminhtml'",215],")",["T_OBJECT_OPERATOR","->",215],["T_STRING","__",215],"(",["T_CONSTANT_ENCAPSED_STRING","'An error occurred while deleting URL Rewrite.'",215],")",")",";",["T_WHITESPACE","\n                ",215],["T_VARIABLE","$this",216],["T_OBJECT_OPERATOR","->",216],["T_STRING","_redirect",216],"(",["T_CONSTANT_ENCAPSED_STRING","'*\/*\/edit\/'",216],",",["T_WHITESPACE"," ",216],["T_ARRAY","array",216],"(",["T_CONSTANT_ENCAPSED_STRING","'id'",216],["T_DOUBLE_ARROW","=>",216],["T_STRING","Mage",216],["T_DOUBLE_COLON","::",216],["T_STRING","registry",216],"(",["T_CONSTANT_ENCAPSED_STRING","'current_urlrewrite'",216],")",["T_OBJECT_OPERATOR","->",216],["T_STRING","getId",216],"(",")",")",")",";",["T_WHITESPACE","\n                ",216],["T_RETURN","return",217],";",["T_WHITESPACE","\n            ",217],"}",["T_WHITESPACE","\n        ",218],"}",["T_WHITESPACE","\n        ",219],["T_VARIABLE","$this",220],["T_OBJECT_OPERATOR","->",220],["T_STRING","_redirect",220],"(",["T_CONSTANT_ENCAPSED_STRING","'*\/*\/'",220],")",";",["T_WHITESPACE","\n    ",220],"}",["T_WHITESPACE","\n\n    ",221],["T_DOC_COMMENT","\/**\n     * Check whether this contoller is allowed in admin permissions\n     *\n     * @return bool\n     *\/",223],["T_WHITESPACE","\n    ",227],["T_PROTECTED","protected",228],["T_WHITESPACE"," ",228],["T_FUNCTION","function",228],["T_WHITESPACE"," ",228],["T_STRING","_isAllowed",228],"(",")",["T_WHITESPACE","\n    ",228],"{",["T_WHITESPACE","\n        ",229],["T_RETURN","return",230],["T_WHITESPACE"," ",230],["T_STRING","Mage",230],["T_DOUBLE_COLON","::",230],["T_STRING","getSingleton",230],"(",["T_CONSTANT_ENCAPSED_STRING","'admin\/session'",230],")",["T_OBJECT_OPERATOR","->",230],["T_STRING","isAllowed",230],"(",["T_CONSTANT_ENCAPSED_STRING","'catalog\/urlrewrite'",230],")",";",["T_WHITESPACE","\n    ",230],"}",["T_WHITESPACE","\n",231],"}",["T_WHITESPACE","\n",232]]
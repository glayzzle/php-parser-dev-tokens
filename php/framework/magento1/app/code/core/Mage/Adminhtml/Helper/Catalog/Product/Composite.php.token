[["T_OPEN_TAG","<?php\n",1],["T_DOC_COMMENT","\/**\n * Magento\n *\n * NOTICE OF LICENSE\n *\n * This source file is subject to the Open Software License (OSL 3.0)\n * that is bundled with this package in the file LICENSE.txt.\n * It is also available through the world-wide-web at this URL:\n * http:\/\/opensource.org\/licenses\/osl-3.0.php\n * If you did not receive a copy of the license and are unable to\n * obtain it through the world-wide-web, please send an email\n * to license@magento.com so we can send you a copy immediately.\n *\n * DISCLAIMER\n *\n * Do not edit or add to this file if you wish to upgrade Magento to newer\n * versions in the future. If you wish to customize Magento for your\n * needs please refer to http:\/\/www.magento.com for more information.\n *\n * @category    Mage\n * @package     Mage_Adminhtml\n * @copyright  Copyright (c) 2006-2016 X.commerce, Inc. and affiliates (http:\/\/www.magento.com)\n * @license    http:\/\/opensource.org\/licenses\/osl-3.0.php  Open Software License (OSL 3.0)\n *\/",2],["T_WHITESPACE","\n\n",25],["T_DOC_COMMENT","\/**\n * Adminhtml catalog product composite helper\n *\n * @category   Mage\n * @package    Mage_Adminhtml\n * @author     Magento Core Team <core@magentocommerce.com>\n *\/",27],["T_WHITESPACE","\n",33],["T_CLASS","class",34],["T_WHITESPACE"," ",34],["T_STRING","Mage_Adminhtml_Helper_Catalog_Product_Composite",34],["T_WHITESPACE"," ",34],["T_EXTENDS","extends",34],["T_WHITESPACE"," ",34],["T_STRING","Mage_Core_Helper_Abstract",34],["T_WHITESPACE","\n",34],"{",["T_WHITESPACE","\n     ",35],["T_DOC_COMMENT","\/**\n     * Init layout of product configuration update result\n     *\n     * @param Mage_Adminhtml_Controller_Action $controller\n     * @return Mage_Adminhtml_Helper_Catalog_Product_Composite\n     *\/",36],["T_WHITESPACE","\n    ",41],["T_PROTECTED","protected",42],["T_WHITESPACE"," ",42],["T_FUNCTION","function",42],["T_WHITESPACE"," ",42],["T_STRING","_initUpdateResultLayout",42],"(",["T_VARIABLE","$controller",42],")",["T_WHITESPACE","\n    ",42],"{",["T_WHITESPACE","\n        ",43],["T_VARIABLE","$controller",44],["T_OBJECT_OPERATOR","->",44],["T_STRING","getLayout",44],"(",")",["T_OBJECT_OPERATOR","->",44],["T_STRING","getUpdate",44],"(",")",["T_WHITESPACE","\n            ",44],["T_OBJECT_OPERATOR","->",45],["T_STRING","addHandle",45],"(",["T_CONSTANT_ENCAPSED_STRING","'ADMINHTML_CATALOG_PRODUCT_COMPOSITE_UPDATE_RESULT'",45],")",";",["T_WHITESPACE","\n        ",45],["T_VARIABLE","$controller",46],["T_OBJECT_OPERATOR","->",46],["T_STRING","loadLayoutUpdates",46],"(",")",["T_OBJECT_OPERATOR","->",46],["T_STRING","generateLayoutXml",46],"(",")",["T_OBJECT_OPERATOR","->",46],["T_STRING","generateLayoutBlocks",46],"(",")",";",["T_WHITESPACE","\n        ",46],["T_RETURN","return",47],["T_WHITESPACE"," ",47],["T_VARIABLE","$this",47],";",["T_WHITESPACE","\n    ",47],"}",["T_WHITESPACE","\n\n    ",48],["T_DOC_COMMENT","\/**\n     * Prepares and render result of composite product configuration update for a case\n     * when single configuration submitted\n     *\n     * @param Mage_Adminhtml_Controller_Action $controller\n     * @param Varien_Object $updateResult\n     * @return Mage_Adminhtml_Helper_Catalog_Product_Composite\n     *\/",50],["T_WHITESPACE","\n    ",57],["T_PUBLIC","public",58],["T_WHITESPACE"," ",58],["T_FUNCTION","function",58],["T_WHITESPACE"," ",58],["T_STRING","renderUpdateResult",58],"(",["T_VARIABLE","$controller",58],",",["T_WHITESPACE"," ",58],["T_STRING","Varien_Object",58],["T_WHITESPACE"," ",58],["T_VARIABLE","$updateResult",58],")",["T_WHITESPACE","\n    ",58],"{",["T_WHITESPACE","\n        ",59],["T_STRING","Mage",60],["T_DOUBLE_COLON","::",60],["T_STRING","register",60],"(",["T_CONSTANT_ENCAPSED_STRING","'composite_update_result'",60],",",["T_WHITESPACE"," ",60],["T_VARIABLE","$updateResult",60],")",";",["T_WHITESPACE","\n\n        ",60],["T_VARIABLE","$this",62],["T_OBJECT_OPERATOR","->",62],["T_STRING","_initUpdateResultLayout",62],"(",["T_VARIABLE","$controller",62],")",";",["T_WHITESPACE","\n        ",62],["T_VARIABLE","$controller",63],["T_OBJECT_OPERATOR","->",63],["T_STRING","renderLayout",63],"(",")",";",["T_WHITESPACE","\n    ",63],"}",["T_WHITESPACE","\n\n     ",64],["T_DOC_COMMENT","\/**\n     * Init composite product configuration layout\n     *\n     * $isOk - true or false, whether action was completed nicely or with some error\n     * If $isOk is FALSE (some error during configuration), so $productType must be null\n     *\n     * @param Mage_Adminhtml_Controller_Action $controller\n     * @param bool $isOk\n     * @param string $productType\n     * @return Mage_Adminhtml_Helper_Catalog_Product_Composite\n     *\/",66],["T_WHITESPACE","\n    ",76],["T_PROTECTED","protected",77],["T_WHITESPACE"," ",77],["T_FUNCTION","function",77],["T_WHITESPACE"," ",77],["T_STRING","_initConfigureResultLayout",77],"(",["T_VARIABLE","$controller",77],",",["T_WHITESPACE"," ",77],["T_VARIABLE","$isOk",77],",",["T_WHITESPACE"," ",77],["T_VARIABLE","$productType",77],")",["T_WHITESPACE","\n    ",77],"{",["T_WHITESPACE","\n        ",78],["T_VARIABLE","$update",79],["T_WHITESPACE"," ",79],"=",["T_WHITESPACE"," ",79],["T_VARIABLE","$controller",79],["T_OBJECT_OPERATOR","->",79],["T_STRING","getLayout",79],"(",")",["T_OBJECT_OPERATOR","->",79],["T_STRING","getUpdate",79],"(",")",";",["T_WHITESPACE","\n        ",79],["T_IF","if",80],["T_WHITESPACE"," ",80],"(",["T_VARIABLE","$isOk",80],")",["T_WHITESPACE"," ",80],"{",["T_WHITESPACE","\n            ",80],["T_VARIABLE","$update",81],["T_OBJECT_OPERATOR","->",81],["T_STRING","addHandle",81],"(",["T_CONSTANT_ENCAPSED_STRING","'ADMINHTML_CATALOG_PRODUCT_COMPOSITE_CONFIGURE'",81],")",["T_WHITESPACE","\n                ",81],["T_OBJECT_OPERATOR","->",82],["T_STRING","addHandle",82],"(",["T_CONSTANT_ENCAPSED_STRING","'PRODUCT_TYPE_'",82],["T_WHITESPACE"," ",82],".",["T_WHITESPACE"," ",82],["T_VARIABLE","$productType",82],")",";",["T_WHITESPACE","\n        ",82],"}",["T_WHITESPACE"," ",83],["T_ELSE","else",83],["T_WHITESPACE"," ",83],"{",["T_WHITESPACE","\n            ",83],["T_VARIABLE","$update",84],["T_OBJECT_OPERATOR","->",84],["T_STRING","addHandle",84],"(",["T_CONSTANT_ENCAPSED_STRING","'ADMINHTML_CATALOG_PRODUCT_COMPOSITE_CONFIGURE_ERROR'",84],")",";",["T_WHITESPACE","\n        ",84],"}",["T_WHITESPACE","\n        ",85],["T_VARIABLE","$controller",86],["T_OBJECT_OPERATOR","->",86],["T_STRING","loadLayoutUpdates",86],"(",")",["T_OBJECT_OPERATOR","->",86],["T_STRING","generateLayoutXml",86],"(",")",["T_OBJECT_OPERATOR","->",86],["T_STRING","generateLayoutBlocks",86],"(",")",";",["T_WHITESPACE","\n        ",86],["T_RETURN","return",87],["T_WHITESPACE"," ",87],["T_VARIABLE","$this",87],";",["T_WHITESPACE","\n    ",87],"}",["T_WHITESPACE","\n\n    ",88],["T_DOC_COMMENT","\/**\n     * Prepares and render result of composite product configuration request\n     *\n     * $configureResult holds either:\n     *  - 'ok' = true, and 'product_id', 'buy_request', 'current_store_id', 'current_customer' or 'current_customer_id'\n     *  - 'error' = true, and 'message' to show\n     *\n     * @param Mage_Adminhtml_Controller_Action $controller\n     * @param Varien_Object $configureResult\n     * @return Mage_Adminhtml_Helper_Catalog_Product_Composite\n     *\/",90],["T_WHITESPACE","\n    ",100],["T_PUBLIC","public",101],["T_WHITESPACE"," ",101],["T_FUNCTION","function",101],["T_WHITESPACE"," ",101],["T_STRING","renderConfigureResult",101],"(",["T_VARIABLE","$controller",101],",",["T_WHITESPACE"," ",101],["T_STRING","Varien_Object",101],["T_WHITESPACE"," ",101],["T_VARIABLE","$configureResult",101],")",["T_WHITESPACE","\n    ",101],"{",["T_WHITESPACE","\n        ",102],["T_TRY","try",103],["T_WHITESPACE"," ",103],"{",["T_WHITESPACE","\n            ",103],["T_IF","if",104],["T_WHITESPACE"," ",104],"(","!",["T_VARIABLE","$configureResult",104],["T_OBJECT_OPERATOR","->",104],["T_STRING","getOk",104],"(",")",")",["T_WHITESPACE"," ",104],"{",["T_WHITESPACE","\n                ",104],["T_STRING","Mage",105],["T_DOUBLE_COLON","::",105],["T_STRING","throwException",105],"(",["T_VARIABLE","$configureResult",105],["T_OBJECT_OPERATOR","->",105],["T_STRING","getMessage",105],"(",")",")",";",["T_WHITESPACE","\n            ",105],"}",";",["T_WHITESPACE","\n\n            ",106],["T_VARIABLE","$currentStoreId",108],["T_WHITESPACE"," ",108],"=",["T_WHITESPACE"," ",108],["T_INT_CAST","(int)",108],["T_WHITESPACE"," ",108],["T_VARIABLE","$configureResult",108],["T_OBJECT_OPERATOR","->",108],["T_STRING","getCurrentStoreId",108],"(",")",";",["T_WHITESPACE","\n            ",108],["T_IF","if",109],["T_WHITESPACE"," ",109],"(","!",["T_VARIABLE","$currentStoreId",109],")",["T_WHITESPACE"," ",109],"{",["T_WHITESPACE","\n                ",109],["T_VARIABLE","$currentStoreId",110],["T_WHITESPACE"," ",110],"=",["T_WHITESPACE"," ",110],["T_STRING","Mage",110],["T_DOUBLE_COLON","::",110],["T_STRING","app",110],"(",")",["T_OBJECT_OPERATOR","->",110],["T_STRING","getStore",110],"(",")",["T_OBJECT_OPERATOR","->",110],["T_STRING","getId",110],"(",")",";",["T_WHITESPACE","\n            ",110],"}",["T_WHITESPACE","\n\n            ",111],["T_VARIABLE","$product",113],["T_WHITESPACE"," ",113],"=",["T_WHITESPACE"," ",113],["T_STRING","Mage",113],["T_DOUBLE_COLON","::",113],["T_STRING","getModel",113],"(",["T_CONSTANT_ENCAPSED_STRING","'catalog\/product'",113],")",["T_WHITESPACE","\n                ",113],["T_OBJECT_OPERATOR","->",114],["T_STRING","setStoreId",114],"(",["T_VARIABLE","$currentStoreId",114],")",["T_WHITESPACE","\n                ",114],["T_OBJECT_OPERATOR","->",115],["T_STRING","load",115],"(",["T_VARIABLE","$configureResult",115],["T_OBJECT_OPERATOR","->",115],["T_STRING","getProductId",115],"(",")",")",";",["T_WHITESPACE","\n            ",115],["T_IF","if",116],["T_WHITESPACE"," ",116],"(","!",["T_VARIABLE","$product",116],["T_OBJECT_OPERATOR","->",116],["T_STRING","getId",116],"(",")",")",["T_WHITESPACE"," ",116],"{",["T_WHITESPACE","\n                ",116],["T_STRING","Mage",117],["T_DOUBLE_COLON","::",117],["T_STRING","throwException",117],"(",["T_VARIABLE","$this",117],["T_OBJECT_OPERATOR","->",117],["T_STRING","__",117],"(",["T_CONSTANT_ENCAPSED_STRING","'Product is not loaded.'",117],")",")",";",["T_WHITESPACE","\n            ",117],"}",["T_WHITESPACE","\n            ",118],["T_STRING","Mage",119],["T_DOUBLE_COLON","::",119],["T_STRING","register",119],"(",["T_CONSTANT_ENCAPSED_STRING","'current_product'",119],",",["T_WHITESPACE"," ",119],["T_VARIABLE","$product",119],")",";",["T_WHITESPACE","\n            ",119],["T_STRING","Mage",120],["T_DOUBLE_COLON","::",120],["T_STRING","register",120],"(",["T_CONSTANT_ENCAPSED_STRING","'product'",120],",",["T_WHITESPACE"," ",120],["T_VARIABLE","$product",120],")",";",["T_WHITESPACE","\n\n            ",120],["T_COMMENT","\/\/ Register customer we're working with\n",122],["T_WHITESPACE","            ",123],["T_VARIABLE","$currentCustomer",123],["T_WHITESPACE"," ",123],"=",["T_WHITESPACE"," ",123],["T_VARIABLE","$configureResult",123],["T_OBJECT_OPERATOR","->",123],["T_STRING","getCurrentCustomer",123],"(",")",";",["T_WHITESPACE","\n            ",123],["T_IF","if",124],["T_WHITESPACE"," ",124],"(","!",["T_VARIABLE","$currentCustomer",124],")",["T_WHITESPACE"," ",124],"{",["T_WHITESPACE","\n                ",124],["T_VARIABLE","$currentCustomerId",125],["T_WHITESPACE"," ",125],"=",["T_WHITESPACE"," ",125],["T_INT_CAST","(int)",125],["T_WHITESPACE"," ",125],["T_VARIABLE","$configureResult",125],["T_OBJECT_OPERATOR","->",125],["T_STRING","getCurrentCustomerId",125],"(",")",";",["T_WHITESPACE","\n                ",125],["T_IF","if",126],["T_WHITESPACE"," ",126],"(",["T_VARIABLE","$currentCustomerId",126],")",["T_WHITESPACE"," ",126],"{",["T_WHITESPACE","\n                    ",126],["T_VARIABLE","$currentCustomer",127],["T_WHITESPACE"," ",127],"=",["T_WHITESPACE"," ",127],["T_STRING","Mage",127],["T_DOUBLE_COLON","::",127],["T_STRING","getModel",127],"(",["T_CONSTANT_ENCAPSED_STRING","'customer\/customer'",127],")",["T_WHITESPACE","\n                        ",127],["T_OBJECT_OPERATOR","->",128],["T_STRING","load",128],"(",["T_VARIABLE","$currentCustomerId",128],")",";",["T_WHITESPACE","\n                ",128],"}",["T_WHITESPACE","\n            ",129],"}",["T_WHITESPACE","\n            ",130],["T_IF","if",131],["T_WHITESPACE"," ",131],"(",["T_VARIABLE","$currentCustomer",131],")",["T_WHITESPACE"," ",131],"{",["T_WHITESPACE","\n                ",131],["T_STRING","Mage",132],["T_DOUBLE_COLON","::",132],["T_STRING","register",132],"(",["T_CONSTANT_ENCAPSED_STRING","'current_customer'",132],",",["T_WHITESPACE"," ",132],["T_VARIABLE","$currentCustomer",132],")",";",["T_WHITESPACE","\n            ",132],"}",["T_WHITESPACE","\n\n            ",133],["T_COMMENT","\/\/ Prepare buy request values\n",135],["T_WHITESPACE","            ",136],["T_VARIABLE","$buyRequest",136],["T_WHITESPACE"," ",136],"=",["T_WHITESPACE"," ",136],["T_VARIABLE","$configureResult",136],["T_OBJECT_OPERATOR","->",136],["T_STRING","getBuyRequest",136],"(",")",";",["T_WHITESPACE","\n            ",136],["T_IF","if",137],["T_WHITESPACE"," ",137],"(",["T_VARIABLE","$buyRequest",137],")",["T_WHITESPACE"," ",137],"{",["T_WHITESPACE","\n                ",137],["T_STRING","Mage",138],["T_DOUBLE_COLON","::",138],["T_STRING","helper",138],"(",["T_CONSTANT_ENCAPSED_STRING","'catalog\/product'",138],")",["T_OBJECT_OPERATOR","->",138],["T_STRING","prepareProductOptions",138],"(",["T_VARIABLE","$product",138],",",["T_WHITESPACE"," ",138],["T_VARIABLE","$buyRequest",138],")",";",["T_WHITESPACE","\n            ",138],"}",["T_WHITESPACE","\n\n            ",139],["T_VARIABLE","$isOk",141],["T_WHITESPACE"," ",141],"=",["T_WHITESPACE"," ",141],["T_STRING","true",141],";",["T_WHITESPACE","\n            ",141],["T_VARIABLE","$productType",142],["T_WHITESPACE"," ",142],"=",["T_WHITESPACE"," ",142],["T_VARIABLE","$product",142],["T_OBJECT_OPERATOR","->",142],["T_STRING","getTypeId",142],"(",")",";",["T_WHITESPACE","\n        ",142],"}",["T_WHITESPACE"," ",143],["T_CATCH","catch",143],["T_WHITESPACE"," ",143],"(",["T_STRING","Exception",143],["T_WHITESPACE"," ",143],["T_VARIABLE","$e",143],")",["T_WHITESPACE"," ",143],"{",["T_WHITESPACE","\n            ",143],["T_VARIABLE","$isOk",144],["T_WHITESPACE"," ",144],"=",["T_WHITESPACE"," ",144],["T_STRING","false",144],";",["T_WHITESPACE","\n            ",144],["T_VARIABLE","$productType",145],["T_WHITESPACE"," ",145],"=",["T_WHITESPACE"," ",145],["T_STRING","null",145],";",["T_WHITESPACE","\n            ",145],["T_STRING","Mage",146],["T_DOUBLE_COLON","::",146],["T_STRING","register",146],"(",["T_CONSTANT_ENCAPSED_STRING","'composite_configure_result_error_message'",146],",",["T_WHITESPACE"," ",146],["T_VARIABLE","$e",146],["T_OBJECT_OPERATOR","->",146],["T_STRING","getMessage",146],"(",")",")",";",["T_WHITESPACE","\n        ",146],"}",["T_WHITESPACE","\n\n        ",147],["T_VARIABLE","$this",149],["T_OBJECT_OPERATOR","->",149],["T_STRING","_initConfigureResultLayout",149],"(",["T_VARIABLE","$controller",149],",",["T_WHITESPACE"," ",149],["T_VARIABLE","$isOk",149],",",["T_WHITESPACE"," ",149],["T_VARIABLE","$productType",149],")",";",["T_WHITESPACE","\n        ",149],["T_VARIABLE","$controller",150],["T_OBJECT_OPERATOR","->",150],["T_STRING","renderLayout",150],"(",")",";",["T_WHITESPACE","\n    ",150],"}",["T_WHITESPACE","\n",151],"}",["T_WHITESPACE","\n",152]]
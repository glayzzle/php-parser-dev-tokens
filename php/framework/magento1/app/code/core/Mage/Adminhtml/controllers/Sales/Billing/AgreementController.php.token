[["T_OPEN_TAG","<?php\n",1],["T_DOC_COMMENT","\/**\n * Magento\n *\n * NOTICE OF LICENSE\n *\n * This source file is subject to the Open Software License (OSL 3.0)\n * that is bundled with this package in the file LICENSE.txt.\n * It is also available through the world-wide-web at this URL:\n * http:\/\/opensource.org\/licenses\/osl-3.0.php\n * If you did not receive a copy of the license and are unable to\n * obtain it through the world-wide-web, please send an email\n * to license@magento.com so we can send you a copy immediately.\n *\n * DISCLAIMER\n *\n * Do not edit or add to this file if you wish to upgrade Magento to newer\n * versions in the future. If you wish to customize Magento for your\n * needs please refer to http:\/\/www.magento.com for more information.\n *\n * @category    Mage\n * @package     Mage_Adminhtml\n * @copyright  Copyright (c) 2006-2016 X.commerce, Inc. and affiliates (http:\/\/www.magento.com)\n * @license    http:\/\/opensource.org\/licenses\/osl-3.0.php  Open Software License (OSL 3.0)\n *\/",2],["T_WHITESPACE","\n\n",25],["T_DOC_COMMENT","\/**\n * Adminhtml billing agreement controller\n *\n * @author Magento Core Team <core@magentocommerce.com>\n *\/",27],["T_WHITESPACE","\n",31],["T_CLASS","class",32],["T_WHITESPACE"," ",32],["T_STRING","Mage_Adminhtml_Sales_Billing_AgreementController",32],["T_WHITESPACE"," ",32],["T_EXTENDS","extends",32],["T_WHITESPACE"," ",32],["T_STRING","Mage_Adminhtml_Controller_Action",32],["T_WHITESPACE","\n",32],"{",["T_WHITESPACE","\n    ",33],["T_DOC_COMMENT","\/**\n     * Billing agreements\n     *\n     *\/",34],["T_WHITESPACE","\n    ",37],["T_PUBLIC","public",38],["T_WHITESPACE"," ",38],["T_FUNCTION","function",38],["T_WHITESPACE"," ",38],["T_STRING","indexAction",38],"(",")",["T_WHITESPACE","\n    ",38],"{",["T_WHITESPACE","\n        ",39],["T_VARIABLE","$this",40],["T_OBJECT_OPERATOR","->",40],["T_STRING","_title",40],"(",["T_VARIABLE","$this",40],["T_OBJECT_OPERATOR","->",40],["T_STRING","__",40],"(",["T_CONSTANT_ENCAPSED_STRING","'Sales'",40],")",")",["T_WHITESPACE","\n            ",40],["T_OBJECT_OPERATOR","->",41],["T_STRING","_title",41],"(",["T_VARIABLE","$this",41],["T_OBJECT_OPERATOR","->",41],["T_STRING","__",41],"(",["T_CONSTANT_ENCAPSED_STRING","'Billing Agreements'",41],")",")",";",["T_WHITESPACE","\n\n        ",41],["T_VARIABLE","$this",43],["T_OBJECT_OPERATOR","->",43],["T_STRING","loadLayout",43],"(",")",["T_WHITESPACE","\n            ",43],["T_OBJECT_OPERATOR","->",44],["T_STRING","_setActiveMenu",44],"(",["T_CONSTANT_ENCAPSED_STRING","'sales\/billing_agreement'",44],")",["T_WHITESPACE","\n            ",44],["T_OBJECT_OPERATOR","->",45],["T_STRING","renderLayout",45],"(",")",";",["T_WHITESPACE","\n    ",45],"}",["T_WHITESPACE","\n\n    ",46],["T_DOC_COMMENT","\/**\n     * Ajax action for billing agreements\n     *\n     *\/",48],["T_WHITESPACE","\n    ",51],["T_PUBLIC","public",52],["T_WHITESPACE"," ",52],["T_FUNCTION","function",52],["T_WHITESPACE"," ",52],["T_STRING","gridAction",52],"(",")",["T_WHITESPACE","\n    ",52],"{",["T_WHITESPACE","\n        ",53],["T_VARIABLE","$this",54],["T_OBJECT_OPERATOR","->",54],["T_STRING","loadLayout",54],"(",["T_STRING","false",54],")",["T_WHITESPACE","\n            ",54],["T_OBJECT_OPERATOR","->",55],["T_STRING","renderLayout",55],"(",")",";",["T_WHITESPACE","\n    ",55],"}",["T_WHITESPACE","\n\n    ",56],["T_DOC_COMMENT","\/**\n     * View billing agreement action\n     *\n     *\/",58],["T_WHITESPACE","\n    ",61],["T_PUBLIC","public",62],["T_WHITESPACE"," ",62],["T_FUNCTION","function",62],["T_WHITESPACE"," ",62],["T_STRING","viewAction",62],"(",")",["T_WHITESPACE","\n    ",62],"{",["T_WHITESPACE","\n        ",63],["T_VARIABLE","$agreementModel",64],["T_WHITESPACE"," ",64],"=",["T_WHITESPACE"," ",64],["T_VARIABLE","$this",64],["T_OBJECT_OPERATOR","->",64],["T_STRING","_initBillingAgreement",64],"(",")",";",["T_WHITESPACE","\n\n        ",64],["T_IF","if",66],["T_WHITESPACE"," ",66],"(",["T_VARIABLE","$agreementModel",66],")",["T_WHITESPACE"," ",66],"{",["T_WHITESPACE","\n            ",66],["T_VARIABLE","$this",67],["T_OBJECT_OPERATOR","->",67],["T_STRING","_title",67],"(",["T_VARIABLE","$this",67],["T_OBJECT_OPERATOR","->",67],["T_STRING","__",67],"(",["T_CONSTANT_ENCAPSED_STRING","'Sales'",67],")",")",["T_WHITESPACE","\n                ",67],["T_OBJECT_OPERATOR","->",68],["T_STRING","_title",68],"(",["T_VARIABLE","$this",68],["T_OBJECT_OPERATOR","->",68],["T_STRING","__",68],"(",["T_CONSTANT_ENCAPSED_STRING","'Billing Agreements'",68],")",")",["T_WHITESPACE","\n                ",68],["T_OBJECT_OPERATOR","->",69],["T_STRING","_title",69],"(",["T_STRING","sprintf",69],"(",["T_CONSTANT_ENCAPSED_STRING","\"#%s\"",69],",",["T_WHITESPACE"," ",69],["T_VARIABLE","$agreementModel",69],["T_OBJECT_OPERATOR","->",69],["T_STRING","getReferenceId",69],"(",")",")",")",";",["T_WHITESPACE","\n\n            ",69],["T_VARIABLE","$this",71],["T_OBJECT_OPERATOR","->",71],["T_STRING","loadLayout",71],"(",")",["T_WHITESPACE","\n                ",71],["T_OBJECT_OPERATOR","->",72],["T_STRING","_setActiveMenu",72],"(",["T_CONSTANT_ENCAPSED_STRING","'sales\/billing_agreement'",72],")",["T_WHITESPACE","\n                ",72],["T_OBJECT_OPERATOR","->",73],["T_STRING","renderLayout",73],"(",")",";",["T_WHITESPACE","\n            ",73],["T_RETURN","return",74],";",["T_WHITESPACE","\n        ",74],"}",["T_WHITESPACE","\n\n        ",75],["T_VARIABLE","$this",77],["T_OBJECT_OPERATOR","->",77],["T_STRING","_redirect",77],"(",["T_CONSTANT_ENCAPSED_STRING","'*\/*\/'",77],")",";",["T_WHITESPACE","\n        ",77],["T_RETURN","return",78],";",["T_WHITESPACE","\n    ",78],"}",["T_WHITESPACE","\n\n    ",79],["T_DOC_COMMENT","\/**\n     * Related orders ajax action\n     *\n     *\/",81],["T_WHITESPACE","\n    ",84],["T_PUBLIC","public",85],["T_WHITESPACE"," ",85],["T_FUNCTION","function",85],["T_WHITESPACE"," ",85],["T_STRING","ordersGridAction",85],"(",")",["T_WHITESPACE","\n    ",85],"{",["T_WHITESPACE","\n        ",86],["T_VARIABLE","$this",87],["T_OBJECT_OPERATOR","->",87],["T_STRING","_initBillingAgreement",87],"(",")",";",["T_WHITESPACE","\n        ",87],["T_VARIABLE","$this",88],["T_OBJECT_OPERATOR","->",88],["T_STRING","loadLayout",88],"(",["T_STRING","false",88],")",["T_WHITESPACE","\n            ",88],["T_OBJECT_OPERATOR","->",89],["T_STRING","renderLayout",89],"(",")",";",["T_WHITESPACE","\n    ",89],"}",["T_WHITESPACE","\n\n    ",90],["T_DOC_COMMENT","\/**\n     * Cutomer billing agreements ajax action\n     *\n     *\/",92],["T_WHITESPACE","\n    ",95],["T_PUBLIC","public",96],["T_WHITESPACE"," ",96],["T_FUNCTION","function",96],["T_WHITESPACE"," ",96],["T_STRING","customerGridAction",96],"(",")",["T_WHITESPACE","\n    ",96],"{",["T_WHITESPACE","\n        ",97],["T_VARIABLE","$this",98],["T_OBJECT_OPERATOR","->",98],["T_STRING","_initCustomer",98],"(",")",";",["T_WHITESPACE","\n        ",98],["T_VARIABLE","$this",99],["T_OBJECT_OPERATOR","->",99],["T_STRING","loadLayout",99],"(",["T_STRING","false",99],")",["T_WHITESPACE","\n            ",99],["T_OBJECT_OPERATOR","->",100],["T_STRING","renderLayout",100],"(",")",";",["T_WHITESPACE","\n    ",100],"}",["T_WHITESPACE","\n\n    ",101],["T_DOC_COMMENT","\/**\n     * Cancel billing agreement action\n     *\n     *\/",103],["T_WHITESPACE","\n    ",106],["T_PUBLIC","public",107],["T_WHITESPACE"," ",107],["T_FUNCTION","function",107],["T_WHITESPACE"," ",107],["T_STRING","cancelAction",107],"(",")",["T_WHITESPACE","\n    ",107],"{",["T_WHITESPACE","\n        ",108],["T_VARIABLE","$agreementModel",109],["T_WHITESPACE"," ",109],"=",["T_WHITESPACE"," ",109],["T_VARIABLE","$this",109],["T_OBJECT_OPERATOR","->",109],["T_STRING","_initBillingAgreement",109],"(",")",";",["T_WHITESPACE","\n\n        ",109],["T_IF","if",111],["T_WHITESPACE"," ",111],"(",["T_VARIABLE","$agreementModel",111],["T_WHITESPACE"," ",111],["T_BOOLEAN_AND","&&",111],["T_WHITESPACE"," ",111],["T_VARIABLE","$agreementModel",111],["T_OBJECT_OPERATOR","->",111],["T_STRING","canCancel",111],"(",")",")",["T_WHITESPACE"," ",111],"{",["T_WHITESPACE","\n            ",111],["T_TRY","try",112],["T_WHITESPACE"," ",112],"{",["T_WHITESPACE","\n                ",112],["T_VARIABLE","$agreementModel",113],["T_OBJECT_OPERATOR","->",113],["T_STRING","cancel",113],"(",")",";",["T_WHITESPACE","\n                ",113],["T_VARIABLE","$this",114],["T_OBJECT_OPERATOR","->",114],["T_STRING","_getSession",114],"(",")",["T_OBJECT_OPERATOR","->",114],["T_STRING","addSuccess",114],"(",["T_VARIABLE","$this",114],["T_OBJECT_OPERATOR","->",114],["T_STRING","__",114],"(",["T_CONSTANT_ENCAPSED_STRING","'The billing agreement has been canceled.'",114],")",")",";",["T_WHITESPACE","\n                ",114],["T_VARIABLE","$this",115],["T_OBJECT_OPERATOR","->",115],["T_STRING","_redirect",115],"(",["T_CONSTANT_ENCAPSED_STRING","'*\/*\/view'",115],",",["T_WHITESPACE"," ",115],["T_ARRAY","array",115],"(",["T_CONSTANT_ENCAPSED_STRING","'_current'",115],["T_WHITESPACE"," ",115],["T_DOUBLE_ARROW","=>",115],["T_WHITESPACE"," ",115],["T_STRING","true",115],")",")",";",["T_WHITESPACE","\n                ",115],["T_RETURN","return",116],";",["T_WHITESPACE","\n            ",116],"}",["T_WHITESPACE"," ",117],["T_CATCH","catch",117],["T_WHITESPACE"," ",117],"(",["T_STRING","Mage_Core_Exception",117],["T_WHITESPACE"," ",117],["T_VARIABLE","$e",117],")",["T_WHITESPACE"," ",117],"{",["T_WHITESPACE","\n                ",117],["T_VARIABLE","$this",118],["T_OBJECT_OPERATOR","->",118],["T_STRING","_getSession",118],"(",")",["T_OBJECT_OPERATOR","->",118],["T_STRING","addError",118],"(",["T_VARIABLE","$e",118],["T_OBJECT_OPERATOR","->",118],["T_STRING","getMessage",118],"(",")",")",";",["T_WHITESPACE","\n            ",118],"}",["T_WHITESPACE"," ",119],["T_CATCH","catch",119],["T_WHITESPACE"," ",119],"(",["T_STRING","Exception",119],["T_WHITESPACE"," ",119],["T_VARIABLE","$e",119],")",["T_WHITESPACE"," ",119],"{",["T_WHITESPACE","\n                ",119],["T_VARIABLE","$this",120],["T_OBJECT_OPERATOR","->",120],["T_STRING","_getSession",120],"(",")",["T_OBJECT_OPERATOR","->",120],["T_STRING","addError",120],"(",["T_VARIABLE","$this",120],["T_OBJECT_OPERATOR","->",120],["T_STRING","__",120],"(",["T_CONSTANT_ENCAPSED_STRING","'Failed to cancel the billing agreement.'",120],")",")",";",["T_WHITESPACE","\n                ",120],["T_STRING","Mage",121],["T_DOUBLE_COLON","::",121],["T_STRING","logException",121],"(",["T_VARIABLE","$e",121],")",";",["T_WHITESPACE","\n            ",121],"}",["T_WHITESPACE","\n            ",122],["T_VARIABLE","$this",123],["T_OBJECT_OPERATOR","->",123],["T_STRING","_redirect",123],"(",["T_CONSTANT_ENCAPSED_STRING","'*\/*\/view'",123],",",["T_WHITESPACE"," ",123],["T_ARRAY","array",123],"(",["T_CONSTANT_ENCAPSED_STRING","'_current'",123],["T_WHITESPACE"," ",123],["T_DOUBLE_ARROW","=>",123],["T_WHITESPACE"," ",123],["T_STRING","true",123],")",")",";",["T_WHITESPACE","\n        ",123],"}",["T_WHITESPACE","\n        ",124],["T_RETURN","return",125],["T_WHITESPACE"," ",125],["T_VARIABLE","$this",125],["T_OBJECT_OPERATOR","->",125],["T_STRING","_redirect",125],"(",["T_CONSTANT_ENCAPSED_STRING","'*\/*\/'",125],")",";",["T_WHITESPACE","\n    ",125],"}",["T_WHITESPACE","\n\n    ",126],["T_DOC_COMMENT","\/**\n     * Delete billing agreement action\n     *\/",128],["T_WHITESPACE","\n    ",130],["T_PUBLIC","public",131],["T_WHITESPACE"," ",131],["T_FUNCTION","function",131],["T_WHITESPACE"," ",131],["T_STRING","deleteAction",131],"(",")",["T_WHITESPACE","\n    ",131],"{",["T_WHITESPACE","\n        ",132],["T_VARIABLE","$agreementModel",133],["T_WHITESPACE"," ",133],"=",["T_WHITESPACE"," ",133],["T_VARIABLE","$this",133],["T_OBJECT_OPERATOR","->",133],["T_STRING","_initBillingAgreement",133],"(",")",";",["T_WHITESPACE","\n\n        ",133],["T_IF","if",135],["T_WHITESPACE"," ",135],"(",["T_VARIABLE","$agreementModel",135],")",["T_WHITESPACE"," ",135],"{",["T_WHITESPACE","\n            ",135],["T_TRY","try",136],["T_WHITESPACE"," ",136],"{",["T_WHITESPACE","\n                ",136],["T_VARIABLE","$agreementModel",137],["T_OBJECT_OPERATOR","->",137],["T_STRING","delete",137],"(",")",";",["T_WHITESPACE","\n                ",137],["T_VARIABLE","$this",138],["T_OBJECT_OPERATOR","->",138],["T_STRING","_getSession",138],"(",")",["T_OBJECT_OPERATOR","->",138],["T_STRING","addSuccess",138],"(",["T_VARIABLE","$this",138],["T_OBJECT_OPERATOR","->",138],["T_STRING","__",138],"(",["T_CONSTANT_ENCAPSED_STRING","'The billing agreement has been deleted.'",138],")",")",";",["T_WHITESPACE","\n                ",138],["T_VARIABLE","$this",139],["T_OBJECT_OPERATOR","->",139],["T_STRING","_redirect",139],"(",["T_CONSTANT_ENCAPSED_STRING","'*\/*\/'",139],")",";",["T_WHITESPACE","\n                ",139],["T_RETURN","return",140],";",["T_WHITESPACE","\n            ",140],"}",["T_WHITESPACE"," ",141],["T_CATCH","catch",141],["T_WHITESPACE"," ",141],"(",["T_STRING","Mage_Core_Exception",141],["T_WHITESPACE"," ",141],["T_VARIABLE","$e",141],")",["T_WHITESPACE"," ",141],"{",["T_WHITESPACE","\n                ",141],["T_VARIABLE","$this",142],["T_OBJECT_OPERATOR","->",142],["T_STRING","_getSession",142],"(",")",["T_OBJECT_OPERATOR","->",142],["T_STRING","addError",142],"(",["T_VARIABLE","$e",142],["T_OBJECT_OPERATOR","->",142],["T_STRING","getMessage",142],"(",")",")",";",["T_WHITESPACE","\n            ",142],"}",["T_WHITESPACE"," ",143],["T_CATCH","catch",143],["T_WHITESPACE"," ",143],"(",["T_STRING","Exception",143],["T_WHITESPACE"," ",143],["T_VARIABLE","$e",143],")",["T_WHITESPACE"," ",143],"{",["T_WHITESPACE","\n                ",143],["T_VARIABLE","$this",144],["T_OBJECT_OPERATOR","->",144],["T_STRING","_getSession",144],"(",")",["T_OBJECT_OPERATOR","->",144],["T_STRING","addError",144],"(",["T_VARIABLE","$this",144],["T_OBJECT_OPERATOR","->",144],["T_STRING","__",144],"(",["T_CONSTANT_ENCAPSED_STRING","'Failed to delete the billing agreement.'",144],")",")",";",["T_WHITESPACE","\n                ",144],["T_STRING","Mage",145],["T_DOUBLE_COLON","::",145],["T_STRING","logException",145],"(",["T_VARIABLE","$e",145],")",";",["T_WHITESPACE","\n            ",145],"}",["T_WHITESPACE","\n            ",146],["T_VARIABLE","$this",147],["T_OBJECT_OPERATOR","->",147],["T_STRING","_redirect",147],"(",["T_CONSTANT_ENCAPSED_STRING","'*\/*\/view'",147],",",["T_WHITESPACE"," ",147],["T_ARRAY","array",147],"(",["T_CONSTANT_ENCAPSED_STRING","'_current'",147],["T_WHITESPACE"," ",147],["T_DOUBLE_ARROW","=>",147],["T_WHITESPACE"," ",147],["T_STRING","true",147],")",")",";",["T_WHITESPACE","\n        ",147],"}",["T_WHITESPACE","\n        ",148],["T_VARIABLE","$this",149],["T_OBJECT_OPERATOR","->",149],["T_STRING","_redirect",149],"(",["T_CONSTANT_ENCAPSED_STRING","'*\/*\/'",149],")",";",["T_WHITESPACE","\n    ",149],"}",["T_WHITESPACE","\n\n    ",150],["T_DOC_COMMENT","\/**\n     * Initialize billing agreement by ID specified in request\n     *\n     * @return Mage_Sales_Model_Billing_Agreement | false\n     *\/",152],["T_WHITESPACE","\n    ",156],["T_PROTECTED","protected",157],["T_WHITESPACE"," ",157],["T_FUNCTION","function",157],["T_WHITESPACE"," ",157],["T_STRING","_initBillingAgreement",157],"(",")",["T_WHITESPACE","\n    ",157],"{",["T_WHITESPACE","\n        ",158],["T_VARIABLE","$agreementId",159],["T_WHITESPACE"," ",159],"=",["T_WHITESPACE"," ",159],["T_VARIABLE","$this",159],["T_OBJECT_OPERATOR","->",159],["T_STRING","getRequest",159],"(",")",["T_OBJECT_OPERATOR","->",159],["T_STRING","getParam",159],"(",["T_CONSTANT_ENCAPSED_STRING","'agreement'",159],")",";",["T_WHITESPACE","\n        ",159],["T_VARIABLE","$agreementModel",160],["T_WHITESPACE"," ",160],"=",["T_WHITESPACE"," ",160],["T_STRING","Mage",160],["T_DOUBLE_COLON","::",160],["T_STRING","getModel",160],"(",["T_CONSTANT_ENCAPSED_STRING","'sales\/billing_agreement'",160],")",["T_OBJECT_OPERATOR","->",160],["T_STRING","load",160],"(",["T_VARIABLE","$agreementId",160],")",";",["T_WHITESPACE","\n\n        ",160],["T_IF","if",162],["T_WHITESPACE"," ",162],"(","!",["T_VARIABLE","$agreementModel",162],["T_OBJECT_OPERATOR","->",162],["T_STRING","getId",162],"(",")",")",["T_WHITESPACE"," ",162],"{",["T_WHITESPACE","\n            ",162],["T_VARIABLE","$this",163],["T_OBJECT_OPERATOR","->",163],["T_STRING","_getSession",163],"(",")",["T_OBJECT_OPERATOR","->",163],["T_STRING","addError",163],"(",["T_VARIABLE","$this",163],["T_OBJECT_OPERATOR","->",163],["T_STRING","__",163],"(",["T_CONSTANT_ENCAPSED_STRING","'Wrong billing agreement ID specified.'",163],")",")",";",["T_WHITESPACE","\n            ",163],["T_RETURN","return",164],["T_WHITESPACE"," ",164],["T_STRING","false",164],";",["T_WHITESPACE","\n        ",164],"}",["T_WHITESPACE","\n\n        ",165],["T_STRING","Mage",167],["T_DOUBLE_COLON","::",167],["T_STRING","register",167],"(",["T_CONSTANT_ENCAPSED_STRING","'current_billing_agreement'",167],",",["T_WHITESPACE"," ",167],["T_VARIABLE","$agreementModel",167],")",";",["T_WHITESPACE","\n        ",167],["T_RETURN","return",168],["T_WHITESPACE"," ",168],["T_VARIABLE","$agreementModel",168],";",["T_WHITESPACE","\n    ",168],"}",["T_WHITESPACE","\n\n    ",169],["T_DOC_COMMENT","\/**\n     * Initialize customer by ID specified in request\n     *\n     * @return Mage_Adminhtml_Sales_Billing_AgreementController\n     *\/",171],["T_WHITESPACE","\n    ",175],["T_PROTECTED","protected",176],["T_WHITESPACE"," ",176],["T_FUNCTION","function",176],["T_WHITESPACE"," ",176],["T_STRING","_initCustomer",176],"(",")",["T_WHITESPACE","\n    ",176],"{",["T_WHITESPACE","\n        ",177],["T_VARIABLE","$customerId",178],["T_WHITESPACE"," ",178],"=",["T_WHITESPACE"," ",178],["T_INT_CAST","(int)",178],["T_WHITESPACE"," ",178],["T_VARIABLE","$this",178],["T_OBJECT_OPERATOR","->",178],["T_STRING","getRequest",178],"(",")",["T_OBJECT_OPERATOR","->",178],["T_STRING","getParam",178],"(",["T_CONSTANT_ENCAPSED_STRING","'id'",178],")",";",["T_WHITESPACE","\n        ",178],["T_VARIABLE","$customer",179],["T_WHITESPACE"," ",179],"=",["T_WHITESPACE"," ",179],["T_STRING","Mage",179],["T_DOUBLE_COLON","::",179],["T_STRING","getModel",179],"(",["T_CONSTANT_ENCAPSED_STRING","'customer\/customer'",179],")",";",["T_WHITESPACE","\n\n        ",179],["T_IF","if",181],["T_WHITESPACE"," ",181],"(",["T_VARIABLE","$customerId",181],")",["T_WHITESPACE"," ",181],"{",["T_WHITESPACE","\n            ",181],["T_VARIABLE","$customer",182],["T_OBJECT_OPERATOR","->",182],["T_STRING","load",182],"(",["T_VARIABLE","$customerId",182],")",";",["T_WHITESPACE","\n        ",182],"}",["T_WHITESPACE","\n\n        ",183],["T_STRING","Mage",185],["T_DOUBLE_COLON","::",185],["T_STRING","register",185],"(",["T_CONSTANT_ENCAPSED_STRING","'current_customer'",185],",",["T_WHITESPACE"," ",185],["T_VARIABLE","$customer",185],")",";",["T_WHITESPACE","\n        ",185],["T_RETURN","return",186],["T_WHITESPACE"," ",186],["T_VARIABLE","$this",186],";",["T_WHITESPACE","\n    ",186],"}",["T_WHITESPACE","\n\n    ",187],["T_DOC_COMMENT","\/**\n     * Retrieve adminhtml session\n     *\n     * @return Mage_Adminhtml_Model_Session\n     *\/",189],["T_WHITESPACE","\n    ",193],["T_PROTECTED","protected",194],["T_WHITESPACE"," ",194],["T_FUNCTION","function",194],["T_WHITESPACE"," ",194],["T_STRING","_getSession",194],"(",")",["T_WHITESPACE","\n    ",194],"{",["T_WHITESPACE","\n        ",195],["T_RETURN","return",196],["T_WHITESPACE"," ",196],["T_STRING","Mage",196],["T_DOUBLE_COLON","::",196],["T_STRING","getSingleton",196],"(",["T_CONSTANT_ENCAPSED_STRING","'adminhtml\/session'",196],")",";",["T_WHITESPACE","\n    ",196],"}",["T_WHITESPACE","\n\n    ",197],["T_DOC_COMMENT","\/**\n     * Check currently called action by permissions for current user\n     *\n     * @return bool\n     *\/",199],["T_WHITESPACE","\n    ",203],["T_PROTECTED","protected",204],["T_WHITESPACE"," ",204],["T_FUNCTION","function",204],["T_WHITESPACE"," ",204],["T_STRING","_isAllowed",204],"(",")",["T_WHITESPACE","\n    ",204],"{",["T_WHITESPACE","\n        ",205],["T_VARIABLE","$action",206],["T_WHITESPACE"," ",206],"=",["T_WHITESPACE"," ",206],["T_STRING","strtolower",206],"(",["T_VARIABLE","$this",206],["T_OBJECT_OPERATOR","->",206],["T_STRING","getRequest",206],"(",")",["T_OBJECT_OPERATOR","->",206],["T_STRING","getActionName",206],"(",")",")",";",["T_WHITESPACE","\n        ",206],["T_SWITCH","switch",207],["T_WHITESPACE"," ",207],"(",["T_VARIABLE","$action",207],")",["T_WHITESPACE"," ",207],"{",["T_WHITESPACE","\n            ",207],["T_CASE","case",208],["T_WHITESPACE"," ",208],["T_CONSTANT_ENCAPSED_STRING","'index'",208],":",["T_WHITESPACE","\n            ",208],["T_CASE","case",209],["T_WHITESPACE"," ",209],["T_CONSTANT_ENCAPSED_STRING","'grid'",209],["T_WHITESPACE"," ",209],":",["T_WHITESPACE","\n            ",209],["T_CASE","case",210],["T_WHITESPACE"," ",210],["T_CONSTANT_ENCAPSED_STRING","'view'",210],["T_WHITESPACE"," ",210],":",["T_WHITESPACE","\n                ",210],["T_RETURN","return",211],["T_WHITESPACE"," ",211],["T_STRING","Mage",211],["T_DOUBLE_COLON","::",211],["T_STRING","getSingleton",211],"(",["T_CONSTANT_ENCAPSED_STRING","'admin\/session'",211],")",["T_OBJECT_OPERATOR","->",211],["T_STRING","isAllowed",211],"(",["T_CONSTANT_ENCAPSED_STRING","'sales\/billing_agreement\/actions\/view'",211],")",";",["T_WHITESPACE","\n                ",211],["T_BREAK","break",212],";",["T_WHITESPACE","\n            ",212],["T_CASE","case",213],["T_WHITESPACE"," ",213],["T_CONSTANT_ENCAPSED_STRING","'cancel'",213],":",["T_WHITESPACE","\n            ",213],["T_CASE","case",214],["T_WHITESPACE"," ",214],["T_CONSTANT_ENCAPSED_STRING","'delete'",214],":",["T_WHITESPACE","\n                ",214],["T_RETURN","return",215],["T_WHITESPACE"," ",215],["T_STRING","Mage",215],["T_DOUBLE_COLON","::",215],["T_STRING","getSingleton",215],"(",["T_CONSTANT_ENCAPSED_STRING","'admin\/session'",215],")",["T_OBJECT_OPERATOR","->",215],["T_STRING","isAllowed",215],"(",["T_CONSTANT_ENCAPSED_STRING","'sales\/billing_agreement\/actions\/manage'",215],")",";",["T_WHITESPACE","\n                ",215],["T_BREAK","break",216],";",["T_WHITESPACE","\n            ",216],["T_DEFAULT","default",217],":",["T_WHITESPACE","\n                ",217],["T_RETURN","return",218],["T_WHITESPACE"," ",218],["T_STRING","Mage",218],["T_DOUBLE_COLON","::",218],["T_STRING","getSingleton",218],"(",["T_CONSTANT_ENCAPSED_STRING","'admin\/session'",218],")",["T_OBJECT_OPERATOR","->",218],["T_STRING","isAllowed",218],"(",["T_CONSTANT_ENCAPSED_STRING","'sales\/billing_agreement'",218],")",";",["T_WHITESPACE","\n                ",218],["T_BREAK","break",219],";",["T_WHITESPACE","\n        ",219],"}",["T_WHITESPACE","\n    ",220],"}",["T_WHITESPACE","\n",221],"}",["T_WHITESPACE","\n",222]]
[["T_OPEN_TAG","<?php\n",1],["T_DOC_COMMENT","\/**\n * Magento\n *\n * NOTICE OF LICENSE\n *\n * This source file is subject to the Open Software License (OSL 3.0)\n * that is bundled with this package in the file LICENSE.txt.\n * It is also available through the world-wide-web at this URL:\n * http:\/\/opensource.org\/licenses\/osl-3.0.php\n * If you did not receive a copy of the license and are unable to\n * obtain it through the world-wide-web, please send an email\n * to license@magento.com so we can send you a copy immediately.\n *\n * DISCLAIMER\n *\n * Do not edit or add to this file if you wish to upgrade Magento to newer\n * versions in the future. If you wish to customize Magento for your\n * needs please refer to http:\/\/www.magento.com for more information.\n *\n * @category    Mage\n * @package     Mage_Adminhtml\n * @copyright  Copyright (c) 2006-2016 X.commerce, Inc. and affiliates (http:\/\/www.magento.com)\n * @license    http:\/\/opensource.org\/licenses\/osl-3.0.php  Open Software License (OSL 3.0)\n *\/",2],["T_WHITESPACE","\n\n",25],["T_DOC_COMMENT","\/**\n * Order status management controller\n *\n * @category    Mage\n * @package     Mage_Adminhtml\n * @author      Magento Core Team <core@magentocommerce.com>\n *\/",27],["T_WHITESPACE","\n",33],["T_CLASS","class",34],["T_WHITESPACE"," ",34],["T_STRING","Mage_Adminhtml_Sales_Order_StatusController",34],["T_WHITESPACE"," ",34],["T_EXTENDS","extends",34],["T_WHITESPACE"," ",34],["T_STRING","Mage_Adminhtml_Controller_Action",34],["T_WHITESPACE","\n",34],"{",["T_WHITESPACE","\n    ",35],["T_DOC_COMMENT","\/**\n     * Additional initialization\n     *\n     *\/",36],["T_WHITESPACE","\n    ",39],["T_PROTECTED","protected",40],["T_WHITESPACE"," ",40],["T_FUNCTION","function",40],["T_WHITESPACE"," ",40],["T_STRING","_construct",40],"(",")",["T_WHITESPACE","\n    ",40],"{",["T_WHITESPACE","\n        ",41],["T_VARIABLE","$this",42],["T_OBJECT_OPERATOR","->",42],["T_STRING","setUsedModuleName",42],"(",["T_CONSTANT_ENCAPSED_STRING","'Mage_Sales'",42],")",";",["T_WHITESPACE","\n    ",42],"}",["T_WHITESPACE","\n\n    ",43],["T_DOC_COMMENT","\/**\n     * Initialize status model based on status code in request\n     *\n     * @return Mage_Sales_Model_Order_Status | false\n     *\/",45],["T_WHITESPACE","\n    ",49],["T_PROTECTED","protected",50],["T_WHITESPACE"," ",50],["T_FUNCTION","function",50],["T_WHITESPACE"," ",50],["T_STRING","_initStatus",50],"(",")",["T_WHITESPACE","\n    ",50],"{",["T_WHITESPACE","\n        ",51],["T_VARIABLE","$statusCode",52],["T_WHITESPACE"," ",52],"=",["T_WHITESPACE"," ",52],["T_VARIABLE","$this",52],["T_OBJECT_OPERATOR","->",52],["T_STRING","getRequest",52],"(",")",["T_OBJECT_OPERATOR","->",52],["T_STRING","getParam",52],"(",["T_CONSTANT_ENCAPSED_STRING","'status'",52],")",";",["T_WHITESPACE","\n        ",52],["T_IF","if",53],["T_WHITESPACE"," ",53],"(",["T_VARIABLE","$statusCode",53],")",["T_WHITESPACE"," ",53],"{",["T_WHITESPACE","\n            ",53],["T_VARIABLE","$status",54],["T_WHITESPACE"," ",54],"=",["T_WHITESPACE"," ",54],["T_STRING","Mage",54],["T_DOUBLE_COLON","::",54],["T_STRING","getModel",54],"(",["T_CONSTANT_ENCAPSED_STRING","'sales\/order_status'",54],")",["T_OBJECT_OPERATOR","->",54],["T_STRING","load",54],"(",["T_VARIABLE","$statusCode",54],")",";",["T_WHITESPACE","\n        ",54],"}",["T_WHITESPACE"," ",55],["T_ELSE","else",55],["T_WHITESPACE"," ",55],"{",["T_WHITESPACE","\n            ",55],["T_VARIABLE","$status",56],["T_WHITESPACE"," ",56],"=",["T_WHITESPACE"," ",56],["T_STRING","false",56],";",["T_WHITESPACE","\n        ",56],"}",["T_WHITESPACE","\n        ",57],["T_RETURN","return",58],["T_WHITESPACE"," ",58],["T_VARIABLE","$status",58],";",["T_WHITESPACE","\n    ",58],"}",["T_WHITESPACE","\n\n    ",59],["T_DOC_COMMENT","\/**\n     * Statuses grid page\n     *\/",61],["T_WHITESPACE","\n    ",63],["T_PUBLIC","public",64],["T_WHITESPACE"," ",64],["T_FUNCTION","function",64],["T_WHITESPACE"," ",64],["T_STRING","indexAction",64],"(",")",["T_WHITESPACE","\n    ",64],"{",["T_WHITESPACE","\n        ",65],["T_VARIABLE","$this",66],["T_OBJECT_OPERATOR","->",66],["T_STRING","_title",66],"(",["T_VARIABLE","$this",66],["T_OBJECT_OPERATOR","->",66],["T_STRING","__",66],"(",["T_CONSTANT_ENCAPSED_STRING","'Sales'",66],")",")",["T_OBJECT_OPERATOR","->",66],["T_STRING","_title",66],"(",["T_VARIABLE","$this",66],["T_OBJECT_OPERATOR","->",66],["T_STRING","__",66],"(",["T_CONSTANT_ENCAPSED_STRING","'Order Statuses'",66],")",")",";",["T_WHITESPACE","\n        ",66],["T_VARIABLE","$this",67],["T_OBJECT_OPERATOR","->",67],["T_STRING","loadLayout",67],"(",")",["T_OBJECT_OPERATOR","->",67],["T_STRING","_setActiveMenu",67],"(",["T_CONSTANT_ENCAPSED_STRING","'system'",67],")",["T_OBJECT_OPERATOR","->",67],["T_STRING","renderLayout",67],"(",")",";",["T_WHITESPACE","\n    ",67],"}",["T_WHITESPACE","\n\n    ",68],["T_DOC_COMMENT","\/**\n     * New status form\n     *\/",70],["T_WHITESPACE","\n    ",72],["T_PUBLIC","public",73],["T_WHITESPACE"," ",73],["T_FUNCTION","function",73],["T_WHITESPACE"," ",73],["T_STRING","newAction",73],"(",")",["T_WHITESPACE","\n    ",73],"{",["T_WHITESPACE","\n        ",74],["T_VARIABLE","$data",75],["T_WHITESPACE"," ",75],"=",["T_WHITESPACE"," ",75],["T_VARIABLE","$this",75],["T_OBJECT_OPERATOR","->",75],["T_STRING","_getSession",75],"(",")",["T_OBJECT_OPERATOR","->",75],["T_STRING","getFormData",75],"(",["T_STRING","true",75],")",";",["T_WHITESPACE","\n        ",75],["T_IF","if",76],["T_WHITESPACE"," ",76],"(",["T_VARIABLE","$data",76],")",["T_WHITESPACE"," ",76],"{",["T_WHITESPACE","\n            ",76],["T_VARIABLE","$status",77],["T_WHITESPACE"," ",77],"=",["T_WHITESPACE"," ",77],["T_STRING","Mage",77],["T_DOUBLE_COLON","::",77],["T_STRING","getModel",77],"(",["T_CONSTANT_ENCAPSED_STRING","'sales\/order_status'",77],")",["T_WHITESPACE","\n                ",77],["T_OBJECT_OPERATOR","->",78],["T_STRING","setData",78],"(",["T_VARIABLE","$data",78],")",";",["T_WHITESPACE","\n            ",78],["T_STRING","Mage",79],["T_DOUBLE_COLON","::",79],["T_STRING","register",79],"(",["T_CONSTANT_ENCAPSED_STRING","'current_status'",79],",",["T_WHITESPACE"," ",79],["T_VARIABLE","$status",79],")",";",["T_WHITESPACE","\n        ",79],"}",["T_WHITESPACE","\n        ",80],["T_VARIABLE","$this",81],["T_OBJECT_OPERATOR","->",81],["T_STRING","_title",81],"(",["T_VARIABLE","$this",81],["T_OBJECT_OPERATOR","->",81],["T_STRING","__",81],"(",["T_CONSTANT_ENCAPSED_STRING","'Sales'",81],")",")",["T_OBJECT_OPERATOR","->",81],["T_STRING","_title",81],"(",["T_VARIABLE","$this",81],["T_OBJECT_OPERATOR","->",81],["T_STRING","__",81],"(",["T_CONSTANT_ENCAPSED_STRING","'Create New Order Status'",81],")",")",";",["T_WHITESPACE","\n        ",81],["T_VARIABLE","$this",82],["T_OBJECT_OPERATOR","->",82],["T_STRING","loadLayout",82],"(",")",["T_WHITESPACE","\n            ",82],["T_OBJECT_OPERATOR","->",83],["T_STRING","renderLayout",83],"(",")",";",["T_WHITESPACE","\n    ",83],"}",["T_WHITESPACE","\n\n    ",84],["T_DOC_COMMENT","\/**\n     * Editing existing status form\n     *\/",86],["T_WHITESPACE","\n    ",88],["T_PUBLIC","public",89],["T_WHITESPACE"," ",89],["T_FUNCTION","function",89],["T_WHITESPACE"," ",89],["T_STRING","editAction",89],"(",")",["T_WHITESPACE","\n    ",89],"{",["T_WHITESPACE","\n        ",90],["T_VARIABLE","$status",91],["T_WHITESPACE"," ",91],"=",["T_WHITESPACE"," ",91],["T_VARIABLE","$this",91],["T_OBJECT_OPERATOR","->",91],["T_STRING","_initStatus",91],"(",")",";",["T_WHITESPACE","\n        ",91],["T_IF","if",92],["T_WHITESPACE"," ",92],"(",["T_VARIABLE","$status",92],")",["T_WHITESPACE"," ",92],"{",["T_WHITESPACE","\n            ",92],["T_STRING","Mage",93],["T_DOUBLE_COLON","::",93],["T_STRING","register",93],"(",["T_CONSTANT_ENCAPSED_STRING","'current_status'",93],",",["T_WHITESPACE"," ",93],["T_VARIABLE","$status",93],")",";",["T_WHITESPACE","\n            ",93],["T_VARIABLE","$this",94],["T_OBJECT_OPERATOR","->",94],["T_STRING","_title",94],"(",["T_VARIABLE","$this",94],["T_OBJECT_OPERATOR","->",94],["T_STRING","__",94],"(",["T_CONSTANT_ENCAPSED_STRING","'Sales'",94],")",")",["T_OBJECT_OPERATOR","->",94],["T_STRING","_title",94],"(",["T_VARIABLE","$this",94],["T_OBJECT_OPERATOR","->",94],["T_STRING","__",94],"(",["T_CONSTANT_ENCAPSED_STRING","'Edit Order Status'",94],")",")",";",["T_WHITESPACE","\n            ",94],["T_VARIABLE","$this",95],["T_OBJECT_OPERATOR","->",95],["T_STRING","loadLayout",95],"(",")",["T_WHITESPACE","\n                ",95],["T_OBJECT_OPERATOR","->",96],["T_STRING","renderLayout",96],"(",")",";",["T_WHITESPACE","\n        ",96],"}",["T_WHITESPACE"," ",97],["T_ELSE","else",97],["T_WHITESPACE"," ",97],"{",["T_WHITESPACE","\n            ",97],["T_VARIABLE","$this",98],["T_OBJECT_OPERATOR","->",98],["T_STRING","_getSession",98],"(",")",["T_OBJECT_OPERATOR","->",98],["T_STRING","addError",98],"(",["T_WHITESPACE","\n                ",98],["T_STRING","Mage",99],["T_DOUBLE_COLON","::",99],["T_STRING","helper",99],"(",["T_CONSTANT_ENCAPSED_STRING","'sales'",99],")",["T_OBJECT_OPERATOR","->",99],["T_STRING","__",99],"(",["T_CONSTANT_ENCAPSED_STRING","'Order status does not exist.'",99],")",["T_WHITESPACE","\n            ",99],")",";",["T_WHITESPACE","\n            ",100],["T_VARIABLE","$this",101],["T_OBJECT_OPERATOR","->",101],["T_STRING","_redirect",101],"(",["T_CONSTANT_ENCAPSED_STRING","'*\/'",101],")",";",["T_WHITESPACE","\n        ",101],"}",["T_WHITESPACE","\n    ",102],"}",["T_WHITESPACE","\n\n    ",103],["T_DOC_COMMENT","\/**\n     * Save status form processing\n     *\/",105],["T_WHITESPACE","\n    ",107],["T_PUBLIC","public",108],["T_WHITESPACE"," ",108],["T_FUNCTION","function",108],["T_WHITESPACE"," ",108],["T_STRING","saveAction",108],"(",")",["T_WHITESPACE","\n    ",108],"{",["T_WHITESPACE","\n        ",109],["T_VARIABLE","$data",110],["T_WHITESPACE"," ",110],"=",["T_WHITESPACE"," ",110],["T_VARIABLE","$this",110],["T_OBJECT_OPERATOR","->",110],["T_STRING","getRequest",110],"(",")",["T_OBJECT_OPERATOR","->",110],["T_STRING","getPost",110],"(",")",";",["T_WHITESPACE","\n        ",110],["T_VARIABLE","$isNew",111],["T_WHITESPACE"," ",111],"=",["T_WHITESPACE"," ",111],["T_VARIABLE","$this",111],["T_OBJECT_OPERATOR","->",111],["T_STRING","getRequest",111],"(",")",["T_OBJECT_OPERATOR","->",111],["T_STRING","getParam",111],"(",["T_CONSTANT_ENCAPSED_STRING","'is_new'",111],")",";",["T_WHITESPACE","\n        ",111],["T_IF","if",112],["T_WHITESPACE"," ",112],"(",["T_VARIABLE","$data",112],")",["T_WHITESPACE"," ",112],"{",["T_WHITESPACE","\n\n            ",112],["T_VARIABLE","$statusCode",114],["T_WHITESPACE"," ",114],"=",["T_WHITESPACE"," ",114],["T_VARIABLE","$this",114],["T_OBJECT_OPERATOR","->",114],["T_STRING","getRequest",114],"(",")",["T_OBJECT_OPERATOR","->",114],["T_STRING","getParam",114],"(",["T_CONSTANT_ENCAPSED_STRING","'status'",114],")",";",["T_WHITESPACE","\n\n            ",114],["T_COMMENT","\/\/filter tags in labels\/status\n",116],["T_WHITESPACE","            ",117],["T_DOC_COMMENT","\/** @var $helper Mage_Adminhtml_Helper_Data *\/",117],["T_WHITESPACE","\n            ",117],["T_VARIABLE","$helper",118],["T_WHITESPACE"," ",118],"=",["T_WHITESPACE"," ",118],["T_STRING","Mage",118],["T_DOUBLE_COLON","::",118],["T_STRING","helper",118],"(",["T_CONSTANT_ENCAPSED_STRING","'adminhtml'",118],")",";",["T_WHITESPACE","\n            ",118],["T_IF","if",119],["T_WHITESPACE"," ",119],"(",["T_VARIABLE","$isNew",119],")",["T_WHITESPACE"," ",119],"{",["T_WHITESPACE","\n                ",119],["T_VARIABLE","$statusCode",120],["T_WHITESPACE"," ",120],"=",["T_WHITESPACE"," ",120],["T_VARIABLE","$data",120],"[",["T_CONSTANT_ENCAPSED_STRING","'status'",120],"]",["T_WHITESPACE"," ",120],"=",["T_WHITESPACE"," ",120],["T_VARIABLE","$helper",120],["T_OBJECT_OPERATOR","->",120],["T_STRING","stripTags",120],"(",["T_VARIABLE","$data",120],"[",["T_CONSTANT_ENCAPSED_STRING","'status'",120],"]",")",";",["T_WHITESPACE","\n            ",120],"}",["T_WHITESPACE","\n            ",121],["T_VARIABLE","$data",122],"[",["T_CONSTANT_ENCAPSED_STRING","'label'",122],"]",["T_WHITESPACE"," ",122],"=",["T_WHITESPACE"," ",122],["T_VARIABLE","$helper",122],["T_OBJECT_OPERATOR","->",122],["T_STRING","stripTags",122],"(",["T_VARIABLE","$data",122],"[",["T_CONSTANT_ENCAPSED_STRING","'label'",122],"]",")",";",["T_WHITESPACE","\n            ",122],["T_FOREACH","foreach",123],["T_WHITESPACE"," ",123],"(",["T_VARIABLE","$data",123],"[",["T_CONSTANT_ENCAPSED_STRING","'store_labels'",123],"]",["T_WHITESPACE"," ",123],["T_AS","as",123],["T_WHITESPACE"," ",123],"&",["T_VARIABLE","$label",123],")",["T_WHITESPACE"," ",123],"{",["T_WHITESPACE","\n                ",123],["T_VARIABLE","$label",124],["T_WHITESPACE"," ",124],"=",["T_WHITESPACE"," ",124],["T_VARIABLE","$helper",124],["T_OBJECT_OPERATOR","->",124],["T_STRING","stripTags",124],"(",["T_VARIABLE","$label",124],")",";",["T_WHITESPACE","\n            ",124],"}",["T_WHITESPACE","\n\n            ",125],["T_VARIABLE","$status",127],["T_WHITESPACE"," ",127],"=",["T_WHITESPACE"," ",127],["T_STRING","Mage",127],["T_DOUBLE_COLON","::",127],["T_STRING","getModel",127],"(",["T_CONSTANT_ENCAPSED_STRING","'sales\/order_status'",127],")",["T_WHITESPACE","\n                    ",127],["T_OBJECT_OPERATOR","->",128],["T_STRING","load",128],"(",["T_VARIABLE","$statusCode",128],")",";",["T_WHITESPACE","\n            ",128],["T_COMMENT","\/\/ check if status exist\n",129],["T_WHITESPACE","            ",130],["T_IF","if",130],["T_WHITESPACE"," ",130],"(",["T_VARIABLE","$isNew",130],["T_WHITESPACE"," ",130],["T_BOOLEAN_AND","&&",130],["T_WHITESPACE"," ",130],["T_VARIABLE","$status",130],["T_OBJECT_OPERATOR","->",130],["T_STRING","getStatus",130],"(",")",")",["T_WHITESPACE"," ",130],"{",["T_WHITESPACE","\n                ",130],["T_VARIABLE","$this",131],["T_OBJECT_OPERATOR","->",131],["T_STRING","_getSession",131],"(",")",["T_OBJECT_OPERATOR","->",131],["T_STRING","addError",131],"(",["T_WHITESPACE","\n                    ",131],["T_STRING","Mage",132],["T_DOUBLE_COLON","::",132],["T_STRING","helper",132],"(",["T_CONSTANT_ENCAPSED_STRING","'sales'",132],")",["T_OBJECT_OPERATOR","->",132],["T_STRING","__",132],"(",["T_CONSTANT_ENCAPSED_STRING","'Order status with the same status code already exist.'",132],")",["T_WHITESPACE","\n                ",132],")",";",["T_WHITESPACE","\n                ",133],["T_VARIABLE","$this",134],["T_OBJECT_OPERATOR","->",134],["T_STRING","_getSession",134],"(",")",["T_OBJECT_OPERATOR","->",134],["T_STRING","setFormData",134],"(",["T_VARIABLE","$data",134],")",";",["T_WHITESPACE","\n                ",134],["T_VARIABLE","$this",135],["T_OBJECT_OPERATOR","->",135],["T_STRING","_redirect",135],"(",["T_CONSTANT_ENCAPSED_STRING","'*\/*\/new'",135],")",";",["T_WHITESPACE","\n                ",135],["T_RETURN","return",136],";",["T_WHITESPACE","\n            ",136],"}",["T_WHITESPACE","\n\n            ",137],["T_VARIABLE","$status",139],["T_OBJECT_OPERATOR","->",139],["T_STRING","setData",139],"(",["T_VARIABLE","$data",139],")",["T_WHITESPACE","\n                    ",139],["T_OBJECT_OPERATOR","->",140],["T_STRING","setStatus",140],"(",["T_VARIABLE","$statusCode",140],")",";",["T_WHITESPACE","\n            ",140],["T_TRY","try",141],["T_WHITESPACE"," ",141],"{",["T_WHITESPACE","\n                ",141],["T_VARIABLE","$status",142],["T_OBJECT_OPERATOR","->",142],["T_STRING","save",142],"(",")",";",["T_WHITESPACE","\n                ",142],["T_VARIABLE","$this",143],["T_OBJECT_OPERATOR","->",143],["T_STRING","_getSession",143],"(",")",["T_OBJECT_OPERATOR","->",143],["T_STRING","addSuccess",143],"(",["T_STRING","Mage",143],["T_DOUBLE_COLON","::",143],["T_STRING","helper",143],"(",["T_CONSTANT_ENCAPSED_STRING","'sales'",143],")",["T_OBJECT_OPERATOR","->",143],["T_STRING","__",143],"(",["T_CONSTANT_ENCAPSED_STRING","'The order status has been saved.'",143],")",")",";",["T_WHITESPACE","\n                ",143],["T_VARIABLE","$this",144],["T_OBJECT_OPERATOR","->",144],["T_STRING","_redirect",144],"(",["T_CONSTANT_ENCAPSED_STRING","'*\/*\/'",144],")",";",["T_WHITESPACE","\n                ",144],["T_RETURN","return",145],";",["T_WHITESPACE","\n            ",145],"}",["T_WHITESPACE"," ",146],["T_CATCH","catch",146],["T_WHITESPACE"," ",146],"(",["T_STRING","Mage_Core_Exception",146],["T_WHITESPACE"," ",146],["T_VARIABLE","$e",146],")",["T_WHITESPACE"," ",146],"{",["T_WHITESPACE","\n                ",146],["T_VARIABLE","$this",147],["T_OBJECT_OPERATOR","->",147],["T_STRING","_getSession",147],"(",")",["T_OBJECT_OPERATOR","->",147],["T_STRING","addError",147],"(",["T_VARIABLE","$e",147],["T_OBJECT_OPERATOR","->",147],["T_STRING","getMessage",147],"(",")",")",";",["T_WHITESPACE","\n            ",147],"}",["T_WHITESPACE"," ",148],["T_CATCH","catch",148],["T_WHITESPACE"," ",148],"(",["T_STRING","Exception",148],["T_WHITESPACE"," ",148],["T_VARIABLE","$e",148],")",["T_WHITESPACE"," ",148],"{",["T_WHITESPACE","\n                ",148],["T_VARIABLE","$this",149],["T_OBJECT_OPERATOR","->",149],["T_STRING","_getSession",149],"(",")",["T_OBJECT_OPERATOR","->",149],["T_STRING","addException",149],"(",["T_WHITESPACE","\n                    ",149],["T_VARIABLE","$e",150],",",["T_WHITESPACE","\n                    ",150],["T_STRING","Mage",151],["T_DOUBLE_COLON","::",151],["T_STRING","helper",151],"(",["T_CONSTANT_ENCAPSED_STRING","'sales'",151],")",["T_OBJECT_OPERATOR","->",151],["T_STRING","__",151],"(",["T_CONSTANT_ENCAPSED_STRING","'An error occurred while saving order status. The status has not been added.'",151],")",["T_WHITESPACE","\n                ",151],")",";",["T_WHITESPACE","\n            ",152],"}",["T_WHITESPACE","\n            ",153],["T_VARIABLE","$this",154],["T_OBJECT_OPERATOR","->",154],["T_STRING","_getSession",154],"(",")",["T_OBJECT_OPERATOR","->",154],["T_STRING","setFormData",154],"(",["T_VARIABLE","$data",154],")",";",["T_WHITESPACE","\n            ",154],["T_IF","if",155],["T_WHITESPACE"," ",155],"(",["T_VARIABLE","$isNew",155],")",["T_WHITESPACE"," ",155],"{",["T_WHITESPACE","\n                ",155],["T_VARIABLE","$this",156],["T_OBJECT_OPERATOR","->",156],["T_STRING","_redirect",156],"(",["T_CONSTANT_ENCAPSED_STRING","'*\/*\/new'",156],")",";",["T_WHITESPACE","\n            ",156],"}",["T_WHITESPACE"," ",157],["T_ELSE","else",157],["T_WHITESPACE"," ",157],"{",["T_WHITESPACE","\n                ",157],["T_VARIABLE","$this",158],["T_OBJECT_OPERATOR","->",158],["T_STRING","_redirect",158],"(",["T_CONSTANT_ENCAPSED_STRING","'*\/*\/edit'",158],",",["T_WHITESPACE"," ",158],["T_ARRAY","array",158],"(",["T_CONSTANT_ENCAPSED_STRING","'status'",158],["T_WHITESPACE"," ",158],["T_DOUBLE_ARROW","=>",158],["T_WHITESPACE"," ",158],["T_VARIABLE","$this",158],["T_OBJECT_OPERATOR","->",158],["T_STRING","getRequest",158],"(",")",["T_OBJECT_OPERATOR","->",158],["T_STRING","getParam",158],"(",["T_CONSTANT_ENCAPSED_STRING","'status'",158],")",")",")",";",["T_WHITESPACE","\n            ",158],"}",["T_WHITESPACE","\n            ",159],["T_RETURN","return",160],";",["T_WHITESPACE","\n        ",160],"}",["T_WHITESPACE","\n        ",161],["T_VARIABLE","$this",162],["T_OBJECT_OPERATOR","->",162],["T_STRING","_redirect",162],"(",["T_CONSTANT_ENCAPSED_STRING","'*\/*\/'",162],")",";",["T_WHITESPACE","\n    ",162],"}",["T_WHITESPACE","\n\n    ",163],["T_DOC_COMMENT","\/**\n     * Assign status to state form\n     *\/",165],["T_WHITESPACE","\n    ",167],["T_PUBLIC","public",168],["T_WHITESPACE"," ",168],["T_FUNCTION","function",168],["T_WHITESPACE"," ",168],["T_STRING","assignAction",168],"(",")",["T_WHITESPACE","\n    ",168],"{",["T_WHITESPACE","\n        ",169],["T_VARIABLE","$this",170],["T_OBJECT_OPERATOR","->",170],["T_STRING","_title",170],"(",["T_VARIABLE","$this",170],["T_OBJECT_OPERATOR","->",170],["T_STRING","__",170],"(",["T_CONSTANT_ENCAPSED_STRING","'Sales'",170],")",")",["T_OBJECT_OPERATOR","->",170],["T_STRING","_title",170],"(",["T_VARIABLE","$this",170],["T_OBJECT_OPERATOR","->",170],["T_STRING","__",170],"(",["T_CONSTANT_ENCAPSED_STRING","'Assign Order Status to State'",170],")",")",";",["T_WHITESPACE","\n        ",170],["T_VARIABLE","$this",171],["T_OBJECT_OPERATOR","->",171],["T_STRING","loadLayout",171],"(",")",["T_WHITESPACE","\n            ",171],["T_OBJECT_OPERATOR","->",172],["T_STRING","renderLayout",172],"(",")",";",["T_WHITESPACE","\n    ",172],"}",["T_WHITESPACE","\n\n    ",173],["T_DOC_COMMENT","\/**\n     * Save status assignment to state\n     *\/",175],["T_WHITESPACE","\n    ",177],["T_PUBLIC","public",178],["T_WHITESPACE"," ",178],["T_FUNCTION","function",178],["T_WHITESPACE"," ",178],["T_STRING","assignPostAction",178],"(",")",["T_WHITESPACE","\n    ",178],"{",["T_WHITESPACE","\n        ",179],["T_VARIABLE","$data",180],["T_WHITESPACE"," ",180],"=",["T_WHITESPACE"," ",180],["T_VARIABLE","$this",180],["T_OBJECT_OPERATOR","->",180],["T_STRING","getRequest",180],"(",")",["T_OBJECT_OPERATOR","->",180],["T_STRING","getPost",180],"(",")",";",["T_WHITESPACE","\n        ",180],["T_IF","if",181],["T_WHITESPACE"," ",181],"(",["T_VARIABLE","$data",181],")",["T_WHITESPACE"," ",181],"{",["T_WHITESPACE","\n            ",181],["T_VARIABLE","$state",182],["T_WHITESPACE","  ",182],"=",["T_WHITESPACE"," ",182],["T_VARIABLE","$this",182],["T_OBJECT_OPERATOR","->",182],["T_STRING","getRequest",182],"(",")",["T_OBJECT_OPERATOR","->",182],["T_STRING","getParam",182],"(",["T_CONSTANT_ENCAPSED_STRING","'state'",182],")",";",["T_WHITESPACE","\n            ",182],["T_VARIABLE","$isDefault",183],["T_WHITESPACE"," ",183],"=",["T_WHITESPACE"," ",183],["T_VARIABLE","$this",183],["T_OBJECT_OPERATOR","->",183],["T_STRING","getRequest",183],"(",")",["T_OBJECT_OPERATOR","->",183],["T_STRING","getParam",183],"(",["T_CONSTANT_ENCAPSED_STRING","'is_default'",183],")",";",["T_WHITESPACE","\n            ",183],["T_VARIABLE","$status",184],["T_WHITESPACE"," ",184],"=",["T_WHITESPACE"," ",184],["T_VARIABLE","$this",184],["T_OBJECT_OPERATOR","->",184],["T_STRING","_initStatus",184],"(",")",";",["T_WHITESPACE","\n            ",184],["T_IF","if",185],["T_WHITESPACE"," ",185],"(",["T_VARIABLE","$status",185],["T_WHITESPACE"," ",185],["T_BOOLEAN_AND","&&",185],["T_WHITESPACE"," ",185],["T_VARIABLE","$status",185],["T_OBJECT_OPERATOR","->",185],["T_STRING","getStatus",185],"(",")",")",["T_WHITESPACE"," ",185],"{",["T_WHITESPACE","\n                ",185],["T_TRY","try",186],["T_WHITESPACE"," ",186],"{",["T_WHITESPACE","\n                    ",186],["T_VARIABLE","$status",187],["T_OBJECT_OPERATOR","->",187],["T_STRING","assignState",187],"(",["T_VARIABLE","$state",187],",",["T_WHITESPACE"," ",187],["T_VARIABLE","$isDefault",187],")",";",["T_WHITESPACE","\n                    ",187],["T_VARIABLE","$this",188],["T_OBJECT_OPERATOR","->",188],["T_STRING","_getSession",188],"(",")",["T_OBJECT_OPERATOR","->",188],["T_STRING","addSuccess",188],"(",["T_STRING","Mage",188],["T_DOUBLE_COLON","::",188],["T_STRING","helper",188],"(",["T_CONSTANT_ENCAPSED_STRING","'sales'",188],")",["T_OBJECT_OPERATOR","->",188],["T_STRING","__",188],"(",["T_CONSTANT_ENCAPSED_STRING","'The order status has been assigned.'",188],")",")",";",["T_WHITESPACE","\n                    ",188],["T_VARIABLE","$this",189],["T_OBJECT_OPERATOR","->",189],["T_STRING","_redirect",189],"(",["T_CONSTANT_ENCAPSED_STRING","'*\/*\/'",189],")",";",["T_WHITESPACE","\n                    ",189],["T_RETURN","return",190],";",["T_WHITESPACE","\n                ",190],"}",["T_WHITESPACE"," ",191],["T_CATCH","catch",191],["T_WHITESPACE"," ",191],"(",["T_STRING","Mage_Core_Exception",191],["T_WHITESPACE"," ",191],["T_VARIABLE","$e",191],")",["T_WHITESPACE"," ",191],"{",["T_WHITESPACE","\n                    ",191],["T_VARIABLE","$this",192],["T_OBJECT_OPERATOR","->",192],["T_STRING","_getSession",192],"(",")",["T_OBJECT_OPERATOR","->",192],["T_STRING","addError",192],"(",["T_VARIABLE","$e",192],["T_OBJECT_OPERATOR","->",192],["T_STRING","getMessage",192],"(",")",")",";",["T_WHITESPACE","\n                ",192],"}",["T_WHITESPACE"," ",193],["T_CATCH","catch",193],["T_WHITESPACE"," ",193],"(",["T_STRING","Exception",193],["T_WHITESPACE"," ",193],["T_VARIABLE","$e",193],")",["T_WHITESPACE"," ",193],"{",["T_WHITESPACE","\n                    ",193],["T_VARIABLE","$this",194],["T_OBJECT_OPERATOR","->",194],["T_STRING","_getSession",194],"(",")",["T_OBJECT_OPERATOR","->",194],["T_STRING","addException",194],"(",["T_WHITESPACE","\n                        ",194],["T_VARIABLE","$e",195],",",["T_WHITESPACE","\n                        ",195],["T_STRING","Mage",196],["T_DOUBLE_COLON","::",196],["T_STRING","helper",196],"(",["T_CONSTANT_ENCAPSED_STRING","'sales'",196],")",["T_OBJECT_OPERATOR","->",196],["T_STRING","__",196],"(",["T_CONSTANT_ENCAPSED_STRING","'An error occurred while assigning order status. Status has not been assigned.'",196],")",["T_WHITESPACE","\n                    ",196],")",";",["T_WHITESPACE","\n                ",197],"}",["T_WHITESPACE","\n            ",198],"}",["T_WHITESPACE"," ",199],["T_ELSE","else",199],["T_WHITESPACE"," ",199],"{",["T_WHITESPACE","\n                ",199],["T_VARIABLE","$this",200],["T_OBJECT_OPERATOR","->",200],["T_STRING","_getSession",200],"(",")",["T_OBJECT_OPERATOR","->",200],["T_STRING","addError",200],"(",["T_STRING","Mage",200],["T_DOUBLE_COLON","::",200],["T_STRING","helper",200],"(",["T_CONSTANT_ENCAPSED_STRING","'sales'",200],")",["T_OBJECT_OPERATOR","->",200],["T_STRING","__",200],"(",["T_CONSTANT_ENCAPSED_STRING","'Order status does not exist.'",200],")",")",";",["T_WHITESPACE","\n            ",200],"}",["T_WHITESPACE","\n            ",201],["T_VARIABLE","$this",202],["T_OBJECT_OPERATOR","->",202],["T_STRING","_redirect",202],"(",["T_CONSTANT_ENCAPSED_STRING","'*\/*\/assign'",202],")",";",["T_WHITESPACE","\n            ",202],["T_RETURN","return",203],";",["T_WHITESPACE","\n        ",203],"}",["T_WHITESPACE","\n        ",204],["T_VARIABLE","$this",205],["T_OBJECT_OPERATOR","->",205],["T_STRING","_redirect",205],"(",["T_CONSTANT_ENCAPSED_STRING","'*\/*\/'",205],")",";",["T_WHITESPACE","\n    ",205],"}",["T_WHITESPACE","\n\n    ",206],["T_DOC_COMMENT","\/**\n     * Unassign the status from a specific state\n     *\/",208],["T_WHITESPACE","\n    ",210],["T_PUBLIC","public",211],["T_WHITESPACE"," ",211],["T_FUNCTION","function",211],["T_WHITESPACE"," ",211],["T_STRING","unassignAction",211],"(",")",["T_WHITESPACE","\n    ",211],"{",["T_WHITESPACE","\n        ",212],["T_VARIABLE","$state",213],["T_WHITESPACE","  ",213],"=",["T_WHITESPACE"," ",213],["T_VARIABLE","$this",213],["T_OBJECT_OPERATOR","->",213],["T_STRING","getRequest",213],"(",")",["T_OBJECT_OPERATOR","->",213],["T_STRING","getParam",213],"(",["T_CONSTANT_ENCAPSED_STRING","'state'",213],")",";",["T_WHITESPACE","\n        ",213],["T_VARIABLE","$status",214],["T_WHITESPACE"," ",214],"=",["T_WHITESPACE"," ",214],["T_VARIABLE","$this",214],["T_OBJECT_OPERATOR","->",214],["T_STRING","_initStatus",214],"(",")",";",["T_WHITESPACE","\n        ",214],["T_IF","if",215],["T_WHITESPACE"," ",215],"(",["T_VARIABLE","$status",215],")",["T_WHITESPACE"," ",215],"{",["T_WHITESPACE","\n            ",215],["T_TRY","try",216],["T_WHITESPACE"," ",216],"{",["T_WHITESPACE","\n                ",216],["T_STRING","Mage",217],["T_DOUBLE_COLON","::",217],["T_STRING","dispatchEvent",217],"(",["T_CONSTANT_ENCAPSED_STRING","'sales_order_status_unassign_before'",217],",",["T_WHITESPACE"," ",217],["T_ARRAY","array",217],"(",["T_WHITESPACE","\n                    ",217],["T_CONSTANT_ENCAPSED_STRING","'status'",218],["T_WHITESPACE"," ",218],["T_DOUBLE_ARROW","=>",218],["T_WHITESPACE"," ",218],["T_VARIABLE","$status",218],",",["T_WHITESPACE"," ",218],["T_COMMENT","\/\/ string {new,     ...}\n",218],["T_WHITESPACE","                    ",219],["T_CONSTANT_ENCAPSED_STRING","'state'",219],["T_WHITESPACE","  ",219],["T_DOUBLE_ARROW","=>",219],["T_WHITESPACE"," ",219],["T_VARIABLE","$state",219],["T_WHITESPACE","   ",219],["T_COMMENT","\/\/ Model  {Pending, ...}\n",219],["T_WHITESPACE","                ",220],")",")",";",["T_WHITESPACE","\n                ",220],["T_VARIABLE","$status",221],["T_OBJECT_OPERATOR","->",221],["T_STRING","unassignState",221],"(",["T_VARIABLE","$state",221],")",";",["T_WHITESPACE","\n                ",221],["T_VARIABLE","$this",222],["T_OBJECT_OPERATOR","->",222],["T_STRING","_getSession",222],"(",")",["T_OBJECT_OPERATOR","->",222],["T_STRING","addSuccess",222],"(",["T_STRING","Mage",222],["T_DOUBLE_COLON","::",222],["T_STRING","helper",222],"(",["T_CONSTANT_ENCAPSED_STRING","'sales'",222],")",["T_OBJECT_OPERATOR","->",222],["T_STRING","__",222],"(",["T_CONSTANT_ENCAPSED_STRING","'The order status has been unassigned.'",222],")",")",";",["T_WHITESPACE","\n            ",222],"}",["T_WHITESPACE"," ",223],["T_CATCH","catch",223],["T_WHITESPACE"," ",223],"(",["T_STRING","Mage_Core_Exception",223],["T_WHITESPACE"," ",223],["T_VARIABLE","$e",223],")",["T_WHITESPACE"," ",223],"{",["T_WHITESPACE","\n                ",223],["T_VARIABLE","$this",224],["T_OBJECT_OPERATOR","->",224],["T_STRING","_getSession",224],"(",")",["T_OBJECT_OPERATOR","->",224],["T_STRING","addError",224],"(",["T_VARIABLE","$e",224],["T_OBJECT_OPERATOR","->",224],["T_STRING","getMessage",224],"(",")",")",";",["T_WHITESPACE","\n            ",224],"}",["T_WHITESPACE"," ",225],["T_CATCH","catch",225],["T_WHITESPACE"," ",225],"(",["T_STRING","Exception",225],["T_WHITESPACE"," ",225],["T_VARIABLE","$e",225],")",["T_WHITESPACE"," ",225],"{",["T_WHITESPACE","\n                ",225],["T_VARIABLE","$this",226],["T_OBJECT_OPERATOR","->",226],["T_STRING","_getSession",226],"(",")",["T_OBJECT_OPERATOR","->",226],["T_STRING","addException",226],"(",["T_WHITESPACE","\n                    ",226],["T_VARIABLE","$e",227],",",["T_WHITESPACE","\n                    ",227],["T_STRING","Mage",228],["T_DOUBLE_COLON","::",228],["T_STRING","helper",228],"(",["T_CONSTANT_ENCAPSED_STRING","'sales'",228],")",["T_OBJECT_OPERATOR","->",228],["T_STRING","__",228],"(",["T_CONSTANT_ENCAPSED_STRING","'An error occurred while unassigning order status.'",228],")",["T_WHITESPACE","\n                ",228],")",";",["T_WHITESPACE","\n            ",229],"}",["T_WHITESPACE","\n        ",230],"}",["T_WHITESPACE"," ",231],["T_ELSE","else",231],["T_WHITESPACE"," ",231],"{",["T_WHITESPACE","\n            ",231],["T_VARIABLE","$this",232],["T_OBJECT_OPERATOR","->",232],["T_STRING","_getSession",232],"(",")",["T_OBJECT_OPERATOR","->",232],["T_STRING","addError",232],"(",["T_STRING","Mage",232],["T_DOUBLE_COLON","::",232],["T_STRING","helper",232],"(",["T_CONSTANT_ENCAPSED_STRING","'sales'",232],")",["T_OBJECT_OPERATOR","->",232],["T_STRING","__",232],"(",["T_CONSTANT_ENCAPSED_STRING","'Order status does not exist.'",232],")",")",";",["T_WHITESPACE","\n        ",232],"}",["T_WHITESPACE","\n        ",233],["T_VARIABLE","$this",234],["T_OBJECT_OPERATOR","->",234],["T_STRING","_redirect",234],"(",["T_CONSTANT_ENCAPSED_STRING","'*\/*\/'",234],")",";",["T_WHITESPACE","\n    ",234],"}",["T_WHITESPACE","\n\n    ",235],["T_DOC_COMMENT","\/**\n     * Check current user permission on resource and privilege\n     *\n     * @return bool\n     *\/",237],["T_WHITESPACE","\n    ",241],["T_PROTECTED","protected",242],["T_WHITESPACE"," ",242],["T_FUNCTION","function",242],["T_WHITESPACE"," ",242],["T_STRING","_isAllowed",242],"(",")",["T_WHITESPACE","\n    ",242],"{",["T_WHITESPACE","\n        ",243],["T_RETURN","return",244],["T_WHITESPACE"," ",244],["T_STRING","Mage",244],["T_DOUBLE_COLON","::",244],["T_STRING","getSingleton",244],"(",["T_CONSTANT_ENCAPSED_STRING","'admin\/session'",244],")",["T_OBJECT_OPERATOR","->",244],["T_STRING","isAllowed",244],"(",["T_CONSTANT_ENCAPSED_STRING","'system\/order_statuses'",244],")",";",["T_WHITESPACE","\n    ",244],"}",["T_WHITESPACE","\n",245],"}",["T_WHITESPACE","\n",246]]
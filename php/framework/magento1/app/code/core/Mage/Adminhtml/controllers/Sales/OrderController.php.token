[["T_OPEN_TAG","<?php\n",1],["T_DOC_COMMENT","\/**\n * Magento\n *\n * NOTICE OF LICENSE\n *\n * This source file is subject to the Open Software License (OSL 3.0)\n * that is bundled with this package in the file LICENSE.txt.\n * It is also available through the world-wide-web at this URL:\n * http:\/\/opensource.org\/licenses\/osl-3.0.php\n * If you did not receive a copy of the license and are unable to\n * obtain it through the world-wide-web, please send an email\n * to license@magento.com so we can send you a copy immediately.\n *\n * DISCLAIMER\n *\n * Do not edit or add to this file if you wish to upgrade Magento to newer\n * versions in the future. If you wish to customize Magento for your\n * needs please refer to http:\/\/www.magento.com for more information.\n *\n * @category    Mage\n * @package     Mage_Adminhtml\n * @copyright  Copyright (c) 2006-2016 X.commerce, Inc. and affiliates (http:\/\/www.magento.com)\n * @license    http:\/\/opensource.org\/licenses\/osl-3.0.php  Open Software License (OSL 3.0)\n *\/",2],["T_WHITESPACE","\n\n",25],["T_DOC_COMMENT","\/**\n * Adminhtml sales orders controller\n *\n * @category    Mage\n * @package     Mage_Adminhtml\n * @author      Magento Core Team <core@magentocommerce.com>\n *\/",27],["T_WHITESPACE","\n",33],["T_CLASS","class",34],["T_WHITESPACE"," ",34],["T_STRING","Mage_Adminhtml_Sales_OrderController",34],["T_WHITESPACE"," ",34],["T_EXTENDS","extends",34],["T_WHITESPACE"," ",34],["T_STRING","Mage_Adminhtml_Controller_Action",34],["T_WHITESPACE","\n",34],"{",["T_WHITESPACE","\n    ",35],["T_DOC_COMMENT","\/**\n     * Array of actions which can be processed without secret key validation\n     *\n     * @var array\n     *\/",36],["T_WHITESPACE","\n    ",40],["T_PROTECTED","protected",41],["T_WHITESPACE"," ",41],["T_VARIABLE","$_publicActions",41],["T_WHITESPACE"," ",41],"=",["T_WHITESPACE"," ",41],["T_ARRAY","array",41],"(",["T_CONSTANT_ENCAPSED_STRING","'view'",41],",",["T_WHITESPACE"," ",41],["T_CONSTANT_ENCAPSED_STRING","'index'",41],")",";",["T_WHITESPACE","\n\n    ",41],["T_DOC_COMMENT","\/**\n     * Additional initialization\n     *\n     *\/",43],["T_WHITESPACE","\n    ",46],["T_PROTECTED","protected",47],["T_WHITESPACE"," ",47],["T_FUNCTION","function",47],["T_WHITESPACE"," ",47],["T_STRING","_construct",47],"(",")",["T_WHITESPACE","\n    ",47],"{",["T_WHITESPACE","\n        ",48],["T_VARIABLE","$this",49],["T_OBJECT_OPERATOR","->",49],["T_STRING","setUsedModuleName",49],"(",["T_CONSTANT_ENCAPSED_STRING","'Mage_Sales'",49],")",";",["T_WHITESPACE","\n    ",49],"}",["T_WHITESPACE","\n\n    ",50],["T_DOC_COMMENT","\/**\n     * Init layout, menu and breadcrumb\n     *\n     * @return Mage_Adminhtml_Sales_OrderController\n     *\/",52],["T_WHITESPACE","\n    ",56],["T_PROTECTED","protected",57],["T_WHITESPACE"," ",57],["T_FUNCTION","function",57],["T_WHITESPACE"," ",57],["T_STRING","_initAction",57],"(",")",["T_WHITESPACE","\n    ",57],"{",["T_WHITESPACE","\n        ",58],["T_VARIABLE","$this",59],["T_OBJECT_OPERATOR","->",59],["T_STRING","loadLayout",59],"(",")",["T_WHITESPACE","\n            ",59],["T_OBJECT_OPERATOR","->",60],["T_STRING","_setActiveMenu",60],"(",["T_CONSTANT_ENCAPSED_STRING","'sales\/order'",60],")",["T_WHITESPACE","\n            ",60],["T_OBJECT_OPERATOR","->",61],["T_STRING","_addBreadcrumb",61],"(",["T_VARIABLE","$this",61],["T_OBJECT_OPERATOR","->",61],["T_STRING","__",61],"(",["T_CONSTANT_ENCAPSED_STRING","'Sales'",61],")",",",["T_WHITESPACE"," ",61],["T_VARIABLE","$this",61],["T_OBJECT_OPERATOR","->",61],["T_STRING","__",61],"(",["T_CONSTANT_ENCAPSED_STRING","'Sales'",61],")",")",["T_WHITESPACE","\n            ",61],["T_OBJECT_OPERATOR","->",62],["T_STRING","_addBreadcrumb",62],"(",["T_VARIABLE","$this",62],["T_OBJECT_OPERATOR","->",62],["T_STRING","__",62],"(",["T_CONSTANT_ENCAPSED_STRING","'Orders'",62],")",",",["T_WHITESPACE"," ",62],["T_VARIABLE","$this",62],["T_OBJECT_OPERATOR","->",62],["T_STRING","__",62],"(",["T_CONSTANT_ENCAPSED_STRING","'Orders'",62],")",")",";",["T_WHITESPACE","\n        ",62],["T_RETURN","return",63],["T_WHITESPACE"," ",63],["T_VARIABLE","$this",63],";",["T_WHITESPACE","\n    ",63],"}",["T_WHITESPACE","\n\n    ",64],["T_DOC_COMMENT","\/**\n     * Initialize order model instance\n     *\n     * @return Mage_Sales_Model_Order || false\n     *\/",66],["T_WHITESPACE","\n    ",70],["T_PROTECTED","protected",71],["T_WHITESPACE"," ",71],["T_FUNCTION","function",71],["T_WHITESPACE"," ",71],["T_STRING","_initOrder",71],"(",")",["T_WHITESPACE","\n    ",71],"{",["T_WHITESPACE","\n        ",72],["T_VARIABLE","$id",73],["T_WHITESPACE"," ",73],"=",["T_WHITESPACE"," ",73],["T_VARIABLE","$this",73],["T_OBJECT_OPERATOR","->",73],["T_STRING","getRequest",73],"(",")",["T_OBJECT_OPERATOR","->",73],["T_STRING","getParam",73],"(",["T_CONSTANT_ENCAPSED_STRING","'order_id'",73],")",";",["T_WHITESPACE","\n        ",73],["T_VARIABLE","$order",74],["T_WHITESPACE"," ",74],"=",["T_WHITESPACE"," ",74],["T_STRING","Mage",74],["T_DOUBLE_COLON","::",74],["T_STRING","getModel",74],"(",["T_CONSTANT_ENCAPSED_STRING","'sales\/order'",74],")",["T_OBJECT_OPERATOR","->",74],["T_STRING","load",74],"(",["T_VARIABLE","$id",74],")",";",["T_WHITESPACE","\n\n        ",74],["T_IF","if",76],["T_WHITESPACE"," ",76],"(","!",["T_VARIABLE","$order",76],["T_OBJECT_OPERATOR","->",76],["T_STRING","getId",76],"(",")",")",["T_WHITESPACE"," ",76],"{",["T_WHITESPACE","\n            ",76],["T_VARIABLE","$this",77],["T_OBJECT_OPERATOR","->",77],["T_STRING","_getSession",77],"(",")",["T_OBJECT_OPERATOR","->",77],["T_STRING","addError",77],"(",["T_VARIABLE","$this",77],["T_OBJECT_OPERATOR","->",77],["T_STRING","__",77],"(",["T_CONSTANT_ENCAPSED_STRING","'This order no longer exists.'",77],")",")",";",["T_WHITESPACE","\n            ",77],["T_VARIABLE","$this",78],["T_OBJECT_OPERATOR","->",78],["T_STRING","_redirect",78],"(",["T_CONSTANT_ENCAPSED_STRING","'*\/*\/'",78],")",";",["T_WHITESPACE","\n            ",78],["T_VARIABLE","$this",79],["T_OBJECT_OPERATOR","->",79],["T_STRING","setFlag",79],"(",["T_CONSTANT_ENCAPSED_STRING","''",79],",",["T_WHITESPACE"," ",79],["T_STRING","self",79],["T_DOUBLE_COLON","::",79],["T_STRING","FLAG_NO_DISPATCH",79],",",["T_WHITESPACE"," ",79],["T_STRING","true",79],")",";",["T_WHITESPACE","\n            ",79],["T_RETURN","return",80],["T_WHITESPACE"," ",80],["T_STRING","false",80],";",["T_WHITESPACE","\n        ",80],"}",["T_WHITESPACE","\n        ",81],["T_STRING","Mage",82],["T_DOUBLE_COLON","::",82],["T_STRING","register",82],"(",["T_CONSTANT_ENCAPSED_STRING","'sales_order'",82],",",["T_WHITESPACE"," ",82],["T_VARIABLE","$order",82],")",";",["T_WHITESPACE","\n        ",82],["T_STRING","Mage",83],["T_DOUBLE_COLON","::",83],["T_STRING","register",83],"(",["T_CONSTANT_ENCAPSED_STRING","'current_order'",83],",",["T_WHITESPACE"," ",83],["T_VARIABLE","$order",83],")",";",["T_WHITESPACE","\n        ",83],["T_RETURN","return",84],["T_WHITESPACE"," ",84],["T_VARIABLE","$order",84],";",["T_WHITESPACE","\n    ",84],"}",["T_WHITESPACE","\n\n    ",85],["T_DOC_COMMENT","\/**\n     * Orders grid\n     *\/",87],["T_WHITESPACE","\n    ",89],["T_PUBLIC","public",90],["T_WHITESPACE"," ",90],["T_FUNCTION","function",90],["T_WHITESPACE"," ",90],["T_STRING","indexAction",90],"(",")",["T_WHITESPACE","\n    ",90],"{",["T_WHITESPACE","\n        ",91],["T_VARIABLE","$this",92],["T_OBJECT_OPERATOR","->",92],["T_STRING","_title",92],"(",["T_VARIABLE","$this",92],["T_OBJECT_OPERATOR","->",92],["T_STRING","__",92],"(",["T_CONSTANT_ENCAPSED_STRING","'Sales'",92],")",")",["T_OBJECT_OPERATOR","->",92],["T_STRING","_title",92],"(",["T_VARIABLE","$this",92],["T_OBJECT_OPERATOR","->",92],["T_STRING","__",92],"(",["T_CONSTANT_ENCAPSED_STRING","'Orders'",92],")",")",";",["T_WHITESPACE","\n\n        ",92],["T_VARIABLE","$this",94],["T_OBJECT_OPERATOR","->",94],["T_STRING","_initAction",94],"(",")",["T_WHITESPACE","\n            ",94],["T_OBJECT_OPERATOR","->",95],["T_STRING","renderLayout",95],"(",")",";",["T_WHITESPACE","\n    ",95],"}",["T_WHITESPACE","\n\n    ",96],["T_DOC_COMMENT","\/**\n     * Order grid\n     *\/",98],["T_WHITESPACE","\n    ",100],["T_PUBLIC","public",101],["T_WHITESPACE"," ",101],["T_FUNCTION","function",101],["T_WHITESPACE"," ",101],["T_STRING","gridAction",101],"(",")",["T_WHITESPACE","\n    ",101],"{",["T_WHITESPACE","\n        ",102],["T_VARIABLE","$this",103],["T_OBJECT_OPERATOR","->",103],["T_STRING","loadLayout",103],"(",["T_STRING","false",103],")",";",["T_WHITESPACE","\n        ",103],["T_VARIABLE","$this",104],["T_OBJECT_OPERATOR","->",104],["T_STRING","renderLayout",104],"(",")",";",["T_WHITESPACE","\n    ",104],"}",["T_WHITESPACE","\n\n    ",105],["T_DOC_COMMENT","\/**\n     * View order detale\n     *\/",107],["T_WHITESPACE","\n    ",109],["T_PUBLIC","public",110],["T_WHITESPACE"," ",110],["T_FUNCTION","function",110],["T_WHITESPACE"," ",110],["T_STRING","viewAction",110],"(",")",["T_WHITESPACE","\n    ",110],"{",["T_WHITESPACE","\n        ",111],["T_VARIABLE","$this",112],["T_OBJECT_OPERATOR","->",112],["T_STRING","_title",112],"(",["T_VARIABLE","$this",112],["T_OBJECT_OPERATOR","->",112],["T_STRING","__",112],"(",["T_CONSTANT_ENCAPSED_STRING","'Sales'",112],")",")",["T_OBJECT_OPERATOR","->",112],["T_STRING","_title",112],"(",["T_VARIABLE","$this",112],["T_OBJECT_OPERATOR","->",112],["T_STRING","__",112],"(",["T_CONSTANT_ENCAPSED_STRING","'Orders'",112],")",")",";",["T_WHITESPACE","\n\n        ",112],["T_VARIABLE","$order",114],["T_WHITESPACE"," ",114],"=",["T_WHITESPACE"," ",114],["T_VARIABLE","$this",114],["T_OBJECT_OPERATOR","->",114],["T_STRING","_initOrder",114],"(",")",";",["T_WHITESPACE","\n        ",114],["T_IF","if",115],["T_WHITESPACE"," ",115],"(",["T_VARIABLE","$order",115],")",["T_WHITESPACE"," ",115],"{",["T_WHITESPACE","\n\n            ",115],["T_VARIABLE","$isActionsNotPermitted",117],["T_WHITESPACE"," ",117],"=",["T_WHITESPACE"," ",117],["T_VARIABLE","$order",117],["T_OBJECT_OPERATOR","->",117],["T_STRING","getActionFlag",117],"(",["T_WHITESPACE","\n                ",117],["T_STRING","Mage_Sales_Model_Order",118],["T_DOUBLE_COLON","::",118],["T_STRING","ACTION_FLAG_PRODUCTS_PERMISSION_DENIED",118],["T_WHITESPACE","\n            ",118],")",";",["T_WHITESPACE","\n            ",119],["T_IF","if",120],["T_WHITESPACE"," ",120],"(",["T_VARIABLE","$isActionsNotPermitted",120],")",["T_WHITESPACE"," ",120],"{",["T_WHITESPACE","\n                ",120],["T_VARIABLE","$this",121],["T_OBJECT_OPERATOR","->",121],["T_STRING","_getSession",121],"(",")",["T_OBJECT_OPERATOR","->",121],["T_STRING","addError",121],"(",["T_VARIABLE","$this",121],["T_OBJECT_OPERATOR","->",121],["T_STRING","__",121],"(",["T_CONSTANT_ENCAPSED_STRING","'You don\\'t have permissions to manage this order because of one or more products are not permitted for your website.'",121],")",")",";",["T_WHITESPACE","\n            ",121],"}",["T_WHITESPACE","\n\n            ",122],["T_VARIABLE","$this",124],["T_OBJECT_OPERATOR","->",124],["T_STRING","_initAction",124],"(",")",";",["T_WHITESPACE","\n\n            ",124],["T_VARIABLE","$this",126],["T_OBJECT_OPERATOR","->",126],["T_STRING","_title",126],"(",["T_STRING","sprintf",126],"(",["T_CONSTANT_ENCAPSED_STRING","\"#%s\"",126],",",["T_WHITESPACE"," ",126],["T_VARIABLE","$order",126],["T_OBJECT_OPERATOR","->",126],["T_STRING","getRealOrderId",126],"(",")",")",")",";",["T_WHITESPACE","\n\n            ",126],["T_VARIABLE","$this",128],["T_OBJECT_OPERATOR","->",128],["T_STRING","renderLayout",128],"(",")",";",["T_WHITESPACE","\n        ",128],"}",["T_WHITESPACE","\n    ",129],"}",["T_WHITESPACE","\n\n    ",130],["T_DOC_COMMENT","\/**\n     * Notify user\n     *\/",132],["T_WHITESPACE","\n    ",134],["T_PUBLIC","public",135],["T_WHITESPACE"," ",135],["T_FUNCTION","function",135],["T_WHITESPACE"," ",135],["T_STRING","emailAction",135],"(",")",["T_WHITESPACE","\n    ",135],"{",["T_WHITESPACE","\n        ",136],["T_IF","if",137],["T_WHITESPACE"," ",137],"(",["T_VARIABLE","$order",137],["T_WHITESPACE"," ",137],"=",["T_WHITESPACE"," ",137],["T_VARIABLE","$this",137],["T_OBJECT_OPERATOR","->",137],["T_STRING","_initOrder",137],"(",")",")",["T_WHITESPACE"," ",137],"{",["T_WHITESPACE","\n            ",137],["T_TRY","try",138],["T_WHITESPACE"," ",138],"{",["T_WHITESPACE","\n                ",138],["T_VARIABLE","$order",139],["T_OBJECT_OPERATOR","->",139],["T_STRING","sendNewOrderEmail",139],"(",")",";",["T_WHITESPACE","\n                ",139],["T_VARIABLE","$historyItem",140],["T_WHITESPACE"," ",140],"=",["T_WHITESPACE"," ",140],["T_STRING","Mage",140],["T_DOUBLE_COLON","::",140],["T_STRING","getResourceModel",140],"(",["T_CONSTANT_ENCAPSED_STRING","'sales\/order_status_history_collection'",140],")",["T_WHITESPACE","\n                    ",140],["T_OBJECT_OPERATOR","->",141],["T_STRING","getUnnotifiedForInstance",141],"(",["T_VARIABLE","$order",141],",",["T_WHITESPACE"," ",141],["T_STRING","Mage_Sales_Model_Order",141],["T_DOUBLE_COLON","::",141],["T_STRING","HISTORY_ENTITY_NAME",141],")",";",["T_WHITESPACE","\n                ",141],["T_IF","if",142],["T_WHITESPACE"," ",142],"(",["T_VARIABLE","$historyItem",142],")",["T_WHITESPACE"," ",142],"{",["T_WHITESPACE","\n                    ",142],["T_VARIABLE","$historyItem",143],["T_OBJECT_OPERATOR","->",143],["T_STRING","setIsCustomerNotified",143],"(",["T_LNUMBER","1",143],")",";",["T_WHITESPACE","\n                    ",143],["T_VARIABLE","$historyItem",144],["T_OBJECT_OPERATOR","->",144],["T_STRING","save",144],"(",")",";",["T_WHITESPACE","\n                ",144],"}",["T_WHITESPACE","\n                ",145],["T_VARIABLE","$this",146],["T_OBJECT_OPERATOR","->",146],["T_STRING","_getSession",146],"(",")",["T_OBJECT_OPERATOR","->",146],["T_STRING","addSuccess",146],"(",["T_VARIABLE","$this",146],["T_OBJECT_OPERATOR","->",146],["T_STRING","__",146],"(",["T_CONSTANT_ENCAPSED_STRING","'The order email has been sent.'",146],")",")",";",["T_WHITESPACE","\n            ",146],"}",["T_WHITESPACE"," ",147],["T_CATCH","catch",147],["T_WHITESPACE"," ",147],"(",["T_STRING","Mage_Core_Exception",147],["T_WHITESPACE"," ",147],["T_VARIABLE","$e",147],")",["T_WHITESPACE"," ",147],"{",["T_WHITESPACE","\n                ",147],["T_VARIABLE","$this",148],["T_OBJECT_OPERATOR","->",148],["T_STRING","_getSession",148],"(",")",["T_OBJECT_OPERATOR","->",148],["T_STRING","addError",148],"(",["T_VARIABLE","$e",148],["T_OBJECT_OPERATOR","->",148],["T_STRING","getMessage",148],"(",")",")",";",["T_WHITESPACE","\n            ",148],"}",["T_WHITESPACE"," ",149],["T_CATCH","catch",149],["T_WHITESPACE"," ",149],"(",["T_STRING","Exception",149],["T_WHITESPACE"," ",149],["T_VARIABLE","$e",149],")",["T_WHITESPACE"," ",149],"{",["T_WHITESPACE","\n                ",149],["T_VARIABLE","$this",150],["T_OBJECT_OPERATOR","->",150],["T_STRING","_getSession",150],"(",")",["T_OBJECT_OPERATOR","->",150],["T_STRING","addError",150],"(",["T_VARIABLE","$this",150],["T_OBJECT_OPERATOR","->",150],["T_STRING","__",150],"(",["T_CONSTANT_ENCAPSED_STRING","'Failed to send the order email.'",150],")",")",";",["T_WHITESPACE","\n                ",150],["T_STRING","Mage",151],["T_DOUBLE_COLON","::",151],["T_STRING","logException",151],"(",["T_VARIABLE","$e",151],")",";",["T_WHITESPACE","\n            ",151],"}",["T_WHITESPACE","\n        ",152],"}",["T_WHITESPACE","\n        ",153],["T_VARIABLE","$this",154],["T_OBJECT_OPERATOR","->",154],["T_STRING","_redirect",154],"(",["T_CONSTANT_ENCAPSED_STRING","'*\/sales_order\/view'",154],",",["T_WHITESPACE"," ",154],["T_ARRAY","array",154],"(",["T_CONSTANT_ENCAPSED_STRING","'order_id'",154],["T_WHITESPACE"," ",154],["T_DOUBLE_ARROW","=>",154],["T_WHITESPACE"," ",154],["T_VARIABLE","$order",154],["T_OBJECT_OPERATOR","->",154],["T_STRING","getId",154],"(",")",")",")",";",["T_WHITESPACE","\n    ",154],"}",["T_WHITESPACE","\n    ",155],["T_DOC_COMMENT","\/**\n     * Cancel order\n     *\/",156],["T_WHITESPACE","\n    ",158],["T_PUBLIC","public",159],["T_WHITESPACE"," ",159],["T_FUNCTION","function",159],["T_WHITESPACE"," ",159],["T_STRING","cancelAction",159],"(",")",["T_WHITESPACE","\n    ",159],"{",["T_WHITESPACE","\n        ",160],["T_IF","if",161],["T_WHITESPACE"," ",161],"(",["T_VARIABLE","$order",161],["T_WHITESPACE"," ",161],"=",["T_WHITESPACE"," ",161],["T_VARIABLE","$this",161],["T_OBJECT_OPERATOR","->",161],["T_STRING","_initOrder",161],"(",")",")",["T_WHITESPACE"," ",161],"{",["T_WHITESPACE","\n            ",161],["T_TRY","try",162],["T_WHITESPACE"," ",162],"{",["T_WHITESPACE","\n                ",162],["T_VARIABLE","$order",163],["T_OBJECT_OPERATOR","->",163],["T_STRING","cancel",163],"(",")",["T_WHITESPACE","\n                    ",163],["T_OBJECT_OPERATOR","->",164],["T_STRING","save",164],"(",")",";",["T_WHITESPACE","\n                ",164],["T_VARIABLE","$this",165],["T_OBJECT_OPERATOR","->",165],["T_STRING","_getSession",165],"(",")",["T_OBJECT_OPERATOR","->",165],["T_STRING","addSuccess",165],"(",["T_WHITESPACE","\n                    ",165],["T_VARIABLE","$this",166],["T_OBJECT_OPERATOR","->",166],["T_STRING","__",166],"(",["T_CONSTANT_ENCAPSED_STRING","'The order has been cancelled.'",166],")",["T_WHITESPACE","\n                ",166],")",";",["T_WHITESPACE","\n            ",167],"}",["T_WHITESPACE","\n            ",168],["T_CATCH","catch",169],["T_WHITESPACE"," ",169],"(",["T_STRING","Mage_Core_Exception",169],["T_WHITESPACE"," ",169],["T_VARIABLE","$e",169],")",["T_WHITESPACE"," ",169],"{",["T_WHITESPACE","\n                ",169],["T_VARIABLE","$this",170],["T_OBJECT_OPERATOR","->",170],["T_STRING","_getSession",170],"(",")",["T_OBJECT_OPERATOR","->",170],["T_STRING","addError",170],"(",["T_VARIABLE","$e",170],["T_OBJECT_OPERATOR","->",170],["T_STRING","getMessage",170],"(",")",")",";",["T_WHITESPACE","\n            ",170],"}",["T_WHITESPACE","\n            ",171],["T_CATCH","catch",172],["T_WHITESPACE"," ",172],"(",["T_STRING","Exception",172],["T_WHITESPACE"," ",172],["T_VARIABLE","$e",172],")",["T_WHITESPACE"," ",172],"{",["T_WHITESPACE","\n                ",172],["T_VARIABLE","$this",173],["T_OBJECT_OPERATOR","->",173],["T_STRING","_getSession",173],"(",")",["T_OBJECT_OPERATOR","->",173],["T_STRING","addError",173],"(",["T_VARIABLE","$this",173],["T_OBJECT_OPERATOR","->",173],["T_STRING","__",173],"(",["T_CONSTANT_ENCAPSED_STRING","'The order has not been cancelled.'",173],")",")",";",["T_WHITESPACE","\n                ",173],["T_STRING","Mage",174],["T_DOUBLE_COLON","::",174],["T_STRING","logException",174],"(",["T_VARIABLE","$e",174],")",";",["T_WHITESPACE","\n            ",174],"}",["T_WHITESPACE","\n            ",175],["T_VARIABLE","$this",176],["T_OBJECT_OPERATOR","->",176],["T_STRING","_redirect",176],"(",["T_CONSTANT_ENCAPSED_STRING","'*\/sales_order\/view'",176],",",["T_WHITESPACE"," ",176],["T_ARRAY","array",176],"(",["T_CONSTANT_ENCAPSED_STRING","'order_id'",176],["T_WHITESPACE"," ",176],["T_DOUBLE_ARROW","=>",176],["T_WHITESPACE"," ",176],["T_VARIABLE","$order",176],["T_OBJECT_OPERATOR","->",176],["T_STRING","getId",176],"(",")",")",")",";",["T_WHITESPACE","\n        ",176],"}",["T_WHITESPACE","\n    ",177],"}",["T_WHITESPACE","\n\n    ",178],["T_DOC_COMMENT","\/**\n     * Hold order\n     *\/",180],["T_WHITESPACE","\n    ",182],["T_PUBLIC","public",183],["T_WHITESPACE"," ",183],["T_FUNCTION","function",183],["T_WHITESPACE"," ",183],["T_STRING","holdAction",183],"(",")",["T_WHITESPACE","\n    ",183],"{",["T_WHITESPACE","\n        ",184],["T_IF","if",185],["T_WHITESPACE"," ",185],"(",["T_VARIABLE","$order",185],["T_WHITESPACE"," ",185],"=",["T_WHITESPACE"," ",185],["T_VARIABLE","$this",185],["T_OBJECT_OPERATOR","->",185],["T_STRING","_initOrder",185],"(",")",")",["T_WHITESPACE"," ",185],"{",["T_WHITESPACE","\n            ",185],["T_TRY","try",186],["T_WHITESPACE"," ",186],"{",["T_WHITESPACE","\n                ",186],["T_VARIABLE","$order",187],["T_OBJECT_OPERATOR","->",187],["T_STRING","hold",187],"(",")",["T_WHITESPACE","\n                    ",187],["T_OBJECT_OPERATOR","->",188],["T_STRING","save",188],"(",")",";",["T_WHITESPACE","\n                ",188],["T_VARIABLE","$this",189],["T_OBJECT_OPERATOR","->",189],["T_STRING","_getSession",189],"(",")",["T_OBJECT_OPERATOR","->",189],["T_STRING","addSuccess",189],"(",["T_WHITESPACE","\n                    ",189],["T_VARIABLE","$this",190],["T_OBJECT_OPERATOR","->",190],["T_STRING","__",190],"(",["T_CONSTANT_ENCAPSED_STRING","'The order has been put on hold.'",190],")",["T_WHITESPACE","\n                ",190],")",";",["T_WHITESPACE","\n            ",191],"}",["T_WHITESPACE","\n            ",192],["T_CATCH","catch",193],["T_WHITESPACE"," ",193],"(",["T_STRING","Mage_Core_Exception",193],["T_WHITESPACE"," ",193],["T_VARIABLE","$e",193],")",["T_WHITESPACE"," ",193],"{",["T_WHITESPACE","\n                ",193],["T_VARIABLE","$this",194],["T_OBJECT_OPERATOR","->",194],["T_STRING","_getSession",194],"(",")",["T_OBJECT_OPERATOR","->",194],["T_STRING","addError",194],"(",["T_VARIABLE","$e",194],["T_OBJECT_OPERATOR","->",194],["T_STRING","getMessage",194],"(",")",")",";",["T_WHITESPACE","\n            ",194],"}",["T_WHITESPACE","\n            ",195],["T_CATCH","catch",196],["T_WHITESPACE"," ",196],"(",["T_STRING","Exception",196],["T_WHITESPACE"," ",196],["T_VARIABLE","$e",196],")",["T_WHITESPACE"," ",196],"{",["T_WHITESPACE","\n                ",196],["T_VARIABLE","$this",197],["T_OBJECT_OPERATOR","->",197],["T_STRING","_getSession",197],"(",")",["T_OBJECT_OPERATOR","->",197],["T_STRING","addError",197],"(",["T_VARIABLE","$this",197],["T_OBJECT_OPERATOR","->",197],["T_STRING","__",197],"(",["T_CONSTANT_ENCAPSED_STRING","'The order was not put on hold.'",197],")",")",";",["T_WHITESPACE","\n            ",197],"}",["T_WHITESPACE","\n            ",198],["T_VARIABLE","$this",199],["T_OBJECT_OPERATOR","->",199],["T_STRING","_redirect",199],"(",["T_CONSTANT_ENCAPSED_STRING","'*\/sales_order\/view'",199],",",["T_WHITESPACE"," ",199],["T_ARRAY","array",199],"(",["T_CONSTANT_ENCAPSED_STRING","'order_id'",199],["T_WHITESPACE"," ",199],["T_DOUBLE_ARROW","=>",199],["T_WHITESPACE"," ",199],["T_VARIABLE","$order",199],["T_OBJECT_OPERATOR","->",199],["T_STRING","getId",199],"(",")",")",")",";",["T_WHITESPACE","\n        ",199],"}",["T_WHITESPACE","\n    ",200],"}",["T_WHITESPACE","\n\n    ",201],["T_DOC_COMMENT","\/**\n     * Unhold order\n     *\/",203],["T_WHITESPACE","\n    ",205],["T_PUBLIC","public",206],["T_WHITESPACE"," ",206],["T_FUNCTION","function",206],["T_WHITESPACE"," ",206],["T_STRING","unholdAction",206],"(",")",["T_WHITESPACE","\n    ",206],"{",["T_WHITESPACE","\n        ",207],["T_IF","if",208],["T_WHITESPACE"," ",208],"(",["T_VARIABLE","$order",208],["T_WHITESPACE"," ",208],"=",["T_WHITESPACE"," ",208],["T_VARIABLE","$this",208],["T_OBJECT_OPERATOR","->",208],["T_STRING","_initOrder",208],"(",")",")",["T_WHITESPACE"," ",208],"{",["T_WHITESPACE","\n            ",208],["T_TRY","try",209],["T_WHITESPACE"," ",209],"{",["T_WHITESPACE","\n                ",209],["T_VARIABLE","$order",210],["T_OBJECT_OPERATOR","->",210],["T_STRING","unhold",210],"(",")",["T_WHITESPACE","\n                    ",210],["T_OBJECT_OPERATOR","->",211],["T_STRING","save",211],"(",")",";",["T_WHITESPACE","\n                ",211],["T_VARIABLE","$this",212],["T_OBJECT_OPERATOR","->",212],["T_STRING","_getSession",212],"(",")",["T_OBJECT_OPERATOR","->",212],["T_STRING","addSuccess",212],"(",["T_WHITESPACE","\n                    ",212],["T_VARIABLE","$this",213],["T_OBJECT_OPERATOR","->",213],["T_STRING","__",213],"(",["T_CONSTANT_ENCAPSED_STRING","'The order has been released from holding status.'",213],")",["T_WHITESPACE","\n                ",213],")",";",["T_WHITESPACE","\n            ",214],"}",["T_WHITESPACE","\n            ",215],["T_CATCH","catch",216],["T_WHITESPACE"," ",216],"(",["T_STRING","Mage_Core_Exception",216],["T_WHITESPACE"," ",216],["T_VARIABLE","$e",216],")",["T_WHITESPACE"," ",216],"{",["T_WHITESPACE","\n                ",216],["T_VARIABLE","$this",217],["T_OBJECT_OPERATOR","->",217],["T_STRING","_getSession",217],"(",")",["T_OBJECT_OPERATOR","->",217],["T_STRING","addError",217],"(",["T_VARIABLE","$e",217],["T_OBJECT_OPERATOR","->",217],["T_STRING","getMessage",217],"(",")",")",";",["T_WHITESPACE","\n            ",217],"}",["T_WHITESPACE","\n            ",218],["T_CATCH","catch",219],["T_WHITESPACE"," ",219],"(",["T_STRING","Exception",219],["T_WHITESPACE"," ",219],["T_VARIABLE","$e",219],")",["T_WHITESPACE"," ",219],"{",["T_WHITESPACE","\n                ",219],["T_VARIABLE","$this",220],["T_OBJECT_OPERATOR","->",220],["T_STRING","_getSession",220],"(",")",["T_OBJECT_OPERATOR","->",220],["T_STRING","addError",220],"(",["T_VARIABLE","$this",220],["T_OBJECT_OPERATOR","->",220],["T_STRING","__",220],"(",["T_CONSTANT_ENCAPSED_STRING","'The order was not unheld.'",220],")",")",";",["T_WHITESPACE","\n            ",220],"}",["T_WHITESPACE","\n            ",221],["T_VARIABLE","$this",222],["T_OBJECT_OPERATOR","->",222],["T_STRING","_redirect",222],"(",["T_CONSTANT_ENCAPSED_STRING","'*\/sales_order\/view'",222],",",["T_WHITESPACE"," ",222],["T_ARRAY","array",222],"(",["T_CONSTANT_ENCAPSED_STRING","'order_id'",222],["T_WHITESPACE"," ",222],["T_DOUBLE_ARROW","=>",222],["T_WHITESPACE"," ",222],["T_VARIABLE","$order",222],["T_OBJECT_OPERATOR","->",222],["T_STRING","getId",222],"(",")",")",")",";",["T_WHITESPACE","\n        ",222],"}",["T_WHITESPACE","\n    ",223],"}",["T_WHITESPACE","\n\n    ",224],["T_DOC_COMMENT","\/**\n     * Manage payment state\n     *\n     * Either denies or approves a payment that is in \"review\" state\n     *\/",226],["T_WHITESPACE","\n    ",230],["T_PUBLIC","public",231],["T_WHITESPACE"," ",231],["T_FUNCTION","function",231],["T_WHITESPACE"," ",231],["T_STRING","reviewPaymentAction",231],"(",")",["T_WHITESPACE","\n    ",231],"{",["T_WHITESPACE","\n        ",232],["T_TRY","try",233],["T_WHITESPACE"," ",233],"{",["T_WHITESPACE","\n            ",233],["T_IF","if",234],["T_WHITESPACE"," ",234],"(","!",["T_VARIABLE","$order",234],["T_WHITESPACE"," ",234],"=",["T_WHITESPACE"," ",234],["T_VARIABLE","$this",234],["T_OBJECT_OPERATOR","->",234],["T_STRING","_initOrder",234],"(",")",")",["T_WHITESPACE"," ",234],"{",["T_WHITESPACE","\n                ",234],["T_RETURN","return",235],";",["T_WHITESPACE","\n            ",235],"}",["T_WHITESPACE","\n            ",236],["T_VARIABLE","$action",237],["T_WHITESPACE"," ",237],"=",["T_WHITESPACE"," ",237],["T_VARIABLE","$this",237],["T_OBJECT_OPERATOR","->",237],["T_STRING","getRequest",237],"(",")",["T_OBJECT_OPERATOR","->",237],["T_STRING","getParam",237],"(",["T_CONSTANT_ENCAPSED_STRING","'action'",237],",",["T_WHITESPACE"," ",237],["T_CONSTANT_ENCAPSED_STRING","''",237],")",";",["T_WHITESPACE","\n            ",237],["T_SWITCH","switch",238],["T_WHITESPACE"," ",238],"(",["T_VARIABLE","$action",238],")",["T_WHITESPACE"," ",238],"{",["T_WHITESPACE","\n                ",238],["T_CASE","case",239],["T_WHITESPACE"," ",239],["T_CONSTANT_ENCAPSED_STRING","'accept'",239],":",["T_WHITESPACE","\n                    ",239],["T_VARIABLE","$order",240],["T_OBJECT_OPERATOR","->",240],["T_STRING","getPayment",240],"(",")",["T_OBJECT_OPERATOR","->",240],["T_STRING","accept",240],"(",")",";",["T_WHITESPACE","\n                    ",240],["T_VARIABLE","$message",241],["T_WHITESPACE"," ",241],"=",["T_WHITESPACE"," ",241],["T_VARIABLE","$this",241],["T_OBJECT_OPERATOR","->",241],["T_STRING","__",241],"(",["T_CONSTANT_ENCAPSED_STRING","'The payment has been accepted.'",241],")",";",["T_WHITESPACE","\n                    ",241],["T_BREAK","break",242],";",["T_WHITESPACE","\n                ",242],["T_CASE","case",243],["T_WHITESPACE"," ",243],["T_CONSTANT_ENCAPSED_STRING","'deny'",243],":",["T_WHITESPACE","\n                    ",243],["T_VARIABLE","$order",244],["T_OBJECT_OPERATOR","->",244],["T_STRING","getPayment",244],"(",")",["T_OBJECT_OPERATOR","->",244],["T_STRING","deny",244],"(",")",";",["T_WHITESPACE","\n                    ",244],["T_VARIABLE","$message",245],["T_WHITESPACE"," ",245],"=",["T_WHITESPACE"," ",245],["T_VARIABLE","$this",245],["T_OBJECT_OPERATOR","->",245],["T_STRING","__",245],"(",["T_CONSTANT_ENCAPSED_STRING","'The payment has been denied.'",245],")",";",["T_WHITESPACE","\n                    ",245],["T_BREAK","break",246],";",["T_WHITESPACE","\n                ",246],["T_CASE","case",247],["T_WHITESPACE"," ",247],["T_CONSTANT_ENCAPSED_STRING","'update'",247],":",["T_WHITESPACE","\n                    ",247],["T_VARIABLE","$order",248],["T_OBJECT_OPERATOR","->",248],["T_STRING","getPayment",248],"(",")",["T_WHITESPACE","\n                        ",248],["T_OBJECT_OPERATOR","->",249],["T_STRING","registerPaymentReviewAction",249],"(",["T_STRING","Mage_Sales_Model_Order_Payment",249],["T_DOUBLE_COLON","::",249],["T_STRING","REVIEW_ACTION_UPDATE",249],",",["T_WHITESPACE"," ",249],["T_STRING","true",249],")",";",["T_WHITESPACE","\n                    ",249],["T_VARIABLE","$message",250],["T_WHITESPACE"," ",250],"=",["T_WHITESPACE"," ",250],["T_VARIABLE","$this",250],["T_OBJECT_OPERATOR","->",250],["T_STRING","__",250],"(",["T_CONSTANT_ENCAPSED_STRING","'Payment update has been made.'",250],")",";",["T_WHITESPACE","\n                    ",250],["T_BREAK","break",251],";",["T_WHITESPACE","\n                ",251],["T_DEFAULT","default",252],":",["T_WHITESPACE","\n                    ",252],["T_THROW","throw",253],["T_WHITESPACE"," ",253],["T_NEW","new",253],["T_WHITESPACE"," ",253],["T_STRING","Exception",253],"(",["T_STRING","sprintf",253],"(",["T_CONSTANT_ENCAPSED_STRING","'Action \"%s\" is not supported.'",253],",",["T_WHITESPACE"," ",253],["T_VARIABLE","$action",253],")",")",";",["T_WHITESPACE","\n            ",253],"}",["T_WHITESPACE","\n            ",254],["T_VARIABLE","$order",255],["T_OBJECT_OPERATOR","->",255],["T_STRING","save",255],"(",")",";",["T_WHITESPACE","\n            ",255],["T_VARIABLE","$this",256],["T_OBJECT_OPERATOR","->",256],["T_STRING","_getSession",256],"(",")",["T_OBJECT_OPERATOR","->",256],["T_STRING","addSuccess",256],"(",["T_VARIABLE","$message",256],")",";",["T_WHITESPACE","\n        ",256],"}",["T_WHITESPACE"," ",257],["T_CATCH","catch",257],["T_WHITESPACE"," ",257],"(",["T_STRING","Mage_Core_Exception",257],["T_WHITESPACE"," ",257],["T_VARIABLE","$e",257],")",["T_WHITESPACE"," ",257],"{",["T_WHITESPACE","\n            ",257],["T_VARIABLE","$this",258],["T_OBJECT_OPERATOR","->",258],["T_STRING","_getSession",258],"(",")",["T_OBJECT_OPERATOR","->",258],["T_STRING","addError",258],"(",["T_VARIABLE","$e",258],["T_OBJECT_OPERATOR","->",258],["T_STRING","getMessage",258],"(",")",")",";",["T_WHITESPACE","\n        ",258],"}",["T_WHITESPACE"," ",259],["T_CATCH","catch",259],["T_WHITESPACE"," ",259],"(",["T_STRING","Exception",259],["T_WHITESPACE"," ",259],["T_VARIABLE","$e",259],")",["T_WHITESPACE"," ",259],"{",["T_WHITESPACE","\n            ",259],["T_VARIABLE","$this",260],["T_OBJECT_OPERATOR","->",260],["T_STRING","_getSession",260],"(",")",["T_OBJECT_OPERATOR","->",260],["T_STRING","addError",260],"(",["T_VARIABLE","$this",260],["T_OBJECT_OPERATOR","->",260],["T_STRING","__",260],"(",["T_CONSTANT_ENCAPSED_STRING","'Failed to update the payment.'",260],")",")",";",["T_WHITESPACE","\n            ",260],["T_STRING","Mage",261],["T_DOUBLE_COLON","::",261],["T_STRING","logException",261],"(",["T_VARIABLE","$e",261],")",";",["T_WHITESPACE","\n        ",261],"}",["T_WHITESPACE","\n        ",262],["T_VARIABLE","$this",263],["T_OBJECT_OPERATOR","->",263],["T_STRING","_redirect",263],"(",["T_CONSTANT_ENCAPSED_STRING","'*\/sales_order\/view'",263],",",["T_WHITESPACE"," ",263],["T_ARRAY","array",263],"(",["T_CONSTANT_ENCAPSED_STRING","'order_id'",263],["T_WHITESPACE"," ",263],["T_DOUBLE_ARROW","=>",263],["T_WHITESPACE"," ",263],["T_VARIABLE","$order",263],["T_OBJECT_OPERATOR","->",263],["T_STRING","getId",263],"(",")",")",")",";",["T_WHITESPACE","\n    ",263],"}",["T_WHITESPACE","\n\n    ",264],["T_DOC_COMMENT","\/**\n     * Add order comment action\n     *\/",266],["T_WHITESPACE","\n    ",268],["T_PUBLIC","public",269],["T_WHITESPACE"," ",269],["T_FUNCTION","function",269],["T_WHITESPACE"," ",269],["T_STRING","addCommentAction",269],"(",")",["T_WHITESPACE","\n    ",269],"{",["T_WHITESPACE","\n        ",270],["T_IF","if",271],["T_WHITESPACE"," ",271],"(",["T_VARIABLE","$order",271],["T_WHITESPACE"," ",271],"=",["T_WHITESPACE"," ",271],["T_VARIABLE","$this",271],["T_OBJECT_OPERATOR","->",271],["T_STRING","_initOrder",271],"(",")",")",["T_WHITESPACE"," ",271],"{",["T_WHITESPACE","\n            ",271],["T_TRY","try",272],["T_WHITESPACE"," ",272],"{",["T_WHITESPACE","\n                ",272],["T_VARIABLE","$response",273],["T_WHITESPACE"," ",273],"=",["T_WHITESPACE"," ",273],["T_STRING","false",273],";",["T_WHITESPACE","\n                ",273],["T_VARIABLE","$data",274],["T_WHITESPACE"," ",274],"=",["T_WHITESPACE"," ",274],["T_VARIABLE","$this",274],["T_OBJECT_OPERATOR","->",274],["T_STRING","getRequest",274],"(",")",["T_OBJECT_OPERATOR","->",274],["T_STRING","getPost",274],"(",["T_CONSTANT_ENCAPSED_STRING","'history'",274],")",";",["T_WHITESPACE","\n                ",274],["T_VARIABLE","$notify",275],["T_WHITESPACE"," ",275],"=",["T_WHITESPACE"," ",275],["T_ISSET","isset",275],"(",["T_VARIABLE","$data",275],"[",["T_CONSTANT_ENCAPSED_STRING","'is_customer_notified'",275],"]",")",["T_WHITESPACE"," ",275],"?",["T_WHITESPACE"," ",275],["T_VARIABLE","$data",275],"[",["T_CONSTANT_ENCAPSED_STRING","'is_customer_notified'",275],"]",["T_WHITESPACE"," ",275],":",["T_WHITESPACE"," ",275],["T_STRING","false",275],";",["T_WHITESPACE","\n                ",275],["T_VARIABLE","$visible",276],["T_WHITESPACE"," ",276],"=",["T_WHITESPACE"," ",276],["T_ISSET","isset",276],"(",["T_VARIABLE","$data",276],"[",["T_CONSTANT_ENCAPSED_STRING","'is_visible_on_front'",276],"]",")",["T_WHITESPACE"," ",276],"?",["T_WHITESPACE"," ",276],["T_VARIABLE","$data",276],"[",["T_CONSTANT_ENCAPSED_STRING","'is_visible_on_front'",276],"]",["T_WHITESPACE"," ",276],":",["T_WHITESPACE"," ",276],["T_STRING","false",276],";",["T_WHITESPACE","\n\n                ",276],["T_VARIABLE","$order",278],["T_OBJECT_OPERATOR","->",278],["T_STRING","addStatusHistoryComment",278],"(",["T_VARIABLE","$data",278],"[",["T_CONSTANT_ENCAPSED_STRING","'comment'",278],"]",",",["T_WHITESPACE"," ",278],["T_VARIABLE","$data",278],"[",["T_CONSTANT_ENCAPSED_STRING","'status'",278],"]",")",["T_WHITESPACE","\n                    ",278],["T_OBJECT_OPERATOR","->",279],["T_STRING","setIsVisibleOnFront",279],"(",["T_VARIABLE","$visible",279],")",["T_WHITESPACE","\n                    ",279],["T_OBJECT_OPERATOR","->",280],["T_STRING","setIsCustomerNotified",280],"(",["T_VARIABLE","$notify",280],")",";",["T_WHITESPACE","\n\n                ",280],["T_VARIABLE","$comment",282],["T_WHITESPACE"," ",282],"=",["T_WHITESPACE"," ",282],["T_STRING","trim",282],"(",["T_STRING","strip_tags",282],"(",["T_VARIABLE","$data",282],"[",["T_CONSTANT_ENCAPSED_STRING","'comment'",282],"]",")",")",";",["T_WHITESPACE","\n\n                ",282],["T_VARIABLE","$order",284],["T_OBJECT_OPERATOR","->",284],["T_STRING","save",284],"(",")",";",["T_WHITESPACE","\n                ",284],["T_VARIABLE","$order",285],["T_OBJECT_OPERATOR","->",285],["T_STRING","sendOrderUpdateEmail",285],"(",["T_VARIABLE","$notify",285],",",["T_WHITESPACE"," ",285],["T_VARIABLE","$comment",285],")",";",["T_WHITESPACE","\n\n                ",285],["T_VARIABLE","$this",287],["T_OBJECT_OPERATOR","->",287],["T_STRING","loadLayout",287],"(",["T_CONSTANT_ENCAPSED_STRING","'empty'",287],")",";",["T_WHITESPACE","\n                ",287],["T_VARIABLE","$this",288],["T_OBJECT_OPERATOR","->",288],["T_STRING","renderLayout",288],"(",")",";",["T_WHITESPACE","\n            ",288],"}",["T_WHITESPACE","\n            ",289],["T_CATCH","catch",290],["T_WHITESPACE"," ",290],"(",["T_STRING","Mage_Core_Exception",290],["T_WHITESPACE"," ",290],["T_VARIABLE","$e",290],")",["T_WHITESPACE"," ",290],"{",["T_WHITESPACE","\n                ",290],["T_VARIABLE","$response",291],["T_WHITESPACE"," ",291],"=",["T_WHITESPACE"," ",291],["T_ARRAY","array",291],"(",["T_WHITESPACE","\n                    ",291],["T_CONSTANT_ENCAPSED_STRING","'error'",292],["T_WHITESPACE","     ",292],["T_DOUBLE_ARROW","=>",292],["T_WHITESPACE"," ",292],["T_STRING","true",292],",",["T_WHITESPACE","\n                    ",292],["T_CONSTANT_ENCAPSED_STRING","'message'",293],["T_WHITESPACE","   ",293],["T_DOUBLE_ARROW","=>",293],["T_WHITESPACE"," ",293],["T_VARIABLE","$e",293],["T_OBJECT_OPERATOR","->",293],["T_STRING","getMessage",293],"(",")",",",["T_WHITESPACE","\n                ",293],")",";",["T_WHITESPACE","\n            ",294],"}",["T_WHITESPACE","\n            ",295],["T_CATCH","catch",296],["T_WHITESPACE"," ",296],"(",["T_STRING","Exception",296],["T_WHITESPACE"," ",296],["T_VARIABLE","$e",296],")",["T_WHITESPACE"," ",296],"{",["T_WHITESPACE","\n                ",296],["T_VARIABLE","$response",297],["T_WHITESPACE"," ",297],"=",["T_WHITESPACE"," ",297],["T_ARRAY","array",297],"(",["T_WHITESPACE","\n                    ",297],["T_CONSTANT_ENCAPSED_STRING","'error'",298],["T_WHITESPACE","     ",298],["T_DOUBLE_ARROW","=>",298],["T_WHITESPACE"," ",298],["T_STRING","true",298],",",["T_WHITESPACE","\n                    ",298],["T_CONSTANT_ENCAPSED_STRING","'message'",299],["T_WHITESPACE","   ",299],["T_DOUBLE_ARROW","=>",299],["T_WHITESPACE"," ",299],["T_VARIABLE","$this",299],["T_OBJECT_OPERATOR","->",299],["T_STRING","__",299],"(",["T_CONSTANT_ENCAPSED_STRING","'Cannot add order history.'",299],")",["T_WHITESPACE","\n                ",299],")",";",["T_WHITESPACE","\n            ",300],"}",["T_WHITESPACE","\n            ",301],["T_IF","if",302],["T_WHITESPACE"," ",302],"(",["T_STRING","is_array",302],"(",["T_VARIABLE","$response",302],")",")",["T_WHITESPACE"," ",302],"{",["T_WHITESPACE","\n                ",302],["T_VARIABLE","$response",303],["T_WHITESPACE"," ",303],"=",["T_WHITESPACE"," ",303],["T_STRING","Mage",303],["T_DOUBLE_COLON","::",303],["T_STRING","helper",303],"(",["T_CONSTANT_ENCAPSED_STRING","'core'",303],")",["T_OBJECT_OPERATOR","->",303],["T_STRING","jsonEncode",303],"(",["T_VARIABLE","$response",303],")",";",["T_WHITESPACE","\n                ",303],["T_VARIABLE","$this",304],["T_OBJECT_OPERATOR","->",304],["T_STRING","getResponse",304],"(",")",["T_OBJECT_OPERATOR","->",304],["T_STRING","setBody",304],"(",["T_VARIABLE","$response",304],")",";",["T_WHITESPACE","\n            ",304],"}",["T_WHITESPACE","\n        ",305],"}",["T_WHITESPACE","\n    ",306],"}",["T_WHITESPACE","\n\n    ",307],["T_DOC_COMMENT","\/**\n     * Generate invoices grid for ajax request\n     *\/",309],["T_WHITESPACE","\n    ",311],["T_PUBLIC","public",312],["T_WHITESPACE"," ",312],["T_FUNCTION","function",312],["T_WHITESPACE"," ",312],["T_STRING","invoicesAction",312],"(",")",["T_WHITESPACE","\n    ",312],"{",["T_WHITESPACE","\n        ",313],["T_VARIABLE","$this",314],["T_OBJECT_OPERATOR","->",314],["T_STRING","_initOrder",314],"(",")",";",["T_WHITESPACE","\n        ",314],["T_VARIABLE","$this",315],["T_OBJECT_OPERATOR","->",315],["T_STRING","getResponse",315],"(",")",["T_OBJECT_OPERATOR","->",315],["T_STRING","setBody",315],"(",["T_WHITESPACE","\n            ",315],["T_VARIABLE","$this",316],["T_OBJECT_OPERATOR","->",316],["T_STRING","getLayout",316],"(",")",["T_OBJECT_OPERATOR","->",316],["T_STRING","createBlock",316],"(",["T_CONSTANT_ENCAPSED_STRING","'adminhtml\/sales_order_view_tab_invoices'",316],")",["T_OBJECT_OPERATOR","->",316],["T_STRING","toHtml",316],"(",")",["T_WHITESPACE","\n        ",316],")",";",["T_WHITESPACE","\n    ",317],"}",["T_WHITESPACE","\n\n    ",318],["T_DOC_COMMENT","\/**\n     * Generate shipments grid for ajax request\n     *\/",320],["T_WHITESPACE","\n    ",322],["T_PUBLIC","public",323],["T_WHITESPACE"," ",323],["T_FUNCTION","function",323],["T_WHITESPACE"," ",323],["T_STRING","shipmentsAction",323],"(",")",["T_WHITESPACE","\n    ",323],"{",["T_WHITESPACE","\n        ",324],["T_VARIABLE","$this",325],["T_OBJECT_OPERATOR","->",325],["T_STRING","_initOrder",325],"(",")",";",["T_WHITESPACE","\n        ",325],["T_VARIABLE","$this",326],["T_OBJECT_OPERATOR","->",326],["T_STRING","getResponse",326],"(",")",["T_OBJECT_OPERATOR","->",326],["T_STRING","setBody",326],"(",["T_WHITESPACE","\n            ",326],["T_VARIABLE","$this",327],["T_OBJECT_OPERATOR","->",327],["T_STRING","getLayout",327],"(",")",["T_OBJECT_OPERATOR","->",327],["T_STRING","createBlock",327],"(",["T_CONSTANT_ENCAPSED_STRING","'adminhtml\/sales_order_view_tab_shipments'",327],")",["T_OBJECT_OPERATOR","->",327],["T_STRING","toHtml",327],"(",")",["T_WHITESPACE","\n        ",327],")",";",["T_WHITESPACE","\n    ",328],"}",["T_WHITESPACE","\n\n    ",329],["T_DOC_COMMENT","\/**\n     * Generate creditmemos grid for ajax request\n     *\/",331],["T_WHITESPACE","\n    ",333],["T_PUBLIC","public",334],["T_WHITESPACE"," ",334],["T_FUNCTION","function",334],["T_WHITESPACE"," ",334],["T_STRING","creditmemosAction",334],"(",")",["T_WHITESPACE","\n    ",334],"{",["T_WHITESPACE","\n        ",335],["T_VARIABLE","$this",336],["T_OBJECT_OPERATOR","->",336],["T_STRING","_initOrder",336],"(",")",";",["T_WHITESPACE","\n        ",336],["T_VARIABLE","$this",337],["T_OBJECT_OPERATOR","->",337],["T_STRING","getResponse",337],"(",")",["T_OBJECT_OPERATOR","->",337],["T_STRING","setBody",337],"(",["T_WHITESPACE","\n            ",337],["T_VARIABLE","$this",338],["T_OBJECT_OPERATOR","->",338],["T_STRING","getLayout",338],"(",")",["T_OBJECT_OPERATOR","->",338],["T_STRING","createBlock",338],"(",["T_CONSTANT_ENCAPSED_STRING","'adminhtml\/sales_order_view_tab_creditmemos'",338],")",["T_OBJECT_OPERATOR","->",338],["T_STRING","toHtml",338],"(",")",["T_WHITESPACE","\n        ",338],")",";",["T_WHITESPACE","\n    ",339],"}",["T_WHITESPACE","\n\n    ",340],["T_DOC_COMMENT","\/**\n     * Generate order history for ajax request\n     *\/",342],["T_WHITESPACE","\n    ",344],["T_PUBLIC","public",345],["T_WHITESPACE"," ",345],["T_FUNCTION","function",345],["T_WHITESPACE"," ",345],["T_STRING","commentsHistoryAction",345],"(",")",["T_WHITESPACE","\n    ",345],"{",["T_WHITESPACE","\n        ",346],["T_VARIABLE","$this",347],["T_OBJECT_OPERATOR","->",347],["T_STRING","_initOrder",347],"(",")",";",["T_WHITESPACE","\n        ",347],["T_VARIABLE","$html",348],["T_WHITESPACE"," ",348],"=",["T_WHITESPACE"," ",348],["T_VARIABLE","$this",348],["T_OBJECT_OPERATOR","->",348],["T_STRING","getLayout",348],"(",")",["T_OBJECT_OPERATOR","->",348],["T_STRING","createBlock",348],"(",["T_CONSTANT_ENCAPSED_STRING","'adminhtml\/sales_order_view_tab_history'",348],")",["T_OBJECT_OPERATOR","->",348],["T_STRING","toHtml",348],"(",")",";",["T_WHITESPACE","\n        ",348],["T_COMMENT","\/* @var $translate Mage_Core_Model_Translate_Inline *\/",349],["T_WHITESPACE","\n        ",349],["T_VARIABLE","$translate",350],["T_WHITESPACE"," ",350],"=",["T_WHITESPACE"," ",350],["T_STRING","Mage",350],["T_DOUBLE_COLON","::",350],["T_STRING","getModel",350],"(",["T_CONSTANT_ENCAPSED_STRING","'core\/translate_inline'",350],")",";",["T_WHITESPACE","\n        ",350],["T_IF","if",351],["T_WHITESPACE"," ",351],"(",["T_VARIABLE","$translate",351],["T_OBJECT_OPERATOR","->",351],["T_STRING","isAllowed",351],"(",")",")",["T_WHITESPACE"," ",351],"{",["T_WHITESPACE","\n            ",351],["T_VARIABLE","$translate",352],["T_OBJECT_OPERATOR","->",352],["T_STRING","processResponseBody",352],"(",["T_VARIABLE","$html",352],")",";",["T_WHITESPACE","\n        ",352],"}",["T_WHITESPACE","\n        ",353],["T_VARIABLE","$this",354],["T_OBJECT_OPERATOR","->",354],["T_STRING","getResponse",354],"(",")",["T_OBJECT_OPERATOR","->",354],["T_STRING","setBody",354],"(",["T_VARIABLE","$html",354],")",";",["T_WHITESPACE","\n    ",354],"}",["T_WHITESPACE","\n\n    ",355],["T_DOC_COMMENT","\/**\n     * Cancel selected orders\n     *\/",357],["T_WHITESPACE","\n    ",359],["T_PUBLIC","public",360],["T_WHITESPACE"," ",360],["T_FUNCTION","function",360],["T_WHITESPACE"," ",360],["T_STRING","massCancelAction",360],"(",")",["T_WHITESPACE","\n    ",360],"{",["T_WHITESPACE","\n        ",361],["T_VARIABLE","$orderIds",362],["T_WHITESPACE"," ",362],"=",["T_WHITESPACE"," ",362],["T_VARIABLE","$this",362],["T_OBJECT_OPERATOR","->",362],["T_STRING","getRequest",362],"(",")",["T_OBJECT_OPERATOR","->",362],["T_STRING","getPost",362],"(",["T_CONSTANT_ENCAPSED_STRING","'order_ids'",362],",",["T_WHITESPACE"," ",362],["T_ARRAY","array",362],"(",")",")",";",["T_WHITESPACE","\n        ",362],["T_VARIABLE","$countCancelOrder",363],["T_WHITESPACE"," ",363],"=",["T_WHITESPACE"," ",363],["T_LNUMBER","0",363],";",["T_WHITESPACE","\n        ",363],["T_VARIABLE","$countNonCancelOrder",364],["T_WHITESPACE"," ",364],"=",["T_WHITESPACE"," ",364],["T_LNUMBER","0",364],";",["T_WHITESPACE","\n        ",364],["T_FOREACH","foreach",365],["T_WHITESPACE"," ",365],"(",["T_VARIABLE","$orderIds",365],["T_WHITESPACE"," ",365],["T_AS","as",365],["T_WHITESPACE"," ",365],["T_VARIABLE","$orderId",365],")",["T_WHITESPACE"," ",365],"{",["T_WHITESPACE","\n            ",365],["T_VARIABLE","$order",366],["T_WHITESPACE"," ",366],"=",["T_WHITESPACE"," ",366],["T_STRING","Mage",366],["T_DOUBLE_COLON","::",366],["T_STRING","getModel",366],"(",["T_CONSTANT_ENCAPSED_STRING","'sales\/order'",366],")",["T_OBJECT_OPERATOR","->",366],["T_STRING","load",366],"(",["T_VARIABLE","$orderId",366],")",";",["T_WHITESPACE","\n            ",366],["T_IF","if",367],["T_WHITESPACE"," ",367],"(",["T_VARIABLE","$order",367],["T_OBJECT_OPERATOR","->",367],["T_STRING","canCancel",367],"(",")",")",["T_WHITESPACE"," ",367],"{",["T_WHITESPACE","\n                ",367],["T_VARIABLE","$order",368],["T_OBJECT_OPERATOR","->",368],["T_STRING","cancel",368],"(",")",["T_WHITESPACE","\n                    ",368],["T_OBJECT_OPERATOR","->",369],["T_STRING","save",369],"(",")",";",["T_WHITESPACE","\n                ",369],["T_VARIABLE","$countCancelOrder",370],["T_INC","++",370],";",["T_WHITESPACE","\n            ",370],"}",["T_WHITESPACE"," ",371],["T_ELSE","else",371],["T_WHITESPACE"," ",371],"{",["T_WHITESPACE","\n                ",371],["T_VARIABLE","$countNonCancelOrder",372],["T_INC","++",372],";",["T_WHITESPACE","\n            ",372],"}",["T_WHITESPACE","\n        ",373],"}",["T_WHITESPACE","\n        ",374],["T_IF","if",375],["T_WHITESPACE"," ",375],"(",["T_VARIABLE","$countNonCancelOrder",375],")",["T_WHITESPACE"," ",375],"{",["T_WHITESPACE","\n            ",375],["T_IF","if",376],["T_WHITESPACE"," ",376],"(",["T_VARIABLE","$countCancelOrder",376],")",["T_WHITESPACE"," ",376],"{",["T_WHITESPACE","\n                ",376],["T_VARIABLE","$this",377],["T_OBJECT_OPERATOR","->",377],["T_STRING","_getSession",377],"(",")",["T_OBJECT_OPERATOR","->",377],["T_STRING","addError",377],"(",["T_VARIABLE","$this",377],["T_OBJECT_OPERATOR","->",377],["T_STRING","__",377],"(",["T_CONSTANT_ENCAPSED_STRING","'%s order(s) cannot be canceled'",377],",",["T_WHITESPACE"," ",377],["T_VARIABLE","$countNonCancelOrder",377],")",")",";",["T_WHITESPACE","\n            ",377],"}",["T_WHITESPACE"," ",378],["T_ELSE","else",378],["T_WHITESPACE"," ",378],"{",["T_WHITESPACE","\n                ",378],["T_VARIABLE","$this",379],["T_OBJECT_OPERATOR","->",379],["T_STRING","_getSession",379],"(",")",["T_OBJECT_OPERATOR","->",379],["T_STRING","addError",379],"(",["T_VARIABLE","$this",379],["T_OBJECT_OPERATOR","->",379],["T_STRING","__",379],"(",["T_CONSTANT_ENCAPSED_STRING","'The order(s) cannot be canceled'",379],")",")",";",["T_WHITESPACE","\n            ",379],"}",["T_WHITESPACE","\n        ",380],"}",["T_WHITESPACE","\n        ",381],["T_IF","if",382],["T_WHITESPACE"," ",382],"(",["T_VARIABLE","$countCancelOrder",382],")",["T_WHITESPACE"," ",382],"{",["T_WHITESPACE","\n            ",382],["T_VARIABLE","$this",383],["T_OBJECT_OPERATOR","->",383],["T_STRING","_getSession",383],"(",")",["T_OBJECT_OPERATOR","->",383],["T_STRING","addSuccess",383],"(",["T_VARIABLE","$this",383],["T_OBJECT_OPERATOR","->",383],["T_STRING","__",383],"(",["T_CONSTANT_ENCAPSED_STRING","'%s order(s) have been canceled.'",383],",",["T_WHITESPACE"," ",383],["T_VARIABLE","$countCancelOrder",383],")",")",";",["T_WHITESPACE","\n        ",383],"}",["T_WHITESPACE","\n        ",384],["T_VARIABLE","$this",385],["T_OBJECT_OPERATOR","->",385],["T_STRING","_redirect",385],"(",["T_CONSTANT_ENCAPSED_STRING","'*\/*\/'",385],")",";",["T_WHITESPACE","\n    ",385],"}",["T_WHITESPACE","\n\n    ",386],["T_DOC_COMMENT","\/**\n     * Hold selected orders\n     *\/",388],["T_WHITESPACE","\n    ",390],["T_PUBLIC","public",391],["T_WHITESPACE"," ",391],["T_FUNCTION","function",391],["T_WHITESPACE"," ",391],["T_STRING","massHoldAction",391],"(",")",["T_WHITESPACE","\n    ",391],"{",["T_WHITESPACE","\n        ",392],["T_VARIABLE","$orderIds",393],["T_WHITESPACE"," ",393],"=",["T_WHITESPACE"," ",393],["T_VARIABLE","$this",393],["T_OBJECT_OPERATOR","->",393],["T_STRING","getRequest",393],"(",")",["T_OBJECT_OPERATOR","->",393],["T_STRING","getPost",393],"(",["T_CONSTANT_ENCAPSED_STRING","'order_ids'",393],",",["T_WHITESPACE"," ",393],["T_ARRAY","array",393],"(",")",")",";",["T_WHITESPACE","\n        ",393],["T_VARIABLE","$countHoldOrder",394],["T_WHITESPACE"," ",394],"=",["T_WHITESPACE"," ",394],["T_LNUMBER","0",394],";",["T_WHITESPACE","\n\n        ",394],["T_FOREACH","foreach",396],["T_WHITESPACE"," ",396],"(",["T_VARIABLE","$orderIds",396],["T_WHITESPACE"," ",396],["T_AS","as",396],["T_WHITESPACE"," ",396],["T_VARIABLE","$orderId",396],")",["T_WHITESPACE"," ",396],"{",["T_WHITESPACE","\n            ",396],["T_VARIABLE","$order",397],["T_WHITESPACE"," ",397],"=",["T_WHITESPACE"," ",397],["T_STRING","Mage",397],["T_DOUBLE_COLON","::",397],["T_STRING","getModel",397],"(",["T_CONSTANT_ENCAPSED_STRING","'sales\/order'",397],")",["T_OBJECT_OPERATOR","->",397],["T_STRING","load",397],"(",["T_VARIABLE","$orderId",397],")",";",["T_WHITESPACE","\n            ",397],["T_IF","if",398],["T_WHITESPACE"," ",398],"(",["T_VARIABLE","$order",398],["T_OBJECT_OPERATOR","->",398],["T_STRING","canHold",398],"(",")",")",["T_WHITESPACE"," ",398],"{",["T_WHITESPACE","\n                ",398],["T_VARIABLE","$order",399],["T_OBJECT_OPERATOR","->",399],["T_STRING","hold",399],"(",")",["T_WHITESPACE","\n                    ",399],["T_OBJECT_OPERATOR","->",400],["T_STRING","save",400],"(",")",";",["T_WHITESPACE","\n                ",400],["T_VARIABLE","$countHoldOrder",401],["T_INC","++",401],";",["T_WHITESPACE","\n            ",401],"}",["T_WHITESPACE","\n        ",402],"}",["T_WHITESPACE","\n\n        ",403],["T_VARIABLE","$countNonHoldOrder",405],["T_WHITESPACE"," ",405],"=",["T_WHITESPACE"," ",405],["T_STRING","count",405],"(",["T_VARIABLE","$orderIds",405],")",["T_WHITESPACE"," ",405],"-",["T_WHITESPACE"," ",405],["T_VARIABLE","$countHoldOrder",405],";",["T_WHITESPACE","\n\n        ",405],["T_IF","if",407],["T_WHITESPACE"," ",407],"(",["T_VARIABLE","$countNonHoldOrder",407],")",["T_WHITESPACE"," ",407],"{",["T_WHITESPACE","\n            ",407],["T_IF","if",408],["T_WHITESPACE"," ",408],"(",["T_VARIABLE","$countHoldOrder",408],")",["T_WHITESPACE"," ",408],"{",["T_WHITESPACE","\n                ",408],["T_VARIABLE","$this",409],["T_OBJECT_OPERATOR","->",409],["T_STRING","_getSession",409],"(",")",["T_OBJECT_OPERATOR","->",409],["T_STRING","addError",409],"(",["T_VARIABLE","$this",409],["T_OBJECT_OPERATOR","->",409],["T_STRING","__",409],"(",["T_CONSTANT_ENCAPSED_STRING","'%s order(s) were not put on hold.'",409],",",["T_WHITESPACE"," ",409],["T_VARIABLE","$countNonHoldOrder",409],")",")",";",["T_WHITESPACE","\n            ",409],"}",["T_WHITESPACE"," ",410],["T_ELSE","else",410],["T_WHITESPACE"," ",410],"{",["T_WHITESPACE","\n                ",410],["T_VARIABLE","$this",411],["T_OBJECT_OPERATOR","->",411],["T_STRING","_getSession",411],"(",")",["T_OBJECT_OPERATOR","->",411],["T_STRING","addError",411],"(",["T_VARIABLE","$this",411],["T_OBJECT_OPERATOR","->",411],["T_STRING","__",411],"(",["T_CONSTANT_ENCAPSED_STRING","'No order(s) were put on hold.'",411],")",")",";",["T_WHITESPACE","\n            ",411],"}",["T_WHITESPACE","\n        ",412],"}",["T_WHITESPACE","\n        ",413],["T_IF","if",414],["T_WHITESPACE"," ",414],"(",["T_VARIABLE","$countHoldOrder",414],")",["T_WHITESPACE"," ",414],"{",["T_WHITESPACE","\n            ",414],["T_VARIABLE","$this",415],["T_OBJECT_OPERATOR","->",415],["T_STRING","_getSession",415],"(",")",["T_OBJECT_OPERATOR","->",415],["T_STRING","addSuccess",415],"(",["T_VARIABLE","$this",415],["T_OBJECT_OPERATOR","->",415],["T_STRING","__",415],"(",["T_CONSTANT_ENCAPSED_STRING","'%s order(s) have been put on hold.'",415],",",["T_WHITESPACE"," ",415],["T_VARIABLE","$countHoldOrder",415],")",")",";",["T_WHITESPACE","\n        ",415],"}",["T_WHITESPACE","\n\n        ",416],["T_VARIABLE","$this",418],["T_OBJECT_OPERATOR","->",418],["T_STRING","_redirect",418],"(",["T_CONSTANT_ENCAPSED_STRING","'*\/*\/'",418],")",";",["T_WHITESPACE","\n    ",418],"}",["T_WHITESPACE","\n\n    ",419],["T_DOC_COMMENT","\/**\n     * Unhold selected orders\n     *\/",421],["T_WHITESPACE","\n    ",423],["T_PUBLIC","public",424],["T_WHITESPACE"," ",424],["T_FUNCTION","function",424],["T_WHITESPACE"," ",424],["T_STRING","massUnholdAction",424],"(",")",["T_WHITESPACE","\n    ",424],"{",["T_WHITESPACE","\n        ",425],["T_VARIABLE","$orderIds",426],["T_WHITESPACE"," ",426],"=",["T_WHITESPACE"," ",426],["T_VARIABLE","$this",426],["T_OBJECT_OPERATOR","->",426],["T_STRING","getRequest",426],"(",")",["T_OBJECT_OPERATOR","->",426],["T_STRING","getPost",426],"(",["T_CONSTANT_ENCAPSED_STRING","'order_ids'",426],",",["T_WHITESPACE"," ",426],["T_ARRAY","array",426],"(",")",")",";",["T_WHITESPACE","\n        ",426],["T_VARIABLE","$countUnholdOrder",427],["T_WHITESPACE"," ",427],"=",["T_WHITESPACE"," ",427],["T_LNUMBER","0",427],";",["T_WHITESPACE","\n        ",427],["T_VARIABLE","$countNonUnholdOrder",428],["T_WHITESPACE"," ",428],"=",["T_WHITESPACE"," ",428],["T_LNUMBER","0",428],";",["T_WHITESPACE","\n\n        ",428],["T_FOREACH","foreach",430],["T_WHITESPACE"," ",430],"(",["T_VARIABLE","$orderIds",430],["T_WHITESPACE"," ",430],["T_AS","as",430],["T_WHITESPACE"," ",430],["T_VARIABLE","$orderId",430],")",["T_WHITESPACE"," ",430],"{",["T_WHITESPACE","\n            ",430],["T_VARIABLE","$order",431],["T_WHITESPACE"," ",431],"=",["T_WHITESPACE"," ",431],["T_STRING","Mage",431],["T_DOUBLE_COLON","::",431],["T_STRING","getModel",431],"(",["T_CONSTANT_ENCAPSED_STRING","'sales\/order'",431],")",["T_OBJECT_OPERATOR","->",431],["T_STRING","load",431],"(",["T_VARIABLE","$orderId",431],")",";",["T_WHITESPACE","\n            ",431],["T_IF","if",432],["T_WHITESPACE"," ",432],"(",["T_VARIABLE","$order",432],["T_OBJECT_OPERATOR","->",432],["T_STRING","canUnhold",432],"(",")",")",["T_WHITESPACE"," ",432],"{",["T_WHITESPACE","\n                ",432],["T_VARIABLE","$order",433],["T_OBJECT_OPERATOR","->",433],["T_STRING","unhold",433],"(",")",["T_WHITESPACE","\n                    ",433],["T_OBJECT_OPERATOR","->",434],["T_STRING","save",434],"(",")",";",["T_WHITESPACE","\n                ",434],["T_VARIABLE","$countUnholdOrder",435],["T_INC","++",435],";",["T_WHITESPACE","\n            ",435],"}",["T_WHITESPACE"," ",436],["T_ELSE","else",436],["T_WHITESPACE"," ",436],"{",["T_WHITESPACE","\n                ",436],["T_VARIABLE","$countNonUnholdOrder",437],["T_INC","++",437],";",["T_WHITESPACE","\n            ",437],"}",["T_WHITESPACE","\n        ",438],"}",["T_WHITESPACE","\n        ",439],["T_IF","if",440],["T_WHITESPACE"," ",440],"(",["T_VARIABLE","$countNonUnholdOrder",440],")",["T_WHITESPACE"," ",440],"{",["T_WHITESPACE","\n            ",440],["T_IF","if",441],["T_WHITESPACE"," ",441],"(",["T_VARIABLE","$countUnholdOrder",441],")",["T_WHITESPACE"," ",441],"{",["T_WHITESPACE","\n                ",441],["T_VARIABLE","$this",442],["T_OBJECT_OPERATOR","->",442],["T_STRING","_getSession",442],"(",")",["T_OBJECT_OPERATOR","->",442],["T_STRING","addError",442],"(",["T_VARIABLE","$this",442],["T_OBJECT_OPERATOR","->",442],["T_STRING","__",442],"(",["T_CONSTANT_ENCAPSED_STRING","'%s order(s) were not released from holding status.'",442],",",["T_WHITESPACE"," ",442],["T_VARIABLE","$countNonUnholdOrder",442],")",")",";",["T_WHITESPACE","\n            ",442],"}",["T_WHITESPACE"," ",443],["T_ELSE","else",443],["T_WHITESPACE"," ",443],"{",["T_WHITESPACE","\n                ",443],["T_VARIABLE","$this",444],["T_OBJECT_OPERATOR","->",444],["T_STRING","_getSession",444],"(",")",["T_OBJECT_OPERATOR","->",444],["T_STRING","addError",444],"(",["T_VARIABLE","$this",444],["T_OBJECT_OPERATOR","->",444],["T_STRING","__",444],"(",["T_CONSTANT_ENCAPSED_STRING","'No order(s) were released from holding status.'",444],")",")",";",["T_WHITESPACE","\n            ",444],"}",["T_WHITESPACE","\n        ",445],"}",["T_WHITESPACE","\n        ",446],["T_IF","if",447],["T_WHITESPACE"," ",447],"(",["T_VARIABLE","$countUnholdOrder",447],")",["T_WHITESPACE"," ",447],"{",["T_WHITESPACE","\n            ",447],["T_VARIABLE","$this",448],["T_OBJECT_OPERATOR","->",448],["T_STRING","_getSession",448],"(",")",["T_OBJECT_OPERATOR","->",448],["T_STRING","addSuccess",448],"(",["T_VARIABLE","$this",448],["T_OBJECT_OPERATOR","->",448],["T_STRING","__",448],"(",["T_CONSTANT_ENCAPSED_STRING","'%s order(s) have been released from holding status.'",448],",",["T_WHITESPACE"," ",448],["T_VARIABLE","$countUnholdOrder",448],")",")",";",["T_WHITESPACE","\n        ",448],"}",["T_WHITESPACE","\n        ",449],["T_VARIABLE","$this",450],["T_OBJECT_OPERATOR","->",450],["T_STRING","_redirect",450],"(",["T_CONSTANT_ENCAPSED_STRING","'*\/*\/'",450],")",";",["T_WHITESPACE","\n    ",450],"}",["T_WHITESPACE","\n\n    ",451],["T_DOC_COMMENT","\/**\n     * Change status for selected orders\n     *\/",453],["T_WHITESPACE","\n    ",455],["T_PUBLIC","public",456],["T_WHITESPACE"," ",456],["T_FUNCTION","function",456],["T_WHITESPACE"," ",456],["T_STRING","massStatusAction",456],"(",")",["T_WHITESPACE","\n    ",456],"{",["T_WHITESPACE","\n\n    ",457],"}",["T_WHITESPACE","\n\n    ",459],["T_DOC_COMMENT","\/**\n     * Print documents for selected orders\n     *\/",461],["T_WHITESPACE","\n    ",463],["T_PUBLIC","public",464],["T_WHITESPACE"," ",464],["T_FUNCTION","function",464],["T_WHITESPACE"," ",464],["T_STRING","massPrintAction",464],"(",")",["T_WHITESPACE","\n    ",464],"{",["T_WHITESPACE","\n        ",465],["T_VARIABLE","$orderIds",466],["T_WHITESPACE"," ",466],"=",["T_WHITESPACE"," ",466],["T_VARIABLE","$this",466],["T_OBJECT_OPERATOR","->",466],["T_STRING","getRequest",466],"(",")",["T_OBJECT_OPERATOR","->",466],["T_STRING","getPost",466],"(",["T_CONSTANT_ENCAPSED_STRING","'order_ids'",466],")",";",["T_WHITESPACE","\n        ",466],["T_VARIABLE","$document",467],["T_WHITESPACE"," ",467],"=",["T_WHITESPACE"," ",467],["T_VARIABLE","$this",467],["T_OBJECT_OPERATOR","->",467],["T_STRING","getRequest",467],"(",")",["T_OBJECT_OPERATOR","->",467],["T_STRING","getPost",467],"(",["T_CONSTANT_ENCAPSED_STRING","'document'",467],")",";",["T_WHITESPACE","\n    ",467],"}",["T_WHITESPACE","\n\n    ",468],["T_DOC_COMMENT","\/**\n     * Print invoices for selected orders\n     *\/",470],["T_WHITESPACE","\n    ",472],["T_PUBLIC","public",473],["T_WHITESPACE"," ",473],["T_FUNCTION","function",473],["T_WHITESPACE"," ",473],["T_STRING","pdfinvoicesAction",473],"(",")","{",["T_WHITESPACE","\n        ",473],["T_VARIABLE","$orderIds",474],["T_WHITESPACE"," ",474],"=",["T_WHITESPACE"," ",474],["T_VARIABLE","$this",474],["T_OBJECT_OPERATOR","->",474],["T_STRING","getRequest",474],"(",")",["T_OBJECT_OPERATOR","->",474],["T_STRING","getPost",474],"(",["T_CONSTANT_ENCAPSED_STRING","'order_ids'",474],")",";",["T_WHITESPACE","\n        ",474],["T_VARIABLE","$flag",475],["T_WHITESPACE"," ",475],"=",["T_WHITESPACE"," ",475],["T_STRING","false",475],";",["T_WHITESPACE","\n        ",475],["T_IF","if",476],["T_WHITESPACE"," ",476],"(","!",["T_EMPTY","empty",476],"(",["T_VARIABLE","$orderIds",476],")",")",["T_WHITESPACE"," ",476],"{",["T_WHITESPACE","\n            ",476],["T_FOREACH","foreach",477],["T_WHITESPACE"," ",477],"(",["T_VARIABLE","$orderIds",477],["T_WHITESPACE"," ",477],["T_AS","as",477],["T_WHITESPACE"," ",477],["T_VARIABLE","$orderId",477],")",["T_WHITESPACE"," ",477],"{",["T_WHITESPACE","\n                ",477],["T_VARIABLE","$invoices",478],["T_WHITESPACE"," ",478],"=",["T_WHITESPACE"," ",478],["T_STRING","Mage",478],["T_DOUBLE_COLON","::",478],["T_STRING","getResourceModel",478],"(",["T_CONSTANT_ENCAPSED_STRING","'sales\/order_invoice_collection'",478],")",["T_WHITESPACE","\n                    ",478],["T_OBJECT_OPERATOR","->",479],["T_STRING","setOrderFilter",479],"(",["T_VARIABLE","$orderId",479],")",["T_WHITESPACE","\n                    ",479],["T_OBJECT_OPERATOR","->",480],["T_STRING","load",480],"(",")",";",["T_WHITESPACE","\n                ",480],["T_IF","if",481],["T_WHITESPACE"," ",481],"(",["T_VARIABLE","$invoices",481],["T_OBJECT_OPERATOR","->",481],["T_STRING","getSize",481],"(",")",["T_WHITESPACE"," ",481],">",["T_WHITESPACE"," ",481],["T_LNUMBER","0",481],")",["T_WHITESPACE"," ",481],"{",["T_WHITESPACE","\n                    ",481],["T_VARIABLE","$flag",482],["T_WHITESPACE"," ",482],"=",["T_WHITESPACE"," ",482],["T_STRING","true",482],";",["T_WHITESPACE","\n                    ",482],["T_IF","if",483],["T_WHITESPACE"," ",483],"(","!",["T_ISSET","isset",483],"(",["T_VARIABLE","$pdf",483],")",")","{",["T_WHITESPACE","\n                        ",483],["T_VARIABLE","$pdf",484],["T_WHITESPACE"," ",484],"=",["T_WHITESPACE"," ",484],["T_STRING","Mage",484],["T_DOUBLE_COLON","::",484],["T_STRING","getModel",484],"(",["T_CONSTANT_ENCAPSED_STRING","'sales\/order_pdf_invoice'",484],")",["T_OBJECT_OPERATOR","->",484],["T_STRING","getPdf",484],"(",["T_VARIABLE","$invoices",484],")",";",["T_WHITESPACE","\n                    ",484],"}",["T_WHITESPACE"," ",485],["T_ELSE","else",485],["T_WHITESPACE"," ",485],"{",["T_WHITESPACE","\n                        ",485],["T_VARIABLE","$pages",486],["T_WHITESPACE"," ",486],"=",["T_WHITESPACE"," ",486],["T_STRING","Mage",486],["T_DOUBLE_COLON","::",486],["T_STRING","getModel",486],"(",["T_CONSTANT_ENCAPSED_STRING","'sales\/order_pdf_invoice'",486],")",["T_OBJECT_OPERATOR","->",486],["T_STRING","getPdf",486],"(",["T_VARIABLE","$invoices",486],")",";",["T_WHITESPACE","\n                        ",486],["T_VARIABLE","$pdf",487],["T_OBJECT_OPERATOR","->",487],["T_STRING","pages",487],["T_WHITESPACE"," ",487],"=",["T_WHITESPACE"," ",487],["T_STRING","array_merge",487],["T_WHITESPACE"," ",487],"(",["T_VARIABLE","$pdf",487],["T_OBJECT_OPERATOR","->",487],["T_STRING","pages",487],",",["T_WHITESPACE"," ",487],["T_VARIABLE","$pages",487],["T_OBJECT_OPERATOR","->",487],["T_STRING","pages",487],")",";",["T_WHITESPACE","\n                    ",487],"}",["T_WHITESPACE","\n                ",488],"}",["T_WHITESPACE","\n            ",489],"}",["T_WHITESPACE","\n            ",490],["T_IF","if",491],["T_WHITESPACE"," ",491],"(",["T_VARIABLE","$flag",491],")",["T_WHITESPACE"," ",491],"{",["T_WHITESPACE","\n                ",491],["T_RETURN","return",492],["T_WHITESPACE"," ",492],["T_VARIABLE","$this",492],["T_OBJECT_OPERATOR","->",492],["T_STRING","_prepareDownloadResponse",492],"(",["T_WHITESPACE","\n                    ",492],["T_CONSTANT_ENCAPSED_STRING","'invoice'",493],".",["T_STRING","Mage",493],["T_DOUBLE_COLON","::",493],["T_STRING","getSingleton",493],"(",["T_CONSTANT_ENCAPSED_STRING","'core\/date'",493],")",["T_OBJECT_OPERATOR","->",493],["T_STRING","date",493],"(",["T_CONSTANT_ENCAPSED_STRING","'Y-m-d_H-i-s'",493],")",".",["T_CONSTANT_ENCAPSED_STRING","'.pdf'",493],",",["T_WHITESPACE"," ",493],["T_VARIABLE","$pdf",493],["T_OBJECT_OPERATOR","->",493],["T_STRING","render",493],"(",")",",",["T_WHITESPACE","\n                    ",493],["T_CONSTANT_ENCAPSED_STRING","'application\/pdf'",494],["T_WHITESPACE","\n                ",494],")",";",["T_WHITESPACE","\n            ",495],"}",["T_WHITESPACE"," ",496],["T_ELSE","else",496],["T_WHITESPACE"," ",496],"{",["T_WHITESPACE","\n                ",496],["T_VARIABLE","$this",497],["T_OBJECT_OPERATOR","->",497],["T_STRING","_getSession",497],"(",")",["T_OBJECT_OPERATOR","->",497],["T_STRING","addError",497],"(",["T_VARIABLE","$this",497],["T_OBJECT_OPERATOR","->",497],["T_STRING","__",497],"(",["T_CONSTANT_ENCAPSED_STRING","'There are no printable documents related to selected orders.'",497],")",")",";",["T_WHITESPACE","\n                ",497],["T_VARIABLE","$this",498],["T_OBJECT_OPERATOR","->",498],["T_STRING","_redirect",498],"(",["T_CONSTANT_ENCAPSED_STRING","'*\/*\/'",498],")",";",["T_WHITESPACE","\n            ",498],"}",["T_WHITESPACE","\n        ",499],"}",["T_WHITESPACE","\n        ",500],["T_VARIABLE","$this",501],["T_OBJECT_OPERATOR","->",501],["T_STRING","_redirect",501],"(",["T_CONSTANT_ENCAPSED_STRING","'*\/*\/'",501],")",";",["T_WHITESPACE","\n    ",501],"}",["T_WHITESPACE","\n\n    ",502],["T_DOC_COMMENT","\/**\n     * Print shipments for selected orders\n     *\/",504],["T_WHITESPACE","\n    ",506],["T_PUBLIC","public",507],["T_WHITESPACE"," ",507],["T_FUNCTION","function",507],["T_WHITESPACE"," ",507],["T_STRING","pdfshipmentsAction",507],"(",")","{",["T_WHITESPACE","\n        ",507],["T_VARIABLE","$orderIds",508],["T_WHITESPACE"," ",508],"=",["T_WHITESPACE"," ",508],["T_VARIABLE","$this",508],["T_OBJECT_OPERATOR","->",508],["T_STRING","getRequest",508],"(",")",["T_OBJECT_OPERATOR","->",508],["T_STRING","getPost",508],"(",["T_CONSTANT_ENCAPSED_STRING","'order_ids'",508],")",";",["T_WHITESPACE","\n        ",508],["T_VARIABLE","$flag",509],["T_WHITESPACE"," ",509],"=",["T_WHITESPACE"," ",509],["T_STRING","false",509],";",["T_WHITESPACE","\n        ",509],["T_IF","if",510],["T_WHITESPACE"," ",510],"(","!",["T_EMPTY","empty",510],"(",["T_VARIABLE","$orderIds",510],")",")",["T_WHITESPACE"," ",510],"{",["T_WHITESPACE","\n            ",510],["T_FOREACH","foreach",511],["T_WHITESPACE"," ",511],"(",["T_VARIABLE","$orderIds",511],["T_WHITESPACE"," ",511],["T_AS","as",511],["T_WHITESPACE"," ",511],["T_VARIABLE","$orderId",511],")",["T_WHITESPACE"," ",511],"{",["T_WHITESPACE","\n                ",511],["T_VARIABLE","$shipments",512],["T_WHITESPACE"," ",512],"=",["T_WHITESPACE"," ",512],["T_STRING","Mage",512],["T_DOUBLE_COLON","::",512],["T_STRING","getResourceModel",512],"(",["T_CONSTANT_ENCAPSED_STRING","'sales\/order_shipment_collection'",512],")",["T_WHITESPACE","\n                    ",512],["T_OBJECT_OPERATOR","->",513],["T_STRING","setOrderFilter",513],"(",["T_VARIABLE","$orderId",513],")",["T_WHITESPACE","\n                    ",513],["T_OBJECT_OPERATOR","->",514],["T_STRING","load",514],"(",")",";",["T_WHITESPACE","\n                ",514],["T_IF","if",515],["T_WHITESPACE"," ",515],"(",["T_VARIABLE","$shipments",515],["T_OBJECT_OPERATOR","->",515],["T_STRING","getSize",515],"(",")",")",["T_WHITESPACE"," ",515],"{",["T_WHITESPACE","\n                    ",515],["T_VARIABLE","$flag",516],["T_WHITESPACE"," ",516],"=",["T_WHITESPACE"," ",516],["T_STRING","true",516],";",["T_WHITESPACE","\n                    ",516],["T_IF","if",517],["T_WHITESPACE"," ",517],"(","!",["T_ISSET","isset",517],"(",["T_VARIABLE","$pdf",517],")",")","{",["T_WHITESPACE","\n                        ",517],["T_VARIABLE","$pdf",518],["T_WHITESPACE"," ",518],"=",["T_WHITESPACE"," ",518],["T_STRING","Mage",518],["T_DOUBLE_COLON","::",518],["T_STRING","getModel",518],"(",["T_CONSTANT_ENCAPSED_STRING","'sales\/order_pdf_shipment'",518],")",["T_OBJECT_OPERATOR","->",518],["T_STRING","getPdf",518],"(",["T_VARIABLE","$shipments",518],")",";",["T_WHITESPACE","\n                    ",518],"}",["T_WHITESPACE"," ",519],["T_ELSE","else",519],["T_WHITESPACE"," ",519],"{",["T_WHITESPACE","\n                        ",519],["T_VARIABLE","$pages",520],["T_WHITESPACE"," ",520],"=",["T_WHITESPACE"," ",520],["T_STRING","Mage",520],["T_DOUBLE_COLON","::",520],["T_STRING","getModel",520],"(",["T_CONSTANT_ENCAPSED_STRING","'sales\/order_pdf_shipment'",520],")",["T_OBJECT_OPERATOR","->",520],["T_STRING","getPdf",520],"(",["T_VARIABLE","$shipments",520],")",";",["T_WHITESPACE","\n                        ",520],["T_VARIABLE","$pdf",521],["T_OBJECT_OPERATOR","->",521],["T_STRING","pages",521],["T_WHITESPACE"," ",521],"=",["T_WHITESPACE"," ",521],["T_STRING","array_merge",521],["T_WHITESPACE"," ",521],"(",["T_VARIABLE","$pdf",521],["T_OBJECT_OPERATOR","->",521],["T_STRING","pages",521],",",["T_WHITESPACE"," ",521],["T_VARIABLE","$pages",521],["T_OBJECT_OPERATOR","->",521],["T_STRING","pages",521],")",";",["T_WHITESPACE","\n                    ",521],"}",["T_WHITESPACE","\n                ",522],"}",["T_WHITESPACE","\n            ",523],"}",["T_WHITESPACE","\n            ",524],["T_IF","if",525],["T_WHITESPACE"," ",525],"(",["T_VARIABLE","$flag",525],")",["T_WHITESPACE"," ",525],"{",["T_WHITESPACE","\n                ",525],["T_RETURN","return",526],["T_WHITESPACE"," ",526],["T_VARIABLE","$this",526],["T_OBJECT_OPERATOR","->",526],["T_STRING","_prepareDownloadResponse",526],"(",["T_WHITESPACE","\n                    ",526],["T_CONSTANT_ENCAPSED_STRING","'packingslip'",527],".",["T_STRING","Mage",527],["T_DOUBLE_COLON","::",527],["T_STRING","getSingleton",527],"(",["T_CONSTANT_ENCAPSED_STRING","'core\/date'",527],")",["T_OBJECT_OPERATOR","->",527],["T_STRING","date",527],"(",["T_CONSTANT_ENCAPSED_STRING","'Y-m-d_H-i-s'",527],")",".",["T_CONSTANT_ENCAPSED_STRING","'.pdf'",527],",",["T_WHITESPACE"," ",527],["T_VARIABLE","$pdf",527],["T_OBJECT_OPERATOR","->",527],["T_STRING","render",527],"(",")",",",["T_WHITESPACE","\n                    ",527],["T_CONSTANT_ENCAPSED_STRING","'application\/pdf'",528],["T_WHITESPACE","\n                ",528],")",";",["T_WHITESPACE","\n            ",529],"}",["T_WHITESPACE"," ",530],["T_ELSE","else",530],["T_WHITESPACE"," ",530],"{",["T_WHITESPACE","\n                ",530],["T_VARIABLE","$this",531],["T_OBJECT_OPERATOR","->",531],["T_STRING","_getSession",531],"(",")",["T_OBJECT_OPERATOR","->",531],["T_STRING","addError",531],"(",["T_VARIABLE","$this",531],["T_OBJECT_OPERATOR","->",531],["T_STRING","__",531],"(",["T_CONSTANT_ENCAPSED_STRING","'There are no printable documents related to selected orders.'",531],")",")",";",["T_WHITESPACE","\n                ",531],["T_VARIABLE","$this",532],["T_OBJECT_OPERATOR","->",532],["T_STRING","_redirect",532],"(",["T_CONSTANT_ENCAPSED_STRING","'*\/*\/'",532],")",";",["T_WHITESPACE","\n            ",532],"}",["T_WHITESPACE","\n        ",533],"}",["T_WHITESPACE","\n        ",534],["T_VARIABLE","$this",535],["T_OBJECT_OPERATOR","->",535],["T_STRING","_redirect",535],"(",["T_CONSTANT_ENCAPSED_STRING","'*\/*\/'",535],")",";",["T_WHITESPACE","\n    ",535],"}",["T_WHITESPACE","\n\n    ",536],["T_DOC_COMMENT","\/**\n     * Print creditmemos for selected orders\n     *\/",538],["T_WHITESPACE","\n    ",540],["T_PUBLIC","public",541],["T_WHITESPACE"," ",541],["T_FUNCTION","function",541],["T_WHITESPACE"," ",541],["T_STRING","pdfcreditmemosAction",541],"(",")","{",["T_WHITESPACE","\n        ",541],["T_VARIABLE","$orderIds",542],["T_WHITESPACE"," ",542],"=",["T_WHITESPACE"," ",542],["T_VARIABLE","$this",542],["T_OBJECT_OPERATOR","->",542],["T_STRING","getRequest",542],"(",")",["T_OBJECT_OPERATOR","->",542],["T_STRING","getPost",542],"(",["T_CONSTANT_ENCAPSED_STRING","'order_ids'",542],")",";",["T_WHITESPACE","\n        ",542],["T_VARIABLE","$flag",543],["T_WHITESPACE"," ",543],"=",["T_WHITESPACE"," ",543],["T_STRING","false",543],";",["T_WHITESPACE","\n        ",543],["T_IF","if",544],["T_WHITESPACE"," ",544],"(","!",["T_EMPTY","empty",544],"(",["T_VARIABLE","$orderIds",544],")",")",["T_WHITESPACE"," ",544],"{",["T_WHITESPACE","\n            ",544],["T_FOREACH","foreach",545],["T_WHITESPACE"," ",545],"(",["T_VARIABLE","$orderIds",545],["T_WHITESPACE"," ",545],["T_AS","as",545],["T_WHITESPACE"," ",545],["T_VARIABLE","$orderId",545],")",["T_WHITESPACE"," ",545],"{",["T_WHITESPACE","\n                ",545],["T_VARIABLE","$creditmemos",546],["T_WHITESPACE"," ",546],"=",["T_WHITESPACE"," ",546],["T_STRING","Mage",546],["T_DOUBLE_COLON","::",546],["T_STRING","getResourceModel",546],"(",["T_CONSTANT_ENCAPSED_STRING","'sales\/order_creditmemo_collection'",546],")",["T_WHITESPACE","\n                    ",546],["T_OBJECT_OPERATOR","->",547],["T_STRING","setOrderFilter",547],"(",["T_VARIABLE","$orderId",547],")",["T_WHITESPACE","\n                    ",547],["T_OBJECT_OPERATOR","->",548],["T_STRING","load",548],"(",")",";",["T_WHITESPACE","\n                ",548],["T_IF","if",549],["T_WHITESPACE"," ",549],"(",["T_VARIABLE","$creditmemos",549],["T_OBJECT_OPERATOR","->",549],["T_STRING","getSize",549],"(",")",")",["T_WHITESPACE"," ",549],"{",["T_WHITESPACE","\n                    ",549],["T_VARIABLE","$flag",550],["T_WHITESPACE"," ",550],"=",["T_WHITESPACE"," ",550],["T_STRING","true",550],";",["T_WHITESPACE","\n                    ",550],["T_IF","if",551],["T_WHITESPACE"," ",551],"(","!",["T_ISSET","isset",551],"(",["T_VARIABLE","$pdf",551],")",")","{",["T_WHITESPACE","\n                        ",551],["T_VARIABLE","$pdf",552],["T_WHITESPACE"," ",552],"=",["T_WHITESPACE"," ",552],["T_STRING","Mage",552],["T_DOUBLE_COLON","::",552],["T_STRING","getModel",552],"(",["T_CONSTANT_ENCAPSED_STRING","'sales\/order_pdf_creditmemo'",552],")",["T_OBJECT_OPERATOR","->",552],["T_STRING","getPdf",552],"(",["T_VARIABLE","$creditmemos",552],")",";",["T_WHITESPACE","\n                    ",552],"}",["T_WHITESPACE"," ",553],["T_ELSE","else",553],["T_WHITESPACE"," ",553],"{",["T_WHITESPACE","\n                        ",553],["T_VARIABLE","$pages",554],["T_WHITESPACE"," ",554],"=",["T_WHITESPACE"," ",554],["T_STRING","Mage",554],["T_DOUBLE_COLON","::",554],["T_STRING","getModel",554],"(",["T_CONSTANT_ENCAPSED_STRING","'sales\/order_pdf_creditmemo'",554],")",["T_OBJECT_OPERATOR","->",554],["T_STRING","getPdf",554],"(",["T_VARIABLE","$creditmemos",554],")",";",["T_WHITESPACE","\n                        ",554],["T_VARIABLE","$pdf",555],["T_OBJECT_OPERATOR","->",555],["T_STRING","pages",555],["T_WHITESPACE"," ",555],"=",["T_WHITESPACE"," ",555],["T_STRING","array_merge",555],["T_WHITESPACE"," ",555],"(",["T_VARIABLE","$pdf",555],["T_OBJECT_OPERATOR","->",555],["T_STRING","pages",555],",",["T_WHITESPACE"," ",555],["T_VARIABLE","$pages",555],["T_OBJECT_OPERATOR","->",555],["T_STRING","pages",555],")",";",["T_WHITESPACE","\n                    ",555],"}",["T_WHITESPACE","\n                ",556],"}",["T_WHITESPACE","\n            ",557],"}",["T_WHITESPACE","\n            ",558],["T_IF","if",559],["T_WHITESPACE"," ",559],"(",["T_VARIABLE","$flag",559],")",["T_WHITESPACE"," ",559],"{",["T_WHITESPACE","\n                ",559],["T_RETURN","return",560],["T_WHITESPACE"," ",560],["T_VARIABLE","$this",560],["T_OBJECT_OPERATOR","->",560],["T_STRING","_prepareDownloadResponse",560],"(",["T_WHITESPACE","\n                    ",560],["T_CONSTANT_ENCAPSED_STRING","'creditmemo'",561],".",["T_STRING","Mage",561],["T_DOUBLE_COLON","::",561],["T_STRING","getSingleton",561],"(",["T_CONSTANT_ENCAPSED_STRING","'core\/date'",561],")",["T_OBJECT_OPERATOR","->",561],["T_STRING","date",561],"(",["T_CONSTANT_ENCAPSED_STRING","'Y-m-d_H-i-s'",561],")",".",["T_CONSTANT_ENCAPSED_STRING","'.pdf'",561],",",["T_WHITESPACE"," ",561],["T_VARIABLE","$pdf",561],["T_OBJECT_OPERATOR","->",561],["T_STRING","render",561],"(",")",",",["T_WHITESPACE","\n                    ",561],["T_CONSTANT_ENCAPSED_STRING","'application\/pdf'",562],["T_WHITESPACE","\n                ",562],")",";",["T_WHITESPACE","\n            ",563],"}",["T_WHITESPACE"," ",564],["T_ELSE","else",564],["T_WHITESPACE"," ",564],"{",["T_WHITESPACE","\n                ",564],["T_VARIABLE","$this",565],["T_OBJECT_OPERATOR","->",565],["T_STRING","_getSession",565],"(",")",["T_OBJECT_OPERATOR","->",565],["T_STRING","addError",565],"(",["T_VARIABLE","$this",565],["T_OBJECT_OPERATOR","->",565],["T_STRING","__",565],"(",["T_CONSTANT_ENCAPSED_STRING","'There are no printable documents related to selected orders.'",565],")",")",";",["T_WHITESPACE","\n                ",565],["T_VARIABLE","$this",566],["T_OBJECT_OPERATOR","->",566],["T_STRING","_redirect",566],"(",["T_CONSTANT_ENCAPSED_STRING","'*\/*\/'",566],")",";",["T_WHITESPACE","\n            ",566],"}",["T_WHITESPACE","\n        ",567],"}",["T_WHITESPACE","\n        ",568],["T_VARIABLE","$this",569],["T_OBJECT_OPERATOR","->",569],["T_STRING","_redirect",569],"(",["T_CONSTANT_ENCAPSED_STRING","'*\/*\/'",569],")",";",["T_WHITESPACE","\n    ",569],"}",["T_WHITESPACE","\n\n    ",570],["T_DOC_COMMENT","\/**\n     * Print all documents for selected orders\n     *\/",572],["T_WHITESPACE","\n    ",574],["T_PUBLIC","public",575],["T_WHITESPACE"," ",575],["T_FUNCTION","function",575],["T_WHITESPACE"," ",575],["T_STRING","pdfdocsAction",575],"(",")","{",["T_WHITESPACE","\n        ",575],["T_VARIABLE","$orderIds",576],["T_WHITESPACE"," ",576],"=",["T_WHITESPACE"," ",576],["T_VARIABLE","$this",576],["T_OBJECT_OPERATOR","->",576],["T_STRING","getRequest",576],"(",")",["T_OBJECT_OPERATOR","->",576],["T_STRING","getPost",576],"(",["T_CONSTANT_ENCAPSED_STRING","'order_ids'",576],")",";",["T_WHITESPACE","\n        ",576],["T_VARIABLE","$flag",577],["T_WHITESPACE"," ",577],"=",["T_WHITESPACE"," ",577],["T_STRING","false",577],";",["T_WHITESPACE","\n        ",577],["T_IF","if",578],["T_WHITESPACE"," ",578],"(","!",["T_EMPTY","empty",578],"(",["T_VARIABLE","$orderIds",578],")",")",["T_WHITESPACE"," ",578],"{",["T_WHITESPACE","\n            ",578],["T_FOREACH","foreach",579],["T_WHITESPACE"," ",579],"(",["T_VARIABLE","$orderIds",579],["T_WHITESPACE"," ",579],["T_AS","as",579],["T_WHITESPACE"," ",579],["T_VARIABLE","$orderId",579],")",["T_WHITESPACE"," ",579],"{",["T_WHITESPACE","\n                ",579],["T_VARIABLE","$invoices",580],["T_WHITESPACE"," ",580],"=",["T_WHITESPACE"," ",580],["T_STRING","Mage",580],["T_DOUBLE_COLON","::",580],["T_STRING","getResourceModel",580],"(",["T_CONSTANT_ENCAPSED_STRING","'sales\/order_invoice_collection'",580],")",["T_WHITESPACE","\n                    ",580],["T_OBJECT_OPERATOR","->",581],["T_STRING","setOrderFilter",581],"(",["T_VARIABLE","$orderId",581],")",["T_WHITESPACE","\n                    ",581],["T_OBJECT_OPERATOR","->",582],["T_STRING","load",582],"(",")",";",["T_WHITESPACE","\n                ",582],["T_IF","if",583],["T_WHITESPACE"," ",583],"(",["T_VARIABLE","$invoices",583],["T_OBJECT_OPERATOR","->",583],["T_STRING","getSize",583],"(",")",")","{",["T_WHITESPACE","\n                    ",583],["T_VARIABLE","$flag",584],["T_WHITESPACE"," ",584],"=",["T_WHITESPACE"," ",584],["T_STRING","true",584],";",["T_WHITESPACE","\n                    ",584],["T_IF","if",585],["T_WHITESPACE"," ",585],"(","!",["T_ISSET","isset",585],"(",["T_VARIABLE","$pdf",585],")",")","{",["T_WHITESPACE","\n                        ",585],["T_VARIABLE","$pdf",586],["T_WHITESPACE"," ",586],"=",["T_WHITESPACE"," ",586],["T_STRING","Mage",586],["T_DOUBLE_COLON","::",586],["T_STRING","getModel",586],"(",["T_CONSTANT_ENCAPSED_STRING","'sales\/order_pdf_invoice'",586],")",["T_OBJECT_OPERATOR","->",586],["T_STRING","getPdf",586],"(",["T_VARIABLE","$invoices",586],")",";",["T_WHITESPACE","\n                    ",586],"}",["T_WHITESPACE"," ",587],["T_ELSE","else",587],["T_WHITESPACE"," ",587],"{",["T_WHITESPACE","\n                        ",587],["T_VARIABLE","$pages",588],["T_WHITESPACE"," ",588],"=",["T_WHITESPACE"," ",588],["T_STRING","Mage",588],["T_DOUBLE_COLON","::",588],["T_STRING","getModel",588],"(",["T_CONSTANT_ENCAPSED_STRING","'sales\/order_pdf_invoice'",588],")",["T_OBJECT_OPERATOR","->",588],["T_STRING","getPdf",588],"(",["T_VARIABLE","$invoices",588],")",";",["T_WHITESPACE","\n                        ",588],["T_VARIABLE","$pdf",589],["T_OBJECT_OPERATOR","->",589],["T_STRING","pages",589],["T_WHITESPACE"," ",589],"=",["T_WHITESPACE"," ",589],["T_STRING","array_merge",589],["T_WHITESPACE"," ",589],"(",["T_VARIABLE","$pdf",589],["T_OBJECT_OPERATOR","->",589],["T_STRING","pages",589],",",["T_WHITESPACE"," ",589],["T_VARIABLE","$pages",589],["T_OBJECT_OPERATOR","->",589],["T_STRING","pages",589],")",";",["T_WHITESPACE","\n                    ",589],"}",["T_WHITESPACE","\n                ",590],"}",["T_WHITESPACE","\n\n                ",591],["T_VARIABLE","$shipments",593],["T_WHITESPACE"," ",593],"=",["T_WHITESPACE"," ",593],["T_STRING","Mage",593],["T_DOUBLE_COLON","::",593],["T_STRING","getResourceModel",593],"(",["T_CONSTANT_ENCAPSED_STRING","'sales\/order_shipment_collection'",593],")",["T_WHITESPACE","\n                    ",593],["T_OBJECT_OPERATOR","->",594],["T_STRING","setOrderFilter",594],"(",["T_VARIABLE","$orderId",594],")",["T_WHITESPACE","\n                    ",594],["T_OBJECT_OPERATOR","->",595],["T_STRING","load",595],"(",")",";",["T_WHITESPACE","\n                ",595],["T_IF","if",596],["T_WHITESPACE"," ",596],"(",["T_VARIABLE","$shipments",596],["T_OBJECT_OPERATOR","->",596],["T_STRING","getSize",596],"(",")",")","{",["T_WHITESPACE","\n                    ",596],["T_VARIABLE","$flag",597],["T_WHITESPACE"," ",597],"=",["T_WHITESPACE"," ",597],["T_STRING","true",597],";",["T_WHITESPACE","\n                    ",597],["T_IF","if",598],["T_WHITESPACE"," ",598],"(","!",["T_ISSET","isset",598],"(",["T_VARIABLE","$pdf",598],")",")","{",["T_WHITESPACE","\n                        ",598],["T_VARIABLE","$pdf",599],["T_WHITESPACE"," ",599],"=",["T_WHITESPACE"," ",599],["T_STRING","Mage",599],["T_DOUBLE_COLON","::",599],["T_STRING","getModel",599],"(",["T_CONSTANT_ENCAPSED_STRING","'sales\/order_pdf_shipment'",599],")",["T_OBJECT_OPERATOR","->",599],["T_STRING","getPdf",599],"(",["T_VARIABLE","$shipments",599],")",";",["T_WHITESPACE","\n                    ",599],"}",["T_WHITESPACE"," ",600],["T_ELSE","else",600],["T_WHITESPACE"," ",600],"{",["T_WHITESPACE","\n                        ",600],["T_VARIABLE","$pages",601],["T_WHITESPACE"," ",601],"=",["T_WHITESPACE"," ",601],["T_STRING","Mage",601],["T_DOUBLE_COLON","::",601],["T_STRING","getModel",601],"(",["T_CONSTANT_ENCAPSED_STRING","'sales\/order_pdf_shipment'",601],")",["T_OBJECT_OPERATOR","->",601],["T_STRING","getPdf",601],"(",["T_VARIABLE","$shipments",601],")",";",["T_WHITESPACE","\n                        ",601],["T_VARIABLE","$pdf",602],["T_OBJECT_OPERATOR","->",602],["T_STRING","pages",602],["T_WHITESPACE"," ",602],"=",["T_WHITESPACE"," ",602],["T_STRING","array_merge",602],["T_WHITESPACE"," ",602],"(",["T_VARIABLE","$pdf",602],["T_OBJECT_OPERATOR","->",602],["T_STRING","pages",602],",",["T_WHITESPACE"," ",602],["T_VARIABLE","$pages",602],["T_OBJECT_OPERATOR","->",602],["T_STRING","pages",602],")",";",["T_WHITESPACE","\n                    ",602],"}",["T_WHITESPACE","\n                ",603],"}",["T_WHITESPACE","\n\n                ",604],["T_VARIABLE","$creditmemos",606],["T_WHITESPACE"," ",606],"=",["T_WHITESPACE"," ",606],["T_STRING","Mage",606],["T_DOUBLE_COLON","::",606],["T_STRING","getResourceModel",606],"(",["T_CONSTANT_ENCAPSED_STRING","'sales\/order_creditmemo_collection'",606],")",["T_WHITESPACE","\n                    ",606],["T_OBJECT_OPERATOR","->",607],["T_STRING","setOrderFilter",607],"(",["T_VARIABLE","$orderId",607],")",["T_WHITESPACE","\n                    ",607],["T_OBJECT_OPERATOR","->",608],["T_STRING","load",608],"(",")",";",["T_WHITESPACE","\n                ",608],["T_IF","if",609],["T_WHITESPACE"," ",609],"(",["T_VARIABLE","$creditmemos",609],["T_OBJECT_OPERATOR","->",609],["T_STRING","getSize",609],"(",")",")",["T_WHITESPACE"," ",609],"{",["T_WHITESPACE","\n                    ",609],["T_VARIABLE","$flag",610],["T_WHITESPACE"," ",610],"=",["T_WHITESPACE"," ",610],["T_STRING","true",610],";",["T_WHITESPACE","\n                    ",610],["T_IF","if",611],["T_WHITESPACE"," ",611],"(","!",["T_ISSET","isset",611],"(",["T_VARIABLE","$pdf",611],")",")","{",["T_WHITESPACE","\n                        ",611],["T_VARIABLE","$pdf",612],["T_WHITESPACE"," ",612],"=",["T_WHITESPACE"," ",612],["T_STRING","Mage",612],["T_DOUBLE_COLON","::",612],["T_STRING","getModel",612],"(",["T_CONSTANT_ENCAPSED_STRING","'sales\/order_pdf_creditmemo'",612],")",["T_OBJECT_OPERATOR","->",612],["T_STRING","getPdf",612],"(",["T_VARIABLE","$creditmemos",612],")",";",["T_WHITESPACE","\n                    ",612],"}",["T_WHITESPACE"," ",613],["T_ELSE","else",613],["T_WHITESPACE"," ",613],"{",["T_WHITESPACE","\n                        ",613],["T_VARIABLE","$pages",614],["T_WHITESPACE"," ",614],"=",["T_WHITESPACE"," ",614],["T_STRING","Mage",614],["T_DOUBLE_COLON","::",614],["T_STRING","getModel",614],"(",["T_CONSTANT_ENCAPSED_STRING","'sales\/order_pdf_creditmemo'",614],")",["T_OBJECT_OPERATOR","->",614],["T_STRING","getPdf",614],"(",["T_VARIABLE","$creditmemos",614],")",";",["T_WHITESPACE","\n                        ",614],["T_VARIABLE","$pdf",615],["T_OBJECT_OPERATOR","->",615],["T_STRING","pages",615],["T_WHITESPACE"," ",615],"=",["T_WHITESPACE"," ",615],["T_STRING","array_merge",615],["T_WHITESPACE"," ",615],"(",["T_VARIABLE","$pdf",615],["T_OBJECT_OPERATOR","->",615],["T_STRING","pages",615],",",["T_WHITESPACE"," ",615],["T_VARIABLE","$pages",615],["T_OBJECT_OPERATOR","->",615],["T_STRING","pages",615],")",";",["T_WHITESPACE","\n                    ",615],"}",["T_WHITESPACE","\n                ",616],"}",["T_WHITESPACE","\n            ",617],"}",["T_WHITESPACE","\n            ",618],["T_IF","if",619],["T_WHITESPACE"," ",619],"(",["T_VARIABLE","$flag",619],")",["T_WHITESPACE"," ",619],"{",["T_WHITESPACE","\n                ",619],["T_RETURN","return",620],["T_WHITESPACE"," ",620],["T_VARIABLE","$this",620],["T_OBJECT_OPERATOR","->",620],["T_STRING","_prepareDownloadResponse",620],"(",["T_WHITESPACE","\n                    ",620],["T_CONSTANT_ENCAPSED_STRING","'docs'",621],".",["T_STRING","Mage",621],["T_DOUBLE_COLON","::",621],["T_STRING","getSingleton",621],"(",["T_CONSTANT_ENCAPSED_STRING","'core\/date'",621],")",["T_OBJECT_OPERATOR","->",621],["T_STRING","date",621],"(",["T_CONSTANT_ENCAPSED_STRING","'Y-m-d_H-i-s'",621],")",".",["T_CONSTANT_ENCAPSED_STRING","'.pdf'",621],",",["T_WHITESPACE","\n                    ",621],["T_VARIABLE","$pdf",622],["T_OBJECT_OPERATOR","->",622],["T_STRING","render",622],"(",")",",",["T_WHITESPACE"," ",622],["T_CONSTANT_ENCAPSED_STRING","'application\/pdf'",622],["T_WHITESPACE","\n                ",622],")",";",["T_WHITESPACE","\n            ",623],"}",["T_WHITESPACE"," ",624],["T_ELSE","else",624],["T_WHITESPACE"," ",624],"{",["T_WHITESPACE","\n                ",624],["T_VARIABLE","$this",625],["T_OBJECT_OPERATOR","->",625],["T_STRING","_getSession",625],"(",")",["T_OBJECT_OPERATOR","->",625],["T_STRING","addError",625],"(",["T_VARIABLE","$this",625],["T_OBJECT_OPERATOR","->",625],["T_STRING","__",625],"(",["T_CONSTANT_ENCAPSED_STRING","'There are no printable documents related to selected orders.'",625],")",")",";",["T_WHITESPACE","\n                ",625],["T_VARIABLE","$this",626],["T_OBJECT_OPERATOR","->",626],["T_STRING","_redirect",626],"(",["T_CONSTANT_ENCAPSED_STRING","'*\/*\/'",626],")",";",["T_WHITESPACE","\n            ",626],"}",["T_WHITESPACE","\n        ",627],"}",["T_WHITESPACE","\n        ",628],["T_VARIABLE","$this",629],["T_OBJECT_OPERATOR","->",629],["T_STRING","_redirect",629],"(",["T_CONSTANT_ENCAPSED_STRING","'*\/*\/'",629],")",";",["T_WHITESPACE","\n    ",629],"}",["T_WHITESPACE","\n\n    ",630],["T_DOC_COMMENT","\/**\n     * Atempt to void the order payment\n     *\/",632],["T_WHITESPACE","\n    ",634],["T_PUBLIC","public",635],["T_WHITESPACE"," ",635],["T_FUNCTION","function",635],["T_WHITESPACE"," ",635],["T_STRING","voidPaymentAction",635],"(",")",["T_WHITESPACE","\n    ",635],"{",["T_WHITESPACE","\n        ",636],["T_IF","if",637],["T_WHITESPACE"," ",637],"(","!",["T_VARIABLE","$order",637],["T_WHITESPACE"," ",637],"=",["T_WHITESPACE"," ",637],["T_VARIABLE","$this",637],["T_OBJECT_OPERATOR","->",637],["T_STRING","_initOrder",637],"(",")",")",["T_WHITESPACE"," ",637],"{",["T_WHITESPACE","\n            ",637],["T_RETURN","return",638],";",["T_WHITESPACE","\n        ",638],"}",["T_WHITESPACE","\n        ",639],["T_TRY","try",640],["T_WHITESPACE"," ",640],"{",["T_WHITESPACE","\n            ",640],["T_VARIABLE","$order",641],["T_OBJECT_OPERATOR","->",641],["T_STRING","getPayment",641],"(",")",["T_OBJECT_OPERATOR","->",641],["T_STRING","void",641],"(",["T_WHITESPACE","\n                ",641],["T_NEW","new",642],["T_WHITESPACE"," ",642],["T_STRING","Varien_Object",642],"(",")",["T_WHITESPACE"," ",642],["T_COMMENT","\/\/ workaround for backwards compatibility\n",642],["T_WHITESPACE","            ",643],")",";",["T_WHITESPACE","\n            ",643],["T_VARIABLE","$order",644],["T_OBJECT_OPERATOR","->",644],["T_STRING","save",644],"(",")",";",["T_WHITESPACE","\n            ",644],["T_VARIABLE","$this",645],["T_OBJECT_OPERATOR","->",645],["T_STRING","_getSession",645],"(",")",["T_OBJECT_OPERATOR","->",645],["T_STRING","addSuccess",645],"(",["T_VARIABLE","$this",645],["T_OBJECT_OPERATOR","->",645],["T_STRING","__",645],"(",["T_CONSTANT_ENCAPSED_STRING","'The payment has been voided.'",645],")",")",";",["T_WHITESPACE","\n        ",645],"}",["T_WHITESPACE"," ",646],["T_CATCH","catch",646],["T_WHITESPACE"," ",646],"(",["T_STRING","Mage_Core_Exception",646],["T_WHITESPACE"," ",646],["T_VARIABLE","$e",646],")",["T_WHITESPACE"," ",646],"{",["T_WHITESPACE","\n            ",646],["T_VARIABLE","$this",647],["T_OBJECT_OPERATOR","->",647],["T_STRING","_getSession",647],"(",")",["T_OBJECT_OPERATOR","->",647],["T_STRING","addError",647],"(",["T_VARIABLE","$e",647],["T_OBJECT_OPERATOR","->",647],["T_STRING","getMessage",647],"(",")",")",";",["T_WHITESPACE","\n        ",647],"}",["T_WHITESPACE"," ",648],["T_CATCH","catch",648],["T_WHITESPACE"," ",648],"(",["T_STRING","Exception",648],["T_WHITESPACE"," ",648],["T_VARIABLE","$e",648],")",["T_WHITESPACE"," ",648],"{",["T_WHITESPACE","\n            ",648],["T_VARIABLE","$this",649],["T_OBJECT_OPERATOR","->",649],["T_STRING","_getSession",649],"(",")",["T_OBJECT_OPERATOR","->",649],["T_STRING","addError",649],"(",["T_VARIABLE","$this",649],["T_OBJECT_OPERATOR","->",649],["T_STRING","__",649],"(",["T_CONSTANT_ENCAPSED_STRING","'Failed to void the payment.'",649],")",")",";",["T_WHITESPACE","\n            ",649],["T_STRING","Mage",650],["T_DOUBLE_COLON","::",650],["T_STRING","logException",650],"(",["T_VARIABLE","$e",650],")",";",["T_WHITESPACE","\n        ",650],"}",["T_WHITESPACE","\n        ",651],["T_VARIABLE","$this",652],["T_OBJECT_OPERATOR","->",652],["T_STRING","_redirect",652],"(",["T_CONSTANT_ENCAPSED_STRING","'*\/*\/view'",652],",",["T_WHITESPACE"," ",652],["T_ARRAY","array",652],"(",["T_CONSTANT_ENCAPSED_STRING","'order_id'",652],["T_WHITESPACE"," ",652],["T_DOUBLE_ARROW","=>",652],["T_WHITESPACE"," ",652],["T_VARIABLE","$order",652],["T_OBJECT_OPERATOR","->",652],["T_STRING","getId",652],"(",")",")",")",";",["T_WHITESPACE","\n    ",652],"}",["T_WHITESPACE","\n\n    ",653],["T_DOC_COMMENT","\/**\n     * Acl check for admin\n     *\n     * @return bool\n     *\/",655],["T_WHITESPACE","\n    ",659],["T_PROTECTED","protected",660],["T_WHITESPACE"," ",660],["T_FUNCTION","function",660],["T_WHITESPACE"," ",660],["T_STRING","_isAllowed",660],"(",")",["T_WHITESPACE","\n    ",660],"{",["T_WHITESPACE","\n        ",661],["T_VARIABLE","$action",662],["T_WHITESPACE"," ",662],"=",["T_WHITESPACE"," ",662],["T_STRING","strtolower",662],"(",["T_VARIABLE","$this",662],["T_OBJECT_OPERATOR","->",662],["T_STRING","getRequest",662],"(",")",["T_OBJECT_OPERATOR","->",662],["T_STRING","getActionName",662],"(",")",")",";",["T_WHITESPACE","\n        ",662],["T_SWITCH","switch",663],["T_WHITESPACE"," ",663],"(",["T_VARIABLE","$action",663],")",["T_WHITESPACE"," ",663],"{",["T_WHITESPACE","\n            ",663],["T_CASE","case",664],["T_WHITESPACE"," ",664],["T_CONSTANT_ENCAPSED_STRING","'hold'",664],":",["T_WHITESPACE","\n                ",664],["T_VARIABLE","$aclResource",665],["T_WHITESPACE"," ",665],"=",["T_WHITESPACE"," ",665],["T_CONSTANT_ENCAPSED_STRING","'sales\/order\/actions\/hold'",665],";",["T_WHITESPACE","\n                ",665],["T_BREAK","break",666],";",["T_WHITESPACE","\n            ",666],["T_CASE","case",667],["T_WHITESPACE"," ",667],["T_CONSTANT_ENCAPSED_STRING","'unhold'",667],":",["T_WHITESPACE","\n                ",667],["T_VARIABLE","$aclResource",668],["T_WHITESPACE"," ",668],"=",["T_WHITESPACE"," ",668],["T_CONSTANT_ENCAPSED_STRING","'sales\/order\/actions\/unhold'",668],";",["T_WHITESPACE","\n                ",668],["T_BREAK","break",669],";",["T_WHITESPACE","\n            ",669],["T_CASE","case",670],["T_WHITESPACE"," ",670],["T_CONSTANT_ENCAPSED_STRING","'email'",670],":",["T_WHITESPACE","\n                ",670],["T_VARIABLE","$aclResource",671],["T_WHITESPACE"," ",671],"=",["T_WHITESPACE"," ",671],["T_CONSTANT_ENCAPSED_STRING","'sales\/order\/actions\/email'",671],";",["T_WHITESPACE","\n                ",671],["T_BREAK","break",672],";",["T_WHITESPACE","\n            ",672],["T_CASE","case",673],["T_WHITESPACE"," ",673],["T_CONSTANT_ENCAPSED_STRING","'cancel'",673],":",["T_WHITESPACE","\n                ",673],["T_VARIABLE","$aclResource",674],["T_WHITESPACE"," ",674],"=",["T_WHITESPACE"," ",674],["T_CONSTANT_ENCAPSED_STRING","'sales\/order\/actions\/cancel'",674],";",["T_WHITESPACE","\n                ",674],["T_BREAK","break",675],";",["T_WHITESPACE","\n            ",675],["T_CASE","case",676],["T_WHITESPACE"," ",676],["T_CONSTANT_ENCAPSED_STRING","'view'",676],":",["T_WHITESPACE","\n                ",676],["T_VARIABLE","$aclResource",677],["T_WHITESPACE"," ",677],"=",["T_WHITESPACE"," ",677],["T_CONSTANT_ENCAPSED_STRING","'sales\/order\/actions\/view'",677],";",["T_WHITESPACE","\n                ",677],["T_BREAK","break",678],";",["T_WHITESPACE","\n            ",678],["T_CASE","case",679],["T_WHITESPACE"," ",679],["T_CONSTANT_ENCAPSED_STRING","'addcomment'",679],":",["T_WHITESPACE","\n                ",679],["T_VARIABLE","$aclResource",680],["T_WHITESPACE"," ",680],"=",["T_WHITESPACE"," ",680],["T_CONSTANT_ENCAPSED_STRING","'sales\/order\/actions\/comment'",680],";",["T_WHITESPACE","\n                ",680],["T_BREAK","break",681],";",["T_WHITESPACE","\n            ",681],["T_CASE","case",682],["T_WHITESPACE"," ",682],["T_CONSTANT_ENCAPSED_STRING","'creditmemos'",682],":",["T_WHITESPACE","\n                ",682],["T_VARIABLE","$aclResource",683],["T_WHITESPACE"," ",683],"=",["T_WHITESPACE"," ",683],["T_CONSTANT_ENCAPSED_STRING","'sales\/order\/actions\/creditmemo'",683],";",["T_WHITESPACE","\n                ",683],["T_BREAK","break",684],";",["T_WHITESPACE","\n            ",684],["T_CASE","case",685],["T_WHITESPACE"," ",685],["T_CONSTANT_ENCAPSED_STRING","'reviewpayment'",685],":",["T_WHITESPACE","\n                ",685],["T_VARIABLE","$aclResource",686],["T_WHITESPACE"," ",686],"=",["T_WHITESPACE"," ",686],["T_CONSTANT_ENCAPSED_STRING","'sales\/order\/actions\/review_payment'",686],";",["T_WHITESPACE","\n                ",686],["T_BREAK","break",687],";",["T_WHITESPACE","\n            ",687],["T_DEFAULT","default",688],":",["T_WHITESPACE","\n                ",688],["T_VARIABLE","$aclResource",689],["T_WHITESPACE"," ",689],"=",["T_WHITESPACE"," ",689],["T_CONSTANT_ENCAPSED_STRING","'sales\/order'",689],";",["T_WHITESPACE","\n                ",689],["T_BREAK","break",690],";",["T_WHITESPACE","\n\n        ",690],"}",["T_WHITESPACE","\n        ",692],["T_RETURN","return",693],["T_WHITESPACE"," ",693],["T_STRING","Mage",693],["T_DOUBLE_COLON","::",693],["T_STRING","getSingleton",693],"(",["T_CONSTANT_ENCAPSED_STRING","'admin\/session'",693],")",["T_OBJECT_OPERATOR","->",693],["T_STRING","isAllowed",693],"(",["T_VARIABLE","$aclResource",693],")",";",["T_WHITESPACE","\n    ",693],"}",["T_WHITESPACE","\n\n    ",694],["T_DOC_COMMENT","\/**\n     * Export order grid to CSV format\n     *\/",696],["T_WHITESPACE","\n    ",698],["T_PUBLIC","public",699],["T_WHITESPACE"," ",699],["T_FUNCTION","function",699],["T_WHITESPACE"," ",699],["T_STRING","exportCsvAction",699],"(",")",["T_WHITESPACE","\n    ",699],"{",["T_WHITESPACE","\n        ",700],["T_VARIABLE","$fileName",701],["T_WHITESPACE","   ",701],"=",["T_WHITESPACE"," ",701],["T_CONSTANT_ENCAPSED_STRING","'orders.csv'",701],";",["T_WHITESPACE","\n        ",701],["T_VARIABLE","$grid",702],["T_WHITESPACE","       ",702],"=",["T_WHITESPACE"," ",702],["T_VARIABLE","$this",702],["T_OBJECT_OPERATOR","->",702],["T_STRING","getLayout",702],"(",")",["T_OBJECT_OPERATOR","->",702],["T_STRING","createBlock",702],"(",["T_CONSTANT_ENCAPSED_STRING","'adminhtml\/sales_order_grid'",702],")",";",["T_WHITESPACE","\n        ",702],["T_VARIABLE","$this",703],["T_OBJECT_OPERATOR","->",703],["T_STRING","_prepareDownloadResponse",703],"(",["T_VARIABLE","$fileName",703],",",["T_WHITESPACE"," ",703],["T_VARIABLE","$grid",703],["T_OBJECT_OPERATOR","->",703],["T_STRING","getCsvFile",703],"(",")",")",";",["T_WHITESPACE","\n    ",703],"}",["T_WHITESPACE","\n\n    ",704],["T_DOC_COMMENT","\/**\n     *  Export order grid to Excel XML format\n     *\/",706],["T_WHITESPACE","\n    ",708],["T_PUBLIC","public",709],["T_WHITESPACE"," ",709],["T_FUNCTION","function",709],["T_WHITESPACE"," ",709],["T_STRING","exportExcelAction",709],"(",")",["T_WHITESPACE","\n    ",709],"{",["T_WHITESPACE","\n        ",710],["T_VARIABLE","$fileName",711],["T_WHITESPACE","   ",711],"=",["T_WHITESPACE"," ",711],["T_CONSTANT_ENCAPSED_STRING","'orders.xml'",711],";",["T_WHITESPACE","\n        ",711],["T_VARIABLE","$grid",712],["T_WHITESPACE","       ",712],"=",["T_WHITESPACE"," ",712],["T_VARIABLE","$this",712],["T_OBJECT_OPERATOR","->",712],["T_STRING","getLayout",712],"(",")",["T_OBJECT_OPERATOR","->",712],["T_STRING","createBlock",712],"(",["T_CONSTANT_ENCAPSED_STRING","'adminhtml\/sales_order_grid'",712],")",";",["T_WHITESPACE","\n        ",712],["T_VARIABLE","$this",713],["T_OBJECT_OPERATOR","->",713],["T_STRING","_prepareDownloadResponse",713],"(",["T_VARIABLE","$fileName",713],",",["T_WHITESPACE"," ",713],["T_VARIABLE","$grid",713],["T_OBJECT_OPERATOR","->",713],["T_STRING","getExcelFile",713],"(",["T_VARIABLE","$fileName",713],")",")",";",["T_WHITESPACE","\n    ",713],"}",["T_WHITESPACE","\n\n    ",714],["T_DOC_COMMENT","\/**\n     * Order transactions grid ajax action\n     *\n     *\/",716],["T_WHITESPACE","\n    ",719],["T_PUBLIC","public",720],["T_WHITESPACE"," ",720],["T_FUNCTION","function",720],["T_WHITESPACE"," ",720],["T_STRING","transactionsAction",720],"(",")",["T_WHITESPACE","\n    ",720],"{",["T_WHITESPACE","\n        ",721],["T_VARIABLE","$this",722],["T_OBJECT_OPERATOR","->",722],["T_STRING","_initOrder",722],"(",")",";",["T_WHITESPACE","\n        ",722],["T_VARIABLE","$this",723],["T_OBJECT_OPERATOR","->",723],["T_STRING","loadLayout",723],"(",["T_STRING","false",723],")",";",["T_WHITESPACE","\n        ",723],["T_VARIABLE","$this",724],["T_OBJECT_OPERATOR","->",724],["T_STRING","renderLayout",724],"(",")",";",["T_WHITESPACE","\n    ",724],"}",["T_WHITESPACE","\n\n    ",725],["T_DOC_COMMENT","\/**\n     * Edit order address form\n     *\/",727],["T_WHITESPACE","\n    ",729],["T_PUBLIC","public",730],["T_WHITESPACE"," ",730],["T_FUNCTION","function",730],["T_WHITESPACE"," ",730],["T_STRING","addressAction",730],"(",")",["T_WHITESPACE","\n    ",730],"{",["T_WHITESPACE","\n        ",731],["T_VARIABLE","$addressId",732],["T_WHITESPACE"," ",732],"=",["T_WHITESPACE"," ",732],["T_VARIABLE","$this",732],["T_OBJECT_OPERATOR","->",732],["T_STRING","getRequest",732],"(",")",["T_OBJECT_OPERATOR","->",732],["T_STRING","getParam",732],"(",["T_CONSTANT_ENCAPSED_STRING","'address_id'",732],")",";",["T_WHITESPACE","\n        ",732],["T_VARIABLE","$address",733],["T_WHITESPACE"," ",733],"=",["T_WHITESPACE"," ",733],["T_STRING","Mage",733],["T_DOUBLE_COLON","::",733],["T_STRING","getModel",733],"(",["T_CONSTANT_ENCAPSED_STRING","'sales\/order_address'",733],")",["T_WHITESPACE","\n            ",733],["T_OBJECT_OPERATOR","->",734],["T_STRING","getCollection",734],"(",")",["T_WHITESPACE","\n            ",734],["T_OBJECT_OPERATOR","->",735],["T_STRING","addFilter",735],"(",["T_CONSTANT_ENCAPSED_STRING","'entity_id'",735],",",["T_WHITESPACE"," ",735],["T_VARIABLE","$addressId",735],")",["T_WHITESPACE","\n            ",735],["T_OBJECT_OPERATOR","->",736],["T_STRING","getItemById",736],"(",["T_VARIABLE","$addressId",736],")",";",["T_WHITESPACE","\n        ",736],["T_IF","if",737],["T_WHITESPACE"," ",737],"(",["T_VARIABLE","$address",737],")",["T_WHITESPACE"," ",737],"{",["T_WHITESPACE","\n            ",737],["T_STRING","Mage",738],["T_DOUBLE_COLON","::",738],["T_STRING","register",738],"(",["T_CONSTANT_ENCAPSED_STRING","'order_address'",738],",",["T_WHITESPACE"," ",738],["T_VARIABLE","$address",738],")",";",["T_WHITESPACE","\n            ",738],["T_VARIABLE","$this",739],["T_OBJECT_OPERATOR","->",739],["T_STRING","loadLayout",739],"(",")",";",["T_WHITESPACE","\n            ",739],["T_COMMENT","\/\/ Do not display VAT validation button on edit order address form\n",740],["T_WHITESPACE","            ",741],["T_VARIABLE","$addressFormContainer",741],["T_WHITESPACE"," ",741],"=",["T_WHITESPACE"," ",741],["T_VARIABLE","$this",741],["T_OBJECT_OPERATOR","->",741],["T_STRING","getLayout",741],"(",")",["T_OBJECT_OPERATOR","->",741],["T_STRING","getBlock",741],"(",["T_CONSTANT_ENCAPSED_STRING","'sales_order_address.form.container'",741],")",";",["T_WHITESPACE","\n            ",741],["T_IF","if",742],["T_WHITESPACE"," ",742],"(",["T_VARIABLE","$addressFormContainer",742],")",["T_WHITESPACE"," ",742],"{",["T_WHITESPACE","\n                ",742],["T_VARIABLE","$addressFormContainer",743],["T_OBJECT_OPERATOR","->",743],["T_STRING","getChild",743],"(",["T_CONSTANT_ENCAPSED_STRING","'form'",743],")",["T_OBJECT_OPERATOR","->",743],["T_STRING","setDisplayVatValidationButton",743],"(",["T_STRING","false",743],")",";",["T_WHITESPACE","\n            ",743],"}",["T_WHITESPACE","\n\n            ",744],["T_VARIABLE","$this",746],["T_OBJECT_OPERATOR","->",746],["T_STRING","renderLayout",746],"(",")",";",["T_WHITESPACE","\n        ",746],"}",["T_WHITESPACE"," ",747],["T_ELSE","else",747],["T_WHITESPACE"," ",747],"{",["T_WHITESPACE","\n            ",747],["T_VARIABLE","$this",748],["T_OBJECT_OPERATOR","->",748],["T_STRING","_redirect",748],"(",["T_CONSTANT_ENCAPSED_STRING","'*\/*\/'",748],")",";",["T_WHITESPACE","\n        ",748],"}",["T_WHITESPACE","\n    ",749],"}",["T_WHITESPACE","\n\n    ",750],["T_DOC_COMMENT","\/**\n     * Save order address\n     *\/",752],["T_WHITESPACE","\n    ",754],["T_PUBLIC","public",755],["T_WHITESPACE"," ",755],["T_FUNCTION","function",755],["T_WHITESPACE"," ",755],["T_STRING","addressSaveAction",755],"(",")",["T_WHITESPACE","\n    ",755],"{",["T_WHITESPACE","\n        ",756],["T_VARIABLE","$addressId",757],["T_WHITESPACE","  ",757],"=",["T_WHITESPACE"," ",757],["T_VARIABLE","$this",757],["T_OBJECT_OPERATOR","->",757],["T_STRING","getRequest",757],"(",")",["T_OBJECT_OPERATOR","->",757],["T_STRING","getParam",757],"(",["T_CONSTANT_ENCAPSED_STRING","'address_id'",757],")",";",["T_WHITESPACE","\n        ",757],["T_VARIABLE","$address",758],["T_WHITESPACE","    ",758],"=",["T_WHITESPACE"," ",758],["T_STRING","Mage",758],["T_DOUBLE_COLON","::",758],["T_STRING","getModel",758],"(",["T_CONSTANT_ENCAPSED_STRING","'sales\/order_address'",758],")",["T_OBJECT_OPERATOR","->",758],["T_STRING","load",758],"(",["T_VARIABLE","$addressId",758],")",";",["T_WHITESPACE","\n        ",758],["T_VARIABLE","$data",759],["T_WHITESPACE","       ",759],"=",["T_WHITESPACE"," ",759],["T_VARIABLE","$this",759],["T_OBJECT_OPERATOR","->",759],["T_STRING","getRequest",759],"(",")",["T_OBJECT_OPERATOR","->",759],["T_STRING","getPost",759],"(",")",";",["T_WHITESPACE","\n        ",759],["T_IF","if",760],["T_WHITESPACE"," ",760],"(",["T_VARIABLE","$data",760],["T_WHITESPACE"," ",760],["T_BOOLEAN_AND","&&",760],["T_WHITESPACE"," ",760],["T_VARIABLE","$address",760],["T_OBJECT_OPERATOR","->",760],["T_STRING","getId",760],"(",")",")",["T_WHITESPACE"," ",760],"{",["T_WHITESPACE","\n            ",760],["T_VARIABLE","$address",761],["T_OBJECT_OPERATOR","->",761],["T_STRING","addData",761],"(",["T_VARIABLE","$data",761],")",";",["T_WHITESPACE","\n            ",761],["T_TRY","try",762],["T_WHITESPACE"," ",762],"{",["T_WHITESPACE","\n                ",762],["T_VARIABLE","$address",763],["T_OBJECT_OPERATOR","->",763],["T_STRING","implodeStreetAddress",763],"(",")",["T_WHITESPACE","\n                    ",763],["T_OBJECT_OPERATOR","->",764],["T_STRING","save",764],"(",")",";",["T_WHITESPACE","\n                ",764],["T_VARIABLE","$this",765],["T_OBJECT_OPERATOR","->",765],["T_STRING","_getSession",765],"(",")",["T_OBJECT_OPERATOR","->",765],["T_STRING","addSuccess",765],"(",["T_STRING","Mage",765],["T_DOUBLE_COLON","::",765],["T_STRING","helper",765],"(",["T_CONSTANT_ENCAPSED_STRING","'sales'",765],")",["T_OBJECT_OPERATOR","->",765],["T_STRING","__",765],"(",["T_CONSTANT_ENCAPSED_STRING","'The order address has been updated.'",765],")",")",";",["T_WHITESPACE","\n                ",765],["T_VARIABLE","$this",766],["T_OBJECT_OPERATOR","->",766],["T_STRING","_redirect",766],"(",["T_CONSTANT_ENCAPSED_STRING","'*\/*\/view'",766],",",["T_WHITESPACE"," ",766],["T_ARRAY","array",766],"(",["T_CONSTANT_ENCAPSED_STRING","'order_id'",766],["T_DOUBLE_ARROW","=>",766],["T_VARIABLE","$address",766],["T_OBJECT_OPERATOR","->",766],["T_STRING","getParentId",766],"(",")",")",")",";",["T_WHITESPACE","\n                ",766],["T_RETURN","return",767],";",["T_WHITESPACE","\n            ",767],"}",["T_WHITESPACE"," ",768],["T_CATCH","catch",768],["T_WHITESPACE"," ",768],"(",["T_STRING","Mage_Core_Exception",768],["T_WHITESPACE"," ",768],["T_VARIABLE","$e",768],")",["T_WHITESPACE"," ",768],"{",["T_WHITESPACE","\n                ",768],["T_VARIABLE","$this",769],["T_OBJECT_OPERATOR","->",769],["T_STRING","_getSession",769],"(",")",["T_OBJECT_OPERATOR","->",769],["T_STRING","addError",769],"(",["T_VARIABLE","$e",769],["T_OBJECT_OPERATOR","->",769],["T_STRING","getMessage",769],"(",")",")",";",["T_WHITESPACE","\n            ",769],"}",["T_WHITESPACE"," ",770],["T_CATCH","catch",770],["T_WHITESPACE"," ",770],"(",["T_STRING","Exception",770],["T_WHITESPACE"," ",770],["T_VARIABLE","$e",770],")",["T_WHITESPACE"," ",770],"{",["T_WHITESPACE","\n                ",770],["T_VARIABLE","$this",771],["T_OBJECT_OPERATOR","->",771],["T_STRING","_getSession",771],"(",")",["T_OBJECT_OPERATOR","->",771],["T_STRING","addException",771],"(",["T_WHITESPACE","\n                    ",771],["T_VARIABLE","$e",772],",",["T_WHITESPACE","\n                    ",772],["T_STRING","Mage",773],["T_DOUBLE_COLON","::",773],["T_STRING","helper",773],"(",["T_CONSTANT_ENCAPSED_STRING","'sales'",773],")",["T_OBJECT_OPERATOR","->",773],["T_STRING","__",773],"(",["T_CONSTANT_ENCAPSED_STRING","'An error occurred while updating the order address. The address has not been changed.'",773],")",["T_WHITESPACE","\n                ",773],")",";",["T_WHITESPACE","\n            ",774],"}",["T_WHITESPACE","\n            ",775],["T_VARIABLE","$this",776],["T_OBJECT_OPERATOR","->",776],["T_STRING","_redirect",776],"(",["T_CONSTANT_ENCAPSED_STRING","'*\/*\/address'",776],",",["T_WHITESPACE"," ",776],["T_ARRAY","array",776],"(",["T_CONSTANT_ENCAPSED_STRING","'address_id'",776],["T_DOUBLE_ARROW","=>",776],["T_VARIABLE","$address",776],["T_OBJECT_OPERATOR","->",776],["T_STRING","getId",776],"(",")",")",")",";",["T_WHITESPACE","\n        ",776],"}",["T_WHITESPACE"," ",777],["T_ELSE","else",777],["T_WHITESPACE"," ",777],"{",["T_WHITESPACE","\n            ",777],["T_VARIABLE","$this",778],["T_OBJECT_OPERATOR","->",778],["T_STRING","_redirect",778],"(",["T_CONSTANT_ENCAPSED_STRING","'*\/*\/'",778],")",";",["T_WHITESPACE","\n        ",778],"}",["T_WHITESPACE","\n    ",779],"}",["T_WHITESPACE","\n",780],"}",["T_WHITESPACE","\n",781]]
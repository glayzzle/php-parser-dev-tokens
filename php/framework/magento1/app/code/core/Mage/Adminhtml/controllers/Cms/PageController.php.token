[["T_OPEN_TAG","<?php\n",1],["T_DOC_COMMENT","\/**\n * Magento\n *\n * NOTICE OF LICENSE\n *\n * This source file is subject to the Open Software License (OSL 3.0)\n * that is bundled with this package in the file LICENSE.txt.\n * It is also available through the world-wide-web at this URL:\n * http:\/\/opensource.org\/licenses\/osl-3.0.php\n * If you did not receive a copy of the license and are unable to\n * obtain it through the world-wide-web, please send an email\n * to license@magento.com so we can send you a copy immediately.\n *\n * DISCLAIMER\n *\n * Do not edit or add to this file if you wish to upgrade Magento to newer\n * versions in the future. If you wish to customize Magento for your\n * needs please refer to http:\/\/www.magento.com for more information.\n *\n * @category    Mage\n * @package     Mage_Adminhtml\n * @copyright  Copyright (c) 2006-2016 X.commerce, Inc. and affiliates (http:\/\/www.magento.com)\n * @license    http:\/\/opensource.org\/licenses\/osl-3.0.php  Open Software License (OSL 3.0)\n *\/",2],["T_WHITESPACE","\n\n\n",25],["T_DOC_COMMENT","\/**\n * Cms manage pages controller\n *\n * @category   Mage\n * @package    Mage_Cms\n * @author      Magento Core Team <core@magentocommerce.com>\n *\/",28],["T_WHITESPACE","\n",34],["T_CLASS","class",35],["T_WHITESPACE"," ",35],["T_STRING","Mage_Adminhtml_Cms_PageController",35],["T_WHITESPACE"," ",35],["T_EXTENDS","extends",35],["T_WHITESPACE"," ",35],["T_STRING","Mage_Adminhtml_Controller_Action",35],["T_WHITESPACE","\n",35],"{",["T_WHITESPACE","\n\n    ",36],["T_DOC_COMMENT","\/**\n     * Init actions\n     *\n     * @return Mage_Adminhtml_Cms_PageController\n     *\/",38],["T_WHITESPACE","\n    ",42],["T_PROTECTED","protected",43],["T_WHITESPACE"," ",43],["T_FUNCTION","function",43],["T_WHITESPACE"," ",43],["T_STRING","_initAction",43],"(",")",["T_WHITESPACE","\n    ",43],"{",["T_WHITESPACE","\n        ",44],["T_COMMENT","\/\/ load layout, set active menu and breadcrumbs\n",45],["T_WHITESPACE","        ",46],["T_VARIABLE","$this",46],["T_OBJECT_OPERATOR","->",46],["T_STRING","loadLayout",46],"(",")",["T_WHITESPACE","\n            ",46],["T_OBJECT_OPERATOR","->",47],["T_STRING","_setActiveMenu",47],"(",["T_CONSTANT_ENCAPSED_STRING","'cms\/page'",47],")",["T_WHITESPACE","\n            ",47],["T_OBJECT_OPERATOR","->",48],["T_STRING","_addBreadcrumb",48],"(",["T_STRING","Mage",48],["T_DOUBLE_COLON","::",48],["T_STRING","helper",48],"(",["T_CONSTANT_ENCAPSED_STRING","'cms'",48],")",["T_OBJECT_OPERATOR","->",48],["T_STRING","__",48],"(",["T_CONSTANT_ENCAPSED_STRING","'CMS'",48],")",",",["T_WHITESPACE"," ",48],["T_STRING","Mage",48],["T_DOUBLE_COLON","::",48],["T_STRING","helper",48],"(",["T_CONSTANT_ENCAPSED_STRING","'cms'",48],")",["T_OBJECT_OPERATOR","->",48],["T_STRING","__",48],"(",["T_CONSTANT_ENCAPSED_STRING","'CMS'",48],")",")",["T_WHITESPACE","\n            ",48],["T_OBJECT_OPERATOR","->",49],["T_STRING","_addBreadcrumb",49],"(",["T_STRING","Mage",49],["T_DOUBLE_COLON","::",49],["T_STRING","helper",49],"(",["T_CONSTANT_ENCAPSED_STRING","'cms'",49],")",["T_OBJECT_OPERATOR","->",49],["T_STRING","__",49],"(",["T_CONSTANT_ENCAPSED_STRING","'Manage Pages'",49],")",",",["T_WHITESPACE"," ",49],["T_STRING","Mage",49],["T_DOUBLE_COLON","::",49],["T_STRING","helper",49],"(",["T_CONSTANT_ENCAPSED_STRING","'cms'",49],")",["T_OBJECT_OPERATOR","->",49],["T_STRING","__",49],"(",["T_CONSTANT_ENCAPSED_STRING","'Manage Pages'",49],")",")",["T_WHITESPACE","\n        ",49],";",["T_WHITESPACE","\n        ",50],["T_RETURN","return",51],["T_WHITESPACE"," ",51],["T_VARIABLE","$this",51],";",["T_WHITESPACE","\n    ",51],"}",["T_WHITESPACE","\n\n    ",52],["T_DOC_COMMENT","\/**\n     * Index action\n     *\/",54],["T_WHITESPACE","\n    ",56],["T_PUBLIC","public",57],["T_WHITESPACE"," ",57],["T_FUNCTION","function",57],["T_WHITESPACE"," ",57],["T_STRING","indexAction",57],"(",")",["T_WHITESPACE","\n    ",57],"{",["T_WHITESPACE","\n        ",58],["T_VARIABLE","$this",59],["T_OBJECT_OPERATOR","->",59],["T_STRING","_title",59],"(",["T_VARIABLE","$this",59],["T_OBJECT_OPERATOR","->",59],["T_STRING","__",59],"(",["T_CONSTANT_ENCAPSED_STRING","'CMS'",59],")",")",["T_WHITESPACE","\n             ",59],["T_OBJECT_OPERATOR","->",60],["T_STRING","_title",60],"(",["T_VARIABLE","$this",60],["T_OBJECT_OPERATOR","->",60],["T_STRING","__",60],"(",["T_CONSTANT_ENCAPSED_STRING","'Pages'",60],")",")",["T_WHITESPACE","\n             ",60],["T_OBJECT_OPERATOR","->",61],["T_STRING","_title",61],"(",["T_VARIABLE","$this",61],["T_OBJECT_OPERATOR","->",61],["T_STRING","__",61],"(",["T_CONSTANT_ENCAPSED_STRING","'Manage Content'",61],")",")",";",["T_WHITESPACE","\n\n        ",61],["T_VARIABLE","$this",63],["T_OBJECT_OPERATOR","->",63],["T_STRING","_initAction",63],"(",")",";",["T_WHITESPACE","\n        ",63],["T_VARIABLE","$this",64],["T_OBJECT_OPERATOR","->",64],["T_STRING","renderLayout",64],"(",")",";",["T_WHITESPACE","\n    ",64],"}",["T_WHITESPACE","\n\n    ",65],["T_DOC_COMMENT","\/**\n     * Create new CMS page\n     *\/",67],["T_WHITESPACE","\n    ",69],["T_PUBLIC","public",70],["T_WHITESPACE"," ",70],["T_FUNCTION","function",70],["T_WHITESPACE"," ",70],["T_STRING","newAction",70],"(",")",["T_WHITESPACE","\n    ",70],"{",["T_WHITESPACE","\n        ",71],["T_COMMENT","\/\/ the same form is used to create and edit\n",72],["T_WHITESPACE","        ",73],["T_VARIABLE","$this",73],["T_OBJECT_OPERATOR","->",73],["T_STRING","_forward",73],"(",["T_CONSTANT_ENCAPSED_STRING","'edit'",73],")",";",["T_WHITESPACE","\n    ",73],"}",["T_WHITESPACE","\n\n    ",74],["T_DOC_COMMENT","\/**\n     * Edit CMS page\n     *\/",76],["T_WHITESPACE","\n    ",78],["T_PUBLIC","public",79],["T_WHITESPACE"," ",79],["T_FUNCTION","function",79],["T_WHITESPACE"," ",79],["T_STRING","editAction",79],"(",")",["T_WHITESPACE","\n    ",79],"{",["T_WHITESPACE","\n        ",80],["T_VARIABLE","$this",81],["T_OBJECT_OPERATOR","->",81],["T_STRING","_title",81],"(",["T_VARIABLE","$this",81],["T_OBJECT_OPERATOR","->",81],["T_STRING","__",81],"(",["T_CONSTANT_ENCAPSED_STRING","'CMS'",81],")",")",["T_WHITESPACE","\n             ",81],["T_OBJECT_OPERATOR","->",82],["T_STRING","_title",82],"(",["T_VARIABLE","$this",82],["T_OBJECT_OPERATOR","->",82],["T_STRING","__",82],"(",["T_CONSTANT_ENCAPSED_STRING","'Pages'",82],")",")",["T_WHITESPACE","\n             ",82],["T_OBJECT_OPERATOR","->",83],["T_STRING","_title",83],"(",["T_VARIABLE","$this",83],["T_OBJECT_OPERATOR","->",83],["T_STRING","__",83],"(",["T_CONSTANT_ENCAPSED_STRING","'Manage Content'",83],")",")",";",["T_WHITESPACE","\n\n        ",83],["T_COMMENT","\/\/ 1. Get ID and create model\n",85],["T_WHITESPACE","        ",86],["T_VARIABLE","$id",86],["T_WHITESPACE"," ",86],"=",["T_WHITESPACE"," ",86],["T_VARIABLE","$this",86],["T_OBJECT_OPERATOR","->",86],["T_STRING","getRequest",86],"(",")",["T_OBJECT_OPERATOR","->",86],["T_STRING","getParam",86],"(",["T_CONSTANT_ENCAPSED_STRING","'page_id'",86],")",";",["T_WHITESPACE","\n        ",86],["T_VARIABLE","$model",87],["T_WHITESPACE"," ",87],"=",["T_WHITESPACE"," ",87],["T_STRING","Mage",87],["T_DOUBLE_COLON","::",87],["T_STRING","getModel",87],"(",["T_CONSTANT_ENCAPSED_STRING","'cms\/page'",87],")",";",["T_WHITESPACE","\n\n        ",87],["T_COMMENT","\/\/ 2. Initial checking\n",89],["T_WHITESPACE","        ",90],["T_IF","if",90],["T_WHITESPACE"," ",90],"(",["T_VARIABLE","$id",90],")",["T_WHITESPACE"," ",90],"{",["T_WHITESPACE","\n            ",90],["T_VARIABLE","$model",91],["T_OBJECT_OPERATOR","->",91],["T_STRING","load",91],"(",["T_VARIABLE","$id",91],")",";",["T_WHITESPACE","\n            ",91],["T_IF","if",92],["T_WHITESPACE"," ",92],"(","!",["T_WHITESPACE"," ",92],["T_VARIABLE","$model",92],["T_OBJECT_OPERATOR","->",92],["T_STRING","getId",92],"(",")",")",["T_WHITESPACE"," ",92],"{",["T_WHITESPACE","\n                ",92],["T_STRING","Mage",93],["T_DOUBLE_COLON","::",93],["T_STRING","getSingleton",93],"(",["T_CONSTANT_ENCAPSED_STRING","'adminhtml\/session'",93],")",["T_OBJECT_OPERATOR","->",93],["T_STRING","addError",93],"(",["T_WHITESPACE","\n                    ",93],["T_STRING","Mage",94],["T_DOUBLE_COLON","::",94],["T_STRING","helper",94],"(",["T_CONSTANT_ENCAPSED_STRING","'cms'",94],")",["T_OBJECT_OPERATOR","->",94],["T_STRING","__",94],"(",["T_CONSTANT_ENCAPSED_STRING","'This page no longer exists.'",94],")",")",";",["T_WHITESPACE","\n                ",94],["T_VARIABLE","$this",95],["T_OBJECT_OPERATOR","->",95],["T_STRING","_redirect",95],"(",["T_CONSTANT_ENCAPSED_STRING","'*\/*\/'",95],")",";",["T_WHITESPACE","\n                ",95],["T_RETURN","return",96],";",["T_WHITESPACE","\n            ",96],"}",["T_WHITESPACE","\n        ",97],"}",["T_WHITESPACE","\n\n        ",98],["T_VARIABLE","$this",100],["T_OBJECT_OPERATOR","->",100],["T_STRING","_title",100],"(",["T_VARIABLE","$model",100],["T_OBJECT_OPERATOR","->",100],["T_STRING","getId",100],"(",")",["T_WHITESPACE"," ",100],"?",["T_WHITESPACE"," ",100],["T_VARIABLE","$model",100],["T_OBJECT_OPERATOR","->",100],["T_STRING","getTitle",100],"(",")",["T_WHITESPACE"," ",100],":",["T_WHITESPACE"," ",100],["T_VARIABLE","$this",100],["T_OBJECT_OPERATOR","->",100],["T_STRING","__",100],"(",["T_CONSTANT_ENCAPSED_STRING","'New Page'",100],")",")",";",["T_WHITESPACE","\n\n        ",100],["T_COMMENT","\/\/ 3. Set entered data if was error when we do save\n",102],["T_WHITESPACE","        ",103],["T_VARIABLE","$data",103],["T_WHITESPACE"," ",103],"=",["T_WHITESPACE"," ",103],["T_STRING","Mage",103],["T_DOUBLE_COLON","::",103],["T_STRING","getSingleton",103],"(",["T_CONSTANT_ENCAPSED_STRING","'adminhtml\/session'",103],")",["T_OBJECT_OPERATOR","->",103],["T_STRING","getFormData",103],"(",["T_STRING","true",103],")",";",["T_WHITESPACE","\n        ",103],["T_IF","if",104],["T_WHITESPACE"," ",104],"(","!",["T_WHITESPACE"," ",104],["T_EMPTY","empty",104],"(",["T_VARIABLE","$data",104],")",")",["T_WHITESPACE"," ",104],"{",["T_WHITESPACE","\n            ",104],["T_VARIABLE","$model",105],["T_OBJECT_OPERATOR","->",105],["T_STRING","setData",105],"(",["T_VARIABLE","$data",105],")",";",["T_WHITESPACE","\n        ",105],"}",["T_WHITESPACE","\n\n        ",106],["T_COMMENT","\/\/ 4. Register model to use later in blocks\n",108],["T_WHITESPACE","        ",109],["T_STRING","Mage",109],["T_DOUBLE_COLON","::",109],["T_STRING","register",109],"(",["T_CONSTANT_ENCAPSED_STRING","'cms_page'",109],",",["T_WHITESPACE"," ",109],["T_VARIABLE","$model",109],")",";",["T_WHITESPACE","\n\n        ",109],["T_COMMENT","\/\/ 5. Build edit form\n",111],["T_WHITESPACE","        ",112],["T_VARIABLE","$this",112],["T_OBJECT_OPERATOR","->",112],["T_STRING","_initAction",112],"(",")",["T_WHITESPACE","\n            ",112],["T_OBJECT_OPERATOR","->",113],["T_STRING","_addBreadcrumb",113],"(",["T_WHITESPACE","\n                ",113],["T_VARIABLE","$id",114],["T_WHITESPACE"," ",114],"?",["T_WHITESPACE"," ",114],["T_STRING","Mage",114],["T_DOUBLE_COLON","::",114],["T_STRING","helper",114],"(",["T_CONSTANT_ENCAPSED_STRING","'cms'",114],")",["T_OBJECT_OPERATOR","->",114],["T_STRING","__",114],"(",["T_CONSTANT_ENCAPSED_STRING","'Edit Page'",114],")",["T_WHITESPACE","\n                    ",114],":",["T_WHITESPACE"," ",115],["T_STRING","Mage",115],["T_DOUBLE_COLON","::",115],["T_STRING","helper",115],"(",["T_CONSTANT_ENCAPSED_STRING","'cms'",115],")",["T_OBJECT_OPERATOR","->",115],["T_STRING","__",115],"(",["T_CONSTANT_ENCAPSED_STRING","'New Page'",115],")",",",["T_WHITESPACE","\n                ",115],["T_VARIABLE","$id",116],["T_WHITESPACE"," ",116],"?",["T_WHITESPACE"," ",116],["T_STRING","Mage",116],["T_DOUBLE_COLON","::",116],["T_STRING","helper",116],"(",["T_CONSTANT_ENCAPSED_STRING","'cms'",116],")",["T_OBJECT_OPERATOR","->",116],["T_STRING","__",116],"(",["T_CONSTANT_ENCAPSED_STRING","'Edit Page'",116],")",["T_WHITESPACE","\n                    ",116],":",["T_WHITESPACE"," ",117],["T_STRING","Mage",117],["T_DOUBLE_COLON","::",117],["T_STRING","helper",117],"(",["T_CONSTANT_ENCAPSED_STRING","'cms'",117],")",["T_OBJECT_OPERATOR","->",117],["T_STRING","__",117],"(",["T_CONSTANT_ENCAPSED_STRING","'New Page'",117],")",")",";",["T_WHITESPACE","\n\n        ",117],["T_VARIABLE","$this",119],["T_OBJECT_OPERATOR","->",119],["T_STRING","renderLayout",119],"(",")",";",["T_WHITESPACE","\n    ",119],"}",["T_WHITESPACE","\n\n    ",120],["T_DOC_COMMENT","\/**\n     * Save action\n     *\/",122],["T_WHITESPACE","\n    ",124],["T_PUBLIC","public",125],["T_WHITESPACE"," ",125],["T_FUNCTION","function",125],["T_WHITESPACE"," ",125],["T_STRING","saveAction",125],"(",")",["T_WHITESPACE","\n    ",125],"{",["T_WHITESPACE","\n        ",126],["T_COMMENT","\/\/ check if data sent\n",127],["T_WHITESPACE","        ",128],["T_IF","if",128],["T_WHITESPACE"," ",128],"(",["T_VARIABLE","$data",128],["T_WHITESPACE"," ",128],"=",["T_WHITESPACE"," ",128],["T_VARIABLE","$this",128],["T_OBJECT_OPERATOR","->",128],["T_STRING","getRequest",128],"(",")",["T_OBJECT_OPERATOR","->",128],["T_STRING","getPost",128],"(",")",")",["T_WHITESPACE"," ",128],"{",["T_WHITESPACE","\n            ",128],["T_VARIABLE","$data",129],["T_WHITESPACE"," ",129],"=",["T_WHITESPACE"," ",129],["T_VARIABLE","$this",129],["T_OBJECT_OPERATOR","->",129],["T_STRING","_filterPostData",129],"(",["T_VARIABLE","$data",129],")",";",["T_WHITESPACE","\n            ",129],["T_COMMENT","\/\/init model and set data\n",130],["T_WHITESPACE","            ",131],["T_VARIABLE","$model",131],["T_WHITESPACE"," ",131],"=",["T_WHITESPACE"," ",131],["T_STRING","Mage",131],["T_DOUBLE_COLON","::",131],["T_STRING","getModel",131],"(",["T_CONSTANT_ENCAPSED_STRING","'cms\/page'",131],")",";",["T_WHITESPACE","\n\n            ",131],["T_IF","if",133],["T_WHITESPACE"," ",133],"(",["T_VARIABLE","$id",133],["T_WHITESPACE"," ",133],"=",["T_WHITESPACE"," ",133],["T_VARIABLE","$this",133],["T_OBJECT_OPERATOR","->",133],["T_STRING","getRequest",133],"(",")",["T_OBJECT_OPERATOR","->",133],["T_STRING","getParam",133],"(",["T_CONSTANT_ENCAPSED_STRING","'page_id'",133],")",")",["T_WHITESPACE"," ",133],"{",["T_WHITESPACE","\n                ",133],["T_VARIABLE","$model",134],["T_OBJECT_OPERATOR","->",134],["T_STRING","load",134],"(",["T_VARIABLE","$id",134],")",";",["T_WHITESPACE","\n            ",134],"}",["T_WHITESPACE","\n\n            ",135],["T_VARIABLE","$model",137],["T_OBJECT_OPERATOR","->",137],["T_STRING","setData",137],"(",["T_VARIABLE","$data",137],")",";",["T_WHITESPACE","\n\n            ",137],["T_STRING","Mage",139],["T_DOUBLE_COLON","::",139],["T_STRING","dispatchEvent",139],"(",["T_CONSTANT_ENCAPSED_STRING","'cms_page_prepare_save'",139],",",["T_WHITESPACE"," ",139],["T_ARRAY","array",139],"(",["T_CONSTANT_ENCAPSED_STRING","'page'",139],["T_WHITESPACE"," ",139],["T_DOUBLE_ARROW","=>",139],["T_WHITESPACE"," ",139],["T_VARIABLE","$model",139],",",["T_WHITESPACE"," ",139],["T_CONSTANT_ENCAPSED_STRING","'request'",139],["T_WHITESPACE"," ",139],["T_DOUBLE_ARROW","=>",139],["T_WHITESPACE"," ",139],["T_VARIABLE","$this",139],["T_OBJECT_OPERATOR","->",139],["T_STRING","getRequest",139],"(",")",")",")",";",["T_WHITESPACE","\n\n            ",139],["T_COMMENT","\/\/validating\n",141],["T_WHITESPACE","            ",142],["T_IF","if",142],["T_WHITESPACE"," ",142],"(","!",["T_VARIABLE","$this",142],["T_OBJECT_OPERATOR","->",142],["T_STRING","_validatePostData",142],"(",["T_VARIABLE","$data",142],")",")",["T_WHITESPACE"," ",142],"{",["T_WHITESPACE","\n                ",142],["T_VARIABLE","$this",143],["T_OBJECT_OPERATOR","->",143],["T_STRING","_redirect",143],"(",["T_CONSTANT_ENCAPSED_STRING","'*\/*\/edit'",143],",",["T_WHITESPACE"," ",143],["T_ARRAY","array",143],"(",["T_CONSTANT_ENCAPSED_STRING","'page_id'",143],["T_WHITESPACE"," ",143],["T_DOUBLE_ARROW","=>",143],["T_WHITESPACE"," ",143],["T_VARIABLE","$model",143],["T_OBJECT_OPERATOR","->",143],["T_STRING","getId",143],"(",")",",",["T_WHITESPACE"," ",143],["T_CONSTANT_ENCAPSED_STRING","'_current'",143],["T_WHITESPACE"," ",143],["T_DOUBLE_ARROW","=>",143],["T_WHITESPACE"," ",143],["T_STRING","true",143],")",")",";",["T_WHITESPACE","\n                ",143],["T_RETURN","return",144],";",["T_WHITESPACE","\n            ",144],"}",["T_WHITESPACE","\n\n            ",145],["T_COMMENT","\/\/ try to save it\n",147],["T_WHITESPACE","            ",148],["T_TRY","try",148],["T_WHITESPACE"," ",148],"{",["T_WHITESPACE","\n                ",148],["T_COMMENT","\/\/ save the data\n",149],["T_WHITESPACE","                ",150],["T_VARIABLE","$model",150],["T_OBJECT_OPERATOR","->",150],["T_STRING","save",150],"(",")",";",["T_WHITESPACE","\n\n                ",150],["T_COMMENT","\/\/ display success message\n",152],["T_WHITESPACE","                ",153],["T_STRING","Mage",153],["T_DOUBLE_COLON","::",153],["T_STRING","getSingleton",153],"(",["T_CONSTANT_ENCAPSED_STRING","'adminhtml\/session'",153],")",["T_OBJECT_OPERATOR","->",153],["T_STRING","addSuccess",153],"(",["T_WHITESPACE","\n                    ",153],["T_STRING","Mage",154],["T_DOUBLE_COLON","::",154],["T_STRING","helper",154],"(",["T_CONSTANT_ENCAPSED_STRING","'cms'",154],")",["T_OBJECT_OPERATOR","->",154],["T_STRING","__",154],"(",["T_CONSTANT_ENCAPSED_STRING","'The page has been saved.'",154],")",")",";",["T_WHITESPACE","\n                ",154],["T_COMMENT","\/\/ clear previously saved data from session\n",155],["T_WHITESPACE","                ",156],["T_STRING","Mage",156],["T_DOUBLE_COLON","::",156],["T_STRING","getSingleton",156],"(",["T_CONSTANT_ENCAPSED_STRING","'adminhtml\/session'",156],")",["T_OBJECT_OPERATOR","->",156],["T_STRING","setFormData",156],"(",["T_STRING","false",156],")",";",["T_WHITESPACE","\n                ",156],["T_COMMENT","\/\/ check if 'Save and Continue'\n",157],["T_WHITESPACE","                ",158],["T_IF","if",158],["T_WHITESPACE"," ",158],"(",["T_VARIABLE","$this",158],["T_OBJECT_OPERATOR","->",158],["T_STRING","getRequest",158],"(",")",["T_OBJECT_OPERATOR","->",158],["T_STRING","getParam",158],"(",["T_CONSTANT_ENCAPSED_STRING","'back'",158],")",")",["T_WHITESPACE"," ",158],"{",["T_WHITESPACE","\n                    ",158],["T_VARIABLE","$this",159],["T_OBJECT_OPERATOR","->",159],["T_STRING","_redirect",159],"(",["T_CONSTANT_ENCAPSED_STRING","'*\/*\/edit'",159],",",["T_WHITESPACE"," ",159],["T_ARRAY","array",159],"(",["T_CONSTANT_ENCAPSED_STRING","'page_id'",159],["T_WHITESPACE"," ",159],["T_DOUBLE_ARROW","=>",159],["T_WHITESPACE"," ",159],["T_VARIABLE","$model",159],["T_OBJECT_OPERATOR","->",159],["T_STRING","getId",159],"(",")",",",["T_WHITESPACE"," ",159],["T_CONSTANT_ENCAPSED_STRING","'_current'",159],["T_DOUBLE_ARROW","=>",159],["T_STRING","true",159],")",")",";",["T_WHITESPACE","\n                    ",159],["T_RETURN","return",160],";",["T_WHITESPACE","\n                ",160],"}",["T_WHITESPACE","\n                ",161],["T_COMMENT","\/\/ go to grid\n",162],["T_WHITESPACE","                ",163],["T_VARIABLE","$this",163],["T_OBJECT_OPERATOR","->",163],["T_STRING","_redirect",163],"(",["T_CONSTANT_ENCAPSED_STRING","'*\/*\/'",163],")",";",["T_WHITESPACE","\n                ",163],["T_RETURN","return",164],";",["T_WHITESPACE","\n\n            ",164],"}",["T_WHITESPACE"," ",166],["T_CATCH","catch",166],["T_WHITESPACE"," ",166],"(",["T_STRING","Mage_Core_Exception",166],["T_WHITESPACE"," ",166],["T_VARIABLE","$e",166],")",["T_WHITESPACE"," ",166],"{",["T_WHITESPACE","\n                ",166],["T_VARIABLE","$this",167],["T_OBJECT_OPERATOR","->",167],["T_STRING","_getSession",167],"(",")",["T_OBJECT_OPERATOR","->",167],["T_STRING","addError",167],"(",["T_VARIABLE","$e",167],["T_OBJECT_OPERATOR","->",167],["T_STRING","getMessage",167],"(",")",")",";",["T_WHITESPACE","\n            ",167],"}",["T_WHITESPACE","\n            ",168],["T_CATCH","catch",169],["T_WHITESPACE"," ",169],"(",["T_STRING","Exception",169],["T_WHITESPACE"," ",169],["T_VARIABLE","$e",169],")",["T_WHITESPACE"," ",169],"{",["T_WHITESPACE","\n                ",169],["T_VARIABLE","$this",170],["T_OBJECT_OPERATOR","->",170],["T_STRING","_getSession",170],"(",")",["T_OBJECT_OPERATOR","->",170],["T_STRING","addException",170],"(",["T_VARIABLE","$e",170],",",["T_WHITESPACE","\n                    ",170],["T_STRING","Mage",171],["T_DOUBLE_COLON","::",171],["T_STRING","helper",171],"(",["T_CONSTANT_ENCAPSED_STRING","'cms'",171],")",["T_OBJECT_OPERATOR","->",171],["T_STRING","__",171],"(",["T_CONSTANT_ENCAPSED_STRING","'An error occurred while saving the page.'",171],")",")",";",["T_WHITESPACE","\n            ",171],"}",["T_WHITESPACE","\n\n            ",172],["T_VARIABLE","$this",174],["T_OBJECT_OPERATOR","->",174],["T_STRING","_getSession",174],"(",")",["T_OBJECT_OPERATOR","->",174],["T_STRING","setFormData",174],"(",["T_VARIABLE","$data",174],")",";",["T_WHITESPACE","\n            ",174],["T_VARIABLE","$this",175],["T_OBJECT_OPERATOR","->",175],["T_STRING","_redirect",175],"(",["T_CONSTANT_ENCAPSED_STRING","'*\/*\/edit'",175],",",["T_WHITESPACE"," ",175],["T_ARRAY","array",175],"(",["T_CONSTANT_ENCAPSED_STRING","'page_id'",175],["T_WHITESPACE"," ",175],["T_DOUBLE_ARROW","=>",175],["T_WHITESPACE"," ",175],["T_VARIABLE","$this",175],["T_OBJECT_OPERATOR","->",175],["T_STRING","getRequest",175],"(",")",["T_OBJECT_OPERATOR","->",175],["T_STRING","getParam",175],"(",["T_CONSTANT_ENCAPSED_STRING","'page_id'",175],")",")",")",";",["T_WHITESPACE","\n            ",175],["T_RETURN","return",176],";",["T_WHITESPACE","\n        ",176],"}",["T_WHITESPACE","\n        ",177],["T_VARIABLE","$this",178],["T_OBJECT_OPERATOR","->",178],["T_STRING","_redirect",178],"(",["T_CONSTANT_ENCAPSED_STRING","'*\/*\/'",178],")",";",["T_WHITESPACE","\n    ",178],"}",["T_WHITESPACE","\n\n    ",179],["T_DOC_COMMENT","\/**\n     * Delete action\n     *\/",181],["T_WHITESPACE","\n    ",183],["T_PUBLIC","public",184],["T_WHITESPACE"," ",184],["T_FUNCTION","function",184],["T_WHITESPACE"," ",184],["T_STRING","deleteAction",184],"(",")",["T_WHITESPACE","\n    ",184],"{",["T_WHITESPACE","\n        ",185],["T_COMMENT","\/\/ check if we know what should be deleted\n",186],["T_WHITESPACE","        ",187],["T_IF","if",187],["T_WHITESPACE"," ",187],"(",["T_VARIABLE","$id",187],["T_WHITESPACE"," ",187],"=",["T_WHITESPACE"," ",187],["T_VARIABLE","$this",187],["T_OBJECT_OPERATOR","->",187],["T_STRING","getRequest",187],"(",")",["T_OBJECT_OPERATOR","->",187],["T_STRING","getParam",187],"(",["T_CONSTANT_ENCAPSED_STRING","'page_id'",187],")",")",["T_WHITESPACE"," ",187],"{",["T_WHITESPACE","\n            ",187],["T_VARIABLE","$title",188],["T_WHITESPACE"," ",188],"=",["T_WHITESPACE"," ",188],["T_CONSTANT_ENCAPSED_STRING","\"\"",188],";",["T_WHITESPACE","\n            ",188],["T_TRY","try",189],["T_WHITESPACE"," ",189],"{",["T_WHITESPACE","\n                ",189],["T_COMMENT","\/\/ init model and delete\n",190],["T_WHITESPACE","                ",191],["T_VARIABLE","$model",191],["T_WHITESPACE"," ",191],"=",["T_WHITESPACE"," ",191],["T_STRING","Mage",191],["T_DOUBLE_COLON","::",191],["T_STRING","getModel",191],"(",["T_CONSTANT_ENCAPSED_STRING","'cms\/page'",191],")",";",["T_WHITESPACE","\n                ",191],["T_VARIABLE","$model",192],["T_OBJECT_OPERATOR","->",192],["T_STRING","load",192],"(",["T_VARIABLE","$id",192],")",";",["T_WHITESPACE","\n                ",192],["T_VARIABLE","$title",193],["T_WHITESPACE"," ",193],"=",["T_WHITESPACE"," ",193],["T_VARIABLE","$model",193],["T_OBJECT_OPERATOR","->",193],["T_STRING","getTitle",193],"(",")",";",["T_WHITESPACE","\n                ",193],["T_VARIABLE","$model",194],["T_OBJECT_OPERATOR","->",194],["T_STRING","delete",194],"(",")",";",["T_WHITESPACE","\n                ",194],["T_COMMENT","\/\/ display success message\n",195],["T_WHITESPACE","                ",196],["T_STRING","Mage",196],["T_DOUBLE_COLON","::",196],["T_STRING","getSingleton",196],"(",["T_CONSTANT_ENCAPSED_STRING","'adminhtml\/session'",196],")",["T_OBJECT_OPERATOR","->",196],["T_STRING","addSuccess",196],"(",["T_WHITESPACE","\n                    ",196],["T_STRING","Mage",197],["T_DOUBLE_COLON","::",197],["T_STRING","helper",197],"(",["T_CONSTANT_ENCAPSED_STRING","'cms'",197],")",["T_OBJECT_OPERATOR","->",197],["T_STRING","__",197],"(",["T_CONSTANT_ENCAPSED_STRING","'The page has been deleted.'",197],")",")",";",["T_WHITESPACE","\n                ",197],["T_COMMENT","\/\/ go to grid\n",198],["T_WHITESPACE","                ",199],["T_STRING","Mage",199],["T_DOUBLE_COLON","::",199],["T_STRING","dispatchEvent",199],"(",["T_CONSTANT_ENCAPSED_STRING","'adminhtml_cmspage_on_delete'",199],",",["T_WHITESPACE"," ",199],["T_ARRAY","array",199],"(",["T_CONSTANT_ENCAPSED_STRING","'title'",199],["T_WHITESPACE"," ",199],["T_DOUBLE_ARROW","=>",199],["T_WHITESPACE"," ",199],["T_VARIABLE","$title",199],",",["T_WHITESPACE"," ",199],["T_CONSTANT_ENCAPSED_STRING","'status'",199],["T_WHITESPACE"," ",199],["T_DOUBLE_ARROW","=>",199],["T_WHITESPACE"," ",199],["T_CONSTANT_ENCAPSED_STRING","'success'",199],")",")",";",["T_WHITESPACE","\n                ",199],["T_VARIABLE","$this",200],["T_OBJECT_OPERATOR","->",200],["T_STRING","_redirect",200],"(",["T_CONSTANT_ENCAPSED_STRING","'*\/*\/'",200],")",";",["T_WHITESPACE","\n                ",200],["T_RETURN","return",201],";",["T_WHITESPACE","\n\n            ",201],"}",["T_WHITESPACE"," ",203],["T_CATCH","catch",203],["T_WHITESPACE"," ",203],"(",["T_STRING","Exception",203],["T_WHITESPACE"," ",203],["T_VARIABLE","$e",203],")",["T_WHITESPACE"," ",203],"{",["T_WHITESPACE","\n                ",203],["T_STRING","Mage",204],["T_DOUBLE_COLON","::",204],["T_STRING","dispatchEvent",204],"(",["T_CONSTANT_ENCAPSED_STRING","'adminhtml_cmspage_on_delete'",204],",",["T_WHITESPACE"," ",204],["T_ARRAY","array",204],"(",["T_CONSTANT_ENCAPSED_STRING","'title'",204],["T_WHITESPACE"," ",204],["T_DOUBLE_ARROW","=>",204],["T_WHITESPACE"," ",204],["T_VARIABLE","$title",204],",",["T_WHITESPACE"," ",204],["T_CONSTANT_ENCAPSED_STRING","'status'",204],["T_WHITESPACE"," ",204],["T_DOUBLE_ARROW","=>",204],["T_WHITESPACE"," ",204],["T_CONSTANT_ENCAPSED_STRING","'fail'",204],")",")",";",["T_WHITESPACE","\n                ",204],["T_COMMENT","\/\/ display error message\n",205],["T_WHITESPACE","                ",206],["T_STRING","Mage",206],["T_DOUBLE_COLON","::",206],["T_STRING","getSingleton",206],"(",["T_CONSTANT_ENCAPSED_STRING","'adminhtml\/session'",206],")",["T_OBJECT_OPERATOR","->",206],["T_STRING","addError",206],"(",["T_VARIABLE","$e",206],["T_OBJECT_OPERATOR","->",206],["T_STRING","getMessage",206],"(",")",")",";",["T_WHITESPACE","\n                ",206],["T_COMMENT","\/\/ go back to edit form\n",207],["T_WHITESPACE","                ",208],["T_VARIABLE","$this",208],["T_OBJECT_OPERATOR","->",208],["T_STRING","_redirect",208],"(",["T_CONSTANT_ENCAPSED_STRING","'*\/*\/edit'",208],",",["T_WHITESPACE"," ",208],["T_ARRAY","array",208],"(",["T_CONSTANT_ENCAPSED_STRING","'page_id'",208],["T_WHITESPACE"," ",208],["T_DOUBLE_ARROW","=>",208],["T_WHITESPACE"," ",208],["T_VARIABLE","$id",208],")",")",";",["T_WHITESPACE","\n                ",208],["T_RETURN","return",209],";",["T_WHITESPACE","\n            ",209],"}",["T_WHITESPACE","\n        ",210],"}",["T_WHITESPACE","\n        ",211],["T_COMMENT","\/\/ display error message\n",212],["T_WHITESPACE","        ",213],["T_STRING","Mage",213],["T_DOUBLE_COLON","::",213],["T_STRING","getSingleton",213],"(",["T_CONSTANT_ENCAPSED_STRING","'adminhtml\/session'",213],")",["T_OBJECT_OPERATOR","->",213],["T_STRING","addError",213],"(",["T_STRING","Mage",213],["T_DOUBLE_COLON","::",213],["T_STRING","helper",213],"(",["T_CONSTANT_ENCAPSED_STRING","'cms'",213],")",["T_OBJECT_OPERATOR","->",213],["T_STRING","__",213],"(",["T_CONSTANT_ENCAPSED_STRING","'Unable to find a page to delete.'",213],")",")",";",["T_WHITESPACE","\n        ",213],["T_COMMENT","\/\/ go to grid\n",214],["T_WHITESPACE","        ",215],["T_VARIABLE","$this",215],["T_OBJECT_OPERATOR","->",215],["T_STRING","_redirect",215],"(",["T_CONSTANT_ENCAPSED_STRING","'*\/*\/'",215],")",";",["T_WHITESPACE","\n    ",215],"}",["T_WHITESPACE","\n\n    ",216],["T_DOC_COMMENT","\/**\n     * Check the permission to run it\n     *\n     * @return boolean\n     *\/",218],["T_WHITESPACE","\n    ",222],["T_PROTECTED","protected",223],["T_WHITESPACE"," ",223],["T_FUNCTION","function",223],["T_WHITESPACE"," ",223],["T_STRING","_isAllowed",223],"(",")",["T_WHITESPACE","\n    ",223],"{",["T_WHITESPACE","\n        ",224],["T_VARIABLE","$action",225],["T_WHITESPACE"," ",225],"=",["T_WHITESPACE"," ",225],["T_STRING","strtolower",225],"(",["T_VARIABLE","$this",225],["T_OBJECT_OPERATOR","->",225],["T_STRING","getRequest",225],"(",")",["T_OBJECT_OPERATOR","->",225],["T_STRING","getActionName",225],"(",")",")",";",["T_WHITESPACE","\n        ",225],["T_SWITCH","switch",226],["T_WHITESPACE"," ",226],"(",["T_VARIABLE","$action",226],")",["T_WHITESPACE"," ",226],"{",["T_WHITESPACE","\n            ",226],["T_CASE","case",227],["T_WHITESPACE"," ",227],["T_CONSTANT_ENCAPSED_STRING","'new'",227],":",["T_WHITESPACE","\n            ",227],["T_CASE","case",228],["T_WHITESPACE"," ",228],["T_CONSTANT_ENCAPSED_STRING","'save'",228],":",["T_WHITESPACE","\n                ",228],["T_RETURN","return",229],["T_WHITESPACE"," ",229],["T_STRING","Mage",229],["T_DOUBLE_COLON","::",229],["T_STRING","getSingleton",229],"(",["T_CONSTANT_ENCAPSED_STRING","'admin\/session'",229],")",["T_OBJECT_OPERATOR","->",229],["T_STRING","isAllowed",229],"(",["T_CONSTANT_ENCAPSED_STRING","'cms\/page\/save'",229],")",";",["T_WHITESPACE","\n                ",229],["T_BREAK","break",230],";",["T_WHITESPACE","\n            ",230],["T_CASE","case",231],["T_WHITESPACE"," ",231],["T_CONSTANT_ENCAPSED_STRING","'delete'",231],":",["T_WHITESPACE","\n                ",231],["T_RETURN","return",232],["T_WHITESPACE"," ",232],["T_STRING","Mage",232],["T_DOUBLE_COLON","::",232],["T_STRING","getSingleton",232],"(",["T_CONSTANT_ENCAPSED_STRING","'admin\/session'",232],")",["T_OBJECT_OPERATOR","->",232],["T_STRING","isAllowed",232],"(",["T_CONSTANT_ENCAPSED_STRING","'cms\/page\/delete'",232],")",";",["T_WHITESPACE","\n                ",232],["T_BREAK","break",233],";",["T_WHITESPACE","\n            ",233],["T_DEFAULT","default",234],":",["T_WHITESPACE","\n                ",234],["T_RETURN","return",235],["T_WHITESPACE"," ",235],["T_STRING","Mage",235],["T_DOUBLE_COLON","::",235],["T_STRING","getSingleton",235],"(",["T_CONSTANT_ENCAPSED_STRING","'admin\/session'",235],")",["T_OBJECT_OPERATOR","->",235],["T_STRING","isAllowed",235],"(",["T_CONSTANT_ENCAPSED_STRING","'cms\/page'",235],")",";",["T_WHITESPACE","\n                ",235],["T_BREAK","break",236],";",["T_WHITESPACE","\n        ",236],"}",["T_WHITESPACE","\n    ",237],"}",["T_WHITESPACE","\n\n    ",238],["T_DOC_COMMENT","\/**\n     * Filtering posted data. Converting localized data if needed\n     *\n     * @param array\n     * @return array\n     *\/",240],["T_WHITESPACE","\n    ",245],["T_PROTECTED","protected",246],["T_WHITESPACE"," ",246],["T_FUNCTION","function",246],["T_WHITESPACE"," ",246],["T_STRING","_filterPostData",246],"(",["T_VARIABLE","$data",246],")",["T_WHITESPACE","\n    ",246],"{",["T_WHITESPACE","\n        ",247],["T_VARIABLE","$data",248],["T_WHITESPACE"," ",248],"=",["T_WHITESPACE"," ",248],["T_VARIABLE","$this",248],["T_OBJECT_OPERATOR","->",248],["T_STRING","_filterDates",248],"(",["T_VARIABLE","$data",248],",",["T_WHITESPACE"," ",248],["T_ARRAY","array",248],"(",["T_CONSTANT_ENCAPSED_STRING","'custom_theme_from'",248],",",["T_WHITESPACE"," ",248],["T_CONSTANT_ENCAPSED_STRING","'custom_theme_to'",248],")",")",";",["T_WHITESPACE","\n        ",248],["T_RETURN","return",249],["T_WHITESPACE"," ",249],["T_VARIABLE","$data",249],";",["T_WHITESPACE","\n    ",249],"}",["T_WHITESPACE","\n\n    ",250],["T_DOC_COMMENT","\/**\n     * Validate post data\n     *\n     * @param array $data\n     * @return bool     Return FALSE if someone item is invalid\n     *\/",252],["T_WHITESPACE","\n    ",257],["T_PROTECTED","protected",258],["T_WHITESPACE"," ",258],["T_FUNCTION","function",258],["T_WHITESPACE"," ",258],["T_STRING","_validatePostData",258],"(",["T_VARIABLE","$data",258],")",["T_WHITESPACE","\n    ",258],"{",["T_WHITESPACE","\n        ",259],["T_VARIABLE","$errorNo",260],["T_WHITESPACE"," ",260],"=",["T_WHITESPACE"," ",260],["T_STRING","true",260],";",["T_WHITESPACE","\n        ",260],["T_IF","if",261],["T_WHITESPACE"," ",261],"(","!",["T_EMPTY","empty",261],"(",["T_VARIABLE","$data",261],"[",["T_CONSTANT_ENCAPSED_STRING","'layout_update_xml'",261],"]",")",["T_WHITESPACE"," ",261],["T_BOOLEAN_OR","||",261],["T_WHITESPACE"," ",261],"!",["T_EMPTY","empty",261],"(",["T_VARIABLE","$data",261],"[",["T_CONSTANT_ENCAPSED_STRING","'custom_layout_update_xml'",261],"]",")",")",["T_WHITESPACE"," ",261],"{",["T_WHITESPACE","\n            ",261],["T_DOC_COMMENT","\/** @var $validatorCustomLayout Mage_Adminhtml_Model_LayoutUpdate_Validator *\/",262],["T_WHITESPACE","\n            ",262],["T_VARIABLE","$validatorCustomLayout",263],["T_WHITESPACE"," ",263],"=",["T_WHITESPACE"," ",263],["T_STRING","Mage",263],["T_DOUBLE_COLON","::",263],["T_STRING","getModel",263],"(",["T_CONSTANT_ENCAPSED_STRING","'adminhtml\/layoutUpdate_validator'",263],")",";",["T_WHITESPACE","\n            ",263],["T_IF","if",264],["T_WHITESPACE"," ",264],"(","!",["T_EMPTY","empty",264],"(",["T_VARIABLE","$data",264],"[",["T_CONSTANT_ENCAPSED_STRING","'layout_update_xml'",264],"]",")",["T_WHITESPACE"," ",264],["T_BOOLEAN_AND","&&",264],["T_WHITESPACE"," ",264],"!",["T_VARIABLE","$validatorCustomLayout",264],["T_OBJECT_OPERATOR","->",264],["T_STRING","isValid",264],"(",["T_VARIABLE","$data",264],"[",["T_CONSTANT_ENCAPSED_STRING","'layout_update_xml'",264],"]",")",")",["T_WHITESPACE"," ",264],"{",["T_WHITESPACE","\n                ",264],["T_VARIABLE","$errorNo",265],["T_WHITESPACE"," ",265],"=",["T_WHITESPACE"," ",265],["T_STRING","false",265],";",["T_WHITESPACE","\n            ",265],"}",["T_WHITESPACE","\n            ",266],["T_IF","if",267],["T_WHITESPACE"," ",267],"(","!",["T_EMPTY","empty",267],"(",["T_VARIABLE","$data",267],"[",["T_CONSTANT_ENCAPSED_STRING","'custom_layout_update_xml'",267],"]",")",["T_WHITESPACE","\n            ",267],["T_BOOLEAN_AND","&&",268],["T_WHITESPACE"," ",268],"!",["T_VARIABLE","$validatorCustomLayout",268],["T_OBJECT_OPERATOR","->",268],["T_STRING","isValid",268],"(",["T_VARIABLE","$data",268],"[",["T_CONSTANT_ENCAPSED_STRING","'custom_layout_update_xml'",268],"]",")",")",["T_WHITESPACE"," ",268],"{",["T_WHITESPACE","\n                ",268],["T_VARIABLE","$errorNo",269],["T_WHITESPACE"," ",269],"=",["T_WHITESPACE"," ",269],["T_STRING","false",269],";",["T_WHITESPACE","\n            ",269],"}",["T_WHITESPACE","\n            ",270],["T_FOREACH","foreach",271],["T_WHITESPACE"," ",271],"(",["T_VARIABLE","$validatorCustomLayout",271],["T_OBJECT_OPERATOR","->",271],["T_STRING","getMessages",271],"(",")",["T_WHITESPACE"," ",271],["T_AS","as",271],["T_WHITESPACE"," ",271],["T_VARIABLE","$message",271],")",["T_WHITESPACE"," ",271],"{",["T_WHITESPACE","\n                ",271],["T_VARIABLE","$this",272],["T_OBJECT_OPERATOR","->",272],["T_STRING","_getSession",272],"(",")",["T_OBJECT_OPERATOR","->",272],["T_STRING","addError",272],"(",["T_VARIABLE","$message",272],")",";",["T_WHITESPACE","\n            ",272],"}",["T_WHITESPACE","\n        ",273],"}",["T_WHITESPACE","\n        ",274],["T_RETURN","return",275],["T_WHITESPACE"," ",275],["T_VARIABLE","$errorNo",275],";",["T_WHITESPACE","\n    ",275],"}",["T_WHITESPACE","\n",276],"}",["T_WHITESPACE","\n",277]]
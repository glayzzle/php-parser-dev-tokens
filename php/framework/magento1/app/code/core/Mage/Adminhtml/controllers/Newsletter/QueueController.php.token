[["T_OPEN_TAG","<?php\n",1],["T_DOC_COMMENT","\/**\n * Magento\n *\n * NOTICE OF LICENSE\n *\n * This source file is subject to the Open Software License (OSL 3.0)\n * that is bundled with this package in the file LICENSE.txt.\n * It is also available through the world-wide-web at this URL:\n * http:\/\/opensource.org\/licenses\/osl-3.0.php\n * If you did not receive a copy of the license and are unable to\n * obtain it through the world-wide-web, please send an email\n * to license@magento.com so we can send you a copy immediately.\n *\n * DISCLAIMER\n *\n * Do not edit or add to this file if you wish to upgrade Magento to newer\n * versions in the future. If you wish to customize Magento for your\n * needs please refer to http:\/\/www.magento.com for more information.\n *\n * @category    Mage\n * @package     Mage_Adminhtml\n * @copyright  Copyright (c) 2006-2016 X.commerce, Inc. and affiliates (http:\/\/www.magento.com)\n * @license    http:\/\/opensource.org\/licenses\/osl-3.0.php  Open Software License (OSL 3.0)\n *\/",2],["T_WHITESPACE","\n\n",25],["T_DOC_COMMENT","\/**\n * Adminhtml newsletter queue controller\n *\n * @category   Mage\n * @package    Mage_Adminhtml\n * @author      Magento Core Team <core@magentocommerce.com>\n *\/",27],["T_WHITESPACE","\n",33],["T_CLASS","class",34],["T_WHITESPACE"," ",34],["T_STRING","Mage_Adminhtml_Newsletter_QueueController",34],["T_WHITESPACE"," ",34],["T_EXTENDS","extends",34],["T_WHITESPACE"," ",34],["T_STRING","Mage_Adminhtml_Controller_Action",34],["T_WHITESPACE","\n",34],"{",["T_WHITESPACE","\n    ",35],["T_DOC_COMMENT","\/**\n     * Queue list action\n     *\/",36],["T_WHITESPACE","\n    ",38],["T_PUBLIC","public",39],["T_WHITESPACE"," ",39],["T_FUNCTION","function",39],["T_WHITESPACE"," ",39],["T_STRING","indexAction",39],"(",")",["T_WHITESPACE","\n    ",39],"{",["T_WHITESPACE","\n        ",40],["T_VARIABLE","$this",41],["T_OBJECT_OPERATOR","->",41],["T_STRING","_title",41],"(",["T_VARIABLE","$this",41],["T_OBJECT_OPERATOR","->",41],["T_STRING","__",41],"(",["T_CONSTANT_ENCAPSED_STRING","'Newsletter'",41],")",")",["T_OBJECT_OPERATOR","->",41],["T_STRING","_title",41],"(",["T_VARIABLE","$this",41],["T_OBJECT_OPERATOR","->",41],["T_STRING","__",41],"(",["T_CONSTANT_ENCAPSED_STRING","'Newsletter Queue'",41],")",")",";",["T_WHITESPACE","\n\n        ",41],["T_IF","if",43],["T_WHITESPACE"," ",43],"(",["T_VARIABLE","$this",43],["T_OBJECT_OPERATOR","->",43],["T_STRING","getRequest",43],"(",")",["T_OBJECT_OPERATOR","->",43],["T_STRING","getQuery",43],"(",["T_CONSTANT_ENCAPSED_STRING","'ajax'",43],")",")",["T_WHITESPACE"," ",43],"{",["T_WHITESPACE","\n            ",43],["T_VARIABLE","$this",44],["T_OBJECT_OPERATOR","->",44],["T_STRING","_forward",44],"(",["T_CONSTANT_ENCAPSED_STRING","'grid'",44],")",";",["T_WHITESPACE","\n            ",44],["T_RETURN","return",45],";",["T_WHITESPACE","\n        ",45],"}",["T_WHITESPACE","\n\n        ",46],["T_VARIABLE","$this",48],["T_OBJECT_OPERATOR","->",48],["T_STRING","loadLayout",48],"(",")",";",["T_WHITESPACE","\n\n        ",48],["T_VARIABLE","$this",50],["T_OBJECT_OPERATOR","->",50],["T_STRING","_setActiveMenu",50],"(",["T_CONSTANT_ENCAPSED_STRING","'newsletter\/queue'",50],")",";",["T_WHITESPACE","\n\n        ",50],["T_VARIABLE","$this",52],["T_OBJECT_OPERATOR","->",52],["T_STRING","_addContent",52],"(",["T_WHITESPACE","\n            ",52],["T_VARIABLE","$this",53],["T_OBJECT_OPERATOR","->",53],["T_STRING","getLayout",53],"(",")",["T_OBJECT_OPERATOR","->",53],["T_STRING","createBlock",53],"(",["T_CONSTANT_ENCAPSED_STRING","'adminhtml\/newsletter_queue'",53],",",["T_WHITESPACE"," ",53],["T_CONSTANT_ENCAPSED_STRING","'queue'",53],")",["T_WHITESPACE","\n        ",53],")",";",["T_WHITESPACE","\n\n        ",54],["T_VARIABLE","$this",56],["T_OBJECT_OPERATOR","->",56],["T_STRING","_addBreadcrumb",56],"(",["T_STRING","Mage",56],["T_DOUBLE_COLON","::",56],["T_STRING","helper",56],"(",["T_CONSTANT_ENCAPSED_STRING","'newsletter'",56],")",["T_OBJECT_OPERATOR","->",56],["T_STRING","__",56],"(",["T_CONSTANT_ENCAPSED_STRING","'Newsletter Queue'",56],")",",",["T_WHITESPACE"," ",56],["T_STRING","Mage",56],["T_DOUBLE_COLON","::",56],["T_STRING","helper",56],"(",["T_CONSTANT_ENCAPSED_STRING","'newsletter'",56],")",["T_OBJECT_OPERATOR","->",56],["T_STRING","__",56],"(",["T_CONSTANT_ENCAPSED_STRING","'Newsletter Queue'",56],")",")",";",["T_WHITESPACE","\n\n        ",56],["T_VARIABLE","$this",58],["T_OBJECT_OPERATOR","->",58],["T_STRING","renderLayout",58],"(",")",";",["T_WHITESPACE","\n    ",58],"}",["T_WHITESPACE","\n\n    ",59],["T_DOC_COMMENT","\/**\n     * Drop Newsletter queue template\n     *\/",61],["T_WHITESPACE","\n    ",63],["T_PUBLIC","public",64],["T_WHITESPACE"," ",64],["T_FUNCTION","function",64],["T_WHITESPACE"," ",64],["T_STRING","dropAction",64],["T_WHITESPACE"," ",64],"(",")",["T_WHITESPACE","\n    ",64],"{",["T_WHITESPACE","\n        ",65],["T_VARIABLE","$this",66],["T_OBJECT_OPERATOR","->",66],["T_STRING","loadLayout",66],"(",["T_CONSTANT_ENCAPSED_STRING","'newsletter_queue_preview'",66],")",";",["T_WHITESPACE","\n        ",66],["T_VARIABLE","$this",67],["T_OBJECT_OPERATOR","->",67],["T_STRING","renderLayout",67],"(",")",";",["T_WHITESPACE","\n    ",67],"}",["T_WHITESPACE","\n\n    ",68],["T_DOC_COMMENT","\/**\n     * Preview Newsletter queue template\n     *\/",70],["T_WHITESPACE","\n    ",72],["T_PUBLIC","public",73],["T_WHITESPACE"," ",73],["T_FUNCTION","function",73],["T_WHITESPACE"," ",73],["T_STRING","previewAction",73],"(",")",["T_WHITESPACE","\n    ",73],"{",["T_WHITESPACE","\n        ",74],["T_VARIABLE","$this",75],["T_OBJECT_OPERATOR","->",75],["T_STRING","loadLayout",75],"(",")",";",["T_WHITESPACE","\n        ",75],["T_VARIABLE","$data",76],["T_WHITESPACE"," ",76],"=",["T_WHITESPACE"," ",76],["T_VARIABLE","$this",76],["T_OBJECT_OPERATOR","->",76],["T_STRING","getRequest",76],"(",")",["T_OBJECT_OPERATOR","->",76],["T_STRING","getParams",76],"(",")",";",["T_WHITESPACE","\n        ",76],["T_IF","if",77],["T_WHITESPACE"," ",77],"(",["T_EMPTY","empty",77],"(",["T_VARIABLE","$data",77],")",["T_WHITESPACE"," ",77],["T_BOOLEAN_OR","||",77],["T_WHITESPACE"," ",77],"!",["T_ISSET","isset",77],"(",["T_VARIABLE","$data",77],"[",["T_CONSTANT_ENCAPSED_STRING","'id'",77],"]",")",")",["T_WHITESPACE"," ",77],"{",["T_WHITESPACE","\n            ",77],["T_VARIABLE","$this",78],["T_OBJECT_OPERATOR","->",78],["T_STRING","_forward",78],"(",["T_CONSTANT_ENCAPSED_STRING","'noRoute'",78],")",";",["T_WHITESPACE","\n            ",78],["T_RETURN","return",79],["T_WHITESPACE"," ",79],["T_VARIABLE","$this",79],";",["T_WHITESPACE","\n        ",79],"}",["T_WHITESPACE","\n\n        ",80],["T_COMMENT","\/\/ set default value for selected store\n",82],["T_WHITESPACE","        ",83],["T_VARIABLE","$data",83],"[",["T_CONSTANT_ENCAPSED_STRING","'preview_store_id'",83],"]",["T_WHITESPACE"," ",83],"=",["T_WHITESPACE"," ",83],["T_STRING","Mage",83],["T_DOUBLE_COLON","::",83],["T_STRING","app",83],"(",")",["T_OBJECT_OPERATOR","->",83],["T_STRING","getAnyStoreView",83],"(",")",["T_OBJECT_OPERATOR","->",83],["T_STRING","getId",83],"(",")",";",["T_WHITESPACE","\n\n        ",83],["T_VARIABLE","$this",85],["T_OBJECT_OPERATOR","->",85],["T_STRING","getLayout",85],"(",")",["T_OBJECT_OPERATOR","->",85],["T_STRING","getBlock",85],"(",["T_CONSTANT_ENCAPSED_STRING","'preview_form'",85],")",["T_OBJECT_OPERATOR","->",85],["T_STRING","setFormData",85],"(",["T_VARIABLE","$data",85],")",";",["T_WHITESPACE","\n        ",85],["T_VARIABLE","$this",86],["T_OBJECT_OPERATOR","->",86],["T_STRING","renderLayout",86],"(",")",";",["T_WHITESPACE","\n    ",86],"}",["T_WHITESPACE","\n\n    ",87],["T_DOC_COMMENT","\/**\n     * Queue list Ajax action\n     *\/",89],["T_WHITESPACE","\n    ",91],["T_PUBLIC","public",92],["T_WHITESPACE"," ",92],["T_FUNCTION","function",92],["T_WHITESPACE"," ",92],["T_STRING","gridAction",92],"(",")",["T_WHITESPACE","\n    ",92],"{",["T_WHITESPACE","\n        ",93],["T_VARIABLE","$this",94],["T_OBJECT_OPERATOR","->",94],["T_STRING","getResponse",94],"(",")",["T_OBJECT_OPERATOR","->",94],["T_STRING","setBody",94],"(",["T_VARIABLE","$this",94],["T_OBJECT_OPERATOR","->",94],["T_STRING","getLayout",94],"(",")",["T_OBJECT_OPERATOR","->",94],["T_STRING","createBlock",94],"(",["T_CONSTANT_ENCAPSED_STRING","'adminhtml\/newsletter_queue_grid'",94],")",["T_OBJECT_OPERATOR","->",94],["T_STRING","toHtml",94],"(",")",")",";",["T_WHITESPACE","\n    ",94],"}",["T_WHITESPACE","\n\n    ",95],["T_PUBLIC","public",97],["T_WHITESPACE"," ",97],["T_FUNCTION","function",97],["T_WHITESPACE"," ",97],["T_STRING","startAction",97],"(",")",["T_WHITESPACE","\n    ",97],"{",["T_WHITESPACE","\n        ",98],["T_VARIABLE","$queue",99],["T_WHITESPACE"," ",99],"=",["T_WHITESPACE"," ",99],["T_STRING","Mage",99],["T_DOUBLE_COLON","::",99],["T_STRING","getModel",99],"(",["T_CONSTANT_ENCAPSED_STRING","'newsletter\/queue'",99],")",["T_WHITESPACE","\n            ",99],["T_OBJECT_OPERATOR","->",100],["T_STRING","load",100],"(",["T_VARIABLE","$this",100],["T_OBJECT_OPERATOR","->",100],["T_STRING","getRequest",100],"(",")",["T_OBJECT_OPERATOR","->",100],["T_STRING","getParam",100],"(",["T_CONSTANT_ENCAPSED_STRING","'id'",100],")",")",";",["T_WHITESPACE","\n        ",100],["T_IF","if",101],["T_WHITESPACE"," ",101],"(",["T_VARIABLE","$queue",101],["T_OBJECT_OPERATOR","->",101],["T_STRING","getId",101],"(",")",")",["T_WHITESPACE"," ",101],"{",["T_WHITESPACE","\n            ",101],["T_IF","if",102],["T_WHITESPACE"," ",102],"(","!",["T_STRING","in_array",102],"(",["T_VARIABLE","$queue",102],["T_OBJECT_OPERATOR","->",102],["T_STRING","getQueueStatus",102],"(",")",",",["T_WHITESPACE","\n                          ",102],["T_ARRAY","array",103],"(",["T_STRING","Mage_Newsletter_Model_Queue",103],["T_DOUBLE_COLON","::",103],["T_STRING","STATUS_NEVER",103],",",["T_WHITESPACE","\n                                 ",103],["T_STRING","Mage_Newsletter_Model_Queue",104],["T_DOUBLE_COLON","::",104],["T_STRING","STATUS_PAUSE",104],")",")",")",["T_WHITESPACE"," ",104],"{",["T_WHITESPACE","\n                   ",104],["T_VARIABLE","$this",105],["T_OBJECT_OPERATOR","->",105],["T_STRING","_redirect",105],"(",["T_CONSTANT_ENCAPSED_STRING","'*\/*'",105],")",";",["T_WHITESPACE","\n                ",105],["T_RETURN","return",106],";",["T_WHITESPACE","\n            ",106],"}",["T_WHITESPACE","\n\n            ",107],["T_VARIABLE","$queue",109],["T_OBJECT_OPERATOR","->",109],["T_STRING","setQueueStartAt",109],"(",["T_STRING","Mage",109],["T_DOUBLE_COLON","::",109],["T_STRING","getSingleton",109],"(",["T_CONSTANT_ENCAPSED_STRING","'core\/date'",109],")",["T_OBJECT_OPERATOR","->",109],["T_STRING","gmtDate",109],"(",")",")",["T_WHITESPACE","\n                ",109],["T_OBJECT_OPERATOR","->",110],["T_STRING","setQueueStatus",110],"(",["T_STRING","Mage_Newsletter_Model_Queue",110],["T_DOUBLE_COLON","::",110],["T_STRING","STATUS_SENDING",110],")",["T_WHITESPACE","\n                ",110],["T_OBJECT_OPERATOR","->",111],["T_STRING","save",111],"(",")",";",["T_WHITESPACE","\n        ",111],"}",["T_WHITESPACE","\n\n        ",112],["T_VARIABLE","$this",114],["T_OBJECT_OPERATOR","->",114],["T_STRING","_redirect",114],"(",["T_CONSTANT_ENCAPSED_STRING","'*\/*'",114],")",";",["T_WHITESPACE","\n    ",114],"}",["T_WHITESPACE","\n\n    ",115],["T_PUBLIC","public",117],["T_WHITESPACE"," ",117],["T_FUNCTION","function",117],["T_WHITESPACE"," ",117],["T_STRING","pauseAction",117],"(",")",["T_WHITESPACE","\n    ",117],"{",["T_WHITESPACE","\n        ",118],["T_VARIABLE","$queue",119],["T_WHITESPACE"," ",119],"=",["T_WHITESPACE"," ",119],["T_STRING","Mage",119],["T_DOUBLE_COLON","::",119],["T_STRING","getSingleton",119],"(",["T_CONSTANT_ENCAPSED_STRING","'newsletter\/queue'",119],")",["T_WHITESPACE","\n            ",119],["T_OBJECT_OPERATOR","->",120],["T_STRING","load",120],"(",["T_VARIABLE","$this",120],["T_OBJECT_OPERATOR","->",120],["T_STRING","getRequest",120],"(",")",["T_OBJECT_OPERATOR","->",120],["T_STRING","getParam",120],"(",["T_CONSTANT_ENCAPSED_STRING","'id'",120],")",")",";",["T_WHITESPACE","\n\n        ",120],["T_IF","if",122],["T_WHITESPACE"," ",122],"(","!",["T_STRING","in_array",122],"(",["T_VARIABLE","$queue",122],["T_OBJECT_OPERATOR","->",122],["T_STRING","getQueueStatus",122],"(",")",",",["T_WHITESPACE","\n                      ",122],["T_ARRAY","array",123],"(",["T_STRING","Mage_Newsletter_Model_Queue",123],["T_DOUBLE_COLON","::",123],["T_STRING","STATUS_SENDING",123],")",")",")",["T_WHITESPACE"," ",123],"{",["T_WHITESPACE","\n               ",123],["T_VARIABLE","$this",124],["T_OBJECT_OPERATOR","->",124],["T_STRING","_redirect",124],"(",["T_CONSTANT_ENCAPSED_STRING","'*\/*'",124],")",";",["T_WHITESPACE","\n            ",124],["T_RETURN","return",125],";",["T_WHITESPACE","\n        ",125],"}",["T_WHITESPACE","\n\n        ",126],["T_VARIABLE","$queue",128],["T_OBJECT_OPERATOR","->",128],["T_STRING","setQueueStatus",128],"(",["T_STRING","Mage_Newsletter_Model_Queue",128],["T_DOUBLE_COLON","::",128],["T_STRING","STATUS_PAUSE",128],")",";",["T_WHITESPACE","\n        ",128],["T_VARIABLE","$queue",129],["T_OBJECT_OPERATOR","->",129],["T_STRING","save",129],"(",")",";",["T_WHITESPACE","\n\n        ",129],["T_VARIABLE","$this",131],["T_OBJECT_OPERATOR","->",131],["T_STRING","_redirect",131],"(",["T_CONSTANT_ENCAPSED_STRING","'*\/*'",131],")",";",["T_WHITESPACE","\n    ",131],"}",["T_WHITESPACE","\n\n    ",132],["T_PUBLIC","public",134],["T_WHITESPACE"," ",134],["T_FUNCTION","function",134],["T_WHITESPACE"," ",134],["T_STRING","resumeAction",134],"(",")",["T_WHITESPACE","\n    ",134],"{",["T_WHITESPACE","\n        ",135],["T_VARIABLE","$queue",136],["T_WHITESPACE"," ",136],"=",["T_WHITESPACE"," ",136],["T_STRING","Mage",136],["T_DOUBLE_COLON","::",136],["T_STRING","getSingleton",136],"(",["T_CONSTANT_ENCAPSED_STRING","'newsletter\/queue'",136],")",["T_WHITESPACE","\n            ",136],["T_OBJECT_OPERATOR","->",137],["T_STRING","load",137],"(",["T_VARIABLE","$this",137],["T_OBJECT_OPERATOR","->",137],["T_STRING","getRequest",137],"(",")",["T_OBJECT_OPERATOR","->",137],["T_STRING","getParam",137],"(",["T_CONSTANT_ENCAPSED_STRING","'id'",137],")",")",";",["T_WHITESPACE","\n\n        ",137],["T_IF","if",139],["T_WHITESPACE"," ",139],"(","!",["T_STRING","in_array",139],"(",["T_VARIABLE","$queue",139],["T_OBJECT_OPERATOR","->",139],["T_STRING","getQueueStatus",139],"(",")",",",["T_WHITESPACE","\n                      ",139],["T_ARRAY","array",140],"(",["T_STRING","Mage_Newsletter_Model_Queue",140],["T_DOUBLE_COLON","::",140],["T_STRING","STATUS_PAUSE",140],")",")",")",["T_WHITESPACE"," ",140],"{",["T_WHITESPACE","\n               ",140],["T_VARIABLE","$this",141],["T_OBJECT_OPERATOR","->",141],["T_STRING","_redirect",141],"(",["T_CONSTANT_ENCAPSED_STRING","'*\/*'",141],")",";",["T_WHITESPACE","\n            ",141],["T_RETURN","return",142],";",["T_WHITESPACE","\n        ",142],"}",["T_WHITESPACE","\n\n        ",143],["T_VARIABLE","$queue",145],["T_OBJECT_OPERATOR","->",145],["T_STRING","setQueueStatus",145],"(",["T_STRING","Mage_Newsletter_Model_Queue",145],["T_DOUBLE_COLON","::",145],["T_STRING","STATUS_SENDING",145],")",";",["T_WHITESPACE","\n        ",145],["T_VARIABLE","$queue",146],["T_OBJECT_OPERATOR","->",146],["T_STRING","save",146],"(",")",";",["T_WHITESPACE","\n\n        ",146],["T_VARIABLE","$this",148],["T_OBJECT_OPERATOR","->",148],["T_STRING","_redirect",148],"(",["T_CONSTANT_ENCAPSED_STRING","'*\/*'",148],")",";",["T_WHITESPACE","\n    ",148],"}",["T_WHITESPACE","\n\n    ",149],["T_PUBLIC","public",151],["T_WHITESPACE"," ",151],["T_FUNCTION","function",151],["T_WHITESPACE"," ",151],["T_STRING","cancelAction",151],"(",")",["T_WHITESPACE","\n    ",151],"{",["T_WHITESPACE","\n        ",152],["T_VARIABLE","$queue",153],["T_WHITESPACE"," ",153],"=",["T_WHITESPACE"," ",153],["T_STRING","Mage",153],["T_DOUBLE_COLON","::",153],["T_STRING","getSingleton",153],"(",["T_CONSTANT_ENCAPSED_STRING","'newsletter\/queue'",153],")",["T_WHITESPACE","\n            ",153],["T_OBJECT_OPERATOR","->",154],["T_STRING","load",154],"(",["T_VARIABLE","$this",154],["T_OBJECT_OPERATOR","->",154],["T_STRING","getRequest",154],"(",")",["T_OBJECT_OPERATOR","->",154],["T_STRING","getParam",154],"(",["T_CONSTANT_ENCAPSED_STRING","'id'",154],")",")",";",["T_WHITESPACE","\n\n        ",154],["T_IF","if",156],["T_WHITESPACE"," ",156],"(","!",["T_STRING","in_array",156],"(",["T_VARIABLE","$queue",156],["T_OBJECT_OPERATOR","->",156],["T_STRING","getQueueStatus",156],"(",")",",",["T_WHITESPACE","\n                      ",156],["T_ARRAY","array",157],"(",["T_STRING","Mage_Newsletter_Model_Queue",157],["T_DOUBLE_COLON","::",157],["T_STRING","STATUS_SENDING",157],")",")",")",["T_WHITESPACE"," ",157],"{",["T_WHITESPACE","\n               ",157],["T_VARIABLE","$this",158],["T_OBJECT_OPERATOR","->",158],["T_STRING","_redirect",158],"(",["T_CONSTANT_ENCAPSED_STRING","'*\/*'",158],")",";",["T_WHITESPACE","\n            ",158],["T_RETURN","return",159],";",["T_WHITESPACE","\n        ",159],"}",["T_WHITESPACE","\n\n        ",160],["T_VARIABLE","$queue",162],["T_OBJECT_OPERATOR","->",162],["T_STRING","setQueueStatus",162],"(",["T_STRING","Mage_Newsletter_Model_Queue",162],["T_DOUBLE_COLON","::",162],["T_STRING","STATUS_CANCEL",162],")",";",["T_WHITESPACE","\n        ",162],["T_VARIABLE","$queue",163],["T_OBJECT_OPERATOR","->",163],["T_STRING","save",163],"(",")",";",["T_WHITESPACE","\n\n        ",163],["T_VARIABLE","$this",165],["T_OBJECT_OPERATOR","->",165],["T_STRING","_redirect",165],"(",["T_CONSTANT_ENCAPSED_STRING","'*\/*'",165],")",";",["T_WHITESPACE","\n    ",165],"}",["T_WHITESPACE","\n\n    ",166],["T_PUBLIC","public",168],["T_WHITESPACE"," ",168],["T_FUNCTION","function",168],["T_WHITESPACE"," ",168],["T_STRING","sendingAction",168],"(",")",["T_WHITESPACE","\n    ",168],"{",["T_WHITESPACE","\n        ",169],["T_COMMENT","\/\/ Todo: put it somewhere in config!\n",170],["T_WHITESPACE","        ",171],["T_VARIABLE","$countOfQueue",171],["T_WHITESPACE","  ",171],"=",["T_WHITESPACE"," ",171],["T_LNUMBER","3",171],";",["T_WHITESPACE","\n        ",171],["T_VARIABLE","$countOfSubscritions",172],["T_WHITESPACE"," ",172],"=",["T_WHITESPACE"," ",172],["T_LNUMBER","20",172],";",["T_WHITESPACE","\n\n        ",172],["T_VARIABLE","$collection",174],["T_WHITESPACE"," ",174],"=",["T_WHITESPACE"," ",174],["T_STRING","Mage",174],["T_DOUBLE_COLON","::",174],["T_STRING","getResourceModel",174],"(",["T_CONSTANT_ENCAPSED_STRING","'newsletter\/queue_collection'",174],")",["T_WHITESPACE","\n            ",174],["T_OBJECT_OPERATOR","->",175],["T_STRING","setPageSize",175],"(",["T_VARIABLE","$countOfQueue",175],")",["T_WHITESPACE","\n            ",175],["T_OBJECT_OPERATOR","->",176],["T_STRING","setCurPage",176],"(",["T_LNUMBER","1",176],")",["T_WHITESPACE","\n            ",176],["T_OBJECT_OPERATOR","->",177],["T_STRING","addOnlyForSendingFilter",177],"(",")",["T_WHITESPACE","\n            ",177],["T_OBJECT_OPERATOR","->",178],["T_STRING","load",178],"(",")",";",["T_WHITESPACE","\n\n        ",178],["T_VARIABLE","$collection",180],["T_OBJECT_OPERATOR","->",180],["T_STRING","walk",180],"(",["T_CONSTANT_ENCAPSED_STRING","'sendPerSubscriber'",180],",",["T_WHITESPACE"," ",180],["T_ARRAY","array",180],"(",["T_VARIABLE","$countOfSubscritions",180],")",")",";",["T_WHITESPACE","\n    ",180],"}",["T_WHITESPACE","\n\n    ",181],["T_PUBLIC","public",183],["T_WHITESPACE"," ",183],["T_FUNCTION","function",183],["T_WHITESPACE"," ",183],["T_STRING","editAction",183],"(",")",["T_WHITESPACE","\n    ",183],"{",["T_WHITESPACE","\n        ",184],["T_VARIABLE","$this",185],["T_OBJECT_OPERATOR","->",185],["T_STRING","_title",185],"(",["T_VARIABLE","$this",185],["T_OBJECT_OPERATOR","->",185],["T_STRING","__",185],"(",["T_CONSTANT_ENCAPSED_STRING","'Newsletter'",185],")",")",["T_OBJECT_OPERATOR","->",185],["T_STRING","_title",185],"(",["T_VARIABLE","$this",185],["T_OBJECT_OPERATOR","->",185],["T_STRING","__",185],"(",["T_CONSTANT_ENCAPSED_STRING","'Newsletter Queue'",185],")",")",";",["T_WHITESPACE","\n\n        ",185],["T_STRING","Mage",187],["T_DOUBLE_COLON","::",187],["T_STRING","register",187],"(",["T_CONSTANT_ENCAPSED_STRING","'current_queue'",187],",",["T_WHITESPACE"," ",187],["T_STRING","Mage",187],["T_DOUBLE_COLON","::",187],["T_STRING","getSingleton",187],"(",["T_CONSTANT_ENCAPSED_STRING","'newsletter\/queue'",187],")",")",";",["T_WHITESPACE","\n\n        ",187],["T_VARIABLE","$id",189],["T_WHITESPACE"," ",189],"=",["T_WHITESPACE"," ",189],["T_VARIABLE","$this",189],["T_OBJECT_OPERATOR","->",189],["T_STRING","getRequest",189],"(",")",["T_OBJECT_OPERATOR","->",189],["T_STRING","getParam",189],"(",["T_CONSTANT_ENCAPSED_STRING","'id'",189],")",";",["T_WHITESPACE","\n        ",189],["T_VARIABLE","$templateId",190],["T_WHITESPACE"," ",190],"=",["T_WHITESPACE"," ",190],["T_VARIABLE","$this",190],["T_OBJECT_OPERATOR","->",190],["T_STRING","getRequest",190],"(",")",["T_OBJECT_OPERATOR","->",190],["T_STRING","getParam",190],"(",["T_CONSTANT_ENCAPSED_STRING","'template_id'",190],")",";",["T_WHITESPACE","\n\n        ",190],["T_IF","if",192],["T_WHITESPACE"," ",192],"(",["T_VARIABLE","$id",192],")",["T_WHITESPACE"," ",192],"{",["T_WHITESPACE","\n            ",192],["T_VARIABLE","$queue",193],["T_WHITESPACE"," ",193],"=",["T_WHITESPACE"," ",193],["T_STRING","Mage",193],["T_DOUBLE_COLON","::",193],["T_STRING","registry",193],"(",["T_CONSTANT_ENCAPSED_STRING","'current_queue'",193],")",["T_OBJECT_OPERATOR","->",193],["T_STRING","load",193],"(",["T_VARIABLE","$id",193],")",";",["T_WHITESPACE","\n        ",193],"}",["T_WHITESPACE"," ",194],["T_ELSEIF","elseif",194],["T_WHITESPACE"," ",194],"(",["T_VARIABLE","$templateId",194],")",["T_WHITESPACE"," ",194],"{",["T_WHITESPACE","\n            ",194],["T_VARIABLE","$template",195],["T_WHITESPACE"," ",195],"=",["T_WHITESPACE"," ",195],["T_STRING","Mage",195],["T_DOUBLE_COLON","::",195],["T_STRING","getModel",195],"(",["T_CONSTANT_ENCAPSED_STRING","'newsletter\/template'",195],")",["T_OBJECT_OPERATOR","->",195],["T_STRING","load",195],"(",["T_VARIABLE","$templateId",195],")",";",["T_WHITESPACE","\n            ",195],["T_VARIABLE","$queue",196],["T_WHITESPACE"," ",196],"=",["T_WHITESPACE"," ",196],["T_STRING","Mage",196],["T_DOUBLE_COLON","::",196],["T_STRING","registry",196],"(",["T_CONSTANT_ENCAPSED_STRING","'current_queue'",196],")",["T_OBJECT_OPERATOR","->",196],["T_STRING","setTemplateId",196],"(",["T_VARIABLE","$template",196],["T_OBJECT_OPERATOR","->",196],["T_STRING","getId",196],"(",")",")",";",["T_WHITESPACE","\n        ",196],"}",["T_WHITESPACE","\n\n        ",197],["T_VARIABLE","$this",199],["T_OBJECT_OPERATOR","->",199],["T_STRING","_title",199],"(",["T_VARIABLE","$this",199],["T_OBJECT_OPERATOR","->",199],["T_STRING","__",199],"(",["T_CONSTANT_ENCAPSED_STRING","'Edit Queue'",199],")",")",";",["T_WHITESPACE","\n\n        ",199],["T_VARIABLE","$this",201],["T_OBJECT_OPERATOR","->",201],["T_STRING","loadLayout",201],"(",")",";",["T_WHITESPACE","\n\n        ",201],["T_VARIABLE","$this",203],["T_OBJECT_OPERATOR","->",203],["T_STRING","_setActiveMenu",203],"(",["T_CONSTANT_ENCAPSED_STRING","'newsletter\/queue'",203],")",";",["T_WHITESPACE","\n\n        ",203],["T_VARIABLE","$this",205],["T_OBJECT_OPERATOR","->",205],["T_STRING","_addBreadcrumb",205],"(",["T_WHITESPACE","\n            ",205],["T_STRING","Mage",206],["T_DOUBLE_COLON","::",206],["T_STRING","helper",206],"(",["T_CONSTANT_ENCAPSED_STRING","'newsletter'",206],")",["T_OBJECT_OPERATOR","->",206],["T_STRING","__",206],"(",["T_CONSTANT_ENCAPSED_STRING","'Newsletter Queue'",206],")",",",["T_WHITESPACE","\n            ",206],["T_STRING","Mage",207],["T_DOUBLE_COLON","::",207],["T_STRING","helper",207],"(",["T_CONSTANT_ENCAPSED_STRING","'newsletter'",207],")",["T_OBJECT_OPERATOR","->",207],["T_STRING","__",207],"(",["T_CONSTANT_ENCAPSED_STRING","'Newsletter Queue'",207],")",",",["T_WHITESPACE","\n            ",207],["T_VARIABLE","$this",208],["T_OBJECT_OPERATOR","->",208],["T_STRING","getUrl",208],"(",["T_CONSTANT_ENCAPSED_STRING","'*\/newsletter_queue'",208],")",["T_WHITESPACE","\n        ",208],")",";",["T_WHITESPACE","\n        ",209],["T_VARIABLE","$this",210],["T_OBJECT_OPERATOR","->",210],["T_STRING","_addBreadcrumb",210],"(",["T_STRING","Mage",210],["T_DOUBLE_COLON","::",210],["T_STRING","helper",210],"(",["T_CONSTANT_ENCAPSED_STRING","'newsletter'",210],")",["T_OBJECT_OPERATOR","->",210],["T_STRING","__",210],"(",["T_CONSTANT_ENCAPSED_STRING","'Edit Queue'",210],")",",",["T_WHITESPACE"," ",210],["T_STRING","Mage",210],["T_DOUBLE_COLON","::",210],["T_STRING","helper",210],"(",["T_CONSTANT_ENCAPSED_STRING","'newsletter'",210],")",["T_OBJECT_OPERATOR","->",210],["T_STRING","__",210],"(",["T_CONSTANT_ENCAPSED_STRING","'Edit Queue'",210],")",")",";",["T_WHITESPACE","\n\n        ",210],["T_VARIABLE","$this",212],["T_OBJECT_OPERATOR","->",212],["T_STRING","renderLayout",212],"(",")",";",["T_WHITESPACE","\n    ",212],"}",["T_WHITESPACE","\n\n    ",213],["T_PUBLIC","public",215],["T_WHITESPACE"," ",215],["T_FUNCTION","function",215],["T_WHITESPACE"," ",215],["T_STRING","saveAction",215],"(",")",["T_WHITESPACE","\n    ",215],"{",["T_WHITESPACE","\n        ",216],["T_TRY","try",217],["T_WHITESPACE"," ",217],"{",["T_WHITESPACE","\n            ",217],["T_COMMENT","\/* @var $queue Mage_Newsletter_Model_Queue *\/",218],["T_WHITESPACE","\n            ",218],["T_VARIABLE","$queue",219],["T_WHITESPACE"," ",219],"=",["T_WHITESPACE"," ",219],["T_STRING","Mage",219],["T_DOUBLE_COLON","::",219],["T_STRING","getModel",219],"(",["T_CONSTANT_ENCAPSED_STRING","'newsletter\/queue'",219],")",";",["T_WHITESPACE","\n\n            ",219],["T_VARIABLE","$templateId",221],["T_WHITESPACE"," ",221],"=",["T_WHITESPACE"," ",221],["T_VARIABLE","$this",221],["T_OBJECT_OPERATOR","->",221],["T_STRING","getRequest",221],"(",")",["T_OBJECT_OPERATOR","->",221],["T_STRING","getParam",221],"(",["T_CONSTANT_ENCAPSED_STRING","'template_id'",221],")",";",["T_WHITESPACE","\n            ",221],["T_IF","if",222],["T_WHITESPACE"," ",222],"(",["T_VARIABLE","$templateId",222],")",["T_WHITESPACE"," ",222],"{",["T_WHITESPACE","\n                ",222],["T_COMMENT","\/* @var $template Mage_Newsletter_Model_Template *\/",223],["T_WHITESPACE","\n                ",223],["T_VARIABLE","$template",224],["T_WHITESPACE"," ",224],"=",["T_WHITESPACE"," ",224],["T_STRING","Mage",224],["T_DOUBLE_COLON","::",224],["T_STRING","getModel",224],"(",["T_CONSTANT_ENCAPSED_STRING","'newsletter\/template'",224],")",["T_OBJECT_OPERATOR","->",224],["T_STRING","load",224],"(",["T_VARIABLE","$templateId",224],")",";",["T_WHITESPACE","\n\n                ",224],["T_IF","if",226],["T_WHITESPACE"," ",226],"(","!",["T_VARIABLE","$template",226],["T_OBJECT_OPERATOR","->",226],["T_STRING","getId",226],"(",")",["T_WHITESPACE"," ",226],["T_BOOLEAN_OR","||",226],["T_WHITESPACE"," ",226],["T_VARIABLE","$template",226],["T_OBJECT_OPERATOR","->",226],["T_STRING","getIsSystem",226],"(",")",")",["T_WHITESPACE"," ",226],"{",["T_WHITESPACE","\n                    ",226],["T_STRING","Mage",227],["T_DOUBLE_COLON","::",227],["T_STRING","throwException",227],"(",["T_VARIABLE","$this",227],["T_OBJECT_OPERATOR","->",227],["T_STRING","__",227],"(",["T_CONSTANT_ENCAPSED_STRING","'Wrong newsletter template.'",227],")",")",";",["T_WHITESPACE","\n                ",227],"}",["T_WHITESPACE","\n\n                ",228],["T_VARIABLE","$queue",230],["T_OBJECT_OPERATOR","->",230],["T_STRING","setTemplateId",230],"(",["T_VARIABLE","$template",230],["T_OBJECT_OPERATOR","->",230],["T_STRING","getId",230],"(",")",")",["T_WHITESPACE","\n                    ",230],["T_OBJECT_OPERATOR","->",231],["T_STRING","setQueueStatus",231],"(",["T_STRING","Mage_Newsletter_Model_Queue",231],["T_DOUBLE_COLON","::",231],["T_STRING","STATUS_NEVER",231],")",";",["T_WHITESPACE","\n            ",231],"}",["T_WHITESPACE"," ",232],["T_ELSE","else",232],["T_WHITESPACE"," ",232],"{",["T_WHITESPACE","\n                ",232],["T_VARIABLE","$queue",233],["T_OBJECT_OPERATOR","->",233],["T_STRING","load",233],"(",["T_VARIABLE","$this",233],["T_OBJECT_OPERATOR","->",233],["T_STRING","getRequest",233],"(",")",["T_OBJECT_OPERATOR","->",233],["T_STRING","getParam",233],"(",["T_CONSTANT_ENCAPSED_STRING","'id'",233],")",")",";",["T_WHITESPACE","\n            ",233],"}",["T_WHITESPACE","\n\n            ",234],["T_IF","if",236],["T_WHITESPACE"," ",236],"(","!",["T_STRING","in_array",236],"(",["T_VARIABLE","$queue",236],["T_OBJECT_OPERATOR","->",236],["T_STRING","getQueueStatus",236],"(",")",",",["T_WHITESPACE","\n                   ",236],["T_ARRAY","array",237],"(",["T_STRING","Mage_Newsletter_Model_Queue",237],["T_DOUBLE_COLON","::",237],["T_STRING","STATUS_NEVER",237],",",["T_WHITESPACE","\n                         ",237],["T_STRING","Mage_Newsletter_Model_Queue",238],["T_DOUBLE_COLON","::",238],["T_STRING","STATUS_PAUSE",238],")",")",["T_WHITESPACE","\n            ",238],")",["T_WHITESPACE"," ",239],"{",["T_WHITESPACE","\n                ",239],["T_VARIABLE","$this",240],["T_OBJECT_OPERATOR","->",240],["T_STRING","_redirect",240],"(",["T_CONSTANT_ENCAPSED_STRING","'*\/*'",240],")",";",["T_WHITESPACE","\n                ",240],["T_RETURN","return",241],";",["T_WHITESPACE","\n            ",241],"}",["T_WHITESPACE","\n\n            ",242],["T_IF","if",244],["T_WHITESPACE"," ",244],"(",["T_VARIABLE","$queue",244],["T_OBJECT_OPERATOR","->",244],["T_STRING","getQueueStatus",244],"(",")",["T_WHITESPACE"," ",244],["T_IS_EQUAL","==",244],["T_WHITESPACE"," ",244],["T_STRING","Mage_Newsletter_Model_Queue",244],["T_DOUBLE_COLON","::",244],["T_STRING","STATUS_NEVER",244],")",["T_WHITESPACE"," ",244],"{",["T_WHITESPACE","\n                ",244],["T_VARIABLE","$queue",245],["T_OBJECT_OPERATOR","->",245],["T_STRING","setQueueStartAtByString",245],"(",["T_VARIABLE","$this",245],["T_OBJECT_OPERATOR","->",245],["T_STRING","getRequest",245],"(",")",["T_OBJECT_OPERATOR","->",245],["T_STRING","getParam",245],"(",["T_CONSTANT_ENCAPSED_STRING","'start_at'",245],")",")",";",["T_WHITESPACE","\n            ",245],"}",["T_WHITESPACE","\n\n            ",246],["T_VARIABLE","$queue",248],["T_OBJECT_OPERATOR","->",248],["T_STRING","setStores",248],"(",["T_VARIABLE","$this",248],["T_OBJECT_OPERATOR","->",248],["T_STRING","getRequest",248],"(",")",["T_OBJECT_OPERATOR","->",248],["T_STRING","getParam",248],"(",["T_CONSTANT_ENCAPSED_STRING","'stores'",248],",",["T_WHITESPACE"," ",248],["T_ARRAY","array",248],"(",")",")",")",["T_WHITESPACE","\n                ",248],["T_OBJECT_OPERATOR","->",249],["T_STRING","setNewsletterSubject",249],"(",["T_VARIABLE","$this",249],["T_OBJECT_OPERATOR","->",249],["T_STRING","getRequest",249],"(",")",["T_OBJECT_OPERATOR","->",249],["T_STRING","getParam",249],"(",["T_CONSTANT_ENCAPSED_STRING","'subject'",249],")",")",["T_WHITESPACE","\n                ",249],["T_OBJECT_OPERATOR","->",250],["T_STRING","setNewsletterSenderName",250],"(",["T_VARIABLE","$this",250],["T_OBJECT_OPERATOR","->",250],["T_STRING","getRequest",250],"(",")",["T_OBJECT_OPERATOR","->",250],["T_STRING","getParam",250],"(",["T_CONSTANT_ENCAPSED_STRING","'sender_name'",250],")",")",["T_WHITESPACE","\n                ",250],["T_OBJECT_OPERATOR","->",251],["T_STRING","setNewsletterSenderEmail",251],"(",["T_VARIABLE","$this",251],["T_OBJECT_OPERATOR","->",251],["T_STRING","getRequest",251],"(",")",["T_OBJECT_OPERATOR","->",251],["T_STRING","getParam",251],"(",["T_CONSTANT_ENCAPSED_STRING","'sender_email'",251],")",")",["T_WHITESPACE","\n                ",251],["T_OBJECT_OPERATOR","->",252],["T_STRING","setNewsletterText",252],"(",["T_VARIABLE","$this",252],["T_OBJECT_OPERATOR","->",252],["T_STRING","getRequest",252],"(",")",["T_OBJECT_OPERATOR","->",252],["T_STRING","getParam",252],"(",["T_CONSTANT_ENCAPSED_STRING","'text'",252],")",")",["T_WHITESPACE","\n                ",252],["T_OBJECT_OPERATOR","->",253],["T_STRING","setNewsletterStyles",253],"(",["T_VARIABLE","$this",253],["T_OBJECT_OPERATOR","->",253],["T_STRING","getRequest",253],"(",")",["T_OBJECT_OPERATOR","->",253],["T_STRING","getParam",253],"(",["T_CONSTANT_ENCAPSED_STRING","'styles'",253],")",")",";",["T_WHITESPACE","\n\n            ",253],["T_IF","if",255],["T_WHITESPACE"," ",255],"(",["T_VARIABLE","$queue",255],["T_OBJECT_OPERATOR","->",255],["T_STRING","getQueueStatus",255],"(",")",["T_WHITESPACE"," ",255],["T_IS_EQUAL","==",255],["T_WHITESPACE"," ",255],["T_STRING","Mage_Newsletter_Model_Queue",255],["T_DOUBLE_COLON","::",255],["T_STRING","STATUS_PAUSE",255],["T_WHITESPACE","\n                ",255],["T_BOOLEAN_AND","&&",256],["T_WHITESPACE"," ",256],["T_VARIABLE","$this",256],["T_OBJECT_OPERATOR","->",256],["T_STRING","getRequest",256],"(",")",["T_OBJECT_OPERATOR","->",256],["T_STRING","getParam",256],"(",["T_CONSTANT_ENCAPSED_STRING","'_resume'",256],",",["T_WHITESPACE"," ",256],["T_STRING","false",256],")",")",["T_WHITESPACE"," ",256],"{",["T_WHITESPACE","\n                ",256],["T_VARIABLE","$queue",257],["T_OBJECT_OPERATOR","->",257],["T_STRING","setQueueStatus",257],"(",["T_STRING","Mage_Newsletter_Model_Queue",257],["T_DOUBLE_COLON","::",257],["T_STRING","STATUS_SENDING",257],")",";",["T_WHITESPACE","\n            ",257],"}",["T_WHITESPACE","\n\n            ",258],["T_VARIABLE","$queue",260],["T_OBJECT_OPERATOR","->",260],["T_STRING","save",260],"(",")",";",["T_WHITESPACE","\n            ",260],["T_VARIABLE","$this",261],["T_OBJECT_OPERATOR","->",261],["T_STRING","_redirect",261],"(",["T_CONSTANT_ENCAPSED_STRING","'*\/*'",261],")",";",["T_WHITESPACE","\n        ",261],"}",["T_WHITESPACE","\n        ",262],["T_CATCH","catch",263],["T_WHITESPACE"," ",263],"(",["T_STRING","Mage_Core_Exception",263],["T_WHITESPACE"," ",263],["T_VARIABLE","$e",263],")",["T_WHITESPACE"," ",263],"{",["T_WHITESPACE","\n            ",263],["T_VARIABLE","$this",264],["T_OBJECT_OPERATOR","->",264],["T_STRING","_getSession",264],"(",")",["T_OBJECT_OPERATOR","->",264],["T_STRING","addError",264],"(",["T_VARIABLE","$e",264],["T_OBJECT_OPERATOR","->",264],["T_STRING","getMessage",264],"(",")",")",";",["T_WHITESPACE","\n            ",264],["T_VARIABLE","$id",265],["T_WHITESPACE"," ",265],"=",["T_WHITESPACE"," ",265],["T_VARIABLE","$this",265],["T_OBJECT_OPERATOR","->",265],["T_STRING","getRequest",265],"(",")",["T_OBJECT_OPERATOR","->",265],["T_STRING","getParam",265],"(",["T_CONSTANT_ENCAPSED_STRING","'id'",265],")",";",["T_WHITESPACE","\n            ",265],["T_IF","if",266],["T_WHITESPACE"," ",266],"(",["T_VARIABLE","$id",266],")",["T_WHITESPACE"," ",266],"{",["T_WHITESPACE","\n                ",266],["T_VARIABLE","$this",267],["T_OBJECT_OPERATOR","->",267],["T_STRING","_redirect",267],"(",["T_CONSTANT_ENCAPSED_STRING","'*\/*\/edit'",267],",",["T_WHITESPACE"," ",267],["T_ARRAY","array",267],"(",["T_CONSTANT_ENCAPSED_STRING","'id'",267],["T_WHITESPACE"," ",267],["T_DOUBLE_ARROW","=>",267],["T_WHITESPACE"," ",267],["T_VARIABLE","$id",267],")",")",";",["T_WHITESPACE","\n            ",267],"}",["T_WHITESPACE"," ",268],["T_ELSE","else",268],["T_WHITESPACE"," ",268],"{",["T_WHITESPACE","\n                ",268],["T_VARIABLE","$this",269],["T_OBJECT_OPERATOR","->",269],["T_STRING","_redirectReferer",269],"(",")",";",["T_WHITESPACE","\n            ",269],"}",["T_WHITESPACE","\n        ",270],"}",["T_WHITESPACE","\n    ",271],"}",["T_WHITESPACE","\n\n    ",272],["T_PROTECTED","protected",274],["T_WHITESPACE"," ",274],["T_FUNCTION","function",274],["T_WHITESPACE"," ",274],["T_STRING","_isAllowed",274],"(",")",["T_WHITESPACE","\n    ",274],"{",["T_WHITESPACE","\n        ",275],["T_RETURN","return",276],["T_WHITESPACE"," ",276],["T_STRING","Mage",276],["T_DOUBLE_COLON","::",276],["T_STRING","getSingleton",276],"(",["T_CONSTANT_ENCAPSED_STRING","'admin\/session'",276],")",["T_OBJECT_OPERATOR","->",276],["T_STRING","isAllowed",276],"(",["T_CONSTANT_ENCAPSED_STRING","'newsletter\/queue'",276],")",";",["T_WHITESPACE","\n    ",276],"}",["T_WHITESPACE","\n",277],"}",["T_WHITESPACE","\n",278]]
[["T_OPEN_TAG","<?php\n",1],["T_DOC_COMMENT","\/**\n * Magento\n *\n * NOTICE OF LICENSE\n *\n * This source file is subject to the Open Software License (OSL 3.0)\n * that is bundled with this package in the file LICENSE.txt.\n * It is also available through the world-wide-web at this URL:\n * http:\/\/opensource.org\/licenses\/osl-3.0.php\n * If you did not receive a copy of the license and are unable to\n * obtain it through the world-wide-web, please send an email\n * to license@magento.com so we can send you a copy immediately.\n *\n * DISCLAIMER\n *\n * Do not edit or add to this file if you wish to upgrade Magento to newer\n * versions in the future. If you wish to customize Magento for your\n * needs please refer to http:\/\/www.magento.com for more information.\n *\n * @category    Mage\n * @package     Mage_Adminhtml\n * @copyright  Copyright (c) 2006-2016 X.commerce, Inc. and affiliates (http:\/\/www.magento.com)\n * @license    http:\/\/opensource.org\/licenses\/osl-3.0.php  Open Software License (OSL 3.0)\n *\/",2],["T_WHITESPACE","\n\n\n",25],["T_DOC_COMMENT","\/**\n * Abstract items renderer\n *\n * @category    Mage\n * @package     Mage_Adminhtml\n * @author      Magento Core Team <core@magentocommerce.com>\n *\/",28],["T_WHITESPACE","\n",34],["T_CLASS","class",35],["T_WHITESPACE","  ",35],["T_STRING","Mage_Adminhtml_Block_Sales_Items_Abstract",35],["T_WHITESPACE"," ",35],["T_EXTENDS","extends",35],["T_WHITESPACE"," ",35],["T_STRING","Mage_Adminhtml_Block_Template",35],["T_WHITESPACE","\n",35],"{",["T_WHITESPACE","\n    ",36],["T_DOC_COMMENT","\/**\n     * Renderers with render type key\n     * block    => the block name\n     * template => the template file\n     * renderer => the block object\n     *\n     * @var array\n     *\/",37],["T_WHITESPACE","\n    ",44],["T_PROTECTED","protected",45],["T_WHITESPACE"," ",45],["T_VARIABLE","$_itemRenders",45],["T_WHITESPACE"," ",45],"=",["T_WHITESPACE"," ",45],["T_ARRAY","array",45],"(",")",";",["T_WHITESPACE","\n\n    ",45],["T_DOC_COMMENT","\/**\n     * Renderers for other column with column name key\n     * block    => the block name\n     * template => the template file\n     * renderer => the block object\n     *\n     * @var array\n     *\/",47],["T_WHITESPACE","\n    ",54],["T_PROTECTED","protected",55],["T_WHITESPACE"," ",55],["T_VARIABLE","$_columnRenders",55],["T_WHITESPACE"," ",55],"=",["T_WHITESPACE"," ",55],["T_ARRAY","array",55],"(",")",";",["T_WHITESPACE","\n\n    ",55],["T_DOC_COMMENT","\/**\n     * Flag - if it is set method canEditQty will return value of it\n     *\n     * @var boolean | null\n     *\/",57],["T_WHITESPACE","\n    ",61],["T_PROTECTED","protected",62],["T_WHITESPACE"," ",62],["T_VARIABLE","$_canEditQty",62],["T_WHITESPACE"," ",62],"=",["T_WHITESPACE"," ",62],["T_STRING","null",62],";",["T_WHITESPACE","\n\n    ",62],["T_DOC_COMMENT","\/**\n     * Init block\n     *\n     *\/",64],["T_WHITESPACE","\n    ",67],["T_PROTECTED","protected",68],["T_WHITESPACE"," ",68],["T_FUNCTION","function",68],["T_WHITESPACE"," ",68],["T_STRING","_construct",68],"(",")",["T_WHITESPACE","\n    ",68],"{",["T_WHITESPACE","\n        ",69],["T_VARIABLE","$this",70],["T_OBJECT_OPERATOR","->",70],["T_STRING","addColumnRender",70],"(",["T_CONSTANT_ENCAPSED_STRING","'qty'",70],",",["T_WHITESPACE"," ",70],["T_CONSTANT_ENCAPSED_STRING","'adminhtml\/sales_items_column_qty'",70],",",["T_WHITESPACE"," ",70],["T_CONSTANT_ENCAPSED_STRING","'sales\/items\/column\/qty.phtml'",70],")",";",["T_WHITESPACE","\n        ",70],["T_VARIABLE","$this",71],["T_OBJECT_OPERATOR","->",71],["T_STRING","addColumnRender",71],"(",["T_CONSTANT_ENCAPSED_STRING","'name'",71],",",["T_WHITESPACE"," ",71],["T_CONSTANT_ENCAPSED_STRING","'adminhtml\/sales_items_column_name'",71],",",["T_WHITESPACE"," ",71],["T_CONSTANT_ENCAPSED_STRING","'sales\/items\/column\/name.phtml'",71],")",";",["T_WHITESPACE","\n        ",71],["T_STRING","parent",72],["T_DOUBLE_COLON","::",72],["T_STRING","_construct",72],"(",")",";",["T_WHITESPACE","\n    ",72],"}",["T_WHITESPACE","\n\n    ",73],["T_DOC_COMMENT","\/**\n     * Add item renderer\n     *\n     * @param string $type\n     * @param string $block\n     * @param string $template\n     * @return Mage_Adminhtml_Block_Sales_Items_Abstract\n     *\/",75],["T_WHITESPACE","\n    ",82],["T_PUBLIC","public",83],["T_WHITESPACE"," ",83],["T_FUNCTION","function",83],["T_WHITESPACE"," ",83],["T_STRING","addItemRender",83],"(",["T_VARIABLE","$type",83],",",["T_WHITESPACE"," ",83],["T_VARIABLE","$block",83],",",["T_WHITESPACE"," ",83],["T_VARIABLE","$template",83],")",["T_WHITESPACE","\n    ",83],"{",["T_WHITESPACE","\n        ",84],["T_VARIABLE","$this",85],["T_OBJECT_OPERATOR","->",85],["T_STRING","_itemRenders",85],"[",["T_VARIABLE","$type",85],"]",["T_WHITESPACE"," ",85],"=",["T_WHITESPACE"," ",85],["T_ARRAY","array",85],"(",["T_WHITESPACE","\n            ",85],["T_CONSTANT_ENCAPSED_STRING","'block'",86],["T_WHITESPACE","     ",86],["T_DOUBLE_ARROW","=>",86],["T_WHITESPACE"," ",86],["T_VARIABLE","$block",86],",",["T_WHITESPACE","\n            ",86],["T_CONSTANT_ENCAPSED_STRING","'template'",87],["T_WHITESPACE","  ",87],["T_DOUBLE_ARROW","=>",87],["T_WHITESPACE"," ",87],["T_VARIABLE","$template",87],",",["T_WHITESPACE","\n            ",87],["T_CONSTANT_ENCAPSED_STRING","'renderer'",88],["T_WHITESPACE","  ",88],["T_DOUBLE_ARROW","=>",88],["T_WHITESPACE"," ",88],["T_STRING","null",88],["T_WHITESPACE","\n        ",88],")",";",["T_WHITESPACE","\n        ",89],["T_RETURN","return",90],["T_WHITESPACE"," ",90],["T_VARIABLE","$this",90],";",["T_WHITESPACE","\n    ",90],"}",["T_WHITESPACE","\n\n    ",91],["T_DOC_COMMENT","\/**\n     * Add column renderer\n     *\n     * @param string $column\n     * @param string $block\n     * @param string $template\n     * @return Mage_Adminhtml_Block_Sales_Items_Abstract\n     *\/",93],["T_WHITESPACE","\n    ",100],["T_PUBLIC","public",101],["T_WHITESPACE"," ",101],["T_FUNCTION","function",101],["T_WHITESPACE"," ",101],["T_STRING","addColumnRender",101],"(",["T_VARIABLE","$column",101],",",["T_WHITESPACE"," ",101],["T_VARIABLE","$block",101],",",["T_WHITESPACE"," ",101],["T_VARIABLE","$template",101],",",["T_WHITESPACE"," ",101],["T_VARIABLE","$type",101],"=",["T_STRING","null",101],")",["T_WHITESPACE","\n    ",101],"{",["T_WHITESPACE","\n        ",102],["T_IF","if",103],["T_WHITESPACE"," ",103],"(","!",["T_STRING","is_null",103],"(",["T_VARIABLE","$type",103],")",")",["T_WHITESPACE"," ",103],"{",["T_WHITESPACE","\n            ",103],["T_VARIABLE","$column",104],["T_WHITESPACE"," ",104],["T_CONCAT_EQUAL",".=",104],["T_WHITESPACE"," ",104],["T_CONSTANT_ENCAPSED_STRING","'_'",104],["T_WHITESPACE"," ",104],".",["T_WHITESPACE"," ",104],["T_VARIABLE","$type",104],";",["T_WHITESPACE","\n        ",104],"}",["T_WHITESPACE","\n        ",105],["T_VARIABLE","$this",106],["T_OBJECT_OPERATOR","->",106],["T_STRING","_columnRenders",106],"[",["T_VARIABLE","$column",106],"]",["T_WHITESPACE"," ",106],"=",["T_WHITESPACE"," ",106],["T_ARRAY","array",106],"(",["T_WHITESPACE","\n            ",106],["T_CONSTANT_ENCAPSED_STRING","'block'",107],["T_WHITESPACE","     ",107],["T_DOUBLE_ARROW","=>",107],["T_WHITESPACE"," ",107],["T_VARIABLE","$block",107],",",["T_WHITESPACE","\n            ",107],["T_CONSTANT_ENCAPSED_STRING","'template'",108],["T_WHITESPACE","  ",108],["T_DOUBLE_ARROW","=>",108],["T_WHITESPACE"," ",108],["T_VARIABLE","$template",108],",",["T_WHITESPACE","\n            ",108],["T_CONSTANT_ENCAPSED_STRING","'renderer'",109],["T_WHITESPACE","  ",109],["T_DOUBLE_ARROW","=>",109],["T_WHITESPACE"," ",109],["T_STRING","null",109],["T_WHITESPACE","\n        ",109],")",";",["T_WHITESPACE","\n        ",110],["T_RETURN","return",111],["T_WHITESPACE"," ",111],["T_VARIABLE","$this",111],";",["T_WHITESPACE","\n    ",111],"}",["T_WHITESPACE","\n\n    ",112],["T_DOC_COMMENT","\/**\n     * Retrieve item renderer block\n     *\n     * @param string $type\n     * @return Mage_Core_Block_Abstract\n     *\/",114],["T_WHITESPACE","\n    ",119],["T_PUBLIC","public",120],["T_WHITESPACE"," ",120],["T_FUNCTION","function",120],["T_WHITESPACE"," ",120],["T_STRING","getItemRenderer",120],"(",["T_VARIABLE","$type",120],")",["T_WHITESPACE","\n    ",120],"{",["T_WHITESPACE","\n        ",121],["T_IF","if",122],["T_WHITESPACE"," ",122],"(","!",["T_ISSET","isset",122],"(",["T_VARIABLE","$this",122],["T_OBJECT_OPERATOR","->",122],["T_STRING","_itemRenders",122],"[",["T_VARIABLE","$type",122],"]",")",")",["T_WHITESPACE"," ",122],"{",["T_WHITESPACE","\n            ",122],["T_VARIABLE","$type",123],["T_WHITESPACE"," ",123],"=",["T_WHITESPACE"," ",123],["T_CONSTANT_ENCAPSED_STRING","'default'",123],";",["T_WHITESPACE","\n        ",123],"}",["T_WHITESPACE","\n        ",124],["T_IF","if",125],["T_WHITESPACE"," ",125],"(",["T_STRING","is_null",125],"(",["T_VARIABLE","$this",125],["T_OBJECT_OPERATOR","->",125],["T_STRING","_itemRenders",125],"[",["T_VARIABLE","$type",125],"]","[",["T_CONSTANT_ENCAPSED_STRING","'renderer'",125],"]",")",")",["T_WHITESPACE"," ",125],"{",["T_WHITESPACE","\n            ",125],["T_VARIABLE","$this",126],["T_OBJECT_OPERATOR","->",126],["T_STRING","_itemRenders",126],"[",["T_VARIABLE","$type",126],"]","[",["T_CONSTANT_ENCAPSED_STRING","'renderer'",126],"]",["T_WHITESPACE"," ",126],"=",["T_WHITESPACE"," ",126],["T_VARIABLE","$this",126],["T_OBJECT_OPERATOR","->",126],["T_STRING","getLayout",126],"(",")",["T_WHITESPACE","\n                ",126],["T_OBJECT_OPERATOR","->",127],["T_STRING","createBlock",127],"(",["T_VARIABLE","$this",127],["T_OBJECT_OPERATOR","->",127],["T_STRING","_itemRenders",127],"[",["T_VARIABLE","$type",127],"]","[",["T_CONSTANT_ENCAPSED_STRING","'block'",127],"]",")",["T_WHITESPACE","\n                ",127],["T_OBJECT_OPERATOR","->",128],["T_STRING","setTemplate",128],"(",["T_VARIABLE","$this",128],["T_OBJECT_OPERATOR","->",128],["T_STRING","_itemRenders",128],"[",["T_VARIABLE","$type",128],"]","[",["T_CONSTANT_ENCAPSED_STRING","'template'",128],"]",")",";",["T_WHITESPACE","\n            ",128],["T_FOREACH","foreach",129],["T_WHITESPACE"," ",129],"(",["T_VARIABLE","$this",129],["T_OBJECT_OPERATOR","->",129],["T_STRING","_columnRenders",129],["T_WHITESPACE"," ",129],["T_AS","as",129],["T_WHITESPACE"," ",129],["T_VARIABLE","$columnType",129],["T_DOUBLE_ARROW","=>",129],["T_VARIABLE","$renderer",129],")",["T_WHITESPACE"," ",129],"{",["T_WHITESPACE","\n                ",129],["T_VARIABLE","$this",130],["T_OBJECT_OPERATOR","->",130],["T_STRING","_itemRenders",130],"[",["T_VARIABLE","$type",130],"]","[",["T_CONSTANT_ENCAPSED_STRING","'renderer'",130],"]",["T_OBJECT_OPERATOR","->",130],["T_STRING","addColumnRender",130],"(",["T_VARIABLE","$columnType",130],",",["T_WHITESPACE"," ",130],["T_VARIABLE","$renderer",130],"[",["T_CONSTANT_ENCAPSED_STRING","'block'",130],"]",",",["T_WHITESPACE"," ",130],["T_VARIABLE","$renderer",130],"[",["T_CONSTANT_ENCAPSED_STRING","'template'",130],"]",")",";",["T_WHITESPACE","\n            ",130],"}",["T_WHITESPACE","\n        ",131],"}",["T_WHITESPACE","\n        ",132],["T_RETURN","return",133],["T_WHITESPACE"," ",133],["T_VARIABLE","$this",133],["T_OBJECT_OPERATOR","->",133],["T_STRING","_itemRenders",133],"[",["T_VARIABLE","$type",133],"]","[",["T_CONSTANT_ENCAPSED_STRING","'renderer'",133],"]",";",["T_WHITESPACE","\n    ",133],"}",["T_WHITESPACE","\n\n    ",134],["T_DOC_COMMENT","\/**\n     * Retrieve column renderer block\n     *\n     * @param string $column\n     * @param string $compositePart\n     * @return Mage_Core_Block_Abstract\n     *\/",136],["T_WHITESPACE","\n    ",142],["T_PUBLIC","public",143],["T_WHITESPACE"," ",143],["T_FUNCTION","function",143],["T_WHITESPACE"," ",143],["T_STRING","getColumnRenderer",143],"(",["T_VARIABLE","$column",143],",",["T_WHITESPACE"," ",143],["T_VARIABLE","$compositePart",143],"=",["T_CONSTANT_ENCAPSED_STRING","''",143],")",["T_WHITESPACE","\n    ",143],"{",["T_WHITESPACE","\n        ",144],["T_IF","if",145],["T_WHITESPACE"," ",145],"(",["T_ISSET","isset",145],"(",["T_VARIABLE","$this",145],["T_OBJECT_OPERATOR","->",145],["T_STRING","_columnRenders",145],"[",["T_VARIABLE","$column",145],["T_WHITESPACE"," ",145],".",["T_WHITESPACE"," ",145],["T_CONSTANT_ENCAPSED_STRING","'_'",145],["T_WHITESPACE"," ",145],".",["T_WHITESPACE"," ",145],["T_VARIABLE","$compositePart",145],"]",")",")",["T_WHITESPACE"," ",145],"{",["T_WHITESPACE","\n            ",145],["T_VARIABLE","$column",146],["T_WHITESPACE"," ",146],["T_CONCAT_EQUAL",".=",146],["T_WHITESPACE"," ",146],["T_CONSTANT_ENCAPSED_STRING","'_'",146],["T_WHITESPACE"," ",146],".",["T_WHITESPACE"," ",146],["T_VARIABLE","$compositePart",146],";",["T_WHITESPACE","\n        ",146],"}",["T_WHITESPACE","\n        ",147],["T_IF","if",148],["T_WHITESPACE"," ",148],"(","!",["T_ISSET","isset",148],"(",["T_VARIABLE","$this",148],["T_OBJECT_OPERATOR","->",148],["T_STRING","_columnRenders",148],"[",["T_VARIABLE","$column",148],"]",")",")",["T_WHITESPACE"," ",148],"{",["T_WHITESPACE","\n            ",148],["T_RETURN","return",149],["T_WHITESPACE"," ",149],["T_STRING","false",149],";",["T_WHITESPACE","\n        ",149],"}",["T_WHITESPACE","\n        ",150],["T_IF","if",151],["T_WHITESPACE"," ",151],"(",["T_STRING","is_null",151],"(",["T_VARIABLE","$this",151],["T_OBJECT_OPERATOR","->",151],["T_STRING","_columnRenders",151],"[",["T_VARIABLE","$column",151],"]","[",["T_CONSTANT_ENCAPSED_STRING","'renderer'",151],"]",")",")",["T_WHITESPACE"," ",151],"{",["T_WHITESPACE","\n            ",151],["T_VARIABLE","$this",152],["T_OBJECT_OPERATOR","->",152],["T_STRING","_columnRenders",152],"[",["T_VARIABLE","$column",152],"]","[",["T_CONSTANT_ENCAPSED_STRING","'renderer'",152],"]",["T_WHITESPACE"," ",152],"=",["T_WHITESPACE"," ",152],["T_VARIABLE","$this",152],["T_OBJECT_OPERATOR","->",152],["T_STRING","getLayout",152],"(",")",["T_WHITESPACE","\n                ",152],["T_OBJECT_OPERATOR","->",153],["T_STRING","createBlock",153],"(",["T_VARIABLE","$this",153],["T_OBJECT_OPERATOR","->",153],["T_STRING","_columnRenders",153],"[",["T_VARIABLE","$column",153],"]","[",["T_CONSTANT_ENCAPSED_STRING","'block'",153],"]",")",["T_WHITESPACE","\n                ",153],["T_OBJECT_OPERATOR","->",154],["T_STRING","setTemplate",154],"(",["T_VARIABLE","$this",154],["T_OBJECT_OPERATOR","->",154],["T_STRING","_columnRenders",154],"[",["T_VARIABLE","$column",154],"]","[",["T_CONSTANT_ENCAPSED_STRING","'template'",154],"]",")",["T_WHITESPACE","\n                ",154],["T_OBJECT_OPERATOR","->",155],["T_STRING","setRenderedBlock",155],"(",["T_VARIABLE","$this",155],")",";",["T_WHITESPACE","\n        ",155],"}",["T_WHITESPACE","\n        ",156],["T_RETURN","return",157],["T_WHITESPACE"," ",157],["T_VARIABLE","$this",157],["T_OBJECT_OPERATOR","->",157],["T_STRING","_columnRenders",157],"[",["T_VARIABLE","$column",157],"]","[",["T_CONSTANT_ENCAPSED_STRING","'renderer'",157],"]",";",["T_WHITESPACE","\n    ",157],"}",["T_WHITESPACE","\n\n    ",158],["T_DOC_COMMENT","\/**\n     * Retrieve rendered item html content\n     *\n     * @param Varien_Object $item\n     * @return string\n     *\/",160],["T_WHITESPACE","\n    ",165],["T_PUBLIC","public",166],["T_WHITESPACE"," ",166],["T_FUNCTION","function",166],["T_WHITESPACE"," ",166],["T_STRING","getItemHtml",166],"(",["T_STRING","Varien_Object",166],["T_WHITESPACE"," ",166],["T_VARIABLE","$item",166],")",["T_WHITESPACE","\n    ",166],"{",["T_WHITESPACE","\n        ",167],["T_IF","if",168],["T_WHITESPACE"," ",168],"(",["T_VARIABLE","$item",168],["T_OBJECT_OPERATOR","->",168],["T_STRING","getOrderItem",168],"(",")",")",["T_WHITESPACE"," ",168],"{",["T_WHITESPACE","\n            ",168],["T_VARIABLE","$type",169],["T_WHITESPACE"," ",169],"=",["T_WHITESPACE"," ",169],["T_VARIABLE","$item",169],["T_OBJECT_OPERATOR","->",169],["T_STRING","getOrderItem",169],"(",")",["T_OBJECT_OPERATOR","->",169],["T_STRING","getProductType",169],"(",")",";",["T_WHITESPACE","\n        ",169],"}",["T_WHITESPACE"," ",170],["T_ELSE","else",170],["T_WHITESPACE"," ",170],"{",["T_WHITESPACE","\n            ",170],["T_VARIABLE","$type",171],["T_WHITESPACE"," ",171],"=",["T_WHITESPACE"," ",171],["T_VARIABLE","$item",171],["T_OBJECT_OPERATOR","->",171],["T_STRING","getProductType",171],"(",")",";",["T_WHITESPACE","\n        ",171],"}",["T_WHITESPACE","\n\n        ",172],["T_RETURN","return",174],["T_WHITESPACE"," ",174],["T_VARIABLE","$this",174],["T_OBJECT_OPERATOR","->",174],["T_STRING","getItemRenderer",174],"(",["T_VARIABLE","$type",174],")",["T_WHITESPACE","\n            ",174],["T_OBJECT_OPERATOR","->",175],["T_STRING","setItem",175],"(",["T_VARIABLE","$item",175],")",["T_WHITESPACE","\n            ",175],["T_OBJECT_OPERATOR","->",176],["T_STRING","setCanEditQty",176],"(",["T_VARIABLE","$this",176],["T_OBJECT_OPERATOR","->",176],["T_STRING","canEditQty",176],"(",")",")",["T_WHITESPACE","\n            ",176],["T_OBJECT_OPERATOR","->",177],["T_STRING","toHtml",177],"(",")",";",["T_WHITESPACE","\n    ",177],"}",["T_WHITESPACE","\n\n    ",178],["T_DOC_COMMENT","\/**\n     * Retrieve rendered item extra info html content\n     *\n     * @param Varien_Object $item\n     * @return string\n     *\/",180],["T_WHITESPACE","\n    ",185],["T_PUBLIC","public",186],["T_WHITESPACE"," ",186],["T_FUNCTION","function",186],["T_WHITESPACE"," ",186],["T_STRING","getItemExtraInfoHtml",186],"(",["T_STRING","Varien_Object",186],["T_WHITESPACE"," ",186],["T_VARIABLE","$item",186],")",["T_WHITESPACE","\n    ",186],"{",["T_WHITESPACE","\n        ",187],["T_VARIABLE","$extraInfoBlock",188],["T_WHITESPACE"," ",188],"=",["T_WHITESPACE"," ",188],["T_VARIABLE","$this",188],["T_OBJECT_OPERATOR","->",188],["T_STRING","getChild",188],"(",["T_CONSTANT_ENCAPSED_STRING","'order_item_extra_info'",188],")",";",["T_WHITESPACE","\n        ",188],["T_IF","if",189],["T_WHITESPACE"," ",189],"(",["T_VARIABLE","$extraInfoBlock",189],")",["T_WHITESPACE"," ",189],"{",["T_WHITESPACE","\n            ",189],["T_RETURN","return",190],["T_WHITESPACE"," ",190],["T_VARIABLE","$extraInfoBlock",190],["T_WHITESPACE","\n                ",190],["T_OBJECT_OPERATOR","->",191],["T_STRING","setItem",191],"(",["T_VARIABLE","$item",191],")",["T_WHITESPACE","\n                ",191],["T_OBJECT_OPERATOR","->",192],["T_STRING","toHtml",192],"(",")",";",["T_WHITESPACE","\n        ",192],"}",["T_WHITESPACE","\n        ",193],["T_RETURN","return",194],["T_WHITESPACE"," ",194],["T_CONSTANT_ENCAPSED_STRING","''",194],";",["T_WHITESPACE","\n    ",194],"}",["T_WHITESPACE","\n\n    ",195],["T_DOC_COMMENT","\/**\n     * Retrieve rendered column html content\n     *\n     * @param Varien_Object $item\n     * @param string $column the column key\n     * @param string $field the custom item field\n     * @return string\n     *\/",197],["T_WHITESPACE","\n    ",204],["T_PUBLIC","public",205],["T_WHITESPACE"," ",205],["T_FUNCTION","function",205],["T_WHITESPACE"," ",205],["T_STRING","getColumnHtml",205],"(",["T_STRING","Varien_Object",205],["T_WHITESPACE"," ",205],["T_VARIABLE","$item",205],",",["T_WHITESPACE"," ",205],["T_VARIABLE","$column",205],",",["T_WHITESPACE"," ",205],["T_VARIABLE","$field",205],["T_WHITESPACE"," ",205],"=",["T_WHITESPACE"," ",205],["T_STRING","null",205],")",["T_WHITESPACE","\n    ",205],"{",["T_WHITESPACE","\n        ",206],["T_IF","if",207],["T_WHITESPACE"," ",207],"(",["T_VARIABLE","$item",207],["T_OBJECT_OPERATOR","->",207],["T_STRING","getOrderItem",207],"(",")",")",["T_WHITESPACE"," ",207],"{",["T_WHITESPACE","\n            ",207],["T_VARIABLE","$block",208],["T_WHITESPACE"," ",208],"=",["T_WHITESPACE"," ",208],["T_VARIABLE","$this",208],["T_OBJECT_OPERATOR","->",208],["T_STRING","getColumnRenderer",208],"(",["T_VARIABLE","$column",208],",",["T_WHITESPACE"," ",208],["T_VARIABLE","$item",208],["T_OBJECT_OPERATOR","->",208],["T_STRING","getOrderItem",208],"(",")",["T_OBJECT_OPERATOR","->",208],["T_STRING","getProductType",208],"(",")",")",";",["T_WHITESPACE","\n        ",208],"}",["T_WHITESPACE"," ",209],["T_ELSE","else",209],["T_WHITESPACE"," ",209],"{",["T_WHITESPACE","\n            ",209],["T_VARIABLE","$block",210],["T_WHITESPACE"," ",210],"=",["T_WHITESPACE"," ",210],["T_VARIABLE","$this",210],["T_OBJECT_OPERATOR","->",210],["T_STRING","getColumnRenderer",210],"(",["T_VARIABLE","$column",210],",",["T_WHITESPACE"," ",210],["T_VARIABLE","$item",210],["T_OBJECT_OPERATOR","->",210],["T_STRING","getProductType",210],"(",")",")",";",["T_WHITESPACE","\n        ",210],"}",["T_WHITESPACE","\n\n        ",211],["T_IF","if",213],["T_WHITESPACE"," ",213],"(",["T_VARIABLE","$block",213],")",["T_WHITESPACE"," ",213],"{",["T_WHITESPACE","\n            ",213],["T_VARIABLE","$block",214],["T_OBJECT_OPERATOR","->",214],["T_STRING","setItem",214],"(",["T_VARIABLE","$item",214],")",";",["T_WHITESPACE","\n            ",214],["T_IF","if",215],["T_WHITESPACE"," ",215],"(","!",["T_STRING","is_null",215],"(",["T_VARIABLE","$field",215],")",")",["T_WHITESPACE"," ",215],"{",["T_WHITESPACE","\n                ",215],["T_VARIABLE","$block",216],["T_OBJECT_OPERATOR","->",216],["T_STRING","setField",216],"(",["T_VARIABLE","$field",216],")",";",["T_WHITESPACE","\n            ",216],"}",["T_WHITESPACE","\n            ",217],["T_RETURN","return",218],["T_WHITESPACE"," ",218],["T_VARIABLE","$block",218],["T_OBJECT_OPERATOR","->",218],["T_STRING","toHtml",218],"(",")",";",["T_WHITESPACE","\n        ",218],"}",["T_WHITESPACE","\n        ",219],["T_RETURN","return",220],["T_WHITESPACE"," ",220],["T_CONSTANT_ENCAPSED_STRING","'&nbsp;'",220],";",["T_WHITESPACE","\n    ",220],"}",["T_WHITESPACE","\n\n    ",221],["T_PUBLIC","public",223],["T_WHITESPACE"," ",223],["T_FUNCTION","function",223],["T_WHITESPACE"," ",223],["T_STRING","getCreditmemo",223],"(",")",["T_WHITESPACE","\n    ",223],"{",["T_WHITESPACE","\n        ",224],["T_RETURN","return",225],["T_WHITESPACE"," ",225],["T_STRING","Mage",225],["T_DOUBLE_COLON","::",225],["T_STRING","registry",225],"(",["T_CONSTANT_ENCAPSED_STRING","'current_creditmemo'",225],")",";",["T_WHITESPACE","\n    ",225],"}",["T_WHITESPACE","\n\n    ",226],["T_DOC_COMMENT","\/**\n     * ######################### SALES ##################################\n     *\/",228],["T_WHITESPACE","\n\n    ",230],["T_DOC_COMMENT","\/**\n     * Retrieve available order\n     *\n     * @return Mage_Sales_Model_Order\n     *\/",232],["T_WHITESPACE","\n    ",236],["T_PUBLIC","public",237],["T_WHITESPACE"," ",237],["T_FUNCTION","function",237],["T_WHITESPACE"," ",237],["T_STRING","getOrder",237],"(",")",["T_WHITESPACE","\n    ",237],"{",["T_WHITESPACE","\n        ",238],["T_IF","if",239],["T_WHITESPACE"," ",239],"(",["T_VARIABLE","$this",239],["T_OBJECT_OPERATOR","->",239],["T_STRING","hasOrder",239],"(",")",")",["T_WHITESPACE"," ",239],"{",["T_WHITESPACE","\n            ",239],["T_RETURN","return",240],["T_WHITESPACE"," ",240],["T_VARIABLE","$this",240],["T_OBJECT_OPERATOR","->",240],["T_STRING","getData",240],"(",["T_CONSTANT_ENCAPSED_STRING","'order'",240],")",";",["T_WHITESPACE","\n        ",240],"}",["T_WHITESPACE","\n        ",241],["T_IF","if",242],["T_WHITESPACE"," ",242],"(",["T_STRING","Mage",242],["T_DOUBLE_COLON","::",242],["T_STRING","registry",242],"(",["T_CONSTANT_ENCAPSED_STRING","'current_order'",242],")",")",["T_WHITESPACE"," ",242],"{",["T_WHITESPACE","\n            ",242],["T_RETURN","return",243],["T_WHITESPACE"," ",243],["T_STRING","Mage",243],["T_DOUBLE_COLON","::",243],["T_STRING","registry",243],"(",["T_CONSTANT_ENCAPSED_STRING","'current_order'",243],")",";",["T_WHITESPACE","\n        ",243],"}",["T_WHITESPACE","\n        ",244],["T_IF","if",245],["T_WHITESPACE"," ",245],"(",["T_STRING","Mage",245],["T_DOUBLE_COLON","::",245],["T_STRING","registry",245],"(",["T_CONSTANT_ENCAPSED_STRING","'order'",245],")",")",["T_WHITESPACE"," ",245],"{",["T_WHITESPACE","\n            ",245],["T_RETURN","return",246],["T_WHITESPACE"," ",246],["T_STRING","Mage",246],["T_DOUBLE_COLON","::",246],["T_STRING","registry",246],"(",["T_CONSTANT_ENCAPSED_STRING","'order'",246],")",";",["T_WHITESPACE","\n        ",246],"}",["T_WHITESPACE","\n        ",247],["T_IF","if",248],["T_WHITESPACE"," ",248],"(",["T_VARIABLE","$this",248],["T_OBJECT_OPERATOR","->",248],["T_STRING","getInvoice",248],"(",")",")",["T_WHITESPACE","\n        ",248],"{",["T_WHITESPACE","\n            ",249],["T_RETURN","return",250],["T_WHITESPACE"," ",250],["T_VARIABLE","$this",250],["T_OBJECT_OPERATOR","->",250],["T_STRING","getInvoice",250],"(",")",["T_OBJECT_OPERATOR","->",250],["T_STRING","getOrder",250],"(",")",";",["T_WHITESPACE","\n        ",250],"}",["T_WHITESPACE","\n        ",251],["T_IF","if",252],["T_WHITESPACE"," ",252],"(",["T_VARIABLE","$this",252],["T_OBJECT_OPERATOR","->",252],["T_STRING","getCreditmemo",252],"(",")",")",["T_WHITESPACE","\n        ",252],"{",["T_WHITESPACE","\n            ",253],["T_RETURN","return",254],["T_WHITESPACE"," ",254],["T_VARIABLE","$this",254],["T_OBJECT_OPERATOR","->",254],["T_STRING","getCreditmemo",254],"(",")",["T_OBJECT_OPERATOR","->",254],["T_STRING","getOrder",254],"(",")",";",["T_WHITESPACE","\n        ",254],"}",["T_WHITESPACE","\n        ",255],["T_IF","if",256],["T_WHITESPACE"," ",256],"(",["T_VARIABLE","$this",256],["T_OBJECT_OPERATOR","->",256],["T_STRING","getItem",256],"(",")",["T_OBJECT_OPERATOR","->",256],["T_STRING","getOrder",256],"(",")",")",["T_WHITESPACE","\n        ",256],"{",["T_WHITESPACE","\n            ",257],["T_RETURN","return",258],["T_WHITESPACE"," ",258],["T_VARIABLE","$this",258],["T_OBJECT_OPERATOR","->",258],["T_STRING","getItem",258],"(",")",["T_OBJECT_OPERATOR","->",258],["T_STRING","getOrder",258],"(",")",";",["T_WHITESPACE","\n        ",258],"}",["T_WHITESPACE","\n\n        ",259],["T_STRING","Mage",261],["T_DOUBLE_COLON","::",261],["T_STRING","throwException",261],"(",["T_STRING","Mage",261],["T_DOUBLE_COLON","::",261],["T_STRING","helper",261],"(",["T_CONSTANT_ENCAPSED_STRING","'sales'",261],")",["T_OBJECT_OPERATOR","->",261],["T_STRING","__",261],"(",["T_CONSTANT_ENCAPSED_STRING","'Cannot get order instance'",261],")",")",";",["T_WHITESPACE","\n    ",261],"}",["T_WHITESPACE","\n\n    ",262],["T_DOC_COMMENT","\/**\n     * Retrieve price data object\n     *\n     * @return Mage_Sales_Model_Order\n     *\/",264],["T_WHITESPACE","\n    ",268],["T_PUBLIC","public",269],["T_WHITESPACE"," ",269],["T_FUNCTION","function",269],["T_WHITESPACE"," ",269],["T_STRING","getPriceDataObject",269],"(",")",["T_WHITESPACE","\n    ",269],"{",["T_WHITESPACE","\n        ",270],["T_VARIABLE","$obj",271],["T_WHITESPACE"," ",271],"=",["T_WHITESPACE"," ",271],["T_VARIABLE","$this",271],["T_OBJECT_OPERATOR","->",271],["T_STRING","getData",271],"(",["T_CONSTANT_ENCAPSED_STRING","'price_data_object'",271],")",";",["T_WHITESPACE","\n        ",271],["T_IF","if",272],["T_WHITESPACE"," ",272],"(",["T_STRING","is_null",272],"(",["T_VARIABLE","$obj",272],")",")",["T_WHITESPACE"," ",272],"{",["T_WHITESPACE","\n            ",272],["T_RETURN","return",273],["T_WHITESPACE"," ",273],["T_VARIABLE","$this",273],["T_OBJECT_OPERATOR","->",273],["T_STRING","getOrder",273],"(",")",";",["T_WHITESPACE","\n        ",273],"}",["T_WHITESPACE","\n        ",274],["T_RETURN","return",275],["T_WHITESPACE"," ",275],["T_VARIABLE","$obj",275],";",["T_WHITESPACE","\n    ",275],"}",["T_WHITESPACE","\n\n    ",276],["T_DOC_COMMENT","\/**\n     * Retrieve price attribute html content\n     *\n     * @param string $code\n     * @param bool $strong\n     * @param string $separator\n     * @return string\n     *\/",278],["T_WHITESPACE","\n    ",285],["T_PUBLIC","public",286],["T_WHITESPACE"," ",286],["T_FUNCTION","function",286],["T_WHITESPACE"," ",286],["T_STRING","displayPriceAttribute",286],"(",["T_VARIABLE","$code",286],",",["T_WHITESPACE"," ",286],["T_VARIABLE","$strong",286],["T_WHITESPACE"," ",286],"=",["T_WHITESPACE"," ",286],["T_STRING","false",286],",",["T_WHITESPACE"," ",286],["T_VARIABLE","$separator",286],["T_WHITESPACE"," ",286],"=",["T_WHITESPACE"," ",286],["T_CONSTANT_ENCAPSED_STRING","'<br \/>'",286],")",["T_WHITESPACE","\n    ",286],"{",["T_WHITESPACE","\n        ",287],["T_IF","if",288],["T_WHITESPACE"," ",288],"(",["T_VARIABLE","$code",288],["T_WHITESPACE"," ",288],["T_IS_EQUAL","==",288],["T_WHITESPACE"," ",288],["T_CONSTANT_ENCAPSED_STRING","'tax_amount'",288],["T_WHITESPACE"," ",288],["T_BOOLEAN_AND","&&",288],["T_WHITESPACE"," ",288],["T_VARIABLE","$this",288],["T_OBJECT_OPERATOR","->",288],["T_STRING","getOrder",288],"(",")",["T_OBJECT_OPERATOR","->",288],["T_STRING","getRowTaxDisplayPrecision",288],"(",")",")",["T_WHITESPACE"," ",288],"{",["T_WHITESPACE","\n            ",288],["T_RETURN","return",289],["T_WHITESPACE"," ",289],["T_VARIABLE","$this",289],["T_OBJECT_OPERATOR","->",289],["T_STRING","displayRoundedPrices",289],"(",["T_WHITESPACE","\n                ",289],["T_VARIABLE","$this",290],["T_OBJECT_OPERATOR","->",290],["T_STRING","getPriceDataObject",290],"(",")",["T_OBJECT_OPERATOR","->",290],["T_STRING","getData",290],"(",["T_CONSTANT_ENCAPSED_STRING","'base_'",290],".",["T_VARIABLE","$code",290],")",",",["T_WHITESPACE","\n                ",290],["T_VARIABLE","$this",291],["T_OBJECT_OPERATOR","->",291],["T_STRING","getPriceDataObject",291],"(",")",["T_OBJECT_OPERATOR","->",291],["T_STRING","getData",291],"(",["T_VARIABLE","$code",291],")",",",["T_WHITESPACE","\n                ",291],["T_VARIABLE","$this",292],["T_OBJECT_OPERATOR","->",292],["T_STRING","getOrder",292],"(",")",["T_OBJECT_OPERATOR","->",292],["T_STRING","getRowTaxDisplayPrecision",292],"(",")",",",["T_WHITESPACE","\n                ",292],["T_VARIABLE","$strong",293],",",["T_WHITESPACE","\n                ",293],["T_VARIABLE","$separator",294],["T_WHITESPACE","\n            ",294],")",";",["T_WHITESPACE","\n        ",295],"}",["T_WHITESPACE"," ",296],["T_ELSE","else",296],["T_WHITESPACE"," ",296],"{",["T_WHITESPACE","\n            ",296],["T_RETURN","return",297],["T_WHITESPACE"," ",297],["T_VARIABLE","$this",297],["T_OBJECT_OPERATOR","->",297],["T_STRING","displayPrices",297],"(",["T_WHITESPACE","\n                ",297],["T_VARIABLE","$this",298],["T_OBJECT_OPERATOR","->",298],["T_STRING","getPriceDataObject",298],"(",")",["T_OBJECT_OPERATOR","->",298],["T_STRING","getData",298],"(",["T_CONSTANT_ENCAPSED_STRING","'base_'",298],".",["T_VARIABLE","$code",298],")",",",["T_WHITESPACE","\n                ",298],["T_VARIABLE","$this",299],["T_OBJECT_OPERATOR","->",299],["T_STRING","getPriceDataObject",299],"(",")",["T_OBJECT_OPERATOR","->",299],["T_STRING","getData",299],"(",["T_VARIABLE","$code",299],")",",",["T_WHITESPACE","\n                ",299],["T_VARIABLE","$strong",300],",",["T_WHITESPACE","\n                ",300],["T_VARIABLE","$separator",301],["T_WHITESPACE","\n            ",301],")",";",["T_WHITESPACE","\n        ",302],"}",["T_WHITESPACE","\n    ",303],"}",["T_WHITESPACE","\n\n    ",304],["T_DOC_COMMENT","\/**\n     * Retrieve price formated html content\n     *\n     * @param float $basePrice\n     * @param float $price\n     * @param bool $strong\n     * @param string $separator\n     * @return string\n     *\/",306],["T_WHITESPACE","\n    ",314],["T_PUBLIC","public",315],["T_WHITESPACE"," ",315],["T_FUNCTION","function",315],["T_WHITESPACE"," ",315],["T_STRING","displayPrices",315],"(",["T_VARIABLE","$basePrice",315],",",["T_WHITESPACE"," ",315],["T_VARIABLE","$price",315],",",["T_WHITESPACE"," ",315],["T_VARIABLE","$strong",315],["T_WHITESPACE"," ",315],"=",["T_WHITESPACE"," ",315],["T_STRING","false",315],",",["T_WHITESPACE"," ",315],["T_VARIABLE","$separator",315],["T_WHITESPACE"," ",315],"=",["T_WHITESPACE"," ",315],["T_CONSTANT_ENCAPSED_STRING","'<br \/>'",315],")",["T_WHITESPACE","\n    ",315],"{",["T_WHITESPACE","\n        ",316],["T_RETURN","return",317],["T_WHITESPACE"," ",317],["T_VARIABLE","$this",317],["T_OBJECT_OPERATOR","->",317],["T_STRING","displayRoundedPrices",317],"(",["T_VARIABLE","$basePrice",317],",",["T_WHITESPACE"," ",317],["T_VARIABLE","$price",317],",",["T_WHITESPACE"," ",317],["T_LNUMBER","2",317],",",["T_WHITESPACE"," ",317],["T_VARIABLE","$strong",317],",",["T_WHITESPACE"," ",317],["T_VARIABLE","$separator",317],")",";",["T_WHITESPACE","\n    ",317],"}",["T_WHITESPACE","\n\n    ",318],["T_DOC_COMMENT","\/**\n     * Display base and regular prices with specified rounding precision\n     *\n     * @param   float $basePrice\n     * @param   float $price\n     * @param   int $precision\n     * @param   bool $strong\n     * @param   string $separator\n     * @return  string\n     *\/",320],["T_WHITESPACE","\n    ",329],["T_PUBLIC","public",330],["T_WHITESPACE"," ",330],["T_FUNCTION","function",330],["T_WHITESPACE"," ",330],["T_STRING","displayRoundedPrices",330],"(",["T_VARIABLE","$basePrice",330],",",["T_WHITESPACE"," ",330],["T_VARIABLE","$price",330],",",["T_WHITESPACE"," ",330],["T_VARIABLE","$precision",330],"=",["T_LNUMBER","2",330],",",["T_WHITESPACE"," ",330],["T_VARIABLE","$strong",330],["T_WHITESPACE"," ",330],"=",["T_WHITESPACE"," ",330],["T_STRING","false",330],",",["T_WHITESPACE"," ",330],["T_VARIABLE","$separator",330],["T_WHITESPACE"," ",330],"=",["T_WHITESPACE"," ",330],["T_CONSTANT_ENCAPSED_STRING","'<br \/>'",330],")",["T_WHITESPACE","\n    ",330],"{",["T_WHITESPACE","\n        ",331],["T_IF","if",332],["T_WHITESPACE"," ",332],"(",["T_VARIABLE","$this",332],["T_OBJECT_OPERATOR","->",332],["T_STRING","getOrder",332],"(",")",["T_OBJECT_OPERATOR","->",332],["T_STRING","isCurrencyDifferent",332],"(",")",")",["T_WHITESPACE"," ",332],"{",["T_WHITESPACE","\n            ",332],["T_VARIABLE","$res",333],["T_WHITESPACE"," ",333],"=",["T_WHITESPACE"," ",333],["T_CONSTANT_ENCAPSED_STRING","''",333],";",["T_WHITESPACE","\n            ",333],["T_VARIABLE","$res",334],["T_CONCAT_EQUAL",".=",334],["T_WHITESPACE"," ",334],["T_VARIABLE","$this",334],["T_OBJECT_OPERATOR","->",334],["T_STRING","getOrder",334],"(",")",["T_OBJECT_OPERATOR","->",334],["T_STRING","formatBasePricePrecision",334],"(",["T_VARIABLE","$basePrice",334],",",["T_WHITESPACE"," ",334],["T_VARIABLE","$precision",334],")",";",["T_WHITESPACE","\n            ",334],["T_VARIABLE","$res",335],["T_CONCAT_EQUAL",".=",335],["T_WHITESPACE"," ",335],["T_VARIABLE","$separator",335],";",["T_WHITESPACE","\n            ",335],["T_VARIABLE","$res",336],["T_CONCAT_EQUAL",".=",336],["T_WHITESPACE"," ",336],["T_VARIABLE","$this",336],["T_OBJECT_OPERATOR","->",336],["T_STRING","getOrder",336],"(",")",["T_OBJECT_OPERATOR","->",336],["T_STRING","formatPricePrecision",336],"(",["T_VARIABLE","$price",336],",",["T_WHITESPACE"," ",336],["T_VARIABLE","$precision",336],",",["T_WHITESPACE"," ",336],["T_STRING","true",336],")",";",["T_WHITESPACE","\n        ",336],"}",["T_WHITESPACE","\n        ",337],["T_ELSE","else",338],["T_WHITESPACE"," ",338],"{",["T_WHITESPACE","\n            ",338],["T_VARIABLE","$res",339],["T_WHITESPACE"," ",339],"=",["T_WHITESPACE"," ",339],["T_VARIABLE","$this",339],["T_OBJECT_OPERATOR","->",339],["T_STRING","getOrder",339],"(",")",["T_OBJECT_OPERATOR","->",339],["T_STRING","formatPricePrecision",339],"(",["T_VARIABLE","$price",339],",",["T_WHITESPACE"," ",339],["T_VARIABLE","$precision",339],")",";",["T_WHITESPACE","\n            ",339],["T_IF","if",340],["T_WHITESPACE"," ",340],"(",["T_VARIABLE","$strong",340],")",["T_WHITESPACE"," ",340],"{",["T_WHITESPACE","\n                ",340],["T_VARIABLE","$res",341],["T_WHITESPACE"," ",341],"=",["T_WHITESPACE"," ",341],["T_CONSTANT_ENCAPSED_STRING","'<strong>'",341],".",["T_VARIABLE","$res",341],".",["T_CONSTANT_ENCAPSED_STRING","'<\/strong>'",341],";",["T_WHITESPACE","\n            ",341],"}",["T_WHITESPACE","\n        ",342],"}",["T_WHITESPACE","\n        ",343],["T_RETURN","return",344],["T_WHITESPACE"," ",344],["T_VARIABLE","$res",344],";",["T_WHITESPACE","\n    ",344],"}",["T_WHITESPACE","\n\n    ",345],["T_DOC_COMMENT","\/**\n     * Retrieve include tax html formated content\n     *\n     * @param Varien_Object $item\n     * @return string\n     *\/",347],["T_WHITESPACE","\n    ",352],["T_PUBLIC","public",353],["T_WHITESPACE"," ",353],["T_FUNCTION","function",353],["T_WHITESPACE"," ",353],["T_STRING","displayPriceInclTax",353],"(",["T_STRING","Varien_Object",353],["T_WHITESPACE"," ",353],["T_VARIABLE","$item",353],")",["T_WHITESPACE","\n    ",353],"{",["T_WHITESPACE","\n        ",354],["T_VARIABLE","$qty",355],["T_WHITESPACE"," ",355],"=",["T_WHITESPACE"," ",355],"(",["T_VARIABLE","$item",355],["T_OBJECT_OPERATOR","->",355],["T_STRING","getQtyOrdered",355],"(",")",["T_WHITESPACE"," ",355],"?",["T_WHITESPACE"," ",355],["T_VARIABLE","$item",355],["T_OBJECT_OPERATOR","->",355],["T_STRING","getQtyOrdered",355],"(",")",["T_WHITESPACE"," ",355],":",["T_WHITESPACE"," ",355],"(",["T_VARIABLE","$item",355],["T_OBJECT_OPERATOR","->",355],["T_STRING","getQty",355],"(",")",["T_WHITESPACE"," ",355],"?",["T_WHITESPACE"," ",355],["T_VARIABLE","$item",355],["T_OBJECT_OPERATOR","->",355],["T_STRING","getQty",355],"(",")",["T_WHITESPACE"," ",355],":",["T_WHITESPACE"," ",355],["T_LNUMBER","1",355],")",")",";",["T_WHITESPACE","\n        ",355],["T_VARIABLE","$baseTax",356],["T_WHITESPACE"," ",356],"=",["T_WHITESPACE"," ",356],"(",["T_VARIABLE","$item",356],["T_OBJECT_OPERATOR","->",356],["T_STRING","getTaxBeforeDiscount",356],"(",")",["T_WHITESPACE"," ",356],"?",["T_WHITESPACE"," ",356],["T_VARIABLE","$item",356],["T_OBJECT_OPERATOR","->",356],["T_STRING","getTaxBeforeDiscount",356],"(",")",["T_WHITESPACE"," ",356],":",["T_WHITESPACE"," ",356],"(",["T_VARIABLE","$item",356],["T_OBJECT_OPERATOR","->",356],["T_STRING","getTaxAmount",356],"(",")",["T_WHITESPACE"," ",356],"?",["T_WHITESPACE"," ",356],["T_VARIABLE","$item",356],["T_OBJECT_OPERATOR","->",356],["T_STRING","getTaxAmount",356],"(",")",["T_WHITESPACE"," ",356],":",["T_WHITESPACE"," ",356],["T_LNUMBER","0",356],")",")",";",["T_WHITESPACE","\n        ",356],["T_VARIABLE","$tax",357],["T_WHITESPACE"," ",357],"=",["T_WHITESPACE"," ",357],"(",["T_VARIABLE","$item",357],["T_OBJECT_OPERATOR","->",357],["T_STRING","getBaseTaxBeforeDiscount",357],"(",")",["T_WHITESPACE"," ",357],"?",["T_WHITESPACE"," ",357],["T_VARIABLE","$item",357],["T_OBJECT_OPERATOR","->",357],["T_STRING","getBaseTaxBeforeDiscount",357],"(",")",["T_WHITESPACE"," ",357],":",["T_WHITESPACE"," ",357],"(",["T_VARIABLE","$item",357],["T_OBJECT_OPERATOR","->",357],["T_STRING","getBaseTaxAmount",357],"(",")",["T_WHITESPACE"," ",357],"?",["T_WHITESPACE"," ",357],["T_VARIABLE","$item",357],["T_OBJECT_OPERATOR","->",357],["T_STRING","getBaseTaxAmount",357],"(",")",["T_WHITESPACE"," ",357],":",["T_WHITESPACE"," ",357],["T_LNUMBER","0",357],")",")",";",["T_WHITESPACE","\n\n        ",357],["T_VARIABLE","$basePriceTax",359],["T_WHITESPACE"," ",359],"=",["T_WHITESPACE"," ",359],["T_LNUMBER","0",359],";",["T_WHITESPACE","\n        ",359],["T_VARIABLE","$priceTax",360],["T_WHITESPACE"," ",360],"=",["T_WHITESPACE"," ",360],["T_LNUMBER","0",360],";",["T_WHITESPACE","\n\n        ",360],["T_IF","if",362],["T_WHITESPACE"," ",362],"(",["T_STRING","floatval",362],"(",["T_VARIABLE","$qty",362],")",")",["T_WHITESPACE"," ",362],"{",["T_WHITESPACE","\n            ",362],["T_VARIABLE","$basePriceTax",363],["T_WHITESPACE"," ",363],"=",["T_WHITESPACE"," ",363],["T_VARIABLE","$item",363],["T_OBJECT_OPERATOR","->",363],["T_STRING","getBasePrice",363],"(",")","+",["T_VARIABLE","$baseTax",363],"\/",["T_VARIABLE","$qty",363],";",["T_WHITESPACE","\n            ",363],["T_VARIABLE","$priceTax",364],["T_WHITESPACE"," ",364],"=",["T_WHITESPACE"," ",364],["T_VARIABLE","$item",364],["T_OBJECT_OPERATOR","->",364],["T_STRING","getPrice",364],"(",")","+",["T_VARIABLE","$tax",364],"\/",["T_VARIABLE","$qty",364],";",["T_WHITESPACE","\n        ",364],"}",["T_WHITESPACE","\n\n        ",365],["T_RETURN","return",367],["T_WHITESPACE"," ",367],["T_VARIABLE","$this",367],["T_OBJECT_OPERATOR","->",367],["T_STRING","displayPrices",367],"(",["T_WHITESPACE","\n            ",367],["T_VARIABLE","$this",368],["T_OBJECT_OPERATOR","->",368],["T_STRING","getOrder",368],"(",")",["T_OBJECT_OPERATOR","->",368],["T_STRING","getStore",368],"(",")",["T_OBJECT_OPERATOR","->",368],["T_STRING","roundPrice",368],"(",["T_VARIABLE","$basePriceTax",368],")",",",["T_WHITESPACE","\n            ",368],["T_VARIABLE","$this",369],["T_OBJECT_OPERATOR","->",369],["T_STRING","getOrder",369],"(",")",["T_OBJECT_OPERATOR","->",369],["T_STRING","getStore",369],"(",")",["T_OBJECT_OPERATOR","->",369],["T_STRING","roundPrice",369],"(",["T_VARIABLE","$priceTax",369],")",["T_WHITESPACE","\n        ",369],")",";",["T_WHITESPACE","\n    ",370],"}",["T_WHITESPACE","\n\n    ",371],["T_DOC_COMMENT","\/**\n     * Retrieve subtotal price include tax html formated content\n     *\n     * @param Varien_Object $item\n     * @return string\n     *\/",373],["T_WHITESPACE","\n    ",378],["T_PUBLIC","public",379],["T_WHITESPACE"," ",379],["T_FUNCTION","function",379],["T_WHITESPACE"," ",379],["T_STRING","displaySubtotalInclTax",379],"(",["T_VARIABLE","$item",379],")",["T_WHITESPACE","\n    ",379],"{",["T_WHITESPACE","\n        ",380],["T_VARIABLE","$baseTax",381],["T_WHITESPACE"," ",381],"=",["T_WHITESPACE"," ",381],"(",["T_VARIABLE","$item",381],["T_OBJECT_OPERATOR","->",381],["T_STRING","getTaxBeforeDiscount",381],"(",")",["T_WHITESPACE"," ",381],"?",["T_WHITESPACE"," ",381],["T_VARIABLE","$item",381],["T_OBJECT_OPERATOR","->",381],["T_STRING","getTaxBeforeDiscount",381],"(",")",["T_WHITESPACE"," ",381],":",["T_WHITESPACE"," ",381],"(",["T_VARIABLE","$item",381],["T_OBJECT_OPERATOR","->",381],["T_STRING","getTaxAmount",381],"(",")",["T_WHITESPACE"," ",381],"?",["T_WHITESPACE"," ",381],["T_VARIABLE","$item",381],["T_OBJECT_OPERATOR","->",381],["T_STRING","getTaxAmount",381],"(",")",["T_WHITESPACE"," ",381],":",["T_WHITESPACE"," ",381],["T_LNUMBER","0",381],")",")",";",["T_WHITESPACE","\n        ",381],["T_VARIABLE","$tax",382],["T_WHITESPACE"," ",382],"=",["T_WHITESPACE"," ",382],"(",["T_VARIABLE","$item",382],["T_OBJECT_OPERATOR","->",382],["T_STRING","getBaseTaxBeforeDiscount",382],"(",")",["T_WHITESPACE"," ",382],"?",["T_WHITESPACE"," ",382],["T_VARIABLE","$item",382],["T_OBJECT_OPERATOR","->",382],["T_STRING","getBaseTaxBeforeDiscount",382],"(",")",["T_WHITESPACE"," ",382],":",["T_WHITESPACE"," ",382],"(",["T_VARIABLE","$item",382],["T_OBJECT_OPERATOR","->",382],["T_STRING","getBaseTaxAmount",382],"(",")",["T_WHITESPACE"," ",382],"?",["T_WHITESPACE"," ",382],["T_VARIABLE","$item",382],["T_OBJECT_OPERATOR","->",382],["T_STRING","getBaseTaxAmount",382],"(",")",["T_WHITESPACE"," ",382],":",["T_WHITESPACE"," ",382],["T_LNUMBER","0",382],")",")",";",["T_WHITESPACE","\n\n        ",382],["T_RETURN","return",384],["T_WHITESPACE"," ",384],["T_VARIABLE","$this",384],["T_OBJECT_OPERATOR","->",384],["T_STRING","displayPrices",384],"(",["T_WHITESPACE","\n            ",384],["T_VARIABLE","$item",385],["T_OBJECT_OPERATOR","->",385],["T_STRING","getBaseRowTotal",385],"(",")","+",["T_VARIABLE","$baseTax",385],",",["T_WHITESPACE","\n            ",385],["T_VARIABLE","$item",386],["T_OBJECT_OPERATOR","->",386],["T_STRING","getRowTotal",386],"(",")","+",["T_VARIABLE","$tax",386],["T_WHITESPACE","\n        ",386],")",";",["T_WHITESPACE","\n    ",387],"}",["T_WHITESPACE","\n\n    ",388],["T_DOC_COMMENT","\/**\n     * Retrieve tax calculation html content\n     *\n     * @param Varien_Object $item\n     * @return string\n     *\/",390],["T_WHITESPACE","\n    ",395],["T_PUBLIC","public",396],["T_WHITESPACE"," ",396],["T_FUNCTION","function",396],["T_WHITESPACE"," ",396],["T_STRING","displayTaxCalculation",396],"(",["T_STRING","Varien_Object",396],["T_WHITESPACE"," ",396],["T_VARIABLE","$item",396],")",["T_WHITESPACE","\n    ",396],"{",["T_WHITESPACE","\n        ",397],["T_IF","if",398],["T_WHITESPACE"," ",398],"(",["T_VARIABLE","$item",398],["T_OBJECT_OPERATOR","->",398],["T_STRING","getTaxPercent",398],"(",")",["T_WHITESPACE"," ",398],["T_BOOLEAN_AND","&&",398],["T_WHITESPACE"," ",398],["T_VARIABLE","$item",398],["T_OBJECT_OPERATOR","->",398],["T_STRING","getTaxString",398],"(",")",["T_WHITESPACE"," ",398],["T_IS_EQUAL","==",398],["T_WHITESPACE"," ",398],["T_CONSTANT_ENCAPSED_STRING","''",398],")",["T_WHITESPACE"," ",398],"{",["T_WHITESPACE","\n            ",398],["T_VARIABLE","$percents",399],["T_WHITESPACE"," ",399],"=",["T_WHITESPACE"," ",399],["T_ARRAY","array",399],"(",["T_VARIABLE","$item",399],["T_OBJECT_OPERATOR","->",399],["T_STRING","getTaxPercent",399],"(",")",")",";",["T_WHITESPACE","\n        ",399],"}",["T_WHITESPACE"," ",400],["T_ELSE","else",400],["T_WHITESPACE"," ",400],["T_IF","if",400],["T_WHITESPACE"," ",400],"(",["T_VARIABLE","$item",400],["T_OBJECT_OPERATOR","->",400],["T_STRING","getTaxString",400],"(",")",")",["T_WHITESPACE"," ",400],"{",["T_WHITESPACE","\n            ",400],["T_VARIABLE","$percents",401],["T_WHITESPACE"," ",401],"=",["T_WHITESPACE"," ",401],["T_STRING","explode",401],"(",["T_STRING","Mage_Tax_Model_Config",401],["T_DOUBLE_COLON","::",401],["T_STRING","CALCULATION_STRING_SEPARATOR",401],",",["T_WHITESPACE"," ",401],["T_VARIABLE","$item",401],["T_OBJECT_OPERATOR","->",401],["T_STRING","getTaxString",401],"(",")",")",";",["T_WHITESPACE","\n        ",401],"}",["T_WHITESPACE"," ",402],["T_ELSE","else",402],["T_WHITESPACE"," ",402],"{",["T_WHITESPACE","\n            ",402],["T_RETURN","return",403],["T_WHITESPACE"," ",403],["T_CONSTANT_ENCAPSED_STRING","'0%'",403],";",["T_WHITESPACE","\n        ",403],"}",["T_WHITESPACE","\n\n        ",404],["T_FOREACH","foreach",406],["T_WHITESPACE"," ",406],"(",["T_VARIABLE","$percents",406],["T_WHITESPACE"," ",406],["T_AS","as",406],["T_WHITESPACE"," ",406],"&",["T_VARIABLE","$percent",406],")",["T_WHITESPACE"," ",406],"{",["T_WHITESPACE","\n            ",406],["T_VARIABLE","$percent",407],["T_WHITESPACE"," ",407],"=",["T_WHITESPACE"," ",407],["T_STRING","sprintf",407],"(",["T_CONSTANT_ENCAPSED_STRING","'%.2f%%'",407],",",["T_WHITESPACE"," ",407],["T_VARIABLE","$percent",407],")",";",["T_WHITESPACE","\n        ",407],"}",["T_WHITESPACE","\n        ",408],["T_RETURN","return",409],["T_WHITESPACE"," ",409],["T_STRING","implode",409],"(",["T_CONSTANT_ENCAPSED_STRING","' + '",409],",",["T_WHITESPACE"," ",409],["T_VARIABLE","$percents",409],")",";",["T_WHITESPACE","\n    ",409],"}",["T_WHITESPACE","\n\n    ",410],["T_DOC_COMMENT","\/**\n     * Retrieve tax with persent html content\n     *\n     * @param Varien_Object $item\n     * @return string\n     *\/",412],["T_WHITESPACE","\n    ",417],["T_PUBLIC","public",418],["T_WHITESPACE"," ",418],["T_FUNCTION","function",418],["T_WHITESPACE"," ",418],["T_STRING","displayTaxPercent",418],"(",["T_STRING","Varien_Object",418],["T_WHITESPACE"," ",418],["T_VARIABLE","$item",418],")",["T_WHITESPACE","\n    ",418],"{",["T_WHITESPACE","\n        ",419],["T_IF","if",420],["T_WHITESPACE"," ",420],"(",["T_VARIABLE","$item",420],["T_OBJECT_OPERATOR","->",420],["T_STRING","getTaxPercent",420],"(",")",")",["T_WHITESPACE"," ",420],"{",["T_WHITESPACE","\n            ",420],["T_RETURN","return",421],["T_WHITESPACE"," ",421],["T_STRING","sprintf",421],"(",["T_CONSTANT_ENCAPSED_STRING","'%s%%'",421],",",["T_WHITESPACE"," ",421],["T_VARIABLE","$item",421],["T_OBJECT_OPERATOR","->",421],["T_STRING","getTaxPercent",421],"(",")",["T_WHITESPACE"," ",421],"+",["T_WHITESPACE"," ",421],["T_LNUMBER","0",421],")",";",["T_WHITESPACE","\n        ",421],"}",["T_WHITESPACE"," ",422],["T_ELSE","else",422],["T_WHITESPACE"," ",422],"{",["T_WHITESPACE","\n            ",422],["T_RETURN","return",423],["T_WHITESPACE"," ",423],["T_CONSTANT_ENCAPSED_STRING","'0%'",423],";",["T_WHITESPACE","\n        ",423],"}",["T_WHITESPACE","\n    ",424],"}",["T_WHITESPACE","\n\n    ",425],["T_DOC_COMMENT","\/**\n     *  INVOICES\n     *\/",427],["T_WHITESPACE","\n\n    ",429],["T_DOC_COMMENT","\/**\n     * Check shipment availability for current invoice\n     *\n     * @return bool\n     *\/",431],["T_WHITESPACE","\n    ",435],["T_PUBLIC","public",436],["T_WHITESPACE"," ",436],["T_FUNCTION","function",436],["T_WHITESPACE"," ",436],["T_STRING","canCreateShipment",436],"(",")",["T_WHITESPACE","\n    ",436],"{",["T_WHITESPACE","\n        ",437],["T_FOREACH","foreach",438],["T_WHITESPACE"," ",438],"(",["T_VARIABLE","$this",438],["T_OBJECT_OPERATOR","->",438],["T_STRING","getInvoice",438],"(",")",["T_OBJECT_OPERATOR","->",438],["T_STRING","getAllItems",438],"(",")",["T_WHITESPACE"," ",438],["T_AS","as",438],["T_WHITESPACE"," ",438],["T_VARIABLE","$item",438],")",["T_WHITESPACE"," ",438],"{",["T_WHITESPACE","\n            ",438],["T_IF","if",439],["T_WHITESPACE"," ",439],"(",["T_VARIABLE","$item",439],["T_OBJECT_OPERATOR","->",439],["T_STRING","getOrderItem",439],"(",")",["T_OBJECT_OPERATOR","->",439],["T_STRING","getQtyToShip",439],"(",")",")",["T_WHITESPACE"," ",439],"{",["T_WHITESPACE","\n                ",439],["T_RETURN","return",440],["T_WHITESPACE"," ",440],["T_STRING","true",440],";",["T_WHITESPACE","\n            ",440],"}",["T_WHITESPACE","\n        ",441],"}",["T_WHITESPACE","\n        ",442],["T_RETURN","return",443],["T_WHITESPACE"," ",443],["T_STRING","false",443],";",["T_WHITESPACE","\n    ",443],"}",["T_WHITESPACE","\n\n    ",444],["T_DOC_COMMENT","\/**\n     * Setter for flag _canEditQty\n     *\n     * @return Mage_Adminhtml_Block_Sales_Items_Abstract\n     * @see self::_canEditQty\n     * @see self::canEditQty\n     *\/",446],["T_WHITESPACE","\n    ",452],["T_PUBLIC","public",453],["T_WHITESPACE"," ",453],["T_FUNCTION","function",453],["T_WHITESPACE"," ",453],["T_STRING","setCanEditQty",453],"(",["T_VARIABLE","$value",453],")",["T_WHITESPACE"," ",453],"{",["T_WHITESPACE","\n        ",453],["T_VARIABLE","$this",454],["T_OBJECT_OPERATOR","->",454],["T_STRING","_canEditQty",454],["T_WHITESPACE"," ",454],"=",["T_WHITESPACE"," ",454],["T_VARIABLE","$value",454],";",["T_WHITESPACE","\n        ",454],["T_RETURN","return",455],["T_WHITESPACE"," ",455],["T_VARIABLE","$this",455],";",["T_WHITESPACE","\n    ",455],"}",["T_WHITESPACE","\n\n    ",456],["T_DOC_COMMENT","\/**\n     * Check availability to edit quantity of item\n     *\n     * @return boolean\n     *\/",458],["T_WHITESPACE","\n    ",462],["T_PUBLIC","public",463],["T_WHITESPACE"," ",463],["T_FUNCTION","function",463],["T_WHITESPACE"," ",463],["T_STRING","canEditQty",463],"(",")",["T_WHITESPACE","\n    ",463],"{",["T_WHITESPACE","\n        ",464],["T_DOC_COMMENT","\/**\n         * If parent block has set\n         *\/",465],["T_WHITESPACE","\n        ",467],["T_IF","if",468],["T_WHITESPACE"," ",468],"(","!",["T_STRING","is_null",468],"(",["T_VARIABLE","$this",468],["T_OBJECT_OPERATOR","->",468],["T_STRING","_canEditQty",468],")",")",["T_WHITESPACE"," ",468],"{",["T_WHITESPACE","\n            ",468],["T_RETURN","return",469],["T_WHITESPACE"," ",469],["T_VARIABLE","$this",469],["T_OBJECT_OPERATOR","->",469],["T_STRING","_canEditQty",469],";",["T_WHITESPACE","\n        ",469],"}",["T_WHITESPACE","\n\n        ",470],["T_DOC_COMMENT","\/**\n         * Disable editing of quantity of item if creating of shipment forced\n         * and ship partially disabled for order\n         *\/",472],["T_WHITESPACE","\n        ",475],["T_IF","if",476],["T_WHITESPACE"," ",476],"(",["T_VARIABLE","$this",476],["T_OBJECT_OPERATOR","->",476],["T_STRING","getOrder",476],"(",")",["T_OBJECT_OPERATOR","->",476],["T_STRING","getForcedDoShipmentWithInvoice",476],"(",")",["T_WHITESPACE","\n            ",476],["T_BOOLEAN_AND","&&",477],["T_WHITESPACE"," ",477],"(",["T_VARIABLE","$this",477],["T_OBJECT_OPERATOR","->",477],["T_STRING","canShipPartially",477],"(",["T_VARIABLE","$this",477],["T_OBJECT_OPERATOR","->",477],["T_STRING","getOrder",477],"(",")",")",["T_WHITESPACE"," ",477],["T_BOOLEAN_OR","||",477],["T_WHITESPACE"," ",477],["T_VARIABLE","$this",477],["T_OBJECT_OPERATOR","->",477],["T_STRING","canShipPartiallyItem",477],"(",["T_VARIABLE","$this",477],["T_OBJECT_OPERATOR","->",477],["T_STRING","getOrder",477],"(",")",")",")",["T_WHITESPACE","\n        ",477],")",["T_WHITESPACE"," ",478],"{",["T_WHITESPACE","\n            ",478],["T_RETURN","return",479],["T_WHITESPACE"," ",479],["T_STRING","false",479],";",["T_WHITESPACE","\n        ",479],"}",["T_WHITESPACE","\n        ",480],["T_IF","if",481],["T_WHITESPACE"," ",481],"(",["T_VARIABLE","$this",481],["T_OBJECT_OPERATOR","->",481],["T_STRING","getOrder",481],"(",")",["T_OBJECT_OPERATOR","->",481],["T_STRING","getPayment",481],"(",")",["T_OBJECT_OPERATOR","->",481],["T_STRING","canCapture",481],"(",")",")",["T_WHITESPACE"," ",481],"{",["T_WHITESPACE","\n            ",481],["T_RETURN","return",482],["T_WHITESPACE"," ",482],["T_VARIABLE","$this",482],["T_OBJECT_OPERATOR","->",482],["T_STRING","getOrder",482],"(",")",["T_OBJECT_OPERATOR","->",482],["T_STRING","getPayment",482],"(",")",["T_OBJECT_OPERATOR","->",482],["T_STRING","canCapturePartial",482],"(",")",";",["T_WHITESPACE","\n        ",482],"}",["T_WHITESPACE","\n        ",483],["T_RETURN","return",484],["T_WHITESPACE"," ",484],["T_STRING","true",484],";",["T_WHITESPACE","\n    ",484],"}",["T_WHITESPACE","\n\n    ",485],["T_PUBLIC","public",487],["T_WHITESPACE"," ",487],["T_FUNCTION","function",487],["T_WHITESPACE"," ",487],["T_STRING","canCapture",487],"(",")",["T_WHITESPACE","\n    ",487],"{",["T_WHITESPACE","\n        ",488],["T_IF","if",489],["T_WHITESPACE"," ",489],"(",["T_STRING","Mage",489],["T_DOUBLE_COLON","::",489],["T_STRING","getSingleton",489],"(",["T_CONSTANT_ENCAPSED_STRING","'admin\/session'",489],")",["T_OBJECT_OPERATOR","->",489],["T_STRING","isAllowed",489],"(",["T_CONSTANT_ENCAPSED_STRING","'sales\/order\/actions\/capture'",489],")",")",["T_WHITESPACE"," ",489],"{",["T_WHITESPACE","\n            ",489],["T_RETURN","return",490],["T_WHITESPACE"," ",490],["T_VARIABLE","$this",490],["T_OBJECT_OPERATOR","->",490],["T_STRING","getInvoice",490],"(",")",["T_OBJECT_OPERATOR","->",490],["T_STRING","canCapture",490],"(",")",";",["T_WHITESPACE","\n        ",490],"}",["T_WHITESPACE","\n        ",491],["T_RETURN","return",492],["T_WHITESPACE"," ",492],["T_STRING","false",492],";",["T_WHITESPACE","\n    ",492],"}",["T_WHITESPACE","\n\n    ",493],["T_PUBLIC","public",495],["T_WHITESPACE"," ",495],["T_FUNCTION","function",495],["T_WHITESPACE"," ",495],["T_STRING","formatPrice",495],"(",["T_VARIABLE","$price",495],")",["T_WHITESPACE","\n    ",495],"{",["T_WHITESPACE","\n        ",496],["T_RETURN","return",497],["T_WHITESPACE"," ",497],["T_VARIABLE","$this",497],["T_OBJECT_OPERATOR","->",497],["T_STRING","getOrder",497],"(",")",["T_OBJECT_OPERATOR","->",497],["T_STRING","formatPrice",497],"(",["T_VARIABLE","$price",497],")",";",["T_WHITESPACE","\n    ",497],"}",["T_WHITESPACE","\n\n    ",498],["T_DOC_COMMENT","\/**\n     * Retrieve source\n     *\n     * @return Mage_Sales_Model_Order_Invoice\n     *\/",500],["T_WHITESPACE","\n    ",504],["T_PUBLIC","public",505],["T_WHITESPACE"," ",505],["T_FUNCTION","function",505],["T_WHITESPACE"," ",505],["T_STRING","getSource",505],"(",")",["T_WHITESPACE","\n    ",505],"{",["T_WHITESPACE","\n        ",506],["T_RETURN","return",507],["T_WHITESPACE"," ",507],["T_VARIABLE","$this",507],["T_OBJECT_OPERATOR","->",507],["T_STRING","getInvoice",507],"(",")",";",["T_WHITESPACE","\n    ",507],"}",["T_WHITESPACE","\n\n    ",508],["T_DOC_COMMENT","\/**\n     * Retrieve invoice model instance\n     *\n     * @return Mage_Sales_Model_Invoice\n     *\/",510],["T_WHITESPACE","\n    ",514],["T_PUBLIC","public",515],["T_WHITESPACE"," ",515],["T_FUNCTION","function",515],["T_WHITESPACE"," ",515],["T_STRING","getInvoice",515],"(",")",["T_WHITESPACE","\n    ",515],"{",["T_WHITESPACE","\n        ",516],["T_RETURN","return",517],["T_WHITESPACE"," ",517],["T_STRING","Mage",517],["T_DOUBLE_COLON","::",517],["T_STRING","registry",517],"(",["T_CONSTANT_ENCAPSED_STRING","'current_invoice'",517],")",";",["T_WHITESPACE","\n    ",517],"}",["T_WHITESPACE","\n\n    ",518],["T_DOC_COMMENT","\/**\n     * CREDITMEMO\n     *\/",520],["T_WHITESPACE","\n\n    ",522],["T_PUBLIC","public",524],["T_WHITESPACE"," ",524],["T_FUNCTION","function",524],["T_WHITESPACE"," ",524],["T_STRING","canReturnToStock",524],"(",")",["T_WHITESPACE"," ",524],"{",["T_WHITESPACE","\n        ",524],["T_VARIABLE","$canReturnToStock",525],["T_WHITESPACE"," ",525],"=",["T_WHITESPACE"," ",525],["T_STRING","Mage",525],["T_DOUBLE_COLON","::",525],["T_STRING","getStoreConfig",525],"(",["T_STRING","Mage_CatalogInventory_Model_Stock_Item",525],["T_DOUBLE_COLON","::",525],["T_STRING","XML_PATH_CAN_SUBTRACT",525],")",";",["T_WHITESPACE","\n        ",525],["T_IF","if",526],["T_WHITESPACE"," ",526],"(",["T_STRING","Mage",526],["T_DOUBLE_COLON","::",526],["T_STRING","getStoreConfig",526],"(",["T_STRING","Mage_CatalogInventory_Model_Stock_Item",526],["T_DOUBLE_COLON","::",526],["T_STRING","XML_PATH_CAN_SUBTRACT",526],")",")",["T_WHITESPACE"," ",526],"{",["T_WHITESPACE","\n            ",526],["T_RETURN","return",527],["T_WHITESPACE"," ",527],["T_STRING","true",527],";",["T_WHITESPACE","\n        ",527],"}",["T_WHITESPACE"," ",528],["T_ELSE","else",528],["T_WHITESPACE"," ",528],"{",["T_WHITESPACE","\n            ",528],["T_RETURN","return",529],["T_WHITESPACE"," ",529],["T_STRING","false",529],";",["T_WHITESPACE","\n        ",529],"}",["T_WHITESPACE","\n    ",530],"}",["T_WHITESPACE","\n\n    ",531],["T_DOC_COMMENT","\/**\n     * Whether to show 'Return to stock' checkbox for item\n     * @param Mage_Sales_Model_Order_Creditmemo_Item $item\n     * @return bool\n     *\/",533],["T_WHITESPACE","\n    ",537],["T_PUBLIC","public",538],["T_WHITESPACE"," ",538],["T_FUNCTION","function",538],["T_WHITESPACE"," ",538],["T_STRING","canReturnItemToStock",538],"(",["T_VARIABLE","$item",538],"=",["T_STRING","null",538],")",["T_WHITESPACE"," ",538],"{",["T_WHITESPACE","\n        ",538],["T_VARIABLE","$canReturnToStock",539],["T_WHITESPACE"," ",539],"=",["T_WHITESPACE"," ",539],["T_STRING","Mage",539],["T_DOUBLE_COLON","::",539],["T_STRING","getStoreConfig",539],"(",["T_STRING","Mage_CatalogInventory_Model_Stock_Item",539],["T_DOUBLE_COLON","::",539],["T_STRING","XML_PATH_CAN_SUBTRACT",539],")",";",["T_WHITESPACE","\n        ",539],["T_IF","if",540],["T_WHITESPACE"," ",540],"(","!",["T_STRING","is_null",540],"(",["T_VARIABLE","$item",540],")",")",["T_WHITESPACE"," ",540],"{",["T_WHITESPACE","\n            ",540],["T_IF","if",541],["T_WHITESPACE"," ",541],"(","!",["T_VARIABLE","$item",541],["T_OBJECT_OPERATOR","->",541],["T_STRING","hasCanReturnToStock",541],"(",")",")",["T_WHITESPACE"," ",541],"{",["T_WHITESPACE","\n                ",541],["T_VARIABLE","$product",542],["T_WHITESPACE"," ",542],"=",["T_WHITESPACE"," ",542],["T_STRING","Mage",542],["T_DOUBLE_COLON","::",542],["T_STRING","getModel",542],"(",["T_CONSTANT_ENCAPSED_STRING","'catalog\/product'",542],")",["T_OBJECT_OPERATOR","->",542],["T_STRING","load",542],"(",["T_VARIABLE","$item",542],["T_OBJECT_OPERATOR","->",542],["T_STRING","getOrderItem",542],"(",")",["T_OBJECT_OPERATOR","->",542],["T_STRING","getProductId",542],"(",")",")",";",["T_WHITESPACE","\n                ",542],["T_IF","if",543],["T_WHITESPACE"," ",543],"(",["T_WHITESPACE"," ",543],["T_VARIABLE","$product",543],["T_OBJECT_OPERATOR","->",543],["T_STRING","getId",543],"(",")",["T_WHITESPACE"," ",543],["T_BOOLEAN_AND","&&",543],["T_WHITESPACE"," ",543],["T_VARIABLE","$product",543],["T_OBJECT_OPERATOR","->",543],["T_STRING","getStockItem",543],"(",")",["T_OBJECT_OPERATOR","->",543],["T_STRING","getManageStock",543],"(",")",["T_WHITESPACE"," ",543],")",["T_WHITESPACE"," ",543],"{",["T_WHITESPACE","\n                    ",543],["T_VARIABLE","$item",544],["T_OBJECT_OPERATOR","->",544],["T_STRING","setCanReturnToStock",544],"(",["T_STRING","true",544],")",";",["T_WHITESPACE","\n                ",544],"}",["T_WHITESPACE","\n                ",545],["T_ELSE","else",546],["T_WHITESPACE"," ",546],"{",["T_WHITESPACE","\n                    ",546],["T_VARIABLE","$item",547],["T_OBJECT_OPERATOR","->",547],["T_STRING","setCanReturnToStock",547],"(",["T_STRING","false",547],")",";",["T_WHITESPACE","\n                ",547],"}",["T_WHITESPACE","\n            ",548],"}",["T_WHITESPACE","\n            ",549],["T_VARIABLE","$canReturnToStock",550],["T_WHITESPACE"," ",550],"=",["T_WHITESPACE"," ",550],["T_VARIABLE","$item",550],["T_OBJECT_OPERATOR","->",550],["T_STRING","getCanReturnToStock",550],"(",")",";",["T_WHITESPACE","\n        ",550],"}",["T_WHITESPACE","\n        ",551],["T_RETURN","return",552],["T_WHITESPACE"," ",552],["T_VARIABLE","$canReturnToStock",552],";",["T_WHITESPACE","\n    ",552],"}",["T_WHITESPACE","\n    ",553],["T_DOC_COMMENT","\/**\n     * Whether to show 'Return to stock' column for item parent\n     * @param Mage_Sales_Model_Order_Creditmemo_Item $item\n     * @return bool\n     *\/",554],["T_WHITESPACE","\n    ",558],["T_PUBLIC","public",559],["T_WHITESPACE"," ",559],["T_FUNCTION","function",559],["T_WHITESPACE"," ",559],["T_STRING","canParentReturnToStock",559],"(",["T_VARIABLE","$item",559],["T_WHITESPACE"," ",559],"=",["T_WHITESPACE"," ",559],["T_STRING","null",559],")",["T_WHITESPACE","\n    ",559],"{",["T_WHITESPACE","\n        ",560],["T_VARIABLE","$canReturnToStock",561],["T_WHITESPACE"," ",561],"=",["T_WHITESPACE"," ",561],["T_STRING","Mage",561],["T_DOUBLE_COLON","::",561],["T_STRING","getStoreConfig",561],"(",["T_STRING","Mage_CatalogInventory_Model_Stock_Item",561],["T_DOUBLE_COLON","::",561],["T_STRING","XML_PATH_CAN_SUBTRACT",561],")",";",["T_WHITESPACE","\n        ",561],["T_IF","if",562],["T_WHITESPACE"," ",562],"(","!",["T_STRING","is_null",562],"(",["T_VARIABLE","$item",562],")",")",["T_WHITESPACE"," ",562],"{",["T_WHITESPACE","\n            ",562],["T_IF","if",563],["T_WHITESPACE"," ",563],"(",["T_WHITESPACE"," ",563],["T_VARIABLE","$item",563],["T_OBJECT_OPERATOR","->",563],["T_STRING","getCreditmemo",563],"(",")",["T_OBJECT_OPERATOR","->",563],["T_STRING","getOrder",563],"(",")",["T_OBJECT_OPERATOR","->",563],["T_STRING","hasCanReturnToStock",563],"(",")",["T_WHITESPACE"," ",563],")",["T_WHITESPACE"," ",563],"{",["T_WHITESPACE","\n                ",563],["T_VARIABLE","$canReturnToStock",564],["T_WHITESPACE"," ",564],"=",["T_WHITESPACE"," ",564],["T_VARIABLE","$item",564],["T_OBJECT_OPERATOR","->",564],["T_STRING","getCreditmemo",564],"(",")",["T_OBJECT_OPERATOR","->",564],["T_STRING","getOrder",564],"(",")",["T_OBJECT_OPERATOR","->",564],["T_STRING","getCanReturnToStock",564],"(",")",";",["T_WHITESPACE","\n            ",564],"}",["T_WHITESPACE","\n        ",565],"}",["T_WHITESPACE"," ",566],["T_ELSEIF","elseif",566],["T_WHITESPACE"," ",566],"(",["T_WHITESPACE"," ",566],["T_VARIABLE","$this",566],["T_OBJECT_OPERATOR","->",566],["T_STRING","getOrder",566],"(",")",["T_OBJECT_OPERATOR","->",566],["T_STRING","hasCanReturnToStock",566],"(",")",["T_WHITESPACE"," ",566],")",["T_WHITESPACE"," ",566],"{",["T_WHITESPACE","\n            ",566],["T_VARIABLE","$canReturnToStock",567],["T_WHITESPACE"," ",567],"=",["T_WHITESPACE"," ",567],["T_VARIABLE","$this",567],["T_OBJECT_OPERATOR","->",567],["T_STRING","getOrder",567],"(",")",["T_OBJECT_OPERATOR","->",567],["T_STRING","getCanReturnToStock",567],"(",")",";",["T_WHITESPACE","\n        ",567],"}",["T_WHITESPACE","\n        ",568],["T_RETURN","return",569],["T_WHITESPACE"," ",569],["T_VARIABLE","$canReturnToStock",569],";",["T_WHITESPACE","\n    ",569],"}",["T_WHITESPACE","\n\n    ",570],["T_DOC_COMMENT","\/**\n     * Return true if can ship partially\n     *\n     * @param Mage_Sales_Model_Order|null $order\n     * @return boolean\n     *\/",572],["T_WHITESPACE","\n    ",577],["T_PUBLIC","public",578],["T_WHITESPACE"," ",578],["T_FUNCTION","function",578],["T_WHITESPACE"," ",578],["T_STRING","canShipPartially",578],"(",["T_VARIABLE","$order",578],["T_WHITESPACE"," ",578],"=",["T_WHITESPACE"," ",578],["T_STRING","null",578],")",["T_WHITESPACE","\n    ",578],"{",["T_WHITESPACE","\n        ",579],["T_IF","if",580],["T_WHITESPACE"," ",580],"(",["T_STRING","is_null",580],"(",["T_VARIABLE","$order",580],")",["T_WHITESPACE"," ",580],["T_BOOLEAN_OR","||",580],["T_WHITESPACE"," ",580],"!",["T_VARIABLE","$order",580],["T_WHITESPACE"," ",580],["T_INSTANCEOF","instanceof",580],["T_WHITESPACE"," ",580],["T_STRING","Mage_Sales_Model_Order",580],")",["T_WHITESPACE"," ",580],"{",["T_WHITESPACE","\n            ",580],["T_VARIABLE","$order",581],["T_WHITESPACE"," ",581],"=",["T_WHITESPACE"," ",581],["T_STRING","Mage",581],["T_DOUBLE_COLON","::",581],["T_STRING","registry",581],"(",["T_CONSTANT_ENCAPSED_STRING","'current_shipment'",581],")",["T_OBJECT_OPERATOR","->",581],["T_STRING","getOrder",581],"(",")",";",["T_WHITESPACE","\n        ",581],"}",["T_WHITESPACE","\n        ",582],["T_VARIABLE","$value",583],["T_WHITESPACE"," ",583],"=",["T_WHITESPACE"," ",583],["T_VARIABLE","$order",583],["T_OBJECT_OPERATOR","->",583],["T_STRING","getCanShipPartially",583],"(",")",";",["T_WHITESPACE","\n        ",583],["T_IF","if",584],["T_WHITESPACE"," ",584],"(","!",["T_STRING","is_null",584],"(",["T_VARIABLE","$value",584],")",["T_WHITESPACE"," ",584],["T_BOOLEAN_AND","&&",584],["T_WHITESPACE"," ",584],"!",["T_VARIABLE","$value",584],")",["T_WHITESPACE"," ",584],"{",["T_WHITESPACE","\n            ",584],["T_RETURN","return",585],["T_WHITESPACE"," ",585],["T_STRING","false",585],";",["T_WHITESPACE","\n        ",585],"}",["T_WHITESPACE","\n        ",586],["T_RETURN","return",587],["T_WHITESPACE"," ",587],["T_STRING","true",587],";",["T_WHITESPACE","\n    ",587],"}",["T_WHITESPACE","\n\n    ",588],["T_DOC_COMMENT","\/**\n     * Return true if can ship items partially\n     *\n     * @param Mage_Sales_Model_Order|null $order\n     * @return boolean\n     *\/",590],["T_WHITESPACE","\n    ",595],["T_PUBLIC","public",596],["T_WHITESPACE"," ",596],["T_FUNCTION","function",596],["T_WHITESPACE"," ",596],["T_STRING","canShipPartiallyItem",596],"(",["T_VARIABLE","$order",596],["T_WHITESPACE"," ",596],"=",["T_WHITESPACE"," ",596],["T_STRING","null",596],")",["T_WHITESPACE","\n    ",596],"{",["T_WHITESPACE","\n        ",597],["T_IF","if",598],["T_WHITESPACE"," ",598],"(",["T_STRING","is_null",598],"(",["T_VARIABLE","$order",598],")",["T_WHITESPACE"," ",598],["T_BOOLEAN_OR","||",598],["T_WHITESPACE"," ",598],"!",["T_VARIABLE","$order",598],["T_WHITESPACE"," ",598],["T_INSTANCEOF","instanceof",598],["T_WHITESPACE"," ",598],["T_STRING","Mage_Sales_Model_Order",598],")",["T_WHITESPACE"," ",598],"{",["T_WHITESPACE","\n            ",598],["T_VARIABLE","$order",599],["T_WHITESPACE"," ",599],"=",["T_WHITESPACE"," ",599],["T_STRING","Mage",599],["T_DOUBLE_COLON","::",599],["T_STRING","registry",599],"(",["T_CONSTANT_ENCAPSED_STRING","'current_shipment'",599],")",["T_OBJECT_OPERATOR","->",599],["T_STRING","getOrder",599],"(",")",";",["T_WHITESPACE","\n        ",599],"}",["T_WHITESPACE","\n        ",600],["T_VARIABLE","$value",601],["T_WHITESPACE"," ",601],"=",["T_WHITESPACE"," ",601],["T_VARIABLE","$order",601],["T_OBJECT_OPERATOR","->",601],["T_STRING","getCanShipPartiallyItem",601],"(",")",";",["T_WHITESPACE","\n        ",601],["T_IF","if",602],["T_WHITESPACE"," ",602],"(","!",["T_STRING","is_null",602],"(",["T_VARIABLE","$value",602],")",["T_WHITESPACE"," ",602],["T_BOOLEAN_AND","&&",602],["T_WHITESPACE"," ",602],"!",["T_VARIABLE","$value",602],")",["T_WHITESPACE"," ",602],"{",["T_WHITESPACE","\n            ",602],["T_RETURN","return",603],["T_WHITESPACE"," ",603],["T_STRING","false",603],";",["T_WHITESPACE","\n        ",603],"}",["T_WHITESPACE","\n        ",604],["T_RETURN","return",605],["T_WHITESPACE"," ",605],["T_STRING","true",605],";",["T_WHITESPACE","\n    ",605],"}",["T_WHITESPACE","\n\n    ",606],["T_PUBLIC","public",608],["T_WHITESPACE"," ",608],["T_FUNCTION","function",608],["T_WHITESPACE"," ",608],["T_STRING","isShipmentRegular",608],"(",")",["T_WHITESPACE","\n    ",608],"{",["T_WHITESPACE","\n        ",609],["T_IF","if",610],["T_WHITESPACE"," ",610],"(","!",["T_VARIABLE","$this",610],["T_OBJECT_OPERATOR","->",610],["T_STRING","canShipPartiallyItem",610],"(",")",["T_WHITESPACE"," ",610],["T_BOOLEAN_OR","||",610],["T_WHITESPACE"," ",610],"!",["T_VARIABLE","$this",610],["T_OBJECT_OPERATOR","->",610],["T_STRING","canShipPartially",610],"(",")",")",["T_WHITESPACE"," ",610],"{",["T_WHITESPACE","\n            ",610],["T_RETURN","return",611],["T_WHITESPACE"," ",611],["T_STRING","false",611],";",["T_WHITESPACE","\n        ",611],"}",["T_WHITESPACE","\n        ",612],["T_RETURN","return",613],["T_WHITESPACE"," ",613],["T_STRING","true",613],";",["T_WHITESPACE","\n    ",613],"}",["T_WHITESPACE","\n\n",614],"}",["T_WHITESPACE","\n",616]]
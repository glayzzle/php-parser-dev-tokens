[["T_OPEN_TAG","<?php\n",1],["T_DOC_COMMENT","\/**\n * Magento\n *\n * NOTICE OF LICENSE\n *\n * This source file is subject to the Open Software License (OSL 3.0)\n * that is bundled with this package in the file LICENSE.txt.\n * It is also available through the world-wide-web at this URL:\n * http:\/\/opensource.org\/licenses\/osl-3.0.php\n * If you did not receive a copy of the license and are unable to\n * obtain it through the world-wide-web, please send an email\n * to license@magento.com so we can send you a copy immediately.\n *\n * DISCLAIMER\n *\n * Do not edit or add to this file if you wish to upgrade Magento to newer\n * versions in the future. If you wish to customize Magento for your\n * needs please refer to http:\/\/www.magento.com for more information.\n *\n * @category    Mage\n * @package     Mage_Adminhtml\n * @copyright  Copyright (c) 2006-2016 X.commerce, Inc. and affiliates (http:\/\/www.magento.com)\n * @license    http:\/\/opensource.org\/licenses\/osl-3.0.php  Open Software License (OSL 3.0)\n *\/",2],["T_WHITESPACE","\n\n\n",25],["T_DOC_COMMENT","\/**\n * Categories tree block\n *\n * @category   Mage\n * @package    Mage_Adminhtml\n * @author      Magento Core Team <core@magentocommerce.com>\n *\/",28],["T_WHITESPACE","\n",34],["T_CLASS","class",35],["T_WHITESPACE"," ",35],["T_STRING","Mage_Adminhtml_Block_Catalog_Category_Tree",35],["T_WHITESPACE"," ",35],["T_EXTENDS","extends",35],["T_WHITESPACE"," ",35],["T_STRING","Mage_Adminhtml_Block_Catalog_Category_Abstract",35],["T_WHITESPACE","\n",35],"{",["T_WHITESPACE","\n\n    ",36],["T_PROTECTED","protected",38],["T_WHITESPACE"," ",38],["T_VARIABLE","$_withProductCount",38],";",["T_WHITESPACE","\n\n    ",38],["T_PUBLIC","public",40],["T_WHITESPACE"," ",40],["T_FUNCTION","function",40],["T_WHITESPACE"," ",40],["T_STRING","__construct",40],"(",")",["T_WHITESPACE","\n    ",40],"{",["T_WHITESPACE","\n        ",41],["T_STRING","parent",42],["T_DOUBLE_COLON","::",42],["T_STRING","__construct",42],"(",")",";",["T_WHITESPACE","\n        ",42],["T_VARIABLE","$this",43],["T_OBJECT_OPERATOR","->",43],["T_STRING","setTemplate",43],"(",["T_CONSTANT_ENCAPSED_STRING","'catalog\/category\/tree.phtml'",43],")",";",["T_WHITESPACE","\n        ",43],["T_VARIABLE","$this",44],["T_OBJECT_OPERATOR","->",44],["T_STRING","setUseAjax",44],"(",["T_STRING","true",44],")",";",["T_WHITESPACE","\n        ",44],["T_VARIABLE","$this",45],["T_OBJECT_OPERATOR","->",45],["T_STRING","_withProductCount",45],["T_WHITESPACE"," ",45],"=",["T_WHITESPACE"," ",45],["T_STRING","true",45],";",["T_WHITESPACE","\n    ",45],"}",["T_WHITESPACE","\n\n    ",46],["T_PROTECTED","protected",48],["T_WHITESPACE"," ",48],["T_FUNCTION","function",48],["T_WHITESPACE"," ",48],["T_STRING","_prepareLayout",48],"(",")",["T_WHITESPACE","\n    ",48],"{",["T_WHITESPACE","\n        ",49],["T_VARIABLE","$addUrl",50],["T_WHITESPACE"," ",50],"=",["T_WHITESPACE"," ",50],["T_VARIABLE","$this",50],["T_OBJECT_OPERATOR","->",50],["T_STRING","getUrl",50],"(",["T_CONSTANT_ENCAPSED_STRING","\"*\/*\/add\"",50],",",["T_WHITESPACE"," ",50],["T_ARRAY","array",50],"(",["T_WHITESPACE","\n            ",50],["T_CONSTANT_ENCAPSED_STRING","'_current'",51],["T_DOUBLE_ARROW","=>",51],["T_STRING","true",51],",",["T_WHITESPACE","\n            ",51],["T_CONSTANT_ENCAPSED_STRING","'id'",52],["T_DOUBLE_ARROW","=>",52],["T_STRING","null",52],",",["T_WHITESPACE","\n            ",52],["T_CONSTANT_ENCAPSED_STRING","'_query'",53],["T_WHITESPACE"," ",53],["T_DOUBLE_ARROW","=>",53],["T_WHITESPACE"," ",53],["T_STRING","false",53],["T_WHITESPACE","\n        ",53],")",")",";",["T_WHITESPACE","\n\n        ",54],["T_VARIABLE","$this",56],["T_OBJECT_OPERATOR","->",56],["T_STRING","setChild",56],"(",["T_CONSTANT_ENCAPSED_STRING","'add_sub_button'",56],",",["T_WHITESPACE","\n            ",56],["T_VARIABLE","$this",57],["T_OBJECT_OPERATOR","->",57],["T_STRING","getLayout",57],"(",")",["T_OBJECT_OPERATOR","->",57],["T_STRING","createBlock",57],"(",["T_CONSTANT_ENCAPSED_STRING","'adminhtml\/widget_button'",57],")",["T_WHITESPACE","\n                ",57],["T_OBJECT_OPERATOR","->",58],["T_STRING","setData",58],"(",["T_ARRAY","array",58],"(",["T_WHITESPACE","\n                    ",58],["T_CONSTANT_ENCAPSED_STRING","'label'",59],["T_WHITESPACE","     ",59],["T_DOUBLE_ARROW","=>",59],["T_WHITESPACE"," ",59],["T_STRING","Mage",59],["T_DOUBLE_COLON","::",59],["T_STRING","helper",59],"(",["T_CONSTANT_ENCAPSED_STRING","'catalog'",59],")",["T_OBJECT_OPERATOR","->",59],["T_STRING","__",59],"(",["T_CONSTANT_ENCAPSED_STRING","'Add Subcategory'",59],")",",",["T_WHITESPACE","\n                    ",59],["T_CONSTANT_ENCAPSED_STRING","'onclick'",60],["T_WHITESPACE","   ",60],["T_DOUBLE_ARROW","=>",60],["T_WHITESPACE"," ",60],["T_CONSTANT_ENCAPSED_STRING","\"addNew('\"",60],".",["T_VARIABLE","$addUrl",60],".",["T_CONSTANT_ENCAPSED_STRING","\"', false)\"",60],",",["T_WHITESPACE","\n                    ",60],["T_CONSTANT_ENCAPSED_STRING","'class'",61],["T_WHITESPACE","     ",61],["T_DOUBLE_ARROW","=>",61],["T_WHITESPACE"," ",61],["T_CONSTANT_ENCAPSED_STRING","'add'",61],",",["T_WHITESPACE","\n                    ",61],["T_CONSTANT_ENCAPSED_STRING","'id'",62],["T_WHITESPACE","        ",62],["T_DOUBLE_ARROW","=>",62],["T_WHITESPACE"," ",62],["T_CONSTANT_ENCAPSED_STRING","'add_subcategory_button'",62],",",["T_WHITESPACE","\n                    ",62],["T_CONSTANT_ENCAPSED_STRING","'style'",63],["T_WHITESPACE","     ",63],["T_DOUBLE_ARROW","=>",63],["T_WHITESPACE"," ",63],["T_VARIABLE","$this",63],["T_OBJECT_OPERATOR","->",63],["T_STRING","canAddSubCategory",63],"(",")",["T_WHITESPACE"," ",63],"?",["T_WHITESPACE"," ",63],["T_CONSTANT_ENCAPSED_STRING","''",63],["T_WHITESPACE"," ",63],":",["T_WHITESPACE"," ",63],["T_CONSTANT_ENCAPSED_STRING","'display: none;'",63],["T_WHITESPACE","\n                ",63],")",")",["T_WHITESPACE","\n        ",64],")",";",["T_WHITESPACE","\n\n        ",65],["T_IF","if",67],["T_WHITESPACE"," ",67],"(",["T_VARIABLE","$this",67],["T_OBJECT_OPERATOR","->",67],["T_STRING","canAddRootCategory",67],"(",")",")",["T_WHITESPACE"," ",67],"{",["T_WHITESPACE","\n            ",67],["T_VARIABLE","$this",68],["T_OBJECT_OPERATOR","->",68],["T_STRING","setChild",68],"(",["T_CONSTANT_ENCAPSED_STRING","'add_root_button'",68],",",["T_WHITESPACE","\n                ",68],["T_VARIABLE","$this",69],["T_OBJECT_OPERATOR","->",69],["T_STRING","getLayout",69],"(",")",["T_OBJECT_OPERATOR","->",69],["T_STRING","createBlock",69],"(",["T_CONSTANT_ENCAPSED_STRING","'adminhtml\/widget_button'",69],")",["T_WHITESPACE","\n                    ",69],["T_OBJECT_OPERATOR","->",70],["T_STRING","setData",70],"(",["T_ARRAY","array",70],"(",["T_WHITESPACE","\n                        ",70],["T_CONSTANT_ENCAPSED_STRING","'label'",71],["T_WHITESPACE","     ",71],["T_DOUBLE_ARROW","=>",71],["T_WHITESPACE"," ",71],["T_STRING","Mage",71],["T_DOUBLE_COLON","::",71],["T_STRING","helper",71],"(",["T_CONSTANT_ENCAPSED_STRING","'catalog'",71],")",["T_OBJECT_OPERATOR","->",71],["T_STRING","__",71],"(",["T_CONSTANT_ENCAPSED_STRING","'Add Root Category'",71],")",",",["T_WHITESPACE","\n                        ",71],["T_CONSTANT_ENCAPSED_STRING","'onclick'",72],["T_WHITESPACE","   ",72],["T_DOUBLE_ARROW","=>",72],["T_WHITESPACE"," ",72],["T_CONSTANT_ENCAPSED_STRING","\"addNew('\"",72],".",["T_VARIABLE","$addUrl",72],".",["T_CONSTANT_ENCAPSED_STRING","\"', true)\"",72],",",["T_WHITESPACE","\n                        ",72],["T_CONSTANT_ENCAPSED_STRING","'class'",73],["T_WHITESPACE","     ",73],["T_DOUBLE_ARROW","=>",73],["T_WHITESPACE"," ",73],["T_CONSTANT_ENCAPSED_STRING","'add'",73],",",["T_WHITESPACE","\n                        ",73],["T_CONSTANT_ENCAPSED_STRING","'id'",74],["T_WHITESPACE","        ",74],["T_DOUBLE_ARROW","=>",74],["T_WHITESPACE"," ",74],["T_CONSTANT_ENCAPSED_STRING","'add_root_category_button'",74],["T_WHITESPACE","\n                    ",74],")",")",["T_WHITESPACE","\n            ",75],")",";",["T_WHITESPACE","\n        ",76],"}",["T_WHITESPACE","\n\n        ",77],["T_VARIABLE","$this",79],["T_OBJECT_OPERATOR","->",79],["T_STRING","setChild",79],"(",["T_CONSTANT_ENCAPSED_STRING","'store_switcher'",79],",",["T_WHITESPACE","\n            ",79],["T_VARIABLE","$this",80],["T_OBJECT_OPERATOR","->",80],["T_STRING","getLayout",80],"(",")",["T_OBJECT_OPERATOR","->",80],["T_STRING","createBlock",80],"(",["T_CONSTANT_ENCAPSED_STRING","'adminhtml\/store_switcher'",80],")",["T_WHITESPACE","\n                ",80],["T_OBJECT_OPERATOR","->",81],["T_STRING","setSwitchUrl",81],"(",["T_VARIABLE","$this",81],["T_OBJECT_OPERATOR","->",81],["T_STRING","getUrl",81],"(",["T_CONSTANT_ENCAPSED_STRING","'*\/*\/*'",81],",",["T_WHITESPACE"," ",81],["T_ARRAY","array",81],"(",["T_CONSTANT_ENCAPSED_STRING","'_current'",81],["T_DOUBLE_ARROW","=>",81],["T_STRING","true",81],",",["T_WHITESPACE"," ",81],["T_CONSTANT_ENCAPSED_STRING","'_query'",81],["T_DOUBLE_ARROW","=>",81],["T_STRING","false",81],",",["T_WHITESPACE"," ",81],["T_CONSTANT_ENCAPSED_STRING","'store'",81],["T_DOUBLE_ARROW","=>",81],["T_STRING","null",81],")",")",")",["T_WHITESPACE","\n                ",81],["T_OBJECT_OPERATOR","->",82],["T_STRING","setTemplate",82],"(",["T_CONSTANT_ENCAPSED_STRING","'store\/switcher\/enhanced.phtml'",82],")",["T_WHITESPACE","\n        ",82],")",";",["T_WHITESPACE","\n        ",83],["T_RETURN","return",84],["T_WHITESPACE"," ",84],["T_STRING","parent",84],["T_DOUBLE_COLON","::",84],["T_STRING","_prepareLayout",84],"(",")",";",["T_WHITESPACE","\n    ",84],"}",["T_WHITESPACE","\n\n    ",85],["T_PROTECTED","protected",87],["T_WHITESPACE"," ",87],["T_FUNCTION","function",87],["T_WHITESPACE"," ",87],["T_STRING","_getDefaultStoreId",87],"(",")",["T_WHITESPACE","\n    ",87],"{",["T_WHITESPACE","\n        ",88],["T_RETURN","return",89],["T_WHITESPACE"," ",89],["T_STRING","Mage_Catalog_Model_Abstract",89],["T_DOUBLE_COLON","::",89],["T_STRING","DEFAULT_STORE_ID",89],";",["T_WHITESPACE","\n    ",89],"}",["T_WHITESPACE","\n\n    ",90],["T_PUBLIC","public",92],["T_WHITESPACE"," ",92],["T_FUNCTION","function",92],["T_WHITESPACE"," ",92],["T_STRING","getCategoryCollection",92],"(",")",["T_WHITESPACE","\n    ",92],"{",["T_WHITESPACE","\n        ",93],["T_VARIABLE","$storeId",94],["T_WHITESPACE"," ",94],"=",["T_WHITESPACE"," ",94],["T_VARIABLE","$this",94],["T_OBJECT_OPERATOR","->",94],["T_STRING","getRequest",94],"(",")",["T_OBJECT_OPERATOR","->",94],["T_STRING","getParam",94],"(",["T_CONSTANT_ENCAPSED_STRING","'store'",94],",",["T_WHITESPACE"," ",94],["T_VARIABLE","$this",94],["T_OBJECT_OPERATOR","->",94],["T_STRING","_getDefaultStoreId",94],"(",")",")",";",["T_WHITESPACE","\n        ",94],["T_VARIABLE","$collection",95],["T_WHITESPACE"," ",95],"=",["T_WHITESPACE"," ",95],["T_VARIABLE","$this",95],["T_OBJECT_OPERATOR","->",95],["T_STRING","getData",95],"(",["T_CONSTANT_ENCAPSED_STRING","'category_collection'",95],")",";",["T_WHITESPACE","\n        ",95],["T_IF","if",96],["T_WHITESPACE"," ",96],"(",["T_STRING","is_null",96],"(",["T_VARIABLE","$collection",96],")",")",["T_WHITESPACE"," ",96],"{",["T_WHITESPACE","\n            ",96],["T_VARIABLE","$collection",97],["T_WHITESPACE"," ",97],"=",["T_WHITESPACE"," ",97],["T_STRING","Mage",97],["T_DOUBLE_COLON","::",97],["T_STRING","getModel",97],"(",["T_CONSTANT_ENCAPSED_STRING","'catalog\/category'",97],")",["T_OBJECT_OPERATOR","->",97],["T_STRING","getCollection",97],"(",")",";",["T_WHITESPACE","\n\n            ",97],["T_COMMENT","\/* @var $collection Mage_Catalog_Model_Resource_Eav_Mysql4_Category_Collection *\/",99],["T_WHITESPACE","\n            ",99],["T_VARIABLE","$collection",100],["T_OBJECT_OPERATOR","->",100],["T_STRING","addAttributeToSelect",100],"(",["T_CONSTANT_ENCAPSED_STRING","'name'",100],")",["T_WHITESPACE","\n                ",100],["T_OBJECT_OPERATOR","->",101],["T_STRING","addAttributeToSelect",101],"(",["T_CONSTANT_ENCAPSED_STRING","'is_active'",101],")",["T_WHITESPACE","\n                ",101],["T_OBJECT_OPERATOR","->",102],["T_STRING","setProductStoreId",102],"(",["T_VARIABLE","$storeId",102],")",["T_WHITESPACE","\n                ",102],["T_OBJECT_OPERATOR","->",103],["T_STRING","setLoadProductCount",103],"(",["T_VARIABLE","$this",103],["T_OBJECT_OPERATOR","->",103],["T_STRING","_withProductCount",103],")",["T_WHITESPACE","\n                ",103],["T_OBJECT_OPERATOR","->",104],["T_STRING","setStoreId",104],"(",["T_VARIABLE","$storeId",104],")",";",["T_WHITESPACE","\n\n            ",104],["T_VARIABLE","$this",106],["T_OBJECT_OPERATOR","->",106],["T_STRING","setData",106],"(",["T_CONSTANT_ENCAPSED_STRING","'category_collection'",106],",",["T_WHITESPACE"," ",106],["T_VARIABLE","$collection",106],")",";",["T_WHITESPACE","\n        ",106],"}",["T_WHITESPACE","\n        ",107],["T_RETURN","return",108],["T_WHITESPACE"," ",108],["T_VARIABLE","$collection",108],";",["T_WHITESPACE","\n    ",108],"}",["T_WHITESPACE","\n\n    ",109],["T_PUBLIC","public",111],["T_WHITESPACE"," ",111],["T_FUNCTION","function",111],["T_WHITESPACE"," ",111],["T_STRING","getAddRootButtonHtml",111],"(",")",["T_WHITESPACE","\n    ",111],"{",["T_WHITESPACE","\n        ",112],["T_RETURN","return",113],["T_WHITESPACE"," ",113],["T_VARIABLE","$this",113],["T_OBJECT_OPERATOR","->",113],["T_STRING","getChildHtml",113],"(",["T_CONSTANT_ENCAPSED_STRING","'add_root_button'",113],")",";",["T_WHITESPACE","\n    ",113],"}",["T_WHITESPACE","\n\n    ",114],["T_PUBLIC","public",116],["T_WHITESPACE"," ",116],["T_FUNCTION","function",116],["T_WHITESPACE"," ",116],["T_STRING","getAddSubButtonHtml",116],"(",")",["T_WHITESPACE","\n    ",116],"{",["T_WHITESPACE","\n        ",117],["T_RETURN","return",118],["T_WHITESPACE"," ",118],["T_VARIABLE","$this",118],["T_OBJECT_OPERATOR","->",118],["T_STRING","getChildHtml",118],"(",["T_CONSTANT_ENCAPSED_STRING","'add_sub_button'",118],")",";",["T_WHITESPACE","\n    ",118],"}",["T_WHITESPACE","\n\n    ",119],["T_PUBLIC","public",121],["T_WHITESPACE"," ",121],["T_FUNCTION","function",121],["T_WHITESPACE"," ",121],["T_STRING","getExpandButtonHtml",121],"(",")",["T_WHITESPACE","\n    ",121],"{",["T_WHITESPACE","\n        ",122],["T_RETURN","return",123],["T_WHITESPACE"," ",123],["T_VARIABLE","$this",123],["T_OBJECT_OPERATOR","->",123],["T_STRING","getChildHtml",123],"(",["T_CONSTANT_ENCAPSED_STRING","'expand_button'",123],")",";",["T_WHITESPACE","\n    ",123],"}",["T_WHITESPACE","\n\n    ",124],["T_PUBLIC","public",126],["T_WHITESPACE"," ",126],["T_FUNCTION","function",126],["T_WHITESPACE"," ",126],["T_STRING","getCollapseButtonHtml",126],"(",")",["T_WHITESPACE","\n    ",126],"{",["T_WHITESPACE","\n        ",127],["T_RETURN","return",128],["T_WHITESPACE"," ",128],["T_VARIABLE","$this",128],["T_OBJECT_OPERATOR","->",128],["T_STRING","getChildHtml",128],"(",["T_CONSTANT_ENCAPSED_STRING","'collapse_button'",128],")",";",["T_WHITESPACE","\n    ",128],"}",["T_WHITESPACE","\n\n    ",129],["T_PUBLIC","public",131],["T_WHITESPACE"," ",131],["T_FUNCTION","function",131],["T_WHITESPACE"," ",131],["T_STRING","getStoreSwitcherHtml",131],"(",")",["T_WHITESPACE","\n    ",131],"{",["T_WHITESPACE","\n        ",132],["T_RETURN","return",133],["T_WHITESPACE"," ",133],["T_VARIABLE","$this",133],["T_OBJECT_OPERATOR","->",133],["T_STRING","getChildHtml",133],"(",["T_CONSTANT_ENCAPSED_STRING","'store_switcher'",133],")",";",["T_WHITESPACE","\n    ",133],"}",["T_WHITESPACE","\n\n    ",134],["T_PUBLIC","public",136],["T_WHITESPACE"," ",136],["T_FUNCTION","function",136],["T_WHITESPACE"," ",136],["T_STRING","getLoadTreeUrl",136],"(",["T_VARIABLE","$expanded",136],"=",["T_STRING","null",136],")",["T_WHITESPACE","\n    ",136],"{",["T_WHITESPACE","\n        ",137],["T_VARIABLE","$params",138],["T_WHITESPACE"," ",138],"=",["T_WHITESPACE"," ",138],["T_ARRAY","array",138],"(",["T_CONSTANT_ENCAPSED_STRING","'_current'",138],["T_DOUBLE_ARROW","=>",138],["T_STRING","true",138],",",["T_WHITESPACE"," ",138],["T_CONSTANT_ENCAPSED_STRING","'id'",138],["T_DOUBLE_ARROW","=>",138],["T_STRING","null",138],",",["T_CONSTANT_ENCAPSED_STRING","'store'",138],["T_DOUBLE_ARROW","=>",138],["T_STRING","null",138],")",";",["T_WHITESPACE","\n        ",138],["T_IF","if",139],["T_WHITESPACE"," ",139],"(",["T_WHITESPACE","\n            ",139],"(",["T_STRING","is_null",140],"(",["T_VARIABLE","$expanded",140],")",["T_WHITESPACE"," ",140],["T_BOOLEAN_AND","&&",140],["T_WHITESPACE"," ",140],["T_STRING","Mage",140],["T_DOUBLE_COLON","::",140],["T_STRING","getSingleton",140],"(",["T_CONSTANT_ENCAPSED_STRING","'admin\/session'",140],")",["T_OBJECT_OPERATOR","->",140],["T_STRING","getIsTreeWasExpanded",140],"(",")",")",["T_WHITESPACE","\n            ",140],["T_BOOLEAN_OR","||",141],["T_WHITESPACE"," ",141],["T_VARIABLE","$expanded",141],["T_WHITESPACE"," ",141],["T_IS_EQUAL","==",141],["T_WHITESPACE"," ",141],["T_STRING","true",141],")",["T_WHITESPACE"," ",141],"{",["T_WHITESPACE","\n            ",141],["T_VARIABLE","$params",142],"[",["T_CONSTANT_ENCAPSED_STRING","'expand_all'",142],"]",["T_WHITESPACE"," ",142],"=",["T_WHITESPACE"," ",142],["T_STRING","true",142],";",["T_WHITESPACE","\n        ",142],"}",["T_WHITESPACE","\n        ",143],["T_RETURN","return",144],["T_WHITESPACE"," ",144],["T_VARIABLE","$this",144],["T_OBJECT_OPERATOR","->",144],["T_STRING","getUrl",144],"(",["T_CONSTANT_ENCAPSED_STRING","'*\/*\/categoriesJson'",144],",",["T_WHITESPACE"," ",144],["T_VARIABLE","$params",144],")",";",["T_WHITESPACE","\n    ",144],"}",["T_WHITESPACE","\n\n    ",145],["T_PUBLIC","public",147],["T_WHITESPACE"," ",147],["T_FUNCTION","function",147],["T_WHITESPACE"," ",147],["T_STRING","getNodesUrl",147],"(",")",["T_WHITESPACE","\n    ",147],"{",["T_WHITESPACE","\n        ",148],["T_RETURN","return",149],["T_WHITESPACE"," ",149],["T_VARIABLE","$this",149],["T_OBJECT_OPERATOR","->",149],["T_STRING","getUrl",149],"(",["T_CONSTANT_ENCAPSED_STRING","'*\/catalog_category\/jsonTree'",149],")",";",["T_WHITESPACE","\n    ",149],"}",["T_WHITESPACE","\n\n    ",150],["T_PUBLIC","public",152],["T_WHITESPACE"," ",152],["T_FUNCTION","function",152],["T_WHITESPACE"," ",152],["T_STRING","getSwitchTreeUrl",152],"(",")",["T_WHITESPACE","\n    ",152],"{",["T_WHITESPACE","\n        ",153],["T_RETURN","return",154],["T_WHITESPACE"," ",154],["T_VARIABLE","$this",154],["T_OBJECT_OPERATOR","->",154],["T_STRING","getUrl",154],"(",["T_WHITESPACE","\n            ",154],["T_CONSTANT_ENCAPSED_STRING","\"*\/catalog_category\/tree\"",155],",",["T_WHITESPACE","\n            ",155],["T_ARRAY","array",156],"(",["T_CONSTANT_ENCAPSED_STRING","'_current'",156],["T_DOUBLE_ARROW","=>",156],["T_STRING","true",156],",",["T_WHITESPACE"," ",156],["T_CONSTANT_ENCAPSED_STRING","'store'",156],["T_DOUBLE_ARROW","=>",156],["T_STRING","null",156],",",["T_WHITESPACE"," ",156],["T_CONSTANT_ENCAPSED_STRING","'_query'",156],["T_DOUBLE_ARROW","=>",156],["T_STRING","false",156],",",["T_WHITESPACE"," ",156],["T_CONSTANT_ENCAPSED_STRING","'id'",156],["T_DOUBLE_ARROW","=>",156],["T_STRING","null",156],",",["T_WHITESPACE"," ",156],["T_CONSTANT_ENCAPSED_STRING","'parent'",156],["T_DOUBLE_ARROW","=>",156],["T_STRING","null",156],")",["T_WHITESPACE","\n        ",156],")",";",["T_WHITESPACE","\n    ",157],"}",["T_WHITESPACE","\n\n    ",158],["T_PUBLIC","public",160],["T_WHITESPACE"," ",160],["T_FUNCTION","function",160],["T_WHITESPACE"," ",160],["T_STRING","getIsWasExpanded",160],"(",")",["T_WHITESPACE","\n    ",160],"{",["T_WHITESPACE","\n        ",161],["T_RETURN","return",162],["T_WHITESPACE"," ",162],["T_STRING","Mage",162],["T_DOUBLE_COLON","::",162],["T_STRING","getSingleton",162],"(",["T_CONSTANT_ENCAPSED_STRING","'admin\/session'",162],")",["T_OBJECT_OPERATOR","->",162],["T_STRING","getIsTreeWasExpanded",162],"(",")",";",["T_WHITESPACE","\n    ",162],"}",["T_WHITESPACE","\n\n    ",163],["T_PUBLIC","public",165],["T_WHITESPACE"," ",165],["T_FUNCTION","function",165],["T_WHITESPACE"," ",165],["T_STRING","getMoveUrl",165],"(",")",["T_WHITESPACE","\n    ",165],"{",["T_WHITESPACE","\n        ",166],["T_RETURN","return",167],["T_WHITESPACE"," ",167],["T_VARIABLE","$this",167],["T_OBJECT_OPERATOR","->",167],["T_STRING","getUrl",167],"(",["T_CONSTANT_ENCAPSED_STRING","'*\/catalog_category\/move'",167],",",["T_WHITESPACE"," ",167],["T_ARRAY","array",167],"(",["T_CONSTANT_ENCAPSED_STRING","'store'",167],["T_DOUBLE_ARROW","=>",167],["T_VARIABLE","$this",167],["T_OBJECT_OPERATOR","->",167],["T_STRING","getRequest",167],"(",")",["T_OBJECT_OPERATOR","->",167],["T_STRING","getParam",167],"(",["T_CONSTANT_ENCAPSED_STRING","'store'",167],")",")",")",";",["T_WHITESPACE","\n    ",167],"}",["T_WHITESPACE","\n\n    ",168],["T_PUBLIC","public",170],["T_WHITESPACE"," ",170],["T_FUNCTION","function",170],["T_WHITESPACE"," ",170],["T_STRING","getTree",170],"(",["T_VARIABLE","$parenNodeCategory",170],"=",["T_STRING","null",170],")",["T_WHITESPACE","\n    ",170],"{",["T_WHITESPACE","\n           ",171],["T_VARIABLE","$rootArray",172],["T_WHITESPACE"," ",172],"=",["T_WHITESPACE"," ",172],["T_VARIABLE","$this",172],["T_OBJECT_OPERATOR","->",172],["T_STRING","_getNodeJson",172],"(",["T_VARIABLE","$this",172],["T_OBJECT_OPERATOR","->",172],["T_STRING","getRoot",172],"(",["T_VARIABLE","$parenNodeCategory",172],")",")",";",["T_WHITESPACE","\n        ",172],["T_VARIABLE","$tree",173],["T_WHITESPACE"," ",173],"=",["T_WHITESPACE"," ",173],["T_ISSET","isset",173],"(",["T_VARIABLE","$rootArray",173],"[",["T_CONSTANT_ENCAPSED_STRING","'children'",173],"]",")",["T_WHITESPACE"," ",173],"?",["T_WHITESPACE"," ",173],["T_VARIABLE","$rootArray",173],"[",["T_CONSTANT_ENCAPSED_STRING","'children'",173],"]",["T_WHITESPACE"," ",173],":",["T_WHITESPACE"," ",173],["T_ARRAY","array",173],"(",")",";",["T_WHITESPACE","\n        ",173],["T_RETURN","return",174],["T_WHITESPACE"," ",174],["T_VARIABLE","$tree",174],";",["T_WHITESPACE","\n    ",174],"}",["T_WHITESPACE","\n\n    ",175],["T_PUBLIC","public",177],["T_WHITESPACE"," ",177],["T_FUNCTION","function",177],["T_WHITESPACE"," ",177],["T_STRING","getTreeJson",177],"(",["T_VARIABLE","$parenNodeCategory",177],"=",["T_STRING","null",177],")",["T_WHITESPACE","\n    ",177],"{",["T_WHITESPACE","\n        ",178],["T_VARIABLE","$rootArray",179],["T_WHITESPACE"," ",179],"=",["T_WHITESPACE"," ",179],["T_VARIABLE","$this",179],["T_OBJECT_OPERATOR","->",179],["T_STRING","_getNodeJson",179],"(",["T_VARIABLE","$this",179],["T_OBJECT_OPERATOR","->",179],["T_STRING","getRoot",179],"(",["T_VARIABLE","$parenNodeCategory",179],")",")",";",["T_WHITESPACE","\n        ",179],["T_VARIABLE","$json",180],["T_WHITESPACE"," ",180],"=",["T_WHITESPACE"," ",180],["T_STRING","Mage",180],["T_DOUBLE_COLON","::",180],["T_STRING","helper",180],"(",["T_CONSTANT_ENCAPSED_STRING","'core'",180],")",["T_OBJECT_OPERATOR","->",180],["T_STRING","jsonEncode",180],"(",["T_ISSET","isset",180],"(",["T_VARIABLE","$rootArray",180],"[",["T_CONSTANT_ENCAPSED_STRING","'children'",180],"]",")",["T_WHITESPACE"," ",180],"?",["T_WHITESPACE"," ",180],["T_VARIABLE","$rootArray",180],"[",["T_CONSTANT_ENCAPSED_STRING","'children'",180],"]",["T_WHITESPACE"," ",180],":",["T_WHITESPACE"," ",180],["T_ARRAY","array",180],"(",")",")",";",["T_WHITESPACE","\n        ",180],["T_RETURN","return",181],["T_WHITESPACE"," ",181],["T_VARIABLE","$json",181],";",["T_WHITESPACE","\n    ",181],"}",["T_WHITESPACE","\n\n    ",182],["T_DOC_COMMENT","\/**\n     * Get JSON of array of categories, that are breadcrumbs for specified category path\n     *\n     * @param string $path\n     * @param string $javascriptVarName\n     * @return string\n     *\/",184],["T_WHITESPACE","\n    ",190],["T_PUBLIC","public",191],["T_WHITESPACE"," ",191],["T_FUNCTION","function",191],["T_WHITESPACE"," ",191],["T_STRING","getBreadcrumbsJavascript",191],"(",["T_VARIABLE","$path",191],",",["T_WHITESPACE"," ",191],["T_VARIABLE","$javascriptVarName",191],")",["T_WHITESPACE","\n    ",191],"{",["T_WHITESPACE","\n        ",192],["T_IF","if",193],["T_WHITESPACE"," ",193],"(",["T_EMPTY","empty",193],"(",["T_VARIABLE","$path",193],")",")",["T_WHITESPACE"," ",193],"{",["T_WHITESPACE","\n            ",193],["T_RETURN","return",194],["T_WHITESPACE"," ",194],["T_CONSTANT_ENCAPSED_STRING","''",194],";",["T_WHITESPACE","\n        ",194],"}",["T_WHITESPACE","\n\n        ",195],["T_VARIABLE","$categories",197],["T_WHITESPACE"," ",197],"=",["T_WHITESPACE"," ",197],["T_STRING","Mage",197],["T_DOUBLE_COLON","::",197],["T_STRING","getResourceSingleton",197],"(",["T_CONSTANT_ENCAPSED_STRING","'catalog\/category_tree'",197],")",["T_WHITESPACE","\n            ",197],["T_OBJECT_OPERATOR","->",198],["T_STRING","setStoreId",198],"(",["T_VARIABLE","$this",198],["T_OBJECT_OPERATOR","->",198],["T_STRING","getStore",198],"(",")",["T_OBJECT_OPERATOR","->",198],["T_STRING","getId",198],"(",")",")",["T_OBJECT_OPERATOR","->",198],["T_STRING","loadBreadcrumbsArray",198],"(",["T_VARIABLE","$path",198],")",";",["T_WHITESPACE","\n        ",198],["T_IF","if",199],["T_WHITESPACE"," ",199],"(",["T_EMPTY","empty",199],"(",["T_VARIABLE","$categories",199],")",")",["T_WHITESPACE"," ",199],"{",["T_WHITESPACE","\n            ",199],["T_RETURN","return",200],["T_WHITESPACE"," ",200],["T_CONSTANT_ENCAPSED_STRING","''",200],";",["T_WHITESPACE","\n        ",200],"}",["T_WHITESPACE","\n        ",201],["T_FOREACH","foreach",202],["T_WHITESPACE"," ",202],"(",["T_VARIABLE","$categories",202],["T_WHITESPACE"," ",202],["T_AS","as",202],["T_WHITESPACE"," ",202],["T_VARIABLE","$key",202],["T_WHITESPACE"," ",202],["T_DOUBLE_ARROW","=>",202],["T_WHITESPACE"," ",202],["T_VARIABLE","$category",202],")",["T_WHITESPACE"," ",202],"{",["T_WHITESPACE","\n            ",202],["T_VARIABLE","$categories",203],"[",["T_VARIABLE","$key",203],"]",["T_WHITESPACE"," ",203],"=",["T_WHITESPACE"," ",203],["T_VARIABLE","$this",203],["T_OBJECT_OPERATOR","->",203],["T_STRING","_getNodeJson",203],"(",["T_VARIABLE","$category",203],")",";",["T_WHITESPACE","\n        ",203],"}",["T_WHITESPACE","\n        ",204],["T_RETURN","return",205],["T_WHITESPACE","\n            ",205],["T_CONSTANT_ENCAPSED_STRING","'<script type=\"text\/javascript\">'",206],["T_WHITESPACE","\n            ",206],".",["T_WHITESPACE"," ",207],["T_VARIABLE","$javascriptVarName",207],["T_WHITESPACE"," ",207],".",["T_WHITESPACE"," ",207],["T_CONSTANT_ENCAPSED_STRING","' = '",207],["T_WHITESPACE"," ",207],".",["T_WHITESPACE"," ",207],["T_STRING","Mage",207],["T_DOUBLE_COLON","::",207],["T_STRING","helper",207],"(",["T_CONSTANT_ENCAPSED_STRING","'core'",207],")",["T_OBJECT_OPERATOR","->",207],["T_STRING","jsonEncode",207],"(",["T_VARIABLE","$categories",207],")",["T_WHITESPACE"," ",207],".",["T_WHITESPACE"," ",207],["T_CONSTANT_ENCAPSED_STRING","';'",207],["T_WHITESPACE","\n            ",207],".",["T_WHITESPACE"," ",208],"(",["T_VARIABLE","$this",208],["T_OBJECT_OPERATOR","->",208],["T_STRING","canAddSubCategory",208],"(",")",["T_WHITESPACE","\n                ",208],"?",["T_WHITESPACE"," ",209],["T_CONSTANT_ENCAPSED_STRING","'$(\"add_subcategory_button\").show();'",209],["T_WHITESPACE","\n                ",209],":",["T_WHITESPACE"," ",210],["T_CONSTANT_ENCAPSED_STRING","'$(\"add_subcategory_button\").hide();'",210],")",["T_WHITESPACE","\n            ",210],".",["T_WHITESPACE"," ",211],["T_CONSTANT_ENCAPSED_STRING","'<\/script>'",211],";",["T_WHITESPACE","\n    ",211],"}",["T_WHITESPACE","\n\n    ",212],["T_DOC_COMMENT","\/**\n     * Get JSON of a tree node or an associative array\n     *\n     * @param Varien_Data_Tree_Node|array $node\n     * @param int $level\n     * @return string\n     *\/",214],["T_WHITESPACE","\n    ",220],["T_PROTECTED","protected",221],["T_WHITESPACE"," ",221],["T_FUNCTION","function",221],["T_WHITESPACE"," ",221],["T_STRING","_getNodeJson",221],"(",["T_VARIABLE","$node",221],",",["T_WHITESPACE"," ",221],["T_VARIABLE","$level",221],["T_WHITESPACE"," ",221],"=",["T_WHITESPACE"," ",221],["T_LNUMBER","0",221],")",["T_WHITESPACE","\n    ",221],"{",["T_WHITESPACE","\n        ",222],["T_COMMENT","\/\/ create a node from data array\n",223],["T_WHITESPACE","        ",224],["T_IF","if",224],["T_WHITESPACE"," ",224],"(",["T_STRING","is_array",224],"(",["T_VARIABLE","$node",224],")",")",["T_WHITESPACE"," ",224],"{",["T_WHITESPACE","\n            ",224],["T_VARIABLE","$node",225],["T_WHITESPACE"," ",225],"=",["T_WHITESPACE"," ",225],["T_NEW","new",225],["T_WHITESPACE"," ",225],["T_STRING","Varien_Data_Tree_Node",225],"(",["T_VARIABLE","$node",225],",",["T_WHITESPACE"," ",225],["T_CONSTANT_ENCAPSED_STRING","'entity_id'",225],",",["T_WHITESPACE"," ",225],["T_NEW","new",225],["T_WHITESPACE"," ",225],["T_STRING","Varien_Data_Tree",225],")",";",["T_WHITESPACE","\n        ",225],"}",["T_WHITESPACE","\n\n        ",226],["T_VARIABLE","$item",228],["T_WHITESPACE"," ",228],"=",["T_WHITESPACE"," ",228],["T_ARRAY","array",228],"(",")",";",["T_WHITESPACE","\n        ",228],["T_VARIABLE","$item",229],"[",["T_CONSTANT_ENCAPSED_STRING","'text'",229],"]",["T_WHITESPACE"," ",229],"=",["T_WHITESPACE"," ",229],["T_VARIABLE","$this",229],["T_OBJECT_OPERATOR","->",229],["T_STRING","buildNodeName",229],"(",["T_VARIABLE","$node",229],")",";",["T_WHITESPACE","\n\n        ",229],["T_COMMENT","\/* $rootForStores = Mage::getModel('core\/store')\n            ->getCollection()\n            ->loadByCategoryIds(array($node->getEntityId())); *\/",231],["T_WHITESPACE","\n        ",233],["T_VARIABLE","$rootForStores",234],["T_WHITESPACE"," ",234],"=",["T_WHITESPACE"," ",234],["T_STRING","in_array",234],"(",["T_VARIABLE","$node",234],["T_OBJECT_OPERATOR","->",234],["T_STRING","getEntityId",234],"(",")",",",["T_WHITESPACE"," ",234],["T_VARIABLE","$this",234],["T_OBJECT_OPERATOR","->",234],["T_STRING","getRootIds",234],"(",")",")",";",["T_WHITESPACE","\n\n        ",234],["T_VARIABLE","$item",236],"[",["T_CONSTANT_ENCAPSED_STRING","'id'",236],"]",["T_WHITESPACE","  ",236],"=",["T_WHITESPACE"," ",236],["T_VARIABLE","$node",236],["T_OBJECT_OPERATOR","->",236],["T_STRING","getId",236],"(",")",";",["T_WHITESPACE","\n        ",236],["T_VARIABLE","$item",237],"[",["T_CONSTANT_ENCAPSED_STRING","'store'",237],"]",["T_WHITESPACE","  ",237],"=",["T_WHITESPACE"," ",237],["T_INT_CAST","(int)",237],["T_WHITESPACE"," ",237],["T_VARIABLE","$this",237],["T_OBJECT_OPERATOR","->",237],["T_STRING","getStore",237],"(",")",["T_OBJECT_OPERATOR","->",237],["T_STRING","getId",237],"(",")",";",["T_WHITESPACE","\n        ",237],["T_VARIABLE","$item",238],"[",["T_CONSTANT_ENCAPSED_STRING","'path'",238],"]",["T_WHITESPACE"," ",238],"=",["T_WHITESPACE"," ",238],["T_VARIABLE","$node",238],["T_OBJECT_OPERATOR","->",238],["T_STRING","getData",238],"(",["T_CONSTANT_ENCAPSED_STRING","'path'",238],")",";",["T_WHITESPACE","\n\n        ",238],["T_VARIABLE","$item",240],"[",["T_CONSTANT_ENCAPSED_STRING","'cls'",240],"]",["T_WHITESPACE"," ",240],"=",["T_WHITESPACE"," ",240],["T_CONSTANT_ENCAPSED_STRING","'folder '",240],["T_WHITESPACE"," ",240],".",["T_WHITESPACE"," ",240],"(",["T_VARIABLE","$node",240],["T_OBJECT_OPERATOR","->",240],["T_STRING","getIsActive",240],"(",")",["T_WHITESPACE"," ",240],"?",["T_WHITESPACE"," ",240],["T_CONSTANT_ENCAPSED_STRING","'active-category'",240],["T_WHITESPACE"," ",240],":",["T_WHITESPACE"," ",240],["T_CONSTANT_ENCAPSED_STRING","'no-active-category'",240],")",";",["T_WHITESPACE","\n        ",240],["T_COMMENT","\/\/$item['allowDrop'] = ($level<3) ? true : false;\n",241],["T_WHITESPACE","        ",242],["T_VARIABLE","$allowMove",242],["T_WHITESPACE"," ",242],"=",["T_WHITESPACE"," ",242],["T_VARIABLE","$this",242],["T_OBJECT_OPERATOR","->",242],["T_STRING","_isCategoryMoveable",242],"(",["T_VARIABLE","$node",242],")",";",["T_WHITESPACE","\n        ",242],["T_VARIABLE","$item",243],"[",["T_CONSTANT_ENCAPSED_STRING","'allowDrop'",243],"]",["T_WHITESPACE"," ",243],"=",["T_WHITESPACE"," ",243],["T_VARIABLE","$allowMove",243],";",["T_WHITESPACE","\n        ",243],["T_COMMENT","\/\/ disallow drag if it's first level and category is root of a store\n",244],["T_WHITESPACE","        ",245],["T_VARIABLE","$item",245],"[",["T_CONSTANT_ENCAPSED_STRING","'allowDrag'",245],"]",["T_WHITESPACE"," ",245],"=",["T_WHITESPACE"," ",245],["T_VARIABLE","$allowMove",245],["T_WHITESPACE"," ",245],["T_BOOLEAN_AND","&&",245],["T_WHITESPACE"," ",245],"(","(",["T_VARIABLE","$node",245],["T_OBJECT_OPERATOR","->",245],["T_STRING","getLevel",245],"(",")",["T_IS_EQUAL","==",245],["T_LNUMBER","1",245],["T_WHITESPACE"," ",245],["T_BOOLEAN_AND","&&",245],["T_WHITESPACE"," ",245],["T_VARIABLE","$rootForStores",245],")",["T_WHITESPACE"," ",245],"?",["T_WHITESPACE"," ",245],["T_STRING","false",245],["T_WHITESPACE"," ",245],":",["T_WHITESPACE"," ",245],["T_STRING","true",245],")",";",["T_WHITESPACE","\n\n        ",245],["T_IF","if",247],["T_WHITESPACE"," ",247],"(",["T_INT_CAST","(int)",247],["T_VARIABLE","$node",247],["T_OBJECT_OPERATOR","->",247],["T_STRING","getChildrenCount",247],"(",")",">",["T_LNUMBER","0",247],")",["T_WHITESPACE"," ",247],"{",["T_WHITESPACE","\n            ",247],["T_VARIABLE","$item",248],"[",["T_CONSTANT_ENCAPSED_STRING","'children'",248],"]",["T_WHITESPACE"," ",248],"=",["T_WHITESPACE"," ",248],["T_ARRAY","array",248],"(",")",";",["T_WHITESPACE","\n        ",248],"}",["T_WHITESPACE","\n\n        ",249],["T_VARIABLE","$isParent",251],["T_WHITESPACE"," ",251],"=",["T_WHITESPACE"," ",251],["T_VARIABLE","$this",251],["T_OBJECT_OPERATOR","->",251],["T_STRING","_isParentSelectedCategory",251],"(",["T_VARIABLE","$node",251],")",";",["T_WHITESPACE","\n\n        ",251],["T_IF","if",253],["T_WHITESPACE"," ",253],"(",["T_VARIABLE","$node",253],["T_OBJECT_OPERATOR","->",253],["T_STRING","hasChildren",253],"(",")",")",["T_WHITESPACE"," ",253],"{",["T_WHITESPACE","\n            ",253],["T_VARIABLE","$item",254],"[",["T_CONSTANT_ENCAPSED_STRING","'children'",254],"]",["T_WHITESPACE"," ",254],"=",["T_WHITESPACE"," ",254],["T_ARRAY","array",254],"(",")",";",["T_WHITESPACE","\n            ",254],["T_IF","if",255],["T_WHITESPACE"," ",255],"(","!","(",["T_VARIABLE","$this",255],["T_OBJECT_OPERATOR","->",255],["T_STRING","getUseAjax",255],"(",")",["T_WHITESPACE"," ",255],["T_BOOLEAN_AND","&&",255],["T_WHITESPACE"," ",255],["T_VARIABLE","$node",255],["T_OBJECT_OPERATOR","->",255],["T_STRING","getLevel",255],"(",")",["T_WHITESPACE"," ",255],">",["T_WHITESPACE"," ",255],["T_LNUMBER","1",255],["T_WHITESPACE"," ",255],["T_BOOLEAN_AND","&&",255],["T_WHITESPACE"," ",255],"!",["T_VARIABLE","$isParent",255],")",")",["T_WHITESPACE"," ",255],"{",["T_WHITESPACE","\n                ",255],["T_FOREACH","foreach",256],["T_WHITESPACE"," ",256],"(",["T_VARIABLE","$node",256],["T_OBJECT_OPERATOR","->",256],["T_STRING","getChildren",256],"(",")",["T_WHITESPACE"," ",256],["T_AS","as",256],["T_WHITESPACE"," ",256],["T_VARIABLE","$child",256],")",["T_WHITESPACE"," ",256],"{",["T_WHITESPACE","\n                    ",256],["T_VARIABLE","$item",257],"[",["T_CONSTANT_ENCAPSED_STRING","'children'",257],"]","[","]",["T_WHITESPACE"," ",257],"=",["T_WHITESPACE"," ",257],["T_VARIABLE","$this",257],["T_OBJECT_OPERATOR","->",257],["T_STRING","_getNodeJson",257],"(",["T_VARIABLE","$child",257],",",["T_WHITESPACE"," ",257],["T_VARIABLE","$level",257],"+",["T_LNUMBER","1",257],")",";",["T_WHITESPACE","\n                ",257],"}",["T_WHITESPACE","\n            ",258],"}",["T_WHITESPACE","\n        ",259],"}",["T_WHITESPACE","\n\n        ",260],["T_IF","if",262],["T_WHITESPACE"," ",262],"(",["T_VARIABLE","$isParent",262],["T_WHITESPACE"," ",262],["T_BOOLEAN_OR","||",262],["T_WHITESPACE"," ",262],["T_VARIABLE","$node",262],["T_OBJECT_OPERATOR","->",262],["T_STRING","getLevel",262],"(",")",["T_WHITESPACE"," ",262],"<",["T_WHITESPACE"," ",262],["T_LNUMBER","2",262],")",["T_WHITESPACE"," ",262],"{",["T_WHITESPACE","\n            ",262],["T_VARIABLE","$item",263],"[",["T_CONSTANT_ENCAPSED_STRING","'expanded'",263],"]",["T_WHITESPACE"," ",263],"=",["T_WHITESPACE"," ",263],["T_STRING","true",263],";",["T_WHITESPACE","\n        ",263],"}",["T_WHITESPACE","\n\n        ",264],["T_RETURN","return",266],["T_WHITESPACE"," ",266],["T_VARIABLE","$item",266],";",["T_WHITESPACE","\n    ",266],"}",["T_WHITESPACE","\n\n    ",267],["T_DOC_COMMENT","\/**\n     * Get category name\n     *\n     * @param Varien_Object $node\n     * @return string\n     *\/",269],["T_WHITESPACE","\n    ",274],["T_PUBLIC","public",275],["T_WHITESPACE"," ",275],["T_FUNCTION","function",275],["T_WHITESPACE"," ",275],["T_STRING","buildNodeName",275],"(",["T_VARIABLE","$node",275],")",["T_WHITESPACE","\n    ",275],"{",["T_WHITESPACE","\n        ",276],["T_VARIABLE","$result",277],["T_WHITESPACE"," ",277],"=",["T_WHITESPACE"," ",277],["T_VARIABLE","$this",277],["T_OBJECT_OPERATOR","->",277],["T_STRING","escapeHtml",277],"(",["T_VARIABLE","$node",277],["T_OBJECT_OPERATOR","->",277],["T_STRING","getName",277],"(",")",")",";",["T_WHITESPACE","\n        ",277],["T_IF","if",278],["T_WHITESPACE"," ",278],"(",["T_VARIABLE","$this",278],["T_OBJECT_OPERATOR","->",278],["T_STRING","_withProductCount",278],")",["T_WHITESPACE"," ",278],"{",["T_WHITESPACE","\n             ",278],["T_VARIABLE","$result",279],["T_WHITESPACE"," ",279],["T_CONCAT_EQUAL",".=",279],["T_WHITESPACE"," ",279],["T_CONSTANT_ENCAPSED_STRING","' ('",279],["T_WHITESPACE"," ",279],".",["T_WHITESPACE"," ",279],["T_VARIABLE","$node",279],["T_OBJECT_OPERATOR","->",279],["T_STRING","getProductCount",279],"(",")",["T_WHITESPACE"," ",279],".",["T_WHITESPACE"," ",279],["T_CONSTANT_ENCAPSED_STRING","')'",279],";",["T_WHITESPACE","\n        ",279],"}",["T_WHITESPACE","\n        ",280],["T_RETURN","return",281],["T_WHITESPACE"," ",281],["T_VARIABLE","$result",281],";",["T_WHITESPACE","\n    ",281],"}",["T_WHITESPACE","\n\n    ",282],["T_PROTECTED","protected",284],["T_WHITESPACE"," ",284],["T_FUNCTION","function",284],["T_WHITESPACE"," ",284],["T_STRING","_isCategoryMoveable",284],"(",["T_VARIABLE","$node",284],")",["T_WHITESPACE","\n    ",284],"{",["T_WHITESPACE","\n        ",285],["T_VARIABLE","$options",286],["T_WHITESPACE"," ",286],"=",["T_WHITESPACE"," ",286],["T_NEW","new",286],["T_WHITESPACE"," ",286],["T_STRING","Varien_Object",286],"(",["T_ARRAY","array",286],"(",["T_WHITESPACE","\n            ",286],["T_CONSTANT_ENCAPSED_STRING","'is_moveable'",287],["T_WHITESPACE"," ",287],["T_DOUBLE_ARROW","=>",287],["T_WHITESPACE"," ",287],["T_STRING","true",287],",",["T_WHITESPACE","\n            ",287],["T_CONSTANT_ENCAPSED_STRING","'category'",288],["T_WHITESPACE"," ",288],["T_DOUBLE_ARROW","=>",288],["T_WHITESPACE"," ",288],["T_VARIABLE","$node",288],["T_WHITESPACE","\n        ",288],")",")",";",["T_WHITESPACE","\n\n        ",289],["T_STRING","Mage",291],["T_DOUBLE_COLON","::",291],["T_STRING","dispatchEvent",291],"(",["T_CONSTANT_ENCAPSED_STRING","'adminhtml_catalog_category_tree_is_moveable'",291],",",["T_WHITESPACE","\n            ",291],["T_ARRAY","array",292],"(",["T_CONSTANT_ENCAPSED_STRING","'options'",292],["T_DOUBLE_ARROW","=>",292],["T_VARIABLE","$options",292],")",["T_WHITESPACE","\n        ",292],")",";",["T_WHITESPACE","\n\n        ",293],["T_RETURN","return",295],["T_WHITESPACE"," ",295],["T_VARIABLE","$options",295],["T_OBJECT_OPERATOR","->",295],["T_STRING","getIsMoveable",295],"(",")",";",["T_WHITESPACE","\n    ",295],"}",["T_WHITESPACE","\n\n    ",296],["T_PROTECTED","protected",298],["T_WHITESPACE"," ",298],["T_FUNCTION","function",298],["T_WHITESPACE"," ",298],["T_STRING","_isParentSelectedCategory",298],"(",["T_VARIABLE","$node",298],")",["T_WHITESPACE","\n    ",298],"{",["T_WHITESPACE","\n        ",299],["T_IF","if",300],["T_WHITESPACE"," ",300],"(",["T_VARIABLE","$node",300],["T_WHITESPACE"," ",300],["T_BOOLEAN_AND","&&",300],["T_WHITESPACE"," ",300],["T_VARIABLE","$this",300],["T_OBJECT_OPERATOR","->",300],["T_STRING","getCategory",300],"(",")",")",["T_WHITESPACE"," ",300],"{",["T_WHITESPACE","\n            ",300],["T_VARIABLE","$pathIds",301],["T_WHITESPACE"," ",301],"=",["T_WHITESPACE"," ",301],["T_VARIABLE","$this",301],["T_OBJECT_OPERATOR","->",301],["T_STRING","getCategory",301],"(",")",["T_OBJECT_OPERATOR","->",301],["T_STRING","getPathIds",301],"(",")",";",["T_WHITESPACE","\n            ",301],["T_IF","if",302],["T_WHITESPACE"," ",302],"(",["T_STRING","in_array",302],"(",["T_VARIABLE","$node",302],["T_OBJECT_OPERATOR","->",302],["T_STRING","getId",302],"(",")",",",["T_WHITESPACE"," ",302],["T_VARIABLE","$pathIds",302],")",")",["T_WHITESPACE"," ",302],"{",["T_WHITESPACE","\n                ",302],["T_RETURN","return",303],["T_WHITESPACE"," ",303],["T_STRING","true",303],";",["T_WHITESPACE","\n            ",303],"}",["T_WHITESPACE","\n        ",304],"}",["T_WHITESPACE","\n\n        ",305],["T_RETURN","return",307],["T_WHITESPACE"," ",307],["T_STRING","false",307],";",["T_WHITESPACE","\n    ",307],"}",["T_WHITESPACE","\n\n    ",308],["T_DOC_COMMENT","\/**\n     * Check if page loaded by outside link to category edit\n     *\n     * @return boolean\n     *\/",310],["T_WHITESPACE","\n    ",314],["T_PUBLIC","public",315],["T_WHITESPACE"," ",315],["T_FUNCTION","function",315],["T_WHITESPACE"," ",315],["T_STRING","isClearEdit",315],"(",")",["T_WHITESPACE","\n    ",315],"{",["T_WHITESPACE","\n        ",316],["T_RETURN","return",317],["T_WHITESPACE"," ",317],["T_BOOL_CAST","(bool)",317],["T_WHITESPACE"," ",317],["T_VARIABLE","$this",317],["T_OBJECT_OPERATOR","->",317],["T_STRING","getRequest",317],"(",")",["T_OBJECT_OPERATOR","->",317],["T_STRING","getParam",317],"(",["T_CONSTANT_ENCAPSED_STRING","'clear'",317],")",";",["T_WHITESPACE","\n    ",317],"}",["T_WHITESPACE","\n\n    ",318],["T_DOC_COMMENT","\/**\n     * Check availability of adding root category\n     *\n     * @return boolean\n     *\/",320],["T_WHITESPACE","\n    ",324],["T_PUBLIC","public",325],["T_WHITESPACE"," ",325],["T_FUNCTION","function",325],["T_WHITESPACE"," ",325],["T_STRING","canAddRootCategory",325],"(",")",["T_WHITESPACE","\n    ",325],"{",["T_WHITESPACE","\n        ",326],["T_VARIABLE","$options",327],["T_WHITESPACE"," ",327],"=",["T_WHITESPACE"," ",327],["T_NEW","new",327],["T_WHITESPACE"," ",327],["T_STRING","Varien_Object",327],"(",["T_ARRAY","array",327],"(",["T_CONSTANT_ENCAPSED_STRING","'is_allow'",327],["T_DOUBLE_ARROW","=>",327],["T_STRING","true",327],")",")",";",["T_WHITESPACE","\n        ",327],["T_STRING","Mage",328],["T_DOUBLE_COLON","::",328],["T_STRING","dispatchEvent",328],"(",["T_WHITESPACE","\n            ",328],["T_CONSTANT_ENCAPSED_STRING","'adminhtml_catalog_category_tree_can_add_root_category'",329],",",["T_WHITESPACE","\n            ",329],["T_ARRAY","array",330],"(",["T_WHITESPACE","\n                ",330],["T_CONSTANT_ENCAPSED_STRING","'category'",331],["T_WHITESPACE"," ",331],["T_DOUBLE_ARROW","=>",331],["T_WHITESPACE"," ",331],["T_VARIABLE","$this",331],["T_OBJECT_OPERATOR","->",331],["T_STRING","getCategory",331],"(",")",",",["T_WHITESPACE","\n                ",331],["T_CONSTANT_ENCAPSED_STRING","'options'",332],["T_WHITESPACE","   ",332],["T_DOUBLE_ARROW","=>",332],["T_WHITESPACE"," ",332],["T_VARIABLE","$options",332],",",["T_WHITESPACE","\n                ",332],["T_CONSTANT_ENCAPSED_STRING","'store'",333],["T_WHITESPACE","    ",333],["T_DOUBLE_ARROW","=>",333],["T_WHITESPACE"," ",333],["T_VARIABLE","$this",333],["T_OBJECT_OPERATOR","->",333],["T_STRING","getStore",333],"(",")",["T_OBJECT_OPERATOR","->",333],["T_STRING","getId",333],"(",")",["T_WHITESPACE","\n            ",333],")",["T_WHITESPACE","\n        ",334],")",";",["T_WHITESPACE","\n\n        ",335],["T_RETURN","return",337],["T_WHITESPACE"," ",337],["T_VARIABLE","$options",337],["T_OBJECT_OPERATOR","->",337],["T_STRING","getIsAllow",337],"(",")",";",["T_WHITESPACE","\n    ",337],"}",["T_WHITESPACE","\n\n    ",338],["T_DOC_COMMENT","\/**\n     * Check availability of adding sub category\n     *\n     * @return boolean\n     *\/",340],["T_WHITESPACE","\n    ",344],["T_PUBLIC","public",345],["T_WHITESPACE"," ",345],["T_FUNCTION","function",345],["T_WHITESPACE"," ",345],["T_STRING","canAddSubCategory",345],"(",")",["T_WHITESPACE","\n    ",345],"{",["T_WHITESPACE","\n        ",346],["T_VARIABLE","$options",347],["T_WHITESPACE"," ",347],"=",["T_WHITESPACE"," ",347],["T_NEW","new",347],["T_WHITESPACE"," ",347],["T_STRING","Varien_Object",347],"(",["T_ARRAY","array",347],"(",["T_CONSTANT_ENCAPSED_STRING","'is_allow'",347],["T_DOUBLE_ARROW","=>",347],["T_STRING","true",347],")",")",";",["T_WHITESPACE","\n        ",347],["T_STRING","Mage",348],["T_DOUBLE_COLON","::",348],["T_STRING","dispatchEvent",348],"(",["T_WHITESPACE","\n            ",348],["T_CONSTANT_ENCAPSED_STRING","'adminhtml_catalog_category_tree_can_add_sub_category'",349],",",["T_WHITESPACE","\n            ",349],["T_ARRAY","array",350],"(",["T_WHITESPACE","\n                ",350],["T_CONSTANT_ENCAPSED_STRING","'category'",351],["T_WHITESPACE"," ",351],["T_DOUBLE_ARROW","=>",351],["T_WHITESPACE"," ",351],["T_VARIABLE","$this",351],["T_OBJECT_OPERATOR","->",351],["T_STRING","getCategory",351],"(",")",",",["T_WHITESPACE","\n                ",351],["T_CONSTANT_ENCAPSED_STRING","'options'",352],["T_WHITESPACE","   ",352],["T_DOUBLE_ARROW","=>",352],["T_WHITESPACE"," ",352],["T_VARIABLE","$options",352],",",["T_WHITESPACE","\n                ",352],["T_CONSTANT_ENCAPSED_STRING","'store'",353],["T_WHITESPACE","    ",353],["T_DOUBLE_ARROW","=>",353],["T_WHITESPACE"," ",353],["T_VARIABLE","$this",353],["T_OBJECT_OPERATOR","->",353],["T_STRING","getStore",353],"(",")",["T_OBJECT_OPERATOR","->",353],["T_STRING","getId",353],"(",")",["T_WHITESPACE","\n            ",353],")",["T_WHITESPACE","\n        ",354],")",";",["T_WHITESPACE","\n\n        ",355],["T_RETURN","return",357],["T_WHITESPACE"," ",357],["T_VARIABLE","$options",357],["T_OBJECT_OPERATOR","->",357],["T_STRING","getIsAllow",357],"(",")",";",["T_WHITESPACE","\n    ",357],"}",["T_WHITESPACE","\n",358],"}",["T_WHITESPACE","\n",359]]
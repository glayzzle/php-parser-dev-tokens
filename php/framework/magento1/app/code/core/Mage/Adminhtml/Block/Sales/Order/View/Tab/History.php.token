[["T_OPEN_TAG","<?php\n",1],["T_DOC_COMMENT","\/**\n * Magento\n *\n * NOTICE OF LICENSE\n *\n * This source file is subject to the Open Software License (OSL 3.0)\n * that is bundled with this package in the file LICENSE.txt.\n * It is also available through the world-wide-web at this URL:\n * http:\/\/opensource.org\/licenses\/osl-3.0.php\n * If you did not receive a copy of the license and are unable to\n * obtain it through the world-wide-web, please send an email\n * to license@magento.com so we can send you a copy immediately.\n *\n * DISCLAIMER\n *\n * Do not edit or add to this file if you wish to upgrade Magento to newer\n * versions in the future. If you wish to customize Magento for your\n * needs please refer to http:\/\/www.magento.com for more information.\n *\n * @category    Mage\n * @package     Mage_Adminhtml\n * @copyright  Copyright (c) 2006-2016 X.commerce, Inc. and affiliates (http:\/\/www.magento.com)\n * @license    http:\/\/opensource.org\/licenses\/osl-3.0.php  Open Software License (OSL 3.0)\n *\/",2],["T_WHITESPACE","\n\n",25],["T_DOC_COMMENT","\/**\n * Order history tab\n *\n * @category   Mage\n * @package    Mage_Adminhtml\n * @author      Magento Core Team <core@magentocommerce.com>\n *\/",27],["T_WHITESPACE","\n",33],["T_CLASS","class",34],["T_WHITESPACE"," ",34],["T_STRING","Mage_Adminhtml_Block_Sales_Order_View_Tab_History",34],["T_WHITESPACE","\n    ",34],["T_EXTENDS","extends",35],["T_WHITESPACE"," ",35],["T_STRING","Mage_Adminhtml_Block_Template",35],["T_WHITESPACE","\n    ",35],["T_IMPLEMENTS","implements",36],["T_WHITESPACE"," ",36],["T_STRING","Mage_Adminhtml_Block_Widget_Tab_Interface",36],["T_WHITESPACE","\n",36],"{",["T_WHITESPACE","\n    ",37],["T_PROTECTED","protected",38],["T_WHITESPACE"," ",38],["T_FUNCTION","function",38],["T_WHITESPACE"," ",38],["T_STRING","_construct",38],"(",")",["T_WHITESPACE","\n    ",38],"{",["T_WHITESPACE","\n        ",39],["T_STRING","parent",40],["T_DOUBLE_COLON","::",40],["T_STRING","_construct",40],"(",")",";",["T_WHITESPACE","\n        ",40],["T_VARIABLE","$this",41],["T_OBJECT_OPERATOR","->",41],["T_STRING","setTemplate",41],"(",["T_CONSTANT_ENCAPSED_STRING","'sales\/order\/view\/tab\/history.phtml'",41],")",";",["T_WHITESPACE","\n    ",41],"}",["T_WHITESPACE","\n\n    ",42],["T_DOC_COMMENT","\/**\n     * Retrieve order model instance\n     *\n     * @return Mage_Sales_Model_Order\n     *\/",44],["T_WHITESPACE","\n    ",48],["T_PUBLIC","public",49],["T_WHITESPACE"," ",49],["T_FUNCTION","function",49],["T_WHITESPACE"," ",49],["T_STRING","getOrder",49],"(",")",["T_WHITESPACE","\n    ",49],"{",["T_WHITESPACE","\n        ",50],["T_RETURN","return",51],["T_WHITESPACE"," ",51],["T_STRING","Mage",51],["T_DOUBLE_COLON","::",51],["T_STRING","registry",51],"(",["T_CONSTANT_ENCAPSED_STRING","'current_order'",51],")",";",["T_WHITESPACE","\n    ",51],"}",["T_WHITESPACE","\n\n    ",52],["T_DOC_COMMENT","\/**\n     * Compose and get order full history.\n     * Consists of the status history comments as well as of invoices, shipments and creditmemos creations\n     *\n     * @return array\n     *\/",54],["T_WHITESPACE","\n    ",59],["T_PUBLIC","public",60],["T_WHITESPACE"," ",60],["T_FUNCTION","function",60],["T_WHITESPACE"," ",60],["T_STRING","getFullHistory",60],"(",")",["T_WHITESPACE","\n    ",60],"{",["T_WHITESPACE","\n        ",61],["T_VARIABLE","$order",62],["T_WHITESPACE"," ",62],"=",["T_WHITESPACE"," ",62],["T_VARIABLE","$this",62],["T_OBJECT_OPERATOR","->",62],["T_STRING","getOrder",62],"(",")",";",["T_WHITESPACE","\n\n        ",62],["T_VARIABLE","$history",64],["T_WHITESPACE"," ",64],"=",["T_WHITESPACE"," ",64],["T_ARRAY","array",64],"(",")",";",["T_WHITESPACE","\n        ",64],["T_FOREACH","foreach",65],["T_WHITESPACE"," ",65],"(",["T_VARIABLE","$order",65],["T_OBJECT_OPERATOR","->",65],["T_STRING","getAllStatusHistory",65],"(",")",["T_WHITESPACE"," ",65],["T_AS","as",65],["T_WHITESPACE"," ",65],["T_VARIABLE","$orderComment",65],")","{",["T_WHITESPACE","\n            ",65],["T_VARIABLE","$history",66],"[","]",["T_WHITESPACE"," ",66],"=",["T_WHITESPACE"," ",66],["T_VARIABLE","$this",66],["T_OBJECT_OPERATOR","->",66],["T_STRING","_prepareHistoryItem",66],"(",["T_WHITESPACE","\n                ",66],["T_VARIABLE","$orderComment",67],["T_OBJECT_OPERATOR","->",67],["T_STRING","getStatusLabel",67],"(",")",",",["T_WHITESPACE","\n                ",67],["T_VARIABLE","$orderComment",68],["T_OBJECT_OPERATOR","->",68],["T_STRING","getIsCustomerNotified",68],"(",")",",",["T_WHITESPACE","\n                ",68],["T_VARIABLE","$orderComment",69],["T_OBJECT_OPERATOR","->",69],["T_STRING","getCreatedAtDate",69],"(",")",",",["T_WHITESPACE","\n                ",69],["T_VARIABLE","$orderComment",70],["T_OBJECT_OPERATOR","->",70],["T_STRING","getComment",70],"(",")",["T_WHITESPACE","\n            ",70],")",";",["T_WHITESPACE","\n        ",71],"}",["T_WHITESPACE","\n\n        ",72],["T_FOREACH","foreach",74],["T_WHITESPACE"," ",74],"(",["T_VARIABLE","$order",74],["T_OBJECT_OPERATOR","->",74],["T_STRING","getCreditmemosCollection",74],"(",")",["T_WHITESPACE"," ",74],["T_AS","as",74],["T_WHITESPACE"," ",74],["T_VARIABLE","$_memo",74],")","{",["T_WHITESPACE","\n            ",74],["T_VARIABLE","$history",75],"[","]",["T_WHITESPACE"," ",75],"=",["T_WHITESPACE"," ",75],["T_VARIABLE","$this",75],["T_OBJECT_OPERATOR","->",75],["T_STRING","_prepareHistoryItem",75],"(",["T_WHITESPACE","\n                ",75],["T_VARIABLE","$this",76],["T_OBJECT_OPERATOR","->",76],["T_STRING","__",76],"(",["T_CONSTANT_ENCAPSED_STRING","'Credit memo #%s created'",76],",",["T_WHITESPACE"," ",76],["T_VARIABLE","$_memo",76],["T_OBJECT_OPERATOR","->",76],["T_STRING","getIncrementId",76],"(",")",")",",",["T_WHITESPACE","\n                ",76],["T_VARIABLE","$_memo",77],["T_OBJECT_OPERATOR","->",77],["T_STRING","getEmailSent",77],"(",")",",",["T_WHITESPACE","\n                ",77],["T_VARIABLE","$_memo",78],["T_OBJECT_OPERATOR","->",78],["T_STRING","getCreatedAtDate",78],"(",")",["T_WHITESPACE","\n            ",78],")",";",["T_WHITESPACE","\n\n            ",79],["T_FOREACH","foreach",81],["T_WHITESPACE"," ",81],"(",["T_VARIABLE","$_memo",81],["T_OBJECT_OPERATOR","->",81],["T_STRING","getCommentsCollection",81],"(",")",["T_WHITESPACE"," ",81],["T_AS","as",81],["T_WHITESPACE"," ",81],["T_VARIABLE","$_comment",81],")","{",["T_WHITESPACE","\n                ",81],["T_VARIABLE","$history",82],"[","]",["T_WHITESPACE"," ",82],"=",["T_WHITESPACE"," ",82],["T_VARIABLE","$this",82],["T_OBJECT_OPERATOR","->",82],["T_STRING","_prepareHistoryItem",82],"(",["T_WHITESPACE","\n                    ",82],["T_VARIABLE","$this",83],["T_OBJECT_OPERATOR","->",83],["T_STRING","__",83],"(",["T_CONSTANT_ENCAPSED_STRING","'Credit memo #%s comment added'",83],",",["T_WHITESPACE"," ",83],["T_VARIABLE","$_memo",83],["T_OBJECT_OPERATOR","->",83],["T_STRING","getIncrementId",83],"(",")",")",",",["T_WHITESPACE","\n                    ",83],["T_VARIABLE","$_comment",84],["T_OBJECT_OPERATOR","->",84],["T_STRING","getIsCustomerNotified",84],"(",")",",",["T_WHITESPACE","\n                    ",84],["T_VARIABLE","$_comment",85],["T_OBJECT_OPERATOR","->",85],["T_STRING","getCreatedAtDate",85],"(",")",",",["T_WHITESPACE","\n                    ",85],["T_VARIABLE","$_comment",86],["T_OBJECT_OPERATOR","->",86],["T_STRING","getComment",86],"(",")",["T_WHITESPACE","\n                ",86],")",";",["T_WHITESPACE","\n            ",87],"}",["T_WHITESPACE","\n        ",88],"}",["T_WHITESPACE","\n\n        ",89],["T_FOREACH","foreach",91],["T_WHITESPACE"," ",91],"(",["T_VARIABLE","$order",91],["T_OBJECT_OPERATOR","->",91],["T_STRING","getShipmentsCollection",91],"(",")",["T_WHITESPACE"," ",91],["T_AS","as",91],["T_WHITESPACE"," ",91],["T_VARIABLE","$_shipment",91],")","{",["T_WHITESPACE","\n            ",91],["T_VARIABLE","$history",92],"[","]",["T_WHITESPACE"," ",92],"=",["T_WHITESPACE"," ",92],["T_VARIABLE","$this",92],["T_OBJECT_OPERATOR","->",92],["T_STRING","_prepareHistoryItem",92],"(",["T_WHITESPACE","\n                ",92],["T_VARIABLE","$this",93],["T_OBJECT_OPERATOR","->",93],["T_STRING","__",93],"(",["T_CONSTANT_ENCAPSED_STRING","'Shipment #%s created'",93],",",["T_WHITESPACE"," ",93],["T_VARIABLE","$_shipment",93],["T_OBJECT_OPERATOR","->",93],["T_STRING","getIncrementId",93],"(",")",")",",",["T_WHITESPACE","\n                ",93],["T_VARIABLE","$_shipment",94],["T_OBJECT_OPERATOR","->",94],["T_STRING","getEmailSent",94],"(",")",",",["T_WHITESPACE","\n                ",94],["T_VARIABLE","$_shipment",95],["T_OBJECT_OPERATOR","->",95],["T_STRING","getCreatedAtDate",95],"(",")",["T_WHITESPACE","\n            ",95],")",";",["T_WHITESPACE","\n\n            ",96],["T_FOREACH","foreach",98],["T_WHITESPACE"," ",98],"(",["T_VARIABLE","$_shipment",98],["T_OBJECT_OPERATOR","->",98],["T_STRING","getCommentsCollection",98],"(",")",["T_WHITESPACE"," ",98],["T_AS","as",98],["T_WHITESPACE"," ",98],["T_VARIABLE","$_comment",98],")","{",["T_WHITESPACE","\n                ",98],["T_VARIABLE","$history",99],"[","]",["T_WHITESPACE"," ",99],"=",["T_WHITESPACE"," ",99],["T_VARIABLE","$this",99],["T_OBJECT_OPERATOR","->",99],["T_STRING","_prepareHistoryItem",99],"(",["T_WHITESPACE","\n                    ",99],["T_VARIABLE","$this",100],["T_OBJECT_OPERATOR","->",100],["T_STRING","__",100],"(",["T_CONSTANT_ENCAPSED_STRING","'Shipment #%s comment added'",100],",",["T_WHITESPACE"," ",100],["T_VARIABLE","$_shipment",100],["T_OBJECT_OPERATOR","->",100],["T_STRING","getIncrementId",100],"(",")",")",",",["T_WHITESPACE","\n                    ",100],["T_VARIABLE","$_comment",101],["T_OBJECT_OPERATOR","->",101],["T_STRING","getIsCustomerNotified",101],"(",")",",",["T_WHITESPACE","\n                    ",101],["T_VARIABLE","$_comment",102],["T_OBJECT_OPERATOR","->",102],["T_STRING","getCreatedAtDate",102],"(",")",",",["T_WHITESPACE","\n                    ",102],["T_VARIABLE","$_comment",103],["T_OBJECT_OPERATOR","->",103],["T_STRING","getComment",103],"(",")",["T_WHITESPACE","\n                ",103],")",";",["T_WHITESPACE","\n            ",104],"}",["T_WHITESPACE","\n        ",105],"}",["T_WHITESPACE","\n\n        ",106],["T_FOREACH","foreach",108],["T_WHITESPACE"," ",108],"(",["T_VARIABLE","$order",108],["T_OBJECT_OPERATOR","->",108],["T_STRING","getInvoiceCollection",108],"(",")",["T_WHITESPACE"," ",108],["T_AS","as",108],["T_WHITESPACE"," ",108],["T_VARIABLE","$_invoice",108],")","{",["T_WHITESPACE","\n            ",108],["T_VARIABLE","$history",109],"[","]",["T_WHITESPACE"," ",109],"=",["T_WHITESPACE"," ",109],["T_VARIABLE","$this",109],["T_OBJECT_OPERATOR","->",109],["T_STRING","_prepareHistoryItem",109],"(",["T_WHITESPACE","\n                ",109],["T_VARIABLE","$this",110],["T_OBJECT_OPERATOR","->",110],["T_STRING","__",110],"(",["T_CONSTANT_ENCAPSED_STRING","'Invoice #%s created'",110],",",["T_WHITESPACE"," ",110],["T_VARIABLE","$_invoice",110],["T_OBJECT_OPERATOR","->",110],["T_STRING","getIncrementId",110],"(",")",")",",",["T_WHITESPACE","\n                ",110],["T_VARIABLE","$_invoice",111],["T_OBJECT_OPERATOR","->",111],["T_STRING","getEmailSent",111],"(",")",",",["T_WHITESPACE","\n                ",111],["T_VARIABLE","$_invoice",112],["T_OBJECT_OPERATOR","->",112],["T_STRING","getCreatedAtDate",112],"(",")",["T_WHITESPACE","\n            ",112],")",";",["T_WHITESPACE","\n\n            ",113],["T_FOREACH","foreach",115],["T_WHITESPACE"," ",115],"(",["T_VARIABLE","$_invoice",115],["T_OBJECT_OPERATOR","->",115],["T_STRING","getCommentsCollection",115],"(",")",["T_WHITESPACE"," ",115],["T_AS","as",115],["T_WHITESPACE"," ",115],["T_VARIABLE","$_comment",115],")","{",["T_WHITESPACE","\n                ",115],["T_VARIABLE","$history",116],"[","]",["T_WHITESPACE"," ",116],"=",["T_WHITESPACE"," ",116],["T_VARIABLE","$this",116],["T_OBJECT_OPERATOR","->",116],["T_STRING","_prepareHistoryItem",116],"(",["T_WHITESPACE","\n                    ",116],["T_VARIABLE","$this",117],["T_OBJECT_OPERATOR","->",117],["T_STRING","__",117],"(",["T_CONSTANT_ENCAPSED_STRING","'Invoice #%s comment added'",117],",",["T_WHITESPACE"," ",117],["T_VARIABLE","$_invoice",117],["T_OBJECT_OPERATOR","->",117],["T_STRING","getIncrementId",117],"(",")",")",",",["T_WHITESPACE","\n                    ",117],["T_VARIABLE","$_comment",118],["T_OBJECT_OPERATOR","->",118],["T_STRING","getIsCustomerNotified",118],"(",")",",",["T_WHITESPACE","\n                    ",118],["T_VARIABLE","$_comment",119],["T_OBJECT_OPERATOR","->",119],["T_STRING","getCreatedAtDate",119],"(",")",",",["T_WHITESPACE","\n                    ",119],["T_VARIABLE","$_comment",120],["T_OBJECT_OPERATOR","->",120],["T_STRING","getComment",120],"(",")",["T_WHITESPACE","\n                ",120],")",";",["T_WHITESPACE","\n            ",121],"}",["T_WHITESPACE","\n        ",122],"}",["T_WHITESPACE","\n\n        ",123],["T_FOREACH","foreach",125],["T_WHITESPACE"," ",125],"(",["T_VARIABLE","$order",125],["T_OBJECT_OPERATOR","->",125],["T_STRING","getTracksCollection",125],"(",")",["T_WHITESPACE"," ",125],["T_AS","as",125],["T_WHITESPACE"," ",125],["T_VARIABLE","$_track",125],")","{",["T_WHITESPACE","\n            ",125],["T_VARIABLE","$history",126],"[","]",["T_WHITESPACE"," ",126],"=",["T_WHITESPACE"," ",126],["T_VARIABLE","$this",126],["T_OBJECT_OPERATOR","->",126],["T_STRING","_prepareHistoryItem",126],"(",["T_WHITESPACE","\n                ",126],["T_VARIABLE","$this",127],["T_OBJECT_OPERATOR","->",127],["T_STRING","__",127],"(",["T_CONSTANT_ENCAPSED_STRING","'Tracking number %s for %s assigned'",127],",",["T_WHITESPACE"," ",127],["T_VARIABLE","$_track",127],["T_OBJECT_OPERATOR","->",127],["T_STRING","getNumber",127],"(",")",",",["T_WHITESPACE"," ",127],["T_VARIABLE","$_track",127],["T_OBJECT_OPERATOR","->",127],["T_STRING","getTitle",127],"(",")",")",",",["T_WHITESPACE","\n                ",127],["T_STRING","false",128],",",["T_WHITESPACE","\n                ",128],["T_VARIABLE","$_track",129],["T_OBJECT_OPERATOR","->",129],["T_STRING","getCreatedAtDate",129],"(",")",["T_WHITESPACE","\n            ",129],")",";",["T_WHITESPACE","\n        ",130],"}",["T_WHITESPACE","\n\n        ",131],["T_STRING","usort",133],"(",["T_VARIABLE","$history",133],",",["T_WHITESPACE"," ",133],["T_ARRAY","array",133],"(",["T_CLASS_C","__CLASS__",133],",",["T_WHITESPACE"," ",133],["T_CONSTANT_ENCAPSED_STRING","\"_sortHistoryByTimestamp\"",133],")",")",";",["T_WHITESPACE","\n        ",133],["T_RETURN","return",134],["T_WHITESPACE"," ",134],["T_VARIABLE","$history",134],";",["T_WHITESPACE","\n    ",134],"}",["T_WHITESPACE","\n\n    ",135],["T_DOC_COMMENT","\/**\n     * Status history date\/datetime getter\n     *\n     * @param array $item\n     * @param string $dateType\n     * @param string $format\n     * @return string\n     *\/",137],["T_WHITESPACE","\n    ",144],["T_PUBLIC","public",145],["T_WHITESPACE"," ",145],["T_FUNCTION","function",145],["T_WHITESPACE"," ",145],["T_STRING","getItemCreatedAt",145],"(",["T_ARRAY","array",145],["T_WHITESPACE"," ",145],["T_VARIABLE","$item",145],",",["T_WHITESPACE"," ",145],["T_VARIABLE","$dateType",145],["T_WHITESPACE"," ",145],"=",["T_WHITESPACE"," ",145],["T_CONSTANT_ENCAPSED_STRING","'date'",145],",",["T_WHITESPACE"," ",145],["T_VARIABLE","$format",145],["T_WHITESPACE"," ",145],"=",["T_WHITESPACE"," ",145],["T_CONSTANT_ENCAPSED_STRING","'medium'",145],")",["T_WHITESPACE","\n    ",145],"{",["T_WHITESPACE","\n        ",146],["T_IF","if",147],["T_WHITESPACE"," ",147],"(","!",["T_ISSET","isset",147],"(",["T_VARIABLE","$item",147],"[",["T_CONSTANT_ENCAPSED_STRING","'created_at'",147],"]",")",")",["T_WHITESPACE"," ",147],"{",["T_WHITESPACE","\n            ",147],["T_RETURN","return",148],["T_WHITESPACE"," ",148],["T_CONSTANT_ENCAPSED_STRING","''",148],";",["T_WHITESPACE","\n        ",148],"}",["T_WHITESPACE","\n        ",149],["T_IF","if",150],["T_WHITESPACE"," ",150],"(",["T_CONSTANT_ENCAPSED_STRING","'date'",150],["T_WHITESPACE"," ",150],["T_IS_IDENTICAL","===",150],["T_WHITESPACE"," ",150],["T_VARIABLE","$dateType",150],")",["T_WHITESPACE"," ",150],"{",["T_WHITESPACE","\n            ",150],["T_RETURN","return",151],["T_WHITESPACE"," ",151],["T_VARIABLE","$this",151],["T_OBJECT_OPERATOR","->",151],["T_STRING","helper",151],"(",["T_CONSTANT_ENCAPSED_STRING","'core'",151],")",["T_OBJECT_OPERATOR","->",151],["T_STRING","formatDate",151],"(",["T_VARIABLE","$item",151],"[",["T_CONSTANT_ENCAPSED_STRING","'created_at'",151],"]",",",["T_WHITESPACE"," ",151],["T_VARIABLE","$format",151],")",";",["T_WHITESPACE","\n        ",151],"}",["T_WHITESPACE","\n        ",152],["T_RETURN","return",153],["T_WHITESPACE"," ",153],["T_VARIABLE","$this",153],["T_OBJECT_OPERATOR","->",153],["T_STRING","helper",153],"(",["T_CONSTANT_ENCAPSED_STRING","'core'",153],")",["T_OBJECT_OPERATOR","->",153],["T_STRING","formatTime",153],"(",["T_VARIABLE","$item",153],"[",["T_CONSTANT_ENCAPSED_STRING","'created_at'",153],"]",",",["T_WHITESPACE"," ",153],["T_VARIABLE","$format",153],")",";",["T_WHITESPACE","\n    ",153],"}",["T_WHITESPACE","\n\n    ",154],["T_DOC_COMMENT","\/**\n     * Status history item title getter\n     *\n     * @param array $item\n     * @return string\n     *\/",156],["T_WHITESPACE","\n    ",161],["T_PUBLIC","public",162],["T_WHITESPACE"," ",162],["T_FUNCTION","function",162],["T_WHITESPACE"," ",162],["T_STRING","getItemTitle",162],"(",["T_ARRAY","array",162],["T_WHITESPACE"," ",162],["T_VARIABLE","$item",162],")",["T_WHITESPACE","\n    ",162],"{",["T_WHITESPACE","\n        ",163],["T_RETURN","return",164],["T_WHITESPACE"," ",164],"(",["T_ISSET","isset",164],"(",["T_VARIABLE","$item",164],"[",["T_CONSTANT_ENCAPSED_STRING","'title'",164],"]",")",["T_WHITESPACE"," ",164],"?",["T_WHITESPACE"," ",164],["T_VARIABLE","$this",164],["T_OBJECT_OPERATOR","->",164],["T_STRING","escapeHtml",164],"(",["T_VARIABLE","$item",164],"[",["T_CONSTANT_ENCAPSED_STRING","'title'",164],"]",")",["T_WHITESPACE"," ",164],":",["T_WHITESPACE"," ",164],["T_CONSTANT_ENCAPSED_STRING","''",164],")",";",["T_WHITESPACE","\n    ",164],"}",["T_WHITESPACE","\n\n    ",165],["T_DOC_COMMENT","\/**\n     * Check whether status history comment is with customer notification\n     *\n     * @param array $item\n     * @param boolean $isSimpleCheck\n     * @return bool\n     *\/",167],["T_WHITESPACE","\n    ",173],["T_PUBLIC","public",174],["T_WHITESPACE"," ",174],["T_FUNCTION","function",174],["T_WHITESPACE"," ",174],["T_STRING","isItemNotified",174],"(",["T_ARRAY","array",174],["T_WHITESPACE"," ",174],["T_VARIABLE","$item",174],",",["T_WHITESPACE"," ",174],["T_VARIABLE","$isSimpleCheck",174],["T_WHITESPACE"," ",174],"=",["T_WHITESPACE"," ",174],["T_STRING","true",174],")",["T_WHITESPACE","\n    ",174],"{",["T_WHITESPACE","\n        ",175],["T_IF","if",176],["T_WHITESPACE"," ",176],"(",["T_VARIABLE","$isSimpleCheck",176],")",["T_WHITESPACE"," ",176],"{",["T_WHITESPACE","\n            ",176],["T_RETURN","return",177],["T_WHITESPACE"," ",177],"!",["T_EMPTY","empty",177],"(",["T_VARIABLE","$item",177],"[",["T_CONSTANT_ENCAPSED_STRING","'notified'",177],"]",")",";",["T_WHITESPACE","\n        ",177],"}",["T_WHITESPACE","\n        ",178],["T_RETURN","return",179],["T_WHITESPACE"," ",179],["T_ISSET","isset",179],"(",["T_VARIABLE","$item",179],"[",["T_CONSTANT_ENCAPSED_STRING","'notified'",179],"]",")",["T_WHITESPACE"," ",179],["T_BOOLEAN_AND","&&",179],["T_WHITESPACE"," ",179],["T_STRING","false",179],["T_WHITESPACE"," ",179],["T_IS_NOT_IDENTICAL","!==",179],["T_WHITESPACE"," ",179],["T_VARIABLE","$item",179],"[",["T_CONSTANT_ENCAPSED_STRING","'notified'",179],"]",";",["T_WHITESPACE","\n    ",179],"}",["T_WHITESPACE","\n\n    ",180],["T_DOC_COMMENT","\/**\n     * Status history item comment getter\n     *\n     * @param array $item\n     * @return string\n     *\/",182],["T_WHITESPACE","\n    ",187],["T_PUBLIC","public",188],["T_WHITESPACE"," ",188],["T_FUNCTION","function",188],["T_WHITESPACE"," ",188],["T_STRING","getItemComment",188],"(",["T_ARRAY","array",188],["T_WHITESPACE"," ",188],["T_VARIABLE","$item",188],")",["T_WHITESPACE","\n    ",188],"{",["T_WHITESPACE","\n        ",189],["T_VARIABLE","$strItemComment",190],["T_WHITESPACE"," ",190],"=",["T_WHITESPACE"," ",190],["T_CONSTANT_ENCAPSED_STRING","''",190],";",["T_WHITESPACE","\n        ",190],["T_IF","if",191],["T_WHITESPACE"," ",191],"(",["T_ISSET","isset",191],"(",["T_VARIABLE","$item",191],"[",["T_CONSTANT_ENCAPSED_STRING","'comment'",191],"]",")",")",["T_WHITESPACE"," ",191],"{",["T_WHITESPACE","\n            ",191],["T_VARIABLE","$allowedTags",192],["T_WHITESPACE"," ",192],"=",["T_WHITESPACE"," ",192],["T_ARRAY","array",192],"(",["T_CONSTANT_ENCAPSED_STRING","'b'",192],",",["T_WHITESPACE"," ",192],["T_CONSTANT_ENCAPSED_STRING","'br'",192],",",["T_WHITESPACE"," ",192],["T_CONSTANT_ENCAPSED_STRING","'strong'",192],",",["T_WHITESPACE"," ",192],["T_CONSTANT_ENCAPSED_STRING","'i'",192],",",["T_WHITESPACE"," ",192],["T_CONSTANT_ENCAPSED_STRING","'u'",192],",",["T_WHITESPACE"," ",192],["T_CONSTANT_ENCAPSED_STRING","'a'",192],")",";",["T_WHITESPACE","\n            ",192],["T_DOC_COMMENT","\/** @var Mage_Adminhtml_Helper_Sales $salesHelper *\/",193],["T_WHITESPACE","\n            ",193],["T_VARIABLE","$salesHelper",194],["T_WHITESPACE"," ",194],"=",["T_WHITESPACE"," ",194],["T_STRING","Mage",194],["T_DOUBLE_COLON","::",194],["T_STRING","helper",194],"(",["T_CONSTANT_ENCAPSED_STRING","'adminhtml\/sales'",194],")",";",["T_WHITESPACE","\n            ",194],["T_VARIABLE","$strItemComment",195],["T_WHITESPACE"," ",195],"=",["T_WHITESPACE"," ",195],["T_VARIABLE","$salesHelper",195],["T_OBJECT_OPERATOR","->",195],["T_STRING","escapeHtmlWithLinks",195],"(",["T_VARIABLE","$item",195],"[",["T_CONSTANT_ENCAPSED_STRING","'comment'",195],"]",",",["T_WHITESPACE"," ",195],["T_VARIABLE","$allowedTags",195],")",";",["T_WHITESPACE","\n        ",195],"}",["T_WHITESPACE","\n        ",196],["T_RETURN","return",197],["T_WHITESPACE"," ",197],["T_VARIABLE","$strItemComment",197],";",["T_WHITESPACE","\n    ",197],"}",["T_WHITESPACE","\n\n    ",198],["T_DOC_COMMENT","\/**\n     * Map history items as array\n     *\n     * @param string $label\n     * @param bool $notified\n     * @param Zend_Date $created\n     * @param string $comment\n     * @return array\n     *\/",200],["T_WHITESPACE","\n    ",208],["T_PROTECTED","protected",209],["T_WHITESPACE"," ",209],["T_FUNCTION","function",209],["T_WHITESPACE"," ",209],["T_STRING","_prepareHistoryItem",209],"(",["T_VARIABLE","$label",209],",",["T_WHITESPACE"," ",209],["T_VARIABLE","$notified",209],",",["T_WHITESPACE"," ",209],["T_VARIABLE","$created",209],",",["T_WHITESPACE"," ",209],["T_VARIABLE","$comment",209],["T_WHITESPACE"," ",209],"=",["T_WHITESPACE"," ",209],["T_CONSTANT_ENCAPSED_STRING","''",209],")",["T_WHITESPACE","\n    ",209],"{",["T_WHITESPACE","\n        ",210],["T_RETURN","return",211],["T_WHITESPACE"," ",211],["T_ARRAY","array",211],"(",["T_WHITESPACE","\n            ",211],["T_CONSTANT_ENCAPSED_STRING","'title'",212],["T_WHITESPACE","      ",212],["T_DOUBLE_ARROW","=>",212],["T_WHITESPACE"," ",212],["T_VARIABLE","$label",212],",",["T_WHITESPACE","\n            ",212],["T_CONSTANT_ENCAPSED_STRING","'notified'",213],["T_WHITESPACE","   ",213],["T_DOUBLE_ARROW","=>",213],["T_WHITESPACE"," ",213],["T_VARIABLE","$notified",213],",",["T_WHITESPACE","\n            ",213],["T_CONSTANT_ENCAPSED_STRING","'comment'",214],["T_WHITESPACE","    ",214],["T_DOUBLE_ARROW","=>",214],["T_WHITESPACE"," ",214],["T_VARIABLE","$comment",214],",",["T_WHITESPACE","\n            ",214],["T_CONSTANT_ENCAPSED_STRING","'created_at'",215],["T_WHITESPACE"," ",215],["T_DOUBLE_ARROW","=>",215],["T_WHITESPACE"," ",215],["T_VARIABLE","$created",215],["T_WHITESPACE","\n        ",215],")",";",["T_WHITESPACE","\n    ",216],"}",["T_WHITESPACE","\n\n    ",217],["T_DOC_COMMENT","\/**\n     * Get Tab Label\n     *\n     * @return string\n     *\/",219],["T_WHITESPACE","\n    ",223],["T_PUBLIC","public",224],["T_WHITESPACE"," ",224],["T_FUNCTION","function",224],["T_WHITESPACE"," ",224],["T_STRING","getTabLabel",224],"(",")",["T_WHITESPACE","\n    ",224],"{",["T_WHITESPACE","\n        ",225],["T_RETURN","return",226],["T_WHITESPACE"," ",226],["T_STRING","Mage",226],["T_DOUBLE_COLON","::",226],["T_STRING","helper",226],"(",["T_CONSTANT_ENCAPSED_STRING","'sales'",226],")",["T_OBJECT_OPERATOR","->",226],["T_STRING","__",226],"(",["T_CONSTANT_ENCAPSED_STRING","'Comments History'",226],")",";",["T_WHITESPACE","\n    ",226],"}",["T_WHITESPACE","\n\n    ",227],["T_DOC_COMMENT","\/**\n     * Get Tab Title\n     *\n     * @return string\n     *\/",229],["T_WHITESPACE","\n    ",233],["T_PUBLIC","public",234],["T_WHITESPACE"," ",234],["T_FUNCTION","function",234],["T_WHITESPACE"," ",234],["T_STRING","getTabTitle",234],"(",")",["T_WHITESPACE","\n    ",234],"{",["T_WHITESPACE","\n        ",235],["T_RETURN","return",236],["T_WHITESPACE"," ",236],["T_STRING","Mage",236],["T_DOUBLE_COLON","::",236],["T_STRING","helper",236],"(",["T_CONSTANT_ENCAPSED_STRING","'sales'",236],")",["T_OBJECT_OPERATOR","->",236],["T_STRING","__",236],"(",["T_CONSTANT_ENCAPSED_STRING","'Order History'",236],")",";",["T_WHITESPACE","\n    ",236],"}",["T_WHITESPACE","\n\n    ",237],["T_DOC_COMMENT","\/**\n     * Get Tab Class\n     *\n     * @return string\n     *\/",239],["T_WHITESPACE","\n    ",243],["T_PUBLIC","public",244],["T_WHITESPACE"," ",244],["T_FUNCTION","function",244],["T_WHITESPACE"," ",244],["T_STRING","getTabClass",244],"(",")",["T_WHITESPACE","\n    ",244],"{",["T_WHITESPACE","\n        ",245],["T_RETURN","return",246],["T_WHITESPACE"," ",246],["T_CONSTANT_ENCAPSED_STRING","'ajax only'",246],";",["T_WHITESPACE","\n    ",246],"}",["T_WHITESPACE","\n\n    ",247],["T_DOC_COMMENT","\/**\n     * Get Class\n     *\n     * @return string\n     *\/",249],["T_WHITESPACE","\n    ",253],["T_PUBLIC","public",254],["T_WHITESPACE"," ",254],["T_FUNCTION","function",254],["T_WHITESPACE"," ",254],["T_STRING","getClass",254],"(",")",["T_WHITESPACE","\n    ",254],"{",["T_WHITESPACE","\n        ",255],["T_RETURN","return",256],["T_WHITESPACE"," ",256],["T_VARIABLE","$this",256],["T_OBJECT_OPERATOR","->",256],["T_STRING","getTabClass",256],"(",")",";",["T_WHITESPACE","\n    ",256],"}",["T_WHITESPACE","\n\n    ",257],["T_DOC_COMMENT","\/**\n     * Get Tab Url\n     *\n     * @return string\n     *\/",259],["T_WHITESPACE","\n    ",263],["T_PUBLIC","public",264],["T_WHITESPACE"," ",264],["T_FUNCTION","function",264],["T_WHITESPACE"," ",264],["T_STRING","getTabUrl",264],"(",")",["T_WHITESPACE","\n    ",264],"{",["T_WHITESPACE","\n        ",265],["T_RETURN","return",266],["T_WHITESPACE"," ",266],["T_VARIABLE","$this",266],["T_OBJECT_OPERATOR","->",266],["T_STRING","getUrl",266],"(",["T_CONSTANT_ENCAPSED_STRING","'*\/*\/commentsHistory'",266],",",["T_WHITESPACE"," ",266],["T_ARRAY","array",266],"(",["T_CONSTANT_ENCAPSED_STRING","'_current'",266],["T_WHITESPACE"," ",266],["T_DOUBLE_ARROW","=>",266],["T_WHITESPACE"," ",266],["T_STRING","true",266],")",")",";",["T_WHITESPACE","\n    ",266],"}",["T_WHITESPACE","\n\n    ",267],["T_DOC_COMMENT","\/**\n     * Can Show Tab\n     *\n     * @return boolean\n     *\/",269],["T_WHITESPACE","\n    ",273],["T_PUBLIC","public",274],["T_WHITESPACE"," ",274],["T_FUNCTION","function",274],["T_WHITESPACE"," ",274],["T_STRING","canShowTab",274],"(",")",["T_WHITESPACE","\n    ",274],"{",["T_WHITESPACE","\n        ",275],["T_RETURN","return",276],["T_WHITESPACE"," ",276],["T_STRING","true",276],";",["T_WHITESPACE","\n    ",276],"}",["T_WHITESPACE","\n\n    ",277],["T_DOC_COMMENT","\/**\n     * Is Hidden\n     *\n     * @return boolean\n     *\/",279],["T_WHITESPACE","\n    ",283],["T_PUBLIC","public",284],["T_WHITESPACE"," ",284],["T_FUNCTION","function",284],["T_WHITESPACE"," ",284],["T_STRING","isHidden",284],"(",")",["T_WHITESPACE","\n    ",284],"{",["T_WHITESPACE","\n        ",285],["T_RETURN","return",286],["T_WHITESPACE"," ",286],["T_STRING","false",286],";",["T_WHITESPACE","\n    ",286],"}",["T_WHITESPACE","\n\n    ",287],["T_DOC_COMMENT","\/**\n     * Customer Notification Applicable check method\n     *\n     * @param array $historyItem\n     * @return boolean\n     *\/",289],["T_WHITESPACE","\n    ",294],["T_PUBLIC","public",295],["T_WHITESPACE"," ",295],["T_FUNCTION","function",295],["T_WHITESPACE"," ",295],["T_STRING","isCustomerNotificationNotApplicable",295],"(",["T_VARIABLE","$historyItem",295],")",["T_WHITESPACE","\n    ",295],"{",["T_WHITESPACE","\n        ",296],["T_RETURN","return",297],["T_WHITESPACE"," ",297],["T_VARIABLE","$historyItem",297],"[",["T_CONSTANT_ENCAPSED_STRING","'notified'",297],"]",["T_WHITESPACE"," ",297],["T_IS_EQUAL","==",297],["T_WHITESPACE"," ",297],["T_STRING","Mage_Sales_Model_Order_Status_History",297],["T_DOUBLE_COLON","::",297],["T_STRING","CUSTOMER_NOTIFICATION_NOT_APPLICABLE",297],";",["T_WHITESPACE","\n    ",297],"}",["T_WHITESPACE","\n\n    ",298],["T_DOC_COMMENT","\/**\n     * Comparison For Sorting History By Timestamp\n     *\n     * @param mixed $a\n     * @param mixed $b\n     * @return int\n     *\/",300],["T_WHITESPACE","\n    ",306],["T_PRIVATE","private",307],["T_WHITESPACE"," ",307],["T_STATIC","static",307],["T_WHITESPACE"," ",307],["T_FUNCTION","function",307],["T_WHITESPACE"," ",307],["T_STRING","_sortHistoryByTimestamp",307],"(",["T_VARIABLE","$a",307],",",["T_WHITESPACE"," ",307],["T_VARIABLE","$b",307],")",["T_WHITESPACE","\n    ",307],"{",["T_WHITESPACE","\n        ",308],["T_VARIABLE","$createdAtA",309],["T_WHITESPACE"," ",309],"=",["T_WHITESPACE"," ",309],["T_VARIABLE","$a",309],"[",["T_CONSTANT_ENCAPSED_STRING","'created_at'",309],"]",";",["T_WHITESPACE","\n        ",309],["T_VARIABLE","$createdAtB",310],["T_WHITESPACE"," ",310],"=",["T_WHITESPACE"," ",310],["T_VARIABLE","$b",310],"[",["T_CONSTANT_ENCAPSED_STRING","'created_at'",310],"]",";",["T_WHITESPACE","\n\n        ",310],["T_DOC_COMMENT","\/** @var $createdAta Zend_Date *\/",312],["T_WHITESPACE","\n        ",312],["T_IF","if",313],["T_WHITESPACE"," ",313],"(",["T_VARIABLE","$createdAtA",313],["T_OBJECT_OPERATOR","->",313],["T_STRING","getTimestamp",313],"(",")",["T_WHITESPACE"," ",313],["T_IS_EQUAL","==",313],["T_WHITESPACE"," ",313],["T_VARIABLE","$createdAtB",313],["T_OBJECT_OPERATOR","->",313],["T_STRING","getTimestamp",313],"(",")",")",["T_WHITESPACE"," ",313],"{",["T_WHITESPACE","\n            ",313],["T_RETURN","return",314],["T_WHITESPACE"," ",314],["T_LNUMBER","0",314],";",["T_WHITESPACE","\n        ",314],"}",["T_WHITESPACE","\n        ",315],["T_RETURN","return",316],["T_WHITESPACE"," ",316],"(",["T_VARIABLE","$createdAtA",316],["T_OBJECT_OPERATOR","->",316],["T_STRING","getTimestamp",316],"(",")",["T_WHITESPACE"," ",316],"<",["T_WHITESPACE"," ",316],["T_VARIABLE","$createdAtB",316],["T_OBJECT_OPERATOR","->",316],["T_STRING","getTimestamp",316],"(",")",")",["T_WHITESPACE"," ",316],"?",["T_WHITESPACE"," ",316],"-",["T_LNUMBER","1",316],["T_WHITESPACE"," ",316],":",["T_WHITESPACE"," ",316],["T_LNUMBER","1",316],";",["T_WHITESPACE","\n    ",316],"}",["T_WHITESPACE","\n",317],"}",["T_WHITESPACE","\n",318]]
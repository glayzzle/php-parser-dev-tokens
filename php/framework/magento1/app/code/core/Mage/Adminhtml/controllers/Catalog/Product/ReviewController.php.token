[["T_OPEN_TAG","<?php\n",1],["T_DOC_COMMENT","\/**\n * Magento\n *\n * NOTICE OF LICENSE\n *\n * This source file is subject to the Open Software License (OSL 3.0)\n * that is bundled with this package in the file LICENSE.txt.\n * It is also available through the world-wide-web at this URL:\n * http:\/\/opensource.org\/licenses\/osl-3.0.php\n * If you did not receive a copy of the license and are unable to\n * obtain it through the world-wide-web, please send an email\n * to license@magento.com so we can send you a copy immediately.\n *\n * DISCLAIMER\n *\n * Do not edit or add to this file if you wish to upgrade Magento to newer\n * versions in the future. If you wish to customize Magento for your\n * needs please refer to http:\/\/www.magento.com for more information.\n *\n * @category    Mage\n * @package     Mage_Adminhtml\n * @copyright  Copyright (c) 2006-2016 X.commerce, Inc. and affiliates (http:\/\/www.magento.com)\n * @license    http:\/\/opensource.org\/licenses\/osl-3.0.php  Open Software License (OSL 3.0)\n *\/",2],["T_WHITESPACE","\n\n",25],["T_DOC_COMMENT","\/**\n * Reviews admin controller\n *\n * @category   Mage\n * @package    Mage_Adminhtml\n * @author      Magento Core Team <core@magentocommerce.com>\n *\/",27],["T_WHITESPACE","\n\n",33],["T_CLASS","class",35],["T_WHITESPACE"," ",35],["T_STRING","Mage_Adminhtml_Catalog_Product_ReviewController",35],["T_WHITESPACE"," ",35],["T_EXTENDS","extends",35],["T_WHITESPACE"," ",35],["T_STRING","Mage_Adminhtml_Controller_Action",35],["T_WHITESPACE","\n",35],"{",["T_WHITESPACE","\n    ",36],["T_DOC_COMMENT","\/**\n     * Array of actions which can be processed without secret key validation\n     *\n     * @var array\n     *\/",37],["T_WHITESPACE","\n    ",41],["T_PROTECTED","protected",42],["T_WHITESPACE"," ",42],["T_VARIABLE","$_publicActions",42],["T_WHITESPACE"," ",42],"=",["T_WHITESPACE"," ",42],["T_ARRAY","array",42],"(",["T_CONSTANT_ENCAPSED_STRING","'edit'",42],")",";",["T_WHITESPACE","\n\n    ",42],["T_PUBLIC","public",44],["T_WHITESPACE"," ",44],["T_FUNCTION","function",44],["T_WHITESPACE"," ",44],["T_STRING","indexAction",44],"(",")",["T_WHITESPACE","\n    ",44],"{",["T_WHITESPACE","\n        ",45],["T_VARIABLE","$this",46],["T_OBJECT_OPERATOR","->",46],["T_STRING","_title",46],"(",["T_VARIABLE","$this",46],["T_OBJECT_OPERATOR","->",46],["T_STRING","__",46],"(",["T_CONSTANT_ENCAPSED_STRING","'Catalog'",46],")",")",["T_WHITESPACE","\n             ",46],["T_OBJECT_OPERATOR","->",47],["T_STRING","_title",47],"(",["T_VARIABLE","$this",47],["T_OBJECT_OPERATOR","->",47],["T_STRING","__",47],"(",["T_CONSTANT_ENCAPSED_STRING","'Reviews and Ratings'",47],")",")",["T_WHITESPACE","\n             ",47],["T_OBJECT_OPERATOR","->",48],["T_STRING","_title",48],"(",["T_VARIABLE","$this",48],["T_OBJECT_OPERATOR","->",48],["T_STRING","__",48],"(",["T_CONSTANT_ENCAPSED_STRING","'Customer Reviews'",48],")",")",";",["T_WHITESPACE","\n\n        ",48],["T_VARIABLE","$this",50],["T_OBJECT_OPERATOR","->",50],["T_STRING","_title",50],"(",["T_VARIABLE","$this",50],["T_OBJECT_OPERATOR","->",50],["T_STRING","__",50],"(",["T_CONSTANT_ENCAPSED_STRING","'All Reviews'",50],")",")",";",["T_WHITESPACE","\n\n        ",50],["T_IF","if",52],["T_WHITESPACE"," ",52],"(",["T_VARIABLE","$this",52],["T_OBJECT_OPERATOR","->",52],["T_STRING","getRequest",52],"(",")",["T_OBJECT_OPERATOR","->",52],["T_STRING","getParam",52],"(",["T_CONSTANT_ENCAPSED_STRING","'ajax'",52],")",")",["T_WHITESPACE"," ",52],"{",["T_WHITESPACE","\n            ",52],["T_RETURN","return",53],["T_WHITESPACE"," ",53],["T_VARIABLE","$this",53],["T_OBJECT_OPERATOR","->",53],["T_STRING","_forward",53],"(",["T_CONSTANT_ENCAPSED_STRING","'reviewGrid'",53],")",";",["T_WHITESPACE","\n        ",53],"}",["T_WHITESPACE","\n\n        ",54],["T_VARIABLE","$this",56],["T_OBJECT_OPERATOR","->",56],["T_STRING","loadLayout",56],"(",")",";",["T_WHITESPACE","\n        ",56],["T_VARIABLE","$this",57],["T_OBJECT_OPERATOR","->",57],["T_STRING","_setActiveMenu",57],"(",["T_CONSTANT_ENCAPSED_STRING","'catalog\/review'",57],")",";",["T_WHITESPACE","\n\n        ",57],["T_VARIABLE","$this",59],["T_OBJECT_OPERATOR","->",59],["T_STRING","_addContent",59],"(",["T_VARIABLE","$this",59],["T_OBJECT_OPERATOR","->",59],["T_STRING","getLayout",59],"(",")",["T_OBJECT_OPERATOR","->",59],["T_STRING","createBlock",59],"(",["T_CONSTANT_ENCAPSED_STRING","'adminhtml\/review_main'",59],")",")",";",["T_WHITESPACE","\n\n        ",59],["T_VARIABLE","$this",61],["T_OBJECT_OPERATOR","->",61],["T_STRING","renderLayout",61],"(",")",";",["T_WHITESPACE","\n    ",61],"}",["T_WHITESPACE","\n\n    ",62],["T_PUBLIC","public",64],["T_WHITESPACE"," ",64],["T_FUNCTION","function",64],["T_WHITESPACE"," ",64],["T_STRING","pendingAction",64],"(",")",["T_WHITESPACE","\n    ",64],"{",["T_WHITESPACE","\n        ",65],["T_VARIABLE","$this",66],["T_OBJECT_OPERATOR","->",66],["T_STRING","_title",66],"(",["T_VARIABLE","$this",66],["T_OBJECT_OPERATOR","->",66],["T_STRING","__",66],"(",["T_CONSTANT_ENCAPSED_STRING","'Catalog'",66],")",")",["T_WHITESPACE","\n             ",66],["T_OBJECT_OPERATOR","->",67],["T_STRING","_title",67],"(",["T_VARIABLE","$this",67],["T_OBJECT_OPERATOR","->",67],["T_STRING","__",67],"(",["T_CONSTANT_ENCAPSED_STRING","'Reviews and Ratings'",67],")",")",["T_WHITESPACE","\n             ",67],["T_OBJECT_OPERATOR","->",68],["T_STRING","_title",68],"(",["T_VARIABLE","$this",68],["T_OBJECT_OPERATOR","->",68],["T_STRING","__",68],"(",["T_CONSTANT_ENCAPSED_STRING","'Customer Reviews'",68],")",")",";",["T_WHITESPACE","\n\n        ",68],["T_VARIABLE","$this",70],["T_OBJECT_OPERATOR","->",70],["T_STRING","_title",70],"(",["T_VARIABLE","$this",70],["T_OBJECT_OPERATOR","->",70],["T_STRING","__",70],"(",["T_CONSTANT_ENCAPSED_STRING","'Pending Reviews'",70],")",")",";",["T_WHITESPACE","\n\n        ",70],["T_IF","if",72],["T_WHITESPACE"," ",72],"(",["T_VARIABLE","$this",72],["T_OBJECT_OPERATOR","->",72],["T_STRING","getRequest",72],"(",")",["T_OBJECT_OPERATOR","->",72],["T_STRING","getParam",72],"(",["T_CONSTANT_ENCAPSED_STRING","'ajax'",72],")",")",["T_WHITESPACE"," ",72],"{",["T_WHITESPACE","\n            ",72],["T_STRING","Mage",73],["T_DOUBLE_COLON","::",73],["T_STRING","register",73],"(",["T_CONSTANT_ENCAPSED_STRING","'usePendingFilter'",73],",",["T_WHITESPACE"," ",73],["T_STRING","true",73],")",";",["T_WHITESPACE","\n            ",73],["T_RETURN","return",74],["T_WHITESPACE"," ",74],["T_VARIABLE","$this",74],["T_OBJECT_OPERATOR","->",74],["T_STRING","_forward",74],"(",["T_CONSTANT_ENCAPSED_STRING","'reviewGrid'",74],")",";",["T_WHITESPACE","\n        ",74],"}",["T_WHITESPACE","\n\n        ",75],["T_VARIABLE","$this",77],["T_OBJECT_OPERATOR","->",77],["T_STRING","loadLayout",77],"(",")",";",["T_WHITESPACE","\n        ",77],["T_VARIABLE","$this",78],["T_OBJECT_OPERATOR","->",78],["T_STRING","_setActiveMenu",78],"(",["T_CONSTANT_ENCAPSED_STRING","'catalog\/review'",78],")",";",["T_WHITESPACE","\n\n        ",78],["T_STRING","Mage",80],["T_DOUBLE_COLON","::",80],["T_STRING","register",80],"(",["T_CONSTANT_ENCAPSED_STRING","'usePendingFilter'",80],",",["T_WHITESPACE"," ",80],["T_STRING","true",80],")",";",["T_WHITESPACE","\n        ",80],["T_VARIABLE","$this",81],["T_OBJECT_OPERATOR","->",81],["T_STRING","_addContent",81],"(",["T_VARIABLE","$this",81],["T_OBJECT_OPERATOR","->",81],["T_STRING","getLayout",81],"(",")",["T_OBJECT_OPERATOR","->",81],["T_STRING","createBlock",81],"(",["T_CONSTANT_ENCAPSED_STRING","'adminhtml\/review_main'",81],")",")",";",["T_WHITESPACE","\n\n        ",81],["T_VARIABLE","$this",83],["T_OBJECT_OPERATOR","->",83],["T_STRING","renderLayout",83],"(",")",";",["T_WHITESPACE","\n    ",83],"}",["T_WHITESPACE","\n\n    ",84],["T_PUBLIC","public",86],["T_WHITESPACE"," ",86],["T_FUNCTION","function",86],["T_WHITESPACE"," ",86],["T_STRING","editAction",86],"(",")",["T_WHITESPACE","\n    ",86],"{",["T_WHITESPACE","\n        ",87],["T_VARIABLE","$this",88],["T_OBJECT_OPERATOR","->",88],["T_STRING","_title",88],"(",["T_VARIABLE","$this",88],["T_OBJECT_OPERATOR","->",88],["T_STRING","__",88],"(",["T_CONSTANT_ENCAPSED_STRING","'Catalog'",88],")",")",["T_WHITESPACE","\n             ",88],["T_OBJECT_OPERATOR","->",89],["T_STRING","_title",89],"(",["T_VARIABLE","$this",89],["T_OBJECT_OPERATOR","->",89],["T_STRING","__",89],"(",["T_CONSTANT_ENCAPSED_STRING","'Reviews and Ratings'",89],")",")",["T_WHITESPACE","\n             ",89],["T_OBJECT_OPERATOR","->",90],["T_STRING","_title",90],"(",["T_VARIABLE","$this",90],["T_OBJECT_OPERATOR","->",90],["T_STRING","__",90],"(",["T_CONSTANT_ENCAPSED_STRING","'Customer Reviews'",90],")",")",";",["T_WHITESPACE","\n\n        ",90],["T_VARIABLE","$this",92],["T_OBJECT_OPERATOR","->",92],["T_STRING","_title",92],"(",["T_VARIABLE","$this",92],["T_OBJECT_OPERATOR","->",92],["T_STRING","__",92],"(",["T_CONSTANT_ENCAPSED_STRING","'Edit Review'",92],")",")",";",["T_WHITESPACE","\n\n        ",92],["T_VARIABLE","$this",94],["T_OBJECT_OPERATOR","->",94],["T_STRING","loadLayout",94],"(",")",";",["T_WHITESPACE","\n        ",94],["T_VARIABLE","$this",95],["T_OBJECT_OPERATOR","->",95],["T_STRING","_setActiveMenu",95],"(",["T_CONSTANT_ENCAPSED_STRING","'catalog\/review'",95],")",";",["T_WHITESPACE","\n\n        ",95],["T_VARIABLE","$this",97],["T_OBJECT_OPERATOR","->",97],["T_STRING","_addContent",97],"(",["T_VARIABLE","$this",97],["T_OBJECT_OPERATOR","->",97],["T_STRING","getLayout",97],"(",")",["T_OBJECT_OPERATOR","->",97],["T_STRING","createBlock",97],"(",["T_CONSTANT_ENCAPSED_STRING","'adminhtml\/review_edit'",97],")",")",";",["T_WHITESPACE","\n\n        ",97],["T_VARIABLE","$this",99],["T_OBJECT_OPERATOR","->",99],["T_STRING","renderLayout",99],"(",")",";",["T_WHITESPACE","\n    ",99],"}",["T_WHITESPACE","\n\n    ",100],["T_PUBLIC","public",102],["T_WHITESPACE"," ",102],["T_FUNCTION","function",102],["T_WHITESPACE"," ",102],["T_STRING","newAction",102],"(",")",["T_WHITESPACE","\n    ",102],"{",["T_WHITESPACE","\n        ",103],["T_VARIABLE","$this",104],["T_OBJECT_OPERATOR","->",104],["T_STRING","_title",104],"(",["T_VARIABLE","$this",104],["T_OBJECT_OPERATOR","->",104],["T_STRING","__",104],"(",["T_CONSTANT_ENCAPSED_STRING","'Catalog'",104],")",")",["T_WHITESPACE","\n             ",104],["T_OBJECT_OPERATOR","->",105],["T_STRING","_title",105],"(",["T_VARIABLE","$this",105],["T_OBJECT_OPERATOR","->",105],["T_STRING","__",105],"(",["T_CONSTANT_ENCAPSED_STRING","'Reviews and Ratings'",105],")",")",["T_WHITESPACE","\n             ",105],["T_OBJECT_OPERATOR","->",106],["T_STRING","_title",106],"(",["T_VARIABLE","$this",106],["T_OBJECT_OPERATOR","->",106],["T_STRING","__",106],"(",["T_CONSTANT_ENCAPSED_STRING","'Customer Reviews'",106],")",")",";",["T_WHITESPACE","\n\n        ",106],["T_VARIABLE","$this",108],["T_OBJECT_OPERATOR","->",108],["T_STRING","_title",108],"(",["T_VARIABLE","$this",108],["T_OBJECT_OPERATOR","->",108],["T_STRING","__",108],"(",["T_CONSTANT_ENCAPSED_STRING","'New Review'",108],")",")",";",["T_WHITESPACE","\n\n        ",108],["T_VARIABLE","$this",110],["T_OBJECT_OPERATOR","->",110],["T_STRING","loadLayout",110],"(",")",";",["T_WHITESPACE","\n        ",110],["T_VARIABLE","$this",111],["T_OBJECT_OPERATOR","->",111],["T_STRING","_setActiveMenu",111],"(",["T_CONSTANT_ENCAPSED_STRING","'catalog\/review'",111],")",";",["T_WHITESPACE","\n\n        ",111],["T_VARIABLE","$this",113],["T_OBJECT_OPERATOR","->",113],["T_STRING","getLayout",113],"(",")",["T_OBJECT_OPERATOR","->",113],["T_STRING","getBlock",113],"(",["T_CONSTANT_ENCAPSED_STRING","'head'",113],")",["T_OBJECT_OPERATOR","->",113],["T_STRING","setCanLoadExtJs",113],"(",["T_STRING","true",113],")",";",["T_WHITESPACE","\n\n        ",113],["T_VARIABLE","$this",115],["T_OBJECT_OPERATOR","->",115],["T_STRING","_addContent",115],"(",["T_VARIABLE","$this",115],["T_OBJECT_OPERATOR","->",115],["T_STRING","getLayout",115],"(",")",["T_OBJECT_OPERATOR","->",115],["T_STRING","createBlock",115],"(",["T_CONSTANT_ENCAPSED_STRING","'adminhtml\/review_add'",115],")",")",";",["T_WHITESPACE","\n        ",115],["T_VARIABLE","$this",116],["T_OBJECT_OPERATOR","->",116],["T_STRING","_addContent",116],"(",["T_VARIABLE","$this",116],["T_OBJECT_OPERATOR","->",116],["T_STRING","getLayout",116],"(",")",["T_OBJECT_OPERATOR","->",116],["T_STRING","createBlock",116],"(",["T_CONSTANT_ENCAPSED_STRING","'adminhtml\/review_product_grid'",116],")",")",";",["T_WHITESPACE","\n\n        ",116],["T_VARIABLE","$this",118],["T_OBJECT_OPERATOR","->",118],["T_STRING","renderLayout",118],"(",")",";",["T_WHITESPACE","\n    ",118],"}",["T_WHITESPACE","\n\n    ",119],["T_PUBLIC","public",121],["T_WHITESPACE"," ",121],["T_FUNCTION","function",121],["T_WHITESPACE"," ",121],["T_STRING","saveAction",121],"(",")",["T_WHITESPACE","\n    ",121],"{",["T_WHITESPACE","\n        ",122],["T_IF","if",123],["T_WHITESPACE"," ",123],"(","(",["T_VARIABLE","$data",123],["T_WHITESPACE"," ",123],"=",["T_WHITESPACE"," ",123],["T_VARIABLE","$this",123],["T_OBJECT_OPERATOR","->",123],["T_STRING","getRequest",123],"(",")",["T_OBJECT_OPERATOR","->",123],["T_STRING","getPost",123],"(",")",")",["T_WHITESPACE"," ",123],["T_BOOLEAN_AND","&&",123],["T_WHITESPACE"," ",123],"(",["T_VARIABLE","$reviewId",123],["T_WHITESPACE"," ",123],"=",["T_WHITESPACE"," ",123],["T_VARIABLE","$this",123],["T_OBJECT_OPERATOR","->",123],["T_STRING","getRequest",123],"(",")",["T_OBJECT_OPERATOR","->",123],["T_STRING","getParam",123],"(",["T_CONSTANT_ENCAPSED_STRING","'id'",123],")",")",")",["T_WHITESPACE"," ",123],"{",["T_WHITESPACE","\n            ",123],["T_VARIABLE","$review",124],["T_WHITESPACE"," ",124],"=",["T_WHITESPACE"," ",124],["T_STRING","Mage",124],["T_DOUBLE_COLON","::",124],["T_STRING","getModel",124],"(",["T_CONSTANT_ENCAPSED_STRING","'review\/review'",124],")",["T_OBJECT_OPERATOR","->",124],["T_STRING","load",124],"(",["T_VARIABLE","$reviewId",124],")",";",["T_WHITESPACE","\n            ",124],["T_VARIABLE","$session",125],["T_WHITESPACE"," ",125],"=",["T_WHITESPACE"," ",125],["T_STRING","Mage",125],["T_DOUBLE_COLON","::",125],["T_STRING","getSingleton",125],"(",["T_CONSTANT_ENCAPSED_STRING","'adminhtml\/session'",125],")",";",["T_WHITESPACE","\n            ",125],["T_IF","if",126],["T_WHITESPACE"," ",126],"(","!",["T_WHITESPACE"," ",126],["T_VARIABLE","$review",126],["T_OBJECT_OPERATOR","->",126],["T_STRING","getId",126],"(",")",")",["T_WHITESPACE"," ",126],"{",["T_WHITESPACE","\n                ",126],["T_VARIABLE","$session",127],["T_OBJECT_OPERATOR","->",127],["T_STRING","addError",127],"(",["T_STRING","Mage",127],["T_DOUBLE_COLON","::",127],["T_STRING","helper",127],"(",["T_CONSTANT_ENCAPSED_STRING","'catalog'",127],")",["T_OBJECT_OPERATOR","->",127],["T_STRING","__",127],"(",["T_CONSTANT_ENCAPSED_STRING","'The review was removed by another user or does not exist.'",127],")",")",";",["T_WHITESPACE","\n            ",127],"}",["T_WHITESPACE"," ",128],["T_ELSE","else",128],["T_WHITESPACE"," ",128],"{",["T_WHITESPACE","\n                ",128],["T_TRY","try",129],["T_WHITESPACE"," ",129],"{",["T_WHITESPACE","\n                    ",129],["T_VARIABLE","$review",130],["T_OBJECT_OPERATOR","->",130],["T_STRING","addData",130],"(",["T_VARIABLE","$data",130],")",["T_OBJECT_OPERATOR","->",130],["T_STRING","save",130],"(",")",";",["T_WHITESPACE","\n\n                    ",130],["T_VARIABLE","$arrRatingId",132],["T_WHITESPACE"," ",132],"=",["T_WHITESPACE"," ",132],["T_VARIABLE","$this",132],["T_OBJECT_OPERATOR","->",132],["T_STRING","getRequest",132],"(",")",["T_OBJECT_OPERATOR","->",132],["T_STRING","getParam",132],"(",["T_CONSTANT_ENCAPSED_STRING","'ratings'",132],",",["T_WHITESPACE"," ",132],["T_ARRAY","array",132],"(",")",")",";",["T_WHITESPACE","\n                    ",132],["T_VARIABLE","$votes",133],["T_WHITESPACE"," ",133],"=",["T_WHITESPACE"," ",133],["T_STRING","Mage",133],["T_DOUBLE_COLON","::",133],["T_STRING","getModel",133],"(",["T_CONSTANT_ENCAPSED_STRING","'rating\/rating_option_vote'",133],")",["T_WHITESPACE","\n                        ",133],["T_OBJECT_OPERATOR","->",134],["T_STRING","getResourceCollection",134],"(",")",["T_WHITESPACE","\n                        ",134],["T_OBJECT_OPERATOR","->",135],["T_STRING","setReviewFilter",135],"(",["T_VARIABLE","$reviewId",135],")",["T_WHITESPACE","\n                        ",135],["T_OBJECT_OPERATOR","->",136],["T_STRING","addOptionInfo",136],"(",")",["T_WHITESPACE","\n                        ",136],["T_OBJECT_OPERATOR","->",137],["T_STRING","load",137],"(",")",["T_WHITESPACE","\n                        ",137],["T_OBJECT_OPERATOR","->",138],["T_STRING","addRatingOptions",138],"(",")",";",["T_WHITESPACE","\n                    ",138],["T_FOREACH","foreach",139],["T_WHITESPACE"," ",139],"(",["T_VARIABLE","$arrRatingId",139],["T_WHITESPACE"," ",139],["T_AS","as",139],["T_WHITESPACE"," ",139],["T_VARIABLE","$ratingId",139],["T_DOUBLE_ARROW","=>",139],["T_VARIABLE","$optionId",139],")",["T_WHITESPACE"," ",139],"{",["T_WHITESPACE","\n                        ",139],["T_IF","if",140],"(",["T_VARIABLE","$vote",140],["T_WHITESPACE"," ",140],"=",["T_WHITESPACE"," ",140],["T_VARIABLE","$votes",140],["T_OBJECT_OPERATOR","->",140],["T_STRING","getItemByColumnValue",140],"(",["T_CONSTANT_ENCAPSED_STRING","'rating_id'",140],",",["T_WHITESPACE"," ",140],["T_VARIABLE","$ratingId",140],")",")",["T_WHITESPACE"," ",140],"{",["T_WHITESPACE","\n                            ",140],["T_STRING","Mage",141],["T_DOUBLE_COLON","::",141],["T_STRING","getModel",141],"(",["T_CONSTANT_ENCAPSED_STRING","'rating\/rating'",141],")",["T_WHITESPACE","\n                                ",141],["T_OBJECT_OPERATOR","->",142],["T_STRING","setVoteId",142],"(",["T_VARIABLE","$vote",142],["T_OBJECT_OPERATOR","->",142],["T_STRING","getId",142],"(",")",")",["T_WHITESPACE","\n                                ",142],["T_OBJECT_OPERATOR","->",143],["T_STRING","setReviewId",143],"(",["T_VARIABLE","$review",143],["T_OBJECT_OPERATOR","->",143],["T_STRING","getId",143],"(",")",")",["T_WHITESPACE","\n                                ",143],["T_OBJECT_OPERATOR","->",144],["T_STRING","updateOptionVote",144],"(",["T_VARIABLE","$optionId",144],")",";",["T_WHITESPACE","\n                        ",144],"}",["T_WHITESPACE"," ",145],["T_ELSE","else",145],["T_WHITESPACE"," ",145],"{",["T_WHITESPACE","\n                            ",145],["T_STRING","Mage",146],["T_DOUBLE_COLON","::",146],["T_STRING","getModel",146],"(",["T_CONSTANT_ENCAPSED_STRING","'rating\/rating'",146],")",["T_WHITESPACE","\n                                ",146],["T_OBJECT_OPERATOR","->",147],["T_STRING","setRatingId",147],"(",["T_VARIABLE","$ratingId",147],")",["T_WHITESPACE","\n                                ",147],["T_OBJECT_OPERATOR","->",148],["T_STRING","setReviewId",148],"(",["T_VARIABLE","$review",148],["T_OBJECT_OPERATOR","->",148],["T_STRING","getId",148],"(",")",")",["T_WHITESPACE","\n                                ",148],["T_OBJECT_OPERATOR","->",149],["T_STRING","addOptionVote",149],"(",["T_VARIABLE","$optionId",149],",",["T_WHITESPACE"," ",149],["T_VARIABLE","$review",149],["T_OBJECT_OPERATOR","->",149],["T_STRING","getEntityPkValue",149],"(",")",")",";",["T_WHITESPACE","\n                        ",149],"}",["T_WHITESPACE","\n                    ",150],"}",["T_WHITESPACE","\n\n                    ",151],["T_VARIABLE","$review",153],["T_OBJECT_OPERATOR","->",153],["T_STRING","aggregate",153],"(",")",";",["T_WHITESPACE","\n\n                    ",153],["T_VARIABLE","$session",155],["T_OBJECT_OPERATOR","->",155],["T_STRING","addSuccess",155],"(",["T_STRING","Mage",155],["T_DOUBLE_COLON","::",155],["T_STRING","helper",155],"(",["T_CONSTANT_ENCAPSED_STRING","'catalog'",155],")",["T_OBJECT_OPERATOR","->",155],["T_STRING","__",155],"(",["T_CONSTANT_ENCAPSED_STRING","'The review has been saved.'",155],")",")",";",["T_WHITESPACE","\n                ",155],"}",["T_WHITESPACE"," ",156],["T_CATCH","catch",156],["T_WHITESPACE"," ",156],"(",["T_STRING","Mage_Core_Exception",156],["T_WHITESPACE"," ",156],["T_VARIABLE","$e",156],")",["T_WHITESPACE"," ",156],"{",["T_WHITESPACE","\n                    ",156],["T_VARIABLE","$session",157],["T_OBJECT_OPERATOR","->",157],["T_STRING","addError",157],"(",["T_VARIABLE","$e",157],["T_OBJECT_OPERATOR","->",157],["T_STRING","getMessage",157],"(",")",")",";",["T_WHITESPACE","\n                ",157],"}",["T_WHITESPACE"," ",158],["T_CATCH","catch",158],["T_WHITESPACE"," ",158],"(",["T_STRING","Exception",158],["T_WHITESPACE"," ",158],["T_VARIABLE","$e",158],")","{",["T_WHITESPACE","\n                    ",158],["T_VARIABLE","$session",159],["T_OBJECT_OPERATOR","->",159],["T_STRING","addException",159],"(",["T_VARIABLE","$e",159],",",["T_WHITESPACE"," ",159],["T_STRING","Mage",159],["T_DOUBLE_COLON","::",159],["T_STRING","helper",159],"(",["T_CONSTANT_ENCAPSED_STRING","'catalog'",159],")",["T_OBJECT_OPERATOR","->",159],["T_STRING","__",159],"(",["T_CONSTANT_ENCAPSED_STRING","'An error occurred while saving this review.'",159],")",")",";",["T_WHITESPACE","\n                ",159],"}",["T_WHITESPACE","\n            ",160],"}",["T_WHITESPACE","\n\n            ",161],["T_RETURN","return",163],["T_WHITESPACE"," ",163],["T_VARIABLE","$this",163],["T_OBJECT_OPERATOR","->",163],["T_STRING","getResponse",163],"(",")",["T_OBJECT_OPERATOR","->",163],["T_STRING","setRedirect",163],"(",["T_VARIABLE","$this",163],["T_OBJECT_OPERATOR","->",163],["T_STRING","getUrl",163],"(",["T_VARIABLE","$this",163],["T_OBJECT_OPERATOR","->",163],["T_STRING","getRequest",163],"(",")",["T_OBJECT_OPERATOR","->",163],["T_STRING","getParam",163],"(",["T_CONSTANT_ENCAPSED_STRING","'ret'",163],")",["T_WHITESPACE"," ",163],["T_IS_EQUAL","==",163],["T_WHITESPACE"," ",163],["T_CONSTANT_ENCAPSED_STRING","'pending'",163],["T_WHITESPACE"," ",163],"?",["T_WHITESPACE"," ",163],["T_CONSTANT_ENCAPSED_STRING","'*\/*\/pending'",163],["T_WHITESPACE"," ",163],":",["T_WHITESPACE"," ",163],["T_CONSTANT_ENCAPSED_STRING","'*\/*\/'",163],")",")",";",["T_WHITESPACE","\n        ",163],"}",["T_WHITESPACE","\n        ",164],["T_VARIABLE","$this",165],["T_OBJECT_OPERATOR","->",165],["T_STRING","_redirect",165],"(",["T_CONSTANT_ENCAPSED_STRING","'*\/*\/'",165],")",";",["T_WHITESPACE","\n    ",165],"}",["T_WHITESPACE","\n\n    ",166],["T_PUBLIC","public",168],["T_WHITESPACE"," ",168],["T_FUNCTION","function",168],["T_WHITESPACE"," ",168],["T_STRING","deleteAction",168],"(",")",["T_WHITESPACE","\n    ",168],"{",["T_WHITESPACE","\n        ",169],["T_VARIABLE","$reviewId",170],["T_WHITESPACE","   ",170],"=",["T_WHITESPACE"," ",170],["T_VARIABLE","$this",170],["T_OBJECT_OPERATOR","->",170],["T_STRING","getRequest",170],"(",")",["T_OBJECT_OPERATOR","->",170],["T_STRING","getParam",170],"(",["T_CONSTANT_ENCAPSED_STRING","'id'",170],",",["T_WHITESPACE"," ",170],["T_STRING","false",170],")",";",["T_WHITESPACE","\n        ",170],["T_VARIABLE","$session",171],["T_WHITESPACE","    ",171],"=",["T_WHITESPACE"," ",171],["T_STRING","Mage",171],["T_DOUBLE_COLON","::",171],["T_STRING","getSingleton",171],"(",["T_CONSTANT_ENCAPSED_STRING","'adminhtml\/session'",171],")",";",["T_WHITESPACE","\n\n        ",171],["T_TRY","try",173],["T_WHITESPACE"," ",173],"{",["T_WHITESPACE","\n            ",173],["T_STRING","Mage",174],["T_DOUBLE_COLON","::",174],["T_STRING","getModel",174],"(",["T_CONSTANT_ENCAPSED_STRING","'review\/review'",174],")",["T_OBJECT_OPERATOR","->",174],["T_STRING","setId",174],"(",["T_VARIABLE","$reviewId",174],")",["T_WHITESPACE","\n                ",174],["T_OBJECT_OPERATOR","->",175],["T_STRING","aggregate",175],"(",")",["T_WHITESPACE","\n                ",175],["T_OBJECT_OPERATOR","->",176],["T_STRING","delete",176],"(",")",";",["T_WHITESPACE","\n\n            ",176],["T_VARIABLE","$session",178],["T_OBJECT_OPERATOR","->",178],["T_STRING","addSuccess",178],"(",["T_STRING","Mage",178],["T_DOUBLE_COLON","::",178],["T_STRING","helper",178],"(",["T_CONSTANT_ENCAPSED_STRING","'catalog'",178],")",["T_OBJECT_OPERATOR","->",178],["T_STRING","__",178],"(",["T_CONSTANT_ENCAPSED_STRING","'The review has been deleted'",178],")",")",";",["T_WHITESPACE","\n            ",178],["T_IF","if",179],"(",["T_WHITESPACE"," ",179],["T_VARIABLE","$this",179],["T_OBJECT_OPERATOR","->",179],["T_STRING","getRequest",179],"(",")",["T_OBJECT_OPERATOR","->",179],["T_STRING","getParam",179],"(",["T_CONSTANT_ENCAPSED_STRING","'ret'",179],")",["T_WHITESPACE"," ",179],["T_IS_EQUAL","==",179],["T_WHITESPACE"," ",179],["T_CONSTANT_ENCAPSED_STRING","'pending'",179],["T_WHITESPACE"," ",179],")",["T_WHITESPACE"," ",179],"{",["T_WHITESPACE","\n                ",179],["T_VARIABLE","$this",180],["T_OBJECT_OPERATOR","->",180],["T_STRING","getResponse",180],"(",")",["T_OBJECT_OPERATOR","->",180],["T_STRING","setRedirect",180],"(",["T_VARIABLE","$this",180],["T_OBJECT_OPERATOR","->",180],["T_STRING","getUrl",180],"(",["T_CONSTANT_ENCAPSED_STRING","'*\/*\/pending'",180],")",")",";",["T_WHITESPACE","\n            ",180],"}",["T_WHITESPACE"," ",181],["T_ELSE","else",181],["T_WHITESPACE"," ",181],"{",["T_WHITESPACE","\n                ",181],["T_VARIABLE","$this",182],["T_OBJECT_OPERATOR","->",182],["T_STRING","getResponse",182],"(",")",["T_OBJECT_OPERATOR","->",182],["T_STRING","setRedirect",182],"(",["T_VARIABLE","$this",182],["T_OBJECT_OPERATOR","->",182],["T_STRING","getUrl",182],"(",["T_CONSTANT_ENCAPSED_STRING","'*\/*\/'",182],")",")",";",["T_WHITESPACE","\n            ",182],"}",["T_WHITESPACE","\n            ",183],["T_RETURN","return",184],";",["T_WHITESPACE","\n        ",184],"}",["T_WHITESPACE"," ",185],["T_CATCH","catch",185],["T_WHITESPACE"," ",185],"(",["T_STRING","Mage_Core_Exception",185],["T_WHITESPACE"," ",185],["T_VARIABLE","$e",185],")",["T_WHITESPACE"," ",185],"{",["T_WHITESPACE","\n            ",185],["T_VARIABLE","$session",186],["T_OBJECT_OPERATOR","->",186],["T_STRING","addError",186],"(",["T_VARIABLE","$e",186],["T_OBJECT_OPERATOR","->",186],["T_STRING","getMessage",186],"(",")",")",";",["T_WHITESPACE","\n        ",186],"}",["T_WHITESPACE"," ",187],["T_CATCH","catch",187],["T_WHITESPACE"," ",187],"(",["T_STRING","Exception",187],["T_WHITESPACE"," ",187],["T_VARIABLE","$e",187],")","{",["T_WHITESPACE","\n            ",187],["T_VARIABLE","$session",188],["T_OBJECT_OPERATOR","->",188],["T_STRING","addException",188],"(",["T_VARIABLE","$e",188],",",["T_WHITESPACE"," ",188],["T_STRING","Mage",188],["T_DOUBLE_COLON","::",188],["T_STRING","helper",188],"(",["T_CONSTANT_ENCAPSED_STRING","'catalog'",188],")",["T_OBJECT_OPERATOR","->",188],["T_STRING","__",188],"(",["T_CONSTANT_ENCAPSED_STRING","'An error occurred while deleting this review.'",188],")",")",";",["T_WHITESPACE","\n        ",188],"}",["T_WHITESPACE","\n\n        ",189],["T_VARIABLE","$this",191],["T_OBJECT_OPERATOR","->",191],["T_STRING","_redirect",191],"(",["T_CONSTANT_ENCAPSED_STRING","'*\/*\/edit\/'",191],",",["T_ARRAY","array",191],"(",["T_CONSTANT_ENCAPSED_STRING","'id'",191],["T_DOUBLE_ARROW","=>",191],["T_VARIABLE","$reviewId",191],")",")",";",["T_WHITESPACE","\n    ",191],"}",["T_WHITESPACE","\n\n    ",192],["T_PUBLIC","public",194],["T_WHITESPACE"," ",194],["T_FUNCTION","function",194],["T_WHITESPACE"," ",194],["T_STRING","massDeleteAction",194],"(",")",["T_WHITESPACE","\n    ",194],"{",["T_WHITESPACE","\n        ",195],["T_VARIABLE","$reviewsIds",196],["T_WHITESPACE"," ",196],"=",["T_WHITESPACE"," ",196],["T_VARIABLE","$this",196],["T_OBJECT_OPERATOR","->",196],["T_STRING","getRequest",196],"(",")",["T_OBJECT_OPERATOR","->",196],["T_STRING","getParam",196],"(",["T_CONSTANT_ENCAPSED_STRING","'reviews'",196],")",";",["T_WHITESPACE","\n        ",196],["T_VARIABLE","$session",197],["T_WHITESPACE","    ",197],"=",["T_WHITESPACE"," ",197],["T_STRING","Mage",197],["T_DOUBLE_COLON","::",197],["T_STRING","getSingleton",197],"(",["T_CONSTANT_ENCAPSED_STRING","'adminhtml\/session'",197],")",";",["T_WHITESPACE","\n\n        ",197],["T_IF","if",199],"(","!",["T_STRING","is_array",199],"(",["T_VARIABLE","$reviewsIds",199],")",")",["T_WHITESPACE"," ",199],"{",["T_WHITESPACE","\n             ",199],["T_VARIABLE","$session",200],["T_OBJECT_OPERATOR","->",200],["T_STRING","addError",200],"(",["T_STRING","Mage",200],["T_DOUBLE_COLON","::",200],["T_STRING","helper",200],"(",["T_CONSTANT_ENCAPSED_STRING","'adminhtml'",200],")",["T_OBJECT_OPERATOR","->",200],["T_STRING","__",200],"(",["T_CONSTANT_ENCAPSED_STRING","'Please select review(s).'",200],")",")",";",["T_WHITESPACE","\n        ",200],"}",["T_WHITESPACE"," ",201],["T_ELSE","else",201],["T_WHITESPACE"," ",201],"{",["T_WHITESPACE","\n            ",201],["T_TRY","try",202],["T_WHITESPACE"," ",202],"{",["T_WHITESPACE","\n                ",202],["T_FOREACH","foreach",203],["T_WHITESPACE"," ",203],"(",["T_VARIABLE","$reviewsIds",203],["T_WHITESPACE"," ",203],["T_AS","as",203],["T_WHITESPACE"," ",203],["T_VARIABLE","$reviewId",203],")",["T_WHITESPACE"," ",203],"{",["T_WHITESPACE","\n                    ",203],["T_VARIABLE","$model",204],["T_WHITESPACE"," ",204],"=",["T_WHITESPACE"," ",204],["T_STRING","Mage",204],["T_DOUBLE_COLON","::",204],["T_STRING","getModel",204],"(",["T_CONSTANT_ENCAPSED_STRING","'review\/review'",204],")",["T_OBJECT_OPERATOR","->",204],["T_STRING","load",204],"(",["T_VARIABLE","$reviewId",204],")",";",["T_WHITESPACE","\n                    ",204],["T_VARIABLE","$model",205],["T_OBJECT_OPERATOR","->",205],["T_STRING","delete",205],"(",")",";",["T_WHITESPACE","\n                ",205],"}",["T_WHITESPACE","\n                ",206],["T_STRING","Mage",207],["T_DOUBLE_COLON","::",207],["T_STRING","getSingleton",207],"(",["T_CONSTANT_ENCAPSED_STRING","'adminhtml\/session'",207],")",["T_OBJECT_OPERATOR","->",207],["T_STRING","addSuccess",207],"(",["T_WHITESPACE","\n                    ",207],["T_STRING","Mage",208],["T_DOUBLE_COLON","::",208],["T_STRING","helper",208],"(",["T_CONSTANT_ENCAPSED_STRING","'adminhtml'",208],")",["T_OBJECT_OPERATOR","->",208],["T_STRING","__",208],"(",["T_CONSTANT_ENCAPSED_STRING","'Total of %d record(s) have been deleted.'",208],",",["T_WHITESPACE"," ",208],["T_STRING","count",208],"(",["T_VARIABLE","$reviewsIds",208],")",")",["T_WHITESPACE","\n                ",208],")",";",["T_WHITESPACE","\n            ",209],"}",["T_WHITESPACE"," ",210],["T_CATCH","catch",210],["T_WHITESPACE"," ",210],"(",["T_STRING","Mage_Core_Exception",210],["T_WHITESPACE"," ",210],["T_VARIABLE","$e",210],")",["T_WHITESPACE"," ",210],"{",["T_WHITESPACE","\n                ",210],["T_VARIABLE","$session",211],["T_OBJECT_OPERATOR","->",211],["T_STRING","addError",211],"(",["T_VARIABLE","$e",211],["T_OBJECT_OPERATOR","->",211],["T_STRING","getMessage",211],"(",")",")",";",["T_WHITESPACE","\n            ",211],"}",["T_WHITESPACE"," ",212],["T_CATCH","catch",212],["T_WHITESPACE"," ",212],"(",["T_STRING","Exception",212],["T_WHITESPACE"," ",212],["T_VARIABLE","$e",212],")","{",["T_WHITESPACE","\n                ",212],["T_VARIABLE","$session",213],["T_OBJECT_OPERATOR","->",213],["T_STRING","addException",213],"(",["T_VARIABLE","$e",213],",",["T_WHITESPACE"," ",213],["T_STRING","Mage",213],["T_DOUBLE_COLON","::",213],["T_STRING","helper",213],"(",["T_CONSTANT_ENCAPSED_STRING","'adminhtml'",213],")",["T_OBJECT_OPERATOR","->",213],["T_STRING","__",213],"(",["T_CONSTANT_ENCAPSED_STRING","'An error occurred while deleting record(s).'",213],")",")",";",["T_WHITESPACE","\n            ",213],"}",["T_WHITESPACE","\n        ",214],"}",["T_WHITESPACE","\n\n        ",215],["T_VARIABLE","$this",217],["T_OBJECT_OPERATOR","->",217],["T_STRING","_redirect",217],"(",["T_CONSTANT_ENCAPSED_STRING","'*\/*\/'",217],["T_WHITESPACE"," ",217],".",["T_WHITESPACE"," ",217],["T_VARIABLE","$this",217],["T_OBJECT_OPERATOR","->",217],["T_STRING","getRequest",217],"(",")",["T_OBJECT_OPERATOR","->",217],["T_STRING","getParam",217],"(",["T_CONSTANT_ENCAPSED_STRING","'ret'",217],",",["T_WHITESPACE"," ",217],["T_CONSTANT_ENCAPSED_STRING","'index'",217],")",")",";",["T_WHITESPACE","\n    ",217],"}",["T_WHITESPACE","\n\n    ",218],["T_PUBLIC","public",220],["T_WHITESPACE"," ",220],["T_FUNCTION","function",220],["T_WHITESPACE"," ",220],["T_STRING","massUpdateStatusAction",220],"(",")",["T_WHITESPACE","\n    ",220],"{",["T_WHITESPACE","\n        ",221],["T_VARIABLE","$reviewsIds",222],["T_WHITESPACE"," ",222],"=",["T_WHITESPACE"," ",222],["T_VARIABLE","$this",222],["T_OBJECT_OPERATOR","->",222],["T_STRING","getRequest",222],"(",")",["T_OBJECT_OPERATOR","->",222],["T_STRING","getParam",222],"(",["T_CONSTANT_ENCAPSED_STRING","'reviews'",222],")",";",["T_WHITESPACE","\n        ",222],["T_VARIABLE","$session",223],["T_WHITESPACE","    ",223],"=",["T_WHITESPACE"," ",223],["T_STRING","Mage",223],["T_DOUBLE_COLON","::",223],["T_STRING","getSingleton",223],"(",["T_CONSTANT_ENCAPSED_STRING","'adminhtml\/session'",223],")",";",["T_WHITESPACE","\n\n        ",223],["T_IF","if",225],"(","!",["T_STRING","is_array",225],"(",["T_VARIABLE","$reviewsIds",225],")",")",["T_WHITESPACE"," ",225],"{",["T_WHITESPACE","\n             ",225],["T_VARIABLE","$session",226],["T_OBJECT_OPERATOR","->",226],["T_STRING","addError",226],"(",["T_STRING","Mage",226],["T_DOUBLE_COLON","::",226],["T_STRING","helper",226],"(",["T_CONSTANT_ENCAPSED_STRING","'adminhtml'",226],")",["T_OBJECT_OPERATOR","->",226],["T_STRING","__",226],"(",["T_CONSTANT_ENCAPSED_STRING","'Please select review(s).'",226],")",")",";",["T_WHITESPACE","\n        ",226],"}",["T_WHITESPACE"," ",227],["T_ELSE","else",227],["T_WHITESPACE"," ",227],"{",["T_WHITESPACE","\n            ",227],["T_COMMENT","\/* @var $session Mage_Adminhtml_Model_Session *\/",228],["T_WHITESPACE","\n            ",228],["T_TRY","try",229],["T_WHITESPACE"," ",229],"{",["T_WHITESPACE","\n                ",229],["T_VARIABLE","$status",230],["T_WHITESPACE"," ",230],"=",["T_WHITESPACE"," ",230],["T_VARIABLE","$this",230],["T_OBJECT_OPERATOR","->",230],["T_STRING","getRequest",230],"(",")",["T_OBJECT_OPERATOR","->",230],["T_STRING","getParam",230],"(",["T_CONSTANT_ENCAPSED_STRING","'status'",230],")",";",["T_WHITESPACE","\n                ",230],["T_FOREACH","foreach",231],["T_WHITESPACE"," ",231],"(",["T_VARIABLE","$reviewsIds",231],["T_WHITESPACE"," ",231],["T_AS","as",231],["T_WHITESPACE"," ",231],["T_VARIABLE","$reviewId",231],")",["T_WHITESPACE"," ",231],"{",["T_WHITESPACE","\n                    ",231],["T_VARIABLE","$model",232],["T_WHITESPACE"," ",232],"=",["T_WHITESPACE"," ",232],["T_STRING","Mage",232],["T_DOUBLE_COLON","::",232],["T_STRING","getModel",232],"(",["T_CONSTANT_ENCAPSED_STRING","'review\/review'",232],")",["T_OBJECT_OPERATOR","->",232],["T_STRING","load",232],"(",["T_VARIABLE","$reviewId",232],")",";",["T_WHITESPACE","\n                    ",232],["T_VARIABLE","$model",233],["T_OBJECT_OPERATOR","->",233],["T_STRING","setStatusId",233],"(",["T_VARIABLE","$status",233],")",["T_WHITESPACE","\n                        ",233],["T_OBJECT_OPERATOR","->",234],["T_STRING","save",234],"(",")",["T_WHITESPACE","\n                        ",234],["T_OBJECT_OPERATOR","->",235],["T_STRING","aggregate",235],"(",")",";",["T_WHITESPACE","\n                ",235],"}",["T_WHITESPACE","\n                ",236],["T_VARIABLE","$session",237],["T_OBJECT_OPERATOR","->",237],["T_STRING","addSuccess",237],"(",["T_WHITESPACE","\n                    ",237],["T_STRING","Mage",238],["T_DOUBLE_COLON","::",238],["T_STRING","helper",238],"(",["T_CONSTANT_ENCAPSED_STRING","'adminhtml'",238],")",["T_OBJECT_OPERATOR","->",238],["T_STRING","__",238],"(",["T_CONSTANT_ENCAPSED_STRING","'Total of %d record(s) have been updated.'",238],",",["T_WHITESPACE"," ",238],["T_STRING","count",238],"(",["T_VARIABLE","$reviewsIds",238],")",")",["T_WHITESPACE","\n                ",238],")",";",["T_WHITESPACE","\n            ",239],"}",["T_WHITESPACE"," ",240],["T_CATCH","catch",240],["T_WHITESPACE"," ",240],"(",["T_STRING","Mage_Core_Exception",240],["T_WHITESPACE"," ",240],["T_VARIABLE","$e",240],")",["T_WHITESPACE"," ",240],"{",["T_WHITESPACE","\n                ",240],["T_VARIABLE","$session",241],["T_OBJECT_OPERATOR","->",241],["T_STRING","addError",241],"(",["T_VARIABLE","$e",241],["T_OBJECT_OPERATOR","->",241],["T_STRING","getMessage",241],"(",")",")",";",["T_WHITESPACE","\n            ",241],"}",["T_WHITESPACE"," ",242],["T_CATCH","catch",242],["T_WHITESPACE"," ",242],"(",["T_STRING","Exception",242],["T_WHITESPACE"," ",242],["T_VARIABLE","$e",242],")",["T_WHITESPACE"," ",242],"{",["T_WHITESPACE","\n                ",242],["T_VARIABLE","$session",243],["T_OBJECT_OPERATOR","->",243],["T_STRING","addException",243],"(",["T_VARIABLE","$e",243],",",["T_WHITESPACE"," ",243],["T_STRING","Mage",243],["T_DOUBLE_COLON","::",243],["T_STRING","helper",243],"(",["T_CONSTANT_ENCAPSED_STRING","'adminhtml'",243],")",["T_OBJECT_OPERATOR","->",243],["T_STRING","__",243],"(",["T_CONSTANT_ENCAPSED_STRING","'An error occurred while updating the selected review(s).'",243],")",")",";",["T_WHITESPACE","\n            ",243],"}",["T_WHITESPACE","\n        ",244],"}",["T_WHITESPACE","\n\n        ",245],["T_VARIABLE","$this",247],["T_OBJECT_OPERATOR","->",247],["T_STRING","_redirect",247],"(",["T_CONSTANT_ENCAPSED_STRING","'*\/*\/'",247],["T_WHITESPACE"," ",247],".",["T_WHITESPACE"," ",247],["T_VARIABLE","$this",247],["T_OBJECT_OPERATOR","->",247],["T_STRING","getRequest",247],"(",")",["T_OBJECT_OPERATOR","->",247],["T_STRING","getParam",247],"(",["T_CONSTANT_ENCAPSED_STRING","'ret'",247],",",["T_WHITESPACE"," ",247],["T_CONSTANT_ENCAPSED_STRING","'index'",247],")",")",";",["T_WHITESPACE","\n    ",247],"}",["T_WHITESPACE","\n\n    ",248],["T_PUBLIC","public",250],["T_WHITESPACE"," ",250],["T_FUNCTION","function",250],["T_WHITESPACE"," ",250],["T_STRING","massVisibleInAction",250],"(",")",["T_WHITESPACE","\n    ",250],"{",["T_WHITESPACE","\n        ",251],["T_VARIABLE","$reviewsIds",252],["T_WHITESPACE"," ",252],"=",["T_WHITESPACE"," ",252],["T_VARIABLE","$this",252],["T_OBJECT_OPERATOR","->",252],["T_STRING","getRequest",252],"(",")",["T_OBJECT_OPERATOR","->",252],["T_STRING","getParam",252],"(",["T_CONSTANT_ENCAPSED_STRING","'reviews'",252],")",";",["T_WHITESPACE","\n        ",252],["T_VARIABLE","$session",253],["T_WHITESPACE","    ",253],"=",["T_WHITESPACE"," ",253],["T_STRING","Mage",253],["T_DOUBLE_COLON","::",253],["T_STRING","getSingleton",253],"(",["T_CONSTANT_ENCAPSED_STRING","'adminhtml\/session'",253],")",";",["T_WHITESPACE","\n\n        ",253],["T_IF","if",255],"(","!",["T_STRING","is_array",255],"(",["T_VARIABLE","$reviewsIds",255],")",")",["T_WHITESPACE"," ",255],"{",["T_WHITESPACE","\n             ",255],["T_VARIABLE","$session",256],["T_OBJECT_OPERATOR","->",256],["T_STRING","addError",256],"(",["T_STRING","Mage",256],["T_DOUBLE_COLON","::",256],["T_STRING","helper",256],"(",["T_CONSTANT_ENCAPSED_STRING","'adminhtml'",256],")",["T_OBJECT_OPERATOR","->",256],["T_STRING","__",256],"(",["T_CONSTANT_ENCAPSED_STRING","'Please select review(s).'",256],")",")",";",["T_WHITESPACE","\n        ",256],"}",["T_WHITESPACE"," ",257],["T_ELSE","else",257],["T_WHITESPACE"," ",257],"{",["T_WHITESPACE","\n            ",257],["T_VARIABLE","$session",258],["T_WHITESPACE"," ",258],"=",["T_WHITESPACE"," ",258],["T_STRING","Mage",258],["T_DOUBLE_COLON","::",258],["T_STRING","getSingleton",258],"(",["T_CONSTANT_ENCAPSED_STRING","'adminhtml\/session'",258],")",";",["T_WHITESPACE","\n            ",258],["T_COMMENT","\/* @var $session Mage_Adminhtml_Model_Session *\/",259],["T_WHITESPACE","\n            ",259],["T_TRY","try",260],["T_WHITESPACE"," ",260],"{",["T_WHITESPACE","\n                ",260],["T_VARIABLE","$stores",261],["T_WHITESPACE"," ",261],"=",["T_WHITESPACE"," ",261],["T_VARIABLE","$this",261],["T_OBJECT_OPERATOR","->",261],["T_STRING","getRequest",261],"(",")",["T_OBJECT_OPERATOR","->",261],["T_STRING","getParam",261],"(",["T_CONSTANT_ENCAPSED_STRING","'stores'",261],")",";",["T_WHITESPACE","\n                ",261],["T_FOREACH","foreach",262],["T_WHITESPACE"," ",262],"(",["T_VARIABLE","$reviewsIds",262],["T_WHITESPACE"," ",262],["T_AS","as",262],["T_WHITESPACE"," ",262],["T_VARIABLE","$reviewId",262],")",["T_WHITESPACE"," ",262],"{",["T_WHITESPACE","\n                    ",262],["T_VARIABLE","$model",263],["T_WHITESPACE"," ",263],"=",["T_WHITESPACE"," ",263],["T_STRING","Mage",263],["T_DOUBLE_COLON","::",263],["T_STRING","getModel",263],"(",["T_CONSTANT_ENCAPSED_STRING","'review\/review'",263],")",["T_OBJECT_OPERATOR","->",263],["T_STRING","load",263],"(",["T_VARIABLE","$reviewId",263],")",";",["T_WHITESPACE","\n                    ",263],["T_VARIABLE","$model",264],["T_OBJECT_OPERATOR","->",264],["T_STRING","setSelectStores",264],"(",["T_VARIABLE","$stores",264],")",";",["T_WHITESPACE","\n                    ",264],["T_VARIABLE","$model",265],["T_OBJECT_OPERATOR","->",265],["T_STRING","save",265],"(",")",";",["T_WHITESPACE","\n                ",265],"}",["T_WHITESPACE","\n                ",266],["T_VARIABLE","$session",267],["T_OBJECT_OPERATOR","->",267],["T_STRING","addSuccess",267],"(",["T_WHITESPACE","\n                    ",267],["T_STRING","Mage",268],["T_DOUBLE_COLON","::",268],["T_STRING","helper",268],"(",["T_CONSTANT_ENCAPSED_STRING","'adminhtml'",268],")",["T_OBJECT_OPERATOR","->",268],["T_STRING","__",268],"(",["T_CONSTANT_ENCAPSED_STRING","'Total of %d record(s) have been updated.'",268],",",["T_WHITESPACE"," ",268],["T_STRING","count",268],"(",["T_VARIABLE","$reviewsIds",268],")",")",["T_WHITESPACE","\n                ",268],")",";",["T_WHITESPACE","\n            ",269],"}",["T_WHITESPACE"," ",270],["T_CATCH","catch",270],["T_WHITESPACE"," ",270],"(",["T_STRING","Mage_Core_Exception",270],["T_WHITESPACE"," ",270],["T_VARIABLE","$e",270],")",["T_WHITESPACE"," ",270],"{",["T_WHITESPACE","\n                ",270],["T_VARIABLE","$session",271],["T_OBJECT_OPERATOR","->",271],["T_STRING","addError",271],"(",["T_VARIABLE","$e",271],["T_OBJECT_OPERATOR","->",271],["T_STRING","getMessage",271],"(",")",")",";",["T_WHITESPACE","\n            ",271],"}",["T_WHITESPACE"," ",272],["T_CATCH","catch",272],["T_WHITESPACE"," ",272],"(",["T_STRING","Exception",272],["T_WHITESPACE"," ",272],["T_VARIABLE","$e",272],")",["T_WHITESPACE"," ",272],"{",["T_WHITESPACE","\n                ",272],["T_VARIABLE","$session",273],["T_OBJECT_OPERATOR","->",273],["T_STRING","addException",273],"(",["T_VARIABLE","$e",273],",",["T_WHITESPACE"," ",273],["T_STRING","Mage",273],["T_DOUBLE_COLON","::",273],["T_STRING","helper",273],"(",["T_CONSTANT_ENCAPSED_STRING","'adminhtml'",273],")",["T_OBJECT_OPERATOR","->",273],["T_STRING","__",273],"(",["T_CONSTANT_ENCAPSED_STRING","'An error occurred while updating the selected review(s).'",273],")",")",";",["T_WHITESPACE","\n            ",273],"}",["T_WHITESPACE","\n        ",274],"}",["T_WHITESPACE","\n\n        ",275],["T_VARIABLE","$this",277],["T_OBJECT_OPERATOR","->",277],["T_STRING","_redirect",277],"(",["T_CONSTANT_ENCAPSED_STRING","'*\/*\/pending'",277],")",";",["T_WHITESPACE","\n    ",277],"}",["T_WHITESPACE","\n\n    ",278],["T_PUBLIC","public",280],["T_WHITESPACE"," ",280],["T_FUNCTION","function",280],["T_WHITESPACE"," ",280],["T_STRING","productGridAction",280],"(",")",["T_WHITESPACE","\n    ",280],"{",["T_WHITESPACE","\n        ",281],["T_VARIABLE","$this",282],["T_OBJECT_OPERATOR","->",282],["T_STRING","getResponse",282],"(",")",["T_OBJECT_OPERATOR","->",282],["T_STRING","setBody",282],"(",["T_VARIABLE","$this",282],["T_OBJECT_OPERATOR","->",282],["T_STRING","getLayout",282],"(",")",["T_OBJECT_OPERATOR","->",282],["T_STRING","createBlock",282],"(",["T_CONSTANT_ENCAPSED_STRING","'adminhtml\/review_product_grid'",282],")",["T_OBJECT_OPERATOR","->",282],["T_STRING","toHtml",282],"(",")",")",";",["T_WHITESPACE","\n    ",282],"}",["T_WHITESPACE","\n\n    ",283],["T_PUBLIC","public",285],["T_WHITESPACE"," ",285],["T_FUNCTION","function",285],["T_WHITESPACE"," ",285],["T_STRING","reviewGridAction",285],"(",")",["T_WHITESPACE","\n    ",285],"{",["T_WHITESPACE","\n        ",286],["T_VARIABLE","$this",287],["T_OBJECT_OPERATOR","->",287],["T_STRING","getResponse",287],"(",")",["T_OBJECT_OPERATOR","->",287],["T_STRING","setBody",287],"(",["T_VARIABLE","$this",287],["T_OBJECT_OPERATOR","->",287],["T_STRING","getLayout",287],"(",")",["T_OBJECT_OPERATOR","->",287],["T_STRING","createBlock",287],"(",["T_CONSTANT_ENCAPSED_STRING","'adminhtml\/review_grid'",287],")",["T_OBJECT_OPERATOR","->",287],["T_STRING","toHtml",287],"(",")",")",";",["T_WHITESPACE","\n    ",287],"}",["T_WHITESPACE","\n\n    ",288],["T_PUBLIC","public",290],["T_WHITESPACE"," ",290],["T_FUNCTION","function",290],["T_WHITESPACE"," ",290],["T_STRING","jsonProductInfoAction",290],"(",")",["T_WHITESPACE","\n    ",290],"{",["T_WHITESPACE","\n        ",291],["T_VARIABLE","$response",292],["T_WHITESPACE"," ",292],"=",["T_WHITESPACE"," ",292],["T_NEW","new",292],["T_WHITESPACE"," ",292],["T_STRING","Varien_Object",292],"(",")",";",["T_WHITESPACE","\n        ",292],["T_VARIABLE","$id",293],["T_WHITESPACE"," ",293],"=",["T_WHITESPACE"," ",293],["T_VARIABLE","$this",293],["T_OBJECT_OPERATOR","->",293],["T_STRING","getRequest",293],"(",")",["T_OBJECT_OPERATOR","->",293],["T_STRING","getParam",293],"(",["T_CONSTANT_ENCAPSED_STRING","'id'",293],")",";",["T_WHITESPACE","\n        ",293],["T_IF","if",294],"(",["T_WHITESPACE"," ",294],["T_STRING","intval",294],"(",["T_VARIABLE","$id",294],")",["T_WHITESPACE"," ",294],">",["T_WHITESPACE"," ",294],["T_LNUMBER","0",294],["T_WHITESPACE"," ",294],")",["T_WHITESPACE"," ",294],"{",["T_WHITESPACE","\n            ",294],["T_VARIABLE","$product",295],["T_WHITESPACE"," ",295],"=",["T_WHITESPACE"," ",295],["T_STRING","Mage",295],["T_DOUBLE_COLON","::",295],["T_STRING","getModel",295],"(",["T_CONSTANT_ENCAPSED_STRING","'catalog\/product'",295],")",["T_WHITESPACE","\n                ",295],["T_OBJECT_OPERATOR","->",296],["T_STRING","load",296],"(",["T_VARIABLE","$id",296],")",";",["T_WHITESPACE","\n\n            ",296],["T_VARIABLE","$response",298],["T_OBJECT_OPERATOR","->",298],["T_STRING","setId",298],"(",["T_VARIABLE","$id",298],")",";",["T_WHITESPACE","\n            ",298],["T_VARIABLE","$response",299],["T_OBJECT_OPERATOR","->",299],["T_STRING","addData",299],"(",["T_VARIABLE","$product",299],["T_OBJECT_OPERATOR","->",299],["T_STRING","getData",299],"(",")",")",";",["T_WHITESPACE","\n            ",299],["T_VARIABLE","$response",300],["T_OBJECT_OPERATOR","->",300],["T_STRING","setError",300],"(",["T_LNUMBER","0",300],")",";",["T_WHITESPACE","\n        ",300],"}",["T_WHITESPACE"," ",301],["T_ELSE","else",301],["T_WHITESPACE"," ",301],"{",["T_WHITESPACE","\n            ",301],["T_VARIABLE","$response",302],["T_OBJECT_OPERATOR","->",302],["T_STRING","setError",302],"(",["T_LNUMBER","1",302],")",";",["T_WHITESPACE","\n            ",302],["T_VARIABLE","$response",303],["T_OBJECT_OPERATOR","->",303],["T_STRING","setMessage",303],"(",["T_STRING","Mage",303],["T_DOUBLE_COLON","::",303],["T_STRING","helper",303],"(",["T_CONSTANT_ENCAPSED_STRING","'catalog'",303],")",["T_OBJECT_OPERATOR","->",303],["T_STRING","__",303],"(",["T_CONSTANT_ENCAPSED_STRING","'Unable to get the product ID.'",303],")",")",";",["T_WHITESPACE","\n        ",303],"}",["T_WHITESPACE","\n        ",304],["T_VARIABLE","$this",305],["T_OBJECT_OPERATOR","->",305],["T_STRING","getResponse",305],"(",")",["T_OBJECT_OPERATOR","->",305],["T_STRING","setBody",305],"(",["T_VARIABLE","$response",305],["T_OBJECT_OPERATOR","->",305],["T_STRING","toJSON",305],"(",")",")",";",["T_WHITESPACE","\n    ",305],"}",["T_WHITESPACE","\n\n    ",306],["T_PUBLIC","public",308],["T_WHITESPACE"," ",308],["T_FUNCTION","function",308],["T_WHITESPACE"," ",308],["T_STRING","postAction",308],"(",")",["T_WHITESPACE","\n    ",308],"{",["T_WHITESPACE","\n        ",309],["T_VARIABLE","$productId",310],["T_WHITESPACE","  ",310],"=",["T_WHITESPACE"," ",310],["T_VARIABLE","$this",310],["T_OBJECT_OPERATOR","->",310],["T_STRING","getRequest",310],"(",")",["T_OBJECT_OPERATOR","->",310],["T_STRING","getParam",310],"(",["T_CONSTANT_ENCAPSED_STRING","'product_id'",310],",",["T_WHITESPACE"," ",310],["T_STRING","false",310],")",";",["T_WHITESPACE","\n        ",310],["T_VARIABLE","$session",311],["T_WHITESPACE","    ",311],"=",["T_WHITESPACE"," ",311],["T_STRING","Mage",311],["T_DOUBLE_COLON","::",311],["T_STRING","getSingleton",311],"(",["T_CONSTANT_ENCAPSED_STRING","'adminhtml\/session'",311],")",";",["T_WHITESPACE","\n\n        ",311],["T_IF","if",313],["T_WHITESPACE"," ",313],"(",["T_VARIABLE","$data",313],["T_WHITESPACE"," ",313],"=",["T_WHITESPACE"," ",313],["T_VARIABLE","$this",313],["T_OBJECT_OPERATOR","->",313],["T_STRING","getRequest",313],"(",")",["T_OBJECT_OPERATOR","->",313],["T_STRING","getPost",313],"(",")",")",["T_WHITESPACE"," ",313],"{",["T_WHITESPACE","\n            ",313],["T_IF","if",314],["T_WHITESPACE"," ",314],"(",["T_STRING","Mage",314],["T_DOUBLE_COLON","::",314],["T_STRING","app",314],"(",")",["T_OBJECT_OPERATOR","->",314],["T_STRING","isSingleStoreMode",314],"(",")",")",["T_WHITESPACE"," ",314],"{",["T_WHITESPACE","\n                ",314],["T_VARIABLE","$data",315],"[",["T_CONSTANT_ENCAPSED_STRING","'stores'",315],"]",["T_WHITESPACE"," ",315],"=",["T_WHITESPACE"," ",315],["T_ARRAY","array",315],"(",["T_STRING","Mage",315],["T_DOUBLE_COLON","::",315],["T_STRING","app",315],"(",")",["T_OBJECT_OPERATOR","->",315],["T_STRING","getStore",315],"(",["T_STRING","true",315],")",["T_OBJECT_OPERATOR","->",315],["T_STRING","getId",315],"(",")",")",";",["T_WHITESPACE","\n            ",315],"}",["T_WHITESPACE"," ",316],["T_ELSE","else",316],["T_WHITESPACE","  ",316],["T_IF","if",316],["T_WHITESPACE"," ",316],"(",["T_ISSET","isset",316],"(",["T_VARIABLE","$data",316],"[",["T_CONSTANT_ENCAPSED_STRING","'select_stores'",316],"]",")",")",["T_WHITESPACE"," ",316],"{",["T_WHITESPACE","\n                ",316],["T_VARIABLE","$data",317],"[",["T_CONSTANT_ENCAPSED_STRING","'stores'",317],"]",["T_WHITESPACE"," ",317],"=",["T_WHITESPACE"," ",317],["T_VARIABLE","$data",317],"[",["T_CONSTANT_ENCAPSED_STRING","'select_stores'",317],"]",";",["T_WHITESPACE","\n            ",317],"}",["T_WHITESPACE","\n\n            ",318],["T_VARIABLE","$review",320],["T_WHITESPACE"," ",320],"=",["T_WHITESPACE"," ",320],["T_STRING","Mage",320],["T_DOUBLE_COLON","::",320],["T_STRING","getModel",320],"(",["T_CONSTANT_ENCAPSED_STRING","'review\/review'",320],")",["T_OBJECT_OPERATOR","->",320],["T_STRING","setData",320],"(",["T_VARIABLE","$data",320],")",";",["T_WHITESPACE","\n\n            ",320],["T_VARIABLE","$product",322],["T_WHITESPACE"," ",322],"=",["T_WHITESPACE"," ",322],["T_STRING","Mage",322],["T_DOUBLE_COLON","::",322],["T_STRING","getModel",322],"(",["T_CONSTANT_ENCAPSED_STRING","'catalog\/product'",322],")",["T_WHITESPACE","\n                ",322],["T_OBJECT_OPERATOR","->",323],["T_STRING","load",323],"(",["T_VARIABLE","$productId",323],")",";",["T_WHITESPACE","\n\n            ",323],["T_TRY","try",325],["T_WHITESPACE"," ",325],"{",["T_WHITESPACE","\n                ",325],["T_VARIABLE","$review",326],["T_OBJECT_OPERATOR","->",326],["T_STRING","setEntityId",326],"(",["T_LNUMBER","1",326],")",["T_WHITESPACE"," ",326],["T_COMMENT","\/\/ product\n",326],["T_WHITESPACE","                    ",327],["T_OBJECT_OPERATOR","->",327],["T_STRING","setEntityPkValue",327],"(",["T_VARIABLE","$productId",327],")",["T_WHITESPACE","\n                    ",327],["T_OBJECT_OPERATOR","->",328],["T_STRING","setStoreId",328],"(",["T_VARIABLE","$product",328],["T_OBJECT_OPERATOR","->",328],["T_STRING","getStoreId",328],"(",")",")",["T_WHITESPACE","\n                    ",328],["T_OBJECT_OPERATOR","->",329],["T_STRING","setStatusId",329],"(",["T_VARIABLE","$data",329],"[",["T_CONSTANT_ENCAPSED_STRING","'status_id'",329],"]",")",["T_WHITESPACE","\n                    ",329],["T_OBJECT_OPERATOR","->",330],["T_STRING","setCustomerId",330],"(",["T_STRING","null",330],")",["T_COMMENT","\/\/null is for administrator only\n",330],["T_WHITESPACE","                    ",331],["T_OBJECT_OPERATOR","->",331],["T_STRING","save",331],"(",")",";",["T_WHITESPACE","\n\n                ",331],["T_VARIABLE","$arrRatingId",333],["T_WHITESPACE"," ",333],"=",["T_WHITESPACE"," ",333],["T_VARIABLE","$this",333],["T_OBJECT_OPERATOR","->",333],["T_STRING","getRequest",333],"(",")",["T_OBJECT_OPERATOR","->",333],["T_STRING","getParam",333],"(",["T_CONSTANT_ENCAPSED_STRING","'ratings'",333],",",["T_WHITESPACE"," ",333],["T_ARRAY","array",333],"(",")",")",";",["T_WHITESPACE","\n                ",333],["T_FOREACH","foreach",334],["T_WHITESPACE"," ",334],"(",["T_VARIABLE","$arrRatingId",334],["T_WHITESPACE"," ",334],["T_AS","as",334],["T_WHITESPACE"," ",334],["T_VARIABLE","$ratingId",334],["T_DOUBLE_ARROW","=>",334],["T_VARIABLE","$optionId",334],")",["T_WHITESPACE"," ",334],"{",["T_WHITESPACE","\n                    ",334],["T_STRING","Mage",335],["T_DOUBLE_COLON","::",335],["T_STRING","getModel",335],"(",["T_CONSTANT_ENCAPSED_STRING","'rating\/rating'",335],")",["T_WHITESPACE","\n                       ",335],["T_OBJECT_OPERATOR","->",336],["T_STRING","setRatingId",336],"(",["T_VARIABLE","$ratingId",336],")",["T_WHITESPACE","\n                       ",336],["T_OBJECT_OPERATOR","->",337],["T_STRING","setReviewId",337],"(",["T_VARIABLE","$review",337],["T_OBJECT_OPERATOR","->",337],["T_STRING","getId",337],"(",")",")",["T_WHITESPACE","\n                       ",337],["T_OBJECT_OPERATOR","->",338],["T_STRING","addOptionVote",338],"(",["T_VARIABLE","$optionId",338],",",["T_WHITESPACE"," ",338],["T_VARIABLE","$productId",338],")",";",["T_WHITESPACE","\n                ",338],"}",["T_WHITESPACE","\n\n                ",339],["T_VARIABLE","$review",341],["T_OBJECT_OPERATOR","->",341],["T_STRING","aggregate",341],"(",")",";",["T_WHITESPACE","\n\n                ",341],["T_VARIABLE","$session",343],["T_OBJECT_OPERATOR","->",343],["T_STRING","addSuccess",343],"(",["T_STRING","Mage",343],["T_DOUBLE_COLON","::",343],["T_STRING","helper",343],"(",["T_CONSTANT_ENCAPSED_STRING","'catalog'",343],")",["T_OBJECT_OPERATOR","->",343],["T_STRING","__",343],"(",["T_CONSTANT_ENCAPSED_STRING","'The review has been saved.'",343],")",")",";",["T_WHITESPACE","\n                ",343],["T_IF","if",344],"(",["T_WHITESPACE"," ",344],["T_VARIABLE","$this",344],["T_OBJECT_OPERATOR","->",344],["T_STRING","getRequest",344],"(",")",["T_OBJECT_OPERATOR","->",344],["T_STRING","getParam",344],"(",["T_CONSTANT_ENCAPSED_STRING","'ret'",344],")",["T_WHITESPACE"," ",344],["T_IS_EQUAL","==",344],["T_WHITESPACE"," ",344],["T_CONSTANT_ENCAPSED_STRING","'pending'",344],["T_WHITESPACE"," ",344],")",["T_WHITESPACE"," ",344],"{",["T_WHITESPACE","\n                    ",344],["T_VARIABLE","$this",345],["T_OBJECT_OPERATOR","->",345],["T_STRING","getResponse",345],"(",")",["T_OBJECT_OPERATOR","->",345],["T_STRING","setRedirect",345],"(",["T_VARIABLE","$this",345],["T_OBJECT_OPERATOR","->",345],["T_STRING","getUrl",345],"(",["T_CONSTANT_ENCAPSED_STRING","'*\/*\/pending'",345],")",")",";",["T_WHITESPACE","\n                ",345],"}",["T_WHITESPACE"," ",346],["T_ELSE","else",346],["T_WHITESPACE"," ",346],"{",["T_WHITESPACE","\n                    ",346],["T_VARIABLE","$this",347],["T_OBJECT_OPERATOR","->",347],["T_STRING","getResponse",347],"(",")",["T_OBJECT_OPERATOR","->",347],["T_STRING","setRedirect",347],"(",["T_VARIABLE","$this",347],["T_OBJECT_OPERATOR","->",347],["T_STRING","getUrl",347],"(",["T_CONSTANT_ENCAPSED_STRING","'*\/*\/'",347],")",")",";",["T_WHITESPACE","\n                ",347],"}",["T_WHITESPACE","\n\n                ",348],["T_RETURN","return",350],";",["T_WHITESPACE","\n            ",350],"}",["T_WHITESPACE"," ",351],["T_CATCH","catch",351],["T_WHITESPACE"," ",351],"(",["T_STRING","Mage_Core_Exception",351],["T_WHITESPACE"," ",351],["T_VARIABLE","$e",351],")",["T_WHITESPACE"," ",351],"{",["T_WHITESPACE","\n                ",351],["T_VARIABLE","$session",352],["T_OBJECT_OPERATOR","->",352],["T_STRING","addError",352],"(",["T_VARIABLE","$e",352],["T_OBJECT_OPERATOR","->",352],["T_STRING","getMessage",352],"(",")",")",";",["T_WHITESPACE","\n            ",352],"}",["T_WHITESPACE"," ",353],["T_CATCH","catch",353],["T_WHITESPACE"," ",353],"(",["T_STRING","Exception",353],["T_WHITESPACE"," ",353],["T_VARIABLE","$e",353],")",["T_WHITESPACE"," ",353],"{",["T_WHITESPACE","\n                ",353],["T_VARIABLE","$session",354],["T_OBJECT_OPERATOR","->",354],["T_STRING","addException",354],"(",["T_VARIABLE","$e",354],",",["T_WHITESPACE"," ",354],["T_STRING","Mage",354],["T_DOUBLE_COLON","::",354],["T_STRING","helper",354],"(",["T_CONSTANT_ENCAPSED_STRING","'adminhtml'",354],")",["T_OBJECT_OPERATOR","->",354],["T_STRING","__",354],"(",["T_CONSTANT_ENCAPSED_STRING","'An error occurred while saving review.'",354],")",")",";",["T_WHITESPACE","\n            ",354],"}",["T_WHITESPACE","\n        ",355],"}",["T_WHITESPACE","\n        ",356],["T_VARIABLE","$this",357],["T_OBJECT_OPERATOR","->",357],["T_STRING","getResponse",357],"(",")",["T_OBJECT_OPERATOR","->",357],["T_STRING","setRedirect",357],"(",["T_VARIABLE","$this",357],["T_OBJECT_OPERATOR","->",357],["T_STRING","getUrl",357],"(",["T_CONSTANT_ENCAPSED_STRING","'*\/*\/'",357],")",")",";",["T_WHITESPACE","\n        ",357],["T_RETURN","return",358],";",["T_WHITESPACE","\n    ",358],"}",["T_WHITESPACE","\n\n    ",359],["T_PUBLIC","public",361],["T_WHITESPACE"," ",361],["T_FUNCTION","function",361],["T_WHITESPACE"," ",361],["T_STRING","ratingItemsAction",361],"(",")",["T_WHITESPACE","\n    ",361],"{",["T_WHITESPACE","\n        ",362],["T_VARIABLE","$this",363],["T_OBJECT_OPERATOR","->",363],["T_STRING","getResponse",363],"(",")",["T_OBJECT_OPERATOR","->",363],["T_STRING","setBody",363],"(",["T_WHITESPACE","\n            ",363],["T_VARIABLE","$this",364],["T_OBJECT_OPERATOR","->",364],["T_STRING","getLayout",364],"(",")",["T_OBJECT_OPERATOR","->",364],["T_STRING","createBlock",364],"(",["T_CONSTANT_ENCAPSED_STRING","'adminhtml\/review_rating_detailed'",364],")",["T_OBJECT_OPERATOR","->",364],["T_STRING","setIndependentMode",364],"(",")",["T_OBJECT_OPERATOR","->",364],["T_STRING","toHtml",364],"(",")",["T_WHITESPACE","\n        ",364],")",";",["T_WHITESPACE","\n    ",365],"}",["T_WHITESPACE","\n\n    ",366],["T_PROTECTED","protected",368],["T_WHITESPACE"," ",368],["T_FUNCTION","function",368],["T_WHITESPACE"," ",368],["T_STRING","_isAllowed",368],"(",")",["T_WHITESPACE","\n    ",368],"{",["T_WHITESPACE","\n        ",369],["T_VARIABLE","$action",370],["T_WHITESPACE"," ",370],"=",["T_WHITESPACE"," ",370],["T_STRING","strtolower",370],"(",["T_VARIABLE","$this",370],["T_OBJECT_OPERATOR","->",370],["T_STRING","getRequest",370],"(",")",["T_OBJECT_OPERATOR","->",370],["T_STRING","getActionName",370],"(",")",")",";",["T_WHITESPACE","\n        ",370],["T_SWITCH","switch",371],["T_WHITESPACE"," ",371],"(",["T_VARIABLE","$action",371],")",["T_WHITESPACE"," ",371],"{",["T_WHITESPACE","\n            ",371],["T_CASE","case",372],["T_WHITESPACE"," ",372],["T_CONSTANT_ENCAPSED_STRING","'pending'",372],":",["T_WHITESPACE","\n                ",372],["T_RETURN","return",373],["T_WHITESPACE"," ",373],["T_STRING","Mage",373],["T_DOUBLE_COLON","::",373],["T_STRING","getSingleton",373],"(",["T_CONSTANT_ENCAPSED_STRING","'admin\/session'",373],")",["T_OBJECT_OPERATOR","->",373],["T_STRING","isAllowed",373],"(",["T_CONSTANT_ENCAPSED_STRING","'catalog\/reviews_ratings\/reviews\/pending'",373],")",";",["T_WHITESPACE","\n                ",373],["T_BREAK","break",374],";",["T_WHITESPACE","\n            ",374],["T_DEFAULT","default",375],":",["T_WHITESPACE","\n                ",375],["T_RETURN","return",376],["T_WHITESPACE"," ",376],["T_STRING","Mage",376],["T_DOUBLE_COLON","::",376],["T_STRING","getSingleton",376],"(",["T_CONSTANT_ENCAPSED_STRING","'admin\/session'",376],")",["T_OBJECT_OPERATOR","->",376],["T_STRING","isAllowed",376],"(",["T_CONSTANT_ENCAPSED_STRING","'catalog\/reviews_ratings\/reviews\/all'",376],")",";",["T_WHITESPACE","\n                ",376],["T_BREAK","break",377],";",["T_WHITESPACE","\n        ",377],"}",["T_WHITESPACE","\n    ",378],"}",["T_WHITESPACE","\n",379],"}",["T_WHITESPACE","\n",380]]
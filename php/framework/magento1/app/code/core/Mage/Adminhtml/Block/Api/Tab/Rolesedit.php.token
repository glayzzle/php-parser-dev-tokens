[["T_OPEN_TAG","<?php\n",1],["T_DOC_COMMENT","\/**\n * Magento\n *\n * NOTICE OF LICENSE\n *\n * This source file is subject to the Open Software License (OSL 3.0)\n * that is bundled with this package in the file LICENSE.txt.\n * It is also available through the world-wide-web at this URL:\n * http:\/\/opensource.org\/licenses\/osl-3.0.php\n * If you did not receive a copy of the license and are unable to\n * obtain it through the world-wide-web, please send an email\n * to license@magento.com so we can send you a copy immediately.\n *\n * DISCLAIMER\n *\n * Do not edit or add to this file if you wish to upgrade Magento to newer\n * versions in the future. If you wish to customize Magento for your\n * needs please refer to http:\/\/www.magento.com for more information.\n *\n * @category    Mage\n * @package     Mage_Adminhtml\n * @copyright  Copyright (c) 2006-2016 X.commerce, Inc. and affiliates (http:\/\/www.magento.com)\n * @license    http:\/\/opensource.org\/licenses\/osl-3.0.php  Open Software License (OSL 3.0)\n *\/",2],["T_WHITESPACE","\n\n",25],["T_CLASS","class",27],["T_WHITESPACE"," ",27],["T_STRING","Mage_Adminhtml_Block_Api_Tab_Rolesedit",27],["T_WHITESPACE"," ",27],["T_EXTENDS","extends",27],["T_WHITESPACE"," ",27],["T_STRING","Mage_Adminhtml_Block_Widget_Form",27],["T_WHITESPACE"," ",27],"{",["T_WHITESPACE","\n\n    ",27],["T_PUBLIC","public",29],["T_WHITESPACE"," ",29],["T_FUNCTION","function",29],["T_WHITESPACE"," ",29],["T_STRING","__construct",29],"(",")",["T_WHITESPACE"," ",29],"{",["T_WHITESPACE","\n        ",29],["T_STRING","parent",30],["T_DOUBLE_COLON","::",30],["T_STRING","__construct",30],"(",")",";",["T_WHITESPACE","\n\n        ",30],["T_VARIABLE","$rid",32],["T_WHITESPACE"," ",32],"=",["T_WHITESPACE"," ",32],["T_STRING","Mage",32],["T_DOUBLE_COLON","::",32],["T_STRING","app",32],"(",")",["T_OBJECT_OPERATOR","->",32],["T_STRING","getRequest",32],"(",")",["T_OBJECT_OPERATOR","->",32],["T_STRING","getParam",32],"(",["T_CONSTANT_ENCAPSED_STRING","'rid'",32],",",["T_WHITESPACE"," ",32],["T_STRING","false",32],")",";",["T_WHITESPACE","\n\n        ",32],["T_VARIABLE","$resources",34],["T_WHITESPACE"," ",34],"=",["T_WHITESPACE"," ",34],["T_STRING","Mage",34],["T_DOUBLE_COLON","::",34],["T_STRING","getModel",34],"(",["T_CONSTANT_ENCAPSED_STRING","'api\/roles'",34],")",["T_OBJECT_OPERATOR","->",34],["T_STRING","getResourcesList",34],"(",")",";",["T_WHITESPACE","\n\n        ",34],["T_VARIABLE","$rules_set",36],["T_WHITESPACE"," ",36],"=",["T_WHITESPACE"," ",36],["T_STRING","Mage",36],["T_DOUBLE_COLON","::",36],["T_STRING","getResourceModel",36],"(",["T_CONSTANT_ENCAPSED_STRING","'api\/rules_collection'",36],")",["T_OBJECT_OPERATOR","->",36],["T_STRING","getByRoles",36],"(",["T_VARIABLE","$rid",36],")",["T_OBJECT_OPERATOR","->",36],["T_STRING","load",36],"(",")",";",["T_WHITESPACE","\n\n        ",36],["T_VARIABLE","$selrids",38],["T_WHITESPACE"," ",38],"=",["T_WHITESPACE"," ",38],["T_ARRAY","array",38],"(",")",";",["T_WHITESPACE","\n\n        ",38],["T_FOREACH","foreach",40],["T_WHITESPACE"," ",40],"(",["T_VARIABLE","$rules_set",40],["T_OBJECT_OPERATOR","->",40],["T_STRING","getItems",40],"(",")",["T_WHITESPACE"," ",40],["T_AS","as",40],["T_WHITESPACE"," ",40],["T_VARIABLE","$item",40],")",["T_WHITESPACE"," ",40],"{",["T_WHITESPACE","\n            ",40],["T_IF","if",41],["T_WHITESPACE"," ",41],"(",["T_STRING","array_key_exists",41],"(",["T_STRING","strtolower",41],"(",["T_VARIABLE","$item",41],["T_OBJECT_OPERATOR","->",41],["T_STRING","getResource_id",41],"(",")",")",",",["T_WHITESPACE"," ",41],["T_VARIABLE","$resources",41],")",["T_WHITESPACE","\n                ",41],["T_BOOLEAN_AND","&&",42],["T_WHITESPACE"," ",42],["T_VARIABLE","$item",42],["T_OBJECT_OPERATOR","->",42],["T_STRING","getApiPermission",42],"(",")",["T_WHITESPACE"," ",42],["T_IS_EQUAL","==",42],["T_WHITESPACE"," ",42],["T_CONSTANT_ENCAPSED_STRING","'allow'",42],")",["T_WHITESPACE","\n            ",42],"{",["T_WHITESPACE","\n                ",43],["T_VARIABLE","$resources",44],"[",["T_VARIABLE","$item",44],["T_OBJECT_OPERATOR","->",44],["T_STRING","getResource_id",44],"(",")","]","[",["T_CONSTANT_ENCAPSED_STRING","'checked'",44],"]",["T_WHITESPACE"," ",44],"=",["T_WHITESPACE"," ",44],["T_STRING","true",44],";",["T_WHITESPACE","\n                ",44],["T_STRING","array_push",45],"(",["T_VARIABLE","$selrids",45],",",["T_WHITESPACE"," ",45],["T_VARIABLE","$item",45],["T_OBJECT_OPERATOR","->",45],["T_STRING","getResource_id",45],"(",")",")",";",["T_WHITESPACE","\n            ",45],"}",["T_WHITESPACE","\n        ",46],"}",["T_WHITESPACE","\n\n        ",47],["T_VARIABLE","$this",49],["T_OBJECT_OPERATOR","->",49],["T_STRING","setSelectedResources",49],"(",["T_VARIABLE","$selrids",49],")",";",["T_WHITESPACE","\n\n        ",49],["T_VARIABLE","$this",51],["T_OBJECT_OPERATOR","->",51],["T_STRING","setTemplate",51],"(",["T_CONSTANT_ENCAPSED_STRING","'api\/rolesedit.phtml'",51],")",";",["T_WHITESPACE","\n        ",51],["T_COMMENT","\/\/->assign('resources', $resources);\n",52],["T_WHITESPACE","        ",53],["T_COMMENT","\/\/->assign('checkedResources', join(',', $selrids));\n",53],["T_WHITESPACE","    ",54],"}",["T_WHITESPACE","\n\n    ",54],["T_PUBLIC","public",56],["T_WHITESPACE"," ",56],["T_FUNCTION","function",56],["T_WHITESPACE"," ",56],["T_STRING","getEverythingAllowed",56],"(",")",["T_WHITESPACE","\n    ",56],"{",["T_WHITESPACE","\n        ",57],["T_RETURN","return",58],["T_WHITESPACE"," ",58],["T_STRING","in_array",58],"(",["T_CONSTANT_ENCAPSED_STRING","'all'",58],",",["T_WHITESPACE"," ",58],["T_VARIABLE","$this",58],["T_OBJECT_OPERATOR","->",58],["T_STRING","getSelectedResources",58],"(",")",")",";",["T_WHITESPACE","\n    ",58],"}",["T_WHITESPACE","\n\n    ",59],["T_PUBLIC","public",61],["T_WHITESPACE"," ",61],["T_FUNCTION","function",61],["T_WHITESPACE"," ",61],["T_STRING","getResTreeJson",61],"(",")",["T_WHITESPACE","\n    ",61],"{",["T_WHITESPACE","\n        ",62],["T_VARIABLE","$rid",63],["T_WHITESPACE"," ",63],"=",["T_WHITESPACE"," ",63],["T_STRING","Mage",63],["T_DOUBLE_COLON","::",63],["T_STRING","app",63],"(",")",["T_OBJECT_OPERATOR","->",63],["T_STRING","getRequest",63],"(",")",["T_OBJECT_OPERATOR","->",63],["T_STRING","getParam",63],"(",["T_CONSTANT_ENCAPSED_STRING","'rid'",63],",",["T_WHITESPACE"," ",63],["T_STRING","false",63],")",";",["T_WHITESPACE","\n        ",63],["T_VARIABLE","$resources",64],["T_WHITESPACE"," ",64],"=",["T_WHITESPACE"," ",64],["T_STRING","Mage",64],["T_DOUBLE_COLON","::",64],["T_STRING","getModel",64],"(",["T_CONSTANT_ENCAPSED_STRING","'api\/roles'",64],")",["T_OBJECT_OPERATOR","->",64],["T_STRING","getResourcesTree",64],"(",")",";",["T_WHITESPACE","\n\n        ",64],["T_VARIABLE","$rootArray",66],["T_WHITESPACE"," ",66],"=",["T_WHITESPACE"," ",66],["T_VARIABLE","$this",66],["T_OBJECT_OPERATOR","->",66],["T_STRING","_getNodeJson",66],"(",["T_VARIABLE","$resources",66],",",["T_LNUMBER","1",66],")",";",["T_WHITESPACE","\n\n        ",66],["T_VARIABLE","$json",68],["T_WHITESPACE"," ",68],"=",["T_WHITESPACE"," ",68],["T_STRING","Mage",68],["T_DOUBLE_COLON","::",68],["T_STRING","helper",68],"(",["T_CONSTANT_ENCAPSED_STRING","'core'",68],")",["T_OBJECT_OPERATOR","->",68],["T_STRING","jsonEncode",68],"(",["T_ISSET","isset",68],"(",["T_VARIABLE","$rootArray",68],"[",["T_CONSTANT_ENCAPSED_STRING","'children'",68],"]",")",["T_WHITESPACE"," ",68],"?",["T_WHITESPACE"," ",68],["T_VARIABLE","$rootArray",68],"[",["T_CONSTANT_ENCAPSED_STRING","'children'",68],"]",["T_WHITESPACE"," ",68],":",["T_WHITESPACE"," ",68],["T_ARRAY","array",68],"(",")",")",";",["T_WHITESPACE","\n\n        ",68],["T_RETURN","return",70],["T_WHITESPACE"," ",70],["T_VARIABLE","$json",70],";",["T_WHITESPACE","\n    ",70],"}",["T_WHITESPACE","\n\n    ",71],["T_PROTECTED","protected",73],["T_WHITESPACE"," ",73],["T_FUNCTION","function",73],["T_WHITESPACE"," ",73],["T_STRING","_sortTree",73],"(",["T_VARIABLE","$a",73],",",["T_WHITESPACE"," ",73],["T_VARIABLE","$b",73],")",["T_WHITESPACE","\n    ",73],"{",["T_WHITESPACE","\n        ",74],["T_RETURN","return",75],["T_WHITESPACE"," ",75],["T_VARIABLE","$a",75],"[",["T_CONSTANT_ENCAPSED_STRING","'sort_order'",75],"]","<",["T_VARIABLE","$b",75],"[",["T_CONSTANT_ENCAPSED_STRING","'sort_order'",75],"]",["T_WHITESPACE"," ",75],"?",["T_WHITESPACE"," ",75],"-",["T_LNUMBER","1",75],["T_WHITESPACE"," ",75],":",["T_WHITESPACE"," ",75],"(",["T_VARIABLE","$a",75],"[",["T_CONSTANT_ENCAPSED_STRING","'sort_order'",75],"]",">",["T_VARIABLE","$b",75],"[",["T_CONSTANT_ENCAPSED_STRING","'sort_order'",75],"]",["T_WHITESPACE"," ",75],"?",["T_WHITESPACE"," ",75],["T_LNUMBER","1",75],["T_WHITESPACE"," ",75],":",["T_WHITESPACE"," ",75],["T_LNUMBER","0",75],")",";",["T_WHITESPACE","\n    ",75],"}",["T_WHITESPACE","\n\n\n    ",76],["T_PROTECTED","protected",79],["T_WHITESPACE"," ",79],["T_FUNCTION","function",79],["T_WHITESPACE"," ",79],["T_STRING","_getNodeJson",79],"(",["T_VARIABLE","$node",79],",",["T_WHITESPACE"," ",79],["T_VARIABLE","$level",79],"=",["T_LNUMBER","0",79],")",["T_WHITESPACE","\n    ",79],"{",["T_WHITESPACE","\n        ",80],["T_VARIABLE","$item",81],["T_WHITESPACE"," ",81],"=",["T_WHITESPACE"," ",81],["T_ARRAY","array",81],"(",")",";",["T_WHITESPACE","\n        ",81],["T_VARIABLE","$selres",82],["T_WHITESPACE"," ",82],"=",["T_WHITESPACE"," ",82],["T_VARIABLE","$this",82],["T_OBJECT_OPERATOR","->",82],["T_STRING","getSelectedResources",82],"(",")",";",["T_WHITESPACE","\n\n        ",82],["T_IF","if",84],["T_WHITESPACE"," ",84],"(",["T_VARIABLE","$level",84],["T_WHITESPACE"," ",84],["T_IS_NOT_EQUAL","!=",84],["T_WHITESPACE"," ",84],["T_LNUMBER","0",84],")",["T_WHITESPACE"," ",84],"{",["T_WHITESPACE","\n            ",84],["T_VARIABLE","$item",85],"[",["T_CONSTANT_ENCAPSED_STRING","'text'",85],"]","=",["T_WHITESPACE"," ",85],["T_STRING_CAST","(string)",85],["T_VARIABLE","$node",85],["T_OBJECT_OPERATOR","->",85],["T_STRING","title",85],";",["T_WHITESPACE","\n            ",85],["T_VARIABLE","$item",86],"[",["T_CONSTANT_ENCAPSED_STRING","'sort_order'",86],"]","=",["T_WHITESPACE"," ",86],["T_ISSET","isset",86],"(",["T_VARIABLE","$node",86],["T_OBJECT_OPERATOR","->",86],["T_STRING","sort_order",86],")",["T_WHITESPACE"," ",86],"?",["T_WHITESPACE"," ",86],["T_STRING_CAST","(string)",86],["T_VARIABLE","$node",86],["T_OBJECT_OPERATOR","->",86],["T_STRING","sort_order",86],["T_WHITESPACE"," ",86],":",["T_WHITESPACE"," ",86],["T_LNUMBER","0",86],";",["T_WHITESPACE","\n            ",86],["T_VARIABLE","$item",87],"[",["T_CONSTANT_ENCAPSED_STRING","'id'",87],"]",["T_WHITESPACE","  ",87],"=",["T_WHITESPACE"," ",87],["T_STRING_CAST","(string)",87],["T_VARIABLE","$node",87],["T_OBJECT_OPERATOR","->",87],["T_STRING","attributes",87],"(",")",["T_OBJECT_OPERATOR","->",87],["T_STRING","aclpath",87],";",["T_WHITESPACE","\n\n            ",87],["T_IF","if",89],["T_WHITESPACE"," ",89],"(",["T_STRING","in_array",89],"(",["T_VARIABLE","$item",89],"[",["T_CONSTANT_ENCAPSED_STRING","'id'",89],"]",",",["T_WHITESPACE"," ",89],["T_VARIABLE","$selres",89],")",")",["T_WHITESPACE","\n                ",89],["T_VARIABLE","$item",90],"[",["T_CONSTANT_ENCAPSED_STRING","'checked'",90],"]",["T_WHITESPACE"," ",90],"=",["T_WHITESPACE"," ",90],["T_STRING","true",90],";",["T_WHITESPACE","\n        ",90],"}",["T_WHITESPACE","\n        ",91],["T_IF","if",92],["T_WHITESPACE"," ",92],"(",["T_ISSET","isset",92],"(",["T_VARIABLE","$node",92],["T_OBJECT_OPERATOR","->",92],["T_STRING","children",92],")",")",["T_WHITESPACE"," ",92],"{",["T_WHITESPACE","\n            ",92],["T_VARIABLE","$children",93],["T_WHITESPACE"," ",93],"=",["T_WHITESPACE"," ",93],["T_VARIABLE","$node",93],["T_OBJECT_OPERATOR","->",93],["T_STRING","children",93],["T_OBJECT_OPERATOR","->",93],["T_STRING","children",93],"(",")",";",["T_WHITESPACE","\n        ",93],"}",["T_WHITESPACE"," ",94],["T_ELSE","else",94],["T_WHITESPACE"," ",94],"{",["T_WHITESPACE","\n            ",94],["T_VARIABLE","$children",95],["T_WHITESPACE"," ",95],"=",["T_WHITESPACE"," ",95],["T_VARIABLE","$node",95],["T_OBJECT_OPERATOR","->",95],["T_STRING","children",95],"(",")",";",["T_WHITESPACE","\n        ",95],"}",["T_WHITESPACE","\n        ",96],["T_IF","if",97],["T_WHITESPACE"," ",97],"(",["T_EMPTY","empty",97],"(",["T_VARIABLE","$children",97],")",")",["T_WHITESPACE"," ",97],"{",["T_WHITESPACE","\n            ",97],["T_RETURN","return",98],["T_WHITESPACE"," ",98],["T_VARIABLE","$item",98],";",["T_WHITESPACE","\n        ",98],"}",["T_WHITESPACE","\n\n        ",99],["T_IF","if",101],["T_WHITESPACE"," ",101],"(",["T_VARIABLE","$children",101],")",["T_WHITESPACE"," ",101],"{",["T_WHITESPACE","\n            ",101],["T_VARIABLE","$item",102],"[",["T_CONSTANT_ENCAPSED_STRING","'children'",102],"]",["T_WHITESPACE"," ",102],"=",["T_WHITESPACE"," ",102],["T_ARRAY","array",102],"(",")",";",["T_WHITESPACE","\n            ",102],["T_COMMENT","\/\/$item['cls'] = 'fiche-node';\n",103],["T_WHITESPACE","            ",104],["T_FOREACH","foreach",104],["T_WHITESPACE"," ",104],"(",["T_VARIABLE","$children",104],["T_WHITESPACE"," ",104],["T_AS","as",104],["T_WHITESPACE"," ",104],["T_VARIABLE","$child",104],")",["T_WHITESPACE"," ",104],"{",["T_WHITESPACE","\n                ",104],["T_IF","if",105],["T_WHITESPACE"," ",105],"(",["T_VARIABLE","$child",105],["T_OBJECT_OPERATOR","->",105],["T_STRING","getName",105],"(",")",["T_IS_NOT_EQUAL","!=",105],["T_CONSTANT_ENCAPSED_STRING","'title'",105],["T_WHITESPACE"," ",105],["T_BOOLEAN_AND","&&",105],["T_WHITESPACE"," ",105],["T_VARIABLE","$child",105],["T_OBJECT_OPERATOR","->",105],["T_STRING","getName",105],"(",")",["T_IS_NOT_EQUAL","!=",105],["T_CONSTANT_ENCAPSED_STRING","'sort_order'",105],["T_WHITESPACE"," ",105],["T_BOOLEAN_AND","&&",105],["T_WHITESPACE"," ",105],["T_VARIABLE","$child",105],["T_OBJECT_OPERATOR","->",105],["T_STRING","attributes",105],"(",")",["T_OBJECT_OPERATOR","->",105],["T_STRING","module",105],")",["T_WHITESPACE"," ",105],"{",["T_WHITESPACE","\n                    ",105],["T_IF","if",106],["T_WHITESPACE"," ",106],"(",["T_VARIABLE","$level",106],["T_WHITESPACE"," ",106],["T_IS_NOT_EQUAL","!=",106],["T_WHITESPACE"," ",106],["T_LNUMBER","0",106],")",["T_WHITESPACE"," ",106],"{",["T_WHITESPACE","\n                        ",106],["T_VARIABLE","$item",107],"[",["T_CONSTANT_ENCAPSED_STRING","'children'",107],"]","[","]",["T_WHITESPACE"," ",107],"=",["T_WHITESPACE"," ",107],["T_VARIABLE","$this",107],["T_OBJECT_OPERATOR","->",107],["T_STRING","_getNodeJson",107],"(",["T_VARIABLE","$child",107],",",["T_WHITESPACE"," ",107],["T_VARIABLE","$level",107],"+",["T_LNUMBER","1",107],")",";",["T_WHITESPACE","\n                    ",107],"}",["T_WHITESPACE"," ",108],["T_ELSE","else",108],["T_WHITESPACE"," ",108],"{",["T_WHITESPACE","\n                        ",108],["T_VARIABLE","$item",109],["T_WHITESPACE"," ",109],"=",["T_WHITESPACE"," ",109],["T_VARIABLE","$this",109],["T_OBJECT_OPERATOR","->",109],["T_STRING","_getNodeJson",109],"(",["T_VARIABLE","$child",109],",",["T_WHITESPACE"," ",109],["T_VARIABLE","$level",109],"+",["T_LNUMBER","1",109],")",";",["T_WHITESPACE","\n                    ",109],"}",["T_WHITESPACE","\n                ",110],"}",["T_WHITESPACE","\n            ",111],"}",["T_WHITESPACE","\n            ",112],["T_IF","if",113],["T_WHITESPACE"," ",113],"(","!",["T_EMPTY","empty",113],"(",["T_VARIABLE","$item",113],"[",["T_CONSTANT_ENCAPSED_STRING","'children'",113],"]",")",")",["T_WHITESPACE"," ",113],"{",["T_WHITESPACE","\n                ",113],["T_STRING","usort",114],"(",["T_VARIABLE","$item",114],"[",["T_CONSTANT_ENCAPSED_STRING","'children'",114],"]",",",["T_WHITESPACE"," ",114],["T_ARRAY","array",114],"(",["T_VARIABLE","$this",114],",",["T_WHITESPACE"," ",114],["T_CONSTANT_ENCAPSED_STRING","'_sortTree'",114],")",")",";",["T_WHITESPACE","\n            ",114],"}",["T_WHITESPACE","\n        ",115],"}",["T_WHITESPACE","\n        ",116],["T_RETURN","return",117],["T_WHITESPACE"," ",117],["T_VARIABLE","$item",117],";",["T_WHITESPACE","\n    ",117],"}",["T_WHITESPACE","\n",118],"}",["T_WHITESPACE","\n",119]]
[["T_OPEN_TAG","<?php\n",1],["T_DOC_COMMENT","\/**\n * Magento\n *\n * NOTICE OF LICENSE\n *\n * This source file is subject to the Open Software License (OSL 3.0)\n * that is bundled with this package in the file LICENSE.txt.\n * It is also available through the world-wide-web at this URL:\n * http:\/\/opensource.org\/licenses\/osl-3.0.php\n * If you did not receive a copy of the license and are unable to\n * obtain it through the world-wide-web, please send an email\n * to license@magento.com so we can send you a copy immediately.\n *\n * DISCLAIMER\n *\n * Do not edit or add to this file if you wish to upgrade Magento to newer\n * versions in the future. If you wish to customize Magento for your\n * needs please refer to http:\/\/www.magento.com for more information.\n *\n * @category    Mage\n * @package     Mage_Adminhtml\n * @copyright  Copyright (c) 2006-2016 X.commerce, Inc. and affiliates (http:\/\/www.magento.com)\n * @license    http:\/\/opensource.org\/licenses\/osl-3.0.php  Open Software License (OSL 3.0)\n *\/",2],["T_WHITESPACE","\n\n",25],["T_DOC_COMMENT","\/**\n * Adminhtml sales orders controller\n *\n * @author      Magento Core Team <core@magentocommerce.com>\n *\/",27],["T_WHITESPACE","\n",31],["T_CLASS","class",32],["T_WHITESPACE"," ",32],["T_STRING","Mage_Adminhtml_Controller_Sales_Shipment",32],["T_WHITESPACE"," ",32],["T_EXTENDS","extends",32],["T_WHITESPACE"," ",32],["T_STRING","Mage_Adminhtml_Controller_Action",32],["T_WHITESPACE","\n",32],"{",["T_WHITESPACE","\n    ",33],["T_DOC_COMMENT","\/**\n     * Additional initialization\n     *\n     *\/",34],["T_WHITESPACE","\n    ",37],["T_PROTECTED","protected",38],["T_WHITESPACE"," ",38],["T_FUNCTION","function",38],["T_WHITESPACE"," ",38],["T_STRING","_construct",38],"(",")",["T_WHITESPACE","\n    ",38],"{",["T_WHITESPACE","\n        ",39],["T_VARIABLE","$this",40],["T_OBJECT_OPERATOR","->",40],["T_STRING","setUsedModuleName",40],"(",["T_CONSTANT_ENCAPSED_STRING","'Mage_Sales'",40],")",";",["T_WHITESPACE","\n    ",40],"}",["T_WHITESPACE","\n\n    ",41],["T_DOC_COMMENT","\/**\n     * Init layout, menu and breadcrumb\n     *\n     * @return Mage_Adminhtml_Sales_ShipmentController\n     *\/",43],["T_WHITESPACE","\n    ",47],["T_PROTECTED","protected",48],["T_WHITESPACE"," ",48],["T_FUNCTION","function",48],["T_WHITESPACE"," ",48],["T_STRING","_initAction",48],"(",")",["T_WHITESPACE","\n    ",48],"{",["T_WHITESPACE","\n        ",49],["T_VARIABLE","$this",50],["T_OBJECT_OPERATOR","->",50],["T_STRING","loadLayout",50],"(",")",["T_WHITESPACE","\n            ",50],["T_OBJECT_OPERATOR","->",51],["T_STRING","_setActiveMenu",51],"(",["T_CONSTANT_ENCAPSED_STRING","'sales\/order'",51],")",["T_WHITESPACE","\n            ",51],["T_OBJECT_OPERATOR","->",52],["T_STRING","_addBreadcrumb",52],"(",["T_VARIABLE","$this",52],["T_OBJECT_OPERATOR","->",52],["T_STRING","__",52],"(",["T_CONSTANT_ENCAPSED_STRING","'Sales'",52],")",",",["T_WHITESPACE"," ",52],["T_VARIABLE","$this",52],["T_OBJECT_OPERATOR","->",52],["T_STRING","__",52],"(",["T_CONSTANT_ENCAPSED_STRING","'Sales'",52],")",")",["T_WHITESPACE","\n            ",52],["T_OBJECT_OPERATOR","->",53],["T_STRING","_addBreadcrumb",53],"(",["T_VARIABLE","$this",53],["T_OBJECT_OPERATOR","->",53],["T_STRING","__",53],"(",["T_CONSTANT_ENCAPSED_STRING","'Shipments'",53],")",",",["T_VARIABLE","$this",53],["T_OBJECT_OPERATOR","->",53],["T_STRING","__",53],"(",["T_CONSTANT_ENCAPSED_STRING","'Shipments'",53],")",")",";",["T_WHITESPACE","\n        ",53],["T_RETURN","return",54],["T_WHITESPACE"," ",54],["T_VARIABLE","$this",54],";",["T_WHITESPACE","\n    ",54],"}",["T_WHITESPACE","\n\n    ",55],["T_DOC_COMMENT","\/**\n     * Shipments grid\n     *\/",57],["T_WHITESPACE","\n    ",59],["T_PUBLIC","public",60],["T_WHITESPACE"," ",60],["T_FUNCTION","function",60],["T_WHITESPACE"," ",60],["T_STRING","indexAction",60],"(",")",["T_WHITESPACE","\n    ",60],"{",["T_WHITESPACE","\n        ",61],["T_VARIABLE","$this",62],["T_OBJECT_OPERATOR","->",62],["T_STRING","_title",62],"(",["T_VARIABLE","$this",62],["T_OBJECT_OPERATOR","->",62],["T_STRING","__",62],"(",["T_CONSTANT_ENCAPSED_STRING","'Sales'",62],")",")",["T_OBJECT_OPERATOR","->",62],["T_STRING","_title",62],"(",["T_VARIABLE","$this",62],["T_OBJECT_OPERATOR","->",62],["T_STRING","__",62],"(",["T_CONSTANT_ENCAPSED_STRING","'Shipments'",62],")",")",";",["T_WHITESPACE","\n\n        ",62],["T_VARIABLE","$this",64],["T_OBJECT_OPERATOR","->",64],["T_STRING","_initAction",64],"(",")",["T_WHITESPACE","\n            ",64],["T_OBJECT_OPERATOR","->",65],["T_STRING","_addContent",65],"(",["T_VARIABLE","$this",65],["T_OBJECT_OPERATOR","->",65],["T_STRING","getLayout",65],"(",")",["T_OBJECT_OPERATOR","->",65],["T_STRING","createBlock",65],"(",["T_CONSTANT_ENCAPSED_STRING","'adminhtml\/sales_shipment'",65],")",")",["T_WHITESPACE","\n            ",65],["T_OBJECT_OPERATOR","->",66],["T_STRING","renderLayout",66],"(",")",";",["T_WHITESPACE","\n    ",66],"}",["T_WHITESPACE","\n\n    ",67],["T_DOC_COMMENT","\/**\n     * Shipment information page\n     *\/",69],["T_WHITESPACE","\n    ",71],["T_PUBLIC","public",72],["T_WHITESPACE"," ",72],["T_FUNCTION","function",72],["T_WHITESPACE"," ",72],["T_STRING","viewAction",72],"(",")",["T_WHITESPACE","\n    ",72],"{",["T_WHITESPACE","\n        ",73],["T_IF","if",74],["T_WHITESPACE"," ",74],"(",["T_VARIABLE","$shipmentId",74],["T_WHITESPACE"," ",74],"=",["T_WHITESPACE"," ",74],["T_VARIABLE","$this",74],["T_OBJECT_OPERATOR","->",74],["T_STRING","getRequest",74],"(",")",["T_OBJECT_OPERATOR","->",74],["T_STRING","getParam",74],"(",["T_CONSTANT_ENCAPSED_STRING","'shipment_id'",74],")",")",["T_WHITESPACE"," ",74],"{",["T_WHITESPACE","\n            ",74],["T_VARIABLE","$this",75],["T_OBJECT_OPERATOR","->",75],["T_STRING","_forward",75],"(",["T_CONSTANT_ENCAPSED_STRING","'view'",75],",",["T_WHITESPACE"," ",75],["T_CONSTANT_ENCAPSED_STRING","'sales_order_shipment'",75],",",["T_WHITESPACE"," ",75],["T_STRING","null",75],",",["T_WHITESPACE"," ",75],["T_ARRAY","array",75],"(",["T_CONSTANT_ENCAPSED_STRING","'come_from'",75],["T_DOUBLE_ARROW","=>",75],["T_CONSTANT_ENCAPSED_STRING","'shipment'",75],")",")",";",["T_WHITESPACE","\n        ",75],"}",["T_WHITESPACE"," ",76],["T_ELSE","else",76],["T_WHITESPACE"," ",76],"{",["T_WHITESPACE","\n            ",76],["T_VARIABLE","$this",77],["T_OBJECT_OPERATOR","->",77],["T_STRING","_forward",77],"(",["T_CONSTANT_ENCAPSED_STRING","'noRoute'",77],")",";",["T_WHITESPACE","\n        ",77],"}",["T_WHITESPACE","\n    ",78],"}",["T_WHITESPACE","\n\n    ",79],["T_PUBLIC","public",81],["T_WHITESPACE"," ",81],["T_FUNCTION","function",81],["T_WHITESPACE"," ",81],["T_STRING","pdfshipmentsAction",81],"(",")","{",["T_WHITESPACE","\n        ",81],["T_VARIABLE","$shipmentIds",82],["T_WHITESPACE"," ",82],"=",["T_WHITESPACE"," ",82],["T_VARIABLE","$this",82],["T_OBJECT_OPERATOR","->",82],["T_STRING","getRequest",82],"(",")",["T_OBJECT_OPERATOR","->",82],["T_STRING","getPost",82],"(",["T_CONSTANT_ENCAPSED_STRING","'shipment_ids'",82],")",";",["T_WHITESPACE","\n        ",82],["T_IF","if",83],["T_WHITESPACE"," ",83],"(","!",["T_EMPTY","empty",83],"(",["T_VARIABLE","$shipmentIds",83],")",")",["T_WHITESPACE"," ",83],"{",["T_WHITESPACE","\n            ",83],["T_VARIABLE","$shipments",84],["T_WHITESPACE"," ",84],"=",["T_WHITESPACE"," ",84],["T_STRING","Mage",84],["T_DOUBLE_COLON","::",84],["T_STRING","getResourceModel",84],"(",["T_CONSTANT_ENCAPSED_STRING","'sales\/order_shipment_collection'",84],")",["T_WHITESPACE","\n                ",84],["T_OBJECT_OPERATOR","->",85],["T_STRING","addAttributeToSelect",85],"(",["T_CONSTANT_ENCAPSED_STRING","'*'",85],")",["T_WHITESPACE","\n                ",85],["T_OBJECT_OPERATOR","->",86],["T_STRING","addAttributeToFilter",86],"(",["T_CONSTANT_ENCAPSED_STRING","'entity_id'",86],",",["T_WHITESPACE"," ",86],["T_ARRAY","array",86],"(",["T_CONSTANT_ENCAPSED_STRING","'in'",86],["T_WHITESPACE"," ",86],["T_DOUBLE_ARROW","=>",86],["T_WHITESPACE"," ",86],["T_VARIABLE","$shipmentIds",86],")",")",["T_WHITESPACE","\n                ",86],["T_OBJECT_OPERATOR","->",87],["T_STRING","load",87],"(",")",";",["T_WHITESPACE","\n            ",87],["T_IF","if",88],["T_WHITESPACE"," ",88],"(","!",["T_ISSET","isset",88],"(",["T_VARIABLE","$pdf",88],")",")","{",["T_WHITESPACE","\n                ",88],["T_VARIABLE","$pdf",89],["T_WHITESPACE"," ",89],"=",["T_WHITESPACE"," ",89],["T_STRING","Mage",89],["T_DOUBLE_COLON","::",89],["T_STRING","getModel",89],"(",["T_CONSTANT_ENCAPSED_STRING","'sales\/order_pdf_shipment'",89],")",["T_OBJECT_OPERATOR","->",89],["T_STRING","getPdf",89],"(",["T_VARIABLE","$shipments",89],")",";",["T_WHITESPACE","\n            ",89],"}",["T_WHITESPACE"," ",90],["T_ELSE","else",90],["T_WHITESPACE"," ",90],"{",["T_WHITESPACE","\n                ",90],["T_VARIABLE","$pages",91],["T_WHITESPACE"," ",91],"=",["T_WHITESPACE"," ",91],["T_STRING","Mage",91],["T_DOUBLE_COLON","::",91],["T_STRING","getModel",91],"(",["T_CONSTANT_ENCAPSED_STRING","'sales\/order_pdf_shipment'",91],")",["T_OBJECT_OPERATOR","->",91],["T_STRING","getPdf",91],"(",["T_VARIABLE","$shipments",91],")",";",["T_WHITESPACE","\n                ",91],["T_VARIABLE","$pdf",92],["T_OBJECT_OPERATOR","->",92],["T_STRING","pages",92],["T_WHITESPACE"," ",92],"=",["T_WHITESPACE"," ",92],["T_STRING","array_merge",92],["T_WHITESPACE"," ",92],"(",["T_VARIABLE","$pdf",92],["T_OBJECT_OPERATOR","->",92],["T_STRING","pages",92],",",["T_WHITESPACE"," ",92],["T_VARIABLE","$pages",92],["T_OBJECT_OPERATOR","->",92],["T_STRING","pages",92],")",";",["T_WHITESPACE","\n            ",92],"}",["T_WHITESPACE","\n\n            ",93],["T_RETURN","return",95],["T_WHITESPACE"," ",95],["T_VARIABLE","$this",95],["T_OBJECT_OPERATOR","->",95],["T_STRING","_prepareDownloadResponse",95],"(",["T_CONSTANT_ENCAPSED_STRING","'packingslip'",95],".",["T_STRING","Mage",95],["T_DOUBLE_COLON","::",95],["T_STRING","getSingleton",95],"(",["T_CONSTANT_ENCAPSED_STRING","'core\/date'",95],")",["T_OBJECT_OPERATOR","->",95],["T_STRING","date",95],"(",["T_CONSTANT_ENCAPSED_STRING","'Y-m-d_H-i-s'",95],")",".",["T_CONSTANT_ENCAPSED_STRING","'.pdf'",95],",",["T_WHITESPACE"," ",95],["T_VARIABLE","$pdf",95],["T_OBJECT_OPERATOR","->",95],["T_STRING","render",95],"(",")",",",["T_WHITESPACE"," ",95],["T_CONSTANT_ENCAPSED_STRING","'application\/pdf'",95],")",";",["T_WHITESPACE","\n        ",95],"}",["T_WHITESPACE","\n        ",96],["T_VARIABLE","$this",97],["T_OBJECT_OPERATOR","->",97],["T_STRING","_redirect",97],"(",["T_CONSTANT_ENCAPSED_STRING","'*\/*\/'",97],")",";",["T_WHITESPACE","\n    ",97],"}",["T_WHITESPACE","\n\n\n    ",98],["T_PUBLIC","public",101],["T_WHITESPACE"," ",101],["T_FUNCTION","function",101],["T_WHITESPACE"," ",101],["T_STRING","printAction",101],"(",")",["T_WHITESPACE","\n    ",101],"{",["T_WHITESPACE","\n        ",102],["T_DOC_COMMENT","\/** @see Mage_Adminhtml_Sales_Order_InvoiceController *\/",103],["T_WHITESPACE","\n        ",103],["T_IF","if",104],["T_WHITESPACE"," ",104],"(",["T_VARIABLE","$shipmentId",104],["T_WHITESPACE"," ",104],"=",["T_WHITESPACE"," ",104],["T_VARIABLE","$this",104],["T_OBJECT_OPERATOR","->",104],["T_STRING","getRequest",104],"(",")",["T_OBJECT_OPERATOR","->",104],["T_STRING","getParam",104],"(",["T_CONSTANT_ENCAPSED_STRING","'invoice_id'",104],")",")",["T_WHITESPACE"," ",104],"{",["T_WHITESPACE"," ",104],["T_COMMENT","\/\/ invoice_id o_0\n",104],["T_WHITESPACE","            ",105],["T_IF","if",105],["T_WHITESPACE"," ",105],"(",["T_VARIABLE","$shipment",105],["T_WHITESPACE"," ",105],"=",["T_WHITESPACE"," ",105],["T_STRING","Mage",105],["T_DOUBLE_COLON","::",105],["T_STRING","getModel",105],"(",["T_CONSTANT_ENCAPSED_STRING","'sales\/order_shipment'",105],")",["T_OBJECT_OPERATOR","->",105],["T_STRING","load",105],"(",["T_VARIABLE","$shipmentId",105],")",")",["T_WHITESPACE"," ",105],"{",["T_WHITESPACE","\n                ",105],["T_VARIABLE","$pdf",106],["T_WHITESPACE"," ",106],"=",["T_WHITESPACE"," ",106],["T_STRING","Mage",106],["T_DOUBLE_COLON","::",106],["T_STRING","getModel",106],"(",["T_CONSTANT_ENCAPSED_STRING","'sales\/order_pdf_shipment'",106],")",["T_OBJECT_OPERATOR","->",106],["T_STRING","getPdf",106],"(",["T_ARRAY","array",106],"(",["T_VARIABLE","$shipment",106],")",")",";",["T_WHITESPACE","\n                ",106],["T_VARIABLE","$this",107],["T_OBJECT_OPERATOR","->",107],["T_STRING","_prepareDownloadResponse",107],"(",["T_CONSTANT_ENCAPSED_STRING","'packingslip'",107],".",["T_STRING","Mage",107],["T_DOUBLE_COLON","::",107],["T_STRING","getSingleton",107],"(",["T_CONSTANT_ENCAPSED_STRING","'core\/date'",107],")",["T_OBJECT_OPERATOR","->",107],["T_STRING","date",107],"(",["T_CONSTANT_ENCAPSED_STRING","'Y-m-d_H-i-s'",107],")",".",["T_CONSTANT_ENCAPSED_STRING","'.pdf'",107],",",["T_WHITESPACE"," ",107],["T_VARIABLE","$pdf",107],["T_OBJECT_OPERATOR","->",107],["T_STRING","render",107],"(",")",",",["T_WHITESPACE"," ",107],["T_CONSTANT_ENCAPSED_STRING","'application\/pdf'",107],")",";",["T_WHITESPACE","\n            ",107],"}",["T_WHITESPACE","\n        ",108],"}",["T_WHITESPACE","\n        ",109],["T_ELSE","else",110],["T_WHITESPACE"," ",110],"{",["T_WHITESPACE","\n            ",110],["T_VARIABLE","$this",111],["T_OBJECT_OPERATOR","->",111],["T_STRING","_forward",111],"(",["T_CONSTANT_ENCAPSED_STRING","'noRoute'",111],")",";",["T_WHITESPACE","\n        ",111],"}",["T_WHITESPACE","\n    ",112],"}",["T_WHITESPACE","\n\n    ",113],["T_PROTECTED","protected",115],["T_WHITESPACE"," ",115],["T_FUNCTION","function",115],["T_WHITESPACE"," ",115],["T_STRING","_isAllowed",115],"(",")",["T_WHITESPACE","\n    ",115],"{",["T_WHITESPACE","\n        ",116],["T_RETURN","return",117],["T_WHITESPACE"," ",117],["T_STRING","Mage",117],["T_DOUBLE_COLON","::",117],["T_STRING","getSingleton",117],"(",["T_CONSTANT_ENCAPSED_STRING","'admin\/session'",117],")",["T_OBJECT_OPERATOR","->",117],["T_STRING","isAllowed",117],"(",["T_CONSTANT_ENCAPSED_STRING","'sales\/shipment'",117],")",";",["T_WHITESPACE","\n    ",117],"}",["T_WHITESPACE","\n",118],"}",["T_WHITESPACE","\n",119]]
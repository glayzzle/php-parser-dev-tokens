[["T_OPEN_TAG","<?php\n",1],["T_DOC_COMMENT","\/**\n * Magento\n *\n * NOTICE OF LICENSE\n *\n * This source file is subject to the Open Software License (OSL 3.0)\n * that is bundled with this package in the file LICENSE.txt.\n * It is also available through the world-wide-web at this URL:\n * http:\/\/opensource.org\/licenses\/osl-3.0.php\n * If you did not receive a copy of the license and are unable to\n * obtain it through the world-wide-web, please send an email\n * to license@magento.com so we can send you a copy immediately.\n *\n * DISCLAIMER\n *\n * Do not edit or add to this file if you wish to upgrade Magento to newer\n * versions in the future. If you wish to customize Magento for your\n * needs please refer to http:\/\/www.magento.com for more information.\n *\n * @category    Mage\n * @package     Mage_Adminhtml\n * @copyright  Copyright (c) 2006-2016 X.commerce, Inc. and affiliates (http:\/\/www.magento.com)\n * @license    http:\/\/opensource.org\/licenses\/osl-3.0.php  Open Software License (OSL 3.0)\n *\/",2],["T_WHITESPACE","\n",25],["T_DOC_COMMENT","\/**\n * Manage Newsletter Template Controller\n *\n * @category   Mage\n * @package    Mage_Adminhtml\n * @author     Magento Core Team <core@magentocommerce.com>\n *\/",26],["T_WHITESPACE","\n",32],["T_CLASS","class",33],["T_WHITESPACE"," ",33],["T_STRING","Mage_Adminhtml_Newsletter_TemplateController",33],["T_WHITESPACE"," ",33],["T_EXTENDS","extends",33],["T_WHITESPACE"," ",33],["T_STRING","Mage_Adminhtml_Controller_Action",33],["T_WHITESPACE","\n",33],"{",["T_WHITESPACE","\n    ",34],["T_DOC_COMMENT","\/**\n     * Check is allowed access\n     *\n     * @return bool\n     *\/",35],["T_WHITESPACE","\n    ",39],["T_PROTECTED","protected",40],["T_WHITESPACE"," ",40],["T_FUNCTION","function",40],["T_WHITESPACE"," ",40],["T_STRING","_isAllowed",40],["T_WHITESPACE"," ",40],"(",")",["T_WHITESPACE","\n    ",40],"{",["T_WHITESPACE","\n        ",41],["T_RETURN","return",42],["T_WHITESPACE"," ",42],["T_STRING","Mage",42],["T_DOUBLE_COLON","::",42],["T_STRING","getSingleton",42],"(",["T_CONSTANT_ENCAPSED_STRING","'admin\/session'",42],")",["T_WHITESPACE","\n            ",42],["T_OBJECT_OPERATOR","->",43],["T_STRING","isAllowed",43],"(",["T_CONSTANT_ENCAPSED_STRING","'newsletter\/template'",43],")",";",["T_WHITESPACE","\n    ",43],"}",["T_WHITESPACE","\n\n    ",44],["T_DOC_COMMENT","\/**\n     * Set title of page\n     *\n     * @return Mage_Adminhtml_Newsletter_TemplateController\n     *\/",46],["T_WHITESPACE","\n    ",50],["T_PROTECTED","protected",51],["T_WHITESPACE"," ",51],["T_FUNCTION","function",51],["T_WHITESPACE"," ",51],["T_STRING","_setTitle",51],"(",")",["T_WHITESPACE","\n    ",51],"{",["T_WHITESPACE","\n        ",52],["T_RETURN","return",53],["T_WHITESPACE"," ",53],["T_VARIABLE","$this",53],["T_OBJECT_OPERATOR","->",53],["T_STRING","_title",53],"(",["T_VARIABLE","$this",53],["T_OBJECT_OPERATOR","->",53],["T_STRING","__",53],"(",["T_CONSTANT_ENCAPSED_STRING","'Newsletter'",53],")",")",["T_OBJECT_OPERATOR","->",53],["T_STRING","_title",53],"(",["T_VARIABLE","$this",53],["T_OBJECT_OPERATOR","->",53],["T_STRING","__",53],"(",["T_CONSTANT_ENCAPSED_STRING","'Newsletter Templates'",53],")",")",";",["T_WHITESPACE","\n    ",53],"}",["T_WHITESPACE","\n\n    ",54],["T_DOC_COMMENT","\/**\n     * View Templates list\n     *\n     *\/",56],["T_WHITESPACE","\n    ",59],["T_PUBLIC","public",60],["T_WHITESPACE"," ",60],["T_FUNCTION","function",60],["T_WHITESPACE"," ",60],["T_STRING","indexAction",60],["T_WHITESPACE"," ",60],"(",")",["T_WHITESPACE","\n    ",60],"{",["T_WHITESPACE","\n        ",61],["T_VARIABLE","$this",62],["T_OBJECT_OPERATOR","->",62],["T_STRING","_setTitle",62],"(",")",";",["T_WHITESPACE","\n\n        ",62],["T_IF","if",64],["T_WHITESPACE"," ",64],"(",["T_VARIABLE","$this",64],["T_OBJECT_OPERATOR","->",64],["T_STRING","getRequest",64],"(",")",["T_OBJECT_OPERATOR","->",64],["T_STRING","getQuery",64],"(",["T_CONSTANT_ENCAPSED_STRING","'ajax'",64],")",")",["T_WHITESPACE"," ",64],"{",["T_WHITESPACE","\n            ",64],["T_VARIABLE","$this",65],["T_OBJECT_OPERATOR","->",65],["T_STRING","_forward",65],"(",["T_CONSTANT_ENCAPSED_STRING","'grid'",65],")",";",["T_WHITESPACE","\n            ",65],["T_RETURN","return",66],";",["T_WHITESPACE","\n        ",66],"}",["T_WHITESPACE","\n        ",67],["T_VARIABLE","$this",68],["T_OBJECT_OPERATOR","->",68],["T_STRING","loadLayout",68],"(",")",";",["T_WHITESPACE","\n        ",68],["T_VARIABLE","$this",69],["T_OBJECT_OPERATOR","->",69],["T_STRING","_setActiveMenu",69],"(",["T_CONSTANT_ENCAPSED_STRING","'newsletter\/template'",69],")",";",["T_WHITESPACE","\n        ",69],["T_VARIABLE","$this",70],["T_OBJECT_OPERATOR","->",70],["T_STRING","_addBreadcrumb",70],"(",["T_STRING","Mage",70],["T_DOUBLE_COLON","::",70],["T_STRING","helper",70],"(",["T_CONSTANT_ENCAPSED_STRING","'newsletter'",70],")",["T_OBJECT_OPERATOR","->",70],["T_STRING","__",70],"(",["T_CONSTANT_ENCAPSED_STRING","'Newsletter Templates'",70],")",",",["T_WHITESPACE"," ",70],["T_STRING","Mage",70],["T_DOUBLE_COLON","::",70],["T_STRING","helper",70],"(",["T_CONSTANT_ENCAPSED_STRING","'newsletter'",70],")",["T_OBJECT_OPERATOR","->",70],["T_STRING","__",70],"(",["T_CONSTANT_ENCAPSED_STRING","'Newsletter Templates'",70],")",")",";",["T_WHITESPACE","\n        ",70],["T_VARIABLE","$this",71],["T_OBJECT_OPERATOR","->",71],["T_STRING","_addContent",71],"(",["T_VARIABLE","$this",71],["T_OBJECT_OPERATOR","->",71],["T_STRING","getLayout",71],"(",")",["T_OBJECT_OPERATOR","->",71],["T_STRING","createBlock",71],"(",["T_CONSTANT_ENCAPSED_STRING","'adminhtml\/newsletter_template'",71],",",["T_WHITESPACE"," ",71],["T_CONSTANT_ENCAPSED_STRING","'template'",71],")",")",";",["T_WHITESPACE","\n        ",71],["T_VARIABLE","$this",72],["T_OBJECT_OPERATOR","->",72],["T_STRING","renderLayout",72],"(",")",";",["T_WHITESPACE","\n    ",72],"}",["T_WHITESPACE","\n\n    ",73],["T_DOC_COMMENT","\/**\n     * JSON Grid Action\n     *\n     *\/",75],["T_WHITESPACE","\n    ",78],["T_PUBLIC","public",79],["T_WHITESPACE"," ",79],["T_FUNCTION","function",79],["T_WHITESPACE"," ",79],["T_STRING","gridAction",79],["T_WHITESPACE"," ",79],"(",")",["T_WHITESPACE","\n    ",79],"{",["T_WHITESPACE","\n        ",80],["T_VARIABLE","$this",81],["T_OBJECT_OPERATOR","->",81],["T_STRING","loadLayout",81],"(",")",";",["T_WHITESPACE","\n        ",81],["T_VARIABLE","$grid",82],["T_WHITESPACE"," ",82],"=",["T_WHITESPACE"," ",82],["T_VARIABLE","$this",82],["T_OBJECT_OPERATOR","->",82],["T_STRING","getLayout",82],"(",")",["T_OBJECT_OPERATOR","->",82],["T_STRING","createBlock",82],"(",["T_CONSTANT_ENCAPSED_STRING","'adminhtml\/newsletter_template_grid'",82],")",["T_WHITESPACE","\n            ",82],["T_OBJECT_OPERATOR","->",83],["T_STRING","toHtml",83],"(",")",";",["T_WHITESPACE","\n        ",83],["T_VARIABLE","$this",84],["T_OBJECT_OPERATOR","->",84],["T_STRING","getResponse",84],"(",")",["T_OBJECT_OPERATOR","->",84],["T_STRING","setBody",84],"(",["T_VARIABLE","$grid",84],")",";",["T_WHITESPACE","\n    ",84],"}",["T_WHITESPACE","\n\n    ",85],["T_DOC_COMMENT","\/**\n     * Create new Newsletter Template\n     *\n     *\/",87],["T_WHITESPACE","\n    ",90],["T_PUBLIC","public",91],["T_WHITESPACE"," ",91],["T_FUNCTION","function",91],["T_WHITESPACE"," ",91],["T_STRING","newAction",91],["T_WHITESPACE"," ",91],"(",")",["T_WHITESPACE","\n    ",91],"{",["T_WHITESPACE","\n        ",92],["T_VARIABLE","$this",93],["T_OBJECT_OPERATOR","->",93],["T_STRING","_forward",93],"(",["T_CONSTANT_ENCAPSED_STRING","'edit'",93],")",";",["T_WHITESPACE","\n    ",93],"}",["T_WHITESPACE","\n\n    ",94],["T_DOC_COMMENT","\/**\n     * Edit Newsletter Template\n     *\n     *\/",96],["T_WHITESPACE","\n    ",99],["T_PUBLIC","public",100],["T_WHITESPACE"," ",100],["T_FUNCTION","function",100],["T_WHITESPACE"," ",100],["T_STRING","editAction",100],["T_WHITESPACE"," ",100],"(",")",["T_WHITESPACE","\n    ",100],"{",["T_WHITESPACE","\n        ",101],["T_VARIABLE","$this",102],["T_OBJECT_OPERATOR","->",102],["T_STRING","_setTitle",102],"(",")",";",["T_WHITESPACE","\n\n        ",102],["T_VARIABLE","$model",104],["T_WHITESPACE"," ",104],"=",["T_WHITESPACE"," ",104],["T_STRING","Mage",104],["T_DOUBLE_COLON","::",104],["T_STRING","getModel",104],"(",["T_CONSTANT_ENCAPSED_STRING","'newsletter\/template'",104],")",";",["T_WHITESPACE","\n        ",104],["T_IF","if",105],["T_WHITESPACE"," ",105],"(",["T_VARIABLE","$id",105],["T_WHITESPACE"," ",105],"=",["T_WHITESPACE"," ",105],["T_VARIABLE","$this",105],["T_OBJECT_OPERATOR","->",105],["T_STRING","getRequest",105],"(",")",["T_OBJECT_OPERATOR","->",105],["T_STRING","getParam",105],"(",["T_CONSTANT_ENCAPSED_STRING","'id'",105],")",")",["T_WHITESPACE"," ",105],"{",["T_WHITESPACE","\n            ",105],["T_VARIABLE","$model",106],["T_OBJECT_OPERATOR","->",106],["T_STRING","load",106],"(",["T_VARIABLE","$id",106],")",";",["T_WHITESPACE","\n        ",106],"}",["T_WHITESPACE","\n\n        ",107],["T_STRING","Mage",109],["T_DOUBLE_COLON","::",109],["T_STRING","register",109],"(",["T_CONSTANT_ENCAPSED_STRING","'_current_template'",109],",",["T_WHITESPACE"," ",109],["T_VARIABLE","$model",109],")",";",["T_WHITESPACE","\n\n        ",109],["T_VARIABLE","$this",111],["T_OBJECT_OPERATOR","->",111],["T_STRING","loadLayout",111],"(",")",";",["T_WHITESPACE","\n        ",111],["T_VARIABLE","$this",112],["T_OBJECT_OPERATOR","->",112],["T_STRING","_setActiveMenu",112],"(",["T_CONSTANT_ENCAPSED_STRING","'newsletter\/template'",112],")",";",["T_WHITESPACE","\n\n        ",112],["T_IF","if",114],["T_WHITESPACE"," ",114],"(",["T_VARIABLE","$model",114],["T_OBJECT_OPERATOR","->",114],["T_STRING","getId",114],"(",")",")",["T_WHITESPACE"," ",114],"{",["T_WHITESPACE","\n            ",114],["T_VARIABLE","$breadcrumbTitle",115],["T_WHITESPACE"," ",115],"=",["T_WHITESPACE"," ",115],["T_STRING","Mage",115],["T_DOUBLE_COLON","::",115],["T_STRING","helper",115],"(",["T_CONSTANT_ENCAPSED_STRING","'newsletter'",115],")",["T_OBJECT_OPERATOR","->",115],["T_STRING","__",115],"(",["T_CONSTANT_ENCAPSED_STRING","'Edit Template'",115],")",";",["T_WHITESPACE","\n            ",115],["T_VARIABLE","$breadcrumbLabel",116],["T_WHITESPACE"," ",116],"=",["T_WHITESPACE"," ",116],["T_VARIABLE","$breadcrumbTitle",116],";",["T_WHITESPACE","\n        ",116],"}",["T_WHITESPACE","\n        ",117],["T_ELSE","else",118],["T_WHITESPACE"," ",118],"{",["T_WHITESPACE","\n            ",118],["T_VARIABLE","$breadcrumbTitle",119],["T_WHITESPACE"," ",119],"=",["T_WHITESPACE"," ",119],["T_STRING","Mage",119],["T_DOUBLE_COLON","::",119],["T_STRING","helper",119],"(",["T_CONSTANT_ENCAPSED_STRING","'newsletter'",119],")",["T_OBJECT_OPERATOR","->",119],["T_STRING","__",119],"(",["T_CONSTANT_ENCAPSED_STRING","'New Template'",119],")",";",["T_WHITESPACE","\n            ",119],["T_VARIABLE","$breadcrumbLabel",120],["T_WHITESPACE"," ",120],"=",["T_WHITESPACE"," ",120],["T_STRING","Mage",120],["T_DOUBLE_COLON","::",120],["T_STRING","helper",120],"(",["T_CONSTANT_ENCAPSED_STRING","'newsletter'",120],")",["T_OBJECT_OPERATOR","->",120],["T_STRING","__",120],"(",["T_CONSTANT_ENCAPSED_STRING","'Create Newsletter Template'",120],")",";",["T_WHITESPACE","\n        ",120],"}",["T_WHITESPACE","\n\n        ",121],["T_VARIABLE","$this",123],["T_OBJECT_OPERATOR","->",123],["T_STRING","_title",123],"(",["T_VARIABLE","$model",123],["T_OBJECT_OPERATOR","->",123],["T_STRING","getId",123],"(",")",["T_WHITESPACE"," ",123],"?",["T_WHITESPACE"," ",123],["T_VARIABLE","$model",123],["T_OBJECT_OPERATOR","->",123],["T_STRING","getTemplateCode",123],"(",")",["T_WHITESPACE"," ",123],":",["T_WHITESPACE"," ",123],["T_VARIABLE","$this",123],["T_OBJECT_OPERATOR","->",123],["T_STRING","__",123],"(",["T_CONSTANT_ENCAPSED_STRING","'New Template'",123],")",")",";",["T_WHITESPACE","\n\n        ",123],["T_VARIABLE","$this",125],["T_OBJECT_OPERATOR","->",125],["T_STRING","_addBreadcrumb",125],"(",["T_VARIABLE","$breadcrumbLabel",125],",",["T_WHITESPACE"," ",125],["T_VARIABLE","$breadcrumbTitle",125],")",";",["T_WHITESPACE","\n\n        ",125],["T_COMMENT","\/\/ restore data\n",127],["T_WHITESPACE","        ",128],["T_IF","if",128],["T_WHITESPACE"," ",128],"(",["T_VARIABLE","$values",128],["T_WHITESPACE"," ",128],"=",["T_WHITESPACE"," ",128],["T_VARIABLE","$this",128],["T_OBJECT_OPERATOR","->",128],["T_STRING","_getSession",128],"(",")",["T_OBJECT_OPERATOR","->",128],["T_STRING","getData",128],"(",["T_CONSTANT_ENCAPSED_STRING","'newsletter_template_form_data'",128],",",["T_WHITESPACE"," ",128],["T_STRING","true",128],")",")",["T_WHITESPACE"," ",128],"{",["T_WHITESPACE","\n            ",128],["T_VARIABLE","$model",129],["T_OBJECT_OPERATOR","->",129],["T_STRING","addData",129],"(",["T_VARIABLE","$values",129],")",";",["T_WHITESPACE","\n        ",129],"}",["T_WHITESPACE","\n\n        ",130],["T_IF","if",132],["T_WHITESPACE"," ",132],"(",["T_VARIABLE","$editBlock",132],["T_WHITESPACE"," ",132],"=",["T_WHITESPACE"," ",132],["T_VARIABLE","$this",132],["T_OBJECT_OPERATOR","->",132],["T_STRING","getLayout",132],"(",")",["T_OBJECT_OPERATOR","->",132],["T_STRING","getBlock",132],"(",["T_CONSTANT_ENCAPSED_STRING","'template_edit'",132],")",")",["T_WHITESPACE"," ",132],"{",["T_WHITESPACE","\n            ",132],["T_VARIABLE","$editBlock",133],["T_OBJECT_OPERATOR","->",133],["T_STRING","setEditMode",133],"(",["T_VARIABLE","$model",133],["T_OBJECT_OPERATOR","->",133],["T_STRING","getId",133],"(",")",["T_WHITESPACE"," ",133],">",["T_WHITESPACE"," ",133],["T_LNUMBER","0",133],")",";",["T_WHITESPACE","\n        ",133],"}",["T_WHITESPACE","\n\n        ",134],["T_VARIABLE","$this",136],["T_OBJECT_OPERATOR","->",136],["T_STRING","renderLayout",136],"(",")",";",["T_WHITESPACE","\n    ",136],"}",["T_WHITESPACE","\n\n    ",137],["T_DOC_COMMENT","\/**\n     * Drop Newsletter Template\n     *\n     *\/",139],["T_WHITESPACE","\n    ",142],["T_PUBLIC","public",143],["T_WHITESPACE"," ",143],["T_FUNCTION","function",143],["T_WHITESPACE"," ",143],["T_STRING","dropAction",143],["T_WHITESPACE"," ",143],"(",")",["T_WHITESPACE","\n    ",143],"{",["T_WHITESPACE","\n        ",144],["T_VARIABLE","$this",145],["T_OBJECT_OPERATOR","->",145],["T_STRING","loadLayout",145],"(",["T_CONSTANT_ENCAPSED_STRING","'newsletter_template_preview'",145],")",";",["T_WHITESPACE","\n        ",145],["T_VARIABLE","$this",146],["T_OBJECT_OPERATOR","->",146],["T_STRING","renderLayout",146],"(",")",";",["T_WHITESPACE","\n    ",146],"}",["T_WHITESPACE","\n\n    ",147],["T_DOC_COMMENT","\/**\n     * Save Newsletter Template\n     *\n     *\/",149],["T_WHITESPACE","\n    ",152],["T_PUBLIC","public",153],["T_WHITESPACE"," ",153],["T_FUNCTION","function",153],["T_WHITESPACE"," ",153],["T_STRING","saveAction",153],["T_WHITESPACE"," ",153],"(",")",["T_WHITESPACE","\n    ",153],"{",["T_WHITESPACE","\n        ",154],["T_VARIABLE","$request",155],["T_WHITESPACE"," ",155],"=",["T_WHITESPACE"," ",155],["T_VARIABLE","$this",155],["T_OBJECT_OPERATOR","->",155],["T_STRING","getRequest",155],"(",")",";",["T_WHITESPACE","\n        ",155],["T_IF","if",156],["T_WHITESPACE"," ",156],"(","!",["T_VARIABLE","$request",156],["T_OBJECT_OPERATOR","->",156],["T_STRING","isPost",156],"(",")",")",["T_WHITESPACE"," ",156],"{",["T_WHITESPACE","\n            ",156],["T_VARIABLE","$this",157],["T_OBJECT_OPERATOR","->",157],["T_STRING","getResponse",157],"(",")",["T_OBJECT_OPERATOR","->",157],["T_STRING","setRedirect",157],"(",["T_VARIABLE","$this",157],["T_OBJECT_OPERATOR","->",157],["T_STRING","getUrl",157],"(",["T_CONSTANT_ENCAPSED_STRING","'*\/newsletter_template'",157],")",")",";",["T_WHITESPACE","\n        ",157],"}",["T_WHITESPACE","\n        ",158],["T_VARIABLE","$template",159],["T_WHITESPACE"," ",159],"=",["T_WHITESPACE"," ",159],["T_STRING","Mage",159],["T_DOUBLE_COLON","::",159],["T_STRING","getModel",159],"(",["T_CONSTANT_ENCAPSED_STRING","'newsletter\/template'",159],")",";",["T_WHITESPACE","\n\n        ",159],["T_IF","if",161],["T_WHITESPACE"," ",161],"(",["T_VARIABLE","$id",161],["T_WHITESPACE"," ",161],"=",["T_WHITESPACE"," ",161],["T_INT_CAST","(int)",161],["T_VARIABLE","$request",161],["T_OBJECT_OPERATOR","->",161],["T_STRING","getParam",161],"(",["T_CONSTANT_ENCAPSED_STRING","'id'",161],")",")",["T_WHITESPACE"," ",161],"{",["T_WHITESPACE","\n            ",161],["T_VARIABLE","$template",162],["T_OBJECT_OPERATOR","->",162],["T_STRING","load",162],"(",["T_VARIABLE","$id",162],")",";",["T_WHITESPACE","\n        ",162],"}",["T_WHITESPACE","\n\n        ",163],["T_TRY","try",165],["T_WHITESPACE"," ",165],"{",["T_WHITESPACE","\n            ",165],["T_VARIABLE","$template",166],["T_OBJECT_OPERATOR","->",166],["T_STRING","addData",166],"(",["T_VARIABLE","$request",166],["T_OBJECT_OPERATOR","->",166],["T_STRING","getParams",166],"(",")",")",["T_WHITESPACE","\n                ",166],["T_OBJECT_OPERATOR","->",167],["T_STRING","setTemplateSubject",167],"(",["T_VARIABLE","$request",167],["T_OBJECT_OPERATOR","->",167],["T_STRING","getParam",167],"(",["T_CONSTANT_ENCAPSED_STRING","'subject'",167],")",")",["T_WHITESPACE","\n                ",167],["T_OBJECT_OPERATOR","->",168],["T_STRING","setTemplateCode",168],"(",["T_VARIABLE","$request",168],["T_OBJECT_OPERATOR","->",168],["T_STRING","getParam",168],"(",["T_CONSTANT_ENCAPSED_STRING","'code'",168],")",")",["T_WHITESPACE","\n                ",168],["T_OBJECT_OPERATOR","->",169],["T_STRING","setTemplateSenderEmail",169],"(",["T_VARIABLE","$request",169],["T_OBJECT_OPERATOR","->",169],["T_STRING","getParam",169],"(",["T_CONSTANT_ENCAPSED_STRING","'sender_email'",169],")",")",["T_WHITESPACE","\n                ",169],["T_OBJECT_OPERATOR","->",170],["T_STRING","setTemplateSenderName",170],"(",["T_VARIABLE","$request",170],["T_OBJECT_OPERATOR","->",170],["T_STRING","getParam",170],"(",["T_CONSTANT_ENCAPSED_STRING","'sender_name'",170],")",")",["T_WHITESPACE","\n                ",170],["T_OBJECT_OPERATOR","->",171],["T_STRING","setTemplateText",171],"(",["T_VARIABLE","$request",171],["T_OBJECT_OPERATOR","->",171],["T_STRING","getParam",171],"(",["T_CONSTANT_ENCAPSED_STRING","'text'",171],")",")",["T_WHITESPACE","\n                ",171],["T_OBJECT_OPERATOR","->",172],["T_STRING","setTemplateStyles",172],"(",["T_VARIABLE","$request",172],["T_OBJECT_OPERATOR","->",172],["T_STRING","getParam",172],"(",["T_CONSTANT_ENCAPSED_STRING","'styles'",172],")",")",["T_WHITESPACE","\n                ",172],["T_OBJECT_OPERATOR","->",173],["T_STRING","setModifiedAt",173],"(",["T_STRING","Mage",173],["T_DOUBLE_COLON","::",173],["T_STRING","getSingleton",173],"(",["T_CONSTANT_ENCAPSED_STRING","'core\/date'",173],")",["T_OBJECT_OPERATOR","->",173],["T_STRING","gmtDate",173],"(",")",")",";",["T_WHITESPACE","\n\n            ",173],["T_IF","if",175],["T_WHITESPACE"," ",175],"(","!",["T_VARIABLE","$template",175],["T_OBJECT_OPERATOR","->",175],["T_STRING","getId",175],"(",")",")",["T_WHITESPACE"," ",175],"{",["T_WHITESPACE","\n                ",175],["T_VARIABLE","$template",176],["T_OBJECT_OPERATOR","->",176],["T_STRING","setTemplateType",176],"(",["T_STRING","Mage_Newsletter_Model_Template",176],["T_DOUBLE_COLON","::",176],["T_STRING","TYPE_HTML",176],")",";",["T_WHITESPACE","\n            ",176],"}",["T_WHITESPACE","\n            ",177],["T_IF","if",178],["T_WHITESPACE"," ",178],"(",["T_VARIABLE","$this",178],["T_OBJECT_OPERATOR","->",178],["T_STRING","getRequest",178],"(",")",["T_OBJECT_OPERATOR","->",178],["T_STRING","getParam",178],"(",["T_CONSTANT_ENCAPSED_STRING","'_change_type_flag'",178],")",")",["T_WHITESPACE"," ",178],"{",["T_WHITESPACE","\n                ",178],["T_VARIABLE","$template",179],["T_OBJECT_OPERATOR","->",179],["T_STRING","setTemplateType",179],"(",["T_STRING","Mage_Newsletter_Model_Template",179],["T_DOUBLE_COLON","::",179],["T_STRING","TYPE_TEXT",179],")",";",["T_WHITESPACE","\n                ",179],["T_VARIABLE","$template",180],["T_OBJECT_OPERATOR","->",180],["T_STRING","setTemplateStyles",180],"(",["T_CONSTANT_ENCAPSED_STRING","''",180],")",";",["T_WHITESPACE","\n            ",180],"}",["T_WHITESPACE","\n            ",181],["T_IF","if",182],["T_WHITESPACE"," ",182],"(",["T_VARIABLE","$this",182],["T_OBJECT_OPERATOR","->",182],["T_STRING","getRequest",182],"(",")",["T_OBJECT_OPERATOR","->",182],["T_STRING","getParam",182],"(",["T_CONSTANT_ENCAPSED_STRING","'_save_as_flag'",182],")",")",["T_WHITESPACE"," ",182],"{",["T_WHITESPACE","\n                ",182],["T_VARIABLE","$template",183],["T_OBJECT_OPERATOR","->",183],["T_STRING","setId",183],"(",["T_STRING","null",183],")",";",["T_WHITESPACE","\n            ",183],"}",["T_WHITESPACE","\n            ",184],["T_VARIABLE","$template",185],["T_OBJECT_OPERATOR","->",185],["T_STRING","save",185],"(",")",";",["T_WHITESPACE","\n            ",185],["T_VARIABLE","$this",186],["T_OBJECT_OPERATOR","->",186],["T_STRING","_redirect",186],"(",["T_CONSTANT_ENCAPSED_STRING","'*\/*'",186],")",";",["T_WHITESPACE","\n        ",186],"}",["T_WHITESPACE","\n        ",187],["T_CATCH","catch",188],["T_WHITESPACE"," ",188],"(",["T_STRING","Mage_Core_Exception",188],["T_WHITESPACE"," ",188],["T_VARIABLE","$e",188],")",["T_WHITESPACE"," ",188],"{",["T_WHITESPACE","\n            ",188],["T_VARIABLE","$this",189],["T_OBJECT_OPERATOR","->",189],["T_STRING","_getSession",189],"(",")",["T_OBJECT_OPERATOR","->",189],["T_STRING","addError",189],"(",["T_STRING","nl2br",189],"(",["T_VARIABLE","$e",189],["T_OBJECT_OPERATOR","->",189],["T_STRING","getMessage",189],"(",")",")",")",";",["T_WHITESPACE","\n            ",189],["T_VARIABLE","$this",190],["T_OBJECT_OPERATOR","->",190],["T_STRING","_getSession",190],"(",")",["T_OBJECT_OPERATOR","->",190],["T_STRING","setData",190],"(",["T_CONSTANT_ENCAPSED_STRING","'newsletter_template_form_data'",190],",",["T_WHITESPACE","\n                ",190],["T_VARIABLE","$this",191],["T_OBJECT_OPERATOR","->",191],["T_STRING","getRequest",191],"(",")",["T_OBJECT_OPERATOR","->",191],["T_STRING","getParams",191],"(",")",")",";",["T_WHITESPACE","\n        ",191],"}",["T_WHITESPACE","\n        ",192],["T_CATCH","catch",193],["T_WHITESPACE"," ",193],"(",["T_STRING","Exception",193],["T_WHITESPACE"," ",193],["T_VARIABLE","$e",193],")",["T_WHITESPACE"," ",193],"{",["T_WHITESPACE","\n            ",193],["T_VARIABLE","$this",194],["T_OBJECT_OPERATOR","->",194],["T_STRING","_getSession",194],"(",")",["T_OBJECT_OPERATOR","->",194],["T_STRING","addException",194],"(",["T_VARIABLE","$e",194],",",["T_WHITESPACE"," ",194],["T_STRING","Mage",194],["T_DOUBLE_COLON","::",194],["T_STRING","helper",194],"(",["T_CONSTANT_ENCAPSED_STRING","'adminhtml'",194],")",["T_OBJECT_OPERATOR","->",194],["T_STRING","__",194],"(",["T_CONSTANT_ENCAPSED_STRING","'An error occurred while saving this template.'",194],")",")",";",["T_WHITESPACE","\n            ",194],["T_VARIABLE","$this",195],["T_OBJECT_OPERATOR","->",195],["T_STRING","_getSession",195],"(",")",["T_OBJECT_OPERATOR","->",195],["T_STRING","setData",195],"(",["T_CONSTANT_ENCAPSED_STRING","'newsletter_template_form_data'",195],",",["T_WHITESPACE"," ",195],["T_VARIABLE","$this",195],["T_OBJECT_OPERATOR","->",195],["T_STRING","getRequest",195],"(",")",["T_OBJECT_OPERATOR","->",195],["T_STRING","getParams",195],"(",")",")",";",["T_WHITESPACE","\n        ",195],"}",["T_WHITESPACE","\n        ",196],["T_VARIABLE","$this",197],["T_OBJECT_OPERATOR","->",197],["T_STRING","_forward",197],"(",["T_CONSTANT_ENCAPSED_STRING","'new'",197],")",";",["T_WHITESPACE","\n    ",197],"}",["T_WHITESPACE","\n\n    ",198],["T_DOC_COMMENT","\/**\n     * Delete newsletter Template\n     *\n     *\/",200],["T_WHITESPACE","\n    ",203],["T_PUBLIC","public",204],["T_WHITESPACE"," ",204],["T_FUNCTION","function",204],["T_WHITESPACE"," ",204],["T_STRING","deleteAction",204],["T_WHITESPACE"," ",204],"(",")",["T_WHITESPACE","\n    ",204],"{",["T_WHITESPACE","\n        ",205],["T_VARIABLE","$template",206],["T_WHITESPACE"," ",206],"=",["T_WHITESPACE"," ",206],["T_STRING","Mage",206],["T_DOUBLE_COLON","::",206],["T_STRING","getModel",206],"(",["T_CONSTANT_ENCAPSED_STRING","'newsletter\/template'",206],")",["T_WHITESPACE","\n            ",206],["T_OBJECT_OPERATOR","->",207],["T_STRING","load",207],"(",["T_VARIABLE","$this",207],["T_OBJECT_OPERATOR","->",207],["T_STRING","getRequest",207],"(",")",["T_OBJECT_OPERATOR","->",207],["T_STRING","getParam",207],"(",["T_CONSTANT_ENCAPSED_STRING","'id'",207],")",")",";",["T_WHITESPACE","\n        ",207],["T_IF","if",208],["T_WHITESPACE"," ",208],"(",["T_VARIABLE","$template",208],["T_OBJECT_OPERATOR","->",208],["T_STRING","getId",208],"(",")",")",["T_WHITESPACE"," ",208],"{",["T_WHITESPACE","\n            ",208],["T_TRY","try",209],["T_WHITESPACE"," ",209],"{",["T_WHITESPACE","\n                ",209],["T_VARIABLE","$template",210],["T_OBJECT_OPERATOR","->",210],["T_STRING","delete",210],"(",")",";",["T_WHITESPACE","\n            ",210],"}",["T_WHITESPACE","\n            ",211],["T_CATCH","catch",212],["T_WHITESPACE"," ",212],"(",["T_STRING","Mage_Core_Exception",212],["T_WHITESPACE"," ",212],["T_VARIABLE","$e",212],")",["T_WHITESPACE"," ",212],"{",["T_WHITESPACE","\n                ",212],["T_VARIABLE","$this",213],["T_OBJECT_OPERATOR","->",213],["T_STRING","_getSession",213],"(",")",["T_OBJECT_OPERATOR","->",213],["T_STRING","addError",213],"(",["T_VARIABLE","$e",213],["T_OBJECT_OPERATOR","->",213],["T_STRING","getMessage",213],"(",")",")",";",["T_WHITESPACE","\n            ",213],"}",["T_WHITESPACE","\n            ",214],["T_CATCH","catch",215],["T_WHITESPACE"," ",215],"(",["T_STRING","Exception",215],["T_WHITESPACE"," ",215],["T_VARIABLE","$e",215],")",["T_WHITESPACE"," ",215],"{",["T_WHITESPACE","\n                ",215],["T_VARIABLE","$this",216],["T_OBJECT_OPERATOR","->",216],["T_STRING","_getSession",216],"(",")",["T_OBJECT_OPERATOR","->",216],["T_STRING","addException",216],"(",["T_VARIABLE","$e",216],",",["T_WHITESPACE"," ",216],["T_STRING","Mage",216],["T_DOUBLE_COLON","::",216],["T_STRING","helper",216],"(",["T_CONSTANT_ENCAPSED_STRING","'adminhtml'",216],")",["T_OBJECT_OPERATOR","->",216],["T_STRING","__",216],"(",["T_CONSTANT_ENCAPSED_STRING","'An error occurred while deleting this template.'",216],")",")",";",["T_WHITESPACE","\n            ",216],"}",["T_WHITESPACE","\n        ",217],"}",["T_WHITESPACE","\n        ",218],["T_VARIABLE","$this",219],["T_OBJECT_OPERATOR","->",219],["T_STRING","_redirect",219],"(",["T_CONSTANT_ENCAPSED_STRING","'*\/*'",219],")",";",["T_WHITESPACE","\n    ",219],"}",["T_WHITESPACE","\n\n    ",220],["T_DOC_COMMENT","\/**\n     * Preview Newsletter template\n     *\n     *\/",222],["T_WHITESPACE","\n    ",225],["T_PUBLIC","public",226],["T_WHITESPACE"," ",226],["T_FUNCTION","function",226],["T_WHITESPACE"," ",226],["T_STRING","previewAction",226],["T_WHITESPACE"," ",226],"(",")",["T_WHITESPACE","\n    ",226],"{",["T_WHITESPACE","\n        ",227],["T_VARIABLE","$this",228],["T_OBJECT_OPERATOR","->",228],["T_STRING","_setTitle",228],"(",")",";",["T_WHITESPACE","\n        ",228],["T_VARIABLE","$this",229],["T_OBJECT_OPERATOR","->",229],["T_STRING","loadLayout",229],"(",")",";",["T_WHITESPACE","\n\n        ",229],["T_VARIABLE","$data",231],["T_WHITESPACE"," ",231],"=",["T_WHITESPACE"," ",231],["T_VARIABLE","$this",231],["T_OBJECT_OPERATOR","->",231],["T_STRING","getRequest",231],"(",")",["T_OBJECT_OPERATOR","->",231],["T_STRING","getParams",231],"(",")",";",["T_WHITESPACE","\n        ",231],["T_IF","if",232],["T_WHITESPACE"," ",232],"(",["T_EMPTY","empty",232],"(",["T_VARIABLE","$data",232],")",["T_WHITESPACE"," ",232],["T_BOOLEAN_OR","||",232],["T_WHITESPACE"," ",232],"!",["T_ISSET","isset",232],"(",["T_VARIABLE","$data",232],"[",["T_CONSTANT_ENCAPSED_STRING","'id'",232],"]",")",")",["T_WHITESPACE"," ",232],"{",["T_WHITESPACE","\n            ",232],["T_VARIABLE","$this",233],["T_OBJECT_OPERATOR","->",233],["T_STRING","_forward",233],"(",["T_CONSTANT_ENCAPSED_STRING","'noRoute'",233],")",";",["T_WHITESPACE","\n            ",233],["T_RETURN","return",234],["T_WHITESPACE"," ",234],["T_VARIABLE","$this",234],";",["T_WHITESPACE","\n        ",234],"}",["T_WHITESPACE","\n\n        ",235],["T_COMMENT","\/\/ set default value for selected store\n",237],["T_WHITESPACE","        ",238],["T_VARIABLE","$data",238],"[",["T_CONSTANT_ENCAPSED_STRING","'preview_store_id'",238],"]",["T_WHITESPACE"," ",238],"=",["T_WHITESPACE"," ",238],["T_STRING","Mage",238],["T_DOUBLE_COLON","::",238],["T_STRING","app",238],"(",")",["T_OBJECT_OPERATOR","->",238],["T_STRING","getAnyStoreView",238],"(",")",["T_OBJECT_OPERATOR","->",238],["T_STRING","getId",238],"(",")",";",["T_WHITESPACE","\n\n        ",238],["T_VARIABLE","$this",240],["T_OBJECT_OPERATOR","->",240],["T_STRING","getLayout",240],"(",")",["T_OBJECT_OPERATOR","->",240],["T_STRING","getBlock",240],"(",["T_CONSTANT_ENCAPSED_STRING","'preview_form'",240],")",["T_OBJECT_OPERATOR","->",240],["T_STRING","setFormData",240],"(",["T_VARIABLE","$data",240],")",";",["T_WHITESPACE","\n        ",240],["T_VARIABLE","$this",241],["T_OBJECT_OPERATOR","->",241],["T_STRING","renderLayout",241],"(",")",";",["T_WHITESPACE","\n    ",241],"}",["T_WHITESPACE","\n",242],"}",["T_WHITESPACE","\n",243]]
[["T_OPEN_TAG","<?php\n",1],["T_DOC_COMMENT","\/**\n * Magento\n *\n * NOTICE OF LICENSE\n *\n * This source file is subject to the Open Software License (OSL 3.0)\n * that is bundled with this package in the file LICENSE.txt.\n * It is also available through the world-wide-web at this URL:\n * http:\/\/opensource.org\/licenses\/osl-3.0.php\n * If you did not receive a copy of the license and are unable to\n * obtain it through the world-wide-web, please send an email\n * to license@magento.com so we can send you a copy immediately.\n *\n * DISCLAIMER\n *\n * Do not edit or add to this file if you wish to upgrade Magento to newer\n * versions in the future. If you wish to customize Magento for your\n * needs please refer to http:\/\/www.magento.com for more information.\n *\n * @category    Mage\n * @package     Mage_Adminhtml\n * @copyright  Copyright (c) 2006-2016 X.commerce, Inc. and affiliates (http:\/\/www.magento.com)\n * @license    http:\/\/opensource.org\/licenses\/osl-3.0.php  Open Software License (OSL 3.0)\n *\/",2],["T_WHITESPACE","\n",25],["T_CLASS","class",26],["T_WHITESPACE"," ",26],["T_STRING","Mage_Adminhtml_Api_UserController",26],["T_WHITESPACE"," ",26],["T_EXTENDS","extends",26],["T_WHITESPACE"," ",26],["T_STRING","Mage_Adminhtml_Controller_Action",26],["T_WHITESPACE","\n",26],"{",["T_WHITESPACE","\n\n    ",27],["T_PROTECTED","protected",29],["T_WHITESPACE"," ",29],["T_FUNCTION","function",29],["T_WHITESPACE"," ",29],["T_STRING","_initAction",29],"(",")",["T_WHITESPACE","\n    ",29],"{",["T_WHITESPACE","\n        ",30],["T_VARIABLE","$this",31],["T_OBJECT_OPERATOR","->",31],["T_STRING","loadLayout",31],"(",")",["T_WHITESPACE","\n            ",31],["T_OBJECT_OPERATOR","->",32],["T_STRING","_setActiveMenu",32],"(",["T_CONSTANT_ENCAPSED_STRING","'system\/services\/users'",32],")",["T_WHITESPACE","\n            ",32],["T_OBJECT_OPERATOR","->",33],["T_STRING","_addBreadcrumb",33],"(",["T_VARIABLE","$this",33],["T_OBJECT_OPERATOR","->",33],["T_STRING","__",33],"(",["T_CONSTANT_ENCAPSED_STRING","'Web Services'",33],")",",",["T_WHITESPACE"," ",33],["T_VARIABLE","$this",33],["T_OBJECT_OPERATOR","->",33],["T_STRING","__",33],"(",["T_CONSTANT_ENCAPSED_STRING","'Web Services'",33],")",")",["T_WHITESPACE","\n            ",33],["T_OBJECT_OPERATOR","->",34],["T_STRING","_addBreadcrumb",34],"(",["T_VARIABLE","$this",34],["T_OBJECT_OPERATOR","->",34],["T_STRING","__",34],"(",["T_CONSTANT_ENCAPSED_STRING","'Permissions'",34],")",",",["T_WHITESPACE"," ",34],["T_VARIABLE","$this",34],["T_OBJECT_OPERATOR","->",34],["T_STRING","__",34],"(",["T_CONSTANT_ENCAPSED_STRING","'Permissions'",34],")",")",["T_WHITESPACE","\n            ",34],["T_OBJECT_OPERATOR","->",35],["T_STRING","_addBreadcrumb",35],"(",["T_VARIABLE","$this",35],["T_OBJECT_OPERATOR","->",35],["T_STRING","__",35],"(",["T_CONSTANT_ENCAPSED_STRING","'Users'",35],")",",",["T_WHITESPACE"," ",35],["T_VARIABLE","$this",35],["T_OBJECT_OPERATOR","->",35],["T_STRING","__",35],"(",["T_CONSTANT_ENCAPSED_STRING","'Users'",35],")",")",["T_WHITESPACE","\n        ",35],";",["T_WHITESPACE","\n        ",36],["T_RETURN","return",37],["T_WHITESPACE"," ",37],["T_VARIABLE","$this",37],";",["T_WHITESPACE","\n    ",37],"}",["T_WHITESPACE","\n\n    ",38],["T_PUBLIC","public",40],["T_WHITESPACE"," ",40],["T_FUNCTION","function",40],["T_WHITESPACE"," ",40],["T_STRING","indexAction",40],"(",")",["T_WHITESPACE","\n    ",40],"{",["T_WHITESPACE","\n        ",41],["T_VARIABLE","$this",42],["T_OBJECT_OPERATOR","->",42],["T_STRING","_title",42],"(",["T_VARIABLE","$this",42],["T_OBJECT_OPERATOR","->",42],["T_STRING","__",42],"(",["T_CONSTANT_ENCAPSED_STRING","'System'",42],")",")",["T_WHITESPACE","\n             ",42],["T_OBJECT_OPERATOR","->",43],["T_STRING","_title",43],"(",["T_VARIABLE","$this",43],["T_OBJECT_OPERATOR","->",43],["T_STRING","__",43],"(",["T_CONSTANT_ENCAPSED_STRING","'Web Services'",43],")",")",["T_WHITESPACE","\n             ",43],["T_OBJECT_OPERATOR","->",44],["T_STRING","_title",44],"(",["T_VARIABLE","$this",44],["T_OBJECT_OPERATOR","->",44],["T_STRING","__",44],"(",["T_CONSTANT_ENCAPSED_STRING","'Users'",44],")",")",";",["T_WHITESPACE","\n\n        ",44],["T_VARIABLE","$this",46],["T_OBJECT_OPERATOR","->",46],["T_STRING","_initAction",46],"(",")",["T_WHITESPACE","\n            ",46],["T_OBJECT_OPERATOR","->",47],["T_STRING","_addContent",47],"(",["T_VARIABLE","$this",47],["T_OBJECT_OPERATOR","->",47],["T_STRING","getLayout",47],"(",")",["T_OBJECT_OPERATOR","->",47],["T_STRING","createBlock",47],"(",["T_CONSTANT_ENCAPSED_STRING","'adminhtml\/api_user'",47],")",")",["T_WHITESPACE","\n            ",47],["T_OBJECT_OPERATOR","->",48],["T_STRING","renderLayout",48],"(",")",";",["T_WHITESPACE","\n    ",48],"}",["T_WHITESPACE","\n\n    ",49],["T_PUBLIC","public",51],["T_WHITESPACE"," ",51],["T_FUNCTION","function",51],["T_WHITESPACE"," ",51],["T_STRING","newAction",51],"(",")",["T_WHITESPACE","\n    ",51],"{",["T_WHITESPACE","\n        ",52],["T_VARIABLE","$this",53],["T_OBJECT_OPERATOR","->",53],["T_STRING","_forward",53],"(",["T_CONSTANT_ENCAPSED_STRING","'edit'",53],")",";",["T_WHITESPACE","\n    ",53],"}",["T_WHITESPACE","\n\n    ",54],["T_PUBLIC","public",56],["T_WHITESPACE"," ",56],["T_FUNCTION","function",56],["T_WHITESPACE"," ",56],["T_STRING","editAction",56],"(",")",["T_WHITESPACE","\n    ",56],"{",["T_WHITESPACE","\n        ",57],["T_VARIABLE","$this",58],["T_OBJECT_OPERATOR","->",58],["T_STRING","_title",58],"(",["T_VARIABLE","$this",58],["T_OBJECT_OPERATOR","->",58],["T_STRING","__",58],"(",["T_CONSTANT_ENCAPSED_STRING","'System'",58],")",")",["T_WHITESPACE","\n             ",58],["T_OBJECT_OPERATOR","->",59],["T_STRING","_title",59],"(",["T_VARIABLE","$this",59],["T_OBJECT_OPERATOR","->",59],["T_STRING","__",59],"(",["T_CONSTANT_ENCAPSED_STRING","'Web Services'",59],")",")",["T_WHITESPACE","\n             ",59],["T_OBJECT_OPERATOR","->",60],["T_STRING","_title",60],"(",["T_VARIABLE","$this",60],["T_OBJECT_OPERATOR","->",60],["T_STRING","__",60],"(",["T_CONSTANT_ENCAPSED_STRING","'Users'",60],")",")",";",["T_WHITESPACE","\n\n        ",60],["T_VARIABLE","$id",62],["T_WHITESPACE"," ",62],"=",["T_WHITESPACE"," ",62],["T_VARIABLE","$this",62],["T_OBJECT_OPERATOR","->",62],["T_STRING","getRequest",62],"(",")",["T_OBJECT_OPERATOR","->",62],["T_STRING","getParam",62],"(",["T_CONSTANT_ENCAPSED_STRING","'user_id'",62],")",";",["T_WHITESPACE","\n        ",62],["T_VARIABLE","$model",63],["T_WHITESPACE"," ",63],"=",["T_WHITESPACE"," ",63],["T_STRING","Mage",63],["T_DOUBLE_COLON","::",63],["T_STRING","getModel",63],"(",["T_CONSTANT_ENCAPSED_STRING","'api\/user'",63],")",";",["T_WHITESPACE","\n\n        ",63],["T_IF","if",65],["T_WHITESPACE"," ",65],"(",["T_VARIABLE","$id",65],")",["T_WHITESPACE"," ",65],"{",["T_WHITESPACE","\n            ",65],["T_VARIABLE","$model",66],["T_OBJECT_OPERATOR","->",66],["T_STRING","load",66],"(",["T_VARIABLE","$id",66],")",";",["T_WHITESPACE","\n            ",66],["T_IF","if",67],["T_WHITESPACE"," ",67],"(","!",["T_WHITESPACE"," ",67],["T_VARIABLE","$model",67],["T_OBJECT_OPERATOR","->",67],["T_STRING","getId",67],"(",")",")",["T_WHITESPACE"," ",67],"{",["T_WHITESPACE","\n                ",67],["T_STRING","Mage",68],["T_DOUBLE_COLON","::",68],["T_STRING","getSingleton",68],"(",["T_CONSTANT_ENCAPSED_STRING","'adminhtml\/session'",68],")",["T_OBJECT_OPERATOR","->",68],["T_STRING","addError",68],"(",["T_VARIABLE","$this",68],["T_OBJECT_OPERATOR","->",68],["T_STRING","__",68],"(",["T_CONSTANT_ENCAPSED_STRING","'This user no longer exists.'",68],")",")",";",["T_WHITESPACE","\n                ",68],["T_VARIABLE","$this",69],["T_OBJECT_OPERATOR","->",69],["T_STRING","_redirect",69],"(",["T_CONSTANT_ENCAPSED_STRING","'*\/*\/'",69],")",";",["T_WHITESPACE","\n                ",69],["T_RETURN","return",70],";",["T_WHITESPACE","\n            ",70],"}",["T_WHITESPACE","\n        ",71],"}",["T_WHITESPACE","\n\n        ",72],["T_VARIABLE","$this",74],["T_OBJECT_OPERATOR","->",74],["T_STRING","_title",74],"(",["T_VARIABLE","$model",74],["T_OBJECT_OPERATOR","->",74],["T_STRING","getId",74],"(",")",["T_WHITESPACE"," ",74],"?",["T_WHITESPACE"," ",74],["T_VARIABLE","$model",74],["T_OBJECT_OPERATOR","->",74],["T_STRING","getName",74],"(",")",["T_WHITESPACE"," ",74],":",["T_WHITESPACE"," ",74],["T_VARIABLE","$this",74],["T_OBJECT_OPERATOR","->",74],["T_STRING","__",74],"(",["T_CONSTANT_ENCAPSED_STRING","'New User'",74],")",")",";",["T_WHITESPACE","\n\n        ",74],["T_COMMENT","\/\/ Restore previously entered form data from session\n",76],["T_WHITESPACE","        ",77],["T_VARIABLE","$data",77],["T_WHITESPACE"," ",77],"=",["T_WHITESPACE"," ",77],["T_STRING","Mage",77],["T_DOUBLE_COLON","::",77],["T_STRING","getSingleton",77],"(",["T_CONSTANT_ENCAPSED_STRING","'adminhtml\/session'",77],")",["T_OBJECT_OPERATOR","->",77],["T_STRING","getUserData",77],"(",["T_STRING","true",77],")",";",["T_WHITESPACE","\n        ",77],["T_IF","if",78],["T_WHITESPACE"," ",78],"(","!",["T_EMPTY","empty",78],"(",["T_VARIABLE","$data",78],")",")",["T_WHITESPACE"," ",78],"{",["T_WHITESPACE","\n            ",78],["T_VARIABLE","$model",79],["T_OBJECT_OPERATOR","->",79],["T_STRING","setData",79],"(",["T_VARIABLE","$data",79],")",";",["T_WHITESPACE","\n        ",79],"}",["T_WHITESPACE","\n\n        ",80],["T_STRING","Mage",82],["T_DOUBLE_COLON","::",82],["T_STRING","register",82],"(",["T_CONSTANT_ENCAPSED_STRING","'api_user'",82],",",["T_WHITESPACE"," ",82],["T_VARIABLE","$model",82],")",";",["T_WHITESPACE","\n\n        ",82],["T_VARIABLE","$this",84],["T_OBJECT_OPERATOR","->",84],["T_STRING","_initAction",84],"(",")",["T_WHITESPACE","\n            ",84],["T_OBJECT_OPERATOR","->",85],["T_STRING","_addBreadcrumb",85],"(",["T_WHITESPACE","\n                ",85],["T_VARIABLE","$id",86],["T_WHITESPACE"," ",86],"?",["T_WHITESPACE"," ",86],["T_VARIABLE","$this",86],["T_OBJECT_OPERATOR","->",86],["T_STRING","__",86],"(",["T_CONSTANT_ENCAPSED_STRING","'Edit User'",86],")",["T_WHITESPACE"," ",86],":",["T_WHITESPACE"," ",86],["T_VARIABLE","$this",86],["T_OBJECT_OPERATOR","->",86],["T_STRING","__",86],"(",["T_CONSTANT_ENCAPSED_STRING","'New User'",86],")",",",["T_WHITESPACE","\n                ",86],["T_VARIABLE","$id",87],["T_WHITESPACE"," ",87],"?",["T_WHITESPACE"," ",87],["T_VARIABLE","$this",87],["T_OBJECT_OPERATOR","->",87],["T_STRING","__",87],"(",["T_CONSTANT_ENCAPSED_STRING","'Edit User'",87],")",["T_WHITESPACE"," ",87],":",["T_WHITESPACE"," ",87],["T_VARIABLE","$this",87],["T_OBJECT_OPERATOR","->",87],["T_STRING","__",87],"(",["T_CONSTANT_ENCAPSED_STRING","'New User'",87],")",["T_WHITESPACE","\n            ",87],")",["T_WHITESPACE","\n            ",88],["T_OBJECT_OPERATOR","->",89],["T_STRING","_addContent",89],"(",["T_WHITESPACE","\n                ",89],["T_VARIABLE","$this",90],["T_OBJECT_OPERATOR","->",90],["T_STRING","getLayout",90],"(",")",["T_OBJECT_OPERATOR","->",90],["T_STRING","createBlock",90],"(",["T_CONSTANT_ENCAPSED_STRING","'adminhtml\/api_user_edit'",90],")",["T_WHITESPACE","\n                    ",90],["T_OBJECT_OPERATOR","->",91],["T_STRING","setData",91],"(",["T_CONSTANT_ENCAPSED_STRING","'action'",91],",",["T_WHITESPACE"," ",91],["T_VARIABLE","$this",91],["T_OBJECT_OPERATOR","->",91],["T_STRING","getUrl",91],"(",["T_CONSTANT_ENCAPSED_STRING","'*\/api_user\/save'",91],")",")",["T_WHITESPACE","\n            ",91],")",["T_WHITESPACE","\n            ",92],["T_OBJECT_OPERATOR","->",93],["T_STRING","_addLeft",93],"(",["T_VARIABLE","$this",93],["T_OBJECT_OPERATOR","->",93],["T_STRING","getLayout",93],"(",")",["T_OBJECT_OPERATOR","->",93],["T_STRING","createBlock",93],"(",["T_CONSTANT_ENCAPSED_STRING","'adminhtml\/api_user_edit_tabs'",93],")",")",";",["T_WHITESPACE","\n\n        ",93],["T_VARIABLE","$this",95],["T_OBJECT_OPERATOR","->",95],["T_STRING","_addJs",95],"(",["T_WHITESPACE","\n            ",95],["T_VARIABLE","$this",96],["T_OBJECT_OPERATOR","->",96],["T_STRING","getLayout",96],"(",")",["T_OBJECT_OPERATOR","->",96],["T_STRING","createBlock",96],"(",["T_CONSTANT_ENCAPSED_STRING","'adminhtml\/template'",96],")",["T_OBJECT_OPERATOR","->",96],["T_STRING","setTemplate",96],"(",["T_CONSTANT_ENCAPSED_STRING","'api\/user_roles_grid_js.phtml'",96],")",["T_WHITESPACE","\n        ",96],")",";",["T_WHITESPACE","\n        ",97],["T_VARIABLE","$this",98],["T_OBJECT_OPERATOR","->",98],["T_STRING","renderLayout",98],"(",")",";",["T_WHITESPACE","\n    ",98],"}",["T_WHITESPACE","\n\n    ",99],["T_PUBLIC","public",101],["T_WHITESPACE"," ",101],["T_FUNCTION","function",101],["T_WHITESPACE"," ",101],["T_STRING","saveAction",101],"(",")",["T_WHITESPACE","\n    ",101],"{",["T_WHITESPACE","\n        ",102],["T_IF","if",103],["T_WHITESPACE"," ",103],"(",["T_VARIABLE","$data",103],["T_WHITESPACE"," ",103],"=",["T_WHITESPACE"," ",103],["T_VARIABLE","$this",103],["T_OBJECT_OPERATOR","->",103],["T_STRING","getRequest",103],"(",")",["T_OBJECT_OPERATOR","->",103],["T_STRING","getPost",103],"(",")",")",["T_WHITESPACE"," ",103],"{",["T_WHITESPACE","\n            ",103],["T_VARIABLE","$id",104],["T_WHITESPACE"," ",104],"=",["T_WHITESPACE"," ",104],["T_VARIABLE","$this",104],["T_OBJECT_OPERATOR","->",104],["T_STRING","getRequest",104],"(",")",["T_OBJECT_OPERATOR","->",104],["T_STRING","getPost",104],"(",["T_CONSTANT_ENCAPSED_STRING","'user_id'",104],",",["T_WHITESPACE"," ",104],["T_STRING","false",104],")",";",["T_WHITESPACE","\n            ",104],["T_VARIABLE","$model",105],["T_WHITESPACE"," ",105],"=",["T_WHITESPACE"," ",105],["T_STRING","Mage",105],["T_DOUBLE_COLON","::",105],["T_STRING","getModel",105],"(",["T_CONSTANT_ENCAPSED_STRING","'api\/user'",105],")",["T_OBJECT_OPERATOR","->",105],["T_STRING","load",105],"(",["T_VARIABLE","$id",105],")",";",["T_WHITESPACE","\n            ",105],["T_IF","if",106],["T_WHITESPACE"," ",106],"(","!",["T_VARIABLE","$model",106],["T_OBJECT_OPERATOR","->",106],["T_STRING","getId",106],"(",")",["T_WHITESPACE"," ",106],["T_BOOLEAN_AND","&&",106],["T_WHITESPACE"," ",106],["T_VARIABLE","$id",106],")",["T_WHITESPACE"," ",106],"{",["T_WHITESPACE","\n                ",106],["T_STRING","Mage",107],["T_DOUBLE_COLON","::",107],["T_STRING","getSingleton",107],"(",["T_CONSTANT_ENCAPSED_STRING","'adminhtml\/session'",107],")",["T_OBJECT_OPERATOR","->",107],["T_STRING","addError",107],"(",["T_VARIABLE","$this",107],["T_OBJECT_OPERATOR","->",107],["T_STRING","__",107],"(",["T_CONSTANT_ENCAPSED_STRING","'This user no longer exists.'",107],")",")",";",["T_WHITESPACE","\n                ",107],["T_VARIABLE","$this",108],["T_OBJECT_OPERATOR","->",108],["T_STRING","_redirect",108],"(",["T_CONSTANT_ENCAPSED_STRING","'*\/*\/'",108],")",";",["T_WHITESPACE","\n                ",108],["T_RETURN","return",109],";",["T_WHITESPACE","\n            ",109],"}",["T_WHITESPACE","\n            ",110],["T_COMMENT","\/\/Validate current admin password\n",111],["T_WHITESPACE","            ",112],["T_VARIABLE","$currentPassword",112],["T_WHITESPACE"," ",112],"=",["T_WHITESPACE"," ",112],["T_VARIABLE","$this",112],["T_OBJECT_OPERATOR","->",112],["T_STRING","getRequest",112],"(",")",["T_OBJECT_OPERATOR","->",112],["T_STRING","getParam",112],"(",["T_CONSTANT_ENCAPSED_STRING","'current_password'",112],",",["T_WHITESPACE"," ",112],["T_STRING","null",112],")",";",["T_WHITESPACE","\n            ",112],["T_VARIABLE","$this",113],["T_OBJECT_OPERATOR","->",113],["T_STRING","getRequest",113],"(",")",["T_OBJECT_OPERATOR","->",113],["T_STRING","setParam",113],"(",["T_CONSTANT_ENCAPSED_STRING","'current_password'",113],",",["T_WHITESPACE"," ",113],["T_STRING","null",113],")",";",["T_WHITESPACE","\n            ",113],["T_UNSET","unset",114],"(",["T_VARIABLE","$data",114],"[",["T_CONSTANT_ENCAPSED_STRING","'current_password'",114],"]",")",";",["T_WHITESPACE","\n            ",114],["T_VARIABLE","$result",115],["T_WHITESPACE"," ",115],"=",["T_WHITESPACE"," ",115],["T_VARIABLE","$this",115],["T_OBJECT_OPERATOR","->",115],["T_STRING","_validateCurrentPassword",115],"(",["T_VARIABLE","$currentPassword",115],")",";",["T_WHITESPACE","\n\n            ",115],["T_IF","if",117],["T_WHITESPACE"," ",117],"(",["T_STRING","is_array",117],"(",["T_VARIABLE","$result",117],")",")",["T_WHITESPACE"," ",117],"{",["T_WHITESPACE","\n                ",117],["T_FOREACH","foreach",118],["T_WHITESPACE"," ",118],"(",["T_VARIABLE","$result",118],["T_WHITESPACE"," ",118],["T_AS","as",118],["T_WHITESPACE"," ",118],["T_VARIABLE","$error",118],")",["T_WHITESPACE"," ",118],"{",["T_WHITESPACE","\n                    ",118],["T_VARIABLE","$this",119],["T_OBJECT_OPERATOR","->",119],["T_STRING","_getSession",119],"(",")",["T_OBJECT_OPERATOR","->",119],["T_STRING","addError",119],"(",["T_VARIABLE","$error",119],")",";",["T_WHITESPACE","\n                ",119],"}",["T_WHITESPACE","\n                ",120],["T_IF","if",121],["T_WHITESPACE"," ",121],"(",["T_VARIABLE","$id",121],")",["T_WHITESPACE"," ",121],"{",["T_WHITESPACE","\n                    ",121],["T_VARIABLE","$this",122],["T_OBJECT_OPERATOR","->",122],["T_STRING","_getSession",122],"(",")",["T_OBJECT_OPERATOR","->",122],["T_STRING","setUserData",122],"(",["T_VARIABLE","$data",122],")",";",["T_WHITESPACE","\n                    ",122],["T_VARIABLE","$this",123],["T_OBJECT_OPERATOR","->",123],["T_STRING","_redirect",123],"(",["T_CONSTANT_ENCAPSED_STRING","'*\/*\/edit'",123],",",["T_WHITESPACE"," ",123],["T_ARRAY","array",123],"(",["T_CONSTANT_ENCAPSED_STRING","'user_id'",123],["T_WHITESPACE"," ",123],["T_DOUBLE_ARROW","=>",123],["T_WHITESPACE"," ",123],["T_VARIABLE","$id",123],")",")",";",["T_WHITESPACE","\n                ",123],"}",["T_WHITESPACE"," ",124],["T_ELSE","else",124],["T_WHITESPACE"," ",124],"{",["T_WHITESPACE","\n                    ",124],["T_VARIABLE","$this",125],["T_OBJECT_OPERATOR","->",125],["T_STRING","_getSession",125],"(",")",["T_OBJECT_OPERATOR","->",125],["T_STRING","setUserData",125],"(",["T_VARIABLE","$data",125],")",";",["T_WHITESPACE","\n                    ",125],["T_VARIABLE","$this",126],["T_OBJECT_OPERATOR","->",126],["T_STRING","_redirect",126],"(",["T_CONSTANT_ENCAPSED_STRING","'*\/*\/new'",126],")",";",["T_WHITESPACE","\n                ",126],"}",["T_WHITESPACE","\n                ",127],["T_RETURN","return",128],";",["T_WHITESPACE","\n            ",128],"}",["T_WHITESPACE","\n\n            ",129],["T_VARIABLE","$model",131],["T_OBJECT_OPERATOR","->",131],["T_STRING","setData",131],"(",["T_VARIABLE","$data",131],")",";",["T_WHITESPACE","\n            ",131],["T_TRY","try",132],["T_WHITESPACE"," ",132],"{",["T_WHITESPACE","\n                ",132],["T_VARIABLE","$model",133],["T_OBJECT_OPERATOR","->",133],["T_STRING","save",133],"(",")",";",["T_WHITESPACE","\n                ",133],["T_IF","if",134],["T_WHITESPACE"," ",134],"(",["T_WHITESPACE"," ",134],["T_VARIABLE","$uRoles",134],["T_WHITESPACE"," ",134],"=",["T_WHITESPACE"," ",134],["T_VARIABLE","$this",134],["T_OBJECT_OPERATOR","->",134],["T_STRING","getRequest",134],"(",")",["T_OBJECT_OPERATOR","->",134],["T_STRING","getParam",134],"(",["T_CONSTANT_ENCAPSED_STRING","'roles'",134],",",["T_WHITESPACE"," ",134],["T_STRING","false",134],")",["T_WHITESPACE"," ",134],")",["T_WHITESPACE"," ",134],"{",["T_WHITESPACE","\n                    ",134],["T_COMMENT","\/*parse_str($uRoles, $uRoles);\n                    $uRoles = array_keys($uRoles);*\/",135],["T_WHITESPACE","\n                    ",136],["T_IF","if",137],["T_WHITESPACE"," ",137],"(",["T_WHITESPACE"," ",137],["T_LNUMBER","1",137],["T_WHITESPACE"," ",137],["T_IS_EQUAL","==",137],["T_WHITESPACE"," ",137],["T_STRING","sizeof",137],"(",["T_VARIABLE","$uRoles",137],")",["T_WHITESPACE"," ",137],")",["T_WHITESPACE"," ",137],"{",["T_WHITESPACE","\n                        ",137],["T_VARIABLE","$model",138],["T_OBJECT_OPERATOR","->",138],["T_STRING","setRoleIds",138],"(",["T_VARIABLE","$uRoles",138],")",["T_WHITESPACE","\n                            ",138],["T_OBJECT_OPERATOR","->",139],["T_STRING","setRoleUserId",139],"(",["T_VARIABLE","$model",139],["T_OBJECT_OPERATOR","->",139],["T_STRING","getUserId",139],"(",")",")",["T_WHITESPACE","\n                            ",139],["T_OBJECT_OPERATOR","->",140],["T_STRING","saveRelations",140],"(",")",";",["T_WHITESPACE","\n                    ",140],"}",["T_WHITESPACE"," ",141],["T_ELSE","else",141],["T_WHITESPACE"," ",141],["T_IF","if",141],["T_WHITESPACE"," ",141],"(",["T_WHITESPACE"," ",141],["T_STRING","sizeof",141],"(",["T_VARIABLE","$uRoles",141],")",["T_WHITESPACE"," ",141],">",["T_WHITESPACE"," ",141],["T_LNUMBER","1",141],["T_WHITESPACE"," ",141],")",["T_WHITESPACE"," ",141],"{",["T_WHITESPACE","\n                        ",141],["T_COMMENT","\/\/@FIXME: stupid fix of previous multi-roles logic.\n",142],["T_WHITESPACE","                        ",143],["T_COMMENT","\/\/@TODO:  make proper DB upgrade in the future revisions.\n",143],["T_WHITESPACE","                        ",144],["T_VARIABLE","$rs",144],["T_WHITESPACE"," ",144],"=",["T_WHITESPACE"," ",144],["T_ARRAY","array",144],"(",")",";",["T_WHITESPACE","\n                        ",144],["T_VARIABLE","$rs",145],"[",["T_LNUMBER","0",145],"]",["T_WHITESPACE"," ",145],"=",["T_WHITESPACE"," ",145],["T_VARIABLE","$uRoles",145],"[",["T_LNUMBER","0",145],"]",";",["T_WHITESPACE","\n                        ",145],["T_VARIABLE","$model",146],["T_OBJECT_OPERATOR","->",146],["T_STRING","setRoleIds",146],"(",["T_WHITESPACE"," ",146],["T_VARIABLE","$rs",146],["T_WHITESPACE"," ",146],")",["T_OBJECT_OPERATOR","->",146],["T_STRING","setRoleUserId",146],"(",["T_WHITESPACE"," ",146],["T_VARIABLE","$model",146],["T_OBJECT_OPERATOR","->",146],["T_STRING","getUserId",146],"(",")",["T_WHITESPACE"," ",146],")",["T_OBJECT_OPERATOR","->",146],["T_STRING","saveRelations",146],"(",")",";",["T_WHITESPACE","\n                    ",146],"}",["T_WHITESPACE","\n                ",147],"}",["T_WHITESPACE","\n                ",148],["T_STRING","Mage",149],["T_DOUBLE_COLON","::",149],["T_STRING","getSingleton",149],"(",["T_CONSTANT_ENCAPSED_STRING","'adminhtml\/session'",149],")",["T_OBJECT_OPERATOR","->",149],["T_STRING","addSuccess",149],"(",["T_VARIABLE","$this",149],["T_OBJECT_OPERATOR","->",149],["T_STRING","__",149],"(",["T_CONSTANT_ENCAPSED_STRING","'The user has been saved.'",149],")",")",";",["T_WHITESPACE","\n                ",149],["T_STRING","Mage",150],["T_DOUBLE_COLON","::",150],["T_STRING","getSingleton",150],"(",["T_CONSTANT_ENCAPSED_STRING","'adminhtml\/session'",150],")",["T_OBJECT_OPERATOR","->",150],["T_STRING","setUserData",150],"(",["T_STRING","false",150],")",";",["T_WHITESPACE","\n                ",150],["T_VARIABLE","$this",151],["T_OBJECT_OPERATOR","->",151],["T_STRING","_redirect",151],"(",["T_CONSTANT_ENCAPSED_STRING","'*\/*\/edit'",151],",",["T_WHITESPACE"," ",151],["T_ARRAY","array",151],"(",["T_CONSTANT_ENCAPSED_STRING","'user_id'",151],["T_WHITESPACE"," ",151],["T_DOUBLE_ARROW","=>",151],["T_WHITESPACE"," ",151],["T_VARIABLE","$model",151],["T_OBJECT_OPERATOR","->",151],["T_STRING","getUserId",151],"(",")",")",")",";",["T_WHITESPACE","\n                ",151],["T_RETURN","return",152],";",["T_WHITESPACE","\n            ",152],"}",["T_WHITESPACE"," ",153],["T_CATCH","catch",153],["T_WHITESPACE"," ",153],"(",["T_STRING","Exception",153],["T_WHITESPACE"," ",153],["T_VARIABLE","$e",153],")",["T_WHITESPACE"," ",153],"{",["T_WHITESPACE","\n                ",153],["T_STRING","Mage",154],["T_DOUBLE_COLON","::",154],["T_STRING","getSingleton",154],"(",["T_CONSTANT_ENCAPSED_STRING","'adminhtml\/session'",154],")",["T_OBJECT_OPERATOR","->",154],["T_STRING","addError",154],"(",["T_VARIABLE","$e",154],["T_OBJECT_OPERATOR","->",154],["T_STRING","getMessage",154],"(",")",")",";",["T_WHITESPACE","\n                ",154],["T_STRING","Mage",155],["T_DOUBLE_COLON","::",155],["T_STRING","getSingleton",155],"(",["T_CONSTANT_ENCAPSED_STRING","'adminhtml\/session'",155],")",["T_OBJECT_OPERATOR","->",155],["T_STRING","setUserData",155],"(",["T_VARIABLE","$data",155],")",";",["T_WHITESPACE","\n                ",155],["T_VARIABLE","$this",156],["T_OBJECT_OPERATOR","->",156],["T_STRING","_redirect",156],"(",["T_CONSTANT_ENCAPSED_STRING","'*\/*\/edit'",156],",",["T_WHITESPACE"," ",156],["T_ARRAY","array",156],"(",["T_CONSTANT_ENCAPSED_STRING","'user_id'",156],["T_WHITESPACE"," ",156],["T_DOUBLE_ARROW","=>",156],["T_WHITESPACE"," ",156],["T_VARIABLE","$model",156],["T_OBJECT_OPERATOR","->",156],["T_STRING","getUserId",156],"(",")",")",")",";",["T_WHITESPACE","\n                ",156],["T_RETURN","return",157],";",["T_WHITESPACE","\n            ",157],"}",["T_WHITESPACE","\n        ",158],"}",["T_WHITESPACE","\n        ",159],["T_VARIABLE","$this",160],["T_OBJECT_OPERATOR","->",160],["T_STRING","_redirect",160],"(",["T_CONSTANT_ENCAPSED_STRING","'*\/*\/'",160],")",";",["T_WHITESPACE","\n    ",160],"}",["T_WHITESPACE","\n\n    ",161],["T_PUBLIC","public",163],["T_WHITESPACE"," ",163],["T_FUNCTION","function",163],["T_WHITESPACE"," ",163],["T_STRING","deleteAction",163],"(",")",["T_WHITESPACE","\n    ",163],"{",["T_WHITESPACE","\n        ",164],["T_IF","if",165],["T_WHITESPACE"," ",165],"(",["T_VARIABLE","$id",165],["T_WHITESPACE"," ",165],"=",["T_WHITESPACE"," ",165],["T_VARIABLE","$this",165],["T_OBJECT_OPERATOR","->",165],["T_STRING","getRequest",165],"(",")",["T_OBJECT_OPERATOR","->",165],["T_STRING","getParam",165],"(",["T_CONSTANT_ENCAPSED_STRING","'user_id'",165],")",")",["T_WHITESPACE"," ",165],"{",["T_WHITESPACE","\n\n            ",165],["T_TRY","try",167],["T_WHITESPACE"," ",167],"{",["T_WHITESPACE","\n                ",167],["T_VARIABLE","$model",168],["T_WHITESPACE"," ",168],"=",["T_WHITESPACE"," ",168],["T_STRING","Mage",168],["T_DOUBLE_COLON","::",168],["T_STRING","getModel",168],"(",["T_CONSTANT_ENCAPSED_STRING","'api\/user'",168],")",["T_OBJECT_OPERATOR","->",168],["T_STRING","load",168],"(",["T_VARIABLE","$id",168],")",";",["T_WHITESPACE","\n                ",168],["T_VARIABLE","$model",169],["T_OBJECT_OPERATOR","->",169],["T_STRING","delete",169],"(",")",";",["T_WHITESPACE","\n                ",169],["T_STRING","Mage",170],["T_DOUBLE_COLON","::",170],["T_STRING","getSingleton",170],"(",["T_CONSTANT_ENCAPSED_STRING","'adminhtml\/session'",170],")",["T_OBJECT_OPERATOR","->",170],["T_STRING","addSuccess",170],"(",["T_VARIABLE","$this",170],["T_OBJECT_OPERATOR","->",170],["T_STRING","__",170],"(",["T_CONSTANT_ENCAPSED_STRING","'The user has been deleted.'",170],")",")",";",["T_WHITESPACE","\n                ",170],["T_VARIABLE","$this",171],["T_OBJECT_OPERATOR","->",171],["T_STRING","_redirect",171],"(",["T_CONSTANT_ENCAPSED_STRING","'*\/*\/'",171],")",";",["T_WHITESPACE","\n                ",171],["T_RETURN","return",172],";",["T_WHITESPACE","\n            ",172],"}",["T_WHITESPACE","\n            ",173],["T_CATCH","catch",174],["T_WHITESPACE"," ",174],"(",["T_STRING","Exception",174],["T_WHITESPACE"," ",174],["T_VARIABLE","$e",174],")",["T_WHITESPACE"," ",174],"{",["T_WHITESPACE","\n                ",174],["T_STRING","Mage",175],["T_DOUBLE_COLON","::",175],["T_STRING","getSingleton",175],"(",["T_CONSTANT_ENCAPSED_STRING","'adminhtml\/session'",175],")",["T_OBJECT_OPERATOR","->",175],["T_STRING","addError",175],"(",["T_VARIABLE","$e",175],["T_OBJECT_OPERATOR","->",175],["T_STRING","getMessage",175],"(",")",")",";",["T_WHITESPACE","\n                ",175],["T_VARIABLE","$this",176],["T_OBJECT_OPERATOR","->",176],["T_STRING","_redirect",176],"(",["T_CONSTANT_ENCAPSED_STRING","'*\/*\/edit'",176],",",["T_WHITESPACE"," ",176],["T_ARRAY","array",176],"(",["T_CONSTANT_ENCAPSED_STRING","'user_id'",176],["T_WHITESPACE"," ",176],["T_DOUBLE_ARROW","=>",176],["T_WHITESPACE"," ",176],["T_VARIABLE","$this",176],["T_OBJECT_OPERATOR","->",176],["T_STRING","getRequest",176],"(",")",["T_OBJECT_OPERATOR","->",176],["T_STRING","getParam",176],"(",["T_CONSTANT_ENCAPSED_STRING","'user_id'",176],")",")",")",";",["T_WHITESPACE","\n                ",176],["T_RETURN","return",177],";",["T_WHITESPACE","\n            ",177],"}",["T_WHITESPACE","\n        ",178],"}",["T_WHITESPACE","\n        ",179],["T_STRING","Mage",180],["T_DOUBLE_COLON","::",180],["T_STRING","getSingleton",180],"(",["T_CONSTANT_ENCAPSED_STRING","'adminhtml\/session'",180],")",["T_OBJECT_OPERATOR","->",180],["T_STRING","addError",180],"(",["T_VARIABLE","$this",180],["T_OBJECT_OPERATOR","->",180],["T_STRING","__",180],"(",["T_CONSTANT_ENCAPSED_STRING","'Unable to find a user to delete.'",180],")",")",";",["T_WHITESPACE","\n        ",180],["T_VARIABLE","$this",181],["T_OBJECT_OPERATOR","->",181],["T_STRING","_redirect",181],"(",["T_CONSTANT_ENCAPSED_STRING","'*\/*\/'",181],")",";",["T_WHITESPACE","\n    ",181],"}",["T_WHITESPACE","\n\n    ",182],["T_PUBLIC","public",184],["T_WHITESPACE"," ",184],["T_FUNCTION","function",184],["T_WHITESPACE"," ",184],["T_STRING","rolesGridAction",184],"(",")",["T_WHITESPACE","\n    ",184],"{",["T_WHITESPACE","\n        ",185],["T_VARIABLE","$id",186],["T_WHITESPACE"," ",186],"=",["T_WHITESPACE"," ",186],["T_VARIABLE","$this",186],["T_OBJECT_OPERATOR","->",186],["T_STRING","getRequest",186],"(",")",["T_OBJECT_OPERATOR","->",186],["T_STRING","getParam",186],"(",["T_CONSTANT_ENCAPSED_STRING","'user_id'",186],")",";",["T_WHITESPACE","\n        ",186],["T_VARIABLE","$model",187],["T_WHITESPACE"," ",187],"=",["T_WHITESPACE"," ",187],["T_STRING","Mage",187],["T_DOUBLE_COLON","::",187],["T_STRING","getModel",187],"(",["T_CONSTANT_ENCAPSED_STRING","'api\/user'",187],")",";",["T_WHITESPACE","\n\n        ",187],["T_IF","if",189],["T_WHITESPACE"," ",189],"(",["T_VARIABLE","$id",189],")",["T_WHITESPACE"," ",189],"{",["T_WHITESPACE","\n            ",189],["T_VARIABLE","$model",190],["T_OBJECT_OPERATOR","->",190],["T_STRING","load",190],"(",["T_VARIABLE","$id",190],")",";",["T_WHITESPACE","\n        ",190],"}",["T_WHITESPACE","\n\n        ",191],["T_STRING","Mage",193],["T_DOUBLE_COLON","::",193],["T_STRING","register",193],"(",["T_CONSTANT_ENCAPSED_STRING","'api_user'",193],",",["T_WHITESPACE"," ",193],["T_VARIABLE","$model",193],")",";",["T_WHITESPACE","\n        ",193],["T_VARIABLE","$this",194],["T_OBJECT_OPERATOR","->",194],["T_STRING","getResponse",194],"(",")",["T_OBJECT_OPERATOR","->",194],["T_STRING","setBody",194],"(",["T_VARIABLE","$this",194],["T_OBJECT_OPERATOR","->",194],["T_STRING","getLayout",194],"(",")",["T_OBJECT_OPERATOR","->",194],["T_STRING","createBlock",194],"(",["T_CONSTANT_ENCAPSED_STRING","'adminhtml\/api_user_edit_tab_roles'",194],")",["T_OBJECT_OPERATOR","->",194],["T_STRING","toHtml",194],"(",")",")",";",["T_WHITESPACE","\n    ",194],"}",["T_WHITESPACE","\n\n    ",195],["T_PUBLIC","public",197],["T_WHITESPACE"," ",197],["T_FUNCTION","function",197],["T_WHITESPACE"," ",197],["T_STRING","roleGridAction",197],"(",")",["T_WHITESPACE","\n    ",197],"{",["T_WHITESPACE","\n        ",198],["T_VARIABLE","$this",199],["T_OBJECT_OPERATOR","->",199],["T_STRING","getResponse",199],"(",")",["T_WHITESPACE","\n            ",199],["T_OBJECT_OPERATOR","->",200],["T_STRING","setBody",200],"(",["T_VARIABLE","$this",200],["T_OBJECT_OPERATOR","->",200],["T_STRING","getLayout",200],"(",")",["T_WHITESPACE","\n            ",200],["T_OBJECT_OPERATOR","->",201],["T_STRING","createBlock",201],"(",["T_CONSTANT_ENCAPSED_STRING","'adminhtml\/api_user_grid'",201],")",["T_WHITESPACE","\n            ",201],["T_OBJECT_OPERATOR","->",202],["T_STRING","toHtml",202],"(",")",["T_WHITESPACE","\n        ",202],")",";",["T_WHITESPACE","\n    ",203],"}",["T_WHITESPACE","\n\n    ",204],["T_PROTECTED","protected",206],["T_WHITESPACE"," ",206],["T_FUNCTION","function",206],["T_WHITESPACE"," ",206],["T_STRING","_isAllowed",206],"(",")",["T_WHITESPACE","\n    ",206],"{",["T_WHITESPACE","\n        ",207],["T_RETURN","return",208],["T_WHITESPACE"," ",208],["T_STRING","Mage",208],["T_DOUBLE_COLON","::",208],["T_STRING","getSingleton",208],"(",["T_CONSTANT_ENCAPSED_STRING","'admin\/session'",208],")",["T_OBJECT_OPERATOR","->",208],["T_STRING","isAllowed",208],"(",["T_CONSTANT_ENCAPSED_STRING","'system\/api\/users'",208],")",";",["T_WHITESPACE","\n    ",208],"}",["T_WHITESPACE","\n\n",209],"}",["T_WHITESPACE","\n",211]]
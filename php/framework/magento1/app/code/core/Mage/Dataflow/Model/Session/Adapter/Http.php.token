[["T_OPEN_TAG","<?php\n",1],["T_DOC_COMMENT","\/**\n * Magento\n *\n * NOTICE OF LICENSE\n *\n * This source file is subject to the Open Software License (OSL 3.0)\n * that is bundled with this package in the file LICENSE.txt.\n * It is also available through the world-wide-web at this URL:\n * http:\/\/opensource.org\/licenses\/osl-3.0.php\n * If you did not receive a copy of the license and are unable to\n * obtain it through the world-wide-web, please send an email\n * to license@magento.com so we can send you a copy immediately.\n *\n * DISCLAIMER\n *\n * Do not edit or add to this file if you wish to upgrade Magento to newer\n * versions in the future. If you wish to customize Magento for your\n * needs please refer to http:\/\/www.magento.com for more information.\n *\n * @category    Mage\n * @package     Mage_Dataflow\n * @copyright  Copyright (c) 2006-2016 X.commerce, Inc. and affiliates (http:\/\/www.magento.com)\n * @license    http:\/\/opensource.org\/licenses\/osl-3.0.php  Open Software License (OSL 3.0)\n *\/",2],["T_WHITESPACE","\n\n\n",25],["T_DOC_COMMENT","\/**\n * Convert HTTP adapter\n *\n * @category    Mage\n * @package     Mage_Dataflow\n * @author      Magento Core Team <core@magentocommerce.com>\n *\/",28],["T_WHITESPACE","\n ",34],["T_CLASS","class",35],["T_WHITESPACE"," ",35],["T_STRING","Mage_Dataflow_Model_Session_Adapter_Http",35],["T_WHITESPACE"," ",35],["T_EXTENDS","extends",35],["T_WHITESPACE"," ",35],["T_STRING","Mage_Dataflow_Model_Convert_Adapter_Abstract",35],["T_WHITESPACE","\n ",35],"{",["T_WHITESPACE","\n     ",36],["T_PUBLIC","public",37],["T_WHITESPACE"," ",37],["T_FUNCTION","function",37],["T_WHITESPACE"," ",37],["T_STRING","load",37],"(",")",["T_WHITESPACE","\n     ",37],"{",["T_WHITESPACE","\n         ",38],["T_IF","if",39],["T_WHITESPACE"," ",39],"(","!",["T_VARIABLE","$_FILES",39],")",["T_WHITESPACE"," ",39],"{",["T_WHITESPACE","\n",39],["T_CLOSE_TAG","?>\n",40],["T_INLINE_HTML","<form method=\"POST\" enctype=\"multipart\/form-data\">\nFile to upload: <input type=\"file\" name=\"io_file\"\/> <input type=\"submit\" value=\"Upload\"\/>\n<\/form>\n",41],["T_OPEN_TAG","<?php\n",44],["T_WHITESPACE","             ",45],["T_EXIT","exit",45],";",["T_WHITESPACE","\n         ",45],"}",["T_WHITESPACE","\n\n         ",46],["T_IF","if",48],["T_WHITESPACE"," ",48],"(","!",["T_EMPTY","empty",48],"(",["T_VARIABLE","$_FILES",48],"[",["T_CONSTANT_ENCAPSED_STRING","'io_file'",48],"]","[",["T_CONSTANT_ENCAPSED_STRING","'tmp_name'",48],"]",")",")",["T_WHITESPACE"," ",48],"{",["T_WHITESPACE","\n            ",48],["T_VARIABLE","$uploader",49],["T_WHITESPACE"," ",49],"=",["T_WHITESPACE"," ",49],["T_NEW","new",49],["T_WHITESPACE"," ",49],["T_STRING","Mage_Core_Model_File_Uploader",49],"(",["T_CONSTANT_ENCAPSED_STRING","'io_file'",49],")",";",["T_WHITESPACE","\n            ",49],["T_VARIABLE","$uploader",50],["T_OBJECT_OPERATOR","->",50],["T_STRING","setAllowedExtensions",50],"(",["T_ARRAY","array",50],"(",["T_CONSTANT_ENCAPSED_STRING","'csv'",50],",",["T_CONSTANT_ENCAPSED_STRING","'xml'",50],")",")",";",["T_WHITESPACE","\n            ",50],["T_VARIABLE","$path",51],["T_WHITESPACE"," ",51],"=",["T_WHITESPACE"," ",51],["T_STRING","Mage",51],["T_DOUBLE_COLON","::",51],["T_STRING","app",51],"(",")",["T_OBJECT_OPERATOR","->",51],["T_STRING","getConfig",51],"(",")",["T_OBJECT_OPERATOR","->",51],["T_STRING","getTempVarDir",51],"(",")",".",["T_CONSTANT_ENCAPSED_STRING","'\/import\/'",51],";",["T_WHITESPACE","\n            ",51],["T_VARIABLE","$uploader",52],["T_OBJECT_OPERATOR","->",52],["T_STRING","save",52],"(",["T_VARIABLE","$path",52],")",";",["T_WHITESPACE","\n            ",52],["T_IF","if",53],["T_WHITESPACE"," ",53],"(",["T_VARIABLE","$uploadFile",53],["T_WHITESPACE"," ",53],"=",["T_WHITESPACE"," ",53],["T_VARIABLE","$uploader",53],["T_OBJECT_OPERATOR","->",53],["T_STRING","getUploadedFileName",53],"(",")",")",["T_WHITESPACE"," ",53],"{",["T_WHITESPACE","\n                ",53],["T_VARIABLE","$session",54],["T_WHITESPACE"," ",54],"=",["T_WHITESPACE"," ",54],["T_STRING","Mage",54],["T_DOUBLE_COLON","::",54],["T_STRING","getModel",54],"(",["T_CONSTANT_ENCAPSED_STRING","'dataflow\/session'",54],")",";",["T_WHITESPACE","\n                ",54],["T_VARIABLE","$session",55],["T_OBJECT_OPERATOR","->",55],["T_STRING","setCreatedDate",55],"(",["T_STRING","date",55],"(",["T_CONSTANT_ENCAPSED_STRING","'Y-m-d H:i:s'",55],")",")",";",["T_WHITESPACE","\n                ",55],["T_VARIABLE","$session",56],["T_OBJECT_OPERATOR","->",56],["T_STRING","setDirection",56],"(",["T_CONSTANT_ENCAPSED_STRING","'import'",56],")",";",["T_WHITESPACE","\n                ",56],["T_VARIABLE","$session",57],["T_OBJECT_OPERATOR","->",57],["T_STRING","setUserId",57],"(",["T_STRING","Mage",57],["T_DOUBLE_COLON","::",57],["T_STRING","getSingleton",57],"(",["T_CONSTANT_ENCAPSED_STRING","'admin\/session'",57],")",["T_OBJECT_OPERATOR","->",57],["T_STRING","getUser",57],"(",")",["T_OBJECT_OPERATOR","->",57],["T_STRING","getId",57],"(",")",")",";",["T_WHITESPACE","\n                ",57],["T_VARIABLE","$session",58],["T_OBJECT_OPERATOR","->",58],["T_STRING","save",58],"(",")",";",["T_WHITESPACE","\n                ",58],["T_VARIABLE","$sessionId",59],["T_WHITESPACE"," ",59],"=",["T_WHITESPACE"," ",59],["T_VARIABLE","$session",59],["T_OBJECT_OPERATOR","->",59],["T_STRING","getId",59],"(",")",";",["T_WHITESPACE","\n                ",59],["T_VARIABLE","$newFilename",60],["T_WHITESPACE"," ",60],"=",["T_WHITESPACE"," ",60],["T_CONSTANT_ENCAPSED_STRING","'import_'",60],".",["T_VARIABLE","$sessionId",60],".",["T_CONSTANT_ENCAPSED_STRING","'_'",60],".",["T_VARIABLE","$uploadFile",60],";",["T_WHITESPACE","\n                ",60],["T_STRING","rename",61],"(",["T_VARIABLE","$path",61],".",["T_VARIABLE","$uploadFile",61],",",["T_WHITESPACE"," ",61],["T_VARIABLE","$path",61],".",["T_VARIABLE","$newFilename",61],")",";",["T_WHITESPACE","\n                ",61],["T_VARIABLE","$session",62],["T_OBJECT_OPERATOR","->",62],["T_STRING","setFile",62],"(",["T_VARIABLE","$newFilename",62],")",";",["T_WHITESPACE","\n                ",62],["T_VARIABLE","$session",63],["T_OBJECT_OPERATOR","->",63],["T_STRING","save",63],"(",")",";",["T_WHITESPACE","\n                ",63],["T_VARIABLE","$this",64],["T_OBJECT_OPERATOR","->",64],["T_STRING","setData",64],"(",["T_STRING","file_get_contents",64],"(",["T_VARIABLE","$path",64],".",["T_VARIABLE","$newFilename",64],")",")",";",["T_WHITESPACE","\n                ",64],["T_STRING","Mage",65],["T_DOUBLE_COLON","::",65],["T_STRING","register",65],"(",["T_CONSTANT_ENCAPSED_STRING","'current_dataflow_session_id'",65],",",["T_WHITESPACE"," ",65],["T_VARIABLE","$sessionId",65],")",";",["T_WHITESPACE","\n                ",65],["T_COMMENT","\/*\n                $read = @fopen($path.$newFilename, \"r\");\n                if ($read) {\n                    $i = 0;\n                    while (!feof($read)) {\n\n                        $buffer = fgets($read, 4096);\n                        $import = Mage::getModel('dataflow\/import');\n                        $import->setSerialNumber($i);\n                        $import->setSessionId($sessionId);\n                        $import->setSessionId($value);\n                        $i++;\n                    }\n                    fclose($read);\n                }\n                *\/",66],["T_WHITESPACE","\n            ",81],"}",["T_WHITESPACE","\n         ",82],"}",["T_WHITESPACE","\n         ",83],["T_RETURN","return",84],["T_WHITESPACE"," ",84],["T_VARIABLE","$this",84],";",["T_WHITESPACE","\n     ",84],"}",["T_WHITESPACE","\n\n ",85],"}",["T_WHITESPACE","\n",87]]
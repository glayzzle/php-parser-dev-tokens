[["T_OPEN_TAG","<?php\n",1],["T_DOC_COMMENT","\/**\n * Magento\n *\n * NOTICE OF LICENSE\n *\n * This source file is subject to the Open Software License (OSL 3.0)\n * that is bundled with this package in the file LICENSE.txt.\n * It is also available through the world-wide-web at this URL:\n * http:\/\/opensource.org\/licenses\/osl-3.0.php\n * If you did not receive a copy of the license and are unable to\n * obtain it through the world-wide-web, please send an email\n * to license@magento.com so we can send you a copy immediately.\n *\n * DISCLAIMER\n *\n * Do not edit or add to this file if you wish to upgrade Magento to newer\n * versions in the future. If you wish to customize Magento for your\n * needs please refer to http:\/\/www.magento.com for more information.\n *\n * @category    Mage\n * @package     Mage_Dataflow\n * @copyright  Copyright (c) 2006-2016 X.commerce, Inc. and affiliates (http:\/\/www.magento.com)\n * @license    http:\/\/opensource.org\/licenses\/osl-3.0.php  Open Software License (OSL 3.0)\n *\/",2],["T_WHITESPACE","\n\n\n",25],["T_DOC_COMMENT","\/**\n * Convert csv parser\n *\n * @category   Mage\n * @package    Mage_Dataflow\n * @author      Magento Core Team <core@magentocommerce.com>\n *\/",28],["T_WHITESPACE","\n",34],["T_CLASS","class",35],["T_WHITESPACE"," ",35],["T_STRING","Mage_Dataflow_Model_Convert_Parser_Csv",35],["T_WHITESPACE"," ",35],["T_EXTENDS","extends",35],["T_WHITESPACE"," ",35],["T_STRING","Mage_Dataflow_Model_Convert_Parser_Abstract",35],["T_WHITESPACE","\n",35],"{",["T_WHITESPACE","\n    ",36],["T_PROTECTED","protected",37],["T_WHITESPACE"," ",37],["T_VARIABLE","$_fields",37],";",["T_WHITESPACE","\n\n    ",37],["T_PROTECTED","protected",39],["T_WHITESPACE"," ",39],["T_VARIABLE","$_mapfields",39],["T_WHITESPACE"," ",39],"=",["T_WHITESPACE"," ",39],["T_ARRAY","array",39],"(",")",";",["T_WHITESPACE","\n\n    ",39],["T_PUBLIC","public",41],["T_WHITESPACE"," ",41],["T_FUNCTION","function",41],["T_WHITESPACE"," ",41],["T_STRING","parse",41],"(",")",["T_WHITESPACE","\n    ",41],"{",["T_WHITESPACE","\n        ",42],["T_COMMENT","\/\/ fixed for multibyte characters\n",43],["T_WHITESPACE","        ",44],["T_STRING","setlocale",44],"(",["T_STRING","LC_ALL",44],",",["T_WHITESPACE"," ",44],["T_STRING","Mage",44],["T_DOUBLE_COLON","::",44],["T_STRING","app",44],"(",")",["T_OBJECT_OPERATOR","->",44],["T_STRING","getLocale",44],"(",")",["T_OBJECT_OPERATOR","->",44],["T_STRING","getLocaleCode",44],"(",")",".",["T_CONSTANT_ENCAPSED_STRING","'.UTF-8'",44],")",";",["T_WHITESPACE","\n\n        ",44],["T_VARIABLE","$fDel",46],["T_WHITESPACE"," ",46],"=",["T_WHITESPACE"," ",46],["T_VARIABLE","$this",46],["T_OBJECT_OPERATOR","->",46],["T_STRING","getVar",46],"(",["T_CONSTANT_ENCAPSED_STRING","'delimiter'",46],",",["T_WHITESPACE"," ",46],["T_CONSTANT_ENCAPSED_STRING","','",46],")",";",["T_WHITESPACE","\n        ",46],["T_VARIABLE","$fEnc",47],["T_WHITESPACE"," ",47],"=",["T_WHITESPACE"," ",47],["T_VARIABLE","$this",47],["T_OBJECT_OPERATOR","->",47],["T_STRING","getVar",47],"(",["T_CONSTANT_ENCAPSED_STRING","'enclose'",47],",",["T_WHITESPACE"," ",47],["T_CONSTANT_ENCAPSED_STRING","'\"'",47],")",";",["T_WHITESPACE","\n        ",47],["T_IF","if",48],["T_WHITESPACE"," ",48],"(",["T_VARIABLE","$fDel",48],["T_WHITESPACE"," ",48],["T_IS_EQUAL","==",48],["T_WHITESPACE"," ",48],["T_CONSTANT_ENCAPSED_STRING","'\\t'",48],")",["T_WHITESPACE"," ",48],"{",["T_WHITESPACE","\n            ",48],["T_VARIABLE","$fDel",49],["T_WHITESPACE"," ",49],"=",["T_WHITESPACE"," ",49],["T_CONSTANT_ENCAPSED_STRING","\"\\t\"",49],";",["T_WHITESPACE","\n        ",49],"}",["T_WHITESPACE","\n\n        ",50],["T_VARIABLE","$adapterName",52],["T_WHITESPACE","   ",52],"=",["T_WHITESPACE"," ",52],["T_VARIABLE","$this",52],["T_OBJECT_OPERATOR","->",52],["T_STRING","getVar",52],"(",["T_CONSTANT_ENCAPSED_STRING","'adapter'",52],",",["T_WHITESPACE"," ",52],["T_STRING","null",52],")",";",["T_WHITESPACE","\n        ",52],["T_VARIABLE","$adapterMethod",53],["T_WHITESPACE"," ",53],"=",["T_WHITESPACE"," ",53],["T_VARIABLE","$this",53],["T_OBJECT_OPERATOR","->",53],["T_STRING","getVar",53],"(",["T_CONSTANT_ENCAPSED_STRING","'method'",53],",",["T_WHITESPACE"," ",53],["T_CONSTANT_ENCAPSED_STRING","'saveRow'",53],")",";",["T_WHITESPACE","\n\n        ",53],["T_IF","if",55],["T_WHITESPACE"," ",55],"(","!",["T_VARIABLE","$adapterName",55],["T_WHITESPACE"," ",55],["T_BOOLEAN_OR","||",55],["T_WHITESPACE"," ",55],"!",["T_VARIABLE","$adapterMethod",55],")",["T_WHITESPACE"," ",55],"{",["T_WHITESPACE","\n            ",55],["T_VARIABLE","$message",56],["T_WHITESPACE"," ",56],"=",["T_WHITESPACE"," ",56],["T_STRING","Mage",56],["T_DOUBLE_COLON","::",56],["T_STRING","helper",56],"(",["T_CONSTANT_ENCAPSED_STRING","'dataflow'",56],")",["T_OBJECT_OPERATOR","->",56],["T_STRING","__",56],"(",["T_CONSTANT_ENCAPSED_STRING","'Please declare \"adapter\" and \"method\" nodes first.'",56],")",";",["T_WHITESPACE","\n            ",56],["T_VARIABLE","$this",57],["T_OBJECT_OPERATOR","->",57],["T_STRING","addException",57],"(",["T_VARIABLE","$message",57],",",["T_WHITESPACE"," ",57],["T_STRING","Mage_Dataflow_Model_Convert_Exception",57],["T_DOUBLE_COLON","::",57],["T_STRING","FATAL",57],")",";",["T_WHITESPACE","\n            ",57],["T_RETURN","return",58],["T_WHITESPACE"," ",58],["T_VARIABLE","$this",58],";",["T_WHITESPACE","\n        ",58],"}",["T_WHITESPACE","\n\n        ",59],["T_TRY","try",61],["T_WHITESPACE"," ",61],"{",["T_WHITESPACE","\n            ",61],["T_VARIABLE","$adapter",62],["T_WHITESPACE"," ",62],"=",["T_WHITESPACE"," ",62],["T_STRING","Mage",62],["T_DOUBLE_COLON","::",62],["T_STRING","getModel",62],"(",["T_VARIABLE","$adapterName",62],")",";",["T_WHITESPACE","\n        ",62],"}",["T_WHITESPACE","\n        ",63],["T_CATCH","catch",64],["T_WHITESPACE"," ",64],"(",["T_STRING","Exception",64],["T_WHITESPACE"," ",64],["T_VARIABLE","$e",64],")",["T_WHITESPACE"," ",64],"{",["T_WHITESPACE","\n            ",64],["T_VARIABLE","$message",65],["T_WHITESPACE"," ",65],"=",["T_WHITESPACE"," ",65],["T_STRING","Mage",65],["T_DOUBLE_COLON","::",65],["T_STRING","helper",65],"(",["T_CONSTANT_ENCAPSED_STRING","'dataflow'",65],")",["T_OBJECT_OPERATOR","->",65],["T_STRING","__",65],"(",["T_CONSTANT_ENCAPSED_STRING","'Declared adapter %s was not found.'",65],",",["T_WHITESPACE"," ",65],["T_VARIABLE","$adapterName",65],")",";",["T_WHITESPACE","\n            ",65],["T_VARIABLE","$this",66],["T_OBJECT_OPERATOR","->",66],["T_STRING","addException",66],"(",["T_VARIABLE","$message",66],",",["T_WHITESPACE"," ",66],["T_STRING","Mage_Dataflow_Model_Convert_Exception",66],["T_DOUBLE_COLON","::",66],["T_STRING","FATAL",66],")",";",["T_WHITESPACE","\n            ",66],["T_RETURN","return",67],["T_WHITESPACE"," ",67],["T_VARIABLE","$this",67],";",["T_WHITESPACE","\n        ",67],"}",["T_WHITESPACE","\n\n        ",68],["T_IF","if",70],["T_WHITESPACE"," ",70],"(","!",["T_STRING","method_exists",70],"(",["T_VARIABLE","$adapter",70],",",["T_WHITESPACE"," ",70],["T_VARIABLE","$adapterMethod",70],")",")",["T_WHITESPACE"," ",70],"{",["T_WHITESPACE","\n            ",70],["T_VARIABLE","$message",71],["T_WHITESPACE"," ",71],"=",["T_WHITESPACE"," ",71],["T_STRING","Mage",71],["T_DOUBLE_COLON","::",71],["T_STRING","helper",71],"(",["T_CONSTANT_ENCAPSED_STRING","'dataflow'",71],")",["T_OBJECT_OPERATOR","->",71],["T_STRING","__",71],"(",["T_CONSTANT_ENCAPSED_STRING","'Method \"%s\" not defined in adapter %s.'",71],",",["T_WHITESPACE"," ",71],["T_VARIABLE","$adapterMethod",71],",",["T_WHITESPACE"," ",71],["T_VARIABLE","$adapterName",71],")",";",["T_WHITESPACE","\n            ",71],["T_VARIABLE","$this",72],["T_OBJECT_OPERATOR","->",72],["T_STRING","addException",72],"(",["T_VARIABLE","$message",72],",",["T_WHITESPACE"," ",72],["T_STRING","Mage_Dataflow_Model_Convert_Exception",72],["T_DOUBLE_COLON","::",72],["T_STRING","FATAL",72],")",";",["T_WHITESPACE","\n            ",72],["T_RETURN","return",73],["T_WHITESPACE"," ",73],["T_VARIABLE","$this",73],";",["T_WHITESPACE","\n        ",73],"}",["T_WHITESPACE","\n\n        ",74],["T_VARIABLE","$batchModel",76],["T_WHITESPACE"," ",76],"=",["T_WHITESPACE"," ",76],["T_VARIABLE","$this",76],["T_OBJECT_OPERATOR","->",76],["T_STRING","getBatchModel",76],"(",")",";",["T_WHITESPACE","\n        ",76],["T_VARIABLE","$batchIoAdapter",77],["T_WHITESPACE"," ",77],"=",["T_WHITESPACE"," ",77],["T_VARIABLE","$this",77],["T_OBJECT_OPERATOR","->",77],["T_STRING","getBatchModel",77],"(",")",["T_OBJECT_OPERATOR","->",77],["T_STRING","getIoAdapter",77],"(",")",";",["T_WHITESPACE","\n\n        ",77],["T_IF","if",79],["T_WHITESPACE"," ",79],"(",["T_STRING","Mage",79],["T_DOUBLE_COLON","::",79],["T_STRING","app",79],"(",")",["T_OBJECT_OPERATOR","->",79],["T_STRING","getRequest",79],"(",")",["T_OBJECT_OPERATOR","->",79],["T_STRING","getParam",79],"(",["T_CONSTANT_ENCAPSED_STRING","'files'",79],")",")",["T_WHITESPACE"," ",79],"{",["T_WHITESPACE","\n            ",79],["T_VARIABLE","$file",80],["T_WHITESPACE"," ",80],"=",["T_WHITESPACE"," ",80],["T_STRING","Mage",80],["T_DOUBLE_COLON","::",80],["T_STRING","app",80],"(",")",["T_OBJECT_OPERATOR","->",80],["T_STRING","getConfig",80],"(",")",["T_OBJECT_OPERATOR","->",80],["T_STRING","getTempVarDir",80],"(",")",".",["T_CONSTANT_ENCAPSED_STRING","'\/import\/'",80],["T_WHITESPACE","\n                ",80],".",["T_WHITESPACE"," ",81],["T_STRING","urldecode",81],"(",["T_STRING","Mage",81],["T_DOUBLE_COLON","::",81],["T_STRING","app",81],"(",")",["T_OBJECT_OPERATOR","->",81],["T_STRING","getRequest",81],"(",")",["T_OBJECT_OPERATOR","->",81],["T_STRING","getParam",81],"(",["T_CONSTANT_ENCAPSED_STRING","'files'",81],")",")",";",["T_WHITESPACE","\n            ",81],["T_VARIABLE","$this",82],["T_OBJECT_OPERATOR","->",82],["T_STRING","_copy",82],"(",["T_VARIABLE","$file",82],")",";",["T_WHITESPACE","\n        ",82],"}",["T_WHITESPACE","\n\n        ",83],["T_VARIABLE","$batchIoAdapter",85],["T_OBJECT_OPERATOR","->",85],["T_STRING","open",85],"(",["T_STRING","false",85],")",";",["T_WHITESPACE","\n\n        ",85],["T_VARIABLE","$isFieldNames",87],["T_WHITESPACE"," ",87],"=",["T_WHITESPACE"," ",87],["T_VARIABLE","$this",87],["T_OBJECT_OPERATOR","->",87],["T_STRING","getVar",87],"(",["T_CONSTANT_ENCAPSED_STRING","'fieldnames'",87],",",["T_WHITESPACE"," ",87],["T_CONSTANT_ENCAPSED_STRING","''",87],")",["T_WHITESPACE"," ",87],["T_IS_EQUAL","==",87],["T_WHITESPACE"," ",87],["T_CONSTANT_ENCAPSED_STRING","'true'",87],["T_WHITESPACE"," ",87],"?",["T_WHITESPACE"," ",87],["T_STRING","true",87],["T_WHITESPACE"," ",87],":",["T_WHITESPACE"," ",87],["T_STRING","false",87],";",["T_WHITESPACE","\n        ",87],["T_IF","if",88],["T_WHITESPACE"," ",88],"(","!",["T_VARIABLE","$isFieldNames",88],["T_WHITESPACE"," ",88],["T_BOOLEAN_AND","&&",88],["T_WHITESPACE"," ",88],["T_STRING","is_array",88],"(",["T_VARIABLE","$this",88],["T_OBJECT_OPERATOR","->",88],["T_STRING","getVar",88],"(",["T_CONSTANT_ENCAPSED_STRING","'map'",88],")",")",")",["T_WHITESPACE"," ",88],"{",["T_WHITESPACE","\n            ",88],["T_VARIABLE","$fieldNames",89],["T_WHITESPACE"," ",89],"=",["T_WHITESPACE"," ",89],["T_VARIABLE","$this",89],["T_OBJECT_OPERATOR","->",89],["T_STRING","getVar",89],"(",["T_CONSTANT_ENCAPSED_STRING","'map'",89],")",";",["T_WHITESPACE","\n        ",89],"}",["T_WHITESPACE","\n        ",90],["T_ELSE","else",91],["T_WHITESPACE"," ",91],"{",["T_WHITESPACE","\n            ",91],["T_VARIABLE","$fieldNames",92],["T_WHITESPACE"," ",92],"=",["T_WHITESPACE"," ",92],["T_ARRAY","array",92],"(",")",";",["T_WHITESPACE","\n            ",92],["T_FOREACH","foreach",93],["T_WHITESPACE"," ",93],"(",["T_VARIABLE","$batchIoAdapter",93],["T_OBJECT_OPERATOR","->",93],["T_STRING","read",93],"(",["T_STRING","true",93],",",["T_WHITESPACE"," ",93],["T_VARIABLE","$fDel",93],",",["T_WHITESPACE"," ",93],["T_VARIABLE","$fEnc",93],")",["T_WHITESPACE"," ",93],["T_AS","as",93],["T_WHITESPACE"," ",93],["T_VARIABLE","$v",93],")",["T_WHITESPACE"," ",93],"{",["T_WHITESPACE","\n                ",93],["T_VARIABLE","$fieldNames",94],"[",["T_VARIABLE","$v",94],"]",["T_WHITESPACE"," ",94],"=",["T_WHITESPACE"," ",94],["T_VARIABLE","$v",94],";",["T_WHITESPACE","\n            ",94],"}",["T_WHITESPACE","\n        ",95],"}",["T_WHITESPACE","\n\n        ",96],["T_VARIABLE","$countRows",98],["T_WHITESPACE"," ",98],"=",["T_WHITESPACE"," ",98],["T_LNUMBER","0",98],";",["T_WHITESPACE","\n        ",98],["T_WHILE","while",99],["T_WHITESPACE"," ",99],"(","(",["T_VARIABLE","$csvData",99],["T_WHITESPACE"," ",99],"=",["T_WHITESPACE"," ",99],["T_VARIABLE","$batchIoAdapter",99],["T_OBJECT_OPERATOR","->",99],["T_STRING","read",99],"(",["T_STRING","true",99],",",["T_WHITESPACE"," ",99],["T_VARIABLE","$fDel",99],",",["T_WHITESPACE"," ",99],["T_VARIABLE","$fEnc",99],")",")",["T_WHITESPACE"," ",99],["T_IS_NOT_IDENTICAL","!==",99],["T_WHITESPACE"," ",99],["T_STRING","false",99],")",["T_WHITESPACE"," ",99],"{",["T_WHITESPACE","\n            ",99],["T_IF","if",100],["T_WHITESPACE"," ",100],"(",["T_STRING","count",100],"(",["T_VARIABLE","$csvData",100],")",["T_WHITESPACE"," ",100],["T_IS_EQUAL","==",100],["T_WHITESPACE"," ",100],["T_LNUMBER","1",100],["T_WHITESPACE"," ",100],["T_BOOLEAN_AND","&&",100],["T_WHITESPACE"," ",100],["T_VARIABLE","$csvData",100],"[",["T_LNUMBER","0",100],"]",["T_WHITESPACE"," ",100],["T_IS_IDENTICAL","===",100],["T_WHITESPACE"," ",100],["T_STRING","null",100],")",["T_WHITESPACE"," ",100],"{",["T_WHITESPACE","\n                ",100],["T_CONTINUE","continue",101],";",["T_WHITESPACE","\n            ",101],"}",["T_WHITESPACE","\n\n            ",102],["T_VARIABLE","$itemData",104],["T_WHITESPACE"," ",104],"=",["T_WHITESPACE"," ",104],["T_ARRAY","array",104],"(",")",";",["T_WHITESPACE","\n            ",104],["T_VARIABLE","$countRows",105],["T_WHITESPACE"," ",105],["T_INC","++",105],";",["T_WHITESPACE"," ",105],["T_VARIABLE","$i",105],["T_WHITESPACE"," ",105],"=",["T_WHITESPACE"," ",105],["T_LNUMBER","0",105],";",["T_WHITESPACE","\n            ",105],["T_FOREACH","foreach",106],["T_WHITESPACE"," ",106],"(",["T_VARIABLE","$fieldNames",106],["T_WHITESPACE"," ",106],["T_AS","as",106],["T_WHITESPACE"," ",106],["T_VARIABLE","$field",106],")",["T_WHITESPACE"," ",106],"{",["T_WHITESPACE","\n                ",106],["T_VARIABLE","$itemData",107],"[",["T_VARIABLE","$field",107],"]",["T_WHITESPACE"," ",107],"=",["T_WHITESPACE"," ",107],["T_ISSET","isset",107],"(",["T_VARIABLE","$csvData",107],"[",["T_VARIABLE","$i",107],"]",")",["T_WHITESPACE"," ",107],"?",["T_WHITESPACE"," ",107],["T_VARIABLE","$csvData",107],"[",["T_VARIABLE","$i",107],"]",["T_WHITESPACE"," ",107],":",["T_WHITESPACE"," ",107],["T_STRING","null",107],";",["T_WHITESPACE","\n                ",107],["T_VARIABLE","$i",108],["T_WHITESPACE"," ",108],["T_INC","++",108],";",["T_WHITESPACE","\n            ",108],"}",["T_WHITESPACE","\n\n            ",109],["T_VARIABLE","$batchImportModel",111],["T_WHITESPACE"," ",111],"=",["T_WHITESPACE"," ",111],["T_VARIABLE","$this",111],["T_OBJECT_OPERATOR","->",111],["T_STRING","getBatchImportModel",111],"(",")",["T_WHITESPACE","\n                ",111],["T_OBJECT_OPERATOR","->",112],["T_STRING","setId",112],"(",["T_STRING","null",112],")",["T_WHITESPACE","\n                ",112],["T_OBJECT_OPERATOR","->",113],["T_STRING","setBatchId",113],"(",["T_VARIABLE","$this",113],["T_OBJECT_OPERATOR","->",113],["T_STRING","getBatchModel",113],"(",")",["T_OBJECT_OPERATOR","->",113],["T_STRING","getId",113],"(",")",")",["T_WHITESPACE","\n                ",113],["T_OBJECT_OPERATOR","->",114],["T_STRING","setBatchData",114],"(",["T_VARIABLE","$itemData",114],")",["T_WHITESPACE","\n                ",114],["T_OBJECT_OPERATOR","->",115],["T_STRING","setStatus",115],"(",["T_LNUMBER","1",115],")",["T_WHITESPACE","\n                ",115],["T_OBJECT_OPERATOR","->",116],["T_STRING","save",116],"(",")",";",["T_WHITESPACE","\n        ",116],"}",["T_WHITESPACE","\n\n        ",117],["T_VARIABLE","$this",119],["T_OBJECT_OPERATOR","->",119],["T_STRING","addException",119],"(",["T_STRING","Mage",119],["T_DOUBLE_COLON","::",119],["T_STRING","helper",119],"(",["T_CONSTANT_ENCAPSED_STRING","'dataflow'",119],")",["T_OBJECT_OPERATOR","->",119],["T_STRING","__",119],"(",["T_CONSTANT_ENCAPSED_STRING","'Found %d rows.'",119],",",["T_WHITESPACE"," ",119],["T_VARIABLE","$countRows",119],")",")",";",["T_WHITESPACE","\n        ",119],["T_VARIABLE","$this",120],["T_OBJECT_OPERATOR","->",120],["T_STRING","addException",120],"(",["T_STRING","Mage",120],["T_DOUBLE_COLON","::",120],["T_STRING","helper",120],"(",["T_CONSTANT_ENCAPSED_STRING","'dataflow'",120],")",["T_OBJECT_OPERATOR","->",120],["T_STRING","__",120],"(",["T_CONSTANT_ENCAPSED_STRING","'Starting %s :: %s'",120],",",["T_WHITESPACE"," ",120],["T_VARIABLE","$adapterName",120],",",["T_WHITESPACE"," ",120],["T_VARIABLE","$adapterMethod",120],")",")",";",["T_WHITESPACE","\n\n        ",120],["T_VARIABLE","$batchModel",122],["T_OBJECT_OPERATOR","->",122],["T_STRING","setParams",122],"(",["T_VARIABLE","$this",122],["T_OBJECT_OPERATOR","->",122],["T_STRING","getVars",122],"(",")",")",["T_WHITESPACE","\n            ",122],["T_OBJECT_OPERATOR","->",123],["T_STRING","setAdapter",123],"(",["T_VARIABLE","$adapterName",123],")",["T_WHITESPACE","\n            ",123],["T_OBJECT_OPERATOR","->",124],["T_STRING","save",124],"(",")",";",["T_WHITESPACE","\n\n        ",124],["T_COMMENT","\/\/$adapter->$adapterMethod();\n",126],["T_WHITESPACE","\n        ",127],["T_RETURN","return",128],["T_WHITESPACE"," ",128],["T_VARIABLE","$this",128],";",["T_WHITESPACE","\n\n",128],["T_COMMENT","\/\/        \/\/ fix for field mapping\n",130],["T_COMMENT","\/\/        if ($mapfields = $this->getProfile()->getDataflowProfile()) {\n",131],["T_COMMENT","\/\/            $this->_mapfields = array_values($mapfields['gui_data']['map'][$mapfields['entity_type']]['db']);\n",132],["T_COMMENT","\/\/        } \/\/ end\n",133],["T_COMMENT","\/\/\n",134],["T_COMMENT","\/\/        if (!$this->getVar('fieldnames') && !$this->_mapfields) {\n",135],["T_COMMENT","\/\/            $this->addException('Please define field mapping', Mage_Dataflow_Model_Convert_Exception::FATAL);\n",136],["T_COMMENT","\/\/            return;\n",137],["T_COMMENT","\/\/        }\n",138],["T_COMMENT","\/\/\n",139],["T_COMMENT","\/\/        if ($this->getVar('adapter') && $this->getVar('method')) {\n",140],["T_COMMENT","\/\/            $adapter = Mage::getModel($this->getVar('adapter'));\n",141],["T_COMMENT","\/\/        }\n",142],["T_COMMENT","\/\/\n",143],["T_COMMENT","\/\/        $i = 0;\n",144],["T_COMMENT","\/\/        while (($line = fgetcsv($fh, null, $fDel, $fEnc)) !== FALSE) {\n",145],["T_COMMENT","\/\/            $row = $this->parseRow($i, $line);\n",146],["T_COMMENT","\/\/\n",147],["T_COMMENT","\/\/            if (!$this->getVar('fieldnames') && $i == 0 && $row) {\n",148],["T_COMMENT","\/\/                $i = 1;\n",149],["T_COMMENT","\/\/            }\n",150],["T_COMMENT","\/\/\n",151],["T_COMMENT","\/\/            if ($row) {\n",152],["T_COMMENT","\/\/                $loadMethod = $this->getVar('method');\n",153],["T_COMMENT","\/\/                $adapter->$loadMethod(compact('i', 'row'));\n",154],["T_COMMENT","\/\/            }\n",155],["T_COMMENT","\/\/            $i++;\n",156],["T_COMMENT","\/\/        }\n",157],["T_COMMENT","\/\/\n",158],["T_COMMENT","\/\/        return $this;\n",159],["T_WHITESPACE","    ",160],"}",["T_WHITESPACE","\n\n    ",160],["T_PUBLIC","public",162],["T_WHITESPACE"," ",162],["T_FUNCTION","function",162],["T_WHITESPACE"," ",162],["T_STRING","parseRow",162],"(",["T_VARIABLE","$i",162],",",["T_WHITESPACE"," ",162],["T_VARIABLE","$line",162],")",["T_WHITESPACE","\n    ",162],"{",["T_WHITESPACE","\n        ",163],["T_IF","if",164],["T_WHITESPACE"," ",164],"(",["T_STRING","sizeof",164],"(",["T_VARIABLE","$line",164],")",["T_WHITESPACE"," ",164],["T_IS_EQUAL","==",164],["T_WHITESPACE"," ",164],["T_LNUMBER","1",164],")",["T_WHITESPACE"," ",164],["T_RETURN","return",164],["T_WHITESPACE"," ",164],["T_STRING","false",164],";",["T_WHITESPACE","\n\n        ",164],["T_IF","if",166],["T_WHITESPACE"," ",166],"(",["T_LNUMBER","0",166],["T_IS_EQUAL","==",166],["T_VARIABLE","$i",166],")",["T_WHITESPACE"," ",166],"{",["T_WHITESPACE","\n            ",166],["T_IF","if",167],["T_WHITESPACE"," ",167],"(",["T_VARIABLE","$this",167],["T_OBJECT_OPERATOR","->",167],["T_STRING","getVar",167],"(",["T_CONSTANT_ENCAPSED_STRING","'fieldnames'",167],")",")",["T_WHITESPACE"," ",167],"{",["T_WHITESPACE","\n                ",167],["T_VARIABLE","$this",168],["T_OBJECT_OPERATOR","->",168],["T_STRING","_fields",168],["T_WHITESPACE"," ",168],"=",["T_WHITESPACE"," ",168],["T_VARIABLE","$line",168],";",["T_WHITESPACE","\n                ",168],["T_RETURN","return",169],";",["T_WHITESPACE","\n            ",169],"}",["T_WHITESPACE"," ",170],["T_ELSE","else",170],["T_WHITESPACE"," ",170],"{",["T_WHITESPACE","\n                ",170],["T_FOREACH","foreach",171],["T_WHITESPACE"," ",171],"(",["T_VARIABLE","$line",171],["T_WHITESPACE"," ",171],["T_AS","as",171],["T_WHITESPACE"," ",171],["T_VARIABLE","$j",171],["T_DOUBLE_ARROW","=>",171],["T_VARIABLE","$f",171],")",["T_WHITESPACE"," ",171],"{",["T_WHITESPACE","\n                    ",171],["T_VARIABLE","$this",172],["T_OBJECT_OPERATOR","->",172],["T_STRING","_fields",172],"[",["T_VARIABLE","$j",172],"]",["T_WHITESPACE"," ",172],"=",["T_WHITESPACE"," ",172],["T_VARIABLE","$this",172],["T_OBJECT_OPERATOR","->",172],["T_STRING","_mapfields",172],"[",["T_VARIABLE","$j",172],"]",";",["T_WHITESPACE","\n                ",172],"}",["T_WHITESPACE","\n            ",173],"}",["T_WHITESPACE","\n        ",174],"}",["T_WHITESPACE","\n\n        ",175],["T_VARIABLE","$resultRow",177],["T_WHITESPACE"," ",177],"=",["T_WHITESPACE"," ",177],["T_ARRAY","array",177],"(",")",";",["T_WHITESPACE","\n\n        ",177],["T_FOREACH","foreach",179],["T_WHITESPACE"," ",179],"(",["T_VARIABLE","$this",179],["T_OBJECT_OPERATOR","->",179],["T_STRING","_fields",179],["T_WHITESPACE"," ",179],["T_AS","as",179],["T_WHITESPACE"," ",179],["T_VARIABLE","$j",179],["T_DOUBLE_ARROW","=>",179],["T_VARIABLE","$f",179],")",["T_WHITESPACE"," ",179],"{",["T_WHITESPACE","\n            ",179],["T_VARIABLE","$resultRow",180],"[",["T_VARIABLE","$f",180],"]",["T_WHITESPACE"," ",180],"=",["T_WHITESPACE"," ",180],["T_ISSET","isset",180],"(",["T_VARIABLE","$line",180],"[",["T_VARIABLE","$j",180],"]",")",["T_WHITESPACE"," ",180],"?",["T_WHITESPACE"," ",180],["T_VARIABLE","$line",180],"[",["T_VARIABLE","$j",180],"]",["T_WHITESPACE"," ",180],":",["T_WHITESPACE"," ",180],["T_CONSTANT_ENCAPSED_STRING","''",180],";",["T_WHITESPACE","\n        ",180],"}",["T_WHITESPACE","\n        ",181],["T_RETURN","return",182],["T_WHITESPACE"," ",182],["T_VARIABLE","$resultRow",182],";",["T_WHITESPACE","\n    ",182],"}",["T_WHITESPACE","\n\n    ",183],["T_DOC_COMMENT","\/**\n     * Read data collection and write to temporary file\n     *\n     * @return Mage_Dataflow_Model_Convert_Parser_Csv\n     *\/",185],["T_WHITESPACE","\n    ",189],["T_PUBLIC","public",190],["T_WHITESPACE"," ",190],["T_FUNCTION","function",190],["T_WHITESPACE"," ",190],["T_STRING","unparse",190],"(",")",["T_WHITESPACE","\n    ",190],"{",["T_WHITESPACE","\n        ",191],["T_VARIABLE","$batchExport",192],["T_WHITESPACE"," ",192],"=",["T_WHITESPACE"," ",192],["T_VARIABLE","$this",192],["T_OBJECT_OPERATOR","->",192],["T_STRING","getBatchExportModel",192],"(",")",["T_WHITESPACE","\n            ",192],["T_OBJECT_OPERATOR","->",193],["T_STRING","setBatchId",193],"(",["T_VARIABLE","$this",193],["T_OBJECT_OPERATOR","->",193],["T_STRING","getBatchModel",193],"(",")",["T_OBJECT_OPERATOR","->",193],["T_STRING","getId",193],"(",")",")",";",["T_WHITESPACE","\n        ",193],["T_VARIABLE","$fieldList",194],["T_WHITESPACE"," ",194],"=",["T_WHITESPACE"," ",194],["T_VARIABLE","$this",194],["T_OBJECT_OPERATOR","->",194],["T_STRING","getBatchModel",194],"(",")",["T_OBJECT_OPERATOR","->",194],["T_STRING","getFieldList",194],"(",")",";",["T_WHITESPACE","\n        ",194],["T_VARIABLE","$batchExportIds",195],["T_WHITESPACE"," ",195],"=",["T_WHITESPACE"," ",195],["T_VARIABLE","$batchExport",195],["T_OBJECT_OPERATOR","->",195],["T_STRING","getIdCollection",195],"(",")",";",["T_WHITESPACE","\n\n        ",195],["T_VARIABLE","$io",197],["T_WHITESPACE"," ",197],"=",["T_WHITESPACE"," ",197],["T_VARIABLE","$this",197],["T_OBJECT_OPERATOR","->",197],["T_STRING","getBatchModel",197],"(",")",["T_OBJECT_OPERATOR","->",197],["T_STRING","getIoAdapter",197],"(",")",";",["T_WHITESPACE","\n        ",197],["T_VARIABLE","$io",198],["T_OBJECT_OPERATOR","->",198],["T_STRING","open",198],"(",")",";",["T_WHITESPACE","\n\n        ",198],["T_IF","if",200],["T_WHITESPACE"," ",200],"(","!",["T_VARIABLE","$batchExportIds",200],")",["T_WHITESPACE"," ",200],"{",["T_WHITESPACE","\n            ",200],["T_VARIABLE","$io",201],["T_OBJECT_OPERATOR","->",201],["T_STRING","write",201],"(",["T_CONSTANT_ENCAPSED_STRING","\"\"",201],")",";",["T_WHITESPACE","\n            ",201],["T_VARIABLE","$io",202],["T_OBJECT_OPERATOR","->",202],["T_STRING","close",202],"(",")",";",["T_WHITESPACE","\n            ",202],["T_RETURN","return",203],["T_WHITESPACE"," ",203],["T_VARIABLE","$this",203],";",["T_WHITESPACE","\n        ",203],"}",["T_WHITESPACE","\n\n        ",204],["T_IF","if",206],["T_WHITESPACE"," ",206],"(",["T_VARIABLE","$this",206],["T_OBJECT_OPERATOR","->",206],["T_STRING","getVar",206],"(",["T_CONSTANT_ENCAPSED_STRING","'fieldnames'",206],")",")",["T_WHITESPACE"," ",206],"{",["T_WHITESPACE","\n            ",206],["T_VARIABLE","$csvData",207],["T_WHITESPACE"," ",207],"=",["T_WHITESPACE"," ",207],["T_VARIABLE","$this",207],["T_OBJECT_OPERATOR","->",207],["T_STRING","getCsvString",207],"(",["T_VARIABLE","$fieldList",207],")",";",["T_WHITESPACE","\n            ",207],["T_VARIABLE","$io",208],["T_OBJECT_OPERATOR","->",208],["T_STRING","write",208],"(",["T_VARIABLE","$csvData",208],")",";",["T_WHITESPACE","\n        ",208],"}",["T_WHITESPACE","\n\n        ",209],["T_FOREACH","foreach",211],["T_WHITESPACE"," ",211],"(",["T_VARIABLE","$batchExportIds",211],["T_WHITESPACE"," ",211],["T_AS","as",211],["T_WHITESPACE"," ",211],["T_VARIABLE","$batchExportId",211],")",["T_WHITESPACE"," ",211],"{",["T_WHITESPACE","\n            ",211],["T_VARIABLE","$csvData",212],["T_WHITESPACE"," ",212],"=",["T_WHITESPACE"," ",212],["T_ARRAY","array",212],"(",")",";",["T_WHITESPACE","\n            ",212],["T_VARIABLE","$batchExport",213],["T_OBJECT_OPERATOR","->",213],["T_STRING","load",213],"(",["T_VARIABLE","$batchExportId",213],")",";",["T_WHITESPACE","\n            ",213],["T_VARIABLE","$row",214],["T_WHITESPACE"," ",214],"=",["T_WHITESPACE"," ",214],["T_VARIABLE","$batchExport",214],["T_OBJECT_OPERATOR","->",214],["T_STRING","getBatchData",214],"(",")",";",["T_WHITESPACE","\n\n            ",214],["T_FOREACH","foreach",216],["T_WHITESPACE"," ",216],"(",["T_VARIABLE","$fieldList",216],["T_WHITESPACE"," ",216],["T_AS","as",216],["T_WHITESPACE"," ",216],["T_VARIABLE","$field",216],")",["T_WHITESPACE"," ",216],"{",["T_WHITESPACE","\n                ",216],["T_VARIABLE","$csvData",217],"[","]",["T_WHITESPACE"," ",217],"=",["T_WHITESPACE"," ",217],["T_ISSET","isset",217],"(",["T_VARIABLE","$row",217],"[",["T_VARIABLE","$field",217],"]",")",["T_WHITESPACE"," ",217],"?",["T_WHITESPACE"," ",217],["T_VARIABLE","$row",217],"[",["T_VARIABLE","$field",217],"]",["T_WHITESPACE"," ",217],":",["T_WHITESPACE"," ",217],["T_CONSTANT_ENCAPSED_STRING","''",217],";",["T_WHITESPACE","\n            ",217],"}",["T_WHITESPACE","\n            ",218],["T_VARIABLE","$csvData",219],["T_WHITESPACE"," ",219],"=",["T_WHITESPACE"," ",219],["T_VARIABLE","$this",219],["T_OBJECT_OPERATOR","->",219],["T_STRING","getCsvString",219],"(",["T_VARIABLE","$csvData",219],")",";",["T_WHITESPACE","\n            ",219],["T_VARIABLE","$io",220],["T_OBJECT_OPERATOR","->",220],["T_STRING","write",220],"(",["T_VARIABLE","$csvData",220],")",";",["T_WHITESPACE","\n        ",220],"}",["T_WHITESPACE","\n\n        ",221],["T_VARIABLE","$io",223],["T_OBJECT_OPERATOR","->",223],["T_STRING","close",223],"(",")",";",["T_WHITESPACE","\n\n        ",223],["T_RETURN","return",225],["T_WHITESPACE"," ",225],["T_VARIABLE","$this",225],";",["T_WHITESPACE","\n    ",225],"}",["T_WHITESPACE","\n\n    ",226],["T_PUBLIC","public",228],["T_WHITESPACE"," ",228],["T_FUNCTION","function",228],["T_WHITESPACE"," ",228],["T_STRING","unparseRow",228],"(",["T_VARIABLE","$args",228],")",["T_WHITESPACE","\n    ",228],"{",["T_WHITESPACE","\n        ",229],["T_VARIABLE","$i",230],["T_WHITESPACE"," ",230],"=",["T_WHITESPACE"," ",230],["T_VARIABLE","$args",230],"[",["T_CONSTANT_ENCAPSED_STRING","'i'",230],"]",";",["T_WHITESPACE","\n        ",230],["T_VARIABLE","$row",231],["T_WHITESPACE"," ",231],"=",["T_WHITESPACE"," ",231],["T_VARIABLE","$args",231],"[",["T_CONSTANT_ENCAPSED_STRING","'row'",231],"]",";",["T_WHITESPACE","\n\n        ",231],["T_VARIABLE","$fDel",233],["T_WHITESPACE"," ",233],"=",["T_WHITESPACE"," ",233],["T_VARIABLE","$this",233],["T_OBJECT_OPERATOR","->",233],["T_STRING","getVar",233],"(",["T_CONSTANT_ENCAPSED_STRING","'delimiter'",233],",",["T_WHITESPACE"," ",233],["T_CONSTANT_ENCAPSED_STRING","','",233],")",";",["T_WHITESPACE","\n        ",233],["T_VARIABLE","$fEnc",234],["T_WHITESPACE"," ",234],"=",["T_WHITESPACE"," ",234],["T_VARIABLE","$this",234],["T_OBJECT_OPERATOR","->",234],["T_STRING","getVar",234],"(",["T_CONSTANT_ENCAPSED_STRING","'enclose'",234],",",["T_WHITESPACE"," ",234],["T_CONSTANT_ENCAPSED_STRING","'\"'",234],")",";",["T_WHITESPACE","\n        ",234],["T_VARIABLE","$fEsc",235],["T_WHITESPACE"," ",235],"=",["T_WHITESPACE"," ",235],["T_VARIABLE","$this",235],["T_OBJECT_OPERATOR","->",235],["T_STRING","getVar",235],"(",["T_CONSTANT_ENCAPSED_STRING","'escape'",235],",",["T_WHITESPACE"," ",235],["T_CONSTANT_ENCAPSED_STRING","'\\\\'",235],")",";",["T_WHITESPACE","\n        ",235],["T_VARIABLE","$lDel",236],["T_WHITESPACE"," ",236],"=",["T_WHITESPACE"," ",236],["T_CONSTANT_ENCAPSED_STRING","\"\\r\\n\"",236],";",["T_WHITESPACE","\n\n        ",236],["T_IF","if",238],["T_WHITESPACE"," ",238],"(",["T_VARIABLE","$fDel",238],["T_WHITESPACE"," ",238],["T_IS_EQUAL","==",238],["T_WHITESPACE"," ",238],["T_CONSTANT_ENCAPSED_STRING","'\\t'",238],")",["T_WHITESPACE"," ",238],"{",["T_WHITESPACE","\n            ",238],["T_VARIABLE","$fDel",239],["T_WHITESPACE"," ",239],"=",["T_WHITESPACE"," ",239],["T_CONSTANT_ENCAPSED_STRING","\"\\t\"",239],";",["T_WHITESPACE","\n        ",239],"}",["T_WHITESPACE","\n\n        ",240],["T_VARIABLE","$line",242],["T_WHITESPACE"," ",242],"=",["T_WHITESPACE"," ",242],["T_ARRAY","array",242],"(",")",";",["T_WHITESPACE","\n        ",242],["T_FOREACH","foreach",243],["T_WHITESPACE"," ",243],"(",["T_VARIABLE","$this",243],["T_OBJECT_OPERATOR","->",243],["T_STRING","_fields",243],["T_WHITESPACE"," ",243],["T_AS","as",243],["T_WHITESPACE"," ",243],["T_VARIABLE","$f",243],")",["T_WHITESPACE"," ",243],"{",["T_WHITESPACE","\n            ",243],["T_VARIABLE","$v",244],["T_WHITESPACE"," ",244],"=",["T_WHITESPACE"," ",244],["T_ISSET","isset",244],"(",["T_VARIABLE","$row",244],"[",["T_VARIABLE","$f",244],"]",")",["T_WHITESPACE"," ",244],"?",["T_WHITESPACE"," ",244],["T_STRING","str_replace",244],"(",["T_ARRAY","array",244],"(",["T_CONSTANT_ENCAPSED_STRING","'\"'",244],",",["T_WHITESPACE"," ",244],["T_CONSTANT_ENCAPSED_STRING","'\\\\'",244],")",",",["T_WHITESPACE"," ",244],["T_ARRAY","array",244],"(",["T_VARIABLE","$fEnc",244],".",["T_CONSTANT_ENCAPSED_STRING","'\"'",244],",",["T_WHITESPACE"," ",244],["T_VARIABLE","$fEsc",244],".",["T_CONSTANT_ENCAPSED_STRING","'\\\\'",244],")",",",["T_WHITESPACE"," ",244],["T_VARIABLE","$row",244],"[",["T_VARIABLE","$f",244],"]",")",["T_WHITESPACE"," ",244],":",["T_WHITESPACE"," ",244],["T_CONSTANT_ENCAPSED_STRING","''",244],";",["T_WHITESPACE","\n            ",244],["T_VARIABLE","$line",245],"[","]",["T_WHITESPACE"," ",245],"=",["T_WHITESPACE"," ",245],["T_VARIABLE","$fEnc",245],".",["T_VARIABLE","$v",245],".",["T_VARIABLE","$fEnc",245],";",["T_WHITESPACE","\n        ",245],"}",["T_WHITESPACE","\n\n        ",246],["T_RETURN","return",248],["T_WHITESPACE"," ",248],["T_STRING","join",248],"(",["T_VARIABLE","$fDel",248],",",["T_WHITESPACE"," ",248],["T_VARIABLE","$line",248],")",";",["T_WHITESPACE","\n    ",248],"}",["T_WHITESPACE","\n\n    ",249],["T_DOC_COMMENT","\/**\n     * Retrieve csv string from array\n     *\n     * @param array $fields\n     * @return string\n     *\/",251],["T_WHITESPACE","\n    ",256],["T_PUBLIC","public",257],["T_WHITESPACE"," ",257],["T_FUNCTION","function",257],["T_WHITESPACE"," ",257],["T_STRING","getCsvString",257],"(",["T_VARIABLE","$fields",257],["T_WHITESPACE"," ",257],"=",["T_WHITESPACE"," ",257],["T_ARRAY","array",257],"(",")",")",["T_WHITESPACE"," ",257],"{",["T_WHITESPACE","\n        ",257],["T_VARIABLE","$delimiter",258],["T_WHITESPACE","  ",258],"=",["T_WHITESPACE"," ",258],["T_VARIABLE","$this",258],["T_OBJECT_OPERATOR","->",258],["T_STRING","getVar",258],"(",["T_CONSTANT_ENCAPSED_STRING","'delimiter'",258],",",["T_WHITESPACE"," ",258],["T_CONSTANT_ENCAPSED_STRING","','",258],")",";",["T_WHITESPACE","\n        ",258],["T_VARIABLE","$enclosure",259],["T_WHITESPACE","  ",259],"=",["T_WHITESPACE"," ",259],["T_VARIABLE","$this",259],["T_OBJECT_OPERATOR","->",259],["T_STRING","getVar",259],"(",["T_CONSTANT_ENCAPSED_STRING","'enclose'",259],",",["T_WHITESPACE"," ",259],["T_CONSTANT_ENCAPSED_STRING","''",259],")",";",["T_WHITESPACE","\n        ",259],["T_VARIABLE","$escapeChar",260],["T_WHITESPACE"," ",260],"=",["T_WHITESPACE"," ",260],["T_VARIABLE","$this",260],["T_OBJECT_OPERATOR","->",260],["T_STRING","getVar",260],"(",["T_CONSTANT_ENCAPSED_STRING","'escape'",260],",",["T_WHITESPACE"," ",260],["T_CONSTANT_ENCAPSED_STRING","'\\\\'",260],")",";",["T_WHITESPACE","\n\n        ",260],["T_IF","if",262],["T_WHITESPACE"," ",262],"(",["T_VARIABLE","$delimiter",262],["T_WHITESPACE"," ",262],["T_IS_EQUAL","==",262],["T_WHITESPACE"," ",262],["T_CONSTANT_ENCAPSED_STRING","'\\t'",262],")",["T_WHITESPACE"," ",262],"{",["T_WHITESPACE","\n            ",262],["T_VARIABLE","$delimiter",263],["T_WHITESPACE"," ",263],"=",["T_WHITESPACE"," ",263],["T_CONSTANT_ENCAPSED_STRING","\"\\t\"",263],";",["T_WHITESPACE","\n        ",263],"}",["T_WHITESPACE","\n\n        ",264],["T_VARIABLE","$str",266],["T_WHITESPACE"," ",266],"=",["T_WHITESPACE"," ",266],["T_CONSTANT_ENCAPSED_STRING","''",266],";",["T_WHITESPACE","\n        ",266],["T_FOREACH","foreach",267],["T_WHITESPACE"," ",267],"(",["T_VARIABLE","$fields",267],["T_WHITESPACE"," ",267],["T_AS","as",267],["T_WHITESPACE"," ",267],["T_VARIABLE","$value",267],")",["T_WHITESPACE"," ",267],"{",["T_WHITESPACE","\n\n            ",267],["T_VARIABLE","$escapedValue",269],["T_WHITESPACE"," ",269],"=",["T_WHITESPACE"," ",269],["T_STRING","Mage",269],["T_DOUBLE_COLON","::",269],["T_STRING","helper",269],"(",["T_CONSTANT_ENCAPSED_STRING","\"core\"",269],")",["T_OBJECT_OPERATOR","->",269],["T_STRING","getEscapedCSVData",269],"(",["T_ARRAY","array",269],"(",["T_VARIABLE","$value",269],")",")",";",["T_WHITESPACE","\n            ",269],["T_VARIABLE","$value",270],["T_WHITESPACE"," ",270],"=",["T_WHITESPACE"," ",270],["T_VARIABLE","$escapedValue",270],"[",["T_LNUMBER","0",270],"]",";",["T_WHITESPACE","\n\n            ",270],["T_IF","if",272],["T_WHITESPACE"," ",272],"(",["T_STRING","strpos",272],"(",["T_VARIABLE","$value",272],",",["T_WHITESPACE"," ",272],["T_VARIABLE","$delimiter",272],")",["T_WHITESPACE"," ",272],["T_IS_NOT_IDENTICAL","!==",272],["T_WHITESPACE"," ",272],["T_STRING","false",272],["T_WHITESPACE"," ",272],["T_BOOLEAN_OR","||",272],["T_WHITESPACE","\n                ",272],["T_EMPTY","empty",273],"(",["T_VARIABLE","$enclosure",273],")",["T_WHITESPACE"," ",273],["T_BOOLEAN_OR","||",273],["T_WHITESPACE","\n                ",273],["T_STRING","strpos",274],"(",["T_VARIABLE","$value",274],",",["T_WHITESPACE"," ",274],["T_VARIABLE","$enclosure",274],")",["T_WHITESPACE"," ",274],["T_IS_NOT_IDENTICAL","!==",274],["T_WHITESPACE"," ",274],["T_STRING","false",274],["T_WHITESPACE"," ",274],["T_BOOLEAN_OR","||",274],["T_WHITESPACE","\n                ",274],["T_STRING","strpos",275],"(",["T_VARIABLE","$value",275],",",["T_WHITESPACE"," ",275],["T_CONSTANT_ENCAPSED_STRING","\"\\n\"",275],")",["T_WHITESPACE"," ",275],["T_IS_NOT_IDENTICAL","!==",275],["T_WHITESPACE"," ",275],["T_STRING","false",275],["T_WHITESPACE"," ",275],["T_BOOLEAN_OR","||",275],["T_WHITESPACE","\n                ",275],["T_STRING","strpos",276],"(",["T_VARIABLE","$value",276],",",["T_WHITESPACE"," ",276],["T_CONSTANT_ENCAPSED_STRING","\"\\r\"",276],")",["T_WHITESPACE"," ",276],["T_IS_NOT_IDENTICAL","!==",276],["T_WHITESPACE"," ",276],["T_STRING","false",276],["T_WHITESPACE"," ",276],["T_BOOLEAN_OR","||",276],["T_WHITESPACE","\n                ",276],["T_STRING","strpos",277],"(",["T_VARIABLE","$value",277],",",["T_WHITESPACE"," ",277],["T_CONSTANT_ENCAPSED_STRING","\"\\t\"",277],")",["T_WHITESPACE"," ",277],["T_IS_NOT_IDENTICAL","!==",277],["T_WHITESPACE"," ",277],["T_STRING","false",277],["T_WHITESPACE"," ",277],["T_BOOLEAN_OR","||",277],["T_WHITESPACE","\n                ",277],["T_STRING","strpos",278],"(",["T_VARIABLE","$value",278],",",["T_WHITESPACE"," ",278],["T_CONSTANT_ENCAPSED_STRING","' '",278],")",["T_WHITESPACE"," ",278],["T_IS_NOT_IDENTICAL","!==",278],["T_WHITESPACE"," ",278],["T_STRING","false",278],")",["T_WHITESPACE"," ",278],"{",["T_WHITESPACE","\n                ",278],["T_VARIABLE","$str2",279],["T_WHITESPACE"," ",279],"=",["T_WHITESPACE"," ",279],["T_VARIABLE","$enclosure",279],";",["T_WHITESPACE","\n                ",279],["T_VARIABLE","$escaped",280],["T_WHITESPACE"," ",280],"=",["T_WHITESPACE"," ",280],["T_LNUMBER","0",280],";",["T_WHITESPACE","\n                ",280],["T_VARIABLE","$len",281],["T_WHITESPACE"," ",281],"=",["T_WHITESPACE"," ",281],["T_STRING","strlen",281],"(",["T_VARIABLE","$value",281],")",";",["T_WHITESPACE","\n                ",281],["T_FOR","for",282],["T_WHITESPACE"," ",282],"(",["T_VARIABLE","$i",282],"=",["T_LNUMBER","0",282],";",["T_VARIABLE","$i",282],"<",["T_VARIABLE","$len",282],";",["T_VARIABLE","$i",282],["T_INC","++",282],")",["T_WHITESPACE"," ",282],"{",["T_WHITESPACE","\n                    ",282],["T_IF","if",283],["T_WHITESPACE"," ",283],"(",["T_VARIABLE","$value",283],"[",["T_VARIABLE","$i",283],"]",["T_WHITESPACE"," ",283],["T_IS_EQUAL","==",283],["T_WHITESPACE"," ",283],["T_VARIABLE","$escapeChar",283],")",["T_WHITESPACE"," ",283],"{",["T_WHITESPACE","\n                        ",283],["T_VARIABLE","$escaped",284],["T_WHITESPACE"," ",284],"=",["T_WHITESPACE"," ",284],["T_LNUMBER","1",284],";",["T_WHITESPACE","\n                    ",284],"}",["T_WHITESPACE"," ",285],["T_ELSE","else",285],["T_WHITESPACE"," ",285],["T_IF","if",285],["T_WHITESPACE"," ",285],"(","!",["T_VARIABLE","$escaped",285],["T_WHITESPACE"," ",285],["T_BOOLEAN_AND","&&",285],["T_WHITESPACE"," ",285],["T_VARIABLE","$value",285],"[",["T_VARIABLE","$i",285],"]",["T_WHITESPACE"," ",285],["T_IS_EQUAL","==",285],["T_WHITESPACE"," ",285],["T_VARIABLE","$enclosure",285],")",["T_WHITESPACE"," ",285],"{",["T_WHITESPACE","\n                        ",285],["T_VARIABLE","$str2",286],["T_WHITESPACE"," ",286],["T_CONCAT_EQUAL",".=",286],["T_WHITESPACE"," ",286],["T_VARIABLE","$enclosure",286],";",["T_WHITESPACE","\n                    ",286],"}",["T_WHITESPACE"," ",287],["T_ELSE","else",287],["T_WHITESPACE"," ",287],"{",["T_WHITESPACE","\n                        ",287],["T_VARIABLE","$escaped",288],["T_WHITESPACE"," ",288],"=",["T_WHITESPACE"," ",288],["T_LNUMBER","0",288],";",["T_WHITESPACE","\n                    ",288],"}",["T_WHITESPACE","\n                        ",289],["T_VARIABLE","$str2",290],["T_WHITESPACE"," ",290],["T_CONCAT_EQUAL",".=",290],["T_WHITESPACE"," ",290],["T_VARIABLE","$value",290],"[",["T_VARIABLE","$i",290],"]",";",["T_WHITESPACE","\n                ",290],"}",["T_WHITESPACE","\n                ",291],["T_VARIABLE","$str2",292],["T_WHITESPACE"," ",292],["T_CONCAT_EQUAL",".=",292],["T_WHITESPACE"," ",292],["T_VARIABLE","$enclosure",292],";",["T_WHITESPACE","\n                ",292],["T_VARIABLE","$str",293],["T_WHITESPACE"," ",293],["T_CONCAT_EQUAL",".=",293],["T_WHITESPACE"," ",293],["T_VARIABLE","$str2",293],".",["T_VARIABLE","$delimiter",293],";",["T_WHITESPACE","\n            ",293],"}",["T_WHITESPACE"," ",294],["T_ELSE","else",294],["T_WHITESPACE"," ",294],"{",["T_WHITESPACE","\n                ",294],["T_VARIABLE","$str",295],["T_WHITESPACE"," ",295],["T_CONCAT_EQUAL",".=",295],["T_WHITESPACE"," ",295],["T_VARIABLE","$enclosure",295],".",["T_VARIABLE","$value",295],".",["T_VARIABLE","$enclosure",295],".",["T_VARIABLE","$delimiter",295],";",["T_WHITESPACE","\n            ",295],"}",["T_WHITESPACE","\n        ",296],"}",["T_WHITESPACE","\n        ",297],["T_RETURN","return",298],["T_WHITESPACE"," ",298],["T_STRING","substr",298],"(",["T_VARIABLE","$str",298],",",["T_WHITESPACE"," ",298],["T_LNUMBER","0",298],",",["T_WHITESPACE"," ",298],"-",["T_LNUMBER","1",298],")",["T_WHITESPACE"," ",298],".",["T_WHITESPACE"," ",298],["T_CONSTANT_ENCAPSED_STRING","\"\\n\"",298],";",["T_WHITESPACE","\n    ",298],"}",["T_WHITESPACE","\n",299],"}",["T_WHITESPACE","\n",300]]
[["T_OPEN_TAG","<?php\n",1],["T_DOC_COMMENT","\/**\n * Magento\n *\n * NOTICE OF LICENSE\n *\n * This source file is subject to the Open Software License (OSL 3.0)\n * that is bundled with this package in the file LICENSE.txt.\n * It is also available through the world-wide-web at this URL:\n * http:\/\/opensource.org\/licenses\/osl-3.0.php\n * If you did not receive a copy of the license and are unable to\n * obtain it through the world-wide-web, please send an email\n * to license@magento.com so we can send you a copy immediately.\n *\n * DISCLAIMER\n *\n * Do not edit or add to this file if you wish to upgrade Magento to newer\n * versions in the future. If you wish to customize Magento for your\n * needs please refer to http:\/\/www.magento.com for more information.\n *\n * @category    Mage\n * @package     Mage_CatalogIndex\n * @copyright  Copyright (c) 2006-2016 X.commerce, Inc. and affiliates (http:\/\/www.magento.com)\n * @license    http:\/\/opensource.org\/licenses\/osl-3.0.php  Open Software License (OSL 3.0)\n *\/",2],["T_WHITESPACE","\n\n\n",25],["T_DOC_COMMENT","\/**\n * Reindexer resource model\n *\n * @category    Mage\n * @package     Mage_CatalogIndex\n * @author      Magento Core Team <core@magentocommerce.com>\n *\/",28],["T_WHITESPACE","\n",34],["T_CLASS","class",35],["T_WHITESPACE"," ",35],["T_STRING","Mage_CatalogIndex_Model_Resource_Indexer",35],["T_WHITESPACE"," ",35],["T_EXTENDS","extends",35],["T_WHITESPACE"," ",35],["T_STRING","Mage_Core_Model_Resource_Db_Abstract",35],["T_WHITESPACE","\n",35],"{",["T_WHITESPACE","\n    ",36],["T_DOC_COMMENT","\/**\n     * Enter description here ...\n     *\n     * @var unknown\n     *\/",37],["T_WHITESPACE","\n    ",41],["T_PROTECTED","protected",42],["T_WHITESPACE"," ",42],["T_VARIABLE","$_insertData",42],["T_WHITESPACE","       ",42],"=",["T_WHITESPACE"," ",42],["T_ARRAY","array",42],"(",")",";",["T_WHITESPACE","\n\n    ",42],["T_DOC_COMMENT","\/**\n     * Enter description here ...\n     *\n     * @var unknown\n     *\/",44],["T_WHITESPACE","\n    ",48],["T_PROTECTED","protected",49],["T_WHITESPACE"," ",49],["T_VARIABLE","$_tableFields",49],["T_WHITESPACE","      ",49],"=",["T_WHITESPACE"," ",49],["T_ARRAY","array",49],"(",")",";",["T_WHITESPACE","\n\n    ",49],["T_DOC_COMMENT","\/**\n     * Enter description here ...\n     *\n     * @var unknown\n     *\/",51],["T_WHITESPACE","\n    ",55],["T_PROTECTED","protected",56],["T_WHITESPACE"," ",56],["T_VARIABLE","$_attributeCache",56],["T_WHITESPACE","   ",56],"=",["T_WHITESPACE"," ",56],["T_ARRAY","array",56],"(",")",";",["T_WHITESPACE","\n\n    ",56],["T_DOC_COMMENT","\/**\n     * Enter description here ...\n     *\n     *\/",58],["T_WHITESPACE","\n    ",61],["T_PROTECTED","protected",62],["T_WHITESPACE"," ",62],["T_FUNCTION","function",62],["T_WHITESPACE"," ",62],["T_STRING","_construct",62],"(",")",["T_WHITESPACE","\n    ",62],"{",["T_WHITESPACE","\n        ",63],["T_VARIABLE","$this",64],["T_OBJECT_OPERATOR","->",64],["T_STRING","_init",64],"(",["T_CONSTANT_ENCAPSED_STRING","'catalog\/product'",64],",",["T_WHITESPACE"," ",64],["T_CONSTANT_ENCAPSED_STRING","'entity_id'",64],")",";",["T_WHITESPACE","\n    ",64],"}",["T_WHITESPACE","\n\n    ",65],["T_DOC_COMMENT","\/**\n     * Enter description here ...\n     *\n     * @param unknown_type $id\n     * @return unknown\n     *\/",67],["T_WHITESPACE","\n    ",72],["T_PROTECTED","protected",73],["T_WHITESPACE"," ",73],["T_FUNCTION","function",73],["T_WHITESPACE"," ",73],["T_STRING","_loadAttribute",73],"(",["T_VARIABLE","$id",73],")",["T_WHITESPACE","\n    ",73],"{",["T_WHITESPACE","\n        ",74],["T_IF","if",75],["T_WHITESPACE"," ",75],"(","!",["T_ISSET","isset",75],"(",["T_VARIABLE","$this",75],["T_OBJECT_OPERATOR","->",75],["T_STRING","_attributeCache",75],"[",["T_VARIABLE","$id",75],"]",")",")",["T_WHITESPACE"," ",75],"{",["T_WHITESPACE","\n            ",75],["T_VARIABLE","$this",76],["T_OBJECT_OPERATOR","->",76],["T_STRING","_attributeCache",76],"[",["T_VARIABLE","$id",76],"]",["T_WHITESPACE"," ",76],"=",["T_WHITESPACE"," ",76],["T_STRING","Mage",76],["T_DOUBLE_COLON","::",76],["T_STRING","getModel",76],"(",["T_CONSTANT_ENCAPSED_STRING","'eav\/entity_attribute'",76],")",["T_OBJECT_OPERATOR","->",76],["T_STRING","load",76],"(",["T_VARIABLE","$id",76],")",";",["T_WHITESPACE","\n        ",76],"}",["T_WHITESPACE","\n\n        ",77],["T_RETURN","return",79],["T_WHITESPACE"," ",79],["T_VARIABLE","$this",79],["T_OBJECT_OPERATOR","->",79],["T_STRING","_attributeCache",79],"[",["T_VARIABLE","$id",79],"]",";",["T_WHITESPACE","\n    ",79],"}",["T_WHITESPACE","\n\n    ",80],["T_DOC_COMMENT","\/**\n     * Delete index data by specific conditions\n     *\n     * @param bool $eav clear eav index data flag\n     * @param bool $price clear price index data flag\n     * @param bool $minimal clear minimal price index data flag\n     * @param bool $finalPrice clear final price index data flag\n     * @param bool $tierPrice clear tier price index data flag\n     * @param mixed $products applicable products\n     * @param mixed $store applicable stores\n     *\/",82],["T_WHITESPACE","\n    ",92],["T_PUBLIC","public",93],["T_WHITESPACE"," ",93],["T_FUNCTION","function",93],["T_WHITESPACE"," ",93],["T_STRING","clear",93],"(",["T_VARIABLE","$eav",93],["T_WHITESPACE"," ",93],"=",["T_WHITESPACE"," ",93],["T_STRING","true",93],",",["T_WHITESPACE"," ",93],["T_VARIABLE","$price",93],["T_WHITESPACE"," ",93],"=",["T_WHITESPACE"," ",93],["T_STRING","true",93],",",["T_WHITESPACE"," ",93],["T_VARIABLE","$minimal",93],["T_WHITESPACE"," ",93],"=",["T_WHITESPACE"," ",93],["T_STRING","true",93],",",["T_WHITESPACE"," ",93],["T_VARIABLE","$finalPrice",93],["T_WHITESPACE"," ",93],"=",["T_WHITESPACE"," ",93],["T_STRING","true",93],",",["T_WHITESPACE"," ",93],["T_VARIABLE","$tierPrice",93],["T_WHITESPACE"," ",93],"=",["T_WHITESPACE"," ",93],["T_STRING","true",93],",",["T_WHITESPACE","\n        ",93],["T_VARIABLE","$products",94],["T_WHITESPACE"," ",94],"=",["T_WHITESPACE"," ",94],["T_STRING","null",94],",",["T_WHITESPACE"," ",94],["T_VARIABLE","$store",94],["T_WHITESPACE"," ",94],"=",["T_WHITESPACE"," ",94],["T_STRING","null",94],")",["T_WHITESPACE","\n    ",94],"{",["T_WHITESPACE","\n        ",95],["T_VARIABLE","$suffix",96],["T_WHITESPACE"," ",96],"=",["T_WHITESPACE"," ",96],["T_CONSTANT_ENCAPSED_STRING","''",96],";",["T_WHITESPACE","\n        ",96],["T_VARIABLE","$priceSuffix",97],["T_WHITESPACE"," ",97],"=",["T_WHITESPACE"," ",97],["T_CONSTANT_ENCAPSED_STRING","''",97],";",["T_WHITESPACE","\n        ",97],["T_VARIABLE","$tables",98],["T_WHITESPACE"," ",98],"=",["T_WHITESPACE"," ",98],["T_ARRAY","array",98],"(",["T_CONSTANT_ENCAPSED_STRING","'eav'",98],["T_DOUBLE_ARROW","=>",98],["T_CONSTANT_ENCAPSED_STRING","'catalogindex\/eav'",98],",",["T_WHITESPACE"," ",98],["T_CONSTANT_ENCAPSED_STRING","'price'",98],["T_DOUBLE_ARROW","=>",98],["T_CONSTANT_ENCAPSED_STRING","'catalogindex\/price'",98],")",";",["T_WHITESPACE","\n        ",98],["T_IF","if",99],["T_WHITESPACE"," ",99],"(","!",["T_STRING","is_null",99],"(",["T_VARIABLE","$products",99],")",")",["T_WHITESPACE"," ",99],"{",["T_WHITESPACE","\n            ",99],["T_IF","if",100],["T_WHITESPACE"," ",100],"(",["T_VARIABLE","$products",100],["T_WHITESPACE"," ",100],["T_INSTANCEOF","instanceof",100],["T_WHITESPACE"," ",100],["T_STRING","Mage_Catalog_Model_Product",100],")",["T_WHITESPACE"," ",100],"{",["T_WHITESPACE","\n                ",100],["T_VARIABLE","$products",101],["T_WHITESPACE"," ",101],"=",["T_WHITESPACE"," ",101],["T_VARIABLE","$products",101],["T_OBJECT_OPERATOR","->",101],["T_STRING","getId",101],"(",")",";",["T_WHITESPACE","\n            ",101],"}",["T_WHITESPACE"," ",102],["T_ELSEIF","elseif",102],["T_WHITESPACE"," ",102],"(",["T_VARIABLE","$products",102],["T_WHITESPACE"," ",102],["T_INSTANCEOF","instanceof",102],["T_WHITESPACE"," ",102],["T_STRING","Mage_Catalog_Model_Product_Condition_Interface",102],")",["T_WHITESPACE"," ",102],"{",["T_WHITESPACE","\n                ",102],["T_VARIABLE","$suffix",103],["T_WHITESPACE"," ",103],"=",["T_WHITESPACE"," ",103],["T_CONSTANT_ENCAPSED_STRING","'entity_id IN ('",103],".",["T_VARIABLE","$products",103],["T_OBJECT_OPERATOR","->",103],["T_STRING","getIdsSelect",103],"(",["T_VARIABLE","$this",103],["T_OBJECT_OPERATOR","->",103],["T_STRING","_getWriteAdapter",103],"(",")",")",["T_OBJECT_OPERATOR","->",103],["T_STRING","__toString",103],"(",")",".",["T_CONSTANT_ENCAPSED_STRING","')'",103],";",["T_WHITESPACE","\n            ",103],"}",["T_WHITESPACE","\n            ",104],["T_ELSE","else",105],["T_WHITESPACE"," ",105],["T_IF","if",105],["T_WHITESPACE"," ",105],"(","!",["T_STRING","is_numeric",105],"(",["T_VARIABLE","$products",105],")",["T_WHITESPACE"," ",105],["T_BOOLEAN_AND","&&",105],["T_WHITESPACE"," ",105],"!",["T_STRING","is_array",105],"(",["T_VARIABLE","$products",105],")",")",["T_WHITESPACE"," ",105],"{",["T_WHITESPACE","\n                ",105],["T_STRING","Mage",106],["T_DOUBLE_COLON","::",106],["T_STRING","throwException",106],"(",["T_CONSTANT_ENCAPSED_STRING","'Invalid products supplied for indexing'",106],")",";",["T_WHITESPACE","\n            ",106],"}",["T_WHITESPACE","\n            ",107],["T_IF","if",108],["T_WHITESPACE"," ",108],"(",["T_EMPTY","empty",108],"(",["T_VARIABLE","$suffix",108],")",")",["T_WHITESPACE"," ",108],"{",["T_WHITESPACE","\n                ",108],["T_VARIABLE","$suffix",109],["T_WHITESPACE"," ",109],"=",["T_WHITESPACE"," ",109],["T_VARIABLE","$this",109],["T_OBJECT_OPERATOR","->",109],["T_STRING","_getWriteAdapter",109],"(",")",["T_OBJECT_OPERATOR","->",109],["T_STRING","quoteInto",109],"(",["T_CONSTANT_ENCAPSED_STRING","'entity_id in (?)'",109],",",["T_WHITESPACE"," ",109],["T_VARIABLE","$products",109],")",";",["T_WHITESPACE","\n            ",109],"}",["T_WHITESPACE","\n        ",110],"}",["T_WHITESPACE","\n        ",111],["T_IF","if",112],["T_WHITESPACE"," ",112],"(","!",["T_STRING","is_null",112],"(",["T_VARIABLE","$store",112],")",")",["T_WHITESPACE"," ",112],"{",["T_WHITESPACE","\n            ",112],["T_VARIABLE","$websiteIds",113],["T_WHITESPACE"," ",113],"=",["T_WHITESPACE"," ",113],["T_ARRAY","array",113],"(",")",";",["T_WHITESPACE","\n\n            ",113],["T_IF","if",115],["T_WHITESPACE"," ",115],"(",["T_VARIABLE","$store",115],["T_WHITESPACE"," ",115],["T_INSTANCEOF","instanceof",115],["T_WHITESPACE"," ",115],["T_STRING","Mage_Core_Model_Store",115],")",["T_WHITESPACE"," ",115],"{",["T_WHITESPACE","\n                ",115],["T_VARIABLE","$store",116],["T_WHITESPACE"," ",116],"=",["T_WHITESPACE"," ",116],["T_VARIABLE","$store",116],["T_OBJECT_OPERATOR","->",116],["T_STRING","getId",116],"(",")",";",["T_WHITESPACE","\n                ",116],["T_VARIABLE","$websiteIds",117],"[","]",["T_WHITESPACE"," ",117],"=",["T_WHITESPACE"," ",117],["T_STRING","Mage",117],["T_DOUBLE_COLON","::",117],["T_STRING","app",117],"(",")",["T_OBJECT_OPERATOR","->",117],["T_STRING","getStore",117],"(",["T_VARIABLE","$store",117],")",["T_OBJECT_OPERATOR","->",117],["T_STRING","getWebsiteId",117],"(",")",";",["T_WHITESPACE","\n            ",117],"}",["T_WHITESPACE"," ",118],["T_ELSE","else",118],["T_WHITESPACE"," ",118],["T_IF","if",118],["T_WHITESPACE"," ",118],"(",["T_VARIABLE","$store",118],["T_WHITESPACE"," ",118],["T_INSTANCEOF","instanceof",118],["T_WHITESPACE"," ",118],["T_STRING","Mage_Core_Model_Resource_Store_Collection",118],")",["T_WHITESPACE"," ",118],"{",["T_WHITESPACE","\n                ",118],["T_VARIABLE","$store",119],["T_WHITESPACE"," ",119],"=",["T_WHITESPACE"," ",119],["T_VARIABLE","$store",119],["T_OBJECT_OPERATOR","->",119],["T_STRING","getAllIds",119],"(",")",";",["T_WHITESPACE","\n                ",119],["T_FOREACH","foreach",120],["T_WHITESPACE"," ",120],"(",["T_VARIABLE","$store",120],["T_WHITESPACE"," ",120],["T_AS","as",120],["T_WHITESPACE"," ",120],["T_VARIABLE","$one",120],")",["T_WHITESPACE"," ",120],"{",["T_WHITESPACE","\n                    ",120],["T_VARIABLE","$websiteIds",121],"[","]",["T_WHITESPACE"," ",121],"=",["T_WHITESPACE"," ",121],["T_STRING","Mage",121],["T_DOUBLE_COLON","::",121],["T_STRING","app",121],"(",")",["T_OBJECT_OPERATOR","->",121],["T_STRING","getStore",121],"(",["T_VARIABLE","$one",121],")",["T_OBJECT_OPERATOR","->",121],["T_STRING","getWebsiteId",121],"(",")",";",["T_WHITESPACE","\n                ",121],"}",["T_WHITESPACE","\n            ",122],"}",["T_WHITESPACE"," ",123],["T_ELSE","else",123],["T_WHITESPACE"," ",123],["T_IF","if",123],["T_WHITESPACE"," ",123],"(",["T_STRING","is_array",123],"(",["T_VARIABLE","$store",123],")",")",["T_WHITESPACE"," ",123],"{",["T_WHITESPACE","\n                ",123],["T_VARIABLE","$resultStores",124],["T_WHITESPACE"," ",124],"=",["T_WHITESPACE"," ",124],["T_ARRAY","array",124],"(",")",";",["T_WHITESPACE","\n                ",124],["T_FOREACH","foreach",125],["T_WHITESPACE"," ",125],"(",["T_VARIABLE","$store",125],["T_WHITESPACE"," ",125],["T_AS","as",125],["T_WHITESPACE"," ",125],["T_VARIABLE","$s",125],")",["T_WHITESPACE"," ",125],"{",["T_WHITESPACE","\n                    ",125],["T_IF","if",126],["T_WHITESPACE"," ",126],"(",["T_VARIABLE","$s",126],["T_WHITESPACE"," ",126],["T_INSTANCEOF","instanceof",126],["T_WHITESPACE"," ",126],["T_STRING","Mage_Core_Model_Store",126],")",["T_WHITESPACE"," ",126],"{",["T_WHITESPACE","\n                        ",126],["T_VARIABLE","$resultStores",127],"[","]",["T_WHITESPACE"," ",127],"=",["T_WHITESPACE"," ",127],["T_VARIABLE","$s",127],["T_OBJECT_OPERATOR","->",127],["T_STRING","getId",127],"(",")",";",["T_WHITESPACE","\n                        ",127],["T_VARIABLE","$websiteIds",128],"[","]",["T_WHITESPACE"," ",128],"=",["T_WHITESPACE"," ",128],["T_VARIABLE","$s",128],["T_OBJECT_OPERATOR","->",128],["T_STRING","getWebsiteId",128],"(",")",";",["T_WHITESPACE","\n                    ",128],"}",["T_WHITESPACE"," ",129],["T_ELSEIF","elseif",129],["T_WHITESPACE"," ",129],"(",["T_STRING","is_numeric",129],"(",["T_VARIABLE","$s",129],")",")",["T_WHITESPACE"," ",129],"{",["T_WHITESPACE","\n                        ",129],["T_VARIABLE","$websiteIds",130],"[","]",["T_WHITESPACE"," ",130],"=",["T_WHITESPACE"," ",130],["T_STRING","Mage",130],["T_DOUBLE_COLON","::",130],["T_STRING","app",130],"(",")",["T_OBJECT_OPERATOR","->",130],["T_STRING","getStore",130],"(",["T_VARIABLE","$s",130],")",["T_OBJECT_OPERATOR","->",130],["T_STRING","getWebsiteId",130],"(",")",";",["T_WHITESPACE","\n                        ",130],["T_VARIABLE","$resultStores",131],"[","]",["T_WHITESPACE"," ",131],"=",["T_WHITESPACE"," ",131],["T_VARIABLE","$s",131],";",["T_WHITESPACE","\n                    ",131],"}",["T_WHITESPACE","\n                ",132],"}",["T_WHITESPACE","\n                ",133],["T_VARIABLE","$store",134],["T_WHITESPACE"," ",134],"=",["T_WHITESPACE"," ",134],["T_VARIABLE","$resultStores",134],";",["T_WHITESPACE","\n            ",134],"}",["T_WHITESPACE","\n\n            ",135],["T_IF","if",137],["T_WHITESPACE"," ",137],"(",["T_VARIABLE","$suffix",137],")",["T_WHITESPACE"," ",137],"{",["T_WHITESPACE","\n                ",137],["T_VARIABLE","$suffix",138],["T_WHITESPACE"," ",138],["T_CONCAT_EQUAL",".=",138],["T_WHITESPACE"," ",138],["T_CONSTANT_ENCAPSED_STRING","' AND '",138],";",["T_WHITESPACE","\n            ",138],"}",["T_WHITESPACE","\n\n            ",139],["T_VARIABLE","$priceSuffix",141],["T_WHITESPACE"," ",141],"=",["T_WHITESPACE"," ",141],["T_VARIABLE","$suffix",141],["T_WHITESPACE"," ",141],".",["T_WHITESPACE"," ",141],["T_VARIABLE","$this",141],["T_OBJECT_OPERATOR","->",141],["T_STRING","_getWriteAdapter",141],"(",")",["T_OBJECT_OPERATOR","->",141],["T_STRING","quoteInto",141],"(",["T_CONSTANT_ENCAPSED_STRING","'website_id in (?)'",141],",",["T_WHITESPACE"," ",141],["T_VARIABLE","$websiteIds",141],")",";",["T_WHITESPACE","\n            ",141],["T_VARIABLE","$suffix",142],["T_WHITESPACE"," ",142],["T_CONCAT_EQUAL",".=",142],["T_WHITESPACE"," ",142],["T_VARIABLE","$this",142],["T_OBJECT_OPERATOR","->",142],["T_STRING","_getWriteAdapter",142],"(",")",["T_OBJECT_OPERATOR","->",142],["T_STRING","quoteInto",142],"(",["T_CONSTANT_ENCAPSED_STRING","'store_id in (?)'",142],",",["T_WHITESPACE"," ",142],["T_VARIABLE","$store",142],")",";",["T_WHITESPACE","\n\n        ",142],"}",["T_WHITESPACE","\n\n        ",144],["T_IF","if",146],["T_WHITESPACE"," ",146],"(",["T_VARIABLE","$tierPrice",146],")",["T_WHITESPACE"," ",146],"{",["T_WHITESPACE","\n            ",146],["T_VARIABLE","$tables",147],"[",["T_CONSTANT_ENCAPSED_STRING","'tierPrice'",147],"]",["T_WHITESPACE"," ",147],"=",["T_WHITESPACE"," ",147],["T_CONSTANT_ENCAPSED_STRING","'catalogindex\/price'",147],";",["T_WHITESPACE","\n            ",147],["T_VARIABLE","$tierPrice",148],["T_WHITESPACE"," ",148],"=",["T_WHITESPACE"," ",148],["T_ARRAY","array",148],"(",["T_STRING","Mage",148],["T_DOUBLE_COLON","::",148],["T_STRING","getSingleton",148],"(",["T_CONSTANT_ENCAPSED_STRING","'eav\/entity_attribute'",148],")",["T_OBJECT_OPERATOR","->",148],["T_STRING","getIdByCode",148],"(",["T_STRING","Mage_Catalog_Model_Product",148],["T_DOUBLE_COLON","::",148],["T_STRING","ENTITY",148],",",["T_WHITESPACE"," ",148],["T_CONSTANT_ENCAPSED_STRING","'tier_price'",148],")",")",";",["T_WHITESPACE","\n        ",148],"}",["T_WHITESPACE","\n        ",149],["T_IF","if",150],["T_WHITESPACE"," ",150],"(",["T_VARIABLE","$finalPrice",150],")",["T_WHITESPACE"," ",150],"{",["T_WHITESPACE","\n            ",150],["T_VARIABLE","$tables",151],"[",["T_CONSTANT_ENCAPSED_STRING","'finalPrice'",151],"]",["T_WHITESPACE"," ",151],"=",["T_WHITESPACE"," ",151],["T_CONSTANT_ENCAPSED_STRING","'catalogindex\/price'",151],";",["T_WHITESPACE","\n            ",151],["T_VARIABLE","$tierPrice",152],["T_WHITESPACE"," ",152],"=",["T_WHITESPACE"," ",152],["T_ARRAY","array",152],"(",["T_STRING","Mage",152],["T_DOUBLE_COLON","::",152],["T_STRING","getSingleton",152],"(",["T_CONSTANT_ENCAPSED_STRING","'eav\/entity_attribute'",152],")",["T_OBJECT_OPERATOR","->",152],["T_STRING","getIdByCode",152],"(",["T_STRING","Mage_Catalog_Model_Product",152],["T_DOUBLE_COLON","::",152],["T_STRING","ENTITY",152],",",["T_WHITESPACE"," ",152],["T_CONSTANT_ENCAPSED_STRING","'price'",152],")",")",";",["T_WHITESPACE","\n        ",152],"}",["T_WHITESPACE","\n        ",153],["T_IF","if",154],["T_WHITESPACE"," ",154],"(",["T_VARIABLE","$minimal",154],")",["T_WHITESPACE"," ",154],"{",["T_WHITESPACE","\n            ",154],["T_VARIABLE","$tables",155],"[",["T_CONSTANT_ENCAPSED_STRING","'minimal'",155],"]",["T_WHITESPACE"," ",155],"=",["T_WHITESPACE"," ",155],["T_CONSTANT_ENCAPSED_STRING","'catalogindex\/minimal_price'",155],";",["T_WHITESPACE","\n        ",155],"}",["T_WHITESPACE","\n\n\n        ",156],["T_FOREACH","foreach",159],["T_WHITESPACE"," ",159],"(",["T_VARIABLE","$tables",159],["T_WHITESPACE"," ",159],["T_AS","as",159],["T_WHITESPACE"," ",159],["T_VARIABLE","$variable",159],["T_DOUBLE_ARROW","=>",159],["T_VARIABLE","$table",159],")",["T_WHITESPACE"," ",159],"{",["T_WHITESPACE","\n            ",159],["T_VARIABLE","$variable",160],["T_WHITESPACE"," ",160],"=",["T_WHITESPACE"," ",160],"$",["T_VARIABLE","$variable",160],";",["T_WHITESPACE","\n            ",160],["T_VARIABLE","$suffixToInsert",161],["T_WHITESPACE"," ",161],"=",["T_WHITESPACE"," ",161],["T_VARIABLE","$suffix",161],";",["T_WHITESPACE","\n            ",161],["T_IF","if",162],["T_WHITESPACE"," ",162],"(",["T_STRING","in_array",162],"(",["T_VARIABLE","$table",162],",",["T_WHITESPACE"," ",162],["T_VARIABLE","$this",162],["T_OBJECT_OPERATOR","->",162],["T_STRING","_getPriceTables",162],"(",")",")",")",["T_WHITESPACE"," ",162],"{",["T_WHITESPACE","\n                ",162],["T_VARIABLE","$suffixToInsert",163],["T_WHITESPACE"," ",163],"=",["T_WHITESPACE"," ",163],["T_VARIABLE","$priceSuffix",163],";",["T_WHITESPACE","\n            ",163],"}",["T_WHITESPACE","\n\n            ",164],["T_IF","if",166],["T_WHITESPACE"," ",166],"(",["T_VARIABLE","$variable",166],["T_WHITESPACE"," ",166],["T_IS_IDENTICAL","===",166],["T_WHITESPACE"," ",166],["T_STRING","true",166],")",["T_WHITESPACE"," ",166],"{",["T_WHITESPACE","\n                ",166],["T_VARIABLE","$query",167],["T_WHITESPACE"," ",167],"=",["T_WHITESPACE"," ",167],"\"",["T_ENCAPSED_AND_WHITESPACE","DELETE FROM ",167],["T_CURLY_OPEN","{",167],["T_VARIABLE","$this",167],["T_OBJECT_OPERATOR","->",167],["T_STRING","getTable",167],"(",["T_VARIABLE","$table",167],")","}",["T_ENCAPSED_AND_WHITESPACE"," ",167],"\"",";",["T_WHITESPACE","\n                ",167],["T_IF","if",168],["T_WHITESPACE"," ",168],"(",["T_VARIABLE","$suffixToInsert",168],")",["T_WHITESPACE"," ",168],"{",["T_WHITESPACE","\n                    ",168],["T_VARIABLE","$query",169],["T_WHITESPACE"," ",169],["T_CONCAT_EQUAL",".=",169],["T_WHITESPACE"," ",169],"\"",["T_ENCAPSED_AND_WHITESPACE","WHERE ",169],["T_CURLY_OPEN","{",169],["T_VARIABLE","$suffixToInsert",169],"}","\"",";",["T_WHITESPACE","\n                ",169],"}",["T_WHITESPACE","\n\n                ",170],["T_VARIABLE","$this",172],["T_OBJECT_OPERATOR","->",172],["T_STRING","_getWriteAdapter",172],"(",")",["T_OBJECT_OPERATOR","->",172],["T_STRING","query",172],"(",["T_VARIABLE","$query",172],")",";",["T_WHITESPACE","\n            ",172],"}",["T_WHITESPACE"," ",173],["T_ELSE","else",173],["T_WHITESPACE"," ",173],["T_IF","if",173],["T_WHITESPACE"," ",173],"(",["T_STRING","is_array",173],"(",["T_VARIABLE","$variable",173],")",["T_WHITESPACE"," ",173],["T_BOOLEAN_AND","&&",173],["T_WHITESPACE"," ",173],["T_STRING","count",173],"(",["T_VARIABLE","$variable",173],")",")",["T_WHITESPACE"," ",173],"{",["T_WHITESPACE","\n                ",173],["T_VARIABLE","$query",174],["T_WHITESPACE","  ",174],"=",["T_WHITESPACE"," ",174],"\"",["T_ENCAPSED_AND_WHITESPACE","DELETE FROM ",174],["T_CURLY_OPEN","{",174],["T_VARIABLE","$this",174],["T_OBJECT_OPERATOR","->",174],["T_STRING","getTable",174],"(",["T_VARIABLE","$table",174],")","}",["T_ENCAPSED_AND_WHITESPACE"," WHERE ",174],"\"",";",["T_WHITESPACE","\n                ",174],["T_VARIABLE","$query",175],["T_WHITESPACE"," ",175],["T_CONCAT_EQUAL",".=",175],["T_WHITESPACE"," ",175],["T_VARIABLE","$this",175],["T_OBJECT_OPERATOR","->",175],["T_STRING","_getWriteAdapter",175],"(",")",["T_OBJECT_OPERATOR","->",175],["T_STRING","quoteInto",175],"(",["T_CONSTANT_ENCAPSED_STRING","\"attribute_id in (?)\"",175],",",["T_WHITESPACE"," ",175],["T_VARIABLE","$variable",175],")",";",["T_WHITESPACE","\n                ",175],["T_IF","if",176],["T_WHITESPACE"," ",176],"(",["T_VARIABLE","$suffixToInsert",176],")",["T_WHITESPACE"," ",176],"{",["T_WHITESPACE","\n                    ",176],["T_VARIABLE","$query",177],["T_WHITESPACE"," ",177],["T_CONCAT_EQUAL",".=",177],["T_WHITESPACE"," ",177],"\"",["T_ENCAPSED_AND_WHITESPACE"," AND ",177],["T_CURLY_OPEN","{",177],["T_VARIABLE","$suffixToInsert",177],"}","\"",";",["T_WHITESPACE","\n                ",177],"}",["T_WHITESPACE","\n\n                ",178],["T_VARIABLE","$this",180],["T_OBJECT_OPERATOR","->",180],["T_STRING","_getWriteAdapter",180],"(",")",["T_OBJECT_OPERATOR","->",180],["T_STRING","query",180],"(",["T_VARIABLE","$query",180],")",";",["T_WHITESPACE","\n            ",180],"}",["T_WHITESPACE","\n        ",181],"}",["T_WHITESPACE","\n    ",182],"}",["T_WHITESPACE","\n\n    ",183],["T_DOC_COMMENT","\/**\n     * Get tables which are used for index related with price\n     *\n     * @return array\n     *\/",185],["T_WHITESPACE","\n    ",189],["T_PROTECTED","protected",190],["T_WHITESPACE"," ",190],["T_FUNCTION","function",190],["T_WHITESPACE"," ",190],["T_STRING","_getPriceTables",190],"(",")",["T_WHITESPACE","\n    ",190],"{",["T_WHITESPACE","\n        ",191],["T_RETURN","return",192],["T_WHITESPACE"," ",192],["T_ARRAY","array",192],"(",["T_CONSTANT_ENCAPSED_STRING","'catalogindex\/price'",192],",",["T_WHITESPACE"," ",192],["T_CONSTANT_ENCAPSED_STRING","'catalogindex\/minimal_price'",192],")",";",["T_WHITESPACE","\n    ",192],"}",["T_WHITESPACE","\n\n    ",193],["T_DOC_COMMENT","\/**\n     * Reindex data for tier prices\n     *\n     * @param array $products array of product ids\n     * @param Mage_Core_Model_Store $store\n     * @param int | null $forcedId identifier of \"parent\" product\n     * @return Mage_CatalogIndex_Model_Resource_Indexer\n     *\/",195],["T_WHITESPACE","\n    ",202],["T_PUBLIC","public",203],["T_WHITESPACE"," ",203],["T_FUNCTION","function",203],["T_WHITESPACE"," ",203],["T_STRING","reindexTiers",203],"(",["T_VARIABLE","$products",203],",",["T_WHITESPACE"," ",203],["T_VARIABLE","$store",203],",",["T_WHITESPACE"," ",203],["T_VARIABLE","$forcedId",203],["T_WHITESPACE"," ",203],"=",["T_WHITESPACE"," ",203],["T_STRING","null",203],")",["T_WHITESPACE","\n    ",203],"{",["T_WHITESPACE","\n        ",204],["T_VARIABLE","$websiteId",205],["T_WHITESPACE"," ",205],"=",["T_WHITESPACE"," ",205],["T_VARIABLE","$store",205],["T_OBJECT_OPERATOR","->",205],["T_STRING","getWebsiteId",205],"(",")",";",["T_WHITESPACE","\n        ",205],["T_VARIABLE","$attribute",206],["T_WHITESPACE"," ",206],"=",["T_WHITESPACE"," ",206],["T_STRING","Mage",206],["T_DOUBLE_COLON","::",206],["T_STRING","getSingleton",206],"(",["T_CONSTANT_ENCAPSED_STRING","'eav\/entity_attribute'",206],")",["T_OBJECT_OPERATOR","->",206],["T_STRING","getIdByCode",206],"(",["T_STRING","Mage_Catalog_Model_Product",206],["T_DOUBLE_COLON","::",206],["T_STRING","ENTITY",206],",",["T_WHITESPACE"," ",206],["T_CONSTANT_ENCAPSED_STRING","'tier_price'",206],")",";",["T_WHITESPACE","\n        ",206],["T_VARIABLE","$this",207],["T_OBJECT_OPERATOR","->",207],["T_STRING","_beginInsert",207],"(",["T_WHITESPACE","\n            ",207],["T_CONSTANT_ENCAPSED_STRING","'catalogindex\/price'",208],",",["T_WHITESPACE","\n            ",208],["T_ARRAY","array",209],"(",["T_CONSTANT_ENCAPSED_STRING","'entity_id'",209],",",["T_WHITESPACE"," ",209],["T_CONSTANT_ENCAPSED_STRING","'attribute_id'",209],",",["T_WHITESPACE"," ",209],["T_CONSTANT_ENCAPSED_STRING","'value'",209],",",["T_WHITESPACE"," ",209],["T_CONSTANT_ENCAPSED_STRING","'website_id'",209],",",["T_WHITESPACE"," ",209],["T_CONSTANT_ENCAPSED_STRING","'customer_group_id'",209],",",["T_WHITESPACE"," ",209],["T_CONSTANT_ENCAPSED_STRING","'qty'",209],")",["T_WHITESPACE","\n        ",209],")",";",["T_WHITESPACE","\n\n        ",210],["T_DOC_COMMENT","\/**\n         * Get information about product types\n         * array (\n         *      $productType => array()\n         * )\n         *\/",212],["T_WHITESPACE","\n        ",217],["T_VARIABLE","$products",218],["T_WHITESPACE"," ",218],"=",["T_WHITESPACE"," ",218],["T_STRING","Mage",218],["T_DOUBLE_COLON","::",218],["T_STRING","getSingleton",218],"(",["T_CONSTANT_ENCAPSED_STRING","'catalogindex\/retreiver'",218],")",["T_OBJECT_OPERATOR","->",218],["T_STRING","assignProductTypes",218],"(",["T_VARIABLE","$products",218],")",";",["T_WHITESPACE","\n        ",218],["T_IF","if",219],["T_WHITESPACE"," ",219],"(",["T_STRING","is_null",219],"(",["T_VARIABLE","$forcedId",219],")",")",["T_WHITESPACE"," ",219],"{",["T_WHITESPACE","\n            ",219],["T_FOREACH","foreach",220],["T_WHITESPACE"," ",220],"(",["T_VARIABLE","$products",220],["T_WHITESPACE"," ",220],["T_AS","as",220],["T_WHITESPACE"," ",220],["T_VARIABLE","$type",220],["T_DOUBLE_ARROW","=>",220],["T_VARIABLE","$typeIds",220],")",["T_WHITESPACE"," ",220],"{",["T_WHITESPACE","\n                ",220],["T_VARIABLE","$retreiver",221],["T_WHITESPACE"," ",221],"=",["T_WHITESPACE"," ",221],["T_STRING","Mage",221],["T_DOUBLE_COLON","::",221],["T_STRING","getSingleton",221],"(",["T_CONSTANT_ENCAPSED_STRING","'catalogindex\/retreiver'",221],")",["T_OBJECT_OPERATOR","->",221],["T_STRING","getRetreiver",221],"(",["T_VARIABLE","$type",221],")",";",["T_WHITESPACE","\n                ",221],["T_IF","if",222],["T_WHITESPACE"," ",222],"(",["T_VARIABLE","$retreiver",222],["T_OBJECT_OPERATOR","->",222],["T_STRING","areChildrenIndexable",222],"(",["T_STRING","Mage_CatalogIndex_Model_Retreiver",222],["T_DOUBLE_COLON","::",222],["T_STRING","CHILDREN_FOR_TIERS",222],")",")",["T_WHITESPACE"," ",222],"{",["T_WHITESPACE","\n                    ",222],["T_FOREACH","foreach",223],["T_WHITESPACE"," ",223],"(",["T_VARIABLE","$typeIds",223],["T_WHITESPACE"," ",223],["T_AS","as",223],["T_WHITESPACE"," ",223],["T_VARIABLE","$id",223],")",["T_WHITESPACE"," ",223],"{",["T_WHITESPACE","\n                        ",223],["T_VARIABLE","$children",224],["T_WHITESPACE"," ",224],"=",["T_WHITESPACE"," ",224],["T_VARIABLE","$retreiver",224],["T_OBJECT_OPERATOR","->",224],["T_STRING","getChildProductIds",224],"(",["T_VARIABLE","$store",224],",",["T_WHITESPACE"," ",224],["T_VARIABLE","$id",224],")",";",["T_WHITESPACE","\n                        ",224],["T_IF","if",225],["T_WHITESPACE"," ",225],"(",["T_VARIABLE","$children",225],")",["T_WHITESPACE"," ",225],"{",["T_WHITESPACE","\n                            ",225],["T_VARIABLE","$this",226],["T_OBJECT_OPERATOR","->",226],["T_STRING","reindexTiers",226],"(",["T_VARIABLE","$children",226],",",["T_WHITESPACE"," ",226],["T_VARIABLE","$store",226],",",["T_WHITESPACE"," ",226],["T_VARIABLE","$id",226],")",";",["T_WHITESPACE","\n                        ",226],"}",["T_WHITESPACE","\n                    ",227],"}",["T_WHITESPACE","\n                ",228],"}",["T_WHITESPACE","\n            ",229],"}",["T_WHITESPACE","\n        ",230],"}",["T_WHITESPACE","\n\n        ",231],["T_VARIABLE","$attributeIndex",233],["T_WHITESPACE"," ",233],"=",["T_WHITESPACE"," ",233],["T_VARIABLE","$this",233],["T_OBJECT_OPERATOR","->",233],["T_STRING","getTierData",233],"(",["T_VARIABLE","$products",233],",",["T_WHITESPACE"," ",233],["T_VARIABLE","$store",233],")",";",["T_WHITESPACE","\n        ",233],["T_FOREACH","foreach",234],["T_WHITESPACE"," ",234],"(",["T_VARIABLE","$attributeIndex",234],["T_WHITESPACE"," ",234],["T_AS","as",234],["T_WHITESPACE"," ",234],["T_VARIABLE","$index",234],")",["T_WHITESPACE"," ",234],"{",["T_WHITESPACE","\n            ",234],["T_VARIABLE","$type",235],["T_WHITESPACE"," ",235],"=",["T_WHITESPACE"," ",235],["T_VARIABLE","$index",235],"[",["T_CONSTANT_ENCAPSED_STRING","'type_id'",235],"]",";",["T_WHITESPACE","\n            ",235],["T_VARIABLE","$id",236],["T_WHITESPACE"," ",236],"=",["T_WHITESPACE"," ",236],"(",["T_STRING","is_null",236],"(",["T_VARIABLE","$forcedId",236],")",["T_WHITESPACE"," ",236],"?",["T_WHITESPACE"," ",236],["T_VARIABLE","$index",236],"[",["T_CONSTANT_ENCAPSED_STRING","'entity_id'",236],"]",["T_WHITESPACE"," ",236],":",["T_WHITESPACE"," ",236],["T_VARIABLE","$forcedId",236],")",";",["T_WHITESPACE","\n            ",236],["T_IF","if",237],["T_WHITESPACE"," ",237],"(",["T_VARIABLE","$id",237],["T_WHITESPACE"," ",237],["T_BOOLEAN_AND","&&",237],["T_WHITESPACE"," ",237],["T_VARIABLE","$index",237],"[",["T_CONSTANT_ENCAPSED_STRING","'value'",237],"]",")",["T_WHITESPACE"," ",237],"{",["T_WHITESPACE","\n                ",237],["T_IF","if",238],["T_WHITESPACE"," ",238],"(",["T_VARIABLE","$index",238],"[",["T_CONSTANT_ENCAPSED_STRING","'all_groups'",238],"]",["T_WHITESPACE"," ",238],["T_IS_EQUAL","==",238],["T_WHITESPACE"," ",238],["T_LNUMBER","1",238],")",["T_WHITESPACE"," ",238],"{",["T_WHITESPACE","\n                    ",238],["T_FOREACH","foreach",239],["T_WHITESPACE"," ",239],"(",["T_STRING","Mage",239],["T_DOUBLE_COLON","::",239],["T_STRING","getSingleton",239],"(",["T_CONSTANT_ENCAPSED_STRING","'catalogindex\/retreiver'",239],")",["T_OBJECT_OPERATOR","->",239],["T_STRING","getCustomerGroups",239],"(",")",["T_WHITESPACE"," ",239],["T_AS","as",239],["T_WHITESPACE"," ",239],["T_VARIABLE","$group",239],")",["T_WHITESPACE"," ",239],"{",["T_WHITESPACE","\n                        ",239],["T_VARIABLE","$this",240],["T_OBJECT_OPERATOR","->",240],["T_STRING","_insert",240],"(",["T_CONSTANT_ENCAPSED_STRING","'catalogindex\/price'",240],",",["T_WHITESPACE"," ",240],["T_ARRAY","array",240],"(",["T_WHITESPACE","\n                            ",240],["T_VARIABLE","$id",241],",",["T_WHITESPACE","\n                            ",241],["T_VARIABLE","$attribute",242],",",["T_WHITESPACE","\n                            ",242],["T_VARIABLE","$index",243],"[",["T_CONSTANT_ENCAPSED_STRING","'value'",243],"]",",",["T_WHITESPACE","\n                            ",243],["T_VARIABLE","$websiteId",244],",",["T_WHITESPACE","\n                            ",244],["T_INT_CAST","(int)",245],["T_WHITESPACE"," ",245],["T_VARIABLE","$group",245],["T_OBJECT_OPERATOR","->",245],["T_STRING","getId",245],"(",")",",",["T_WHITESPACE","\n                            ",245],["T_INT_CAST","(int)",246],["T_WHITESPACE"," ",246],["T_VARIABLE","$index",246],"[",["T_CONSTANT_ENCAPSED_STRING","'qty'",246],"]",["T_WHITESPACE","\n                        ",246],")",")",";",["T_WHITESPACE","\n                    ",247],"}",["T_WHITESPACE","\n                ",248],"}",["T_WHITESPACE"," ",249],["T_ELSE","else",249],["T_WHITESPACE"," ",249],"{",["T_WHITESPACE","\n                    ",249],["T_VARIABLE","$this",250],["T_OBJECT_OPERATOR","->",250],["T_STRING","_insert",250],"(",["T_CONSTANT_ENCAPSED_STRING","'catalogindex\/price'",250],",",["T_WHITESPACE"," ",250],["T_ARRAY","array",250],"(",["T_WHITESPACE","\n                        ",250],["T_VARIABLE","$id",251],",",["T_WHITESPACE","\n                        ",251],["T_VARIABLE","$attribute",252],",",["T_WHITESPACE","\n                        ",252],["T_VARIABLE","$index",253],"[",["T_CONSTANT_ENCAPSED_STRING","'value'",253],"]",",",["T_WHITESPACE","\n                        ",253],["T_VARIABLE","$websiteId",254],",",["T_WHITESPACE","\n                        ",254],["T_INT_CAST","(int)",255],["T_WHITESPACE"," ",255],["T_VARIABLE","$index",255],"[",["T_CONSTANT_ENCAPSED_STRING","'customer_group_id'",255],"]",",",["T_WHITESPACE","\n                        ",255],["T_INT_CAST","(int)",256],["T_WHITESPACE"," ",256],["T_VARIABLE","$index",256],"[",["T_CONSTANT_ENCAPSED_STRING","'qty'",256],"]",["T_WHITESPACE","\n                    ",256],")",")",";",["T_WHITESPACE","\n                ",257],"}",["T_WHITESPACE","\n            ",258],"}",["T_WHITESPACE","\n        ",259],"}",["T_WHITESPACE","\n        ",260],["T_VARIABLE","$this",261],["T_OBJECT_OPERATOR","->",261],["T_STRING","_commitInsert",261],"(",["T_CONSTANT_ENCAPSED_STRING","'catalogindex\/price'",261],")",";",["T_WHITESPACE","\n        ",261],["T_RETURN","return",262],["T_WHITESPACE"," ",262],["T_VARIABLE","$this",262],";",["T_WHITESPACE","\n    ",262],"}",["T_WHITESPACE","\n\n    ",263],["T_DOC_COMMENT","\/**\n     * Reindex product prices\n     *\n     * @param array | int $products product ids\n     * @param array $attributeIds\n     * @param Mage_Core_Model_Store $store\n     * @return Mage_CatalogIndex_Model_Resource_Indexer\n     *\/",265],["T_WHITESPACE","\n    ",272],["T_PUBLIC","public",273],["T_WHITESPACE"," ",273],["T_FUNCTION","function",273],["T_WHITESPACE"," ",273],["T_STRING","reindexPrices",273],"(",["T_VARIABLE","$products",273],",",["T_WHITESPACE"," ",273],["T_VARIABLE","$attributeIds",273],",",["T_WHITESPACE"," ",273],["T_VARIABLE","$store",273],")",["T_WHITESPACE","\n    ",273],"{",["T_WHITESPACE","\n        ",274],["T_VARIABLE","$this",275],["T_OBJECT_OPERATOR","->",275],["T_STRING","reindexAttributes",275],"(",["T_VARIABLE","$products",275],",",["T_WHITESPACE"," ",275],["T_VARIABLE","$attributeIds",275],",",["T_WHITESPACE"," ",275],["T_VARIABLE","$store",275],",",["T_WHITESPACE"," ",275],["T_STRING","null",275],",",["T_WHITESPACE"," ",275],["T_CONSTANT_ENCAPSED_STRING","'catalogindex\/price'",275],",",["T_WHITESPACE"," ",275],["T_STRING","true",275],")",";",["T_WHITESPACE","\n        ",275],["T_RETURN","return",276],["T_WHITESPACE"," ",276],["T_VARIABLE","$this",276],";",["T_WHITESPACE","\n    ",276],"}",["T_WHITESPACE","\n\n    ",277],["T_DOC_COMMENT","\/**\n     * Reindex product final prices\n     *\n     * @param array $products array of product ids\n     * @param Mage_Core_Model_Store $store\n     * @param int | null $forcedId identifier of \"parent\" product\n     * @return Mage_CatalogIndex_Model_Resource_Indexer\n     *\/",279],["T_WHITESPACE","\n    ",286],["T_PUBLIC","public",287],["T_WHITESPACE"," ",287],["T_FUNCTION","function",287],["T_WHITESPACE"," ",287],["T_STRING","reindexFinalPrices",287],"(",["T_VARIABLE","$products",287],",",["T_WHITESPACE"," ",287],["T_VARIABLE","$store",287],",",["T_WHITESPACE"," ",287],["T_VARIABLE","$forcedId",287],["T_WHITESPACE"," ",287],"=",["T_WHITESPACE"," ",287],["T_STRING","null",287],")",["T_WHITESPACE","\n    ",287],"{",["T_WHITESPACE","\n        ",288],["T_VARIABLE","$priceAttribute",289],["T_WHITESPACE"," ",289],"=",["T_WHITESPACE"," ",289],["T_STRING","Mage",289],["T_DOUBLE_COLON","::",289],["T_STRING","getSingleton",289],"(",["T_CONSTANT_ENCAPSED_STRING","'eav\/entity_attribute'",289],")",["T_OBJECT_OPERATOR","->",289],["T_STRING","getIdByCode",289],"(",["T_STRING","Mage_Catalog_Model_Product",289],["T_DOUBLE_COLON","::",289],["T_STRING","ENTITY",289],",",["T_WHITESPACE"," ",289],["T_CONSTANT_ENCAPSED_STRING","'price'",289],")",";",["T_WHITESPACE","\n        ",289],["T_VARIABLE","$this",290],["T_OBJECT_OPERATOR","->",290],["T_STRING","_beginInsert",290],"(",["T_CONSTANT_ENCAPSED_STRING","'catalogindex\/price'",290],",",["T_WHITESPACE"," ",290],["T_ARRAY","array",290],"(",["T_WHITESPACE","\n            ",290],["T_CONSTANT_ENCAPSED_STRING","'entity_id'",291],",",["T_WHITESPACE","\n            ",291],["T_CONSTANT_ENCAPSED_STRING","'website_id'",292],",",["T_WHITESPACE","\n            ",292],["T_CONSTANT_ENCAPSED_STRING","'customer_group_id'",293],",",["T_WHITESPACE","\n            ",293],["T_CONSTANT_ENCAPSED_STRING","'value'",294],",",["T_WHITESPACE","\n            ",294],["T_CONSTANT_ENCAPSED_STRING","'attribute_id'",295],",",["T_WHITESPACE","\n            ",295],["T_CONSTANT_ENCAPSED_STRING","'tax_class_id'",296],["T_WHITESPACE","\n        ",296],")",")",";",["T_WHITESPACE","\n\n        ",297],["T_VARIABLE","$productTypes",299],["T_WHITESPACE"," ",299],"=",["T_WHITESPACE"," ",299],["T_STRING","Mage",299],["T_DOUBLE_COLON","::",299],["T_STRING","getSingleton",299],"(",["T_CONSTANT_ENCAPSED_STRING","'catalogindex\/retreiver'",299],")",["T_OBJECT_OPERATOR","->",299],["T_STRING","assignProductTypes",299],"(",["T_VARIABLE","$products",299],")",";",["T_WHITESPACE","\n        ",299],["T_FOREACH","foreach",300],["T_WHITESPACE"," ",300],"(",["T_VARIABLE","$productTypes",300],["T_WHITESPACE"," ",300],["T_AS","as",300],["T_WHITESPACE"," ",300],["T_VARIABLE","$type",300],["T_DOUBLE_ARROW","=>",300],["T_VARIABLE","$products",300],")",["T_WHITESPACE"," ",300],"{",["T_WHITESPACE","\n            ",300],["T_VARIABLE","$retreiver",301],["T_WHITESPACE"," ",301],"=",["T_WHITESPACE"," ",301],["T_STRING","Mage",301],["T_DOUBLE_COLON","::",301],["T_STRING","getSingleton",301],"(",["T_CONSTANT_ENCAPSED_STRING","'catalogindex\/retreiver'",301],")",["T_OBJECT_OPERATOR","->",301],["T_STRING","getRetreiver",301],"(",["T_VARIABLE","$type",301],")",";",["T_WHITESPACE","\n            ",301],["T_FOREACH","foreach",302],["T_WHITESPACE"," ",302],"(",["T_VARIABLE","$products",302],["T_WHITESPACE"," ",302],["T_AS","as",302],["T_WHITESPACE"," ",302],["T_VARIABLE","$product",302],")",["T_WHITESPACE"," ",302],"{",["T_WHITESPACE","\n                ",302],["T_IF","if",303],["T_WHITESPACE"," ",303],"(",["T_STRING","is_null",303],"(",["T_VARIABLE","$forcedId",303],")",")",["T_WHITESPACE"," ",303],"{",["T_WHITESPACE","\n                    ",303],["T_IF","if",304],["T_WHITESPACE"," ",304],"(",["T_VARIABLE","$retreiver",304],["T_OBJECT_OPERATOR","->",304],["T_STRING","areChildrenIndexable",304],"(",["T_STRING","Mage_CatalogIndex_Model_Retreiver",304],["T_DOUBLE_COLON","::",304],["T_STRING","CHILDREN_FOR_PRICES",304],")",")",["T_WHITESPACE"," ",304],"{",["T_WHITESPACE","\n                        ",304],["T_VARIABLE","$children",305],["T_WHITESPACE"," ",305],"=",["T_WHITESPACE"," ",305],["T_VARIABLE","$retreiver",305],["T_OBJECT_OPERATOR","->",305],["T_STRING","getChildProductIds",305],"(",["T_VARIABLE","$store",305],",",["T_WHITESPACE"," ",305],["T_VARIABLE","$product",305],")",";",["T_WHITESPACE","\n                        ",305],["T_IF","if",306],["T_WHITESPACE"," ",306],"(",["T_VARIABLE","$children",306],")",["T_WHITESPACE"," ",306],"{",["T_WHITESPACE","\n                            ",306],["T_VARIABLE","$this",307],["T_OBJECT_OPERATOR","->",307],["T_STRING","reindexFinalPrices",307],"(",["T_VARIABLE","$children",307],",",["T_WHITESPACE"," ",307],["T_VARIABLE","$store",307],",",["T_WHITESPACE"," ",307],["T_VARIABLE","$product",307],")",";",["T_WHITESPACE","\n                        ",307],"}",["T_WHITESPACE","\n                    ",308],"}",["T_WHITESPACE","\n                ",309],"}",["T_WHITESPACE","\n                ",310],["T_FOREACH","foreach",311],["T_WHITESPACE"," ",311],"(",["T_STRING","Mage",311],["T_DOUBLE_COLON","::",311],["T_STRING","getSingleton",311],"(",["T_CONSTANT_ENCAPSED_STRING","'catalogindex\/retreiver'",311],")",["T_OBJECT_OPERATOR","->",311],["T_STRING","getCustomerGroups",311],"(",")",["T_WHITESPACE"," ",311],["T_AS","as",311],["T_WHITESPACE"," ",311],["T_VARIABLE","$group",311],")",["T_WHITESPACE"," ",311],"{",["T_WHITESPACE","\n                    ",311],["T_VARIABLE","$finalPrice",312],["T_WHITESPACE"," ",312],"=",["T_WHITESPACE"," ",312],["T_VARIABLE","$retreiver",312],["T_OBJECT_OPERATOR","->",312],["T_STRING","getFinalPrice",312],"(",["T_VARIABLE","$product",312],",",["T_WHITESPACE"," ",312],["T_VARIABLE","$store",312],",",["T_WHITESPACE"," ",312],["T_VARIABLE","$group",312],")",";",["T_WHITESPACE","\n                    ",312],["T_VARIABLE","$taxClassId",313],["T_WHITESPACE"," ",313],"=",["T_WHITESPACE"," ",313],["T_VARIABLE","$retreiver",313],["T_OBJECT_OPERATOR","->",313],["T_STRING","getTaxClassId",313],"(",["T_VARIABLE","$product",313],",",["T_WHITESPACE"," ",313],["T_VARIABLE","$store",313],")",";",["T_WHITESPACE","\n                    ",313],["T_VARIABLE","$id",314],["T_WHITESPACE"," ",314],"=",["T_WHITESPACE"," ",314],["T_VARIABLE","$product",314],";",["T_WHITESPACE","\n                    ",314],["T_IF","if",315],["T_WHITESPACE"," ",315],"(","!",["T_STRING","is_null",315],"(",["T_VARIABLE","$forcedId",315],")",")",["T_WHITESPACE"," ",315],"{",["T_WHITESPACE","\n                        ",315],["T_VARIABLE","$id",316],["T_WHITESPACE"," ",316],"=",["T_WHITESPACE"," ",316],["T_VARIABLE","$forcedId",316],";",["T_WHITESPACE","\n                    ",316],"}",["T_WHITESPACE","\n\n                    ",317],["T_IF","if",319],["T_WHITESPACE"," ",319],"(",["T_STRING","false",319],["T_WHITESPACE"," ",319],["T_IS_NOT_IDENTICAL","!==",319],["T_WHITESPACE"," ",319],["T_VARIABLE","$finalPrice",319],["T_WHITESPACE"," ",319],["T_BOOLEAN_AND","&&",319],["T_WHITESPACE"," ",319],["T_STRING","false",319],["T_WHITESPACE"," ",319],["T_IS_NOT_IDENTICAL","!==",319],["T_WHITESPACE"," ",319],["T_VARIABLE","$id",319],["T_WHITESPACE"," ",319],["T_BOOLEAN_AND","&&",319],["T_WHITESPACE"," ",319],["T_STRING","false",319],["T_WHITESPACE"," ",319],["T_IS_NOT_IDENTICAL","!==",319],["T_WHITESPACE"," ",319],["T_VARIABLE","$priceAttribute",319],")",["T_WHITESPACE"," ",319],"{",["T_WHITESPACE","\n                        ",319],["T_VARIABLE","$this",320],["T_OBJECT_OPERATOR","->",320],["T_STRING","_insert",320],"(",["T_CONSTANT_ENCAPSED_STRING","'catalogindex\/price'",320],",",["T_WHITESPACE"," ",320],["T_ARRAY","array",320],"(",["T_WHITESPACE","\n                            ",320],["T_VARIABLE","$id",321],",",["T_WHITESPACE","\n                            ",321],["T_VARIABLE","$store",322],["T_OBJECT_OPERATOR","->",322],["T_STRING","getWebsiteId",322],"(",")",",",["T_WHITESPACE","\n                            ",322],["T_VARIABLE","$group",323],["T_OBJECT_OPERATOR","->",323],["T_STRING","getId",323],"(",")",",",["T_WHITESPACE","\n                            ",323],["T_VARIABLE","$finalPrice",324],",",["T_WHITESPACE","\n                            ",324],["T_VARIABLE","$priceAttribute",325],",",["T_WHITESPACE","\n                            ",325],["T_VARIABLE","$taxClassId",326],["T_WHITESPACE","\n                        ",326],")",")",";",["T_WHITESPACE","\n                    ",327],"}",["T_WHITESPACE","\n                ",328],"}",["T_WHITESPACE","\n            ",329],"}",["T_WHITESPACE","\n        ",330],"}",["T_WHITESPACE","\n        ",331],["T_VARIABLE","$this",332],["T_OBJECT_OPERATOR","->",332],["T_STRING","_commitInsert",332],"(",["T_CONSTANT_ENCAPSED_STRING","'catalogindex\/price'",332],")",";",["T_WHITESPACE","\n        ",332],["T_RETURN","return",333],["T_WHITESPACE"," ",333],["T_VARIABLE","$this",333],";",["T_WHITESPACE","\n    ",333],"}",["T_WHITESPACE","\n\n    ",334],["T_DOC_COMMENT","\/**\n     * Reindex product minimal prices\n     *\n     * @param array $products array of product ids\n     * @param Mage_Core_Model_Store $store\n     * @return Mage_CatalogIndex_Model_Resource_Indexer\n     *\/",336],["T_WHITESPACE","\n    ",342],["T_PUBLIC","public",343],["T_WHITESPACE"," ",343],["T_FUNCTION","function",343],["T_WHITESPACE"," ",343],["T_STRING","reindexMinimalPrices",343],"(",["T_VARIABLE","$products",343],",",["T_WHITESPACE"," ",343],["T_VARIABLE","$store",343],")",["T_WHITESPACE","\n    ",343],"{",["T_WHITESPACE","\n        ",344],["T_VARIABLE","$this",345],["T_OBJECT_OPERATOR","->",345],["T_STRING","_beginInsert",345],"(",["T_CONSTANT_ENCAPSED_STRING","'catalogindex\/minimal_price'",345],",",["T_WHITESPACE"," ",345],["T_ARRAY","array",345],"(",["T_WHITESPACE","\n            ",345],["T_CONSTANT_ENCAPSED_STRING","'website_id'",346],",",["T_WHITESPACE","\n            ",346],["T_CONSTANT_ENCAPSED_STRING","'entity_id'",347],",",["T_WHITESPACE","\n            ",347],["T_CONSTANT_ENCAPSED_STRING","'customer_group_id'",348],",",["T_WHITESPACE","\n            ",348],["T_CONSTANT_ENCAPSED_STRING","'value'",349],",",["T_WHITESPACE","\n            ",349],["T_CONSTANT_ENCAPSED_STRING","'tax_class_id'",350],["T_WHITESPACE","\n        ",350],")",")",";",["T_WHITESPACE","\n        ",351],["T_VARIABLE","$this",352],["T_OBJECT_OPERATOR","->",352],["T_STRING","clear",352],"(",["T_STRING","false",352],",",["T_WHITESPACE"," ",352],["T_STRING","false",352],",",["T_WHITESPACE"," ",352],["T_STRING","true",352],",",["T_WHITESPACE"," ",352],["T_STRING","false",352],",",["T_WHITESPACE"," ",352],["T_STRING","false",352],",",["T_WHITESPACE"," ",352],["T_VARIABLE","$products",352],",",["T_WHITESPACE"," ",352],["T_VARIABLE","$store",352],")",";",["T_WHITESPACE","\n        ",352],["T_VARIABLE","$products",353],["T_WHITESPACE"," ",353],"=",["T_WHITESPACE"," ",353],["T_STRING","Mage",353],["T_DOUBLE_COLON","::",353],["T_STRING","getSingleton",353],"(",["T_CONSTANT_ENCAPSED_STRING","'catalogindex\/retreiver'",353],")",["T_OBJECT_OPERATOR","->",353],["T_STRING","assignProductTypes",353],"(",["T_VARIABLE","$products",353],")",";",["T_WHITESPACE","\n\n        ",353],["T_FOREACH","foreach",355],["T_WHITESPACE"," ",355],"(",["T_VARIABLE","$products",355],["T_WHITESPACE"," ",355],["T_AS","as",355],["T_WHITESPACE"," ",355],["T_VARIABLE","$type",355],["T_DOUBLE_ARROW","=>",355],["T_VARIABLE","$typeIds",355],")",["T_WHITESPACE"," ",355],"{",["T_WHITESPACE","\n            ",355],["T_VARIABLE","$retreiver",356],["T_WHITESPACE"," ",356],"=",["T_WHITESPACE"," ",356],["T_STRING","Mage",356],["T_DOUBLE_COLON","::",356],["T_STRING","getSingleton",356],"(",["T_CONSTANT_ENCAPSED_STRING","'catalogindex\/retreiver'",356],")",["T_OBJECT_OPERATOR","->",356],["T_STRING","getRetreiver",356],"(",["T_VARIABLE","$type",356],")",";",["T_WHITESPACE","\n\n            ",356],["T_FOREACH","foreach",358],["T_WHITESPACE"," ",358],"(",["T_VARIABLE","$typeIds",358],["T_WHITESPACE"," ",358],["T_AS","as",358],["T_WHITESPACE"," ",358],["T_VARIABLE","$id",358],")",["T_WHITESPACE"," ",358],"{",["T_WHITESPACE","\n                ",358],["T_VARIABLE","$minimal",359],["T_WHITESPACE"," ",359],"=",["T_WHITESPACE"," ",359],["T_ARRAY","array",359],"(",")",";",["T_WHITESPACE","\n                ",359],["T_IF","if",360],["T_WHITESPACE"," ",360],"(",["T_VARIABLE","$retreiver",360],["T_OBJECT_OPERATOR","->",360],["T_STRING","areChildrenIndexable",360],"(",["T_STRING","Mage_CatalogIndex_Model_Retreiver",360],["T_DOUBLE_COLON","::",360],["T_STRING","CHILDREN_FOR_PRICES",360],")",")",["T_WHITESPACE"," ",360],"{",["T_WHITESPACE","\n                    ",360],["T_VARIABLE","$children",361],["T_WHITESPACE"," ",361],"=",["T_WHITESPACE"," ",361],["T_VARIABLE","$retreiver",361],["T_OBJECT_OPERATOR","->",361],["T_STRING","getChildProductIds",361],"(",["T_VARIABLE","$store",361],",",["T_WHITESPACE"," ",361],["T_VARIABLE","$id",361],")",";",["T_WHITESPACE","\n                    ",361],["T_IF","if",362],["T_WHITESPACE"," ",362],"(",["T_VARIABLE","$children",362],")",["T_WHITESPACE"," ",362],"{",["T_WHITESPACE","\n                        ",362],["T_VARIABLE","$minimal",363],["T_WHITESPACE"," ",363],"=",["T_WHITESPACE"," ",363],["T_VARIABLE","$this",363],["T_OBJECT_OPERATOR","->",363],["T_STRING","getMinimalPrice",363],"(",["T_ARRAY","array",363],"(",["T_VARIABLE","$type",363],["T_DOUBLE_ARROW","=>",363],["T_VARIABLE","$children",363],")",",",["T_WHITESPACE"," ",363],["T_VARIABLE","$store",363],")",";",["T_WHITESPACE","\n                    ",363],"}",["T_WHITESPACE","\n                ",364],"}",["T_WHITESPACE"," ",365],["T_ELSE","else",365],["T_WHITESPACE"," ",365],"{",["T_WHITESPACE","\n                    ",365],["T_VARIABLE","$minimal",366],["T_WHITESPACE"," ",366],"=",["T_WHITESPACE"," ",366],["T_VARIABLE","$this",366],["T_OBJECT_OPERATOR","->",366],["T_STRING","getMinimalPrice",366],"(",["T_ARRAY","array",366],"(",["T_VARIABLE","$type",366],["T_DOUBLE_ARROW","=>",366],["T_ARRAY","array",366],"(",["T_VARIABLE","$id",366],")",")",",",["T_WHITESPACE"," ",366],["T_VARIABLE","$store",366],")",";",["T_WHITESPACE","\n                ",366],"}",["T_WHITESPACE","\n\n                ",367],["T_IF","if",369],["T_WHITESPACE"," ",369],"(",["T_STRING","is_array",369],"(",["T_VARIABLE","$minimal",369],")",")",["T_WHITESPACE"," ",369],"{",["T_WHITESPACE","\n                    ",369],["T_FOREACH","foreach",370],["T_WHITESPACE"," ",370],"(",["T_VARIABLE","$minimal",370],["T_WHITESPACE"," ",370],["T_AS","as",370],["T_WHITESPACE"," ",370],["T_VARIABLE","$price",370],")",["T_WHITESPACE"," ",370],"{",["T_WHITESPACE","\n                        ",370],["T_IF","if",371],["T_WHITESPACE"," ",371],"(","!",["T_ISSET","isset",371],"(",["T_VARIABLE","$price",371],"[",["T_CONSTANT_ENCAPSED_STRING","'tax_class_id'",371],"]",")",")",["T_WHITESPACE"," ",371],"{",["T_WHITESPACE","\n                            ",371],["T_VARIABLE","$price",372],"[",["T_CONSTANT_ENCAPSED_STRING","'tax_class_id'",372],"]",["T_WHITESPACE"," ",372],"=",["T_WHITESPACE"," ",372],["T_LNUMBER","0",372],";",["T_WHITESPACE","\n                        ",372],"}",["T_WHITESPACE","\n                        ",373],["T_VARIABLE","$this",374],["T_OBJECT_OPERATOR","->",374],["T_STRING","_insert",374],"(",["T_CONSTANT_ENCAPSED_STRING","'catalogindex\/minimal_price'",374],",",["T_WHITESPACE"," ",374],["T_ARRAY","array",374],"(",["T_WHITESPACE","\n                            ",374],["T_VARIABLE","$store",375],["T_OBJECT_OPERATOR","->",375],["T_STRING","getWebsiteId",375],"(",")",",",["T_WHITESPACE","\n                            ",375],["T_VARIABLE","$id",376],",",["T_WHITESPACE","\n                            ",376],["T_VARIABLE","$price",377],"[",["T_CONSTANT_ENCAPSED_STRING","'customer_group_id'",377],"]",",",["T_WHITESPACE","\n                            ",377],["T_VARIABLE","$price",378],"[",["T_CONSTANT_ENCAPSED_STRING","'minimal_value'",378],"]",",",["T_WHITESPACE","\n                            ",378],["T_VARIABLE","$price",379],"[",["T_CONSTANT_ENCAPSED_STRING","'tax_class_id'",379],"]",["T_WHITESPACE","\n                        ",379],")",")",";",["T_WHITESPACE","\n                    ",380],"}",["T_WHITESPACE","\n                ",381],"}",["T_WHITESPACE","\n            ",382],"}",["T_WHITESPACE","\n        ",383],"}",["T_WHITESPACE","\n\n        ",384],["T_VARIABLE","$this",386],["T_OBJECT_OPERATOR","->",386],["T_STRING","_commitInsert",386],"(",["T_CONSTANT_ENCAPSED_STRING","'catalogindex\/minimal_price'",386],")",";",["T_WHITESPACE","\n        ",386],["T_RETURN","return",387],["T_WHITESPACE"," ",387],["T_VARIABLE","$this",387],";",["T_WHITESPACE","\n    ",387],"}",["T_WHITESPACE","\n\n    ",388],["T_DOC_COMMENT","\/**\n     * Reindex attributes data\n     *\n     * @param array $products\n     * @param array $attributeIds\n     * @param mixed $store\n     * @param int|null $forcedId\n     * @param string $table\n     * @param bool $storeIsWebsite\n     * @return Mage_CatalogIndex_Model_Resource_Indexer\n     *\/",390],["T_WHITESPACE","\n    ",400],["T_PUBLIC","public",401],["T_WHITESPACE"," ",401],["T_FUNCTION","function",401],["T_WHITESPACE"," ",401],["T_STRING","reindexAttributes",401],"(",["T_VARIABLE","$products",401],",",["T_WHITESPACE"," ",401],["T_VARIABLE","$attributeIds",401],",",["T_WHITESPACE"," ",401],["T_VARIABLE","$store",401],",",["T_WHITESPACE"," ",401],["T_VARIABLE","$forcedId",401],["T_WHITESPACE"," ",401],"=",["T_WHITESPACE"," ",401],["T_STRING","null",401],",",["T_WHITESPACE"," ",401],["T_VARIABLE","$table",401],["T_WHITESPACE"," ",401],"=",["T_WHITESPACE"," ",401],["T_CONSTANT_ENCAPSED_STRING","'catalogindex\/eav'",401],",",["T_WHITESPACE","\n        ",401],["T_VARIABLE","$storeIsWebsite",402],["T_WHITESPACE"," ",402],"=",["T_WHITESPACE"," ",402],["T_STRING","false",402],")",["T_WHITESPACE","\n    ",402],"{",["T_WHITESPACE","\n        ",403],["T_VARIABLE","$storeField",404],["T_WHITESPACE"," ",404],"=",["T_WHITESPACE"," ",404],["T_CONSTANT_ENCAPSED_STRING","'store_id'",404],";",["T_WHITESPACE","\n        ",404],["T_VARIABLE","$websiteId",405],["T_WHITESPACE"," ",405],"=",["T_WHITESPACE"," ",405],["T_STRING","null",405],";",["T_WHITESPACE","\n        ",405],["T_IF","if",406],["T_WHITESPACE"," ",406],"(",["T_VARIABLE","$storeIsWebsite",406],")",["T_WHITESPACE"," ",406],"{",["T_WHITESPACE","\n            ",406],["T_VARIABLE","$storeField",407],["T_WHITESPACE"," ",407],"=",["T_WHITESPACE"," ",407],["T_CONSTANT_ENCAPSED_STRING","'website_id'",407],";",["T_WHITESPACE","\n            ",407],["T_IF","if",408],["T_WHITESPACE"," ",408],"(",["T_VARIABLE","$store",408],["T_WHITESPACE"," ",408],["T_INSTANCEOF","instanceof",408],["T_WHITESPACE"," ",408],["T_STRING","Mage_Core_Model_Store",408],")",["T_WHITESPACE"," ",408],"{",["T_WHITESPACE","\n                ",408],["T_VARIABLE","$websiteId",409],["T_WHITESPACE"," ",409],"=",["T_WHITESPACE"," ",409],["T_VARIABLE","$store",409],["T_OBJECT_OPERATOR","->",409],["T_STRING","getWebsiteId",409],"(",")",";",["T_WHITESPACE","\n            ",409],"}",["T_WHITESPACE"," ",410],["T_ELSE","else",410],["T_WHITESPACE"," ",410],"{",["T_WHITESPACE","\n                ",410],["T_VARIABLE","$websiteId",411],["T_WHITESPACE"," ",411],"=",["T_WHITESPACE"," ",411],["T_STRING","Mage",411],["T_DOUBLE_COLON","::",411],["T_STRING","app",411],"(",")",["T_OBJECT_OPERATOR","->",411],["T_STRING","getStore",411],"(",["T_VARIABLE","$store",411],")",["T_OBJECT_OPERATOR","->",411],["T_STRING","getWebsiteId",411],"(",")",";",["T_WHITESPACE","\n            ",411],"}",["T_WHITESPACE","\n        ",412],"}",["T_WHITESPACE","\n\n        ",413],["T_VARIABLE","$this",415],["T_OBJECT_OPERATOR","->",415],["T_STRING","_beginInsert",415],"(",["T_VARIABLE","$table",415],",",["T_WHITESPACE"," ",415],["T_ARRAY","array",415],"(",["T_CONSTANT_ENCAPSED_STRING","'entity_id'",415],",",["T_WHITESPACE"," ",415],["T_CONSTANT_ENCAPSED_STRING","'attribute_id'",415],",",["T_WHITESPACE"," ",415],["T_CONSTANT_ENCAPSED_STRING","'value'",415],",",["T_WHITESPACE"," ",415],["T_VARIABLE","$storeField",415],")",")",";",["T_WHITESPACE","\n\n        ",415],["T_VARIABLE","$products",417],["T_WHITESPACE"," ",417],"=",["T_WHITESPACE"," ",417],["T_STRING","Mage",417],["T_DOUBLE_COLON","::",417],["T_STRING","getSingleton",417],"(",["T_CONSTANT_ENCAPSED_STRING","'catalogindex\/retreiver'",417],")",["T_OBJECT_OPERATOR","->",417],["T_STRING","assignProductTypes",417],"(",["T_VARIABLE","$products",417],")",";",["T_WHITESPACE","\n\n        ",417],["T_IF","if",419],["T_WHITESPACE"," ",419],"(",["T_STRING","is_null",419],"(",["T_VARIABLE","$forcedId",419],")",")",["T_WHITESPACE"," ",419],"{",["T_WHITESPACE","\n            ",419],["T_FOREACH","foreach",420],["T_WHITESPACE"," ",420],"(",["T_VARIABLE","$products",420],["T_WHITESPACE"," ",420],["T_AS","as",420],["T_WHITESPACE"," ",420],["T_VARIABLE","$type",420],["T_DOUBLE_ARROW","=>",420],["T_VARIABLE","$typeIds",420],")",["T_WHITESPACE"," ",420],"{",["T_WHITESPACE","\n                ",420],["T_VARIABLE","$retreiver",421],["T_WHITESPACE"," ",421],"=",["T_WHITESPACE"," ",421],["T_STRING","Mage",421],["T_DOUBLE_COLON","::",421],["T_STRING","getSingleton",421],"(",["T_CONSTANT_ENCAPSED_STRING","'catalogindex\/retreiver'",421],")",["T_OBJECT_OPERATOR","->",421],["T_STRING","getRetreiver",421],"(",["T_VARIABLE","$type",421],")",";",["T_WHITESPACE","\n                ",421],["T_IF","if",422],["T_WHITESPACE"," ",422],"(",["T_VARIABLE","$retreiver",422],["T_OBJECT_OPERATOR","->",422],["T_STRING","areChildrenIndexable",422],"(",["T_STRING","Mage_CatalogIndex_Model_Retreiver",422],["T_DOUBLE_COLON","::",422],["T_STRING","CHILDREN_FOR_ATTRIBUTES",422],")",")",["T_WHITESPACE"," ",422],"{",["T_WHITESPACE","\n                    ",422],["T_FOREACH","foreach",423],["T_WHITESPACE"," ",423],"(",["T_VARIABLE","$typeIds",423],["T_WHITESPACE"," ",423],["T_AS","as",423],["T_WHITESPACE"," ",423],["T_VARIABLE","$id",423],")",["T_WHITESPACE"," ",423],"{",["T_WHITESPACE","\n                        ",423],["T_VARIABLE","$children",424],["T_WHITESPACE"," ",424],"=",["T_WHITESPACE"," ",424],["T_VARIABLE","$retreiver",424],["T_OBJECT_OPERATOR","->",424],["T_STRING","getChildProductIds",424],"(",["T_VARIABLE","$store",424],",",["T_WHITESPACE"," ",424],["T_VARIABLE","$id",424],")",";",["T_WHITESPACE","\n                        ",424],["T_IF","if",425],["T_WHITESPACE"," ",425],"(",["T_VARIABLE","$children",425],")",["T_WHITESPACE"," ",425],"{",["T_WHITESPACE","\n                            ",425],["T_VARIABLE","$this",426],["T_OBJECT_OPERATOR","->",426],["T_STRING","reindexAttributes",426],"(",["T_VARIABLE","$children",426],",",["T_WHITESPACE"," ",426],["T_VARIABLE","$attributeIds",426],",",["T_WHITESPACE"," ",426],["T_VARIABLE","$store",426],",",["T_WHITESPACE"," ",426],["T_VARIABLE","$id",426],",",["T_WHITESPACE"," ",426],["T_VARIABLE","$table",426],",",["T_WHITESPACE"," ",426],["T_VARIABLE","$storeIsWebsite",426],")",";",["T_WHITESPACE","\n                        ",426],"}",["T_WHITESPACE","\n                    ",427],"}",["T_WHITESPACE","\n                ",428],"}",["T_WHITESPACE","\n            ",429],"}",["T_WHITESPACE","\n        ",430],"}",["T_WHITESPACE","\n\n        ",431],["T_VARIABLE","$attributeIndex",433],["T_WHITESPACE"," ",433],"=",["T_WHITESPACE"," ",433],["T_VARIABLE","$this",433],["T_OBJECT_OPERATOR","->",433],["T_STRING","getProductData",433],"(",["T_VARIABLE","$products",433],",",["T_WHITESPACE"," ",433],["T_VARIABLE","$attributeIds",433],",",["T_WHITESPACE"," ",433],["T_VARIABLE","$store",433],")",";",["T_WHITESPACE","\n        ",433],["T_FOREACH","foreach",434],["T_WHITESPACE"," ",434],"(",["T_VARIABLE","$attributeIndex",434],["T_WHITESPACE"," ",434],["T_AS","as",434],["T_WHITESPACE"," ",434],["T_VARIABLE","$index",434],")",["T_WHITESPACE"," ",434],"{",["T_WHITESPACE","\n            ",434],["T_VARIABLE","$type",435],["T_WHITESPACE"," ",435],"=",["T_WHITESPACE"," ",435],["T_VARIABLE","$index",435],"[",["T_CONSTANT_ENCAPSED_STRING","'type_id'",435],"]",";",["T_WHITESPACE","\n            ",435],["T_VARIABLE","$id",436],["T_WHITESPACE"," ",436],"=",["T_WHITESPACE"," ",436],"(",["T_STRING","is_null",436],"(",["T_VARIABLE","$forcedId",436],")",["T_WHITESPACE"," ",436],"?",["T_WHITESPACE"," ",436],["T_VARIABLE","$index",436],"[",["T_CONSTANT_ENCAPSED_STRING","'entity_id'",436],"]",["T_WHITESPACE"," ",436],":",["T_WHITESPACE"," ",436],["T_VARIABLE","$forcedId",436],")",";",["T_WHITESPACE","\n\n            ",436],["T_IF","if",438],["T_WHITESPACE"," ",438],"(",["T_VARIABLE","$id",438],["T_WHITESPACE"," ",438],["T_BOOLEAN_AND","&&",438],["T_WHITESPACE"," ",438],["T_VARIABLE","$index",438],"[",["T_CONSTANT_ENCAPSED_STRING","'attribute_id'",438],"]",["T_WHITESPACE"," ",438],["T_BOOLEAN_AND","&&",438],["T_WHITESPACE"," ",438],["T_ISSET","isset",438],"(",["T_VARIABLE","$index",438],"[",["T_CONSTANT_ENCAPSED_STRING","'value'",438],"]",")",")",["T_WHITESPACE"," ",438],"{",["T_WHITESPACE","\n                ",438],["T_VARIABLE","$attribute",439],["T_WHITESPACE"," ",439],"=",["T_WHITESPACE"," ",439],["T_VARIABLE","$this",439],["T_OBJECT_OPERATOR","->",439],["T_STRING","_loadAttribute",439],"(",["T_VARIABLE","$index",439],"[",["T_CONSTANT_ENCAPSED_STRING","'attribute_id'",439],"]",")",";",["T_WHITESPACE","\n                ",439],["T_IF","if",440],["T_WHITESPACE"," ",440],"(",["T_VARIABLE","$attribute",440],["T_OBJECT_OPERATOR","->",440],["T_STRING","getFrontendInput",440],"(",")",["T_WHITESPACE"," ",440],["T_IS_EQUAL","==",440],["T_WHITESPACE"," ",440],["T_CONSTANT_ENCAPSED_STRING","'multiselect'",440],")",["T_WHITESPACE"," ",440],"{",["T_WHITESPACE","\n                    ",440],["T_VARIABLE","$index",441],"[",["T_CONSTANT_ENCAPSED_STRING","'value'",441],"]",["T_WHITESPACE"," ",441],"=",["T_WHITESPACE"," ",441],["T_STRING","explode",441],"(",["T_CONSTANT_ENCAPSED_STRING","','",441],",",["T_WHITESPACE"," ",441],["T_VARIABLE","$index",441],"[",["T_CONSTANT_ENCAPSED_STRING","'value'",441],"]",")",";",["T_WHITESPACE","\n                ",441],"}",["T_WHITESPACE","\n\n                ",442],["T_IF","if",444],["T_WHITESPACE"," ",444],"(",["T_STRING","is_array",444],"(",["T_VARIABLE","$index",444],"[",["T_CONSTANT_ENCAPSED_STRING","'value'",444],"]",")",")",["T_WHITESPACE"," ",444],"{",["T_WHITESPACE","\n                    ",444],["T_FOREACH","foreach",445],["T_WHITESPACE"," ",445],"(",["T_VARIABLE","$index",445],"[",["T_CONSTANT_ENCAPSED_STRING","'value'",445],"]",["T_WHITESPACE"," ",445],["T_AS","as",445],["T_WHITESPACE"," ",445],["T_VARIABLE","$value",445],")",["T_WHITESPACE"," ",445],"{",["T_WHITESPACE","\n                        ",445],["T_VARIABLE","$this",446],["T_OBJECT_OPERATOR","->",446],["T_STRING","_insert",446],"(",["T_VARIABLE","$table",446],",",["T_WHITESPACE"," ",446],["T_ARRAY","array",446],"(",["T_WHITESPACE","\n                            ",446],["T_VARIABLE","$id",447],",",["T_WHITESPACE","\n                            ",447],["T_VARIABLE","$index",448],"[",["T_CONSTANT_ENCAPSED_STRING","'attribute_id'",448],"]",",",["T_WHITESPACE","\n                            ",448],["T_VARIABLE","$value",449],",",["T_WHITESPACE","\n                            ",449],"(",["T_STRING","is_null",450],"(",["T_VARIABLE","$websiteId",450],")",["T_WHITESPACE"," ",450],"?",["T_WHITESPACE"," ",450],["T_VARIABLE","$store",450],["T_OBJECT_OPERATOR","->",450],["T_STRING","getId",450],"(",")",["T_WHITESPACE"," ",450],":",["T_WHITESPACE"," ",450],["T_VARIABLE","$websiteId",450],")",["T_WHITESPACE","\n                        ",450],")",")",";",["T_WHITESPACE","\n                    ",451],"}",["T_WHITESPACE","\n                ",452],"}",["T_WHITESPACE"," ",453],["T_ELSE","else",453],["T_WHITESPACE"," ",453],"{",["T_WHITESPACE","\n                    ",453],["T_VARIABLE","$this",454],["T_OBJECT_OPERATOR","->",454],["T_STRING","_insert",454],"(",["T_VARIABLE","$table",454],",",["T_WHITESPACE"," ",454],["T_ARRAY","array",454],"(",["T_WHITESPACE","\n                        ",454],["T_VARIABLE","$id",455],",",["T_WHITESPACE","\n                        ",455],["T_VARIABLE","$index",456],"[",["T_CONSTANT_ENCAPSED_STRING","'attribute_id'",456],"]",",",["T_WHITESPACE","\n                        ",456],["T_VARIABLE","$index",457],"[",["T_CONSTANT_ENCAPSED_STRING","'value'",457],"]",",",["T_WHITESPACE","\n                        ",457],"(",["T_STRING","is_null",458],"(",["T_VARIABLE","$websiteId",458],")",["T_WHITESPACE"," ",458],"?",["T_WHITESPACE"," ",458],["T_VARIABLE","$store",458],["T_OBJECT_OPERATOR","->",458],["T_STRING","getId",458],"(",")",["T_WHITESPACE"," ",458],":",["T_WHITESPACE"," ",458],["T_VARIABLE","$websiteId",458],")",["T_WHITESPACE","\n                    ",458],")",")",";",["T_WHITESPACE","\n                ",459],"}",["T_WHITESPACE","\n            ",460],"}",["T_WHITESPACE","\n        ",461],"}",["T_WHITESPACE","\n\n        ",462],["T_VARIABLE","$this",464],["T_OBJECT_OPERATOR","->",464],["T_STRING","_commitInsert",464],"(",["T_VARIABLE","$table",464],")",";",["T_WHITESPACE","\n        ",464],["T_RETURN","return",465],["T_WHITESPACE"," ",465],["T_VARIABLE","$this",465],";",["T_WHITESPACE","\n    ",465],"}",["T_WHITESPACE","\n\n    ",466],["T_DOC_COMMENT","\/**\n     * Get tier prices data by set of products\n     *\n     * @param array $products\n     * @param Mage_Core_Model_Store $store\n     * @return array\n     *\/",468],["T_WHITESPACE","\n    ",474],["T_PUBLIC","public",475],["T_WHITESPACE"," ",475],["T_FUNCTION","function",475],["T_WHITESPACE"," ",475],["T_STRING","getTierData",475],"(",["T_VARIABLE","$products",475],",",["T_WHITESPACE"," ",475],["T_VARIABLE","$store",475],")",["T_WHITESPACE","\n    ",475],"{",["T_WHITESPACE","\n        ",476],["T_VARIABLE","$result",477],["T_WHITESPACE"," ",477],"=",["T_WHITESPACE"," ",477],["T_ARRAY","array",477],"(",")",";",["T_WHITESPACE","\n        ",477],["T_FOREACH","foreach",478],["T_WHITESPACE"," ",478],"(",["T_VARIABLE","$products",478],["T_WHITESPACE"," ",478],["T_AS","as",478],["T_WHITESPACE"," ",478],["T_VARIABLE","$type",478],["T_DOUBLE_ARROW","=>",478],["T_VARIABLE","$typeIds",478],")",["T_WHITESPACE"," ",478],"{",["T_WHITESPACE","\n            ",478],["T_VARIABLE","$retreiver",479],["T_WHITESPACE"," ",479],"=",["T_WHITESPACE"," ",479],["T_STRING","Mage",479],["T_DOUBLE_COLON","::",479],["T_STRING","getSingleton",479],"(",["T_CONSTANT_ENCAPSED_STRING","'catalogindex\/retreiver'",479],")",["T_OBJECT_OPERATOR","->",479],["T_STRING","getRetreiver",479],"(",["T_VARIABLE","$type",479],")",";",["T_WHITESPACE","\n            ",479],["T_VARIABLE","$byType",480],["T_WHITESPACE"," ",480],"=",["T_WHITESPACE"," ",480],["T_VARIABLE","$retreiver",480],["T_OBJECT_OPERATOR","->",480],["T_STRING","getTierPrices",480],"(",["T_VARIABLE","$typeIds",480],",",["T_WHITESPACE"," ",480],["T_VARIABLE","$store",480],")",";",["T_WHITESPACE","\n            ",480],["T_IF","if",481],["T_WHITESPACE"," ",481],"(",["T_VARIABLE","$byType",481],")",["T_WHITESPACE"," ",481],"{",["T_WHITESPACE","\n                ",481],["T_VARIABLE","$result",482],["T_WHITESPACE"," ",482],"=",["T_WHITESPACE"," ",482],["T_STRING","array_merge",482],"(",["T_VARIABLE","$result",482],",",["T_WHITESPACE"," ",482],["T_VARIABLE","$byType",482],")",";",["T_WHITESPACE","\n            ",482],"}",["T_WHITESPACE","\n        ",483],"}",["T_WHITESPACE","\n        ",484],["T_RETURN","return",485],["T_WHITESPACE"," ",485],["T_VARIABLE","$result",485],";",["T_WHITESPACE","\n    ",485],"}",["T_WHITESPACE","\n\n    ",486],["T_DOC_COMMENT","\/**\n     * Get minimal prices by set of the products\n     *\n     * @param arary $products\n     * @param Mage_Core_Model_Store $store\n     * @return array\n     *\/",488],["T_WHITESPACE","\n    ",494],["T_PUBLIC","public",495],["T_WHITESPACE"," ",495],["T_FUNCTION","function",495],["T_WHITESPACE"," ",495],["T_STRING","getMinimalPrice",495],"(",["T_VARIABLE","$products",495],",",["T_WHITESPACE"," ",495],["T_VARIABLE","$store",495],")",["T_WHITESPACE","\n    ",495],"{",["T_WHITESPACE","\n        ",496],["T_VARIABLE","$result",497],["T_WHITESPACE"," ",497],"=",["T_WHITESPACE"," ",497],["T_ARRAY","array",497],"(",")",";",["T_WHITESPACE","\n        ",497],["T_FOREACH","foreach",498],["T_WHITESPACE"," ",498],"(",["T_VARIABLE","$products",498],["T_WHITESPACE"," ",498],["T_AS","as",498],["T_WHITESPACE"," ",498],["T_VARIABLE","$type",498],["T_DOUBLE_ARROW","=>",498],["T_VARIABLE","$typeIds",498],")",["T_WHITESPACE"," ",498],"{",["T_WHITESPACE","\n            ",498],["T_VARIABLE","$retreiver",499],["T_WHITESPACE"," ",499],"=",["T_WHITESPACE"," ",499],["T_STRING","Mage",499],["T_DOUBLE_COLON","::",499],["T_STRING","getSingleton",499],"(",["T_CONSTANT_ENCAPSED_STRING","'catalogindex\/retreiver'",499],")",["T_OBJECT_OPERATOR","->",499],["T_STRING","getRetreiver",499],"(",["T_VARIABLE","$type",499],")",";",["T_WHITESPACE","\n            ",499],["T_VARIABLE","$byType",500],["T_WHITESPACE"," ",500],"=",["T_WHITESPACE"," ",500],["T_VARIABLE","$retreiver",500],["T_OBJECT_OPERATOR","->",500],["T_STRING","getMinimalPrice",500],"(",["T_VARIABLE","$typeIds",500],",",["T_WHITESPACE"," ",500],["T_VARIABLE","$store",500],")",";",["T_WHITESPACE","\n            ",500],["T_IF","if",501],["T_WHITESPACE"," ",501],"(",["T_VARIABLE","$byType",501],")",["T_WHITESPACE"," ",501],"{",["T_WHITESPACE","\n                ",501],["T_VARIABLE","$result",502],["T_WHITESPACE"," ",502],"=",["T_WHITESPACE"," ",502],["T_STRING","array_merge",502],"(",["T_VARIABLE","$result",502],",",["T_WHITESPACE"," ",502],["T_VARIABLE","$byType",502],")",";",["T_WHITESPACE","\n            ",502],"}",["T_WHITESPACE","\n        ",503],"}",["T_WHITESPACE","\n        ",504],["T_RETURN","return",505],["T_WHITESPACE"," ",505],["T_VARIABLE","$result",505],";",["T_WHITESPACE","\n    ",505],"}",["T_WHITESPACE","\n\n    ",506],["T_DOC_COMMENT","\/**\n     * Get data for products\n     *\n     * @param array $products\n     * @param array $attributeIds\n     * @param Mage_Core_Model_Store $store\n     * @return array\n     *\/",508],["T_WHITESPACE","\n    ",515],["T_PUBLIC","public",516],["T_WHITESPACE"," ",516],["T_FUNCTION","function",516],["T_WHITESPACE"," ",516],["T_STRING","getProductData",516],"(",["T_VARIABLE","$products",516],",",["T_WHITESPACE"," ",516],["T_VARIABLE","$attributeIds",516],",",["T_WHITESPACE"," ",516],["T_VARIABLE","$store",516],")",["T_WHITESPACE","\n    ",516],"{",["T_WHITESPACE","\n        ",517],["T_VARIABLE","$result",518],["T_WHITESPACE"," ",518],"=",["T_WHITESPACE"," ",518],["T_ARRAY","array",518],"(",")",";",["T_WHITESPACE","\n        ",518],["T_FOREACH","foreach",519],["T_WHITESPACE"," ",519],"(",["T_VARIABLE","$products",519],["T_WHITESPACE"," ",519],["T_AS","as",519],["T_WHITESPACE"," ",519],["T_VARIABLE","$type",519],["T_DOUBLE_ARROW","=>",519],["T_VARIABLE","$typeIds",519],")",["T_WHITESPACE"," ",519],"{",["T_WHITESPACE","\n            ",519],["T_VARIABLE","$retreiver",520],["T_WHITESPACE"," ",520],"=",["T_WHITESPACE"," ",520],["T_STRING","Mage",520],["T_DOUBLE_COLON","::",520],["T_STRING","getSingleton",520],"(",["T_CONSTANT_ENCAPSED_STRING","'catalogindex\/retreiver'",520],")",["T_OBJECT_OPERATOR","->",520],["T_STRING","getRetreiver",520],"(",["T_VARIABLE","$type",520],")",";",["T_WHITESPACE","\n            ",520],["T_VARIABLE","$byType",521],["T_WHITESPACE"," ",521],"=",["T_WHITESPACE"," ",521],["T_VARIABLE","$retreiver",521],["T_OBJECT_OPERATOR","->",521],["T_STRING","getAttributeData",521],"(",["T_VARIABLE","$typeIds",521],",",["T_WHITESPACE"," ",521],["T_VARIABLE","$attributeIds",521],",",["T_WHITESPACE"," ",521],["T_VARIABLE","$store",521],")",";",["T_WHITESPACE","\n            ",521],["T_IF","if",522],["T_WHITESPACE"," ",522],"(",["T_VARIABLE","$byType",522],")",["T_WHITESPACE"," ",522],"{",["T_WHITESPACE","\n                ",522],["T_VARIABLE","$result",523],["T_WHITESPACE"," ",523],"=",["T_WHITESPACE"," ",523],["T_STRING","array_merge",523],"(",["T_VARIABLE","$result",523],",",["T_WHITESPACE"," ",523],["T_VARIABLE","$byType",523],")",";",["T_WHITESPACE","\n            ",523],"}",["T_WHITESPACE","\n        ",524],"}",["T_WHITESPACE","\n        ",525],["T_RETURN","return",526],["T_WHITESPACE"," ",526],["T_VARIABLE","$result",526],";",["T_WHITESPACE","\n    ",526],"}",["T_WHITESPACE","\n\n    ",527],["T_DOC_COMMENT","\/**\n     * Prepare base information for data insert\n     *\n     * @param string $table\n     * @param array $fields\n     * @return Mage_CatalogIndex_Model_Resource_Indexer\n     *\/",529],["T_WHITESPACE","\n    ",535],["T_PROTECTED","protected",536],["T_WHITESPACE"," ",536],["T_FUNCTION","function",536],["T_WHITESPACE"," ",536],["T_STRING","_beginInsert",536],"(",["T_VARIABLE","$table",536],",",["T_WHITESPACE"," ",536],["T_VARIABLE","$fields",536],")",["T_WHITESPACE","\n    ",536],"{",["T_WHITESPACE","\n        ",537],["T_VARIABLE","$this",538],["T_OBJECT_OPERATOR","->",538],["T_STRING","_tableFields",538],"[",["T_VARIABLE","$table",538],"]",["T_WHITESPACE"," ",538],"=",["T_WHITESPACE"," ",538],["T_VARIABLE","$fields",538],";",["T_WHITESPACE","\n        ",538],["T_RETURN","return",539],["T_WHITESPACE"," ",539],["T_VARIABLE","$this",539],";",["T_WHITESPACE","\n    ",539],"}",["T_WHITESPACE","\n\n    ",540],["T_DOC_COMMENT","\/**\n     * Put data into table\n     *\n     * @param string $table\n     * @param bool $forced\n     * @return Mage_CatalogIndex_Model_Resource_Indexer\n     *\/",542],["T_WHITESPACE","\n    ",548],["T_PROTECTED","protected",549],["T_WHITESPACE"," ",549],["T_FUNCTION","function",549],["T_WHITESPACE"," ",549],["T_STRING","_commitInsert",549],"(",["T_VARIABLE","$table",549],",",["T_WHITESPACE"," ",549],["T_VARIABLE","$forced",549],["T_WHITESPACE"," ",549],"=",["T_WHITESPACE"," ",549],["T_STRING","true",549],")",["T_WHITESPACE","\n    ",549],"{",["T_WHITESPACE","\n        ",550],["T_IF","if",551],["T_WHITESPACE"," ",551],"(",["T_ISSET","isset",551],"(",["T_VARIABLE","$this",551],["T_OBJECT_OPERATOR","->",551],["T_STRING","_insertData",551],"[",["T_VARIABLE","$table",551],"]",")",["T_WHITESPACE"," ",551],["T_BOOLEAN_AND","&&",551],["T_WHITESPACE"," ",551],["T_STRING","count",551],"(",["T_VARIABLE","$this",551],["T_OBJECT_OPERATOR","->",551],["T_STRING","_insertData",551],"[",["T_VARIABLE","$table",551],"]",")",["T_WHITESPACE"," ",551],["T_BOOLEAN_AND","&&",551],["T_WHITESPACE"," ",551],"(",["T_VARIABLE","$forced",551],["T_WHITESPACE"," ",551],["T_BOOLEAN_OR","||",551],["T_WHITESPACE"," ",551],["T_STRING","count",551],"(",["T_VARIABLE","$this",551],["T_OBJECT_OPERATOR","->",551],["T_STRING","_insertData",551],"[",["T_VARIABLE","$table",551],"]",")",["T_WHITESPACE"," ",551],["T_IS_GREATER_OR_EQUAL",">=",551],["T_WHITESPACE"," ",551],["T_LNUMBER","100",551],")",")",["T_WHITESPACE"," ",551],"{",["T_WHITESPACE","\n            ",551],["T_VARIABLE","$query",552],["T_WHITESPACE"," ",552],"=",["T_WHITESPACE"," ",552],["T_CONSTANT_ENCAPSED_STRING","'REPLACE INTO '",552],["T_WHITESPACE"," ",552],".",["T_WHITESPACE"," ",552],["T_VARIABLE","$this",552],["T_OBJECT_OPERATOR","->",552],["T_STRING","getTable",552],"(",["T_VARIABLE","$table",552],")",["T_WHITESPACE"," ",552],".",["T_WHITESPACE"," ",552],["T_CONSTANT_ENCAPSED_STRING","' ('",552],["T_WHITESPACE"," ",552],".",["T_WHITESPACE"," ",552],["T_STRING","implode",552],"(",["T_CONSTANT_ENCAPSED_STRING","', '",552],",",["T_WHITESPACE"," ",552],["T_VARIABLE","$this",552],["T_OBJECT_OPERATOR","->",552],["T_STRING","_tableFields",552],"[",["T_VARIABLE","$table",552],"]",")",["T_WHITESPACE"," ",552],".",["T_WHITESPACE"," ",552],["T_CONSTANT_ENCAPSED_STRING","') VALUES '",552],";",["T_WHITESPACE","\n            ",552],["T_VARIABLE","$separator",553],["T_WHITESPACE"," ",553],"=",["T_WHITESPACE"," ",553],["T_CONSTANT_ENCAPSED_STRING","''",553],";",["T_WHITESPACE","\n            ",553],["T_FOREACH","foreach",554],["T_WHITESPACE"," ",554],"(",["T_VARIABLE","$this",554],["T_OBJECT_OPERATOR","->",554],["T_STRING","_insertData",554],"[",["T_VARIABLE","$table",554],"]",["T_WHITESPACE"," ",554],["T_AS","as",554],["T_WHITESPACE"," ",554],["T_VARIABLE","$row",554],")",["T_WHITESPACE"," ",554],"{",["T_WHITESPACE","\n                ",554],["T_VARIABLE","$rowString",555],["T_WHITESPACE"," ",555],"=",["T_WHITESPACE"," ",555],["T_VARIABLE","$this",555],["T_OBJECT_OPERATOR","->",555],["T_STRING","_getWriteAdapter",555],"(",")",["T_OBJECT_OPERATOR","->",555],["T_STRING","quoteInto",555],"(",["T_CONSTANT_ENCAPSED_STRING","'(?)'",555],",",["T_WHITESPACE"," ",555],["T_VARIABLE","$row",555],")",";",["T_WHITESPACE","\n                ",555],["T_VARIABLE","$query",556],["T_WHITESPACE"," ",556],["T_CONCAT_EQUAL",".=",556],["T_WHITESPACE"," ",556],["T_VARIABLE","$separator",556],["T_WHITESPACE"," ",556],".",["T_WHITESPACE"," ",556],["T_VARIABLE","$rowString",556],";",["T_WHITESPACE","\n                ",556],["T_VARIABLE","$separator",557],["T_WHITESPACE"," ",557],"=",["T_WHITESPACE"," ",557],["T_CONSTANT_ENCAPSED_STRING","', '",557],";",["T_WHITESPACE","\n            ",557],"}",["T_WHITESPACE","\n            ",558],["T_VARIABLE","$this",559],["T_OBJECT_OPERATOR","->",559],["T_STRING","_getWriteAdapter",559],"(",")",["T_OBJECT_OPERATOR","->",559],["T_STRING","query",559],"(",["T_VARIABLE","$query",559],")",";",["T_WHITESPACE","\n            ",559],["T_VARIABLE","$this",560],["T_OBJECT_OPERATOR","->",560],["T_STRING","_insertData",560],"[",["T_VARIABLE","$table",560],"]",["T_WHITESPACE"," ",560],"=",["T_WHITESPACE"," ",560],["T_ARRAY","array",560],"(",")",";",["T_WHITESPACE","\n        ",560],"}",["T_WHITESPACE","\n        ",561],["T_RETURN","return",562],["T_WHITESPACE"," ",562],["T_VARIABLE","$this",562],";",["T_WHITESPACE","\n    ",562],"}",["T_WHITESPACE","\n\n    ",563],["T_DOC_COMMENT","\/**\n     * Insert data to table\n     *\n     * @param string $table\n     * @param array $data\n     * @return Mage_CatalogIndex_Model_Resource_Indexer\n     *\/",565],["T_WHITESPACE","\n    ",571],["T_PROTECTED","protected",572],["T_WHITESPACE"," ",572],["T_FUNCTION","function",572],["T_WHITESPACE"," ",572],["T_STRING","_insert",572],"(",["T_VARIABLE","$table",572],",",["T_WHITESPACE"," ",572],["T_VARIABLE","$data",572],")",["T_WHITESPACE","\n    ",572],"{",["T_WHITESPACE","\n        ",573],["T_VARIABLE","$this",574],["T_OBJECT_OPERATOR","->",574],["T_STRING","_insertData",574],"[",["T_VARIABLE","$table",574],"]","[","]",["T_WHITESPACE"," ",574],"=",["T_WHITESPACE"," ",574],["T_VARIABLE","$data",574],";",["T_WHITESPACE","\n        ",574],["T_VARIABLE","$this",575],["T_OBJECT_OPERATOR","->",575],["T_STRING","_commitInsert",575],"(",["T_VARIABLE","$table",575],",",["T_WHITESPACE"," ",575],["T_STRING","false",575],")",";",["T_WHITESPACE","\n        ",575],["T_RETURN","return",576],["T_WHITESPACE"," ",576],["T_VARIABLE","$this",576],";",["T_WHITESPACE","\n    ",576],"}",["T_WHITESPACE","\n\n    ",577],["T_DOC_COMMENT","\/**\n     * Add price columns for catalog product flat table\n     *\n     * @param Varien_Object $object\n     * @return Mage_CatalogIndex_Model_Resource_Indexer\n     *\/",579],["T_WHITESPACE","\n    ",584],["T_PUBLIC","public",585],["T_WHITESPACE"," ",585],["T_FUNCTION","function",585],["T_WHITESPACE"," ",585],["T_STRING","prepareCatalogProductFlatColumns",585],"(",["T_STRING","Varien_Object",585],["T_WHITESPACE"," ",585],["T_VARIABLE","$object",585],")",["T_WHITESPACE","\n    ",585],"{",["T_WHITESPACE","\n        ",586],["T_VARIABLE","$columns",587],["T_WHITESPACE"," ",587],"=",["T_WHITESPACE"," ",587],["T_VARIABLE","$object",587],["T_OBJECT_OPERATOR","->",587],["T_STRING","getColumns",587],"(",")",";",["T_WHITESPACE","\n\n        ",587],["T_FOREACH","foreach",589],["T_WHITESPACE"," ",589],"(",["T_STRING","Mage",589],["T_DOUBLE_COLON","::",589],["T_STRING","getSingleton",589],"(",["T_CONSTANT_ENCAPSED_STRING","'catalogindex\/retreiver'",589],")",["T_OBJECT_OPERATOR","->",589],["T_STRING","getCustomerGroups",589],"(",")",["T_WHITESPACE"," ",589],["T_AS","as",589],["T_WHITESPACE"," ",589],["T_VARIABLE","$group",589],")",["T_WHITESPACE"," ",589],"{",["T_WHITESPACE","\n            ",589],["T_VARIABLE","$columnName",590],["T_WHITESPACE"," ",590],"=",["T_WHITESPACE"," ",590],["T_CONSTANT_ENCAPSED_STRING","'display_price_group_'",590],["T_WHITESPACE"," ",590],".",["T_WHITESPACE"," ",590],["T_VARIABLE","$group",590],["T_OBJECT_OPERATOR","->",590],["T_STRING","getId",590],"(",")",";",["T_WHITESPACE","\n            ",590],["T_VARIABLE","$columns",591],"[",["T_VARIABLE","$columnName",591],"]",["T_WHITESPACE"," ",591],"=",["T_WHITESPACE"," ",591],["T_ARRAY","array",591],"(",["T_WHITESPACE","\n                ",591],["T_CONSTANT_ENCAPSED_STRING","'type'",592],["T_WHITESPACE","      ",592],["T_DOUBLE_ARROW","=>",592],["T_WHITESPACE"," ",592],["T_CONSTANT_ENCAPSED_STRING","'decimal(12,4)'",592],",",["T_WHITESPACE","\n                ",592],["T_CONSTANT_ENCAPSED_STRING","'unsigned'",593],["T_WHITESPACE","  ",593],["T_DOUBLE_ARROW","=>",593],["T_WHITESPACE"," ",593],["T_STRING","false",593],",",["T_WHITESPACE","\n                ",593],["T_CONSTANT_ENCAPSED_STRING","'nullable'",594],["T_WHITESPACE","   ",594],["T_DOUBLE_ARROW","=>",594],["T_WHITESPACE"," ",594],["T_STRING","true",594],",",["T_WHITESPACE","\n                ",594],["T_CONSTANT_ENCAPSED_STRING","'default'",595],["T_WHITESPACE","   ",595],["T_DOUBLE_ARROW","=>",595],["T_WHITESPACE"," ",595],["T_STRING","null",595],",",["T_WHITESPACE","\n                ",595],["T_CONSTANT_ENCAPSED_STRING","'extra'",596],["T_WHITESPACE","     ",596],["T_DOUBLE_ARROW","=>",596],["T_WHITESPACE"," ",596],["T_STRING","null",596],",",["T_WHITESPACE","\n                ",596],["T_CONSTANT_ENCAPSED_STRING","'comment'",597],["T_WHITESPACE","   ",597],["T_DOUBLE_ARROW","=>",597],["T_WHITESPACE"," ",597],["T_VARIABLE","$columnName",597],["T_WHITESPACE"," ",597],".",["T_WHITESPACE"," ",597],["T_CONSTANT_ENCAPSED_STRING","' column'",597],["T_WHITESPACE","\n            ",597],")",";",["T_WHITESPACE","\n        ",598],"}",["T_WHITESPACE","\n\n        ",599],["T_VARIABLE","$object",601],["T_OBJECT_OPERATOR","->",601],["T_STRING","setColumns",601],"(",["T_VARIABLE","$columns",601],")",";",["T_WHITESPACE","\n\n        ",601],["T_RETURN","return",603],["T_WHITESPACE"," ",603],["T_VARIABLE","$this",603],";",["T_WHITESPACE","\n    ",603],"}",["T_WHITESPACE","\n\n    ",604],["T_DOC_COMMENT","\/**\n     * Add price indexes for catalog product flat table\n     *\n     * @param Varien_Object $object\n     * @return Mage_CatalogIndex_Model_Resource_Indexer\n     *\/",606],["T_WHITESPACE","\n    ",611],["T_PUBLIC","public",612],["T_WHITESPACE"," ",612],["T_FUNCTION","function",612],["T_WHITESPACE"," ",612],["T_STRING","prepareCatalogProductFlatIndexes",612],"(",["T_STRING","Varien_Object",612],["T_WHITESPACE"," ",612],["T_VARIABLE","$object",612],")",["T_WHITESPACE","\n    ",612],"{",["T_WHITESPACE","\n        ",613],["T_VARIABLE","$indexes",614],["T_WHITESPACE"," ",614],"=",["T_WHITESPACE"," ",614],["T_VARIABLE","$object",614],["T_OBJECT_OPERATOR","->",614],["T_STRING","getIndexes",614],"(",")",";",["T_WHITESPACE","\n\n        ",614],["T_FOREACH","foreach",616],["T_WHITESPACE"," ",616],"(",["T_STRING","Mage",616],["T_DOUBLE_COLON","::",616],["T_STRING","getSingleton",616],"(",["T_CONSTANT_ENCAPSED_STRING","'catalogindex\/retreiver'",616],")",["T_OBJECT_OPERATOR","->",616],["T_STRING","getCustomerGroups",616],"(",")",["T_WHITESPACE"," ",616],["T_AS","as",616],["T_WHITESPACE"," ",616],["T_VARIABLE","$group",616],")",["T_WHITESPACE"," ",616],"{",["T_WHITESPACE","\n            ",616],["T_VARIABLE","$columnName",617],["T_WHITESPACE"," ",617],"=",["T_WHITESPACE"," ",617],["T_CONSTANT_ENCAPSED_STRING","'display_price_group_'",617],["T_WHITESPACE"," ",617],".",["T_WHITESPACE"," ",617],["T_VARIABLE","$group",617],["T_OBJECT_OPERATOR","->",617],["T_STRING","getId",617],"(",")",";",["T_WHITESPACE","\n            ",617],["T_VARIABLE","$indexName",618],["T_WHITESPACE","  ",618],"=",["T_WHITESPACE"," ",618],["T_CONSTANT_ENCAPSED_STRING","'IDX_DISPLAY_PRICE_GROUP_'",618],["T_WHITESPACE"," ",618],".",["T_WHITESPACE"," ",618],["T_VARIABLE","$group",618],["T_OBJECT_OPERATOR","->",618],["T_STRING","getId",618],"(",")",";",["T_WHITESPACE","\n            ",618],["T_VARIABLE","$indexes",619],"[",["T_VARIABLE","$indexName",619],"]",["T_WHITESPACE"," ",619],"=",["T_WHITESPACE"," ",619],["T_ARRAY","array",619],"(",["T_WHITESPACE","\n                ",619],["T_CONSTANT_ENCAPSED_STRING","'type'",620],["T_WHITESPACE","   ",620],["T_DOUBLE_ARROW","=>",620],["T_WHITESPACE"," ",620],["T_CONSTANT_ENCAPSED_STRING","'index'",620],",",["T_WHITESPACE","\n                ",620],["T_CONSTANT_ENCAPSED_STRING","'fields'",621],["T_WHITESPACE"," ",621],["T_DOUBLE_ARROW","=>",621],["T_WHITESPACE"," ",621],["T_ARRAY","array",621],"(",["T_VARIABLE","$columnName",621],")",["T_WHITESPACE","\n            ",621],")",";",["T_WHITESPACE","\n        ",622],"}",["T_WHITESPACE","\n\n        ",623],["T_VARIABLE","$object",625],["T_OBJECT_OPERATOR","->",625],["T_STRING","setIndexes",625],"(",["T_VARIABLE","$indexes",625],")",";",["T_WHITESPACE","\n\n        ",625],["T_RETURN","return",627],["T_WHITESPACE"," ",627],["T_VARIABLE","$this",627],";",["T_WHITESPACE","\n    ",627],"}",["T_WHITESPACE","\n\n    ",628],["T_DOC_COMMENT","\/**\n     * Update prices for Catalog Product flat\n     *\n     * @param int $storeId\n     * @param unknown_type $productIds\n     * @param string $tableName\n     * @return Mage_CatalogIndex_Model_Resource_Indexer\n     *\/",630],["T_WHITESPACE","\n    ",637],["T_PUBLIC","public",638],["T_WHITESPACE"," ",638],["T_FUNCTION","function",638],["T_WHITESPACE"," ",638],["T_STRING","updateCatalogProductFlat",638],"(",["T_VARIABLE","$storeId",638],",",["T_WHITESPACE"," ",638],["T_VARIABLE","$productIds",638],["T_WHITESPACE"," ",638],"=",["T_WHITESPACE"," ",638],["T_STRING","null",638],",",["T_WHITESPACE"," ",638],["T_VARIABLE","$tableName",638],["T_WHITESPACE"," ",638],"=",["T_WHITESPACE"," ",638],["T_STRING","null",638],")",["T_WHITESPACE","\n    ",638],"{",["T_WHITESPACE","\n        ",639],["T_IF","if",640],["T_WHITESPACE"," ",640],"(",["T_STRING","is_null",640],"(",["T_VARIABLE","$tableName",640],")",")",["T_WHITESPACE"," ",640],"{",["T_WHITESPACE","\n            ",640],["T_VARIABLE","$tableName",641],["T_WHITESPACE"," ",641],"=",["T_WHITESPACE"," ",641],["T_VARIABLE","$this",641],["T_OBJECT_OPERATOR","->",641],["T_STRING","getTable",641],"(",["T_CONSTANT_ENCAPSED_STRING","'catalog\/product_flat'",641],")",["T_WHITESPACE"," ",641],".",["T_WHITESPACE"," ",641],["T_CONSTANT_ENCAPSED_STRING","'_'",641],["T_WHITESPACE"," ",641],".",["T_WHITESPACE"," ",641],["T_VARIABLE","$storeId",641],";",["T_WHITESPACE","\n        ",641],"}",["T_WHITESPACE","\n        ",642],["T_VARIABLE","$addChildData",643],["T_WHITESPACE"," ",643],"=",["T_WHITESPACE"," ",643],["T_STRING","Mage",643],["T_DOUBLE_COLON","::",643],["T_STRING","helper",643],"(",["T_CONSTANT_ENCAPSED_STRING","'catalog\/product_flat'",643],")",["T_OBJECT_OPERATOR","->",643],["T_STRING","isAddChildData",643],"(",")",";",["T_WHITESPACE","\n\n        ",643],["T_VARIABLE","$priceAttribute",645],["T_WHITESPACE"," ",645],"=",["T_WHITESPACE"," ",645],["T_STRING","Mage",645],["T_DOUBLE_COLON","::",645],["T_STRING","getSingleton",645],"(",["T_CONSTANT_ENCAPSED_STRING","'eav\/entity_attribute'",645],")",["T_WHITESPACE","\n            ",645],["T_OBJECT_OPERATOR","->",646],["T_STRING","getIdByCode",646],"(",["T_STRING","Mage_Catalog_Model_Product",646],["T_DOUBLE_COLON","::",646],["T_STRING","ENTITY",646],",",["T_WHITESPACE"," ",646],["T_CONSTANT_ENCAPSED_STRING","'price'",646],")",";",["T_WHITESPACE","\n        ",646],["T_VARIABLE","$websiteId",647],["T_WHITESPACE"," ",647],"=",["T_WHITESPACE"," ",647],["T_STRING","Mage",647],["T_DOUBLE_COLON","::",647],["T_STRING","app",647],"(",")",["T_OBJECT_OPERATOR","->",647],["T_STRING","getStore",647],"(",["T_VARIABLE","$storeId",647],")",["T_OBJECT_OPERATOR","->",647],["T_STRING","getWebsiteId",647],"(",")",";",["T_WHITESPACE","\n\n        ",647],["T_FOREACH","foreach",649],["T_WHITESPACE"," ",649],"(",["T_STRING","Mage",649],["T_DOUBLE_COLON","::",649],["T_STRING","getSingleton",649],"(",["T_CONSTANT_ENCAPSED_STRING","'catalogindex\/retreiver'",649],")",["T_OBJECT_OPERATOR","->",649],["T_STRING","getCustomerGroups",649],"(",")",["T_WHITESPACE"," ",649],["T_AS","as",649],["T_WHITESPACE"," ",649],["T_VARIABLE","$group",649],")",["T_WHITESPACE"," ",649],"{",["T_WHITESPACE","\n            ",649],["T_VARIABLE","$columnName",650],["T_WHITESPACE"," ",650],"=",["T_WHITESPACE"," ",650],["T_CONSTANT_ENCAPSED_STRING","'display_price_group_'",650],["T_WHITESPACE"," ",650],".",["T_WHITESPACE"," ",650],["T_VARIABLE","$group",650],["T_OBJECT_OPERATOR","->",650],["T_STRING","getId",650],"(",")",";",["T_WHITESPACE","\n\n            ",650],["T_DOC_COMMENT","\/**\n             * Update prices of main products in flat table\n             *\/",652],["T_WHITESPACE","\n            ",654],["T_VARIABLE","$select",655],["T_WHITESPACE"," ",655],"=",["T_WHITESPACE"," ",655],["T_VARIABLE","$this",655],["T_OBJECT_OPERATOR","->",655],["T_STRING","_getWriteAdapter",655],"(",")",["T_OBJECT_OPERATOR","->",655],["T_STRING","select",655],"(",")",["T_WHITESPACE","\n                ",655],["T_OBJECT_OPERATOR","->",656],["T_STRING","join",656],"(",["T_WHITESPACE","\n                    ",656],["T_ARRAY","array",657],"(",["T_CONSTANT_ENCAPSED_STRING","'p'",657],["T_WHITESPACE"," ",657],["T_DOUBLE_ARROW","=>",657],["T_WHITESPACE"," ",657],["T_VARIABLE","$this",657],["T_OBJECT_OPERATOR","->",657],["T_STRING","getTable",657],"(",["T_CONSTANT_ENCAPSED_STRING","'catalogindex\/price'",657],")",")",",",["T_WHITESPACE","\n                    ",657],["T_CONSTANT_ENCAPSED_STRING","\"`e`.`entity_id`=`p`.`entity_id`\"",658],["T_WHITESPACE","\n                        ",658],".",["T_WHITESPACE"," ",659],"\"",["T_ENCAPSED_AND_WHITESPACE"," AND `p`.`attribute_id`=",659],["T_CURLY_OPEN","{",659],["T_VARIABLE","$priceAttribute",659],"}","\"",["T_WHITESPACE","\n                        ",659],".",["T_WHITESPACE"," ",660],"\"",["T_ENCAPSED_AND_WHITESPACE"," AND `p`.`customer_group_id`=",660],["T_CURLY_OPEN","{",660],["T_VARIABLE","$group",660],["T_OBJECT_OPERATOR","->",660],["T_STRING","getId",660],"(",")","}","\"",["T_WHITESPACE","\n                        ",660],".",["T_WHITESPACE"," ",661],"\"",["T_ENCAPSED_AND_WHITESPACE"," AND `p`.`website_id`=",661],["T_CURLY_OPEN","{",661],["T_VARIABLE","$websiteId",661],"}","\"",",",["T_WHITESPACE","\n                    ",661],["T_ARRAY","array",662],"(",["T_VARIABLE","$columnName",662],["T_WHITESPACE"," ",662],["T_DOUBLE_ARROW","=>",662],["T_WHITESPACE"," ",662],["T_CONSTANT_ENCAPSED_STRING","'value'",662],")",")",";",["T_WHITESPACE","\n            ",662],["T_IF","if",663],["T_WHITESPACE"," ",663],"(",["T_VARIABLE","$addChildData",663],")",["T_WHITESPACE"," ",663],"{",["T_WHITESPACE","\n                ",663],["T_VARIABLE","$select",664],["T_OBJECT_OPERATOR","->",664],["T_STRING","where",664],"(",["T_CONSTANT_ENCAPSED_STRING","'e.is_child=?'",664],",",["T_WHITESPACE"," ",664],["T_LNUMBER","0",664],")",";",["T_WHITESPACE","\n            ",664],"}",["T_WHITESPACE","\n\n            ",665],["T_IF","if",667],["T_WHITESPACE"," ",667],"(",["T_VARIABLE","$productIds",667],["T_WHITESPACE"," ",667],["T_INSTANCEOF","instanceof",667],["T_WHITESPACE"," ",667],["T_STRING","Mage_Catalog_Model_Product_Condition_Interface",667],")",["T_WHITESPACE"," ",667],"{",["T_WHITESPACE","\n                ",667],["T_VARIABLE","$select",668],["T_OBJECT_OPERATOR","->",668],["T_STRING","where",668],"(",["T_CONSTANT_ENCAPSED_STRING","'e.entity_id IN ('",668],".",["T_VARIABLE","$productIds",668],["T_OBJECT_OPERATOR","->",668],["T_STRING","getIdsSelect",668],"(",["T_VARIABLE","$this",668],["T_OBJECT_OPERATOR","->",668],["T_STRING","_getWriteAdapter",668],"(",")",")",["T_OBJECT_OPERATOR","->",668],["T_STRING","__toString",668],"(",")",".",["T_CONSTANT_ENCAPSED_STRING","')'",668],")",";",["T_WHITESPACE","\n            ",668],"}",["T_WHITESPACE"," ",669],["T_ELSEIF","elseif",669],["T_WHITESPACE"," ",669],"(","!",["T_STRING","is_null",669],"(",["T_VARIABLE","$productIds",669],")",")",["T_WHITESPACE"," ",669],"{",["T_WHITESPACE","\n                ",669],["T_VARIABLE","$select",670],["T_OBJECT_OPERATOR","->",670],["T_STRING","where",670],"(",["T_CONSTANT_ENCAPSED_STRING","\"e.entity_id IN(?)\"",670],",",["T_WHITESPACE"," ",670],["T_VARIABLE","$productIds",670],")",";",["T_WHITESPACE","\n            ",670],"}",["T_WHITESPACE","\n\n            ",671],["T_VARIABLE","$sql",673],["T_WHITESPACE"," ",673],"=",["T_WHITESPACE"," ",673],["T_VARIABLE","$select",673],["T_OBJECT_OPERATOR","->",673],["T_STRING","crossUpdateFromSelect",673],"(",["T_ARRAY","array",673],"(",["T_CONSTANT_ENCAPSED_STRING","'e'",673],["T_WHITESPACE"," ",673],["T_DOUBLE_ARROW","=>",673],["T_WHITESPACE"," ",673],["T_VARIABLE","$tableName",673],")",")",";",["T_WHITESPACE","\n            ",673],["T_VARIABLE","$this",674],["T_OBJECT_OPERATOR","->",674],["T_STRING","_getWriteAdapter",674],"(",")",["T_OBJECT_OPERATOR","->",674],["T_STRING","query",674],"(",["T_VARIABLE","$sql",674],")",";",["T_WHITESPACE","\n\n            ",674],["T_IF","if",676],["T_WHITESPACE"," ",676],"(",["T_VARIABLE","$addChildData",676],")",["T_WHITESPACE"," ",676],"{",["T_WHITESPACE","\n                ",676],["T_DOC_COMMENT","\/**\n                 * Update prices for children products in flat table\n                 *\/",677],["T_WHITESPACE","\n                ",679],["T_VARIABLE","$select",680],["T_WHITESPACE"," ",680],"=",["T_WHITESPACE"," ",680],["T_VARIABLE","$this",680],["T_OBJECT_OPERATOR","->",680],["T_STRING","_getWriteAdapter",680],"(",")",["T_OBJECT_OPERATOR","->",680],["T_STRING","select",680],"(",")",["T_WHITESPACE","\n                    ",680],["T_OBJECT_OPERATOR","->",681],["T_STRING","join",681],"(",["T_WHITESPACE","\n                        ",681],["T_ARRAY","array",682],"(",["T_CONSTANT_ENCAPSED_STRING","'p'",682],["T_WHITESPACE"," ",682],["T_DOUBLE_ARROW","=>",682],["T_WHITESPACE"," ",682],["T_VARIABLE","$this",682],["T_OBJECT_OPERATOR","->",682],["T_STRING","getTable",682],"(",["T_CONSTANT_ENCAPSED_STRING","'catalogindex\/price'",682],")",")",",",["T_WHITESPACE","\n                        ",682],["T_CONSTANT_ENCAPSED_STRING","\"`e`.`child_id`=`p`.`entity_id`\"",683],["T_WHITESPACE","\n                            ",683],".",["T_WHITESPACE"," ",684],"\"",["T_ENCAPSED_AND_WHITESPACE"," AND `p`.`attribute_id`=",684],["T_CURLY_OPEN","{",684],["T_VARIABLE","$priceAttribute",684],"}","\"",["T_WHITESPACE","\n                            ",684],".",["T_WHITESPACE"," ",685],"\"",["T_ENCAPSED_AND_WHITESPACE"," AND `p`.`customer_group_id`=",685],["T_CURLY_OPEN","{",685],["T_VARIABLE","$group",685],["T_OBJECT_OPERATOR","->",685],["T_STRING","getId",685],"(",")","}","\"",["T_WHITESPACE","\n                            ",685],".",["T_WHITESPACE"," ",686],"\"",["T_ENCAPSED_AND_WHITESPACE"," AND `p`.`website_id`=",686],["T_CURLY_OPEN","{",686],["T_VARIABLE","$websiteId",686],"}","\"",",",["T_WHITESPACE","\n                        ",686],["T_ARRAY","array",687],"(",["T_VARIABLE","$columnName",687],["T_WHITESPACE"," ",687],["T_DOUBLE_ARROW","=>",687],["T_WHITESPACE"," ",687],["T_CONSTANT_ENCAPSED_STRING","'value'",687],")",")",["T_WHITESPACE","\n                    ",687],["T_OBJECT_OPERATOR","->",688],["T_STRING","where",688],"(",["T_CONSTANT_ENCAPSED_STRING","'e.is_child=?'",688],",",["T_WHITESPACE"," ",688],["T_LNUMBER","1",688],")",";",["T_WHITESPACE","\n\n                ",688],["T_IF","if",690],["T_WHITESPACE"," ",690],"(",["T_VARIABLE","$productIds",690],["T_WHITESPACE"," ",690],["T_INSTANCEOF","instanceof",690],["T_WHITESPACE"," ",690],["T_STRING","Mage_Catalog_Model_Product_Condition_Interface",690],")",["T_WHITESPACE"," ",690],"{",["T_WHITESPACE","\n                    ",690],["T_VARIABLE","$select",691],["T_OBJECT_OPERATOR","->",691],["T_STRING","where",691],"(",["T_CONSTANT_ENCAPSED_STRING","'e.child_id IN ('",691],".",["T_VARIABLE","$productIds",691],["T_OBJECT_OPERATOR","->",691],["T_STRING","getIdsSelect",691],"(",["T_VARIABLE","$this",691],["T_OBJECT_OPERATOR","->",691],["T_STRING","_getWriteAdapter",691],"(",")",")",["T_OBJECT_OPERATOR","->",691],["T_STRING","__toString",691],"(",")",".",["T_CONSTANT_ENCAPSED_STRING","')'",691],")",";",["T_WHITESPACE","\n                ",691],"}",["T_WHITESPACE"," ",692],["T_ELSEIF","elseif",692],["T_WHITESPACE"," ",692],"(","!",["T_STRING","is_null",692],"(",["T_VARIABLE","$productIds",692],")",")",["T_WHITESPACE"," ",692],"{",["T_WHITESPACE","\n                    ",692],["T_VARIABLE","$select",693],["T_OBJECT_OPERATOR","->",693],["T_STRING","where",693],"(",["T_CONSTANT_ENCAPSED_STRING","\"e.child_id IN(?)\"",693],",",["T_WHITESPACE"," ",693],["T_VARIABLE","$productIds",693],")",";",["T_WHITESPACE","\n                ",693],"}",["T_WHITESPACE","\n\n                ",694],["T_VARIABLE","$sql",696],["T_WHITESPACE"," ",696],"=",["T_WHITESPACE"," ",696],["T_VARIABLE","$select",696],["T_OBJECT_OPERATOR","->",696],["T_STRING","crossUpdateFromSelect",696],"(",["T_ARRAY","array",696],"(",["T_CONSTANT_ENCAPSED_STRING","'e'",696],["T_WHITESPACE"," ",696],["T_DOUBLE_ARROW","=>",696],["T_WHITESPACE"," ",696],["T_VARIABLE","$tableName",696],")",")",";",["T_WHITESPACE","\n                ",696],["T_VARIABLE","$this",697],["T_OBJECT_OPERATOR","->",697],["T_STRING","_getWriteAdapter",697],"(",")",["T_OBJECT_OPERATOR","->",697],["T_STRING","query",697],"(",["T_VARIABLE","$sql",697],")",";",["T_WHITESPACE","\n            ",697],"}",["T_WHITESPACE","\n\n        ",698],"}",["T_WHITESPACE","\n\n        ",700],["T_RETURN","return",702],["T_WHITESPACE"," ",702],["T_VARIABLE","$this",702],";",["T_WHITESPACE","\n    ",702],"}",["T_WHITESPACE","\n",703],"}",["T_WHITESPACE","\n",704]]
[["T_OPEN_TAG","<?php\n",1],["T_DOC_COMMENT","\/**\n * Magento\n *\n * NOTICE OF LICENSE\n *\n * This source file is subject to the Open Software License (OSL 3.0)\n * that is bundled with this package in the file LICENSE.txt.\n * It is also available through the world-wide-web at this URL:\n * http:\/\/opensource.org\/licenses\/osl-3.0.php\n * If you did not receive a copy of the license and are unable to\n * obtain it through the world-wide-web, please send an email\n * to license@magento.com so we can send you a copy immediately.\n *\n * DISCLAIMER\n *\n * Do not edit or add to this file if you wish to upgrade Magento to newer\n * versions in the future. If you wish to customize Magento for your\n * needs please refer to http:\/\/www.magento.com for more information.\n *\n * @category    Mage\n * @package     Mage_CatalogIndex\n * @copyright  Copyright (c) 2006-2016 X.commerce, Inc. and affiliates (http:\/\/www.magento.com)\n * @license    http:\/\/opensource.org\/licenses\/osl-3.0.php  Open Software License (OSL 3.0)\n *\/",2],["T_WHITESPACE","\n\n\n",25],["T_DOC_COMMENT","\/**\n * Resource model CatalogIndex Data Abstract\n *\n * @category    Mage\n * @package     Mage_CatalogIndex\n * @author      Magento Core Team <core@magentocommerce.com>\n *\/",28],["T_WHITESPACE","\n",34],["T_CLASS","class",35],["T_WHITESPACE"," ",35],["T_STRING","Mage_CatalogIndex_Model_Resource_Data_Abstract",35],["T_WHITESPACE"," ",35],["T_EXTENDS","extends",35],["T_WHITESPACE"," ",35],["T_STRING","Mage_Core_Model_Resource_Db_Abstract",35],["T_WHITESPACE","\n",35],"{",["T_WHITESPACE","\n    ",36],["T_DOC_COMMENT","\/**\n     * Attribute id by code cache\n     *\n     * @var array\n     *\/",37],["T_WHITESPACE","\n    ",41],["T_PROTECTED","protected",42],["T_WHITESPACE"," ",42],["T_VARIABLE","$_attributeCodeIds",42],["T_WHITESPACE","     ",42],"=",["T_WHITESPACE"," ",42],["T_ARRAY","array",42],"(",")",";",["T_WHITESPACE","\n\n    ",42],["T_DOC_COMMENT","\/**\n     * Link select object\n     *\n     * @var Zend_Db_Select\n     *\/",44],["T_WHITESPACE","\n    ",48],["T_PROTECTED","protected",49],["T_WHITESPACE"," ",49],["T_VARIABLE","$_linkSelect",49],["T_WHITESPACE","           ",49],"=",["T_WHITESPACE"," ",49],["T_STRING","null",49],";",["T_WHITESPACE","\n\n    ",49],["T_DOC_COMMENT","\/**\n     * Set link select\n     *\n     * @param Zend_Db_Select $select\n     * @return Mage_CatalogIndex_Model_Resource_Data_Abstract\n     *\/",51],["T_WHITESPACE","\n    ",56],["T_PROTECTED","protected",57],["T_WHITESPACE"," ",57],["T_FUNCTION","function",57],["T_WHITESPACE"," ",57],["T_STRING","_setLinkSelect",57],"(",["T_VARIABLE","$select",57],")",["T_WHITESPACE","\n    ",57],"{",["T_WHITESPACE","\n        ",58],["T_VARIABLE","$this",59],["T_OBJECT_OPERATOR","->",59],["T_STRING","_linkSelect",59],["T_WHITESPACE"," ",59],"=",["T_WHITESPACE"," ",59],["T_VARIABLE","$select",59],";",["T_WHITESPACE","\n        ",59],["T_RETURN","return",60],["T_WHITESPACE"," ",60],["T_VARIABLE","$this",60],";",["T_WHITESPACE","\n    ",60],"}",["T_WHITESPACE","\n\n    ",61],["T_DOC_COMMENT","\/**\n     * Get link select\n     *\n     * @return Zend_Db_Select $select\n     *\/",63],["T_WHITESPACE","\n    ",67],["T_PROTECTED","protected",68],["T_WHITESPACE"," ",68],["T_FUNCTION","function",68],["T_WHITESPACE"," ",68],["T_STRING","_getLinkSelect",68],"(",")",["T_WHITESPACE","\n    ",68],"{",["T_WHITESPACE","\n        ",69],["T_RETURN","return",70],["T_WHITESPACE"," ",70],["T_VARIABLE","$this",70],["T_OBJECT_OPERATOR","->",70],["T_STRING","_linkSelect",70],";",["T_WHITESPACE","\n    ",70],"}",["T_WHITESPACE","\n\n    ",71],["T_DOC_COMMENT","\/**\n     * Init resource\n     *\n     *\/",73],["T_WHITESPACE","\n    ",76],["T_PROTECTED","protected",77],["T_WHITESPACE"," ",77],["T_FUNCTION","function",77],["T_WHITESPACE"," ",77],["T_STRING","_construct",77],"(",")",["T_WHITESPACE","\n    ",77],"{",["T_WHITESPACE","\n        ",78],["T_VARIABLE","$this",79],["T_OBJECT_OPERATOR","->",79],["T_STRING","_init",79],"(",["T_CONSTANT_ENCAPSED_STRING","'catalog\/product'",79],",",["T_WHITESPACE"," ",79],["T_CONSTANT_ENCAPSED_STRING","'entity_id'",79],")",";",["T_WHITESPACE","\n    ",79],"}",["T_WHITESPACE","\n\n    ",80],["T_DOC_COMMENT","\/**\n     * Retreive specified attribute data for specified products from specified store\n     *\n     * @param array $products\n     * @param array $attributes\n     * @param int $store\n     * @return unknown\n     *\/",82],["T_WHITESPACE","\n    ",89],["T_PUBLIC","public",90],["T_WHITESPACE"," ",90],["T_FUNCTION","function",90],["T_WHITESPACE"," ",90],["T_STRING","getAttributeData",90],"(",["T_VARIABLE","$products",90],",",["T_WHITESPACE"," ",90],["T_VARIABLE","$attributes",90],",",["T_WHITESPACE"," ",90],["T_VARIABLE","$store",90],")",["T_WHITESPACE","\n    ",90],"{",["T_WHITESPACE","\n        ",91],["T_VARIABLE","$suffixes",92],["T_WHITESPACE"," ",92],"=",["T_WHITESPACE"," ",92],["T_ARRAY","array",92],"(",["T_CONSTANT_ENCAPSED_STRING","'decimal'",92],",",["T_WHITESPACE"," ",92],["T_CONSTANT_ENCAPSED_STRING","'varchar'",92],",",["T_WHITESPACE"," ",92],["T_CONSTANT_ENCAPSED_STRING","'int'",92],",",["T_WHITESPACE"," ",92],["T_CONSTANT_ENCAPSED_STRING","'text'",92],",",["T_WHITESPACE"," ",92],["T_CONSTANT_ENCAPSED_STRING","'datetime'",92],")",";",["T_WHITESPACE","\n        ",92],["T_IF","if",93],["T_WHITESPACE"," ",93],"(","!",["T_STRING","is_array",93],"(",["T_VARIABLE","$products",93],")",")",["T_WHITESPACE"," ",93],"{",["T_WHITESPACE","\n            ",93],["T_VARIABLE","$products",94],["T_WHITESPACE"," ",94],"=",["T_WHITESPACE"," ",94],["T_NEW","new",94],["T_WHITESPACE"," ",94],["T_STRING","Zend_Db_Expr",94],"(",["T_VARIABLE","$products",94],")",";",["T_WHITESPACE","\n        ",94],"}",["T_WHITESPACE","\n        ",95],["T_VARIABLE","$result",96],["T_WHITESPACE"," ",96],"=",["T_WHITESPACE"," ",96],["T_ARRAY","array",96],"(",")",";",["T_WHITESPACE","\n        ",96],["T_FOREACH","foreach",97],["T_WHITESPACE"," ",97],"(",["T_VARIABLE","$suffixes",97],["T_WHITESPACE"," ",97],["T_AS","as",97],["T_WHITESPACE"," ",97],["T_VARIABLE","$suffix",97],")",["T_WHITESPACE"," ",97],"{",["T_WHITESPACE","\n            ",97],["T_VARIABLE","$tableName",98],["T_WHITESPACE"," ",98],"=",["T_WHITESPACE"," ",98],"\"",["T_CURLY_OPEN","{",98],["T_VARIABLE","$this",98],["T_OBJECT_OPERATOR","->",98],["T_STRING","getTable",98],"(",["T_CONSTANT_ENCAPSED_STRING","'catalog\/product'",98],")","}",["T_ENCAPSED_AND_WHITESPACE","_",98],["T_CURLY_OPEN","{",98],["T_VARIABLE","$suffix",98],"}","\"",";",["T_WHITESPACE","\n            ",98],["T_VARIABLE","$condition",99],["T_WHITESPACE"," ",99],"=",["T_WHITESPACE"," ",99],"\"",["T_ENCAPSED_AND_WHITESPACE","product.entity_id = c.entity_id AND c.store_id = ",99],["T_CURLY_OPEN","{",99],["T_VARIABLE","$store",99],"}",["T_ENCAPSED_AND_WHITESPACE"," AND c.attribute_id = d.attribute_id",99],"\"",";",["T_WHITESPACE","\n            ",99],["T_VARIABLE","$defaultCondition",100],["T_WHITESPACE"," ",100],"=",["T_WHITESPACE"," ",100],["T_CONSTANT_ENCAPSED_STRING","\"product.entity_id = d.entity_id AND d.store_id = 0\"",100],";",["T_WHITESPACE","\n            ",100],["T_VARIABLE","$fields",101],["T_WHITESPACE"," ",101],"=",["T_WHITESPACE"," ",101],["T_ARRAY","array",101],"(",["T_WHITESPACE","\n                ",101],["T_CONSTANT_ENCAPSED_STRING","'entity_id'",102],",",["T_WHITESPACE","\n                ",102],["T_CONSTANT_ENCAPSED_STRING","'type_id'",103],",",["T_WHITESPACE","\n                ",103],["T_CONSTANT_ENCAPSED_STRING","'attribute_id'",104],["T_WHITESPACE","  ",104],["T_DOUBLE_ARROW","=>",104],["T_WHITESPACE"," ",104],["T_CONSTANT_ENCAPSED_STRING","'IF(c.value_id > 0, c.attribute_id, d.attribute_id)'",104],",",["T_WHITESPACE","\n                ",104],["T_CONSTANT_ENCAPSED_STRING","'value'",105],["T_WHITESPACE","         ",105],["T_DOUBLE_ARROW","=>",105],["T_WHITESPACE"," ",105],["T_CONSTANT_ENCAPSED_STRING","'IF(c.value_id > 0, c.value, d.value)'",105],["T_WHITESPACE","\n            ",105],")",";",["T_WHITESPACE","\n\n            ",106],["T_VARIABLE","$select",108],["T_WHITESPACE"," ",108],"=",["T_WHITESPACE"," ",108],["T_VARIABLE","$this",108],["T_OBJECT_OPERATOR","->",108],["T_STRING","_getReadAdapter",108],"(",")",["T_OBJECT_OPERATOR","->",108],["T_STRING","select",108],"(",")",["T_WHITESPACE","\n                ",108],["T_OBJECT_OPERATOR","->",109],["T_STRING","from",109],"(",["T_ARRAY","array",109],"(",["T_CONSTANT_ENCAPSED_STRING","'product'",109],["T_DOUBLE_ARROW","=>",109],["T_VARIABLE","$this",109],["T_OBJECT_OPERATOR","->",109],["T_STRING","getTable",109],"(",["T_CONSTANT_ENCAPSED_STRING","'catalog\/product'",109],")",")",",",["T_WHITESPACE"," ",109],["T_VARIABLE","$fields",109],")",["T_WHITESPACE","\n                ",109],["T_OBJECT_OPERATOR","->",110],["T_STRING","where",110],"(",["T_CONSTANT_ENCAPSED_STRING","'product.entity_id in (?)'",110],",",["T_WHITESPACE"," ",110],["T_VARIABLE","$products",110],")",["T_WHITESPACE","\n                ",110],["T_OBJECT_OPERATOR","->",111],["T_STRING","joinRight",111],"(",["T_ARRAY","array",111],"(",["T_CONSTANT_ENCAPSED_STRING","'d'",111],["T_DOUBLE_ARROW","=>",111],["T_VARIABLE","$tableName",111],")",",",["T_WHITESPACE"," ",111],["T_VARIABLE","$defaultCondition",111],",",["T_WHITESPACE"," ",111],["T_ARRAY","array",111],"(",")",")",["T_WHITESPACE","\n                ",111],["T_OBJECT_OPERATOR","->",112],["T_STRING","joinLeft",112],"(",["T_ARRAY","array",112],"(",["T_CONSTANT_ENCAPSED_STRING","'c'",112],["T_DOUBLE_ARROW","=>",112],["T_VARIABLE","$tableName",112],")",",",["T_WHITESPACE"," ",112],["T_VARIABLE","$condition",112],",",["T_WHITESPACE"," ",112],["T_ARRAY","array",112],"(",")",")",["T_WHITESPACE","\n                ",112],["T_OBJECT_OPERATOR","->",113],["T_STRING","where",113],"(",["T_CONSTANT_ENCAPSED_STRING","'c.attribute_id IN (?) OR d.attribute_id IN (?)'",113],",",["T_WHITESPACE"," ",113],["T_VARIABLE","$attributes",113],")",";",["T_WHITESPACE","\n            ",113],["T_VARIABLE","$part",114],["T_WHITESPACE"," ",114],"=",["T_WHITESPACE"," ",114],["T_VARIABLE","$this",114],["T_OBJECT_OPERATOR","->",114],["T_STRING","_getReadAdapter",114],"(",")",["T_OBJECT_OPERATOR","->",114],["T_STRING","fetchAll",114],"(",["T_VARIABLE","$select",114],")",";",["T_WHITESPACE","\n\n            ",114],["T_IF","if",116],["T_WHITESPACE"," ",116],"(",["T_STRING","is_array",116],"(",["T_VARIABLE","$part",116],")",")",["T_WHITESPACE"," ",116],"{",["T_WHITESPACE","\n                ",116],["T_VARIABLE","$result",117],["T_WHITESPACE"," ",117],"=",["T_WHITESPACE"," ",117],["T_STRING","array_merge",117],"(",["T_VARIABLE","$result",117],",",["T_WHITESPACE"," ",117],["T_VARIABLE","$part",117],")",";",["T_WHITESPACE","\n            ",117],"}",["T_WHITESPACE","\n        ",118],"}",["T_WHITESPACE","\n\n        ",119],["T_RETURN","return",121],["T_WHITESPACE"," ",121],["T_VARIABLE","$result",121],";",["T_WHITESPACE","\n    ",121],"}",["T_WHITESPACE","\n\n    ",122],["T_DOC_COMMENT","\/**\n     * Returns an array of product children\/parents\n     *\n     * @param int $store\n     * @param string $table\n     * @param string $idField\n     * @param string $whereField\n     * @param int $id\n     * @param array $additionalWheres\n     * @return mixed\n     *\/",124],["T_WHITESPACE","\n    ",134],["T_PUBLIC","public",135],["T_WHITESPACE"," ",135],["T_FUNCTION","function",135],["T_WHITESPACE"," ",135],["T_STRING","fetchLinkInformation",135],"(",["T_VARIABLE","$store",135],",",["T_WHITESPACE"," ",135],["T_VARIABLE","$table",135],",",["T_WHITESPACE"," ",135],["T_VARIABLE","$idField",135],",",["T_WHITESPACE"," ",135],["T_VARIABLE","$whereField",135],",",["T_WHITESPACE"," ",135],["T_VARIABLE","$id",135],",",["T_WHITESPACE"," ",135],["T_VARIABLE","$additionalWheres",135],["T_WHITESPACE"," ",135],"=",["T_WHITESPACE"," ",135],["T_ARRAY","array",135],"(",")",")",["T_WHITESPACE","\n    ",135],"{",["T_WHITESPACE","\n        ",136],["T_VARIABLE","$idsConditionSymbol",137],["T_WHITESPACE"," ",137],"=",["T_WHITESPACE"," ",137],["T_CONSTANT_ENCAPSED_STRING","\"= ?\"",137],";",["T_WHITESPACE","\n        ",137],["T_IF","if",138],["T_WHITESPACE"," ",138],"(",["T_STRING","is_array",138],"(",["T_VARIABLE","$id",138],")",")",["T_WHITESPACE"," ",138],"{",["T_WHITESPACE","\n            ",138],["T_VARIABLE","$idsConditionSymbol",139],["T_WHITESPACE"," ",139],"=",["T_WHITESPACE"," ",139],["T_CONSTANT_ENCAPSED_STRING","\"in (?)\"",139],";",["T_WHITESPACE","\n        ",139],"}",["T_WHITESPACE","\n\n        ",140],["T_VARIABLE","$select",142],["T_WHITESPACE"," ",142],"=",["T_WHITESPACE"," ",142],["T_VARIABLE","$this",142],["T_OBJECT_OPERATOR","->",142],["T_STRING","_getReadAdapter",142],"(",")",["T_OBJECT_OPERATOR","->",142],["T_STRING","select",142],"(",")",";",["T_WHITESPACE","\n        ",142],["T_VARIABLE","$select",143],["T_OBJECT_OPERATOR","->",143],["T_STRING","from",143],"(",["T_ARRAY","array",143],"(",["T_CONSTANT_ENCAPSED_STRING","'l'",143],["T_DOUBLE_ARROW","=>",143],["T_VARIABLE","$this",143],["T_OBJECT_OPERATOR","->",143],["T_STRING","getTable",143],"(",["T_VARIABLE","$table",143],")",")",",",["T_WHITESPACE"," ",143],["T_ARRAY","array",143],"(","\"",["T_ENCAPSED_AND_WHITESPACE","l.",143],["T_CURLY_OPEN","{",143],["T_VARIABLE","$idField",143],"}","\"",")",")",["T_WHITESPACE","\n            ",143],["T_OBJECT_OPERATOR","->",144],["T_STRING","where",144],"(","\"",["T_ENCAPSED_AND_WHITESPACE","l.",144],["T_CURLY_OPEN","{",144],["T_VARIABLE","$whereField",144],"}",["T_ENCAPSED_AND_WHITESPACE"," ",144],["T_CURLY_OPEN","{",144],["T_VARIABLE","$idsConditionSymbol",144],"}","\"",",",["T_WHITESPACE"," ",144],["T_VARIABLE","$id",144],")",";",["T_WHITESPACE","\n        ",144],["T_FOREACH","foreach",145],["T_WHITESPACE"," ",145],"(",["T_VARIABLE","$additionalWheres",145],["T_WHITESPACE"," ",145],["T_AS","as",145],["T_WHITESPACE"," ",145],["T_VARIABLE","$field",145],["T_DOUBLE_ARROW","=>",145],["T_VARIABLE","$condition",145],")",["T_WHITESPACE"," ",145],"{",["T_WHITESPACE","\n            ",145],["T_VARIABLE","$select",146],["T_OBJECT_OPERATOR","->",146],["T_STRING","where",146],"(","\"",["T_ENCAPSED_AND_WHITESPACE","l.",146],["T_VARIABLE","$field",146],["T_ENCAPSED_AND_WHITESPACE"," = ?",146],"\"",",",["T_WHITESPACE"," ",146],["T_VARIABLE","$condition",146],")",";",["T_WHITESPACE","\n        ",146],"}",["T_WHITESPACE","\n\n        ",147],["T_COMMENT","\/\/ add status filter\n",149],["T_WHITESPACE","        ",150],["T_VARIABLE","$this",150],["T_OBJECT_OPERATOR","->",150],["T_STRING","_addAttributeFilter",150],"(",["T_VARIABLE","$select",150],",",["T_WHITESPACE"," ",150],["T_CONSTANT_ENCAPSED_STRING","'status'",150],",",["T_WHITESPACE"," ",150],["T_CONSTANT_ENCAPSED_STRING","'l'",150],",",["T_WHITESPACE"," ",150],["T_VARIABLE","$idField",150],",",["T_WHITESPACE"," ",150],["T_VARIABLE","$store",150],",",["T_WHITESPACE","\n            ",150],["T_STRING","Mage_Catalog_Model_Product_Status",151],["T_DOUBLE_COLON","::",151],["T_STRING","STATUS_ENABLED",151],")",";",["T_WHITESPACE","\n        ",151],["T_COMMENT","\/\/ add website filter\n",152],["T_WHITESPACE","        ",153],["T_IF","if",153],["T_WHITESPACE"," ",153],"(",["T_VARIABLE","$websiteId",153],["T_WHITESPACE"," ",153],"=",["T_WHITESPACE"," ",153],["T_STRING","Mage",153],["T_DOUBLE_COLON","::",153],["T_STRING","app",153],"(",")",["T_OBJECT_OPERATOR","->",153],["T_STRING","getStore",153],"(",["T_VARIABLE","$store",153],")",["T_OBJECT_OPERATOR","->",153],["T_STRING","getWebsiteId",153],"(",")",")",["T_WHITESPACE"," ",153],"{",["T_WHITESPACE","\n            ",153],["T_VARIABLE","$select",154],["T_OBJECT_OPERATOR","->",154],["T_STRING","join",154],"(",["T_WHITESPACE","\n                ",154],["T_ARRAY","array",155],"(",["T_CONSTANT_ENCAPSED_STRING","'w'",155],["T_WHITESPACE"," ",155],["T_DOUBLE_ARROW","=>",155],["T_WHITESPACE"," ",155],["T_VARIABLE","$this",155],["T_OBJECT_OPERATOR","->",155],["T_STRING","getTable",155],"(",["T_CONSTANT_ENCAPSED_STRING","'catalog\/product_website'",155],")",")",",",["T_WHITESPACE","\n                ",155],"\"",["T_ENCAPSED_AND_WHITESPACE","l.",156],["T_CURLY_OPEN","{",156],["T_VARIABLE","$idField",156],"}",["T_ENCAPSED_AND_WHITESPACE","=w.product_id AND w.website_id=",156],["T_CURLY_OPEN","{",156],["T_VARIABLE","$websiteId",156],"}","\"",",",["T_WHITESPACE","\n                ",156],["T_ARRAY","array",157],"(",")",["T_WHITESPACE","\n            ",157],")",";",["T_WHITESPACE","\n        ",158],"}",["T_WHITESPACE","\n\n        ",159],["T_VARIABLE","$this",161],["T_OBJECT_OPERATOR","->",161],["T_STRING","_setLinkSelect",161],"(",["T_VARIABLE","$select",161],")",";",["T_WHITESPACE","\n        ",161],["T_VARIABLE","$this",162],["T_OBJECT_OPERATOR","->",162],["T_STRING","_prepareLinkFetchSelect",162],"(",["T_VARIABLE","$store",162],",",["T_WHITESPACE"," ",162],["T_VARIABLE","$table",162],",",["T_WHITESPACE"," ",162],["T_VARIABLE","$idField",162],",",["T_WHITESPACE"," ",162],["T_VARIABLE","$whereField",162],",",["T_WHITESPACE"," ",162],["T_VARIABLE","$id",162],",",["T_WHITESPACE"," ",162],["T_VARIABLE","$additionalWheres",162],")",";",["T_WHITESPACE","\n\n        ",162],["T_RETURN","return",164],["T_WHITESPACE"," ",164],["T_VARIABLE","$this",164],["T_OBJECT_OPERATOR","->",164],["T_STRING","_getWriteAdapter",164],"(",")",["T_OBJECT_OPERATOR","->",164],["T_STRING","fetchCol",164],"(",["T_VARIABLE","$this",164],["T_OBJECT_OPERATOR","->",164],["T_STRING","_getLinkSelect",164],"(",")",")",";",["T_WHITESPACE","\n    ",164],"}",["T_WHITESPACE","\n\n    ",165],["T_DOC_COMMENT","\/**\n     * Prepare select statement before 'fetchLinkInformation' function result fetch\n     *\n     * @param int $store\n     * @param string $table\n     * @param string $idField\n     * @param string $whereField\n     * @param int $id\n     * @param array $additionalWheres\n     *\/",167],["T_WHITESPACE","\n    ",176],["T_PROTECTED","protected",177],["T_WHITESPACE"," ",177],["T_FUNCTION","function",177],["T_WHITESPACE"," ",177],["T_STRING","_prepareLinkFetchSelect",177],"(",["T_VARIABLE","$store",177],",",["T_WHITESPACE"," ",177],["T_VARIABLE","$table",177],",",["T_WHITESPACE"," ",177],["T_VARIABLE","$idField",177],",",["T_WHITESPACE"," ",177],["T_VARIABLE","$whereField",177],",",["T_WHITESPACE"," ",177],["T_VARIABLE","$id",177],",",["T_WHITESPACE"," ",177],["T_VARIABLE","$additionalWheres",177],["T_WHITESPACE"," ",177],"=",["T_WHITESPACE"," ",177],["T_ARRAY","array",177],"(",")",")",["T_WHITESPACE","\n    ",177],"{",["T_WHITESPACE","\n\n    ",178],"}",["T_WHITESPACE","\n\n    ",180],["T_DOC_COMMENT","\/**\n     * Return minimal prices for specified products\n     *\n     * @param array $products\n     * @param array $priceAttributes\n     * @param int $store\n     * @return mixed\n     *\/",182],["T_WHITESPACE","\n    ",189],["T_PUBLIC","public",190],["T_WHITESPACE"," ",190],["T_FUNCTION","function",190],["T_WHITESPACE"," ",190],["T_STRING","getMinimalPrice",190],"(",["T_VARIABLE","$products",190],",",["T_WHITESPACE"," ",190],["T_VARIABLE","$priceAttributes",190],",",["T_WHITESPACE"," ",190],["T_VARIABLE","$store",190],")",["T_WHITESPACE","\n    ",190],"{",["T_WHITESPACE","\n        ",191],["T_VARIABLE","$website",192],["T_WHITESPACE"," ",192],"=",["T_WHITESPACE"," ",192],["T_STRING","Mage",192],["T_DOUBLE_COLON","::",192],["T_STRING","app",192],"(",")",["T_OBJECT_OPERATOR","->",192],["T_STRING","getStore",192],"(",["T_VARIABLE","$store",192],")",["T_OBJECT_OPERATOR","->",192],["T_STRING","getWebsiteId",192],"(",")",";",["T_WHITESPACE","\n\n        ",192],["T_VARIABLE","$fields",194],["T_WHITESPACE"," ",194],"=",["T_WHITESPACE"," ",194],["T_ARRAY","array",194],"(",["T_CONSTANT_ENCAPSED_STRING","'customer_group_id'",194],",",["T_WHITESPACE"," ",194],["T_CONSTANT_ENCAPSED_STRING","'minimal_value'",194],["T_DOUBLE_ARROW","=>",194],["T_CONSTANT_ENCAPSED_STRING","'MIN(value)'",194],")",";",["T_WHITESPACE","\n        ",194],["T_VARIABLE","$select",195],["T_WHITESPACE"," ",195],"=",["T_WHITESPACE"," ",195],["T_VARIABLE","$this",195],["T_OBJECT_OPERATOR","->",195],["T_STRING","_getReadAdapter",195],"(",")",["T_OBJECT_OPERATOR","->",195],["T_STRING","select",195],"(",")",["T_WHITESPACE","\n            ",195],["T_OBJECT_OPERATOR","->",196],["T_STRING","from",196],"(",["T_ARRAY","array",196],"(",["T_CONSTANT_ENCAPSED_STRING","'base'",196],["T_DOUBLE_ARROW","=>",196],["T_VARIABLE","$this",196],["T_OBJECT_OPERATOR","->",196],["T_STRING","getTable",196],"(",["T_CONSTANT_ENCAPSED_STRING","'catalogindex\/price'",196],")",")",",",["T_WHITESPACE"," ",196],["T_VARIABLE","$fields",196],")",["T_WHITESPACE","\n            ",196],["T_OBJECT_OPERATOR","->",197],["T_STRING","where",197],"(",["T_CONSTANT_ENCAPSED_STRING","'base.entity_id in (?)'",197],",",["T_WHITESPACE"," ",197],["T_VARIABLE","$products",197],")",["T_WHITESPACE","\n            ",197],["T_OBJECT_OPERATOR","->",198],["T_STRING","where",198],"(",["T_CONSTANT_ENCAPSED_STRING","'base.attribute_id in (?)'",198],",",["T_WHITESPACE"," ",198],["T_VARIABLE","$priceAttributes",198],")",["T_WHITESPACE","\n            ",198],["T_OBJECT_OPERATOR","->",199],["T_STRING","where",199],"(",["T_CONSTANT_ENCAPSED_STRING","'base.website_id = ?'",199],",",["T_WHITESPACE"," ",199],["T_VARIABLE","$website",199],")",["T_WHITESPACE","\n            ",199],["T_OBJECT_OPERATOR","->",200],["T_STRING","group",200],"(",["T_CONSTANT_ENCAPSED_STRING","'base.customer_group_id'",200],")",";",["T_WHITESPACE","\n        ",200],["T_RETURN","return",201],["T_WHITESPACE"," ",201],["T_VARIABLE","$this",201],["T_OBJECT_OPERATOR","->",201],["T_STRING","_getReadAdapter",201],"(",")",["T_OBJECT_OPERATOR","->",201],["T_STRING","fetchAll",201],"(",["T_VARIABLE","$select",201],")",";",["T_WHITESPACE","\n    ",201],"}",["T_WHITESPACE","\n\n    ",202],["T_DOC_COMMENT","\/**\n     * Return tier prices for specified product in specified website\n     *\n     * @param array $products\n     * @param int $website\n     * @return mixed\n     *\/",204],["T_WHITESPACE","\n    ",210],["T_PUBLIC","public",211],["T_WHITESPACE"," ",211],["T_FUNCTION","function",211],["T_WHITESPACE"," ",211],["T_STRING","getTierPrices",211],"(",["T_VARIABLE","$products",211],",",["T_WHITESPACE"," ",211],["T_VARIABLE","$website",211],")",["T_WHITESPACE","\n    ",211],"{",["T_WHITESPACE","\n        ",212],["T_VARIABLE","$fields",213],["T_WHITESPACE"," ",213],"=",["T_WHITESPACE"," ",213],["T_ARRAY","array",213],"(",["T_WHITESPACE","\n            ",213],["T_CONSTANT_ENCAPSED_STRING","'entity_id'",214],",",["T_WHITESPACE","\n            ",214],["T_CONSTANT_ENCAPSED_STRING","'type_id'",215],",",["T_WHITESPACE","\n            ",215],["T_CONSTANT_ENCAPSED_STRING","'c.customer_group_id'",216],",",["T_WHITESPACE","\n            ",216],["T_CONSTANT_ENCAPSED_STRING","'c.qty'",217],",",["T_WHITESPACE","\n            ",217],["T_CONSTANT_ENCAPSED_STRING","'c.value'",218],",",["T_WHITESPACE","\n            ",218],["T_CONSTANT_ENCAPSED_STRING","'c.all_groups'",219],",",["T_WHITESPACE","\n        ",219],")",";",["T_WHITESPACE","\n        ",220],["T_VARIABLE","$condition",221],["T_WHITESPACE"," ",221],"=",["T_WHITESPACE"," ",221],["T_CONSTANT_ENCAPSED_STRING","\"product.entity_id = c.entity_id\"",221],";",["T_WHITESPACE","\n\n        ",221],["T_VARIABLE","$select",223],["T_WHITESPACE"," ",223],"=",["T_WHITESPACE"," ",223],["T_VARIABLE","$this",223],["T_OBJECT_OPERATOR","->",223],["T_STRING","_getReadAdapter",223],"(",")",["T_OBJECT_OPERATOR","->",223],["T_STRING","select",223],"(",")",["T_WHITESPACE","\n            ",223],["T_OBJECT_OPERATOR","->",224],["T_STRING","from",224],"(",["T_ARRAY","array",224],"(",["T_CONSTANT_ENCAPSED_STRING","'product'",224],["T_DOUBLE_ARROW","=>",224],["T_VARIABLE","$this",224],["T_OBJECT_OPERATOR","->",224],["T_STRING","getTable",224],"(",["T_CONSTANT_ENCAPSED_STRING","'catalog\/product'",224],")",")",",",["T_WHITESPACE"," ",224],["T_VARIABLE","$fields",224],")",["T_WHITESPACE","\n            ",224],["T_OBJECT_OPERATOR","->",225],["T_STRING","joinLeft",225],"(",["T_ARRAY","array",225],"(",["T_CONSTANT_ENCAPSED_STRING","'c'",225],["T_DOUBLE_ARROW","=>",225],"\"",["T_CURLY_OPEN","{",225],["T_VARIABLE","$this",225],["T_OBJECT_OPERATOR","->",225],["T_STRING","getTable",225],"(",["T_CONSTANT_ENCAPSED_STRING","'catalog\/product'",225],")","}",["T_ENCAPSED_AND_WHITESPACE","_tier_price",225],"\"",")",",",["T_WHITESPACE"," ",225],["T_VARIABLE","$condition",225],",",["T_WHITESPACE"," ",225],["T_ARRAY","array",225],"(",")",")",["T_WHITESPACE","\n            ",225],["T_OBJECT_OPERATOR","->",226],["T_STRING","where",226],"(",["T_CONSTANT_ENCAPSED_STRING","'product.entity_id in (?)'",226],",",["T_WHITESPACE"," ",226],["T_VARIABLE","$products",226],")",";",["T_WHITESPACE","\n        ",226],["T_IF","if",227],["T_WHITESPACE"," ",227],"(",["T_STRING","Mage",227],["T_DOUBLE_COLON","::",227],["T_STRING","helper",227],"(",["T_CONSTANT_ENCAPSED_STRING","'catalog'",227],")",["T_OBJECT_OPERATOR","->",227],["T_STRING","isPriceGlobal",227],"(",")",")",["T_WHITESPACE","\n        ",227],"{",["T_WHITESPACE","\n            ",228],["T_VARIABLE","$select",229],["T_OBJECT_OPERATOR","->",229],["T_STRING","where",229],"(",["T_CONSTANT_ENCAPSED_STRING","'c.website_id=?'",229],",",["T_WHITESPACE"," ",229],["T_LNUMBER","0",229],")",";",["T_WHITESPACE","\n        ",229],"}",["T_WHITESPACE","\n        ",230],["T_ELSEIF","elseif",231],["T_WHITESPACE"," ",231],"(",["T_STRING","Mage",231],["T_DOUBLE_COLON","::",231],["T_STRING","app",231],"(",")",["T_OBJECT_OPERATOR","->",231],["T_STRING","getWebsite",231],"(",["T_VARIABLE","$website",231],")",["T_OBJECT_OPERATOR","->",231],["T_STRING","getBaseCurrencyCode",231],"(",")",["T_WHITESPACE"," ",231],["T_IS_NOT_EQUAL","!=",231],["T_WHITESPACE"," ",231],["T_STRING","Mage",231],["T_DOUBLE_COLON","::",231],["T_STRING","app",231],"(",")",["T_OBJECT_OPERATOR","->",231],["T_STRING","getBaseCurrencyCode",231],"(",")",")",["T_WHITESPACE"," ",231],"{",["T_WHITESPACE","\n            ",231],["T_VARIABLE","$select",232],["T_OBJECT_OPERATOR","->",232],["T_STRING","where",232],"(",["T_CONSTANT_ENCAPSED_STRING","'c.website_id=?'",232],",",["T_WHITESPACE"," ",232],["T_VARIABLE","$website",232],")",";",["T_WHITESPACE","\n        ",232],"}",["T_WHITESPACE","\n        ",233],["T_ELSE","else",234],["T_WHITESPACE"," ",234],"{",["T_WHITESPACE","\n            ",234],["T_VARIABLE","$select",235],["T_OBJECT_OPERATOR","->",235],["T_STRING","where",235],"(",["T_CONSTANT_ENCAPSED_STRING","'c.website_id IN(?)'",235],",",["T_WHITESPACE"," ",235],["T_ARRAY","array",235],"(",["T_LNUMBER","0",235],",",["T_WHITESPACE"," ",235],["T_VARIABLE","$website",235],")",")",";",["T_WHITESPACE","\n        ",235],"}",["T_WHITESPACE","\n\n        ",236],["T_RETURN","return",238],["T_WHITESPACE"," ",238],["T_VARIABLE","$this",238],["T_OBJECT_OPERATOR","->",238],["T_STRING","_getReadAdapter",238],"(",")",["T_OBJECT_OPERATOR","->",238],["T_STRING","fetchAll",238],"(",["T_VARIABLE","$select",238],")",";",["T_WHITESPACE","\n    ",238],"}",["T_WHITESPACE","\n\n    ",239],["T_DOC_COMMENT","\/**\n     * Add attribute filter to select\n     *\n     * @param Varien_Db_Select $select\n     * @param string $attributeCode\n     * @param string $table the main table name or alias\n     * @param string $field entity_id field name\n     * @param int $store\n     * @param int|string|array $value the filter value\n     * @return Mage_CatalogIndex_Model_Resource_Data_Abstract\n     *\/",241],["T_WHITESPACE","\n    ",251],["T_PROTECTED","protected",252],["T_WHITESPACE"," ",252],["T_FUNCTION","function",252],["T_WHITESPACE"," ",252],["T_STRING","_addAttributeFilter",252],"(",["T_STRING","Varien_Db_Select",252],["T_WHITESPACE"," ",252],["T_VARIABLE","$select",252],",",["T_WHITESPACE"," ",252],["T_VARIABLE","$attributeCode",252],",",["T_WHITESPACE"," ",252],["T_VARIABLE","$table",252],",",["T_WHITESPACE"," ",252],["T_VARIABLE","$field",252],",",["T_WHITESPACE"," ",252],["T_VARIABLE","$store",252],",",["T_WHITESPACE"," ",252],["T_VARIABLE","$value",252],")",["T_WHITESPACE","\n    ",252],"{",["T_WHITESPACE","\n        ",253],["T_VARIABLE","$adapter",254],["T_WHITESPACE"," ",254],"=",["T_WHITESPACE"," ",254],["T_VARIABLE","$this",254],["T_OBJECT_OPERATOR","->",254],["T_STRING","_getReadAdapter",254],"(",")",";",["T_WHITESPACE","\n        ",254],["T_VARIABLE","$attribute",255],["T_WHITESPACE"," ",255],"=",["T_WHITESPACE"," ",255],["T_STRING","Mage",255],["T_DOUBLE_COLON","::",255],["T_STRING","getSingleton",255],"(",["T_CONSTANT_ENCAPSED_STRING","'eav\/config'",255],")",["T_WHITESPACE","\n            ",255],["T_OBJECT_OPERATOR","->",256],["T_STRING","getAttribute",256],"(",["T_STRING","Mage_Catalog_Model_Product",256],["T_DOUBLE_COLON","::",256],["T_STRING","ENTITY",256],",",["T_WHITESPACE"," ",256],["T_VARIABLE","$attributeCode",256],")",";",["T_WHITESPACE","\n        ",256],["T_COMMENT","\/* @var $attribute Mage_Catalog_Model_Resource_Eav_Attribute *\/",257],["T_WHITESPACE","\n        ",257],["T_VARIABLE","$attributeTable",258],["T_WHITESPACE"," ",258],"=",["T_WHITESPACE"," ",258],["T_VARIABLE","$attribute",258],["T_OBJECT_OPERATOR","->",258],["T_STRING","getBackend",258],"(",")",["T_OBJECT_OPERATOR","->",258],["T_STRING","getTable",258],"(",")",";",["T_WHITESPACE","\n        ",258],["T_IF","if",259],["T_WHITESPACE"," ",259],"(",["T_VARIABLE","$attribute",259],["T_OBJECT_OPERATOR","->",259],["T_STRING","getBackendType",259],"(",")",["T_WHITESPACE"," ",259],["T_IS_EQUAL","==",259],["T_WHITESPACE"," ",259],["T_CONSTANT_ENCAPSED_STRING","'static'",259],")",["T_WHITESPACE"," ",259],"{",["T_WHITESPACE","\n            ",259],["T_VARIABLE","$tableAlias",260],["T_WHITESPACE"," ",260],"=",["T_WHITESPACE"," ",260],["T_STRING","sprintf",260],"(",["T_CONSTANT_ENCAPSED_STRING","'t_%s'",260],",",["T_WHITESPACE"," ",260],["T_VARIABLE","$attribute",260],["T_OBJECT_OPERATOR","->",260],["T_STRING","getAttributeCode",260],"(",")",")",";",["T_WHITESPACE","\n            ",260],["T_VARIABLE","$joinCond",261],["T_WHITESPACE","   ",261],"=",["T_WHITESPACE"," ",261],["T_STRING","join",261],"(",["T_CONSTANT_ENCAPSED_STRING","' AND '",261],",",["T_WHITESPACE"," ",261],["T_ARRAY","array",261],"(",["T_WHITESPACE","\n                ",261],["T_STRING","sprintf",262],"(",["T_CONSTANT_ENCAPSED_STRING","'`%s`.`%s`=`%s`.`entity_id`'",262],",",["T_WHITESPACE"," ",262],["T_VARIABLE","$table",262],",",["T_WHITESPACE"," ",262],["T_VARIABLE","$field",262],",",["T_WHITESPACE"," ",262],["T_VARIABLE","$tableAlias",262],")",["T_WHITESPACE","\n            ",262],")",")",";",["T_WHITESPACE","\n            ",263],["T_VARIABLE","$select",264],["T_WHITESPACE","\n                ",264],["T_OBJECT_OPERATOR","->",265],["T_STRING","join",265],"(",["T_WHITESPACE","\n                    ",265],["T_ARRAY","array",266],"(",["T_VARIABLE","$tableAlias",266],["T_WHITESPACE"," ",266],["T_DOUBLE_ARROW","=>",266],["T_WHITESPACE"," ",266],["T_VARIABLE","$attributeTable",266],")",",",["T_WHITESPACE","\n                    ",266],["T_VARIABLE","$joinCond",267],",",["T_WHITESPACE","\n                    ",267],["T_ARRAY","array",268],"(",")",")",["T_WHITESPACE","\n                ",268],["T_OBJECT_OPERATOR","->",269],["T_STRING","where",269],"(",["T_STRING","sprintf",269],"(",["T_CONSTANT_ENCAPSED_STRING","'%s.%s IN(?)'",269],",",["T_WHITESPACE"," ",269],["T_VARIABLE","$tableAlias",269],",",["T_WHITESPACE"," ",269],["T_VARIABLE","$attribute",269],["T_OBJECT_OPERATOR","->",269],["T_STRING","getAttributeCode",269],"(",")",")",",",["T_WHITESPACE"," ",269],["T_VARIABLE","$value",269],")",";",["T_WHITESPACE","\n        ",269],"}",["T_WHITESPACE","\n        ",270],["T_ELSEIF","elseif",271],["T_WHITESPACE"," ",271],"(",["T_VARIABLE","$attribute",271],["T_OBJECT_OPERATOR","->",271],["T_STRING","isScopeGlobal",271],"(",")",")",["T_WHITESPACE"," ",271],"{",["T_WHITESPACE","\n            ",271],["T_VARIABLE","$tableAlias",272],["T_WHITESPACE"," ",272],"=",["T_WHITESPACE"," ",272],["T_STRING","sprintf",272],"(",["T_CONSTANT_ENCAPSED_STRING","'t_%s'",272],",",["T_WHITESPACE"," ",272],["T_VARIABLE","$attribute",272],["T_OBJECT_OPERATOR","->",272],["T_STRING","getAttributeCode",272],"(",")",")",";",["T_WHITESPACE","\n            ",272],["T_VARIABLE","$joinCond",273],["T_WHITESPACE","   ",273],"=",["T_WHITESPACE"," ",273],["T_STRING","join",273],"(",["T_CONSTANT_ENCAPSED_STRING","' AND '",273],",",["T_WHITESPACE"," ",273],["T_ARRAY","array",273],"(",["T_WHITESPACE","\n                ",273],["T_STRING","sprintf",274],"(",["T_CONSTANT_ENCAPSED_STRING","'`%s`.`%s`=`%s`.`entity_id`'",274],",",["T_WHITESPACE"," ",274],["T_VARIABLE","$table",274],",",["T_WHITESPACE"," ",274],["T_VARIABLE","$field",274],",",["T_WHITESPACE"," ",274],["T_VARIABLE","$tableAlias",274],")",",",["T_WHITESPACE","\n                ",274],["T_VARIABLE","$adapter",275],["T_OBJECT_OPERATOR","->",275],["T_STRING","quoteInto",275],"(",["T_STRING","sprintf",275],"(",["T_CONSTANT_ENCAPSED_STRING","'`%s`.`attribute_id`=?'",275],",",["T_WHITESPACE"," ",275],["T_VARIABLE","$tableAlias",275],")",",",["T_WHITESPACE"," ",275],["T_VARIABLE","$attribute",275],["T_OBJECT_OPERATOR","->",275],["T_STRING","getAttributeId",275],"(",")",")",",",["T_WHITESPACE","\n                ",275],["T_VARIABLE","$adapter",276],["T_OBJECT_OPERATOR","->",276],["T_STRING","quoteInto",276],"(",["T_STRING","sprintf",276],"(",["T_CONSTANT_ENCAPSED_STRING","'`%s`.`store_id`=?'",276],",",["T_WHITESPACE"," ",276],["T_VARIABLE","$tableAlias",276],")",",",["T_WHITESPACE"," ",276],["T_LNUMBER","0",276],")",["T_WHITESPACE","\n            ",276],")",")",";",["T_WHITESPACE","\n            ",277],["T_VARIABLE","$select",278],["T_WHITESPACE","\n                ",278],["T_OBJECT_OPERATOR","->",279],["T_STRING","join",279],"(",["T_WHITESPACE","\n                    ",279],["T_ARRAY","array",280],"(",["T_VARIABLE","$tableAlias",280],["T_WHITESPACE"," ",280],["T_DOUBLE_ARROW","=>",280],["T_WHITESPACE"," ",280],["T_VARIABLE","$attributeTable",280],")",",",["T_WHITESPACE","\n                    ",280],["T_VARIABLE","$joinCond",281],",",["T_WHITESPACE","\n                    ",281],["T_ARRAY","array",282],"(",")",")",["T_WHITESPACE","\n                ",282],["T_OBJECT_OPERATOR","->",283],["T_STRING","where",283],"(",["T_STRING","sprintf",283],"(",["T_CONSTANT_ENCAPSED_STRING","'%s.value IN(?)'",283],",",["T_WHITESPACE"," ",283],["T_VARIABLE","$tableAlias",283],")",",",["T_WHITESPACE"," ",283],["T_VARIABLE","$value",283],")",";",["T_WHITESPACE","\n        ",283],"}",["T_WHITESPACE","\n        ",284],["T_ELSE","else",285],["T_WHITESPACE"," ",285],"{",["T_WHITESPACE","\n            ",285],["T_VARIABLE","$tableGlobal",286],["T_WHITESPACE","    ",286],"=",["T_WHITESPACE"," ",286],["T_STRING","sprintf",286],"(",["T_CONSTANT_ENCAPSED_STRING","'t_global_%s'",286],",",["T_WHITESPACE"," ",286],["T_VARIABLE","$attribute",286],["T_OBJECT_OPERATOR","->",286],["T_STRING","getAttributeCode",286],"(",")",")",";",["T_WHITESPACE","\n            ",286],["T_VARIABLE","$tableStore",287],["T_WHITESPACE","     ",287],"=",["T_WHITESPACE"," ",287],["T_STRING","sprintf",287],"(",["T_CONSTANT_ENCAPSED_STRING","'t_store_%s'",287],",",["T_WHITESPACE"," ",287],["T_VARIABLE","$attribute",287],["T_OBJECT_OPERATOR","->",287],["T_STRING","getAttributeCode",287],"(",")",")",";",["T_WHITESPACE","\n            ",287],["T_VARIABLE","$joinCondGlobal",288],["T_WHITESPACE"," ",288],"=",["T_WHITESPACE"," ",288],["T_STRING","join",288],"(",["T_CONSTANT_ENCAPSED_STRING","' AND '",288],",",["T_WHITESPACE"," ",288],["T_ARRAY","array",288],"(",["T_WHITESPACE","\n                ",288],["T_STRING","sprintf",289],"(",["T_CONSTANT_ENCAPSED_STRING","'`%s`.`%s`=`%s`.`entity_id`'",289],",",["T_WHITESPACE"," ",289],["T_VARIABLE","$table",289],",",["T_WHITESPACE"," ",289],["T_VARIABLE","$field",289],",",["T_WHITESPACE"," ",289],["T_VARIABLE","$tableGlobal",289],")",",",["T_WHITESPACE","\n                ",289],["T_VARIABLE","$adapter",290],["T_OBJECT_OPERATOR","->",290],["T_STRING","quoteInto",290],"(",["T_STRING","sprintf",290],"(",["T_CONSTANT_ENCAPSED_STRING","'`%s`.`attribute_id`=?'",290],",",["T_WHITESPACE"," ",290],["T_VARIABLE","$tableGlobal",290],")",",",["T_WHITESPACE"," ",290],["T_VARIABLE","$attribute",290],["T_OBJECT_OPERATOR","->",290],["T_STRING","getAttributeId",290],"(",")",")",",",["T_WHITESPACE","\n                ",290],["T_VARIABLE","$adapter",291],["T_OBJECT_OPERATOR","->",291],["T_STRING","quoteInto",291],"(",["T_STRING","sprintf",291],"(",["T_CONSTANT_ENCAPSED_STRING","'`%s`.`store_id`=?'",291],",",["T_WHITESPACE"," ",291],["T_VARIABLE","$tableGlobal",291],")",",",["T_WHITESPACE"," ",291],["T_LNUMBER","0",291],")",["T_WHITESPACE","\n            ",291],")",")",";",["T_WHITESPACE","\n            ",292],["T_VARIABLE","$joinCondStore",293],["T_WHITESPACE","  ",293],"=",["T_WHITESPACE"," ",293],["T_STRING","join",293],"(",["T_CONSTANT_ENCAPSED_STRING","' AND '",293],",",["T_WHITESPACE"," ",293],["T_ARRAY","array",293],"(",["T_WHITESPACE","\n                ",293],["T_STRING","sprintf",294],"(",["T_CONSTANT_ENCAPSED_STRING","'`%s`.`entity_id`=`%s`.`entity_id`'",294],",",["T_WHITESPACE"," ",294],["T_VARIABLE","$tableGlobal",294],",",["T_WHITESPACE"," ",294],["T_VARIABLE","$tableStore",294],")",",",["T_WHITESPACE","\n                ",294],["T_STRING","sprintf",295],"(",["T_CONSTANT_ENCAPSED_STRING","'`%s`.`attribute_id`=`%s`.`attribute_id`'",295],",",["T_WHITESPACE"," ",295],["T_VARIABLE","$tableGlobal",295],",",["T_WHITESPACE"," ",295],["T_VARIABLE","$tableStore",295],")",",",["T_WHITESPACE","\n                ",295],["T_VARIABLE","$adapter",296],["T_OBJECT_OPERATOR","->",296],["T_STRING","quoteInto",296],"(",["T_STRING","sprintf",296],"(",["T_CONSTANT_ENCAPSED_STRING","'`%s`.`store_id`=?'",296],",",["T_WHITESPACE"," ",296],["T_VARIABLE","$tableStore",296],")",",",["T_WHITESPACE"," ",296],["T_VARIABLE","$store",296],")",["T_WHITESPACE","\n            ",296],")",")",";",["T_WHITESPACE","\n            ",297],["T_VARIABLE","$whereCond",298],["T_WHITESPACE","      ",298],"=",["T_WHITESPACE"," ",298],["T_STRING","sprintf",298],"(",["T_CONSTANT_ENCAPSED_STRING","'IF(`%s`.`value_id`>0, `%s`.`value`, `%s`.`value`) IN(?)'",298],",",["T_WHITESPACE","\n                ",298],["T_VARIABLE","$tableStore",299],",",["T_WHITESPACE"," ",299],["T_VARIABLE","$tableStore",299],",",["T_WHITESPACE"," ",299],["T_VARIABLE","$tableGlobal",299],")",";",["T_WHITESPACE","\n\n            ",299],["T_VARIABLE","$select",301],["T_WHITESPACE","\n                ",301],["T_OBJECT_OPERATOR","->",302],["T_STRING","join",302],"(",["T_WHITESPACE","\n                    ",302],["T_ARRAY","array",303],"(",["T_VARIABLE","$tableGlobal",303],["T_WHITESPACE"," ",303],["T_DOUBLE_ARROW","=>",303],["T_WHITESPACE"," ",303],["T_VARIABLE","$attributeTable",303],")",",",["T_WHITESPACE","\n                    ",303],["T_VARIABLE","$joinCondGlobal",304],",",["T_WHITESPACE","\n                    ",304],["T_ARRAY","array",305],"(",")",")",["T_WHITESPACE","\n                ",305],["T_OBJECT_OPERATOR","->",306],["T_STRING","joinLeft",306],"(",["T_WHITESPACE","\n                    ",306],["T_ARRAY","array",307],"(",["T_VARIABLE","$tableStore",307],["T_WHITESPACE"," ",307],["T_DOUBLE_ARROW","=>",307],["T_WHITESPACE"," ",307],["T_VARIABLE","$attributeTable",307],")",",",["T_WHITESPACE","\n                    ",307],["T_VARIABLE","$joinCondStore",308],",",["T_WHITESPACE","\n                    ",308],["T_ARRAY","array",309],"(",")",")",["T_WHITESPACE","\n                ",309],["T_OBJECT_OPERATOR","->",310],["T_STRING","where",310],"(",["T_VARIABLE","$whereCond",310],",",["T_WHITESPACE"," ",310],["T_VARIABLE","$value",310],")",";",["T_WHITESPACE","\n        ",310],"}",["T_WHITESPACE","\n\n        ",311],["T_RETURN","return",313],["T_WHITESPACE"," ",313],["T_VARIABLE","$this",313],";",["T_WHITESPACE","\n    ",313],"}",["T_WHITESPACE","\n",314],"}",["T_WHITESPACE","\n",315]]
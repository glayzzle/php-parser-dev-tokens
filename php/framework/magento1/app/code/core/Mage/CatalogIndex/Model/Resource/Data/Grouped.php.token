[["T_OPEN_TAG","<?php\n",1],["T_DOC_COMMENT","\/**\n * Magento\n *\n * NOTICE OF LICENSE\n *\n * This source file is subject to the Open Software License (OSL 3.0)\n * that is bundled with this package in the file LICENSE.txt.\n * It is also available through the world-wide-web at this URL:\n * http:\/\/opensource.org\/licenses\/osl-3.0.php\n * If you did not receive a copy of the license and are unable to\n * obtain it through the world-wide-web, please send an email\n * to license@magento.com so we can send you a copy immediately.\n *\n * DISCLAIMER\n *\n * Do not edit or add to this file if you wish to upgrade Magento to newer\n * versions in the future. If you wish to customize Magento for your\n * needs please refer to http:\/\/www.magento.com for more information.\n *\n * @category    Mage\n * @package     Mage_CatalogIndex\n * @copyright  Copyright (c) 2006-2016 X.commerce, Inc. and affiliates (http:\/\/www.magento.com)\n * @license    http:\/\/opensource.org\/licenses\/osl-3.0.php  Open Software License (OSL 3.0)\n *\/",2],["T_WHITESPACE","\n\n\n",25],["T_DOC_COMMENT","\/**\n * CatalogIndex Grouped Products Data Retriever Resource Model\n *\n * @category    Mage\n * @package     Mage_CatalogIndex\n * @author      Magento Core Team <core@magentocommerce.com>\n *\/",28],["T_WHITESPACE","\n",34],["T_CLASS","class",35],["T_WHITESPACE"," ",35],["T_STRING","Mage_CatalogIndex_Model_Resource_Data_Grouped",35],["T_WHITESPACE"," ",35],["T_EXTENDS","extends",35],["T_WHITESPACE"," ",35],["T_STRING","Mage_CatalogIndex_Model_Resource_Data_Abstract",35],["T_WHITESPACE","\n",35],"{",["T_WHITESPACE","\n    ",36],["T_DOC_COMMENT","\/**\n     * Return minimal prices for specified products\n     *\n     * @param array $products\n     * @param array $priceAttributes\n     * @param int $store\n     * @return array\n     *\/",37],["T_WHITESPACE","\n    ",44],["T_PUBLIC","public",45],["T_WHITESPACE"," ",45],["T_FUNCTION","function",45],["T_WHITESPACE"," ",45],["T_STRING","getMinimalPrice",45],"(",["T_VARIABLE","$products",45],",",["T_WHITESPACE"," ",45],["T_VARIABLE","$priceAttributes",45],",",["T_WHITESPACE"," ",45],["T_VARIABLE","$store",45],")",["T_WHITESPACE","\n    ",45],"{",["T_WHITESPACE","\n        ",46],["T_VARIABLE","$result",47],["T_WHITESPACE"," ",47],"=",["T_WHITESPACE"," ",47],["T_ARRAY","array",47],"(",")",";",["T_WHITESPACE","\n        ",47],["T_VARIABLE","$store",48],["T_WHITESPACE","  ",48],"=",["T_WHITESPACE"," ",48],["T_STRING","Mage",48],["T_DOUBLE_COLON","::",48],["T_STRING","app",48],"(",")",["T_OBJECT_OPERATOR","->",48],["T_STRING","getStore",48],"(",["T_VARIABLE","$store",48],")",";",["T_WHITESPACE","\n\n        ",48],["T_VARIABLE","$select",50],["T_WHITESPACE"," ",50],"=",["T_WHITESPACE"," ",50],["T_VARIABLE","$this",50],["T_OBJECT_OPERATOR","->",50],["T_STRING","_getReadAdapter",50],"(",")",["T_OBJECT_OPERATOR","->",50],["T_STRING","select",50],"(",")",["T_WHITESPACE","\n            ",50],["T_OBJECT_OPERATOR","->",51],["T_STRING","from",51],"(",["T_VARIABLE","$this",51],["T_OBJECT_OPERATOR","->",51],["T_STRING","getTable",51],"(",["T_CONSTANT_ENCAPSED_STRING","'catalogindex\/price'",51],")",",",["T_WHITESPACE"," ",51],["T_ARRAY","array",51],"(",["T_WHITESPACE","\n                ",51],["T_CONSTANT_ENCAPSED_STRING","'customer_group_id'",52],",",["T_WHITESPACE"," ",52],["T_CONSTANT_ENCAPSED_STRING","'value'",52],",",["T_WHITESPACE"," ",52],["T_CONSTANT_ENCAPSED_STRING","'tax_class_id'",52],")",")",["T_WHITESPACE","\n            ",52],["T_OBJECT_OPERATOR","->",53],["T_STRING","where",53],"(",["T_CONSTANT_ENCAPSED_STRING","'entity_id IN(?)'",53],",",["T_WHITESPACE"," ",53],["T_VARIABLE","$products",53],")",["T_WHITESPACE","\n            ",53],["T_OBJECT_OPERATOR","->",54],["T_STRING","where",54],"(",["T_CONSTANT_ENCAPSED_STRING","'attribute_id IN(?)'",54],",",["T_WHITESPACE"," ",54],["T_VARIABLE","$priceAttributes",54],")",["T_WHITESPACE","\n            ",54],["T_OBJECT_OPERATOR","->",55],["T_STRING","where",55],"(",["T_CONSTANT_ENCAPSED_STRING","'website_id=?'",55],",",["T_WHITESPACE"," ",55],["T_VARIABLE","$store",55],["T_OBJECT_OPERATOR","->",55],["T_STRING","getWebsiteId",55],"(",")",")",";",["T_WHITESPACE","\n        ",55],["T_VARIABLE","$prices",56],["T_WHITESPACE"," ",56],"=",["T_WHITESPACE"," ",56],["T_VARIABLE","$select",56],["T_OBJECT_OPERATOR","->",56],["T_STRING","query",56],"(",")",["T_OBJECT_OPERATOR","->",56],["T_STRING","fetchAll",56],"(",")",";",["T_WHITESPACE","\n\n        ",56],["T_VARIABLE","$groups",58],["T_WHITESPACE"," ",58],"=",["T_WHITESPACE"," ",58],["T_STRING","Mage",58],["T_DOUBLE_COLON","::",58],["T_STRING","getSingleton",58],"(",["T_CONSTANT_ENCAPSED_STRING","'catalogindex\/retreiver'",58],")",["T_OBJECT_OPERATOR","->",58],["T_STRING","getCustomerGroups",58],"(",")",";",["T_WHITESPACE","\n        ",58],["T_FOREACH","foreach",59],["T_WHITESPACE"," ",59],"(",["T_VARIABLE","$groups",59],["T_WHITESPACE"," ",59],["T_AS","as",59],["T_WHITESPACE"," ",59],["T_VARIABLE","$group",59],")",["T_WHITESPACE"," ",59],"{",["T_WHITESPACE","\n            ",59],["T_VARIABLE","$resultMinimal",60],["T_WHITESPACE","      ",60],"=",["T_WHITESPACE"," ",60],["T_STRING","null",60],";",["T_WHITESPACE","\n            ",60],["T_VARIABLE","$resultTaxClassId",61],["T_WHITESPACE","   ",61],"=",["T_WHITESPACE"," ",61],["T_LNUMBER","0",61],";",["T_WHITESPACE","\n            ",61],["T_VARIABLE","$taxClassId",62],["T_WHITESPACE","         ",62],"=",["T_WHITESPACE"," ",62],["T_LNUMBER","0",62],";",["T_WHITESPACE","\n            ",62],["T_VARIABLE","$customerGroup",63],["T_WHITESPACE","      ",63],"=",["T_WHITESPACE"," ",63],["T_VARIABLE","$group",63],["T_OBJECT_OPERATOR","->",63],["T_STRING","getId",63],"(",")",";",["T_WHITESPACE","\n\n            ",63],["T_VARIABLE","$typedProducts",65],["T_WHITESPACE"," ",65],"=",["T_WHITESPACE"," ",65],["T_STRING","Mage",65],["T_DOUBLE_COLON","::",65],["T_STRING","getSingleton",65],"(",["T_CONSTANT_ENCAPSED_STRING","'catalogindex\/retreiver'",65],")",["T_WHITESPACE","\n                ",65],["T_OBJECT_OPERATOR","->",66],["T_STRING","assignProductTypes",66],"(",["T_VARIABLE","$products",66],")",";",["T_WHITESPACE","\n            ",66],["T_FOREACH","foreach",67],["T_WHITESPACE"," ",67],"(",["T_VARIABLE","$typedProducts",67],["T_WHITESPACE"," ",67],["T_AS","as",67],["T_WHITESPACE"," ",67],["T_VARIABLE","$type",67],["T_DOUBLE_ARROW","=>",67],["T_VARIABLE","$typeIds",67],")",["T_WHITESPACE"," ",67],"{",["T_WHITESPACE","\n                ",67],["T_VARIABLE","$retreiver",68],["T_WHITESPACE"," ",68],"=",["T_WHITESPACE"," ",68],["T_STRING","Mage",68],["T_DOUBLE_COLON","::",68],["T_STRING","getSingleton",68],"(",["T_CONSTANT_ENCAPSED_STRING","'catalogindex\/retreiver'",68],")",["T_OBJECT_OPERATOR","->",68],["T_STRING","getRetreiver",68],"(",["T_VARIABLE","$type",68],")",";",["T_WHITESPACE","\n                ",68],["T_FOREACH","foreach",69],["T_WHITESPACE"," ",69],"(",["T_VARIABLE","$typeIds",69],["T_WHITESPACE"," ",69],["T_AS","as",69],["T_WHITESPACE"," ",69],["T_VARIABLE","$id",69],")",["T_WHITESPACE"," ",69],"{",["T_WHITESPACE","\n                    ",69],["T_VARIABLE","$finalPrice",70],["T_WHITESPACE"," ",70],"=",["T_WHITESPACE"," ",70],["T_VARIABLE","$retreiver",70],["T_OBJECT_OPERATOR","->",70],["T_STRING","getFinalPrice",70],"(",["T_VARIABLE","$id",70],",",["T_WHITESPACE"," ",70],["T_VARIABLE","$store",70],",",["T_WHITESPACE"," ",70],["T_VARIABLE","$group",70],")",";",["T_WHITESPACE","\n                    ",70],["T_IF","if",71],["T_WHITESPACE"," ",71],"(","(",["T_STRING","null",71],["T_WHITESPACE"," ",71],["T_IS_IDENTICAL","===",71],["T_WHITESPACE"," ",71],["T_VARIABLE","$resultMinimal",71],")",["T_WHITESPACE"," ",71],["T_BOOLEAN_OR","||",71],["T_WHITESPACE"," ",71],"(",["T_VARIABLE","$finalPrice",71],["T_WHITESPACE"," ",71],"<",["T_WHITESPACE"," ",71],["T_VARIABLE","$resultMinimal",71],")",")",["T_WHITESPACE"," ",71],"{",["T_WHITESPACE","\n                        ",71],["T_VARIABLE","$resultMinimal",72],["T_WHITESPACE","    ",72],"=",["T_WHITESPACE"," ",72],["T_VARIABLE","$finalPrice",72],";",["T_WHITESPACE","\n                        ",72],["T_VARIABLE","$resultTaxClassId",73],["T_WHITESPACE"," ",73],"=",["T_WHITESPACE"," ",73],["T_VARIABLE","$retreiver",73],["T_OBJECT_OPERATOR","->",73],["T_STRING","getTaxClassId",73],"(",["T_VARIABLE","$id",73],",",["T_WHITESPACE"," ",73],["T_VARIABLE","$store",73],")",";",["T_WHITESPACE","\n                    ",73],"}",["T_WHITESPACE","\n\n                    ",74],["T_VARIABLE","$tiers",76],["T_WHITESPACE"," ",76],"=",["T_WHITESPACE"," ",76],["T_VARIABLE","$retreiver",76],["T_OBJECT_OPERATOR","->",76],["T_STRING","getTierPrices",76],"(",["T_VARIABLE","$id",76],",",["T_WHITESPACE"," ",76],["T_VARIABLE","$store",76],")",";",["T_WHITESPACE","\n                    ",76],["T_FOREACH","foreach",77],["T_WHITESPACE"," ",77],"(",["T_VARIABLE","$tiers",77],["T_WHITESPACE"," ",77],["T_AS","as",77],["T_WHITESPACE"," ",77],["T_VARIABLE","$tier",77],")",["T_WHITESPACE"," ",77],"{",["T_WHITESPACE","\n                        ",77],["T_IF","if",78],["T_WHITESPACE"," ",78],"(",["T_VARIABLE","$tier",78],"[",["T_CONSTANT_ENCAPSED_STRING","'customer_group_id'",78],"]",["T_WHITESPACE"," ",78],["T_IS_NOT_EQUAL","!=",78],["T_WHITESPACE"," ",78],["T_VARIABLE","$customerGroup",78],["T_WHITESPACE"," ",78],["T_BOOLEAN_AND","&&",78],["T_WHITESPACE"," ",78],"!",["T_VARIABLE","$tier",78],"[",["T_CONSTANT_ENCAPSED_STRING","'all_groups'",78],"]",")",["T_WHITESPACE"," ",78],"{",["T_WHITESPACE","\n                            ",78],["T_CONTINUE","continue",79],";",["T_WHITESPACE","\n                        ",79],"}",["T_WHITESPACE","\n                        ",80],["T_IF","if",81],["T_WHITESPACE"," ",81],"(","(",["T_STRING","null",81],["T_WHITESPACE"," ",81],["T_IS_IDENTICAL","===",81],["T_WHITESPACE"," ",81],["T_VARIABLE","$resultMinimal",81],")",["T_WHITESPACE"," ",81],["T_BOOLEAN_OR","||",81],["T_WHITESPACE"," ",81],"(",["T_VARIABLE","$tier",81],"[",["T_CONSTANT_ENCAPSED_STRING","'value'",81],"]",["T_WHITESPACE"," ",81],"<",["T_WHITESPACE"," ",81],["T_VARIABLE","$resultMinimal",81],")",")",["T_WHITESPACE"," ",81],"{",["T_WHITESPACE","\n                            ",81],["T_VARIABLE","$resultMinimal",82],["T_WHITESPACE","    ",82],"=",["T_WHITESPACE"," ",82],["T_VARIABLE","$tier",82],"[",["T_CONSTANT_ENCAPSED_STRING","'value'",82],"]",";",["T_WHITESPACE","\n                            ",82],["T_VARIABLE","$resultTaxClassId",83],["T_WHITESPACE"," ",83],"=",["T_WHITESPACE"," ",83],["T_VARIABLE","$retreiver",83],["T_OBJECT_OPERATOR","->",83],["T_STRING","getTaxClassId",83],"(",["T_VARIABLE","$tier",83],"[",["T_CONSTANT_ENCAPSED_STRING","'entity_id'",83],"]",",",["T_WHITESPACE"," ",83],["T_VARIABLE","$store",83],")",";",["T_WHITESPACE","\n                        ",83],"}",["T_WHITESPACE","\n                    ",84],"}",["T_WHITESPACE","\n                ",85],"}",["T_WHITESPACE","\n            ",86],"}",["T_WHITESPACE","\n\n            ",87],["T_FOREACH","foreach",89],["T_WHITESPACE"," ",89],"(",["T_VARIABLE","$prices",89],["T_WHITESPACE"," ",89],["T_AS","as",89],["T_WHITESPACE"," ",89],["T_VARIABLE","$one",89],")",["T_WHITESPACE"," ",89],"{",["T_WHITESPACE","\n                ",89],["T_IF","if",90],["T_WHITESPACE"," ",90],"(",["T_VARIABLE","$one",90],"[",["T_CONSTANT_ENCAPSED_STRING","'customer_group_id'",90],"]",["T_WHITESPACE"," ",90],["T_IS_NOT_EQUAL","!=",90],["T_WHITESPACE"," ",90],["T_VARIABLE","$customerGroup",90],")",["T_WHITESPACE"," ",90],"{",["T_WHITESPACE","\n                    ",90],["T_CONTINUE","continue",91],";",["T_WHITESPACE","\n                ",91],"}",["T_WHITESPACE","\n\n                ",92],["T_IF","if",94],["T_WHITESPACE"," ",94],"(","(",["T_STRING","null",94],["T_WHITESPACE"," ",94],["T_IS_IDENTICAL","===",94],["T_WHITESPACE"," ",94],["T_VARIABLE","$resultMinimal",94],")",["T_WHITESPACE"," ",94],["T_BOOLEAN_OR","||",94],["T_WHITESPACE"," ",94],"(",["T_VARIABLE","$one",94],"[",["T_CONSTANT_ENCAPSED_STRING","'value'",94],"]",["T_WHITESPACE"," ",94],"<",["T_WHITESPACE"," ",94],["T_VARIABLE","$resultMinimal",94],")",")",["T_WHITESPACE"," ",94],"{",["T_WHITESPACE","\n                    ",94],["T_VARIABLE","$resultMinimal",95],["T_WHITESPACE"," ",95],"=",["T_WHITESPACE"," ",95],["T_VARIABLE","$one",95],"[",["T_CONSTANT_ENCAPSED_STRING","'value'",95],"]",";",["T_WHITESPACE","\n                    ",95],["T_VARIABLE","$taxClassId",96],["T_WHITESPACE","    ",96],"=",["T_WHITESPACE"," ",96],["T_VARIABLE","$one",96],"[",["T_CONSTANT_ENCAPSED_STRING","'tax_class_id'",96],"]",";",["T_WHITESPACE","\n                ",96],"}",["T_WHITESPACE"," ",97],["T_ELSE","else",97],["T_WHITESPACE"," ",97],"{",["T_WHITESPACE","\n                    ",97],["T_VARIABLE","$taxClassId",98],["T_WHITESPACE"," ",98],"=",["T_WHITESPACE"," ",98],["T_VARIABLE","$resultTaxClassId",98],";",["T_WHITESPACE","\n                ",98],"}",["T_WHITESPACE","\n            ",99],"}",["T_WHITESPACE","\n\n            ",100],["T_IF","if",102],["T_WHITESPACE"," ",102],"(","!",["T_STRING","is_null",102],"(",["T_VARIABLE","$resultMinimal",102],")",")","{",["T_WHITESPACE","\n                ",102],["T_VARIABLE","$result",103],"[","]",["T_WHITESPACE"," ",103],"=",["T_WHITESPACE"," ",103],["T_ARRAY","array",103],"(",["T_WHITESPACE","\n                    ",103],["T_CONSTANT_ENCAPSED_STRING","'customer_group_id'",104],["T_WHITESPACE"," ",104],["T_DOUBLE_ARROW","=>",104],["T_WHITESPACE"," ",104],["T_VARIABLE","$customerGroup",104],",",["T_WHITESPACE","\n                    ",104],["T_CONSTANT_ENCAPSED_STRING","'minimal_value'",105],["T_WHITESPACE","     ",105],["T_DOUBLE_ARROW","=>",105],["T_WHITESPACE"," ",105],["T_VARIABLE","$resultMinimal",105],",",["T_WHITESPACE","\n                    ",105],["T_CONSTANT_ENCAPSED_STRING","'tax_class_id'",106],["T_WHITESPACE","      ",106],["T_DOUBLE_ARROW","=>",106],["T_WHITESPACE"," ",106],["T_VARIABLE","$taxClassId",106],["T_WHITESPACE","\n                ",106],")",";",["T_WHITESPACE","\n            ",107],"}",["T_WHITESPACE","\n        ",108],"}",["T_WHITESPACE","\n\n        ",109],["T_RETURN","return",111],["T_WHITESPACE"," ",111],["T_VARIABLE","$result",111],";",["T_WHITESPACE","\n    ",111],"}",["T_WHITESPACE","\n\n    ",112],["T_DOC_COMMENT","\/**\n     * Prepare select statement before 'fetchLinkInformation' function result fetch\n     *\n     * @param int $store\n     * @param string $table\n     * @param string $idField\n     * @param string $whereField\n     * @param int $id\n     * @param array $additionalWheres\n     *\/",114],["T_WHITESPACE","\n    ",123],["T_PROTECTED","protected",124],["T_WHITESPACE"," ",124],["T_FUNCTION","function",124],["T_WHITESPACE"," ",124],["T_STRING","_prepareLinkFetchSelect",124],"(",["T_VARIABLE","$store",124],",",["T_WHITESPACE"," ",124],["T_VARIABLE","$table",124],",",["T_WHITESPACE"," ",124],["T_VARIABLE","$idField",124],",",["T_WHITESPACE"," ",124],["T_VARIABLE","$whereField",124],",",["T_WHITESPACE"," ",124],["T_VARIABLE","$id",124],",",["T_WHITESPACE"," ",124],["T_VARIABLE","$additionalWheres",124],["T_WHITESPACE"," ",124],"=",["T_WHITESPACE"," ",124],["T_ARRAY","array",124],"(",")",")",["T_WHITESPACE","\n    ",124],"{",["T_WHITESPACE","\n        ",125],["T_VARIABLE","$this",126],["T_OBJECT_OPERATOR","->",126],["T_STRING","_addAttributeFilter",126],"(",["T_VARIABLE","$this",126],["T_OBJECT_OPERATOR","->",126],["T_STRING","_getLinkSelect",126],"(",")",",",["T_WHITESPACE"," ",126],["T_CONSTANT_ENCAPSED_STRING","'required_options'",126],",",["T_WHITESPACE"," ",126],["T_CONSTANT_ENCAPSED_STRING","'l'",126],",",["T_WHITESPACE"," ",126],["T_VARIABLE","$idField",126],",",["T_WHITESPACE"," ",126],["T_VARIABLE","$store",126],",",["T_WHITESPACE"," ",126],["T_LNUMBER","0",126],")",";",["T_WHITESPACE","\n    ",126],"}",["T_WHITESPACE","\n",127],"}",["T_WHITESPACE","\n",128]]
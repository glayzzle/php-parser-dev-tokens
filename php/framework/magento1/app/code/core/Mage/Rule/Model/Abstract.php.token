[["T_OPEN_TAG","<?php\n",1],["T_DOC_COMMENT","\/**\n * Magento\n *\n * NOTICE OF LICENSE\n *\n * This source file is subject to the Open Software License (OSL 3.0)\n * that is bundled with this package in the file LICENSE.txt.\n * It is also available through the world-wide-web at this URL:\n * http:\/\/opensource.org\/licenses\/osl-3.0.php\n * If you did not receive a copy of the license and are unable to\n * obtain it through the world-wide-web, please send an email\n * to license@magento.com so we can send you a copy immediately.\n *\n * DISCLAIMER\n *\n * Do not edit or add to this file if you wish to upgrade Magento to newer\n * versions in the future. If you wish to customize Magento for your\n * needs please refer to http:\/\/www.magento.com for more information.\n *\n * @category    Mage\n * @package     Mage_Rule\n * @copyright  Copyright (c) 2006-2016 X.commerce, Inc. and affiliates (http:\/\/www.magento.com)\n * @license    http:\/\/opensource.org\/licenses\/osl-3.0.php  Open Software License (OSL 3.0)\n *\/",2],["T_WHITESPACE","\n\n",25],["T_DOC_COMMENT","\/**\n * Abstract Rule entity data model\n *\n * @category Mage\n * @package Mage_Rule\n * @author Magento Core Team <core@magentocommerce.com>\n *\/",27],["T_WHITESPACE","\n",33],["T_ABSTRACT","abstract",34],["T_WHITESPACE"," ",34],["T_CLASS","class",34],["T_WHITESPACE"," ",34],["T_STRING","Mage_Rule_Model_Abstract",34],["T_WHITESPACE"," ",34],["T_EXTENDS","extends",34],["T_WHITESPACE"," ",34],["T_STRING","Mage_Core_Model_Abstract",34],["T_WHITESPACE","\n",34],"{",["T_WHITESPACE","\n    ",35],["T_DOC_COMMENT","\/**\n     * Store rule combine conditions model\n     *\n     * @var Mage_Rule_Model_Condition_Combine\n     *\/",36],["T_WHITESPACE","\n    ",40],["T_PROTECTED","protected",41],["T_WHITESPACE"," ",41],["T_VARIABLE","$_conditions",41],";",["T_WHITESPACE","\n\n    ",41],["T_DOC_COMMENT","\/**\n     * Store rule actions model\n     *\n     * @var Mage_Rule_Model_Action_Collection\n     *\/",43],["T_WHITESPACE","\n    ",47],["T_PROTECTED","protected",48],["T_WHITESPACE"," ",48],["T_VARIABLE","$_actions",48],";",["T_WHITESPACE","\n\n    ",48],["T_DOC_COMMENT","\/**\n     * Store rule form instance\n     *\n     * @var Varien_Data_Form\n     *\/",50],["T_WHITESPACE","\n    ",54],["T_PROTECTED","protected",55],["T_WHITESPACE"," ",55],["T_VARIABLE","$_form",55],";",["T_WHITESPACE","\n\n    ",55],["T_DOC_COMMENT","\/**\n     * Is model can be deleted flag\n     *\n     * @var bool\n     *\/",57],["T_WHITESPACE","\n    ",61],["T_PROTECTED","protected",62],["T_WHITESPACE"," ",62],["T_VARIABLE","$_isDeleteable",62],["T_WHITESPACE"," ",62],"=",["T_WHITESPACE"," ",62],["T_STRING","true",62],";",["T_WHITESPACE","\n\n    ",62],["T_DOC_COMMENT","\/**\n     * Is model readonly\n     *\n     * @var bool\n     *\/",64],["T_WHITESPACE","\n    ",68],["T_PROTECTED","protected",69],["T_WHITESPACE"," ",69],["T_VARIABLE","$_isReadonly",69],["T_WHITESPACE"," ",69],"=",["T_WHITESPACE"," ",69],["T_STRING","false",69],";",["T_WHITESPACE","\n\n    ",69],["T_DOC_COMMENT","\/**\n     * Getter for rule combine conditions instance\n     *\n     * @return Mage_Rule_Model_Condition_Combine\n     *\/",71],["T_WHITESPACE","\n    ",75],["T_ABSTRACT","abstract",76],["T_WHITESPACE"," ",76],["T_PUBLIC","public",76],["T_WHITESPACE"," ",76],["T_FUNCTION","function",76],["T_WHITESPACE"," ",76],["T_STRING","getConditionsInstance",76],"(",")",";",["T_WHITESPACE","\n\n    ",76],["T_DOC_COMMENT","\/**\n     * Getter for rule actions collection instance\n     *\n     * @return Mage_Rule_Model_Action_Collection\n     *\/",78],["T_WHITESPACE","\n    ",82],["T_ABSTRACT","abstract",83],["T_WHITESPACE"," ",83],["T_PUBLIC","public",83],["T_WHITESPACE"," ",83],["T_FUNCTION","function",83],["T_WHITESPACE"," ",83],["T_STRING","getActionsInstance",83],"(",")",";",["T_WHITESPACE","\n\n    ",83],["T_DOC_COMMENT","\/**\n     * Prepare select for condition\n     *\n     * @param int $storeId\n     * @return Varien_Db_Select\n     *\/",85],["T_WHITESPACE","\n    ",90],["T_PUBLIC","public",91],["T_WHITESPACE"," ",91],["T_FUNCTION","function",91],["T_WHITESPACE"," ",91],["T_STRING","getProductFlatSelect",91],"(",["T_VARIABLE","$storeId",91],")",["T_WHITESPACE","\n    ",91],"{",["T_WHITESPACE","\n        ",92],["T_DOC_COMMENT","\/** @var $resource Mage_Rule_Model_Resource_Abstract *\/",93],["T_WHITESPACE","\n        ",93],["T_VARIABLE","$resource",94],["T_WHITESPACE"," ",94],"=",["T_WHITESPACE"," ",94],["T_VARIABLE","$this",94],["T_OBJECT_OPERATOR","->",94],["T_STRING","getResource",94],"(",")",";",["T_WHITESPACE","\n\n        ",94],["T_RETURN","return",96],["T_WHITESPACE"," ",96],["T_VARIABLE","$resource",96],["T_OBJECT_OPERATOR","->",96],["T_STRING","getProductFlatSelect",96],"(",["T_VARIABLE","$storeId",96],",",["T_WHITESPACE"," ",96],["T_VARIABLE","$this",96],["T_OBJECT_OPERATOR","->",96],["T_STRING","getConditions",96],"(",")",")",";",["T_WHITESPACE","\n    ",96],"}",["T_WHITESPACE","\n\n    ",97],["T_DOC_COMMENT","\/**\n     * Prepare data before saving\n     *\n     * @return Mage_Rule_Model_Abstract\n     *\/",99],["T_WHITESPACE","\n    ",103],["T_PROTECTED","protected",104],["T_WHITESPACE"," ",104],["T_FUNCTION","function",104],["T_WHITESPACE"," ",104],["T_STRING","_beforeSave",104],"(",")",["T_WHITESPACE","\n    ",104],"{",["T_WHITESPACE","\n        ",105],["T_COMMENT","\/\/ Check if discount amount not negative\n",106],["T_WHITESPACE","        ",107],["T_IF","if",107],["T_WHITESPACE"," ",107],"(",["T_VARIABLE","$this",107],["T_OBJECT_OPERATOR","->",107],["T_STRING","hasDiscountAmount",107],"(",")",")",["T_WHITESPACE"," ",107],"{",["T_WHITESPACE","\n            ",107],["T_IF","if",108],["T_WHITESPACE"," ",108],"(",["T_INT_CAST","(int)",108],["T_VARIABLE","$this",108],["T_OBJECT_OPERATOR","->",108],["T_STRING","getDiscountAmount",108],"(",")",["T_WHITESPACE"," ",108],"<",["T_WHITESPACE"," ",108],["T_LNUMBER","0",108],")",["T_WHITESPACE"," ",108],"{",["T_WHITESPACE","\n                ",108],["T_STRING","Mage",109],["T_DOUBLE_COLON","::",109],["T_STRING","throwException",109],"(",["T_STRING","Mage",109],["T_DOUBLE_COLON","::",109],["T_STRING","helper",109],"(",["T_CONSTANT_ENCAPSED_STRING","'rule'",109],")",["T_OBJECT_OPERATOR","->",109],["T_STRING","__",109],"(",["T_CONSTANT_ENCAPSED_STRING","'Invalid discount amount.'",109],")",")",";",["T_WHITESPACE","\n            ",109],"}",["T_WHITESPACE","\n        ",110],"}",["T_WHITESPACE","\n\n        ",111],["T_COMMENT","\/\/ Serialize conditions\n",113],["T_WHITESPACE","        ",114],["T_IF","if",114],["T_WHITESPACE"," ",114],"(",["T_VARIABLE","$this",114],["T_OBJECT_OPERATOR","->",114],["T_STRING","getConditions",114],"(",")",")",["T_WHITESPACE"," ",114],"{",["T_WHITESPACE","\n            ",114],["T_VARIABLE","$this",115],["T_OBJECT_OPERATOR","->",115],["T_STRING","setConditionsSerialized",115],"(",["T_STRING","serialize",115],"(",["T_VARIABLE","$this",115],["T_OBJECT_OPERATOR","->",115],["T_STRING","getConditions",115],"(",")",["T_OBJECT_OPERATOR","->",115],["T_STRING","asArray",115],"(",")",")",")",";",["T_WHITESPACE","\n            ",115],["T_VARIABLE","$this",116],["T_OBJECT_OPERATOR","->",116],["T_STRING","unsConditions",116],"(",")",";",["T_WHITESPACE","\n        ",116],"}",["T_WHITESPACE","\n\n        ",117],["T_COMMENT","\/\/ Serialize actions\n",119],["T_WHITESPACE","        ",120],["T_IF","if",120],["T_WHITESPACE"," ",120],"(",["T_VARIABLE","$this",120],["T_OBJECT_OPERATOR","->",120],["T_STRING","getActions",120],"(",")",")",["T_WHITESPACE"," ",120],"{",["T_WHITESPACE","\n            ",120],["T_VARIABLE","$this",121],["T_OBJECT_OPERATOR","->",121],["T_STRING","setActionsSerialized",121],"(",["T_STRING","serialize",121],"(",["T_VARIABLE","$this",121],["T_OBJECT_OPERATOR","->",121],["T_STRING","getActions",121],"(",")",["T_OBJECT_OPERATOR","->",121],["T_STRING","asArray",121],"(",")",")",")",";",["T_WHITESPACE","\n            ",121],["T_VARIABLE","$this",122],["T_OBJECT_OPERATOR","->",122],["T_STRING","unsActions",122],"(",")",";",["T_WHITESPACE","\n        ",122],"}",["T_WHITESPACE","\n\n        ",123],["T_DOC_COMMENT","\/**\n         * Prepare website Ids if applicable and if they were set as string in comma separated format.\n         * Backwards compatibility.\n         *\/",125],["T_WHITESPACE","\n        ",128],["T_IF","if",129],["T_WHITESPACE"," ",129],"(",["T_VARIABLE","$this",129],["T_OBJECT_OPERATOR","->",129],["T_STRING","hasWebsiteIds",129],"(",")",")",["T_WHITESPACE"," ",129],"{",["T_WHITESPACE","\n            ",129],["T_VARIABLE","$websiteIds",130],["T_WHITESPACE"," ",130],"=",["T_WHITESPACE"," ",130],["T_VARIABLE","$this",130],["T_OBJECT_OPERATOR","->",130],["T_STRING","getWebsiteIds",130],"(",")",";",["T_WHITESPACE","\n            ",130],["T_IF","if",131],["T_WHITESPACE"," ",131],"(",["T_STRING","is_string",131],"(",["T_VARIABLE","$websiteIds",131],")",["T_WHITESPACE"," ",131],["T_BOOLEAN_AND","&&",131],["T_WHITESPACE"," ",131],"!",["T_EMPTY","empty",131],"(",["T_VARIABLE","$websiteIds",131],")",")",["T_WHITESPACE"," ",131],"{",["T_WHITESPACE","\n                ",131],["T_VARIABLE","$this",132],["T_OBJECT_OPERATOR","->",132],["T_STRING","setWebsiteIds",132],"(",["T_STRING","explode",132],"(",["T_CONSTANT_ENCAPSED_STRING","','",132],",",["T_WHITESPACE"," ",132],["T_VARIABLE","$websiteIds",132],")",")",";",["T_WHITESPACE","\n            ",132],"}",["T_WHITESPACE","\n        ",133],"}",["T_WHITESPACE","\n\n        ",134],["T_DOC_COMMENT","\/**\n         * Prepare customer group Ids if applicable and if they were set as string in comma separated format.\n         * Backwards compatibility.\n         *\/",136],["T_WHITESPACE","\n        ",139],["T_IF","if",140],["T_WHITESPACE"," ",140],"(",["T_VARIABLE","$this",140],["T_OBJECT_OPERATOR","->",140],["T_STRING","hasCustomerGroupIds",140],"(",")",")",["T_WHITESPACE"," ",140],"{",["T_WHITESPACE","\n            ",140],["T_VARIABLE","$groupIds",141],["T_WHITESPACE"," ",141],"=",["T_WHITESPACE"," ",141],["T_VARIABLE","$this",141],["T_OBJECT_OPERATOR","->",141],["T_STRING","getCustomerGroupIds",141],"(",")",";",["T_WHITESPACE","\n            ",141],["T_IF","if",142],["T_WHITESPACE"," ",142],"(",["T_STRING","is_string",142],"(",["T_VARIABLE","$groupIds",142],")",["T_WHITESPACE"," ",142],["T_BOOLEAN_AND","&&",142],["T_WHITESPACE"," ",142],"!",["T_EMPTY","empty",142],"(",["T_VARIABLE","$groupIds",142],")",")",["T_WHITESPACE"," ",142],"{",["T_WHITESPACE","\n                ",142],["T_VARIABLE","$this",143],["T_OBJECT_OPERATOR","->",143],["T_STRING","setCustomerGroupIds",143],"(",["T_STRING","explode",143],"(",["T_CONSTANT_ENCAPSED_STRING","','",143],",",["T_WHITESPACE"," ",143],["T_VARIABLE","$groupIds",143],")",")",";",["T_WHITESPACE","\n            ",143],"}",["T_WHITESPACE","\n        ",144],"}",["T_WHITESPACE","\n\n        ",145],["T_STRING","parent",147],["T_DOUBLE_COLON","::",147],["T_STRING","_beforeSave",147],"(",")",";",["T_WHITESPACE","\n        ",147],["T_RETURN","return",148],["T_WHITESPACE"," ",148],["T_VARIABLE","$this",148],";",["T_WHITESPACE","\n    ",148],"}",["T_WHITESPACE","\n\n    ",149],["T_DOC_COMMENT","\/**\n     * Set rule combine conditions model\n     *\n     * @param Mage_Rule_Model_Condition_Combine $conditions\n     *\n     * @return Mage_Rule_Model_Abstract\n     *\/",151],["T_WHITESPACE","\n    ",157],["T_PUBLIC","public",158],["T_WHITESPACE"," ",158],["T_FUNCTION","function",158],["T_WHITESPACE"," ",158],["T_STRING","setConditions",158],"(",["T_VARIABLE","$conditions",158],")",["T_WHITESPACE","\n    ",158],"{",["T_WHITESPACE","\n        ",159],["T_VARIABLE","$this",160],["T_OBJECT_OPERATOR","->",160],["T_STRING","_conditions",160],["T_WHITESPACE"," ",160],"=",["T_WHITESPACE"," ",160],["T_VARIABLE","$conditions",160],";",["T_WHITESPACE","\n        ",160],["T_RETURN","return",161],["T_WHITESPACE"," ",161],["T_VARIABLE","$this",161],";",["T_WHITESPACE","\n    ",161],"}",["T_WHITESPACE","\n\n    ",162],["T_DOC_COMMENT","\/**\n     * Retrieve rule combine conditions model\n     *\n     * @return Mage_Rule_Model_Condition_Combine\n     *\/",164],["T_WHITESPACE","\n    ",168],["T_PUBLIC","public",169],["T_WHITESPACE"," ",169],["T_FUNCTION","function",169],["T_WHITESPACE"," ",169],["T_STRING","getConditions",169],"(",")",["T_WHITESPACE","\n    ",169],"{",["T_WHITESPACE","\n        ",170],["T_IF","if",171],["T_WHITESPACE"," ",171],"(",["T_EMPTY","empty",171],"(",["T_VARIABLE","$this",171],["T_OBJECT_OPERATOR","->",171],["T_STRING","_conditions",171],")",")",["T_WHITESPACE"," ",171],"{",["T_WHITESPACE","\n            ",171],["T_VARIABLE","$this",172],["T_OBJECT_OPERATOR","->",172],["T_STRING","_resetConditions",172],"(",")",";",["T_WHITESPACE","\n        ",172],"}",["T_WHITESPACE","\n\n        ",173],["T_COMMENT","\/\/ Load rule conditions if it is applicable\n",175],["T_WHITESPACE","        ",176],["T_IF","if",176],["T_WHITESPACE"," ",176],"(",["T_VARIABLE","$this",176],["T_OBJECT_OPERATOR","->",176],["T_STRING","hasConditionsSerialized",176],"(",")",")",["T_WHITESPACE"," ",176],"{",["T_WHITESPACE","\n            ",176],["T_VARIABLE","$conditions",177],["T_WHITESPACE"," ",177],"=",["T_WHITESPACE"," ",177],["T_VARIABLE","$this",177],["T_OBJECT_OPERATOR","->",177],["T_STRING","getConditionsSerialized",177],"(",")",";",["T_WHITESPACE","\n            ",177],["T_IF","if",178],["T_WHITESPACE"," ",178],"(","!",["T_EMPTY","empty",178],"(",["T_VARIABLE","$conditions",178],")",")",["T_WHITESPACE"," ",178],"{",["T_WHITESPACE","\n                ",178],["T_VARIABLE","$conditions",179],["T_WHITESPACE"," ",179],"=",["T_WHITESPACE"," ",179],["T_STRING","unserialize",179],"(",["T_VARIABLE","$conditions",179],")",";",["T_WHITESPACE","\n                ",179],["T_IF","if",180],["T_WHITESPACE"," ",180],"(",["T_STRING","is_array",180],"(",["T_VARIABLE","$conditions",180],")",["T_WHITESPACE"," ",180],["T_BOOLEAN_AND","&&",180],["T_WHITESPACE"," ",180],"!",["T_EMPTY","empty",180],"(",["T_VARIABLE","$conditions",180],")",")",["T_WHITESPACE"," ",180],"{",["T_WHITESPACE","\n                    ",180],["T_VARIABLE","$this",181],["T_OBJECT_OPERATOR","->",181],["T_STRING","_conditions",181],["T_OBJECT_OPERATOR","->",181],["T_STRING","loadArray",181],"(",["T_VARIABLE","$conditions",181],")",";",["T_WHITESPACE","\n                ",181],"}",["T_WHITESPACE","\n            ",182],"}",["T_WHITESPACE","\n            ",183],["T_VARIABLE","$this",184],["T_OBJECT_OPERATOR","->",184],["T_STRING","unsConditionsSerialized",184],"(",")",";",["T_WHITESPACE","\n        ",184],"}",["T_WHITESPACE","\n\n        ",185],["T_RETURN","return",187],["T_WHITESPACE"," ",187],["T_VARIABLE","$this",187],["T_OBJECT_OPERATOR","->",187],["T_STRING","_conditions",187],";",["T_WHITESPACE","\n    ",187],"}",["T_WHITESPACE","\n\n    ",188],["T_DOC_COMMENT","\/**\n     * Set rule actions model\n     *\n     * @param Mage_Rule_Model_Action_Collection $actions\n     *\n     * @return Mage_Rule_Model_Abstract\n     *\/",190],["T_WHITESPACE","\n    ",196],["T_PUBLIC","public",197],["T_WHITESPACE"," ",197],["T_FUNCTION","function",197],["T_WHITESPACE"," ",197],["T_STRING","setActions",197],"(",["T_VARIABLE","$actions",197],")",["T_WHITESPACE","\n    ",197],"{",["T_WHITESPACE","\n        ",198],["T_VARIABLE","$this",199],["T_OBJECT_OPERATOR","->",199],["T_STRING","_actions",199],["T_WHITESPACE"," ",199],"=",["T_WHITESPACE"," ",199],["T_VARIABLE","$actions",199],";",["T_WHITESPACE","\n        ",199],["T_RETURN","return",200],["T_WHITESPACE"," ",200],["T_VARIABLE","$this",200],";",["T_WHITESPACE","\n    ",200],"}",["T_WHITESPACE","\n\n    ",201],["T_DOC_COMMENT","\/**\n     * Retrieve rule actions model\n     *\n     * @return Mage_Rule_Model_Action_Collection\n     *\/",203],["T_WHITESPACE","\n    ",207],["T_PUBLIC","public",208],["T_WHITESPACE"," ",208],["T_FUNCTION","function",208],["T_WHITESPACE"," ",208],["T_STRING","getActions",208],"(",")",["T_WHITESPACE","\n    ",208],"{",["T_WHITESPACE","\n        ",209],["T_IF","if",210],["T_WHITESPACE"," ",210],"(","!",["T_VARIABLE","$this",210],["T_OBJECT_OPERATOR","->",210],["T_STRING","_actions",210],")",["T_WHITESPACE"," ",210],"{",["T_WHITESPACE","\n            ",210],["T_VARIABLE","$this",211],["T_OBJECT_OPERATOR","->",211],["T_STRING","_resetActions",211],"(",")",";",["T_WHITESPACE","\n        ",211],"}",["T_WHITESPACE","\n\n        ",212],["T_COMMENT","\/\/ Load rule actions if it is applicable\n",214],["T_WHITESPACE","        ",215],["T_IF","if",215],["T_WHITESPACE"," ",215],"(",["T_VARIABLE","$this",215],["T_OBJECT_OPERATOR","->",215],["T_STRING","hasActionsSerialized",215],"(",")",")",["T_WHITESPACE"," ",215],"{",["T_WHITESPACE","\n            ",215],["T_VARIABLE","$actions",216],["T_WHITESPACE"," ",216],"=",["T_WHITESPACE"," ",216],["T_VARIABLE","$this",216],["T_OBJECT_OPERATOR","->",216],["T_STRING","getActionsSerialized",216],"(",")",";",["T_WHITESPACE","\n            ",216],["T_IF","if",217],["T_WHITESPACE"," ",217],"(","!",["T_EMPTY","empty",217],"(",["T_VARIABLE","$actions",217],")",")",["T_WHITESPACE"," ",217],"{",["T_WHITESPACE","\n                ",217],["T_VARIABLE","$actions",218],["T_WHITESPACE"," ",218],"=",["T_WHITESPACE"," ",218],["T_STRING","unserialize",218],"(",["T_VARIABLE","$actions",218],")",";",["T_WHITESPACE","\n                ",218],["T_IF","if",219],["T_WHITESPACE"," ",219],"(",["T_STRING","is_array",219],"(",["T_VARIABLE","$actions",219],")",["T_WHITESPACE"," ",219],["T_BOOLEAN_AND","&&",219],["T_WHITESPACE"," ",219],"!",["T_EMPTY","empty",219],"(",["T_VARIABLE","$actions",219],")",")",["T_WHITESPACE"," ",219],"{",["T_WHITESPACE","\n                    ",219],["T_VARIABLE","$this",220],["T_OBJECT_OPERATOR","->",220],["T_STRING","_actions",220],["T_OBJECT_OPERATOR","->",220],["T_STRING","loadArray",220],"(",["T_VARIABLE","$actions",220],")",";",["T_WHITESPACE","\n                ",220],"}",["T_WHITESPACE","\n            ",221],"}",["T_WHITESPACE","\n            ",222],["T_VARIABLE","$this",223],["T_OBJECT_OPERATOR","->",223],["T_STRING","unsActionsSerialized",223],"(",")",";",["T_WHITESPACE","\n        ",223],"}",["T_WHITESPACE","\n\n        ",224],["T_RETURN","return",226],["T_WHITESPACE"," ",226],["T_VARIABLE","$this",226],["T_OBJECT_OPERATOR","->",226],["T_STRING","_actions",226],";",["T_WHITESPACE","\n    ",226],"}",["T_WHITESPACE","\n\n    ",227],["T_DOC_COMMENT","\/**\n     * Reset rule combine conditions\n     *\n     * @param null|Mage_Rule_Model_Condition_Combine $conditions\n     *\n     * @return Mage_Rule_Model_Abstract\n     *\/",229],["T_WHITESPACE","\n    ",235],["T_PROTECTED","protected",236],["T_WHITESPACE"," ",236],["T_FUNCTION","function",236],["T_WHITESPACE"," ",236],["T_STRING","_resetConditions",236],"(",["T_VARIABLE","$conditions",236],["T_WHITESPACE"," ",236],"=",["T_WHITESPACE"," ",236],["T_STRING","null",236],")",["T_WHITESPACE","\n    ",236],"{",["T_WHITESPACE","\n        ",237],["T_IF","if",238],["T_WHITESPACE"," ",238],"(",["T_STRING","is_null",238],"(",["T_VARIABLE","$conditions",238],")",")",["T_WHITESPACE"," ",238],"{",["T_WHITESPACE","\n            ",238],["T_VARIABLE","$conditions",239],["T_WHITESPACE"," ",239],"=",["T_WHITESPACE"," ",239],["T_VARIABLE","$this",239],["T_OBJECT_OPERATOR","->",239],["T_STRING","getConditionsInstance",239],"(",")",";",["T_WHITESPACE","\n        ",239],"}",["T_WHITESPACE","\n        ",240],["T_VARIABLE","$conditions",241],["T_OBJECT_OPERATOR","->",241],["T_STRING","setRule",241],"(",["T_VARIABLE","$this",241],")",["T_OBJECT_OPERATOR","->",241],["T_STRING","setId",241],"(",["T_CONSTANT_ENCAPSED_STRING","'1'",241],")",["T_OBJECT_OPERATOR","->",241],["T_STRING","setPrefix",241],"(",["T_CONSTANT_ENCAPSED_STRING","'conditions'",241],")",";",["T_WHITESPACE","\n        ",241],["T_VARIABLE","$this",242],["T_OBJECT_OPERATOR","->",242],["T_STRING","setConditions",242],"(",["T_VARIABLE","$conditions",242],")",";",["T_WHITESPACE","\n\n        ",242],["T_RETURN","return",244],["T_WHITESPACE"," ",244],["T_VARIABLE","$this",244],";",["T_WHITESPACE","\n    ",244],"}",["T_WHITESPACE","\n\n    ",245],["T_DOC_COMMENT","\/**\n     * Reset rule actions\n     *\n     * @param null|Mage_Rule_Model_Action_Collection $actions\n     *\n     * @return Mage_Rule_Model_Abstract\n     *\/",247],["T_WHITESPACE","\n    ",253],["T_PROTECTED","protected",254],["T_WHITESPACE"," ",254],["T_FUNCTION","function",254],["T_WHITESPACE"," ",254],["T_STRING","_resetActions",254],"(",["T_VARIABLE","$actions",254],["T_WHITESPACE"," ",254],"=",["T_WHITESPACE"," ",254],["T_STRING","null",254],")",["T_WHITESPACE","\n    ",254],"{",["T_WHITESPACE","\n        ",255],["T_IF","if",256],["T_WHITESPACE"," ",256],"(",["T_STRING","is_null",256],"(",["T_VARIABLE","$actions",256],")",")",["T_WHITESPACE"," ",256],"{",["T_WHITESPACE","\n            ",256],["T_VARIABLE","$actions",257],["T_WHITESPACE"," ",257],"=",["T_WHITESPACE"," ",257],["T_VARIABLE","$this",257],["T_OBJECT_OPERATOR","->",257],["T_STRING","getActionsInstance",257],"(",")",";",["T_WHITESPACE","\n        ",257],"}",["T_WHITESPACE","\n        ",258],["T_VARIABLE","$actions",259],["T_OBJECT_OPERATOR","->",259],["T_STRING","setRule",259],"(",["T_VARIABLE","$this",259],")",["T_OBJECT_OPERATOR","->",259],["T_STRING","setId",259],"(",["T_CONSTANT_ENCAPSED_STRING","'1'",259],")",["T_OBJECT_OPERATOR","->",259],["T_STRING","setPrefix",259],"(",["T_CONSTANT_ENCAPSED_STRING","'actions'",259],")",";",["T_WHITESPACE","\n        ",259],["T_VARIABLE","$this",260],["T_OBJECT_OPERATOR","->",260],["T_STRING","setActions",260],"(",["T_VARIABLE","$actions",260],")",";",["T_WHITESPACE","\n\n        ",260],["T_RETURN","return",262],["T_WHITESPACE"," ",262],["T_VARIABLE","$this",262],";",["T_WHITESPACE","\n    ",262],"}",["T_WHITESPACE","\n\n    ",263],["T_DOC_COMMENT","\/**\n     * Rule form getter\n     *\n     * @return Varien_Data_Form\n     *\/",265],["T_WHITESPACE","\n    ",269],["T_PUBLIC","public",270],["T_WHITESPACE"," ",270],["T_FUNCTION","function",270],["T_WHITESPACE"," ",270],["T_STRING","getForm",270],"(",")",["T_WHITESPACE","\n    ",270],"{",["T_WHITESPACE","\n        ",271],["T_IF","if",272],["T_WHITESPACE"," ",272],"(","!",["T_VARIABLE","$this",272],["T_OBJECT_OPERATOR","->",272],["T_STRING","_form",272],")",["T_WHITESPACE"," ",272],"{",["T_WHITESPACE","\n            ",272],["T_VARIABLE","$this",273],["T_OBJECT_OPERATOR","->",273],["T_STRING","_form",273],["T_WHITESPACE"," ",273],"=",["T_WHITESPACE"," ",273],["T_NEW","new",273],["T_WHITESPACE"," ",273],["T_STRING","Varien_Data_Form",273],"(",")",";",["T_WHITESPACE","\n        ",273],"}",["T_WHITESPACE","\n        ",274],["T_RETURN","return",275],["T_WHITESPACE"," ",275],["T_VARIABLE","$this",275],["T_OBJECT_OPERATOR","->",275],["T_STRING","_form",275],";",["T_WHITESPACE","\n    ",275],"}",["T_WHITESPACE","\n\n    ",276],["T_DOC_COMMENT","\/**\n     * Initialize rule model data from array\n     *\n     * @param array $data\n     *\n     * @return Mage_Rule_Model_Abstract\n     *\/",278],["T_WHITESPACE","\n    ",284],["T_PUBLIC","public",285],["T_WHITESPACE"," ",285],["T_FUNCTION","function",285],["T_WHITESPACE"," ",285],["T_STRING","loadPost",285],"(",["T_ARRAY","array",285],["T_WHITESPACE"," ",285],["T_VARIABLE","$data",285],")",["T_WHITESPACE","\n    ",285],"{",["T_WHITESPACE","\n        ",286],["T_VARIABLE","$arr",287],["T_WHITESPACE"," ",287],"=",["T_WHITESPACE"," ",287],["T_VARIABLE","$this",287],["T_OBJECT_OPERATOR","->",287],["T_STRING","_convertFlatToRecursive",287],"(",["T_VARIABLE","$data",287],")",";",["T_WHITESPACE","\n        ",287],["T_IF","if",288],["T_WHITESPACE"," ",288],"(",["T_ISSET","isset",288],"(",["T_VARIABLE","$arr",288],"[",["T_CONSTANT_ENCAPSED_STRING","'conditions'",288],"]",")",")",["T_WHITESPACE"," ",288],"{",["T_WHITESPACE","\n            ",288],["T_VARIABLE","$this",289],["T_OBJECT_OPERATOR","->",289],["T_STRING","getConditions",289],"(",")",["T_OBJECT_OPERATOR","->",289],["T_STRING","setConditions",289],"(",["T_ARRAY","array",289],"(",")",")",["T_OBJECT_OPERATOR","->",289],["T_STRING","loadArray",289],"(",["T_VARIABLE","$arr",289],"[",["T_CONSTANT_ENCAPSED_STRING","'conditions'",289],"]","[",["T_LNUMBER","1",289],"]",")",";",["T_WHITESPACE","\n        ",289],"}",["T_WHITESPACE","\n        ",290],["T_IF","if",291],["T_WHITESPACE"," ",291],"(",["T_ISSET","isset",291],"(",["T_VARIABLE","$arr",291],"[",["T_CONSTANT_ENCAPSED_STRING","'actions'",291],"]",")",")",["T_WHITESPACE"," ",291],"{",["T_WHITESPACE","\n            ",291],["T_VARIABLE","$this",292],["T_OBJECT_OPERATOR","->",292],["T_STRING","getActions",292],"(",")",["T_OBJECT_OPERATOR","->",292],["T_STRING","setActions",292],"(",["T_ARRAY","array",292],"(",")",")",["T_OBJECT_OPERATOR","->",292],["T_STRING","loadArray",292],"(",["T_VARIABLE","$arr",292],"[",["T_CONSTANT_ENCAPSED_STRING","'actions'",292],"]","[",["T_LNUMBER","1",292],"]",",",["T_WHITESPACE"," ",292],["T_CONSTANT_ENCAPSED_STRING","'actions'",292],")",";",["T_WHITESPACE","\n        ",292],"}",["T_WHITESPACE","\n\n        ",293],["T_RETURN","return",295],["T_WHITESPACE"," ",295],["T_VARIABLE","$this",295],";",["T_WHITESPACE","\n    ",295],"}",["T_WHITESPACE","\n\n    ",296],["T_DOC_COMMENT","\/**\n     * Set specified data to current rule.\n     * Set conditions and actions recursively.\n     * Convert dates into Zend_Date.\n     *\n     * @param array $data\n     *\n     * @return array\n     *\/",298],["T_WHITESPACE","\n    ",306],["T_PROTECTED","protected",307],["T_WHITESPACE"," ",307],["T_FUNCTION","function",307],["T_WHITESPACE"," ",307],["T_STRING","_convertFlatToRecursive",307],"(",["T_ARRAY","array",307],["T_WHITESPACE"," ",307],["T_VARIABLE","$data",307],")",["T_WHITESPACE","\n    ",307],"{",["T_WHITESPACE","\n        ",308],["T_VARIABLE","$arr",309],["T_WHITESPACE"," ",309],"=",["T_WHITESPACE"," ",309],["T_ARRAY","array",309],"(",")",";",["T_WHITESPACE","\n        ",309],["T_FOREACH","foreach",310],["T_WHITESPACE"," ",310],"(",["T_VARIABLE","$data",310],["T_WHITESPACE"," ",310],["T_AS","as",310],["T_WHITESPACE"," ",310],["T_VARIABLE","$key",310],["T_WHITESPACE"," ",310],["T_DOUBLE_ARROW","=>",310],["T_WHITESPACE"," ",310],["T_VARIABLE","$value",310],")",["T_WHITESPACE"," ",310],"{",["T_WHITESPACE","\n            ",310],["T_IF","if",311],["T_WHITESPACE"," ",311],"(","(",["T_VARIABLE","$key",311],["T_WHITESPACE"," ",311],["T_IS_IDENTICAL","===",311],["T_WHITESPACE"," ",311],["T_CONSTANT_ENCAPSED_STRING","'conditions'",311],["T_WHITESPACE"," ",311],["T_BOOLEAN_OR","||",311],["T_WHITESPACE"," ",311],["T_VARIABLE","$key",311],["T_WHITESPACE"," ",311],["T_IS_IDENTICAL","===",311],["T_WHITESPACE"," ",311],["T_CONSTANT_ENCAPSED_STRING","'actions'",311],")",["T_WHITESPACE"," ",311],["T_BOOLEAN_AND","&&",311],["T_WHITESPACE"," ",311],["T_STRING","is_array",311],"(",["T_VARIABLE","$value",311],")",")",["T_WHITESPACE"," ",311],"{",["T_WHITESPACE","\n                ",311],["T_FOREACH","foreach",312],["T_WHITESPACE"," ",312],"(",["T_VARIABLE","$value",312],["T_WHITESPACE"," ",312],["T_AS","as",312],["T_WHITESPACE"," ",312],["T_VARIABLE","$id",312],["T_DOUBLE_ARROW","=>",312],["T_VARIABLE","$data",312],")",["T_WHITESPACE"," ",312],"{",["T_WHITESPACE","\n                    ",312],["T_VARIABLE","$path",313],["T_WHITESPACE"," ",313],"=",["T_WHITESPACE"," ",313],["T_STRING","explode",313],"(",["T_CONSTANT_ENCAPSED_STRING","'--'",313],",",["T_WHITESPACE"," ",313],["T_VARIABLE","$id",313],")",";",["T_WHITESPACE","\n                    ",313],["T_VARIABLE","$node",314],["T_WHITESPACE"," ",314],"=","&",["T_WHITESPACE"," ",314],["T_VARIABLE","$arr",314],";",["T_WHITESPACE","\n                    ",314],["T_FOR","for",315],["T_WHITESPACE"," ",315],"(",["T_VARIABLE","$i",315],"=",["T_LNUMBER","0",315],",",["T_WHITESPACE"," ",315],["T_VARIABLE","$l",315],"=",["T_STRING","sizeof",315],"(",["T_VARIABLE","$path",315],")",";",["T_WHITESPACE"," ",315],["T_VARIABLE","$i",315],"<",["T_VARIABLE","$l",315],";",["T_WHITESPACE"," ",315],["T_VARIABLE","$i",315],["T_INC","++",315],")",["T_WHITESPACE"," ",315],"{",["T_WHITESPACE","\n                        ",315],["T_IF","if",316],["T_WHITESPACE"," ",316],"(","!",["T_ISSET","isset",316],"(",["T_VARIABLE","$node",316],"[",["T_VARIABLE","$key",316],"]","[",["T_VARIABLE","$path",316],"[",["T_VARIABLE","$i",316],"]","]",")",")",["T_WHITESPACE"," ",316],"{",["T_WHITESPACE","\n                            ",316],["T_VARIABLE","$node",317],"[",["T_VARIABLE","$key",317],"]","[",["T_VARIABLE","$path",317],"[",["T_VARIABLE","$i",317],"]","]",["T_WHITESPACE"," ",317],"=",["T_WHITESPACE"," ",317],["T_ARRAY","array",317],"(",")",";",["T_WHITESPACE","\n                        ",317],"}",["T_WHITESPACE","\n                        ",318],["T_VARIABLE","$node",319],["T_WHITESPACE"," ",319],"=","&",["T_WHITESPACE"," ",319],["T_VARIABLE","$node",319],"[",["T_VARIABLE","$key",319],"]","[",["T_VARIABLE","$path",319],"[",["T_VARIABLE","$i",319],"]","]",";",["T_WHITESPACE","\n                    ",319],"}",["T_WHITESPACE","\n                    ",320],["T_FOREACH","foreach",321],["T_WHITESPACE"," ",321],"(",["T_VARIABLE","$data",321],["T_WHITESPACE"," ",321],["T_AS","as",321],["T_WHITESPACE"," ",321],["T_VARIABLE","$k",321],["T_WHITESPACE"," ",321],["T_DOUBLE_ARROW","=>",321],["T_WHITESPACE"," ",321],["T_VARIABLE","$v",321],")",["T_WHITESPACE"," ",321],"{",["T_WHITESPACE","\n                        ",321],["T_VARIABLE","$node",322],"[",["T_VARIABLE","$k",322],"]",["T_WHITESPACE"," ",322],"=",["T_WHITESPACE"," ",322],["T_VARIABLE","$v",322],";",["T_WHITESPACE","\n                    ",322],"}",["T_WHITESPACE","\n                ",323],"}",["T_WHITESPACE","\n            ",324],"}",["T_WHITESPACE"," ",325],["T_ELSE","else",325],["T_WHITESPACE"," ",325],"{",["T_WHITESPACE","\n                ",325],["T_DOC_COMMENT","\/**\n                 * Convert dates into Zend_Date\n                 *\/",326],["T_WHITESPACE","\n                ",328],["T_IF","if",329],["T_WHITESPACE"," ",329],"(",["T_STRING","in_array",329],"(",["T_VARIABLE","$key",329],",",["T_WHITESPACE"," ",329],["T_ARRAY","array",329],"(",["T_CONSTANT_ENCAPSED_STRING","'from_date'",329],",",["T_WHITESPACE"," ",329],["T_CONSTANT_ENCAPSED_STRING","'to_date'",329],")",")",["T_WHITESPACE"," ",329],["T_BOOLEAN_AND","&&",329],["T_WHITESPACE"," ",329],["T_VARIABLE","$value",329],")",["T_WHITESPACE"," ",329],"{",["T_WHITESPACE","\n                    ",329],["T_VARIABLE","$value",330],["T_WHITESPACE"," ",330],"=",["T_WHITESPACE"," ",330],["T_STRING","Mage",330],["T_DOUBLE_COLON","::",330],["T_STRING","app",330],"(",")",["T_OBJECT_OPERATOR","->",330],["T_STRING","getLocale",330],"(",")",["T_OBJECT_OPERATOR","->",330],["T_STRING","date",330],"(",["T_WHITESPACE","\n                        ",330],["T_VARIABLE","$value",331],",",["T_WHITESPACE","\n                        ",331],["T_STRING","Varien_Date",332],["T_DOUBLE_COLON","::",332],["T_STRING","DATE_INTERNAL_FORMAT",332],",",["T_WHITESPACE","\n                        ",332],["T_STRING","null",333],",",["T_WHITESPACE","\n                        ",333],["T_STRING","false",334],["T_WHITESPACE","\n                    ",334],")",";",["T_WHITESPACE","\n                ",335],"}",["T_WHITESPACE","\n                ",336],["T_VARIABLE","$this",337],["T_OBJECT_OPERATOR","->",337],["T_STRING","setData",337],"(",["T_VARIABLE","$key",337],",",["T_WHITESPACE"," ",337],["T_VARIABLE","$value",337],")",";",["T_WHITESPACE","\n            ",337],"}",["T_WHITESPACE","\n        ",338],"}",["T_WHITESPACE","\n\n        ",339],["T_RETURN","return",341],["T_WHITESPACE"," ",341],["T_VARIABLE","$arr",341],";",["T_WHITESPACE","\n    ",341],"}",["T_WHITESPACE","\n\n    ",342],["T_DOC_COMMENT","\/**\n     * Validate rule conditions to determine if rule can run\n     *\n     * @param Varien_Object $object\n     *\n     * @return bool\n     *\/",344],["T_WHITESPACE","\n    ",350],["T_PUBLIC","public",351],["T_WHITESPACE"," ",351],["T_FUNCTION","function",351],["T_WHITESPACE"," ",351],["T_STRING","validate",351],"(",["T_STRING","Varien_Object",351],["T_WHITESPACE"," ",351],["T_VARIABLE","$object",351],")",["T_WHITESPACE","\n    ",351],"{",["T_WHITESPACE","\n        ",352],["T_RETURN","return",353],["T_WHITESPACE"," ",353],["T_VARIABLE","$this",353],["T_OBJECT_OPERATOR","->",353],["T_STRING","getConditions",353],"(",")",["T_OBJECT_OPERATOR","->",353],["T_STRING","validate",353],"(",["T_VARIABLE","$object",353],")",";",["T_WHITESPACE","\n    ",353],"}",["T_WHITESPACE","\n\n    ",354],["T_DOC_COMMENT","\/**\n     * Validate rule data\n     *\n     * @param Varien_Object $object\n     *\n     * @return bool|array - return true if validation passed successfully. Array with errors description otherwise\n     *\/",356],["T_WHITESPACE","\n    ",362],["T_PUBLIC","public",363],["T_WHITESPACE"," ",363],["T_FUNCTION","function",363],["T_WHITESPACE"," ",363],["T_STRING","validateData",363],"(",["T_STRING","Varien_Object",363],["T_WHITESPACE"," ",363],["T_VARIABLE","$object",363],")",["T_WHITESPACE","\n    ",363],"{",["T_WHITESPACE","\n        ",364],["T_VARIABLE","$result",365],["T_WHITESPACE","   ",365],"=",["T_WHITESPACE"," ",365],["T_ARRAY","array",365],"(",")",";",["T_WHITESPACE","\n        ",365],["T_VARIABLE","$fromDate",366],["T_WHITESPACE"," ",366],"=",["T_WHITESPACE"," ",366],["T_VARIABLE","$toDate",366],["T_WHITESPACE"," ",366],"=",["T_WHITESPACE"," ",366],["T_STRING","null",366],";",["T_WHITESPACE","\n\n        ",366],["T_IF","if",368],["T_WHITESPACE"," ",368],"(",["T_VARIABLE","$object",368],["T_OBJECT_OPERATOR","->",368],["T_STRING","hasFromDate",368],"(",")",["T_WHITESPACE"," ",368],["T_BOOLEAN_AND","&&",368],["T_WHITESPACE"," ",368],["T_VARIABLE","$object",368],["T_OBJECT_OPERATOR","->",368],["T_STRING","hasToDate",368],"(",")",")",["T_WHITESPACE"," ",368],"{",["T_WHITESPACE","\n            ",368],["T_VARIABLE","$fromDate",369],["T_WHITESPACE"," ",369],"=",["T_WHITESPACE"," ",369],["T_VARIABLE","$object",369],["T_OBJECT_OPERATOR","->",369],["T_STRING","getFromDate",369],"(",")",";",["T_WHITESPACE","\n            ",369],["T_VARIABLE","$toDate",370],["T_WHITESPACE"," ",370],"=",["T_WHITESPACE"," ",370],["T_VARIABLE","$object",370],["T_OBJECT_OPERATOR","->",370],["T_STRING","getToDate",370],"(",")",";",["T_WHITESPACE","\n        ",370],"}",["T_WHITESPACE","\n\n        ",371],["T_IF","if",373],["T_WHITESPACE"," ",373],"(",["T_VARIABLE","$fromDate",373],["T_WHITESPACE"," ",373],["T_BOOLEAN_AND","&&",373],["T_WHITESPACE"," ",373],["T_VARIABLE","$toDate",373],")",["T_WHITESPACE"," ",373],"{",["T_WHITESPACE","\n            ",373],["T_VARIABLE","$fromDate",374],["T_WHITESPACE"," ",374],"=",["T_WHITESPACE"," ",374],["T_NEW","new",374],["T_WHITESPACE"," ",374],["T_STRING","Zend_Date",374],"(",["T_VARIABLE","$fromDate",374],",",["T_WHITESPACE"," ",374],["T_STRING","Varien_Date",374],["T_DOUBLE_COLON","::",374],["T_STRING","DATE_INTERNAL_FORMAT",374],")",";",["T_WHITESPACE","\n            ",374],["T_VARIABLE","$toDate",375],["T_WHITESPACE"," ",375],"=",["T_WHITESPACE"," ",375],["T_NEW","new",375],["T_WHITESPACE"," ",375],["T_STRING","Zend_Date",375],"(",["T_VARIABLE","$toDate",375],",",["T_WHITESPACE"," ",375],["T_STRING","Varien_Date",375],["T_DOUBLE_COLON","::",375],["T_STRING","DATE_INTERNAL_FORMAT",375],")",";",["T_WHITESPACE","\n\n            ",375],["T_IF","if",377],["T_WHITESPACE"," ",377],"(",["T_VARIABLE","$fromDate",377],["T_OBJECT_OPERATOR","->",377],["T_STRING","compare",377],"(",["T_VARIABLE","$toDate",377],")",["T_WHITESPACE"," ",377],["T_IS_IDENTICAL","===",377],["T_WHITESPACE"," ",377],["T_LNUMBER","1",377],")",["T_WHITESPACE"," ",377],"{",["T_WHITESPACE","\n                ",377],["T_VARIABLE","$result",378],"[","]",["T_WHITESPACE"," ",378],"=",["T_WHITESPACE"," ",378],["T_STRING","Mage",378],["T_DOUBLE_COLON","::",378],["T_STRING","helper",378],"(",["T_CONSTANT_ENCAPSED_STRING","'rule'",378],")",["T_OBJECT_OPERATOR","->",378],["T_STRING","__",378],"(",["T_CONSTANT_ENCAPSED_STRING","'End Date must be greater than Start Date.'",378],")",";",["T_WHITESPACE","\n            ",378],"}",["T_WHITESPACE","\n        ",379],"}",["T_WHITESPACE","\n\n        ",380],["T_IF","if",382],["T_WHITESPACE"," ",382],"(",["T_VARIABLE","$object",382],["T_OBJECT_OPERATOR","->",382],["T_STRING","hasWebsiteIds",382],"(",")",")",["T_WHITESPACE"," ",382],"{",["T_WHITESPACE","\n            ",382],["T_VARIABLE","$websiteIds",383],["T_WHITESPACE"," ",383],"=",["T_WHITESPACE"," ",383],["T_VARIABLE","$object",383],["T_OBJECT_OPERATOR","->",383],["T_STRING","getWebsiteIds",383],"(",")",";",["T_WHITESPACE","\n            ",383],["T_IF","if",384],["T_WHITESPACE"," ",384],"(",["T_EMPTY","empty",384],"(",["T_VARIABLE","$websiteIds",384],")",")",["T_WHITESPACE"," ",384],"{",["T_WHITESPACE","\n                ",384],["T_VARIABLE","$result",385],"[","]",["T_WHITESPACE"," ",385],"=",["T_WHITESPACE"," ",385],["T_STRING","Mage",385],["T_DOUBLE_COLON","::",385],["T_STRING","helper",385],"(",["T_CONSTANT_ENCAPSED_STRING","'rule'",385],")",["T_OBJECT_OPERATOR","->",385],["T_STRING","__",385],"(",["T_CONSTANT_ENCAPSED_STRING","'Websites must be specified.'",385],")",";",["T_WHITESPACE","\n            ",385],"}",["T_WHITESPACE","\n        ",386],"}",["T_WHITESPACE","\n        ",387],["T_IF","if",388],["T_WHITESPACE"," ",388],"(",["T_VARIABLE","$object",388],["T_OBJECT_OPERATOR","->",388],["T_STRING","hasCustomerGroupIds",388],"(",")",")",["T_WHITESPACE"," ",388],"{",["T_WHITESPACE","\n            ",388],["T_VARIABLE","$customerGroupIds",389],["T_WHITESPACE"," ",389],"=",["T_WHITESPACE"," ",389],["T_VARIABLE","$object",389],["T_OBJECT_OPERATOR","->",389],["T_STRING","getCustomerGroupIds",389],"(",")",";",["T_WHITESPACE","\n            ",389],["T_IF","if",390],["T_WHITESPACE"," ",390],"(",["T_EMPTY","empty",390],"(",["T_VARIABLE","$customerGroupIds",390],")",")",["T_WHITESPACE"," ",390],"{",["T_WHITESPACE","\n                ",390],["T_VARIABLE","$result",391],"[","]",["T_WHITESPACE"," ",391],"=",["T_WHITESPACE"," ",391],["T_STRING","Mage",391],["T_DOUBLE_COLON","::",391],["T_STRING","helper",391],"(",["T_CONSTANT_ENCAPSED_STRING","'rule'",391],")",["T_OBJECT_OPERATOR","->",391],["T_STRING","__",391],"(",["T_CONSTANT_ENCAPSED_STRING","'Customer Groups must be specified.'",391],")",";",["T_WHITESPACE","\n            ",391],"}",["T_WHITESPACE","\n        ",392],"}",["T_WHITESPACE","\n\n        ",393],["T_RETURN","return",395],["T_WHITESPACE"," ",395],"!",["T_EMPTY","empty",395],"(",["T_VARIABLE","$result",395],")",["T_WHITESPACE"," ",395],"?",["T_WHITESPACE"," ",395],["T_VARIABLE","$result",395],["T_WHITESPACE"," ",395],":",["T_WHITESPACE"," ",395],["T_STRING","true",395],";",["T_WHITESPACE","\n    ",395],"}",["T_WHITESPACE","\n\n    ",396],["T_DOC_COMMENT","\/**\n     * Check availability to delete rule\n     *\n     * @return bool\n     *\/",398],["T_WHITESPACE","\n    ",402],["T_PUBLIC","public",403],["T_WHITESPACE"," ",403],["T_FUNCTION","function",403],["T_WHITESPACE"," ",403],["T_STRING","isDeleteable",403],"(",")",["T_WHITESPACE","\n    ",403],"{",["T_WHITESPACE","\n        ",404],["T_RETURN","return",405],["T_WHITESPACE"," ",405],["T_VARIABLE","$this",405],["T_OBJECT_OPERATOR","->",405],["T_STRING","_isDeleteable",405],";",["T_WHITESPACE","\n    ",405],"}",["T_WHITESPACE","\n\n    ",406],["T_DOC_COMMENT","\/**\n     * Set is rule can be deleted flag\n     *\n     * @param bool $value\n     *\n     * @return Mage_Rule_Model_Abstract\n     *\/",408],["T_WHITESPACE","\n    ",414],["T_PUBLIC","public",415],["T_WHITESPACE"," ",415],["T_FUNCTION","function",415],["T_WHITESPACE"," ",415],["T_STRING","setIsDeleteable",415],"(",["T_VARIABLE","$value",415],")",["T_WHITESPACE","\n    ",415],"{",["T_WHITESPACE","\n        ",416],["T_VARIABLE","$this",417],["T_OBJECT_OPERATOR","->",417],["T_STRING","_isDeleteable",417],["T_WHITESPACE"," ",417],"=",["T_WHITESPACE"," ",417],["T_BOOL_CAST","(bool)",417],["T_WHITESPACE"," ",417],["T_VARIABLE","$value",417],";",["T_WHITESPACE","\n        ",417],["T_RETURN","return",418],["T_WHITESPACE"," ",418],["T_VARIABLE","$this",418],";",["T_WHITESPACE","\n    ",418],"}",["T_WHITESPACE","\n\n    ",419],["T_DOC_COMMENT","\/**\n     * Check if rule is readonly\n     *\n     * @return bool\n     *\/",421],["T_WHITESPACE","\n    ",425],["T_PUBLIC","public",426],["T_WHITESPACE"," ",426],["T_FUNCTION","function",426],["T_WHITESPACE"," ",426],["T_STRING","isReadonly",426],"(",")",["T_WHITESPACE","\n    ",426],"{",["T_WHITESPACE","\n        ",427],["T_RETURN","return",428],["T_WHITESPACE"," ",428],["T_VARIABLE","$this",428],["T_OBJECT_OPERATOR","->",428],["T_STRING","_isReadonly",428],";",["T_WHITESPACE","\n    ",428],"}",["T_WHITESPACE","\n\n    ",429],["T_DOC_COMMENT","\/**\n     * Set is readonly flag to rule\n     *\n     * @param bool $value\n     *\n     * @return Mage_Rule_Model_Abstract\n     *\/",431],["T_WHITESPACE","\n    ",437],["T_PUBLIC","public",438],["T_WHITESPACE"," ",438],["T_FUNCTION","function",438],["T_WHITESPACE"," ",438],["T_STRING","setIsReadonly",438],"(",["T_VARIABLE","$value",438],")",["T_WHITESPACE","\n    ",438],"{",["T_WHITESPACE","\n        ",439],["T_VARIABLE","$this",440],["T_OBJECT_OPERATOR","->",440],["T_STRING","_isReadonly",440],["T_WHITESPACE"," ",440],"=",["T_WHITESPACE"," ",440],["T_BOOL_CAST","(bool)",440],["T_WHITESPACE"," ",440],["T_VARIABLE","$value",440],";",["T_WHITESPACE","\n        ",440],["T_RETURN","return",441],["T_WHITESPACE"," ",441],["T_VARIABLE","$this",441],";",["T_WHITESPACE","\n    ",441],"}",["T_WHITESPACE","\n\n    ",442],["T_DOC_COMMENT","\/**\n     * Get rule associated website Ids\n     *\n     * @return array\n     *\/",444],["T_WHITESPACE","\n    ",448],["T_PUBLIC","public",449],["T_WHITESPACE"," ",449],["T_FUNCTION","function",449],["T_WHITESPACE"," ",449],["T_STRING","getWebsiteIds",449],"(",")",["T_WHITESPACE","\n    ",449],"{",["T_WHITESPACE","\n        ",450],["T_IF","if",451],["T_WHITESPACE"," ",451],"(","!",["T_VARIABLE","$this",451],["T_OBJECT_OPERATOR","->",451],["T_STRING","hasWebsiteIds",451],"(",")",")",["T_WHITESPACE"," ",451],"{",["T_WHITESPACE","\n            ",451],["T_VARIABLE","$websiteIds",452],["T_WHITESPACE"," ",452],"=",["T_WHITESPACE"," ",452],["T_VARIABLE","$this",452],["T_OBJECT_OPERATOR","->",452],["T_STRING","_getResource",452],"(",")",["T_OBJECT_OPERATOR","->",452],["T_STRING","getWebsiteIds",452],"(",["T_VARIABLE","$this",452],["T_OBJECT_OPERATOR","->",452],["T_STRING","getId",452],"(",")",")",";",["T_WHITESPACE","\n            ",452],["T_VARIABLE","$this",453],["T_OBJECT_OPERATOR","->",453],["T_STRING","setData",453],"(",["T_CONSTANT_ENCAPSED_STRING","'website_ids'",453],",",["T_WHITESPACE"," ",453],["T_ARRAY_CAST","(array)",453],["T_VARIABLE","$websiteIds",453],")",";",["T_WHITESPACE","\n        ",453],"}",["T_WHITESPACE","\n        ",454],["T_RETURN","return",455],["T_WHITESPACE"," ",455],["T_VARIABLE","$this",455],["T_OBJECT_OPERATOR","->",455],["T_STRING","_getData",455],"(",["T_CONSTANT_ENCAPSED_STRING","'website_ids'",455],")",";",["T_WHITESPACE","\n    ",455],"}",["T_WHITESPACE","\n\n\n\n\n    ",456],["T_DOC_COMMENT","\/**\n     * @deprecated since 1.7.0.0\n     *\n     * @param string $format\n     *\n     * @return string\n     *\/",461],["T_WHITESPACE","\n    ",467],["T_PUBLIC","public",468],["T_WHITESPACE"," ",468],["T_FUNCTION","function",468],["T_WHITESPACE"," ",468],["T_STRING","asString",468],"(",["T_VARIABLE","$format",468],"=",["T_CONSTANT_ENCAPSED_STRING","''",468],")",["T_WHITESPACE","\n    ",468],"{",["T_WHITESPACE","\n        ",469],["T_RETURN","return",470],["T_WHITESPACE"," ",470],["T_CONSTANT_ENCAPSED_STRING","''",470],";",["T_WHITESPACE","\n    ",470],"}",["T_WHITESPACE","\n\n    ",471],["T_DOC_COMMENT","\/**\n     * @deprecated since 1.7.0.0\n     *\n     * @return string\n     *\/",473],["T_WHITESPACE","\n    ",477],["T_PUBLIC","public",478],["T_WHITESPACE"," ",478],["T_FUNCTION","function",478],["T_WHITESPACE"," ",478],["T_STRING","asHtml",478],"(",")",["T_WHITESPACE","\n    ",478],"{",["T_WHITESPACE","\n        ",479],["T_RETURN","return",480],["T_WHITESPACE"," ",480],["T_CONSTANT_ENCAPSED_STRING","''",480],";",["T_WHITESPACE","\n    ",480],"}",["T_WHITESPACE","\n\n    ",481],["T_DOC_COMMENT","\/**\n     * Returns rule as an array for admin interface\n     *\n     * @deprecated since 1.7.0.0\n     *\n     * @param array $arrAttributes\n     *\n     * @return array\n     *\/",483],["T_WHITESPACE","\n    ",491],["T_PUBLIC","public",492],["T_WHITESPACE"," ",492],["T_FUNCTION","function",492],["T_WHITESPACE"," ",492],["T_STRING","asArray",492],"(",["T_ARRAY","array",492],["T_WHITESPACE"," ",492],["T_VARIABLE","$arrAttributes",492],["T_WHITESPACE"," ",492],"=",["T_WHITESPACE"," ",492],["T_ARRAY","array",492],"(",")",")",["T_WHITESPACE","\n    ",492],"{",["T_WHITESPACE","\n        ",493],["T_RETURN","return",494],["T_WHITESPACE"," ",494],["T_ARRAY","array",494],"(",")",";",["T_WHITESPACE","\n    ",494],"}",["T_WHITESPACE","\n\n    ",495],["T_DOC_COMMENT","\/**\n     * Combine website ids to string\n     *\n     * @deprecated since 1.7.0.0\n     *\n     * @return Mage_Rule_Model_Abstract\n     *\/",497],["T_WHITESPACE","\n    ",503],["T_PROTECTED","protected",504],["T_WHITESPACE"," ",504],["T_FUNCTION","function",504],["T_WHITESPACE"," ",504],["T_STRING","_prepareWebsiteIds",504],"(",")",["T_WHITESPACE","\n    ",504],"{",["T_WHITESPACE","\n        ",505],["T_RETURN","return",506],["T_WHITESPACE"," ",506],["T_VARIABLE","$this",506],";",["T_WHITESPACE","\n    ",506],"}",["T_WHITESPACE","\n",507],"}",["T_WHITESPACE","\n",508]]
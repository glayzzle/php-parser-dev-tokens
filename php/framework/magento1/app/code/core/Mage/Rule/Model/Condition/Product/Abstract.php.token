[["T_OPEN_TAG","<?php\n",1],["T_DOC_COMMENT","\/**\n * Magento\n *\n * NOTICE OF LICENSE\n *\n * This source file is subject to the Open Software License (OSL 3.0)\n * that is bundled with this package in the file LICENSE.txt.\n * It is also available through the world-wide-web at this URL:\n * http:\/\/opensource.org\/licenses\/osl-3.0.php\n * If you did not receive a copy of the license and are unable to\n * obtain it through the world-wide-web, please send an email\n * to license@magento.com so we can send you a copy immediately.\n *\n * DISCLAIMER\n *\n * Do not edit or add to this file if you wish to upgrade Magento to newer\n * versions in the future. If you wish to customize Magento for your\n * needs please refer to http:\/\/www.magento.com for more information.\n *\n * @category    Mage\n * @package     Mage_Rule\n * @copyright  Copyright (c) 2006-2016 X.commerce, Inc. and affiliates (http:\/\/www.magento.com)\n * @license    http:\/\/opensource.org\/licenses\/osl-3.0.php  Open Software License (OSL 3.0)\n *\/",2],["T_WHITESPACE","\n\n",25],["T_DOC_COMMENT","\/**\n * Abstract Rule product condition data model\n *\n * @method string getAttribute()\n * @method string getOperator()\n *\n * @category Mage\n * @package Mage_Rule\n * @author Magento Core Team <core@magentocommerce.com>\n *\/",27],["T_WHITESPACE","\n",36],["T_ABSTRACT","abstract",37],["T_WHITESPACE"," ",37],["T_CLASS","class",37],["T_WHITESPACE"," ",37],["T_STRING","Mage_Rule_Model_Condition_Product_Abstract",37],["T_WHITESPACE"," ",37],["T_EXTENDS","extends",37],["T_WHITESPACE"," ",37],["T_STRING","Mage_Rule_Model_Condition_Abstract",37],["T_WHITESPACE","\n",37],"{",["T_WHITESPACE","\n    ",38],["T_DOC_COMMENT","\/**\n     * Rule condition SQL builder\n     *\n     * @var Mage_Rule_Model_Resource_Rule_Condition_SqlBuilder\n     *\/",39],["T_WHITESPACE","\n    ",43],["T_PROTECTED","protected",44],["T_WHITESPACE"," ",44],["T_VARIABLE","$_ruleResourceHelper",44],";",["T_WHITESPACE","\n\n    ",44],["T_DOC_COMMENT","\/**\n     * All attribute values as array in form:\n     * array(\n     *   [entity_id_1] => array(\n     *          [store_id_1] => store_value_1,\n     *          [store_id_2] => store_value_2,\n     *          ...\n     *          [store_id_n] => store_value_n\n     *   ),\n     *   ...\n     * )\n     *\n     * Will be set only for not global scope attribute\n     *\n     * @var array\n     *\/",46],["T_WHITESPACE","\n    ",61],["T_PROTECTED","protected",62],["T_WHITESPACE"," ",62],["T_VARIABLE","$_entityAttributeValues",62],["T_WHITESPACE"," ",62],"=",["T_WHITESPACE"," ",62],["T_STRING","null",62],";",["T_WHITESPACE","\n\n    ",62],["T_DOC_COMMENT","\/**\n     * Attribute data key that indicates whether it should be used for rules\n     *\n     * @var string\n     *\/",64],["T_WHITESPACE","\n    ",68],["T_PROTECTED","protected",69],["T_WHITESPACE"," ",69],["T_VARIABLE","$_isUsedForRuleProperty",69],["T_WHITESPACE"," ",69],"=",["T_WHITESPACE"," ",69],["T_CONSTANT_ENCAPSED_STRING","'is_used_for_promo_rules'",69],";",["T_WHITESPACE","\n\n    ",69],["T_DOC_COMMENT","\/**\n     * Customize default operator input by type mapper for some types\n     *\n     * @return array\n     *\/",71],["T_WHITESPACE","\n    ",75],["T_PUBLIC","public",76],["T_WHITESPACE"," ",76],["T_FUNCTION","function",76],["T_WHITESPACE"," ",76],["T_STRING","getDefaultOperatorInputByType",76],"(",")",["T_WHITESPACE","\n    ",76],"{",["T_WHITESPACE","\n        ",77],["T_IF","if",78],["T_WHITESPACE"," ",78],"(",["T_STRING","null",78],["T_WHITESPACE"," ",78],["T_IS_IDENTICAL","===",78],["T_WHITESPACE"," ",78],["T_VARIABLE","$this",78],["T_OBJECT_OPERATOR","->",78],["T_STRING","_defaultOperatorInputByType",78],")",["T_WHITESPACE"," ",78],"{",["T_WHITESPACE","\n            ",78],["T_STRING","parent",79],["T_DOUBLE_COLON","::",79],["T_STRING","getDefaultOperatorInputByType",79],"(",")",";",["T_WHITESPACE","\n            ",79],["T_COMMENT","\/*\n             * '{}' and '!{}' are left for back-compatibility and equal to '==' and '!='\n             *\/",80],["T_WHITESPACE","\n            ",82],["T_VARIABLE","$this",83],["T_OBJECT_OPERATOR","->",83],["T_STRING","_defaultOperatorInputByType",83],"[",["T_CONSTANT_ENCAPSED_STRING","'category'",83],"]",["T_WHITESPACE"," ",83],"=",["T_WHITESPACE"," ",83],["T_ARRAY","array",83],"(",["T_CONSTANT_ENCAPSED_STRING","'=='",83],",",["T_WHITESPACE"," ",83],["T_CONSTANT_ENCAPSED_STRING","'!='",83],",",["T_WHITESPACE"," ",83],["T_CONSTANT_ENCAPSED_STRING","'{}'",83],",",["T_WHITESPACE"," ",83],["T_CONSTANT_ENCAPSED_STRING","'!{}'",83],",",["T_WHITESPACE"," ",83],["T_CONSTANT_ENCAPSED_STRING","'()'",83],",",["T_WHITESPACE"," ",83],["T_CONSTANT_ENCAPSED_STRING","'!()'",83],")",";",["T_WHITESPACE","\n            ",83],["T_VARIABLE","$this",84],["T_OBJECT_OPERATOR","->",84],["T_STRING","_arrayInputTypes",84],"[","]",["T_WHITESPACE"," ",84],"=",["T_WHITESPACE"," ",84],["T_CONSTANT_ENCAPSED_STRING","'category'",84],";",["T_WHITESPACE","\n        ",84],"}",["T_WHITESPACE","\n        ",85],["T_RETURN","return",86],["T_WHITESPACE"," ",86],["T_VARIABLE","$this",86],["T_OBJECT_OPERATOR","->",86],["T_STRING","_defaultOperatorInputByType",86],";",["T_WHITESPACE","\n    ",86],"}",["T_WHITESPACE","\n\n    ",87],["T_DOC_COMMENT","\/**\n     * Prepare bind array of ids from string or array\n     *\n     * @param string|int|array $value\n     * @return array\n     *\/",89],["T_WHITESPACE","\n    ",94],["T_PUBLIC","public",95],["T_WHITESPACE"," ",95],["T_FUNCTION","function",95],["T_WHITESPACE"," ",95],["T_STRING","bindArrayOfIds",95],"(",["T_VARIABLE","$value",95],")",["T_WHITESPACE","\n    ",95],"{",["T_WHITESPACE","\n        ",96],["T_IF","if",97],["T_WHITESPACE"," ",97],"(","!",["T_STRING","is_array",97],"(",["T_VARIABLE","$value",97],")",")",["T_WHITESPACE"," ",97],"{",["T_WHITESPACE","\n            ",97],["T_VARIABLE","$value",98],["T_WHITESPACE"," ",98],"=",["T_WHITESPACE"," ",98],["T_STRING","explode",98],"(",["T_CONSTANT_ENCAPSED_STRING","','",98],",",["T_WHITESPACE"," ",98],["T_VARIABLE","$value",98],")",";",["T_WHITESPACE","\n        ",98],"}",["T_WHITESPACE","\n\n        ",99],["T_VARIABLE","$value",101],["T_WHITESPACE"," ",101],"=",["T_WHITESPACE"," ",101],["T_STRING","array_map",101],"(",["T_CONSTANT_ENCAPSED_STRING","'trim'",101],",",["T_WHITESPACE"," ",101],["T_VARIABLE","$value",101],")",";",["T_WHITESPACE","\n        ",101],["T_VARIABLE","$value",102],["T_WHITESPACE"," ",102],"=",["T_WHITESPACE"," ",102],["T_STRING","array_filter",102],"(",["T_VARIABLE","$value",102],",",["T_WHITESPACE"," ",102],["T_CONSTANT_ENCAPSED_STRING","'is_numeric'",102],")",";",["T_WHITESPACE","\n\n        ",102],["T_RETURN","return",104],["T_WHITESPACE"," ",104],["T_VARIABLE","$value",104],";",["T_WHITESPACE","\n    ",104],"}",["T_WHITESPACE","\n\n    ",105],["T_DOC_COMMENT","\/**\n     * Prepare sql where by condition\n     *\n     * @return string\n     *\/",107],["T_WHITESPACE","\n    ",111],["T_PUBLIC","public",112],["T_WHITESPACE"," ",112],["T_FUNCTION","function",112],["T_WHITESPACE"," ",112],["T_STRING","prepareConditionSql",112],"(",")",["T_WHITESPACE","\n    ",112],"{",["T_WHITESPACE","\n        ",113],["T_VARIABLE","$alias",114],["T_WHITESPACE","     ",114],"=",["T_WHITESPACE"," ",114],["T_CONSTANT_ENCAPSED_STRING","'cpf'",114],";",["T_WHITESPACE","\n        ",114],["T_VARIABLE","$attribute",115],["T_WHITESPACE"," ",115],"=",["T_WHITESPACE"," ",115],["T_VARIABLE","$this",115],["T_OBJECT_OPERATOR","->",115],["T_STRING","getAttribute",115],"(",")",";",["T_WHITESPACE","\n        ",115],["T_VARIABLE","$value",116],["T_WHITESPACE","     ",116],"=",["T_WHITESPACE"," ",116],["T_VARIABLE","$this",116],["T_OBJECT_OPERATOR","->",116],["T_STRING","getValueParsed",116],"(",")",";",["T_WHITESPACE","\n        ",116],["T_VARIABLE","$operator",117],["T_WHITESPACE","  ",117],"=",["T_WHITESPACE"," ",117],["T_VARIABLE","$this",117],["T_OBJECT_OPERATOR","->",117],["T_STRING","correctOperator",117],"(",["T_VARIABLE","$this",117],["T_OBJECT_OPERATOR","->",117],["T_STRING","getOperator",117],"(",")",",",["T_WHITESPACE"," ",117],["T_VARIABLE","$this",117],["T_OBJECT_OPERATOR","->",117],["T_STRING","getInputType",117],"(",")",")",";",["T_WHITESPACE","\n        ",117],["T_IF","if",118],["T_WHITESPACE"," ",118],"(",["T_VARIABLE","$attribute",118],["T_WHITESPACE"," ",118],["T_IS_EQUAL","==",118],["T_WHITESPACE"," ",118],["T_CONSTANT_ENCAPSED_STRING","'category_ids'",118],")",["T_WHITESPACE"," ",118],"{",["T_WHITESPACE","\n            ",118],["T_VARIABLE","$alias",119],["T_WHITESPACE","     ",119],"=",["T_WHITESPACE"," ",119],["T_CONSTANT_ENCAPSED_STRING","'ccp'",119],";",["T_WHITESPACE","\n            ",119],["T_VARIABLE","$attribute",120],["T_WHITESPACE"," ",120],"=",["T_WHITESPACE"," ",120],["T_CONSTANT_ENCAPSED_STRING","'category_id'",120],";",["T_WHITESPACE","\n            ",120],["T_VARIABLE","$value",121],["T_WHITESPACE","     ",121],"=",["T_WHITESPACE"," ",121],["T_VARIABLE","$this",121],["T_OBJECT_OPERATOR","->",121],["T_STRING","bindArrayOfIds",121],"(",["T_VARIABLE","$value",121],")",";",["T_WHITESPACE","\n        ",121],"}",["T_WHITESPACE","\n\n        ",122],["T_DOC_COMMENT","\/** @var $ruleResource Mage_Rule_Model_Resource_Rule_Condition_SqlBuilder *\/",124],["T_WHITESPACE","\n        ",124],["T_VARIABLE","$ruleResource",125],["T_WHITESPACE"," ",125],"=",["T_WHITESPACE"," ",125],["T_VARIABLE","$this",125],["T_OBJECT_OPERATOR","->",125],["T_STRING","getRuleResourceHelper",125],"(",")",";",["T_WHITESPACE","\n\n        ",125],["T_RETURN","return",127],["T_WHITESPACE"," ",127],["T_VARIABLE","$ruleResource",127],["T_OBJECT_OPERATOR","->",127],["T_STRING","getOperatorCondition",127],"(",["T_VARIABLE","$alias",127],["T_WHITESPACE"," ",127],".",["T_WHITESPACE"," ",127],["T_CONSTANT_ENCAPSED_STRING","'.'",127],["T_WHITESPACE"," ",127],".",["T_WHITESPACE"," ",127],["T_VARIABLE","$attribute",127],",",["T_WHITESPACE"," ",127],["T_VARIABLE","$operator",127],",",["T_WHITESPACE"," ",127],["T_VARIABLE","$value",127],")",";",["T_WHITESPACE","\n    ",127],"}",["T_WHITESPACE","\n\n    ",128],["T_DOC_COMMENT","\/**\n     * Rule condition SQL builder setter\n     *\n     * @param Mage_Rule_Model_Resource_Rule_Condition_SqlBuilder $ruleHelper\n     *\/",130],["T_WHITESPACE","\n    ",134],["T_PUBLIC","public",135],["T_WHITESPACE"," ",135],["T_FUNCTION","function",135],["T_WHITESPACE"," ",135],["T_STRING","setRuleResourceHelper",135],"(",["T_STRING","Mage_Rule_Model_Resource_Rule_Condition_SqlBuilder",135],["T_WHITESPACE"," ",135],["T_VARIABLE","$ruleHelper",135],")",["T_WHITESPACE","\n    ",135],"{",["T_WHITESPACE","\n        ",136],["T_VARIABLE","$this",137],["T_OBJECT_OPERATOR","->",137],["T_STRING","_ruleResourceHelper",137],["T_WHITESPACE"," ",137],"=",["T_WHITESPACE"," ",137],["T_VARIABLE","$ruleHelper",137],";",["T_WHITESPACE","\n    ",137],"}",["T_WHITESPACE","\n\n    ",138],["T_DOC_COMMENT","\/**\n     * Rule condition SQL builder getter\n     *\n     * @return Mage_Rule_Model_Resource_Rule_Condition_SqlBuilder\n     *\/",140],["T_WHITESPACE","\n    ",144],["T_PUBLIC","public",145],["T_WHITESPACE"," ",145],["T_FUNCTION","function",145],["T_WHITESPACE"," ",145],["T_STRING","getRuleResourceHelper",145],"(",")",["T_WHITESPACE","\n    ",145],"{",["T_WHITESPACE","\n        ",146],["T_IF","if",147],["T_WHITESPACE"," ",147],"(","!",["T_VARIABLE","$this",147],["T_OBJECT_OPERATOR","->",147],["T_STRING","_ruleResourceHelper",147],")",["T_WHITESPACE"," ",147],"{",["T_WHITESPACE","\n            ",147],["T_VARIABLE","$this",148],["T_OBJECT_OPERATOR","->",148],["T_STRING","_ruleResourceHelper",148],["T_WHITESPACE"," ",148],"=",["T_WHITESPACE"," ",148],["T_STRING","Mage",148],["T_DOUBLE_COLON","::",148],["T_STRING","getModel",148],"(",["T_CONSTANT_ENCAPSED_STRING","'rule\/resource_rule_condition_sqlBuilder'",148],")",";",["T_WHITESPACE","\n        ",148],"}",["T_WHITESPACE","\n        ",149],["T_RETURN","return",150],["T_WHITESPACE"," ",150],["T_VARIABLE","$this",150],["T_OBJECT_OPERATOR","->",150],["T_STRING","_ruleResourceHelper",150],";",["T_WHITESPACE","\n    ",150],"}",["T_WHITESPACE","\n\n    ",151],["T_DOC_COMMENT","\/**\n     * Retrieve attribute object\n     *\n     * @return Mage_Catalog_Model_Resource_Eav_Attribute\n     *\/",153],["T_WHITESPACE","\n    ",157],["T_PUBLIC","public",158],["T_WHITESPACE"," ",158],["T_FUNCTION","function",158],["T_WHITESPACE"," ",158],["T_STRING","getAttributeObject",158],"(",")",["T_WHITESPACE","\n    ",158],"{",["T_WHITESPACE","\n        ",159],["T_TRY","try",160],["T_WHITESPACE"," ",160],"{",["T_WHITESPACE","\n            ",160],["T_VARIABLE","$obj",161],["T_WHITESPACE"," ",161],"=",["T_WHITESPACE"," ",161],["T_STRING","Mage",161],["T_DOUBLE_COLON","::",161],["T_STRING","getSingleton",161],"(",["T_CONSTANT_ENCAPSED_STRING","'eav\/config'",161],")",["T_WHITESPACE","\n                ",161],["T_OBJECT_OPERATOR","->",162],["T_STRING","getAttribute",162],"(",["T_STRING","Mage_Catalog_Model_Product",162],["T_DOUBLE_COLON","::",162],["T_STRING","ENTITY",162],",",["T_WHITESPACE"," ",162],["T_VARIABLE","$this",162],["T_OBJECT_OPERATOR","->",162],["T_STRING","getAttribute",162],"(",")",")",";",["T_WHITESPACE","\n        ",162],"}",["T_WHITESPACE","\n        ",163],["T_CATCH","catch",164],["T_WHITESPACE"," ",164],"(",["T_STRING","Exception",164],["T_WHITESPACE"," ",164],["T_VARIABLE","$e",164],")",["T_WHITESPACE"," ",164],"{",["T_WHITESPACE","\n            ",164],["T_VARIABLE","$obj",165],["T_WHITESPACE"," ",165],"=",["T_WHITESPACE"," ",165],["T_NEW","new",165],["T_WHITESPACE"," ",165],["T_STRING","Varien_Object",165],"(",")",";",["T_WHITESPACE","\n            ",165],["T_VARIABLE","$obj",166],["T_OBJECT_OPERATOR","->",166],["T_STRING","setEntity",166],"(",["T_STRING","Mage",166],["T_DOUBLE_COLON","::",166],["T_STRING","getResourceSingleton",166],"(",["T_CONSTANT_ENCAPSED_STRING","'catalog\/product'",166],")",")",["T_WHITESPACE","\n                ",166],["T_OBJECT_OPERATOR","->",167],["T_STRING","setFrontendInput",167],"(",["T_CONSTANT_ENCAPSED_STRING","'text'",167],")",";",["T_WHITESPACE","\n        ",167],"}",["T_WHITESPACE","\n        ",168],["T_RETURN","return",169],["T_WHITESPACE"," ",169],["T_VARIABLE","$obj",169],";",["T_WHITESPACE","\n    ",169],"}",["T_WHITESPACE","\n\n    ",170],["T_DOC_COMMENT","\/**\n     * Add special attributes\n     *\n     * @param array $attributes\n     *\/",172],["T_WHITESPACE","\n    ",176],["T_PROTECTED","protected",177],["T_WHITESPACE"," ",177],["T_FUNCTION","function",177],["T_WHITESPACE"," ",177],["T_STRING","_addSpecialAttributes",177],"(",["T_ARRAY","array",177],["T_WHITESPACE"," ",177],"&",["T_VARIABLE","$attributes",177],")",["T_WHITESPACE","\n    ",177],"{",["T_WHITESPACE","\n        ",178],["T_VARIABLE","$attributes",179],"[",["T_CONSTANT_ENCAPSED_STRING","'attribute_set_id'",179],"]",["T_WHITESPACE"," ",179],"=",["T_WHITESPACE"," ",179],["T_STRING","Mage",179],["T_DOUBLE_COLON","::",179],["T_STRING","helper",179],"(",["T_CONSTANT_ENCAPSED_STRING","'catalogrule'",179],")",["T_OBJECT_OPERATOR","->",179],["T_STRING","__",179],"(",["T_CONSTANT_ENCAPSED_STRING","'Attribute Set'",179],")",";",["T_WHITESPACE","\n        ",179],["T_VARIABLE","$attributes",180],"[",["T_CONSTANT_ENCAPSED_STRING","'category_ids'",180],"]",["T_WHITESPACE"," ",180],"=",["T_WHITESPACE"," ",180],["T_STRING","Mage",180],["T_DOUBLE_COLON","::",180],["T_STRING","helper",180],"(",["T_CONSTANT_ENCAPSED_STRING","'catalogrule'",180],")",["T_OBJECT_OPERATOR","->",180],["T_STRING","__",180],"(",["T_CONSTANT_ENCAPSED_STRING","'Category'",180],")",";",["T_WHITESPACE","\n    ",180],"}",["T_WHITESPACE","\n\n    ",181],["T_DOC_COMMENT","\/**\n     * Load attribute options\n     *\n     * @return Mage_CatalogRule_Model_Rule_Condition_Product\n     *\/",183],["T_WHITESPACE","\n    ",187],["T_PUBLIC","public",188],["T_WHITESPACE"," ",188],["T_FUNCTION","function",188],["T_WHITESPACE"," ",188],["T_STRING","loadAttributeOptions",188],"(",")",["T_WHITESPACE","\n    ",188],"{",["T_WHITESPACE","\n        ",189],["T_VARIABLE","$productAttributes",190],["T_WHITESPACE"," ",190],"=",["T_WHITESPACE"," ",190],["T_STRING","Mage",190],["T_DOUBLE_COLON","::",190],["T_STRING","getResourceSingleton",190],"(",["T_CONSTANT_ENCAPSED_STRING","'catalog\/product'",190],")",["T_WHITESPACE","\n            ",190],["T_OBJECT_OPERATOR","->",191],["T_STRING","loadAllAttributes",191],"(",")",["T_WHITESPACE","\n            ",191],["T_OBJECT_OPERATOR","->",192],["T_STRING","getAttributesByCode",192],"(",")",";",["T_WHITESPACE","\n\n        ",192],["T_VARIABLE","$attributes",194],["T_WHITESPACE"," ",194],"=",["T_WHITESPACE"," ",194],["T_ARRAY","array",194],"(",")",";",["T_WHITESPACE","\n        ",194],["T_FOREACH","foreach",195],["T_WHITESPACE"," ",195],"(",["T_VARIABLE","$productAttributes",195],["T_WHITESPACE"," ",195],["T_AS","as",195],["T_WHITESPACE"," ",195],["T_VARIABLE","$attribute",195],")",["T_WHITESPACE"," ",195],"{",["T_WHITESPACE","\n            ",195],["T_COMMENT","\/* @var $attribute Mage_Catalog_Model_Resource_Eav_Attribute *\/",196],["T_WHITESPACE","\n            ",196],["T_IF","if",197],["T_WHITESPACE"," ",197],"(","!",["T_VARIABLE","$attribute",197],["T_OBJECT_OPERATOR","->",197],["T_STRING","isAllowedForRuleCondition",197],"(",")",["T_WHITESPACE","\n                ",197],["T_BOOLEAN_OR","||",198],["T_WHITESPACE"," ",198],"!",["T_VARIABLE","$attribute",198],["T_OBJECT_OPERATOR","->",198],["T_STRING","getDataUsingMethod",198],"(",["T_VARIABLE","$this",198],["T_OBJECT_OPERATOR","->",198],["T_STRING","_isUsedForRuleProperty",198],")",["T_WHITESPACE","\n            ",198],")",["T_WHITESPACE"," ",199],"{",["T_WHITESPACE","\n                ",199],["T_CONTINUE","continue",200],";",["T_WHITESPACE","\n            ",200],"}",["T_WHITESPACE","\n            ",201],["T_VARIABLE","$attributes",202],"[",["T_VARIABLE","$attribute",202],["T_OBJECT_OPERATOR","->",202],["T_STRING","getAttributeCode",202],"(",")","]",["T_WHITESPACE"," ",202],"=",["T_WHITESPACE"," ",202],["T_VARIABLE","$attribute",202],["T_OBJECT_OPERATOR","->",202],["T_STRING","getFrontendLabel",202],"(",")",";",["T_WHITESPACE","\n        ",202],"}",["T_WHITESPACE","\n\n        ",203],["T_VARIABLE","$this",205],["T_OBJECT_OPERATOR","->",205],["T_STRING","_addSpecialAttributes",205],"(",["T_VARIABLE","$attributes",205],")",";",["T_WHITESPACE","\n\n        ",205],["T_STRING","asort",207],"(",["T_VARIABLE","$attributes",207],")",";",["T_WHITESPACE","\n        ",207],["T_VARIABLE","$this",208],["T_OBJECT_OPERATOR","->",208],["T_STRING","setAttributeOption",208],"(",["T_VARIABLE","$attributes",208],")",";",["T_WHITESPACE","\n\n        ",208],["T_RETURN","return",210],["T_WHITESPACE"," ",210],["T_VARIABLE","$this",210],";",["T_WHITESPACE","\n    ",210],"}",["T_WHITESPACE","\n\n    ",211],["T_DOC_COMMENT","\/**\n     * Prepares values options to be used as select options or hashed array\n     * Result is stored in following keys:\n     *  'value_select_options' - normal select array: array(array('value' => $value, 'label' => $label), ...)\n     *  'value_option' - hashed array: array($value => $label, ...),\n     *\n     * @return Mage_CatalogRule_Model_Rule_Condition_Product\n     *\/",213],["T_WHITESPACE","\n    ",220],["T_PROTECTED","protected",221],["T_WHITESPACE"," ",221],["T_FUNCTION","function",221],["T_WHITESPACE"," ",221],["T_STRING","_prepareValueOptions",221],"(",")",["T_WHITESPACE","\n    ",221],"{",["T_WHITESPACE","\n        ",222],["T_COMMENT","\/\/ Check that both keys exist. Maybe somehow only one was set not in this routine, but externally.\n",223],["T_WHITESPACE","        ",224],["T_VARIABLE","$selectReady",224],["T_WHITESPACE"," ",224],"=",["T_WHITESPACE"," ",224],["T_VARIABLE","$this",224],["T_OBJECT_OPERATOR","->",224],["T_STRING","getData",224],"(",["T_CONSTANT_ENCAPSED_STRING","'value_select_options'",224],")",";",["T_WHITESPACE","\n        ",224],["T_VARIABLE","$hashedReady",225],["T_WHITESPACE"," ",225],"=",["T_WHITESPACE"," ",225],["T_VARIABLE","$this",225],["T_OBJECT_OPERATOR","->",225],["T_STRING","getData",225],"(",["T_CONSTANT_ENCAPSED_STRING","'value_option'",225],")",";",["T_WHITESPACE","\n        ",225],["T_IF","if",226],["T_WHITESPACE"," ",226],"(",["T_VARIABLE","$selectReady",226],["T_WHITESPACE"," ",226],["T_BOOLEAN_AND","&&",226],["T_WHITESPACE"," ",226],["T_VARIABLE","$hashedReady",226],")",["T_WHITESPACE"," ",226],"{",["T_WHITESPACE","\n            ",226],["T_RETURN","return",227],["T_WHITESPACE"," ",227],["T_VARIABLE","$this",227],";",["T_WHITESPACE","\n        ",227],"}",["T_WHITESPACE","\n\n        ",228],["T_COMMENT","\/\/ Get array of select options. It will be used as source for hashed options\n",230],["T_WHITESPACE","        ",231],["T_VARIABLE","$selectOptions",231],["T_WHITESPACE"," ",231],"=",["T_WHITESPACE"," ",231],["T_STRING","null",231],";",["T_WHITESPACE","\n        ",231],["T_IF","if",232],["T_WHITESPACE"," ",232],"(",["T_VARIABLE","$this",232],["T_OBJECT_OPERATOR","->",232],["T_STRING","getAttribute",232],"(",")",["T_WHITESPACE"," ",232],["T_IS_IDENTICAL","===",232],["T_WHITESPACE"," ",232],["T_CONSTANT_ENCAPSED_STRING","'attribute_set_id'",232],")",["T_WHITESPACE"," ",232],"{",["T_WHITESPACE","\n            ",232],["T_VARIABLE","$entityTypeId",233],["T_WHITESPACE"," ",233],"=",["T_WHITESPACE"," ",233],["T_STRING","Mage",233],["T_DOUBLE_COLON","::",233],["T_STRING","getSingleton",233],"(",["T_CONSTANT_ENCAPSED_STRING","'eav\/config'",233],")",["T_WHITESPACE","\n                ",233],["T_OBJECT_OPERATOR","->",234],["T_STRING","getEntityType",234],"(",["T_STRING","Mage_Catalog_Model_Product",234],["T_DOUBLE_COLON","::",234],["T_STRING","ENTITY",234],")",["T_OBJECT_OPERATOR","->",234],["T_STRING","getId",234],"(",")",";",["T_WHITESPACE","\n            ",234],["T_VARIABLE","$selectOptions",235],["T_WHITESPACE"," ",235],"=",["T_WHITESPACE"," ",235],["T_STRING","Mage",235],["T_DOUBLE_COLON","::",235],["T_STRING","getResourceModel",235],"(",["T_CONSTANT_ENCAPSED_STRING","'eav\/entity_attribute_set_collection'",235],")",["T_WHITESPACE","\n                ",235],["T_OBJECT_OPERATOR","->",236],["T_STRING","setEntityTypeFilter",236],"(",["T_VARIABLE","$entityTypeId",236],")",["T_WHITESPACE","\n                ",236],["T_OBJECT_OPERATOR","->",237],["T_STRING","load",237],"(",")",["T_WHITESPACE","\n                ",237],["T_OBJECT_OPERATOR","->",238],["T_STRING","toOptionArray",238],"(",")",";",["T_WHITESPACE","\n        ",238],"}",["T_WHITESPACE"," ",239],["T_ELSE","else",239],["T_WHITESPACE"," ",239],["T_IF","if",239],["T_WHITESPACE"," ",239],"(",["T_STRING","is_object",239],"(",["T_VARIABLE","$this",239],["T_OBJECT_OPERATOR","->",239],["T_STRING","getAttributeObject",239],"(",")",")",")",["T_WHITESPACE"," ",239],"{",["T_WHITESPACE","\n            ",239],["T_VARIABLE","$attributeObject",240],["T_WHITESPACE"," ",240],"=",["T_WHITESPACE"," ",240],["T_VARIABLE","$this",240],["T_OBJECT_OPERATOR","->",240],["T_STRING","getAttributeObject",240],"(",")",";",["T_WHITESPACE","\n            ",240],["T_IF","if",241],["T_WHITESPACE"," ",241],"(",["T_VARIABLE","$attributeObject",241],["T_OBJECT_OPERATOR","->",241],["T_STRING","usesSource",241],"(",")",")",["T_WHITESPACE"," ",241],"{",["T_WHITESPACE","\n                ",241],["T_IF","if",242],["T_WHITESPACE"," ",242],"(",["T_VARIABLE","$attributeObject",242],["T_OBJECT_OPERATOR","->",242],["T_STRING","getFrontendInput",242],"(",")",["T_WHITESPACE"," ",242],["T_IS_EQUAL","==",242],["T_WHITESPACE"," ",242],["T_CONSTANT_ENCAPSED_STRING","'multiselect'",242],")",["T_WHITESPACE"," ",242],"{",["T_WHITESPACE","\n                    ",242],["T_VARIABLE","$addEmptyOption",243],["T_WHITESPACE"," ",243],"=",["T_WHITESPACE"," ",243],["T_STRING","false",243],";",["T_WHITESPACE","\n                ",243],"}",["T_WHITESPACE"," ",244],["T_ELSE","else",244],["T_WHITESPACE"," ",244],"{",["T_WHITESPACE","\n                    ",244],["T_VARIABLE","$addEmptyOption",245],["T_WHITESPACE"," ",245],"=",["T_WHITESPACE"," ",245],["T_STRING","true",245],";",["T_WHITESPACE","\n                ",245],"}",["T_WHITESPACE","\n                ",246],["T_VARIABLE","$selectOptions",247],["T_WHITESPACE"," ",247],"=",["T_WHITESPACE"," ",247],["T_VARIABLE","$attributeObject",247],["T_OBJECT_OPERATOR","->",247],["T_STRING","getSource",247],"(",")",["T_OBJECT_OPERATOR","->",247],["T_STRING","getAllOptions",247],"(",["T_VARIABLE","$addEmptyOption",247],")",";",["T_WHITESPACE","\n            ",247],"}",["T_WHITESPACE","\n        ",248],"}",["T_WHITESPACE","\n\n        ",249],["T_COMMENT","\/\/ Set new values only if we really got them\n",251],["T_WHITESPACE","        ",252],["T_IF","if",252],["T_WHITESPACE"," ",252],"(",["T_VARIABLE","$selectOptions",252],["T_WHITESPACE"," ",252],["T_IS_NOT_IDENTICAL","!==",252],["T_WHITESPACE"," ",252],["T_STRING","null",252],")",["T_WHITESPACE"," ",252],"{",["T_WHITESPACE","\n            ",252],["T_COMMENT","\/\/ Overwrite only not already existing values\n",253],["T_WHITESPACE","            ",254],["T_IF","if",254],["T_WHITESPACE"," ",254],"(","!",["T_VARIABLE","$selectReady",254],")",["T_WHITESPACE"," ",254],"{",["T_WHITESPACE","\n                ",254],["T_VARIABLE","$this",255],["T_OBJECT_OPERATOR","->",255],["T_STRING","setData",255],"(",["T_CONSTANT_ENCAPSED_STRING","'value_select_options'",255],",",["T_WHITESPACE"," ",255],["T_VARIABLE","$selectOptions",255],")",";",["T_WHITESPACE","\n            ",255],"}",["T_WHITESPACE","\n            ",256],["T_IF","if",257],["T_WHITESPACE"," ",257],"(","!",["T_VARIABLE","$hashedReady",257],")",["T_WHITESPACE"," ",257],"{",["T_WHITESPACE","\n                ",257],["T_VARIABLE","$hashedOptions",258],["T_WHITESPACE"," ",258],"=",["T_WHITESPACE"," ",258],["T_ARRAY","array",258],"(",")",";",["T_WHITESPACE","\n                ",258],["T_FOREACH","foreach",259],["T_WHITESPACE"," ",259],"(",["T_VARIABLE","$selectOptions",259],["T_WHITESPACE"," ",259],["T_AS","as",259],["T_WHITESPACE"," ",259],["T_VARIABLE","$o",259],")",["T_WHITESPACE"," ",259],"{",["T_WHITESPACE","\n                    ",259],["T_IF","if",260],["T_WHITESPACE"," ",260],"(",["T_STRING","is_array",260],"(",["T_VARIABLE","$o",260],"[",["T_CONSTANT_ENCAPSED_STRING","'value'",260],"]",")",")",["T_WHITESPACE"," ",260],"{",["T_WHITESPACE","\n                        ",260],["T_CONTINUE","continue",261],";",["T_WHITESPACE"," ",261],["T_COMMENT","\/\/ We cannot use array as index\n",261],["T_WHITESPACE","                    ",262],"}",["T_WHITESPACE","\n                    ",262],["T_VARIABLE","$hashedOptions",263],"[",["T_VARIABLE","$o",263],"[",["T_CONSTANT_ENCAPSED_STRING","'value'",263],"]","]",["T_WHITESPACE"," ",263],"=",["T_WHITESPACE"," ",263],["T_VARIABLE","$o",263],"[",["T_CONSTANT_ENCAPSED_STRING","'label'",263],"]",";",["T_WHITESPACE","\n                ",263],"}",["T_WHITESPACE","\n                ",264],["T_VARIABLE","$this",265],["T_OBJECT_OPERATOR","->",265],["T_STRING","setData",265],"(",["T_CONSTANT_ENCAPSED_STRING","'value_option'",265],",",["T_WHITESPACE"," ",265],["T_VARIABLE","$hashedOptions",265],")",";",["T_WHITESPACE","\n            ",265],"}",["T_WHITESPACE","\n        ",266],"}",["T_WHITESPACE","\n\n        ",267],["T_RETURN","return",269],["T_WHITESPACE"," ",269],["T_VARIABLE","$this",269],";",["T_WHITESPACE","\n    ",269],"}",["T_WHITESPACE","\n\n    ",270],["T_DOC_COMMENT","\/**\n     * Retrieve value by option\n     *\n     * @param mixed $option\n     * @return string\n     *\/",272],["T_WHITESPACE","\n    ",277],["T_PUBLIC","public",278],["T_WHITESPACE"," ",278],["T_FUNCTION","function",278],["T_WHITESPACE"," ",278],["T_STRING","getValueOption",278],"(",["T_VARIABLE","$option",278],"=",["T_STRING","null",278],")",["T_WHITESPACE","\n    ",278],"{",["T_WHITESPACE","\n        ",279],["T_VARIABLE","$this",280],["T_OBJECT_OPERATOR","->",280],["T_STRING","_prepareValueOptions",280],"(",")",";",["T_WHITESPACE","\n        ",280],["T_RETURN","return",281],["T_WHITESPACE"," ",281],["T_VARIABLE","$this",281],["T_OBJECT_OPERATOR","->",281],["T_STRING","getData",281],"(",["T_CONSTANT_ENCAPSED_STRING","'value_option'",281],".","(","!",["T_STRING","is_null",281],"(",["T_VARIABLE","$option",281],")",["T_WHITESPACE"," ",281],"?",["T_WHITESPACE"," ",281],["T_CONSTANT_ENCAPSED_STRING","'\/'",281],".",["T_VARIABLE","$option",281],["T_WHITESPACE"," ",281],":",["T_WHITESPACE"," ",281],["T_CONSTANT_ENCAPSED_STRING","''",281],")",")",";",["T_WHITESPACE","\n    ",281],"}",["T_WHITESPACE","\n\n    ",282],["T_DOC_COMMENT","\/**\n     * Retrieve select option values\n     *\n     * @return array\n     *\/",284],["T_WHITESPACE","\n    ",288],["T_PUBLIC","public",289],["T_WHITESPACE"," ",289],["T_FUNCTION","function",289],["T_WHITESPACE"," ",289],["T_STRING","getValueSelectOptions",289],"(",")",["T_WHITESPACE","\n    ",289],"{",["T_WHITESPACE","\n        ",290],["T_VARIABLE","$this",291],["T_OBJECT_OPERATOR","->",291],["T_STRING","_prepareValueOptions",291],"(",")",";",["T_WHITESPACE","\n        ",291],["T_RETURN","return",292],["T_WHITESPACE"," ",292],["T_VARIABLE","$this",292],["T_OBJECT_OPERATOR","->",292],["T_STRING","getData",292],"(",["T_CONSTANT_ENCAPSED_STRING","'value_select_options'",292],")",";",["T_WHITESPACE","\n    ",292],"}",["T_WHITESPACE","\n\n    ",293],["T_DOC_COMMENT","\/**\n     * Retrieve after element HTML\n     *\n     * @return string\n     *\/",295],["T_WHITESPACE","\n    ",299],["T_PUBLIC","public",300],["T_WHITESPACE"," ",300],["T_FUNCTION","function",300],["T_WHITESPACE"," ",300],["T_STRING","getValueAfterElementHtml",300],"(",")",["T_WHITESPACE","\n    ",300],"{",["T_WHITESPACE","\n        ",301],["T_VARIABLE","$html",302],["T_WHITESPACE"," ",302],"=",["T_WHITESPACE"," ",302],["T_CONSTANT_ENCAPSED_STRING","''",302],";",["T_WHITESPACE","\n\n        ",302],["T_SWITCH","switch",304],["T_WHITESPACE"," ",304],"(",["T_VARIABLE","$this",304],["T_OBJECT_OPERATOR","->",304],["T_STRING","getAttribute",304],"(",")",")",["T_WHITESPACE"," ",304],"{",["T_WHITESPACE","\n            ",304],["T_CASE","case",305],["T_WHITESPACE"," ",305],["T_CONSTANT_ENCAPSED_STRING","'sku'",305],":",["T_WHITESPACE"," ",305],["T_CASE","case",305],["T_WHITESPACE"," ",305],["T_CONSTANT_ENCAPSED_STRING","'category_ids'",305],":",["T_WHITESPACE","\n                ",305],["T_VARIABLE","$image",306],["T_WHITESPACE"," ",306],"=",["T_WHITESPACE"," ",306],["T_STRING","Mage",306],["T_DOUBLE_COLON","::",306],["T_STRING","getDesign",306],"(",")",["T_OBJECT_OPERATOR","->",306],["T_STRING","getSkinUrl",306],"(",["T_CONSTANT_ENCAPSED_STRING","'images\/rule_chooser_trigger.gif'",306],")",";",["T_WHITESPACE","\n                ",306],["T_BREAK","break",307],";",["T_WHITESPACE","\n        ",307],"}",["T_WHITESPACE","\n\n        ",308],["T_IF","if",310],["T_WHITESPACE"," ",310],"(","!",["T_EMPTY","empty",310],"(",["T_VARIABLE","$image",310],")",")",["T_WHITESPACE"," ",310],"{",["T_WHITESPACE","\n            ",310],["T_VARIABLE","$html",311],["T_WHITESPACE"," ",311],"=",["T_WHITESPACE"," ",311],["T_CONSTANT_ENCAPSED_STRING","'<a href=\"javascript:void(0)\" class=\"rule-chooser-trigger\"><img src=\"'",311],["T_WHITESPACE","\n                ",311],".",["T_WHITESPACE"," ",312],["T_VARIABLE","$image",312],["T_WHITESPACE","\n                ",312],".",["T_WHITESPACE"," ",313],["T_CONSTANT_ENCAPSED_STRING","'\" alt=\"\" class=\"v-middle rule-chooser-trigger\" title=\"'",313],["T_WHITESPACE","\n                ",313],".",["T_WHITESPACE"," ",314],["T_STRING","Mage",314],["T_DOUBLE_COLON","::",314],["T_STRING","helper",314],"(",["T_CONSTANT_ENCAPSED_STRING","'core'",314],")",["T_OBJECT_OPERATOR","->",314],["T_STRING","quoteEscape",314],"(",["T_STRING","Mage",314],["T_DOUBLE_COLON","::",314],["T_STRING","helper",314],"(",["T_CONSTANT_ENCAPSED_STRING","'rule'",314],")",["T_OBJECT_OPERATOR","->",314],["T_STRING","__",314],"(",["T_CONSTANT_ENCAPSED_STRING","'Open Chooser'",314],")",")",["T_WHITESPACE","\n                ",314],".",["T_WHITESPACE"," ",315],["T_CONSTANT_ENCAPSED_STRING","'\" \/><\/a>'",315],";",["T_WHITESPACE","\n        ",315],"}",["T_WHITESPACE","\n        ",316],["T_RETURN","return",317],["T_WHITESPACE"," ",317],["T_VARIABLE","$html",317],";",["T_WHITESPACE","\n    ",317],"}",["T_WHITESPACE","\n\n    ",318],["T_DOC_COMMENT","\/**\n     * Retrieve attribute element\n     *\n     * @return Varien_Form_Element_Abstract\n     *\/",320],["T_WHITESPACE","\n    ",324],["T_PUBLIC","public",325],["T_WHITESPACE"," ",325],["T_FUNCTION","function",325],["T_WHITESPACE"," ",325],["T_STRING","getAttributeElement",325],"(",")",["T_WHITESPACE","\n    ",325],"{",["T_WHITESPACE","\n        ",326],["T_VARIABLE","$element",327],["T_WHITESPACE"," ",327],"=",["T_WHITESPACE"," ",327],["T_STRING","parent",327],["T_DOUBLE_COLON","::",327],["T_STRING","getAttributeElement",327],"(",")",";",["T_WHITESPACE","\n        ",327],["T_VARIABLE","$element",328],["T_OBJECT_OPERATOR","->",328],["T_STRING","setShowAsText",328],"(",["T_STRING","true",328],")",";",["T_WHITESPACE","\n        ",328],["T_RETURN","return",329],["T_WHITESPACE"," ",329],["T_VARIABLE","$element",329],";",["T_WHITESPACE","\n    ",329],"}",["T_WHITESPACE","\n\n    ",330],["T_DOC_COMMENT","\/**\n     * Collect validated attributes\n     *\n     * @param Mage_Catalog_Model_Resource_Eav_Mysql4_Product_Collection $productCollection\n     * @return Mage_CatalogRule_Model_Rule_Condition_Product\n     *\/",332],["T_WHITESPACE","\n    ",337],["T_PUBLIC","public",338],["T_WHITESPACE"," ",338],["T_FUNCTION","function",338],["T_WHITESPACE"," ",338],["T_STRING","collectValidatedAttributes",338],"(",["T_VARIABLE","$productCollection",338],")",["T_WHITESPACE","\n    ",338],"{",["T_WHITESPACE","\n        ",339],["T_VARIABLE","$attribute",340],["T_WHITESPACE"," ",340],"=",["T_WHITESPACE"," ",340],["T_VARIABLE","$this",340],["T_OBJECT_OPERATOR","->",340],["T_STRING","getAttribute",340],"(",")",";",["T_WHITESPACE","\n        ",340],["T_IF","if",341],["T_WHITESPACE"," ",341],"(",["T_CONSTANT_ENCAPSED_STRING","'category_ids'",341],["T_WHITESPACE"," ",341],["T_IS_NOT_EQUAL","!=",341],["T_WHITESPACE"," ",341],["T_VARIABLE","$attribute",341],")",["T_WHITESPACE"," ",341],"{",["T_WHITESPACE","\n            ",341],["T_IF","if",342],["T_WHITESPACE"," ",342],"(",["T_VARIABLE","$this",342],["T_OBJECT_OPERATOR","->",342],["T_STRING","getAttributeObject",342],"(",")",["T_OBJECT_OPERATOR","->",342],["T_STRING","isScopeGlobal",342],"(",")",")",["T_WHITESPACE"," ",342],"{",["T_WHITESPACE","\n                ",342],["T_VARIABLE","$attributes",343],["T_WHITESPACE"," ",343],"=",["T_WHITESPACE"," ",343],["T_VARIABLE","$this",343],["T_OBJECT_OPERATOR","->",343],["T_STRING","getRule",343],"(",")",["T_OBJECT_OPERATOR","->",343],["T_STRING","getCollectedAttributes",343],"(",")",";",["T_WHITESPACE","\n                ",343],["T_VARIABLE","$attributes",344],"[",["T_VARIABLE","$attribute",344],"]",["T_WHITESPACE"," ",344],"=",["T_WHITESPACE"," ",344],["T_STRING","true",344],";",["T_WHITESPACE","\n                ",344],["T_VARIABLE","$this",345],["T_OBJECT_OPERATOR","->",345],["T_STRING","getRule",345],"(",")",["T_OBJECT_OPERATOR","->",345],["T_STRING","setCollectedAttributes",345],"(",["T_VARIABLE","$attributes",345],")",";",["T_WHITESPACE","\n                ",345],["T_VARIABLE","$productCollection",346],["T_OBJECT_OPERATOR","->",346],["T_STRING","addAttributeToSelect",346],"(",["T_VARIABLE","$attribute",346],",",["T_WHITESPACE"," ",346],["T_CONSTANT_ENCAPSED_STRING","'left'",346],")",";",["T_WHITESPACE","\n            ",346],"}",["T_WHITESPACE"," ",347],["T_ELSE","else",347],["T_WHITESPACE"," ",347],"{",["T_WHITESPACE","\n                ",347],["T_VARIABLE","$this",348],["T_OBJECT_OPERATOR","->",348],["T_STRING","_entityAttributeValues",348],["T_WHITESPACE"," ",348],"=",["T_WHITESPACE"," ",348],["T_VARIABLE","$productCollection",348],["T_OBJECT_OPERATOR","->",348],["T_STRING","getAllAttributeValues",348],"(",["T_VARIABLE","$attribute",348],")",";",["T_WHITESPACE","\n            ",348],"}",["T_WHITESPACE","\n        ",349],"}",["T_WHITESPACE","\n\n        ",350],["T_RETURN","return",352],["T_WHITESPACE"," ",352],["T_VARIABLE","$this",352],";",["T_WHITESPACE","\n    ",352],"}",["T_WHITESPACE","\n\n    ",353],["T_DOC_COMMENT","\/**\n     * Retrieve input type\n     *\n     * @return string\n     *\/",355],["T_WHITESPACE","\n    ",359],["T_PUBLIC","public",360],["T_WHITESPACE"," ",360],["T_FUNCTION","function",360],["T_WHITESPACE"," ",360],["T_STRING","getInputType",360],"(",")",["T_WHITESPACE","\n    ",360],"{",["T_WHITESPACE","\n        ",361],["T_IF","if",362],["T_WHITESPACE"," ",362],"(",["T_VARIABLE","$this",362],["T_OBJECT_OPERATOR","->",362],["T_STRING","getAttribute",362],"(",")",["T_IS_IDENTICAL","===",362],["T_CONSTANT_ENCAPSED_STRING","'attribute_set_id'",362],")",["T_WHITESPACE"," ",362],"{",["T_WHITESPACE","\n            ",362],["T_RETURN","return",363],["T_WHITESPACE"," ",363],["T_CONSTANT_ENCAPSED_STRING","'select'",363],";",["T_WHITESPACE","\n        ",363],"}",["T_WHITESPACE","\n        ",364],["T_IF","if",365],["T_WHITESPACE"," ",365],"(","!",["T_STRING","is_object",365],"(",["T_VARIABLE","$this",365],["T_OBJECT_OPERATOR","->",365],["T_STRING","getAttributeObject",365],"(",")",")",")",["T_WHITESPACE"," ",365],"{",["T_WHITESPACE","\n            ",365],["T_RETURN","return",366],["T_WHITESPACE"," ",366],["T_CONSTANT_ENCAPSED_STRING","'string'",366],";",["T_WHITESPACE","\n        ",366],"}",["T_WHITESPACE","\n        ",367],["T_IF","if",368],["T_WHITESPACE"," ",368],"(",["T_VARIABLE","$this",368],["T_OBJECT_OPERATOR","->",368],["T_STRING","getAttributeObject",368],"(",")",["T_OBJECT_OPERATOR","->",368],["T_STRING","getAttributeCode",368],"(",")",["T_WHITESPACE"," ",368],["T_IS_EQUAL","==",368],["T_WHITESPACE"," ",368],["T_CONSTANT_ENCAPSED_STRING","'category_ids'",368],")",["T_WHITESPACE"," ",368],"{",["T_WHITESPACE","\n            ",368],["T_RETURN","return",369],["T_WHITESPACE"," ",369],["T_CONSTANT_ENCAPSED_STRING","'category'",369],";",["T_WHITESPACE","\n        ",369],"}",["T_WHITESPACE","\n        ",370],["T_SWITCH","switch",371],["T_WHITESPACE"," ",371],"(",["T_VARIABLE","$this",371],["T_OBJECT_OPERATOR","->",371],["T_STRING","getAttributeObject",371],"(",")",["T_OBJECT_OPERATOR","->",371],["T_STRING","getFrontendInput",371],"(",")",")",["T_WHITESPACE"," ",371],"{",["T_WHITESPACE","\n            ",371],["T_CASE","case",372],["T_WHITESPACE"," ",372],["T_CONSTANT_ENCAPSED_STRING","'select'",372],":",["T_WHITESPACE","\n                ",372],["T_RETURN","return",373],["T_WHITESPACE"," ",373],["T_CONSTANT_ENCAPSED_STRING","'select'",373],";",["T_WHITESPACE","\n\n            ",373],["T_CASE","case",375],["T_WHITESPACE"," ",375],["T_CONSTANT_ENCAPSED_STRING","'multiselect'",375],":",["T_WHITESPACE","\n                ",375],["T_RETURN","return",376],["T_WHITESPACE"," ",376],["T_CONSTANT_ENCAPSED_STRING","'multiselect'",376],";",["T_WHITESPACE","\n\n            ",376],["T_CASE","case",378],["T_WHITESPACE"," ",378],["T_CONSTANT_ENCAPSED_STRING","'date'",378],":",["T_WHITESPACE","\n                ",378],["T_RETURN","return",379],["T_WHITESPACE"," ",379],["T_CONSTANT_ENCAPSED_STRING","'date'",379],";",["T_WHITESPACE","\n\n            ",379],["T_CASE","case",381],["T_WHITESPACE"," ",381],["T_CONSTANT_ENCAPSED_STRING","'boolean'",381],":",["T_WHITESPACE","\n                ",381],["T_RETURN","return",382],["T_WHITESPACE"," ",382],["T_CONSTANT_ENCAPSED_STRING","'boolean'",382],";",["T_WHITESPACE","\n\n            ",382],["T_DEFAULT","default",384],":",["T_WHITESPACE","\n                ",384],["T_RETURN","return",385],["T_WHITESPACE"," ",385],["T_CONSTANT_ENCAPSED_STRING","'string'",385],";",["T_WHITESPACE","\n        ",385],"}",["T_WHITESPACE","\n    ",386],"}",["T_WHITESPACE","\n\n    ",387],["T_DOC_COMMENT","\/**\n     * Retrieve value element type\n     *\n     * @return string\n     *\/",389],["T_WHITESPACE","\n    ",393],["T_PUBLIC","public",394],["T_WHITESPACE"," ",394],["T_FUNCTION","function",394],["T_WHITESPACE"," ",394],["T_STRING","getValueElementType",394],"(",")",["T_WHITESPACE","\n    ",394],"{",["T_WHITESPACE","\n        ",395],["T_IF","if",396],["T_WHITESPACE"," ",396],"(",["T_VARIABLE","$this",396],["T_OBJECT_OPERATOR","->",396],["T_STRING","getAttribute",396],"(",")",["T_IS_IDENTICAL","===",396],["T_CONSTANT_ENCAPSED_STRING","'attribute_set_id'",396],")",["T_WHITESPACE"," ",396],"{",["T_WHITESPACE","\n            ",396],["T_RETURN","return",397],["T_WHITESPACE"," ",397],["T_CONSTANT_ENCAPSED_STRING","'select'",397],";",["T_WHITESPACE","\n        ",397],"}",["T_WHITESPACE","\n        ",398],["T_IF","if",399],["T_WHITESPACE"," ",399],"(","!",["T_STRING","is_object",399],"(",["T_VARIABLE","$this",399],["T_OBJECT_OPERATOR","->",399],["T_STRING","getAttributeObject",399],"(",")",")",")",["T_WHITESPACE"," ",399],"{",["T_WHITESPACE","\n            ",399],["T_RETURN","return",400],["T_WHITESPACE"," ",400],["T_CONSTANT_ENCAPSED_STRING","'text'",400],";",["T_WHITESPACE","\n        ",400],"}",["T_WHITESPACE","\n        ",401],["T_SWITCH","switch",402],["T_WHITESPACE"," ",402],"(",["T_VARIABLE","$this",402],["T_OBJECT_OPERATOR","->",402],["T_STRING","getAttributeObject",402],"(",")",["T_OBJECT_OPERATOR","->",402],["T_STRING","getFrontendInput",402],"(",")",")",["T_WHITESPACE"," ",402],"{",["T_WHITESPACE","\n            ",402],["T_CASE","case",403],["T_WHITESPACE"," ",403],["T_CONSTANT_ENCAPSED_STRING","'select'",403],":",["T_WHITESPACE","\n            ",403],["T_CASE","case",404],["T_WHITESPACE"," ",404],["T_CONSTANT_ENCAPSED_STRING","'boolean'",404],":",["T_WHITESPACE","\n                ",404],["T_RETURN","return",405],["T_WHITESPACE"," ",405],["T_CONSTANT_ENCAPSED_STRING","'select'",405],";",["T_WHITESPACE","\n\n            ",405],["T_CASE","case",407],["T_WHITESPACE"," ",407],["T_CONSTANT_ENCAPSED_STRING","'multiselect'",407],":",["T_WHITESPACE","\n                ",407],["T_RETURN","return",408],["T_WHITESPACE"," ",408],["T_CONSTANT_ENCAPSED_STRING","'multiselect'",408],";",["T_WHITESPACE","\n\n            ",408],["T_CASE","case",410],["T_WHITESPACE"," ",410],["T_CONSTANT_ENCAPSED_STRING","'date'",410],":",["T_WHITESPACE","\n                ",410],["T_RETURN","return",411],["T_WHITESPACE"," ",411],["T_CONSTANT_ENCAPSED_STRING","'date'",411],";",["T_WHITESPACE","\n\n            ",411],["T_DEFAULT","default",413],":",["T_WHITESPACE","\n                ",413],["T_RETURN","return",414],["T_WHITESPACE"," ",414],["T_CONSTANT_ENCAPSED_STRING","'text'",414],";",["T_WHITESPACE","\n        ",414],"}",["T_WHITESPACE","\n    ",415],"}",["T_WHITESPACE","\n\n    ",416],["T_DOC_COMMENT","\/**\n     * Retrieve value element\n     *\n     * @return Varien_Data_Form_Element_Abstract\n     *\/",418],["T_WHITESPACE","\n    ",422],["T_PUBLIC","public",423],["T_WHITESPACE"," ",423],["T_FUNCTION","function",423],["T_WHITESPACE"," ",423],["T_STRING","getValueElement",423],"(",")",["T_WHITESPACE","\n    ",423],"{",["T_WHITESPACE","\n        ",424],["T_VARIABLE","$element",425],["T_WHITESPACE"," ",425],"=",["T_WHITESPACE"," ",425],["T_STRING","parent",425],["T_DOUBLE_COLON","::",425],["T_STRING","getValueElement",425],"(",")",";",["T_WHITESPACE","\n        ",425],["T_IF","if",426],["T_WHITESPACE"," ",426],"(",["T_STRING","is_object",426],"(",["T_VARIABLE","$this",426],["T_OBJECT_OPERATOR","->",426],["T_STRING","getAttributeObject",426],"(",")",")",")",["T_WHITESPACE"," ",426],"{",["T_WHITESPACE","\n            ",426],["T_SWITCH","switch",427],["T_WHITESPACE"," ",427],"(",["T_VARIABLE","$this",427],["T_OBJECT_OPERATOR","->",427],["T_STRING","getAttributeObject",427],"(",")",["T_OBJECT_OPERATOR","->",427],["T_STRING","getFrontendInput",427],"(",")",")",["T_WHITESPACE"," ",427],"{",["T_WHITESPACE","\n                ",427],["T_CASE","case",428],["T_WHITESPACE"," ",428],["T_CONSTANT_ENCAPSED_STRING","'date'",428],":",["T_WHITESPACE","\n                    ",428],["T_VARIABLE","$element",429],["T_OBJECT_OPERATOR","->",429],["T_STRING","setImage",429],"(",["T_STRING","Mage",429],["T_DOUBLE_COLON","::",429],["T_STRING","getDesign",429],"(",")",["T_OBJECT_OPERATOR","->",429],["T_STRING","getSkinUrl",429],"(",["T_CONSTANT_ENCAPSED_STRING","'images\/grid-cal.gif'",429],")",")",";",["T_WHITESPACE","\n                    ",429],["T_BREAK","break",430],";",["T_WHITESPACE","\n            ",430],"}",["T_WHITESPACE","\n        ",431],"}",["T_WHITESPACE","\n\n        ",432],["T_RETURN","return",434],["T_WHITESPACE"," ",434],["T_VARIABLE","$element",434],";",["T_WHITESPACE","\n    ",434],"}",["T_WHITESPACE","\n\n    ",435],["T_DOC_COMMENT","\/**\n     * Retrieve value element chooser URL\n     *\n     * @return string\n     *\/",437],["T_WHITESPACE","\n    ",441],["T_PUBLIC","public",442],["T_WHITESPACE"," ",442],["T_FUNCTION","function",442],["T_WHITESPACE"," ",442],["T_STRING","getValueElementChooserUrl",442],"(",")",["T_WHITESPACE","\n    ",442],"{",["T_WHITESPACE","\n        ",443],["T_VARIABLE","$url",444],["T_WHITESPACE"," ",444],"=",["T_WHITESPACE"," ",444],["T_STRING","false",444],";",["T_WHITESPACE","\n        ",444],["T_SWITCH","switch",445],["T_WHITESPACE"," ",445],"(",["T_VARIABLE","$this",445],["T_OBJECT_OPERATOR","->",445],["T_STRING","getAttribute",445],"(",")",")",["T_WHITESPACE"," ",445],"{",["T_WHITESPACE","\n            ",445],["T_CASE","case",446],["T_WHITESPACE"," ",446],["T_CONSTANT_ENCAPSED_STRING","'sku'",446],":",["T_WHITESPACE"," ",446],["T_CASE","case",446],["T_WHITESPACE"," ",446],["T_CONSTANT_ENCAPSED_STRING","'category_ids'",446],":",["T_WHITESPACE","\n                ",446],["T_VARIABLE","$url",447],["T_WHITESPACE"," ",447],"=",["T_WHITESPACE"," ",447],["T_CONSTANT_ENCAPSED_STRING","'adminhtml\/promo_widget\/chooser'",447],["T_WHITESPACE","\n                    ",447],".",["T_CONSTANT_ENCAPSED_STRING","'\/attribute\/'",448],".",["T_VARIABLE","$this",448],["T_OBJECT_OPERATOR","->",448],["T_STRING","getAttribute",448],"(",")",";",["T_WHITESPACE","\n                ",448],["T_IF","if",449],["T_WHITESPACE"," ",449],"(",["T_VARIABLE","$this",449],["T_OBJECT_OPERATOR","->",449],["T_STRING","getJsFormObject",449],"(",")",")",["T_WHITESPACE"," ",449],"{",["T_WHITESPACE","\n                    ",449],["T_VARIABLE","$url",450],["T_WHITESPACE"," ",450],["T_CONCAT_EQUAL",".=",450],["T_WHITESPACE"," ",450],["T_CONSTANT_ENCAPSED_STRING","'\/form\/'",450],".",["T_VARIABLE","$this",450],["T_OBJECT_OPERATOR","->",450],["T_STRING","getJsFormObject",450],"(",")",";",["T_WHITESPACE","\n                ",450],"}",["T_WHITESPACE","\n                ",451],["T_BREAK","break",452],";",["T_WHITESPACE","\n        ",452],"}",["T_WHITESPACE","\n        ",453],["T_RETURN","return",454],["T_WHITESPACE"," ",454],["T_VARIABLE","$url",454],["T_IS_NOT_IDENTICAL","!==",454],["T_STRING","false",454],["T_WHITESPACE"," ",454],"?",["T_WHITESPACE"," ",454],["T_STRING","Mage",454],["T_DOUBLE_COLON","::",454],["T_STRING","helper",454],"(",["T_CONSTANT_ENCAPSED_STRING","'adminhtml'",454],")",["T_OBJECT_OPERATOR","->",454],["T_STRING","getUrl",454],"(",["T_VARIABLE","$url",454],")",["T_WHITESPACE"," ",454],":",["T_WHITESPACE"," ",454],["T_CONSTANT_ENCAPSED_STRING","''",454],";",["T_WHITESPACE","\n    ",454],"}",["T_WHITESPACE","\n\n    ",455],["T_DOC_COMMENT","\/**\n     * Retrieve Explicit Apply\n     *\n     * @return bool\n     *\/",457],["T_WHITESPACE","\n    ",461],["T_PUBLIC","public",462],["T_WHITESPACE"," ",462],["T_FUNCTION","function",462],["T_WHITESPACE"," ",462],["T_STRING","getExplicitApply",462],"(",")",["T_WHITESPACE","\n    ",462],"{",["T_WHITESPACE","\n        ",463],["T_SWITCH","switch",464],["T_WHITESPACE"," ",464],"(",["T_VARIABLE","$this",464],["T_OBJECT_OPERATOR","->",464],["T_STRING","getAttribute",464],"(",")",")",["T_WHITESPACE"," ",464],"{",["T_WHITESPACE","\n            ",464],["T_CASE","case",465],["T_WHITESPACE"," ",465],["T_CONSTANT_ENCAPSED_STRING","'sku'",465],":",["T_WHITESPACE"," ",465],["T_CASE","case",465],["T_WHITESPACE"," ",465],["T_CONSTANT_ENCAPSED_STRING","'category_ids'",465],":",["T_WHITESPACE","\n                ",465],["T_RETURN","return",466],["T_WHITESPACE"," ",466],["T_STRING","true",466],";",["T_WHITESPACE","\n        ",466],"}",["T_WHITESPACE","\n        ",467],["T_IF","if",468],["T_WHITESPACE"," ",468],"(",["T_STRING","is_object",468],"(",["T_VARIABLE","$this",468],["T_OBJECT_OPERATOR","->",468],["T_STRING","getAttributeObject",468],"(",")",")",")",["T_WHITESPACE"," ",468],"{",["T_WHITESPACE","\n            ",468],["T_SWITCH","switch",469],["T_WHITESPACE"," ",469],"(",["T_VARIABLE","$this",469],["T_OBJECT_OPERATOR","->",469],["T_STRING","getAttributeObject",469],"(",")",["T_OBJECT_OPERATOR","->",469],["T_STRING","getFrontendInput",469],"(",")",")",["T_WHITESPACE"," ",469],"{",["T_WHITESPACE","\n                ",469],["T_CASE","case",470],["T_WHITESPACE"," ",470],["T_CONSTANT_ENCAPSED_STRING","'date'",470],":",["T_WHITESPACE","\n                    ",470],["T_RETURN","return",471],["T_WHITESPACE"," ",471],["T_STRING","true",471],";",["T_WHITESPACE","\n            ",471],"}",["T_WHITESPACE","\n        ",472],"}",["T_WHITESPACE","\n        ",473],["T_RETURN","return",474],["T_WHITESPACE"," ",474],["T_STRING","false",474],";",["T_WHITESPACE","\n    ",474],"}",["T_WHITESPACE","\n\n    ",475],["T_DOC_COMMENT","\/**\n     * Load array\n     *\n     * @param array $arr\n     * @return Mage_CatalogRule_Model_Rule_Condition_Product\n     *\/",477],["T_WHITESPACE","\n    ",482],["T_PUBLIC","public",483],["T_WHITESPACE"," ",483],["T_FUNCTION","function",483],["T_WHITESPACE"," ",483],["T_STRING","loadArray",483],"(",["T_VARIABLE","$arr",483],")",["T_WHITESPACE","\n    ",483],"{",["T_WHITESPACE","\n        ",484],["T_VARIABLE","$this",485],["T_OBJECT_OPERATOR","->",485],["T_STRING","setAttribute",485],"(",["T_ISSET","isset",485],"(",["T_VARIABLE","$arr",485],"[",["T_CONSTANT_ENCAPSED_STRING","'attribute'",485],"]",")",["T_WHITESPACE"," ",485],"?",["T_WHITESPACE"," ",485],["T_VARIABLE","$arr",485],"[",["T_CONSTANT_ENCAPSED_STRING","'attribute'",485],"]",["T_WHITESPACE"," ",485],":",["T_WHITESPACE"," ",485],["T_STRING","false",485],")",";",["T_WHITESPACE","\n        ",485],["T_VARIABLE","$attribute",486],["T_WHITESPACE"," ",486],"=",["T_WHITESPACE"," ",486],["T_VARIABLE","$this",486],["T_OBJECT_OPERATOR","->",486],["T_STRING","getAttributeObject",486],"(",")",";",["T_WHITESPACE","\n\n        ",486],["T_VARIABLE","$isContainsOperator",488],["T_WHITESPACE"," ",488],"=",["T_WHITESPACE"," ",488],"!",["T_EMPTY","empty",488],"(",["T_VARIABLE","$arr",488],"[",["T_CONSTANT_ENCAPSED_STRING","'operator'",488],"]",")",["T_WHITESPACE"," ",488],["T_BOOLEAN_AND","&&",488],["T_WHITESPACE"," ",488],["T_STRING","in_array",488],"(",["T_VARIABLE","$arr",488],"[",["T_CONSTANT_ENCAPSED_STRING","'operator'",488],"]",",",["T_WHITESPACE"," ",488],["T_ARRAY","array",488],"(",["T_CONSTANT_ENCAPSED_STRING","'{}'",488],",",["T_WHITESPACE"," ",488],["T_CONSTANT_ENCAPSED_STRING","'!{}'",488],")",")",";",["T_WHITESPACE","\n        ",488],["T_IF","if",489],["T_WHITESPACE"," ",489],"(",["T_VARIABLE","$attribute",489],["T_WHITESPACE"," ",489],["T_BOOLEAN_AND","&&",489],["T_WHITESPACE"," ",489],["T_VARIABLE","$attribute",489],["T_OBJECT_OPERATOR","->",489],["T_STRING","getBackendType",489],"(",")",["T_WHITESPACE"," ",489],["T_IS_EQUAL","==",489],["T_WHITESPACE"," ",489],["T_CONSTANT_ENCAPSED_STRING","'decimal'",489],["T_WHITESPACE"," ",489],["T_BOOLEAN_AND","&&",489],["T_WHITESPACE"," ",489],"!",["T_VARIABLE","$isContainsOperator",489],")",["T_WHITESPACE"," ",489],"{",["T_WHITESPACE","\n            ",489],["T_IF","if",490],["T_WHITESPACE"," ",490],"(",["T_ISSET","isset",490],"(",["T_VARIABLE","$arr",490],"[",["T_CONSTANT_ENCAPSED_STRING","'value'",490],"]",")",")",["T_WHITESPACE"," ",490],"{",["T_WHITESPACE","\n                ",490],["T_IF","if",491],["T_WHITESPACE"," ",491],"(","!",["T_EMPTY","empty",491],"(",["T_VARIABLE","$arr",491],"[",["T_CONSTANT_ENCAPSED_STRING","'operator'",491],"]",")",["T_WHITESPACE","\n                    ",491],["T_BOOLEAN_AND","&&",492],["T_WHITESPACE"," ",492],["T_STRING","in_array",492],"(",["T_VARIABLE","$arr",492],"[",["T_CONSTANT_ENCAPSED_STRING","'operator'",492],"]",",",["T_WHITESPACE"," ",492],["T_ARRAY","array",492],"(",["T_CONSTANT_ENCAPSED_STRING","'!()'",492],",",["T_WHITESPACE"," ",492],["T_CONSTANT_ENCAPSED_STRING","'()'",492],")",")",["T_WHITESPACE","\n                    ",492],["T_BOOLEAN_AND","&&",493],["T_WHITESPACE"," ",493],["T_STRING","false",493],["T_WHITESPACE"," ",493],["T_IS_NOT_IDENTICAL","!==",493],["T_WHITESPACE"," ",493],["T_STRING","strpos",493],"(",["T_VARIABLE","$arr",493],"[",["T_CONSTANT_ENCAPSED_STRING","'value'",493],"]",",",["T_WHITESPACE"," ",493],["T_CONSTANT_ENCAPSED_STRING","','",493],")",")",["T_WHITESPACE"," ",493],"{",["T_WHITESPACE","\n\n                    ",493],["T_VARIABLE","$tmp",495],["T_WHITESPACE"," ",495],"=",["T_WHITESPACE"," ",495],["T_ARRAY","array",495],"(",")",";",["T_WHITESPACE","\n                    ",495],["T_FOREACH","foreach",496],["T_WHITESPACE"," ",496],"(",["T_STRING","explode",496],"(",["T_CONSTANT_ENCAPSED_STRING","','",496],",",["T_WHITESPACE"," ",496],["T_VARIABLE","$arr",496],"[",["T_CONSTANT_ENCAPSED_STRING","'value'",496],"]",")",["T_WHITESPACE"," ",496],["T_AS","as",496],["T_WHITESPACE"," ",496],["T_VARIABLE","$value",496],")",["T_WHITESPACE"," ",496],"{",["T_WHITESPACE","\n                        ",496],["T_VARIABLE","$tmp",497],"[","]",["T_WHITESPACE"," ",497],"=",["T_WHITESPACE"," ",497],["T_STRING","Mage",497],["T_DOUBLE_COLON","::",497],["T_STRING","app",497],"(",")",["T_OBJECT_OPERATOR","->",497],["T_STRING","getLocale",497],"(",")",["T_OBJECT_OPERATOR","->",497],["T_STRING","getNumber",497],"(",["T_VARIABLE","$value",497],")",";",["T_WHITESPACE","\n                    ",497],"}",["T_WHITESPACE","\n                    ",498],["T_VARIABLE","$arr",499],"[",["T_CONSTANT_ENCAPSED_STRING","'value'",499],"]",["T_WHITESPACE"," ",499],"=",["T_WHITESPACE","  ",499],["T_STRING","implode",499],"(",["T_CONSTANT_ENCAPSED_STRING","','",499],",",["T_WHITESPACE"," ",499],["T_VARIABLE","$tmp",499],")",";",["T_WHITESPACE","\n                ",499],"}",["T_WHITESPACE"," ",500],["T_ELSE","else",500],["T_WHITESPACE"," ",500],"{",["T_WHITESPACE","\n                    ",500],["T_VARIABLE","$arr",501],"[",["T_CONSTANT_ENCAPSED_STRING","'value'",501],"]",["T_WHITESPACE"," ",501],"=",["T_WHITESPACE","  ",501],["T_STRING","Mage",501],["T_DOUBLE_COLON","::",501],["T_STRING","app",501],"(",")",["T_OBJECT_OPERATOR","->",501],["T_STRING","getLocale",501],"(",")",["T_OBJECT_OPERATOR","->",501],["T_STRING","getNumber",501],"(",["T_VARIABLE","$arr",501],"[",["T_CONSTANT_ENCAPSED_STRING","'value'",501],"]",")",";",["T_WHITESPACE","\n                ",501],"}",["T_WHITESPACE","\n            ",502],"}",["T_WHITESPACE"," ",503],["T_ELSE","else",503],["T_WHITESPACE"," ",503],"{",["T_WHITESPACE","\n                ",503],["T_VARIABLE","$arr",504],"[",["T_CONSTANT_ENCAPSED_STRING","'value'",504],"]",["T_WHITESPACE"," ",504],"=",["T_WHITESPACE"," ",504],["T_STRING","false",504],";",["T_WHITESPACE","\n            ",504],"}",["T_WHITESPACE","\n            ",505],["T_VARIABLE","$arr",506],"[",["T_CONSTANT_ENCAPSED_STRING","'is_value_parsed'",506],"]",["T_WHITESPACE"," ",506],"=",["T_WHITESPACE"," ",506],["T_ISSET","isset",506],"(",["T_VARIABLE","$arr",506],"[",["T_CONSTANT_ENCAPSED_STRING","'is_value_parsed'",506],"]",")",["T_WHITESPACE","\n                ",506],"?",["T_WHITESPACE"," ",507],["T_STRING","Mage",507],["T_DOUBLE_COLON","::",507],["T_STRING","app",507],"(",")",["T_OBJECT_OPERATOR","->",507],["T_STRING","getLocale",507],"(",")",["T_OBJECT_OPERATOR","->",507],["T_STRING","getNumber",507],"(",["T_VARIABLE","$arr",507],"[",["T_CONSTANT_ENCAPSED_STRING","'is_value_parsed'",507],"]",")",["T_WHITESPACE"," ",507],":",["T_WHITESPACE"," ",507],["T_STRING","false",507],";",["T_WHITESPACE","\n        ",507],"}",["T_WHITESPACE","\n\n        ",508],["T_RETURN","return",510],["T_WHITESPACE"," ",510],["T_STRING","parent",510],["T_DOUBLE_COLON","::",510],["T_STRING","loadArray",510],"(",["T_VARIABLE","$arr",510],")",";",["T_WHITESPACE","\n    ",510],"}",["T_WHITESPACE","\n\n    ",511],["T_DOC_COMMENT","\/**\n     * Validate product attrbute value for condition\n     *\n     * @param Varien_Object $object\n     * @return bool\n     *\/",513],["T_WHITESPACE","\n    ",518],["T_PUBLIC","public",519],["T_WHITESPACE"," ",519],["T_FUNCTION","function",519],["T_WHITESPACE"," ",519],["T_STRING","validate",519],"(",["T_STRING","Varien_Object",519],["T_WHITESPACE"," ",519],["T_VARIABLE","$object",519],")",["T_WHITESPACE","\n    ",519],"{",["T_WHITESPACE","\n        ",520],["T_VARIABLE","$attrCode",521],["T_WHITESPACE"," ",521],"=",["T_WHITESPACE"," ",521],["T_VARIABLE","$this",521],["T_OBJECT_OPERATOR","->",521],["T_STRING","getAttribute",521],"(",")",";",["T_WHITESPACE","\n        ",521],["T_IF","if",522],["T_WHITESPACE"," ",522],"(","!","(",["T_VARIABLE","$object",522],["T_WHITESPACE"," ",522],["T_INSTANCEOF","instanceof",522],["T_WHITESPACE"," ",522],["T_STRING","Mage_Catalog_Model_Product",522],")",")",["T_WHITESPACE"," ",522],"{",["T_WHITESPACE","\n            ",522],["T_VARIABLE","$object",523],["T_WHITESPACE"," ",523],"=",["T_WHITESPACE"," ",523],["T_STRING","Mage",523],["T_DOUBLE_COLON","::",523],["T_STRING","getModel",523],"(",["T_CONSTANT_ENCAPSED_STRING","'catalog\/product'",523],")",["T_OBJECT_OPERATOR","->",523],["T_STRING","load",523],"(",["T_VARIABLE","$object",523],["T_OBJECT_OPERATOR","->",523],["T_STRING","getId",523],"(",")",")",";",["T_WHITESPACE","\n        ",523],"}",["T_WHITESPACE","\n\n        ",524],["T_IF","if",526],["T_WHITESPACE"," ",526],"(",["T_CONSTANT_ENCAPSED_STRING","'category_ids'",526],["T_WHITESPACE"," ",526],["T_IS_EQUAL","==",526],["T_WHITESPACE"," ",526],["T_VARIABLE","$attrCode",526],")",["T_WHITESPACE"," ",526],"{",["T_WHITESPACE","\n            ",526],["T_RETURN","return",527],["T_WHITESPACE"," ",527],["T_VARIABLE","$this",527],["T_OBJECT_OPERATOR","->",527],["T_STRING","validateAttribute",527],"(",["T_VARIABLE","$object",527],["T_OBJECT_OPERATOR","->",527],["T_STRING","getCategoryIds",527],"(",")",")",";",["T_WHITESPACE","\n        ",527],"}",["T_WHITESPACE"," ",528],["T_ELSEIF","elseif",528],["T_WHITESPACE"," ",528],"(","!",["T_WHITESPACE"," ",528],["T_ISSET","isset",528],"(",["T_VARIABLE","$this",528],["T_OBJECT_OPERATOR","->",528],["T_STRING","_entityAttributeValues",528],"[",["T_VARIABLE","$object",528],["T_OBJECT_OPERATOR","->",528],["T_STRING","getId",528],"(",")","]",")",")",["T_WHITESPACE"," ",528],"{",["T_WHITESPACE","\n            ",528],["T_IF","if",529],["T_WHITESPACE"," ",529],"(","!",["T_VARIABLE","$object",529],["T_OBJECT_OPERATOR","->",529],["T_STRING","getResource",529],"(",")",")",["T_WHITESPACE"," ",529],"{",["T_WHITESPACE","\n                ",529],["T_RETURN","return",530],["T_WHITESPACE"," ",530],["T_STRING","false",530],";",["T_WHITESPACE","\n            ",530],"}",["T_WHITESPACE","\n            ",531],["T_VARIABLE","$attr",532],["T_WHITESPACE"," ",532],"=",["T_WHITESPACE"," ",532],["T_VARIABLE","$object",532],["T_OBJECT_OPERATOR","->",532],["T_STRING","getResource",532],"(",")",["T_OBJECT_OPERATOR","->",532],["T_STRING","getAttribute",532],"(",["T_VARIABLE","$attrCode",532],")",";",["T_WHITESPACE","\n\n            ",532],["T_IF","if",534],["T_WHITESPACE"," ",534],"(",["T_VARIABLE","$attr",534],["T_WHITESPACE"," ",534],["T_BOOLEAN_AND","&&",534],["T_WHITESPACE"," ",534],["T_VARIABLE","$attr",534],["T_OBJECT_OPERATOR","->",534],["T_STRING","getBackendType",534],"(",")",["T_WHITESPACE"," ",534],["T_IS_EQUAL","==",534],["T_WHITESPACE"," ",534],["T_CONSTANT_ENCAPSED_STRING","'datetime'",534],["T_WHITESPACE"," ",534],["T_BOOLEAN_AND","&&",534],["T_WHITESPACE"," ",534],"!",["T_STRING","is_int",534],"(",["T_VARIABLE","$this",534],["T_OBJECT_OPERATOR","->",534],["T_STRING","getValue",534],"(",")",")",")",["T_WHITESPACE"," ",534],"{",["T_WHITESPACE","\n                ",534],["T_VARIABLE","$this",535],["T_OBJECT_OPERATOR","->",535],["T_STRING","setValue",535],"(",["T_STRING","strtotime",535],"(",["T_VARIABLE","$this",535],["T_OBJECT_OPERATOR","->",535],["T_STRING","getValue",535],"(",")",")",")",";",["T_WHITESPACE","\n                ",535],["T_VARIABLE","$value",536],["T_WHITESPACE"," ",536],"=",["T_WHITESPACE"," ",536],["T_STRING","strtotime",536],"(",["T_VARIABLE","$object",536],["T_OBJECT_OPERATOR","->",536],["T_STRING","getData",536],"(",["T_VARIABLE","$attrCode",536],")",")",";",["T_WHITESPACE","\n                ",536],["T_RETURN","return",537],["T_WHITESPACE"," ",537],["T_VARIABLE","$this",537],["T_OBJECT_OPERATOR","->",537],["T_STRING","validateAttribute",537],"(",["T_VARIABLE","$value",537],")",";",["T_WHITESPACE","\n            ",537],"}",["T_WHITESPACE","\n\n            ",538],["T_IF","if",540],["T_WHITESPACE"," ",540],"(",["T_VARIABLE","$attr",540],["T_WHITESPACE"," ",540],["T_BOOLEAN_AND","&&",540],["T_WHITESPACE"," ",540],["T_VARIABLE","$attr",540],["T_OBJECT_OPERATOR","->",540],["T_STRING","getFrontendInput",540],"(",")",["T_WHITESPACE"," ",540],["T_IS_EQUAL","==",540],["T_WHITESPACE"," ",540],["T_CONSTANT_ENCAPSED_STRING","'multiselect'",540],")",["T_WHITESPACE"," ",540],"{",["T_WHITESPACE","\n                ",540],["T_VARIABLE","$value",541],["T_WHITESPACE"," ",541],"=",["T_WHITESPACE"," ",541],["T_VARIABLE","$object",541],["T_OBJECT_OPERATOR","->",541],["T_STRING","getData",541],"(",["T_VARIABLE","$attrCode",541],")",";",["T_WHITESPACE","\n                ",541],["T_VARIABLE","$value",542],["T_WHITESPACE"," ",542],"=",["T_WHITESPACE"," ",542],["T_STRING","strlen",542],"(",["T_VARIABLE","$value",542],")",["T_WHITESPACE"," ",542],"?",["T_WHITESPACE"," ",542],["T_STRING","explode",542],"(",["T_CONSTANT_ENCAPSED_STRING","','",542],",",["T_WHITESPACE"," ",542],["T_VARIABLE","$value",542],")",["T_WHITESPACE"," ",542],":",["T_WHITESPACE"," ",542],["T_ARRAY","array",542],"(",")",";",["T_WHITESPACE","\n                ",542],["T_RETURN","return",543],["T_WHITESPACE"," ",543],["T_VARIABLE","$this",543],["T_OBJECT_OPERATOR","->",543],["T_STRING","validateAttribute",543],"(",["T_VARIABLE","$value",543],")",";",["T_WHITESPACE","\n            ",543],"}",["T_WHITESPACE","\n\n            ",544],["T_RETURN","return",546],["T_WHITESPACE"," ",546],["T_STRING","parent",546],["T_DOUBLE_COLON","::",546],["T_STRING","validate",546],"(",["T_VARIABLE","$object",546],")",";",["T_WHITESPACE","\n        ",546],"}",["T_WHITESPACE"," ",547],["T_ELSE","else",547],["T_WHITESPACE"," ",547],"{",["T_WHITESPACE","\n            ",547],["T_VARIABLE","$result",548],["T_WHITESPACE"," ",548],"=",["T_WHITESPACE"," ",548],["T_STRING","false",548],";",["T_WHITESPACE"," ",548],["T_COMMENT","\/\/ any valid value will set it to TRUE\n",548],["T_WHITESPACE","            ",549],["T_COMMENT","\/\/ remember old attribute state\n",549],["T_WHITESPACE","            ",550],["T_VARIABLE","$oldAttrValue",550],["T_WHITESPACE"," ",550],"=",["T_WHITESPACE"," ",550],["T_VARIABLE","$object",550],["T_OBJECT_OPERATOR","->",550],["T_STRING","hasData",550],"(",["T_VARIABLE","$attrCode",550],")",["T_WHITESPACE"," ",550],"?",["T_WHITESPACE"," ",550],["T_VARIABLE","$object",550],["T_OBJECT_OPERATOR","->",550],["T_STRING","getData",550],"(",["T_VARIABLE","$attrCode",550],")",["T_WHITESPACE"," ",550],":",["T_WHITESPACE"," ",550],["T_STRING","null",550],";",["T_WHITESPACE","\n\n            ",550],["T_FOREACH","foreach",552],["T_WHITESPACE"," ",552],"(",["T_VARIABLE","$this",552],["T_OBJECT_OPERATOR","->",552],["T_STRING","_entityAttributeValues",552],"[",["T_VARIABLE","$object",552],["T_OBJECT_OPERATOR","->",552],["T_STRING","getId",552],"(",")","]",["T_WHITESPACE"," ",552],["T_AS","as",552],["T_WHITESPACE"," ",552],["T_VARIABLE","$storeId",552],["T_WHITESPACE"," ",552],["T_DOUBLE_ARROW","=>",552],["T_WHITESPACE"," ",552],["T_VARIABLE","$value",552],")",["T_WHITESPACE"," ",552],"{",["T_WHITESPACE","\n                ",552],["T_VARIABLE","$attr",553],["T_WHITESPACE"," ",553],"=",["T_WHITESPACE"," ",553],["T_VARIABLE","$object",553],["T_OBJECT_OPERATOR","->",553],["T_STRING","getResource",553],"(",")",["T_OBJECT_OPERATOR","->",553],["T_STRING","getAttribute",553],"(",["T_VARIABLE","$attrCode",553],")",";",["T_WHITESPACE","\n                ",553],["T_IF","if",554],["T_WHITESPACE"," ",554],"(",["T_VARIABLE","$attr",554],["T_WHITESPACE"," ",554],["T_BOOLEAN_AND","&&",554],["T_WHITESPACE"," ",554],["T_VARIABLE","$attr",554],["T_OBJECT_OPERATOR","->",554],["T_STRING","getBackendType",554],"(",")",["T_WHITESPACE"," ",554],["T_IS_EQUAL","==",554],["T_WHITESPACE"," ",554],["T_CONSTANT_ENCAPSED_STRING","'datetime'",554],")",["T_WHITESPACE"," ",554],"{",["T_WHITESPACE","\n                    ",554],["T_VARIABLE","$value",555],["T_WHITESPACE"," ",555],"=",["T_WHITESPACE"," ",555],["T_STRING","strtotime",555],"(",["T_VARIABLE","$value",555],")",";",["T_WHITESPACE","\n                ",555],"}",["T_WHITESPACE"," ",556],["T_ELSE","else",556],["T_WHITESPACE"," ",556],["T_IF","if",556],["T_WHITESPACE"," ",556],"(",["T_VARIABLE","$attr",556],["T_WHITESPACE"," ",556],["T_BOOLEAN_AND","&&",556],["T_WHITESPACE"," ",556],["T_VARIABLE","$attr",556],["T_OBJECT_OPERATOR","->",556],["T_STRING","getFrontendInput",556],"(",")",["T_WHITESPACE"," ",556],["T_IS_EQUAL","==",556],["T_WHITESPACE"," ",556],["T_CONSTANT_ENCAPSED_STRING","'multiselect'",556],")",["T_WHITESPACE"," ",556],"{",["T_WHITESPACE","\n                    ",556],["T_VARIABLE","$value",557],["T_WHITESPACE"," ",557],"=",["T_WHITESPACE"," ",557],["T_STRING","strlen",557],"(",["T_VARIABLE","$value",557],")",["T_WHITESPACE"," ",557],"?",["T_WHITESPACE"," ",557],["T_STRING","explode",557],"(",["T_CONSTANT_ENCAPSED_STRING","','",557],",",["T_WHITESPACE"," ",557],["T_VARIABLE","$value",557],")",["T_WHITESPACE"," ",557],":",["T_WHITESPACE"," ",557],["T_ARRAY","array",557],"(",")",";",["T_WHITESPACE","\n                ",557],"}",["T_WHITESPACE","\n\n                ",558],["T_VARIABLE","$object",560],["T_OBJECT_OPERATOR","->",560],["T_STRING","setData",560],"(",["T_VARIABLE","$attrCode",560],",",["T_WHITESPACE"," ",560],["T_VARIABLE","$value",560],")",";",["T_WHITESPACE","\n                ",560],["T_VARIABLE","$result",561],["T_WHITESPACE"," ",561],["T_OR_EQUAL","|=",561],["T_WHITESPACE"," ",561],["T_STRING","parent",561],["T_DOUBLE_COLON","::",561],["T_STRING","validate",561],"(",["T_VARIABLE","$object",561],")",";",["T_WHITESPACE","\n\n                ",561],["T_IF","if",563],["T_WHITESPACE"," ",563],"(",["T_VARIABLE","$result",563],")",["T_WHITESPACE"," ",563],"{",["T_WHITESPACE","\n                    ",563],["T_BREAK","break",564],";",["T_WHITESPACE","\n                ",564],"}",["T_WHITESPACE","\n            ",565],"}",["T_WHITESPACE","\n\n            ",566],["T_IF","if",568],["T_WHITESPACE"," ",568],"(",["T_STRING","is_null",568],"(",["T_VARIABLE","$oldAttrValue",568],")",")",["T_WHITESPACE"," ",568],"{",["T_WHITESPACE","\n                ",568],["T_VARIABLE","$object",569],["T_OBJECT_OPERATOR","->",569],["T_STRING","unsetData",569],"(",["T_VARIABLE","$attrCode",569],")",";",["T_WHITESPACE","\n            ",569],"}",["T_WHITESPACE"," ",570],["T_ELSE","else",570],["T_WHITESPACE"," ",570],"{",["T_WHITESPACE","\n                ",570],["T_VARIABLE","$object",571],["T_OBJECT_OPERATOR","->",571],["T_STRING","setData",571],"(",["T_VARIABLE","$attrCode",571],",",["T_WHITESPACE"," ",571],["T_VARIABLE","$oldAttrValue",571],")",";",["T_WHITESPACE","\n            ",571],"}",["T_WHITESPACE","\n\n            ",572],["T_RETURN","return",574],["T_WHITESPACE"," ",574],["T_BOOL_CAST","(bool)",574],["T_WHITESPACE"," ",574],["T_VARIABLE","$result",574],";",["T_WHITESPACE","\n        ",574],"}",["T_WHITESPACE","\n    ",575],"}",["T_WHITESPACE","\n\n    ",576],["T_DOC_COMMENT","\/**\n     * Get correct operator for validation\n     *\n     * @return string\n     *\/",578],["T_WHITESPACE","\n    ",582],["T_PUBLIC","public",583],["T_WHITESPACE"," ",583],["T_FUNCTION","function",583],["T_WHITESPACE"," ",583],["T_STRING","getOperatorForValidate",583],"(",")",["T_WHITESPACE","\n    ",583],"{",["T_WHITESPACE","\n        ",584],["T_RETURN","return",585],["T_WHITESPACE"," ",585],["T_VARIABLE","$this",585],["T_OBJECT_OPERATOR","->",585],["T_STRING","correctOperator",585],"(",["T_VARIABLE","$this",585],["T_OBJECT_OPERATOR","->",585],["T_STRING","getOperator",585],"(",")",",",["T_WHITESPACE"," ",585],["T_VARIABLE","$this",585],["T_OBJECT_OPERATOR","->",585],["T_STRING","getInputType",585],"(",")",")",";",["T_WHITESPACE","\n    ",585],"}",["T_WHITESPACE","\n\n    ",586],["T_DOC_COMMENT","\/**\n     * Correct '==' and '!=' operators\n     * Categories can't be equal because product is included categories selected by administrator and in their parents\n     *\n     * @param string $operator\n     * @param string $inputType\n     * @return string\n     *\/",588],["T_WHITESPACE","\n    ",595],["T_PUBLIC","public",596],["T_WHITESPACE"," ",596],["T_FUNCTION","function",596],["T_WHITESPACE"," ",596],["T_STRING","correctOperator",596],"(",["T_VARIABLE","$operator",596],",",["T_WHITESPACE"," ",596],["T_VARIABLE","$inputType",596],")",["T_WHITESPACE","\n    ",596],"{",["T_WHITESPACE","\n        ",597],["T_IF","if",598],["T_WHITESPACE"," ",598],"(",["T_VARIABLE","$inputType",598],["T_WHITESPACE"," ",598],["T_IS_EQUAL","==",598],["T_WHITESPACE"," ",598],["T_CONSTANT_ENCAPSED_STRING","'category'",598],")",["T_WHITESPACE"," ",598],"{",["T_WHITESPACE","\n            ",598],["T_IF","if",599],["T_WHITESPACE"," ",599],"(",["T_VARIABLE","$operator",599],["T_WHITESPACE"," ",599],["T_IS_EQUAL","==",599],["T_WHITESPACE"," ",599],["T_CONSTANT_ENCAPSED_STRING","'=='",599],")",["T_WHITESPACE"," ",599],"{",["T_WHITESPACE","\n                ",599],["T_VARIABLE","$operator",600],["T_WHITESPACE"," ",600],"=",["T_WHITESPACE"," ",600],["T_CONSTANT_ENCAPSED_STRING","'{}'",600],";",["T_WHITESPACE","\n            ",600],"}",["T_WHITESPACE"," ",601],["T_ELSEIF","elseif",601],["T_WHITESPACE"," ",601],"(",["T_VARIABLE","$operator",601],["T_WHITESPACE"," ",601],["T_IS_EQUAL","==",601],["T_WHITESPACE"," ",601],["T_CONSTANT_ENCAPSED_STRING","'!='",601],")",["T_WHITESPACE"," ",601],"{",["T_WHITESPACE","\n                ",601],["T_VARIABLE","$operator",602],["T_WHITESPACE"," ",602],"=",["T_WHITESPACE"," ",602],["T_CONSTANT_ENCAPSED_STRING","'!{}'",602],";",["T_WHITESPACE","\n            ",602],"}",["T_WHITESPACE","\n        ",603],"}",["T_WHITESPACE","\n\n        ",604],["T_RETURN","return",606],["T_WHITESPACE"," ",606],["T_VARIABLE","$operator",606],";",["T_WHITESPACE","\n    ",606],"}",["T_WHITESPACE","\n",607],"}",["T_WHITESPACE","\n",608]]
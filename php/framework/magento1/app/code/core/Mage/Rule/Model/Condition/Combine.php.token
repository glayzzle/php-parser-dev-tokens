[["T_OPEN_TAG","<?php\n",1],["T_DOC_COMMENT","\/**\n * Magento\n *\n * NOTICE OF LICENSE\n *\n * This source file is subject to the Open Software License (OSL 3.0)\n * that is bundled with this package in the file LICENSE.txt.\n * It is also available through the world-wide-web at this URL:\n * http:\/\/opensource.org\/licenses\/osl-3.0.php\n * If you did not receive a copy of the license and are unable to\n * obtain it through the world-wide-web, please send an email\n * to license@magento.com so we can send you a copy immediately.\n *\n * DISCLAIMER\n *\n * Do not edit or add to this file if you wish to upgrade Magento to newer\n * versions in the future. If you wish to customize Magento for your\n * needs please refer to http:\/\/www.magento.com for more information.\n *\n * @category    Mage\n * @package     Mage_Rule\n * @copyright  Copyright (c) 2006-2016 X.commerce, Inc. and affiliates (http:\/\/www.magento.com)\n * @license    http:\/\/opensource.org\/licenses\/osl-3.0.php  Open Software License (OSL 3.0)\n *\/",2],["T_WHITESPACE","\n\n",25],["T_DOC_COMMENT","\/**\n * @method string getAggregator()\n *\/",27],["T_WHITESPACE","\n",29],["T_CLASS","class",30],["T_WHITESPACE"," ",30],["T_STRING","Mage_Rule_Model_Condition_Combine",30],["T_WHITESPACE"," ",30],["T_EXTENDS","extends",30],["T_WHITESPACE"," ",30],["T_STRING","Mage_Rule_Model_Condition_Abstract",30],["T_WHITESPACE","\n",30],"{",["T_WHITESPACE","\n    ",31],["T_DOC_COMMENT","\/**\n     * Store all used condition models\n     *\n     * @var array\n     *\/",32],["T_WHITESPACE","\n    ",36],["T_STATIC","static",37],["T_WHITESPACE"," ",37],["T_PROTECTED","protected",37],["T_WHITESPACE"," ",37],["T_VARIABLE","$_conditionModels",37],["T_WHITESPACE"," ",37],"=",["T_WHITESPACE"," ",37],["T_ARRAY","array",37],"(",")",";",["T_WHITESPACE","\n\n    ",37],["T_DOC_COMMENT","\/**\n     * Prepare sql where by condition\n     *\n     * @return string\n     *\/",39],["T_WHITESPACE","\n    ",43],["T_PUBLIC","public",44],["T_WHITESPACE"," ",44],["T_FUNCTION","function",44],["T_WHITESPACE"," ",44],["T_STRING","prepareConditionSql",44],"(",")",["T_WHITESPACE","\n    ",44],"{",["T_WHITESPACE","\n        ",45],["T_VARIABLE","$wheres",46],["T_WHITESPACE"," ",46],"=",["T_WHITESPACE"," ",46],["T_ARRAY","array",46],"(",")",";",["T_WHITESPACE","\n        ",46],["T_FOREACH","foreach",47],["T_WHITESPACE"," ",47],"(",["T_VARIABLE","$this",47],["T_OBJECT_OPERATOR","->",47],["T_STRING","getConditions",47],"(",")",["T_WHITESPACE"," ",47],["T_AS","as",47],["T_WHITESPACE"," ",47],["T_VARIABLE","$condition",47],")",["T_WHITESPACE"," ",47],"{",["T_WHITESPACE","\n            ",47],["T_DOC_COMMENT","\/** @var $condition Mage_Rule_Model_Condition_Abstract *\/",48],["T_WHITESPACE","\n            ",48],["T_VARIABLE","$wheres",49],"[","]",["T_WHITESPACE"," ",49],"=",["T_WHITESPACE"," ",49],["T_VARIABLE","$condition",49],["T_OBJECT_OPERATOR","->",49],["T_STRING","prepareConditionSql",49],"(",")",";",["T_WHITESPACE","\n        ",49],"}",["T_WHITESPACE","\n\n        ",50],["T_IF","if",52],["T_WHITESPACE"," ",52],"(",["T_EMPTY","empty",52],"(",["T_VARIABLE","$wheres",52],")",")",["T_WHITESPACE"," ",52],"{",["T_WHITESPACE","\n            ",52],["T_RETURN","return",53],["T_WHITESPACE"," ",53],["T_CONSTANT_ENCAPSED_STRING","''",53],";",["T_WHITESPACE","\n        ",53],"}",["T_WHITESPACE","\n        ",54],["T_VARIABLE","$delimiter",55],["T_WHITESPACE"," ",55],"=",["T_WHITESPACE"," ",55],["T_VARIABLE","$this",55],["T_OBJECT_OPERATOR","->",55],["T_STRING","getAggregator",55],"(",")",["T_WHITESPACE"," ",55],["T_IS_EQUAL","==",55],["T_WHITESPACE"," ",55],["T_CONSTANT_ENCAPSED_STRING","\"all\"",55],["T_WHITESPACE"," ",55],"?",["T_WHITESPACE"," ",55],["T_CONSTANT_ENCAPSED_STRING","' AND '",55],["T_WHITESPACE"," ",55],":",["T_WHITESPACE"," ",55],["T_CONSTANT_ENCAPSED_STRING","' OR '",55],";",["T_WHITESPACE","\n        ",55],["T_RETURN","return",56],["T_WHITESPACE"," ",56],["T_CONSTANT_ENCAPSED_STRING","' ('",56],["T_WHITESPACE"," ",56],".",["T_WHITESPACE"," ",56],["T_STRING","implode",56],"(",["T_VARIABLE","$delimiter",56],",",["T_WHITESPACE"," ",56],["T_VARIABLE","$wheres",56],")",["T_WHITESPACE"," ",56],".",["T_WHITESPACE"," ",56],["T_CONSTANT_ENCAPSED_STRING","') '",56],";",["T_WHITESPACE","\n    ",56],"}",["T_WHITESPACE","\n\n    ",57],["T_DOC_COMMENT","\/**\n     * Retrieve new object for each requested model.\n     * If model is requested first time, store it at static array.\n     *\n     * It's made by performance reasons to avoid initialization of same models each time when rules are being processed.\n     *\n     * @param  string $modelClass\n     * @return Mage_Rule_Model_Condition_Abstract|bool\n     *\/",59],["T_WHITESPACE","\n    ",67],["T_PROTECTED","protected",68],["T_WHITESPACE"," ",68],["T_FUNCTION","function",68],["T_WHITESPACE"," ",68],["T_STRING","_getNewConditionModelInstance",68],"(",["T_VARIABLE","$modelClass",68],")",["T_WHITESPACE","\n    ",68],"{",["T_WHITESPACE","\n        ",69],["T_IF","if",70],["T_WHITESPACE"," ",70],"(",["T_EMPTY","empty",70],"(",["T_VARIABLE","$modelClass",70],")",")",["T_WHITESPACE"," ",70],"{",["T_WHITESPACE","\n            ",70],["T_RETURN","return",71],["T_WHITESPACE"," ",71],["T_STRING","false",71],";",["T_WHITESPACE","\n        ",71],"}",["T_WHITESPACE","\n\n        ",72],["T_IF","if",74],["T_WHITESPACE"," ",74],"(","!",["T_STRING","array_key_exists",74],"(",["T_VARIABLE","$modelClass",74],",",["T_WHITESPACE"," ",74],["T_STRING","self",74],["T_DOUBLE_COLON","::",74],["T_VARIABLE","$_conditionModels",74],")",")",["T_WHITESPACE"," ",74],"{",["T_WHITESPACE","\n            ",74],["T_VARIABLE","$model",75],["T_WHITESPACE"," ",75],"=",["T_WHITESPACE"," ",75],["T_STRING","Mage",75],["T_DOUBLE_COLON","::",75],["T_STRING","getModel",75],"(",["T_VARIABLE","$modelClass",75],")",";",["T_WHITESPACE","\n            ",75],["T_STRING","self",76],["T_DOUBLE_COLON","::",76],["T_VARIABLE","$_conditionModels",76],"[",["T_VARIABLE","$modelClass",76],"]",["T_WHITESPACE"," ",76],"=",["T_WHITESPACE"," ",76],["T_VARIABLE","$model",76],";",["T_WHITESPACE","\n        ",76],"}",["T_WHITESPACE"," ",77],["T_ELSE","else",77],["T_WHITESPACE"," ",77],"{",["T_WHITESPACE","\n            ",77],["T_VARIABLE","$model",78],["T_WHITESPACE"," ",78],"=",["T_WHITESPACE"," ",78],["T_STRING","self",78],["T_DOUBLE_COLON","::",78],["T_VARIABLE","$_conditionModels",78],"[",["T_VARIABLE","$modelClass",78],"]",";",["T_WHITESPACE","\n        ",78],"}",["T_WHITESPACE","\n\n        ",79],["T_IF","if",81],["T_WHITESPACE"," ",81],"(","!",["T_VARIABLE","$model",81],")",["T_WHITESPACE"," ",81],"{",["T_WHITESPACE","\n            ",81],["T_RETURN","return",82],["T_WHITESPACE"," ",82],["T_STRING","false",82],";",["T_WHITESPACE","\n        ",82],"}",["T_WHITESPACE","\n\n        ",83],["T_VARIABLE","$newModel",85],["T_WHITESPACE"," ",85],"=",["T_WHITESPACE"," ",85],["T_CLONE","clone",85],["T_WHITESPACE"," ",85],["T_VARIABLE","$model",85],";",["T_WHITESPACE","\n        ",85],["T_RETURN","return",86],["T_WHITESPACE"," ",86],["T_VARIABLE","$newModel",86],";",["T_WHITESPACE","\n    ",86],"}",["T_WHITESPACE","\n\n    ",87],["T_PUBLIC","public",89],["T_WHITESPACE"," ",89],["T_FUNCTION","function",89],["T_WHITESPACE"," ",89],["T_STRING","__construct",89],"(",")",["T_WHITESPACE","\n    ",89],"{",["T_WHITESPACE","\n        ",90],["T_STRING","parent",91],["T_DOUBLE_COLON","::",91],["T_STRING","__construct",91],"(",")",";",["T_WHITESPACE","\n        ",91],["T_VARIABLE","$this",92],["T_OBJECT_OPERATOR","->",92],["T_STRING","setType",92],"(",["T_CONSTANT_ENCAPSED_STRING","'rule\/condition_combine'",92],")",["T_WHITESPACE","\n            ",92],["T_OBJECT_OPERATOR","->",93],["T_STRING","setAggregator",93],"(",["T_CONSTANT_ENCAPSED_STRING","'all'",93],")",["T_WHITESPACE","\n            ",93],["T_OBJECT_OPERATOR","->",94],["T_STRING","setValue",94],"(",["T_STRING","true",94],")",["T_WHITESPACE","\n            ",94],["T_OBJECT_OPERATOR","->",95],["T_STRING","setConditions",95],"(",["T_ARRAY","array",95],"(",")",")",["T_WHITESPACE","\n            ",95],["T_OBJECT_OPERATOR","->",96],["T_STRING","setActions",96],"(",["T_ARRAY","array",96],"(",")",")",";",["T_WHITESPACE","\n\n\n        ",96],["T_VARIABLE","$this",99],["T_OBJECT_OPERATOR","->",99],["T_STRING","loadAggregatorOptions",99],"(",")",";",["T_WHITESPACE","\n        ",99],["T_IF","if",100],["T_WHITESPACE"," ",100],"(",["T_VARIABLE","$options",100],["T_WHITESPACE"," ",100],"=",["T_WHITESPACE"," ",100],["T_VARIABLE","$this",100],["T_OBJECT_OPERATOR","->",100],["T_STRING","getAggregatorOptions",100],"(",")",")",["T_WHITESPACE"," ",100],"{",["T_WHITESPACE","\n            ",100],["T_FOREACH","foreach",101],["T_WHITESPACE"," ",101],"(",["T_VARIABLE","$options",101],["T_WHITESPACE"," ",101],["T_AS","as",101],["T_WHITESPACE"," ",101],["T_VARIABLE","$aggregator",101],["T_DOUBLE_ARROW","=>",101],["T_VARIABLE","$dummy",101],")",["T_WHITESPACE"," ",101],"{",["T_WHITESPACE"," ",101],["T_VARIABLE","$this",101],["T_OBJECT_OPERATOR","->",101],["T_STRING","setAggregator",101],"(",["T_VARIABLE","$aggregator",101],")",";",["T_WHITESPACE"," ",101],["T_BREAK","break",101],";",["T_WHITESPACE"," ",101],"}",["T_WHITESPACE","\n        ",101],"}",["T_WHITESPACE","\n    ",102],"}",["T_WHITESPACE","\n",103],["T_COMMENT","\/* start aggregator methods *\/",104],["T_WHITESPACE","\n    ",104],["T_PUBLIC","public",105],["T_WHITESPACE"," ",105],["T_FUNCTION","function",105],["T_WHITESPACE"," ",105],["T_STRING","loadAggregatorOptions",105],"(",")",["T_WHITESPACE","\n    ",105],"{",["T_WHITESPACE","\n        ",106],["T_VARIABLE","$this",107],["T_OBJECT_OPERATOR","->",107],["T_STRING","setAggregatorOption",107],"(",["T_ARRAY","array",107],"(",["T_WHITESPACE","\n            ",107],["T_CONSTANT_ENCAPSED_STRING","'all'",108],["T_WHITESPACE"," ",108],["T_DOUBLE_ARROW","=>",108],["T_WHITESPACE"," ",108],["T_STRING","Mage",108],["T_DOUBLE_COLON","::",108],["T_STRING","helper",108],"(",["T_CONSTANT_ENCAPSED_STRING","'rule'",108],")",["T_OBJECT_OPERATOR","->",108],["T_STRING","__",108],"(",["T_CONSTANT_ENCAPSED_STRING","'ALL'",108],")",",",["T_WHITESPACE","\n            ",108],["T_CONSTANT_ENCAPSED_STRING","'any'",109],["T_WHITESPACE"," ",109],["T_DOUBLE_ARROW","=>",109],["T_WHITESPACE"," ",109],["T_STRING","Mage",109],["T_DOUBLE_COLON","::",109],["T_STRING","helper",109],"(",["T_CONSTANT_ENCAPSED_STRING","'rule'",109],")",["T_OBJECT_OPERATOR","->",109],["T_STRING","__",109],"(",["T_CONSTANT_ENCAPSED_STRING","'ANY'",109],")",",",["T_WHITESPACE","\n        ",109],")",")",";",["T_WHITESPACE","\n        ",110],["T_RETURN","return",111],["T_WHITESPACE"," ",111],["T_VARIABLE","$this",111],";",["T_WHITESPACE","\n    ",111],"}",["T_WHITESPACE","\n\n    ",112],["T_PUBLIC","public",114],["T_WHITESPACE"," ",114],["T_FUNCTION","function",114],["T_WHITESPACE"," ",114],["T_STRING","getAggregatorSelectOptions",114],"(",")",["T_WHITESPACE","\n    ",114],"{",["T_WHITESPACE","\n        ",115],["T_VARIABLE","$opt",116],["T_WHITESPACE"," ",116],"=",["T_WHITESPACE"," ",116],["T_ARRAY","array",116],"(",")",";",["T_WHITESPACE","\n        ",116],["T_FOREACH","foreach",117],["T_WHITESPACE"," ",117],"(",["T_VARIABLE","$this",117],["T_OBJECT_OPERATOR","->",117],["T_STRING","getAggregatorOption",117],"(",")",["T_WHITESPACE"," ",117],["T_AS","as",117],["T_WHITESPACE"," ",117],["T_VARIABLE","$k",117],["T_DOUBLE_ARROW","=>",117],["T_VARIABLE","$v",117],")",["T_WHITESPACE"," ",117],"{",["T_WHITESPACE","\n            ",117],["T_VARIABLE","$opt",118],"[","]",["T_WHITESPACE"," ",118],"=",["T_WHITESPACE"," ",118],["T_ARRAY","array",118],"(",["T_CONSTANT_ENCAPSED_STRING","'value'",118],["T_DOUBLE_ARROW","=>",118],["T_VARIABLE","$k",118],",",["T_WHITESPACE"," ",118],["T_CONSTANT_ENCAPSED_STRING","'label'",118],["T_DOUBLE_ARROW","=>",118],["T_VARIABLE","$v",118],")",";",["T_WHITESPACE","\n        ",118],"}",["T_WHITESPACE","\n        ",119],["T_RETURN","return",120],["T_WHITESPACE"," ",120],["T_VARIABLE","$opt",120],";",["T_WHITESPACE","\n    ",120],"}",["T_WHITESPACE","\n\n    ",121],["T_PUBLIC","public",123],["T_WHITESPACE"," ",123],["T_FUNCTION","function",123],["T_WHITESPACE"," ",123],["T_STRING","getAggregatorName",123],"(",")",["T_WHITESPACE","\n    ",123],"{",["T_WHITESPACE","\n        ",124],["T_RETURN","return",125],["T_WHITESPACE"," ",125],["T_VARIABLE","$this",125],["T_OBJECT_OPERATOR","->",125],["T_STRING","getAggregatorOption",125],"(",["T_VARIABLE","$this",125],["T_OBJECT_OPERATOR","->",125],["T_STRING","getAggregator",125],"(",")",")",";",["T_WHITESPACE","\n    ",125],"}",["T_WHITESPACE","\n\n    ",126],["T_PUBLIC","public",128],["T_WHITESPACE"," ",128],["T_FUNCTION","function",128],["T_WHITESPACE"," ",128],["T_STRING","getAggregatorElement",128],"(",")",["T_WHITESPACE","\n    ",128],"{",["T_WHITESPACE","\n        ",129],["T_IF","if",130],["T_WHITESPACE"," ",130],"(",["T_STRING","is_null",130],"(",["T_VARIABLE","$this",130],["T_OBJECT_OPERATOR","->",130],["T_STRING","getAggregator",130],"(",")",")",")",["T_WHITESPACE"," ",130],"{",["T_WHITESPACE","\n            ",130],["T_FOREACH","foreach",131],["T_WHITESPACE"," ",131],"(",["T_VARIABLE","$this",131],["T_OBJECT_OPERATOR","->",131],["T_STRING","getAggregatorOption",131],"(",")",["T_WHITESPACE"," ",131],["T_AS","as",131],["T_WHITESPACE"," ",131],["T_VARIABLE","$k",131],["T_DOUBLE_ARROW","=>",131],["T_VARIABLE","$v",131],")",["T_WHITESPACE"," ",131],"{",["T_WHITESPACE","\n                ",131],["T_VARIABLE","$this",132],["T_OBJECT_OPERATOR","->",132],["T_STRING","setAggregator",132],"(",["T_VARIABLE","$k",132],")",";",["T_WHITESPACE","\n                ",132],["T_BREAK","break",133],";",["T_WHITESPACE","\n            ",133],"}",["T_WHITESPACE","\n        ",134],"}",["T_WHITESPACE","\n        ",135],["T_RETURN","return",136],["T_WHITESPACE"," ",136],["T_VARIABLE","$this",136],["T_OBJECT_OPERATOR","->",136],["T_STRING","getForm",136],"(",")",["T_OBJECT_OPERATOR","->",136],["T_STRING","addField",136],"(",["T_VARIABLE","$this",136],["T_OBJECT_OPERATOR","->",136],["T_STRING","getPrefix",136],"(",")",".",["T_CONSTANT_ENCAPSED_STRING","'__'",136],".",["T_VARIABLE","$this",136],["T_OBJECT_OPERATOR","->",136],["T_STRING","getId",136],"(",")",".",["T_CONSTANT_ENCAPSED_STRING","'__aggregator'",136],",",["T_WHITESPACE"," ",136],["T_CONSTANT_ENCAPSED_STRING","'select'",136],",",["T_WHITESPACE"," ",136],["T_ARRAY","array",136],"(",["T_WHITESPACE","\n            ",136],["T_CONSTANT_ENCAPSED_STRING","'name'",137],["T_DOUBLE_ARROW","=>",137],["T_CONSTANT_ENCAPSED_STRING","'rule['",137],".",["T_VARIABLE","$this",137],["T_OBJECT_OPERATOR","->",137],["T_STRING","getPrefix",137],"(",")",".",["T_CONSTANT_ENCAPSED_STRING","']['",137],".",["T_VARIABLE","$this",137],["T_OBJECT_OPERATOR","->",137],["T_STRING","getId",137],"(",")",".",["T_CONSTANT_ENCAPSED_STRING","'][aggregator]'",137],",",["T_WHITESPACE","\n            ",137],["T_CONSTANT_ENCAPSED_STRING","'values'",138],["T_DOUBLE_ARROW","=>",138],["T_VARIABLE","$this",138],["T_OBJECT_OPERATOR","->",138],["T_STRING","getAggregatorSelectOptions",138],"(",")",",",["T_WHITESPACE","\n            ",138],["T_CONSTANT_ENCAPSED_STRING","'value'",139],["T_DOUBLE_ARROW","=>",139],["T_VARIABLE","$this",139],["T_OBJECT_OPERATOR","->",139],["T_STRING","getAggregator",139],"(",")",",",["T_WHITESPACE","\n            ",139],["T_CONSTANT_ENCAPSED_STRING","'value_name'",140],["T_DOUBLE_ARROW","=>",140],["T_VARIABLE","$this",140],["T_OBJECT_OPERATOR","->",140],["T_STRING","getAggregatorName",140],"(",")",",",["T_WHITESPACE","\n        ",140],")",")",["T_OBJECT_OPERATOR","->",141],["T_STRING","setRenderer",141],"(",["T_STRING","Mage",141],["T_DOUBLE_COLON","::",141],["T_STRING","getBlockSingleton",141],"(",["T_CONSTANT_ENCAPSED_STRING","'rule\/editable'",141],")",")",";",["T_WHITESPACE","\n    ",141],"}",["T_WHITESPACE","\n",142],["T_COMMENT","\/* end aggregator methods *\/",143],["T_WHITESPACE","\n\n    ",143],["T_PUBLIC","public",145],["T_WHITESPACE"," ",145],["T_FUNCTION","function",145],["T_WHITESPACE"," ",145],["T_STRING","loadValueOptions",145],"(",")",["T_WHITESPACE","\n    ",145],"{",["T_WHITESPACE","\n        ",146],["T_VARIABLE","$this",147],["T_OBJECT_OPERATOR","->",147],["T_STRING","setValueOption",147],"(",["T_ARRAY","array",147],"(",["T_WHITESPACE","\n            ",147],["T_LNUMBER","1",148],["T_WHITESPACE"," ",148],["T_DOUBLE_ARROW","=>",148],["T_WHITESPACE"," ",148],["T_STRING","Mage",148],["T_DOUBLE_COLON","::",148],["T_STRING","helper",148],"(",["T_CONSTANT_ENCAPSED_STRING","'rule'",148],")",["T_OBJECT_OPERATOR","->",148],["T_STRING","__",148],"(",["T_CONSTANT_ENCAPSED_STRING","'TRUE'",148],")",",",["T_WHITESPACE","\n            ",148],["T_LNUMBER","0",149],["T_WHITESPACE"," ",149],["T_DOUBLE_ARROW","=>",149],["T_WHITESPACE"," ",149],["T_STRING","Mage",149],["T_DOUBLE_COLON","::",149],["T_STRING","helper",149],"(",["T_CONSTANT_ENCAPSED_STRING","'rule'",149],")",["T_OBJECT_OPERATOR","->",149],["T_STRING","__",149],"(",["T_CONSTANT_ENCAPSED_STRING","'FALSE'",149],")",",",["T_WHITESPACE","\n        ",149],")",")",";",["T_WHITESPACE","\n        ",150],["T_RETURN","return",151],["T_WHITESPACE"," ",151],["T_VARIABLE","$this",151],";",["T_WHITESPACE","\n    ",151],"}",["T_WHITESPACE","\n\n    ",152],["T_PUBLIC","public",154],["T_WHITESPACE"," ",154],["T_FUNCTION","function",154],["T_WHITESPACE"," ",154],["T_STRING","addCondition",154],"(",["T_VARIABLE","$condition",154],")",["T_WHITESPACE","\n    ",154],"{",["T_WHITESPACE","\n        ",155],["T_VARIABLE","$condition",156],["T_OBJECT_OPERATOR","->",156],["T_STRING","setRule",156],"(",["T_VARIABLE","$this",156],["T_OBJECT_OPERATOR","->",156],["T_STRING","getRule",156],"(",")",")",";",["T_WHITESPACE","\n        ",156],["T_VARIABLE","$condition",157],["T_OBJECT_OPERATOR","->",157],["T_STRING","setObject",157],"(",["T_VARIABLE","$this",157],["T_OBJECT_OPERATOR","->",157],["T_STRING","getObject",157],"(",")",")",";",["T_WHITESPACE","\n        ",157],["T_VARIABLE","$condition",158],["T_OBJECT_OPERATOR","->",158],["T_STRING","setPrefix",158],"(",["T_VARIABLE","$this",158],["T_OBJECT_OPERATOR","->",158],["T_STRING","getPrefix",158],"(",")",")",";",["T_WHITESPACE","\n\n        ",158],["T_VARIABLE","$conditions",160],["T_WHITESPACE"," ",160],"=",["T_WHITESPACE"," ",160],["T_VARIABLE","$this",160],["T_OBJECT_OPERATOR","->",160],["T_STRING","getConditions",160],"(",")",";",["T_WHITESPACE","\n        ",160],["T_VARIABLE","$conditions",161],"[","]",["T_WHITESPACE"," ",161],"=",["T_WHITESPACE"," ",161],["T_VARIABLE","$condition",161],";",["T_WHITESPACE","\n\n        ",161],["T_IF","if",163],["T_WHITESPACE"," ",163],"(","!",["T_VARIABLE","$condition",163],["T_OBJECT_OPERATOR","->",163],["T_STRING","getId",163],"(",")",")",["T_WHITESPACE"," ",163],"{",["T_WHITESPACE","\n            ",163],["T_VARIABLE","$condition",164],["T_OBJECT_OPERATOR","->",164],["T_STRING","setId",164],"(",["T_VARIABLE","$this",164],["T_OBJECT_OPERATOR","->",164],["T_STRING","getId",164],"(",")",".",["T_CONSTANT_ENCAPSED_STRING","'--'",164],".",["T_STRING","sizeof",164],"(",["T_VARIABLE","$conditions",164],")",")",";",["T_WHITESPACE","\n        ",164],"}",["T_WHITESPACE","\n\n        ",165],["T_VARIABLE","$this",167],["T_OBJECT_OPERATOR","->",167],["T_STRING","setData",167],"(",["T_VARIABLE","$this",167],["T_OBJECT_OPERATOR","->",167],["T_STRING","getPrefix",167],"(",")",",",["T_WHITESPACE"," ",167],["T_VARIABLE","$conditions",167],")",";",["T_WHITESPACE","\n        ",167],["T_RETURN","return",168],["T_WHITESPACE"," ",168],["T_VARIABLE","$this",168],";",["T_WHITESPACE","\n    ",168],"}",["T_WHITESPACE","\n\n    ",169],["T_PUBLIC","public",171],["T_WHITESPACE"," ",171],["T_FUNCTION","function",171],["T_WHITESPACE"," ",171],["T_STRING","getValueElementType",171],"(",")",["T_WHITESPACE","\n    ",171],"{",["T_WHITESPACE","\n        ",172],["T_RETURN","return",173],["T_WHITESPACE"," ",173],["T_CONSTANT_ENCAPSED_STRING","'select'",173],";",["T_WHITESPACE","\n    ",173],"}",["T_WHITESPACE","\n\n    ",174],["T_DOC_COMMENT","\/**\n     * Returns array containing conditions in the collection\n     *\n     * Output example:\n     * array(\n     *   'type'=>'combine',\n     *   'operator'=>'ALL',\n     *   'value'=>'TRUE',\n     *   'conditions'=>array(\n     *     {condition::asArray},\n     *     {combine::asArray},\n     *     {quote_item_combine::asArray}\n     *   )\n     * )\n     *\n     * @return array\n     *\/",176],["T_WHITESPACE","\n    ",192],["T_PUBLIC","public",193],["T_WHITESPACE"," ",193],["T_FUNCTION","function",193],["T_WHITESPACE"," ",193],["T_STRING","asArray",193],"(",["T_ARRAY","array",193],["T_WHITESPACE"," ",193],["T_VARIABLE","$arrAttributes",193],["T_WHITESPACE"," ",193],"=",["T_WHITESPACE"," ",193],["T_ARRAY","array",193],"(",")",")",["T_WHITESPACE","\n    ",193],"{",["T_WHITESPACE","\n        ",194],["T_VARIABLE","$out",195],["T_WHITESPACE"," ",195],"=",["T_WHITESPACE"," ",195],["T_STRING","parent",195],["T_DOUBLE_COLON","::",195],["T_STRING","asArray",195],"(",")",";",["T_WHITESPACE","\n        ",195],["T_VARIABLE","$out",196],"[",["T_CONSTANT_ENCAPSED_STRING","'aggregator'",196],"]",["T_WHITESPACE"," ",196],"=",["T_WHITESPACE"," ",196],["T_VARIABLE","$this",196],["T_OBJECT_OPERATOR","->",196],["T_STRING","getAggregator",196],"(",")",";",["T_WHITESPACE","\n\n        ",196],["T_FOREACH","foreach",198],["T_WHITESPACE"," ",198],"(",["T_VARIABLE","$this",198],["T_OBJECT_OPERATOR","->",198],["T_STRING","getConditions",198],"(",")",["T_WHITESPACE"," ",198],["T_AS","as",198],["T_WHITESPACE"," ",198],["T_VARIABLE","$condition",198],")",["T_WHITESPACE"," ",198],"{",["T_WHITESPACE","\n            ",198],["T_VARIABLE","$out",199],"[",["T_CONSTANT_ENCAPSED_STRING","'conditions'",199],"]","[","]",["T_WHITESPACE"," ",199],"=",["T_WHITESPACE"," ",199],["T_VARIABLE","$condition",199],["T_OBJECT_OPERATOR","->",199],["T_STRING","asArray",199],"(",")",";",["T_WHITESPACE","\n        ",199],"}",["T_WHITESPACE","\n\n        ",200],["T_RETURN","return",202],["T_WHITESPACE"," ",202],["T_VARIABLE","$out",202],";",["T_WHITESPACE","\n    ",202],"}",["T_WHITESPACE","\n\n    ",203],["T_PUBLIC","public",205],["T_WHITESPACE"," ",205],["T_FUNCTION","function",205],["T_WHITESPACE"," ",205],["T_STRING","asXml",205],"(",["T_VARIABLE","$containerKey",205],"=",["T_CONSTANT_ENCAPSED_STRING","'conditions'",205],",",["T_WHITESPACE"," ",205],["T_VARIABLE","$itemKey",205],"=",["T_CONSTANT_ENCAPSED_STRING","'condition'",205],")",["T_WHITESPACE","\n    ",205],"{",["T_WHITESPACE","\n        ",206],["T_VARIABLE","$xml",207],["T_WHITESPACE"," ",207],"=",["T_WHITESPACE"," ",207],["T_CONSTANT_ENCAPSED_STRING","\"<aggregator>\"",207],".",["T_VARIABLE","$this",207],["T_OBJECT_OPERATOR","->",207],["T_STRING","getAggregator",207],"(",")",".",["T_CONSTANT_ENCAPSED_STRING","\"<\/aggregator>\"",207],["T_WHITESPACE","\n            ",207],".",["T_CONSTANT_ENCAPSED_STRING","\"<value>\"",208],".",["T_VARIABLE","$this",208],["T_OBJECT_OPERATOR","->",208],["T_STRING","getValue",208],"(",")",".",["T_CONSTANT_ENCAPSED_STRING","\"<\/value>\"",208],["T_WHITESPACE","\n            ",208],".","\"",["T_ENCAPSED_AND_WHITESPACE","<",209],["T_VARIABLE","$containerKey",209],["T_ENCAPSED_AND_WHITESPACE",">",209],"\"",";",["T_WHITESPACE","\n        ",209],["T_FOREACH","foreach",210],["T_WHITESPACE"," ",210],"(",["T_VARIABLE","$this",210],["T_OBJECT_OPERATOR","->",210],["T_STRING","getConditions",210],"(",")",["T_WHITESPACE"," ",210],["T_AS","as",210],["T_WHITESPACE"," ",210],["T_VARIABLE","$condition",210],")",["T_WHITESPACE"," ",210],"{",["T_WHITESPACE","\n            ",210],["T_VARIABLE","$xml",211],["T_WHITESPACE"," ",211],["T_CONCAT_EQUAL",".=",211],["T_WHITESPACE"," ",211],"\"",["T_ENCAPSED_AND_WHITESPACE","<",211],["T_VARIABLE","$itemKey",211],["T_ENCAPSED_AND_WHITESPACE",">",211],"\"",".",["T_VARIABLE","$condition",211],["T_OBJECT_OPERATOR","->",211],["T_STRING","asXml",211],"(",")",".","\"",["T_ENCAPSED_AND_WHITESPACE","<\/",211],["T_VARIABLE","$itemKey",211],["T_ENCAPSED_AND_WHITESPACE",">",211],"\"",";",["T_WHITESPACE","\n        ",211],"}",["T_WHITESPACE","\n        ",212],["T_VARIABLE","$xml",213],["T_WHITESPACE"," ",213],["T_CONCAT_EQUAL",".=",213],["T_WHITESPACE"," ",213],"\"",["T_ENCAPSED_AND_WHITESPACE","<\/",213],["T_VARIABLE","$containerKey",213],["T_ENCAPSED_AND_WHITESPACE",">",213],"\"",";",["T_WHITESPACE","\n        ",213],["T_RETURN","return",214],["T_WHITESPACE"," ",214],["T_VARIABLE","$xml",214],";",["T_WHITESPACE","\n    ",214],"}",["T_WHITESPACE","\n\n    ",215],["T_PUBLIC","public",217],["T_WHITESPACE"," ",217],["T_FUNCTION","function",217],["T_WHITESPACE"," ",217],["T_STRING","loadArray",217],"(",["T_VARIABLE","$arr",217],",",["T_WHITESPACE"," ",217],["T_VARIABLE","$key",217],"=",["T_CONSTANT_ENCAPSED_STRING","'conditions'",217],")",["T_WHITESPACE","\n    ",217],"{",["T_WHITESPACE","\n        ",218],["T_VARIABLE","$this",219],["T_OBJECT_OPERATOR","->",219],["T_STRING","setAggregator",219],"(",["T_ISSET","isset",219],"(",["T_VARIABLE","$arr",219],"[",["T_CONSTANT_ENCAPSED_STRING","'aggregator'",219],"]",")",["T_WHITESPACE"," ",219],"?",["T_WHITESPACE"," ",219],["T_VARIABLE","$arr",219],"[",["T_CONSTANT_ENCAPSED_STRING","'aggregator'",219],"]",["T_WHITESPACE","\n                ",219],":",["T_WHITESPACE"," ",220],"(",["T_ISSET","isset",220],"(",["T_VARIABLE","$arr",220],"[",["T_CONSTANT_ENCAPSED_STRING","'attribute'",220],"]",")",["T_WHITESPACE"," ",220],"?",["T_WHITESPACE"," ",220],["T_VARIABLE","$arr",220],"[",["T_CONSTANT_ENCAPSED_STRING","'attribute'",220],"]",["T_WHITESPACE"," ",220],":",["T_WHITESPACE"," ",220],["T_STRING","null",220],")",")",["T_WHITESPACE","\n            ",220],["T_OBJECT_OPERATOR","->",221],["T_STRING","setValue",221],"(",["T_ISSET","isset",221],"(",["T_VARIABLE","$arr",221],"[",["T_CONSTANT_ENCAPSED_STRING","'value'",221],"]",")",["T_WHITESPACE"," ",221],"?",["T_WHITESPACE"," ",221],["T_VARIABLE","$arr",221],"[",["T_CONSTANT_ENCAPSED_STRING","'value'",221],"]",["T_WHITESPACE","\n                ",221],":",["T_WHITESPACE"," ",222],"(",["T_ISSET","isset",222],"(",["T_VARIABLE","$arr",222],"[",["T_CONSTANT_ENCAPSED_STRING","'operator'",222],"]",")",["T_WHITESPACE"," ",222],"?",["T_WHITESPACE"," ",222],["T_VARIABLE","$arr",222],"[",["T_CONSTANT_ENCAPSED_STRING","'operator'",222],"]",["T_WHITESPACE"," ",222],":",["T_WHITESPACE"," ",222],["T_STRING","null",222],")",")",";",["T_WHITESPACE","\n\n        ",222],["T_IF","if",224],["T_WHITESPACE"," ",224],"(","!",["T_EMPTY","empty",224],"(",["T_VARIABLE","$arr",224],"[",["T_VARIABLE","$key",224],"]",")",["T_WHITESPACE"," ",224],["T_BOOLEAN_AND","&&",224],["T_WHITESPACE"," ",224],["T_STRING","is_array",224],"(",["T_VARIABLE","$arr",224],"[",["T_VARIABLE","$key",224],"]",")",")",["T_WHITESPACE"," ",224],"{",["T_WHITESPACE","\n            ",224],["T_FOREACH","foreach",225],["T_WHITESPACE"," ",225],"(",["T_VARIABLE","$arr",225],"[",["T_VARIABLE","$key",225],"]",["T_WHITESPACE"," ",225],["T_AS","as",225],["T_WHITESPACE"," ",225],["T_VARIABLE","$condArr",225],")",["T_WHITESPACE"," ",225],"{",["T_WHITESPACE","\n                ",225],["T_TRY","try",226],["T_WHITESPACE"," ",226],"{",["T_WHITESPACE","\n                    ",226],["T_VARIABLE","$cond",227],["T_WHITESPACE"," ",227],"=",["T_WHITESPACE"," ",227],["T_VARIABLE","$this",227],["T_OBJECT_OPERATOR","->",227],["T_STRING","_getNewConditionModelInstance",227],"(",["T_VARIABLE","$condArr",227],"[",["T_CONSTANT_ENCAPSED_STRING","'type'",227],"]",")",";",["T_WHITESPACE","\n                    ",227],["T_IF","if",228],["T_WHITESPACE"," ",228],"(",["T_VARIABLE","$cond",228],")",["T_WHITESPACE"," ",228],"{",["T_WHITESPACE","\n                        ",228],["T_VARIABLE","$this",229],["T_OBJECT_OPERATOR","->",229],["T_STRING","addCondition",229],"(",["T_VARIABLE","$cond",229],")",";",["T_WHITESPACE","\n                        ",229],["T_VARIABLE","$cond",230],["T_OBJECT_OPERATOR","->",230],["T_STRING","loadArray",230],"(",["T_VARIABLE","$condArr",230],",",["T_WHITESPACE"," ",230],["T_VARIABLE","$key",230],")",";",["T_WHITESPACE","\n                    ",230],"}",["T_WHITESPACE","\n                ",231],"}",["T_WHITESPACE"," ",232],["T_CATCH","catch",232],["T_WHITESPACE"," ",232],"(",["T_STRING","Exception",232],["T_WHITESPACE"," ",232],["T_VARIABLE","$e",232],")",["T_WHITESPACE"," ",232],"{",["T_WHITESPACE","\n                    ",232],["T_STRING","Mage",233],["T_DOUBLE_COLON","::",233],["T_STRING","logException",233],"(",["T_VARIABLE","$e",233],")",";",["T_WHITESPACE","\n                ",233],"}",["T_WHITESPACE","\n            ",234],"}",["T_WHITESPACE","\n        ",235],"}",["T_WHITESPACE","\n        ",236],["T_RETURN","return",237],["T_WHITESPACE"," ",237],["T_VARIABLE","$this",237],";",["T_WHITESPACE","\n    ",237],"}",["T_WHITESPACE","\n\n    ",238],["T_PUBLIC","public",240],["T_WHITESPACE"," ",240],["T_FUNCTION","function",240],["T_WHITESPACE"," ",240],["T_STRING","loadXml",240],"(",["T_VARIABLE","$xml",240],")",["T_WHITESPACE","\n    ",240],"{",["T_WHITESPACE","\n        ",241],["T_IF","if",242],["T_WHITESPACE"," ",242],"(",["T_STRING","is_string",242],"(",["T_VARIABLE","$xml",242],")",")",["T_WHITESPACE"," ",242],"{",["T_WHITESPACE","\n            ",242],["T_VARIABLE","$xml",243],["T_WHITESPACE"," ",243],"=",["T_WHITESPACE"," ",243],["T_STRING","simplexml_load_string",243],"(",["T_VARIABLE","$xml",243],")",";",["T_WHITESPACE","\n        ",243],"}",["T_WHITESPACE","\n        ",244],["T_VARIABLE","$arr",245],["T_WHITESPACE"," ",245],"=",["T_WHITESPACE"," ",245],["T_STRING","parent",245],["T_DOUBLE_COLON","::",245],["T_STRING","loadXml",245],"(",["T_VARIABLE","$xml",245],")",";",["T_WHITESPACE","\n        ",245],["T_FOREACH","foreach",246],["T_WHITESPACE"," ",246],"(",["T_VARIABLE","$xml",246],["T_OBJECT_OPERATOR","->",246],["T_STRING","conditions",246],["T_OBJECT_OPERATOR","->",246],["T_STRING","children",246],"(",")",["T_WHITESPACE"," ",246],["T_AS","as",246],["T_WHITESPACE"," ",246],["T_VARIABLE","$condition",246],")",["T_WHITESPACE"," ",246],"{",["T_WHITESPACE","\n            ",246],["T_VARIABLE","$arr",247],"[",["T_CONSTANT_ENCAPSED_STRING","'conditions'",247],"]",["T_WHITESPACE"," ",247],"=",["T_WHITESPACE"," ",247],["T_STRING","parent",247],["T_DOUBLE_COLON","::",247],["T_STRING","loadXml",247],"(",["T_VARIABLE","$condition",247],")",";",["T_WHITESPACE","\n        ",247],"}",["T_WHITESPACE","\n        ",248],["T_VARIABLE","$this",249],["T_OBJECT_OPERATOR","->",249],["T_STRING","loadArray",249],"(",["T_VARIABLE","$arr",249],")",";",["T_WHITESPACE","\n        ",249],["T_RETURN","return",250],["T_WHITESPACE"," ",250],["T_VARIABLE","$this",250],";",["T_WHITESPACE","\n    ",250],"}",["T_WHITESPACE","\n\n    ",251],["T_PUBLIC","public",253],["T_WHITESPACE"," ",253],["T_FUNCTION","function",253],["T_WHITESPACE"," ",253],["T_STRING","asHtml",253],"(",")",["T_WHITESPACE","\n    ",253],"{",["T_WHITESPACE","\n           ",254],["T_VARIABLE","$html",255],["T_WHITESPACE"," ",255],"=",["T_WHITESPACE"," ",255],["T_VARIABLE","$this",255],["T_OBJECT_OPERATOR","->",255],["T_STRING","getTypeElement",255],"(",")",["T_OBJECT_OPERATOR","->",255],["T_STRING","getHtml",255],"(",")",".",["T_WHITESPACE","\n               ",255],["T_STRING","Mage",256],["T_DOUBLE_COLON","::",256],["T_STRING","helper",256],"(",["T_CONSTANT_ENCAPSED_STRING","'rule'",256],")",["T_OBJECT_OPERATOR","->",256],["T_STRING","__",256],"(",["T_CONSTANT_ENCAPSED_STRING","'If %s of these conditions are %s:'",256],",",["T_WHITESPACE"," ",256],["T_VARIABLE","$this",256],["T_OBJECT_OPERATOR","->",256],["T_STRING","getAggregatorElement",256],"(",")",["T_OBJECT_OPERATOR","->",256],["T_STRING","getHtml",256],"(",")",",",["T_WHITESPACE"," ",256],["T_VARIABLE","$this",256],["T_OBJECT_OPERATOR","->",256],["T_STRING","getValueElement",256],"(",")",["T_OBJECT_OPERATOR","->",256],["T_STRING","getHtml",256],"(",")",")",";",["T_WHITESPACE","\n           ",256],["T_IF","if",257],["T_WHITESPACE"," ",257],"(",["T_VARIABLE","$this",257],["T_OBJECT_OPERATOR","->",257],["T_STRING","getId",257],"(",")",["T_WHITESPACE"," ",257],["T_IS_NOT_EQUAL","!=",257],["T_WHITESPACE"," ",257],["T_CONSTANT_ENCAPSED_STRING","'1'",257],")",["T_WHITESPACE"," ",257],"{",["T_WHITESPACE","\n               ",257],["T_VARIABLE","$html",258],["T_CONCAT_EQUAL",".=",258],["T_WHITESPACE"," ",258],["T_VARIABLE","$this",258],["T_OBJECT_OPERATOR","->",258],["T_STRING","getRemoveLinkHtml",258],"(",")",";",["T_WHITESPACE","\n           ",258],"}",["T_WHITESPACE","\n        ",259],["T_RETURN","return",260],["T_WHITESPACE"," ",260],["T_VARIABLE","$html",260],";",["T_WHITESPACE","\n    ",260],"}",["T_WHITESPACE","\n\n    ",261],["T_PUBLIC","public",263],["T_WHITESPACE"," ",263],["T_FUNCTION","function",263],["T_WHITESPACE"," ",263],["T_STRING","getNewChildElement",263],"(",")",["T_WHITESPACE","\n    ",263],"{",["T_WHITESPACE","\n        ",264],["T_RETURN","return",265],["T_WHITESPACE"," ",265],["T_VARIABLE","$this",265],["T_OBJECT_OPERATOR","->",265],["T_STRING","getForm",265],"(",")",["T_OBJECT_OPERATOR","->",265],["T_STRING","addField",265],"(",["T_VARIABLE","$this",265],["T_OBJECT_OPERATOR","->",265],["T_STRING","getPrefix",265],"(",")",".",["T_CONSTANT_ENCAPSED_STRING","'__'",265],".",["T_VARIABLE","$this",265],["T_OBJECT_OPERATOR","->",265],["T_STRING","getId",265],"(",")",".",["T_CONSTANT_ENCAPSED_STRING","'__new_child'",265],",",["T_WHITESPACE"," ",265],["T_CONSTANT_ENCAPSED_STRING","'select'",265],",",["T_WHITESPACE"," ",265],["T_ARRAY","array",265],"(",["T_WHITESPACE","\n            ",265],["T_CONSTANT_ENCAPSED_STRING","'name'",266],["T_DOUBLE_ARROW","=>",266],["T_CONSTANT_ENCAPSED_STRING","'rule['",266],".",["T_VARIABLE","$this",266],["T_OBJECT_OPERATOR","->",266],["T_STRING","getPrefix",266],"(",")",".",["T_CONSTANT_ENCAPSED_STRING","']['",266],".",["T_VARIABLE","$this",266],["T_OBJECT_OPERATOR","->",266],["T_STRING","getId",266],"(",")",".",["T_CONSTANT_ENCAPSED_STRING","'][new_child]'",266],",",["T_WHITESPACE","\n            ",266],["T_CONSTANT_ENCAPSED_STRING","'values'",267],["T_DOUBLE_ARROW","=>",267],["T_VARIABLE","$this",267],["T_OBJECT_OPERATOR","->",267],["T_STRING","getNewChildSelectOptions",267],"(",")",",",["T_WHITESPACE","\n            ",267],["T_CONSTANT_ENCAPSED_STRING","'value_name'",268],["T_DOUBLE_ARROW","=>",268],["T_VARIABLE","$this",268],["T_OBJECT_OPERATOR","->",268],["T_STRING","getNewChildName",268],"(",")",",",["T_WHITESPACE","\n        ",268],")",")",["T_OBJECT_OPERATOR","->",269],["T_STRING","setRenderer",269],"(",["T_STRING","Mage",269],["T_DOUBLE_COLON","::",269],["T_STRING","getBlockSingleton",269],"(",["T_CONSTANT_ENCAPSED_STRING","'rule\/newchild'",269],")",")",";",["T_WHITESPACE","\n    ",269],"}",["T_WHITESPACE","\n\n    ",270],["T_PUBLIC","public",272],["T_WHITESPACE"," ",272],["T_FUNCTION","function",272],["T_WHITESPACE"," ",272],["T_STRING","asHtmlRecursive",272],"(",")",["T_WHITESPACE","\n    ",272],"{",["T_WHITESPACE","\n        ",273],["T_VARIABLE","$html",274],["T_WHITESPACE"," ",274],"=",["T_WHITESPACE"," ",274],["T_VARIABLE","$this",274],["T_OBJECT_OPERATOR","->",274],["T_STRING","asHtml",274],"(",")",".",["T_CONSTANT_ENCAPSED_STRING","'<ul id=\"'",274],".",["T_VARIABLE","$this",274],["T_OBJECT_OPERATOR","->",274],["T_STRING","getPrefix",274],"(",")",".",["T_CONSTANT_ENCAPSED_STRING","'__'",274],".",["T_VARIABLE","$this",274],["T_OBJECT_OPERATOR","->",274],["T_STRING","getId",274],"(",")",".",["T_CONSTANT_ENCAPSED_STRING","'__children\" class=\"rule-param-children\">'",274],";",["T_WHITESPACE","\n        ",274],["T_FOREACH","foreach",275],["T_WHITESPACE"," ",275],"(",["T_VARIABLE","$this",275],["T_OBJECT_OPERATOR","->",275],["T_STRING","getConditions",275],"(",")",["T_WHITESPACE"," ",275],["T_AS","as",275],["T_WHITESPACE"," ",275],["T_VARIABLE","$cond",275],")",["T_WHITESPACE"," ",275],"{",["T_WHITESPACE","\n            ",275],["T_VARIABLE","$html",276],["T_WHITESPACE"," ",276],["T_CONCAT_EQUAL",".=",276],["T_WHITESPACE"," ",276],["T_CONSTANT_ENCAPSED_STRING","'<li>'",276],".",["T_VARIABLE","$cond",276],["T_OBJECT_OPERATOR","->",276],["T_STRING","asHtmlRecursive",276],"(",")",".",["T_CONSTANT_ENCAPSED_STRING","'<\/li>'",276],";",["T_WHITESPACE","\n        ",276],"}",["T_WHITESPACE","\n        ",277],["T_VARIABLE","$html",278],["T_WHITESPACE"," ",278],["T_CONCAT_EQUAL",".=",278],["T_WHITESPACE"," ",278],["T_CONSTANT_ENCAPSED_STRING","'<li>'",278],".",["T_VARIABLE","$this",278],["T_OBJECT_OPERATOR","->",278],["T_STRING","getNewChildElement",278],"(",")",["T_OBJECT_OPERATOR","->",278],["T_STRING","getHtml",278],"(",")",".",["T_CONSTANT_ENCAPSED_STRING","'<\/li><\/ul>'",278],";",["T_WHITESPACE","\n        ",278],["T_RETURN","return",279],["T_WHITESPACE"," ",279],["T_VARIABLE","$html",279],";",["T_WHITESPACE","\n    ",279],"}",["T_WHITESPACE","\n\n    ",280],["T_PUBLIC","public",282],["T_WHITESPACE"," ",282],["T_FUNCTION","function",282],["T_WHITESPACE"," ",282],["T_STRING","asString",282],"(",["T_VARIABLE","$format",282],"=",["T_CONSTANT_ENCAPSED_STRING","''",282],")",["T_WHITESPACE","\n    ",282],"{",["T_WHITESPACE","\n        ",283],["T_VARIABLE","$str",284],["T_WHITESPACE"," ",284],"=",["T_WHITESPACE"," ",284],["T_STRING","Mage",284],["T_DOUBLE_COLON","::",284],["T_STRING","helper",284],"(",["T_CONSTANT_ENCAPSED_STRING","'rule'",284],")",["T_OBJECT_OPERATOR","->",284],["T_STRING","__",284],"(",["T_CONSTANT_ENCAPSED_STRING","\"If %s of these conditions are %s:\"",284],",",["T_WHITESPACE"," ",284],["T_VARIABLE","$this",284],["T_OBJECT_OPERATOR","->",284],["T_STRING","getAggregatorName",284],"(",")",",",["T_WHITESPACE"," ",284],["T_VARIABLE","$this",284],["T_OBJECT_OPERATOR","->",284],["T_STRING","getValueName",284],"(",")",")",";",["T_WHITESPACE","\n        ",284],["T_RETURN","return",285],["T_WHITESPACE"," ",285],["T_VARIABLE","$str",285],";",["T_WHITESPACE","\n    ",285],"}",["T_WHITESPACE","\n\n    ",286],["T_PUBLIC","public",288],["T_WHITESPACE"," ",288],["T_FUNCTION","function",288],["T_WHITESPACE"," ",288],["T_STRING","asStringRecursive",288],"(",["T_VARIABLE","$level",288],"=",["T_LNUMBER","0",288],")",["T_WHITESPACE","\n    ",288],"{",["T_WHITESPACE","\n        ",289],["T_VARIABLE","$str",290],["T_WHITESPACE"," ",290],"=",["T_WHITESPACE"," ",290],["T_STRING","parent",290],["T_DOUBLE_COLON","::",290],["T_STRING","asStringRecursive",290],"(",["T_VARIABLE","$level",290],")",";",["T_WHITESPACE","\n        ",290],["T_FOREACH","foreach",291],["T_WHITESPACE"," ",291],"(",["T_VARIABLE","$this",291],["T_OBJECT_OPERATOR","->",291],["T_STRING","getConditions",291],"(",")",["T_WHITESPACE"," ",291],["T_AS","as",291],["T_WHITESPACE"," ",291],["T_VARIABLE","$cond",291],")",["T_WHITESPACE"," ",291],"{",["T_WHITESPACE","\n            ",291],["T_VARIABLE","$str",292],["T_WHITESPACE"," ",292],["T_CONCAT_EQUAL",".=",292],["T_WHITESPACE"," ",292],["T_CONSTANT_ENCAPSED_STRING","\"\\n\"",292],".",["T_VARIABLE","$cond",292],["T_OBJECT_OPERATOR","->",292],["T_STRING","asStringRecursive",292],"(",["T_VARIABLE","$level",292],"+",["T_LNUMBER","1",292],")",";",["T_WHITESPACE","\n        ",292],"}",["T_WHITESPACE","\n        ",293],["T_RETURN","return",294],["T_WHITESPACE"," ",294],["T_VARIABLE","$str",294],";",["T_WHITESPACE","\n    ",294],"}",["T_WHITESPACE","\n\n    ",295],["T_PUBLIC","public",297],["T_WHITESPACE"," ",297],["T_FUNCTION","function",297],["T_WHITESPACE"," ",297],["T_STRING","validate",297],"(",["T_STRING","Varien_Object",297],["T_WHITESPACE"," ",297],["T_VARIABLE","$object",297],")",["T_WHITESPACE","\n    ",297],"{",["T_WHITESPACE","\n        ",298],["T_IF","if",299],["T_WHITESPACE"," ",299],"(","!",["T_VARIABLE","$this",299],["T_OBJECT_OPERATOR","->",299],["T_STRING","getConditions",299],"(",")",")",["T_WHITESPACE"," ",299],"{",["T_WHITESPACE","\n            ",299],["T_RETURN","return",300],["T_WHITESPACE"," ",300],["T_STRING","true",300],";",["T_WHITESPACE","\n        ",300],"}",["T_WHITESPACE","\n\n        ",301],["T_VARIABLE","$all",303],["T_WHITESPACE","    ",303],"=",["T_WHITESPACE"," ",303],["T_VARIABLE","$this",303],["T_OBJECT_OPERATOR","->",303],["T_STRING","getAggregator",303],"(",")",["T_WHITESPACE"," ",303],["T_IS_IDENTICAL","===",303],["T_WHITESPACE"," ",303],["T_CONSTANT_ENCAPSED_STRING","'all'",303],";",["T_WHITESPACE","\n        ",303],["T_VARIABLE","$true",304],["T_WHITESPACE","   ",304],"=",["T_WHITESPACE"," ",304],["T_BOOL_CAST","(bool)",304],["T_VARIABLE","$this",304],["T_OBJECT_OPERATOR","->",304],["T_STRING","getValue",304],"(",")",";",["T_WHITESPACE","\n\n        ",304],["T_FOREACH","foreach",306],["T_WHITESPACE"," ",306],"(",["T_VARIABLE","$this",306],["T_OBJECT_OPERATOR","->",306],["T_STRING","getConditions",306],"(",")",["T_WHITESPACE"," ",306],["T_AS","as",306],["T_WHITESPACE"," ",306],["T_VARIABLE","$cond",306],")",["T_WHITESPACE"," ",306],"{",["T_WHITESPACE","\n            ",306],["T_VARIABLE","$validated",307],["T_WHITESPACE"," ",307],"=",["T_WHITESPACE"," ",307],["T_VARIABLE","$cond",307],["T_OBJECT_OPERATOR","->",307],["T_STRING","validate",307],"(",["T_VARIABLE","$object",307],")",";",["T_WHITESPACE","\n\n            ",307],["T_IF","if",309],["T_WHITESPACE"," ",309],"(",["T_VARIABLE","$all",309],["T_WHITESPACE"," ",309],["T_BOOLEAN_AND","&&",309],["T_WHITESPACE"," ",309],["T_VARIABLE","$validated",309],["T_WHITESPACE"," ",309],["T_IS_NOT_IDENTICAL","!==",309],["T_WHITESPACE"," ",309],["T_VARIABLE","$true",309],")",["T_WHITESPACE"," ",309],"{",["T_WHITESPACE","\n                ",309],["T_RETURN","return",310],["T_WHITESPACE"," ",310],["T_STRING","false",310],";",["T_WHITESPACE","\n            ",310],"}",["T_WHITESPACE"," ",311],["T_ELSEIF","elseif",311],["T_WHITESPACE"," ",311],"(","!",["T_VARIABLE","$all",311],["T_WHITESPACE"," ",311],["T_BOOLEAN_AND","&&",311],["T_WHITESPACE"," ",311],["T_VARIABLE","$validated",311],["T_WHITESPACE"," ",311],["T_IS_IDENTICAL","===",311],["T_WHITESPACE"," ",311],["T_VARIABLE","$true",311],")",["T_WHITESPACE"," ",311],"{",["T_WHITESPACE","\n                ",311],["T_RETURN","return",312],["T_WHITESPACE"," ",312],["T_STRING","true",312],";",["T_WHITESPACE","\n            ",312],"}",["T_WHITESPACE","\n        ",313],"}",["T_WHITESPACE","\n        ",314],["T_RETURN","return",315],["T_WHITESPACE"," ",315],["T_VARIABLE","$all",315],["T_WHITESPACE"," ",315],"?",["T_WHITESPACE"," ",315],["T_STRING","true",315],["T_WHITESPACE"," ",315],":",["T_WHITESPACE"," ",315],["T_STRING","false",315],";",["T_WHITESPACE","\n    ",315],"}",["T_WHITESPACE","\n\n    ",316],["T_PUBLIC","public",318],["T_WHITESPACE"," ",318],["T_FUNCTION","function",318],["T_WHITESPACE"," ",318],["T_STRING","setJsFormObject",318],"(",["T_VARIABLE","$form",318],")",["T_WHITESPACE","\n    ",318],"{",["T_WHITESPACE","\n        ",319],["T_VARIABLE","$this",320],["T_OBJECT_OPERATOR","->",320],["T_STRING","setData",320],"(",["T_CONSTANT_ENCAPSED_STRING","'js_form_object'",320],",",["T_WHITESPACE"," ",320],["T_VARIABLE","$form",320],")",";",["T_WHITESPACE","\n        ",320],["T_FOREACH","foreach",321],["T_WHITESPACE"," ",321],"(",["T_VARIABLE","$this",321],["T_OBJECT_OPERATOR","->",321],["T_STRING","getConditions",321],"(",")",["T_WHITESPACE"," ",321],["T_AS","as",321],["T_WHITESPACE"," ",321],["T_VARIABLE","$condition",321],")",["T_WHITESPACE"," ",321],"{",["T_WHITESPACE","\n            ",321],["T_VARIABLE","$condition",322],["T_OBJECT_OPERATOR","->",322],["T_STRING","setJsFormObject",322],"(",["T_VARIABLE","$form",322],")",";",["T_WHITESPACE","\n        ",322],"}",["T_WHITESPACE","\n        ",323],["T_RETURN","return",324],["T_WHITESPACE"," ",324],["T_VARIABLE","$this",324],";",["T_WHITESPACE","\n    ",324],"}",["T_WHITESPACE","\n\n    ",325],["T_DOC_COMMENT","\/**\n     * Get conditions, if current prefix is undefined use 'conditions' key\n     *\n     * @return array\n     *\/",327],["T_WHITESPACE","\n    ",331],["T_PUBLIC","public",332],["T_WHITESPACE"," ",332],["T_FUNCTION","function",332],["T_WHITESPACE"," ",332],["T_STRING","getConditions",332],"(",")",["T_WHITESPACE","\n    ",332],"{",["T_WHITESPACE","\n        ",333],["T_VARIABLE","$key",334],["T_WHITESPACE"," ",334],"=",["T_WHITESPACE"," ",334],["T_VARIABLE","$this",334],["T_OBJECT_OPERATOR","->",334],["T_STRING","getPrefix",334],"(",")",["T_WHITESPACE"," ",334],"?",["T_WHITESPACE"," ",334],["T_VARIABLE","$this",334],["T_OBJECT_OPERATOR","->",334],["T_STRING","getPrefix",334],"(",")",["T_WHITESPACE"," ",334],":",["T_WHITESPACE"," ",334],["T_CONSTANT_ENCAPSED_STRING","'conditions'",334],";",["T_WHITESPACE","\n        ",334],["T_RETURN","return",335],["T_WHITESPACE"," ",335],["T_VARIABLE","$this",335],["T_OBJECT_OPERATOR","->",335],["T_STRING","getData",335],"(",["T_VARIABLE","$key",335],")",";",["T_WHITESPACE","\n    ",335],"}",["T_WHITESPACE","\n\n    ",336],["T_DOC_COMMENT","\/**\n     * Set conditions, if current prefix is undefined use 'conditions' key\n     *\n     * @param array $conditions\n     * @return Mage_Rule_Model_Condition_Combine\n     *\/",338],["T_WHITESPACE","\n    ",343],["T_PUBLIC","public",344],["T_WHITESPACE"," ",344],["T_FUNCTION","function",344],["T_WHITESPACE"," ",344],["T_STRING","setConditions",344],"(",["T_VARIABLE","$conditions",344],")",["T_WHITESPACE","\n    ",344],"{",["T_WHITESPACE","\n        ",345],["T_VARIABLE","$key",346],["T_WHITESPACE"," ",346],"=",["T_WHITESPACE"," ",346],["T_VARIABLE","$this",346],["T_OBJECT_OPERATOR","->",346],["T_STRING","getPrefix",346],"(",")",["T_WHITESPACE"," ",346],"?",["T_WHITESPACE"," ",346],["T_VARIABLE","$this",346],["T_OBJECT_OPERATOR","->",346],["T_STRING","getPrefix",346],"(",")",["T_WHITESPACE"," ",346],":",["T_WHITESPACE"," ",346],["T_CONSTANT_ENCAPSED_STRING","'conditions'",346],";",["T_WHITESPACE","\n        ",346],["T_RETURN","return",347],["T_WHITESPACE"," ",347],["T_VARIABLE","$this",347],["T_OBJECT_OPERATOR","->",347],["T_STRING","setData",347],"(",["T_VARIABLE","$key",347],",",["T_WHITESPACE"," ",347],["T_VARIABLE","$conditions",347],")",";",["T_WHITESPACE","\n    ",347],"}",["T_WHITESPACE","\n\n    ",348],["T_DOC_COMMENT","\/**\n     * Getter for \"Conditions Combination\" select option for recursive combines\n     *\/",350],["T_WHITESPACE","\n    ",352],["T_PROTECTED","protected",353],["T_WHITESPACE"," ",353],["T_FUNCTION","function",353],["T_WHITESPACE"," ",353],["T_STRING","_getRecursiveChildSelectOption",353],"(",")",["T_WHITESPACE","\n    ",353],"{",["T_WHITESPACE","\n        ",354],["T_RETURN","return",355],["T_WHITESPACE"," ",355],["T_ARRAY","array",355],"(",["T_CONSTANT_ENCAPSED_STRING","'value'",355],["T_WHITESPACE"," ",355],["T_DOUBLE_ARROW","=>",355],["T_WHITESPACE"," ",355],["T_VARIABLE","$this",355],["T_OBJECT_OPERATOR","->",355],["T_STRING","getType",355],"(",")",",",["T_WHITESPACE"," ",355],["T_CONSTANT_ENCAPSED_STRING","'label'",355],["T_WHITESPACE"," ",355],["T_DOUBLE_ARROW","=>",355],["T_WHITESPACE"," ",355],["T_STRING","Mage",355],["T_DOUBLE_COLON","::",355],["T_STRING","helper",355],"(",["T_CONSTANT_ENCAPSED_STRING","'rule'",355],")",["T_OBJECT_OPERATOR","->",355],["T_STRING","__",355],"(",["T_CONSTANT_ENCAPSED_STRING","'Conditions Combination'",355],")",")",";",["T_WHITESPACE","\n    ",355],"}",["T_WHITESPACE","\n",356],"}",["T_WHITESPACE","\n",357]]
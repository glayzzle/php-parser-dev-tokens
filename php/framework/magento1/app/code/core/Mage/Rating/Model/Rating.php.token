[["T_OPEN_TAG","<?php\n",1],["T_DOC_COMMENT","\/**\n * Magento\n *\n * NOTICE OF LICENSE\n *\n * This source file is subject to the Open Software License (OSL 3.0)\n * that is bundled with this package in the file LICENSE.txt.\n * It is also available through the world-wide-web at this URL:\n * http:\/\/opensource.org\/licenses\/osl-3.0.php\n * If you did not receive a copy of the license and are unable to\n * obtain it through the world-wide-web, please send an email\n * to license@magento.com so we can send you a copy immediately.\n *\n * DISCLAIMER\n *\n * Do not edit or add to this file if you wish to upgrade Magento to newer\n * versions in the future. If you wish to customize Magento for your\n * needs please refer to http:\/\/www.magento.com for more information.\n *\n * @category    Mage\n * @package     Mage_Rating\n * @copyright  Copyright (c) 2006-2016 X.commerce, Inc. and affiliates (http:\/\/www.magento.com)\n * @license    http:\/\/opensource.org\/licenses\/osl-3.0.php  Open Software License (OSL 3.0)\n *\/",2],["T_WHITESPACE","\n\n",25],["T_DOC_COMMENT","\/**\n * Rating model\n *\n * @method Mage_Rating_Model_Resource_Rating getResource()\n * @method Mage_Rating_Model_Resource_Rating _getResource()\n * @method array getRatingCodes()\n * @method Mage_Rating_Model_Rating setRatingCodes(array $value)\n * @method array getStores()\n * @method Mage_Rating_Model_Rating setStores(array $value)\n * @method string getRatingCode()\n * @method Mage_Rating_Model_Rating getRatingCode(string $value)\n *\n * @category   Mage\n * @package    Mage_Rating\n * @author      Magento Core Team <core@magentocommerce.com>\n *\/",27],["T_WHITESPACE","\n",42],["T_CLASS","class",43],["T_WHITESPACE"," ",43],["T_STRING","Mage_Rating_Model_Rating",43],["T_WHITESPACE"," ",43],["T_EXTENDS","extends",43],["T_WHITESPACE"," ",43],["T_STRING","Mage_Core_Model_Abstract",43],["T_WHITESPACE","\n",43],"{",["T_WHITESPACE","\n    ",44],["T_DOC_COMMENT","\/**\n     * rating entity codes\n     *\n     *\/",45],["T_WHITESPACE","\n    ",48],["T_CONST","const",49],["T_WHITESPACE"," ",49],["T_STRING","ENTITY_PRODUCT_CODE",49],["T_WHITESPACE","           ",49],"=",["T_WHITESPACE"," ",49],["T_CONSTANT_ENCAPSED_STRING","'product'",49],";",["T_WHITESPACE","\n    ",49],["T_CONST","const",50],["T_WHITESPACE"," ",50],["T_STRING","ENTITY_PRODUCT_REVIEW_CODE",50],["T_WHITESPACE","    ",50],"=",["T_WHITESPACE"," ",50],["T_CONSTANT_ENCAPSED_STRING","'product_review'",50],";",["T_WHITESPACE","\n    ",50],["T_CONST","const",51],["T_WHITESPACE"," ",51],["T_STRING","ENTITY_REVIEW_CODE",51],["T_WHITESPACE","            ",51],"=",["T_WHITESPACE"," ",51],["T_CONSTANT_ENCAPSED_STRING","'review'",51],";",["T_WHITESPACE","\n\n    ",51],["T_DOC_COMMENT","\/**\n     * Define resource model\n     *\n     * @return void\n     *\/",53],["T_WHITESPACE","\n    ",57],["T_PROTECTED","protected",58],["T_WHITESPACE"," ",58],["T_FUNCTION","function",58],["T_WHITESPACE"," ",58],["T_STRING","_construct",58],"(",")",["T_WHITESPACE","\n    ",58],"{",["T_WHITESPACE","\n        ",59],["T_VARIABLE","$this",60],["T_OBJECT_OPERATOR","->",60],["T_STRING","_init",60],"(",["T_CONSTANT_ENCAPSED_STRING","'rating\/rating'",60],")",";",["T_WHITESPACE","\n    ",60],"}",["T_WHITESPACE","\n\n    ",61],["T_PUBLIC","public",63],["T_WHITESPACE"," ",63],["T_FUNCTION","function",63],["T_WHITESPACE"," ",63],["T_STRING","addOptionVote",63],"(",["T_VARIABLE","$optionId",63],",",["T_WHITESPACE"," ",63],["T_VARIABLE","$entityPkValue",63],")",["T_WHITESPACE","\n    ",63],"{",["T_WHITESPACE","\n        ",64],["T_STRING","Mage",65],["T_DOUBLE_COLON","::",65],["T_STRING","getModel",65],"(",["T_CONSTANT_ENCAPSED_STRING","'rating\/rating_option'",65],")",["T_OBJECT_OPERATOR","->",65],["T_STRING","setOptionId",65],"(",["T_VARIABLE","$optionId",65],")",["T_WHITESPACE","\n            ",65],["T_OBJECT_OPERATOR","->",66],["T_STRING","setRatingId",66],"(",["T_VARIABLE","$this",66],["T_OBJECT_OPERATOR","->",66],["T_STRING","getId",66],"(",")",")",["T_WHITESPACE","\n            ",66],["T_OBJECT_OPERATOR","->",67],["T_STRING","setReviewId",67],"(",["T_VARIABLE","$this",67],["T_OBJECT_OPERATOR","->",67],["T_STRING","getReviewId",67],"(",")",")",["T_WHITESPACE","\n            ",67],["T_OBJECT_OPERATOR","->",68],["T_STRING","setEntityPkValue",68],"(",["T_VARIABLE","$entityPkValue",68],")",["T_WHITESPACE","\n            ",68],["T_OBJECT_OPERATOR","->",69],["T_STRING","addVote",69],"(",")",";",["T_WHITESPACE","\n        ",69],["T_RETURN","return",70],["T_WHITESPACE"," ",70],["T_VARIABLE","$this",70],";",["T_WHITESPACE","\n    ",70],"}",["T_WHITESPACE","\n\n    ",71],["T_PUBLIC","public",73],["T_WHITESPACE"," ",73],["T_FUNCTION","function",73],["T_WHITESPACE"," ",73],["T_STRING","updateOptionVote",73],"(",["T_VARIABLE","$optionId",73],")",["T_WHITESPACE","\n    ",73],"{",["T_WHITESPACE","\n        ",74],["T_STRING","Mage",75],["T_DOUBLE_COLON","::",75],["T_STRING","getModel",75],"(",["T_CONSTANT_ENCAPSED_STRING","'rating\/rating_option'",75],")",["T_OBJECT_OPERATOR","->",75],["T_STRING","setOptionId",75],"(",["T_VARIABLE","$optionId",75],")",["T_WHITESPACE","\n            ",75],["T_OBJECT_OPERATOR","->",76],["T_STRING","setVoteId",76],"(",["T_VARIABLE","$this",76],["T_OBJECT_OPERATOR","->",76],["T_STRING","getVoteId",76],"(",")",")",["T_WHITESPACE","\n            ",76],["T_OBJECT_OPERATOR","->",77],["T_STRING","setReviewId",77],"(",["T_VARIABLE","$this",77],["T_OBJECT_OPERATOR","->",77],["T_STRING","getReviewId",77],"(",")",")",["T_WHITESPACE","\n            ",77],["T_OBJECT_OPERATOR","->",78],["T_STRING","setDoUpdate",78],"(",["T_LNUMBER","1",78],")",["T_WHITESPACE","\n            ",78],["T_OBJECT_OPERATOR","->",79],["T_STRING","addVote",79],"(",")",";",["T_WHITESPACE","\n        ",79],["T_RETURN","return",80],["T_WHITESPACE"," ",80],["T_VARIABLE","$this",80],";",["T_WHITESPACE","\n    ",80],"}",["T_WHITESPACE","\n\n    ",81],["T_DOC_COMMENT","\/**\n     * retrieve rating options\n     *\n     * @return array\n     *\/",83],["T_WHITESPACE","\n    ",87],["T_PUBLIC","public",88],["T_WHITESPACE"," ",88],["T_FUNCTION","function",88],["T_WHITESPACE"," ",88],["T_STRING","getOptions",88],"(",")",["T_WHITESPACE","\n    ",88],"{",["T_WHITESPACE","\n        ",89],["T_IF","if",90],["T_WHITESPACE"," ",90],"(",["T_VARIABLE","$options",90],["T_WHITESPACE"," ",90],"=",["T_WHITESPACE"," ",90],["T_VARIABLE","$this",90],["T_OBJECT_OPERATOR","->",90],["T_STRING","getData",90],"(",["T_CONSTANT_ENCAPSED_STRING","'options'",90],")",")",["T_WHITESPACE"," ",90],"{",["T_WHITESPACE","\n            ",90],["T_RETURN","return",91],["T_WHITESPACE"," ",91],["T_VARIABLE","$options",91],";",["T_WHITESPACE","\n        ",91],"}",["T_WHITESPACE","\n        ",92],["T_ELSEIF","elseif",93],["T_WHITESPACE"," ",93],"(",["T_VARIABLE","$id",93],["T_WHITESPACE"," ",93],"=",["T_WHITESPACE"," ",93],["T_VARIABLE","$this",93],["T_OBJECT_OPERATOR","->",93],["T_STRING","getId",93],"(",")",")",["T_WHITESPACE"," ",93],"{",["T_WHITESPACE","\n            ",93],["T_RETURN","return",94],["T_WHITESPACE"," ",94],["T_STRING","Mage",94],["T_DOUBLE_COLON","::",94],["T_STRING","getResourceModel",94],"(",["T_CONSTANT_ENCAPSED_STRING","'rating\/rating_option_collection'",94],")",["T_WHITESPACE","\n               ",94],["T_OBJECT_OPERATOR","->",95],["T_STRING","addRatingFilter",95],"(",["T_VARIABLE","$id",95],")",["T_WHITESPACE","\n               ",95],["T_OBJECT_OPERATOR","->",96],["T_STRING","setPositionOrder",96],"(",")",["T_WHITESPACE","\n               ",96],["T_OBJECT_OPERATOR","->",97],["T_STRING","load",97],"(",")",["T_WHITESPACE","\n               ",97],["T_OBJECT_OPERATOR","->",98],["T_STRING","getItems",98],"(",")",";",["T_WHITESPACE","\n        ",98],"}",["T_WHITESPACE","\n        ",99],["T_RETURN","return",100],["T_WHITESPACE"," ",100],["T_ARRAY","array",100],"(",")",";",["T_WHITESPACE","\n    ",100],"}",["T_WHITESPACE","\n\n    ",101],["T_DOC_COMMENT","\/**\n     * Get rating collection object\n     *\n     * @return Varien_Data_Collection_Db\n     *\/",103],["T_WHITESPACE","\n\n    ",107],["T_PUBLIC","public",109],["T_WHITESPACE"," ",109],["T_FUNCTION","function",109],["T_WHITESPACE"," ",109],["T_STRING","getEntitySummary",109],"(",["T_VARIABLE","$entityPkValue",109],",",["T_WHITESPACE","  ",109],["T_VARIABLE","$onlyForCurrentStore",109],["T_WHITESPACE"," ",109],"=",["T_WHITESPACE"," ",109],["T_STRING","true",109],")",["T_WHITESPACE","\n    ",109],"{",["T_WHITESPACE","\n        ",110],["T_VARIABLE","$this",111],["T_OBJECT_OPERATOR","->",111],["T_STRING","setEntityPkValue",111],"(",["T_VARIABLE","$entityPkValue",111],")",";",["T_WHITESPACE","\n        ",111],["T_RETURN","return",112],["T_WHITESPACE"," ",112],["T_VARIABLE","$this",112],["T_OBJECT_OPERATOR","->",112],["T_STRING","_getResource",112],"(",")",["T_OBJECT_OPERATOR","->",112],["T_STRING","getEntitySummary",112],"(",["T_VARIABLE","$this",112],",",["T_WHITESPACE"," ",112],["T_VARIABLE","$onlyForCurrentStore",112],")",";",["T_WHITESPACE","\n    ",112],"}",["T_WHITESPACE","\n\n    ",113],["T_PUBLIC","public",115],["T_WHITESPACE"," ",115],["T_FUNCTION","function",115],["T_WHITESPACE"," ",115],["T_STRING","getReviewSummary",115],"(",["T_VARIABLE","$reviewId",115],",",["T_WHITESPACE","  ",115],["T_VARIABLE","$onlyForCurrentStore",115],["T_WHITESPACE"," ",115],"=",["T_WHITESPACE"," ",115],["T_STRING","true",115],")",["T_WHITESPACE","\n    ",115],"{",["T_WHITESPACE","\n        ",116],["T_VARIABLE","$this",117],["T_OBJECT_OPERATOR","->",117],["T_STRING","setReviewId",117],"(",["T_VARIABLE","$reviewId",117],")",";",["T_WHITESPACE","\n        ",117],["T_RETURN","return",118],["T_WHITESPACE"," ",118],["T_VARIABLE","$this",118],["T_OBJECT_OPERATOR","->",118],["T_STRING","_getResource",118],"(",")",["T_OBJECT_OPERATOR","->",118],["T_STRING","getReviewSummary",118],"(",["T_VARIABLE","$this",118],",",["T_WHITESPACE"," ",118],["T_VARIABLE","$onlyForCurrentStore",118],")",";",["T_WHITESPACE","\n    ",118],"}",["T_WHITESPACE","\n\n    ",119],["T_DOC_COMMENT","\/**\n     * Get rating entity type id by code\n     *\n     * @param string $entityCode\n     * @return int\n     *\/",121],["T_WHITESPACE","\n    ",126],["T_PUBLIC","public",127],["T_WHITESPACE"," ",127],["T_FUNCTION","function",127],["T_WHITESPACE"," ",127],["T_STRING","getEntityIdByCode",127],"(",["T_VARIABLE","$entityCode",127],")",["T_WHITESPACE","\n    ",127],"{",["T_WHITESPACE","\n        ",128],["T_RETURN","return",129],["T_WHITESPACE"," ",129],["T_VARIABLE","$this",129],["T_OBJECT_OPERATOR","->",129],["T_STRING","getResource",129],"(",")",["T_OBJECT_OPERATOR","->",129],["T_STRING","getEntityIdByCode",129],"(",["T_VARIABLE","$entityCode",129],")",";",["T_WHITESPACE","\n    ",129],"}",["T_WHITESPACE","\n",130],"}",["T_WHITESPACE","\n",131]]
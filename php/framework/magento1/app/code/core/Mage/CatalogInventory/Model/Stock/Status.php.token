[["T_OPEN_TAG","<?php\n",1],["T_DOC_COMMENT","\/**\n * Magento\n *\n * NOTICE OF LICENSE\n *\n * This source file is subject to the Open Software License (OSL 3.0)\n * that is bundled with this package in the file LICENSE.txt.\n * It is also available through the world-wide-web at this URL:\n * http:\/\/opensource.org\/licenses\/osl-3.0.php\n * If you did not receive a copy of the license and are unable to\n * obtain it through the world-wide-web, please send an email\n * to license@magento.com so we can send you a copy immediately.\n *\n * DISCLAIMER\n *\n * Do not edit or add to this file if you wish to upgrade Magento to newer\n * versions in the future. If you wish to customize Magento for your\n * needs please refer to http:\/\/www.magento.com for more information.\n *\n * @category    Mage\n * @package     Mage_CatalogInventory\n * @copyright  Copyright (c) 2006-2016 X.commerce, Inc. and affiliates (http:\/\/www.magento.com)\n * @license    http:\/\/opensource.org\/licenses\/osl-3.0.php  Open Software License (OSL 3.0)\n *\/",2],["T_WHITESPACE","\n\n",25],["T_DOC_COMMENT","\/**\n * CatalogInventory Stock Status per website Model\n *\n * @method Mage_CatalogInventory_Model_Resource_Stock_Status _getResource()\n * @method Mage_CatalogInventory_Model_Resource_Stock_Status getResource()\n * @method int getProductId()\n * @method Mage_CatalogInventory_Model_Stock_Status setProductId(int $value)\n * @method int getWebsiteId()\n * @method Mage_CatalogInventory_Model_Stock_Status setWebsiteId(int $value)\n * @method int getStockId()\n * @method Mage_CatalogInventory_Model_Stock_Status setStockId(int $value)\n * @method float getQty()\n * @method Mage_CatalogInventory_Model_Stock_Status setQty(float $value)\n * @method int getStockStatus()\n * @method Mage_CatalogInventory_Model_Stock_Status setStockStatus(int $value)\n *\n * @category    Mage\n * @package     Mage_CatalogInventory\n * @author      Magento Core Team <core@magentocommerce.com>\n *\/",27],["T_WHITESPACE","\n",46],["T_CLASS","class",47],["T_WHITESPACE"," ",47],["T_STRING","Mage_CatalogInventory_Model_Stock_Status",47],["T_WHITESPACE"," ",47],["T_EXTENDS","extends",47],["T_WHITESPACE"," ",47],["T_STRING","Mage_Core_Model_Abstract",47],["T_WHITESPACE","\n",47],"{",["T_WHITESPACE","\n    ",48],["T_CONST","const",49],["T_WHITESPACE"," ",49],["T_STRING","STATUS_OUT_OF_STOCK",49],["T_WHITESPACE","       ",49],"=",["T_WHITESPACE"," ",49],["T_LNUMBER","0",49],";",["T_WHITESPACE","\n    ",49],["T_CONST","const",50],["T_WHITESPACE"," ",50],["T_STRING","STATUS_IN_STOCK",50],["T_WHITESPACE","           ",50],"=",["T_WHITESPACE"," ",50],["T_LNUMBER","1",50],";",["T_WHITESPACE","\n\n    ",50],["T_DOC_COMMENT","\/**\n     * Product Type Instances cache\n     *\n     * @var array\n     *\/",52],["T_WHITESPACE","\n    ",56],["T_PROTECTED","protected",57],["T_WHITESPACE"," ",57],["T_VARIABLE","$_productTypes",57],";",["T_WHITESPACE","\n\n    ",57],["T_DOC_COMMENT","\/**\n     * Websites cache\n     *\n     * @var array\n     *\/",59],["T_WHITESPACE","\n    ",63],["T_PROTECTED","protected",64],["T_WHITESPACE"," ",64],["T_VARIABLE","$_websites",64],";",["T_WHITESPACE","\n\n    ",64],["T_DOC_COMMENT","\/**\n     * Init resource model\n     *\n     *\/",66],["T_WHITESPACE","\n    ",69],["T_PROTECTED","protected",70],["T_WHITESPACE"," ",70],["T_FUNCTION","function",70],["T_WHITESPACE"," ",70],["T_STRING","_construct",70],"(",")",["T_WHITESPACE","\n    ",70],"{",["T_WHITESPACE","\n        ",71],["T_VARIABLE","$this",72],["T_OBJECT_OPERATOR","->",72],["T_STRING","_init",72],"(",["T_CONSTANT_ENCAPSED_STRING","'cataloginventory\/stock_status'",72],")",";",["T_WHITESPACE","\n    ",72],"}",["T_WHITESPACE","\n\n    ",73],["T_DOC_COMMENT","\/**\n     * Retrieve Product Type Instances\n     * as key - type code, value - instance model\n     *\n     * @return array\n     *\/",75],["T_WHITESPACE","\n    ",80],["T_PUBLIC","public",81],["T_WHITESPACE"," ",81],["T_FUNCTION","function",81],["T_WHITESPACE"," ",81],["T_STRING","getProductTypeInstances",81],"(",")",["T_WHITESPACE","\n    ",81],"{",["T_WHITESPACE","\n        ",82],["T_IF","if",83],["T_WHITESPACE"," ",83],"(",["T_STRING","is_null",83],"(",["T_VARIABLE","$this",83],["T_OBJECT_OPERATOR","->",83],["T_STRING","_productTypes",83],")",")",["T_WHITESPACE"," ",83],"{",["T_WHITESPACE","\n            ",83],["T_VARIABLE","$this",84],["T_OBJECT_OPERATOR","->",84],["T_STRING","_productTypes",84],["T_WHITESPACE"," ",84],"=",["T_WHITESPACE"," ",84],["T_ARRAY","array",84],"(",")",";",["T_WHITESPACE","\n            ",84],["T_VARIABLE","$productEmulator",85],["T_WHITESPACE","     ",85],"=",["T_WHITESPACE"," ",85],["T_NEW","new",85],["T_WHITESPACE"," ",85],["T_STRING","Varien_Object",85],"(",")",";",["T_WHITESPACE","\n\n            ",85],["T_FOREACH","foreach",87],["T_WHITESPACE"," ",87],"(",["T_STRING","array_keys",87],"(",["T_STRING","Mage_Catalog_Model_Product_Type",87],["T_DOUBLE_COLON","::",87],["T_STRING","getTypes",87],"(",")",")",["T_WHITESPACE"," ",87],["T_AS","as",87],["T_WHITESPACE"," ",87],["T_VARIABLE","$typeId",87],")",["T_WHITESPACE"," ",87],"{",["T_WHITESPACE","\n                ",87],["T_VARIABLE","$productEmulator",88],["T_OBJECT_OPERATOR","->",88],["T_STRING","setTypeId",88],"(",["T_VARIABLE","$typeId",88],")",";",["T_WHITESPACE","\n                ",88],["T_VARIABLE","$this",89],["T_OBJECT_OPERATOR","->",89],["T_STRING","_productTypes",89],"[",["T_VARIABLE","$typeId",89],"]",["T_WHITESPACE"," ",89],"=",["T_WHITESPACE"," ",89],["T_STRING","Mage",89],["T_DOUBLE_COLON","::",89],["T_STRING","getSingleton",89],"(",["T_CONSTANT_ENCAPSED_STRING","'catalog\/product_type'",89],")",["T_WHITESPACE","\n                    ",89],["T_OBJECT_OPERATOR","->",90],["T_STRING","factory",90],"(",["T_VARIABLE","$productEmulator",90],")",";",["T_WHITESPACE","\n            ",90],"}",["T_WHITESPACE","\n        ",91],"}",["T_WHITESPACE","\n        ",92],["T_RETURN","return",93],["T_WHITESPACE"," ",93],["T_VARIABLE","$this",93],["T_OBJECT_OPERATOR","->",93],["T_STRING","_productTypes",93],";",["T_WHITESPACE","\n    ",93],"}",["T_WHITESPACE","\n\n    ",94],["T_DOC_COMMENT","\/**\n     * Retrieve Product Type Instance By Product Type\n     *\n     * @param string $productType\n     * @return Mage_Catalog_Model_Product_Type_Abstract\n     *\/",96],["T_WHITESPACE","\n    ",101],["T_PUBLIC","public",102],["T_WHITESPACE"," ",102],["T_FUNCTION","function",102],["T_WHITESPACE"," ",102],["T_STRING","getProductTypeInstance",102],"(",["T_VARIABLE","$productType",102],")",["T_WHITESPACE","\n    ",102],"{",["T_WHITESPACE","\n        ",103],["T_VARIABLE","$types",104],["T_WHITESPACE"," ",104],"=",["T_WHITESPACE"," ",104],["T_VARIABLE","$this",104],["T_OBJECT_OPERATOR","->",104],["T_STRING","getProductTypeInstances",104],"(",")",";",["T_WHITESPACE","\n        ",104],["T_IF","if",105],["T_WHITESPACE"," ",105],"(",["T_ISSET","isset",105],"(",["T_VARIABLE","$types",105],"[",["T_VARIABLE","$productType",105],"]",")",")",["T_WHITESPACE"," ",105],"{",["T_WHITESPACE","\n            ",105],["T_RETURN","return",106],["T_WHITESPACE"," ",106],["T_VARIABLE","$types",106],"[",["T_VARIABLE","$productType",106],"]",";",["T_WHITESPACE","\n        ",106],"}",["T_WHITESPACE","\n        ",107],["T_RETURN","return",108],["T_WHITESPACE"," ",108],["T_STRING","false",108],";",["T_WHITESPACE","\n    ",108],"}",["T_WHITESPACE","\n\n    ",109],["T_DOC_COMMENT","\/**\n     * Retrieve website models\n     *\n     * @return array\n     *\/",111],["T_WHITESPACE","\n    ",115],["T_PUBLIC","public",116],["T_WHITESPACE"," ",116],["T_FUNCTION","function",116],["T_WHITESPACE"," ",116],["T_STRING","getWebsites",116],"(",["T_VARIABLE","$websiteId",116],["T_WHITESPACE"," ",116],"=",["T_WHITESPACE"," ",116],["T_STRING","null",116],")",["T_WHITESPACE","\n    ",116],"{",["T_WHITESPACE","\n        ",117],["T_IF","if",118],["T_WHITESPACE"," ",118],"(",["T_STRING","is_null",118],"(",["T_VARIABLE","$this",118],["T_OBJECT_OPERATOR","->",118],["T_STRING","_websites",118],")",")",["T_WHITESPACE"," ",118],"{",["T_WHITESPACE","\n            ",118],["T_VARIABLE","$this",119],["T_OBJECT_OPERATOR","->",119],["T_STRING","_websites",119],["T_WHITESPACE"," ",119],"=",["T_WHITESPACE"," ",119],["T_VARIABLE","$this",119],["T_OBJECT_OPERATOR","->",119],["T_STRING","getResource",119],"(",")",["T_OBJECT_OPERATOR","->",119],["T_STRING","getWebsiteStores",119],"(",")",";",["T_WHITESPACE","\n        ",119],"}",["T_WHITESPACE","\n\n        ",120],["T_VARIABLE","$websites",122],["T_WHITESPACE"," ",122],"=",["T_WHITESPACE"," ",122],["T_VARIABLE","$this",122],["T_OBJECT_OPERATOR","->",122],["T_STRING","_websites",122],";",["T_WHITESPACE","\n        ",122],["T_IF","if",123],["T_WHITESPACE"," ",123],"(","!",["T_STRING","is_null",123],"(",["T_VARIABLE","$websiteId",123],")",["T_WHITESPACE"," ",123],["T_BOOLEAN_AND","&&",123],["T_WHITESPACE"," ",123],["T_ISSET","isset",123],"(",["T_VARIABLE","$this",123],["T_OBJECT_OPERATOR","->",123],["T_STRING","_websites",123],"[",["T_VARIABLE","$websiteId",123],"]",")",")",["T_WHITESPACE"," ",123],"{",["T_WHITESPACE","\n            ",123],["T_VARIABLE","$websites",124],["T_WHITESPACE"," ",124],"=",["T_WHITESPACE"," ",124],["T_ARRAY","array",124],"(",["T_VARIABLE","$websiteId",124],["T_WHITESPACE"," ",124],["T_DOUBLE_ARROW","=>",124],["T_WHITESPACE"," ",124],["T_VARIABLE","$this",124],["T_OBJECT_OPERATOR","->",124],["T_STRING","_websites",124],"[",["T_VARIABLE","$websiteId",124],"]",")",";",["T_WHITESPACE","\n        ",124],"}",["T_WHITESPACE","\n\n        ",125],["T_RETURN","return",127],["T_WHITESPACE"," ",127],["T_VARIABLE","$websites",127],";",["T_WHITESPACE","\n    ",127],"}",["T_WHITESPACE","\n\n    ",128],["T_DOC_COMMENT","\/**\n     * Retrieve Default website store Id\n     *\n     * @param int $websiteId\n     * @return int\n     *\/",130],["T_WHITESPACE","\n    ",135],["T_PUBLIC","public",136],["T_WHITESPACE"," ",136],["T_FUNCTION","function",136],["T_WHITESPACE"," ",136],["T_STRING","getWebsiteDefaultStoreId",136],"(",["T_VARIABLE","$websiteId",136],")",["T_WHITESPACE","\n    ",136],"{",["T_WHITESPACE","\n        ",137],["T_VARIABLE","$websites",138],["T_WHITESPACE"," ",138],"=",["T_WHITESPACE"," ",138],["T_VARIABLE","$this",138],["T_OBJECT_OPERATOR","->",138],["T_STRING","getWebsites",138],"(",")",";",["T_WHITESPACE","\n        ",138],["T_IF","if",139],["T_WHITESPACE"," ",139],"(",["T_ISSET","isset",139],"(",["T_VARIABLE","$websites",139],"[",["T_VARIABLE","$websiteId",139],"]",")",")",["T_WHITESPACE"," ",139],"{",["T_WHITESPACE","\n            ",139],["T_RETURN","return",140],["T_WHITESPACE"," ",140],["T_VARIABLE","$websites",140],"[",["T_VARIABLE","$websiteId",140],"]",";",["T_WHITESPACE","\n        ",140],"}",["T_WHITESPACE","\n        ",141],["T_RETURN","return",142],["T_WHITESPACE"," ",142],["T_LNUMBER","0",142],";",["T_WHITESPACE","\n    ",142],"}",["T_WHITESPACE","\n\n    ",143],["T_DOC_COMMENT","\/**\n     * Retrieve Catalog Product Status Model\n     *\n     * @return Mage_Catalog_Model_Product_Status\n     *\/",145],["T_WHITESPACE","\n    ",149],["T_PUBLIC","public",150],["T_WHITESPACE"," ",150],["T_FUNCTION","function",150],["T_WHITESPACE"," ",150],["T_STRING","getProductStatusModel",150],"(",")",["T_WHITESPACE","\n    ",150],"{",["T_WHITESPACE","\n        ",151],["T_RETURN","return",152],["T_WHITESPACE"," ",152],["T_STRING","Mage",152],["T_DOUBLE_COLON","::",152],["T_STRING","getSingleton",152],"(",["T_CONSTANT_ENCAPSED_STRING","'catalog\/product_status'",152],")",";",["T_WHITESPACE","\n    ",152],"}",["T_WHITESPACE","\n\n    ",153],["T_DOC_COMMENT","\/**\n     * Retrieve CatalogInventory empty Stock Item model\n     *\n     * @return Mage_CatalogInventory_Model_Stock_Item\n     *\/",155],["T_WHITESPACE","\n    ",159],["T_PUBLIC","public",160],["T_WHITESPACE"," ",160],["T_FUNCTION","function",160],["T_WHITESPACE"," ",160],["T_STRING","getStockItemModel",160],"(",")",["T_WHITESPACE","\n    ",160],"{",["T_WHITESPACE","\n        ",161],["T_RETURN","return",162],["T_WHITESPACE"," ",162],["T_STRING","Mage",162],["T_DOUBLE_COLON","::",162],["T_STRING","getModel",162],"(",["T_CONSTANT_ENCAPSED_STRING","'cataloginventory\/stock_item'",162],")",";",["T_WHITESPACE","\n    ",162],"}",["T_WHITESPACE","\n\n    ",163],["T_DOC_COMMENT","\/**\n     * Retrieve Product Status Enabled Constant\n     *\n     * @return int\n     *\/",165],["T_WHITESPACE","\n    ",169],["T_PUBLIC","public",170],["T_WHITESPACE"," ",170],["T_FUNCTION","function",170],["T_WHITESPACE"," ",170],["T_STRING","getProductStatusEnabled",170],"(",")",["T_WHITESPACE","\n    ",170],"{",["T_WHITESPACE","\n        ",171],["T_RETURN","return",172],["T_WHITESPACE"," ",172],["T_STRING","Mage_Catalog_Model_Product_Status",172],["T_DOUBLE_COLON","::",172],["T_STRING","STATUS_ENABLED",172],";",["T_WHITESPACE","\n    ",172],"}",["T_WHITESPACE","\n\n    ",173],["T_DOC_COMMENT","\/**\n     * Change Stock Item status process\n     *\n     * @param Mage_CatalogInventory_Model_Stock_Item $item\n     * @return Mage_CatalogInventory_Model_Stock_Status\n     *\/",175],["T_WHITESPACE","\n    ",180],["T_PUBLIC","public",181],["T_WHITESPACE"," ",181],["T_FUNCTION","function",181],["T_WHITESPACE"," ",181],["T_STRING","changeItemStatus",181],"(",["T_STRING","Mage_CatalogInventory_Model_Stock_Item",181],["T_WHITESPACE"," ",181],["T_VARIABLE","$item",181],")",["T_WHITESPACE","\n    ",181],"{",["T_WHITESPACE","\n        ",182],["T_VARIABLE","$productId",183],["T_WHITESPACE","  ",183],"=",["T_WHITESPACE"," ",183],["T_VARIABLE","$item",183],["T_OBJECT_OPERATOR","->",183],["T_STRING","getProductId",183],"(",")",";",["T_WHITESPACE","\n        ",183],["T_IF","if",184],["T_WHITESPACE"," ",184],"(","!",["T_VARIABLE","$productType",184],["T_WHITESPACE"," ",184],"=",["T_WHITESPACE"," ",184],["T_VARIABLE","$item",184],["T_OBJECT_OPERATOR","->",184],["T_STRING","getProductTypeId",184],"(",")",")",["T_WHITESPACE"," ",184],"{",["T_WHITESPACE","\n            ",184],["T_VARIABLE","$productType",185],["T_WHITESPACE","    ",185],"=",["T_WHITESPACE"," ",185],["T_VARIABLE","$this",185],["T_OBJECT_OPERATOR","->",185],["T_STRING","getProductType",185],"(",["T_VARIABLE","$productId",185],")",";",["T_WHITESPACE","\n        ",185],"}",["T_WHITESPACE","\n\n        ",186],["T_VARIABLE","$status",188],["T_WHITESPACE","     ",188],"=",["T_WHITESPACE"," ",188],["T_INT_CAST","(int)",188],["T_VARIABLE","$item",188],["T_OBJECT_OPERATOR","->",188],["T_STRING","getIsInStock",188],"(",")",";",["T_WHITESPACE","\n        ",188],["T_VARIABLE","$qty",189],["T_WHITESPACE","        ",189],"=",["T_WHITESPACE"," ",189],["T_INT_CAST","(int)",189],["T_VARIABLE","$item",189],["T_OBJECT_OPERATOR","->",189],["T_STRING","getQty",189],"(",")",";",["T_WHITESPACE","\n\n        ",189],["T_VARIABLE","$this",191],["T_OBJECT_OPERATOR","->",191],["T_STRING","_processChildren",191],"(",["T_VARIABLE","$productId",191],",",["T_WHITESPACE"," ",191],["T_VARIABLE","$productType",191],",",["T_WHITESPACE"," ",191],["T_VARIABLE","$qty",191],",",["T_WHITESPACE"," ",191],["T_VARIABLE","$status",191],",",["T_WHITESPACE"," ",191],["T_VARIABLE","$item",191],["T_OBJECT_OPERATOR","->",191],["T_STRING","getStockId",191],"(",")",")",";",["T_WHITESPACE","\n        ",191],["T_VARIABLE","$this",192],["T_OBJECT_OPERATOR","->",192],["T_STRING","_processParents",192],"(",["T_VARIABLE","$productId",192],",",["T_WHITESPACE"," ",192],["T_VARIABLE","$item",192],["T_OBJECT_OPERATOR","->",192],["T_STRING","getStockId",192],"(",")",")",";",["T_WHITESPACE","\n\n        ",192],["T_RETURN","return",194],["T_WHITESPACE"," ",194],["T_VARIABLE","$this",194],";",["T_WHITESPACE","\n    ",194],"}",["T_WHITESPACE","\n\n    ",195],["T_DOC_COMMENT","\/**\n     * Assign Stock Status to Product\n     *\n     * @param Mage_Catalog_Model_Product $product\n     * @param int $stockId\n     * @param int $stockStatus\n     * @return Mage_CatalogInventory_Model_Stock_Status\n     *\/",197],["T_WHITESPACE","\n    ",204],["T_PUBLIC","public",205],["T_WHITESPACE"," ",205],["T_FUNCTION","function",205],["T_WHITESPACE"," ",205],["T_STRING","assignProduct",205],"(",["T_STRING","Mage_Catalog_Model_Product",205],["T_WHITESPACE"," ",205],["T_VARIABLE","$product",205],",",["T_WHITESPACE"," ",205],["T_VARIABLE","$stockId",205],["T_WHITESPACE"," ",205],"=",["T_WHITESPACE"," ",205],["T_LNUMBER","1",205],",",["T_WHITESPACE"," ",205],["T_VARIABLE","$stockStatus",205],["T_WHITESPACE"," ",205],"=",["T_WHITESPACE"," ",205],["T_STRING","null",205],")",["T_WHITESPACE","\n    ",205],"{",["T_WHITESPACE","\n        ",206],["T_IF","if",207],["T_WHITESPACE"," ",207],"(",["T_STRING","is_null",207],"(",["T_VARIABLE","$stockStatus",207],")",")",["T_WHITESPACE"," ",207],"{",["T_WHITESPACE","\n            ",207],["T_VARIABLE","$websiteId",208],["T_WHITESPACE"," ",208],"=",["T_WHITESPACE"," ",208],["T_VARIABLE","$product",208],["T_OBJECT_OPERATOR","->",208],["T_STRING","getStore",208],"(",")",["T_OBJECT_OPERATOR","->",208],["T_STRING","getWebsiteId",208],"(",")",";",["T_WHITESPACE","\n            ",208],["T_VARIABLE","$status",209],["T_WHITESPACE"," ",209],"=",["T_WHITESPACE"," ",209],["T_VARIABLE","$this",209],["T_OBJECT_OPERATOR","->",209],["T_STRING","getProductStatus",209],"(",["T_VARIABLE","$product",209],["T_OBJECT_OPERATOR","->",209],["T_STRING","getId",209],"(",")",",",["T_WHITESPACE"," ",209],["T_VARIABLE","$websiteId",209],",",["T_WHITESPACE"," ",209],["T_VARIABLE","$stockId",209],")",";",["T_WHITESPACE","\n            ",209],["T_VARIABLE","$stockStatus",210],["T_WHITESPACE"," ",210],"=",["T_WHITESPACE"," ",210],["T_ISSET","isset",210],"(",["T_VARIABLE","$status",210],"[",["T_VARIABLE","$product",210],["T_OBJECT_OPERATOR","->",210],["T_STRING","getId",210],"(",")","]",")",["T_WHITESPACE"," ",210],"?",["T_WHITESPACE"," ",210],["T_VARIABLE","$status",210],"[",["T_VARIABLE","$product",210],["T_OBJECT_OPERATOR","->",210],["T_STRING","getId",210],"(",")","]",["T_WHITESPACE"," ",210],":",["T_WHITESPACE"," ",210],["T_STRING","null",210],";",["T_WHITESPACE","\n        ",210],"}",["T_WHITESPACE","\n\n        ",211],["T_VARIABLE","$product",213],["T_OBJECT_OPERATOR","->",213],["T_STRING","setIsSalable",213],"(",["T_VARIABLE","$stockStatus",213],")",";",["T_WHITESPACE","\n\n        ",213],["T_RETURN","return",215],["T_WHITESPACE"," ",215],["T_VARIABLE","$this",215],";",["T_WHITESPACE","\n    ",215],"}",["T_WHITESPACE","\n\n    ",216],["T_DOC_COMMENT","\/**\n     * Rebuild stock status for all products\n     *\n     * @param int $websiteId\n     * @return Mage_CatalogInventory_Model_Stock_Status\n     *\/",218],["T_WHITESPACE","\n    ",223],["T_PUBLIC","public",224],["T_WHITESPACE"," ",224],["T_FUNCTION","function",224],["T_WHITESPACE"," ",224],["T_STRING","rebuild",224],"(",["T_VARIABLE","$websiteId",224],["T_WHITESPACE"," ",224],"=",["T_WHITESPACE"," ",224],["T_STRING","null",224],")",["T_WHITESPACE","\n    ",224],"{",["T_WHITESPACE","\n        ",225],["T_VARIABLE","$lastProductId",226],["T_WHITESPACE"," ",226],"=",["T_WHITESPACE"," ",226],["T_LNUMBER","0",226],";",["T_WHITESPACE","\n        ",226],["T_WHILE","while",227],["T_WHITESPACE"," ",227],"(",["T_STRING","true",227],")",["T_WHITESPACE"," ",227],"{",["T_WHITESPACE","\n            ",227],["T_VARIABLE","$productCollection",228],["T_WHITESPACE"," ",228],"=",["T_WHITESPACE"," ",228],["T_VARIABLE","$this",228],["T_OBJECT_OPERATOR","->",228],["T_STRING","getResource",228],"(",")",["T_OBJECT_OPERATOR","->",228],["T_STRING","getProductCollection",228],"(",["T_VARIABLE","$lastProductId",228],")",";",["T_WHITESPACE","\n            ",228],["T_IF","if",229],["T_WHITESPACE"," ",229],"(","!",["T_VARIABLE","$productCollection",229],")",["T_WHITESPACE"," ",229],"{",["T_WHITESPACE","\n                ",229],["T_BREAK","break",230],";",["T_WHITESPACE","\n            ",230],"}",["T_WHITESPACE","\n\n            ",231],["T_FOREACH","foreach",233],["T_WHITESPACE"," ",233],"(",["T_VARIABLE","$productCollection",233],["T_WHITESPACE"," ",233],["T_AS","as",233],["T_WHITESPACE"," ",233],["T_VARIABLE","$productId",233],["T_WHITESPACE"," ",233],["T_DOUBLE_ARROW","=>",233],["T_WHITESPACE"," ",233],["T_VARIABLE","$productType",233],")",["T_WHITESPACE"," ",233],"{",["T_WHITESPACE","\n                ",233],["T_VARIABLE","$lastProductId",234],["T_WHITESPACE"," ",234],"=",["T_WHITESPACE"," ",234],["T_VARIABLE","$productId",234],";",["T_WHITESPACE","\n                ",234],["T_VARIABLE","$this",235],["T_OBJECT_OPERATOR","->",235],["T_STRING","updateStatus",235],"(",["T_VARIABLE","$productId",235],",",["T_WHITESPACE"," ",235],["T_VARIABLE","$productType",235],",",["T_WHITESPACE"," ",235],["T_VARIABLE","$websiteId",235],")",";",["T_WHITESPACE","\n            ",235],"}",["T_WHITESPACE","\n        ",236],"}",["T_WHITESPACE","\n\n        ",237],["T_RETURN","return",239],["T_WHITESPACE"," ",239],["T_VARIABLE","$this",239],";",["T_WHITESPACE","\n    ",239],"}",["T_WHITESPACE","\n\n    ",240],["T_DOC_COMMENT","\/**\n     * Update product status from stock item\n     *\n     * @param int $productId\n     * @param string $productType\n     * @param int $websiteId\n     * @return Mage_CatalogInventory_Model_Stock_Status\n     *\/",242],["T_WHITESPACE","\n    ",249],["T_PUBLIC","public",250],["T_WHITESPACE"," ",250],["T_FUNCTION","function",250],["T_WHITESPACE"," ",250],["T_STRING","updateStatus",250],"(",["T_VARIABLE","$productId",250],",",["T_WHITESPACE"," ",250],["T_VARIABLE","$productType",250],["T_WHITESPACE"," ",250],"=",["T_WHITESPACE"," ",250],["T_STRING","null",250],",",["T_WHITESPACE"," ",250],["T_VARIABLE","$websiteId",250],["T_WHITESPACE"," ",250],"=",["T_WHITESPACE"," ",250],["T_STRING","null",250],")",["T_WHITESPACE","\n    ",250],"{",["T_WHITESPACE","\n        ",251],["T_IF","if",252],["T_WHITESPACE"," ",252],"(",["T_STRING","is_null",252],"(",["T_VARIABLE","$productType",252],")",")",["T_WHITESPACE"," ",252],"{",["T_WHITESPACE","\n            ",252],["T_VARIABLE","$productType",253],["T_WHITESPACE"," ",253],"=",["T_WHITESPACE"," ",253],["T_VARIABLE","$this",253],["T_OBJECT_OPERATOR","->",253],["T_STRING","getProductType",253],"(",["T_VARIABLE","$productId",253],")",";",["T_WHITESPACE","\n        ",253],"}",["T_WHITESPACE","\n\n        ",254],["T_VARIABLE","$item",256],["T_WHITESPACE"," ",256],"=",["T_WHITESPACE"," ",256],["T_VARIABLE","$this",256],["T_OBJECT_OPERATOR","->",256],["T_STRING","getStockItemModel",256],"(",")",["T_OBJECT_OPERATOR","->",256],["T_STRING","loadByProduct",256],"(",["T_VARIABLE","$productId",256],")",";",["T_WHITESPACE","\n\n        ",256],["T_VARIABLE","$status",258],["T_WHITESPACE","  ",258],"=",["T_WHITESPACE"," ",258],["T_STRING","self",258],["T_DOUBLE_COLON","::",258],["T_STRING","STATUS_IN_STOCK",258],";",["T_WHITESPACE","\n        ",258],["T_VARIABLE","$qty",259],["T_WHITESPACE","     ",259],"=",["T_WHITESPACE"," ",259],["T_LNUMBER","0",259],";",["T_WHITESPACE","\n        ",259],["T_IF","if",260],["T_WHITESPACE"," ",260],"(",["T_VARIABLE","$item",260],["T_OBJECT_OPERATOR","->",260],["T_STRING","getId",260],"(",")",")",["T_WHITESPACE"," ",260],"{",["T_WHITESPACE","\n            ",260],["T_VARIABLE","$status",261],["T_WHITESPACE"," ",261],"=",["T_WHITESPACE"," ",261],["T_VARIABLE","$item",261],["T_OBJECT_OPERATOR","->",261],["T_STRING","getIsInStock",261],"(",")",";",["T_WHITESPACE","\n            ",261],["T_VARIABLE","$qty",262],["T_WHITESPACE","    ",262],"=",["T_WHITESPACE"," ",262],["T_VARIABLE","$item",262],["T_OBJECT_OPERATOR","->",262],["T_STRING","getQty",262],"(",")",";",["T_WHITESPACE","\n        ",262],"}",["T_WHITESPACE","\n\n        ",263],["T_VARIABLE","$this",265],["T_OBJECT_OPERATOR","->",265],["T_STRING","_processChildren",265],"(",["T_VARIABLE","$productId",265],",",["T_WHITESPACE"," ",265],["T_VARIABLE","$productType",265],",",["T_WHITESPACE"," ",265],["T_VARIABLE","$qty",265],",",["T_WHITESPACE"," ",265],["T_VARIABLE","$status",265],",",["T_WHITESPACE"," ",265],["T_VARIABLE","$item",265],["T_OBJECT_OPERATOR","->",265],["T_STRING","getStockId",265],"(",")",",",["T_WHITESPACE"," ",265],["T_VARIABLE","$websiteId",265],")",";",["T_WHITESPACE","\n        ",265],["T_VARIABLE","$this",266],["T_OBJECT_OPERATOR","->",266],["T_STRING","_processParents",266],"(",["T_VARIABLE","$productId",266],",",["T_WHITESPACE"," ",266],["T_VARIABLE","$item",266],["T_OBJECT_OPERATOR","->",266],["T_STRING","getStockId",266],"(",")",",",["T_WHITESPACE"," ",266],["T_VARIABLE","$websiteId",266],")",";",["T_WHITESPACE","\n\n        ",266],["T_RETURN","return",268],["T_WHITESPACE"," ",268],["T_VARIABLE","$this",268],";",["T_WHITESPACE","\n    ",268],"}",["T_WHITESPACE","\n\n    ",269],["T_DOC_COMMENT","\/**\n     * Process children stock status\n     *\n     * @param int $productId\n     * @param string $productType\n     * @param float $qty\n     * @param int $status\n     * @param int $stockId\n     * @param int $websiteId\n     *\n     * @return Mage_CatalogInventory_Model_Stock_Status\n     *\/",271],["T_WHITESPACE","\n    ",282],["T_PROTECTED","protected",283],["T_WHITESPACE"," ",283],["T_FUNCTION","function",283],["T_WHITESPACE"," ",283],["T_STRING","_processChildren",283],"(",["T_VARIABLE","$productId",283],",",["T_WHITESPACE"," ",283],["T_VARIABLE","$productType",283],",",["T_WHITESPACE"," ",283],["T_VARIABLE","$qty",283],["T_WHITESPACE"," ",283],"=",["T_WHITESPACE"," ",283],["T_LNUMBER","0",283],",",["T_WHITESPACE"," ",283],["T_VARIABLE","$status",283],["T_WHITESPACE"," ",283],"=",["T_WHITESPACE"," ",283],["T_STRING","self",283],["T_DOUBLE_COLON","::",283],["T_STRING","STATUS_IN_STOCK",283],",",["T_WHITESPACE","\n        ",283],["T_VARIABLE","$stockId",284],["T_WHITESPACE"," ",284],"=",["T_WHITESPACE"," ",284],["T_LNUMBER","1",284],",",["T_WHITESPACE"," ",284],["T_VARIABLE","$websiteId",284],["T_WHITESPACE"," ",284],"=",["T_WHITESPACE"," ",284],["T_STRING","null",284],["T_WHITESPACE","\n    ",284],")",["T_WHITESPACE"," ",285],"{",["T_WHITESPACE","\n        ",285],["T_IF","if",286],["T_WHITESPACE"," ",286],"(",["T_VARIABLE","$status",286],["T_WHITESPACE"," ",286],["T_IS_EQUAL","==",286],["T_WHITESPACE"," ",286],["T_STRING","self",286],["T_DOUBLE_COLON","::",286],["T_STRING","STATUS_OUT_OF_STOCK",286],")",["T_WHITESPACE"," ",286],"{",["T_WHITESPACE","\n            ",286],["T_VARIABLE","$this",287],["T_OBJECT_OPERATOR","->",287],["T_STRING","saveProductStatus",287],"(",["T_VARIABLE","$productId",287],",",["T_WHITESPACE"," ",287],["T_VARIABLE","$status",287],",",["T_WHITESPACE"," ",287],["T_VARIABLE","$qty",287],",",["T_WHITESPACE"," ",287],["T_VARIABLE","$stockId",287],",",["T_WHITESPACE"," ",287],["T_VARIABLE","$websiteId",287],")",";",["T_WHITESPACE","\n            ",287],["T_RETURN","return",288],["T_WHITESPACE"," ",288],["T_VARIABLE","$this",288],";",["T_WHITESPACE","\n        ",288],"}",["T_WHITESPACE","\n\n        ",289],["T_VARIABLE","$statuses",291],["T_WHITESPACE","   ",291],"=",["T_WHITESPACE"," ",291],["T_ARRAY","array",291],"(",")",";",["T_WHITESPACE","\n        ",291],["T_VARIABLE","$websites",292],["T_WHITESPACE","   ",292],"=",["T_WHITESPACE"," ",292],["T_VARIABLE","$this",292],["T_OBJECT_OPERATOR","->",292],["T_STRING","getWebsites",292],"(",["T_VARIABLE","$websiteId",292],")",";",["T_WHITESPACE","\n\n        ",292],["T_FOREACH","foreach",294],["T_WHITESPACE"," ",294],"(",["T_STRING","array_keys",294],"(",["T_VARIABLE","$websites",294],")",["T_WHITESPACE"," ",294],["T_AS","as",294],["T_WHITESPACE"," ",294],["T_VARIABLE","$websiteId",294],")",["T_WHITESPACE"," ",294],"{",["T_WHITESPACE","\n            ",294],["T_COMMENT","\/* @var $website Mage_Core_Model_Website *\/",295],["T_WHITESPACE","\n            ",295],["T_VARIABLE","$statuses",296],"[",["T_VARIABLE","$websiteId",296],"]",["T_WHITESPACE"," ",296],"=",["T_WHITESPACE"," ",296],["T_VARIABLE","$status",296],";",["T_WHITESPACE","\n        ",296],"}",["T_WHITESPACE","\n\n        ",297],["T_IF","if",299],["T_WHITESPACE"," ",299],"(","!",["T_VARIABLE","$typeInstance",299],["T_WHITESPACE"," ",299],"=",["T_WHITESPACE"," ",299],["T_VARIABLE","$this",299],["T_OBJECT_OPERATOR","->",299],["T_STRING","getProductTypeInstance",299],"(",["T_VARIABLE","$productType",299],")",")",["T_WHITESPACE"," ",299],"{",["T_WHITESPACE","\n            ",299],["T_RETURN","return",300],["T_WHITESPACE"," ",300],["T_VARIABLE","$this",300],";",["T_WHITESPACE","\n        ",300],"}",["T_WHITESPACE","\n\n        ",301],["T_VARIABLE","$requiredChildrenIds",303],["T_WHITESPACE"," ",303],"=",["T_WHITESPACE"," ",303],["T_VARIABLE","$typeInstance",303],["T_OBJECT_OPERATOR","->",303],["T_STRING","getChildrenIds",303],"(",["T_VARIABLE","$productId",303],",",["T_WHITESPACE"," ",303],["T_STRING","true",303],")",";",["T_WHITESPACE","\n        ",303],["T_IF","if",304],["T_WHITESPACE"," ",304],"(",["T_VARIABLE","$requiredChildrenIds",304],")",["T_WHITESPACE"," ",304],"{",["T_WHITESPACE","\n            ",304],["T_VARIABLE","$childrenIds",305],["T_WHITESPACE"," ",305],"=",["T_WHITESPACE"," ",305],["T_ARRAY","array",305],"(",")",";",["T_WHITESPACE","\n            ",305],["T_FOREACH","foreach",306],["T_WHITESPACE"," ",306],"(",["T_VARIABLE","$requiredChildrenIds",306],["T_WHITESPACE"," ",306],["T_AS","as",306],["T_WHITESPACE"," ",306],["T_VARIABLE","$groupedChildrenIds",306],")",["T_WHITESPACE"," ",306],"{",["T_WHITESPACE","\n                ",306],["T_VARIABLE","$childrenIds",307],["T_WHITESPACE"," ",307],"=",["T_WHITESPACE"," ",307],["T_STRING","array_merge",307],"(",["T_VARIABLE","$childrenIds",307],",",["T_WHITESPACE"," ",307],["T_VARIABLE","$groupedChildrenIds",307],")",";",["T_WHITESPACE","\n            ",307],"}",["T_WHITESPACE","\n            ",308],["T_VARIABLE","$childrenWebsites",309],["T_WHITESPACE"," ",309],"=",["T_WHITESPACE"," ",309],["T_STRING","Mage",309],["T_DOUBLE_COLON","::",309],["T_STRING","getSingleton",309],"(",["T_CONSTANT_ENCAPSED_STRING","'catalog\/product_website'",309],")",["T_WHITESPACE","\n                ",309],["T_OBJECT_OPERATOR","->",310],["T_STRING","getWebsites",310],"(",["T_VARIABLE","$childrenIds",310],")",";",["T_WHITESPACE","\n            ",310],["T_FOREACH","foreach",311],["T_WHITESPACE"," ",311],"(",["T_VARIABLE","$websites",311],["T_WHITESPACE"," ",311],["T_AS","as",311],["T_WHITESPACE"," ",311],["T_VARIABLE","$websiteId",311],["T_WHITESPACE"," ",311],["T_DOUBLE_ARROW","=>",311],["T_WHITESPACE"," ",311],["T_VARIABLE","$storeId",311],")",["T_WHITESPACE"," ",311],"{",["T_WHITESPACE","\n                ",311],["T_VARIABLE","$childrenStatus",312],["T_WHITESPACE"," ",312],"=",["T_WHITESPACE"," ",312],["T_VARIABLE","$this",312],["T_OBJECT_OPERATOR","->",312],["T_STRING","getProductStatusModel",312],"(",")",["T_WHITESPACE","\n                    ",312],["T_OBJECT_OPERATOR","->",313],["T_STRING","getProductStatus",313],"(",["T_VARIABLE","$childrenIds",313],",",["T_WHITESPACE"," ",313],["T_VARIABLE","$storeId",313],")",";",["T_WHITESPACE","\n                ",313],["T_VARIABLE","$childrenStock",314],["T_WHITESPACE","  ",314],"=",["T_WHITESPACE"," ",314],["T_VARIABLE","$this",314],["T_OBJECT_OPERATOR","->",314],["T_STRING","getProductStatus",314],"(",["T_VARIABLE","$childrenIds",314],",",["T_WHITESPACE"," ",314],["T_VARIABLE","$websiteId",314],",",["T_WHITESPACE"," ",314],["T_VARIABLE","$stockId",314],")",";",["T_WHITESPACE","\n\n                ",314],["T_VARIABLE","$websiteStatus",316],["T_WHITESPACE"," ",316],"=",["T_WHITESPACE"," ",316],["T_VARIABLE","$statuses",316],"[",["T_VARIABLE","$websiteId",316],"]",";",["T_WHITESPACE","\n                ",316],["T_FOREACH","foreach",317],["T_WHITESPACE"," ",317],"(",["T_VARIABLE","$requiredChildrenIds",317],["T_WHITESPACE"," ",317],["T_AS","as",317],["T_WHITESPACE"," ",317],["T_VARIABLE","$groupedChildrenIds",317],")",["T_WHITESPACE"," ",317],"{",["T_WHITESPACE","\n                    ",317],["T_VARIABLE","$optionStatus",318],["T_WHITESPACE"," ",318],"=",["T_WHITESPACE"," ",318],["T_STRING","false",318],";",["T_WHITESPACE","\n                    ",318],["T_FOREACH","foreach",319],["T_WHITESPACE"," ",319],"(",["T_VARIABLE","$groupedChildrenIds",319],["T_WHITESPACE"," ",319],["T_AS","as",319],["T_WHITESPACE"," ",319],["T_VARIABLE","$childId",319],")",["T_WHITESPACE"," ",319],"{",["T_WHITESPACE","\n                        ",319],["T_IF","if",320],["T_WHITESPACE"," ",320],"(",["T_ISSET","isset",320],"(",["T_VARIABLE","$childrenStatus",320],"[",["T_VARIABLE","$childId",320],"]",")",["T_WHITESPACE","\n                            ",320],["T_LOGICAL_AND","and",321],["T_WHITESPACE"," ",321],["T_ISSET","isset",321],"(",["T_VARIABLE","$childrenWebsites",321],"[",["T_VARIABLE","$childId",321],"]",")",["T_WHITESPACE","\n                            ",321],["T_LOGICAL_AND","and",322],["T_WHITESPACE"," ",322],["T_STRING","in_array",322],"(",["T_VARIABLE","$websiteId",322],",",["T_WHITESPACE"," ",322],["T_VARIABLE","$childrenWebsites",322],"[",["T_VARIABLE","$childId",322],"]",")",["T_WHITESPACE","\n                            ",322],["T_LOGICAL_AND","and",323],["T_WHITESPACE"," ",323],["T_VARIABLE","$childrenStatus",323],"[",["T_VARIABLE","$childId",323],"]",["T_WHITESPACE"," ",323],["T_IS_EQUAL","==",323],["T_WHITESPACE"," ",323],["T_VARIABLE","$this",323],["T_OBJECT_OPERATOR","->",323],["T_STRING","getProductStatusEnabled",323],"(",")",["T_WHITESPACE","\n                            ",323],["T_LOGICAL_AND","and",324],["T_WHITESPACE"," ",324],["T_ISSET","isset",324],"(",["T_VARIABLE","$childrenStock",324],"[",["T_VARIABLE","$childId",324],"]",")",["T_WHITESPACE","\n                            ",324],["T_LOGICAL_AND","and",325],["T_WHITESPACE"," ",325],["T_VARIABLE","$childrenStock",325],"[",["T_VARIABLE","$childId",325],"]",["T_WHITESPACE"," ",325],["T_IS_EQUAL","==",325],["T_WHITESPACE"," ",325],["T_STRING","self",325],["T_DOUBLE_COLON","::",325],["T_STRING","STATUS_IN_STOCK",325],["T_WHITESPACE","\n                        ",325],")",["T_WHITESPACE"," ",326],"{",["T_WHITESPACE","\n                            ",326],["T_VARIABLE","$optionStatus",327],["T_WHITESPACE"," ",327],"=",["T_WHITESPACE"," ",327],["T_STRING","true",327],";",["T_WHITESPACE","\n                        ",327],"}",["T_WHITESPACE","\n                    ",328],"}",["T_WHITESPACE","\n                    ",329],["T_VARIABLE","$websiteStatus",330],["T_WHITESPACE"," ",330],"=",["T_WHITESPACE"," ",330],["T_VARIABLE","$websiteStatus",330],["T_WHITESPACE"," ",330],["T_BOOLEAN_AND","&&",330],["T_WHITESPACE"," ",330],["T_VARIABLE","$optionStatus",330],";",["T_WHITESPACE","\n                ",330],"}",["T_WHITESPACE","\n                ",331],["T_VARIABLE","$statuses",332],"[",["T_VARIABLE","$websiteId",332],"]",["T_WHITESPACE"," ",332],"=",["T_WHITESPACE"," ",332],["T_INT_CAST","(int)",332],["T_VARIABLE","$websiteStatus",332],";",["T_WHITESPACE","\n            ",332],"}",["T_WHITESPACE","\n        ",333],"}",["T_WHITESPACE","\n\n        ",334],["T_FOREACH","foreach",336],["T_WHITESPACE"," ",336],"(",["T_VARIABLE","$statuses",336],["T_WHITESPACE"," ",336],["T_AS","as",336],["T_WHITESPACE"," ",336],["T_VARIABLE","$websiteId",336],["T_WHITESPACE"," ",336],["T_DOUBLE_ARROW","=>",336],["T_WHITESPACE"," ",336],["T_VARIABLE","$websiteStatus",336],")",["T_WHITESPACE"," ",336],"{",["T_WHITESPACE","\n            ",336],["T_VARIABLE","$this",337],["T_OBJECT_OPERATOR","->",337],["T_STRING","saveProductStatus",337],"(",["T_VARIABLE","$productId",337],",",["T_WHITESPACE"," ",337],["T_VARIABLE","$websiteStatus",337],",",["T_WHITESPACE"," ",337],["T_VARIABLE","$qty",337],",",["T_WHITESPACE"," ",337],["T_VARIABLE","$stockId",337],",",["T_WHITESPACE"," ",337],["T_VARIABLE","$websiteId",337],")",";",["T_WHITESPACE","\n        ",337],"}",["T_WHITESPACE","\n\n        ",338],["T_RETURN","return",340],["T_WHITESPACE"," ",340],["T_VARIABLE","$this",340],";",["T_WHITESPACE","\n    ",340],"}",["T_WHITESPACE","\n\n    ",341],["T_DOC_COMMENT","\/**\n     * Process Parents by child\n     *\n     * @param int $productId\n     * @param int $stockId\n     * @param int $websiteId\n     * @return Mage_CatalogInventory_Model_Stock_Status\n     *\/",343],["T_WHITESPACE","\n    ",350],["T_PROTECTED","protected",351],["T_WHITESPACE"," ",351],["T_FUNCTION","function",351],["T_WHITESPACE"," ",351],["T_STRING","_processParents",351],"(",["T_VARIABLE","$productId",351],",",["T_WHITESPACE"," ",351],["T_VARIABLE","$stockId",351],["T_WHITESPACE"," ",351],"=",["T_WHITESPACE"," ",351],["T_LNUMBER","1",351],",",["T_WHITESPACE"," ",351],["T_VARIABLE","$websiteId",351],["T_WHITESPACE"," ",351],"=",["T_WHITESPACE"," ",351],["T_STRING","null",351],")",["T_WHITESPACE","\n    ",351],"{",["T_WHITESPACE","\n        ",352],["T_VARIABLE","$parentIds",353],["T_WHITESPACE"," ",353],"=",["T_WHITESPACE"," ",353],["T_ARRAY","array",353],"(",")",";",["T_WHITESPACE","\n        ",353],["T_FOREACH","foreach",354],["T_WHITESPACE"," ",354],"(",["T_VARIABLE","$this",354],["T_OBJECT_OPERATOR","->",354],["T_STRING","getProductTypeInstances",354],"(",")",["T_WHITESPACE"," ",354],["T_AS","as",354],["T_WHITESPACE"," ",354],["T_VARIABLE","$typeInstance",354],")",["T_WHITESPACE"," ",354],"{",["T_WHITESPACE","\n            ",354],["T_COMMENT","\/* @var $typeInstance Mage_Catalog_Model_Product_Type_Abstract *\/",355],["T_WHITESPACE","\n            ",355],["T_VARIABLE","$parentIds",356],["T_WHITESPACE"," ",356],"=",["T_WHITESPACE"," ",356],["T_STRING","array_merge",356],"(",["T_VARIABLE","$parentIds",356],",",["T_WHITESPACE"," ",356],["T_VARIABLE","$typeInstance",356],["T_OBJECT_OPERATOR","->",356],["T_STRING","getParentIdsByChild",356],"(",["T_VARIABLE","$productId",356],")",")",";",["T_WHITESPACE","\n        ",356],"}",["T_WHITESPACE","\n\n        ",357],["T_IF","if",359],["T_WHITESPACE"," ",359],"(","!",["T_VARIABLE","$parentIds",359],")",["T_WHITESPACE"," ",359],"{",["T_WHITESPACE","\n            ",359],["T_RETURN","return",360],["T_WHITESPACE"," ",360],["T_VARIABLE","$this",360],";",["T_WHITESPACE","\n        ",360],"}",["T_WHITESPACE","\n\n        ",361],["T_VARIABLE","$productTypes",363],["T_WHITESPACE"," ",363],"=",["T_WHITESPACE"," ",363],["T_VARIABLE","$this",363],["T_OBJECT_OPERATOR","->",363],["T_STRING","getProductsType",363],"(",["T_VARIABLE","$parentIds",363],")",";",["T_WHITESPACE","\n        ",363],["T_VARIABLE","$item",364],["T_WHITESPACE","         ",364],"=",["T_WHITESPACE"," ",364],["T_VARIABLE","$this",364],["T_OBJECT_OPERATOR","->",364],["T_STRING","getStockItemModel",364],"(",")",";",["T_WHITESPACE","\n\n        ",364],["T_FOREACH","foreach",366],["T_WHITESPACE"," ",366],"(",["T_VARIABLE","$parentIds",366],["T_WHITESPACE"," ",366],["T_AS","as",366],["T_WHITESPACE"," ",366],["T_VARIABLE","$parentId",366],")",["T_WHITESPACE"," ",366],"{",["T_WHITESPACE","\n            ",366],["T_VARIABLE","$parentType",367],["T_WHITESPACE"," ",367],"=",["T_WHITESPACE"," ",367],["T_ISSET","isset",367],"(",["T_VARIABLE","$productTypes",367],"[",["T_VARIABLE","$parentId",367],"]",")",["T_WHITESPACE"," ",367],"?",["T_WHITESPACE"," ",367],["T_VARIABLE","$productTypes",367],"[",["T_VARIABLE","$parentId",367],"]",["T_WHITESPACE"," ",367],":",["T_WHITESPACE"," ",367],["T_STRING","null",367],";",["T_WHITESPACE","\n            ",367],["T_VARIABLE","$item",368],["T_OBJECT_OPERATOR","->",368],["T_STRING","setData",368],"(",["T_ARRAY","array",368],"(",["T_CONSTANT_ENCAPSED_STRING","'stock_id'",368],["T_WHITESPACE"," ",368],["T_DOUBLE_ARROW","=>",368],["T_WHITESPACE"," ",368],["T_VARIABLE","$stockId",368],")",")",["T_WHITESPACE","\n                ",368],["T_OBJECT_OPERATOR","->",369],["T_STRING","setOrigData",369],"(",")",["T_WHITESPACE","\n                ",369],["T_OBJECT_OPERATOR","->",370],["T_STRING","loadByProduct",370],"(",["T_VARIABLE","$parentId",370],")",";",["T_WHITESPACE","\n            ",370],["T_VARIABLE","$status",371],["T_WHITESPACE","  ",371],"=",["T_WHITESPACE"," ",371],["T_STRING","self",371],["T_DOUBLE_COLON","::",371],["T_STRING","STATUS_IN_STOCK",371],";",["T_WHITESPACE","\n            ",371],["T_VARIABLE","$qty",372],["T_WHITESPACE","     ",372],"=",["T_WHITESPACE"," ",372],["T_LNUMBER","0",372],";",["T_WHITESPACE","\n            ",372],["T_IF","if",373],["T_WHITESPACE"," ",373],"(",["T_VARIABLE","$item",373],["T_OBJECT_OPERATOR","->",373],["T_STRING","getId",373],"(",")",")",["T_WHITESPACE"," ",373],"{",["T_WHITESPACE","\n                ",373],["T_VARIABLE","$status",374],["T_WHITESPACE"," ",374],"=",["T_WHITESPACE"," ",374],["T_VARIABLE","$item",374],["T_OBJECT_OPERATOR","->",374],["T_STRING","getIsInStock",374],"(",")",";",["T_WHITESPACE","\n                ",374],["T_VARIABLE","$qty",375],["T_WHITESPACE","    ",375],"=",["T_WHITESPACE"," ",375],["T_VARIABLE","$item",375],["T_OBJECT_OPERATOR","->",375],["T_STRING","getQty",375],"(",")",";",["T_WHITESPACE","\n            ",375],"}",["T_WHITESPACE","\n\n            ",376],["T_VARIABLE","$this",378],["T_OBJECT_OPERATOR","->",378],["T_STRING","_processChildren",378],"(",["T_VARIABLE","$parentId",378],",",["T_WHITESPACE"," ",378],["T_VARIABLE","$parentType",378],",",["T_WHITESPACE"," ",378],["T_VARIABLE","$qty",378],",",["T_WHITESPACE"," ",378],["T_VARIABLE","$status",378],",",["T_WHITESPACE"," ",378],["T_VARIABLE","$item",378],["T_OBJECT_OPERATOR","->",378],["T_STRING","getStockId",378],"(",")",",",["T_WHITESPACE"," ",378],["T_VARIABLE","$websiteId",378],")",";",["T_WHITESPACE","\n        ",378],"}",["T_WHITESPACE","\n\n        ",379],["T_RETURN","return",381],["T_WHITESPACE"," ",381],["T_VARIABLE","$this",381],";",["T_WHITESPACE","\n    ",381],"}",["T_WHITESPACE","\n\n    ",382],["T_DOC_COMMENT","\/**\n     * Save product status per website\n     * if website is null, saved for all websites\n     *\n     * @param int $productId\n     * @param int $status\n     * @param float $qty\n     * @param int $stockId\n     * @param int|null $websiteId\n     * @return Mage_CatalogInventory_Model_Stock_Status\n     *\/",384],["T_WHITESPACE","\n    ",394],["T_PUBLIC","public",395],["T_WHITESPACE"," ",395],["T_FUNCTION","function",395],["T_WHITESPACE"," ",395],["T_STRING","saveProductStatus",395],"(",["T_VARIABLE","$productId",395],",",["T_WHITESPACE"," ",395],["T_VARIABLE","$status",395],",",["T_WHITESPACE"," ",395],["T_VARIABLE","$qty",395],["T_WHITESPACE"," ",395],"=",["T_WHITESPACE"," ",395],["T_LNUMBER","0",395],",",["T_WHITESPACE"," ",395],["T_VARIABLE","$stockId",395],["T_WHITESPACE"," ",395],"=",["T_WHITESPACE"," ",395],["T_LNUMBER","1",395],",",["T_WHITESPACE"," ",395],["T_VARIABLE","$websiteId",395],["T_WHITESPACE"," ",395],"=",["T_WHITESPACE"," ",395],["T_STRING","null",395],")",["T_WHITESPACE","\n    ",395],"{",["T_WHITESPACE","\n        ",396],["T_VARIABLE","$this",397],["T_OBJECT_OPERATOR","->",397],["T_STRING","getResource",397],"(",")",["T_OBJECT_OPERATOR","->",397],["T_STRING","saveProductStatus",397],"(",["T_VARIABLE","$this",397],",",["T_WHITESPACE"," ",397],["T_VARIABLE","$productId",397],",",["T_WHITESPACE"," ",397],["T_VARIABLE","$status",397],",",["T_WHITESPACE"," ",397],["T_VARIABLE","$qty",397],",",["T_WHITESPACE"," ",397],["T_VARIABLE","$stockId",397],",",["T_WHITESPACE"," ",397],["T_VARIABLE","$websiteId",397],")",";",["T_WHITESPACE","\n        ",397],["T_RETURN","return",398],["T_WHITESPACE"," ",398],["T_VARIABLE","$this",398],";",["T_WHITESPACE","\n    ",398],"}",["T_WHITESPACE","\n\n    ",399],["T_DOC_COMMENT","\/**\n     * Retrieve Product(s) status\n     *\n     * @param int|array $productIds\n     * @param int $websiteId\n     * @param int $stockId\n     * @return array\n     *\/",401],["T_WHITESPACE","\n    ",408],["T_PUBLIC","public",409],["T_WHITESPACE"," ",409],["T_FUNCTION","function",409],["T_WHITESPACE"," ",409],["T_STRING","getProductStatus",409],"(",["T_VARIABLE","$productIds",409],",",["T_WHITESPACE"," ",409],["T_VARIABLE","$websiteId",409],",",["T_WHITESPACE"," ",409],["T_VARIABLE","$stockId",409],["T_WHITESPACE"," ",409],"=",["T_WHITESPACE"," ",409],["T_LNUMBER","1",409],")",["T_WHITESPACE","\n    ",409],"{",["T_WHITESPACE","\n        ",410],["T_RETURN","return",411],["T_WHITESPACE"," ",411],["T_VARIABLE","$this",411],["T_OBJECT_OPERATOR","->",411],["T_STRING","getResource",411],"(",")",["T_OBJECT_OPERATOR","->",411],["T_STRING","getProductStatus",411],"(",["T_VARIABLE","$productIds",411],",",["T_WHITESPACE"," ",411],["T_VARIABLE","$websiteId",411],",",["T_WHITESPACE"," ",411],["T_VARIABLE","$stockId",411],")",";",["T_WHITESPACE","\n    ",411],"}",["T_WHITESPACE","\n\n    ",412],["T_DOC_COMMENT","\/**\n     * Retrieve Product(s) Data array\n     *\n     * @param int|array $productIds\n     * @param int $websiteId\n     * @param int $stockId\n     * @return array\n     *\/",414],["T_WHITESPACE","\n    ",421],["T_PUBLIC","public",422],["T_WHITESPACE"," ",422],["T_FUNCTION","function",422],["T_WHITESPACE"," ",422],["T_STRING","getProductData",422],"(",["T_VARIABLE","$productIds",422],",",["T_WHITESPACE"," ",422],["T_VARIABLE","$websiteId",422],",",["T_WHITESPACE"," ",422],["T_VARIABLE","$stockId",422],["T_WHITESPACE"," ",422],"=",["T_WHITESPACE"," ",422],["T_LNUMBER","1",422],")",["T_WHITESPACE","\n    ",422],"{",["T_WHITESPACE","\n        ",423],["T_RETURN","return",424],["T_WHITESPACE"," ",424],["T_VARIABLE","$this",424],["T_OBJECT_OPERATOR","->",424],["T_STRING","getResource",424],"(",")",["T_OBJECT_OPERATOR","->",424],["T_STRING","getProductData",424],"(",["T_VARIABLE","$productIds",424],",",["T_WHITESPACE"," ",424],["T_VARIABLE","$websiteId",424],",",["T_WHITESPACE"," ",424],["T_VARIABLE","$stockId",424],")",";",["T_WHITESPACE","\n    ",424],"}",["T_WHITESPACE","\n\n    ",425],["T_DOC_COMMENT","\/**\n     * Retrieve Product Type\n     *\n     * @param int $productId\n     * @return string|false\n     *\/",427],["T_WHITESPACE","\n    ",432],["T_PUBLIC","public",433],["T_WHITESPACE"," ",433],["T_FUNCTION","function",433],["T_WHITESPACE"," ",433],["T_STRING","getProductType",433],"(",["T_VARIABLE","$productId",433],")",["T_WHITESPACE","\n    ",433],"{",["T_WHITESPACE","\n        ",434],["T_VARIABLE","$types",435],["T_WHITESPACE"," ",435],"=",["T_WHITESPACE"," ",435],["T_VARIABLE","$this",435],["T_OBJECT_OPERATOR","->",435],["T_STRING","getResource",435],"(",")",["T_OBJECT_OPERATOR","->",435],["T_STRING","getProductsType",435],"(",["T_VARIABLE","$productId",435],")",";",["T_WHITESPACE","\n        ",435],["T_IF","if",436],["T_WHITESPACE"," ",436],"(",["T_ISSET","isset",436],"(",["T_VARIABLE","$types",436],"[",["T_VARIABLE","$productId",436],"]",")",")",["T_WHITESPACE"," ",436],"{",["T_WHITESPACE","\n            ",436],["T_RETURN","return",437],["T_WHITESPACE"," ",437],["T_VARIABLE","$types",437],"[",["T_VARIABLE","$productId",437],"]",";",["T_WHITESPACE","\n        ",437],"}",["T_WHITESPACE","\n        ",438],["T_RETURN","return",439],["T_WHITESPACE"," ",439],["T_STRING","false",439],";",["T_WHITESPACE","\n    ",439],"}",["T_WHITESPACE","\n\n    ",440],["T_DOC_COMMENT","\/**\n     * Retrieve Products Type as array\n     * Return array as key product_id, value type\n     *\n     * @param array|int $productIds\n     * @return array\n     *\/",442],["T_WHITESPACE","\n    ",448],["T_PUBLIC","public",449],["T_WHITESPACE"," ",449],["T_FUNCTION","function",449],["T_WHITESPACE"," ",449],["T_STRING","getProductsType",449],"(",["T_VARIABLE","$productIds",449],")",["T_WHITESPACE","\n    ",449],"{",["T_WHITESPACE","\n        ",450],["T_RETURN","return",451],["T_WHITESPACE"," ",451],["T_VARIABLE","$this",451],["T_OBJECT_OPERATOR","->",451],["T_STRING","getResource",451],"(",")",["T_OBJECT_OPERATOR","->",451],["T_STRING","getProductsType",451],"(",["T_VARIABLE","$productIds",451],")",";",["T_WHITESPACE","\n    ",451],"}",["T_WHITESPACE","\n\n    ",452],["T_DOC_COMMENT","\/**\n     * Add information about stock status to product collection\n     *\n     * @param   Mage_Catalog_Model_Resource_Eav_Mysql4_Product_Collection $productCollection\n     * @param   int|null $websiteId\n     * @param   int|null $stockId\n     * @return  Mage_CatalogInventory_Model_Stock_Status\n     *\/",454],["T_WHITESPACE","\n    ",461],["T_PUBLIC","public",462],["T_WHITESPACE"," ",462],["T_FUNCTION","function",462],["T_WHITESPACE"," ",462],["T_STRING","addStockStatusToProducts",462],"(",["T_VARIABLE","$productCollection",462],",",["T_WHITESPACE"," ",462],["T_VARIABLE","$websiteId",462],["T_WHITESPACE"," ",462],"=",["T_WHITESPACE"," ",462],["T_STRING","null",462],",",["T_WHITESPACE"," ",462],["T_VARIABLE","$stockId",462],["T_WHITESPACE"," ",462],"=",["T_WHITESPACE"," ",462],["T_STRING","null",462],")",["T_WHITESPACE","\n    ",462],"{",["T_WHITESPACE","\n        ",463],["T_IF","if",464],["T_WHITESPACE"," ",464],"(",["T_VARIABLE","$stockId",464],["T_WHITESPACE"," ",464],["T_IS_IDENTICAL","===",464],["T_WHITESPACE"," ",464],["T_STRING","null",464],")",["T_WHITESPACE"," ",464],"{",["T_WHITESPACE","\n            ",464],["T_VARIABLE","$stockId",465],["T_WHITESPACE"," ",465],"=",["T_WHITESPACE"," ",465],["T_STRING","Mage_CatalogInventory_Model_Stock",465],["T_DOUBLE_COLON","::",465],["T_STRING","DEFAULT_STOCK_ID",465],";",["T_WHITESPACE","\n        ",465],"}",["T_WHITESPACE","\n        ",466],["T_IF","if",467],["T_WHITESPACE"," ",467],"(",["T_VARIABLE","$websiteId",467],["T_WHITESPACE"," ",467],["T_IS_IDENTICAL","===",467],["T_WHITESPACE"," ",467],["T_STRING","null",467],")",["T_WHITESPACE"," ",467],"{",["T_WHITESPACE","\n            ",467],["T_VARIABLE","$websiteId",468],["T_WHITESPACE"," ",468],"=",["T_WHITESPACE"," ",468],["T_STRING","Mage",468],["T_DOUBLE_COLON","::",468],["T_STRING","app",468],"(",")",["T_OBJECT_OPERATOR","->",468],["T_STRING","getStore",468],"(",")",["T_OBJECT_OPERATOR","->",468],["T_STRING","getWebsiteId",468],"(",")",";",["T_WHITESPACE","\n            ",468],["T_IF","if",469],["T_WHITESPACE"," ",469],"(",["T_INT_CAST","(int)",469],["T_VARIABLE","$websiteId",469],["T_WHITESPACE"," ",469],["T_IS_EQUAL","==",469],["T_WHITESPACE"," ",469],["T_LNUMBER","0",469],["T_WHITESPACE"," ",469],["T_BOOLEAN_AND","&&",469],["T_WHITESPACE"," ",469],["T_VARIABLE","$productCollection",469],["T_OBJECT_OPERATOR","->",469],["T_STRING","getStoreId",469],"(",")",")",["T_WHITESPACE"," ",469],"{",["T_WHITESPACE","\n                ",469],["T_VARIABLE","$websiteId",470],["T_WHITESPACE"," ",470],"=",["T_WHITESPACE"," ",470],["T_STRING","Mage",470],["T_DOUBLE_COLON","::",470],["T_STRING","app",470],"(",")",["T_OBJECT_OPERATOR","->",470],["T_STRING","getStore",470],"(",["T_VARIABLE","$productCollection",470],["T_OBJECT_OPERATOR","->",470],["T_STRING","getStoreId",470],"(",")",")",["T_OBJECT_OPERATOR","->",470],["T_STRING","getWebsiteId",470],"(",")",";",["T_WHITESPACE","\n            ",470],"}",["T_WHITESPACE","\n        ",471],"}",["T_WHITESPACE","\n        ",472],["T_VARIABLE","$productIds",473],["T_WHITESPACE"," ",473],"=",["T_WHITESPACE"," ",473],["T_ARRAY","array",473],"(",")",";",["T_WHITESPACE","\n        ",473],["T_FOREACH","foreach",474],["T_WHITESPACE"," ",474],"(",["T_VARIABLE","$productCollection",474],["T_WHITESPACE"," ",474],["T_AS","as",474],["T_WHITESPACE"," ",474],["T_VARIABLE","$product",474],")",["T_WHITESPACE"," ",474],"{",["T_WHITESPACE","\n            ",474],["T_VARIABLE","$productIds",475],"[","]",["T_WHITESPACE"," ",475],"=",["T_WHITESPACE"," ",475],["T_VARIABLE","$product",475],["T_OBJECT_OPERATOR","->",475],["T_STRING","getId",475],"(",")",";",["T_WHITESPACE","\n        ",475],"}",["T_WHITESPACE","\n\n        ",476],["T_IF","if",478],["T_WHITESPACE"," ",478],"(","!",["T_EMPTY","empty",478],"(",["T_VARIABLE","$productIds",478],")",")",["T_WHITESPACE"," ",478],"{",["T_WHITESPACE","\n            ",478],["T_VARIABLE","$stockStatuses",479],["T_WHITESPACE"," ",479],"=",["T_WHITESPACE"," ",479],["T_VARIABLE","$this",479],["T_OBJECT_OPERATOR","->",479],["T_STRING","_getResource",479],"(",")",["T_OBJECT_OPERATOR","->",479],["T_STRING","getProductStatus",479],"(",["T_VARIABLE","$productIds",479],",",["T_WHITESPACE"," ",479],["T_VARIABLE","$websiteId",479],",",["T_WHITESPACE"," ",479],["T_VARIABLE","$stockId",479],")",";",["T_WHITESPACE","\n            ",479],["T_FOREACH","foreach",480],["T_WHITESPACE"," ",480],"(",["T_VARIABLE","$stockStatuses",480],["T_WHITESPACE"," ",480],["T_AS","as",480],["T_WHITESPACE"," ",480],["T_VARIABLE","$productId",480],["T_WHITESPACE"," ",480],["T_DOUBLE_ARROW","=>",480],["T_WHITESPACE"," ",480],["T_VARIABLE","$status",480],")",["T_WHITESPACE"," ",480],"{",["T_WHITESPACE","\n                ",480],["T_IF","if",481],["T_WHITESPACE"," ",481],"(",["T_VARIABLE","$product",481],["T_WHITESPACE"," ",481],"=",["T_WHITESPACE"," ",481],["T_VARIABLE","$productCollection",481],["T_OBJECT_OPERATOR","->",481],["T_STRING","getItemById",481],"(",["T_VARIABLE","$productId",481],")",")",["T_WHITESPACE"," ",481],"{",["T_WHITESPACE","\n                    ",481],["T_VARIABLE","$product",482],["T_OBJECT_OPERATOR","->",482],["T_STRING","setIsSalable",482],"(",["T_VARIABLE","$status",482],")",";",["T_WHITESPACE","\n                ",482],"}",["T_WHITESPACE","\n            ",483],"}",["T_WHITESPACE","\n        ",484],"}",["T_WHITESPACE","\n\n        ",485],["T_COMMENT","\/* back compatible stock item *\/",487],["T_WHITESPACE","\n        ",487],["T_FOREACH","foreach",488],["T_WHITESPACE"," ",488],"(",["T_VARIABLE","$productCollection",488],["T_WHITESPACE"," ",488],["T_AS","as",488],["T_WHITESPACE"," ",488],["T_VARIABLE","$product",488],")",["T_WHITESPACE"," ",488],"{",["T_WHITESPACE","\n            ",488],["T_VARIABLE","$object",489],["T_WHITESPACE"," ",489],"=",["T_WHITESPACE"," ",489],["T_NEW","new",489],["T_WHITESPACE"," ",489],["T_STRING","Varien_Object",489],"(",["T_ARRAY","array",489],"(",["T_CONSTANT_ENCAPSED_STRING","'is_in_stock'",489],["T_WHITESPACE"," ",489],["T_DOUBLE_ARROW","=>",489],["T_WHITESPACE"," ",489],["T_VARIABLE","$product",489],["T_OBJECT_OPERATOR","->",489],["T_STRING","getData",489],"(",["T_CONSTANT_ENCAPSED_STRING","'is_salable'",489],")",")",")",";",["T_WHITESPACE","\n            ",489],["T_VARIABLE","$product",490],["T_OBJECT_OPERATOR","->",490],["T_STRING","setStockItem",490],"(",["T_VARIABLE","$object",490],")",";",["T_WHITESPACE","\n        ",490],"}",["T_WHITESPACE","\n\n        ",491],["T_RETURN","return",493],["T_WHITESPACE"," ",493],["T_VARIABLE","$this",493],";",["T_WHITESPACE","\n    ",493],"}",["T_WHITESPACE","\n\n    ",494],["T_DOC_COMMENT","\/**\n     * Add stock status to prepare index select\n     *\n     * @param Varien_Db_Select $select\n     * @param Mage_Core_Model_Website $website\n     * @return Mage_CatalogInventory_Model_Stock_Status\n     *\/",496],["T_WHITESPACE","\n    ",502],["T_PUBLIC","public",503],["T_WHITESPACE"," ",503],["T_FUNCTION","function",503],["T_WHITESPACE"," ",503],["T_STRING","addStockStatusToSelect",503],"(",["T_STRING","Varien_Db_Select",503],["T_WHITESPACE"," ",503],["T_VARIABLE","$select",503],",",["T_WHITESPACE"," ",503],["T_STRING","Mage_Core_Model_Website",503],["T_WHITESPACE"," ",503],["T_VARIABLE","$website",503],")",["T_WHITESPACE","\n    ",503],"{",["T_WHITESPACE","\n        ",504],["T_VARIABLE","$this",505],["T_OBJECT_OPERATOR","->",505],["T_STRING","_getResource",505],"(",")",["T_OBJECT_OPERATOR","->",505],["T_STRING","addStockStatusToSelect",505],"(",["T_VARIABLE","$select",505],",",["T_WHITESPACE"," ",505],["T_VARIABLE","$website",505],")",";",["T_WHITESPACE","\n        ",505],["T_RETURN","return",506],["T_WHITESPACE"," ",506],["T_VARIABLE","$this",506],";",["T_WHITESPACE","\n    ",506],"}",["T_WHITESPACE","\n\n    ",507],["T_DOC_COMMENT","\/**\n     * Add stock status limitation to catalog product price index select object\n     *\n     * @param Varien_Db_Select $select\n     * @param string|Zend_Db_Expr $entityField\n     * @param string|Zend_Db_Expr $websiteField\n     * @return Mage_CatalogInventory_Model_Stock_Status\n     *\/",509],["T_WHITESPACE","\n    ",516],["T_PUBLIC","public",517],["T_WHITESPACE"," ",517],["T_FUNCTION","function",517],["T_WHITESPACE"," ",517],["T_STRING","prepareCatalogProductIndexSelect",517],"(",["T_STRING","Varien_Db_Select",517],["T_WHITESPACE"," ",517],["T_VARIABLE","$select",517],",",["T_WHITESPACE"," ",517],["T_VARIABLE","$entityField",517],",",["T_WHITESPACE"," ",517],["T_VARIABLE","$websiteField",517],")",["T_WHITESPACE","\n    ",517],"{",["T_WHITESPACE","\n        ",518],["T_IF","if",519],["T_WHITESPACE"," ",519],"(",["T_STRING","Mage",519],["T_DOUBLE_COLON","::",519],["T_STRING","helper",519],"(",["T_CONSTANT_ENCAPSED_STRING","'cataloginventory'",519],")",["T_OBJECT_OPERATOR","->",519],["T_STRING","isShowOutOfStock",519],"(",")",")",["T_WHITESPACE"," ",519],"{",["T_WHITESPACE","\n            ",519],["T_RETURN","return",520],["T_WHITESPACE"," ",520],["T_VARIABLE","$this",520],";",["T_WHITESPACE","\n        ",520],"}",["T_WHITESPACE","\n\n        ",521],["T_VARIABLE","$this",523],["T_OBJECT_OPERATOR","->",523],["T_STRING","_getResource",523],"(",")",["T_OBJECT_OPERATOR","->",523],["T_STRING","prepareCatalogProductIndexSelect",523],"(",["T_VARIABLE","$select",523],",",["T_WHITESPACE"," ",523],["T_VARIABLE","$entityField",523],",",["T_WHITESPACE"," ",523],["T_VARIABLE","$websiteField",523],")",";",["T_WHITESPACE","\n\n        ",523],["T_RETURN","return",525],["T_WHITESPACE"," ",525],["T_VARIABLE","$this",525],";",["T_WHITESPACE","\n    ",525],"}",["T_WHITESPACE","\n\n    ",526],["T_DOC_COMMENT","\/**\n     * Add only is in stock products filter to product collection\n     *\n     * @param Mage_Catalog_Model_Resource_Eav_Mysql4_Product_Collection $collection\n     * @return Mage_CatalogInventory_Model_Stock_Status\n     *\/",528],["T_WHITESPACE","\n    ",533],["T_PUBLIC","public",534],["T_WHITESPACE"," ",534],["T_FUNCTION","function",534],["T_WHITESPACE"," ",534],["T_STRING","addIsInStockFilterToCollection",534],"(",["T_VARIABLE","$collection",534],")",["T_WHITESPACE","\n    ",534],"{",["T_WHITESPACE","\n        ",535],["T_VARIABLE","$this",536],["T_OBJECT_OPERATOR","->",536],["T_STRING","_getResource",536],"(",")",["T_OBJECT_OPERATOR","->",536],["T_STRING","addIsInStockFilterToCollection",536],"(",["T_VARIABLE","$collection",536],")",";",["T_WHITESPACE","\n        ",536],["T_RETURN","return",537],["T_WHITESPACE"," ",537],["T_VARIABLE","$this",537],";",["T_WHITESPACE","\n    ",537],"}",["T_WHITESPACE","\n",538],"}",["T_WHITESPACE","\n",539]]
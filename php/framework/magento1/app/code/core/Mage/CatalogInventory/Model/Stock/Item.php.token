[["T_OPEN_TAG","<?php\n",1],["T_DOC_COMMENT","\/**\n * Magento\n *\n * NOTICE OF LICENSE\n *\n * This source file is subject to the Open Software License (OSL 3.0)\n * that is bundled with this package in the file LICENSE.txt.\n * It is also available through the world-wide-web at this URL:\n * http:\/\/opensource.org\/licenses\/osl-3.0.php\n * If you did not receive a copy of the license and are unable to\n * obtain it through the world-wide-web, please send an email\n * to license@magento.com so we can send you a copy immediately.\n *\n * DISCLAIMER\n *\n * Do not edit or add to this file if you wish to upgrade Magento to newer\n * versions in the future. If you wish to customize Magento for your\n * needs please refer to http:\/\/www.magento.com for more information.\n *\n * @category    Mage\n * @package     Mage_CatalogInventory\n * @copyright  Copyright (c) 2006-2016 X.commerce, Inc. and affiliates (http:\/\/www.magento.com)\n * @license    http:\/\/opensource.org\/licenses\/osl-3.0.php  Open Software License (OSL 3.0)\n *\/",2],["T_WHITESPACE","\n\n\n",25],["T_DOC_COMMENT","\/**\n * Catalog Inventory Stock Model\n *\n * @method Mage_CatalogInventory_Model_Resource_Stock_Item _getResource()\n * @method Mage_CatalogInventory_Model_Resource_Stock_Item getResource()\n * @method Mage_CatalogInventory_Model_Stock_Item setProductId(int $value)\n * @method Mage_CatalogInventory_Model_Stock_Item setStockId(int $value)\n * @method float getQty()\n * @method Mage_CatalogInventory_Model_Stock_Item setQty(float $value)\n * @method Mage_CatalogInventory_Model_Stock_Item setMinQty(float $value)\n * @method int getUseConfigMinQty()\n * @method Mage_CatalogInventory_Model_Stock_Item setUseConfigMinQty(int $value)\n * @method int getIsQtyDecimal()\n * @method Mage_CatalogInventory_Model_Stock_Item setIsQtyDecimal(int $value)\n * @method Mage_CatalogInventory_Model_Stock_Item setBackorders(int $value)\n * @method int getUseConfigBackorders()\n * @method Mage_CatalogInventory_Model_Stock_Item setUseConfigBackorders(int $value)\n * @method Mage_CatalogInventory_Model_Stock_Item setMinSaleQty(float $value)\n * @method int getUseConfigMinSaleQty()\n * @method Mage_CatalogInventory_Model_Stock_Item setUseConfigMinSaleQty(int $value)\n * @method Mage_CatalogInventory_Model_Stock_Item setMaxSaleQty(float $value)\n * @method int getUseConfigMaxSaleQty()\n * @method Mage_CatalogInventory_Model_Stock_Item setUseConfigMaxSaleQty(int $value)\n * @method Mage_CatalogInventory_Model_Stock_Item setIsInStock(int $value)\n * @method string getLowStockDate()\n * @method Mage_CatalogInventory_Model_Stock_Item setLowStockDate(string $value)\n * @method Mage_CatalogInventory_Model_Stock_Item setNotifyStockQty(float $value)\n * @method int getUseConfigNotifyStockQty()\n * @method Mage_CatalogInventory_Model_Stock_Item setUseConfigNotifyStockQty(int $value)\n * @method Mage_CatalogInventory_Model_Stock_Item setManageStock(int $value)\n * @method int getUseConfigManageStock()\n * @method Mage_CatalogInventory_Model_Stock_Item setUseConfigManageStock(int $value)\n * @method int getStockStatusChangedAutomatically()\n * @method Mage_CatalogInventory_Model_Stock_Item setStockStatusChangedAutomatically(int $value)\n * @method int getUseConfigQtyIncrements()\n * @method Mage_CatalogInventory_Model_Stock_Item setUseConfigQtyIncrements(int $value)\n * @method Mage_CatalogInventory_Model_Stock_Item setQtyIncrements(float $value)\n * @method int getUseConfigEnableQtyIncrements()\n * @method Mage_CatalogInventory_Model_Stock_Item setUseConfigEnableQtyIncrements(int $value)\n * @method Mage_CatalogInventory_Model_Stock_Item setEnableQtyIncrements(int $value)\n *\n * @category    Mage\n * @package     Mage_CatalogInventory\n * @author      Magento Core Team <core@magentocommerce.com>\n *\/",28],["T_WHITESPACE","\n",72],["T_CLASS","class",73],["T_WHITESPACE"," ",73],["T_STRING","Mage_CatalogInventory_Model_Stock_Item",73],["T_WHITESPACE"," ",73],["T_EXTENDS","extends",73],["T_WHITESPACE"," ",73],["T_STRING","Mage_Core_Model_Abstract",73],["T_WHITESPACE","\n",73],"{",["T_WHITESPACE","\n    ",74],["T_CONST","const",75],["T_WHITESPACE"," ",75],["T_STRING","XML_PATH_GLOBAL",75],["T_WHITESPACE","                ",75],"=",["T_WHITESPACE"," ",75],["T_CONSTANT_ENCAPSED_STRING","'cataloginventory\/options\/'",75],";",["T_WHITESPACE","\n    ",75],["T_CONST","const",76],["T_WHITESPACE"," ",76],["T_STRING","XML_PATH_CAN_SUBTRACT",76],["T_WHITESPACE","          ",76],"=",["T_WHITESPACE"," ",76],["T_CONSTANT_ENCAPSED_STRING","'cataloginventory\/options\/can_subtract'",76],";",["T_WHITESPACE","\n    ",76],["T_CONST","const",77],["T_WHITESPACE"," ",77],["T_STRING","XML_PATH_CAN_BACK_IN_STOCK",77],["T_WHITESPACE","     ",77],"=",["T_WHITESPACE"," ",77],["T_CONSTANT_ENCAPSED_STRING","'cataloginventory\/options\/can_back_in_stock'",77],";",["T_WHITESPACE","\n\n    ",77],["T_CONST","const",79],["T_WHITESPACE"," ",79],["T_STRING","XML_PATH_ITEM",79],["T_WHITESPACE","                  ",79],"=",["T_WHITESPACE"," ",79],["T_CONSTANT_ENCAPSED_STRING","'cataloginventory\/item_options\/'",79],";",["T_WHITESPACE","\n    ",79],["T_CONST","const",80],["T_WHITESPACE"," ",80],["T_STRING","XML_PATH_MIN_QTY",80],["T_WHITESPACE","               ",80],"=",["T_WHITESPACE"," ",80],["T_CONSTANT_ENCAPSED_STRING","'cataloginventory\/item_options\/min_qty'",80],";",["T_WHITESPACE","\n    ",80],["T_CONST","const",81],["T_WHITESPACE"," ",81],["T_STRING","XML_PATH_MIN_SALE_QTY",81],["T_WHITESPACE","          ",81],"=",["T_WHITESPACE"," ",81],["T_CONSTANT_ENCAPSED_STRING","'cataloginventory\/item_options\/min_sale_qty'",81],";",["T_WHITESPACE","\n    ",81],["T_CONST","const",82],["T_WHITESPACE"," ",82],["T_STRING","XML_PATH_MAX_SALE_QTY",82],["T_WHITESPACE","          ",82],"=",["T_WHITESPACE"," ",82],["T_CONSTANT_ENCAPSED_STRING","'cataloginventory\/item_options\/max_sale_qty'",82],";",["T_WHITESPACE","\n    ",82],["T_CONST","const",83],["T_WHITESPACE"," ",83],["T_STRING","XML_PATH_BACKORDERS",83],["T_WHITESPACE","            ",83],"=",["T_WHITESPACE"," ",83],["T_CONSTANT_ENCAPSED_STRING","'cataloginventory\/item_options\/backorders'",83],";",["T_WHITESPACE","\n    ",83],["T_CONST","const",84],["T_WHITESPACE"," ",84],["T_STRING","XML_PATH_NOTIFY_STOCK_QTY",84],["T_WHITESPACE","      ",84],"=",["T_WHITESPACE"," ",84],["T_CONSTANT_ENCAPSED_STRING","'cataloginventory\/item_options\/notify_stock_qty'",84],";",["T_WHITESPACE","\n    ",84],["T_CONST","const",85],["T_WHITESPACE"," ",85],["T_STRING","XML_PATH_MANAGE_STOCK",85],["T_WHITESPACE","          ",85],"=",["T_WHITESPACE"," ",85],["T_CONSTANT_ENCAPSED_STRING","'cataloginventory\/item_options\/manage_stock'",85],";",["T_WHITESPACE","\n    ",85],["T_CONST","const",86],["T_WHITESPACE"," ",86],["T_STRING","XML_PATH_ENABLE_QTY_INCREMENTS",86],["T_WHITESPACE"," ",86],"=",["T_WHITESPACE"," ",86],["T_CONSTANT_ENCAPSED_STRING","'cataloginventory\/item_options\/enable_qty_increments'",86],";",["T_WHITESPACE","\n    ",86],["T_CONST","const",87],["T_WHITESPACE"," ",87],["T_STRING","XML_PATH_QTY_INCREMENTS",87],["T_WHITESPACE","        ",87],"=",["T_WHITESPACE"," ",87],["T_CONSTANT_ENCAPSED_STRING","'cataloginventory\/item_options\/qty_increments'",87],";",["T_WHITESPACE","\n\n    ",87],["T_CONST","const",89],["T_WHITESPACE"," ",89],["T_STRING","ENTITY",89],["T_WHITESPACE","                         ",89],"=",["T_WHITESPACE"," ",89],["T_CONSTANT_ENCAPSED_STRING","'cataloginventory_stock_item'",89],";",["T_WHITESPACE","\n\n    ",89],["T_DOC_COMMENT","\/**\n     * @var array\n     *\/",91],["T_WHITESPACE","\n    ",93],["T_PRIVATE","private",94],["T_WHITESPACE"," ",94],["T_VARIABLE","$_minSaleQtyCache",94],["T_WHITESPACE"," ",94],"=",["T_WHITESPACE"," ",94],["T_ARRAY","array",94],"(",")",";",["T_WHITESPACE","\n\n    ",94],["T_DOC_COMMENT","\/**\n     * @var float|false\n     *\/",96],["T_WHITESPACE","\n    ",98],["T_PROTECTED","protected",99],["T_WHITESPACE"," ",99],["T_VARIABLE","$_qtyIncrements",99],";",["T_WHITESPACE","\n\n    ",99],["T_DOC_COMMENT","\/**\n     * Prefix of model events names\n     *\n     * @var string\n     *\/",101],["T_WHITESPACE","\n    ",105],["T_PROTECTED","protected",106],["T_WHITESPACE"," ",106],["T_VARIABLE","$_eventPrefix",106],["T_WHITESPACE"," ",106],"=",["T_WHITESPACE"," ",106],["T_CONSTANT_ENCAPSED_STRING","'cataloginventory_stock_item'",106],";",["T_WHITESPACE","\n\n    ",106],["T_DOC_COMMENT","\/**\n     * Parameter name in event\n     *\n     * In observe method you can use $observer->getEvent()->getItem() in this case\n     *\n     * @var string\n     *\/",108],["T_WHITESPACE","\n    ",114],["T_PROTECTED","protected",115],["T_WHITESPACE"," ",115],["T_VARIABLE","$_eventObject",115],["T_WHITESPACE"," ",115],"=",["T_WHITESPACE"," ",115],["T_CONSTANT_ENCAPSED_STRING","'item'",115],";",["T_WHITESPACE","\n\n    ",115],["T_DOC_COMMENT","\/**\n     * Associated product instance\n     *\n     * @var Mage_Catalog_Model_Product\n     *\/",117],["T_WHITESPACE","\n    ",121],["T_PROTECTED","protected",122],["T_WHITESPACE"," ",122],["T_VARIABLE","$_productInstance",122],["T_WHITESPACE"," ",122],"=",["T_WHITESPACE"," ",122],["T_STRING","null",122],";",["T_WHITESPACE","\n\n    ",122],["T_DOC_COMMENT","\/**\n     * Customer group id\n     *\n     * @var int|null\n     *\/",124],["T_WHITESPACE","\n    ",128],["T_PROTECTED","protected",129],["T_WHITESPACE"," ",129],["T_VARIABLE","$_customerGroupId",129],";",["T_WHITESPACE","\n\n    ",129],["T_DOC_COMMENT","\/**\n     * Whether index events should be processed immediately\n     *\n     * @var bool\n     *\/",131],["T_WHITESPACE","\n    ",135],["T_PROTECTED","protected",136],["T_WHITESPACE"," ",136],["T_VARIABLE","$_processIndexEvents",136],["T_WHITESPACE"," ",136],"=",["T_WHITESPACE"," ",136],["T_STRING","true",136],";",["T_WHITESPACE","\n\n    ",136],["T_DOC_COMMENT","\/**\n     * Initialize resource model\n     *\n     *\/",138],["T_WHITESPACE","\n    ",141],["T_PROTECTED","protected",142],["T_WHITESPACE"," ",142],["T_FUNCTION","function",142],["T_WHITESPACE"," ",142],["T_STRING","_construct",142],"(",")",["T_WHITESPACE","\n    ",142],"{",["T_WHITESPACE","\n        ",143],["T_VARIABLE","$this",144],["T_OBJECT_OPERATOR","->",144],["T_STRING","_init",144],"(",["T_CONSTANT_ENCAPSED_STRING","'cataloginventory\/stock_item'",144],")",";",["T_WHITESPACE","\n    ",144],"}",["T_WHITESPACE","\n\n    ",145],["T_DOC_COMMENT","\/**\n     * Init mapping array of short fields to\n     * its full names\n     *\n     * @resturn Varien_Object\n     *\/",147],["T_WHITESPACE","\n    ",152],["T_PROTECTED","protected",153],["T_WHITESPACE"," ",153],["T_FUNCTION","function",153],["T_WHITESPACE"," ",153],["T_STRING","_initOldFieldsMap",153],"(",")",["T_WHITESPACE","\n    ",153],"{",["T_WHITESPACE","\n        ",154],["T_VARIABLE","$this",155],["T_OBJECT_OPERATOR","->",155],["T_STRING","_oldFieldsMap",155],["T_WHITESPACE"," ",155],"=",["T_WHITESPACE"," ",155],["T_ARRAY","array",155],"(",["T_WHITESPACE","\n            ",155],["T_CONSTANT_ENCAPSED_STRING","'stock_status_changed_automatically'",156],["T_WHITESPACE"," ",156],["T_DOUBLE_ARROW","=>",156],["T_WHITESPACE"," ",156],["T_CONSTANT_ENCAPSED_STRING","'stock_status_changed_auto'",156],",",["T_WHITESPACE","\n            ",156],["T_CONSTANT_ENCAPSED_STRING","'use_config_enable_qty_increments'",157],["T_WHITESPACE","   ",157],["T_DOUBLE_ARROW","=>",157],["T_WHITESPACE"," ",157],["T_CONSTANT_ENCAPSED_STRING","'use_config_enable_qty_inc'",157],["T_WHITESPACE","\n        ",157],")",";",["T_WHITESPACE","\n    ",158],"}",["T_WHITESPACE","\n\n    ",159],["T_DOC_COMMENT","\/**\n     * Retrieve stock identifier\n     *\n     * @todo multi stock\n     * @return int\n     *\/",161],["T_WHITESPACE","\n    ",166],["T_PUBLIC","public",167],["T_WHITESPACE"," ",167],["T_FUNCTION","function",167],["T_WHITESPACE"," ",167],["T_STRING","getStockId",167],"(",")",["T_WHITESPACE","\n    ",167],"{",["T_WHITESPACE","\n        ",168],["T_RETURN","return",169],["T_WHITESPACE"," ",169],["T_LNUMBER","1",169],";",["T_WHITESPACE","\n    ",169],"}",["T_WHITESPACE","\n\n    ",170],["T_DOC_COMMENT","\/**\n     * Retrieve Product Id data wrapper\n     *\n     * @return int\n     *\/",172],["T_WHITESPACE","\n    ",176],["T_PUBLIC","public",177],["T_WHITESPACE"," ",177],["T_FUNCTION","function",177],["T_WHITESPACE"," ",177],["T_STRING","getProductId",177],"(",")",["T_WHITESPACE","\n    ",177],"{",["T_WHITESPACE","\n        ",178],["T_RETURN","return",179],["T_WHITESPACE"," ",179],["T_VARIABLE","$this",179],["T_OBJECT_OPERATOR","->",179],["T_STRING","_getData",179],"(",["T_CONSTANT_ENCAPSED_STRING","'product_id'",179],")",";",["T_WHITESPACE","\n    ",179],"}",["T_WHITESPACE","\n\n    ",180],["T_DOC_COMMENT","\/**\n     * Load item data by product\n     *\n     * @param   mixed $product\n     * @return  Mage_CatalogInventory_Model_Stock_Item\n     *\/",182],["T_WHITESPACE","\n    ",187],["T_PUBLIC","public",188],["T_WHITESPACE"," ",188],["T_FUNCTION","function",188],["T_WHITESPACE"," ",188],["T_STRING","loadByProduct",188],"(",["T_VARIABLE","$product",188],")",["T_WHITESPACE","\n    ",188],"{",["T_WHITESPACE","\n        ",189],["T_IF","if",190],["T_WHITESPACE"," ",190],"(",["T_VARIABLE","$product",190],["T_WHITESPACE"," ",190],["T_INSTANCEOF","instanceof",190],["T_WHITESPACE"," ",190],["T_STRING","Mage_Catalog_Model_Product",190],")",["T_WHITESPACE"," ",190],"{",["T_WHITESPACE","\n            ",190],["T_VARIABLE","$product",191],["T_WHITESPACE"," ",191],"=",["T_WHITESPACE"," ",191],["T_VARIABLE","$product",191],["T_OBJECT_OPERATOR","->",191],["T_STRING","getId",191],"(",")",";",["T_WHITESPACE","\n        ",191],"}",["T_WHITESPACE","\n        ",192],["T_VARIABLE","$this",193],["T_OBJECT_OPERATOR","->",193],["T_STRING","_getResource",193],"(",")",["T_OBJECT_OPERATOR","->",193],["T_STRING","loadByProductId",193],"(",["T_VARIABLE","$this",193],",",["T_WHITESPACE"," ",193],["T_VARIABLE","$product",193],")",";",["T_WHITESPACE","\n        ",193],["T_VARIABLE","$this",194],["T_OBJECT_OPERATOR","->",194],["T_STRING","setOrigData",194],"(",")",";",["T_WHITESPACE","\n        ",194],["T_RETURN","return",195],["T_WHITESPACE"," ",195],["T_VARIABLE","$this",195],";",["T_WHITESPACE","\n    ",195],"}",["T_WHITESPACE","\n\n    ",196],["T_DOC_COMMENT","\/**\n     * Subtract quote item quantity\n     *\n     * @param   decimal $qty\n     * @return  Mage_CatalogInventory_Model_Stock_Item\n     *\/",198],["T_WHITESPACE","\n    ",203],["T_PUBLIC","public",204],["T_WHITESPACE"," ",204],["T_FUNCTION","function",204],["T_WHITESPACE"," ",204],["T_STRING","subtractQty",204],"(",["T_VARIABLE","$qty",204],")",["T_WHITESPACE","\n    ",204],"{",["T_WHITESPACE","\n        ",205],["T_IF","if",206],["T_WHITESPACE"," ",206],"(",["T_VARIABLE","$this",206],["T_OBJECT_OPERATOR","->",206],["T_STRING","canSubtractQty",206],"(",")",")",["T_WHITESPACE"," ",206],"{",["T_WHITESPACE","\n            ",206],["T_VARIABLE","$this",207],["T_OBJECT_OPERATOR","->",207],["T_STRING","setQty",207],"(",["T_VARIABLE","$this",207],["T_OBJECT_OPERATOR","->",207],["T_STRING","getQty",207],"(",")","-",["T_VARIABLE","$qty",207],")",";",["T_WHITESPACE","\n        ",207],"}",["T_WHITESPACE","\n        ",208],["T_RETURN","return",209],["T_WHITESPACE"," ",209],["T_VARIABLE","$this",209],";",["T_WHITESPACE","\n    ",209],"}",["T_WHITESPACE","\n\n    ",210],["T_DOC_COMMENT","\/**\n     * Check if is possible subtract value from item qty\n     *\n     * @return bool\n     *\/",212],["T_WHITESPACE","\n    ",216],["T_PUBLIC","public",217],["T_WHITESPACE"," ",217],["T_FUNCTION","function",217],["T_WHITESPACE"," ",217],["T_STRING","canSubtractQty",217],"(",")",["T_WHITESPACE","\n    ",217],"{",["T_WHITESPACE","\n        ",218],["T_RETURN","return",219],["T_WHITESPACE"," ",219],["T_VARIABLE","$this",219],["T_OBJECT_OPERATOR","->",219],["T_STRING","getManageStock",219],"(",")",["T_WHITESPACE"," ",219],["T_BOOLEAN_AND","&&",219],["T_WHITESPACE"," ",219],["T_STRING","Mage",219],["T_DOUBLE_COLON","::",219],["T_STRING","getStoreConfigFlag",219],"(",["T_STRING","self",219],["T_DOUBLE_COLON","::",219],["T_STRING","XML_PATH_CAN_SUBTRACT",219],")",";",["T_WHITESPACE","\n    ",219],"}",["T_WHITESPACE","\n\n    ",220],["T_DOC_COMMENT","\/**\n     * Add quantity process\n     *\n     * @param float $qty\n     * @return Mage_CatalogInventory_Model_Stock_Item\n     *\/",222],["T_WHITESPACE","\n    ",227],["T_PUBLIC","public",228],["T_WHITESPACE"," ",228],["T_FUNCTION","function",228],["T_WHITESPACE"," ",228],["T_STRING","addQty",228],"(",["T_VARIABLE","$qty",228],")",["T_WHITESPACE","\n    ",228],"{",["T_WHITESPACE","\n        ",229],["T_IF","if",230],["T_WHITESPACE"," ",230],"(","!",["T_VARIABLE","$this",230],["T_OBJECT_OPERATOR","->",230],["T_STRING","getManageStock",230],"(",")",")",["T_WHITESPACE"," ",230],"{",["T_WHITESPACE","\n            ",230],["T_RETURN","return",231],["T_WHITESPACE"," ",231],["T_VARIABLE","$this",231],";",["T_WHITESPACE","\n        ",231],"}",["T_WHITESPACE","\n        ",232],["T_VARIABLE","$config",233],["T_WHITESPACE"," ",233],"=",["T_WHITESPACE"," ",233],["T_STRING","Mage",233],["T_DOUBLE_COLON","::",233],["T_STRING","getStoreConfigFlag",233],"(",["T_STRING","self",233],["T_DOUBLE_COLON","::",233],["T_STRING","XML_PATH_CAN_SUBTRACT",233],")",";",["T_WHITESPACE","\n        ",233],["T_IF","if",234],["T_WHITESPACE"," ",234],"(","!",["T_VARIABLE","$config",234],")",["T_WHITESPACE"," ",234],"{",["T_WHITESPACE","\n            ",234],["T_RETURN","return",235],["T_WHITESPACE"," ",235],["T_VARIABLE","$this",235],";",["T_WHITESPACE","\n        ",235],"}",["T_WHITESPACE","\n\n        ",236],["T_VARIABLE","$this",238],["T_OBJECT_OPERATOR","->",238],["T_STRING","setQty",238],"(",["T_VARIABLE","$this",238],["T_OBJECT_OPERATOR","->",238],["T_STRING","getQty",238],"(",")","+",["T_VARIABLE","$qty",238],")",";",["T_WHITESPACE","\n        ",238],["T_RETURN","return",239],["T_WHITESPACE"," ",239],["T_VARIABLE","$this",239],";",["T_WHITESPACE","\n    ",239],"}",["T_WHITESPACE","\n\n    ",240],["T_DOC_COMMENT","\/**\n     * Retrieve Store Id (product or current)\n     *\n     * @return int\n     *\/",242],["T_WHITESPACE","\n    ",246],["T_PUBLIC","public",247],["T_WHITESPACE"," ",247],["T_FUNCTION","function",247],["T_WHITESPACE"," ",247],["T_STRING","getStoreId",247],"(",")",["T_WHITESPACE","\n    ",247],"{",["T_WHITESPACE","\n        ",248],["T_VARIABLE","$storeId",249],["T_WHITESPACE"," ",249],"=",["T_WHITESPACE"," ",249],["T_VARIABLE","$this",249],["T_OBJECT_OPERATOR","->",249],["T_STRING","getData",249],"(",["T_CONSTANT_ENCAPSED_STRING","'store_id'",249],")",";",["T_WHITESPACE","\n        ",249],["T_IF","if",250],["T_WHITESPACE"," ",250],"(",["T_STRING","is_null",250],"(",["T_VARIABLE","$storeId",250],")",")",["T_WHITESPACE"," ",250],"{",["T_WHITESPACE","\n            ",250],["T_VARIABLE","$storeId",251],["T_WHITESPACE"," ",251],"=",["T_WHITESPACE"," ",251],["T_STRING","Mage",251],["T_DOUBLE_COLON","::",251],["T_STRING","app",251],"(",")",["T_OBJECT_OPERATOR","->",251],["T_STRING","getStore",251],"(",")",["T_OBJECT_OPERATOR","->",251],["T_STRING","getId",251],"(",")",";",["T_WHITESPACE","\n            ",251],["T_VARIABLE","$this",252],["T_OBJECT_OPERATOR","->",252],["T_STRING","setData",252],"(",["T_CONSTANT_ENCAPSED_STRING","'store_id'",252],",",["T_WHITESPACE"," ",252],["T_VARIABLE","$storeId",252],")",";",["T_WHITESPACE","\n        ",252],"}",["T_WHITESPACE","\n        ",253],["T_RETURN","return",254],["T_WHITESPACE"," ",254],["T_VARIABLE","$storeId",254],";",["T_WHITESPACE","\n    ",254],"}",["T_WHITESPACE","\n\n    ",255],["T_DOC_COMMENT","\/**\n     * Adding stock data to product\n     *\n     * @param   Mage_Catalog_Model_Product $product\n     * @return  Mage_CatalogInventory_Model_Stock_Item\n     *\/",257],["T_WHITESPACE","\n    ",262],["T_PUBLIC","public",263],["T_WHITESPACE"," ",263],["T_FUNCTION","function",263],["T_WHITESPACE"," ",263],["T_STRING","assignProduct",263],"(",["T_STRING","Mage_Catalog_Model_Product",263],["T_WHITESPACE"," ",263],["T_VARIABLE","$product",263],")",["T_WHITESPACE","\n    ",263],"{",["T_WHITESPACE","\n        ",264],["T_IF","if",265],["T_WHITESPACE"," ",265],"(","!",["T_VARIABLE","$this",265],["T_OBJECT_OPERATOR","->",265],["T_STRING","getId",265],"(",")",["T_WHITESPACE"," ",265],["T_BOOLEAN_OR","||",265],["T_WHITESPACE"," ",265],"!",["T_VARIABLE","$this",265],["T_OBJECT_OPERATOR","->",265],["T_STRING","getProductId",265],"(",")",")",["T_WHITESPACE"," ",265],"{",["T_WHITESPACE","\n            ",265],["T_VARIABLE","$this",266],["T_OBJECT_OPERATOR","->",266],["T_STRING","_getResource",266],"(",")",["T_OBJECT_OPERATOR","->",266],["T_STRING","loadByProductId",266],"(",["T_VARIABLE","$this",266],",",["T_WHITESPACE"," ",266],["T_VARIABLE","$product",266],["T_OBJECT_OPERATOR","->",266],["T_STRING","getId",266],"(",")",")",";",["T_WHITESPACE","\n            ",266],["T_VARIABLE","$this",267],["T_OBJECT_OPERATOR","->",267],["T_STRING","setOrigData",267],"(",")",";",["T_WHITESPACE","\n        ",267],"}",["T_WHITESPACE","\n\n        ",268],["T_VARIABLE","$this",270],["T_OBJECT_OPERATOR","->",270],["T_STRING","setProduct",270],"(",["T_VARIABLE","$product",270],")",";",["T_WHITESPACE","\n        ",270],["T_VARIABLE","$product",271],["T_OBJECT_OPERATOR","->",271],["T_STRING","setStockItem",271],"(",["T_VARIABLE","$this",271],")",";",["T_WHITESPACE","\n\n        ",271],["T_VARIABLE","$product",273],["T_OBJECT_OPERATOR","->",273],["T_STRING","setIsInStock",273],"(",["T_VARIABLE","$this",273],["T_OBJECT_OPERATOR","->",273],["T_STRING","getIsInStock",273],"(",")",")",";",["T_WHITESPACE","\n        ",273],["T_STRING","Mage",274],["T_DOUBLE_COLON","::",274],["T_STRING","getSingleton",274],"(",["T_CONSTANT_ENCAPSED_STRING","'cataloginventory\/stock_status'",274],")",["T_WHITESPACE","\n            ",274],["T_OBJECT_OPERATOR","->",275],["T_STRING","assignProduct",275],"(",["T_VARIABLE","$product",275],",",["T_WHITESPACE"," ",275],["T_VARIABLE","$this",275],["T_OBJECT_OPERATOR","->",275],["T_STRING","getStockId",275],"(",")",",",["T_WHITESPACE"," ",275],["T_VARIABLE","$this",275],["T_OBJECT_OPERATOR","->",275],["T_STRING","getStockStatus",275],"(",")",")",";",["T_WHITESPACE","\n        ",275],["T_RETURN","return",276],["T_WHITESPACE"," ",276],["T_VARIABLE","$this",276],";",["T_WHITESPACE","\n    ",276],"}",["T_WHITESPACE","\n\n    ",277],["T_DOC_COMMENT","\/**\n     * Retrieve minimal quantity available for item status in stock\n     *\n     * @return float\n     *\/",279],["T_WHITESPACE","\n    ",283],["T_PUBLIC","public",284],["T_WHITESPACE"," ",284],["T_FUNCTION","function",284],["T_WHITESPACE"," ",284],["T_STRING","getMinQty",284],"(",")",["T_WHITESPACE","\n    ",284],"{",["T_WHITESPACE","\n        ",285],["T_RETURN","return",286],["T_WHITESPACE"," ",286],["T_DOUBLE_CAST","(float)",286],"(",["T_VARIABLE","$this",286],["T_OBJECT_OPERATOR","->",286],["T_STRING","getUseConfigMinQty",286],"(",")",["T_WHITESPACE"," ",286],"?",["T_WHITESPACE"," ",286],["T_STRING","Mage",286],["T_DOUBLE_COLON","::",286],["T_STRING","getStoreConfig",286],"(",["T_STRING","self",286],["T_DOUBLE_COLON","::",286],["T_STRING","XML_PATH_MIN_QTY",286],")",["T_WHITESPACE","\n            ",286],":",["T_WHITESPACE"," ",287],["T_VARIABLE","$this",287],["T_OBJECT_OPERATOR","->",287],["T_STRING","getData",287],"(",["T_CONSTANT_ENCAPSED_STRING","'min_qty'",287],")",")",";",["T_WHITESPACE","\n    ",287],"}",["T_WHITESPACE","\n\n    ",288],["T_DOC_COMMENT","\/**\n     * Getter for customer group id\n     *\n     * @return int\n     *\/",290],["T_WHITESPACE","\n    ",294],["T_PUBLIC","public",295],["T_WHITESPACE"," ",295],["T_FUNCTION","function",295],["T_WHITESPACE"," ",295],["T_STRING","getCustomerGroupId",295],"(",")",["T_WHITESPACE","\n    ",295],"{",["T_WHITESPACE","\n        ",296],["T_RETURN","return",297],["T_WHITESPACE"," ",297],["T_VARIABLE","$this",297],["T_OBJECT_OPERATOR","->",297],["T_STRING","_customerGroupId",297],";",["T_WHITESPACE","\n    ",297],"}",["T_WHITESPACE","\n\n    ",298],["T_DOC_COMMENT","\/**\n     * Setter for customer group id\n     *\n     * @param int Value of customer group id\n     * @return Mage_CatalogInventory_Model_Stock_Item\n     *\/",300],["T_WHITESPACE","\n    ",305],["T_PUBLIC","public",306],["T_WHITESPACE"," ",306],["T_FUNCTION","function",306],["T_WHITESPACE"," ",306],["T_STRING","setCustomerGroupId",306],"(",["T_VARIABLE","$value",306],")",["T_WHITESPACE","\n    ",306],"{",["T_WHITESPACE","\n        ",307],["T_VARIABLE","$this",308],["T_OBJECT_OPERATOR","->",308],["T_STRING","_customerGroupId",308],["T_WHITESPACE"," ",308],"=",["T_WHITESPACE"," ",308],["T_VARIABLE","$value",308],";",["T_WHITESPACE","\n        ",308],["T_RETURN","return",309],["T_WHITESPACE"," ",309],["T_VARIABLE","$this",309],";",["T_WHITESPACE","\n    ",309],"}",["T_WHITESPACE","\n\n    ",310],["T_DOC_COMMENT","\/**\n     * Retrieve Minimum Qty Allowed in Shopping Cart or NULL when there is no limitation\n     *\n     * @return float|null\n     *\/",312],["T_WHITESPACE","\n    ",316],["T_PUBLIC","public",317],["T_WHITESPACE"," ",317],["T_FUNCTION","function",317],["T_WHITESPACE"," ",317],["T_STRING","getMinSaleQty",317],"(",")",["T_WHITESPACE","\n    ",317],"{",["T_WHITESPACE","\n        ",318],["T_VARIABLE","$customerGroupId",319],["T_WHITESPACE"," ",319],"=",["T_WHITESPACE"," ",319],["T_VARIABLE","$this",319],["T_OBJECT_OPERATOR","->",319],["T_STRING","getCustomerGroupId",319],"(",")",";",["T_WHITESPACE","\n        ",319],["T_IF","if",320],["T_WHITESPACE"," ",320],"(","!",["T_VARIABLE","$customerGroupId",320],")",["T_WHITESPACE"," ",320],"{",["T_WHITESPACE","\n            ",320],["T_VARIABLE","$customerGroupId",321],["T_WHITESPACE"," ",321],"=",["T_WHITESPACE"," ",321],["T_STRING","Mage",321],["T_DOUBLE_COLON","::",321],["T_STRING","app",321],"(",")",["T_OBJECT_OPERATOR","->",321],["T_STRING","getStore",321],"(",")",["T_OBJECT_OPERATOR","->",321],["T_STRING","isAdmin",321],"(",")",["T_WHITESPACE","\n                ",321],"?",["T_WHITESPACE"," ",322],["T_STRING","Mage_Customer_Model_Group",322],["T_DOUBLE_COLON","::",322],["T_STRING","CUST_GROUP_ALL",322],["T_WHITESPACE","\n                ",322],":",["T_WHITESPACE"," ",323],["T_STRING","Mage",323],["T_DOUBLE_COLON","::",323],["T_STRING","getSingleton",323],"(",["T_CONSTANT_ENCAPSED_STRING","'customer\/session'",323],")",["T_OBJECT_OPERATOR","->",323],["T_STRING","getCustomerGroupId",323],"(",")",";",["T_WHITESPACE","\n        ",323],"}",["T_WHITESPACE","\n\n        ",324],["T_IF","if",326],["T_WHITESPACE"," ",326],"(","!",["T_ISSET","isset",326],"(",["T_VARIABLE","$this",326],["T_OBJECT_OPERATOR","->",326],["T_STRING","_minSaleQtyCache",326],"[",["T_VARIABLE","$customerGroupId",326],"]",")",")",["T_WHITESPACE"," ",326],"{",["T_WHITESPACE","\n            ",326],["T_VARIABLE","$minSaleQty",327],["T_WHITESPACE"," ",327],"=",["T_WHITESPACE"," ",327],["T_VARIABLE","$this",327],["T_OBJECT_OPERATOR","->",327],["T_STRING","getUseConfigMinSaleQty",327],"(",")",["T_WHITESPACE","\n                ",327],"?",["T_WHITESPACE"," ",328],["T_STRING","Mage",328],["T_DOUBLE_COLON","::",328],["T_STRING","helper",328],"(",["T_CONSTANT_ENCAPSED_STRING","'cataloginventory\/minsaleqty'",328],")",["T_OBJECT_OPERATOR","->",328],["T_STRING","getConfigValue",328],"(",["T_VARIABLE","$customerGroupId",328],")",["T_WHITESPACE","\n                ",328],":",["T_WHITESPACE"," ",329],["T_VARIABLE","$this",329],["T_OBJECT_OPERATOR","->",329],["T_STRING","getData",329],"(",["T_CONSTANT_ENCAPSED_STRING","'min_sale_qty'",329],")",";",["T_WHITESPACE","\n\n            ",329],["T_VARIABLE","$this",331],["T_OBJECT_OPERATOR","->",331],["T_STRING","_minSaleQtyCache",331],"[",["T_VARIABLE","$customerGroupId",331],"]",["T_WHITESPACE"," ",331],"=",["T_WHITESPACE"," ",331],["T_EMPTY","empty",331],"(",["T_VARIABLE","$minSaleQty",331],")",["T_WHITESPACE"," ",331],"?",["T_WHITESPACE"," ",331],["T_LNUMBER","0",331],["T_WHITESPACE"," ",331],":",["T_WHITESPACE"," ",331],["T_DOUBLE_CAST","(float)",331],["T_VARIABLE","$minSaleQty",331],";",["T_WHITESPACE","\n        ",331],"}",["T_WHITESPACE","\n\n        ",332],["T_RETURN","return",334],["T_WHITESPACE"," ",334],["T_VARIABLE","$this",334],["T_OBJECT_OPERATOR","->",334],["T_STRING","_minSaleQtyCache",334],"[",["T_VARIABLE","$customerGroupId",334],"]",["T_WHITESPACE"," ",334],"?",["T_WHITESPACE"," ",334],["T_VARIABLE","$this",334],["T_OBJECT_OPERATOR","->",334],["T_STRING","_minSaleQtyCache",334],"[",["T_VARIABLE","$customerGroupId",334],"]",["T_WHITESPACE"," ",334],":",["T_WHITESPACE"," ",334],["T_STRING","null",334],";",["T_WHITESPACE","\n    ",334],"}",["T_WHITESPACE","\n\n    ",335],["T_DOC_COMMENT","\/**\n     * Retrieve Maximum Qty Allowed in Shopping Cart data wrapper\n     *\n     * @return float\n     *\/",337],["T_WHITESPACE","\n    ",341],["T_PUBLIC","public",342],["T_WHITESPACE"," ",342],["T_FUNCTION","function",342],["T_WHITESPACE"," ",342],["T_STRING","getMaxSaleQty",342],"(",")",["T_WHITESPACE","\n    ",342],"{",["T_WHITESPACE","\n        ",343],["T_RETURN","return",344],["T_WHITESPACE"," ",344],["T_DOUBLE_CAST","(float)",344],"(",["T_VARIABLE","$this",344],["T_OBJECT_OPERATOR","->",344],["T_STRING","getUseConfigMaxSaleQty",344],"(",")",["T_WHITESPACE"," ",344],"?",["T_WHITESPACE"," ",344],["T_STRING","Mage",344],["T_DOUBLE_COLON","::",344],["T_STRING","getStoreConfig",344],"(",["T_STRING","self",344],["T_DOUBLE_COLON","::",344],["T_STRING","XML_PATH_MAX_SALE_QTY",344],")",["T_WHITESPACE","\n            ",344],":",["T_WHITESPACE"," ",345],["T_VARIABLE","$this",345],["T_OBJECT_OPERATOR","->",345],["T_STRING","getData",345],"(",["T_CONSTANT_ENCAPSED_STRING","'max_sale_qty'",345],")",")",";",["T_WHITESPACE","\n    ",345],"}",["T_WHITESPACE","\n\n    ",346],["T_DOC_COMMENT","\/**\n     * Retrieve Notify for Quantity Below data wrapper\n     *\n     * @return float\n     *\/",348],["T_WHITESPACE","\n    ",352],["T_PUBLIC","public",353],["T_WHITESPACE"," ",353],["T_FUNCTION","function",353],["T_WHITESPACE"," ",353],["T_STRING","getNotifyStockQty",353],"(",")",["T_WHITESPACE","\n    ",353],"{",["T_WHITESPACE","\n        ",354],["T_IF","if",355],["T_WHITESPACE"," ",355],"(",["T_VARIABLE","$this",355],["T_OBJECT_OPERATOR","->",355],["T_STRING","getUseConfigNotifyStockQty",355],"(",")",")",["T_WHITESPACE"," ",355],"{",["T_WHITESPACE","\n            ",355],["T_RETURN","return",356],["T_WHITESPACE"," ",356],["T_DOUBLE_CAST","(float)",356],["T_WHITESPACE"," ",356],["T_STRING","Mage",356],["T_DOUBLE_COLON","::",356],["T_STRING","getStoreConfig",356],"(",["T_STRING","self",356],["T_DOUBLE_COLON","::",356],["T_STRING","XML_PATH_NOTIFY_STOCK_QTY",356],")",";",["T_WHITESPACE","\n        ",356],"}",["T_WHITESPACE","\n        ",357],["T_RETURN","return",358],["T_WHITESPACE"," ",358],["T_DOUBLE_CAST","(float)",358],["T_WHITESPACE"," ",358],["T_VARIABLE","$this",358],["T_OBJECT_OPERATOR","->",358],["T_STRING","getData",358],"(",["T_CONSTANT_ENCAPSED_STRING","'notify_stock_qty'",358],")",";",["T_WHITESPACE","\n    ",358],"}",["T_WHITESPACE","\n\n    ",359],["T_DOC_COMMENT","\/**\n     * Retrieve whether Quantity Increments is enabled\n     *\n     * @return bool\n     *\/",361],["T_WHITESPACE","\n    ",365],["T_PUBLIC","public",366],["T_WHITESPACE"," ",366],["T_FUNCTION","function",366],["T_WHITESPACE"," ",366],["T_STRING","getEnableQtyIncrements",366],"(",")",["T_WHITESPACE","\n    ",366],"{",["T_WHITESPACE","\n        ",367],["T_RETURN","return",368],["T_WHITESPACE"," ",368],["T_VARIABLE","$this",368],["T_OBJECT_OPERATOR","->",368],["T_STRING","getUseConfigEnableQtyIncrements",368],"(",")",["T_WHITESPACE","\n            ",368],"?",["T_WHITESPACE"," ",369],["T_STRING","Mage",369],["T_DOUBLE_COLON","::",369],["T_STRING","getStoreConfigFlag",369],"(",["T_STRING","self",369],["T_DOUBLE_COLON","::",369],["T_STRING","XML_PATH_ENABLE_QTY_INCREMENTS",369],")",["T_WHITESPACE","\n            ",369],":",["T_WHITESPACE"," ",370],["T_BOOL_CAST","(bool)",370],["T_VARIABLE","$this",370],["T_OBJECT_OPERATOR","->",370],["T_STRING","getData",370],"(",["T_CONSTANT_ENCAPSED_STRING","'enable_qty_increments'",370],")",";",["T_WHITESPACE","\n    ",370],"}",["T_WHITESPACE","\n\n    ",371],["T_DOC_COMMENT","\/**\n     * Retrieve Quantity Increments data wrapper\n     *\n     * @return float|false\n     *\/",373],["T_WHITESPACE","\n    ",377],["T_PUBLIC","public",378],["T_WHITESPACE"," ",378],["T_FUNCTION","function",378],["T_WHITESPACE"," ",378],["T_STRING","getQtyIncrements",378],"(",")",["T_WHITESPACE","\n    ",378],"{",["T_WHITESPACE","\n        ",379],["T_IF","if",380],["T_WHITESPACE"," ",380],"(",["T_VARIABLE","$this",380],["T_OBJECT_OPERATOR","->",380],["T_STRING","_qtyIncrements",380],["T_WHITESPACE"," ",380],["T_IS_IDENTICAL","===",380],["T_WHITESPACE"," ",380],["T_STRING","null",380],")",["T_WHITESPACE"," ",380],"{",["T_WHITESPACE","\n            ",380],["T_IF","if",381],["T_WHITESPACE"," ",381],"(",["T_VARIABLE","$this",381],["T_OBJECT_OPERATOR","->",381],["T_STRING","getEnableQtyIncrements",381],"(",")",")",["T_WHITESPACE"," ",381],"{",["T_WHITESPACE","\n                ",381],["T_VARIABLE","$this",382],["T_OBJECT_OPERATOR","->",382],["T_STRING","_qtyIncrements",382],["T_WHITESPACE"," ",382],"=",["T_WHITESPACE"," ",382],["T_DOUBLE_CAST","(float)",382],"(",["T_VARIABLE","$this",382],["T_OBJECT_OPERATOR","->",382],["T_STRING","getUseConfigQtyIncrements",382],"(",")",["T_WHITESPACE","\n                    ",382],"?",["T_WHITESPACE"," ",383],["T_STRING","Mage",383],["T_DOUBLE_COLON","::",383],["T_STRING","getStoreConfig",383],"(",["T_STRING","self",383],["T_DOUBLE_COLON","::",383],["T_STRING","XML_PATH_QTY_INCREMENTS",383],")",["T_WHITESPACE","\n                    ",383],":",["T_WHITESPACE"," ",384],["T_VARIABLE","$this",384],["T_OBJECT_OPERATOR","->",384],["T_STRING","getData",384],"(",["T_CONSTANT_ENCAPSED_STRING","'qty_increments'",384],")",")",";",["T_WHITESPACE","\n                ",384],["T_IF","if",385],["T_WHITESPACE"," ",385],"(",["T_VARIABLE","$this",385],["T_OBJECT_OPERATOR","->",385],["T_STRING","_qtyIncrements",385],["T_WHITESPACE"," ",385],["T_IS_SMALLER_OR_EQUAL","<=",385],["T_WHITESPACE"," ",385],["T_LNUMBER","0",385],")",["T_WHITESPACE"," ",385],"{",["T_WHITESPACE","\n                    ",385],["T_VARIABLE","$this",386],["T_OBJECT_OPERATOR","->",386],["T_STRING","_qtyIncrements",386],["T_WHITESPACE"," ",386],"=",["T_WHITESPACE"," ",386],["T_STRING","false",386],";",["T_WHITESPACE","\n                ",386],"}",["T_WHITESPACE","\n            ",387],"}",["T_WHITESPACE"," ",388],["T_ELSE","else",388],["T_WHITESPACE"," ",388],"{",["T_WHITESPACE","\n                ",388],["T_VARIABLE","$this",389],["T_OBJECT_OPERATOR","->",389],["T_STRING","_qtyIncrements",389],["T_WHITESPACE"," ",389],"=",["T_WHITESPACE"," ",389],["T_STRING","false",389],";",["T_WHITESPACE","\n            ",389],"}",["T_WHITESPACE","\n        ",390],"}",["T_WHITESPACE","\n        ",391],["T_RETURN","return",392],["T_WHITESPACE"," ",392],["T_VARIABLE","$this",392],["T_OBJECT_OPERATOR","->",392],["T_STRING","_qtyIncrements",392],";",["T_WHITESPACE","\n    ",392],"}",["T_WHITESPACE","\n\n     ",393],["T_DOC_COMMENT","\/**\n     * Retrieve Default Quantity Increments data wrapper\n     *\n     * @deprecated since 1.7.0.0\n     * @return int|false\n     *\/",395],["T_WHITESPACE","\n    ",400],["T_PUBLIC","public",401],["T_WHITESPACE"," ",401],["T_FUNCTION","function",401],["T_WHITESPACE"," ",401],["T_STRING","getDefaultQtyIncrements",401],"(",")",["T_WHITESPACE","\n    ",401],"{",["T_WHITESPACE","\n        ",402],["T_RETURN","return",403],["T_WHITESPACE"," ",403],["T_STRING","Mage",403],["T_DOUBLE_COLON","::",403],["T_STRING","getStoreConfigFlag",403],"(",["T_STRING","self",403],["T_DOUBLE_COLON","::",403],["T_STRING","XML_PATH_ENABLE_QTY_INCREMENTS",403],")",["T_WHITESPACE","\n            ",403],"?",["T_WHITESPACE"," ",404],["T_INT_CAST","(int)",404],["T_STRING","Mage",404],["T_DOUBLE_COLON","::",404],["T_STRING","getStoreConfig",404],"(",["T_STRING","self",404],["T_DOUBLE_COLON","::",404],["T_STRING","XML_PATH_QTY_INCREMENTS",404],")",["T_WHITESPACE","\n            ",404],":",["T_WHITESPACE"," ",405],["T_STRING","false",405],";",["T_WHITESPACE","\n    ",405],"}",["T_WHITESPACE","\n\n    ",406],["T_DOC_COMMENT","\/**\n     * Retrieve backorders status\n     *\n     * @return int\n     *\/",408],["T_WHITESPACE","\n    ",412],["T_PUBLIC","public",413],["T_WHITESPACE"," ",413],["T_FUNCTION","function",413],["T_WHITESPACE"," ",413],["T_STRING","getBackorders",413],"(",")",["T_WHITESPACE","\n    ",413],"{",["T_WHITESPACE","\n        ",414],["T_IF","if",415],["T_WHITESPACE"," ",415],"(",["T_VARIABLE","$this",415],["T_OBJECT_OPERATOR","->",415],["T_STRING","getUseConfigBackorders",415],"(",")",")",["T_WHITESPACE"," ",415],"{",["T_WHITESPACE","\n            ",415],["T_RETURN","return",416],["T_WHITESPACE"," ",416],["T_INT_CAST","(int)",416],["T_WHITESPACE"," ",416],["T_STRING","Mage",416],["T_DOUBLE_COLON","::",416],["T_STRING","getStoreConfig",416],"(",["T_STRING","self",416],["T_DOUBLE_COLON","::",416],["T_STRING","XML_PATH_BACKORDERS",416],")",";",["T_WHITESPACE","\n        ",416],"}",["T_WHITESPACE","\n        ",417],["T_RETURN","return",418],["T_WHITESPACE"," ",418],["T_VARIABLE","$this",418],["T_OBJECT_OPERATOR","->",418],["T_STRING","getData",418],"(",["T_CONSTANT_ENCAPSED_STRING","'backorders'",418],")",";",["T_WHITESPACE","\n    ",418],"}",["T_WHITESPACE","\n\n    ",419],["T_DOC_COMMENT","\/**\n     * Retrieve Manage Stock data wrapper\n     *\n     * @return int\n     *\/",421],["T_WHITESPACE","\n    ",425],["T_PUBLIC","public",426],["T_WHITESPACE"," ",426],["T_FUNCTION","function",426],["T_WHITESPACE"," ",426],["T_STRING","getManageStock",426],"(",")",["T_WHITESPACE","\n    ",426],"{",["T_WHITESPACE","\n        ",427],["T_IF","if",428],["T_WHITESPACE"," ",428],"(",["T_VARIABLE","$this",428],["T_OBJECT_OPERATOR","->",428],["T_STRING","getUseConfigManageStock",428],"(",")",")",["T_WHITESPACE"," ",428],"{",["T_WHITESPACE","\n            ",428],["T_RETURN","return",429],["T_WHITESPACE"," ",429],["T_INT_CAST","(int)",429],["T_WHITESPACE"," ",429],["T_STRING","Mage",429],["T_DOUBLE_COLON","::",429],["T_STRING","getStoreConfigFlag",429],"(",["T_STRING","self",429],["T_DOUBLE_COLON","::",429],["T_STRING","XML_PATH_MANAGE_STOCK",429],")",";",["T_WHITESPACE","\n        ",429],"}",["T_WHITESPACE","\n        ",430],["T_RETURN","return",431],["T_WHITESPACE"," ",431],["T_VARIABLE","$this",431],["T_OBJECT_OPERATOR","->",431],["T_STRING","getData",431],"(",["T_CONSTANT_ENCAPSED_STRING","'manage_stock'",431],")",";",["T_WHITESPACE","\n    ",431],"}",["T_WHITESPACE","\n\n    ",432],["T_DOC_COMMENT","\/**\n     * Retrieve can Back in stock\n     *\n     * @return bool\n     *\/",434],["T_WHITESPACE","\n    ",438],["T_PUBLIC","public",439],["T_WHITESPACE"," ",439],["T_FUNCTION","function",439],["T_WHITESPACE"," ",439],["T_STRING","getCanBackInStock",439],"(",")",["T_WHITESPACE","\n    ",439],"{",["T_WHITESPACE","\n        ",440],["T_RETURN","return",441],["T_WHITESPACE"," ",441],["T_STRING","Mage",441],["T_DOUBLE_COLON","::",441],["T_STRING","getStoreConfigFlag",441],"(",["T_STRING","self",441],["T_DOUBLE_COLON","::",441],["T_STRING","XML_PATH_CAN_BACK_IN_STOCK",441],")",";",["T_WHITESPACE","\n    ",441],"}",["T_WHITESPACE","\n\n    ",442],["T_DOC_COMMENT","\/**\n     * Check quantity\n     *\n     * @param   decimal $qty\n     * @exception Mage_Core_Exception\n     * @return  bool\n     *\/",444],["T_WHITESPACE","\n    ",450],["T_PUBLIC","public",451],["T_WHITESPACE"," ",451],["T_FUNCTION","function",451],["T_WHITESPACE"," ",451],["T_STRING","checkQty",451],"(",["T_VARIABLE","$qty",451],")",["T_WHITESPACE","\n    ",451],"{",["T_WHITESPACE","\n        ",452],["T_IF","if",453],["T_WHITESPACE"," ",453],"(","!",["T_VARIABLE","$this",453],["T_OBJECT_OPERATOR","->",453],["T_STRING","getManageStock",453],"(",")",["T_WHITESPACE"," ",453],["T_BOOLEAN_OR","||",453],["T_WHITESPACE"," ",453],["T_STRING","Mage",453],["T_DOUBLE_COLON","::",453],["T_STRING","app",453],"(",")",["T_OBJECT_OPERATOR","->",453],["T_STRING","getStore",453],"(",")",["T_OBJECT_OPERATOR","->",453],["T_STRING","isAdmin",453],"(",")",")",["T_WHITESPACE"," ",453],"{",["T_WHITESPACE","\n            ",453],["T_RETURN","return",454],["T_WHITESPACE"," ",454],["T_STRING","true",454],";",["T_WHITESPACE","\n        ",454],"}",["T_WHITESPACE","\n\n        ",455],["T_IF","if",457],["T_WHITESPACE"," ",457],"(",["T_VARIABLE","$this",457],["T_OBJECT_OPERATOR","->",457],["T_STRING","getQty",457],"(",")",["T_WHITESPACE"," ",457],"-",["T_WHITESPACE"," ",457],["T_VARIABLE","$this",457],["T_OBJECT_OPERATOR","->",457],["T_STRING","getMinQty",457],"(",")",["T_WHITESPACE"," ",457],"-",["T_WHITESPACE"," ",457],["T_VARIABLE","$qty",457],["T_WHITESPACE"," ",457],"<",["T_WHITESPACE"," ",457],["T_LNUMBER","0",457],")",["T_WHITESPACE"," ",457],"{",["T_WHITESPACE","\n            ",457],["T_SWITCH","switch",458],["T_WHITESPACE"," ",458],"(",["T_VARIABLE","$this",458],["T_OBJECT_OPERATOR","->",458],["T_STRING","getBackorders",458],"(",")",")",["T_WHITESPACE"," ",458],"{",["T_WHITESPACE","\n                ",458],["T_CASE","case",459],["T_WHITESPACE"," ",459],["T_STRING","Mage_CatalogInventory_Model_Stock",459],["T_DOUBLE_COLON","::",459],["T_STRING","BACKORDERS_YES_NONOTIFY",459],":",["T_WHITESPACE","\n                ",459],["T_CASE","case",460],["T_WHITESPACE"," ",460],["T_STRING","Mage_CatalogInventory_Model_Stock",460],["T_DOUBLE_COLON","::",460],["T_STRING","BACKORDERS_YES_NOTIFY",460],":",["T_WHITESPACE","\n                    ",460],["T_BREAK","break",461],";",["T_WHITESPACE","\n                ",461],["T_DEFAULT","default",462],":",["T_WHITESPACE","\n                    ",462],["T_RETURN","return",463],["T_WHITESPACE"," ",463],["T_STRING","false",463],";",["T_WHITESPACE","\n                    ",463],["T_BREAK","break",464],";",["T_WHITESPACE","\n            ",464],"}",["T_WHITESPACE","\n        ",465],"}",["T_WHITESPACE","\n        ",466],["T_RETURN","return",467],["T_WHITESPACE"," ",467],["T_STRING","true",467],";",["T_WHITESPACE","\n    ",467],"}",["T_WHITESPACE","\n\n    ",468],["T_DOC_COMMENT","\/**\n     * Returns suggested qty that satisfies qty increments and minQty\/maxQty\/minSaleQty\/maxSaleQty conditions\n     * or original qty if such value does not exist\n     *\n     * @param int|float $qty\n     * @return int|float\n     *\/",470],["T_WHITESPACE","\n    ",476],["T_PUBLIC","public",477],["T_WHITESPACE"," ",477],["T_FUNCTION","function",477],["T_WHITESPACE"," ",477],["T_STRING","suggestQty",477],"(",["T_VARIABLE","$qty",477],")",["T_WHITESPACE","\n    ",477],"{",["T_WHITESPACE","\n        ",478],["T_COMMENT","\/\/ We do not manage stock\n",479],["T_WHITESPACE","        ",480],["T_IF","if",480],["T_WHITESPACE"," ",480],"(",["T_VARIABLE","$qty",480],["T_WHITESPACE"," ",480],["T_IS_SMALLER_OR_EQUAL","<=",480],["T_WHITESPACE"," ",480],["T_LNUMBER","0",480],["T_WHITESPACE"," ",480],["T_BOOLEAN_OR","||",480],["T_WHITESPACE"," ",480],"!",["T_VARIABLE","$this",480],["T_OBJECT_OPERATOR","->",480],["T_STRING","getManageStock",480],"(",")",")",["T_WHITESPACE"," ",480],"{",["T_WHITESPACE","\n            ",480],["T_RETURN","return",481],["T_WHITESPACE"," ",481],["T_VARIABLE","$qty",481],";",["T_WHITESPACE","\n        ",481],"}",["T_WHITESPACE","\n\n        ",482],["T_VARIABLE","$qtyIncrements",484],["T_WHITESPACE"," ",484],"=",["T_WHITESPACE"," ",484],["T_INT_CAST","(int)",484],["T_VARIABLE","$this",484],["T_OBJECT_OPERATOR","->",484],["T_STRING","getQtyIncrements",484],"(",")",";",["T_WHITESPACE"," ",484],["T_COMMENT","\/\/ Currently only integer increments supported\n",484],["T_WHITESPACE","        ",485],["T_IF","if",485],["T_WHITESPACE"," ",485],"(",["T_VARIABLE","$qtyIncrements",485],["T_WHITESPACE"," ",485],"<",["T_WHITESPACE"," ",485],["T_LNUMBER","2",485],")",["T_WHITESPACE"," ",485],"{",["T_WHITESPACE","\n            ",485],["T_RETURN","return",486],["T_WHITESPACE"," ",486],["T_VARIABLE","$qty",486],";",["T_WHITESPACE","\n        ",486],"}",["T_WHITESPACE","\n\n        ",487],["T_VARIABLE","$minQty",489],["T_WHITESPACE"," ",489],"=",["T_WHITESPACE"," ",489],["T_STRING","max",489],"(",["T_VARIABLE","$this",489],["T_OBJECT_OPERATOR","->",489],["T_STRING","getMinSaleQty",489],"(",")",",",["T_WHITESPACE"," ",489],["T_VARIABLE","$qtyIncrements",489],")",";",["T_WHITESPACE","\n        ",489],["T_VARIABLE","$divisibleMin",490],["T_WHITESPACE"," ",490],"=",["T_WHITESPACE"," ",490],["T_STRING","ceil",490],"(",["T_VARIABLE","$minQty",490],["T_WHITESPACE"," ",490],"\/",["T_WHITESPACE"," ",490],["T_VARIABLE","$qtyIncrements",490],")",["T_WHITESPACE"," ",490],"*",["T_WHITESPACE"," ",490],["T_VARIABLE","$qtyIncrements",490],";",["T_WHITESPACE","\n\n        ",490],["T_VARIABLE","$maxQty",492],["T_WHITESPACE"," ",492],"=",["T_WHITESPACE"," ",492],["T_STRING","min",492],"(",["T_VARIABLE","$this",492],["T_OBJECT_OPERATOR","->",492],["T_STRING","getQty",492],"(",")",["T_WHITESPACE"," ",492],"-",["T_WHITESPACE"," ",492],["T_VARIABLE","$this",492],["T_OBJECT_OPERATOR","->",492],["T_STRING","getMinQty",492],"(",")",",",["T_WHITESPACE"," ",492],["T_VARIABLE","$this",492],["T_OBJECT_OPERATOR","->",492],["T_STRING","getMaxSaleQty",492],"(",")",")",";",["T_WHITESPACE","\n        ",492],["T_VARIABLE","$divisibleMax",493],["T_WHITESPACE"," ",493],"=",["T_WHITESPACE"," ",493],["T_STRING","floor",493],"(",["T_VARIABLE","$maxQty",493],["T_WHITESPACE"," ",493],"\/",["T_WHITESPACE"," ",493],["T_VARIABLE","$qtyIncrements",493],")",["T_WHITESPACE"," ",493],"*",["T_WHITESPACE"," ",493],["T_VARIABLE","$qtyIncrements",493],";",["T_WHITESPACE","\n\n        ",493],["T_IF","if",495],["T_WHITESPACE"," ",495],"(",["T_VARIABLE","$qty",495],["T_WHITESPACE"," ",495],"<",["T_WHITESPACE"," ",495],["T_VARIABLE","$minQty",495],["T_WHITESPACE"," ",495],["T_BOOLEAN_OR","||",495],["T_WHITESPACE"," ",495],["T_VARIABLE","$qty",495],["T_WHITESPACE"," ",495],">",["T_WHITESPACE"," ",495],["T_VARIABLE","$maxQty",495],["T_WHITESPACE"," ",495],["T_BOOLEAN_OR","||",495],["T_WHITESPACE"," ",495],["T_VARIABLE","$divisibleMin",495],["T_WHITESPACE"," ",495],">",["T_WHITESPACE"," ",495],["T_VARIABLE","$divisibleMax",495],")",["T_WHITESPACE"," ",495],"{",["T_WHITESPACE","\n            ",495],["T_COMMENT","\/\/ Do not perform rounding for qty that does not satisfy min\/max conditions to not confuse customer\n",496],["T_WHITESPACE","            ",497],["T_RETURN","return",497],["T_WHITESPACE"," ",497],["T_VARIABLE","$qty",497],";",["T_WHITESPACE","\n        ",497],"}",["T_WHITESPACE","\n\n        ",498],["T_COMMENT","\/\/ Suggest value closest to given qty\n",500],["T_WHITESPACE","        ",501],["T_VARIABLE","$closestDivisibleLeft",501],["T_WHITESPACE"," ",501],"=",["T_WHITESPACE"," ",501],["T_STRING","floor",501],"(",["T_VARIABLE","$qty",501],["T_WHITESPACE"," ",501],"\/",["T_WHITESPACE"," ",501],["T_VARIABLE","$qtyIncrements",501],")",["T_WHITESPACE"," ",501],"*",["T_WHITESPACE"," ",501],["T_VARIABLE","$qtyIncrements",501],";",["T_WHITESPACE","\n        ",501],["T_VARIABLE","$closestDivisibleRight",502],["T_WHITESPACE"," ",502],"=",["T_WHITESPACE"," ",502],["T_VARIABLE","$closestDivisibleLeft",502],["T_WHITESPACE"," ",502],"+",["T_WHITESPACE"," ",502],["T_VARIABLE","$qtyIncrements",502],";",["T_WHITESPACE","\n        ",502],["T_VARIABLE","$acceptableLeft",503],["T_WHITESPACE"," ",503],"=",["T_WHITESPACE"," ",503],["T_STRING","min",503],"(",["T_STRING","max",503],"(",["T_VARIABLE","$divisibleMin",503],",",["T_WHITESPACE"," ",503],["T_VARIABLE","$closestDivisibleLeft",503],")",",",["T_WHITESPACE"," ",503],["T_VARIABLE","$divisibleMax",503],")",";",["T_WHITESPACE","\n        ",503],["T_VARIABLE","$acceptableRight",504],["T_WHITESPACE"," ",504],"=",["T_WHITESPACE"," ",504],["T_STRING","max",504],"(",["T_STRING","min",504],"(",["T_VARIABLE","$divisibleMax",504],",",["T_WHITESPACE"," ",504],["T_VARIABLE","$closestDivisibleRight",504],")",",",["T_WHITESPACE"," ",504],["T_VARIABLE","$divisibleMin",504],")",";",["T_WHITESPACE","\n        ",504],["T_RETURN","return",505],["T_WHITESPACE"," ",505],["T_STRING","abs",505],"(",["T_VARIABLE","$acceptableLeft",505],["T_WHITESPACE"," ",505],"-",["T_WHITESPACE"," ",505],["T_VARIABLE","$qty",505],")",["T_WHITESPACE"," ",505],"<",["T_WHITESPACE"," ",505],["T_STRING","abs",505],"(",["T_VARIABLE","$acceptableRight",505],["T_WHITESPACE"," ",505],"-",["T_WHITESPACE"," ",505],["T_VARIABLE","$qty",505],")",["T_WHITESPACE"," ",505],"?",["T_WHITESPACE"," ",505],["T_VARIABLE","$acceptableLeft",505],["T_WHITESPACE"," ",505],":",["T_WHITESPACE"," ",505],["T_VARIABLE","$acceptableRight",505],";",["T_WHITESPACE","\n    ",505],"}",["T_WHITESPACE","\n\n    ",506],["T_DOC_COMMENT","\/**\n     * Checking quote item quantity\n     *\n     * Second parameter of this method specifies quantity of this product in whole shopping cart\n     * which should be checked for stock availability\n     *\n     * @param mixed $qty quantity of this item (item qty x parent item qty)\n     * @param mixed $summaryQty quantity of this product\n     * @param mixed $origQty original qty of item (not multiplied on parent item qty)\n     * @return Varien_Object\n     *\/",508],["T_WHITESPACE","\n    ",518],["T_PUBLIC","public",519],["T_WHITESPACE"," ",519],["T_FUNCTION","function",519],["T_WHITESPACE"," ",519],["T_STRING","checkQuoteItemQty",519],"(",["T_VARIABLE","$qty",519],",",["T_WHITESPACE"," ",519],["T_VARIABLE","$summaryQty",519],",",["T_WHITESPACE"," ",519],["T_VARIABLE","$origQty",519],["T_WHITESPACE"," ",519],"=",["T_WHITESPACE"," ",519],["T_LNUMBER","0",519],")",["T_WHITESPACE","\n    ",519],"{",["T_WHITESPACE","\n        ",520],["T_VARIABLE","$result",521],["T_WHITESPACE"," ",521],"=",["T_WHITESPACE"," ",521],["T_NEW","new",521],["T_WHITESPACE"," ",521],["T_STRING","Varien_Object",521],"(",")",";",["T_WHITESPACE","\n        ",521],["T_VARIABLE","$result",522],["T_OBJECT_OPERATOR","->",522],["T_STRING","setHasError",522],"(",["T_STRING","false",522],")",";",["T_WHITESPACE","\n\n        ",522],["T_IF","if",524],["T_WHITESPACE"," ",524],"(","!",["T_STRING","is_numeric",524],"(",["T_VARIABLE","$qty",524],")",")",["T_WHITESPACE"," ",524],"{",["T_WHITESPACE","\n            ",524],["T_VARIABLE","$qty",525],["T_WHITESPACE"," ",525],"=",["T_WHITESPACE"," ",525],["T_STRING","Mage",525],["T_DOUBLE_COLON","::",525],["T_STRING","app",525],"(",")",["T_OBJECT_OPERATOR","->",525],["T_STRING","getLocale",525],"(",")",["T_OBJECT_OPERATOR","->",525],["T_STRING","getNumber",525],"(",["T_VARIABLE","$qty",525],")",";",["T_WHITESPACE","\n        ",525],"}",["T_WHITESPACE","\n\n        ",526],["T_DOC_COMMENT","\/**\n         * Check if child product assigned to parent\n         *\/",528],["T_WHITESPACE","\n        ",530],["T_VARIABLE","$parentItem",531],["T_WHITESPACE"," ",531],"=",["T_WHITESPACE"," ",531],["T_VARIABLE","$this",531],["T_OBJECT_OPERATOR","->",531],["T_STRING","getParentItem",531],"(",")",";",["T_WHITESPACE","\n        ",531],["T_IF","if",532],["T_WHITESPACE"," ",532],"(",["T_VARIABLE","$this",532],["T_OBJECT_OPERATOR","->",532],["T_STRING","getIsChildItem",532],"(",")",["T_WHITESPACE"," ",532],["T_BOOLEAN_AND","&&",532],["T_WHITESPACE"," ",532],"!",["T_EMPTY","empty",532],"(",["T_VARIABLE","$parentItem",532],")",")",["T_WHITESPACE"," ",532],"{",["T_WHITESPACE","\n            ",532],["T_VARIABLE","$typeInstance",533],["T_WHITESPACE"," ",533],"=",["T_WHITESPACE"," ",533],["T_VARIABLE","$parentItem",533],["T_OBJECT_OPERATOR","->",533],["T_STRING","getProduct",533],"(",")",["T_OBJECT_OPERATOR","->",533],["T_STRING","getTypeInstance",533],"(",["T_STRING","true",533],")",";",["T_WHITESPACE","\n            ",533],["T_VARIABLE","$requiredChildrenIds",534],["T_WHITESPACE"," ",534],"=",["T_WHITESPACE"," ",534],["T_VARIABLE","$typeInstance",534],["T_OBJECT_OPERATOR","->",534],["T_STRING","getChildrenIds",534],"(",["T_VARIABLE","$parentItem",534],["T_OBJECT_OPERATOR","->",534],["T_STRING","getProductId",534],"(",")",",",["T_WHITESPACE"," ",534],["T_STRING","true",534],")",";",["T_WHITESPACE","\n            ",534],["T_VARIABLE","$childrenIds",535],["T_WHITESPACE"," ",535],"=",["T_WHITESPACE"," ",535],["T_ARRAY","array",535],"(",")",";",["T_WHITESPACE","\n            ",535],["T_FOREACH","foreach",536],["T_WHITESPACE"," ",536],"(",["T_VARIABLE","$requiredChildrenIds",536],["T_WHITESPACE"," ",536],["T_AS","as",536],["T_WHITESPACE"," ",536],["T_VARIABLE","$groupedChildrenIds",536],")",["T_WHITESPACE"," ",536],"{",["T_WHITESPACE","\n                ",536],["T_VARIABLE","$childrenIds",537],["T_WHITESPACE"," ",537],"=",["T_WHITESPACE"," ",537],["T_STRING","array_merge",537],"(",["T_VARIABLE","$childrenIds",537],",",["T_WHITESPACE"," ",537],["T_VARIABLE","$groupedChildrenIds",537],")",";",["T_WHITESPACE","\n            ",537],"}",["T_WHITESPACE","\n            ",538],["T_IF","if",539],["T_WHITESPACE"," ",539],"(","!",["T_STRING","in_array",539],"(",["T_VARIABLE","$this",539],["T_OBJECT_OPERATOR","->",539],["T_STRING","getProductId",539],"(",")",",",["T_WHITESPACE"," ",539],["T_VARIABLE","$childrenIds",539],")",")",["T_WHITESPACE"," ",539],"{",["T_WHITESPACE","\n                ",539],["T_VARIABLE","$result",540],["T_OBJECT_OPERATOR","->",540],["T_STRING","setHasError",540],"(",["T_STRING","true",540],")",["T_WHITESPACE","\n                    ",540],["T_OBJECT_OPERATOR","->",541],["T_STRING","setMessage",541],"(",["T_STRING","Mage",541],["T_DOUBLE_COLON","::",541],["T_STRING","helper",541],"(",["T_CONSTANT_ENCAPSED_STRING","'cataloginventory'",541],")",["T_WHITESPACE","\n                        ",541],["T_OBJECT_OPERATOR","->",542],["T_STRING","__",542],"(",["T_CONSTANT_ENCAPSED_STRING","'This product with current option is not available'",542],")",")",["T_WHITESPACE","\n                    ",542],["T_OBJECT_OPERATOR","->",543],["T_STRING","setQuoteMessage",543],"(",["T_STRING","Mage",543],["T_DOUBLE_COLON","::",543],["T_STRING","helper",543],"(",["T_CONSTANT_ENCAPSED_STRING","'cataloginventory'",543],")",["T_OBJECT_OPERATOR","->",543],["T_STRING","__",543],"(",["T_CONSTANT_ENCAPSED_STRING","'Some of the products are not available'",543],")",")",["T_WHITESPACE","\n                    ",543],["T_OBJECT_OPERATOR","->",544],["T_STRING","setQuoteMessageIndex",544],"(",["T_CONSTANT_ENCAPSED_STRING","'stock'",544],")",";",["T_WHITESPACE","\n                ",544],["T_RETURN","return",545],["T_WHITESPACE"," ",545],["T_VARIABLE","$result",545],";",["T_WHITESPACE","\n            ",545],"}",["T_WHITESPACE","\n        ",546],"}",["T_WHITESPACE","\n\n        ",547],["T_DOC_COMMENT","\/**\n         * Check quantity type\n         *\/",549],["T_WHITESPACE","\n        ",551],["T_VARIABLE","$result",552],["T_OBJECT_OPERATOR","->",552],["T_STRING","setItemIsQtyDecimal",552],"(",["T_VARIABLE","$this",552],["T_OBJECT_OPERATOR","->",552],["T_STRING","getIsQtyDecimal",552],"(",")",")",";",["T_WHITESPACE","\n\n        ",552],["T_IF","if",554],["T_WHITESPACE"," ",554],"(","!",["T_VARIABLE","$this",554],["T_OBJECT_OPERATOR","->",554],["T_STRING","getIsQtyDecimal",554],"(",")",")",["T_WHITESPACE"," ",554],"{",["T_WHITESPACE","\n            ",554],["T_VARIABLE","$result",555],["T_OBJECT_OPERATOR","->",555],["T_STRING","setHasQtyOptionUpdate",555],"(",["T_STRING","true",555],")",";",["T_WHITESPACE","\n            ",555],["T_VARIABLE","$qty",556],["T_WHITESPACE"," ",556],"=",["T_WHITESPACE"," ",556],["T_STRING","intval",556],"(",["T_VARIABLE","$qty",556],")",";",["T_WHITESPACE","\n\n            ",556],["T_DOC_COMMENT","\/**\n              * Adding stock data to quote item\n              *\/",558],["T_WHITESPACE","\n            ",560],["T_VARIABLE","$result",561],["T_OBJECT_OPERATOR","->",561],["T_STRING","setItemQty",561],"(",["T_VARIABLE","$qty",561],")",";",["T_WHITESPACE","\n\n            ",561],["T_IF","if",563],["T_WHITESPACE"," ",563],"(","!",["T_STRING","is_numeric",563],"(",["T_VARIABLE","$qty",563],")",")",["T_WHITESPACE"," ",563],"{",["T_WHITESPACE","\n                ",563],["T_VARIABLE","$qty",564],["T_WHITESPACE"," ",564],"=",["T_WHITESPACE"," ",564],["T_STRING","Mage",564],["T_DOUBLE_COLON","::",564],["T_STRING","app",564],"(",")",["T_OBJECT_OPERATOR","->",564],["T_STRING","getLocale",564],"(",")",["T_OBJECT_OPERATOR","->",564],["T_STRING","getNumber",564],"(",["T_VARIABLE","$qty",564],")",";",["T_WHITESPACE","\n            ",564],"}",["T_WHITESPACE","\n            ",565],["T_VARIABLE","$origQty",566],["T_WHITESPACE"," ",566],"=",["T_WHITESPACE"," ",566],["T_STRING","intval",566],"(",["T_VARIABLE","$origQty",566],")",";",["T_WHITESPACE","\n            ",566],["T_VARIABLE","$result",567],["T_OBJECT_OPERATOR","->",567],["T_STRING","setOrigQty",567],"(",["T_VARIABLE","$origQty",567],")",";",["T_WHITESPACE","\n        ",567],"}",["T_WHITESPACE","\n\n        ",568],["T_IF","if",570],["T_WHITESPACE"," ",570],"(",["T_VARIABLE","$this",570],["T_OBJECT_OPERATOR","->",570],["T_STRING","getMinSaleQty",570],"(",")",["T_WHITESPACE"," ",570],["T_BOOLEAN_AND","&&",570],["T_WHITESPACE"," ",570],["T_VARIABLE","$qty",570],["T_WHITESPACE"," ",570],"<",["T_WHITESPACE"," ",570],["T_VARIABLE","$this",570],["T_OBJECT_OPERATOR","->",570],["T_STRING","getMinSaleQty",570],"(",")",")",["T_WHITESPACE"," ",570],"{",["T_WHITESPACE","\n            ",570],["T_VARIABLE","$result",571],["T_OBJECT_OPERATOR","->",571],["T_STRING","setHasError",571],"(",["T_STRING","true",571],")",["T_WHITESPACE","\n                ",571],["T_OBJECT_OPERATOR","->",572],["T_STRING","setMessage",572],"(",["T_WHITESPACE","\n                    ",572],["T_STRING","Mage",573],["T_DOUBLE_COLON","::",573],["T_STRING","helper",573],"(",["T_CONSTANT_ENCAPSED_STRING","'cataloginventory'",573],")",["T_OBJECT_OPERATOR","->",573],["T_STRING","__",573],"(",["T_CONSTANT_ENCAPSED_STRING","'The minimum quantity allowed for purchase is %s.'",573],",",["T_WHITESPACE"," ",573],["T_VARIABLE","$this",573],["T_OBJECT_OPERATOR","->",573],["T_STRING","getMinSaleQty",573],"(",")",["T_WHITESPACE"," ",573],"*",["T_WHITESPACE"," ",573],["T_LNUMBER","1",573],")",["T_WHITESPACE","\n                ",573],")",["T_WHITESPACE","\n                ",574],["T_OBJECT_OPERATOR","->",575],["T_STRING","setErrorCode",575],"(",["T_CONSTANT_ENCAPSED_STRING","'qty_min'",575],")",["T_WHITESPACE","\n                ",575],["T_OBJECT_OPERATOR","->",576],["T_STRING","setQuoteMessage",576],"(",["T_STRING","Mage",576],["T_DOUBLE_COLON","::",576],["T_STRING","helper",576],"(",["T_CONSTANT_ENCAPSED_STRING","'cataloginventory'",576],")",["T_OBJECT_OPERATOR","->",576],["T_STRING","__",576],"(",["T_CONSTANT_ENCAPSED_STRING","'Some of the products cannot be ordered in requested quantity.'",576],")",")",["T_WHITESPACE","\n                ",576],["T_OBJECT_OPERATOR","->",577],["T_STRING","setQuoteMessageIndex",577],"(",["T_CONSTANT_ENCAPSED_STRING","'qty'",577],")",";",["T_WHITESPACE","\n            ",577],["T_RETURN","return",578],["T_WHITESPACE"," ",578],["T_VARIABLE","$result",578],";",["T_WHITESPACE","\n        ",578],"}",["T_WHITESPACE","\n\n        ",579],["T_IF","if",581],["T_WHITESPACE"," ",581],"(",["T_VARIABLE","$this",581],["T_OBJECT_OPERATOR","->",581],["T_STRING","getMaxSaleQty",581],"(",")",["T_WHITESPACE"," ",581],["T_BOOLEAN_AND","&&",581],["T_WHITESPACE"," ",581],["T_VARIABLE","$qty",581],["T_WHITESPACE"," ",581],">",["T_WHITESPACE"," ",581],["T_VARIABLE","$this",581],["T_OBJECT_OPERATOR","->",581],["T_STRING","getMaxSaleQty",581],"(",")",")",["T_WHITESPACE"," ",581],"{",["T_WHITESPACE","\n            ",581],["T_VARIABLE","$result",582],["T_OBJECT_OPERATOR","->",582],["T_STRING","setHasError",582],"(",["T_STRING","true",582],")",["T_WHITESPACE","\n                ",582],["T_OBJECT_OPERATOR","->",583],["T_STRING","setMessage",583],"(",["T_WHITESPACE","\n                    ",583],["T_STRING","Mage",584],["T_DOUBLE_COLON","::",584],["T_STRING","helper",584],"(",["T_CONSTANT_ENCAPSED_STRING","'cataloginventory'",584],")",["T_OBJECT_OPERATOR","->",584],["T_STRING","__",584],"(",["T_CONSTANT_ENCAPSED_STRING","'The maximum quantity allowed for purchase is %s.'",584],",",["T_WHITESPACE"," ",584],["T_VARIABLE","$this",584],["T_OBJECT_OPERATOR","->",584],["T_STRING","getMaxSaleQty",584],"(",")",["T_WHITESPACE"," ",584],"*",["T_WHITESPACE"," ",584],["T_LNUMBER","1",584],")",["T_WHITESPACE","\n                ",584],")",["T_WHITESPACE","\n                ",585],["T_OBJECT_OPERATOR","->",586],["T_STRING","setErrorCode",586],"(",["T_CONSTANT_ENCAPSED_STRING","'qty_max'",586],")",["T_WHITESPACE","\n                ",586],["T_OBJECT_OPERATOR","->",587],["T_STRING","setQuoteMessage",587],"(",["T_STRING","Mage",587],["T_DOUBLE_COLON","::",587],["T_STRING","helper",587],"(",["T_CONSTANT_ENCAPSED_STRING","'cataloginventory'",587],")",["T_OBJECT_OPERATOR","->",587],["T_STRING","__",587],"(",["T_CONSTANT_ENCAPSED_STRING","'Some of the products cannot be ordered in requested quantity.'",587],")",")",["T_WHITESPACE","\n                ",587],["T_OBJECT_OPERATOR","->",588],["T_STRING","setQuoteMessageIndex",588],"(",["T_CONSTANT_ENCAPSED_STRING","'qty'",588],")",";",["T_WHITESPACE","\n            ",588],["T_RETURN","return",589],["T_WHITESPACE"," ",589],["T_VARIABLE","$result",589],";",["T_WHITESPACE","\n        ",589],"}",["T_WHITESPACE","\n\n        ",590],["T_VARIABLE","$result",592],["T_OBJECT_OPERATOR","->",592],["T_STRING","addData",592],"(",["T_VARIABLE","$this",592],["T_OBJECT_OPERATOR","->",592],["T_STRING","checkQtyIncrements",592],"(",["T_VARIABLE","$qty",592],")",["T_OBJECT_OPERATOR","->",592],["T_STRING","getData",592],"(",")",")",";",["T_WHITESPACE","\n        ",592],["T_IF","if",593],["T_WHITESPACE"," ",593],"(",["T_VARIABLE","$result",593],["T_OBJECT_OPERATOR","->",593],["T_STRING","getHasError",593],"(",")",")",["T_WHITESPACE"," ",593],"{",["T_WHITESPACE","\n            ",593],["T_RETURN","return",594],["T_WHITESPACE"," ",594],["T_VARIABLE","$result",594],";",["T_WHITESPACE","\n        ",594],"}",["T_WHITESPACE","\n\n        ",595],["T_IF","if",597],["T_WHITESPACE"," ",597],"(","!",["T_VARIABLE","$this",597],["T_OBJECT_OPERATOR","->",597],["T_STRING","getManageStock",597],"(",")",")",["T_WHITESPACE"," ",597],"{",["T_WHITESPACE","\n            ",597],["T_RETURN","return",598],["T_WHITESPACE"," ",598],["T_VARIABLE","$result",598],";",["T_WHITESPACE","\n        ",598],"}",["T_WHITESPACE","\n\n        ",599],["T_IF","if",601],["T_WHITESPACE"," ",601],"(","!",["T_VARIABLE","$this",601],["T_OBJECT_OPERATOR","->",601],["T_STRING","getIsInStock",601],"(",")",")",["T_WHITESPACE"," ",601],"{",["T_WHITESPACE","\n            ",601],["T_VARIABLE","$result",602],["T_OBJECT_OPERATOR","->",602],["T_STRING","setHasError",602],"(",["T_STRING","true",602],")",["T_WHITESPACE","\n                ",602],["T_OBJECT_OPERATOR","->",603],["T_STRING","setMessage",603],"(",["T_STRING","Mage",603],["T_DOUBLE_COLON","::",603],["T_STRING","helper",603],"(",["T_CONSTANT_ENCAPSED_STRING","'cataloginventory'",603],")",["T_OBJECT_OPERATOR","->",603],["T_STRING","__",603],"(",["T_CONSTANT_ENCAPSED_STRING","'This product is currently out of stock.'",603],")",")",["T_WHITESPACE","\n                ",603],["T_OBJECT_OPERATOR","->",604],["T_STRING","setQuoteMessage",604],"(",["T_STRING","Mage",604],["T_DOUBLE_COLON","::",604],["T_STRING","helper",604],"(",["T_CONSTANT_ENCAPSED_STRING","'cataloginventory'",604],")",["T_OBJECT_OPERATOR","->",604],["T_STRING","__",604],"(",["T_CONSTANT_ENCAPSED_STRING","'Some of the products are currently out of stock.'",604],")",")",["T_WHITESPACE","\n                ",604],["T_OBJECT_OPERATOR","->",605],["T_STRING","setQuoteMessageIndex",605],"(",["T_CONSTANT_ENCAPSED_STRING","'stock'",605],")",";",["T_WHITESPACE","\n            ",605],["T_VARIABLE","$result",606],["T_OBJECT_OPERATOR","->",606],["T_STRING","setItemUseOldQty",606],"(",["T_STRING","true",606],")",";",["T_WHITESPACE","\n            ",606],["T_RETURN","return",607],["T_WHITESPACE"," ",607],["T_VARIABLE","$result",607],";",["T_WHITESPACE","\n        ",607],"}",["T_WHITESPACE","\n\n        ",608],["T_IF","if",610],["T_WHITESPACE"," ",610],"(","!",["T_VARIABLE","$this",610],["T_OBJECT_OPERATOR","->",610],["T_STRING","checkQty",610],"(",["T_VARIABLE","$summaryQty",610],")",["T_WHITESPACE"," ",610],["T_BOOLEAN_OR","||",610],["T_WHITESPACE"," ",610],"!",["T_VARIABLE","$this",610],["T_OBJECT_OPERATOR","->",610],["T_STRING","checkQty",610],"(",["T_VARIABLE","$qty",610],")",")",["T_WHITESPACE"," ",610],"{",["T_WHITESPACE","\n            ",610],["T_VARIABLE","$message",611],["T_WHITESPACE"," ",611],"=",["T_WHITESPACE"," ",611],["T_STRING","Mage",611],["T_DOUBLE_COLON","::",611],["T_STRING","helper",611],"(",["T_CONSTANT_ENCAPSED_STRING","'cataloginventory'",611],")",["T_OBJECT_OPERATOR","->",611],["T_STRING","__",611],"(",["T_CONSTANT_ENCAPSED_STRING","'The requested quantity for \"%s\" is not available.'",611],",",["T_WHITESPACE"," ",611],["T_VARIABLE","$this",611],["T_OBJECT_OPERATOR","->",611],["T_STRING","getProductName",611],"(",")",")",";",["T_WHITESPACE","\n            ",611],["T_VARIABLE","$result",612],["T_OBJECT_OPERATOR","->",612],["T_STRING","setHasError",612],"(",["T_STRING","true",612],")",["T_WHITESPACE","\n                ",612],["T_OBJECT_OPERATOR","->",613],["T_STRING","setMessage",613],"(",["T_VARIABLE","$message",613],")",["T_WHITESPACE","\n                ",613],["T_OBJECT_OPERATOR","->",614],["T_STRING","setQuoteMessage",614],"(",["T_VARIABLE","$message",614],")",["T_WHITESPACE","\n                ",614],["T_OBJECT_OPERATOR","->",615],["T_STRING","setQuoteMessageIndex",615],"(",["T_CONSTANT_ENCAPSED_STRING","'qty'",615],")",";",["T_WHITESPACE","\n            ",615],["T_RETURN","return",616],["T_WHITESPACE"," ",616],["T_VARIABLE","$result",616],";",["T_WHITESPACE","\n        ",616],"}",["T_WHITESPACE"," ",617],["T_ELSE","else",617],["T_WHITESPACE"," ",617],"{",["T_WHITESPACE","\n            ",617],["T_IF","if",618],["T_WHITESPACE"," ",618],"(","(",["T_VARIABLE","$this",618],["T_OBJECT_OPERATOR","->",618],["T_STRING","getQty",618],"(",")",["T_WHITESPACE"," ",618],"-",["T_WHITESPACE"," ",618],["T_VARIABLE","$summaryQty",618],")",["T_WHITESPACE"," ",618],"<",["T_WHITESPACE"," ",618],["T_LNUMBER","0",618],")",["T_WHITESPACE"," ",618],"{",["T_WHITESPACE","\n                ",618],["T_IF","if",619],["T_WHITESPACE"," ",619],"(",["T_VARIABLE","$this",619],["T_OBJECT_OPERATOR","->",619],["T_STRING","getProductName",619],"(",")",")",["T_WHITESPACE"," ",619],"{",["T_WHITESPACE","\n                    ",619],["T_IF","if",620],["T_WHITESPACE"," ",620],"(",["T_VARIABLE","$this",620],["T_OBJECT_OPERATOR","->",620],["T_STRING","getIsChildItem",620],"(",")",")",["T_WHITESPACE"," ",620],"{",["T_WHITESPACE","\n                        ",620],["T_VARIABLE","$backorderQty",621],["T_WHITESPACE"," ",621],"=",["T_WHITESPACE"," ",621],"(",["T_VARIABLE","$this",621],["T_OBJECT_OPERATOR","->",621],["T_STRING","getQty",621],"(",")",["T_WHITESPACE"," ",621],">",["T_WHITESPACE"," ",621],["T_LNUMBER","0",621],")",["T_WHITESPACE"," ",621],"?",["T_WHITESPACE"," ",621],"(",["T_VARIABLE","$summaryQty",621],["T_WHITESPACE"," ",621],"-",["T_WHITESPACE"," ",621],["T_VARIABLE","$this",621],["T_OBJECT_OPERATOR","->",621],["T_STRING","getQty",621],"(",")",")",["T_WHITESPACE"," ",621],"*",["T_WHITESPACE"," ",621],["T_LNUMBER","1",621],["T_WHITESPACE"," ",621],":",["T_WHITESPACE"," ",621],["T_VARIABLE","$qty",621],["T_WHITESPACE"," ",621],"*",["T_WHITESPACE"," ",621],["T_LNUMBER","1",621],";",["T_WHITESPACE","\n                        ",621],["T_IF","if",622],["T_WHITESPACE"," ",622],"(",["T_VARIABLE","$backorderQty",622],["T_WHITESPACE"," ",622],">",["T_WHITESPACE"," ",622],["T_VARIABLE","$qty",622],")",["T_WHITESPACE"," ",622],"{",["T_WHITESPACE","\n                            ",622],["T_VARIABLE","$backorderQty",623],["T_WHITESPACE"," ",623],"=",["T_WHITESPACE"," ",623],["T_VARIABLE","$qty",623],";",["T_WHITESPACE","\n                        ",623],"}",["T_WHITESPACE","\n\n                        ",624],["T_VARIABLE","$result",626],["T_OBJECT_OPERATOR","->",626],["T_STRING","setItemBackorders",626],"(",["T_VARIABLE","$backorderQty",626],")",";",["T_WHITESPACE","\n                    ",626],"}",["T_WHITESPACE"," ",627],["T_ELSE","else",627],["T_WHITESPACE"," ",627],"{",["T_WHITESPACE","\n                        ",627],["T_VARIABLE","$orderedItems",628],["T_WHITESPACE"," ",628],"=",["T_WHITESPACE"," ",628],["T_VARIABLE","$this",628],["T_OBJECT_OPERATOR","->",628],["T_STRING","getOrderedItems",628],"(",")",";",["T_WHITESPACE","\n                        ",628],["T_VARIABLE","$itemsLeft",629],["T_WHITESPACE"," ",629],"=",["T_WHITESPACE"," ",629],"(",["T_VARIABLE","$this",629],["T_OBJECT_OPERATOR","->",629],["T_STRING","getQty",629],"(",")",["T_WHITESPACE"," ",629],">",["T_WHITESPACE"," ",629],["T_VARIABLE","$orderedItems",629],")",["T_WHITESPACE"," ",629],"?",["T_WHITESPACE"," ",629],"(",["T_VARIABLE","$this",629],["T_OBJECT_OPERATOR","->",629],["T_STRING","getQty",629],"(",")",["T_WHITESPACE"," ",629],"-",["T_WHITESPACE"," ",629],["T_VARIABLE","$orderedItems",629],")",["T_WHITESPACE"," ",629],"*",["T_WHITESPACE"," ",629],["T_LNUMBER","1",629],["T_WHITESPACE"," ",629],":",["T_WHITESPACE"," ",629],["T_LNUMBER","0",629],";",["T_WHITESPACE","\n                        ",629],["T_VARIABLE","$backorderQty",630],["T_WHITESPACE"," ",630],"=",["T_WHITESPACE"," ",630],"(",["T_VARIABLE","$itemsLeft",630],["T_WHITESPACE"," ",630],">",["T_WHITESPACE"," ",630],["T_LNUMBER","0",630],")",["T_WHITESPACE"," ",630],"?",["T_WHITESPACE"," ",630],"(",["T_VARIABLE","$qty",630],["T_WHITESPACE"," ",630],"-",["T_WHITESPACE"," ",630],["T_VARIABLE","$itemsLeft",630],")",["T_WHITESPACE"," ",630],"*",["T_WHITESPACE"," ",630],["T_LNUMBER","1",630],["T_WHITESPACE"," ",630],":",["T_WHITESPACE"," ",630],["T_VARIABLE","$qty",630],["T_WHITESPACE"," ",630],"*",["T_WHITESPACE"," ",630],["T_LNUMBER","1",630],";",["T_WHITESPACE","\n\n                        ",630],["T_IF","if",632],["T_WHITESPACE"," ",632],"(",["T_VARIABLE","$backorderQty",632],["T_WHITESPACE"," ",632],">",["T_WHITESPACE"," ",632],["T_LNUMBER","0",632],")",["T_WHITESPACE"," ",632],"{",["T_WHITESPACE","\n                            ",632],["T_VARIABLE","$result",633],["T_OBJECT_OPERATOR","->",633],["T_STRING","setItemBackorders",633],"(",["T_VARIABLE","$backorderQty",633],")",";",["T_WHITESPACE","\n                        ",633],"}",["T_WHITESPACE","\n                        ",634],["T_VARIABLE","$this",635],["T_OBJECT_OPERATOR","->",635],["T_STRING","setOrderedItems",635],"(",["T_VARIABLE","$orderedItems",635],["T_WHITESPACE"," ",635],"+",["T_WHITESPACE"," ",635],["T_VARIABLE","$qty",635],")",";",["T_WHITESPACE","\n                    ",635],"}",["T_WHITESPACE","\n\n                    ",636],["T_IF","if",638],["T_WHITESPACE"," ",638],"(",["T_VARIABLE","$this",638],["T_OBJECT_OPERATOR","->",638],["T_STRING","getBackorders",638],"(",")",["T_WHITESPACE"," ",638],["T_IS_EQUAL","==",638],["T_WHITESPACE"," ",638],["T_STRING","Mage_CatalogInventory_Model_Stock",638],["T_DOUBLE_COLON","::",638],["T_STRING","BACKORDERS_YES_NOTIFY",638],")",["T_WHITESPACE"," ",638],"{",["T_WHITESPACE","\n                        ",638],["T_IF","if",639],["T_WHITESPACE"," ",639],"(","!",["T_VARIABLE","$this",639],["T_OBJECT_OPERATOR","->",639],["T_STRING","getIsChildItem",639],"(",")",")",["T_WHITESPACE"," ",639],"{",["T_WHITESPACE","\n                            ",639],["T_VARIABLE","$result",640],["T_OBJECT_OPERATOR","->",640],["T_STRING","setMessage",640],"(",["T_WHITESPACE","\n                                ",640],["T_STRING","Mage",641],["T_DOUBLE_COLON","::",641],["T_STRING","helper",641],"(",["T_CONSTANT_ENCAPSED_STRING","'cataloginventory'",641],")",["T_OBJECT_OPERATOR","->",641],["T_STRING","__",641],"(",["T_CONSTANT_ENCAPSED_STRING","'This product is not available in the requested quantity. %s of the items will be backordered.'",641],",",["T_WHITESPACE"," ",641],"(",["T_VARIABLE","$backorderQty",641],["T_WHITESPACE"," ",641],"*",["T_WHITESPACE"," ",641],["T_LNUMBER","1",641],")",")",["T_WHITESPACE","\n                            ",641],")",";",["T_WHITESPACE","\n                        ",642],"}",["T_WHITESPACE"," ",643],["T_ELSE","else",643],["T_WHITESPACE"," ",643],"{",["T_WHITESPACE","\n                            ",643],["T_VARIABLE","$result",644],["T_OBJECT_OPERATOR","->",644],["T_STRING","setMessage",644],"(",["T_WHITESPACE","\n                                ",644],["T_STRING","Mage",645],["T_DOUBLE_COLON","::",645],["T_STRING","helper",645],"(",["T_CONSTANT_ENCAPSED_STRING","'cataloginventory'",645],")",["T_OBJECT_OPERATOR","->",645],["T_STRING","__",645],"(",["T_CONSTANT_ENCAPSED_STRING","'\"%s\" is not available in the requested quantity. %s of the items will be backordered.'",645],",",["T_WHITESPACE"," ",645],["T_VARIABLE","$this",645],["T_OBJECT_OPERATOR","->",645],["T_STRING","getProductName",645],"(",")",",",["T_WHITESPACE"," ",645],"(",["T_VARIABLE","$backorderQty",645],["T_WHITESPACE"," ",645],"*",["T_WHITESPACE"," ",645],["T_LNUMBER","1",645],")",")",["T_WHITESPACE","\n                            ",645],")",";",["T_WHITESPACE","\n                        ",646],"}",["T_WHITESPACE","\n                    ",647],"}",["T_WHITESPACE"," ",648],["T_ELSEIF","elseif",648],["T_WHITESPACE"," ",648],"(",["T_STRING","Mage",648],["T_DOUBLE_COLON","::",648],["T_STRING","app",648],"(",")",["T_OBJECT_OPERATOR","->",648],["T_STRING","getStore",648],"(",")",["T_OBJECT_OPERATOR","->",648],["T_STRING","isAdmin",648],"(",")",")",["T_WHITESPACE"," ",648],"{",["T_WHITESPACE","\n                        ",648],["T_VARIABLE","$result",649],["T_OBJECT_OPERATOR","->",649],["T_STRING","setMessage",649],"(",["T_WHITESPACE","\n                            ",649],["T_STRING","Mage",650],["T_DOUBLE_COLON","::",650],["T_STRING","helper",650],"(",["T_CONSTANT_ENCAPSED_STRING","'cataloginventory'",650],")",["T_OBJECT_OPERATOR","->",650],["T_STRING","__",650],"(",["T_CONSTANT_ENCAPSED_STRING","'The requested quantity for \"%s\" is not available.'",650],",",["T_WHITESPACE"," ",650],["T_VARIABLE","$this",650],["T_OBJECT_OPERATOR","->",650],["T_STRING","getProductName",650],"(",")",")",["T_WHITESPACE","\n                        ",650],")",";",["T_WHITESPACE","\n                    ",651],"}",["T_WHITESPACE","\n                ",652],"}",["T_WHITESPACE","\n            ",653],"}",["T_WHITESPACE"," ",654],["T_ELSE","else",654],["T_WHITESPACE"," ",654],"{",["T_WHITESPACE","\n                ",654],["T_IF","if",655],["T_WHITESPACE"," ",655],"(","!",["T_VARIABLE","$this",655],["T_OBJECT_OPERATOR","->",655],["T_STRING","getIsChildItem",655],"(",")",")",["T_WHITESPACE"," ",655],"{",["T_WHITESPACE","\n                    ",655],["T_VARIABLE","$this",656],["T_OBJECT_OPERATOR","->",656],["T_STRING","setOrderedItems",656],"(",["T_VARIABLE","$qty",656],["T_WHITESPACE"," ",656],"+",["T_WHITESPACE"," ",656],["T_INT_CAST","(int)",656],["T_VARIABLE","$this",656],["T_OBJECT_OPERATOR","->",656],["T_STRING","getOrderedItems",656],"(",")",")",";",["T_WHITESPACE","\n                ",656],"}",["T_WHITESPACE","\n            ",657],"}",["T_WHITESPACE","\n        ",658],"}",["T_WHITESPACE","\n\n        ",659],["T_RETURN","return",661],["T_WHITESPACE"," ",661],["T_VARIABLE","$result",661],";",["T_WHITESPACE","\n    ",661],"}",["T_WHITESPACE","\n\n    ",662],["T_DOC_COMMENT","\/**\n     * Check qty increments\n     *\n     * @param int|float $qty\n     * @return Varien_Object\n     *\/",664],["T_WHITESPACE","\n    ",669],["T_PUBLIC","public",670],["T_WHITESPACE"," ",670],["T_FUNCTION","function",670],["T_WHITESPACE"," ",670],["T_STRING","checkQtyIncrements",670],"(",["T_VARIABLE","$qty",670],")",["T_WHITESPACE","\n    ",670],"{",["T_WHITESPACE","\n        ",671],["T_VARIABLE","$result",672],["T_WHITESPACE"," ",672],"=",["T_WHITESPACE"," ",672],["T_NEW","new",672],["T_WHITESPACE"," ",672],["T_STRING","Varien_Object",672],"(",")",";",["T_WHITESPACE","\n        ",672],["T_IF","if",673],["T_WHITESPACE"," ",673],"(",["T_VARIABLE","$this",673],["T_OBJECT_OPERATOR","->",673],["T_STRING","getSuppressCheckQtyIncrements",673],"(",")",")",["T_WHITESPACE"," ",673],"{",["T_WHITESPACE","\n            ",673],["T_RETURN","return",674],["T_WHITESPACE"," ",674],["T_VARIABLE","$result",674],";",["T_WHITESPACE","\n        ",674],"}",["T_WHITESPACE","\n\n        ",675],["T_VARIABLE","$qtyIncrements",677],["T_WHITESPACE"," ",677],"=",["T_WHITESPACE"," ",677],["T_VARIABLE","$this",677],["T_OBJECT_OPERATOR","->",677],["T_STRING","getQtyIncrements",677],"(",")",";",["T_WHITESPACE","\n        ",677],["T_IF","if",678],["T_WHITESPACE"," ",678],"(",["T_VARIABLE","$qtyIncrements",678],["T_WHITESPACE"," ",678],["T_BOOLEAN_AND","&&",678],["T_WHITESPACE"," ",678],"(",["T_STRING","Mage",678],["T_DOUBLE_COLON","::",678],["T_STRING","helper",678],"(",["T_CONSTANT_ENCAPSED_STRING","'core'",678],")",["T_OBJECT_OPERATOR","->",678],["T_STRING","getExactDivision",678],"(",["T_VARIABLE","$qty",678],",",["T_WHITESPACE"," ",678],["T_VARIABLE","$qtyIncrements",678],")",["T_WHITESPACE"," ",678],["T_IS_NOT_EQUAL","!=",678],["T_WHITESPACE"," ",678],["T_LNUMBER","0",678],")",")",["T_WHITESPACE"," ",678],"{",["T_WHITESPACE","\n            ",678],["T_VARIABLE","$result",679],["T_OBJECT_OPERATOR","->",679],["T_STRING","setHasError",679],"(",["T_STRING","true",679],")",["T_WHITESPACE","\n                ",679],["T_OBJECT_OPERATOR","->",680],["T_STRING","setQuoteMessage",680],"(",["T_WHITESPACE","\n                    ",680],["T_STRING","Mage",681],["T_DOUBLE_COLON","::",681],["T_STRING","helper",681],"(",["T_CONSTANT_ENCAPSED_STRING","'cataloginventory'",681],")",["T_OBJECT_OPERATOR","->",681],["T_STRING","__",681],"(",["T_CONSTANT_ENCAPSED_STRING","'Some of the products cannot be ordered in the requested quantity.'",681],")",["T_WHITESPACE","\n                ",681],")",["T_WHITESPACE","\n                ",682],["T_OBJECT_OPERATOR","->",683],["T_STRING","setErrorCode",683],"(",["T_CONSTANT_ENCAPSED_STRING","'qty_increments'",683],")",["T_WHITESPACE","\n                ",683],["T_OBJECT_OPERATOR","->",684],["T_STRING","setQuoteMessageIndex",684],"(",["T_CONSTANT_ENCAPSED_STRING","'qty'",684],")",";",["T_WHITESPACE","\n            ",684],["T_IF","if",685],["T_WHITESPACE"," ",685],"(",["T_VARIABLE","$this",685],["T_OBJECT_OPERATOR","->",685],["T_STRING","getIsChildItem",685],"(",")",")",["T_WHITESPACE"," ",685],"{",["T_WHITESPACE","\n                ",685],["T_VARIABLE","$result",686],["T_OBJECT_OPERATOR","->",686],["T_STRING","setMessage",686],"(",["T_WHITESPACE","\n                    ",686],["T_STRING","Mage",687],["T_DOUBLE_COLON","::",687],["T_STRING","helper",687],"(",["T_CONSTANT_ENCAPSED_STRING","'cataloginventory'",687],")",["T_OBJECT_OPERATOR","->",687],["T_STRING","__",687],"(",["T_CONSTANT_ENCAPSED_STRING","'%s is available for purchase in increments of %s only.'",687],",",["T_VARIABLE","$this",687],["T_OBJECT_OPERATOR","->",687],["T_STRING","getProductName",687],"(",")",",",["T_WHITESPACE"," ",687],["T_VARIABLE","$qtyIncrements",687],["T_WHITESPACE"," ",687],"*",["T_WHITESPACE"," ",687],["T_LNUMBER","1",687],")",["T_WHITESPACE","\n                ",687],")",";",["T_WHITESPACE","\n            ",688],"}",["T_WHITESPACE"," ",689],["T_ELSE","else",689],["T_WHITESPACE"," ",689],"{",["T_WHITESPACE","\n                ",689],["T_VARIABLE","$result",690],["T_OBJECT_OPERATOR","->",690],["T_STRING","setMessage",690],"(",["T_WHITESPACE","\n                    ",690],["T_STRING","Mage",691],["T_DOUBLE_COLON","::",691],["T_STRING","helper",691],"(",["T_CONSTANT_ENCAPSED_STRING","'cataloginventory'",691],")",["T_OBJECT_OPERATOR","->",691],["T_STRING","__",691],"(",["T_CONSTANT_ENCAPSED_STRING","'This product is available for purchase in increments of %s only.'",691],",",["T_WHITESPACE"," ",691],["T_VARIABLE","$qtyIncrements",691],["T_WHITESPACE"," ",691],"*",["T_WHITESPACE"," ",691],["T_LNUMBER","1",691],")",["T_WHITESPACE","\n                ",691],")",";",["T_WHITESPACE","\n            ",692],"}",["T_WHITESPACE","\n        ",693],"}",["T_WHITESPACE","\n\n        ",694],["T_RETURN","return",696],["T_WHITESPACE"," ",696],["T_VARIABLE","$result",696],";",["T_WHITESPACE","\n    ",696],"}",["T_WHITESPACE","\n\n    ",697],["T_DOC_COMMENT","\/**\n     * Add join for catalog in stock field to product collection\n     *\n     * @param Mage_Catalog_Model_Entity_Product_Collection $productCollection\n     * @return Mage_CatalogInventory_Model_Stock_Item\n     *\/",699],["T_WHITESPACE","\n    ",704],["T_PUBLIC","public",705],["T_WHITESPACE"," ",705],["T_FUNCTION","function",705],["T_WHITESPACE"," ",705],["T_STRING","addCatalogInventoryToProductCollection",705],"(",["T_VARIABLE","$productCollection",705],")",["T_WHITESPACE","\n    ",705],"{",["T_WHITESPACE","\n        ",706],["T_VARIABLE","$this",707],["T_OBJECT_OPERATOR","->",707],["T_STRING","_getResource",707],"(",")",["T_OBJECT_OPERATOR","->",707],["T_STRING","addCatalogInventoryToProductCollection",707],"(",["T_VARIABLE","$productCollection",707],")",";",["T_WHITESPACE","\n        ",707],["T_RETURN","return",708],["T_WHITESPACE"," ",708],["T_VARIABLE","$this",708],";",["T_WHITESPACE","\n    ",708],"}",["T_WHITESPACE","\n\n    ",709],["T_DOC_COMMENT","\/**\n     * Add error to Quote Item\n     *\n     * @param Mage_Sales_Model_Quote_Item $item\n     * @param string $itemError\n     * @param string $quoteError\n     * @param string $errorIndex\n     * @return Mage_CatalogInventory_Model_Stock_Item\n     *\/",711],["T_WHITESPACE","\n    ",719],["T_PROTECTED","protected",720],["T_WHITESPACE"," ",720],["T_FUNCTION","function",720],["T_WHITESPACE"," ",720],["T_STRING","_addQuoteItemError",720],"(",["T_STRING","Mage_Sales_Model_Quote_Item",720],["T_WHITESPACE"," ",720],["T_VARIABLE","$item",720],",",["T_WHITESPACE"," ",720],["T_VARIABLE","$itemError",720],",",["T_WHITESPACE","\n        ",720],["T_VARIABLE","$quoteError",721],",",["T_WHITESPACE"," ",721],["T_VARIABLE","$errorIndex",721],"=",["T_CONSTANT_ENCAPSED_STRING","'error'",721],["T_WHITESPACE","\n    ",721],")",["T_WHITESPACE"," ",722],"{",["T_WHITESPACE","\n        ",722],["T_VARIABLE","$item",723],["T_OBJECT_OPERATOR","->",723],["T_STRING","setHasError",723],"(",["T_STRING","true",723],")",";",["T_WHITESPACE","\n        ",723],["T_VARIABLE","$item",724],["T_OBJECT_OPERATOR","->",724],["T_STRING","setMessage",724],"(",["T_VARIABLE","$itemError",724],")",";",["T_WHITESPACE","\n        ",724],["T_VARIABLE","$item",725],["T_OBJECT_OPERATOR","->",725],["T_STRING","setQuoteMessage",725],"(",["T_VARIABLE","$quoteError",725],")",";",["T_WHITESPACE","\n        ",725],["T_VARIABLE","$item",726],["T_OBJECT_OPERATOR","->",726],["T_STRING","setQuoteMessageIndex",726],"(",["T_VARIABLE","$errorIndex",726],")",";",["T_WHITESPACE","\n        ",726],["T_RETURN","return",727],["T_WHITESPACE"," ",727],["T_VARIABLE","$this",727],";",["T_WHITESPACE","\n    ",727],"}",["T_WHITESPACE","\n\n    ",728],["T_DOC_COMMENT","\/**\n     * Before save prepare process\n     *\n     * @return Mage_CatalogInventory_Model_Stock_Item\n     *\/",730],["T_WHITESPACE","\n    ",734],["T_PROTECTED","protected",735],["T_WHITESPACE"," ",735],["T_FUNCTION","function",735],["T_WHITESPACE"," ",735],["T_STRING","_beforeSave",735],"(",")",["T_WHITESPACE","\n    ",735],"{",["T_WHITESPACE","\n        ",736],["T_COMMENT","\/\/ see if quantity is defined for this item type\n",737],["T_WHITESPACE","        ",738],["T_VARIABLE","$typeId",738],["T_WHITESPACE"," ",738],"=",["T_WHITESPACE"," ",738],["T_VARIABLE","$this",738],["T_OBJECT_OPERATOR","->",738],["T_STRING","getTypeId",738],"(",")",";",["T_WHITESPACE","\n        ",738],["T_IF","if",739],["T_WHITESPACE"," ",739],"(",["T_VARIABLE","$productTypeId",739],["T_WHITESPACE"," ",739],"=",["T_WHITESPACE"," ",739],["T_VARIABLE","$this",739],["T_OBJECT_OPERATOR","->",739],["T_STRING","getProductTypeId",739],"(",")",")",["T_WHITESPACE"," ",739],"{",["T_WHITESPACE","\n            ",739],["T_VARIABLE","$typeId",740],["T_WHITESPACE"," ",740],"=",["T_WHITESPACE"," ",740],["T_VARIABLE","$productTypeId",740],";",["T_WHITESPACE","\n        ",740],"}",["T_WHITESPACE","\n\n        ",741],["T_VARIABLE","$isQty",743],["T_WHITESPACE"," ",743],"=",["T_WHITESPACE"," ",743],["T_STRING","Mage",743],["T_DOUBLE_COLON","::",743],["T_STRING","helper",743],"(",["T_CONSTANT_ENCAPSED_STRING","'catalogInventory'",743],")",["T_OBJECT_OPERATOR","->",743],["T_STRING","isQty",743],"(",["T_VARIABLE","$typeId",743],")",";",["T_WHITESPACE","\n\n        ",743],["T_IF","if",745],["T_WHITESPACE"," ",745],"(",["T_VARIABLE","$isQty",745],")",["T_WHITESPACE"," ",745],"{",["T_WHITESPACE","\n            ",745],["T_IF","if",746],["T_WHITESPACE"," ",746],"(","!",["T_VARIABLE","$this",746],["T_OBJECT_OPERATOR","->",746],["T_STRING","verifyStock",746],"(",")",")",["T_WHITESPACE"," ",746],"{",["T_WHITESPACE","\n                ",746],["T_VARIABLE","$this",747],["T_OBJECT_OPERATOR","->",747],["T_STRING","setIsInStock",747],"(",["T_STRING","false",747],")",["T_WHITESPACE","\n                    ",747],["T_OBJECT_OPERATOR","->",748],["T_STRING","setStockStatusChangedAutomaticallyFlag",748],"(",["T_STRING","true",748],")",";",["T_WHITESPACE","\n            ",748],"}",["T_WHITESPACE","\n\n            ",749],["T_COMMENT","\/\/ if qty is below notify qty, update the low stock date to today date otherwise set null\n",751],["T_WHITESPACE","            ",752],["T_VARIABLE","$this",752],["T_OBJECT_OPERATOR","->",752],["T_STRING","setLowStockDate",752],"(",["T_STRING","null",752],")",";",["T_WHITESPACE","\n            ",752],["T_IF","if",753],["T_WHITESPACE"," ",753],"(",["T_VARIABLE","$this",753],["T_OBJECT_OPERATOR","->",753],["T_STRING","verifyNotification",753],"(",")",")",["T_WHITESPACE"," ",753],"{",["T_WHITESPACE","\n                ",753],["T_VARIABLE","$this",754],["T_OBJECT_OPERATOR","->",754],["T_STRING","setLowStockDate",754],"(",["T_STRING","Mage",754],["T_DOUBLE_COLON","::",754],["T_STRING","app",754],"(",")",["T_OBJECT_OPERATOR","->",754],["T_STRING","getLocale",754],"(",")",["T_OBJECT_OPERATOR","->",754],["T_STRING","date",754],"(",["T_STRING","null",754],",",["T_WHITESPACE"," ",754],["T_STRING","null",754],",",["T_WHITESPACE"," ",754],["T_STRING","null",754],",",["T_WHITESPACE"," ",754],["T_STRING","false",754],")",["T_WHITESPACE","\n                    ",754],["T_OBJECT_OPERATOR","->",755],["T_STRING","toString",755],"(",["T_STRING","Varien_Date",755],["T_DOUBLE_COLON","::",755],["T_STRING","DATETIME_INTERNAL_FORMAT",755],")",["T_WHITESPACE","\n                ",755],")",";",["T_WHITESPACE","\n            ",756],"}",["T_WHITESPACE","\n\n            ",757],["T_VARIABLE","$this",759],["T_OBJECT_OPERATOR","->",759],["T_STRING","setStockStatusChangedAutomatically",759],"(",["T_LNUMBER","0",759],")",";",["T_WHITESPACE","\n            ",759],["T_IF","if",760],["T_WHITESPACE"," ",760],"(",["T_VARIABLE","$this",760],["T_OBJECT_OPERATOR","->",760],["T_STRING","hasStockStatusChangedAutomaticallyFlag",760],"(",")",")",["T_WHITESPACE"," ",760],"{",["T_WHITESPACE","\n                ",760],["T_VARIABLE","$this",761],["T_OBJECT_OPERATOR","->",761],["T_STRING","setStockStatusChangedAutomatically",761],"(",["T_INT_CAST","(int)",761],["T_VARIABLE","$this",761],["T_OBJECT_OPERATOR","->",761],["T_STRING","getStockStatusChangedAutomaticallyFlag",761],"(",")",")",";",["T_WHITESPACE","\n            ",761],"}",["T_WHITESPACE","\n        ",762],"}",["T_WHITESPACE"," ",763],["T_ELSE","else",763],["T_WHITESPACE"," ",763],"{",["T_WHITESPACE","\n            ",763],["T_VARIABLE","$this",764],["T_OBJECT_OPERATOR","->",764],["T_STRING","setQty",764],"(",["T_LNUMBER","0",764],")",";",["T_WHITESPACE","\n        ",764],"}",["T_WHITESPACE","\n\n        ",765],["T_RETURN","return",767],["T_WHITESPACE"," ",767],["T_VARIABLE","$this",767],";",["T_WHITESPACE","\n    ",767],"}",["T_WHITESPACE","\n\n    ",768],["T_DOC_COMMENT","\/**\n     * Chceck if item should be in stock or out of stock based on $qty param of existing item qty\n     *\n     * @param float|null $qty\n     * @return bool true - item in stock | false - item out of stock\n     *\/",770],["T_WHITESPACE","\n    ",775],["T_PUBLIC","public",776],["T_WHITESPACE"," ",776],["T_FUNCTION","function",776],["T_WHITESPACE"," ",776],["T_STRING","verifyStock",776],"(",["T_VARIABLE","$qty",776],["T_WHITESPACE"," ",776],"=",["T_WHITESPACE"," ",776],["T_STRING","null",776],")",["T_WHITESPACE","\n    ",776],"{",["T_WHITESPACE","\n        ",777],["T_IF","if",778],["T_WHITESPACE"," ",778],"(",["T_VARIABLE","$qty",778],["T_WHITESPACE"," ",778],["T_IS_IDENTICAL","===",778],["T_WHITESPACE"," ",778],["T_STRING","null",778],")",["T_WHITESPACE"," ",778],"{",["T_WHITESPACE","\n            ",778],["T_VARIABLE","$qty",779],["T_WHITESPACE"," ",779],"=",["T_WHITESPACE"," ",779],["T_VARIABLE","$this",779],["T_OBJECT_OPERATOR","->",779],["T_STRING","getQty",779],"(",")",";",["T_WHITESPACE","\n        ",779],"}",["T_WHITESPACE","\n        ",780],["T_IF","if",781],["T_WHITESPACE"," ",781],"(",["T_VARIABLE","$this",781],["T_OBJECT_OPERATOR","->",781],["T_STRING","getBackorders",781],"(",")",["T_WHITESPACE"," ",781],["T_IS_EQUAL","==",781],["T_WHITESPACE"," ",781],["T_STRING","Mage_CatalogInventory_Model_Stock",781],["T_DOUBLE_COLON","::",781],["T_STRING","BACKORDERS_NO",781],["T_WHITESPACE"," ",781],["T_BOOLEAN_AND","&&",781],["T_WHITESPACE"," ",781],["T_VARIABLE","$qty",781],["T_WHITESPACE"," ",781],["T_IS_SMALLER_OR_EQUAL","<=",781],["T_WHITESPACE"," ",781],["T_VARIABLE","$this",781],["T_OBJECT_OPERATOR","->",781],["T_STRING","getMinQty",781],"(",")",")",["T_WHITESPACE"," ",781],"{",["T_WHITESPACE","\n            ",781],["T_RETURN","return",782],["T_WHITESPACE"," ",782],["T_STRING","false",782],";",["T_WHITESPACE","\n        ",782],"}",["T_WHITESPACE","\n        ",783],["T_RETURN","return",784],["T_WHITESPACE"," ",784],["T_STRING","true",784],";",["T_WHITESPACE","\n    ",784],"}",["T_WHITESPACE","\n\n    ",785],["T_DOC_COMMENT","\/**\n     * Check if item qty require stock status notification\n     *\n     * @param float | null $qty\n     * @return bool (true - if require, false - if not require)\n     *\/",787],["T_WHITESPACE","\n    ",792],["T_PUBLIC","public",793],["T_WHITESPACE"," ",793],["T_FUNCTION","function",793],["T_WHITESPACE"," ",793],["T_STRING","verifyNotification",793],"(",["T_VARIABLE","$qty",793],["T_WHITESPACE"," ",793],"=",["T_WHITESPACE"," ",793],["T_STRING","null",793],")",["T_WHITESPACE","\n    ",793],"{",["T_WHITESPACE","\n        ",794],["T_IF","if",795],["T_WHITESPACE"," ",795],"(",["T_VARIABLE","$qty",795],["T_WHITESPACE"," ",795],["T_IS_IDENTICAL","===",795],["T_WHITESPACE"," ",795],["T_STRING","null",795],")",["T_WHITESPACE"," ",795],"{",["T_WHITESPACE","\n            ",795],["T_VARIABLE","$qty",796],["T_WHITESPACE"," ",796],"=",["T_WHITESPACE"," ",796],["T_VARIABLE","$this",796],["T_OBJECT_OPERATOR","->",796],["T_STRING","getQty",796],"(",")",";",["T_WHITESPACE","\n        ",796],"}",["T_WHITESPACE","\n        ",797],["T_RETURN","return",798],["T_WHITESPACE"," ",798],["T_DOUBLE_CAST","(float)",798],["T_VARIABLE","$qty",798],["T_WHITESPACE"," ",798],"<",["T_WHITESPACE"," ",798],["T_VARIABLE","$this",798],["T_OBJECT_OPERATOR","->",798],["T_STRING","getNotifyStockQty",798],"(",")",";",["T_WHITESPACE","\n    ",798],"}",["T_WHITESPACE","\n\n    ",799],["T_DOC_COMMENT","\/**\n     * Retrieve Stock Availability\n     *\n     * @return bool|int\n     *\/",801],["T_WHITESPACE","\n    ",805],["T_PUBLIC","public",806],["T_WHITESPACE"," ",806],["T_FUNCTION","function",806],["T_WHITESPACE"," ",806],["T_STRING","getIsInStock",806],"(",")",["T_WHITESPACE","\n    ",806],"{",["T_WHITESPACE","\n        ",807],["T_IF","if",808],["T_WHITESPACE"," ",808],"(","!",["T_VARIABLE","$this",808],["T_OBJECT_OPERATOR","->",808],["T_STRING","getManageStock",808],"(",")",")",["T_WHITESPACE"," ",808],"{",["T_WHITESPACE","\n            ",808],["T_RETURN","return",809],["T_WHITESPACE"," ",809],["T_STRING","true",809],";",["T_WHITESPACE","\n        ",809],"}",["T_WHITESPACE","\n        ",810],["T_RETURN","return",811],["T_WHITESPACE"," ",811],["T_VARIABLE","$this",811],["T_OBJECT_OPERATOR","->",811],["T_STRING","_getData",811],"(",["T_CONSTANT_ENCAPSED_STRING","'is_in_stock'",811],")",";",["T_WHITESPACE","\n    ",811],"}",["T_WHITESPACE","\n\n    ",812],["T_DOC_COMMENT","\/**\n     * Add product data to stock item\n     *\n     * @param Mage_Catalog_Model_Product $product\n     * @return Mage_CatalogInventory_Model_Stock_Item\n     *\/",814],["T_WHITESPACE","\n    ",819],["T_PUBLIC","public",820],["T_WHITESPACE"," ",820],["T_FUNCTION","function",820],["T_WHITESPACE"," ",820],["T_STRING","setProduct",820],"(",["T_VARIABLE","$product",820],")",["T_WHITESPACE","\n    ",820],"{",["T_WHITESPACE","\n        ",821],["T_VARIABLE","$this",822],["T_OBJECT_OPERATOR","->",822],["T_STRING","setProductId",822],"(",["T_VARIABLE","$product",822],["T_OBJECT_OPERATOR","->",822],["T_STRING","getId",822],"(",")",")",["T_WHITESPACE","\n            ",822],["T_OBJECT_OPERATOR","->",823],["T_STRING","setProductName",823],"(",["T_VARIABLE","$product",823],["T_OBJECT_OPERATOR","->",823],["T_STRING","getName",823],"(",")",")",["T_WHITESPACE","\n            ",823],["T_OBJECT_OPERATOR","->",824],["T_STRING","setStoreId",824],"(",["T_VARIABLE","$product",824],["T_OBJECT_OPERATOR","->",824],["T_STRING","getStoreId",824],"(",")",")",["T_WHITESPACE","\n            ",824],["T_OBJECT_OPERATOR","->",825],["T_STRING","setProductName",825],"(",["T_VARIABLE","$product",825],["T_OBJECT_OPERATOR","->",825],["T_STRING","getName",825],"(",")",")",["T_WHITESPACE","\n            ",825],["T_OBJECT_OPERATOR","->",826],["T_STRING","setProductTypeId",826],"(",["T_VARIABLE","$product",826],["T_OBJECT_OPERATOR","->",826],["T_STRING","getTypeId",826],"(",")",")",["T_WHITESPACE","\n            ",826],["T_OBJECT_OPERATOR","->",827],["T_STRING","setProductStatusChanged",827],"(",["T_VARIABLE","$product",827],["T_OBJECT_OPERATOR","->",827],["T_STRING","dataHasChangedFor",827],"(",["T_CONSTANT_ENCAPSED_STRING","'status'",827],")",")",["T_WHITESPACE","\n            ",827],["T_OBJECT_OPERATOR","->",828],["T_STRING","setProductChangedWebsites",828],"(",["T_VARIABLE","$product",828],["T_OBJECT_OPERATOR","->",828],["T_STRING","getIsChangedWebsites",828],"(",")",")",";",["T_WHITESPACE","\n\n        ",828],["T_VARIABLE","$this",830],["T_OBJECT_OPERATOR","->",830],["T_STRING","_productInstance",830],["T_WHITESPACE"," ",830],"=",["T_WHITESPACE"," ",830],["T_VARIABLE","$product",830],";",["T_WHITESPACE","\n\n        ",830],["T_RETURN","return",832],["T_WHITESPACE"," ",832],["T_VARIABLE","$this",832],";",["T_WHITESPACE","\n    ",832],"}",["T_WHITESPACE","\n\n    ",833],["T_DOC_COMMENT","\/**\n     * Returns product instance\n     *\n     * @return Mage_Catalog_Model_Product|null\n     *\/",835],["T_WHITESPACE","\n    ",839],["T_PUBLIC","public",840],["T_WHITESPACE"," ",840],["T_FUNCTION","function",840],["T_WHITESPACE"," ",840],["T_STRING","getProduct",840],"(",")",["T_WHITESPACE","\n    ",840],"{",["T_WHITESPACE","\n        ",841],["T_RETURN","return",842],["T_WHITESPACE"," ",842],["T_VARIABLE","$this",842],["T_OBJECT_OPERATOR","->",842],["T_STRING","_productInstance",842],["T_WHITESPACE"," ",842],"?",["T_WHITESPACE"," ",842],["T_VARIABLE","$this",842],["T_OBJECT_OPERATOR","->",842],["T_STRING","_productInstance",842],["T_WHITESPACE"," ",842],":",["T_WHITESPACE"," ",842],["T_VARIABLE","$this",842],["T_OBJECT_OPERATOR","->",842],["T_STRING","_getData",842],"(",["T_CONSTANT_ENCAPSED_STRING","'product'",842],")",";",["T_WHITESPACE","\n    ",842],"}",["T_WHITESPACE","\n\n    ",843],["T_DOC_COMMENT","\/**\n     * Retrieve stock qty whether product is composite or no\n     *\n     * @return float\n     *\/",845],["T_WHITESPACE","\n    ",849],["T_PUBLIC","public",850],["T_WHITESPACE"," ",850],["T_FUNCTION","function",850],["T_WHITESPACE"," ",850],["T_STRING","getStockQty",850],"(",")",["T_WHITESPACE","\n    ",850],"{",["T_WHITESPACE","\n        ",851],["T_IF","if",852],["T_WHITESPACE"," ",852],"(","!",["T_VARIABLE","$this",852],["T_OBJECT_OPERATOR","->",852],["T_STRING","hasStockQty",852],"(",")",")",["T_WHITESPACE"," ",852],"{",["T_WHITESPACE","\n            ",852],["T_VARIABLE","$this",853],["T_OBJECT_OPERATOR","->",853],["T_STRING","setStockQty",853],"(",["T_LNUMBER","0",853],")",";",["T_WHITESPACE","  ",853],["T_COMMENT","\/\/ prevent possible recursive loop\n",853],["T_WHITESPACE","            ",854],["T_VARIABLE","$product",854],["T_WHITESPACE"," ",854],"=",["T_WHITESPACE"," ",854],["T_VARIABLE","$this",854],["T_OBJECT_OPERATOR","->",854],["T_STRING","_productInstance",854],";",["T_WHITESPACE","\n            ",854],["T_IF","if",855],["T_WHITESPACE"," ",855],"(","!",["T_VARIABLE","$product",855],["T_WHITESPACE"," ",855],["T_BOOLEAN_OR","||",855],["T_WHITESPACE"," ",855],"!",["T_VARIABLE","$product",855],["T_OBJECT_OPERATOR","->",855],["T_STRING","isComposite",855],"(",")",")",["T_WHITESPACE"," ",855],"{",["T_WHITESPACE","\n                ",855],["T_VARIABLE","$stockQty",856],["T_WHITESPACE"," ",856],"=",["T_WHITESPACE"," ",856],["T_VARIABLE","$this",856],["T_OBJECT_OPERATOR","->",856],["T_STRING","getQty",856],"(",")",";",["T_WHITESPACE","\n            ",856],"}",["T_WHITESPACE"," ",857],["T_ELSE","else",857],["T_WHITESPACE"," ",857],"{",["T_WHITESPACE","\n                ",857],["T_VARIABLE","$stockQty",858],["T_WHITESPACE"," ",858],"=",["T_WHITESPACE"," ",858],["T_STRING","null",858],";",["T_WHITESPACE","\n                ",858],["T_VARIABLE","$productsByGroups",859],["T_WHITESPACE"," ",859],"=",["T_WHITESPACE"," ",859],["T_VARIABLE","$product",859],["T_OBJECT_OPERATOR","->",859],["T_STRING","getTypeInstance",859],"(",["T_STRING","true",859],")",["T_OBJECT_OPERATOR","->",859],["T_STRING","getProductsToPurchaseByReqGroups",859],"(",["T_VARIABLE","$product",859],")",";",["T_WHITESPACE","\n                ",859],["T_FOREACH","foreach",860],["T_WHITESPACE"," ",860],"(",["T_VARIABLE","$productsByGroups",860],["T_WHITESPACE"," ",860],["T_AS","as",860],["T_WHITESPACE"," ",860],["T_VARIABLE","$productsInGroup",860],")",["T_WHITESPACE"," ",860],"{",["T_WHITESPACE","\n                    ",860],["T_VARIABLE","$qty",861],["T_WHITESPACE"," ",861],"=",["T_WHITESPACE"," ",861],["T_LNUMBER","0",861],";",["T_WHITESPACE","\n                    ",861],["T_FOREACH","foreach",862],["T_WHITESPACE"," ",862],"(",["T_VARIABLE","$productsInGroup",862],["T_WHITESPACE"," ",862],["T_AS","as",862],["T_WHITESPACE"," ",862],["T_VARIABLE","$childProduct",862],")",["T_WHITESPACE"," ",862],"{",["T_WHITESPACE","\n                        ",862],["T_IF","if",863],["T_WHITESPACE"," ",863],"(",["T_VARIABLE","$childProduct",863],["T_OBJECT_OPERATOR","->",863],["T_STRING","hasStockItem",863],"(",")",")",["T_WHITESPACE"," ",863],"{",["T_WHITESPACE","\n                            ",863],["T_VARIABLE","$qty",864],["T_WHITESPACE"," ",864],["T_PLUS_EQUAL","+=",864],["T_WHITESPACE"," ",864],["T_VARIABLE","$childProduct",864],["T_OBJECT_OPERATOR","->",864],["T_STRING","getStockItem",864],"(",")",["T_OBJECT_OPERATOR","->",864],["T_STRING","getStockQty",864],"(",")",";",["T_WHITESPACE","\n                        ",864],"}",["T_WHITESPACE","\n                    ",865],"}",["T_WHITESPACE","\n                    ",866],["T_IF","if",867],["T_WHITESPACE"," ",867],"(",["T_STRING","is_null",867],"(",["T_VARIABLE","$stockQty",867],")",["T_WHITESPACE"," ",867],["T_BOOLEAN_OR","||",867],["T_WHITESPACE"," ",867],["T_VARIABLE","$qty",867],["T_WHITESPACE"," ",867],"<",["T_WHITESPACE"," ",867],["T_VARIABLE","$stockQty",867],")",["T_WHITESPACE"," ",867],"{",["T_WHITESPACE","\n                        ",867],["T_VARIABLE","$stockQty",868],["T_WHITESPACE"," ",868],"=",["T_WHITESPACE"," ",868],["T_VARIABLE","$qty",868],";",["T_WHITESPACE","\n                    ",868],"}",["T_WHITESPACE","\n                ",869],"}",["T_WHITESPACE","\n            ",870],"}",["T_WHITESPACE","\n            ",871],["T_VARIABLE","$stockQty",872],["T_WHITESPACE"," ",872],"=",["T_WHITESPACE"," ",872],["T_DOUBLE_CAST","(float)",872],["T_WHITESPACE"," ",872],["T_VARIABLE","$stockQty",872],";",["T_WHITESPACE","\n            ",872],["T_IF","if",873],["T_WHITESPACE"," ",873],"(",["T_VARIABLE","$stockQty",873],["T_WHITESPACE"," ",873],"<",["T_WHITESPACE"," ",873],["T_LNUMBER","0",873],["T_WHITESPACE"," ",873],["T_BOOLEAN_OR","||",873],["T_WHITESPACE"," ",873],"!",["T_VARIABLE","$this",873],["T_OBJECT_OPERATOR","->",873],["T_STRING","getManageStock",873],"(",")",["T_WHITESPACE","\n                ",873],["T_BOOLEAN_OR","||",874],["T_WHITESPACE"," ",874],"!",["T_VARIABLE","$this",874],["T_OBJECT_OPERATOR","->",874],["T_STRING","getIsInStock",874],"(",")",["T_WHITESPACE"," ",874],["T_BOOLEAN_OR","||",874],["T_WHITESPACE"," ",874],"(",["T_VARIABLE","$product",874],["T_WHITESPACE"," ",874],["T_BOOLEAN_AND","&&",874],["T_WHITESPACE"," ",874],"!",["T_VARIABLE","$product",874],["T_OBJECT_OPERATOR","->",874],["T_STRING","isSaleable",874],"(",")",")",["T_WHITESPACE","\n            ",874],")",["T_WHITESPACE"," ",875],"{",["T_WHITESPACE","\n                ",875],["T_VARIABLE","$stockQty",876],["T_WHITESPACE"," ",876],"=",["T_WHITESPACE"," ",876],["T_LNUMBER","0",876],";",["T_WHITESPACE","\n            ",876],"}",["T_WHITESPACE","\n            ",877],["T_VARIABLE","$this",878],["T_OBJECT_OPERATOR","->",878],["T_STRING","setStockQty",878],"(",["T_VARIABLE","$stockQty",878],")",";",["T_WHITESPACE","\n        ",878],"}",["T_WHITESPACE","\n        ",879],["T_RETURN","return",880],["T_WHITESPACE"," ",880],["T_VARIABLE","$this",880],["T_OBJECT_OPERATOR","->",880],["T_STRING","getData",880],"(",["T_CONSTANT_ENCAPSED_STRING","'stock_qty'",880],")",";",["T_WHITESPACE","\n    ",880],"}",["T_WHITESPACE","\n\n    ",881],["T_DOC_COMMENT","\/**\n     * Reset model data\n     * @return Mage_CatalogInventory_Model_Stock_Item\n     *\/",883],["T_WHITESPACE","\n    ",886],["T_PUBLIC","public",887],["T_WHITESPACE"," ",887],["T_FUNCTION","function",887],["T_WHITESPACE"," ",887],["T_STRING","reset",887],"(",")",["T_WHITESPACE","\n    ",887],"{",["T_WHITESPACE","\n        ",888],["T_IF","if",889],["T_WHITESPACE"," ",889],"(",["T_VARIABLE","$this",889],["T_OBJECT_OPERATOR","->",889],["T_STRING","_productInstance",889],")",["T_WHITESPACE"," ",889],"{",["T_WHITESPACE","\n            ",889],["T_VARIABLE","$this",890],["T_OBJECT_OPERATOR","->",890],["T_STRING","_productInstance",890],["T_WHITESPACE"," ",890],"=",["T_WHITESPACE"," ",890],["T_STRING","null",890],";",["T_WHITESPACE","\n        ",890],"}",["T_WHITESPACE","\n        ",891],["T_RETURN","return",892],["T_WHITESPACE"," ",892],["T_VARIABLE","$this",892],";",["T_WHITESPACE","\n    ",892],"}",["T_WHITESPACE","\n\n    ",893],["T_DOC_COMMENT","\/**\n     * Set whether index events should be processed immediately\n     *\n     * @param bool $process\n     * @return Mage_CatalogInventory_Model_Stock_Item\n     *\/",895],["T_WHITESPACE","\n    ",900],["T_PUBLIC","public",901],["T_WHITESPACE"," ",901],["T_FUNCTION","function",901],["T_WHITESPACE"," ",901],["T_STRING","setProcessIndexEvents",901],"(",["T_VARIABLE","$process",901],["T_WHITESPACE"," ",901],"=",["T_WHITESPACE"," ",901],["T_STRING","true",901],")",["T_WHITESPACE","\n    ",901],"{",["T_WHITESPACE","\n        ",902],["T_VARIABLE","$this",903],["T_OBJECT_OPERATOR","->",903],["T_STRING","_processIndexEvents",903],["T_WHITESPACE"," ",903],"=",["T_WHITESPACE"," ",903],["T_VARIABLE","$process",903],";",["T_WHITESPACE","\n        ",903],["T_RETURN","return",904],["T_WHITESPACE"," ",904],["T_VARIABLE","$this",904],";",["T_WHITESPACE","\n    ",904],"}",["T_WHITESPACE","\n\n    ",905],["T_DOC_COMMENT","\/**\n     * Callback function which called after transaction commit in resource model\n     *\n     * @return Mage_CatalogInventory_Model_Stock_Item\n     *\/",907],["T_WHITESPACE","\n    ",911],["T_PUBLIC","public",912],["T_WHITESPACE"," ",912],["T_FUNCTION","function",912],["T_WHITESPACE"," ",912],["T_STRING","afterCommitCallback",912],"(",")",["T_WHITESPACE","\n    ",912],"{",["T_WHITESPACE","\n        ",913],["T_STRING","parent",914],["T_DOUBLE_COLON","::",914],["T_STRING","afterCommitCallback",914],"(",")",";",["T_WHITESPACE","\n\n        ",914],["T_DOC_COMMENT","\/** @var \\Mage_Index_Model_Indexer $indexer *\/",916],["T_WHITESPACE","\n        ",916],["T_VARIABLE","$indexer",917],["T_WHITESPACE"," ",917],"=",["T_WHITESPACE"," ",917],["T_STRING","Mage",917],["T_DOUBLE_COLON","::",917],["T_STRING","getSingleton",917],"(",["T_CONSTANT_ENCAPSED_STRING","'index\/indexer'",917],")",";",["T_WHITESPACE","\n\n        ",917],["T_IF","if",919],["T_WHITESPACE"," ",919],"(",["T_VARIABLE","$this",919],["T_OBJECT_OPERATOR","->",919],["T_STRING","_processIndexEvents",919],")",["T_WHITESPACE"," ",919],"{",["T_WHITESPACE","\n            ",919],["T_VARIABLE","$indexer",920],["T_OBJECT_OPERATOR","->",920],["T_STRING","processEntityAction",920],"(",["T_VARIABLE","$this",920],",",["T_WHITESPACE"," ",920],["T_STRING","self",920],["T_DOUBLE_COLON","::",920],["T_STRING","ENTITY",920],",",["T_WHITESPACE"," ",920],["T_STRING","Mage_Index_Model_Event",920],["T_DOUBLE_COLON","::",920],["T_STRING","TYPE_SAVE",920],")",";",["T_WHITESPACE","\n        ",920],"}",["T_WHITESPACE"," ",921],["T_ELSE","else",921],["T_WHITESPACE"," ",921],"{",["T_WHITESPACE","\n            ",921],["T_VARIABLE","$indexer",922],["T_OBJECT_OPERATOR","->",922],["T_STRING","logEvent",922],"(",["T_VARIABLE","$this",922],",",["T_WHITESPACE"," ",922],["T_STRING","self",922],["T_DOUBLE_COLON","::",922],["T_STRING","ENTITY",922],",",["T_WHITESPACE"," ",922],["T_STRING","Mage_Index_Model_Event",922],["T_DOUBLE_COLON","::",922],["T_STRING","TYPE_SAVE",922],")",";",["T_WHITESPACE","\n        ",922],"}",["T_WHITESPACE","\n        ",923],["T_RETURN","return",924],["T_WHITESPACE"," ",924],["T_VARIABLE","$this",924],";",["T_WHITESPACE","\n    ",924],"}",["T_WHITESPACE","\n",925],"}",["T_WHITESPACE","\n",926]]
[["T_OPEN_TAG","<?php\n",1],["T_DOC_COMMENT","\/**\n * Magento\n *\n * NOTICE OF LICENSE\n *\n * This source file is subject to the Open Software License (OSL 3.0)\n * that is bundled with this package in the file LICENSE.txt.\n * It is also available through the world-wide-web at this URL:\n * http:\/\/opensource.org\/licenses\/osl-3.0.php\n * If you did not receive a copy of the license and are unable to\n * obtain it through the world-wide-web, please send an email\n * to license@magento.com so we can send you a copy immediately.\n *\n * DISCLAIMER\n *\n * Do not edit or add to this file if you wish to upgrade Magento to newer\n * versions in the future. If you wish to customize Magento for your\n * needs please refer to http:\/\/www.magento.com for more information.\n *\n * @category    Mage\n * @package     Mage_CatalogInventory\n * @copyright  Copyright (c) 2006-2016 X.commerce, Inc. and affiliates (http:\/\/www.magento.com)\n * @license    http:\/\/opensource.org\/licenses\/osl-3.0.php  Open Software License (OSL 3.0)\n *\/",2],["T_WHITESPACE","\n\n\n",25],["T_DOC_COMMENT","\/**\n * CatalogInventory Stock Status Indexer Resource Model\n *\n * @category    Mage\n * @package     Mage_CatalogInventory\n * @author      Magento Core Team <core@magentocommerce.com>\n *\/",28],["T_WHITESPACE","\n",34],["T_CLASS","class",35],["T_WHITESPACE"," ",35],["T_STRING","Mage_CatalogInventory_Model_Resource_Indexer_Stock",35],["T_WHITESPACE"," ",35],["T_EXTENDS","extends",35],["T_WHITESPACE"," ",35],["T_STRING","Mage_Catalog_Model_Resource_Product_Indexer_Abstract",35],["T_WHITESPACE","\n",35],"{",["T_WHITESPACE","\n    ",36],["T_DOC_COMMENT","\/**\n     * Stock Indexer models per product type\n     * Sorted by priority\n     *\n     * @var array\n     *\/",37],["T_WHITESPACE","\n    ",42],["T_PROTECTED","protected",43],["T_WHITESPACE"," ",43],["T_VARIABLE","$_indexers",43],";",["T_WHITESPACE","\n\n    ",43],["T_DOC_COMMENT","\/**\n     * Default Stock Indexer resource model name\n     *\n     * @var string\n     *\/",45],["T_WHITESPACE","\n    ",49],["T_PROTECTED","protected",50],["T_WHITESPACE"," ",50],["T_VARIABLE","$_defaultIndexer",50],["T_WHITESPACE","   ",50],"=",["T_WHITESPACE"," ",50],["T_CONSTANT_ENCAPSED_STRING","'cataloginventory\/indexer_stock_default'",50],";",["T_WHITESPACE","\n\n    ",50],["T_DOC_COMMENT","\/**\n     * Initialize connection and define main table\n     *\n     *\/",52],["T_WHITESPACE","\n    ",55],["T_PROTECTED","protected",56],["T_WHITESPACE"," ",56],["T_FUNCTION","function",56],["T_WHITESPACE"," ",56],["T_STRING","_construct",56],"(",")",["T_WHITESPACE","\n    ",56],"{",["T_WHITESPACE","\n        ",57],["T_VARIABLE","$this",58],["T_OBJECT_OPERATOR","->",58],["T_STRING","_init",58],"(",["T_CONSTANT_ENCAPSED_STRING","'cataloginventory\/stock_status'",58],",",["T_WHITESPACE"," ",58],["T_CONSTANT_ENCAPSED_STRING","'product_id'",58],")",";",["T_WHITESPACE","\n    ",58],"}",["T_WHITESPACE","\n\n    ",59],["T_DOC_COMMENT","\/**\n     * Process stock item save action\n     *\n     * @param Mage_Index_Model_Event $event\n     * @return Mage_CatalogInventory_Model_Resource_Indexer_Stock\n     *\/",61],["T_WHITESPACE","\n    ",66],["T_PUBLIC","public",67],["T_WHITESPACE"," ",67],["T_FUNCTION","function",67],["T_WHITESPACE"," ",67],["T_STRING","cataloginventoryStockItemSave",67],"(",["T_STRING","Mage_Index_Model_Event",67],["T_WHITESPACE"," ",67],["T_VARIABLE","$event",67],")",["T_WHITESPACE","\n    ",67],"{",["T_WHITESPACE","\n        ",68],["T_VARIABLE","$data",69],["T_WHITESPACE"," ",69],"=",["T_WHITESPACE"," ",69],["T_VARIABLE","$event",69],["T_OBJECT_OPERATOR","->",69],["T_STRING","getNewData",69],"(",")",";",["T_WHITESPACE","\n        ",69],["T_IF","if",70],["T_WHITESPACE"," ",70],"(",["T_EMPTY","empty",70],"(",["T_VARIABLE","$data",70],"[",["T_CONSTANT_ENCAPSED_STRING","'product_id'",70],"]",")",")",["T_WHITESPACE"," ",70],"{",["T_WHITESPACE","\n            ",70],["T_RETURN","return",71],["T_WHITESPACE"," ",71],["T_VARIABLE","$this",71],";",["T_WHITESPACE","\n        ",71],"}",["T_WHITESPACE","\n\n        ",72],["T_VARIABLE","$productId",74],["T_WHITESPACE"," ",74],"=",["T_WHITESPACE"," ",74],["T_VARIABLE","$data",74],"[",["T_CONSTANT_ENCAPSED_STRING","'product_id'",74],"]",";",["T_WHITESPACE","\n        ",74],["T_VARIABLE","$this",75],["T_OBJECT_OPERATOR","->",75],["T_STRING","reindexProducts",75],"(",["T_VARIABLE","$productId",75],")",";",["T_WHITESPACE","\n\n        ",75],["T_RETURN","return",77],["T_WHITESPACE"," ",77],["T_VARIABLE","$this",77],";",["T_WHITESPACE","\n    ",77],"}",["T_WHITESPACE","\n\n    ",78],["T_DOC_COMMENT","\/**\n     * Refresh stock index for specific product ids\n     *\n     * @param array $productIds\n     * @return Mage_CatalogInventory_Model_Resource_Indexer_Stock\n     *\/",80],["T_WHITESPACE","\n    ",85],["T_PUBLIC","public",86],["T_WHITESPACE"," ",86],["T_FUNCTION","function",86],["T_WHITESPACE"," ",86],["T_STRING","reindexProducts",86],"(",["T_VARIABLE","$productIds",86],")",["T_WHITESPACE","\n    ",86],"{",["T_WHITESPACE","\n        ",87],["T_VARIABLE","$adapter",88],["T_WHITESPACE"," ",88],"=",["T_WHITESPACE"," ",88],["T_VARIABLE","$this",88],["T_OBJECT_OPERATOR","->",88],["T_STRING","_getWriteAdapter",88],"(",")",";",["T_WHITESPACE","\n        ",88],["T_IF","if",89],["T_WHITESPACE"," ",89],"(","!",["T_STRING","is_array",89],"(",["T_VARIABLE","$productIds",89],")",")",["T_WHITESPACE"," ",89],"{",["T_WHITESPACE","\n            ",89],["T_VARIABLE","$productIds",90],["T_WHITESPACE"," ",90],"=",["T_WHITESPACE"," ",90],["T_ARRAY","array",90],"(",["T_VARIABLE","$productIds",90],")",";",["T_WHITESPACE","\n        ",90],"}",["T_WHITESPACE","\n        ",91],["T_VARIABLE","$parentIds",92],["T_WHITESPACE"," ",92],"=",["T_WHITESPACE"," ",92],["T_VARIABLE","$this",92],["T_OBJECT_OPERATOR","->",92],["T_STRING","getRelationsByChild",92],"(",["T_VARIABLE","$productIds",92],")",";",["T_WHITESPACE","\n        ",92],["T_IF","if",93],["T_WHITESPACE"," ",93],"(",["T_VARIABLE","$parentIds",93],")",["T_WHITESPACE"," ",93],"{",["T_WHITESPACE","\n            ",93],["T_VARIABLE","$processIds",94],["T_WHITESPACE"," ",94],"=",["T_WHITESPACE"," ",94],["T_STRING","array_merge",94],"(",["T_VARIABLE","$parentIds",94],",",["T_WHITESPACE"," ",94],["T_VARIABLE","$productIds",94],")",";",["T_WHITESPACE","\n        ",94],"}",["T_WHITESPACE"," ",95],["T_ELSE","else",95],["T_WHITESPACE"," ",95],"{",["T_WHITESPACE","\n            ",95],["T_VARIABLE","$processIds",96],["T_WHITESPACE"," ",96],"=",["T_WHITESPACE"," ",96],["T_VARIABLE","$productIds",96],";",["T_WHITESPACE","\n        ",96],"}",["T_WHITESPACE","\n\n        ",97],["T_COMMENT","\/\/ retrieve product types by processIds\n",99],["T_WHITESPACE","        ",100],["T_VARIABLE","$select",100],["T_WHITESPACE"," ",100],"=",["T_WHITESPACE"," ",100],["T_VARIABLE","$adapter",100],["T_OBJECT_OPERATOR","->",100],["T_STRING","select",100],"(",")",["T_WHITESPACE","\n            ",100],["T_OBJECT_OPERATOR","->",101],["T_STRING","from",101],"(",["T_VARIABLE","$this",101],["T_OBJECT_OPERATOR","->",101],["T_STRING","getTable",101],"(",["T_CONSTANT_ENCAPSED_STRING","'catalog\/product'",101],")",",",["T_WHITESPACE"," ",101],["T_ARRAY","array",101],"(",["T_CONSTANT_ENCAPSED_STRING","'entity_id'",101],",",["T_WHITESPACE"," ",101],["T_CONSTANT_ENCAPSED_STRING","'type_id'",101],")",")",["T_WHITESPACE","\n            ",101],["T_OBJECT_OPERATOR","->",102],["T_STRING","where",102],"(",["T_CONSTANT_ENCAPSED_STRING","'entity_id IN(?)'",102],",",["T_WHITESPACE"," ",102],["T_VARIABLE","$processIds",102],")",";",["T_WHITESPACE","\n        ",102],["T_VARIABLE","$pairs",103],["T_WHITESPACE","  ",103],"=",["T_WHITESPACE"," ",103],["T_VARIABLE","$adapter",103],["T_OBJECT_OPERATOR","->",103],["T_STRING","fetchPairs",103],"(",["T_VARIABLE","$select",103],")",";",["T_WHITESPACE","\n\n        ",103],["T_VARIABLE","$byType",105],["T_WHITESPACE"," ",105],"=",["T_WHITESPACE"," ",105],["T_ARRAY","array",105],"(",")",";",["T_WHITESPACE","\n        ",105],["T_FOREACH","foreach",106],["T_WHITESPACE"," ",106],"(",["T_VARIABLE","$pairs",106],["T_WHITESPACE"," ",106],["T_AS","as",106],["T_WHITESPACE"," ",106],["T_VARIABLE","$productId",106],["T_WHITESPACE"," ",106],["T_DOUBLE_ARROW","=>",106],["T_WHITESPACE"," ",106],["T_VARIABLE","$typeId",106],")",["T_WHITESPACE"," ",106],"{",["T_WHITESPACE","\n            ",106],["T_VARIABLE","$byType",107],"[",["T_VARIABLE","$typeId",107],"]","[",["T_VARIABLE","$productId",107],"]",["T_WHITESPACE"," ",107],"=",["T_WHITESPACE"," ",107],["T_VARIABLE","$productId",107],";",["T_WHITESPACE","\n        ",107],"}",["T_WHITESPACE","\n\n        ",108],["T_VARIABLE","$adapter",110],["T_OBJECT_OPERATOR","->",110],["T_STRING","beginTransaction",110],"(",")",";",["T_WHITESPACE","\n        ",110],["T_TRY","try",111],["T_WHITESPACE"," ",111],"{",["T_WHITESPACE","\n            ",111],["T_VARIABLE","$indexers",112],["T_WHITESPACE"," ",112],"=",["T_WHITESPACE"," ",112],["T_VARIABLE","$this",112],["T_OBJECT_OPERATOR","->",112],["T_STRING","_getTypeIndexers",112],"(",")",";",["T_WHITESPACE","\n            ",112],["T_FOREACH","foreach",113],["T_WHITESPACE"," ",113],"(",["T_VARIABLE","$indexers",113],["T_WHITESPACE"," ",113],["T_AS","as",113],["T_WHITESPACE"," ",113],["T_VARIABLE","$indexer",113],")",["T_WHITESPACE"," ",113],"{",["T_WHITESPACE","\n                ",113],["T_IF","if",114],["T_WHITESPACE"," ",114],"(",["T_ISSET","isset",114],"(",["T_VARIABLE","$byType",114],"[",["T_VARIABLE","$indexer",114],["T_OBJECT_OPERATOR","->",114],["T_STRING","getTypeId",114],"(",")","]",")",")",["T_WHITESPACE"," ",114],"{",["T_WHITESPACE","\n                    ",114],["T_VARIABLE","$indexer",115],["T_OBJECT_OPERATOR","->",115],["T_STRING","reindexEntity",115],"(",["T_VARIABLE","$byType",115],"[",["T_VARIABLE","$indexer",115],["T_OBJECT_OPERATOR","->",115],["T_STRING","getTypeId",115],"(",")","]",")",";",["T_WHITESPACE","\n                ",115],"}",["T_WHITESPACE","\n            ",116],"}",["T_WHITESPACE","\n        ",117],"}",["T_WHITESPACE"," ",118],["T_CATCH","catch",118],["T_WHITESPACE"," ",118],"(",["T_STRING","Exception",118],["T_WHITESPACE"," ",118],["T_VARIABLE","$e",118],")",["T_WHITESPACE"," ",118],"{",["T_WHITESPACE","\n            ",118],["T_VARIABLE","$adapter",119],["T_OBJECT_OPERATOR","->",119],["T_STRING","rollback",119],"(",")",";",["T_WHITESPACE","\n            ",119],["T_THROW","throw",120],["T_WHITESPACE"," ",120],["T_VARIABLE","$e",120],";",["T_WHITESPACE","\n        ",120],"}",["T_WHITESPACE","\n        ",121],["T_VARIABLE","$adapter",122],["T_OBJECT_OPERATOR","->",122],["T_STRING","commit",122],"(",")",";",["T_WHITESPACE","\n\n        ",122],["T_RETURN","return",124],["T_WHITESPACE"," ",124],["T_VARIABLE","$this",124],";",["T_WHITESPACE","\n    ",124],"}",["T_WHITESPACE","\n\n    ",125],["T_DOC_COMMENT","\/**\n     * Processing parent products after child product deleted\n     *\n     * @param Mage_Index_Model_Event $event\n     * @return Mage_CatalogInventory_Model_Resource_Indexer_Stock\n     *\/",127],["T_WHITESPACE","\n    ",132],["T_PUBLIC","public",133],["T_WHITESPACE"," ",133],["T_FUNCTION","function",133],["T_WHITESPACE"," ",133],["T_STRING","catalogProductDelete",133],"(",["T_STRING","Mage_Index_Model_Event",133],["T_WHITESPACE"," ",133],["T_VARIABLE","$event",133],")",["T_WHITESPACE","\n    ",133],"{",["T_WHITESPACE","\n        ",134],["T_VARIABLE","$data",135],["T_WHITESPACE"," ",135],"=",["T_WHITESPACE"," ",135],["T_VARIABLE","$event",135],["T_OBJECT_OPERATOR","->",135],["T_STRING","getNewData",135],"(",")",";",["T_WHITESPACE","\n        ",135],["T_IF","if",136],["T_WHITESPACE"," ",136],"(",["T_EMPTY","empty",136],"(",["T_VARIABLE","$data",136],"[",["T_CONSTANT_ENCAPSED_STRING","'reindex_stock_parent_ids'",136],"]",")",")",["T_WHITESPACE"," ",136],"{",["T_WHITESPACE","\n            ",136],["T_RETURN","return",137],["T_WHITESPACE"," ",137],["T_VARIABLE","$this",137],";",["T_WHITESPACE","\n        ",137],"}",["T_WHITESPACE","\n\n        ",138],["T_VARIABLE","$adapter",140],["T_WHITESPACE"," ",140],"=",["T_WHITESPACE"," ",140],["T_VARIABLE","$this",140],["T_OBJECT_OPERATOR","->",140],["T_STRING","_getWriteAdapter",140],"(",")",";",["T_WHITESPACE","\n\n        ",140],["T_VARIABLE","$parentIds",142],["T_WHITESPACE","  ",142],"=",["T_WHITESPACE"," ",142],["T_ARRAY","array",142],"(",")",";",["T_WHITESPACE","\n        ",142],["T_FOREACH","foreach",143],["T_WHITESPACE"," ",143],"(",["T_VARIABLE","$data",143],"[",["T_CONSTANT_ENCAPSED_STRING","'reindex_stock_parent_ids'",143],"]",["T_WHITESPACE"," ",143],["T_AS","as",143],["T_WHITESPACE"," ",143],["T_VARIABLE","$parentId",143],["T_WHITESPACE"," ",143],["T_DOUBLE_ARROW","=>",143],["T_WHITESPACE"," ",143],["T_VARIABLE","$parentType",143],")",["T_WHITESPACE"," ",143],"{",["T_WHITESPACE","\n            ",143],["T_VARIABLE","$parentIds",144],"[",["T_VARIABLE","$parentType",144],"]","[",["T_VARIABLE","$parentId",144],"]",["T_WHITESPACE"," ",144],"=",["T_WHITESPACE"," ",144],["T_VARIABLE","$parentId",144],";",["T_WHITESPACE","\n        ",144],"}",["T_WHITESPACE","\n\n        ",145],["T_VARIABLE","$adapter",147],["T_OBJECT_OPERATOR","->",147],["T_STRING","beginTransaction",147],"(",")",";",["T_WHITESPACE","\n        ",147],["T_TRY","try",148],["T_WHITESPACE"," ",148],"{",["T_WHITESPACE","\n            ",148],["T_FOREACH","foreach",149],["T_WHITESPACE"," ",149],"(",["T_VARIABLE","$parentIds",149],["T_WHITESPACE"," ",149],["T_AS","as",149],["T_WHITESPACE"," ",149],["T_VARIABLE","$parentType",149],["T_WHITESPACE"," ",149],["T_DOUBLE_ARROW","=>",149],["T_WHITESPACE"," ",149],["T_VARIABLE","$entityIds",149],")",["T_WHITESPACE"," ",149],"{",["T_WHITESPACE","\n                ",149],["T_VARIABLE","$this",150],["T_OBJECT_OPERATOR","->",150],["T_STRING","_getIndexer",150],"(",["T_VARIABLE","$parentType",150],")",["T_OBJECT_OPERATOR","->",150],["T_STRING","reindexEntity",150],"(",["T_VARIABLE","$entityIds",150],")",";",["T_WHITESPACE","\n            ",150],"}",["T_WHITESPACE","\n        ",151],"}",["T_WHITESPACE"," ",152],["T_CATCH","catch",152],["T_WHITESPACE"," ",152],"(",["T_STRING","Exception",152],["T_WHITESPACE"," ",152],["T_VARIABLE","$e",152],")",["T_WHITESPACE"," ",152],"{",["T_WHITESPACE","\n            ",152],["T_VARIABLE","$adapter",153],["T_OBJECT_OPERATOR","->",153],["T_STRING","rollback",153],"(",")",";",["T_WHITESPACE","\n            ",153],["T_THROW","throw",154],["T_WHITESPACE"," ",154],["T_VARIABLE","$e",154],";",["T_WHITESPACE","\n        ",154],"}",["T_WHITESPACE","\n\n        ",155],["T_VARIABLE","$adapter",157],["T_OBJECT_OPERATOR","->",157],["T_STRING","commit",157],"(",")",";",["T_WHITESPACE","\n\n        ",157],["T_RETURN","return",159],["T_WHITESPACE"," ",159],["T_VARIABLE","$this",159],";",["T_WHITESPACE","\n    ",159],"}",["T_WHITESPACE","\n\n    ",160],["T_DOC_COMMENT","\/**\n     * Process product mass update action\n     *\n     * @param Mage_Index_Model_Event $event\n     * @return Mage_CatalogInventory_Model_Resource_Indexer_Stock\n     *\/",162],["T_WHITESPACE","\n    ",167],["T_PUBLIC","public",168],["T_WHITESPACE"," ",168],["T_FUNCTION","function",168],["T_WHITESPACE"," ",168],["T_STRING","catalogProductMassAction",168],"(",["T_STRING","Mage_Index_Model_Event",168],["T_WHITESPACE"," ",168],["T_VARIABLE","$event",168],")",["T_WHITESPACE","\n    ",168],"{",["T_WHITESPACE","\n        ",169],["T_VARIABLE","$data",170],["T_WHITESPACE"," ",170],"=",["T_WHITESPACE"," ",170],["T_VARIABLE","$event",170],["T_OBJECT_OPERATOR","->",170],["T_STRING","getNewData",170],"(",")",";",["T_WHITESPACE","\n        ",170],["T_IF","if",171],["T_WHITESPACE"," ",171],"(",["T_EMPTY","empty",171],"(",["T_VARIABLE","$data",171],"[",["T_CONSTANT_ENCAPSED_STRING","'reindex_stock_product_ids'",171],"]",")",")",["T_WHITESPACE"," ",171],"{",["T_WHITESPACE","\n            ",171],["T_RETURN","return",172],["T_WHITESPACE"," ",172],["T_VARIABLE","$this",172],";",["T_WHITESPACE","\n        ",172],"}",["T_WHITESPACE","\n\n        ",173],["T_VARIABLE","$adapter",175],["T_WHITESPACE"," ",175],"=",["T_WHITESPACE"," ",175],["T_VARIABLE","$this",175],["T_OBJECT_OPERATOR","->",175],["T_STRING","_getWriteAdapter",175],"(",")",";",["T_WHITESPACE","\n        ",175],["T_VARIABLE","$processIds",176],["T_WHITESPACE"," ",176],"=",["T_WHITESPACE"," ",176],["T_VARIABLE","$data",176],"[",["T_CONSTANT_ENCAPSED_STRING","'reindex_stock_product_ids'",176],"]",";",["T_WHITESPACE","\n        ",176],["T_VARIABLE","$select",177],["T_WHITESPACE"," ",177],"=",["T_WHITESPACE"," ",177],["T_VARIABLE","$adapter",177],["T_OBJECT_OPERATOR","->",177],["T_STRING","select",177],"(",")",["T_WHITESPACE","\n            ",177],["T_OBJECT_OPERATOR","->",178],["T_STRING","from",178],"(",["T_VARIABLE","$this",178],["T_OBJECT_OPERATOR","->",178],["T_STRING","getTable",178],"(",["T_CONSTANT_ENCAPSED_STRING","'catalog\/product'",178],")",",",["T_WHITESPACE"," ",178],["T_CONSTANT_ENCAPSED_STRING","'COUNT(*)'",178],")",";",["T_WHITESPACE","\n        ",178],["T_VARIABLE","$pCount",179],["T_WHITESPACE"," ",179],"=",["T_WHITESPACE"," ",179],["T_VARIABLE","$adapter",179],["T_OBJECT_OPERATOR","->",179],["T_STRING","fetchOne",179],"(",["T_VARIABLE","$select",179],")",";",["T_WHITESPACE","\n\n        ",179],["T_COMMENT","\/\/ if affected more 30% of all products - run reindex all products\n",181],["T_WHITESPACE","        ",182],["T_IF","if",182],["T_WHITESPACE"," ",182],"(",["T_VARIABLE","$pCount",182],["T_WHITESPACE"," ",182],"*",["T_WHITESPACE"," ",182],["T_DNUMBER","0.3",182],["T_WHITESPACE"," ",182],"<",["T_WHITESPACE"," ",182],["T_STRING","count",182],"(",["T_VARIABLE","$processIds",182],")",")",["T_WHITESPACE"," ",182],"{",["T_WHITESPACE","\n            ",182],["T_RETURN","return",183],["T_WHITESPACE"," ",183],["T_VARIABLE","$this",183],["T_OBJECT_OPERATOR","->",183],["T_STRING","reindexAll",183],"(",")",";",["T_WHITESPACE","\n        ",183],"}",["T_WHITESPACE","\n\n        ",184],["T_COMMENT","\/\/ calculate relations\n",186],["T_WHITESPACE","        ",187],["T_VARIABLE","$select",187],["T_WHITESPACE"," ",187],"=",["T_WHITESPACE"," ",187],["T_VARIABLE","$adapter",187],["T_OBJECT_OPERATOR","->",187],["T_STRING","select",187],"(",")",["T_WHITESPACE","\n            ",187],["T_OBJECT_OPERATOR","->",188],["T_STRING","from",188],"(",["T_VARIABLE","$this",188],["T_OBJECT_OPERATOR","->",188],["T_STRING","getTable",188],"(",["T_CONSTANT_ENCAPSED_STRING","'catalog\/product_relation'",188],")",",",["T_WHITESPACE"," ",188],["T_CONSTANT_ENCAPSED_STRING","'COUNT(DISTINCT parent_id)'",188],")",["T_WHITESPACE","\n            ",188],["T_OBJECT_OPERATOR","->",189],["T_STRING","where",189],"(",["T_CONSTANT_ENCAPSED_STRING","'child_id IN(?)'",189],",",["T_WHITESPACE"," ",189],["T_VARIABLE","$processIds",189],")",";",["T_WHITESPACE","\n        ",189],["T_VARIABLE","$aCount",190],["T_WHITESPACE"," ",190],"=",["T_WHITESPACE"," ",190],["T_VARIABLE","$adapter",190],["T_OBJECT_OPERATOR","->",190],["T_STRING","fetchOne",190],"(",["T_VARIABLE","$select",190],")",";",["T_WHITESPACE","\n        ",190],["T_VARIABLE","$select",191],["T_WHITESPACE"," ",191],"=",["T_WHITESPACE"," ",191],["T_VARIABLE","$adapter",191],["T_OBJECT_OPERATOR","->",191],["T_STRING","select",191],"(",")",["T_WHITESPACE","\n            ",191],["T_OBJECT_OPERATOR","->",192],["T_STRING","from",192],"(",["T_VARIABLE","$this",192],["T_OBJECT_OPERATOR","->",192],["T_STRING","getTable",192],"(",["T_CONSTANT_ENCAPSED_STRING","'catalog\/product_relation'",192],")",",",["T_WHITESPACE"," ",192],["T_CONSTANT_ENCAPSED_STRING","'COUNT(DISTINCT child_id)'",192],")",["T_WHITESPACE","\n            ",192],["T_OBJECT_OPERATOR","->",193],["T_STRING","where",193],"(",["T_CONSTANT_ENCAPSED_STRING","'parent_id IN(?)'",193],",",["T_WHITESPACE"," ",193],["T_VARIABLE","$processIds",193],")",";",["T_WHITESPACE","\n        ",193],["T_VARIABLE","$bCount",194],["T_WHITESPACE"," ",194],"=",["T_WHITESPACE"," ",194],["T_VARIABLE","$adapter",194],["T_OBJECT_OPERATOR","->",194],["T_STRING","fetchOne",194],"(",["T_VARIABLE","$select",194],")",";",["T_WHITESPACE","\n\n        ",194],["T_COMMENT","\/\/ if affected with relations more 30% of all products - run reindex all products\n",196],["T_WHITESPACE","        ",197],["T_IF","if",197],["T_WHITESPACE"," ",197],"(",["T_VARIABLE","$pCount",197],["T_WHITESPACE"," ",197],"*",["T_WHITESPACE"," ",197],["T_DNUMBER","0.3",197],["T_WHITESPACE"," ",197],"<",["T_WHITESPACE"," ",197],["T_STRING","count",197],"(",["T_VARIABLE","$processIds",197],")",["T_WHITESPACE"," ",197],"+",["T_WHITESPACE"," ",197],["T_VARIABLE","$aCount",197],["T_WHITESPACE"," ",197],"+",["T_WHITESPACE"," ",197],["T_VARIABLE","$bCount",197],")",["T_WHITESPACE"," ",197],"{",["T_WHITESPACE","\n            ",197],["T_RETURN","return",198],["T_WHITESPACE"," ",198],["T_VARIABLE","$this",198],["T_OBJECT_OPERATOR","->",198],["T_STRING","reindexAll",198],"(",")",";",["T_WHITESPACE","\n        ",198],"}",["T_WHITESPACE","\n\n\n        ",199],["T_COMMENT","\/\/ retrieve affected parent relation products\n",202],["T_WHITESPACE","        ",203],["T_VARIABLE","$parentIds",203],["T_WHITESPACE"," ",203],"=",["T_WHITESPACE"," ",203],["T_VARIABLE","$this",203],["T_OBJECT_OPERATOR","->",203],["T_STRING","getRelationsByChild",203],"(",["T_VARIABLE","$processIds",203],")",";",["T_WHITESPACE","\n        ",203],["T_IF","if",204],["T_WHITESPACE"," ",204],"(",["T_VARIABLE","$parentIds",204],")",["T_WHITESPACE"," ",204],"{",["T_WHITESPACE","\n            ",204],["T_VARIABLE","$processIds",205],["T_WHITESPACE"," ",205],"=",["T_WHITESPACE"," ",205],["T_STRING","array_merge",205],"(",["T_VARIABLE","$processIds",205],",",["T_WHITESPACE"," ",205],["T_VARIABLE","$parentIds",205],")",";",["T_WHITESPACE","\n        ",205],"}",["T_WHITESPACE","\n\n        ",206],["T_COMMENT","\/\/ retrieve products types\n",208],["T_WHITESPACE","        ",209],["T_VARIABLE","$select",209],["T_WHITESPACE"," ",209],"=",["T_WHITESPACE"," ",209],["T_VARIABLE","$adapter",209],["T_OBJECT_OPERATOR","->",209],["T_STRING","select",209],"(",")",["T_WHITESPACE","\n            ",209],["T_OBJECT_OPERATOR","->",210],["T_STRING","from",210],"(",["T_VARIABLE","$this",210],["T_OBJECT_OPERATOR","->",210],["T_STRING","getTable",210],"(",["T_CONSTANT_ENCAPSED_STRING","'catalog\/product'",210],")",",",["T_WHITESPACE"," ",210],["T_ARRAY","array",210],"(",["T_CONSTANT_ENCAPSED_STRING","'entity_id'",210],",",["T_WHITESPACE"," ",210],["T_CONSTANT_ENCAPSED_STRING","'type_id'",210],")",")",["T_WHITESPACE","\n            ",210],["T_OBJECT_OPERATOR","->",211],["T_STRING","where",211],"(",["T_CONSTANT_ENCAPSED_STRING","'entity_id IN(?)'",211],",",["T_WHITESPACE"," ",211],["T_VARIABLE","$processIds",211],")",";",["T_WHITESPACE","\n        ",211],["T_VARIABLE","$query",212],["T_WHITESPACE","  ",212],"=",["T_WHITESPACE"," ",212],["T_VARIABLE","$select",212],["T_OBJECT_OPERATOR","->",212],["T_STRING","query",212],"(",["T_STRING","Zend_Db",212],["T_DOUBLE_COLON","::",212],["T_STRING","FETCH_ASSOC",212],")",";",["T_WHITESPACE","\n        ",212],["T_VARIABLE","$byType",213],["T_WHITESPACE"," ",213],"=",["T_WHITESPACE"," ",213],["T_ARRAY","array",213],"(",")",";",["T_WHITESPACE","\n        ",213],["T_WHILE","while",214],["T_WHITESPACE"," ",214],"(",["T_VARIABLE","$row",214],["T_WHITESPACE"," ",214],"=",["T_WHITESPACE"," ",214],["T_VARIABLE","$query",214],["T_OBJECT_OPERATOR","->",214],["T_STRING","fetch",214],"(",")",")",["T_WHITESPACE"," ",214],"{",["T_WHITESPACE","\n            ",214],["T_VARIABLE","$byType",215],"[",["T_VARIABLE","$row",215],"[",["T_CONSTANT_ENCAPSED_STRING","'type_id'",215],"]","]","[","]",["T_WHITESPACE"," ",215],"=",["T_WHITESPACE"," ",215],["T_VARIABLE","$row",215],"[",["T_CONSTANT_ENCAPSED_STRING","'entity_id'",215],"]",";",["T_WHITESPACE","\n        ",215],"}",["T_WHITESPACE","\n\n        ",216],["T_VARIABLE","$adapter",218],["T_OBJECT_OPERATOR","->",218],["T_STRING","beginTransaction",218],"(",")",";",["T_WHITESPACE","\n        ",218],["T_TRY","try",219],["T_WHITESPACE"," ",219],"{",["T_WHITESPACE","\n            ",219],["T_VARIABLE","$indexers",220],["T_WHITESPACE"," ",220],"=",["T_WHITESPACE"," ",220],["T_VARIABLE","$this",220],["T_OBJECT_OPERATOR","->",220],["T_STRING","_getTypeIndexers",220],"(",")",";",["T_WHITESPACE","\n            ",220],["T_FOREACH","foreach",221],["T_WHITESPACE"," ",221],"(",["T_VARIABLE","$indexers",221],["T_WHITESPACE"," ",221],["T_AS","as",221],["T_WHITESPACE"," ",221],["T_VARIABLE","$indexer",221],")",["T_WHITESPACE"," ",221],"{",["T_WHITESPACE","\n                ",221],["T_IF","if",222],["T_WHITESPACE"," ",222],"(","!",["T_EMPTY","empty",222],"(",["T_VARIABLE","$byType",222],"[",["T_VARIABLE","$indexer",222],["T_OBJECT_OPERATOR","->",222],["T_STRING","getTypeId",222],"(",")","]",")",")",["T_WHITESPACE"," ",222],"{",["T_WHITESPACE","\n                    ",222],["T_VARIABLE","$indexer",223],["T_OBJECT_OPERATOR","->",223],["T_STRING","reindexEntity",223],"(",["T_VARIABLE","$byType",223],"[",["T_VARIABLE","$indexer",223],["T_OBJECT_OPERATOR","->",223],["T_STRING","getTypeId",223],"(",")","]",")",";",["T_WHITESPACE","\n                ",223],"}",["T_WHITESPACE","\n            ",224],"}",["T_WHITESPACE","\n        ",225],"}",["T_WHITESPACE"," ",226],["T_CATCH","catch",226],["T_WHITESPACE"," ",226],"(",["T_STRING","Exception",226],["T_WHITESPACE"," ",226],["T_VARIABLE","$e",226],")",["T_WHITESPACE"," ",226],"{",["T_WHITESPACE","\n            ",226],["T_VARIABLE","$adapter",227],["T_OBJECT_OPERATOR","->",227],["T_STRING","rollback",227],"(",")",";",["T_WHITESPACE","\n            ",227],["T_THROW","throw",228],["T_WHITESPACE"," ",228],["T_VARIABLE","$e",228],";",["T_WHITESPACE","\n        ",228],"}",["T_WHITESPACE","\n        ",229],["T_VARIABLE","$adapter",230],["T_OBJECT_OPERATOR","->",230],["T_STRING","commit",230],"(",")",";",["T_WHITESPACE","\n\n        ",230],["T_RETURN","return",232],["T_WHITESPACE"," ",232],["T_VARIABLE","$this",232],";",["T_WHITESPACE","\n    ",232],"}",["T_WHITESPACE","\n\n    ",233],["T_DOC_COMMENT","\/**\n     * Rebuild all index data\n     *\n     * @return Mage_CatalogInventory_Model_Resource_Indexer_Stock\n     *\/",235],["T_WHITESPACE","\n    ",239],["T_PUBLIC","public",240],["T_WHITESPACE"," ",240],["T_FUNCTION","function",240],["T_WHITESPACE"," ",240],["T_STRING","reindexAll",240],"(",")",["T_WHITESPACE","\n    ",240],"{",["T_WHITESPACE","\n        ",241],["T_VARIABLE","$this",242],["T_OBJECT_OPERATOR","->",242],["T_STRING","useIdxTable",242],"(",["T_STRING","true",242],")",";",["T_WHITESPACE","\n        ",242],["T_VARIABLE","$this",243],["T_OBJECT_OPERATOR","->",243],["T_STRING","beginTransaction",243],"(",")",";",["T_WHITESPACE","\n        ",243],["T_TRY","try",244],["T_WHITESPACE"," ",244],"{",["T_WHITESPACE","\n            ",244],["T_VARIABLE","$this",245],["T_OBJECT_OPERATOR","->",245],["T_STRING","clearTemporaryIndexTable",245],"(",")",";",["T_WHITESPACE","\n\n            ",245],["T_FOREACH","foreach",247],["T_WHITESPACE"," ",247],"(",["T_VARIABLE","$this",247],["T_OBJECT_OPERATOR","->",247],["T_STRING","_getTypeIndexers",247],"(",")",["T_WHITESPACE"," ",247],["T_AS","as",247],["T_WHITESPACE"," ",247],["T_VARIABLE","$indexer",247],")",["T_WHITESPACE"," ",247],"{",["T_WHITESPACE","\n                ",247],["T_VARIABLE","$indexer",248],["T_OBJECT_OPERATOR","->",248],["T_STRING","reindexAll",248],"(",")",";",["T_WHITESPACE","\n            ",248],"}",["T_WHITESPACE","\n\n            ",249],["T_VARIABLE","$this",251],["T_OBJECT_OPERATOR","->",251],["T_STRING","syncData",251],"(",")",";",["T_WHITESPACE","\n            ",251],["T_VARIABLE","$this",252],["T_OBJECT_OPERATOR","->",252],["T_STRING","commit",252],"(",")",";",["T_WHITESPACE","\n        ",252],"}",["T_WHITESPACE"," ",253],["T_CATCH","catch",253],["T_WHITESPACE"," ",253],"(",["T_STRING","Exception",253],["T_WHITESPACE"," ",253],["T_VARIABLE","$e",253],")",["T_WHITESPACE"," ",253],"{",["T_WHITESPACE","\n            ",253],["T_VARIABLE","$this",254],["T_OBJECT_OPERATOR","->",254],["T_STRING","rollBack",254],"(",")",";",["T_WHITESPACE","\n            ",254],["T_THROW","throw",255],["T_WHITESPACE"," ",255],["T_VARIABLE","$e",255],";",["T_WHITESPACE","\n        ",255],"}",["T_WHITESPACE","\n        ",256],["T_RETURN","return",257],["T_WHITESPACE"," ",257],["T_VARIABLE","$this",257],";",["T_WHITESPACE","\n    ",257],"}",["T_WHITESPACE","\n\n    ",258],["T_DOC_COMMENT","\/**\n     * Retrieve Stock Indexer Models per Product Type\n     *\n     * @return array\n     *\/",260],["T_WHITESPACE","\n    ",264],["T_PROTECTED","protected",265],["T_WHITESPACE"," ",265],["T_FUNCTION","function",265],["T_WHITESPACE"," ",265],["T_STRING","_getTypeIndexers",265],"(",")",["T_WHITESPACE","\n    ",265],"{",["T_WHITESPACE","\n        ",266],["T_IF","if",267],["T_WHITESPACE"," ",267],"(",["T_STRING","is_null",267],"(",["T_VARIABLE","$this",267],["T_OBJECT_OPERATOR","->",267],["T_STRING","_indexers",267],")",")",["T_WHITESPACE"," ",267],"{",["T_WHITESPACE","\n            ",267],["T_VARIABLE","$this",268],["T_OBJECT_OPERATOR","->",268],["T_STRING","_indexers",268],["T_WHITESPACE"," ",268],"=",["T_WHITESPACE"," ",268],["T_ARRAY","array",268],"(",")",";",["T_WHITESPACE","\n            ",268],["T_VARIABLE","$types",269],["T_WHITESPACE"," ",269],"=",["T_WHITESPACE"," ",269],["T_STRING","Mage",269],["T_DOUBLE_COLON","::",269],["T_STRING","getSingleton",269],"(",["T_CONSTANT_ENCAPSED_STRING","'catalog\/product_type'",269],")",["T_OBJECT_OPERATOR","->",269],["T_STRING","getTypesByPriority",269],"(",")",";",["T_WHITESPACE","\n            ",269],["T_FOREACH","foreach",270],["T_WHITESPACE"," ",270],"(",["T_VARIABLE","$types",270],["T_WHITESPACE"," ",270],["T_AS","as",270],["T_WHITESPACE"," ",270],["T_VARIABLE","$typeId",270],["T_WHITESPACE"," ",270],["T_DOUBLE_ARROW","=>",270],["T_WHITESPACE"," ",270],["T_VARIABLE","$typeInfo",270],")",["T_WHITESPACE"," ",270],"{",["T_WHITESPACE","\n                ",270],["T_IF","if",271],["T_WHITESPACE"," ",271],"(",["T_ISSET","isset",271],"(",["T_VARIABLE","$typeInfo",271],"[",["T_CONSTANT_ENCAPSED_STRING","'stock_indexer'",271],"]",")",")",["T_WHITESPACE"," ",271],"{",["T_WHITESPACE","\n                    ",271],["T_VARIABLE","$modelName",272],["T_WHITESPACE"," ",272],"=",["T_WHITESPACE"," ",272],["T_VARIABLE","$typeInfo",272],"[",["T_CONSTANT_ENCAPSED_STRING","'stock_indexer'",272],"]",";",["T_WHITESPACE","\n                ",272],"}",["T_WHITESPACE"," ",273],["T_ELSE","else",273],["T_WHITESPACE"," ",273],"{",["T_WHITESPACE","\n                    ",273],["T_VARIABLE","$modelName",274],["T_WHITESPACE"," ",274],"=",["T_WHITESPACE"," ",274],["T_VARIABLE","$this",274],["T_OBJECT_OPERATOR","->",274],["T_STRING","_defaultIndexer",274],";",["T_WHITESPACE","\n                ",274],"}",["T_WHITESPACE","\n                ",275],["T_VARIABLE","$isComposite",276],["T_WHITESPACE"," ",276],"=",["T_WHITESPACE"," ",276],"!",["T_EMPTY","empty",276],"(",["T_VARIABLE","$typeInfo",276],"[",["T_CONSTANT_ENCAPSED_STRING","'composite'",276],"]",")",";",["T_WHITESPACE","\n                ",276],["T_VARIABLE","$indexer",277],["T_WHITESPACE"," ",277],"=",["T_WHITESPACE"," ",277],["T_STRING","Mage",277],["T_DOUBLE_COLON","::",277],["T_STRING","getResourceModel",277],"(",["T_VARIABLE","$modelName",277],")",["T_WHITESPACE","\n                    ",277],["T_OBJECT_OPERATOR","->",278],["T_STRING","setTypeId",278],"(",["T_VARIABLE","$typeId",278],")",["T_WHITESPACE","\n                    ",278],["T_OBJECT_OPERATOR","->",279],["T_STRING","setIsComposite",279],"(",["T_VARIABLE","$isComposite",279],")",";",["T_WHITESPACE","\n\n                ",279],["T_VARIABLE","$this",281],["T_OBJECT_OPERATOR","->",281],["T_STRING","_indexers",281],"[",["T_VARIABLE","$typeId",281],"]",["T_WHITESPACE"," ",281],"=",["T_WHITESPACE"," ",281],["T_VARIABLE","$indexer",281],";",["T_WHITESPACE","\n            ",281],"}",["T_WHITESPACE","\n        ",282],"}",["T_WHITESPACE","\n        ",283],["T_RETURN","return",284],["T_WHITESPACE"," ",284],["T_VARIABLE","$this",284],["T_OBJECT_OPERATOR","->",284],["T_STRING","_indexers",284],";",["T_WHITESPACE","\n    ",284],"}",["T_WHITESPACE","\n\n    ",285],["T_DOC_COMMENT","\/**\n     * Retrieve Stock indexer by Product Type\n     *\n     * @param string $productTypeId\n     * @return Mage_CatalogInventory_Model_Resource_Indexer_Stock_Interface\n     *\/",287],["T_WHITESPACE","\n    ",292],["T_PROTECTED","protected",293],["T_WHITESPACE"," ",293],["T_FUNCTION","function",293],["T_WHITESPACE"," ",293],["T_STRING","_getIndexer",293],"(",["T_VARIABLE","$productTypeId",293],")",["T_WHITESPACE","\n    ",293],"{",["T_WHITESPACE","\n        ",294],["T_VARIABLE","$types",295],["T_WHITESPACE"," ",295],"=",["T_WHITESPACE"," ",295],["T_VARIABLE","$this",295],["T_OBJECT_OPERATOR","->",295],["T_STRING","_getTypeIndexers",295],"(",")",";",["T_WHITESPACE","\n        ",295],["T_IF","if",296],["T_WHITESPACE"," ",296],"(","!",["T_ISSET","isset",296],"(",["T_VARIABLE","$types",296],"[",["T_VARIABLE","$productTypeId",296],"]",")",")",["T_WHITESPACE"," ",296],"{",["T_WHITESPACE","\n            ",296],["T_STRING","Mage",297],["T_DOUBLE_COLON","::",297],["T_STRING","throwException",297],"(",["T_STRING","Mage",297],["T_DOUBLE_COLON","::",297],["T_STRING","helper",297],"(",["T_CONSTANT_ENCAPSED_STRING","'catalog'",297],")",["T_OBJECT_OPERATOR","->",297],["T_STRING","__",297],"(",["T_CONSTANT_ENCAPSED_STRING","'Unsupported product type \"%s\".'",297],",",["T_WHITESPACE"," ",297],["T_VARIABLE","$productTypeId",297],")",")",";",["T_WHITESPACE","\n        ",297],"}",["T_WHITESPACE","\n        ",298],["T_RETURN","return",299],["T_WHITESPACE"," ",299],["T_VARIABLE","$types",299],"[",["T_VARIABLE","$productTypeId",299],"]",";",["T_WHITESPACE","\n    ",299],"}",["T_WHITESPACE","\n\n    ",300],["T_DOC_COMMENT","\/**\n     * Retrieve parent ids and types by child id\n     * Return array with key product_id and value as product type id\n     *\n     * @param int $childId\n     * @return array\n     *\/",302],["T_WHITESPACE","\n    ",308],["T_PUBLIC","public",309],["T_WHITESPACE"," ",309],["T_FUNCTION","function",309],["T_WHITESPACE"," ",309],["T_STRING","getProductParentsByChild",309],"(",["T_VARIABLE","$childId",309],")",["T_WHITESPACE","\n    ",309],"{",["T_WHITESPACE","\n        ",310],["T_VARIABLE","$write",311],["T_WHITESPACE"," ",311],"=",["T_WHITESPACE"," ",311],["T_VARIABLE","$this",311],["T_OBJECT_OPERATOR","->",311],["T_STRING","_getWriteAdapter",311],"(",")",";",["T_WHITESPACE","\n        ",311],["T_VARIABLE","$select",312],["T_WHITESPACE"," ",312],"=",["T_WHITESPACE"," ",312],["T_VARIABLE","$write",312],["T_OBJECT_OPERATOR","->",312],["T_STRING","select",312],"(",")",["T_WHITESPACE","\n            ",312],["T_OBJECT_OPERATOR","->",313],["T_STRING","from",313],"(",["T_ARRAY","array",313],"(",["T_CONSTANT_ENCAPSED_STRING","'l'",313],["T_WHITESPACE"," ",313],["T_DOUBLE_ARROW","=>",313],["T_WHITESPACE"," ",313],["T_VARIABLE","$this",313],["T_OBJECT_OPERATOR","->",313],["T_STRING","getTable",313],"(",["T_CONSTANT_ENCAPSED_STRING","'catalog\/product_relation'",313],")",")",",",["T_WHITESPACE"," ",313],["T_ARRAY","array",313],"(",["T_CONSTANT_ENCAPSED_STRING","'parent_id'",313],")",")",["T_WHITESPACE","\n            ",313],["T_OBJECT_OPERATOR","->",314],["T_STRING","join",314],"(",["T_WHITESPACE","\n                ",314],["T_ARRAY","array",315],"(",["T_CONSTANT_ENCAPSED_STRING","'e'",315],["T_WHITESPACE"," ",315],["T_DOUBLE_ARROW","=>",315],["T_WHITESPACE"," ",315],["T_VARIABLE","$this",315],["T_OBJECT_OPERATOR","->",315],["T_STRING","getTable",315],"(",["T_CONSTANT_ENCAPSED_STRING","'catalog\/product'",315],")",")",",",["T_WHITESPACE","\n                ",315],["T_CONSTANT_ENCAPSED_STRING","'l.parent_id=e.entity_id'",316],",",["T_WHITESPACE","\n                ",316],["T_ARRAY","array",317],"(",["T_CONSTANT_ENCAPSED_STRING","'e.type_id'",317],")",["T_WHITESPACE","\n            ",317],")",["T_WHITESPACE","\n            ",318],["T_OBJECT_OPERATOR","->",319],["T_STRING","where",319],"(",["T_CONSTANT_ENCAPSED_STRING","'l.child_id = :child_id'",319],")",";",["T_WHITESPACE","\n        ",319],["T_RETURN","return",320],["T_WHITESPACE"," ",320],["T_VARIABLE","$write",320],["T_OBJECT_OPERATOR","->",320],["T_STRING","fetchPairs",320],"(",["T_VARIABLE","$select",320],",",["T_WHITESPACE"," ",320],["T_ARRAY","array",320],"(",["T_CONSTANT_ENCAPSED_STRING","':child_id'",320],["T_WHITESPACE"," ",320],["T_DOUBLE_ARROW","=>",320],["T_WHITESPACE"," ",320],["T_VARIABLE","$childId",320],")",")",";",["T_WHITESPACE","\n    ",320],"}",["T_WHITESPACE","\n\n    ",321],["T_DOC_COMMENT","\/**\n     * Retrieve temporary index table name\n     *\n     * @param string $table\n     * @return string\n     *\/",323],["T_WHITESPACE","\n    ",328],["T_PUBLIC","public",329],["T_WHITESPACE"," ",329],["T_FUNCTION","function",329],["T_WHITESPACE"," ",329],["T_STRING","getIdxTable",329],"(",["T_VARIABLE","$table",329],["T_WHITESPACE"," ",329],"=",["T_WHITESPACE"," ",329],["T_STRING","null",329],")",["T_WHITESPACE","\n    ",329],"{",["T_WHITESPACE","\n        ",330],["T_IF","if",331],["T_WHITESPACE"," ",331],"(",["T_VARIABLE","$this",331],["T_OBJECT_OPERATOR","->",331],["T_STRING","useIdxTable",331],"(",")",")",["T_WHITESPACE"," ",331],"{",["T_WHITESPACE","\n            ",331],["T_RETURN","return",332],["T_WHITESPACE"," ",332],["T_VARIABLE","$this",332],["T_OBJECT_OPERATOR","->",332],["T_STRING","getTable",332],"(",["T_CONSTANT_ENCAPSED_STRING","'cataloginventory\/stock_status_indexer_idx'",332],")",";",["T_WHITESPACE","\n        ",332],"}",["T_WHITESPACE","\n        ",333],["T_RETURN","return",334],["T_WHITESPACE"," ",334],["T_VARIABLE","$this",334],["T_OBJECT_OPERATOR","->",334],["T_STRING","getTable",334],"(",["T_CONSTANT_ENCAPSED_STRING","'cataloginventory\/stock_status_indexer_tmp'",334],")",";",["T_WHITESPACE","\n    ",334],"}",["T_WHITESPACE","\n",335],"}",["T_WHITESPACE","\n",336]]
[["T_OPEN_TAG","<?php\n",1],["T_DOC_COMMENT","\/**\n * Magento\n *\n * NOTICE OF LICENSE\n *\n * This source file is subject to the Open Software License (OSL 3.0)\n * that is bundled with this package in the file LICENSE.txt.\n * It is also available through the world-wide-web at this URL:\n * http:\/\/opensource.org\/licenses\/osl-3.0.php\n * If you did not receive a copy of the license and are unable to\n * obtain it through the world-wide-web, please send an email\n * to license@magento.com so we can send you a copy immediately.\n *\n * DISCLAIMER\n *\n * Do not edit or add to this file if you wish to upgrade Magento to newer\n * versions in the future. If you wish to customize Magento for your\n * needs please refer to http:\/\/www.magento.com for more information.\n *\n * @category    Mage\n * @package     Mage_Core\n * @copyright  Copyright (c) 2006-2016 X.commerce, Inc. and affiliates (http:\/\/www.magento.com)\n * @license    http:\/\/opensource.org\/licenses\/osl-3.0.php  Open Software License (OSL 3.0)\n *\/",2],["T_WHITESPACE","\n\n",25],["T_DOC_COMMENT","\/**\n * Resource Setup Model\n *\n * @category    Mage\n * @package     Mage_Core\n * @author      Magento Core Team <core@magentocommerce.com>\n *\/",27],["T_WHITESPACE","\n",33],["T_CLASS","class",34],["T_WHITESPACE"," ",34],["T_STRING","Mage_Core_Model_Resource_Setup",34],["T_WHITESPACE","\n",34],"{",["T_WHITESPACE","\n    ",35],["T_CONST","const",36],["T_WHITESPACE"," ",36],["T_STRING","DEFAULT_SETUP_CONNECTION",36],["T_WHITESPACE","  ",36],"=",["T_WHITESPACE"," ",36],["T_CONSTANT_ENCAPSED_STRING","'core_setup'",36],";",["T_WHITESPACE","\n    ",36],["T_CONST","const",37],["T_WHITESPACE"," ",37],["T_STRING","VERSION_COMPARE_EQUAL",37],["T_WHITESPACE","     ",37],"=",["T_WHITESPACE"," ",37],["T_LNUMBER","0",37],";",["T_WHITESPACE","\n    ",37],["T_CONST","const",38],["T_WHITESPACE"," ",38],["T_STRING","VERSION_COMPARE_LOWER",38],["T_WHITESPACE","     ",38],"=",["T_WHITESPACE"," ",38],"-",["T_LNUMBER","1",38],";",["T_WHITESPACE","\n    ",38],["T_CONST","const",39],["T_WHITESPACE"," ",39],["T_STRING","VERSION_COMPARE_GREATER",39],["T_WHITESPACE","   ",39],"=",["T_WHITESPACE"," ",39],["T_LNUMBER","1",39],";",["T_WHITESPACE","\n\n    ",39],["T_CONST","const",41],["T_WHITESPACE"," ",41],["T_STRING","TYPE_DB_INSTALL",41],["T_WHITESPACE","           ",41],"=",["T_WHITESPACE"," ",41],["T_CONSTANT_ENCAPSED_STRING","'install'",41],";",["T_WHITESPACE","\n    ",41],["T_CONST","const",42],["T_WHITESPACE"," ",42],["T_STRING","TYPE_DB_UPGRADE",42],["T_WHITESPACE","           ",42],"=",["T_WHITESPACE"," ",42],["T_CONSTANT_ENCAPSED_STRING","'upgrade'",42],";",["T_WHITESPACE","\n    ",42],["T_CONST","const",43],["T_WHITESPACE"," ",43],["T_STRING","TYPE_DB_ROLLBACK",43],["T_WHITESPACE","          ",43],"=",["T_WHITESPACE"," ",43],["T_CONSTANT_ENCAPSED_STRING","'rollback'",43],";",["T_WHITESPACE","\n    ",43],["T_CONST","const",44],["T_WHITESPACE"," ",44],["T_STRING","TYPE_DB_UNINSTALL",44],["T_WHITESPACE","         ",44],"=",["T_WHITESPACE"," ",44],["T_CONSTANT_ENCAPSED_STRING","'uninstall'",44],";",["T_WHITESPACE","\n    ",44],["T_CONST","const",45],["T_WHITESPACE"," ",45],["T_STRING","TYPE_DATA_INSTALL",45],["T_WHITESPACE","         ",45],"=",["T_WHITESPACE"," ",45],["T_CONSTANT_ENCAPSED_STRING","'data-install'",45],";",["T_WHITESPACE","\n    ",45],["T_CONST","const",46],["T_WHITESPACE"," ",46],["T_STRING","TYPE_DATA_UPGRADE",46],["T_WHITESPACE","         ",46],"=",["T_WHITESPACE"," ",46],["T_CONSTANT_ENCAPSED_STRING","'data-upgrade'",46],";",["T_WHITESPACE","\n\n    ",46],["T_DOC_COMMENT","\/**\n     * Setup resource name\n     * @var string\n     *\/",48],["T_WHITESPACE","\n    ",51],["T_PROTECTED","protected",52],["T_WHITESPACE"," ",52],["T_VARIABLE","$_resourceName",52],";",["T_WHITESPACE","\n\n    ",52],["T_DOC_COMMENT","\/**\n     * Setup resource configuration object\n     *\n     * @var Varien_Simplexml_Object\n     *\/",54],["T_WHITESPACE","\n    ",58],["T_PROTECTED","protected",59],["T_WHITESPACE"," ",59],["T_VARIABLE","$_resourceConfig",59],";",["T_WHITESPACE","\n\n    ",59],["T_DOC_COMMENT","\/**\n     * Connection configuration object\n     *\n     * @var Varien_Simplexml_Object\n     *\/",61],["T_WHITESPACE","\n    ",65],["T_PROTECTED","protected",66],["T_WHITESPACE"," ",66],["T_VARIABLE","$_connectionConfig",66],";",["T_WHITESPACE","\n\n    ",66],["T_DOC_COMMENT","\/**\n     * Setup module configuration object\n     *\n     * @var Varien_Simplexml_Object\n     *\/",68],["T_WHITESPACE","\n    ",72],["T_PROTECTED","protected",73],["T_WHITESPACE"," ",73],["T_VARIABLE","$_moduleConfig",73],";",["T_WHITESPACE","\n\n    ",73],["T_DOC_COMMENT","\/**\n     * Call afterApplyAllUpdates method flag\n     *\n     * @var boolean\n     *\/",75],["T_WHITESPACE","\n    ",79],["T_PROTECTED","protected",80],["T_WHITESPACE"," ",80],["T_VARIABLE","$_callAfterApplyAllUpdates",80],["T_WHITESPACE"," ",80],"=",["T_WHITESPACE"," ",80],["T_STRING","false",80],";",["T_WHITESPACE","\n\n    ",80],["T_DOC_COMMENT","\/**\n     * Setup Connection\n     *\n     * @var Varien_Db_Adapter_Pdo_Mysql\n     *\/",82],["T_WHITESPACE","\n    ",86],["T_PROTECTED","protected",87],["T_WHITESPACE"," ",87],["T_VARIABLE","$_conn",87],";",["T_WHITESPACE","\n    ",87],["T_DOC_COMMENT","\/**\n     * Tables cache array\n     *\n     * @var array\n     *\/",88],["T_WHITESPACE","\n    ",92],["T_PROTECTED","protected",93],["T_WHITESPACE"," ",93],["T_VARIABLE","$_tables",93],["T_WHITESPACE"," ",93],"=",["T_WHITESPACE"," ",93],["T_ARRAY","array",93],"(",")",";",["T_WHITESPACE","\n    ",93],["T_DOC_COMMENT","\/**\n     * Tables data cache array\n     *\n     * @var array\n     *\/",94],["T_WHITESPACE","\n    ",98],["T_PROTECTED","protected",99],["T_WHITESPACE"," ",99],["T_VARIABLE","$_setupCache",99],["T_WHITESPACE"," ",99],"=",["T_WHITESPACE"," ",99],["T_ARRAY","array",99],"(",")",";",["T_WHITESPACE","\n\n    ",99],["T_DOC_COMMENT","\/**\n     * Flag which shows, that setup has hooked queries from DB adapter\n     *\n     * @var bool\n     *\/",101],["T_WHITESPACE","\n    ",105],["T_PROTECTED","protected",106],["T_WHITESPACE"," ",106],["T_VARIABLE","$_queriesHooked",106],["T_WHITESPACE"," ",106],"=",["T_WHITESPACE"," ",106],["T_STRING","false",106],";",["T_WHITESPACE","\n\n    ",106],["T_DOC_COMMENT","\/**\n     * Flag which allow to detect that some schema update was applied dueting request\n     *\n     * @var bool\n     *\/",108],["T_WHITESPACE","\n    ",112],["T_PROTECTED","protected",113],["T_WHITESPACE"," ",113],["T_STATIC","static",113],["T_WHITESPACE"," ",113],["T_VARIABLE","$_hadUpdates",113],";",["T_WHITESPACE","\n\n    ",113],["T_DOC_COMMENT","\/**\n     * Flag which allow run data install or upgrade\n     *\n     * @var bool\n     *\/",115],["T_WHITESPACE","\n    ",119],["T_PROTECTED","protected",120],["T_WHITESPACE"," ",120],["T_STATIC","static",120],["T_WHITESPACE"," ",120],["T_VARIABLE","$_schemaUpdatesChecked",120],";",["T_WHITESPACE","\n\n    ",120],["T_DOC_COMMENT","\/**\n     * Initialize resource configurations, setup connection, etc\n     *\n     * @param string $resourceName the setup resource name\n     *\/",122],["T_WHITESPACE","\n    ",126],["T_PUBLIC","public",127],["T_WHITESPACE"," ",127],["T_FUNCTION","function",127],["T_WHITESPACE"," ",127],["T_STRING","__construct",127],"(",["T_VARIABLE","$resourceName",127],")",["T_WHITESPACE","\n    ",127],"{",["T_WHITESPACE","\n        ",128],["T_VARIABLE","$config",129],["T_WHITESPACE"," ",129],"=",["T_WHITESPACE"," ",129],["T_STRING","Mage",129],["T_DOUBLE_COLON","::",129],["T_STRING","getConfig",129],"(",")",";",["T_WHITESPACE","\n        ",129],["T_VARIABLE","$this",130],["T_OBJECT_OPERATOR","->",130],["T_STRING","_resourceName",130],["T_WHITESPACE"," ",130],"=",["T_WHITESPACE"," ",130],["T_VARIABLE","$resourceName",130],";",["T_WHITESPACE","\n        ",130],["T_VARIABLE","$this",131],["T_OBJECT_OPERATOR","->",131],["T_STRING","_resourceConfig",131],["T_WHITESPACE"," ",131],"=",["T_WHITESPACE"," ",131],["T_VARIABLE","$config",131],["T_OBJECT_OPERATOR","->",131],["T_STRING","getResourceConfig",131],"(",["T_VARIABLE","$resourceName",131],")",";",["T_WHITESPACE","\n        ",131],["T_VARIABLE","$connection",132],["T_WHITESPACE"," ",132],"=",["T_WHITESPACE"," ",132],["T_VARIABLE","$config",132],["T_OBJECT_OPERATOR","->",132],["T_STRING","getResourceConnectionConfig",132],"(",["T_VARIABLE","$resourceName",132],")",";",["T_WHITESPACE","\n        ",132],["T_IF","if",133],["T_WHITESPACE"," ",133],"(",["T_VARIABLE","$connection",133],")",["T_WHITESPACE"," ",133],"{",["T_WHITESPACE","\n            ",133],["T_VARIABLE","$this",134],["T_OBJECT_OPERATOR","->",134],["T_STRING","_connectionConfig",134],["T_WHITESPACE"," ",134],"=",["T_WHITESPACE"," ",134],["T_VARIABLE","$connection",134],";",["T_WHITESPACE","\n        ",134],"}",["T_WHITESPACE"," ",135],["T_ELSE","else",135],["T_WHITESPACE"," ",135],"{",["T_WHITESPACE","\n            ",135],["T_VARIABLE","$this",136],["T_OBJECT_OPERATOR","->",136],["T_STRING","_connectionConfig",136],["T_WHITESPACE"," ",136],"=",["T_WHITESPACE"," ",136],["T_VARIABLE","$config",136],["T_OBJECT_OPERATOR","->",136],["T_STRING","getResourceConnectionConfig",136],"(",["T_STRING","self",136],["T_DOUBLE_COLON","::",136],["T_STRING","DEFAULT_SETUP_CONNECTION",136],")",";",["T_WHITESPACE","\n        ",136],"}",["T_WHITESPACE","\n\n        ",137],["T_VARIABLE","$modName",139],["T_WHITESPACE"," ",139],"=",["T_WHITESPACE"," ",139],["T_STRING_CAST","(string)",139],["T_VARIABLE","$this",139],["T_OBJECT_OPERATOR","->",139],["T_STRING","_resourceConfig",139],["T_OBJECT_OPERATOR","->",139],["T_STRING","setup",139],["T_OBJECT_OPERATOR","->",139],["T_STRING","module",139],";",["T_WHITESPACE","\n        ",139],["T_VARIABLE","$this",140],["T_OBJECT_OPERATOR","->",140],["T_STRING","_moduleConfig",140],["T_WHITESPACE"," ",140],"=",["T_WHITESPACE"," ",140],["T_VARIABLE","$config",140],["T_OBJECT_OPERATOR","->",140],["T_STRING","getModuleConfig",140],"(",["T_VARIABLE","$modName",140],")",";",["T_WHITESPACE","\n        ",140],["T_VARIABLE","$connection",141],["T_WHITESPACE"," ",141],"=",["T_WHITESPACE"," ",141],["T_STRING","Mage",141],["T_DOUBLE_COLON","::",141],["T_STRING","getSingleton",141],"(",["T_CONSTANT_ENCAPSED_STRING","'core\/resource'",141],")",["T_OBJECT_OPERATOR","->",141],["T_STRING","getConnection",141],"(",["T_VARIABLE","$this",141],["T_OBJECT_OPERATOR","->",141],["T_STRING","_resourceName",141],")",";",["T_WHITESPACE","\n        ",141],["T_DOC_COMMENT","\/**\n         * If module setup configuration wasn't loaded\n         *\/",142],["T_WHITESPACE","\n        ",144],["T_IF","if",145],["T_WHITESPACE"," ",145],"(","!",["T_VARIABLE","$connection",145],")",["T_WHITESPACE"," ",145],"{",["T_WHITESPACE","\n            ",145],["T_VARIABLE","$connection",146],["T_WHITESPACE"," ",146],"=",["T_WHITESPACE"," ",146],["T_STRING","Mage",146],["T_DOUBLE_COLON","::",146],["T_STRING","getSingleton",146],"(",["T_CONSTANT_ENCAPSED_STRING","'core\/resource'",146],")",["T_OBJECT_OPERATOR","->",146],["T_STRING","getConnection",146],"(",["T_VARIABLE","$this",146],["T_OBJECT_OPERATOR","->",146],["T_STRING","_resourceName",146],")",";",["T_WHITESPACE","\n        ",146],"}",["T_WHITESPACE","\n        ",147],["T_VARIABLE","$this",148],["T_OBJECT_OPERATOR","->",148],["T_STRING","_conn",148],["T_WHITESPACE"," ",148],"=",["T_WHITESPACE"," ",148],["T_VARIABLE","$connection",148],";",["T_WHITESPACE","\n    ",148],"}",["T_WHITESPACE","\n\n    ",149],["T_DOC_COMMENT","\/**\n     * Get connection object\n     *\n     * @return Varien_Db_Adapter_Interface\n     *\/",151],["T_WHITESPACE","\n    ",155],["T_PUBLIC","public",156],["T_WHITESPACE"," ",156],["T_FUNCTION","function",156],["T_WHITESPACE"," ",156],["T_STRING","getConnection",156],"(",")",["T_WHITESPACE","\n    ",156],"{",["T_WHITESPACE","\n        ",157],["T_RETURN","return",158],["T_WHITESPACE"," ",158],["T_VARIABLE","$this",158],["T_OBJECT_OPERATOR","->",158],["T_STRING","_conn",158],";",["T_WHITESPACE","\n    ",158],"}",["T_WHITESPACE","\n\n    ",159],["T_DOC_COMMENT","\/**\n     * Add table placeholder\/table name relation\n     *\n     * @param string $tableName\n     * @param string $realTableName\n     * @return Mage_Core_Model_Resource_Setup\n     *\/",161],["T_WHITESPACE","\n    ",167],["T_PUBLIC","public",168],["T_WHITESPACE"," ",168],["T_FUNCTION","function",168],["T_WHITESPACE"," ",168],["T_STRING","setTable",168],"(",["T_VARIABLE","$tableName",168],",",["T_WHITESPACE"," ",168],["T_VARIABLE","$realTableName",168],")",["T_WHITESPACE","\n    ",168],"{",["T_WHITESPACE","\n        ",169],["T_VARIABLE","$this",170],["T_OBJECT_OPERATOR","->",170],["T_STRING","_tables",170],"[",["T_VARIABLE","$tableName",170],"]",["T_WHITESPACE"," ",170],"=",["T_WHITESPACE"," ",170],["T_VARIABLE","$realTableName",170],";",["T_WHITESPACE","\n        ",170],["T_RETURN","return",171],["T_WHITESPACE"," ",171],["T_VARIABLE","$this",171],";",["T_WHITESPACE","\n    ",171],"}",["T_WHITESPACE","\n\n    ",172],["T_DOC_COMMENT","\/**\n     * Get table name (validated by db adapter) by table placeholder\n     *\n     * @param string|array $tableName\n     * @return string\n     *\/",174],["T_WHITESPACE","\n    ",179],["T_PUBLIC","public",180],["T_WHITESPACE"," ",180],["T_FUNCTION","function",180],["T_WHITESPACE"," ",180],["T_STRING","getTable",180],"(",["T_VARIABLE","$tableName",180],")",["T_WHITESPACE","\n    ",180],"{",["T_WHITESPACE","\n        ",181],["T_VARIABLE","$cacheKey",182],["T_WHITESPACE"," ",182],"=",["T_WHITESPACE"," ",182],["T_VARIABLE","$this",182],["T_OBJECT_OPERATOR","->",182],["T_STRING","_getTableCacheName",182],"(",["T_VARIABLE","$tableName",182],")",";",["T_WHITESPACE","\n        ",182],["T_IF","if",183],["T_WHITESPACE"," ",183],"(","!",["T_ISSET","isset",183],"(",["T_VARIABLE","$this",183],["T_OBJECT_OPERATOR","->",183],["T_STRING","_tables",183],"[",["T_VARIABLE","$cacheKey",183],"]",")",")",["T_WHITESPACE"," ",183],"{",["T_WHITESPACE","\n            ",183],["T_VARIABLE","$this",184],["T_OBJECT_OPERATOR","->",184],["T_STRING","_tables",184],"[",["T_VARIABLE","$cacheKey",184],"]",["T_WHITESPACE"," ",184],"=",["T_WHITESPACE"," ",184],["T_STRING","Mage",184],["T_DOUBLE_COLON","::",184],["T_STRING","getSingleton",184],"(",["T_CONSTANT_ENCAPSED_STRING","'core\/resource'",184],")",["T_OBJECT_OPERATOR","->",184],["T_STRING","getTableName",184],"(",["T_VARIABLE","$tableName",184],")",";",["T_WHITESPACE","\n        ",184],"}",["T_WHITESPACE","\n        ",185],["T_RETURN","return",186],["T_WHITESPACE"," ",186],["T_VARIABLE","$this",186],["T_OBJECT_OPERATOR","->",186],["T_STRING","_tables",186],"[",["T_VARIABLE","$cacheKey",186],"]",";",["T_WHITESPACE","\n    ",186],"}",["T_WHITESPACE","\n\n    ",187],["T_DOC_COMMENT","\/**\n     * Retrieve table name for cache\n     *\n     * @param string|array $tableName\n     * @return string\n     *\/",189],["T_WHITESPACE","\n    ",194],["T_PROTECTED","protected",195],["T_WHITESPACE"," ",195],["T_FUNCTION","function",195],["T_WHITESPACE"," ",195],["T_STRING","_getTableCacheName",195],"(",["T_VARIABLE","$tableName",195],")",["T_WHITESPACE","\n    ",195],"{",["T_WHITESPACE","\n        ",196],["T_IF","if",197],["T_WHITESPACE"," ",197],"(",["T_STRING","is_array",197],"(",["T_VARIABLE","$tableName",197],")",")",["T_WHITESPACE"," ",197],"{",["T_WHITESPACE","\n            ",197],["T_RETURN","return",198],["T_WHITESPACE"," ",198],["T_STRING","join",198],"(",["T_CONSTANT_ENCAPSED_STRING","'_'",198],",",["T_WHITESPACE"," ",198],["T_VARIABLE","$tableName",198],")",";",["T_WHITESPACE","\n\n        ",198],"}",["T_WHITESPACE","\n        ",200],["T_RETURN","return",201],["T_WHITESPACE"," ",201],["T_VARIABLE","$tableName",201],";",["T_WHITESPACE","\n    ",201],"}",["T_WHITESPACE","\n\n    ",202],["T_DOC_COMMENT","\/**\n     * Get core resource resource model\n     *\n     * @return Mage_Core_Model_Resource_Resource\n     *\/",204],["T_WHITESPACE","\n    ",208],["T_PROTECTED","protected",209],["T_WHITESPACE"," ",209],["T_FUNCTION","function",209],["T_WHITESPACE"," ",209],["T_STRING","_getResource",209],"(",")",["T_WHITESPACE","\n    ",209],"{",["T_WHITESPACE","\n        ",210],["T_RETURN","return",211],["T_WHITESPACE"," ",211],["T_STRING","Mage",211],["T_DOUBLE_COLON","::",211],["T_STRING","getResourceSingleton",211],"(",["T_CONSTANT_ENCAPSED_STRING","'core\/resource'",211],")",";",["T_WHITESPACE","\n    ",211],"}",["T_WHITESPACE","\n\n    ",212],["T_DOC_COMMENT","\/**\n     * Apply database updates whenever needed\n     *\n     * @return boolean\n     *\/",214],["T_WHITESPACE","\n    ",218],["T_STATIC","static",219],["T_WHITESPACE"," ",219],["T_PUBLIC","public",219],["T_WHITESPACE"," ",219],["T_FUNCTION","function",219],["T_WHITESPACE"," ",219],["T_STRING","applyAllUpdates",219],"(",")",["T_WHITESPACE","\n    ",219],"{",["T_WHITESPACE","\n        ",220],["T_STRING","Mage",221],["T_DOUBLE_COLON","::",221],["T_STRING","app",221],"(",")",["T_OBJECT_OPERATOR","->",221],["T_STRING","setUpdateMode",221],"(",["T_STRING","true",221],")",";",["T_WHITESPACE","\n        ",221],["T_STRING","self",222],["T_DOUBLE_COLON","::",222],["T_VARIABLE","$_hadUpdates",222],["T_WHITESPACE"," ",222],"=",["T_WHITESPACE"," ",222],["T_STRING","false",222],";",["T_WHITESPACE","\n\n        ",222],["T_VARIABLE","$resources",224],["T_WHITESPACE"," ",224],"=",["T_WHITESPACE"," ",224],["T_STRING","Mage",224],["T_DOUBLE_COLON","::",224],["T_STRING","getConfig",224],"(",")",["T_OBJECT_OPERATOR","->",224],["T_STRING","getNode",224],"(",["T_CONSTANT_ENCAPSED_STRING","'global\/resources'",224],")",["T_OBJECT_OPERATOR","->",224],["T_STRING","children",224],"(",")",";",["T_WHITESPACE","\n        ",224],["T_VARIABLE","$afterApplyUpdates",225],["T_WHITESPACE"," ",225],"=",["T_WHITESPACE"," ",225],["T_ARRAY","array",225],"(",")",";",["T_WHITESPACE","\n        ",225],["T_FOREACH","foreach",226],["T_WHITESPACE"," ",226],"(",["T_VARIABLE","$resources",226],["T_WHITESPACE"," ",226],["T_AS","as",226],["T_WHITESPACE"," ",226],["T_VARIABLE","$resName",226],["T_WHITESPACE"," ",226],["T_DOUBLE_ARROW","=>",226],["T_WHITESPACE"," ",226],["T_VARIABLE","$resource",226],")",["T_WHITESPACE"," ",226],"{",["T_WHITESPACE","\n            ",226],["T_IF","if",227],["T_WHITESPACE"," ",227],"(","!",["T_VARIABLE","$resource",227],["T_OBJECT_OPERATOR","->",227],["T_STRING","setup",227],")",["T_WHITESPACE"," ",227],"{",["T_WHITESPACE","\n                ",227],["T_CONTINUE","continue",228],";",["T_WHITESPACE","\n            ",228],"}",["T_WHITESPACE","\n            ",229],["T_VARIABLE","$className",230],["T_WHITESPACE"," ",230],"=",["T_WHITESPACE"," ",230],["T_CLASS_C","__CLASS__",230],";",["T_WHITESPACE","\n            ",230],["T_IF","if",231],["T_WHITESPACE"," ",231],"(",["T_ISSET","isset",231],"(",["T_VARIABLE","$resource",231],["T_OBJECT_OPERATOR","->",231],["T_STRING","setup",231],["T_OBJECT_OPERATOR","->",231],["T_STRING","class",231],")",")",["T_WHITESPACE"," ",231],"{",["T_WHITESPACE","\n                ",231],["T_VARIABLE","$className",232],["T_WHITESPACE"," ",232],"=",["T_WHITESPACE"," ",232],["T_VARIABLE","$resource",232],["T_OBJECT_OPERATOR","->",232],["T_STRING","setup",232],["T_OBJECT_OPERATOR","->",232],["T_STRING","getClassName",232],"(",")",";",["T_WHITESPACE","\n            ",232],"}",["T_WHITESPACE","\n            ",233],["T_VARIABLE","$setupClass",234],["T_WHITESPACE"," ",234],"=",["T_WHITESPACE"," ",234],["T_NEW","new",234],["T_WHITESPACE"," ",234],["T_VARIABLE","$className",234],"(",["T_VARIABLE","$resName",234],")",";",["T_WHITESPACE","\n            ",234],["T_VARIABLE","$setupClass",235],["T_OBJECT_OPERATOR","->",235],["T_STRING","applyUpdates",235],"(",")",";",["T_WHITESPACE","\n            ",235],["T_IF","if",236],["T_WHITESPACE"," ",236],"(",["T_VARIABLE","$setupClass",236],["T_OBJECT_OPERATOR","->",236],["T_STRING","getCallAfterApplyAllUpdates",236],"(",")",")",["T_WHITESPACE"," ",236],"{",["T_WHITESPACE","\n                ",236],["T_VARIABLE","$afterApplyUpdates",237],"[","]",["T_WHITESPACE"," ",237],"=",["T_WHITESPACE"," ",237],["T_VARIABLE","$setupClass",237],";",["T_WHITESPACE","\n            ",237],"}",["T_WHITESPACE","\n        ",238],"}",["T_WHITESPACE","\n\n        ",239],["T_FOREACH","foreach",241],["T_WHITESPACE"," ",241],"(",["T_VARIABLE","$afterApplyUpdates",241],["T_WHITESPACE"," ",241],["T_AS","as",241],["T_WHITESPACE"," ",241],["T_VARIABLE","$setupClass",241],")",["T_WHITESPACE"," ",241],"{",["T_WHITESPACE","\n            ",241],["T_VARIABLE","$setupClass",242],["T_OBJECT_OPERATOR","->",242],["T_STRING","afterApplyAllUpdates",242],"(",")",";",["T_WHITESPACE","\n        ",242],"}",["T_WHITESPACE","\n\n        ",243],["T_STRING","Mage",245],["T_DOUBLE_COLON","::",245],["T_STRING","app",245],"(",")",["T_OBJECT_OPERATOR","->",245],["T_STRING","setUpdateMode",245],"(",["T_STRING","false",245],")",";",["T_WHITESPACE","\n        ",245],["T_STRING","self",246],["T_DOUBLE_COLON","::",246],["T_VARIABLE","$_schemaUpdatesChecked",246],["T_WHITESPACE"," ",246],"=",["T_WHITESPACE"," ",246],["T_STRING","true",246],";",["T_WHITESPACE","\n        ",246],["T_RETURN","return",247],["T_WHITESPACE"," ",247],["T_STRING","true",247],";",["T_WHITESPACE","\n    ",247],"}",["T_WHITESPACE","\n\n    ",248],["T_DOC_COMMENT","\/**\n     * Apply database data updates whenever needed\n     *\n     *\/",250],["T_WHITESPACE","\n    ",253],["T_STATIC","static",254],["T_WHITESPACE"," ",254],["T_PUBLIC","public",254],["T_WHITESPACE"," ",254],["T_FUNCTION","function",254],["T_WHITESPACE"," ",254],["T_STRING","applyAllDataUpdates",254],"(",")",["T_WHITESPACE","\n    ",254],"{",["T_WHITESPACE","\n        ",255],["T_IF","if",256],["T_WHITESPACE"," ",256],"(","!",["T_STRING","self",256],["T_DOUBLE_COLON","::",256],["T_VARIABLE","$_schemaUpdatesChecked",256],")",["T_WHITESPACE"," ",256],"{",["T_WHITESPACE","\n            ",256],["T_RETURN","return",257],";",["T_WHITESPACE","\n        ",257],"}",["T_WHITESPACE","\n        ",258],["T_VARIABLE","$resources",259],["T_WHITESPACE"," ",259],"=",["T_WHITESPACE"," ",259],["T_STRING","Mage",259],["T_DOUBLE_COLON","::",259],["T_STRING","getConfig",259],"(",")",["T_OBJECT_OPERATOR","->",259],["T_STRING","getNode",259],"(",["T_CONSTANT_ENCAPSED_STRING","'global\/resources'",259],")",["T_OBJECT_OPERATOR","->",259],["T_STRING","children",259],"(",")",";",["T_WHITESPACE","\n        ",259],["T_FOREACH","foreach",260],["T_WHITESPACE"," ",260],"(",["T_VARIABLE","$resources",260],["T_WHITESPACE"," ",260],["T_AS","as",260],["T_WHITESPACE"," ",260],["T_VARIABLE","$resName",260],["T_WHITESPACE"," ",260],["T_DOUBLE_ARROW","=>",260],["T_WHITESPACE"," ",260],["T_VARIABLE","$resource",260],")",["T_WHITESPACE"," ",260],"{",["T_WHITESPACE","\n            ",260],["T_IF","if",261],["T_WHITESPACE"," ",261],"(","!",["T_VARIABLE","$resource",261],["T_OBJECT_OPERATOR","->",261],["T_STRING","setup",261],")",["T_WHITESPACE"," ",261],"{",["T_WHITESPACE","\n                ",261],["T_CONTINUE","continue",262],";",["T_WHITESPACE","\n            ",262],"}",["T_WHITESPACE","\n            ",263],["T_VARIABLE","$className",264],["T_WHITESPACE"," ",264],"=",["T_WHITESPACE"," ",264],["T_CLASS_C","__CLASS__",264],";",["T_WHITESPACE","\n            ",264],["T_IF","if",265],["T_WHITESPACE"," ",265],"(",["T_ISSET","isset",265],"(",["T_VARIABLE","$resource",265],["T_OBJECT_OPERATOR","->",265],["T_STRING","setup",265],["T_OBJECT_OPERATOR","->",265],["T_STRING","class",265],")",")",["T_WHITESPACE"," ",265],"{",["T_WHITESPACE","\n                ",265],["T_VARIABLE","$className",266],["T_WHITESPACE"," ",266],"=",["T_WHITESPACE"," ",266],["T_VARIABLE","$resource",266],["T_OBJECT_OPERATOR","->",266],["T_STRING","setup",266],["T_OBJECT_OPERATOR","->",266],["T_STRING","getClassName",266],"(",")",";",["T_WHITESPACE","\n            ",266],"}",["T_WHITESPACE","\n            ",267],["T_VARIABLE","$setupClass",268],["T_WHITESPACE"," ",268],"=",["T_WHITESPACE"," ",268],["T_NEW","new",268],["T_WHITESPACE"," ",268],["T_VARIABLE","$className",268],"(",["T_VARIABLE","$resName",268],")",";",["T_WHITESPACE","\n            ",268],["T_VARIABLE","$setupClass",269],["T_OBJECT_OPERATOR","->",269],["T_STRING","applyDataUpdates",269],"(",")",";",["T_WHITESPACE","\n        ",269],"}",["T_WHITESPACE","\n    ",270],"}",["T_WHITESPACE","\n\n    ",271],["T_DOC_COMMENT","\/**\n     * Apply data updates to the system after upgrading.\n     *\n     * @param string $fromVersion\n     * @return Mage_Core_Model_Resource_Setup\n     *\/",273],["T_WHITESPACE","\n    ",278],["T_PUBLIC","public",279],["T_WHITESPACE"," ",279],["T_FUNCTION","function",279],["T_WHITESPACE"," ",279],["T_STRING","applyDataUpdates",279],"(",")",["T_WHITESPACE","\n    ",279],"{",["T_WHITESPACE","\n        ",280],["T_VARIABLE","$dataVer",281],"=",["T_WHITESPACE"," ",281],["T_VARIABLE","$this",281],["T_OBJECT_OPERATOR","->",281],["T_STRING","_getResource",281],"(",")",["T_OBJECT_OPERATOR","->",281],["T_STRING","getDataVersion",281],"(",["T_VARIABLE","$this",281],["T_OBJECT_OPERATOR","->",281],["T_STRING","_resourceName",281],")",";",["T_WHITESPACE","\n        ",281],["T_VARIABLE","$configVer",282],["T_WHITESPACE"," ",282],"=",["T_WHITESPACE"," ",282],["T_STRING_CAST","(string)",282],["T_VARIABLE","$this",282],["T_OBJECT_OPERATOR","->",282],["T_STRING","_moduleConfig",282],["T_OBJECT_OPERATOR","->",282],["T_STRING","version",282],";",["T_WHITESPACE","\n        ",282],["T_IF","if",283],["T_WHITESPACE"," ",283],"(",["T_VARIABLE","$dataVer",283],["T_WHITESPACE"," ",283],["T_IS_NOT_IDENTICAL","!==",283],["T_WHITESPACE"," ",283],["T_STRING","false",283],")",["T_WHITESPACE"," ",283],"{",["T_WHITESPACE","\n             ",283],["T_VARIABLE","$status",284],["T_WHITESPACE"," ",284],"=",["T_WHITESPACE"," ",284],["T_STRING","version_compare",284],"(",["T_VARIABLE","$configVer",284],",",["T_WHITESPACE"," ",284],["T_VARIABLE","$dataVer",284],")",";",["T_WHITESPACE","\n             ",284],["T_IF","if",285],["T_WHITESPACE"," ",285],"(",["T_VARIABLE","$status",285],["T_WHITESPACE"," ",285],["T_IS_EQUAL","==",285],["T_WHITESPACE"," ",285],["T_STRING","self",285],["T_DOUBLE_COLON","::",285],["T_STRING","VERSION_COMPARE_GREATER",285],")",["T_WHITESPACE"," ",285],"{",["T_WHITESPACE","\n                 ",285],["T_VARIABLE","$this",286],["T_OBJECT_OPERATOR","->",286],["T_STRING","_upgradeData",286],"(",["T_VARIABLE","$dataVer",286],",",["T_WHITESPACE"," ",286],["T_VARIABLE","$configVer",286],")",";",["T_WHITESPACE","\n             ",286],"}",["T_WHITESPACE","\n        ",287],"}",["T_WHITESPACE"," ",288],["T_ELSEIF","elseif",288],["T_WHITESPACE"," ",288],"(",["T_VARIABLE","$configVer",288],")",["T_WHITESPACE"," ",288],"{",["T_WHITESPACE","\n            ",288],["T_VARIABLE","$this",289],["T_OBJECT_OPERATOR","->",289],["T_STRING","_installData",289],"(",["T_VARIABLE","$configVer",289],")",";",["T_WHITESPACE","\n        ",289],"}",["T_WHITESPACE","\n        ",290],["T_RETURN","return",291],["T_WHITESPACE"," ",291],["T_VARIABLE","$this",291],";",["T_WHITESPACE","\n    ",291],"}",["T_WHITESPACE","\n\n    ",292],["T_DOC_COMMENT","\/**\n     * Apply module resource install, upgrade and data scripts\n     *\n     * @return Mage_Core_Model_Resource_Setup\n     *\/",294],["T_WHITESPACE","\n    ",298],["T_PUBLIC","public",299],["T_WHITESPACE"," ",299],["T_FUNCTION","function",299],["T_WHITESPACE"," ",299],["T_STRING","applyUpdates",299],"(",")",["T_WHITESPACE","\n    ",299],"{",["T_WHITESPACE","\n        ",300],["T_VARIABLE","$dbVer",301],["T_WHITESPACE"," ",301],"=",["T_WHITESPACE"," ",301],["T_VARIABLE","$this",301],["T_OBJECT_OPERATOR","->",301],["T_STRING","_getResource",301],"(",")",["T_OBJECT_OPERATOR","->",301],["T_STRING","getDbVersion",301],"(",["T_VARIABLE","$this",301],["T_OBJECT_OPERATOR","->",301],["T_STRING","_resourceName",301],")",";",["T_WHITESPACE","\n        ",301],["T_VARIABLE","$configVer",302],["T_WHITESPACE"," ",302],"=",["T_WHITESPACE"," ",302],["T_STRING_CAST","(string)",302],["T_VARIABLE","$this",302],["T_OBJECT_OPERATOR","->",302],["T_STRING","_moduleConfig",302],["T_OBJECT_OPERATOR","->",302],["T_STRING","version",302],";",["T_WHITESPACE","\n\n        ",302],["T_DOC_COMMENT","\/**\n         * Hook queries in adapter, so that in MySQL compatibility mode extensions and custom modules will avoid\n         * errors due to changes in database structure\n         *\/",304],["T_WHITESPACE","\n        ",307],["T_IF","if",308],["T_WHITESPACE"," ",308],"(","(",["T_STRING_CAST","(string)",308],["T_VARIABLE","$this",308],["T_OBJECT_OPERATOR","->",308],["T_STRING","_moduleConfig",308],["T_OBJECT_OPERATOR","->",308],["T_STRING","codePool",308],["T_WHITESPACE"," ",308],["T_IS_NOT_EQUAL","!=",308],["T_WHITESPACE"," ",308],["T_CONSTANT_ENCAPSED_STRING","'core'",308],")",["T_WHITESPACE"," ",308],["T_BOOLEAN_AND","&&",308],["T_WHITESPACE"," ",308],["T_STRING","Mage",308],["T_DOUBLE_COLON","::",308],["T_STRING","helper",308],"(",["T_CONSTANT_ENCAPSED_STRING","'core'",308],")",["T_OBJECT_OPERATOR","->",308],["T_STRING","useDbCompatibleMode",308],"(",")",")",["T_WHITESPACE"," ",308],"{",["T_WHITESPACE","\n            ",308],["T_VARIABLE","$this",309],["T_OBJECT_OPERATOR","->",309],["T_STRING","_hookQueries",309],"(",")",";",["T_WHITESPACE","\n        ",309],"}",["T_WHITESPACE","\n\n        ",310],["T_COMMENT","\/\/ Module is installed\n",312],["T_WHITESPACE","        ",313],["T_IF","if",313],["T_WHITESPACE"," ",313],"(",["T_VARIABLE","$dbVer",313],["T_WHITESPACE"," ",313],["T_IS_NOT_IDENTICAL","!==",313],["T_WHITESPACE"," ",313],["T_STRING","false",313],")",["T_WHITESPACE"," ",313],"{",["T_WHITESPACE","\n             ",313],["T_VARIABLE","$status",314],["T_WHITESPACE"," ",314],"=",["T_WHITESPACE"," ",314],["T_STRING","version_compare",314],"(",["T_VARIABLE","$configVer",314],",",["T_WHITESPACE"," ",314],["T_VARIABLE","$dbVer",314],")",";",["T_WHITESPACE","\n             ",314],["T_SWITCH","switch",315],["T_WHITESPACE"," ",315],"(",["T_VARIABLE","$status",315],")",["T_WHITESPACE"," ",315],"{",["T_WHITESPACE","\n                ",315],["T_CASE","case",316],["T_WHITESPACE"," ",316],["T_STRING","self",316],["T_DOUBLE_COLON","::",316],["T_STRING","VERSION_COMPARE_LOWER",316],":",["T_WHITESPACE","\n                    ",316],["T_VARIABLE","$this",317],["T_OBJECT_OPERATOR","->",317],["T_STRING","_rollbackResourceDb",317],"(",["T_VARIABLE","$configVer",317],",",["T_WHITESPACE"," ",317],["T_VARIABLE","$dbVer",317],")",";",["T_WHITESPACE","\n                    ",317],["T_BREAK","break",318],";",["T_WHITESPACE","\n                ",318],["T_CASE","case",319],["T_WHITESPACE"," ",319],["T_STRING","self",319],["T_DOUBLE_COLON","::",319],["T_STRING","VERSION_COMPARE_GREATER",319],":",["T_WHITESPACE","\n                    ",319],["T_VARIABLE","$this",320],["T_OBJECT_OPERATOR","->",320],["T_STRING","_upgradeResourceDb",320],"(",["T_VARIABLE","$dbVer",320],",",["T_WHITESPACE"," ",320],["T_VARIABLE","$configVer",320],")",";",["T_WHITESPACE","\n                    ",320],["T_BREAK","break",321],";",["T_WHITESPACE","\n                ",321],["T_DEFAULT","default",322],":",["T_WHITESPACE","\n                    ",322],["T_RETURN","return",323],["T_WHITESPACE"," ",323],["T_STRING","true",323],";",["T_WHITESPACE","\n                    ",323],["T_BREAK","break",324],";",["T_WHITESPACE","\n             ",324],"}",["T_WHITESPACE","\n        ",325],"}",["T_WHITESPACE"," ",326],["T_ELSEIF","elseif",326],["T_WHITESPACE"," ",326],"(",["T_VARIABLE","$configVer",326],")",["T_WHITESPACE"," ",326],"{",["T_WHITESPACE","\n            ",326],["T_VARIABLE","$this",327],["T_OBJECT_OPERATOR","->",327],["T_STRING","_installResourceDb",327],"(",["T_VARIABLE","$configVer",327],")",";",["T_WHITESPACE","\n        ",327],"}",["T_WHITESPACE","\n\n        ",328],["T_VARIABLE","$this",330],["T_OBJECT_OPERATOR","->",330],["T_STRING","_unhookQueries",330],"(",")",";",["T_WHITESPACE","\n\n        ",330],["T_RETURN","return",332],["T_WHITESPACE"," ",332],["T_VARIABLE","$this",332],";",["T_WHITESPACE","\n    ",332],"}",["T_WHITESPACE","\n\n    ",333],["T_DOC_COMMENT","\/**\n     * Hooks queries to strengthen backwards compatibility in MySQL.\n     * Currently - dynamically updates column types for foreign keys, when their targets were changed\n     * during MMDB development.\n     *\n     * @return Mage_Core_Model_Resource_Setup\n     *\/",335],["T_WHITESPACE","\n    ",341],["T_PROTECTED","protected",342],["T_WHITESPACE"," ",342],["T_FUNCTION","function",342],["T_WHITESPACE"," ",342],["T_STRING","_hookQueries",342],"(",")",["T_WHITESPACE","\n    ",342],"{",["T_WHITESPACE","\n        ",343],["T_VARIABLE","$this",344],["T_OBJECT_OPERATOR","->",344],["T_STRING","_queriesHooked",344],["T_WHITESPACE"," ",344],"=",["T_WHITESPACE"," ",344],["T_STRING","true",344],";",["T_WHITESPACE","\n        ",344],["T_COMMENT","\/* @var $adapter Varien_Db_Adapter_Pdo_Mysql *\/",345],["T_WHITESPACE","\n        ",345],["T_VARIABLE","$adapter",346],["T_WHITESPACE"," ",346],"=",["T_WHITESPACE"," ",346],["T_VARIABLE","$this",346],["T_OBJECT_OPERATOR","->",346],["T_STRING","getConnection",346],"(",")",";",["T_WHITESPACE","\n        ",346],["T_VARIABLE","$adapter",347],["T_OBJECT_OPERATOR","->",347],["T_STRING","setQueryHook",347],"(",["T_ARRAY","array",347],"(",["T_CONSTANT_ENCAPSED_STRING","'object'",347],["T_WHITESPACE"," ",347],["T_DOUBLE_ARROW","=>",347],["T_WHITESPACE"," ",347],["T_VARIABLE","$this",347],",",["T_WHITESPACE"," ",347],["T_CONSTANT_ENCAPSED_STRING","'method'",347],["T_WHITESPACE"," ",347],["T_DOUBLE_ARROW","=>",347],["T_WHITESPACE"," ",347],["T_CONSTANT_ENCAPSED_STRING","'callbackQueryHook'",347],")",")",";",["T_WHITESPACE","\n        ",347],["T_RETURN","return",348],["T_WHITESPACE"," ",348],["T_VARIABLE","$this",348],";",["T_WHITESPACE","\n    ",348],"}",["T_WHITESPACE","\n\n    ",349],["T_DOC_COMMENT","\/**\n     * Removes query hook\n     *\n     * @return Mage_Core_Model_Resource_Setup\n     *\/",351],["T_WHITESPACE","\n    ",355],["T_PROTECTED","protected",356],["T_WHITESPACE"," ",356],["T_FUNCTION","function",356],["T_WHITESPACE"," ",356],["T_STRING","_unhookQueries",356],"(",")",["T_WHITESPACE","\n    ",356],"{",["T_WHITESPACE","\n        ",357],["T_IF","if",358],["T_WHITESPACE"," ",358],"(","!",["T_VARIABLE","$this",358],["T_OBJECT_OPERATOR","->",358],["T_STRING","_queriesHooked",358],")",["T_WHITESPACE"," ",358],"{",["T_WHITESPACE","\n            ",358],["T_RETURN","return",359],["T_WHITESPACE"," ",359],["T_VARIABLE","$this",359],";",["T_WHITESPACE","\n        ",359],"}",["T_WHITESPACE","\n        ",360],["T_COMMENT","\/* @var $adapter Varien_Db_Adapter_Pdo_Mysql *\/",361],["T_WHITESPACE","\n        ",361],["T_VARIABLE","$adapter",362],["T_WHITESPACE"," ",362],"=",["T_WHITESPACE"," ",362],["T_VARIABLE","$this",362],["T_OBJECT_OPERATOR","->",362],["T_STRING","getConnection",362],"(",")",";",["T_WHITESPACE","\n        ",362],["T_VARIABLE","$adapter",363],["T_OBJECT_OPERATOR","->",363],["T_STRING","setQueryHook",363],"(",["T_STRING","null",363],")",";",["T_WHITESPACE","\n        ",363],["T_VARIABLE","$this",364],["T_OBJECT_OPERATOR","->",364],["T_STRING","_queriesHooked",364],["T_WHITESPACE"," ",364],"=",["T_WHITESPACE"," ",364],["T_STRING","false",364],";",["T_WHITESPACE","\n        ",364],["T_RETURN","return",365],["T_WHITESPACE"," ",365],["T_VARIABLE","$this",365],";",["T_WHITESPACE","\n    ",365],"}",["T_WHITESPACE","\n\n    ",366],["T_DOC_COMMENT","\/**\n     * Callback function, called on every query adapter processes.\n     * Modifies SQL or tables, so that foreign keys will be set successfully\n     *\n     * @param string $sql\n     * @param array $bind\n     * @return Mage_Core_Model_Resource_Setup\n     *\/",368],["T_WHITESPACE","\n    ",375],["T_PUBLIC","public",376],["T_WHITESPACE"," ",376],["T_FUNCTION","function",376],["T_WHITESPACE"," ",376],["T_STRING","callbackQueryHook",376],"(","&",["T_VARIABLE","$sql",376],",",["T_WHITESPACE"," ",376],"&",["T_VARIABLE","$bind",376],")",["T_WHITESPACE","\n    ",376],"{",["T_WHITESPACE","\n        ",377],["T_STRING","Mage",378],["T_DOUBLE_COLON","::",378],["T_STRING","getSingleton",378],"(",["T_CONSTANT_ENCAPSED_STRING","'core\/resource_setup_query_modifier'",378],",",["T_WHITESPACE"," ",378],["T_ARRAY","array",378],"(",["T_VARIABLE","$this",378],["T_OBJECT_OPERATOR","->",378],["T_STRING","getConnection",378],"(",")",")",")",["T_WHITESPACE","\n            ",378],["T_OBJECT_OPERATOR","->",379],["T_STRING","processQuery",379],"(",["T_VARIABLE","$sql",379],",",["T_WHITESPACE"," ",379],["T_VARIABLE","$bind",379],")",";",["T_WHITESPACE","\n        ",379],["T_RETURN","return",380],["T_WHITESPACE"," ",380],["T_VARIABLE","$this",380],";",["T_WHITESPACE","\n    ",380],"}",["T_WHITESPACE","\n\n    ",381],["T_DOC_COMMENT","\/**\n     * Run data install scripts\n     *\n     * @param string $newVersion\n     * @return Mage_Core_Model_Resource_Setup\n     *\/",383],["T_WHITESPACE","\n    ",388],["T_PROTECTED","protected",389],["T_WHITESPACE"," ",389],["T_FUNCTION","function",389],["T_WHITESPACE"," ",389],["T_STRING","_installData",389],"(",["T_VARIABLE","$newVersion",389],")",["T_WHITESPACE","\n    ",389],"{",["T_WHITESPACE","\n        ",390],["T_VARIABLE","$oldVersion",391],["T_WHITESPACE"," ",391],"=",["T_WHITESPACE"," ",391],["T_VARIABLE","$this",391],["T_OBJECT_OPERATOR","->",391],["T_STRING","_modifyResourceDb",391],"(",["T_STRING","self",391],["T_DOUBLE_COLON","::",391],["T_STRING","TYPE_DATA_INSTALL",391],",",["T_WHITESPACE"," ",391],["T_CONSTANT_ENCAPSED_STRING","''",391],",",["T_WHITESPACE"," ",391],["T_VARIABLE","$newVersion",391],")",";",["T_WHITESPACE","\n        ",391],["T_VARIABLE","$this",392],["T_OBJECT_OPERATOR","->",392],["T_STRING","_modifyResourceDb",392],"(",["T_STRING","self",392],["T_DOUBLE_COLON","::",392],["T_STRING","TYPE_DATA_UPGRADE",392],",",["T_WHITESPACE"," ",392],["T_VARIABLE","$oldVersion",392],",",["T_WHITESPACE"," ",392],["T_VARIABLE","$newVersion",392],")",";",["T_WHITESPACE","\n        ",392],["T_VARIABLE","$this",393],["T_OBJECT_OPERATOR","->",393],["T_STRING","_getResource",393],"(",")",["T_OBJECT_OPERATOR","->",393],["T_STRING","setDataVersion",393],"(",["T_VARIABLE","$this",393],["T_OBJECT_OPERATOR","->",393],["T_STRING","_resourceName",393],",",["T_WHITESPACE"," ",393],["T_VARIABLE","$newVersion",393],")",";",["T_WHITESPACE","\n\n        ",393],["T_RETURN","return",395],["T_WHITESPACE"," ",395],["T_VARIABLE","$this",395],";",["T_WHITESPACE","\n    ",395],"}",["T_WHITESPACE","\n\n    ",396],["T_DOC_COMMENT","\/**\n     * Run data upgrade scripts\n     *\n     * @param string $oldVersion\n     * @param string $newVersion\n     * @return Mage_Core_Model_Resource_Setup\n     *\/",398],["T_WHITESPACE","\n    ",404],["T_PROTECTED","protected",405],["T_WHITESPACE"," ",405],["T_FUNCTION","function",405],["T_WHITESPACE"," ",405],["T_STRING","_upgradeData",405],"(",["T_VARIABLE","$oldVersion",405],",",["T_WHITESPACE"," ",405],["T_VARIABLE","$newVersion",405],")",["T_WHITESPACE","\n    ",405],"{",["T_WHITESPACE","\n        ",406],["T_VARIABLE","$this",407],["T_OBJECT_OPERATOR","->",407],["T_STRING","_modifyResourceDb",407],"(",["T_CONSTANT_ENCAPSED_STRING","'data-upgrade'",407],",",["T_WHITESPACE"," ",407],["T_VARIABLE","$oldVersion",407],",",["T_WHITESPACE"," ",407],["T_VARIABLE","$newVersion",407],")",";",["T_WHITESPACE","\n        ",407],["T_VARIABLE","$this",408],["T_OBJECT_OPERATOR","->",408],["T_STRING","_getResource",408],"(",")",["T_OBJECT_OPERATOR","->",408],["T_STRING","setDataVersion",408],"(",["T_VARIABLE","$this",408],["T_OBJECT_OPERATOR","->",408],["T_STRING","_resourceName",408],",",["T_WHITESPACE"," ",408],["T_VARIABLE","$newVersion",408],")",";",["T_WHITESPACE","\n\n        ",408],["T_RETURN","return",410],["T_WHITESPACE"," ",410],["T_VARIABLE","$this",410],";",["T_WHITESPACE","\n    ",410],"}",["T_WHITESPACE","\n\n    ",411],["T_DOC_COMMENT","\/**\n     * Run resource installation file\n     *\n     * @param string $newVersion\n     * @return Mage_Core_Model_Resource_Setup\n     *\/",413],["T_WHITESPACE","\n    ",418],["T_PROTECTED","protected",419],["T_WHITESPACE"," ",419],["T_FUNCTION","function",419],["T_WHITESPACE"," ",419],["T_STRING","_installResourceDb",419],"(",["T_VARIABLE","$newVersion",419],")",["T_WHITESPACE","\n    ",419],"{",["T_WHITESPACE","\n        ",420],["T_VARIABLE","$oldVersion",421],["T_WHITESPACE"," ",421],"=",["T_WHITESPACE"," ",421],["T_VARIABLE","$this",421],["T_OBJECT_OPERATOR","->",421],["T_STRING","_modifyResourceDb",421],"(",["T_STRING","self",421],["T_DOUBLE_COLON","::",421],["T_STRING","TYPE_DB_INSTALL",421],",",["T_WHITESPACE"," ",421],["T_CONSTANT_ENCAPSED_STRING","''",421],",",["T_WHITESPACE"," ",421],["T_VARIABLE","$newVersion",421],")",";",["T_WHITESPACE","\n        ",421],["T_VARIABLE","$this",422],["T_OBJECT_OPERATOR","->",422],["T_STRING","_modifyResourceDb",422],"(",["T_STRING","self",422],["T_DOUBLE_COLON","::",422],["T_STRING","TYPE_DB_UPGRADE",422],",",["T_WHITESPACE"," ",422],["T_VARIABLE","$oldVersion",422],",",["T_WHITESPACE"," ",422],["T_VARIABLE","$newVersion",422],")",";",["T_WHITESPACE","\n        ",422],["T_VARIABLE","$this",423],["T_OBJECT_OPERATOR","->",423],["T_STRING","_getResource",423],"(",")",["T_OBJECT_OPERATOR","->",423],["T_STRING","setDbVersion",423],"(",["T_VARIABLE","$this",423],["T_OBJECT_OPERATOR","->",423],["T_STRING","_resourceName",423],",",["T_WHITESPACE"," ",423],["T_VARIABLE","$newVersion",423],")",";",["T_WHITESPACE","\n\n        ",423],["T_RETURN","return",425],["T_WHITESPACE"," ",425],["T_VARIABLE","$this",425],";",["T_WHITESPACE","\n    ",425],"}",["T_WHITESPACE","\n\n    ",426],["T_DOC_COMMENT","\/**\n     * Run resource upgrade files from $oldVersion to $newVersion\n     *\n     * @param string $oldVersion\n     * @param string $newVersion\n     * @return Mage_Core_Model_Resource_Setup\n     *\/",428],["T_WHITESPACE","\n    ",434],["T_PROTECTED","protected",435],["T_WHITESPACE"," ",435],["T_FUNCTION","function",435],["T_WHITESPACE"," ",435],["T_STRING","_upgradeResourceDb",435],"(",["T_VARIABLE","$oldVersion",435],",",["T_WHITESPACE"," ",435],["T_VARIABLE","$newVersion",435],")",["T_WHITESPACE","\n    ",435],"{",["T_WHITESPACE","\n        ",436],["T_VARIABLE","$this",437],["T_OBJECT_OPERATOR","->",437],["T_STRING","_modifyResourceDb",437],"(",["T_STRING","self",437],["T_DOUBLE_COLON","::",437],["T_STRING","TYPE_DB_UPGRADE",437],",",["T_WHITESPACE"," ",437],["T_VARIABLE","$oldVersion",437],",",["T_WHITESPACE"," ",437],["T_VARIABLE","$newVersion",437],")",";",["T_WHITESPACE","\n        ",437],["T_VARIABLE","$this",438],["T_OBJECT_OPERATOR","->",438],["T_STRING","_getResource",438],"(",")",["T_OBJECT_OPERATOR","->",438],["T_STRING","setDbVersion",438],"(",["T_VARIABLE","$this",438],["T_OBJECT_OPERATOR","->",438],["T_STRING","_resourceName",438],",",["T_WHITESPACE"," ",438],["T_VARIABLE","$newVersion",438],")",";",["T_WHITESPACE","\n\n        ",438],["T_RETURN","return",440],["T_WHITESPACE"," ",440],["T_VARIABLE","$this",440],";",["T_WHITESPACE","\n    ",440],"}",["T_WHITESPACE","\n\n    ",441],["T_DOC_COMMENT","\/**\n     * Roll back resource\n     *\n     * @param string $newVersion\n     * @param string $oldVersion\n     * @return Mage_Core_Model_Resource_Setup\n     *\/",443],["T_WHITESPACE","\n    ",449],["T_PROTECTED","protected",450],["T_WHITESPACE"," ",450],["T_FUNCTION","function",450],["T_WHITESPACE"," ",450],["T_STRING","_rollbackResourceDb",450],"(",["T_VARIABLE","$newVersion",450],",",["T_WHITESPACE"," ",450],["T_VARIABLE","$oldVersion",450],")",["T_WHITESPACE","\n    ",450],"{",["T_WHITESPACE","\n        ",451],["T_VARIABLE","$this",452],["T_OBJECT_OPERATOR","->",452],["T_STRING","_modifyResourceDb",452],"(",["T_STRING","self",452],["T_DOUBLE_COLON","::",452],["T_STRING","TYPE_DB_ROLLBACK",452],",",["T_WHITESPACE"," ",452],["T_VARIABLE","$newVersion",452],",",["T_WHITESPACE"," ",452],["T_VARIABLE","$oldVersion",452],")",";",["T_WHITESPACE","\n        ",452],["T_RETURN","return",453],["T_WHITESPACE"," ",453],["T_VARIABLE","$this",453],";",["T_WHITESPACE","\n    ",453],"}",["T_WHITESPACE","\n\n    ",454],["T_DOC_COMMENT","\/**\n     * Uninstall resource\n     *\n     * @param string $version existing resource version\n     * @return Mage_Core_Model_Resource_Setup\n     *\/",456],["T_WHITESPACE","\n    ",461],["T_PROTECTED","protected",462],["T_WHITESPACE"," ",462],["T_FUNCTION","function",462],["T_WHITESPACE"," ",462],["T_STRING","_uninstallResourceDb",462],"(",["T_VARIABLE","$version",462],")",["T_WHITESPACE","\n    ",462],"{",["T_WHITESPACE","\n        ",463],["T_VARIABLE","$this",464],["T_OBJECT_OPERATOR","->",464],["T_STRING","_modifyResourceDb",464],"(",["T_STRING","self",464],["T_DOUBLE_COLON","::",464],["T_STRING","TYPE_DB_UNINSTALL",464],",",["T_WHITESPACE"," ",464],["T_VARIABLE","$version",464],",",["T_WHITESPACE"," ",464],["T_CONSTANT_ENCAPSED_STRING","''",464],")",";",["T_WHITESPACE","\n        ",464],["T_RETURN","return",465],["T_WHITESPACE"," ",465],["T_VARIABLE","$this",465],";",["T_WHITESPACE","\n    ",465],"}",["T_WHITESPACE","\n\n    ",466],["T_DOC_COMMENT","\/**\n     * Retrieve available Database install\/upgrade files for current module\n     *\n     * @param string $actionType\n     * @param string $fromVersion\n     * @param string $toVersion\n     * @return array\n     *\/",468],["T_WHITESPACE","\n    ",475],["T_PROTECTED","protected",476],["T_WHITESPACE"," ",476],["T_FUNCTION","function",476],["T_WHITESPACE"," ",476],["T_STRING","_getAvailableDbFiles",476],"(",["T_VARIABLE","$actionType",476],",",["T_WHITESPACE"," ",476],["T_VARIABLE","$fromVersion",476],",",["T_WHITESPACE"," ",476],["T_VARIABLE","$toVersion",476],")",["T_WHITESPACE","\n    ",476],"{",["T_WHITESPACE","\n        ",477],["T_VARIABLE","$resModel",478],["T_WHITESPACE","   ",478],"=",["T_WHITESPACE"," ",478],["T_STRING_CAST","(string)",478],["T_VARIABLE","$this",478],["T_OBJECT_OPERATOR","->",478],["T_STRING","_connectionConfig",478],["T_OBJECT_OPERATOR","->",478],["T_STRING","model",478],";",["T_WHITESPACE","\n        ",478],["T_VARIABLE","$modName",479],["T_WHITESPACE","    ",479],"=",["T_WHITESPACE"," ",479],["T_STRING_CAST","(string)",479],["T_VARIABLE","$this",479],["T_OBJECT_OPERATOR","->",479],["T_STRING","_moduleConfig",479],"[",["T_LNUMBER","0",479],"]",["T_OBJECT_OPERATOR","->",479],["T_STRING","getName",479],"(",")",";",["T_WHITESPACE","\n\n        ",479],["T_VARIABLE","$filesDir",481],["T_WHITESPACE","   ",481],"=",["T_WHITESPACE"," ",481],["T_STRING","Mage",481],["T_DOUBLE_COLON","::",481],["T_STRING","getModuleDir",481],"(",["T_CONSTANT_ENCAPSED_STRING","'sql'",481],",",["T_WHITESPACE"," ",481],["T_VARIABLE","$modName",481],")",["T_WHITESPACE"," ",481],".",["T_WHITESPACE"," ",481],["T_STRING","DS",481],["T_WHITESPACE"," ",481],".",["T_WHITESPACE"," ",481],["T_VARIABLE","$this",481],["T_OBJECT_OPERATOR","->",481],["T_STRING","_resourceName",481],";",["T_WHITESPACE","\n        ",481],["T_IF","if",482],["T_WHITESPACE"," ",482],"(","!",["T_STRING","is_dir",482],"(",["T_VARIABLE","$filesDir",482],")",["T_WHITESPACE"," ",482],["T_BOOLEAN_OR","||",482],["T_WHITESPACE"," ",482],"!",["T_STRING","is_readable",482],"(",["T_VARIABLE","$filesDir",482],")",")",["T_WHITESPACE"," ",482],"{",["T_WHITESPACE","\n            ",482],["T_RETURN","return",483],["T_WHITESPACE"," ",483],["T_ARRAY","array",483],"(",")",";",["T_WHITESPACE","\n        ",483],"}",["T_WHITESPACE","\n\n        ",484],["T_VARIABLE","$dbFiles",486],["T_WHITESPACE","    ",486],"=",["T_WHITESPACE"," ",486],["T_ARRAY","array",486],"(",")",";",["T_WHITESPACE","\n        ",486],["T_VARIABLE","$typeFiles",487],["T_WHITESPACE","  ",487],"=",["T_WHITESPACE"," ",487],["T_ARRAY","array",487],"(",")",";",["T_WHITESPACE","\n        ",487],["T_VARIABLE","$regExpDb",488],["T_WHITESPACE","   ",488],"=",["T_WHITESPACE"," ",488],["T_STRING","sprintf",488],"(",["T_CONSTANT_ENCAPSED_STRING","'#^%s-(.*)\\.(php|sql)$#i'",488],",",["T_WHITESPACE"," ",488],["T_VARIABLE","$actionType",488],")",";",["T_WHITESPACE","\n        ",488],["T_VARIABLE","$regExpType",489],["T_WHITESPACE"," ",489],"=",["T_WHITESPACE"," ",489],["T_STRING","sprintf",489],"(",["T_CONSTANT_ENCAPSED_STRING","'#^%s-%s-(.*)\\.(php|sql)$#i'",489],",",["T_WHITESPACE"," ",489],["T_VARIABLE","$resModel",489],",",["T_WHITESPACE"," ",489],["T_VARIABLE","$actionType",489],")",";",["T_WHITESPACE","\n        ",489],["T_VARIABLE","$handlerDir",490],["T_WHITESPACE"," ",490],"=",["T_WHITESPACE"," ",490],["T_STRING","dir",490],"(",["T_VARIABLE","$filesDir",490],")",";",["T_WHITESPACE","\n        ",490],["T_WHILE","while",491],["T_WHITESPACE"," ",491],"(",["T_STRING","false",491],["T_WHITESPACE"," ",491],["T_IS_NOT_IDENTICAL","!==",491],["T_WHITESPACE"," ",491],"(",["T_VARIABLE","$file",491],["T_WHITESPACE"," ",491],"=",["T_WHITESPACE"," ",491],["T_VARIABLE","$handlerDir",491],["T_OBJECT_OPERATOR","->",491],["T_STRING","read",491],"(",")",")",")",["T_WHITESPACE"," ",491],"{",["T_WHITESPACE","\n            ",491],["T_VARIABLE","$matches",492],["T_WHITESPACE"," ",492],"=",["T_WHITESPACE"," ",492],["T_ARRAY","array",492],"(",")",";",["T_WHITESPACE","\n            ",492],["T_IF","if",493],["T_WHITESPACE"," ",493],"(",["T_STRING","preg_match",493],"(",["T_VARIABLE","$regExpDb",493],",",["T_WHITESPACE"," ",493],["T_VARIABLE","$file",493],",",["T_WHITESPACE"," ",493],["T_VARIABLE","$matches",493],")",")",["T_WHITESPACE"," ",493],"{",["T_WHITESPACE","\n                ",493],["T_VARIABLE","$dbFiles",494],"[",["T_VARIABLE","$matches",494],"[",["T_LNUMBER","1",494],"]","]",["T_WHITESPACE"," ",494],"=",["T_WHITESPACE"," ",494],["T_VARIABLE","$filesDir",494],["T_WHITESPACE"," ",494],".",["T_WHITESPACE"," ",494],["T_STRING","DS",494],["T_WHITESPACE"," ",494],".",["T_WHITESPACE"," ",494],["T_VARIABLE","$file",494],";",["T_WHITESPACE","\n            ",494],"}",["T_WHITESPACE"," ",495],["T_ELSE","else",495],["T_WHITESPACE"," ",495],["T_IF","if",495],["T_WHITESPACE"," ",495],"(",["T_STRING","preg_match",495],"(",["T_VARIABLE","$regExpType",495],",",["T_WHITESPACE"," ",495],["T_VARIABLE","$file",495],",",["T_WHITESPACE"," ",495],["T_VARIABLE","$matches",495],")",")",["T_WHITESPACE"," ",495],"{",["T_WHITESPACE","\n                ",495],["T_VARIABLE","$typeFiles",496],"[",["T_VARIABLE","$matches",496],"[",["T_LNUMBER","1",496],"]","]",["T_WHITESPACE"," ",496],"=",["T_WHITESPACE"," ",496],["T_VARIABLE","$filesDir",496],["T_WHITESPACE"," ",496],".",["T_WHITESPACE"," ",496],["T_STRING","DS",496],["T_WHITESPACE"," ",496],".",["T_WHITESPACE"," ",496],["T_VARIABLE","$file",496],";",["T_WHITESPACE","\n            ",496],"}",["T_WHITESPACE","\n        ",497],"}",["T_WHITESPACE","\n        ",498],["T_VARIABLE","$handlerDir",499],["T_OBJECT_OPERATOR","->",499],["T_STRING","close",499],"(",")",";",["T_WHITESPACE","\n\n        ",499],["T_IF","if",501],["T_WHITESPACE"," ",501],"(",["T_EMPTY","empty",501],"(",["T_VARIABLE","$typeFiles",501],")",["T_WHITESPACE"," ",501],["T_BOOLEAN_AND","&&",501],["T_WHITESPACE"," ",501],["T_EMPTY","empty",501],"(",["T_VARIABLE","$dbFiles",501],")",")",["T_WHITESPACE"," ",501],"{",["T_WHITESPACE","\n            ",501],["T_RETURN","return",502],["T_WHITESPACE"," ",502],["T_ARRAY","array",502],"(",")",";",["T_WHITESPACE","\n        ",502],"}",["T_WHITESPACE","\n\n        ",503],["T_FOREACH","foreach",505],["T_WHITESPACE"," ",505],"(",["T_VARIABLE","$typeFiles",505],["T_WHITESPACE"," ",505],["T_AS","as",505],["T_WHITESPACE"," ",505],["T_VARIABLE","$version",505],["T_WHITESPACE"," ",505],["T_DOUBLE_ARROW","=>",505],["T_WHITESPACE"," ",505],["T_VARIABLE","$file",505],")",["T_WHITESPACE"," ",505],"{",["T_WHITESPACE","\n            ",505],["T_VARIABLE","$dbFiles",506],"[",["T_VARIABLE","$version",506],"]",["T_WHITESPACE"," ",506],"=",["T_WHITESPACE"," ",506],["T_VARIABLE","$file",506],";",["T_WHITESPACE","\n        ",506],"}",["T_WHITESPACE","\n\n        ",507],["T_RETURN","return",509],["T_WHITESPACE"," ",509],["T_VARIABLE","$this",509],["T_OBJECT_OPERATOR","->",509],["T_STRING","_getModifySqlFiles",509],"(",["T_VARIABLE","$actionType",509],",",["T_WHITESPACE"," ",509],["T_VARIABLE","$fromVersion",509],",",["T_WHITESPACE"," ",509],["T_VARIABLE","$toVersion",509],",",["T_WHITESPACE"," ",509],["T_VARIABLE","$dbFiles",509],")",";",["T_WHITESPACE","\n    ",509],"}",["T_WHITESPACE","\n\n    ",510],["T_DOC_COMMENT","\/**\n     * Retrieve available Data install\/upgrade files for current module\n     *\n     * @param string $actionType\n     * @param string $fromVersion\n     * @param string $toVersion\n     * @return array\n     *\/",512],["T_WHITESPACE","\n    ",519],["T_PROTECTED","protected",520],["T_WHITESPACE"," ",520],["T_FUNCTION","function",520],["T_WHITESPACE"," ",520],["T_STRING","_getAvailableDataFiles",520],"(",["T_VARIABLE","$actionType",520],",",["T_WHITESPACE"," ",520],["T_VARIABLE","$fromVersion",520],",",["T_WHITESPACE"," ",520],["T_VARIABLE","$toVersion",520],")",["T_WHITESPACE","\n    ",520],"{",["T_WHITESPACE","\n        ",521],["T_VARIABLE","$modName",522],["T_WHITESPACE","    ",522],"=",["T_WHITESPACE"," ",522],["T_STRING_CAST","(string)",522],["T_VARIABLE","$this",522],["T_OBJECT_OPERATOR","->",522],["T_STRING","_moduleConfig",522],"[",["T_LNUMBER","0",522],"]",["T_OBJECT_OPERATOR","->",522],["T_STRING","getName",522],"(",")",";",["T_WHITESPACE","\n        ",522],["T_VARIABLE","$files",523],["T_WHITESPACE","      ",523],"=",["T_WHITESPACE"," ",523],["T_ARRAY","array",523],"(",")",";",["T_WHITESPACE","\n\n        ",523],["T_VARIABLE","$filesDir",525],["T_WHITESPACE","   ",525],"=",["T_WHITESPACE"," ",525],["T_STRING","Mage",525],["T_DOUBLE_COLON","::",525],["T_STRING","getModuleDir",525],"(",["T_CONSTANT_ENCAPSED_STRING","'data'",525],",",["T_WHITESPACE"," ",525],["T_VARIABLE","$modName",525],")",["T_WHITESPACE"," ",525],".",["T_WHITESPACE"," ",525],["T_STRING","DS",525],["T_WHITESPACE"," ",525],".",["T_WHITESPACE"," ",525],["T_VARIABLE","$this",525],["T_OBJECT_OPERATOR","->",525],["T_STRING","_resourceName",525],";",["T_WHITESPACE","\n        ",525],["T_IF","if",526],["T_WHITESPACE"," ",526],"(",["T_STRING","is_dir",526],"(",["T_VARIABLE","$filesDir",526],")",["T_WHITESPACE"," ",526],["T_BOOLEAN_AND","&&",526],["T_WHITESPACE"," ",526],["T_STRING","is_readable",526],"(",["T_VARIABLE","$filesDir",526],")",")",["T_WHITESPACE"," ",526],"{",["T_WHITESPACE","\n            ",526],["T_VARIABLE","$regExp",527],["T_WHITESPACE","     ",527],"=",["T_WHITESPACE"," ",527],["T_STRING","sprintf",527],"(",["T_CONSTANT_ENCAPSED_STRING","'#^%s-(.*)\\.php$#i'",527],",",["T_WHITESPACE"," ",527],["T_VARIABLE","$actionType",527],")",";",["T_WHITESPACE","\n            ",527],["T_VARIABLE","$handlerDir",528],["T_WHITESPACE"," ",528],"=",["T_WHITESPACE"," ",528],["T_STRING","dir",528],"(",["T_VARIABLE","$filesDir",528],")",";",["T_WHITESPACE","\n            ",528],["T_WHILE","while",529],["T_WHITESPACE"," ",529],"(",["T_STRING","false",529],["T_WHITESPACE"," ",529],["T_IS_NOT_IDENTICAL","!==",529],["T_WHITESPACE"," ",529],"(",["T_VARIABLE","$file",529],["T_WHITESPACE"," ",529],"=",["T_WHITESPACE"," ",529],["T_VARIABLE","$handlerDir",529],["T_OBJECT_OPERATOR","->",529],["T_STRING","read",529],"(",")",")",")",["T_WHITESPACE"," ",529],"{",["T_WHITESPACE","\n                ",529],["T_VARIABLE","$matches",530],["T_WHITESPACE"," ",530],"=",["T_WHITESPACE"," ",530],["T_ARRAY","array",530],"(",")",";",["T_WHITESPACE","\n                ",530],["T_IF","if",531],["T_WHITESPACE"," ",531],"(",["T_STRING","preg_match",531],"(",["T_VARIABLE","$regExp",531],",",["T_WHITESPACE"," ",531],["T_VARIABLE","$file",531],",",["T_WHITESPACE"," ",531],["T_VARIABLE","$matches",531],")",")",["T_WHITESPACE"," ",531],"{",["T_WHITESPACE","\n                    ",531],["T_VARIABLE","$files",532],"[",["T_VARIABLE","$matches",532],"[",["T_LNUMBER","1",532],"]","]",["T_WHITESPACE"," ",532],"=",["T_WHITESPACE"," ",532],["T_VARIABLE","$filesDir",532],["T_WHITESPACE"," ",532],".",["T_WHITESPACE"," ",532],["T_STRING","DS",532],["T_WHITESPACE"," ",532],".",["T_WHITESPACE"," ",532],["T_VARIABLE","$file",532],";",["T_WHITESPACE","\n                ",532],"}",["T_WHITESPACE","\n\n            ",533],"}",["T_WHITESPACE","\n            ",535],["T_VARIABLE","$handlerDir",536],["T_OBJECT_OPERATOR","->",536],["T_STRING","close",536],"(",")",";",["T_WHITESPACE","\n        ",536],"}",["T_WHITESPACE","\n\n        ",537],["T_COMMENT","\/\/ search data files in old location\n",539],["T_WHITESPACE","        ",540],["T_VARIABLE","$filesDir",540],["T_WHITESPACE","   ",540],"=",["T_WHITESPACE"," ",540],["T_STRING","Mage",540],["T_DOUBLE_COLON","::",540],["T_STRING","getModuleDir",540],"(",["T_CONSTANT_ENCAPSED_STRING","'sql'",540],",",["T_WHITESPACE"," ",540],["T_VARIABLE","$modName",540],")",["T_WHITESPACE"," ",540],".",["T_WHITESPACE"," ",540],["T_STRING","DS",540],["T_WHITESPACE"," ",540],".",["T_WHITESPACE"," ",540],["T_VARIABLE","$this",540],["T_OBJECT_OPERATOR","->",540],["T_STRING","_resourceName",540],";",["T_WHITESPACE","\n        ",540],["T_IF","if",541],["T_WHITESPACE"," ",541],"(",["T_STRING","is_dir",541],"(",["T_VARIABLE","$filesDir",541],")",["T_WHITESPACE"," ",541],["T_BOOLEAN_AND","&&",541],["T_WHITESPACE"," ",541],["T_STRING","is_readable",541],"(",["T_VARIABLE","$filesDir",541],")",")",["T_WHITESPACE"," ",541],"{",["T_WHITESPACE","\n            ",541],["T_VARIABLE","$regExp",542],["T_WHITESPACE","     ",542],"=",["T_WHITESPACE"," ",542],["T_STRING","sprintf",542],"(",["T_CONSTANT_ENCAPSED_STRING","'#^%s-%s-(.*)\\.php$#i'",542],",",["T_WHITESPACE"," ",542],["T_VARIABLE","$this",542],["T_OBJECT_OPERATOR","->",542],["T_STRING","_connectionConfig",542],["T_OBJECT_OPERATOR","->",542],["T_STRING","model",542],",",["T_WHITESPACE"," ",542],["T_VARIABLE","$actionType",542],")",";",["T_WHITESPACE","\n            ",542],["T_VARIABLE","$handlerDir",543],["T_WHITESPACE"," ",543],"=",["T_WHITESPACE"," ",543],["T_STRING","dir",543],"(",["T_VARIABLE","$filesDir",543],")",";",["T_WHITESPACE","\n\n            ",543],["T_WHILE","while",545],["T_WHITESPACE"," ",545],"(",["T_STRING","false",545],["T_WHITESPACE"," ",545],["T_IS_NOT_IDENTICAL","!==",545],["T_WHITESPACE"," ",545],"(",["T_VARIABLE","$file",545],["T_WHITESPACE"," ",545],"=",["T_WHITESPACE"," ",545],["T_VARIABLE","$handlerDir",545],["T_OBJECT_OPERATOR","->",545],["T_STRING","read",545],"(",")",")",")",["T_WHITESPACE"," ",545],"{",["T_WHITESPACE","\n                ",545],["T_VARIABLE","$matches",546],["T_WHITESPACE"," ",546],"=",["T_WHITESPACE"," ",546],["T_ARRAY","array",546],"(",")",";",["T_WHITESPACE","\n                ",546],["T_IF","if",547],["T_WHITESPACE"," ",547],"(",["T_STRING","preg_match",547],"(",["T_VARIABLE","$regExp",547],",",["T_WHITESPACE"," ",547],["T_VARIABLE","$file",547],",",["T_WHITESPACE"," ",547],["T_VARIABLE","$matches",547],")",")",["T_WHITESPACE"," ",547],"{",["T_WHITESPACE","\n                    ",547],["T_VARIABLE","$files",548],"[",["T_VARIABLE","$matches",548],"[",["T_LNUMBER","1",548],"]","]",["T_WHITESPACE"," ",548],"=",["T_WHITESPACE"," ",548],["T_VARIABLE","$filesDir",548],["T_WHITESPACE"," ",548],".",["T_WHITESPACE"," ",548],["T_STRING","DS",548],["T_WHITESPACE"," ",548],".",["T_WHITESPACE"," ",548],["T_VARIABLE","$file",548],";",["T_WHITESPACE","\n                ",548],"}",["T_WHITESPACE","\n            ",549],"}",["T_WHITESPACE","\n            ",550],["T_VARIABLE","$handlerDir",551],["T_OBJECT_OPERATOR","->",551],["T_STRING","close",551],"(",")",";",["T_WHITESPACE","\n        ",551],"}",["T_WHITESPACE","\n\n        ",552],["T_IF","if",554],["T_WHITESPACE"," ",554],"(",["T_EMPTY","empty",554],"(",["T_VARIABLE","$files",554],")",")",["T_WHITESPACE"," ",554],"{",["T_WHITESPACE","\n            ",554],["T_RETURN","return",555],["T_WHITESPACE"," ",555],["T_ARRAY","array",555],"(",")",";",["T_WHITESPACE","\n        ",555],"}",["T_WHITESPACE","\n\n        ",556],["T_RETURN","return",558],["T_WHITESPACE"," ",558],["T_VARIABLE","$this",558],["T_OBJECT_OPERATOR","->",558],["T_STRING","_getModifySqlFiles",558],"(",["T_VARIABLE","$actionType",558],",",["T_WHITESPACE"," ",558],["T_VARIABLE","$fromVersion",558],",",["T_WHITESPACE"," ",558],["T_VARIABLE","$toVersion",558],",",["T_WHITESPACE"," ",558],["T_VARIABLE","$files",558],")",";",["T_WHITESPACE","\n    ",558],"}",["T_WHITESPACE","\n\n    ",559],["T_DOC_COMMENT","\/**\n     * Save resource version\n     *\n     * @param string $actionType\n     * @param string $version\n     * @return Mage_Core_Model_Resource_Setup\n     *\/",561],["T_WHITESPACE","\n    ",567],["T_PROTECTED","protected",568],["T_WHITESPACE"," ",568],["T_FUNCTION","function",568],["T_WHITESPACE"," ",568],["T_STRING","_setResourceVersion",568],"(",["T_VARIABLE","$actionType",568],",",["T_WHITESPACE"," ",568],["T_VARIABLE","$version",568],")",["T_WHITESPACE","\n    ",568],"{",["T_WHITESPACE","\n        ",569],["T_SWITCH","switch",570],["T_WHITESPACE"," ",570],"(",["T_VARIABLE","$actionType",570],")",["T_WHITESPACE"," ",570],"{",["T_WHITESPACE","\n            ",570],["T_CASE","case",571],["T_WHITESPACE"," ",571],["T_STRING","self",571],["T_DOUBLE_COLON","::",571],["T_STRING","TYPE_DB_INSTALL",571],":",["T_WHITESPACE","\n            ",571],["T_CASE","case",572],["T_WHITESPACE"," ",572],["T_STRING","self",572],["T_DOUBLE_COLON","::",572],["T_STRING","TYPE_DB_UPGRADE",572],":",["T_WHITESPACE","\n                ",572],["T_VARIABLE","$this",573],["T_OBJECT_OPERATOR","->",573],["T_STRING","_getResource",573],"(",")",["T_OBJECT_OPERATOR","->",573],["T_STRING","setDbVersion",573],"(",["T_VARIABLE","$this",573],["T_OBJECT_OPERATOR","->",573],["T_STRING","_resourceName",573],",",["T_WHITESPACE"," ",573],["T_VARIABLE","$version",573],")",";",["T_WHITESPACE","\n                ",573],["T_BREAK","break",574],";",["T_WHITESPACE","\n            ",574],["T_CASE","case",575],["T_WHITESPACE"," ",575],["T_STRING","self",575],["T_DOUBLE_COLON","::",575],["T_STRING","TYPE_DATA_INSTALL",575],":",["T_WHITESPACE","\n            ",575],["T_CASE","case",576],["T_WHITESPACE"," ",576],["T_STRING","self",576],["T_DOUBLE_COLON","::",576],["T_STRING","TYPE_DATA_UPGRADE",576],":",["T_WHITESPACE","\n                ",576],["T_VARIABLE","$this",577],["T_OBJECT_OPERATOR","->",577],["T_STRING","_getResource",577],"(",")",["T_OBJECT_OPERATOR","->",577],["T_STRING","setDataVersion",577],"(",["T_VARIABLE","$this",577],["T_OBJECT_OPERATOR","->",577],["T_STRING","_resourceName",577],",",["T_WHITESPACE"," ",577],["T_VARIABLE","$version",577],")",";",["T_WHITESPACE","\n                ",577],["T_BREAK","break",578],";",["T_WHITESPACE","\n\n        ",578],"}",["T_WHITESPACE","\n\n        ",580],["T_RETURN","return",582],["T_WHITESPACE"," ",582],["T_VARIABLE","$this",582],";",["T_WHITESPACE","\n    ",582],"}",["T_WHITESPACE","\n\n    ",583],["T_DOC_COMMENT","\/**\n     * Run module modification files. Return version of last applied upgrade (false if no upgrades applied)\n     *\n     * @param string $actionType self::TYPE_*\n     * @param string $fromVersion\n     * @param string $toVersion\n     * @return string|false\n     * @throws Mage_Core_Exception\n     *\/",585],["T_WHITESPACE","\n\n    ",593],["T_PROTECTED","protected",595],["T_WHITESPACE"," ",595],["T_FUNCTION","function",595],["T_WHITESPACE"," ",595],["T_STRING","_modifyResourceDb",595],"(",["T_VARIABLE","$actionType",595],",",["T_WHITESPACE"," ",595],["T_VARIABLE","$fromVersion",595],",",["T_WHITESPACE"," ",595],["T_VARIABLE","$toVersion",595],")",["T_WHITESPACE","\n    ",595],"{",["T_WHITESPACE","\n        ",596],["T_SWITCH","switch",597],["T_WHITESPACE"," ",597],"(",["T_VARIABLE","$actionType",597],")",["T_WHITESPACE"," ",597],"{",["T_WHITESPACE","\n            ",597],["T_CASE","case",598],["T_WHITESPACE"," ",598],["T_STRING","self",598],["T_DOUBLE_COLON","::",598],["T_STRING","TYPE_DB_INSTALL",598],":",["T_WHITESPACE","\n            ",598],["T_CASE","case",599],["T_WHITESPACE"," ",599],["T_STRING","self",599],["T_DOUBLE_COLON","::",599],["T_STRING","TYPE_DB_UPGRADE",599],":",["T_WHITESPACE","\n                ",599],["T_VARIABLE","$files",600],["T_WHITESPACE"," ",600],"=",["T_WHITESPACE"," ",600],["T_VARIABLE","$this",600],["T_OBJECT_OPERATOR","->",600],["T_STRING","_getAvailableDbFiles",600],"(",["T_VARIABLE","$actionType",600],",",["T_WHITESPACE"," ",600],["T_VARIABLE","$fromVersion",600],",",["T_WHITESPACE"," ",600],["T_VARIABLE","$toVersion",600],")",";",["T_WHITESPACE","\n                ",600],["T_BREAK","break",601],";",["T_WHITESPACE","\n            ",601],["T_CASE","case",602],["T_WHITESPACE"," ",602],["T_STRING","self",602],["T_DOUBLE_COLON","::",602],["T_STRING","TYPE_DATA_INSTALL",602],":",["T_WHITESPACE","\n            ",602],["T_CASE","case",603],["T_WHITESPACE"," ",603],["T_STRING","self",603],["T_DOUBLE_COLON","::",603],["T_STRING","TYPE_DATA_UPGRADE",603],":",["T_WHITESPACE","\n                ",603],["T_VARIABLE","$files",604],["T_WHITESPACE"," ",604],"=",["T_WHITESPACE"," ",604],["T_VARIABLE","$this",604],["T_OBJECT_OPERATOR","->",604],["T_STRING","_getAvailableDataFiles",604],"(",["T_VARIABLE","$actionType",604],",",["T_WHITESPACE"," ",604],["T_VARIABLE","$fromVersion",604],",",["T_WHITESPACE"," ",604],["T_VARIABLE","$toVersion",604],")",";",["T_WHITESPACE","\n                ",604],["T_BREAK","break",605],";",["T_WHITESPACE","\n            ",605],["T_DEFAULT","default",606],":",["T_WHITESPACE","\n                ",606],["T_VARIABLE","$files",607],["T_WHITESPACE"," ",607],"=",["T_WHITESPACE"," ",607],["T_ARRAY","array",607],"(",")",";",["T_WHITESPACE","\n                ",607],["T_BREAK","break",608],";",["T_WHITESPACE","\n        ",608],"}",["T_WHITESPACE","\n        ",609],["T_IF","if",610],["T_WHITESPACE"," ",610],"(",["T_EMPTY","empty",610],"(",["T_VARIABLE","$files",610],")",["T_WHITESPACE"," ",610],["T_BOOLEAN_OR","||",610],["T_WHITESPACE"," ",610],"!",["T_VARIABLE","$this",610],["T_OBJECT_OPERATOR","->",610],["T_STRING","getConnection",610],"(",")",")",["T_WHITESPACE"," ",610],"{",["T_WHITESPACE","\n            ",610],["T_RETURN","return",611],["T_WHITESPACE"," ",611],["T_STRING","false",611],";",["T_WHITESPACE","\n        ",611],"}",["T_WHITESPACE","\n\n        ",612],["T_VARIABLE","$version",614],["T_WHITESPACE"," ",614],"=",["T_WHITESPACE"," ",614],["T_STRING","false",614],";",["T_WHITESPACE","\n\n        ",614],["T_FOREACH","foreach",616],["T_WHITESPACE"," ",616],"(",["T_VARIABLE","$files",616],["T_WHITESPACE"," ",616],["T_AS","as",616],["T_WHITESPACE"," ",616],["T_VARIABLE","$file",616],")",["T_WHITESPACE"," ",616],"{",["T_WHITESPACE","\n            ",616],["T_VARIABLE","$fileName",617],["T_WHITESPACE"," ",617],"=",["T_WHITESPACE"," ",617],["T_VARIABLE","$file",617],"[",["T_CONSTANT_ENCAPSED_STRING","'fileName'",617],"]",";",["T_WHITESPACE","\n            ",617],["T_VARIABLE","$fileType",618],["T_WHITESPACE"," ",618],"=",["T_WHITESPACE"," ",618],["T_STRING","pathinfo",618],"(",["T_VARIABLE","$fileName",618],",",["T_WHITESPACE"," ",618],["T_STRING","PATHINFO_EXTENSION",618],")",";",["T_WHITESPACE","\n            ",618],["T_VARIABLE","$this",619],["T_OBJECT_OPERATOR","->",619],["T_STRING","getConnection",619],"(",")",["T_OBJECT_OPERATOR","->",619],["T_STRING","disallowDdlCache",619],"(",")",";",["T_WHITESPACE","\n            ",619],["T_TRY","try",620],["T_WHITESPACE"," ",620],"{",["T_WHITESPACE","\n                ",620],["T_SWITCH","switch",621],["T_WHITESPACE"," ",621],"(",["T_VARIABLE","$fileType",621],")",["T_WHITESPACE"," ",621],"{",["T_WHITESPACE","\n                    ",621],["T_CASE","case",622],["T_WHITESPACE"," ",622],["T_CONSTANT_ENCAPSED_STRING","'php'",622],":",["T_WHITESPACE","\n                        ",622],["T_VARIABLE","$conn",623],["T_WHITESPACE","   ",623],"=",["T_WHITESPACE"," ",623],["T_VARIABLE","$this",623],["T_OBJECT_OPERATOR","->",623],["T_STRING","getConnection",623],"(",")",";",["T_WHITESPACE","\n                        ",623],["T_VARIABLE","$result",624],["T_WHITESPACE"," ",624],"=",["T_WHITESPACE"," ",624],["T_INCLUDE","include",624],["T_WHITESPACE"," ",624],["T_VARIABLE","$fileName",624],";",["T_WHITESPACE","\n                        ",624],["T_BREAK","break",625],";",["T_WHITESPACE","\n                    ",625],["T_CASE","case",626],["T_WHITESPACE"," ",626],["T_CONSTANT_ENCAPSED_STRING","'sql'",626],":",["T_WHITESPACE","\n                        ",626],["T_VARIABLE","$sql",627],["T_WHITESPACE"," ",627],"=",["T_WHITESPACE"," ",627],["T_STRING","file_get_contents",627],"(",["T_VARIABLE","$fileName",627],")",";",["T_WHITESPACE","\n                        ",627],["T_IF","if",628],["T_WHITESPACE"," ",628],"(","!",["T_EMPTY","empty",628],"(",["T_VARIABLE","$sql",628],")",")",["T_WHITESPACE"," ",628],"{",["T_WHITESPACE","\n\n                            ",628],["T_VARIABLE","$result",630],["T_WHITESPACE"," ",630],"=",["T_WHITESPACE"," ",630],["T_VARIABLE","$this",630],["T_OBJECT_OPERATOR","->",630],["T_STRING","run",630],"(",["T_VARIABLE","$sql",630],")",";",["T_WHITESPACE","\n                        ",630],"}",["T_WHITESPACE"," ",631],["T_ELSE","else",631],["T_WHITESPACE"," ",631],"{",["T_WHITESPACE","\n                            ",631],["T_VARIABLE","$result",632],["T_WHITESPACE"," ",632],"=",["T_WHITESPACE"," ",632],["T_STRING","true",632],";",["T_WHITESPACE","\n                        ",632],"}",["T_WHITESPACE","\n                        ",633],["T_BREAK","break",634],";",["T_WHITESPACE","\n                    ",634],["T_DEFAULT","default",635],":",["T_WHITESPACE","\n                        ",635],["T_VARIABLE","$result",636],["T_WHITESPACE"," ",636],"=",["T_WHITESPACE"," ",636],["T_STRING","false",636],";",["T_WHITESPACE","\n                        ",636],["T_BREAK","break",637],";",["T_WHITESPACE","\n                ",637],"}",["T_WHITESPACE","\n\n                ",638],["T_IF","if",640],["T_WHITESPACE"," ",640],"(",["T_VARIABLE","$result",640],")",["T_WHITESPACE"," ",640],"{",["T_WHITESPACE","\n                    ",640],["T_VARIABLE","$this",641],["T_OBJECT_OPERATOR","->",641],["T_STRING","_setResourceVersion",641],"(",["T_VARIABLE","$actionType",641],",",["T_WHITESPACE"," ",641],["T_VARIABLE","$file",641],"[",["T_CONSTANT_ENCAPSED_STRING","'toVersion'",641],"]",")",";",["T_WHITESPACE","\n                ",641],"}",["T_WHITESPACE","\n            ",642],"}",["T_WHITESPACE"," ",643],["T_CATCH","catch",643],["T_WHITESPACE"," ",643],"(",["T_STRING","Exception",643],["T_WHITESPACE"," ",643],["T_VARIABLE","$e",643],")",["T_WHITESPACE"," ",643],"{",["T_WHITESPACE","\n                ",643],["T_THROW","throw",644],["T_WHITESPACE"," ",644],["T_STRING","Mage",644],["T_DOUBLE_COLON","::",644],["T_STRING","exception",644],"(",["T_CONSTANT_ENCAPSED_STRING","'Mage_Core'",644],",",["T_WHITESPACE"," ",644],["T_STRING","Mage",644],["T_DOUBLE_COLON","::",644],["T_STRING","helper",644],"(",["T_CONSTANT_ENCAPSED_STRING","'core'",644],")",["T_OBJECT_OPERATOR","->",644],["T_STRING","__",644],"(",["T_CONSTANT_ENCAPSED_STRING","'Error in file: \"%s\" - %s'",644],",",["T_WHITESPACE"," ",644],["T_VARIABLE","$fileName",644],",",["T_WHITESPACE"," ",644],["T_VARIABLE","$e",644],["T_OBJECT_OPERATOR","->",644],["T_STRING","getMessage",644],"(",")",")",")",";",["T_WHITESPACE","\n            ",644],"}",["T_WHITESPACE","\n            ",645],["T_VARIABLE","$version",646],["T_WHITESPACE"," ",646],"=",["T_WHITESPACE"," ",646],["T_VARIABLE","$file",646],"[",["T_CONSTANT_ENCAPSED_STRING","'toVersion'",646],"]",";",["T_WHITESPACE","\n            ",646],["T_VARIABLE","$this",647],["T_OBJECT_OPERATOR","->",647],["T_STRING","getConnection",647],"(",")",["T_OBJECT_OPERATOR","->",647],["T_STRING","allowDdlCache",647],"(",")",";",["T_WHITESPACE","\n        ",647],"}",["T_WHITESPACE","\n        ",648],["T_STRING","self",649],["T_DOUBLE_COLON","::",649],["T_VARIABLE","$_hadUpdates",649],["T_WHITESPACE"," ",649],"=",["T_WHITESPACE"," ",649],["T_STRING","true",649],";",["T_WHITESPACE","\n        ",649],["T_RETURN","return",650],["T_WHITESPACE"," ",650],["T_VARIABLE","$version",650],";",["T_WHITESPACE","\n    ",650],"}",["T_WHITESPACE","\n\n    ",651],["T_DOC_COMMENT","\/**\n     * Get data files for modifications\n     *\n     * @param string $actionType\n     * @param string $fromVersion\n     * @param string $toVersion\n     * @param array $arrFiles\n     * @return array\n     *\/",653],["T_WHITESPACE","\n    ",661],["T_PROTECTED","protected",662],["T_WHITESPACE"," ",662],["T_FUNCTION","function",662],["T_WHITESPACE"," ",662],["T_STRING","_getModifySqlFiles",662],"(",["T_VARIABLE","$actionType",662],",",["T_WHITESPACE"," ",662],["T_VARIABLE","$fromVersion",662],",",["T_WHITESPACE"," ",662],["T_VARIABLE","$toVersion",662],",",["T_WHITESPACE"," ",662],["T_VARIABLE","$arrFiles",662],")",["T_WHITESPACE","\n    ",662],"{",["T_WHITESPACE","\n        ",663],["T_VARIABLE","$arrRes",664],["T_WHITESPACE"," ",664],"=",["T_WHITESPACE"," ",664],["T_ARRAY","array",664],"(",")",";",["T_WHITESPACE","\n        ",664],["T_SWITCH","switch",665],["T_WHITESPACE"," ",665],"(",["T_VARIABLE","$actionType",665],")",["T_WHITESPACE"," ",665],"{",["T_WHITESPACE","\n            ",665],["T_CASE","case",666],["T_WHITESPACE"," ",666],["T_STRING","self",666],["T_DOUBLE_COLON","::",666],["T_STRING","TYPE_DB_INSTALL",666],":",["T_WHITESPACE","\n            ",666],["T_CASE","case",667],["T_WHITESPACE"," ",667],["T_STRING","self",667],["T_DOUBLE_COLON","::",667],["T_STRING","TYPE_DATA_INSTALL",667],":",["T_WHITESPACE","\n                ",667],["T_STRING","uksort",668],"(",["T_VARIABLE","$arrFiles",668],",",["T_WHITESPACE"," ",668],["T_CONSTANT_ENCAPSED_STRING","'version_compare'",668],")",";",["T_WHITESPACE","\n                ",668],["T_FOREACH","foreach",669],["T_WHITESPACE"," ",669],"(",["T_VARIABLE","$arrFiles",669],["T_WHITESPACE"," ",669],["T_AS","as",669],["T_WHITESPACE"," ",669],["T_VARIABLE","$version",669],["T_WHITESPACE"," ",669],["T_DOUBLE_ARROW","=>",669],["T_WHITESPACE"," ",669],["T_VARIABLE","$file",669],")",["T_WHITESPACE"," ",669],"{",["T_WHITESPACE","\n                    ",669],["T_IF","if",670],["T_WHITESPACE"," ",670],"(",["T_STRING","version_compare",670],"(",["T_VARIABLE","$version",670],",",["T_WHITESPACE"," ",670],["T_VARIABLE","$toVersion",670],")",["T_WHITESPACE"," ",670],["T_IS_NOT_IDENTICAL","!==",670],["T_WHITESPACE"," ",670],["T_STRING","self",670],["T_DOUBLE_COLON","::",670],["T_STRING","VERSION_COMPARE_GREATER",670],")",["T_WHITESPACE"," ",670],"{",["T_WHITESPACE","\n                        ",670],["T_VARIABLE","$arrRes",671],"[",["T_LNUMBER","0",671],"]",["T_WHITESPACE"," ",671],"=",["T_WHITESPACE"," ",671],["T_ARRAY","array",671],"(",["T_WHITESPACE","\n                            ",671],["T_CONSTANT_ENCAPSED_STRING","'toVersion'",672],["T_WHITESPACE"," ",672],["T_DOUBLE_ARROW","=>",672],["T_WHITESPACE"," ",672],["T_VARIABLE","$version",672],",",["T_WHITESPACE","\n                            ",672],["T_CONSTANT_ENCAPSED_STRING","'fileName'",673],["T_WHITESPACE","  ",673],["T_DOUBLE_ARROW","=>",673],["T_WHITESPACE"," ",673],["T_VARIABLE","$file",673],["T_WHITESPACE","\n                        ",673],")",";",["T_WHITESPACE","\n                    ",674],"}",["T_WHITESPACE","\n                ",675],"}",["T_WHITESPACE","\n                ",676],["T_BREAK","break",677],";",["T_WHITESPACE","\n\n            ",677],["T_CASE","case",679],["T_WHITESPACE"," ",679],["T_STRING","self",679],["T_DOUBLE_COLON","::",679],["T_STRING","TYPE_DB_UPGRADE",679],":",["T_WHITESPACE","\n            ",679],["T_CASE","case",680],["T_WHITESPACE"," ",680],["T_STRING","self",680],["T_DOUBLE_COLON","::",680],["T_STRING","TYPE_DATA_UPGRADE",680],":",["T_WHITESPACE","\n                ",680],["T_STRING","uksort",681],"(",["T_VARIABLE","$arrFiles",681],",",["T_WHITESPACE"," ",681],["T_CONSTANT_ENCAPSED_STRING","'version_compare'",681],")",";",["T_WHITESPACE","\n                ",681],["T_FOREACH","foreach",682],["T_WHITESPACE"," ",682],"(",["T_VARIABLE","$arrFiles",682],["T_WHITESPACE"," ",682],["T_AS","as",682],["T_WHITESPACE"," ",682],["T_VARIABLE","$version",682],["T_WHITESPACE"," ",682],["T_DOUBLE_ARROW","=>",682],["T_WHITESPACE"," ",682],["T_VARIABLE","$file",682],")",["T_WHITESPACE"," ",682],"{",["T_WHITESPACE","\n                    ",682],["T_VARIABLE","$versionInfo",683],["T_WHITESPACE"," ",683],"=",["T_WHITESPACE"," ",683],["T_STRING","explode",683],"(",["T_CONSTANT_ENCAPSED_STRING","'-'",683],",",["T_WHITESPACE"," ",683],["T_VARIABLE","$version",683],")",";",["T_WHITESPACE","\n\n                    ",683],["T_COMMENT","\/\/ In array must be 2 elements: 0 => version from, 1 => version to\n",685],["T_WHITESPACE","                    ",686],["T_IF","if",686],["T_WHITESPACE"," ",686],"(",["T_STRING","count",686],"(",["T_VARIABLE","$versionInfo",686],")",["T_IS_NOT_EQUAL","!=",686],["T_LNUMBER","2",686],")",["T_WHITESPACE"," ",686],"{",["T_WHITESPACE","\n                        ",686],["T_BREAK","break",687],";",["T_WHITESPACE","\n                    ",687],"}",["T_WHITESPACE","\n                    ",688],["T_VARIABLE","$infoFrom",689],["T_WHITESPACE"," ",689],"=",["T_WHITESPACE"," ",689],["T_VARIABLE","$versionInfo",689],"[",["T_LNUMBER","0",689],"]",";",["T_WHITESPACE","\n                    ",689],["T_VARIABLE","$infoTo",690],["T_WHITESPACE","   ",690],"=",["T_WHITESPACE"," ",690],["T_VARIABLE","$versionInfo",690],"[",["T_LNUMBER","1",690],"]",";",["T_WHITESPACE","\n                    ",690],["T_IF","if",691],["T_WHITESPACE"," ",691],"(",["T_STRING","version_compare",691],"(",["T_VARIABLE","$infoFrom",691],",",["T_WHITESPACE"," ",691],["T_VARIABLE","$fromVersion",691],")",["T_WHITESPACE"," ",691],["T_IS_NOT_IDENTICAL","!==",691],["T_WHITESPACE"," ",691],["T_STRING","self",691],["T_DOUBLE_COLON","::",691],["T_STRING","VERSION_COMPARE_LOWER",691],["T_WHITESPACE","\n                        ",691],["T_BOOLEAN_AND","&&",692],["T_WHITESPACE"," ",692],["T_STRING","version_compare",692],"(",["T_VARIABLE","$infoTo",692],",",["T_WHITESPACE"," ",692],["T_VARIABLE","$toVersion",692],")",["T_WHITESPACE"," ",692],["T_IS_NOT_IDENTICAL","!==",692],["T_WHITESPACE"," ",692],["T_STRING","self",692],["T_DOUBLE_COLON","::",692],["T_STRING","VERSION_COMPARE_GREATER",692],")",["T_WHITESPACE"," ",692],"{",["T_WHITESPACE","\n                        ",692],["T_VARIABLE","$arrRes",693],"[","]",["T_WHITESPACE"," ",693],"=",["T_WHITESPACE"," ",693],["T_ARRAY","array",693],"(",["T_WHITESPACE","\n                            ",693],["T_CONSTANT_ENCAPSED_STRING","'toVersion'",694],["T_WHITESPACE"," ",694],["T_DOUBLE_ARROW","=>",694],["T_WHITESPACE"," ",694],["T_VARIABLE","$infoTo",694],",",["T_WHITESPACE","\n                            ",694],["T_CONSTANT_ENCAPSED_STRING","'fileName'",695],["T_WHITESPACE","  ",695],["T_DOUBLE_ARROW","=>",695],["T_WHITESPACE"," ",695],["T_VARIABLE","$file",695],["T_WHITESPACE","\n                        ",695],")",";",["T_WHITESPACE","\n                    ",696],"}",["T_WHITESPACE","\n                ",697],"}",["T_WHITESPACE","\n                ",698],["T_BREAK","break",699],";",["T_WHITESPACE","\n\n            ",699],["T_CASE","case",701],["T_WHITESPACE"," ",701],["T_STRING","self",701],["T_DOUBLE_COLON","::",701],["T_STRING","TYPE_DB_ROLLBACK",701],":",["T_WHITESPACE","\n                ",701],["T_BREAK","break",702],";",["T_WHITESPACE","\n\n            ",702],["T_CASE","case",704],["T_WHITESPACE"," ",704],["T_STRING","self",704],["T_DOUBLE_COLON","::",704],["T_STRING","TYPE_DB_UNINSTALL",704],":",["T_WHITESPACE","\n                ",704],["T_BREAK","break",705],";",["T_WHITESPACE","\n        ",705],"}",["T_WHITESPACE","\n        ",706],["T_RETURN","return",707],["T_WHITESPACE"," ",707],["T_VARIABLE","$arrRes",707],";",["T_WHITESPACE","\n    ",707],"}",["T_WHITESPACE","\n\n\n",708],["T_COMMENT","\/******************* UTILITY METHODS *****************\/",711],["T_WHITESPACE","\n\n    ",711],["T_DOC_COMMENT","\/**\n     * Retrieve row or field from table by id or string and parent id\n     *\n     * @param string $table\n     * @param string $idField\n     * @param string|integer $id\n     * @param string $field\n     * @param string $parentField\n     * @param string|integer $parentId\n     * @return mixed|boolean\n     *\/",713],["T_WHITESPACE","\n    ",723],["T_PUBLIC","public",724],["T_WHITESPACE"," ",724],["T_FUNCTION","function",724],["T_WHITESPACE"," ",724],["T_STRING","getTableRow",724],"(",["T_VARIABLE","$table",724],",",["T_WHITESPACE"," ",724],["T_VARIABLE","$idField",724],",",["T_WHITESPACE"," ",724],["T_VARIABLE","$id",724],",",["T_WHITESPACE"," ",724],["T_VARIABLE","$field",724],"=",["T_STRING","null",724],",",["T_WHITESPACE"," ",724],["T_VARIABLE","$parentField",724],"=",["T_STRING","null",724],",",["T_WHITESPACE"," ",724],["T_VARIABLE","$parentId",724],"=",["T_LNUMBER","0",724],")",["T_WHITESPACE","\n    ",724],"{",["T_WHITESPACE","\n        ",725],["T_IF","if",726],["T_WHITESPACE"," ",726],"(",["T_STRING","strpos",726],"(",["T_VARIABLE","$table",726],",",["T_WHITESPACE"," ",726],["T_CONSTANT_ENCAPSED_STRING","'\/'",726],")",["T_WHITESPACE"," ",726],["T_IS_NOT_IDENTICAL","!==",726],["T_WHITESPACE"," ",726],["T_STRING","false",726],")",["T_WHITESPACE"," ",726],"{",["T_WHITESPACE","\n            ",726],["T_VARIABLE","$table",727],["T_WHITESPACE"," ",727],"=",["T_WHITESPACE"," ",727],["T_VARIABLE","$this",727],["T_OBJECT_OPERATOR","->",727],["T_STRING","getTable",727],"(",["T_VARIABLE","$table",727],")",";",["T_WHITESPACE","\n        ",727],"}",["T_WHITESPACE","\n\n        ",728],["T_IF","if",730],["T_WHITESPACE"," ",730],"(",["T_EMPTY","empty",730],"(",["T_VARIABLE","$this",730],["T_OBJECT_OPERATOR","->",730],["T_STRING","_setupCache",730],"[",["T_VARIABLE","$table",730],"]","[",["T_VARIABLE","$parentId",730],"]","[",["T_VARIABLE","$id",730],"]",")",")",["T_WHITESPACE"," ",730],"{",["T_WHITESPACE","\n            ",730],["T_VARIABLE","$adapter",731],["T_WHITESPACE"," ",731],"=",["T_WHITESPACE"," ",731],["T_VARIABLE","$this",731],["T_OBJECT_OPERATOR","->",731],["T_STRING","getConnection",731],"(",")",";",["T_WHITESPACE","\n            ",731],["T_VARIABLE","$bind",732],["T_WHITESPACE","    ",732],"=",["T_WHITESPACE"," ",732],["T_ARRAY","array",732],"(",["T_CONSTANT_ENCAPSED_STRING","'id_field'",732],["T_WHITESPACE"," ",732],["T_DOUBLE_ARROW","=>",732],["T_WHITESPACE"," ",732],["T_VARIABLE","$id",732],")",";",["T_WHITESPACE","\n            ",732],["T_VARIABLE","$select",733],["T_WHITESPACE","  ",733],"=",["T_WHITESPACE"," ",733],["T_VARIABLE","$adapter",733],["T_OBJECT_OPERATOR","->",733],["T_STRING","select",733],"(",")",["T_WHITESPACE","\n                ",733],["T_OBJECT_OPERATOR","->",734],["T_STRING","from",734],"(",["T_VARIABLE","$table",734],")",["T_WHITESPACE","\n                ",734],["T_OBJECT_OPERATOR","->",735],["T_STRING","where",735],"(",["T_VARIABLE","$adapter",735],["T_OBJECT_OPERATOR","->",735],["T_STRING","quoteIdentifier",735],"(",["T_VARIABLE","$idField",735],")",["T_WHITESPACE"," ",735],".",["T_WHITESPACE"," ",735],["T_CONSTANT_ENCAPSED_STRING","'= :id_field'",735],")",";",["T_WHITESPACE","\n            ",735],["T_IF","if",736],["T_WHITESPACE"," ",736],"(","!",["T_STRING","is_null",736],"(",["T_VARIABLE","$parentField",736],")",")",["T_WHITESPACE"," ",736],"{",["T_WHITESPACE","\n                ",736],["T_VARIABLE","$select",737],["T_OBJECT_OPERATOR","->",737],["T_STRING","where",737],"(",["T_VARIABLE","$adapter",737],["T_OBJECT_OPERATOR","->",737],["T_STRING","quoteIdentifier",737],"(",["T_VARIABLE","$parentField",737],")",["T_WHITESPACE"," ",737],".",["T_WHITESPACE"," ",737],["T_CONSTANT_ENCAPSED_STRING","'= :parent_id'",737],")",";",["T_WHITESPACE","\n                ",737],["T_VARIABLE","$bind",738],"[",["T_CONSTANT_ENCAPSED_STRING","'parent_id'",738],"]",["T_WHITESPACE"," ",738],"=",["T_WHITESPACE"," ",738],["T_VARIABLE","$parentId",738],";",["T_WHITESPACE","\n            ",738],"}",["T_WHITESPACE","\n            ",739],["T_VARIABLE","$this",740],["T_OBJECT_OPERATOR","->",740],["T_STRING","_setupCache",740],"[",["T_VARIABLE","$table",740],"]","[",["T_VARIABLE","$parentId",740],"]","[",["T_VARIABLE","$id",740],"]",["T_WHITESPACE"," ",740],"=",["T_WHITESPACE"," ",740],["T_VARIABLE","$adapter",740],["T_OBJECT_OPERATOR","->",740],["T_STRING","fetchRow",740],"(",["T_VARIABLE","$select",740],",",["T_WHITESPACE"," ",740],["T_VARIABLE","$bind",740],")",";",["T_WHITESPACE","\n        ",740],"}",["T_WHITESPACE","\n\n        ",741],["T_IF","if",743],["T_WHITESPACE"," ",743],"(",["T_STRING","is_null",743],"(",["T_VARIABLE","$field",743],")",")",["T_WHITESPACE"," ",743],"{",["T_WHITESPACE","\n            ",743],["T_RETURN","return",744],["T_WHITESPACE"," ",744],["T_VARIABLE","$this",744],["T_OBJECT_OPERATOR","->",744],["T_STRING","_setupCache",744],"[",["T_VARIABLE","$table",744],"]","[",["T_VARIABLE","$parentId",744],"]","[",["T_VARIABLE","$id",744],"]",";",["T_WHITESPACE","\n        ",744],"}",["T_WHITESPACE","\n        ",745],["T_RETURN","return",746],["T_WHITESPACE"," ",746],["T_ISSET","isset",746],"(",["T_VARIABLE","$this",746],["T_OBJECT_OPERATOR","->",746],["T_STRING","_setupCache",746],"[",["T_VARIABLE","$table",746],"]","[",["T_VARIABLE","$parentId",746],"]","[",["T_VARIABLE","$id",746],"]","[",["T_VARIABLE","$field",746],"]",")",["T_WHITESPACE","\n            ",746],"?",["T_WHITESPACE"," ",747],["T_VARIABLE","$this",747],["T_OBJECT_OPERATOR","->",747],["T_STRING","_setupCache",747],"[",["T_VARIABLE","$table",747],"]","[",["T_VARIABLE","$parentId",747],"]","[",["T_VARIABLE","$id",747],"]","[",["T_VARIABLE","$field",747],"]",["T_WHITESPACE","\n            ",747],":",["T_WHITESPACE"," ",748],["T_STRING","false",748],";",["T_WHITESPACE","\n    ",748],"}",["T_WHITESPACE","\n\n\n     ",749],["T_DOC_COMMENT","\/**\n     * Delete table row\n     *\n     * @param string $table\n     * @param string $idField\n     * @param string|int $id\n     * @param null|string $parentField\n     * @param int|string $parentId\n     * @return Mage_Core_Model_Resource_Setup\n     *\/",752],["T_WHITESPACE","\n    ",761],["T_PUBLIC","public",762],["T_WHITESPACE"," ",762],["T_FUNCTION","function",762],["T_WHITESPACE"," ",762],["T_STRING","deleteTableRow",762],"(",["T_VARIABLE","$table",762],",",["T_WHITESPACE"," ",762],["T_VARIABLE","$idField",762],",",["T_WHITESPACE"," ",762],["T_VARIABLE","$id",762],",",["T_WHITESPACE"," ",762],["T_VARIABLE","$parentField",762],["T_WHITESPACE"," ",762],"=",["T_WHITESPACE"," ",762],["T_STRING","null",762],",",["T_WHITESPACE"," ",762],["T_VARIABLE","$parentId",762],["T_WHITESPACE"," ",762],"=",["T_WHITESPACE"," ",762],["T_LNUMBER","0",762],")",["T_WHITESPACE","\n    ",762],"{",["T_WHITESPACE","\n        ",763],["T_IF","if",764],["T_WHITESPACE"," ",764],"(",["T_STRING","strpos",764],"(",["T_VARIABLE","$table",764],",",["T_WHITESPACE"," ",764],["T_CONSTANT_ENCAPSED_STRING","'\/'",764],")",["T_WHITESPACE"," ",764],["T_IS_NOT_IDENTICAL","!==",764],["T_WHITESPACE"," ",764],["T_STRING","false",764],")",["T_WHITESPACE"," ",764],"{",["T_WHITESPACE","\n            ",764],["T_VARIABLE","$table",765],["T_WHITESPACE"," ",765],"=",["T_WHITESPACE"," ",765],["T_VARIABLE","$this",765],["T_OBJECT_OPERATOR","->",765],["T_STRING","getTable",765],"(",["T_VARIABLE","$table",765],")",";",["T_WHITESPACE","\n        ",765],"}",["T_WHITESPACE","\n\n        ",766],["T_VARIABLE","$adapter",768],["T_WHITESPACE"," ",768],"=",["T_WHITESPACE"," ",768],["T_VARIABLE","$this",768],["T_OBJECT_OPERATOR","->",768],["T_STRING","getConnection",768],"(",")",";",["T_WHITESPACE","\n        ",768],["T_VARIABLE","$where",769],["T_WHITESPACE"," ",769],"=",["T_WHITESPACE"," ",769],["T_ARRAY","array",769],"(",["T_VARIABLE","$adapter",769],["T_OBJECT_OPERATOR","->",769],["T_STRING","quoteIdentifier",769],"(",["T_VARIABLE","$idField",769],")",["T_WHITESPACE"," ",769],".",["T_WHITESPACE"," ",769],["T_CONSTANT_ENCAPSED_STRING","'=?'",769],["T_WHITESPACE"," ",769],["T_DOUBLE_ARROW","=>",769],["T_WHITESPACE"," ",769],["T_VARIABLE","$id",769],")",";",["T_WHITESPACE","\n        ",769],["T_IF","if",770],["T_WHITESPACE"," ",770],"(","!",["T_STRING","is_null",770],"(",["T_VARIABLE","$parentField",770],")",")",["T_WHITESPACE"," ",770],"{",["T_WHITESPACE","\n            ",770],["T_VARIABLE","$where",771],"[",["T_VARIABLE","$adapter",771],["T_OBJECT_OPERATOR","->",771],["T_STRING","quoteIdentifier",771],"(",["T_VARIABLE","$parentField",771],")",["T_WHITESPACE"," ",771],".",["T_WHITESPACE"," ",771],["T_CONSTANT_ENCAPSED_STRING","'=?'",771],"]",["T_WHITESPACE"," ",771],"=",["T_WHITESPACE"," ",771],["T_VARIABLE","$parentId",771],";",["T_WHITESPACE","\n        ",771],"}",["T_WHITESPACE","\n\n        ",772],["T_VARIABLE","$adapter",774],["T_OBJECT_OPERATOR","->",774],["T_STRING","delete",774],"(",["T_VARIABLE","$table",774],",",["T_WHITESPACE"," ",774],["T_VARIABLE","$where",774],")",";",["T_WHITESPACE","\n\n        ",774],["T_IF","if",776],["T_WHITESPACE"," ",776],"(",["T_ISSET","isset",776],"(",["T_VARIABLE","$this",776],["T_OBJECT_OPERATOR","->",776],["T_STRING","_setupCache",776],"[",["T_VARIABLE","$table",776],"]","[",["T_VARIABLE","$parentId",776],"]","[",["T_VARIABLE","$id",776],"]",")",")",["T_WHITESPACE"," ",776],"{",["T_WHITESPACE","\n            ",776],["T_UNSET","unset",777],"(",["T_VARIABLE","$this",777],["T_OBJECT_OPERATOR","->",777],["T_STRING","_setupCache",777],"[",["T_VARIABLE","$table",777],"]","[",["T_VARIABLE","$parentId",777],"]","[",["T_VARIABLE","$id",777],"]",")",";",["T_WHITESPACE","\n        ",777],"}",["T_WHITESPACE","\n\n        ",778],["T_RETURN","return",780],["T_WHITESPACE"," ",780],["T_VARIABLE","$this",780],";",["T_WHITESPACE","\n    ",780],"}",["T_WHITESPACE","\n\n    ",781],["T_DOC_COMMENT","\/**\n     * Update one or more fields of table row\n     *\n     * @param string $table\n     * @param string $idField\n     * @param string|integer $id\n     * @param string|array $field\n     * @param mixed|null $value\n     * @param string $parentField\n     * @param string|integer $parentId\n     * @return Mage_Eav_Model_Entity_Setup\n     *\/",783],["T_WHITESPACE","\n    ",794],["T_PUBLIC","public",795],["T_WHITESPACE"," ",795],["T_FUNCTION","function",795],["T_WHITESPACE"," ",795],["T_STRING","updateTableRow",795],"(",["T_VARIABLE","$table",795],",",["T_WHITESPACE"," ",795],["T_VARIABLE","$idField",795],",",["T_WHITESPACE"," ",795],["T_VARIABLE","$id",795],",",["T_WHITESPACE"," ",795],["T_VARIABLE","$field",795],",",["T_WHITESPACE"," ",795],["T_VARIABLE","$value",795],["T_WHITESPACE"," ",795],"=",["T_WHITESPACE"," ",795],["T_STRING","null",795],",",["T_WHITESPACE"," ",795],["T_VARIABLE","$parentField",795],["T_WHITESPACE"," ",795],"=",["T_WHITESPACE"," ",795],["T_STRING","null",795],",",["T_WHITESPACE"," ",795],["T_VARIABLE","$parentId",795],["T_WHITESPACE"," ",795],"=",["T_WHITESPACE"," ",795],["T_LNUMBER","0",795],")",["T_WHITESPACE","\n    ",795],"{",["T_WHITESPACE","\n        ",796],["T_IF","if",797],["T_WHITESPACE"," ",797],"(",["T_STRING","strpos",797],"(",["T_VARIABLE","$table",797],",",["T_WHITESPACE"," ",797],["T_CONSTANT_ENCAPSED_STRING","'\/'",797],")",["T_WHITESPACE"," ",797],["T_IS_NOT_IDENTICAL","!==",797],["T_WHITESPACE"," ",797],["T_STRING","false",797],")",["T_WHITESPACE"," ",797],"{",["T_WHITESPACE","\n            ",797],["T_VARIABLE","$table",798],["T_WHITESPACE"," ",798],"=",["T_WHITESPACE"," ",798],["T_VARIABLE","$this",798],["T_OBJECT_OPERATOR","->",798],["T_STRING","getTable",798],"(",["T_VARIABLE","$table",798],")",";",["T_WHITESPACE","\n        ",798],"}",["T_WHITESPACE","\n\n        ",799],["T_IF","if",801],["T_WHITESPACE"," ",801],"(",["T_STRING","is_array",801],"(",["T_VARIABLE","$field",801],")",")",["T_WHITESPACE"," ",801],"{",["T_WHITESPACE","\n            ",801],["T_VARIABLE","$data",802],["T_WHITESPACE"," ",802],"=",["T_WHITESPACE"," ",802],["T_VARIABLE","$field",802],";",["T_WHITESPACE","\n        ",802],"}",["T_WHITESPACE"," ",803],["T_ELSE","else",803],["T_WHITESPACE"," ",803],"{",["T_WHITESPACE","\n            ",803],["T_VARIABLE","$data",804],["T_WHITESPACE"," ",804],"=",["T_WHITESPACE"," ",804],["T_ARRAY","array",804],"(",["T_VARIABLE","$field",804],["T_WHITESPACE"," ",804],["T_DOUBLE_ARROW","=>",804],["T_WHITESPACE"," ",804],["T_VARIABLE","$value",804],")",";",["T_WHITESPACE","\n        ",804],"}",["T_WHITESPACE","\n\n        ",805],["T_VARIABLE","$adapter",807],["T_WHITESPACE"," ",807],"=",["T_WHITESPACE"," ",807],["T_VARIABLE","$this",807],["T_OBJECT_OPERATOR","->",807],["T_STRING","getConnection",807],"(",")",";",["T_WHITESPACE","\n        ",807],["T_VARIABLE","$where",808],["T_WHITESPACE"," ",808],"=",["T_WHITESPACE"," ",808],["T_ARRAY","array",808],"(",["T_VARIABLE","$adapter",808],["T_OBJECT_OPERATOR","->",808],["T_STRING","quoteIdentifier",808],"(",["T_VARIABLE","$idField",808],")",["T_WHITESPACE"," ",808],".",["T_WHITESPACE"," ",808],["T_CONSTANT_ENCAPSED_STRING","'=?'",808],["T_WHITESPACE"," ",808],["T_DOUBLE_ARROW","=>",808],["T_WHITESPACE"," ",808],["T_VARIABLE","$id",808],")",";",["T_WHITESPACE","\n        ",808],["T_VARIABLE","$adapter",809],["T_OBJECT_OPERATOR","->",809],["T_STRING","update",809],"(",["T_VARIABLE","$table",809],",",["T_WHITESPACE"," ",809],["T_VARIABLE","$data",809],",",["T_WHITESPACE"," ",809],["T_VARIABLE","$where",809],")",";",["T_WHITESPACE","\n\n        ",809],["T_IF","if",811],["T_WHITESPACE"," ",811],"(",["T_ISSET","isset",811],"(",["T_VARIABLE","$this",811],["T_OBJECT_OPERATOR","->",811],["T_STRING","_setupCache",811],"[",["T_VARIABLE","$table",811],"]","[",["T_VARIABLE","$parentId",811],"]","[",["T_VARIABLE","$id",811],"]",")",")",["T_WHITESPACE"," ",811],"{",["T_WHITESPACE","\n            ",811],["T_IF","if",812],["T_WHITESPACE"," ",812],"(",["T_STRING","is_array",812],"(",["T_VARIABLE","$field",812],")",")",["T_WHITESPACE"," ",812],"{",["T_WHITESPACE","\n                ",812],["T_VARIABLE","$this",813],["T_OBJECT_OPERATOR","->",813],["T_STRING","_setupCache",813],"[",["T_VARIABLE","$table",813],"]","[",["T_VARIABLE","$parentId",813],"]","[",["T_VARIABLE","$id",813],"]",["T_WHITESPACE"," ",813],"=",["T_WHITESPACE","\n                    ",813],["T_STRING","array_merge",814],"(",["T_VARIABLE","$this",814],["T_OBJECT_OPERATOR","->",814],["T_STRING","_setupCache",814],"[",["T_VARIABLE","$table",814],"]","[",["T_VARIABLE","$parentId",814],"]","[",["T_VARIABLE","$id",814],"]",",",["T_WHITESPACE"," ",814],["T_VARIABLE","$field",814],")",";",["T_WHITESPACE","\n            ",814],"}",["T_WHITESPACE"," ",815],["T_ELSE","else",815],["T_WHITESPACE"," ",815],"{",["T_WHITESPACE","\n                ",815],["T_VARIABLE","$this",816],["T_OBJECT_OPERATOR","->",816],["T_STRING","_setupCache",816],"[",["T_VARIABLE","$table",816],"]","[",["T_VARIABLE","$parentId",816],"]","[",["T_VARIABLE","$id",816],"]","[",["T_VARIABLE","$field",816],"]",["T_WHITESPACE"," ",816],"=",["T_WHITESPACE"," ",816],["T_VARIABLE","$value",816],";",["T_WHITESPACE","\n            ",816],"}",["T_WHITESPACE","\n        ",817],"}",["T_WHITESPACE","\n\n        ",818],["T_RETURN","return",820],["T_WHITESPACE"," ",820],["T_VARIABLE","$this",820],";",["T_WHITESPACE","\n    ",820],"}",["T_WHITESPACE","\n\n    ",821],["T_DOC_COMMENT","\/**\n     * Update table data\n     *\n     * @param string $table\n     * @param Zend_Db_Expr $conditionExpr\n     * @param Zend_Db_Expr $valueExpr\n     * @return Mage_Core_Model_Resource_Setup\n     *\n     * @deprecated since 1.4.0.1\n     *\/",823],["T_WHITESPACE","\n    ",832],["T_PUBLIC","public",833],["T_WHITESPACE"," ",833],["T_FUNCTION","function",833],["T_WHITESPACE"," ",833],["T_STRING","updateTable",833],"(",["T_VARIABLE","$table",833],",",["T_WHITESPACE"," ",833],["T_VARIABLE","$conditionExpr",833],",",["T_WHITESPACE"," ",833],["T_VARIABLE","$valueExpr",833],")",["T_WHITESPACE","\n    ",833],"{",["T_WHITESPACE","\n        ",834],["T_IF","if",835],["T_WHITESPACE"," ",835],"(",["T_STRING","strpos",835],"(",["T_VARIABLE","$table",835],",",["T_WHITESPACE"," ",835],["T_CONSTANT_ENCAPSED_STRING","'\/'",835],")",["T_WHITESPACE"," ",835],["T_IS_NOT_IDENTICAL","!==",835],["T_WHITESPACE"," ",835],["T_STRING","false",835],")",["T_WHITESPACE"," ",835],"{",["T_WHITESPACE","\n            ",835],["T_VARIABLE","$table",836],["T_WHITESPACE"," ",836],"=",["T_WHITESPACE"," ",836],["T_VARIABLE","$this",836],["T_OBJECT_OPERATOR","->",836],["T_STRING","getTable",836],"(",["T_VARIABLE","$table",836],")",";",["T_WHITESPACE","\n        ",836],"}",["T_WHITESPACE","\n        ",837],["T_VARIABLE","$query",838],["T_WHITESPACE"," ",838],"=",["T_WHITESPACE"," ",838],["T_STRING","sprintf",838],"(",["T_CONSTANT_ENCAPSED_STRING","'UPDATE %s SET %s WHERE %s'",838],",",["T_WHITESPACE","\n            ",838],["T_VARIABLE","$this",839],["T_OBJECT_OPERATOR","->",839],["T_STRING","getConnection",839],"(",")",["T_OBJECT_OPERATOR","->",839],["T_STRING","quoteIdentifier",839],"(",["T_VARIABLE","$table",839],")",",",["T_WHITESPACE","\n            ",839],["T_VARIABLE","$conditionExpr",840],",",["T_WHITESPACE","\n            ",840],["T_VARIABLE","$valueExpr",841],")",";",["T_WHITESPACE","\n\n        ",841],["T_VARIABLE","$this",843],["T_OBJECT_OPERATOR","->",843],["T_STRING","getConnection",843],"(",")",["T_OBJECT_OPERATOR","->",843],["T_STRING","query",843],"(",["T_VARIABLE","$query",843],")",";",["T_WHITESPACE","\n\n        ",843],["T_RETURN","return",845],["T_WHITESPACE"," ",845],["T_VARIABLE","$this",845],";",["T_WHITESPACE","\n    ",845],"}",["T_WHITESPACE","\n\n    ",846],["T_DOC_COMMENT","\/**\n     * Check is table exists\n     *\n     * @param string $table\n     * @return bool\n     *\/",848],["T_WHITESPACE","\n    ",853],["T_PUBLIC","public",854],["T_WHITESPACE"," ",854],["T_FUNCTION","function",854],["T_WHITESPACE"," ",854],["T_STRING","tableExists",854],"(",["T_VARIABLE","$table",854],")",["T_WHITESPACE","\n    ",854],"{",["T_WHITESPACE","\n        ",855],["T_IF","if",856],["T_WHITESPACE"," ",856],"(",["T_STRING","strpos",856],"(",["T_VARIABLE","$table",856],",",["T_WHITESPACE"," ",856],["T_CONSTANT_ENCAPSED_STRING","'\/'",856],")",["T_WHITESPACE"," ",856],["T_IS_NOT_IDENTICAL","!==",856],["T_WHITESPACE"," ",856],["T_STRING","false",856],")",["T_WHITESPACE"," ",856],"{",["T_WHITESPACE","\n            ",856],["T_VARIABLE","$table",857],["T_WHITESPACE"," ",857],"=",["T_WHITESPACE"," ",857],["T_VARIABLE","$this",857],["T_OBJECT_OPERATOR","->",857],["T_STRING","getTable",857],"(",["T_VARIABLE","$table",857],")",";",["T_WHITESPACE","\n        ",857],"}",["T_WHITESPACE","\n\n        ",858],["T_RETURN","return",860],["T_WHITESPACE"," ",860],["T_VARIABLE","$this",860],["T_OBJECT_OPERATOR","->",860],["T_STRING","getConnection",860],"(",")",["T_OBJECT_OPERATOR","->",860],["T_STRING","isTableExists",860],"(",["T_VARIABLE","$table",860],")",";",["T_WHITESPACE","\n\n    ",860],"}",["T_WHITESPACE","\n\n",862],["T_COMMENT","\/******************* CONFIG *****************\/",864],["T_WHITESPACE","\n\n    ",864],["T_DOC_COMMENT","\/**\n     * Undefined\n     *\n     * @param string $path\n     * @param string $label\n     * @param array $data\n     * @param string $default\n     * @return Mage_Core_Model_Resource_Setup\n     * @deprecated since 1.4.0.1\n     *\/",866],["T_WHITESPACE","\n    ",875],["T_PUBLIC","public",876],["T_WHITESPACE"," ",876],["T_FUNCTION","function",876],["T_WHITESPACE"," ",876],["T_STRING","addConfigField",876],"(",["T_VARIABLE","$path",876],",",["T_WHITESPACE"," ",876],["T_VARIABLE","$label",876],",",["T_WHITESPACE"," ",876],["T_ARRAY","array",876],["T_WHITESPACE"," ",876],["T_VARIABLE","$data",876],"=",["T_ARRAY","array",876],"(",")",",",["T_WHITESPACE"," ",876],["T_VARIABLE","$default",876],"=",["T_STRING","null",876],")",["T_WHITESPACE","\n    ",876],"{",["T_WHITESPACE","\n        ",877],["T_RETURN","return",878],["T_WHITESPACE"," ",878],["T_VARIABLE","$this",878],";",["T_WHITESPACE","\n    ",878],"}",["T_WHITESPACE","\n\n    ",879],["T_DOC_COMMENT","\/**\n     * Save configuration data\n     *\n     * @param string $path\n     * @param string $value\n     * @param int|string $scope\n     * @param int $scopeId\n     * @param int $inherit\n     * @return Mage_Core_Model_Resource_Setup\n     *\/",881],["T_WHITESPACE","\n    ",890],["T_PUBLIC","public",891],["T_WHITESPACE"," ",891],["T_FUNCTION","function",891],["T_WHITESPACE"," ",891],["T_STRING","setConfigData",891],"(",["T_VARIABLE","$path",891],",",["T_WHITESPACE"," ",891],["T_VARIABLE","$value",891],",",["T_WHITESPACE"," ",891],["T_VARIABLE","$scope",891],["T_WHITESPACE"," ",891],"=",["T_WHITESPACE"," ",891],["T_CONSTANT_ENCAPSED_STRING","'default'",891],",",["T_WHITESPACE"," ",891],["T_VARIABLE","$scopeId",891],["T_WHITESPACE"," ",891],"=",["T_WHITESPACE"," ",891],["T_LNUMBER","0",891],",",["T_WHITESPACE"," ",891],["T_VARIABLE","$inherit",891],"=",["T_LNUMBER","0",891],")",["T_WHITESPACE","\n    ",891],"{",["T_WHITESPACE","\n        ",892],["T_VARIABLE","$table",893],["T_WHITESPACE"," ",893],"=",["T_WHITESPACE"," ",893],["T_VARIABLE","$this",893],["T_OBJECT_OPERATOR","->",893],["T_STRING","getTable",893],"(",["T_CONSTANT_ENCAPSED_STRING","'core\/config_data'",893],")",";",["T_WHITESPACE","\n        ",893],["T_COMMENT","\/\/ this is a fix for mysql 4.1\n",894],["T_WHITESPACE","        ",895],["T_VARIABLE","$this",895],["T_OBJECT_OPERATOR","->",895],["T_STRING","getConnection",895],"(",")",["T_OBJECT_OPERATOR","->",895],["T_STRING","showTableStatus",895],"(",["T_VARIABLE","$table",895],")",";",["T_WHITESPACE","\n\n        ",895],["T_VARIABLE","$data",897],["T_WHITESPACE","  ",897],"=",["T_WHITESPACE"," ",897],["T_ARRAY","array",897],"(",["T_WHITESPACE","\n            ",897],["T_CONSTANT_ENCAPSED_STRING","'scope'",898],["T_WHITESPACE","     ",898],["T_DOUBLE_ARROW","=>",898],["T_WHITESPACE"," ",898],["T_VARIABLE","$scope",898],",",["T_WHITESPACE","\n            ",898],["T_CONSTANT_ENCAPSED_STRING","'scope_id'",899],["T_WHITESPACE","  ",899],["T_DOUBLE_ARROW","=>",899],["T_WHITESPACE"," ",899],["T_VARIABLE","$scopeId",899],",",["T_WHITESPACE","\n            ",899],["T_CONSTANT_ENCAPSED_STRING","'path'",900],["T_WHITESPACE","      ",900],["T_DOUBLE_ARROW","=>",900],["T_WHITESPACE"," ",900],["T_VARIABLE","$path",900],",",["T_WHITESPACE","\n            ",900],["T_CONSTANT_ENCAPSED_STRING","'value'",901],["T_WHITESPACE","     ",901],["T_DOUBLE_ARROW","=>",901],["T_WHITESPACE"," ",901],["T_VARIABLE","$value",901],["T_WHITESPACE","\n        ",901],")",";",["T_WHITESPACE","\n        ",902],["T_VARIABLE","$this",903],["T_OBJECT_OPERATOR","->",903],["T_STRING","getConnection",903],"(",")",["T_OBJECT_OPERATOR","->",903],["T_STRING","insertOnDuplicate",903],"(",["T_VARIABLE","$table",903],",",["T_WHITESPACE"," ",903],["T_VARIABLE","$data",903],",",["T_WHITESPACE"," ",903],["T_ARRAY","array",903],"(",["T_CONSTANT_ENCAPSED_STRING","'value'",903],")",")",";",["T_WHITESPACE","\n        ",903],["T_RETURN","return",904],["T_WHITESPACE"," ",904],["T_VARIABLE","$this",904],";",["T_WHITESPACE","\n    ",904],"}",["T_WHITESPACE","\n\n    ",905],["T_DOC_COMMENT","\/**\n     * Delete config field values\n     *\n     * @param string $path\n     * @param string $scope (default|stores|websites|config)\n     * @return Mage_Core_Model_Resource_Setup\n     *\/",907],["T_WHITESPACE","\n    ",913],["T_PUBLIC","public",914],["T_WHITESPACE"," ",914],["T_FUNCTION","function",914],["T_WHITESPACE"," ",914],["T_STRING","deleteConfigData",914],"(",["T_VARIABLE","$path",914],",",["T_WHITESPACE"," ",914],["T_VARIABLE","$scope",914],["T_WHITESPACE"," ",914],"=",["T_WHITESPACE"," ",914],["T_STRING","null",914],")",["T_WHITESPACE","\n    ",914],"{",["T_WHITESPACE","\n        ",915],["T_VARIABLE","$where",916],["T_WHITESPACE"," ",916],"=",["T_WHITESPACE"," ",916],["T_ARRAY","array",916],"(",["T_CONSTANT_ENCAPSED_STRING","'path = ?'",916],["T_WHITESPACE"," ",916],["T_DOUBLE_ARROW","=>",916],["T_WHITESPACE"," ",916],["T_VARIABLE","$path",916],")",";",["T_WHITESPACE","\n        ",916],["T_IF","if",917],["T_WHITESPACE"," ",917],"(","!",["T_STRING","is_null",917],"(",["T_VARIABLE","$scope",917],")",")",["T_WHITESPACE"," ",917],"{",["T_WHITESPACE","\n            ",917],["T_VARIABLE","$where",918],"[",["T_CONSTANT_ENCAPSED_STRING","'scope = ?'",918],"]",["T_WHITESPACE"," ",918],"=",["T_WHITESPACE"," ",918],["T_VARIABLE","$scope",918],";",["T_WHITESPACE","\n        ",918],"}",["T_WHITESPACE","\n        ",919],["T_VARIABLE","$this",920],["T_OBJECT_OPERATOR","->",920],["T_STRING","getConnection",920],"(",")",["T_OBJECT_OPERATOR","->",920],["T_STRING","delete",920],"(",["T_VARIABLE","$this",920],["T_OBJECT_OPERATOR","->",920],["T_STRING","getTable",920],"(",["T_CONSTANT_ENCAPSED_STRING","'core\/config_data'",920],")",",",["T_WHITESPACE"," ",920],["T_VARIABLE","$where",920],")",";",["T_WHITESPACE","\n        ",920],["T_RETURN","return",921],["T_WHITESPACE"," ",921],["T_VARIABLE","$this",921],";",["T_WHITESPACE","\n    ",921],"}",["T_WHITESPACE","\n\n    ",922],["T_DOC_COMMENT","\/**\n     * Run plain SQL query(ies)\n     *\n     * @param string $sql\n     * @return Mage_Core_Model_Resource_Setup\n     *\/",924],["T_WHITESPACE","\n    ",929],["T_PUBLIC","public",930],["T_WHITESPACE"," ",930],["T_FUNCTION","function",930],["T_WHITESPACE"," ",930],["T_STRING","run",930],"(",["T_VARIABLE","$sql",930],")",["T_WHITESPACE","\n    ",930],"{",["T_WHITESPACE","\n        ",931],["T_VARIABLE","$this",932],["T_OBJECT_OPERATOR","->",932],["T_STRING","getConnection",932],"(",")",["T_OBJECT_OPERATOR","->",932],["T_STRING","multiQuery",932],"(",["T_VARIABLE","$sql",932],")",";",["T_WHITESPACE","\n        ",932],["T_RETURN","return",933],["T_WHITESPACE"," ",933],["T_VARIABLE","$this",933],";",["T_WHITESPACE","\n    ",933],"}",["T_WHITESPACE","\n\n    ",934],["T_DOC_COMMENT","\/**\n     * Prepare database before install\/upgrade\n     *\n     * @return Mage_Core_Model_Resource_Setup\n     *\/",936],["T_WHITESPACE","\n    ",940],["T_PUBLIC","public",941],["T_WHITESPACE"," ",941],["T_FUNCTION","function",941],["T_WHITESPACE"," ",941],["T_STRING","startSetup",941],"(",")",["T_WHITESPACE","\n    ",941],"{",["T_WHITESPACE","\n        ",942],["T_VARIABLE","$this",943],["T_OBJECT_OPERATOR","->",943],["T_STRING","getConnection",943],"(",")",["T_OBJECT_OPERATOR","->",943],["T_STRING","startSetup",943],"(",")",";",["T_WHITESPACE","\n        ",943],["T_RETURN","return",944],["T_WHITESPACE"," ",944],["T_VARIABLE","$this",944],";",["T_WHITESPACE","\n    ",944],"}",["T_WHITESPACE","\n\n    ",945],["T_DOC_COMMENT","\/**\n     * Prepare database after install\/upgrade\n     *\n     * @return Mage_Core_Model_Resource_Setup\n     *\/",947],["T_WHITESPACE","\n    ",951],["T_PUBLIC","public",952],["T_WHITESPACE"," ",952],["T_FUNCTION","function",952],["T_WHITESPACE"," ",952],["T_STRING","endSetup",952],"(",")",["T_WHITESPACE","\n    ",952],"{",["T_WHITESPACE","\n        ",953],["T_VARIABLE","$this",954],["T_OBJECT_OPERATOR","->",954],["T_STRING","getConnection",954],"(",")",["T_OBJECT_OPERATOR","->",954],["T_STRING","endSetup",954],"(",")",";",["T_WHITESPACE","\n        ",954],["T_RETURN","return",955],["T_WHITESPACE"," ",955],["T_VARIABLE","$this",955],";",["T_WHITESPACE","\n    ",955],"}",["T_WHITESPACE","\n\n    ",956],["T_DOC_COMMENT","\/**\n     * Retrieve 32bit UNIQUE HASH for a Table index\n     *\n     * @param string $tableName\n     * @param array|string $fields\n     * @param string $indexType\n     * @return string\n     *\/",958],["T_WHITESPACE","\n    ",965],["T_PUBLIC","public",966],["T_WHITESPACE"," ",966],["T_FUNCTION","function",966],["T_WHITESPACE"," ",966],["T_STRING","getIdxName",966],"(",["T_VARIABLE","$tableName",966],",",["T_WHITESPACE"," ",966],["T_VARIABLE","$fields",966],",",["T_WHITESPACE"," ",966],["T_VARIABLE","$indexType",966],["T_WHITESPACE"," ",966],"=",["T_WHITESPACE"," ",966],["T_CONSTANT_ENCAPSED_STRING","''",966],")",["T_WHITESPACE","\n    ",966],"{",["T_WHITESPACE","\n        ",967],["T_RETURN","return",968],["T_WHITESPACE"," ",968],["T_STRING","Mage",968],["T_DOUBLE_COLON","::",968],["T_STRING","getSingleton",968],"(",["T_CONSTANT_ENCAPSED_STRING","'core\/resource'",968],")",["T_OBJECT_OPERATOR","->",968],["T_STRING","getIdxName",968],"(",["T_VARIABLE","$tableName",968],",",["T_WHITESPACE"," ",968],["T_VARIABLE","$fields",968],",",["T_WHITESPACE"," ",968],["T_VARIABLE","$indexType",968],")",";",["T_WHITESPACE","\n    ",968],"}",["T_WHITESPACE","\n\n    ",969],["T_DOC_COMMENT","\/**\n     * Retrieve 32bit UNIQUE HASH for a Table foreign key\n     *\n     * @param string $priTableName  the target table name\n     * @param string $priColumnName the target table column name\n     * @param string $refTableName  the reference table name\n     * @param string $refColumnName the reference table column name\n     * @return string\n     *\/",971],["T_WHITESPACE","\n    ",979],["T_PUBLIC","public",980],["T_WHITESPACE"," ",980],["T_FUNCTION","function",980],["T_WHITESPACE"," ",980],["T_STRING","getFkName",980],"(",["T_VARIABLE","$priTableName",980],",",["T_WHITESPACE"," ",980],["T_VARIABLE","$priColumnName",980],",",["T_WHITESPACE"," ",980],["T_VARIABLE","$refTableName",980],",",["T_WHITESPACE"," ",980],["T_VARIABLE","$refColumnName",980],")",["T_WHITESPACE","\n    ",980],"{",["T_WHITESPACE","\n        ",981],["T_RETURN","return",982],["T_WHITESPACE"," ",982],["T_STRING","Mage",982],["T_DOUBLE_COLON","::",982],["T_STRING","getSingleton",982],"(",["T_CONSTANT_ENCAPSED_STRING","'core\/resource'",982],")",["T_WHITESPACE","\n            ",982],["T_OBJECT_OPERATOR","->",983],["T_STRING","getFkName",983],"(",["T_VARIABLE","$priTableName",983],",",["T_WHITESPACE"," ",983],["T_VARIABLE","$priColumnName",983],",",["T_WHITESPACE"," ",983],["T_VARIABLE","$refTableName",983],",",["T_WHITESPACE"," ",983],["T_VARIABLE","$refColumnName",983],")",";",["T_WHITESPACE","\n    ",983],"}",["T_WHITESPACE","\n\n    ",984],["T_DOC_COMMENT","\/**\n     * Check call afterApplyAllUpdates method for setup class\n     *\n     * @return boolean\n     *\/",986],["T_WHITESPACE","\n    ",990],["T_PUBLIC","public",991],["T_WHITESPACE"," ",991],["T_FUNCTION","function",991],["T_WHITESPACE"," ",991],["T_STRING","getCallAfterApplyAllUpdates",991],"(",")",["T_WHITESPACE","\n    ",991],"{",["T_WHITESPACE","\n        ",992],["T_RETURN","return",993],["T_WHITESPACE"," ",993],["T_VARIABLE","$this",993],["T_OBJECT_OPERATOR","->",993],["T_STRING","_callAfterApplyAllUpdates",993],";",["T_WHITESPACE","\n    ",993],"}",["T_WHITESPACE","\n\n    ",994],["T_DOC_COMMENT","\/**\n     * Run each time after applying of all updates,\n     * if setup model setted  $_callAfterApplyAllUpdates flag to true\n     *\n     * @return Mage_Core_Model_Resource_Setup\n     *\/",996],["T_WHITESPACE","\n    ",1001],["T_PUBLIC","public",1002],["T_WHITESPACE"," ",1002],["T_FUNCTION","function",1002],["T_WHITESPACE"," ",1002],["T_STRING","afterApplyAllUpdates",1002],"(",")",["T_WHITESPACE","\n    ",1002],"{",["T_WHITESPACE","\n        ",1003],["T_RETURN","return",1004],["T_WHITESPACE"," ",1004],["T_VARIABLE","$this",1004],";",["T_WHITESPACE","\n    ",1004],"}",["T_WHITESPACE","\n",1005],"}",["T_WHITESPACE","\n",1006]]
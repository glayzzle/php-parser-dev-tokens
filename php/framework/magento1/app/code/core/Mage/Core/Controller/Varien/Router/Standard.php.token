[["T_OPEN_TAG","<?php\n",1],["T_DOC_COMMENT","\/**\n * Magento\n *\n * NOTICE OF LICENSE\n *\n * This source file is subject to the Open Software License (OSL 3.0)\n * that is bundled with this package in the file LICENSE.txt.\n * It is also available through the world-wide-web at this URL:\n * http:\/\/opensource.org\/licenses\/osl-3.0.php\n * If you did not receive a copy of the license and are unable to\n * obtain it through the world-wide-web, please send an email\n * to license@magento.com so we can send you a copy immediately.\n *\n * DISCLAIMER\n *\n * Do not edit or add to this file if you wish to upgrade Magento to newer\n * versions in the future. If you wish to customize Magento for your\n * needs please refer to http:\/\/www.magento.com for more information.\n *\n * @category    Mage\n * @package     Mage_Core\n * @copyright  Copyright (c) 2006-2016 X.commerce, Inc. and affiliates (http:\/\/www.magento.com)\n * @license    http:\/\/opensource.org\/licenses\/osl-3.0.php  Open Software License (OSL 3.0)\n *\/",2],["T_WHITESPACE","\n\n",25],["T_CLASS","class",27],["T_WHITESPACE"," ",27],["T_STRING","Mage_Core_Controller_Varien_Router_Standard",27],["T_WHITESPACE"," ",27],["T_EXTENDS","extends",27],["T_WHITESPACE"," ",27],["T_STRING","Mage_Core_Controller_Varien_Router_Abstract",27],["T_WHITESPACE","\n",27],"{",["T_WHITESPACE","\n    ",28],["T_PROTECTED","protected",29],["T_WHITESPACE"," ",29],["T_VARIABLE","$_modules",29],["T_WHITESPACE"," ",29],"=",["T_WHITESPACE"," ",29],["T_ARRAY","array",29],"(",")",";",["T_WHITESPACE","\n    ",29],["T_PROTECTED","protected",30],["T_WHITESPACE"," ",30],["T_VARIABLE","$_routes",30],["T_WHITESPACE"," ",30],"=",["T_WHITESPACE"," ",30],["T_ARRAY","array",30],"(",")",";",["T_WHITESPACE","\n    ",30],["T_PROTECTED","protected",31],["T_WHITESPACE"," ",31],["T_VARIABLE","$_dispatchData",31],["T_WHITESPACE"," ",31],"=",["T_WHITESPACE"," ",31],["T_ARRAY","array",31],"(",")",";",["T_WHITESPACE","\n\n    ",31],["T_PUBLIC","public",33],["T_WHITESPACE"," ",33],["T_FUNCTION","function",33],["T_WHITESPACE"," ",33],["T_STRING","collectRoutes",33],"(",["T_VARIABLE","$configArea",33],",",["T_WHITESPACE"," ",33],["T_VARIABLE","$useRouterName",33],")",["T_WHITESPACE","\n    ",33],"{",["T_WHITESPACE","\n        ",34],["T_VARIABLE","$routers",35],["T_WHITESPACE"," ",35],"=",["T_WHITESPACE"," ",35],["T_ARRAY","array",35],"(",")",";",["T_WHITESPACE","\n        ",35],["T_VARIABLE","$routersConfigNode",36],["T_WHITESPACE"," ",36],"=",["T_WHITESPACE"," ",36],["T_STRING","Mage",36],["T_DOUBLE_COLON","::",36],["T_STRING","getConfig",36],"(",")",["T_OBJECT_OPERATOR","->",36],["T_STRING","getNode",36],"(",["T_VARIABLE","$configArea",36],".",["T_CONSTANT_ENCAPSED_STRING","'\/routers'",36],")",";",["T_WHITESPACE","\n        ",36],["T_IF","if",37],"(",["T_VARIABLE","$routersConfigNode",37],")",["T_WHITESPACE"," ",37],"{",["T_WHITESPACE","\n            ",37],["T_VARIABLE","$routers",38],["T_WHITESPACE"," ",38],"=",["T_WHITESPACE"," ",38],["T_VARIABLE","$routersConfigNode",38],["T_OBJECT_OPERATOR","->",38],["T_STRING","children",38],"(",")",";",["T_WHITESPACE","\n        ",38],"}",["T_WHITESPACE","\n        ",39],["T_FOREACH","foreach",40],["T_WHITESPACE"," ",40],"(",["T_VARIABLE","$routers",40],["T_WHITESPACE"," ",40],["T_AS","as",40],["T_WHITESPACE"," ",40],["T_VARIABLE","$routerName",40],["T_DOUBLE_ARROW","=>",40],["T_VARIABLE","$routerConfig",40],")",["T_WHITESPACE"," ",40],"{",["T_WHITESPACE","\n            ",40],["T_VARIABLE","$use",41],["T_WHITESPACE"," ",41],"=",["T_WHITESPACE"," ",41],["T_STRING_CAST","(string)",41],["T_VARIABLE","$routerConfig",41],["T_OBJECT_OPERATOR","->",41],["T_STRING","use",41],";",["T_WHITESPACE","\n            ",41],["T_IF","if",42],["T_WHITESPACE"," ",42],"(",["T_VARIABLE","$use",42],["T_WHITESPACE"," ",42],["T_IS_EQUAL","==",42],["T_WHITESPACE"," ",42],["T_VARIABLE","$useRouterName",42],")",["T_WHITESPACE"," ",42],"{",["T_WHITESPACE","\n                ",42],["T_VARIABLE","$modules",43],["T_WHITESPACE"," ",43],"=",["T_WHITESPACE"," ",43],["T_ARRAY","array",43],"(",["T_STRING_CAST","(string)",43],["T_VARIABLE","$routerConfig",43],["T_OBJECT_OPERATOR","->",43],["T_STRING","args",43],["T_OBJECT_OPERATOR","->",43],["T_STRING","module",43],")",";",["T_WHITESPACE","\n                ",43],["T_IF","if",44],["T_WHITESPACE"," ",44],"(",["T_VARIABLE","$routerConfig",44],["T_OBJECT_OPERATOR","->",44],["T_STRING","args",44],["T_OBJECT_OPERATOR","->",44],["T_STRING","modules",44],")",["T_WHITESPACE"," ",44],"{",["T_WHITESPACE","\n                    ",44],["T_FOREACH","foreach",45],["T_WHITESPACE"," ",45],"(",["T_VARIABLE","$routerConfig",45],["T_OBJECT_OPERATOR","->",45],["T_STRING","args",45],["T_OBJECT_OPERATOR","->",45],["T_STRING","modules",45],["T_OBJECT_OPERATOR","->",45],["T_STRING","children",45],"(",")",["T_WHITESPACE"," ",45],["T_AS","as",45],["T_WHITESPACE"," ",45],["T_VARIABLE","$customModule",45],")",["T_WHITESPACE"," ",45],"{",["T_WHITESPACE","\n                        ",45],["T_IF","if",46],["T_WHITESPACE"," ",46],"(",["T_STRING_CAST","(string)",46],["T_VARIABLE","$customModule",46],")",["T_WHITESPACE"," ",46],"{",["T_WHITESPACE","\n                            ",46],["T_IF","if",47],["T_WHITESPACE"," ",47],"(",["T_VARIABLE","$before",47],["T_WHITESPACE"," ",47],"=",["T_WHITESPACE"," ",47],["T_VARIABLE","$customModule",47],["T_OBJECT_OPERATOR","->",47],["T_STRING","getAttribute",47],"(",["T_CONSTANT_ENCAPSED_STRING","'before'",47],")",")",["T_WHITESPACE"," ",47],"{",["T_WHITESPACE","\n                                ",47],["T_VARIABLE","$position",48],["T_WHITESPACE"," ",48],"=",["T_WHITESPACE"," ",48],["T_STRING","array_search",48],"(",["T_VARIABLE","$before",48],",",["T_WHITESPACE"," ",48],["T_VARIABLE","$modules",48],")",";",["T_WHITESPACE","\n                                ",48],["T_IF","if",49],["T_WHITESPACE"," ",49],"(",["T_VARIABLE","$position",49],["T_WHITESPACE"," ",49],["T_IS_IDENTICAL","===",49],["T_WHITESPACE"," ",49],["T_STRING","false",49],")",["T_WHITESPACE"," ",49],"{",["T_WHITESPACE","\n                                    ",49],["T_VARIABLE","$position",50],["T_WHITESPACE"," ",50],"=",["T_WHITESPACE"," ",50],["T_LNUMBER","0",50],";",["T_WHITESPACE","\n                                ",50],"}",["T_WHITESPACE","\n                                ",51],["T_STRING","array_splice",52],"(",["T_VARIABLE","$modules",52],",",["T_WHITESPACE"," ",52],["T_VARIABLE","$position",52],",",["T_WHITESPACE"," ",52],["T_LNUMBER","0",52],",",["T_WHITESPACE"," ",52],["T_STRING_CAST","(string)",52],["T_VARIABLE","$customModule",52],")",";",["T_WHITESPACE","\n                            ",52],"}",["T_WHITESPACE"," ",53],["T_ELSEIF","elseif",53],["T_WHITESPACE"," ",53],"(",["T_VARIABLE","$after",53],["T_WHITESPACE"," ",53],"=",["T_WHITESPACE"," ",53],["T_VARIABLE","$customModule",53],["T_OBJECT_OPERATOR","->",53],["T_STRING","getAttribute",53],"(",["T_CONSTANT_ENCAPSED_STRING","'after'",53],")",")",["T_WHITESPACE"," ",53],"{",["T_WHITESPACE","\n                                ",53],["T_VARIABLE","$position",54],["T_WHITESPACE"," ",54],"=",["T_WHITESPACE"," ",54],["T_STRING","array_search",54],"(",["T_VARIABLE","$after",54],",",["T_WHITESPACE"," ",54],["T_VARIABLE","$modules",54],")",";",["T_WHITESPACE","\n                                ",54],["T_IF","if",55],["T_WHITESPACE"," ",55],"(",["T_VARIABLE","$position",55],["T_WHITESPACE"," ",55],["T_IS_IDENTICAL","===",55],["T_WHITESPACE"," ",55],["T_STRING","false",55],")",["T_WHITESPACE"," ",55],"{",["T_WHITESPACE","\n                                    ",55],["T_VARIABLE","$position",56],["T_WHITESPACE"," ",56],"=",["T_WHITESPACE"," ",56],["T_STRING","count",56],"(",["T_VARIABLE","$modules",56],")",";",["T_WHITESPACE","\n                                ",56],"}",["T_WHITESPACE","\n                                ",57],["T_STRING","array_splice",58],"(",["T_VARIABLE","$modules",58],",",["T_WHITESPACE"," ",58],["T_VARIABLE","$position",58],"+",["T_LNUMBER","1",58],",",["T_WHITESPACE"," ",58],["T_LNUMBER","0",58],",",["T_WHITESPACE"," ",58],["T_STRING_CAST","(string)",58],["T_VARIABLE","$customModule",58],")",";",["T_WHITESPACE","\n                            ",58],"}",["T_WHITESPACE"," ",59],["T_ELSE","else",59],["T_WHITESPACE"," ",59],"{",["T_WHITESPACE","\n                                ",59],["T_VARIABLE","$modules",60],"[","]",["T_WHITESPACE"," ",60],"=",["T_WHITESPACE"," ",60],["T_STRING_CAST","(string)",60],["T_VARIABLE","$customModule",60],";",["T_WHITESPACE","\n                            ",60],"}",["T_WHITESPACE","\n                        ",61],"}",["T_WHITESPACE","\n                    ",62],"}",["T_WHITESPACE","\n                ",63],"}",["T_WHITESPACE","\n\n                ",64],["T_VARIABLE","$frontName",66],["T_WHITESPACE"," ",66],"=",["T_WHITESPACE"," ",66],["T_STRING_CAST","(string)",66],["T_VARIABLE","$routerConfig",66],["T_OBJECT_OPERATOR","->",66],["T_STRING","args",66],["T_OBJECT_OPERATOR","->",66],["T_STRING","frontName",66],";",["T_WHITESPACE","\n                ",66],["T_VARIABLE","$this",67],["T_OBJECT_OPERATOR","->",67],["T_STRING","addModule",67],"(",["T_VARIABLE","$frontName",67],",",["T_WHITESPACE"," ",67],["T_VARIABLE","$modules",67],",",["T_WHITESPACE"," ",67],["T_VARIABLE","$routerName",67],")",";",["T_WHITESPACE","\n            ",67],"}",["T_WHITESPACE","\n        ",68],"}",["T_WHITESPACE","\n    ",69],"}",["T_WHITESPACE","\n\n    ",70],["T_PUBLIC","public",72],["T_WHITESPACE"," ",72],["T_FUNCTION","function",72],["T_WHITESPACE"," ",72],["T_STRING","fetchDefault",72],"(",")",["T_WHITESPACE","\n    ",72],"{",["T_WHITESPACE","\n        ",73],["T_VARIABLE","$this",74],["T_OBJECT_OPERATOR","->",74],["T_STRING","getFront",74],"(",")",["T_OBJECT_OPERATOR","->",74],["T_STRING","setDefault",74],"(",["T_ARRAY","array",74],"(",["T_WHITESPACE","\n            ",74],["T_CONSTANT_ENCAPSED_STRING","'module'",75],["T_WHITESPACE"," ",75],["T_DOUBLE_ARROW","=>",75],["T_WHITESPACE"," ",75],["T_CONSTANT_ENCAPSED_STRING","'core'",75],",",["T_WHITESPACE","\n            ",75],["T_CONSTANT_ENCAPSED_STRING","'controller'",76],["T_WHITESPACE"," ",76],["T_DOUBLE_ARROW","=>",76],["T_WHITESPACE"," ",76],["T_CONSTANT_ENCAPSED_STRING","'index'",76],",",["T_WHITESPACE","\n            ",76],["T_CONSTANT_ENCAPSED_STRING","'action'",77],["T_WHITESPACE"," ",77],["T_DOUBLE_ARROW","=>",77],["T_WHITESPACE"," ",77],["T_CONSTANT_ENCAPSED_STRING","'index'",77],["T_WHITESPACE","\n        ",77],")",")",";",["T_WHITESPACE","\n    ",78],"}",["T_WHITESPACE","\n\n    ",79],["T_DOC_COMMENT","\/**\n     * checking if this admin if yes then we don't use this router\n     *\n     * @return bool\n     *\/",81],["T_WHITESPACE","\n    ",85],["T_PROTECTED","protected",86],["T_WHITESPACE"," ",86],["T_FUNCTION","function",86],["T_WHITESPACE"," ",86],["T_STRING","_beforeModuleMatch",86],"(",")",["T_WHITESPACE","\n    ",86],"{",["T_WHITESPACE","\n        ",87],["T_IF","if",88],["T_WHITESPACE"," ",88],"(",["T_STRING","Mage",88],["T_DOUBLE_COLON","::",88],["T_STRING","app",88],"(",")",["T_OBJECT_OPERATOR","->",88],["T_STRING","getStore",88],"(",")",["T_OBJECT_OPERATOR","->",88],["T_STRING","isAdmin",88],"(",")",")",["T_WHITESPACE"," ",88],"{",["T_WHITESPACE","\n            ",88],["T_RETURN","return",89],["T_WHITESPACE"," ",89],["T_STRING","false",89],";",["T_WHITESPACE","\n        ",89],"}",["T_WHITESPACE","\n        ",90],["T_RETURN","return",91],["T_WHITESPACE"," ",91],["T_STRING","true",91],";",["T_WHITESPACE","\n    ",91],"}",["T_WHITESPACE","\n\n    ",92],["T_DOC_COMMENT","\/**\n     * dummy call to pass through checking\n     *\n     * @return bool\n     *\/",94],["T_WHITESPACE","\n    ",98],["T_PROTECTED","protected",99],["T_WHITESPACE"," ",99],["T_FUNCTION","function",99],["T_WHITESPACE"," ",99],["T_STRING","_afterModuleMatch",99],"(",")",["T_WHITESPACE","\n    ",99],"{",["T_WHITESPACE","\n        ",100],["T_RETURN","return",101],["T_WHITESPACE"," ",101],["T_STRING","true",101],";",["T_WHITESPACE","\n    ",101],"}",["T_WHITESPACE","\n\n    ",102],["T_DOC_COMMENT","\/**\n     * Match the request\n     *\n     * @param Zend_Controller_Request_Http $request\n     * @return boolean\n     *\/",104],["T_WHITESPACE","\n    ",109],["T_PUBLIC","public",110],["T_WHITESPACE"," ",110],["T_FUNCTION","function",110],["T_WHITESPACE"," ",110],["T_STRING","match",110],"(",["T_STRING","Zend_Controller_Request_Http",110],["T_WHITESPACE"," ",110],["T_VARIABLE","$request",110],")",["T_WHITESPACE","\n    ",110],"{",["T_WHITESPACE","\n        ",111],["T_COMMENT","\/\/checking before even try to find out that current module\n",112],["T_WHITESPACE","        ",113],["T_COMMENT","\/\/should use this router\n",113],["T_WHITESPACE","        ",114],["T_IF","if",114],["T_WHITESPACE"," ",114],"(","!",["T_VARIABLE","$this",114],["T_OBJECT_OPERATOR","->",114],["T_STRING","_beforeModuleMatch",114],"(",")",")",["T_WHITESPACE"," ",114],"{",["T_WHITESPACE","\n            ",114],["T_RETURN","return",115],["T_WHITESPACE"," ",115],["T_STRING","false",115],";",["T_WHITESPACE","\n        ",115],"}",["T_WHITESPACE","\n\n        ",116],["T_VARIABLE","$this",118],["T_OBJECT_OPERATOR","->",118],["T_STRING","fetchDefault",118],"(",")",";",["T_WHITESPACE","\n\n        ",118],["T_VARIABLE","$front",120],["T_WHITESPACE"," ",120],"=",["T_WHITESPACE"," ",120],["T_VARIABLE","$this",120],["T_OBJECT_OPERATOR","->",120],["T_STRING","getFront",120],"(",")",";",["T_WHITESPACE","\n        ",120],["T_VARIABLE","$path",121],["T_WHITESPACE"," ",121],"=",["T_WHITESPACE"," ",121],["T_STRING","trim",121],"(",["T_VARIABLE","$request",121],["T_OBJECT_OPERATOR","->",121],["T_STRING","getPathInfo",121],"(",")",",",["T_WHITESPACE"," ",121],["T_CONSTANT_ENCAPSED_STRING","'\/'",121],")",";",["T_WHITESPACE","\n\n        ",121],["T_IF","if",123],["T_WHITESPACE"," ",123],"(",["T_VARIABLE","$path",123],")",["T_WHITESPACE"," ",123],"{",["T_WHITESPACE","\n            ",123],["T_VARIABLE","$p",124],["T_WHITESPACE"," ",124],"=",["T_WHITESPACE"," ",124],["T_STRING","explode",124],"(",["T_CONSTANT_ENCAPSED_STRING","'\/'",124],",",["T_WHITESPACE"," ",124],["T_VARIABLE","$path",124],")",";",["T_WHITESPACE","\n        ",124],"}",["T_WHITESPACE"," ",125],["T_ELSE","else",125],["T_WHITESPACE"," ",125],"{",["T_WHITESPACE","\n            ",125],["T_VARIABLE","$p",126],["T_WHITESPACE"," ",126],"=",["T_WHITESPACE"," ",126],["T_STRING","explode",126],"(",["T_CONSTANT_ENCAPSED_STRING","'\/'",126],",",["T_WHITESPACE"," ",126],["T_VARIABLE","$this",126],["T_OBJECT_OPERATOR","->",126],["T_STRING","_getDefaultPath",126],"(",")",")",";",["T_WHITESPACE","\n        ",126],"}",["T_WHITESPACE","\n\n        ",127],["T_COMMENT","\/\/ get module name\n",129],["T_WHITESPACE","        ",130],["T_IF","if",130],["T_WHITESPACE"," ",130],"(",["T_VARIABLE","$request",130],["T_OBJECT_OPERATOR","->",130],["T_STRING","getModuleName",130],"(",")",")",["T_WHITESPACE"," ",130],"{",["T_WHITESPACE","\n            ",130],["T_VARIABLE","$module",131],["T_WHITESPACE"," ",131],"=",["T_WHITESPACE"," ",131],["T_VARIABLE","$request",131],["T_OBJECT_OPERATOR","->",131],["T_STRING","getModuleName",131],"(",")",";",["T_WHITESPACE","\n        ",131],"}",["T_WHITESPACE"," ",132],["T_ELSE","else",132],["T_WHITESPACE"," ",132],"{",["T_WHITESPACE","\n            ",132],["T_IF","if",133],["T_WHITESPACE"," ",133],"(","!",["T_EMPTY","empty",133],"(",["T_VARIABLE","$p",133],"[",["T_LNUMBER","0",133],"]",")",")",["T_WHITESPACE"," ",133],"{",["T_WHITESPACE","\n                ",133],["T_VARIABLE","$module",134],["T_WHITESPACE"," ",134],"=",["T_WHITESPACE"," ",134],["T_VARIABLE","$p",134],"[",["T_LNUMBER","0",134],"]",";",["T_WHITESPACE","\n            ",134],"}",["T_WHITESPACE"," ",135],["T_ELSE","else",135],["T_WHITESPACE"," ",135],"{",["T_WHITESPACE","\n                ",135],["T_VARIABLE","$module",136],["T_WHITESPACE"," ",136],"=",["T_WHITESPACE"," ",136],["T_VARIABLE","$this",136],["T_OBJECT_OPERATOR","->",136],["T_STRING","getFront",136],"(",")",["T_OBJECT_OPERATOR","->",136],["T_STRING","getDefault",136],"(",["T_CONSTANT_ENCAPSED_STRING","'module'",136],")",";",["T_WHITESPACE","\n                ",136],["T_VARIABLE","$request",137],["T_OBJECT_OPERATOR","->",137],["T_STRING","setAlias",137],"(",["T_STRING","Mage_Core_Model_Url_Rewrite",137],["T_DOUBLE_COLON","::",137],["T_STRING","REWRITE_REQUEST_PATH_ALIAS",137],",",["T_WHITESPACE"," ",137],["T_CONSTANT_ENCAPSED_STRING","''",137],")",";",["T_WHITESPACE","\n            ",137],"}",["T_WHITESPACE","\n        ",138],"}",["T_WHITESPACE","\n        ",139],["T_IF","if",140],["T_WHITESPACE"," ",140],"(","!",["T_VARIABLE","$module",140],")",["T_WHITESPACE"," ",140],"{",["T_WHITESPACE","\n            ",140],["T_IF","if",141],["T_WHITESPACE"," ",141],"(",["T_STRING","Mage",141],["T_DOUBLE_COLON","::",141],["T_STRING","app",141],"(",")",["T_OBJECT_OPERATOR","->",141],["T_STRING","getStore",141],"(",")",["T_OBJECT_OPERATOR","->",141],["T_STRING","isAdmin",141],"(",")",")",["T_WHITESPACE"," ",141],"{",["T_WHITESPACE","\n                ",141],["T_VARIABLE","$module",142],["T_WHITESPACE"," ",142],"=",["T_WHITESPACE"," ",142],["T_CONSTANT_ENCAPSED_STRING","'admin'",142],";",["T_WHITESPACE","\n            ",142],"}",["T_WHITESPACE"," ",143],["T_ELSE","else",143],["T_WHITESPACE"," ",143],"{",["T_WHITESPACE","\n                ",143],["T_RETURN","return",144],["T_WHITESPACE"," ",144],["T_STRING","false",144],";",["T_WHITESPACE","\n            ",144],"}",["T_WHITESPACE","\n        ",145],"}",["T_WHITESPACE","\n\n        ",146],["T_DOC_COMMENT","\/**\n         * Searching router args by module name from route using it as key\n         *\/",148],["T_WHITESPACE","\n        ",150],["T_VARIABLE","$modules",151],["T_WHITESPACE"," ",151],"=",["T_WHITESPACE"," ",151],["T_VARIABLE","$this",151],["T_OBJECT_OPERATOR","->",151],["T_STRING","getModuleByFrontName",151],"(",["T_VARIABLE","$module",151],")",";",["T_WHITESPACE","\n\n        ",151],["T_IF","if",153],["T_WHITESPACE"," ",153],"(",["T_VARIABLE","$modules",153],["T_WHITESPACE"," ",153],["T_IS_IDENTICAL","===",153],["T_WHITESPACE"," ",153],["T_STRING","false",153],")",["T_WHITESPACE"," ",153],"{",["T_WHITESPACE","\n            ",153],["T_RETURN","return",154],["T_WHITESPACE"," ",154],["T_STRING","false",154],";",["T_WHITESPACE","\n        ",154],"}",["T_WHITESPACE","\n\n        ",155],["T_COMMENT","\/\/ checks after we found out that this router should be used for current module\n",157],["T_WHITESPACE","        ",158],["T_IF","if",158],["T_WHITESPACE"," ",158],"(","!",["T_VARIABLE","$this",158],["T_OBJECT_OPERATOR","->",158],["T_STRING","_afterModuleMatch",158],"(",")",")",["T_WHITESPACE"," ",158],"{",["T_WHITESPACE","\n            ",158],["T_RETURN","return",159],["T_WHITESPACE"," ",159],["T_STRING","false",159],";",["T_WHITESPACE","\n        ",159],"}",["T_WHITESPACE","\n\n        ",160],["T_DOC_COMMENT","\/**\n         * Going through modules to find appropriate controller\n         *\/",162],["T_WHITESPACE","\n        ",164],["T_VARIABLE","$found",165],["T_WHITESPACE"," ",165],"=",["T_WHITESPACE"," ",165],["T_STRING","false",165],";",["T_WHITESPACE","\n        ",165],["T_FOREACH","foreach",166],["T_WHITESPACE"," ",166],"(",["T_VARIABLE","$modules",166],["T_WHITESPACE"," ",166],["T_AS","as",166],["T_WHITESPACE"," ",166],["T_VARIABLE","$realModule",166],")",["T_WHITESPACE"," ",166],"{",["T_WHITESPACE","\n            ",166],["T_VARIABLE","$request",167],["T_OBJECT_OPERATOR","->",167],["T_STRING","setRouteName",167],"(",["T_VARIABLE","$this",167],["T_OBJECT_OPERATOR","->",167],["T_STRING","getRouteByFrontName",167],"(",["T_VARIABLE","$module",167],")",")",";",["T_WHITESPACE","\n\n            ",167],["T_COMMENT","\/\/ get controller name\n",169],["T_WHITESPACE","            ",170],["T_IF","if",170],["T_WHITESPACE"," ",170],"(",["T_VARIABLE","$request",170],["T_OBJECT_OPERATOR","->",170],["T_STRING","getControllerName",170],"(",")",")",["T_WHITESPACE"," ",170],"{",["T_WHITESPACE","\n                ",170],["T_VARIABLE","$controller",171],["T_WHITESPACE"," ",171],"=",["T_WHITESPACE"," ",171],["T_VARIABLE","$request",171],["T_OBJECT_OPERATOR","->",171],["T_STRING","getControllerName",171],"(",")",";",["T_WHITESPACE","\n            ",171],"}",["T_WHITESPACE"," ",172],["T_ELSE","else",172],["T_WHITESPACE"," ",172],"{",["T_WHITESPACE","\n                ",172],["T_IF","if",173],["T_WHITESPACE"," ",173],"(","!",["T_EMPTY","empty",173],"(",["T_VARIABLE","$p",173],"[",["T_LNUMBER","1",173],"]",")",")",["T_WHITESPACE"," ",173],"{",["T_WHITESPACE","\n                    ",173],["T_VARIABLE","$controller",174],["T_WHITESPACE"," ",174],"=",["T_WHITESPACE"," ",174],["T_VARIABLE","$p",174],"[",["T_LNUMBER","1",174],"]",";",["T_WHITESPACE","\n                ",174],"}",["T_WHITESPACE"," ",175],["T_ELSE","else",175],["T_WHITESPACE"," ",175],"{",["T_WHITESPACE","\n                    ",175],["T_VARIABLE","$controller",176],["T_WHITESPACE"," ",176],"=",["T_WHITESPACE"," ",176],["T_VARIABLE","$front",176],["T_OBJECT_OPERATOR","->",176],["T_STRING","getDefault",176],"(",["T_CONSTANT_ENCAPSED_STRING","'controller'",176],")",";",["T_WHITESPACE","\n                    ",176],["T_VARIABLE","$request",177],["T_OBJECT_OPERATOR","->",177],["T_STRING","setAlias",177],"(",["T_WHITESPACE","\n                        ",177],["T_STRING","Mage_Core_Model_Url_Rewrite",178],["T_DOUBLE_COLON","::",178],["T_STRING","REWRITE_REQUEST_PATH_ALIAS",178],",",["T_WHITESPACE","\n                        ",178],["T_STRING","ltrim",179],"(",["T_VARIABLE","$request",179],["T_OBJECT_OPERATOR","->",179],["T_STRING","getOriginalPathInfo",179],"(",")",",",["T_WHITESPACE"," ",179],["T_CONSTANT_ENCAPSED_STRING","'\/'",179],")",["T_WHITESPACE","\n                    ",179],")",";",["T_WHITESPACE","\n                ",180],"}",["T_WHITESPACE","\n            ",181],"}",["T_WHITESPACE","\n\n            ",182],["T_COMMENT","\/\/ get action name\n",184],["T_WHITESPACE","            ",185],["T_IF","if",185],["T_WHITESPACE"," ",185],"(",["T_EMPTY","empty",185],"(",["T_VARIABLE","$action",185],")",")",["T_WHITESPACE"," ",185],"{",["T_WHITESPACE","\n                ",185],["T_IF","if",186],["T_WHITESPACE"," ",186],"(",["T_VARIABLE","$request",186],["T_OBJECT_OPERATOR","->",186],["T_STRING","getActionName",186],"(",")",")",["T_WHITESPACE"," ",186],"{",["T_WHITESPACE","\n                    ",186],["T_VARIABLE","$action",187],["T_WHITESPACE"," ",187],"=",["T_WHITESPACE"," ",187],["T_VARIABLE","$request",187],["T_OBJECT_OPERATOR","->",187],["T_STRING","getActionName",187],"(",")",";",["T_WHITESPACE","\n                ",187],"}",["T_WHITESPACE"," ",188],["T_ELSE","else",188],["T_WHITESPACE"," ",188],"{",["T_WHITESPACE","\n                    ",188],["T_VARIABLE","$action",189],["T_WHITESPACE"," ",189],"=",["T_WHITESPACE"," ",189],"!",["T_EMPTY","empty",189],"(",["T_VARIABLE","$p",189],"[",["T_LNUMBER","2",189],"]",")",["T_WHITESPACE"," ",189],"?",["T_WHITESPACE"," ",189],["T_VARIABLE","$p",189],"[",["T_LNUMBER","2",189],"]",["T_WHITESPACE"," ",189],":",["T_WHITESPACE"," ",189],["T_VARIABLE","$front",189],["T_OBJECT_OPERATOR","->",189],["T_STRING","getDefault",189],"(",["T_CONSTANT_ENCAPSED_STRING","'action'",189],")",";",["T_WHITESPACE","\n                ",189],"}",["T_WHITESPACE","\n            ",190],"}",["T_WHITESPACE","\n\n            ",191],["T_COMMENT","\/\/checking if this place should be secure\n",193],["T_WHITESPACE","            ",194],["T_VARIABLE","$this",194],["T_OBJECT_OPERATOR","->",194],["T_STRING","_checkShouldBeSecure",194],"(",["T_VARIABLE","$request",194],",",["T_WHITESPACE"," ",194],["T_CONSTANT_ENCAPSED_STRING","'\/'",194],".",["T_VARIABLE","$module",194],".",["T_CONSTANT_ENCAPSED_STRING","'\/'",194],".",["T_VARIABLE","$controller",194],".",["T_CONSTANT_ENCAPSED_STRING","'\/'",194],".",["T_VARIABLE","$action",194],")",";",["T_WHITESPACE","\n\n            ",194],["T_VARIABLE","$controllerClassName",196],["T_WHITESPACE"," ",196],"=",["T_WHITESPACE"," ",196],["T_VARIABLE","$this",196],["T_OBJECT_OPERATOR","->",196],["T_STRING","_validateControllerClassName",196],"(",["T_VARIABLE","$realModule",196],",",["T_WHITESPACE"," ",196],["T_VARIABLE","$controller",196],")",";",["T_WHITESPACE","\n            ",196],["T_IF","if",197],["T_WHITESPACE"," ",197],"(","!",["T_VARIABLE","$controllerClassName",197],")",["T_WHITESPACE"," ",197],"{",["T_WHITESPACE","\n                ",197],["T_CONTINUE","continue",198],";",["T_WHITESPACE","\n            ",198],"}",["T_WHITESPACE","\n\n            ",199],["T_COMMENT","\/\/ instantiate controller class\n",201],["T_WHITESPACE","            ",202],["T_VARIABLE","$controllerInstance",202],["T_WHITESPACE"," ",202],"=",["T_WHITESPACE"," ",202],["T_STRING","Mage",202],["T_DOUBLE_COLON","::",202],["T_STRING","getControllerInstance",202],"(",["T_VARIABLE","$controllerClassName",202],",",["T_WHITESPACE"," ",202],["T_VARIABLE","$request",202],",",["T_WHITESPACE"," ",202],["T_VARIABLE","$front",202],["T_OBJECT_OPERATOR","->",202],["T_STRING","getResponse",202],"(",")",")",";",["T_WHITESPACE","\n\n            ",202],["T_IF","if",204],["T_WHITESPACE"," ",204],"(","!",["T_VARIABLE","$this",204],["T_OBJECT_OPERATOR","->",204],["T_STRING","_validateControllerInstance",204],"(",["T_VARIABLE","$controllerInstance",204],")",")",["T_WHITESPACE"," ",204],"{",["T_WHITESPACE","\n                ",204],["T_CONTINUE","continue",205],";",["T_WHITESPACE","\n            ",205],"}",["T_WHITESPACE","\n\n            ",206],["T_IF","if",208],["T_WHITESPACE"," ",208],"(","!",["T_VARIABLE","$controllerInstance",208],["T_OBJECT_OPERATOR","->",208],["T_STRING","hasAction",208],"(",["T_VARIABLE","$action",208],")",")",["T_WHITESPACE"," ",208],"{",["T_WHITESPACE","\n                ",208],["T_CONTINUE","continue",209],";",["T_WHITESPACE","\n            ",209],"}",["T_WHITESPACE","\n\n            ",210],["T_VARIABLE","$found",212],["T_WHITESPACE"," ",212],"=",["T_WHITESPACE"," ",212],["T_STRING","true",212],";",["T_WHITESPACE","\n            ",212],["T_BREAK","break",213],";",["T_WHITESPACE","\n        ",213],"}",["T_WHITESPACE","\n\n        ",214],["T_DOC_COMMENT","\/**\n         * if we did not found any suitable\n         *\/",216],["T_WHITESPACE","\n        ",218],["T_IF","if",219],["T_WHITESPACE"," ",219],"(","!",["T_VARIABLE","$found",219],")",["T_WHITESPACE"," ",219],"{",["T_WHITESPACE","\n            ",219],["T_IF","if",220],["T_WHITESPACE"," ",220],"(",["T_VARIABLE","$this",220],["T_OBJECT_OPERATOR","->",220],["T_STRING","_noRouteShouldBeApplied",220],"(",")",")",["T_WHITESPACE"," ",220],"{",["T_WHITESPACE","\n                ",220],["T_VARIABLE","$controller",221],["T_WHITESPACE"," ",221],"=",["T_WHITESPACE"," ",221],["T_CONSTANT_ENCAPSED_STRING","'index'",221],";",["T_WHITESPACE","\n                ",221],["T_VARIABLE","$action",222],["T_WHITESPACE"," ",222],"=",["T_WHITESPACE"," ",222],["T_CONSTANT_ENCAPSED_STRING","'noroute'",222],";",["T_WHITESPACE","\n\n                ",222],["T_VARIABLE","$controllerClassName",224],["T_WHITESPACE"," ",224],"=",["T_WHITESPACE"," ",224],["T_VARIABLE","$this",224],["T_OBJECT_OPERATOR","->",224],["T_STRING","_validateControllerClassName",224],"(",["T_VARIABLE","$realModule",224],",",["T_WHITESPACE"," ",224],["T_VARIABLE","$controller",224],")",";",["T_WHITESPACE","\n                ",224],["T_IF","if",225],["T_WHITESPACE"," ",225],"(","!",["T_VARIABLE","$controllerClassName",225],")",["T_WHITESPACE"," ",225],"{",["T_WHITESPACE","\n                    ",225],["T_RETURN","return",226],["T_WHITESPACE"," ",226],["T_STRING","false",226],";",["T_WHITESPACE","\n                ",226],"}",["T_WHITESPACE","\n\n                ",227],["T_COMMENT","\/\/ instantiate controller class\n",229],["T_WHITESPACE","                ",230],["T_VARIABLE","$controllerInstance",230],["T_WHITESPACE"," ",230],"=",["T_WHITESPACE"," ",230],["T_STRING","Mage",230],["T_DOUBLE_COLON","::",230],["T_STRING","getControllerInstance",230],"(",["T_VARIABLE","$controllerClassName",230],",",["T_WHITESPACE"," ",230],["T_VARIABLE","$request",230],",",["T_WHITESPACE","\n                    ",230],["T_VARIABLE","$front",231],["T_OBJECT_OPERATOR","->",231],["T_STRING","getResponse",231],"(",")",")",";",["T_WHITESPACE","\n\n                ",231],["T_IF","if",233],["T_WHITESPACE"," ",233],"(","!",["T_VARIABLE","$controllerInstance",233],["T_OBJECT_OPERATOR","->",233],["T_STRING","hasAction",233],"(",["T_VARIABLE","$action",233],")",")",["T_WHITESPACE"," ",233],"{",["T_WHITESPACE","\n                    ",233],["T_RETURN","return",234],["T_WHITESPACE"," ",234],["T_STRING","false",234],";",["T_WHITESPACE","\n                ",234],"}",["T_WHITESPACE","\n            ",235],"}",["T_WHITESPACE"," ",236],["T_ELSE","else",236],["T_WHITESPACE"," ",236],"{",["T_WHITESPACE","\n                ",236],["T_RETURN","return",237],["T_WHITESPACE"," ",237],["T_STRING","false",237],";",["T_WHITESPACE","\n            ",237],"}",["T_WHITESPACE","\n        ",238],"}",["T_WHITESPACE","\n\n        ",239],["T_COMMENT","\/\/ set values only after all the checks are done\n",241],["T_WHITESPACE","        ",242],["T_VARIABLE","$request",242],["T_OBJECT_OPERATOR","->",242],["T_STRING","setModuleName",242],"(",["T_VARIABLE","$module",242],")",";",["T_WHITESPACE","\n        ",242],["T_VARIABLE","$request",243],["T_OBJECT_OPERATOR","->",243],["T_STRING","setControllerName",243],"(",["T_VARIABLE","$controller",243],")",";",["T_WHITESPACE","\n        ",243],["T_VARIABLE","$request",244],["T_OBJECT_OPERATOR","->",244],["T_STRING","setActionName",244],"(",["T_VARIABLE","$action",244],")",";",["T_WHITESPACE","\n        ",244],["T_VARIABLE","$request",245],["T_OBJECT_OPERATOR","->",245],["T_STRING","setControllerModule",245],"(",["T_VARIABLE","$realModule",245],")",";",["T_WHITESPACE","\n\n        ",245],["T_COMMENT","\/\/ set parameters from pathinfo\n",247],["T_WHITESPACE","        ",248],["T_FOR","for",248],["T_WHITESPACE"," ",248],"(",["T_VARIABLE","$i",248],["T_WHITESPACE"," ",248],"=",["T_WHITESPACE"," ",248],["T_LNUMBER","3",248],",",["T_WHITESPACE"," ",248],["T_VARIABLE","$l",248],["T_WHITESPACE"," ",248],"=",["T_WHITESPACE"," ",248],["T_STRING","sizeof",248],"(",["T_VARIABLE","$p",248],")",";",["T_WHITESPACE"," ",248],["T_VARIABLE","$i",248],["T_WHITESPACE"," ",248],"<",["T_WHITESPACE"," ",248],["T_VARIABLE","$l",248],";",["T_WHITESPACE"," ",248],["T_VARIABLE","$i",248],["T_WHITESPACE"," ",248],["T_PLUS_EQUAL","+=",248],["T_WHITESPACE"," ",248],["T_LNUMBER","2",248],")",["T_WHITESPACE"," ",248],"{",["T_WHITESPACE","\n            ",248],["T_VARIABLE","$request",249],["T_OBJECT_OPERATOR","->",249],["T_STRING","setParam",249],"(",["T_VARIABLE","$p",249],"[",["T_VARIABLE","$i",249],"]",",",["T_WHITESPACE"," ",249],["T_ISSET","isset",249],"(",["T_VARIABLE","$p",249],"[",["T_VARIABLE","$i",249],"+",["T_LNUMBER","1",249],"]",")",["T_WHITESPACE"," ",249],"?",["T_WHITESPACE"," ",249],["T_STRING","urldecode",249],"(",["T_VARIABLE","$p",249],"[",["T_VARIABLE","$i",249],"+",["T_LNUMBER","1",249],"]",")",["T_WHITESPACE"," ",249],":",["T_WHITESPACE"," ",249],["T_CONSTANT_ENCAPSED_STRING","''",249],")",";",["T_WHITESPACE","\n        ",249],"}",["T_WHITESPACE","\n\n        ",250],["T_COMMENT","\/\/ dispatch action\n",252],["T_WHITESPACE","        ",253],["T_VARIABLE","$request",253],["T_OBJECT_OPERATOR","->",253],["T_STRING","setDispatched",253],"(",["T_STRING","true",253],")",";",["T_WHITESPACE","\n        ",253],["T_VARIABLE","$controllerInstance",254],["T_OBJECT_OPERATOR","->",254],["T_STRING","dispatch",254],"(",["T_VARIABLE","$action",254],")",";",["T_WHITESPACE","\n\n        ",254],["T_RETURN","return",256],["T_WHITESPACE"," ",256],["T_STRING","true",256],";",["T_WHITESPACE","\n    ",256],"}",["T_WHITESPACE","\n\n    ",257],["T_DOC_COMMENT","\/**\n     * Get router default request path\n     * @return string\n     *\/",259],["T_WHITESPACE","\n    ",262],["T_PROTECTED","protected",263],["T_WHITESPACE"," ",263],["T_FUNCTION","function",263],["T_WHITESPACE"," ",263],["T_STRING","_getDefaultPath",263],"(",")",["T_WHITESPACE","\n    ",263],"{",["T_WHITESPACE","\n        ",264],["T_RETURN","return",265],["T_WHITESPACE"," ",265],["T_STRING","Mage",265],["T_DOUBLE_COLON","::",265],["T_STRING","getStoreConfig",265],"(",["T_CONSTANT_ENCAPSED_STRING","'web\/default\/front'",265],")",";",["T_WHITESPACE","\n    ",265],"}",["T_WHITESPACE","\n\n    ",266],["T_DOC_COMMENT","\/**\n     * Allow to control if we need to enable no route functionality in current router\n     *\n     * @return bool\n     *\/",268],["T_WHITESPACE","\n    ",272],["T_PROTECTED","protected",273],["T_WHITESPACE"," ",273],["T_FUNCTION","function",273],["T_WHITESPACE"," ",273],["T_STRING","_noRouteShouldBeApplied",273],"(",")",["T_WHITESPACE","\n    ",273],"{",["T_WHITESPACE","\n        ",274],["T_RETURN","return",275],["T_WHITESPACE"," ",275],["T_STRING","false",275],";",["T_WHITESPACE","\n    ",275],"}",["T_WHITESPACE","\n\n    ",276],["T_DOC_COMMENT","\/**\n     * Check if current controller instance is allowed in current router.\n     *\n     * @param Mage_Core_Controller_Varien_Action $controllerInstance\n     * @return boolean\n     *\/",278],["T_WHITESPACE","\n    ",283],["T_PROTECTED","protected",284],["T_WHITESPACE"," ",284],["T_FUNCTION","function",284],["T_WHITESPACE"," ",284],["T_STRING","_validateControllerInstance",284],"(",["T_VARIABLE","$controllerInstance",284],")",["T_WHITESPACE","\n    ",284],"{",["T_WHITESPACE","\n        ",285],["T_RETURN","return",286],["T_WHITESPACE"," ",286],["T_VARIABLE","$controllerInstance",286],["T_WHITESPACE"," ",286],["T_INSTANCEOF","instanceof",286],["T_WHITESPACE"," ",286],["T_STRING","Mage_Core_Controller_Front_Action",286],";",["T_WHITESPACE","\n    ",286],"}",["T_WHITESPACE","\n\n    ",287],["T_DOC_COMMENT","\/**\n     * Generating and validating class file name,\n     * class and if evrything ok do include if needed and return of class name\n     *\n     * @return mixed\n     *\/",289],["T_WHITESPACE","\n    ",294],["T_PROTECTED","protected",295],["T_WHITESPACE"," ",295],["T_FUNCTION","function",295],["T_WHITESPACE"," ",295],["T_STRING","_validateControllerClassName",295],"(",["T_VARIABLE","$realModule",295],",",["T_WHITESPACE"," ",295],["T_VARIABLE","$controller",295],")",["T_WHITESPACE","\n    ",295],"{",["T_WHITESPACE","\n        ",296],["T_VARIABLE","$controllerFileName",297],["T_WHITESPACE"," ",297],"=",["T_WHITESPACE"," ",297],["T_VARIABLE","$this",297],["T_OBJECT_OPERATOR","->",297],["T_STRING","getControllerFileName",297],"(",["T_VARIABLE","$realModule",297],",",["T_WHITESPACE"," ",297],["T_VARIABLE","$controller",297],")",";",["T_WHITESPACE","\n        ",297],["T_IF","if",298],["T_WHITESPACE"," ",298],"(","!",["T_VARIABLE","$this",298],["T_OBJECT_OPERATOR","->",298],["T_STRING","validateControllerFileName",298],"(",["T_VARIABLE","$controllerFileName",298],")",")",["T_WHITESPACE"," ",298],"{",["T_WHITESPACE","\n            ",298],["T_RETURN","return",299],["T_WHITESPACE"," ",299],["T_STRING","false",299],";",["T_WHITESPACE","\n        ",299],"}",["T_WHITESPACE","\n\n        ",300],["T_VARIABLE","$controllerClassName",302],["T_WHITESPACE"," ",302],"=",["T_WHITESPACE"," ",302],["T_VARIABLE","$this",302],["T_OBJECT_OPERATOR","->",302],["T_STRING","getControllerClassName",302],"(",["T_VARIABLE","$realModule",302],",",["T_WHITESPACE"," ",302],["T_VARIABLE","$controller",302],")",";",["T_WHITESPACE","\n        ",302],["T_IF","if",303],["T_WHITESPACE"," ",303],"(","!",["T_VARIABLE","$controllerClassName",303],")",["T_WHITESPACE"," ",303],"{",["T_WHITESPACE","\n            ",303],["T_RETURN","return",304],["T_WHITESPACE"," ",304],["T_STRING","false",304],";",["T_WHITESPACE","\n        ",304],"}",["T_WHITESPACE","\n\n        ",305],["T_COMMENT","\/\/ include controller file if needed\n",307],["T_WHITESPACE","        ",308],["T_IF","if",308],["T_WHITESPACE"," ",308],"(","!",["T_VARIABLE","$this",308],["T_OBJECT_OPERATOR","->",308],["T_STRING","_includeControllerClass",308],"(",["T_VARIABLE","$controllerFileName",308],",",["T_WHITESPACE"," ",308],["T_VARIABLE","$controllerClassName",308],")",")",["T_WHITESPACE"," ",308],"{",["T_WHITESPACE","\n            ",308],["T_RETURN","return",309],["T_WHITESPACE"," ",309],["T_STRING","false",309],";",["T_WHITESPACE","\n        ",309],"}",["T_WHITESPACE","\n\n        ",310],["T_RETURN","return",312],["T_WHITESPACE"," ",312],["T_VARIABLE","$controllerClassName",312],";",["T_WHITESPACE","\n    ",312],"}",["T_WHITESPACE","\n\n    ",313],["T_DOC_COMMENT","\/**\n     * @deprecated\n     * @see _includeControllerClass()\n     *\/",315],["T_WHITESPACE","\n    ",318],["T_PROTECTED","protected",319],["T_WHITESPACE"," ",319],["T_FUNCTION","function",319],["T_WHITESPACE"," ",319],["T_STRING","_inludeControllerClass",319],"(",["T_VARIABLE","$controllerFileName",319],",",["T_WHITESPACE"," ",319],["T_VARIABLE","$controllerClassName",319],")",["T_WHITESPACE","\n    ",319],"{",["T_WHITESPACE","\n        ",320],["T_RETURN","return",321],["T_WHITESPACE"," ",321],["T_VARIABLE","$this",321],["T_OBJECT_OPERATOR","->",321],["T_STRING","_includeControllerClass",321],"(",["T_VARIABLE","$controllerFileName",321],",",["T_WHITESPACE"," ",321],["T_VARIABLE","$controllerClassName",321],")",";",["T_WHITESPACE","\n    ",321],"}",["T_WHITESPACE","\n\n    ",322],["T_DOC_COMMENT","\/**\n     * Include the file containing controller class if this class is not defined yet\n     *\n     * @param string $controllerFileName\n     * @param string $controllerClassName\n     * @return bool\n     *\/",324],["T_WHITESPACE","\n    ",330],["T_PROTECTED","protected",331],["T_WHITESPACE"," ",331],["T_FUNCTION","function",331],["T_WHITESPACE"," ",331],["T_STRING","_includeControllerClass",331],"(",["T_VARIABLE","$controllerFileName",331],",",["T_WHITESPACE"," ",331],["T_VARIABLE","$controllerClassName",331],")",["T_WHITESPACE","\n    ",331],"{",["T_WHITESPACE","\n        ",332],["T_IF","if",333],["T_WHITESPACE"," ",333],"(","!",["T_STRING","class_exists",333],"(",["T_VARIABLE","$controllerClassName",333],",",["T_WHITESPACE"," ",333],["T_STRING","false",333],")",")",["T_WHITESPACE"," ",333],"{",["T_WHITESPACE","\n            ",333],["T_IF","if",334],["T_WHITESPACE"," ",334],"(","!",["T_STRING","file_exists",334],"(",["T_VARIABLE","$controllerFileName",334],")",")",["T_WHITESPACE"," ",334],"{",["T_WHITESPACE","\n                ",334],["T_RETURN","return",335],["T_WHITESPACE"," ",335],["T_STRING","false",335],";",["T_WHITESPACE","\n            ",335],"}",["T_WHITESPACE","\n            ",336],["T_INCLUDE","include",337],["T_WHITESPACE"," ",337],["T_VARIABLE","$controllerFileName",337],";",["T_WHITESPACE","\n\n            ",337],["T_IF","if",339],["T_WHITESPACE"," ",339],"(","!",["T_STRING","class_exists",339],"(",["T_VARIABLE","$controllerClassName",339],",",["T_WHITESPACE"," ",339],["T_STRING","false",339],")",")",["T_WHITESPACE"," ",339],"{",["T_WHITESPACE","\n                ",339],["T_THROW","throw",340],["T_WHITESPACE"," ",340],["T_STRING","Mage",340],["T_DOUBLE_COLON","::",340],["T_STRING","exception",340],"(",["T_CONSTANT_ENCAPSED_STRING","'Mage_Core'",340],",",["T_WHITESPACE"," ",340],["T_STRING","Mage",340],["T_DOUBLE_COLON","::",340],["T_STRING","helper",340],"(",["T_CONSTANT_ENCAPSED_STRING","'core'",340],")",["T_OBJECT_OPERATOR","->",340],["T_STRING","__",340],"(",["T_CONSTANT_ENCAPSED_STRING","'Controller file was loaded but class does not exist'",340],")",")",";",["T_WHITESPACE","\n            ",340],"}",["T_WHITESPACE","\n        ",341],"}",["T_WHITESPACE","\n        ",342],["T_RETURN","return",343],["T_WHITESPACE"," ",343],["T_STRING","true",343],";",["T_WHITESPACE","\n    ",343],"}",["T_WHITESPACE","\n\n    ",344],["T_PUBLIC","public",346],["T_WHITESPACE"," ",346],["T_FUNCTION","function",346],["T_WHITESPACE"," ",346],["T_STRING","addModule",346],"(",["T_VARIABLE","$frontName",346],",",["T_WHITESPACE"," ",346],["T_VARIABLE","$moduleName",346],",",["T_WHITESPACE"," ",346],["T_VARIABLE","$routeName",346],")",["T_WHITESPACE","\n    ",346],"{",["T_WHITESPACE","\n        ",347],["T_VARIABLE","$this",348],["T_OBJECT_OPERATOR","->",348],["T_STRING","_modules",348],"[",["T_VARIABLE","$frontName",348],"]",["T_WHITESPACE"," ",348],"=",["T_WHITESPACE"," ",348],["T_VARIABLE","$moduleName",348],";",["T_WHITESPACE","\n        ",348],["T_VARIABLE","$this",349],["T_OBJECT_OPERATOR","->",349],["T_STRING","_routes",349],"[",["T_VARIABLE","$routeName",349],"]",["T_WHITESPACE"," ",349],"=",["T_WHITESPACE"," ",349],["T_VARIABLE","$frontName",349],";",["T_WHITESPACE","\n        ",349],["T_RETURN","return",350],["T_WHITESPACE"," ",350],["T_VARIABLE","$this",350],";",["T_WHITESPACE","\n    ",350],"}",["T_WHITESPACE","\n\n    ",351],["T_PUBLIC","public",353],["T_WHITESPACE"," ",353],["T_FUNCTION","function",353],["T_WHITESPACE"," ",353],["T_STRING","getModuleByFrontName",353],"(",["T_VARIABLE","$frontName",353],")",["T_WHITESPACE","\n    ",353],"{",["T_WHITESPACE","\n        ",354],["T_IF","if",355],["T_WHITESPACE"," ",355],"(",["T_ISSET","isset",355],"(",["T_VARIABLE","$this",355],["T_OBJECT_OPERATOR","->",355],["T_STRING","_modules",355],"[",["T_VARIABLE","$frontName",355],"]",")",")",["T_WHITESPACE"," ",355],"{",["T_WHITESPACE","\n            ",355],["T_RETURN","return",356],["T_WHITESPACE"," ",356],["T_VARIABLE","$this",356],["T_OBJECT_OPERATOR","->",356],["T_STRING","_modules",356],"[",["T_VARIABLE","$frontName",356],"]",";",["T_WHITESPACE","\n        ",356],"}",["T_WHITESPACE","\n        ",357],["T_RETURN","return",358],["T_WHITESPACE"," ",358],["T_STRING","false",358],";",["T_WHITESPACE","\n    ",358],"}",["T_WHITESPACE","\n\n    ",359],["T_PUBLIC","public",361],["T_WHITESPACE"," ",361],["T_FUNCTION","function",361],["T_WHITESPACE"," ",361],["T_STRING","getModuleByName",361],"(",["T_VARIABLE","$moduleName",361],",",["T_WHITESPACE"," ",361],["T_VARIABLE","$modules",361],")",["T_WHITESPACE","\n    ",361],"{",["T_WHITESPACE","\n        ",362],["T_FOREACH","foreach",363],["T_WHITESPACE"," ",363],"(",["T_VARIABLE","$modules",363],["T_WHITESPACE"," ",363],["T_AS","as",363],["T_WHITESPACE"," ",363],["T_VARIABLE","$module",363],")",["T_WHITESPACE"," ",363],"{",["T_WHITESPACE","\n            ",363],["T_IF","if",364],["T_WHITESPACE"," ",364],"(",["T_VARIABLE","$moduleName",364],["T_WHITESPACE"," ",364],["T_IS_IDENTICAL","===",364],["T_WHITESPACE"," ",364],["T_VARIABLE","$module",364],["T_WHITESPACE"," ",364],["T_BOOLEAN_OR","||",364],["T_WHITESPACE"," ",364],"(",["T_STRING","is_array",364],"(",["T_VARIABLE","$module",364],")",["T_WHITESPACE","\n                    ",364],["T_BOOLEAN_AND","&&",365],["T_WHITESPACE"," ",365],["T_VARIABLE","$this",365],["T_OBJECT_OPERATOR","->",365],["T_STRING","getModuleByName",365],"(",["T_VARIABLE","$moduleName",365],",",["T_WHITESPACE"," ",365],["T_VARIABLE","$module",365],")",")",")",["T_WHITESPACE"," ",365],"{",["T_WHITESPACE","\n                ",365],["T_RETURN","return",366],["T_WHITESPACE"," ",366],["T_STRING","true",366],";",["T_WHITESPACE","\n            ",366],"}",["T_WHITESPACE","\n        ",367],"}",["T_WHITESPACE","\n        ",368],["T_RETURN","return",369],["T_WHITESPACE"," ",369],["T_STRING","false",369],";",["T_WHITESPACE","\n    ",369],"}",["T_WHITESPACE","\n\n    ",370],["T_PUBLIC","public",372],["T_WHITESPACE"," ",372],["T_FUNCTION","function",372],["T_WHITESPACE"," ",372],["T_STRING","getFrontNameByRoute",372],"(",["T_VARIABLE","$routeName",372],")",["T_WHITESPACE","\n    ",372],"{",["T_WHITESPACE","\n        ",373],["T_IF","if",374],["T_WHITESPACE"," ",374],"(",["T_ISSET","isset",374],"(",["T_VARIABLE","$this",374],["T_OBJECT_OPERATOR","->",374],["T_STRING","_routes",374],"[",["T_VARIABLE","$routeName",374],"]",")",")",["T_WHITESPACE"," ",374],"{",["T_WHITESPACE","\n            ",374],["T_RETURN","return",375],["T_WHITESPACE"," ",375],["T_VARIABLE","$this",375],["T_OBJECT_OPERATOR","->",375],["T_STRING","_routes",375],"[",["T_VARIABLE","$routeName",375],"]",";",["T_WHITESPACE","\n        ",375],"}",["T_WHITESPACE","\n        ",376],["T_RETURN","return",377],["T_WHITESPACE"," ",377],["T_STRING","false",377],";",["T_WHITESPACE","\n    ",377],"}",["T_WHITESPACE","\n\n    ",378],["T_PUBLIC","public",380],["T_WHITESPACE"," ",380],["T_FUNCTION","function",380],["T_WHITESPACE"," ",380],["T_STRING","getRouteByFrontName",380],"(",["T_VARIABLE","$frontName",380],")",["T_WHITESPACE","\n    ",380],"{",["T_WHITESPACE","\n        ",381],["T_RETURN","return",382],["T_WHITESPACE"," ",382],["T_STRING","array_search",382],"(",["T_VARIABLE","$frontName",382],",",["T_WHITESPACE"," ",382],["T_VARIABLE","$this",382],["T_OBJECT_OPERATOR","->",382],["T_STRING","_routes",382],")",";",["T_WHITESPACE","\n    ",382],"}",["T_WHITESPACE","\n\n    ",383],["T_PUBLIC","public",385],["T_WHITESPACE"," ",385],["T_FUNCTION","function",385],["T_WHITESPACE"," ",385],["T_STRING","getControllerFileName",385],"(",["T_VARIABLE","$realModule",385],",",["T_WHITESPACE"," ",385],["T_VARIABLE","$controller",385],")",["T_WHITESPACE","\n    ",385],"{",["T_WHITESPACE","\n        ",386],["T_VARIABLE","$parts",387],["T_WHITESPACE"," ",387],"=",["T_WHITESPACE"," ",387],["T_STRING","explode",387],"(",["T_CONSTANT_ENCAPSED_STRING","'_'",387],",",["T_WHITESPACE"," ",387],["T_VARIABLE","$realModule",387],")",";",["T_WHITESPACE","\n        ",387],["T_VARIABLE","$realModule",388],["T_WHITESPACE"," ",388],"=",["T_WHITESPACE"," ",388],["T_STRING","implode",388],"(",["T_CONSTANT_ENCAPSED_STRING","'_'",388],",",["T_WHITESPACE"," ",388],["T_STRING","array_splice",388],"(",["T_VARIABLE","$parts",388],",",["T_WHITESPACE"," ",388],["T_LNUMBER","0",388],",",["T_WHITESPACE"," ",388],["T_LNUMBER","2",388],")",")",";",["T_WHITESPACE","\n        ",388],["T_VARIABLE","$file",389],["T_WHITESPACE"," ",389],"=",["T_WHITESPACE"," ",389],["T_STRING","Mage",389],["T_DOUBLE_COLON","::",389],["T_STRING","getModuleDir",389],"(",["T_CONSTANT_ENCAPSED_STRING","'controllers'",389],",",["T_WHITESPACE"," ",389],["T_VARIABLE","$realModule",389],")",";",["T_WHITESPACE","\n        ",389],["T_IF","if",390],["T_WHITESPACE"," ",390],"(",["T_STRING","count",390],"(",["T_VARIABLE","$parts",390],")",")",["T_WHITESPACE"," ",390],"{",["T_WHITESPACE","\n            ",390],["T_VARIABLE","$file",391],["T_WHITESPACE"," ",391],["T_CONCAT_EQUAL",".=",391],["T_WHITESPACE"," ",391],["T_STRING","DS",391],["T_WHITESPACE"," ",391],".",["T_WHITESPACE"," ",391],["T_STRING","implode",391],"(",["T_STRING","DS",391],",",["T_WHITESPACE"," ",391],["T_VARIABLE","$parts",391],")",";",["T_WHITESPACE","\n        ",391],"}",["T_WHITESPACE","\n        ",392],["T_VARIABLE","$file",393],["T_WHITESPACE"," ",393],["T_CONCAT_EQUAL",".=",393],["T_WHITESPACE"," ",393],["T_STRING","DS",393],".",["T_STRING","uc_words",393],"(",["T_VARIABLE","$controller",393],",",["T_WHITESPACE"," ",393],["T_STRING","DS",393],")",".",["T_CONSTANT_ENCAPSED_STRING","'Controller.php'",393],";",["T_WHITESPACE","\n        ",393],["T_RETURN","return",394],["T_WHITESPACE"," ",394],["T_VARIABLE","$file",394],";",["T_WHITESPACE","\n    ",394],"}",["T_WHITESPACE","\n\n    ",395],["T_PUBLIC","public",397],["T_WHITESPACE"," ",397],["T_FUNCTION","function",397],["T_WHITESPACE"," ",397],["T_STRING","validateControllerFileName",397],"(",["T_VARIABLE","$fileName",397],")",["T_WHITESPACE","\n    ",397],"{",["T_WHITESPACE","\n        ",398],["T_IF","if",399],["T_WHITESPACE"," ",399],"(",["T_VARIABLE","$fileName",399],["T_WHITESPACE"," ",399],["T_BOOLEAN_AND","&&",399],["T_WHITESPACE"," ",399],["T_STRING","is_readable",399],"(",["T_VARIABLE","$fileName",399],")",["T_WHITESPACE"," ",399],["T_BOOLEAN_AND","&&",399],["T_WHITESPACE"," ",399],["T_STRING","false",399],["T_IS_IDENTICAL","===",399],["T_STRING","strpos",399],"(",["T_VARIABLE","$fileName",399],",",["T_WHITESPACE"," ",399],["T_CONSTANT_ENCAPSED_STRING","'\/\/'",399],")",")",["T_WHITESPACE"," ",399],"{",["T_WHITESPACE","\n            ",399],["T_RETURN","return",400],["T_WHITESPACE"," ",400],["T_STRING","true",400],";",["T_WHITESPACE","\n        ",400],"}",["T_WHITESPACE","\n        ",401],["T_RETURN","return",402],["T_WHITESPACE"," ",402],["T_STRING","false",402],";",["T_WHITESPACE","\n    ",402],"}",["T_WHITESPACE","\n\n    ",403],["T_PUBLIC","public",405],["T_WHITESPACE"," ",405],["T_FUNCTION","function",405],["T_WHITESPACE"," ",405],["T_STRING","getControllerClassName",405],"(",["T_VARIABLE","$realModule",405],",",["T_WHITESPACE"," ",405],["T_VARIABLE","$controller",405],")",["T_WHITESPACE","\n    ",405],"{",["T_WHITESPACE","\n        ",406],["T_VARIABLE","$class",407],["T_WHITESPACE"," ",407],"=",["T_WHITESPACE"," ",407],["T_VARIABLE","$realModule",407],".",["T_CONSTANT_ENCAPSED_STRING","'_'",407],".",["T_STRING","uc_words",407],"(",["T_VARIABLE","$controller",407],")",".",["T_CONSTANT_ENCAPSED_STRING","'Controller'",407],";",["T_WHITESPACE","\n        ",407],["T_RETURN","return",408],["T_WHITESPACE"," ",408],["T_VARIABLE","$class",408],";",["T_WHITESPACE","\n    ",408],"}",["T_WHITESPACE","\n\n    ",409],["T_PUBLIC","public",411],["T_WHITESPACE"," ",411],["T_FUNCTION","function",411],["T_WHITESPACE"," ",411],["T_STRING","rewrite",411],"(",["T_ARRAY","array",411],["T_WHITESPACE"," ",411],["T_VARIABLE","$p",411],")",["T_WHITESPACE","\n    ",411],"{",["T_WHITESPACE","\n        ",412],["T_VARIABLE","$rewrite",413],["T_WHITESPACE"," ",413],"=",["T_WHITESPACE"," ",413],["T_STRING","Mage",413],["T_DOUBLE_COLON","::",413],["T_STRING","getConfig",413],"(",")",["T_OBJECT_OPERATOR","->",413],["T_STRING","getNode",413],"(",["T_CONSTANT_ENCAPSED_STRING","'global\/rewrite'",413],")",";",["T_WHITESPACE","\n        ",413],["T_IF","if",414],["T_WHITESPACE"," ",414],"(",["T_VARIABLE","$module",414],["T_WHITESPACE"," ",414],"=",["T_WHITESPACE"," ",414],["T_VARIABLE","$rewrite",414],["T_OBJECT_OPERATOR","->",414],"{",["T_VARIABLE","$p",414],"[",["T_LNUMBER","0",414],"]","}",")",["T_WHITESPACE"," ",414],"{",["T_WHITESPACE","\n            ",414],["T_IF","if",415],["T_WHITESPACE"," ",415],"(","!",["T_VARIABLE","$module",415],["T_OBJECT_OPERATOR","->",415],["T_STRING","children",415],"(",")",")",["T_WHITESPACE"," ",415],"{",["T_WHITESPACE","\n                ",415],["T_VARIABLE","$p",416],"[",["T_LNUMBER","0",416],"]",["T_WHITESPACE"," ",416],"=",["T_WHITESPACE"," ",416],["T_STRING","trim",416],"(",["T_STRING_CAST","(string)",416],["T_VARIABLE","$module",416],")",";",["T_WHITESPACE","\n            ",416],"}",["T_WHITESPACE","\n        ",417],"}",["T_WHITESPACE","\n        ",418],["T_IF","if",419],["T_WHITESPACE"," ",419],"(",["T_ISSET","isset",419],"(",["T_VARIABLE","$p",419],"[",["T_LNUMBER","1",419],"]",")",["T_WHITESPACE"," ",419],["T_BOOLEAN_AND","&&",419],["T_WHITESPACE"," ",419],"(",["T_VARIABLE","$controller",419],["T_WHITESPACE"," ",419],"=",["T_WHITESPACE"," ",419],["T_VARIABLE","$rewrite",419],["T_OBJECT_OPERATOR","->",419],"{",["T_VARIABLE","$p",419],"[",["T_LNUMBER","0",419],"]","}",["T_OBJECT_OPERATOR","->",419],"{",["T_VARIABLE","$p",419],"[",["T_LNUMBER","1",419],"]","}",")",")",["T_WHITESPACE"," ",419],"{",["T_WHITESPACE","\n            ",419],["T_IF","if",420],["T_WHITESPACE"," ",420],"(","!",["T_VARIABLE","$controller",420],["T_OBJECT_OPERATOR","->",420],["T_STRING","children",420],"(",")",")",["T_WHITESPACE"," ",420],"{",["T_WHITESPACE","\n                ",420],["T_VARIABLE","$p",421],"[",["T_LNUMBER","1",421],"]",["T_WHITESPACE"," ",421],"=",["T_WHITESPACE"," ",421],["T_STRING","trim",421],"(",["T_STRING_CAST","(string)",421],["T_VARIABLE","$controller",421],")",";",["T_WHITESPACE","\n            ",421],"}",["T_WHITESPACE","\n        ",422],"}",["T_WHITESPACE","\n        ",423],["T_IF","if",424],["T_WHITESPACE"," ",424],"(",["T_ISSET","isset",424],"(",["T_VARIABLE","$p",424],"[",["T_LNUMBER","2",424],"]",")",["T_WHITESPACE"," ",424],["T_BOOLEAN_AND","&&",424],["T_WHITESPACE"," ",424],"(",["T_VARIABLE","$action",424],["T_WHITESPACE"," ",424],"=",["T_WHITESPACE"," ",424],["T_VARIABLE","$rewrite",424],["T_OBJECT_OPERATOR","->",424],"{",["T_VARIABLE","$p",424],"[",["T_LNUMBER","0",424],"]","}",["T_OBJECT_OPERATOR","->",424],"{",["T_VARIABLE","$p",424],"[",["T_LNUMBER","1",424],"]","}",["T_OBJECT_OPERATOR","->",424],"{",["T_VARIABLE","$p",424],"[",["T_LNUMBER","2",424],"]","}",")",")",["T_WHITESPACE"," ",424],"{",["T_WHITESPACE","\n            ",424],["T_IF","if",425],["T_WHITESPACE"," ",425],"(","!",["T_VARIABLE","$action",425],["T_OBJECT_OPERATOR","->",425],["T_STRING","children",425],"(",")",")",["T_WHITESPACE"," ",425],"{",["T_WHITESPACE","\n                ",425],["T_VARIABLE","$p",426],"[",["T_LNUMBER","2",426],"]",["T_WHITESPACE"," ",426],"=",["T_WHITESPACE"," ",426],["T_STRING","trim",426],"(",["T_STRING_CAST","(string)",426],["T_VARIABLE","$action",426],")",";",["T_WHITESPACE","\n            ",426],"}",["T_WHITESPACE","\n        ",427],"}",["T_WHITESPACE","\n\n        ",428],["T_RETURN","return",430],["T_WHITESPACE"," ",430],["T_VARIABLE","$p",430],";",["T_WHITESPACE","\n    ",430],"}",["T_WHITESPACE","\n\n    ",431],["T_DOC_COMMENT","\/**\n     * Check that request uses https protocol if it should.\n     * Function redirects user to correct URL if needed.\n     *\n     * @param Mage_Core_Controller_Request_Http $request\n     * @param string $path\n     * @return void\n     *\/",433],["T_WHITESPACE","\n    ",440],["T_PROTECTED","protected",441],["T_WHITESPACE"," ",441],["T_FUNCTION","function",441],["T_WHITESPACE"," ",441],["T_STRING","_checkShouldBeSecure",441],"(",["T_VARIABLE","$request",441],",",["T_WHITESPACE"," ",441],["T_VARIABLE","$path",441],["T_WHITESPACE"," ",441],"=",["T_WHITESPACE"," ",441],["T_CONSTANT_ENCAPSED_STRING","''",441],")",["T_WHITESPACE","\n    ",441],"{",["T_WHITESPACE","\n        ",442],["T_IF","if",443],["T_WHITESPACE"," ",443],"(","!",["T_STRING","Mage",443],["T_DOUBLE_COLON","::",443],["T_STRING","isInstalled",443],"(",")",["T_WHITESPACE"," ",443],["T_BOOLEAN_OR","||",443],["T_WHITESPACE"," ",443],["T_VARIABLE","$request",443],["T_OBJECT_OPERATOR","->",443],["T_STRING","getPost",443],"(",")",")",["T_WHITESPACE"," ",443],"{",["T_WHITESPACE","\n            ",443],["T_RETURN","return",444],";",["T_WHITESPACE","\n        ",444],"}",["T_WHITESPACE","\n\n        ",445],["T_IF","if",447],["T_WHITESPACE"," ",447],"(",["T_VARIABLE","$this",447],["T_OBJECT_OPERATOR","->",447],["T_STRING","_shouldBeSecure",447],"(",["T_VARIABLE","$path",447],")",["T_WHITESPACE"," ",447],["T_BOOLEAN_AND","&&",447],["T_WHITESPACE"," ",447],"!",["T_VARIABLE","$request",447],["T_OBJECT_OPERATOR","->",447],["T_STRING","isSecure",447],"(",")",")",["T_WHITESPACE"," ",447],"{",["T_WHITESPACE","\n            ",447],["T_VARIABLE","$url",448],["T_WHITESPACE"," ",448],"=",["T_WHITESPACE"," ",448],["T_VARIABLE","$this",448],["T_OBJECT_OPERATOR","->",448],["T_STRING","_getCurrentSecureUrl",448],"(",["T_VARIABLE","$request",448],")",";",["T_WHITESPACE","\n            ",448],["T_IF","if",449],["T_WHITESPACE"," ",449],"(",["T_VARIABLE","$request",449],["T_OBJECT_OPERATOR","->",449],["T_STRING","getRouteName",449],"(",")",["T_WHITESPACE"," ",449],["T_IS_NOT_EQUAL","!=",449],["T_WHITESPACE"," ",449],["T_CONSTANT_ENCAPSED_STRING","'adminhtml'",449],["T_WHITESPACE"," ",449],["T_BOOLEAN_AND","&&",449],["T_WHITESPACE"," ",449],["T_STRING","Mage",449],["T_DOUBLE_COLON","::",449],["T_STRING","app",449],"(",")",["T_OBJECT_OPERATOR","->",449],["T_STRING","getUseSessionInUrl",449],"(",")",")",["T_WHITESPACE"," ",449],"{",["T_WHITESPACE","\n                ",449],["T_VARIABLE","$url",450],["T_WHITESPACE"," ",450],"=",["T_WHITESPACE"," ",450],["T_STRING","Mage",450],["T_DOUBLE_COLON","::",450],["T_STRING","getSingleton",450],"(",["T_CONSTANT_ENCAPSED_STRING","'core\/url'",450],")",["T_OBJECT_OPERATOR","->",450],["T_STRING","getRedirectUrl",450],"(",["T_VARIABLE","$url",450],")",";",["T_WHITESPACE","\n            ",450],"}",["T_WHITESPACE","\n\n            ",451],["T_STRING","Mage",453],["T_DOUBLE_COLON","::",453],["T_STRING","app",453],"(",")",["T_OBJECT_OPERATOR","->",453],["T_STRING","getFrontController",453],"(",")",["T_OBJECT_OPERATOR","->",453],["T_STRING","getResponse",453],"(",")",["T_WHITESPACE","\n                ",453],["T_OBJECT_OPERATOR","->",454],["T_STRING","setRedirect",454],"(",["T_VARIABLE","$url",454],")",["T_WHITESPACE","\n                ",454],["T_OBJECT_OPERATOR","->",455],["T_STRING","sendResponse",455],"(",")",";",["T_WHITESPACE","\n            ",455],["T_EXIT","exit",456],";",["T_WHITESPACE","\n        ",456],"}",["T_WHITESPACE","\n    ",457],"}",["T_WHITESPACE","\n\n    ",458],["T_PROTECTED","protected",460],["T_WHITESPACE"," ",460],["T_FUNCTION","function",460],["T_WHITESPACE"," ",460],["T_STRING","_getCurrentSecureUrl",460],"(",["T_VARIABLE","$request",460],")",["T_WHITESPACE","\n    ",460],"{",["T_WHITESPACE","\n        ",461],["T_IF","if",462],["T_WHITESPACE"," ",462],"(",["T_VARIABLE","$alias",462],["T_WHITESPACE"," ",462],"=",["T_WHITESPACE"," ",462],["T_VARIABLE","$request",462],["T_OBJECT_OPERATOR","->",462],["T_STRING","getAlias",462],"(",["T_STRING","Mage_Core_Model_Url_Rewrite",462],["T_DOUBLE_COLON","::",462],["T_STRING","REWRITE_REQUEST_PATH_ALIAS",462],")",")",["T_WHITESPACE"," ",462],"{",["T_WHITESPACE","\n            ",462],["T_RETURN","return",463],["T_WHITESPACE"," ",463],["T_STRING","Mage",463],["T_DOUBLE_COLON","::",463],["T_STRING","getBaseUrl",463],"(",["T_CONSTANT_ENCAPSED_STRING","'link'",463],",",["T_WHITESPACE"," ",463],["T_STRING","true",463],")",".",["T_STRING","ltrim",463],"(",["T_VARIABLE","$alias",463],",",["T_WHITESPACE"," ",463],["T_CONSTANT_ENCAPSED_STRING","'\/'",463],")",";",["T_WHITESPACE","\n        ",463],"}",["T_WHITESPACE","\n\n        ",464],["T_RETURN","return",466],["T_WHITESPACE"," ",466],["T_STRING","Mage",466],["T_DOUBLE_COLON","::",466],["T_STRING","getBaseUrl",466],"(",["T_CONSTANT_ENCAPSED_STRING","'link'",466],",",["T_WHITESPACE"," ",466],["T_STRING","true",466],")",".",["T_STRING","ltrim",466],"(",["T_VARIABLE","$request",466],["T_OBJECT_OPERATOR","->",466],["T_STRING","getPathInfo",466],"(",")",",",["T_WHITESPACE"," ",466],["T_CONSTANT_ENCAPSED_STRING","'\/'",466],")",";",["T_WHITESPACE","\n    ",466],"}",["T_WHITESPACE","\n\n    ",467],["T_DOC_COMMENT","\/**\n     * Check whether URL for corresponding path should use https protocol\n     *\n     * @param string $path\n     * @return bool\n     *\/",469],["T_WHITESPACE","\n    ",474],["T_PROTECTED","protected",475],["T_WHITESPACE"," ",475],["T_FUNCTION","function",475],["T_WHITESPACE"," ",475],["T_STRING","_shouldBeSecure",475],"(",["T_VARIABLE","$path",475],")",["T_WHITESPACE","\n    ",475],"{",["T_WHITESPACE","\n        ",476],["T_RETURN","return",477],["T_WHITESPACE"," ",477],["T_STRING","substr",477],"(",["T_STRING","Mage",477],["T_DOUBLE_COLON","::",477],["T_STRING","getStoreConfig",477],"(",["T_CONSTANT_ENCAPSED_STRING","'web\/unsecure\/base_url'",477],")",",",["T_WHITESPACE"," ",477],["T_LNUMBER","0",477],",",["T_WHITESPACE"," ",477],["T_LNUMBER","5",477],")",["T_WHITESPACE"," ",477],["T_IS_IDENTICAL","===",477],["T_WHITESPACE"," ",477],["T_CONSTANT_ENCAPSED_STRING","'https'",477],["T_WHITESPACE","\n            ",477],["T_BOOLEAN_OR","||",478],["T_WHITESPACE"," ",478],["T_STRING","Mage",478],["T_DOUBLE_COLON","::",478],["T_STRING","getStoreConfigFlag",478],"(",["T_CONSTANT_ENCAPSED_STRING","'web\/secure\/use_in_frontend'",478],")",["T_WHITESPACE","\n                ",478],["T_BOOLEAN_AND","&&",479],["T_WHITESPACE"," ",479],["T_STRING","substr",479],"(",["T_STRING","Mage",479],["T_DOUBLE_COLON","::",479],["T_STRING","getStoreConfig",479],"(",["T_CONSTANT_ENCAPSED_STRING","'web\/secure\/base_url'",479],")",",",["T_WHITESPACE"," ",479],["T_LNUMBER","0",479],",",["T_WHITESPACE"," ",479],["T_LNUMBER","5",479],")",["T_WHITESPACE"," ",479],["T_IS_EQUAL","==",479],["T_WHITESPACE"," ",479],["T_CONSTANT_ENCAPSED_STRING","'https'",479],["T_WHITESPACE","\n                ",479],["T_BOOLEAN_AND","&&",480],["T_WHITESPACE"," ",480],["T_STRING","Mage",480],["T_DOUBLE_COLON","::",480],["T_STRING","getConfig",480],"(",")",["T_OBJECT_OPERATOR","->",480],["T_STRING","shouldUrlBeSecure",480],"(",["T_VARIABLE","$path",480],")",";",["T_WHITESPACE","\n    ",480],"}",["T_WHITESPACE","\n",481],"}",["T_WHITESPACE","\n",482]]
[["T_OPEN_TAG","<?php\n",1],["T_DOC_COMMENT","\/**\n * Magento\n *\n * NOTICE OF LICENSE\n *\n * This source file is subject to the Open Software License (OSL 3.0)\n * that is bundled with this package in the file LICENSE.txt.\n * It is also available through the world-wide-web at this URL:\n * http:\/\/opensource.org\/licenses\/osl-3.0.php\n * If you did not receive a copy of the license and are unable to\n * obtain it through the world-wide-web, please send an email\n * to license@magento.com so we can send you a copy immediately.\n *\n * DISCLAIMER\n *\n * Do not edit or add to this file if you wish to upgrade Magento to newer\n * versions in the future. If you wish to customize Magento for your\n * needs please refer to http:\/\/www.magento.com for more information.\n *\n * @category    Mage\n * @package     Mage_Core\n * @copyright  Copyright (c) 2006-2016 X.commerce, Inc. and affiliates (http:\/\/www.magento.com)\n * @license    http:\/\/opensource.org\/licenses\/osl-3.0.php  Open Software License (OSL 3.0)\n *\/",2],["T_WHITESPACE","\n\n\n",25],["T_DOC_COMMENT","\/**\n * Abstract Core Resource Collection\n *\n * @category    Mage\n * @package     Mage_Core\n * @author      Magento Core Team <core@magentocommerce.com>\n *\/",28],["T_WHITESPACE","\n",34],["T_ABSTRACT","abstract",35],["T_WHITESPACE"," ",35],["T_CLASS","class",35],["T_WHITESPACE"," ",35],["T_STRING","Mage_Core_Model_Resource_Db_Collection_Abstract",35],["T_WHITESPACE"," ",35],["T_EXTENDS","extends",35],["T_WHITESPACE"," ",35],["T_STRING","Varien_Data_Collection_Db",35],["T_WHITESPACE","\n",35],"{",["T_WHITESPACE","\n    ",36],["T_CONST","const",37],["T_WHITESPACE"," ",37],["T_STRING","CACHE_TAG",37],["T_WHITESPACE"," ",37],"=",["T_WHITESPACE"," ",37],["T_CONSTANT_ENCAPSED_STRING","'COLLECTION_DATA'",37],";",["T_WHITESPACE","\n\n    ",37],["T_DOC_COMMENT","\/**\n     * Model name\n     *\n     * @var string\n     *\/",39],["T_WHITESPACE","\n    ",43],["T_PROTECTED","protected",44],["T_WHITESPACE"," ",44],["T_VARIABLE","$_model",44],";",["T_WHITESPACE","\n\n    ",44],["T_DOC_COMMENT","\/**\n     * Resource model name\n     *\n     * @var string\n     *\/",46],["T_WHITESPACE","\n    ",50],["T_PROTECTED","protected",51],["T_WHITESPACE"," ",51],["T_VARIABLE","$_resourceModel",51],";",["T_WHITESPACE","\n\n    ",51],["T_DOC_COMMENT","\/**\n     * Resource instance\n     *\n     * @var Mage_Core_Model_Resource_Db_Abstract\n     *\/",53],["T_WHITESPACE","\n    ",57],["T_PROTECTED","protected",58],["T_WHITESPACE"," ",58],["T_VARIABLE","$_resource",58],";",["T_WHITESPACE","\n\n    ",58],["T_DOC_COMMENT","\/**\n     * Fields to select in query\n     *\n     * @var array|null\n     *\/",60],["T_WHITESPACE","\n    ",64],["T_PROTECTED","protected",65],["T_WHITESPACE"," ",65],["T_VARIABLE","$_fieldsToSelect",65],["T_WHITESPACE","         ",65],"=",["T_WHITESPACE"," ",65],["T_STRING","null",65],";",["T_WHITESPACE","\n\n    ",65],["T_DOC_COMMENT","\/**\n     * Fields initial fields to select like id_field\n     *\n     * @var array|null\n     *\/",67],["T_WHITESPACE","\n    ",71],["T_PROTECTED","protected",72],["T_WHITESPACE"," ",72],["T_VARIABLE","$_initialFieldsToSelect",72],["T_WHITESPACE","  ",72],"=",["T_WHITESPACE"," ",72],["T_STRING","null",72],";",["T_WHITESPACE","\n\n    ",72],["T_DOC_COMMENT","\/**\n     * Fields to select changed flag\n     *\n     * @var booleam\n     *\/",74],["T_WHITESPACE","\n    ",78],["T_PROTECTED","protected",79],["T_WHITESPACE"," ",79],["T_VARIABLE","$_fieldsToSelectChanged",79],["T_WHITESPACE","  ",79],"=",["T_WHITESPACE"," ",79],["T_STRING","false",79],";",["T_WHITESPACE","\n\n    ",79],["T_DOC_COMMENT","\/**\n     * Store joined tables here\n     *\n     * @var array\n     *\/",81],["T_WHITESPACE","\n    ",85],["T_PROTECTED","protected",86],["T_WHITESPACE"," ",86],["T_VARIABLE","$_joinedTables",86],["T_WHITESPACE","           ",86],"=",["T_WHITESPACE"," ",86],["T_ARRAY","array",86],"(",")",";",["T_WHITESPACE","\n\n    ",86],["T_DOC_COMMENT","\/**\n     * Collection main table\n     *\n     * @var string\n     *\/",88],["T_WHITESPACE","\n    ",92],["T_PROTECTED","protected",93],["T_WHITESPACE"," ",93],["T_VARIABLE","$_mainTable",93],["T_WHITESPACE","              ",93],"=",["T_WHITESPACE"," ",93],["T_STRING","null",93],";",["T_WHITESPACE","\n\n    ",93],["T_DOC_COMMENT","\/**\n     * Reset items data changed flag\n     *\n     * @var boolean\n     *\/",95],["T_WHITESPACE","\n    ",99],["T_PROTECTED","protected",100],["T_WHITESPACE"," ",100],["T_VARIABLE","$_resetItemsDataChanged",100],["T_WHITESPACE","   ",100],"=",["T_WHITESPACE"," ",100],["T_STRING","false",100],";",["T_WHITESPACE","\n\n    ",100],["T_DOC_COMMENT","\/**\n     * Name prefix of events that are dispatched by model\n     *\n     * @var string\n     *\/",102],["T_WHITESPACE","\n    ",106],["T_PROTECTED","protected",107],["T_WHITESPACE"," ",107],["T_VARIABLE","$_eventPrefix",107],["T_WHITESPACE"," ",107],"=",["T_WHITESPACE"," ",107],["T_CONSTANT_ENCAPSED_STRING","''",107],";",["T_WHITESPACE","\n\n    ",107],["T_DOC_COMMENT","\/**\n     * Name of event parameter\n     *\n     * @var string\n     *\/",109],["T_WHITESPACE","\n    ",113],["T_PROTECTED","protected",114],["T_WHITESPACE"," ",114],["T_VARIABLE","$_eventObject",114],["T_WHITESPACE"," ",114],"=",["T_WHITESPACE"," ",114],["T_CONSTANT_ENCAPSED_STRING","''",114],";",["T_WHITESPACE","\n\n    ",114],["T_DOC_COMMENT","\/**\n     * Use analytic function flag\n     * If true - allows to prepare final select with analytic function\n     *\n     * @var bool\n     *\/",116],["T_WHITESPACE","\n    ",121],["T_PROTECTED","protected",122],["T_WHITESPACE"," ",122],["T_VARIABLE","$_useAnalyticFunction",122],["T_WHITESPACE","         ",122],"=",["T_WHITESPACE"," ",122],["T_STRING","false",122],";",["T_WHITESPACE","\n\n    ",122],["T_DOC_COMMENT","\/**\n     * Collection constructor\n     *\n     * @param Mage_Core_Model_Resource_Db_Abstract $resource\n     *\/",124],["T_WHITESPACE","\n    ",128],["T_PUBLIC","public",129],["T_WHITESPACE"," ",129],["T_FUNCTION","function",129],["T_WHITESPACE"," ",129],["T_STRING","__construct",129],"(",["T_VARIABLE","$resource",129],["T_WHITESPACE"," ",129],"=",["T_WHITESPACE"," ",129],["T_STRING","null",129],")",["T_WHITESPACE","\n    ",129],"{",["T_WHITESPACE","\n        ",130],["T_STRING","parent",131],["T_DOUBLE_COLON","::",131],["T_STRING","__construct",131],"(",")",";",["T_WHITESPACE","\n        ",131],["T_VARIABLE","$this",132],["T_OBJECT_OPERATOR","->",132],["T_STRING","_construct",132],"(",")",";",["T_WHITESPACE","\n        ",132],["T_VARIABLE","$this",133],["T_OBJECT_OPERATOR","->",133],["T_STRING","_resource",133],["T_WHITESPACE"," ",133],"=",["T_WHITESPACE"," ",133],["T_VARIABLE","$resource",133],";",["T_WHITESPACE","\n        ",133],["T_VARIABLE","$this",134],["T_OBJECT_OPERATOR","->",134],["T_STRING","setConnection",134],"(",["T_VARIABLE","$this",134],["T_OBJECT_OPERATOR","->",134],["T_STRING","getResource",134],"(",")",["T_OBJECT_OPERATOR","->",134],["T_STRING","getReadConnection",134],"(",")",")",";",["T_WHITESPACE","\n        ",134],["T_VARIABLE","$this",135],["T_OBJECT_OPERATOR","->",135],["T_STRING","_initSelect",135],"(",")",";",["T_WHITESPACE","\n    ",135],"}",["T_WHITESPACE","\n\n    ",136],["T_DOC_COMMENT","\/**\n     * Initialization here\n     *\n     *\/",138],["T_WHITESPACE","\n    ",141],["T_PROTECTED","protected",142],["T_WHITESPACE"," ",142],["T_FUNCTION","function",142],["T_WHITESPACE"," ",142],["T_STRING","_construct",142],"(",")",["T_WHITESPACE","\n    ",142],"{",["T_WHITESPACE","\n\n    ",143],"}",["T_WHITESPACE","\n\n    ",145],["T_DOC_COMMENT","\/**\n     * Retrieve main table\n     *\n     * @return string\n     *\/",147],["T_WHITESPACE","\n    ",151],["T_PUBLIC","public",152],["T_WHITESPACE"," ",152],["T_FUNCTION","function",152],["T_WHITESPACE"," ",152],["T_STRING","getMainTable",152],"(",")",["T_WHITESPACE","\n    ",152],"{",["T_WHITESPACE","\n        ",153],["T_IF","if",154],["T_WHITESPACE"," ",154],"(",["T_VARIABLE","$this",154],["T_OBJECT_OPERATOR","->",154],["T_STRING","_mainTable",154],["T_WHITESPACE"," ",154],["T_IS_IDENTICAL","===",154],["T_WHITESPACE"," ",154],["T_STRING","null",154],")",["T_WHITESPACE"," ",154],"{",["T_WHITESPACE","\n            ",154],["T_VARIABLE","$this",155],["T_OBJECT_OPERATOR","->",155],["T_STRING","setMainTable",155],"(",["T_VARIABLE","$this",155],["T_OBJECT_OPERATOR","->",155],["T_STRING","getResource",155],"(",")",["T_OBJECT_OPERATOR","->",155],["T_STRING","getMainTable",155],"(",")",")",";",["T_WHITESPACE","\n        ",155],"}",["T_WHITESPACE","\n\n        ",156],["T_RETURN","return",158],["T_WHITESPACE"," ",158],["T_VARIABLE","$this",158],["T_OBJECT_OPERATOR","->",158],["T_STRING","_mainTable",158],";",["T_WHITESPACE","\n    ",158],"}",["T_WHITESPACE","\n\n    ",159],["T_DOC_COMMENT","\/**\n     * Set main collection table\n     *\n     * @param string $table\n     * @return Mage_Core_Model_Resource_Db_Collection_Abstract\n     *\/",161],["T_WHITESPACE","\n    ",166],["T_PUBLIC","public",167],["T_WHITESPACE"," ",167],["T_FUNCTION","function",167],["T_WHITESPACE"," ",167],["T_STRING","setMainTable",167],"(",["T_VARIABLE","$table",167],")",["T_WHITESPACE","\n    ",167],"{",["T_WHITESPACE","\n        ",168],["T_IF","if",169],["T_WHITESPACE"," ",169],"(",["T_STRING","strpos",169],"(",["T_VARIABLE","$table",169],",",["T_WHITESPACE"," ",169],["T_CONSTANT_ENCAPSED_STRING","'\/'",169],")",["T_WHITESPACE"," ",169],["T_IS_NOT_IDENTICAL","!==",169],["T_WHITESPACE"," ",169],["T_STRING","false",169],")",["T_WHITESPACE"," ",169],"{",["T_WHITESPACE","\n            ",169],["T_VARIABLE","$table",170],["T_WHITESPACE"," ",170],"=",["T_WHITESPACE"," ",170],["T_VARIABLE","$this",170],["T_OBJECT_OPERATOR","->",170],["T_STRING","getTable",170],"(",["T_VARIABLE","$table",170],")",";",["T_WHITESPACE","\n        ",170],"}",["T_WHITESPACE","\n\n        ",171],["T_IF","if",173],["T_WHITESPACE"," ",173],"(",["T_VARIABLE","$this",173],["T_OBJECT_OPERATOR","->",173],["T_STRING","_mainTable",173],["T_WHITESPACE"," ",173],["T_IS_NOT_IDENTICAL","!==",173],["T_WHITESPACE"," ",173],["T_STRING","null",173],["T_WHITESPACE"," ",173],["T_BOOLEAN_AND","&&",173],["T_WHITESPACE"," ",173],["T_VARIABLE","$table",173],["T_WHITESPACE"," ",173],["T_IS_NOT_IDENTICAL","!==",173],["T_WHITESPACE"," ",173],["T_VARIABLE","$this",173],["T_OBJECT_OPERATOR","->",173],["T_STRING","_mainTable",173],["T_WHITESPACE"," ",173],["T_BOOLEAN_AND","&&",173],["T_WHITESPACE"," ",173],["T_VARIABLE","$this",173],["T_OBJECT_OPERATOR","->",173],["T_STRING","getSelect",173],"(",")",["T_WHITESPACE"," ",173],["T_IS_NOT_IDENTICAL","!==",173],["T_WHITESPACE"," ",173],["T_STRING","null",173],")",["T_WHITESPACE"," ",173],"{",["T_WHITESPACE","\n            ",173],["T_VARIABLE","$from",174],["T_WHITESPACE"," ",174],"=",["T_WHITESPACE"," ",174],["T_VARIABLE","$this",174],["T_OBJECT_OPERATOR","->",174],["T_STRING","getSelect",174],"(",")",["T_OBJECT_OPERATOR","->",174],["T_STRING","getPart",174],"(",["T_STRING","Zend_Db_Select",174],["T_DOUBLE_COLON","::",174],["T_STRING","FROM",174],")",";",["T_WHITESPACE","\n            ",174],["T_IF","if",175],["T_WHITESPACE"," ",175],"(",["T_ISSET","isset",175],"(",["T_VARIABLE","$from",175],"[",["T_CONSTANT_ENCAPSED_STRING","'main_table'",175],"]",")",")",["T_WHITESPACE"," ",175],"{",["T_WHITESPACE","\n                ",175],["T_VARIABLE","$from",176],"[",["T_CONSTANT_ENCAPSED_STRING","'main_table'",176],"]","[",["T_CONSTANT_ENCAPSED_STRING","'tableName'",176],"]",["T_WHITESPACE"," ",176],"=",["T_WHITESPACE"," ",176],["T_VARIABLE","$table",176],";",["T_WHITESPACE","\n            ",176],"}",["T_WHITESPACE","\n            ",177],["T_VARIABLE","$this",178],["T_OBJECT_OPERATOR","->",178],["T_STRING","getSelect",178],"(",")",["T_OBJECT_OPERATOR","->",178],["T_STRING","setPart",178],"(",["T_STRING","Zend_Db_Select",178],["T_DOUBLE_COLON","::",178],["T_STRING","FROM",178],",",["T_WHITESPACE"," ",178],["T_VARIABLE","$from",178],")",";",["T_WHITESPACE","\n        ",178],"}",["T_WHITESPACE","\n\n        ",179],["T_VARIABLE","$this",181],["T_OBJECT_OPERATOR","->",181],["T_STRING","_mainTable",181],["T_WHITESPACE"," ",181],"=",["T_WHITESPACE"," ",181],["T_VARIABLE","$table",181],";",["T_WHITESPACE","\n        ",181],["T_RETURN","return",182],["T_WHITESPACE"," ",182],["T_VARIABLE","$this",182],";",["T_WHITESPACE","\n    ",182],"}",["T_WHITESPACE","\n\n    ",183],["T_DOC_COMMENT","\/**\n     * Init collection select\n     *\n     * @return Mage_Core_Model_Resource_Db_Collection_Abstract\n     *\/",185],["T_WHITESPACE","\n    ",189],["T_PROTECTED","protected",190],["T_WHITESPACE"," ",190],["T_FUNCTION","function",190],["T_WHITESPACE"," ",190],["T_STRING","_initSelect",190],"(",")",["T_WHITESPACE","\n    ",190],"{",["T_WHITESPACE","\n        ",191],["T_VARIABLE","$this",192],["T_OBJECT_OPERATOR","->",192],["T_STRING","getSelect",192],"(",")",["T_OBJECT_OPERATOR","->",192],["T_STRING","from",192],"(",["T_ARRAY","array",192],"(",["T_CONSTANT_ENCAPSED_STRING","'main_table'",192],["T_WHITESPACE"," ",192],["T_DOUBLE_ARROW","=>",192],["T_WHITESPACE"," ",192],["T_VARIABLE","$this",192],["T_OBJECT_OPERATOR","->",192],["T_STRING","getMainTable",192],"(",")",")",")",";",["T_WHITESPACE","\n        ",192],["T_RETURN","return",193],["T_WHITESPACE"," ",193],["T_VARIABLE","$this",193],";",["T_WHITESPACE","\n    ",193],"}",["T_WHITESPACE","\n\n    ",194],["T_DOC_COMMENT","\/**\n     * Get Zend_Db_Select instance and applies fields to select if needed\n     *\n     * @return Varien_Db_Select\n     *\/",196],["T_WHITESPACE","\n    ",200],["T_PUBLIC","public",201],["T_WHITESPACE"," ",201],["T_FUNCTION","function",201],["T_WHITESPACE"," ",201],["T_STRING","getSelect",201],"(",")",["T_WHITESPACE","\n    ",201],"{",["T_WHITESPACE","\n        ",202],["T_IF","if",203],["T_WHITESPACE"," ",203],"(",["T_VARIABLE","$this",203],["T_OBJECT_OPERATOR","->",203],["T_STRING","_select",203],["T_WHITESPACE"," ",203],["T_BOOLEAN_AND","&&",203],["T_WHITESPACE"," ",203],["T_VARIABLE","$this",203],["T_OBJECT_OPERATOR","->",203],["T_STRING","_fieldsToSelectChanged",203],")",["T_WHITESPACE"," ",203],"{",["T_WHITESPACE","\n            ",203],["T_VARIABLE","$this",204],["T_OBJECT_OPERATOR","->",204],["T_STRING","_fieldsToSelectChanged",204],["T_WHITESPACE"," ",204],"=",["T_WHITESPACE"," ",204],["T_STRING","false",204],";",["T_WHITESPACE","\n            ",204],["T_VARIABLE","$this",205],["T_OBJECT_OPERATOR","->",205],["T_STRING","_initSelectFields",205],"(",")",";",["T_WHITESPACE","\n        ",205],"}",["T_WHITESPACE","\n        ",206],["T_RETURN","return",207],["T_WHITESPACE"," ",207],["T_STRING","parent",207],["T_DOUBLE_COLON","::",207],["T_STRING","getSelect",207],"(",")",";",["T_WHITESPACE","\n    ",207],"}",["T_WHITESPACE","\n\n    ",208],["T_DOC_COMMENT","\/**\n     * Init fields for select\n     *\n     * @return Mage_Core_Model_Resource_Db_Collection_Abstract\n     *\/",210],["T_WHITESPACE","\n    ",214],["T_PROTECTED","protected",215],["T_WHITESPACE"," ",215],["T_FUNCTION","function",215],["T_WHITESPACE"," ",215],["T_STRING","_initSelectFields",215],"(",")",["T_WHITESPACE","\n    ",215],"{",["T_WHITESPACE","\n        ",216],["T_VARIABLE","$columns",217],["T_WHITESPACE"," ",217],"=",["T_WHITESPACE"," ",217],["T_VARIABLE","$this",217],["T_OBJECT_OPERATOR","->",217],["T_STRING","_select",217],["T_OBJECT_OPERATOR","->",217],["T_STRING","getPart",217],"(",["T_STRING","Zend_Db_Select",217],["T_DOUBLE_COLON","::",217],["T_STRING","COLUMNS",217],")",";",["T_WHITESPACE","\n        ",217],["T_VARIABLE","$columnsToSelect",218],["T_WHITESPACE"," ",218],"=",["T_WHITESPACE"," ",218],["T_ARRAY","array",218],"(",")",";",["T_WHITESPACE","\n        ",218],["T_FOREACH","foreach",219],["T_WHITESPACE"," ",219],"(",["T_VARIABLE","$columns",219],["T_WHITESPACE"," ",219],["T_AS","as",219],["T_WHITESPACE"," ",219],["T_VARIABLE","$columnEntry",219],")",["T_WHITESPACE"," ",219],"{",["T_WHITESPACE","\n            ",219],["T_LIST","list",220],"(",["T_VARIABLE","$correlationName",220],",",["T_WHITESPACE"," ",220],["T_VARIABLE","$column",220],",",["T_WHITESPACE"," ",220],["T_VARIABLE","$alias",220],")",["T_WHITESPACE"," ",220],"=",["T_WHITESPACE"," ",220],["T_VARIABLE","$columnEntry",220],";",["T_WHITESPACE","\n            ",220],["T_IF","if",221],["T_WHITESPACE"," ",221],"(",["T_VARIABLE","$correlationName",221],["T_WHITESPACE"," ",221],["T_IS_NOT_IDENTICAL","!==",221],["T_WHITESPACE"," ",221],["T_CONSTANT_ENCAPSED_STRING","'main_table'",221],")",["T_WHITESPACE"," ",221],"{",["T_WHITESPACE"," ",221],["T_COMMENT","\/\/ Add joined fields to select\n",221],["T_WHITESPACE","                ",222],["T_IF","if",222],["T_WHITESPACE"," ",222],"(",["T_VARIABLE","$column",222],["T_WHITESPACE"," ",222],["T_INSTANCEOF","instanceof",222],["T_WHITESPACE"," ",222],["T_STRING","Zend_Db_Expr",222],")",["T_WHITESPACE"," ",222],"{",["T_WHITESPACE","\n                    ",222],["T_VARIABLE","$column",223],["T_WHITESPACE"," ",223],"=",["T_WHITESPACE"," ",223],["T_VARIABLE","$column",223],["T_OBJECT_OPERATOR","->",223],["T_STRING","__toString",223],"(",")",";",["T_WHITESPACE","\n                ",223],"}",["T_WHITESPACE","\n                ",224],["T_VARIABLE","$key",225],["T_WHITESPACE"," ",225],"=",["T_WHITESPACE"," ",225],"(",["T_VARIABLE","$alias",225],["T_WHITESPACE"," ",225],["T_IS_NOT_IDENTICAL","!==",225],["T_WHITESPACE"," ",225],["T_STRING","null",225],["T_WHITESPACE"," ",225],"?",["T_WHITESPACE"," ",225],["T_VARIABLE","$alias",225],["T_WHITESPACE"," ",225],":",["T_WHITESPACE"," ",225],["T_VARIABLE","$column",225],")",";",["T_WHITESPACE","\n                ",225],["T_VARIABLE","$columnsToSelect",226],"[",["T_VARIABLE","$key",226],"]",["T_WHITESPACE"," ",226],"=",["T_WHITESPACE"," ",226],["T_VARIABLE","$columnEntry",226],";",["T_WHITESPACE","\n            ",226],"}",["T_WHITESPACE","\n        ",227],"}",["T_WHITESPACE","\n\n        ",228],["T_VARIABLE","$columns",230],["T_WHITESPACE"," ",230],"=",["T_WHITESPACE"," ",230],["T_VARIABLE","$columnsToSelect",230],";",["T_WHITESPACE","\n\n        ",230],["T_VARIABLE","$columnsToSelect",232],["T_WHITESPACE"," ",232],"=",["T_WHITESPACE"," ",232],["T_STRING","array_keys",232],"(",["T_VARIABLE","$columnsToSelect",232],")",";",["T_WHITESPACE","\n\n        ",232],["T_IF","if",234],["T_WHITESPACE"," ",234],"(",["T_VARIABLE","$this",234],["T_OBJECT_OPERATOR","->",234],["T_STRING","_fieldsToSelect",234],["T_WHITESPACE"," ",234],["T_IS_NOT_IDENTICAL","!==",234],["T_WHITESPACE"," ",234],["T_STRING","null",234],")",["T_WHITESPACE"," ",234],"{",["T_WHITESPACE","\n            ",234],["T_VARIABLE","$insertIndex",235],["T_WHITESPACE"," ",235],"=",["T_WHITESPACE"," ",235],["T_LNUMBER","0",235],";",["T_WHITESPACE","\n            ",235],["T_FOREACH","foreach",236],["T_WHITESPACE"," ",236],"(",["T_VARIABLE","$this",236],["T_OBJECT_OPERATOR","->",236],["T_STRING","_fieldsToSelect",236],["T_WHITESPACE"," ",236],["T_AS","as",236],["T_WHITESPACE"," ",236],["T_VARIABLE","$alias",236],["T_WHITESPACE"," ",236],["T_DOUBLE_ARROW","=>",236],["T_WHITESPACE"," ",236],["T_VARIABLE","$field",236],")",["T_WHITESPACE"," ",236],"{",["T_WHITESPACE","\n                ",236],["T_IF","if",237],["T_WHITESPACE"," ",237],"(","!",["T_STRING","is_string",237],"(",["T_VARIABLE","$alias",237],")",")",["T_WHITESPACE"," ",237],"{",["T_WHITESPACE","\n                    ",237],["T_VARIABLE","$alias",238],["T_WHITESPACE"," ",238],"=",["T_WHITESPACE"," ",238],["T_STRING","null",238],";",["T_WHITESPACE","\n                ",238],"}",["T_WHITESPACE","\n\n                ",239],["T_IF","if",241],["T_WHITESPACE"," ",241],"(",["T_VARIABLE","$field",241],["T_WHITESPACE"," ",241],["T_INSTANCEOF","instanceof",241],["T_WHITESPACE"," ",241],["T_STRING","Zend_Db_Expr",241],")",["T_WHITESPACE"," ",241],"{",["T_WHITESPACE","\n                    ",241],["T_VARIABLE","$column",242],["T_WHITESPACE"," ",242],"=",["T_WHITESPACE"," ",242],["T_VARIABLE","$field",242],["T_OBJECT_OPERATOR","->",242],["T_STRING","__toString",242],"(",")",";",["T_WHITESPACE","\n                ",242],"}",["T_WHITESPACE"," ",243],["T_ELSE","else",243],["T_WHITESPACE"," ",243],"{",["T_WHITESPACE","\n                    ",243],["T_VARIABLE","$column",244],["T_WHITESPACE"," ",244],"=",["T_WHITESPACE"," ",244],["T_VARIABLE","$field",244],";",["T_WHITESPACE","\n                ",244],"}",["T_WHITESPACE","\n\n                ",245],["T_IF","if",247],["T_WHITESPACE"," ",247],"(","(",["T_VARIABLE","$alias",247],["T_WHITESPACE"," ",247],["T_IS_NOT_IDENTICAL","!==",247],["T_WHITESPACE"," ",247],["T_STRING","null",247],["T_WHITESPACE"," ",247],["T_BOOLEAN_AND","&&",247],["T_WHITESPACE"," ",247],["T_STRING","in_array",247],"(",["T_VARIABLE","$alias",247],",",["T_WHITESPACE"," ",247],["T_VARIABLE","$columnsToSelect",247],")",")",["T_WHITESPACE"," ",247],["T_BOOLEAN_OR","||",247],["T_WHITESPACE","\n                    ",247],["T_COMMENT","\/\/ If field already joined from another table\n",248],["T_WHITESPACE","                    ",249],"(",["T_VARIABLE","$alias",249],["T_WHITESPACE"," ",249],["T_IS_IDENTICAL","===",249],["T_WHITESPACE"," ",249],["T_STRING","null",249],["T_WHITESPACE"," ",249],["T_BOOLEAN_AND","&&",249],["T_WHITESPACE"," ",249],["T_ISSET","isset",249],"(",["T_VARIABLE","$alias",249],",",["T_WHITESPACE"," ",249],["T_VARIABLE","$columnsToSelect",249],")",")",")",["T_WHITESPACE"," ",249],"{",["T_WHITESPACE","\n                    ",249],["T_CONTINUE","continue",250],";",["T_WHITESPACE","\n                ",250],"}",["T_WHITESPACE","\n\n                ",251],["T_VARIABLE","$columnEntry",253],["T_WHITESPACE"," ",253],"=",["T_WHITESPACE"," ",253],["T_ARRAY","array",253],"(",["T_CONSTANT_ENCAPSED_STRING","'main_table'",253],",",["T_WHITESPACE"," ",253],["T_VARIABLE","$field",253],",",["T_WHITESPACE"," ",253],["T_VARIABLE","$alias",253],")",";",["T_WHITESPACE","\n                ",253],["T_STRING","array_splice",254],"(",["T_VARIABLE","$columns",254],",",["T_WHITESPACE"," ",254],["T_VARIABLE","$insertIndex",254],",",["T_WHITESPACE"," ",254],["T_LNUMBER","0",254],",",["T_WHITESPACE"," ",254],["T_ARRAY","array",254],"(",["T_VARIABLE","$columnEntry",254],")",")",";",["T_WHITESPACE"," ",254],["T_COMMENT","\/\/ Insert column\n",254],["T_WHITESPACE","                ",255],["T_VARIABLE","$insertIndex",255],["T_WHITESPACE"," ",255],["T_INC","++",255],";",["T_WHITESPACE","\n\n            ",255],"}",["T_WHITESPACE","\n        ",257],"}",["T_WHITESPACE"," ",258],["T_ELSE","else",258],["T_WHITESPACE"," ",258],"{",["T_WHITESPACE","\n            ",258],["T_STRING","array_unshift",259],"(",["T_VARIABLE","$columns",259],",",["T_WHITESPACE"," ",259],["T_ARRAY","array",259],"(",["T_CONSTANT_ENCAPSED_STRING","'main_table'",259],",",["T_WHITESPACE"," ",259],["T_CONSTANT_ENCAPSED_STRING","'*'",259],",",["T_WHITESPACE"," ",259],["T_STRING","null",259],")",")",";",["T_WHITESPACE","\n        ",259],"}",["T_WHITESPACE","\n\n        ",260],["T_VARIABLE","$this",262],["T_OBJECT_OPERATOR","->",262],["T_STRING","_select",262],["T_OBJECT_OPERATOR","->",262],["T_STRING","setPart",262],"(",["T_STRING","Zend_Db_Select",262],["T_DOUBLE_COLON","::",262],["T_STRING","COLUMNS",262],",",["T_WHITESPACE"," ",262],["T_VARIABLE","$columns",262],")",";",["T_WHITESPACE","\n\n        ",262],["T_RETURN","return",264],["T_WHITESPACE"," ",264],["T_VARIABLE","$this",264],";",["T_WHITESPACE","\n    ",264],"}",["T_WHITESPACE","\n\n    ",265],["T_DOC_COMMENT","\/**\n     * Retrieve initial fields to select like id field\n     *\n     * @return array\n     *\/",267],["T_WHITESPACE","\n    ",271],["T_PROTECTED","protected",272],["T_WHITESPACE"," ",272],["T_FUNCTION","function",272],["T_WHITESPACE"," ",272],["T_STRING","_getInitialFieldsToSelect",272],"(",")",["T_WHITESPACE","\n    ",272],"{",["T_WHITESPACE","\n        ",273],["T_IF","if",274],["T_WHITESPACE"," ",274],"(",["T_VARIABLE","$this",274],["T_OBJECT_OPERATOR","->",274],["T_STRING","_initialFieldsToSelect",274],["T_WHITESPACE"," ",274],["T_IS_IDENTICAL","===",274],["T_WHITESPACE"," ",274],["T_STRING","null",274],")",["T_WHITESPACE"," ",274],"{",["T_WHITESPACE","\n            ",274],["T_VARIABLE","$this",275],["T_OBJECT_OPERATOR","->",275],["T_STRING","_initialFieldsToSelect",275],["T_WHITESPACE"," ",275],"=",["T_WHITESPACE"," ",275],["T_ARRAY","array",275],"(",")",";",["T_WHITESPACE","\n            ",275],["T_VARIABLE","$this",276],["T_OBJECT_OPERATOR","->",276],["T_STRING","_initInitialFieldsToSelect",276],"(",")",";",["T_WHITESPACE","\n        ",276],"}",["T_WHITESPACE","\n\n        ",277],["T_RETURN","return",279],["T_WHITESPACE"," ",279],["T_VARIABLE","$this",279],["T_OBJECT_OPERATOR","->",279],["T_STRING","_initialFieldsToSelect",279],";",["T_WHITESPACE","\n    ",279],"}",["T_WHITESPACE","\n\n    ",280],["T_DOC_COMMENT","\/**\n     * Initialize initial fields to select like id field\n     *\n     * @return Mage_Core_Model_Resource_Db_Collection_Abstract\n     *\/",282],["T_WHITESPACE","\n    ",286],["T_PROTECTED","protected",287],["T_WHITESPACE"," ",287],["T_FUNCTION","function",287],["T_WHITESPACE"," ",287],["T_STRING","_initInitialFieldsToSelect",287],"(",")",["T_WHITESPACE","\n    ",287],"{",["T_WHITESPACE","\n        ",288],["T_VARIABLE","$idFieldName",289],["T_WHITESPACE"," ",289],"=",["T_WHITESPACE"," ",289],["T_VARIABLE","$this",289],["T_OBJECT_OPERATOR","->",289],["T_STRING","getResource",289],"(",")",["T_OBJECT_OPERATOR","->",289],["T_STRING","getIdFieldName",289],"(",")",";",["T_WHITESPACE","\n        ",289],["T_IF","if",290],["T_WHITESPACE"," ",290],"(",["T_VARIABLE","$idFieldName",290],")",["T_WHITESPACE"," ",290],"{",["T_WHITESPACE","\n            ",290],["T_VARIABLE","$this",291],["T_OBJECT_OPERATOR","->",291],["T_STRING","_initialFieldsToSelect",291],"[","]",["T_WHITESPACE"," ",291],"=",["T_WHITESPACE"," ",291],["T_VARIABLE","$idFieldName",291],";",["T_WHITESPACE","\n        ",291],"}",["T_WHITESPACE","\n        ",292],["T_RETURN","return",293],["T_WHITESPACE"," ",293],["T_VARIABLE","$this",293],";",["T_WHITESPACE","\n    ",293],"}",["T_WHITESPACE","\n\n    ",294],["T_DOC_COMMENT","\/**\n     * Add field to select\n     *\n     * @param string|array $field\n     * @param string|null $alias\n     * @return Mage_Core_Model_Resource_Db_Collection_Abstract\n     *\/",296],["T_WHITESPACE","\n    ",302],["T_PUBLIC","public",303],["T_WHITESPACE"," ",303],["T_FUNCTION","function",303],["T_WHITESPACE"," ",303],["T_STRING","addFieldToSelect",303],"(",["T_VARIABLE","$field",303],",",["T_WHITESPACE"," ",303],["T_VARIABLE","$alias",303],["T_WHITESPACE"," ",303],"=",["T_WHITESPACE"," ",303],["T_STRING","null",303],")",["T_WHITESPACE","\n    ",303],"{",["T_WHITESPACE","\n        ",304],["T_IF","if",305],["T_WHITESPACE"," ",305],"(",["T_VARIABLE","$field",305],["T_WHITESPACE"," ",305],["T_IS_IDENTICAL","===",305],["T_WHITESPACE"," ",305],["T_CONSTANT_ENCAPSED_STRING","'*'",305],")",["T_WHITESPACE"," ",305],"{",["T_WHITESPACE"," ",305],["T_COMMENT","\/\/ If we will select all fields\n",305],["T_WHITESPACE","            ",306],["T_VARIABLE","$this",306],["T_OBJECT_OPERATOR","->",306],["T_STRING","_fieldsToSelect",306],["T_WHITESPACE"," ",306],"=",["T_WHITESPACE"," ",306],["T_STRING","null",306],";",["T_WHITESPACE","\n            ",306],["T_VARIABLE","$this",307],["T_OBJECT_OPERATOR","->",307],["T_STRING","_fieldsToSelectChanged",307],["T_WHITESPACE"," ",307],"=",["T_WHITESPACE"," ",307],["T_STRING","true",307],";",["T_WHITESPACE","\n            ",307],["T_RETURN","return",308],["T_WHITESPACE"," ",308],["T_VARIABLE","$this",308],";",["T_WHITESPACE","\n        ",308],"}",["T_WHITESPACE","\n\n        ",309],["T_IF","if",311],["T_WHITESPACE"," ",311],"(",["T_STRING","is_array",311],"(",["T_VARIABLE","$field",311],")",")",["T_WHITESPACE"," ",311],"{",["T_WHITESPACE","\n            ",311],["T_IF","if",312],["T_WHITESPACE"," ",312],"(",["T_VARIABLE","$this",312],["T_OBJECT_OPERATOR","->",312],["T_STRING","_fieldsToSelect",312],["T_WHITESPACE"," ",312],["T_IS_IDENTICAL","===",312],["T_WHITESPACE"," ",312],["T_STRING","null",312],")",["T_WHITESPACE"," ",312],"{",["T_WHITESPACE","\n                ",312],["T_VARIABLE","$this",313],["T_OBJECT_OPERATOR","->",313],["T_STRING","_fieldsToSelect",313],["T_WHITESPACE"," ",313],"=",["T_WHITESPACE"," ",313],["T_VARIABLE","$this",313],["T_OBJECT_OPERATOR","->",313],["T_STRING","_getInitialFieldsToSelect",313],"(",")",";",["T_WHITESPACE","\n            ",313],"}",["T_WHITESPACE","\n\n            ",314],["T_FOREACH","foreach",316],["T_WHITESPACE"," ",316],"(",["T_VARIABLE","$field",316],["T_WHITESPACE"," ",316],["T_AS","as",316],["T_WHITESPACE"," ",316],["T_VARIABLE","$key",316],["T_WHITESPACE"," ",316],["T_DOUBLE_ARROW","=>",316],["T_WHITESPACE"," ",316],["T_VARIABLE","$value",316],")",["T_WHITESPACE"," ",316],"{",["T_WHITESPACE","\n                ",316],["T_VARIABLE","$this",317],["T_OBJECT_OPERATOR","->",317],["T_STRING","addFieldToSelect",317],"(",["T_WHITESPACE","\n                    ",317],["T_VARIABLE","$value",318],",",["T_WHITESPACE","\n                    ",318],"(",["T_STRING","is_string",319],"(",["T_VARIABLE","$key",319],")",["T_WHITESPACE"," ",319],"?",["T_WHITESPACE"," ",319],["T_VARIABLE","$key",319],["T_WHITESPACE"," ",319],":",["T_WHITESPACE"," ",319],["T_STRING","null",319],")",",",["T_WHITESPACE","\n                    ",319],["T_STRING","false",320],["T_WHITESPACE","\n                ",320],")",";",["T_WHITESPACE","\n            ",321],"}",["T_WHITESPACE","\n\n            ",322],["T_VARIABLE","$this",324],["T_OBJECT_OPERATOR","->",324],["T_STRING","_fieldsToSelectChanged",324],["T_WHITESPACE"," ",324],"=",["T_WHITESPACE"," ",324],["T_STRING","true",324],";",["T_WHITESPACE","\n            ",324],["T_RETURN","return",325],["T_WHITESPACE"," ",325],["T_VARIABLE","$this",325],";",["T_WHITESPACE","\n        ",325],"}",["T_WHITESPACE","\n\n        ",326],["T_IF","if",328],["T_WHITESPACE"," ",328],"(",["T_VARIABLE","$alias",328],["T_WHITESPACE"," ",328],["T_IS_IDENTICAL","===",328],["T_WHITESPACE"," ",328],["T_STRING","null",328],")",["T_WHITESPACE"," ",328],"{",["T_WHITESPACE","\n            ",328],["T_VARIABLE","$this",329],["T_OBJECT_OPERATOR","->",329],["T_STRING","_fieldsToSelect",329],"[","]",["T_WHITESPACE"," ",329],"=",["T_WHITESPACE"," ",329],["T_VARIABLE","$field",329],";",["T_WHITESPACE","\n        ",329],"}",["T_WHITESPACE"," ",330],["T_ELSE","else",330],["T_WHITESPACE"," ",330],"{",["T_WHITESPACE","\n            ",330],["T_VARIABLE","$this",331],["T_OBJECT_OPERATOR","->",331],["T_STRING","_fieldsToSelect",331],"[",["T_VARIABLE","$alias",331],"]",["T_WHITESPACE"," ",331],"=",["T_WHITESPACE"," ",331],["T_VARIABLE","$field",331],";",["T_WHITESPACE","\n        ",331],"}",["T_WHITESPACE","\n\n        ",332],["T_VARIABLE","$this",334],["T_OBJECT_OPERATOR","->",334],["T_STRING","_fieldsToSelectChanged",334],["T_WHITESPACE"," ",334],"=",["T_WHITESPACE"," ",334],["T_STRING","true",334],";",["T_WHITESPACE","\n        ",334],["T_RETURN","return",335],["T_WHITESPACE"," ",335],["T_VARIABLE","$this",335],";",["T_WHITESPACE","\n    ",335],"}",["T_WHITESPACE","\n\n    ",336],["T_DOC_COMMENT","\/**\n     * Add attribute expression (SUM, COUNT, etc)\n     * Example: ('sub_total', 'SUM({{attribute}})', 'revenue')\n     * Example: ('sub_total', 'SUM({{revenue}})', 'revenue')\n     * For some functions like SUM use groupByAttribute.\n     *\n     * @param string $alias\n     * @param string $expression\n     * @param array $fields\n     * @return Mage_Core_Model_Resource_Db_Collection_Abstract\n     *\/",338],["T_WHITESPACE","\n    ",348],["T_PUBLIC","public",349],["T_WHITESPACE"," ",349],["T_FUNCTION","function",349],["T_WHITESPACE"," ",349],["T_STRING","addExpressionFieldToSelect",349],"(",["T_VARIABLE","$alias",349],",",["T_WHITESPACE"," ",349],["T_VARIABLE","$expression",349],",",["T_WHITESPACE"," ",349],["T_VARIABLE","$fields",349],")",["T_WHITESPACE","\n    ",349],"{",["T_WHITESPACE","\n        ",350],["T_COMMENT","\/\/ validate alias\n",351],["T_WHITESPACE","        ",352],["T_IF","if",352],["T_WHITESPACE"," ",352],"(","!",["T_STRING","is_array",352],"(",["T_VARIABLE","$fields",352],")",")",["T_WHITESPACE"," ",352],"{",["T_WHITESPACE","\n            ",352],["T_VARIABLE","$fields",353],["T_WHITESPACE"," ",353],"=",["T_WHITESPACE"," ",353],["T_ARRAY","array",353],"(",["T_VARIABLE","$fields",353],["T_DOUBLE_ARROW","=>",353],["T_VARIABLE","$fields",353],")",";",["T_WHITESPACE","\n        ",353],"}",["T_WHITESPACE","\n\n        ",354],["T_VARIABLE","$fullExpression",356],["T_WHITESPACE"," ",356],"=",["T_WHITESPACE"," ",356],["T_VARIABLE","$expression",356],";",["T_WHITESPACE","\n        ",356],["T_FOREACH","foreach",357],["T_WHITESPACE"," ",357],"(",["T_VARIABLE","$fields",357],["T_WHITESPACE"," ",357],["T_AS","as",357],["T_WHITESPACE"," ",357],["T_VARIABLE","$fieldKey",357],["T_DOUBLE_ARROW","=>",357],["T_VARIABLE","$fieldItem",357],")",["T_WHITESPACE"," ",357],"{",["T_WHITESPACE","\n            ",357],["T_VARIABLE","$fullExpression",358],["T_WHITESPACE"," ",358],"=",["T_WHITESPACE"," ",358],["T_STRING","str_replace",358],"(",["T_CONSTANT_ENCAPSED_STRING","'{{'",358],["T_WHITESPACE"," ",358],".",["T_WHITESPACE"," ",358],["T_VARIABLE","$fieldKey",358],["T_WHITESPACE"," ",358],".",["T_WHITESPACE"," ",358],["T_CONSTANT_ENCAPSED_STRING","'}}'",358],",",["T_WHITESPACE"," ",358],["T_VARIABLE","$fieldItem",358],",",["T_WHITESPACE"," ",358],["T_VARIABLE","$fullExpression",358],")",";",["T_WHITESPACE","\n        ",358],"}",["T_WHITESPACE","\n\n        ",359],["T_VARIABLE","$this",361],["T_OBJECT_OPERATOR","->",361],["T_STRING","getSelect",361],"(",")",["T_OBJECT_OPERATOR","->",361],["T_STRING","columns",361],"(",["T_ARRAY","array",361],"(",["T_VARIABLE","$alias",361],["T_DOUBLE_ARROW","=>",361],["T_VARIABLE","$fullExpression",361],")",")",";",["T_WHITESPACE","\n\n        ",361],["T_RETURN","return",363],["T_WHITESPACE"," ",363],["T_VARIABLE","$this",363],";",["T_WHITESPACE","\n    ",363],"}",["T_WHITESPACE","\n\n    ",364],["T_DOC_COMMENT","\/**\n     * Removes field from select\n     *\n     * @param string|null $field\n     * @param boolean $isAlias Alias identifier\n     * @return Mage_Core_Model_Resource_Db_Collection_Abstract\n     *\/",366],["T_WHITESPACE","\n    ",372],["T_PUBLIC","public",373],["T_WHITESPACE"," ",373],["T_FUNCTION","function",373],["T_WHITESPACE"," ",373],["T_STRING","removeFieldFromSelect",373],"(",["T_VARIABLE","$field",373],",",["T_WHITESPACE"," ",373],["T_VARIABLE","$isAlias",373],["T_WHITESPACE"," ",373],"=",["T_WHITESPACE"," ",373],["T_STRING","false",373],")",["T_WHITESPACE","\n    ",373],"{",["T_WHITESPACE","\n        ",374],["T_IF","if",375],["T_WHITESPACE"," ",375],"(",["T_VARIABLE","$isAlias",375],")",["T_WHITESPACE"," ",375],"{",["T_WHITESPACE","\n            ",375],["T_IF","if",376],["T_WHITESPACE"," ",376],"(",["T_ISSET","isset",376],"(",["T_VARIABLE","$this",376],["T_OBJECT_OPERATOR","->",376],["T_STRING","_fieldsToSelect",376],"[",["T_VARIABLE","$field",376],"]",")",")",["T_WHITESPACE"," ",376],"{",["T_WHITESPACE","\n                ",376],["T_UNSET","unset",377],"(",["T_VARIABLE","$this",377],["T_OBJECT_OPERATOR","->",377],["T_STRING","_fieldsToSelect",377],"[",["T_VARIABLE","$field",377],"]",")",";",["T_WHITESPACE","\n            ",377],"}",["T_WHITESPACE","\n        ",378],"}",["T_WHITESPACE"," ",379],["T_ELSE","else",379],["T_WHITESPACE"," ",379],"{",["T_WHITESPACE","\n            ",379],["T_FOREACH","foreach",380],["T_WHITESPACE"," ",380],"(",["T_VARIABLE","$this",380],["T_OBJECT_OPERATOR","->",380],["T_STRING","_fieldsToSelect",380],["T_WHITESPACE"," ",380],["T_AS","as",380],["T_WHITESPACE"," ",380],["T_VARIABLE","$key",380],["T_WHITESPACE"," ",380],["T_DOUBLE_ARROW","=>",380],["T_WHITESPACE"," ",380],["T_VARIABLE","$value",380],")",["T_WHITESPACE"," ",380],"{",["T_WHITESPACE","\n                ",380],["T_IF","if",381],["T_WHITESPACE"," ",381],"(",["T_VARIABLE","$value",381],["T_WHITESPACE"," ",381],["T_IS_IDENTICAL","===",381],["T_WHITESPACE"," ",381],["T_VARIABLE","$field",381],")",["T_WHITESPACE"," ",381],"{",["T_WHITESPACE","\n                    ",381],["T_UNSET","unset",382],"(",["T_VARIABLE","$this",382],["T_OBJECT_OPERATOR","->",382],["T_STRING","_fieldsToSelect",382],"[",["T_VARIABLE","$key",382],"]",")",";",["T_WHITESPACE","\n                    ",382],["T_BREAK","break",383],";",["T_WHITESPACE","\n                ",383],"}",["T_WHITESPACE","\n            ",384],"}",["T_WHITESPACE","\n        ",385],"}",["T_WHITESPACE","\n\n        ",386],["T_VARIABLE","$this",388],["T_OBJECT_OPERATOR","->",388],["T_STRING","_fieldsToSelectChanged",388],["T_WHITESPACE"," ",388],"=",["T_WHITESPACE"," ",388],["T_STRING","true",388],";",["T_WHITESPACE","\n        ",388],["T_RETURN","return",389],["T_WHITESPACE"," ",389],["T_VARIABLE","$this",389],";",["T_WHITESPACE","\n    ",389],"}",["T_WHITESPACE","\n\n    ",390],["T_DOC_COMMENT","\/**\n     * Removes all fields from select\n     *\n     * @return Mage_Core_Model_Resource_Db_Collection_Abstract\n     *\/",392],["T_WHITESPACE","\n    ",396],["T_PUBLIC","public",397],["T_WHITESPACE"," ",397],["T_FUNCTION","function",397],["T_WHITESPACE"," ",397],["T_STRING","removeAllFieldsFromSelect",397],"(",")",["T_WHITESPACE","\n    ",397],"{",["T_WHITESPACE","\n        ",398],["T_VARIABLE","$this",399],["T_OBJECT_OPERATOR","->",399],["T_STRING","_fieldsToSelect",399],["T_WHITESPACE"," ",399],"=",["T_WHITESPACE"," ",399],["T_VARIABLE","$this",399],["T_OBJECT_OPERATOR","->",399],["T_STRING","_getInitialFieldsToSelect",399],"(",")",";",["T_WHITESPACE","\n        ",399],["T_VARIABLE","$this",400],["T_OBJECT_OPERATOR","->",400],["T_STRING","_fieldsToSelectChanged",400],["T_WHITESPACE"," ",400],"=",["T_WHITESPACE"," ",400],["T_STRING","true",400],";",["T_WHITESPACE","\n        ",400],["T_RETURN","return",401],["T_WHITESPACE"," ",401],["T_VARIABLE","$this",401],";",["T_WHITESPACE","\n    ",401],"}",["T_WHITESPACE","\n\n    ",402],["T_DOC_COMMENT","\/**\n     * Standard resource collection initialization\n     *\n     * @param string $model\n     * @param Mage_Core_Model_Resource_Db_Abstract $resourceModel\n     * @return Mage_Core_Model_Resource_Db_Collection_Abstract\n     *\/",404],["T_WHITESPACE","\n    ",410],["T_PROTECTED","protected",411],["T_WHITESPACE"," ",411],["T_FUNCTION","function",411],["T_WHITESPACE"," ",411],["T_STRING","_init",411],"(",["T_VARIABLE","$model",411],",",["T_WHITESPACE"," ",411],["T_VARIABLE","$resourceModel",411],["T_WHITESPACE"," ",411],"=",["T_WHITESPACE"," ",411],["T_STRING","null",411],")",["T_WHITESPACE","\n    ",411],"{",["T_WHITESPACE","\n        ",412],["T_VARIABLE","$this",413],["T_OBJECT_OPERATOR","->",413],["T_STRING","setModel",413],"(",["T_VARIABLE","$model",413],")",";",["T_WHITESPACE","\n        ",413],["T_IF","if",414],["T_WHITESPACE"," ",414],"(",["T_STRING","is_null",414],"(",["T_VARIABLE","$resourceModel",414],")",")",["T_WHITESPACE"," ",414],"{",["T_WHITESPACE","\n            ",414],["T_VARIABLE","$resourceModel",415],["T_WHITESPACE"," ",415],"=",["T_WHITESPACE"," ",415],["T_VARIABLE","$model",415],";",["T_WHITESPACE","\n        ",415],"}",["T_WHITESPACE","\n        ",416],["T_VARIABLE","$this",417],["T_OBJECT_OPERATOR","->",417],["T_STRING","setResourceModel",417],"(",["T_VARIABLE","$resourceModel",417],")",";",["T_WHITESPACE","\n        ",417],["T_RETURN","return",418],["T_WHITESPACE"," ",418],["T_VARIABLE","$this",418],";",["T_WHITESPACE","\n    ",418],"}",["T_WHITESPACE","\n\n    ",419],["T_DOC_COMMENT","\/**\n     * Set model name for collection items\n     *\n     * @param string $model\n     * @return Mage_Core_Model_Resource_Db_Collection_Abstract\n     *\/",421],["T_WHITESPACE","\n    ",426],["T_PUBLIC","public",427],["T_WHITESPACE"," ",427],["T_FUNCTION","function",427],["T_WHITESPACE"," ",427],["T_STRING","setModel",427],"(",["T_VARIABLE","$model",427],")",["T_WHITESPACE","\n    ",427],"{",["T_WHITESPACE","\n        ",428],["T_IF","if",429],["T_WHITESPACE"," ",429],"(",["T_STRING","is_string",429],"(",["T_VARIABLE","$model",429],")",")",["T_WHITESPACE"," ",429],"{",["T_WHITESPACE","\n            ",429],["T_VARIABLE","$this",430],["T_OBJECT_OPERATOR","->",430],["T_STRING","_model",430],["T_WHITESPACE"," ",430],"=",["T_WHITESPACE"," ",430],["T_VARIABLE","$model",430],";",["T_WHITESPACE","\n            ",430],["T_VARIABLE","$this",431],["T_OBJECT_OPERATOR","->",431],["T_STRING","setItemObjectClass",431],"(",["T_STRING","Mage",431],["T_DOUBLE_COLON","::",431],["T_STRING","getConfig",431],"(",")",["T_OBJECT_OPERATOR","->",431],["T_STRING","getModelClassName",431],"(",["T_VARIABLE","$model",431],")",")",";",["T_WHITESPACE","\n        ",431],"}",["T_WHITESPACE","\n        ",432],["T_RETURN","return",433],["T_WHITESPACE"," ",433],["T_VARIABLE","$this",433],";",["T_WHITESPACE","\n    ",433],"}",["T_WHITESPACE","\n\n    ",434],["T_DOC_COMMENT","\/**\n     * Get model instance\n     *\n     * @param array $args\n     * @return Varien_Object\n     *\/",436],["T_WHITESPACE","\n    ",441],["T_PUBLIC","public",442],["T_WHITESPACE"," ",442],["T_FUNCTION","function",442],["T_WHITESPACE"," ",442],["T_STRING","getModelName",442],"(",["T_VARIABLE","$args",442],["T_WHITESPACE"," ",442],"=",["T_WHITESPACE"," ",442],["T_ARRAY","array",442],"(",")",")",["T_WHITESPACE","\n    ",442],"{",["T_WHITESPACE","\n        ",443],["T_RETURN","return",444],["T_WHITESPACE"," ",444],["T_VARIABLE","$this",444],["T_OBJECT_OPERATOR","->",444],["T_STRING","_model",444],";",["T_WHITESPACE","\n    ",444],"}",["T_WHITESPACE","\n\n    ",445],["T_DOC_COMMENT","\/**\n     *  Set resource model name for collection items\n     *\n     * @param string $model\n     *\/",447],["T_WHITESPACE","\n    ",451],["T_PUBLIC","public",452],["T_WHITESPACE"," ",452],["T_FUNCTION","function",452],["T_WHITESPACE"," ",452],["T_STRING","setResourceModel",452],"(",["T_VARIABLE","$model",452],")",["T_WHITESPACE","\n    ",452],"{",["T_WHITESPACE","\n        ",453],["T_VARIABLE","$this",454],["T_OBJECT_OPERATOR","->",454],["T_STRING","_resourceModel",454],["T_WHITESPACE"," ",454],"=",["T_WHITESPACE"," ",454],["T_VARIABLE","$model",454],";",["T_WHITESPACE","\n    ",454],"}",["T_WHITESPACE","\n\n    ",455],["T_DOC_COMMENT","\/**\n     *  Retrieve resource model name\n     *\n     * @return string\n     *\/",457],["T_WHITESPACE","\n    ",461],["T_PUBLIC","public",462],["T_WHITESPACE"," ",462],["T_FUNCTION","function",462],["T_WHITESPACE"," ",462],["T_STRING","getResourceModelName",462],"(",")",["T_WHITESPACE","\n    ",462],"{",["T_WHITESPACE","\n        ",463],["T_RETURN","return",464],["T_WHITESPACE"," ",464],["T_VARIABLE","$this",464],["T_OBJECT_OPERATOR","->",464],["T_STRING","_resourceModel",464],";",["T_WHITESPACE","\n    ",464],"}",["T_WHITESPACE","\n\n    ",465],["T_DOC_COMMENT","\/**\n     * Get resource instance\n     *\n     * @return Mage_Core_Model_Resource_Db_Abstract\n     *\/",467],["T_WHITESPACE","\n    ",471],["T_PUBLIC","public",472],["T_WHITESPACE"," ",472],["T_FUNCTION","function",472],["T_WHITESPACE"," ",472],["T_STRING","getResource",472],"(",")",["T_WHITESPACE","\n    ",472],"{",["T_WHITESPACE","\n        ",473],["T_IF","if",474],["T_WHITESPACE"," ",474],"(",["T_EMPTY","empty",474],"(",["T_VARIABLE","$this",474],["T_OBJECT_OPERATOR","->",474],["T_STRING","_resource",474],")",")",["T_WHITESPACE"," ",474],"{",["T_WHITESPACE","\n            ",474],["T_VARIABLE","$this",475],["T_OBJECT_OPERATOR","->",475],["T_STRING","_resource",475],["T_WHITESPACE"," ",475],"=",["T_WHITESPACE"," ",475],["T_STRING","Mage",475],["T_DOUBLE_COLON","::",475],["T_STRING","getResourceModel",475],"(",["T_VARIABLE","$this",475],["T_OBJECT_OPERATOR","->",475],["T_STRING","getResourceModelName",475],"(",")",")",";",["T_WHITESPACE","\n        ",475],"}",["T_WHITESPACE","\n        ",476],["T_RETURN","return",477],["T_WHITESPACE"," ",477],["T_VARIABLE","$this",477],["T_OBJECT_OPERATOR","->",477],["T_STRING","_resource",477],";",["T_WHITESPACE","\n    ",477],"}",["T_WHITESPACE","\n\n    ",478],["T_DOC_COMMENT","\/**\n     * Retrieve table name\n     *\n     * @param string $table\n     * @return string\n     *\/",480],["T_WHITESPACE","\n    ",485],["T_PUBLIC","public",486],["T_WHITESPACE"," ",486],["T_FUNCTION","function",486],["T_WHITESPACE"," ",486],["T_STRING","getTable",486],"(",["T_VARIABLE","$table",486],")",["T_WHITESPACE","\n    ",486],"{",["T_WHITESPACE","\n        ",487],["T_RETURN","return",488],["T_WHITESPACE"," ",488],["T_VARIABLE","$this",488],["T_OBJECT_OPERATOR","->",488],["T_STRING","getResource",488],"(",")",["T_OBJECT_OPERATOR","->",488],["T_STRING","getTable",488],"(",["T_VARIABLE","$table",488],")",";",["T_WHITESPACE","\n    ",488],"}",["T_WHITESPACE","\n\n    ",489],["T_DOC_COMMENT","\/**\n     * Retrieve all ids for collection\n     *\n     * @return array\n     *\/",491],["T_WHITESPACE","\n    ",495],["T_PUBLIC","public",496],["T_WHITESPACE"," ",496],["T_FUNCTION","function",496],["T_WHITESPACE"," ",496],["T_STRING","getAllIds",496],"(",")",["T_WHITESPACE","\n    ",496],"{",["T_WHITESPACE","\n        ",497],["T_VARIABLE","$idsSelect",498],["T_WHITESPACE"," ",498],"=",["T_WHITESPACE"," ",498],["T_CLONE","clone",498],["T_WHITESPACE"," ",498],["T_VARIABLE","$this",498],["T_OBJECT_OPERATOR","->",498],["T_STRING","getSelect",498],"(",")",";",["T_WHITESPACE","\n        ",498],["T_VARIABLE","$idsSelect",499],["T_OBJECT_OPERATOR","->",499],["T_STRING","reset",499],"(",["T_STRING","Zend_Db_Select",499],["T_DOUBLE_COLON","::",499],["T_STRING","ORDER",499],")",";",["T_WHITESPACE","\n        ",499],["T_VARIABLE","$idsSelect",500],["T_OBJECT_OPERATOR","->",500],["T_STRING","reset",500],"(",["T_STRING","Zend_Db_Select",500],["T_DOUBLE_COLON","::",500],["T_STRING","LIMIT_COUNT",500],")",";",["T_WHITESPACE","\n        ",500],["T_VARIABLE","$idsSelect",501],["T_OBJECT_OPERATOR","->",501],["T_STRING","reset",501],"(",["T_STRING","Zend_Db_Select",501],["T_DOUBLE_COLON","::",501],["T_STRING","LIMIT_OFFSET",501],")",";",["T_WHITESPACE","\n        ",501],["T_VARIABLE","$idsSelect",502],["T_OBJECT_OPERATOR","->",502],["T_STRING","reset",502],"(",["T_STRING","Zend_Db_Select",502],["T_DOUBLE_COLON","::",502],["T_STRING","COLUMNS",502],")",";",["T_WHITESPACE","\n\n        ",502],["T_VARIABLE","$idsSelect",504],["T_OBJECT_OPERATOR","->",504],["T_STRING","columns",504],"(",["T_VARIABLE","$this",504],["T_OBJECT_OPERATOR","->",504],["T_STRING","getResource",504],"(",")",["T_OBJECT_OPERATOR","->",504],["T_STRING","getIdFieldName",504],"(",")",",",["T_WHITESPACE"," ",504],["T_CONSTANT_ENCAPSED_STRING","'main_table'",504],")",";",["T_WHITESPACE","\n        ",504],["T_RETURN","return",505],["T_WHITESPACE"," ",505],["T_VARIABLE","$this",505],["T_OBJECT_OPERATOR","->",505],["T_STRING","getConnection",505],"(",")",["T_OBJECT_OPERATOR","->",505],["T_STRING","fetchCol",505],"(",["T_VARIABLE","$idsSelect",505],")",";",["T_WHITESPACE","\n    ",505],"}",["T_WHITESPACE","\n\n    ",506],["T_PUBLIC","public",508],["T_WHITESPACE"," ",508],["T_FUNCTION","function",508],["T_WHITESPACE"," ",508],["T_STRING","getData",508],"(",")",["T_WHITESPACE","\n    ",508],"{",["T_WHITESPACE","\n        ",509],["T_IF","if",510],["T_WHITESPACE"," ",510],"(",["T_VARIABLE","$this",510],["T_OBJECT_OPERATOR","->",510],["T_STRING","_data",510],["T_WHITESPACE"," ",510],["T_IS_IDENTICAL","===",510],["T_WHITESPACE"," ",510],["T_STRING","null",510],")",["T_WHITESPACE"," ",510],"{",["T_WHITESPACE","\n\n\n            ",510],["T_VARIABLE","$this",513],["T_OBJECT_OPERATOR","->",513],["T_STRING","_renderFilters",513],"(",")",["T_WHITESPACE","\n                 ",513],["T_OBJECT_OPERATOR","->",514],["T_STRING","_renderOrders",514],"(",")",["T_WHITESPACE","\n                 ",514],["T_OBJECT_OPERATOR","->",515],["T_STRING","_renderLimit",515],"(",")",";",["T_WHITESPACE","\n            ",515],["T_DOC_COMMENT","\/**\n             * Prepare select for execute\n             * @var string $query\n             *\/",516],["T_WHITESPACE","\n            ",519],["T_VARIABLE","$query",520],["T_WHITESPACE","       ",520],"=",["T_WHITESPACE"," ",520],["T_VARIABLE","$this",520],["T_OBJECT_OPERATOR","->",520],["T_STRING","_prepareSelect",520],"(",["T_VARIABLE","$this",520],["T_OBJECT_OPERATOR","->",520],["T_STRING","getSelect",520],"(",")",")",";",["T_WHITESPACE","\n            ",520],["T_VARIABLE","$this",521],["T_OBJECT_OPERATOR","->",521],["T_STRING","_data",521],["T_WHITESPACE"," ",521],"=",["T_WHITESPACE"," ",521],["T_VARIABLE","$this",521],["T_OBJECT_OPERATOR","->",521],["T_STRING","_fetchAll",521],"(",["T_VARIABLE","$query",521],",",["T_WHITESPACE"," ",521],["T_VARIABLE","$this",521],["T_OBJECT_OPERATOR","->",521],["T_STRING","_bindParams",521],")",";",["T_WHITESPACE","\n            ",521],["T_VARIABLE","$this",522],["T_OBJECT_OPERATOR","->",522],["T_STRING","_afterLoadData",522],"(",")",";",["T_WHITESPACE","\n        ",522],"}",["T_WHITESPACE","\n        ",523],["T_RETURN","return",524],["T_WHITESPACE"," ",524],["T_VARIABLE","$this",524],["T_OBJECT_OPERATOR","->",524],["T_STRING","_data",524],";",["T_WHITESPACE","\n    ",524],"}",["T_WHITESPACE","\n\n    ",525],["T_DOC_COMMENT","\/**\n     * Prepare select for load\n     *\n     * @return string\n     *\/",527],["T_WHITESPACE","\n    ",531],["T_PROTECTED","protected",532],["T_WHITESPACE"," ",532],["T_FUNCTION","function",532],["T_WHITESPACE"," ",532],["T_STRING","_prepareSelect",532],"(",["T_STRING","Varien_Db_Select",532],["T_WHITESPACE"," ",532],["T_VARIABLE","$select",532],")",["T_WHITESPACE","\n    ",532],"{",["T_WHITESPACE","\n        ",533],["T_VARIABLE","$helper",534],["T_WHITESPACE"," ",534],"=",["T_WHITESPACE"," ",534],["T_STRING","Mage",534],["T_DOUBLE_COLON","::",534],["T_STRING","getResourceHelper",534],"(",["T_CONSTANT_ENCAPSED_STRING","'core'",534],")",";",["T_WHITESPACE","\n\n        ",534],["T_VARIABLE","$unionParts",536],["T_WHITESPACE"," ",536],"=",["T_WHITESPACE"," ",536],["T_VARIABLE","$select",536],["T_OBJECT_OPERATOR","->",536],["T_STRING","getPart",536],"(",["T_STRING","Zend_Db_Select",536],["T_DOUBLE_COLON","::",536],["T_STRING","UNION",536],")",";",["T_WHITESPACE","\n        ",536],["T_IF","if",537],["T_WHITESPACE"," ",537],"(","!",["T_EMPTY","empty",537],"(",["T_VARIABLE","$unionParts",537],")",")",["T_WHITESPACE"," ",537],"{",["T_WHITESPACE","\n            ",537],["T_VARIABLE","$select",538],["T_WHITESPACE"," ",538],"=",["T_WHITESPACE"," ",538],["T_VARIABLE","$helper",538],["T_OBJECT_OPERATOR","->",538],["T_STRING","limitUnion",538],"(",["T_VARIABLE","$select",538],")",";",["T_WHITESPACE","\n        ",538],"}",["T_WHITESPACE","\n\n        ",539],["T_IF","if",541],["T_WHITESPACE"," ",541],"(",["T_VARIABLE","$this",541],["T_OBJECT_OPERATOR","->",541],["T_STRING","_useAnalyticFunction",541],")",["T_WHITESPACE"," ",541],"{",["T_WHITESPACE","\n            ",541],["T_RETURN","return",542],["T_WHITESPACE"," ",542],["T_VARIABLE","$helper",542],["T_OBJECT_OPERATOR","->",542],["T_STRING","getQueryUsingAnalyticFunction",542],"(",["T_VARIABLE","$select",542],")",";",["T_WHITESPACE","\n        ",542],"}",["T_WHITESPACE","\n\n        ",543],["T_RETURN","return",545],["T_WHITESPACE"," ",545],["T_STRING_CAST","(string)",545],["T_VARIABLE","$select",545],";",["T_WHITESPACE","\n    ",545],"}",["T_WHITESPACE","\n    ",546],["T_DOC_COMMENT","\/**\n     * Join table to collection select\n     *\n     * @param string $table\n     * @param string $cond\n     * @param string $cols\n     * @return Mage_Core_Model_Resource_Db_Collection_Abstract\n     *\/",547],["T_WHITESPACE","\n    ",554],["T_PUBLIC","public",555],["T_WHITESPACE"," ",555],["T_FUNCTION","function",555],["T_WHITESPACE"," ",555],["T_STRING","join",555],"(",["T_VARIABLE","$table",555],",",["T_WHITESPACE"," ",555],["T_VARIABLE","$cond",555],",",["T_WHITESPACE"," ",555],["T_VARIABLE","$cols",555],["T_WHITESPACE"," ",555],"=",["T_WHITESPACE"," ",555],["T_CONSTANT_ENCAPSED_STRING","'*'",555],")",["T_WHITESPACE","\n    ",555],"{",["T_WHITESPACE","\n        ",556],["T_IF","if",557],["T_WHITESPACE"," ",557],"(",["T_STRING","is_array",557],"(",["T_VARIABLE","$table",557],")",")",["T_WHITESPACE"," ",557],"{",["T_WHITESPACE","\n            ",557],["T_FOREACH","foreach",558],["T_WHITESPACE"," ",558],"(",["T_VARIABLE","$table",558],["T_WHITESPACE"," ",558],["T_AS","as",558],["T_WHITESPACE"," ",558],["T_VARIABLE","$k",558],["T_WHITESPACE"," ",558],["T_DOUBLE_ARROW","=>",558],["T_WHITESPACE"," ",558],["T_VARIABLE","$v",558],")",["T_WHITESPACE"," ",558],"{",["T_WHITESPACE","\n                ",558],["T_VARIABLE","$alias",559],["T_WHITESPACE"," ",559],"=",["T_WHITESPACE"," ",559],["T_VARIABLE","$k",559],";",["T_WHITESPACE","\n                ",559],["T_VARIABLE","$table",560],["T_WHITESPACE"," ",560],"=",["T_WHITESPACE"," ",560],["T_VARIABLE","$v",560],";",["T_WHITESPACE","\n                ",560],["T_BREAK","break",561],";",["T_WHITESPACE","\n            ",561],"}",["T_WHITESPACE","\n        ",562],"}",["T_WHITESPACE"," ",563],["T_ELSE","else",563],["T_WHITESPACE"," ",563],"{",["T_WHITESPACE","\n            ",563],["T_VARIABLE","$alias",564],["T_WHITESPACE"," ",564],"=",["T_WHITESPACE"," ",564],["T_VARIABLE","$table",564],";",["T_WHITESPACE","\n        ",564],"}",["T_WHITESPACE","\n\n        ",565],["T_IF","if",567],["T_WHITESPACE"," ",567],"(","!",["T_ISSET","isset",567],"(",["T_VARIABLE","$this",567],["T_OBJECT_OPERATOR","->",567],["T_STRING","_joinedTables",567],"[",["T_VARIABLE","$alias",567],"]",")",")",["T_WHITESPACE"," ",567],"{",["T_WHITESPACE","\n            ",567],["T_VARIABLE","$this",568],["T_OBJECT_OPERATOR","->",568],["T_STRING","getSelect",568],"(",")",["T_OBJECT_OPERATOR","->",568],["T_STRING","join",568],"(",["T_WHITESPACE","\n                ",568],["T_ARRAY","array",569],"(",["T_VARIABLE","$alias",569],["T_WHITESPACE"," ",569],["T_DOUBLE_ARROW","=>",569],["T_WHITESPACE"," ",569],["T_VARIABLE","$this",569],["T_OBJECT_OPERATOR","->",569],["T_STRING","getTable",569],"(",["T_VARIABLE","$table",569],")",")",",",["T_WHITESPACE","\n                ",569],["T_VARIABLE","$cond",570],",",["T_WHITESPACE","\n                ",570],["T_VARIABLE","$cols",571],["T_WHITESPACE","\n            ",571],")",";",["T_WHITESPACE","\n            ",572],["T_VARIABLE","$this",573],["T_OBJECT_OPERATOR","->",573],["T_STRING","_joinedTables",573],"[",["T_VARIABLE","$alias",573],"]",["T_WHITESPACE"," ",573],"=",["T_WHITESPACE"," ",573],["T_STRING","true",573],";",["T_WHITESPACE","\n        ",573],"}",["T_WHITESPACE","\n        ",574],["T_RETURN","return",575],["T_WHITESPACE"," ",575],["T_VARIABLE","$this",575],";",["T_WHITESPACE","\n    ",575],"}",["T_WHITESPACE","\n\n    ",576],["T_DOC_COMMENT","\/**\n     * Redeclare before load method for adding event\n     *\n     * @return Mage_Core_Model_Resource_Db_Collection_Abstract\n     *\/",578],["T_WHITESPACE","\n    ",582],["T_PROTECTED","protected",583],["T_WHITESPACE"," ",583],["T_FUNCTION","function",583],["T_WHITESPACE"," ",583],["T_STRING","_beforeLoad",583],"(",")",["T_WHITESPACE","\n    ",583],"{",["T_WHITESPACE","\n        ",584],["T_STRING","parent",585],["T_DOUBLE_COLON","::",585],["T_STRING","_beforeLoad",585],"(",")",";",["T_WHITESPACE","\n        ",585],["T_STRING","Mage",586],["T_DOUBLE_COLON","::",586],["T_STRING","dispatchEvent",586],"(",["T_CONSTANT_ENCAPSED_STRING","'core_collection_abstract_load_before'",586],",",["T_WHITESPACE"," ",586],["T_ARRAY","array",586],"(",["T_CONSTANT_ENCAPSED_STRING","'collection'",586],["T_WHITESPACE"," ",586],["T_DOUBLE_ARROW","=>",586],["T_WHITESPACE"," ",586],["T_VARIABLE","$this",586],")",")",";",["T_WHITESPACE","\n        ",586],["T_IF","if",587],["T_WHITESPACE"," ",587],"(",["T_VARIABLE","$this",587],["T_OBJECT_OPERATOR","->",587],["T_STRING","_eventPrefix",587],["T_WHITESPACE"," ",587],["T_BOOLEAN_AND","&&",587],["T_WHITESPACE"," ",587],["T_VARIABLE","$this",587],["T_OBJECT_OPERATOR","->",587],["T_STRING","_eventObject",587],")",["T_WHITESPACE"," ",587],"{",["T_WHITESPACE","\n            ",587],["T_STRING","Mage",588],["T_DOUBLE_COLON","::",588],["T_STRING","dispatchEvent",588],"(",["T_VARIABLE","$this",588],["T_OBJECT_OPERATOR","->",588],["T_STRING","_eventPrefix",588],".",["T_CONSTANT_ENCAPSED_STRING","'_load_before'",588],",",["T_WHITESPACE"," ",588],["T_ARRAY","array",588],"(",["T_WHITESPACE","\n                ",588],["T_VARIABLE","$this",589],["T_OBJECT_OPERATOR","->",589],["T_STRING","_eventObject",589],["T_WHITESPACE"," ",589],["T_DOUBLE_ARROW","=>",589],["T_WHITESPACE"," ",589],["T_VARIABLE","$this",589],["T_WHITESPACE","\n            ",589],")",")",";",["T_WHITESPACE","\n        ",590],"}",["T_WHITESPACE","\n        ",591],["T_RETURN","return",592],["T_WHITESPACE"," ",592],["T_VARIABLE","$this",592],";",["T_WHITESPACE","\n    ",592],"}",["T_WHITESPACE","\n\n    ",593],["T_DOC_COMMENT","\/**\n     * Set reset items data changed flag\n     *\n     * @param boolean $flag\n     * @return Mage_Core_Model_Resource_Db_Collection_Abstract\n     *\/",595],["T_WHITESPACE","\n    ",600],["T_PUBLIC","public",601],["T_WHITESPACE"," ",601],["T_FUNCTION","function",601],["T_WHITESPACE"," ",601],["T_STRING","setResetItemsDataChanged",601],"(",["T_VARIABLE","$flag",601],")",["T_WHITESPACE","\n    ",601],"{",["T_WHITESPACE","\n        ",602],["T_VARIABLE","$this",603],["T_OBJECT_OPERATOR","->",603],["T_STRING","_resetItemsDataChanged",603],["T_WHITESPACE"," ",603],"=",["T_WHITESPACE"," ",603],["T_BOOL_CAST","(bool)",603],["T_VARIABLE","$flag",603],";",["T_WHITESPACE","\n        ",603],["T_RETURN","return",604],["T_WHITESPACE"," ",604],["T_VARIABLE","$this",604],";",["T_WHITESPACE","\n    ",604],"}",["T_WHITESPACE","\n\n    ",605],["T_DOC_COMMENT","\/**\n     * Set flag data has changed to all collection items\n     *\n     * @return Mage_Core_Model_Mysql4_Collection_Abstract\n     *\/",607],["T_WHITESPACE","\n    ",611],["T_PUBLIC","public",612],["T_WHITESPACE"," ",612],["T_FUNCTION","function",612],["T_WHITESPACE"," ",612],["T_STRING","resetItemsDataChanged",612],"(",")",["T_WHITESPACE","\n    ",612],"{",["T_WHITESPACE","\n        ",613],["T_FOREACH","foreach",614],["T_WHITESPACE"," ",614],"(",["T_VARIABLE","$this",614],["T_OBJECT_OPERATOR","->",614],["T_STRING","_items",614],["T_WHITESPACE"," ",614],["T_AS","as",614],["T_WHITESPACE"," ",614],["T_VARIABLE","$item",614],")",["T_WHITESPACE"," ",614],"{",["T_WHITESPACE","\n            ",614],["T_VARIABLE","$item",615],["T_OBJECT_OPERATOR","->",615],["T_STRING","setDataChanges",615],"(",["T_STRING","false",615],")",";",["T_WHITESPACE","\n        ",615],"}",["T_WHITESPACE","\n\n        ",616],["T_RETURN","return",618],["T_WHITESPACE"," ",618],["T_VARIABLE","$this",618],";",["T_WHITESPACE","\n    ",618],"}",["T_WHITESPACE","\n\n    ",619],["T_DOC_COMMENT","\/**\n     * Redeclare after load method for specifying collection items original data\n     *\n     * @return Mage_Core_Model_Resource_Db_Collection_Abstract\n     *\/",621],["T_WHITESPACE","\n    ",625],["T_PROTECTED","protected",626],["T_WHITESPACE"," ",626],["T_FUNCTION","function",626],["T_WHITESPACE"," ",626],["T_STRING","_afterLoad",626],"(",")",["T_WHITESPACE","\n    ",626],"{",["T_WHITESPACE","\n        ",627],["T_STRING","parent",628],["T_DOUBLE_COLON","::",628],["T_STRING","_afterLoad",628],"(",")",";",["T_WHITESPACE","\n        ",628],["T_FOREACH","foreach",629],["T_WHITESPACE"," ",629],"(",["T_VARIABLE","$this",629],["T_OBJECT_OPERATOR","->",629],["T_STRING","_items",629],["T_WHITESPACE"," ",629],["T_AS","as",629],["T_WHITESPACE"," ",629],["T_VARIABLE","$item",629],")",["T_WHITESPACE"," ",629],"{",["T_WHITESPACE","\n            ",629],["T_VARIABLE","$item",630],["T_OBJECT_OPERATOR","->",630],["T_STRING","setOrigData",630],"(",")",";",["T_WHITESPACE","\n            ",630],["T_IF","if",631],["T_WHITESPACE"," ",631],"(",["T_VARIABLE","$this",631],["T_OBJECT_OPERATOR","->",631],["T_STRING","_resetItemsDataChanged",631],")",["T_WHITESPACE"," ",631],"{",["T_WHITESPACE","\n                ",631],["T_VARIABLE","$item",632],["T_OBJECT_OPERATOR","->",632],["T_STRING","setDataChanges",632],"(",["T_STRING","false",632],")",";",["T_WHITESPACE","\n            ",632],"}",["T_WHITESPACE","\n        ",633],"}",["T_WHITESPACE","\n        ",634],["T_STRING","Mage",635],["T_DOUBLE_COLON","::",635],["T_STRING","dispatchEvent",635],"(",["T_CONSTANT_ENCAPSED_STRING","'core_collection_abstract_load_after'",635],",",["T_WHITESPACE"," ",635],["T_ARRAY","array",635],"(",["T_CONSTANT_ENCAPSED_STRING","'collection'",635],["T_WHITESPACE"," ",635],["T_DOUBLE_ARROW","=>",635],["T_WHITESPACE"," ",635],["T_VARIABLE","$this",635],")",")",";",["T_WHITESPACE","\n        ",635],["T_IF","if",636],["T_WHITESPACE"," ",636],"(",["T_VARIABLE","$this",636],["T_OBJECT_OPERATOR","->",636],["T_STRING","_eventPrefix",636],["T_WHITESPACE"," ",636],["T_BOOLEAN_AND","&&",636],["T_WHITESPACE"," ",636],["T_VARIABLE","$this",636],["T_OBJECT_OPERATOR","->",636],["T_STRING","_eventObject",636],")",["T_WHITESPACE"," ",636],"{",["T_WHITESPACE","\n            ",636],["T_STRING","Mage",637],["T_DOUBLE_COLON","::",637],["T_STRING","dispatchEvent",637],"(",["T_VARIABLE","$this",637],["T_OBJECT_OPERATOR","->",637],["T_STRING","_eventPrefix",637],".",["T_CONSTANT_ENCAPSED_STRING","'_load_after'",637],",",["T_WHITESPACE"," ",637],["T_ARRAY","array",637],"(",["T_WHITESPACE","\n                ",637],["T_VARIABLE","$this",638],["T_OBJECT_OPERATOR","->",638],["T_STRING","_eventObject",638],["T_WHITESPACE"," ",638],["T_DOUBLE_ARROW","=>",638],["T_WHITESPACE"," ",638],["T_VARIABLE","$this",638],["T_WHITESPACE","\n            ",638],")",")",";",["T_WHITESPACE","\n        ",639],"}",["T_WHITESPACE","\n        ",640],["T_RETURN","return",641],["T_WHITESPACE"," ",641],["T_VARIABLE","$this",641],";",["T_WHITESPACE","\n    ",641],"}",["T_WHITESPACE","\n\n    ",642],["T_DOC_COMMENT","\/**\n     * Save all the entities in the collection\n     *\n     * @return Mage_Core_Model_Resource_Db_Collection_Abstract\n     *\/",644],["T_WHITESPACE","\n    ",648],["T_PUBLIC","public",649],["T_WHITESPACE"," ",649],["T_FUNCTION","function",649],["T_WHITESPACE"," ",649],["T_STRING","save",649],"(",")",["T_WHITESPACE","\n    ",649],"{",["T_WHITESPACE","\n        ",650],["T_FOREACH","foreach",651],["T_WHITESPACE"," ",651],"(",["T_VARIABLE","$this",651],["T_OBJECT_OPERATOR","->",651],["T_STRING","getItems",651],"(",")",["T_WHITESPACE"," ",651],["T_AS","as",651],["T_WHITESPACE"," ",651],["T_VARIABLE","$item",651],")",["T_WHITESPACE"," ",651],"{",["T_WHITESPACE","\n            ",651],["T_VARIABLE","$item",652],["T_OBJECT_OPERATOR","->",652],["T_STRING","save",652],"(",")",";",["T_WHITESPACE","\n        ",652],"}",["T_WHITESPACE","\n        ",653],["T_RETURN","return",654],["T_WHITESPACE"," ",654],["T_VARIABLE","$this",654],";",["T_WHITESPACE","\n    ",654],"}",["T_WHITESPACE","\n\n    ",655],["T_DOC_COMMENT","\/**\n     * Check if cache can be used for collection\n     *\n     * @return bool\n     *\/",657],["T_WHITESPACE","\n    ",661],["T_PROTECTED","protected",662],["T_WHITESPACE"," ",662],["T_FUNCTION","function",662],["T_WHITESPACE"," ",662],["T_STRING","_canUseCache",662],"(",")",["T_WHITESPACE","\n    ",662],"{",["T_WHITESPACE","\n        ",663],["T_RETURN","return",664],["T_WHITESPACE"," ",664],["T_STRING","Mage",664],["T_DOUBLE_COLON","::",664],["T_STRING","app",664],"(",")",["T_OBJECT_OPERATOR","->",664],["T_STRING","useCache",664],"(",["T_CONSTANT_ENCAPSED_STRING","'collections'",664],")",["T_WHITESPACE"," ",664],["T_BOOLEAN_AND","&&",664],["T_WHITESPACE"," ",664],"!",["T_EMPTY","empty",664],"(",["T_VARIABLE","$this",664],["T_OBJECT_OPERATOR","->",664],["T_STRING","_cacheConf",664],")",";",["T_WHITESPACE","\n    ",664],"}",["T_WHITESPACE","\n\n    ",665],["T_DOC_COMMENT","\/**\n     * Load cached data for select\n     *\n     * @param Zend_Db_Select $select\n     * @return string | false\n     *\/",667],["T_WHITESPACE","\n    ",672],["T_PROTECTED","protected",673],["T_WHITESPACE"," ",673],["T_FUNCTION","function",673],["T_WHITESPACE"," ",673],["T_STRING","_loadCache",673],"(",["T_VARIABLE","$select",673],")",["T_WHITESPACE","\n    ",673],"{",["T_WHITESPACE","\n        ",674],["T_VARIABLE","$data",675],["T_WHITESPACE"," ",675],"=",["T_WHITESPACE"," ",675],["T_STRING","Mage",675],["T_DOUBLE_COLON","::",675],["T_STRING","app",675],"(",")",["T_OBJECT_OPERATOR","->",675],["T_STRING","loadCache",675],"(",["T_VARIABLE","$this",675],["T_OBJECT_OPERATOR","->",675],["T_STRING","_getSelectCacheId",675],"(",["T_VARIABLE","$select",675],")",")",";",["T_WHITESPACE","\n        ",675],["T_RETURN","return",676],["T_WHITESPACE"," ",676],["T_VARIABLE","$data",676],";",["T_WHITESPACE","\n    ",676],"}",["T_WHITESPACE","\n\n    ",677],["T_DOC_COMMENT","\/**\n     * Save collection data to cache\n     *\n     * @param array $data\n     * @param Zend_Db_Select $select\n     * @return Mage_Core_Model_Resource_Db_Collection_Abstract\n     *\/",679],["T_WHITESPACE","\n    ",685],["T_PROTECTED","protected",686],["T_WHITESPACE"," ",686],["T_FUNCTION","function",686],["T_WHITESPACE"," ",686],["T_STRING","_saveCache",686],"(",["T_VARIABLE","$data",686],",",["T_WHITESPACE"," ",686],["T_VARIABLE","$select",686],")",["T_WHITESPACE","\n    ",686],"{",["T_WHITESPACE","\n        ",687],["T_STRING","Mage",688],["T_DOUBLE_COLON","::",688],["T_STRING","app",688],"(",")",["T_OBJECT_OPERATOR","->",688],["T_STRING","saveCache",688],"(",["T_STRING","serialize",688],"(",["T_VARIABLE","$data",688],")",",",["T_WHITESPACE"," ",688],["T_VARIABLE","$this",688],["T_OBJECT_OPERATOR","->",688],["T_STRING","_getSelectCacheId",688],"(",["T_VARIABLE","$select",688],")",",",["T_WHITESPACE"," ",688],["T_VARIABLE","$this",688],["T_OBJECT_OPERATOR","->",688],["T_STRING","_getCacheTags",688],"(",")",")",";",["T_WHITESPACE","\n        ",688],["T_RETURN","return",689],["T_WHITESPACE"," ",689],["T_VARIABLE","$this",689],";",["T_WHITESPACE","\n    ",689],"}",["T_WHITESPACE","\n\n    ",690],["T_DOC_COMMENT","\/**\n     * Redeclared for processing cache tags throw application object\n     *\n     * @return array\n     *\/",692],["T_WHITESPACE","\n    ",696],["T_PROTECTED","protected",697],["T_WHITESPACE"," ",697],["T_FUNCTION","function",697],["T_WHITESPACE"," ",697],["T_STRING","_getCacheTags",697],"(",")",["T_WHITESPACE","\n    ",697],"{",["T_WHITESPACE","\n        ",698],["T_VARIABLE","$tags",699],["T_WHITESPACE"," ",699],"=",["T_WHITESPACE"," ",699],["T_STRING","parent",699],["T_DOUBLE_COLON","::",699],["T_STRING","_getCacheTags",699],"(",")",";",["T_WHITESPACE","\n        ",699],["T_VARIABLE","$tags",700],"[","]",["T_WHITESPACE"," ",700],"=",["T_WHITESPACE"," ",700],["T_STRING","Mage_Core_Model_App",700],["T_DOUBLE_COLON","::",700],["T_STRING","CACHE_TAG",700],";",["T_WHITESPACE","\n        ",700],["T_VARIABLE","$tags",701],"[","]",["T_WHITESPACE"," ",701],"=",["T_WHITESPACE"," ",701],["T_STRING","self",701],["T_DOUBLE_COLON","::",701],["T_STRING","CACHE_TAG",701],";",["T_WHITESPACE","\n        ",701],["T_RETURN","return",702],["T_WHITESPACE"," ",702],["T_VARIABLE","$tags",702],";",["T_WHITESPACE","\n    ",702],"}",["T_WHITESPACE","\n\n    ",703],["T_DOC_COMMENT","\/**\n     * Format Date to internal database date format\n     *\n     * @param int|string|Zend_Date $date\n     * @param boolean $includeTime\n     * @return string\n     *\/",705],["T_WHITESPACE","\n    ",711],["T_PUBLIC","public",712],["T_WHITESPACE"," ",712],["T_FUNCTION","function",712],["T_WHITESPACE"," ",712],["T_STRING","formatDate",712],"(",["T_VARIABLE","$date",712],",",["T_WHITESPACE"," ",712],["T_VARIABLE","$includeTime",712],["T_WHITESPACE"," ",712],"=",["T_WHITESPACE"," ",712],["T_STRING","true",712],")",["T_WHITESPACE","\n    ",712],"{",["T_WHITESPACE","\n        ",713],["T_RETURN","return",714],["T_WHITESPACE"," ",714],["T_STRING","Varien_Date",714],["T_DOUBLE_COLON","::",714],["T_STRING","formatDate",714],"(",["T_VARIABLE","$date",714],",",["T_WHITESPACE"," ",714],["T_VARIABLE","$includeTime",714],")",";",["T_WHITESPACE","\n    ",714],"}",["T_WHITESPACE","\n\n\n\n",715],"}",["T_WHITESPACE","\n",719]]
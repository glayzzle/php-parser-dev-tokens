[["T_OPEN_TAG","<?php\n",1],["T_DOC_COMMENT","\/**\n * Magento\n *\n * NOTICE OF LICENSE\n *\n * This source file is subject to the Open Software License (OSL 3.0)\n * that is bundled with this package in the file LICENSE.txt.\n * It is also available through the world-wide-web at this URL:\n * http:\/\/opensource.org\/licenses\/osl-3.0.php\n * If you did not receive a copy of the license and are unable to\n * obtain it through the world-wide-web, please send an email\n * to license@magento.com so we can send you a copy immediately.\n *\n * DISCLAIMER\n *\n * Do not edit or add to this file if you wish to upgrade Magento to newer\n * versions in the future. If you wish to customize Magento for your\n * needs please refer to http:\/\/www.magento.com for more information.\n *\n * @category    Mage\n * @package     Mage_Core\n * @copyright  Copyright (c) 2006-2016 X.commerce, Inc. and affiliates (http:\/\/www.magento.com)\n * @license    http:\/\/opensource.org\/licenses\/osl-3.0.php  Open Software License (OSL 3.0)\n *\/",2],["T_WHITESPACE","\n\n\n",25],["T_DOC_COMMENT","\/**\n * Core Resource Resource Model\n *\n * @category    Mage\n * @package     Mage_Core\n * @author      Magento Core Team <core@magentocommerce.com>\n *\/",28],["T_WHITESPACE","\n",34],["T_CLASS","class",35],["T_WHITESPACE"," ",35],["T_STRING","Mage_Core_Model_Resource_Config",35],["T_WHITESPACE"," ",35],["T_EXTENDS","extends",35],["T_WHITESPACE"," ",35],["T_STRING","Mage_Core_Model_Resource_Db_Abstract",35],["T_WHITESPACE","\n",35],"{",["T_WHITESPACE","\n    ",36],["T_DOC_COMMENT","\/**\n     * Define main table\n     *\n     *\/",37],["T_WHITESPACE","\n    ",40],["T_PROTECTED","protected",41],["T_WHITESPACE"," ",41],["T_FUNCTION","function",41],["T_WHITESPACE"," ",41],["T_STRING","_construct",41],"(",")",["T_WHITESPACE","\n    ",41],"{",["T_WHITESPACE","\n        ",42],["T_VARIABLE","$this",43],["T_OBJECT_OPERATOR","->",43],["T_STRING","_init",43],"(",["T_CONSTANT_ENCAPSED_STRING","'core\/config_data'",43],",",["T_WHITESPACE"," ",43],["T_CONSTANT_ENCAPSED_STRING","'config_id'",43],")",";",["T_WHITESPACE","\n    ",43],"}",["T_WHITESPACE","\n\n    ",44],["T_DOC_COMMENT","\/**\n     * Load configuration values into xml config object\n     *\n     * @param Mage_Core_Model_Config $xmlConfig\n     * @param string $condition\n     * @return Mage_Core_Model_Resource_Config\n     *\/",46],["T_WHITESPACE","\n    ",52],["T_PUBLIC","public",53],["T_WHITESPACE"," ",53],["T_FUNCTION","function",53],["T_WHITESPACE"," ",53],["T_STRING","loadToXml",53],"(",["T_STRING","Mage_Core_Model_Config",53],["T_WHITESPACE"," ",53],["T_VARIABLE","$xmlConfig",53],",",["T_WHITESPACE"," ",53],["T_VARIABLE","$condition",53],["T_WHITESPACE"," ",53],"=",["T_WHITESPACE"," ",53],["T_STRING","null",53],")",["T_WHITESPACE","\n    ",53],"{",["T_WHITESPACE","\n        ",54],["T_VARIABLE","$read",55],["T_WHITESPACE"," ",55],"=",["T_WHITESPACE"," ",55],["T_VARIABLE","$this",55],["T_OBJECT_OPERATOR","->",55],["T_STRING","_getReadAdapter",55],"(",")",";",["T_WHITESPACE","\n        ",55],["T_IF","if",56],["T_WHITESPACE"," ",56],"(","!",["T_VARIABLE","$read",56],")",["T_WHITESPACE"," ",56],"{",["T_WHITESPACE","\n            ",56],["T_RETURN","return",57],["T_WHITESPACE"," ",57],["T_VARIABLE","$this",57],";",["T_WHITESPACE","\n        ",57],"}",["T_WHITESPACE","\n\n        ",58],["T_VARIABLE","$websites",60],["T_WHITESPACE"," ",60],"=",["T_WHITESPACE"," ",60],["T_ARRAY","array",60],"(",")",";",["T_WHITESPACE","\n        ",60],["T_VARIABLE","$select",61],["T_WHITESPACE"," ",61],"=",["T_WHITESPACE"," ",61],["T_VARIABLE","$read",61],["T_OBJECT_OPERATOR","->",61],["T_STRING","select",61],"(",")",["T_WHITESPACE","\n            ",61],["T_OBJECT_OPERATOR","->",62],["T_STRING","from",62],"(",["T_VARIABLE","$this",62],["T_OBJECT_OPERATOR","->",62],["T_STRING","getTable",62],"(",["T_CONSTANT_ENCAPSED_STRING","'core\/website'",62],")",",",["T_WHITESPACE"," ",62],["T_ARRAY","array",62],"(",["T_CONSTANT_ENCAPSED_STRING","'website_id'",62],",",["T_WHITESPACE"," ",62],["T_CONSTANT_ENCAPSED_STRING","'code'",62],",",["T_WHITESPACE"," ",62],["T_CONSTANT_ENCAPSED_STRING","'name'",62],")",")",";",["T_WHITESPACE","\n        ",62],["T_VARIABLE","$rowset",63],["T_WHITESPACE"," ",63],"=",["T_WHITESPACE"," ",63],["T_VARIABLE","$read",63],["T_OBJECT_OPERATOR","->",63],["T_STRING","fetchAssoc",63],"(",["T_VARIABLE","$select",63],")",";",["T_WHITESPACE","\n        ",63],["T_FOREACH","foreach",64],["T_WHITESPACE"," ",64],"(",["T_VARIABLE","$rowset",64],["T_WHITESPACE"," ",64],["T_AS","as",64],["T_WHITESPACE"," ",64],["T_VARIABLE","$w",64],")",["T_WHITESPACE"," ",64],"{",["T_WHITESPACE","\n            ",64],["T_VARIABLE","$xmlConfig",65],["T_OBJECT_OPERATOR","->",65],["T_STRING","setNode",65],"(",["T_CONSTANT_ENCAPSED_STRING","'websites\/'",65],".",["T_VARIABLE","$w",65],"[",["T_CONSTANT_ENCAPSED_STRING","'code'",65],"]",".",["T_CONSTANT_ENCAPSED_STRING","'\/system\/website\/id'",65],",",["T_WHITESPACE"," ",65],["T_VARIABLE","$w",65],"[",["T_CONSTANT_ENCAPSED_STRING","'website_id'",65],"]",")",";",["T_WHITESPACE","\n            ",65],["T_VARIABLE","$xmlConfig",66],["T_OBJECT_OPERATOR","->",66],["T_STRING","setNode",66],"(",["T_CONSTANT_ENCAPSED_STRING","'websites\/'",66],".",["T_VARIABLE","$w",66],"[",["T_CONSTANT_ENCAPSED_STRING","'code'",66],"]",".",["T_CONSTANT_ENCAPSED_STRING","'\/system\/website\/name'",66],",",["T_WHITESPACE"," ",66],["T_VARIABLE","$w",66],"[",["T_CONSTANT_ENCAPSED_STRING","'name'",66],"]",")",";",["T_WHITESPACE","\n            ",66],["T_VARIABLE","$websites",67],"[",["T_VARIABLE","$w",67],"[",["T_CONSTANT_ENCAPSED_STRING","'website_id'",67],"]","]",["T_WHITESPACE"," ",67],"=",["T_WHITESPACE"," ",67],["T_ARRAY","array",67],"(",["T_CONSTANT_ENCAPSED_STRING","'code'",67],["T_WHITESPACE"," ",67],["T_DOUBLE_ARROW","=>",67],["T_WHITESPACE"," ",67],["T_VARIABLE","$w",67],"[",["T_CONSTANT_ENCAPSED_STRING","'code'",67],"]",")",";",["T_WHITESPACE","\n        ",67],"}",["T_WHITESPACE","\n\n        ",68],["T_VARIABLE","$stores",70],["T_WHITESPACE"," ",70],"=",["T_WHITESPACE"," ",70],["T_ARRAY","array",70],"(",")",";",["T_WHITESPACE","\n        ",70],["T_VARIABLE","$select",71],["T_WHITESPACE"," ",71],"=",["T_WHITESPACE"," ",71],["T_VARIABLE","$read",71],["T_OBJECT_OPERATOR","->",71],["T_STRING","select",71],"(",")",["T_WHITESPACE","\n            ",71],["T_OBJECT_OPERATOR","->",72],["T_STRING","from",72],"(",["T_VARIABLE","$this",72],["T_OBJECT_OPERATOR","->",72],["T_STRING","getTable",72],"(",["T_CONSTANT_ENCAPSED_STRING","'core\/store'",72],")",",",["T_WHITESPACE"," ",72],["T_ARRAY","array",72],"(",["T_CONSTANT_ENCAPSED_STRING","'store_id'",72],",",["T_WHITESPACE"," ",72],["T_CONSTANT_ENCAPSED_STRING","'code'",72],",",["T_WHITESPACE"," ",72],["T_CONSTANT_ENCAPSED_STRING","'name'",72],",",["T_WHITESPACE"," ",72],["T_CONSTANT_ENCAPSED_STRING","'website_id'",72],")",")",["T_WHITESPACE","\n            ",72],["T_OBJECT_OPERATOR","->",73],["T_STRING","order",73],"(",["T_CONSTANT_ENCAPSED_STRING","'sort_order '",73],["T_WHITESPACE"," ",73],".",["T_WHITESPACE"," ",73],["T_STRING","Varien_Db_Select",73],["T_DOUBLE_COLON","::",73],["T_STRING","SQL_ASC",73],")",";",["T_WHITESPACE","\n        ",73],["T_VARIABLE","$rowset",74],["T_WHITESPACE"," ",74],"=",["T_WHITESPACE"," ",74],["T_VARIABLE","$read",74],["T_OBJECT_OPERATOR","->",74],["T_STRING","fetchAssoc",74],"(",["T_VARIABLE","$select",74],")",";",["T_WHITESPACE","\n        ",74],["T_FOREACH","foreach",75],["T_WHITESPACE"," ",75],"(",["T_VARIABLE","$rowset",75],["T_WHITESPACE"," ",75],["T_AS","as",75],["T_WHITESPACE"," ",75],["T_VARIABLE","$s",75],")",["T_WHITESPACE"," ",75],"{",["T_WHITESPACE","\n            ",75],["T_IF","if",76],["T_WHITESPACE"," ",76],"(","!",["T_ISSET","isset",76],"(",["T_VARIABLE","$websites",76],"[",["T_VARIABLE","$s",76],"[",["T_CONSTANT_ENCAPSED_STRING","'website_id'",76],"]","]",")",")",["T_WHITESPACE"," ",76],"{",["T_WHITESPACE","\n                ",76],["T_CONTINUE","continue",77],";",["T_WHITESPACE","\n            ",77],"}",["T_WHITESPACE","\n            ",78],["T_VARIABLE","$xmlConfig",79],["T_OBJECT_OPERATOR","->",79],["T_STRING","setNode",79],"(",["T_CONSTANT_ENCAPSED_STRING","'stores\/'",79],".",["T_VARIABLE","$s",79],"[",["T_CONSTANT_ENCAPSED_STRING","'code'",79],"]",".",["T_CONSTANT_ENCAPSED_STRING","'\/system\/store\/id'",79],",",["T_WHITESPACE"," ",79],["T_VARIABLE","$s",79],"[",["T_CONSTANT_ENCAPSED_STRING","'store_id'",79],"]",")",";",["T_WHITESPACE","\n            ",79],["T_VARIABLE","$xmlConfig",80],["T_OBJECT_OPERATOR","->",80],["T_STRING","setNode",80],"(",["T_CONSTANT_ENCAPSED_STRING","'stores\/'",80],".",["T_VARIABLE","$s",80],"[",["T_CONSTANT_ENCAPSED_STRING","'code'",80],"]",".",["T_CONSTANT_ENCAPSED_STRING","'\/system\/store\/name'",80],",",["T_WHITESPACE"," ",80],["T_VARIABLE","$s",80],"[",["T_CONSTANT_ENCAPSED_STRING","'name'",80],"]",")",";",["T_WHITESPACE","\n            ",80],["T_VARIABLE","$xmlConfig",81],["T_OBJECT_OPERATOR","->",81],["T_STRING","setNode",81],"(",["T_CONSTANT_ENCAPSED_STRING","'stores\/'",81],".",["T_VARIABLE","$s",81],"[",["T_CONSTANT_ENCAPSED_STRING","'code'",81],"]",".",["T_CONSTANT_ENCAPSED_STRING","'\/system\/website\/id'",81],",",["T_WHITESPACE"," ",81],["T_VARIABLE","$s",81],"[",["T_CONSTANT_ENCAPSED_STRING","'website_id'",81],"]",")",";",["T_WHITESPACE","\n            ",81],["T_VARIABLE","$xmlConfig",82],["T_OBJECT_OPERATOR","->",82],["T_STRING","setNode",82],"(",["T_CONSTANT_ENCAPSED_STRING","'websites\/'",82],".",["T_VARIABLE","$websites",82],"[",["T_VARIABLE","$s",82],"[",["T_CONSTANT_ENCAPSED_STRING","'website_id'",82],"]","]","[",["T_CONSTANT_ENCAPSED_STRING","'code'",82],"]",".",["T_CONSTANT_ENCAPSED_STRING","'\/system\/stores\/'",82],".",["T_VARIABLE","$s",82],"[",["T_CONSTANT_ENCAPSED_STRING","'code'",82],"]",",",["T_WHITESPACE"," ",82],["T_VARIABLE","$s",82],"[",["T_CONSTANT_ENCAPSED_STRING","'store_id'",82],"]",")",";",["T_WHITESPACE","\n            ",82],["T_VARIABLE","$stores",83],"[",["T_VARIABLE","$s",83],"[",["T_CONSTANT_ENCAPSED_STRING","'store_id'",83],"]","]",["T_WHITESPACE"," ",83],"=",["T_WHITESPACE"," ",83],["T_ARRAY","array",83],"(",["T_CONSTANT_ENCAPSED_STRING","'code'",83],["T_DOUBLE_ARROW","=>",83],["T_VARIABLE","$s",83],"[",["T_CONSTANT_ENCAPSED_STRING","'code'",83],"]",")",";",["T_WHITESPACE","\n            ",83],["T_VARIABLE","$websites",84],"[",["T_VARIABLE","$s",84],"[",["T_CONSTANT_ENCAPSED_STRING","'website_id'",84],"]","]","[",["T_CONSTANT_ENCAPSED_STRING","'stores'",84],"]","[",["T_VARIABLE","$s",84],"[",["T_CONSTANT_ENCAPSED_STRING","'store_id'",84],"]","]",["T_WHITESPACE"," ",84],"=",["T_WHITESPACE"," ",84],["T_VARIABLE","$s",84],"[",["T_CONSTANT_ENCAPSED_STRING","'code'",84],"]",";",["T_WHITESPACE","\n        ",84],"}",["T_WHITESPACE","\n\n        ",85],["T_VARIABLE","$substFrom",87],["T_WHITESPACE"," ",87],"=",["T_WHITESPACE"," ",87],["T_ARRAY","array",87],"(",")",";",["T_WHITESPACE","\n        ",87],["T_VARIABLE","$substTo",88],["T_WHITESPACE","   ",88],"=",["T_WHITESPACE"," ",88],["T_ARRAY","array",88],"(",")",";",["T_WHITESPACE","\n\n        ",88],["T_COMMENT","\/\/ load all configuration records from database, which are not inherited\n",90],["T_WHITESPACE","        ",91],["T_VARIABLE","$select",91],["T_WHITESPACE"," ",91],"=",["T_WHITESPACE"," ",91],["T_VARIABLE","$read",91],["T_OBJECT_OPERATOR","->",91],["T_STRING","select",91],"(",")",["T_WHITESPACE","\n            ",91],["T_OBJECT_OPERATOR","->",92],["T_STRING","from",92],"(",["T_VARIABLE","$this",92],["T_OBJECT_OPERATOR","->",92],["T_STRING","getMainTable",92],"(",")",",",["T_WHITESPACE"," ",92],["T_ARRAY","array",92],"(",["T_CONSTANT_ENCAPSED_STRING","'scope'",92],",",["T_WHITESPACE"," ",92],["T_CONSTANT_ENCAPSED_STRING","'scope_id'",92],",",["T_WHITESPACE"," ",92],["T_CONSTANT_ENCAPSED_STRING","'path'",92],",",["T_WHITESPACE"," ",92],["T_CONSTANT_ENCAPSED_STRING","'value'",92],")",")",";",["T_WHITESPACE","\n        ",92],["T_IF","if",93],["T_WHITESPACE"," ",93],"(","!",["T_STRING","is_null",93],"(",["T_VARIABLE","$condition",93],")",")",["T_WHITESPACE"," ",93],"{",["T_WHITESPACE","\n            ",93],["T_VARIABLE","$select",94],["T_OBJECT_OPERATOR","->",94],["T_STRING","where",94],"(",["T_VARIABLE","$condition",94],")",";",["T_WHITESPACE","\n        ",94],"}",["T_WHITESPACE","\n        ",95],["T_VARIABLE","$rowset",96],["T_WHITESPACE"," ",96],"=",["T_WHITESPACE"," ",96],["T_VARIABLE","$read",96],["T_OBJECT_OPERATOR","->",96],["T_STRING","fetchAll",96],"(",["T_VARIABLE","$select",96],")",";",["T_WHITESPACE","\n\n\n        ",96],["T_COMMENT","\/\/ set default config values from database\n",99],["T_WHITESPACE","        ",100],["T_FOREACH","foreach",100],["T_WHITESPACE"," ",100],"(",["T_VARIABLE","$rowset",100],["T_WHITESPACE"," ",100],["T_AS","as",100],["T_WHITESPACE"," ",100],["T_VARIABLE","$r",100],")",["T_WHITESPACE"," ",100],"{",["T_WHITESPACE","\n            ",100],["T_IF","if",101],["T_WHITESPACE"," ",101],"(",["T_VARIABLE","$r",101],"[",["T_CONSTANT_ENCAPSED_STRING","'scope'",101],"]",["T_WHITESPACE"," ",101],["T_IS_NOT_IDENTICAL","!==",101],["T_WHITESPACE"," ",101],["T_CONSTANT_ENCAPSED_STRING","'default'",101],")",["T_WHITESPACE"," ",101],"{",["T_WHITESPACE","\n                ",101],["T_CONTINUE","continue",102],";",["T_WHITESPACE","\n            ",102],"}",["T_WHITESPACE","\n            ",103],["T_VARIABLE","$value",104],["T_WHITESPACE"," ",104],"=",["T_WHITESPACE"," ",104],["T_STRING","str_replace",104],"(",["T_VARIABLE","$substFrom",104],",",["T_WHITESPACE"," ",104],["T_VARIABLE","$substTo",104],",",["T_WHITESPACE"," ",104],["T_VARIABLE","$r",104],"[",["T_CONSTANT_ENCAPSED_STRING","'value'",104],"]",")",";",["T_WHITESPACE","\n            ",104],["T_VARIABLE","$xmlConfig",105],["T_OBJECT_OPERATOR","->",105],["T_STRING","setNode",105],"(",["T_CONSTANT_ENCAPSED_STRING","'default\/'",105],["T_WHITESPACE"," ",105],".",["T_WHITESPACE"," ",105],["T_VARIABLE","$r",105],"[",["T_CONSTANT_ENCAPSED_STRING","'path'",105],"]",",",["T_WHITESPACE"," ",105],["T_VARIABLE","$value",105],")",";",["T_WHITESPACE","\n        ",105],"}",["T_WHITESPACE","\n\n        ",106],["T_COMMENT","\/\/ inherit default config values to all websites\n",108],["T_WHITESPACE","        ",109],["T_VARIABLE","$extendSource",109],["T_WHITESPACE"," ",109],"=",["T_WHITESPACE"," ",109],["T_VARIABLE","$xmlConfig",109],["T_OBJECT_OPERATOR","->",109],["T_STRING","getNode",109],"(",["T_CONSTANT_ENCAPSED_STRING","'default'",109],")",";",["T_WHITESPACE","\n        ",109],["T_FOREACH","foreach",110],["T_WHITESPACE"," ",110],"(",["T_VARIABLE","$websites",110],["T_WHITESPACE"," ",110],["T_AS","as",110],["T_WHITESPACE"," ",110],["T_VARIABLE","$id",110],["T_DOUBLE_ARROW","=>",110],["T_VARIABLE","$w",110],")",["T_WHITESPACE"," ",110],"{",["T_WHITESPACE","\n            ",110],["T_VARIABLE","$websiteNode",111],["T_WHITESPACE"," ",111],"=",["T_WHITESPACE"," ",111],["T_VARIABLE","$xmlConfig",111],["T_OBJECT_OPERATOR","->",111],["T_STRING","getNode",111],"(",["T_CONSTANT_ENCAPSED_STRING","'websites\/'",111],["T_WHITESPACE"," ",111],".",["T_WHITESPACE"," ",111],["T_VARIABLE","$w",111],"[",["T_CONSTANT_ENCAPSED_STRING","'code'",111],"]",")",";",["T_WHITESPACE","\n            ",111],["T_VARIABLE","$websiteNode",112],["T_OBJECT_OPERATOR","->",112],["T_STRING","extend",112],"(",["T_VARIABLE","$extendSource",112],")",";",["T_WHITESPACE","\n        ",112],"}",["T_WHITESPACE","\n\n        ",113],["T_VARIABLE","$deleteWebsites",115],["T_WHITESPACE"," ",115],"=",["T_WHITESPACE"," ",115],["T_ARRAY","array",115],"(",")",";",["T_WHITESPACE","\n        ",115],["T_COMMENT","\/\/ set websites config values from database\n",116],["T_WHITESPACE","        ",117],["T_FOREACH","foreach",117],["T_WHITESPACE"," ",117],"(",["T_VARIABLE","$rowset",117],["T_WHITESPACE"," ",117],["T_AS","as",117],["T_WHITESPACE"," ",117],["T_VARIABLE","$r",117],")",["T_WHITESPACE"," ",117],"{",["T_WHITESPACE","\n            ",117],["T_IF","if",118],["T_WHITESPACE"," ",118],"(",["T_VARIABLE","$r",118],"[",["T_CONSTANT_ENCAPSED_STRING","'scope'",118],"]",["T_WHITESPACE"," ",118],["T_IS_NOT_IDENTICAL","!==",118],["T_WHITESPACE"," ",118],["T_CONSTANT_ENCAPSED_STRING","'websites'",118],")",["T_WHITESPACE"," ",118],"{",["T_WHITESPACE","\n                ",118],["T_CONTINUE","continue",119],";",["T_WHITESPACE","\n            ",119],"}",["T_WHITESPACE","\n            ",120],["T_VARIABLE","$value",121],["T_WHITESPACE"," ",121],"=",["T_WHITESPACE"," ",121],["T_STRING","str_replace",121],"(",["T_VARIABLE","$substFrom",121],",",["T_WHITESPACE"," ",121],["T_VARIABLE","$substTo",121],",",["T_WHITESPACE"," ",121],["T_VARIABLE","$r",121],"[",["T_CONSTANT_ENCAPSED_STRING","'value'",121],"]",")",";",["T_WHITESPACE","\n            ",121],["T_IF","if",122],["T_WHITESPACE"," ",122],"(",["T_ISSET","isset",122],"(",["T_VARIABLE","$websites",122],"[",["T_VARIABLE","$r",122],"[",["T_CONSTANT_ENCAPSED_STRING","'scope_id'",122],"]","]",")",")",["T_WHITESPACE"," ",122],"{",["T_WHITESPACE","\n                ",122],["T_VARIABLE","$nodePath",123],["T_WHITESPACE"," ",123],"=",["T_WHITESPACE"," ",123],["T_STRING","sprintf",123],"(",["T_CONSTANT_ENCAPSED_STRING","'websites\/%s\/%s'",123],",",["T_WHITESPACE"," ",123],["T_VARIABLE","$websites",123],"[",["T_VARIABLE","$r",123],"[",["T_CONSTANT_ENCAPSED_STRING","'scope_id'",123],"]","]","[",["T_CONSTANT_ENCAPSED_STRING","'code'",123],"]",",",["T_WHITESPACE"," ",123],["T_VARIABLE","$r",123],"[",["T_CONSTANT_ENCAPSED_STRING","'path'",123],"]",")",";",["T_WHITESPACE","\n                ",123],["T_VARIABLE","$xmlConfig",124],["T_OBJECT_OPERATOR","->",124],["T_STRING","setNode",124],"(",["T_VARIABLE","$nodePath",124],",",["T_WHITESPACE"," ",124],["T_VARIABLE","$value",124],")",";",["T_WHITESPACE","\n            ",124],"}",["T_WHITESPACE"," ",125],["T_ELSE","else",125],["T_WHITESPACE"," ",125],"{",["T_WHITESPACE","\n                ",125],["T_VARIABLE","$deleteWebsites",126],"[",["T_VARIABLE","$r",126],"[",["T_CONSTANT_ENCAPSED_STRING","'scope_id'",126],"]","]",["T_WHITESPACE"," ",126],"=",["T_WHITESPACE"," ",126],["T_VARIABLE","$r",126],"[",["T_CONSTANT_ENCAPSED_STRING","'scope_id'",126],"]",";",["T_WHITESPACE","\n            ",126],"}",["T_WHITESPACE","\n        ",127],"}",["T_WHITESPACE","\n\n        ",128],["T_COMMENT","\/\/ extend website config values to all associated stores\n",130],["T_WHITESPACE","        ",131],["T_FOREACH","foreach",131],["T_WHITESPACE"," ",131],"(",["T_VARIABLE","$websites",131],["T_WHITESPACE"," ",131],["T_AS","as",131],["T_WHITESPACE"," ",131],["T_VARIABLE","$website",131],")",["T_WHITESPACE"," ",131],"{",["T_WHITESPACE","\n            ",131],["T_VARIABLE","$extendSource",132],["T_WHITESPACE"," ",132],"=",["T_WHITESPACE"," ",132],["T_VARIABLE","$xmlConfig",132],["T_OBJECT_OPERATOR","->",132],["T_STRING","getNode",132],"(",["T_CONSTANT_ENCAPSED_STRING","'websites\/'",132],["T_WHITESPACE"," ",132],".",["T_WHITESPACE"," ",132],["T_VARIABLE","$website",132],"[",["T_CONSTANT_ENCAPSED_STRING","'code'",132],"]",")",";",["T_WHITESPACE","\n            ",132],["T_IF","if",133],["T_WHITESPACE"," ",133],"(",["T_ISSET","isset",133],"(",["T_VARIABLE","$website",133],"[",["T_CONSTANT_ENCAPSED_STRING","'stores'",133],"]",")",")",["T_WHITESPACE"," ",133],"{",["T_WHITESPACE","\n                ",133],["T_FOREACH","foreach",134],["T_WHITESPACE"," ",134],"(",["T_VARIABLE","$website",134],"[",["T_CONSTANT_ENCAPSED_STRING","'stores'",134],"]",["T_WHITESPACE"," ",134],["T_AS","as",134],["T_WHITESPACE"," ",134],["T_VARIABLE","$sCode",134],")",["T_WHITESPACE"," ",134],"{",["T_WHITESPACE","\n                    ",134],["T_VARIABLE","$storeNode",135],["T_WHITESPACE"," ",135],"=",["T_WHITESPACE"," ",135],["T_VARIABLE","$xmlConfig",135],["T_OBJECT_OPERATOR","->",135],["T_STRING","getNode",135],"(",["T_CONSTANT_ENCAPSED_STRING","'stores\/'",135],".",["T_VARIABLE","$sCode",135],")",";",["T_WHITESPACE","\n                    ",135],["T_DOC_COMMENT","\/**\n                     * $extendSource DO NOT need overwrite source\n                     *\/",136],["T_WHITESPACE","\n                    ",138],["T_VARIABLE","$storeNode",139],["T_OBJECT_OPERATOR","->",139],["T_STRING","extend",139],"(",["T_VARIABLE","$extendSource",139],",",["T_WHITESPACE"," ",139],["T_STRING","false",139],")",";",["T_WHITESPACE","\n                ",139],"}",["T_WHITESPACE","\n            ",140],"}",["T_WHITESPACE","\n        ",141],"}",["T_WHITESPACE","\n\n        ",142],["T_VARIABLE","$deleteStores",144],["T_WHITESPACE"," ",144],"=",["T_WHITESPACE"," ",144],["T_ARRAY","array",144],"(",")",";",["T_WHITESPACE","\n        ",144],["T_COMMENT","\/\/ set stores config values from database\n",145],["T_WHITESPACE","        ",146],["T_FOREACH","foreach",146],["T_WHITESPACE"," ",146],"(",["T_VARIABLE","$rowset",146],["T_WHITESPACE"," ",146],["T_AS","as",146],["T_WHITESPACE"," ",146],["T_VARIABLE","$r",146],")",["T_WHITESPACE"," ",146],"{",["T_WHITESPACE","\n            ",146],["T_IF","if",147],["T_WHITESPACE"," ",147],"(",["T_VARIABLE","$r",147],"[",["T_CONSTANT_ENCAPSED_STRING","'scope'",147],"]",["T_WHITESPACE"," ",147],["T_IS_NOT_IDENTICAL","!==",147],["T_WHITESPACE"," ",147],["T_CONSTANT_ENCAPSED_STRING","'stores'",147],")",["T_WHITESPACE"," ",147],"{",["T_WHITESPACE","\n                ",147],["T_CONTINUE","continue",148],";",["T_WHITESPACE","\n            ",148],"}",["T_WHITESPACE","\n            ",149],["T_VARIABLE","$value",150],["T_WHITESPACE"," ",150],"=",["T_WHITESPACE"," ",150],["T_STRING","str_replace",150],"(",["T_VARIABLE","$substFrom",150],",",["T_WHITESPACE"," ",150],["T_VARIABLE","$substTo",150],",",["T_WHITESPACE"," ",150],["T_VARIABLE","$r",150],"[",["T_CONSTANT_ENCAPSED_STRING","'value'",150],"]",")",";",["T_WHITESPACE","\n            ",150],["T_IF","if",151],["T_WHITESPACE"," ",151],"(",["T_ISSET","isset",151],"(",["T_VARIABLE","$stores",151],"[",["T_VARIABLE","$r",151],"[",["T_CONSTANT_ENCAPSED_STRING","'scope_id'",151],"]","]",")",")",["T_WHITESPACE"," ",151],"{",["T_WHITESPACE","\n                ",151],["T_VARIABLE","$nodePath",152],["T_WHITESPACE"," ",152],"=",["T_WHITESPACE"," ",152],["T_STRING","sprintf",152],"(",["T_CONSTANT_ENCAPSED_STRING","'stores\/%s\/%s'",152],",",["T_WHITESPACE"," ",152],["T_VARIABLE","$stores",152],"[",["T_VARIABLE","$r",152],"[",["T_CONSTANT_ENCAPSED_STRING","'scope_id'",152],"]","]","[",["T_CONSTANT_ENCAPSED_STRING","'code'",152],"]",",",["T_WHITESPACE"," ",152],["T_VARIABLE","$r",152],"[",["T_CONSTANT_ENCAPSED_STRING","'path'",152],"]",")",";",["T_WHITESPACE","\n                ",152],["T_VARIABLE","$xmlConfig",153],["T_OBJECT_OPERATOR","->",153],["T_STRING","setNode",153],"(",["T_VARIABLE","$nodePath",153],",",["T_WHITESPACE"," ",153],["T_VARIABLE","$value",153],")",";",["T_WHITESPACE","\n            ",153],"}",["T_WHITESPACE"," ",154],["T_ELSE","else",154],["T_WHITESPACE"," ",154],"{",["T_WHITESPACE","\n                ",154],["T_VARIABLE","$deleteStores",155],"[",["T_VARIABLE","$r",155],"[",["T_CONSTANT_ENCAPSED_STRING","'scope_id'",155],"]","]",["T_WHITESPACE"," ",155],"=",["T_WHITESPACE"," ",155],["T_VARIABLE","$r",155],"[",["T_CONSTANT_ENCAPSED_STRING","'scope_id'",155],"]",";",["T_WHITESPACE","\n            ",155],"}",["T_WHITESPACE","\n        ",156],"}",["T_WHITESPACE","\n\n        ",157],["T_IF","if",159],["T_WHITESPACE"," ",159],"(",["T_VARIABLE","$deleteWebsites",159],")",["T_WHITESPACE"," ",159],"{",["T_WHITESPACE","\n            ",159],["T_VARIABLE","$this",160],["T_OBJECT_OPERATOR","->",160],["T_STRING","_getWriteAdapter",160],"(",")",["T_OBJECT_OPERATOR","->",160],["T_STRING","delete",160],"(",["T_VARIABLE","$this",160],["T_OBJECT_OPERATOR","->",160],["T_STRING","getMainTable",160],"(",")",",",["T_WHITESPACE"," ",160],["T_ARRAY","array",160],"(",["T_WHITESPACE","\n                ",160],["T_CONSTANT_ENCAPSED_STRING","'scope = ?'",161],["T_WHITESPACE","      ",161],["T_DOUBLE_ARROW","=>",161],["T_WHITESPACE"," ",161],["T_CONSTANT_ENCAPSED_STRING","'websites'",161],",",["T_WHITESPACE","\n                ",161],["T_CONSTANT_ENCAPSED_STRING","'scope_id IN(?)'",162],["T_WHITESPACE"," ",162],["T_DOUBLE_ARROW","=>",162],["T_WHITESPACE"," ",162],["T_VARIABLE","$deleteWebsites",162],",",["T_WHITESPACE","\n            ",162],")",")",";",["T_WHITESPACE","\n        ",163],"}",["T_WHITESPACE","\n\n        ",164],["T_IF","if",166],["T_WHITESPACE"," ",166],"(",["T_VARIABLE","$deleteStores",166],")",["T_WHITESPACE"," ",166],"{",["T_WHITESPACE","\n            ",166],["T_VARIABLE","$this",167],["T_OBJECT_OPERATOR","->",167],["T_STRING","_getWriteAdapter",167],"(",")",["T_OBJECT_OPERATOR","->",167],["T_STRING","delete",167],"(",["T_VARIABLE","$this",167],["T_OBJECT_OPERATOR","->",167],["T_STRING","getMainTable",167],"(",")",",",["T_WHITESPACE"," ",167],["T_ARRAY","array",167],"(",["T_WHITESPACE","\n                ",167],["T_CONSTANT_ENCAPSED_STRING","'scope=?'",168],["T_WHITESPACE","        ",168],["T_DOUBLE_ARROW","=>",168],["T_WHITESPACE"," ",168],["T_CONSTANT_ENCAPSED_STRING","'stores'",168],",",["T_WHITESPACE","\n                ",168],["T_CONSTANT_ENCAPSED_STRING","'scope_id IN(?)'",169],["T_WHITESPACE"," ",169],["T_DOUBLE_ARROW","=>",169],["T_WHITESPACE"," ",169],["T_VARIABLE","$deleteStores",169],",",["T_WHITESPACE","\n            ",169],")",")",";",["T_WHITESPACE","\n        ",170],"}",["T_WHITESPACE","\n        ",171],["T_RETURN","return",172],["T_WHITESPACE"," ",172],["T_VARIABLE","$this",172],";",["T_WHITESPACE","\n    ",172],"}",["T_WHITESPACE","\n\n    ",173],["T_DOC_COMMENT","\/**\n     * Save config value\n     *\n     * @param string $path\n     * @param string $value\n     * @param string $scope\n     * @param int $scopeId\n     * @return Mage_Core_Model_Resource_Config\n     *\/",175],["T_WHITESPACE","\n    ",183],["T_PUBLIC","public",184],["T_WHITESPACE"," ",184],["T_FUNCTION","function",184],["T_WHITESPACE"," ",184],["T_STRING","saveConfig",184],"(",["T_VARIABLE","$path",184],",",["T_WHITESPACE"," ",184],["T_VARIABLE","$value",184],",",["T_WHITESPACE"," ",184],["T_VARIABLE","$scope",184],",",["T_WHITESPACE"," ",184],["T_VARIABLE","$scopeId",184],")",["T_WHITESPACE","\n    ",184],"{",["T_WHITESPACE","\n        ",185],["T_VARIABLE","$writeAdapter",186],["T_WHITESPACE"," ",186],"=",["T_WHITESPACE"," ",186],["T_VARIABLE","$this",186],["T_OBJECT_OPERATOR","->",186],["T_STRING","_getWriteAdapter",186],"(",")",";",["T_WHITESPACE","\n        ",186],["T_VARIABLE","$select",187],["T_WHITESPACE"," ",187],"=",["T_WHITESPACE"," ",187],["T_VARIABLE","$writeAdapter",187],["T_OBJECT_OPERATOR","->",187],["T_STRING","select",187],"(",")",["T_WHITESPACE","\n            ",187],["T_OBJECT_OPERATOR","->",188],["T_STRING","from",188],"(",["T_VARIABLE","$this",188],["T_OBJECT_OPERATOR","->",188],["T_STRING","getMainTable",188],"(",")",")",["T_WHITESPACE","\n            ",188],["T_OBJECT_OPERATOR","->",189],["T_STRING","where",189],"(",["T_CONSTANT_ENCAPSED_STRING","'path = ?'",189],",",["T_WHITESPACE"," ",189],["T_VARIABLE","$path",189],")",["T_WHITESPACE","\n            ",189],["T_OBJECT_OPERATOR","->",190],["T_STRING","where",190],"(",["T_CONSTANT_ENCAPSED_STRING","'scope = ?'",190],",",["T_WHITESPACE"," ",190],["T_VARIABLE","$scope",190],")",["T_WHITESPACE","\n            ",190],["T_OBJECT_OPERATOR","->",191],["T_STRING","where",191],"(",["T_CONSTANT_ENCAPSED_STRING","'scope_id = ?'",191],",",["T_WHITESPACE"," ",191],["T_VARIABLE","$scopeId",191],")",";",["T_WHITESPACE","\n        ",191],["T_VARIABLE","$row",192],["T_WHITESPACE"," ",192],"=",["T_WHITESPACE"," ",192],["T_VARIABLE","$writeAdapter",192],["T_OBJECT_OPERATOR","->",192],["T_STRING","fetchRow",192],"(",["T_VARIABLE","$select",192],")",";",["T_WHITESPACE","\n\n        ",192],["T_VARIABLE","$newData",194],["T_WHITESPACE"," ",194],"=",["T_WHITESPACE"," ",194],["T_ARRAY","array",194],"(",["T_WHITESPACE","\n            ",194],["T_CONSTANT_ENCAPSED_STRING","'scope'",195],["T_WHITESPACE","     ",195],["T_DOUBLE_ARROW","=>",195],["T_WHITESPACE"," ",195],["T_VARIABLE","$scope",195],",",["T_WHITESPACE","\n            ",195],["T_CONSTANT_ENCAPSED_STRING","'scope_id'",196],["T_WHITESPACE","  ",196],["T_DOUBLE_ARROW","=>",196],["T_WHITESPACE"," ",196],["T_VARIABLE","$scopeId",196],",",["T_WHITESPACE","\n            ",196],["T_CONSTANT_ENCAPSED_STRING","'path'",197],["T_WHITESPACE","      ",197],["T_DOUBLE_ARROW","=>",197],["T_WHITESPACE"," ",197],["T_VARIABLE","$path",197],",",["T_WHITESPACE","\n            ",197],["T_CONSTANT_ENCAPSED_STRING","'value'",198],["T_WHITESPACE","     ",198],["T_DOUBLE_ARROW","=>",198],["T_WHITESPACE"," ",198],["T_VARIABLE","$value",198],["T_WHITESPACE","\n        ",198],")",";",["T_WHITESPACE","\n\n        ",199],["T_IF","if",201],["T_WHITESPACE"," ",201],"(",["T_VARIABLE","$row",201],")",["T_WHITESPACE"," ",201],"{",["T_WHITESPACE","\n            ",201],["T_VARIABLE","$whereCondition",202],["T_WHITESPACE"," ",202],"=",["T_WHITESPACE"," ",202],["T_ARRAY","array",202],"(",["T_VARIABLE","$this",202],["T_OBJECT_OPERATOR","->",202],["T_STRING","getIdFieldName",202],"(",")",["T_WHITESPACE"," ",202],".",["T_WHITESPACE"," ",202],["T_CONSTANT_ENCAPSED_STRING","'=?'",202],["T_WHITESPACE"," ",202],["T_DOUBLE_ARROW","=>",202],["T_WHITESPACE"," ",202],["T_VARIABLE","$row",202],"[",["T_VARIABLE","$this",202],["T_OBJECT_OPERATOR","->",202],["T_STRING","getIdFieldName",202],"(",")","]",")",";",["T_WHITESPACE","\n            ",202],["T_VARIABLE","$writeAdapter",203],["T_OBJECT_OPERATOR","->",203],["T_STRING","update",203],"(",["T_VARIABLE","$this",203],["T_OBJECT_OPERATOR","->",203],["T_STRING","getMainTable",203],"(",")",",",["T_WHITESPACE"," ",203],["T_VARIABLE","$newData",203],",",["T_WHITESPACE"," ",203],["T_VARIABLE","$whereCondition",203],")",";",["T_WHITESPACE","\n        ",203],"}",["T_WHITESPACE"," ",204],["T_ELSE","else",204],["T_WHITESPACE"," ",204],"{",["T_WHITESPACE","\n            ",204],["T_VARIABLE","$writeAdapter",205],["T_OBJECT_OPERATOR","->",205],["T_STRING","insert",205],"(",["T_VARIABLE","$this",205],["T_OBJECT_OPERATOR","->",205],["T_STRING","getMainTable",205],"(",")",",",["T_WHITESPACE"," ",205],["T_VARIABLE","$newData",205],")",";",["T_WHITESPACE","\n        ",205],"}",["T_WHITESPACE","\n        ",206],["T_RETURN","return",207],["T_WHITESPACE"," ",207],["T_VARIABLE","$this",207],";",["T_WHITESPACE","\n    ",207],"}",["T_WHITESPACE","\n\n    ",208],["T_DOC_COMMENT","\/**\n     * Delete config value\n     *\n     * @param string $path\n     * @param string $scope\n     * @param int $scopeId\n     * @return Mage_Core_Model_Resource_Config\n     *\/",210],["T_WHITESPACE","\n    ",217],["T_PUBLIC","public",218],["T_WHITESPACE"," ",218],["T_FUNCTION","function",218],["T_WHITESPACE"," ",218],["T_STRING","deleteConfig",218],"(",["T_VARIABLE","$path",218],",",["T_WHITESPACE"," ",218],["T_VARIABLE","$scope",218],",",["T_WHITESPACE"," ",218],["T_VARIABLE","$scopeId",218],")",["T_WHITESPACE","\n    ",218],"{",["T_WHITESPACE","\n        ",219],["T_VARIABLE","$adapter",220],["T_WHITESPACE"," ",220],"=",["T_WHITESPACE"," ",220],["T_VARIABLE","$this",220],["T_OBJECT_OPERATOR","->",220],["T_STRING","_getWriteAdapter",220],"(",")",";",["T_WHITESPACE","\n        ",220],["T_VARIABLE","$adapter",221],["T_OBJECT_OPERATOR","->",221],["T_STRING","delete",221],"(",["T_VARIABLE","$this",221],["T_OBJECT_OPERATOR","->",221],["T_STRING","getMainTable",221],"(",")",",",["T_WHITESPACE"," ",221],["T_ARRAY","array",221],"(",["T_WHITESPACE","\n            ",221],["T_VARIABLE","$adapter",222],["T_OBJECT_OPERATOR","->",222],["T_STRING","quoteInto",222],"(",["T_CONSTANT_ENCAPSED_STRING","'path = ?'",222],",",["T_WHITESPACE"," ",222],["T_VARIABLE","$path",222],")",",",["T_WHITESPACE","\n            ",222],["T_VARIABLE","$adapter",223],["T_OBJECT_OPERATOR","->",223],["T_STRING","quoteInto",223],"(",["T_CONSTANT_ENCAPSED_STRING","'scope = ?'",223],",",["T_WHITESPACE"," ",223],["T_VARIABLE","$scope",223],")",",",["T_WHITESPACE","\n            ",223],["T_VARIABLE","$adapter",224],["T_OBJECT_OPERATOR","->",224],["T_STRING","quoteInto",224],"(",["T_CONSTANT_ENCAPSED_STRING","'scope_id = ?'",224],",",["T_WHITESPACE"," ",224],["T_VARIABLE","$scopeId",224],")",["T_WHITESPACE","\n        ",224],")",")",";",["T_WHITESPACE","\n        ",225],["T_RETURN","return",226],["T_WHITESPACE"," ",226],["T_VARIABLE","$this",226],";",["T_WHITESPACE","\n    ",226],"}",["T_WHITESPACE","\n",227],"}",["T_WHITESPACE","\n",228]]
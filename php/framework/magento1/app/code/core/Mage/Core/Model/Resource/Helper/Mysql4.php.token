[["T_OPEN_TAG","<?php\n",1],["T_DOC_COMMENT","\/**\n * Magento\n *\n * NOTICE OF LICENSE\n *\n * This source file is subject to the Open Software License (OSL 3.0)\n * that is bundled with this package in the file LICENSE.txt.\n * It is also available through the world-wide-web at this URL:\n * http:\/\/opensource.org\/licenses\/osl-3.0.php\n * If you did not receive a copy of the license and are unable to\n * obtain it through the world-wide-web, please send an email\n * to license@magento.com so we can send you a copy immediately.\n *\n * DISCLAIMER\n *\n * Do not edit or add to this file if you wish to upgrade Magento to newer\n * versions in the future. If you wish to customize Magento for your\n * needs please refer to http:\/\/www.magento.com for more information.\n *\n * @category    Mage\n * @package     Mage_Core\n * @copyright  Copyright (c) 2006-2016 X.commerce, Inc. and affiliates (http:\/\/www.magento.com)\n * @license    http:\/\/opensource.org\/licenses\/osl-3.0.php  Open Software License (OSL 3.0)\n *\/",2],["T_WHITESPACE","\n\n",25],["T_DOC_COMMENT","\/**\n * Resource helper class for MySql Varien DB Adapter\n *\n * @category    Mage\n * @package     Mage_Core\n * @author      Magento Core Team <core@magentocommerce.com>\n *\/",27],["T_WHITESPACE","\n",33],["T_CLASS","class",34],["T_WHITESPACE"," ",34],["T_STRING","Mage_Core_Model_Resource_Helper_Mysql4",34],["T_WHITESPACE"," ",34],["T_EXTENDS","extends",34],["T_WHITESPACE"," ",34],["T_STRING","Mage_Core_Model_Resource_Helper_Abstract",34],["T_WHITESPACE","\n",34],"{",["T_WHITESPACE","\n    ",35],["T_DOC_COMMENT","\/**\n     * Returns expresion for field unification\n     *\n     * @param string $field\n     * @return Zend_Db_Expr\n     *\/",36],["T_WHITESPACE","\n    ",41],["T_PUBLIC","public",42],["T_WHITESPACE"," ",42],["T_FUNCTION","function",42],["T_WHITESPACE"," ",42],["T_STRING","castField",42],"(",["T_VARIABLE","$field",42],")",["T_WHITESPACE","\n    ",42],"{",["T_WHITESPACE","\n        ",43],["T_RETURN","return",44],["T_WHITESPACE"," ",44],["T_VARIABLE","$field",44],";",["T_WHITESPACE","\n    ",44],"}",["T_WHITESPACE","\n    ",45],["T_DOC_COMMENT","\/**\n     * Returns analytic expression for database column\n     *\n     * @param string $column\n     * @param string $groupAliasName OPTIONAL\n     * @param string $orderBy OPTIONAL\n     * @return Zend_Db_Expr\n     *\/",46],["T_WHITESPACE","\n    ",53],["T_PUBLIC","public",54],["T_WHITESPACE"," ",54],["T_FUNCTION","function",54],["T_WHITESPACE"," ",54],["T_STRING","prepareColumn",54],"(",["T_VARIABLE","$column",54],",",["T_WHITESPACE"," ",54],["T_VARIABLE","$groupAliasName",54],["T_WHITESPACE"," ",54],"=",["T_WHITESPACE"," ",54],["T_STRING","null",54],",",["T_WHITESPACE"," ",54],["T_VARIABLE","$orderBy",54],["T_WHITESPACE"," ",54],"=",["T_WHITESPACE"," ",54],["T_STRING","null",54],")",["T_WHITESPACE","\n    ",54],"{",["T_WHITESPACE","\n        ",55],["T_RETURN","return",56],["T_WHITESPACE"," ",56],["T_NEW","new",56],["T_WHITESPACE"," ",56],["T_STRING","Zend_Db_Expr",56],"(",["T_STRING_CAST","(string)",56],["T_VARIABLE","$column",56],")",";",["T_WHITESPACE","\n    ",56],"}",["T_WHITESPACE","\n\n    ",57],["T_DOC_COMMENT","\/**\n     * Returns select query with analytic functions\n     *\n     * @param Varien_Db_Select $select\n     * @return string\n     *\/",59],["T_WHITESPACE","\n    ",64],["T_PUBLIC","public",65],["T_WHITESPACE"," ",65],["T_FUNCTION","function",65],["T_WHITESPACE"," ",65],["T_STRING","getQueryUsingAnalyticFunction",65],"(",["T_STRING","Varien_Db_Select",65],["T_WHITESPACE"," ",65],["T_VARIABLE","$select",65],")",["T_WHITESPACE","\n    ",65],"{",["T_WHITESPACE","\n        ",66],["T_RETURN","return",67],["T_WHITESPACE"," ",67],["T_VARIABLE","$select",67],["T_OBJECT_OPERATOR","->",67],["T_STRING","assemble",67],"(",")",";",["T_WHITESPACE","\n    ",67],"}",["T_WHITESPACE","\n\n    ",68],["T_DOC_COMMENT","\/**\n     *\n     * Returns Insert From Select On Duplicate query with analytic functions\n     *\n     * @param Varien_Db_Select $select\n     * @param string $table\n     * @param array $table\n     * @return string\n     *\/",70],["T_WHITESPACE","\n    ",78],["T_PUBLIC","public",79],["T_WHITESPACE"," ",79],["T_FUNCTION","function",79],["T_WHITESPACE"," ",79],["T_STRING","getInsertFromSelectUsingAnalytic",79],"(",["T_STRING","Varien_Db_Select",79],["T_WHITESPACE"," ",79],["T_VARIABLE","$select",79],",",["T_WHITESPACE"," ",79],["T_VARIABLE","$table",79],",",["T_WHITESPACE"," ",79],["T_VARIABLE","$fields",79],")",["T_WHITESPACE","\n    ",79],"{",["T_WHITESPACE","\n        ",80],["T_RETURN","return",81],["T_WHITESPACE"," ",81],["T_VARIABLE","$select",81],["T_OBJECT_OPERATOR","->",81],["T_STRING","insertFromSelect",81],"(",["T_VARIABLE","$table",81],",",["T_WHITESPACE"," ",81],["T_VARIABLE","$fields",81],")",";",["T_WHITESPACE","\n    ",81],"}",["T_WHITESPACE","\n\n    ",82],["T_DOC_COMMENT","\/**\n     * Correct limitation of queries with UNION\n     * No need to do additional actions on MySQL\n     *\n     * @param Varien_Db_Select $select\n     * @return Varien_Db_Select\n     *\/",84],["T_WHITESPACE","\n    ",90],["T_PUBLIC","public",91],["T_WHITESPACE"," ",91],["T_FUNCTION","function",91],["T_WHITESPACE"," ",91],["T_STRING","limitUnion",91],"(",["T_VARIABLE","$select",91],")",["T_WHITESPACE","\n    ",91],"{",["T_WHITESPACE","\n        ",92],["T_RETURN","return",93],["T_WHITESPACE"," ",93],["T_VARIABLE","$select",93],";",["T_WHITESPACE","\n    ",93],"}",["T_WHITESPACE","\n\n    ",94],["T_DOC_COMMENT","\/**\n     * Returns array of quoted orders with direction\n     *\n     * @param Varien_Db_Select $select\n     * @param bool $autoReset\n     * @return array\n     *\/",96],["T_WHITESPACE","\n    ",102],["T_PROTECTED","protected",103],["T_WHITESPACE"," ",103],["T_FUNCTION","function",103],["T_WHITESPACE"," ",103],["T_STRING","_prepareOrder",103],"(",["T_STRING","Varien_Db_Select",103],["T_WHITESPACE"," ",103],["T_VARIABLE","$select",103],",",["T_WHITESPACE"," ",103],["T_VARIABLE","$autoReset",103],["T_WHITESPACE"," ",103],"=",["T_WHITESPACE"," ",103],["T_STRING","false",103],")",["T_WHITESPACE","\n    ",103],"{",["T_WHITESPACE","\n        ",104],["T_VARIABLE","$selectOrders",105],["T_WHITESPACE"," ",105],"=",["T_WHITESPACE"," ",105],["T_VARIABLE","$select",105],["T_OBJECT_OPERATOR","->",105],["T_STRING","getPart",105],"(",["T_STRING","Zend_Db_Select",105],["T_DOUBLE_COLON","::",105],["T_STRING","ORDER",105],")",";",["T_WHITESPACE","\n        ",105],["T_IF","if",106],["T_WHITESPACE"," ",106],"(","!",["T_VARIABLE","$selectOrders",106],")",["T_WHITESPACE"," ",106],"{",["T_WHITESPACE","\n            ",106],["T_RETURN","return",107],["T_WHITESPACE"," ",107],["T_ARRAY","array",107],"(",")",";",["T_WHITESPACE","\n        ",107],"}",["T_WHITESPACE","\n\n        ",108],["T_VARIABLE","$orders",110],["T_WHITESPACE"," ",110],"=",["T_WHITESPACE"," ",110],["T_ARRAY","array",110],"(",")",";",["T_WHITESPACE","\n        ",110],["T_FOREACH","foreach",111],["T_WHITESPACE"," ",111],"(",["T_VARIABLE","$selectOrders",111],["T_WHITESPACE"," ",111],["T_AS","as",111],["T_WHITESPACE"," ",111],["T_VARIABLE","$term",111],")",["T_WHITESPACE"," ",111],"{",["T_WHITESPACE","\n            ",111],["T_IF","if",112],["T_WHITESPACE"," ",112],"(",["T_STRING","is_array",112],"(",["T_VARIABLE","$term",112],")",")",["T_WHITESPACE"," ",112],"{",["T_WHITESPACE","\n                ",112],["T_IF","if",113],["T_WHITESPACE"," ",113],"(","!",["T_STRING","is_numeric",113],"(",["T_VARIABLE","$term",113],"[",["T_LNUMBER","0",113],"]",")",")",["T_WHITESPACE"," ",113],"{",["T_WHITESPACE","\n                    ",113],["T_VARIABLE","$orders",114],"[","]",["T_WHITESPACE","   ",114],"=",["T_WHITESPACE"," ",114],["T_STRING","sprintf",114],"(",["T_CONSTANT_ENCAPSED_STRING","'%s %s'",114],",",["T_WHITESPACE"," ",114],["T_VARIABLE","$this",114],["T_OBJECT_OPERATOR","->",114],["T_STRING","_getReadAdapter",114],"(",")",["T_OBJECT_OPERATOR","->",114],["T_STRING","quoteIdentifier",114],"(",["T_VARIABLE","$term",114],"[",["T_LNUMBER","0",114],"]",",",["T_WHITESPACE"," ",114],["T_STRING","true",114],")",",",["T_WHITESPACE"," ",114],["T_VARIABLE","$term",114],"[",["T_LNUMBER","1",114],"]",")",";",["T_WHITESPACE","\n                ",114],"}",["T_WHITESPACE","\n            ",115],"}",["T_WHITESPACE"," ",116],["T_ELSE","else",116],["T_WHITESPACE"," ",116],"{",["T_WHITESPACE","\n                ",116],["T_IF","if",117],["T_WHITESPACE"," ",117],"(","!",["T_STRING","is_numeric",117],"(",["T_VARIABLE","$term",117],")",")",["T_WHITESPACE"," ",117],"{",["T_WHITESPACE","\n                    ",117],["T_VARIABLE","$orders",118],"[","]",["T_WHITESPACE"," ",118],"=",["T_WHITESPACE"," ",118],["T_VARIABLE","$this",118],["T_OBJECT_OPERATOR","->",118],["T_STRING","_getReadAdapter",118],"(",")",["T_OBJECT_OPERATOR","->",118],["T_STRING","quoteIdentifier",118],"(",["T_VARIABLE","$term",118],",",["T_WHITESPACE"," ",118],["T_STRING","true",118],")",";",["T_WHITESPACE","\n                ",118],"}",["T_WHITESPACE","\n            ",119],"}",["T_WHITESPACE","\n        ",120],"}",["T_WHITESPACE","\n\n        ",121],["T_IF","if",123],["T_WHITESPACE"," ",123],"(",["T_VARIABLE","$autoReset",123],")",["T_WHITESPACE"," ",123],"{",["T_WHITESPACE","\n            ",123],["T_VARIABLE","$select",124],["T_OBJECT_OPERATOR","->",124],["T_STRING","reset",124],"(",["T_STRING","Zend_Db_Select",124],["T_DOUBLE_COLON","::",124],["T_STRING","ORDER",124],")",";",["T_WHITESPACE","\n        ",124],"}",["T_WHITESPACE","\n\n        ",125],["T_RETURN","return",127],["T_WHITESPACE"," ",127],["T_VARIABLE","$orders",127],";",["T_WHITESPACE","\n    ",127],"}",["T_WHITESPACE","\n\n    ",128],["T_DOC_COMMENT","\/**\n     * Truncate alias name from field.\n     *\n     * Result string depends from second optional argument $reverse\n     * which can be true if you need the first part of the field.\n     * Field can be with 'dot' delimiter.\n     *\n     * @param string $field\n     * @param bool   $reverse OPTIONAL\n     * @return string\n     *\/",130],["T_WHITESPACE","\n    ",140],["T_PROTECTED","protected",141],["T_WHITESPACE"," ",141],["T_FUNCTION","function",141],["T_WHITESPACE"," ",141],["T_STRING","_truncateAliasName",141],"(",["T_VARIABLE","$field",141],",",["T_WHITESPACE"," ",141],["T_VARIABLE","$reverse",141],["T_WHITESPACE"," ",141],"=",["T_WHITESPACE"," ",141],["T_STRING","false",141],")",["T_WHITESPACE","\n    ",141],"{",["T_WHITESPACE","\n        ",142],["T_VARIABLE","$string",143],["T_WHITESPACE"," ",143],"=",["T_WHITESPACE"," ",143],["T_VARIABLE","$field",143],";",["T_WHITESPACE","\n        ",143],["T_IF","if",144],["T_WHITESPACE"," ",144],"(","!",["T_STRING","is_numeric",144],"(",["T_VARIABLE","$field",144],")",["T_WHITESPACE"," ",144],["T_BOOLEAN_AND","&&",144],["T_WHITESPACE"," ",144],"(",["T_STRING","strpos",144],"(",["T_VARIABLE","$field",144],",",["T_WHITESPACE"," ",144],["T_CONSTANT_ENCAPSED_STRING","'.'",144],")",["T_WHITESPACE"," ",144],["T_IS_NOT_IDENTICAL","!==",144],["T_WHITESPACE"," ",144],["T_STRING","false",144],")",")",["T_WHITESPACE"," ",144],"{",["T_WHITESPACE","\n            ",144],["T_VARIABLE","$size",145],["T_WHITESPACE","  ",145],"=",["T_WHITESPACE"," ",145],["T_STRING","strpos",145],"(",["T_VARIABLE","$field",145],",",["T_WHITESPACE"," ",145],["T_CONSTANT_ENCAPSED_STRING","'.'",145],")",";",["T_WHITESPACE","\n            ",145],["T_IF","if",146],["T_WHITESPACE"," ",146],"(",["T_VARIABLE","$reverse",146],")",["T_WHITESPACE"," ",146],"{",["T_WHITESPACE","\n                ",146],["T_VARIABLE","$string",147],["T_WHITESPACE"," ",147],"=",["T_WHITESPACE"," ",147],["T_STRING","substr",147],"(",["T_VARIABLE","$field",147],",",["T_WHITESPACE"," ",147],["T_LNUMBER","0",147],",",["T_WHITESPACE"," ",147],["T_VARIABLE","$size",147],")",";",["T_WHITESPACE","\n            ",147],"}",["T_WHITESPACE"," ",148],["T_ELSE","else",148],["T_WHITESPACE"," ",148],"{",["T_WHITESPACE","\n                ",148],["T_VARIABLE","$string",149],["T_WHITESPACE"," ",149],"=",["T_WHITESPACE"," ",149],["T_STRING","substr",149],"(",["T_VARIABLE","$field",149],",",["T_WHITESPACE"," ",149],["T_VARIABLE","$size",149],["T_WHITESPACE"," ",149],"+",["T_WHITESPACE"," ",149],["T_LNUMBER","1",149],")",";",["T_WHITESPACE","\n            ",149],"}",["T_WHITESPACE","\n        ",150],"}",["T_WHITESPACE","\n\n        ",151],["T_RETURN","return",153],["T_WHITESPACE"," ",153],["T_VARIABLE","$string",153],";",["T_WHITESPACE","\n    ",153],"}",["T_WHITESPACE","\n\n    ",154],["T_DOC_COMMENT","\/**\n     * Returns quoted group by fields\n     *\n     * @param Varien_Db_Select $select\n     * @param bool $autoReset\n     * @return array\n     *\/",156],["T_WHITESPACE","\n    ",162],["T_PROTECTED","protected",163],["T_WHITESPACE"," ",163],["T_FUNCTION","function",163],["T_WHITESPACE"," ",163],["T_STRING","_prepareGroup",163],"(",["T_STRING","Varien_Db_Select",163],["T_WHITESPACE"," ",163],["T_VARIABLE","$select",163],",",["T_WHITESPACE"," ",163],["T_VARIABLE","$autoReset",163],["T_WHITESPACE"," ",163],"=",["T_WHITESPACE"," ",163],["T_STRING","false",163],")",["T_WHITESPACE","\n    ",163],"{",["T_WHITESPACE","\n        ",164],["T_VARIABLE","$selectGroups",165],["T_WHITESPACE"," ",165],"=",["T_WHITESPACE"," ",165],["T_VARIABLE","$select",165],["T_OBJECT_OPERATOR","->",165],["T_STRING","getPart",165],"(",["T_STRING","Zend_Db_Select",165],["T_DOUBLE_COLON","::",165],["T_STRING","GROUP",165],")",";",["T_WHITESPACE","\n        ",165],["T_IF","if",166],["T_WHITESPACE"," ",166],"(","!",["T_VARIABLE","$selectGroups",166],")",["T_WHITESPACE"," ",166],"{",["T_WHITESPACE","\n            ",166],["T_RETURN","return",167],["T_WHITESPACE"," ",167],["T_ARRAY","array",167],"(",")",";",["T_WHITESPACE","\n        ",167],"}",["T_WHITESPACE","\n\n        ",168],["T_VARIABLE","$groups",170],["T_WHITESPACE"," ",170],"=",["T_WHITESPACE"," ",170],["T_ARRAY","array",170],"(",")",";",["T_WHITESPACE","\n        ",170],["T_FOREACH","foreach",171],["T_WHITESPACE"," ",171],"(",["T_VARIABLE","$selectGroups",171],["T_WHITESPACE"," ",171],["T_AS","as",171],["T_WHITESPACE"," ",171],["T_VARIABLE","$term",171],")",["T_WHITESPACE"," ",171],"{",["T_WHITESPACE","\n            ",171],["T_VARIABLE","$groups",172],"[","]",["T_WHITESPACE"," ",172],"=",["T_WHITESPACE"," ",172],["T_VARIABLE","$this",172],["T_OBJECT_OPERATOR","->",172],["T_STRING","_getReadAdapter",172],"(",")",["T_OBJECT_OPERATOR","->",172],["T_STRING","quoteIdentifier",172],"(",["T_VARIABLE","$term",172],",",["T_WHITESPACE"," ",172],["T_STRING","true",172],")",";",["T_WHITESPACE","\n        ",172],"}",["T_WHITESPACE","\n\n        ",173],["T_IF","if",175],["T_WHITESPACE"," ",175],"(",["T_VARIABLE","$autoReset",175],")",["T_WHITESPACE"," ",175],"{",["T_WHITESPACE","\n            ",175],["T_VARIABLE","$select",176],["T_OBJECT_OPERATOR","->",176],["T_STRING","reset",176],"(",["T_STRING","Zend_Db_Select",176],["T_DOUBLE_COLON","::",176],["T_STRING","GROUP",176],")",";",["T_WHITESPACE","\n        ",176],"}",["T_WHITESPACE","\n\n        ",177],["T_RETURN","return",179],["T_WHITESPACE"," ",179],["T_VARIABLE","$groups",179],";",["T_WHITESPACE","\n    ",179],"}",["T_WHITESPACE","\n\n    ",180],["T_DOC_COMMENT","\/**\n     * Prepare and returns having array\n     *\n     * @param Varien_Db_Select $select\n     * @param bool $autoReset\n     * @return array\n     * @throws Zend_Db_Exception\n     *\/",182],["T_WHITESPACE","\n    ",189],["T_PROTECTED","protected",190],["T_WHITESPACE"," ",190],["T_FUNCTION","function",190],["T_WHITESPACE"," ",190],["T_STRING","_prepareHaving",190],"(",["T_STRING","Varien_Db_Select",190],["T_WHITESPACE"," ",190],["T_VARIABLE","$select",190],",",["T_WHITESPACE"," ",190],["T_VARIABLE","$autoReset",190],["T_WHITESPACE"," ",190],"=",["T_WHITESPACE"," ",190],["T_STRING","false",190],")",["T_WHITESPACE","\n    ",190],"{",["T_WHITESPACE","\n        ",191],["T_VARIABLE","$selectHavings",192],["T_WHITESPACE"," ",192],"=",["T_WHITESPACE"," ",192],["T_VARIABLE","$select",192],["T_OBJECT_OPERATOR","->",192],["T_STRING","getPart",192],"(",["T_STRING","Zend_Db_Select",192],["T_DOUBLE_COLON","::",192],["T_STRING","HAVING",192],")",";",["T_WHITESPACE","\n        ",192],["T_IF","if",193],["T_WHITESPACE"," ",193],"(","!",["T_VARIABLE","$selectHavings",193],")",["T_WHITESPACE"," ",193],"{",["T_WHITESPACE","\n            ",193],["T_RETURN","return",194],["T_WHITESPACE"," ",194],["T_ARRAY","array",194],"(",")",";",["T_WHITESPACE","\n        ",194],"}",["T_WHITESPACE","\n\n        ",195],["T_VARIABLE","$havings",197],["T_WHITESPACE"," ",197],"=",["T_WHITESPACE"," ",197],["T_ARRAY","array",197],"(",")",";",["T_WHITESPACE","\n        ",197],["T_VARIABLE","$columns",198],["T_WHITESPACE"," ",198],"=",["T_WHITESPACE"," ",198],["T_VARIABLE","$select",198],["T_OBJECT_OPERATOR","->",198],["T_STRING","getPart",198],"(",["T_STRING","Zend_Db_Select",198],["T_DOUBLE_COLON","::",198],["T_STRING","COLUMNS",198],")",";",["T_WHITESPACE","\n        ",198],["T_FOREACH","foreach",199],["T_WHITESPACE"," ",199],"(",["T_VARIABLE","$columns",199],["T_WHITESPACE"," ",199],["T_AS","as",199],["T_WHITESPACE"," ",199],["T_VARIABLE","$columnEntry",199],")",["T_WHITESPACE"," ",199],"{",["T_WHITESPACE","\n            ",199],["T_VARIABLE","$correlationName",200],["T_WHITESPACE"," ",200],"=",["T_WHITESPACE"," ",200],["T_STRING_CAST","(string)",200],["T_VARIABLE","$columnEntry",200],"[",["T_LNUMBER","1",200],"]",";",["T_WHITESPACE","\n            ",200],["T_VARIABLE","$column",201],["T_WHITESPACE","          ",201],"=",["T_WHITESPACE"," ",201],["T_VARIABLE","$columnEntry",201],"[",["T_LNUMBER","2",201],"]",";",["T_WHITESPACE","\n            ",201],["T_FOREACH","foreach",202],["T_WHITESPACE"," ",202],"(",["T_VARIABLE","$selectHavings",202],["T_WHITESPACE"," ",202],["T_AS","as",202],["T_WHITESPACE"," ",202],["T_VARIABLE","$having",202],")",["T_WHITESPACE"," ",202],"{",["T_WHITESPACE","\n                ",202],["T_DOC_COMMENT","\/**\n                 * Looking for column expression in the having clause\n                 *\/",203],["T_WHITESPACE","\n                ",205],["T_IF","if",206],["T_WHITESPACE"," ",206],"(",["T_STRING","strpos",206],"(",["T_VARIABLE","$having",206],",",["T_WHITESPACE"," ",206],["T_VARIABLE","$correlationName",206],")",["T_WHITESPACE"," ",206],["T_IS_NOT_IDENTICAL","!==",206],["T_WHITESPACE"," ",206],["T_STRING","false",206],")",["T_WHITESPACE"," ",206],"{",["T_WHITESPACE","\n                    ",206],["T_IF","if",207],["T_WHITESPACE"," ",207],"(",["T_STRING","is_string",207],"(",["T_VARIABLE","$column",207],")",")",["T_WHITESPACE"," ",207],"{",["T_WHITESPACE","\n                        ",207],["T_DOC_COMMENT","\/**\n                         * Replace column expression to column alias in having clause\n                         *\/",208],["T_WHITESPACE","\n                        ",210],["T_VARIABLE","$havings",211],"[","]",["T_WHITESPACE"," ",211],"=",["T_WHITESPACE"," ",211],["T_STRING","str_replace",211],"(",["T_VARIABLE","$correlationName",211],",",["T_WHITESPACE"," ",211],["T_VARIABLE","$column",211],",",["T_WHITESPACE"," ",211],["T_VARIABLE","$having",211],")",";",["T_WHITESPACE","\n                    ",211],"}",["T_WHITESPACE"," ",212],["T_ELSE","else",212],["T_WHITESPACE"," ",212],"{",["T_WHITESPACE","\n                        ",212],["T_THROW","throw",213],["T_WHITESPACE"," ",213],["T_NEW","new",213],["T_WHITESPACE"," ",213],["T_STRING","Zend_Db_Exception",213],"(",["T_STRING","sprintf",213],"(",["T_CONSTANT_ENCAPSED_STRING","\"Can't prepare expression without column alias: '%s'\"",213],",",["T_WHITESPACE"," ",213],["T_VARIABLE","$correlationName",213],")",")",";",["T_WHITESPACE","\n                    ",213],"}",["T_WHITESPACE","\n                ",214],"}",["T_WHITESPACE","\n            ",215],"}",["T_WHITESPACE","\n        ",216],"}",["T_WHITESPACE","\n\n        ",217],["T_IF","if",219],["T_WHITESPACE"," ",219],"(",["T_VARIABLE","$autoReset",219],")",["T_WHITESPACE"," ",219],"{",["T_WHITESPACE","\n            ",219],["T_VARIABLE","$select",220],["T_OBJECT_OPERATOR","->",220],["T_STRING","reset",220],"(",["T_STRING","Zend_Db_Select",220],["T_DOUBLE_COLON","::",220],["T_STRING","HAVING",220],")",";",["T_WHITESPACE","\n        ",220],"}",["T_WHITESPACE","\n\n        ",221],["T_RETURN","return",223],["T_WHITESPACE"," ",223],["T_VARIABLE","$havings",223],";",["T_WHITESPACE","\n    ",223],"}",["T_WHITESPACE","\n\n    ",224],["T_DOC_COMMENT","\/**\n     *\n     * @param string $query\n     * @param int $limitCount\n     * @param int $limitOffset\n     * @param array $columnList\n     * @return string\n     *\/",226],["T_WHITESPACE","\n    ",233],["T_PROTECTED","protected",234],["T_WHITESPACE"," ",234],["T_FUNCTION","function",234],["T_WHITESPACE"," ",234],["T_STRING","_assembleLimit",234],"(",["T_VARIABLE","$query",234],",",["T_WHITESPACE"," ",234],["T_VARIABLE","$limitCount",234],",",["T_WHITESPACE"," ",234],["T_VARIABLE","$limitOffset",234],",",["T_WHITESPACE"," ",234],["T_VARIABLE","$columnList",234],["T_WHITESPACE"," ",234],"=",["T_WHITESPACE"," ",234],["T_ARRAY","array",234],"(",")",")",["T_WHITESPACE","\n    ",234],"{",["T_WHITESPACE","\n        ",235],["T_IF","if",236],["T_WHITESPACE"," ",236],"(",["T_VARIABLE","$limitCount",236],["T_WHITESPACE"," ",236],["T_IS_NOT_IDENTICAL","!==",236],["T_WHITESPACE"," ",236],["T_STRING","null",236],")",["T_WHITESPACE"," ",236],"{",["T_WHITESPACE","\n              ",236],["T_VARIABLE","$limitCount",237],["T_WHITESPACE"," ",237],"=",["T_WHITESPACE"," ",237],["T_STRING","intval",237],"(",["T_VARIABLE","$limitCount",237],")",";",["T_WHITESPACE","\n            ",237],["T_IF","if",238],["T_WHITESPACE"," ",238],"(",["T_VARIABLE","$limitCount",238],["T_WHITESPACE"," ",238],["T_IS_SMALLER_OR_EQUAL","<=",238],["T_WHITESPACE"," ",238],["T_LNUMBER","0",238],")",["T_WHITESPACE"," ",238],"{",["T_WHITESPACE","\n",238],["T_COMMENT","\/\/                throw new Exception(\"LIMIT argument count={$limitCount} is not valid\");\n",239],["T_WHITESPACE","            ",240],"}",["T_WHITESPACE","\n\n            ",240],["T_VARIABLE","$limitOffset",242],["T_WHITESPACE"," ",242],"=",["T_WHITESPACE"," ",242],["T_STRING","intval",242],"(",["T_VARIABLE","$limitOffset",242],")",";",["T_WHITESPACE","\n            ",242],["T_IF","if",243],["T_WHITESPACE"," ",243],"(",["T_VARIABLE","$limitOffset",243],["T_WHITESPACE"," ",243],"<",["T_WHITESPACE"," ",243],["T_LNUMBER","0",243],")",["T_WHITESPACE"," ",243],"{",["T_WHITESPACE","\n",243],["T_COMMENT","\/\/                throw new Exception(\"LIMIT argument offset={$limitOffset} is not valid\");\n",244],["T_WHITESPACE","            ",245],"}",["T_WHITESPACE","\n\n            ",245],["T_IF","if",247],["T_WHITESPACE"," ",247],"(",["T_VARIABLE","$limitOffset",247],["T_WHITESPACE"," ",247],"+",["T_WHITESPACE"," ",247],["T_VARIABLE","$limitCount",247],["T_WHITESPACE"," ",247],["T_IS_NOT_EQUAL","!=",247],["T_WHITESPACE"," ",247],["T_VARIABLE","$limitOffset",247],["T_WHITESPACE"," ",247],"+",["T_WHITESPACE"," ",247],["T_LNUMBER","1",247],")",["T_WHITESPACE"," ",247],"{",["T_WHITESPACE","\n                ",247],["T_VARIABLE","$columns",248],["T_WHITESPACE"," ",248],"=",["T_WHITESPACE"," ",248],["T_ARRAY","array",248],"(",")",";",["T_WHITESPACE","\n                ",248],["T_FOREACH","foreach",249],["T_WHITESPACE"," ",249],"(",["T_VARIABLE","$columnList",249],["T_WHITESPACE"," ",249],["T_AS","as",249],["T_WHITESPACE"," ",249],["T_VARIABLE","$columnEntry",249],")",["T_WHITESPACE"," ",249],"{",["T_WHITESPACE","\n                    ",249],["T_VARIABLE","$columns",250],"[","]",["T_WHITESPACE"," ",250],"=",["T_WHITESPACE"," ",250],["T_VARIABLE","$columnEntry",250],"[",["T_LNUMBER","2",250],"]",["T_WHITESPACE"," ",250],"?",["T_WHITESPACE"," ",250],["T_VARIABLE","$columnEntry",250],"[",["T_LNUMBER","2",250],"]",["T_WHITESPACE"," ",250],":",["T_WHITESPACE"," ",250],["T_VARIABLE","$columnEntry",250],"[",["T_LNUMBER","1",250],"]",";",["T_WHITESPACE","\n                ",250],"}",["T_WHITESPACE","\n\n                ",251],["T_VARIABLE","$query",253],["T_WHITESPACE"," ",253],"=",["T_WHITESPACE"," ",253],["T_STRING","sprintf",253],"(",["T_CONSTANT_ENCAPSED_STRING","'%s LIMIT %s, %s'",253],",",["T_WHITESPACE"," ",253],["T_VARIABLE","$query",253],",",["T_WHITESPACE"," ",253],["T_VARIABLE","$limitCount",253],",",["T_WHITESPACE"," ",253],["T_VARIABLE","$limitOffset",253],")",";",["T_WHITESPACE","\n            ",253],"}",["T_WHITESPACE","\n        ",254],"}",["T_WHITESPACE","\n\n        ",255],["T_RETURN","return",257],["T_WHITESPACE"," ",257],["T_VARIABLE","$query",257],";",["T_WHITESPACE","\n    ",257],"}",["T_WHITESPACE","\n\n    ",258],["T_DOC_COMMENT","\/**\n     * Prepare select column list\n     *\n     * @param Varien_Db_Select $select\n     * @param $groupByCondition OPTIONAL\n     * @return array\n     * @throws Zend_Db_Exception\n     *\/",260],["T_WHITESPACE","\n    ",267],["T_PUBLIC","public",268],["T_WHITESPACE"," ",268],["T_FUNCTION","function",268],["T_WHITESPACE"," ",268],["T_STRING","prepareColumnsList",268],"(",["T_STRING","Varien_Db_Select",268],["T_WHITESPACE"," ",268],["T_VARIABLE","$select",268],",",["T_WHITESPACE"," ",268],["T_VARIABLE","$groupByCondition",268],["T_WHITESPACE"," ",268],"=",["T_WHITESPACE"," ",268],["T_STRING","null",268],")",["T_WHITESPACE","\n    ",268],"{",["T_WHITESPACE","\n        ",269],["T_IF","if",270],["T_WHITESPACE"," ",270],"(","!",["T_STRING","count",270],"(",["T_VARIABLE","$select",270],["T_OBJECT_OPERATOR","->",270],["T_STRING","getPart",270],"(",["T_STRING","Zend_Db_Select",270],["T_DOUBLE_COLON","::",270],["T_STRING","FROM",270],")",")",")",["T_WHITESPACE"," ",270],"{",["T_WHITESPACE","\n            ",270],["T_RETURN","return",271],["T_WHITESPACE"," ",271],["T_VARIABLE","$select",271],["T_OBJECT_OPERATOR","->",271],["T_STRING","getPart",271],"(",["T_STRING","Zend_Db_Select",271],["T_DOUBLE_COLON","::",271],["T_STRING","COLUMNS",271],")",";",["T_WHITESPACE","\n        ",271],"}",["T_WHITESPACE","\n\n        ",272],["T_VARIABLE","$columns",274],["T_WHITESPACE","          ",274],"=",["T_WHITESPACE"," ",274],["T_VARIABLE","$select",274],["T_OBJECT_OPERATOR","->",274],["T_STRING","getPart",274],"(",["T_STRING","Zend_Db_Select",274],["T_DOUBLE_COLON","::",274],["T_STRING","COLUMNS",274],")",";",["T_WHITESPACE","\n        ",274],["T_VARIABLE","$tables",275],["T_WHITESPACE","           ",275],"=",["T_WHITESPACE"," ",275],["T_VARIABLE","$select",275],["T_OBJECT_OPERATOR","->",275],["T_STRING","getPart",275],"(",["T_STRING","Zend_Db_Select",275],["T_DOUBLE_COLON","::",275],["T_STRING","FROM",275],")",";",["T_WHITESPACE","\n        ",275],["T_VARIABLE","$preparedColumns",276],["T_WHITESPACE","  ",276],"=",["T_WHITESPACE"," ",276],["T_ARRAY","array",276],"(",")",";",["T_WHITESPACE","\n\n        ",276],["T_FOREACH","foreach",278],["T_WHITESPACE"," ",278],"(",["T_VARIABLE","$columns",278],["T_WHITESPACE"," ",278],["T_AS","as",278],["T_WHITESPACE"," ",278],["T_VARIABLE","$columnEntry",278],")",["T_WHITESPACE"," ",278],"{",["T_WHITESPACE","\n            ",278],["T_LIST","list",279],"(",["T_VARIABLE","$correlationName",279],",",["T_WHITESPACE"," ",279],["T_VARIABLE","$column",279],",",["T_WHITESPACE"," ",279],["T_VARIABLE","$alias",279],")",["T_WHITESPACE"," ",279],"=",["T_WHITESPACE"," ",279],["T_VARIABLE","$columnEntry",279],";",["T_WHITESPACE","\n            ",279],["T_IF","if",280],["T_WHITESPACE"," ",280],"(",["T_VARIABLE","$column",280],["T_WHITESPACE"," ",280],["T_INSTANCEOF","instanceof",280],["T_WHITESPACE"," ",280],["T_STRING","Zend_Db_Expr",280],")",["T_WHITESPACE"," ",280],"{",["T_WHITESPACE","\n                ",280],["T_IF","if",281],["T_WHITESPACE"," ",281],"(",["T_VARIABLE","$alias",281],["T_WHITESPACE"," ",281],["T_IS_NOT_IDENTICAL","!==",281],["T_WHITESPACE"," ",281],["T_STRING","null",281],")",["T_WHITESPACE"," ",281],"{",["T_WHITESPACE","\n                    ",281],["T_IF","if",282],["T_WHITESPACE"," ",282],"(",["T_STRING","preg_match",282],"(",["T_CONSTANT_ENCAPSED_STRING","'\/(^|[^a-zA-Z_])^(SELECT)?(SUM|MIN|MAX|AVG|COUNT)\\s*\\(\/i'",282],",",["T_WHITESPACE"," ",282],["T_VARIABLE","$column",282],",",["T_WHITESPACE"," ",282],["T_VARIABLE","$matches",282],")",")",["T_WHITESPACE"," ",282],"{",["T_WHITESPACE","\n                        ",282],["T_VARIABLE","$column",283],["T_WHITESPACE"," ",283],"=",["T_WHITESPACE"," ",283],["T_VARIABLE","$this",283],["T_OBJECT_OPERATOR","->",283],["T_STRING","prepareColumn",283],"(",["T_VARIABLE","$column",283],",",["T_WHITESPACE"," ",283],["T_VARIABLE","$groupByCondition",283],")",";",["T_WHITESPACE","\n                    ",283],"}",["T_WHITESPACE","\n                    ",284],["T_VARIABLE","$preparedColumns",285],"[",["T_STRING","strtoupper",285],"(",["T_VARIABLE","$alias",285],")","]",["T_WHITESPACE"," ",285],"=",["T_WHITESPACE"," ",285],["T_ARRAY","array",285],"(",["T_STRING","null",285],",",["T_WHITESPACE"," ",285],["T_VARIABLE","$column",285],",",["T_WHITESPACE"," ",285],["T_VARIABLE","$alias",285],")",";",["T_WHITESPACE","\n                ",285],"}",["T_WHITESPACE"," ",286],["T_ELSE","else",286],["T_WHITESPACE"," ",286],"{",["T_WHITESPACE","\n                    ",286],["T_THROW","throw",287],["T_WHITESPACE"," ",287],["T_NEW","new",287],["T_WHITESPACE"," ",287],["T_STRING","Zend_Db_Exception",287],"(",["T_CONSTANT_ENCAPSED_STRING","\"Can't prepare expression without alias\"",287],")",";",["T_WHITESPACE","\n                ",287],"}",["T_WHITESPACE","\n            ",288],"}",["T_WHITESPACE"," ",289],["T_ELSE","else",289],["T_WHITESPACE"," ",289],"{",["T_WHITESPACE","\n                ",289],["T_IF","if",290],["T_WHITESPACE"," ",290],"(",["T_VARIABLE","$column",290],["T_WHITESPACE"," ",290],["T_IS_EQUAL","==",290],["T_WHITESPACE"," ",290],["T_STRING","Zend_Db_Select",290],["T_DOUBLE_COLON","::",290],["T_STRING","SQL_WILDCARD",290],")",["T_WHITESPACE"," ",290],"{",["T_WHITESPACE","\n                    ",290],["T_IF","if",291],["T_WHITESPACE"," ",291],"(",["T_VARIABLE","$tables",291],"[",["T_VARIABLE","$correlationName",291],"]","[",["T_CONSTANT_ENCAPSED_STRING","'tableName'",291],"]",["T_WHITESPACE"," ",291],["T_INSTANCEOF","instanceof",291],["T_WHITESPACE"," ",291],["T_STRING","Zend_Db_Expr",291],")",["T_WHITESPACE"," ",291],"{",["T_WHITESPACE","\n                        ",291],["T_THROW","throw",292],["T_WHITESPACE"," ",292],["T_NEW","new",292],["T_WHITESPACE"," ",292],["T_STRING","Zend_Db_Exception",292],"(",["T_CONSTANT_ENCAPSED_STRING","\"Can't prepare expression when tableName is instance of Zend_Db_Expr\"",292],")",";",["T_WHITESPACE","\n                    ",292],"}",["T_WHITESPACE","\n                    ",293],["T_VARIABLE","$tableColumns",294],["T_WHITESPACE"," ",294],"=",["T_WHITESPACE"," ",294],["T_VARIABLE","$this",294],["T_OBJECT_OPERATOR","->",294],["T_STRING","_getReadAdapter",294],"(",")",["T_OBJECT_OPERATOR","->",294],["T_STRING","describeTable",294],"(",["T_VARIABLE","$tables",294],"[",["T_VARIABLE","$correlationName",294],"]","[",["T_CONSTANT_ENCAPSED_STRING","'tableName'",294],"]",")",";",["T_WHITESPACE","\n                    ",294],["T_FOREACH","foreach",295],"(",["T_STRING","array_keys",295],"(",["T_VARIABLE","$tableColumns",295],")",["T_WHITESPACE"," ",295],["T_AS","as",295],["T_WHITESPACE"," ",295],["T_VARIABLE","$col",295],")",["T_WHITESPACE"," ",295],"{",["T_WHITESPACE","\n                        ",295],["T_VARIABLE","$preparedColumns",296],"[",["T_STRING","strtoupper",296],"(",["T_VARIABLE","$col",296],")","]",["T_WHITESPACE"," ",296],"=",["T_WHITESPACE"," ",296],["T_ARRAY","array",296],"(",["T_VARIABLE","$correlationName",296],",",["T_WHITESPACE"," ",296],["T_VARIABLE","$col",296],",",["T_WHITESPACE"," ",296],["T_STRING","null",296],")",";",["T_WHITESPACE","\n                    ",296],"}",["T_WHITESPACE","\n                ",297],"}",["T_WHITESPACE"," ",298],["T_ELSE","else",298],["T_WHITESPACE"," ",298],"{",["T_WHITESPACE","\n                    ",298],["T_VARIABLE","$columnKey",299],["T_WHITESPACE"," ",299],"=",["T_WHITESPACE"," ",299],["T_STRING","is_null",299],"(",["T_VARIABLE","$alias",299],")",["T_WHITESPACE"," ",299],"?",["T_WHITESPACE"," ",299],["T_VARIABLE","$column",299],["T_WHITESPACE"," ",299],":",["T_WHITESPACE"," ",299],["T_VARIABLE","$alias",299],";",["T_WHITESPACE","\n                    ",299],["T_VARIABLE","$preparedColumns",300],"[",["T_STRING","strtoupper",300],"(",["T_VARIABLE","$columnKey",300],")","]",["T_WHITESPACE"," ",300],"=",["T_WHITESPACE"," ",300],["T_ARRAY","array",300],"(",["T_VARIABLE","$correlationName",300],",",["T_WHITESPACE"," ",300],["T_VARIABLE","$column",300],",",["T_WHITESPACE"," ",300],["T_VARIABLE","$alias",300],")",";",["T_WHITESPACE","\n                ",300],"}",["T_WHITESPACE","\n            ",301],"}",["T_WHITESPACE","\n        ",302],"}",["T_WHITESPACE","\n\n",303],["T_COMMENT","\/\/        $select->reset(Zend_Db_Select::COLUMNS);\n",305],["T_COMMENT","\/\/        $select->setPart(Zend_Db_Select::COLUMNS, array_values($preparedColumns));\n",306],["T_WHITESPACE","\n        ",307],["T_RETURN","return",308],["T_WHITESPACE"," ",308],["T_VARIABLE","$preparedColumns",308],";",["T_WHITESPACE","\n    ",308],"}",["T_WHITESPACE","\n\n    ",309],["T_DOC_COMMENT","\/**\n     * Add prepared column group_concat expression\n     *\n     * @param Varien_Db_Select $select\n     * @param string $fieldAlias Field alias which will be added with column group_concat expression\n     * @param string $fields\n     * @param string $groupConcatDelimiter\n     * @param string $fieldsDelimiter\n     * @param string $additionalWhere\n     * @return Varien_Db_Select\n     *\/",311],["T_WHITESPACE","\n    ",321],["T_PUBLIC","public",322],["T_WHITESPACE"," ",322],["T_FUNCTION","function",322],["T_WHITESPACE"," ",322],["T_STRING","addGroupConcatColumn",322],"(",["T_VARIABLE","$select",322],",",["T_WHITESPACE"," ",322],["T_VARIABLE","$fieldAlias",322],",",["T_WHITESPACE"," ",322],["T_VARIABLE","$fields",322],",",["T_WHITESPACE"," ",322],["T_VARIABLE","$groupConcatDelimiter",322],["T_WHITESPACE"," ",322],"=",["T_WHITESPACE"," ",322],["T_CONSTANT_ENCAPSED_STRING","','",322],",",["T_WHITESPACE"," ",322],["T_VARIABLE","$fieldsDelimiter",322],["T_WHITESPACE"," ",322],"=",["T_WHITESPACE"," ",322],["T_CONSTANT_ENCAPSED_STRING","''",322],",",["T_WHITESPACE"," ",322],["T_VARIABLE","$additionalWhere",322],["T_WHITESPACE"," ",322],"=",["T_WHITESPACE"," ",322],["T_CONSTANT_ENCAPSED_STRING","''",322],")",["T_WHITESPACE","\n    ",322],"{",["T_WHITESPACE","\n        ",323],["T_IF","if",324],["T_WHITESPACE"," ",324],"(",["T_STRING","is_array",324],"(",["T_VARIABLE","$fields",324],")",")",["T_WHITESPACE"," ",324],"{",["T_WHITESPACE","\n            ",324],["T_VARIABLE","$fieldExpr",325],["T_WHITESPACE"," ",325],"=",["T_WHITESPACE"," ",325],["T_VARIABLE","$this",325],["T_OBJECT_OPERATOR","->",325],["T_STRING","_getReadAdapter",325],"(",")",["T_OBJECT_OPERATOR","->",325],["T_STRING","getConcatSql",325],"(",["T_VARIABLE","$fields",325],",",["T_WHITESPACE"," ",325],["T_VARIABLE","$fieldsDelimiter",325],")",";",["T_WHITESPACE","\n        ",325],"}",["T_WHITESPACE"," ",326],["T_ELSE","else",326],["T_WHITESPACE"," ",326],"{",["T_WHITESPACE","\n            ",326],["T_VARIABLE","$fieldExpr",327],["T_WHITESPACE"," ",327],"=",["T_WHITESPACE"," ",327],["T_VARIABLE","$fields",327],";",["T_WHITESPACE","\n        ",327],"}",["T_WHITESPACE","\n        ",328],["T_IF","if",329],["T_WHITESPACE"," ",329],"(",["T_VARIABLE","$additionalWhere",329],")",["T_WHITESPACE"," ",329],"{",["T_WHITESPACE","\n            ",329],["T_VARIABLE","$fieldExpr",330],["T_WHITESPACE"," ",330],"=",["T_WHITESPACE"," ",330],["T_VARIABLE","$this",330],["T_OBJECT_OPERATOR","->",330],["T_STRING","_getReadAdapter",330],"(",")",["T_OBJECT_OPERATOR","->",330],["T_STRING","getCheckSql",330],"(",["T_VARIABLE","$additionalWhere",330],",",["T_WHITESPACE"," ",330],["T_VARIABLE","$fieldExpr",330],",",["T_WHITESPACE"," ",330],["T_CONSTANT_ENCAPSED_STRING","\"''\"",330],")",";",["T_WHITESPACE","\n        ",330],"}",["T_WHITESPACE","\n        ",331],["T_VARIABLE","$separator",332],["T_WHITESPACE"," ",332],"=",["T_WHITESPACE"," ",332],["T_CONSTANT_ENCAPSED_STRING","''",332],";",["T_WHITESPACE","\n        ",332],["T_IF","if",333],["T_WHITESPACE"," ",333],"(",["T_VARIABLE","$groupConcatDelimiter",333],")",["T_WHITESPACE"," ",333],"{",["T_WHITESPACE","\n            ",333],["T_VARIABLE","$separator",334],["T_WHITESPACE"," ",334],"=",["T_WHITESPACE"," ",334],["T_STRING","sprintf",334],"(",["T_CONSTANT_ENCAPSED_STRING","\" SEPARATOR '%s'\"",334],",",["T_WHITESPACE","  ",334],["T_VARIABLE","$groupConcatDelimiter",334],")",";",["T_WHITESPACE","\n        ",334],"}",["T_WHITESPACE","\n\n        ",335],["T_VARIABLE","$select",337],["T_OBJECT_OPERATOR","->",337],["T_STRING","columns",337],"(",["T_ARRAY","array",337],"(",["T_VARIABLE","$fieldAlias",337],["T_WHITESPACE"," ",337],["T_DOUBLE_ARROW","=>",337],["T_WHITESPACE"," ",337],["T_NEW","new",337],["T_WHITESPACE"," ",337],["T_STRING","Zend_Db_Expr",337],"(",["T_STRING","sprintf",337],"(",["T_CONSTANT_ENCAPSED_STRING","'GROUP_CONCAT(%s%s)'",337],",",["T_WHITESPACE"," ",337],["T_VARIABLE","$fieldExpr",337],",",["T_WHITESPACE"," ",337],["T_VARIABLE","$separator",337],")",")",")",")",";",["T_WHITESPACE","\n\n        ",337],["T_RETURN","return",339],["T_WHITESPACE"," ",339],["T_VARIABLE","$select",339],";",["T_WHITESPACE","\n    ",339],"}",["T_WHITESPACE","\n\n    ",340],["T_DOC_COMMENT","\/**\n     * Returns expression of days passed from $startDate to $endDate\n     *\n     * @param  string|Zend_Db_Expr $startDate\n     * @param  string|Zend_Db_Expr $endDate\n     * @return Zend_Db_Expr\n     *\/",342],["T_WHITESPACE","\n    ",348],["T_PUBLIC","public",349],["T_WHITESPACE"," ",349],["T_FUNCTION","function",349],["T_WHITESPACE"," ",349],["T_STRING","getDateDiff",349],"(",["T_VARIABLE","$startDate",349],",",["T_WHITESPACE"," ",349],["T_VARIABLE","$endDate",349],")",["T_WHITESPACE","\n    ",349],"{",["T_WHITESPACE","\n        ",350],["T_VARIABLE","$dateDiff",351],["T_WHITESPACE"," ",351],"=",["T_WHITESPACE"," ",351],["T_CONSTANT_ENCAPSED_STRING","'(TO_DAYS('",351],["T_WHITESPACE"," ",351],".",["T_WHITESPACE"," ",351],["T_VARIABLE","$endDate",351],["T_WHITESPACE"," ",351],".",["T_WHITESPACE"," ",351],["T_CONSTANT_ENCAPSED_STRING","') - TO_DAYS('",351],["T_WHITESPACE"," ",351],".",["T_WHITESPACE"," ",351],["T_VARIABLE","$startDate",351],["T_WHITESPACE"," ",351],".",["T_WHITESPACE"," ",351],["T_CONSTANT_ENCAPSED_STRING","'))'",351],";",["T_WHITESPACE","\n        ",351],["T_RETURN","return",352],["T_WHITESPACE"," ",352],["T_NEW","new",352],["T_WHITESPACE"," ",352],["T_STRING","Zend_Db_Expr",352],"(",["T_VARIABLE","$dateDiff",352],")",";",["T_WHITESPACE","\n    ",352],"}",["T_WHITESPACE","\n\n    ",353],["T_DOC_COMMENT","\/**\n     * Escapes and quotes LIKE value.\n     * Stating escape symbol in expression is not required, because we use standard MySQL escape symbol.\n     * For options and escaping see escapeLikeValue().\n     *\n     * @param string $value\n     * @param array $options\n     * @return Zend_Db_Expr\n     *\n     * @see escapeLikeValue()\n     *\/",355],["T_WHITESPACE","\n    ",365],["T_PUBLIC","public",366],["T_WHITESPACE"," ",366],["T_FUNCTION","function",366],["T_WHITESPACE"," ",366],["T_STRING","addLikeEscape",366],"(",["T_VARIABLE","$value",366],",",["T_WHITESPACE"," ",366],["T_VARIABLE","$options",366],["T_WHITESPACE"," ",366],"=",["T_WHITESPACE"," ",366],["T_ARRAY","array",366],"(",")",")",["T_WHITESPACE","\n    ",366],"{",["T_WHITESPACE","\n        ",367],["T_VARIABLE","$value",368],["T_WHITESPACE"," ",368],"=",["T_WHITESPACE"," ",368],["T_VARIABLE","$this",368],["T_OBJECT_OPERATOR","->",368],["T_STRING","escapeLikeValue",368],"(",["T_VARIABLE","$value",368],",",["T_WHITESPACE"," ",368],["T_VARIABLE","$options",368],")",";",["T_WHITESPACE","\n        ",368],["T_RETURN","return",369],["T_WHITESPACE"," ",369],["T_NEW","new",369],["T_WHITESPACE"," ",369],["T_STRING","Zend_Db_Expr",369],"(",["T_VARIABLE","$this",369],["T_OBJECT_OPERATOR","->",369],["T_STRING","_getReadAdapter",369],"(",")",["T_OBJECT_OPERATOR","->",369],["T_STRING","quote",369],"(",["T_VARIABLE","$value",369],")",")",";",["T_WHITESPACE","\n    ",369],"}",["T_WHITESPACE","\n",370],"}",["T_WHITESPACE","\n",371]]
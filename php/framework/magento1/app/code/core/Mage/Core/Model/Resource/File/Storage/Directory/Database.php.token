[["T_OPEN_TAG","<?php\n",1],["T_DOC_COMMENT","\/**\n * Magento\n *\n * NOTICE OF LICENSE\n *\n * This source file is subject to the Open Software License (OSL 3.0)\n * that is bundled with this package in the file LICENSE.txt.\n * It is also available through the world-wide-web at this URL:\n * http:\/\/opensource.org\/licenses\/osl-3.0.php\n * If you did not receive a copy of the license and are unable to\n * obtain it through the world-wide-web, please send an email\n * to license@magento.com so we can send you a copy immediately.\n *\n * DISCLAIMER\n *\n * Do not edit or add to this file if you wish to upgrade Magento to newer\n * versions in the future. If you wish to customize Magento for your\n * needs please refer to http:\/\/www.magento.com for more information.\n *\n * @category    Mage\n * @package     Mage_Core\n * @copyright  Copyright (c) 2006-2016 X.commerce, Inc. and affiliates (http:\/\/www.magento.com)\n * @license    http:\/\/opensource.org\/licenses\/osl-3.0.php  Open Software License (OSL 3.0)\n *\/",2],["T_WHITESPACE","\n\n\n",25],["T_DOC_COMMENT","\/**\n * Directory storage database resource model class\n *\n * @category    Mage\n * @package     Mage_Core\n * @author      Magento Core Team <core@magentocommerce.com>\n *\/",28],["T_WHITESPACE","\n",34],["T_CLASS","class",35],["T_WHITESPACE"," ",35],["T_STRING","Mage_Core_Model_Resource_File_Storage_Directory_Database",35],["T_WHITESPACE"," ",35],["T_EXTENDS","extends",35],["T_WHITESPACE"," ",35],["T_STRING","Mage_Core_Model_Resource_File_Storage_Abstract",35],["T_WHITESPACE","\n",35],"{",["T_WHITESPACE","\n    ",36],["T_DOC_COMMENT","\/**\n     * Define table name and id field for resource\n     *\/",37],["T_WHITESPACE","\n    ",39],["T_PROTECTED","protected",40],["T_WHITESPACE"," ",40],["T_FUNCTION","function",40],["T_WHITESPACE"," ",40],["T_STRING","_construct",40],"(",")",["T_WHITESPACE","\n    ",40],"{",["T_WHITESPACE","\n        ",41],["T_VARIABLE","$this",42],["T_OBJECT_OPERATOR","->",42],["T_STRING","_init",42],"(",["T_CONSTANT_ENCAPSED_STRING","'core\/directory_storage'",42],",",["T_WHITESPACE"," ",42],["T_CONSTANT_ENCAPSED_STRING","'directory_id'",42],")",";",["T_WHITESPACE","\n    ",42],"}",["T_WHITESPACE","\n\n    ",43],["T_DOC_COMMENT","\/**\n     * Create database scheme for storing files\n     *\n     * @return Mage_Core_Model_Mysql4_File_Storage_Database\n     *\/",45],["T_WHITESPACE","\n    ",49],["T_PUBLIC","public",50],["T_WHITESPACE"," ",50],["T_FUNCTION","function",50],["T_WHITESPACE"," ",50],["T_STRING","createDatabaseScheme",50],"(",")",["T_WHITESPACE","\n    ",50],"{",["T_WHITESPACE","\n        ",51],["T_VARIABLE","$adapter",52],["T_WHITESPACE"," ",52],"=",["T_WHITESPACE"," ",52],["T_VARIABLE","$this",52],["T_OBJECT_OPERATOR","->",52],["T_STRING","_getWriteAdapter",52],"(",")",";",["T_WHITESPACE","\n        ",52],["T_VARIABLE","$table",53],["T_WHITESPACE"," ",53],"=",["T_WHITESPACE"," ",53],["T_VARIABLE","$this",53],["T_OBJECT_OPERATOR","->",53],["T_STRING","getMainTable",53],"(",")",";",["T_WHITESPACE","\n        ",53],["T_IF","if",54],["T_WHITESPACE"," ",54],"(",["T_VARIABLE","$adapter",54],["T_OBJECT_OPERATOR","->",54],["T_STRING","isTableExists",54],"(",["T_VARIABLE","$table",54],")",")",["T_WHITESPACE"," ",54],"{",["T_WHITESPACE","\n            ",54],["T_RETURN","return",55],["T_WHITESPACE"," ",55],["T_VARIABLE","$this",55],";",["T_WHITESPACE","\n        ",55],"}",["T_WHITESPACE","\n\n        ",56],["T_VARIABLE","$ddlTable",58],["T_WHITESPACE"," ",58],"=",["T_WHITESPACE"," ",58],["T_VARIABLE","$adapter",58],["T_OBJECT_OPERATOR","->",58],["T_STRING","newTable",58],"(",["T_VARIABLE","$table",58],")",["T_WHITESPACE","\n            ",58],["T_OBJECT_OPERATOR","->",59],["T_STRING","addColumn",59],"(",["T_CONSTANT_ENCAPSED_STRING","'directory_id'",59],",",["T_WHITESPACE"," ",59],["T_STRING","Varien_Db_Ddl_Table",59],["T_DOUBLE_COLON","::",59],["T_STRING","TYPE_INTEGER",59],",",["T_WHITESPACE"," ",59],["T_STRING","null",59],",",["T_WHITESPACE"," ",59],["T_ARRAY","array",59],"(",["T_WHITESPACE","\n                ",59],["T_CONSTANT_ENCAPSED_STRING","'identity'",60],["T_WHITESPACE","  ",60],["T_DOUBLE_ARROW","=>",60],["T_WHITESPACE"," ",60],["T_STRING","true",60],",",["T_WHITESPACE","\n                ",60],["T_CONSTANT_ENCAPSED_STRING","'unsigned'",61],["T_WHITESPACE","  ",61],["T_DOUBLE_ARROW","=>",61],["T_WHITESPACE"," ",61],["T_STRING","true",61],",",["T_WHITESPACE","\n                ",61],["T_CONSTANT_ENCAPSED_STRING","'nullable'",62],["T_WHITESPACE","  ",62],["T_DOUBLE_ARROW","=>",62],["T_WHITESPACE"," ",62],["T_STRING","false",62],",",["T_WHITESPACE","\n                ",62],["T_CONSTANT_ENCAPSED_STRING","'primary'",63],["T_WHITESPACE","   ",63],["T_DOUBLE_ARROW","=>",63],["T_WHITESPACE"," ",63],["T_STRING","true",63],["T_WHITESPACE","\n                ",63],")",",",["T_WHITESPACE"," ",64],["T_CONSTANT_ENCAPSED_STRING","'Directory Id'",64],")",["T_WHITESPACE","\n            ",64],["T_OBJECT_OPERATOR","->",65],["T_STRING","addColumn",65],"(",["T_CONSTANT_ENCAPSED_STRING","'name'",65],",",["T_WHITESPACE"," ",65],["T_STRING","Varien_Db_Ddl_Table",65],["T_DOUBLE_COLON","::",65],["T_STRING","TYPE_TEXT",65],",",["T_WHITESPACE"," ",65],["T_LNUMBER","100",65],",",["T_WHITESPACE"," ",65],["T_ARRAY","array",65],"(",["T_WHITESPACE","\n                ",65],["T_CONSTANT_ENCAPSED_STRING","'nullable'",66],["T_WHITESPACE"," ",66],["T_DOUBLE_ARROW","=>",66],["T_WHITESPACE"," ",66],["T_STRING","false",66],["T_WHITESPACE","\n            ",66],")",",",["T_WHITESPACE"," ",67],["T_CONSTANT_ENCAPSED_STRING","'Directory Name'",67],")",["T_WHITESPACE","\n            ",67],["T_OBJECT_OPERATOR","->",68],["T_STRING","addColumn",68],"(",["T_CONSTANT_ENCAPSED_STRING","'path'",68],",",["T_WHITESPACE"," ",68],["T_STRING","Varien_Db_Ddl_Table",68],["T_DOUBLE_COLON","::",68],["T_STRING","TYPE_TEXT",68],",",["T_WHITESPACE"," ",68],["T_LNUMBER","255",68],",",["T_WHITESPACE"," ",68],["T_ARRAY","array",68],"(",["T_WHITESPACE","\n                ",68],["T_CONSTANT_ENCAPSED_STRING","'default'",69],["T_WHITESPACE"," ",69],["T_DOUBLE_ARROW","=>",69],["T_WHITESPACE"," ",69],["T_STRING","null",69],")",",",["T_WHITESPACE"," ",69],["T_CONSTANT_ENCAPSED_STRING","'Path to the Directory'",69],")",["T_WHITESPACE","\n            ",69],["T_OBJECT_OPERATOR","->",70],["T_STRING","addColumn",70],"(",["T_CONSTANT_ENCAPSED_STRING","'upload_time'",70],",",["T_WHITESPACE"," ",70],["T_STRING","Varien_Db_Ddl_Table",70],["T_DOUBLE_COLON","::",70],["T_STRING","TYPE_TIMESTAMP",70],",",["T_WHITESPACE"," ",70],["T_STRING","null",70],",",["T_WHITESPACE"," ",70],["T_ARRAY","array",70],"(",["T_WHITESPACE","\n                ",70],["T_CONSTANT_ENCAPSED_STRING","'nullable'",71],["T_WHITESPACE"," ",71],["T_DOUBLE_ARROW","=>",71],["T_WHITESPACE"," ",71],["T_STRING","false",71],",",["T_WHITESPACE","\n                ",71],["T_CONSTANT_ENCAPSED_STRING","'default'",72],["T_WHITESPACE"," ",72],["T_DOUBLE_ARROW","=>",72],["T_WHITESPACE"," ",72],["T_STRING","Varien_Db_Ddl_Table",72],["T_DOUBLE_COLON","::",72],["T_STRING","TIMESTAMP_INIT",72],["T_WHITESPACE","\n                ",72],")",",",["T_WHITESPACE"," ",73],["T_CONSTANT_ENCAPSED_STRING","'Upload Timestamp'",73],")",["T_WHITESPACE","\n            ",73],["T_OBJECT_OPERATOR","->",74],["T_STRING","addColumn",74],"(",["T_CONSTANT_ENCAPSED_STRING","'parent_id'",74],",",["T_WHITESPACE"," ",74],["T_STRING","Varien_Db_Ddl_Table",74],["T_DOUBLE_COLON","::",74],["T_STRING","TYPE_INTEGER",74],",",["T_WHITESPACE"," ",74],["T_STRING","null",74],",",["T_WHITESPACE"," ",74],["T_ARRAY","array",74],"(",["T_WHITESPACE","\n                ",74],["T_CONSTANT_ENCAPSED_STRING","'nullable'",75],["T_WHITESPACE"," ",75],["T_DOUBLE_ARROW","=>",75],["T_WHITESPACE"," ",75],["T_STRING","true",75],",",["T_WHITESPACE","\n                ",75],["T_CONSTANT_ENCAPSED_STRING","'default'",76],["T_WHITESPACE"," ",76],["T_DOUBLE_ARROW","=>",76],["T_WHITESPACE"," ",76],["T_STRING","null",76],",",["T_WHITESPACE","\n                ",76],["T_CONSTANT_ENCAPSED_STRING","'unsigned'",77],["T_WHITESPACE"," ",77],["T_DOUBLE_ARROW","=>",77],["T_WHITESPACE"," ",77],["T_STRING","true",77],["T_WHITESPACE","\n                ",77],")",",",["T_WHITESPACE"," ",78],["T_CONSTANT_ENCAPSED_STRING","'Parent Directory Id'",78],")",["T_WHITESPACE","\n            ",78],["T_OBJECT_OPERATOR","->",79],["T_STRING","addIndex",79],"(",["T_VARIABLE","$adapter",79],["T_OBJECT_OPERATOR","->",79],["T_STRING","getIndexName",79],"(",["T_VARIABLE","$table",79],",",["T_WHITESPACE"," ",79],["T_ARRAY","array",79],"(",["T_CONSTANT_ENCAPSED_STRING","'name'",79],",",["T_WHITESPACE"," ",79],["T_CONSTANT_ENCAPSED_STRING","'parent_id'",79],")",",",["T_WHITESPACE","\n                ",79],["T_STRING","Varien_Db_Adapter_Interface",80],["T_DOUBLE_COLON","::",80],["T_STRING","INDEX_TYPE_UNIQUE",80],")",",",["T_WHITESPACE","\n                ",80],["T_ARRAY","array",81],"(",["T_CONSTANT_ENCAPSED_STRING","'name'",81],",",["T_WHITESPACE"," ",81],["T_CONSTANT_ENCAPSED_STRING","'parent_id'",81],")",",",["T_WHITESPACE"," ",81],["T_ARRAY","array",81],"(",["T_CONSTANT_ENCAPSED_STRING","'type'",81],["T_WHITESPACE"," ",81],["T_DOUBLE_ARROW","=>",81],["T_WHITESPACE"," ",81],["T_STRING","Varien_Db_Adapter_Interface",81],["T_DOUBLE_COLON","::",81],["T_STRING","INDEX_TYPE_UNIQUE",81],")",")",["T_WHITESPACE","\n            ",81],["T_OBJECT_OPERATOR","->",82],["T_STRING","addIndex",82],"(",["T_VARIABLE","$adapter",82],["T_OBJECT_OPERATOR","->",82],["T_STRING","getIndexName",82],"(",["T_VARIABLE","$table",82],",",["T_WHITESPACE"," ",82],["T_ARRAY","array",82],"(",["T_CONSTANT_ENCAPSED_STRING","'parent_id'",82],")",")",",",["T_WHITESPACE"," ",82],["T_ARRAY","array",82],"(",["T_CONSTANT_ENCAPSED_STRING","'parent_id'",82],")",")",["T_WHITESPACE","\n            ",82],["T_OBJECT_OPERATOR","->",83],["T_STRING","addForeignKey",83],"(",["T_VARIABLE","$adapter",83],["T_OBJECT_OPERATOR","->",83],["T_STRING","getForeignKeyName",83],"(",["T_VARIABLE","$table",83],",",["T_WHITESPACE"," ",83],["T_CONSTANT_ENCAPSED_STRING","'parent_id'",83],",",["T_WHITESPACE"," ",83],["T_VARIABLE","$table",83],",",["T_WHITESPACE"," ",83],["T_CONSTANT_ENCAPSED_STRING","'directory_id'",83],")",",",["T_WHITESPACE","\n                ",83],["T_CONSTANT_ENCAPSED_STRING","'parent_id'",84],",",["T_WHITESPACE"," ",84],["T_VARIABLE","$table",84],",",["T_WHITESPACE"," ",84],["T_CONSTANT_ENCAPSED_STRING","'directory_id'",84],",",["T_WHITESPACE","\n                ",84],["T_STRING","Varien_Db_Ddl_Table",85],["T_DOUBLE_COLON","::",85],["T_STRING","ACTION_CASCADE",85],",",["T_WHITESPACE"," ",85],["T_STRING","Varien_Db_Ddl_Table",85],["T_DOUBLE_COLON","::",85],["T_STRING","ACTION_CASCADE",85],")",["T_WHITESPACE","\n            ",85],["T_OBJECT_OPERATOR","->",86],["T_STRING","setComment",86],"(",["T_CONSTANT_ENCAPSED_STRING","'Directory Storage'",86],")",";",["T_WHITESPACE","\n\n        ",86],["T_VARIABLE","$adapter",88],["T_OBJECT_OPERATOR","->",88],["T_STRING","createTable",88],"(",["T_VARIABLE","$ddlTable",88],")",";",["T_WHITESPACE","\n        ",88],["T_RETURN","return",89],["T_WHITESPACE"," ",89],["T_VARIABLE","$this",89],";",["T_WHITESPACE","\n    ",89],"}",["T_WHITESPACE","\n\n    ",90],["T_DOC_COMMENT","\/**\n     * Load entity by path\n     *\n     * @param  Mage_Core_Model_File_Storage_Directory_Database $object\n     * @param  string $path\n     * @return Mage_Core_Model_Mysql4_File_Storage_Directory_Database\n     *\/",92],["T_WHITESPACE","\n    ",98],["T_PUBLIC","public",99],["T_WHITESPACE"," ",99],["T_FUNCTION","function",99],["T_WHITESPACE"," ",99],["T_STRING","loadByPath",99],"(",["T_STRING","Mage_Core_Model_File_Storage_Directory_Database",99],["T_WHITESPACE"," ",99],["T_VARIABLE","$object",99],",",["T_WHITESPACE"," ",99],["T_VARIABLE","$path",99],")",["T_WHITESPACE","\n    ",99],"{",["T_WHITESPACE","\n        ",100],["T_VARIABLE","$adapter",101],["T_WHITESPACE"," ",101],"=",["T_WHITESPACE"," ",101],["T_VARIABLE","$this",101],["T_OBJECT_OPERATOR","->",101],["T_STRING","_getReadAdapter",101],"(",")",";",["T_WHITESPACE","\n\n        ",101],["T_VARIABLE","$name",103],["T_WHITESPACE"," ",103],"=",["T_WHITESPACE"," ",103],["T_STRING","basename",103],"(",["T_VARIABLE","$path",103],")",";",["T_WHITESPACE","\n        ",103],["T_VARIABLE","$path",104],["T_WHITESPACE"," ",104],"=",["T_WHITESPACE"," ",104],["T_STRING","dirname",104],"(",["T_VARIABLE","$path",104],")",";",["T_WHITESPACE","\n        ",104],["T_IF","if",105],["T_WHITESPACE"," ",105],"(",["T_VARIABLE","$path",105],["T_WHITESPACE"," ",105],["T_IS_EQUAL","==",105],["T_WHITESPACE"," ",105],["T_CONSTANT_ENCAPSED_STRING","'.'",105],")",["T_WHITESPACE"," ",105],"{",["T_WHITESPACE","\n            ",105],["T_VARIABLE","$path",106],["T_WHITESPACE"," ",106],"=",["T_WHITESPACE"," ",106],["T_CONSTANT_ENCAPSED_STRING","''",106],";",["T_WHITESPACE","\n        ",106],"}",["T_WHITESPACE","\n\n        ",107],["T_VARIABLE","$select",109],["T_WHITESPACE"," ",109],"=",["T_WHITESPACE"," ",109],["T_VARIABLE","$adapter",109],["T_OBJECT_OPERATOR","->",109],["T_STRING","select",109],"(",")",["T_WHITESPACE","\n            ",109],["T_OBJECT_OPERATOR","->",110],["T_STRING","from",110],"(",["T_ARRAY","array",110],"(",["T_CONSTANT_ENCAPSED_STRING","'e'",110],["T_WHITESPACE"," ",110],["T_DOUBLE_ARROW","=>",110],["T_WHITESPACE"," ",110],["T_VARIABLE","$this",110],["T_OBJECT_OPERATOR","->",110],["T_STRING","getMainTable",110],"(",")",")",")",["T_WHITESPACE","\n            ",110],["T_OBJECT_OPERATOR","->",111],["T_STRING","where",111],"(",["T_CONSTANT_ENCAPSED_STRING","'name = ?'",111],",",["T_WHITESPACE"," ",111],["T_VARIABLE","$name",111],")",["T_WHITESPACE","\n            ",111],["T_OBJECT_OPERATOR","->",112],["T_STRING","where",112],"(",["T_VARIABLE","$adapter",112],["T_OBJECT_OPERATOR","->",112],["T_STRING","prepareSqlCondition",112],"(",["T_CONSTANT_ENCAPSED_STRING","'path'",112],",",["T_WHITESPACE"," ",112],["T_ARRAY","array",112],"(",["T_CONSTANT_ENCAPSED_STRING","'seq'",112],["T_WHITESPACE"," ",112],["T_DOUBLE_ARROW","=>",112],["T_WHITESPACE"," ",112],["T_VARIABLE","$path",112],")",")",")",";",["T_WHITESPACE","\n\n        ",112],["T_VARIABLE","$data",114],["T_WHITESPACE"," ",114],"=",["T_WHITESPACE"," ",114],["T_VARIABLE","$adapter",114],["T_OBJECT_OPERATOR","->",114],["T_STRING","fetchRow",114],"(",["T_VARIABLE","$select",114],")",";",["T_WHITESPACE","\n        ",114],["T_IF","if",115],["T_WHITESPACE"," ",115],"(",["T_VARIABLE","$data",115],")",["T_WHITESPACE"," ",115],"{",["T_WHITESPACE","\n            ",115],["T_VARIABLE","$object",116],["T_OBJECT_OPERATOR","->",116],["T_STRING","setData",116],"(",["T_VARIABLE","$data",116],")",";",["T_WHITESPACE","\n            ",116],["T_VARIABLE","$this",117],["T_OBJECT_OPERATOR","->",117],["T_STRING","_afterLoad",117],"(",["T_VARIABLE","$object",117],")",";",["T_WHITESPACE","\n        ",117],"}",["T_WHITESPACE","\n\n        ",118],["T_RETURN","return",120],["T_WHITESPACE"," ",120],["T_VARIABLE","$this",120],";",["T_WHITESPACE","\n    ",120],"}",["T_WHITESPACE","\n\n    ",121],["T_DOC_COMMENT","\/**\n     * Return parent id\n     *\n     * @param string $path\n     * @return int\n     *\/",123],["T_WHITESPACE","\n    ",128],["T_PUBLIC","public",129],["T_WHITESPACE"," ",129],["T_FUNCTION","function",129],["T_WHITESPACE"," ",129],["T_STRING","getParentId",129],"(",["T_VARIABLE","$path",129],")",["T_WHITESPACE","\n    ",129],"{",["T_WHITESPACE","\n        ",130],["T_VARIABLE","$adapter",131],["T_WHITESPACE"," ",131],"=",["T_WHITESPACE"," ",131],["T_VARIABLE","$this",131],["T_OBJECT_OPERATOR","->",131],["T_STRING","_getReadAdapter",131],"(",")",";",["T_WHITESPACE","\n\n        ",131],["T_VARIABLE","$name",133],["T_WHITESPACE"," ",133],"=",["T_WHITESPACE"," ",133],["T_STRING","basename",133],"(",["T_VARIABLE","$path",133],")",";",["T_WHITESPACE","\n        ",133],["T_VARIABLE","$path",134],["T_WHITESPACE"," ",134],"=",["T_WHITESPACE"," ",134],["T_STRING","dirname",134],"(",["T_VARIABLE","$path",134],")",";",["T_WHITESPACE","\n        ",134],["T_IF","if",135],["T_WHITESPACE"," ",135],"(",["T_VARIABLE","$path",135],["T_WHITESPACE"," ",135],["T_IS_EQUAL","==",135],["T_WHITESPACE"," ",135],["T_CONSTANT_ENCAPSED_STRING","'.'",135],")",["T_WHITESPACE"," ",135],"{",["T_WHITESPACE","\n            ",135],["T_VARIABLE","$path",136],["T_WHITESPACE"," ",136],"=",["T_WHITESPACE"," ",136],["T_CONSTANT_ENCAPSED_STRING","''",136],";",["T_WHITESPACE","\n        ",136],"}",["T_WHITESPACE","\n\n        ",137],["T_VARIABLE","$select",139],["T_WHITESPACE"," ",139],"=",["T_WHITESPACE"," ",139],["T_VARIABLE","$adapter",139],["T_OBJECT_OPERATOR","->",139],["T_STRING","select",139],"(",")",["T_WHITESPACE","\n            ",139],["T_OBJECT_OPERATOR","->",140],["T_STRING","from",140],"(",["T_WHITESPACE","\n                ",140],["T_ARRAY","array",141],"(",["T_CONSTANT_ENCAPSED_STRING","'e'",141],["T_WHITESPACE"," ",141],["T_DOUBLE_ARROW","=>",141],["T_WHITESPACE"," ",141],["T_VARIABLE","$this",141],["T_OBJECT_OPERATOR","->",141],["T_STRING","getMainTable",141],"(",")",")",",",["T_WHITESPACE","\n                ",141],["T_ARRAY","array",142],"(",["T_CONSTANT_ENCAPSED_STRING","'directory_id'",142],")",["T_WHITESPACE","\n            ",142],")",["T_WHITESPACE","\n            ",143],["T_OBJECT_OPERATOR","->",144],["T_STRING","where",144],"(",["T_CONSTANT_ENCAPSED_STRING","'name = ?'",144],",",["T_WHITESPACE"," ",144],["T_VARIABLE","$name",144],")",["T_WHITESPACE","\n            ",144],["T_OBJECT_OPERATOR","->",145],["T_STRING","where",145],"(",["T_VARIABLE","$adapter",145],["T_OBJECT_OPERATOR","->",145],["T_STRING","prepareSqlCondition",145],"(",["T_CONSTANT_ENCAPSED_STRING","'path'",145],",",["T_WHITESPACE"," ",145],["T_ARRAY","array",145],"(",["T_CONSTANT_ENCAPSED_STRING","'seq'",145],["T_WHITESPACE"," ",145],["T_DOUBLE_ARROW","=>",145],["T_WHITESPACE"," ",145],["T_VARIABLE","$path",145],")",")",")",";",["T_WHITESPACE","\n\n        ",145],["T_RETURN","return",147],["T_WHITESPACE"," ",147],["T_VARIABLE","$adapter",147],["T_OBJECT_OPERATOR","->",147],["T_STRING","fetchOne",147],"(",["T_VARIABLE","$select",147],")",";",["T_WHITESPACE","\n    ",147],"}",["T_WHITESPACE","\n\n    ",148],["T_DOC_COMMENT","\/**\n     * Delete all directories from storage\n     *\n     * @return Mage_Core_Model_Mysql4_File_Storage_Database\n     *\/",150],["T_WHITESPACE","\n    ",154],["T_PUBLIC","public",155],["T_WHITESPACE"," ",155],["T_FUNCTION","function",155],["T_WHITESPACE"," ",155],["T_STRING","clearDirectories",155],"(",")",["T_WHITESPACE","\n    ",155],"{",["T_WHITESPACE","\n        ",156],["T_VARIABLE","$adapter",157],["T_WHITESPACE"," ",157],"=",["T_WHITESPACE"," ",157],["T_VARIABLE","$this",157],["T_OBJECT_OPERATOR","->",157],["T_STRING","_getWriteAdapter",157],"(",")",";",["T_WHITESPACE","\n        ",157],["T_VARIABLE","$adapter",158],["T_OBJECT_OPERATOR","->",158],["T_STRING","delete",158],"(",["T_VARIABLE","$this",158],["T_OBJECT_OPERATOR","->",158],["T_STRING","getMainTable",158],"(",")",")",";",["T_WHITESPACE","\n\n        ",158],["T_RETURN","return",160],["T_WHITESPACE"," ",160],["T_VARIABLE","$this",160],";",["T_WHITESPACE","\n    ",160],"}",["T_WHITESPACE","\n\n    ",161],["T_DOC_COMMENT","\/**\n     * Export directories from database\n     *\n     * @param int $offset\n     * @param int $count\n     * @return mixed\n     *\/",163],["T_WHITESPACE","\n    ",169],["T_PUBLIC","public",170],["T_WHITESPACE"," ",170],["T_FUNCTION","function",170],["T_WHITESPACE"," ",170],["T_STRING","exportDirectories",170],"(",["T_VARIABLE","$offset",170],",",["T_WHITESPACE"," ",170],["T_VARIABLE","$count",170],["T_WHITESPACE"," ",170],"=",["T_WHITESPACE"," ",170],["T_LNUMBER","100",170],")",["T_WHITESPACE","\n    ",170],"{",["T_WHITESPACE","\n        ",171],["T_VARIABLE","$adapter",172],["T_WHITESPACE"," ",172],"=",["T_WHITESPACE"," ",172],["T_VARIABLE","$this",172],["T_OBJECT_OPERATOR","->",172],["T_STRING","_getReadAdapter",172],"(",")",";",["T_WHITESPACE","\n\n        ",172],["T_VARIABLE","$select",174],["T_WHITESPACE"," ",174],"=",["T_WHITESPACE"," ",174],["T_VARIABLE","$adapter",174],["T_OBJECT_OPERATOR","->",174],["T_STRING","select",174],"(",")",["T_WHITESPACE","\n            ",174],["T_OBJECT_OPERATOR","->",175],["T_STRING","from",175],"(",["T_WHITESPACE","\n                ",175],["T_ARRAY","array",176],"(",["T_CONSTANT_ENCAPSED_STRING","'e'",176],["T_WHITESPACE"," ",176],["T_DOUBLE_ARROW","=>",176],["T_WHITESPACE"," ",176],["T_VARIABLE","$this",176],["T_OBJECT_OPERATOR","->",176],["T_STRING","getMainTable",176],"(",")",")",",",["T_WHITESPACE","\n                ",176],["T_ARRAY","array",177],"(",["T_CONSTANT_ENCAPSED_STRING","'name'",177],",",["T_WHITESPACE"," ",177],["T_CONSTANT_ENCAPSED_STRING","'path'",177],")",["T_WHITESPACE","\n            ",177],")",["T_WHITESPACE","\n            ",178],["T_OBJECT_OPERATOR","->",179],["T_STRING","order",179],"(",["T_CONSTANT_ENCAPSED_STRING","'directory_id'",179],")",["T_WHITESPACE","\n            ",179],["T_OBJECT_OPERATOR","->",180],["T_STRING","limit",180],"(",["T_VARIABLE","$count",180],",",["T_WHITESPACE"," ",180],["T_VARIABLE","$offset",180],")",";",["T_WHITESPACE","\n\n        ",180],["T_RETURN","return",182],["T_WHITESPACE"," ",182],["T_VARIABLE","$adapter",182],["T_OBJECT_OPERATOR","->",182],["T_STRING","fetchAll",182],"(",["T_VARIABLE","$select",182],")",";",["T_WHITESPACE","\n    ",182],"}",["T_WHITESPACE","\n\n    ",183],["T_DOC_COMMENT","\/**\n     * Return directory file listing\n     *\n     * @param string $directory\n     * @return mixed\n     *\/",185],["T_WHITESPACE","\n    ",190],["T_PUBLIC","public",191],["T_WHITESPACE"," ",191],["T_FUNCTION","function",191],["T_WHITESPACE"," ",191],["T_STRING","getSubdirectories",191],"(",["T_VARIABLE","$directory",191],")",["T_WHITESPACE","\n    ",191],"{",["T_WHITESPACE","\n        ",192],["T_VARIABLE","$directory",193],["T_WHITESPACE"," ",193],"=",["T_WHITESPACE"," ",193],["T_STRING","trim",193],"(",["T_VARIABLE","$directory",193],",",["T_WHITESPACE"," ",193],["T_CONSTANT_ENCAPSED_STRING","'\/'",193],")",";",["T_WHITESPACE","\n        ",193],["T_VARIABLE","$adapter",194],["T_WHITESPACE"," ",194],"=",["T_WHITESPACE"," ",194],["T_VARIABLE","$this",194],["T_OBJECT_OPERATOR","->",194],["T_STRING","_getReadAdapter",194],"(",")",";",["T_WHITESPACE","\n\n        ",194],["T_VARIABLE","$select",196],["T_WHITESPACE"," ",196],"=",["T_WHITESPACE"," ",196],["T_VARIABLE","$adapter",196],["T_OBJECT_OPERATOR","->",196],["T_STRING","select",196],"(",")",["T_WHITESPACE","\n            ",196],["T_OBJECT_OPERATOR","->",197],["T_STRING","from",197],"(",["T_WHITESPACE","\n                ",197],["T_ARRAY","array",198],"(",["T_CONSTANT_ENCAPSED_STRING","'e'",198],["T_WHITESPACE"," ",198],["T_DOUBLE_ARROW","=>",198],["T_WHITESPACE"," ",198],["T_VARIABLE","$this",198],["T_OBJECT_OPERATOR","->",198],["T_STRING","getMainTable",198],"(",")",")",",",["T_WHITESPACE","\n                ",198],["T_ARRAY","array",199],"(",["T_CONSTANT_ENCAPSED_STRING","'name'",199],",",["T_WHITESPACE"," ",199],["T_CONSTANT_ENCAPSED_STRING","'path'",199],")",["T_WHITESPACE","\n            ",199],")",["T_WHITESPACE","\n            ",200],["T_OBJECT_OPERATOR","->",201],["T_STRING","where",201],"(",["T_VARIABLE","$adapter",201],["T_OBJECT_OPERATOR","->",201],["T_STRING","prepareSqlCondition",201],"(",["T_CONSTANT_ENCAPSED_STRING","'path'",201],",",["T_WHITESPACE"," ",201],["T_ARRAY","array",201],"(",["T_CONSTANT_ENCAPSED_STRING","'seq'",201],["T_WHITESPACE"," ",201],["T_DOUBLE_ARROW","=>",201],["T_WHITESPACE"," ",201],["T_VARIABLE","$directory",201],")",")",")",["T_WHITESPACE","\n            ",201],["T_OBJECT_OPERATOR","->",202],["T_STRING","order",202],"(",["T_CONSTANT_ENCAPSED_STRING","'directory_id'",202],")",";",["T_WHITESPACE","\n\n        ",202],["T_RETURN","return",204],["T_WHITESPACE"," ",204],["T_VARIABLE","$adapter",204],["T_OBJECT_OPERATOR","->",204],["T_STRING","fetchAll",204],"(",["T_VARIABLE","$select",204],")",";",["T_WHITESPACE","\n    ",204],"}",["T_WHITESPACE","\n\n    ",205],["T_DOC_COMMENT","\/**\n     * Delete directory\n     *\n     * @param string $name\n     * @param string $path\n     *\/",207],["T_WHITESPACE","\n    ",212],["T_PUBLIC","public",213],["T_WHITESPACE"," ",213],["T_FUNCTION","function",213],["T_WHITESPACE"," ",213],["T_STRING","deleteDirectory",213],"(",["T_VARIABLE","$name",213],",",["T_WHITESPACE"," ",213],["T_VARIABLE","$path",213],")",["T_WHITESPACE","\n    ",213],"{",["T_WHITESPACE","\n        ",214],["T_VARIABLE","$adapter",215],["T_WHITESPACE"," ",215],"=",["T_WHITESPACE"," ",215],["T_VARIABLE","$this",215],["T_OBJECT_OPERATOR","->",215],["T_STRING","_getWriteAdapter",215],"(",")",";",["T_WHITESPACE","\n\n        ",215],["T_VARIABLE","$where",217],["T_WHITESPACE"," ",217],"=",["T_WHITESPACE"," ",217],["T_ARRAY","array",217],"(",["T_CONSTANT_ENCAPSED_STRING","'name = ?'",217],["T_WHITESPACE"," ",217],["T_DOUBLE_ARROW","=>",217],["T_WHITESPACE"," ",217],["T_VARIABLE","$name",217],")",";",["T_WHITESPACE","\n        ",217],["T_VARIABLE","$where",218],"[","]",["T_WHITESPACE"," ",218],"=",["T_WHITESPACE"," ",218],["T_NEW","new",218],["T_WHITESPACE"," ",218],["T_STRING","Zend_Db_Expr",218],"(",["T_VARIABLE","$adapter",218],["T_OBJECT_OPERATOR","->",218],["T_STRING","prepareSqlCondition",218],"(",["T_CONSTANT_ENCAPSED_STRING","'path'",218],",",["T_WHITESPACE"," ",218],["T_ARRAY","array",218],"(",["T_CONSTANT_ENCAPSED_STRING","'seq'",218],["T_WHITESPACE"," ",218],["T_DOUBLE_ARROW","=>",218],["T_WHITESPACE"," ",218],["T_VARIABLE","$path",218],")",")",")",";",["T_WHITESPACE","\n\n        ",218],["T_VARIABLE","$adapter",220],["T_OBJECT_OPERATOR","->",220],["T_STRING","delete",220],"(",["T_VARIABLE","$this",220],["T_OBJECT_OPERATOR","->",220],["T_STRING","getMainTable",220],"(",")",",",["T_WHITESPACE"," ",220],["T_VARIABLE","$where",220],")",";",["T_WHITESPACE","\n    ",220],"}",["T_WHITESPACE","\n",221],"}",["T_WHITESPACE","\n",222]]
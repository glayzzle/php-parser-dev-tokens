[["T_OPEN_TAG","<?php\n",1],["T_DOC_COMMENT","\/**\n * Magento\n *\n * NOTICE OF LICENSE\n *\n * This source file is subject to the Open Software License (OSL 3.0)\n * that is bundled with this package in the file LICENSE.txt.\n * It is also available through the world-wide-web at this URL:\n * http:\/\/opensource.org\/licenses\/osl-3.0.php\n * If you did not receive a copy of the license and are unable to\n * obtain it through the world-wide-web, please send an email\n * to license@magento.com so we can send you a copy immediately.\n *\n * DISCLAIMER\n *\n * Do not edit or add to this file if you wish to upgrade Magento to newer\n * versions in the future. If you wish to customize Magento for your\n * needs please refer to http:\/\/www.magento.com for more information.\n *\n * @category    Mage\n * @package     Mage_Core\n * @copyright  Copyright (c) 2006-2016 X.commerce, Inc. and affiliates (http:\/\/www.magento.com)\n * @license    http:\/\/opensource.org\/licenses\/osl-3.0.php  Open Software License (OSL 3.0)\n *\/",2],["T_WHITESPACE","\n\n",25],["T_DOC_COMMENT","\/**\n * URL\n *\n * Properties:\n *\n * - request\n *\n * - relative_url: true, false\n * - type: 'link', 'skin', 'js', 'media'\n * - store: instanceof Mage_Core_Model_Store\n * - secure: true, false\n *\n * - scheme: 'http', 'https'\n * - user: 'user'\n * - password: 'password'\n * - host: 'localhost'\n * - port: 80, 443\n * - base_path: '\/dev\/magento\/'\n * - base_script: 'index.php'\n *\n * - storeview_path: 'storeview\/'\n * - route_path: 'module\/controller\/action\/param1\/value1\/param2\/value2'\n * - route_name: 'module'\n * - controller_name: 'controller'\n * - action_name: 'action'\n * - route_params: array('param1'=>'value1', 'param2'=>'value2')\n *\n * - query: (?)'param1=value1&param2=value2'\n * - query_array: array('param1'=>'value1', 'param2'=>'value2')\n * - fragment: (#)'fragment-anchor'\n *\n * URL structure:\n *\n * https:\/\/user:password@host:443\/base_path\/[base_script][storeview_path]route_name\/controller_name\/action_name\/param1\/value1?query_param=query_value#fragment\n *       \\__________A___________\/\\____________________________________B_____________________________________\/\n * \\__________________C___________________\/              \\__________________D_________________\/ \\_____E_____\/\n * \\_____________F______________\/                        \\___________________________G______________________\/\n * \\___________________________________________________H____________________________________________________\/\n *\n * - A: authority\n * - B: path\n * - C: absolute_base_url\n * - D: action_path\n * - E: route_params\n * - F: host_url\n * - G: route_path\n * - H: route_url\n *\n * @category   Mage\n * @package    Mage_Core\n * @author      Magento Core Team <core@magentocommerce.com>\n *\/",27],["T_WHITESPACE","\n",78],["T_CLASS","class",79],["T_WHITESPACE"," ",79],["T_STRING","Mage_Core_Model_Url",79],["T_WHITESPACE"," ",79],["T_EXTENDS","extends",79],["T_WHITESPACE"," ",79],["T_STRING","Varien_Object",79],["T_WHITESPACE","\n",79],"{",["T_WHITESPACE","\n    ",80],["T_DOC_COMMENT","\/**\n     * Default controller name\n     *\/",81],["T_WHITESPACE","\n    ",83],["T_CONST","const",84],["T_WHITESPACE"," ",84],["T_STRING","DEFAULT_CONTROLLER_NAME",84],["T_WHITESPACE","   ",84],"=",["T_WHITESPACE"," ",84],["T_CONSTANT_ENCAPSED_STRING","'index'",84],";",["T_WHITESPACE","\n\n    ",84],["T_DOC_COMMENT","\/**\n     * Default action name\n     *\/",86],["T_WHITESPACE","\n    ",88],["T_CONST","const",89],["T_WHITESPACE"," ",89],["T_STRING","DEFAULT_ACTION_NAME",89],["T_WHITESPACE","       ",89],"=",["T_WHITESPACE"," ",89],["T_CONSTANT_ENCAPSED_STRING","'index'",89],";",["T_WHITESPACE","\n\n    ",89],["T_DOC_COMMENT","\/**\n     * XML base url path unsecure\n     *\/",91],["T_WHITESPACE","\n    ",93],["T_CONST","const",94],["T_WHITESPACE"," ",94],["T_STRING","XML_PATH_UNSECURE_URL",94],["T_WHITESPACE","     ",94],"=",["T_WHITESPACE"," ",94],["T_CONSTANT_ENCAPSED_STRING","'web\/unsecure\/base_url'",94],";",["T_WHITESPACE","\n\n    ",94],["T_DOC_COMMENT","\/**\n     * XML base url path secure\n     *\/",96],["T_WHITESPACE","\n    ",98],["T_CONST","const",99],["T_WHITESPACE"," ",99],["T_STRING","XML_PATH_SECURE_URL",99],["T_WHITESPACE","       ",99],"=",["T_WHITESPACE"," ",99],["T_CONSTANT_ENCAPSED_STRING","'web\/secure\/base_url'",99],";",["T_WHITESPACE","\n\n    ",99],["T_DOC_COMMENT","\/**\n     * XML path for using in adminhtml\n     *\/",101],["T_WHITESPACE","\n    ",103],["T_CONST","const",104],["T_WHITESPACE"," ",104],["T_STRING","XML_PATH_SECURE_IN_ADMIN",104],["T_WHITESPACE","  ",104],"=",["T_WHITESPACE"," ",104],["T_CONSTANT_ENCAPSED_STRING","'default\/web\/secure\/use_in_adminhtml'",104],";",["T_WHITESPACE","\n\n    ",104],["T_DOC_COMMENT","\/**\n     * XML path for using in frontend\n     *\/",106],["T_WHITESPACE","\n    ",108],["T_CONST","const",109],["T_WHITESPACE"," ",109],["T_STRING","XML_PATH_SECURE_IN_FRONT",109],["T_WHITESPACE","  ",109],"=",["T_WHITESPACE"," ",109],["T_CONSTANT_ENCAPSED_STRING","'web\/secure\/use_in_frontend'",109],";",["T_WHITESPACE","\n\n    ",109],["T_DOC_COMMENT","\/**\n     * Param name for form key functionality\n     *\/",111],["T_WHITESPACE","\n    ",113],["T_CONST","const",114],["T_WHITESPACE"," ",114],["T_STRING","FORM_KEY",114],["T_WHITESPACE"," ",114],"=",["T_WHITESPACE"," ",114],["T_CONSTANT_ENCAPSED_STRING","'form_key'",114],";",["T_WHITESPACE","\n\n    ",114],["T_DOC_COMMENT","\/**\n     * Configuration data cache\n     *\n     * @var array\n     *\/",116],["T_WHITESPACE","\n    ",120],["T_STATIC","static",121],["T_WHITESPACE"," ",121],["T_PROTECTED","protected",121],["T_WHITESPACE"," ",121],["T_VARIABLE","$_configDataCache",121],";",["T_WHITESPACE","\n\n    ",121],["T_DOC_COMMENT","\/**\n     * Encrypted session identifier\n     *\n     * @var string|null\n     *\/",123],["T_WHITESPACE","\n    ",127],["T_STATIC","static",128],["T_WHITESPACE"," ",128],["T_PROTECTED","protected",128],["T_WHITESPACE"," ",128],["T_VARIABLE","$_encryptedSessionId",128],";",["T_WHITESPACE","\n\n    ",128],["T_DOC_COMMENT","\/**\n     * Reserved Route parameter keys\n     *\n     * @var array\n     *\/",130],["T_WHITESPACE","\n    ",134],["T_PROTECTED","protected",135],["T_WHITESPACE"," ",135],["T_VARIABLE","$_reservedRouteParams",135],["T_WHITESPACE"," ",135],"=",["T_WHITESPACE"," ",135],["T_ARRAY","array",135],"(",["T_WHITESPACE","\n        ",135],["T_CONSTANT_ENCAPSED_STRING","'_store'",136],",",["T_WHITESPACE"," ",136],["T_CONSTANT_ENCAPSED_STRING","'_type'",136],",",["T_WHITESPACE"," ",136],["T_CONSTANT_ENCAPSED_STRING","'_secure'",136],",",["T_WHITESPACE"," ",136],["T_CONSTANT_ENCAPSED_STRING","'_forced_secure'",136],",",["T_WHITESPACE"," ",136],["T_CONSTANT_ENCAPSED_STRING","'_use_rewrite'",136],",",["T_WHITESPACE"," ",136],["T_CONSTANT_ENCAPSED_STRING","'_nosid'",136],",",["T_WHITESPACE","\n        ",136],["T_CONSTANT_ENCAPSED_STRING","'_absolute'",137],",",["T_WHITESPACE"," ",137],["T_CONSTANT_ENCAPSED_STRING","'_current'",137],",",["T_WHITESPACE"," ",137],["T_CONSTANT_ENCAPSED_STRING","'_direct'",137],",",["T_WHITESPACE"," ",137],["T_CONSTANT_ENCAPSED_STRING","'_fragment'",137],",",["T_WHITESPACE"," ",137],["T_CONSTANT_ENCAPSED_STRING","'_escape'",137],",",["T_WHITESPACE"," ",137],["T_CONSTANT_ENCAPSED_STRING","'_query'",137],",",["T_WHITESPACE","\n        ",137],["T_CONSTANT_ENCAPSED_STRING","'_store_to_url'",138],["T_WHITESPACE","\n    ",138],")",";",["T_WHITESPACE","\n\n    ",139],["T_DOC_COMMENT","\/**\n     * Controller request object\n     *\n     * @var Zend_Controller_Request_Http\n     *\/",141],["T_WHITESPACE","\n    ",145],["T_PROTECTED","protected",146],["T_WHITESPACE"," ",146],["T_VARIABLE","$_request",146],";",["T_WHITESPACE","\n\n    ",146],["T_DOC_COMMENT","\/**\n     * Use Session ID for generate URL\n     *\n     * @var bool\n     *\/",148],["T_WHITESPACE","\n    ",152],["T_PROTECTED","protected",153],["T_WHITESPACE"," ",153],["T_VARIABLE","$_useSession",153],";",["T_WHITESPACE","\n\n    ",153],["T_DOC_COMMENT","\/**\n     * Initialize object\n     *\/",155],["T_WHITESPACE","\n    ",157],["T_PROTECTED","protected",158],["T_WHITESPACE"," ",158],["T_FUNCTION","function",158],["T_WHITESPACE"," ",158],["T_STRING","_construct",158],"(",")",["T_WHITESPACE","\n    ",158],"{",["T_WHITESPACE","\n        ",159],["T_VARIABLE","$this",160],["T_OBJECT_OPERATOR","->",160],["T_STRING","setStore",160],"(",["T_STRING","null",160],")",";",["T_WHITESPACE","\n    ",160],"}",["T_WHITESPACE","\n\n    ",161],["T_DOC_COMMENT","\/**\n     * Initialize object data from retrieved url\n     *\n     * @param   string $url\n     * @return  Mage_Core_Model_Url\n     *\/",163],["T_WHITESPACE","\n    ",168],["T_PUBLIC","public",169],["T_WHITESPACE"," ",169],["T_FUNCTION","function",169],["T_WHITESPACE"," ",169],["T_STRING","parseUrl",169],"(",["T_VARIABLE","$url",169],")",["T_WHITESPACE","\n    ",169],"{",["T_WHITESPACE","\n        ",170],["T_VARIABLE","$data",171],["T_WHITESPACE"," ",171],"=",["T_WHITESPACE"," ",171],["T_STRING","parse_url",171],"(",["T_VARIABLE","$url",171],")",";",["T_WHITESPACE","\n        ",171],["T_VARIABLE","$parts",172],["T_WHITESPACE"," ",172],"=",["T_WHITESPACE"," ",172],["T_ARRAY","array",172],"(",["T_WHITESPACE","\n            ",172],["T_CONSTANT_ENCAPSED_STRING","'scheme'",173],["T_WHITESPACE","   ",173],["T_DOUBLE_ARROW","=>",173],["T_WHITESPACE"," ",173],["T_CONSTANT_ENCAPSED_STRING","'setScheme'",173],",",["T_WHITESPACE","\n            ",173],["T_CONSTANT_ENCAPSED_STRING","'host'",174],["T_WHITESPACE","     ",174],["T_DOUBLE_ARROW","=>",174],["T_WHITESPACE"," ",174],["T_CONSTANT_ENCAPSED_STRING","'setHost'",174],",",["T_WHITESPACE","\n            ",174],["T_CONSTANT_ENCAPSED_STRING","'port'",175],["T_WHITESPACE","     ",175],["T_DOUBLE_ARROW","=>",175],["T_WHITESPACE"," ",175],["T_CONSTANT_ENCAPSED_STRING","'setPort'",175],",",["T_WHITESPACE","\n            ",175],["T_CONSTANT_ENCAPSED_STRING","'user'",176],["T_WHITESPACE","     ",176],["T_DOUBLE_ARROW","=>",176],["T_WHITESPACE"," ",176],["T_CONSTANT_ENCAPSED_STRING","'setUser'",176],",",["T_WHITESPACE","\n            ",176],["T_CONSTANT_ENCAPSED_STRING","'pass'",177],["T_WHITESPACE","     ",177],["T_DOUBLE_ARROW","=>",177],["T_WHITESPACE"," ",177],["T_CONSTANT_ENCAPSED_STRING","'setPassword'",177],",",["T_WHITESPACE","\n            ",177],["T_CONSTANT_ENCAPSED_STRING","'path'",178],["T_WHITESPACE","     ",178],["T_DOUBLE_ARROW","=>",178],["T_WHITESPACE"," ",178],["T_CONSTANT_ENCAPSED_STRING","'setPath'",178],",",["T_WHITESPACE","\n            ",178],["T_CONSTANT_ENCAPSED_STRING","'query'",179],["T_WHITESPACE","    ",179],["T_DOUBLE_ARROW","=>",179],["T_WHITESPACE"," ",179],["T_CONSTANT_ENCAPSED_STRING","'setQuery'",179],",",["T_WHITESPACE","\n            ",179],["T_CONSTANT_ENCAPSED_STRING","'fragment'",180],["T_WHITESPACE"," ",180],["T_DOUBLE_ARROW","=>",180],["T_WHITESPACE"," ",180],["T_CONSTANT_ENCAPSED_STRING","'setFragment'",180],")",";",["T_WHITESPACE","\n\n        ",180],["T_FOREACH","foreach",182],["T_WHITESPACE"," ",182],"(",["T_VARIABLE","$parts",182],["T_WHITESPACE"," ",182],["T_AS","as",182],["T_WHITESPACE"," ",182],["T_VARIABLE","$component",182],["T_WHITESPACE"," ",182],["T_DOUBLE_ARROW","=>",182],["T_WHITESPACE"," ",182],["T_VARIABLE","$method",182],")",["T_WHITESPACE"," ",182],"{",["T_WHITESPACE","\n            ",182],["T_IF","if",183],["T_WHITESPACE"," ",183],"(",["T_ISSET","isset",183],"(",["T_VARIABLE","$data",183],"[",["T_VARIABLE","$component",183],"]",")",")",["T_WHITESPACE"," ",183],"{",["T_WHITESPACE","\n                ",183],["T_VARIABLE","$this",184],["T_OBJECT_OPERATOR","->",184],["T_VARIABLE","$method",184],"(",["T_VARIABLE","$data",184],"[",["T_VARIABLE","$component",184],"]",")",";",["T_WHITESPACE","\n            ",184],"}",["T_WHITESPACE","\n        ",185],"}",["T_WHITESPACE","\n        ",186],["T_RETURN","return",187],["T_WHITESPACE"," ",187],["T_VARIABLE","$this",187],";",["T_WHITESPACE","\n    ",187],"}",["T_WHITESPACE","\n\n    ",188],["T_DOC_COMMENT","\/**\n     * Retrieve default controller name\n     *\n     * @return string\n     *\/",190],["T_WHITESPACE","\n    ",194],["T_PUBLIC","public",195],["T_WHITESPACE"," ",195],["T_FUNCTION","function",195],["T_WHITESPACE"," ",195],["T_STRING","getDefaultControllerName",195],"(",")",["T_WHITESPACE","\n    ",195],"{",["T_WHITESPACE","\n        ",196],["T_RETURN","return",197],["T_WHITESPACE"," ",197],["T_STRING","self",197],["T_DOUBLE_COLON","::",197],["T_STRING","DEFAULT_CONTROLLER_NAME",197],";",["T_WHITESPACE","\n    ",197],"}",["T_WHITESPACE","\n\n    ",198],["T_DOC_COMMENT","\/**\n     * Set use_url_cache flag\n     *\n     * @param boolean $flag\n     * @return Mage_Core_Model_Url\n     *\/",200],["T_WHITESPACE","\n    ",205],["T_PUBLIC","public",206],["T_WHITESPACE"," ",206],["T_FUNCTION","function",206],["T_WHITESPACE"," ",206],["T_STRING","setUseUrlCache",206],"(",["T_VARIABLE","$flag",206],")",["T_WHITESPACE","\n    ",206],"{",["T_WHITESPACE","\n        ",207],["T_VARIABLE","$this",208],["T_OBJECT_OPERATOR","->",208],["T_STRING","setData",208],"(",["T_CONSTANT_ENCAPSED_STRING","'use_url_cache'",208],",",["T_WHITESPACE"," ",208],["T_VARIABLE","$flag",208],")",";",["T_WHITESPACE","\n        ",208],["T_RETURN","return",209],["T_WHITESPACE"," ",209],["T_VARIABLE","$this",209],";",["T_WHITESPACE","\n    ",209],"}",["T_WHITESPACE","\n\n    ",210],["T_DOC_COMMENT","\/**\n     * Set use session rule\n     *\n     * @param bool $useSession\n     * @return Mage_Core_Model_Url\n     *\/",212],["T_WHITESPACE","\n    ",217],["T_PUBLIC","public",218],["T_WHITESPACE"," ",218],["T_FUNCTION","function",218],["T_WHITESPACE"," ",218],["T_STRING","setUseSession",218],"(",["T_VARIABLE","$useSession",218],")",["T_WHITESPACE","\n    ",218],"{",["T_WHITESPACE","\n        ",219],["T_VARIABLE","$this",220],["T_OBJECT_OPERATOR","->",220],["T_STRING","_useSession",220],["T_WHITESPACE"," ",220],"=",["T_WHITESPACE"," ",220],["T_BOOL_CAST","(bool)",220],["T_WHITESPACE"," ",220],["T_VARIABLE","$useSession",220],";",["T_WHITESPACE","\n        ",220],["T_RETURN","return",221],["T_WHITESPACE"," ",221],["T_VARIABLE","$this",221],";",["T_WHITESPACE","\n    ",221],"}",["T_WHITESPACE","\n\n    ",222],["T_DOC_COMMENT","\/**\n     * Set route front name\n     *\n     * @param string $name\n     * @return Mage_Core_Model_Url\n     *\/",224],["T_WHITESPACE","\n    ",229],["T_PUBLIC","public",230],["T_WHITESPACE"," ",230],["T_FUNCTION","function",230],["T_WHITESPACE"," ",230],["T_STRING","setRouteFrontName",230],"(",["T_VARIABLE","$name",230],")",["T_WHITESPACE","\n    ",230],"{",["T_WHITESPACE","\n        ",231],["T_VARIABLE","$this",232],["T_OBJECT_OPERATOR","->",232],["T_STRING","setData",232],"(",["T_CONSTANT_ENCAPSED_STRING","'route_front_name'",232],",",["T_WHITESPACE"," ",232],["T_VARIABLE","$name",232],")",";",["T_WHITESPACE","\n        ",232],["T_RETURN","return",233],["T_WHITESPACE"," ",233],["T_VARIABLE","$this",233],";",["T_WHITESPACE","\n    ",233],"}",["T_WHITESPACE","\n\n    ",234],["T_DOC_COMMENT","\/**\n     * Retrieve use session rule\n     *\n     * @return bool\n     *\/",236],["T_WHITESPACE","\n    ",240],["T_PUBLIC","public",241],["T_WHITESPACE"," ",241],["T_FUNCTION","function",241],["T_WHITESPACE"," ",241],["T_STRING","getUseSession",241],"(",")",["T_WHITESPACE","\n    ",241],"{",["T_WHITESPACE","\n        ",242],["T_IF","if",243],["T_WHITESPACE"," ",243],"(",["T_STRING","is_null",243],"(",["T_VARIABLE","$this",243],["T_OBJECT_OPERATOR","->",243],["T_STRING","_useSession",243],")",")",["T_WHITESPACE"," ",243],"{",["T_WHITESPACE","\n            ",243],["T_VARIABLE","$this",244],["T_OBJECT_OPERATOR","->",244],["T_STRING","_useSession",244],["T_WHITESPACE"," ",244],"=",["T_WHITESPACE"," ",244],["T_STRING","Mage",244],["T_DOUBLE_COLON","::",244],["T_STRING","app",244],"(",")",["T_OBJECT_OPERATOR","->",244],["T_STRING","getUseSessionInUrl",244],"(",")",";",["T_WHITESPACE","\n        ",244],"}",["T_WHITESPACE","\n        ",245],["T_RETURN","return",246],["T_WHITESPACE"," ",246],["T_VARIABLE","$this",246],["T_OBJECT_OPERATOR","->",246],["T_STRING","_useSession",246],";",["T_WHITESPACE","\n    ",246],"}",["T_WHITESPACE","\n\n    ",247],["T_DOC_COMMENT","\/**\n     * Retrieve default action name\n     *\n     * @return string\n     *\/",249],["T_WHITESPACE","\n    ",253],["T_PUBLIC","public",254],["T_WHITESPACE"," ",254],["T_FUNCTION","function",254],["T_WHITESPACE"," ",254],["T_STRING","getDefaultActionName",254],"(",")",["T_WHITESPACE","\n    ",254],"{",["T_WHITESPACE","\n        ",255],["T_RETURN","return",256],["T_WHITESPACE"," ",256],["T_STRING","self",256],["T_DOUBLE_COLON","::",256],["T_STRING","DEFAULT_ACTION_NAME",256],";",["T_WHITESPACE","\n    ",256],"}",["T_WHITESPACE","\n\n    ",257],["T_DOC_COMMENT","\/**\n     * Retrieve configuration data\n     *\n     * @param string $key\n     * @param string|null $prefix\n     * @return string\n     *\/",259],["T_WHITESPACE","\n    ",265],["T_PUBLIC","public",266],["T_WHITESPACE"," ",266],["T_FUNCTION","function",266],["T_WHITESPACE"," ",266],["T_STRING","getConfigData",266],"(",["T_VARIABLE","$key",266],",",["T_WHITESPACE"," ",266],["T_VARIABLE","$prefix",266],["T_WHITESPACE"," ",266],"=",["T_WHITESPACE"," ",266],["T_STRING","null",266],")",["T_WHITESPACE","\n    ",266],"{",["T_WHITESPACE","\n        ",267],["T_IF","if",268],["T_WHITESPACE"," ",268],"(",["T_STRING","is_null",268],"(",["T_VARIABLE","$prefix",268],")",")",["T_WHITESPACE"," ",268],"{",["T_WHITESPACE","\n            ",268],["T_VARIABLE","$prefix",269],["T_WHITESPACE"," ",269],"=",["T_WHITESPACE"," ",269],["T_CONSTANT_ENCAPSED_STRING","'web\/'",269],["T_WHITESPACE"," ",269],".",["T_WHITESPACE"," ",269],"(",["T_VARIABLE","$this",269],["T_OBJECT_OPERATOR","->",269],["T_STRING","getSecure",269],"(",")",["T_WHITESPACE"," ",269],"?",["T_WHITESPACE"," ",269],["T_CONSTANT_ENCAPSED_STRING","'secure'",269],["T_WHITESPACE"," ",269],":",["T_WHITESPACE"," ",269],["T_CONSTANT_ENCAPSED_STRING","'unsecure'",269],")",".",["T_CONSTANT_ENCAPSED_STRING","'\/'",269],";",["T_WHITESPACE","\n        ",269],"}",["T_WHITESPACE","\n        ",270],["T_VARIABLE","$path",271],["T_WHITESPACE"," ",271],"=",["T_WHITESPACE"," ",271],["T_VARIABLE","$prefix",271],["T_WHITESPACE"," ",271],".",["T_WHITESPACE"," ",271],["T_VARIABLE","$key",271],";",["T_WHITESPACE","\n\n        ",271],["T_VARIABLE","$cacheId",273],["T_WHITESPACE"," ",273],"=",["T_WHITESPACE"," ",273],["T_VARIABLE","$this",273],["T_OBJECT_OPERATOR","->",273],["T_STRING","getStore",273],"(",")",["T_OBJECT_OPERATOR","->",273],["T_STRING","getCode",273],"(",")",["T_WHITESPACE"," ",273],".",["T_WHITESPACE"," ",273],["T_CONSTANT_ENCAPSED_STRING","'\/'",273],["T_WHITESPACE"," ",273],".",["T_WHITESPACE"," ",273],["T_VARIABLE","$path",273],";",["T_WHITESPACE","\n        ",273],["T_IF","if",274],["T_WHITESPACE"," ",274],"(","!",["T_ISSET","isset",274],"(",["T_STRING","self",274],["T_DOUBLE_COLON","::",274],["T_VARIABLE","$_configDataCache",274],"[",["T_VARIABLE","$cacheId",274],"]",")",")",["T_WHITESPACE"," ",274],"{",["T_WHITESPACE","\n            ",274],["T_VARIABLE","$data",275],["T_WHITESPACE"," ",275],"=",["T_WHITESPACE"," ",275],["T_VARIABLE","$this",275],["T_OBJECT_OPERATOR","->",275],["T_STRING","getStore",275],"(",")",["T_OBJECT_OPERATOR","->",275],["T_STRING","getConfig",275],"(",["T_VARIABLE","$path",275],")",";",["T_WHITESPACE","\n            ",275],["T_STRING","self",276],["T_DOUBLE_COLON","::",276],["T_VARIABLE","$_configDataCache",276],"[",["T_VARIABLE","$cacheId",276],"]",["T_WHITESPACE"," ",276],"=",["T_WHITESPACE"," ",276],["T_VARIABLE","$data",276],";",["T_WHITESPACE","\n        ",276],"}",["T_WHITESPACE","\n\n        ",277],["T_RETURN","return",279],["T_WHITESPACE"," ",279],["T_STRING","self",279],["T_DOUBLE_COLON","::",279],["T_VARIABLE","$_configDataCache",279],"[",["T_VARIABLE","$cacheId",279],"]",";",["T_WHITESPACE","\n    ",279],"}",["T_WHITESPACE","\n\n    ",280],["T_DOC_COMMENT","\/**\n     * Set request\n     *\n     * @param Zend_Controller_Request_Http $request\n     * @return Mage_Core_Model_Url\n     *\/",282],["T_WHITESPACE","\n    ",287],["T_PUBLIC","public",288],["T_WHITESPACE"," ",288],["T_FUNCTION","function",288],["T_WHITESPACE"," ",288],["T_STRING","setRequest",288],"(",["T_STRING","Zend_Controller_Request_Http",288],["T_WHITESPACE"," ",288],["T_VARIABLE","$request",288],")",["T_WHITESPACE","\n    ",288],"{",["T_WHITESPACE","\n        ",289],["T_VARIABLE","$this",290],["T_OBJECT_OPERATOR","->",290],["T_STRING","_request",290],["T_WHITESPACE"," ",290],"=",["T_WHITESPACE"," ",290],["T_VARIABLE","$request",290],";",["T_WHITESPACE","\n        ",290],["T_RETURN","return",291],["T_WHITESPACE"," ",291],["T_VARIABLE","$this",291],";",["T_WHITESPACE","\n    ",291],"}",["T_WHITESPACE","\n\n    ",292],["T_DOC_COMMENT","\/**\n     * Zend request object\n     *\n     * @return Zend_Controller_Request_Http\n     *\/",294],["T_WHITESPACE","\n    ",298],["T_PUBLIC","public",299],["T_WHITESPACE"," ",299],["T_FUNCTION","function",299],["T_WHITESPACE"," ",299],["T_STRING","getRequest",299],"(",")",["T_WHITESPACE","\n    ",299],"{",["T_WHITESPACE","\n        ",300],["T_IF","if",301],["T_WHITESPACE"," ",301],"(","!",["T_VARIABLE","$this",301],["T_OBJECT_OPERATOR","->",301],["T_STRING","_request",301],")",["T_WHITESPACE"," ",301],"{",["T_WHITESPACE","\n            ",301],["T_VARIABLE","$this",302],["T_OBJECT_OPERATOR","->",302],["T_STRING","_request",302],["T_WHITESPACE"," ",302],"=",["T_WHITESPACE"," ",302],["T_STRING","Mage",302],["T_DOUBLE_COLON","::",302],["T_STRING","app",302],"(",")",["T_OBJECT_OPERATOR","->",302],["T_STRING","getRequest",302],"(",")",";",["T_WHITESPACE","\n        ",302],"}",["T_WHITESPACE","\n        ",303],["T_RETURN","return",304],["T_WHITESPACE"," ",304],["T_VARIABLE","$this",304],["T_OBJECT_OPERATOR","->",304],["T_STRING","_request",304],";",["T_WHITESPACE","\n    ",304],"}",["T_WHITESPACE","\n\n    ",305],["T_DOC_COMMENT","\/**\n     * Retrieve URL type\n     *\n     * @return string\n     *\/",307],["T_WHITESPACE","\n    ",311],["T_PUBLIC","public",312],["T_WHITESPACE"," ",312],["T_FUNCTION","function",312],["T_WHITESPACE"," ",312],["T_STRING","getType",312],"(",")",["T_WHITESPACE","\n    ",312],"{",["T_WHITESPACE","\n        ",313],["T_IF","if",314],["T_WHITESPACE"," ",314],"(","!",["T_VARIABLE","$this",314],["T_OBJECT_OPERATOR","->",314],["T_STRING","hasData",314],"(",["T_CONSTANT_ENCAPSED_STRING","'type'",314],")",")",["T_WHITESPACE"," ",314],"{",["T_WHITESPACE","\n            ",314],["T_VARIABLE","$this",315],["T_OBJECT_OPERATOR","->",315],["T_STRING","setData",315],"(",["T_CONSTANT_ENCAPSED_STRING","'type'",315],",",["T_WHITESPACE"," ",315],["T_STRING","Mage_Core_Model_Store",315],["T_DOUBLE_COLON","::",315],["T_STRING","URL_TYPE_LINK",315],")",";",["T_WHITESPACE","\n        ",315],"}",["T_WHITESPACE","\n        ",316],["T_RETURN","return",317],["T_WHITESPACE"," ",317],["T_VARIABLE","$this",317],["T_OBJECT_OPERATOR","->",317],["T_STRING","_getData",317],"(",["T_CONSTANT_ENCAPSED_STRING","'type'",317],")",";",["T_WHITESPACE","\n    ",317],"}",["T_WHITESPACE","\n\n    ",318],["T_DOC_COMMENT","\/**\n     * Retrieve is secure mode URL\n     *\n     * @return bool\n     *\/",320],["T_WHITESPACE","\n    ",324],["T_PUBLIC","public",325],["T_WHITESPACE"," ",325],["T_FUNCTION","function",325],["T_WHITESPACE"," ",325],["T_STRING","getSecure",325],"(",")",["T_WHITESPACE","\n    ",325],"{",["T_WHITESPACE","\n        ",326],["T_IF","if",327],["T_WHITESPACE"," ",327],"(",["T_VARIABLE","$this",327],["T_OBJECT_OPERATOR","->",327],["T_STRING","hasData",327],"(",["T_CONSTANT_ENCAPSED_STRING","'secure_is_forced'",327],")",")",["T_WHITESPACE"," ",327],"{",["T_WHITESPACE","\n            ",327],["T_RETURN","return",328],["T_WHITESPACE"," ",328],["T_BOOL_CAST","(bool)",328],["T_VARIABLE","$this",328],["T_OBJECT_OPERATOR","->",328],["T_STRING","getData",328],"(",["T_CONSTANT_ENCAPSED_STRING","'secure'",328],")",";",["T_WHITESPACE","\n        ",328],"}",["T_WHITESPACE","\n\n        ",329],["T_VARIABLE","$store",331],["T_WHITESPACE"," ",331],"=",["T_WHITESPACE"," ",331],["T_VARIABLE","$this",331],["T_OBJECT_OPERATOR","->",331],["T_STRING","getStore",331],"(",")",";",["T_WHITESPACE","\n\n        ",331],["T_IF","if",333],["T_WHITESPACE"," ",333],"(",["T_VARIABLE","$store",333],["T_OBJECT_OPERATOR","->",333],["T_STRING","isAdmin",333],"(",")",["T_WHITESPACE"," ",333],["T_BOOLEAN_AND","&&",333],["T_WHITESPACE"," ",333],"!",["T_VARIABLE","$store",333],["T_OBJECT_OPERATOR","->",333],["T_STRING","isAdminUrlSecure",333],"(",")",")",["T_WHITESPACE"," ",333],"{",["T_WHITESPACE","\n            ",333],["T_RETURN","return",334],["T_WHITESPACE"," ",334],["T_STRING","false",334],";",["T_WHITESPACE","\n        ",334],"}",["T_WHITESPACE","\n        ",335],["T_IF","if",336],["T_WHITESPACE"," ",336],"(","!",["T_VARIABLE","$store",336],["T_OBJECT_OPERATOR","->",336],["T_STRING","isAdmin",336],"(",")",["T_WHITESPACE"," ",336],["T_BOOLEAN_AND","&&",336],["T_WHITESPACE"," ",336],"!",["T_VARIABLE","$store",336],["T_OBJECT_OPERATOR","->",336],["T_STRING","isFrontUrlSecure",336],"(",")",")",["T_WHITESPACE"," ",336],"{",["T_WHITESPACE","\n            ",336],["T_RETURN","return",337],["T_WHITESPACE"," ",337],["T_STRING","false",337],";",["T_WHITESPACE","\n        ",337],"}",["T_WHITESPACE","\n\n        ",338],["T_IF","if",340],["T_WHITESPACE"," ",340],"(","!",["T_VARIABLE","$this",340],["T_OBJECT_OPERATOR","->",340],["T_STRING","hasData",340],"(",["T_CONSTANT_ENCAPSED_STRING","'secure'",340],")",")",["T_WHITESPACE"," ",340],"{",["T_WHITESPACE","\n            ",340],["T_IF","if",341],["T_WHITESPACE"," ",341],"(",["T_VARIABLE","$this",341],["T_OBJECT_OPERATOR","->",341],["T_STRING","getType",341],"(",")",["T_WHITESPACE"," ",341],["T_IS_EQUAL","==",341],["T_WHITESPACE"," ",341],["T_STRING","Mage_Core_Model_Store",341],["T_DOUBLE_COLON","::",341],["T_STRING","URL_TYPE_LINK",341],["T_WHITESPACE"," ",341],["T_BOOLEAN_AND","&&",341],["T_WHITESPACE"," ",341],"!",["T_VARIABLE","$store",341],["T_OBJECT_OPERATOR","->",341],["T_STRING","isAdmin",341],"(",")",")",["T_WHITESPACE"," ",341],"{",["T_WHITESPACE","\n                ",341],["T_VARIABLE","$pathSecure",342],["T_WHITESPACE"," ",342],"=",["T_WHITESPACE"," ",342],["T_STRING","Mage",342],["T_DOUBLE_COLON","::",342],["T_STRING","getConfig",342],"(",")",["T_OBJECT_OPERATOR","->",342],["T_STRING","shouldUrlBeSecure",342],"(",["T_CONSTANT_ENCAPSED_STRING","'\/'",342],["T_WHITESPACE"," ",342],".",["T_WHITESPACE"," ",342],["T_VARIABLE","$this",342],["T_OBJECT_OPERATOR","->",342],["T_STRING","getActionPath",342],"(",")",")",";",["T_WHITESPACE","\n                ",342],["T_VARIABLE","$this",343],["T_OBJECT_OPERATOR","->",343],["T_STRING","setData",343],"(",["T_CONSTANT_ENCAPSED_STRING","'secure'",343],",",["T_WHITESPACE"," ",343],["T_VARIABLE","$pathSecure",343],")",";",["T_WHITESPACE","\n            ",343],"}",["T_WHITESPACE"," ",344],["T_ELSE","else",344],["T_WHITESPACE"," ",344],"{",["T_WHITESPACE","\n                ",344],["T_VARIABLE","$this",345],["T_OBJECT_OPERATOR","->",345],["T_STRING","setData",345],"(",["T_CONSTANT_ENCAPSED_STRING","'secure'",345],",",["T_WHITESPACE"," ",345],["T_STRING","true",345],")",";",["T_WHITESPACE","\n            ",345],"}",["T_WHITESPACE","\n        ",346],"}",["T_WHITESPACE","\n        ",347],["T_RETURN","return",348],["T_WHITESPACE"," ",348],["T_VARIABLE","$this",348],["T_OBJECT_OPERATOR","->",348],["T_STRING","getData",348],"(",["T_CONSTANT_ENCAPSED_STRING","'secure'",348],")",";",["T_WHITESPACE","\n    ",348],"}",["T_WHITESPACE","\n\n    ",349],["T_DOC_COMMENT","\/**\n     * Set store entity\n     *\n     * @param mixed $data\n     * @return Mage_Core_Model_Url\n     *\/",351],["T_WHITESPACE","\n    ",356],["T_PUBLIC","public",357],["T_WHITESPACE"," ",357],["T_FUNCTION","function",357],["T_WHITESPACE"," ",357],["T_STRING","setStore",357],"(",["T_VARIABLE","$data",357],")",["T_WHITESPACE","\n    ",357],"{",["T_WHITESPACE","\n        ",358],["T_VARIABLE","$this",359],["T_OBJECT_OPERATOR","->",359],["T_STRING","setData",359],"(",["T_CONSTANT_ENCAPSED_STRING","'store'",359],",",["T_WHITESPACE"," ",359],["T_STRING","Mage",359],["T_DOUBLE_COLON","::",359],["T_STRING","app",359],"(",")",["T_OBJECT_OPERATOR","->",359],["T_STRING","getStore",359],"(",["T_VARIABLE","$data",359],")",")",";",["T_WHITESPACE","\n        ",359],["T_RETURN","return",360],["T_WHITESPACE"," ",360],["T_VARIABLE","$this",360],";",["T_WHITESPACE","\n    ",360],"}",["T_WHITESPACE","\n\n    ",361],["T_DOC_COMMENT","\/**\n     * Get current store for the url instance\n     *\n     * @return Mage_Core_Model_Store\n     *\/",363],["T_WHITESPACE","\n    ",367],["T_PUBLIC","public",368],["T_WHITESPACE"," ",368],["T_FUNCTION","function",368],["T_WHITESPACE"," ",368],["T_STRING","getStore",368],"(",")",["T_WHITESPACE","\n    ",368],"{",["T_WHITESPACE","\n        ",369],["T_IF","if",370],["T_WHITESPACE"," ",370],"(","!",["T_VARIABLE","$this",370],["T_OBJECT_OPERATOR","->",370],["T_STRING","hasData",370],"(",["T_CONSTANT_ENCAPSED_STRING","'store'",370],")",")",["T_WHITESPACE"," ",370],"{",["T_WHITESPACE","\n            ",370],["T_VARIABLE","$this",371],["T_OBJECT_OPERATOR","->",371],["T_STRING","setStore",371],"(",["T_STRING","null",371],")",";",["T_WHITESPACE","\n        ",371],"}",["T_WHITESPACE","\n        ",372],["T_RETURN","return",373],["T_WHITESPACE"," ",373],["T_VARIABLE","$this",373],["T_OBJECT_OPERATOR","->",373],["T_STRING","_getData",373],"(",["T_CONSTANT_ENCAPSED_STRING","'store'",373],")",";",["T_WHITESPACE","\n    ",373],"}",["T_WHITESPACE","\n\n    ",374],["T_DOC_COMMENT","\/**\n     * Retrieve Base URL\n     *\n     * @param array $params\n     * @return string\n     *\/",376],["T_WHITESPACE","\n    ",381],["T_PUBLIC","public",382],["T_WHITESPACE"," ",382],["T_FUNCTION","function",382],["T_WHITESPACE"," ",382],["T_STRING","getBaseUrl",382],"(",["T_VARIABLE","$params",382],["T_WHITESPACE"," ",382],"=",["T_WHITESPACE"," ",382],["T_ARRAY","array",382],"(",")",")",["T_WHITESPACE","\n    ",382],"{",["T_WHITESPACE","\n        ",383],["T_IF","if",384],["T_WHITESPACE"," ",384],"(",["T_ISSET","isset",384],"(",["T_VARIABLE","$params",384],"[",["T_CONSTANT_ENCAPSED_STRING","'_store'",384],"]",")",")",["T_WHITESPACE"," ",384],"{",["T_WHITESPACE","\n            ",384],["T_VARIABLE","$this",385],["T_OBJECT_OPERATOR","->",385],["T_STRING","setStore",385],"(",["T_VARIABLE","$params",385],"[",["T_CONSTANT_ENCAPSED_STRING","'_store'",385],"]",")",";",["T_WHITESPACE","\n        ",385],"}",["T_WHITESPACE","\n        ",386],["T_IF","if",387],["T_WHITESPACE"," ",387],"(",["T_ISSET","isset",387],"(",["T_VARIABLE","$params",387],"[",["T_CONSTANT_ENCAPSED_STRING","'_type'",387],"]",")",")",["T_WHITESPACE"," ",387],"{",["T_WHITESPACE","\n            ",387],["T_VARIABLE","$this",388],["T_OBJECT_OPERATOR","->",388],["T_STRING","setType",388],"(",["T_VARIABLE","$params",388],"[",["T_CONSTANT_ENCAPSED_STRING","'_type'",388],"]",")",";",["T_WHITESPACE","\n        ",388],"}",["T_WHITESPACE","\n        ",389],["T_IF","if",390],["T_WHITESPACE"," ",390],"(",["T_ISSET","isset",390],"(",["T_VARIABLE","$params",390],"[",["T_CONSTANT_ENCAPSED_STRING","'_secure'",390],"]",")",")",["T_WHITESPACE"," ",390],"{",["T_WHITESPACE","\n            ",390],["T_VARIABLE","$this",391],["T_OBJECT_OPERATOR","->",391],["T_STRING","setSecure",391],"(",["T_VARIABLE","$params",391],"[",["T_CONSTANT_ENCAPSED_STRING","'_secure'",391],"]",")",";",["T_WHITESPACE","\n        ",391],"}",["T_WHITESPACE","\n\n        ",392],["T_DOC_COMMENT","\/**\n         * Add availability support urls without store code\n         *\/",394],["T_WHITESPACE","\n        ",396],["T_IF","if",397],["T_WHITESPACE"," ",397],"(",["T_VARIABLE","$this",397],["T_OBJECT_OPERATOR","->",397],["T_STRING","getType",397],"(",")",["T_WHITESPACE"," ",397],["T_IS_EQUAL","==",397],["T_WHITESPACE"," ",397],["T_STRING","Mage_Core_Model_Store",397],["T_DOUBLE_COLON","::",397],["T_STRING","URL_TYPE_LINK",397],["T_WHITESPACE","\n            ",397],["T_BOOLEAN_AND","&&",398],["T_WHITESPACE"," ",398],["T_STRING","Mage",398],["T_DOUBLE_COLON","::",398],["T_STRING","app",398],"(",")",["T_OBJECT_OPERATOR","->",398],["T_STRING","getRequest",398],"(",")",["T_OBJECT_OPERATOR","->",398],["T_STRING","isDirectAccessFrontendName",398],"(",["T_VARIABLE","$this",398],["T_OBJECT_OPERATOR","->",398],["T_STRING","getRouteFrontName",398],"(",")",")",")",["T_WHITESPACE"," ",398],"{",["T_WHITESPACE","\n            ",398],["T_VARIABLE","$this",399],["T_OBJECT_OPERATOR","->",399],["T_STRING","setType",399],"(",["T_STRING","Mage_Core_Model_Store",399],["T_DOUBLE_COLON","::",399],["T_STRING","URL_TYPE_DIRECT_LINK",399],")",";",["T_WHITESPACE","\n        ",399],"}",["T_WHITESPACE","\n\n        ",400],["T_RETURN","return",402],["T_WHITESPACE"," ",402],["T_VARIABLE","$this",402],["T_OBJECT_OPERATOR","->",402],["T_STRING","getStore",402],"(",")",["T_OBJECT_OPERATOR","->",402],["T_STRING","getBaseUrl",402],"(",["T_VARIABLE","$this",402],["T_OBJECT_OPERATOR","->",402],["T_STRING","getType",402],"(",")",",",["T_WHITESPACE"," ",402],["T_VARIABLE","$this",402],["T_OBJECT_OPERATOR","->",402],["T_STRING","getSecure",402],"(",")",")",";",["T_WHITESPACE","\n    ",402],"}",["T_WHITESPACE","\n\n    ",403],["T_DOC_COMMENT","\/**\n     * Set Route Parameters\n     *\n     * @param array $data\n     * @return Mage_Core_Model_Url\n     *\/",405],["T_WHITESPACE","\n    ",410],["T_PUBLIC","public",411],["T_WHITESPACE"," ",411],["T_FUNCTION","function",411],["T_WHITESPACE"," ",411],["T_STRING","setRoutePath",411],"(",["T_VARIABLE","$data",411],")",["T_WHITESPACE","\n    ",411],"{",["T_WHITESPACE","\n        ",412],["T_IF","if",413],["T_WHITESPACE"," ",413],"(",["T_VARIABLE","$this",413],["T_OBJECT_OPERATOR","->",413],["T_STRING","_getData",413],"(",["T_CONSTANT_ENCAPSED_STRING","'route_path'",413],")",["T_WHITESPACE"," ",413],["T_IS_EQUAL","==",413],["T_WHITESPACE"," ",413],["T_VARIABLE","$data",413],")",["T_WHITESPACE"," ",413],"{",["T_WHITESPACE","\n            ",413],["T_RETURN","return",414],["T_WHITESPACE"," ",414],["T_VARIABLE","$this",414],";",["T_WHITESPACE","\n        ",414],"}",["T_WHITESPACE","\n\n        ",415],["T_VARIABLE","$a",417],["T_WHITESPACE"," ",417],"=",["T_WHITESPACE"," ",417],["T_STRING","explode",417],"(",["T_CONSTANT_ENCAPSED_STRING","'\/'",417],",",["T_WHITESPACE"," ",417],["T_VARIABLE","$data",417],")",";",["T_WHITESPACE","\n\n        ",417],["T_VARIABLE","$route",419],["T_WHITESPACE"," ",419],"=",["T_WHITESPACE"," ",419],["T_STRING","array_shift",419],"(",["T_VARIABLE","$a",419],")",";",["T_WHITESPACE","\n        ",419],["T_IF","if",420],["T_WHITESPACE"," ",420],"(",["T_CONSTANT_ENCAPSED_STRING","'*'",420],["T_WHITESPACE"," ",420],["T_IS_IDENTICAL","===",420],["T_WHITESPACE"," ",420],["T_VARIABLE","$route",420],")",["T_WHITESPACE"," ",420],"{",["T_WHITESPACE","\n            ",420],["T_VARIABLE","$route",421],["T_WHITESPACE"," ",421],"=",["T_WHITESPACE"," ",421],["T_VARIABLE","$this",421],["T_OBJECT_OPERATOR","->",421],["T_STRING","getRequest",421],"(",")",["T_OBJECT_OPERATOR","->",421],["T_STRING","getRequestedRouteName",421],"(",")",";",["T_WHITESPACE","\n        ",421],"}",["T_WHITESPACE","\n        ",422],["T_VARIABLE","$this",423],["T_OBJECT_OPERATOR","->",423],["T_STRING","setRouteName",423],"(",["T_VARIABLE","$route",423],")",";",["T_WHITESPACE","\n        ",423],["T_VARIABLE","$routePath",424],["T_WHITESPACE"," ",424],"=",["T_WHITESPACE"," ",424],["T_VARIABLE","$route",424],["T_WHITESPACE"," ",424],".",["T_WHITESPACE"," ",424],["T_CONSTANT_ENCAPSED_STRING","'\/'",424],";",["T_WHITESPACE","\n\n        ",424],["T_IF","if",426],["T_WHITESPACE"," ",426],"(","!",["T_EMPTY","empty",426],"(",["T_VARIABLE","$a",426],")",")",["T_WHITESPACE"," ",426],"{",["T_WHITESPACE","\n            ",426],["T_VARIABLE","$controller",427],["T_WHITESPACE"," ",427],"=",["T_WHITESPACE"," ",427],["T_STRING","array_shift",427],"(",["T_VARIABLE","$a",427],")",";",["T_WHITESPACE","\n            ",427],["T_IF","if",428],["T_WHITESPACE"," ",428],"(",["T_CONSTANT_ENCAPSED_STRING","'*'",428],["T_WHITESPACE"," ",428],["T_IS_IDENTICAL","===",428],["T_WHITESPACE"," ",428],["T_VARIABLE","$controller",428],")",["T_WHITESPACE"," ",428],"{",["T_WHITESPACE","\n                ",428],["T_VARIABLE","$controller",429],["T_WHITESPACE"," ",429],"=",["T_WHITESPACE"," ",429],["T_VARIABLE","$this",429],["T_OBJECT_OPERATOR","->",429],["T_STRING","getRequest",429],"(",")",["T_OBJECT_OPERATOR","->",429],["T_STRING","getRequestedControllerName",429],"(",")",";",["T_WHITESPACE","\n            ",429],"}",["T_WHITESPACE","\n            ",430],["T_VARIABLE","$this",431],["T_OBJECT_OPERATOR","->",431],["T_STRING","setControllerName",431],"(",["T_VARIABLE","$controller",431],")",";",["T_WHITESPACE","\n            ",431],["T_VARIABLE","$routePath",432],["T_WHITESPACE"," ",432],["T_CONCAT_EQUAL",".=",432],["T_WHITESPACE"," ",432],["T_VARIABLE","$controller",432],["T_WHITESPACE"," ",432],".",["T_WHITESPACE"," ",432],["T_CONSTANT_ENCAPSED_STRING","'\/'",432],";",["T_WHITESPACE","\n        ",432],"}",["T_WHITESPACE","\n\n        ",433],["T_IF","if",435],["T_WHITESPACE"," ",435],"(","!",["T_EMPTY","empty",435],"(",["T_VARIABLE","$a",435],")",")",["T_WHITESPACE"," ",435],"{",["T_WHITESPACE","\n            ",435],["T_VARIABLE","$action",436],["T_WHITESPACE"," ",436],"=",["T_WHITESPACE"," ",436],["T_STRING","array_shift",436],"(",["T_VARIABLE","$a",436],")",";",["T_WHITESPACE","\n            ",436],["T_IF","if",437],["T_WHITESPACE"," ",437],"(",["T_CONSTANT_ENCAPSED_STRING","'*'",437],["T_WHITESPACE"," ",437],["T_IS_IDENTICAL","===",437],["T_WHITESPACE"," ",437],["T_VARIABLE","$action",437],")",["T_WHITESPACE"," ",437],"{",["T_WHITESPACE","\n                ",437],["T_VARIABLE","$action",438],["T_WHITESPACE"," ",438],"=",["T_WHITESPACE"," ",438],["T_VARIABLE","$this",438],["T_OBJECT_OPERATOR","->",438],["T_STRING","getRequest",438],"(",")",["T_OBJECT_OPERATOR","->",438],["T_STRING","getRequestedActionName",438],"(",")",";",["T_WHITESPACE","\n            ",438],"}",["T_WHITESPACE","\n            ",439],["T_VARIABLE","$this",440],["T_OBJECT_OPERATOR","->",440],["T_STRING","setActionName",440],"(",["T_VARIABLE","$action",440],")",";",["T_WHITESPACE","\n            ",440],["T_VARIABLE","$routePath",441],["T_WHITESPACE"," ",441],["T_CONCAT_EQUAL",".=",441],["T_WHITESPACE"," ",441],["T_VARIABLE","$action",441],["T_WHITESPACE"," ",441],".",["T_WHITESPACE"," ",441],["T_CONSTANT_ENCAPSED_STRING","'\/'",441],";",["T_WHITESPACE","\n        ",441],"}",["T_WHITESPACE","\n\n        ",442],["T_IF","if",444],["T_WHITESPACE"," ",444],"(","!",["T_EMPTY","empty",444],"(",["T_VARIABLE","$a",444],")",")",["T_WHITESPACE"," ",444],"{",["T_WHITESPACE","\n            ",444],["T_VARIABLE","$this",445],["T_OBJECT_OPERATOR","->",445],["T_STRING","unsetData",445],"(",["T_CONSTANT_ENCAPSED_STRING","'route_params'",445],")",";",["T_WHITESPACE","\n            ",445],["T_WHILE","while",446],["T_WHITESPACE"," ",446],"(","!",["T_EMPTY","empty",446],"(",["T_VARIABLE","$a",446],")",")",["T_WHITESPACE"," ",446],"{",["T_WHITESPACE","\n                ",446],["T_VARIABLE","$key",447],["T_WHITESPACE"," ",447],"=",["T_WHITESPACE"," ",447],["T_STRING","array_shift",447],"(",["T_VARIABLE","$a",447],")",";",["T_WHITESPACE","\n                ",447],["T_IF","if",448],["T_WHITESPACE"," ",448],"(","!",["T_EMPTY","empty",448],"(",["T_VARIABLE","$a",448],")",")",["T_WHITESPACE"," ",448],"{",["T_WHITESPACE","\n                    ",448],["T_VARIABLE","$value",449],["T_WHITESPACE"," ",449],"=",["T_WHITESPACE"," ",449],["T_STRING","array_shift",449],"(",["T_VARIABLE","$a",449],")",";",["T_WHITESPACE","\n                    ",449],["T_VARIABLE","$this",450],["T_OBJECT_OPERATOR","->",450],["T_STRING","setRouteParam",450],"(",["T_VARIABLE","$key",450],",",["T_WHITESPACE"," ",450],["T_VARIABLE","$value",450],")",";",["T_WHITESPACE","\n                    ",450],["T_VARIABLE","$routePath",451],["T_WHITESPACE"," ",451],["T_CONCAT_EQUAL",".=",451],["T_WHITESPACE"," ",451],["T_VARIABLE","$key",451],["T_WHITESPACE"," ",451],".",["T_WHITESPACE"," ",451],["T_CONSTANT_ENCAPSED_STRING","'\/'",451],["T_WHITESPACE"," ",451],".",["T_WHITESPACE"," ",451],["T_VARIABLE","$value",451],["T_WHITESPACE"," ",451],".",["T_WHITESPACE"," ",451],["T_CONSTANT_ENCAPSED_STRING","'\/'",451],";",["T_WHITESPACE","\n                ",451],"}",["T_WHITESPACE","\n            ",452],"}",["T_WHITESPACE","\n        ",453],"}",["T_WHITESPACE","\n\n        ",454],["T_RETURN","return",456],["T_WHITESPACE"," ",456],["T_VARIABLE","$this",456],";",["T_WHITESPACE","\n    ",456],"}",["T_WHITESPACE","\n\n    ",457],["T_DOC_COMMENT","\/**\n     * Retrieve action path\n     *\n     * @return string\n     *\/",459],["T_WHITESPACE","\n    ",463],["T_PUBLIC","public",464],["T_WHITESPACE"," ",464],["T_FUNCTION","function",464],["T_WHITESPACE"," ",464],["T_STRING","getActionPath",464],"(",")",["T_WHITESPACE","\n    ",464],"{",["T_WHITESPACE","\n        ",465],["T_IF","if",466],["T_WHITESPACE"," ",466],"(","!",["T_VARIABLE","$this",466],["T_OBJECT_OPERATOR","->",466],["T_STRING","getRouteName",466],"(",")",")",["T_WHITESPACE"," ",466],"{",["T_WHITESPACE","\n            ",466],["T_RETURN","return",467],["T_WHITESPACE"," ",467],["T_CONSTANT_ENCAPSED_STRING","''",467],";",["T_WHITESPACE","\n        ",467],"}",["T_WHITESPACE","\n\n        ",468],["T_VARIABLE","$hasParams",470],["T_WHITESPACE"," ",470],"=",["T_WHITESPACE"," ",470],["T_BOOL_CAST","(bool)",470],["T_WHITESPACE"," ",470],["T_VARIABLE","$this",470],["T_OBJECT_OPERATOR","->",470],["T_STRING","getRouteParams",470],"(",")",";",["T_WHITESPACE","\n        ",470],["T_VARIABLE","$path",471],["T_WHITESPACE"," ",471],"=",["T_WHITESPACE"," ",471],["T_VARIABLE","$this",471],["T_OBJECT_OPERATOR","->",471],["T_STRING","getRouteFrontName",471],"(",")",["T_WHITESPACE"," ",471],".",["T_WHITESPACE"," ",471],["T_CONSTANT_ENCAPSED_STRING","'\/'",471],";",["T_WHITESPACE","\n\n        ",471],["T_IF","if",473],["T_WHITESPACE"," ",473],"(",["T_VARIABLE","$this",473],["T_OBJECT_OPERATOR","->",473],["T_STRING","getControllerName",473],"(",")",")",["T_WHITESPACE"," ",473],"{",["T_WHITESPACE","\n            ",473],["T_VARIABLE","$path",474],["T_WHITESPACE"," ",474],["T_CONCAT_EQUAL",".=",474],["T_WHITESPACE"," ",474],["T_VARIABLE","$this",474],["T_OBJECT_OPERATOR","->",474],["T_STRING","getControllerName",474],"(",")",["T_WHITESPACE"," ",474],".",["T_WHITESPACE"," ",474],["T_CONSTANT_ENCAPSED_STRING","'\/'",474],";",["T_WHITESPACE","\n        ",474],"}",["T_WHITESPACE"," ",475],["T_ELSEIF","elseif",475],["T_WHITESPACE"," ",475],"(",["T_VARIABLE","$hasParams",475],")",["T_WHITESPACE"," ",475],"{",["T_WHITESPACE","\n            ",475],["T_VARIABLE","$path",476],["T_WHITESPACE"," ",476],["T_CONCAT_EQUAL",".=",476],["T_WHITESPACE"," ",476],["T_VARIABLE","$this",476],["T_OBJECT_OPERATOR","->",476],["T_STRING","getDefaultControllerName",476],"(",")",["T_WHITESPACE"," ",476],".",["T_WHITESPACE"," ",476],["T_CONSTANT_ENCAPSED_STRING","'\/'",476],";",["T_WHITESPACE","\n        ",476],"}",["T_WHITESPACE","\n        ",477],["T_IF","if",478],["T_WHITESPACE"," ",478],"(",["T_VARIABLE","$this",478],["T_OBJECT_OPERATOR","->",478],["T_STRING","getActionName",478],"(",")",")",["T_WHITESPACE"," ",478],"{",["T_WHITESPACE","\n            ",478],["T_VARIABLE","$path",479],["T_WHITESPACE"," ",479],["T_CONCAT_EQUAL",".=",479],["T_WHITESPACE"," ",479],["T_VARIABLE","$this",479],["T_OBJECT_OPERATOR","->",479],["T_STRING","getActionName",479],"(",")",["T_WHITESPACE"," ",479],".",["T_WHITESPACE"," ",479],["T_CONSTANT_ENCAPSED_STRING","'\/'",479],";",["T_WHITESPACE","\n        ",479],"}",["T_WHITESPACE"," ",480],["T_ELSEIF","elseif",480],["T_WHITESPACE"," ",480],"(",["T_VARIABLE","$hasParams",480],")",["T_WHITESPACE"," ",480],"{",["T_WHITESPACE","\n            ",480],["T_VARIABLE","$path",481],["T_WHITESPACE"," ",481],["T_CONCAT_EQUAL",".=",481],["T_WHITESPACE"," ",481],["T_VARIABLE","$this",481],["T_OBJECT_OPERATOR","->",481],["T_STRING","getDefaultActionName",481],"(",")",["T_WHITESPACE"," ",481],".",["T_WHITESPACE"," ",481],["T_CONSTANT_ENCAPSED_STRING","'\/'",481],";",["T_WHITESPACE","\n        ",481],"}",["T_WHITESPACE","\n\n        ",482],["T_RETURN","return",484],["T_WHITESPACE"," ",484],["T_VARIABLE","$path",484],";",["T_WHITESPACE","\n    ",484],"}",["T_WHITESPACE","\n\n    ",485],["T_DOC_COMMENT","\/**\n     * Retrieve route path\n     *\n     * @param array $routParams\n     * @return string\n     *\/",487],["T_WHITESPACE","\n    ",492],["T_PUBLIC","public",493],["T_WHITESPACE"," ",493],["T_FUNCTION","function",493],["T_WHITESPACE"," ",493],["T_STRING","getRoutePath",493],"(",["T_VARIABLE","$routeParams",493],["T_WHITESPACE"," ",493],"=",["T_WHITESPACE"," ",493],["T_ARRAY","array",493],"(",")",")",["T_WHITESPACE","\n    ",493],"{",["T_WHITESPACE","\n        ",494],["T_IF","if",495],["T_WHITESPACE"," ",495],"(","!",["T_VARIABLE","$this",495],["T_OBJECT_OPERATOR","->",495],["T_STRING","hasData",495],"(",["T_CONSTANT_ENCAPSED_STRING","'route_path'",495],")",")",["T_WHITESPACE"," ",495],"{",["T_WHITESPACE","\n            ",495],["T_VARIABLE","$routePath",496],["T_WHITESPACE"," ",496],"=",["T_WHITESPACE"," ",496],["T_VARIABLE","$this",496],["T_OBJECT_OPERATOR","->",496],["T_STRING","getRequest",496],"(",")",["T_OBJECT_OPERATOR","->",496],["T_STRING","getAlias",496],"(",["T_STRING","Mage_Core_Model_Url_Rewrite",496],["T_DOUBLE_COLON","::",496],["T_STRING","REWRITE_REQUEST_PATH_ALIAS",496],")",";",["T_WHITESPACE","\n            ",496],["T_IF","if",497],["T_WHITESPACE"," ",497],"(","!",["T_EMPTY","empty",497],"(",["T_VARIABLE","$routeParams",497],"[",["T_CONSTANT_ENCAPSED_STRING","'_use_rewrite'",497],"]",")",["T_WHITESPACE"," ",497],["T_BOOLEAN_AND","&&",497],["T_WHITESPACE"," ",497],"(",["T_VARIABLE","$routePath",497],["T_WHITESPACE"," ",497],["T_IS_NOT_IDENTICAL","!==",497],["T_WHITESPACE"," ",497],["T_STRING","null",497],")",")",["T_WHITESPACE"," ",497],"{",["T_WHITESPACE","\n                ",497],["T_VARIABLE","$this",498],["T_OBJECT_OPERATOR","->",498],["T_STRING","setData",498],"(",["T_CONSTANT_ENCAPSED_STRING","'route_path'",498],",",["T_WHITESPACE"," ",498],["T_VARIABLE","$routePath",498],")",";",["T_WHITESPACE","\n                ",498],["T_RETURN","return",499],["T_WHITESPACE"," ",499],["T_VARIABLE","$routePath",499],";",["T_WHITESPACE","\n            ",499],"}",["T_WHITESPACE","\n            ",500],["T_VARIABLE","$routePath",501],["T_WHITESPACE"," ",501],"=",["T_WHITESPACE"," ",501],["T_VARIABLE","$this",501],["T_OBJECT_OPERATOR","->",501],["T_STRING","getActionPath",501],"(",")",";",["T_WHITESPACE","\n            ",501],["T_IF","if",502],["T_WHITESPACE"," ",502],"(",["T_VARIABLE","$this",502],["T_OBJECT_OPERATOR","->",502],["T_STRING","getRouteParams",502],"(",")",")",["T_WHITESPACE"," ",502],"{",["T_WHITESPACE","\n                ",502],["T_FOREACH","foreach",503],["T_WHITESPACE"," ",503],"(",["T_VARIABLE","$this",503],["T_OBJECT_OPERATOR","->",503],["T_STRING","getRouteParams",503],"(",")",["T_WHITESPACE"," ",503],["T_AS","as",503],["T_WHITESPACE"," ",503],["T_VARIABLE","$key",503],["T_WHITESPACE"," ",503],["T_DOUBLE_ARROW","=>",503],["T_WHITESPACE"," ",503],["T_VARIABLE","$value",503],")",["T_WHITESPACE"," ",503],"{",["T_WHITESPACE","\n                    ",503],["T_IF","if",504],["T_WHITESPACE"," ",504],"(",["T_STRING","is_null",504],"(",["T_VARIABLE","$value",504],")",["T_WHITESPACE"," ",504],["T_BOOLEAN_OR","||",504],["T_WHITESPACE"," ",504],["T_STRING","false",504],["T_WHITESPACE"," ",504],["T_IS_IDENTICAL","===",504],["T_WHITESPACE"," ",504],["T_VARIABLE","$value",504],["T_WHITESPACE"," ",504],["T_BOOLEAN_OR","||",504],["T_WHITESPACE"," ",504],["T_CONSTANT_ENCAPSED_STRING","''",504],["T_WHITESPACE"," ",504],["T_IS_IDENTICAL","===",504],["T_WHITESPACE"," ",504],["T_VARIABLE","$value",504],["T_WHITESPACE"," ",504],["T_BOOLEAN_OR","||",504],["T_WHITESPACE"," ",504],"!",["T_STRING","is_scalar",504],"(",["T_VARIABLE","$value",504],")",")",["T_WHITESPACE"," ",504],"{",["T_WHITESPACE","\n                        ",504],["T_CONTINUE","continue",505],";",["T_WHITESPACE","\n                    ",505],"}",["T_WHITESPACE","\n                    ",506],["T_VARIABLE","$routePath",507],["T_WHITESPACE"," ",507],["T_CONCAT_EQUAL",".=",507],["T_WHITESPACE"," ",507],["T_VARIABLE","$key",507],["T_WHITESPACE"," ",507],".",["T_WHITESPACE"," ",507],["T_CONSTANT_ENCAPSED_STRING","'\/'",507],["T_WHITESPACE"," ",507],".",["T_WHITESPACE"," ",507],["T_VARIABLE","$value",507],["T_WHITESPACE"," ",507],".",["T_WHITESPACE"," ",507],["T_CONSTANT_ENCAPSED_STRING","'\/'",507],";",["T_WHITESPACE","\n                ",507],"}",["T_WHITESPACE","\n            ",508],"}",["T_WHITESPACE","\n            ",509],["T_IF","if",510],["T_WHITESPACE"," ",510],"(",["T_VARIABLE","$routePath",510],["T_WHITESPACE"," ",510],["T_IS_NOT_EQUAL","!=",510],["T_WHITESPACE"," ",510],["T_CONSTANT_ENCAPSED_STRING","''",510],["T_WHITESPACE"," ",510],["T_BOOLEAN_AND","&&",510],["T_WHITESPACE"," ",510],["T_STRING","substr",510],"(",["T_VARIABLE","$routePath",510],",",["T_WHITESPACE"," ",510],"-",["T_LNUMBER","1",510],",",["T_WHITESPACE"," ",510],["T_LNUMBER","1",510],")",["T_WHITESPACE"," ",510],["T_IS_NOT_IDENTICAL","!==",510],["T_WHITESPACE"," ",510],["T_CONSTANT_ENCAPSED_STRING","'\/'",510],")",["T_WHITESPACE"," ",510],"{",["T_WHITESPACE","\n                ",510],["T_VARIABLE","$routePath",511],["T_WHITESPACE"," ",511],["T_CONCAT_EQUAL",".=",511],["T_WHITESPACE"," ",511],["T_CONSTANT_ENCAPSED_STRING","'\/'",511],";",["T_WHITESPACE","\n            ",511],"}",["T_WHITESPACE","\n            ",512],["T_VARIABLE","$this",513],["T_OBJECT_OPERATOR","->",513],["T_STRING","setData",513],"(",["T_CONSTANT_ENCAPSED_STRING","'route_path'",513],",",["T_WHITESPACE"," ",513],["T_VARIABLE","$routePath",513],")",";",["T_WHITESPACE","\n        ",513],"}",["T_WHITESPACE","\n        ",514],["T_RETURN","return",515],["T_WHITESPACE"," ",515],["T_VARIABLE","$this",515],["T_OBJECT_OPERATOR","->",515],["T_STRING","_getData",515],"(",["T_CONSTANT_ENCAPSED_STRING","'route_path'",515],")",";",["T_WHITESPACE","\n    ",515],"}",["T_WHITESPACE","\n\n    ",516],["T_DOC_COMMENT","\/**\n     * Set route name\n     *\n     * @param string $data\n     * @return Mage_Core_Model_Url\n     *\/",518],["T_WHITESPACE","\n    ",523],["T_PUBLIC","public",524],["T_WHITESPACE"," ",524],["T_FUNCTION","function",524],["T_WHITESPACE"," ",524],["T_STRING","setRouteName",524],"(",["T_VARIABLE","$data",524],")",["T_WHITESPACE","\n    ",524],"{",["T_WHITESPACE","\n        ",525],["T_IF","if",526],["T_WHITESPACE"," ",526],"(",["T_VARIABLE","$this",526],["T_OBJECT_OPERATOR","->",526],["T_STRING","_getData",526],"(",["T_CONSTANT_ENCAPSED_STRING","'route_name'",526],")",["T_WHITESPACE"," ",526],["T_IS_EQUAL","==",526],["T_WHITESPACE"," ",526],["T_VARIABLE","$data",526],")",["T_WHITESPACE"," ",526],"{",["T_WHITESPACE","\n            ",526],["T_RETURN","return",527],["T_WHITESPACE"," ",527],["T_VARIABLE","$this",527],";",["T_WHITESPACE","\n        ",527],"}",["T_WHITESPACE","\n        ",528],["T_VARIABLE","$this",529],["T_OBJECT_OPERATOR","->",529],["T_STRING","unsetData",529],"(",["T_CONSTANT_ENCAPSED_STRING","'route_front_name'",529],")",["T_WHITESPACE","\n            ",529],["T_OBJECT_OPERATOR","->",530],["T_STRING","unsetData",530],"(",["T_CONSTANT_ENCAPSED_STRING","'route_path'",530],")",["T_WHITESPACE","\n            ",530],["T_OBJECT_OPERATOR","->",531],["T_STRING","unsetData",531],"(",["T_CONSTANT_ENCAPSED_STRING","'controller_name'",531],")",["T_WHITESPACE","\n            ",531],["T_OBJECT_OPERATOR","->",532],["T_STRING","unsetData",532],"(",["T_CONSTANT_ENCAPSED_STRING","'action_name'",532],")",["T_WHITESPACE","\n            ",532],["T_OBJECT_OPERATOR","->",533],["T_STRING","unsetData",533],"(",["T_CONSTANT_ENCAPSED_STRING","'secure'",533],")",";",["T_WHITESPACE","\n        ",533],["T_RETURN","return",534],["T_WHITESPACE"," ",534],["T_VARIABLE","$this",534],["T_OBJECT_OPERATOR","->",534],["T_STRING","setData",534],"(",["T_CONSTANT_ENCAPSED_STRING","'route_name'",534],",",["T_WHITESPACE"," ",534],["T_VARIABLE","$data",534],")",";",["T_WHITESPACE","\n    ",534],"}",["T_WHITESPACE","\n\n    ",535],["T_DOC_COMMENT","\/**\n     * Retrieve route front name\n     *\n     * @return string\n     *\/",537],["T_WHITESPACE","\n    ",541],["T_PUBLIC","public",542],["T_WHITESPACE"," ",542],["T_FUNCTION","function",542],["T_WHITESPACE"," ",542],["T_STRING","getRouteFrontName",542],"(",")",["T_WHITESPACE","\n    ",542],"{",["T_WHITESPACE","\n        ",543],["T_IF","if",544],["T_WHITESPACE"," ",544],"(","!",["T_VARIABLE","$this",544],["T_OBJECT_OPERATOR","->",544],["T_STRING","hasData",544],"(",["T_CONSTANT_ENCAPSED_STRING","'route_front_name'",544],")",")",["T_WHITESPACE"," ",544],"{",["T_WHITESPACE","\n            ",544],["T_VARIABLE","$routeName",545],["T_WHITESPACE"," ",545],"=",["T_WHITESPACE"," ",545],["T_VARIABLE","$this",545],["T_OBJECT_OPERATOR","->",545],["T_STRING","getRouteName",545],"(",")",";",["T_WHITESPACE","\n            ",545],["T_VARIABLE","$route",546],["T_WHITESPACE"," ",546],"=",["T_WHITESPACE"," ",546],["T_STRING","Mage",546],["T_DOUBLE_COLON","::",546],["T_STRING","app",546],"(",")",["T_OBJECT_OPERATOR","->",546],["T_STRING","getFrontController",546],"(",")",["T_OBJECT_OPERATOR","->",546],["T_STRING","getRouterByRoute",546],"(",["T_VARIABLE","$routeName",546],")",";",["T_WHITESPACE","\n            ",546],["T_VARIABLE","$frontName",547],["T_WHITESPACE"," ",547],"=",["T_WHITESPACE"," ",547],["T_VARIABLE","$route",547],["T_OBJECT_OPERATOR","->",547],["T_STRING","getFrontNameByRoute",547],"(",["T_VARIABLE","$routeName",547],")",";",["T_WHITESPACE","\n\n            ",547],["T_VARIABLE","$this",549],["T_OBJECT_OPERATOR","->",549],["T_STRING","setRouteFrontName",549],"(",["T_VARIABLE","$frontName",549],")",";",["T_WHITESPACE","\n        ",549],"}",["T_WHITESPACE","\n\n        ",550],["T_RETURN","return",552],["T_WHITESPACE"," ",552],["T_VARIABLE","$this",552],["T_OBJECT_OPERATOR","->",552],["T_STRING","_getData",552],"(",["T_CONSTANT_ENCAPSED_STRING","'route_front_name'",552],")",";",["T_WHITESPACE","\n    ",552],"}",["T_WHITESPACE","\n\n    ",553],["T_DOC_COMMENT","\/**\n     * Retrieve route name\n     *\n     * @return string|null\n     *\/",555],["T_WHITESPACE","\n    ",559],["T_PUBLIC","public",560],["T_WHITESPACE"," ",560],["T_FUNCTION","function",560],["T_WHITESPACE"," ",560],["T_STRING","getRouteName",560],"(",")",["T_WHITESPACE","\n    ",560],"{",["T_WHITESPACE","\n        ",561],["T_RETURN","return",562],["T_WHITESPACE"," ",562],["T_VARIABLE","$this",562],["T_OBJECT_OPERATOR","->",562],["T_STRING","_getData",562],"(",["T_CONSTANT_ENCAPSED_STRING","'route_name'",562],")",";",["T_WHITESPACE","\n    ",562],"}",["T_WHITESPACE","\n\n    ",563],["T_DOC_COMMENT","\/**\n     * Set Controller Name\n     *\n     * Reset action name and route path if has change\n     *\n     * @param string $data\n     * @return Mage_Core_Model_Url\n     *\/",565],["T_WHITESPACE","\n    ",572],["T_PUBLIC","public",573],["T_WHITESPACE"," ",573],["T_FUNCTION","function",573],["T_WHITESPACE"," ",573],["T_STRING","setControllerName",573],"(",["T_VARIABLE","$data",573],")",["T_WHITESPACE","\n    ",573],"{",["T_WHITESPACE","\n        ",574],["T_IF","if",575],["T_WHITESPACE"," ",575],"(",["T_VARIABLE","$this",575],["T_OBJECT_OPERATOR","->",575],["T_STRING","_getData",575],"(",["T_CONSTANT_ENCAPSED_STRING","'controller_name'",575],")",["T_WHITESPACE"," ",575],["T_IS_EQUAL","==",575],["T_WHITESPACE"," ",575],["T_VARIABLE","$data",575],")",["T_WHITESPACE"," ",575],"{",["T_WHITESPACE","\n            ",575],["T_RETURN","return",576],["T_WHITESPACE"," ",576],["T_VARIABLE","$this",576],";",["T_WHITESPACE","\n        ",576],"}",["T_WHITESPACE","\n        ",577],["T_VARIABLE","$this",578],["T_OBJECT_OPERATOR","->",578],["T_STRING","unsetData",578],"(",["T_CONSTANT_ENCAPSED_STRING","'route_path'",578],")",["T_OBJECT_OPERATOR","->",578],["T_STRING","unsetData",578],"(",["T_CONSTANT_ENCAPSED_STRING","'action_name'",578],")",["T_OBJECT_OPERATOR","->",578],["T_STRING","unsetData",578],"(",["T_CONSTANT_ENCAPSED_STRING","'secure'",578],")",";",["T_WHITESPACE","\n        ",578],["T_RETURN","return",579],["T_WHITESPACE"," ",579],["T_VARIABLE","$this",579],["T_OBJECT_OPERATOR","->",579],["T_STRING","setData",579],"(",["T_CONSTANT_ENCAPSED_STRING","'controller_name'",579],",",["T_WHITESPACE"," ",579],["T_VARIABLE","$data",579],")",";",["T_WHITESPACE","\n    ",579],"}",["T_WHITESPACE","\n\n    ",580],["T_DOC_COMMENT","\/**\n     * Retrieve controller name\n     *\n     * @return string|null\n     *\/",582],["T_WHITESPACE","\n    ",586],["T_PUBLIC","public",587],["T_WHITESPACE"," ",587],["T_FUNCTION","function",587],["T_WHITESPACE"," ",587],["T_STRING","getControllerName",587],"(",")",["T_WHITESPACE","\n    ",587],"{",["T_WHITESPACE","\n        ",588],["T_RETURN","return",589],["T_WHITESPACE"," ",589],["T_VARIABLE","$this",589],["T_OBJECT_OPERATOR","->",589],["T_STRING","_getData",589],"(",["T_CONSTANT_ENCAPSED_STRING","'controller_name'",589],")",";",["T_WHITESPACE","\n    ",589],"}",["T_WHITESPACE","\n\n    ",590],["T_DOC_COMMENT","\/**\n     * Set Action name\n     * Reseted route path if action name has change\n     *\n     * @param string $data\n     * @return Mage_Core_Model_Url\n     *\/",592],["T_WHITESPACE","\n    ",598],["T_PUBLIC","public",599],["T_WHITESPACE"," ",599],["T_FUNCTION","function",599],["T_WHITESPACE"," ",599],["T_STRING","setActionName",599],"(",["T_VARIABLE","$data",599],")",["T_WHITESPACE","\n    ",599],"{",["T_WHITESPACE","\n        ",600],["T_IF","if",601],["T_WHITESPACE"," ",601],"(",["T_VARIABLE","$this",601],["T_OBJECT_OPERATOR","->",601],["T_STRING","_getData",601],"(",["T_CONSTANT_ENCAPSED_STRING","'action_name'",601],")",["T_WHITESPACE"," ",601],["T_IS_EQUAL","==",601],["T_WHITESPACE"," ",601],["T_VARIABLE","$data",601],")",["T_WHITESPACE"," ",601],"{",["T_WHITESPACE","\n            ",601],["T_RETURN","return",602],["T_WHITESPACE"," ",602],["T_VARIABLE","$this",602],";",["T_WHITESPACE","\n        ",602],"}",["T_WHITESPACE","\n        ",603],["T_VARIABLE","$this",604],["T_OBJECT_OPERATOR","->",604],["T_STRING","unsetData",604],"(",["T_CONSTANT_ENCAPSED_STRING","'route_path'",604],")",";",["T_WHITESPACE","\n        ",604],["T_RETURN","return",605],["T_WHITESPACE"," ",605],["T_VARIABLE","$this",605],["T_OBJECT_OPERATOR","->",605],["T_STRING","setData",605],"(",["T_CONSTANT_ENCAPSED_STRING","'action_name'",605],",",["T_WHITESPACE"," ",605],["T_VARIABLE","$data",605],")",["T_OBJECT_OPERATOR","->",605],["T_STRING","unsetData",605],"(",["T_CONSTANT_ENCAPSED_STRING","'secure'",605],")",";",["T_WHITESPACE","\n    ",605],"}",["T_WHITESPACE","\n\n    ",606],["T_DOC_COMMENT","\/**\n     * Retrieve action name\n     *\n     * @return string|null\n     *\/",608],["T_WHITESPACE","\n    ",612],["T_PUBLIC","public",613],["T_WHITESPACE"," ",613],["T_FUNCTION","function",613],["T_WHITESPACE"," ",613],["T_STRING","getActionName",613],"(",")",["T_WHITESPACE","\n    ",613],"{",["T_WHITESPACE","\n        ",614],["T_RETURN","return",615],["T_WHITESPACE"," ",615],["T_VARIABLE","$this",615],["T_OBJECT_OPERATOR","->",615],["T_STRING","_getData",615],"(",["T_CONSTANT_ENCAPSED_STRING","'action_name'",615],")",";",["T_WHITESPACE","\n    ",615],"}",["T_WHITESPACE","\n\n    ",616],["T_DOC_COMMENT","\/**\n     * Set route params\n     *\n     * @param array $data\n     * @param boolean $unsetOldParams\n     * @return Mage_Core_Model_Url\n     *\/",618],["T_WHITESPACE","\n    ",624],["T_PUBLIC","public",625],["T_WHITESPACE"," ",625],["T_FUNCTION","function",625],["T_WHITESPACE"," ",625],["T_STRING","setRouteParams",625],"(",["T_ARRAY","array",625],["T_WHITESPACE"," ",625],["T_VARIABLE","$data",625],",",["T_WHITESPACE"," ",625],["T_VARIABLE","$unsetOldParams",625],["T_WHITESPACE"," ",625],"=",["T_WHITESPACE"," ",625],["T_STRING","true",625],")",["T_WHITESPACE","\n    ",625],"{",["T_WHITESPACE","\n        ",626],["T_IF","if",627],["T_WHITESPACE"," ",627],"(",["T_ISSET","isset",627],"(",["T_VARIABLE","$data",627],"[",["T_CONSTANT_ENCAPSED_STRING","'_type'",627],"]",")",")",["T_WHITESPACE"," ",627],"{",["T_WHITESPACE","\n            ",627],["T_VARIABLE","$this",628],["T_OBJECT_OPERATOR","->",628],["T_STRING","setType",628],"(",["T_VARIABLE","$data",628],"[",["T_CONSTANT_ENCAPSED_STRING","'_type'",628],"]",")",";",["T_WHITESPACE","\n            ",628],["T_UNSET","unset",629],"(",["T_VARIABLE","$data",629],"[",["T_CONSTANT_ENCAPSED_STRING","'_type'",629],"]",")",";",["T_WHITESPACE","\n        ",629],"}",["T_WHITESPACE","\n\n        ",630],["T_IF","if",632],["T_WHITESPACE"," ",632],"(",["T_ISSET","isset",632],"(",["T_VARIABLE","$data",632],"[",["T_CONSTANT_ENCAPSED_STRING","'_store'",632],"]",")",")",["T_WHITESPACE"," ",632],"{",["T_WHITESPACE","\n            ",632],["T_VARIABLE","$this",633],["T_OBJECT_OPERATOR","->",633],["T_STRING","setStore",633],"(",["T_VARIABLE","$data",633],"[",["T_CONSTANT_ENCAPSED_STRING","'_store'",633],"]",")",";",["T_WHITESPACE","\n            ",633],["T_UNSET","unset",634],"(",["T_VARIABLE","$data",634],"[",["T_CONSTANT_ENCAPSED_STRING","'_store'",634],"]",")",";",["T_WHITESPACE","\n        ",634],"}",["T_WHITESPACE","\n\n        ",635],["T_IF","if",637],["T_WHITESPACE"," ",637],"(",["T_ISSET","isset",637],"(",["T_VARIABLE","$data",637],"[",["T_CONSTANT_ENCAPSED_STRING","'_forced_secure'",637],"]",")",")",["T_WHITESPACE"," ",637],"{",["T_WHITESPACE","\n            ",637],["T_VARIABLE","$this",638],["T_OBJECT_OPERATOR","->",638],["T_STRING","setSecure",638],"(",["T_BOOL_CAST","(bool)",638],["T_VARIABLE","$data",638],"[",["T_CONSTANT_ENCAPSED_STRING","'_forced_secure'",638],"]",")",";",["T_WHITESPACE","\n            ",638],["T_VARIABLE","$this",639],["T_OBJECT_OPERATOR","->",639],["T_STRING","setSecureIsForced",639],"(",["T_STRING","true",639],")",";",["T_WHITESPACE","\n            ",639],["T_UNSET","unset",640],"(",["T_VARIABLE","$data",640],"[",["T_CONSTANT_ENCAPSED_STRING","'_forced_secure'",640],"]",")",";",["T_WHITESPACE","\n        ",640],"}",["T_WHITESPACE"," ",641],["T_ELSEIF","elseif",641],["T_WHITESPACE"," ",641],"(",["T_ISSET","isset",641],"(",["T_VARIABLE","$data",641],"[",["T_CONSTANT_ENCAPSED_STRING","'_secure'",641],"]",")",")",["T_WHITESPACE"," ",641],"{",["T_WHITESPACE","\n            ",641],["T_VARIABLE","$this",642],["T_OBJECT_OPERATOR","->",642],["T_STRING","setSecure",642],"(",["T_BOOL_CAST","(bool)",642],["T_VARIABLE","$data",642],"[",["T_CONSTANT_ENCAPSED_STRING","'_secure'",642],"]",")",";",["T_WHITESPACE","\n            ",642],["T_UNSET","unset",643],"(",["T_VARIABLE","$data",643],"[",["T_CONSTANT_ENCAPSED_STRING","'_secure'",643],"]",")",";",["T_WHITESPACE","\n        ",643],"}",["T_WHITESPACE","\n\n        ",644],["T_IF","if",646],["T_WHITESPACE"," ",646],"(",["T_ISSET","isset",646],"(",["T_VARIABLE","$data",646],"[",["T_CONSTANT_ENCAPSED_STRING","'_absolute'",646],"]",")",")",["T_WHITESPACE"," ",646],"{",["T_WHITESPACE","\n            ",646],["T_UNSET","unset",647],"(",["T_VARIABLE","$data",647],"[",["T_CONSTANT_ENCAPSED_STRING","'_absolute'",647],"]",")",";",["T_WHITESPACE","\n        ",647],"}",["T_WHITESPACE","\n\n        ",648],["T_IF","if",650],["T_WHITESPACE"," ",650],"(",["T_VARIABLE","$unsetOldParams",650],")",["T_WHITESPACE"," ",650],"{",["T_WHITESPACE","\n            ",650],["T_VARIABLE","$this",651],["T_OBJECT_OPERATOR","->",651],["T_STRING","unsetData",651],"(",["T_CONSTANT_ENCAPSED_STRING","'route_params'",651],")",";",["T_WHITESPACE","\n        ",651],"}",["T_WHITESPACE","\n\n        ",652],["T_VARIABLE","$this",654],["T_OBJECT_OPERATOR","->",654],["T_STRING","setUseUrlCache",654],"(",["T_STRING","true",654],")",";",["T_WHITESPACE","\n        ",654],["T_IF","if",655],["T_WHITESPACE"," ",655],"(",["T_ISSET","isset",655],"(",["T_VARIABLE","$data",655],"[",["T_CONSTANT_ENCAPSED_STRING","'_current'",655],"]",")",")",["T_WHITESPACE"," ",655],"{",["T_WHITESPACE","\n            ",655],["T_IF","if",656],["T_WHITESPACE"," ",656],"(",["T_STRING","is_array",656],"(",["T_VARIABLE","$data",656],"[",["T_CONSTANT_ENCAPSED_STRING","'_current'",656],"]",")",")",["T_WHITESPACE"," ",656],"{",["T_WHITESPACE","\n                ",656],["T_FOREACH","foreach",657],["T_WHITESPACE"," ",657],"(",["T_VARIABLE","$data",657],"[",["T_CONSTANT_ENCAPSED_STRING","'_current'",657],"]",["T_WHITESPACE"," ",657],["T_AS","as",657],["T_WHITESPACE"," ",657],["T_VARIABLE","$key",657],")",["T_WHITESPACE"," ",657],"{",["T_WHITESPACE","\n                    ",657],["T_IF","if",658],["T_WHITESPACE"," ",658],"(",["T_STRING","array_key_exists",658],"(",["T_VARIABLE","$key",658],",",["T_WHITESPACE"," ",658],["T_VARIABLE","$data",658],")",["T_WHITESPACE"," ",658],["T_BOOLEAN_OR","||",658],["T_WHITESPACE"," ",658],"!",["T_VARIABLE","$this",658],["T_OBJECT_OPERATOR","->",658],["T_STRING","getRequest",658],"(",")",["T_OBJECT_OPERATOR","->",658],["T_STRING","getUserParam",658],"(",["T_VARIABLE","$key",658],")",")",["T_WHITESPACE"," ",658],"{",["T_WHITESPACE","\n                        ",658],["T_CONTINUE","continue",659],";",["T_WHITESPACE","\n                    ",659],"}",["T_WHITESPACE","\n                    ",660],["T_VARIABLE","$data",661],"[",["T_VARIABLE","$key",661],"]",["T_WHITESPACE"," ",661],"=",["T_WHITESPACE"," ",661],["T_VARIABLE","$this",661],["T_OBJECT_OPERATOR","->",661],["T_STRING","getRequest",661],"(",")",["T_OBJECT_OPERATOR","->",661],["T_STRING","getUserParam",661],"(",["T_VARIABLE","$key",661],")",";",["T_WHITESPACE","\n                ",661],"}",["T_WHITESPACE","\n            ",662],"}",["T_WHITESPACE"," ",663],["T_ELSEIF","elseif",663],["T_WHITESPACE"," ",663],"(",["T_VARIABLE","$data",663],"[",["T_CONSTANT_ENCAPSED_STRING","'_current'",663],"]",")",["T_WHITESPACE"," ",663],"{",["T_WHITESPACE","\n                ",663],["T_FOREACH","foreach",664],["T_WHITESPACE"," ",664],"(",["T_VARIABLE","$this",664],["T_OBJECT_OPERATOR","->",664],["T_STRING","getRequest",664],"(",")",["T_OBJECT_OPERATOR","->",664],["T_STRING","getUserParams",664],"(",")",["T_WHITESPACE"," ",664],["T_AS","as",664],["T_WHITESPACE"," ",664],["T_VARIABLE","$key",664],["T_WHITESPACE"," ",664],["T_DOUBLE_ARROW","=>",664],["T_WHITESPACE"," ",664],["T_VARIABLE","$value",664],")",["T_WHITESPACE"," ",664],"{",["T_WHITESPACE","\n                    ",664],["T_IF","if",665],["T_WHITESPACE"," ",665],"(",["T_STRING","array_key_exists",665],"(",["T_VARIABLE","$key",665],",",["T_WHITESPACE"," ",665],["T_VARIABLE","$data",665],")",["T_WHITESPACE"," ",665],["T_BOOLEAN_OR","||",665],["T_WHITESPACE"," ",665],["T_VARIABLE","$this",665],["T_OBJECT_OPERATOR","->",665],["T_STRING","getRouteParam",665],"(",["T_VARIABLE","$key",665],")",")",["T_WHITESPACE"," ",665],"{",["T_WHITESPACE","\n                        ",665],["T_CONTINUE","continue",666],";",["T_WHITESPACE","\n                    ",666],"}",["T_WHITESPACE","\n                    ",667],["T_VARIABLE","$data",668],"[",["T_VARIABLE","$key",668],"]",["T_WHITESPACE"," ",668],"=",["T_WHITESPACE"," ",668],["T_VARIABLE","$value",668],";",["T_WHITESPACE","\n                ",668],"}",["T_WHITESPACE","\n                ",669],["T_FOREACH","foreach",670],["T_WHITESPACE"," ",670],"(",["T_VARIABLE","$this",670],["T_OBJECT_OPERATOR","->",670],["T_STRING","getRequest",670],"(",")",["T_OBJECT_OPERATOR","->",670],["T_STRING","getQuery",670],"(",")",["T_WHITESPACE"," ",670],["T_AS","as",670],["T_WHITESPACE"," ",670],["T_VARIABLE","$key",670],["T_WHITESPACE"," ",670],["T_DOUBLE_ARROW","=>",670],["T_WHITESPACE"," ",670],["T_VARIABLE","$value",670],")",["T_WHITESPACE"," ",670],"{",["T_WHITESPACE","\n                    ",670],["T_VARIABLE","$this",671],["T_OBJECT_OPERATOR","->",671],["T_STRING","setQueryParam",671],"(",["T_VARIABLE","$key",671],",",["T_WHITESPACE"," ",671],["T_VARIABLE","$value",671],")",";",["T_WHITESPACE","\n                ",671],"}",["T_WHITESPACE","\n                ",672],["T_VARIABLE","$this",673],["T_OBJECT_OPERATOR","->",673],["T_STRING","setUseUrlCache",673],"(",["T_STRING","false",673],")",";",["T_WHITESPACE","\n            ",673],"}",["T_WHITESPACE","\n            ",674],["T_UNSET","unset",675],"(",["T_VARIABLE","$data",675],"[",["T_CONSTANT_ENCAPSED_STRING","'_current'",675],"]",")",";",["T_WHITESPACE","\n        ",675],"}",["T_WHITESPACE","\n\n        ",676],["T_IF","if",678],["T_WHITESPACE"," ",678],"(",["T_ISSET","isset",678],"(",["T_VARIABLE","$data",678],"[",["T_CONSTANT_ENCAPSED_STRING","'_use_rewrite'",678],"]",")",")",["T_WHITESPACE"," ",678],"{",["T_WHITESPACE","\n            ",678],["T_UNSET","unset",679],"(",["T_VARIABLE","$data",679],"[",["T_CONSTANT_ENCAPSED_STRING","'_use_rewrite'",679],"]",")",";",["T_WHITESPACE","\n        ",679],"}",["T_WHITESPACE","\n\n        ",680],["T_IF","if",682],["T_WHITESPACE"," ",682],"(",["T_ISSET","isset",682],"(",["T_VARIABLE","$data",682],"[",["T_CONSTANT_ENCAPSED_STRING","'_store_to_url'",682],"]",")",["T_WHITESPACE"," ",682],["T_BOOLEAN_AND","&&",682],["T_WHITESPACE"," ",682],["T_BOOL_CAST","(bool)",682],["T_VARIABLE","$data",682],"[",["T_CONSTANT_ENCAPSED_STRING","'_store_to_url'",682],"]",["T_WHITESPACE"," ",682],["T_IS_IDENTICAL","===",682],["T_WHITESPACE"," ",682],["T_STRING","true",682],")",["T_WHITESPACE"," ",682],"{",["T_WHITESPACE","\n            ",682],["T_IF","if",683],["T_WHITESPACE"," ",683],"(","!",["T_STRING","Mage",683],["T_DOUBLE_COLON","::",683],["T_STRING","getStoreConfig",683],"(",["T_STRING","Mage_Core_Model_Store",683],["T_DOUBLE_COLON","::",683],["T_STRING","XML_PATH_STORE_IN_URL",683],",",["T_WHITESPACE"," ",683],["T_VARIABLE","$this",683],["T_OBJECT_OPERATOR","->",683],["T_STRING","getStore",683],"(",")",")",["T_WHITESPACE","\n                ",683],["T_BOOLEAN_AND","&&",684],["T_WHITESPACE"," ",684],"!",["T_STRING","Mage",684],["T_DOUBLE_COLON","::",684],["T_STRING","app",684],"(",")",["T_OBJECT_OPERATOR","->",684],["T_STRING","isSingleStoreMode",684],"(",")",["T_WHITESPACE","\n            ",684],")",["T_WHITESPACE"," ",685],"{",["T_WHITESPACE","\n                ",685],["T_VARIABLE","$this",686],["T_OBJECT_OPERATOR","->",686],["T_STRING","setQueryParam",686],"(",["T_CONSTANT_ENCAPSED_STRING","'___store'",686],",",["T_WHITESPACE"," ",686],["T_VARIABLE","$this",686],["T_OBJECT_OPERATOR","->",686],["T_STRING","getStore",686],"(",")",["T_OBJECT_OPERATOR","->",686],["T_STRING","getCode",686],"(",")",")",";",["T_WHITESPACE","\n            ",686],"}",["T_WHITESPACE","\n        ",687],"}",["T_WHITESPACE","\n        ",688],["T_UNSET","unset",689],"(",["T_VARIABLE","$data",689],"[",["T_CONSTANT_ENCAPSED_STRING","'_store_to_url'",689],"]",")",";",["T_WHITESPACE","\n\n        ",689],["T_FOREACH","foreach",691],["T_WHITESPACE"," ",691],"(",["T_VARIABLE","$data",691],["T_WHITESPACE"," ",691],["T_AS","as",691],["T_WHITESPACE"," ",691],["T_VARIABLE","$k",691],["T_WHITESPACE"," ",691],["T_DOUBLE_ARROW","=>",691],["T_WHITESPACE"," ",691],["T_VARIABLE","$v",691],")",["T_WHITESPACE"," ",691],"{",["T_WHITESPACE","\n            ",691],["T_VARIABLE","$this",692],["T_OBJECT_OPERATOR","->",692],["T_STRING","setRouteParam",692],"(",["T_VARIABLE","$k",692],",",["T_WHITESPACE"," ",692],["T_VARIABLE","$v",692],")",";",["T_WHITESPACE","\n        ",692],"}",["T_WHITESPACE","\n\n        ",693],["T_RETURN","return",695],["T_WHITESPACE"," ",695],["T_VARIABLE","$this",695],";",["T_WHITESPACE","\n    ",695],"}",["T_WHITESPACE","\n\n    ",696],["T_DOC_COMMENT","\/**\n     * Retrieve route params\n     *\n     * @return array\n     *\/",698],["T_WHITESPACE","\n    ",702],["T_PUBLIC","public",703],["T_WHITESPACE"," ",703],["T_FUNCTION","function",703],["T_WHITESPACE"," ",703],["T_STRING","getRouteParams",703],"(",")",["T_WHITESPACE","\n    ",703],"{",["T_WHITESPACE","\n        ",704],["T_RETURN","return",705],["T_WHITESPACE"," ",705],["T_VARIABLE","$this",705],["T_OBJECT_OPERATOR","->",705],["T_STRING","_getData",705],"(",["T_CONSTANT_ENCAPSED_STRING","'route_params'",705],")",";",["T_WHITESPACE","\n    ",705],"}",["T_WHITESPACE","\n\n    ",706],["T_DOC_COMMENT","\/**\n     * Set route param\n     *\n     * @param string $key\n     * @param mixed $data\n     * @return Mage_Core_Model_Url\n     *\/",708],["T_WHITESPACE","\n    ",714],["T_PUBLIC","public",715],["T_WHITESPACE"," ",715],["T_FUNCTION","function",715],["T_WHITESPACE"," ",715],["T_STRING","setRouteParam",715],"(",["T_VARIABLE","$key",715],",",["T_WHITESPACE"," ",715],["T_VARIABLE","$data",715],")",["T_WHITESPACE","\n    ",715],"{",["T_WHITESPACE","\n        ",716],["T_VARIABLE","$params",717],["T_WHITESPACE"," ",717],"=",["T_WHITESPACE"," ",717],["T_VARIABLE","$this",717],["T_OBJECT_OPERATOR","->",717],["T_STRING","_getData",717],"(",["T_CONSTANT_ENCAPSED_STRING","'route_params'",717],")",";",["T_WHITESPACE","\n        ",717],["T_IF","if",718],["T_WHITESPACE"," ",718],"(",["T_ISSET","isset",718],"(",["T_VARIABLE","$params",718],"[",["T_VARIABLE","$key",718],"]",")",["T_WHITESPACE"," ",718],["T_BOOLEAN_AND","&&",718],["T_WHITESPACE"," ",718],["T_VARIABLE","$params",718],"[",["T_VARIABLE","$key",718],"]",["T_WHITESPACE"," ",718],["T_IS_EQUAL","==",718],["T_WHITESPACE"," ",718],["T_VARIABLE","$data",718],")",["T_WHITESPACE"," ",718],"{",["T_WHITESPACE","\n            ",718],["T_RETURN","return",719],["T_WHITESPACE"," ",719],["T_VARIABLE","$this",719],";",["T_WHITESPACE","\n        ",719],"}",["T_WHITESPACE","\n        ",720],["T_VARIABLE","$params",721],"[",["T_VARIABLE","$key",721],"]",["T_WHITESPACE"," ",721],"=",["T_WHITESPACE"," ",721],["T_VARIABLE","$data",721],";",["T_WHITESPACE","\n        ",721],["T_VARIABLE","$this",722],["T_OBJECT_OPERATOR","->",722],["T_STRING","unsetData",722],"(",["T_CONSTANT_ENCAPSED_STRING","'route_path'",722],")",";",["T_WHITESPACE","\n        ",722],["T_RETURN","return",723],["T_WHITESPACE"," ",723],["T_VARIABLE","$this",723],["T_OBJECT_OPERATOR","->",723],["T_STRING","setData",723],"(",["T_CONSTANT_ENCAPSED_STRING","'route_params'",723],",",["T_WHITESPACE"," ",723],["T_VARIABLE","$params",723],")",";",["T_WHITESPACE","\n    ",723],"}",["T_WHITESPACE","\n\n    ",724],["T_DOC_COMMENT","\/**\n     * Retrieve route params\n     *\n     * @param string $key\n     * @return mixed\n     *\/",726],["T_WHITESPACE","\n    ",731],["T_PUBLIC","public",732],["T_WHITESPACE"," ",732],["T_FUNCTION","function",732],["T_WHITESPACE"," ",732],["T_STRING","getRouteParam",732],"(",["T_VARIABLE","$key",732],")",["T_WHITESPACE","\n    ",732],"{",["T_WHITESPACE","\n        ",733],["T_RETURN","return",734],["T_WHITESPACE"," ",734],["T_VARIABLE","$this",734],["T_OBJECT_OPERATOR","->",734],["T_STRING","getData",734],"(",["T_CONSTANT_ENCAPSED_STRING","'route_params'",734],",",["T_WHITESPACE"," ",734],["T_VARIABLE","$key",734],")",";",["T_WHITESPACE","\n    ",734],"}",["T_WHITESPACE","\n\n    ",735],["T_DOC_COMMENT","\/**\n     * Retrieve route URL\n     *\n     * @param string $routePath\n     * @param array $routeParams\n     *\n     * @return string\n     *\/",737],["T_WHITESPACE","\n    ",744],["T_PUBLIC","public",745],["T_WHITESPACE"," ",745],["T_FUNCTION","function",745],["T_WHITESPACE"," ",745],["T_STRING","getRouteUrl",745],"(",["T_VARIABLE","$routePath",745],["T_WHITESPACE"," ",745],"=",["T_WHITESPACE"," ",745],["T_STRING","null",745],",",["T_WHITESPACE"," ",745],["T_VARIABLE","$routeParams",745],["T_WHITESPACE"," ",745],"=",["T_WHITESPACE"," ",745],["T_STRING","null",745],")",["T_WHITESPACE","\n    ",745],"{",["T_WHITESPACE","\n        ",746],["T_VARIABLE","$this",747],["T_OBJECT_OPERATOR","->",747],["T_STRING","unsetData",747],"(",["T_CONSTANT_ENCAPSED_STRING","'route_params'",747],")",";",["T_WHITESPACE","\n\n        ",747],["T_IF","if",749],["T_WHITESPACE"," ",749],"(",["T_ISSET","isset",749],"(",["T_VARIABLE","$routeParams",749],"[",["T_CONSTANT_ENCAPSED_STRING","'_direct'",749],"]",")",")",["T_WHITESPACE"," ",749],"{",["T_WHITESPACE","\n            ",749],["T_IF","if",750],["T_WHITESPACE"," ",750],"(",["T_STRING","is_array",750],"(",["T_VARIABLE","$routeParams",750],")",")",["T_WHITESPACE"," ",750],"{",["T_WHITESPACE","\n                ",750],["T_VARIABLE","$this",751],["T_OBJECT_OPERATOR","->",751],["T_STRING","setRouteParams",751],"(",["T_VARIABLE","$routeParams",751],",",["T_WHITESPACE"," ",751],["T_STRING","false",751],")",";",["T_WHITESPACE","\n            ",751],"}",["T_WHITESPACE","\n            ",752],["T_RETURN","return",753],["T_WHITESPACE"," ",753],["T_VARIABLE","$this",753],["T_OBJECT_OPERATOR","->",753],["T_STRING","getBaseUrl",753],"(",")",["T_WHITESPACE"," ",753],".",["T_WHITESPACE"," ",753],["T_VARIABLE","$routeParams",753],"[",["T_CONSTANT_ENCAPSED_STRING","'_direct'",753],"]",";",["T_WHITESPACE","\n        ",753],"}",["T_WHITESPACE","\n\n        ",754],["T_IF","if",756],["T_WHITESPACE"," ",756],"(","!",["T_STRING","is_null",756],"(",["T_VARIABLE","$routePath",756],")",")",["T_WHITESPACE"," ",756],"{",["T_WHITESPACE","\n            ",756],["T_VARIABLE","$this",757],["T_OBJECT_OPERATOR","->",757],["T_STRING","setRoutePath",757],"(",["T_VARIABLE","$routePath",757],")",";",["T_WHITESPACE","\n        ",757],"}",["T_WHITESPACE","\n        ",758],["T_IF","if",759],["T_WHITESPACE"," ",759],"(",["T_STRING","is_array",759],"(",["T_VARIABLE","$routeParams",759],")",")",["T_WHITESPACE"," ",759],"{",["T_WHITESPACE","\n            ",759],["T_VARIABLE","$this",760],["T_OBJECT_OPERATOR","->",760],["T_STRING","setRouteParams",760],"(",["T_VARIABLE","$routeParams",760],",",["T_WHITESPACE"," ",760],["T_STRING","false",760],")",";",["T_WHITESPACE","\n        ",760],"}",["T_WHITESPACE","\n\n        ",761],["T_VARIABLE","$url",763],["T_WHITESPACE"," ",763],"=",["T_WHITESPACE"," ",763],["T_VARIABLE","$this",763],["T_OBJECT_OPERATOR","->",763],["T_STRING","getBaseUrl",763],"(",")",["T_WHITESPACE"," ",763],".",["T_WHITESPACE"," ",763],["T_VARIABLE","$this",763],["T_OBJECT_OPERATOR","->",763],["T_STRING","getRoutePath",763],"(",["T_VARIABLE","$routeParams",763],")",";",["T_WHITESPACE","\n        ",763],["T_RETURN","return",764],["T_WHITESPACE"," ",764],["T_VARIABLE","$url",764],";",["T_WHITESPACE","\n    ",764],"}",["T_WHITESPACE","\n\n    ",765],["T_DOC_COMMENT","\/**\n     * If the host was switched but session cookie won't recognize it - add session id to query\n     *\n     * @return Mage_Core_Model_Url\n     *\/",767],["T_WHITESPACE","\n    ",771],["T_PUBLIC","public",772],["T_WHITESPACE"," ",772],["T_FUNCTION","function",772],["T_WHITESPACE"," ",772],["T_STRING","checkCookieDomains",772],"(",")",["T_WHITESPACE","\n    ",772],"{",["T_WHITESPACE","\n        ",773],["T_VARIABLE","$hostArr",774],["T_WHITESPACE"," ",774],"=",["T_WHITESPACE"," ",774],["T_STRING","explode",774],"(",["T_CONSTANT_ENCAPSED_STRING","':'",774],",",["T_WHITESPACE"," ",774],["T_VARIABLE","$this",774],["T_OBJECT_OPERATOR","->",774],["T_STRING","getRequest",774],"(",")",["T_OBJECT_OPERATOR","->",774],["T_STRING","getServer",774],"(",["T_CONSTANT_ENCAPSED_STRING","'HTTP_HOST'",774],")",")",";",["T_WHITESPACE","\n        ",774],["T_IF","if",775],["T_WHITESPACE"," ",775],"(",["T_VARIABLE","$hostArr",775],"[",["T_LNUMBER","0",775],"]",["T_WHITESPACE"," ",775],["T_IS_NOT_IDENTICAL","!==",775],["T_WHITESPACE"," ",775],["T_VARIABLE","$this",775],["T_OBJECT_OPERATOR","->",775],["T_STRING","getHost",775],"(",")",")",["T_WHITESPACE"," ",775],"{",["T_WHITESPACE","\n            ",775],["T_VARIABLE","$session",776],["T_WHITESPACE"," ",776],"=",["T_WHITESPACE"," ",776],["T_STRING","Mage",776],["T_DOUBLE_COLON","::",776],["T_STRING","getSingleton",776],"(",["T_CONSTANT_ENCAPSED_STRING","'core\/session'",776],")",";",["T_WHITESPACE","\n            ",776],["T_IF","if",777],["T_WHITESPACE"," ",777],"(","!",["T_VARIABLE","$session",777],["T_OBJECT_OPERATOR","->",777],["T_STRING","isValidForHost",777],"(",["T_VARIABLE","$this",777],["T_OBJECT_OPERATOR","->",777],["T_STRING","getHost",777],"(",")",")",")",["T_WHITESPACE"," ",777],"{",["T_WHITESPACE","\n                ",777],["T_IF","if",778],["T_WHITESPACE"," ",778],"(","!",["T_STRING","self",778],["T_DOUBLE_COLON","::",778],["T_VARIABLE","$_encryptedSessionId",778],")",["T_WHITESPACE"," ",778],"{",["T_WHITESPACE","\n                    ",778],["T_VARIABLE","$helper",779],["T_WHITESPACE"," ",779],"=",["T_WHITESPACE"," ",779],["T_STRING","Mage",779],["T_DOUBLE_COLON","::",779],["T_STRING","helper",779],"(",["T_CONSTANT_ENCAPSED_STRING","'core'",779],")",";",["T_WHITESPACE","\n                    ",779],["T_IF","if",780],["T_WHITESPACE"," ",780],"(","!",["T_VARIABLE","$helper",780],")",["T_WHITESPACE"," ",780],"{",["T_WHITESPACE","\n                        ",780],["T_RETURN","return",781],["T_WHITESPACE"," ",781],["T_VARIABLE","$this",781],";",["T_WHITESPACE","\n                    ",781],"}",["T_WHITESPACE","\n                    ",782],["T_STRING","self",783],["T_DOUBLE_COLON","::",783],["T_VARIABLE","$_encryptedSessionId",783],["T_WHITESPACE"," ",783],"=",["T_WHITESPACE"," ",783],["T_VARIABLE","$session",783],["T_OBJECT_OPERATOR","->",783],["T_STRING","getEncryptedSessionId",783],"(",")",";",["T_WHITESPACE","\n                ",783],"}",["T_WHITESPACE","\n                ",784],["T_VARIABLE","$this",785],["T_OBJECT_OPERATOR","->",785],["T_STRING","setQueryParam",785],"(",["T_VARIABLE","$session",785],["T_OBJECT_OPERATOR","->",785],["T_STRING","getSessionIdQueryParam",785],"(",")",",",["T_WHITESPACE"," ",785],["T_STRING","self",785],["T_DOUBLE_COLON","::",785],["T_VARIABLE","$_encryptedSessionId",785],")",";",["T_WHITESPACE","\n            ",785],"}",["T_WHITESPACE","\n        ",786],"}",["T_WHITESPACE","\n        ",787],["T_RETURN","return",788],["T_WHITESPACE"," ",788],["T_VARIABLE","$this",788],";",["T_WHITESPACE","\n    ",788],"}",["T_WHITESPACE","\n\n    ",789],["T_DOC_COMMENT","\/**\n     * Add session param\n     *\n     * @return Mage_Core_Model_Url\n     *\/",791],["T_WHITESPACE","\n    ",795],["T_PUBLIC","public",796],["T_WHITESPACE"," ",796],["T_FUNCTION","function",796],["T_WHITESPACE"," ",796],["T_STRING","addSessionParam",796],"(",")",["T_WHITESPACE","\n    ",796],"{",["T_WHITESPACE","\n        ",797],["T_VARIABLE","$session",798],["T_WHITESPACE"," ",798],"=",["T_WHITESPACE"," ",798],["T_STRING","Mage",798],["T_DOUBLE_COLON","::",798],["T_STRING","getSingleton",798],"(",["T_CONSTANT_ENCAPSED_STRING","'core\/session'",798],")",";",["T_WHITESPACE","\n\n        ",798],["T_IF","if",800],["T_WHITESPACE"," ",800],"(","!",["T_STRING","self",800],["T_DOUBLE_COLON","::",800],["T_VARIABLE","$_encryptedSessionId",800],")",["T_WHITESPACE"," ",800],"{",["T_WHITESPACE","\n            ",800],["T_VARIABLE","$helper",801],["T_WHITESPACE"," ",801],"=",["T_WHITESPACE"," ",801],["T_STRING","Mage",801],["T_DOUBLE_COLON","::",801],["T_STRING","helper",801],"(",["T_CONSTANT_ENCAPSED_STRING","'core'",801],")",";",["T_WHITESPACE","\n            ",801],["T_IF","if",802],["T_WHITESPACE"," ",802],"(","!",["T_VARIABLE","$helper",802],")",["T_WHITESPACE"," ",802],"{",["T_WHITESPACE","\n                ",802],["T_RETURN","return",803],["T_WHITESPACE"," ",803],["T_VARIABLE","$this",803],";",["T_WHITESPACE","\n            ",803],"}",["T_WHITESPACE","\n            ",804],["T_STRING","self",805],["T_DOUBLE_COLON","::",805],["T_VARIABLE","$_encryptedSessionId",805],["T_WHITESPACE"," ",805],"=",["T_WHITESPACE"," ",805],["T_VARIABLE","$session",805],["T_OBJECT_OPERATOR","->",805],["T_STRING","getEncryptedSessionId",805],"(",")",";",["T_WHITESPACE","\n        ",805],"}",["T_WHITESPACE","\n        ",806],["T_VARIABLE","$this",807],["T_OBJECT_OPERATOR","->",807],["T_STRING","setQueryParam",807],"(",["T_VARIABLE","$session",807],["T_OBJECT_OPERATOR","->",807],["T_STRING","getSessionIdQueryParam",807],"(",")",",",["T_WHITESPACE"," ",807],["T_STRING","self",807],["T_DOUBLE_COLON","::",807],["T_VARIABLE","$_encryptedSessionId",807],")",";",["T_WHITESPACE","\n        ",807],["T_RETURN","return",808],["T_WHITESPACE"," ",808],["T_VARIABLE","$this",808],";",["T_WHITESPACE","\n    ",808],"}",["T_WHITESPACE","\n\n    ",809],["T_DOC_COMMENT","\/**\n     * Set URL query param(s)\n     *\n     * @param mixed $data\n     * @return Mage_Core_Model_Url\n     *\/",811],["T_WHITESPACE","\n    ",816],["T_PUBLIC","public",817],["T_WHITESPACE"," ",817],["T_FUNCTION","function",817],["T_WHITESPACE"," ",817],["T_STRING","setQuery",817],"(",["T_VARIABLE","$data",817],")",["T_WHITESPACE","\n    ",817],"{",["T_WHITESPACE","\n        ",818],["T_IF","if",819],["T_WHITESPACE"," ",819],"(",["T_VARIABLE","$this",819],["T_OBJECT_OPERATOR","->",819],["T_STRING","_getData",819],"(",["T_CONSTANT_ENCAPSED_STRING","'query'",819],")",["T_WHITESPACE"," ",819],["T_IS_EQUAL","==",819],["T_WHITESPACE"," ",819],["T_VARIABLE","$data",819],")",["T_WHITESPACE"," ",819],"{",["T_WHITESPACE","\n            ",819],["T_RETURN","return",820],["T_WHITESPACE"," ",820],["T_VARIABLE","$this",820],";",["T_WHITESPACE","\n        ",820],"}",["T_WHITESPACE","\n        ",821],["T_VARIABLE","$this",822],["T_OBJECT_OPERATOR","->",822],["T_STRING","unsetData",822],"(",["T_CONSTANT_ENCAPSED_STRING","'query_params'",822],")",";",["T_WHITESPACE","\n        ",822],["T_RETURN","return",823],["T_WHITESPACE"," ",823],["T_VARIABLE","$this",823],["T_OBJECT_OPERATOR","->",823],["T_STRING","setData",823],"(",["T_CONSTANT_ENCAPSED_STRING","'query'",823],",",["T_WHITESPACE"," ",823],["T_VARIABLE","$data",823],")",";",["T_WHITESPACE","\n    ",823],"}",["T_WHITESPACE","\n\n    ",824],["T_DOC_COMMENT","\/**\n     * Get query params part of url\n     *\n     * @param bool $escape \"&\" escape flag\n     * @return string\n     *\/",826],["T_WHITESPACE","\n    ",831],["T_PUBLIC","public",832],["T_WHITESPACE"," ",832],["T_FUNCTION","function",832],["T_WHITESPACE"," ",832],["T_STRING","getQuery",832],"(",["T_VARIABLE","$escape",832],["T_WHITESPACE"," ",832],"=",["T_WHITESPACE"," ",832],["T_STRING","false",832],")",["T_WHITESPACE","\n    ",832],"{",["T_WHITESPACE","\n        ",833],["T_IF","if",834],["T_WHITESPACE"," ",834],"(","!",["T_VARIABLE","$this",834],["T_OBJECT_OPERATOR","->",834],["T_STRING","hasData",834],"(",["T_CONSTANT_ENCAPSED_STRING","'query'",834],")",")",["T_WHITESPACE"," ",834],"{",["T_WHITESPACE","\n            ",834],["T_VARIABLE","$query",835],["T_WHITESPACE"," ",835],"=",["T_WHITESPACE"," ",835],["T_CONSTANT_ENCAPSED_STRING","''",835],";",["T_WHITESPACE","\n            ",835],["T_VARIABLE","$params",836],["T_WHITESPACE"," ",836],"=",["T_WHITESPACE"," ",836],["T_VARIABLE","$this",836],["T_OBJECT_OPERATOR","->",836],["T_STRING","getQueryParams",836],"(",")",";",["T_WHITESPACE","\n            ",836],["T_IF","if",837],["T_WHITESPACE"," ",837],"(",["T_STRING","is_array",837],"(",["T_VARIABLE","$params",837],")",")",["T_WHITESPACE"," ",837],"{",["T_WHITESPACE","\n                ",837],["T_STRING","ksort",838],"(",["T_VARIABLE","$params",838],")",";",["T_WHITESPACE","\n                ",838],["T_VARIABLE","$query",839],["T_WHITESPACE"," ",839],"=",["T_WHITESPACE"," ",839],["T_STRING","http_build_query",839],"(",["T_VARIABLE","$params",839],",",["T_WHITESPACE"," ",839],["T_CONSTANT_ENCAPSED_STRING","''",839],",",["T_WHITESPACE"," ",839],["T_VARIABLE","$escape",839],["T_WHITESPACE"," ",839],"?",["T_WHITESPACE"," ",839],["T_CONSTANT_ENCAPSED_STRING","'&amp;'",839],["T_WHITESPACE"," ",839],":",["T_WHITESPACE"," ",839],["T_CONSTANT_ENCAPSED_STRING","'&'",839],")",";",["T_WHITESPACE","\n            ",839],"}",["T_WHITESPACE","\n            ",840],["T_VARIABLE","$this",841],["T_OBJECT_OPERATOR","->",841],["T_STRING","setData",841],"(",["T_CONSTANT_ENCAPSED_STRING","'query'",841],",",["T_WHITESPACE"," ",841],["T_VARIABLE","$query",841],")",";",["T_WHITESPACE","\n        ",841],"}",["T_WHITESPACE","\n        ",842],["T_RETURN","return",843],["T_WHITESPACE"," ",843],["T_VARIABLE","$this",843],["T_OBJECT_OPERATOR","->",843],["T_STRING","_getData",843],"(",["T_CONSTANT_ENCAPSED_STRING","'query'",843],")",";",["T_WHITESPACE","\n    ",843],"}",["T_WHITESPACE","\n\n    ",844],["T_DOC_COMMENT","\/**\n     * Set query Params as array\n     *\n     * @param array $data\n     * @return Mage_Core_Model_Url\n     *\/",846],["T_WHITESPACE","\n    ",851],["T_PUBLIC","public",852],["T_WHITESPACE"," ",852],["T_FUNCTION","function",852],["T_WHITESPACE"," ",852],["T_STRING","setQueryParams",852],"(",["T_ARRAY","array",852],["T_WHITESPACE"," ",852],["T_VARIABLE","$data",852],")",["T_WHITESPACE","\n    ",852],"{",["T_WHITESPACE","\n        ",853],["T_VARIABLE","$this",854],["T_OBJECT_OPERATOR","->",854],["T_STRING","unsetData",854],"(",["T_CONSTANT_ENCAPSED_STRING","'query'",854],")",";",["T_WHITESPACE","\n\n        ",854],["T_IF","if",856],["T_WHITESPACE"," ",856],"(",["T_VARIABLE","$this",856],["T_OBJECT_OPERATOR","->",856],["T_STRING","_getData",856],"(",["T_CONSTANT_ENCAPSED_STRING","'query_params'",856],")",["T_WHITESPACE"," ",856],["T_IS_EQUAL","==",856],["T_WHITESPACE"," ",856],["T_VARIABLE","$data",856],")",["T_WHITESPACE"," ",856],"{",["T_WHITESPACE","\n            ",856],["T_RETURN","return",857],["T_WHITESPACE"," ",857],["T_VARIABLE","$this",857],";",["T_WHITESPACE","\n        ",857],"}",["T_WHITESPACE","\n\n        ",858],["T_VARIABLE","$params",860],["T_WHITESPACE"," ",860],"=",["T_WHITESPACE"," ",860],["T_VARIABLE","$this",860],["T_OBJECT_OPERATOR","->",860],["T_STRING","_getData",860],"(",["T_CONSTANT_ENCAPSED_STRING","'query_params'",860],")",";",["T_WHITESPACE","\n        ",860],["T_IF","if",861],["T_WHITESPACE"," ",861],"(","!",["T_STRING","is_array",861],"(",["T_VARIABLE","$params",861],")",")",["T_WHITESPACE"," ",861],"{",["T_WHITESPACE","\n            ",861],["T_VARIABLE","$params",862],["T_WHITESPACE"," ",862],"=",["T_WHITESPACE"," ",862],["T_ARRAY","array",862],"(",")",";",["T_WHITESPACE","\n        ",862],"}",["T_WHITESPACE","\n        ",863],["T_FOREACH","foreach",864],["T_WHITESPACE"," ",864],"(",["T_VARIABLE","$data",864],["T_WHITESPACE"," ",864],["T_AS","as",864],["T_WHITESPACE"," ",864],["T_VARIABLE","$param",864],["T_WHITESPACE"," ",864],["T_DOUBLE_ARROW","=>",864],["T_WHITESPACE"," ",864],["T_VARIABLE","$value",864],")",["T_WHITESPACE"," ",864],"{",["T_WHITESPACE","\n            ",864],["T_VARIABLE","$params",865],"[",["T_VARIABLE","$param",865],"]",["T_WHITESPACE"," ",865],"=",["T_WHITESPACE"," ",865],["T_VARIABLE","$value",865],";",["T_WHITESPACE","\n        ",865],"}",["T_WHITESPACE","\n        ",866],["T_VARIABLE","$this",867],["T_OBJECT_OPERATOR","->",867],["T_STRING","setData",867],"(",["T_CONSTANT_ENCAPSED_STRING","'query_params'",867],",",["T_WHITESPACE"," ",867],["T_VARIABLE","$params",867],")",";",["T_WHITESPACE","\n\n        ",867],["T_RETURN","return",869],["T_WHITESPACE"," ",869],["T_VARIABLE","$this",869],";",["T_WHITESPACE","\n    ",869],"}",["T_WHITESPACE","\n\n    ",870],["T_DOC_COMMENT","\/**\n     * Purge Query params array\n     *\n     * @return Mage_Core_Model_Url\n     *\/",872],["T_WHITESPACE","\n    ",876],["T_PUBLIC","public",877],["T_WHITESPACE"," ",877],["T_FUNCTION","function",877],["T_WHITESPACE"," ",877],["T_STRING","purgeQueryParams",877],"(",")",["T_WHITESPACE","\n    ",877],"{",["T_WHITESPACE","\n        ",878],["T_VARIABLE","$this",879],["T_OBJECT_OPERATOR","->",879],["T_STRING","setData",879],"(",["T_CONSTANT_ENCAPSED_STRING","'query_params'",879],",",["T_WHITESPACE"," ",879],["T_ARRAY","array",879],"(",")",")",";",["T_WHITESPACE","\n        ",879],["T_RETURN","return",880],["T_WHITESPACE"," ",880],["T_VARIABLE","$this",880],";",["T_WHITESPACE","\n    ",880],"}",["T_WHITESPACE","\n\n    ",881],["T_DOC_COMMENT","\/**\n     * Return Query Params\n     *\n     * @return array\n     *\/",883],["T_WHITESPACE","\n    ",887],["T_PUBLIC","public",888],["T_WHITESPACE"," ",888],["T_FUNCTION","function",888],["T_WHITESPACE"," ",888],["T_STRING","getQueryParams",888],"(",")",["T_WHITESPACE","\n    ",888],"{",["T_WHITESPACE","\n        ",889],["T_IF","if",890],["T_WHITESPACE"," ",890],"(","!",["T_VARIABLE","$this",890],["T_OBJECT_OPERATOR","->",890],["T_STRING","hasData",890],"(",["T_CONSTANT_ENCAPSED_STRING","'query_params'",890],")",")",["T_WHITESPACE"," ",890],"{",["T_WHITESPACE","\n            ",890],["T_VARIABLE","$params",891],["T_WHITESPACE"," ",891],"=",["T_WHITESPACE"," ",891],["T_ARRAY","array",891],"(",")",";",["T_WHITESPACE","\n            ",891],["T_IF","if",892],["T_WHITESPACE"," ",892],"(",["T_VARIABLE","$this",892],["T_OBJECT_OPERATOR","->",892],["T_STRING","_getData",892],"(",["T_CONSTANT_ENCAPSED_STRING","'query'",892],")",")",["T_WHITESPACE"," ",892],"{",["T_WHITESPACE","\n                ",892],["T_FOREACH","foreach",893],["T_WHITESPACE"," ",893],"(",["T_STRING","explode",893],"(",["T_CONSTANT_ENCAPSED_STRING","'&'",893],",",["T_WHITESPACE"," ",893],["T_VARIABLE","$this",893],["T_OBJECT_OPERATOR","->",893],["T_STRING","_getData",893],"(",["T_CONSTANT_ENCAPSED_STRING","'query'",893],")",")",["T_WHITESPACE"," ",893],["T_AS","as",893],["T_WHITESPACE"," ",893],["T_VARIABLE","$param",893],")",["T_WHITESPACE"," ",893],"{",["T_WHITESPACE","\n                    ",893],["T_VARIABLE","$paramArr",894],["T_WHITESPACE"," ",894],"=",["T_WHITESPACE"," ",894],["T_STRING","explode",894],"(",["T_CONSTANT_ENCAPSED_STRING","'='",894],",",["T_WHITESPACE"," ",894],["T_VARIABLE","$param",894],")",";",["T_WHITESPACE","\n                    ",894],["T_VARIABLE","$params",895],"[",["T_VARIABLE","$paramArr",895],"[",["T_LNUMBER","0",895],"]","]",["T_WHITESPACE"," ",895],"=",["T_WHITESPACE"," ",895],["T_STRING","urldecode",895],"(",["T_VARIABLE","$paramArr",895],"[",["T_LNUMBER","1",895],"]",")",";",["T_WHITESPACE","\n                ",895],"}",["T_WHITESPACE","\n            ",896],"}",["T_WHITESPACE","\n            ",897],["T_VARIABLE","$this",898],["T_OBJECT_OPERATOR","->",898],["T_STRING","setData",898],"(",["T_CONSTANT_ENCAPSED_STRING","'query_params'",898],",",["T_WHITESPACE"," ",898],["T_VARIABLE","$params",898],")",";",["T_WHITESPACE","\n        ",898],"}",["T_WHITESPACE","\n        ",899],["T_RETURN","return",900],["T_WHITESPACE"," ",900],["T_VARIABLE","$this",900],["T_OBJECT_OPERATOR","->",900],["T_STRING","_getData",900],"(",["T_CONSTANT_ENCAPSED_STRING","'query_params'",900],")",";",["T_WHITESPACE","\n    ",900],"}",["T_WHITESPACE","\n\n    ",901],["T_DOC_COMMENT","\/**\n     * Set query param\n     *\n     * @param string $key\n     * @param mixed $data\n     * @return Mage_Core_Model_Url\n     *\/",903],["T_WHITESPACE","\n    ",909],["T_PUBLIC","public",910],["T_WHITESPACE"," ",910],["T_FUNCTION","function",910],["T_WHITESPACE"," ",910],["T_STRING","setQueryParam",910],"(",["T_VARIABLE","$key",910],",",["T_WHITESPACE"," ",910],["T_VARIABLE","$data",910],")",["T_WHITESPACE","\n    ",910],"{",["T_WHITESPACE","\n        ",911],["T_VARIABLE","$params",912],["T_WHITESPACE"," ",912],"=",["T_WHITESPACE"," ",912],["T_VARIABLE","$this",912],["T_OBJECT_OPERATOR","->",912],["T_STRING","getQueryParams",912],"(",")",";",["T_WHITESPACE","\n        ",912],["T_IF","if",913],["T_WHITESPACE"," ",913],"(",["T_ISSET","isset",913],"(",["T_VARIABLE","$params",913],"[",["T_VARIABLE","$key",913],"]",")",["T_WHITESPACE"," ",913],["T_BOOLEAN_AND","&&",913],["T_WHITESPACE"," ",913],["T_VARIABLE","$params",913],"[",["T_VARIABLE","$key",913],"]",["T_WHITESPACE"," ",913],["T_IS_EQUAL","==",913],["T_WHITESPACE"," ",913],["T_VARIABLE","$data",913],")",["T_WHITESPACE"," ",913],"{",["T_WHITESPACE","\n            ",913],["T_RETURN","return",914],["T_WHITESPACE"," ",914],["T_VARIABLE","$this",914],";",["T_WHITESPACE","\n        ",914],"}",["T_WHITESPACE","\n        ",915],["T_VARIABLE","$params",916],"[",["T_VARIABLE","$key",916],"]",["T_WHITESPACE"," ",916],"=",["T_WHITESPACE"," ",916],["T_VARIABLE","$data",916],";",["T_WHITESPACE","\n        ",916],["T_VARIABLE","$this",917],["T_OBJECT_OPERATOR","->",917],["T_STRING","unsetData",917],"(",["T_CONSTANT_ENCAPSED_STRING","'query'",917],")",";",["T_WHITESPACE","\n        ",917],["T_RETURN","return",918],["T_WHITESPACE"," ",918],["T_VARIABLE","$this",918],["T_OBJECT_OPERATOR","->",918],["T_STRING","setData",918],"(",["T_CONSTANT_ENCAPSED_STRING","'query_params'",918],",",["T_WHITESPACE"," ",918],["T_VARIABLE","$params",918],")",";",["T_WHITESPACE","\n    ",918],"}",["T_WHITESPACE","\n\n    ",919],["T_DOC_COMMENT","\/**\n     * Retrieve query param\n     *\n     * @param string $key\n     * @return mixed\n     *\/",921],["T_WHITESPACE","\n    ",926],["T_PUBLIC","public",927],["T_WHITESPACE"," ",927],["T_FUNCTION","function",927],["T_WHITESPACE"," ",927],["T_STRING","getQueryParam",927],"(",["T_VARIABLE","$key",927],")",["T_WHITESPACE","\n    ",927],"{",["T_WHITESPACE","\n        ",928],["T_IF","if",929],["T_WHITESPACE"," ",929],"(","!",["T_VARIABLE","$this",929],["T_OBJECT_OPERATOR","->",929],["T_STRING","hasData",929],"(",["T_CONSTANT_ENCAPSED_STRING","'query_params'",929],")",")",["T_WHITESPACE"," ",929],"{",["T_WHITESPACE","\n            ",929],["T_VARIABLE","$this",930],["T_OBJECT_OPERATOR","->",930],["T_STRING","getQueryParams",930],"(",")",";",["T_WHITESPACE","\n        ",930],"}",["T_WHITESPACE","\n        ",931],["T_RETURN","return",932],["T_WHITESPACE"," ",932],["T_VARIABLE","$this",932],["T_OBJECT_OPERATOR","->",932],["T_STRING","getData",932],"(",["T_CONSTANT_ENCAPSED_STRING","'query_params'",932],",",["T_WHITESPACE"," ",932],["T_VARIABLE","$key",932],")",";",["T_WHITESPACE","\n    ",932],"}",["T_WHITESPACE","\n\n    ",933],["T_DOC_COMMENT","\/**\n     * Set fragment to URL\n     *\n     * @param string $data\n     * @return Mage_Core_Model_Url\n     *\/",935],["T_WHITESPACE","\n    ",940],["T_PUBLIC","public",941],["T_WHITESPACE"," ",941],["T_FUNCTION","function",941],["T_WHITESPACE"," ",941],["T_STRING","setFragment",941],"(",["T_VARIABLE","$data",941],")",["T_WHITESPACE","\n    ",941],"{",["T_WHITESPACE","\n        ",942],["T_RETURN","return",943],["T_WHITESPACE"," ",943],["T_VARIABLE","$this",943],["T_OBJECT_OPERATOR","->",943],["T_STRING","setData",943],"(",["T_CONSTANT_ENCAPSED_STRING","'fragment'",943],",",["T_WHITESPACE"," ",943],["T_VARIABLE","$data",943],")",";",["T_WHITESPACE","\n    ",943],"}",["T_WHITESPACE","\n\n    ",944],["T_DOC_COMMENT","\/**\n     * Retrieve URL fragment\n     *\n     * @return string|null\n     *\/",946],["T_WHITESPACE","\n    ",950],["T_PUBLIC","public",951],["T_WHITESPACE"," ",951],["T_FUNCTION","function",951],["T_WHITESPACE"," ",951],["T_STRING","getFragment",951],"(",")",["T_WHITESPACE","\n    ",951],"{",["T_WHITESPACE","\n        ",952],["T_RETURN","return",953],["T_WHITESPACE"," ",953],["T_VARIABLE","$this",953],["T_OBJECT_OPERATOR","->",953],["T_STRING","_getData",953],"(",["T_CONSTANT_ENCAPSED_STRING","'fragment'",953],")",";",["T_WHITESPACE","\n    ",953],"}",["T_WHITESPACE","\n\n    ",954],["T_DOC_COMMENT","\/**\n     * Build url by requested path and parameters\n     *\n     * @param string|null $routePath\n     * @param array|null $routeParams\n     * @return  string\n     *\/",956],["T_WHITESPACE","\n    ",962],["T_PUBLIC","public",963],["T_WHITESPACE"," ",963],["T_FUNCTION","function",963],["T_WHITESPACE"," ",963],["T_STRING","getUrl",963],"(",["T_VARIABLE","$routePath",963],["T_WHITESPACE"," ",963],"=",["T_WHITESPACE"," ",963],["T_STRING","null",963],",",["T_WHITESPACE"," ",963],["T_VARIABLE","$routeParams",963],["T_WHITESPACE"," ",963],"=",["T_WHITESPACE"," ",963],["T_STRING","null",963],")",["T_WHITESPACE","\n    ",963],"{",["T_WHITESPACE","\n        ",964],["T_VARIABLE","$escapeQuery",965],["T_WHITESPACE"," ",965],"=",["T_WHITESPACE"," ",965],["T_STRING","false",965],";",["T_WHITESPACE","\n\n        ",965],["T_DOC_COMMENT","\/**\n         * All system params should be unset before we call getRouteUrl\n         * this method has condition for adding default controller and action names\n         * in case when we have params\n         *\/",967],["T_WHITESPACE","\n        ",971],["T_IF","if",972],["T_WHITESPACE"," ",972],"(",["T_ISSET","isset",972],"(",["T_VARIABLE","$routeParams",972],"[",["T_CONSTANT_ENCAPSED_STRING","'_fragment'",972],"]",")",")",["T_WHITESPACE"," ",972],"{",["T_WHITESPACE","\n            ",972],["T_VARIABLE","$this",973],["T_OBJECT_OPERATOR","->",973],["T_STRING","setFragment",973],"(",["T_VARIABLE","$routeParams",973],"[",["T_CONSTANT_ENCAPSED_STRING","'_fragment'",973],"]",")",";",["T_WHITESPACE","\n            ",973],["T_UNSET","unset",974],"(",["T_VARIABLE","$routeParams",974],"[",["T_CONSTANT_ENCAPSED_STRING","'_fragment'",974],"]",")",";",["T_WHITESPACE","\n        ",974],"}",["T_WHITESPACE","\n\n        ",975],["T_IF","if",977],["T_WHITESPACE"," ",977],"(",["T_ISSET","isset",977],"(",["T_VARIABLE","$routeParams",977],"[",["T_CONSTANT_ENCAPSED_STRING","'_escape'",977],"]",")",")",["T_WHITESPACE"," ",977],"{",["T_WHITESPACE","\n            ",977],["T_VARIABLE","$escapeQuery",978],["T_WHITESPACE"," ",978],"=",["T_WHITESPACE"," ",978],["T_VARIABLE","$routeParams",978],"[",["T_CONSTANT_ENCAPSED_STRING","'_escape'",978],"]",";",["T_WHITESPACE","\n            ",978],["T_UNSET","unset",979],"(",["T_VARIABLE","$routeParams",979],"[",["T_CONSTANT_ENCAPSED_STRING","'_escape'",979],"]",")",";",["T_WHITESPACE","\n        ",979],"}",["T_WHITESPACE","\n\n        ",980],["T_VARIABLE","$query",982],["T_WHITESPACE"," ",982],"=",["T_WHITESPACE"," ",982],["T_STRING","null",982],";",["T_WHITESPACE","\n        ",982],["T_IF","if",983],["T_WHITESPACE"," ",983],"(",["T_ISSET","isset",983],"(",["T_VARIABLE","$routeParams",983],"[",["T_CONSTANT_ENCAPSED_STRING","'_query'",983],"]",")",")",["T_WHITESPACE"," ",983],"{",["T_WHITESPACE","\n            ",983],["T_VARIABLE","$this",984],["T_OBJECT_OPERATOR","->",984],["T_STRING","purgeQueryParams",984],"(",")",";",["T_WHITESPACE","\n            ",984],["T_VARIABLE","$query",985],["T_WHITESPACE"," ",985],"=",["T_WHITESPACE"," ",985],["T_VARIABLE","$routeParams",985],"[",["T_CONSTANT_ENCAPSED_STRING","'_query'",985],"]",";",["T_WHITESPACE","\n            ",985],["T_UNSET","unset",986],"(",["T_VARIABLE","$routeParams",986],"[",["T_CONSTANT_ENCAPSED_STRING","'_query'",986],"]",")",";",["T_WHITESPACE","\n        ",986],"}",["T_WHITESPACE","\n\n        ",987],["T_VARIABLE","$noSid",989],["T_WHITESPACE"," ",989],"=",["T_WHITESPACE"," ",989],["T_STRING","null",989],";",["T_WHITESPACE","\n        ",989],["T_IF","if",990],["T_WHITESPACE"," ",990],"(",["T_ISSET","isset",990],"(",["T_VARIABLE","$routeParams",990],"[",["T_CONSTANT_ENCAPSED_STRING","'_nosid'",990],"]",")",")",["T_WHITESPACE"," ",990],"{",["T_WHITESPACE","\n            ",990],["T_VARIABLE","$noSid",991],["T_WHITESPACE"," ",991],"=",["T_WHITESPACE"," ",991],["T_BOOL_CAST","(bool)",991],["T_VARIABLE","$routeParams",991],"[",["T_CONSTANT_ENCAPSED_STRING","'_nosid'",991],"]",";",["T_WHITESPACE","\n            ",991],["T_UNSET","unset",992],"(",["T_VARIABLE","$routeParams",992],"[",["T_CONSTANT_ENCAPSED_STRING","'_nosid'",992],"]",")",";",["T_WHITESPACE","\n        ",992],"}",["T_WHITESPACE","\n\n        ",993],["T_VARIABLE","$url",995],["T_WHITESPACE"," ",995],"=",["T_WHITESPACE"," ",995],["T_VARIABLE","$this",995],["T_OBJECT_OPERATOR","->",995],["T_STRING","getRouteUrl",995],"(",["T_VARIABLE","$routePath",995],",",["T_WHITESPACE"," ",995],["T_VARIABLE","$routeParams",995],")",";",["T_WHITESPACE","\n        ",995],["T_DOC_COMMENT","\/**\n         * Apply query params, need call after getRouteUrl for rewrite _current values\n         *\/",996],["T_WHITESPACE","\n        ",998],["T_IF","if",999],["T_WHITESPACE"," ",999],"(",["T_VARIABLE","$query",999],["T_WHITESPACE"," ",999],["T_IS_NOT_IDENTICAL","!==",999],["T_WHITESPACE"," ",999],["T_STRING","null",999],")",["T_WHITESPACE"," ",999],"{",["T_WHITESPACE","\n            ",999],["T_IF","if",1000],["T_WHITESPACE"," ",1000],"(",["T_STRING","is_string",1000],"(",["T_VARIABLE","$query",1000],")",")",["T_WHITESPACE"," ",1000],"{",["T_WHITESPACE","\n                ",1000],["T_VARIABLE","$this",1001],["T_OBJECT_OPERATOR","->",1001],["T_STRING","setQuery",1001],"(",["T_VARIABLE","$query",1001],")",";",["T_WHITESPACE","\n            ",1001],"}",["T_WHITESPACE"," ",1002],["T_ELSEIF","elseif",1002],["T_WHITESPACE"," ",1002],"(",["T_STRING","is_array",1002],"(",["T_VARIABLE","$query",1002],")",")",["T_WHITESPACE"," ",1002],"{",["T_WHITESPACE","\n                ",1002],["T_VARIABLE","$this",1003],["T_OBJECT_OPERATOR","->",1003],["T_STRING","setQueryParams",1003],"(",["T_VARIABLE","$query",1003],",",["T_WHITESPACE"," ",1003],"!",["T_EMPTY","empty",1003],"(",["T_VARIABLE","$routeParams",1003],"[",["T_CONSTANT_ENCAPSED_STRING","'_current'",1003],"]",")",")",";",["T_WHITESPACE","\n            ",1003],"}",["T_WHITESPACE","\n            ",1004],["T_IF","if",1005],["T_WHITESPACE"," ",1005],"(",["T_VARIABLE","$query",1005],["T_WHITESPACE"," ",1005],["T_IS_IDENTICAL","===",1005],["T_WHITESPACE"," ",1005],["T_STRING","false",1005],")",["T_WHITESPACE"," ",1005],"{",["T_WHITESPACE","\n                ",1005],["T_VARIABLE","$this",1006],["T_OBJECT_OPERATOR","->",1006],["T_STRING","setQueryParams",1006],"(",["T_ARRAY","array",1006],"(",")",")",";",["T_WHITESPACE","\n            ",1006],"}",["T_WHITESPACE","\n        ",1007],"}",["T_WHITESPACE","\n\n        ",1008],["T_IF","if",1010],["T_WHITESPACE"," ",1010],"(",["T_VARIABLE","$noSid",1010],["T_WHITESPACE"," ",1010],["T_IS_NOT_IDENTICAL","!==",1010],["T_WHITESPACE"," ",1010],["T_STRING","true",1010],")",["T_WHITESPACE"," ",1010],"{",["T_WHITESPACE","\n            ",1010],["T_VARIABLE","$this",1011],["T_OBJECT_OPERATOR","->",1011],["T_STRING","_prepareSessionUrl",1011],"(",["T_VARIABLE","$url",1011],")",";",["T_WHITESPACE","\n        ",1011],"}",["T_WHITESPACE","\n\n        ",1012],["T_VARIABLE","$query",1014],["T_WHITESPACE"," ",1014],"=",["T_WHITESPACE"," ",1014],["T_VARIABLE","$this",1014],["T_OBJECT_OPERATOR","->",1014],["T_STRING","getQuery",1014],"(",["T_VARIABLE","$escapeQuery",1014],")",";",["T_WHITESPACE","\n        ",1014],["T_IF","if",1015],["T_WHITESPACE"," ",1015],"(",["T_VARIABLE","$query",1015],")",["T_WHITESPACE"," ",1015],"{",["T_WHITESPACE","\n            ",1015],["T_VARIABLE","$mark",1016],["T_WHITESPACE"," ",1016],"=",["T_WHITESPACE"," ",1016],"(",["T_STRING","strpos",1016],"(",["T_VARIABLE","$url",1016],",",["T_WHITESPACE"," ",1016],["T_CONSTANT_ENCAPSED_STRING","'?'",1016],")",["T_WHITESPACE"," ",1016],["T_IS_IDENTICAL","===",1016],["T_WHITESPACE"," ",1016],["T_STRING","false",1016],")",["T_WHITESPACE"," ",1016],"?",["T_WHITESPACE"," ",1016],["T_CONSTANT_ENCAPSED_STRING","'?'",1016],["T_WHITESPACE"," ",1016],":",["T_WHITESPACE"," ",1016],"(",["T_VARIABLE","$escapeQuery",1016],["T_WHITESPACE"," ",1016],"?",["T_WHITESPACE"," ",1016],["T_CONSTANT_ENCAPSED_STRING","'&amp;'",1016],["T_WHITESPACE"," ",1016],":",["T_WHITESPACE"," ",1016],["T_CONSTANT_ENCAPSED_STRING","'&'",1016],")",";",["T_WHITESPACE","\n            ",1016],["T_VARIABLE","$url",1017],["T_WHITESPACE"," ",1017],["T_CONCAT_EQUAL",".=",1017],["T_WHITESPACE"," ",1017],["T_VARIABLE","$mark",1017],["T_WHITESPACE"," ",1017],".",["T_WHITESPACE"," ",1017],["T_VARIABLE","$query",1017],";",["T_WHITESPACE","\n        ",1017],"}",["T_WHITESPACE","\n\n        ",1018],["T_IF","if",1020],["T_WHITESPACE"," ",1020],"(",["T_VARIABLE","$this",1020],["T_OBJECT_OPERATOR","->",1020],["T_STRING","getFragment",1020],"(",")",")",["T_WHITESPACE"," ",1020],"{",["T_WHITESPACE","\n            ",1020],["T_VARIABLE","$url",1021],["T_WHITESPACE"," ",1021],["T_CONCAT_EQUAL",".=",1021],["T_WHITESPACE"," ",1021],["T_CONSTANT_ENCAPSED_STRING","'#'",1021],["T_WHITESPACE"," ",1021],".",["T_WHITESPACE"," ",1021],["T_VARIABLE","$this",1021],["T_OBJECT_OPERATOR","->",1021],["T_STRING","getFragment",1021],"(",")",";",["T_WHITESPACE","\n        ",1021],"}",["T_WHITESPACE","\n\n        ",1022],["T_RETURN","return",1024],["T_WHITESPACE"," ",1024],["T_VARIABLE","$this",1024],["T_OBJECT_OPERATOR","->",1024],["T_STRING","escape",1024],"(",["T_VARIABLE","$url",1024],")",";",["T_WHITESPACE","\n    ",1024],"}",["T_WHITESPACE","\n\n    ",1025],["T_DOC_COMMENT","\/**\n     * Return singleton model instance\n     *\n     * @param string $name\n     * @param array $arguments\n     * @return Mage_Core_Model_Abstract\n     *\/",1027],["T_WHITESPACE","\n    ",1033],["T_PROTECTED","protected",1034],["T_WHITESPACE"," ",1034],["T_FUNCTION","function",1034],["T_WHITESPACE"," ",1034],["T_STRING","_getSingletonModel",1034],"(",["T_VARIABLE","$name",1034],",",["T_WHITESPACE"," ",1034],["T_VARIABLE","$arguments",1034],["T_WHITESPACE"," ",1034],"=",["T_WHITESPACE"," ",1034],["T_ARRAY","array",1034],"(",")",")",["T_WHITESPACE","\n    ",1034],"{",["T_WHITESPACE","\n        ",1035],["T_RETURN","return",1036],["T_WHITESPACE"," ",1036],["T_STRING","Mage",1036],["T_DOUBLE_COLON","::",1036],["T_STRING","getSingleton",1036],"(",["T_VARIABLE","$name",1036],",",["T_WHITESPACE"," ",1036],["T_VARIABLE","$arguments",1036],")",";",["T_WHITESPACE","\n    ",1036],"}",["T_WHITESPACE","\n\n    ",1037],["T_DOC_COMMENT","\/**\n     * Check and add session id to URL\n     *\n     * @param string $url\n     *\n     * @return Mage_Core_Model_Url\n     *\/",1039],["T_WHITESPACE","\n    ",1045],["T_PROTECTED","protected",1046],["T_WHITESPACE"," ",1046],["T_FUNCTION","function",1046],["T_WHITESPACE"," ",1046],["T_STRING","_prepareSessionUrl",1046],"(",["T_VARIABLE","$url",1046],")",["T_WHITESPACE","\n    ",1046],"{",["T_WHITESPACE","\n        ",1047],["T_RETURN","return",1048],["T_WHITESPACE"," ",1048],["T_VARIABLE","$this",1048],["T_OBJECT_OPERATOR","->",1048],["T_STRING","_prepareSessionUrlWithParams",1048],"(",["T_VARIABLE","$url",1048],",",["T_WHITESPACE"," ",1048],["T_ARRAY","array",1048],"(",")",")",";",["T_WHITESPACE","\n    ",1048],"}",["T_WHITESPACE","\n\n    ",1049],["T_DOC_COMMENT","\/**\n     * Check and add session id to URL, session is obtained with parameters\n     *\n     * @param string $url\n     * @param array $params\n     *\n     * @return Mage_Core_Model_Url\n     *\/",1051],["T_WHITESPACE","\n    ",1058],["T_PROTECTED","protected",1059],["T_WHITESPACE"," ",1059],["T_FUNCTION","function",1059],["T_WHITESPACE"," ",1059],["T_STRING","_prepareSessionUrlWithParams",1059],"(",["T_VARIABLE","$url",1059],",",["T_WHITESPACE"," ",1059],["T_ARRAY","array",1059],["T_WHITESPACE"," ",1059],["T_VARIABLE","$params",1059],")",["T_WHITESPACE","\n    ",1059],"{",["T_WHITESPACE","\n        ",1060],["T_IF","if",1061],["T_WHITESPACE"," ",1061],"(","!",["T_VARIABLE","$this",1061],["T_OBJECT_OPERATOR","->",1061],["T_STRING","getUseSession",1061],"(",")",")",["T_WHITESPACE"," ",1061],"{",["T_WHITESPACE","\n            ",1061],["T_RETURN","return",1062],["T_WHITESPACE"," ",1062],["T_VARIABLE","$this",1062],";",["T_WHITESPACE","\n        ",1062],"}",["T_WHITESPACE","\n\n        ",1063],["T_DOC_COMMENT","\/** @var $session Mage_Core_Model_Session *\/",1065],["T_WHITESPACE","\n        ",1065],["T_VARIABLE","$session",1066],["T_WHITESPACE"," ",1066],"=",["T_WHITESPACE"," ",1066],["T_STRING","Mage",1066],["T_DOUBLE_COLON","::",1066],["T_STRING","getSingleton",1066],"(",["T_CONSTANT_ENCAPSED_STRING","'core\/session'",1066],",",["T_WHITESPACE"," ",1066],["T_VARIABLE","$params",1066],")",";",["T_WHITESPACE","\n\n        ",1066],["T_VARIABLE","$sessionId",1068],["T_WHITESPACE"," ",1068],"=",["T_WHITESPACE"," ",1068],["T_VARIABLE","$session",1068],["T_OBJECT_OPERATOR","->",1068],["T_STRING","getSessionIdForHost",1068],"(",["T_VARIABLE","$url",1068],")",";",["T_WHITESPACE","\n        ",1068],["T_IF","if",1069],["T_WHITESPACE"," ",1069],"(",["T_STRING","Mage",1069],["T_DOUBLE_COLON","::",1069],["T_STRING","app",1069],"(",")",["T_OBJECT_OPERATOR","->",1069],["T_STRING","getUseSessionVar",1069],"(",")",["T_WHITESPACE"," ",1069],["T_BOOLEAN_AND","&&",1069],["T_WHITESPACE"," ",1069],"!",["T_VARIABLE","$sessionId",1069],")",["T_WHITESPACE"," ",1069],"{",["T_WHITESPACE","\n            ",1069],["T_VARIABLE","$this",1070],["T_OBJECT_OPERATOR","->",1070],["T_STRING","setQueryParam",1070],"(",["T_CONSTANT_ENCAPSED_STRING","'___SID'",1070],",",["T_WHITESPACE"," ",1070],["T_VARIABLE","$this",1070],["T_OBJECT_OPERATOR","->",1070],["T_STRING","getSecure",1070],"(",")",["T_WHITESPACE"," ",1070],"?",["T_WHITESPACE"," ",1070],["T_CONSTANT_ENCAPSED_STRING","'S'",1070],["T_WHITESPACE"," ",1070],":",["T_WHITESPACE"," ",1070],["T_CONSTANT_ENCAPSED_STRING","'U'",1070],")",";",["T_WHITESPACE"," ",1070],["T_COMMENT","\/\/ Secure\/Unsecure\n",1070],["T_WHITESPACE","        ",1071],"}",["T_WHITESPACE"," ",1071],["T_ELSE","else",1071],["T_WHITESPACE"," ",1071],["T_IF","if",1071],["T_WHITESPACE"," ",1071],"(",["T_VARIABLE","$sessionId",1071],")",["T_WHITESPACE"," ",1071],"{",["T_WHITESPACE","\n            ",1071],["T_VARIABLE","$this",1072],["T_OBJECT_OPERATOR","->",1072],["T_STRING","setQueryParam",1072],"(",["T_VARIABLE","$session",1072],["T_OBJECT_OPERATOR","->",1072],["T_STRING","getSessionIdQueryParam",1072],"(",")",",",["T_WHITESPACE"," ",1072],["T_VARIABLE","$sessionId",1072],")",";",["T_WHITESPACE","\n        ",1072],"}",["T_WHITESPACE","\n        ",1073],["T_RETURN","return",1074],["T_WHITESPACE"," ",1074],["T_VARIABLE","$this",1074],";",["T_WHITESPACE","\n    ",1074],"}",["T_WHITESPACE","\n\n    ",1075],["T_DOC_COMMENT","\/**\n     * Rebuild URL to handle the case when session ID was changed\n     *\n     * @param string $url\n     * @return string\n     *\/",1077],["T_WHITESPACE","\n    ",1082],["T_PUBLIC","public",1083],["T_WHITESPACE"," ",1083],["T_FUNCTION","function",1083],["T_WHITESPACE"," ",1083],["T_STRING","getRebuiltUrl",1083],"(",["T_VARIABLE","$url",1083],")",["T_WHITESPACE","\n    ",1083],"{",["T_WHITESPACE","\n        ",1084],["T_VARIABLE","$this",1085],["T_OBJECT_OPERATOR","->",1085],["T_STRING","parseUrl",1085],"(",["T_VARIABLE","$url",1085],")",";",["T_WHITESPACE","\n        ",1085],["T_VARIABLE","$port",1086],["T_WHITESPACE"," ",1086],"=",["T_WHITESPACE"," ",1086],["T_VARIABLE","$this",1086],["T_OBJECT_OPERATOR","->",1086],["T_STRING","getPort",1086],"(",")",";",["T_WHITESPACE","\n        ",1086],["T_IF","if",1087],["T_WHITESPACE"," ",1087],"(",["T_VARIABLE","$port",1087],")",["T_WHITESPACE"," ",1087],"{",["T_WHITESPACE","\n            ",1087],["T_VARIABLE","$port",1088],["T_WHITESPACE"," ",1088],"=",["T_WHITESPACE"," ",1088],["T_CONSTANT_ENCAPSED_STRING","':'",1088],["T_WHITESPACE"," ",1088],".",["T_WHITESPACE"," ",1088],["T_VARIABLE","$port",1088],";",["T_WHITESPACE","\n        ",1088],"}",["T_WHITESPACE"," ",1089],["T_ELSE","else",1089],["T_WHITESPACE"," ",1089],"{",["T_WHITESPACE","\n            ",1089],["T_VARIABLE","$port",1090],["T_WHITESPACE"," ",1090],"=",["T_WHITESPACE"," ",1090],["T_CONSTANT_ENCAPSED_STRING","''",1090],";",["T_WHITESPACE","\n        ",1090],"}",["T_WHITESPACE","\n        ",1091],["T_VARIABLE","$url",1092],["T_WHITESPACE"," ",1092],"=",["T_WHITESPACE"," ",1092],["T_VARIABLE","$this",1092],["T_OBJECT_OPERATOR","->",1092],["T_STRING","getScheme",1092],"(",")",["T_WHITESPACE"," ",1092],".",["T_WHITESPACE"," ",1092],["T_CONSTANT_ENCAPSED_STRING","':\/\/'",1092],["T_WHITESPACE"," ",1092],".",["T_WHITESPACE"," ",1092],["T_VARIABLE","$this",1092],["T_OBJECT_OPERATOR","->",1092],["T_STRING","getHost",1092],"(",")",["T_WHITESPACE"," ",1092],".",["T_WHITESPACE"," ",1092],["T_VARIABLE","$port",1092],["T_WHITESPACE"," ",1092],".",["T_WHITESPACE"," ",1092],["T_VARIABLE","$this",1092],["T_OBJECT_OPERATOR","->",1092],["T_STRING","getPath",1092],"(",")",";",["T_WHITESPACE","\n\n        ",1092],["T_VARIABLE","$this",1094],["T_OBJECT_OPERATOR","->",1094],["T_STRING","_prepareSessionUrl",1094],"(",["T_VARIABLE","$url",1094],")",";",["T_WHITESPACE","\n\n        ",1094],["T_VARIABLE","$query",1096],["T_WHITESPACE"," ",1096],"=",["T_WHITESPACE"," ",1096],["T_VARIABLE","$this",1096],["T_OBJECT_OPERATOR","->",1096],["T_STRING","getQuery",1096],"(",")",";",["T_WHITESPACE","\n        ",1096],["T_IF","if",1097],["T_WHITESPACE"," ",1097],"(",["T_VARIABLE","$query",1097],")",["T_WHITESPACE"," ",1097],"{",["T_WHITESPACE","\n            ",1097],["T_VARIABLE","$url",1098],["T_WHITESPACE"," ",1098],["T_CONCAT_EQUAL",".=",1098],["T_WHITESPACE"," ",1098],["T_CONSTANT_ENCAPSED_STRING","'?'",1098],["T_WHITESPACE"," ",1098],".",["T_WHITESPACE"," ",1098],["T_VARIABLE","$query",1098],";",["T_WHITESPACE","\n        ",1098],"}",["T_WHITESPACE","\n\n        ",1099],["T_VARIABLE","$fragment",1101],["T_WHITESPACE"," ",1101],"=",["T_WHITESPACE"," ",1101],["T_VARIABLE","$this",1101],["T_OBJECT_OPERATOR","->",1101],["T_STRING","getFragment",1101],"(",")",";",["T_WHITESPACE","\n        ",1101],["T_IF","if",1102],["T_WHITESPACE"," ",1102],"(",["T_VARIABLE","$fragment",1102],")",["T_WHITESPACE"," ",1102],"{",["T_WHITESPACE","\n            ",1102],["T_VARIABLE","$url",1103],["T_WHITESPACE"," ",1103],["T_CONCAT_EQUAL",".=",1103],["T_WHITESPACE"," ",1103],["T_CONSTANT_ENCAPSED_STRING","'#'",1103],["T_WHITESPACE"," ",1103],".",["T_WHITESPACE"," ",1103],["T_VARIABLE","$fragment",1103],";",["T_WHITESPACE","\n        ",1103],"}",["T_WHITESPACE","\n\n        ",1104],["T_RETURN","return",1106],["T_WHITESPACE"," ",1106],["T_VARIABLE","$this",1106],["T_OBJECT_OPERATOR","->",1106],["T_STRING","escape",1106],"(",["T_VARIABLE","$url",1106],")",";",["T_WHITESPACE","\n    ",1106],"}",["T_WHITESPACE","\n\n    ",1107],["T_DOC_COMMENT","\/**\n     * Escape (enclosure) URL string\n     *\n     * @param string $value\n     * @return string\n     *\/",1109],["T_WHITESPACE","\n    ",1114],["T_PUBLIC","public",1115],["T_WHITESPACE"," ",1115],["T_FUNCTION","function",1115],["T_WHITESPACE"," ",1115],["T_STRING","escape",1115],"(",["T_VARIABLE","$value",1115],")",["T_WHITESPACE","\n    ",1115],"{",["T_WHITESPACE","\n        ",1116],["T_VARIABLE","$value",1117],["T_WHITESPACE"," ",1117],"=",["T_WHITESPACE"," ",1117],["T_STRING","str_replace",1117],"(",["T_CONSTANT_ENCAPSED_STRING","'\"'",1117],",",["T_WHITESPACE"," ",1117],["T_CONSTANT_ENCAPSED_STRING","'%22'",1117],",",["T_WHITESPACE"," ",1117],["T_VARIABLE","$value",1117],")",";",["T_WHITESPACE","\n        ",1117],["T_VARIABLE","$value",1118],["T_WHITESPACE"," ",1118],"=",["T_WHITESPACE"," ",1118],["T_STRING","str_replace",1118],"(",["T_CONSTANT_ENCAPSED_STRING","\"'\"",1118],",",["T_WHITESPACE"," ",1118],["T_CONSTANT_ENCAPSED_STRING","'%27'",1118],",",["T_WHITESPACE"," ",1118],["T_VARIABLE","$value",1118],")",";",["T_WHITESPACE","\n        ",1118],["T_VARIABLE","$value",1119],["T_WHITESPACE"," ",1119],"=",["T_WHITESPACE"," ",1119],["T_STRING","str_replace",1119],"(",["T_CONSTANT_ENCAPSED_STRING","'>'",1119],",",["T_WHITESPACE"," ",1119],["T_CONSTANT_ENCAPSED_STRING","'%3E'",1119],",",["T_WHITESPACE"," ",1119],["T_VARIABLE","$value",1119],")",";",["T_WHITESPACE","\n        ",1119],["T_VARIABLE","$value",1120],["T_WHITESPACE"," ",1120],"=",["T_WHITESPACE"," ",1120],["T_STRING","str_replace",1120],"(",["T_CONSTANT_ENCAPSED_STRING","'<'",1120],",",["T_WHITESPACE"," ",1120],["T_CONSTANT_ENCAPSED_STRING","'%3C'",1120],",",["T_WHITESPACE"," ",1120],["T_VARIABLE","$value",1120],")",";",["T_WHITESPACE","\n        ",1120],["T_RETURN","return",1121],["T_WHITESPACE"," ",1121],["T_VARIABLE","$value",1121],";",["T_WHITESPACE","\n    ",1121],"}",["T_WHITESPACE","\n\n    ",1122],["T_DOC_COMMENT","\/**\n     * Build url by direct url and parameters\n     *\n     * @param string $url\n     * @param array $params\n     * @return string\n     *\/",1124],["T_WHITESPACE","\n    ",1130],["T_PUBLIC","public",1131],["T_WHITESPACE"," ",1131],["T_FUNCTION","function",1131],["T_WHITESPACE"," ",1131],["T_STRING","getDirectUrl",1131],"(",["T_VARIABLE","$url",1131],",",["T_WHITESPACE"," ",1131],["T_VARIABLE","$params",1131],["T_WHITESPACE"," ",1131],"=",["T_WHITESPACE"," ",1131],["T_ARRAY","array",1131],"(",")",")",["T_WHITESPACE"," ",1131],"{",["T_WHITESPACE","\n        ",1131],["T_VARIABLE","$params",1132],"[",["T_CONSTANT_ENCAPSED_STRING","'_direct'",1132],"]",["T_WHITESPACE"," ",1132],"=",["T_WHITESPACE"," ",1132],["T_VARIABLE","$url",1132],";",["T_WHITESPACE","\n        ",1132],["T_RETURN","return",1133],["T_WHITESPACE"," ",1133],["T_VARIABLE","$this",1133],["T_OBJECT_OPERATOR","->",1133],["T_STRING","getUrl",1133],"(",["T_CONSTANT_ENCAPSED_STRING","''",1133],",",["T_WHITESPACE"," ",1133],["T_VARIABLE","$params",1133],")",";",["T_WHITESPACE","\n    ",1133],"}",["T_WHITESPACE","\n\n    ",1134],["T_DOC_COMMENT","\/**\n     * Replace Session ID value in URL\n     *\n     * @param string $html\n     * @return string\n     *\/",1136],["T_WHITESPACE","\n    ",1141],["T_PUBLIC","public",1142],["T_WHITESPACE"," ",1142],["T_FUNCTION","function",1142],["T_WHITESPACE"," ",1142],["T_STRING","sessionUrlVar",1142],"(",["T_VARIABLE","$html",1142],")",["T_WHITESPACE","\n    ",1142],"{",["T_WHITESPACE","\n        ",1143],["T_IF","if",1144],["T_WHITESPACE"," ",1144],"(",["T_STRING","strpos",1144],"(",["T_VARIABLE","$html",1144],",",["T_WHITESPACE"," ",1144],["T_CONSTANT_ENCAPSED_STRING","'__SID'",1144],")",["T_WHITESPACE"," ",1144],["T_IS_IDENTICAL","===",1144],["T_WHITESPACE"," ",1144],["T_STRING","false",1144],")",["T_WHITESPACE"," ",1144],"{",["T_WHITESPACE","\n            ",1144],["T_RETURN","return",1145],["T_WHITESPACE"," ",1145],["T_VARIABLE","$html",1145],";",["T_WHITESPACE","\n        ",1145],"}",["T_WHITESPACE"," ",1146],["T_ELSE","else",1146],["T_WHITESPACE"," ",1146],"{",["T_WHITESPACE","\n            ",1146],["T_RETURN","return",1147],["T_WHITESPACE"," ",1147],["T_STRING","preg_replace_callback",1147],"(",["T_CONSTANT_ENCAPSED_STRING","'#(\\?|&amp;|&)___SID=([SU])(&amp;|&)?#'",1147],",",["T_WHITESPACE","\n                ",1147],["T_ARRAY","array",1148],"(",["T_VARIABLE","$this",1148],",",["T_WHITESPACE"," ",1148],["T_CONSTANT_ENCAPSED_STRING","\"sessionVarCallback\"",1148],")",",",["T_WHITESPACE"," ",1148],["T_VARIABLE","$html",1148],")",";",["T_WHITESPACE","\n        ",1148],"}",["T_WHITESPACE","\n    ",1149],"}",["T_WHITESPACE","\n\n    ",1150],["T_DOC_COMMENT","\/**\n     * Check and return use SID for URL\n     *\n     * @param bool $secure\n     * @return bool\n     *\/",1152],["T_WHITESPACE","\n    ",1157],["T_PUBLIC","public",1158],["T_WHITESPACE"," ",1158],["T_FUNCTION","function",1158],["T_WHITESPACE"," ",1158],["T_STRING","useSessionIdForUrl",1158],"(",["T_VARIABLE","$secure",1158],["T_WHITESPACE"," ",1158],"=",["T_WHITESPACE"," ",1158],["T_STRING","false",1158],")",["T_WHITESPACE","\n    ",1158],"{",["T_WHITESPACE","\n        ",1159],["T_VARIABLE","$key",1160],["T_WHITESPACE"," ",1160],"=",["T_WHITESPACE"," ",1160],["T_CONSTANT_ENCAPSED_STRING","'use_session_id_for_url_'",1160],["T_WHITESPACE"," ",1160],".",["T_WHITESPACE"," ",1160],["T_INT_CAST","(int)",1160],["T_WHITESPACE"," ",1160],["T_VARIABLE","$secure",1160],";",["T_WHITESPACE","\n        ",1160],["T_IF","if",1161],["T_WHITESPACE"," ",1161],"(",["T_STRING","is_null",1161],"(",["T_VARIABLE","$this",1161],["T_OBJECT_OPERATOR","->",1161],["T_STRING","getData",1161],"(",["T_VARIABLE","$key",1161],")",")",")",["T_WHITESPACE"," ",1161],"{",["T_WHITESPACE","\n            ",1161],["T_VARIABLE","$httpHost",1162],["T_WHITESPACE"," ",1162],"=",["T_WHITESPACE"," ",1162],["T_STRING","Mage",1162],["T_DOUBLE_COLON","::",1162],["T_STRING","app",1162],"(",")",["T_OBJECT_OPERATOR","->",1162],["T_STRING","getFrontController",1162],"(",")",["T_OBJECT_OPERATOR","->",1162],["T_STRING","getRequest",1162],"(",")",["T_OBJECT_OPERATOR","->",1162],["T_STRING","getHttpHost",1162],"(",")",";",["T_WHITESPACE","\n            ",1162],["T_VARIABLE","$urlHost",1163],["T_WHITESPACE"," ",1163],"=",["T_WHITESPACE"," ",1163],["T_STRING","parse_url",1163],"(",["T_STRING","Mage",1163],["T_DOUBLE_COLON","::",1163],["T_STRING","app",1163],"(",")",["T_OBJECT_OPERATOR","->",1163],["T_STRING","getStore",1163],"(",")",["T_OBJECT_OPERATOR","->",1163],["T_STRING","getBaseUrl",1163],"(",["T_STRING","Mage_Core_Model_Store",1163],["T_DOUBLE_COLON","::",1163],["T_STRING","URL_TYPE_LINK",1163],",",["T_WHITESPACE"," ",1163],["T_VARIABLE","$secure",1163],")",",",["T_WHITESPACE","\n                ",1163],["T_STRING","PHP_URL_HOST",1164],")",";",["T_WHITESPACE","\n\n            ",1164],["T_IF","if",1166],["T_WHITESPACE"," ",1166],"(",["T_VARIABLE","$httpHost",1166],["T_WHITESPACE"," ",1166],["T_IS_NOT_EQUAL","!=",1166],["T_WHITESPACE"," ",1166],["T_VARIABLE","$urlHost",1166],")",["T_WHITESPACE"," ",1166],"{",["T_WHITESPACE","\n                ",1166],["T_VARIABLE","$this",1167],["T_OBJECT_OPERATOR","->",1167],["T_STRING","setData",1167],"(",["T_VARIABLE","$key",1167],",",["T_WHITESPACE"," ",1167],["T_STRING","true",1167],")",";",["T_WHITESPACE","\n            ",1167],"}",["T_WHITESPACE"," ",1168],["T_ELSE","else",1168],["T_WHITESPACE"," ",1168],"{",["T_WHITESPACE","\n                ",1168],["T_VARIABLE","$this",1169],["T_OBJECT_OPERATOR","->",1169],["T_STRING","setData",1169],"(",["T_VARIABLE","$key",1169],",",["T_WHITESPACE"," ",1169],["T_STRING","false",1169],")",";",["T_WHITESPACE","\n            ",1169],"}",["T_WHITESPACE","\n        ",1170],"}",["T_WHITESPACE","\n        ",1171],["T_RETURN","return",1172],["T_WHITESPACE"," ",1172],["T_VARIABLE","$this",1172],["T_OBJECT_OPERATOR","->",1172],["T_STRING","getData",1172],"(",["T_VARIABLE","$key",1172],")",";",["T_WHITESPACE","\n    ",1172],"}",["T_WHITESPACE","\n\n    ",1173],["T_DOC_COMMENT","\/**\n     * Callback function for session replace\n     *\n     * @param array $match\n     * @return string\n     *\/",1175],["T_WHITESPACE","\n    ",1180],["T_PUBLIC","public",1181],["T_WHITESPACE"," ",1181],["T_FUNCTION","function",1181],["T_WHITESPACE"," ",1181],["T_STRING","sessionVarCallback",1181],"(",["T_VARIABLE","$match",1181],")",["T_WHITESPACE","\n    ",1181],"{",["T_WHITESPACE","\n        ",1182],["T_IF","if",1183],["T_WHITESPACE"," ",1183],"(",["T_VARIABLE","$this",1183],["T_OBJECT_OPERATOR","->",1183],["T_STRING","useSessionIdForUrl",1183],"(",["T_VARIABLE","$match",1183],"[",["T_LNUMBER","2",1183],"]",["T_WHITESPACE"," ",1183],["T_IS_EQUAL","==",1183],["T_WHITESPACE"," ",1183],["T_CONSTANT_ENCAPSED_STRING","'S'",1183],["T_WHITESPACE"," ",1183],"?",["T_WHITESPACE"," ",1183],["T_STRING","true",1183],["T_WHITESPACE"," ",1183],":",["T_WHITESPACE"," ",1183],["T_STRING","false",1183],")",")",["T_WHITESPACE"," ",1183],"{",["T_WHITESPACE","\n            ",1183],["T_VARIABLE","$session",1184],["T_WHITESPACE"," ",1184],"=",["T_WHITESPACE"," ",1184],["T_STRING","Mage",1184],["T_DOUBLE_COLON","::",1184],["T_STRING","getSingleton",1184],"(",["T_CONSTANT_ENCAPSED_STRING","'core\/session'",1184],")",";",["T_WHITESPACE","\n            ",1184],["T_COMMENT","\/* @var $session Mage_Core_Model_Session *\/",1185],["T_WHITESPACE","\n            ",1185],["T_RETURN","return",1186],["T_WHITESPACE"," ",1186],["T_VARIABLE","$match",1186],"[",["T_LNUMBER","1",1186],"]",["T_WHITESPACE","\n                ",1186],".",["T_WHITESPACE"," ",1187],["T_VARIABLE","$session",1187],["T_OBJECT_OPERATOR","->",1187],["T_STRING","getSessionIdQueryParam",1187],"(",")",["T_WHITESPACE","\n                ",1187],".",["T_WHITESPACE"," ",1188],["T_CONSTANT_ENCAPSED_STRING","'='",1188],["T_WHITESPACE"," ",1188],".",["T_WHITESPACE"," ",1188],["T_VARIABLE","$session",1188],["T_OBJECT_OPERATOR","->",1188],["T_STRING","getEncryptedSessionId",1188],"(",")",["T_WHITESPACE","\n                ",1188],".",["T_WHITESPACE"," ",1189],"(",["T_ISSET","isset",1189],"(",["T_VARIABLE","$match",1189],"[",["T_LNUMBER","3",1189],"]",")",["T_WHITESPACE"," ",1189],"?",["T_WHITESPACE"," ",1189],["T_VARIABLE","$match",1189],"[",["T_LNUMBER","3",1189],"]",["T_WHITESPACE"," ",1189],":",["T_WHITESPACE"," ",1189],["T_CONSTANT_ENCAPSED_STRING","''",1189],")",";",["T_WHITESPACE","\n        ",1189],"}",["T_WHITESPACE"," ",1190],["T_ELSE","else",1190],["T_WHITESPACE"," ",1190],"{",["T_WHITESPACE","\n            ",1190],["T_IF","if",1191],["T_WHITESPACE"," ",1191],"(",["T_VARIABLE","$match",1191],"[",["T_LNUMBER","1",1191],"]",["T_WHITESPACE"," ",1191],["T_IS_EQUAL","==",1191],["T_WHITESPACE"," ",1191],["T_CONSTANT_ENCAPSED_STRING","'?'",1191],["T_WHITESPACE"," ",1191],["T_BOOLEAN_AND","&&",1191],["T_WHITESPACE"," ",1191],["T_ISSET","isset",1191],"(",["T_VARIABLE","$match",1191],"[",["T_LNUMBER","3",1191],"]",")",")",["T_WHITESPACE"," ",1191],"{",["T_WHITESPACE","\n                ",1191],["T_RETURN","return",1192],["T_WHITESPACE"," ",1192],["T_CONSTANT_ENCAPSED_STRING","'?'",1192],";",["T_WHITESPACE","\n            ",1192],"}",["T_WHITESPACE"," ",1193],["T_ELSEIF","elseif",1193],["T_WHITESPACE"," ",1193],"(",["T_VARIABLE","$match",1193],"[",["T_LNUMBER","1",1193],"]",["T_WHITESPACE"," ",1193],["T_IS_EQUAL","==",1193],["T_WHITESPACE"," ",1193],["T_CONSTANT_ENCAPSED_STRING","'?'",1193],["T_WHITESPACE"," ",1193],["T_BOOLEAN_AND","&&",1193],["T_WHITESPACE"," ",1193],"!",["T_ISSET","isset",1193],"(",["T_VARIABLE","$match",1193],"[",["T_LNUMBER","3",1193],"]",")",")",["T_WHITESPACE"," ",1193],"{",["T_WHITESPACE","\n                ",1193],["T_RETURN","return",1194],["T_WHITESPACE"," ",1194],["T_CONSTANT_ENCAPSED_STRING","''",1194],";",["T_WHITESPACE","\n            ",1194],"}",["T_WHITESPACE"," ",1195],["T_ELSEIF","elseif",1195],["T_WHITESPACE"," ",1195],"(","(",["T_VARIABLE","$match",1195],"[",["T_LNUMBER","1",1195],"]",["T_WHITESPACE"," ",1195],["T_IS_EQUAL","==",1195],["T_WHITESPACE"," ",1195],["T_CONSTANT_ENCAPSED_STRING","'&amp;'",1195],["T_WHITESPACE"," ",1195],["T_BOOLEAN_OR","||",1195],["T_WHITESPACE"," ",1195],["T_VARIABLE","$match",1195],"[",["T_LNUMBER","1",1195],"]",["T_WHITESPACE"," ",1195],["T_IS_EQUAL","==",1195],["T_WHITESPACE"," ",1195],["T_CONSTANT_ENCAPSED_STRING","'&'",1195],")",["T_WHITESPACE"," ",1195],["T_BOOLEAN_AND","&&",1195],["T_WHITESPACE"," ",1195],"!",["T_ISSET","isset",1195],"(",["T_VARIABLE","$match",1195],"[",["T_LNUMBER","3",1195],"]",")",")",["T_WHITESPACE"," ",1195],"{",["T_WHITESPACE","\n                ",1195],["T_RETURN","return",1196],["T_WHITESPACE"," ",1196],["T_CONSTANT_ENCAPSED_STRING","''",1196],";",["T_WHITESPACE","\n            ",1196],"}",["T_WHITESPACE"," ",1197],["T_ELSEIF","elseif",1197],["T_WHITESPACE"," ",1197],"(","(",["T_VARIABLE","$match",1197],"[",["T_LNUMBER","1",1197],"]",["T_WHITESPACE"," ",1197],["T_IS_EQUAL","==",1197],["T_WHITESPACE"," ",1197],["T_CONSTANT_ENCAPSED_STRING","'&amp;'",1197],["T_WHITESPACE"," ",1197],["T_BOOLEAN_OR","||",1197],["T_WHITESPACE"," ",1197],["T_VARIABLE","$match",1197],"[",["T_LNUMBER","1",1197],"]",["T_WHITESPACE"," ",1197],["T_IS_EQUAL","==",1197],["T_WHITESPACE"," ",1197],["T_CONSTANT_ENCAPSED_STRING","'&'",1197],")",["T_WHITESPACE"," ",1197],["T_BOOLEAN_AND","&&",1197],["T_WHITESPACE"," ",1197],["T_ISSET","isset",1197],"(",["T_VARIABLE","$match",1197],"[",["T_LNUMBER","3",1197],"]",")",")",["T_WHITESPACE"," ",1197],"{",["T_WHITESPACE","\n                ",1197],["T_RETURN","return",1198],["T_WHITESPACE"," ",1198],["T_VARIABLE","$match",1198],"[",["T_LNUMBER","3",1198],"]",";",["T_WHITESPACE","\n            ",1198],"}",["T_WHITESPACE","\n        ",1199],"}",["T_WHITESPACE","\n        ",1200],["T_RETURN","return",1201],["T_WHITESPACE"," ",1201],["T_CONSTANT_ENCAPSED_STRING","''",1201],";",["T_WHITESPACE","\n    ",1201],"}",["T_WHITESPACE","\n\n    ",1202],["T_DOC_COMMENT","\/**\n     * Check if users originated URL is one of the domain URLs assigned to stores\n     *\n     * @return boolean\n     *\/",1204],["T_WHITESPACE","\n    ",1208],["T_PUBLIC","public",1209],["T_WHITESPACE"," ",1209],["T_FUNCTION","function",1209],["T_WHITESPACE"," ",1209],["T_STRING","isOwnOriginUrl",1209],"(",")",["T_WHITESPACE","\n    ",1209],"{",["T_WHITESPACE","\n        ",1210],["T_VARIABLE","$storeDomains",1211],["T_WHITESPACE"," ",1211],"=",["T_WHITESPACE"," ",1211],["T_ARRAY","array",1211],"(",")",";",["T_WHITESPACE","\n        ",1211],["T_VARIABLE","$referer",1212],["T_WHITESPACE"," ",1212],"=",["T_WHITESPACE"," ",1212],["T_STRING","parse_url",1212],"(",["T_STRING","Mage",1212],["T_DOUBLE_COLON","::",1212],["T_STRING","app",1212],"(",")",["T_OBJECT_OPERATOR","->",1212],["T_STRING","getFrontController",1212],"(",")",["T_OBJECT_OPERATOR","->",1212],["T_STRING","getRequest",1212],"(",")",["T_OBJECT_OPERATOR","->",1212],["T_STRING","getServer",1212],"(",["T_CONSTANT_ENCAPSED_STRING","'HTTP_REFERER'",1212],")",",",["T_WHITESPACE"," ",1212],["T_STRING","PHP_URL_HOST",1212],")",";",["T_WHITESPACE","\n        ",1212],["T_FOREACH","foreach",1213],["T_WHITESPACE"," ",1213],"(",["T_STRING","Mage",1213],["T_DOUBLE_COLON","::",1213],["T_STRING","app",1213],"(",")",["T_OBJECT_OPERATOR","->",1213],["T_STRING","getStores",1213],"(",")",["T_WHITESPACE"," ",1213],["T_AS","as",1213],["T_WHITESPACE"," ",1213],["T_VARIABLE","$store",1213],")",["T_WHITESPACE"," ",1213],"{",["T_WHITESPACE","\n            ",1213],["T_VARIABLE","$storeDomains",1214],"[","]",["T_WHITESPACE"," ",1214],"=",["T_WHITESPACE"," ",1214],["T_STRING","parse_url",1214],"(",["T_VARIABLE","$store",1214],["T_OBJECT_OPERATOR","->",1214],["T_STRING","getBaseUrl",1214],"(",")",",",["T_WHITESPACE"," ",1214],["T_STRING","PHP_URL_HOST",1214],")",";",["T_WHITESPACE","\n            ",1214],["T_VARIABLE","$storeDomains",1215],"[","]",["T_WHITESPACE"," ",1215],"=",["T_WHITESPACE"," ",1215],["T_STRING","parse_url",1215],"(",["T_VARIABLE","$store",1215],["T_OBJECT_OPERATOR","->",1215],["T_STRING","getBaseUrl",1215],"(",["T_STRING","Mage_Core_Model_Store",1215],["T_DOUBLE_COLON","::",1215],["T_STRING","URL_TYPE_LINK",1215],",",["T_WHITESPACE"," ",1215],["T_STRING","true",1215],")",",",["T_WHITESPACE"," ",1215],["T_STRING","PHP_URL_HOST",1215],")",";",["T_WHITESPACE","\n        ",1215],"}",["T_WHITESPACE","\n        ",1216],["T_VARIABLE","$storeDomains",1217],["T_WHITESPACE"," ",1217],"=",["T_WHITESPACE"," ",1217],["T_STRING","array_unique",1217],"(",["T_VARIABLE","$storeDomains",1217],")",";",["T_WHITESPACE","\n        ",1217],["T_IF","if",1218],["T_WHITESPACE"," ",1218],"(",["T_EMPTY","empty",1218],"(",["T_VARIABLE","$referer",1218],")",["T_WHITESPACE"," ",1218],["T_BOOLEAN_OR","||",1218],["T_WHITESPACE"," ",1218],["T_STRING","in_array",1218],"(",["T_VARIABLE","$referer",1218],",",["T_WHITESPACE"," ",1218],["T_VARIABLE","$storeDomains",1218],")",")",["T_WHITESPACE"," ",1218],"{",["T_WHITESPACE","\n            ",1218],["T_RETURN","return",1219],["T_WHITESPACE"," ",1219],["T_STRING","true",1219],";",["T_WHITESPACE","\n        ",1219],"}",["T_WHITESPACE","\n        ",1220],["T_RETURN","return",1221],["T_WHITESPACE"," ",1221],["T_STRING","false",1221],";",["T_WHITESPACE","\n    ",1221],"}",["T_WHITESPACE","\n\n    ",1222],["T_DOC_COMMENT","\/**\n     * Return frontend redirect URL with SID and other session parameters if any\n     *\n     * @param string $url\n     *\n     * @return string\n     *\/",1224],["T_WHITESPACE","\n    ",1230],["T_PUBLIC","public",1231],["T_WHITESPACE"," ",1231],["T_FUNCTION","function",1231],["T_WHITESPACE"," ",1231],["T_STRING","getRedirectUrl",1231],"(",["T_VARIABLE","$url",1231],")",["T_WHITESPACE","\n    ",1231],"{",["T_WHITESPACE","\n        ",1232],["T_VARIABLE","$this",1233],["T_OBJECT_OPERATOR","->",1233],["T_STRING","_prepareSessionUrlWithParams",1233],"(",["T_VARIABLE","$url",1233],",",["T_WHITESPACE"," ",1233],["T_ARRAY","array",1233],"(",["T_WHITESPACE","\n            ",1233],["T_CONSTANT_ENCAPSED_STRING","'name'",1234],["T_WHITESPACE"," ",1234],["T_DOUBLE_ARROW","=>",1234],["T_WHITESPACE"," ",1234],["T_STRING","Mage_Core_Controller_Front_Action",1234],["T_DOUBLE_COLON","::",1234],["T_STRING","SESSION_NAMESPACE",1234],["T_WHITESPACE","\n        ",1234],")",")",";",["T_WHITESPACE","\n\n        ",1235],["T_VARIABLE","$query",1237],["T_WHITESPACE"," ",1237],"=",["T_WHITESPACE"," ",1237],["T_VARIABLE","$this",1237],["T_OBJECT_OPERATOR","->",1237],["T_STRING","getQuery",1237],"(",["T_STRING","false",1237],")",";",["T_WHITESPACE","\n        ",1237],["T_IF","if",1238],["T_WHITESPACE"," ",1238],"(",["T_VARIABLE","$query",1238],")",["T_WHITESPACE"," ",1238],"{",["T_WHITESPACE","\n            ",1238],["T_VARIABLE","$url",1239],["T_WHITESPACE"," ",1239],["T_CONCAT_EQUAL",".=",1239],["T_WHITESPACE"," ",1239],"(",["T_STRING","strpos",1239],"(",["T_VARIABLE","$url",1239],",",["T_WHITESPACE"," ",1239],["T_CONSTANT_ENCAPSED_STRING","'?'",1239],")",["T_WHITESPACE"," ",1239],["T_IS_IDENTICAL","===",1239],["T_WHITESPACE"," ",1239],["T_STRING","false",1239],["T_WHITESPACE"," ",1239],"?",["T_WHITESPACE"," ",1239],["T_CONSTANT_ENCAPSED_STRING","'?'",1239],["T_WHITESPACE"," ",1239],":",["T_WHITESPACE"," ",1239],["T_CONSTANT_ENCAPSED_STRING","'&'",1239],")",["T_WHITESPACE"," ",1239],".",["T_WHITESPACE"," ",1239],["T_VARIABLE","$query",1239],";",["T_WHITESPACE","\n        ",1239],"}",["T_WHITESPACE","\n\n        ",1240],["T_RETURN","return",1242],["T_WHITESPACE"," ",1242],["T_VARIABLE","$url",1242],";",["T_WHITESPACE","\n    ",1242],"}",["T_WHITESPACE","\n",1243],"}",["T_WHITESPACE","\n",1244]]
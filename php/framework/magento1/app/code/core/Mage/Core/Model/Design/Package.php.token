[["T_OPEN_TAG","<?php\n",1],["T_DOC_COMMENT","\/**\n * Magento\n *\n * NOTICE OF LICENSE\n *\n * This source file is subject to the Open Software License (OSL 3.0)\n * that is bundled with this package in the file LICENSE.txt.\n * It is also available through the world-wide-web at this URL:\n * http:\/\/opensource.org\/licenses\/osl-3.0.php\n * If you did not receive a copy of the license and are unable to\n * obtain it through the world-wide-web, please send an email\n * to license@magento.com so we can send you a copy immediately.\n *\n * DISCLAIMER\n *\n * Do not edit or add to this file if you wish to upgrade Magento to newer\n * versions in the future. If you wish to customize Magento for your\n * needs please refer to http:\/\/www.magento.com for more information.\n *\n * @category    Mage\n * @package     Mage_Core\n * @copyright  Copyright (c) 2006-2016 X.commerce, Inc. and affiliates (http:\/\/www.magento.com)\n * @license    http:\/\/opensource.org\/licenses\/osl-3.0.php  Open Software License (OSL 3.0)\n *\/",2],["T_WHITESPACE","\n\n\n",25],["T_CLASS","class",28],["T_WHITESPACE"," ",28],["T_STRING","Mage_Core_Model_Design_Package",28],["T_WHITESPACE","\n",28],"{",["T_WHITESPACE","\n    ",29],["T_CONST","const",30],["T_WHITESPACE"," ",30],["T_STRING","DEFAULT_AREA",30],["T_WHITESPACE","    ",30],"=",["T_WHITESPACE"," ",30],["T_CONSTANT_ENCAPSED_STRING","'frontend'",30],";",["T_WHITESPACE","\n    ",30],["T_CONST","const",31],["T_WHITESPACE"," ",31],["T_STRING","DEFAULT_PACKAGE",31],["T_WHITESPACE"," ",31],"=",["T_WHITESPACE"," ",31],["T_CONSTANT_ENCAPSED_STRING","'default'",31],";",["T_WHITESPACE","\n    ",31],["T_CONST","const",32],["T_WHITESPACE"," ",32],["T_STRING","DEFAULT_THEME",32],["T_WHITESPACE","   ",32],"=",["T_WHITESPACE"," ",32],["T_CONSTANT_ENCAPSED_STRING","'default'",32],";",["T_WHITESPACE","\n    ",32],["T_CONST","const",33],["T_WHITESPACE"," ",33],["T_STRING","BASE_PACKAGE",33],["T_WHITESPACE","    ",33],"=",["T_WHITESPACE"," ",33],["T_CONSTANT_ENCAPSED_STRING","'base'",33],";",["T_WHITESPACE","\n\n    ",33],["T_DOC_COMMENT","\/**\n     * @deprecated after 1.4.0.0-alpha3\n     *\/",35],["T_WHITESPACE","\n    ",37],["T_CONST","const",38],["T_WHITESPACE"," ",38],["T_STRING","FALLBACK_THEME",38],["T_WHITESPACE","  ",38],"=",["T_WHITESPACE"," ",38],["T_CONSTANT_ENCAPSED_STRING","'default'",38],";",["T_WHITESPACE","\n\n    ",38],["T_PRIVATE","private",40],["T_WHITESPACE"," ",40],["T_STATIC","static",40],["T_WHITESPACE"," ",40],["T_VARIABLE","$_regexMatchCache",40],["T_WHITESPACE","      ",40],"=",["T_WHITESPACE"," ",40],["T_ARRAY","array",40],"(",")",";",["T_WHITESPACE","\n    ",40],["T_PRIVATE","private",41],["T_WHITESPACE"," ",41],["T_STATIC","static",41],["T_WHITESPACE"," ",41],["T_VARIABLE","$_customThemeTypeCache",41],["T_WHITESPACE"," ",41],"=",["T_WHITESPACE"," ",41],["T_ARRAY","array",41],"(",")",";",["T_WHITESPACE","\n\n    ",41],["T_DOC_COMMENT","\/**\n     * Current Store for generation ofr base_dir and base_url\n     *\n     * @var string|integer|Mage_Core_Model_Store\n     *\/",43],["T_WHITESPACE","\n    ",47],["T_PROTECTED","protected",48],["T_WHITESPACE"," ",48],["T_VARIABLE","$_store",48],["T_WHITESPACE"," ",48],"=",["T_WHITESPACE"," ",48],["T_STRING","null",48],";",["T_WHITESPACE","\n\n    ",48],["T_DOC_COMMENT","\/**\n     * Package area\n     *\n     * @var string\n     *\/",50],["T_WHITESPACE","\n    ",54],["T_PROTECTED","protected",55],["T_WHITESPACE"," ",55],["T_VARIABLE","$_area",55],";",["T_WHITESPACE","\n\n    ",55],["T_DOC_COMMENT","\/**\n     * Package name\n     *\n     * @var string\n     *\/",57],["T_WHITESPACE","\n    ",61],["T_PROTECTED","protected",62],["T_WHITESPACE"," ",62],["T_VARIABLE","$_name",62],";",["T_WHITESPACE","\n\n    ",62],["T_DOC_COMMENT","\/**\n     * Package theme\n     *\n     * @var string\n     *\/",64],["T_WHITESPACE","\n    ",68],["T_PROTECTED","protected",69],["T_WHITESPACE"," ",69],["T_VARIABLE","$_theme",69],";",["T_WHITESPACE","\n\n    ",69],["T_DOC_COMMENT","\/**\n     * Package root directory\n     *\n     * @var string\n     *\/",71],["T_WHITESPACE","\n    ",75],["T_PROTECTED","protected",76],["T_WHITESPACE"," ",76],["T_VARIABLE","$_rootDir",76],";",["T_WHITESPACE","\n\n    ",76],["T_DOC_COMMENT","\/**\n     * Directory of the css file\n     * Using only to transmit additional parametr in callback functions\n     * @var string\n     *\/",78],["T_WHITESPACE","\n    ",82],["T_PROTECTED","protected",83],["T_WHITESPACE"," ",83],["T_VARIABLE","$_callbackFileDir",83],";",["T_WHITESPACE","\n\n    ",83],["T_DOC_COMMENT","\/**\n     * @var Mage_Core_Model_Design_Config\n     *\/",85],["T_WHITESPACE","\n    ",87],["T_PROTECTED","protected",88],["T_WHITESPACE"," ",88],["T_VARIABLE","$_config",88],["T_WHITESPACE"," ",88],"=",["T_WHITESPACE"," ",88],["T_STRING","null",88],";",["T_WHITESPACE","\n\n    ",88],["T_DOC_COMMENT","\/**\n     * @var Mage_Core_Model_Design_Fallback\n     *\/",90],["T_WHITESPACE","\n    ",92],["T_PROTECTED","protected",93],["T_WHITESPACE"," ",93],["T_VARIABLE","$_fallback",93],["T_WHITESPACE"," ",93],"=",["T_WHITESPACE"," ",93],["T_STRING","null",93],";",["T_WHITESPACE","\n\n    ",93],["T_DOC_COMMENT","\/**\n     * Whether theme\/skin hierarchy should be checked via fallback mechanism\n     * @TODO: implement setter for this value\n     * @var bool\n     *\/",95],["T_WHITESPACE","\n    ",99],["T_PROTECTED","protected",100],["T_WHITESPACE"," ",100],["T_VARIABLE","$_shouldFallback",100],["T_WHITESPACE"," ",100],"=",["T_WHITESPACE"," ",100],["T_STRING","true",100],";",["T_WHITESPACE","\n\n    ",100],["T_PUBLIC","public",102],["T_WHITESPACE"," ",102],["T_FUNCTION","function",102],["T_WHITESPACE"," ",102],["T_STRING","__construct",102],"(",")",["T_WHITESPACE","\n    ",102],"{",["T_WHITESPACE","\n        ",103],["T_IF","if",104],["T_WHITESPACE"," ",104],"(",["T_STRING","is_null",104],"(",["T_VARIABLE","$this",104],["T_OBJECT_OPERATOR","->",104],["T_STRING","_config",104],")",")",["T_WHITESPACE"," ",104],"{",["T_WHITESPACE","\n            ",104],["T_VARIABLE","$this",105],["T_OBJECT_OPERATOR","->",105],["T_STRING","_config",105],["T_WHITESPACE"," ",105],"=",["T_WHITESPACE"," ",105],["T_STRING","Mage",105],["T_DOUBLE_COLON","::",105],["T_STRING","getSingleton",105],"(",["T_CONSTANT_ENCAPSED_STRING","'core\/design_config'",105],")",";",["T_WHITESPACE","\n        ",105],"}",["T_WHITESPACE","\n        ",106],["T_IF","if",107],["T_WHITESPACE"," ",107],"(",["T_STRING","is_null",107],"(",["T_VARIABLE","$this",107],["T_OBJECT_OPERATOR","->",107],["T_STRING","_fallback",107],")",")",["T_WHITESPACE"," ",107],"{",["T_WHITESPACE","\n            ",107],["T_VARIABLE","$this",108],["T_OBJECT_OPERATOR","->",108],["T_STRING","_fallback",108],["T_WHITESPACE"," ",108],"=",["T_WHITESPACE"," ",108],["T_STRING","Mage",108],["T_DOUBLE_COLON","::",108],["T_STRING","getSingleton",108],"(",["T_CONSTANT_ENCAPSED_STRING","'core\/design_fallback'",108],",",["T_WHITESPACE"," ",108],["T_ARRAY","array",108],"(",["T_WHITESPACE","\n                ",108],["T_CONSTANT_ENCAPSED_STRING","'config'",109],["T_WHITESPACE"," ",109],["T_DOUBLE_ARROW","=>",109],["T_WHITESPACE"," ",109],["T_VARIABLE","$this",109],["T_OBJECT_OPERATOR","->",109],["T_STRING","_config",109],",",["T_WHITESPACE","\n            ",109],")",")",";",["T_WHITESPACE","\n        ",110],"}",["T_WHITESPACE","\n    ",111],"}",["T_WHITESPACE","\n\n    ",112],["T_DOC_COMMENT","\/**\n     * Set store\n     *\n     * @param  string|integer|Mage_Core_Model_Store $store\n     * @return Mage_Core_Model_Design_Package\n     *\/",114],["T_WHITESPACE","\n    ",119],["T_PUBLIC","public",120],["T_WHITESPACE"," ",120],["T_FUNCTION","function",120],["T_WHITESPACE"," ",120],["T_STRING","setStore",120],"(",["T_VARIABLE","$store",120],")",["T_WHITESPACE","\n    ",120],"{",["T_WHITESPACE","\n        ",121],["T_IF","if",122],["T_WHITESPACE"," ",122],"(",["T_VARIABLE","$this",122],["T_OBJECT_OPERATOR","->",122],["T_STRING","_fallback",122],")",["T_WHITESPACE"," ",122],"{",["T_WHITESPACE","\n            ",122],["T_VARIABLE","$this",123],["T_OBJECT_OPERATOR","->",123],["T_STRING","_fallback",123],["T_OBJECT_OPERATOR","->",123],["T_STRING","setStore",123],"(",["T_VARIABLE","$store",123],")",";",["T_WHITESPACE","\n        ",123],"}",["T_WHITESPACE","\n        ",124],["T_VARIABLE","$this",125],["T_OBJECT_OPERATOR","->",125],["T_STRING","_store",125],["T_WHITESPACE"," ",125],"=",["T_WHITESPACE"," ",125],["T_VARIABLE","$store",125],";",["T_WHITESPACE","\n        ",125],["T_RETURN","return",126],["T_WHITESPACE"," ",126],["T_VARIABLE","$this",126],";",["T_WHITESPACE","\n    ",126],"}",["T_WHITESPACE","\n\n    ",127],["T_DOC_COMMENT","\/**\n     * Retrieve store\n     *\n     * @return string|integer|Mage_Core_Model_Store\n     *\/",129],["T_WHITESPACE","\n    ",133],["T_PUBLIC","public",134],["T_WHITESPACE"," ",134],["T_FUNCTION","function",134],["T_WHITESPACE"," ",134],["T_STRING","getStore",134],"(",")",["T_WHITESPACE","\n    ",134],"{",["T_WHITESPACE","\n        ",135],["T_IF","if",136],["T_WHITESPACE"," ",136],"(",["T_VARIABLE","$this",136],["T_OBJECT_OPERATOR","->",136],["T_STRING","_store",136],["T_WHITESPACE"," ",136],["T_IS_IDENTICAL","===",136],["T_WHITESPACE"," ",136],["T_STRING","null",136],")",["T_WHITESPACE"," ",136],"{",["T_WHITESPACE","\n            ",136],["T_RETURN","return",137],["T_WHITESPACE"," ",137],["T_STRING","Mage",137],["T_DOUBLE_COLON","::",137],["T_STRING","app",137],"(",")",["T_OBJECT_OPERATOR","->",137],["T_STRING","getStore",137],"(",")",";",["T_WHITESPACE","\n        ",137],"}",["T_WHITESPACE","\n        ",138],["T_RETURN","return",139],["T_WHITESPACE"," ",139],["T_VARIABLE","$this",139],["T_OBJECT_OPERATOR","->",139],["T_STRING","_store",139],";",["T_WHITESPACE","\n    ",139],"}",["T_WHITESPACE","\n\n    ",140],["T_DOC_COMMENT","\/**\n     * Set package area\n     *\n     * @param  string $area\n     * @return Mage_Core_Model_Design_Package\n     *\/",142],["T_WHITESPACE","\n    ",147],["T_PUBLIC","public",148],["T_WHITESPACE"," ",148],["T_FUNCTION","function",148],["T_WHITESPACE"," ",148],["T_STRING","setArea",148],"(",["T_VARIABLE","$area",148],")",["T_WHITESPACE","\n    ",148],"{",["T_WHITESPACE","\n        ",149],["T_VARIABLE","$this",150],["T_OBJECT_OPERATOR","->",150],["T_STRING","_area",150],["T_WHITESPACE"," ",150],"=",["T_WHITESPACE"," ",150],["T_VARIABLE","$area",150],";",["T_WHITESPACE","\n        ",150],["T_RETURN","return",151],["T_WHITESPACE"," ",151],["T_VARIABLE","$this",151],";",["T_WHITESPACE","\n    ",151],"}",["T_WHITESPACE","\n\n    ",152],["T_DOC_COMMENT","\/**\n     * Retrieve package area\n     *\n     * @return unknown\n     *\/",154],["T_WHITESPACE","\n    ",158],["T_PUBLIC","public",159],["T_WHITESPACE"," ",159],["T_FUNCTION","function",159],["T_WHITESPACE"," ",159],["T_STRING","getArea",159],"(",")",["T_WHITESPACE","\n    ",159],"{",["T_WHITESPACE","\n        ",160],["T_IF","if",161],["T_WHITESPACE"," ",161],"(",["T_STRING","is_null",161],"(",["T_VARIABLE","$this",161],["T_OBJECT_OPERATOR","->",161],["T_STRING","_area",161],")",")",["T_WHITESPACE"," ",161],"{",["T_WHITESPACE","\n            ",161],["T_VARIABLE","$this",162],["T_OBJECT_OPERATOR","->",162],["T_STRING","_area",162],["T_WHITESPACE"," ",162],"=",["T_WHITESPACE"," ",162],["T_STRING","self",162],["T_DOUBLE_COLON","::",162],["T_STRING","DEFAULT_AREA",162],";",["T_WHITESPACE","\n        ",162],"}",["T_WHITESPACE","\n        ",163],["T_RETURN","return",164],["T_WHITESPACE"," ",164],["T_VARIABLE","$this",164],["T_OBJECT_OPERATOR","->",164],["T_STRING","_area",164],";",["T_WHITESPACE","\n    ",164],"}",["T_WHITESPACE","\n\n    ",165],["T_DOC_COMMENT","\/**\n     * Set package name\n     * In case of any problem, the default will be set.\n     *\n     * @param  string $name\n     * @return Mage_Core_Model_Design_Package\n     *\/",167],["T_WHITESPACE","\n    ",173],["T_PUBLIC","public",174],["T_WHITESPACE"," ",174],["T_FUNCTION","function",174],["T_WHITESPACE"," ",174],["T_STRING","setPackageName",174],"(",["T_VARIABLE","$name",174],["T_WHITESPACE"," ",174],"=",["T_WHITESPACE"," ",174],["T_CONSTANT_ENCAPSED_STRING","''",174],")",["T_WHITESPACE","\n    ",174],"{",["T_WHITESPACE","\n        ",175],["T_IF","if",176],["T_WHITESPACE"," ",176],"(",["T_EMPTY","empty",176],"(",["T_VARIABLE","$name",176],")",")",["T_WHITESPACE"," ",176],"{",["T_WHITESPACE","\n            ",176],["T_COMMENT","\/\/ see, if exceptions for user-agents defined in config\n",177],["T_WHITESPACE","            ",178],["T_VARIABLE","$customPackage",178],["T_WHITESPACE"," ",178],"=",["T_WHITESPACE"," ",178],["T_VARIABLE","$this",178],["T_OBJECT_OPERATOR","->",178],["T_STRING","_checkUserAgentAgainstRegexps",178],"(",["T_CONSTANT_ENCAPSED_STRING","'design\/package\/ua_regexp'",178],")",";",["T_WHITESPACE","\n            ",178],["T_IF","if",179],["T_WHITESPACE"," ",179],"(",["T_VARIABLE","$customPackage",179],")",["T_WHITESPACE"," ",179],"{",["T_WHITESPACE","\n                ",179],["T_VARIABLE","$this",180],["T_OBJECT_OPERATOR","->",180],["T_STRING","_name",180],["T_WHITESPACE"," ",180],"=",["T_WHITESPACE"," ",180],["T_VARIABLE","$customPackage",180],";",["T_WHITESPACE","\n            ",180],"}",["T_WHITESPACE","\n            ",181],["T_ELSE","else",182],["T_WHITESPACE"," ",182],"{",["T_WHITESPACE","\n                ",182],["T_VARIABLE","$this",183],["T_OBJECT_OPERATOR","->",183],["T_STRING","_name",183],["T_WHITESPACE"," ",183],"=",["T_WHITESPACE"," ",183],["T_STRING","Mage",183],["T_DOUBLE_COLON","::",183],["T_STRING","getStoreConfig",183],"(",["T_CONSTANT_ENCAPSED_STRING","'design\/package\/name'",183],",",["T_WHITESPACE"," ",183],["T_VARIABLE","$this",183],["T_OBJECT_OPERATOR","->",183],["T_STRING","getStore",183],"(",")",")",";",["T_WHITESPACE","\n            ",183],"}",["T_WHITESPACE","\n        ",184],"}",["T_WHITESPACE","\n        ",185],["T_ELSE","else",186],["T_WHITESPACE"," ",186],"{",["T_WHITESPACE","\n            ",186],["T_VARIABLE","$this",187],["T_OBJECT_OPERATOR","->",187],["T_STRING","_name",187],["T_WHITESPACE"," ",187],"=",["T_WHITESPACE"," ",187],["T_VARIABLE","$name",187],";",["T_WHITESPACE","\n        ",187],"}",["T_WHITESPACE","\n        ",188],["T_COMMENT","\/\/ make sure not to crash, if wrong package specified\n",189],["T_WHITESPACE","        ",190],["T_IF","if",190],["T_WHITESPACE"," ",190],"(","!",["T_VARIABLE","$this",190],["T_OBJECT_OPERATOR","->",190],["T_STRING","designPackageExists",190],"(",["T_VARIABLE","$this",190],["T_OBJECT_OPERATOR","->",190],["T_STRING","_name",190],",",["T_WHITESPACE"," ",190],["T_VARIABLE","$this",190],["T_OBJECT_OPERATOR","->",190],["T_STRING","getArea",190],"(",")",")",")",["T_WHITESPACE"," ",190],"{",["T_WHITESPACE","\n            ",190],["T_VARIABLE","$this",191],["T_OBJECT_OPERATOR","->",191],["T_STRING","_name",191],["T_WHITESPACE"," ",191],"=",["T_WHITESPACE"," ",191],["T_STRING","self",191],["T_DOUBLE_COLON","::",191],["T_STRING","DEFAULT_PACKAGE",191],";",["T_WHITESPACE","\n        ",191],"}",["T_WHITESPACE","\n        ",192],["T_RETURN","return",193],["T_WHITESPACE"," ",193],["T_VARIABLE","$this",193],";",["T_WHITESPACE","\n    ",193],"}",["T_WHITESPACE","\n\n    ",194],["T_DOC_COMMENT","\/**\n     * Set store\/package\/area at once, and get respective values, that were before\n     *\n     * $storePackageArea must be assoc array. The keys may be:\n     * 'store', 'package', 'area'\n     *\n     * @param array $storePackageArea\n     * @return array\n     *\/",196],["T_WHITESPACE","\n    ",204],["T_PUBLIC","public",205],["T_WHITESPACE"," ",205],["T_FUNCTION","function",205],["T_WHITESPACE"," ",205],["T_STRING","setAllGetOld",205],"(",["T_VARIABLE","$storePackageArea",205],")",["T_WHITESPACE","\n    ",205],"{",["T_WHITESPACE","\n        ",206],["T_VARIABLE","$oldValues",207],["T_WHITESPACE"," ",207],"=",["T_WHITESPACE"," ",207],["T_ARRAY","array",207],"(",")",";",["T_WHITESPACE","\n        ",207],["T_IF","if",208],["T_WHITESPACE"," ",208],"(",["T_STRING","array_key_exists",208],"(",["T_CONSTANT_ENCAPSED_STRING","'store'",208],",",["T_WHITESPACE"," ",208],["T_VARIABLE","$storePackageArea",208],")",")",["T_WHITESPACE"," ",208],"{",["T_WHITESPACE","\n            ",208],["T_VARIABLE","$oldValues",209],"[",["T_CONSTANT_ENCAPSED_STRING","'store'",209],"]",["T_WHITESPACE"," ",209],"=",["T_WHITESPACE"," ",209],["T_VARIABLE","$this",209],["T_OBJECT_OPERATOR","->",209],["T_STRING","getStore",209],"(",")",";",["T_WHITESPACE","\n            ",209],["T_VARIABLE","$this",210],["T_OBJECT_OPERATOR","->",210],["T_STRING","setStore",210],"(",["T_VARIABLE","$storePackageArea",210],"[",["T_CONSTANT_ENCAPSED_STRING","'store'",210],"]",")",";",["T_WHITESPACE","\n        ",210],"}",["T_WHITESPACE","\n        ",211],["T_IF","if",212],["T_WHITESPACE"," ",212],"(",["T_STRING","array_key_exists",212],"(",["T_CONSTANT_ENCAPSED_STRING","'area'",212],",",["T_WHITESPACE"," ",212],["T_VARIABLE","$storePackageArea",212],")",")",["T_WHITESPACE"," ",212],"{",["T_WHITESPACE","\n            ",212],["T_VARIABLE","$oldValues",213],"[",["T_CONSTANT_ENCAPSED_STRING","'area'",213],"]",["T_WHITESPACE"," ",213],"=",["T_WHITESPACE"," ",213],["T_VARIABLE","$this",213],["T_OBJECT_OPERATOR","->",213],["T_STRING","getArea",213],"(",")",";",["T_WHITESPACE","\n            ",213],["T_VARIABLE","$this",214],["T_OBJECT_OPERATOR","->",214],["T_STRING","setArea",214],"(",["T_VARIABLE","$storePackageArea",214],"[",["T_CONSTANT_ENCAPSED_STRING","'area'",214],"]",")",";",["T_WHITESPACE","\n        ",214],"}",["T_WHITESPACE","\n        ",215],["T_IF","if",216],["T_WHITESPACE"," ",216],"(",["T_STRING","array_key_exists",216],"(",["T_CONSTANT_ENCAPSED_STRING","'package'",216],",",["T_WHITESPACE"," ",216],["T_VARIABLE","$storePackageArea",216],")",")",["T_WHITESPACE"," ",216],"{",["T_WHITESPACE","\n            ",216],["T_VARIABLE","$oldValues",217],"[",["T_CONSTANT_ENCAPSED_STRING","'package'",217],"]",["T_WHITESPACE"," ",217],"=",["T_WHITESPACE"," ",217],["T_VARIABLE","$this",217],["T_OBJECT_OPERATOR","->",217],["T_STRING","getPackageName",217],"(",")",";",["T_WHITESPACE","\n            ",217],["T_VARIABLE","$this",218],["T_OBJECT_OPERATOR","->",218],["T_STRING","setPackageName",218],"(",["T_VARIABLE","$storePackageArea",218],"[",["T_CONSTANT_ENCAPSED_STRING","'package'",218],"]",")",";",["T_WHITESPACE","\n        ",218],"}",["T_WHITESPACE","\n        ",219],["T_RETURN","return",220],["T_WHITESPACE"," ",220],["T_VARIABLE","$oldValues",220],";",["T_WHITESPACE","\n    ",220],"}",["T_WHITESPACE","\n\n    ",221],["T_DOC_COMMENT","\/**\n     * Retrieve package name\n     *\n     * @return string\n     *\/",223],["T_WHITESPACE","\n    ",227],["T_PUBLIC","public",228],["T_WHITESPACE"," ",228],["T_FUNCTION","function",228],["T_WHITESPACE"," ",228],["T_STRING","getPackageName",228],"(",")",["T_WHITESPACE","\n    ",228],"{",["T_WHITESPACE","\n        ",229],["T_IF","if",230],["T_WHITESPACE"," ",230],"(",["T_STRING","null",230],["T_WHITESPACE"," ",230],["T_IS_IDENTICAL","===",230],["T_WHITESPACE"," ",230],["T_VARIABLE","$this",230],["T_OBJECT_OPERATOR","->",230],["T_STRING","_name",230],")",["T_WHITESPACE"," ",230],"{",["T_WHITESPACE","\n            ",230],["T_VARIABLE","$this",231],["T_OBJECT_OPERATOR","->",231],["T_STRING","setPackageName",231],"(",")",";",["T_WHITESPACE","\n        ",231],"}",["T_WHITESPACE","\n        ",232],["T_RETURN","return",233],["T_WHITESPACE"," ",233],["T_VARIABLE","$this",233],["T_OBJECT_OPERATOR","->",233],["T_STRING","_name",233],";",["T_WHITESPACE","\n    ",233],"}",["T_WHITESPACE","\n\n    ",234],["T_PUBLIC","public",236],["T_WHITESPACE"," ",236],["T_FUNCTION","function",236],["T_WHITESPACE"," ",236],["T_STRING","designPackageExists",236],"(",["T_VARIABLE","$packageName",236],",",["T_WHITESPACE"," ",236],["T_VARIABLE","$area",236],["T_WHITESPACE"," ",236],"=",["T_WHITESPACE"," ",236],["T_STRING","self",236],["T_DOUBLE_COLON","::",236],["T_STRING","DEFAULT_AREA",236],")",["T_WHITESPACE","\n    ",236],"{",["T_WHITESPACE","\n        ",237],["T_RETURN","return",238],["T_WHITESPACE"," ",238],["T_STRING","is_dir",238],"(",["T_STRING","Mage",238],["T_DOUBLE_COLON","::",238],["T_STRING","getBaseDir",238],"(",["T_CONSTANT_ENCAPSED_STRING","'design'",238],")",["T_WHITESPACE"," ",238],".",["T_WHITESPACE"," ",238],["T_STRING","DS",238],["T_WHITESPACE"," ",238],".",["T_WHITESPACE"," ",238],["T_VARIABLE","$area",238],["T_WHITESPACE"," ",238],".",["T_WHITESPACE"," ",238],["T_STRING","DS",238],["T_WHITESPACE"," ",238],".",["T_WHITESPACE"," ",238],["T_VARIABLE","$packageName",238],")",";",["T_WHITESPACE","\n    ",238],"}",["T_WHITESPACE","\n\n    ",239],["T_DOC_COMMENT","\/**\n     * Declare design package theme params\n     * Polymorph method:\n     * 1) if 1 parameter specified, sets everything to this value\n     * 2) if 2 parameters, treats 1st as key and 2nd as value\n     *\n     * @return Mage_Core_Model_Design_Package\n     *\/",241],["T_WHITESPACE","\n    ",248],["T_PUBLIC","public",249],["T_WHITESPACE"," ",249],["T_FUNCTION","function",249],["T_WHITESPACE"," ",249],["T_STRING","setTheme",249],"(",")",["T_WHITESPACE","\n    ",249],"{",["T_WHITESPACE","\n        ",250],["T_SWITCH","switch",251],["T_WHITESPACE"," ",251],"(",["T_STRING","func_num_args",251],"(",")",")",["T_WHITESPACE"," ",251],"{",["T_WHITESPACE","\n            ",251],["T_CASE","case",252],["T_WHITESPACE"," ",252],["T_LNUMBER","1",252],":",["T_WHITESPACE","\n                ",252],["T_FOREACH","foreach",253],["T_WHITESPACE"," ",253],"(",["T_ARRAY","array",253],"(",["T_CONSTANT_ENCAPSED_STRING","'layout'",253],",",["T_WHITESPACE"," ",253],["T_CONSTANT_ENCAPSED_STRING","'template'",253],",",["T_WHITESPACE"," ",253],["T_CONSTANT_ENCAPSED_STRING","'skin'",253],",",["T_WHITESPACE"," ",253],["T_CONSTANT_ENCAPSED_STRING","'locale'",253],")",["T_WHITESPACE"," ",253],["T_AS","as",253],["T_WHITESPACE"," ",253],["T_VARIABLE","$type",253],")",["T_WHITESPACE"," ",253],"{",["T_WHITESPACE","\n                    ",253],["T_VARIABLE","$this",254],["T_OBJECT_OPERATOR","->",254],["T_STRING","_theme",254],"[",["T_VARIABLE","$type",254],"]",["T_WHITESPACE"," ",254],"=",["T_WHITESPACE"," ",254],["T_STRING","func_get_arg",254],"(",["T_LNUMBER","0",254],")",";",["T_WHITESPACE","\n                ",254],"}",["T_WHITESPACE","\n                ",255],["T_BREAK","break",256],";",["T_WHITESPACE","\n\n            ",256],["T_CASE","case",258],["T_WHITESPACE"," ",258],["T_LNUMBER","2",258],":",["T_WHITESPACE","\n                ",258],["T_VARIABLE","$this",259],["T_OBJECT_OPERATOR","->",259],["T_STRING","_theme",259],"[",["T_STRING","func_get_arg",259],"(",["T_LNUMBER","0",259],")","]",["T_WHITESPACE"," ",259],"=",["T_WHITESPACE"," ",259],["T_STRING","func_get_arg",259],"(",["T_LNUMBER","1",259],")",";",["T_WHITESPACE","\n                ",259],["T_BREAK","break",260],";",["T_WHITESPACE","\n\n            ",260],["T_DEFAULT","default",262],":",["T_WHITESPACE","\n                ",262],["T_THROW","throw",263],["T_WHITESPACE"," ",263],["T_STRING","Mage",263],["T_DOUBLE_COLON","::",263],["T_STRING","exception",263],"(",["T_STRING","Mage",263],["T_DOUBLE_COLON","::",263],["T_STRING","helper",263],"(",["T_CONSTANT_ENCAPSED_STRING","'core'",263],")",["T_OBJECT_OPERATOR","->",263],["T_STRING","__",263],"(",["T_CONSTANT_ENCAPSED_STRING","'Wrong number of arguments for %s'",263],",",["T_WHITESPACE"," ",263],["T_METHOD_C","__METHOD__",263],")",")",";",["T_WHITESPACE","\n        ",263],"}",["T_WHITESPACE","\n        ",264],["T_RETURN","return",265],["T_WHITESPACE"," ",265],["T_VARIABLE","$this",265],";",["T_WHITESPACE","\n    ",265],"}",["T_WHITESPACE","\n\n    ",266],["T_PUBLIC","public",268],["T_WHITESPACE"," ",268],["T_FUNCTION","function",268],["T_WHITESPACE"," ",268],["T_STRING","getTheme",268],"(",["T_VARIABLE","$type",268],")",["T_WHITESPACE","\n    ",268],"{",["T_WHITESPACE","\n        ",269],["T_IF","if",270],["T_WHITESPACE"," ",270],"(",["T_EMPTY","empty",270],"(",["T_VARIABLE","$this",270],["T_OBJECT_OPERATOR","->",270],["T_STRING","_theme",270],"[",["T_VARIABLE","$type",270],"]",")",")",["T_WHITESPACE"," ",270],"{",["T_WHITESPACE","\n            ",270],["T_VARIABLE","$this",271],["T_OBJECT_OPERATOR","->",271],["T_STRING","_theme",271],"[",["T_VARIABLE","$type",271],"]",["T_WHITESPACE"," ",271],"=",["T_WHITESPACE"," ",271],["T_STRING","Mage",271],["T_DOUBLE_COLON","::",271],["T_STRING","getStoreConfig",271],"(",["T_CONSTANT_ENCAPSED_STRING","'design\/theme\/'",271],".",["T_VARIABLE","$type",271],",",["T_WHITESPACE"," ",271],["T_VARIABLE","$this",271],["T_OBJECT_OPERATOR","->",271],["T_STRING","getStore",271],"(",")",")",";",["T_WHITESPACE","\n            ",271],["T_IF","if",272],["T_WHITESPACE"," ",272],"(",["T_VARIABLE","$type",272],["T_IS_NOT_IDENTICAL","!==",272],["T_CONSTANT_ENCAPSED_STRING","'default'",272],["T_WHITESPACE"," ",272],["T_BOOLEAN_AND","&&",272],["T_WHITESPACE"," ",272],["T_EMPTY","empty",272],"(",["T_VARIABLE","$this",272],["T_OBJECT_OPERATOR","->",272],["T_STRING","_theme",272],"[",["T_VARIABLE","$type",272],"]",")",")",["T_WHITESPACE"," ",272],"{",["T_WHITESPACE","\n                ",272],["T_VARIABLE","$this",273],["T_OBJECT_OPERATOR","->",273],["T_STRING","_theme",273],"[",["T_VARIABLE","$type",273],"]",["T_WHITESPACE"," ",273],"=",["T_WHITESPACE"," ",273],["T_VARIABLE","$this",273],["T_OBJECT_OPERATOR","->",273],["T_STRING","getTheme",273],"(",["T_CONSTANT_ENCAPSED_STRING","'default'",273],")",";",["T_WHITESPACE","\n                ",273],["T_IF","if",274],["T_WHITESPACE"," ",274],"(",["T_EMPTY","empty",274],"(",["T_VARIABLE","$this",274],["T_OBJECT_OPERATOR","->",274],["T_STRING","_theme",274],"[",["T_VARIABLE","$type",274],"]",")",")",["T_WHITESPACE"," ",274],"{",["T_WHITESPACE","\n                    ",274],["T_VARIABLE","$this",275],["T_OBJECT_OPERATOR","->",275],["T_STRING","_theme",275],"[",["T_VARIABLE","$type",275],"]",["T_WHITESPACE"," ",275],"=",["T_WHITESPACE"," ",275],["T_STRING","self",275],["T_DOUBLE_COLON","::",275],["T_STRING","DEFAULT_THEME",275],";",["T_WHITESPACE","\n                ",275],"}",["T_WHITESPACE","\n\n                ",276],["T_COMMENT","\/\/ \"locale\", \"layout\", \"template\"\n",278],["T_WHITESPACE","            ",279],"}",["T_WHITESPACE","\n        ",279],"}",["T_WHITESPACE","\n\n        ",280],["T_COMMENT","\/\/ + \"default\", \"skin\"\n",282],["T_WHITESPACE","\n        ",283],["T_COMMENT","\/\/ set exception value for theme, if defined in config\n",284],["T_WHITESPACE","        ",285],["T_VARIABLE","$customThemeType",285],["T_WHITESPACE"," ",285],"=",["T_WHITESPACE"," ",285],["T_VARIABLE","$this",285],["T_OBJECT_OPERATOR","->",285],["T_STRING","_checkUserAgentAgainstRegexps",285],"(","\"",["T_ENCAPSED_AND_WHITESPACE","design\/theme\/",285],["T_CURLY_OPEN","{",285],["T_VARIABLE","$type",285],"}",["T_ENCAPSED_AND_WHITESPACE","_ua_regexp",285],"\"",")",";",["T_WHITESPACE","\n        ",285],["T_IF","if",286],["T_WHITESPACE"," ",286],"(",["T_VARIABLE","$customThemeType",286],")",["T_WHITESPACE"," ",286],"{",["T_WHITESPACE","\n            ",286],["T_VARIABLE","$this",287],["T_OBJECT_OPERATOR","->",287],["T_STRING","_theme",287],"[",["T_VARIABLE","$type",287],"]",["T_WHITESPACE"," ",287],"=",["T_WHITESPACE"," ",287],["T_VARIABLE","$customThemeType",287],";",["T_WHITESPACE","\n        ",287],"}",["T_WHITESPACE","\n\n        ",288],["T_RETURN","return",290],["T_WHITESPACE"," ",290],["T_VARIABLE","$this",290],["T_OBJECT_OPERATOR","->",290],["T_STRING","_theme",290],"[",["T_VARIABLE","$type",290],"]",";",["T_WHITESPACE","\n    ",290],"}",["T_WHITESPACE","\n\n    ",291],["T_PUBLIC","public",293],["T_WHITESPACE"," ",293],["T_FUNCTION","function",293],["T_WHITESPACE"," ",293],["T_STRING","getDefaultTheme",293],"(",")",["T_WHITESPACE","\n    ",293],"{",["T_WHITESPACE","\n        ",294],["T_RETURN","return",295],["T_WHITESPACE"," ",295],["T_STRING","self",295],["T_DOUBLE_COLON","::",295],["T_STRING","DEFAULT_THEME",295],";",["T_WHITESPACE","\n    ",295],"}",["T_WHITESPACE","\n\n    ",296],["T_PUBLIC","public",298],["T_WHITESPACE"," ",298],["T_FUNCTION","function",298],["T_WHITESPACE"," ",298],["T_STRING","updateParamDefaults",298],"(",["T_ARRAY","array",298],["T_WHITESPACE"," ",298],"&",["T_VARIABLE","$params",298],")",["T_WHITESPACE","\n    ",298],"{",["T_WHITESPACE","\n        ",299],["T_IF","if",300],["T_WHITESPACE"," ",300],"(",["T_VARIABLE","$this",300],["T_OBJECT_OPERATOR","->",300],["T_STRING","getStore",300],"(",")",")",["T_WHITESPACE"," ",300],"{",["T_WHITESPACE","\n            ",300],["T_VARIABLE","$params",301],"[",["T_CONSTANT_ENCAPSED_STRING","'_store'",301],"]",["T_WHITESPACE"," ",301],"=",["T_WHITESPACE"," ",301],["T_VARIABLE","$this",301],["T_OBJECT_OPERATOR","->",301],["T_STRING","getStore",301],"(",")",";",["T_WHITESPACE","\n        ",301],"}",["T_WHITESPACE","\n        ",302],["T_IF","if",303],["T_WHITESPACE"," ",303],"(",["T_EMPTY","empty",303],"(",["T_VARIABLE","$params",303],"[",["T_CONSTANT_ENCAPSED_STRING","'_area'",303],"]",")",")",["T_WHITESPACE"," ",303],"{",["T_WHITESPACE","\n            ",303],["T_VARIABLE","$params",304],"[",["T_CONSTANT_ENCAPSED_STRING","'_area'",304],"]",["T_WHITESPACE"," ",304],"=",["T_WHITESPACE"," ",304],["T_VARIABLE","$this",304],["T_OBJECT_OPERATOR","->",304],["T_STRING","getArea",304],"(",")",";",["T_WHITESPACE","\n        ",304],"}",["T_WHITESPACE","\n        ",305],["T_IF","if",306],["T_WHITESPACE"," ",306],"(",["T_EMPTY","empty",306],"(",["T_VARIABLE","$params",306],"[",["T_CONSTANT_ENCAPSED_STRING","'_package'",306],"]",")",")",["T_WHITESPACE"," ",306],"{",["T_WHITESPACE","\n            ",306],["T_VARIABLE","$params",307],"[",["T_CONSTANT_ENCAPSED_STRING","'_package'",307],"]",["T_WHITESPACE"," ",307],"=",["T_WHITESPACE"," ",307],["T_VARIABLE","$this",307],["T_OBJECT_OPERATOR","->",307],["T_STRING","getPackageName",307],"(",")",";",["T_WHITESPACE","\n        ",307],"}",["T_WHITESPACE","\n        ",308],["T_IF","if",309],["T_WHITESPACE"," ",309],"(",["T_EMPTY","empty",309],"(",["T_VARIABLE","$params",309],"[",["T_CONSTANT_ENCAPSED_STRING","'_theme'",309],"]",")",")",["T_WHITESPACE"," ",309],"{",["T_WHITESPACE","\n            ",309],["T_VARIABLE","$params",310],"[",["T_CONSTANT_ENCAPSED_STRING","'_theme'",310],"]",["T_WHITESPACE"," ",310],"=",["T_WHITESPACE"," ",310],["T_VARIABLE","$this",310],["T_OBJECT_OPERATOR","->",310],["T_STRING","getTheme",310],"(",["T_WHITESPACE"," ",310],"(",["T_ISSET","isset",310],"(",["T_VARIABLE","$params",310],"[",["T_CONSTANT_ENCAPSED_STRING","'_type'",310],"]",")",")",["T_WHITESPACE"," ",310],"?",["T_WHITESPACE"," ",310],["T_VARIABLE","$params",310],"[",["T_CONSTANT_ENCAPSED_STRING","'_type'",310],"]",["T_WHITESPACE"," ",310],":",["T_WHITESPACE"," ",310],["T_CONSTANT_ENCAPSED_STRING","''",310],["T_WHITESPACE"," ",310],")",";",["T_WHITESPACE","\n        ",310],"}",["T_WHITESPACE","\n        ",311],["T_IF","if",312],["T_WHITESPACE"," ",312],"(",["T_EMPTY","empty",312],"(",["T_VARIABLE","$params",312],"[",["T_CONSTANT_ENCAPSED_STRING","'_default'",312],"]",")",")",["T_WHITESPACE"," ",312],"{",["T_WHITESPACE","\n            ",312],["T_VARIABLE","$params",313],"[",["T_CONSTANT_ENCAPSED_STRING","'_default'",313],"]",["T_WHITESPACE"," ",313],"=",["T_WHITESPACE"," ",313],["T_STRING","false",313],";",["T_WHITESPACE","\n        ",313],"}",["T_WHITESPACE","\n        ",314],["T_RETURN","return",315],["T_WHITESPACE"," ",315],["T_VARIABLE","$this",315],";",["T_WHITESPACE","\n    ",315],"}",["T_WHITESPACE","\n\n    ",316],["T_PUBLIC","public",318],["T_WHITESPACE"," ",318],["T_FUNCTION","function",318],["T_WHITESPACE"," ",318],["T_STRING","getBaseDir",318],"(",["T_ARRAY","array",318],["T_WHITESPACE"," ",318],["T_VARIABLE","$params",318],")",["T_WHITESPACE","\n    ",318],"{",["T_WHITESPACE","\n        ",319],["T_VARIABLE","$this",320],["T_OBJECT_OPERATOR","->",320],["T_STRING","updateParamDefaults",320],"(",["T_VARIABLE","$params",320],")",";",["T_WHITESPACE","\n        ",320],["T_VARIABLE","$baseDir",321],["T_WHITESPACE"," ",321],"=",["T_WHITESPACE"," ",321],"(",["T_EMPTY","empty",321],"(",["T_VARIABLE","$params",321],"[",["T_CONSTANT_ENCAPSED_STRING","'_relative'",321],"]",")",["T_WHITESPACE"," ",321],"?",["T_WHITESPACE"," ",321],["T_STRING","Mage",321],["T_DOUBLE_COLON","::",321],["T_STRING","getBaseDir",321],"(",["T_CONSTANT_ENCAPSED_STRING","'design'",321],")",".",["T_STRING","DS",321],["T_WHITESPACE"," ",321],":",["T_WHITESPACE"," ",321],["T_CONSTANT_ENCAPSED_STRING","''",321],")",".",["T_WHITESPACE","\n            ",321],["T_VARIABLE","$params",322],"[",["T_CONSTANT_ENCAPSED_STRING","'_area'",322],"]",".",["T_STRING","DS",322],".",["T_VARIABLE","$params",322],"[",["T_CONSTANT_ENCAPSED_STRING","'_package'",322],"]",".",["T_STRING","DS",322],".",["T_VARIABLE","$params",322],"[",["T_CONSTANT_ENCAPSED_STRING","'_theme'",322],"]",".",["T_STRING","DS",322],".",["T_VARIABLE","$params",322],"[",["T_CONSTANT_ENCAPSED_STRING","'_type'",322],"]",";",["T_WHITESPACE","\n        ",322],["T_RETURN","return",323],["T_WHITESPACE"," ",323],["T_VARIABLE","$baseDir",323],";",["T_WHITESPACE","\n    ",323],"}",["T_WHITESPACE","\n\n    ",324],["T_PUBLIC","public",326],["T_WHITESPACE"," ",326],["T_FUNCTION","function",326],["T_WHITESPACE"," ",326],["T_STRING","getSkinBaseDir",326],"(",["T_ARRAY","array",326],["T_WHITESPACE"," ",326],["T_VARIABLE","$params",326],"=",["T_ARRAY","array",326],"(",")",")",["T_WHITESPACE","\n    ",326],"{",["T_WHITESPACE","\n        ",327],["T_VARIABLE","$params",328],"[",["T_CONSTANT_ENCAPSED_STRING","'_type'",328],"]",["T_WHITESPACE"," ",328],"=",["T_WHITESPACE"," ",328],["T_CONSTANT_ENCAPSED_STRING","'skin'",328],";",["T_WHITESPACE","\n        ",328],["T_VARIABLE","$this",329],["T_OBJECT_OPERATOR","->",329],["T_STRING","updateParamDefaults",329],"(",["T_VARIABLE","$params",329],")",";",["T_WHITESPACE","\n        ",329],["T_VARIABLE","$baseDir",330],["T_WHITESPACE"," ",330],"=",["T_WHITESPACE"," ",330],"(",["T_EMPTY","empty",330],"(",["T_VARIABLE","$params",330],"[",["T_CONSTANT_ENCAPSED_STRING","'_relative'",330],"]",")",["T_WHITESPACE"," ",330],"?",["T_WHITESPACE"," ",330],["T_STRING","Mage",330],["T_DOUBLE_COLON","::",330],["T_STRING","getBaseDir",330],"(",["T_CONSTANT_ENCAPSED_STRING","'skin'",330],")",".",["T_STRING","DS",330],["T_WHITESPACE"," ",330],":",["T_WHITESPACE"," ",330],["T_CONSTANT_ENCAPSED_STRING","''",330],")",".",["T_WHITESPACE","\n            ",330],["T_VARIABLE","$params",331],"[",["T_CONSTANT_ENCAPSED_STRING","'_area'",331],"]",".",["T_STRING","DS",331],".",["T_VARIABLE","$params",331],"[",["T_CONSTANT_ENCAPSED_STRING","'_package'",331],"]",".",["T_STRING","DS",331],".",["T_VARIABLE","$params",331],"[",["T_CONSTANT_ENCAPSED_STRING","'_theme'",331],"]",";",["T_WHITESPACE","\n        ",331],["T_RETURN","return",332],["T_WHITESPACE"," ",332],["T_VARIABLE","$baseDir",332],";",["T_WHITESPACE","\n    ",332],"}",["T_WHITESPACE","\n\n    ",333],["T_PUBLIC","public",335],["T_WHITESPACE"," ",335],["T_FUNCTION","function",335],["T_WHITESPACE"," ",335],["T_STRING","getLocaleBaseDir",335],"(",["T_ARRAY","array",335],["T_WHITESPACE"," ",335],["T_VARIABLE","$params",335],"=",["T_ARRAY","array",335],"(",")",")",["T_WHITESPACE","\n    ",335],"{",["T_WHITESPACE","\n        ",336],["T_VARIABLE","$params",337],"[",["T_CONSTANT_ENCAPSED_STRING","'_type'",337],"]",["T_WHITESPACE"," ",337],"=",["T_WHITESPACE"," ",337],["T_CONSTANT_ENCAPSED_STRING","'locale'",337],";",["T_WHITESPACE","\n        ",337],["T_VARIABLE","$this",338],["T_OBJECT_OPERATOR","->",338],["T_STRING","updateParamDefaults",338],"(",["T_VARIABLE","$params",338],")",";",["T_WHITESPACE","\n        ",338],["T_VARIABLE","$baseDir",339],["T_WHITESPACE"," ",339],"=",["T_WHITESPACE"," ",339],"(",["T_EMPTY","empty",339],"(",["T_VARIABLE","$params",339],"[",["T_CONSTANT_ENCAPSED_STRING","'_relative'",339],"]",")",["T_WHITESPACE"," ",339],"?",["T_WHITESPACE"," ",339],["T_STRING","Mage",339],["T_DOUBLE_COLON","::",339],["T_STRING","getBaseDir",339],"(",["T_CONSTANT_ENCAPSED_STRING","'design'",339],")",".",["T_STRING","DS",339],["T_WHITESPACE"," ",339],":",["T_WHITESPACE"," ",339],["T_CONSTANT_ENCAPSED_STRING","''",339],")",".",["T_WHITESPACE","\n            ",339],["T_VARIABLE","$params",340],"[",["T_CONSTANT_ENCAPSED_STRING","'_area'",340],"]",".",["T_STRING","DS",340],".",["T_VARIABLE","$params",340],"[",["T_CONSTANT_ENCAPSED_STRING","'_package'",340],"]",".",["T_STRING","DS",340],".",["T_VARIABLE","$params",340],"[",["T_CONSTANT_ENCAPSED_STRING","'_theme'",340],"]",["T_WHITESPACE"," ",340],".",["T_WHITESPACE"," ",340],["T_STRING","DS",340],["T_WHITESPACE"," ",340],".",["T_WHITESPACE"," ",340],["T_CONSTANT_ENCAPSED_STRING","'locale'",340],["T_WHITESPACE"," ",340],".",["T_WHITESPACE"," ",340],["T_STRING","DS",340],["T_WHITESPACE"," ",340],".",["T_WHITESPACE","\n            ",340],["T_STRING","Mage",341],["T_DOUBLE_COLON","::",341],["T_STRING","app",341],"(",")",["T_OBJECT_OPERATOR","->",341],["T_STRING","getLocale",341],"(",")",["T_OBJECT_OPERATOR","->",341],["T_STRING","getLocaleCode",341],"(",")",";",["T_WHITESPACE","\n        ",341],["T_RETURN","return",342],["T_WHITESPACE"," ",342],["T_VARIABLE","$baseDir",342],";",["T_WHITESPACE","\n    ",342],"}",["T_WHITESPACE","\n\n    ",343],["T_PUBLIC","public",345],["T_WHITESPACE"," ",345],["T_FUNCTION","function",345],["T_WHITESPACE"," ",345],["T_STRING","getSkinBaseUrl",345],"(",["T_ARRAY","array",345],["T_WHITESPACE"," ",345],["T_VARIABLE","$params",345],"=",["T_ARRAY","array",345],"(",")",")",["T_WHITESPACE","\n    ",345],"{",["T_WHITESPACE","\n        ",346],["T_VARIABLE","$params",347],"[",["T_CONSTANT_ENCAPSED_STRING","'_type'",347],"]",["T_WHITESPACE"," ",347],"=",["T_WHITESPACE"," ",347],["T_CONSTANT_ENCAPSED_STRING","'skin'",347],";",["T_WHITESPACE","\n        ",347],["T_VARIABLE","$this",348],["T_OBJECT_OPERATOR","->",348],["T_STRING","updateParamDefaults",348],"(",["T_VARIABLE","$params",348],")",";",["T_WHITESPACE","\n        ",348],["T_VARIABLE","$baseUrl",349],["T_WHITESPACE"," ",349],"=",["T_WHITESPACE"," ",349],["T_STRING","Mage",349],["T_DOUBLE_COLON","::",349],["T_STRING","getBaseUrl",349],"(",["T_CONSTANT_ENCAPSED_STRING","'skin'",349],",",["T_WHITESPACE"," ",349],["T_ISSET","isset",349],"(",["T_VARIABLE","$params",349],"[",["T_CONSTANT_ENCAPSED_STRING","'_secure'",349],"]",")","?",["T_BOOL_CAST","(bool)",349],["T_VARIABLE","$params",349],"[",["T_CONSTANT_ENCAPSED_STRING","'_secure'",349],"]",":",["T_STRING","null",349],")",["T_WHITESPACE","\n            ",349],".",["T_VARIABLE","$params",350],"[",["T_CONSTANT_ENCAPSED_STRING","'_area'",350],"]",".",["T_CONSTANT_ENCAPSED_STRING","'\/'",350],".",["T_VARIABLE","$params",350],"[",["T_CONSTANT_ENCAPSED_STRING","'_package'",350],"]",".",["T_CONSTANT_ENCAPSED_STRING","'\/'",350],".",["T_VARIABLE","$params",350],"[",["T_CONSTANT_ENCAPSED_STRING","'_theme'",350],"]",".",["T_CONSTANT_ENCAPSED_STRING","'\/'",350],";",["T_WHITESPACE","\n        ",350],["T_RETURN","return",351],["T_WHITESPACE"," ",351],["T_VARIABLE","$baseUrl",351],";",["T_WHITESPACE","\n    ",351],"}",["T_WHITESPACE","\n\n    ",352],["T_DOC_COMMENT","\/**\n     * Check whether requested file exists in specified theme params\n     *\n     * Possible params:\n     * - _type: layout|template|skin|locale\n     * - _package: design package, if not set = default\n     * - _theme: if not set = default\n     * - _file: path relative to theme root\n     *\n     * @see Mage_Core_Model_Config::getBaseDir\n     * @param string $file\n     * @param array $params\n     * @return string|false\n     *\/",354],["T_WHITESPACE","\n    ",367],["T_PUBLIC","public",368],["T_WHITESPACE"," ",368],["T_FUNCTION","function",368],["T_WHITESPACE"," ",368],["T_STRING","validateFile",368],"(",["T_VARIABLE","$file",368],",",["T_WHITESPACE"," ",368],["T_ARRAY","array",368],["T_WHITESPACE"," ",368],["T_VARIABLE","$params",368],")",["T_WHITESPACE","\n    ",368],"{",["T_WHITESPACE","\n        ",369],["T_VARIABLE","$fileName",370],["T_WHITESPACE"," ",370],"=",["T_WHITESPACE"," ",370],["T_VARIABLE","$this",370],["T_OBJECT_OPERATOR","->",370],["T_STRING","_renderFilename",370],"(",["T_VARIABLE","$file",370],",",["T_WHITESPACE"," ",370],["T_VARIABLE","$params",370],")",";",["T_WHITESPACE","\n        ",370],["T_VARIABLE","$testFile",371],["T_WHITESPACE"," ",371],"=",["T_WHITESPACE"," ",371],"(",["T_EMPTY","empty",371],"(",["T_VARIABLE","$params",371],"[",["T_CONSTANT_ENCAPSED_STRING","'_relative'",371],"]",")",["T_WHITESPACE"," ",371],"?",["T_WHITESPACE"," ",371],["T_CONSTANT_ENCAPSED_STRING","''",371],["T_WHITESPACE"," ",371],":",["T_WHITESPACE"," ",371],["T_STRING","Mage",371],["T_DOUBLE_COLON","::",371],["T_STRING","getBaseDir",371],"(",["T_CONSTANT_ENCAPSED_STRING","'design'",371],")",["T_WHITESPACE"," ",371],".",["T_WHITESPACE"," ",371],["T_STRING","DS",371],")",["T_WHITESPACE"," ",371],".",["T_WHITESPACE"," ",371],["T_VARIABLE","$fileName",371],";",["T_WHITESPACE","\n        ",371],["T_IF","if",372],["T_WHITESPACE"," ",372],"(","!",["T_STRING","file_exists",372],"(",["T_VARIABLE","$testFile",372],")",")",["T_WHITESPACE"," ",372],"{",["T_WHITESPACE","\n            ",372],["T_RETURN","return",373],["T_WHITESPACE"," ",373],["T_STRING","false",373],";",["T_WHITESPACE","\n        ",373],"}",["T_WHITESPACE","\n        ",374],["T_RETURN","return",375],["T_WHITESPACE"," ",375],["T_VARIABLE","$fileName",375],";",["T_WHITESPACE","\n    ",375],"}",["T_WHITESPACE","\n\n    ",376],["T_DOC_COMMENT","\/**\n     * Get filename by specified theme parameters\n     *\n     * @param array $file\n     * @param $params\n     * @return string\n     *\/",378],["T_WHITESPACE","\n    ",384],["T_PROTECTED","protected",385],["T_WHITESPACE"," ",385],["T_FUNCTION","function",385],["T_WHITESPACE"," ",385],["T_STRING","_renderFilename",385],"(",["T_VARIABLE","$file",385],",",["T_WHITESPACE"," ",385],["T_ARRAY","array",385],["T_WHITESPACE"," ",385],["T_VARIABLE","$params",385],")",["T_WHITESPACE","\n    ",385],"{",["T_WHITESPACE","\n        ",386],["T_SWITCH","switch",387],["T_WHITESPACE"," ",387],"(",["T_VARIABLE","$params",387],"[",["T_CONSTANT_ENCAPSED_STRING","'_type'",387],"]",")",["T_WHITESPACE"," ",387],"{",["T_WHITESPACE","\n            ",387],["T_CASE","case",388],["T_WHITESPACE"," ",388],["T_CONSTANT_ENCAPSED_STRING","'skin'",388],":",["T_WHITESPACE","\n                ",388],["T_VARIABLE","$dir",389],["T_WHITESPACE"," ",389],"=",["T_WHITESPACE"," ",389],["T_VARIABLE","$this",389],["T_OBJECT_OPERATOR","->",389],["T_STRING","getSkinBaseDir",389],"(",["T_VARIABLE","$params",389],")",";",["T_WHITESPACE","\n                ",389],["T_BREAK","break",390],";",["T_WHITESPACE","\n\n            ",390],["T_CASE","case",392],["T_WHITESPACE"," ",392],["T_CONSTANT_ENCAPSED_STRING","'locale'",392],":",["T_WHITESPACE","\n                ",392],["T_VARIABLE","$dir",393],["T_WHITESPACE"," ",393],"=",["T_WHITESPACE"," ",393],["T_VARIABLE","$this",393],["T_OBJECT_OPERATOR","->",393],["T_STRING","getLocaleBasedir",393],"(",["T_VARIABLE","$params",393],")",";",["T_WHITESPACE","\n                ",393],["T_BREAK","break",394],";",["T_WHITESPACE","\n\n            ",394],["T_DEFAULT","default",396],":",["T_WHITESPACE","\n                ",396],["T_VARIABLE","$dir",397],["T_WHITESPACE"," ",397],"=",["T_WHITESPACE"," ",397],["T_VARIABLE","$this",397],["T_OBJECT_OPERATOR","->",397],["T_STRING","getBaseDir",397],"(",["T_VARIABLE","$params",397],")",";",["T_WHITESPACE","\n                ",397],["T_BREAK","break",398],";",["T_WHITESPACE","\n        ",398],"}",["T_WHITESPACE","\n        ",399],["T_RETURN","return",400],["T_WHITESPACE"," ",400],["T_VARIABLE","$dir",400],["T_WHITESPACE"," ",400],".",["T_WHITESPACE"," ",400],["T_STRING","DS",400],["T_WHITESPACE"," ",400],".",["T_WHITESPACE"," ",400],["T_VARIABLE","$file",400],";",["T_WHITESPACE","\n    ",400],"}",["T_WHITESPACE","\n\n    ",401],["T_DOC_COMMENT","\/**\n     * Check for files existence by specified scheme\n     *\n     * If fallback enabled, the first found file will be returned. Otherwise the base package \/ default theme file,\n     *   regardless of found or not.\n     * If disabled, the lookup won't be performed to spare filesystem calls.\n     *\n     * @param string $file\n     * @param array &$params\n     * @param array $fallbackScheme\n     * @return string\n     *\/",403],["T_WHITESPACE","\n    ",414],["T_PROTECTED","protected",415],["T_WHITESPACE"," ",415],["T_FUNCTION","function",415],["T_WHITESPACE"," ",415],["T_STRING","_fallback",415],"(",["T_VARIABLE","$file",415],",",["T_WHITESPACE"," ",415],["T_ARRAY","array",415],["T_WHITESPACE"," ",415],"&",["T_VARIABLE","$params",415],",",["T_WHITESPACE"," ",415],["T_ARRAY","array",415],["T_WHITESPACE"," ",415],["T_VARIABLE","$fallbackScheme",415],["T_WHITESPACE"," ",415],"=",["T_WHITESPACE"," ",415],["T_ARRAY","array",415],"(",["T_ARRAY","array",415],"(",")",")",")",["T_WHITESPACE","\n    ",415],"{",["T_WHITESPACE","\n        ",416],["T_IF","if",417],["T_WHITESPACE"," ",417],"(",["T_VARIABLE","$this",417],["T_OBJECT_OPERATOR","->",417],["T_STRING","_shouldFallback",417],")",["T_WHITESPACE"," ",417],"{",["T_WHITESPACE","\n            ",417],["T_FOREACH","foreach",418],["T_WHITESPACE"," ",418],"(",["T_VARIABLE","$fallbackScheme",418],["T_WHITESPACE"," ",418],["T_AS","as",418],["T_WHITESPACE"," ",418],["T_VARIABLE","$try",418],")",["T_WHITESPACE"," ",418],"{",["T_WHITESPACE","\n                ",418],["T_VARIABLE","$params",419],["T_WHITESPACE"," ",419],"=",["T_WHITESPACE"," ",419],["T_STRING","array_merge",419],"(",["T_VARIABLE","$params",419],",",["T_WHITESPACE"," ",419],["T_VARIABLE","$try",419],")",";",["T_WHITESPACE","\n                ",419],["T_VARIABLE","$filename",420],["T_WHITESPACE"," ",420],"=",["T_WHITESPACE"," ",420],["T_VARIABLE","$this",420],["T_OBJECT_OPERATOR","->",420],["T_STRING","validateFile",420],"(",["T_VARIABLE","$file",420],",",["T_WHITESPACE"," ",420],["T_VARIABLE","$params",420],")",";",["T_WHITESPACE","\n                ",420],["T_IF","if",421],["T_WHITESPACE"," ",421],"(",["T_VARIABLE","$filename",421],")",["T_WHITESPACE"," ",421],"{",["T_WHITESPACE","\n                    ",421],["T_RETURN","return",422],["T_WHITESPACE"," ",422],["T_VARIABLE","$filename",422],";",["T_WHITESPACE","\n                ",422],"}",["T_WHITESPACE","\n            ",423],"}",["T_WHITESPACE","\n            ",424],["T_VARIABLE","$params",425],"[",["T_CONSTANT_ENCAPSED_STRING","'_package'",425],"]",["T_WHITESPACE"," ",425],"=",["T_WHITESPACE"," ",425],["T_STRING","self",425],["T_DOUBLE_COLON","::",425],["T_STRING","BASE_PACKAGE",425],";",["T_WHITESPACE","\n            ",425],["T_VARIABLE","$params",426],"[",["T_CONSTANT_ENCAPSED_STRING","'_theme'",426],"]",["T_WHITESPACE","   ",426],"=",["T_WHITESPACE"," ",426],["T_STRING","self",426],["T_DOUBLE_COLON","::",426],["T_STRING","DEFAULT_THEME",426],";",["T_WHITESPACE","\n        ",426],"}",["T_WHITESPACE","\n        ",427],["T_RETURN","return",428],["T_WHITESPACE"," ",428],["T_VARIABLE","$this",428],["T_OBJECT_OPERATOR","->",428],["T_STRING","_renderFilename",428],"(",["T_VARIABLE","$file",428],",",["T_WHITESPACE"," ",428],["T_VARIABLE","$params",428],")",";",["T_WHITESPACE","\n    ",428],"}",["T_WHITESPACE","\n\n    ",429],["T_DOC_COMMENT","\/**\n     * Use this one to get existing file name with fallback to default\n     *\n     * $params['_type'] is required\n     *\n     * @param string $file\n     * @param array $params\n     * @return string\n     *\/",431],["T_WHITESPACE","\n    ",439],["T_PUBLIC","public",440],["T_WHITESPACE"," ",440],["T_FUNCTION","function",440],["T_WHITESPACE"," ",440],["T_STRING","getFilename",440],"(",["T_VARIABLE","$file",440],",",["T_WHITESPACE"," ",440],["T_ARRAY","array",440],["T_WHITESPACE"," ",440],["T_VARIABLE","$params",440],")",["T_WHITESPACE","\n    ",440],"{",["T_WHITESPACE","\n        ",441],["T_STRING","Varien_Profiler",442],["T_DOUBLE_COLON","::",442],["T_STRING","start",442],"(",["T_METHOD_C","__METHOD__",442],")",";",["T_WHITESPACE","\n        ",442],["T_VARIABLE","$this",443],["T_OBJECT_OPERATOR","->",443],["T_STRING","updateParamDefaults",443],"(",["T_VARIABLE","$params",443],")",";",["T_WHITESPACE","\n        ",443],["T_VARIABLE","$result",444],["T_WHITESPACE"," ",444],"=",["T_WHITESPACE"," ",444],["T_VARIABLE","$this",444],["T_OBJECT_OPERATOR","->",444],["T_STRING","_fallback",444],"(",["T_WHITESPACE","\n            ",444],["T_VARIABLE","$file",445],",",["T_WHITESPACE","\n            ",445],["T_VARIABLE","$params",446],",",["T_WHITESPACE","\n            ",446],["T_VARIABLE","$this",447],["T_OBJECT_OPERATOR","->",447],["T_STRING","_fallback",447],["T_OBJECT_OPERATOR","->",447],["T_STRING","getFallbackScheme",447],"(",["T_WHITESPACE","\n                ",447],["T_VARIABLE","$params",448],"[",["T_CONSTANT_ENCAPSED_STRING","'_area'",448],"]",",",["T_WHITESPACE","\n                ",448],["T_VARIABLE","$params",449],"[",["T_CONSTANT_ENCAPSED_STRING","'_package'",449],"]",",",["T_WHITESPACE","\n                ",449],["T_VARIABLE","$params",450],"[",["T_CONSTANT_ENCAPSED_STRING","'_theme'",450],"]",["T_WHITESPACE","\n            ",450],")",["T_WHITESPACE","\n        ",451],")",";",["T_WHITESPACE","\n        ",452],["T_STRING","Varien_Profiler",453],["T_DOUBLE_COLON","::",453],["T_STRING","stop",453],"(",["T_METHOD_C","__METHOD__",453],")",";",["T_WHITESPACE","\n        ",453],["T_RETURN","return",454],["T_WHITESPACE"," ",454],["T_VARIABLE","$result",454],";",["T_WHITESPACE","\n    ",454],"}",["T_WHITESPACE","\n\n    ",455],["T_PUBLIC","public",457],["T_WHITESPACE"," ",457],["T_FUNCTION","function",457],["T_WHITESPACE"," ",457],["T_STRING","getLayoutFilename",457],"(",["T_VARIABLE","$file",457],",",["T_WHITESPACE"," ",457],["T_ARRAY","array",457],["T_WHITESPACE"," ",457],["T_VARIABLE","$params",457],"=",["T_ARRAY","array",457],"(",")",")",["T_WHITESPACE","\n    ",457],"{",["T_WHITESPACE","\n        ",458],["T_VARIABLE","$params",459],"[",["T_CONSTANT_ENCAPSED_STRING","'_type'",459],"]",["T_WHITESPACE"," ",459],"=",["T_WHITESPACE"," ",459],["T_CONSTANT_ENCAPSED_STRING","'layout'",459],";",["T_WHITESPACE","\n        ",459],["T_RETURN","return",460],["T_WHITESPACE"," ",460],["T_VARIABLE","$this",460],["T_OBJECT_OPERATOR","->",460],["T_STRING","getFilename",460],"(",["T_VARIABLE","$file",460],",",["T_WHITESPACE"," ",460],["T_VARIABLE","$params",460],")",";",["T_WHITESPACE","\n    ",460],"}",["T_WHITESPACE","\n\n    ",461],["T_PUBLIC","public",463],["T_WHITESPACE"," ",463],["T_FUNCTION","function",463],["T_WHITESPACE"," ",463],["T_STRING","getTemplateFilename",463],"(",["T_VARIABLE","$file",463],",",["T_WHITESPACE"," ",463],["T_ARRAY","array",463],["T_WHITESPACE"," ",463],["T_VARIABLE","$params",463],"=",["T_ARRAY","array",463],"(",")",")",["T_WHITESPACE","\n    ",463],"{",["T_WHITESPACE","\n        ",464],["T_VARIABLE","$params",465],"[",["T_CONSTANT_ENCAPSED_STRING","'_type'",465],"]",["T_WHITESPACE"," ",465],"=",["T_WHITESPACE"," ",465],["T_CONSTANT_ENCAPSED_STRING","'template'",465],";",["T_WHITESPACE","\n        ",465],["T_RETURN","return",466],["T_WHITESPACE"," ",466],["T_VARIABLE","$this",466],["T_OBJECT_OPERATOR","->",466],["T_STRING","getFilename",466],"(",["T_VARIABLE","$file",466],",",["T_WHITESPACE"," ",466],["T_VARIABLE","$params",466],")",";",["T_WHITESPACE","\n    ",466],"}",["T_WHITESPACE","\n\n    ",467],["T_PUBLIC","public",469],["T_WHITESPACE"," ",469],["T_FUNCTION","function",469],["T_WHITESPACE"," ",469],["T_STRING","getLocaleFileName",469],"(",["T_VARIABLE","$file",469],",",["T_WHITESPACE"," ",469],["T_ARRAY","array",469],["T_WHITESPACE"," ",469],["T_VARIABLE","$params",469],"=",["T_ARRAY","array",469],"(",")",")",["T_WHITESPACE","\n    ",469],"{",["T_WHITESPACE","\n        ",470],["T_VARIABLE","$params",471],"[",["T_CONSTANT_ENCAPSED_STRING","'_type'",471],"]",["T_WHITESPACE"," ",471],"=",["T_WHITESPACE"," ",471],["T_CONSTANT_ENCAPSED_STRING","'locale'",471],";",["T_WHITESPACE","\n        ",471],["T_RETURN","return",472],["T_WHITESPACE"," ",472],["T_VARIABLE","$this",472],["T_OBJECT_OPERATOR","->",472],["T_STRING","getFilename",472],"(",["T_VARIABLE","$file",472],",",["T_WHITESPACE"," ",472],["T_VARIABLE","$params",472],")",";",["T_WHITESPACE","\n    ",472],"}",["T_WHITESPACE","\n\n    ",473],["T_DOC_COMMENT","\/**\n     * Get skin file url\n     *\n     * @param string $file\n     * @param array $params\n     * @return string\n     *\/",475],["T_WHITESPACE","\n    ",481],["T_PUBLIC","public",482],["T_WHITESPACE"," ",482],["T_FUNCTION","function",482],["T_WHITESPACE"," ",482],["T_STRING","getSkinUrl",482],"(",["T_VARIABLE","$file",482],["T_WHITESPACE"," ",482],"=",["T_WHITESPACE"," ",482],["T_STRING","null",482],",",["T_WHITESPACE"," ",482],["T_ARRAY","array",482],["T_WHITESPACE"," ",482],["T_VARIABLE","$params",482],["T_WHITESPACE"," ",482],"=",["T_WHITESPACE"," ",482],["T_ARRAY","array",482],"(",")",")",["T_WHITESPACE","\n    ",482],"{",["T_WHITESPACE","\n        ",483],["T_STRING","Varien_Profiler",484],["T_DOUBLE_COLON","::",484],["T_STRING","start",484],"(",["T_METHOD_C","__METHOD__",484],")",";",["T_WHITESPACE","\n        ",484],["T_IF","if",485],["T_WHITESPACE"," ",485],"(",["T_EMPTY","empty",485],"(",["T_VARIABLE","$params",485],"[",["T_CONSTANT_ENCAPSED_STRING","'_type'",485],"]",")",")",["T_WHITESPACE"," ",485],"{",["T_WHITESPACE","\n            ",485],["T_VARIABLE","$params",486],"[",["T_CONSTANT_ENCAPSED_STRING","'_type'",486],"]",["T_WHITESPACE"," ",486],"=",["T_WHITESPACE"," ",486],["T_CONSTANT_ENCAPSED_STRING","'skin'",486],";",["T_WHITESPACE","\n        ",486],"}",["T_WHITESPACE","\n        ",487],["T_IF","if",488],["T_WHITESPACE"," ",488],"(",["T_EMPTY","empty",488],"(",["T_VARIABLE","$params",488],"[",["T_CONSTANT_ENCAPSED_STRING","'_default'",488],"]",")",")",["T_WHITESPACE"," ",488],"{",["T_WHITESPACE","\n            ",488],["T_VARIABLE","$params",489],"[",["T_CONSTANT_ENCAPSED_STRING","'_default'",489],"]",["T_WHITESPACE"," ",489],"=",["T_WHITESPACE"," ",489],["T_STRING","false",489],";",["T_WHITESPACE","\n        ",489],"}",["T_WHITESPACE","\n        ",490],["T_VARIABLE","$this",491],["T_OBJECT_OPERATOR","->",491],["T_STRING","updateParamDefaults",491],"(",["T_VARIABLE","$params",491],")",";",["T_WHITESPACE","\n        ",491],["T_IF","if",492],["T_WHITESPACE"," ",492],"(","!",["T_EMPTY","empty",492],"(",["T_VARIABLE","$file",492],")",")",["T_WHITESPACE"," ",492],"{",["T_WHITESPACE","\n            ",492],["T_VARIABLE","$result",493],["T_WHITESPACE"," ",493],"=",["T_WHITESPACE"," ",493],["T_VARIABLE","$this",493],["T_OBJECT_OPERATOR","->",493],["T_STRING","_fallback",493],"(",["T_WHITESPACE","\n                ",493],["T_VARIABLE","$file",494],",",["T_WHITESPACE","\n                ",494],["T_VARIABLE","$params",495],",",["T_WHITESPACE","\n                ",495],["T_VARIABLE","$this",496],["T_OBJECT_OPERATOR","->",496],["T_STRING","_fallback",496],["T_OBJECT_OPERATOR","->",496],["T_STRING","getFallbackScheme",496],"(",["T_WHITESPACE","\n                    ",496],["T_VARIABLE","$params",497],"[",["T_CONSTANT_ENCAPSED_STRING","'_area'",497],"]",",",["T_WHITESPACE","\n                    ",497],["T_VARIABLE","$params",498],"[",["T_CONSTANT_ENCAPSED_STRING","'_package'",498],"]",",",["T_WHITESPACE","\n                    ",498],["T_VARIABLE","$params",499],"[",["T_CONSTANT_ENCAPSED_STRING","'_theme'",499],"]",["T_WHITESPACE","\n                ",499],")",["T_WHITESPACE","\n            ",500],")",";",["T_WHITESPACE","\n        ",501],"}",["T_WHITESPACE","\n        ",502],["T_VARIABLE","$result",503],["T_WHITESPACE"," ",503],"=",["T_WHITESPACE"," ",503],["T_VARIABLE","$this",503],["T_OBJECT_OPERATOR","->",503],["T_STRING","getSkinBaseUrl",503],"(",["T_VARIABLE","$params",503],")",["T_WHITESPACE"," ",503],".",["T_WHITESPACE"," ",503],"(",["T_EMPTY","empty",503],"(",["T_VARIABLE","$file",503],")",["T_WHITESPACE"," ",503],"?",["T_WHITESPACE"," ",503],["T_CONSTANT_ENCAPSED_STRING","''",503],["T_WHITESPACE"," ",503],":",["T_WHITESPACE"," ",503],["T_VARIABLE","$file",503],")",";",["T_WHITESPACE","\n        ",503],["T_STRING","Varien_Profiler",504],["T_DOUBLE_COLON","::",504],["T_STRING","stop",504],"(",["T_METHOD_C","__METHOD__",504],")",";",["T_WHITESPACE","\n        ",504],["T_RETURN","return",505],["T_WHITESPACE"," ",505],["T_VARIABLE","$result",505],";",["T_WHITESPACE","\n    ",505],"}",["T_WHITESPACE","\n\n    ",506],["T_DOC_COMMENT","\/**\n     * Design packages list getter\n     * @return array\n     *\/",508],["T_WHITESPACE","\n    ",511],["T_PUBLIC","public",512],["T_WHITESPACE"," ",512],["T_FUNCTION","function",512],["T_WHITESPACE"," ",512],["T_STRING","getPackageList",512],"(",")",["T_WHITESPACE","\n    ",512],"{",["T_WHITESPACE","\n        ",513],["T_VARIABLE","$directory",514],["T_WHITESPACE"," ",514],"=",["T_WHITESPACE"," ",514],["T_STRING","Mage",514],["T_DOUBLE_COLON","::",514],["T_STRING","getBaseDir",514],"(",["T_CONSTANT_ENCAPSED_STRING","'design'",514],")",["T_WHITESPACE"," ",514],".",["T_WHITESPACE"," ",514],["T_STRING","DS",514],["T_WHITESPACE"," ",514],".",["T_WHITESPACE"," ",514],["T_CONSTANT_ENCAPSED_STRING","'frontend'",514],";",["T_WHITESPACE","\n        ",514],["T_RETURN","return",515],["T_WHITESPACE"," ",515],["T_VARIABLE","$this",515],["T_OBJECT_OPERATOR","->",515],["T_STRING","_listDirectories",515],"(",["T_VARIABLE","$directory",515],")",";",["T_WHITESPACE","\n    ",515],"}",["T_WHITESPACE","\n\n    ",516],["T_DOC_COMMENT","\/**\n     * Design package (optional) themes list getter\n     * @param string $package\n     * @return string\n     *\/",518],["T_WHITESPACE","\n    ",522],["T_PUBLIC","public",523],["T_WHITESPACE"," ",523],["T_FUNCTION","function",523],["T_WHITESPACE"," ",523],["T_STRING","getThemeList",523],"(",["T_VARIABLE","$package",523],["T_WHITESPACE"," ",523],"=",["T_WHITESPACE"," ",523],["T_STRING","null",523],")",["T_WHITESPACE","\n    ",523],"{",["T_WHITESPACE","\n        ",524],["T_VARIABLE","$result",525],["T_WHITESPACE"," ",525],"=",["T_WHITESPACE"," ",525],["T_ARRAY","array",525],"(",")",";",["T_WHITESPACE","\n\n        ",525],["T_IF","if",527],["T_WHITESPACE"," ",527],"(",["T_STRING","is_null",527],"(",["T_VARIABLE","$package",527],")",")","{",["T_WHITESPACE","\n            ",527],["T_FOREACH","foreach",528],["T_WHITESPACE"," ",528],"(",["T_VARIABLE","$this",528],["T_OBJECT_OPERATOR","->",528],["T_STRING","getPackageList",528],"(",")",["T_WHITESPACE"," ",528],["T_AS","as",528],["T_WHITESPACE"," ",528],["T_VARIABLE","$package",528],")","{",["T_WHITESPACE","\n                ",528],["T_VARIABLE","$result",529],"[",["T_VARIABLE","$package",529],"]",["T_WHITESPACE"," ",529],"=",["T_WHITESPACE"," ",529],["T_VARIABLE","$this",529],["T_OBJECT_OPERATOR","->",529],["T_STRING","getThemeList",529],"(",["T_VARIABLE","$package",529],")",";",["T_WHITESPACE","\n            ",529],"}",["T_WHITESPACE","\n        ",530],"}",["T_WHITESPACE"," ",531],["T_ELSE","else",531],["T_WHITESPACE"," ",531],"{",["T_WHITESPACE","\n            ",531],["T_VARIABLE","$directory",532],["T_WHITESPACE"," ",532],"=",["T_WHITESPACE"," ",532],["T_STRING","Mage",532],["T_DOUBLE_COLON","::",532],["T_STRING","getBaseDir",532],"(",["T_CONSTANT_ENCAPSED_STRING","'design'",532],")",["T_WHITESPACE"," ",532],".",["T_WHITESPACE"," ",532],["T_STRING","DS",532],["T_WHITESPACE"," ",532],".",["T_WHITESPACE"," ",532],["T_CONSTANT_ENCAPSED_STRING","'frontend'",532],["T_WHITESPACE"," ",532],".",["T_WHITESPACE"," ",532],["T_STRING","DS",532],["T_WHITESPACE"," ",532],".",["T_WHITESPACE"," ",532],["T_VARIABLE","$package",532],";",["T_WHITESPACE","\n            ",532],["T_VARIABLE","$result",533],["T_WHITESPACE"," ",533],"=",["T_WHITESPACE"," ",533],["T_VARIABLE","$this",533],["T_OBJECT_OPERATOR","->",533],["T_STRING","_listDirectories",533],"(",["T_VARIABLE","$directory",533],")",";",["T_WHITESPACE","\n        ",533],"}",["T_WHITESPACE","\n\n        ",534],["T_RETURN","return",536],["T_WHITESPACE"," ",536],["T_VARIABLE","$result",536],";",["T_WHITESPACE","\n    ",536],"}",["T_WHITESPACE","\n\n    ",537],["T_DOC_COMMENT","\/**\n     * Directories lister utility method\n     *\n     * @param string $path\n     * @param string|bool $fullPath\n     * @return array\n     *\/",539],["T_WHITESPACE","\n    ",545],["T_PRIVATE","private",546],["T_WHITESPACE"," ",546],["T_FUNCTION","function",546],["T_WHITESPACE"," ",546],["T_STRING","_listDirectories",546],"(",["T_VARIABLE","$path",546],",",["T_WHITESPACE"," ",546],["T_VARIABLE","$fullPath",546],["T_WHITESPACE"," ",546],"=",["T_WHITESPACE"," ",546],["T_STRING","false",546],")",["T_WHITESPACE","\n    ",546],"{",["T_WHITESPACE","\n        ",547],["T_VARIABLE","$result",548],["T_WHITESPACE"," ",548],"=",["T_WHITESPACE"," ",548],["T_ARRAY","array",548],"(",")",";",["T_WHITESPACE","\n        ",548],["T_VARIABLE","$dir",549],["T_WHITESPACE"," ",549],"=",["T_WHITESPACE"," ",549],["T_STRING","opendir",549],"(",["T_VARIABLE","$path",549],")",";",["T_WHITESPACE","\n        ",549],["T_IF","if",550],["T_WHITESPACE"," ",550],"(",["T_VARIABLE","$dir",550],")",["T_WHITESPACE"," ",550],"{",["T_WHITESPACE","\n            ",550],["T_WHILE","while",551],["T_WHITESPACE"," ",551],"(",["T_VARIABLE","$entry",551],["T_WHITESPACE"," ",551],"=",["T_WHITESPACE"," ",551],["T_STRING","readdir",551],"(",["T_VARIABLE","$dir",551],")",")",["T_WHITESPACE"," ",551],"{",["T_WHITESPACE","\n                ",551],["T_IF","if",552],["T_WHITESPACE"," ",552],"(",["T_STRING","substr",552],"(",["T_VARIABLE","$entry",552],",",["T_WHITESPACE"," ",552],["T_LNUMBER","0",552],",",["T_WHITESPACE"," ",552],["T_LNUMBER","1",552],")",["T_WHITESPACE"," ",552],["T_IS_EQUAL","==",552],["T_WHITESPACE"," ",552],["T_CONSTANT_ENCAPSED_STRING","'.'",552],["T_WHITESPACE"," ",552],["T_BOOLEAN_OR","||",552],["T_WHITESPACE"," ",552],"!",["T_STRING","is_dir",552],"(",["T_VARIABLE","$path",552],["T_WHITESPACE"," ",552],".",["T_WHITESPACE"," ",552],["T_STRING","DS",552],["T_WHITESPACE"," ",552],".",["T_WHITESPACE"," ",552],["T_VARIABLE","$entry",552],")",")","{",["T_WHITESPACE","\n                    ",552],["T_CONTINUE","continue",553],";",["T_WHITESPACE","\n                ",553],"}",["T_WHITESPACE","\n                ",554],["T_IF","if",555],["T_WHITESPACE"," ",555],"(",["T_VARIABLE","$fullPath",555],")",["T_WHITESPACE"," ",555],"{",["T_WHITESPACE","\n                    ",555],["T_VARIABLE","$entry",556],["T_WHITESPACE"," ",556],"=",["T_WHITESPACE"," ",556],["T_VARIABLE","$path",556],["T_WHITESPACE"," ",556],".",["T_WHITESPACE"," ",556],["T_STRING","DS",556],["T_WHITESPACE"," ",556],".",["T_WHITESPACE"," ",556],["T_VARIABLE","$entry",556],";",["T_WHITESPACE","\n                ",556],"}",["T_WHITESPACE","\n                ",557],["T_VARIABLE","$result",558],"[","]",["T_WHITESPACE"," ",558],"=",["T_WHITESPACE"," ",558],["T_VARIABLE","$entry",558],";",["T_WHITESPACE","\n            ",558],"}",["T_WHITESPACE","\n            ",559],["T_UNSET","unset",560],"(",["T_VARIABLE","$entry",560],")",";",["T_WHITESPACE","\n            ",560],["T_STRING","closedir",561],"(",["T_VARIABLE","$dir",561],")",";",["T_WHITESPACE","\n        ",561],"}",["T_WHITESPACE","\n\n        ",562],["T_RETURN","return",564],["T_WHITESPACE"," ",564],["T_VARIABLE","$result",564],";",["T_WHITESPACE","\n    ",564],"}",["T_WHITESPACE","\n\n    ",565],["T_DOC_COMMENT","\/**\n     * Get regex rules from config and check user-agent against them\n     *\n     * Rules must be stored in config as a serialized array(['regexp']=>'...', ['value'] => '...')\n     * Will return false or found string.\n     *\n     * @param string $regexpsConfigPath\n     * @return mixed\n     *\/",567],["T_WHITESPACE","\n    ",575],["T_PROTECTED","protected",576],["T_WHITESPACE"," ",576],["T_FUNCTION","function",576],["T_WHITESPACE"," ",576],["T_STRING","_checkUserAgentAgainstRegexps",576],"(",["T_VARIABLE","$regexpsConfigPath",576],")",["T_WHITESPACE","\n    ",576],"{",["T_WHITESPACE","\n        ",577],["T_IF","if",578],["T_WHITESPACE"," ",578],"(",["T_EMPTY","empty",578],"(",["T_VARIABLE","$_SERVER",578],"[",["T_CONSTANT_ENCAPSED_STRING","'HTTP_USER_AGENT'",578],"]",")",")",["T_WHITESPACE"," ",578],"{",["T_WHITESPACE","\n            ",578],["T_RETURN","return",579],["T_WHITESPACE"," ",579],["T_STRING","false",579],";",["T_WHITESPACE","\n        ",579],"}",["T_WHITESPACE","\n\n        ",580],["T_IF","if",582],["T_WHITESPACE"," ",582],"(","!",["T_EMPTY","empty",582],"(",["T_STRING","self",582],["T_DOUBLE_COLON","::",582],["T_VARIABLE","$_customThemeTypeCache",582],"[",["T_VARIABLE","$regexpsConfigPath",582],"]",")",")",["T_WHITESPACE"," ",582],"{",["T_WHITESPACE","\n            ",582],["T_RETURN","return",583],["T_WHITESPACE"," ",583],["T_STRING","self",583],["T_DOUBLE_COLON","::",583],["T_VARIABLE","$_customThemeTypeCache",583],"[",["T_VARIABLE","$regexpsConfigPath",583],"]",";",["T_WHITESPACE","\n        ",583],"}",["T_WHITESPACE","\n\n        ",584],["T_VARIABLE","$configValueSerialized",586],["T_WHITESPACE"," ",586],"=",["T_WHITESPACE"," ",586],["T_STRING","Mage",586],["T_DOUBLE_COLON","::",586],["T_STRING","getStoreConfig",586],"(",["T_VARIABLE","$regexpsConfigPath",586],",",["T_WHITESPACE"," ",586],["T_VARIABLE","$this",586],["T_OBJECT_OPERATOR","->",586],["T_STRING","getStore",586],"(",")",")",";",["T_WHITESPACE","\n\n        ",586],["T_IF","if",588],["T_WHITESPACE"," ",588],"(","!",["T_VARIABLE","$configValueSerialized",588],")",["T_WHITESPACE"," ",588],"{",["T_WHITESPACE","\n            ",588],["T_RETURN","return",589],["T_WHITESPACE"," ",589],["T_STRING","false",589],";",["T_WHITESPACE","\n        ",589],"}",["T_WHITESPACE","\n\n        ",590],["T_VARIABLE","$regexps",592],["T_WHITESPACE"," ",592],"=",["T_WHITESPACE"," ",592],"@",["T_STRING","unserialize",592],"(",["T_VARIABLE","$configValueSerialized",592],")",";",["T_WHITESPACE","\n\n        ",592],["T_IF","if",594],["T_WHITESPACE"," ",594],"(",["T_EMPTY","empty",594],"(",["T_VARIABLE","$regexps",594],")",")",["T_WHITESPACE"," ",594],"{",["T_WHITESPACE","\n            ",594],["T_RETURN","return",595],["T_WHITESPACE"," ",595],["T_STRING","false",595],";",["T_WHITESPACE","\n        ",595],"}",["T_WHITESPACE","\n\n        ",596],["T_RETURN","return",598],["T_WHITESPACE"," ",598],["T_STRING","self",598],["T_DOUBLE_COLON","::",598],["T_STRING","getPackageByUserAgent",598],"(",["T_VARIABLE","$regexps",598],",",["T_WHITESPACE"," ",598],["T_VARIABLE","$regexpsConfigPath",598],")",";",["T_WHITESPACE","\n    ",598],"}",["T_WHITESPACE","\n\n    ",599],["T_DOC_COMMENT","\/**\n     * Return package name based on design exception rules\n     *\n     * @param array $rules - design exception rules\n     * @param string $regexpsConfigPath\n     * @return bool|string\n     *\/",601],["T_WHITESPACE","\n    ",607],["T_PUBLIC","public",608],["T_WHITESPACE"," ",608],["T_STATIC","static",608],["T_WHITESPACE"," ",608],["T_FUNCTION","function",608],["T_WHITESPACE"," ",608],["T_STRING","getPackageByUserAgent",608],"(",["T_ARRAY","array",608],["T_WHITESPACE"," ",608],["T_VARIABLE","$rules",608],",",["T_WHITESPACE"," ",608],["T_VARIABLE","$regexpsConfigPath",608],["T_WHITESPACE"," ",608],"=",["T_WHITESPACE"," ",608],["T_CONSTANT_ENCAPSED_STRING","'path_mock'",608],")",["T_WHITESPACE","\n    ",608],"{",["T_WHITESPACE","\n        ",609],["T_FOREACH","foreach",610],["T_WHITESPACE"," ",610],"(",["T_VARIABLE","$rules",610],["T_WHITESPACE"," ",610],["T_AS","as",610],["T_WHITESPACE"," ",610],["T_VARIABLE","$rule",610],")",["T_WHITESPACE"," ",610],"{",["T_WHITESPACE","\n            ",610],["T_IF","if",611],["T_WHITESPACE"," ",611],"(","!",["T_EMPTY","empty",611],"(",["T_STRING","self",611],["T_DOUBLE_COLON","::",611],["T_VARIABLE","$_regexMatchCache",611],"[",["T_VARIABLE","$rule",611],"[",["T_CONSTANT_ENCAPSED_STRING","'regexp'",611],"]","]","[",["T_VARIABLE","$_SERVER",611],"[",["T_CONSTANT_ENCAPSED_STRING","'HTTP_USER_AGENT'",611],"]","]",")",")",["T_WHITESPACE"," ",611],"{",["T_WHITESPACE","\n                ",611],["T_STRING","self",612],["T_DOUBLE_COLON","::",612],["T_VARIABLE","$_customThemeTypeCache",612],"[",["T_VARIABLE","$regexpsConfigPath",612],"]",["T_WHITESPACE"," ",612],"=",["T_WHITESPACE"," ",612],["T_VARIABLE","$rule",612],"[",["T_CONSTANT_ENCAPSED_STRING","'value'",612],"]",";",["T_WHITESPACE","\n                ",612],["T_RETURN","return",613],["T_WHITESPACE"," ",613],["T_VARIABLE","$rule",613],"[",["T_CONSTANT_ENCAPSED_STRING","'value'",613],"]",";",["T_WHITESPACE","\n            ",613],"}",["T_WHITESPACE","\n\n            ",614],["T_VARIABLE","$regexp",616],["T_WHITESPACE"," ",616],"=",["T_WHITESPACE"," ",616],["T_CONSTANT_ENCAPSED_STRING","'\/'",616],["T_WHITESPACE"," ",616],".",["T_WHITESPACE"," ",616],["T_STRING","trim",616],"(",["T_VARIABLE","$rule",616],"[",["T_CONSTANT_ENCAPSED_STRING","'regexp'",616],"]",",",["T_WHITESPACE"," ",616],["T_CONSTANT_ENCAPSED_STRING","'\/'",616],")",["T_WHITESPACE"," ",616],".",["T_WHITESPACE"," ",616],["T_CONSTANT_ENCAPSED_STRING","'\/'",616],";",["T_WHITESPACE","\n\n            ",616],["T_IF","if",618],["T_WHITESPACE"," ",618],"(","@",["T_STRING","preg_match",618],"(",["T_VARIABLE","$regexp",618],",",["T_WHITESPACE"," ",618],["T_VARIABLE","$_SERVER",618],"[",["T_CONSTANT_ENCAPSED_STRING","'HTTP_USER_AGENT'",618],"]",")",")",["T_WHITESPACE"," ",618],"{",["T_WHITESPACE","\n                ",618],["T_STRING","self",619],["T_DOUBLE_COLON","::",619],["T_VARIABLE","$_regexMatchCache",619],"[",["T_VARIABLE","$rule",619],"[",["T_CONSTANT_ENCAPSED_STRING","'regexp'",619],"]","]","[",["T_VARIABLE","$_SERVER",619],"[",["T_CONSTANT_ENCAPSED_STRING","'HTTP_USER_AGENT'",619],"]","]",["T_WHITESPACE"," ",619],"=",["T_WHITESPACE"," ",619],["T_STRING","true",619],";",["T_WHITESPACE","\n                ",619],["T_STRING","self",620],["T_DOUBLE_COLON","::",620],["T_VARIABLE","$_customThemeTypeCache",620],"[",["T_VARIABLE","$regexpsConfigPath",620],"]",["T_WHITESPACE"," ",620],"=",["T_WHITESPACE"," ",620],["T_VARIABLE","$rule",620],"[",["T_CONSTANT_ENCAPSED_STRING","'value'",620],"]",";",["T_WHITESPACE","\n                ",620],["T_RETURN","return",621],["T_WHITESPACE"," ",621],["T_VARIABLE","$rule",621],"[",["T_CONSTANT_ENCAPSED_STRING","'value'",621],"]",";",["T_WHITESPACE","\n            ",621],"}",["T_WHITESPACE","\n        ",622],"}",["T_WHITESPACE","\n\n        ",623],["T_RETURN","return",625],["T_WHITESPACE"," ",625],["T_STRING","false",625],";",["T_WHITESPACE","\n    ",625],"}",["T_WHITESPACE","\n\n    ",626],["T_DOC_COMMENT","\/**\n     * Merge specified javascript files and return URL to the merged file on success\n     *\n     * @param $files\n     * @return string\n     *\/",628],["T_WHITESPACE","\n    ",633],["T_PUBLIC","public",634],["T_WHITESPACE"," ",634],["T_FUNCTION","function",634],["T_WHITESPACE"," ",634],["T_STRING","getMergedJsUrl",634],"(",["T_VARIABLE","$files",634],")",["T_WHITESPACE","\n    ",634],"{",["T_WHITESPACE","\n        ",635],["T_VARIABLE","$targetFilename",636],["T_WHITESPACE"," ",636],"=",["T_WHITESPACE"," ",636],["T_STRING","md5",636],"(",["T_STRING","implode",636],"(",["T_CONSTANT_ENCAPSED_STRING","','",636],",",["T_WHITESPACE"," ",636],["T_VARIABLE","$files",636],")",")",["T_WHITESPACE"," ",636],".",["T_WHITESPACE"," ",636],["T_CONSTANT_ENCAPSED_STRING","'.js'",636],";",["T_WHITESPACE","\n        ",636],["T_VARIABLE","$targetDir",637],["T_WHITESPACE"," ",637],"=",["T_WHITESPACE"," ",637],["T_VARIABLE","$this",637],["T_OBJECT_OPERATOR","->",637],["T_STRING","_initMergerDir",637],"(",["T_CONSTANT_ENCAPSED_STRING","'js'",637],")",";",["T_WHITESPACE","\n        ",637],["T_IF","if",638],["T_WHITESPACE"," ",638],"(","!",["T_VARIABLE","$targetDir",638],")",["T_WHITESPACE"," ",638],"{",["T_WHITESPACE","\n            ",638],["T_RETURN","return",639],["T_WHITESPACE"," ",639],["T_CONSTANT_ENCAPSED_STRING","''",639],";",["T_WHITESPACE","\n        ",639],"}",["T_WHITESPACE","\n        ",640],["T_IF","if",641],["T_WHITESPACE"," ",641],"(",["T_VARIABLE","$this",641],["T_OBJECT_OPERATOR","->",641],["T_STRING","_mergeFiles",641],"(",["T_VARIABLE","$files",641],",",["T_WHITESPACE"," ",641],["T_VARIABLE","$targetDir",641],["T_WHITESPACE"," ",641],".",["T_WHITESPACE"," ",641],["T_STRING","DS",641],["T_WHITESPACE"," ",641],".",["T_WHITESPACE"," ",641],["T_VARIABLE","$targetFilename",641],",",["T_WHITESPACE"," ",641],["T_STRING","false",641],",",["T_WHITESPACE"," ",641],["T_STRING","null",641],",",["T_WHITESPACE"," ",641],["T_CONSTANT_ENCAPSED_STRING","'js'",641],")",")",["T_WHITESPACE"," ",641],"{",["T_WHITESPACE","\n            ",641],["T_RETURN","return",642],["T_WHITESPACE"," ",642],["T_STRING","Mage",642],["T_DOUBLE_COLON","::",642],["T_STRING","getBaseUrl",642],"(",["T_CONSTANT_ENCAPSED_STRING","'media'",642],",",["T_WHITESPACE"," ",642],["T_STRING","Mage",642],["T_DOUBLE_COLON","::",642],["T_STRING","app",642],"(",")",["T_OBJECT_OPERATOR","->",642],["T_STRING","getRequest",642],"(",")",["T_OBJECT_OPERATOR","->",642],["T_STRING","isSecure",642],"(",")",")",["T_WHITESPACE"," ",642],".",["T_WHITESPACE"," ",642],["T_CONSTANT_ENCAPSED_STRING","'js\/'",642],["T_WHITESPACE"," ",642],".",["T_WHITESPACE"," ",642],["T_VARIABLE","$targetFilename",642],";",["T_WHITESPACE","\n        ",642],"}",["T_WHITESPACE","\n        ",643],["T_RETURN","return",644],["T_WHITESPACE"," ",644],["T_CONSTANT_ENCAPSED_STRING","''",644],";",["T_WHITESPACE","\n    ",644],"}",["T_WHITESPACE","\n\n    ",645],["T_DOC_COMMENT","\/**\n     * Merge specified css files and return URL to the merged file on success\n     *\n     * @param $files\n     * @return string\n     *\/",647],["T_WHITESPACE","\n    ",652],["T_PUBLIC","public",653],["T_WHITESPACE"," ",653],["T_FUNCTION","function",653],["T_WHITESPACE"," ",653],["T_STRING","getMergedCssUrl",653],"(",["T_VARIABLE","$files",653],")",["T_WHITESPACE","\n    ",653],"{",["T_WHITESPACE","\n        ",654],["T_COMMENT","\/\/ secure or unsecure\n",655],["T_WHITESPACE","        ",656],["T_VARIABLE","$isSecure",656],["T_WHITESPACE"," ",656],"=",["T_WHITESPACE"," ",656],["T_STRING","Mage",656],["T_DOUBLE_COLON","::",656],["T_STRING","app",656],"(",")",["T_OBJECT_OPERATOR","->",656],["T_STRING","getRequest",656],"(",")",["T_OBJECT_OPERATOR","->",656],["T_STRING","isSecure",656],"(",")",";",["T_WHITESPACE","\n        ",656],["T_VARIABLE","$mergerDir",657],["T_WHITESPACE"," ",657],"=",["T_WHITESPACE"," ",657],["T_VARIABLE","$isSecure",657],["T_WHITESPACE"," ",657],"?",["T_WHITESPACE"," ",657],["T_CONSTANT_ENCAPSED_STRING","'css_secure'",657],["T_WHITESPACE"," ",657],":",["T_WHITESPACE"," ",657],["T_CONSTANT_ENCAPSED_STRING","'css'",657],";",["T_WHITESPACE","\n        ",657],["T_VARIABLE","$targetDir",658],["T_WHITESPACE"," ",658],"=",["T_WHITESPACE"," ",658],["T_VARIABLE","$this",658],["T_OBJECT_OPERATOR","->",658],["T_STRING","_initMergerDir",658],"(",["T_VARIABLE","$mergerDir",658],")",";",["T_WHITESPACE","\n        ",658],["T_IF","if",659],["T_WHITESPACE"," ",659],"(","!",["T_VARIABLE","$targetDir",659],")",["T_WHITESPACE"," ",659],"{",["T_WHITESPACE","\n            ",659],["T_RETURN","return",660],["T_WHITESPACE"," ",660],["T_CONSTANT_ENCAPSED_STRING","''",660],";",["T_WHITESPACE","\n        ",660],"}",["T_WHITESPACE","\n\n        ",661],["T_COMMENT","\/\/ base hostname & port\n",663],["T_WHITESPACE","        ",664],["T_VARIABLE","$baseMediaUrl",664],["T_WHITESPACE"," ",664],"=",["T_WHITESPACE"," ",664],["T_STRING","Mage",664],["T_DOUBLE_COLON","::",664],["T_STRING","getBaseUrl",664],"(",["T_CONSTANT_ENCAPSED_STRING","'media'",664],",",["T_WHITESPACE"," ",664],["T_VARIABLE","$isSecure",664],")",";",["T_WHITESPACE","\n        ",664],["T_VARIABLE","$hostname",665],["T_WHITESPACE"," ",665],"=",["T_WHITESPACE"," ",665],["T_STRING","parse_url",665],"(",["T_VARIABLE","$baseMediaUrl",665],",",["T_WHITESPACE"," ",665],["T_STRING","PHP_URL_HOST",665],")",";",["T_WHITESPACE","\n        ",665],["T_VARIABLE","$port",666],["T_WHITESPACE"," ",666],"=",["T_WHITESPACE"," ",666],["T_STRING","parse_url",666],"(",["T_VARIABLE","$baseMediaUrl",666],",",["T_WHITESPACE"," ",666],["T_STRING","PHP_URL_PORT",666],")",";",["T_WHITESPACE","\n        ",666],["T_IF","if",667],["T_WHITESPACE"," ",667],"(",["T_STRING","false",667],["T_WHITESPACE"," ",667],["T_IS_IDENTICAL","===",667],["T_WHITESPACE"," ",667],["T_VARIABLE","$port",667],")",["T_WHITESPACE"," ",667],"{",["T_WHITESPACE","\n            ",667],["T_VARIABLE","$port",668],["T_WHITESPACE"," ",668],"=",["T_WHITESPACE"," ",668],["T_VARIABLE","$isSecure",668],["T_WHITESPACE"," ",668],"?",["T_WHITESPACE"," ",668],["T_LNUMBER","443",668],["T_WHITESPACE"," ",668],":",["T_WHITESPACE"," ",668],["T_LNUMBER","80",668],";",["T_WHITESPACE","\n        ",668],"}",["T_WHITESPACE","\n\n        ",669],["T_COMMENT","\/\/ merge into target file\n",671],["T_WHITESPACE","        ",672],["T_VARIABLE","$targetFilename",672],["T_WHITESPACE"," ",672],"=",["T_WHITESPACE"," ",672],["T_STRING","md5",672],"(",["T_STRING","implode",672],"(",["T_CONSTANT_ENCAPSED_STRING","','",672],",",["T_WHITESPACE"," ",672],["T_VARIABLE","$files",672],")",["T_WHITESPACE"," ",672],".",["T_WHITESPACE"," ",672],"\"",["T_ENCAPSED_AND_WHITESPACE","|",672],["T_CURLY_OPEN","{",672],["T_VARIABLE","$hostname",672],"}",["T_ENCAPSED_AND_WHITESPACE","|",672],["T_CURLY_OPEN","{",672],["T_VARIABLE","$port",672],"}","\"",")",["T_WHITESPACE"," ",672],".",["T_WHITESPACE"," ",672],["T_CONSTANT_ENCAPSED_STRING","'.css'",672],";",["T_WHITESPACE","\n        ",672],["T_VARIABLE","$mergeFilesResult",673],["T_WHITESPACE"," ",673],"=",["T_WHITESPACE"," ",673],["T_VARIABLE","$this",673],["T_OBJECT_OPERATOR","->",673],["T_STRING","_mergeFiles",673],"(",["T_WHITESPACE","\n            ",673],["T_VARIABLE","$files",674],",",["T_WHITESPACE"," ",674],["T_VARIABLE","$targetDir",674],["T_WHITESPACE"," ",674],".",["T_WHITESPACE"," ",674],["T_STRING","DS",674],["T_WHITESPACE"," ",674],".",["T_WHITESPACE"," ",674],["T_VARIABLE","$targetFilename",674],",",["T_WHITESPACE","\n            ",674],["T_STRING","false",675],",",["T_WHITESPACE","\n            ",675],["T_ARRAY","array",676],"(",["T_VARIABLE","$this",676],",",["T_WHITESPACE"," ",676],["T_CONSTANT_ENCAPSED_STRING","'beforeMergeCss'",676],")",",",["T_WHITESPACE","\n            ",676],["T_CONSTANT_ENCAPSED_STRING","'css'",677],["T_WHITESPACE","\n        ",677],")",";",["T_WHITESPACE","\n        ",678],["T_IF","if",679],["T_WHITESPACE"," ",679],"(",["T_VARIABLE","$mergeFilesResult",679],")",["T_WHITESPACE"," ",679],"{",["T_WHITESPACE","\n            ",679],["T_RETURN","return",680],["T_WHITESPACE"," ",680],["T_VARIABLE","$baseMediaUrl",680],["T_WHITESPACE"," ",680],".",["T_WHITESPACE"," ",680],["T_VARIABLE","$mergerDir",680],["T_WHITESPACE"," ",680],".",["T_WHITESPACE"," ",680],["T_CONSTANT_ENCAPSED_STRING","'\/'",680],["T_WHITESPACE"," ",680],".",["T_WHITESPACE"," ",680],["T_VARIABLE","$targetFilename",680],";",["T_WHITESPACE","\n        ",680],"}",["T_WHITESPACE","\n        ",681],["T_RETURN","return",682],["T_WHITESPACE"," ",682],["T_CONSTANT_ENCAPSED_STRING","''",682],";",["T_WHITESPACE","\n    ",682],"}",["T_WHITESPACE","\n\n    ",683],["T_DOC_COMMENT","\/**\n     * Merges files into one and saves it into DB (if DB file storage is on)\n     *\n     * @see Mage_Core_Helper_Data::mergeFiles()\n     * @param array $srcFiles\n     * @param string|bool $targetFile - file path to be written\n     * @param bool $mustMerge\n     * @param callback $beforeMergeCallback\n     * @param array|string $extensionsFilter\n     * @return bool|string\n     *\/",685],["T_WHITESPACE","\n    ",695],["T_PROTECTED","protected",696],["T_WHITESPACE"," ",696],["T_FUNCTION","function",696],["T_WHITESPACE"," ",696],["T_STRING","_mergeFiles",696],"(",["T_ARRAY","array",696],["T_WHITESPACE"," ",696],["T_VARIABLE","$srcFiles",696],",",["T_WHITESPACE"," ",696],["T_VARIABLE","$targetFile",696],["T_WHITESPACE"," ",696],"=",["T_WHITESPACE"," ",696],["T_STRING","false",696],",",["T_WHITESPACE","\n        ",696],["T_VARIABLE","$mustMerge",697],["T_WHITESPACE"," ",697],"=",["T_WHITESPACE"," ",697],["T_STRING","false",697],",",["T_WHITESPACE"," ",697],["T_VARIABLE","$beforeMergeCallback",697],["T_WHITESPACE"," ",697],"=",["T_WHITESPACE"," ",697],["T_STRING","null",697],",",["T_WHITESPACE"," ",697],["T_VARIABLE","$extensionsFilter",697],["T_WHITESPACE"," ",697],"=",["T_WHITESPACE"," ",697],["T_ARRAY","array",697],"(",")",")",["T_WHITESPACE","\n    ",697],"{",["T_WHITESPACE","\n        ",698],["T_IF","if",699],["T_WHITESPACE"," ",699],"(",["T_STRING","Mage",699],["T_DOUBLE_COLON","::",699],["T_STRING","helper",699],"(",["T_CONSTANT_ENCAPSED_STRING","'core\/file_storage_database'",699],")",["T_OBJECT_OPERATOR","->",699],["T_STRING","checkDbUsage",699],"(",")",")",["T_WHITESPACE"," ",699],"{",["T_WHITESPACE","\n            ",699],["T_IF","if",700],["T_WHITESPACE"," ",700],"(","!",["T_STRING","file_exists",700],"(",["T_VARIABLE","$targetFile",700],")",")",["T_WHITESPACE"," ",700],"{",["T_WHITESPACE","\n                ",700],["T_STRING","Mage",701],["T_DOUBLE_COLON","::",701],["T_STRING","helper",701],"(",["T_CONSTANT_ENCAPSED_STRING","'core\/file_storage_database'",701],")",["T_OBJECT_OPERATOR","->",701],["T_STRING","saveFileToFilesystem",701],"(",["T_VARIABLE","$targetFile",701],")",";",["T_WHITESPACE","\n            ",701],"}",["T_WHITESPACE","\n            ",702],["T_IF","if",703],["T_WHITESPACE"," ",703],"(",["T_STRING","file_exists",703],"(",["T_VARIABLE","$targetFile",703],")",")",["T_WHITESPACE"," ",703],"{",["T_WHITESPACE","\n                ",703],["T_VARIABLE","$filemtime",704],["T_WHITESPACE"," ",704],"=",["T_WHITESPACE"," ",704],["T_STRING","filemtime",704],"(",["T_VARIABLE","$targetFile",704],")",";",["T_WHITESPACE","\n            ",704],"}",["T_WHITESPACE"," ",705],["T_ELSE","else",705],["T_WHITESPACE"," ",705],"{",["T_WHITESPACE","\n                ",705],["T_VARIABLE","$filemtime",706],["T_WHITESPACE"," ",706],"=",["T_WHITESPACE"," ",706],["T_STRING","null",706],";",["T_WHITESPACE","\n            ",706],"}",["T_WHITESPACE","\n            ",707],["T_VARIABLE","$result",708],["T_WHITESPACE"," ",708],"=",["T_WHITESPACE"," ",708],["T_STRING","Mage",708],["T_DOUBLE_COLON","::",708],["T_STRING","helper",708],"(",["T_CONSTANT_ENCAPSED_STRING","'core'",708],")",["T_OBJECT_OPERATOR","->",708],["T_STRING","mergeFiles",708],"(",["T_WHITESPACE","\n                ",708],["T_VARIABLE","$srcFiles",709],",",["T_WHITESPACE","\n                ",709],["T_VARIABLE","$targetFile",710],",",["T_WHITESPACE","\n                ",710],["T_VARIABLE","$mustMerge",711],",",["T_WHITESPACE","\n                ",711],["T_VARIABLE","$beforeMergeCallback",712],",",["T_WHITESPACE","\n                ",712],["T_VARIABLE","$extensionsFilter",713],["T_WHITESPACE","\n            ",713],")",";",["T_WHITESPACE","\n            ",714],["T_IF","if",715],["T_WHITESPACE"," ",715],"(",["T_VARIABLE","$result",715],["T_WHITESPACE"," ",715],["T_BOOLEAN_AND","&&",715],["T_WHITESPACE"," ",715],"(",["T_STRING","filemtime",715],"(",["T_VARIABLE","$targetFile",715],")",["T_WHITESPACE"," ",715],">",["T_WHITESPACE"," ",715],["T_VARIABLE","$filemtime",715],")",")",["T_WHITESPACE"," ",715],"{",["T_WHITESPACE","\n                ",715],["T_STRING","Mage",716],["T_DOUBLE_COLON","::",716],["T_STRING","helper",716],"(",["T_CONSTANT_ENCAPSED_STRING","'core\/file_storage_database'",716],")",["T_OBJECT_OPERATOR","->",716],["T_STRING","saveFile",716],"(",["T_VARIABLE","$targetFile",716],")",";",["T_WHITESPACE","\n            ",716],"}",["T_WHITESPACE","\n            ",717],["T_RETURN","return",718],["T_WHITESPACE"," ",718],["T_VARIABLE","$result",718],";",["T_WHITESPACE","\n\n        ",718],"}",["T_WHITESPACE"," ",720],["T_ELSE","else",720],["T_WHITESPACE"," ",720],"{",["T_WHITESPACE","\n            ",720],["T_RETURN","return",721],["T_WHITESPACE"," ",721],["T_STRING","Mage",721],["T_DOUBLE_COLON","::",721],["T_STRING","helper",721],"(",["T_CONSTANT_ENCAPSED_STRING","'core'",721],")",["T_OBJECT_OPERATOR","->",721],["T_STRING","mergeFiles",721],"(",["T_WHITESPACE","\n                ",721],["T_VARIABLE","$srcFiles",722],",",["T_WHITESPACE","\n                ",722],["T_VARIABLE","$targetFile",723],",",["T_WHITESPACE","\n                ",723],["T_VARIABLE","$mustMerge",724],",",["T_WHITESPACE","\n                ",724],["T_VARIABLE","$beforeMergeCallback",725],",",["T_WHITESPACE","\n                ",725],["T_VARIABLE","$extensionsFilter",726],["T_WHITESPACE","\n            ",726],")",";",["T_WHITESPACE","\n        ",727],"}",["T_WHITESPACE","\n    ",728],"}",["T_WHITESPACE","\n\n    ",729],["T_DOC_COMMENT","\/**\n     * Remove all merged js\/css files\n     *\n     * @return  bool\n     *\/",731],["T_WHITESPACE","\n    ",735],["T_PUBLIC","public",736],["T_WHITESPACE"," ",736],["T_FUNCTION","function",736],["T_WHITESPACE"," ",736],["T_STRING","cleanMergedJsCss",736],"(",")",["T_WHITESPACE","\n    ",736],"{",["T_WHITESPACE","\n        ",737],["T_VARIABLE","$result",738],["T_WHITESPACE"," ",738],"=",["T_WHITESPACE"," ",738],["T_BOOL_CAST","(bool)",738],["T_VARIABLE","$this",738],["T_OBJECT_OPERATOR","->",738],["T_STRING","_initMergerDir",738],"(",["T_CONSTANT_ENCAPSED_STRING","'js'",738],",",["T_WHITESPACE"," ",738],["T_STRING","true",738],")",";",["T_WHITESPACE","\n        ",738],["T_VARIABLE","$result",739],["T_WHITESPACE"," ",739],"=",["T_WHITESPACE"," ",739],["T_BOOL_CAST","(bool)",739],["T_VARIABLE","$this",739],["T_OBJECT_OPERATOR","->",739],["T_STRING","_initMergerDir",739],"(",["T_CONSTANT_ENCAPSED_STRING","'css'",739],",",["T_WHITESPACE"," ",739],["T_STRING","true",739],")",["T_WHITESPACE"," ",739],["T_BOOLEAN_AND","&&",739],["T_WHITESPACE"," ",739],["T_VARIABLE","$result",739],";",["T_WHITESPACE","\n        ",739],["T_RETURN","return",740],["T_WHITESPACE"," ",740],["T_BOOL_CAST","(bool)",740],["T_VARIABLE","$this",740],["T_OBJECT_OPERATOR","->",740],["T_STRING","_initMergerDir",740],"(",["T_CONSTANT_ENCAPSED_STRING","'css_secure'",740],",",["T_WHITESPACE"," ",740],["T_STRING","true",740],")",["T_WHITESPACE"," ",740],["T_BOOLEAN_AND","&&",740],["T_WHITESPACE"," ",740],["T_VARIABLE","$result",740],";",["T_WHITESPACE","\n    ",740],"}",["T_WHITESPACE","\n\n    ",741],["T_DOC_COMMENT","\/**\n     * Make sure merger dir exists and writeable\n     * Also can clean it up\n     *\n     * @param string $dirRelativeName\n     * @param bool $cleanup\n     * @return bool\n     *\/",743],["T_WHITESPACE","\n    ",750],["T_PROTECTED","protected",751],["T_WHITESPACE"," ",751],["T_FUNCTION","function",751],["T_WHITESPACE"," ",751],["T_STRING","_initMergerDir",751],"(",["T_VARIABLE","$dirRelativeName",751],",",["T_WHITESPACE"," ",751],["T_VARIABLE","$cleanup",751],["T_WHITESPACE"," ",751],"=",["T_WHITESPACE"," ",751],["T_STRING","false",751],")",["T_WHITESPACE","\n    ",751],"{",["T_WHITESPACE","\n        ",752],["T_VARIABLE","$mediaDir",753],["T_WHITESPACE"," ",753],"=",["T_WHITESPACE"," ",753],["T_STRING","Mage",753],["T_DOUBLE_COLON","::",753],["T_STRING","getBaseDir",753],"(",["T_CONSTANT_ENCAPSED_STRING","'media'",753],")",";",["T_WHITESPACE","\n        ",753],["T_TRY","try",754],["T_WHITESPACE"," ",754],"{",["T_WHITESPACE","\n            ",754],["T_VARIABLE","$dir",755],["T_WHITESPACE"," ",755],"=",["T_WHITESPACE"," ",755],["T_STRING","Mage",755],["T_DOUBLE_COLON","::",755],["T_STRING","getBaseDir",755],"(",["T_CONSTANT_ENCAPSED_STRING","'media'",755],")",["T_WHITESPACE"," ",755],".",["T_WHITESPACE"," ",755],["T_STRING","DS",755],["T_WHITESPACE"," ",755],".",["T_WHITESPACE"," ",755],["T_VARIABLE","$dirRelativeName",755],";",["T_WHITESPACE","\n            ",755],["T_IF","if",756],["T_WHITESPACE"," ",756],"(",["T_VARIABLE","$cleanup",756],")",["T_WHITESPACE"," ",756],"{",["T_WHITESPACE","\n                ",756],["T_STRING","Varien_Io_File",757],["T_DOUBLE_COLON","::",757],["T_STRING","rmdirRecursive",757],"(",["T_VARIABLE","$dir",757],")",";",["T_WHITESPACE","\n                ",757],["T_STRING","Mage",758],["T_DOUBLE_COLON","::",758],["T_STRING","helper",758],"(",["T_CONSTANT_ENCAPSED_STRING","'core\/file_storage_database'",758],")",["T_OBJECT_OPERATOR","->",758],["T_STRING","deleteFolder",758],"(",["T_VARIABLE","$dir",758],")",";",["T_WHITESPACE","\n            ",758],"}",["T_WHITESPACE","\n            ",759],["T_IF","if",760],["T_WHITESPACE"," ",760],"(","!",["T_STRING","is_dir",760],"(",["T_VARIABLE","$dir",760],")",")",["T_WHITESPACE"," ",760],"{",["T_WHITESPACE","\n                ",760],["T_STRING","mkdir",761],"(",["T_VARIABLE","$dir",761],")",";",["T_WHITESPACE","\n            ",761],"}",["T_WHITESPACE","\n            ",762],["T_RETURN","return",763],["T_WHITESPACE"," ",763],["T_STRING","is_writeable",763],"(",["T_VARIABLE","$dir",763],")",["T_WHITESPACE"," ",763],"?",["T_WHITESPACE"," ",763],["T_VARIABLE","$dir",763],["T_WHITESPACE"," ",763],":",["T_WHITESPACE"," ",763],["T_STRING","false",763],";",["T_WHITESPACE","\n        ",763],"}",["T_WHITESPACE"," ",764],["T_CATCH","catch",764],["T_WHITESPACE"," ",764],"(",["T_STRING","Exception",764],["T_WHITESPACE"," ",764],["T_VARIABLE","$e",764],")",["T_WHITESPACE"," ",764],"{",["T_WHITESPACE","\n            ",764],["T_STRING","Mage",765],["T_DOUBLE_COLON","::",765],["T_STRING","logException",765],"(",["T_VARIABLE","$e",765],")",";",["T_WHITESPACE","\n        ",765],"}",["T_WHITESPACE","\n        ",766],["T_RETURN","return",767],["T_WHITESPACE"," ",767],["T_STRING","false",767],";",["T_WHITESPACE","\n    ",767],"}",["T_WHITESPACE","\n\n    ",768],["T_DOC_COMMENT","\/**\n     * Before merge css callback function\n     *\n     * @param string $file\n     * @param string $contents\n     * @return string\n     *\/",770],["T_WHITESPACE","\n    ",776],["T_PUBLIC","public",777],["T_WHITESPACE"," ",777],["T_FUNCTION","function",777],["T_WHITESPACE"," ",777],["T_STRING","beforeMergeCss",777],"(",["T_VARIABLE","$file",777],",",["T_WHITESPACE"," ",777],["T_VARIABLE","$contents",777],")",["T_WHITESPACE","\n    ",777],"{",["T_WHITESPACE","\n       ",778],["T_VARIABLE","$this",779],["T_OBJECT_OPERATOR","->",779],["T_STRING","_setCallbackFileDir",779],"(",["T_VARIABLE","$file",779],")",";",["T_WHITESPACE","\n\n       ",779],["T_VARIABLE","$cssImport",781],["T_WHITESPACE"," ",781],"=",["T_WHITESPACE"," ",781],["T_CONSTANT_ENCAPSED_STRING","'\/@import\\\\s+([\\'\"])(.*?)[\\'\"]\/'",781],";",["T_WHITESPACE","\n       ",781],["T_VARIABLE","$contents",782],["T_WHITESPACE"," ",782],"=",["T_WHITESPACE"," ",782],["T_STRING","preg_replace_callback",782],"(",["T_VARIABLE","$cssImport",782],",",["T_WHITESPACE"," ",782],["T_ARRAY","array",782],"(",["T_VARIABLE","$this",782],",",["T_WHITESPACE"," ",782],["T_CONSTANT_ENCAPSED_STRING","'_cssMergerImportCallback'",782],")",",",["T_WHITESPACE"," ",782],["T_VARIABLE","$contents",782],")",";",["T_WHITESPACE","\n\n       ",782],["T_VARIABLE","$cssUrl",784],["T_WHITESPACE"," ",784],"=",["T_WHITESPACE"," ",784],["T_CONSTANT_ENCAPSED_STRING","'\/url\\\\(\\\\s*(?!data:)([^\\\\)\\\\s]+)\\\\s*\\\\)?\/'",784],";",["T_WHITESPACE","\n       ",784],["T_VARIABLE","$contents",785],["T_WHITESPACE"," ",785],"=",["T_WHITESPACE"," ",785],["T_STRING","preg_replace_callback",785],"(",["T_VARIABLE","$cssUrl",785],",",["T_WHITESPACE"," ",785],["T_ARRAY","array",785],"(",["T_VARIABLE","$this",785],",",["T_WHITESPACE"," ",785],["T_CONSTANT_ENCAPSED_STRING","'_cssMergerUrlCallback'",785],")",",",["T_WHITESPACE"," ",785],["T_VARIABLE","$contents",785],")",";",["T_WHITESPACE","\n\n       ",785],["T_RETURN","return",787],["T_WHITESPACE"," ",787],["T_VARIABLE","$contents",787],";",["T_WHITESPACE","\n    ",787],"}",["T_WHITESPACE","\n\n    ",788],["T_DOC_COMMENT","\/**\n     * Set file dir for css file\n     *\n     * @param string $file\n     *\/",790],["T_WHITESPACE","\n    ",794],["T_PROTECTED","protected",795],["T_WHITESPACE"," ",795],["T_FUNCTION","function",795],["T_WHITESPACE"," ",795],["T_STRING","_setCallbackFileDir",795],"(",["T_VARIABLE","$file",795],")",["T_WHITESPACE","\n    ",795],"{",["T_WHITESPACE","\n       ",796],["T_VARIABLE","$file",797],["T_WHITESPACE"," ",797],"=",["T_WHITESPACE"," ",797],["T_STRING","str_replace",797],"(",["T_STRING","Mage",797],["T_DOUBLE_COLON","::",797],["T_STRING","getBaseDir",797],"(",")",".",["T_STRING","DS",797],",",["T_WHITESPACE"," ",797],["T_CONSTANT_ENCAPSED_STRING","''",797],",",["T_WHITESPACE"," ",797],["T_VARIABLE","$file",797],")",";",["T_WHITESPACE","\n       ",797],["T_VARIABLE","$this",798],["T_OBJECT_OPERATOR","->",798],["T_STRING","_callbackFileDir",798],["T_WHITESPACE"," ",798],"=",["T_WHITESPACE"," ",798],["T_STRING","dirname",798],"(",["T_VARIABLE","$file",798],")",";",["T_WHITESPACE","\n    ",798],"}",["T_WHITESPACE","\n\n    ",799],["T_DOC_COMMENT","\/**\n     * Callback function replaces relative links for @import matches in css file\n     *\n     * @param array $match\n     * @return string\n     *\/",801],["T_WHITESPACE","\n    ",806],["T_PROTECTED","protected",807],["T_WHITESPACE"," ",807],["T_FUNCTION","function",807],["T_WHITESPACE"," ",807],["T_STRING","_cssMergerImportCallback",807],"(",["T_VARIABLE","$match",807],")",["T_WHITESPACE","\n    ",807],"{",["T_WHITESPACE","\n        ",808],["T_VARIABLE","$quote",809],["T_WHITESPACE"," ",809],"=",["T_WHITESPACE"," ",809],["T_VARIABLE","$match",809],"[",["T_LNUMBER","1",809],"]",";",["T_WHITESPACE","\n        ",809],["T_VARIABLE","$uri",810],["T_WHITESPACE"," ",810],"=",["T_WHITESPACE"," ",810],["T_VARIABLE","$this",810],["T_OBJECT_OPERATOR","->",810],["T_STRING","_prepareUrl",810],"(",["T_VARIABLE","$match",810],"[",["T_LNUMBER","2",810],"]",")",";",["T_WHITESPACE","\n\n        ",810],["T_RETURN","return",812],["T_WHITESPACE"," ",812],"\"",["T_ENCAPSED_AND_WHITESPACE","@import ",812],["T_CURLY_OPEN","{",812],["T_VARIABLE","$quote",812],"}",["T_CURLY_OPEN","{",812],["T_VARIABLE","$uri",812],"}",["T_CURLY_OPEN","{",812],["T_VARIABLE","$quote",812],"}","\"",";",["T_WHITESPACE","\n    ",812],"}",["T_WHITESPACE","\n\n    ",813],["T_DOC_COMMENT","\/**\n     * Callback function replaces relative links for url() matches in css file\n     *\n     * @param array $match\n     * @return string\n     *\/",815],["T_WHITESPACE","\n    ",820],["T_PROTECTED","protected",821],["T_WHITESPACE"," ",821],["T_FUNCTION","function",821],["T_WHITESPACE"," ",821],["T_STRING","_cssMergerUrlCallback",821],"(",["T_VARIABLE","$match",821],")",["T_WHITESPACE","\n    ",821],"{",["T_WHITESPACE","\n        ",822],["T_VARIABLE","$quote",823],["T_WHITESPACE"," ",823],"=",["T_WHITESPACE"," ",823],"(",["T_VARIABLE","$match",823],"[",["T_LNUMBER","1",823],"]","[",["T_LNUMBER","0",823],"]",["T_WHITESPACE"," ",823],["T_IS_EQUAL","==",823],["T_WHITESPACE"," ",823],["T_CONSTANT_ENCAPSED_STRING","\"'\"",823],["T_WHITESPACE"," ",823],["T_BOOLEAN_OR","||",823],["T_WHITESPACE"," ",823],["T_VARIABLE","$match",823],"[",["T_LNUMBER","1",823],"]","[",["T_LNUMBER","0",823],"]",["T_WHITESPACE"," ",823],["T_IS_EQUAL","==",823],["T_WHITESPACE"," ",823],["T_CONSTANT_ENCAPSED_STRING","'\"'",823],")",["T_WHITESPACE"," ",823],"?",["T_WHITESPACE"," ",823],["T_VARIABLE","$match",823],"[",["T_LNUMBER","1",823],"]","[",["T_LNUMBER","0",823],"]",["T_WHITESPACE"," ",823],":",["T_WHITESPACE"," ",823],["T_CONSTANT_ENCAPSED_STRING","''",823],";",["T_WHITESPACE","\n        ",823],["T_VARIABLE","$uri",824],["T_WHITESPACE"," ",824],"=",["T_WHITESPACE"," ",824],"(",["T_VARIABLE","$quote",824],["T_WHITESPACE"," ",824],["T_IS_EQUAL","==",824],["T_WHITESPACE"," ",824],["T_CONSTANT_ENCAPSED_STRING","''",824],")",["T_WHITESPACE"," ",824],"?",["T_WHITESPACE"," ",824],["T_VARIABLE","$match",824],"[",["T_LNUMBER","1",824],"]",["T_WHITESPACE"," ",824],":",["T_WHITESPACE"," ",824],["T_STRING","substr",824],"(",["T_VARIABLE","$match",824],"[",["T_LNUMBER","1",824],"]",",",["T_WHITESPACE"," ",824],["T_LNUMBER","1",824],",",["T_WHITESPACE"," ",824],["T_STRING","strlen",824],"(",["T_VARIABLE","$match",824],"[",["T_LNUMBER","1",824],"]",")",["T_WHITESPACE"," ",824],"-",["T_WHITESPACE"," ",824],["T_LNUMBER","2",824],")",";",["T_WHITESPACE","\n        ",824],["T_VARIABLE","$uri",825],["T_WHITESPACE"," ",825],"=",["T_WHITESPACE"," ",825],["T_VARIABLE","$this",825],["T_OBJECT_OPERATOR","->",825],["T_STRING","_prepareUrl",825],"(",["T_VARIABLE","$uri",825],")",";",["T_WHITESPACE","\n\n        ",825],["T_RETURN","return",827],["T_WHITESPACE"," ",827],"\"",["T_ENCAPSED_AND_WHITESPACE","url(",827],["T_CURLY_OPEN","{",827],["T_VARIABLE","$quote",827],"}",["T_CURLY_OPEN","{",827],["T_VARIABLE","$uri",827],"}",["T_CURLY_OPEN","{",827],["T_VARIABLE","$quote",827],"}",["T_ENCAPSED_AND_WHITESPACE",")",827],"\"",";",["T_WHITESPACE","\n    ",827],"}",["T_WHITESPACE","\n\n    ",828],["T_DOC_COMMENT","\/**\n     * Prepare url for css replacement\n     *\n     * @param string $uri\n     * @return string\n     *\/",830],["T_WHITESPACE","\n    ",835],["T_PROTECTED","protected",836],["T_WHITESPACE"," ",836],["T_FUNCTION","function",836],["T_WHITESPACE"," ",836],["T_STRING","_prepareUrl",836],"(",["T_VARIABLE","$uri",836],")",["T_WHITESPACE","\n    ",836],"{",["T_WHITESPACE","\n        ",837],["T_COMMENT","\/\/ check absolute or relative url\n",838],["T_WHITESPACE","        ",839],["T_IF","if",839],["T_WHITESPACE"," ",839],"(","!",["T_STRING","preg_match",839],"(",["T_CONSTANT_ENCAPSED_STRING","'\/^https?:\/i'",839],",",["T_WHITESPACE"," ",839],["T_VARIABLE","$uri",839],")",["T_WHITESPACE"," ",839],["T_BOOLEAN_AND","&&",839],["T_WHITESPACE"," ",839],"!",["T_STRING","preg_match",839],"(",["T_CONSTANT_ENCAPSED_STRING","'\/^\\\/\/i'",839],",",["T_WHITESPACE"," ",839],["T_VARIABLE","$uri",839],")",")",["T_WHITESPACE"," ",839],"{",["T_WHITESPACE","\n            ",839],["T_VARIABLE","$fileDir",840],["T_WHITESPACE"," ",840],"=",["T_WHITESPACE"," ",840],["T_CONSTANT_ENCAPSED_STRING","''",840],";",["T_WHITESPACE","\n            ",840],["T_VARIABLE","$pathParts",841],["T_WHITESPACE"," ",841],"=",["T_WHITESPACE"," ",841],["T_STRING","explode",841],"(",["T_STRING","DS",841],",",["T_WHITESPACE"," ",841],["T_VARIABLE","$uri",841],")",";",["T_WHITESPACE","\n            ",841],["T_VARIABLE","$fileDirParts",842],["T_WHITESPACE"," ",842],"=",["T_WHITESPACE"," ",842],["T_STRING","explode",842],"(",["T_STRING","DS",842],",",["T_WHITESPACE"," ",842],["T_VARIABLE","$this",842],["T_OBJECT_OPERATOR","->",842],["T_STRING","_callbackFileDir",842],")",";",["T_WHITESPACE","\n            ",842],["T_VARIABLE","$store",843],["T_WHITESPACE"," ",843],"=",["T_WHITESPACE"," ",843],["T_VARIABLE","$this",843],["T_OBJECT_OPERATOR","->",843],["T_STRING","getStore",843],"(",")",";",["T_WHITESPACE","\n            ",843],["T_IF","if",844],["T_WHITESPACE"," ",844],"(",["T_STRING","is_int",844],"(",["T_VARIABLE","$store",844],")",")",["T_WHITESPACE"," ",844],"{",["T_WHITESPACE","\n                ",844],["T_VARIABLE","$store",845],["T_WHITESPACE"," ",845],"=",["T_WHITESPACE"," ",845],["T_STRING","Mage",845],["T_DOUBLE_COLON","::",845],["T_STRING","app",845],"(",")",["T_OBJECT_OPERATOR","->",845],["T_STRING","getStore",845],"(",["T_VARIABLE","$store",845],")",";",["T_WHITESPACE","\n            ",845],"}",["T_WHITESPACE","\n            ",846],["T_IF","if",847],["T_WHITESPACE"," ",847],"(",["T_VARIABLE","$store",847],["T_OBJECT_OPERATOR","->",847],["T_STRING","isAdmin",847],"(",")",")",["T_WHITESPACE"," ",847],"{",["T_WHITESPACE","\n                ",847],["T_VARIABLE","$secure",848],["T_WHITESPACE"," ",848],"=",["T_WHITESPACE"," ",848],["T_VARIABLE","$store",848],["T_OBJECT_OPERATOR","->",848],["T_STRING","isAdminUrlSecure",848],"(",")",";",["T_WHITESPACE","\n            ",848],"}",["T_WHITESPACE"," ",849],["T_ELSE","else",849],["T_WHITESPACE"," ",849],"{",["T_WHITESPACE","\n                ",849],["T_VARIABLE","$secure",850],["T_WHITESPACE"," ",850],"=",["T_WHITESPACE"," ",850],["T_VARIABLE","$store",850],["T_OBJECT_OPERATOR","->",850],["T_STRING","isFrontUrlSecure",850],"(",")",["T_WHITESPACE"," ",850],["T_BOOLEAN_AND","&&",850],["T_WHITESPACE"," ",850],["T_STRING","Mage",850],["T_DOUBLE_COLON","::",850],["T_STRING","app",850],"(",")",["T_OBJECT_OPERATOR","->",850],["T_STRING","getRequest",850],"(",")",["T_OBJECT_OPERATOR","->",850],["T_STRING","isSecure",850],"(",")",";",["T_WHITESPACE","\n            ",850],"}",["T_WHITESPACE","\n\n            ",851],["T_IF","if",853],["T_WHITESPACE"," ",853],"(",["T_CONSTANT_ENCAPSED_STRING","'skin'",853],["T_WHITESPACE"," ",853],["T_IS_EQUAL","==",853],["T_WHITESPACE"," ",853],["T_VARIABLE","$fileDirParts",853],"[",["T_LNUMBER","0",853],"]",")",["T_WHITESPACE"," ",853],"{",["T_WHITESPACE","\n                ",853],["T_VARIABLE","$baseUrl",854],["T_WHITESPACE"," ",854],"=",["T_WHITESPACE"," ",854],["T_STRING","Mage",854],["T_DOUBLE_COLON","::",854],["T_STRING","getBaseUrl",854],"(",["T_CONSTANT_ENCAPSED_STRING","'skin'",854],",",["T_WHITESPACE"," ",854],["T_VARIABLE","$secure",854],")",";",["T_WHITESPACE","\n                ",854],["T_VARIABLE","$fileDirParts",855],["T_WHITESPACE"," ",855],"=",["T_WHITESPACE"," ",855],["T_STRING","array_slice",855],"(",["T_VARIABLE","$fileDirParts",855],",",["T_WHITESPACE"," ",855],["T_LNUMBER","1",855],")",";",["T_WHITESPACE","\n            ",855],"}",["T_WHITESPACE"," ",856],["T_ELSEIF","elseif",856],["T_WHITESPACE"," ",856],"(",["T_CONSTANT_ENCAPSED_STRING","'media'",856],["T_WHITESPACE"," ",856],["T_IS_EQUAL","==",856],["T_WHITESPACE"," ",856],["T_VARIABLE","$fileDirParts",856],"[",["T_LNUMBER","0",856],"]",")",["T_WHITESPACE"," ",856],"{",["T_WHITESPACE","\n                ",856],["T_VARIABLE","$baseUrl",857],["T_WHITESPACE"," ",857],"=",["T_WHITESPACE"," ",857],["T_STRING","Mage",857],["T_DOUBLE_COLON","::",857],["T_STRING","getBaseUrl",857],"(",["T_CONSTANT_ENCAPSED_STRING","'media'",857],",",["T_WHITESPACE"," ",857],["T_VARIABLE","$secure",857],")",";",["T_WHITESPACE","\n                ",857],["T_VARIABLE","$fileDirParts",858],["T_WHITESPACE"," ",858],"=",["T_WHITESPACE"," ",858],["T_STRING","array_slice",858],"(",["T_VARIABLE","$fileDirParts",858],",",["T_WHITESPACE"," ",858],["T_LNUMBER","1",858],")",";",["T_WHITESPACE","\n            ",858],"}",["T_WHITESPACE"," ",859],["T_ELSE","else",859],["T_WHITESPACE"," ",859],"{",["T_WHITESPACE","\n                ",859],["T_VARIABLE","$baseUrl",860],["T_WHITESPACE"," ",860],"=",["T_WHITESPACE"," ",860],["T_STRING","Mage",860],["T_DOUBLE_COLON","::",860],["T_STRING","getBaseUrl",860],"(",["T_CONSTANT_ENCAPSED_STRING","'web'",860],",",["T_WHITESPACE"," ",860],["T_VARIABLE","$secure",860],")",";",["T_WHITESPACE","\n            ",860],"}",["T_WHITESPACE","\n\n            ",861],["T_FOREACH","foreach",863],["T_WHITESPACE"," ",863],"(",["T_VARIABLE","$pathParts",863],["T_WHITESPACE"," ",863],["T_AS","as",863],["T_WHITESPACE"," ",863],["T_VARIABLE","$key",863],["T_DOUBLE_ARROW","=>",863],["T_VARIABLE","$part",863],")",["T_WHITESPACE"," ",863],"{",["T_WHITESPACE","\n                ",863],["T_IF","if",864],["T_WHITESPACE"," ",864],"(",["T_VARIABLE","$part",864],["T_WHITESPACE"," ",864],["T_IS_EQUAL","==",864],["T_WHITESPACE"," ",864],["T_CONSTANT_ENCAPSED_STRING","'.'",864],["T_WHITESPACE"," ",864],["T_BOOLEAN_OR","||",864],["T_WHITESPACE"," ",864],["T_VARIABLE","$part",864],["T_WHITESPACE"," ",864],["T_IS_EQUAL","==",864],["T_WHITESPACE"," ",864],["T_CONSTANT_ENCAPSED_STRING","'..'",864],")",["T_WHITESPACE"," ",864],"{",["T_WHITESPACE","\n                    ",864],["T_UNSET","unset",865],"(",["T_VARIABLE","$pathParts",865],"[",["T_VARIABLE","$key",865],"]",")",";",["T_WHITESPACE","\n                ",865],"}",["T_WHITESPACE","\n                ",866],["T_IF","if",867],["T_WHITESPACE"," ",867],"(",["T_VARIABLE","$part",867],["T_WHITESPACE"," ",867],["T_IS_EQUAL","==",867],["T_WHITESPACE"," ",867],["T_CONSTANT_ENCAPSED_STRING","'..'",867],["T_WHITESPACE"," ",867],["T_BOOLEAN_AND","&&",867],["T_WHITESPACE"," ",867],["T_STRING","count",867],"(",["T_VARIABLE","$fileDirParts",867],")",")",["T_WHITESPACE"," ",867],"{",["T_WHITESPACE","\n                    ",867],["T_VARIABLE","$fileDirParts",868],["T_WHITESPACE"," ",868],"=",["T_WHITESPACE"," ",868],["T_STRING","array_slice",868],"(",["T_VARIABLE","$fileDirParts",868],",",["T_WHITESPACE"," ",868],["T_LNUMBER","0",868],",",["T_WHITESPACE"," ",868],["T_STRING","count",868],"(",["T_VARIABLE","$fileDirParts",868],")",["T_WHITESPACE"," ",868],"-",["T_WHITESPACE"," ",868],["T_LNUMBER","1",868],")",";",["T_WHITESPACE","\n                ",868],"}",["T_WHITESPACE","\n            ",869],"}",["T_WHITESPACE","\n\n            ",870],["T_IF","if",872],["T_WHITESPACE"," ",872],"(",["T_STRING","count",872],"(",["T_VARIABLE","$fileDirParts",872],")",")",["T_WHITESPACE"," ",872],"{",["T_WHITESPACE","\n                ",872],["T_VARIABLE","$fileDir",873],["T_WHITESPACE"," ",873],"=",["T_WHITESPACE"," ",873],["T_STRING","implode",873],"(",["T_CONSTANT_ENCAPSED_STRING","'\/'",873],",",["T_WHITESPACE"," ",873],["T_VARIABLE","$fileDirParts",873],")",".",["T_CONSTANT_ENCAPSED_STRING","'\/'",873],";",["T_WHITESPACE","\n            ",873],"}",["T_WHITESPACE","\n\n            ",874],["T_VARIABLE","$uri",876],["T_WHITESPACE"," ",876],"=",["T_WHITESPACE"," ",876],["T_VARIABLE","$baseUrl",876],".",["T_VARIABLE","$fileDir",876],".",["T_STRING","implode",876],"(",["T_CONSTANT_ENCAPSED_STRING","'\/'",876],",",["T_WHITESPACE"," ",876],["T_VARIABLE","$pathParts",876],")",";",["T_WHITESPACE","\n        ",876],"}",["T_WHITESPACE","\n        ",877],["T_RETURN","return",878],["T_WHITESPACE"," ",878],["T_VARIABLE","$uri",878],";",["T_WHITESPACE","\n    ",878],"}",["T_WHITESPACE","\n\n    ",879],["T_DOC_COMMENT","\/**\n     * Default theme getter\n     * @return string\n     * @deprecated since 1.8.2.0\n     *\/",881],["T_WHITESPACE","\n    ",885],["T_PUBLIC","public",886],["T_WHITESPACE"," ",886],["T_FUNCTION","function",886],["T_WHITESPACE"," ",886],["T_STRING","getFallbackTheme",886],"(",")",["T_WHITESPACE","\n    ",886],"{",["T_WHITESPACE","\n        ",887],["T_RETURN","return",888],["T_WHITESPACE"," ",888],["T_STRING","Mage",888],["T_DOUBLE_COLON","::",888],["T_STRING","getStoreConfig",888],"(",["T_CONSTANT_ENCAPSED_STRING","'design\/theme\/default'",888],",",["T_WHITESPACE"," ",888],["T_VARIABLE","$this",888],["T_OBJECT_OPERATOR","->",888],["T_STRING","getStore",888],"(",")",")",";",["T_WHITESPACE","\n    ",888],"}",["T_WHITESPACE","\n",889],"}",["T_WHITESPACE","\n",890]]
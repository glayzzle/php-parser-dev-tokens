[["T_OPEN_TAG","<?php\n",1],["T_DOC_COMMENT","\/**\n * Magento\n *\n * NOTICE OF LICENSE\n *\n * This source file is subject to the Open Software License (OSL 3.0)\n * that is bundled with this package in the file LICENSE.txt.\n * It is also available through the world-wide-web at this URL:\n * http:\/\/opensource.org\/licenses\/osl-3.0.php\n * If you did not receive a copy of the license and are unable to\n * obtain it through the world-wide-web, please send an email\n * to license@magento.com so we can send you a copy immediately.\n *\n * DISCLAIMER\n *\n * Do not edit or add to this file if you wish to upgrade Magento to newer\n * versions in the future. If you wish to customize Magento for your\n * needs please refer to http:\/\/www.magento.com for more information.\n *\n * @category    Mage\n * @package     Mage_Core\n * @copyright  Copyright (c) 2006-2016 X.commerce, Inc. and affiliates (http:\/\/www.magento.com)\n * @license    http:\/\/opensource.org\/licenses\/osl-3.0.php  Open Software License (OSL 3.0)\n *\/",2],["T_WHITESPACE","\n\n\n",25],["T_DOC_COMMENT","\/**\n * Url rewrite model class\n *\n * @method Mage_Core_Model_Resource_Url_Rewrite _getResource()\n * @method Mage_Core_Model_Resource_Url_Rewrite getResource()\n * @method Mage_Core_Model_Url_Rewrite setStoreId(int $value)\n * @method int getCategoryId()\n * @method Mage_Core_Model_Url_Rewrite setCategoryId(int $value)\n * @method int getProductId()\n * @method Mage_Core_Model_Url_Rewrite setProductId(int $value)\n * @method string getIdPath()\n * @method Mage_Core_Model_Url_Rewrite setIdPath(string $value)\n * @method string getRequestPath()\n * @method Mage_Core_Model_Url_Rewrite setRequestPath(string $value)\n * @method string getTargetPath()\n * @method Mage_Core_Model_Url_Rewrite setTargetPath(string $value)\n * @method int getIsSystem()\n * @method Mage_Core_Model_Url_Rewrite setIsSystem(int $value)\n * @method string getOptions()\n * @method Mage_Core_Model_Url_Rewrite setOptions(string $value)\n * @method string getDescription()\n * @method Mage_Core_Model_Url_Rewrite setDescription(string $value)\n *\n * @category    Mage\n * @package     Mage_Core\n * @author      Magento Core Team <core@magentocommerce.com>\n *\/",28],["T_WHITESPACE","\n",54],["T_CLASS","class",55],["T_WHITESPACE"," ",55],["T_STRING","Mage_Core_Model_Url_Rewrite",55],["T_WHITESPACE"," ",55],["T_EXTENDS","extends",55],["T_WHITESPACE"," ",55],["T_STRING","Mage_Core_Model_Abstract",55],["T_WHITESPACE"," ",55],["T_IMPLEMENTS","implements",55],["T_WHITESPACE"," ",55],["T_STRING","Mage_Core_Model_Url_Rewrite_Interface",55],["T_WHITESPACE","\n",55],"{",["T_WHITESPACE","\n    ",56],["T_CONST","const",57],["T_WHITESPACE"," ",57],["T_STRING","TYPE_CATEGORY",57],["T_WHITESPACE"," ",57],"=",["T_WHITESPACE"," ",57],["T_LNUMBER","1",57],";",["T_WHITESPACE","\n    ",57],["T_CONST","const",58],["T_WHITESPACE"," ",58],["T_STRING","TYPE_PRODUCT",58],["T_WHITESPACE","  ",58],"=",["T_WHITESPACE"," ",58],["T_LNUMBER","2",58],";",["T_WHITESPACE","\n    ",58],["T_CONST","const",59],["T_WHITESPACE"," ",59],["T_STRING","TYPE_CUSTOM",59],["T_WHITESPACE","   ",59],"=",["T_WHITESPACE"," ",59],["T_LNUMBER","3",59],";",["T_WHITESPACE","\n    ",59],["T_CONST","const",60],["T_WHITESPACE"," ",60],["T_STRING","REWRITE_REQUEST_PATH_ALIAS",60],["T_WHITESPACE"," ",60],"=",["T_WHITESPACE"," ",60],["T_CONSTANT_ENCAPSED_STRING","'rewrite_request_path'",60],";",["T_WHITESPACE","\n\n    ",60],["T_DOC_COMMENT","\/**\n     * Cache tag for clear cache in after save and after delete\n     *\n     * @var mixed | array | string | boolean\n     *\/",62],["T_WHITESPACE","\n    ",66],["T_PROTECTED","protected",67],["T_WHITESPACE"," ",67],["T_VARIABLE","$_cacheTag",67],["T_WHITESPACE"," ",67],"=",["T_WHITESPACE"," ",67],["T_STRING","false",67],";",["T_WHITESPACE","\n\n    ",67],["T_PROTECTED","protected",69],["T_WHITESPACE"," ",69],["T_FUNCTION","function",69],["T_WHITESPACE"," ",69],["T_STRING","_construct",69],"(",")",["T_WHITESPACE","\n    ",69],"{",["T_WHITESPACE","\n        ",70],["T_VARIABLE","$this",71],["T_OBJECT_OPERATOR","->",71],["T_STRING","_init",71],"(",["T_CONSTANT_ENCAPSED_STRING","'core\/url_rewrite'",71],")",";",["T_WHITESPACE","\n    ",71],"}",["T_WHITESPACE","\n\n    ",72],["T_DOC_COMMENT","\/**\n     * Clean cache for front-end menu\n     *\n     * @return  Mage_Core_Model_Url_Rewrite\n     *\/",74],["T_WHITESPACE","\n    ",78],["T_PROTECTED","protected",79],["T_WHITESPACE"," ",79],["T_FUNCTION","function",79],["T_WHITESPACE"," ",79],["T_STRING","_afterSave",79],"(",")",["T_WHITESPACE","\n    ",79],"{",["T_WHITESPACE","\n        ",80],["T_IF","if",81],["T_WHITESPACE"," ",81],"(",["T_VARIABLE","$this",81],["T_OBJECT_OPERATOR","->",81],["T_STRING","hasCategoryId",81],"(",")",")",["T_WHITESPACE"," ",81],"{",["T_WHITESPACE","\n            ",81],["T_VARIABLE","$this",82],["T_OBJECT_OPERATOR","->",82],["T_STRING","_cacheTag",82],["T_WHITESPACE"," ",82],"=",["T_WHITESPACE"," ",82],["T_ARRAY","array",82],"(",["T_STRING","Mage_Catalog_Model_Category",82],["T_DOUBLE_COLON","::",82],["T_STRING","CACHE_TAG",82],",",["T_WHITESPACE"," ",82],["T_STRING","Mage_Core_Model_Store_Group",82],["T_DOUBLE_COLON","::",82],["T_STRING","CACHE_TAG",82],")",";",["T_WHITESPACE","\n        ",82],"}",["T_WHITESPACE","\n\n        ",83],["T_STRING","parent",85],["T_DOUBLE_COLON","::",85],["T_STRING","_afterSave",85],"(",")",";",["T_WHITESPACE","\n\n        ",85],["T_RETURN","return",87],["T_WHITESPACE"," ",87],["T_VARIABLE","$this",87],";",["T_WHITESPACE","\n    ",87],"}",["T_WHITESPACE","\n\n    ",88],["T_DOC_COMMENT","\/**\n     * Load rewrite information for request\n     * If $path is array - we must load possible records and choose one matching earlier record in array\n     *\n     * @param   mixed $path\n     * @return  Mage_Core_Model_Url_Rewrite\n     *\/",90],["T_WHITESPACE","\n    ",96],["T_PUBLIC","public",97],["T_WHITESPACE"," ",97],["T_FUNCTION","function",97],["T_WHITESPACE"," ",97],["T_STRING","loadByRequestPath",97],"(",["T_VARIABLE","$path",97],")",["T_WHITESPACE","\n    ",97],"{",["T_WHITESPACE","\n        ",98],["T_VARIABLE","$this",99],["T_OBJECT_OPERATOR","->",99],["T_STRING","setId",99],"(",["T_STRING","null",99],")",";",["T_WHITESPACE","\n        ",99],["T_VARIABLE","$this",100],["T_OBJECT_OPERATOR","->",100],["T_STRING","_getResource",100],"(",")",["T_OBJECT_OPERATOR","->",100],["T_STRING","loadByRequestPath",100],"(",["T_VARIABLE","$this",100],",",["T_WHITESPACE"," ",100],["T_VARIABLE","$path",100],")",";",["T_WHITESPACE","\n        ",100],["T_VARIABLE","$this",101],["T_OBJECT_OPERATOR","->",101],["T_STRING","_afterLoad",101],"(",")",";",["T_WHITESPACE","\n        ",101],["T_VARIABLE","$this",102],["T_OBJECT_OPERATOR","->",102],["T_STRING","setOrigData",102],"(",")",";",["T_WHITESPACE","\n        ",102],["T_VARIABLE","$this",103],["T_OBJECT_OPERATOR","->",103],["T_STRING","_hasDataChanges",103],["T_WHITESPACE"," ",103],"=",["T_WHITESPACE"," ",103],["T_STRING","false",103],";",["T_WHITESPACE","\n        ",103],["T_RETURN","return",104],["T_WHITESPACE"," ",104],["T_VARIABLE","$this",104],";",["T_WHITESPACE","\n    ",104],"}",["T_WHITESPACE","\n\n    ",105],["T_PUBLIC","public",107],["T_WHITESPACE"," ",107],["T_FUNCTION","function",107],["T_WHITESPACE"," ",107],["T_STRING","loadByIdPath",107],"(",["T_VARIABLE","$path",107],")",["T_WHITESPACE","\n    ",107],"{",["T_WHITESPACE","\n        ",108],["T_VARIABLE","$this",109],["T_OBJECT_OPERATOR","->",109],["T_STRING","setId",109],"(",["T_STRING","null",109],")",["T_OBJECT_OPERATOR","->",109],["T_STRING","load",109],"(",["T_VARIABLE","$path",109],",",["T_WHITESPACE"," ",109],["T_CONSTANT_ENCAPSED_STRING","'id_path'",109],")",";",["T_WHITESPACE","\n        ",109],["T_RETURN","return",110],["T_WHITESPACE"," ",110],["T_VARIABLE","$this",110],";",["T_WHITESPACE","\n    ",110],"}",["T_WHITESPACE","\n\n    ",111],["T_PUBLIC","public",113],["T_WHITESPACE"," ",113],["T_FUNCTION","function",113],["T_WHITESPACE"," ",113],["T_STRING","loadByTags",113],"(",["T_VARIABLE","$tags",113],")",["T_WHITESPACE","\n    ",113],"{",["T_WHITESPACE","\n        ",114],["T_VARIABLE","$this",115],["T_OBJECT_OPERATOR","->",115],["T_STRING","setId",115],"(",["T_STRING","null",115],")",";",["T_WHITESPACE","\n\n        ",115],["T_VARIABLE","$loadTags",117],["T_WHITESPACE"," ",117],"=",["T_WHITESPACE"," ",117],["T_STRING","is_array",117],"(",["T_VARIABLE","$tags",117],")",["T_WHITESPACE"," ",117],"?",["T_WHITESPACE"," ",117],["T_VARIABLE","$tags",117],["T_WHITESPACE"," ",117],":",["T_WHITESPACE"," ",117],["T_STRING","explode",117],"(",["T_CONSTANT_ENCAPSED_STRING","','",117],",",["T_WHITESPACE"," ",117],["T_VARIABLE","$tags",117],")",";",["T_WHITESPACE","\n\n        ",117],["T_VARIABLE","$search",119],["T_WHITESPACE"," ",119],"=",["T_WHITESPACE"," ",119],["T_VARIABLE","$this",119],["T_OBJECT_OPERATOR","->",119],["T_STRING","getResourceCollection",119],"(",")",";",["T_WHITESPACE","\n        ",119],["T_FOREACH","foreach",120],["T_WHITESPACE"," ",120],"(",["T_VARIABLE","$loadTags",120],["T_WHITESPACE"," ",120],["T_AS","as",120],["T_WHITESPACE"," ",120],["T_VARIABLE","$k",120],["T_DOUBLE_ARROW","=>",120],["T_VARIABLE","$t",120],")",["T_WHITESPACE"," ",120],"{",["T_WHITESPACE","\n            ",120],["T_IF","if",121],["T_WHITESPACE"," ",121],"(","!",["T_STRING","is_numeric",121],"(",["T_VARIABLE","$k",121],")",")",["T_WHITESPACE"," ",121],"{",["T_WHITESPACE","\n                ",121],["T_VARIABLE","$t",122],["T_WHITESPACE"," ",122],"=",["T_WHITESPACE"," ",122],["T_VARIABLE","$k",122],".",["T_CONSTANT_ENCAPSED_STRING","'='",122],".",["T_VARIABLE","$t",122],";",["T_WHITESPACE","\n            ",122],"}",["T_WHITESPACE","\n            ",123],["T_VARIABLE","$search",124],["T_OBJECT_OPERATOR","->",124],["T_STRING","addTagsFilter",124],"(",["T_VARIABLE","$t",124],")",";",["T_WHITESPACE","\n        ",124],"}",["T_WHITESPACE","\n        ",125],["T_IF","if",126],["T_WHITESPACE"," ",126],"(","!",["T_STRING","is_null",126],"(",["T_VARIABLE","$this",126],["T_OBJECT_OPERATOR","->",126],["T_STRING","getStoreId",126],"(",")",")",")",["T_WHITESPACE"," ",126],"{",["T_WHITESPACE","\n            ",126],["T_VARIABLE","$search",127],["T_OBJECT_OPERATOR","->",127],["T_STRING","addStoreFilter",127],"(",["T_VARIABLE","$this",127],["T_OBJECT_OPERATOR","->",127],["T_STRING","getStoreId",127],"(",")",")",";",["T_WHITESPACE","\n        ",127],"}",["T_WHITESPACE","\n\n        ",128],["T_VARIABLE","$search",130],["T_OBJECT_OPERATOR","->",130],["T_STRING","setPageSize",130],"(",["T_LNUMBER","1",130],")",["T_OBJECT_OPERATOR","->",130],["T_STRING","load",130],"(",")",";",["T_WHITESPACE","\n\n        ",130],["T_IF","if",132],["T_WHITESPACE"," ",132],"(",["T_VARIABLE","$search",132],["T_OBJECT_OPERATOR","->",132],["T_STRING","getSize",132],"(",")",">",["T_LNUMBER","0",132],")",["T_WHITESPACE"," ",132],"{",["T_WHITESPACE","\n            ",132],["T_FOREACH","foreach",133],["T_WHITESPACE"," ",133],"(",["T_VARIABLE","$search",133],["T_WHITESPACE"," ",133],["T_AS","as",133],["T_WHITESPACE"," ",133],["T_VARIABLE","$rewrite",133],")",["T_WHITESPACE"," ",133],"{",["T_WHITESPACE","\n                ",133],["T_VARIABLE","$this",134],["T_OBJECT_OPERATOR","->",134],["T_STRING","setData",134],"(",["T_VARIABLE","$rewrite",134],["T_OBJECT_OPERATOR","->",134],["T_STRING","getData",134],"(",")",")",";",["T_WHITESPACE","\n            ",134],"}",["T_WHITESPACE","\n        ",135],"}",["T_WHITESPACE","\n\n        ",136],["T_RETURN","return",138],["T_WHITESPACE"," ",138],["T_VARIABLE","$this",138],";",["T_WHITESPACE","\n    ",138],"}",["T_WHITESPACE","\n\n    ",139],["T_PUBLIC","public",141],["T_WHITESPACE"," ",141],["T_FUNCTION","function",141],["T_WHITESPACE"," ",141],["T_STRING","hasOption",141],"(",["T_VARIABLE","$key",141],")",["T_WHITESPACE","\n    ",141],"{",["T_WHITESPACE","\n        ",142],["T_VARIABLE","$optArr",143],["T_WHITESPACE"," ",143],"=",["T_WHITESPACE"," ",143],["T_STRING","explode",143],"(",["T_CONSTANT_ENCAPSED_STRING","','",143],",",["T_WHITESPACE"," ",143],["T_VARIABLE","$this",143],["T_OBJECT_OPERATOR","->",143],["T_STRING","getOptions",143],"(",")",")",";",["T_WHITESPACE","\n\n        ",143],["T_RETURN","return",145],["T_WHITESPACE"," ",145],["T_STRING","array_search",145],"(",["T_VARIABLE","$key",145],",",["T_WHITESPACE"," ",145],["T_VARIABLE","$optArr",145],")",["T_WHITESPACE"," ",145],["T_IS_NOT_IDENTICAL","!==",145],["T_WHITESPACE"," ",145],["T_STRING","false",145],";",["T_WHITESPACE","\n    ",145],"}",["T_WHITESPACE","\n\n    ",146],["T_PUBLIC","public",148],["T_WHITESPACE"," ",148],["T_FUNCTION","function",148],["T_WHITESPACE"," ",148],["T_STRING","addTag",148],"(",["T_VARIABLE","$tags",148],")",["T_WHITESPACE","\n    ",148],"{",["T_WHITESPACE","\n        ",149],["T_VARIABLE","$curTags",150],["T_WHITESPACE"," ",150],"=",["T_WHITESPACE"," ",150],["T_VARIABLE","$this",150],["T_OBJECT_OPERATOR","->",150],["T_STRING","getTags",150],"(",")",";",["T_WHITESPACE","\n\n        ",150],["T_VARIABLE","$addTags",152],["T_WHITESPACE"," ",152],"=",["T_WHITESPACE"," ",152],["T_STRING","is_array",152],"(",["T_VARIABLE","$tags",152],")",["T_WHITESPACE"," ",152],"?",["T_WHITESPACE"," ",152],["T_VARIABLE","$tags",152],["T_WHITESPACE"," ",152],":",["T_WHITESPACE"," ",152],["T_STRING","explode",152],"(",["T_CONSTANT_ENCAPSED_STRING","','",152],",",["T_WHITESPACE"," ",152],["T_VARIABLE","$tags",152],")",";",["T_WHITESPACE","\n\n        ",152],["T_FOREACH","foreach",154],["T_WHITESPACE"," ",154],"(",["T_VARIABLE","$addTags",154],["T_WHITESPACE"," ",154],["T_AS","as",154],["T_WHITESPACE"," ",154],["T_VARIABLE","$k",154],["T_DOUBLE_ARROW","=>",154],["T_VARIABLE","$t",154],")",["T_WHITESPACE"," ",154],"{",["T_WHITESPACE","\n            ",154],["T_IF","if",155],["T_WHITESPACE"," ",155],"(","!",["T_STRING","is_numeric",155],"(",["T_VARIABLE","$k",155],")",")",["T_WHITESPACE"," ",155],"{",["T_WHITESPACE","\n                ",155],["T_VARIABLE","$t",156],["T_WHITESPACE"," ",156],"=",["T_WHITESPACE"," ",156],["T_VARIABLE","$k",156],".",["T_CONSTANT_ENCAPSED_STRING","'='",156],".",["T_VARIABLE","$t",156],";",["T_WHITESPACE","\n            ",156],"}",["T_WHITESPACE","\n            ",157],["T_IF","if",158],["T_WHITESPACE"," ",158],"(","!",["T_STRING","in_array",158],"(",["T_VARIABLE","$t",158],",",["T_WHITESPACE"," ",158],["T_VARIABLE","$curTags",158],")",")",["T_WHITESPACE"," ",158],"{",["T_WHITESPACE","\n                ",158],["T_VARIABLE","$curTags",159],"[","]",["T_WHITESPACE"," ",159],"=",["T_WHITESPACE"," ",159],["T_VARIABLE","$t",159],";",["T_WHITESPACE","\n            ",159],"}",["T_WHITESPACE","\n        ",160],"}",["T_WHITESPACE","\n\n        ",161],["T_VARIABLE","$this",163],["T_OBJECT_OPERATOR","->",163],["T_STRING","setTags",163],"(",["T_VARIABLE","$curTags",163],")",";",["T_WHITESPACE","\n\n        ",163],["T_RETURN","return",165],["T_WHITESPACE"," ",165],["T_VARIABLE","$this",165],";",["T_WHITESPACE","\n    ",165],"}",["T_WHITESPACE","\n\n    ",166],["T_PUBLIC","public",168],["T_WHITESPACE"," ",168],["T_FUNCTION","function",168],["T_WHITESPACE"," ",168],["T_STRING","removeTag",168],"(",["T_VARIABLE","$tags",168],")",["T_WHITESPACE","\n    ",168],"{",["T_WHITESPACE","\n        ",169],["T_VARIABLE","$curTags",170],["T_WHITESPACE"," ",170],"=",["T_WHITESPACE"," ",170],["T_VARIABLE","$this",170],["T_OBJECT_OPERATOR","->",170],["T_STRING","getTags",170],"(",")",";",["T_WHITESPACE","\n\n        ",170],["T_VARIABLE","$removeTags",172],["T_WHITESPACE"," ",172],"=",["T_WHITESPACE"," ",172],["T_STRING","is_array",172],"(",["T_VARIABLE","$tags",172],")",["T_WHITESPACE"," ",172],"?",["T_WHITESPACE"," ",172],["T_VARIABLE","$tags",172],["T_WHITESPACE"," ",172],":",["T_WHITESPACE"," ",172],["T_STRING","explode",172],"(",["T_CONSTANT_ENCAPSED_STRING","','",172],",",["T_WHITESPACE"," ",172],["T_VARIABLE","$tags",172],")",";",["T_WHITESPACE","\n\n        ",172],["T_FOREACH","foreach",174],["T_WHITESPACE"," ",174],"(",["T_VARIABLE","$removeTags",174],["T_WHITESPACE"," ",174],["T_AS","as",174],["T_WHITESPACE"," ",174],["T_VARIABLE","$t",174],")",["T_WHITESPACE"," ",174],"{",["T_WHITESPACE","\n            ",174],["T_IF","if",175],["T_WHITESPACE"," ",175],"(","!",["T_STRING","is_numeric",175],"(",["T_VARIABLE","$k",175],")",")",["T_WHITESPACE"," ",175],"{",["T_WHITESPACE","\n                ",175],["T_VARIABLE","$t",176],["T_WHITESPACE"," ",176],"=",["T_WHITESPACE"," ",176],["T_VARIABLE","$k",176],".",["T_CONSTANT_ENCAPSED_STRING","'='",176],".",["T_VARIABLE","$t",176],";",["T_WHITESPACE","\n            ",176],"}",["T_WHITESPACE","\n            ",177],["T_IF","if",178],["T_WHITESPACE"," ",178],"(",["T_VARIABLE","$key",178],["T_WHITESPACE"," ",178],"=",["T_WHITESPACE"," ",178],["T_STRING","array_search",178],"(",["T_VARIABLE","$t",178],",",["T_WHITESPACE"," ",178],["T_VARIABLE","$curTags",178],")",")",["T_WHITESPACE"," ",178],"{",["T_WHITESPACE","\n                ",178],["T_UNSET","unset",179],"(",["T_VARIABLE","$curTags",179],"[",["T_VARIABLE","$key",179],"]",")",";",["T_WHITESPACE","\n            ",179],"}",["T_WHITESPACE","\n        ",180],"}",["T_WHITESPACE","\n\n        ",181],["T_VARIABLE","$this",183],["T_OBJECT_OPERATOR","->",183],["T_STRING","setTags",183],"(",["T_CONSTANT_ENCAPSED_STRING","','",183],",",["T_WHITESPACE"," ",183],["T_VARIABLE","$curTags",183],")",";",["T_WHITESPACE","\n\n        ",183],["T_RETURN","return",185],["T_WHITESPACE"," ",185],["T_VARIABLE","$this",185],";",["T_WHITESPACE","\n    ",185],"}",["T_WHITESPACE","\n\n    ",186],["T_DOC_COMMENT","\/**\n     * Implement logic of custom rewrites\n     *\n     * @param   Zend_Controller_Request_Http $request\n     * @param   Zend_Controller_Response_Http $response\n     * @return  Mage_Core_Model_Url\n     * @deprecated since 1.7.0.2. Refactored and moved to Mage_Core_Controller_Request_Rewrite\n     *\/",188],["T_WHITESPACE","\n    ",195],["T_PUBLIC","public",196],["T_WHITESPACE"," ",196],["T_FUNCTION","function",196],["T_WHITESPACE"," ",196],["T_STRING","rewrite",196],"(",["T_STRING","Zend_Controller_Request_Http",196],["T_WHITESPACE"," ",196],["T_VARIABLE","$request",196],"=",["T_STRING","null",196],",",["T_WHITESPACE"," ",196],["T_STRING","Zend_Controller_Response_Http",196],["T_WHITESPACE"," ",196],["T_VARIABLE","$response",196],"=",["T_STRING","null",196],")",["T_WHITESPACE","\n    ",196],"{",["T_WHITESPACE","\n        ",197],["T_IF","if",198],["T_WHITESPACE"," ",198],"(","!",["T_STRING","Mage",198],["T_DOUBLE_COLON","::",198],["T_STRING","isInstalled",198],"(",")",")",["T_WHITESPACE"," ",198],"{",["T_WHITESPACE","\n            ",198],["T_RETURN","return",199],["T_WHITESPACE"," ",199],["T_STRING","false",199],";",["T_WHITESPACE","\n        ",199],"}",["T_WHITESPACE","\n        ",200],["T_IF","if",201],["T_WHITESPACE"," ",201],"(",["T_STRING","is_null",201],"(",["T_VARIABLE","$request",201],")",")",["T_WHITESPACE"," ",201],"{",["T_WHITESPACE","\n            ",201],["T_VARIABLE","$request",202],["T_WHITESPACE"," ",202],"=",["T_WHITESPACE"," ",202],["T_STRING","Mage",202],["T_DOUBLE_COLON","::",202],["T_STRING","app",202],"(",")",["T_OBJECT_OPERATOR","->",202],["T_STRING","getFrontController",202],"(",")",["T_OBJECT_OPERATOR","->",202],["T_STRING","getRequest",202],"(",")",";",["T_WHITESPACE","\n        ",202],"}",["T_WHITESPACE","\n        ",203],["T_IF","if",204],["T_WHITESPACE"," ",204],"(",["T_STRING","is_null",204],"(",["T_VARIABLE","$response",204],")",")",["T_WHITESPACE"," ",204],"{",["T_WHITESPACE","\n            ",204],["T_VARIABLE","$response",205],["T_WHITESPACE"," ",205],"=",["T_WHITESPACE"," ",205],["T_STRING","Mage",205],["T_DOUBLE_COLON","::",205],["T_STRING","app",205],"(",")",["T_OBJECT_OPERATOR","->",205],["T_STRING","getFrontController",205],"(",")",["T_OBJECT_OPERATOR","->",205],["T_STRING","getResponse",205],"(",")",";",["T_WHITESPACE","\n        ",205],"}",["T_WHITESPACE","\n        ",206],["T_IF","if",207],["T_WHITESPACE"," ",207],"(",["T_STRING","is_null",207],"(",["T_VARIABLE","$this",207],["T_OBJECT_OPERATOR","->",207],["T_STRING","getStoreId",207],"(",")",")",["T_WHITESPACE"," ",207],["T_BOOLEAN_OR","||",207],["T_WHITESPACE"," ",207],["T_STRING","false",207],["T_IS_IDENTICAL","===",207],["T_VARIABLE","$this",207],["T_OBJECT_OPERATOR","->",207],["T_STRING","getStoreId",207],"(",")",")",["T_WHITESPACE"," ",207],"{",["T_WHITESPACE","\n            ",207],["T_VARIABLE","$this",208],["T_OBJECT_OPERATOR","->",208],["T_STRING","setStoreId",208],"(",["T_STRING","Mage",208],["T_DOUBLE_COLON","::",208],["T_STRING","app",208],"(",")",["T_OBJECT_OPERATOR","->",208],["T_STRING","getStore",208],"(",")",["T_OBJECT_OPERATOR","->",208],["T_STRING","getId",208],"(",")",")",";",["T_WHITESPACE","\n        ",208],"}",["T_WHITESPACE","\n\n        ",209],["T_DOC_COMMENT","\/**\n         * We have two cases of incoming paths - with and without slashes at the end (\"\/somepath\/\" and \"\/somepath\").\n         * Each of them matches two url rewrite request paths - with and without slashes at the end (\"\/somepath\/\" and \"\/somepath\").\n         * Choose any matched rewrite, but in priority order that depends on same presence of slash and query params.\n         *\/",211],["T_WHITESPACE","\n        ",215],["T_VARIABLE","$requestCases",216],["T_WHITESPACE"," ",216],"=",["T_WHITESPACE"," ",216],["T_ARRAY","array",216],"(",")",";",["T_WHITESPACE","\n        ",216],["T_VARIABLE","$pathInfo",217],["T_WHITESPACE"," ",217],"=",["T_WHITESPACE"," ",217],["T_VARIABLE","$request",217],["T_OBJECT_OPERATOR","->",217],["T_STRING","getPathInfo",217],"(",")",";",["T_WHITESPACE","\n        ",217],["T_VARIABLE","$origSlash",218],["T_WHITESPACE"," ",218],"=",["T_WHITESPACE"," ",218],"(",["T_STRING","substr",218],"(",["T_VARIABLE","$pathInfo",218],",",["T_WHITESPACE"," ",218],"-",["T_LNUMBER","1",218],")",["T_WHITESPACE"," ",218],["T_IS_EQUAL","==",218],["T_WHITESPACE"," ",218],["T_CONSTANT_ENCAPSED_STRING","'\/'",218],")",["T_WHITESPACE"," ",218],"?",["T_WHITESPACE"," ",218],["T_CONSTANT_ENCAPSED_STRING","'\/'",218],["T_WHITESPACE"," ",218],":",["T_WHITESPACE"," ",218],["T_CONSTANT_ENCAPSED_STRING","''",218],";",["T_WHITESPACE","\n        ",218],["T_VARIABLE","$requestPath",219],["T_WHITESPACE"," ",219],"=",["T_WHITESPACE"," ",219],["T_STRING","trim",219],"(",["T_VARIABLE","$pathInfo",219],",",["T_WHITESPACE"," ",219],["T_CONSTANT_ENCAPSED_STRING","'\/'",219],")",";",["T_WHITESPACE","\n\n        ",219],["T_COMMENT","\/\/ If there were final slash - add nothing to less priority paths. And vice versa.\n",221],["T_WHITESPACE","        ",222],["T_VARIABLE","$altSlash",222],["T_WHITESPACE"," ",222],"=",["T_WHITESPACE"," ",222],["T_VARIABLE","$origSlash",222],["T_WHITESPACE"," ",222],"?",["T_WHITESPACE"," ",222],["T_CONSTANT_ENCAPSED_STRING","''",222],["T_WHITESPACE"," ",222],":",["T_WHITESPACE"," ",222],["T_CONSTANT_ENCAPSED_STRING","'\/'",222],";",["T_WHITESPACE","\n\n        ",222],["T_VARIABLE","$queryString",224],["T_WHITESPACE"," ",224],"=",["T_WHITESPACE"," ",224],["T_VARIABLE","$this",224],["T_OBJECT_OPERATOR","->",224],["T_STRING","_getQueryString",224],"(",")",";",["T_WHITESPACE"," ",224],["T_COMMENT","\/\/ Query params in request, matching \"path + query\" has more priority\n",224],["T_WHITESPACE","        ",225],["T_IF","if",225],["T_WHITESPACE"," ",225],"(",["T_VARIABLE","$queryString",225],")",["T_WHITESPACE"," ",225],"{",["T_WHITESPACE","\n            ",225],["T_VARIABLE","$requestCases",226],"[","]",["T_WHITESPACE"," ",226],"=",["T_WHITESPACE"," ",226],["T_VARIABLE","$requestPath",226],["T_WHITESPACE"," ",226],".",["T_WHITESPACE"," ",226],["T_VARIABLE","$origSlash",226],["T_WHITESPACE"," ",226],".",["T_WHITESPACE"," ",226],["T_CONSTANT_ENCAPSED_STRING","'?'",226],["T_WHITESPACE"," ",226],".",["T_WHITESPACE"," ",226],["T_VARIABLE","$queryString",226],";",["T_WHITESPACE","\n            ",226],["T_VARIABLE","$requestCases",227],"[","]",["T_WHITESPACE"," ",227],"=",["T_WHITESPACE"," ",227],["T_VARIABLE","$requestPath",227],["T_WHITESPACE"," ",227],".",["T_WHITESPACE"," ",227],["T_VARIABLE","$altSlash",227],["T_WHITESPACE"," ",227],".",["T_WHITESPACE"," ",227],["T_CONSTANT_ENCAPSED_STRING","'?'",227],["T_WHITESPACE"," ",227],".",["T_WHITESPACE"," ",227],["T_VARIABLE","$queryString",227],";",["T_WHITESPACE","\n        ",227],"}",["T_WHITESPACE","\n        ",228],["T_VARIABLE","$requestCases",229],"[","]",["T_WHITESPACE"," ",229],"=",["T_WHITESPACE"," ",229],["T_VARIABLE","$requestPath",229],["T_WHITESPACE"," ",229],".",["T_WHITESPACE"," ",229],["T_VARIABLE","$origSlash",229],";",["T_WHITESPACE","\n        ",229],["T_VARIABLE","$requestCases",230],"[","]",["T_WHITESPACE"," ",230],"=",["T_WHITESPACE"," ",230],["T_VARIABLE","$requestPath",230],["T_WHITESPACE"," ",230],".",["T_WHITESPACE"," ",230],["T_VARIABLE","$altSlash",230],";",["T_WHITESPACE","\n\n        ",230],["T_VARIABLE","$this",232],["T_OBJECT_OPERATOR","->",232],["T_STRING","loadByRequestPath",232],"(",["T_VARIABLE","$requestCases",232],")",";",["T_WHITESPACE","\n\n        ",232],["T_DOC_COMMENT","\/**\n         * Try to find rewrite by request path at first, if no luck - try to find by id_path\n         *\/",234],["T_WHITESPACE","\n        ",236],["T_IF","if",237],["T_WHITESPACE"," ",237],"(","!",["T_VARIABLE","$this",237],["T_OBJECT_OPERATOR","->",237],["T_STRING","getId",237],"(",")",["T_WHITESPACE"," ",237],["T_BOOLEAN_AND","&&",237],["T_WHITESPACE"," ",237],["T_ISSET","isset",237],"(",["T_VARIABLE","$_GET",237],"[",["T_CONSTANT_ENCAPSED_STRING","'___from_store'",237],"]",")",")",["T_WHITESPACE"," ",237],"{",["T_WHITESPACE","\n            ",237],["T_TRY","try",238],["T_WHITESPACE"," ",238],"{",["T_WHITESPACE","\n                ",238],["T_VARIABLE","$fromStoreId",239],["T_WHITESPACE"," ",239],"=",["T_WHITESPACE"," ",239],["T_STRING","Mage",239],["T_DOUBLE_COLON","::",239],["T_STRING","app",239],"(",")",["T_OBJECT_OPERATOR","->",239],["T_STRING","getStore",239],"(",["T_VARIABLE","$_GET",239],"[",["T_CONSTANT_ENCAPSED_STRING","'___from_store'",239],"]",")",["T_OBJECT_OPERATOR","->",239],["T_STRING","getId",239],"(",")",";",["T_WHITESPACE","\n            ",239],"}",["T_WHITESPACE","\n            ",240],["T_CATCH","catch",241],["T_WHITESPACE"," ",241],"(",["T_STRING","Exception",241],["T_WHITESPACE"," ",241],["T_VARIABLE","$e",241],")",["T_WHITESPACE"," ",241],"{",["T_WHITESPACE","\n                ",241],["T_RETURN","return",242],["T_WHITESPACE"," ",242],["T_STRING","false",242],";",["T_WHITESPACE","\n            ",242],"}",["T_WHITESPACE","\n\n            ",243],["T_VARIABLE","$this",245],["T_OBJECT_OPERATOR","->",245],["T_STRING","setStoreId",245],"(",["T_VARIABLE","$fromStoreId",245],")",["T_OBJECT_OPERATOR","->",245],["T_STRING","loadByRequestPath",245],"(",["T_VARIABLE","$requestCases",245],")",";",["T_WHITESPACE","\n            ",245],["T_IF","if",246],["T_WHITESPACE"," ",246],"(","!",["T_VARIABLE","$this",246],["T_OBJECT_OPERATOR","->",246],["T_STRING","getId",246],"(",")",")",["T_WHITESPACE"," ",246],"{",["T_WHITESPACE","\n                ",246],["T_RETURN","return",247],["T_WHITESPACE"," ",247],["T_STRING","false",247],";",["T_WHITESPACE","\n            ",247],"}",["T_WHITESPACE","\n            ",248],["T_VARIABLE","$currentStore",249],["T_WHITESPACE"," ",249],"=",["T_WHITESPACE"," ",249],["T_STRING","Mage",249],["T_DOUBLE_COLON","::",249],["T_STRING","app",249],"(",")",["T_OBJECT_OPERATOR","->",249],["T_STRING","getStore",249],"(",")",";",["T_WHITESPACE","\n            ",249],["T_VARIABLE","$this",250],["T_OBJECT_OPERATOR","->",250],["T_STRING","setStoreId",250],"(",["T_VARIABLE","$currentStore",250],["T_OBJECT_OPERATOR","->",250],["T_STRING","getId",250],"(",")",")",["T_OBJECT_OPERATOR","->",250],["T_STRING","loadByIdPath",250],"(",["T_VARIABLE","$this",250],["T_OBJECT_OPERATOR","->",250],["T_STRING","getIdPath",250],"(",")",")",";",["T_WHITESPACE","\n\n            ",250],["T_STRING","Mage",252],["T_DOUBLE_COLON","::",252],["T_STRING","app",252],"(",")",["T_OBJECT_OPERATOR","->",252],["T_STRING","getCookie",252],"(",")",["T_OBJECT_OPERATOR","->",252],["T_STRING","set",252],"(",["T_STRING","Mage_Core_Model_Store",252],["T_DOUBLE_COLON","::",252],["T_STRING","COOKIE_NAME",252],",",["T_WHITESPACE"," ",252],["T_VARIABLE","$currentStore",252],["T_OBJECT_OPERATOR","->",252],["T_STRING","getCode",252],"(",")",",",["T_WHITESPACE"," ",252],["T_STRING","true",252],")",";",["T_WHITESPACE","\n            ",252],["T_VARIABLE","$targetUrl",253],["T_WHITESPACE"," ",253],"=",["T_WHITESPACE"," ",253],["T_VARIABLE","$request",253],["T_OBJECT_OPERATOR","->",253],["T_STRING","getBaseUrl",253],"(",")",".",["T_WHITESPACE"," ",253],["T_CONSTANT_ENCAPSED_STRING","'\/'",253],["T_WHITESPACE"," ",253],".",["T_WHITESPACE"," ",253],["T_VARIABLE","$this",253],["T_OBJECT_OPERATOR","->",253],["T_STRING","getRequestPath",253],"(",")",";",["T_WHITESPACE","\n\n            ",253],["T_VARIABLE","$this",255],["T_OBJECT_OPERATOR","->",255],["T_STRING","_sendRedirectHeaders",255],"(",["T_VARIABLE","$targetUrl",255],",",["T_WHITESPACE"," ",255],["T_STRING","true",255],")",";",["T_WHITESPACE","\n        ",255],"}",["T_WHITESPACE","\n\n        ",256],["T_IF","if",258],["T_WHITESPACE"," ",258],"(","!",["T_VARIABLE","$this",258],["T_OBJECT_OPERATOR","->",258],["T_STRING","getId",258],"(",")",")",["T_WHITESPACE"," ",258],"{",["T_WHITESPACE","\n            ",258],["T_RETURN","return",259],["T_WHITESPACE"," ",259],["T_STRING","false",259],";",["T_WHITESPACE","\n        ",259],"}",["T_WHITESPACE","\n\n\n        ",260],["T_VARIABLE","$request",263],["T_OBJECT_OPERATOR","->",263],["T_STRING","setAlias",263],"(",["T_STRING","self",263],["T_DOUBLE_COLON","::",263],["T_STRING","REWRITE_REQUEST_PATH_ALIAS",263],",",["T_WHITESPACE"," ",263],["T_VARIABLE","$this",263],["T_OBJECT_OPERATOR","->",263],["T_STRING","getRequestPath",263],"(",")",")",";",["T_WHITESPACE","\n        ",263],["T_VARIABLE","$external",264],["T_WHITESPACE"," ",264],"=",["T_WHITESPACE"," ",264],["T_STRING","substr",264],"(",["T_VARIABLE","$this",264],["T_OBJECT_OPERATOR","->",264],["T_STRING","getTargetPath",264],"(",")",",",["T_WHITESPACE"," ",264],["T_LNUMBER","0",264],",",["T_WHITESPACE"," ",264],["T_LNUMBER","6",264],")",";",["T_WHITESPACE","\n        ",264],["T_VARIABLE","$isPermanentRedirectOption",265],["T_WHITESPACE"," ",265],"=",["T_WHITESPACE"," ",265],["T_VARIABLE","$this",265],["T_OBJECT_OPERATOR","->",265],["T_STRING","hasOption",265],"(",["T_CONSTANT_ENCAPSED_STRING","'RP'",265],")",";",["T_WHITESPACE","\n        ",265],["T_IF","if",266],["T_WHITESPACE"," ",266],"(",["T_VARIABLE","$external",266],["T_WHITESPACE"," ",266],["T_IS_IDENTICAL","===",266],["T_WHITESPACE"," ",266],["T_CONSTANT_ENCAPSED_STRING","'http:\/'",266],["T_WHITESPACE"," ",266],["T_BOOLEAN_OR","||",266],["T_WHITESPACE"," ",266],["T_VARIABLE","$external",266],["T_WHITESPACE"," ",266],["T_IS_IDENTICAL","===",266],["T_WHITESPACE"," ",266],["T_CONSTANT_ENCAPSED_STRING","'https:'",266],")",["T_WHITESPACE"," ",266],"{",["T_WHITESPACE","\n            ",266],["T_VARIABLE","$destinationStoreCode",267],["T_WHITESPACE"," ",267],"=",["T_WHITESPACE"," ",267],["T_STRING","Mage",267],["T_DOUBLE_COLON","::",267],["T_STRING","app",267],"(",")",["T_OBJECT_OPERATOR","->",267],["T_STRING","getStore",267],"(",["T_VARIABLE","$this",267],["T_OBJECT_OPERATOR","->",267],["T_STRING","getStoreId",267],"(",")",")",["T_OBJECT_OPERATOR","->",267],["T_STRING","getCode",267],"(",")",";",["T_WHITESPACE","\n            ",267],["T_STRING","Mage",268],["T_DOUBLE_COLON","::",268],["T_STRING","app",268],"(",")",["T_OBJECT_OPERATOR","->",268],["T_STRING","getCookie",268],"(",")",["T_OBJECT_OPERATOR","->",268],["T_STRING","set",268],"(",["T_STRING","Mage_Core_Model_Store",268],["T_DOUBLE_COLON","::",268],["T_STRING","COOKIE_NAME",268],",",["T_WHITESPACE"," ",268],["T_VARIABLE","$destinationStoreCode",268],",",["T_WHITESPACE"," ",268],["T_STRING","true",268],")",";",["T_WHITESPACE","\n\n            ",268],["T_VARIABLE","$this",270],["T_OBJECT_OPERATOR","->",270],["T_STRING","_sendRedirectHeaders",270],"(",["T_VARIABLE","$this",270],["T_OBJECT_OPERATOR","->",270],["T_STRING","getTargetPath",270],"(",")",",",["T_WHITESPACE"," ",270],["T_VARIABLE","$isPermanentRedirectOption",270],")",";",["T_WHITESPACE","\n        ",270],"}",["T_WHITESPACE"," ",271],["T_ELSE","else",271],["T_WHITESPACE"," ",271],"{",["T_WHITESPACE","\n            ",271],["T_VARIABLE","$targetUrl",272],["T_WHITESPACE"," ",272],"=",["T_WHITESPACE"," ",272],["T_VARIABLE","$request",272],["T_OBJECT_OPERATOR","->",272],["T_STRING","getBaseUrl",272],"(",")",".",["T_WHITESPACE"," ",272],["T_CONSTANT_ENCAPSED_STRING","'\/'",272],["T_WHITESPACE"," ",272],".",["T_WHITESPACE"," ",272],["T_VARIABLE","$this",272],["T_OBJECT_OPERATOR","->",272],["T_STRING","getTargetPath",272],"(",")",";",["T_WHITESPACE","\n        ",272],"}",["T_WHITESPACE","\n        ",273],["T_VARIABLE","$isRedirectOption",274],["T_WHITESPACE"," ",274],"=",["T_WHITESPACE"," ",274],["T_VARIABLE","$this",274],["T_OBJECT_OPERATOR","->",274],["T_STRING","hasOption",274],"(",["T_CONSTANT_ENCAPSED_STRING","'R'",274],")",";",["T_WHITESPACE","\n        ",274],["T_IF","if",275],["T_WHITESPACE"," ",275],"(",["T_VARIABLE","$isRedirectOption",275],["T_WHITESPACE"," ",275],["T_BOOLEAN_OR","||",275],["T_WHITESPACE"," ",275],["T_VARIABLE","$isPermanentRedirectOption",275],")",["T_WHITESPACE"," ",275],"{",["T_WHITESPACE","\n            ",275],["T_IF","if",276],["T_WHITESPACE"," ",276],"(",["T_STRING","Mage",276],["T_DOUBLE_COLON","::",276],["T_STRING","getStoreConfig",276],"(",["T_CONSTANT_ENCAPSED_STRING","'web\/url\/use_store'",276],")",["T_WHITESPACE"," ",276],["T_BOOLEAN_AND","&&",276],["T_WHITESPACE"," ",276],["T_VARIABLE","$storeCode",276],["T_WHITESPACE"," ",276],"=",["T_WHITESPACE"," ",276],["T_STRING","Mage",276],["T_DOUBLE_COLON","::",276],["T_STRING","app",276],"(",")",["T_OBJECT_OPERATOR","->",276],["T_STRING","getStore",276],"(",")",["T_OBJECT_OPERATOR","->",276],["T_STRING","getCode",276],"(",")",")",["T_WHITESPACE"," ",276],"{",["T_WHITESPACE","\n                ",276],["T_VARIABLE","$targetUrl",277],["T_WHITESPACE"," ",277],"=",["T_WHITESPACE"," ",277],["T_VARIABLE","$request",277],["T_OBJECT_OPERATOR","->",277],["T_STRING","getBaseUrl",277],"(",")",".",["T_WHITESPACE"," ",277],["T_CONSTANT_ENCAPSED_STRING","'\/'",277],["T_WHITESPACE"," ",277],".",["T_WHITESPACE"," ",277],["T_VARIABLE","$storeCode",277],["T_WHITESPACE"," ",277],".",["T_WHITESPACE"," ",277],["T_CONSTANT_ENCAPSED_STRING","'\/'",277],["T_WHITESPACE"," ",277],".",["T_VARIABLE","$this",277],["T_OBJECT_OPERATOR","->",277],["T_STRING","getTargetPath",277],"(",")",";",["T_WHITESPACE","\n            ",277],"}",["T_WHITESPACE","\n\n            ",278],["T_VARIABLE","$this",280],["T_OBJECT_OPERATOR","->",280],["T_STRING","_sendRedirectHeaders",280],"(",["T_VARIABLE","$targetUrl",280],",",["T_WHITESPACE"," ",280],["T_VARIABLE","$isPermanentRedirectOption",280],")",";",["T_WHITESPACE","\n        ",280],"}",["T_WHITESPACE","\n\n        ",281],["T_IF","if",283],["T_WHITESPACE"," ",283],"(",["T_STRING","Mage",283],["T_DOUBLE_COLON","::",283],["T_STRING","getStoreConfig",283],"(",["T_CONSTANT_ENCAPSED_STRING","'web\/url\/use_store'",283],")",["T_WHITESPACE"," ",283],["T_BOOLEAN_AND","&&",283],["T_WHITESPACE"," ",283],["T_VARIABLE","$storeCode",283],["T_WHITESPACE"," ",283],"=",["T_WHITESPACE"," ",283],["T_STRING","Mage",283],["T_DOUBLE_COLON","::",283],["T_STRING","app",283],"(",")",["T_OBJECT_OPERATOR","->",283],["T_STRING","getStore",283],"(",")",["T_OBJECT_OPERATOR","->",283],["T_STRING","getCode",283],"(",")",")",["T_WHITESPACE"," ",283],"{",["T_WHITESPACE","\n                ",283],["T_VARIABLE","$targetUrl",284],["T_WHITESPACE"," ",284],"=",["T_WHITESPACE"," ",284],["T_VARIABLE","$request",284],["T_OBJECT_OPERATOR","->",284],["T_STRING","getBaseUrl",284],"(",")",".",["T_WHITESPACE"," ",284],["T_CONSTANT_ENCAPSED_STRING","'\/'",284],["T_WHITESPACE"," ",284],".",["T_WHITESPACE"," ",284],["T_VARIABLE","$storeCode",284],["T_WHITESPACE"," ",284],".",["T_WHITESPACE"," ",284],["T_CONSTANT_ENCAPSED_STRING","'\/'",284],["T_WHITESPACE"," ",284],".",["T_VARIABLE","$this",284],["T_OBJECT_OPERATOR","->",284],["T_STRING","getTargetPath",284],"(",")",";",["T_WHITESPACE","\n            ",284],"}",["T_WHITESPACE","\n\n        ",285],["T_VARIABLE","$queryString",287],["T_WHITESPACE"," ",287],"=",["T_WHITESPACE"," ",287],["T_VARIABLE","$this",287],["T_OBJECT_OPERATOR","->",287],["T_STRING","_getQueryString",287],"(",")",";",["T_WHITESPACE","\n        ",287],["T_IF","if",288],["T_WHITESPACE"," ",288],"(",["T_VARIABLE","$queryString",288],")",["T_WHITESPACE"," ",288],"{",["T_WHITESPACE","\n            ",288],["T_VARIABLE","$targetUrl",289],["T_WHITESPACE"," ",289],["T_CONCAT_EQUAL",".=",289],["T_WHITESPACE"," ",289],["T_CONSTANT_ENCAPSED_STRING","'?'",289],".",["T_VARIABLE","$queryString",289],";",["T_WHITESPACE","\n        ",289],"}",["T_WHITESPACE","\n\n        ",290],["T_VARIABLE","$request",292],["T_OBJECT_OPERATOR","->",292],["T_STRING","setRequestUri",292],"(",["T_VARIABLE","$targetUrl",292],")",";",["T_WHITESPACE","\n        ",292],["T_VARIABLE","$request",293],["T_OBJECT_OPERATOR","->",293],["T_STRING","setPathInfo",293],"(",["T_VARIABLE","$this",293],["T_OBJECT_OPERATOR","->",293],["T_STRING","getTargetPath",293],"(",")",")",";",["T_WHITESPACE","\n\n        ",293],["T_RETURN","return",295],["T_WHITESPACE"," ",295],["T_STRING","true",295],";",["T_WHITESPACE","\n    ",295],"}",["T_WHITESPACE","\n\n    ",296],["T_DOC_COMMENT","\/**\n     * Prepare and return QUERY_STRING\n     *\n     * @return bool|string\n     * @deprecated since 1.7.0.2. Refactored and moved to Mage_Core_Controller_Request_Rewrite\n     *\/",298],["T_WHITESPACE","\n    ",303],["T_PROTECTED","protected",304],["T_WHITESPACE"," ",304],["T_FUNCTION","function",304],["T_WHITESPACE"," ",304],["T_STRING","_getQueryString",304],"(",")",["T_WHITESPACE","\n    ",304],"{",["T_WHITESPACE","\n        ",305],["T_IF","if",306],["T_WHITESPACE"," ",306],"(","!",["T_EMPTY","empty",306],"(",["T_VARIABLE","$_SERVER",306],"[",["T_CONSTANT_ENCAPSED_STRING","'QUERY_STRING'",306],"]",")",")",["T_WHITESPACE"," ",306],"{",["T_WHITESPACE","\n            ",306],["T_VARIABLE","$queryParams",307],["T_WHITESPACE"," ",307],"=",["T_WHITESPACE"," ",307],["T_ARRAY","array",307],"(",")",";",["T_WHITESPACE","\n            ",307],["T_STRING","parse_str",308],"(",["T_VARIABLE","$_SERVER",308],"[",["T_CONSTANT_ENCAPSED_STRING","'QUERY_STRING'",308],"]",",",["T_WHITESPACE"," ",308],["T_VARIABLE","$queryParams",308],")",";",["T_WHITESPACE","\n            ",308],["T_VARIABLE","$hasChanges",309],["T_WHITESPACE"," ",309],"=",["T_WHITESPACE"," ",309],["T_STRING","false",309],";",["T_WHITESPACE","\n            ",309],["T_FOREACH","foreach",310],["T_WHITESPACE"," ",310],"(",["T_VARIABLE","$queryParams",310],["T_WHITESPACE"," ",310],["T_AS","as",310],["T_WHITESPACE"," ",310],["T_VARIABLE","$key",310],["T_DOUBLE_ARROW","=>",310],["T_VARIABLE","$value",310],")",["T_WHITESPACE"," ",310],"{",["T_WHITESPACE","\n                ",310],["T_IF","if",311],["T_WHITESPACE"," ",311],"(",["T_STRING","substr",311],"(",["T_VARIABLE","$key",311],",",["T_WHITESPACE"," ",311],["T_LNUMBER","0",311],",",["T_WHITESPACE"," ",311],["T_LNUMBER","3",311],")",["T_WHITESPACE"," ",311],["T_IS_IDENTICAL","===",311],["T_WHITESPACE"," ",311],["T_CONSTANT_ENCAPSED_STRING","'___'",311],")",["T_WHITESPACE"," ",311],"{",["T_WHITESPACE","\n                    ",311],["T_UNSET","unset",312],"(",["T_VARIABLE","$queryParams",312],"[",["T_VARIABLE","$key",312],"]",")",";",["T_WHITESPACE","\n                    ",312],["T_VARIABLE","$hasChanges",313],["T_WHITESPACE"," ",313],"=",["T_WHITESPACE"," ",313],["T_STRING","true",313],";",["T_WHITESPACE","\n                ",313],"}",["T_WHITESPACE","\n            ",314],"}",["T_WHITESPACE","\n            ",315],["T_IF","if",316],["T_WHITESPACE"," ",316],"(",["T_VARIABLE","$hasChanges",316],")",["T_WHITESPACE"," ",316],"{",["T_WHITESPACE","\n                ",316],["T_RETURN","return",317],["T_WHITESPACE"," ",317],["T_STRING","http_build_query",317],"(",["T_VARIABLE","$queryParams",317],")",";",["T_WHITESPACE","\n            ",317],"}",["T_WHITESPACE","\n            ",318],["T_ELSE","else",319],["T_WHITESPACE"," ",319],"{",["T_WHITESPACE","\n                ",319],["T_RETURN","return",320],["T_WHITESPACE"," ",320],["T_VARIABLE","$_SERVER",320],"[",["T_CONSTANT_ENCAPSED_STRING","'QUERY_STRING'",320],"]",";",["T_WHITESPACE","\n            ",320],"}",["T_WHITESPACE","\n        ",321],"}",["T_WHITESPACE","\n        ",322],["T_RETURN","return",323],["T_WHITESPACE"," ",323],["T_STRING","false",323],";",["T_WHITESPACE","\n    ",323],"}",["T_WHITESPACE","\n\n    ",324],["T_PUBLIC","public",326],["T_WHITESPACE"," ",326],["T_FUNCTION","function",326],["T_WHITESPACE"," ",326],["T_STRING","getStoreId",326],"(",")",["T_WHITESPACE","\n    ",326],"{",["T_WHITESPACE","\n        ",327],["T_RETURN","return",328],["T_WHITESPACE"," ",328],["T_VARIABLE","$this",328],["T_OBJECT_OPERATOR","->",328],["T_STRING","_getData",328],"(",["T_CONSTANT_ENCAPSED_STRING","'store_id'",328],")",";",["T_WHITESPACE","\n    ",328],"}",["T_WHITESPACE","\n\n    ",329],["T_DOC_COMMENT","\/**\n     * Add location header and disable browser page caching\n     *\n     * @param string $url\n     * @param bool $isPermanent\n     * @deprecated since 1.7.0.2. Refactored and moved to Mage_Core_Controller_Request_Rewrite\n     *\/",331],["T_WHITESPACE","\n    ",337],["T_PROTECTED","protected",338],["T_WHITESPACE"," ",338],["T_FUNCTION","function",338],["T_WHITESPACE"," ",338],["T_STRING","_sendRedirectHeaders",338],"(",["T_VARIABLE","$url",338],",",["T_WHITESPACE"," ",338],["T_VARIABLE","$isPermanent",338],["T_WHITESPACE"," ",338],"=",["T_WHITESPACE"," ",338],["T_STRING","false",338],")",["T_WHITESPACE","\n    ",338],"{",["T_WHITESPACE","\n        ",339],["T_IF","if",340],["T_WHITESPACE"," ",340],"(",["T_VARIABLE","$isPermanent",340],")",["T_WHITESPACE"," ",340],"{",["T_WHITESPACE","\n            ",340],["T_STRING","header",341],"(",["T_CONSTANT_ENCAPSED_STRING","'HTTP\/1.1 301 Moved Permanently'",341],")",";",["T_WHITESPACE","\n        ",341],"}",["T_WHITESPACE","\n\n        ",342],["T_STRING","header",344],"(",["T_CONSTANT_ENCAPSED_STRING","'Cache-Control: no-store, no-cache, must-revalidate, post-check=0, pre-check=0'",344],")",";",["T_WHITESPACE","\n        ",344],["T_STRING","header",345],"(",["T_CONSTANT_ENCAPSED_STRING","'Pragma: no-cache'",345],")",";",["T_WHITESPACE","\n        ",345],["T_STRING","header",346],"(",["T_CONSTANT_ENCAPSED_STRING","'Location: '",346],["T_WHITESPACE"," ",346],".",["T_WHITESPACE"," ",346],["T_VARIABLE","$url",346],")",";",["T_WHITESPACE","\n        ",346],["T_EXIT","exit",347],";",["T_WHITESPACE","\n    ",347],"}",["T_WHITESPACE","\n",348],"}",["T_WHITESPACE","\n",349]]
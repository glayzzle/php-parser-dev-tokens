[["T_OPEN_TAG","<?php\n",1],["T_DOC_COMMENT","\/**\n * Magento\n *\n * NOTICE OF LICENSE\n *\n * This source file is subject to the Open Software License (OSL 3.0)\n * that is bundled with this package in the file LICENSE.txt.\n * It is also available through the world-wide-web at this URL:\n * http:\/\/opensource.org\/licenses\/osl-3.0.php\n * If you did not receive a copy of the license and are unable to\n * obtain it through the world-wide-web, please send an email\n * to license@magento.com so we can send you a copy immediately.\n *\n * DISCLAIMER\n *\n * Do not edit or add to this file if you wish to upgrade Magento to newer\n * versions in the future. If you wish to customize Magento for your\n * needs please refer to http:\/\/www.magento.com for more information.\n *\n * @category    Mage\n * @package     Mage_Core\n * @copyright  Copyright (c) 2006-2016 X.commerce, Inc. and affiliates (http:\/\/www.magento.com)\n * @license    http:\/\/opensource.org\/licenses\/osl-3.0.php  Open Software License (OSL 3.0)\n *\/",2],["T_WHITESPACE","\n\n\n",25],["T_DOC_COMMENT","\/**\n * Websites collection\n *\n * @category    Mage\n * @package     Mage_Core\n * @author      Magento Core Team <core@magentocommerce.com>\n *\/",28],["T_WHITESPACE","\n",34],["T_CLASS","class",35],["T_WHITESPACE"," ",35],["T_STRING","Mage_Core_Model_Resource_Website_Collection",35],["T_WHITESPACE"," ",35],["T_EXTENDS","extends",35],["T_WHITESPACE"," ",35],["T_STRING","Mage_Core_Model_Resource_Db_Collection_Abstract",35],["T_WHITESPACE","\n",35],"{",["T_WHITESPACE","\n    ",36],["T_DOC_COMMENT","\/**\n     * @deprecated since 1.5.0.0\n     *\/",37],["T_WHITESPACE","\n    ",39],["T_PROTECTED","protected",40],["T_WHITESPACE"," ",40],["T_VARIABLE","$_loadDefault",40],["T_WHITESPACE","    ",40],"=",["T_WHITESPACE"," ",40],["T_STRING","false",40],";",["T_WHITESPACE","\n\n    ",40],["T_DOC_COMMENT","\/**\n     * Map field to alias\n     *\n     * @var array\n     *\/",42],["T_WHITESPACE","\n    ",46],["T_PROTECTED","protected",47],["T_WHITESPACE"," ",47],["T_VARIABLE","$_map",47],["T_WHITESPACE"," ",47],"=",["T_WHITESPACE"," ",47],["T_ARRAY","array",47],"(",["T_CONSTANT_ENCAPSED_STRING","'fields'",47],["T_WHITESPACE"," ",47],["T_DOUBLE_ARROW","=>",47],["T_WHITESPACE"," ",47],["T_ARRAY","array",47],"(",["T_CONSTANT_ENCAPSED_STRING","'website_id'",47],["T_WHITESPACE"," ",47],["T_DOUBLE_ARROW","=>",47],["T_WHITESPACE"," ",47],["T_CONSTANT_ENCAPSED_STRING","'main_table.website_id'",47],")",")",";",["T_WHITESPACE","\n\n    ",47],["T_DOC_COMMENT","\/**\n     * Define resource model\n     *\n     *\/",49],["T_WHITESPACE","\n    ",52],["T_PROTECTED","protected",53],["T_WHITESPACE"," ",53],["T_FUNCTION","function",53],["T_WHITESPACE"," ",53],["T_STRING","_construct",53],"(",")",["T_WHITESPACE","\n    ",53],"{",["T_WHITESPACE","\n        ",54],["T_VARIABLE","$this",55],["T_OBJECT_OPERATOR","->",55],["T_STRING","setFlag",55],"(",["T_CONSTANT_ENCAPSED_STRING","'load_default_website'",55],",",["T_WHITESPACE"," ",55],["T_STRING","false",55],")",";",["T_WHITESPACE","\n        ",55],["T_VARIABLE","$this",56],["T_OBJECT_OPERATOR","->",56],["T_STRING","_init",56],"(",["T_CONSTANT_ENCAPSED_STRING","'core\/website'",56],")",";",["T_WHITESPACE","\n    ",56],"}",["T_WHITESPACE","\n\n    ",57],["T_DOC_COMMENT","\/**\n     * Set flag for load default (admin) website\n     *\n     * @param boolean $loadDefault\n     * @return Mage_Core_Model_Resource_Website_Collection\n     *\/",59],["T_WHITESPACE","\n    ",64],["T_PUBLIC","public",65],["T_WHITESPACE"," ",65],["T_FUNCTION","function",65],["T_WHITESPACE"," ",65],["T_STRING","setLoadDefault",65],"(",["T_VARIABLE","$loadDefault",65],")",["T_WHITESPACE","\n    ",65],"{",["T_WHITESPACE","\n        ",66],["T_VARIABLE","$this",67],["T_OBJECT_OPERATOR","->",67],["T_STRING","setFlag",67],"(",["T_CONSTANT_ENCAPSED_STRING","'load_default_website'",67],",",["T_WHITESPACE"," ",67],["T_BOOL_CAST","(bool)",67],["T_VARIABLE","$loadDefault",67],")",";",["T_WHITESPACE","\n        ",67],["T_RETURN","return",68],["T_WHITESPACE"," ",68],["T_VARIABLE","$this",68],";",["T_WHITESPACE","\n    ",68],"}",["T_WHITESPACE","\n\n    ",69],["T_DOC_COMMENT","\/**\n     * Is load default (admin) website\n     *\n     * @return boolean\n     *\/",71],["T_WHITESPACE","\n    ",75],["T_PUBLIC","public",76],["T_WHITESPACE"," ",76],["T_FUNCTION","function",76],["T_WHITESPACE"," ",76],["T_STRING","getLoadDefault",76],"(",")",["T_WHITESPACE","\n    ",76],"{",["T_WHITESPACE","\n        ",77],["T_RETURN","return",78],["T_WHITESPACE"," ",78],["T_VARIABLE","$this",78],["T_OBJECT_OPERATOR","->",78],["T_STRING","getFlag",78],"(",["T_CONSTANT_ENCAPSED_STRING","'load_default_website'",78],")",";",["T_WHITESPACE","\n    ",78],"}",["T_WHITESPACE","\n\n    ",79],["T_DOC_COMMENT","\/**\n     * Convert items array to array for select options\n     *\n     * @return Array\n     *\/",81],["T_WHITESPACE","\n    ",85],["T_PUBLIC","public",86],["T_WHITESPACE"," ",86],["T_FUNCTION","function",86],["T_WHITESPACE"," ",86],["T_STRING","toOptionArray",86],"(",")",["T_WHITESPACE","\n    ",86],"{",["T_WHITESPACE","\n        ",87],["T_RETURN","return",88],["T_WHITESPACE"," ",88],["T_VARIABLE","$this",88],["T_OBJECT_OPERATOR","->",88],["T_STRING","_toOptionArray",88],"(",["T_CONSTANT_ENCAPSED_STRING","'website_id'",88],",",["T_WHITESPACE"," ",88],["T_CONSTANT_ENCAPSED_STRING","'name'",88],")",";",["T_WHITESPACE","\n    ",88],"}",["T_WHITESPACE","\n\n    ",89],["T_DOC_COMMENT","\/**\n     * Convert items array to hash for select options\n     *\n     * @return Array\n     *\/",91],["T_WHITESPACE","\n    ",95],["T_PUBLIC","public",96],["T_WHITESPACE"," ",96],["T_FUNCTION","function",96],["T_WHITESPACE"," ",96],["T_STRING","toOptionHash",96],"(",")",["T_WHITESPACE","\n    ",96],"{",["T_WHITESPACE","\n        ",97],["T_RETURN","return",98],["T_WHITESPACE"," ",98],["T_VARIABLE","$this",98],["T_OBJECT_OPERATOR","->",98],["T_STRING","_toOptionHash",98],"(",["T_CONSTANT_ENCAPSED_STRING","'website_id'",98],",",["T_WHITESPACE"," ",98],["T_CONSTANT_ENCAPSED_STRING","'name'",98],")",";",["T_WHITESPACE","\n    ",98],"}",["T_WHITESPACE","\n\n\n    ",99],["T_DOC_COMMENT","\/**\n     * Add website filter to collection\n     *\n     * @param int $ids|array\n     * @return Mage_Core_Model_Resource_Website_Collection\n     *\/",102],["T_WHITESPACE","\n    ",107],["T_PUBLIC","public",108],["T_WHITESPACE"," ",108],["T_FUNCTION","function",108],["T_WHITESPACE"," ",108],["T_STRING","addIdFilter",108],"(",["T_VARIABLE","$ids",108],")",["T_WHITESPACE","\n    ",108],"{",["T_WHITESPACE","\n        ",109],["T_IF","if",110],["T_WHITESPACE"," ",110],"(",["T_STRING","is_array",110],"(",["T_VARIABLE","$ids",110],")",")",["T_WHITESPACE"," ",110],"{",["T_WHITESPACE","\n            ",110],["T_IF","if",111],["T_WHITESPACE"," ",111],"(",["T_EMPTY","empty",111],"(",["T_VARIABLE","$ids",111],")",")",["T_WHITESPACE"," ",111],"{",["T_WHITESPACE","\n                ",111],["T_VARIABLE","$this",112],["T_OBJECT_OPERATOR","->",112],["T_STRING","addFieldToFilter",112],"(",["T_CONSTANT_ENCAPSED_STRING","'website_id'",112],",",["T_WHITESPACE"," ",112],["T_STRING","null",112],")",";",["T_WHITESPACE","\n            ",112],"}",["T_WHITESPACE"," ",113],["T_ELSE","else",113],["T_WHITESPACE"," ",113],"{",["T_WHITESPACE","\n                ",113],["T_VARIABLE","$this",114],["T_OBJECT_OPERATOR","->",114],["T_STRING","addFieldToFilter",114],"(",["T_CONSTANT_ENCAPSED_STRING","'website_id'",114],",",["T_WHITESPACE"," ",114],["T_ARRAY","array",114],"(",["T_CONSTANT_ENCAPSED_STRING","'in'",114],["T_WHITESPACE"," ",114],["T_DOUBLE_ARROW","=>",114],["T_WHITESPACE"," ",114],["T_VARIABLE","$ids",114],")",")",";",["T_WHITESPACE","\n            ",114],"}",["T_WHITESPACE","\n        ",115],"}",["T_WHITESPACE"," ",116],["T_ELSE","else",116],["T_WHITESPACE"," ",116],"{",["T_WHITESPACE","\n            ",116],["T_VARIABLE","$this",117],["T_OBJECT_OPERATOR","->",117],["T_STRING","addFieldToFilter",117],"(",["T_CONSTANT_ENCAPSED_STRING","'website_id'",117],",",["T_WHITESPACE"," ",117],["T_VARIABLE","$ids",117],")",";",["T_WHITESPACE","\n        ",117],"}",["T_WHITESPACE","\n        ",118],["T_RETURN","return",119],["T_WHITESPACE"," ",119],["T_VARIABLE","$this",119],";",["T_WHITESPACE","\n    ",119],"}",["T_WHITESPACE","\n\n    ",120],["T_DOC_COMMENT","\/**\n     * Load collection data\n     *\n     * @param boolean $printQuery\n     * @param boolean $logQuery\n     * @return Mage_Core_Model_Resource_Website_Collection\n     *\/",122],["T_WHITESPACE","\n    ",128],["T_PUBLIC","public",129],["T_WHITESPACE"," ",129],["T_FUNCTION","function",129],["T_WHITESPACE"," ",129],["T_STRING","load",129],"(",["T_VARIABLE","$printQuery",129],["T_WHITESPACE"," ",129],"=",["T_WHITESPACE"," ",129],["T_STRING","false",129],",",["T_WHITESPACE"," ",129],["T_VARIABLE","$logQuery",129],["T_WHITESPACE"," ",129],"=",["T_WHITESPACE"," ",129],["T_STRING","false",129],")",["T_WHITESPACE","\n    ",129],"{",["T_WHITESPACE","\n        ",130],["T_IF","if",131],["T_WHITESPACE"," ",131],"(","!",["T_VARIABLE","$this",131],["T_OBJECT_OPERATOR","->",131],["T_STRING","getLoadDefault",131],"(",")",")",["T_WHITESPACE"," ",131],"{",["T_WHITESPACE","\n            ",131],["T_VARIABLE","$this",132],["T_OBJECT_OPERATOR","->",132],["T_STRING","getSelect",132],"(",")",["T_OBJECT_OPERATOR","->",132],["T_STRING","where",132],"(",["T_CONSTANT_ENCAPSED_STRING","'main_table.website_id > ?'",132],",",["T_WHITESPACE"," ",132],["T_LNUMBER","0",132],")",";",["T_WHITESPACE","\n        ",132],"}",["T_WHITESPACE","\n        ",133],["T_VARIABLE","$this",134],["T_OBJECT_OPERATOR","->",134],["T_STRING","unshiftOrder",134],"(",["T_CONSTANT_ENCAPSED_STRING","'main_table.name'",134],",",["T_WHITESPACE"," ",134],["T_STRING","Varien_Db_Select",134],["T_DOUBLE_COLON","::",134],["T_STRING","SQL_ASC",134],")",["T_WHITESPACE","       ",134],["T_COMMENT","\/\/ website name SECOND\n",134],["T_WHITESPACE","             ",135],["T_OBJECT_OPERATOR","->",135],["T_STRING","unshiftOrder",135],"(",["T_CONSTANT_ENCAPSED_STRING","'main_table.sort_order'",135],",",["T_WHITESPACE"," ",135],["T_STRING","Varien_Db_Select",135],["T_DOUBLE_COLON","::",135],["T_STRING","SQL_ASC",135],")",";",["T_WHITESPACE"," ",135],["T_COMMENT","\/\/ website sort order FIRST\n",135],["T_WHITESPACE","\n        ",136],["T_RETURN","return",137],["T_WHITESPACE"," ",137],["T_STRING","parent",137],["T_DOUBLE_COLON","::",137],["T_STRING","load",137],"(",["T_VARIABLE","$printQuery",137],",",["T_WHITESPACE"," ",137],["T_VARIABLE","$logQuery",137],")",";",["T_WHITESPACE","\n\n    ",137],"}",["T_WHITESPACE","\n\n    ",139],["T_DOC_COMMENT","\/**\n     * Join group and store info from appropriate tables.\n     * Defines new _idFiledName as 'website_group_store' bc for\n     * one website can be more then one row in collection.\n     * Sets extra combined ordering by group's name, defined\n     * sort ordering and store's name.\n     *\n     * @return Mage_Core_Model_Resource_Website_Collection\n     *\/",141],["T_WHITESPACE","\n    ",149],["T_PUBLIC","public",150],["T_WHITESPACE"," ",150],["T_FUNCTION","function",150],["T_WHITESPACE"," ",150],["T_STRING","joinGroupAndStore",150],"(",")",["T_WHITESPACE","\n    ",150],"{",["T_WHITESPACE","\n        ",151],["T_IF","if",152],["T_WHITESPACE"," ",152],"(","!",["T_VARIABLE","$this",152],["T_OBJECT_OPERATOR","->",152],["T_STRING","getFlag",152],"(",["T_CONSTANT_ENCAPSED_STRING","'groups_and_stores_joined'",152],")",")",["T_WHITESPACE"," ",152],"{",["T_WHITESPACE","\n            ",152],["T_VARIABLE","$this",153],["T_OBJECT_OPERATOR","->",153],["T_STRING","_idFieldName",153],["T_WHITESPACE"," ",153],"=",["T_WHITESPACE"," ",153],["T_CONSTANT_ENCAPSED_STRING","'website_group_store'",153],";",["T_WHITESPACE","\n            ",153],["T_VARIABLE","$this",154],["T_OBJECT_OPERATOR","->",154],["T_STRING","getSelect",154],"(",")",["T_OBJECT_OPERATOR","->",154],["T_STRING","joinLeft",154],"(",["T_WHITESPACE","\n                ",154],["T_ARRAY","array",155],"(",["T_CONSTANT_ENCAPSED_STRING","'group_table'",155],["T_WHITESPACE"," ",155],["T_DOUBLE_ARROW","=>",155],["T_WHITESPACE"," ",155],["T_VARIABLE","$this",155],["T_OBJECT_OPERATOR","->",155],["T_STRING","getTable",155],"(",["T_CONSTANT_ENCAPSED_STRING","'core\/store_group'",155],")",")",",",["T_WHITESPACE","\n                ",155],["T_CONSTANT_ENCAPSED_STRING","'main_table.website_id = group_table.website_id'",156],",",["T_WHITESPACE","\n                ",156],["T_ARRAY","array",157],"(",["T_CONSTANT_ENCAPSED_STRING","'group_id'",157],["T_WHITESPACE"," ",157],["T_DOUBLE_ARROW","=>",157],["T_WHITESPACE"," ",157],["T_CONSTANT_ENCAPSED_STRING","'group_id'",157],",",["T_WHITESPACE"," ",157],["T_CONSTANT_ENCAPSED_STRING","'group_title'",157],["T_WHITESPACE"," ",157],["T_DOUBLE_ARROW","=>",157],["T_WHITESPACE"," ",157],["T_CONSTANT_ENCAPSED_STRING","'name'",157],")",["T_WHITESPACE","\n            ",157],")",["T_OBJECT_OPERATOR","->",158],["T_STRING","joinLeft",158],"(",["T_WHITESPACE","\n                ",158],["T_ARRAY","array",159],"(",["T_CONSTANT_ENCAPSED_STRING","'store_table'",159],["T_WHITESPACE"," ",159],["T_DOUBLE_ARROW","=>",159],["T_WHITESPACE"," ",159],["T_VARIABLE","$this",159],["T_OBJECT_OPERATOR","->",159],["T_STRING","getTable",159],"(",["T_CONSTANT_ENCAPSED_STRING","'core\/store'",159],")",")",",",["T_WHITESPACE","\n                ",159],["T_CONSTANT_ENCAPSED_STRING","'group_table.group_id = store_table.group_id'",160],",",["T_WHITESPACE","\n                ",160],["T_ARRAY","array",161],"(",["T_CONSTANT_ENCAPSED_STRING","'store_id'",161],["T_WHITESPACE"," ",161],["T_DOUBLE_ARROW","=>",161],["T_WHITESPACE"," ",161],["T_CONSTANT_ENCAPSED_STRING","'store_id'",161],",",["T_WHITESPACE"," ",161],["T_CONSTANT_ENCAPSED_STRING","'store_title'",161],["T_WHITESPACE"," ",161],["T_DOUBLE_ARROW","=>",161],["T_WHITESPACE"," ",161],["T_CONSTANT_ENCAPSED_STRING","'name'",161],")",["T_WHITESPACE","\n            ",161],")",";",["T_WHITESPACE","\n            ",162],["T_VARIABLE","$this",163],["T_OBJECT_OPERATOR","->",163],["T_STRING","addOrder",163],"(",["T_CONSTANT_ENCAPSED_STRING","'group_table.name'",163],",",["T_WHITESPACE"," ",163],["T_STRING","Varien_Db_Select",163],["T_DOUBLE_COLON","::",163],["T_STRING","SQL_ASC",163],")",["T_WHITESPACE","       ",163],["T_COMMENT","\/\/ store name\n",163],["T_WHITESPACE","                ",164],["T_OBJECT_OPERATOR","->",164],["T_STRING","addOrder",164],"(",["T_CONSTANT_ENCAPSED_STRING","'CASE WHEN store_table.store_id = 0 THEN 0 ELSE 1 END'",164],",",["T_WHITESPACE"," ",164],["T_STRING","Varien_Db_Select",164],["T_DOUBLE_COLON","::",164],["T_STRING","SQL_ASC",164],")",["T_WHITESPACE"," ",164],["T_COMMENT","\/\/ view is admin\n",164],["T_WHITESPACE","                ",165],["T_OBJECT_OPERATOR","->",165],["T_STRING","addOrder",165],"(",["T_CONSTANT_ENCAPSED_STRING","'store_table.sort_order'",165],",",["T_WHITESPACE"," ",165],["T_STRING","Varien_Db_Select",165],["T_DOUBLE_COLON","::",165],["T_STRING","SQL_ASC",165],")",["T_WHITESPACE"," ",165],["T_COMMENT","\/\/ view sort order\n",165],["T_WHITESPACE","                ",166],["T_OBJECT_OPERATOR","->",166],["T_STRING","addOrder",166],"(",["T_CONSTANT_ENCAPSED_STRING","'store_table.name'",166],",",["T_WHITESPACE"," ",166],["T_STRING","Varien_Db_Select",166],["T_DOUBLE_COLON","::",166],["T_STRING","SQL_ASC",166],")",["T_WHITESPACE","       ",166],["T_COMMENT","\/\/ view name\n",166],["T_WHITESPACE","            ",167],";",["T_WHITESPACE","\n            ",167],["T_VARIABLE","$this",168],["T_OBJECT_OPERATOR","->",168],["T_STRING","setFlag",168],"(",["T_CONSTANT_ENCAPSED_STRING","'groups_and_stores_joined'",168],",",["T_WHITESPACE"," ",168],["T_STRING","true",168],")",";",["T_WHITESPACE","\n        ",168],"}",["T_WHITESPACE","\n        ",169],["T_RETURN","return",170],["T_WHITESPACE"," ",170],["T_VARIABLE","$this",170],";",["T_WHITESPACE","\n    ",170],"}",["T_WHITESPACE","\n\n    ",171],["T_DOC_COMMENT","\/**\n     * Adding filter by group id or array of ids but only if\n     * tables with appropriate information were joined before.\n     *\n     * @param int|array $groupIds\n     * @return Mage_Core_Model_Resource_Website_Collection\n     *\/",173],["T_WHITESPACE","\n    ",179],["T_PUBLIC","public",180],["T_WHITESPACE"," ",180],["T_FUNCTION","function",180],["T_WHITESPACE"," ",180],["T_STRING","addFilterByGroupIds",180],"(",["T_VARIABLE","$groupIds",180],")",["T_WHITESPACE","\n    ",180],"{",["T_WHITESPACE","\n        ",181],["T_IF","if",182],["T_WHITESPACE"," ",182],"(",["T_VARIABLE","$this",182],["T_OBJECT_OPERATOR","->",182],["T_STRING","getFlag",182],"(",["T_CONSTANT_ENCAPSED_STRING","'groups_and_stores_joined'",182],")",")",["T_WHITESPACE"," ",182],"{",["T_WHITESPACE","\n            ",182],["T_VARIABLE","$this",183],["T_OBJECT_OPERATOR","->",183],["T_STRING","addFieldToFilter",183],"(",["T_CONSTANT_ENCAPSED_STRING","'group_table.group_id'",183],",",["T_WHITESPACE"," ",183],["T_VARIABLE","$groupIds",183],")",";",["T_WHITESPACE","\n        ",183],"}",["T_WHITESPACE","\n        ",184],["T_RETURN","return",185],["T_WHITESPACE"," ",185],["T_VARIABLE","$this",185],";",["T_WHITESPACE","\n    ",185],"}",["T_WHITESPACE","\n",186],"}",["T_WHITESPACE","\n",187]]
[["T_OPEN_TAG","<?php\n",1],["T_DOC_COMMENT","\/**\n * Magento\n *\n * NOTICE OF LICENSE\n *\n * This source file is subject to the Open Software License (OSL 3.0)\n * that is bundled with this package in the file LICENSE.txt.\n * It is also available through the world-wide-web at this URL:\n * http:\/\/opensource.org\/licenses\/osl-3.0.php\n * If you did not receive a copy of the license and are unable to\n * obtain it through the world-wide-web, please send an email\n * to license@magento.com so we can send you a copy immediately.\n *\n * DISCLAIMER\n *\n * Do not edit or add to this file if you wish to upgrade Magento to newer\n * versions in the future. If you wish to customize Magento for your\n * needs please refer to http:\/\/www.magento.com for more information.\n *\n * @category    Mage\n * @package     Mage_Core\n * @copyright  Copyright (c) 2006-2016 X.commerce, Inc. and affiliates (http:\/\/www.magento.com)\n * @license    http:\/\/opensource.org\/licenses\/osl-3.0.php  Open Software License (OSL 3.0)\n *\/",2],["T_WHITESPACE","\n\n",25],["T_DOC_COMMENT","\/**\n * Core Cookie helper\n *\n * @category    Mage\n * @package     Mage_Core\n * @author      Magento Core Team <core@magentocommerce.com>\n *\/",27],["T_WHITESPACE","\n",33],["T_CLASS","class",34],["T_WHITESPACE"," ",34],["T_STRING","Mage_Core_Helper_Cookie",34],["T_WHITESPACE"," ",34],["T_EXTENDS","extends",34],["T_WHITESPACE"," ",34],["T_STRING","Mage_Core_Helper_Abstract",34],["T_WHITESPACE","\n",34],"{",["T_WHITESPACE","\n    ",35],["T_DOC_COMMENT","\/**\n     * Cookie name for users who allowed cookie save\n     *\/",36],["T_WHITESPACE","\n    ",38],["T_CONST","const",39],["T_WHITESPACE"," ",39],["T_STRING","IS_USER_ALLOWED_SAVE_COOKIE",39],["T_WHITESPACE","  ",39],"=",["T_WHITESPACE"," ",39],["T_CONSTANT_ENCAPSED_STRING","'user_allowed_save_cookie'",39],";",["T_WHITESPACE","\n\n    ",39],["T_DOC_COMMENT","\/**\n     * Path to configuration, check is enable cookie restriction mode\n     *\/",41],["T_WHITESPACE","\n    ",43],["T_CONST","const",44],["T_WHITESPACE"," ",44],["T_STRING","XML_PATH_COOKIE_RESTRICTION",44],["T_WHITESPACE","  ",44],"=",["T_WHITESPACE"," ",44],["T_CONSTANT_ENCAPSED_STRING","'web\/cookie\/cookie_restriction'",44],";",["T_WHITESPACE","\n\n    ",44],["T_DOC_COMMENT","\/**\n     * Cookie restriction lifetime configuration path\n     *\/",46],["T_WHITESPACE","\n    ",48],["T_CONST","const",49],["T_WHITESPACE"," ",49],["T_STRING","XML_PATH_COOKIE_RESTRICTION_LIFETIME",49],["T_WHITESPACE"," ",49],"=",["T_WHITESPACE"," ",49],["T_CONSTANT_ENCAPSED_STRING","'web\/cookie\/cookie_restriction_lifetime'",49],";",["T_WHITESPACE","\n\n    ",49],["T_DOC_COMMENT","\/**\n     * Cookie restriction notice cms block identifier\n     *\/",51],["T_WHITESPACE","\n    ",53],["T_CONST","const",54],["T_WHITESPACE"," ",54],["T_STRING","COOKIE_RESTRICTION_NOTICE_CMS_BLOCK_IDENTIFIER",54],["T_WHITESPACE"," ",54],"=",["T_WHITESPACE"," ",54],["T_CONSTANT_ENCAPSED_STRING","'cookie_restriction_notice_block'",54],";",["T_WHITESPACE","\n\n    ",54],["T_DOC_COMMENT","\/**\n     * Store instance\n     *\n     * @var Mage_Core_Model_Store\n     *\/",56],["T_WHITESPACE","\n    ",60],["T_PROTECTED","protected",61],["T_WHITESPACE"," ",61],["T_VARIABLE","$_currentStore",61],";",["T_WHITESPACE","\n\n    ",61],["T_DOC_COMMENT","\/**\n     * Cookie instance\n     *\n     * @var Mage_Core_Model_Cookie\n     *\/",63],["T_WHITESPACE","\n    ",67],["T_PROTECTED","protected",68],["T_WHITESPACE"," ",68],["T_VARIABLE","$_cookieModel",68],";",["T_WHITESPACE","\n\n    ",68],["T_DOC_COMMENT","\/**\n     * Website instance\n     *\n     * @var Mage_Core_Model_Website\n     *\/",70],["T_WHITESPACE","\n    ",74],["T_PROTECTED","protected",75],["T_WHITESPACE"," ",75],["T_VARIABLE","$_website",75],";",["T_WHITESPACE","\n\n    ",75],["T_DOC_COMMENT","\/**\n     * Initializes store, cookie and website objects.\n     *\n     * @param array $data\n     * @throws InvalidArgumentException\n     *\/",77],["T_WHITESPACE","\n    ",82],["T_PUBLIC","public",83],["T_WHITESPACE"," ",83],["T_FUNCTION","function",83],["T_WHITESPACE"," ",83],["T_STRING","__construct",83],"(",["T_ARRAY","array",83],["T_WHITESPACE"," ",83],["T_VARIABLE","$data",83],["T_WHITESPACE"," ",83],"=",["T_WHITESPACE"," ",83],["T_ARRAY","array",83],"(",")",")",["T_WHITESPACE","\n    ",83],"{",["T_WHITESPACE","\n        ",84],["T_VARIABLE","$this",85],["T_OBJECT_OPERATOR","->",85],["T_STRING","_currentStore",85],["T_WHITESPACE"," ",85],"=",["T_WHITESPACE"," ",85],["T_ISSET","isset",85],"(",["T_VARIABLE","$data",85],"[",["T_CONSTANT_ENCAPSED_STRING","'current_store'",85],"]",")",["T_WHITESPACE"," ",85],"?",["T_WHITESPACE"," ",85],["T_VARIABLE","$data",85],"[",["T_CONSTANT_ENCAPSED_STRING","'current_store'",85],"]",["T_WHITESPACE"," ",85],":",["T_WHITESPACE"," ",85],["T_STRING","Mage",85],["T_DOUBLE_COLON","::",85],["T_STRING","app",85],"(",")",["T_OBJECT_OPERATOR","->",85],["T_STRING","getStore",85],"(",")",";",["T_WHITESPACE","\n\n        ",85],["T_IF","if",87],["T_WHITESPACE"," ",87],"(","!",["T_VARIABLE","$this",87],["T_OBJECT_OPERATOR","->",87],["T_STRING","_currentStore",87],["T_WHITESPACE"," ",87],["T_INSTANCEOF","instanceof",87],["T_WHITESPACE"," ",87],["T_STRING","Mage_Core_Model_Store",87],")",["T_WHITESPACE"," ",87],"{",["T_WHITESPACE","\n            ",87],["T_THROW","throw",88],["T_WHITESPACE"," ",88],["T_NEW","new",88],["T_WHITESPACE"," ",88],["T_STRING","InvalidArgumentException",88],"(",["T_CONSTANT_ENCAPSED_STRING","'Required store object is invalid'",88],")",";",["T_WHITESPACE","\n        ",88],"}",["T_WHITESPACE","\n\n        ",89],["T_VARIABLE","$this",91],["T_OBJECT_OPERATOR","->",91],["T_STRING","_cookieModel",91],["T_WHITESPACE"," ",91],"=",["T_WHITESPACE"," ",91],["T_ISSET","isset",91],"(",["T_VARIABLE","$data",91],"[",["T_CONSTANT_ENCAPSED_STRING","'cookie_model'",91],"]",")",["T_WHITESPACE","\n            ",91],"?",["T_WHITESPACE"," ",92],["T_VARIABLE","$data",92],"[",["T_CONSTANT_ENCAPSED_STRING","'cookie_model'",92],"]",["T_WHITESPACE"," ",92],":",["T_WHITESPACE"," ",92],["T_STRING","Mage",92],["T_DOUBLE_COLON","::",92],["T_STRING","getSingleton",92],"(",["T_CONSTANT_ENCAPSED_STRING","'core\/cookie'",92],")",";",["T_WHITESPACE","\n\n        ",92],["T_IF","if",94],["T_WHITESPACE"," ",94],"(","!",["T_VARIABLE","$this",94],["T_OBJECT_OPERATOR","->",94],["T_STRING","_cookieModel",94],["T_WHITESPACE"," ",94],["T_INSTANCEOF","instanceof",94],["T_WHITESPACE"," ",94],["T_STRING","Mage_Core_Model_Cookie",94],")",["T_WHITESPACE"," ",94],"{",["T_WHITESPACE","\n            ",94],["T_THROW","throw",95],["T_WHITESPACE"," ",95],["T_NEW","new",95],["T_WHITESPACE"," ",95],["T_STRING","InvalidArgumentException",95],"(",["T_CONSTANT_ENCAPSED_STRING","'Required cookie object is invalid'",95],")",";",["T_WHITESPACE","\n        ",95],"}",["T_WHITESPACE","\n\n        ",96],["T_VARIABLE","$this",98],["T_OBJECT_OPERATOR","->",98],["T_STRING","_website",98],["T_WHITESPACE"," ",98],"=",["T_WHITESPACE"," ",98],["T_ISSET","isset",98],"(",["T_VARIABLE","$data",98],"[",["T_CONSTANT_ENCAPSED_STRING","'website'",98],"]",")",["T_WHITESPACE"," ",98],"?",["T_WHITESPACE"," ",98],["T_VARIABLE","$data",98],"[",["T_CONSTANT_ENCAPSED_STRING","'website'",98],"]",["T_WHITESPACE"," ",98],":",["T_WHITESPACE"," ",98],["T_STRING","Mage",98],["T_DOUBLE_COLON","::",98],["T_STRING","app",98],"(",")",["T_OBJECT_OPERATOR","->",98],["T_STRING","getWebsite",98],"(",")",";",["T_WHITESPACE","\n\n        ",98],["T_IF","if",100],["T_WHITESPACE"," ",100],"(","!",["T_VARIABLE","$this",100],["T_OBJECT_OPERATOR","->",100],["T_STRING","_website",100],["T_WHITESPACE"," ",100],["T_INSTANCEOF","instanceof",100],["T_WHITESPACE"," ",100],["T_STRING","Mage_Core_Model_Website",100],")",["T_WHITESPACE"," ",100],"{",["T_WHITESPACE","\n            ",100],["T_THROW","throw",101],["T_WHITESPACE"," ",101],["T_NEW","new",101],["T_WHITESPACE"," ",101],["T_STRING","InvalidArgumentException",101],"(",["T_CONSTANT_ENCAPSED_STRING","'Required website object is invalid'",101],")",";",["T_WHITESPACE","\n        ",101],"}",["T_WHITESPACE","\n    ",102],"}",["T_WHITESPACE","\n\n    ",103],["T_DOC_COMMENT","\/**\n     * Check if cookie restriction notice should be displayed\n     *\n     * @return bool\n     *\/",105],["T_WHITESPACE","\n    ",109],["T_PUBLIC","public",110],["T_WHITESPACE"," ",110],["T_FUNCTION","function",110],["T_WHITESPACE"," ",110],["T_STRING","isUserNotAllowSaveCookie",110],"(",")",["T_WHITESPACE","\n    ",110],"{",["T_WHITESPACE","\n        ",111],["T_VARIABLE","$acceptedSaveCookiesWebsites",112],["T_WHITESPACE"," ",112],"=",["T_WHITESPACE"," ",112],["T_VARIABLE","$this",112],["T_OBJECT_OPERATOR","->",112],["T_STRING","_getAcceptedSaveCookiesWebsites",112],"(",")",";",["T_WHITESPACE","\n        ",112],["T_RETURN","return",113],["T_WHITESPACE"," ",113],["T_VARIABLE","$this",113],["T_OBJECT_OPERATOR","->",113],["T_STRING","_currentStore",113],["T_OBJECT_OPERATOR","->",113],["T_STRING","getConfig",113],"(",["T_STRING","self",113],["T_DOUBLE_COLON","::",113],["T_STRING","XML_PATH_COOKIE_RESTRICTION",113],")",["T_WHITESPACE"," ",113],["T_BOOLEAN_AND","&&",113],["T_WHITESPACE","\n            ",113],["T_EMPTY","empty",114],"(",["T_VARIABLE","$acceptedSaveCookiesWebsites",114],"[",["T_VARIABLE","$this",114],["T_OBJECT_OPERATOR","->",114],["T_STRING","_website",114],["T_OBJECT_OPERATOR","->",114],["T_STRING","getId",114],"(",")","]",")",";",["T_WHITESPACE","\n    ",114],"}",["T_WHITESPACE","\n\n    ",115],["T_DOC_COMMENT","\/**\n     * Return serialized list of accepted save cookie website\n     *\n     * @return string\n     *\/",117],["T_WHITESPACE","\n    ",121],["T_PUBLIC","public",122],["T_WHITESPACE"," ",122],["T_FUNCTION","function",122],["T_WHITESPACE"," ",122],["T_STRING","getAcceptedSaveCookiesWebsiteIds",122],"(",")",["T_WHITESPACE","\n    ",122],"{",["T_WHITESPACE","\n        ",123],["T_VARIABLE","$acceptedSaveCookiesWebsites",124],["T_WHITESPACE"," ",124],"=",["T_WHITESPACE"," ",124],["T_VARIABLE","$this",124],["T_OBJECT_OPERATOR","->",124],["T_STRING","_getAcceptedSaveCookiesWebsites",124],"(",")",";",["T_WHITESPACE","\n        ",124],["T_VARIABLE","$acceptedSaveCookiesWebsites",125],"[",["T_VARIABLE","$this",125],["T_OBJECT_OPERATOR","->",125],["T_STRING","_website",125],["T_OBJECT_OPERATOR","->",125],["T_STRING","getId",125],"(",")","]",["T_WHITESPACE"," ",125],"=",["T_WHITESPACE"," ",125],["T_LNUMBER","1",125],";",["T_WHITESPACE","\n        ",125],["T_RETURN","return",126],["T_WHITESPACE"," ",126],["T_STRING","json_encode",126],"(",["T_VARIABLE","$acceptedSaveCookiesWebsites",126],")",";",["T_WHITESPACE","\n    ",126],"}",["T_WHITESPACE","\n\n    ",127],["T_DOC_COMMENT","\/**\n     * Get accepted save cookies websites\n     *\n     * @return array\n     *\/",129],["T_WHITESPACE","\n    ",133],["T_PROTECTED","protected",134],["T_WHITESPACE"," ",134],["T_FUNCTION","function",134],["T_WHITESPACE"," ",134],["T_STRING","_getAcceptedSaveCookiesWebsites",134],"(",")",["T_WHITESPACE","\n    ",134],"{",["T_WHITESPACE","\n        ",135],["T_VARIABLE","$serializedList",136],["T_WHITESPACE"," ",136],"=",["T_WHITESPACE"," ",136],["T_VARIABLE","$this",136],["T_OBJECT_OPERATOR","->",136],["T_STRING","_cookieModel",136],["T_OBJECT_OPERATOR","->",136],["T_STRING","get",136],"(",["T_STRING","self",136],["T_DOUBLE_COLON","::",136],["T_STRING","IS_USER_ALLOWED_SAVE_COOKIE",136],")",";",["T_WHITESPACE","\n        ",136],["T_VARIABLE","$unSerializedList",137],["T_WHITESPACE"," ",137],"=",["T_WHITESPACE"," ",137],["T_STRING","json_decode",137],"(",["T_VARIABLE","$serializedList",137],",",["T_WHITESPACE"," ",137],["T_STRING","true",137],")",";",["T_WHITESPACE","\n        ",137],["T_RETURN","return",138],["T_WHITESPACE"," ",138],["T_STRING","is_array",138],"(",["T_VARIABLE","$unSerializedList",138],")",["T_WHITESPACE"," ",138],"?",["T_WHITESPACE"," ",138],["T_VARIABLE","$unSerializedList",138],["T_WHITESPACE"," ",138],":",["T_WHITESPACE"," ",138],["T_ARRAY","array",138],"(",")",";",["T_WHITESPACE","\n    ",138],"}",["T_WHITESPACE","\n\n    ",139],["T_DOC_COMMENT","\/**\n     * Get cookie restriction lifetime (in seconds)\n     *\n     * @return int\n     *\/",141],["T_WHITESPACE","\n    ",145],["T_PUBLIC","public",146],["T_WHITESPACE"," ",146],["T_FUNCTION","function",146],["T_WHITESPACE"," ",146],["T_STRING","getCookieRestrictionLifetime",146],"(",")",["T_WHITESPACE","\n    ",146],"{",["T_WHITESPACE","\n        ",147],["T_RETURN","return",148],["T_WHITESPACE"," ",148],["T_INT_CAST","(int)",148],["T_VARIABLE","$this",148],["T_OBJECT_OPERATOR","->",148],["T_STRING","_currentStore",148],["T_OBJECT_OPERATOR","->",148],["T_STRING","getConfig",148],"(",["T_STRING","self",148],["T_DOUBLE_COLON","::",148],["T_STRING","XML_PATH_COOKIE_RESTRICTION_LIFETIME",148],")",";",["T_WHITESPACE","\n    ",148],"}",["T_WHITESPACE","\n\n    ",149],["T_DOC_COMMENT","\/**\n     * Get cookie restriction notice cms block identifier\n     *\n     * @return string\n     *\/",151],["T_WHITESPACE","\n    ",155],["T_PUBLIC","public",156],["T_WHITESPACE"," ",156],["T_FUNCTION","function",156],["T_WHITESPACE"," ",156],["T_STRING","getCookieRestrictionNoticeCmsBlockIdentifier",156],"(",")",["T_WHITESPACE","\n    ",156],"{",["T_WHITESPACE","\n        ",157],["T_RETURN","return",158],["T_WHITESPACE"," ",158],["T_STRING","self",158],["T_DOUBLE_COLON","::",158],["T_STRING","COOKIE_RESTRICTION_NOTICE_CMS_BLOCK_IDENTIFIER",158],";",["T_WHITESPACE","\n    ",158],"}",["T_WHITESPACE","\n",159],"}",["T_WHITESPACE","\n",160]]
[["T_OPEN_TAG","<?php\n",1],["T_DOC_COMMENT","\/**\n * Magento\n *\n * NOTICE OF LICENSE\n *\n * This source file is subject to the Open Software License (OSL 3.0)\n * that is bundled with this package in the file LICENSE.txt.\n * It is also available through the world-wide-web at this URL:\n * http:\/\/opensource.org\/licenses\/osl-3.0.php\n * If you did not receive a copy of the license and are unable to\n * obtain it through the world-wide-web, please send an email\n * to license@magento.com so we can send you a copy immediately.\n *\n * DISCLAIMER\n *\n * Do not edit or add to this file if you wish to upgrade Magento to newer\n * versions in the future. If you wish to customize Magento for your\n * needs please refer to http:\/\/www.magento.com for more information.\n *\n * @category    Tests\n * @package     Tests_Functional\n * @copyright  Copyright (c) 2006-2016 X.commerce, Inc. and affiliates (http:\/\/www.magento.com)\n * @license    http:\/\/opensource.org\/licenses\/osl-3.0.php  Open Software License (OSL 3.0)\n *\/",2],["T_WHITESPACE","\n\n",25],["T_NAMESPACE","namespace",27],["T_WHITESPACE"," ",27],["T_STRING","Mage",27],["T_NS_SEPARATOR","\\",27],["T_STRING","Tax",27],["T_NS_SEPARATOR","\\",27],["T_STRING","Test",27],["T_NS_SEPARATOR","\\",27],["T_STRING","Constraint",27],";",["T_WHITESPACE","\n\n",27],["T_USE","use",29],["T_WHITESPACE"," ",29],["T_STRING","Mage",29],["T_NS_SEPARATOR","\\",29],["T_STRING","Cms",29],["T_NS_SEPARATOR","\\",29],["T_STRING","Test",29],["T_NS_SEPARATOR","\\",29],["T_STRING","Page",29],["T_NS_SEPARATOR","\\",29],["T_STRING","CmsIndex",29],";",["T_WHITESPACE","\n",29],["T_USE","use",30],["T_WHITESPACE"," ",30],["T_STRING","Mage",30],["T_NS_SEPARATOR","\\",30],["T_STRING","Catalog",30],["T_NS_SEPARATOR","\\",30],["T_STRING","Test",30],["T_NS_SEPARATOR","\\",30],["T_STRING","Page",30],["T_NS_SEPARATOR","\\",30],["T_STRING","Category",30],["T_NS_SEPARATOR","\\",30],["T_STRING","CatalogCategoryView",30],";",["T_WHITESPACE","\n",30],["T_USE","use",31],["T_WHITESPACE"," ",31],["T_STRING","Mage",31],["T_NS_SEPARATOR","\\",31],["T_STRING","Catalog",31],["T_NS_SEPARATOR","\\",31],["T_STRING","Test",31],["T_NS_SEPARATOR","\\",31],["T_STRING","Page",31],["T_NS_SEPARATOR","\\",31],["T_STRING","Product",31],["T_NS_SEPARATOR","\\",31],["T_STRING","CatalogProductView",31],";",["T_WHITESPACE","\n",31],["T_USE","use",32],["T_WHITESPACE"," ",32],["T_STRING","Mage",32],["T_NS_SEPARATOR","\\",32],["T_STRING","Checkout",32],["T_NS_SEPARATOR","\\",32],["T_STRING","Test",32],["T_NS_SEPARATOR","\\",32],["T_STRING","Page",32],["T_NS_SEPARATOR","\\",32],["T_STRING","CheckoutCart",32],";",["T_WHITESPACE","\n",32],["T_USE","use",33],["T_WHITESPACE"," ",33],["T_STRING","Mage",33],["T_NS_SEPARATOR","\\",33],["T_STRING","Customer",33],["T_NS_SEPARATOR","\\",33],["T_STRING","Test",33],["T_NS_SEPARATOR","\\",33],["T_STRING","Fixture",33],["T_NS_SEPARATOR","\\",33],["T_STRING","Address",33],";",["T_WHITESPACE","\n",33],["T_USE","use",34],["T_WHITESPACE"," ",34],["T_STRING","Magento",34],["T_NS_SEPARATOR","\\",34],["T_STRING","Mtf",34],["T_NS_SEPARATOR","\\",34],["T_STRING","Fixture",34],["T_NS_SEPARATOR","\\",34],["T_STRING","InjectableFixture",34],";",["T_WHITESPACE","\n",34],["T_USE","use",35],["T_WHITESPACE"," ",35],["T_STRING","Mage",35],["T_NS_SEPARATOR","\\",35],["T_STRING","Catalog",35],["T_NS_SEPARATOR","\\",35],["T_STRING","Test",35],["T_NS_SEPARATOR","\\",35],["T_STRING","Block",35],["T_NS_SEPARATOR","\\",35],["T_STRING","Product",35],["T_NS_SEPARATOR","\\",35],["T_STRING","Price",35],";",["T_WHITESPACE","\n",35],["T_USE","use",36],["T_WHITESPACE"," ",36],["T_STRING","Mage",36],["T_NS_SEPARATOR","\\",36],["T_STRING","Adminhtml",36],["T_NS_SEPARATOR","\\",36],["T_STRING","Test",36],["T_NS_SEPARATOR","\\",36],["T_STRING","Page",36],["T_NS_SEPARATOR","\\",36],["T_STRING","Adminhtml",36],["T_NS_SEPARATOR","\\",36],["T_STRING","Cache",36],";",["T_WHITESPACE","\n\n",36],["T_DOC_COMMENT","\/**\n * Checks that prices excl tax on category, product and cart pages are equal to specified in dataset.\n *\/",38],["T_WHITESPACE","\n",40],["T_ABSTRACT","abstract",41],["T_WHITESPACE"," ",41],["T_CLASS","class",41],["T_WHITESPACE"," ",41],["T_STRING","AbstractAssertTaxRuleIsAppliedToAllPrices",41],["T_WHITESPACE"," ",41],["T_EXTENDS","extends",41],["T_WHITESPACE"," ",41],["T_STRING","AbstractAssertTax",41],["T_WHITESPACE","\n",41],"{",["T_WHITESPACE","\n    ",42],["T_DOC_COMMENT","\/**\n     * Cms index page.\n     *\n     * @var CmsIndex\n     *\/",43],["T_WHITESPACE","\n    ",47],["T_PROTECTED","protected",48],["T_WHITESPACE"," ",48],["T_VARIABLE","$cmsIndex",48],";",["T_WHITESPACE","\n\n    ",48],["T_DOC_COMMENT","\/**\n     * Catalog product page.\n     *\n     * @var catalogCategoryView\n     *\/",50],["T_WHITESPACE","\n    ",54],["T_PROTECTED","protected",55],["T_WHITESPACE"," ",55],["T_VARIABLE","$catalogCategoryView",55],";",["T_WHITESPACE","\n\n    ",55],["T_DOC_COMMENT","\/**\n     * Catalog product page.\n     *\n     * @var CatalogProductView\n     *\/",57],["T_WHITESPACE","\n    ",61],["T_PROTECTED","protected",62],["T_WHITESPACE"," ",62],["T_VARIABLE","$catalogProductView",62],";",["T_WHITESPACE","\n\n    ",62],["T_DOC_COMMENT","\/**\n     * Catalog product page.\n     *\n     * @var CheckoutCart\n     *\/",64],["T_WHITESPACE","\n    ",68],["T_PROTECTED","protected",69],["T_WHITESPACE"," ",69],["T_VARIABLE","$checkoutCart",69],";",["T_WHITESPACE","\n\n    ",69],["T_DOC_COMMENT","\/**\n     * Verify fields for category page.\n     *\n     * @var array\n     *\/",71],["T_WHITESPACE","\n    ",75],["T_PROTECTED","protected",76],["T_WHITESPACE"," ",76],["T_VARIABLE","$categoryPrices",76],["T_WHITESPACE"," ",76],"=",["T_WHITESPACE"," ",76],"[",["T_WHITESPACE","\n        ",76],["T_CONSTANT_ENCAPSED_STRING","'category_price_excl_tax'",77],",",["T_WHITESPACE","\n        ",77],["T_CONSTANT_ENCAPSED_STRING","'category_price_incl_tax'",78],["T_WHITESPACE","\n    ",78],"]",";",["T_WHITESPACE","\n\n    ",79],["T_DOC_COMMENT","\/**\n     * Verify fields for product page.\n     *\n     * @var array\n     *\/",81],["T_WHITESPACE","\n    ",85],["T_PROTECTED","protected",86],["T_WHITESPACE"," ",86],["T_VARIABLE","$productPrices",86],["T_WHITESPACE"," ",86],"=",["T_WHITESPACE"," ",86],"[",["T_WHITESPACE","\n        ",86],["T_CONSTANT_ENCAPSED_STRING","'product_view_price_excl_tax'",87],",",["T_WHITESPACE","\n        ",87],["T_CONSTANT_ENCAPSED_STRING","'product_view_price_incl_tax'",88],["T_WHITESPACE","\n    ",88],"]",";",["T_WHITESPACE","\n\n    ",89],["T_DOC_COMMENT","\/**\n     * Assert that specified prices are actual on category, product and cart pages.\n     *\n     * @param InjectableFixture $product\n     * @param CmsIndex $cmsIndex\n     * @param CatalogCategoryView $catalogCategoryView\n     * @param CatalogProductView $catalogProductView\n     * @param CheckoutCart $checkoutCart\n     * @param Address $address\n     * @param Cache $cachePage\n     * @param array $prices\n     * @param array $arguments\n     * @return void\n     *\/",91],["T_WHITESPACE","\n    ",104],["T_PUBLIC","public",105],["T_WHITESPACE"," ",105],["T_FUNCTION","function",105],["T_WHITESPACE"," ",105],["T_STRING","processAssert",105],"(",["T_WHITESPACE","\n        ",105],["T_STRING","InjectableFixture",106],["T_WHITESPACE"," ",106],["T_VARIABLE","$product",106],",",["T_WHITESPACE","\n        ",106],["T_STRING","CmsIndex",107],["T_WHITESPACE"," ",107],["T_VARIABLE","$cmsIndex",107],",",["T_WHITESPACE","\n        ",107],["T_STRING","CatalogCategoryView",108],["T_WHITESPACE"," ",108],["T_VARIABLE","$catalogCategoryView",108],",",["T_WHITESPACE","\n        ",108],["T_STRING","CatalogProductView",109],["T_WHITESPACE"," ",109],["T_VARIABLE","$catalogProductView",109],",",["T_WHITESPACE","\n        ",109],["T_STRING","CheckoutCart",110],["T_WHITESPACE"," ",110],["T_VARIABLE","$checkoutCart",110],",",["T_WHITESPACE","\n        ",110],["T_STRING","Address",111],["T_WHITESPACE"," ",111],["T_VARIABLE","$address",111],",",["T_WHITESPACE","\n        ",111],["T_STRING","Cache",112],["T_WHITESPACE"," ",112],["T_VARIABLE","$cachePage",112],",",["T_WHITESPACE","\n        ",112],["T_ARRAY","array",113],["T_WHITESPACE"," ",113],["T_VARIABLE","$prices",113],",",["T_WHITESPACE","\n        ",113],["T_ARRAY","array",114],["T_WHITESPACE"," ",114],["T_VARIABLE","$arguments",114],["T_WHITESPACE","\n    ",114],")",["T_WHITESPACE"," ",115],"{",["T_WHITESPACE","\n        ",115],["T_VARIABLE","$cachePage",116],["T_OBJECT_OPERATOR","->",116],["T_STRING","open",116],"(",")",["T_OBJECT_OPERATOR","->",116],["T_STRING","getPageActions",116],"(",")",["T_OBJECT_OPERATOR","->",116],["T_STRING","flushCacheStorage",116],"(",")",";",["T_WHITESPACE","\n        ",116],["T_VARIABLE","$this",117],["T_OBJECT_OPERATOR","->",117],["T_STRING","cmsIndex",117],["T_WHITESPACE"," ",117],"=",["T_WHITESPACE"," ",117],["T_VARIABLE","$cmsIndex",117],";",["T_WHITESPACE","\n        ",117],["T_VARIABLE","$this",118],["T_OBJECT_OPERATOR","->",118],["T_STRING","catalogCategoryView",118],["T_WHITESPACE"," ",118],"=",["T_WHITESPACE"," ",118],["T_VARIABLE","$catalogCategoryView",118],";",["T_WHITESPACE","\n        ",118],["T_VARIABLE","$this",119],["T_OBJECT_OPERATOR","->",119],["T_STRING","catalogProductView",119],["T_WHITESPACE"," ",119],"=",["T_WHITESPACE"," ",119],["T_VARIABLE","$catalogProductView",119],";",["T_WHITESPACE","\n        ",119],["T_VARIABLE","$this",120],["T_OBJECT_OPERATOR","->",120],["T_STRING","checkoutCart",120],["T_WHITESPACE"," ",120],"=",["T_WHITESPACE"," ",120],["T_VARIABLE","$checkoutCart",120],";",["T_WHITESPACE","\n        ",120],["T_VARIABLE","$prices",121],["T_WHITESPACE"," ",121],"=",["T_WHITESPACE"," ",121],["T_VARIABLE","$this",121],["T_OBJECT_OPERATOR","->",121],["T_STRING","prepareVerifyFields",121],"(",["T_VARIABLE","$prices",121],")",";",["T_WHITESPACE","\n\n        ",121],["T_COMMENT","\/\/Assertion steps\n",123],["T_WHITESPACE","        ",124],["T_VARIABLE","$productName",124],["T_WHITESPACE"," ",124],"=",["T_WHITESPACE"," ",124],["T_VARIABLE","$product",124],["T_OBJECT_OPERATOR","->",124],["T_STRING","getName",124],"(",")",";",["T_WHITESPACE","\n        ",124],["T_VARIABLE","$this",125],["T_OBJECT_OPERATOR","->",125],["T_STRING","cmsIndex",125],["T_OBJECT_OPERATOR","->",125],["T_STRING","open",125],"(",")",["T_OBJECT_OPERATOR","->",125],["T_STRING","getTopmenu",125],"(",")",["T_OBJECT_OPERATOR","->",125],["T_STRING","selectCategory",125],"(",["T_VARIABLE","$product",125],["T_OBJECT_OPERATOR","->",125],["T_STRING","getCategoryIds",125],"(",")","[",["T_LNUMBER","0",125],"]",")",";",["T_WHITESPACE","\n        ",125],["T_VARIABLE","$actualPrices",126],["T_WHITESPACE"," ",126],"=",["T_WHITESPACE"," ",126],["T_VARIABLE","$this",126],["T_OBJECT_OPERATOR","->",126],["T_STRING","getCategoryPrices",126],"(",["T_VARIABLE","$product",126],")",";",["T_WHITESPACE","\n        ",126],["T_VARIABLE","$catalogCategoryView",127],["T_OBJECT_OPERATOR","->",127],["T_STRING","getListProductBlock",127],"(",")",["T_OBJECT_OPERATOR","->",127],["T_STRING","openProductViewPage",127],"(",["T_VARIABLE","$productName",127],")",";",["T_WHITESPACE","\n        ",127],["T_VARIABLE","$this",128],["T_OBJECT_OPERATOR","->",128],["T_STRING","fillCheckoutData",128],"(",["T_VARIABLE","$product",128],")",";",["T_WHITESPACE","\n        ",128],["T_VARIABLE","$actualPrices",129],["T_WHITESPACE"," ",129],"=",["T_WHITESPACE"," ",129],["T_STRING","array_merge",129],"(",["T_VARIABLE","$actualPrices",129],",",["T_WHITESPACE"," ",129],["T_VARIABLE","$this",129],["T_OBJECT_OPERATOR","->",129],["T_STRING","getProductPagePrices",129],"(",")",")",";",["T_WHITESPACE","\n        ",129],["T_VARIABLE","$catalogProductView",130],["T_OBJECT_OPERATOR","->",130],["T_STRING","getViewBlock",130],"(",")",["T_OBJECT_OPERATOR","->",130],["T_STRING","clickAddToCart",130],"(",")",";",["T_WHITESPACE","\n        ",130],["T_IF","if",131],["T_WHITESPACE"," ",131],"(",["T_ISSET","isset",131],"(",["T_VARIABLE","$arguments",131],"[",["T_CONSTANT_ENCAPSED_STRING","'shipping'",131],"]",")",")",["T_WHITESPACE"," ",131],"{",["T_WHITESPACE","\n            ",131],["T_VARIABLE","$this",132],["T_OBJECT_OPERATOR","->",132],["T_STRING","fillEstimateBlock",132],"(",["T_VARIABLE","$address",132],",",["T_WHITESPACE"," ",132],["T_VARIABLE","$arguments",132],"[",["T_CONSTANT_ENCAPSED_STRING","'shipping'",132],"]",")",";",["T_WHITESPACE","\n        ",132],"}",["T_WHITESPACE","\n        ",133],["T_VARIABLE","$actualPrices",134],["T_WHITESPACE"," ",134],"=",["T_WHITESPACE"," ",134],["T_STRING","array_merge",134],"(",["T_VARIABLE","$actualPrices",134],",",["T_WHITESPACE"," ",134],["T_VARIABLE","$this",134],["T_OBJECT_OPERATOR","->",134],["T_STRING","getCartPrices",134],"(",["T_VARIABLE","$product",134],")",",",["T_WHITESPACE"," ",134],["T_VARIABLE","$this",134],["T_OBJECT_OPERATOR","->",134],["T_STRING","getTotals",134],"(",["T_VARIABLE","$actualPrices",134],")",")",";",["T_WHITESPACE","\n\n        ",134],["T_COMMENT","\/\/Prices verification\n",136],["T_WHITESPACE","        ",137],["T_VARIABLE","$error",137],["T_WHITESPACE"," ",137],"=",["T_WHITESPACE"," ",137],["T_VARIABLE","$this",137],["T_OBJECT_OPERATOR","->",137],["T_STRING","verifyData",137],"(",["T_VARIABLE","$prices",137],",",["T_WHITESPACE"," ",137],["T_VARIABLE","$actualPrices",137],")",";",["T_WHITESPACE","\n        ",137],["T_NS_SEPARATOR","\\",138],["T_STRING","PHPUnit_Framework_Assert",138],["T_DOUBLE_COLON","::",138],["T_STRING","assertTrue",138],"(",["T_EMPTY","empty",138],"(",["T_VARIABLE","$error",138],")",",",["T_WHITESPACE"," ",138],["T_VARIABLE","$error",138],")",";",["T_WHITESPACE","\n    ",138],"}",["T_WHITESPACE","\n\n    ",139],["T_DOC_COMMENT","\/**\n     * Unset category and product page expected prices.\n     *\n     * @param array $prices\n     * @return array\n     *\/",141],["T_WHITESPACE","\n    ",146],["T_PROTECTED","protected",147],["T_WHITESPACE"," ",147],["T_FUNCTION","function",147],["T_WHITESPACE"," ",147],["T_STRING","preparePrices",147],"(",["T_ARRAY","array",147],["T_WHITESPACE"," ",147],["T_VARIABLE","$prices",147],")",["T_WHITESPACE","\n    ",147],"{",["T_WHITESPACE","\n        ",148],["T_VARIABLE","$generalPrices",149],["T_WHITESPACE"," ",149],"=",["T_WHITESPACE"," ",149],["T_STRING","parent",149],["T_DOUBLE_COLON","::",149],["T_STRING","preparePrices",149],"(",["T_VARIABLE","$prices",149],")",";",["T_WHITESPACE","\n        ",149],["T_VARIABLE","$categoryPrices",150],["T_WHITESPACE"," ",150],"=",["T_WHITESPACE"," ",150],["T_STRING","array_intersect_key",150],"(",["T_VARIABLE","$prices",150],",",["T_WHITESPACE"," ",150],["T_STRING","array_flip",150],"(",["T_VARIABLE","$this",150],["T_OBJECT_OPERATOR","->",150],["T_STRING","categoryPrices",150],")",")",";",["T_WHITESPACE","\n        ",150],["T_VARIABLE","$productPrices",151],["T_WHITESPACE"," ",151],"=",["T_WHITESPACE"," ",151],["T_STRING","array_intersect_key",151],"(",["T_VARIABLE","$prices",151],",",["T_WHITESPACE"," ",151],["T_STRING","array_flip",151],"(",["T_VARIABLE","$this",151],["T_OBJECT_OPERATOR","->",151],["T_STRING","productPrices",151],")",")",";",["T_WHITESPACE","\n\n        ",151],["T_RETURN","return",153],["T_WHITESPACE"," ",153],["T_STRING","array_merge",153],"(",["T_VARIABLE","$generalPrices",153],",",["T_WHITESPACE"," ",153],["T_VARIABLE","$categoryPrices",153],",",["T_WHITESPACE"," ",153],["T_VARIABLE","$productPrices",153],")",";",["T_WHITESPACE","\n    ",153],"}",["T_WHITESPACE","\n\n    ",154],["T_DOC_COMMENT","\/**\n     * Get prices on category page.\n     *\n     * @param InjectableFixture $product\n     * @return array\n     *\/",156],["T_WHITESPACE","\n    ",161],["T_PROTECTED","protected",162],["T_WHITESPACE"," ",162],["T_FUNCTION","function",162],["T_WHITESPACE"," ",162],["T_STRING","getCategoryPrices",162],"(",["T_STRING","InjectableFixture",162],["T_WHITESPACE"," ",162],["T_VARIABLE","$product",162],")",["T_WHITESPACE","\n    ",162],"{",["T_WHITESPACE","\n        ",163],["T_VARIABLE","$result",164],["T_WHITESPACE"," ",164],"=",["T_WHITESPACE"," ",164],"[","]",";",["T_WHITESPACE","\n        ",164],["T_VARIABLE","$priceBlock",165],["T_WHITESPACE"," ",165],"=",["T_WHITESPACE"," ",165],["T_VARIABLE","$this",165],["T_OBJECT_OPERATOR","->",165],["T_STRING","catalogCategoryView",165],["T_OBJECT_OPERATOR","->",165],["T_STRING","getListProductBlock",165],"(",")",["T_OBJECT_OPERATOR","->",165],["T_STRING","getProductPriceBlock",165],"(",["T_VARIABLE","$product",165],["T_OBJECT_OPERATOR","->",165],["T_STRING","getName",165],"(",")",")",";",["T_WHITESPACE","\n        ",165],["T_FOREACH","foreach",166],["T_WHITESPACE"," ",166],"(",["T_VARIABLE","$this",166],["T_OBJECT_OPERATOR","->",166],["T_STRING","categoryPrices",166],["T_WHITESPACE"," ",166],["T_AS","as",166],["T_WHITESPACE"," ",166],["T_VARIABLE","$item",166],")",["T_WHITESPACE"," ",166],"{",["T_WHITESPACE","\n            ",166],["T_VARIABLE","$result",167],"[",["T_VARIABLE","$item",167],"]",["T_WHITESPACE"," ",167],"=",["T_WHITESPACE"," ",167],["T_VARIABLE","$this",167],["T_OBJECT_OPERATOR","->",167],["T_STRING","getPrice",167],"(",["T_VARIABLE","$priceBlock",167],",",["T_WHITESPACE"," ",167],["T_VARIABLE","$item",167],")",";",["T_WHITESPACE","\n        ",167],"}",["T_WHITESPACE","\n\n        ",168],["T_RETURN","return",170],["T_WHITESPACE"," ",170],["T_VARIABLE","$result",170],";",["T_WHITESPACE","\n    ",170],"}",["T_WHITESPACE","\n\n    ",171],["T_DOC_COMMENT","\/**\n     * Get product view prices.\n     *\n     * @return array\n     *\/",173],["T_WHITESPACE","\n    ",177],["T_PROTECTED","protected",178],["T_WHITESPACE"," ",178],["T_FUNCTION","function",178],["T_WHITESPACE"," ",178],["T_STRING","getProductPagePrices",178],"(",")",["T_WHITESPACE","\n    ",178],"{",["T_WHITESPACE","\n        ",179],["T_VARIABLE","$result",180],["T_WHITESPACE"," ",180],"=",["T_WHITESPACE"," ",180],"[","]",";",["T_WHITESPACE","\n        ",180],["T_VARIABLE","$viewBlock",181],["T_WHITESPACE"," ",181],"=",["T_WHITESPACE"," ",181],["T_VARIABLE","$this",181],["T_OBJECT_OPERATOR","->",181],["T_STRING","catalogProductView",181],["T_OBJECT_OPERATOR","->",181],["T_STRING","getViewBlock",181],"(",")",["T_OBJECT_OPERATOR","->",181],["T_STRING","getPriceBlock",181],"(",")",";",["T_WHITESPACE","\n        ",181],["T_FOREACH","foreach",182],["T_WHITESPACE"," ",182],"(",["T_VARIABLE","$this",182],["T_OBJECT_OPERATOR","->",182],["T_STRING","productPrices",182],["T_WHITESPACE"," ",182],["T_AS","as",182],["T_WHITESPACE"," ",182],["T_VARIABLE","$item",182],")",["T_WHITESPACE"," ",182],"{",["T_WHITESPACE","\n            ",182],["T_VARIABLE","$result",183],"[",["T_VARIABLE","$item",183],"]",["T_WHITESPACE"," ",183],"=",["T_WHITESPACE"," ",183],"(",["T_STRING","count",183],"(",["T_VARIABLE","$this",183],["T_OBJECT_OPERATOR","->",183],["T_STRING","categoryPrices",183],")",["T_WHITESPACE"," ",183],["T_IS_EQUAL","==",183],["T_WHITESPACE"," ",183],["T_LNUMBER","1",183],")",["T_WHITESPACE","\n                ",183],"?",["T_WHITESPACE"," ",184],["T_VARIABLE","$this",184],["T_OBJECT_OPERATOR","->",184],["T_STRING","getPrice",184],"(",["T_VARIABLE","$viewBlock",184],",",["T_WHITESPACE"," ",184],["T_CONSTANT_ENCAPSED_STRING","'special_price'",184],")",["T_WHITESPACE","\n                ",184],":",["T_WHITESPACE"," ",185],["T_VARIABLE","$this",185],["T_OBJECT_OPERATOR","->",185],["T_STRING","getPrice",185],"(",["T_VARIABLE","$viewBlock",185],",",["T_WHITESPACE"," ",185],["T_VARIABLE","$item",185],")",";",["T_WHITESPACE","\n        ",185],"}",["T_WHITESPACE","\n        ",186],["T_RETURN","return",187],["T_WHITESPACE"," ",187],["T_VARIABLE","$result",187],";",["T_WHITESPACE","\n    ",187],"}",["T_WHITESPACE","\n\n    ",188],["T_DOC_COMMENT","\/**\n     * Get price.\n     *\n     * @param Price $block\n     * @param string $type\n     * @param string $currency\n     * @return string|null\n     *\/",190],["T_WHITESPACE","\n    ",197],["T_PROTECTED","protected",198],["T_WHITESPACE"," ",198],["T_FUNCTION","function",198],["T_WHITESPACE"," ",198],["T_STRING","getPrice",198],"(",["T_STRING","Price",198],["T_WHITESPACE"," ",198],["T_VARIABLE","$block",198],",",["T_WHITESPACE"," ",198],["T_VARIABLE","$type",198],",",["T_WHITESPACE"," ",198],["T_VARIABLE","$currency",198],["T_WHITESPACE"," ",198],"=",["T_WHITESPACE"," ",198],["T_CONSTANT_ENCAPSED_STRING","'$'",198],")",["T_WHITESPACE","\n    ",198],"{",["T_WHITESPACE","\n        ",199],["T_VARIABLE","$price",200],["T_WHITESPACE"," ",200],"=",["T_WHITESPACE"," ",200],["T_VARIABLE","$block",200],["T_OBJECT_OPERATOR","->",200],["T_STRING","getTypePriceElement",200],"(",["T_VARIABLE","$type",200],")",";",["T_WHITESPACE","\n        ",200],["T_RETURN","return",201],["T_WHITESPACE"," ",201],["T_VARIABLE","$price",201],["T_OBJECT_OPERATOR","->",201],["T_STRING","isVisible",201],"(",")",["T_WHITESPACE"," ",201],"?",["T_WHITESPACE"," ",201],["T_STRING","trim",201],"(",["T_VARIABLE","$price",201],["T_OBJECT_OPERATOR","->",201],["T_STRING","getText",201],"(",")",",",["T_WHITESPACE"," ",201],["T_VARIABLE","$currency",201],")",["T_WHITESPACE"," ",201],":",["T_WHITESPACE"," ",201],["T_STRING","null",201],";",["T_WHITESPACE","\n    ",201],"}",["T_WHITESPACE","\n\n    ",202],["T_DOC_COMMENT","\/**\n     * Get totals.\n     *\n     * @return array\n     *\/",204],["T_WHITESPACE","\n    ",208],["T_PROTECTED","protected",209],["T_WHITESPACE"," ",209],["T_FUNCTION","function",209],["T_WHITESPACE"," ",209],["T_STRING","getTotals",209],"(",")",["T_WHITESPACE","\n    ",209],"{",["T_WHITESPACE","\n        ",210],["T_VARIABLE","$totalsBlock",211],["T_WHITESPACE"," ",211],"=",["T_WHITESPACE"," ",211],["T_VARIABLE","$this",211],["T_OBJECT_OPERATOR","->",211],["T_STRING","checkoutCart",211],["T_OBJECT_OPERATOR","->",211],["T_STRING","getTotalsBlock",211],"(",")",";",["T_WHITESPACE","\n        ",211],["T_RETURN","return",212],["T_WHITESPACE"," ",212],["T_VARIABLE","$this",212],["T_OBJECT_OPERATOR","->",212],["T_STRING","getTypeBlockData",212],"(",["T_VARIABLE","$totalsBlock",212],")",";",["T_WHITESPACE","\n    ",212],"}",["T_WHITESPACE","\n\n    ",213],["T_DOC_COMMENT","\/**\n     * Fill checkout data.\n     *\n     * @param InjectableFixture $product\n     * @return void\n     *\/",215],["T_WHITESPACE","\n    ",220],["T_PROTECTED","protected",221],["T_WHITESPACE"," ",221],["T_FUNCTION","function",221],["T_WHITESPACE"," ",221],["T_STRING","fillCheckoutData",221],"(",["T_STRING","InjectableFixture",221],["T_WHITESPACE"," ",221],["T_VARIABLE","$product",221],")",["T_WHITESPACE","\n    ",221],"{",["T_WHITESPACE","\n        ",222],["T_VARIABLE","$qty",223],["T_WHITESPACE"," ",223],"=",["T_WHITESPACE"," ",223],["T_VARIABLE","$product",223],["T_OBJECT_OPERATOR","->",223],["T_STRING","getCheckoutData",223],"(",")","[",["T_CONSTANT_ENCAPSED_STRING","'qty'",223],"]",";",["T_WHITESPACE","\n        ",223],["T_VARIABLE","$this",224],["T_OBJECT_OPERATOR","->",224],["T_STRING","catalogProductView",224],["T_OBJECT_OPERATOR","->",224],["T_STRING","getViewBlock",224],"(",")",["T_OBJECT_OPERATOR","->",224],["T_STRING","fillOptions",224],"(",["T_VARIABLE","$product",224],")",";",["T_WHITESPACE","\n        ",224],["T_VARIABLE","$this",225],["T_OBJECT_OPERATOR","->",225],["T_STRING","catalogProductView",225],["T_OBJECT_OPERATOR","->",225],["T_STRING","getViewBlock",225],"(",")",["T_OBJECT_OPERATOR","->",225],["T_STRING","setQty",225],"(",["T_VARIABLE","$qty",225],")",";",["T_WHITESPACE","\n    ",225],"}",["T_WHITESPACE","\n\n    ",226],["T_DOC_COMMENT","\/**\n     * Get cart prices.\n     *\n     * @param InjectableFixture $product\n     * @return array\n     *\/",228],["T_WHITESPACE","\n    ",233],["T_PROTECTED","protected",234],["T_WHITESPACE"," ",234],["T_FUNCTION","function",234],["T_WHITESPACE"," ",234],["T_STRING","getCartPrices",234],"(",["T_STRING","InjectableFixture",234],["T_WHITESPACE"," ",234],["T_VARIABLE","$product",234],")",["T_WHITESPACE","\n    ",234],"{",["T_WHITESPACE","\n        ",235],["T_VARIABLE","$cartItemData",236],["T_WHITESPACE"," ",236],"=",["T_WHITESPACE"," ",236],["T_VARIABLE","$this",236],["T_OBJECT_OPERATOR","->",236],["T_STRING","checkoutCart",236],["T_OBJECT_OPERATOR","->",236],["T_STRING","getCartBlock",236],"(",")",["T_OBJECT_OPERATOR","->",236],["T_STRING","getCartItem",236],"(",["T_VARIABLE","$product",236],")",";",["T_WHITESPACE","\n        ",236],["T_RETURN","return",237],["T_WHITESPACE"," ",237],["T_VARIABLE","$this",237],["T_OBJECT_OPERATOR","->",237],["T_STRING","getTypePrices",237],"(",["T_VARIABLE","$cartItemData",237],")",";",["T_WHITESPACE","\n    ",237],"}",["T_WHITESPACE","\n\n    ",238],["T_DOC_COMMENT","\/**\n     * Fill estimate block.\n     *\n     * @param Address $address\n     * @param array $shipping\n     * @return void\n     *\/",240],["T_WHITESPACE","\n    ",246],["T_PROTECTED","protected",247],["T_WHITESPACE"," ",247],["T_FUNCTION","function",247],["T_WHITESPACE"," ",247],["T_STRING","fillEstimateBlock",247],"(",["T_STRING","Address",247],["T_WHITESPACE"," ",247],["T_VARIABLE","$address",247],",",["T_WHITESPACE"," ",247],["T_ARRAY","array",247],["T_WHITESPACE"," ",247],["T_VARIABLE","$shipping",247],")",["T_WHITESPACE","\n    ",247],"{",["T_WHITESPACE","\n        ",248],["T_VARIABLE","$this",249],["T_OBJECT_OPERATOR","->",249],["T_STRING","checkoutCart",249],["T_OBJECT_OPERATOR","->",249],["T_STRING","getShippingBlock",249],"(",")",["T_OBJECT_OPERATOR","->",249],["T_STRING","fillEstimateShippingAndTax",249],"(",["T_VARIABLE","$address",249],")",";",["T_WHITESPACE","\n        ",249],["T_VARIABLE","$this",250],["T_OBJECT_OPERATOR","->",250],["T_STRING","checkoutCart",250],["T_OBJECT_OPERATOR","->",250],["T_STRING","getShippingBlock",250],"(",")",["T_OBJECT_OPERATOR","->",250],["T_STRING","selectShippingMethod",250],"(",["T_VARIABLE","$shipping",250],")",";",["T_WHITESPACE","\n    ",250],"}",["T_WHITESPACE","\n",251],"}",["T_WHITESPACE","\n",252]]
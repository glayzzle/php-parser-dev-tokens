[["T_OPEN_TAG","<?php\n",1],["T_DOC_COMMENT","\/**\n * Magento\n *\n * NOTICE OF LICENSE\n *\n * This source file is subject to the Open Software License (OSL 3.0)\n * that is bundled with this package in the file LICENSE.txt.\n * It is also available through the world-wide-web at this URL:\n * http:\/\/opensource.org\/licenses\/osl-3.0.php\n * If you did not receive a copy of the license and are unable to\n * obtain it through the world-wide-web, please send an email\n * to license@magento.com so we can send you a copy immediately.\n *\n * DISCLAIMER\n *\n * Do not edit or add to this file if you wish to upgrade Magento to newer\n * versions in the future. If you wish to customize Magento for your\n * needs please refer to http:\/\/www.magento.com for more information.\n *\n * @category    Tests\n * @package     Tests_Functional\n * @copyright  Copyright (c) 2006-2016 X.commerce, Inc. and affiliates (http:\/\/www.magento.com)\n * @license    http:\/\/opensource.org\/licenses\/osl-3.0.php  Open Software License (OSL 3.0)\n *\/",2],["T_WHITESPACE","\n\n",25],["T_NAMESPACE","namespace",27],["T_WHITESPACE"," ",27],["T_STRING","Mage",27],["T_NS_SEPARATOR","\\",27],["T_STRING","CatalogRule",27],["T_NS_SEPARATOR","\\",27],["T_STRING","Test",27],["T_NS_SEPARATOR","\\",27],["T_STRING","Handler",27],["T_NS_SEPARATOR","\\",27],["T_STRING","CatalogRule",27],";",["T_WHITESPACE","\n\n",27],["T_USE","use",29],["T_WHITESPACE"," ",29],["T_STRING","Mage",29],["T_NS_SEPARATOR","\\",29],["T_STRING","Adminhtml",29],["T_NS_SEPARATOR","\\",29],["T_STRING","Test",29],["T_NS_SEPARATOR","\\",29],["T_STRING","Handler",29],["T_NS_SEPARATOR","\\",29],["T_STRING","Conditions",29],";",["T_WHITESPACE","\n",29],["T_USE","use",30],["T_WHITESPACE"," ",30],["T_STRING","Magento",30],["T_NS_SEPARATOR","\\",30],["T_STRING","Mtf",30],["T_NS_SEPARATOR","\\",30],["T_STRING","Fixture",30],["T_NS_SEPARATOR","\\",30],["T_STRING","FixtureInterface",30],";",["T_WHITESPACE","\n",30],["T_USE","use",31],["T_WHITESPACE"," ",31],["T_STRING","Magento",31],["T_NS_SEPARATOR","\\",31],["T_STRING","Mtf",31],["T_NS_SEPARATOR","\\",31],["T_STRING","Util",31],["T_NS_SEPARATOR","\\",31],["T_STRING","Protocol",31],["T_NS_SEPARATOR","\\",31],["T_STRING","CurlInterface",31],";",["T_WHITESPACE","\n",31],["T_USE","use",32],["T_WHITESPACE"," ",32],["T_STRING","Magento",32],["T_NS_SEPARATOR","\\",32],["T_STRING","Mtf",32],["T_NS_SEPARATOR","\\",32],["T_STRING","Util",32],["T_NS_SEPARATOR","\\",32],["T_STRING","Protocol",32],["T_NS_SEPARATOR","\\",32],["T_STRING","CurlTransport",32],";",["T_WHITESPACE","\n",32],["T_USE","use",33],["T_WHITESPACE"," ",33],["T_STRING","Magento",33],["T_NS_SEPARATOR","\\",33],["T_STRING","Mtf",33],["T_NS_SEPARATOR","\\",33],["T_STRING","Util",33],["T_NS_SEPARATOR","\\",33],["T_STRING","Protocol",33],["T_NS_SEPARATOR","\\",33],["T_STRING","CurlTransport",33],["T_NS_SEPARATOR","\\",33],["T_STRING","BackendDecorator",33],";",["T_WHITESPACE","\n\n",33],["T_DOC_COMMENT","\/**\n * Curl that creates catalog price rule.\n *\/",35],["T_WHITESPACE","\n",37],["T_CLASS","class",38],["T_WHITESPACE"," ",38],["T_STRING","Curl",38],["T_WHITESPACE"," ",38],["T_EXTENDS","extends",38],["T_WHITESPACE"," ",38],["T_STRING","Conditions",38],["T_WHITESPACE"," ",38],["T_IMPLEMENTS","implements",38],["T_WHITESPACE"," ",38],["T_STRING","CatalogRuleInterface",38],["T_WHITESPACE","\n",38],"{",["T_WHITESPACE","\n    ",39],["T_DOC_COMMENT","\/**\n     * Map of type parameter.\n     *\n     * @var array\n     *\/",40],["T_WHITESPACE","\n    ",44],["T_PROTECTED","protected",45],["T_WHITESPACE"," ",45],["T_VARIABLE","$mapTypeParams",45],["T_WHITESPACE"," ",45],"=",["T_WHITESPACE"," ",45],"[",["T_WHITESPACE","\n        ",45],["T_CONSTANT_ENCAPSED_STRING","'Conditions combination'",46],["T_WHITESPACE"," ",46],["T_DOUBLE_ARROW","=>",46],["T_WHITESPACE"," ",46],"[",["T_WHITESPACE","\n            ",46],["T_CONSTANT_ENCAPSED_STRING","'type'",47],["T_WHITESPACE"," ",47],["T_DOUBLE_ARROW","=>",47],["T_WHITESPACE"," ",47],["T_CONSTANT_ENCAPSED_STRING","'catalogrule\/rule_condition_combine'",47],",",["T_WHITESPACE","\n            ",47],["T_CONSTANT_ENCAPSED_STRING","'aggregator'",48],["T_WHITESPACE"," ",48],["T_DOUBLE_ARROW","=>",48],["T_WHITESPACE"," ",48],["T_CONSTANT_ENCAPSED_STRING","'all'",48],",",["T_WHITESPACE","\n            ",48],["T_CONSTANT_ENCAPSED_STRING","'value'",49],["T_WHITESPACE"," ",49],["T_DOUBLE_ARROW","=>",49],["T_WHITESPACE"," ",49],["T_LNUMBER","1",49],",",["T_WHITESPACE","\n        ",49],"]",",",["T_WHITESPACE","\n        ",50],["T_CONSTANT_ENCAPSED_STRING","'Category'",51],["T_WHITESPACE"," ",51],["T_DOUBLE_ARROW","=>",51],["T_WHITESPACE"," ",51],"[",["T_WHITESPACE","\n            ",51],["T_CONSTANT_ENCAPSED_STRING","'type'",52],["T_WHITESPACE"," ",52],["T_DOUBLE_ARROW","=>",52],["T_WHITESPACE"," ",52],["T_CONSTANT_ENCAPSED_STRING","'catalogrule\/rule_condition_product'",52],",",["T_WHITESPACE","\n            ",52],["T_CONSTANT_ENCAPSED_STRING","'attribute'",53],["T_WHITESPACE"," ",53],["T_DOUBLE_ARROW","=>",53],["T_WHITESPACE"," ",53],["T_CONSTANT_ENCAPSED_STRING","'category_ids'",53],",",["T_WHITESPACE","\n        ",53],"]",",",["T_WHITESPACE","\n    ",54],"]",";",["T_WHITESPACE","\n\n    ",55],["T_DOC_COMMENT","\/**\n     * Mapping values for data.\n     *\n     * @var array\n     *\/",57],["T_WHITESPACE","\n    ",61],["T_PROTECTED","protected",62],["T_WHITESPACE"," ",62],["T_VARIABLE","$mappingData",62],["T_WHITESPACE"," ",62],"=",["T_WHITESPACE"," ",62],"[",["T_WHITESPACE","\n        ",62],["T_CONSTANT_ENCAPSED_STRING","'simple_action'",63],["T_WHITESPACE"," ",63],["T_DOUBLE_ARROW","=>",63],["T_WHITESPACE"," ",63],"[",["T_WHITESPACE","\n            ",63],["T_CONSTANT_ENCAPSED_STRING","'By Percentage of the Original Price'",64],["T_WHITESPACE"," ",64],["T_DOUBLE_ARROW","=>",64],["T_WHITESPACE"," ",64],["T_CONSTANT_ENCAPSED_STRING","'by_percent'",64],",",["T_WHITESPACE","\n            ",64],["T_CONSTANT_ENCAPSED_STRING","'By Fixed Amount'",65],["T_WHITESPACE"," ",65],["T_DOUBLE_ARROW","=>",65],["T_WHITESPACE"," ",65],["T_CONSTANT_ENCAPSED_STRING","'by_fixed'",65],",",["T_WHITESPACE","\n            ",65],["T_CONSTANT_ENCAPSED_STRING","'To Percentage of the Original Price'",66],["T_WHITESPACE"," ",66],["T_DOUBLE_ARROW","=>",66],["T_WHITESPACE"," ",66],["T_CONSTANT_ENCAPSED_STRING","'to_percent'",66],",",["T_WHITESPACE","\n            ",66],["T_CONSTANT_ENCAPSED_STRING","'To Fixed Amount'",67],["T_WHITESPACE"," ",67],["T_DOUBLE_ARROW","=>",67],["T_WHITESPACE"," ",67],["T_CONSTANT_ENCAPSED_STRING","'to_fixed'",67],",",["T_WHITESPACE","\n        ",67],"]",",",["T_WHITESPACE","\n        ",68],["T_CONSTANT_ENCAPSED_STRING","'is_active'",69],["T_WHITESPACE"," ",69],["T_DOUBLE_ARROW","=>",69],["T_WHITESPACE"," ",69],"[",["T_WHITESPACE","\n            ",69],["T_CONSTANT_ENCAPSED_STRING","'Active'",70],["T_WHITESPACE"," ",70],["T_DOUBLE_ARROW","=>",70],["T_WHITESPACE"," ",70],["T_LNUMBER","1",70],",",["T_WHITESPACE","\n            ",70],["T_CONSTANT_ENCAPSED_STRING","'Inactive'",71],["T_WHITESPACE"," ",71],["T_DOUBLE_ARROW","=>",71],["T_WHITESPACE"," ",71],["T_LNUMBER","0",71],",",["T_WHITESPACE","\n        ",71],"]",",",["T_WHITESPACE","\n        ",72],["T_CONSTANT_ENCAPSED_STRING","'stop_rules_processing'",73],["T_WHITESPACE"," ",73],["T_DOUBLE_ARROW","=>",73],["T_WHITESPACE"," ",73],"[",["T_WHITESPACE","\n            ",73],["T_CONSTANT_ENCAPSED_STRING","'Yes'",74],["T_WHITESPACE"," ",74],["T_DOUBLE_ARROW","=>",74],["T_WHITESPACE"," ",74],["T_LNUMBER","1",74],",",["T_WHITESPACE","\n            ",74],["T_CONSTANT_ENCAPSED_STRING","'No'",75],["T_WHITESPACE"," ",75],["T_DOUBLE_ARROW","=>",75],["T_WHITESPACE"," ",75],["T_LNUMBER","0",75],",",["T_WHITESPACE","\n        ",75],"]",",",["T_WHITESPACE","\n    ",76],"]",";",["T_WHITESPACE","\n\n    ",77],["T_DOC_COMMENT","\/**\n     * Mapping values for Websites.\n     *\n     * @var array\n     *\/",79],["T_WHITESPACE","\n    ",83],["T_PROTECTED","protected",84],["T_WHITESPACE"," ",84],["T_VARIABLE","$websiteIds",84],["T_WHITESPACE"," ",84],"=",["T_WHITESPACE"," ",84],"[",["T_WHITESPACE","\n        ",84],["T_CONSTANT_ENCAPSED_STRING","'Main Website'",85],["T_WHITESPACE"," ",85],["T_DOUBLE_ARROW","=>",85],["T_WHITESPACE"," ",85],["T_LNUMBER","1",85],",",["T_WHITESPACE","\n    ",85],"]",";",["T_WHITESPACE","\n\n    ",86],["T_DOC_COMMENT","\/**\n     * Mapping values for Customer Groups.\n     *\n     * @var array\n     *\/",88],["T_WHITESPACE","\n    ",92],["T_PROTECTED","protected",93],["T_WHITESPACE"," ",93],["T_VARIABLE","$customerGroupIds",93],["T_WHITESPACE"," ",93],"=",["T_WHITESPACE"," ",93],"[",["T_WHITESPACE","\n        ",93],["T_CONSTANT_ENCAPSED_STRING","'NOT LOGGED IN'",94],["T_WHITESPACE"," ",94],["T_DOUBLE_ARROW","=>",94],["T_WHITESPACE"," ",94],["T_LNUMBER","0",94],",",["T_WHITESPACE","\n        ",94],["T_CONSTANT_ENCAPSED_STRING","'General'",95],["T_WHITESPACE"," ",95],["T_DOUBLE_ARROW","=>",95],["T_WHITESPACE"," ",95],["T_LNUMBER","1",95],",",["T_WHITESPACE","\n        ",95],["T_CONSTANT_ENCAPSED_STRING","'Wholesale'",96],["T_WHITESPACE"," ",96],["T_DOUBLE_ARROW","=>",96],["T_WHITESPACE"," ",96],["T_LNUMBER","2",96],",",["T_WHITESPACE","\n        ",96],["T_CONSTANT_ENCAPSED_STRING","'Retailer'",97],["T_WHITESPACE"," ",97],["T_DOUBLE_ARROW","=>",97],["T_WHITESPACE"," ",97],["T_LNUMBER","3",97],",",["T_WHITESPACE","\n    ",97],"]",";",["T_WHITESPACE","\n\n    ",98],["T_DOC_COMMENT","\/**\n     * POST request for creating Catalog Price Rule.\n     *\n     * @param FixtureInterface $fixture\n     * @return mixed|void\n     * @throws \\Exception\n     *\/",100],["T_WHITESPACE","\n    ",106],["T_PUBLIC","public",107],["T_WHITESPACE"," ",107],["T_FUNCTION","function",107],["T_WHITESPACE"," ",107],["T_STRING","persist",107],"(",["T_STRING","FixtureInterface",107],["T_WHITESPACE"," ",107],["T_VARIABLE","$fixture",107],["T_WHITESPACE"," ",107],"=",["T_WHITESPACE"," ",107],["T_STRING","null",107],")",["T_WHITESPACE","\n    ",107],"{",["T_WHITESPACE","\n        ",108],["T_VARIABLE","$data",109],["T_WHITESPACE"," ",109],"=",["T_WHITESPACE"," ",109],["T_VARIABLE","$this",109],["T_OBJECT_OPERATOR","->",109],["T_STRING","prepareData",109],"(",["T_VARIABLE","$fixture",109],")",";",["T_WHITESPACE","\n        ",109],["T_VARIABLE","$url",110],["T_WHITESPACE"," ",110],"=",["T_WHITESPACE"," ",110],["T_VARIABLE","$_ENV",110],"[",["T_CONSTANT_ENCAPSED_STRING","'app_backend_url'",110],"]",["T_WHITESPACE"," ",110],".",["T_WHITESPACE"," ",110],["T_CONSTANT_ENCAPSED_STRING","'promo_catalog\/save\/'",110],";",["T_WHITESPACE","\n        ",110],["T_VARIABLE","$curl",111],["T_WHITESPACE"," ",111],"=",["T_WHITESPACE"," ",111],["T_NEW","new",111],["T_WHITESPACE"," ",111],["T_STRING","BackendDecorator",111],"(",["T_NEW","new",111],["T_WHITESPACE"," ",111],["T_STRING","CurlTransport",111],"(",")",",",["T_WHITESPACE"," ",111],["T_VARIABLE","$this",111],["T_OBJECT_OPERATOR","->",111],["T_STRING","_configuration",111],")",";",["T_WHITESPACE","\n        ",111],["T_VARIABLE","$curl",112],["T_OBJECT_OPERATOR","->",112],["T_STRING","addOption",112],"(",["T_STRING","CURLOPT_HEADER",112],",",["T_WHITESPACE"," ",112],["T_LNUMBER","1",112],")",";",["T_WHITESPACE","\n        ",112],["T_VARIABLE","$curl",113],["T_OBJECT_OPERATOR","->",113],["T_STRING","write",113],"(",["T_VARIABLE","$url",113],",",["T_WHITESPACE"," ",113],["T_VARIABLE","$data",113],")",";",["T_WHITESPACE","\n        ",113],["T_VARIABLE","$response",114],["T_WHITESPACE"," ",114],"=",["T_WHITESPACE"," ",114],["T_VARIABLE","$curl",114],["T_OBJECT_OPERATOR","->",114],["T_STRING","read",114],"(",")",";",["T_WHITESPACE","\n        ",114],["T_VARIABLE","$curl",115],["T_OBJECT_OPERATOR","->",115],["T_STRING","close",115],"(",")",";",["T_WHITESPACE","\n\n        ",115],["T_IF","if",117],["T_WHITESPACE"," ",117],"(","!",["T_STRING","strpos",117],"(",["T_VARIABLE","$response",117],",",["T_WHITESPACE"," ",117],["T_CONSTANT_ENCAPSED_STRING","'id=\"messages\"'",117],")",")",["T_WHITESPACE"," ",117],"{",["T_WHITESPACE","\n            ",117],["T_THROW","throw",118],["T_WHITESPACE"," ",118],["T_NEW","new",118],["T_WHITESPACE"," ",118],["T_NS_SEPARATOR","\\",118],["T_STRING","Exception",118],"(",["T_WHITESPACE","\n                ",118],"\"",["T_ENCAPSED_AND_WHITESPACE","Catalog Price Rule entity creating by curl handler was not successful! Response: ",119],["T_VARIABLE","$response",119],"\"",["T_WHITESPACE","\n            ",119],")",";",["T_WHITESPACE","\n        ",120],"}",["T_WHITESPACE","\n\n        ",121],["T_RETURN","return",123],["T_WHITESPACE"," ",123],"[",["T_CONSTANT_ENCAPSED_STRING","'id'",123],["T_WHITESPACE"," ",123],["T_DOUBLE_ARROW","=>",123],["T_WHITESPACE"," ",123],["T_VARIABLE","$this",123],["T_OBJECT_OPERATOR","->",123],["T_STRING","getCategoryPriceRuleId",123],"(",")","]",";",["T_WHITESPACE","\n    ",123],"}",["T_WHITESPACE","\n\n    ",124],["T_DOC_COMMENT","\/**\n     * Prepare data from text to values.\n     *\n     * @param FixtureInterface $fixture\n     * @return array\n     *\/",126],["T_WHITESPACE","\n    ",131],["T_PROTECTED","protected",132],["T_WHITESPACE"," ",132],["T_FUNCTION","function",132],["T_WHITESPACE"," ",132],["T_STRING","prepareData",132],"(",["T_VARIABLE","$fixture",132],")",["T_WHITESPACE","\n    ",132],"{",["T_WHITESPACE","\n        ",133],["T_VARIABLE","$data",134],["T_WHITESPACE"," ",134],"=",["T_WHITESPACE"," ",134],["T_VARIABLE","$this",134],["T_OBJECT_OPERATOR","->",134],["T_STRING","replaceMappingData",134],"(",["T_VARIABLE","$fixture",134],["T_OBJECT_OPERATOR","->",134],["T_STRING","getData",134],"(",")",")",";",["T_WHITESPACE","\n        ",134],["T_IF","if",135],["T_WHITESPACE"," ",135],"(",["T_ISSET","isset",135],"(",["T_VARIABLE","$data",135],"[",["T_CONSTANT_ENCAPSED_STRING","'website_ids'",135],"]",")",")",["T_WHITESPACE"," ",135],"{",["T_WHITESPACE","\n            ",135],["T_VARIABLE","$websiteIds",136],["T_WHITESPACE"," ",136],"=",["T_WHITESPACE"," ",136],"[","]",";",["T_WHITESPACE","\n            ",136],["T_FOREACH","foreach",137],["T_WHITESPACE"," ",137],"(",["T_VARIABLE","$data",137],"[",["T_CONSTANT_ENCAPSED_STRING","'website_ids'",137],"]",["T_WHITESPACE"," ",137],["T_AS","as",137],["T_WHITESPACE"," ",137],["T_VARIABLE","$websiteId",137],")",["T_WHITESPACE"," ",137],"{",["T_WHITESPACE","\n                ",137],["T_VARIABLE","$websiteIds",138],"[","]",["T_WHITESPACE"," ",138],"=",["T_WHITESPACE"," ",138],["T_ISSET","isset",138],"(",["T_VARIABLE","$this",138],["T_OBJECT_OPERATOR","->",138],["T_STRING","websiteIds",138],"[",["T_VARIABLE","$websiteId",138],"]",")",["T_WHITESPACE"," ",138],"?",["T_WHITESPACE"," ",138],["T_VARIABLE","$this",138],["T_OBJECT_OPERATOR","->",138],["T_STRING","websiteIds",138],"[",["T_VARIABLE","$websiteId",138],"]",["T_WHITESPACE"," ",138],":",["T_WHITESPACE"," ",138],["T_VARIABLE","$websiteId",138],";",["T_WHITESPACE","\n            ",138],"}",["T_WHITESPACE","\n            ",139],["T_VARIABLE","$data",140],"[",["T_CONSTANT_ENCAPSED_STRING","'website_ids'",140],"]",["T_WHITESPACE"," ",140],"=",["T_WHITESPACE"," ",140],["T_VARIABLE","$websiteIds",140],";",["T_WHITESPACE","\n        ",140],"}",["T_WHITESPACE","\n        ",141],["T_IF","if",142],["T_WHITESPACE"," ",142],"(",["T_ISSET","isset",142],"(",["T_VARIABLE","$data",142],"[",["T_CONSTANT_ENCAPSED_STRING","'customer_group_ids'",142],"]",")",")",["T_WHITESPACE"," ",142],"{",["T_WHITESPACE","\n            ",142],["T_VARIABLE","$customerGroupIds",143],["T_WHITESPACE"," ",143],"=",["T_WHITESPACE"," ",143],"[","]",";",["T_WHITESPACE","\n            ",143],["T_FOREACH","foreach",144],["T_WHITESPACE"," ",144],"(",["T_VARIABLE","$data",144],"[",["T_CONSTANT_ENCAPSED_STRING","'customer_group_ids'",144],"]",["T_WHITESPACE"," ",144],["T_AS","as",144],["T_WHITESPACE"," ",144],["T_VARIABLE","$customerGroupId",144],")",["T_WHITESPACE"," ",144],"{",["T_WHITESPACE","\n                ",144],["T_VARIABLE","$customerGroupIds",145],"[","]",["T_WHITESPACE"," ",145],"=",["T_WHITESPACE"," ",145],["T_ISSET","isset",145],"(",["T_VARIABLE","$this",145],["T_OBJECT_OPERATOR","->",145],["T_STRING","customerGroupIds",145],"[",["T_VARIABLE","$customerGroupId",145],"]",")",["T_WHITESPACE","\n                    ",145],"?",["T_WHITESPACE"," ",146],["T_VARIABLE","$this",146],["T_OBJECT_OPERATOR","->",146],["T_STRING","customerGroupIds",146],"[",["T_VARIABLE","$customerGroupId",146],"]",["T_WHITESPACE","\n                    ",146],":",["T_WHITESPACE"," ",147],["T_VARIABLE","$customerGroupId",147],";",["T_WHITESPACE","\n            ",147],"}",["T_WHITESPACE","\n            ",148],["T_VARIABLE","$data",149],"[",["T_CONSTANT_ENCAPSED_STRING","'customer_group_ids'",149],"]",["T_WHITESPACE"," ",149],"=",["T_WHITESPACE"," ",149],["T_VARIABLE","$customerGroupIds",149],";",["T_WHITESPACE","\n        ",149],"}",["T_WHITESPACE","\n        ",150],["T_IF","if",151],["T_WHITESPACE"," ",151],"(","!",["T_ISSET","isset",151],"(",["T_VARIABLE","$data",151],"[",["T_CONSTANT_ENCAPSED_STRING","'stop_rules_processing'",151],"]",")",")",["T_WHITESPACE"," ",151],"{",["T_WHITESPACE","\n            ",151],["T_VARIABLE","$data",152],"[",["T_CONSTANT_ENCAPSED_STRING","'stop_rules_processing'",152],"]",["T_WHITESPACE"," ",152],"=",["T_WHITESPACE"," ",152],["T_LNUMBER","0",152],";",["T_WHITESPACE","\n        ",152],"}",["T_WHITESPACE","\n\n        ",153],["T_IF","if",155],["T_WHITESPACE"," ",155],"(","!",["T_ISSET","isset",155],"(",["T_VARIABLE","$data",155],"[",["T_CONSTANT_ENCAPSED_STRING","'rule'",155],"]",")",")",["T_WHITESPACE"," ",155],"{",["T_WHITESPACE","\n            ",155],["T_VARIABLE","$data",156],"[",["T_CONSTANT_ENCAPSED_STRING","'rule'",156],"]",["T_WHITESPACE"," ",156],"=",["T_WHITESPACE"," ",156],["T_STRING","null",156],";",["T_WHITESPACE","\n        ",156],"}",["T_WHITESPACE","\n        ",157],["T_VARIABLE","$data",158],"[",["T_CONSTANT_ENCAPSED_STRING","'rule'",158],"]",["T_WHITESPACE"," ",158],"=",["T_WHITESPACE"," ",158],"[",["T_CONSTANT_ENCAPSED_STRING","'conditions'",158],["T_WHITESPACE"," ",158],["T_DOUBLE_ARROW","=>",158],["T_WHITESPACE"," ",158],["T_VARIABLE","$this",158],["T_OBJECT_OPERATOR","->",158],["T_STRING","prepareCondition",158],"(",["T_VARIABLE","$data",158],"[",["T_CONSTANT_ENCAPSED_STRING","'rule'",158],"]",")","]",";",["T_WHITESPACE","\n\n        ",158],["T_RETURN","return",160],["T_WHITESPACE"," ",160],["T_VARIABLE","$data",160],";",["T_WHITESPACE","\n    ",160],"}",["T_WHITESPACE","\n\n    ",161],["T_DOC_COMMENT","\/**\n     * Get id after creating Category Price Rule.\n     *\n     * @return int\n     * @throws \\Exception\n     *\/",163],["T_WHITESPACE","\n    ",168],["T_PUBLIC","public",169],["T_WHITESPACE"," ",169],["T_FUNCTION","function",169],["T_WHITESPACE"," ",169],["T_STRING","getCategoryPriceRuleId",169],"(",")",["T_WHITESPACE","\n    ",169],"{",["T_WHITESPACE","\n        ",170],["T_COMMENT","\/\/ Sort data in grid to define category price rule id if more than 20 items in grid\n",171],["T_WHITESPACE","        ",172],["T_VARIABLE","$url",172],["T_WHITESPACE"," ",172],"=",["T_WHITESPACE"," ",172],["T_VARIABLE","$_ENV",172],"[",["T_CONSTANT_ENCAPSED_STRING","'app_backend_url'",172],"]",["T_WHITESPACE"," ",172],".",["T_WHITESPACE"," ",172],["T_CONSTANT_ENCAPSED_STRING","'promo_catalog\/index\/sort\/rule_id\/dir\/desc'",172],";",["T_WHITESPACE","\n        ",172],["T_VARIABLE","$curl",173],["T_WHITESPACE"," ",173],"=",["T_WHITESPACE"," ",173],["T_NEW","new",173],["T_WHITESPACE"," ",173],["T_STRING","BackendDecorator",173],"(",["T_NEW","new",173],["T_WHITESPACE"," ",173],["T_STRING","CurlTransport",173],"(",")",",",["T_WHITESPACE"," ",173],["T_VARIABLE","$this",173],["T_OBJECT_OPERATOR","->",173],["T_STRING","_configuration",173],")",";",["T_WHITESPACE","\n        ",173],["T_VARIABLE","$curl",174],["T_OBJECT_OPERATOR","->",174],["T_STRING","write",174],"(",["T_VARIABLE","$url",174],")",";",["T_WHITESPACE","\n        ",174],["T_VARIABLE","$response",175],["T_WHITESPACE"," ",175],"=",["T_WHITESPACE"," ",175],["T_VARIABLE","$curl",175],["T_OBJECT_OPERATOR","->",175],["T_STRING","read",175],"(",")",";",["T_WHITESPACE","\n        ",175],["T_VARIABLE","$curl",176],["T_OBJECT_OPERATOR","->",176],["T_STRING","close",176],"(",")",";",["T_WHITESPACE","\n\n        ",176],["T_STRING","preg_match",178],"(",["T_CONSTANT_ENCAPSED_STRING","'~title=\"http[^\\s]*\\\/id\\\/(\\d+)~'",178],",",["T_WHITESPACE"," ",178],["T_VARIABLE","$response",178],",",["T_WHITESPACE"," ",178],["T_VARIABLE","$matches",178],")",";",["T_WHITESPACE","\n        ",178],["T_IF","if",179],["T_WHITESPACE"," ",179],"(",["T_EMPTY","empty",179],"(",["T_VARIABLE","$matches",179],")",")",["T_WHITESPACE"," ",179],"{",["T_WHITESPACE","\n            ",179],["T_THROW","throw",180],["T_WHITESPACE"," ",180],["T_NEW","new",180],["T_WHITESPACE"," ",180],["T_NS_SEPARATOR","\\",180],["T_STRING","Exception",180],"(",["T_CONSTANT_ENCAPSED_STRING","'Cannot find Category Price Rule id'",180],")",";",["T_WHITESPACE","\n        ",180],"}",["T_WHITESPACE","\n\n        ",181],["T_RETURN","return",183],["T_WHITESPACE"," ",183],["T_VARIABLE","$matches",183],"[",["T_LNUMBER","1",183],"]",";",["T_WHITESPACE","\n    ",183],"}",["T_WHITESPACE","\n",184],"}",["T_WHITESPACE","\n",185]]
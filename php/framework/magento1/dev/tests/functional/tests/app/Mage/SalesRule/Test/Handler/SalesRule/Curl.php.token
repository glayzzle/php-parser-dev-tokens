[["T_OPEN_TAG","<?php\n",1],["T_DOC_COMMENT","\/**\n * Magento\n *\n * NOTICE OF LICENSE\n *\n * This source file is subject to the Open Software License (OSL 3.0)\n * that is bundled with this package in the file LICENSE.txt.\n * It is also available through the world-wide-web at this URL:\n * http:\/\/opensource.org\/licenses\/osl-3.0.php\n * If you did not receive a copy of the license and are unable to\n * obtain it through the world-wide-web, please send an email\n * to license@magento.com so we can send you a copy immediately.\n *\n * DISCLAIMER\n *\n * Do not edit or add to this file if you wish to upgrade Magento to newer\n * versions in the future. If you wish to customize Magento for your\n * needs please refer to http:\/\/www.magento.com for more information.\n *\n * @category    Tests\n * @package     Tests_Functional\n * @copyright  Copyright (c) 2006-2016 X.commerce, Inc. and affiliates (http:\/\/www.magento.com)\n * @license    http:\/\/opensource.org\/licenses\/osl-3.0.php  Open Software License (OSL 3.0)\n *\/",2],["T_WHITESPACE","\n\n",25],["T_NAMESPACE","namespace",27],["T_WHITESPACE"," ",27],["T_STRING","Mage",27],["T_NS_SEPARATOR","\\",27],["T_STRING","SalesRule",27],["T_NS_SEPARATOR","\\",27],["T_STRING","Test",27],["T_NS_SEPARATOR","\\",27],["T_STRING","Handler",27],["T_NS_SEPARATOR","\\",27],["T_STRING","SalesRule",27],";",["T_WHITESPACE","\n\n",27],["T_USE","use",29],["T_WHITESPACE"," ",29],["T_STRING","Mage",29],["T_NS_SEPARATOR","\\",29],["T_STRING","Adminhtml",29],["T_NS_SEPARATOR","\\",29],["T_STRING","Test",29],["T_NS_SEPARATOR","\\",29],["T_STRING","Fixture",29],["T_NS_SEPARATOR","\\",29],["T_STRING","Website",29],";",["T_WHITESPACE","\n",29],["T_USE","use",30],["T_WHITESPACE"," ",30],["T_STRING","Mage",30],["T_NS_SEPARATOR","\\",30],["T_STRING","Adminhtml",30],["T_NS_SEPARATOR","\\",30],["T_STRING","Test",30],["T_NS_SEPARATOR","\\",30],["T_STRING","Handler",30],["T_NS_SEPARATOR","\\",30],["T_STRING","Conditions",30],";",["T_WHITESPACE","\n",30],["T_USE","use",31],["T_WHITESPACE"," ",31],["T_STRING","Mage",31],["T_NS_SEPARATOR","\\",31],["T_STRING","SalesRule",31],["T_NS_SEPARATOR","\\",31],["T_STRING","Test",31],["T_NS_SEPARATOR","\\",31],["T_STRING","Fixture",31],["T_NS_SEPARATOR","\\",31],["T_STRING","SalesRule",31],";",["T_WHITESPACE","\n",31],["T_USE","use",32],["T_WHITESPACE"," ",32],["T_STRING","Magento",32],["T_NS_SEPARATOR","\\",32],["T_STRING","Mtf",32],["T_NS_SEPARATOR","\\",32],["T_STRING","Fixture",32],["T_NS_SEPARATOR","\\",32],["T_STRING","FixtureInterface",32],";",["T_WHITESPACE","\n",32],["T_USE","use",33],["T_WHITESPACE"," ",33],["T_STRING","Magento",33],["T_NS_SEPARATOR","\\",33],["T_STRING","Mtf",33],["T_NS_SEPARATOR","\\",33],["T_STRING","Util",33],["T_NS_SEPARATOR","\\",33],["T_STRING","Protocol",33],["T_NS_SEPARATOR","\\",33],["T_STRING","CurlInterface",33],";",["T_WHITESPACE","\n",33],["T_USE","use",34],["T_WHITESPACE"," ",34],["T_STRING","Magento",34],["T_NS_SEPARATOR","\\",34],["T_STRING","Mtf",34],["T_NS_SEPARATOR","\\",34],["T_STRING","Util",34],["T_NS_SEPARATOR","\\",34],["T_STRING","Protocol",34],["T_NS_SEPARATOR","\\",34],["T_STRING","CurlTransport",34],";",["T_WHITESPACE","\n",34],["T_USE","use",35],["T_WHITESPACE"," ",35],["T_STRING","Magento",35],["T_NS_SEPARATOR","\\",35],["T_STRING","Mtf",35],["T_NS_SEPARATOR","\\",35],["T_STRING","Util",35],["T_NS_SEPARATOR","\\",35],["T_STRING","Protocol",35],["T_NS_SEPARATOR","\\",35],["T_STRING","CurlTransport",35],["T_NS_SEPARATOR","\\",35],["T_STRING","BackendDecorator",35],";",["T_WHITESPACE","\n\n",35],["T_DOC_COMMENT","\/**\n * Curl handler for creating sales rule.\n *\/",37],["T_WHITESPACE","\n",39],["T_CLASS","class",40],["T_WHITESPACE"," ",40],["T_STRING","Curl",40],["T_WHITESPACE"," ",40],["T_EXTENDS","extends",40],["T_WHITESPACE"," ",40],["T_STRING","Conditions",40],["T_WHITESPACE"," ",40],["T_IMPLEMENTS","implements",40],["T_WHITESPACE"," ",40],["T_STRING","SalesRuleInterface",40],["T_WHITESPACE","\n",40],"{",["T_WHITESPACE","\n    ",41],["T_DOC_COMMENT","\/**\n     * Mapping values for data.\n     *\n     * @var array\n     *\/",42],["T_WHITESPACE","\n    ",46],["T_PROTECTED","protected",47],["T_WHITESPACE"," ",47],["T_VARIABLE","$mappingData",47],["T_WHITESPACE"," ",47],"=",["T_WHITESPACE"," ",47],"[",["T_WHITESPACE","\n        ",47],["T_CONSTANT_ENCAPSED_STRING","'is_active'",48],["T_WHITESPACE"," ",48],["T_DOUBLE_ARROW","=>",48],["T_WHITESPACE"," ",48],"[",["T_WHITESPACE","\n            ",48],["T_CONSTANT_ENCAPSED_STRING","'Active'",49],["T_WHITESPACE"," ",49],["T_DOUBLE_ARROW","=>",49],["T_WHITESPACE"," ",49],["T_LNUMBER","1",49],",",["T_WHITESPACE","\n            ",49],["T_CONSTANT_ENCAPSED_STRING","'Inactive'",50],["T_WHITESPACE"," ",50],["T_DOUBLE_ARROW","=>",50],["T_WHITESPACE"," ",50],["T_LNUMBER","0",50],",",["T_WHITESPACE","\n        ",50],"]",",",["T_WHITESPACE","\n        ",51],["T_CONSTANT_ENCAPSED_STRING","'coupon_type'",52],["T_WHITESPACE"," ",52],["T_DOUBLE_ARROW","=>",52],["T_WHITESPACE"," ",52],"[",["T_WHITESPACE","\n            ",52],["T_CONSTANT_ENCAPSED_STRING","'No Coupon'",53],["T_WHITESPACE"," ",53],["T_DOUBLE_ARROW","=>",53],["T_WHITESPACE"," ",53],["T_LNUMBER","1",53],",",["T_WHITESPACE","\n            ",53],["T_CONSTANT_ENCAPSED_STRING","'Specific Coupon'",54],["T_WHITESPACE"," ",54],["T_DOUBLE_ARROW","=>",54],["T_WHITESPACE"," ",54],["T_LNUMBER","2",54],",",["T_WHITESPACE","\n            ",54],["T_CONSTANT_ENCAPSED_STRING","'Auto'",55],["T_WHITESPACE"," ",55],["T_DOUBLE_ARROW","=>",55],["T_WHITESPACE"," ",55],["T_LNUMBER","3",55],",",["T_WHITESPACE","\n        ",55],"]",",",["T_WHITESPACE","\n        ",56],["T_CONSTANT_ENCAPSED_STRING","'is_rss'",57],["T_WHITESPACE"," ",57],["T_DOUBLE_ARROW","=>",57],["T_WHITESPACE"," ",57],"[",["T_WHITESPACE","\n            ",57],["T_CONSTANT_ENCAPSED_STRING","'Yes'",58],["T_WHITESPACE"," ",58],["T_DOUBLE_ARROW","=>",58],["T_WHITESPACE"," ",58],["T_LNUMBER","1",58],",",["T_WHITESPACE","\n            ",58],["T_CONSTANT_ENCAPSED_STRING","'No'",59],["T_WHITESPACE"," ",59],["T_DOUBLE_ARROW","=>",59],["T_WHITESPACE"," ",59],["T_LNUMBER","2",59],",",["T_WHITESPACE","\n        ",59],"]",",",["T_WHITESPACE","\n        ",60],["T_CONSTANT_ENCAPSED_STRING","'simple_action'",61],["T_WHITESPACE"," ",61],["T_DOUBLE_ARROW","=>",61],["T_WHITESPACE"," ",61],"[",["T_WHITESPACE","\n            ",61],["T_CONSTANT_ENCAPSED_STRING","'Percent of product price discount'",62],["T_WHITESPACE"," ",62],["T_DOUBLE_ARROW","=>",62],["T_WHITESPACE"," ",62],["T_CONSTANT_ENCAPSED_STRING","'by_percent'",62],",",["T_WHITESPACE","\n            ",62],["T_CONSTANT_ENCAPSED_STRING","'Fixed amount discount'",63],["T_WHITESPACE"," ",63],["T_DOUBLE_ARROW","=>",63],["T_WHITESPACE"," ",63],["T_CONSTANT_ENCAPSED_STRING","'by_fixed'",63],",",["T_WHITESPACE","\n            ",63],["T_CONSTANT_ENCAPSED_STRING","'Fixed amount discount for whole cart'",64],["T_WHITESPACE"," ",64],["T_DOUBLE_ARROW","=>",64],["T_WHITESPACE"," ",64],["T_CONSTANT_ENCAPSED_STRING","'cart_fixed'",64],",",["T_WHITESPACE","\n            ",64],["T_CONSTANT_ENCAPSED_STRING","'Buy X get Y free (discount amount is Y)'",65],["T_WHITESPACE"," ",65],["T_DOUBLE_ARROW","=>",65],["T_WHITESPACE"," ",65],["T_CONSTANT_ENCAPSED_STRING","'buy_x_get_y'",65],",",["T_WHITESPACE","\n        ",65],"]",",",["T_WHITESPACE","\n        ",66],["T_CONSTANT_ENCAPSED_STRING","'apply_to_shipping'",67],["T_WHITESPACE"," ",67],["T_DOUBLE_ARROW","=>",67],["T_WHITESPACE"," ",67],"[",["T_WHITESPACE","\n            ",67],["T_CONSTANT_ENCAPSED_STRING","'Yes'",68],["T_WHITESPACE"," ",68],["T_DOUBLE_ARROW","=>",68],["T_WHITESPACE"," ",68],["T_LNUMBER","1",68],",",["T_WHITESPACE","\n            ",68],["T_CONSTANT_ENCAPSED_STRING","'No'",69],["T_WHITESPACE"," ",69],["T_DOUBLE_ARROW","=>",69],["T_WHITESPACE"," ",69],["T_LNUMBER","2",69],",",["T_WHITESPACE","\n        ",69],"]",",",["T_WHITESPACE","\n        ",70],["T_CONSTANT_ENCAPSED_STRING","'stop_rules_processing'",71],["T_WHITESPACE"," ",71],["T_DOUBLE_ARROW","=>",71],["T_WHITESPACE"," ",71],"[",["T_WHITESPACE","\n            ",71],["T_CONSTANT_ENCAPSED_STRING","'Yes'",72],["T_WHITESPACE"," ",72],["T_DOUBLE_ARROW","=>",72],["T_WHITESPACE"," ",72],["T_LNUMBER","1",72],",",["T_WHITESPACE","\n            ",72],["T_CONSTANT_ENCAPSED_STRING","'No'",73],["T_WHITESPACE"," ",73],["T_DOUBLE_ARROW","=>",73],["T_WHITESPACE"," ",73],["T_LNUMBER","2",73],",",["T_WHITESPACE","\n        ",73],"]",",",["T_WHITESPACE","\n        ",74],["T_CONSTANT_ENCAPSED_STRING","'simple_free_shipping'",75],["T_WHITESPACE"," ",75],["T_DOUBLE_ARROW","=>",75],["T_WHITESPACE"," ",75],"[",["T_WHITESPACE","\n            ",75],["T_CONSTANT_ENCAPSED_STRING","'No'",76],["T_WHITESPACE"," ",76],["T_DOUBLE_ARROW","=>",76],["T_WHITESPACE"," ",76],["T_LNUMBER","0",76],",",["T_WHITESPACE","\n            ",76],["T_CONSTANT_ENCAPSED_STRING","'For matching items only'",77],["T_WHITESPACE"," ",77],["T_DOUBLE_ARROW","=>",77],["T_WHITESPACE"," ",77],["T_LNUMBER","1",77],",",["T_WHITESPACE","\n            ",77],["T_CONSTANT_ENCAPSED_STRING","'For shipment with matching items'",78],["T_WHITESPACE"," ",78],["T_DOUBLE_ARROW","=>",78],["T_WHITESPACE"," ",78],["T_LNUMBER","2",78],",",["T_WHITESPACE","\n        ",78],"]",",",["T_WHITESPACE","\n        ",79],["T_CONSTANT_ENCAPSED_STRING","'website_ids'",80],["T_WHITESPACE"," ",80],["T_DOUBLE_ARROW","=>",80],["T_WHITESPACE"," ",80],"[",["T_WHITESPACE","\n            ",80],["T_CONSTANT_ENCAPSED_STRING","'Main Website'",81],["T_WHITESPACE"," ",81],["T_DOUBLE_ARROW","=>",81],["T_WHITESPACE"," ",81],["T_LNUMBER","1",81],["T_WHITESPACE","\n        ",81],"]",["T_WHITESPACE","\n    ",82],"]",";",["T_WHITESPACE","\n\n    ",83],["T_DOC_COMMENT","\/**\n     * Map of type parameter.\n     *\n     * @var array\n     *\/",85],["T_WHITESPACE","\n    ",89],["T_PROTECTED","protected",90],["T_WHITESPACE"," ",90],["T_VARIABLE","$mapTypeParams",90],["T_WHITESPACE"," ",90],"=",["T_WHITESPACE"," ",90],"[",["T_WHITESPACE","\n        ",90],["T_CONSTANT_ENCAPSED_STRING","'Conditions combination'",91],["T_WHITESPACE"," ",91],["T_DOUBLE_ARROW","=>",91],["T_WHITESPACE"," ",91],"[",["T_WHITESPACE","\n            ",91],["T_CONSTANT_ENCAPSED_STRING","'type'",92],["T_WHITESPACE"," ",92],["T_DOUBLE_ARROW","=>",92],["T_WHITESPACE"," ",92],["T_CONSTANT_ENCAPSED_STRING","'salesrule\/rule_condition_combine'",92],",",["T_WHITESPACE","\n            ",92],["T_CONSTANT_ENCAPSED_STRING","'aggregator'",93],["T_WHITESPACE"," ",93],["T_DOUBLE_ARROW","=>",93],["T_WHITESPACE"," ",93],["T_CONSTANT_ENCAPSED_STRING","'all'",93],",",["T_WHITESPACE","\n            ",93],["T_CONSTANT_ENCAPSED_STRING","'value'",94],["T_WHITESPACE"," ",94],["T_DOUBLE_ARROW","=>",94],["T_WHITESPACE"," ",94],["T_CONSTANT_ENCAPSED_STRING","'1'",94],",",["T_WHITESPACE","\n        ",94],"]",",",["T_WHITESPACE","\n        ",95],["T_CONSTANT_ENCAPSED_STRING","'Category'",96],["T_WHITESPACE"," ",96],["T_DOUBLE_ARROW","=>",96],["T_WHITESPACE"," ",96],"[",["T_WHITESPACE","\n            ",96],["T_CONSTANT_ENCAPSED_STRING","'type'",97],["T_WHITESPACE"," ",97],["T_DOUBLE_ARROW","=>",97],["T_WHITESPACE"," ",97],["T_CONSTANT_ENCAPSED_STRING","'salesrule\/rule_condition_product'",97],",",["T_WHITESPACE","\n            ",97],["T_CONSTANT_ENCAPSED_STRING","'attribute'",98],["T_WHITESPACE"," ",98],["T_DOUBLE_ARROW","=>",98],["T_WHITESPACE"," ",98],["T_CONSTANT_ENCAPSED_STRING","'category_ids'",98],",",["T_WHITESPACE","\n        ",98],"]",["T_WHITESPACE","\n    ",99],"]",";",["T_WHITESPACE","\n\n    ",100],["T_DOC_COMMENT","\/**\n     * Mapping values for customer group.\n     *\n     * @var array\n     *\/",102],["T_WHITESPACE","\n    ",106],["T_PROTECTED","protected",107],["T_WHITESPACE"," ",107],["T_VARIABLE","$customerIds",107],["T_WHITESPACE"," ",107],"=",["T_WHITESPACE"," ",107],"[",["T_WHITESPACE","\n        ",107],["T_CONSTANT_ENCAPSED_STRING","'NOT LOGGED IN'",108],["T_WHITESPACE"," ",108],["T_DOUBLE_ARROW","=>",108],["T_WHITESPACE"," ",108],["T_LNUMBER","0",108],",",["T_WHITESPACE","\n        ",108],["T_CONSTANT_ENCAPSED_STRING","'General'",109],["T_WHITESPACE"," ",109],["T_DOUBLE_ARROW","=>",109],["T_WHITESPACE"," ",109],["T_LNUMBER","1",109],",",["T_WHITESPACE","\n        ",109],["T_CONSTANT_ENCAPSED_STRING","'Wholesale'",110],["T_WHITESPACE"," ",110],["T_DOUBLE_ARROW","=>",110],["T_WHITESPACE"," ",110],["T_LNUMBER","2",110],",",["T_WHITESPACE","\n        ",110],["T_CONSTANT_ENCAPSED_STRING","'Retailer'",111],["T_WHITESPACE"," ",111],["T_DOUBLE_ARROW","=>",111],["T_WHITESPACE"," ",111],["T_LNUMBER","3",111],",",["T_WHITESPACE","\n    ",111],"]",";",["T_WHITESPACE","\n\n    ",112],["T_DOC_COMMENT","\/**\n     * Post request for creating sales rule.\n     *\n     * @param FixtureInterface $fixture [optional]\n     * @return array\n     * @throws \\Exception\n     *\/",114],["T_WHITESPACE","\n    ",120],["T_PUBLIC","public",121],["T_WHITESPACE"," ",121],["T_FUNCTION","function",121],["T_WHITESPACE"," ",121],["T_STRING","persist",121],"(",["T_STRING","FixtureInterface",121],["T_WHITESPACE"," ",121],["T_VARIABLE","$fixture",121],["T_WHITESPACE"," ",121],"=",["T_WHITESPACE"," ",121],["T_STRING","null",121],")",["T_WHITESPACE","\n    ",121],"{",["T_WHITESPACE","\n        ",122],["T_VARIABLE","$url",123],["T_WHITESPACE"," ",123],"=",["T_WHITESPACE"," ",123],["T_VARIABLE","$_ENV",123],"[",["T_CONSTANT_ENCAPSED_STRING","'app_backend_url'",123],"]",["T_WHITESPACE"," ",123],".",["T_WHITESPACE"," ",123],["T_CONSTANT_ENCAPSED_STRING","'promo_quote\/save\/'",123],";",["T_WHITESPACE","\n        ",123],["T_VARIABLE","$data",124],["T_WHITESPACE"," ",124],"=",["T_WHITESPACE"," ",124],["T_VARIABLE","$this",124],["T_OBJECT_OPERATOR","->",124],["T_STRING","replaceMappingData",124],"(",["T_VARIABLE","$fixture",124],["T_OBJECT_OPERATOR","->",124],["T_STRING","getData",124],"(",")",")",";",["T_WHITESPACE","\n        ",124],["T_VARIABLE","$data",125],"[",["T_CONSTANT_ENCAPSED_STRING","'customer_group_ids'",125],"]",["T_WHITESPACE"," ",125],"=",["T_WHITESPACE"," ",125],["T_VARIABLE","$this",125],["T_OBJECT_OPERATOR","->",125],["T_STRING","prepareCustomerGroup",125],"(",["T_VARIABLE","$data",125],")",";",["T_WHITESPACE","\n        ",125],["T_VARIABLE","$data",126],"[",["T_CONSTANT_ENCAPSED_STRING","'website_ids'",126],"]",["T_WHITESPACE"," ",126],"=",["T_WHITESPACE"," ",126],["T_VARIABLE","$this",126],["T_OBJECT_OPERATOR","->",126],["T_STRING","prepareWebsiteIds",126],"(",["T_VARIABLE","$fixture",126],")",";",["T_WHITESPACE","\n        ",126],["T_IF","if",127],["T_WHITESPACE"," ",127],"(",["T_ISSET","isset",127],"(",["T_VARIABLE","$data",127],"[",["T_CONSTANT_ENCAPSED_STRING","'conditions_serialized'",127],"]",")",")",["T_WHITESPACE"," ",127],"{",["T_WHITESPACE","\n            ",127],["T_VARIABLE","$data",128],"[",["T_CONSTANT_ENCAPSED_STRING","'rule'",128],"]","[",["T_CONSTANT_ENCAPSED_STRING","'conditions'",128],"]",["T_WHITESPACE"," ",128],"=",["T_WHITESPACE"," ",128],["T_VARIABLE","$this",128],["T_OBJECT_OPERATOR","->",128],["T_STRING","prepareCondition",128],"(",["T_VARIABLE","$data",128],"[",["T_CONSTANT_ENCAPSED_STRING","'conditions_serialized'",128],"]",")",";",["T_WHITESPACE","\n            ",128],["T_UNSET","unset",129],"(",["T_VARIABLE","$data",129],"[",["T_CONSTANT_ENCAPSED_STRING","'conditions_serialized'",129],"]",")",";",["T_WHITESPACE","\n        ",129],"}",["T_WHITESPACE","\n\n        ",130],["T_VARIABLE","$curl",132],["T_WHITESPACE"," ",132],"=",["T_WHITESPACE"," ",132],["T_NEW","new",132],["T_WHITESPACE"," ",132],["T_STRING","BackendDecorator",132],"(",["T_NEW","new",132],["T_WHITESPACE"," ",132],["T_STRING","CurlTransport",132],"(",")",",",["T_WHITESPACE"," ",132],["T_VARIABLE","$this",132],["T_OBJECT_OPERATOR","->",132],["T_STRING","_configuration",132],")",";",["T_WHITESPACE","\n        ",132],["T_VARIABLE","$curl",133],["T_OBJECT_OPERATOR","->",133],["T_STRING","write",133],"(",["T_VARIABLE","$url",133],",",["T_WHITESPACE"," ",133],["T_VARIABLE","$data",133],")",";",["T_WHITESPACE","\n        ",133],["T_VARIABLE","$response",134],["T_WHITESPACE"," ",134],"=",["T_WHITESPACE"," ",134],["T_VARIABLE","$curl",134],["T_OBJECT_OPERATOR","->",134],["T_STRING","read",134],"(",")",";",["T_WHITESPACE","\n        ",134],["T_VARIABLE","$curl",135],["T_OBJECT_OPERATOR","->",135],["T_STRING","close",135],"(",")",";",["T_WHITESPACE","\n        ",135],["T_IF","if",136],["T_WHITESPACE"," ",136],"(","!",["T_STRING","strpos",136],"(",["T_VARIABLE","$response",136],",",["T_WHITESPACE"," ",136],["T_CONSTANT_ENCAPSED_STRING","'class=\"messages\"'",136],")",")",["T_WHITESPACE"," ",136],"{",["T_WHITESPACE","\n            ",136],["T_THROW","throw",137],["T_WHITESPACE"," ",137],["T_NEW","new",137],["T_WHITESPACE"," ",137],["T_NS_SEPARATOR","\\",137],["T_STRING","Exception",137],"(","\"",["T_ENCAPSED_AND_WHITESPACE","Sales rule entity creating by curl handler was not successful! Response: ",137],["T_VARIABLE","$response",137],"\"",")",";",["T_WHITESPACE","\n        ",137],"}",["T_WHITESPACE","\n        ",138],["T_VARIABLE","$id",139],["T_WHITESPACE"," ",139],"=",["T_WHITESPACE"," ",139],["T_VARIABLE","$this",139],["T_OBJECT_OPERATOR","->",139],["T_STRING","getSalesRuleId",139],"(",["T_VARIABLE","$response",139],")",";",["T_WHITESPACE","\n\n        ",139],["T_RETURN","return",141],["T_WHITESPACE"," ",141],"[",["T_CONSTANT_ENCAPSED_STRING","'rule_id'",141],["T_WHITESPACE"," ",141],["T_DOUBLE_ARROW","=>",141],["T_WHITESPACE"," ",141],["T_VARIABLE","$id",141],"]",";",["T_WHITESPACE","\n    ",141],"}",["T_WHITESPACE","\n\n    ",142],["T_DOC_COMMENT","\/**\n     * Prepare website ids for curl.\n     *\n     * @param SalesRule $fixture\n     * @return array\n     *\/",144],["T_WHITESPACE","\n    ",149],["T_PROTECTED","protected",150],["T_WHITESPACE"," ",150],["T_FUNCTION","function",150],["T_WHITESPACE"," ",150],["T_STRING","prepareWebsiteIds",150],"(",["T_STRING","SalesRule",150],["T_WHITESPACE"," ",150],["T_VARIABLE","$fixture",150],")",["T_WHITESPACE","\n    ",150],"{",["T_WHITESPACE","\n        ",151],["T_VARIABLE","$websites",152],["T_WHITESPACE"," ",152],"=",["T_WHITESPACE"," ",152],["T_VARIABLE","$fixture",152],["T_OBJECT_OPERATOR","->",152],["T_STRING","getDataFieldConfig",152],"(",["T_CONSTANT_ENCAPSED_STRING","'website_ids'",152],")","[",["T_CONSTANT_ENCAPSED_STRING","'source'",152],"]",["T_OBJECT_OPERATOR","->",152],["T_STRING","getWebsites",152],"(",")",";",["T_WHITESPACE","\n        ",152],["T_VARIABLE","$data",153],["T_WHITESPACE"," ",153],"=",["T_WHITESPACE"," ",153],"[","]",";",["T_WHITESPACE","\n        ",153],["T_DOC_COMMENT","\/** @var Website $website *\/",154],["T_WHITESPACE","\n        ",154],["T_FOREACH","foreach",155],["T_WHITESPACE"," ",155],"(",["T_VARIABLE","$websites",155],["T_WHITESPACE"," ",155],["T_AS","as",155],["T_WHITESPACE"," ",155],["T_VARIABLE","$website",155],")",["T_WHITESPACE"," ",155],"{",["T_WHITESPACE","\n            ",155],["T_VARIABLE","$data",156],"[","]",["T_WHITESPACE"," ",156],"=",["T_WHITESPACE"," ",156],["T_VARIABLE","$website",156],["T_OBJECT_OPERATOR","->",156],["T_STRING","getWebsiteId",156],"(",")",";",["T_WHITESPACE","\n        ",156],"}",["T_WHITESPACE","\n        ",157],["T_RETURN","return",158],["T_WHITESPACE"," ",158],["T_VARIABLE","$data",158],";",["T_WHITESPACE","\n    ",158],"}",["T_WHITESPACE","\n\n    ",159],["T_DOC_COMMENT","\/**\n     * Prepare customer group data for curl.\n     *\n     * @param array $data\n     * @return array\n     *\/",161],["T_WHITESPACE","\n    ",166],["T_PROTECTED","protected",167],["T_WHITESPACE"," ",167],["T_FUNCTION","function",167],["T_WHITESPACE"," ",167],["T_STRING","prepareCustomerGroup",167],"(",["T_ARRAY","array",167],["T_WHITESPACE"," ",167],["T_VARIABLE","$data",167],")",["T_WHITESPACE","\n    ",167],"{",["T_WHITESPACE","\n        ",168],["T_VARIABLE","$groupIds",169],["T_WHITESPACE"," ",169],"=",["T_WHITESPACE"," ",169],"[","]",";",["T_WHITESPACE","\n        ",169],["T_IF","if",170],["T_WHITESPACE"," ",170],"(","!",["T_EMPTY","empty",170],"(",["T_VARIABLE","$data",170],"[",["T_CONSTANT_ENCAPSED_STRING","'customer_group_ids'",170],"]",")",")",["T_WHITESPACE"," ",170],"{",["T_WHITESPACE","\n            ",170],["T_FOREACH","foreach",171],["T_WHITESPACE"," ",171],"(",["T_VARIABLE","$data",171],"[",["T_CONSTANT_ENCAPSED_STRING","'customer_group_ids'",171],"]",["T_WHITESPACE"," ",171],["T_AS","as",171],["T_WHITESPACE"," ",171],["T_VARIABLE","$name",171],")",["T_WHITESPACE"," ",171],"{",["T_WHITESPACE","\n                ",171],["T_VARIABLE","$groupIds",172],"[","]",["T_WHITESPACE"," ",172],"=",["T_WHITESPACE"," ",172],["T_ISSET","isset",172],"(",["T_VARIABLE","$this",172],["T_OBJECT_OPERATOR","->",172],["T_STRING","customerIds",172],"[",["T_VARIABLE","$name",172],"]",")",["T_WHITESPACE"," ",172],"?",["T_WHITESPACE"," ",172],["T_VARIABLE","$this",172],["T_OBJECT_OPERATOR","->",172],["T_STRING","customerIds",172],"[",["T_VARIABLE","$name",172],"]",["T_WHITESPACE"," ",172],":",["T_WHITESPACE"," ",172],["T_VARIABLE","$name",172],";",["T_WHITESPACE","\n            ",172],"}",["T_WHITESPACE","\n        ",173],"}",["T_WHITESPACE","\n\n        ",174],["T_RETURN","return",176],["T_WHITESPACE"," ",176],["T_VARIABLE","$groupIds",176],";",["T_WHITESPACE","\n    ",176],"}",["T_WHITESPACE","\n\n    ",177],["T_DOC_COMMENT","\/**\n     * Return saved sales rule id.\n     *\n     * @param string $response\n     * @return int|null\n     * @throws \\Exception\n     *\/",179],["T_WHITESPACE","\n    ",185],["T_PROTECTED","protected",186],["T_WHITESPACE"," ",186],["T_FUNCTION","function",186],["T_WHITESPACE"," ",186],["T_STRING","getSalesRuleId",186],"(",["T_VARIABLE","$response",186],")",["T_WHITESPACE","\n    ",186],"{",["T_WHITESPACE","\n        ",187],["T_STRING","preg_match_all",188],"(",["T_CONSTANT_ENCAPSED_STRING","'~promo_quote\/edit[^\\s]*\\\/id\\\/(\\d+)~'",188],",",["T_WHITESPACE"," ",188],["T_VARIABLE","$response",188],",",["T_WHITESPACE"," ",188],["T_VARIABLE","$matches",188],")",";",["T_WHITESPACE","\n        ",188],["T_IF","if",189],["T_WHITESPACE"," ",189],"(",["T_EMPTY","empty",189],"(",["T_VARIABLE","$matches",189],")",")",["T_WHITESPACE"," ",189],"{",["T_WHITESPACE","\n            ",189],["T_THROW","throw",190],["T_WHITESPACE"," ",190],["T_NEW","new",190],["T_WHITESPACE"," ",190],["T_NS_SEPARATOR","\\",190],["T_STRING","Exception",190],"(",["T_CONSTANT_ENCAPSED_STRING","'Cannot find Sales Rule id'",190],")",";",["T_WHITESPACE","\n        ",190],"}",["T_WHITESPACE","\n\n        ",191],["T_RETURN","return",193],["T_WHITESPACE"," ",193],["T_STRING","max",193],"(",["T_EMPTY","empty",193],"(",["T_VARIABLE","$matches",193],"[",["T_LNUMBER","1",193],"]",")",["T_WHITESPACE"," ",193],"?",["T_WHITESPACE"," ",193],["T_STRING","null",193],["T_WHITESPACE"," ",193],":",["T_WHITESPACE"," ",193],["T_VARIABLE","$matches",193],"[",["T_LNUMBER","1",193],"]",")",";",["T_WHITESPACE","\n    ",193],"}",["T_WHITESPACE","\n",194],"}",["T_WHITESPACE","\n",195]]
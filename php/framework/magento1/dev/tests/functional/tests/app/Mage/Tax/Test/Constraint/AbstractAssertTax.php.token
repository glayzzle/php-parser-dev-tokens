[["T_OPEN_TAG","<?php\n",1],["T_DOC_COMMENT","\/**\n * Magento\n *\n * NOTICE OF LICENSE\n *\n * This source file is subject to the Open Software License (OSL 3.0)\n * that is bundled with this package in the file LICENSE.txt.\n * It is also available through the world-wide-web at this URL:\n * http:\/\/opensource.org\/licenses\/osl-3.0.php\n * If you did not receive a copy of the license and are unable to\n * obtain it through the world-wide-web, please send an email\n * to license@magento.com so we can send you a copy immediately.\n *\n * DISCLAIMER\n *\n * Do not edit or add to this file if you wish to upgrade Magento to newer\n * versions in the future. If you wish to customize Magento for your\n * needs please refer to http:\/\/www.magento.com for more information.\n *\n * @category    Tests\n * @package     Tests_Functional\n * @copyright  Copyright (c) 2006-2016 X.commerce, Inc. and affiliates (http:\/\/www.magento.com)\n * @license    http:\/\/opensource.org\/licenses\/osl-3.0.php  Open Software License (OSL 3.0)\n *\/",2],["T_WHITESPACE","\n\n",25],["T_NAMESPACE","namespace",27],["T_WHITESPACE"," ",27],["T_STRING","Mage",27],["T_NS_SEPARATOR","\\",27],["T_STRING","Tax",27],["T_NS_SEPARATOR","\\",27],["T_STRING","Test",27],["T_NS_SEPARATOR","\\",27],["T_STRING","Constraint",27],";",["T_WHITESPACE","\n\n",27],["T_USE","use",29],["T_WHITESPACE"," ",29],["T_STRING","Magento",29],["T_NS_SEPARATOR","\\",29],["T_STRING","Mtf",29],["T_NS_SEPARATOR","\\",29],["T_STRING","Constraint",29],["T_NS_SEPARATOR","\\",29],["T_STRING","AbstractAssertForm",29],";",["T_WHITESPACE","\n",29],["T_USE","use",30],["T_WHITESPACE"," ",30],["T_STRING","Mage",30],["T_NS_SEPARATOR","\\",30],["T_STRING","Sales",30],["T_NS_SEPARATOR","\\",30],["T_STRING","Test",30],["T_NS_SEPARATOR","\\",30],["T_STRING","Page",30],["T_NS_SEPARATOR","\\",30],["T_STRING","Adminhtml",30],["T_NS_SEPARATOR","\\",30],["T_STRING","SalesOrderView",30],";",["T_WHITESPACE","\n",30],["T_USE","use",31],["T_WHITESPACE"," ",31],["T_STRING","Magento",31],["T_NS_SEPARATOR","\\",31],["T_STRING","Mtf",31],["T_NS_SEPARATOR","\\",31],["T_STRING","Fixture",31],["T_NS_SEPARATOR","\\",31],["T_STRING","InjectableFixture",31],";",["T_WHITESPACE","\n",31],["T_USE","use",32],["T_WHITESPACE"," ",32],["T_STRING","Mage",32],["T_NS_SEPARATOR","\\",32],["T_STRING","Checkout",32],["T_NS_SEPARATOR","\\",32],["T_STRING","Test",32],["T_NS_SEPARATOR","\\",32],["T_STRING","Block",32],["T_NS_SEPARATOR","\\",32],["T_STRING","AbstractItem",32],";",["T_WHITESPACE","\n",32],["T_USE","use",33],["T_WHITESPACE"," ",33],["T_STRING","Magento",33],["T_NS_SEPARATOR","\\",33],["T_STRING","Mtf",33],["T_NS_SEPARATOR","\\",33],["T_STRING","ObjectManager",33],";",["T_WHITESPACE","\n",33],["T_USE","use",34],["T_WHITESPACE"," ",34],["T_STRING","Mage",34],["T_NS_SEPARATOR","\\",34],["T_STRING","Checkout",34],["T_NS_SEPARATOR","\\",34],["T_STRING","Test",34],["T_NS_SEPARATOR","\\",34],["T_STRING","Block",34],["T_NS_SEPARATOR","\\",34],["T_STRING","Cart",34],["T_NS_SEPARATOR","\\",34],["T_STRING","Totals",34],";",["T_WHITESPACE","\n\n",34],["T_DOC_COMMENT","\/**\n * Abstract assert for check taxes.\n *\/",36],["T_WHITESPACE","\n",38],["T_ABSTRACT","abstract",39],["T_WHITESPACE"," ",39],["T_CLASS","class",39],["T_WHITESPACE"," ",39],["T_STRING","AbstractAssertTax",39],["T_WHITESPACE"," ",39],["T_EXTENDS","extends",39],["T_WHITESPACE"," ",39],["T_STRING","AbstractAssertForm",39],["T_WHITESPACE","\n",39],"{",["T_WHITESPACE","\n    ",40],["T_DOC_COMMENT","\/**\n     * Verify fields for assert.\n     *\n     * @var array\n     *\/",41],["T_WHITESPACE","\n    ",45],["T_PROTECTED","protected",46],["T_WHITESPACE"," ",46],["T_VARIABLE","$verifyFields",46],["T_WHITESPACE"," ",46],"=",["T_WHITESPACE"," ",46],"[",["T_WHITESPACE","\n        ",46],["T_CONSTANT_ENCAPSED_STRING","'subtotal_excl_tax'",47],",",["T_WHITESPACE","\n        ",47],["T_CONSTANT_ENCAPSED_STRING","'subtotal_incl_tax'",48],",",["T_WHITESPACE","\n        ",48],["T_CONSTANT_ENCAPSED_STRING","'discount'",49],",",["T_WHITESPACE","\n        ",49],["T_CONSTANT_ENCAPSED_STRING","'shipping_excl_tax'",50],",",["T_WHITESPACE","\n        ",50],["T_CONSTANT_ENCAPSED_STRING","'shipping_incl_tax'",51],",",["T_WHITESPACE","\n        ",51],["T_CONSTANT_ENCAPSED_STRING","'grand_total_excl_tax'",52],",",["T_WHITESPACE","\n        ",52],["T_CONSTANT_ENCAPSED_STRING","'grand_total_incl_tax'",53],",",["T_WHITESPACE","\n        ",53],["T_CONSTANT_ENCAPSED_STRING","'tax'",54],["T_WHITESPACE","\n    ",54],"]",";",["T_WHITESPACE","\n\n    ",55],["T_DOC_COMMENT","\/**\n     * Verifiable fields for cart items.\n     *\n     * @var array\n     *\/",57],["T_WHITESPACE","\n    ",61],["T_PROTECTED","protected",62],["T_WHITESPACE"," ",62],["T_VARIABLE","$cartItemVerifiableFields",62],["T_WHITESPACE"," ",62],"=",["T_WHITESPACE"," ",62],"[",["T_WHITESPACE","\n        ",62],["T_CONSTANT_ENCAPSED_STRING","'cart_item_price_excl_tax'",63],",",["T_WHITESPACE","\n        ",63],["T_CONSTANT_ENCAPSED_STRING","'cart_item_price_incl_tax'",64],",",["T_WHITESPACE","\n        ",64],["T_CONSTANT_ENCAPSED_STRING","'cart_item_subtotal_excl_tax'",65],",",["T_WHITESPACE","\n        ",65],["T_CONSTANT_ENCAPSED_STRING","'cart_item_subtotal_incl_tax'",66],["T_WHITESPACE","\n    ",66],"]",";",["T_WHITESPACE","\n\n    ",67],["T_DOC_COMMENT","\/**\n     * Price types.\n     *\n     * @var array\n     *\/",69],["T_WHITESPACE","\n    ",73],["T_PROTECTED","protected",74],["T_WHITESPACE"," ",74],["T_VARIABLE","$priceTypes",74],["T_WHITESPACE"," ",74],"=",["T_WHITESPACE"," ",74],"[",["T_CONSTANT_ENCAPSED_STRING","'order_prices'",74],["T_WHITESPACE"," ",74],["T_DOUBLE_ARROW","=>",74],["T_WHITESPACE"," ",74],["T_CONSTANT_ENCAPSED_STRING","'Order'",74],"]",";",["T_WHITESPACE","\n\n    ",74],["T_DOC_COMMENT","\/**\n     * Order view page on backend.\n     *\n     * @var SalesOrderView\n     *\/",76],["T_WHITESPACE","\n    ",80],["T_PROTECTED","protected",81],["T_WHITESPACE"," ",81],["T_VARIABLE","$orderView",81],";",["T_WHITESPACE","\n\n    ",81],["T_DOC_COMMENT","\/**\n     * Assert order prices.\n     *\n     * @param InjectableFixture $product\n     * @param array $prices\n     * @return void\n     *\/",83],["T_WHITESPACE","\n    ",89],["T_PROTECTED","protected",90],["T_WHITESPACE"," ",90],["T_FUNCTION","function",90],["T_WHITESPACE"," ",90],["T_STRING","assertOrderPrices",90],"(",["T_STRING","InjectableFixture",90],["T_WHITESPACE"," ",90],["T_VARIABLE","$product",90],",",["T_WHITESPACE"," ",90],["T_ARRAY","array",90],["T_WHITESPACE"," ",90],["T_VARIABLE","$prices",90],")",["T_WHITESPACE","\n    ",90],"{",["T_WHITESPACE","\n        ",91],["T_VARIABLE","$error",92],["T_WHITESPACE"," ",92],"=",["T_WHITESPACE"," ",92],["T_VARIABLE","$this",92],["T_OBJECT_OPERATOR","->",92],["T_STRING","verifyData",92],"(",["T_VARIABLE","$prices",92],",",["T_WHITESPACE"," ",92],["T_VARIABLE","$this",92],["T_OBJECT_OPERATOR","->",92],["T_STRING","getActualPrices",92],"(",["T_VARIABLE","$product",92],",",["T_WHITESPACE"," ",92],["T_CONSTANT_ENCAPSED_STRING","'order_prices'",92],")",")",";",["T_WHITESPACE","\n        ",92],["T_NS_SEPARATOR","\\",93],["T_STRING","PHPUnit_Framework_Assert",93],["T_DOUBLE_COLON","::",93],["T_STRING","assertTrue",93],"(",["T_EMPTY","empty",93],"(",["T_VARIABLE","$error",93],")",",",["T_WHITESPACE"," ",93],["T_VARIABLE","$error",93],")",";",["T_WHITESPACE","\n    ",93],"}",["T_WHITESPACE","\n\n    ",94],["T_DOC_COMMENT","\/**\n     * Get actual prices.\n     *\n     * @param InjectableFixture $product\n     * @param string $pricesType\n     * @return array\n     *\/",96],["T_WHITESPACE","\n    ",102],["T_PROTECTED","protected",103],["T_WHITESPACE"," ",103],["T_FUNCTION","function",103],["T_WHITESPACE"," ",103],["T_STRING","getActualPrices",103],"(",["T_STRING","InjectableFixture",103],["T_WHITESPACE"," ",103],["T_VARIABLE","$product",103],",",["T_WHITESPACE"," ",103],["T_VARIABLE","$pricesType",103],")",["T_WHITESPACE","\n    ",103],"{",["T_WHITESPACE","\n        ",104],["T_RETURN","return",105],["T_WHITESPACE"," ",105],["T_STRING","array_merge",105],"(",["T_WHITESPACE","\n            ",105],["T_VARIABLE","$this",106],["T_OBJECT_OPERATOR","->",106],"{",["T_CONSTANT_ENCAPSED_STRING","'get'",106],["T_WHITESPACE"," ",106],".",["T_WHITESPACE"," ",106],["T_VARIABLE","$this",106],["T_OBJECT_OPERATOR","->",106],["T_STRING","priceTypes",106],"[",["T_VARIABLE","$pricesType",106],"]",["T_WHITESPACE"," ",106],".",["T_WHITESPACE"," ",106],["T_CONSTANT_ENCAPSED_STRING","'Prices'",106],"}","(",["T_VARIABLE","$product",106],")",",",["T_WHITESPACE","\n            ",106],["T_VARIABLE","$this",107],["T_OBJECT_OPERATOR","->",107],"{",["T_CONSTANT_ENCAPSED_STRING","'get'",107],["T_WHITESPACE"," ",107],".",["T_WHITESPACE"," ",107],["T_VARIABLE","$this",107],["T_OBJECT_OPERATOR","->",107],["T_STRING","priceTypes",107],"[",["T_VARIABLE","$pricesType",107],"]",["T_WHITESPACE"," ",107],".",["T_WHITESPACE"," ",107],["T_CONSTANT_ENCAPSED_STRING","'Totals'",107],"}","(",")",["T_WHITESPACE","\n        ",107],")",";",["T_WHITESPACE","\n    ",108],"}",["T_WHITESPACE","\n\n    ",109],["T_DOC_COMMENT","\/**\n     * Unset category and product page expected prices.\n     *\n     * @param array $prices\n     * @return array\n     *\/",111],["T_WHITESPACE","\n    ",116],["T_PROTECTED","protected",117],["T_WHITESPACE"," ",117],["T_FUNCTION","function",117],["T_WHITESPACE"," ",117],["T_STRING","preparePrices",117],"(",["T_ARRAY","array",117],["T_WHITESPACE"," ",117],["T_VARIABLE","$prices",117],")",["T_WHITESPACE","\n    ",117],"{",["T_WHITESPACE","\n        ",118],["T_VARIABLE","$resultTotalPrices",119],["T_WHITESPACE"," ",119],"=",["T_WHITESPACE"," ",119],["T_STRING","array_intersect_key",119],"(",["T_VARIABLE","$prices",119],",",["T_WHITESPACE"," ",119],["T_STRING","array_flip",119],"(",["T_VARIABLE","$this",119],["T_OBJECT_OPERATOR","->",119],["T_STRING","verifyFields",119],")",")",";",["T_WHITESPACE","\n        ",119],["T_VARIABLE","$resultItemPrices",120],["T_WHITESPACE"," ",120],"=",["T_WHITESPACE"," ",120],["T_STRING","array_intersect_key",120],"(",["T_VARIABLE","$prices",120],",",["T_WHITESPACE"," ",120],["T_STRING","array_flip",120],"(",["T_VARIABLE","$this",120],["T_OBJECT_OPERATOR","->",120],["T_STRING","cartItemVerifiableFields",120],")",")",";",["T_WHITESPACE","\n\n        ",120],["T_RETURN","return",122],["T_WHITESPACE"," ",122],["T_STRING","array_merge",122],"(",["T_VARIABLE","$resultTotalPrices",122],",",["T_WHITESPACE"," ",122],["T_VARIABLE","$resultItemPrices",122],")",";",["T_WHITESPACE","\n    ",122],"}",["T_WHITESPACE","\n\n    ",123],["T_DOC_COMMENT","\/**\n     * Get order product prices.\n     *\n     * @param InjectableFixture $product\n     * @return array\n     *\/",125],["T_WHITESPACE","\n    ",130],["T_PUBLIC","public",131],["T_WHITESPACE"," ",131],["T_FUNCTION","function",131],["T_WHITESPACE"," ",131],["T_STRING","getOrderPrices",131],"(",["T_STRING","InjectableFixture",131],["T_WHITESPACE"," ",131],["T_VARIABLE","$product",131],")",["T_WHITESPACE","\n    ",131],"{",["T_WHITESPACE","\n        ",132],["T_VARIABLE","$viewBlock",133],["T_WHITESPACE"," ",133],"=",["T_WHITESPACE"," ",133],["T_VARIABLE","$this",133],["T_OBJECT_OPERATOR","->",133],["T_STRING","orderView",133],["T_OBJECT_OPERATOR","->",133],["T_STRING","getItemsOrderedBlock",133],"(",")",["T_OBJECT_OPERATOR","->",133],["T_STRING","getItemProductBlock",133],"(",["T_VARIABLE","$product",133],")",";",["T_WHITESPACE","\n        ",133],["T_RETURN","return",134],["T_WHITESPACE"," ",134],["T_VARIABLE","$this",134],["T_OBJECT_OPERATOR","->",134],["T_STRING","getTypePrices",134],"(",["T_VARIABLE","$viewBlock",134],")",";",["T_WHITESPACE","\n    ",134],"}",["T_WHITESPACE","\n\n    ",135],["T_DOC_COMMENT","\/**\n     * Get order totals.\n     *\n     * @return array\n     *\/",137],["T_WHITESPACE","\n    ",141],["T_PUBLIC","public",142],["T_WHITESPACE"," ",142],["T_FUNCTION","function",142],["T_WHITESPACE"," ",142],["T_STRING","getOrderTotals",142],"(",")",["T_WHITESPACE","\n    ",142],"{",["T_WHITESPACE","\n        ",143],["T_VARIABLE","$totalsBlock",144],["T_WHITESPACE"," ",144],"=",["T_WHITESPACE"," ",144],["T_VARIABLE","$this",144],["T_OBJECT_OPERATOR","->",144],["T_STRING","orderView",144],["T_OBJECT_OPERATOR","->",144],["T_STRING","getOrderTotalsBlock",144],"(",")",";",["T_WHITESPACE","\n        ",144],["T_RETURN","return",145],["T_WHITESPACE"," ",145],["T_VARIABLE","$this",145],["T_OBJECT_OPERATOR","->",145],["T_STRING","getTypeBlockData",145],"(",["T_VARIABLE","$totalsBlock",145],")",";",["T_WHITESPACE","\n    ",145],"}",["T_WHITESPACE","\n\n    ",146],["T_DOC_COMMENT","\/**\n     * Get type prices.\n     *\n     * @param AbstractItem $block\n     * @return array\n     *\/",148],["T_WHITESPACE","\n    ",153],["T_PROTECTED","protected",154],["T_WHITESPACE"," ",154],["T_FUNCTION","function",154],["T_WHITESPACE"," ",154],["T_STRING","getTypePrices",154],"(",["T_STRING","AbstractItem",154],["T_WHITESPACE"," ",154],["T_VARIABLE","$block",154],")",["T_WHITESPACE","\n    ",154],"{",["T_WHITESPACE","\n        ",155],["T_VARIABLE","$result",156],["T_WHITESPACE"," ",156],"=",["T_WHITESPACE"," ",156],"[","]",";",["T_WHITESPACE","\n        ",156],["T_FOREACH","foreach",157],["T_WHITESPACE"," ",157],"(",["T_VARIABLE","$this",157],["T_OBJECT_OPERATOR","->",157],["T_STRING","cartItemVerifiableFields",157],["T_WHITESPACE"," ",157],["T_AS","as",157],["T_WHITESPACE"," ",157],["T_VARIABLE","$field",157],")",["T_WHITESPACE"," ",157],"{",["T_WHITESPACE","\n            ",157],["T_VARIABLE","$result",158],"[",["T_VARIABLE","$field",158],"]",["T_WHITESPACE"," ",158],"=",["T_WHITESPACE"," ",158],["T_VARIABLE","$block",158],["T_OBJECT_OPERATOR","->",158],["T_STRING","getCartItemTypePrice",158],"(",["T_VARIABLE","$field",158],")",";",["T_WHITESPACE","\n        ",158],"}",["T_WHITESPACE","\n\n        ",159],["T_RETURN","return",161],["T_WHITESPACE"," ",161],["T_VARIABLE","$result",161],";",["T_WHITESPACE","\n    ",161],"}",["T_WHITESPACE","\n\n    ",162],["T_DOC_COMMENT","\/**\n     * Get data from block.\n     *\n     * @param Totals $block\n     * @return array\n     *\/",164],["T_WHITESPACE","\n    ",169],["T_PROTECTED","protected",170],["T_WHITESPACE"," ",170],["T_FUNCTION","function",170],["T_WHITESPACE"," ",170],["T_STRING","getTypeBlockData",170],"(",["T_STRING","Totals",170],["T_WHITESPACE"," ",170],["T_VARIABLE","$block",170],")",["T_WHITESPACE","\n    ",170],"{",["T_WHITESPACE","\n        ",171],["T_VARIABLE","$result",172],["T_WHITESPACE"," ",172],"=",["T_WHITESPACE"," ",172],"[","]",";",["T_WHITESPACE","\n        ",172],["T_FOREACH","foreach",173],["T_WHITESPACE"," ",173],"(",["T_VARIABLE","$this",173],["T_OBJECT_OPERATOR","->",173],["T_STRING","verifyFields",173],["T_WHITESPACE"," ",173],["T_AS","as",173],["T_WHITESPACE"," ",173],["T_VARIABLE","$field",173],")",["T_WHITESPACE"," ",173],"{",["T_WHITESPACE","\n            ",173],["T_VARIABLE","$result",174],"[",["T_VARIABLE","$field",174],"]",["T_WHITESPACE"," ",174],"=",["T_WHITESPACE"," ",174],["T_VARIABLE","$block",174],["T_OBJECT_OPERATOR","->",174],["T_STRING","getData",174],"(",["T_VARIABLE","$field",174],")",";",["T_WHITESPACE","\n        ",174],"}",["T_WHITESPACE","\n\n        ",175],["T_RETURN","return",177],["T_WHITESPACE"," ",177],["T_VARIABLE","$result",177],";",["T_WHITESPACE","\n    ",177],"}",["T_WHITESPACE","\n\n    ",178],["T_DOC_COMMENT","\/**\n     * Prepare verify fields for assert.\n     *\n     * @param array $prices\n     * @return array\n     *\/",180],["T_WHITESPACE","\n    ",185],["T_PROTECTED","protected",186],["T_WHITESPACE"," ",186],["T_FUNCTION","function",186],["T_WHITESPACE"," ",186],["T_STRING","prepareVerifyFields",186],"(",["T_ARRAY","array",186],["T_WHITESPACE"," ",186],["T_VARIABLE","$prices",186],")",["T_WHITESPACE","\n    ",186],"{",["T_WHITESPACE","\n        ",187],["T_VARIABLE","$prices",188],["T_WHITESPACE"," ",188],"=",["T_WHITESPACE"," ",188],["T_VARIABLE","$this",188],["T_OBJECT_OPERATOR","->",188],["T_STRING","preparePrices",188],"(",["T_VARIABLE","$prices",188],")",";",["T_WHITESPACE","\n        ",188],["T_FOREACH","foreach",189],["T_WHITESPACE"," ",189],"(",["T_VARIABLE","$this",189],["T_OBJECT_OPERATOR","->",189],["T_STRING","verifyFields",189],["T_WHITESPACE"," ",189],["T_AS","as",189],["T_WHITESPACE"," ",189],["T_VARIABLE","$field",189],")",["T_WHITESPACE"," ",189],"{",["T_WHITESPACE","\n            ",189],["T_IF","if",190],"(","!",["T_ISSET","isset",190],"(",["T_VARIABLE","$prices",190],"[",["T_VARIABLE","$field",190],"]",")",")",["T_WHITESPACE"," ",190],"{",["T_WHITESPACE","\n                ",190],["T_VARIABLE","$this",191],["T_OBJECT_OPERATOR","->",191],["T_STRING","verifyFields",191],["T_WHITESPACE"," ",191],"=",["T_WHITESPACE"," ",191],["T_STRING","array_diff",191],"(",["T_VARIABLE","$this",191],["T_OBJECT_OPERATOR","->",191],["T_STRING","verifyFields",191],",",["T_WHITESPACE"," ",191],"[",["T_VARIABLE","$field",191],"]",")",";",["T_WHITESPACE","\n            ",191],"}",["T_WHITESPACE","\n        ",192],"}",["T_WHITESPACE","\n\n        ",193],["T_RETURN","return",195],["T_WHITESPACE"," ",195],["T_VARIABLE","$prices",195],";",["T_WHITESPACE","\n    ",195],"}",["T_WHITESPACE","\n",196],"}",["T_WHITESPACE","\n",197]]
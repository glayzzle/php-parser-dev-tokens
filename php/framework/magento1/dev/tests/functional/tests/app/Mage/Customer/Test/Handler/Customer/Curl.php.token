[["T_OPEN_TAG","<?php\n",1],["T_DOC_COMMENT","\/**\n * Magento\n *\n * NOTICE OF LICENSE\n *\n * This source file is subject to the Open Software License (OSL 3.0)\n * that is bundled with this package in the file LICENSE.txt.\n * It is also available through the world-wide-web at this URL:\n * http:\/\/opensource.org\/licenses\/osl-3.0.php\n * If you did not receive a copy of the license and are unable to\n * obtain it through the world-wide-web, please send an email\n * to license@magento.com so we can send you a copy immediately.\n *\n * DISCLAIMER\n *\n * Do not edit or add to this file if you wish to upgrade Magento to newer\n * versions in the future. If you wish to customize Magento for your\n * needs please refer to http:\/\/www.magento.com for more information.\n *\n * @category    Tests\n * @package     Tests_Functional\n * @copyright  Copyright (c) 2006-2016 X.commerce, Inc. and affiliates (http:\/\/www.magento.com)\n * @license    http:\/\/opensource.org\/licenses\/osl-3.0.php  Open Software License (OSL 3.0)\n *\/",2],["T_WHITESPACE","\n\n",25],["T_NAMESPACE","namespace",27],["T_WHITESPACE"," ",27],["T_STRING","Mage",27],["T_NS_SEPARATOR","\\",27],["T_STRING","Customer",27],["T_NS_SEPARATOR","\\",27],["T_STRING","Test",27],["T_NS_SEPARATOR","\\",27],["T_STRING","Handler",27],["T_NS_SEPARATOR","\\",27],["T_STRING","Customer",27],";",["T_WHITESPACE","\n\n",27],["T_USE","use",29],["T_WHITESPACE"," ",29],["T_STRING","Mage",29],["T_NS_SEPARATOR","\\",29],["T_STRING","Customer",29],["T_NS_SEPARATOR","\\",29],["T_STRING","Test",29],["T_NS_SEPARATOR","\\",29],["T_STRING","Fixture",29],["T_NS_SEPARATOR","\\",29],["T_STRING","Customer",29],";",["T_WHITESPACE","\n",29],["T_USE","use",30],["T_WHITESPACE"," ",30],["T_STRING","Magento",30],["T_NS_SEPARATOR","\\",30],["T_STRING","Mtf",30],["T_NS_SEPARATOR","\\",30],["T_STRING","Fixture",30],["T_NS_SEPARATOR","\\",30],["T_STRING","FixtureInterface",30],";",["T_WHITESPACE","\n",30],["T_USE","use",31],["T_WHITESPACE"," ",31],["T_STRING","Magento",31],["T_NS_SEPARATOR","\\",31],["T_STRING","Mtf",31],["T_NS_SEPARATOR","\\",31],["T_STRING","Handler",31],["T_NS_SEPARATOR","\\",31],["T_STRING","Curl",31],["T_WHITESPACE"," ",31],["T_AS","as",31],["T_WHITESPACE"," ",31],["T_STRING","AbstractCurl",31],";",["T_WHITESPACE","\n",31],["T_USE","use",32],["T_WHITESPACE"," ",32],["T_STRING","Magento",32],["T_NS_SEPARATOR","\\",32],["T_STRING","Mtf",32],["T_NS_SEPARATOR","\\",32],["T_STRING","Util",32],["T_NS_SEPARATOR","\\",32],["T_STRING","Protocol",32],["T_NS_SEPARATOR","\\",32],["T_STRING","CurlInterface",32],";",["T_WHITESPACE","\n",32],["T_USE","use",33],["T_WHITESPACE"," ",33],["T_STRING","Magento",33],["T_NS_SEPARATOR","\\",33],["T_STRING","Mtf",33],["T_NS_SEPARATOR","\\",33],["T_STRING","Util",33],["T_NS_SEPARATOR","\\",33],["T_STRING","Protocol",33],["T_NS_SEPARATOR","\\",33],["T_STRING","CurlTransport",33],";",["T_WHITESPACE","\n",33],["T_USE","use",34],["T_WHITESPACE"," ",34],["T_STRING","Magento",34],["T_NS_SEPARATOR","\\",34],["T_STRING","Mtf",34],["T_NS_SEPARATOR","\\",34],["T_STRING","Util",34],["T_NS_SEPARATOR","\\",34],["T_STRING","Protocol",34],["T_NS_SEPARATOR","\\",34],["T_STRING","CurlTransport",34],["T_NS_SEPARATOR","\\",34],["T_STRING","BackendDecorator",34],";",["T_WHITESPACE","\n\n",34],["T_DOC_COMMENT","\/**\n * Curl handler for creating customer through registration page.\n *\/",36],["T_WHITESPACE","\n",38],["T_CLASS","class",39],["T_WHITESPACE"," ",39],["T_STRING","Curl",39],["T_WHITESPACE"," ",39],["T_EXTENDS","extends",39],["T_WHITESPACE"," ",39],["T_STRING","AbstractCurl",39],["T_WHITESPACE"," ",39],["T_IMPLEMENTS","implements",39],["T_WHITESPACE"," ",39],["T_STRING","CustomerInterface",39],["T_WHITESPACE","\n",39],"{",["T_WHITESPACE","\n    ",40],["T_DOC_COMMENT","\/**\n     * Default customer group.\n     *\/",41],["T_WHITESPACE","\n    ",43],["T_CONST","const",44],["T_WHITESPACE"," ",44],["T_STRING","GENERAL_GROUP",44],["T_WHITESPACE"," ",44],"=",["T_WHITESPACE"," ",44],["T_CONSTANT_ENCAPSED_STRING","'1'",44],";",["T_WHITESPACE","\n\n    ",44],["T_DOC_COMMENT","\/**\n     * Mapping values for data.\n     *\n     * @var array\n     *\/",46],["T_WHITESPACE","\n    ",50],["T_PROTECTED","protected",51],["T_WHITESPACE"," ",51],["T_VARIABLE","$mappingData",51],["T_WHITESPACE"," ",51],"=",["T_WHITESPACE"," ",51],"[",["T_WHITESPACE","\n        ",51],["T_CONSTANT_ENCAPSED_STRING","'country_id'",52],["T_WHITESPACE"," ",52],["T_DOUBLE_ARROW","=>",52],["T_WHITESPACE"," ",52],"[",["T_WHITESPACE","\n            ",52],["T_CONSTANT_ENCAPSED_STRING","'United States'",53],["T_WHITESPACE"," ",53],["T_DOUBLE_ARROW","=>",53],["T_WHITESPACE"," ",53],["T_CONSTANT_ENCAPSED_STRING","'US'",53],",",["T_WHITESPACE","\n            ",53],["T_CONSTANT_ENCAPSED_STRING","'United Kingdom'",54],["T_WHITESPACE"," ",54],["T_DOUBLE_ARROW","=>",54],["T_WHITESPACE"," ",54],["T_CONSTANT_ENCAPSED_STRING","'GB'",54],["T_WHITESPACE","\n        ",54],"]",",",["T_WHITESPACE","\n        ",55],["T_CONSTANT_ENCAPSED_STRING","'region_id'",56],["T_WHITESPACE"," ",56],["T_DOUBLE_ARROW","=>",56],["T_WHITESPACE"," ",56],"[",["T_WHITESPACE","\n            ",56],["T_CONSTANT_ENCAPSED_STRING","'California'",57],["T_WHITESPACE"," ",57],["T_DOUBLE_ARROW","=>",57],["T_WHITESPACE"," ",57],["T_LNUMBER","12",57],",",["T_WHITESPACE","\n            ",57],["T_CONSTANT_ENCAPSED_STRING","'New York'",58],["T_WHITESPACE"," ",58],["T_DOUBLE_ARROW","=>",58],["T_WHITESPACE"," ",58],["T_LNUMBER","43",58],",",["T_WHITESPACE","\n            ",58],["T_CONSTANT_ENCAPSED_STRING","'Texas'",59],["T_WHITESPACE"," ",59],["T_DOUBLE_ARROW","=>",59],["T_WHITESPACE"," ",59],["T_LNUMBER","57",59],",",["T_WHITESPACE","\n        ",59],"]",",",["T_WHITESPACE","\n        ",60],["T_CONSTANT_ENCAPSED_STRING","'gender'",61],["T_WHITESPACE"," ",61],["T_DOUBLE_ARROW","=>",61],["T_WHITESPACE"," ",61],"[",["T_WHITESPACE","\n          ",61],["T_CONSTANT_ENCAPSED_STRING","'Male'",62],["T_WHITESPACE"," ",62],["T_DOUBLE_ARROW","=>",62],["T_WHITESPACE"," ",62],["T_LNUMBER","1",62],",",["T_WHITESPACE","\n          ",62],["T_CONSTANT_ENCAPSED_STRING","'Female'",63],["T_WHITESPACE"," ",63],["T_DOUBLE_ARROW","=>",63],["T_WHITESPACE"," ",63],["T_LNUMBER","2",63],["T_WHITESPACE","\n        ",63],"]",",",["T_WHITESPACE","\n    ",64],"]",";",["T_WHITESPACE","\n\n    ",65],["T_DOC_COMMENT","\/**\n     * Curl mapping data.\n     *\n     * @var array\n     *\/",67],["T_WHITESPACE","\n    ",71],["T_PROTECTED","protected",72],["T_WHITESPACE"," ",72],["T_VARIABLE","$curlMapping",72],["T_WHITESPACE"," ",72],"=",["T_WHITESPACE"," ",72],"[",["T_WHITESPACE","\n        ",72],["T_CONSTANT_ENCAPSED_STRING","'account'",73],["T_WHITESPACE"," ",73],["T_DOUBLE_ARROW","=>",73],["T_WHITESPACE"," ",73],"[",["T_WHITESPACE","\n            ",73],["T_CONSTANT_ENCAPSED_STRING","'group_id'",74],",",["T_WHITESPACE","\n            ",74],["T_CONSTANT_ENCAPSED_STRING","'firstname'",75],",",["T_WHITESPACE","\n            ",75],["T_CONSTANT_ENCAPSED_STRING","'lastname'",76],",",["T_WHITESPACE","\n            ",76],["T_CONSTANT_ENCAPSED_STRING","'email'",77],",",["T_WHITESPACE","\n            ",77],["T_CONSTANT_ENCAPSED_STRING","'dob'",78],",",["T_WHITESPACE","\n            ",78],["T_CONSTANT_ENCAPSED_STRING","'taxvat'",79],",",["T_WHITESPACE","\n            ",79],["T_CONSTANT_ENCAPSED_STRING","'gender'",80],["T_WHITESPACE","\n        ",80],"]",",",["T_WHITESPACE","\n        ",81],["T_CONSTANT_ENCAPSED_STRING","'customerbalance'",82],["T_WHITESPACE"," ",82],["T_DOUBLE_ARROW","=>",82],["T_WHITESPACE"," ",82],"[",["T_WHITESPACE","\n          ",82],["T_CONSTANT_ENCAPSED_STRING","'amount_delta'",83],["T_WHITESPACE","\n        ",83],"]",",",["T_WHITESPACE","\n    ",84],"]",";",["T_WHITESPACE","\n\n    ",85],["T_DOC_COMMENT","\/**\n     * Array of fields are needing to be updated via updateCustomer() method.\n     *\n     * @var array\n     *\/",87],["T_WHITESPACE","\n    ",91],["T_PROTECTED","protected",92],["T_WHITESPACE"," ",92],["T_VARIABLE","$updatingFields",92],["T_WHITESPACE"," ",92],"=",["T_WHITESPACE"," ",92],"[",["T_WHITESPACE","\n        ",92],["T_CONSTANT_ENCAPSED_STRING","'address'",93],",",["T_WHITESPACE","\n        ",93],["T_CONSTANT_ENCAPSED_STRING","'dob'",94],",",["T_WHITESPACE","\n        ",94],["T_CONSTANT_ENCAPSED_STRING","'gender'",95],",",["T_WHITESPACE","\n        ",95],["T_CONSTANT_ENCAPSED_STRING","'amount_delta'",96],["T_WHITESPACE","\n    ",96],"]",";",["T_WHITESPACE","\n\n    ",97],["T_DOC_COMMENT","\/**\n     * Post request for creating customer in frontend.\n     *\n     * @param FixtureInterface|null $customer\n     * @return array\n     * @throws \\Exception\n     *\/",99],["T_WHITESPACE","\n    ",105],["T_PUBLIC","public",106],["T_WHITESPACE"," ",106],["T_FUNCTION","function",106],["T_WHITESPACE"," ",106],["T_STRING","persist",106],"(",["T_STRING","FixtureInterface",106],["T_WHITESPACE"," ",106],["T_VARIABLE","$customer",106],["T_WHITESPACE"," ",106],"=",["T_WHITESPACE"," ",106],["T_STRING","null",106],")",["T_WHITESPACE","\n    ",106],"{",["T_WHITESPACE","\n        ",107],["T_VARIABLE","$result",108],["T_WHITESPACE"," ",108],"=",["T_WHITESPACE"," ",108],"[","]",";",["T_WHITESPACE","\n        ",108],["T_DOC_COMMENT","\/** @var Customer $customer *\/",109],["T_WHITESPACE","\n        ",109],["T_VARIABLE","$url",110],["T_WHITESPACE"," ",110],"=",["T_WHITESPACE"," ",110],["T_VARIABLE","$_ENV",110],"[",["T_CONSTANT_ENCAPSED_STRING","'app_frontend_url'",110],"]",["T_WHITESPACE"," ",110],".",["T_WHITESPACE"," ",110],["T_CONSTANT_ENCAPSED_STRING","'customer\/account\/createpost\/?nocookie=true'",110],";",["T_WHITESPACE","\n        ",110],["T_VARIABLE","$data",111],["T_WHITESPACE"," ",111],"=",["T_WHITESPACE"," ",111],["T_VARIABLE","$customer",111],["T_OBJECT_OPERATOR","->",111],["T_STRING","getData",111],"(",")",";",["T_WHITESPACE","\n        ",111],["T_VARIABLE","$data",112],"[",["T_CONSTANT_ENCAPSED_STRING","'group_id'",112],"]",["T_WHITESPACE"," ",112],"=",["T_WHITESPACE"," ",112],["T_VARIABLE","$this",112],["T_OBJECT_OPERATOR","->",112],["T_STRING","getCustomerGroup",112],"(",["T_VARIABLE","$customer",112],")",";",["T_WHITESPACE","\n\n        ",112],["T_IF","if",114],["T_WHITESPACE"," ",114],"(",["T_VARIABLE","$customer",114],["T_OBJECT_OPERATOR","->",114],["T_STRING","hasData",114],"(",["T_CONSTANT_ENCAPSED_STRING","'address'",114],")",")",["T_WHITESPACE"," ",114],"{",["T_WHITESPACE","\n            ",114],["T_VARIABLE","$data",115],"[",["T_CONSTANT_ENCAPSED_STRING","'address'",115],"]",["T_WHITESPACE"," ",115],"=",["T_WHITESPACE"," ",115],["T_STRING","http_build_query",115],"(",["T_VARIABLE","$data",115],"[",["T_CONSTANT_ENCAPSED_STRING","'address'",115],"]",")",";",["T_WHITESPACE","\n        ",115],"}",["T_WHITESPACE","\n\n        ",116],["T_VARIABLE","$curl",118],["T_WHITESPACE"," ",118],"=",["T_WHITESPACE"," ",118],["T_NEW","new",118],["T_WHITESPACE"," ",118],["T_STRING","CurlTransport",118],"(",")",";",["T_WHITESPACE","\n        ",118],["T_VARIABLE","$curl",119],["T_OBJECT_OPERATOR","->",119],["T_STRING","write",119],"(",["T_VARIABLE","$url",119],",",["T_WHITESPACE"," ",119],["T_VARIABLE","$data",119],")",";",["T_WHITESPACE","\n        ",119],["T_VARIABLE","$response",120],["T_WHITESPACE"," ",120],"=",["T_WHITESPACE"," ",120],["T_VARIABLE","$curl",120],["T_OBJECT_OPERATOR","->",120],["T_STRING","read",120],"(",")",";",["T_WHITESPACE","\n        ",120],["T_VARIABLE","$curl",121],["T_OBJECT_OPERATOR","->",121],["T_STRING","close",121],"(",")",";",["T_WHITESPACE","\n        ",121],["T_IF","if",122],["T_WHITESPACE"," ",122],"(","!",["T_STRING","strpos",122],"(",["T_VARIABLE","$response",122],",",["T_WHITESPACE"," ",122],["T_CONSTANT_ENCAPSED_STRING","'class=\"success-msg\"'",122],")",")",["T_WHITESPACE"," ",122],"{",["T_WHITESPACE","\n            ",122],["T_THROW","throw",123],["T_WHITESPACE"," ",123],["T_NEW","new",123],["T_WHITESPACE"," ",123],["T_NS_SEPARATOR","\\",123],["T_STRING","Exception",123],"(","\"",["T_ENCAPSED_AND_WHITESPACE","Customer entity creating by curl handler was not successful! Response: ",123],["T_VARIABLE","$response",123],"\"",")",";",["T_WHITESPACE","\n        ",123],"}",["T_WHITESPACE","\n\n        ",124],["T_VARIABLE","$result",126],"[",["T_CONSTANT_ENCAPSED_STRING","'id'",126],"]",["T_WHITESPACE"," ",126],"=",["T_WHITESPACE"," ",126],["T_VARIABLE","$this",126],["T_OBJECT_OPERATOR","->",126],["T_STRING","getCustomerId",126],"(",["T_VARIABLE","$customer",126],["T_OBJECT_OPERATOR","->",126],["T_STRING","getEmail",126],"(",")",")",";",["T_WHITESPACE","\n        ",126],["T_VARIABLE","$data",127],"[",["T_CONSTANT_ENCAPSED_STRING","'customer_id'",127],"]",["T_WHITESPACE"," ",127],"=",["T_WHITESPACE"," ",127],["T_VARIABLE","$result",127],"[",["T_CONSTANT_ENCAPSED_STRING","'id'",127],"]",";",["T_WHITESPACE","\n\n        ",127],["T_IF","if",129],["T_WHITESPACE"," ",129],"(",["T_VARIABLE","$this",129],["T_OBJECT_OPERATOR","->",129],["T_STRING","checkForUpdateData",129],"(",["T_VARIABLE","$data",129],")",")",["T_WHITESPACE"," ",129],"{",["T_WHITESPACE","\n            ",129],["T_STRING","parse_str",130],"(",["T_VARIABLE","$data",130],"[",["T_CONSTANT_ENCAPSED_STRING","'address'",130],"]",",",["T_WHITESPACE"," ",130],["T_VARIABLE","$data",130],"[",["T_CONSTANT_ENCAPSED_STRING","'address'",130],"]",")",";",["T_WHITESPACE","\n            ",130],["T_VARIABLE","$this",131],["T_OBJECT_OPERATOR","->",131],["T_STRING","updateCustomer",131],"(",["T_VARIABLE","$data",131],")",";",["T_WHITESPACE","\n        ",131],"}",["T_WHITESPACE","\n\n        ",132],["T_RETURN","return",134],["T_WHITESPACE"," ",134],["T_VARIABLE","$result",134],";",["T_WHITESPACE","\n    ",134],"}",["T_WHITESPACE","\n\n    ",135],["T_DOC_COMMENT","\/**\n     * Check if customer needs to update data during curl creation.\n     *\n     * @param array $data\n     * @return bool\n     *\/",137],["T_WHITESPACE","\n    ",142],["T_PROTECTED","protected",143],["T_WHITESPACE"," ",143],["T_FUNCTION","function",143],["T_WHITESPACE"," ",143],["T_STRING","checkForUpdateData",143],"(",["T_ARRAY","array",143],["T_WHITESPACE"," ",143],["T_VARIABLE","$data",143],")",["T_WHITESPACE","\n    ",143],"{",["T_WHITESPACE","\n        ",144],["T_FOREACH","foreach",145],["T_WHITESPACE"," ",145],"(",["T_VARIABLE","$data",145],["T_WHITESPACE"," ",145],["T_AS","as",145],["T_WHITESPACE"," ",145],["T_VARIABLE","$key",145],["T_WHITESPACE"," ",145],["T_DOUBLE_ARROW","=>",145],["T_WHITESPACE"," ",145],["T_VARIABLE","$field",145],")",["T_WHITESPACE"," ",145],"{",["T_WHITESPACE","\n            ",145],["T_IF","if",146],["T_WHITESPACE"," ",146],"(",["T_STRING","in_array",146],"(",["T_VARIABLE","$key",146],",",["T_WHITESPACE"," ",146],["T_VARIABLE","$this",146],["T_OBJECT_OPERATOR","->",146],["T_STRING","updatingFields",146],")",")",["T_WHITESPACE"," ",146],"{",["T_WHITESPACE","\n                ",146],["T_RETURN","return",147],["T_WHITESPACE"," ",147],["T_STRING","true",147],";",["T_WHITESPACE","\n            ",147],"}",["T_WHITESPACE","\n        ",148],"}",["T_WHITESPACE","\n        ",149],["T_RETURN","return",150],["T_WHITESPACE"," ",150],["T_STRING","false",150],";",["T_WHITESPACE","\n    ",150],"}",["T_WHITESPACE","\n\n    ",151],["T_DOC_COMMENT","\/**\n     * Get customer id by email.\n     *\n     * @param string $email\n     * @return int|null\n     *\/",153],["T_WHITESPACE","\n    ",158],["T_PROTECTED","protected",159],["T_WHITESPACE"," ",159],["T_FUNCTION","function",159],["T_WHITESPACE"," ",159],["T_STRING","getCustomerId",159],"(",["T_VARIABLE","$email",159],")",["T_WHITESPACE","\n    ",159],"{",["T_WHITESPACE","\n        ",160],["T_VARIABLE","$url",161],["T_WHITESPACE"," ",161],"=",["T_WHITESPACE"," ",161],["T_VARIABLE","$_ENV",161],"[",["T_CONSTANT_ENCAPSED_STRING","'app_backend_url'",161],"]",["T_WHITESPACE"," ",161],".",["T_WHITESPACE"," ",161],["T_CONSTANT_ENCAPSED_STRING","'customer\/index\/grid\/filter\/'",161],["T_WHITESPACE"," ",161],".",["T_WHITESPACE"," ",161],["T_VARIABLE","$this",161],["T_OBJECT_OPERATOR","->",161],["T_STRING","encodeFilter",161],"(","[",["T_CONSTANT_ENCAPSED_STRING","'email'",161],["T_WHITESPACE"," ",161],["T_DOUBLE_ARROW","=>",161],["T_WHITESPACE"," ",161],["T_VARIABLE","$email",161],"]",")",";",["T_WHITESPACE","\n        ",161],["T_VARIABLE","$curl",162],["T_WHITESPACE"," ",162],"=",["T_WHITESPACE"," ",162],["T_NEW","new",162],["T_WHITESPACE"," ",162],["T_STRING","BackendDecorator",162],"(",["T_NEW","new",162],["T_WHITESPACE"," ",162],["T_STRING","CurlTransport",162],"(",")",",",["T_WHITESPACE"," ",162],["T_VARIABLE","$this",162],["T_OBJECT_OPERATOR","->",162],["T_STRING","_configuration",162],")",";",["T_WHITESPACE","\n\n        ",162],["T_VARIABLE","$curl",164],["T_OBJECT_OPERATOR","->",164],["T_STRING","write",164],"(",["T_VARIABLE","$url",164],",",["T_WHITESPACE"," ",164],"[","]",",",["T_WHITESPACE"," ",164],["T_STRING","CurlInterface",164],["T_DOUBLE_COLON","::",164],["T_STRING","GET",164],")",";",["T_WHITESPACE","\n        ",164],["T_VARIABLE","$response",165],["T_WHITESPACE"," ",165],"=",["T_WHITESPACE"," ",165],["T_VARIABLE","$curl",165],["T_OBJECT_OPERATOR","->",165],["T_STRING","read",165],"(",")",";",["T_WHITESPACE","\n        ",165],["T_VARIABLE","$curl",166],["T_OBJECT_OPERATOR","->",166],["T_STRING","close",166],"(",")",";",["T_WHITESPACE","\n\n        ",166],["T_STRING","preg_match",168],"(",["T_CONSTANT_ENCAPSED_STRING","'~a href=[^\\s]*\\\/id\\\/(\\d+)~'",168],",",["T_WHITESPACE"," ",168],["T_VARIABLE","$response",168],",",["T_WHITESPACE"," ",168],["T_VARIABLE","$match",168],")",";",["T_WHITESPACE","\n        ",168],["T_RETURN","return",169],["T_WHITESPACE"," ",169],["T_EMPTY","empty",169],"(",["T_VARIABLE","$match",169],"[",["T_LNUMBER","1",169],"]",")",["T_WHITESPACE"," ",169],"?",["T_WHITESPACE"," ",169],["T_STRING","null",169],["T_WHITESPACE"," ",169],":",["T_WHITESPACE"," ",169],["T_VARIABLE","$match",169],"[",["T_LNUMBER","1",169],"]",";",["T_WHITESPACE","\n    ",169],"}",["T_WHITESPACE","\n\n    ",170],["T_DOC_COMMENT","\/**\n     * Prepare customer for curl.\n     *\n     * @param FixtureInterface $customer\n     * @return string\n     *\/",172],["T_WHITESPACE","\n    ",177],["T_PROTECTED","protected",178],["T_WHITESPACE"," ",178],["T_FUNCTION","function",178],["T_WHITESPACE"," ",178],["T_STRING","getCustomerGroup",178],"(",["T_STRING","FixtureInterface",178],["T_WHITESPACE"," ",178],["T_VARIABLE","$customer",178],")",["T_WHITESPACE","\n    ",178],"{",["T_WHITESPACE","\n        ",179],["T_RETURN","return",180],["T_WHITESPACE"," ",180],["T_VARIABLE","$customer",180],["T_OBJECT_OPERATOR","->",180],["T_STRING","hasData",180],"(",["T_CONSTANT_ENCAPSED_STRING","'group_id'",180],")",["T_WHITESPACE","\n            ",180],"?",["T_WHITESPACE"," ",181],["T_VARIABLE","$customer",181],["T_OBJECT_OPERATOR","->",181],["T_STRING","getDataFieldConfig",181],"(",["T_CONSTANT_ENCAPSED_STRING","'group_id'",181],")","[",["T_CONSTANT_ENCAPSED_STRING","'source'",181],"]",["T_OBJECT_OPERATOR","->",181],["T_STRING","getCustomerGroup",181],"(",")",["T_OBJECT_OPERATOR","->",181],["T_STRING","getCustomerGroupId",181],"(",")",["T_WHITESPACE","\n            ",181],":",["T_WHITESPACE"," ",182],["T_STRING","self",182],["T_DOUBLE_COLON","::",182],["T_STRING","GENERAL_GROUP",182],";",["T_WHITESPACE","\n    ",182],"}",["T_WHITESPACE","\n\n    ",183],["T_DOC_COMMENT","\/**\n     * Update customer account.\n     *\n     * @param array $data\n     * @return void\n     * @throws \\Exception\n     *\/",185],["T_WHITESPACE","\n    ",191],["T_PROTECTED","protected",192],["T_WHITESPACE"," ",192],["T_FUNCTION","function",192],["T_WHITESPACE"," ",192],["T_STRING","updateCustomer",192],"(",["T_ARRAY","array",192],["T_WHITESPACE"," ",192],["T_VARIABLE","$data",192],")",["T_WHITESPACE","\n    ",192],"{",["T_WHITESPACE","\n        ",193],["T_VARIABLE","$curlData",194],["T_WHITESPACE"," ",194],"=",["T_WHITESPACE"," ",194],"[","]",";",["T_WHITESPACE","\n        ",194],["T_VARIABLE","$url",195],["T_WHITESPACE"," ",195],"=",["T_WHITESPACE"," ",195],["T_VARIABLE","$_ENV",195],"[",["T_CONSTANT_ENCAPSED_STRING","'app_backend_url'",195],"]",["T_WHITESPACE"," ",195],".",["T_WHITESPACE"," ",195],["T_CONSTANT_ENCAPSED_STRING","'customer\/save'",195],";",["T_WHITESPACE","\n        ",195],["T_FOREACH","foreach",196],["T_WHITESPACE"," ",196],"(",["T_VARIABLE","$data",196],["T_WHITESPACE"," ",196],["T_AS","as",196],["T_WHITESPACE"," ",196],["T_VARIABLE","$key",196],["T_WHITESPACE"," ",196],["T_DOUBLE_ARROW","=>",196],["T_WHITESPACE"," ",196],["T_VARIABLE","$value",196],")",["T_WHITESPACE"," ",196],"{",["T_WHITESPACE","\n            ",196],["T_FOREACH","foreach",197],["T_WHITESPACE"," ",197],"(",["T_VARIABLE","$this",197],["T_OBJECT_OPERATOR","->",197],["T_STRING","curlMapping",197],["T_WHITESPACE"," ",197],["T_AS","as",197],["T_WHITESPACE"," ",197],["T_VARIABLE","$prefix",197],["T_WHITESPACE"," ",197],["T_DOUBLE_ARROW","=>",197],["T_WHITESPACE"," ",197],["T_VARIABLE","$prefixValues",197],")",["T_WHITESPACE"," ",197],"{",["T_WHITESPACE","\n                ",197],["T_IF","if",198],["T_WHITESPACE"," ",198],"(",["T_STRING","in_array",198],"(",["T_VARIABLE","$key",198],",",["T_WHITESPACE"," ",198],["T_VARIABLE","$prefixValues",198],")",")",["T_WHITESPACE"," ",198],"{",["T_WHITESPACE","\n                    ",198],["T_VARIABLE","$curlData",199],"[",["T_VARIABLE","$prefix",199],"]","[",["T_VARIABLE","$key",199],"]",["T_WHITESPACE"," ",199],"=",["T_WHITESPACE"," ",199],["T_VARIABLE","$value",199],";",["T_WHITESPACE","\n                    ",199],["T_UNSET","unset",200],"(",["T_VARIABLE","$data",200],"[",["T_VARIABLE","$key",200],"]",")",";",["T_WHITESPACE","\n                ",200],"}",["T_WHITESPACE","\n            ",201],"}",["T_WHITESPACE","\n        ",202],"}",["T_WHITESPACE","\n        ",203],["T_UNSET","unset",204],"(",["T_VARIABLE","$data",204],"[",["T_CONSTANT_ENCAPSED_STRING","'password'",204],"]",",",["T_WHITESPACE"," ",204],["T_VARIABLE","$data",204],"[",["T_CONSTANT_ENCAPSED_STRING","'confirmation'",204],"]",")",";",["T_WHITESPACE","\n\n        ",204],["T_VARIABLE","$curlData",206],["T_WHITESPACE"," ",206],"=",["T_WHITESPACE"," ",206],["T_VARIABLE","$this",206],["T_OBJECT_OPERATOR","->",206],["T_STRING","replaceMappingData",206],"(",["T_STRING","array_merge",206],"(",["T_VARIABLE","$curlData",206],",",["T_WHITESPACE"," ",206],["T_VARIABLE","$data",206],")",")",";",["T_WHITESPACE","\n        ",206],["T_VARIABLE","$curlData",207],["T_WHITESPACE"," ",207],"=",["T_WHITESPACE"," ",207],["T_VARIABLE","$this",207],["T_OBJECT_OPERATOR","->",207],["T_STRING","prepareAddressData",207],"(",["T_VARIABLE","$curlData",207],")",";",["T_WHITESPACE","\n\n        ",207],["T_VARIABLE","$curl",209],["T_WHITESPACE"," ",209],"=",["T_WHITESPACE"," ",209],["T_NEW","new",209],["T_WHITESPACE"," ",209],["T_STRING","BackendDecorator",209],"(",["T_NEW","new",209],["T_WHITESPACE"," ",209],["T_STRING","CurlTransport",209],"(",")",",",["T_WHITESPACE"," ",209],["T_VARIABLE","$this",209],["T_OBJECT_OPERATOR","->",209],["T_STRING","_configuration",209],")",";",["T_WHITESPACE","\n        ",209],["T_VARIABLE","$curl",210],["T_OBJECT_OPERATOR","->",210],["T_STRING","write",210],"(",["T_VARIABLE","$url",210],",",["T_WHITESPACE"," ",210],["T_VARIABLE","$curlData",210],")",";",["T_WHITESPACE","\n        ",210],["T_VARIABLE","$response",211],["T_WHITESPACE"," ",211],"=",["T_WHITESPACE"," ",211],["T_VARIABLE","$curl",211],["T_OBJECT_OPERATOR","->",211],["T_STRING","read",211],"(",")",";",["T_WHITESPACE","\n        ",211],["T_VARIABLE","$curl",212],["T_OBJECT_OPERATOR","->",212],["T_STRING","close",212],"(",")",";",["T_WHITESPACE","\n\n        ",212],["T_IF","if",214],["T_WHITESPACE"," ",214],"(","!",["T_STRING","strpos",214],"(",["T_VARIABLE","$response",214],",",["T_WHITESPACE"," ",214],["T_CONSTANT_ENCAPSED_STRING","'class=\"success-msg\"'",214],")",")",["T_WHITESPACE"," ",214],"{",["T_WHITESPACE","\n            ",214],["T_THROW","throw",215],["T_WHITESPACE"," ",215],["T_NEW","new",215],["T_WHITESPACE"," ",215],["T_NS_SEPARATOR","\\",215],["T_STRING","Exception",215],"(",["T_CONSTANT_ENCAPSED_STRING","'Failed to assign an address to the customer!'",215],")",";",["T_WHITESPACE","\n        ",215],"}",["T_WHITESPACE","\n    ",216],"}",["T_WHITESPACE","\n\n    ",217],["T_DOC_COMMENT","\/**\n     * Preparing address data for curl.\n     *\n     * @param array $curlData\n     * @return array\n     *\/",219],["T_WHITESPACE","\n    ",224],["T_PROTECTED","protected",225],["T_WHITESPACE"," ",225],["T_FUNCTION","function",225],["T_WHITESPACE"," ",225],["T_STRING","prepareAddressData",225],"(",["T_ARRAY","array",225],["T_WHITESPACE"," ",225],["T_VARIABLE","$curlData",225],")",["T_WHITESPACE","\n    ",225],"{",["T_WHITESPACE","\n        ",226],["T_VARIABLE","$address",227],["T_WHITESPACE"," ",227],"=",["T_WHITESPACE"," ",227],"[","]",";",["T_WHITESPACE","\n        ",227],["T_FOREACH","foreach",228],["T_WHITESPACE"," ",228],"(",["T_STRING","array_keys",228],"(",["T_VARIABLE","$curlData",228],"[",["T_CONSTANT_ENCAPSED_STRING","'address'",228],"]",")",["T_WHITESPACE"," ",228],["T_AS","as",228],["T_WHITESPACE"," ",228],["T_VARIABLE","$key",228],")",["T_WHITESPACE"," ",228],"{",["T_WHITESPACE","\n            ",228],["T_VARIABLE","$curlData",229],"[",["T_CONSTANT_ENCAPSED_STRING","'address'",229],"]","[",["T_VARIABLE","$key",229],"]","[",["T_CONSTANT_ENCAPSED_STRING","'_deleted'",229],"]",["T_WHITESPACE"," ",229],"=",["T_WHITESPACE"," ",229],["T_CONSTANT_ENCAPSED_STRING","''",229],";",["T_WHITESPACE","\n            ",229],["T_VARIABLE","$curlData",230],"[",["T_CONSTANT_ENCAPSED_STRING","'address'",230],"]","[",["T_VARIABLE","$key",230],"]","[",["T_CONSTANT_ENCAPSED_STRING","'region'",230],"]",["T_WHITESPACE"," ",230],"=",["T_WHITESPACE"," ",230],["T_CONSTANT_ENCAPSED_STRING","''",230],";",["T_WHITESPACE","\n            ",230],["T_IF","if",231],["T_WHITESPACE"," ",231],"(","!",["T_STRING","is_array",231],"(",["T_VARIABLE","$curlData",231],"[",["T_CONSTANT_ENCAPSED_STRING","'address'",231],"]","[",["T_VARIABLE","$key",231],"]","[",["T_CONSTANT_ENCAPSED_STRING","'street'",231],"]",")",")",["T_WHITESPACE"," ",231],"{",["T_WHITESPACE","\n                ",231],["T_VARIABLE","$street",232],["T_WHITESPACE"," ",232],"=",["T_WHITESPACE"," ",232],["T_VARIABLE","$curlData",232],"[",["T_CONSTANT_ENCAPSED_STRING","'address'",232],"]","[",["T_VARIABLE","$key",232],"]","[",["T_CONSTANT_ENCAPSED_STRING","'street'",232],"]",";",["T_WHITESPACE","\n                ",232],["T_VARIABLE","$curlData",233],"[",["T_CONSTANT_ENCAPSED_STRING","'address'",233],"]","[",["T_VARIABLE","$key",233],"]","[",["T_CONSTANT_ENCAPSED_STRING","'street'",233],"]",["T_WHITESPACE"," ",233],"=",["T_WHITESPACE"," ",233],"[","]",";",["T_WHITESPACE","\n                ",233],["T_VARIABLE","$curlData",234],"[",["T_CONSTANT_ENCAPSED_STRING","'address'",234],"]","[",["T_VARIABLE","$key",234],"]","[",["T_CONSTANT_ENCAPSED_STRING","'street'",234],"]","[","]",["T_WHITESPACE"," ",234],"=",["T_WHITESPACE"," ",234],["T_VARIABLE","$street",234],";",["T_WHITESPACE","\n            ",234],"}",["T_WHITESPACE","\n            ",235],["T_VARIABLE","$newKey",236],["T_WHITESPACE"," ",236],"=",["T_WHITESPACE"," ",236],["T_CONSTANT_ENCAPSED_STRING","'_item'",236],["T_WHITESPACE"," ",236],".",["T_WHITESPACE"," ",236],"(",["T_VARIABLE","$key",236],")",";",["T_WHITESPACE","\n            ",236],["T_IF","if",237],["T_WHITESPACE"," ",237],"(",["T_ISSET","isset",237],"(",["T_VARIABLE","$curlData",237],"[",["T_CONSTANT_ENCAPSED_STRING","'address'",237],"]","[",["T_VARIABLE","$key",237],"]","[",["T_CONSTANT_ENCAPSED_STRING","'default_billing'",237],"]",")",")",["T_WHITESPACE"," ",237],"{",["T_WHITESPACE","\n                ",237],["T_VARIABLE","$value",238],["T_WHITESPACE"," ",238],"=",["T_WHITESPACE"," ",238],["T_VARIABLE","$curlData",238],"[",["T_CONSTANT_ENCAPSED_STRING","'address'",238],"]","[",["T_VARIABLE","$key",238],"]","[",["T_CONSTANT_ENCAPSED_STRING","'default_billing'",238],"]",["T_WHITESPACE"," ",238],["T_IS_IDENTICAL","===",238],["T_WHITESPACE"," ",238],["T_CONSTANT_ENCAPSED_STRING","'Yes'",238],["T_WHITESPACE"," ",238],"?",["T_WHITESPACE"," ",238],["T_VARIABLE","$newKey",238],["T_WHITESPACE"," ",238],":",["T_WHITESPACE"," ",238],["T_CONSTANT_ENCAPSED_STRING","''",238],";",["T_WHITESPACE","\n                ",238],["T_VARIABLE","$curlData",239],"[",["T_CONSTANT_ENCAPSED_STRING","'account'",239],"]","[",["T_CONSTANT_ENCAPSED_STRING","'default_billing'",239],"]",["T_WHITESPACE"," ",239],"=",["T_WHITESPACE"," ",239],["T_VARIABLE","$value",239],";",["T_WHITESPACE","\n            ",239],"}",["T_WHITESPACE","\n            ",240],["T_IF","if",241],["T_WHITESPACE"," ",241],"(",["T_ISSET","isset",241],"(",["T_VARIABLE","$curlData",241],"[",["T_CONSTANT_ENCAPSED_STRING","'address'",241],"]","[",["T_VARIABLE","$key",241],"]","[",["T_CONSTANT_ENCAPSED_STRING","'default_shipping'",241],"]",")",")",["T_WHITESPACE"," ",241],"{",["T_WHITESPACE","\n                ",241],["T_VARIABLE","$value",242],["T_WHITESPACE"," ",242],"=",["T_WHITESPACE"," ",242],["T_VARIABLE","$curlData",242],"[",["T_CONSTANT_ENCAPSED_STRING","'address'",242],"]","[",["T_VARIABLE","$key",242],"]","[",["T_CONSTANT_ENCAPSED_STRING","'default_shipping'",242],"]",["T_WHITESPACE"," ",242],["T_IS_IDENTICAL","===",242],["T_WHITESPACE"," ",242],["T_CONSTANT_ENCAPSED_STRING","'Yes'",242],["T_WHITESPACE"," ",242],"?",["T_WHITESPACE"," ",242],["T_VARIABLE","$newKey",242],["T_WHITESPACE"," ",242],":",["T_WHITESPACE"," ",242],["T_CONSTANT_ENCAPSED_STRING","''",242],";",["T_WHITESPACE","\n                ",242],["T_VARIABLE","$curlData",243],"[",["T_CONSTANT_ENCAPSED_STRING","'account'",243],"]","[",["T_CONSTANT_ENCAPSED_STRING","'default_shipping'",243],"]",["T_WHITESPACE"," ",243],"=",["T_WHITESPACE"," ",243],["T_VARIABLE","$value",243],";",["T_WHITESPACE","\n            ",243],"}",["T_WHITESPACE","\n            ",244],["T_VARIABLE","$address",245],"[",["T_VARIABLE","$newKey",245],"]",["T_WHITESPACE"," ",245],"=",["T_WHITESPACE"," ",245],["T_VARIABLE","$curlData",245],"[",["T_CONSTANT_ENCAPSED_STRING","'address'",245],"]","[",["T_VARIABLE","$key",245],"]",";",["T_WHITESPACE","\n        ",245],"}",["T_WHITESPACE","\n        ",246],["T_VARIABLE","$curlData",247],"[",["T_CONSTANT_ENCAPSED_STRING","'address'",247],"]",["T_WHITESPACE"," ",247],"=",["T_WHITESPACE"," ",247],["T_VARIABLE","$address",247],";",["T_WHITESPACE","\n\n        ",247],["T_RETURN","return",249],["T_WHITESPACE"," ",249],["T_VARIABLE","$curlData",249],";",["T_WHITESPACE","\n    ",249],"}",["T_WHITESPACE","\n\n    ",250],["T_DOC_COMMENT","\/**\n     * Encoded filter parameters.\n     *\n     * @param array $filter\n     * @return string\n     *\/",252],["T_WHITESPACE","\n    ",257],["T_PROTECTED","protected",258],["T_WHITESPACE"," ",258],["T_FUNCTION","function",258],["T_WHITESPACE"," ",258],["T_STRING","encodeFilter",258],"(",["T_ARRAY","array",258],["T_WHITESPACE"," ",258],["T_VARIABLE","$filter",258],")",["T_WHITESPACE","\n    ",258],"{",["T_WHITESPACE","\n        ",259],["T_VARIABLE","$result",260],["T_WHITESPACE"," ",260],"=",["T_WHITESPACE"," ",260],"[","]",";",["T_WHITESPACE","\n        ",260],["T_FOREACH","foreach",261],["T_WHITESPACE"," ",261],"(",["T_VARIABLE","$filter",261],["T_WHITESPACE"," ",261],["T_AS","as",261],["T_WHITESPACE"," ",261],["T_VARIABLE","$name",261],["T_WHITESPACE"," ",261],["T_DOUBLE_ARROW","=>",261],["T_WHITESPACE"," ",261],["T_VARIABLE","$value",261],")",["T_WHITESPACE"," ",261],"{",["T_WHITESPACE","\n            ",261],["T_VARIABLE","$result",262],"[","]",["T_WHITESPACE"," ",262],"=",["T_WHITESPACE"," ",262],"\"",["T_CURLY_OPEN","{",262],["T_VARIABLE","$name",262],"}",["T_ENCAPSED_AND_WHITESPACE","=",262],["T_CURLY_OPEN","{",262],["T_VARIABLE","$value",262],"}","\"",";",["T_WHITESPACE","\n        ",262],"}",["T_WHITESPACE","\n        ",263],["T_VARIABLE","$result",264],["T_WHITESPACE"," ",264],"=",["T_WHITESPACE"," ",264],["T_STRING","implode",264],"(",["T_CONSTANT_ENCAPSED_STRING","'&'",264],",",["T_WHITESPACE"," ",264],["T_VARIABLE","$result",264],")",";",["T_WHITESPACE","\n\n        ",264],["T_RETURN","return",266],["T_WHITESPACE"," ",266],["T_STRING","base64_encode",266],"(",["T_VARIABLE","$result",266],")",";",["T_WHITESPACE","\n    ",266],"}",["T_WHITESPACE","\n",267],"}",["T_WHITESPACE","\n",268]]
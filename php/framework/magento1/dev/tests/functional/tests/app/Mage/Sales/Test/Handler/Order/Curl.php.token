[["T_OPEN_TAG","<?php\n",1],["T_DOC_COMMENT","\/**\n * Magento\n *\n * NOTICE OF LICENSE\n *\n * This source file is subject to the Open Software License (OSL 3.0)\n * that is bundled with this package in the file LICENSE.txt.\n * It is also available through the world-wide-web at this URL:\n * http:\/\/opensource.org\/licenses\/osl-3.0.php\n * If you did not receive a copy of the license and are unable to\n * obtain it through the world-wide-web, please send an email\n * to license@magento.com so we can send you a copy immediately.\n *\n * DISCLAIMER\n *\n * Do not edit or add to this file if you wish to upgrade Magento to newer\n * versions in the future. If you wish to customize Magento for your\n * needs please refer to http:\/\/www.magento.com for more information.\n *\n * @category    Tests\n * @package     Tests_Functional\n * @copyright  Copyright (c) 2006-2016 X.commerce, Inc. and affiliates (http:\/\/www.magento.com)\n * @license    http:\/\/opensource.org\/licenses\/osl-3.0.php  Open Software License (OSL 3.0)\n *\/",2],["T_WHITESPACE","\n\n",25],["T_NAMESPACE","namespace",27],["T_WHITESPACE"," ",27],["T_STRING","Mage",27],["T_NS_SEPARATOR","\\",27],["T_STRING","Sales",27],["T_NS_SEPARATOR","\\",27],["T_STRING","Test",27],["T_NS_SEPARATOR","\\",27],["T_STRING","Handler",27],["T_NS_SEPARATOR","\\",27],["T_STRING","Order",27],";",["T_WHITESPACE","\n\n",27],["T_USE","use",29],["T_WHITESPACE"," ",29],["T_STRING","Mage",29],["T_NS_SEPARATOR","\\",29],["T_STRING","Bundle",29],["T_NS_SEPARATOR","\\",29],["T_STRING","Test",29],["T_NS_SEPARATOR","\\",29],["T_STRING","Fixture",29],["T_NS_SEPARATOR","\\",29],["T_STRING","BundleProduct",29],";",["T_WHITESPACE","\n",29],["T_USE","use",30],["T_WHITESPACE"," ",30],["T_STRING","Mage",30],["T_NS_SEPARATOR","\\",30],["T_STRING","Catalog",30],["T_NS_SEPARATOR","\\",30],["T_STRING","Test",30],["T_NS_SEPARATOR","\\",30],["T_STRING","Fixture",30],["T_NS_SEPARATOR","\\",30],["T_STRING","ConfigurableProduct",30],";",["T_WHITESPACE","\n",30],["T_USE","use",31],["T_WHITESPACE"," ",31],["T_STRING","Mage",31],["T_NS_SEPARATOR","\\",31],["T_STRING","Customer",31],["T_NS_SEPARATOR","\\",31],["T_STRING","Test",31],["T_NS_SEPARATOR","\\",31],["T_STRING","Fixture",31],["T_NS_SEPARATOR","\\",31],["T_STRING","Customer",31],";",["T_WHITESPACE","\n",31],["T_USE","use",32],["T_WHITESPACE"," ",32],["T_STRING","Mage",32],["T_NS_SEPARATOR","\\",32],["T_STRING","Sales",32],["T_NS_SEPARATOR","\\",32],["T_STRING","Test",32],["T_NS_SEPARATOR","\\",32],["T_STRING","Fixture",32],["T_NS_SEPARATOR","\\",32],["T_STRING","Order",32],";",["T_WHITESPACE","\n",32],["T_USE","use",33],["T_WHITESPACE"," ",33],["T_STRING","Mage",33],["T_NS_SEPARATOR","\\",33],["T_STRING","SalesRule",33],["T_NS_SEPARATOR","\\",33],["T_STRING","Test",33],["T_NS_SEPARATOR","\\",33],["T_STRING","Fixture",33],["T_NS_SEPARATOR","\\",33],["T_STRING","SalesRule",33],";",["T_WHITESPACE","\n",33],["T_USE","use",34],["T_WHITESPACE"," ",34],["T_STRING","Magento",34],["T_NS_SEPARATOR","\\",34],["T_STRING","Mtf",34],["T_NS_SEPARATOR","\\",34],["T_STRING","Fixture",34],["T_NS_SEPARATOR","\\",34],["T_STRING","FixtureInterface",34],";",["T_WHITESPACE","\n",34],["T_USE","use",35],["T_WHITESPACE"," ",35],["T_STRING","Magento",35],["T_NS_SEPARATOR","\\",35],["T_STRING","Mtf",35],["T_NS_SEPARATOR","\\",35],["T_STRING","Handler",35],["T_NS_SEPARATOR","\\",35],["T_STRING","Curl",35],["T_WHITESPACE"," ",35],["T_AS","as",35],["T_WHITESPACE"," ",35],["T_STRING","AbstractCurl",35],";",["T_WHITESPACE","\n",35],["T_USE","use",36],["T_WHITESPACE"," ",36],["T_STRING","Magento",36],["T_NS_SEPARATOR","\\",36],["T_STRING","Mtf",36],["T_NS_SEPARATOR","\\",36],["T_STRING","Util",36],["T_NS_SEPARATOR","\\",36],["T_STRING","Protocol",36],["T_NS_SEPARATOR","\\",36],["T_STRING","CurlInterface",36],";",["T_WHITESPACE","\n",36],["T_USE","use",37],["T_WHITESPACE"," ",37],["T_STRING","Magento",37],["T_NS_SEPARATOR","\\",37],["T_STRING","Mtf",37],["T_NS_SEPARATOR","\\",37],["T_STRING","Util",37],["T_NS_SEPARATOR","\\",37],["T_STRING","Protocol",37],["T_NS_SEPARATOR","\\",37],["T_STRING","CurlTransport",37],";",["T_WHITESPACE","\n",37],["T_USE","use",38],["T_WHITESPACE"," ",38],["T_STRING","Magento",38],["T_NS_SEPARATOR","\\",38],["T_STRING","Mtf",38],["T_NS_SEPARATOR","\\",38],["T_STRING","Util",38],["T_NS_SEPARATOR","\\",38],["T_STRING","Protocol",38],["T_NS_SEPARATOR","\\",38],["T_STRING","CurlTransport",38],["T_NS_SEPARATOR","\\",38],["T_STRING","BackendDecorator",38],";",["T_WHITESPACE","\n\n",38],["T_DOC_COMMENT","\/**\n * Create new order via curl.\n *\/",40],["T_WHITESPACE","\n",42],["T_CLASS","class",43],["T_WHITESPACE"," ",43],["T_STRING","Curl",43],["T_WHITESPACE"," ",43],["T_EXTENDS","extends",43],["T_WHITESPACE"," ",43],["T_STRING","AbstractCurl",43],["T_WHITESPACE"," ",43],["T_IMPLEMENTS","implements",43],["T_WHITESPACE"," ",43],["T_STRING","OrderInterface",43],["T_WHITESPACE","\n",43],"{",["T_WHITESPACE","\n    ",44],["T_DOC_COMMENT","\/**\n     * Customer fixture.\n     *\n     * @var Customer\n     *\/",45],["T_WHITESPACE","\n    ",49],["T_PROTECTED","protected",50],["T_WHITESPACE"," ",50],["T_VARIABLE","$customer",50],";",["T_WHITESPACE","\n\n    ",50],["T_DOC_COMMENT","\/**\n     * Order fixture.\n     *\n     * @var Order\n     *\/",52],["T_WHITESPACE","\n    ",56],["T_PROTECTED","protected",57],["T_WHITESPACE"," ",57],["T_VARIABLE","$order",57],";",["T_WHITESPACE","\n\n    ",57],["T_DOC_COMMENT","\/**\n     * Mapping values for data.\n     *\n     * @var array\n     *\/",59],["T_WHITESPACE","\n    ",63],["T_PROTECTED","protected",64],["T_WHITESPACE"," ",64],["T_VARIABLE","$mappingData",64],["T_WHITESPACE"," ",64],"=",["T_WHITESPACE"," ",64],"[",["T_WHITESPACE","\n        ",64],["T_CONSTANT_ENCAPSED_STRING","'region_id'",65],["T_WHITESPACE"," ",65],["T_DOUBLE_ARROW","=>",65],["T_WHITESPACE"," ",65],"[",["T_WHITESPACE","\n            ",65],["T_CONSTANT_ENCAPSED_STRING","'California'",66],["T_WHITESPACE"," ",66],["T_DOUBLE_ARROW","=>",66],["T_WHITESPACE"," ",66],["T_CONSTANT_ENCAPSED_STRING","'12'",66],",",["T_WHITESPACE","\n        ",66],"]",",",["T_WHITESPACE","\n        ",67],["T_CONSTANT_ENCAPSED_STRING","'country_id'",68],["T_WHITESPACE"," ",68],["T_DOUBLE_ARROW","=>",68],["T_WHITESPACE"," ",68],"[",["T_WHITESPACE","\n            ",68],["T_CONSTANT_ENCAPSED_STRING","'United States'",69],["T_WHITESPACE"," ",69],["T_DOUBLE_ARROW","=>",69],["T_WHITESPACE"," ",69],["T_CONSTANT_ENCAPSED_STRING","'US'",69],",",["T_WHITESPACE","\n        ",69],"]",",",["T_WHITESPACE","\n    ",70],"]",";",["T_WHITESPACE","\n\n    ",71],["T_DOC_COMMENT","\/**\n     * Steps for create order on backend.\n     *\n     * @var array\n     *\/",73],["T_WHITESPACE","\n    ",77],["T_PROTECTED","protected",78],["T_WHITESPACE"," ",78],["T_VARIABLE","$steps",78],["T_WHITESPACE"," ",78],"=",["T_WHITESPACE"," ",78],"[",["T_WHITESPACE","\n        ",78],["T_CONSTANT_ENCAPSED_STRING","'customer_choice'",79],["T_WHITESPACE"," ",79],["T_DOUBLE_ARROW","=>",79],["T_WHITESPACE"," ",79],["T_CONSTANT_ENCAPSED_STRING","'header,data'",79],",",["T_WHITESPACE","\n        ",79],["T_CONSTANT_ENCAPSED_STRING","'products_choice'",80],["T_WHITESPACE"," ",80],["T_DOUBLE_ARROW","=>",80],["T_WHITESPACE"," ",80],["T_CONSTANT_ENCAPSED_STRING","'search,items,shipping_method,totals,giftmessage,billing_method'",80],",",["T_WHITESPACE","\n        ",80],["T_CONSTANT_ENCAPSED_STRING","'apply_coupon_code'",81],["T_WHITESPACE"," ",81],["T_DOUBLE_ARROW","=>",81],["T_WHITESPACE"," ",81],["T_CONSTANT_ENCAPSED_STRING","'items,shipping_method,totals,billing_method'",81],",",["T_WHITESPACE","\n        ",81],["T_CONSTANT_ENCAPSED_STRING","'shipping_data_address'",82],["T_WHITESPACE"," ",82],["T_DOUBLE_ARROW","=>",82],["T_WHITESPACE"," ",82],["T_CONSTANT_ENCAPSED_STRING","'shipping_method,billing_method,shipping_address,totals,giftmessage'",82],",",["T_WHITESPACE","\n        ",82],["T_CONSTANT_ENCAPSED_STRING","'shipping_data_method_get'",83],["T_WHITESPACE"," ",83],["T_DOUBLE_ARROW","=>",83],["T_WHITESPACE"," ",83],["T_CONSTANT_ENCAPSED_STRING","'shipping_method,totals'",83],",",["T_WHITESPACE","\n        ",83],["T_CONSTANT_ENCAPSED_STRING","'shipping_data_method_set'",84],["T_WHITESPACE"," ",84],["T_DOUBLE_ARROW","=>",84],["T_WHITESPACE"," ",84],["T_CONSTANT_ENCAPSED_STRING","'shipping_method,totals,billing_method'",84],",",["T_WHITESPACE","\n    ",84],"]",";",["T_WHITESPACE","\n\n    ",85],["T_DOC_COMMENT","\/**\n     * Post request for creating order.\n     *\n     * @param FixtureInterface|null $fixture [optional]\n     * @return array\n     *\/",87],["T_WHITESPACE","\n    ",92],["T_PUBLIC","public",93],["T_WHITESPACE"," ",93],["T_FUNCTION","function",93],["T_WHITESPACE"," ",93],["T_STRING","persist",93],"(",["T_STRING","FixtureInterface",93],["T_WHITESPACE"," ",93],["T_VARIABLE","$fixture",93],["T_WHITESPACE"," ",93],"=",["T_WHITESPACE"," ",93],["T_STRING","null",93],")",["T_WHITESPACE","\n    ",93],"{",["T_WHITESPACE","\n        ",94],["T_VARIABLE","$this",95],["T_OBJECT_OPERATOR","->",95],["T_STRING","order",95],["T_WHITESPACE"," ",95],"=",["T_WHITESPACE"," ",95],["T_VARIABLE","$fixture",95],";",["T_WHITESPACE","\n        ",95],["T_VARIABLE","$this",96],["T_OBJECT_OPERATOR","->",96],["T_STRING","customer",96],["T_WHITESPACE"," ",96],"=",["T_WHITESPACE"," ",96],["T_VARIABLE","$fixture",96],["T_OBJECT_OPERATOR","->",96],["T_STRING","getDataFieldConfig",96],"(",["T_CONSTANT_ENCAPSED_STRING","'customer_id'",96],")","[",["T_CONSTANT_ENCAPSED_STRING","'source'",96],"]",["T_OBJECT_OPERATOR","->",96],["T_STRING","getCustomer",96],"(",")",";",["T_WHITESPACE","\n        ",96],["T_VARIABLE","$data",97],["T_WHITESPACE"," ",97],"=",["T_WHITESPACE"," ",97],["T_VARIABLE","$this",97],["T_OBJECT_OPERATOR","->",97],["T_STRING","replaceMappingData",97],"(",["T_VARIABLE","$this",97],["T_OBJECT_OPERATOR","->",97],["T_STRING","prepareData",97],"(",["T_VARIABLE","$fixture",97],")",")",";",["T_WHITESPACE","\n        ",97],["T_RETURN","return",98],["T_WHITESPACE"," ",98],"[",["T_CONSTANT_ENCAPSED_STRING","'id'",98],["T_WHITESPACE"," ",98],["T_DOUBLE_ARROW","=>",98],["T_WHITESPACE"," ",98],["T_VARIABLE","$this",98],["T_OBJECT_OPERATOR","->",98],["T_STRING","createOrder",98],"(",["T_VARIABLE","$data",98],")","]",";",["T_WHITESPACE","\n    ",98],"}",["T_WHITESPACE","\n\n    ",99],["T_DOC_COMMENT","\/**\n     * Prepare POST data for creating product request.\n     *\n     * @param FixtureInterface $fixture\n     * @return array\n     *\/",101],["T_WHITESPACE","\n    ",106],["T_PROTECTED","protected",107],["T_WHITESPACE"," ",107],["T_FUNCTION","function",107],["T_WHITESPACE"," ",107],["T_STRING","prepareData",107],"(",["T_STRING","FixtureInterface",107],["T_WHITESPACE"," ",107],["T_VARIABLE","$fixture",107],")",["T_WHITESPACE","\n    ",107],"{",["T_WHITESPACE","\n        ",108],["T_VARIABLE","$result",109],["T_WHITESPACE"," ",109],"=",["T_WHITESPACE"," ",109],"[","]",";",["T_WHITESPACE","\n        ",109],["T_VARIABLE","$data",110],["T_WHITESPACE"," ",110],"=",["T_WHITESPACE"," ",110],["T_VARIABLE","$fixture",110],["T_OBJECT_OPERATOR","->",110],["T_STRING","getData",110],"(",")",";",["T_WHITESPACE","\n        ",110],["T_VARIABLE","$result",111],"[",["T_CONSTANT_ENCAPSED_STRING","'customer_choice'",111],"]",["T_WHITESPACE"," ",111],"=",["T_WHITESPACE"," ",111],["T_VARIABLE","$this",111],["T_OBJECT_OPERATOR","->",111],["T_STRING","prepareCustomerData",111],"(",["T_VARIABLE","$data",111],")",";",["T_WHITESPACE","\n        ",111],["T_VARIABLE","$result",112],"[",["T_CONSTANT_ENCAPSED_STRING","'products_choice'",112],"]",["T_WHITESPACE"," ",112],"=",["T_WHITESPACE"," ",112],["T_VARIABLE","$this",112],["T_OBJECT_OPERATOR","->",112],["T_STRING","prepareProductsData",112],"(",["T_VARIABLE","$data",112],"[",["T_CONSTANT_ENCAPSED_STRING","'entity_id'",112],"]",")",";",["T_WHITESPACE","\n        ",112],["T_VARIABLE","$result",113],"[",["T_CONSTANT_ENCAPSED_STRING","'order_data'",113],"]",["T_WHITESPACE"," ",113],"=",["T_WHITESPACE"," ",113],["T_VARIABLE","$this",113],["T_OBJECT_OPERATOR","->",113],["T_STRING","prepareOrderData",113],"(",["T_VARIABLE","$data",113],")",";",["T_WHITESPACE","\n        ",113],["T_VARIABLE","$result",114],"[",["T_CONSTANT_ENCAPSED_STRING","'shipping_data_address'",114],"]",["T_WHITESPACE"," ",114],"=",["T_WHITESPACE"," ",114],["T_VARIABLE","$this",114],["T_OBJECT_OPERATOR","->",114],["T_STRING","prepareShippingData",114],"(",["T_VARIABLE","$result",114],"[",["T_CONSTANT_ENCAPSED_STRING","'order_data'",114],"]",")",";",["T_WHITESPACE","\n        ",114],["T_VARIABLE","$result",115],"[",["T_CONSTANT_ENCAPSED_STRING","'shipping_data_method_get'",115],"]",["T_WHITESPACE"," ",115],"=",["T_WHITESPACE"," ",115],"[",["T_WHITESPACE","\n            ",115],["T_CONSTANT_ENCAPSED_STRING","'payment'",116],["T_WHITESPACE"," ",116],["T_DOUBLE_ARROW","=>",116],["T_WHITESPACE"," ",116],["T_VARIABLE","$data",116],"[",["T_CONSTANT_ENCAPSED_STRING","'payment_auth_expiration'",116],"]",",",["T_WHITESPACE","\n            ",116],["T_CONSTANT_ENCAPSED_STRING","'collect_shipping_rates'",117],["T_WHITESPACE"," ",117],["T_DOUBLE_ARROW","=>",117],["T_WHITESPACE"," ",117],["T_LNUMBER","1",117],",",["T_WHITESPACE","\n        ",117],"]",";",["T_WHITESPACE","\n        ",118],["T_VARIABLE","$result",119],"[",["T_CONSTANT_ENCAPSED_STRING","'shipping_data_method_set'",119],"]",["T_WHITESPACE"," ",119],"=",["T_WHITESPACE"," ",119],"[",["T_WHITESPACE","\n            ",119],["T_CONSTANT_ENCAPSED_STRING","'order'",120],["T_WHITESPACE"," ",120],["T_DOUBLE_ARROW","=>",120],["T_WHITESPACE"," ",120],"[",["T_CONSTANT_ENCAPSED_STRING","'shipping_method'",120],["T_WHITESPACE"," ",120],["T_DOUBLE_ARROW","=>",120],["T_WHITESPACE"," ",120],["T_VARIABLE","$data",120],"[",["T_CONSTANT_ENCAPSED_STRING","'shipping_method'",120],"]","]",",",["T_WHITESPACE","\n            ",120],["T_CONSTANT_ENCAPSED_STRING","'payment'",121],["T_WHITESPACE"," ",121],["T_DOUBLE_ARROW","=>",121],["T_WHITESPACE"," ",121],["T_VARIABLE","$data",121],"[",["T_CONSTANT_ENCAPSED_STRING","'payment_auth_expiration'",121],"]",",",["T_WHITESPACE","\n        ",121],"]",";",["T_WHITESPACE","\n\n        ",122],["T_RETURN","return",124],["T_WHITESPACE"," ",124],["T_VARIABLE","$result",124],";",["T_WHITESPACE","\n    ",124],"}",["T_WHITESPACE","\n\n    ",125],["T_DOC_COMMENT","\/**\n     * Prepare shipping data.\n     *\n     * @param array $data\n     * @return array\n     *\/",127],["T_WHITESPACE","\n    ",132],["T_PROTECTED","protected",133],["T_WHITESPACE"," ",133],["T_FUNCTION","function",133],["T_WHITESPACE"," ",133],["T_STRING","prepareShippingData",133],"(",["T_ARRAY","array",133],["T_WHITESPACE"," ",133],["T_VARIABLE","$data",133],")",["T_WHITESPACE","\n    ",133],"{",["T_WHITESPACE","\n        ",134],["T_VARIABLE","$result",135],["T_WHITESPACE"," ",135],"=",["T_WHITESPACE"," ",135],"[",["T_WHITESPACE","\n            ",135],["T_CONSTANT_ENCAPSED_STRING","'order'",136],["T_WHITESPACE"," ",136],["T_DOUBLE_ARROW","=>",136],["T_WHITESPACE"," ",136],"[",["T_WHITESPACE","\n                ",136],["T_CONSTANT_ENCAPSED_STRING","'billing_address'",137],["T_WHITESPACE"," ",137],["T_DOUBLE_ARROW","=>",137],["T_WHITESPACE"," ",137],["T_VARIABLE","$data",137],"[",["T_CONSTANT_ENCAPSED_STRING","'billing_address'",137],"]",",",["T_WHITESPACE","\n            ",137],"]",",",["T_WHITESPACE","\n            ",138],["T_CONSTANT_ENCAPSED_STRING","'payment'",139],["T_WHITESPACE"," ",139],["T_DOUBLE_ARROW","=>",139],["T_WHITESPACE"," ",139],["T_VARIABLE","$this",139],["T_OBJECT_OPERATOR","->",139],["T_STRING","order",139],["T_OBJECT_OPERATOR","->",139],["T_STRING","getPaymentAuthExpiration",139],"(",")",",",["T_WHITESPACE","\n            ",139],["T_CONSTANT_ENCAPSED_STRING","'reset_shipping'",140],["T_WHITESPACE"," ",140],["T_DOUBLE_ARROW","=>",140],["T_WHITESPACE"," ",140],["T_LNUMBER","1",140],",",["T_WHITESPACE","\n            ",140],["T_CONSTANT_ENCAPSED_STRING","'shipping_as_billing'",141],["T_WHITESPACE"," ",141],["T_DOUBLE_ARROW","=>",141],["T_WHITESPACE"," ",141],["T_LNUMBER","1",141],",",["T_WHITESPACE","\n        ",141],"]",";",["T_WHITESPACE","\n        ",142],["T_RETURN","return",143],["T_WHITESPACE"," ",143],["T_VARIABLE","$result",143],";",["T_WHITESPACE","\n    ",143],"}",["T_WHITESPACE","\n\n    ",144],["T_DOC_COMMENT","\/**\n     * Prepare products data.\n     *\n     * @param array $data\n     * @return array\n     *\/",146],["T_WHITESPACE","\n    ",151],["T_PROTECTED","protected",152],["T_WHITESPACE"," ",152],["T_FUNCTION","function",152],["T_WHITESPACE"," ",152],["T_STRING","prepareProductsData",152],"(",["T_ARRAY","array",152],["T_WHITESPACE"," ",152],["T_VARIABLE","$data",152],")",["T_WHITESPACE","\n    ",152],"{",["T_WHITESPACE","\n        ",153],["T_VARIABLE","$result",154],"[",["T_CONSTANT_ENCAPSED_STRING","'item'",154],"]",["T_WHITESPACE"," ",154],"=",["T_WHITESPACE"," ",154],"[","]",";",["T_WHITESPACE","\n        ",154],["T_FOREACH","foreach",155],["T_WHITESPACE"," ",155],"(",["T_VARIABLE","$data",155],"[",["T_CONSTANT_ENCAPSED_STRING","'products'",155],"]",["T_WHITESPACE"," ",155],["T_AS","as",155],["T_WHITESPACE"," ",155],["T_VARIABLE","$value",155],")",["T_WHITESPACE"," ",155],"{",["T_WHITESPACE","\n            ",155],["T_IF","if",156],["T_WHITESPACE"," ",156],"(","!",["T_VARIABLE","$value",156],["T_OBJECT_OPERATOR","->",156],["T_STRING","hasData",156],"(",["T_CONSTANT_ENCAPSED_STRING","'checkout_data'",156],")",")",["T_WHITESPACE"," ",156],"{",["T_WHITESPACE","\n                ",156],["T_CONTINUE","continue",157],";",["T_WHITESPACE","\n            ",157],"}",["T_WHITESPACE","\n            ",158],["T_VARIABLE","$methodName",159],["T_WHITESPACE"," ",159],"=",["T_WHITESPACE"," ",159],["T_CONSTANT_ENCAPSED_STRING","'prepare'",159],["T_WHITESPACE"," ",159],".",["T_WHITESPACE"," ",159],["T_STRING","ucfirst",159],"(",["T_VARIABLE","$value",159],["T_OBJECT_OPERATOR","->",159],["T_STRING","getDataConfig",159],"(",")","[",["T_CONSTANT_ENCAPSED_STRING","'type_id'",159],"]",")",["T_WHITESPACE"," ",159],".",["T_WHITESPACE"," ",159],["T_CONSTANT_ENCAPSED_STRING","'Data'",159],";",["T_WHITESPACE","\n            ",159],["T_IF","if",160],["T_WHITESPACE"," ",160],"(","!",["T_STRING","method_exists",160],"(",["T_VARIABLE","$this",160],",",["T_WHITESPACE"," ",160],["T_VARIABLE","$methodName",160],")",")",["T_WHITESPACE"," ",160],"{",["T_WHITESPACE","\n                ",160],["T_VARIABLE","$methodName",161],["T_WHITESPACE"," ",161],"=",["T_WHITESPACE"," ",161],["T_CONSTANT_ENCAPSED_STRING","'prepareSimpleData'",161],";",["T_WHITESPACE","\n            ",161],"}",["T_WHITESPACE","\n            ",162],["T_VARIABLE","$result",163],"[",["T_CONSTANT_ENCAPSED_STRING","'item'",163],"]","[",["T_VARIABLE","$value",163],["T_OBJECT_OPERATOR","->",163],["T_STRING","getId",163],"(",")","]",["T_WHITESPACE"," ",163],"=",["T_WHITESPACE"," ",163],["T_VARIABLE","$this",163],["T_OBJECT_OPERATOR","->",163],["T_VARIABLE","$methodName",163],"(",["T_VARIABLE","$value",163],")",";",["T_WHITESPACE","\n        ",163],"}",["T_WHITESPACE","\n        ",164],["T_RETURN","return",165],["T_WHITESPACE"," ",165],["T_VARIABLE","$result",165],";",["T_WHITESPACE","\n    ",165],"}",["T_WHITESPACE","\n\n    ",166],["T_DOC_COMMENT","\/**\n     * Prepare data for configurable product.\n     *\n     * @param ConfigurableProduct $product\n     * @return array\n     *\/",168],["T_WHITESPACE","\n    ",173],["T_PROTECTED","protected",174],["T_WHITESPACE"," ",174],["T_FUNCTION","function",174],["T_WHITESPACE"," ",174],["T_STRING","prepareConfigurableData",174],"(",["T_STRING","ConfigurableProduct",174],["T_WHITESPACE"," ",174],["T_VARIABLE","$product",174],")",["T_WHITESPACE","\n    ",174],"{",["T_WHITESPACE","\n        ",175],["T_VARIABLE","$result",176],["T_WHITESPACE"," ",176],"=",["T_WHITESPACE"," ",176],"[","]",";",["T_WHITESPACE","\n        ",176],["T_VARIABLE","$checkoutData",177],["T_WHITESPACE"," ",177],"=",["T_WHITESPACE"," ",177],["T_VARIABLE","$product",177],["T_OBJECT_OPERATOR","->",177],["T_STRING","getCheckoutData",177],"(",")",";",["T_WHITESPACE","\n        ",177],["T_VARIABLE","$result",178],"[",["T_CONSTANT_ENCAPSED_STRING","'qty'",178],"]",["T_WHITESPACE"," ",178],"=",["T_WHITESPACE"," ",178],["T_VARIABLE","$checkoutData",178],"[",["T_CONSTANT_ENCAPSED_STRING","'qty'",178],"]",";",["T_WHITESPACE","\n        ",178],["T_VARIABLE","$attributesData",179],["T_WHITESPACE"," ",179],"=",["T_WHITESPACE"," ",179],["T_VARIABLE","$product",179],["T_OBJECT_OPERATOR","->",179],["T_STRING","hasData",179],"(",["T_CONSTANT_ENCAPSED_STRING","'configurable_options'",179],")",["T_WHITESPACE","\n            ",179],"?",["T_WHITESPACE"," ",180],["T_VARIABLE","$product",180],["T_OBJECT_OPERATOR","->",180],["T_STRING","getDataFieldConfig",180],"(",["T_CONSTANT_ENCAPSED_STRING","'configurable_options'",180],")","[",["T_CONSTANT_ENCAPSED_STRING","'source'",180],"]",["T_OBJECT_OPERATOR","->",180],["T_STRING","getAttributesData",180],"(",")",["T_WHITESPACE","\n            ",180],":",["T_WHITESPACE"," ",181],["T_STRING","null",181],";",["T_WHITESPACE","\n        ",181],["T_IF","if",182],["T_WHITESPACE"," ",182],"(",["T_VARIABLE","$attributesData",182],["T_WHITESPACE"," ",182],["T_IS_EQUAL","==",182],["T_WHITESPACE"," ",182],["T_STRING","null",182],")",["T_WHITESPACE"," ",182],"{",["T_WHITESPACE","\n            ",182],["T_RETURN","return",183],["T_WHITESPACE"," ",183],["T_VARIABLE","$result",183],";",["T_WHITESPACE","\n        ",183],"}",["T_WHITESPACE","\n\n        ",184],["T_FOREACH","foreach",186],["T_WHITESPACE"," ",186],"(",["T_VARIABLE","$checkoutData",186],"[",["T_CONSTANT_ENCAPSED_STRING","'options'",186],"]","[",["T_CONSTANT_ENCAPSED_STRING","'configurable_options'",186],"]",["T_WHITESPACE"," ",186],["T_AS","as",186],["T_WHITESPACE"," ",186],["T_VARIABLE","$key",186],["T_WHITESPACE"," ",186],["T_DOUBLE_ARROW","=>",186],["T_WHITESPACE"," ",186],["T_VARIABLE","$option",186],")",["T_WHITESPACE"," ",186],"{",["T_WHITESPACE","\n            ",186],["T_VARIABLE","$attributeId",187],["T_WHITESPACE"," ",187],"=",["T_WHITESPACE"," ",187],["T_VARIABLE","$attributesData",187],"[",["T_VARIABLE","$key",187],"]",["T_OBJECT_OPERATOR","->",187],["T_STRING","getAttributeId",187],"(",")",";",["T_WHITESPACE","\n            ",187],["T_VARIABLE","$optionId",188],["T_WHITESPACE"," ",188],"=",["T_WHITESPACE"," ",188],["T_VARIABLE","$attributesData",188],"[",["T_VARIABLE","$key",188],"]",["T_OBJECT_OPERATOR","->",188],["T_STRING","getOptions",188],"(",")","[",["T_STRING","substr",188],"(",["T_VARIABLE","$option",188],"[",["T_CONSTANT_ENCAPSED_STRING","'value'",188],"]",",",["T_WHITESPACE"," ",188],"-",["T_LNUMBER","1",188],")","]","[",["T_CONSTANT_ENCAPSED_STRING","'id'",188],"]",";",["T_WHITESPACE","\n            ",188],["T_VARIABLE","$result",189],"[",["T_CONSTANT_ENCAPSED_STRING","'super_attribute'",189],"]","[",["T_VARIABLE","$attributeId",189],"]",["T_WHITESPACE"," ",189],"=",["T_WHITESPACE"," ",189],["T_VARIABLE","$optionId",189],";",["T_WHITESPACE","\n        ",189],"}",["T_WHITESPACE","\n\n        ",190],["T_RETURN","return",192],["T_WHITESPACE"," ",192],["T_VARIABLE","$result",192],";",["T_WHITESPACE","\n    ",192],"}",["T_WHITESPACE","\n\n    ",193],["T_DOC_COMMENT","\/**\n     * Prepare data for bundle product.\n     *\n     * @param BundleProduct $product\n     * @return array\n     *\n     * @SuppressWarnings(PHPMD.UnusedLocalVariable)\n     *\/",195],["T_WHITESPACE","\n    ",202],["T_PROTECTED","protected",203],["T_WHITESPACE"," ",203],["T_FUNCTION","function",203],["T_WHITESPACE"," ",203],["T_STRING","prepareBundleData",203],"(",["T_STRING","BundleProduct",203],["T_WHITESPACE"," ",203],["T_VARIABLE","$product",203],")",["T_WHITESPACE","\n    ",203],"{",["T_WHITESPACE","\n        ",204],["T_VARIABLE","$result",205],["T_WHITESPACE"," ",205],"=",["T_WHITESPACE"," ",205],"[","]",";",["T_WHITESPACE","\n        ",205],["T_VARIABLE","$checkoutData",206],["T_WHITESPACE"," ",206],"=",["T_WHITESPACE"," ",206],["T_VARIABLE","$product",206],["T_OBJECT_OPERATOR","->",206],["T_STRING","getCheckoutData",206],"(",")",";",["T_WHITESPACE","\n        ",206],["T_VARIABLE","$bundleOptions",207],["T_WHITESPACE"," ",207],"=",["T_WHITESPACE"," ",207],["T_ISSET","isset",207],"(",["T_VARIABLE","$checkoutData",207],"[",["T_CONSTANT_ENCAPSED_STRING","'options'",207],"]","[",["T_CONSTANT_ENCAPSED_STRING","'bundle_options'",207],"]",")",["T_WHITESPACE","\n            ",207],"?",["T_WHITESPACE"," ",208],["T_VARIABLE","$checkoutData",208],"[",["T_CONSTANT_ENCAPSED_STRING","'options'",208],"]","[",["T_CONSTANT_ENCAPSED_STRING","'bundle_options'",208],"]",["T_WHITESPACE","\n            ",208],":",["T_WHITESPACE"," ",209],"[","]",";",["T_WHITESPACE","\n        ",209],["T_VARIABLE","$bundleSelections",210],["T_WHITESPACE"," ",210],"=",["T_WHITESPACE"," ",210],["T_VARIABLE","$product",210],["T_OBJECT_OPERATOR","->",210],["T_STRING","getBundleSelections",210],"(",")",";",["T_WHITESPACE","\n        ",210],["T_VARIABLE","$bundleSelectionsData",211],["T_WHITESPACE"," ",211],"=",["T_WHITESPACE"," ",211],"[","]",";",["T_WHITESPACE","\n        ",211],["T_VARIABLE","$result",212],"[",["T_CONSTANT_ENCAPSED_STRING","'qty'",212],"]",["T_WHITESPACE"," ",212],"=",["T_WHITESPACE"," ",212],["T_VARIABLE","$checkoutData",212],"[",["T_CONSTANT_ENCAPSED_STRING","'qty'",212],"]",";",["T_WHITESPACE","\n\n        ",212],["T_FOREACH","foreach",214],["T_WHITESPACE"," ",214],"(",["T_VARIABLE","$bundleSelections",214],["T_WHITESPACE"," ",214],["T_AS","as",214],["T_WHITESPACE"," ",214],["T_VARIABLE","$option",214],")",["T_WHITESPACE"," ",214],"{",["T_WHITESPACE","\n            ",214],["T_FOREACH","foreach",215],["T_WHITESPACE"," ",215],"(",["T_VARIABLE","$option",215],"[",["T_CONSTANT_ENCAPSED_STRING","'assigned_products'",215],"]",["T_WHITESPACE"," ",215],["T_AS","as",215],["T_WHITESPACE"," ",215],["T_VARIABLE","$productData",215],")",["T_WHITESPACE"," ",215],"{",["T_WHITESPACE","\n                ",215],["T_VARIABLE","$bundleSelectionsData",216],"[","]",["T_WHITESPACE"," ",216],"=",["T_WHITESPACE"," ",216],"[",["T_WHITESPACE","\n                    ",216],["T_CONSTANT_ENCAPSED_STRING","'selection_id'",217],["T_WHITESPACE"," ",217],["T_DOUBLE_ARROW","=>",217],["T_WHITESPACE"," ",217],["T_VARIABLE","$productData",217],"[",["T_CONSTANT_ENCAPSED_STRING","'selection_id'",217],"]",",",["T_WHITESPACE","\n                    ",217],["T_CONSTANT_ENCAPSED_STRING","'option_id'",218],["T_WHITESPACE"," ",218],["T_DOUBLE_ARROW","=>",218],["T_WHITESPACE"," ",218],["T_VARIABLE","$productData",218],"[",["T_CONSTANT_ENCAPSED_STRING","'option_id'",218],"]",",",["T_WHITESPACE","\n                ",218],"]",";",["T_WHITESPACE","\n            ",219],"}",["T_WHITESPACE","\n        ",220],"}",["T_WHITESPACE","\n\n        ",221],["T_FOREACH","foreach",223],["T_WHITESPACE"," ",223],"(",["T_VARIABLE","$bundleOptions",223],["T_WHITESPACE"," ",223],["T_AS","as",223],["T_WHITESPACE"," ",223],["T_VARIABLE","$option",223],")",["T_WHITESPACE"," ",223],"{",["T_WHITESPACE","\n            ",223],["T_VARIABLE","$key",224],["T_WHITESPACE"," ",224],"=",["T_WHITESPACE"," ",224],["T_STRING","substr",224],"(",["T_VARIABLE","$option",224],"[",["T_CONSTANT_ENCAPSED_STRING","'value'",224],"]","[",["T_CONSTANT_ENCAPSED_STRING","'name'",224],"]",",",["T_WHITESPACE"," ",224],"-",["T_LNUMBER","1",224],")",";",["T_WHITESPACE","\n            ",224],["T_IF","if",225],["T_WHITESPACE"," ",225],"(",["T_ISSET","isset",225],"(",["T_VARIABLE","$bundleSelectionsData",225],"[",["T_VARIABLE","$key",225],"]",")",")",["T_WHITESPACE"," ",225],"{",["T_WHITESPACE","\n                ",225],["T_VARIABLE","$optionId",226],["T_WHITESPACE"," ",226],"=",["T_WHITESPACE"," ",226],["T_VARIABLE","$bundleSelectionsData",226],"[",["T_VARIABLE","$key",226],"]","[",["T_CONSTANT_ENCAPSED_STRING","'option_id'",226],"]",";",["T_WHITESPACE","\n                ",226],["T_VARIABLE","$selectionId",227],["T_WHITESPACE"," ",227],"=",["T_WHITESPACE"," ",227],["T_VARIABLE","$bundleSelectionsData",227],"[",["T_VARIABLE","$key",227],"]","[",["T_CONSTANT_ENCAPSED_STRING","'selection_id'",227],"]",";",["T_WHITESPACE","\n                ",227],["T_VARIABLE","$result",228],"[",["T_CONSTANT_ENCAPSED_STRING","'bundle_option'",228],"]","[",["T_VARIABLE","$optionId",228],"]",["T_WHITESPACE"," ",228],"=",["T_WHITESPACE"," ",228],["T_VARIABLE","$selectionId",228],";",["T_WHITESPACE","\n            ",228],"}",["T_WHITESPACE","\n        ",229],"}",["T_WHITESPACE","\n\n        ",230],["T_RETURN","return",232],["T_WHITESPACE"," ",232],["T_VARIABLE","$result",232],";",["T_WHITESPACE","\n    ",232],"}",["T_WHITESPACE","\n\n    ",233],["T_DOC_COMMENT","\/**\n     * Prepare data for simple product.\n     *\n     * @param FixtureInterface $product\n     * @return array\n     *\/",235],["T_WHITESPACE","\n    ",240],["T_PROTECTED","protected",241],["T_WHITESPACE"," ",241],["T_FUNCTION","function",241],["T_WHITESPACE"," ",241],["T_STRING","prepareSimpleData",241],"(",["T_STRING","FixtureInterface",241],["T_WHITESPACE"," ",241],["T_VARIABLE","$product",241],")",["T_WHITESPACE","\n    ",241],"{",["T_WHITESPACE","\n        ",242],["T_RETURN","return",243],["T_WHITESPACE"," ",243],"[",["T_CONSTANT_ENCAPSED_STRING","'qty'",243],["T_WHITESPACE"," ",243],["T_DOUBLE_ARROW","=>",243],["T_WHITESPACE"," ",243],["T_VARIABLE","$product",243],["T_OBJECT_OPERATOR","->",243],["T_STRING","getCheckoutData",243],"(",")","[",["T_CONSTANT_ENCAPSED_STRING","'qty'",243],"]","]",";",["T_WHITESPACE","\n    ",243],"}",["T_WHITESPACE","\n\n    ",244],["T_DOC_COMMENT","\/**\n     * Prepare order data.\n     *\n     * @param array $data\n     * @return array\n     *\/",246],["T_WHITESPACE","\n    ",251],["T_PROTECTED","protected",252],["T_WHITESPACE"," ",252],["T_FUNCTION","function",252],["T_WHITESPACE"," ",252],["T_STRING","prepareOrderData",252],"(",["T_ARRAY","array",252],["T_WHITESPACE"," ",252],["T_VARIABLE","$data",252],")",["T_WHITESPACE","\n    ",252],"{",["T_WHITESPACE","\n        ",253],["T_VARIABLE","$customerGroupId",254],["T_WHITESPACE"," ",254],"=",["T_WHITESPACE"," ",254],["T_VARIABLE","$this",254],["T_OBJECT_OPERATOR","->",254],["T_STRING","customer",254],["T_OBJECT_OPERATOR","->",254],["T_STRING","hasData",254],"(",["T_CONSTANT_ENCAPSED_STRING","'group_id'",254],")",["T_WHITESPACE","\n            ",254],"?",["T_WHITESPACE"," ",255],["T_VARIABLE","$this",255],["T_OBJECT_OPERATOR","->",255],["T_STRING","customer",255],["T_OBJECT_OPERATOR","->",255],["T_STRING","getDataFieldConfig",255],"(",["T_CONSTANT_ENCAPSED_STRING","'group_id'",255],")","[",["T_CONSTANT_ENCAPSED_STRING","'source'",255],"]",["T_OBJECT_OPERATOR","->",255],["T_STRING","getCustomerGroup",255],"(",")",["T_OBJECT_OPERATOR","->",255],["T_STRING","getCustomerGroupId",255],"(",")",["T_WHITESPACE","\n            ",255],":",["T_WHITESPACE"," ",256],["T_LNUMBER","1",256],";",["T_WHITESPACE","\n        ",256],["T_VARIABLE","$result",257],["T_WHITESPACE"," ",257],"=",["T_WHITESPACE"," ",257],"[",["T_WHITESPACE","\n            ",257],["T_CONSTANT_ENCAPSED_STRING","'name'",258],["T_WHITESPACE"," ",258],["T_DOUBLE_ARROW","=>",258],["T_WHITESPACE"," ",258],["T_VARIABLE","$this",258],["T_OBJECT_OPERATOR","->",258],["T_STRING","customer",258],["T_OBJECT_OPERATOR","->",258],["T_STRING","getFirstname",258],"(",")",",",["T_WHITESPACE","\n            ",258],["T_CONSTANT_ENCAPSED_STRING","'order'",259],["T_WHITESPACE"," ",259],["T_DOUBLE_ARROW","=>",259],["T_WHITESPACE"," ",259],"[",["T_WHITESPACE","\n                ",259],["T_CONSTANT_ENCAPSED_STRING","'currency'",260],["T_WHITESPACE"," ",260],["T_DOUBLE_ARROW","=>",260],["T_WHITESPACE"," ",260],["T_VARIABLE","$data",260],"[",["T_CONSTANT_ENCAPSED_STRING","'order_currency_code'",260],"]",",",["T_WHITESPACE","\n                ",260],["T_CONSTANT_ENCAPSED_STRING","'account'",261],["T_WHITESPACE"," ",261],["T_DOUBLE_ARROW","=>",261],["T_WHITESPACE"," ",261],"[",["T_WHITESPACE","\n                    ",261],["T_CONSTANT_ENCAPSED_STRING","'group_id'",262],["T_WHITESPACE"," ",262],["T_DOUBLE_ARROW","=>",262],["T_WHITESPACE"," ",262],["T_VARIABLE","$customerGroupId",262],",",["T_WHITESPACE","\n                    ",262],["T_CONSTANT_ENCAPSED_STRING","'email'",263],["T_WHITESPACE"," ",263],["T_DOUBLE_ARROW","=>",263],["T_WHITESPACE"," ",263],["T_VARIABLE","$this",263],["T_OBJECT_OPERATOR","->",263],["T_STRING","customer",263],["T_OBJECT_OPERATOR","->",263],["T_STRING","getEmail",263],"(",")",",",["T_WHITESPACE","\n                ",263],"]",",",["T_WHITESPACE","\n                ",264],["T_CONSTANT_ENCAPSED_STRING","'shipping_method'",265],["T_WHITESPACE"," ",265],["T_DOUBLE_ARROW","=>",265],["T_WHITESPACE"," ",265],["T_VARIABLE","$data",265],"[",["T_CONSTANT_ENCAPSED_STRING","'shipping_method'",265],"]",",",["T_WHITESPACE","\n            ",265],"]",",",["T_WHITESPACE","\n            ",266],["T_CONSTANT_ENCAPSED_STRING","'item'",267],["T_WHITESPACE"," ",267],["T_DOUBLE_ARROW","=>",267],["T_WHITESPACE"," ",267],["T_VARIABLE","$this",267],["T_OBJECT_OPERATOR","->",267],["T_STRING","prepareOrderProductsData",267],"(",["T_VARIABLE","$data",267],"[",["T_CONSTANT_ENCAPSED_STRING","'entity_id'",267],"]",")",",",["T_WHITESPACE","\n            ",267],["T_CONSTANT_ENCAPSED_STRING","'billing_address'",268],["T_WHITESPACE"," ",268],["T_DOUBLE_ARROW","=>",268],["T_WHITESPACE"," ",268],["T_VARIABLE","$this",268],["T_OBJECT_OPERATOR","->",268],["T_STRING","prepareBillingAddress",268],"(",["T_VARIABLE","$data",268],"[",["T_CONSTANT_ENCAPSED_STRING","'billing_address_id'",268],"]",")",",",["T_WHITESPACE","\n            ",268],["T_CONSTANT_ENCAPSED_STRING","'shipping_same_as_billing'",269],["T_WHITESPACE"," ",269],["T_DOUBLE_ARROW","=>",269],["T_WHITESPACE"," ",269],["T_CONSTANT_ENCAPSED_STRING","'on'",269],",",["T_WHITESPACE","\n            ",269],["T_CONSTANT_ENCAPSED_STRING","'payment'",270],["T_WHITESPACE"," ",270],["T_DOUBLE_ARROW","=>",270],["T_WHITESPACE"," ",270],["T_VARIABLE","$data",270],"[",["T_CONSTANT_ENCAPSED_STRING","'payment_auth_expiration'",270],"]",",",["T_WHITESPACE","\n\n        ",270],"]",";",["T_WHITESPACE","\n\n        ",272],["T_RETURN","return",274],["T_WHITESPACE"," ",274],["T_VARIABLE","$result",274],";",["T_WHITESPACE","\n    ",274],"}",["T_WHITESPACE","\n\n    ",275],["T_DOC_COMMENT","\/**\n     * Prepare customer data.\n     *\n     * @param array $data\n     * @return array\n     *\/",277],["T_WHITESPACE","\n    ",282],["T_PROTECTED","protected",283],["T_WHITESPACE"," ",283],["T_FUNCTION","function",283],["T_WHITESPACE"," ",283],["T_STRING","prepareCustomerData",283],"(",["T_ARRAY","array",283],["T_WHITESPACE"," ",283],["T_VARIABLE","$data",283],")",["T_WHITESPACE","\n    ",283],"{",["T_WHITESPACE","\n        ",284],["T_RETURN","return",285],["T_WHITESPACE"," ",285],"[",["T_WHITESPACE","\n            ",285],["T_CONSTANT_ENCAPSED_STRING","'currency_id'",286],["T_WHITESPACE"," ",286],["T_DOUBLE_ARROW","=>",286],["T_WHITESPACE"," ",286],["T_VARIABLE","$data",286],"[",["T_CONSTANT_ENCAPSED_STRING","'base_currency_code'",286],"]",",",["T_WHITESPACE","\n            ",286],["T_CONSTANT_ENCAPSED_STRING","'customer_id'",287],["T_WHITESPACE"," ",287],["T_DOUBLE_ARROW","=>",287],["T_WHITESPACE"," ",287],["T_VARIABLE","$this",287],["T_OBJECT_OPERATOR","->",287],["T_STRING","customer",287],["T_OBJECT_OPERATOR","->",287],["T_STRING","getData",287],"(",["T_CONSTANT_ENCAPSED_STRING","'id'",287],")",",",["T_WHITESPACE","\n            ",287],["T_CONSTANT_ENCAPSED_STRING","'payment'",288],["T_WHITESPACE"," ",288],["T_DOUBLE_ARROW","=>",288],["T_WHITESPACE"," ",288],["T_VARIABLE","$data",288],"[",["T_CONSTANT_ENCAPSED_STRING","'payment_authorization_amount'",288],"]",",",["T_WHITESPACE","\n            ",288],["T_CONSTANT_ENCAPSED_STRING","'store_id'",289],["T_WHITESPACE"," ",289],["T_DOUBLE_ARROW","=>",289],["T_WHITESPACE"," ",289],["T_VARIABLE","$this",289],["T_OBJECT_OPERATOR","->",289],["T_STRING","order",289],["T_OBJECT_OPERATOR","->",289],["T_STRING","getDataFieldConfig",289],"(",["T_CONSTANT_ENCAPSED_STRING","'store_id'",289],")","[",["T_CONSTANT_ENCAPSED_STRING","'source'",289],"]",["T_OBJECT_OPERATOR","->",289],["T_STRING","store",289],["T_OBJECT_OPERATOR","->",289],["T_STRING","getStoreId",289],"(",")",["T_WHITESPACE","\n        ",289],"]",";",["T_WHITESPACE","\n    ",290],"}",["T_WHITESPACE","\n\n    ",291],["T_DOC_COMMENT","\/**\n     * Prepare order products data.\n     *\n     * @param array $data\n     * @return array\n     *\/",293],["T_WHITESPACE","\n    ",298],["T_PROTECTED","protected",299],["T_WHITESPACE"," ",299],["T_FUNCTION","function",299],["T_WHITESPACE"," ",299],["T_STRING","prepareOrderProductsData",299],"(",["T_ARRAY","array",299],["T_WHITESPACE"," ",299],["T_VARIABLE","$data",299],")",["T_WHITESPACE","\n    ",299],"{",["T_WHITESPACE","\n        ",300],["T_VARIABLE","$result",301],["T_WHITESPACE"," ",301],"=",["T_WHITESPACE"," ",301],"[","]",";",["T_WHITESPACE","\n        ",301],["T_FOREACH","foreach",302],["T_WHITESPACE"," ",302],"(",["T_VARIABLE","$data",302],"[",["T_CONSTANT_ENCAPSED_STRING","'products'",302],"]",["T_WHITESPACE"," ",302],["T_AS","as",302],["T_WHITESPACE"," ",302],["T_VARIABLE","$value",302],")",["T_WHITESPACE"," ",302],"{",["T_WHITESPACE","\n            ",302],["T_IF","if",303],["T_WHITESPACE"," ",303],"(",["T_ISSET","isset",303],"(",["T_VARIABLE","$value",303],["T_OBJECT_OPERATOR","->",303],["T_STRING","getCheckoutData",303],"(",")","[",["T_CONSTANT_ENCAPSED_STRING","'qty'",303],"]",")",")",["T_WHITESPACE"," ",303],"{",["T_WHITESPACE","\n                ",303],["T_VARIABLE","$result",304],"[",["T_VARIABLE","$value",304],["T_OBJECT_OPERATOR","->",304],["T_STRING","getId",304],"(",")","]",["T_WHITESPACE"," ",304],"=",["T_WHITESPACE"," ",304],"[",["T_CONSTANT_ENCAPSED_STRING","'qty'",304],["T_WHITESPACE"," ",304],["T_DOUBLE_ARROW","=>",304],["T_WHITESPACE"," ",304],"[",["T_CONSTANT_ENCAPSED_STRING","'qty'",304],["T_WHITESPACE"," ",304],["T_DOUBLE_ARROW","=>",304],["T_WHITESPACE"," ",304],["T_VARIABLE","$value",304],["T_OBJECT_OPERATOR","->",304],["T_STRING","getCheckoutData",304],"(",")","[",["T_CONSTANT_ENCAPSED_STRING","'qty'",304],"]","]","]",";",["T_WHITESPACE","\n            ",304],"}",["T_WHITESPACE","\n        ",305],"}",["T_WHITESPACE","\n\n        ",306],["T_RETURN","return",308],["T_WHITESPACE"," ",308],["T_VARIABLE","$result",308],";",["T_WHITESPACE","\n    ",308],"}",["T_WHITESPACE","\n\n    ",309],["T_DOC_COMMENT","\/**\n     * Prepare billing address data.\n     *\n     * @param array $data\n     * @return array\n     *\/",311],["T_WHITESPACE","\n    ",316],["T_PROTECTED","protected",317],["T_WHITESPACE"," ",317],["T_FUNCTION","function",317],["T_WHITESPACE"," ",317],["T_STRING","prepareBillingAddress",317],"(",["T_ARRAY","array",317],["T_WHITESPACE"," ",317],["T_VARIABLE","$data",317],")",["T_WHITESPACE","\n    ",317],"{",["T_WHITESPACE","\n        ",318],["T_VARIABLE","$result",319],["T_WHITESPACE"," ",319],"=",["T_WHITESPACE"," ",319],["T_VARIABLE","$data",319],";",["T_WHITESPACE","\n        ",319],["T_VARIABLE","$result",320],"[",["T_CONSTANT_ENCAPSED_STRING","'firstname'",320],"]",["T_WHITESPACE"," ",320],"=",["T_WHITESPACE"," ",320],["T_VARIABLE","$this",320],["T_OBJECT_OPERATOR","->",320],["T_STRING","customer",320],["T_OBJECT_OPERATOR","->",320],["T_STRING","getFirstname",320],"(",")",";",["T_WHITESPACE","\n        ",320],["T_VARIABLE","$result",321],"[",["T_CONSTANT_ENCAPSED_STRING","'lastname'",321],"]",["T_WHITESPACE"," ",321],"=",["T_WHITESPACE"," ",321],["T_VARIABLE","$this",321],["T_OBJECT_OPERATOR","->",321],["T_STRING","customer",321],["T_OBJECT_OPERATOR","->",321],["T_STRING","getLastname",321],"(",")",";",["T_WHITESPACE","\n\n        ",321],["T_RETURN","return",323],["T_WHITESPACE"," ",323],["T_VARIABLE","$result",323],";",["T_WHITESPACE","\n    ",323],"}",["T_WHITESPACE","\n\n    ",324],["T_DOC_COMMENT","\/**\n     * Create order via curl.\n     *\n     * @param array $data\n     * @return int|null\n     * @throws \\Exception\n     *\/",326],["T_WHITESPACE","\n    ",332],["T_PROTECTED","protected",333],["T_WHITESPACE"," ",333],["T_FUNCTION","function",333],["T_WHITESPACE"," ",333],["T_STRING","createOrder",333],"(",["T_ARRAY","array",333],["T_WHITESPACE"," ",333],["T_VARIABLE","$data",333],")",["T_WHITESPACE","\n    ",333],"{",["T_WHITESPACE","\n        ",334],["T_VARIABLE","$curl",335],["T_WHITESPACE"," ",335],"=",["T_WHITESPACE"," ",335],["T_NEW","new",335],["T_WHITESPACE"," ",335],["T_STRING","BackendDecorator",335],"(",["T_NEW","new",335],["T_WHITESPACE"," ",335],["T_STRING","CurlTransport",335],"(",")",",",["T_WHITESPACE"," ",335],["T_VARIABLE","$this",335],["T_OBJECT_OPERATOR","->",335],["T_STRING","_configuration",335],")",";",["T_WHITESPACE","\n        ",335],["T_FOREACH","foreach",336],["T_WHITESPACE"," ",336],"(",["T_VARIABLE","$this",336],["T_OBJECT_OPERATOR","->",336],["T_STRING","steps",336],["T_WHITESPACE"," ",336],["T_AS","as",336],["T_WHITESPACE"," ",336],["T_VARIABLE","$key",336],["T_WHITESPACE"," ",336],["T_DOUBLE_ARROW","=>",336],["T_WHITESPACE"," ",336],["T_VARIABLE","$step",336],")",["T_WHITESPACE"," ",336],"{",["T_WHITESPACE","\n            ",336],["T_IF","if",337],["T_WHITESPACE"," ",337],"(","!",["T_ISSET","isset",337],"(",["T_VARIABLE","$data",337],"[",["T_VARIABLE","$key",337],"]",")",")",["T_WHITESPACE"," ",337],"{",["T_WHITESPACE","\n                ",337],["T_CONTINUE","continue",338],";",["T_WHITESPACE","\n            ",338],"}",["T_WHITESPACE","\n            ",339],["T_VARIABLE","$url",340],["T_WHITESPACE"," ",340],"=",["T_WHITESPACE"," ",340],["T_VARIABLE","$_ENV",340],"[",["T_CONSTANT_ENCAPSED_STRING","'app_backend_url'",340],"]",["T_WHITESPACE"," ",340],".",["T_WHITESPACE"," ",340],["T_CONSTANT_ENCAPSED_STRING","'sales_order_create\/loadBlock\/block\/'",340],["T_WHITESPACE"," ",340],".",["T_WHITESPACE"," ",340],["T_VARIABLE","$step",340],["T_WHITESPACE"," ",340],".",["T_WHITESPACE"," ",340],["T_CONSTANT_ENCAPSED_STRING","'?isAjax=true'",340],";",["T_WHITESPACE","\n            ",340],["T_VARIABLE","$curl",341],["T_OBJECT_OPERATOR","->",341],["T_STRING","write",341],"(",["T_VARIABLE","$url",341],",",["T_WHITESPACE"," ",341],["T_VARIABLE","$data",341],"[",["T_VARIABLE","$key",341],"]",")",";",["T_WHITESPACE","\n            ",341],["T_VARIABLE","$curl",342],["T_OBJECT_OPERATOR","->",342],["T_STRING","read",342],"(",")",";",["T_WHITESPACE","\n        ",342],"}",["T_WHITESPACE","\n        ",343],["T_VARIABLE","$url",344],["T_WHITESPACE"," ",344],"=",["T_WHITESPACE"," ",344],["T_VARIABLE","$_ENV",344],"[",["T_CONSTANT_ENCAPSED_STRING","'app_backend_url'",344],"]",["T_WHITESPACE"," ",344],".",["T_WHITESPACE"," ",344],["T_CONSTANT_ENCAPSED_STRING","'sales_order_create\/save'",344],";",["T_WHITESPACE","\n        ",344],["T_VARIABLE","$curl",345],["T_OBJECT_OPERATOR","->",345],["T_STRING","addOption",345],"(",["T_STRING","CURLOPT_HEADER",345],",",["T_WHITESPACE"," ",345],["T_LNUMBER","1",345],")",";",["T_WHITESPACE","\n        ",345],["T_VARIABLE","$curl",346],["T_OBJECT_OPERATOR","->",346],["T_STRING","write",346],"(",["T_VARIABLE","$url",346],",",["T_WHITESPACE"," ",346],["T_VARIABLE","$data",346],"[",["T_CONSTANT_ENCAPSED_STRING","'order_data'",346],"]",")",";",["T_WHITESPACE","\n        ",346],["T_VARIABLE","$response",347],["T_WHITESPACE"," ",347],"=",["T_WHITESPACE"," ",347],["T_VARIABLE","$curl",347],["T_OBJECT_OPERATOR","->",347],["T_STRING","read",347],"(",")",";",["T_WHITESPACE","\n        ",347],["T_VARIABLE","$curl",348],["T_OBJECT_OPERATOR","->",348],["T_STRING","close",348],"(",")",";",["T_WHITESPACE","\n\n        ",348],["T_IF","if",350],["T_WHITESPACE"," ",350],"(","!",["T_STRING","strpos",350],"(",["T_VARIABLE","$response",350],",",["T_WHITESPACE"," ",350],["T_CONSTANT_ENCAPSED_STRING","'class=\"success-msg\"'",350],")",")",["T_WHITESPACE"," ",350],"{",["T_WHITESPACE","\n            ",350],["T_THROW","throw",351],["T_WHITESPACE"," ",351],["T_NEW","new",351],["T_WHITESPACE"," ",351],["T_NS_SEPARATOR","\\",351],["T_STRING","Exception",351],"(","\"",["T_ENCAPSED_AND_WHITESPACE","Order creation by curl handler was not successful! Response: ",351],["T_VARIABLE","$response",351],"\"",")",";",["T_WHITESPACE","\n        ",351],"}",["T_WHITESPACE","\n        ",352],["T_STRING","preg_match",353],"(",["T_CONSTANT_ENCAPSED_STRING","\"@Order\\s#\\s(\\d+)@\"",353],",",["T_WHITESPACE"," ",353],["T_VARIABLE","$response",353],",",["T_WHITESPACE"," ",353],["T_VARIABLE","$matches",353],")",";",["T_WHITESPACE","\n\n        ",353],["T_RETURN","return",355],["T_WHITESPACE"," ",355],["T_ISSET","isset",355],"(",["T_VARIABLE","$matches",355],"[",["T_LNUMBER","1",355],"]",")",["T_WHITESPACE"," ",355],"?",["T_WHITESPACE"," ",355],["T_VARIABLE","$matches",355],"[",["T_LNUMBER","1",355],"]",["T_WHITESPACE"," ",355],":",["T_WHITESPACE"," ",355],["T_STRING","null",355],";",["T_WHITESPACE","\n    ",355],"}",["T_WHITESPACE","\n",356],"}",["T_WHITESPACE","\n",357]]
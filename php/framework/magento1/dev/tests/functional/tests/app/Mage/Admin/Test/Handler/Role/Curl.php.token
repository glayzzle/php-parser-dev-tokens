[["T_OPEN_TAG","<?php\n",1],["T_DOC_COMMENT","\/**\n * Magento\n *\n * NOTICE OF LICENSE\n *\n * This source file is subject to the Open Software License (OSL 3.0)\n * that is bundled with this package in the file LICENSE.txt.\n * It is also available through the world-wide-web at this URL:\n * http:\/\/opensource.org\/licenses\/osl-3.0.php\n * If you did not receive a copy of the license and are unable to\n * obtain it through the world-wide-web, please send an email\n * to license@magento.com so we can send you a copy immediately.\n *\n * DISCLAIMER\n *\n * Do not edit or add to this file if you wish to upgrade Magento to newer\n * versions in the future. If you wish to customize Magento for your\n * needs please refer to http:\/\/www.magento.com for more information.\n *\n * @category    Tests\n * @package     Tests_Functional\n * @copyright  Copyright (c) 2006-2016 X.commerce, Inc. and affiliates (http:\/\/www.magento.com)\n * @license    http:\/\/opensource.org\/licenses\/osl-3.0.php  Open Software License (OSL 3.0)\n *\/",2],["T_WHITESPACE","\n\n",25],["T_NAMESPACE","namespace",27],["T_WHITESPACE"," ",27],["T_STRING","Mage",27],["T_NS_SEPARATOR","\\",27],["T_STRING","Admin",27],["T_NS_SEPARATOR","\\",27],["T_STRING","Test",27],["T_NS_SEPARATOR","\\",27],["T_STRING","Handler",27],["T_NS_SEPARATOR","\\",27],["T_STRING","Role",27],";",["T_WHITESPACE","\n\n",27],["T_USE","use",29],["T_WHITESPACE"," ",29],["T_STRING","Magento",29],["T_NS_SEPARATOR","\\",29],["T_STRING","Mtf",29],["T_NS_SEPARATOR","\\",29],["T_STRING","Fixture",29],["T_NS_SEPARATOR","\\",29],["T_STRING","FixtureInterface",29],";",["T_WHITESPACE","\n",29],["T_USE","use",30],["T_WHITESPACE"," ",30],["T_STRING","Magento",30],["T_NS_SEPARATOR","\\",30],["T_STRING","Mtf",30],["T_NS_SEPARATOR","\\",30],["T_STRING","Handler",30],["T_NS_SEPARATOR","\\",30],["T_STRING","Curl",30],["T_WHITESPACE"," ",30],["T_AS","as",30],["T_WHITESPACE"," ",30],["T_STRING","AbstractCurl",30],";",["T_WHITESPACE","\n",30],["T_USE","use",31],["T_WHITESPACE"," ",31],["T_STRING","Magento",31],["T_NS_SEPARATOR","\\",31],["T_STRING","Mtf",31],["T_NS_SEPARATOR","\\",31],["T_STRING","Util",31],["T_NS_SEPARATOR","\\",31],["T_STRING","Protocol",31],["T_NS_SEPARATOR","\\",31],["T_STRING","CurlInterface",31],";",["T_WHITESPACE","\n",31],["T_USE","use",32],["T_WHITESPACE"," ",32],["T_STRING","Magento",32],["T_NS_SEPARATOR","\\",32],["T_STRING","Mtf",32],["T_NS_SEPARATOR","\\",32],["T_STRING","Util",32],["T_NS_SEPARATOR","\\",32],["T_STRING","Protocol",32],["T_NS_SEPARATOR","\\",32],["T_STRING","CurlTransport",32],";",["T_WHITESPACE","\n",32],["T_USE","use",33],["T_WHITESPACE"," ",33],["T_STRING","Magento",33],["T_NS_SEPARATOR","\\",33],["T_STRING","Mtf",33],["T_NS_SEPARATOR","\\",33],["T_STRING","Util",33],["T_NS_SEPARATOR","\\",33],["T_STRING","Protocol",33],["T_NS_SEPARATOR","\\",33],["T_STRING","CurlTransport",33],["T_NS_SEPARATOR","\\",33],["T_STRING","BackendDecorator",33],";",["T_WHITESPACE","\n",33],["T_USE","use",34],["T_WHITESPACE"," ",34],["T_STRING","Mage",34],["T_NS_SEPARATOR","\\",34],["T_STRING","Admin",34],["T_NS_SEPARATOR","\\",34],["T_STRING","Test",34],["T_NS_SEPARATOR","\\",34],["T_STRING","Fixture",34],["T_NS_SEPARATOR","\\",34],["T_STRING","Role",34],";",["T_WHITESPACE","\n\n",34],["T_DOC_COMMENT","\/**\n * Creates User Role Entity.\n *\/",36],["T_WHITESPACE","\n",38],["T_CLASS","class",39],["T_WHITESPACE"," ",39],["T_STRING","Curl",39],["T_WHITESPACE"," ",39],["T_EXTENDS","extends",39],["T_WHITESPACE"," ",39],["T_STRING","AbstractCurl",39],["T_WHITESPACE"," ",39],["T_IMPLEMENTS","implements",39],["T_WHITESPACE"," ",39],["T_STRING","RoleInterface",39],["T_WHITESPACE","\n",39],"{",["T_WHITESPACE","\n    ",40],["T_DOC_COMMENT","\/**\n     * Mapping values for data.\n     *\n     * @var array\n     *\/",41],["T_WHITESPACE","\n    ",45],["T_PROTECTED","protected",46],["T_WHITESPACE"," ",46],["T_VARIABLE","$mappingData",46],["T_WHITESPACE"," ",46],"=",["T_WHITESPACE"," ",46],"[",["T_WHITESPACE","\n        ",46],["T_CONSTANT_ENCAPSED_STRING","'gws_is_all'",47],["T_WHITESPACE"," ",47],["T_DOUBLE_ARROW","=>",47],["T_WHITESPACE"," ",47],"[",["T_WHITESPACE","\n            ",47],["T_CONSTANT_ENCAPSED_STRING","'Custom'",48],["T_WHITESPACE"," ",48],["T_DOUBLE_ARROW","=>",48],["T_WHITESPACE"," ",48],["T_LNUMBER","0",48],",",["T_WHITESPACE","\n            ",48],["T_CONSTANT_ENCAPSED_STRING","'All'",49],["T_WHITESPACE"," ",49],["T_DOUBLE_ARROW","=>",49],["T_WHITESPACE"," ",49],["T_LNUMBER","1",49],["T_WHITESPACE","\n        ",49],"]",",",["T_WHITESPACE","\n        ",50],["T_CONSTANT_ENCAPSED_STRING","'resource_access'",51],["T_WHITESPACE"," ",51],["T_DOUBLE_ARROW","=>",51],["T_WHITESPACE"," ",51],"[",["T_WHITESPACE","\n            ",51],["T_CONSTANT_ENCAPSED_STRING","'Custom'",52],["T_WHITESPACE"," ",52],["T_DOUBLE_ARROW","=>",52],["T_WHITESPACE"," ",52],["T_LNUMBER","0",52],",",["T_WHITESPACE","\n            ",52],["T_CONSTANT_ENCAPSED_STRING","'All'",53],["T_WHITESPACE"," ",53],["T_DOUBLE_ARROW","=>",53],["T_WHITESPACE"," ",53],["T_LNUMBER","1",53],["T_WHITESPACE","\n        ",53],"]",["T_WHITESPACE","\n    ",54],"]",";",["T_WHITESPACE","\n\n    ",55],["T_DOC_COMMENT","\/**\n     * Curl creation of User Role.\n     *\n     * @param FixtureInterface $fixture [optional]\n     * @return array\n     * @throws \\Exception\n     *\/",57],["T_WHITESPACE","\n    ",63],["T_PUBLIC","public",64],["T_WHITESPACE"," ",64],["T_FUNCTION","function",64],["T_WHITESPACE"," ",64],["T_STRING","persist",64],"(",["T_STRING","FixtureInterface",64],["T_WHITESPACE"," ",64],["T_VARIABLE","$fixture",64],["T_WHITESPACE"," ",64],"=",["T_WHITESPACE"," ",64],["T_STRING","null",64],")",["T_WHITESPACE","\n    ",64],"{",["T_WHITESPACE","\n        ",65],["T_VARIABLE","$data",66],["T_WHITESPACE"," ",66],"=",["T_WHITESPACE"," ",66],["T_VARIABLE","$this",66],["T_OBJECT_OPERATOR","->",66],["T_STRING","prepareData",66],"(",["T_VARIABLE","$fixture",66],")",";",["T_WHITESPACE","\n        ",66],["T_VARIABLE","$url",67],["T_WHITESPACE"," ",67],"=",["T_WHITESPACE"," ",67],["T_VARIABLE","$_ENV",67],"[",["T_CONSTANT_ENCAPSED_STRING","'app_backend_url'",67],"]",["T_WHITESPACE"," ",67],".",["T_WHITESPACE"," ",67],["T_CONSTANT_ENCAPSED_STRING","'permissions_role\/saverole\/'",67],";",["T_WHITESPACE","\n        ",67],["T_VARIABLE","$curl",68],["T_WHITESPACE"," ",68],"=",["T_WHITESPACE"," ",68],["T_NEW","new",68],["T_WHITESPACE"," ",68],["T_STRING","BackendDecorator",68],"(",["T_NEW","new",68],["T_WHITESPACE"," ",68],["T_STRING","CurlTransport",68],"(",")",",",["T_WHITESPACE"," ",68],["T_VARIABLE","$this",68],["T_OBJECT_OPERATOR","->",68],["T_STRING","_configuration",68],")",";",["T_WHITESPACE","\n        ",68],["T_VARIABLE","$curl",69],["T_OBJECT_OPERATOR","->",69],["T_STRING","write",69],"(",["T_VARIABLE","$url",69],",",["T_WHITESPACE"," ",69],["T_VARIABLE","$data",69],")",";",["T_WHITESPACE","\n        ",69],["T_VARIABLE","$response",70],["T_WHITESPACE"," ",70],"=",["T_WHITESPACE"," ",70],["T_VARIABLE","$curl",70],["T_OBJECT_OPERATOR","->",70],["T_STRING","read",70],"(",")",";",["T_WHITESPACE","\n        ",70],["T_VARIABLE","$curl",71],["T_OBJECT_OPERATOR","->",71],["T_STRING","close",71],"(",")",";",["T_WHITESPACE","\n\n        ",71],["T_IF","if",73],["T_WHITESPACE"," ",73],"(","!",["T_STRING","strpos",73],"(",["T_VARIABLE","$response",73],",",["T_WHITESPACE"," ",73],["T_CONSTANT_ENCAPSED_STRING","'class=\"success-msg\"'",73],")",")",["T_WHITESPACE"," ",73],"{",["T_WHITESPACE","\n            ",73],["T_THROW","throw",74],["T_WHITESPACE"," ",74],["T_NEW","new",74],["T_WHITESPACE"," ",74],["T_NS_SEPARATOR","\\",74],["T_STRING","Exception",74],"(","\"",["T_ENCAPSED_AND_WHITESPACE","Role entity creating by curl handler was not successful! Response: ",74],["T_VARIABLE","$response",74],"\"",")",";",["T_WHITESPACE","\n        ",74],"}",["T_WHITESPACE","\n\n        ",75],["T_RETURN","return",77],["T_WHITESPACE"," ",77],"[",["T_CONSTANT_ENCAPSED_STRING","'role_id'",77],["T_WHITESPACE"," ",77],["T_DOUBLE_ARROW","=>",77],["T_WHITESPACE"," ",77],["T_VARIABLE","$this",77],["T_OBJECT_OPERATOR","->",77],["T_STRING","getRoleId",77],"(",["T_VARIABLE","$response",77],")","]",";",["T_WHITESPACE","\n    ",77],"}",["T_WHITESPACE","\n\n    ",78],["T_DOC_COMMENT","\/**\n     * Prepare data.\n     *\n     * @param FixtureInterface $fixture\n     * @return array\n     *\/",80],["T_WHITESPACE","\n    ",85],["T_PROTECTED","protected",86],["T_WHITESPACE"," ",86],["T_FUNCTION","function",86],["T_WHITESPACE"," ",86],["T_STRING","prepareData",86],"(",["T_STRING","FixtureInterface",86],["T_WHITESPACE"," ",86],["T_VARIABLE","$fixture",86],")","{",["T_WHITESPACE","\n        ",86],["T_DOC_COMMENT","\/** @var Role $fixture *\/",87],["T_WHITESPACE","\n        ",87],["T_VARIABLE","$data",88],["T_WHITESPACE"," ",88],"=",["T_WHITESPACE"," ",88],["T_VARIABLE","$this",88],["T_OBJECT_OPERATOR","->",88],["T_STRING","replaceMappingData",88],"(",["T_VARIABLE","$fixture",88],["T_OBJECT_OPERATOR","->",88],["T_STRING","getData",88],"(",")",")",";",["T_WHITESPACE","\n        ",88],["T_IF","if",89],["T_WHITESPACE"," ",89],"(",["T_ISSET","isset",89],"(",["T_VARIABLE","$data",89],"[",["T_CONSTANT_ENCAPSED_STRING","'roles_resources'",89],"]",")",")",["T_WHITESPACE"," ",89],"{",["T_WHITESPACE","\n            ",89],["T_VARIABLE","$data",90],"[",["T_CONSTANT_ENCAPSED_STRING","'resource'",90],"]",["T_WHITESPACE"," ",90],"=",["T_WHITESPACE"," ",90],["T_VARIABLE","$this",90],["T_OBJECT_OPERATOR","->",90],["T_STRING","prepareRolesResources",90],"(",["T_VARIABLE","$data",90],"[",["T_CONSTANT_ENCAPSED_STRING","'roles_resources'",90],"]",")",";",["T_WHITESPACE","\n            ",90],["T_UNSET","unset",91],"(",["T_VARIABLE","$data",91],"[",["T_CONSTANT_ENCAPSED_STRING","'roles_resources'",91],"]",")",";",["T_WHITESPACE","\n        ",91],"}",["T_WHITESPACE","\n\n        ",92],["T_RETURN","return",94],["T_WHITESPACE"," ",94],["T_VARIABLE","$data",94],";",["T_WHITESPACE","\n    ",94],"}",["T_WHITESPACE","\n\n    ",95],["T_DOC_COMMENT","\/**\n     * Prepare roles resources.\n     *\n     * @param array $resources\n     * @return string\n     *\/",97],["T_WHITESPACE","\n    ",102],["T_PROTECTED","protected",103],["T_WHITESPACE"," ",103],["T_FUNCTION","function",103],["T_WHITESPACE"," ",103],["T_STRING","prepareRolesResources",103],"(",["T_ARRAY","array",103],["T_WHITESPACE"," ",103],["T_VARIABLE","$resources",103],")",["T_WHITESPACE","\n    ",103],"{",["T_WHITESPACE","\n        ",104],["T_VARIABLE","$data",105],["T_WHITESPACE"," ",105],"=",["T_WHITESPACE"," ",105],["T_CONSTANT_ENCAPSED_STRING","'__root__,'",105],";",["T_WHITESPACE","\n        ",105],["T_VARIABLE","$data",106],["T_WHITESPACE"," ",106],["T_CONCAT_EQUAL",".=",106],["T_WHITESPACE"," ",106],["T_STRING","implode",106],"(",["T_CONSTANT_ENCAPSED_STRING","','",106],",",["T_WHITESPACE"," ",106],["T_VARIABLE","$resources",106],")",";",["T_WHITESPACE","\n        ",106],["T_VARIABLE","$result",107],["T_WHITESPACE"," ",107],"=",["T_WHITESPACE"," ",107],["T_STRING","str_replace",107],"(",["T_CONSTANT_ENCAPSED_STRING","','",107],",",["T_WHITESPACE"," ",107],["T_CONSTANT_ENCAPSED_STRING","',admin\/'",107],",",["T_WHITESPACE"," ",107],["T_VARIABLE","$data",107],")",";",["T_WHITESPACE","\n\n        ",107],["T_RETURN","return",109],["T_WHITESPACE"," ",109],["T_VARIABLE","$result",109],";",["T_WHITESPACE","\n    ",109],"}",["T_WHITESPACE","\n\n    ",110],["T_DOC_COMMENT","\/**\n     * Get role id.\n     *\n     * @param string $response\n     * @return int\n     * @throws \\Exception\n     *\/",112],["T_WHITESPACE","\n    ",118],["T_PROTECTED","protected",119],["T_WHITESPACE"," ",119],["T_FUNCTION","function",119],["T_WHITESPACE"," ",119],["T_STRING","getRoleId",119],"(",["T_VARIABLE","$response",119],")",["T_WHITESPACE","\n    ",119],"{",["T_WHITESPACE","\n        ",120],["T_STRING","preg_match_all",121],"(",["T_CONSTANT_ENCAPSED_STRING","'~title=\"http[^\\s]*\\\/rid\\\/(\\d+)~'",121],",",["T_WHITESPACE"," ",121],["T_VARIABLE","$response",121],",",["T_WHITESPACE"," ",121],["T_VARIABLE","$matches",121],")",";",["T_WHITESPACE","\n        ",121],["T_IF","if",122],["T_WHITESPACE"," ",122],"(",["T_EMPTY","empty",122],"(",["T_VARIABLE","$matches",122],")",")",["T_WHITESPACE"," ",122],"{",["T_WHITESPACE","\n            ",122],["T_THROW","throw",123],["T_WHITESPACE"," ",123],["T_NEW","new",123],["T_WHITESPACE"," ",123],["T_NS_SEPARATOR","\\",123],["T_STRING","Exception",123],"(",["T_CONSTANT_ENCAPSED_STRING","'Cannot find user role id'",123],")",";",["T_WHITESPACE","\n        ",123],"}",["T_WHITESPACE","\n\n        ",124],["T_RETURN","return",126],["T_WHITESPACE"," ",126],["T_STRING","max",126],"(",["T_VARIABLE","$matches",126],"[",["T_LNUMBER","1",126],"]",")",";",["T_WHITESPACE","\n    ",126],"}",["T_WHITESPACE","\n",127],"}",["T_WHITESPACE","\n",128]]
[["T_OPEN_TAG","<?php\n",1],["T_DOC_COMMENT","\/**\n * Magento\n *\n * NOTICE OF LICENSE\n *\n * This source file is subject to the Open Software License (OSL 3.0)\n * that is bundled with this package in the file LICENSE.txt.\n * It is also available through the world-wide-web at this URL:\n * http:\/\/opensource.org\/licenses\/osl-3.0.php\n * If you did not receive a copy of the license and are unable to\n * obtain it through the world-wide-web, please send an email\n * to license@magento.com so we can send you a copy immediately.\n *\n * DISCLAIMER\n *\n * Do not edit or add to this file if you wish to upgrade Magento to newer\n * versions in the future. If you wish to customize Magento for your\n * needs please refer to http:\/\/www.magento.com for more information.\n *\n * @category    Mage\n * @package     Mage\n * @copyright  Copyright (c) 2006-2016 X.commerce, Inc. and affiliates (http:\/\/www.magento.com)\n * @license    http:\/\/opensource.org\/licenses\/osl-3.0.php  Open Software License (OSL 3.0)\n *\/",2],["T_WHITESPACE","\n",25],["T_IF","if",26],["T_WHITESPACE"," ",26],"(",["T_STRING","version_compare",26],"(",["T_STRING","phpversion",26],"(",")",",",["T_WHITESPACE"," ",26],["T_CONSTANT_ENCAPSED_STRING","'5.2.0'",26],",",["T_WHITESPACE"," ",26],["T_CONSTANT_ENCAPSED_STRING","'<'",26],")",["T_IS_IDENTICAL","===",26],["T_STRING","true",26],")",["T_WHITESPACE"," ",26],"{",["T_WHITESPACE","\n    ",26],["T_ECHO","echo",27],["T_WHITESPACE","  ",27],["T_CONSTANT_ENCAPSED_STRING","'<div style=\"font:12px\/1.35em arial, helvetica, sans-serif;\"><div style=\"margin:0 0 25px 0; '",27],["T_WHITESPACE","\n        ",27],".",["T_WHITESPACE"," ",28],["T_CONSTANT_ENCAPSED_STRING","'border-bottom:1px solid #ccc;\"><h3 style=\"margin:0; font-size:1.7em; font-weight:normal; '",28],["T_WHITESPACE","\n        ",28],".",["T_WHITESPACE"," ",29],["T_CONSTANT_ENCAPSED_STRING","'text-transform:none; text-align:left; color:#2f2f2f;\">Whoops, it looks like you have an invalid PHP version.'",29],["T_WHITESPACE","\n        ",29],".",["T_WHITESPACE"," ",30],["T_CONSTANT_ENCAPSED_STRING","'<\/h3><\/div><p>Magento supports PHP 5.2.0 or newer. <a href=\"http:\/\/www.magentocommerce.com\/install\" '",30],["T_WHITESPACE","\n        ",30],".",["T_WHITESPACE"," ",31],["T_CONSTANT_ENCAPSED_STRING","'target=\"\">Find out<\/a> how to install<\/a> Magento using PHP-CGI as a work-around.<\/p><\/div>'",31],";",["T_WHITESPACE","\n    ",31],["T_EXIT","exit",32],";",["T_WHITESPACE","\n",32],"}",["T_WHITESPACE","\n",33],["T_VARIABLE","$start",34],["T_WHITESPACE"," ",34],"=",["T_WHITESPACE"," ",34],["T_STRING","microtime",34],"(",["T_STRING","true",34],")",";",["T_WHITESPACE","\n",34],["T_DOC_COMMENT","\/**\n * Error reporting\n *\/",35],["T_WHITESPACE","\n",37],["T_STRING","ini_set",38],"(",["T_CONSTANT_ENCAPSED_STRING","'display_errors'",38],",",["T_WHITESPACE"," ",38],["T_LNUMBER","0",38],")",";",["T_WHITESPACE","\n\n",38],["T_VARIABLE","$ds",40],["T_WHITESPACE"," ",40],"=",["T_WHITESPACE"," ",40],["T_STRING","DIRECTORY_SEPARATOR",40],";",["T_WHITESPACE","\n",40],["T_VARIABLE","$ps",41],["T_WHITESPACE"," ",41],"=",["T_WHITESPACE"," ",41],["T_STRING","PATH_SEPARATOR",41],";",["T_WHITESPACE","\n",41],["T_VARIABLE","$bp",42],["T_WHITESPACE"," ",42],"=",["T_WHITESPACE"," ",42],["T_STRING","dirname",42],"(",["T_FILE","__FILE__",42],")",";",["T_WHITESPACE","\n\n",42],["T_REQUIRE","require",44],["T_WHITESPACE"," ",44],["T_VARIABLE","$bp",44],["T_WHITESPACE"," ",44],".",["T_WHITESPACE"," ",44],["T_CONSTANT_ENCAPSED_STRING","'\/app\/bootstrap.php'",44],";",["T_WHITESPACE","\n\n",44],["T_DOC_COMMENT","\/**\n * Set include path\n *\/",46],["T_WHITESPACE","\n\n",48],["T_VARIABLE","$paths",50],"[","]",["T_WHITESPACE"," ",50],"=",["T_WHITESPACE"," ",50],["T_VARIABLE","$bp",50],["T_WHITESPACE"," ",50],".",["T_WHITESPACE"," ",50],["T_VARIABLE","$ds",50],["T_WHITESPACE"," ",50],".",["T_WHITESPACE"," ",50],["T_CONSTANT_ENCAPSED_STRING","'app'",50],["T_WHITESPACE"," ",50],".",["T_WHITESPACE"," ",50],["T_VARIABLE","$ds",50],["T_WHITESPACE"," ",50],".",["T_WHITESPACE"," ",50],["T_CONSTANT_ENCAPSED_STRING","'code'",50],["T_WHITESPACE"," ",50],".",["T_WHITESPACE"," ",50],["T_VARIABLE","$ds",50],["T_WHITESPACE"," ",50],".",["T_WHITESPACE"," ",50],["T_CONSTANT_ENCAPSED_STRING","'local'",50],";",["T_WHITESPACE","\n",50],["T_VARIABLE","$paths",51],"[","]",["T_WHITESPACE"," ",51],"=",["T_WHITESPACE"," ",51],["T_VARIABLE","$bp",51],["T_WHITESPACE"," ",51],".",["T_WHITESPACE"," ",51],["T_VARIABLE","$ds",51],["T_WHITESPACE"," ",51],".",["T_WHITESPACE"," ",51],["T_CONSTANT_ENCAPSED_STRING","'app'",51],["T_WHITESPACE"," ",51],".",["T_WHITESPACE"," ",51],["T_VARIABLE","$ds",51],["T_WHITESPACE"," ",51],".",["T_WHITESPACE"," ",51],["T_CONSTANT_ENCAPSED_STRING","'code'",51],["T_WHITESPACE"," ",51],".",["T_WHITESPACE"," ",51],["T_VARIABLE","$ds",51],["T_WHITESPACE"," ",51],".",["T_WHITESPACE"," ",51],["T_CONSTANT_ENCAPSED_STRING","'community'",51],";",["T_WHITESPACE","\n",51],["T_VARIABLE","$paths",52],"[","]",["T_WHITESPACE"," ",52],"=",["T_WHITESPACE"," ",52],["T_VARIABLE","$bp",52],["T_WHITESPACE"," ",52],".",["T_WHITESPACE"," ",52],["T_VARIABLE","$ds",52],["T_WHITESPACE"," ",52],".",["T_WHITESPACE"," ",52],["T_CONSTANT_ENCAPSED_STRING","'app'",52],["T_WHITESPACE"," ",52],".",["T_WHITESPACE"," ",52],["T_VARIABLE","$ds",52],["T_WHITESPACE"," ",52],".",["T_WHITESPACE"," ",52],["T_CONSTANT_ENCAPSED_STRING","'code'",52],["T_WHITESPACE"," ",52],".",["T_WHITESPACE"," ",52],["T_VARIABLE","$ds",52],["T_WHITESPACE"," ",52],".",["T_WHITESPACE"," ",52],["T_CONSTANT_ENCAPSED_STRING","'core'",52],";",["T_WHITESPACE","\n",52],["T_VARIABLE","$paths",53],"[","]",["T_WHITESPACE"," ",53],"=",["T_WHITESPACE"," ",53],["T_VARIABLE","$bp",53],["T_WHITESPACE"," ",53],".",["T_WHITESPACE"," ",53],["T_VARIABLE","$ds",53],["T_WHITESPACE"," ",53],".",["T_WHITESPACE"," ",53],["T_CONSTANT_ENCAPSED_STRING","'lib'",53],";",["T_WHITESPACE","\n\n",53],["T_VARIABLE","$appPath",55],["T_WHITESPACE"," ",55],"=",["T_WHITESPACE"," ",55],["T_STRING","implode",55],"(",["T_VARIABLE","$ps",55],",",["T_WHITESPACE"," ",55],["T_VARIABLE","$paths",55],")",";",["T_WHITESPACE","\n",55],["T_STRING","set_include_path",56],"(",["T_VARIABLE","$appPath",56],["T_WHITESPACE"," ",56],".",["T_WHITESPACE"," ",56],["T_VARIABLE","$ps",56],["T_WHITESPACE"," ",56],".",["T_WHITESPACE"," ",56],["T_STRING","get_include_path",56],"(",")",")",";",["T_WHITESPACE","\n\n",56],["T_INCLUDE_ONCE","include_once",58],["T_WHITESPACE"," ",58],["T_CONSTANT_ENCAPSED_STRING","'Mage\/Core\/functions.php'",58],";",["T_WHITESPACE","\n",58],["T_INCLUDE_ONCE","include_once",59],["T_WHITESPACE"," ",59],["T_CONSTANT_ENCAPSED_STRING","'Varien\/Autoload.php'",59],";",["T_WHITESPACE","\n\n",59],["T_STRING","Varien_Autoload",61],["T_DOUBLE_COLON","::",61],["T_STRING","register",61],"(",")",";",["T_WHITESPACE","\n\n",61],["T_VARIABLE","$varDirectory",63],["T_WHITESPACE"," ",63],"=",["T_WHITESPACE"," ",63],["T_VARIABLE","$bp",63],["T_WHITESPACE"," ",63],".",["T_WHITESPACE"," ",63],["T_VARIABLE","$ds",63],["T_WHITESPACE"," ",63],".",["T_WHITESPACE"," ",63],["T_STRING","Mage_Core_Model_Config_Options",63],["T_DOUBLE_COLON","::",63],["T_STRING","VAR_DIRECTORY",63],";",["T_WHITESPACE","\n\n",63],["T_VARIABLE","$configCacheFile",65],["T_WHITESPACE"," ",65],"=",["T_WHITESPACE"," ",65],["T_VARIABLE","$varDirectory",65],["T_WHITESPACE"," ",65],".",["T_WHITESPACE"," ",65],["T_VARIABLE","$ds",65],["T_WHITESPACE"," ",65],".",["T_WHITESPACE"," ",65],["T_CONSTANT_ENCAPSED_STRING","'resource_config.json'",65],";",["T_WHITESPACE","\n\n",65],["T_VARIABLE","$mediaDirectory",67],["T_WHITESPACE"," ",67],"=",["T_WHITESPACE"," ",67],["T_STRING","null",67],";",["T_WHITESPACE","\n",67],["T_VARIABLE","$allowedResources",68],["T_WHITESPACE"," ",68],"=",["T_WHITESPACE"," ",68],["T_ARRAY","array",68],"(",")",";",["T_WHITESPACE","\n\n",68],["T_IF","if",70],["T_WHITESPACE"," ",70],"(",["T_STRING","file_exists",70],"(",["T_VARIABLE","$configCacheFile",70],")",["T_WHITESPACE"," ",70],["T_BOOLEAN_AND","&&",70],["T_WHITESPACE"," ",70],["T_STRING","is_readable",70],"(",["T_VARIABLE","$configCacheFile",70],")",")",["T_WHITESPACE"," ",70],"{",["T_WHITESPACE","\n    ",70],["T_VARIABLE","$config",71],["T_WHITESPACE"," ",71],"=",["T_WHITESPACE"," ",71],["T_STRING","json_decode",71],"(",["T_STRING","file_get_contents",71],"(",["T_VARIABLE","$configCacheFile",71],")",",",["T_WHITESPACE"," ",71],["T_STRING","true",71],")",";",["T_WHITESPACE","\n\n    ",71],["T_COMMENT","\/\/checking update time\n",73],["T_WHITESPACE","    ",74],["T_IF","if",74],["T_WHITESPACE"," ",74],"(",["T_STRING","filemtime",74],"(",["T_VARIABLE","$configCacheFile",74],")",["T_WHITESPACE"," ",74],"+",["T_WHITESPACE"," ",74],["T_VARIABLE","$config",74],"[",["T_CONSTANT_ENCAPSED_STRING","'update_time'",74],"]",["T_WHITESPACE"," ",74],">",["T_WHITESPACE"," ",74],["T_STRING","time",74],"(",")",")",["T_WHITESPACE"," ",74],"{",["T_WHITESPACE","\n        ",74],["T_VARIABLE","$mediaDirectory",75],["T_WHITESPACE"," ",75],"=",["T_WHITESPACE"," ",75],["T_STRING","trim",75],"(",["T_STRING","str_replace",75],"(",["T_VARIABLE","$bp",75],["T_WHITESPACE"," ",75],".",["T_WHITESPACE"," ",75],["T_VARIABLE","$ds",75],",",["T_WHITESPACE"," ",75],["T_CONSTANT_ENCAPSED_STRING","''",75],",",["T_WHITESPACE"," ",75],["T_VARIABLE","$config",75],"[",["T_CONSTANT_ENCAPSED_STRING","'media_directory'",75],"]",")",",",["T_WHITESPACE"," ",75],["T_VARIABLE","$ds",75],")",";",["T_WHITESPACE","\n        ",75],["T_VARIABLE","$allowedResources",76],["T_WHITESPACE"," ",76],"=",["T_WHITESPACE"," ",76],["T_STRING","array_merge",76],"(",["T_VARIABLE","$allowedResources",76],",",["T_WHITESPACE"," ",76],["T_VARIABLE","$config",76],"[",["T_CONSTANT_ENCAPSED_STRING","'allowed_resources'",76],"]",")",";",["T_WHITESPACE","\n    ",76],"}",["T_WHITESPACE","\n",77],"}",["T_WHITESPACE","\n\n",78],["T_VARIABLE","$request",80],["T_WHITESPACE"," ",80],"=",["T_WHITESPACE"," ",80],["T_NEW","new",80],["T_WHITESPACE"," ",80],["T_STRING","Zend_Controller_Request_Http",80],"(",")",";",["T_WHITESPACE","\n\n",80],["T_VARIABLE","$pathInfo",82],["T_WHITESPACE"," ",82],"=",["T_WHITESPACE"," ",82],["T_STRING","str_replace",82],"(",["T_CONSTANT_ENCAPSED_STRING","'..'",82],",",["T_WHITESPACE"," ",82],["T_CONSTANT_ENCAPSED_STRING","''",82],",",["T_WHITESPACE"," ",82],["T_STRING","ltrim",82],"(",["T_VARIABLE","$request",82],["T_OBJECT_OPERATOR","->",82],["T_STRING","getPathInfo",82],"(",")",",",["T_WHITESPACE"," ",82],["T_CONSTANT_ENCAPSED_STRING","'\/'",82],")",")",";",["T_WHITESPACE","\n\n",82],["T_VARIABLE","$filePath",84],["T_WHITESPACE"," ",84],"=",["T_WHITESPACE"," ",84],["T_STRING","str_replace",84],"(",["T_CONSTANT_ENCAPSED_STRING","'\/'",84],",",["T_WHITESPACE"," ",84],["T_VARIABLE","$ds",84],",",["T_WHITESPACE"," ",84],["T_STRING","rtrim",84],"(",["T_VARIABLE","$bp",84],",",["T_WHITESPACE"," ",84],["T_VARIABLE","$ds",84],")",["T_WHITESPACE"," ",84],".",["T_WHITESPACE"," ",84],["T_VARIABLE","$ds",84],["T_WHITESPACE"," ",84],".",["T_WHITESPACE"," ",84],["T_VARIABLE","$pathInfo",84],")",";",["T_WHITESPACE","\n\n",84],["T_IF","if",86],["T_WHITESPACE"," ",86],"(",["T_VARIABLE","$mediaDirectory",86],")",["T_WHITESPACE"," ",86],"{",["T_WHITESPACE","\n    ",86],["T_IF","if",87],["T_WHITESPACE"," ",87],"(",["T_LNUMBER","0",87],["T_WHITESPACE"," ",87],["T_IS_NOT_IDENTICAL","!==",87],["T_WHITESPACE"," ",87],["T_STRING","stripos",87],"(",["T_VARIABLE","$pathInfo",87],",",["T_WHITESPACE"," ",87],["T_VARIABLE","$mediaDirectory",87],["T_WHITESPACE"," ",87],".",["T_WHITESPACE"," ",87],["T_CONSTANT_ENCAPSED_STRING","'\/'",87],")",["T_WHITESPACE"," ",87],["T_BOOLEAN_OR","||",87],["T_WHITESPACE"," ",87],["T_STRING","is_dir",87],"(",["T_VARIABLE","$filePath",87],")",")",["T_WHITESPACE"," ",87],"{",["T_WHITESPACE","\n        ",87],["T_STRING","sendNotFoundPage",88],"(",")",";",["T_WHITESPACE","\n    ",88],"}",["T_WHITESPACE","\n\n    ",89],["T_VARIABLE","$relativeFilename",91],["T_WHITESPACE"," ",91],"=",["T_WHITESPACE"," ",91],["T_STRING","str_replace",91],"(",["T_VARIABLE","$mediaDirectory",91],["T_WHITESPACE"," ",91],".",["T_WHITESPACE"," ",91],["T_CONSTANT_ENCAPSED_STRING","'\/'",91],",",["T_WHITESPACE"," ",91],["T_CONSTANT_ENCAPSED_STRING","''",91],",",["T_WHITESPACE"," ",91],["T_VARIABLE","$pathInfo",91],")",";",["T_WHITESPACE","\n    ",91],["T_STRING","checkResource",92],"(",["T_VARIABLE","$relativeFilename",92],",",["T_WHITESPACE"," ",92],["T_VARIABLE","$allowedResources",92],")",";",["T_WHITESPACE","\n    ",92],["T_STRING","sendFile",93],"(",["T_VARIABLE","$filePath",93],")",";",["T_WHITESPACE","\n",93],"}",["T_WHITESPACE","\n\n",94],["T_VARIABLE","$mageFilename",96],["T_WHITESPACE"," ",96],"=",["T_WHITESPACE"," ",96],["T_CONSTANT_ENCAPSED_STRING","'app\/Mage.php'",96],";",["T_WHITESPACE","\n\n",96],["T_IF","if",98],["T_WHITESPACE"," ",98],"(","!",["T_STRING","file_exists",98],"(",["T_VARIABLE","$mageFilename",98],")",")",["T_WHITESPACE"," ",98],"{",["T_WHITESPACE","\n    ",98],["T_ECHO","echo",99],["T_WHITESPACE"," ",99],["T_VARIABLE","$mageFilename",99],["T_WHITESPACE"," ",99],".",["T_WHITESPACE"," ",99],["T_CONSTANT_ENCAPSED_STRING","' was not found'",99],";",["T_WHITESPACE","\n",99],"}",["T_WHITESPACE","\n\n",100],["T_REQUIRE_ONCE","require_once",102],["T_WHITESPACE"," ",102],["T_VARIABLE","$mageFilename",102],";",["T_WHITESPACE","\n\n",102],["T_STRING","umask",104],"(",["T_LNUMBER","0",104],")",";",["T_WHITESPACE","\n\n",104],["T_COMMENT","\/* Store or website code *\/",106],["T_WHITESPACE","\n",106],["T_VARIABLE","$mageRunCode",107],["T_WHITESPACE"," ",107],"=",["T_WHITESPACE"," ",107],["T_ISSET","isset",107],"(",["T_VARIABLE","$_SERVER",107],"[",["T_CONSTANT_ENCAPSED_STRING","'MAGE_RUN_CODE'",107],"]",")",["T_WHITESPACE"," ",107],"?",["T_WHITESPACE"," ",107],["T_VARIABLE","$_SERVER",107],"[",["T_CONSTANT_ENCAPSED_STRING","'MAGE_RUN_CODE'",107],"]",["T_WHITESPACE"," ",107],":",["T_WHITESPACE"," ",107],["T_CONSTANT_ENCAPSED_STRING","''",107],";",["T_WHITESPACE","\n\n",107],["T_COMMENT","\/* Run store or run website *\/",109],["T_WHITESPACE","\n",109],["T_VARIABLE","$mageRunType",110],["T_WHITESPACE"," ",110],"=",["T_WHITESPACE"," ",110],["T_ISSET","isset",110],"(",["T_VARIABLE","$_SERVER",110],"[",["T_CONSTANT_ENCAPSED_STRING","'MAGE_RUN_TYPE'",110],"]",")",["T_WHITESPACE"," ",110],"?",["T_WHITESPACE"," ",110],["T_VARIABLE","$_SERVER",110],"[",["T_CONSTANT_ENCAPSED_STRING","'MAGE_RUN_TYPE'",110],"]",["T_WHITESPACE"," ",110],":",["T_WHITESPACE"," ",110],["T_CONSTANT_ENCAPSED_STRING","'store'",110],";",["T_WHITESPACE","\n\n",110],["T_IF","if",112],["T_WHITESPACE"," ",112],"(",["T_EMPTY","empty",112],"(",["T_VARIABLE","$mediaDirectory",112],")",")",["T_WHITESPACE"," ",112],"{",["T_WHITESPACE","\n    ",112],["T_STRING","Mage",113],["T_DOUBLE_COLON","::",113],["T_STRING","init",113],"(",["T_VARIABLE","$mageRunCode",113],",",["T_WHITESPACE"," ",113],["T_VARIABLE","$mageRunType",113],")",";",["T_WHITESPACE","\n",113],"}",["T_WHITESPACE"," ",114],["T_ELSE","else",114],["T_WHITESPACE"," ",114],"{",["T_WHITESPACE","\n    ",114],["T_STRING","Mage",115],["T_DOUBLE_COLON","::",115],["T_STRING","init",115],"(",["T_WHITESPACE","\n        ",115],["T_VARIABLE","$mageRunCode",116],",",["T_WHITESPACE","\n        ",116],["T_VARIABLE","$mageRunType",117],",",["T_WHITESPACE","\n        ",117],["T_ARRAY","array",118],"(",["T_CONSTANT_ENCAPSED_STRING","'cache'",118],["T_WHITESPACE"," ",118],["T_DOUBLE_ARROW","=>",118],["T_WHITESPACE"," ",118],["T_ARRAY","array",118],"(",["T_CONSTANT_ENCAPSED_STRING","'disallow_save'",118],["T_WHITESPACE"," ",118],["T_DOUBLE_ARROW","=>",118],["T_WHITESPACE"," ",118],["T_STRING","true",118],")",")",",",["T_WHITESPACE","\n        ",118],["T_ARRAY","array",119],"(",["T_CONSTANT_ENCAPSED_STRING","'Mage_Core'",119],")",["T_WHITESPACE","\n    ",119],")",";",["T_WHITESPACE","\n",120],"}",["T_WHITESPACE","\n\n",121],["T_IF","if",123],["T_WHITESPACE"," ",123],"(","!",["T_VARIABLE","$mediaDirectory",123],")",["T_WHITESPACE"," ",123],"{",["T_WHITESPACE","\n    ",123],["T_VARIABLE","$config",124],["T_WHITESPACE"," ",124],"=",["T_WHITESPACE"," ",124],["T_STRING","Mage_Core_Model_File_Storage",124],["T_DOUBLE_COLON","::",124],["T_STRING","getScriptConfig",124],"(",")",";",["T_WHITESPACE","\n    ",124],["T_VARIABLE","$mediaDirectory",125],["T_WHITESPACE"," ",125],"=",["T_WHITESPACE"," ",125],["T_STRING","str_replace",125],"(",["T_VARIABLE","$bp",125],["T_WHITESPACE"," ",125],".",["T_WHITESPACE"," ",125],["T_VARIABLE","$ds",125],",",["T_WHITESPACE"," ",125],["T_CONSTANT_ENCAPSED_STRING","''",125],",",["T_WHITESPACE"," ",125],["T_VARIABLE","$config",125],"[",["T_CONSTANT_ENCAPSED_STRING","'media_directory'",125],"]",")",";",["T_WHITESPACE","\n    ",125],["T_VARIABLE","$allowedResources",126],["T_WHITESPACE"," ",126],"=",["T_WHITESPACE"," ",126],["T_STRING","array_merge",126],"(",["T_VARIABLE","$allowedResources",126],",",["T_WHITESPACE"," ",126],["T_VARIABLE","$config",126],"[",["T_CONSTANT_ENCAPSED_STRING","'allowed_resources'",126],"]",")",";",["T_WHITESPACE","\n\n    ",126],["T_VARIABLE","$relativeFilename",128],["T_WHITESPACE"," ",128],"=",["T_WHITESPACE"," ",128],["T_STRING","str_replace",128],"(",["T_VARIABLE","$mediaDirectory",128],["T_WHITESPACE"," ",128],".",["T_WHITESPACE"," ",128],["T_CONSTANT_ENCAPSED_STRING","'\/'",128],",",["T_WHITESPACE"," ",128],["T_CONSTANT_ENCAPSED_STRING","''",128],",",["T_WHITESPACE"," ",128],["T_VARIABLE","$pathInfo",128],")",";",["T_WHITESPACE","\n\n    ",128],["T_VARIABLE","$fp",130],["T_WHITESPACE"," ",130],"=",["T_WHITESPACE"," ",130],["T_STRING","fopen",130],"(",["T_VARIABLE","$configCacheFile",130],",",["T_WHITESPACE"," ",130],["T_CONSTANT_ENCAPSED_STRING","'w'",130],")",";",["T_WHITESPACE","\n    ",130],["T_IF","if",131],["T_WHITESPACE"," ",131],"(",["T_STRING","flock",131],"(",["T_VARIABLE","$fp",131],",",["T_WHITESPACE"," ",131],["T_STRING","LOCK_EX",131],["T_WHITESPACE"," ",131],"|",["T_WHITESPACE"," ",131],["T_STRING","LOCK_NB",131],")",")",["T_WHITESPACE"," ",131],"{",["T_WHITESPACE","\n        ",131],["T_STRING","ftruncate",132],"(",["T_VARIABLE","$fp",132],",",["T_WHITESPACE"," ",132],["T_LNUMBER","0",132],")",";",["T_WHITESPACE","\n        ",132],["T_STRING","fwrite",133],"(",["T_VARIABLE","$fp",133],",",["T_WHITESPACE"," ",133],["T_STRING","json_encode",133],"(",["T_VARIABLE","$config",133],")",")",";",["T_WHITESPACE","\n    ",133],"}",["T_WHITESPACE","\n    ",134],["T_STRING","flock",135],"(",["T_VARIABLE","$fp",135],",",["T_WHITESPACE"," ",135],["T_STRING","LOCK_UN",135],")",";",["T_WHITESPACE","\n    ",135],["T_STRING","fclose",136],"(",["T_VARIABLE","$fp",136],")",";",["T_WHITESPACE","\n\n    ",136],["T_STRING","checkResource",138],"(",["T_VARIABLE","$relativeFilename",138],",",["T_WHITESPACE"," ",138],["T_VARIABLE","$allowedResources",138],")",";",["T_WHITESPACE","\n",138],"}",["T_WHITESPACE","\n\n",139],["T_IF","if",141],["T_WHITESPACE"," ",141],"(",["T_LNUMBER","0",141],["T_WHITESPACE"," ",141],["T_IS_NOT_IDENTICAL","!==",141],["T_WHITESPACE"," ",141],["T_STRING","stripos",141],"(",["T_VARIABLE","$pathInfo",141],",",["T_WHITESPACE"," ",141],["T_VARIABLE","$mediaDirectory",141],["T_WHITESPACE"," ",141],".",["T_WHITESPACE"," ",141],["T_CONSTANT_ENCAPSED_STRING","'\/'",141],")",")",["T_WHITESPACE"," ",141],"{",["T_WHITESPACE","\n    ",141],["T_STRING","sendNotFoundPage",142],"(",")",";",["T_WHITESPACE","\n",142],"}",["T_WHITESPACE","\n\n",143],["T_TRY","try",145],["T_WHITESPACE"," ",145],"{",["T_WHITESPACE","\n    ",145],["T_VARIABLE","$databaseFileSotrage",146],["T_WHITESPACE"," ",146],"=",["T_WHITESPACE"," ",146],["T_STRING","Mage",146],["T_DOUBLE_COLON","::",146],["T_STRING","getModel",146],"(",["T_CONSTANT_ENCAPSED_STRING","'core\/file_storage_database'",146],")",";",["T_WHITESPACE","\n    ",146],["T_VARIABLE","$databaseFileSotrage",147],["T_OBJECT_OPERATOR","->",147],["T_STRING","loadByFilename",147],"(",["T_VARIABLE","$relativeFilename",147],")",";",["T_WHITESPACE","\n",147],"}",["T_WHITESPACE"," ",148],["T_CATCH","catch",148],["T_WHITESPACE"," ",148],"(",["T_STRING","Exception",148],["T_WHITESPACE"," ",148],["T_VARIABLE","$e",148],")",["T_WHITESPACE"," ",148],"{",["T_WHITESPACE","\n",148],"}",["T_WHITESPACE","\n",149],["T_IF","if",150],["T_WHITESPACE"," ",150],"(",["T_VARIABLE","$databaseFileSotrage",150],["T_OBJECT_OPERATOR","->",150],["T_STRING","getId",150],"(",")",")",["T_WHITESPACE"," ",150],"{",["T_WHITESPACE","\n    ",150],["T_VARIABLE","$directory",151],["T_WHITESPACE"," ",151],"=",["T_WHITESPACE"," ",151],["T_STRING","dirname",151],"(",["T_VARIABLE","$filePath",151],")",";",["T_WHITESPACE","\n    ",151],["T_IF","if",152],["T_WHITESPACE"," ",152],"(","!",["T_STRING","is_dir",152],"(",["T_VARIABLE","$directory",152],")",")",["T_WHITESPACE"," ",152],"{",["T_WHITESPACE","\n        ",152],["T_STRING","mkdir",153],"(",["T_VARIABLE","$directory",153],",",["T_WHITESPACE"," ",153],["T_LNUMBER","0777",153],",",["T_WHITESPACE"," ",153],["T_STRING","true",153],")",";",["T_WHITESPACE","\n    ",153],"}",["T_WHITESPACE","\n\n    ",154],["T_VARIABLE","$fp",156],["T_WHITESPACE"," ",156],"=",["T_WHITESPACE"," ",156],["T_STRING","fopen",156],"(",["T_VARIABLE","$filePath",156],",",["T_WHITESPACE"," ",156],["T_CONSTANT_ENCAPSED_STRING","'w'",156],")",";",["T_WHITESPACE","\n    ",156],["T_IF","if",157],["T_WHITESPACE"," ",157],"(",["T_STRING","flock",157],"(",["T_VARIABLE","$fp",157],",",["T_WHITESPACE"," ",157],["T_STRING","LOCK_EX",157],["T_WHITESPACE"," ",157],"|",["T_WHITESPACE"," ",157],["T_STRING","LOCK_NB",157],")",")",["T_WHITESPACE"," ",157],"{",["T_WHITESPACE","\n        ",157],["T_STRING","ftruncate",158],"(",["T_VARIABLE","$fp",158],",",["T_WHITESPACE"," ",158],["T_LNUMBER","0",158],")",";",["T_WHITESPACE","\n        ",158],["T_STRING","fwrite",159],"(",["T_VARIABLE","$fp",159],",",["T_WHITESPACE"," ",159],["T_VARIABLE","$databaseFileSotrage",159],["T_OBJECT_OPERATOR","->",159],["T_STRING","getContent",159],"(",")",")",";",["T_WHITESPACE","\n    ",159],"}",["T_WHITESPACE","\n    ",160],["T_STRING","flock",161],"(",["T_VARIABLE","$fp",161],",",["T_WHITESPACE"," ",161],["T_STRING","LOCK_UN",161],")",";",["T_WHITESPACE","\n    ",161],["T_STRING","fclose",162],"(",["T_VARIABLE","$fp",162],")",";",["T_WHITESPACE","\n",162],"}",["T_WHITESPACE","\n\n",163],["T_STRING","sendFile",165],"(",["T_VARIABLE","$filePath",165],")",";",["T_WHITESPACE","\n",165],["T_STRING","sendNotFoundPage",166],"(",")",";",["T_WHITESPACE","\n\n",166],["T_DOC_COMMENT","\/**\n * Send 404\n *\/",168],["T_WHITESPACE","\n",170],["T_FUNCTION","function",171],["T_WHITESPACE"," ",171],["T_STRING","sendNotFoundPage",171],"(",")",["T_WHITESPACE","\n",171],"{",["T_WHITESPACE","\n    ",172],["T_STRING","header",173],"(",["T_CONSTANT_ENCAPSED_STRING","'HTTP\/1.0 404 Not Found'",173],")",";",["T_WHITESPACE","\n    ",173],["T_EXIT","exit",174],";",["T_WHITESPACE","\n",174],"}",["T_WHITESPACE","\n\n",175],["T_DOC_COMMENT","\/**\n * Check resource by whitelist\n *\n * @param string $resource\n * @param array $allowedResources\n *\/",177],["T_WHITESPACE","\n",182],["T_FUNCTION","function",183],["T_WHITESPACE"," ",183],["T_STRING","checkResource",183],"(",["T_VARIABLE","$resource",183],",",["T_WHITESPACE"," ",183],["T_ARRAY","array",183],["T_WHITESPACE"," ",183],["T_VARIABLE","$allowedResources",183],")",["T_WHITESPACE","\n",183],"{",["T_WHITESPACE","\n    ",184],["T_VARIABLE","$isResourceAllowed",185],["T_WHITESPACE"," ",185],"=",["T_WHITESPACE"," ",185],["T_STRING","false",185],";",["T_WHITESPACE","\n    ",185],["T_FOREACH","foreach",186],["T_WHITESPACE"," ",186],"(",["T_VARIABLE","$allowedResources",186],["T_WHITESPACE"," ",186],["T_AS","as",186],["T_WHITESPACE"," ",186],["T_VARIABLE","$allowedResource",186],")",["T_WHITESPACE"," ",186],"{",["T_WHITESPACE","\n        ",186],["T_IF","if",187],["T_WHITESPACE"," ",187],"(",["T_LNUMBER","0",187],["T_WHITESPACE"," ",187],["T_IS_IDENTICAL","===",187],["T_WHITESPACE"," ",187],["T_STRING","stripos",187],"(",["T_VARIABLE","$resource",187],",",["T_WHITESPACE"," ",187],["T_VARIABLE","$allowedResource",187],")",")",["T_WHITESPACE"," ",187],"{",["T_WHITESPACE","\n            ",187],["T_VARIABLE","$isResourceAllowed",188],["T_WHITESPACE"," ",188],"=",["T_WHITESPACE"," ",188],["T_STRING","true",188],";",["T_WHITESPACE","\n        ",188],"}",["T_WHITESPACE","\n    ",189],"}",["T_WHITESPACE","\n\n    ",190],["T_IF","if",192],["T_WHITESPACE"," ",192],"(","!",["T_VARIABLE","$isResourceAllowed",192],")",["T_WHITESPACE"," ",192],"{",["T_WHITESPACE","\n        ",192],["T_STRING","sendNotFoundPage",193],"(",")",";",["T_WHITESPACE","\n    ",193],"}",["T_WHITESPACE","\n",194],"}",["T_WHITESPACE","\n",195],["T_DOC_COMMENT","\/**\n * Send file to browser\n *\n * @param string $file\n *\/",196],["T_WHITESPACE","\n",200],["T_FUNCTION","function",201],["T_WHITESPACE"," ",201],["T_STRING","sendFile",201],"(",["T_VARIABLE","$file",201],")",["T_WHITESPACE","\n",201],"{",["T_WHITESPACE","\n    ",202],["T_IF","if",203],["T_WHITESPACE"," ",203],"(",["T_STRING","file_exists",203],"(",["T_VARIABLE","$file",203],")",["T_WHITESPACE"," ",203],["T_BOOLEAN_OR","||",203],["T_WHITESPACE"," ",203],["T_STRING","is_readable",203],"(",["T_VARIABLE","$file",203],")",")",["T_WHITESPACE"," ",203],"{",["T_WHITESPACE","\n        ",203],["T_VARIABLE","$transfer",204],["T_WHITESPACE"," ",204],"=",["T_WHITESPACE"," ",204],["T_NEW","new",204],["T_WHITESPACE"," ",204],["T_STRING","Varien_File_Transfer_Adapter_Http",204],"(",")",";",["T_WHITESPACE","\n        ",204],["T_VARIABLE","$transfer",205],["T_OBJECT_OPERATOR","->",205],["T_STRING","send",205],"(",["T_VARIABLE","$file",205],")",";",["T_WHITESPACE","\n        ",205],["T_EXIT","exit",206],";",["T_WHITESPACE","\n    ",206],"}",["T_WHITESPACE","\n",207],"}",["T_WHITESPACE","\n",208]]
[["T_OPEN_TAG","<?php\n",1],["T_DOC_COMMENT","\/**\n * Magento\n *\n * NOTICE OF LICENSE\n *\n * This source file is subject to the Open Software License (OSL 3.0)\n * that is bundled with this package in the file LICENSE.txt.\n * It is also available through the world-wide-web at this URL:\n * http:\/\/opensource.org\/licenses\/osl-3.0.php\n * If you did not receive a copy of the license and are unable to\n * obtain it through the world-wide-web, please send an email\n * to license@magento.com so we can send you a copy immediately.\n *\n * DISCLAIMER\n *\n * Do not edit or add to this file if you wish to upgrade Magento to newer\n * versions in the future. If you wish to customize Magento for your\n * needs please refer to http:\/\/www.magento.com for more information.\n *\n * @category    Mage\n * @package     Mage\n * @copyright  Copyright (c) 2006-2016 X.commerce, Inc. and affiliates (http:\/\/www.magento.com)\n * @license    http:\/\/opensource.org\/licenses\/osl-3.0.php  Open Software License (OSL 3.0)\n *\/",2],["T_WHITESPACE","\n\n",25],["T_DOC_COMMENT","\/**\n * Proxy script to combine and compress one or few files for JS and CSS\n *\n * Restricts access only to files under current script's folder\n *\n * @category    Mage\n * @package     Mage_Core\n * @author      Magento Core Team <core@magentocommerce.com>\n *\/",27],["T_WHITESPACE","\n\n",35],["T_COMMENT","\/\/ no files specified return 404\n",37],["T_IF","if",38],["T_WHITESPACE"," ",38],"(",["T_EMPTY","empty",38],"(",["T_VARIABLE","$_GET",38],"[",["T_CONSTANT_ENCAPSED_STRING","'f'",38],"]",")",")",["T_WHITESPACE"," ",38],"{",["T_WHITESPACE","\n    ",38],["T_STRING","header",39],"(",["T_CONSTANT_ENCAPSED_STRING","'HTTP\/1.0 404 Not Found'",39],")",";",["T_WHITESPACE","\n    ",39],["T_ECHO","echo",40],["T_WHITESPACE"," ",40],["T_CONSTANT_ENCAPSED_STRING","\"SYNTAX: index.php\/x.js?f=dir1\/file1.js,dir2\/file2.js\"",40],";",["T_WHITESPACE","\n    ",40],["T_EXIT","exit",41],";",["T_WHITESPACE","\n",41],"}",["T_WHITESPACE","\n\n",42],["T_COMMENT","\/\/ allow web server set content type automatically\n",44],["T_VARIABLE","$contentType",45],["T_WHITESPACE"," ",45],"=",["T_WHITESPACE"," ",45],["T_STRING","false",45],";",["T_WHITESPACE","\n\n",45],["T_COMMENT","\/\/ set custom content type if specified\n",47],["T_IF","if",48],["T_WHITESPACE"," ",48],"(",["T_ISSET","isset",48],"(",["T_VARIABLE","$_GET",48],"[",["T_CONSTANT_ENCAPSED_STRING","'c'",48],"]",")",")",["T_WHITESPACE"," ",48],"{",["T_WHITESPACE","\n    ",48],["T_VARIABLE","$contentType",49],["T_WHITESPACE"," ",49],"=",["T_WHITESPACE"," ",49],["T_VARIABLE","$_GET",49],"[",["T_CONSTANT_ENCAPSED_STRING","'c'",49],"]",["T_IS_IDENTICAL","===",49],["T_CONSTANT_ENCAPSED_STRING","'auto'",49],["T_WHITESPACE"," ",49],"?",["T_WHITESPACE"," ",49],["T_STRING","true",49],["T_WHITESPACE"," ",49],":",["T_WHITESPACE"," ",49],["T_VARIABLE","$_GET",49],"[",["T_CONSTANT_ENCAPSED_STRING","'c'",49],"]",";",["T_WHITESPACE","\n",49],"}",["T_WHITESPACE","\n\n",50],["T_COMMENT","\/\/ get files content\n",52],["T_VARIABLE","$files",53],["T_WHITESPACE"," ",53],"=",["T_WHITESPACE"," ",53],["T_STRING","is_array",53],"(",["T_VARIABLE","$_GET",53],"[",["T_CONSTANT_ENCAPSED_STRING","'f'",53],"]",")",["T_WHITESPACE"," ",53],"?",["T_WHITESPACE"," ",53],["T_VARIABLE","$_GET",53],"[",["T_CONSTANT_ENCAPSED_STRING","'f'",53],"]",["T_WHITESPACE"," ",53],":",["T_WHITESPACE"," ",53],["T_STRING","explode",53],"(",["T_CONSTANT_ENCAPSED_STRING","','",53],",",["T_WHITESPACE"," ",53],["T_VARIABLE","$_GET",53],"[",["T_CONSTANT_ENCAPSED_STRING","'f'",53],"]",")",";",["T_WHITESPACE","\n\n",53],["T_COMMENT","\/\/ set allowed content-type\n",55],["T_VARIABLE","$contentTypeAllowed",56],["T_WHITESPACE"," ",56],"=",["T_WHITESPACE"," ",56],["T_ARRAY","array",56],"(",["T_WHITESPACE","\n    ",56],["T_CONSTANT_ENCAPSED_STRING","'text\/javascript'",57],",",["T_WHITESPACE","\n    ",57],["T_CONSTANT_ENCAPSED_STRING","'text\/css'",58],",",["T_WHITESPACE","\n",58],["T_COMMENT","\/\/    'image\/gif',\n",59],["T_COMMENT","\/\/    'image\/png',\n",60],["T_COMMENT","\/\/    'image\/jpeg',\n",61],")",";",["T_WHITESPACE","\n",62],["T_COMMENT","\/\/ set allowed file extensions\n",63],["T_VARIABLE","$fileExtAllowed",64],["T_WHITESPACE","     ",64],"=",["T_WHITESPACE"," ",64],["T_ARRAY","array",64],"(",["T_WHITESPACE","\n    ",64],["T_CONSTANT_ENCAPSED_STRING","'js'",65],",",["T_WHITESPACE","\n    ",65],["T_CONSTANT_ENCAPSED_STRING","'css'",66],",",["T_WHITESPACE","\n",66],["T_COMMENT","\/\/    'gif',\n",67],["T_COMMENT","\/\/    'png',\n",68],["T_COMMENT","\/\/    'js'\n",69],")",";",["T_WHITESPACE","\n\n",70],["T_VARIABLE","$out",72],["T_WHITESPACE"," ",72],"=",["T_WHITESPACE"," ",72],["T_CONSTANT_ENCAPSED_STRING","''",72],";",["T_WHITESPACE","\n",72],["T_VARIABLE","$lastModified",73],["T_WHITESPACE"," ",73],"=",["T_WHITESPACE"," ",73],["T_LNUMBER","0",73],";",["T_WHITESPACE","\n",73],["T_FOREACH","foreach",74],["T_WHITESPACE"," ",74],"(",["T_VARIABLE","$files",74],["T_WHITESPACE"," ",74],["T_AS","as",74],["T_WHITESPACE"," ",74],["T_VARIABLE","$f",74],")",["T_WHITESPACE"," ",74],"{",["T_WHITESPACE","\n    ",74],["T_VARIABLE","$fileRealPath",75],["T_WHITESPACE"," ",75],"=",["T_WHITESPACE"," ",75],["T_STRING","realpath",75],"(",["T_VARIABLE","$f",75],")",";",["T_WHITESPACE","\n    ",75],["T_COMMENT","\/\/ check file path (security)\n",76],["T_WHITESPACE","    ",77],["T_IF","if",77],["T_WHITESPACE"," ",77],"(",["T_STRING","strpos",77],"(",["T_VARIABLE","$fileRealPath",77],",",["T_WHITESPACE"," ",77],["T_STRING","realpath",77],"(",["T_STRING","dirname",77],"(",["T_FILE","__FILE__",77],")",")",")",["T_WHITESPACE"," ",77],["T_IS_NOT_IDENTICAL","!==",77],["T_WHITESPACE"," ",77],["T_LNUMBER","0",77],")",["T_WHITESPACE"," ",77],"{",["T_WHITESPACE","\n        ",77],["T_CONTINUE","continue",78],";",["T_WHITESPACE","\n    ",78],"}",["T_WHITESPACE","\n\n    ",79],["T_VARIABLE","$fileExt",81],["T_WHITESPACE"," ",81],"=",["T_WHITESPACE"," ",81],["T_STRING","strtolower",81],"(",["T_STRING","pathinfo",81],"(",["T_VARIABLE","$fileRealPath",81],",",["T_WHITESPACE"," ",81],["T_STRING","PATHINFO_EXTENSION",81],")",")",";",["T_WHITESPACE","\n\n    ",81],["T_COMMENT","\/\/ check file extension\n",83],["T_WHITESPACE","    ",84],["T_IF","if",84],["T_WHITESPACE"," ",84],"(",["T_EMPTY","empty",84],"(",["T_VARIABLE","$fileExt",84],")",["T_WHITESPACE"," ",84],["T_BOOLEAN_OR","||",84],["T_WHITESPACE"," ",84],"!",["T_STRING","in_array",84],"(",["T_VARIABLE","$fileExt",84],",",["T_WHITESPACE"," ",84],["T_VARIABLE","$fileExtAllowed",84],")",")",["T_WHITESPACE"," ",84],"{",["T_WHITESPACE","\n        ",84],["T_CONTINUE","continue",85],";",["T_WHITESPACE","\n    ",85],"}",["T_WHITESPACE","\n\n    ",86],["T_COMMENT","\/\/ try automatically get content type if requested\n",88],["T_WHITESPACE","    ",89],["T_IF","if",89],["T_WHITESPACE"," ",89],"(",["T_VARIABLE","$contentType",89],["T_WHITESPACE"," ",89],["T_IS_IDENTICAL","===",89],["T_WHITESPACE"," ",89],["T_STRING","true",89],")",["T_WHITESPACE"," ",89],"{",["T_WHITESPACE","\n        ",89],["T_VARIABLE","$contentTypes",90],["T_WHITESPACE"," ",90],"=",["T_WHITESPACE"," ",90],["T_ARRAY","array",90],"(",["T_WHITESPACE","\n            ",90],["T_CONSTANT_ENCAPSED_STRING","'js'",91],["T_WHITESPACE"," ",91],["T_DOUBLE_ARROW","=>",91],["T_WHITESPACE"," ",91],["T_CONSTANT_ENCAPSED_STRING","'text\/javascript'",91],",",["T_WHITESPACE","\n            ",91],["T_CONSTANT_ENCAPSED_STRING","'css'",92],["T_WHITESPACE"," ",92],["T_DOUBLE_ARROW","=>",92],["T_WHITESPACE"," ",92],["T_CONSTANT_ENCAPSED_STRING","'text\/css'",92],",",["T_WHITESPACE","\n",92],["T_COMMENT","\/\/            'gif' => 'image\/gif',\n",93],["T_COMMENT","\/\/            'png' => 'image\/png',\n",94],["T_COMMENT","\/\/            'jpg' => 'image\/jpeg',\n",95],["T_WHITESPACE","        ",96],")",";",["T_WHITESPACE","\n        ",96],["T_IF","if",97],["T_WHITESPACE"," ",97],"(",["T_EMPTY","empty",97],"(",["T_VARIABLE","$contentTypes",97],"[",["T_VARIABLE","$fileExt",97],"]",")",")",["T_WHITESPACE"," ",97],"{",["T_WHITESPACE"," ",97],["T_COMMENT","\/\/ security\n",97],["T_WHITESPACE","            ",98],["T_CONTINUE","continue",98],";",["T_WHITESPACE","\n        ",98],"}",["T_WHITESPACE","\n        ",99],["T_VARIABLE","$contentType",100],["T_WHITESPACE"," ",100],"=",["T_WHITESPACE"," ",100],"!",["T_EMPTY","empty",100],"(",["T_VARIABLE","$contentTypes",100],"[",["T_VARIABLE","$fileExt",100],"]",")",["T_WHITESPACE"," ",100],"?",["T_WHITESPACE"," ",100],["T_VARIABLE","$contentTypes",100],"[",["T_VARIABLE","$fileExt",100],"]",["T_WHITESPACE"," ",100],":",["T_WHITESPACE"," ",100],["T_STRING","false",100],";",["T_WHITESPACE","\n    ",100],"}",["T_WHITESPACE","\n\n    ",101],["T_COMMENT","\/\/ append file contents\n",103],["T_WHITESPACE","    ",104],["T_COMMENT","\/\/ we must have blank line at the end of all files but if somebody forget to add it\n",104],["T_WHITESPACE","    ",105],["T_COMMENT","\/\/ we need add it here\n",105],["T_WHITESPACE","    ",106],["T_VARIABLE","$out",106],["T_WHITESPACE"," ",106],["T_CONCAT_EQUAL",".=",106],["T_WHITESPACE"," ",106],["T_STRING","file_get_contents",106],"(",["T_VARIABLE","$fileRealPath",106],")",["T_WHITESPACE"," ",106],".",["T_WHITESPACE"," ",106],["T_CONSTANT_ENCAPSED_STRING","\"\\n\"",106],";",["T_WHITESPACE","\n    ",106],["T_VARIABLE","$lastModified",107],["T_WHITESPACE"," ",107],"=",["T_WHITESPACE"," ",107],["T_STRING","max",107],"(",["T_VARIABLE","$lastModified",107],",",["T_WHITESPACE"," ",107],["T_STRING","filemtime",107],"(",["T_VARIABLE","$fileRealPath",107],")",")",";",["T_WHITESPACE","\n",107],"}",["T_WHITESPACE","\n\n",108],["T_COMMENT","\/\/checking if client have older copy then we have on server\n",110],["T_IF","if",111],["T_WHITESPACE"," ",111],"(",["T_STRING","function_exists",111],"(",["T_CONSTANT_ENCAPSED_STRING","'date_default_timezone_set'",111],")",")",["T_WHITESPACE"," ",111],"{",["T_WHITESPACE","\n    ",111],["T_STRING","date_default_timezone_set",112],"(",["T_CONSTANT_ENCAPSED_STRING","'UTC'",112],")",";",["T_WHITESPACE","\n",112],"}",["T_WHITESPACE","\n",113],["T_IF","if",114],["T_WHITESPACE"," ",114],"(",["T_ISSET","isset",114],"(",["T_VARIABLE","$_SERVER",114],"[",["T_CONSTANT_ENCAPSED_STRING","'HTTP_IF_MODIFIED_SINCE'",114],"]",")",["T_WHITESPACE"," ",114],["T_BOOLEAN_AND","&&",114],["T_WHITESPACE"," ",114],["T_STRING","strtotime",114],"(",["T_VARIABLE","$_SERVER",114],"[",["T_CONSTANT_ENCAPSED_STRING","'HTTP_IF_MODIFIED_SINCE'",114],"]",")",["T_WHITESPACE"," ",114],["T_IS_GREATER_OR_EQUAL",">=",114],["T_WHITESPACE"," ",114],["T_VARIABLE","$lastModified",114],")",["T_WHITESPACE"," ",114],"{",["T_WHITESPACE","\n    ",114],["T_STRING","header",115],"(",["T_CONSTANT_ENCAPSED_STRING","\"HTTP\/1.1 304 Not Modified\"",115],")",";",["T_WHITESPACE","\n    ",115],["T_EXIT","exit",116],";",["T_WHITESPACE","\n",116],"}",["T_WHITESPACE","\n\n",117],["T_COMMENT","\/\/ last modified is the max mtime for loaded files\n",119],["T_STRING","header",120],"(",["T_CONSTANT_ENCAPSED_STRING","'Cache-Control: must-revalidate'",120],")",";",["T_WHITESPACE","\n",120],["T_STRING","header",121],"(",["T_CONSTANT_ENCAPSED_STRING","'Last-modified: '",121],["T_WHITESPACE"," ",121],".",["T_WHITESPACE"," ",121],["T_STRING","gmdate",121],"(",["T_CONSTANT_ENCAPSED_STRING","'r'",121],",",["T_WHITESPACE"," ",121],["T_VARIABLE","$lastModified",121],")",")",";",["T_WHITESPACE","\n\n",121],["T_COMMENT","\/\/ optional custom content type, can be emulated by index.php\/x.js or x.css\n",123],["T_IF","if",124],["T_WHITESPACE"," ",124],"(",["T_STRING","is_string",124],"(",["T_VARIABLE","$contentType",124],")",["T_WHITESPACE"," ",124],["T_BOOLEAN_AND","&&",124],["T_WHITESPACE"," ",124],["T_STRING","in_array",124],"(",["T_VARIABLE","$contentType",124],",",["T_WHITESPACE"," ",124],["T_VARIABLE","$contentTypeAllowed",124],")",")",["T_WHITESPACE"," ",124],"{",["T_WHITESPACE","\n    ",124],["T_STRING","header",125],"(",["T_CONSTANT_ENCAPSED_STRING","'Content-type: '",125],".",["T_VARIABLE","$contentType",125],")",";",["T_WHITESPACE","\n",125],"}",["T_WHITESPACE","\n\n",126],["T_COMMENT","\/\/ remove spaces, default on\n",128],["T_IF","if",129],["T_WHITESPACE"," ",129],"(","!","(",["T_ISSET","isset",129],"(",["T_VARIABLE","$_GET",129],"[",["T_CONSTANT_ENCAPSED_STRING","'s'",129],"]",")",["T_WHITESPACE"," ",129],["T_BOOLEAN_AND","&&",129],["T_WHITESPACE"," ",129],"!",["T_VARIABLE","$_GET",129],"[",["T_CONSTANT_ENCAPSED_STRING","'s'",129],"]",")",")",["T_WHITESPACE"," ",129],"{",["T_WHITESPACE","\n    ",129],["T_VARIABLE","$out",130],["T_WHITESPACE"," ",130],"=",["T_WHITESPACE"," ",130],["T_STRING","preg_replace",130],"(",["T_CONSTANT_ENCAPSED_STRING","'#[ \\t]+#'",130],",",["T_WHITESPACE"," ",130],["T_CONSTANT_ENCAPSED_STRING","' '",130],",",["T_WHITESPACE"," ",130],["T_VARIABLE","$out",130],")",";",["T_WHITESPACE","\n",130],"}",["T_WHITESPACE","\n\n",131],["T_COMMENT","\/\/ use gzip or deflate, use this if not enabled in .htaccess, default on\n",133],["T_COMMENT","\/\/if (!(isset($_GET['z']) && !$_GET['z'])) {\n",134],["T_COMMENT","\/\/    ini_set('zlib.output_compression', 1);\n",135],["T_COMMENT","\/\/}\n",136],["T_WHITESPACE","\n",137],["T_COMMENT","\/\/ add Expires header if not disabled, default 1 year\n",138],["T_IF","if",139],["T_WHITESPACE"," ",139],"(","!","(",["T_ISSET","isset",139],"(",["T_VARIABLE","$_GET",139],"[",["T_CONSTANT_ENCAPSED_STRING","'e'",139],"]",")",["T_WHITESPACE"," ",139],["T_BOOLEAN_AND","&&",139],["T_WHITESPACE"," ",139],["T_VARIABLE","$_GET",139],"[",["T_CONSTANT_ENCAPSED_STRING","'e'",139],"]",["T_IS_IDENTICAL","===",139],["T_CONSTANT_ENCAPSED_STRING","'no'",139],")",")",["T_WHITESPACE"," ",139],"{",["T_WHITESPACE","\n    ",139],["T_VARIABLE","$time",140],["T_WHITESPACE"," ",140],"=",["T_WHITESPACE"," ",140],["T_STRING","time",140],"(",")","+","(",["T_ISSET","isset",140],"(",["T_VARIABLE","$_GET",140],"[",["T_CONSTANT_ENCAPSED_STRING","'e'",140],"]",")",["T_WHITESPACE"," ",140],"?",["T_WHITESPACE"," ",140],["T_VARIABLE","$_GET",140],"[",["T_CONSTANT_ENCAPSED_STRING","'e'",140],"]",["T_WHITESPACE"," ",140],":",["T_WHITESPACE"," ",140],["T_LNUMBER","365",140],")","*",["T_LNUMBER","86400",140],";",["T_WHITESPACE","\n    ",140],["T_STRING","header",141],"(",["T_CONSTANT_ENCAPSED_STRING","'Expires: '",141],".",["T_STRING","gmdate",141],"(",["T_CONSTANT_ENCAPSED_STRING","'r'",141],",",["T_WHITESPACE"," ",141],["T_VARIABLE","$time",141],")",")",";",["T_WHITESPACE","\n",141],"}",["T_WHITESPACE","\n\n",142],["T_ECHO","echo",144],["T_WHITESPACE"," ",144],["T_VARIABLE","$out",144],";",["T_WHITESPACE","\n",144]]
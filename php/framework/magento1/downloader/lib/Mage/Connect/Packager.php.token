[["T_OPEN_TAG","<?php\n",1],["T_DOC_COMMENT","\/**\n * Magento\n *\n * NOTICE OF LICENSE\n *\n * This source file is subject to the Open Software License (OSL 3.0)\n * that is bundled with this package in the file LICENSE.txt.\n * It is also available through the world-wide-web at this URL:\n * http:\/\/opensource.org\/licenses\/osl-3.0.php\n * If you did not receive a copy of the license and are unable to\n * obtain it through the world-wide-web, please send an email\n * to license@magento.com so we can send you a copy immediately.\n *\n * DISCLAIMER\n *\n * Do not edit or add to this file if you wish to upgrade Magento to newer\n * versions in the future. If you wish to customize Magento for your\n * needs please refer to http:\/\/www.magento.com for more information.\n *\n * @category    Mage\n * @package     Mage_Connect\n * @copyright  Copyright (c) 2006-2016 X.commerce, Inc. and affiliates (http:\/\/www.magento.com)\n * @license    http:\/\/opensource.org\/licenses\/osl-3.0.php  Open Software License (OSL 3.0)\n *\/",2],["T_WHITESPACE","\n\n",25],["T_DOC_COMMENT","\/**\n * Class to manipulate with packages\n *\n * @category    Mage\n * @package     Mage_Connect\n * @author      Magento Core Team <core@magentocommerce.com>\n *\/",27],["T_WHITESPACE","\n",33],["T_CLASS","class",34],["T_WHITESPACE"," ",34],["T_STRING","Mage_Connect_Packager",34],["T_WHITESPACE","\n",34],"{",["T_WHITESPACE","\n    ",35],["T_DOC_COMMENT","\/**\n     * Default Config File name\n     *\/",36],["T_WHITESPACE","\n    ",38],["T_CONST","const",39],["T_WHITESPACE"," ",39],["T_STRING","CONFIG_FILE_NAME",39],["T_WHITESPACE"," ",39],"=",["T_WHITESPACE"," ",39],["T_CONSTANT_ENCAPSED_STRING","'downloader\/connect.cfg'",39],";",["T_WHITESPACE","\n    ",39],["T_DOC_COMMENT","\/**\n     * Default Cache Config File name\n     *\/",40],["T_WHITESPACE","\n    ",42],["T_CONST","const",43],["T_WHITESPACE"," ",43],["T_STRING","CACHE_FILE_NAME",43],["T_WHITESPACE"," ",43],"=",["T_WHITESPACE"," ",43],["T_CONSTANT_ENCAPSED_STRING","'downloader\/cache.cfg'",43],";",["T_WHITESPACE","\n\n    ",43],["T_DOC_COMMENT","\/**\n     * Install states of package\n     *\/",45],["T_WHITESPACE","\n    ",47],["T_CONST","const",48],["T_WHITESPACE"," ",48],["T_STRING","INSTALL_STATE_INSTALL",48],["T_WHITESPACE"," ",48],"=",["T_WHITESPACE"," ",48],["T_CONSTANT_ENCAPSED_STRING","'install'",48],";",["T_WHITESPACE","\n    ",48],["T_CONST","const",49],["T_WHITESPACE"," ",49],["T_STRING","INSTALL_STATE_UPGRADE",49],["T_WHITESPACE"," ",49],"=",["T_WHITESPACE"," ",49],["T_CONSTANT_ENCAPSED_STRING","'upgrade'",49],";",["T_WHITESPACE","\n    ",49],["T_CONST","const",50],["T_WHITESPACE"," ",50],["T_STRING","INSTALL_STATE_WRONG_VERSION",50],["T_WHITESPACE"," ",50],"=",["T_WHITESPACE"," ",50],["T_CONSTANT_ENCAPSED_STRING","'wrong_version'",50],";",["T_WHITESPACE","\n    ",50],["T_CONST","const",51],["T_WHITESPACE"," ",51],["T_STRING","INSTALL_STATE_ALREADY_INSTALLED",51],["T_WHITESPACE"," ",51],"=",["T_WHITESPACE"," ",51],["T_CONSTANT_ENCAPSED_STRING","'already_installed'",51],";",["T_WHITESPACE","\n    ",51],["T_CONST","const",52],["T_WHITESPACE"," ",52],["T_STRING","INSTALL_STATE_INCOMPATIBLE",52],["T_WHITESPACE"," ",52],"=",["T_WHITESPACE"," ",52],["T_CONSTANT_ENCAPSED_STRING","'incompatible'",52],";",["T_WHITESPACE","\n\n    ",52],["T_DOC_COMMENT","\/**\n     * Install states messages\n     *\n     * @var array\n     *\/",54],["T_WHITESPACE","\n    ",58],["T_PROTECTED","protected",59],["T_WHITESPACE","  ",59],["T_VARIABLE","$installStates",59],["T_WHITESPACE"," ",59],"=",["T_WHITESPACE"," ",59],["T_ARRAY","array",59],"(",["T_WHITESPACE","\n                    ",59],["T_STRING","self",60],["T_DOUBLE_COLON","::",60],["T_STRING","INSTALL_STATE_INSTALL",60],["T_WHITESPACE"," ",60],["T_DOUBLE_ARROW","=>",60],["T_WHITESPACE"," ",60],["T_CONSTANT_ENCAPSED_STRING","'Ready to install'",60],",",["T_WHITESPACE","\n                    ",60],["T_STRING","self",61],["T_DOUBLE_COLON","::",61],["T_STRING","INSTALL_STATE_UPGRADE",61],["T_WHITESPACE"," ",61],["T_DOUBLE_ARROW","=>",61],["T_WHITESPACE"," ",61],["T_CONSTANT_ENCAPSED_STRING","'Ready to upgrade'",61],",",["T_WHITESPACE","\n                    ",61],["T_STRING","self",62],["T_DOUBLE_COLON","::",62],["T_STRING","INSTALL_STATE_ALREADY_INSTALLED",62],["T_WHITESPACE"," ",62],["T_DOUBLE_ARROW","=>",62],["T_WHITESPACE"," ",62],["T_CONSTANT_ENCAPSED_STRING","'Already installed'",62],",",["T_WHITESPACE","\n                    ",62],["T_STRING","self",63],["T_DOUBLE_COLON","::",63],["T_STRING","INSTALL_STATE_WRONG_VERSION",63],["T_WHITESPACE"," ",63],["T_DOUBLE_ARROW","=>",63],["T_WHITESPACE"," ",63],["T_CONSTANT_ENCAPSED_STRING","'Wrong version'",63],",",["T_WHITESPACE","\n                ",63],")",";",["T_WHITESPACE","\n\n    ",64],["T_DOC_COMMENT","\/**\n     * Archiver object\n     * @var Mage_Archive\n     *\/",66],["T_WHITESPACE","\n    ",69],["T_PROTECTED","protected",70],["T_WHITESPACE"," ",70],["T_VARIABLE","$_archiver",70],["T_WHITESPACE"," ",70],"=",["T_WHITESPACE"," ",70],["T_STRING","null",70],";",["T_WHITESPACE","\n\n    ",70],["T_DOC_COMMENT","\/**\n     * HTTP Client (Curl\/Socket etc)\n     * @var Mage_HTTP_IClient\n     *\/",72],["T_WHITESPACE","\n    ",75],["T_PROTECTED","protected",76],["T_WHITESPACE"," ",76],["T_VARIABLE","$_http",76],["T_WHITESPACE"," ",76],"=",["T_WHITESPACE"," ",76],["T_STRING","null",76],";",["T_WHITESPACE","\n\n    ",76],["T_DOC_COMMENT","\/**\n     * Get Archiver object\n     *\n     * @return Mage_Archive\n     *\/",78],["T_WHITESPACE","\n    ",82],["T_PUBLIC","public",83],["T_WHITESPACE"," ",83],["T_FUNCTION","function",83],["T_WHITESPACE"," ",83],["T_STRING","getArchiver",83],"(",")",["T_WHITESPACE","\n    ",83],"{",["T_WHITESPACE","\n        ",84],["T_IF","if",85],"(",["T_STRING","is_null",85],"(",["T_VARIABLE","$this",85],["T_OBJECT_OPERATOR","->",85],["T_STRING","_archiver",85],")",")",["T_WHITESPACE"," ",85],"{",["T_WHITESPACE","\n            ",85],["T_VARIABLE","$this",86],["T_OBJECT_OPERATOR","->",86],["T_STRING","_archiver",86],["T_WHITESPACE"," ",86],"=",["T_WHITESPACE"," ",86],["T_NEW","new",86],["T_WHITESPACE"," ",86],["T_STRING","Mage_Archive",86],"(",")",";",["T_WHITESPACE","\n        ",86],"}",["T_WHITESPACE","\n        ",87],["T_RETURN","return",88],["T_WHITESPACE"," ",88],["T_VARIABLE","$this",88],["T_OBJECT_OPERATOR","->",88],["T_STRING","_archiver",88],";",["T_WHITESPACE","\n    ",88],"}",["T_WHITESPACE","\n\n    ",89],["T_DOC_COMMENT","\/**\n     * Returns HTTP Client\n     * @return Mage_HTTP_IClient|null\n     *\/",91],["T_WHITESPACE","\n    ",94],["T_PUBLIC","public",95],["T_WHITESPACE"," ",95],["T_FUNCTION","function",95],["T_WHITESPACE"," ",95],["T_STRING","getDownloader",95],"(",")",["T_WHITESPACE","\n    ",95],"{",["T_WHITESPACE","\n        ",96],["T_IF","if",97],"(",["T_STRING","is_null",97],"(",["T_VARIABLE","$this",97],["T_OBJECT_OPERATOR","->",97],["T_STRING","_http",97],")",")",["T_WHITESPACE"," ",97],"{",["T_WHITESPACE","\n            ",97],["T_VARIABLE","$this",98],["T_OBJECT_OPERATOR","->",98],["T_STRING","_http",98],["T_WHITESPACE"," ",98],"=",["T_WHITESPACE"," ",98],["T_STRING","Mage_HTTP_Client",98],["T_DOUBLE_COLON","::",98],["T_STRING","getInstance",98],"(",")",";",["T_WHITESPACE","\n        ",98],"}",["T_WHITESPACE","\n        ",99],["T_RETURN","return",100],["T_WHITESPACE"," ",100],["T_VARIABLE","$this",100],["T_OBJECT_OPERATOR","->",100],["T_STRING","_http",100],";",["T_WHITESPACE","\n    ",100],"}",["T_WHITESPACE","\n\n    ",101],["T_DOC_COMMENT","\/**\n     * Get config data and cache config data remotely\n     *\n     * @param string $ftpString\n     * @return array\n     *\/",103],["T_WHITESPACE","\n    ",108],["T_PUBLIC","public",109],["T_WHITESPACE"," ",109],["T_FUNCTION","function",109],["T_WHITESPACE"," ",109],["T_STRING","getRemoteConf",109],"(",["T_VARIABLE","$ftpString",109],")",["T_WHITESPACE","\n    ",109],"{",["T_WHITESPACE","\n        ",110],["T_VARIABLE","$ftpObj",111],["T_WHITESPACE"," ",111],"=",["T_WHITESPACE"," ",111],["T_NEW","new",111],["T_WHITESPACE"," ",111],["T_STRING","Mage_Connect_Ftp",111],"(",")",";",["T_WHITESPACE","\n        ",111],["T_VARIABLE","$ftpObj",112],["T_OBJECT_OPERATOR","->",112],["T_STRING","connect",112],"(",["T_VARIABLE","$ftpString",112],")",";",["T_WHITESPACE","\n        ",112],["T_VARIABLE","$cfgFile",113],["T_WHITESPACE"," ",113],"=",["T_WHITESPACE"," ",113],["T_STRING","self",113],["T_DOUBLE_COLON","::",113],["T_STRING","CONFIG_FILE_NAME",113],";",["T_WHITESPACE","\n        ",113],["T_VARIABLE","$cacheFile",114],["T_WHITESPACE"," ",114],"=",["T_WHITESPACE"," ",114],["T_STRING","self",114],["T_DOUBLE_COLON","::",114],["T_STRING","CACHE_FILE_NAME",114],";",["T_WHITESPACE","\n\n        ",114],["T_VARIABLE","$wd",116],["T_WHITESPACE"," ",116],"=",["T_WHITESPACE"," ",116],["T_VARIABLE","$ftpObj",116],["T_OBJECT_OPERATOR","->",116],["T_STRING","getcwd",116],"(",")",";",["T_WHITESPACE","\n\n        ",116],["T_VARIABLE","$remoteConfigExists",118],["T_WHITESPACE"," ",118],"=",["T_WHITESPACE"," ",118],["T_VARIABLE","$ftpObj",118],["T_OBJECT_OPERATOR","->",118],["T_STRING","fileExists",118],"(",["T_VARIABLE","$cfgFile",118],")",";",["T_WHITESPACE","\n        ",118],["T_VARIABLE","$tempConfigFile",119],["T_WHITESPACE"," ",119],"=",["T_WHITESPACE"," ",119],["T_STRING","tempnam",119],"(",["T_STRING","sys_get_temp_dir",119],"(",")",",",["T_CONSTANT_ENCAPSED_STRING","'conf'",119],")",";",["T_WHITESPACE","\n        ",119],["T_IF","if",120],"(","!",["T_VARIABLE","$remoteConfigExists",120],")",["T_WHITESPACE"," ",120],"{",["T_WHITESPACE","\n            ",120],["T_VARIABLE","$remoteCfg",121],["T_WHITESPACE"," ",121],"=",["T_WHITESPACE"," ",121],["T_NEW","new",121],["T_WHITESPACE"," ",121],["T_STRING","Mage_Connect_Config",121],"(",["T_VARIABLE","$tempConfigFile",121],")",";",["T_WHITESPACE","\n            ",121],["T_VARIABLE","$remoteCfg",122],["T_OBJECT_OPERATOR","->",122],["T_STRING","store",122],"(",")",";",["T_WHITESPACE","\n            ",122],["T_VARIABLE","$ftpObj",123],["T_OBJECT_OPERATOR","->",123],["T_STRING","upload",123],"(",["T_VARIABLE","$cfgFile",123],",",["T_WHITESPACE"," ",123],["T_VARIABLE","$tempConfigFile",123],")",";",["T_WHITESPACE","\n        ",123],"}",["T_WHITESPACE"," ",124],["T_ELSE","else",124],["T_WHITESPACE"," ",124],"{",["T_WHITESPACE","\n            ",124],["T_VARIABLE","$ftpObj",125],["T_OBJECT_OPERATOR","->",125],["T_STRING","get",125],"(",["T_VARIABLE","$tempConfigFile",125],",",["T_WHITESPACE"," ",125],["T_VARIABLE","$cfgFile",125],")",";",["T_WHITESPACE","\n            ",125],["T_VARIABLE","$remoteCfg",126],["T_WHITESPACE"," ",126],"=",["T_WHITESPACE"," ",126],["T_NEW","new",126],["T_WHITESPACE"," ",126],["T_STRING","Mage_Connect_Config",126],"(",["T_VARIABLE","$tempConfigFile",126],")",";",["T_WHITESPACE","\n        ",126],"}",["T_WHITESPACE","\n\n        ",127],["T_VARIABLE","$ftpObj",129],["T_OBJECT_OPERATOR","->",129],["T_STRING","chdir",129],"(",["T_VARIABLE","$wd",129],")",";",["T_WHITESPACE","\n\n        ",129],["T_VARIABLE","$remoteCacheExists",131],["T_WHITESPACE"," ",131],"=",["T_WHITESPACE"," ",131],["T_VARIABLE","$ftpObj",131],["T_OBJECT_OPERATOR","->",131],["T_STRING","fileExists",131],"(",["T_VARIABLE","$cacheFile",131],")",";",["T_WHITESPACE","\n        ",131],["T_VARIABLE","$tempCacheFile",132],["T_WHITESPACE"," ",132],"=",["T_WHITESPACE"," ",132],["T_STRING","tempnam",132],"(",["T_STRING","sys_get_temp_dir",132],"(",")",",",["T_CONSTANT_ENCAPSED_STRING","'cache'",132],")",";",["T_WHITESPACE","\n\n        ",132],["T_IF","if",134],"(","!",["T_VARIABLE","$remoteCacheExists",134],")",["T_WHITESPACE"," ",134],"{",["T_WHITESPACE","\n            ",134],["T_VARIABLE","$remoteCache",135],["T_WHITESPACE"," ",135],"=",["T_WHITESPACE"," ",135],["T_NEW","new",135],["T_WHITESPACE"," ",135],["T_STRING","Mage_Connect_Singleconfig",135],"(",["T_VARIABLE","$tempCacheFile",135],")",";",["T_WHITESPACE","\n            ",135],["T_VARIABLE","$remoteCache",136],["T_OBJECT_OPERATOR","->",136],["T_STRING","clear",136],"(",")",";",["T_WHITESPACE","\n            ",136],["T_VARIABLE","$ftpObj",137],["T_OBJECT_OPERATOR","->",137],["T_STRING","upload",137],"(",["T_VARIABLE","$cacheFile",137],",",["T_WHITESPACE"," ",137],["T_VARIABLE","$tempCacheFile",137],")",";",["T_WHITESPACE","\n        ",137],"}",["T_WHITESPACE"," ",138],["T_ELSE","else",138],["T_WHITESPACE"," ",138],"{",["T_WHITESPACE","\n            ",138],["T_VARIABLE","$ftpObj",139],["T_OBJECT_OPERATOR","->",139],["T_STRING","get",139],"(",["T_VARIABLE","$tempCacheFile",139],",",["T_WHITESPACE"," ",139],["T_VARIABLE","$cacheFile",139],")",";",["T_WHITESPACE","\n            ",139],["T_VARIABLE","$remoteCache",140],["T_WHITESPACE"," ",140],"=",["T_WHITESPACE"," ",140],["T_NEW","new",140],["T_WHITESPACE"," ",140],["T_STRING","Mage_Connect_Singleconfig",140],"(",["T_VARIABLE","$tempCacheFile",140],")",";",["T_WHITESPACE","\n        ",140],"}",["T_WHITESPACE","\n        ",141],["T_VARIABLE","$ftpObj",142],["T_OBJECT_OPERATOR","->",142],["T_STRING","chdir",142],"(",["T_VARIABLE","$wd",142],")",";",["T_WHITESPACE","\n        ",142],["T_RETURN","return",143],["T_WHITESPACE"," ",143],["T_ARRAY","array",143],"(",["T_VARIABLE","$remoteCache",143],",",["T_WHITESPACE"," ",143],["T_VARIABLE","$remoteCfg",143],",",["T_WHITESPACE"," ",143],["T_VARIABLE","$ftpObj",143],")",";",["T_WHITESPACE","\n    ",143],"}",["T_WHITESPACE","\n\n    ",144],["T_DOC_COMMENT","\/**\n     * Get Cache config data remotely\n     *\n     * @param string $ftpString\n     * @return array\n     *\/",146],["T_WHITESPACE","\n    ",151],["T_PUBLIC","public",152],["T_WHITESPACE"," ",152],["T_FUNCTION","function",152],["T_WHITESPACE"," ",152],["T_STRING","getRemoteCache",152],"(",["T_VARIABLE","$ftpString",152],")",["T_WHITESPACE","\n    ",152],"{",["T_WHITESPACE","\n\n        ",153],["T_VARIABLE","$ftpObj",155],["T_WHITESPACE"," ",155],"=",["T_WHITESPACE"," ",155],["T_NEW","new",155],["T_WHITESPACE"," ",155],["T_STRING","Mage_Connect_Ftp",155],"(",")",";",["T_WHITESPACE","\n        ",155],["T_VARIABLE","$ftpObj",156],["T_OBJECT_OPERATOR","->",156],["T_STRING","connect",156],"(",["T_VARIABLE","$ftpString",156],")",";",["T_WHITESPACE","\n        ",156],["T_VARIABLE","$remoteConfigExists",157],["T_WHITESPACE"," ",157],"=",["T_WHITESPACE"," ",157],["T_VARIABLE","$ftpObj",157],["T_OBJECT_OPERATOR","->",157],["T_STRING","fileExists",157],"(",["T_STRING","self",157],["T_DOUBLE_COLON","::",157],["T_STRING","CACHE_FILE_NAME",157],")",";",["T_WHITESPACE","\n        ",157],["T_IF","if",158],"(","!",["T_VARIABLE","$remoteConfigExists",158],")",["T_WHITESPACE"," ",158],"{",["T_WHITESPACE","\n            ",158],["T_VARIABLE","$configFile",159],"=",["T_STRING","tempnam",159],"(",["T_STRING","sys_get_temp_dir",159],"(",")",",",["T_CONSTANT_ENCAPSED_STRING","'conf'",159],")",";",["T_WHITESPACE","\n            ",159],["T_VARIABLE","$remoteCfg",160],["T_WHITESPACE"," ",160],"=",["T_WHITESPACE"," ",160],["T_NEW","new",160],["T_WHITESPACE"," ",160],["T_STRING","Mage_Connect_Singleconfig",160],"(",["T_VARIABLE","$configFile",160],")",";",["T_WHITESPACE","\n            ",160],["T_VARIABLE","$remoteCfg",161],["T_OBJECT_OPERATOR","->",161],["T_STRING","clear",161],"(",")",";",["T_WHITESPACE","\n            ",161],["T_VARIABLE","$ftpObj",162],["T_OBJECT_OPERATOR","->",162],["T_STRING","upload",162],"(",["T_STRING","self",162],["T_DOUBLE_COLON","::",162],["T_STRING","CACHE_FILE_NAME",162],",",["T_WHITESPACE"," ",162],["T_VARIABLE","$configFile",162],")",";",["T_WHITESPACE","\n        ",162],"}",["T_WHITESPACE"," ",163],["T_ELSE","else",163],["T_WHITESPACE"," ",163],"{",["T_WHITESPACE","\n            ",163],["T_VARIABLE","$configFile",164],"=",["T_STRING","tempnam",164],"(",["T_STRING","sys_get_temp_dir",164],"(",")",",",["T_CONSTANT_ENCAPSED_STRING","'conf'",164],")",";",["T_WHITESPACE","\n            ",164],["T_VARIABLE","$ftpObj",165],["T_OBJECT_OPERATOR","->",165],["T_STRING","get",165],"(",["T_VARIABLE","$configFile",165],",",["T_WHITESPACE"," ",165],["T_STRING","self",165],["T_DOUBLE_COLON","::",165],["T_STRING","CACHE_FILE_NAME",165],")",";",["T_WHITESPACE","\n            ",165],["T_VARIABLE","$remoteCfg",166],["T_WHITESPACE"," ",166],"=",["T_WHITESPACE"," ",166],["T_NEW","new",166],["T_WHITESPACE"," ",166],["T_STRING","Mage_Connect_Singleconfig",166],"(",["T_VARIABLE","$configFile",166],")",";",["T_WHITESPACE","\n        ",166],"}",["T_WHITESPACE","\n        ",167],["T_RETURN","return",168],["T_WHITESPACE"," ",168],["T_ARRAY","array",168],"(",["T_VARIABLE","$remoteCfg",168],",",["T_WHITESPACE"," ",168],["T_VARIABLE","$ftpObj",168],")",";",["T_WHITESPACE","\n    ",168],"}",["T_WHITESPACE","\n\n    ",169],["T_DOC_COMMENT","\/**\n     * Get config data remotely\n     *\n     * @param string $ftpString\n     * @return array\n     *\/",171],["T_WHITESPACE","\n    ",176],["T_PUBLIC","public",177],["T_WHITESPACE"," ",177],["T_FUNCTION","function",177],["T_WHITESPACE"," ",177],["T_STRING","getRemoteConfig",177],"(",["T_VARIABLE","$ftpString",177],")",["T_WHITESPACE","\n    ",177],"{",["T_WHITESPACE","\n        ",178],["T_VARIABLE","$ftpObj",179],["T_WHITESPACE"," ",179],"=",["T_WHITESPACE"," ",179],["T_NEW","new",179],["T_WHITESPACE"," ",179],["T_STRING","Mage_Connect_Ftp",179],"(",")",";",["T_WHITESPACE","\n        ",179],["T_VARIABLE","$ftpObj",180],["T_OBJECT_OPERATOR","->",180],["T_STRING","connect",180],"(",["T_VARIABLE","$ftpString",180],")",";",["T_WHITESPACE","\n        ",180],["T_VARIABLE","$cfgFile",181],["T_WHITESPACE"," ",181],"=",["T_WHITESPACE"," ",181],["T_STRING","self",181],["T_DOUBLE_COLON","::",181],["T_STRING","CONFIG_FILE_NAME",181],";",["T_WHITESPACE","\n\n        ",181],["T_VARIABLE","$wd",183],["T_WHITESPACE"," ",183],"=",["T_WHITESPACE"," ",183],["T_VARIABLE","$ftpObj",183],["T_OBJECT_OPERATOR","->",183],["T_STRING","getcwd",183],"(",")",";",["T_WHITESPACE","\n        ",183],["T_VARIABLE","$remoteConfigExists",184],["T_WHITESPACE"," ",184],"=",["T_WHITESPACE"," ",184],["T_VARIABLE","$ftpObj",184],["T_OBJECT_OPERATOR","->",184],["T_STRING","fileExists",184],"(",["T_VARIABLE","$cfgFile",184],")",";",["T_WHITESPACE","\n        ",184],["T_VARIABLE","$tempConfigFile",185],["T_WHITESPACE"," ",185],"=",["T_WHITESPACE"," ",185],["T_STRING","tempnam",185],"(",["T_STRING","sys_get_temp_dir",185],"(",")",",",["T_CONSTANT_ENCAPSED_STRING","'conf_'",185],")",";",["T_WHITESPACE","\n        ",185],["T_IF","if",186],"(","!",["T_VARIABLE","$remoteConfigExists",186],")",["T_WHITESPACE"," ",186],"{",["T_WHITESPACE","\n            ",186],["T_VARIABLE","$remoteCfg",187],["T_WHITESPACE"," ",187],"=",["T_WHITESPACE"," ",187],["T_NEW","new",187],["T_WHITESPACE"," ",187],["T_STRING","Mage_Connect_Config",187],"(",["T_VARIABLE","$tempConfigFile",187],")",";",["T_WHITESPACE","\n            ",187],["T_VARIABLE","$remoteCfg",188],["T_OBJECT_OPERATOR","->",188],["T_STRING","store",188],"(",")",";",["T_WHITESPACE","\n            ",188],["T_VARIABLE","$ftpObj",189],["T_OBJECT_OPERATOR","->",189],["T_STRING","upload",189],"(",["T_VARIABLE","$cfgFile",189],",",["T_WHITESPACE"," ",189],["T_VARIABLE","$tempConfigFile",189],")",";",["T_WHITESPACE","\n        ",189],"}",["T_WHITESPACE"," ",190],["T_ELSE","else",190],["T_WHITESPACE"," ",190],"{",["T_WHITESPACE","\n            ",190],["T_VARIABLE","$ftpObj",191],["T_OBJECT_OPERATOR","->",191],["T_STRING","get",191],"(",["T_VARIABLE","$tempConfigFile",191],",",["T_WHITESPACE"," ",191],["T_VARIABLE","$cfgFile",191],")",";",["T_WHITESPACE","\n            ",191],["T_VARIABLE","$remoteCfg",192],["T_WHITESPACE"," ",192],"=",["T_WHITESPACE"," ",192],["T_NEW","new",192],["T_WHITESPACE"," ",192],["T_STRING","Mage_Connect_Config",192],"(",["T_VARIABLE","$tempConfigFile",192],")",";",["T_WHITESPACE","\n        ",192],"}",["T_WHITESPACE","\n        ",193],["T_VARIABLE","$ftpObj",194],["T_OBJECT_OPERATOR","->",194],["T_STRING","chdir",194],"(",["T_VARIABLE","$wd",194],")",";",["T_WHITESPACE","\n        ",194],["T_RETURN","return",195],["T_WHITESPACE"," ",195],["T_ARRAY","array",195],"(",["T_VARIABLE","$remoteCfg",195],",",["T_WHITESPACE"," ",195],["T_VARIABLE","$ftpObj",195],")",";",["T_WHITESPACE","\n    ",195],"}",["T_WHITESPACE","\n\n    ",196],["T_DOC_COMMENT","\/**\n     * Write Cache config remotely\n     *\n     * @param Mage_Connect_Singleconfig $cache\n     * @param Mage_Connect_Ftp $ftpObj\n     * @return void\n     *\/",198],["T_WHITESPACE","\n    ",204],["T_PUBLIC","public",205],["T_WHITESPACE"," ",205],["T_FUNCTION","function",205],["T_WHITESPACE"," ",205],["T_STRING","writeToRemoteCache",205],"(",["T_VARIABLE","$cache",205],",",["T_WHITESPACE"," ",205],["T_VARIABLE","$ftpObj",205],")",["T_WHITESPACE","\n    ",205],"{",["T_WHITESPACE","\n        ",206],["T_VARIABLE","$wd",207],["T_WHITESPACE"," ",207],"=",["T_WHITESPACE"," ",207],["T_VARIABLE","$ftpObj",207],["T_OBJECT_OPERATOR","->",207],["T_STRING","getcwd",207],"(",")",";",["T_WHITESPACE","\n        ",207],["T_VARIABLE","$ftpObj",208],["T_OBJECT_OPERATOR","->",208],["T_STRING","upload",208],"(",["T_STRING","self",208],["T_DOUBLE_COLON","::",208],["T_STRING","CACHE_FILE_NAME",208],",",["T_WHITESPACE"," ",208],["T_VARIABLE","$cache",208],["T_OBJECT_OPERATOR","->",208],["T_STRING","getFilename",208],"(",")",")",";",["T_WHITESPACE","\n        ",208],"@",["T_STRING","unlink",209],"(",["T_VARIABLE","$cache",209],["T_OBJECT_OPERATOR","->",209],["T_STRING","getFilename",209],"(",")",")",";",["T_WHITESPACE","\n        ",209],["T_VARIABLE","$ftpObj",210],["T_OBJECT_OPERATOR","->",210],["T_STRING","chdir",210],"(",["T_VARIABLE","$wd",210],")",";",["T_WHITESPACE","\n    ",210],"}",["T_WHITESPACE","\n\n    ",211],["T_DOC_COMMENT","\/**\n     * Write config remotely\n     *\n     * @param Mage_Connect_Config $cache\n     * @param Mage_Connect_Ftp $ftpObj\n     * @throws RuntimeException\n     *\/",213],["T_WHITESPACE","\n    ",219],["T_PUBLIC","public",220],["T_WHITESPACE"," ",220],["T_FUNCTION","function",220],["T_WHITESPACE"," ",220],["T_STRING","writeToRemoteConfig",220],"(",["T_VARIABLE","$cache",220],",",["T_WHITESPACE"," ",220],["T_VARIABLE","$ftpObj",220],")",["T_WHITESPACE","\n    ",220],"{",["T_WHITESPACE","\n        ",221],["T_VARIABLE","$wd",222],["T_WHITESPACE"," ",222],"=",["T_WHITESPACE"," ",222],["T_VARIABLE","$ftpObj",222],["T_OBJECT_OPERATOR","->",222],["T_STRING","getcwd",222],"(",")",";",["T_WHITESPACE","\n        ",222],["T_VARIABLE","$ftpObj",223],["T_OBJECT_OPERATOR","->",223],["T_STRING","upload",223],"(",["T_STRING","self",223],["T_DOUBLE_COLON","::",223],["T_STRING","CONFIG_FILE_NAME",223],",",["T_WHITESPACE"," ",223],["T_VARIABLE","$cache",223],["T_OBJECT_OPERATOR","->",223],["T_STRING","getFilename",223],"(",")",")",";",["T_WHITESPACE","\n        ",223],"@",["T_STRING","unlink",224],"(",["T_VARIABLE","$cache",224],["T_OBJECT_OPERATOR","->",224],["T_STRING","getFilename",224],"(",")",")",";",["T_WHITESPACE","\n        ",224],["T_VARIABLE","$ftpObj",225],["T_OBJECT_OPERATOR","->",225],["T_STRING","chdir",225],"(",["T_VARIABLE","$wd",225],")",";",["T_WHITESPACE","\n    ",225],"}",["T_WHITESPACE","\n\n    ",226],["T_DOC_COMMENT","\/**\n     * Remove empty directories recursively up\n     *\n     * @param string $dir\n     * @param Mage_Connect_Ftp $ftp\n     *\/",228],["T_WHITESPACE","\n    ",233],["T_PROTECTED","protected",234],["T_WHITESPACE"," ",234],["T_FUNCTION","function",234],["T_WHITESPACE"," ",234],["T_STRING","removeEmptyDirectory",234],"(",["T_VARIABLE","$dir",234],",",["T_WHITESPACE"," ",234],["T_VARIABLE","$ftp",234],["T_WHITESPACE"," ",234],"=",["T_WHITESPACE"," ",234],["T_STRING","null",234],")",["T_WHITESPACE","\n    ",234],"{",["T_WHITESPACE","\n        ",235],["T_IF","if",236],["T_WHITESPACE"," ",236],"(",["T_VARIABLE","$ftp",236],")",["T_WHITESPACE"," ",236],"{",["T_WHITESPACE","\n            ",236],["T_IF","if",237],["T_WHITESPACE"," ",237],"(",["T_STRING","count",237],"(",["T_VARIABLE","$ftp",237],["T_OBJECT_OPERATOR","->",237],["T_STRING","nlist",237],"(",["T_VARIABLE","$dir",237],")",")",["T_IS_EQUAL","==",237],["T_LNUMBER","0",237],")",["T_WHITESPACE"," ",237],"{",["T_WHITESPACE","\n                ",237],["T_IF","if",238],["T_WHITESPACE"," ",238],"(",["T_VARIABLE","$ftp",238],["T_OBJECT_OPERATOR","->",238],["T_STRING","rmdir",238],"(",["T_VARIABLE","$dir",238],")",")",["T_WHITESPACE"," ",238],"{",["T_WHITESPACE","\n                    ",238],["T_VARIABLE","$this",239],["T_OBJECT_OPERATOR","->",239],["T_STRING","removeEmptyDirectory",239],"(",["T_STRING","dirname",239],"(",["T_VARIABLE","$dir",239],")",",",["T_WHITESPACE"," ",239],["T_VARIABLE","$ftp",239],")",";",["T_WHITESPACE","\n                ",239],"}",["T_WHITESPACE","\n            ",240],"}",["T_WHITESPACE","\n        ",241],"}",["T_WHITESPACE"," ",242],["T_ELSE","else",242],["T_WHITESPACE"," ",242],"{",["T_WHITESPACE","\n            ",242],["T_VARIABLE","$content",243],["T_WHITESPACE"," ",243],"=",["T_WHITESPACE"," ",243],["T_STRING","scandir",243],"(",["T_VARIABLE","$dir",243],")",";",["T_WHITESPACE","\n            ",243],["T_IF","if",244],["T_WHITESPACE"," ",244],"(",["T_VARIABLE","$content",244],["T_WHITESPACE"," ",244],["T_IS_IDENTICAL","===",244],["T_WHITESPACE"," ",244],["T_STRING","false",244],")",["T_WHITESPACE"," ",244],["T_RETURN","return",244],";",["T_WHITESPACE","\n\n            ",244],["T_IF","if",246],["T_WHITESPACE"," ",246],"(",["T_STRING","count",246],"(",["T_STRING","array_diff",246],"(",["T_VARIABLE","$content",246],",",["T_WHITESPACE"," ",246],["T_ARRAY","array",246],"(",["T_CONSTANT_ENCAPSED_STRING","'.'",246],",",["T_WHITESPACE"," ",246],["T_CONSTANT_ENCAPSED_STRING","'..'",246],")",")",")",["T_WHITESPACE"," ",246],["T_IS_EQUAL","==",246],["T_WHITESPACE"," ",246],["T_LNUMBER","0",246],")",["T_WHITESPACE"," ",246],"{",["T_WHITESPACE","\n                ",246],["T_IF","if",247],["T_WHITESPACE"," ",247],"(","@",["T_STRING","rmdir",247],"(",["T_VARIABLE","$dir",247],")",")",["T_WHITESPACE"," ",247],"{",["T_WHITESPACE","\n                    ",247],["T_VARIABLE","$this",248],["T_OBJECT_OPERATOR","->",248],["T_STRING","removeEmptyDirectory",248],"(",["T_STRING","dirname",248],"(",["T_VARIABLE","$dir",248],")",",",["T_WHITESPACE"," ",248],["T_VARIABLE","$ftp",248],")",";",["T_WHITESPACE","\n                ",248],"}",["T_WHITESPACE"," ",249],["T_ELSE","else",249],["T_WHITESPACE"," ",249],"{",["T_WHITESPACE","\n                    ",249],["T_THROW","throw",250],["T_WHITESPACE"," ",250],["T_NEW","new",250],["T_WHITESPACE"," ",250],["T_STRING","RuntimeException",250],"(",["T_CONSTANT_ENCAPSED_STRING","'Failed to delete dir '",250],["T_WHITESPACE"," ",250],".",["T_WHITESPACE"," ",250],["T_STRING","Mage_System_Dirs",250],["T_DOUBLE_COLON","::",250],["T_STRING","getFilteredPath",250],"(",["T_VARIABLE","$dir",250],")",["T_WHITESPACE","\n                        ",250],".",["T_WHITESPACE"," ",251],["T_CONSTANT_ENCAPSED_STRING","\"\\r\\n Check permissions\"",251],")",";",["T_WHITESPACE","\n                ",251],"}",["T_WHITESPACE","\n            ",252],"}",["T_WHITESPACE","\n        ",253],"}",["T_WHITESPACE","\n    ",254],"}",["T_WHITESPACE","\n\n    ",255],["T_DOC_COMMENT","\/**\n     * Uninstall Package\n     *\n     * @param string $chanName\n     * @param string $package\n     * @param Mage_Connect_Singleconfig $cacheObj\n     * @param Mage_Connect_Config $configObj\n     * @throws RuntimeException\n     *\/",257],["T_WHITESPACE","\n    ",265],["T_PUBLIC","public",266],["T_WHITESPACE"," ",266],["T_FUNCTION","function",266],["T_WHITESPACE"," ",266],["T_STRING","processUninstallPackage",266],"(",["T_VARIABLE","$chanName",266],",",["T_WHITESPACE"," ",266],["T_VARIABLE","$package",266],",",["T_WHITESPACE"," ",266],["T_VARIABLE","$cacheObj",266],",",["T_WHITESPACE"," ",266],["T_VARIABLE","$configObj",266],")",["T_WHITESPACE","\n    ",266],"{",["T_WHITESPACE","\n        ",267],["T_VARIABLE","$package",268],["T_WHITESPACE"," ",268],"=",["T_WHITESPACE"," ",268],["T_VARIABLE","$cacheObj",268],["T_OBJECT_OPERATOR","->",268],["T_STRING","getPackageObject",268],"(",["T_VARIABLE","$chanName",268],",",["T_WHITESPACE"," ",268],["T_VARIABLE","$package",268],")",";",["T_WHITESPACE","\n        ",268],["T_VARIABLE","$contents",269],["T_WHITESPACE"," ",269],"=",["T_WHITESPACE"," ",269],["T_VARIABLE","$package",269],["T_OBJECT_OPERATOR","->",269],["T_STRING","getContents",269],"(",")",";",["T_WHITESPACE","\n\n        ",269],["T_VARIABLE","$targetPath",271],["T_WHITESPACE"," ",271],"=",["T_WHITESPACE"," ",271],["T_STRING","rtrim",271],"(",["T_VARIABLE","$configObj",271],["T_OBJECT_OPERATOR","->",271],["T_STRING","magento_root",271],",",["T_WHITESPACE"," ",271],["T_CONSTANT_ENCAPSED_STRING","\"\\\\\/\"",271],")",";",["T_WHITESPACE","\n        ",271],["T_VARIABLE","$failedFiles",272],["T_WHITESPACE"," ",272],"=",["T_WHITESPACE"," ",272],["T_ARRAY","array",272],"(",")",";",["T_WHITESPACE","\n        ",272],["T_FOREACH","foreach",273],["T_WHITESPACE"," ",273],"(",["T_VARIABLE","$contents",273],["T_WHITESPACE"," ",273],["T_AS","as",273],["T_WHITESPACE"," ",273],["T_VARIABLE","$file",273],")",["T_WHITESPACE"," ",273],"{",["T_WHITESPACE","\n            ",273],["T_VARIABLE","$fileName",274],["T_WHITESPACE"," ",274],"=",["T_WHITESPACE"," ",274],["T_STRING","basename",274],"(",["T_VARIABLE","$file",274],")",";",["T_WHITESPACE","\n            ",274],["T_VARIABLE","$filePath",275],["T_WHITESPACE"," ",275],"=",["T_WHITESPACE"," ",275],["T_STRING","dirname",275],"(",["T_VARIABLE","$file",275],")",";",["T_WHITESPACE","\n            ",275],["T_VARIABLE","$dest",276],["T_WHITESPACE"," ",276],"=",["T_WHITESPACE"," ",276],["T_VARIABLE","$targetPath",276],["T_WHITESPACE"," ",276],".",["T_WHITESPACE"," ",276],["T_STRING","DIRECTORY_SEPARATOR",276],["T_WHITESPACE"," ",276],".",["T_WHITESPACE"," ",276],["T_VARIABLE","$filePath",276],["T_WHITESPACE"," ",276],".",["T_WHITESPACE"," ",276],["T_STRING","DIRECTORY_SEPARATOR",276],["T_WHITESPACE"," ",276],".",["T_WHITESPACE"," ",276],["T_VARIABLE","$fileName",276],";",["T_WHITESPACE","\n            ",276],["T_IF","if",277],"(","@",["T_STRING","file_exists",277],"(",["T_VARIABLE","$dest",277],")",")",["T_WHITESPACE"," ",277],"{",["T_WHITESPACE","\n                ",277],["T_IF","if",278],["T_WHITESPACE"," ",278],"(","!","@",["T_STRING","unlink",278],"(",["T_VARIABLE","$dest",278],")",")",["T_WHITESPACE"," ",278],"{",["T_WHITESPACE","\n                    ",278],["T_VARIABLE","$failedFiles",279],"[","]",["T_WHITESPACE"," ",279],"=",["T_WHITESPACE"," ",279],["T_STRING","Mage_System_Dirs",279],["T_DOUBLE_COLON","::",279],["T_STRING","getFilteredPath",279],"(",["T_VARIABLE","$dest",279],")",";",["T_WHITESPACE","\n                ",279],"}",["T_WHITESPACE","\n            ",280],"}",["T_WHITESPACE","\n            ",281],["T_VARIABLE","$this",282],["T_OBJECT_OPERATOR","->",282],["T_STRING","removeEmptyDirectory",282],"(",["T_STRING","dirname",282],"(",["T_VARIABLE","$dest",282],")",")",";",["T_WHITESPACE","\n        ",282],"}",["T_WHITESPACE","\n        ",283],["T_IF","if",284],["T_WHITESPACE"," ",284],"(","!",["T_EMPTY","empty",284],"(",["T_VARIABLE","$failedFiles",284],")",")",["T_WHITESPACE"," ",284],"{",["T_WHITESPACE","\n            ",284],["T_VARIABLE","$msg",285],["T_WHITESPACE"," ",285],"=",["T_WHITESPACE"," ",285],["T_STRING","sprintf",285],"(",["T_CONSTANT_ENCAPSED_STRING","\"Failed to delete files: %s \\r\\n Check permissions\"",285],",",["T_WHITESPACE"," ",285],["T_STRING","implode",285],"(",["T_CONSTANT_ENCAPSED_STRING","\"\\r\\n\"",285],",",["T_WHITESPACE"," ",285],["T_VARIABLE","$failedFiles",285],")",")",";",["T_WHITESPACE","\n            ",285],["T_THROW","throw",286],["T_WHITESPACE"," ",286],["T_NEW","new",286],["T_WHITESPACE"," ",286],["T_STRING","RuntimeException",286],"(",["T_VARIABLE","$msg",286],")",";",["T_WHITESPACE","\n        ",286],"}",["T_WHITESPACE","\n\n        ",287],["T_VARIABLE","$destDir",289],["T_WHITESPACE"," ",289],"=",["T_WHITESPACE"," ",289],["T_VARIABLE","$targetPath",289],["T_WHITESPACE"," ",289],".",["T_WHITESPACE"," ",289],["T_STRING","DS",289],["T_WHITESPACE"," ",289],".",["T_WHITESPACE"," ",289],["T_STRING","Mage_Connect_Package",289],["T_DOUBLE_COLON","::",289],["T_STRING","PACKAGE_XML_DIR",289],";",["T_WHITESPACE","\n        ",289],["T_VARIABLE","$destFile",290],["T_WHITESPACE"," ",290],"=",["T_WHITESPACE"," ",290],["T_VARIABLE","$package",290],["T_OBJECT_OPERATOR","->",290],["T_STRING","getReleaseFilename",290],"(",")",["T_WHITESPACE"," ",290],".",["T_WHITESPACE"," ",290],["T_CONSTANT_ENCAPSED_STRING","'.xml'",290],";",["T_WHITESPACE","\n        ",290],"@",["T_STRING","unlink",291],"(",["T_VARIABLE","$destDir",291],["T_WHITESPACE"," ",291],".",["T_WHITESPACE"," ",291],["T_STRING","DS",291],["T_WHITESPACE"," ",291],".",["T_WHITESPACE"," ",291],["T_VARIABLE","$destFile",291],")",";",["T_WHITESPACE","\n    ",291],"}",["T_WHITESPACE","\n\n    ",292],["T_DOC_COMMENT","\/**\n     * Uninstall Package over FTP\n     *\n     * @param $chanName\n     * @param $package\n     * @param Mage_Connect_Singleconfig $cacheObj\n     * @param Mage_Connect_Ftp $ftp\n     * @throws RuntimeException\n     *\/",294],["T_WHITESPACE","\n    ",302],["T_PUBLIC","public",303],["T_WHITESPACE"," ",303],["T_FUNCTION","function",303],["T_WHITESPACE"," ",303],["T_STRING","processUninstallPackageFtp",303],"(",["T_VARIABLE","$chanName",303],",",["T_WHITESPACE"," ",303],["T_VARIABLE","$package",303],",",["T_WHITESPACE"," ",303],["T_VARIABLE","$cacheObj",303],",",["T_WHITESPACE"," ",303],["T_VARIABLE","$ftp",303],")",["T_WHITESPACE","\n    ",303],"{",["T_WHITESPACE","\n        ",304],["T_VARIABLE","$ftpDir",305],["T_WHITESPACE"," ",305],"=",["T_WHITESPACE"," ",305],["T_VARIABLE","$ftp",305],["T_OBJECT_OPERATOR","->",305],["T_STRING","getcwd",305],"(",")",";",["T_WHITESPACE","\n        ",305],["T_VARIABLE","$package",306],["T_WHITESPACE"," ",306],"=",["T_WHITESPACE"," ",306],["T_VARIABLE","$cacheObj",306],["T_OBJECT_OPERATOR","->",306],["T_STRING","getPackageObject",306],"(",["T_VARIABLE","$chanName",306],",",["T_WHITESPACE"," ",306],["T_VARIABLE","$package",306],")",";",["T_WHITESPACE","\n        ",306],["T_VARIABLE","$contents",307],["T_WHITESPACE"," ",307],"=",["T_WHITESPACE"," ",307],["T_VARIABLE","$package",307],["T_OBJECT_OPERATOR","->",307],["T_STRING","getContents",307],"(",")",";",["T_WHITESPACE","\n        ",307],["T_VARIABLE","$failedFiles",308],["T_WHITESPACE"," ",308],"=",["T_WHITESPACE"," ",308],["T_ARRAY","array",308],"(",")",";",["T_WHITESPACE","\n        ",308],["T_FOREACH","foreach",309],["T_WHITESPACE"," ",309],"(",["T_VARIABLE","$contents",309],["T_WHITESPACE"," ",309],["T_AS","as",309],["T_WHITESPACE"," ",309],["T_VARIABLE","$file",309],")",["T_WHITESPACE"," ",309],"{",["T_WHITESPACE","\n            ",309],["T_VARIABLE","$ftp",310],["T_OBJECT_OPERATOR","->",310],["T_STRING","delete",310],"(",["T_VARIABLE","$file",310],")",";",["T_WHITESPACE","\n            ",310],["T_IF","if",311],["T_WHITESPACE"," ",311],"(",["T_VARIABLE","$ftp",311],["T_OBJECT_OPERATOR","->",311],["T_STRING","fileExists",311],"(",["T_VARIABLE","$file",311],")",")",["T_WHITESPACE"," ",311],"{",["T_WHITESPACE","\n                ",311],["T_VARIABLE","$failedFiles",312],"[","]",["T_WHITESPACE"," ",312],"=",["T_WHITESPACE"," ",312],["T_STRING","Mage_System_Dirs",312],["T_DOUBLE_COLON","::",312],["T_STRING","getFilteredPath",312],"(",["T_VARIABLE","$file",312],")",";",["T_WHITESPACE","\n                ",312],["T_CONTINUE","continue",313],";",["T_WHITESPACE","\n            ",313],"}",["T_WHITESPACE","\n            ",314],["T_VARIABLE","$this",315],["T_OBJECT_OPERATOR","->",315],["T_STRING","removeEmptyDirectory",315],"(",["T_STRING","dirname",315],"(",["T_VARIABLE","$file",315],")",",",["T_WHITESPACE"," ",315],["T_VARIABLE","$ftp",315],")",";",["T_WHITESPACE","\n        ",315],"}",["T_WHITESPACE","\n        ",316],["T_IF","if",317],["T_WHITESPACE"," ",317],"(","!",["T_EMPTY","empty",317],"(",["T_VARIABLE","$failedFiles",317],")",")",["T_WHITESPACE"," ",317],"{",["T_WHITESPACE","\n            ",317],["T_VARIABLE","$msg",318],["T_WHITESPACE"," ",318],"=",["T_WHITESPACE"," ",318],["T_STRING","sprintf",318],"(",["T_CONSTANT_ENCAPSED_STRING","\"Failed to delete files: %s \\r\\n Check permissions\"",318],",",["T_WHITESPACE"," ",318],["T_STRING","implode",318],"(",["T_CONSTANT_ENCAPSED_STRING","\"\\r\\n\"",318],",",["T_WHITESPACE"," ",318],["T_VARIABLE","$failedFiles",318],")",")",";",["T_WHITESPACE","\n            ",318],["T_THROW","throw",319],["T_WHITESPACE"," ",319],["T_NEW","new",319],["T_WHITESPACE"," ",319],["T_STRING","RuntimeException",319],"(",["T_VARIABLE","$msg",319],")",";",["T_WHITESPACE","\n        ",319],"}",["T_WHITESPACE","\n        ",320],["T_VARIABLE","$remoteXml",321],["T_WHITESPACE"," ",321],"=",["T_WHITESPACE"," ",321],["T_STRING","Mage_Connect_Package",321],["T_DOUBLE_COLON","::",321],["T_STRING","PACKAGE_XML_DIR",321],["T_WHITESPACE"," ",321],".",["T_WHITESPACE"," ",321],["T_STRING","DS",321],["T_WHITESPACE"," ",321],".",["T_WHITESPACE"," ",321],["T_VARIABLE","$package",321],["T_OBJECT_OPERATOR","->",321],["T_STRING","getReleaseFilename",321],"(",")",["T_WHITESPACE"," ",321],".",["T_WHITESPACE"," ",321],["T_CONSTANT_ENCAPSED_STRING","'.xml'",321],";",["T_WHITESPACE","\n        ",321],["T_VARIABLE","$ftp",322],["T_OBJECT_OPERATOR","->",322],["T_STRING","delete",322],"(",["T_VARIABLE","$remoteXml",322],")",";",["T_WHITESPACE","\n        ",322],["T_VARIABLE","$ftp",323],["T_OBJECT_OPERATOR","->",323],["T_STRING","chdir",323],"(",["T_VARIABLE","$ftpDir",323],")",";",["T_WHITESPACE","\n    ",323],"}",["T_WHITESPACE","\n\n    ",324],["T_DOC_COMMENT","\/**\n     * Validation of mode permissions\n     *\n     * @param int $mode\n     * @return int\n     *\/",326],["T_WHITESPACE","\n    ",331],["T_PROTECTED","protected",332],["T_WHITESPACE"," ",332],["T_FUNCTION","function",332],["T_WHITESPACE"," ",332],["T_STRING","validPermMode",332],"(",["T_VARIABLE","$mode",332],")",["T_WHITESPACE","\n    ",332],"{",["T_WHITESPACE","\n        ",333],["T_VARIABLE","$mode",334],["T_WHITESPACE"," ",334],"=",["T_WHITESPACE"," ",334],["T_STRING","intval",334],"(",["T_VARIABLE","$mode",334],")",";",["T_WHITESPACE","\n        ",334],["T_IF","if",335],["T_WHITESPACE"," ",335],"(",["T_VARIABLE","$mode",335],["T_WHITESPACE"," ",335],"<",["T_WHITESPACE"," ",335],["T_LNUMBER","73",335],["T_WHITESPACE"," ",335],["T_BOOLEAN_OR","||",335],["T_WHITESPACE"," ",335],["T_VARIABLE","$mode",335],["T_WHITESPACE"," ",335],">",["T_WHITESPACE"," ",335],["T_LNUMBER","511",335],")",["T_WHITESPACE"," ",335],"{",["T_WHITESPACE","\n            ",335],["T_RETURN","return",336],["T_WHITESPACE"," ",336],["T_STRING","false",336],";",["T_WHITESPACE","\n        ",336],"}",["T_WHITESPACE","\n        ",337],["T_RETURN","return",338],["T_WHITESPACE"," ",338],["T_STRING","true",338],";",["T_WHITESPACE","\n    ",338],"}",["T_WHITESPACE","\n\n    ",339],["T_DOC_COMMENT","\/**\n     * Return correct global dir mode in octal representation\n     *\n     * @param Mage_Connect_Config $config\n     * @return int\n     *\/",341],["T_WHITESPACE","\n    ",346],["T_PROTECTED","protected",347],["T_WHITESPACE"," ",347],["T_FUNCTION","function",347],["T_WHITESPACE"," ",347],["T_STRING","_getDirMode",347],"(",["T_VARIABLE","$config",347],")",["T_WHITESPACE","\n    ",347],"{",["T_WHITESPACE","\n        ",348],["T_IF","if",349],["T_WHITESPACE"," ",349],"(",["T_VARIABLE","$this",349],["T_OBJECT_OPERATOR","->",349],["T_STRING","validPermMode",349],"(",["T_VARIABLE","$config",349],["T_OBJECT_OPERATOR","->",349],["T_STRING","global_dir_mode",349],")",")",["T_WHITESPACE"," ",349],"{",["T_WHITESPACE","\n            ",349],["T_RETURN","return",350],["T_WHITESPACE"," ",350],["T_VARIABLE","$config",350],["T_OBJECT_OPERATOR","->",350],["T_STRING","global_dir_mode",350],";",["T_WHITESPACE","\n        ",350],"}",["T_WHITESPACE"," ",351],["T_ELSE","else",351],["T_WHITESPACE"," ",351],"{",["T_WHITESPACE","\n            ",351],["T_RETURN","return",352],["T_WHITESPACE"," ",352],["T_VARIABLE","$config",352],["T_OBJECT_OPERATOR","->",352],["T_STRING","getDefaultValue",352],"(",["T_CONSTANT_ENCAPSED_STRING","'global_dir_mode'",352],")",";",["T_WHITESPACE","\n        ",352],"}",["T_WHITESPACE","\n    ",353],"}",["T_WHITESPACE","\n\n    ",354],["T_DOC_COMMENT","\/**\n     * Return global file mode in octal representation\n     *\n     * @param Mage_Connect_Config $config\n     * @return int\n     *\/",356],["T_WHITESPACE","\n    ",361],["T_PROTECTED","protected",362],["T_WHITESPACE"," ",362],["T_FUNCTION","function",362],["T_WHITESPACE"," ",362],["T_STRING","_getFileMode",362],"(",["T_VARIABLE","$config",362],")",["T_WHITESPACE","\n    ",362],"{",["T_WHITESPACE","\n        ",363],["T_IF","if",364],["T_WHITESPACE"," ",364],"(",["T_VARIABLE","$this",364],["T_OBJECT_OPERATOR","->",364],["T_STRING","validPermMode",364],"(",["T_VARIABLE","$config",364],["T_OBJECT_OPERATOR","->",364],["T_STRING","global_file_mode",364],")",")",["T_WHITESPACE"," ",364],"{",["T_WHITESPACE","\n            ",364],["T_RETURN","return",365],["T_WHITESPACE"," ",365],["T_VARIABLE","$config",365],["T_OBJECT_OPERATOR","->",365],["T_STRING","global_file_mode",365],";",["T_WHITESPACE","\n        ",365],"}",["T_WHITESPACE"," ",366],["T_ELSE","else",366],["T_WHITESPACE"," ",366],"{",["T_WHITESPACE","\n            ",366],["T_RETURN","return",367],["T_WHITESPACE"," ",367],["T_VARIABLE","$config",367],["T_OBJECT_OPERATOR","->",367],["T_STRING","getDefaultValue",367],"(",["T_CONSTANT_ENCAPSED_STRING","'global_file_mode'",367],")",";",["T_WHITESPACE","\n        ",367],"}",["T_WHITESPACE","\n    ",368],"}",["T_WHITESPACE","\n\n    ",369],["T_DOC_COMMENT","\/**\n     * Convert FTP path\n     *\n     * @param string $str\n     * @return string\n     *\/",371],["T_WHITESPACE","\n    ",376],["T_PROTECTED","protected",377],["T_WHITESPACE"," ",377],["T_FUNCTION","function",377],["T_WHITESPACE"," ",377],["T_STRING","convertFtpPath",377],"(",["T_VARIABLE","$str",377],")",["T_WHITESPACE","\n    ",377],"{",["T_WHITESPACE","\n        ",378],["T_RETURN","return",379],["T_WHITESPACE"," ",379],["T_STRING","str_replace",379],"(",["T_CONSTANT_ENCAPSED_STRING","\"\\\\\"",379],",",["T_WHITESPACE"," ",379],["T_CONSTANT_ENCAPSED_STRING","\"\/\"",379],",",["T_WHITESPACE"," ",379],["T_VARIABLE","$str",379],")",";",["T_WHITESPACE","\n    ",379],"}",["T_WHITESPACE","\n\n    ",380],["T_DOC_COMMENT","\/**\n     * Install package over FTP\n     *\n     * @param Mage_Connect_Package $package\n     * @param string $file\n     * @param Mage_Connect_Config $configObj\n     * @param Mage_Connect_Ftp $ftp\n     * @throws RuntimeException\n     *\/",382],["T_WHITESPACE","\n    ",390],["T_PUBLIC","public",391],["T_WHITESPACE"," ",391],["T_FUNCTION","function",391],["T_WHITESPACE"," ",391],["T_STRING","processInstallPackageFtp",391],"(",["T_VARIABLE","$package",391],",",["T_WHITESPACE"," ",391],["T_VARIABLE","$file",391],",",["T_WHITESPACE"," ",391],["T_VARIABLE","$configObj",391],",",["T_WHITESPACE"," ",391],["T_VARIABLE","$ftp",391],")",["T_WHITESPACE","\n    ",391],"{",["T_WHITESPACE","\n        ",392],["T_VARIABLE","$ftpDir",393],["T_WHITESPACE"," ",393],"=",["T_WHITESPACE"," ",393],["T_VARIABLE","$ftp",393],["T_OBJECT_OPERATOR","->",393],["T_STRING","getcwd",393],"(",")",";",["T_WHITESPACE","\n        ",393],["T_VARIABLE","$contents",394],["T_WHITESPACE"," ",394],"=",["T_WHITESPACE"," ",394],["T_VARIABLE","$package",394],["T_OBJECT_OPERATOR","->",394],["T_STRING","getContents",394],"(",")",";",["T_WHITESPACE","\n        ",394],["T_VARIABLE","$arc",395],["T_WHITESPACE"," ",395],"=",["T_WHITESPACE"," ",395],["T_VARIABLE","$this",395],["T_OBJECT_OPERATOR","->",395],["T_STRING","getArchiver",395],"(",")",";",["T_WHITESPACE","\n        ",395],["T_VARIABLE","$target",396],["T_WHITESPACE"," ",396],"=",["T_WHITESPACE"," ",396],["T_STRING","dirname",396],"(",["T_VARIABLE","$file",396],")",["T_WHITESPACE"," ",396],".",["T_WHITESPACE"," ",396],["T_STRING","DS",396],["T_WHITESPACE"," ",396],".",["T_WHITESPACE"," ",396],["T_VARIABLE","$package",396],["T_OBJECT_OPERATOR","->",396],["T_STRING","getReleaseFilename",396],"(",")",";",["T_WHITESPACE","\n        ",396],["T_IF","if",397],["T_WHITESPACE"," ",397],"(","!","@",["T_STRING","mkdir",397],"(",["T_VARIABLE","$target",397],",",["T_WHITESPACE"," ",397],["T_LNUMBER","0777",397],",",["T_WHITESPACE"," ",397],["T_STRING","true",397],")",")",["T_WHITESPACE"," ",397],"{",["T_WHITESPACE","\n            ",397],["T_THROW","throw",398],["T_WHITESPACE"," ",398],["T_NEW","new",398],["T_WHITESPACE"," ",398],["T_STRING","RuntimeException",398],"(",["T_CONSTANT_ENCAPSED_STRING","\"Can't create directory \"",398],".",["T_WHITESPACE"," ",398],["T_VARIABLE","$target",398],")",";",["T_WHITESPACE","\n        ",398],"}",["T_WHITESPACE","\n        ",399],["T_VARIABLE","$tar",400],["T_WHITESPACE"," ",400],"=",["T_WHITESPACE"," ",400],["T_VARIABLE","$arc",400],["T_OBJECT_OPERATOR","->",400],["T_STRING","unpack",400],"(",["T_VARIABLE","$file",400],",",["T_WHITESPACE"," ",400],["T_VARIABLE","$target",400],")",";",["T_WHITESPACE","\n        ",400],["T_VARIABLE","$modeFile",401],["T_WHITESPACE"," ",401],"=",["T_WHITESPACE"," ",401],["T_VARIABLE","$this",401],["T_OBJECT_OPERATOR","->",401],["T_STRING","_getFileMode",401],"(",["T_VARIABLE","$configObj",401],")",";",["T_WHITESPACE","\n        ",401],["T_VARIABLE","$modeDir",402],["T_WHITESPACE"," ",402],"=",["T_WHITESPACE"," ",402],["T_VARIABLE","$this",402],["T_OBJECT_OPERATOR","->",402],["T_STRING","_getDirMode",402],"(",["T_VARIABLE","$configObj",402],")",";",["T_WHITESPACE","\n        ",402],["T_VARIABLE","$failedFiles",403],["T_WHITESPACE"," ",403],"=",["T_WHITESPACE"," ",403],["T_ARRAY","array",403],"(",")",";",["T_WHITESPACE","\n        ",403],["T_FOREACH","foreach",404],["T_WHITESPACE"," ",404],"(",["T_VARIABLE","$contents",404],["T_WHITESPACE"," ",404],["T_AS","as",404],["T_WHITESPACE"," ",404],["T_VARIABLE","$file",404],")",["T_WHITESPACE"," ",404],"{",["T_WHITESPACE","\n            ",404],["T_VARIABLE","$source",405],["T_WHITESPACE"," ",405],"=",["T_WHITESPACE"," ",405],["T_VARIABLE","$tar",405],["T_WHITESPACE"," ",405],".",["T_WHITESPACE"," ",405],["T_STRING","DS",405],["T_WHITESPACE"," ",405],".",["T_WHITESPACE"," ",405],["T_VARIABLE","$file",405],";",["T_WHITESPACE","\n            ",405],["T_IF","if",406],["T_WHITESPACE"," ",406],"(",["T_STRING","file_exists",406],"(",["T_VARIABLE","$source",406],")",["T_WHITESPACE"," ",406],["T_BOOLEAN_AND","&&",406],["T_WHITESPACE"," ",406],["T_STRING","is_file",406],"(",["T_VARIABLE","$source",406],")",["T_WHITESPACE"," ",406],["T_BOOLEAN_AND","&&",406],["T_WHITESPACE"," ",406],["T_VARIABLE","$file",406],["T_WHITESPACE"," ",406],["T_IS_NOT_EQUAL","!=",406],["T_WHITESPACE"," ",406],["T_CONSTANT_ENCAPSED_STRING","'.htaccess'",406],")",["T_WHITESPACE"," ",406],"{",["T_WHITESPACE","\n                ",406],["T_VARIABLE","$args",407],["T_WHITESPACE"," ",407],"=",["T_WHITESPACE"," ",407],["T_ARRAY","array",407],"(",["T_STRING","ltrim",407],"(",["T_VARIABLE","$file",407],",",["T_CONSTANT_ENCAPSED_STRING","\"\/\"",407],")",",",["T_WHITESPACE"," ",407],["T_VARIABLE","$source",407],")",";",["T_WHITESPACE","\n                ",407],["T_IF","if",408],"(",["T_VARIABLE","$modeDir",408],["T_BOOLEAN_OR","||",408],["T_VARIABLE","$modeFile",408],")",["T_WHITESPACE"," ",408],"{",["T_WHITESPACE","\n                    ",408],["T_VARIABLE","$args",409],"[","]",["T_WHITESPACE"," ",409],"=",["T_WHITESPACE"," ",409],["T_VARIABLE","$modeDir",409],";",["T_WHITESPACE","\n                    ",409],["T_VARIABLE","$args",410],"[","]",["T_WHITESPACE"," ",410],"=",["T_WHITESPACE"," ",410],["T_VARIABLE","$modeFile",410],";",["T_WHITESPACE","\n                ",410],"}",["T_WHITESPACE","\n                ",411],["T_IF","if",412],["T_WHITESPACE"," ",412],"(",["T_STRING","call_user_func_array",412],"(",["T_ARRAY","array",412],"(",["T_VARIABLE","$ftp",412],",",["T_CONSTANT_ENCAPSED_STRING","'upload'",412],")",",",["T_WHITESPACE"," ",412],["T_VARIABLE","$args",412],")",["T_WHITESPACE"," ",412],["T_IS_IDENTICAL","===",412],["T_WHITESPACE"," ",412],["T_STRING","false",412],")",["T_WHITESPACE"," ",412],"{",["T_WHITESPACE","\n                    ",412],["T_VARIABLE","$failedFiles",413],"[","]",["T_WHITESPACE"," ",413],"=",["T_WHITESPACE"," ",413],["T_STRING","Mage_System_Dirs",413],["T_DOUBLE_COLON","::",413],["T_STRING","getFilteredPath",413],"(",["T_VARIABLE","$source",413],")",";",["T_WHITESPACE","\n                ",413],"}",["T_WHITESPACE","\n            ",414],"}",["T_WHITESPACE","\n        ",415],"}",["T_WHITESPACE","\n\n        ",416],["T_IF","if",418],["T_WHITESPACE"," ",418],"(","!",["T_EMPTY","empty",418],"(",["T_VARIABLE","$failedFiles",418],")",")",["T_WHITESPACE"," ",418],"{",["T_WHITESPACE","\n            ",418],["T_VARIABLE","$msg",419],["T_WHITESPACE"," ",419],"=",["T_WHITESPACE"," ",419],["T_STRING","sprintf",419],"(",["T_CONSTANT_ENCAPSED_STRING","\"Failed to upload files: %s \\r\\n Check permissions\"",419],",",["T_WHITESPACE"," ",419],["T_STRING","implode",419],"(",["T_CONSTANT_ENCAPSED_STRING","\"\\r\\n\"",419],",",["T_WHITESPACE"," ",419],["T_VARIABLE","$failedFiles",419],")",")",";",["T_WHITESPACE","\n            ",419],["T_THROW","throw",420],["T_WHITESPACE"," ",420],["T_NEW","new",420],["T_WHITESPACE"," ",420],["T_STRING","RuntimeException",420],"(",["T_VARIABLE","$msg",420],")",";",["T_WHITESPACE","\n        ",420],"}",["T_WHITESPACE","\n\n        ",421],["T_VARIABLE","$localXml",423],["T_WHITESPACE"," ",423],"=",["T_WHITESPACE"," ",423],["T_VARIABLE","$tar",423],["T_WHITESPACE"," ",423],".",["T_WHITESPACE"," ",423],["T_STRING","Mage_Connect_Package_Reader",423],["T_DOUBLE_COLON","::",423],["T_STRING","DEFAULT_NAME_PACKAGE",423],";",["T_WHITESPACE","\n        ",423],["T_IF","if",424],["T_WHITESPACE"," ",424],"(",["T_STRING","is_file",424],"(",["T_VARIABLE","$localXml",424],")",")",["T_WHITESPACE"," ",424],"{",["T_WHITESPACE","\n            ",424],["T_VARIABLE","$remoteXml",425],["T_WHITESPACE"," ",425],"=",["T_WHITESPACE"," ",425],["T_STRING","Mage_Connect_Package",425],["T_DOUBLE_COLON","::",425],["T_STRING","PACKAGE_XML_DIR",425],["T_WHITESPACE"," ",425],".",["T_WHITESPACE"," ",425],["T_STRING","DS",425],["T_WHITESPACE"," ",425],".",["T_WHITESPACE"," ",425],["T_VARIABLE","$package",425],["T_OBJECT_OPERATOR","->",425],["T_STRING","getReleaseFilename",425],"(",")",["T_WHITESPACE"," ",425],".",["T_WHITESPACE"," ",425],["T_CONSTANT_ENCAPSED_STRING","'.xml'",425],";",["T_WHITESPACE","\n            ",425],["T_VARIABLE","$ftp",426],["T_OBJECT_OPERATOR","->",426],["T_STRING","upload",426],"(",["T_VARIABLE","$remoteXml",426],",",["T_WHITESPACE"," ",426],["T_VARIABLE","$localXml",426],",",["T_WHITESPACE"," ",426],["T_VARIABLE","$modeDir",426],",",["T_WHITESPACE"," ",426],["T_VARIABLE","$modeFile",426],")",";",["T_WHITESPACE","\n        ",426],"}",["T_WHITESPACE","\n\n        ",427],["T_VARIABLE","$ftp",429],["T_OBJECT_OPERATOR","->",429],["T_STRING","chdir",429],"(",["T_VARIABLE","$ftpDir",429],")",";",["T_WHITESPACE","\n        ",429],["T_STRING","Mage_System_Dirs",430],["T_DOUBLE_COLON","::",430],["T_STRING","rm",430],"(",["T_ARRAY","array",430],"(",["T_CONSTANT_ENCAPSED_STRING","\"-r\"",430],",",["T_VARIABLE","$target",430],")",")",";",["T_WHITESPACE","\n    ",430],"}",["T_WHITESPACE","\n\n    ",431],["T_DOC_COMMENT","\/**\n     * Package installation to FS\n     *\n     * @param Mage_Connect_Package $package\n     * @param string $file\n     * @param Mage_Connect_Config $configObj\n     * @return void\n     *\/",433],["T_WHITESPACE","\n    ",440],["T_PUBLIC","public",441],["T_WHITESPACE"," ",441],["T_FUNCTION","function",441],["T_WHITESPACE"," ",441],["T_STRING","processInstallPackage",441],"(",["T_VARIABLE","$package",441],",",["T_WHITESPACE"," ",441],["T_VARIABLE","$file",441],",",["T_WHITESPACE"," ",441],["T_VARIABLE","$configObj",441],")",["T_WHITESPACE","\n    ",441],"{",["T_WHITESPACE","\n        ",442],["T_VARIABLE","$contents",443],["T_WHITESPACE"," ",443],"=",["T_WHITESPACE"," ",443],["T_VARIABLE","$package",443],["T_OBJECT_OPERATOR","->",443],["T_STRING","getContents",443],"(",")",";",["T_WHITESPACE","\n        ",443],["T_VARIABLE","$arc",444],["T_WHITESPACE"," ",444],"=",["T_WHITESPACE"," ",444],["T_VARIABLE","$this",444],["T_OBJECT_OPERATOR","->",444],["T_STRING","getArchiver",444],"(",")",";",["T_WHITESPACE","\n        ",444],["T_VARIABLE","$target",445],["T_WHITESPACE"," ",445],"=",["T_WHITESPACE"," ",445],["T_STRING","dirname",445],"(",["T_VARIABLE","$file",445],")",["T_WHITESPACE"," ",445],".",["T_WHITESPACE"," ",445],["T_STRING","DS",445],["T_WHITESPACE"," ",445],".",["T_WHITESPACE"," ",445],["T_VARIABLE","$package",445],["T_OBJECT_OPERATOR","->",445],["T_STRING","getReleaseFilename",445],"(",")",";",["T_WHITESPACE","\n        ",445],"@",["T_STRING","mkdir",446],"(",["T_VARIABLE","$target",446],",",["T_WHITESPACE"," ",446],["T_LNUMBER","0777",446],",",["T_WHITESPACE"," ",446],["T_STRING","true",446],")",";",["T_WHITESPACE","\n        ",446],["T_VARIABLE","$tar",447],["T_WHITESPACE"," ",447],"=",["T_WHITESPACE"," ",447],["T_VARIABLE","$arc",447],["T_OBJECT_OPERATOR","->",447],["T_STRING","unpack",447],"(",["T_VARIABLE","$file",447],",",["T_WHITESPACE"," ",447],["T_VARIABLE","$target",447],")",";",["T_WHITESPACE","\n        ",447],["T_VARIABLE","$modeFile",448],["T_WHITESPACE"," ",448],"=",["T_WHITESPACE"," ",448],["T_VARIABLE","$this",448],["T_OBJECT_OPERATOR","->",448],["T_STRING","_getFileMode",448],"(",["T_VARIABLE","$configObj",448],")",";",["T_WHITESPACE","\n        ",448],["T_VARIABLE","$modeDir",449],["T_WHITESPACE"," ",449],"=",["T_WHITESPACE"," ",449],["T_VARIABLE","$this",449],["T_OBJECT_OPERATOR","->",449],["T_STRING","_getDirMode",449],"(",["T_VARIABLE","$configObj",449],")",";",["T_WHITESPACE","\n        ",449],["T_VARIABLE","$targetPath",450],["T_WHITESPACE"," ",450],"=",["T_WHITESPACE"," ",450],["T_STRING","rtrim",450],"(",["T_VARIABLE","$configObj",450],["T_OBJECT_OPERATOR","->",450],["T_STRING","magento_root",450],",",["T_WHITESPACE"," ",450],["T_CONSTANT_ENCAPSED_STRING","\"\\\\\/\"",450],")",";",["T_WHITESPACE","\n        ",450],["T_VARIABLE","$packageXmlDir",451],["T_WHITESPACE"," ",451],"=",["T_WHITESPACE"," ",451],["T_VARIABLE","$targetPath",451],["T_WHITESPACE"," ",451],".",["T_WHITESPACE"," ",451],["T_STRING","DS",451],["T_WHITESPACE"," ",451],".",["T_WHITESPACE"," ",451],["T_STRING","Mage_Connect_Package",451],["T_DOUBLE_COLON","::",451],["T_STRING","PACKAGE_XML_DIR",451],";",["T_WHITESPACE","\n        ",451],["T_IF","if",452],["T_WHITESPACE"," ",452],"(","!",["T_VARIABLE","$this",452],["T_OBJECT_OPERATOR","->",452],["T_STRING","isDirWritable",452],"(",["T_VARIABLE","$packageXmlDir",452],")",")",["T_WHITESPACE"," ",452],"{",["T_WHITESPACE","\n            ",452],["T_THROW","throw",453],["T_WHITESPACE"," ",453],["T_NEW","new",453],["T_WHITESPACE"," ",453],["T_STRING","RuntimeException",453],"(",["T_CONSTANT_ENCAPSED_STRING","'Directory '",453],["T_WHITESPACE"," ",453],".",["T_WHITESPACE"," ",453],["T_VARIABLE","$packageXmlDir",453],["T_WHITESPACE"," ",453],".",["T_WHITESPACE"," ",453],["T_CONSTANT_ENCAPSED_STRING","' is not writable. Check permission'",453],")",";",["T_WHITESPACE","\n        ",453],"}",["T_WHITESPACE","\n        ",454],["T_VARIABLE","$this",455],["T_OBJECT_OPERATOR","->",455],["T_STRING","_makeDirectories",455],"(",["T_VARIABLE","$contents",455],",",["T_WHITESPACE"," ",455],["T_VARIABLE","$targetPath",455],",",["T_WHITESPACE"," ",455],["T_VARIABLE","$modeDir",455],")",";",["T_WHITESPACE","\n        ",455],["T_FOREACH","foreach",456],["T_WHITESPACE"," ",456],"(",["T_VARIABLE","$contents",456],["T_WHITESPACE"," ",456],["T_AS","as",456],["T_WHITESPACE"," ",456],["T_VARIABLE","$file",456],")",["T_WHITESPACE"," ",456],"{",["T_WHITESPACE","\n            ",456],["T_VARIABLE","$fileName",457],["T_WHITESPACE"," ",457],"=",["T_WHITESPACE"," ",457],["T_STRING","basename",457],"(",["T_VARIABLE","$file",457],")",";",["T_WHITESPACE","\n            ",457],["T_VARIABLE","$filePath",458],["T_WHITESPACE"," ",458],"=",["T_WHITESPACE"," ",458],["T_STRING","dirname",458],"(",["T_VARIABLE","$file",458],")",";",["T_WHITESPACE","\n            ",458],["T_VARIABLE","$source",459],["T_WHITESPACE"," ",459],"=",["T_WHITESPACE"," ",459],["T_VARIABLE","$tar",459],["T_WHITESPACE"," ",459],".",["T_WHITESPACE"," ",459],["T_STRING","DS",459],["T_WHITESPACE"," ",459],".",["T_WHITESPACE"," ",459],["T_VARIABLE","$file",459],";",["T_WHITESPACE","\n            ",459],["T_VARIABLE","$dest",460],["T_WHITESPACE"," ",460],"=",["T_WHITESPACE"," ",460],["T_VARIABLE","$targetPath",460],["T_WHITESPACE"," ",460],".",["T_WHITESPACE"," ",460],["T_STRING","DS",460],["T_WHITESPACE"," ",460],".",["T_WHITESPACE"," ",460],["T_VARIABLE","$filePath",460],["T_WHITESPACE"," ",460],".",["T_WHITESPACE"," ",460],["T_STRING","DS",460],["T_WHITESPACE"," ",460],".",["T_WHITESPACE"," ",460],["T_VARIABLE","$fileName",460],";",["T_WHITESPACE","\n            ",460],["T_IF","if",461],["T_WHITESPACE"," ",461],"(",["T_STRING","is_file",461],"(",["T_VARIABLE","$source",461],")",["T_WHITESPACE"," ",461],["T_BOOLEAN_AND","&&",461],["T_WHITESPACE"," ",461],"(",["T_VARIABLE","$fileName",461],["T_WHITESPACE"," ",461],["T_IS_NOT_EQUAL","!=",461],["T_WHITESPACE"," ",461],["T_CONSTANT_ENCAPSED_STRING","'.htaccess'",461],["T_WHITESPACE"," ",461],["T_BOOLEAN_OR","||",461],["T_WHITESPACE"," ",461],"!",["T_STRING","is_file",461],"(",["T_VARIABLE","$dest",461],")",")",")",["T_WHITESPACE"," ",461],"{",["T_WHITESPACE","\n                ",461],"@",["T_STRING","copy",462],"(",["T_VARIABLE","$source",462],",",["T_WHITESPACE"," ",462],["T_VARIABLE","$dest",462],")",";",["T_WHITESPACE","\n                ",462],["T_IF","if",463],"(",["T_VARIABLE","$modeFile",463],")",["T_WHITESPACE"," ",463],"{",["T_WHITESPACE","\n                    ",463],"@",["T_STRING","chmod",464],"(",["T_VARIABLE","$dest",464],",",["T_WHITESPACE"," ",464],["T_VARIABLE","$modeFile",464],")",";",["T_WHITESPACE","\n                ",464],"}",["T_WHITESPACE","\n            ",465],"}",["T_WHITESPACE"," ",466],["T_ELSE","else",466],["T_WHITESPACE"," ",466],"{",["T_WHITESPACE","\n                ",466],"@",["T_STRING","mkdir",467],"(",["T_VARIABLE","$dest",467],",",["T_WHITESPACE"," ",467],["T_VARIABLE","$modeDir",467],")",";",["T_WHITESPACE","\n            ",467],"}",["T_WHITESPACE","\n        ",468],"}",["T_WHITESPACE","\n\n        ",469],["T_VARIABLE","$packageXml",471],["T_WHITESPACE"," ",471],"=",["T_WHITESPACE"," ",471],["T_VARIABLE","$tar",471],["T_WHITESPACE"," ",471],".",["T_WHITESPACE"," ",471],["T_STRING","Mage_Connect_Package_Reader",471],["T_DOUBLE_COLON","::",471],["T_STRING","DEFAULT_NAME_PACKAGE",471],";",["T_WHITESPACE","\n        ",471],["T_IF","if",472],["T_WHITESPACE"," ",472],"(",["T_STRING","is_file",472],"(",["T_VARIABLE","$packageXml",472],")",")",["T_WHITESPACE"," ",472],"{",["T_WHITESPACE","\n            ",472],["T_VARIABLE","$destDir",473],["T_WHITESPACE"," ",473],"=",["T_WHITESPACE"," ",473],["T_VARIABLE","$targetPath",473],["T_WHITESPACE"," ",473],".",["T_WHITESPACE"," ",473],["T_STRING","DS",473],["T_WHITESPACE"," ",473],".",["T_WHITESPACE"," ",473],["T_STRING","Mage_Connect_Package",473],["T_DOUBLE_COLON","::",473],["T_STRING","PACKAGE_XML_DIR",473],";",["T_WHITESPACE","\n            ",473],["T_VARIABLE","$destFile",474],["T_WHITESPACE"," ",474],"=",["T_WHITESPACE"," ",474],["T_VARIABLE","$package",474],["T_OBJECT_OPERATOR","->",474],["T_STRING","getReleaseFilename",474],"(",")",["T_WHITESPACE"," ",474],".",["T_WHITESPACE"," ",474],["T_CONSTANT_ENCAPSED_STRING","'.xml'",474],";",["T_WHITESPACE","\n            ",474],["T_VARIABLE","$dest",475],["T_WHITESPACE"," ",475],"=",["T_WHITESPACE"," ",475],["T_VARIABLE","$destDir",475],["T_WHITESPACE"," ",475],".",["T_WHITESPACE"," ",475],["T_STRING","DS",475],["T_WHITESPACE"," ",475],".",["T_WHITESPACE"," ",475],["T_VARIABLE","$destFile",475],";",["T_WHITESPACE","\n\n            ",475],"@",["T_STRING","copy",477],"(",["T_VARIABLE","$packageXml",477],",",["T_WHITESPACE"," ",477],["T_VARIABLE","$dest",477],")",";",["T_WHITESPACE","\n            ",477],"@",["T_STRING","chmod",478],"(",["T_VARIABLE","$dest",478],",",["T_WHITESPACE"," ",478],["T_VARIABLE","$modeFile",478],")",";",["T_WHITESPACE","\n        ",478],"}",["T_WHITESPACE","\n\n        ",479],["T_STRING","Mage_System_Dirs",481],["T_DOUBLE_COLON","::",481],["T_STRING","rm",481],"(",["T_ARRAY","array",481],"(",["T_CONSTANT_ENCAPSED_STRING","\"-r\"",481],",",["T_VARIABLE","$target",481],")",")",";",["T_WHITESPACE","\n    ",481],"}",["T_WHITESPACE","\n\n    ",482],["T_DOC_COMMENT","\/**\n     * Make directories\n     *\n     * @param array $content\n     * @param string $targetPath\n     * @param int $modeDir\n     * @throws RuntimeException\n     *\/",484],["T_WHITESPACE","\n    ",491],["T_PROTECTED","protected",492],["T_WHITESPACE"," ",492],["T_FUNCTION","function",492],["T_WHITESPACE"," ",492],["T_STRING","_makeDirectories",492],"(",["T_VARIABLE","$content",492],",",["T_WHITESPACE"," ",492],["T_VARIABLE","$targetPath",492],",",["T_WHITESPACE"," ",492],["T_VARIABLE","$modeDir",492],")",["T_WHITESPACE","\n    ",492],"{",["T_WHITESPACE","\n        ",493],["T_VARIABLE","$failedDirs",494],["T_WHITESPACE"," ",494],"=",["T_WHITESPACE"," ",494],["T_ARRAY","array",494],"(",")",";",["T_WHITESPACE","\n        ",494],["T_VARIABLE","$createdDirs",495],["T_WHITESPACE"," ",495],"=",["T_WHITESPACE"," ",495],["T_ARRAY","array",495],"(",")",";",["T_WHITESPACE","\n        ",495],["T_FOREACH","foreach",496],["T_WHITESPACE"," ",496],"(",["T_VARIABLE","$content",496],["T_WHITESPACE"," ",496],["T_AS","as",496],["T_WHITESPACE"," ",496],["T_VARIABLE","$file",496],")",["T_WHITESPACE"," ",496],"{",["T_WHITESPACE","\n            ",496],["T_VARIABLE","$dirPath",497],["T_WHITESPACE"," ",497],"=",["T_WHITESPACE"," ",497],["T_STRING","dirname",497],"(",["T_VARIABLE","$file",497],")",";",["T_WHITESPACE","\n            ",497],["T_IF","if",498],["T_WHITESPACE"," ",498],"(",["T_STRING","is_dir",498],"(",["T_VARIABLE","$dirPath",498],")",["T_WHITESPACE"," ",498],["T_BOOLEAN_AND","&&",498],["T_WHITESPACE"," ",498],["T_VARIABLE","$this",498],["T_OBJECT_OPERATOR","->",498],["T_STRING","isDirWritable",498],"(",["T_VARIABLE","$dirPath",498],")",")",["T_WHITESPACE"," ",498],"{",["T_WHITESPACE","\n                ",498],["T_CONTINUE","continue",499],";",["T_WHITESPACE","\n            ",499],"}",["T_WHITESPACE","\n            ",500],["T_IF","if",501],["T_WHITESPACE"," ",501],"(","!",["T_STRING","mkdir",501],"(",["T_VARIABLE","$targetPath",501],["T_WHITESPACE"," ",501],".",["T_WHITESPACE"," ",501],["T_STRING","DS",501],["T_WHITESPACE"," ",501],".",["T_WHITESPACE"," ",501],["T_VARIABLE","$dirPath",501],",",["T_WHITESPACE"," ",501],["T_VARIABLE","$modeDir",501],",",["T_WHITESPACE"," ",501],["T_STRING","true",501],")",")",["T_WHITESPACE"," ",501],"{",["T_WHITESPACE","\n                ",501],["T_VARIABLE","$failedDirs",502],"[","]",["T_WHITESPACE"," ",502],"=",["T_WHITESPACE"," ",502],["T_STRING","Mage_System_Dirs",502],["T_DOUBLE_COLON","::",502],["T_STRING","getFilteredPath",502],"(",["T_VARIABLE","$targetPath",502],["T_WHITESPACE"," ",502],".",["T_WHITESPACE"," ",502],["T_STRING","DS",502],["T_WHITESPACE"," ",502],".",["T_WHITESPACE","  ",502],["T_VARIABLE","$dirPath",502],")",";",["T_WHITESPACE","\n            ",502],"}",["T_WHITESPACE"," ",503],["T_ELSE","else",503],["T_WHITESPACE"," ",503],"{",["T_WHITESPACE","\n                ",503],["T_VARIABLE","$createdDirs",504],"[","]",["T_WHITESPACE"," ",504],"=",["T_WHITESPACE"," ",504],["T_VARIABLE","$targetPath",504],["T_WHITESPACE"," ",504],".",["T_WHITESPACE"," ",504],["T_STRING","DS",504],["T_WHITESPACE"," ",504],".",["T_WHITESPACE"," ",504],["T_VARIABLE","$dirPath",504],";",["T_WHITESPACE","\n            ",504],"}",["T_WHITESPACE","\n        ",505],"}",["T_WHITESPACE","\n        ",506],["T_IF","if",507],["T_WHITESPACE"," ",507],"(","!",["T_EMPTY","empty",507],"(",["T_VARIABLE","$failedDirs",507],")",")",["T_WHITESPACE"," ",507],"{",["T_WHITESPACE","\n            ",507],["T_FOREACH","foreach",508],["T_WHITESPACE"," ",508],"(",["T_VARIABLE","$createdDirs",508],["T_WHITESPACE"," ",508],["T_AS","as",508],["T_WHITESPACE"," ",508],["T_VARIABLE","$createdDir",508],")",["T_WHITESPACE"," ",508],"{",["T_WHITESPACE","\n                ",508],["T_VARIABLE","$this",509],["T_OBJECT_OPERATOR","->",509],["T_STRING","removeEmptyDirectory",509],"(",["T_VARIABLE","$createdDir",509],")",";",["T_WHITESPACE","\n            ",509],"}",["T_WHITESPACE","\n            ",510],["T_VARIABLE","$msg",511],["T_WHITESPACE"," ",511],"=",["T_WHITESPACE"," ",511],["T_STRING","sprintf",511],"(",["T_CONSTANT_ENCAPSED_STRING","\"Failed to create directory:\\r\\n%s\\r\\n Check permissions\"",511],",",["T_WHITESPACE"," ",511],["T_STRING","implode",511],"(",["T_CONSTANT_ENCAPSED_STRING","\"\\r\\n\"",511],",",["T_WHITESPACE"," ",511],["T_VARIABLE","$failedDirs",511],")",")",";",["T_WHITESPACE","\n            ",511],["T_THROW","throw",512],["T_WHITESPACE"," ",512],["T_NEW","new",512],["T_WHITESPACE"," ",512],["T_STRING","RuntimeException",512],"(",["T_VARIABLE","$msg",512],")",";",["T_WHITESPACE","\n        ",512],"}",["T_WHITESPACE","\n    ",513],"}",["T_WHITESPACE","\n\n    ",514],["T_DOC_COMMENT","\/**\n     * Get local modified files\n     *\n     * @param string $chanName\n     * @param string $package\n     * @param Mage_Connect_Singleconfig $cacheObj\n     * @param Mage_Connect_Config $configObj\n     * @return array\n     *\/",516],["T_WHITESPACE","\n    ",524],["T_PUBLIC","public",525],["T_WHITESPACE"," ",525],["T_FUNCTION","function",525],["T_WHITESPACE"," ",525],["T_STRING","getLocalModifiedFiles",525],"(",["T_VARIABLE","$chanName",525],",",["T_WHITESPACE"," ",525],["T_VARIABLE","$package",525],",",["T_WHITESPACE"," ",525],["T_VARIABLE","$cacheObj",525],",",["T_WHITESPACE"," ",525],["T_VARIABLE","$configObj",525],")",["T_WHITESPACE","\n    ",525],"{",["T_WHITESPACE","\n        ",526],["T_VARIABLE","$p",527],["T_WHITESPACE"," ",527],"=",["T_WHITESPACE"," ",527],["T_VARIABLE","$cacheObj",527],["T_OBJECT_OPERATOR","->",527],["T_STRING","getPackageObject",527],"(",["T_VARIABLE","$chanName",527],",",["T_WHITESPACE"," ",527],["T_VARIABLE","$package",527],")",";",["T_WHITESPACE","\n        ",527],["T_VARIABLE","$hashContents",528],["T_WHITESPACE"," ",528],"=",["T_WHITESPACE"," ",528],["T_VARIABLE","$p",528],["T_OBJECT_OPERATOR","->",528],["T_STRING","getHashContents",528],"(",")",";",["T_WHITESPACE","\n        ",528],["T_VARIABLE","$listModified",529],["T_WHITESPACE"," ",529],"=",["T_WHITESPACE"," ",529],["T_ARRAY","array",529],"(",")",";",["T_WHITESPACE","\n        ",529],["T_FOREACH","foreach",530],["T_WHITESPACE"," ",530],"(",["T_VARIABLE","$hashContents",530],["T_WHITESPACE"," ",530],["T_AS","as",530],["T_WHITESPACE"," ",530],["T_VARIABLE","$file",530],["T_DOUBLE_ARROW","=>",530],["T_VARIABLE","$hash",530],")",["T_WHITESPACE"," ",530],"{",["T_WHITESPACE","\n            ",530],["T_IF","if",531],["T_WHITESPACE"," ",531],"(",["T_STRING","md5_file",531],"(",["T_VARIABLE","$configObj",531],["T_OBJECT_OPERATOR","->",531],["T_STRING","magento_root",531],["T_WHITESPACE"," ",531],".",["T_WHITESPACE"," ",531],["T_STRING","DS",531],["T_WHITESPACE"," ",531],".",["T_WHITESPACE"," ",531],["T_VARIABLE","$file",531],")",["T_IS_NOT_IDENTICAL","!==",531],["T_VARIABLE","$hash",531],")",["T_WHITESPACE"," ",531],"{",["T_WHITESPACE","\n                ",531],["T_VARIABLE","$listModified",532],"[","]",["T_WHITESPACE"," ",532],"=",["T_WHITESPACE"," ",532],["T_VARIABLE","$file",532],";",["T_WHITESPACE","\n            ",532],"}",["T_WHITESPACE","\n        ",533],"}",["T_WHITESPACE","\n        ",534],["T_RETURN","return",535],["T_WHITESPACE"," ",535],["T_VARIABLE","$listModified",535],";",["T_WHITESPACE","\n    ",535],"}",["T_WHITESPACE","\n\n    ",536],["T_DOC_COMMENT","\/**\n     * Get remote modified files\n     *\n     * @param string $chanName\n     * @param string $package\n     * @param Mage_Connect_Singleconfig $cacheObj\n     * @param Mage_Connect_Ftp $ftp\n     * @return array\n     *\/",538],["T_WHITESPACE","\n    ",546],["T_PUBLIC","public",547],["T_WHITESPACE"," ",547],["T_FUNCTION","function",547],["T_WHITESPACE"," ",547],["T_STRING","getRemoteModifiedFiles",547],"(",["T_VARIABLE","$chanName",547],",",["T_WHITESPACE"," ",547],["T_VARIABLE","$package",547],",",["T_WHITESPACE"," ",547],["T_VARIABLE","$cacheObj",547],",",["T_WHITESPACE"," ",547],["T_VARIABLE","$ftp",547],")",["T_WHITESPACE","\n    ",547],"{",["T_WHITESPACE","\n        ",548],["T_VARIABLE","$p",549],["T_WHITESPACE"," ",549],"=",["T_WHITESPACE"," ",549],["T_VARIABLE","$cacheObj",549],["T_OBJECT_OPERATOR","->",549],["T_STRING","getPackageObject",549],"(",["T_VARIABLE","$chanName",549],",",["T_WHITESPACE"," ",549],["T_VARIABLE","$package",549],")",";",["T_WHITESPACE","\n        ",549],["T_VARIABLE","$hashContents",550],["T_WHITESPACE"," ",550],"=",["T_WHITESPACE"," ",550],["T_VARIABLE","$p",550],["T_OBJECT_OPERATOR","->",550],["T_STRING","getHashContents",550],"(",")",";",["T_WHITESPACE","\n        ",550],["T_VARIABLE","$listModified",551],["T_WHITESPACE"," ",551],"=",["T_WHITESPACE"," ",551],["T_ARRAY","array",551],"(",")",";",["T_WHITESPACE","\n        ",551],["T_FOREACH","foreach",552],["T_WHITESPACE"," ",552],"(",["T_VARIABLE","$hashContents",552],["T_WHITESPACE"," ",552],["T_AS","as",552],["T_WHITESPACE"," ",552],["T_VARIABLE","$file",552],["T_DOUBLE_ARROW","=>",552],["T_VARIABLE","$hash",552],")",["T_WHITESPACE"," ",552],"{",["T_WHITESPACE","\n            ",552],["T_VARIABLE","$localFile",553],["T_WHITESPACE"," ",553],"=",["T_WHITESPACE"," ",553],["T_STRING","uniqid",553],"(",["T_CONSTANT_ENCAPSED_STRING","\"temp_remote_\"",553],")",";",["T_WHITESPACE","\n            ",553],["T_IF","if",554],"(","!",["T_VARIABLE","$ftp",554],["T_OBJECT_OPERATOR","->",554],["T_STRING","fileExists",554],"(",["T_VARIABLE","$file",554],")",")",["T_WHITESPACE"," ",554],"{",["T_WHITESPACE","\n                ",554],["T_CONTINUE","continue",555],";",["T_WHITESPACE","\n            ",555],"}",["T_WHITESPACE","\n            ",556],["T_VARIABLE","$ftp",557],["T_OBJECT_OPERATOR","->",557],["T_STRING","get",557],"(",["T_VARIABLE","$localFile",557],",",["T_WHITESPACE"," ",557],["T_VARIABLE","$file",557],")",";",["T_WHITESPACE","\n            ",557],["T_IF","if",558],["T_WHITESPACE"," ",558],"(",["T_STRING","file_exists",558],"(",["T_VARIABLE","$localFile",558],")",["T_WHITESPACE"," ",558],["T_BOOLEAN_AND","&&",558],["T_WHITESPACE"," ",558],["T_STRING","md5_file",558],"(",["T_VARIABLE","$localFile",558],")",["T_IS_NOT_IDENTICAL","!==",558],["T_VARIABLE","$hash",558],")",["T_WHITESPACE"," ",558],"{",["T_WHITESPACE","\n                ",558],["T_VARIABLE","$listModified",559],"[","]",["T_WHITESPACE"," ",559],"=",["T_WHITESPACE"," ",559],["T_VARIABLE","$file",559],";",["T_WHITESPACE","\n            ",559],"}",["T_WHITESPACE","\n            ",560],"@",["T_STRING","unlink",561],"(",["T_VARIABLE","$localFile",561],")",";",["T_WHITESPACE","\n        ",561],"}",["T_WHITESPACE","\n        ",562],["T_RETURN","return",563],["T_WHITESPACE"," ",563],["T_VARIABLE","$listModified",563],";",["T_WHITESPACE","\n    ",563],"}",["T_WHITESPACE","\n\n    ",564],["T_DOC_COMMENT","\/**\n     * Get upgrades list\n     *\n     * @param string|array $channels\n     * @param Mage_Connect_Singleconfig $cacheObject\n     * @param Mage_Connect_Config $configObj\n     * @param Mage_Connect_Rest $restObj optional\n     * @param bool $checkConflicts\n     * @return array\n     *\/",566],["T_WHITESPACE","\n    ",575],["T_PUBLIC","public",576],["T_WHITESPACE"," ",576],["T_FUNCTION","function",576],["T_WHITESPACE"," ",576],["T_STRING","getUpgradesList",576],"(",["T_VARIABLE","$channels",576],",",["T_WHITESPACE"," ",576],["T_VARIABLE","$cacheObject",576],",",["T_WHITESPACE"," ",576],["T_VARIABLE","$configObj",576],",",["T_WHITESPACE"," ",576],["T_VARIABLE","$restObj",576],["T_WHITESPACE"," ",576],"=",["T_WHITESPACE"," ",576],["T_STRING","null",576],",",["T_WHITESPACE"," ",576],["T_VARIABLE","$checkConflicts",576],["T_WHITESPACE"," ",576],"=",["T_WHITESPACE"," ",576],["T_STRING","false",576],")",["T_WHITESPACE","\n    ",576],"{",["T_WHITESPACE","\n        ",577],["T_IF","if",578],"(",["T_STRING","is_scalar",578],"(",["T_VARIABLE","$channels",578],")",")",["T_WHITESPACE"," ",578],"{",["T_WHITESPACE","\n            ",578],["T_VARIABLE","$channels",579],["T_WHITESPACE"," ",579],"=",["T_WHITESPACE"," ",579],["T_ARRAY","array",579],"(",["T_VARIABLE","$channels",579],")",";",["T_WHITESPACE","\n        ",579],"}",["T_WHITESPACE","\n\n        ",580],["T_IF","if",582],"(","!",["T_VARIABLE","$restObj",582],")",["T_WHITESPACE"," ",582],"{",["T_WHITESPACE","\n            ",582],["T_VARIABLE","$restObj",583],["T_WHITESPACE"," ",583],"=",["T_WHITESPACE"," ",583],["T_STRING","Mage_Connect_Rest_Builder",583],["T_DOUBLE_COLON","::",583],["T_STRING","getAdapter",583],"(",["T_VARIABLE","$configObj",583],["T_OBJECT_OPERATOR","->",583],["T_STRING","protocol",583],")",";",["T_WHITESPACE","\n        ",583],"}",["T_WHITESPACE","\n\n        ",584],["T_VARIABLE","$updates",586],["T_WHITESPACE"," ",586],"=",["T_WHITESPACE"," ",586],["T_ARRAY","array",586],"(",")",";",["T_WHITESPACE","\n        ",586],["T_FOREACH","foreach",587],["T_WHITESPACE"," ",587],"(",["T_VARIABLE","$channels",587],["T_WHITESPACE"," ",587],["T_AS","as",587],["T_WHITESPACE"," ",587],["T_VARIABLE","$chan",587],")",["T_WHITESPACE"," ",587],"{",["T_WHITESPACE","\n\n            ",587],["T_IF","if",589],"(","!",["T_VARIABLE","$cacheObject",589],["T_OBJECT_OPERATOR","->",589],["T_STRING","isChannel",589],"(",["T_VARIABLE","$chan",589],")",")",["T_WHITESPACE"," ",589],"{",["T_WHITESPACE","\n                ",589],["T_CONTINUE","continue",590],";",["T_WHITESPACE","\n            ",590],"}",["T_WHITESPACE","\n            ",591],["T_VARIABLE","$chanName",592],["T_WHITESPACE"," ",592],"=",["T_WHITESPACE"," ",592],["T_VARIABLE","$cacheObject",592],["T_OBJECT_OPERATOR","->",592],["T_STRING","chanName",592],"(",["T_VARIABLE","$chan",592],")",";",["T_WHITESPACE","\n            ",592],["T_VARIABLE","$localPackages",593],["T_WHITESPACE"," ",593],"=",["T_WHITESPACE"," ",593],["T_VARIABLE","$cacheObject",593],["T_OBJECT_OPERATOR","->",593],["T_STRING","getInstalledPackages",593],"(",["T_VARIABLE","$chanName",593],")",";",["T_WHITESPACE","\n            ",593],["T_VARIABLE","$localPackages",594],["T_WHITESPACE"," ",594],"=",["T_WHITESPACE"," ",594],["T_VARIABLE","$localPackages",594],"[",["T_VARIABLE","$chanName",594],"]",";",["T_WHITESPACE","\n\n            ",594],["T_IF","if",596],"(","!",["T_STRING","count",596],"(",["T_VARIABLE","$localPackages",596],")",")",["T_WHITESPACE"," ",596],"{",["T_WHITESPACE","\n                ",596],["T_CONTINUE","continue",597],";",["T_WHITESPACE","\n            ",597],"}",["T_WHITESPACE","\n\n            ",598],["T_VARIABLE","$channel",600],["T_WHITESPACE"," ",600],"=",["T_WHITESPACE"," ",600],["T_VARIABLE","$cacheObject",600],["T_OBJECT_OPERATOR","->",600],["T_STRING","getChannel",600],"(",["T_VARIABLE","$chan",600],")",";",["T_WHITESPACE","\n            ",600],["T_VARIABLE","$uri",601],["T_WHITESPACE"," ",601],"=",["T_WHITESPACE"," ",601],["T_VARIABLE","$channel",601],"[",["T_STRING","Mage_Connect_Singleconfig",601],["T_DOUBLE_COLON","::",601],["T_STRING","K_URI",601],"]",";",["T_WHITESPACE","\n            ",601],["T_VARIABLE","$restObj",602],["T_OBJECT_OPERATOR","->",602],["T_STRING","setChannel",602],"(",["T_VARIABLE","$uri",602],")",";",["T_WHITESPACE","\n            ",602],["T_VARIABLE","$remotePackages",603],["T_WHITESPACE"," ",603],"=",["T_WHITESPACE"," ",603],["T_VARIABLE","$restObj",603],["T_OBJECT_OPERATOR","->",603],["T_STRING","getPackagesHashed",603],"(",")",";",["T_WHITESPACE","\n\n            ",603],["T_DOC_COMMENT","\/**\n             * Iterate packages of channel $chan\n             *\/",605],["T_WHITESPACE","\n            ",607],["T_VARIABLE","$state",608],["T_WHITESPACE"," ",608],"=",["T_WHITESPACE"," ",608],["T_VARIABLE","$configObj",608],["T_OBJECT_OPERATOR","->",608],["T_STRING","preferred_state",608],["T_WHITESPACE"," ",608],"?",["T_WHITESPACE"," ",608],["T_VARIABLE","$configObj",608],["T_OBJECT_OPERATOR","->",608],["T_STRING","preferred_state",608],["T_WHITESPACE"," ",608],":",["T_WHITESPACE"," ",608],["T_CONSTANT_ENCAPSED_STRING","\"stable\"",608],";",["T_WHITESPACE","\n\n            ",608],["T_FOREACH","foreach",610],["T_WHITESPACE"," ",610],"(",["T_VARIABLE","$localPackages",610],["T_WHITESPACE"," ",610],["T_AS","as",610],["T_WHITESPACE"," ",610],["T_VARIABLE","$localName",610],["T_DOUBLE_ARROW","=>",610],["T_VARIABLE","$localData",610],")",["T_WHITESPACE"," ",610],"{",["T_WHITESPACE","\n                ",610],["T_IF","if",611],"(","!",["T_ISSET","isset",611],"(",["T_VARIABLE","$remotePackages",611],"[",["T_VARIABLE","$localName",611],"]",")",")",["T_WHITESPACE"," ",611],"{",["T_WHITESPACE","\n                    ",611],["T_CONTINUE","continue",612],";",["T_WHITESPACE","\n                ",612],"}",["T_WHITESPACE","\n                ",613],["T_VARIABLE","$package",614],["T_WHITESPACE"," ",614],"=",["T_WHITESPACE"," ",614],["T_VARIABLE","$remotePackages",614],"[",["T_VARIABLE","$localName",614],"]",";",["T_WHITESPACE","\n                ",614],["T_VARIABLE","$neededToUpgrade",615],["T_WHITESPACE"," ",615],"=",["T_WHITESPACE"," ",615],["T_STRING","false",615],";",["T_WHITESPACE","\n                ",615],["T_VARIABLE","$remoteVersion",616],["T_WHITESPACE"," ",616],"=",["T_WHITESPACE"," ",616],["T_VARIABLE","$localVersion",616],["T_WHITESPACE"," ",616],"=",["T_WHITESPACE"," ",616],["T_STRING","trim",616],"(",["T_VARIABLE","$localData",616],"[",["T_STRING","Mage_Connect_Singleconfig",616],["T_DOUBLE_COLON","::",616],["T_STRING","K_VER",616],"]",")",";",["T_WHITESPACE","\n                ",616],["T_FOREACH","foreach",617],["T_WHITESPACE"," ",617],"(",["T_VARIABLE","$package",617],["T_WHITESPACE"," ",617],["T_AS","as",617],["T_WHITESPACE"," ",617],["T_VARIABLE","$version",617],["T_WHITESPACE"," ",617],["T_DOUBLE_ARROW","=>",617],["T_WHITESPACE"," ",617],["T_VARIABLE","$s",617],")",["T_WHITESPACE"," ",617],"{",["T_WHITESPACE","\n\n                    ",617],["T_IF","if",619],"(",["T_VARIABLE","$cacheObject",619],["T_OBJECT_OPERATOR","->",619],["T_STRING","compareStabilities",619],"(",["T_VARIABLE","$s",619],",",["T_WHITESPACE"," ",619],["T_VARIABLE","$state",619],")",["T_WHITESPACE"," ",619],"<",["T_WHITESPACE"," ",619],["T_LNUMBER","0",619],")",["T_WHITESPACE"," ",619],"{",["T_WHITESPACE","\n                        ",619],["T_CONTINUE","continue",620],";",["T_WHITESPACE","\n                    ",620],"}",["T_WHITESPACE","\n\n                    ",621],["T_IF","if",623],"(",["T_STRING","version_compare",623],"(",["T_VARIABLE","$version",623],",",["T_WHITESPACE"," ",623],["T_VARIABLE","$localVersion",623],",",["T_WHITESPACE"," ",623],["T_CONSTANT_ENCAPSED_STRING","\">\"",623],")",")",["T_WHITESPACE"," ",623],"{",["T_WHITESPACE","\n                        ",623],["T_VARIABLE","$neededToUpgrade",624],["T_WHITESPACE"," ",624],"=",["T_WHITESPACE"," ",624],["T_STRING","true",624],";",["T_WHITESPACE","\n                        ",624],["T_VARIABLE","$remoteVersion",625],["T_WHITESPACE"," ",625],"=",["T_WHITESPACE"," ",625],["T_VARIABLE","$version",625],";",["T_WHITESPACE","\n                    ",625],"}",["T_WHITESPACE","\n\n                    ",626],["T_IF","if",628],"(",["T_VARIABLE","$checkConflicts",628],")",["T_WHITESPACE"," ",628],"{",["T_WHITESPACE","\n                        ",628],["T_VARIABLE","$conflicts",629],["T_WHITESPACE"," ",629],"=",["T_WHITESPACE"," ",629],["T_VARIABLE","$cacheObject",629],["T_OBJECT_OPERATOR","->",629],["T_STRING","hasConflicts",629],"(",["T_VARIABLE","$chanName",629],",",["T_WHITESPACE"," ",629],["T_VARIABLE","$localName",629],",",["T_WHITESPACE"," ",629],["T_VARIABLE","$remoteVersion",629],")",";",["T_WHITESPACE","\n                        ",629],["T_IF","if",630],"(",["T_STRING","false",630],["T_WHITESPACE"," ",630],["T_IS_NOT_IDENTICAL","!==",630],["T_WHITESPACE"," ",630],["T_VARIABLE","$conflicts",630],")",["T_WHITESPACE"," ",630],"{",["T_WHITESPACE","\n                            ",630],["T_VARIABLE","$neededToUpgrade",631],["T_WHITESPACE"," ",631],"=",["T_WHITESPACE"," ",631],["T_STRING","false",631],";",["T_WHITESPACE","\n                        ",631],"}",["T_WHITESPACE","\n                    ",632],"}",["T_WHITESPACE","\n                ",633],"}",["T_WHITESPACE","\n                ",634],["T_IF","if",635],"(","!",["T_VARIABLE","$neededToUpgrade",635],")",["T_WHITESPACE"," ",635],"{",["T_WHITESPACE","\n                    ",635],["T_CONTINUE","continue",636],";",["T_WHITESPACE","\n                ",636],"}",["T_WHITESPACE","\n                ",637],["T_IF","if",638],"(","!",["T_ISSET","isset",638],"(",["T_VARIABLE","$updates",638],"[",["T_VARIABLE","$chanName",638],"]",")",")",["T_WHITESPACE"," ",638],"{",["T_WHITESPACE","\n                    ",638],["T_VARIABLE","$updates",639],"[",["T_VARIABLE","$chanName",639],"]",["T_WHITESPACE"," ",639],"=",["T_WHITESPACE"," ",639],["T_ARRAY","array",639],"(",")",";",["T_WHITESPACE","\n                ",639],"}",["T_WHITESPACE","\n                ",640],["T_VARIABLE","$updates",641],"[",["T_VARIABLE","$chanName",641],"]","[",["T_VARIABLE","$localName",641],"]",["T_WHITESPACE"," ",641],"=",["T_WHITESPACE"," ",641],["T_ARRAY","array",641],"(",["T_CONSTANT_ENCAPSED_STRING","\"from\"",641],["T_DOUBLE_ARROW","=>",641],["T_VARIABLE","$localVersion",641],",",["T_WHITESPACE"," ",641],["T_CONSTANT_ENCAPSED_STRING","\"to\"",641],["T_DOUBLE_ARROW","=>",641],["T_VARIABLE","$remoteVersion",641],")",";",["T_WHITESPACE","\n            ",641],"}",["T_WHITESPACE","\n        ",642],"}",["T_WHITESPACE","\n        ",643],["T_RETURN","return",644],["T_WHITESPACE"," ",644],["T_VARIABLE","$updates",644],";",["T_WHITESPACE","\n    ",644],"}",["T_WHITESPACE","\n\n    ",645],["T_DOC_COMMENT","\/**\n     * Get uninstall list\n     *\n     * @param string $chanName\n     * @param string $package\n     * @param Mage_Connect_Singleconfig $cache\n     * @param Mage_Connect_Config $config\n     * @param bool $withDepsRecursive\n     * @return array|null\n     *\/",647],["T_WHITESPACE","\n    ",656],["T_PUBLIC","public",657],["T_WHITESPACE"," ",657],["T_FUNCTION","function",657],["T_WHITESPACE"," ",657],["T_STRING","getUninstallList",657],"(",["T_VARIABLE","$chanName",657],",",["T_WHITESPACE"," ",657],["T_VARIABLE","$package",657],",",["T_WHITESPACE"," ",657],["T_VARIABLE","$cache",657],",",["T_WHITESPACE"," ",657],["T_VARIABLE","$config",657],",",["T_WHITESPACE"," ",657],["T_VARIABLE","$withDepsRecursive",657],["T_WHITESPACE"," ",657],"=",["T_WHITESPACE"," ",657],["T_STRING","true",657],")",["T_WHITESPACE","\n    ",657],"{",["T_WHITESPACE","\n        ",658],["T_STATIC","static",659],["T_WHITESPACE"," ",659],["T_VARIABLE","$level",659],["T_WHITESPACE"," ",659],"=",["T_WHITESPACE"," ",659],["T_LNUMBER","0",659],";",["T_WHITESPACE","\n        ",659],["T_STATIC","static",660],["T_WHITESPACE"," ",660],["T_VARIABLE","$hash",660],["T_WHITESPACE"," ",660],"=",["T_WHITESPACE"," ",660],["T_ARRAY","array",660],"(",")",";",["T_WHITESPACE","\n\n        ",660],["T_VARIABLE","$chanName",662],["T_WHITESPACE"," ",662],"=",["T_WHITESPACE"," ",662],["T_VARIABLE","$cache",662],["T_OBJECT_OPERATOR","->",662],["T_STRING","chanName",662],"(",["T_VARIABLE","$chanName",662],")",";",["T_WHITESPACE","\n        ",662],["T_VARIABLE","$level",663],["T_INC","++",663],";",["T_WHITESPACE","\n\n        ",663],["T_TRY","try",665],["T_WHITESPACE"," ",665],"{",["T_WHITESPACE","\n            ",665],["T_VARIABLE","$chanName",666],["T_WHITESPACE"," ",666],"=",["T_WHITESPACE"," ",666],["T_VARIABLE","$cache",666],["T_OBJECT_OPERATOR","->",666],["T_STRING","chanName",666],"(",["T_VARIABLE","$chanName",666],")",";",["T_WHITESPACE","\n            ",666],["T_IF","if",667],"(","!",["T_VARIABLE","$cache",667],["T_OBJECT_OPERATOR","->",667],["T_STRING","hasPackage",667],"(",["T_VARIABLE","$chanName",667],",",["T_WHITESPACE"," ",667],["T_VARIABLE","$package",667],")",")",["T_WHITESPACE"," ",667],"{",["T_WHITESPACE","\n                ",667],["T_VARIABLE","$level",668],["T_DEC","--",668],";",["T_WHITESPACE","\n                ",668],["T_IF","if",669],"(",["T_VARIABLE","$level",669],["T_WHITESPACE"," ",669],["T_IS_EQUAL","==",669],["T_WHITESPACE"," ",669],["T_LNUMBER","0",669],")",["T_WHITESPACE"," ",669],"{",["T_WHITESPACE","\n                    ",669],["T_VARIABLE","$hash",670],["T_WHITESPACE"," ",670],"=",["T_WHITESPACE"," ",670],["T_ARRAY","array",670],"(",")",";",["T_WHITESPACE","\n                    ",670],["T_RETURN","return",671],["T_WHITESPACE"," ",671],["T_ARRAY","array",671],"(",["T_CONSTANT_ENCAPSED_STRING","'list'",671],["T_DOUBLE_ARROW","=>",671],["T_ARRAY","array",671],"(",")",")",";",["T_WHITESPACE","\n                ",671],"}",["T_WHITESPACE","\n                ",672],["T_RETURN","return",673],["T_WHITESPACE"," ",673],["T_STRING","null",673],";",["T_WHITESPACE","\n            ",673],"}",["T_WHITESPACE","\n            ",674],["T_VARIABLE","$dependencies",675],["T_WHITESPACE"," ",675],"=",["T_WHITESPACE"," ",675],["T_VARIABLE","$cache",675],["T_OBJECT_OPERATOR","->",675],["T_STRING","getPackageDependencies",675],"(",["T_VARIABLE","$chanName",675],",",["T_WHITESPACE"," ",675],["T_VARIABLE","$package",675],")",";",["T_WHITESPACE","\n            ",675],["T_VARIABLE","$data",676],["T_WHITESPACE"," ",676],"=",["T_WHITESPACE"," ",676],["T_VARIABLE","$cache",676],["T_OBJECT_OPERATOR","->",676],["T_STRING","getPackage",676],"(",["T_VARIABLE","$chanName",676],",",["T_WHITESPACE"," ",676],["T_VARIABLE","$package",676],")",";",["T_WHITESPACE","\n            ",676],["T_VARIABLE","$version",677],["T_WHITESPACE"," ",677],"=",["T_WHITESPACE"," ",677],["T_VARIABLE","$data",677],"[",["T_CONSTANT_ENCAPSED_STRING","'version'",677],"]",";",["T_WHITESPACE","\n\n            ",677],["T_VARIABLE","$hash",679],"[",["T_VARIABLE","$chanName",679],["T_WHITESPACE"," ",679],".",["T_WHITESPACE"," ",679],["T_CONSTANT_ENCAPSED_STRING","\"\/\"",679],["T_WHITESPACE"," ",679],".",["T_WHITESPACE"," ",679],["T_VARIABLE","$package",679],"]",["T_WHITESPACE"," ",679],"=",["T_WHITESPACE"," ",679],["T_ARRAY","array",679],["T_WHITESPACE"," ",679],"(",["T_WHITESPACE","\n                        ",679],["T_CONSTANT_ENCAPSED_STRING","'name'",680],["T_WHITESPACE"," ",680],["T_DOUBLE_ARROW","=>",680],["T_WHITESPACE"," ",680],["T_VARIABLE","$package",680],",",["T_WHITESPACE","\n                        ",680],["T_CONSTANT_ENCAPSED_STRING","'channel'",681],["T_WHITESPACE"," ",681],["T_DOUBLE_ARROW","=>",681],["T_WHITESPACE"," ",681],["T_VARIABLE","$chanName",681],",",["T_WHITESPACE","\n                        ",681],["T_CONSTANT_ENCAPSED_STRING","'version'",682],["T_WHITESPACE"," ",682],["T_DOUBLE_ARROW","=>",682],["T_WHITESPACE"," ",682],["T_VARIABLE","$version",682],",",["T_WHITESPACE","\n                        ",682],["T_CONSTANT_ENCAPSED_STRING","'packages'",683],["T_WHITESPACE"," ",683],["T_DOUBLE_ARROW","=>",683],["T_WHITESPACE"," ",683],["T_VARIABLE","$dependencies",683],",",["T_WHITESPACE","\n            ",683],")",";",["T_WHITESPACE","\n\n            ",684],["T_IF","if",686],"(",["T_VARIABLE","$withDepsRecursive",686],")",["T_WHITESPACE"," ",686],"{",["T_WHITESPACE","\n                ",686],["T_VARIABLE","$fields",687],["T_WHITESPACE"," ",687],"=",["T_WHITESPACE"," ",687],["T_ARRAY","array",687],"(",["T_CONSTANT_ENCAPSED_STRING","'name'",687],",",["T_CONSTANT_ENCAPSED_STRING","'channel'",687],",",["T_CONSTANT_ENCAPSED_STRING","'min'",687],",",["T_CONSTANT_ENCAPSED_STRING","'max'",687],")",";",["T_WHITESPACE","\n                ",687],["T_FOREACH","foreach",688],["T_WHITESPACE"," ",688],"(",["T_VARIABLE","$dependencies",688],["T_WHITESPACE"," ",688],["T_AS","as",688],["T_WHITESPACE"," ",688],["T_VARIABLE","$row",688],")",["T_WHITESPACE"," ",688],"{",["T_WHITESPACE","\n                    ",688],["T_DOC_COMMENT","\/**\n                     * Converts an array to variables\n                     * @var $pChannel string Channel Name\n                     * @var $pName string Package Name\n                     *\/",689],["T_WHITESPACE","\n                    ",693],["T_FOREACH","foreach",694],["T_WHITESPACE"," ",694],"(",["T_VARIABLE","$fields",694],["T_WHITESPACE"," ",694],["T_AS","as",694],["T_WHITESPACE"," ",694],["T_VARIABLE","$key",694],")",["T_WHITESPACE"," ",694],"{",["T_WHITESPACE","\n                        ",694],["T_VARIABLE","$varName",695],["T_WHITESPACE"," ",695],"=",["T_WHITESPACE"," ",695],["T_CONSTANT_ENCAPSED_STRING","\"p\"",695],["T_WHITESPACE"," ",695],".",["T_WHITESPACE"," ",695],["T_STRING","ucfirst",695],"(",["T_VARIABLE","$key",695],")",";",["T_WHITESPACE","\n                        ",695],"$",["T_VARIABLE","$varName",696],["T_WHITESPACE"," ",696],"=",["T_WHITESPACE"," ",696],["T_VARIABLE","$row",696],"[",["T_VARIABLE","$key",696],"]",";",["T_WHITESPACE","\n                    ",696],"}",["T_WHITESPACE","\n                    ",697],["T_VARIABLE","$method",698],["T_WHITESPACE"," ",698],"=",["T_WHITESPACE"," ",698],["T_FUNC_C","__FUNCTION__",698],";",["T_WHITESPACE","\n                    ",698],["T_VARIABLE","$keyInner",699],["T_WHITESPACE"," ",699],"=",["T_WHITESPACE"," ",699],["T_VARIABLE","$pChannel",699],["T_WHITESPACE"," ",699],".",["T_WHITESPACE"," ",699],["T_CONSTANT_ENCAPSED_STRING","\"\/\"",699],["T_WHITESPACE"," ",699],".",["T_WHITESPACE"," ",699],["T_VARIABLE","$pName",699],";",["T_WHITESPACE","\n                    ",699],["T_IF","if",700],"(","!",["T_ISSET","isset",700],"(",["T_VARIABLE","$hash",700],"[",["T_VARIABLE","$keyInner",700],"]",")",")",["T_WHITESPACE"," ",700],"{",["T_WHITESPACE","\n                        ",700],["T_VARIABLE","$this",701],["T_OBJECT_OPERATOR","->",701],["T_VARIABLE","$method",701],"(",["T_VARIABLE","$pChannel",701],",",["T_WHITESPACE"," ",701],["T_VARIABLE","$pName",701],",",["T_WHITESPACE"," ",701],["T_VARIABLE","$cache",701],",",["T_WHITESPACE"," ",701],["T_VARIABLE","$config",701],",",["T_WHITESPACE","\n                        ",701],["T_VARIABLE","$withDepsRecursive",702],",",["T_WHITESPACE"," ",702],["T_STRING","false",702],")",";",["T_WHITESPACE","\n                    ",702],"}",["T_WHITESPACE","\n                ",703],"}",["T_WHITESPACE","\n            ",704],"}",["T_WHITESPACE","\n\n        ",705],"}",["T_WHITESPACE"," ",707],["T_CATCH","catch",707],["T_WHITESPACE"," ",707],"(",["T_STRING","Exception",707],["T_WHITESPACE"," ",707],["T_VARIABLE","$e",707],")",["T_WHITESPACE"," ",707],"{",["T_WHITESPACE","\n        ",707],"}",["T_WHITESPACE","\n\n        ",708],["T_VARIABLE","$level",710],["T_DEC","--",710],";",["T_WHITESPACE","\n        ",710],["T_IF","if",711],"(",["T_LNUMBER","0",711],["T_WHITESPACE"," ",711],["T_IS_IDENTICAL","===",711],["T_WHITESPACE"," ",711],["T_VARIABLE","$level",711],")",["T_WHITESPACE"," ",711],"{",["T_WHITESPACE","\n            ",711],["T_VARIABLE","$out",712],["T_WHITESPACE"," ",712],"=",["T_WHITESPACE"," ",712],["T_VARIABLE","$this",712],["T_OBJECT_OPERATOR","->",712],["T_STRING","processDepsHash",712],"(",["T_VARIABLE","$hash",712],")",";",["T_WHITESPACE","\n            ",712],["T_VARIABLE","$hash",713],["T_WHITESPACE"," ",713],"=",["T_WHITESPACE"," ",713],["T_ARRAY","array",713],"(",")",";",["T_WHITESPACE","\n            ",713],["T_RETURN","return",714],["T_WHITESPACE"," ",714],["T_ARRAY","array",714],"(",["T_CONSTANT_ENCAPSED_STRING","'list'",714],["T_DOUBLE_ARROW","=>",714],["T_VARIABLE","$out",714],")",";",["T_WHITESPACE","\n        ",714],"}",["T_WHITESPACE","\n\n        ",715],["T_RETURN","return",717],["T_WHITESPACE"," ",717],["T_STRING","null",717],";",["T_WHITESPACE","\n    ",717],"}",["T_WHITESPACE","\n\n    ",718],["T_DOC_COMMENT","\/**\n     * Add data to package dependencies hash array\n     *\n     * @param array $hash Package dependencies hash array\n     * @param string $name Package name\n     * @param string $channel Package chaannel\n     * @param string $downloaded_version Package downloaded version\n     * @param string $stability Package stability\n     * @param string $versionMin Required package minimum version\n     * @param string $versionMax Required package maximum version\n     * @param string $installState Package install state\n     * @param string $message Package install message\n     * @param array|string $dependencies Package dependencies\n     * @return bool\n     *\/",720],["T_WHITESPACE","\n    ",734],["T_PRIVATE","private",735],["T_WHITESPACE"," ",735],["T_FUNCTION","function",735],["T_WHITESPACE"," ",735],["T_STRING","addHashData",735],"(","&",["T_VARIABLE","$hash",735],",",["T_WHITESPACE"," ",735],["T_VARIABLE","$name",735],",",["T_WHITESPACE"," ",735],["T_VARIABLE","$channel",735],",",["T_WHITESPACE"," ",735],["T_VARIABLE","$downloaded_version",735],["T_WHITESPACE"," ",735],"=",["T_WHITESPACE"," ",735],["T_CONSTANT_ENCAPSED_STRING","''",735],",",["T_WHITESPACE"," ",735],["T_VARIABLE","$stability",735],["T_WHITESPACE"," ",735],"=",["T_WHITESPACE"," ",735],["T_CONSTANT_ENCAPSED_STRING","''",735],",",["T_WHITESPACE"," ",735],["T_VARIABLE","$versionMin",735],["T_WHITESPACE"," ",735],"=",["T_WHITESPACE"," ",735],["T_CONSTANT_ENCAPSED_STRING","''",735],",",["T_WHITESPACE","\n            ",735],["T_VARIABLE","$versionMax",736],["T_WHITESPACE"," ",736],"=",["T_WHITESPACE"," ",736],["T_CONSTANT_ENCAPSED_STRING","''",736],",",["T_WHITESPACE"," ",736],["T_VARIABLE","$installState",736],["T_WHITESPACE"," ",736],"=",["T_WHITESPACE"," ",736],["T_CONSTANT_ENCAPSED_STRING","''",736],",",["T_WHITESPACE"," ",736],["T_VARIABLE","$message",736],["T_WHITESPACE"," ",736],"=",["T_WHITESPACE"," ",736],["T_CONSTANT_ENCAPSED_STRING","''",736],",",["T_WHITESPACE"," ",736],["T_VARIABLE","$dependencies",736],["T_WHITESPACE"," ",736],"=",["T_WHITESPACE"," ",736],["T_CONSTANT_ENCAPSED_STRING","''",736],")",["T_WHITESPACE","\n    ",736],"{",["T_WHITESPACE","\n            ",737],["T_DOC_COMMENT","\/**\n             * When we are building dependencies tree we should base this calculations not on full key as on a\n             * unique value but check it by parts. First part which should be checked is EXTENSION_NAME also this\n             * part should be unique globally not per channel.\n             *\/",738],["T_WHITESPACE","\n            ",742],["T_VARIABLE","$key",743],["T_WHITESPACE"," ",743],"=",["T_WHITESPACE"," ",743],["T_VARIABLE","$name",743],";",["T_WHITESPACE","\n            ",743],["T_VARIABLE","$hash",744],"[",["T_VARIABLE","$key",744],"]",["T_WHITESPACE"," ",744],"=",["T_WHITESPACE"," ",744],["T_ARRAY","array",744],["T_WHITESPACE"," ",744],"(",["T_WHITESPACE","\n                ",744],["T_CONSTANT_ENCAPSED_STRING","'name'",745],["T_WHITESPACE"," ",745],["T_DOUBLE_ARROW","=>",745],["T_WHITESPACE"," ",745],["T_VARIABLE","$name",745],",",["T_WHITESPACE","\n                ",745],["T_CONSTANT_ENCAPSED_STRING","'channel'",746],["T_WHITESPACE"," ",746],["T_DOUBLE_ARROW","=>",746],["T_WHITESPACE"," ",746],["T_VARIABLE","$channel",746],",",["T_WHITESPACE","\n                ",746],["T_CONSTANT_ENCAPSED_STRING","'downloaded_version'",747],["T_WHITESPACE"," ",747],["T_DOUBLE_ARROW","=>",747],["T_WHITESPACE"," ",747],["T_VARIABLE","$downloaded_version",747],",",["T_WHITESPACE","\n                ",747],["T_CONSTANT_ENCAPSED_STRING","'stability'",748],["T_WHITESPACE"," ",748],["T_DOUBLE_ARROW","=>",748],["T_WHITESPACE"," ",748],["T_VARIABLE","$stability",748],",",["T_WHITESPACE","\n                ",748],["T_CONSTANT_ENCAPSED_STRING","'min'",749],["T_WHITESPACE"," ",749],["T_DOUBLE_ARROW","=>",749],["T_WHITESPACE"," ",749],["T_VARIABLE","$versionMin",749],",",["T_WHITESPACE","\n                ",749],["T_CONSTANT_ENCAPSED_STRING","'max'",750],["T_WHITESPACE"," ",750],["T_DOUBLE_ARROW","=>",750],["T_WHITESPACE"," ",750],["T_VARIABLE","$versionMax",750],",",["T_WHITESPACE","\n                ",750],["T_CONSTANT_ENCAPSED_STRING","'install_state'",751],["T_WHITESPACE"," ",751],["T_DOUBLE_ARROW","=>",751],["T_WHITESPACE"," ",751],["T_VARIABLE","$installState",751],",",["T_WHITESPACE","\n                ",751],["T_CONSTANT_ENCAPSED_STRING","'message'",752],["T_WHITESPACE"," ",752],["T_DOUBLE_ARROW","=>",752],["T_WHITESPACE"," ",752],"(",["T_ISSET","isset",752],"(",["T_VARIABLE","$this",752],["T_OBJECT_OPERATOR","->",752],["T_STRING","installStates",752],"[",["T_VARIABLE","$installState",752],"]",")",["T_WHITESPACE"," ",752],"?",["T_WHITESPACE","\n                        ",752],["T_VARIABLE","$this",753],["T_OBJECT_OPERATOR","->",753],["T_STRING","installStates",753],"[",["T_VARIABLE","$installState",753],"]",["T_WHITESPACE"," ",753],":",["T_WHITESPACE"," ",753],["T_CONSTANT_ENCAPSED_STRING","''",753],")",["T_WHITESPACE"," ",753],".",["T_WHITESPACE"," ",753],["T_VARIABLE","$message",753],",",["T_WHITESPACE","\n                ",753],["T_CONSTANT_ENCAPSED_STRING","'packages'",754],["T_WHITESPACE"," ",754],["T_DOUBLE_ARROW","=>",754],["T_WHITESPACE"," ",754],["T_VARIABLE","$dependencies",754],",",["T_WHITESPACE","\n            ",754],")",";",["T_WHITESPACE","\n            ",755],["T_RETURN","return",756],["T_WHITESPACE"," ",756],["T_STRING","true",756],";",["T_WHITESPACE","\n    ",756],"}",["T_WHITESPACE","\n\n    ",757],["T_DOC_COMMENT","\/**\n     * Get dependencies list\/install order info\n     *\n     * @param string $chanName\n     * @param string $package\n     * @param Mage_Connect_Singleconfig $cache\n     * @param Mage_Connect_Config $config\n     * @param mixed $versionMax\n     * @param mixed $versionMin\n     * @param boolean $withDepsRecursive\n     * @param boolean $forceRemote\n     * @param Mage_Connect_Rest $rest\n     * @return mixed\n     *\/",759],["T_WHITESPACE","\n    ",772],["T_PUBLIC","public",773],["T_WHITESPACE"," ",773],["T_FUNCTION","function",773],["T_WHITESPACE"," ",773],["T_STRING","getDependenciesList",773],"(",["T_WHITESPACE"," ",773],["T_VARIABLE","$chanName",773],",",["T_WHITESPACE"," ",773],["T_VARIABLE","$package",773],",",["T_WHITESPACE"," ",773],["T_VARIABLE","$cache",773],",",["T_WHITESPACE"," ",773],["T_VARIABLE","$config",773],",",["T_WHITESPACE"," ",773],["T_VARIABLE","$versionMax",773],["T_WHITESPACE"," ",773],"=",["T_WHITESPACE"," ",773],["T_STRING","false",773],",",["T_WHITESPACE"," ",773],["T_VARIABLE","$versionMin",773],["T_WHITESPACE"," ",773],"=",["T_WHITESPACE"," ",773],["T_STRING","false",773],",",["T_WHITESPACE","\n            ",773],["T_VARIABLE","$withDepsRecursive",774],["T_WHITESPACE"," ",774],"=",["T_WHITESPACE"," ",774],["T_STRING","true",774],",",["T_WHITESPACE"," ",774],["T_VARIABLE","$forceRemote",774],["T_WHITESPACE"," ",774],"=",["T_WHITESPACE"," ",774],["T_STRING","false",774],",",["T_WHITESPACE"," ",774],["T_VARIABLE","$rest",774],["T_WHITESPACE"," ",774],"=",["T_WHITESPACE"," ",774],["T_STRING","null",774],")",["T_WHITESPACE","\n    ",774],"{",["T_WHITESPACE","\n        ",775],["T_STATIC","static",776],["T_WHITESPACE"," ",776],["T_VARIABLE","$level",776],["T_WHITESPACE"," ",776],"=",["T_WHITESPACE"," ",776],["T_LNUMBER","0",776],";",["T_WHITESPACE","\n        ",776],["T_STATIC","static",777],["T_WHITESPACE"," ",777],["T_VARIABLE","$_depsHash",777],["T_WHITESPACE"," ",777],"=",["T_WHITESPACE"," ",777],["T_ARRAY","array",777],"(",")",";",["T_WHITESPACE","\n        ",777],["T_STATIC","static",778],["T_WHITESPACE"," ",778],["T_VARIABLE","$_deps",778],["T_WHITESPACE"," ",778],"=",["T_WHITESPACE"," ",778],["T_ARRAY","array",778],"(",")",";",["T_WHITESPACE","\n        ",778],["T_STATIC","static",779],["T_WHITESPACE"," ",779],["T_VARIABLE","$_failed",779],["T_WHITESPACE"," ",779],"=",["T_WHITESPACE"," ",779],["T_ARRAY","array",779],"(",")",";",["T_WHITESPACE","\n        ",779],["T_VARIABLE","$install_state",780],["T_WHITESPACE"," ",780],"=",["T_WHITESPACE"," ",780],["T_STRING","self",780],["T_DOUBLE_COLON","::",780],["T_STRING","INSTALL_STATE_INSTALL",780],";",["T_WHITESPACE","\n        ",780],["T_VARIABLE","$version",781],["T_WHITESPACE"," ",781],"=",["T_WHITESPACE"," ",781],["T_CONSTANT_ENCAPSED_STRING","''",781],";",["T_WHITESPACE","\n        ",781],["T_VARIABLE","$message",782],["T_WHITESPACE"," ",782],"=",["T_WHITESPACE"," ",782],["T_CONSTANT_ENCAPSED_STRING","''",782],";",["T_WHITESPACE","\n\n        ",782],["T_VARIABLE","$level",784],["T_INC","++",784],";",["T_WHITESPACE","\n\n        ",784],["T_TRY","try",786],["T_WHITESPACE"," ",786],"{",["T_WHITESPACE","\n            ",786],["T_VARIABLE","$chanName",787],["T_WHITESPACE"," ",787],"=",["T_WHITESPACE"," ",787],["T_VARIABLE","$cache",787],["T_OBJECT_OPERATOR","->",787],["T_STRING","chanName",787],"(",["T_VARIABLE","$chanName",787],")",";",["T_WHITESPACE","\n\n            ",787],["T_IF","if",789],["T_WHITESPACE"," ",789],"(","!",["T_VARIABLE","$rest",789],")",["T_WHITESPACE"," ",789],"{",["T_WHITESPACE","\n                ",789],["T_VARIABLE","$rest",790],["T_WHITESPACE"," ",790],"=",["T_WHITESPACE"," ",790],["T_STRING","Mage_Connect_Rest_Builder",790],["T_DOUBLE_COLON","::",790],["T_STRING","getAdapter",790],"(",["T_VARIABLE","$config",790],["T_OBJECT_OPERATOR","->",790],["T_STRING","protocol",790],")",";",["T_WHITESPACE","\n            ",790],"}",["T_WHITESPACE","\n            ",791],["T_VARIABLE","$rest",792],["T_OBJECT_OPERATOR","->",792],["T_STRING","setChannel",792],"(",["T_VARIABLE","$cache",792],["T_OBJECT_OPERATOR","->",792],["T_STRING","chanUrl",792],"(",["T_VARIABLE","$chanName",792],")",")",";",["T_WHITESPACE","\n            ",792],["T_VARIABLE","$releases",793],["T_WHITESPACE"," ",793],"=",["T_WHITESPACE"," ",793],["T_VARIABLE","$rest",793],["T_OBJECT_OPERATOR","->",793],["T_STRING","getReleases",793],"(",["T_VARIABLE","$package",793],")",";",["T_WHITESPACE","\n            ",793],["T_IF","if",794],["T_WHITESPACE"," ",794],"(","!",["T_VARIABLE","$releases",794],["T_WHITESPACE"," ",794],["T_BOOLEAN_OR","||",794],["T_WHITESPACE"," ",794],"!",["T_STRING","count",794],"(",["T_VARIABLE","$releases",794],")",")",["T_WHITESPACE"," ",794],"{",["T_WHITESPACE","\n                ",794],["T_THROW","throw",795],["T_WHITESPACE"," ",795],["T_NEW","new",795],["T_WHITESPACE"," ",795],["T_STRING","Exception",795],"(","\"",["T_ENCAPSED_AND_WHITESPACE","No releases for '",795],["T_CURLY_OPEN","{",795],["T_VARIABLE","$package",795],"}",["T_ENCAPSED_AND_WHITESPACE","', skipping",795],"\"",")",";",["T_WHITESPACE","\n            ",795],"}",["T_WHITESPACE","\n            ",796],["T_VARIABLE","$state",797],["T_WHITESPACE"," ",797],"=",["T_WHITESPACE"," ",797],["T_VARIABLE","$config",797],["T_OBJECT_OPERATOR","->",797],["T_STRING","preferred_state",797],["T_WHITESPACE"," ",797],"?",["T_WHITESPACE"," ",797],["T_VARIABLE","$config",797],["T_OBJECT_OPERATOR","->",797],["T_STRING","preferred_state",797],["T_WHITESPACE"," ",797],":",["T_WHITESPACE"," ",797],["T_CONSTANT_ENCAPSED_STRING","'stable'",797],";",["T_WHITESPACE","\n            ",797],["T_DOC_COMMENT","\/**\n             * Check current package version first\n             *\/",798],["T_WHITESPACE","\n            ",800],["T_VARIABLE","$installedPackage",801],["T_WHITESPACE"," ",801],"=",["T_WHITESPACE"," ",801],["T_VARIABLE","$cache",801],["T_OBJECT_OPERATOR","->",801],["T_STRING","getPackage",801],"(",["T_VARIABLE","$chanName",801],",",["T_WHITESPACE"," ",801],["T_VARIABLE","$package",801],")",";",["T_WHITESPACE","\n            ",801],["T_IF","if",802],["T_WHITESPACE"," ",802],"(",["T_VARIABLE","$installedPackage",802],["T_WHITESPACE"," ",802],["T_BOOLEAN_AND","&&",802],["T_WHITESPACE"," ",802],["T_STRING","is_array",802],"(",["T_VARIABLE","$installedPackage",802],")",")",["T_WHITESPACE"," ",802],"{",["T_WHITESPACE","\n                ",802],["T_VARIABLE","$installedRelease",803],["T_WHITESPACE"," ",803],"=",["T_WHITESPACE"," ",803],["T_ARRAY","array",803],"(",["T_ARRAY","array",803],"(",["T_WHITESPACE","\n                    ",803],["T_CONSTANT_ENCAPSED_STRING","'v'",804],["T_WHITESPACE"," ",804],["T_DOUBLE_ARROW","=>",804],["T_WHITESPACE"," ",804],["T_VARIABLE","$installedPackage",804],"[",["T_CONSTANT_ENCAPSED_STRING","'version'",804],"]",",",["T_WHITESPACE","\n                    ",804],["T_CONSTANT_ENCAPSED_STRING","'s'",805],["T_WHITESPACE"," ",805],["T_DOUBLE_ARROW","=>",805],["T_WHITESPACE"," ",805],["T_VARIABLE","$installedPackage",805],"[",["T_CONSTANT_ENCAPSED_STRING","'stability'",805],"]",",",["T_WHITESPACE","\n                ",805],")",")",";",["T_WHITESPACE","\n                ",806],["T_VARIABLE","$version",807],["T_WHITESPACE"," ",807],"=",["T_WHITESPACE"," ",807],["T_VARIABLE","$cache",807],["T_OBJECT_OPERATOR","->",807],["T_STRING","detectVersionFromRestArray",807],"(",["T_VARIABLE","$installedRelease",807],",",["T_WHITESPACE"," ",807],["T_VARIABLE","$versionMin",807],",",["T_WHITESPACE"," ",807],["T_VARIABLE","$versionMax",807],",",["T_WHITESPACE"," ",807],["T_VARIABLE","$state",807],")",";",["T_WHITESPACE","\n            ",807],"}",["T_WHITESPACE","\n            ",808],["T_IF","if",809],["T_WHITESPACE"," ",809],"(","!",["T_VARIABLE","$version",809],")",["T_WHITESPACE"," ",809],"{",["T_WHITESPACE","\n                ",809],["T_VARIABLE","$version",810],["T_WHITESPACE"," ",810],"=",["T_WHITESPACE"," ",810],["T_VARIABLE","$cache",810],["T_OBJECT_OPERATOR","->",810],["T_STRING","detectVersionFromRestArray",810],"(",["T_VARIABLE","$releases",810],",",["T_WHITESPACE"," ",810],["T_VARIABLE","$versionMin",810],",",["T_WHITESPACE"," ",810],["T_VARIABLE","$versionMax",810],",",["T_WHITESPACE"," ",810],["T_VARIABLE","$state",810],")",";",["T_WHITESPACE","\n            ",810],"}",["T_WHITESPACE","\n            ",811],["T_IF","if",812],["T_WHITESPACE"," ",812],"(","!",["T_VARIABLE","$version",812],")",["T_WHITESPACE"," ",812],"{",["T_WHITESPACE","\n                ",812],["T_VARIABLE","$versionState",813],["T_WHITESPACE"," ",813],"=",["T_WHITESPACE"," ",813],["T_VARIABLE","$cache",813],["T_OBJECT_OPERATOR","->",813],["T_STRING","detectVersionFromRestArray",813],"(",["T_VARIABLE","$releases",813],",",["T_WHITESPACE"," ",813],["T_VARIABLE","$versionMin",813],",",["T_WHITESPACE"," ",813],["T_VARIABLE","$versionMax",813],")",";",["T_WHITESPACE","\n                ",813],["T_IF","if",814],["T_WHITESPACE"," ",814],"(",["T_VARIABLE","$versionState",814],")",["T_WHITESPACE"," ",814],"{",["T_WHITESPACE","\n                    ",814],["T_DOC_COMMENT","\/** @var $packageInfo Mage_Connect_Package *\/",815],["T_WHITESPACE","\n                    ",815],["T_VARIABLE","$packageInfo",816],["T_WHITESPACE"," ",816],"=",["T_WHITESPACE"," ",816],["T_VARIABLE","$rest",816],["T_OBJECT_OPERATOR","->",816],["T_STRING","getPackageReleaseInfo",816],"(",["T_VARIABLE","$package",816],",",["T_WHITESPACE"," ",816],["T_VARIABLE","$versionState",816],")",";",["T_WHITESPACE","\n                    ",816],["T_IF","if",817],["T_WHITESPACE"," ",817],"(",["T_STRING","false",817],["T_WHITESPACE"," ",817],["T_IS_NOT_IDENTICAL","!==",817],["T_WHITESPACE"," ",817],["T_VARIABLE","$packageInfo",817],")",["T_WHITESPACE"," ",817],"{",["T_WHITESPACE","\n                        ",817],["T_VARIABLE","$stability",818],["T_WHITESPACE"," ",818],"=",["T_WHITESPACE"," ",818],["T_VARIABLE","$packageInfo",818],["T_OBJECT_OPERATOR","->",818],["T_STRING","getStability",818],"(",")",";",["T_WHITESPACE","\n                        ",818],["T_THROW","throw",819],["T_WHITESPACE"," ",819],["T_NEW","new",819],["T_WHITESPACE"," ",819],["T_STRING","Exception",819],"(","\"",["T_ENCAPSED_AND_WHITESPACE","Extension is '",819],["T_CURLY_OPEN","{",819],["T_VARIABLE","$stability",819],"}",["T_ENCAPSED_AND_WHITESPACE","' please check(or change) stability settings",819],"\"",".",["T_WHITESPACE","\n                                            ",819],["T_CONSTANT_ENCAPSED_STRING","\" on Magento Connect Manager\"",820],")",";",["T_WHITESPACE","\n                    ",820],"}",["T_WHITESPACE","\n                ",821],"}",["T_WHITESPACE","\n                ",822],["T_THROW","throw",823],["T_WHITESPACE"," ",823],["T_NEW","new",823],["T_WHITESPACE"," ",823],["T_STRING","Exception",823],"(","\"",["T_ENCAPSED_AND_WHITESPACE","Version for '",823],["T_CURLY_OPEN","{",823],["T_VARIABLE","$package",823],"}",["T_ENCAPSED_AND_WHITESPACE","' was not detected",823],"\"",")",";",["T_WHITESPACE","\n            ",823],"}",["T_WHITESPACE","\n            ",824],["T_VARIABLE","$packageInfo",825],["T_WHITESPACE"," ",825],"=",["T_WHITESPACE"," ",825],["T_VARIABLE","$rest",825],["T_OBJECT_OPERATOR","->",825],["T_STRING","getPackageReleaseInfo",825],"(",["T_VARIABLE","$package",825],",",["T_WHITESPACE"," ",825],["T_VARIABLE","$version",825],")",";",["T_WHITESPACE","\n            ",825],["T_IF","if",826],["T_WHITESPACE"," ",826],"(",["T_STRING","false",826],["T_WHITESPACE"," ",826],["T_IS_IDENTICAL","===",826],["T_WHITESPACE"," ",826],["T_VARIABLE","$packageInfo",826],")",["T_WHITESPACE"," ",826],"{",["T_WHITESPACE","\n                ",826],["T_THROW","throw",827],["T_WHITESPACE"," ",827],["T_NEW","new",827],["T_WHITESPACE"," ",827],["T_STRING","Exception",827],"(","\"",["T_ENCAPSED_AND_WHITESPACE","Package release '",827],["T_CURLY_OPEN","{",827],["T_VARIABLE","$package",827],"}",["T_ENCAPSED_AND_WHITESPACE","' not found on server",827],"\"",")",";",["T_WHITESPACE","\n            ",827],"}",["T_WHITESPACE","\n            ",828],["T_VARIABLE","$stability",829],["T_WHITESPACE"," ",829],"=",["T_WHITESPACE"," ",829],["T_VARIABLE","$packageInfo",829],["T_OBJECT_OPERATOR","->",829],["T_STRING","getStability",829],"(",")",";",["T_WHITESPACE","\n\n            ",829],["T_DOC_COMMENT","\/**\n             * check is package already installed\n             *\/",831],["T_WHITESPACE","\n            ",833],["T_IF","if",834],["T_WHITESPACE"," ",834],"(",["T_VARIABLE","$installedPackage",834],["T_WHITESPACE"," ",834],"=",["T_WHITESPACE"," ",834],["T_VARIABLE","$cache",834],["T_OBJECT_OPERATOR","->",834],["T_STRING","isPackageInstalled",834],"(",["T_VARIABLE","$package",834],")",")",["T_WHITESPACE"," ",834],"{",["T_WHITESPACE","\n                ",834],["T_IF","if",835],["T_WHITESPACE"," ",835],"(",["T_VARIABLE","$chanName",835],["T_WHITESPACE"," ",835],["T_IS_EQUAL","==",835],["T_WHITESPACE"," ",835],["T_VARIABLE","$installedPackage",835],"[",["T_CONSTANT_ENCAPSED_STRING","'channel'",835],"]",")",["T_WHITESPACE"," ",835],"{",["T_WHITESPACE","\n                    ",835],["T_DOC_COMMENT","\/**\n                     * check versions\n                     *\/",836],["T_WHITESPACE","\n                    ",838],["T_IF","if",839],["T_WHITESPACE"," ",839],"(",["T_STRING","version_compare",839],"(",["T_VARIABLE","$version",839],",",["T_WHITESPACE"," ",839],["T_VARIABLE","$installedPackage",839],"[",["T_CONSTANT_ENCAPSED_STRING","'version'",839],"]",",",["T_WHITESPACE"," ",839],["T_CONSTANT_ENCAPSED_STRING","'>'",839],")",")",["T_WHITESPACE"," ",839],"{",["T_WHITESPACE","\n                        ",839],["T_VARIABLE","$install_state",840],["T_WHITESPACE"," ",840],"=",["T_WHITESPACE"," ",840],["T_STRING","self",840],["T_DOUBLE_COLON","::",840],["T_STRING","INSTALL_STATE_UPGRADE",840],";",["T_WHITESPACE","\n                    ",840],"}",["T_WHITESPACE"," ",841],["T_ELSEIF","elseif",841],["T_WHITESPACE"," ",841],"(",["T_STRING","version_compare",841],"(",["T_VARIABLE","$version",841],",",["T_WHITESPACE"," ",841],["T_VARIABLE","$installedPackage",841],"[",["T_CONSTANT_ENCAPSED_STRING","'version'",841],"]",",",["T_WHITESPACE"," ",841],["T_CONSTANT_ENCAPSED_STRING","'<'",841],")",")",["T_WHITESPACE"," ",841],"{",["T_WHITESPACE","\n                        ",841],["T_VARIABLE","$version",842],["T_WHITESPACE"," ",842],"=",["T_WHITESPACE"," ",842],["T_VARIABLE","$installedPackage",842],"[",["T_CONSTANT_ENCAPSED_STRING","'version'",842],"]",";",["T_WHITESPACE","\n                        ",842],["T_VARIABLE","$stability",843],["T_WHITESPACE"," ",843],"=",["T_WHITESPACE"," ",843],["T_VARIABLE","$installedPackage",843],"[",["T_CONSTANT_ENCAPSED_STRING","'stability'",843],"]",";",["T_WHITESPACE","\n                        ",843],["T_VARIABLE","$install_state",844],["T_WHITESPACE"," ",844],"=",["T_WHITESPACE"," ",844],["T_STRING","self",844],["T_DOUBLE_COLON","::",844],["T_STRING","INSTALL_STATE_WRONG_VERSION",844],";",["T_WHITESPACE","\n                    ",844],"}",["T_WHITESPACE"," ",845],["T_ELSE","else",845],["T_WHITESPACE"," ",845],"{",["T_WHITESPACE","\n                        ",845],["T_VARIABLE","$install_state",846],["T_WHITESPACE"," ",846],"=",["T_WHITESPACE"," ",846],["T_STRING","self",846],["T_DOUBLE_COLON","::",846],["T_STRING","INSTALL_STATE_ALREADY_INSTALLED",846],";",["T_WHITESPACE","\n                    ",846],"}",["T_WHITESPACE","\n                ",847],"}",["T_WHITESPACE"," ",848],["T_ELSE","else",848],["T_WHITESPACE"," ",848],"{",["T_WHITESPACE","\n                    ",848],["T_VARIABLE","$install_state",849],["T_WHITESPACE"," ",849],"=",["T_WHITESPACE"," ",849],["T_STRING","self",849],["T_DOUBLE_COLON","::",849],["T_STRING","INSTALL_STATE_INCOMPATIBLE",849],";",["T_WHITESPACE","\n                ",849],"}",["T_WHITESPACE","\n            ",850],"}",["T_WHITESPACE","\n\n            ",851],["T_VARIABLE","$deps_tmp",853],["T_WHITESPACE"," ",853],"=",["T_WHITESPACE"," ",853],["T_VARIABLE","$packageInfo",853],["T_OBJECT_OPERATOR","->",853],["T_STRING","getDependencyPackages",853],"(",")",";",["T_WHITESPACE","\n\n            ",853],["T_DOC_COMMENT","\/**\n             * Select distinct packages grouped by name\n             *\/",855],["T_WHITESPACE","\n            ",857],["T_VARIABLE","$dependencies",858],["T_WHITESPACE"," ",858],"=",["T_WHITESPACE"," ",858],["T_ARRAY","array",858],"(",")",";",["T_WHITESPACE","\n            ",858],["T_FOREACH","foreach",859],["T_WHITESPACE"," ",859],"(",["T_VARIABLE","$deps_tmp",859],["T_WHITESPACE"," ",859],["T_AS","as",859],["T_WHITESPACE"," ",859],["T_VARIABLE","$row",859],")",["T_WHITESPACE"," ",859],"{",["T_WHITESPACE","\n                ",859],["T_IF","if",860],["T_WHITESPACE"," ",860],"(",["T_ISSET","isset",860],"(",["T_VARIABLE","$dependencies",860],"[",["T_VARIABLE","$row",860],"[",["T_CONSTANT_ENCAPSED_STRING","'name'",860],"]","]",")",")",["T_WHITESPACE"," ",860],"{",["T_WHITESPACE","\n                    ",860],["T_IF","if",861],["T_WHITESPACE"," ",861],"(",["T_VARIABLE","$installedPackageDep",861],["T_WHITESPACE"," ",861],"=",["T_WHITESPACE"," ",861],["T_VARIABLE","$cache",861],["T_OBJECT_OPERATOR","->",861],["T_STRING","isPackageInstalled",861],"(",["T_VARIABLE","$row",861],"[",["T_CONSTANT_ENCAPSED_STRING","'name'",861],"]",")",")",["T_WHITESPACE"," ",861],"{",["T_WHITESPACE","\n                        ",861],["T_IF","if",862],["T_WHITESPACE"," ",862],"(",["T_VARIABLE","$installedPackageDep",862],"[",["T_CONSTANT_ENCAPSED_STRING","'channel'",862],"]",["T_WHITESPACE"," ",862],["T_IS_EQUAL","==",862],["T_WHITESPACE"," ",862],["T_VARIABLE","$row",862],"[",["T_CONSTANT_ENCAPSED_STRING","'channel'",862],"]",")",["T_WHITESPACE"," ",862],"{",["T_WHITESPACE","\n                            ",862],["T_VARIABLE","$dependencies",863],"[",["T_VARIABLE","$row",863],"[",["T_CONSTANT_ENCAPSED_STRING","'name'",863],"]","]","=",["T_VARIABLE","$row",863],";",["T_WHITESPACE","\n                        ",863],"}",["T_WHITESPACE","\n                    ",864],"}",["T_WHITESPACE"," ",865],["T_ELSEIF","elseif",865],["T_WHITESPACE"," ",865],"(",["T_VARIABLE","$config",865],["T_OBJECT_OPERATOR","->",865],["T_STRING","root_channel",865],["T_WHITESPACE"," ",865],["T_IS_EQUAL","==",865],["T_WHITESPACE"," ",865],["T_VARIABLE","$row",865],"[",["T_CONSTANT_ENCAPSED_STRING","'channel'",865],"]",")",["T_WHITESPACE"," ",865],"{",["T_WHITESPACE","\n                        ",865],["T_VARIABLE","$dependencies",866],"[",["T_VARIABLE","$row",866],"[",["T_CONSTANT_ENCAPSED_STRING","'name'",866],"]","]",["T_WHITESPACE"," ",866],"=",["T_WHITESPACE"," ",866],["T_VARIABLE","$row",866],";",["T_WHITESPACE","\n                    ",866],"}",["T_WHITESPACE","\n                ",867],"}",["T_WHITESPACE"," ",868],["T_ELSE","else",868],["T_WHITESPACE"," ",868],"{",["T_WHITESPACE","\n                    ",868],["T_VARIABLE","$dependencies",869],"[",["T_VARIABLE","$row",869],"[",["T_CONSTANT_ENCAPSED_STRING","'name'",869],"]","]",["T_WHITESPACE"," ",869],"=",["T_WHITESPACE"," ",869],["T_VARIABLE","$row",869],";",["T_WHITESPACE","\n                ",869],"}",["T_WHITESPACE","\n            ",870],"}",["T_WHITESPACE","\n\n            ",871],["T_DOC_COMMENT","\/**\n             * When we are building dependencies tree we should base this calculations not on full key as on a\n             * unique value but check it by parts. First part which should be checked is EXTENSION_NAME also this part\n             * should be unique globally not per channel.\n             *\/",873],["T_WHITESPACE","\n            ",877],["T_IF","if",878],["T_WHITESPACE"," ",878],"(",["T_STRING","self",878],["T_DOUBLE_COLON","::",878],["T_STRING","INSTALL_STATE_INCOMPATIBLE",878],["T_WHITESPACE"," ",878],["T_IS_NOT_EQUAL","!=",878],["T_WHITESPACE"," ",878],["T_VARIABLE","$install_state",878],")",["T_WHITESPACE"," ",878],"{",["T_WHITESPACE","\n                ",878],["T_VARIABLE","$this",879],["T_OBJECT_OPERATOR","->",879],["T_STRING","addHashData",879],"(",["T_VARIABLE","$_depsHash",879],",",["T_WHITESPACE"," ",879],["T_VARIABLE","$package",879],",",["T_WHITESPACE"," ",879],["T_VARIABLE","$chanName",879],",",["T_WHITESPACE"," ",879],["T_VARIABLE","$version",879],",",["T_WHITESPACE"," ",879],["T_VARIABLE","$stability",879],",",["T_WHITESPACE"," ",879],["T_VARIABLE","$versionMin",879],",",["T_WHITESPACE","\n                        ",879],["T_VARIABLE","$versionMax",880],",",["T_WHITESPACE"," ",880],["T_VARIABLE","$install_state",880],",",["T_WHITESPACE"," ",880],["T_VARIABLE","$message",880],",",["T_WHITESPACE"," ",880],["T_VARIABLE","$dependencies",880],")",";",["T_WHITESPACE","\n            ",880],"}",["T_WHITESPACE","\n\n            ",881],["T_IF","if",883],["T_WHITESPACE"," ",883],"(",["T_VARIABLE","$withDepsRecursive",883],["T_WHITESPACE"," ",883],["T_BOOLEAN_AND","&&",883],["T_WHITESPACE"," ",883],["T_STRING","self",883],["T_DOUBLE_COLON","::",883],["T_STRING","INSTALL_STATE_INCOMPATIBLE",883],["T_WHITESPACE"," ",883],["T_IS_NOT_EQUAL","!=",883],["T_WHITESPACE"," ",883],["T_VARIABLE","$install_state",883],")",["T_WHITESPACE"," ",883],"{",["T_WHITESPACE","\n                ",883],["T_VARIABLE","$flds",884],["T_WHITESPACE"," ",884],"=",["T_WHITESPACE"," ",884],["T_ARRAY","array",884],"(",["T_CONSTANT_ENCAPSED_STRING","'name'",884],",",["T_CONSTANT_ENCAPSED_STRING","'channel'",884],",",["T_CONSTANT_ENCAPSED_STRING","'min'",884],",",["T_CONSTANT_ENCAPSED_STRING","'max'",884],")",";",["T_WHITESPACE","\n                ",884],["T_FOREACH","foreach",885],["T_WHITESPACE"," ",885],"(",["T_VARIABLE","$dependencies",885],["T_WHITESPACE"," ",885],["T_AS","as",885],["T_WHITESPACE"," ",885],["T_VARIABLE","$row",885],")",["T_WHITESPACE"," ",885],"{",["T_WHITESPACE","\n                    ",885],["T_DOC_COMMENT","\/**\n                     * Converts an array to variables\n                     * @var $pChannel string Channel Name\n                     * @var $pName string Package Name\n                     * @var $pMax string Maximum version number\n                     * @var $pMin string Minimum version number\n                     *\/",886],["T_WHITESPACE","\n                    ",892],["T_FOREACH","foreach",893],["T_WHITESPACE"," ",893],"(",["T_VARIABLE","$flds",893],["T_WHITESPACE"," ",893],["T_AS","as",893],["T_WHITESPACE"," ",893],["T_VARIABLE","$key",893],")",["T_WHITESPACE"," ",893],"{",["T_WHITESPACE","\n                        ",893],["T_VARIABLE","$varName",894],["T_WHITESPACE"," ",894],"=",["T_WHITESPACE"," ",894],["T_CONSTANT_ENCAPSED_STRING","\"p\"",894],["T_WHITESPACE"," ",894],".",["T_WHITESPACE"," ",894],["T_STRING","ucfirst",894],"(",["T_VARIABLE","$key",894],")",";",["T_WHITESPACE","\n                        ",894],"$",["T_VARIABLE","$varName",895],["T_WHITESPACE"," ",895],"=",["T_WHITESPACE"," ",895],["T_VARIABLE","$row",895],"[",["T_VARIABLE","$key",895],"]",";",["T_WHITESPACE","\n                    ",895],"}",["T_WHITESPACE","\n                    ",896],["T_VARIABLE","$method",897],["T_WHITESPACE"," ",897],"=",["T_WHITESPACE"," ",897],["T_FUNC_C","__FUNCTION__",897],";",["T_WHITESPACE","\n                    ",897],["T_DOC_COMMENT","\/**\n                     * When we are building dependencies tree we should base this calculations not on full key as\n                     * on a unique value but check it by parts. First part which should be checked is EXTENSION_NAME\n                     * also this part should be unique globally not per channel.\n                     *\/",898],["T_WHITESPACE","\n                    ",902],["T_VARIABLE","$keyInner",903],["T_WHITESPACE"," ",903],"=",["T_WHITESPACE"," ",903],["T_VARIABLE","$pName",903],";",["T_WHITESPACE","\n                    ",903],["T_IF","if",904],"(","!",["T_ISSET","isset",904],"(",["T_VARIABLE","$_depsHash",904],"[",["T_VARIABLE","$keyInner",904],"]",")",")",["T_WHITESPACE"," ",904],"{",["T_WHITESPACE","\n                        ",904],["T_VARIABLE","$_deps",905],"[","]",["T_WHITESPACE"," ",905],"=",["T_WHITESPACE"," ",905],["T_VARIABLE","$row",905],";",["T_WHITESPACE","\n                        ",905],["T_VARIABLE","$this",906],["T_OBJECT_OPERATOR","->",906],["T_VARIABLE","$method",906],"(",["T_VARIABLE","$pChannel",906],",",["T_WHITESPACE"," ",906],["T_VARIABLE","$pName",906],",",["T_WHITESPACE"," ",906],["T_VARIABLE","$cache",906],",",["T_WHITESPACE"," ",906],["T_VARIABLE","$config",906],",",["T_WHITESPACE","\n                        ",906],["T_VARIABLE","$pMax",907],",",["T_WHITESPACE"," ",907],["T_VARIABLE","$pMin",907],",",["T_WHITESPACE"," ",907],["T_VARIABLE","$withDepsRecursive",907],",",["T_WHITESPACE"," ",907],["T_VARIABLE","$forceRemote",907],",",["T_WHITESPACE"," ",907],["T_VARIABLE","$rest",907],")",";",["T_WHITESPACE","\n                    ",907],"}",["T_WHITESPACE"," ",908],["T_ELSE","else",908],["T_WHITESPACE"," ",908],"{",["T_WHITESPACE","\n                        ",908],["T_VARIABLE","$downloaded",909],["T_WHITESPACE"," ",909],"=",["T_WHITESPACE"," ",909],["T_VARIABLE","$_depsHash",909],"[",["T_VARIABLE","$keyInner",909],"]","[",["T_CONSTANT_ENCAPSED_STRING","'downloaded_version'",909],"]",";",["T_WHITESPACE","\n                        ",909],["T_VARIABLE","$hasMin",910],["T_WHITESPACE"," ",910],"=",["T_WHITESPACE"," ",910],["T_VARIABLE","$_depsHash",910],"[",["T_VARIABLE","$keyInner",910],"]","[",["T_CONSTANT_ENCAPSED_STRING","'min'",910],"]",";",["T_WHITESPACE","\n                        ",910],["T_VARIABLE","$hasMax",911],["T_WHITESPACE"," ",911],"=",["T_WHITESPACE"," ",911],["T_VARIABLE","$_depsHash",911],"[",["T_VARIABLE","$keyInner",911],"]","[",["T_CONSTANT_ENCAPSED_STRING","'max'",911],"]",";",["T_WHITESPACE","\n                        ",911],["T_IF","if",912],"(",["T_VARIABLE","$pMin",912],["T_WHITESPACE"," ",912],["T_IS_IDENTICAL","===",912],["T_WHITESPACE"," ",912],["T_VARIABLE","$hasMin",912],["T_WHITESPACE"," ",912],["T_BOOLEAN_AND","&&",912],["T_WHITESPACE"," ",912],["T_VARIABLE","$pMax",912],["T_WHITESPACE"," ",912],["T_IS_IDENTICAL","===",912],["T_WHITESPACE"," ",912],["T_VARIABLE","$hasMax",912],")",["T_WHITESPACE"," ",912],"{",["T_WHITESPACE","\n                            ",912],["T_CONTINUE","continue",913],";",["T_WHITESPACE","\n                        ",913],"}",["T_WHITESPACE","\n\n                        ",914],["T_IF","if",916],"(",["T_VARIABLE","$cache",916],["T_OBJECT_OPERATOR","->",916],["T_STRING","versionInRange",916],"(",["T_VARIABLE","$downloaded",916],",",["T_WHITESPACE"," ",916],["T_VARIABLE","$pMin",916],",",["T_WHITESPACE"," ",916],["T_VARIABLE","$pMax",916],")",")",["T_WHITESPACE"," ",916],"{",["T_WHITESPACE","\n                            ",916],["T_CONTINUE","continue",917],";",["T_WHITESPACE","\n                        ",917],"}",["T_WHITESPACE","\n\n                        ",918],["T_VARIABLE","$names",920],["T_WHITESPACE"," ",920],"=",["T_WHITESPACE"," ",920],["T_ARRAY","array",920],"(",["T_CONSTANT_ENCAPSED_STRING","\"pMin\"",920],",",["T_CONSTANT_ENCAPSED_STRING","\"pMax\"",920],",",["T_CONSTANT_ENCAPSED_STRING","\"hasMin\"",920],",",["T_CONSTANT_ENCAPSED_STRING","\"hasMax\"",920],")",";",["T_WHITESPACE","\n                        ",920],["T_FOR","for",921],["T_WHITESPACE"," ",921],"(",["T_VARIABLE","$i",921],"=",["T_LNUMBER","0",921],",",["T_WHITESPACE"," ",921],["T_VARIABLE","$c",921],"=",["T_STRING","count",921],"(",["T_VARIABLE","$names",921],")",";",["T_WHITESPACE"," ",921],["T_VARIABLE","$i",921],"<",["T_VARIABLE","$c",921],";",["T_WHITESPACE"," ",921],["T_VARIABLE","$i",921],["T_INC","++",921],")",["T_WHITESPACE"," ",921],"{",["T_WHITESPACE","\n                            ",921],["T_IF","if",922],"(","!",["T_ISSET","isset",922],"(","$",["T_VARIABLE","$names",922],"[",["T_VARIABLE","$i",922],"]",")",")",["T_WHITESPACE"," ",922],"{",["T_WHITESPACE","\n                                ",922],["T_CONTINUE","continue",923],";",["T_WHITESPACE","\n                            ",923],"}",["T_WHITESPACE","\n                            ",924],["T_IF","if",925],"(",["T_STRING","false",925],["T_WHITESPACE"," ",925],["T_IS_NOT_IDENTICAL","!==",925],["T_WHITESPACE"," ",925],"$",["T_VARIABLE","$names",925],"[",["T_VARIABLE","$i",925],"]",")",["T_WHITESPACE"," ",925],"{",["T_WHITESPACE","\n                                ",925],["T_CONTINUE","continue",926],";",["T_WHITESPACE","\n                            ",926],"}",["T_WHITESPACE","\n                            ",927],"$",["T_VARIABLE","$names",928],"[",["T_VARIABLE","$i",928],"]",["T_WHITESPACE"," ",928],"=",["T_WHITESPACE"," ",928],["T_VARIABLE","$i",928],["T_WHITESPACE"," ",928],"%",["T_WHITESPACE"," ",928],["T_LNUMBER","2",928],["T_WHITESPACE"," ",928],["T_IS_EQUAL","==",928],["T_WHITESPACE"," ",928],["T_LNUMBER","0",928],["T_WHITESPACE"," ",928],"?",["T_WHITESPACE"," ",928],["T_CONSTANT_ENCAPSED_STRING","\"0\"",928],["T_WHITESPACE"," ",928],":",["T_WHITESPACE"," ",928],["T_CONSTANT_ENCAPSED_STRING","\"999999999\"",928],";",["T_WHITESPACE","\n                        ",928],"}",["T_WHITESPACE","\n\n                        ",929],["T_IF","if",931],"(","!",["T_VARIABLE","$cache",931],["T_OBJECT_OPERATOR","->",931],["T_STRING","hasVersionRangeIntersect",931],"(",["T_VARIABLE","$pMin",931],",",["T_VARIABLE","$pMax",931],",",["T_WHITESPACE"," ",931],["T_VARIABLE","$hasMin",931],",",["T_WHITESPACE"," ",931],["T_VARIABLE","$hasMax",931],")",")",["T_WHITESPACE"," ",931],"{",["T_WHITESPACE","\n                            ",931],["T_VARIABLE","$reason",932],["T_WHITESPACE"," ",932],"=",["T_WHITESPACE"," ",932],"\"",["T_ENCAPSED_AND_WHITESPACE","Detected ",932],["T_CURLY_OPEN","{",932],["T_VARIABLE","$pName",932],"}",["T_ENCAPSED_AND_WHITESPACE"," conflict of versions: ",932],["T_CURLY_OPEN","{",932],["T_VARIABLE","$hasMin",932],"}",["T_ENCAPSED_AND_WHITESPACE","-",932],["T_CURLY_OPEN","{",932],["T_VARIABLE","$hasMax",932],"}",["T_ENCAPSED_AND_WHITESPACE"," and ",932],["T_CURLY_OPEN","{",932],["T_VARIABLE","$pMin",932],"}",["T_ENCAPSED_AND_WHITESPACE","-",932],["T_CURLY_OPEN","{",932],["T_VARIABLE","$pMax",932],"}","\"",";",["T_WHITESPACE","\n                            ",932],["T_UNSET","unset",933],"(",["T_VARIABLE","$_depsHash",933],"[",["T_VARIABLE","$keyInner",933],"]",")",";",["T_WHITESPACE","\n                            ",933],["T_VARIABLE","$_failed",934],"[","]",["T_WHITESPACE"," ",934],"=",["T_WHITESPACE"," ",934],["T_ARRAY","array",934],"(",["T_WHITESPACE","\n                                ",934],["T_CONSTANT_ENCAPSED_STRING","'name'",935],["T_DOUBLE_ARROW","=>",935],["T_VARIABLE","$pName",935],",",["T_WHITESPACE","\n                                ",935],["T_CONSTANT_ENCAPSED_STRING","'channel'",936],["T_DOUBLE_ARROW","=>",936],["T_VARIABLE","$pChannel",936],",",["T_WHITESPACE","\n                                ",936],["T_CONSTANT_ENCAPSED_STRING","'max'",937],["T_DOUBLE_ARROW","=>",937],["T_VARIABLE","$pMax",937],",",["T_WHITESPACE","\n                                ",937],["T_CONSTANT_ENCAPSED_STRING","'min'",938],["T_DOUBLE_ARROW","=>",938],["T_VARIABLE","$pMin",938],",",["T_WHITESPACE","\n                                ",938],["T_CONSTANT_ENCAPSED_STRING","'reason'",939],["T_DOUBLE_ARROW","=>",939],["T_VARIABLE","$reason",939],["T_WHITESPACE","\n                            ",939],")",";",["T_WHITESPACE","\n                            ",940],["T_CONTINUE","continue",941],";",["T_WHITESPACE","\n                        ",941],"}",["T_WHITESPACE","\n                        ",942],["T_VARIABLE","$newMaxIsLess",943],["T_WHITESPACE"," ",943],"=",["T_WHITESPACE"," ",943],["T_STRING","version_compare",943],"(",["T_VARIABLE","$pMax",943],",",["T_WHITESPACE"," ",943],["T_VARIABLE","$hasMax",943],",",["T_WHITESPACE"," ",943],["T_CONSTANT_ENCAPSED_STRING","\"<\"",943],")",";",["T_WHITESPACE","\n                        ",943],["T_VARIABLE","$newMinIsGreater",944],["T_WHITESPACE"," ",944],"=",["T_WHITESPACE"," ",944],["T_STRING","version_compare",944],"(",["T_VARIABLE","$pMin",944],",",["T_WHITESPACE"," ",944],["T_VARIABLE","$hasMin",944],",",["T_WHITESPACE"," ",944],["T_CONSTANT_ENCAPSED_STRING","\">\"",944],")",";",["T_WHITESPACE","\n                        ",944],["T_VARIABLE","$forceMax",945],["T_WHITESPACE"," ",945],"=",["T_WHITESPACE"," ",945],["T_VARIABLE","$newMaxIsLess",945],["T_WHITESPACE"," ",945],"?",["T_WHITESPACE"," ",945],["T_VARIABLE","$pMax",945],["T_WHITESPACE"," ",945],":",["T_WHITESPACE"," ",945],["T_VARIABLE","$hasMax",945],";",["T_WHITESPACE","\n                        ",945],["T_VARIABLE","$forceMin",946],["T_WHITESPACE"," ",946],"=",["T_WHITESPACE"," ",946],["T_VARIABLE","$newMinIsGreater",946],["T_WHITESPACE"," ",946],"?",["T_WHITESPACE"," ",946],["T_VARIABLE","$pMin",946],["T_WHITESPACE"," ",946],":",["T_WHITESPACE"," ",946],["T_VARIABLE","$hasMin",946],";",["T_WHITESPACE","\n                        ",946],["T_VARIABLE","$this",947],["T_OBJECT_OPERATOR","->",947],["T_VARIABLE","$method",947],"(",["T_VARIABLE","$pChannel",947],",",["T_WHITESPACE"," ",947],["T_VARIABLE","$pName",947],",",["T_WHITESPACE"," ",947],["T_VARIABLE","$cache",947],",",["T_WHITESPACE"," ",947],["T_VARIABLE","$config",947],",",["T_WHITESPACE","\n                        ",947],["T_VARIABLE","$forceMax",948],",",["T_WHITESPACE"," ",948],["T_VARIABLE","$forceMin",948],",",["T_WHITESPACE"," ",948],["T_VARIABLE","$withDepsRecursive",948],",",["T_WHITESPACE"," ",948],["T_VARIABLE","$forceRemote",948],",",["T_WHITESPACE"," ",948],["T_VARIABLE","$rest",948],")",";",["T_WHITESPACE","\n                    ",948],"}",["T_WHITESPACE","\n                ",949],"}",["T_WHITESPACE","\n            ",950],"}",["T_WHITESPACE","\n            ",951],["T_UNSET","unset",952],"(",["T_VARIABLE","$rest",952],")",";",["T_WHITESPACE","\n        ",952],"}",["T_WHITESPACE"," ",953],["T_CATCH","catch",953],["T_WHITESPACE"," ",953],"(",["T_STRING","Exception",953],["T_WHITESPACE"," ",953],["T_VARIABLE","$e",953],")",["T_WHITESPACE"," ",953],"{",["T_WHITESPACE","\n            ",953],["T_VARIABLE","$_failed",954],"[","]",["T_WHITESPACE"," ",954],"=",["T_WHITESPACE"," ",954],["T_ARRAY","array",954],"(",["T_WHITESPACE","\n                ",954],["T_CONSTANT_ENCAPSED_STRING","'name'",955],["T_DOUBLE_ARROW","=>",955],["T_VARIABLE","$package",955],",",["T_WHITESPACE","\n                ",955],["T_CONSTANT_ENCAPSED_STRING","'channel'",956],["T_DOUBLE_ARROW","=>",956],["T_VARIABLE","$chanName",956],",",["T_WHITESPACE","\n                ",956],["T_CONSTANT_ENCAPSED_STRING","'max'",957],["T_DOUBLE_ARROW","=>",957],["T_VARIABLE","$versionMax",957],",",["T_WHITESPACE","\n                ",957],["T_CONSTANT_ENCAPSED_STRING","'min'",958],["T_DOUBLE_ARROW","=>",958],["T_VARIABLE","$versionMin",958],",",["T_WHITESPACE","\n                ",958],["T_CONSTANT_ENCAPSED_STRING","'reason'",959],["T_DOUBLE_ARROW","=>",959],["T_VARIABLE","$e",959],["T_OBJECT_OPERATOR","->",959],["T_STRING","getMessage",959],"(",")",["T_WHITESPACE","\n            ",959],")",";",["T_WHITESPACE","\n        ",960],"}",["T_WHITESPACE","\n\n        ",961],["T_VARIABLE","$level",963],["T_DEC","--",963],";",["T_WHITESPACE","\n        ",963],["T_IF","if",964],"(",["T_VARIABLE","$level",964],["T_WHITESPACE"," ",964],["T_IS_EQUAL","==",964],["T_WHITESPACE"," ",964],["T_LNUMBER","0",964],")",["T_WHITESPACE"," ",964],"{",["T_WHITESPACE","\n            ",964],["T_VARIABLE","$out",965],["T_WHITESPACE"," ",965],"=",["T_WHITESPACE"," ",965],["T_VARIABLE","$this",965],["T_OBJECT_OPERATOR","->",965],["T_STRING","processDepsHash",965],"(",["T_VARIABLE","$_depsHash",965],",",["T_WHITESPACE"," ",965],["T_STRING","false",965],")",";",["T_WHITESPACE","\n            ",965],["T_VARIABLE","$deps",966],["T_WHITESPACE"," ",966],"=",["T_WHITESPACE"," ",966],["T_VARIABLE","$_deps",966],";",["T_WHITESPACE","\n            ",966],["T_VARIABLE","$failed",967],["T_WHITESPACE"," ",967],"=",["T_WHITESPACE"," ",967],["T_VARIABLE","$_failed",967],";",["T_WHITESPACE","\n            ",967],["T_VARIABLE","$_depsHash",968],["T_WHITESPACE"," ",968],"=",["T_WHITESPACE"," ",968],["T_ARRAY","array",968],"(",")",";",["T_WHITESPACE","\n            ",968],["T_VARIABLE","$_deps",969],["T_WHITESPACE"," ",969],"=",["T_WHITESPACE"," ",969],["T_ARRAY","array",969],"(",")",";",["T_WHITESPACE","\n            ",969],["T_VARIABLE","$_failed",970],["T_WHITESPACE"," ",970],"=",["T_WHITESPACE"," ",970],["T_ARRAY","array",970],"(",")",";",["T_WHITESPACE","\n            ",970],["T_RETURN","return",971],["T_WHITESPACE"," ",971],["T_ARRAY","array",971],"(",["T_CONSTANT_ENCAPSED_STRING","'deps'",971],["T_WHITESPACE"," ",971],["T_DOUBLE_ARROW","=>",971],["T_WHITESPACE"," ",971],["T_VARIABLE","$deps",971],",",["T_WHITESPACE"," ",971],["T_CONSTANT_ENCAPSED_STRING","'result'",971],["T_WHITESPACE"," ",971],["T_DOUBLE_ARROW","=>",971],["T_WHITESPACE"," ",971],["T_VARIABLE","$out",971],",",["T_WHITESPACE"," ",971],["T_CONSTANT_ENCAPSED_STRING","'failed'",971],["T_DOUBLE_ARROW","=>",971],["T_WHITESPACE"," ",971],["T_VARIABLE","$failed",971],")",";",["T_WHITESPACE","\n        ",971],"}",["T_WHITESPACE","\n\n        ",972],["T_RETURN","return",974],["T_WHITESPACE"," ",974],["T_STRING","null",974],";",["T_WHITESPACE","\n    ",974],"}",["T_WHITESPACE","\n\n    ",975],["T_DOC_COMMENT","\/**\n     * Process dependencies hash. Makes topological sorting and gives operation order list\n     *\n     * @param array $depsHash\n     * @param bool $sortReverse\n     * @return array\n     *\/",977],["T_WHITESPACE","\n    ",983],["T_PROTECTED","protected",984],["T_WHITESPACE"," ",984],["T_FUNCTION","function",984],["T_WHITESPACE"," ",984],["T_STRING","processDepsHash",984],"(","&",["T_VARIABLE","$depsHash",984],",",["T_WHITESPACE"," ",984],["T_VARIABLE","$sortReverse",984],["T_WHITESPACE"," ",984],"=",["T_WHITESPACE"," ",984],["T_STRING","true",984],")",["T_WHITESPACE","\n    ",984],"{",["T_WHITESPACE","\n        ",985],["T_VARIABLE","$nodes",986],["T_WHITESPACE"," ",986],"=",["T_WHITESPACE"," ",986],["T_ARRAY","array",986],"(",")",";",["T_WHITESPACE","\n        ",986],["T_VARIABLE","$graph",987],["T_WHITESPACE"," ",987],"=",["T_WHITESPACE"," ",987],["T_NEW","new",987],["T_WHITESPACE"," ",987],["T_STRING","Mage_Connect_Structures_Graph",987],"(",")",";",["T_WHITESPACE","\n\n        ",987],["T_FOREACH","foreach",989],["T_WHITESPACE"," ",989],"(",["T_VARIABLE","$depsHash",989],["T_WHITESPACE"," ",989],["T_AS","as",989],["T_WHITESPACE"," ",989],["T_VARIABLE","$key",989],["T_DOUBLE_ARROW","=>",989],["T_VARIABLE","$data",989],")",["T_WHITESPACE"," ",989],"{",["T_WHITESPACE","\n            ",989],["T_VARIABLE","$node",990],["T_WHITESPACE"," ",990],"=",["T_WHITESPACE"," ",990],["T_NEW","new",990],["T_WHITESPACE"," ",990],["T_STRING","Mage_Connect_Structures_Node",990],"(",")",";",["T_WHITESPACE","\n            ",990],["T_VARIABLE","$nodes",991],"[",["T_VARIABLE","$key",991],"]",["T_WHITESPACE"," ",991],"=","&",["T_WHITESPACE"," ",991],["T_VARIABLE","$node",991],";",["T_WHITESPACE","\n            ",991],["T_UNSET","unset",992],"(",["T_VARIABLE","$data",992],"[",["T_CONSTANT_ENCAPSED_STRING","'packages'",992],"]",")",";",["T_WHITESPACE","\n            ",992],["T_VARIABLE","$node",993],["T_OBJECT_OPERATOR","->",993],["T_STRING","setData",993],"(",["T_VARIABLE","$data",993],")",";",["T_WHITESPACE","\n            ",993],["T_VARIABLE","$graph",994],["T_OBJECT_OPERATOR","->",994],["T_STRING","addNode",994],"(",["T_VARIABLE","$node",994],")",";",["T_WHITESPACE","\n            ",994],["T_UNSET","unset",995],"(",["T_VARIABLE","$node",995],")",";",["T_WHITESPACE","\n        ",995],"}",["T_WHITESPACE","\n\n        ",996],["T_IF","if",998],["T_WHITESPACE"," ",998],"(",["T_STRING","count",998],"(",["T_VARIABLE","$nodes",998],")",["T_WHITESPACE"," ",998],">",["T_WHITESPACE"," ",998],["T_LNUMBER","1",998],")",["T_WHITESPACE"," ",998],"{",["T_WHITESPACE","\n            ",998],["T_FOREACH","foreach",999],["T_WHITESPACE"," ",999],"(",["T_VARIABLE","$depsHash",999],["T_WHITESPACE"," ",999],["T_AS","as",999],["T_WHITESPACE"," ",999],["T_VARIABLE","$key",999],["T_DOUBLE_ARROW","=>",999],["T_VARIABLE","$data",999],")",["T_WHITESPACE"," ",999],"{",["T_WHITESPACE","\n                ",999],["T_VARIABLE","$packages",1000],["T_WHITESPACE"," ",1000],"=",["T_WHITESPACE"," ",1000],["T_VARIABLE","$data",1000],"[",["T_CONSTANT_ENCAPSED_STRING","'packages'",1000],"]",";",["T_WHITESPACE","\n                ",1000],["T_FOREACH","foreach",1001],["T_WHITESPACE"," ",1001],"(",["T_VARIABLE","$packages",1001],["T_WHITESPACE"," ",1001],["T_AS","as",1001],["T_WHITESPACE"," ",1001],["T_VARIABLE","$pdata",1001],")",["T_WHITESPACE"," ",1001],"{",["T_WHITESPACE","\n                    ",1001],["T_VARIABLE","$pName",1002],["T_WHITESPACE"," ",1002],"=",["T_WHITESPACE"," ",1002],["T_VARIABLE","$pdata",1002],"[",["T_CONSTANT_ENCAPSED_STRING","'name'",1002],"]",";",["T_WHITESPACE","\n                    ",1002],["T_IF","if",1003],["T_WHITESPACE"," ",1003],"(",["T_ISSET","isset",1003],"(",["T_VARIABLE","$nodes",1003],"[",["T_VARIABLE","$key",1003],"]",",",["T_WHITESPACE"," ",1003],["T_VARIABLE","$nodes",1003],"[",["T_VARIABLE","$pName",1003],"]",")",")",["T_WHITESPACE"," ",1003],"{",["T_WHITESPACE","\n                        ",1003],["T_VARIABLE","$nodes",1004],"[",["T_VARIABLE","$key",1004],"]",["T_OBJECT_OPERATOR","->",1004],["T_STRING","connectTo",1004],"(",["T_VARIABLE","$nodes",1004],"[",["T_VARIABLE","$pName",1004],"]",")",";",["T_WHITESPACE","\n                    ",1004],"}",["T_WHITESPACE","\n                ",1005],"}",["T_WHITESPACE","\n            ",1006],"}",["T_WHITESPACE","\n        ",1007],"}",["T_WHITESPACE","\n\n        ",1008],["T_IF","if",1010],["T_WHITESPACE"," ",1010],"(","!",["T_VARIABLE","$graph",1010],["T_OBJECT_OPERATOR","->",1010],["T_STRING","isAcyclic",1010],"(",")",")",["T_WHITESPACE"," ",1010],"{",["T_WHITESPACE","\n            ",1010],["T_THROW","throw",1011],["T_WHITESPACE"," ",1011],["T_NEW","new",1011],["T_WHITESPACE"," ",1011],["T_STRING","Exception",1011],"(",["T_CONSTANT_ENCAPSED_STRING","\"Dependency references are cyclic\"",1011],")",";",["T_WHITESPACE","\n        ",1011],"}",["T_WHITESPACE","\n\n        ",1012],["T_VARIABLE","$result",1014],["T_WHITESPACE"," ",1014],"=",["T_WHITESPACE"," ",1014],["T_VARIABLE","$graph",1014],["T_OBJECT_OPERATOR","->",1014],["T_STRING","topologicalSort",1014],"(",")",";",["T_WHITESPACE","\n        ",1014],["T_VARIABLE","$sortReverse",1015],["T_WHITESPACE"," ",1015],"?",["T_WHITESPACE"," ",1015],["T_STRING","krsort",1015],"(",["T_VARIABLE","$result",1015],")",["T_WHITESPACE"," ",1015],":",["T_WHITESPACE"," ",1015],["T_STRING","ksort",1015],"(",["T_VARIABLE","$result",1015],")",";",["T_WHITESPACE","\n        ",1015],["T_VARIABLE","$out",1016],["T_WHITESPACE"," ",1016],"=",["T_WHITESPACE"," ",1016],["T_ARRAY","array",1016],"(",")",";",["T_WHITESPACE","\n        ",1016],["T_FOREACH","foreach",1017],["T_WHITESPACE"," ",1017],"(",["T_VARIABLE","$result",1017],["T_WHITESPACE"," ",1017],["T_AS","as",1017],["T_WHITESPACE"," ",1017],["T_VARIABLE","$nodes",1017],")",["T_WHITESPACE"," ",1017],"{",["T_WHITESPACE","\n            ",1017],["T_FOREACH","foreach",1018],["T_WHITESPACE"," ",1018],"(",["T_VARIABLE","$nodes",1018],["T_WHITESPACE"," ",1018],["T_AS","as",1018],["T_WHITESPACE"," ",1018],["T_VARIABLE","$n",1018],")",["T_WHITESPACE"," ",1018],"{",["T_WHITESPACE","\n                ",1018],["T_DOC_COMMENT","\/** @var $n Mage_Connect_Structures_Node *\/",1019],["T_WHITESPACE","\n                ",1019],["T_VARIABLE","$out",1020],"[","]",["T_WHITESPACE"," ",1020],"=",["T_WHITESPACE"," ",1020],["T_VARIABLE","$n",1020],["T_OBJECT_OPERATOR","->",1020],["T_STRING","getData",1020],"(",")",";",["T_WHITESPACE","\n            ",1020],"}",["T_WHITESPACE","\n        ",1021],"}",["T_WHITESPACE","\n        ",1022],["T_UNSET","unset",1023],"(",["T_VARIABLE","$graph",1023],",",["T_WHITESPACE"," ",1023],["T_VARIABLE","$nodes",1023],")",";",["T_WHITESPACE","\n        ",1023],["T_RETURN","return",1024],["T_WHITESPACE"," ",1024],["T_VARIABLE","$out",1024],";",["T_WHITESPACE","\n    ",1024],"}",["T_WHITESPACE","\n\n    ",1025],["T_DOC_COMMENT","\/**\n     * Check if directory writable\n     *\n     * @param string $dir\n     * @return boolean\n     *\/",1027],["T_WHITESPACE","\n    ",1032],["T_PROTECTED","protected",1033],["T_WHITESPACE"," ",1033],["T_FUNCTION","function",1033],["T_WHITESPACE"," ",1033],["T_STRING","isDirWritable",1033],"(",["T_VARIABLE","$dir",1033],")",["T_WHITESPACE","\n    ",1033],"{",["T_WHITESPACE","\n        ",1034],["T_IF","if",1035],["T_WHITESPACE"," ",1035],"(",["T_STRING","is_dir",1035],"(",["T_VARIABLE","$dir",1035],")",["T_WHITESPACE"," ",1035],["T_BOOLEAN_AND","&&",1035],["T_WHITESPACE"," ",1035],["T_STRING","is_writable",1035],"(",["T_VARIABLE","$dir",1035],")",")",["T_WHITESPACE"," ",1035],"{",["T_WHITESPACE","\n            ",1035],["T_IF","if",1036],["T_WHITESPACE"," ",1036],"(",["T_STRING","stripos",1036],"(",["T_STRING","PHP_OS",1036],",",["T_WHITESPACE"," ",1036],["T_CONSTANT_ENCAPSED_STRING","'win'",1036],")",["T_WHITESPACE"," ",1036],["T_IS_IDENTICAL","===",1036],["T_WHITESPACE"," ",1036],["T_LNUMBER","0",1036],")",["T_WHITESPACE"," ",1036],"{",["T_WHITESPACE","\n                ",1036],["T_VARIABLE","$dir",1037],["T_WHITESPACE","    ",1037],"=",["T_WHITESPACE"," ",1037],["T_STRING","ltrim",1037],"(",["T_VARIABLE","$dir",1037],",",["T_WHITESPACE"," ",1037],["T_STRING","DIRECTORY_SEPARATOR",1037],")",";",["T_WHITESPACE","\n                ",1037],["T_VARIABLE","$file",1038],["T_WHITESPACE","   ",1038],"=",["T_WHITESPACE"," ",1038],["T_VARIABLE","$dir",1038],["T_WHITESPACE"," ",1038],".",["T_WHITESPACE"," ",1038],["T_STRING","DIRECTORY_SEPARATOR",1038],["T_WHITESPACE"," ",1038],".",["T_WHITESPACE"," ",1038],["T_STRING","uniqid",1038],"(",["T_STRING","mt_rand",1038],"(",")",")",".",["T_CONSTANT_ENCAPSED_STRING","'.tmp'",1038],";",["T_WHITESPACE","\n                ",1038],["T_VARIABLE","$exist",1039],["T_WHITESPACE","  ",1039],"=",["T_WHITESPACE"," ",1039],["T_STRING","file_exists",1039],"(",["T_VARIABLE","$file",1039],")",";",["T_WHITESPACE","\n                ",1039],["T_VARIABLE","$fp",1040],["T_WHITESPACE","     ",1040],"=",["T_WHITESPACE"," ",1040],"@",["T_STRING","fopen",1040],"(",["T_VARIABLE","$file",1040],",",["T_WHITESPACE"," ",1040],["T_CONSTANT_ENCAPSED_STRING","'a'",1040],")",";",["T_WHITESPACE","\n                ",1040],["T_IF","if",1041],["T_WHITESPACE"," ",1041],"(",["T_VARIABLE","$fp",1041],["T_WHITESPACE"," ",1041],["T_IS_IDENTICAL","===",1041],["T_WHITESPACE"," ",1041],["T_STRING","false",1041],")",["T_WHITESPACE"," ",1041],"{",["T_WHITESPACE","\n                    ",1041],["T_RETURN","return",1042],["T_WHITESPACE"," ",1042],["T_STRING","false",1042],";",["T_WHITESPACE","\n                ",1042],"}",["T_WHITESPACE","\n                ",1043],["T_STRING","fclose",1044],"(",["T_VARIABLE","$fp",1044],")",";",["T_WHITESPACE","\n                ",1044],["T_IF","if",1045],["T_WHITESPACE"," ",1045],"(","!",["T_VARIABLE","$exist",1045],")",["T_WHITESPACE"," ",1045],"{",["T_WHITESPACE","\n                    ",1045],["T_STRING","unlink",1046],"(",["T_VARIABLE","$file",1046],")",";",["T_WHITESPACE","\n                ",1046],"}",["T_WHITESPACE","\n            ",1047],"}",["T_WHITESPACE","\n            ",1048],["T_RETURN","return",1049],["T_WHITESPACE"," ",1049],["T_STRING","true",1049],";",["T_WHITESPACE","\n        ",1049],"}",["T_WHITESPACE","\n        ",1050],["T_RETURN","return",1051],["T_WHITESPACE"," ",1051],["T_STRING","false",1051],";",["T_WHITESPACE","\n    ",1051],"}",["T_WHITESPACE","\n",1052],"}",["T_WHITESPACE","\n",1053]]
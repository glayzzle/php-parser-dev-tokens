[["T_OPEN_TAG","<?php\n",1],["T_DOC_COMMENT","\/**\n * Magento\n *\n * NOTICE OF LICENSE\n *\n * This source file is subject to the Open Software License (OSL 3.0)\n * that is bundled with this package in the file LICENSE.txt.\n * It is also available through the world-wide-web at this URL:\n * http:\/\/opensource.org\/licenses\/osl-3.0.php\n * If you did not receive a copy of the license and are unable to\n * obtain it through the world-wide-web, please send an email\n * to license@magento.com so we can send you a copy immediately.\n *\n * DISCLAIMER\n *\n * Do not edit or add to this file if you wish to upgrade Magento to newer\n * versions in the future. If you wish to customize Magento for your\n * needs please refer to http:\/\/www.magento.com for more information.\n *\n * @category    Mage\n * @package     Mage_HTTP\n * @copyright  Copyright (c) 2006-2016 X.commerce, Inc. and affiliates (http:\/\/www.magento.com)\n * @license    http:\/\/opensource.org\/licenses\/osl-3.0.php  Open Software License (OSL 3.0)\n *\/",2],["T_WHITESPACE","\n\n",25],["T_DOC_COMMENT","\/**\n * Class to work with HTTP protocol using curl library\n *\n * @category    Mage\n * @package     Mage_Connect\n * @author      Magento Core Team <core@magentocommerce.com>\n *\/",27],["T_WHITESPACE","\n",33],["T_CLASS","class",34],["T_WHITESPACE"," ",34],["T_STRING","Mage_HTTP_Client_Curl",34],["T_WHITESPACE","\n",34],["T_IMPLEMENTS","implements",35],["T_WHITESPACE"," ",35],["T_STRING","Mage_HTTP_IClient",35],["T_WHITESPACE","\n",35],"{",["T_WHITESPACE","\n    ",36],["T_DOC_COMMENT","\/**\n     * Session Cookie storage, magento_root\/var directory used\n     * @var string\n     *\/",37],["T_WHITESPACE","\n    ",40],["T_CONST","const",41],["T_WHITESPACE"," ",41],["T_STRING","COOKIE_FILE",41],["T_WHITESPACE"," ",41],"=",["T_WHITESPACE"," ",41],["T_CONSTANT_ENCAPSED_STRING","'var\/cookie'",41],";",["T_WHITESPACE","\n\n    ",41],["T_DOC_COMMENT","\/**\n     * Hostname\n     * @var string\n     *\/",43],["T_WHITESPACE","\n    ",46],["T_PROTECTED","protected",47],["T_WHITESPACE"," ",47],["T_VARIABLE","$_host",47],["T_WHITESPACE"," ",47],"=",["T_WHITESPACE"," ",47],["T_CONSTANT_ENCAPSED_STRING","'localhost'",47],";",["T_WHITESPACE","\n\n    ",47],["T_DOC_COMMENT","\/**\n     * Port\n     * @var int\n     *\/",49],["T_WHITESPACE","\n    ",52],["T_PROTECTED","protected",53],["T_WHITESPACE"," ",53],["T_VARIABLE","$_port",53],["T_WHITESPACE"," ",53],"=",["T_WHITESPACE"," ",53],["T_LNUMBER","80",53],";",["T_WHITESPACE","\n\n    ",53],["T_DOC_COMMENT","\/**\n     * Stream resource\n     * @var object\n     *\/",55],["T_WHITESPACE","\n    ",58],["T_PROTECTED","protected",59],["T_WHITESPACE"," ",59],["T_VARIABLE","$_sock",59],["T_WHITESPACE"," ",59],"=",["T_WHITESPACE"," ",59],["T_STRING","null",59],";",["T_WHITESPACE","\n\n    ",59],["T_DOC_COMMENT","\/**\n     * Request headers\n     * @var array\n     *\/",61],["T_WHITESPACE","\n    ",64],["T_PROTECTED","protected",65],["T_WHITESPACE"," ",65],["T_VARIABLE","$_headers",65],["T_WHITESPACE"," ",65],"=",["T_WHITESPACE"," ",65],["T_ARRAY","array",65],"(",")",";",["T_WHITESPACE","\n\n\n    ",65],["T_DOC_COMMENT","\/**\n     * Fields for POST method - hash\n     * @var array\n     *\/",68],["T_WHITESPACE","\n    ",71],["T_PROTECTED","protected",72],["T_WHITESPACE"," ",72],["T_VARIABLE","$_postFields",72],["T_WHITESPACE"," ",72],"=",["T_WHITESPACE"," ",72],["T_ARRAY","array",72],"(",")",";",["T_WHITESPACE","\n\n    ",72],["T_DOC_COMMENT","\/**\n     * Request cookies\n     * @var array\n     *\/",74],["T_WHITESPACE","\n    ",77],["T_PROTECTED","protected",78],["T_WHITESPACE"," ",78],["T_VARIABLE","$_cookies",78],["T_WHITESPACE"," ",78],"=",["T_WHITESPACE"," ",78],["T_ARRAY","array",78],"(",")",";",["T_WHITESPACE","\n\n    ",78],["T_DOC_COMMENT","\/**\n     * Response headers\n     * @var array\n     *\/",80],["T_WHITESPACE","\n    ",83],["T_PROTECTED","protected",84],["T_WHITESPACE"," ",84],["T_VARIABLE","$_responseHeaders",84],["T_WHITESPACE"," ",84],"=",["T_WHITESPACE"," ",84],["T_ARRAY","array",84],"(",")",";",["T_WHITESPACE","\n\n    ",84],["T_DOC_COMMENT","\/**\n     * Response body\n     * @var string\n     *\/",86],["T_WHITESPACE","\n    ",89],["T_PROTECTED","protected",90],["T_WHITESPACE"," ",90],["T_VARIABLE","$_responseBody",90],["T_WHITESPACE"," ",90],"=",["T_WHITESPACE"," ",90],["T_CONSTANT_ENCAPSED_STRING","''",90],";",["T_WHITESPACE","\n\n    ",90],["T_DOC_COMMENT","\/**\n     * Response status\n     * @var int\n     *\/",92],["T_WHITESPACE","\n    ",95],["T_PROTECTED","protected",96],["T_WHITESPACE"," ",96],["T_VARIABLE","$_responseStatus",96],["T_WHITESPACE"," ",96],"=",["T_WHITESPACE"," ",96],["T_LNUMBER","0",96],";",["T_WHITESPACE","\n\n\n    ",96],["T_DOC_COMMENT","\/**\n     * Request timeout\n     * @var intunknown_type\n     *\/",99],["T_WHITESPACE","\n    ",102],["T_PROTECTED","protected",103],["T_WHITESPACE"," ",103],["T_VARIABLE","$_timeout",103],["T_WHITESPACE"," ",103],"=",["T_WHITESPACE"," ",103],["T_LNUMBER","300",103],";",["T_WHITESPACE","\n\n    ",103],["T_DOC_COMMENT","\/**\n     * TODO\n     * @var int\n     *\/",105],["T_WHITESPACE","\n    ",108],["T_PROTECTED","protected",109],["T_WHITESPACE"," ",109],["T_VARIABLE","$_redirectCount",109],["T_WHITESPACE"," ",109],"=",["T_WHITESPACE"," ",109],["T_LNUMBER","0",109],";",["T_WHITESPACE","\n\n    ",109],["T_DOC_COMMENT","\/**\n     * Curl\n     * @var object\n     *\/",111],["T_WHITESPACE","\n    ",114],["T_PROTECTED","protected",115],["T_WHITESPACE"," ",115],["T_VARIABLE","$_ch",115],";",["T_WHITESPACE","\n\n\n    ",115],["T_DOC_COMMENT","\/**\n     * User ovverides options hash\n     * Are applied before curl_exec\n     *\n     * @var array();\n     *\/",118],["T_WHITESPACE","\n    ",123],["T_PROTECTED","protected",124],["T_WHITESPACE"," ",124],["T_VARIABLE","$_curlUserOptions",124],["T_WHITESPACE"," ",124],"=",["T_WHITESPACE"," ",124],["T_ARRAY","array",124],"(",")",";",["T_WHITESPACE","\n\n    ",124],["T_DOC_COMMENT","\/**\n     * User credentials\n     *\n     * @var array();\n     *\/",126],["T_WHITESPACE","\n    ",130],["T_PROTECTED","protected",131],["T_WHITESPACE"," ",131],["T_VARIABLE","$_auth",131],["T_WHITESPACE"," ",131],"=",["T_WHITESPACE"," ",131],["T_ARRAY","array",131],"(",")",";",["T_WHITESPACE","\n\n    ",131],["T_DOC_COMMENT","\/**\n     * Set request timeout, msec\n     *\n     * @param int $value\n     *\/",133],["T_WHITESPACE","\n    ",137],["T_PUBLIC","public",138],["T_WHITESPACE"," ",138],["T_FUNCTION","function",138],["T_WHITESPACE"," ",138],["T_STRING","setTimeout",138],"(",["T_VARIABLE","$value",138],")",["T_WHITESPACE","\n    ",138],"{",["T_WHITESPACE","\n        ",139],["T_VARIABLE","$this",140],["T_OBJECT_OPERATOR","->",140],["T_STRING","_timeout",140],["T_WHITESPACE"," ",140],"=",["T_WHITESPACE"," ",140],["T_INT_CAST","(int)",140],["T_WHITESPACE"," ",140],["T_VARIABLE","$value",140],";",["T_WHITESPACE","\n    ",140],"}",["T_WHITESPACE","\n\n    ",141],["T_DOC_COMMENT","\/**\n     * Constructor\n     *\/",143],["T_WHITESPACE","\n    ",145],["T_PUBLIC","public",146],["T_WHITESPACE"," ",146],["T_FUNCTION","function",146],["T_WHITESPACE"," ",146],["T_STRING","__construct",146],"(",")",["T_WHITESPACE","\n    ",146],"{",["T_WHITESPACE","\n\n    ",147],"}",["T_WHITESPACE","\n\n    ",149],["T_DOC_COMMENT","\/**\n     * Destructor\n     * Removes temporary environment\n     *\/",151],["T_WHITESPACE","\n    ",154],["T_PUBLIC","public",155],["T_WHITESPACE"," ",155],["T_FUNCTION","function",155],["T_WHITESPACE"," ",155],["T_STRING","__destruct",155],"(",")",["T_WHITESPACE","\n    ",155],"{",["T_WHITESPACE","\n        ",156],["T_IF","if",157],["T_WHITESPACE"," ",157],"(",["T_STRING","is_file",157],"(",["T_STRING","self",157],["T_DOUBLE_COLON","::",157],["T_STRING","COOKIE_FILE",157],")",")",["T_WHITESPACE"," ",157],"{",["T_WHITESPACE","\n            ",157],"@",["T_STRING","unlink",158],"(",["T_STRING","self",158],["T_DOUBLE_COLON","::",158],["T_STRING","COOKIE_FILE",158],")",";",["T_WHITESPACE","\n        ",158],"}",["T_WHITESPACE","\n    ",159],"}",["T_WHITESPACE","\n\n    ",160],["T_DOC_COMMENT","\/**\n     * Set headers from hash\n\n     * @param array $headers\n     *\/",162],["T_WHITESPACE","\n    ",166],["T_PUBLIC","public",167],["T_WHITESPACE"," ",167],["T_FUNCTION","function",167],["T_WHITESPACE"," ",167],["T_STRING","setHeaders",167],"(",["T_VARIABLE","$headers",167],")",["T_WHITESPACE","\n    ",167],"{",["T_WHITESPACE","\n        ",168],["T_VARIABLE","$this",169],["T_OBJECT_OPERATOR","->",169],["T_STRING","_headers",169],["T_WHITESPACE"," ",169],"=",["T_WHITESPACE"," ",169],["T_VARIABLE","$headers",169],";",["T_WHITESPACE","\n\n    ",169],"}",["T_WHITESPACE","\n\n    ",171],["T_DOC_COMMENT","\/**\n     * Add header\n     *\n     * @param $name name, ex. \"Location\"\n     * @param $value value ex. \"http:\/\/google.com\"\n     *\/",173],["T_WHITESPACE","\n    ",178],["T_PUBLIC","public",179],["T_WHITESPACE"," ",179],["T_FUNCTION","function",179],["T_WHITESPACE"," ",179],["T_STRING","addHeader",179],"(",["T_VARIABLE","$name",179],",",["T_WHITESPACE"," ",179],["T_VARIABLE","$value",179],")",["T_WHITESPACE","\n    ",179],"{",["T_WHITESPACE","\n        ",180],["T_VARIABLE","$this",181],["T_OBJECT_OPERATOR","->",181],["T_STRING","_headers",181],"[",["T_VARIABLE","$name",181],"]",["T_WHITESPACE"," ",181],"=",["T_WHITESPACE"," ",181],["T_VARIABLE","$value",181],";",["T_WHITESPACE","\n    ",181],"}",["T_WHITESPACE","\n\n    ",182],["T_DOC_COMMENT","\/**\n     * Remove specified header\n     *\n     * @param string $name\n     *\/",184],["T_WHITESPACE","\n    ",188],["T_PUBLIC","public",189],["T_WHITESPACE"," ",189],["T_FUNCTION","function",189],["T_WHITESPACE"," ",189],["T_STRING","removeHeader",189],"(",["T_VARIABLE","$name",189],")",["T_WHITESPACE","\n    ",189],"{",["T_WHITESPACE","\n        ",190],["T_UNSET","unset",191],"(",["T_VARIABLE","$this",191],["T_OBJECT_OPERATOR","->",191],["T_STRING","_headers",191],"[",["T_VARIABLE","$name",191],"]",")",";",["T_WHITESPACE","\n\n    ",191],"}",["T_WHITESPACE","\n\n    ",193],["T_DOC_COMMENT","\/**\n     * Authorization: Basic header\n     * Login credentials support\n     *\n     * @param string $login username\n     * @param string $pass password\n     *\/",195],["T_WHITESPACE","\n    ",201],["T_PUBLIC","public",202],["T_WHITESPACE"," ",202],["T_FUNCTION","function",202],["T_WHITESPACE"," ",202],["T_STRING","setCredentials",202],"(",["T_VARIABLE","$login",202],",",["T_WHITESPACE"," ",202],["T_VARIABLE","$pass",202],")",["T_WHITESPACE","\n    ",202],"{",["T_WHITESPACE","\n        ",203],["T_VARIABLE","$this",204],["T_OBJECT_OPERATOR","->",204],["T_STRING","_auth",204],"[",["T_CONSTANT_ENCAPSED_STRING","'login'",204],"]",["T_WHITESPACE"," ",204],"=",["T_WHITESPACE"," ",204],["T_VARIABLE","$login",204],";",["T_WHITESPACE","\n        ",204],["T_VARIABLE","$this",205],["T_OBJECT_OPERATOR","->",205],["T_STRING","_auth",205],"[",["T_CONSTANT_ENCAPSED_STRING","'password'",205],"]",["T_WHITESPACE"," ",205],"=",["T_WHITESPACE"," ",205],["T_VARIABLE","$pass",205],";",["T_WHITESPACE","\n        ",205],["T_COMMENT","\/\/$val= base64_encode( \"$login:$pass\" );\n",206],["T_WHITESPACE","        ",207],["T_COMMENT","\/\/$this->addHeader( \"Authorization\", \"Basic $val\" );\n",207],["T_WHITESPACE","    ",208],"}",["T_WHITESPACE","\n\n    ",208],["T_DOC_COMMENT","\/**\n     * Add cookie\n     *\n     * @param string $name\n     * @param string $value\n     *\/",210],["T_WHITESPACE","\n    ",215],["T_PUBLIC","public",216],["T_WHITESPACE"," ",216],["T_FUNCTION","function",216],["T_WHITESPACE"," ",216],["T_STRING","addCookie",216],"(",["T_VARIABLE","$name",216],",",["T_WHITESPACE"," ",216],["T_VARIABLE","$value",216],")",["T_WHITESPACE","\n    ",216],"{",["T_WHITESPACE","\n        ",217],["T_VARIABLE","$this",218],["T_OBJECT_OPERATOR","->",218],["T_STRING","_cookies",218],"[",["T_VARIABLE","$name",218],"]",["T_WHITESPACE"," ",218],"=",["T_WHITESPACE"," ",218],["T_VARIABLE","$value",218],";",["T_WHITESPACE","\n    ",218],"}",["T_WHITESPACE","\n\n    ",219],["T_DOC_COMMENT","\/**\n     * Remove cookie\n     *\n     * @param string $name\n     *\/",221],["T_WHITESPACE","\n    ",225],["T_PUBLIC","public",226],["T_WHITESPACE"," ",226],["T_FUNCTION","function",226],["T_WHITESPACE"," ",226],["T_STRING","removeCookie",226],"(",["T_VARIABLE","$name",226],")",["T_WHITESPACE","\n    ",226],"{",["T_WHITESPACE","\n        ",227],["T_UNSET","unset",228],"(",["T_VARIABLE","$this",228],["T_OBJECT_OPERATOR","->",228],["T_STRING","_cookies",228],"[",["T_VARIABLE","$name",228],"]",")",";",["T_WHITESPACE","\n    ",228],"}",["T_WHITESPACE","\n\n    ",229],["T_DOC_COMMENT","\/**\n     * Set cookies array\n     *\n     * @param array $cookies\n     *\/",231],["T_WHITESPACE","\n    ",235],["T_PUBLIC","public",236],["T_WHITESPACE"," ",236],["T_FUNCTION","function",236],["T_WHITESPACE"," ",236],["T_STRING","setCookies",236],"(",["T_VARIABLE","$cookies",236],")",["T_WHITESPACE","\n    ",236],"{",["T_WHITESPACE","\n        ",237],["T_VARIABLE","$this",238],["T_OBJECT_OPERATOR","->",238],["T_STRING","_cookies",238],["T_WHITESPACE"," ",238],"=",["T_WHITESPACE"," ",238],["T_VARIABLE","$cookies",238],";",["T_WHITESPACE","\n    ",238],"}",["T_WHITESPACE","\n\n    ",239],["T_DOC_COMMENT","\/**\n     * Clear cookies\n     *\/",241],["T_WHITESPACE","\n    ",243],["T_PUBLIC","public",244],["T_WHITESPACE"," ",244],["T_FUNCTION","function",244],["T_WHITESPACE"," ",244],["T_STRING","removeCookies",244],"(",")",["T_WHITESPACE","\n    ",244],"{",["T_WHITESPACE","\n        ",245],["T_VARIABLE","$this",246],["T_OBJECT_OPERATOR","->",246],["T_STRING","setCookies",246],"(",["T_ARRAY","array",246],"(",")",")",";",["T_WHITESPACE","\n    ",246],"}",["T_WHITESPACE","\n\n\n    ",247],["T_DOC_COMMENT","\/**\n     * Make GET request\n     *\n     * @param string $uri uri relative to host, ex. \"\/index.php\"\n     *\/",250],["T_WHITESPACE","\n    ",254],["T_PUBLIC","public",255],["T_WHITESPACE"," ",255],["T_FUNCTION","function",255],["T_WHITESPACE"," ",255],["T_STRING","get",255],"(",["T_VARIABLE","$uri",255],")",["T_WHITESPACE","\n    ",255],"{",["T_WHITESPACE","\n        ",256],["T_VARIABLE","$this",257],["T_OBJECT_OPERATOR","->",257],["T_STRING","makeRequest",257],"(",["T_CONSTANT_ENCAPSED_STRING","\"GET\"",257],",",["T_WHITESPACE"," ",257],["T_VARIABLE","$uri",257],")",";",["T_WHITESPACE","\n    ",257],"}",["T_WHITESPACE","\n\n    ",258],["T_DOC_COMMENT","\/**\n     * Make POST request\n     * @see lib\/Mage\/HTTP\/Mage_HTTP_Client#post($uri, $params)\n     *\/",260],["T_WHITESPACE","\n    ",263],["T_PUBLIC","public",264],["T_WHITESPACE"," ",264],["T_FUNCTION","function",264],["T_WHITESPACE"," ",264],["T_STRING","post",264],"(",["T_VARIABLE","$uri",264],",",["T_WHITESPACE"," ",264],["T_VARIABLE","$params",264],")",["T_WHITESPACE","\n    ",264],"{",["T_WHITESPACE","\n        ",265],["T_VARIABLE","$this",266],["T_OBJECT_OPERATOR","->",266],["T_STRING","makeRequest",266],"(",["T_CONSTANT_ENCAPSED_STRING","\"POST\"",266],",",["T_WHITESPACE"," ",266],["T_VARIABLE","$uri",266],",",["T_WHITESPACE"," ",266],["T_VARIABLE","$params",266],")",";",["T_WHITESPACE","\n    ",266],"}",["T_WHITESPACE","\n\n\n    ",267],["T_DOC_COMMENT","\/**\n     * Get response headers\n     *\n     * @return array\n     *\/",270],["T_WHITESPACE","\n    ",274],["T_PUBLIC","public",275],["T_WHITESPACE"," ",275],["T_FUNCTION","function",275],["T_WHITESPACE"," ",275],["T_STRING","getHeaders",275],"(",")",["T_WHITESPACE","\n    ",275],"{",["T_WHITESPACE","\n        ",276],["T_RETURN","return",277],["T_WHITESPACE"," ",277],["T_VARIABLE","$this",277],["T_OBJECT_OPERATOR","->",277],["T_STRING","_responseHeaders",277],";",["T_WHITESPACE","\n    ",277],"}",["T_WHITESPACE","\n\n\n    ",278],["T_DOC_COMMENT","\/**\n     * Get response body\n     *\n     * @return string\n     *\/",281],["T_WHITESPACE","\n    ",285],["T_PUBLIC","public",286],["T_WHITESPACE"," ",286],["T_FUNCTION","function",286],["T_WHITESPACE"," ",286],["T_STRING","getBody",286],"(",")",["T_WHITESPACE","\n    ",286],"{",["T_WHITESPACE","\n        ",287],["T_RETURN","return",288],["T_WHITESPACE"," ",288],["T_VARIABLE","$this",288],["T_OBJECT_OPERATOR","->",288],["T_STRING","_responseBody",288],";",["T_WHITESPACE","\n    ",288],"}",["T_WHITESPACE","\n\n    ",289],["T_DOC_COMMENT","\/**\n     * Get cookies response hash\n     *\n     * @return array\n     *\/",291],["T_WHITESPACE","\n    ",295],["T_PUBLIC","public",296],["T_WHITESPACE"," ",296],["T_FUNCTION","function",296],["T_WHITESPACE"," ",296],["T_STRING","getCookies",296],"(",")",["T_WHITESPACE","\n    ",296],"{",["T_WHITESPACE","\n        ",297],["T_IF","if",298],"(",["T_EMPTY","empty",298],"(",["T_VARIABLE","$this",298],["T_OBJECT_OPERATOR","->",298],["T_STRING","_responseHeaders",298],"[",["T_CONSTANT_ENCAPSED_STRING","'Set-Cookie'",298],"]",")",")",["T_WHITESPACE"," ",298],"{",["T_WHITESPACE","\n            ",298],["T_RETURN","return",299],["T_WHITESPACE"," ",299],["T_ARRAY","array",299],"(",")",";",["T_WHITESPACE","\n        ",299],"}",["T_WHITESPACE","\n        ",300],["T_VARIABLE","$out",301],["T_WHITESPACE"," ",301],"=",["T_WHITESPACE"," ",301],["T_ARRAY","array",301],"(",")",";",["T_WHITESPACE","\n        ",301],["T_FOREACH","foreach",302],"(",["T_WHITESPACE"," ",302],["T_VARIABLE","$this",302],["T_OBJECT_OPERATOR","->",302],["T_STRING","_responseHeaders",302],"[",["T_CONSTANT_ENCAPSED_STRING","'Set-Cookie'",302],"]",["T_WHITESPACE"," ",302],["T_AS","as",302],["T_WHITESPACE"," ",302],["T_VARIABLE","$row",302],")",["T_WHITESPACE"," ",302],"{",["T_WHITESPACE","\n            ",302],["T_VARIABLE","$values",303],["T_WHITESPACE"," ",303],"=",["T_WHITESPACE"," ",303],["T_STRING","explode",303],"(",["T_CONSTANT_ENCAPSED_STRING","\"; \"",303],",",["T_WHITESPACE"," ",303],["T_VARIABLE","$row",303],")",";",["T_WHITESPACE","\n            ",303],["T_VARIABLE","$c",304],["T_WHITESPACE"," ",304],"=",["T_WHITESPACE"," ",304],["T_STRING","count",304],"(",["T_VARIABLE","$values",304],")",";",["T_WHITESPACE","\n            ",304],["T_IF","if",305],"(","!",["T_VARIABLE","$c",305],")",["T_WHITESPACE"," ",305],"{",["T_WHITESPACE","\n                ",305],["T_CONTINUE","continue",306],";",["T_WHITESPACE","\n            ",306],"}",["T_WHITESPACE","\n            ",307],["T_LIST","list",308],"(",["T_VARIABLE","$key",308],",",["T_WHITESPACE"," ",308],["T_VARIABLE","$val",308],")",["T_WHITESPACE"," ",308],"=",["T_WHITESPACE"," ",308],["T_STRING","explode",308],"(",["T_CONSTANT_ENCAPSED_STRING","\"=\"",308],",",["T_WHITESPACE"," ",308],["T_VARIABLE","$values",308],"[",["T_LNUMBER","0",308],"]",")",";",["T_WHITESPACE","\n            ",308],["T_IF","if",309],"(",["T_STRING","is_null",309],"(",["T_VARIABLE","$val",309],")",")",["T_WHITESPACE"," ",309],"{",["T_WHITESPACE","\n                ",309],["T_CONTINUE","continue",310],";",["T_WHITESPACE","\n            ",310],"}",["T_WHITESPACE","\n            ",311],["T_VARIABLE","$out",312],"[",["T_STRING","trim",312],"(",["T_VARIABLE","$key",312],")","]",["T_WHITESPACE"," ",312],"=",["T_WHITESPACE"," ",312],["T_STRING","trim",312],"(",["T_VARIABLE","$val",312],")",";",["T_WHITESPACE","\n        ",312],"}",["T_WHITESPACE","\n        ",313],["T_RETURN","return",314],["T_WHITESPACE"," ",314],["T_VARIABLE","$out",314],";",["T_WHITESPACE","\n    ",314],"}",["T_WHITESPACE","\n\n\n    ",315],["T_DOC_COMMENT","\/**\n     * Get cookies array with details\n     * (domain, expire time etc)\n     * @return array\n     *\/",318],["T_WHITESPACE","\n    ",322],["T_PUBLIC","public",323],["T_WHITESPACE"," ",323],["T_FUNCTION","function",323],["T_WHITESPACE"," ",323],["T_STRING","getCookiesFull",323],"(",")",["T_WHITESPACE","\n    ",323],"{",["T_WHITESPACE","\n        ",324],["T_IF","if",325],"(",["T_EMPTY","empty",325],"(",["T_VARIABLE","$this",325],["T_OBJECT_OPERATOR","->",325],["T_STRING","_responseHeaders",325],"[",["T_CONSTANT_ENCAPSED_STRING","'Set-Cookie'",325],"]",")",")",["T_WHITESPACE"," ",325],"{",["T_WHITESPACE","\n            ",325],["T_RETURN","return",326],["T_WHITESPACE"," ",326],["T_ARRAY","array",326],"(",")",";",["T_WHITESPACE","\n        ",326],"}",["T_WHITESPACE","\n        ",327],["T_VARIABLE","$out",328],["T_WHITESPACE"," ",328],"=",["T_WHITESPACE"," ",328],["T_ARRAY","array",328],"(",")",";",["T_WHITESPACE","\n        ",328],["T_FOREACH","foreach",329],"(",["T_WHITESPACE"," ",329],["T_VARIABLE","$this",329],["T_OBJECT_OPERATOR","->",329],["T_STRING","_responseHeaders",329],"[",["T_CONSTANT_ENCAPSED_STRING","'Set-Cookie'",329],"]",["T_WHITESPACE"," ",329],["T_AS","as",329],["T_WHITESPACE"," ",329],["T_VARIABLE","$row",329],")",["T_WHITESPACE"," ",329],"{",["T_WHITESPACE","\n            ",329],["T_VARIABLE","$values",330],["T_WHITESPACE"," ",330],"=",["T_WHITESPACE"," ",330],["T_STRING","explode",330],"(",["T_CONSTANT_ENCAPSED_STRING","\"; \"",330],",",["T_WHITESPACE"," ",330],["T_VARIABLE","$row",330],")",";",["T_WHITESPACE","\n            ",330],["T_VARIABLE","$c",331],["T_WHITESPACE"," ",331],"=",["T_WHITESPACE"," ",331],["T_STRING","count",331],"(",["T_VARIABLE","$values",331],")",";",["T_WHITESPACE","\n            ",331],["T_IF","if",332],"(","!",["T_VARIABLE","$c",332],")",["T_WHITESPACE"," ",332],"{",["T_WHITESPACE","\n                ",332],["T_CONTINUE","continue",333],";",["T_WHITESPACE","\n            ",333],"}",["T_WHITESPACE","\n            ",334],["T_LIST","list",335],"(",["T_VARIABLE","$key",335],",",["T_WHITESPACE"," ",335],["T_VARIABLE","$val",335],")",["T_WHITESPACE"," ",335],"=",["T_WHITESPACE"," ",335],["T_STRING","explode",335],"(",["T_CONSTANT_ENCAPSED_STRING","\"=\"",335],",",["T_WHITESPACE"," ",335],["T_VARIABLE","$values",335],"[",["T_LNUMBER","0",335],"]",")",";",["T_WHITESPACE","\n            ",335],["T_IF","if",336],"(",["T_STRING","is_null",336],"(",["T_VARIABLE","$val",336],")",")",["T_WHITESPACE"," ",336],"{",["T_WHITESPACE","\n                ",336],["T_CONTINUE","continue",337],";",["T_WHITESPACE","\n            ",337],"}",["T_WHITESPACE","\n            ",338],["T_VARIABLE","$out",339],"[",["T_STRING","trim",339],"(",["T_VARIABLE","$key",339],")","]",["T_WHITESPACE"," ",339],"=",["T_WHITESPACE"," ",339],["T_ARRAY","array",339],"(",["T_CONSTANT_ENCAPSED_STRING","'value'",339],["T_DOUBLE_ARROW","=>",339],["T_STRING","trim",339],"(",["T_VARIABLE","$val",339],")",")",";",["T_WHITESPACE","\n            ",339],["T_STRING","array_shift",340],"(",["T_VARIABLE","$values",340],")",";",["T_WHITESPACE","\n            ",340],["T_VARIABLE","$c",341],["T_DEC","--",341],";",["T_WHITESPACE","\n            ",341],["T_IF","if",342],"(","!",["T_VARIABLE","$c",342],")",["T_WHITESPACE"," ",342],"{",["T_WHITESPACE","\n                ",342],["T_CONTINUE","continue",343],";",["T_WHITESPACE","\n            ",343],"}",["T_WHITESPACE","\n            ",344],["T_FOR","for",345],"(",["T_VARIABLE","$i",345],["T_WHITESPACE"," ",345],"=",["T_WHITESPACE"," ",345],["T_LNUMBER","0",345],";",["T_WHITESPACE"," ",345],["T_VARIABLE","$i",345],"<",["T_VARIABLE","$c",345],";",["T_WHITESPACE"," ",345],["T_VARIABLE","$i",345],["T_INC","++",345],")",["T_WHITESPACE"," ",345],"{",["T_WHITESPACE","\n                ",345],["T_LIST","list",346],"(",["T_VARIABLE","$subkey",346],",",["T_WHITESPACE"," ",346],["T_VARIABLE","$val",346],")",["T_WHITESPACE"," ",346],"=",["T_WHITESPACE"," ",346],["T_STRING","explode",346],"(",["T_CONSTANT_ENCAPSED_STRING","\"=\"",346],",",["T_WHITESPACE"," ",346],["T_VARIABLE","$values",346],"[",["T_VARIABLE","$i",346],"]",")",";",["T_WHITESPACE","\n                ",346],["T_VARIABLE","$out",347],"[",["T_STRING","trim",347],"(",["T_VARIABLE","$key",347],")","]","[",["T_STRING","trim",347],"(",["T_VARIABLE","$subkey",347],")","]",["T_WHITESPACE"," ",347],"=",["T_WHITESPACE"," ",347],["T_STRING","trim",347],"(",["T_VARIABLE","$val",347],")",";",["T_WHITESPACE","\n            ",347],"}",["T_WHITESPACE","\n        ",348],"}",["T_WHITESPACE","\n        ",349],["T_RETURN","return",350],["T_WHITESPACE"," ",350],["T_VARIABLE","$out",350],";",["T_WHITESPACE","\n    ",350],"}",["T_WHITESPACE","\n\n    ",351],["T_DOC_COMMENT","\/**\n     * Get response status code\n     * @see lib\/Mage\/HTTP\/Mage_HTTP_Client#getStatus()\n     *\/",353],["T_WHITESPACE","\n    ",356],["T_PUBLIC","public",357],["T_WHITESPACE"," ",357],["T_FUNCTION","function",357],["T_WHITESPACE"," ",357],["T_STRING","getStatus",357],"(",")",["T_WHITESPACE","\n    ",357],"{",["T_WHITESPACE","\n        ",358],["T_RETURN","return",359],["T_WHITESPACE"," ",359],["T_VARIABLE","$this",359],["T_OBJECT_OPERATOR","->",359],["T_STRING","_responseStatus",359],";",["T_WHITESPACE","\n    ",359],"}",["T_WHITESPACE","\n\n    ",360],["T_DOC_COMMENT","\/**\n     * Make request\n     *\n     * @param string $method\n     * @param string $uri\n     * @param array $params\n     * @param boolean $isAuthorizationRequired\n     * @param boolean $https\n     *\/",362],["T_WHITESPACE","\n    ",370],["T_PROTECTED","protected",371],["T_WHITESPACE"," ",371],["T_FUNCTION","function",371],["T_WHITESPACE"," ",371],["T_STRING","makeRequest",371],"(",["T_VARIABLE","$method",371],",",["T_WHITESPACE"," ",371],["T_VARIABLE","$uri",371],",",["T_WHITESPACE"," ",371],["T_VARIABLE","$params",371],["T_WHITESPACE"," ",371],"=",["T_WHITESPACE"," ",371],["T_ARRAY","array",371],"(",")",",",["T_WHITESPACE"," ",371],["T_VARIABLE","$isAuthorizationRequired",371],["T_WHITESPACE"," ",371],"=",["T_WHITESPACE"," ",371],["T_STRING","false",371],",",["T_WHITESPACE"," ",371],["T_VARIABLE","$https",371],["T_WHITESPACE"," ",371],"=",["T_WHITESPACE"," ",371],["T_STRING","true",371],")",["T_WHITESPACE","\n    ",371],"{",["T_WHITESPACE","\n        ",372],["T_VARIABLE","$uriModified",373],["T_WHITESPACE"," ",373],"=",["T_WHITESPACE"," ",373],["T_VARIABLE","$this",373],["T_OBJECT_OPERATOR","->",373],["T_STRING","getModifiedUri",373],"(",["T_VARIABLE","$uri",373],",",["T_WHITESPACE"," ",373],["T_VARIABLE","$https",373],")",";",["T_WHITESPACE","\n        ",373],["T_VARIABLE","$this",374],["T_OBJECT_OPERATOR","->",374],["T_STRING","_ch",374],["T_WHITESPACE"," ",374],"=",["T_WHITESPACE"," ",374],["T_STRING","curl_init",374],"(",")",";",["T_WHITESPACE","\n        ",374],["T_VARIABLE","$this",375],["T_OBJECT_OPERATOR","->",375],["T_STRING","curlOption",375],"(",["T_STRING","CURLOPT_URL",375],",",["T_WHITESPACE"," ",375],["T_VARIABLE","$uriModified",375],")",";",["T_WHITESPACE","\n        ",375],["T_VARIABLE","$this",376],["T_OBJECT_OPERATOR","->",376],["T_STRING","curlOption",376],"(",["T_STRING","CURLOPT_SSL_VERIFYPEER",376],",",["T_WHITESPACE"," ",376],["T_STRING","true",376],")",";",["T_WHITESPACE","\n        ",376],["T_DOC_COMMENT","\/**\n         * Use value from CURL_SSLVERSION_TLSv1 (available since PHP 5.5)\n         *\n         * @link http:\/\/php.net\/manual\/ru\/function.curl-setopt.php\n         *\/",377],["T_WHITESPACE","\n\n        ",381],["T_VARIABLE","$this",383],["T_OBJECT_OPERATOR","->",383],["T_STRING","curlOption",383],"(",["T_STRING","CURLOPT_SSLVERSION",383],",",["T_WHITESPACE"," ",383],["T_LNUMBER","1",383],")",";",["T_WHITESPACE","\n        ",383],["T_VARIABLE","$this",384],["T_OBJECT_OPERATOR","->",384],["T_STRING","getCurlMethodSettings",384],"(",["T_VARIABLE","$method",384],",",["T_WHITESPACE"," ",384],["T_VARIABLE","$params",384],",",["T_WHITESPACE"," ",384],["T_VARIABLE","$isAuthorizationRequired",384],")",";",["T_WHITESPACE","\n\n        ",384],["T_IF","if",386],"(",["T_STRING","count",386],"(",["T_VARIABLE","$this",386],["T_OBJECT_OPERATOR","->",386],["T_STRING","_headers",386],")",")",["T_WHITESPACE"," ",386],"{",["T_WHITESPACE","\n            ",386],["T_VARIABLE","$heads",387],["T_WHITESPACE"," ",387],"=",["T_WHITESPACE"," ",387],["T_ARRAY","array",387],"(",")",";",["T_WHITESPACE","\n            ",387],["T_FOREACH","foreach",388],"(",["T_VARIABLE","$this",388],["T_OBJECT_OPERATOR","->",388],["T_STRING","_headers",388],["T_WHITESPACE"," ",388],["T_AS","as",388],["T_WHITESPACE"," ",388],["T_VARIABLE","$k",388],["T_DOUBLE_ARROW","=>",388],["T_VARIABLE","$v",388],")",["T_WHITESPACE"," ",388],"{",["T_WHITESPACE","\n                ",388],["T_VARIABLE","$heads",389],"[","]",["T_WHITESPACE"," ",389],"=",["T_WHITESPACE"," ",389],["T_VARIABLE","$k",389],".",["T_CONSTANT_ENCAPSED_STRING","': '",389],".",["T_VARIABLE","$v",389],";",["T_WHITESPACE","\n            ",389],"}",["T_WHITESPACE","\n            ",390],["T_VARIABLE","$this",391],["T_OBJECT_OPERATOR","->",391],["T_STRING","curlOption",391],"(",["T_STRING","CURLOPT_HTTPHEADER",391],",",["T_WHITESPACE"," ",391],["T_VARIABLE","$heads",391],")",";",["T_WHITESPACE","\n        ",391],"}",["T_WHITESPACE","\n\n        ",392],["T_IF","if",394],"(",["T_STRING","count",394],"(",["T_VARIABLE","$this",394],["T_OBJECT_OPERATOR","->",394],["T_STRING","_cookies",394],")",")",["T_WHITESPACE"," ",394],"{",["T_WHITESPACE","\n            ",394],["T_VARIABLE","$cookies",395],["T_WHITESPACE"," ",395],"=",["T_WHITESPACE"," ",395],["T_ARRAY","array",395],"(",")",";",["T_WHITESPACE","\n            ",395],["T_FOREACH","foreach",396],"(",["T_VARIABLE","$this",396],["T_OBJECT_OPERATOR","->",396],["T_STRING","_cookies",396],["T_WHITESPACE"," ",396],["T_AS","as",396],["T_WHITESPACE"," ",396],["T_VARIABLE","$k",396],["T_DOUBLE_ARROW","=>",396],["T_VARIABLE","$v",396],")",["T_WHITESPACE"," ",396],"{",["T_WHITESPACE","\n                ",396],["T_VARIABLE","$cookies",397],"[","]",["T_WHITESPACE"," ",397],"=",["T_WHITESPACE"," ",397],"\"",["T_VARIABLE","$k",397],["T_ENCAPSED_AND_WHITESPACE","=",397],["T_VARIABLE","$v",397],"\"",";",["T_WHITESPACE","\n            ",397],"}",["T_WHITESPACE","\n            ",398],["T_VARIABLE","$this",399],["T_OBJECT_OPERATOR","->",399],["T_STRING","curlOption",399],"(",["T_STRING","CURLOPT_COOKIE",399],",",["T_WHITESPACE"," ",399],["T_STRING","implode",399],"(",["T_CONSTANT_ENCAPSED_STRING","\";\"",399],",",["T_WHITESPACE"," ",399],["T_VARIABLE","$cookies",399],")",")",";",["T_WHITESPACE","\n        ",399],"}",["T_WHITESPACE","\n\n        ",400],["T_IF","if",402],"(",["T_VARIABLE","$this",402],["T_OBJECT_OPERATOR","->",402],["T_STRING","_timeout",402],")",["T_WHITESPACE"," ",402],"{",["T_WHITESPACE","\n            ",402],["T_VARIABLE","$this",403],["T_OBJECT_OPERATOR","->",403],["T_STRING","curlOption",403],"(",["T_STRING","CURLOPT_TIMEOUT",403],",",["T_WHITESPACE"," ",403],["T_VARIABLE","$this",403],["T_OBJECT_OPERATOR","->",403],["T_STRING","_timeout",403],")",";",["T_WHITESPACE","\n        ",403],"}",["T_WHITESPACE","\n\n        ",404],["T_IF","if",406],"(",["T_VARIABLE","$this",406],["T_OBJECT_OPERATOR","->",406],["T_STRING","_port",406],["T_WHITESPACE"," ",406],["T_IS_NOT_EQUAL","!=",406],["T_WHITESPACE"," ",406],["T_LNUMBER","80",406],")",["T_WHITESPACE"," ",406],"{",["T_WHITESPACE","\n            ",406],["T_VARIABLE","$this",407],["T_OBJECT_OPERATOR","->",407],["T_STRING","curlOption",407],"(",["T_STRING","CURLOPT_PORT",407],",",["T_WHITESPACE"," ",407],["T_VARIABLE","$this",407],["T_OBJECT_OPERATOR","->",407],["T_STRING","_port",407],")",";",["T_WHITESPACE","\n        ",407],"}",["T_WHITESPACE","\n\n        ",408],["T_VARIABLE","$this",410],["T_OBJECT_OPERATOR","->",410],["T_STRING","curlOption",410],"(",["T_STRING","CURLOPT_RETURNTRANSFER",410],",",["T_WHITESPACE"," ",410],["T_LNUMBER","1",410],")",";",["T_WHITESPACE","\n        ",410],["T_VARIABLE","$this",411],["T_OBJECT_OPERATOR","->",411],["T_STRING","curlOption",411],"(",["T_STRING","CURLOPT_FOLLOWLOCATION",411],",",["T_WHITESPACE"," ",411],["T_LNUMBER","1",411],")",";",["T_WHITESPACE","\n        ",411],["T_VARIABLE","$this",412],["T_OBJECT_OPERATOR","->",412],["T_STRING","curlOption",412],"(",["T_STRING","CURLOPT_HEADERFUNCTION",412],",",["T_WHITESPACE"," ",412],["T_ARRAY","array",412],"(",["T_VARIABLE","$this",412],",",["T_CONSTANT_ENCAPSED_STRING","'parseHeaders'",412],")",")",";",["T_WHITESPACE","\n\n        ",412],["T_IF","if",414],"(",["T_STRING","count",414],"(",["T_VARIABLE","$this",414],["T_OBJECT_OPERATOR","->",414],["T_STRING","_curlUserOptions",414],")",")",["T_WHITESPACE"," ",414],"{",["T_WHITESPACE","\n            ",414],["T_FOREACH","foreach",415],"(",["T_VARIABLE","$this",415],["T_OBJECT_OPERATOR","->",415],["T_STRING","_curlUserOptions",415],["T_WHITESPACE"," ",415],["T_AS","as",415],["T_WHITESPACE"," ",415],["T_VARIABLE","$k",415],["T_DOUBLE_ARROW","=>",415],["T_VARIABLE","$v",415],")",["T_WHITESPACE"," ",415],"{",["T_WHITESPACE","\n                ",415],["T_VARIABLE","$this",416],["T_OBJECT_OPERATOR","->",416],["T_STRING","curlOption",416],"(",["T_VARIABLE","$k",416],",",["T_WHITESPACE"," ",416],["T_VARIABLE","$v",416],")",";",["T_WHITESPACE","\n            ",416],"}",["T_WHITESPACE","\n        ",417],"}",["T_WHITESPACE","\n\n        ",418],["T_VARIABLE","$this",420],["T_OBJECT_OPERATOR","->",420],["T_STRING","_responseHeaders",420],["T_WHITESPACE"," ",420],"=",["T_WHITESPACE"," ",420],["T_ARRAY","array",420],"(",")",";",["T_WHITESPACE","\n        ",420],["T_VARIABLE","$this",421],["T_OBJECT_OPERATOR","->",421],["T_STRING","_responseBody",421],["T_WHITESPACE"," ",421],"=",["T_WHITESPACE"," ",421],["T_STRING","curl_exec",421],"(",["T_VARIABLE","$this",421],["T_OBJECT_OPERATOR","->",421],["T_STRING","_ch",421],")",";",["T_WHITESPACE","\n        ",421],["T_VARIABLE","$err",422],["T_WHITESPACE"," ",422],"=",["T_WHITESPACE"," ",422],["T_STRING","curl_errno",422],"(",["T_VARIABLE","$this",422],["T_OBJECT_OPERATOR","->",422],["T_STRING","_ch",422],")",";",["T_WHITESPACE","\n        ",422],["T_IF","if",423],"(",["T_VARIABLE","$err",423],")",["T_WHITESPACE"," ",423],"{",["T_WHITESPACE","\n            ",423],["T_VARIABLE","$this",424],["T_OBJECT_OPERATOR","->",424],["T_STRING","doError",424],"(",["T_STRING","curl_error",424],"(",["T_VARIABLE","$this",424],["T_OBJECT_OPERATOR","->",424],["T_STRING","_ch",424],")",")",";",["T_WHITESPACE","\n        ",424],"}",["T_WHITESPACE","\n        ",425],["T_IF","if",426],"(","!",["T_VARIABLE","$this",426],["T_OBJECT_OPERATOR","->",426],["T_STRING","getStatus",426],"(",")",")",["T_WHITESPACE"," ",426],"{",["T_WHITESPACE","\n            ",426],["T_VARIABLE","$this",427],["T_OBJECT_OPERATOR","->",427],["T_STRING","doError",427],"(",["T_CONSTANT_ENCAPSED_STRING","\"Invalid response headers returned from server.\"",427],")",";",["T_WHITESPACE","\n            ",427],["T_RETURN","return",428],";",["T_WHITESPACE","\n        ",428],"}",["T_WHITESPACE","\n\n        ",429],["T_STRING","curl_close",431],"(",["T_VARIABLE","$this",431],["T_OBJECT_OPERATOR","->",431],["T_STRING","_ch",431],")",";",["T_WHITESPACE","\n\n        ",431],["T_IF","if",433],["T_WHITESPACE"," ",433],"(",["T_LNUMBER","403",433],["T_WHITESPACE"," ",433],["T_IS_EQUAL","==",433],["T_WHITESPACE"," ",433],["T_VARIABLE","$this",433],["T_OBJECT_OPERATOR","->",433],["T_STRING","getStatus",433],"(",")",")",["T_WHITESPACE"," ",433],"{",["T_WHITESPACE","\n            ",433],["T_IF","if",434],["T_WHITESPACE"," ",434],"(","!",["T_VARIABLE","$isAuthorizationRequired",434],["T_WHITESPACE"," ",434],["T_BOOLEAN_AND","&&",434],["T_WHITESPACE"," ",434],["T_VARIABLE","$https",434],")",["T_WHITESPACE"," ",434],"{",["T_WHITESPACE","\n                ",434],["T_VARIABLE","$this",435],["T_OBJECT_OPERATOR","->",435],["T_STRING","makeRequest",435],"(",["T_CONSTANT_ENCAPSED_STRING","'POST'",435],",",["T_WHITESPACE"," ",435],["T_VARIABLE","$uri",435],",",["T_WHITESPACE"," ",435],["T_VARIABLE","$params",435],",",["T_WHITESPACE"," ",435],["T_STRING","true",435],",",["T_WHITESPACE"," ",435],["T_STRING","false",435],")",";",["T_WHITESPACE","\n            ",435],"}",["T_WHITESPACE"," ",436],["T_ELSE","else",436],["T_WHITESPACE"," ",436],["T_IF","if",436],["T_WHITESPACE"," ",436],"(",["T_VARIABLE","$isAuthorizationRequired",436],["T_WHITESPACE"," ",436],["T_BOOLEAN_AND","&&",436],["T_WHITESPACE"," ",436],"!",["T_VARIABLE","$https",436],")",["T_WHITESPACE"," ",436],"{",["T_WHITESPACE","\n                ",436],["T_VARIABLE","$this",437],["T_OBJECT_OPERATOR","->",437],["T_STRING","makeRequest",437],"(",["T_CONSTANT_ENCAPSED_STRING","'POST'",437],",",["T_WHITESPACE"," ",437],["T_VARIABLE","$uri",437],",",["T_WHITESPACE"," ",437],["T_VARIABLE","$params",437],",",["T_WHITESPACE"," ",437],["T_STRING","true",437],",",["T_WHITESPACE"," ",437],["T_STRING","true",437],")",";",["T_WHITESPACE","\n            ",437],"}",["T_WHITESPACE"," ",438],["T_ELSE","else",438],["T_WHITESPACE"," ",438],"{",["T_WHITESPACE","\n                ",438],["T_VARIABLE","$this",439],["T_OBJECT_OPERATOR","->",439],["T_STRING","doError",439],"(",["T_STRING","sprintf",439],"(",["T_CONSTANT_ENCAPSED_STRING","'Access denied for %s@%s'",439],",",["T_WHITESPACE"," ",439],["T_VARIABLE","$_SESSION",439],"[",["T_CONSTANT_ENCAPSED_STRING","'auth'",439],"]","[",["T_CONSTANT_ENCAPSED_STRING","'login'",439],"]",",",["T_WHITESPACE"," ",439],["T_VARIABLE","$uriModified",439],")",")",";",["T_WHITESPACE","\n                ",439],["T_RETURN","return",440],";",["T_WHITESPACE","\n            ",440],"}",["T_WHITESPACE","\n        ",441],"}",["T_WHITESPACE"," ",442],["T_ELSEIF","elseif",442],["T_WHITESPACE"," ",442],"(",["T_LNUMBER","405",442],["T_WHITESPACE"," ",442],["T_IS_EQUAL","==",442],["T_WHITESPACE"," ",442],["T_VARIABLE","$this",442],["T_OBJECT_OPERATOR","->",442],["T_STRING","getStatus",442],"(",")",")",["T_WHITESPACE"," ",442],"{",["T_WHITESPACE","\n            ",442],["T_VARIABLE","$this",443],["T_OBJECT_OPERATOR","->",443],["T_STRING","doError",443],"(",["T_CONSTANT_ENCAPSED_STRING","\"HTTP Error 405 Method not allowed\"",443],")",";",["T_WHITESPACE","\n            ",443],["T_RETURN","return",444],";",["T_WHITESPACE","\n        ",444],"}",["T_WHITESPACE","\n    ",445],"}",["T_WHITESPACE","\n\n    ",446],["T_DOC_COMMENT","\/**\n     * @throws Exception\n     *\/",448],["T_WHITESPACE","\n    ",450],["T_PUBLIC","public",451],["T_WHITESPACE"," ",451],["T_FUNCTION","function",451],["T_WHITESPACE"," ",451],["T_STRING","isAuthorizationRequired",451],"(",")",["T_WHITESPACE","\n    ",451],"{",["T_WHITESPACE","\n        ",452],["T_IF","if",453],["T_WHITESPACE"," ",453],"(",["T_ISSET","isset",453],"(",["T_VARIABLE","$_SESSION",453],"[",["T_CONSTANT_ENCAPSED_STRING","'auth'",453],"]","[",["T_CONSTANT_ENCAPSED_STRING","'username'",453],"]",")",["T_WHITESPACE"," ",453],["T_BOOLEAN_AND","&&",453],["T_WHITESPACE"," ",453],["T_ISSET","isset",453],"(",["T_VARIABLE","$_SESSION",453],"[",["T_CONSTANT_ENCAPSED_STRING","'auth'",453],"]","[",["T_CONSTANT_ENCAPSED_STRING","'password'",453],"]",")",["T_WHITESPACE","\n            ",453],["T_BOOLEAN_AND","&&",454],["T_WHITESPACE"," ",454],"!",["T_EMPTY","empty",454],"(",["T_VARIABLE","$_SESSION",454],"[",["T_CONSTANT_ENCAPSED_STRING","'auth'",454],"]","[",["T_CONSTANT_ENCAPSED_STRING","'username'",454],"]",")",")",["T_WHITESPACE","\n        ",454],"{",["T_WHITESPACE","\n            ",455],["T_RETURN","return",456],["T_WHITESPACE"," ",456],["T_STRING","true",456],";",["T_WHITESPACE","\n        ",456],"}",["T_WHITESPACE","\n        ",457],["T_RETURN","return",458],["T_WHITESPACE"," ",458],["T_STRING","false",458],";",["T_WHITESPACE","\n    ",458],"}",["T_WHITESPACE","\n\n    ",459],["T_DOC_COMMENT","\/**\n     * Throw error excpetion\n     * @param $string\n     * @throws Exception\n     *\/",461],["T_WHITESPACE","\n    ",465],["T_PUBLIC","public",466],["T_WHITESPACE"," ",466],["T_FUNCTION","function",466],["T_WHITESPACE"," ",466],["T_STRING","doError",466],"(",["T_VARIABLE","$string",466],")",["T_WHITESPACE","\n    ",466],"{",["T_WHITESPACE","\n        ",467],["T_THROW","throw",468],["T_WHITESPACE"," ",468],["T_NEW","new",468],["T_WHITESPACE"," ",468],["T_STRING","Exception",468],"(",["T_VARIABLE","$string",468],")",";",["T_WHITESPACE","\n    ",468],"}",["T_WHITESPACE","\n\n\n    ",469],["T_DOC_COMMENT","\/**\n     * Parse headers - CURL callback functin\n     *\n     * @param resource $ch curl handle, not needed\n     * @param string $data\n     * @return int\n     *\/",472],["T_WHITESPACE","\n    ",478],["T_PROTECTED","protected",479],["T_WHITESPACE"," ",479],["T_FUNCTION","function",479],["T_WHITESPACE"," ",479],["T_STRING","parseHeaders",479],"(",["T_VARIABLE","$ch",479],",",["T_WHITESPACE"," ",479],["T_VARIABLE","$data",479],")",["T_WHITESPACE","\n    ",479],"{",["T_WHITESPACE","\n        ",480],["T_IF","if",481],"(",["T_STRING","preg_match",481],"(",["T_CONSTANT_ENCAPSED_STRING","'\/^HTTP\\\/[\\d\\.x]+ (\\d+)\/'",481],",",["T_WHITESPACE"," ",481],["T_VARIABLE","$data",481],",",["T_WHITESPACE"," ",481],["T_VARIABLE","$m",481],")",")",["T_WHITESPACE"," ",481],"{",["T_WHITESPACE","\n            ",481],["T_IF","if",482],["T_WHITESPACE"," ",482],"(",["T_ISSET","isset",482],"(",["T_VARIABLE","$m",482],"[",["T_LNUMBER","1",482],"]",")",")",["T_WHITESPACE"," ",482],"{",["T_WHITESPACE","\n                ",482],["T_VARIABLE","$this",483],["T_OBJECT_OPERATOR","->",483],["T_STRING","_responseStatus",483],["T_WHITESPACE"," ",483],"=",["T_WHITESPACE"," ",483],["T_INT_CAST","(int)",483],["T_VARIABLE","$m",483],"[",["T_LNUMBER","1",483],"]",";",["T_WHITESPACE","\n            ",483],"}",["T_WHITESPACE","\n        ",484],"}",["T_WHITESPACE"," ",485],["T_ELSE","else",485],["T_WHITESPACE"," ",485],"{",["T_WHITESPACE","\n            ",485],["T_VARIABLE","$name",486],["T_WHITESPACE"," ",486],"=",["T_WHITESPACE"," ",486],["T_VARIABLE","$value",486],["T_WHITESPACE"," ",486],"=",["T_WHITESPACE"," ",486],["T_CONSTANT_ENCAPSED_STRING","''",486],";",["T_WHITESPACE","\n            ",486],["T_VARIABLE","$out",487],["T_WHITESPACE"," ",487],"=",["T_WHITESPACE"," ",487],["T_STRING","explode",487],"(",["T_CONSTANT_ENCAPSED_STRING","\": \"",487],",",["T_WHITESPACE"," ",487],["T_STRING","trim",487],"(",["T_VARIABLE","$data",487],")",",",["T_WHITESPACE"," ",487],["T_LNUMBER","2",487],")",";",["T_WHITESPACE","\n            ",487],["T_IF","if",488],"(",["T_STRING","count",488],"(",["T_VARIABLE","$out",488],")",["T_WHITESPACE"," ",488],["T_IS_EQUAL","==",488],["T_WHITESPACE"," ",488],["T_LNUMBER","2",488],")",["T_WHITESPACE"," ",488],"{",["T_WHITESPACE","\n                ",488],["T_VARIABLE","$name",489],["T_WHITESPACE"," ",489],"=",["T_WHITESPACE"," ",489],["T_VARIABLE","$out",489],"[",["T_LNUMBER","0",489],"]",";",["T_WHITESPACE","\n                ",489],["T_VARIABLE","$value",490],["T_WHITESPACE"," ",490],"=",["T_WHITESPACE"," ",490],["T_VARIABLE","$out",490],"[",["T_LNUMBER","1",490],"]",";",["T_WHITESPACE","\n            ",490],"}",["T_WHITESPACE","\n\n            ",491],["T_IF","if",493],"(",["T_STRING","strlen",493],"(",["T_VARIABLE","$name",493],")",")",["T_WHITESPACE"," ",493],"{",["T_WHITESPACE","\n                ",493],["T_IF","if",494],"(",["T_CONSTANT_ENCAPSED_STRING","\"Set-Cookie\"",494],["T_WHITESPACE"," ",494],["T_IS_EQUAL","==",494],["T_WHITESPACE"," ",494],["T_VARIABLE","$name",494],")",["T_WHITESPACE"," ",494],"{",["T_WHITESPACE","\n                    ",494],["T_IF","if",495],"(","!",["T_ISSET","isset",495],"(",["T_VARIABLE","$this",495],["T_OBJECT_OPERATOR","->",495],["T_STRING","_responseHeaders",495],"[",["T_VARIABLE","$name",495],"]",")",")",["T_WHITESPACE"," ",495],"{",["T_WHITESPACE","\n                        ",495],["T_VARIABLE","$this",496],["T_OBJECT_OPERATOR","->",496],["T_STRING","_responseHeaders",496],"[",["T_VARIABLE","$name",496],"]",["T_WHITESPACE"," ",496],"=",["T_WHITESPACE"," ",496],["T_ARRAY","array",496],"(",")",";",["T_WHITESPACE","\n                    ",496],"}",["T_WHITESPACE","\n                    ",497],["T_VARIABLE","$this",498],["T_OBJECT_OPERATOR","->",498],["T_STRING","_responseHeaders",498],"[",["T_VARIABLE","$name",498],"]","[","]",["T_WHITESPACE"," ",498],"=",["T_WHITESPACE"," ",498],["T_VARIABLE","$value",498],";",["T_WHITESPACE","\n                ",498],"}",["T_WHITESPACE"," ",499],["T_ELSE","else",499],["T_WHITESPACE"," ",499],"{",["T_WHITESPACE","\n                    ",499],["T_VARIABLE","$this",500],["T_OBJECT_OPERATOR","->",500],["T_STRING","_responseHeaders",500],"[",["T_VARIABLE","$name",500],"]",["T_WHITESPACE"," ",500],"=",["T_WHITESPACE"," ",500],["T_VARIABLE","$value",500],";",["T_WHITESPACE","\n                ",500],"}",["T_WHITESPACE","\n            ",501],"}",["T_WHITESPACE","\n        ",502],"}",["T_WHITESPACE","\n\n        ",503],["T_RETURN","return",505],["T_WHITESPACE"," ",505],["T_STRING","strlen",505],"(",["T_VARIABLE","$data",505],")",";",["T_WHITESPACE","\n    ",505],"}",["T_WHITESPACE","\n\n    ",506],["T_DOC_COMMENT","\/**\n     * Set curl option directly\n     *\n     * @param string $name\n     * @param string $value\n     *\/",508],["T_WHITESPACE","\n    ",513],["T_PROTECTED","protected",514],["T_WHITESPACE"," ",514],["T_FUNCTION","function",514],["T_WHITESPACE"," ",514],["T_STRING","curlOption",514],"(",["T_VARIABLE","$name",514],",",["T_WHITESPACE"," ",514],["T_VARIABLE","$value",514],")",["T_WHITESPACE","\n    ",514],"{",["T_WHITESPACE","\n        ",515],["T_STRING","curl_setopt",516],"(",["T_VARIABLE","$this",516],["T_OBJECT_OPERATOR","->",516],["T_STRING","_ch",516],",",["T_WHITESPACE"," ",516],["T_VARIABLE","$name",516],",",["T_WHITESPACE"," ",516],["T_VARIABLE","$value",516],")",";",["T_WHITESPACE","\n    ",516],"}",["T_WHITESPACE","\n\n    ",517],["T_DOC_COMMENT","\/**\n     * Set curl options array directly\n     * @param array $array\n     *\/",519],["T_WHITESPACE","\n    ",522],["T_PROTECTED","protected",523],["T_WHITESPACE"," ",523],["T_FUNCTION","function",523],["T_WHITESPACE"," ",523],["T_STRING","curlOptions",523],"(",["T_VARIABLE","$array",523],")",["T_WHITESPACE","\n    ",523],"{",["T_WHITESPACE","\n        ",524],["T_STRING","curl_setopt_array",525],"(",["T_VARIABLE","$this",525],["T_OBJECT_OPERATOR","->",525],["T_STRING","_ch",525],",",["T_WHITESPACE"," ",525],["T_VARIABLE","$arr",525],")",";",["T_WHITESPACE","\n    ",525],"}",["T_WHITESPACE","\n\n    ",526],["T_DOC_COMMENT","\/**\n     * Set CURL options ovverides array\n     *\/",528],["T_WHITESPACE","\n    ",530],["T_PUBLIC","public",531],["T_WHITESPACE"," ",531],["T_FUNCTION","function",531],["T_WHITESPACE"," ",531],["T_STRING","setOptions",531],"(",["T_VARIABLE","$arr",531],")",["T_WHITESPACE","\n    ",531],"{",["T_WHITESPACE","\n        ",532],["T_VARIABLE","$this",533],["T_OBJECT_OPERATOR","->",533],["T_STRING","_curlUserOptions",533],["T_WHITESPACE"," ",533],"=",["T_WHITESPACE"," ",533],["T_VARIABLE","$arr",533],";",["T_WHITESPACE","\n    ",533],"}",["T_WHITESPACE","\n\n    ",534],["T_DOC_COMMENT","\/**\n     * Set curl option\n     *\/",536],["T_WHITESPACE","\n    ",538],["T_PUBLIC","public",539],["T_WHITESPACE"," ",539],["T_FUNCTION","function",539],["T_WHITESPACE"," ",539],["T_STRING","setOption",539],"(",["T_VARIABLE","$name",539],",",["T_WHITESPACE"," ",539],["T_VARIABLE","$value",539],")",["T_WHITESPACE","\n    ",539],"{",["T_WHITESPACE","\n        ",540],["T_VARIABLE","$this",541],["T_OBJECT_OPERATOR","->",541],["T_STRING","_curlUserOptions",541],"[",["T_VARIABLE","$name",541],"]",["T_WHITESPACE"," ",541],"=",["T_WHITESPACE"," ",541],["T_VARIABLE","$value",541],";",["T_WHITESPACE","\n    ",541],"}",["T_WHITESPACE","\n\n    ",542],["T_DOC_COMMENT","\/**\n     * Build secure url\n     *\n     * @param string $uri\n     * @param boolean $https\n     * @return string\n     *\/",544],["T_WHITESPACE","\n    ",550],["T_PROTECTED","protected",551],["T_WHITESPACE"," ",551],["T_FUNCTION","function",551],["T_WHITESPACE"," ",551],["T_STRING","getModifiedUri",551],"(",["T_VARIABLE","$uri",551],",",["T_WHITESPACE"," ",551],["T_VARIABLE","$https",551],["T_WHITESPACE"," ",551],"=",["T_WHITESPACE"," ",551],["T_STRING","true",551],")",["T_WHITESPACE","\n    ",551],"{",["T_WHITESPACE","\n        ",552],["T_IF","if",553],["T_WHITESPACE"," ",553],"(",["T_VARIABLE","$https",553],["T_WHITESPACE"," ",553],["T_BOOLEAN_AND","&&",553],["T_WHITESPACE"," ",553],["T_STRING","strpos",553],"(",["T_VARIABLE","$uri",553],",",["T_WHITESPACE"," ",553],["T_CONSTANT_ENCAPSED_STRING","'https:\/\/'",553],")",["T_WHITESPACE"," ",553],["T_IS_NOT_IDENTICAL","!==",553],["T_WHITESPACE"," ",553],["T_LNUMBER","0",553],")",["T_WHITESPACE"," ",553],"{",["T_WHITESPACE","\n            ",553],["T_VARIABLE","$uri",554],["T_WHITESPACE"," ",554],"=",["T_WHITESPACE"," ",554],["T_STRING","str_replace",554],"(",["T_CONSTANT_ENCAPSED_STRING","'http:\/\/'",554],",",["T_WHITESPACE"," ",554],["T_CONSTANT_ENCAPSED_STRING","''",554],",",["T_WHITESPACE"," ",554],["T_VARIABLE","$uri",554],")",";",["T_WHITESPACE","\n            ",554],["T_VARIABLE","$uri",555],["T_WHITESPACE"," ",555],"=",["T_WHITESPACE"," ",555],["T_CONSTANT_ENCAPSED_STRING","'https:\/\/'",555],["T_WHITESPACE"," ",555],".",["T_WHITESPACE"," ",555],["T_VARIABLE","$uri",555],";",["T_WHITESPACE","\n        ",555],"}",["T_WHITESPACE","\n        ",556],["T_RETURN","return",557],["T_WHITESPACE"," ",557],["T_VARIABLE","$uri",557],";",["T_WHITESPACE","\n    ",557],"}",["T_WHITESPACE","\n\n    ",558],["T_DOC_COMMENT","\/**\n     * @param $method\n     * @param $params\n     * @param $isAuthorizationRequired\n     *\/",560],["T_WHITESPACE","\n    ",564],["T_PROTECTED","protected",565],["T_WHITESPACE"," ",565],["T_FUNCTION","function",565],["T_WHITESPACE"," ",565],["T_STRING","getCurlMethodSettings",565],"(",["T_VARIABLE","$method",565],",",["T_WHITESPACE"," ",565],["T_VARIABLE","$params",565],",",["T_WHITESPACE"," ",565],["T_VARIABLE","$isAuthorizationRequired",565],")",["T_WHITESPACE","\n    ",565],"{",["T_WHITESPACE","\n        ",566],["T_IF","if",567],["T_WHITESPACE"," ",567],"(",["T_VARIABLE","$method",567],["T_WHITESPACE"," ",567],["T_IS_EQUAL","==",567],["T_WHITESPACE"," ",567],["T_CONSTANT_ENCAPSED_STRING","'POST'",567],["T_WHITESPACE"," ",567],["T_BOOLEAN_OR","||",567],["T_WHITESPACE"," ",567],["T_VARIABLE","$isAuthorizationRequired",567],")",["T_WHITESPACE"," ",567],"{",["T_WHITESPACE","\n            ",567],["T_VARIABLE","$this",568],["T_OBJECT_OPERATOR","->",568],["T_STRING","curlOption",568],"(",["T_STRING","CURLOPT_POST",568],",",["T_WHITESPACE"," ",568],["T_LNUMBER","1",568],")",";",["T_WHITESPACE","\n            ",568],["T_VARIABLE","$postFields",569],["T_WHITESPACE"," ",569],"=",["T_WHITESPACE"," ",569],["T_STRING","is_array",569],"(",["T_VARIABLE","$params",569],")",["T_WHITESPACE"," ",569],"?",["T_WHITESPACE"," ",569],["T_VARIABLE","$params",569],["T_WHITESPACE"," ",569],":",["T_WHITESPACE"," ",569],["T_ARRAY","array",569],"(",")",";",["T_WHITESPACE","\n            ",569],["T_IF","if",570],["T_WHITESPACE"," ",570],"(",["T_VARIABLE","$isAuthorizationRequired",570],")",["T_WHITESPACE"," ",570],"{",["T_WHITESPACE","\n                ",570],["T_VARIABLE","$this",571],["T_OBJECT_OPERATOR","->",571],["T_STRING","curlOption",571],"(",["T_STRING","CURLOPT_COOKIEJAR",571],",",["T_WHITESPACE"," ",571],["T_STRING","self",571],["T_DOUBLE_COLON","::",571],["T_STRING","COOKIE_FILE",571],")",";",["T_WHITESPACE","\n                ",571],["T_VARIABLE","$this",572],["T_OBJECT_OPERATOR","->",572],["T_STRING","curlOption",572],"(",["T_STRING","CURLOPT_COOKIEFILE",572],",",["T_WHITESPACE"," ",572],["T_STRING","self",572],["T_DOUBLE_COLON","::",572],["T_STRING","COOKIE_FILE",572],")",";",["T_WHITESPACE","\n                ",572],["T_VARIABLE","$postFields",573],["T_WHITESPACE"," ",573],"=",["T_WHITESPACE"," ",573],["T_STRING","array_merge",573],"(",["T_VARIABLE","$postFields",573],",",["T_WHITESPACE"," ",573],["T_VARIABLE","$this",573],["T_OBJECT_OPERATOR","->",573],["T_STRING","_auth",573],")",";",["T_WHITESPACE","\n            ",573],"}",["T_WHITESPACE","\n            ",574],["T_VARIABLE","$this",575],["T_OBJECT_OPERATOR","->",575],["T_STRING","curlOption",575],"(",["T_STRING","CURLOPT_POSTFIELDS",575],",",["T_WHITESPACE"," ",575],["T_VARIABLE","$postFields",575],")",";",["T_WHITESPACE","\n        ",575],"}",["T_WHITESPACE"," ",576],["T_ELSEIF","elseif",576],["T_WHITESPACE"," ",576],"(",["T_VARIABLE","$method",576],["T_WHITESPACE"," ",576],["T_IS_EQUAL","==",576],["T_WHITESPACE"," ",576],["T_CONSTANT_ENCAPSED_STRING","\"GET\"",576],")",["T_WHITESPACE"," ",576],"{",["T_WHITESPACE","\n            ",576],["T_VARIABLE","$this",577],["T_OBJECT_OPERATOR","->",577],["T_STRING","curlOption",577],"(",["T_STRING","CURLOPT_HTTPGET",577],",",["T_WHITESPACE"," ",577],["T_LNUMBER","1",577],")",";",["T_WHITESPACE","\n        ",577],"}",["T_WHITESPACE"," ",578],["T_ELSE","else",578],["T_WHITESPACE"," ",578],"{",["T_WHITESPACE","\n            ",578],["T_VARIABLE","$this",579],["T_OBJECT_OPERATOR","->",579],["T_STRING","curlOption",579],"(",["T_STRING","CURLOPT_CUSTOMREQUEST",579],",",["T_WHITESPACE"," ",579],["T_VARIABLE","$method",579],")",";",["T_WHITESPACE","\n        ",579],"}",["T_WHITESPACE","\n    ",580],"}",["T_WHITESPACE","\n",581],"}",["T_WHITESPACE","\n",582]]
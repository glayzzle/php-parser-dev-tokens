[["T_OPEN_TAG","<?php\n",1],["T_DOC_COMMENT","\/**\n * Magento\n *\n * NOTICE OF LICENSE\n *\n * This source file is subject to the Open Software License (OSL 3.0)\n * that is bundled with this package in the file LICENSE.txt.\n * It is also available through the world-wide-web at this URL:\n * http:\/\/opensource.org\/licenses\/osl-3.0.php\n * If you did not receive a copy of the license and are unable to\n * obtain it through the world-wide-web, please send an email\n * to license@magento.com so we can send you a copy immediately.\n *\n * DISCLAIMER\n *\n * Do not edit or add to this file if you wish to upgrade Magento to newer\n * versions in the future. If you wish to customize Magento for your\n * needs please refer to http:\/\/www.magento.com for more information.\n *\n * @category    Mage\n * @package     Mage_Archive\n * @copyright  Copyright (c) 2006-2016 X.commerce, Inc. and affiliates (http:\/\/www.magento.com)\n * @license    http:\/\/opensource.org\/licenses\/osl-3.0.php  Open Software License (OSL 3.0)\n *\/",2],["T_WHITESPACE","\n\n",25],["T_DOC_COMMENT","\/**\n * Class to work with tar archives\n *\n * @category    Mage\n * @package     Mage_Archive\n * @author      Magento Core Team <core@magentocommerce.com>\n *\/",27],["T_WHITESPACE","\n",33],["T_CLASS","class",34],["T_WHITESPACE"," ",34],["T_STRING","Mage_Archive_Tar",34],["T_WHITESPACE"," ",34],["T_EXTENDS","extends",34],["T_WHITESPACE"," ",34],["T_STRING","Mage_Archive_Abstract",34],["T_WHITESPACE"," ",34],["T_IMPLEMENTS","implements",34],["T_WHITESPACE"," ",34],["T_STRING","Mage_Archive_Interface",34],["T_WHITESPACE","\n",34],"{",["T_WHITESPACE","\n    ",35],["T_DOC_COMMENT","\/**\n     * Tar block size\n     *\n     * @const int\n     *\/",36],["T_WHITESPACE","\n    ",40],["T_CONST","const",41],["T_WHITESPACE"," ",41],["T_STRING","TAR_BLOCK_SIZE",41],["T_WHITESPACE"," ",41],"=",["T_WHITESPACE"," ",41],["T_LNUMBER","512",41],";",["T_WHITESPACE","\n\n    ",41],["T_DOC_COMMENT","\/**\n     * Keep file or directory for packing.\n     *\n     * @var string\n     *\/",43],["T_WHITESPACE","\n    ",47],["T_PROTECTED","protected",48],["T_WHITESPACE"," ",48],["T_VARIABLE","$_currentFile",48],";",["T_WHITESPACE","\n\n    ",48],["T_DOC_COMMENT","\/**\n     * Keep path to file or directory for packing.\n     *\n     * @var mixed\n     *\/",50],["T_WHITESPACE","\n    ",54],["T_PROTECTED","protected",55],["T_WHITESPACE"," ",55],["T_VARIABLE","$_currentPath",55],";",["T_WHITESPACE","\n\n    ",55],["T_DOC_COMMENT","\/**\n     * Skip first level parent directory. Example:\n     *   use test\/fip.php instead test\/test\/fip.php;\n     *\n     * @var mixed\n     *\/",57],["T_WHITESPACE","\n    ",62],["T_PROTECTED","protected",63],["T_WHITESPACE"," ",63],["T_VARIABLE","$_skipRoot",63],";",["T_WHITESPACE","\n\n    ",63],["T_DOC_COMMENT","\/**\n    * Tarball data writer\n    *\n    * @var Mage_Archive_Helper_File\n    *\/",65],["T_WHITESPACE","\n    ",69],["T_PROTECTED","protected",70],["T_WHITESPACE"," ",70],["T_VARIABLE","$_writer",70],";",["T_WHITESPACE","\n\n    ",70],["T_DOC_COMMENT","\/**\n    * Tarball data reader\n    *\n    * @var Mage_Archive_Helper_File\n    *\/",72],["T_WHITESPACE","\n    ",76],["T_PROTECTED","protected",77],["T_WHITESPACE"," ",77],["T_VARIABLE","$_reader",77],";",["T_WHITESPACE","\n\n    ",77],["T_DOC_COMMENT","\/**\n    * Path to file where tarball should be placed\n    *\n    * @var string\n    *\/",79],["T_WHITESPACE","\n    ",83],["T_PROTECTED","protected",84],["T_WHITESPACE"," ",84],["T_VARIABLE","$_destinationFilePath",84],";",["T_WHITESPACE","\n\n    ",84],["T_DOC_COMMENT","\/**\n     * Initialize tarball writer\n     *\n     * @return Mage_Archive_Tar\n     *\/",86],["T_WHITESPACE","\n    ",90],["T_PROTECTED","protected",91],["T_WHITESPACE"," ",91],["T_FUNCTION","function",91],["T_WHITESPACE"," ",91],["T_STRING","_initWriter",91],"(",")",["T_WHITESPACE","\n    ",91],"{",["T_WHITESPACE","\n        ",92],["T_VARIABLE","$this",93],["T_OBJECT_OPERATOR","->",93],["T_STRING","_writer",93],["T_WHITESPACE"," ",93],"=",["T_WHITESPACE"," ",93],["T_NEW","new",93],["T_WHITESPACE"," ",93],["T_STRING","Mage_Archive_Helper_File",93],"(",["T_VARIABLE","$this",93],["T_OBJECT_OPERATOR","->",93],["T_STRING","_destinationFilePath",93],")",";",["T_WHITESPACE","\n        ",93],["T_VARIABLE","$this",94],["T_OBJECT_OPERATOR","->",94],["T_STRING","_writer",94],["T_OBJECT_OPERATOR","->",94],["T_STRING","open",94],"(",["T_CONSTANT_ENCAPSED_STRING","'w'",94],")",";",["T_WHITESPACE","\n\n        ",94],["T_RETURN","return",96],["T_WHITESPACE"," ",96],["T_VARIABLE","$this",96],";",["T_WHITESPACE","\n    ",96],"}",["T_WHITESPACE","\n\n    ",97],["T_DOC_COMMENT","\/**\n     * Returns string that is used for tar's header parsing\n     *\n     * Format codes were changed in 5.5.0 version. See http:\/\/php.net\/manual\/en\/function.unpack.php\n     *\n     * @return string\n     *\/",99],["T_WHITESPACE","\n    ",105],["T_PROTECTED","protected",106],["T_WHITESPACE"," ",106],["T_STATIC","static",106],["T_WHITESPACE"," ",106],["T_FINAL","final",106],["T_WHITESPACE"," ",106],["T_FUNCTION","function",106],["T_WHITESPACE"," ",106],["T_STRING","_getFormatParseHeader",106],"(",")",["T_WHITESPACE","\n    ",106],"{",["T_WHITESPACE","\n        ",107],["T_IF","if",108],["T_WHITESPACE"," ",108],"(",["T_STRING","version_compare",108],"(",["T_STRING","phpversion",108],"(",")",",",["T_WHITESPACE"," ",108],["T_CONSTANT_ENCAPSED_STRING","'5.5.0'",108],",",["T_WHITESPACE"," ",108],["T_CONSTANT_ENCAPSED_STRING","'<'",108],")",["T_WHITESPACE"," ",108],["T_IS_IDENTICAL","===",108],["T_WHITESPACE"," ",108],["T_STRING","true",108],")",["T_WHITESPACE"," ",108],"{",["T_WHITESPACE","\n            ",108],["T_RETURN","return",109],["T_WHITESPACE"," ",109],["T_CONSTANT_ENCAPSED_STRING","'a100name\/a8mode\/a8uid\/a8gid\/a12size\/a12mtime\/a8checksum\/a1type\/a100symlink\/a6magic\/a2version\/'",109],["T_WHITESPACE","\n            ",109],".",["T_WHITESPACE"," ",110],["T_CONSTANT_ENCAPSED_STRING","'a32uname\/a32gname\/a8devmajor\/a8devminor\/a155prefix\/a12closer'",110],";",["T_WHITESPACE","\n        ",110],"}",["T_WHITESPACE","\n        ",111],["T_RETURN","return",112],["T_WHITESPACE"," ",112],["T_CONSTANT_ENCAPSED_STRING","'Z100name\/Z8mode\/Z8uid\/Z8gid\/Z12size\/Z12mtime\/Z8checksum\/Z1type\/Z100symlink\/Z6magic\/Z2version\/'",112],["T_WHITESPACE","\n            ",112],".",["T_WHITESPACE"," ",113],["T_CONSTANT_ENCAPSED_STRING","'Z32uname\/Z32gname\/Z8devmajor\/Z8devminor\/Z155prefix\/Z12closer'",113],";",["T_WHITESPACE","\n    ",113],"}",["T_WHITESPACE","\n\n    ",114],["T_DOC_COMMENT","\/**\n     * Destroy tarball writer\n     *\n     * @return Mage_Archive_Tar\n     *\/",116],["T_WHITESPACE","\n    ",120],["T_PROTECTED","protected",121],["T_WHITESPACE"," ",121],["T_FUNCTION","function",121],["T_WHITESPACE"," ",121],["T_STRING","_destroyWriter",121],"(",")",["T_WHITESPACE","\n    ",121],"{",["T_WHITESPACE","\n        ",122],["T_IF","if",123],["T_WHITESPACE"," ",123],"(",["T_VARIABLE","$this",123],["T_OBJECT_OPERATOR","->",123],["T_STRING","_writer",123],["T_WHITESPACE"," ",123],["T_INSTANCEOF","instanceof",123],["T_WHITESPACE"," ",123],["T_STRING","Mage_Archive_Helper_File",123],")",["T_WHITESPACE"," ",123],"{",["T_WHITESPACE","\n            ",123],["T_VARIABLE","$this",124],["T_OBJECT_OPERATOR","->",124],["T_STRING","_writer",124],["T_OBJECT_OPERATOR","->",124],["T_STRING","close",124],"(",")",";",["T_WHITESPACE","\n            ",124],["T_VARIABLE","$this",125],["T_OBJECT_OPERATOR","->",125],["T_STRING","_writer",125],["T_WHITESPACE"," ",125],"=",["T_WHITESPACE"," ",125],["T_STRING","null",125],";",["T_WHITESPACE","\n        ",125],"}",["T_WHITESPACE","\n\n        ",126],["T_RETURN","return",128],["T_WHITESPACE"," ",128],["T_VARIABLE","$this",128],";",["T_WHITESPACE","\n    ",128],"}",["T_WHITESPACE","\n\n    ",129],["T_DOC_COMMENT","\/**\n     * Get tarball writer\n     *\n     * @return Mage_Archive_Helper_File\n     *\/",131],["T_WHITESPACE","\n    ",135],["T_PROTECTED","protected",136],["T_WHITESPACE"," ",136],["T_FUNCTION","function",136],["T_WHITESPACE"," ",136],["T_STRING","_getWriter",136],"(",")",["T_WHITESPACE","\n    ",136],"{",["T_WHITESPACE","\n        ",137],["T_IF","if",138],["T_WHITESPACE"," ",138],"(","!",["T_VARIABLE","$this",138],["T_OBJECT_OPERATOR","->",138],["T_STRING","_writer",138],")",["T_WHITESPACE"," ",138],"{",["T_WHITESPACE","\n            ",138],["T_VARIABLE","$this",139],["T_OBJECT_OPERATOR","->",139],["T_STRING","_initWriter",139],"(",")",";",["T_WHITESPACE","\n        ",139],"}",["T_WHITESPACE","\n\n        ",140],["T_RETURN","return",142],["T_WHITESPACE"," ",142],["T_VARIABLE","$this",142],["T_OBJECT_OPERATOR","->",142],["T_STRING","_writer",142],";",["T_WHITESPACE","\n    ",142],"}",["T_WHITESPACE","\n\n    ",143],["T_DOC_COMMENT","\/**\n     * Initialize tarball reader\n     *\n     * @return Mage_Archive_Tar\n     *\/",145],["T_WHITESPACE","\n    ",149],["T_PROTECTED","protected",150],["T_WHITESPACE"," ",150],["T_FUNCTION","function",150],["T_WHITESPACE"," ",150],["T_STRING","_initReader",150],"(",")",["T_WHITESPACE","\n    ",150],"{",["T_WHITESPACE","\n        ",151],["T_VARIABLE","$this",152],["T_OBJECT_OPERATOR","->",152],["T_STRING","_reader",152],["T_WHITESPACE"," ",152],"=",["T_WHITESPACE"," ",152],["T_NEW","new",152],["T_WHITESPACE"," ",152],["T_STRING","Mage_Archive_Helper_File",152],"(",["T_VARIABLE","$this",152],["T_OBJECT_OPERATOR","->",152],["T_STRING","_getCurrentFile",152],"(",")",")",";",["T_WHITESPACE","\n        ",152],["T_VARIABLE","$this",153],["T_OBJECT_OPERATOR","->",153],["T_STRING","_reader",153],["T_OBJECT_OPERATOR","->",153],["T_STRING","open",153],"(",["T_CONSTANT_ENCAPSED_STRING","'r'",153],")",";",["T_WHITESPACE","\n\n        ",153],["T_RETURN","return",155],["T_WHITESPACE"," ",155],["T_VARIABLE","$this",155],";",["T_WHITESPACE","\n    ",155],"}",["T_WHITESPACE","\n\n    ",156],["T_DOC_COMMENT","\/**\n     * Destroy tarball reader\n     *\n     * @return Mage_Archive_Tar\n     *\/",158],["T_WHITESPACE","\n    ",162],["T_PROTECTED","protected",163],["T_WHITESPACE"," ",163],["T_FUNCTION","function",163],["T_WHITESPACE"," ",163],["T_STRING","_destroyReader",163],"(",")",["T_WHITESPACE","\n    ",163],"{",["T_WHITESPACE","\n        ",164],["T_IF","if",165],["T_WHITESPACE"," ",165],"(",["T_VARIABLE","$this",165],["T_OBJECT_OPERATOR","->",165],["T_STRING","_reader",165],["T_WHITESPACE"," ",165],["T_INSTANCEOF","instanceof",165],["T_WHITESPACE"," ",165],["T_STRING","Mage_Archive_Helper_File",165],")",["T_WHITESPACE"," ",165],"{",["T_WHITESPACE","\n            ",165],["T_VARIABLE","$this",166],["T_OBJECT_OPERATOR","->",166],["T_STRING","_reader",166],["T_OBJECT_OPERATOR","->",166],["T_STRING","close",166],"(",")",";",["T_WHITESPACE","\n            ",166],["T_VARIABLE","$this",167],["T_OBJECT_OPERATOR","->",167],["T_STRING","_reader",167],["T_WHITESPACE"," ",167],"=",["T_WHITESPACE"," ",167],["T_STRING","null",167],";",["T_WHITESPACE","\n        ",167],"}",["T_WHITESPACE","\n\n        ",168],["T_RETURN","return",170],["T_WHITESPACE"," ",170],["T_VARIABLE","$this",170],";",["T_WHITESPACE","\n    ",170],"}",["T_WHITESPACE","\n\n    ",171],["T_DOC_COMMENT","\/**\n     * Get tarball reader\n     *\n     * @return Mage_Archive_Helper_File\n     *\/",173],["T_WHITESPACE","\n    ",177],["T_PROTECTED","protected",178],["T_WHITESPACE"," ",178],["T_FUNCTION","function",178],["T_WHITESPACE"," ",178],["T_STRING","_getReader",178],"(",")",["T_WHITESPACE","\n    ",178],"{",["T_WHITESPACE","\n        ",179],["T_IF","if",180],["T_WHITESPACE"," ",180],"(","!",["T_VARIABLE","$this",180],["T_OBJECT_OPERATOR","->",180],["T_STRING","_reader",180],")",["T_WHITESPACE"," ",180],"{",["T_WHITESPACE","\n            ",180],["T_VARIABLE","$this",181],["T_OBJECT_OPERATOR","->",181],["T_STRING","_initReader",181],"(",")",";",["T_WHITESPACE","\n        ",181],"}",["T_WHITESPACE","\n\n        ",182],["T_RETURN","return",184],["T_WHITESPACE"," ",184],["T_VARIABLE","$this",184],["T_OBJECT_OPERATOR","->",184],["T_STRING","_reader",184],";",["T_WHITESPACE","\n    ",184],"}",["T_WHITESPACE","\n\n    ",185],["T_DOC_COMMENT","\/**\n     * Set option that define ability skip first catalog level.\n     *\n     * @param mixed $skipRoot\n     * @return Mage_Archive_Tar\n     *\/",187],["T_WHITESPACE","\n    ",192],["T_PROTECTED","protected",193],["T_WHITESPACE"," ",193],["T_FUNCTION","function",193],["T_WHITESPACE"," ",193],["T_STRING","_setSkipRoot",193],"(",["T_VARIABLE","$skipRoot",193],")",["T_WHITESPACE","\n    ",193],"{",["T_WHITESPACE","\n        ",194],["T_VARIABLE","$this",195],["T_OBJECT_OPERATOR","->",195],["T_STRING","_skipRoot",195],["T_WHITESPACE"," ",195],"=",["T_WHITESPACE"," ",195],["T_VARIABLE","$skipRoot",195],";",["T_WHITESPACE","\n        ",195],["T_RETURN","return",196],["T_WHITESPACE"," ",196],["T_VARIABLE","$this",196],";",["T_WHITESPACE","\n    ",196],"}",["T_WHITESPACE","\n\n    ",197],["T_DOC_COMMENT","\/**\n     * Set file which is packing.\n     *\n     * @param string $file\n     * @return Mage_Archive_Tar\n     *\/",199],["T_WHITESPACE","\n    ",204],["T_PROTECTED","protected",205],["T_WHITESPACE"," ",205],["T_FUNCTION","function",205],["T_WHITESPACE"," ",205],["T_STRING","_setCurrentFile",205],"(",["T_VARIABLE","$file",205],")",["T_WHITESPACE","\n    ",205],"{",["T_WHITESPACE","\n        ",206],["T_VARIABLE","$this",207],["T_OBJECT_OPERATOR","->",207],["T_STRING","_currentFile",207],["T_WHITESPACE"," ",207],"=",["T_WHITESPACE"," ",207],["T_VARIABLE","$file",207],["T_WHITESPACE"," ",207],".","(","(","!",["T_STRING","is_link",207],"(",["T_VARIABLE","$file",207],")",["T_WHITESPACE"," ",207],["T_BOOLEAN_AND","&&",207],["T_WHITESPACE"," ",207],["T_STRING","is_dir",207],"(",["T_VARIABLE","$file",207],")",["T_WHITESPACE"," ",207],["T_BOOLEAN_AND","&&",207],["T_WHITESPACE"," ",207],["T_STRING","substr",207],"(",["T_VARIABLE","$file",207],",",["T_WHITESPACE"," ",207],"-",["T_LNUMBER","1",207],")",["T_WHITESPACE"," ",207],["T_IS_NOT_EQUAL","!=",207],["T_WHITESPACE"," ",207],["T_STRING","DS",207],")",["T_WHITESPACE"," ",207],"?",["T_WHITESPACE"," ",207],["T_STRING","DS",207],["T_WHITESPACE"," ",207],":",["T_WHITESPACE"," ",207],["T_CONSTANT_ENCAPSED_STRING","''",207],")",";",["T_WHITESPACE","\n        ",207],["T_RETURN","return",208],["T_WHITESPACE"," ",208],["T_VARIABLE","$this",208],";",["T_WHITESPACE","\n    ",208],"}",["T_WHITESPACE","\n\n    ",209],["T_DOC_COMMENT","\/**\n    * Set path to file where tarball should be placed\n    *\n    * @param string $destinationFilePath\n    * @return Mage_Archive_Tar\n    *\/",211],["T_WHITESPACE","\n    ",216],["T_PROTECTED","protected",217],["T_WHITESPACE"," ",217],["T_FUNCTION","function",217],["T_WHITESPACE"," ",217],["T_STRING","_setDestinationFilePath",217],"(",["T_VARIABLE","$destinationFilePath",217],")",["T_WHITESPACE","\n    ",217],"{",["T_WHITESPACE","\n        ",218],["T_VARIABLE","$this",219],["T_OBJECT_OPERATOR","->",219],["T_STRING","_destinationFilePath",219],["T_WHITESPACE"," ",219],"=",["T_WHITESPACE"," ",219],["T_VARIABLE","$destinationFilePath",219],";",["T_WHITESPACE","\n        ",219],["T_RETURN","return",220],["T_WHITESPACE"," ",220],["T_VARIABLE","$this",220],";",["T_WHITESPACE","\n    ",220],"}",["T_WHITESPACE","\n\n    ",221],["T_DOC_COMMENT","\/**\n     * Retrieve file which is packing.\n     *\n     * @return string\n     *\/",223],["T_WHITESPACE","\n    ",227],["T_PROTECTED","protected",228],["T_WHITESPACE"," ",228],["T_FUNCTION","function",228],["T_WHITESPACE"," ",228],["T_STRING","_getCurrentFile",228],"(",")",["T_WHITESPACE","\n    ",228],"{",["T_WHITESPACE","\n        ",229],["T_RETURN","return",230],["T_WHITESPACE"," ",230],["T_VARIABLE","$this",230],["T_OBJECT_OPERATOR","->",230],["T_STRING","_currentFile",230],";",["T_WHITESPACE","\n    ",230],"}",["T_WHITESPACE","\n\n    ",231],["T_DOC_COMMENT","\/**\n     * Set path to file which is packing.\n     *\n     * @param string $path\n     * @return Mage_Archive_Tar\n     *\/",233],["T_WHITESPACE","\n    ",238],["T_PROTECTED","protected",239],["T_WHITESPACE"," ",239],["T_FUNCTION","function",239],["T_WHITESPACE"," ",239],["T_STRING","_setCurrentPath",239],"(",["T_VARIABLE","$path",239],")",["T_WHITESPACE","\n    ",239],"{",["T_WHITESPACE","\n        ",240],["T_IF","if",241],["T_WHITESPACE"," ",241],"(",["T_VARIABLE","$this",241],["T_OBJECT_OPERATOR","->",241],["T_STRING","_skipRoot",241],["T_WHITESPACE"," ",241],["T_BOOLEAN_AND","&&",241],["T_WHITESPACE"," ",241],["T_STRING","is_dir",241],"(",["T_VARIABLE","$path",241],")",")",["T_WHITESPACE"," ",241],"{",["T_WHITESPACE","\n            ",241],["T_VARIABLE","$this",242],["T_OBJECT_OPERATOR","->",242],["T_STRING","_currentPath",242],["T_WHITESPACE"," ",242],"=",["T_WHITESPACE"," ",242],["T_VARIABLE","$path",242],".","(",["T_STRING","substr",242],"(",["T_VARIABLE","$path",242],",",["T_WHITESPACE"," ",242],"-",["T_LNUMBER","1",242],")",["T_IS_NOT_EQUAL","!=",242],["T_STRING","DS",242],"?",["T_STRING","DS",242],":",["T_CONSTANT_ENCAPSED_STRING","''",242],")",";",["T_WHITESPACE","\n        ",242],"}",["T_WHITESPACE"," ",243],["T_ELSE","else",243],["T_WHITESPACE"," ",243],"{",["T_WHITESPACE","\n            ",243],["T_VARIABLE","$this",244],["T_OBJECT_OPERATOR","->",244],["T_STRING","_currentPath",244],["T_WHITESPACE"," ",244],"=",["T_WHITESPACE"," ",244],["T_STRING","dirname",244],"(",["T_VARIABLE","$path",244],")",["T_WHITESPACE"," ",244],".",["T_WHITESPACE"," ",244],["T_STRING","DS",244],";",["T_WHITESPACE","\n        ",244],"}",["T_WHITESPACE","\n        ",245],["T_RETURN","return",246],["T_WHITESPACE"," ",246],["T_VARIABLE","$this",246],";",["T_WHITESPACE","\n    ",246],"}",["T_WHITESPACE","\n\n    ",247],["T_DOC_COMMENT","\/**\n     * Retrieve path to file which is packing.\n     *\n     * @return string\n     *\/",249],["T_WHITESPACE","\n    ",253],["T_PROTECTED","protected",254],["T_WHITESPACE"," ",254],["T_FUNCTION","function",254],["T_WHITESPACE"," ",254],["T_STRING","_getCurrentPath",254],"(",")",["T_WHITESPACE","\n    ",254],"{",["T_WHITESPACE","\n        ",255],["T_RETURN","return",256],["T_WHITESPACE"," ",256],["T_VARIABLE","$this",256],["T_OBJECT_OPERATOR","->",256],["T_STRING","_currentPath",256],";",["T_WHITESPACE","\n    ",256],"}",["T_WHITESPACE","\n\n    ",257],["T_DOC_COMMENT","\/**\n     * Walk through directory and add to tar file or directory.\n     * Result is packed string on TAR format.\n     *\n     * @deprecated after 1.7.0.0\n     * @param boolean $skipRoot\n     * @return string\n     *\/",259],["T_WHITESPACE","\n    ",266],["T_PROTECTED","protected",267],["T_WHITESPACE"," ",267],["T_FUNCTION","function",267],["T_WHITESPACE"," ",267],["T_STRING","_packToTar",267],"(",["T_VARIABLE","$skipRoot",267],"=",["T_STRING","false",267],")",["T_WHITESPACE","\n    ",267],"{",["T_WHITESPACE","\n        ",268],["T_VARIABLE","$file",269],["T_WHITESPACE"," ",269],"=",["T_WHITESPACE"," ",269],["T_VARIABLE","$this",269],["T_OBJECT_OPERATOR","->",269],["T_STRING","_getCurrentFile",269],"(",")",";",["T_WHITESPACE","\n        ",269],["T_VARIABLE","$header",270],["T_WHITESPACE"," ",270],"=",["T_WHITESPACE"," ",270],["T_CONSTANT_ENCAPSED_STRING","''",270],";",["T_WHITESPACE","\n        ",270],["T_VARIABLE","$data",271],["T_WHITESPACE"," ",271],"=",["T_WHITESPACE"," ",271],["T_CONSTANT_ENCAPSED_STRING","''",271],";",["T_WHITESPACE","\n        ",271],["T_IF","if",272],["T_WHITESPACE"," ",272],"(","!",["T_VARIABLE","$skipRoot",272],")",["T_WHITESPACE"," ",272],"{",["T_WHITESPACE","\n            ",272],["T_VARIABLE","$header",273],["T_WHITESPACE"," ",273],"=",["T_WHITESPACE"," ",273],["T_VARIABLE","$this",273],["T_OBJECT_OPERATOR","->",273],["T_STRING","_composeHeader",273],"(",")",";",["T_WHITESPACE","\n            ",273],["T_VARIABLE","$data",274],["T_WHITESPACE"," ",274],"=",["T_WHITESPACE"," ",274],["T_VARIABLE","$this",274],["T_OBJECT_OPERATOR","->",274],["T_STRING","_readFile",274],"(",["T_VARIABLE","$file",274],")",";",["T_WHITESPACE","\n            ",274],["T_VARIABLE","$data",275],["T_WHITESPACE"," ",275],"=",["T_WHITESPACE"," ",275],["T_STRING","str_pad",275],"(",["T_VARIABLE","$data",275],",",["T_WHITESPACE"," ",275],["T_STRING","floor",275],"(","(","(",["T_STRING","is_dir",275],"(",["T_VARIABLE","$file",275],")",["T_WHITESPACE"," ",275],"?",["T_WHITESPACE"," ",275],["T_LNUMBER","0",275],["T_WHITESPACE"," ",275],":",["T_WHITESPACE"," ",275],["T_STRING","filesize",275],"(",["T_VARIABLE","$file",275],")",")",["T_WHITESPACE"," ",275],"+",["T_WHITESPACE"," ",275],["T_LNUMBER","512",275],["T_WHITESPACE"," ",275],"-",["T_WHITESPACE"," ",275],["T_LNUMBER","1",275],")",["T_WHITESPACE"," ",275],"\/",["T_WHITESPACE"," ",275],["T_LNUMBER","512",275],")",["T_WHITESPACE"," ",275],"*",["T_WHITESPACE"," ",275],["T_LNUMBER","512",275],",",["T_WHITESPACE"," ",275],["T_CONSTANT_ENCAPSED_STRING","\"\\0\"",275],")",";",["T_WHITESPACE","\n        ",275],"}",["T_WHITESPACE","\n        ",276],["T_VARIABLE","$sub",277],["T_WHITESPACE"," ",277],"=",["T_WHITESPACE"," ",277],["T_CONSTANT_ENCAPSED_STRING","''",277],";",["T_WHITESPACE","\n        ",277],["T_IF","if",278],["T_WHITESPACE"," ",278],"(",["T_STRING","is_dir",278],"(",["T_VARIABLE","$file",278],")",")",["T_WHITESPACE"," ",278],"{",["T_WHITESPACE","\n            ",278],["T_VARIABLE","$treeDir",279],["T_WHITESPACE"," ",279],"=",["T_WHITESPACE"," ",279],["T_STRING","scandir",279],"(",["T_VARIABLE","$file",279],")",";",["T_WHITESPACE","\n            ",279],["T_IF","if",280],["T_WHITESPACE"," ",280],"(",["T_EMPTY","empty",280],"(",["T_VARIABLE","$treeDir",280],")",")",["T_WHITESPACE"," ",280],"{",["T_WHITESPACE","\n                ",280],["T_THROW","throw",281],["T_WHITESPACE"," ",281],["T_NEW","new",281],["T_WHITESPACE"," ",281],["T_STRING","Mage_Exception",281],"(",["T_CONSTANT_ENCAPSED_STRING","'Can\\'t scan dir: '",281],["T_WHITESPACE"," ",281],".",["T_WHITESPACE"," ",281],["T_VARIABLE","$file",281],")",";",["T_WHITESPACE","\n            ",281],"}",["T_WHITESPACE","\n            ",282],["T_STRING","array_shift",283],"(",["T_VARIABLE","$treeDir",283],")",";",["T_WHITESPACE"," ",283],["T_COMMENT","\/* remove  '.\/'*\/",283],["T_WHITESPACE","\n            ",283],["T_STRING","array_shift",284],"(",["T_VARIABLE","$treeDir",284],")",";",["T_WHITESPACE"," ",284],["T_COMMENT","\/* remove  '..\/'*\/",284],["T_WHITESPACE","\n            ",284],["T_FOREACH","foreach",285],["T_WHITESPACE"," ",285],"(",["T_VARIABLE","$treeDir",285],["T_WHITESPACE"," ",285],["T_AS","as",285],["T_WHITESPACE"," ",285],["T_VARIABLE","$item",285],")",["T_WHITESPACE"," ",285],"{",["T_WHITESPACE","\n                ",285],["T_VARIABLE","$sub",286],["T_WHITESPACE"," ",286],["T_CONCAT_EQUAL",".=",286],["T_WHITESPACE"," ",286],["T_VARIABLE","$this",286],["T_OBJECT_OPERATOR","->",286],["T_STRING","_setCurrentFile",286],"(",["T_VARIABLE","$file",286],".",["T_VARIABLE","$item",286],")",["T_OBJECT_OPERATOR","->",286],["T_STRING","_packToTar",286],"(",["T_STRING","false",286],")",";",["T_WHITESPACE","\n            ",286],"}",["T_WHITESPACE","\n        ",287],"}",["T_WHITESPACE","\n        ",288],["T_VARIABLE","$tarData",289],["T_WHITESPACE"," ",289],"=",["T_WHITESPACE"," ",289],["T_VARIABLE","$header",289],["T_WHITESPACE"," ",289],".",["T_WHITESPACE"," ",289],["T_VARIABLE","$data",289],["T_WHITESPACE"," ",289],".",["T_WHITESPACE"," ",289],["T_VARIABLE","$sub",289],";",["T_WHITESPACE","\n        ",289],["T_VARIABLE","$tarData",290],["T_WHITESPACE"," ",290],"=",["T_WHITESPACE"," ",290],["T_STRING","str_pad",290],"(",["T_VARIABLE","$tarData",290],",",["T_WHITESPACE"," ",290],["T_STRING","floor",290],"(","(",["T_STRING","strlen",290],"(",["T_VARIABLE","$tarData",290],")",["T_WHITESPACE"," ",290],"-",["T_WHITESPACE"," ",290],["T_LNUMBER","1",290],")",["T_WHITESPACE"," ",290],"\/",["T_WHITESPACE"," ",290],["T_LNUMBER","1536",290],")",["T_WHITESPACE"," ",290],"*",["T_WHITESPACE"," ",290],["T_LNUMBER","1536",290],",",["T_WHITESPACE"," ",290],["T_CONSTANT_ENCAPSED_STRING","\"\\0\"",290],")",";",["T_WHITESPACE","\n        ",290],["T_RETURN","return",291],["T_WHITESPACE"," ",291],["T_VARIABLE","$tarData",291],";",["T_WHITESPACE","\n    ",291],"}",["T_WHITESPACE","\n\n    ",292],["T_DOC_COMMENT","\/**\n     * Recursively walk through file tree and create tarball\n     *\n     * @param boolean $skipRoot\n     * @param boolean $finalize\n     * @throws Mage_Exception\n     *\/",294],["T_WHITESPACE","\n    ",300],["T_PROTECTED","protected",301],["T_WHITESPACE"," ",301],["T_FUNCTION","function",301],["T_WHITESPACE"," ",301],["T_STRING","_createTar",301],"(",["T_VARIABLE","$skipRoot",301],["T_WHITESPACE"," ",301],"=",["T_WHITESPACE"," ",301],["T_STRING","false",301],",",["T_WHITESPACE"," ",301],["T_VARIABLE","$finalize",301],["T_WHITESPACE"," ",301],"=",["T_WHITESPACE"," ",301],["T_STRING","false",301],")",["T_WHITESPACE","\n    ",301],"{",["T_WHITESPACE","\n        ",302],["T_IF","if",303],["T_WHITESPACE"," ",303],"(","!",["T_VARIABLE","$skipRoot",303],")",["T_WHITESPACE"," ",303],"{",["T_WHITESPACE","\n            ",303],["T_VARIABLE","$this",304],["T_OBJECT_OPERATOR","->",304],["T_STRING","_packAndWriteCurrentFile",304],"(",")",";",["T_WHITESPACE","\n        ",304],"}",["T_WHITESPACE","\n\n        ",305],["T_VARIABLE","$file",307],["T_WHITESPACE"," ",307],"=",["T_WHITESPACE"," ",307],["T_VARIABLE","$this",307],["T_OBJECT_OPERATOR","->",307],["T_STRING","_getCurrentFile",307],"(",")",";",["T_WHITESPACE","\n\n        ",307],["T_IF","if",309],["T_WHITESPACE"," ",309],"(",["T_STRING","is_dir",309],"(",["T_VARIABLE","$file",309],")",")",["T_WHITESPACE"," ",309],"{",["T_WHITESPACE","\n            ",309],["T_VARIABLE","$dirFiles",310],["T_WHITESPACE"," ",310],"=",["T_WHITESPACE"," ",310],["T_STRING","scandir",310],"(",["T_VARIABLE","$file",310],")",";",["T_WHITESPACE","\n\n            ",310],["T_IF","if",312],["T_WHITESPACE"," ",312],"(",["T_STRING","false",312],["T_WHITESPACE"," ",312],["T_IS_IDENTICAL","===",312],["T_WHITESPACE"," ",312],["T_VARIABLE","$dirFiles",312],")",["T_WHITESPACE"," ",312],"{",["T_WHITESPACE","\n                ",312],["T_THROW","throw",313],["T_WHITESPACE"," ",313],["T_NEW","new",313],["T_WHITESPACE"," ",313],["T_STRING","Mage_Exception",313],"(",["T_CONSTANT_ENCAPSED_STRING","'Can\\'t scan dir: '",313],["T_WHITESPACE"," ",313],".",["T_WHITESPACE"," ",313],["T_VARIABLE","$file",313],")",";",["T_WHITESPACE","\n            ",313],"}",["T_WHITESPACE","\n\n            ",314],["T_STRING","array_shift",316],"(",["T_VARIABLE","$dirFiles",316],")",";",["T_WHITESPACE"," ",316],["T_COMMENT","\/* remove  '.\/'*\/",316],["T_WHITESPACE","\n            ",316],["T_STRING","array_shift",317],"(",["T_VARIABLE","$dirFiles",317],")",";",["T_WHITESPACE"," ",317],["T_COMMENT","\/* remove  '..\/'*\/",317],["T_WHITESPACE","\n\n            ",317],["T_FOREACH","foreach",319],["T_WHITESPACE"," ",319],"(",["T_VARIABLE","$dirFiles",319],["T_WHITESPACE"," ",319],["T_AS","as",319],["T_WHITESPACE"," ",319],["T_VARIABLE","$item",319],")",["T_WHITESPACE"," ",319],"{",["T_WHITESPACE","\n                ",319],["T_VARIABLE","$this",320],["T_OBJECT_OPERATOR","->",320],["T_STRING","_setCurrentFile",320],"(",["T_VARIABLE","$file",320],["T_WHITESPACE"," ",320],".",["T_WHITESPACE"," ",320],["T_VARIABLE","$item",320],")",["T_OBJECT_OPERATOR","->",320],["T_STRING","_createTar",320],"(",")",";",["T_WHITESPACE","\n            ",320],"}",["T_WHITESPACE","\n        ",321],"}",["T_WHITESPACE","\n\n        ",322],["T_IF","if",324],["T_WHITESPACE"," ",324],"(",["T_VARIABLE","$finalize",324],")",["T_WHITESPACE"," ",324],"{",["T_WHITESPACE","\n            ",324],["T_VARIABLE","$this",325],["T_OBJECT_OPERATOR","->",325],["T_STRING","_getWriter",325],"(",")",["T_OBJECT_OPERATOR","->",325],["T_STRING","write",325],"(",["T_STRING","str_repeat",325],"(",["T_CONSTANT_ENCAPSED_STRING","\"\\0\"",325],",",["T_WHITESPACE"," ",325],["T_STRING","self",325],["T_DOUBLE_COLON","::",325],["T_STRING","TAR_BLOCK_SIZE",325],["T_WHITESPACE"," ",325],"*",["T_WHITESPACE"," ",325],["T_LNUMBER","12",325],")",")",";",["T_WHITESPACE","\n        ",325],"}",["T_WHITESPACE","\n    ",326],"}",["T_WHITESPACE","\n\n    ",327],["T_DOC_COMMENT","\/**\n     * Write current file to tarball\n     *\/",329],["T_WHITESPACE","\n    ",331],["T_PROTECTED","protected",332],["T_WHITESPACE"," ",332],["T_FUNCTION","function",332],["T_WHITESPACE"," ",332],["T_STRING","_packAndWriteCurrentFile",332],"(",")",["T_WHITESPACE","\n    ",332],"{",["T_WHITESPACE","\n        ",333],["T_VARIABLE","$archiveWriter",334],["T_WHITESPACE"," ",334],"=",["T_WHITESPACE"," ",334],["T_VARIABLE","$this",334],["T_OBJECT_OPERATOR","->",334],["T_STRING","_getWriter",334],"(",")",";",["T_WHITESPACE","\n        ",334],["T_VARIABLE","$archiveWriter",335],["T_OBJECT_OPERATOR","->",335],["T_STRING","write",335],"(",["T_VARIABLE","$this",335],["T_OBJECT_OPERATOR","->",335],["T_STRING","_composeHeader",335],"(",")",")",";",["T_WHITESPACE","\n\n        ",335],["T_VARIABLE","$currentFile",337],["T_WHITESPACE"," ",337],"=",["T_WHITESPACE"," ",337],["T_VARIABLE","$this",337],["T_OBJECT_OPERATOR","->",337],["T_STRING","_getCurrentFile",337],"(",")",";",["T_WHITESPACE","\n\n        ",337],["T_VARIABLE","$fileSize",339],["T_WHITESPACE"," ",339],"=",["T_WHITESPACE"," ",339],["T_LNUMBER","0",339],";",["T_WHITESPACE","\n\n        ",339],["T_IF","if",341],["T_WHITESPACE"," ",341],"(",["T_STRING","is_file",341],"(",["T_VARIABLE","$currentFile",341],")",["T_WHITESPACE"," ",341],["T_BOOLEAN_AND","&&",341],["T_WHITESPACE"," ",341],"!",["T_STRING","is_link",341],"(",["T_VARIABLE","$currentFile",341],")",")",["T_WHITESPACE"," ",341],"{",["T_WHITESPACE","\n            ",341],["T_VARIABLE","$fileReader",342],["T_WHITESPACE"," ",342],"=",["T_WHITESPACE"," ",342],["T_NEW","new",342],["T_WHITESPACE"," ",342],["T_STRING","Mage_Archive_Helper_File",342],"(",["T_VARIABLE","$currentFile",342],")",";",["T_WHITESPACE","\n            ",342],["T_VARIABLE","$fileReader",343],["T_OBJECT_OPERATOR","->",343],["T_STRING","open",343],"(",["T_CONSTANT_ENCAPSED_STRING","'r'",343],")",";",["T_WHITESPACE","\n\n            ",343],["T_WHILE","while",345],["T_WHITESPACE"," ",345],"(","!",["T_VARIABLE","$fileReader",345],["T_OBJECT_OPERATOR","->",345],["T_STRING","eof",345],"(",")",")",["T_WHITESPACE"," ",345],"{",["T_WHITESPACE","\n                ",345],["T_VARIABLE","$archiveWriter",346],["T_OBJECT_OPERATOR","->",346],["T_STRING","write",346],"(",["T_VARIABLE","$fileReader",346],["T_OBJECT_OPERATOR","->",346],["T_STRING","read",346],"(",")",")",";",["T_WHITESPACE","\n            ",346],"}",["T_WHITESPACE","\n\n            ",347],["T_VARIABLE","$fileReader",349],["T_OBJECT_OPERATOR","->",349],["T_STRING","close",349],"(",")",";",["T_WHITESPACE","\n\n            ",349],["T_VARIABLE","$fileSize",351],["T_WHITESPACE"," ",351],"=",["T_WHITESPACE"," ",351],["T_STRING","filesize",351],"(",["T_VARIABLE","$currentFile",351],")",";",["T_WHITESPACE","\n        ",351],"}",["T_WHITESPACE","\n\n        ",352],["T_VARIABLE","$appendZerosCount",354],["T_WHITESPACE"," ",354],"=",["T_WHITESPACE"," ",354],"(",["T_STRING","self",354],["T_DOUBLE_COLON","::",354],["T_STRING","TAR_BLOCK_SIZE",354],["T_WHITESPACE"," ",354],"-",["T_WHITESPACE"," ",354],["T_VARIABLE","$fileSize",354],["T_WHITESPACE"," ",354],"%",["T_WHITESPACE"," ",354],["T_STRING","self",354],["T_DOUBLE_COLON","::",354],["T_STRING","TAR_BLOCK_SIZE",354],")",["T_WHITESPACE"," ",354],"%",["T_WHITESPACE"," ",354],["T_STRING","self",354],["T_DOUBLE_COLON","::",354],["T_STRING","TAR_BLOCK_SIZE",354],";",["T_WHITESPACE","\n        ",354],["T_VARIABLE","$archiveWriter",355],["T_OBJECT_OPERATOR","->",355],["T_STRING","write",355],"(",["T_STRING","str_repeat",355],"(",["T_CONSTANT_ENCAPSED_STRING","\"\\0\"",355],",",["T_WHITESPACE"," ",355],["T_VARIABLE","$appendZerosCount",355],")",")",";",["T_WHITESPACE","\n    ",355],"}",["T_WHITESPACE","\n\n    ",356],["T_DOC_COMMENT","\/**\n     * Compose header for current file in TAR format.\n     * If length of file's name greater 100 characters,\n     * method breaks header into two pieces. First contains\n     * header and data with long name. Second contain only header.\n     *\n     * @param boolean $long\n     * @return string\n     *\/",358],["T_WHITESPACE","\n    ",366],["T_PROTECTED","protected",367],["T_WHITESPACE"," ",367],["T_FUNCTION","function",367],["T_WHITESPACE"," ",367],["T_STRING","_composeHeader",367],"(",["T_VARIABLE","$long",367],["T_WHITESPACE"," ",367],"=",["T_WHITESPACE"," ",367],["T_STRING","false",367],")",["T_WHITESPACE","\n    ",367],"{",["T_WHITESPACE","\n        ",368],["T_VARIABLE","$file",369],["T_WHITESPACE"," ",369],"=",["T_WHITESPACE"," ",369],["T_VARIABLE","$this",369],["T_OBJECT_OPERATOR","->",369],["T_STRING","_getCurrentFile",369],"(",")",";",["T_WHITESPACE","\n        ",369],["T_VARIABLE","$path",370],["T_WHITESPACE"," ",370],"=",["T_WHITESPACE"," ",370],["T_VARIABLE","$this",370],["T_OBJECT_OPERATOR","->",370],["T_STRING","_getCurrentPath",370],"(",")",";",["T_WHITESPACE","\n        ",370],["T_VARIABLE","$infoFile",371],["T_WHITESPACE"," ",371],"=",["T_WHITESPACE"," ",371],["T_STRING","stat",371],"(",["T_VARIABLE","$file",371],")",";",["T_WHITESPACE","\n        ",371],["T_VARIABLE","$nameFile",372],["T_WHITESPACE"," ",372],"=",["T_WHITESPACE"," ",372],["T_STRING","str_replace",372],"(",["T_VARIABLE","$path",372],",",["T_WHITESPACE"," ",372],["T_CONSTANT_ENCAPSED_STRING","''",372],",",["T_WHITESPACE"," ",372],["T_VARIABLE","$file",372],")",";",["T_WHITESPACE","\n        ",372],["T_VARIABLE","$nameFile",373],["T_WHITESPACE"," ",373],"=",["T_WHITESPACE"," ",373],["T_STRING","str_replace",373],"(",["T_CONSTANT_ENCAPSED_STRING","'\\\\'",373],",",["T_WHITESPACE"," ",373],["T_CONSTANT_ENCAPSED_STRING","'\/'",373],",",["T_WHITESPACE"," ",373],["T_VARIABLE","$nameFile",373],")",";",["T_WHITESPACE","\n        ",373],["T_VARIABLE","$packedHeader",374],["T_WHITESPACE"," ",374],"=",["T_WHITESPACE"," ",374],["T_CONSTANT_ENCAPSED_STRING","''",374],";",["T_WHITESPACE","\n        ",374],["T_VARIABLE","$longHeader",375],["T_WHITESPACE"," ",375],"=",["T_WHITESPACE"," ",375],["T_CONSTANT_ENCAPSED_STRING","''",375],";",["T_WHITESPACE","\n        ",375],["T_IF","if",376],["T_WHITESPACE"," ",376],"(","!",["T_VARIABLE","$long",376],["T_WHITESPACE"," ",376],["T_BOOLEAN_AND","&&",376],["T_WHITESPACE"," ",376],["T_STRING","strlen",376],"(",["T_VARIABLE","$nameFile",376],")",">",["T_LNUMBER","100",376],")",["T_WHITESPACE"," ",376],"{",["T_WHITESPACE","\n            ",376],["T_VARIABLE","$longHeader",377],["T_WHITESPACE"," ",377],"=",["T_WHITESPACE"," ",377],["T_VARIABLE","$this",377],["T_OBJECT_OPERATOR","->",377],["T_STRING","_composeHeader",377],"(",["T_STRING","true",377],")",";",["T_WHITESPACE","\n            ",377],["T_VARIABLE","$longHeader",378],["T_WHITESPACE"," ",378],["T_CONCAT_EQUAL",".=",378],["T_WHITESPACE"," ",378],["T_STRING","str_pad",378],"(",["T_VARIABLE","$nameFile",378],",",["T_WHITESPACE"," ",378],["T_STRING","floor",378],"(","(",["T_STRING","strlen",378],"(",["T_VARIABLE","$nameFile",378],")",["T_WHITESPACE"," ",378],"+",["T_WHITESPACE"," ",378],["T_LNUMBER","512",378],["T_WHITESPACE"," ",378],"-",["T_WHITESPACE"," ",378],["T_LNUMBER","1",378],")",["T_WHITESPACE"," ",378],"\/",["T_WHITESPACE"," ",378],["T_LNUMBER","512",378],")",["T_WHITESPACE"," ",378],"*",["T_WHITESPACE"," ",378],["T_LNUMBER","512",378],",",["T_WHITESPACE"," ",378],["T_CONSTANT_ENCAPSED_STRING","\"\\0\"",378],")",";",["T_WHITESPACE","\n        ",378],"}",["T_WHITESPACE","\n        ",379],["T_VARIABLE","$header",380],["T_WHITESPACE"," ",380],"=",["T_WHITESPACE"," ",380],["T_ARRAY","array",380],"(",")",";",["T_WHITESPACE","\n        ",380],["T_VARIABLE","$header",381],"[",["T_CONSTANT_ENCAPSED_STRING","'100-name'",381],"]",["T_WHITESPACE","       ",381],"=",["T_WHITESPACE"," ",381],["T_VARIABLE","$long",381],"?",["T_CONSTANT_ENCAPSED_STRING","'.\/.\/@LongLink'",381],":",["T_STRING","substr",381],"(",["T_VARIABLE","$nameFile",381],",",["T_WHITESPACE"," ",381],["T_LNUMBER","0",381],",",["T_WHITESPACE"," ",381],["T_LNUMBER","100",381],")",";",["T_WHITESPACE","\n        ",381],["T_VARIABLE","$header",382],"[",["T_CONSTANT_ENCAPSED_STRING","'8-mode'",382],"]",["T_WHITESPACE","         ",382],"=",["T_WHITESPACE"," ",382],["T_VARIABLE","$long",382],["T_WHITESPACE"," ",382],"?",["T_WHITESPACE"," ",382],["T_CONSTANT_ENCAPSED_STRING","'       '",382],["T_WHITESPACE","\n            ",382],":",["T_WHITESPACE"," ",383],["T_STRING","str_pad",383],"(",["T_STRING","substr",383],"(",["T_STRING","sprintf",383],"(",["T_CONSTANT_ENCAPSED_STRING","\"%07o\"",383],",",["T_WHITESPACE"," ",383],["T_VARIABLE","$infoFile",383],"[",["T_CONSTANT_ENCAPSED_STRING","'mode'",383],"]",")",",","-",["T_LNUMBER","4",383],")",",",["T_WHITESPACE"," ",383],["T_LNUMBER","6",383],",",["T_WHITESPACE"," ",383],["T_CONSTANT_ENCAPSED_STRING","'0'",383],",",["T_WHITESPACE"," ",383],["T_STRING","STR_PAD_LEFT",383],")",";",["T_WHITESPACE","\n        ",383],["T_VARIABLE","$header",384],"[",["T_CONSTANT_ENCAPSED_STRING","'8-uid'",384],"]",["T_WHITESPACE","          ",384],"=",["T_WHITESPACE"," ",384],["T_VARIABLE","$long",384],["T_WHITESPACE"," ",384],["T_BOOLEAN_OR","||",384],["T_WHITESPACE"," ",384],["T_VARIABLE","$infoFile",384],"[",["T_CONSTANT_ENCAPSED_STRING","'uid'",384],"]",["T_IS_EQUAL","==",384],["T_LNUMBER","0",384],"?",["T_CONSTANT_ENCAPSED_STRING","\"\\0\\0\\0\\0\\0\\0\\0\"",384],":",["T_STRING","sprintf",384],"(",["T_CONSTANT_ENCAPSED_STRING","\"%07o\"",384],",",["T_WHITESPACE"," ",384],["T_VARIABLE","$infoFile",384],"[",["T_CONSTANT_ENCAPSED_STRING","'uid'",384],"]",")",";",["T_WHITESPACE","\n        ",384],["T_VARIABLE","$header",385],"[",["T_CONSTANT_ENCAPSED_STRING","'8-gid'",385],"]",["T_WHITESPACE","          ",385],"=",["T_WHITESPACE"," ",385],["T_VARIABLE","$long",385],["T_WHITESPACE"," ",385],["T_BOOLEAN_OR","||",385],["T_WHITESPACE"," ",385],["T_VARIABLE","$infoFile",385],"[",["T_CONSTANT_ENCAPSED_STRING","'gid'",385],"]",["T_IS_EQUAL","==",385],["T_LNUMBER","0",385],"?",["T_CONSTANT_ENCAPSED_STRING","\"\\0\\0\\0\\0\\0\\0\\0\"",385],":",["T_STRING","sprintf",385],"(",["T_CONSTANT_ENCAPSED_STRING","\"%07o\"",385],",",["T_WHITESPACE"," ",385],["T_VARIABLE","$infoFile",385],"[",["T_CONSTANT_ENCAPSED_STRING","'gid'",385],"]",")",";",["T_WHITESPACE","\n        ",385],["T_VARIABLE","$header",386],"[",["T_CONSTANT_ENCAPSED_STRING","'12-size'",386],"]",["T_WHITESPACE","        ",386],"=",["T_WHITESPACE"," ",386],["T_VARIABLE","$long",386],["T_WHITESPACE"," ",386],"?",["T_WHITESPACE"," ",386],["T_STRING","sprintf",386],"(",["T_CONSTANT_ENCAPSED_STRING","\"%011o\"",386],",",["T_WHITESPACE"," ",386],["T_STRING","strlen",386],"(",["T_VARIABLE","$nameFile",386],")",")",["T_WHITESPACE"," ",386],":",["T_WHITESPACE"," ",386],["T_STRING","sprintf",386],"(",["T_CONSTANT_ENCAPSED_STRING","\"%011o\"",386],",",["T_WHITESPACE"," ",386],["T_STRING","is_dir",386],"(",["T_VARIABLE","$file",386],")",["T_WHITESPACE","\n            ",386],"?",["T_WHITESPACE"," ",387],["T_LNUMBER","0",387],["T_WHITESPACE"," ",387],":",["T_WHITESPACE"," ",387],["T_STRING","filesize",387],"(",["T_VARIABLE","$file",387],")",")",";",["T_WHITESPACE","\n        ",387],["T_VARIABLE","$header",388],"[",["T_CONSTANT_ENCAPSED_STRING","'12-mtime'",388],"]",["T_WHITESPACE","       ",388],"=",["T_WHITESPACE"," ",388],["T_VARIABLE","$long",388],"?",["T_CONSTANT_ENCAPSED_STRING","'00000000000'",388],":",["T_STRING","sprintf",388],"(",["T_CONSTANT_ENCAPSED_STRING","\"%011o\"",388],",",["T_WHITESPACE"," ",388],["T_VARIABLE","$infoFile",388],"[",["T_CONSTANT_ENCAPSED_STRING","'mtime'",388],"]",")",";",["T_WHITESPACE","\n        ",388],["T_VARIABLE","$header",389],"[",["T_CONSTANT_ENCAPSED_STRING","'8-check'",389],"]",["T_WHITESPACE","        ",389],"=",["T_WHITESPACE"," ",389],["T_STRING","sprintf",389],"(",["T_CONSTANT_ENCAPSED_STRING","'% 8s'",389],",",["T_WHITESPACE"," ",389],["T_CONSTANT_ENCAPSED_STRING","''",389],")",";",["T_WHITESPACE","\n        ",389],["T_VARIABLE","$header",390],"[",["T_CONSTANT_ENCAPSED_STRING","'1-type'",390],"]",["T_WHITESPACE","         ",390],"=",["T_WHITESPACE"," ",390],["T_VARIABLE","$long",390],["T_WHITESPACE"," ",390],"?",["T_WHITESPACE"," ",390],["T_CONSTANT_ENCAPSED_STRING","'L'",390],["T_WHITESPACE"," ",390],":",["T_WHITESPACE"," ",390],"(",["T_STRING","is_link",390],"(",["T_VARIABLE","$file",390],")",["T_WHITESPACE"," ",390],"?",["T_WHITESPACE"," ",390],["T_LNUMBER","2",390],["T_WHITESPACE"," ",390],":",["T_WHITESPACE"," ",390],"(",["T_STRING","is_dir",390],"(",["T_VARIABLE","$file",390],")",["T_WHITESPACE"," ",390],"?",["T_WHITESPACE"," ",390],["T_LNUMBER","5",390],["T_WHITESPACE"," ",390],":",["T_WHITESPACE"," ",390],["T_LNUMBER","0",390],")",")",";",["T_WHITESPACE","\n        ",390],["T_VARIABLE","$header",391],"[",["T_CONSTANT_ENCAPSED_STRING","'100-symlink'",391],"]",["T_WHITESPACE","    ",391],"=",["T_WHITESPACE"," ",391],["T_STRING","is_link",391],"(",["T_VARIABLE","$file",391],")",["T_WHITESPACE"," ",391],"?",["T_WHITESPACE"," ",391],["T_STRING","readlink",391],"(",["T_VARIABLE","$file",391],")",["T_WHITESPACE"," ",391],":",["T_WHITESPACE"," ",391],["T_CONSTANT_ENCAPSED_STRING","''",391],";",["T_WHITESPACE","\n        ",391],["T_VARIABLE","$header",392],"[",["T_CONSTANT_ENCAPSED_STRING","'6-magic'",392],"]",["T_WHITESPACE","        ",392],"=",["T_WHITESPACE"," ",392],["T_CONSTANT_ENCAPSED_STRING","'ustar '",392],";",["T_WHITESPACE","\n        ",392],["T_VARIABLE","$header",393],"[",["T_CONSTANT_ENCAPSED_STRING","'2-version'",393],"]",["T_WHITESPACE","      ",393],"=",["T_WHITESPACE"," ",393],["T_CONSTANT_ENCAPSED_STRING","' '",393],";",["T_WHITESPACE","\n        ",393],["T_VARIABLE","$a",394],"=",["T_STRING","function_exists",394],"(",["T_CONSTANT_ENCAPSED_STRING","'posix_getpwuid'",394],")","?",["T_STRING","posix_getpwuid",394],["T_WHITESPACE"," ",394],"(",["T_STRING","fileowner",394],"(",["T_VARIABLE","$file",394],")",")",":",["T_ARRAY","array",394],"(",["T_CONSTANT_ENCAPSED_STRING","'name'",394],["T_DOUBLE_ARROW","=>",394],["T_CONSTANT_ENCAPSED_STRING","''",394],")",";",["T_WHITESPACE","\n        ",394],["T_VARIABLE","$header",395],"[",["T_CONSTANT_ENCAPSED_STRING","'32-uname'",395],"]",["T_WHITESPACE","       ",395],"=",["T_WHITESPACE"," ",395],["T_VARIABLE","$a",395],"[",["T_CONSTANT_ENCAPSED_STRING","'name'",395],"]",";",["T_WHITESPACE","\n        ",395],["T_VARIABLE","$a",396],"=",["T_STRING","function_exists",396],"(",["T_CONSTANT_ENCAPSED_STRING","'posix_getgrgid'",396],")","?",["T_STRING","posix_getgrgid",396],["T_WHITESPACE"," ",396],"(",["T_STRING","filegroup",396],"(",["T_VARIABLE","$file",396],")",")",":",["T_ARRAY","array",396],"(",["T_CONSTANT_ENCAPSED_STRING","'name'",396],["T_DOUBLE_ARROW","=>",396],["T_CONSTANT_ENCAPSED_STRING","''",396],")",";",["T_WHITESPACE","\n        ",396],["T_VARIABLE","$header",397],"[",["T_CONSTANT_ENCAPSED_STRING","'32-gname'",397],"]",["T_WHITESPACE","       ",397],"=",["T_WHITESPACE"," ",397],["T_VARIABLE","$a",397],"[",["T_CONSTANT_ENCAPSED_STRING","'name'",397],"]",";",["T_WHITESPACE","\n        ",397],["T_VARIABLE","$header",398],"[",["T_CONSTANT_ENCAPSED_STRING","'8-devmajor'",398],"]",["T_WHITESPACE","     ",398],"=",["T_WHITESPACE"," ",398],["T_CONSTANT_ENCAPSED_STRING","''",398],";",["T_WHITESPACE","\n        ",398],["T_VARIABLE","$header",399],"[",["T_CONSTANT_ENCAPSED_STRING","'8-devminor'",399],"]",["T_WHITESPACE","     ",399],"=",["T_WHITESPACE"," ",399],["T_CONSTANT_ENCAPSED_STRING","''",399],";",["T_WHITESPACE","\n        ",399],["T_VARIABLE","$header",400],"[",["T_CONSTANT_ENCAPSED_STRING","'155-prefix'",400],"]",["T_WHITESPACE","     ",400],"=",["T_WHITESPACE"," ",400],["T_CONSTANT_ENCAPSED_STRING","''",400],";",["T_WHITESPACE","\n        ",400],["T_VARIABLE","$header",401],"[",["T_CONSTANT_ENCAPSED_STRING","'12-closer'",401],"]",["T_WHITESPACE","      ",401],"=",["T_WHITESPACE"," ",401],["T_CONSTANT_ENCAPSED_STRING","''",401],";",["T_WHITESPACE","\n\n        ",401],["T_VARIABLE","$packedHeader",403],["T_WHITESPACE"," ",403],"=",["T_WHITESPACE"," ",403],["T_CONSTANT_ENCAPSED_STRING","''",403],";",["T_WHITESPACE","\n        ",403],["T_FOREACH","foreach",404],["T_WHITESPACE"," ",404],"(",["T_VARIABLE","$header",404],["T_WHITESPACE"," ",404],["T_AS","as",404],["T_WHITESPACE"," ",404],["T_VARIABLE","$key",404],["T_DOUBLE_ARROW","=>",404],["T_VARIABLE","$element",404],")",["T_WHITESPACE"," ",404],"{",["T_WHITESPACE","\n            ",404],["T_VARIABLE","$length",405],["T_WHITESPACE"," ",405],"=",["T_WHITESPACE"," ",405],["T_STRING","explode",405],"(",["T_CONSTANT_ENCAPSED_STRING","'-'",405],",",["T_WHITESPACE"," ",405],["T_VARIABLE","$key",405],")",";",["T_WHITESPACE","\n            ",405],["T_VARIABLE","$packedHeader",406],["T_WHITESPACE"," ",406],["T_CONCAT_EQUAL",".=",406],["T_WHITESPACE"," ",406],["T_STRING","pack",406],"(",["T_CONSTANT_ENCAPSED_STRING","'a'",406],["T_WHITESPACE"," ",406],".",["T_WHITESPACE"," ",406],["T_VARIABLE","$length",406],"[",["T_LNUMBER","0",406],"]",",",["T_WHITESPACE"," ",406],["T_VARIABLE","$element",406],")",";",["T_WHITESPACE","\n        ",406],"}",["T_WHITESPACE","\n\n        ",407],["T_VARIABLE","$checksum",409],["T_WHITESPACE"," ",409],"=",["T_WHITESPACE"," ",409],["T_LNUMBER","0",409],";",["T_WHITESPACE","\n        ",409],["T_FOR","for",410],["T_WHITESPACE"," ",410],"(",["T_VARIABLE","$i",410],["T_WHITESPACE"," ",410],"=",["T_WHITESPACE"," ",410],["T_LNUMBER","0",410],";",["T_WHITESPACE"," ",410],["T_VARIABLE","$i",410],["T_WHITESPACE"," ",410],"<",["T_WHITESPACE"," ",410],["T_LNUMBER","512",410],";",["T_WHITESPACE"," ",410],["T_VARIABLE","$i",410],["T_INC","++",410],")",["T_WHITESPACE"," ",410],"{",["T_WHITESPACE","\n            ",410],["T_VARIABLE","$checksum",411],["T_WHITESPACE"," ",411],["T_PLUS_EQUAL","+=",411],["T_WHITESPACE"," ",411],["T_STRING","ord",411],"(",["T_STRING","substr",411],"(",["T_VARIABLE","$packedHeader",411],",",["T_WHITESPACE"," ",411],["T_VARIABLE","$i",411],",",["T_WHITESPACE"," ",411],["T_LNUMBER","1",411],")",")",";",["T_WHITESPACE","\n        ",411],"}",["T_WHITESPACE","\n        ",412],["T_VARIABLE","$packedHeader",413],["T_WHITESPACE"," ",413],"=",["T_WHITESPACE"," ",413],["T_STRING","substr_replace",413],"(",["T_VARIABLE","$packedHeader",413],",",["T_WHITESPACE"," ",413],["T_STRING","sprintf",413],"(",["T_CONSTANT_ENCAPSED_STRING","\"%07o\"",413],",",["T_WHITESPACE"," ",413],["T_VARIABLE","$checksum",413],")",".",["T_CONSTANT_ENCAPSED_STRING","\"\\0\"",413],",",["T_WHITESPACE"," ",413],["T_LNUMBER","148",413],",",["T_WHITESPACE"," ",413],["T_LNUMBER","8",413],")",";",["T_WHITESPACE","\n\n        ",413],["T_RETURN","return",415],["T_WHITESPACE"," ",415],["T_VARIABLE","$longHeader",415],["T_WHITESPACE"," ",415],".",["T_WHITESPACE"," ",415],["T_VARIABLE","$packedHeader",415],";",["T_WHITESPACE","\n    ",415],"}",["T_WHITESPACE","\n\n    ",416],["T_DOC_COMMENT","\/**\n     * Read TAR string from file, and unpacked it.\n     * Create files and directories information about discribed\n     * in the string.\n     *\n     * @param string $destination path to file is unpacked\n     * @return array list of files\n     * @throws Mage_Exception\n     *\/",418],["T_WHITESPACE","\n    ",426],["T_PROTECTED","protected",427],["T_WHITESPACE"," ",427],["T_FUNCTION","function",427],["T_WHITESPACE"," ",427],["T_STRING","_unpackCurrentTar",427],"(",["T_VARIABLE","$destination",427],")",["T_WHITESPACE","\n    ",427],"{",["T_WHITESPACE","\n        ",428],["T_VARIABLE","$archiveReader",429],["T_WHITESPACE"," ",429],"=",["T_WHITESPACE"," ",429],["T_VARIABLE","$this",429],["T_OBJECT_OPERATOR","->",429],["T_STRING","_getReader",429],"(",")",";",["T_WHITESPACE","\n        ",429],["T_VARIABLE","$list",430],["T_WHITESPACE"," ",430],"=",["T_WHITESPACE"," ",430],["T_ARRAY","array",430],"(",")",";",["T_WHITESPACE","\n\n        ",430],["T_WHILE","while",432],["T_WHITESPACE"," ",432],"(","!",["T_VARIABLE","$archiveReader",432],["T_OBJECT_OPERATOR","->",432],["T_STRING","eof",432],"(",")",")",["T_WHITESPACE"," ",432],"{",["T_WHITESPACE","\n            ",432],["T_VARIABLE","$header",433],["T_WHITESPACE"," ",433],"=",["T_WHITESPACE"," ",433],["T_VARIABLE","$this",433],["T_OBJECT_OPERATOR","->",433],["T_STRING","_extractFileHeader",433],"(",")",";",["T_WHITESPACE","\n\n            ",433],["T_IF","if",435],["T_WHITESPACE"," ",435],"(","!",["T_VARIABLE","$header",435],")",["T_WHITESPACE"," ",435],"{",["T_WHITESPACE","\n                ",435],["T_CONTINUE","continue",436],";",["T_WHITESPACE","\n            ",436],"}",["T_WHITESPACE","\n\n            ",437],["T_VARIABLE","$currentFile",439],["T_WHITESPACE"," ",439],"=",["T_WHITESPACE"," ",439],["T_VARIABLE","$destination",439],["T_WHITESPACE"," ",439],".",["T_WHITESPACE"," ",439],["T_VARIABLE","$header",439],"[",["T_CONSTANT_ENCAPSED_STRING","'name'",439],"]",";",["T_WHITESPACE","\n            ",439],["T_VARIABLE","$dirname",440],["T_WHITESPACE"," ",440],"=",["T_WHITESPACE"," ",440],["T_STRING","dirname",440],"(",["T_VARIABLE","$currentFile",440],")",";",["T_WHITESPACE","\n\n            ",440],["T_IF","if",442],["T_WHITESPACE"," ",442],"(",["T_STRING","in_array",442],"(",["T_VARIABLE","$header",442],"[",["T_CONSTANT_ENCAPSED_STRING","'type'",442],"]",",",["T_WHITESPACE"," ",442],["T_ARRAY","array",442],"(",["T_CONSTANT_ENCAPSED_STRING","\"0\"",442],",",["T_STRING","chr",442],"(",["T_LNUMBER","0",442],")",",",["T_WHITESPACE"," ",442],["T_CONSTANT_ENCAPSED_STRING","''",442],")",")",")",["T_WHITESPACE"," ",442],"{",["T_WHITESPACE","\n\n                ",442],["T_IF","if",444],"(","!",["T_STRING","file_exists",444],"(",["T_VARIABLE","$dirname",444],")",")",["T_WHITESPACE"," ",444],"{",["T_WHITESPACE","\n                    ",444],["T_VARIABLE","$mkdirResult",445],["T_WHITESPACE"," ",445],"=",["T_WHITESPACE"," ",445],"@",["T_STRING","mkdir",445],"(",["T_VARIABLE","$dirname",445],",",["T_WHITESPACE"," ",445],["T_LNUMBER","0777",445],",",["T_WHITESPACE"," ",445],["T_STRING","true",445],")",";",["T_WHITESPACE","\n\n                    ",445],["T_IF","if",447],["T_WHITESPACE"," ",447],"(",["T_STRING","false",447],["T_WHITESPACE"," ",447],["T_IS_IDENTICAL","===",447],["T_WHITESPACE"," ",447],["T_VARIABLE","$mkdirResult",447],")",["T_WHITESPACE"," ",447],"{",["T_WHITESPACE","\n                        ",447],["T_THROW","throw",448],["T_WHITESPACE"," ",448],["T_NEW","new",448],["T_WHITESPACE"," ",448],["T_STRING","Mage_Exception",448],"(",["T_CONSTANT_ENCAPSED_STRING","'Failed to create directory '",448],["T_WHITESPACE"," ",448],".",["T_WHITESPACE"," ",448],["T_VARIABLE","$dirname",448],")",";",["T_WHITESPACE","\n                    ",448],"}",["T_WHITESPACE","\n                ",449],"}",["T_WHITESPACE","\n\n                ",450],["T_VARIABLE","$this",452],["T_OBJECT_OPERATOR","->",452],["T_STRING","_extractAndWriteFile",452],"(",["T_VARIABLE","$header",452],",",["T_WHITESPACE"," ",452],["T_VARIABLE","$currentFile",452],")",";",["T_WHITESPACE","\n                ",452],["T_VARIABLE","$list",453],"[","]",["T_WHITESPACE"," ",453],"=",["T_WHITESPACE"," ",453],["T_VARIABLE","$currentFile",453],";",["T_WHITESPACE","\n\n            ",453],"}",["T_WHITESPACE"," ",455],["T_ELSEIF","elseif",455],["T_WHITESPACE"," ",455],"(",["T_VARIABLE","$header",455],"[",["T_CONSTANT_ENCAPSED_STRING","'type'",455],"]",["T_WHITESPACE"," ",455],["T_IS_EQUAL","==",455],["T_WHITESPACE"," ",455],["T_CONSTANT_ENCAPSED_STRING","'5'",455],")",["T_WHITESPACE"," ",455],"{",["T_WHITESPACE","\n\n                ",455],["T_IF","if",457],"(","!",["T_STRING","file_exists",457],"(",["T_VARIABLE","$dirname",457],")",")",["T_WHITESPACE"," ",457],"{",["T_WHITESPACE","\n                    ",457],["T_VARIABLE","$mkdirResult",458],["T_WHITESPACE"," ",458],"=",["T_WHITESPACE"," ",458],"@",["T_STRING","mkdir",458],"(",["T_VARIABLE","$currentFile",458],",",["T_WHITESPACE"," ",458],["T_VARIABLE","$header",458],"[",["T_CONSTANT_ENCAPSED_STRING","'mode'",458],"]",",",["T_WHITESPACE"," ",458],["T_STRING","true",458],")",";",["T_WHITESPACE","\n\n                    ",458],["T_IF","if",460],["T_WHITESPACE"," ",460],"(",["T_STRING","false",460],["T_WHITESPACE"," ",460],["T_IS_IDENTICAL","===",460],["T_WHITESPACE"," ",460],["T_VARIABLE","$mkdirResult",460],")",["T_WHITESPACE"," ",460],"{",["T_WHITESPACE","\n                        ",460],["T_THROW","throw",461],["T_WHITESPACE"," ",461],["T_NEW","new",461],["T_WHITESPACE"," ",461],["T_STRING","Mage_Exception",461],"(",["T_CONSTANT_ENCAPSED_STRING","'Failed to create directory '",461],["T_WHITESPACE"," ",461],".",["T_WHITESPACE"," ",461],["T_VARIABLE","$currentFile",461],")",";",["T_WHITESPACE","\n                    ",461],"}",["T_WHITESPACE","\n                ",462],"}",["T_WHITESPACE","\n                ",463],["T_VARIABLE","$list",464],"[","]",["T_WHITESPACE"," ",464],"=",["T_WHITESPACE"," ",464],["T_VARIABLE","$currentFile",464],["T_WHITESPACE"," ",464],".",["T_WHITESPACE"," ",464],["T_STRING","DS",464],";",["T_WHITESPACE","\n            ",464],"}",["T_WHITESPACE"," ",465],["T_ELSEIF","elseif",465],["T_WHITESPACE"," ",465],"(",["T_VARIABLE","$header",465],"[",["T_CONSTANT_ENCAPSED_STRING","'type'",465],"]",["T_WHITESPACE"," ",465],["T_IS_EQUAL","==",465],["T_WHITESPACE"," ",465],["T_CONSTANT_ENCAPSED_STRING","'2'",465],")",["T_WHITESPACE"," ",465],"{",["T_WHITESPACE","\n\n                ",465],["T_COMMENT","\/\/we do not interrupt unpack process if symlink creation failed as symlinks are not so important\n",467],["T_WHITESPACE","                ",468],"@",["T_STRING","symlink",468],"(",["T_VARIABLE","$header",468],"[",["T_CONSTANT_ENCAPSED_STRING","'symlink'",468],"]",",",["T_WHITESPACE"," ",468],["T_VARIABLE","$currentFile",468],")",";",["T_WHITESPACE","\n            ",468],"}",["T_WHITESPACE","\n        ",469],"}",["T_WHITESPACE","\n\n        ",470],["T_RETURN","return",472],["T_WHITESPACE"," ",472],["T_VARIABLE","$list",472],";",["T_WHITESPACE","\n    ",472],"}",["T_WHITESPACE","\n\n    ",473],["T_DOC_COMMENT","\/**\n     * Get header from TAR string and unpacked it by format.\n     *\n     * @deprecated after 1.7.0.0\n     * @param resource $pointer\n     * @return string\n     *\/",475],["T_WHITESPACE","\n    ",481],["T_PROTECTED","protected",482],["T_WHITESPACE"," ",482],["T_FUNCTION","function",482],["T_WHITESPACE"," ",482],["T_STRING","_parseHeader",482],"(","&",["T_VARIABLE","$pointer",482],")",["T_WHITESPACE","\n    ",482],"{",["T_WHITESPACE","\n        ",483],["T_VARIABLE","$firstLine",484],["T_WHITESPACE"," ",484],"=",["T_WHITESPACE"," ",484],["T_STRING","fread",484],"(",["T_VARIABLE","$pointer",484],",",["T_WHITESPACE"," ",484],["T_LNUMBER","512",484],")",";",["T_WHITESPACE","\n\n        ",484],["T_IF","if",486],["T_WHITESPACE"," ",486],"(",["T_STRING","strlen",486],"(",["T_VARIABLE","$firstLine",486],")","<",["T_LNUMBER","512",486],")","{",["T_WHITESPACE","\n            ",486],["T_RETURN","return",487],["T_WHITESPACE"," ",487],["T_STRING","false",487],";",["T_WHITESPACE","\n        ",487],"}",["T_WHITESPACE","\n\n        ",488],["T_VARIABLE","$fmt",490],["T_WHITESPACE"," ",490],"=",["T_WHITESPACE"," ",490],["T_STRING","self",490],["T_DOUBLE_COLON","::",490],["T_STRING","_getFormatParseHeader",490],"(",")",";",["T_WHITESPACE","\n        ",490],["T_VARIABLE","$header",491],["T_WHITESPACE"," ",491],"=",["T_WHITESPACE"," ",491],["T_STRING","unpack",491],["T_WHITESPACE"," ",491],"(",["T_VARIABLE","$fmt",491],",",["T_WHITESPACE"," ",491],["T_VARIABLE","$firstLine",491],")",";",["T_WHITESPACE","\n\n        ",491],["T_VARIABLE","$header",493],"[",["T_CONSTANT_ENCAPSED_STRING","'mode'",493],"]","=",["T_VARIABLE","$header",493],"[",["T_CONSTANT_ENCAPSED_STRING","'mode'",493],"]","+",["T_LNUMBER","0",493],";",["T_WHITESPACE","\n        ",493],["T_VARIABLE","$header",494],"[",["T_CONSTANT_ENCAPSED_STRING","'uid'",494],"]","=",["T_STRING","octdec",494],"(",["T_VARIABLE","$header",494],"[",["T_CONSTANT_ENCAPSED_STRING","'uid'",494],"]",")",";",["T_WHITESPACE","\n        ",494],["T_VARIABLE","$header",495],"[",["T_CONSTANT_ENCAPSED_STRING","'gid'",495],"]","=",["T_STRING","octdec",495],"(",["T_VARIABLE","$header",495],"[",["T_CONSTANT_ENCAPSED_STRING","'gid'",495],"]",")",";",["T_WHITESPACE","\n        ",495],["T_VARIABLE","$header",496],"[",["T_CONSTANT_ENCAPSED_STRING","'size'",496],"]","=",["T_STRING","octdec",496],"(",["T_VARIABLE","$header",496],"[",["T_CONSTANT_ENCAPSED_STRING","'size'",496],"]",")",";",["T_WHITESPACE","\n        ",496],["T_VARIABLE","$header",497],"[",["T_CONSTANT_ENCAPSED_STRING","'mtime'",497],"]","=",["T_STRING","octdec",497],"(",["T_VARIABLE","$header",497],"[",["T_CONSTANT_ENCAPSED_STRING","'mtime'",497],"]",")",";",["T_WHITESPACE","\n        ",497],["T_VARIABLE","$header",498],"[",["T_CONSTANT_ENCAPSED_STRING","'checksum'",498],"]","=",["T_STRING","octdec",498],"(",["T_VARIABLE","$header",498],"[",["T_CONSTANT_ENCAPSED_STRING","'checksum'",498],"]",")",";",["T_WHITESPACE","\n\n        ",498],["T_IF","if",500],["T_WHITESPACE"," ",500],"(",["T_VARIABLE","$header",500],"[",["T_CONSTANT_ENCAPSED_STRING","'type'",500],"]",["T_WHITESPACE"," ",500],["T_IS_EQUAL","==",500],["T_WHITESPACE"," ",500],["T_CONSTANT_ENCAPSED_STRING","\"5\"",500],")",["T_WHITESPACE"," ",500],"{",["T_WHITESPACE","\n            ",500],["T_VARIABLE","$header",501],"[",["T_CONSTANT_ENCAPSED_STRING","'size'",501],"]",["T_WHITESPACE"," ",501],"=",["T_WHITESPACE"," ",501],["T_LNUMBER","0",501],";",["T_WHITESPACE","\n        ",501],"}",["T_WHITESPACE","\n\n        ",502],["T_VARIABLE","$checksum",504],["T_WHITESPACE"," ",504],"=",["T_WHITESPACE"," ",504],["T_LNUMBER","0",504],";",["T_WHITESPACE","\n        ",504],["T_VARIABLE","$firstLine",505],["T_WHITESPACE"," ",505],"=",["T_WHITESPACE"," ",505],["T_STRING","substr_replace",505],"(",["T_VARIABLE","$firstLine",505],",",["T_WHITESPACE"," ",505],["T_CONSTANT_ENCAPSED_STRING","'        '",505],",",["T_WHITESPACE"," ",505],["T_LNUMBER","148",505],",",["T_WHITESPACE"," ",505],["T_LNUMBER","8",505],")",";",["T_WHITESPACE","\n        ",505],["T_FOR","for",506],["T_WHITESPACE"," ",506],"(",["T_VARIABLE","$i",506],["T_WHITESPACE"," ",506],"=",["T_WHITESPACE"," ",506],["T_LNUMBER","0",506],";",["T_WHITESPACE"," ",506],["T_VARIABLE","$i",506],["T_WHITESPACE"," ",506],"<",["T_WHITESPACE"," ",506],["T_LNUMBER","512",506],";",["T_WHITESPACE"," ",506],["T_VARIABLE","$i",506],["T_INC","++",506],")",["T_WHITESPACE"," ",506],"{",["T_WHITESPACE","\n            ",506],["T_VARIABLE","$checksum",507],["T_WHITESPACE"," ",507],["T_PLUS_EQUAL","+=",507],["T_WHITESPACE"," ",507],["T_STRING","ord",507],"(",["T_STRING","substr",507],"(",["T_VARIABLE","$firstLine",507],",",["T_WHITESPACE"," ",507],["T_VARIABLE","$i",507],",",["T_WHITESPACE"," ",507],["T_LNUMBER","1",507],")",")",";",["T_WHITESPACE","\n        ",507],"}",["T_WHITESPACE","\n\n        ",508],["T_VARIABLE","$isUstar",510],["T_WHITESPACE"," ",510],"=",["T_WHITESPACE"," ",510],["T_CONSTANT_ENCAPSED_STRING","'ustar'",510],["T_WHITESPACE"," ",510],["T_IS_EQUAL","==",510],["T_WHITESPACE"," ",510],["T_STRING","strtolower",510],"(",["T_STRING","substr",510],"(",["T_VARIABLE","$header",510],"[",["T_CONSTANT_ENCAPSED_STRING","'magic'",510],"]",",",["T_WHITESPACE"," ",510],["T_LNUMBER","0",510],",",["T_WHITESPACE"," ",510],["T_LNUMBER","5",510],")",")",";",["T_WHITESPACE","\n\n        ",510],["T_VARIABLE","$checksumOk",512],["T_WHITESPACE"," ",512],"=",["T_WHITESPACE"," ",512],["T_VARIABLE","$header",512],"[",["T_CONSTANT_ENCAPSED_STRING","'checksum'",512],"]",["T_WHITESPACE"," ",512],["T_IS_EQUAL","==",512],["T_WHITESPACE"," ",512],["T_VARIABLE","$checksum",512],";",["T_WHITESPACE","\n        ",512],["T_IF","if",513],["T_WHITESPACE"," ",513],"(",["T_ISSET","isset",513],"(",["T_VARIABLE","$header",513],"[",["T_CONSTANT_ENCAPSED_STRING","'name'",513],"]",")",["T_WHITESPACE"," ",513],["T_BOOLEAN_AND","&&",513],["T_WHITESPACE"," ",513],["T_VARIABLE","$checksumOk",513],")",["T_WHITESPACE"," ",513],"{",["T_WHITESPACE","\n            ",513],["T_IF","if",514],["T_WHITESPACE"," ",514],"(",["T_VARIABLE","$header",514],"[",["T_CONSTANT_ENCAPSED_STRING","'name'",514],"]",["T_WHITESPACE"," ",514],["T_IS_EQUAL","==",514],["T_WHITESPACE"," ",514],["T_CONSTANT_ENCAPSED_STRING","'.\/.\/@LongLink'",514],["T_WHITESPACE"," ",514],["T_BOOLEAN_AND","&&",514],["T_WHITESPACE"," ",514],["T_VARIABLE","$header",514],"[",["T_CONSTANT_ENCAPSED_STRING","'type'",514],"]",["T_WHITESPACE"," ",514],["T_IS_EQUAL","==",514],["T_WHITESPACE"," ",514],["T_CONSTANT_ENCAPSED_STRING","'L'",514],")",["T_WHITESPACE"," ",514],"{",["T_WHITESPACE","\n                ",514],["T_VARIABLE","$realName",515],["T_WHITESPACE"," ",515],"=",["T_WHITESPACE"," ",515],["T_STRING","substr",515],"(",["T_STRING","fread",515],"(",["T_VARIABLE","$pointer",515],",",["T_WHITESPACE"," ",515],["T_STRING","floor",515],"(","(",["T_VARIABLE","$header",515],"[",["T_CONSTANT_ENCAPSED_STRING","'size'",515],"]",["T_WHITESPACE"," ",515],"+",["T_WHITESPACE"," ",515],["T_LNUMBER","512",515],["T_WHITESPACE"," ",515],"-",["T_WHITESPACE"," ",515],["T_LNUMBER","1",515],")",["T_WHITESPACE"," ",515],"\/",["T_WHITESPACE"," ",515],["T_LNUMBER","512",515],")",["T_WHITESPACE"," ",515],"*",["T_WHITESPACE"," ",515],["T_LNUMBER","512",515],")",",",["T_WHITESPACE"," ",515],["T_LNUMBER","0",515],",",["T_WHITESPACE"," ",515],["T_VARIABLE","$header",515],"[",["T_CONSTANT_ENCAPSED_STRING","'size'",515],"]",")",";",["T_WHITESPACE","\n                ",515],["T_VARIABLE","$headerMain",516],["T_WHITESPACE"," ",516],"=",["T_WHITESPACE"," ",516],["T_VARIABLE","$this",516],["T_OBJECT_OPERATOR","->",516],["T_STRING","_parseHeader",516],"(",["T_VARIABLE","$pointer",516],")",";",["T_WHITESPACE","\n                ",516],["T_VARIABLE","$headerMain",517],"[",["T_CONSTANT_ENCAPSED_STRING","'name'",517],"]",["T_WHITESPACE"," ",517],"=",["T_WHITESPACE"," ",517],["T_VARIABLE","$realName",517],";",["T_WHITESPACE","\n                ",517],["T_RETURN","return",518],["T_WHITESPACE"," ",518],["T_VARIABLE","$headerMain",518],";",["T_WHITESPACE","\n            ",518],"}",["T_WHITESPACE"," ",519],["T_ELSE","else",519],["T_WHITESPACE"," ",519],"{",["T_WHITESPACE","\n                ",519],["T_IF","if",520],["T_WHITESPACE"," ",520],"(",["T_VARIABLE","$header",520],"[",["T_CONSTANT_ENCAPSED_STRING","'size'",520],"]",">",["T_LNUMBER","0",520],")",["T_WHITESPACE"," ",520],"{",["T_WHITESPACE","\n                    ",520],["T_VARIABLE","$header",521],"[",["T_CONSTANT_ENCAPSED_STRING","'data'",521],"]",["T_WHITESPACE"," ",521],"=",["T_WHITESPACE"," ",521],["T_STRING","substr",521],"(",["T_STRING","fread",521],"(",["T_VARIABLE","$pointer",521],",",["T_WHITESPACE"," ",521],["T_STRING","floor",521],"(","(",["T_VARIABLE","$header",521],"[",["T_CONSTANT_ENCAPSED_STRING","'size'",521],"]",["T_WHITESPACE"," ",521],"+",["T_WHITESPACE"," ",521],["T_LNUMBER","512",521],["T_WHITESPACE"," ",521],"-",["T_WHITESPACE"," ",521],["T_LNUMBER","1",521],")",["T_WHITESPACE"," ",521],"\/",["T_WHITESPACE"," ",521],["T_LNUMBER","512",521],")",["T_WHITESPACE"," ",521],"*",["T_WHITESPACE"," ",521],["T_LNUMBER","512",521],")",",",["T_WHITESPACE"," ",521],["T_LNUMBER","0",521],",",["T_WHITESPACE"," ",521],["T_VARIABLE","$header",521],"[",["T_CONSTANT_ENCAPSED_STRING","'size'",521],"]",")",";",["T_WHITESPACE","\n                ",521],"}",["T_WHITESPACE"," ",522],["T_ELSE","else",522],["T_WHITESPACE"," ",522],"{",["T_WHITESPACE","\n                    ",522],["T_VARIABLE","$header",523],"[",["T_CONSTANT_ENCAPSED_STRING","'data'",523],"]",["T_WHITESPACE"," ",523],"=",["T_WHITESPACE"," ",523],["T_CONSTANT_ENCAPSED_STRING","''",523],";",["T_WHITESPACE","\n                ",523],"}",["T_WHITESPACE","\n                ",524],["T_RETURN","return",525],["T_WHITESPACE"," ",525],["T_VARIABLE","$header",525],";",["T_WHITESPACE","\n            ",525],"}",["T_WHITESPACE","\n        ",526],"}",["T_WHITESPACE","\n        ",527],["T_RETURN","return",528],["T_WHITESPACE"," ",528],["T_STRING","false",528],";",["T_WHITESPACE","\n    ",528],"}",["T_WHITESPACE","\n\n    ",529],["T_DOC_COMMENT","\/**\n     * Read and decode file header information from tarball\n     *\n     * @return array|boolean\n     *\/",531],["T_WHITESPACE","\n    ",535],["T_PROTECTED","protected",536],["T_WHITESPACE"," ",536],["T_FUNCTION","function",536],["T_WHITESPACE"," ",536],["T_STRING","_extractFileHeader",536],"(",")",["T_WHITESPACE","\n    ",536],"{",["T_WHITESPACE","\n        ",537],["T_VARIABLE","$archiveReader",538],["T_WHITESPACE"," ",538],"=",["T_WHITESPACE"," ",538],["T_VARIABLE","$this",538],["T_OBJECT_OPERATOR","->",538],["T_STRING","_getReader",538],"(",")",";",["T_WHITESPACE","\n\n        ",538],["T_VARIABLE","$headerBlock",540],["T_WHITESPACE"," ",540],"=",["T_WHITESPACE"," ",540],["T_VARIABLE","$archiveReader",540],["T_OBJECT_OPERATOR","->",540],["T_STRING","read",540],"(",["T_STRING","self",540],["T_DOUBLE_COLON","::",540],["T_STRING","TAR_BLOCK_SIZE",540],")",";",["T_WHITESPACE","\n\n        ",540],["T_IF","if",542],["T_WHITESPACE"," ",542],"(",["T_STRING","strlen",542],"(",["T_VARIABLE","$headerBlock",542],")",["T_WHITESPACE"," ",542],"<",["T_WHITESPACE"," ",542],["T_STRING","self",542],["T_DOUBLE_COLON","::",542],["T_STRING","TAR_BLOCK_SIZE",542],")",["T_WHITESPACE"," ",542],"{",["T_WHITESPACE","\n            ",542],["T_RETURN","return",543],["T_WHITESPACE"," ",543],["T_STRING","false",543],";",["T_WHITESPACE","\n        ",543],"}",["T_WHITESPACE","\n\n        ",544],["T_VARIABLE","$header",546],["T_WHITESPACE"," ",546],"=",["T_WHITESPACE"," ",546],["T_STRING","unpack",546],"(",["T_STRING","self",546],["T_DOUBLE_COLON","::",546],["T_STRING","_getFormatParseHeader",546],"(",")",",",["T_WHITESPACE"," ",546],["T_VARIABLE","$headerBlock",546],")",";",["T_WHITESPACE","\n\n        ",546],["T_VARIABLE","$header",548],"[",["T_CONSTANT_ENCAPSED_STRING","'mode'",548],"]",["T_WHITESPACE","     ",548],"=",["T_WHITESPACE"," ",548],["T_STRING","octdec",548],"(",["T_VARIABLE","$header",548],"[",["T_CONSTANT_ENCAPSED_STRING","'mode'",548],"]",")",";",["T_WHITESPACE","\n        ",548],["T_VARIABLE","$header",549],"[",["T_CONSTANT_ENCAPSED_STRING","'uid'",549],"]",["T_WHITESPACE","      ",549],"=",["T_WHITESPACE"," ",549],["T_STRING","octdec",549],"(",["T_VARIABLE","$header",549],"[",["T_CONSTANT_ENCAPSED_STRING","'uid'",549],"]",")",";",["T_WHITESPACE","\n        ",549],["T_VARIABLE","$header",550],"[",["T_CONSTANT_ENCAPSED_STRING","'gid'",550],"]",["T_WHITESPACE","      ",550],"=",["T_WHITESPACE"," ",550],["T_STRING","octdec",550],"(",["T_VARIABLE","$header",550],"[",["T_CONSTANT_ENCAPSED_STRING","'gid'",550],"]",")",";",["T_WHITESPACE","\n        ",550],["T_VARIABLE","$header",551],"[",["T_CONSTANT_ENCAPSED_STRING","'size'",551],"]",["T_WHITESPACE","     ",551],"=",["T_WHITESPACE"," ",551],["T_STRING","octdec",551],"(",["T_VARIABLE","$header",551],"[",["T_CONSTANT_ENCAPSED_STRING","'size'",551],"]",")",";",["T_WHITESPACE","\n        ",551],["T_VARIABLE","$header",552],"[",["T_CONSTANT_ENCAPSED_STRING","'mtime'",552],"]",["T_WHITESPACE","    ",552],"=",["T_WHITESPACE"," ",552],["T_STRING","octdec",552],"(",["T_VARIABLE","$header",552],"[",["T_CONSTANT_ENCAPSED_STRING","'mtime'",552],"]",")",";",["T_WHITESPACE","\n        ",552],["T_VARIABLE","$header",553],"[",["T_CONSTANT_ENCAPSED_STRING","'checksum'",553],"]",["T_WHITESPACE"," ",553],"=",["T_WHITESPACE"," ",553],["T_STRING","octdec",553],"(",["T_VARIABLE","$header",553],"[",["T_CONSTANT_ENCAPSED_STRING","'checksum'",553],"]",")",";",["T_WHITESPACE","\n\n        ",553],["T_IF","if",555],["T_WHITESPACE"," ",555],"(",["T_VARIABLE","$header",555],"[",["T_CONSTANT_ENCAPSED_STRING","'type'",555],"]",["T_WHITESPACE"," ",555],["T_IS_EQUAL","==",555],["T_WHITESPACE"," ",555],["T_CONSTANT_ENCAPSED_STRING","\"5\"",555],")",["T_WHITESPACE"," ",555],"{",["T_WHITESPACE","\n            ",555],["T_VARIABLE","$header",556],"[",["T_CONSTANT_ENCAPSED_STRING","'size'",556],"]",["T_WHITESPACE"," ",556],"=",["T_WHITESPACE"," ",556],["T_LNUMBER","0",556],";",["T_WHITESPACE","\n        ",556],"}",["T_WHITESPACE","\n\n        ",557],["T_VARIABLE","$checksum",559],["T_WHITESPACE"," ",559],"=",["T_WHITESPACE"," ",559],["T_LNUMBER","0",559],";",["T_WHITESPACE","\n        ",559],["T_VARIABLE","$headerBlock",560],["T_WHITESPACE"," ",560],"=",["T_WHITESPACE"," ",560],["T_STRING","substr_replace",560],"(",["T_VARIABLE","$headerBlock",560],",",["T_WHITESPACE"," ",560],["T_CONSTANT_ENCAPSED_STRING","'        '",560],",",["T_WHITESPACE"," ",560],["T_LNUMBER","148",560],",",["T_WHITESPACE"," ",560],["T_LNUMBER","8",560],")",";",["T_WHITESPACE","\n\n        ",560],["T_FOR","for",562],["T_WHITESPACE"," ",562],"(",["T_VARIABLE","$i",562],["T_WHITESPACE"," ",562],"=",["T_WHITESPACE"," ",562],["T_LNUMBER","0",562],";",["T_WHITESPACE"," ",562],["T_VARIABLE","$i",562],["T_WHITESPACE"," ",562],"<",["T_WHITESPACE"," ",562],["T_LNUMBER","512",562],";",["T_WHITESPACE"," ",562],["T_VARIABLE","$i",562],["T_INC","++",562],")",["T_WHITESPACE"," ",562],"{",["T_WHITESPACE","\n            ",562],["T_VARIABLE","$checksum",563],["T_WHITESPACE"," ",563],["T_PLUS_EQUAL","+=",563],["T_WHITESPACE"," ",563],["T_STRING","ord",563],"(",["T_STRING","substr",563],"(",["T_VARIABLE","$headerBlock",563],",",["T_WHITESPACE"," ",563],["T_VARIABLE","$i",563],",",["T_WHITESPACE"," ",563],["T_LNUMBER","1",563],")",")",";",["T_WHITESPACE","\n        ",563],"}",["T_WHITESPACE","\n\n        ",564],["T_VARIABLE","$checksumOk",566],["T_WHITESPACE"," ",566],"=",["T_WHITESPACE"," ",566],["T_VARIABLE","$header",566],"[",["T_CONSTANT_ENCAPSED_STRING","'checksum'",566],"]",["T_WHITESPACE"," ",566],["T_IS_EQUAL","==",566],["T_WHITESPACE"," ",566],["T_VARIABLE","$checksum",566],";",["T_WHITESPACE","\n        ",566],["T_IF","if",567],["T_WHITESPACE"," ",567],"(",["T_ISSET","isset",567],"(",["T_VARIABLE","$header",567],"[",["T_CONSTANT_ENCAPSED_STRING","'name'",567],"]",")",["T_WHITESPACE"," ",567],["T_BOOLEAN_AND","&&",567],["T_WHITESPACE"," ",567],["T_VARIABLE","$checksumOk",567],")",["T_WHITESPACE"," ",567],"{",["T_WHITESPACE","\n\n            ",567],["T_IF","if",569],["T_WHITESPACE"," ",569],"(","!","(",["T_VARIABLE","$header",569],"[",["T_CONSTANT_ENCAPSED_STRING","'name'",569],"]",["T_WHITESPACE"," ",569],["T_IS_EQUAL","==",569],["T_WHITESPACE"," ",569],["T_CONSTANT_ENCAPSED_STRING","'.\/.\/@LongLink'",569],["T_WHITESPACE"," ",569],["T_BOOLEAN_AND","&&",569],["T_WHITESPACE"," ",569],["T_VARIABLE","$header",569],"[",["T_CONSTANT_ENCAPSED_STRING","'type'",569],"]",["T_WHITESPACE"," ",569],["T_IS_EQUAL","==",569],["T_WHITESPACE"," ",569],["T_CONSTANT_ENCAPSED_STRING","'L'",569],")",")",["T_WHITESPACE"," ",569],"{",["T_WHITESPACE","\n                ",569],["T_VARIABLE","$header",570],"[",["T_CONSTANT_ENCAPSED_STRING","'name'",570],"]",["T_WHITESPACE"," ",570],"=",["T_WHITESPACE"," ",570],["T_STRING","trim",570],"(",["T_VARIABLE","$header",570],"[",["T_CONSTANT_ENCAPSED_STRING","'name'",570],"]",")",";",["T_WHITESPACE","\n                ",570],["T_RETURN","return",571],["T_WHITESPACE"," ",571],["T_VARIABLE","$header",571],";",["T_WHITESPACE","\n            ",571],"}",["T_WHITESPACE","\n\n            ",572],["T_VARIABLE","$realNameBlockSize",574],["T_WHITESPACE"," ",574],"=",["T_WHITESPACE"," ",574],["T_STRING","floor",574],"(","(",["T_VARIABLE","$header",574],"[",["T_CONSTANT_ENCAPSED_STRING","'size'",574],"]",["T_WHITESPACE"," ",574],"+",["T_WHITESPACE"," ",574],["T_STRING","self",574],["T_DOUBLE_COLON","::",574],["T_STRING","TAR_BLOCK_SIZE",574],["T_WHITESPACE"," ",574],"-",["T_WHITESPACE"," ",574],["T_LNUMBER","1",574],")",["T_WHITESPACE"," ",574],"\/",["T_WHITESPACE"," ",574],["T_STRING","self",574],["T_DOUBLE_COLON","::",574],["T_STRING","TAR_BLOCK_SIZE",574],")",["T_WHITESPACE","\n                ",574],"*",["T_WHITESPACE"," ",575],["T_STRING","self",575],["T_DOUBLE_COLON","::",575],["T_STRING","TAR_BLOCK_SIZE",575],";",["T_WHITESPACE","\n            ",575],["T_VARIABLE","$realNameBlock",576],["T_WHITESPACE"," ",576],"=",["T_WHITESPACE"," ",576],["T_VARIABLE","$archiveReader",576],["T_OBJECT_OPERATOR","->",576],["T_STRING","read",576],"(",["T_VARIABLE","$realNameBlockSize",576],")",";",["T_WHITESPACE","\n            ",576],["T_VARIABLE","$realName",577],["T_WHITESPACE"," ",577],"=",["T_WHITESPACE"," ",577],["T_STRING","substr",577],"(",["T_VARIABLE","$realNameBlock",577],",",["T_WHITESPACE"," ",577],["T_LNUMBER","0",577],",",["T_WHITESPACE"," ",577],["T_VARIABLE","$header",577],"[",["T_CONSTANT_ENCAPSED_STRING","'size'",577],"]",")",";",["T_WHITESPACE","\n\n            ",577],["T_VARIABLE","$headerMain",579],["T_WHITESPACE"," ",579],"=",["T_WHITESPACE"," ",579],["T_VARIABLE","$this",579],["T_OBJECT_OPERATOR","->",579],["T_STRING","_extractFileHeader",579],"(",")",";",["T_WHITESPACE","\n            ",579],["T_VARIABLE","$headerMain",580],"[",["T_CONSTANT_ENCAPSED_STRING","'name'",580],"]",["T_WHITESPACE"," ",580],"=",["T_WHITESPACE"," ",580],["T_STRING","trim",580],"(",["T_VARIABLE","$realName",580],")",";",["T_WHITESPACE","\n            ",580],["T_RETURN","return",581],["T_WHITESPACE"," ",581],["T_VARIABLE","$headerMain",581],";",["T_WHITESPACE","\n        ",581],"}",["T_WHITESPACE","\n\n        ",582],["T_RETURN","return",584],["T_WHITESPACE"," ",584],["T_STRING","false",584],";",["T_WHITESPACE","\n    ",584],"}",["T_WHITESPACE","\n\n    ",585],["T_DOC_COMMENT","\/**\n     * Extract next file from tarball by its $header information and save it to $destination\n     *\n     * @param array $fileHeader\n     * @param string $destination\n     *\/",587],["T_WHITESPACE","\n    ",592],["T_PROTECTED","protected",593],["T_WHITESPACE"," ",593],["T_FUNCTION","function",593],["T_WHITESPACE"," ",593],["T_STRING","_extractAndWriteFile",593],"(",["T_VARIABLE","$fileHeader",593],",",["T_WHITESPACE"," ",593],["T_VARIABLE","$destination",593],")",["T_WHITESPACE","\n    ",593],"{",["T_WHITESPACE","\n        ",594],["T_VARIABLE","$fileWriter",595],["T_WHITESPACE"," ",595],"=",["T_WHITESPACE"," ",595],["T_NEW","new",595],["T_WHITESPACE"," ",595],["T_STRING","Mage_Archive_Helper_File",595],"(",["T_VARIABLE","$destination",595],")",";",["T_WHITESPACE","\n        ",595],["T_VARIABLE","$fileWriter",596],["T_OBJECT_OPERATOR","->",596],["T_STRING","open",596],"(",["T_CONSTANT_ENCAPSED_STRING","'w'",596],",",["T_WHITESPACE"," ",596],["T_VARIABLE","$fileHeader",596],"[",["T_CONSTANT_ENCAPSED_STRING","'mode'",596],"]",")",";",["T_WHITESPACE","\n\n        ",596],["T_VARIABLE","$archiveReader",598],["T_WHITESPACE"," ",598],"=",["T_WHITESPACE"," ",598],["T_VARIABLE","$this",598],["T_OBJECT_OPERATOR","->",598],["T_STRING","_getReader",598],"(",")",";",["T_WHITESPACE","\n\n        ",598],["T_VARIABLE","$filesize",600],["T_WHITESPACE"," ",600],"=",["T_WHITESPACE"," ",600],["T_VARIABLE","$fileHeader",600],"[",["T_CONSTANT_ENCAPSED_STRING","'size'",600],"]",";",["T_WHITESPACE","\n        ",600],["T_VARIABLE","$bytesExtracted",601],["T_WHITESPACE"," ",601],"=",["T_WHITESPACE"," ",601],["T_LNUMBER","0",601],";",["T_WHITESPACE","\n\n        ",601],["T_WHILE","while",603],["T_WHITESPACE"," ",603],"(",["T_VARIABLE","$filesize",603],["T_WHITESPACE"," ",603],">",["T_WHITESPACE"," ",603],["T_VARIABLE","$bytesExtracted",603],["T_WHITESPACE"," ",603],["T_BOOLEAN_AND","&&",603],["T_WHITESPACE"," ",603],"!",["T_VARIABLE","$archiveReader",603],["T_OBJECT_OPERATOR","->",603],["T_STRING","eof",603],"(",")",")",["T_WHITESPACE"," ",603],"{",["T_WHITESPACE","\n            ",603],["T_VARIABLE","$block",604],["T_WHITESPACE"," ",604],"=",["T_WHITESPACE"," ",604],["T_VARIABLE","$archiveReader",604],["T_OBJECT_OPERATOR","->",604],["T_STRING","read",604],"(",["T_STRING","self",604],["T_DOUBLE_COLON","::",604],["T_STRING","TAR_BLOCK_SIZE",604],")",";",["T_WHITESPACE","\n            ",604],["T_VARIABLE","$nonExtractedBytesCount",605],["T_WHITESPACE"," ",605],"=",["T_WHITESPACE"," ",605],["T_VARIABLE","$filesize",605],["T_WHITESPACE"," ",605],"-",["T_WHITESPACE"," ",605],["T_VARIABLE","$bytesExtracted",605],";",["T_WHITESPACE","\n\n            ",605],["T_VARIABLE","$data",607],["T_WHITESPACE"," ",607],"=",["T_WHITESPACE"," ",607],["T_STRING","substr",607],"(",["T_VARIABLE","$block",607],",",["T_WHITESPACE"," ",607],["T_LNUMBER","0",607],",",["T_WHITESPACE"," ",607],["T_VARIABLE","$nonExtractedBytesCount",607],")",";",["T_WHITESPACE","\n            ",607],["T_VARIABLE","$fileWriter",608],["T_OBJECT_OPERATOR","->",608],["T_STRING","write",608],"(",["T_VARIABLE","$data",608],")",";",["T_WHITESPACE","\n\n            ",608],["T_VARIABLE","$bytesExtracted",610],["T_WHITESPACE"," ",610],["T_PLUS_EQUAL","+=",610],["T_WHITESPACE"," ",610],["T_STRING","strlen",610],"(",["T_VARIABLE","$block",610],")",";",["T_WHITESPACE","\n        ",610],"}",["T_WHITESPACE","\n    ",611],"}",["T_WHITESPACE","\n\n    ",612],["T_DOC_COMMENT","\/**\n     * Pack file to TAR (Tape Archiver).\n     *\n     * @param string $source\n     * @param string $destination\n     * @param boolean $skipRoot\n     * @return string\n     *\/",614],["T_WHITESPACE","\n    ",621],["T_PUBLIC","public",622],["T_WHITESPACE"," ",622],["T_FUNCTION","function",622],["T_WHITESPACE"," ",622],["T_STRING","pack",622],"(",["T_VARIABLE","$source",622],",",["T_WHITESPACE"," ",622],["T_VARIABLE","$destination",622],",",["T_WHITESPACE"," ",622],["T_VARIABLE","$skipRoot",622],["T_WHITESPACE"," ",622],"=",["T_WHITESPACE"," ",622],["T_STRING","false",622],")",["T_WHITESPACE","\n    ",622],"{",["T_WHITESPACE","\n        ",623],["T_VARIABLE","$this",624],["T_OBJECT_OPERATOR","->",624],["T_STRING","_setSkipRoot",624],"(",["T_VARIABLE","$skipRoot",624],")",";",["T_WHITESPACE","\n        ",624],["T_VARIABLE","$source",625],["T_WHITESPACE"," ",625],"=",["T_WHITESPACE"," ",625],["T_STRING","realpath",625],"(",["T_VARIABLE","$source",625],")",";",["T_WHITESPACE","\n        ",625],["T_VARIABLE","$tarData",626],["T_WHITESPACE"," ",626],"=",["T_WHITESPACE"," ",626],["T_VARIABLE","$this",626],["T_OBJECT_OPERATOR","->",626],["T_STRING","_setCurrentPath",626],"(",["T_VARIABLE","$source",626],")",["T_WHITESPACE","\n            ",626],["T_OBJECT_OPERATOR","->",627],["T_STRING","_setDestinationFilePath",627],"(",["T_VARIABLE","$destination",627],")",["T_WHITESPACE","\n            ",627],["T_OBJECT_OPERATOR","->",628],["T_STRING","_setCurrentFile",628],"(",["T_VARIABLE","$source",628],")",";",["T_WHITESPACE","\n\n        ",628],["T_VARIABLE","$this",630],["T_OBJECT_OPERATOR","->",630],["T_STRING","_initWriter",630],"(",")",";",["T_WHITESPACE","\n        ",630],["T_VARIABLE","$this",631],["T_OBJECT_OPERATOR","->",631],["T_STRING","_createTar",631],"(",["T_VARIABLE","$skipRoot",631],",",["T_WHITESPACE"," ",631],["T_STRING","true",631],")",";",["T_WHITESPACE","\n        ",631],["T_VARIABLE","$this",632],["T_OBJECT_OPERATOR","->",632],["T_STRING","_destroyWriter",632],"(",")",";",["T_WHITESPACE","\n\n        ",632],["T_RETURN","return",634],["T_WHITESPACE"," ",634],["T_VARIABLE","$destination",634],";",["T_WHITESPACE","\n    ",634],"}",["T_WHITESPACE","\n\n    ",635],["T_DOC_COMMENT","\/**\n     * Unpack file from TAR (Tape Archiver).\n     *\n     * @param string $source\n     * @param string $destination\n     * @return string\n     *\/",637],["T_WHITESPACE","\n    ",643],["T_PUBLIC","public",644],["T_WHITESPACE"," ",644],["T_FUNCTION","function",644],["T_WHITESPACE"," ",644],["T_STRING","unpack",644],"(",["T_VARIABLE","$source",644],",",["T_WHITESPACE"," ",644],["T_VARIABLE","$destination",644],")",["T_WHITESPACE","\n    ",644],"{",["T_WHITESPACE","\n        ",645],["T_VARIABLE","$this",646],["T_OBJECT_OPERATOR","->",646],["T_STRING","_setCurrentFile",646],"(",["T_VARIABLE","$source",646],")",["T_WHITESPACE","\n            ",646],["T_OBJECT_OPERATOR","->",647],["T_STRING","_setCurrentPath",647],"(",["T_VARIABLE","$source",647],")",";",["T_WHITESPACE","\n\n        ",647],["T_VARIABLE","$this",649],["T_OBJECT_OPERATOR","->",649],["T_STRING","_initReader",649],"(",")",";",["T_WHITESPACE","\n        ",649],["T_VARIABLE","$this",650],["T_OBJECT_OPERATOR","->",650],["T_STRING","_unpackCurrentTar",650],"(",["T_VARIABLE","$destination",650],")",";",["T_WHITESPACE","\n        ",650],["T_VARIABLE","$this",651],["T_OBJECT_OPERATOR","->",651],["T_STRING","_destroyReader",651],"(",")",";",["T_WHITESPACE","\n\n        ",651],["T_RETURN","return",653],["T_WHITESPACE"," ",653],["T_VARIABLE","$destination",653],";",["T_WHITESPACE","\n    ",653],"}",["T_WHITESPACE","\n\n    ",654],["T_DOC_COMMENT","\/**\n     * Extract one file from TAR (Tape Archiver).\n     *\n     * @param string $file\n     * @param string $source\n     * @param string $destination\n     * @return string\n     *\/",656],["T_WHITESPACE","\n    ",663],["T_PUBLIC","public",664],["T_WHITESPACE"," ",664],["T_FUNCTION","function",664],["T_WHITESPACE"," ",664],["T_STRING","extract",664],"(",["T_VARIABLE","$file",664],",",["T_WHITESPACE"," ",664],["T_VARIABLE","$source",664],",",["T_WHITESPACE"," ",664],["T_VARIABLE","$destination",664],")",["T_WHITESPACE","\n    ",664],"{",["T_WHITESPACE","\n        ",665],["T_VARIABLE","$this",666],["T_OBJECT_OPERATOR","->",666],["T_STRING","_setCurrentFile",666],"(",["T_VARIABLE","$source",666],")",";",["T_WHITESPACE","\n        ",666],["T_VARIABLE","$this",667],["T_OBJECT_OPERATOR","->",667],["T_STRING","_initReader",667],"(",")",";",["T_WHITESPACE","\n\n        ",667],["T_VARIABLE","$archiveReader",669],["T_WHITESPACE"," ",669],"=",["T_WHITESPACE"," ",669],["T_VARIABLE","$this",669],["T_OBJECT_OPERATOR","->",669],["T_STRING","_getReader",669],"(",")",";",["T_WHITESPACE","\n        ",669],["T_VARIABLE","$extractedFile",670],["T_WHITESPACE"," ",670],"=",["T_WHITESPACE"," ",670],["T_CONSTANT_ENCAPSED_STRING","''",670],";",["T_WHITESPACE","\n\n        ",670],["T_WHILE","while",672],["T_WHITESPACE"," ",672],"(","!",["T_VARIABLE","$archiveReader",672],["T_OBJECT_OPERATOR","->",672],["T_STRING","eof",672],"(",")",")",["T_WHITESPACE"," ",672],"{",["T_WHITESPACE","\n            ",672],["T_VARIABLE","$header",673],["T_WHITESPACE"," ",673],"=",["T_WHITESPACE"," ",673],["T_VARIABLE","$this",673],["T_OBJECT_OPERATOR","->",673],["T_STRING","_extractFileHeader",673],"(",")",";",["T_WHITESPACE","\n            ",673],["T_IF","if",674],["T_WHITESPACE"," ",674],"(",["T_VARIABLE","$header",674],"[",["T_CONSTANT_ENCAPSED_STRING","'name'",674],"]",["T_WHITESPACE"," ",674],["T_IS_EQUAL","==",674],["T_WHITESPACE"," ",674],["T_VARIABLE","$file",674],")",["T_WHITESPACE"," ",674],"{",["T_WHITESPACE","\n                ",674],["T_VARIABLE","$extractedFile",675],["T_WHITESPACE"," ",675],"=",["T_WHITESPACE"," ",675],["T_VARIABLE","$destination",675],["T_WHITESPACE"," ",675],".",["T_WHITESPACE"," ",675],["T_STRING","basename",675],"(",["T_VARIABLE","$header",675],"[",["T_CONSTANT_ENCAPSED_STRING","'name'",675],"]",")",";",["T_WHITESPACE","\n                ",675],["T_VARIABLE","$this",676],["T_OBJECT_OPERATOR","->",676],["T_STRING","_extractAndWriteFile",676],"(",["T_VARIABLE","$header",676],",",["T_WHITESPACE"," ",676],["T_VARIABLE","$extractedFile",676],")",";",["T_WHITESPACE","\n                ",676],["T_BREAK","break",677],";",["T_WHITESPACE","\n            ",677],"}",["T_WHITESPACE","\n\n            ",678],["T_IF","if",680],["T_WHITESPACE"," ",680],"(",["T_VARIABLE","$header",680],"[",["T_CONSTANT_ENCAPSED_STRING","'type'",680],"]",["T_WHITESPACE"," ",680],["T_IS_NOT_EQUAL","!=",680],["T_WHITESPACE"," ",680],["T_LNUMBER","5",680],")","{",["T_WHITESPACE","\n                ",680],["T_VARIABLE","$skipBytes",681],["T_WHITESPACE"," ",681],"=",["T_WHITESPACE"," ",681],["T_STRING","floor",681],"(","(",["T_VARIABLE","$header",681],"[",["T_CONSTANT_ENCAPSED_STRING","'size'",681],"]",["T_WHITESPACE"," ",681],"+",["T_WHITESPACE"," ",681],["T_STRING","self",681],["T_DOUBLE_COLON","::",681],["T_STRING","TAR_BLOCK_SIZE",681],["T_WHITESPACE"," ",681],"-",["T_WHITESPACE"," ",681],["T_LNUMBER","1",681],")",["T_WHITESPACE"," ",681],"\/",["T_WHITESPACE"," ",681],["T_STRING","self",681],["T_DOUBLE_COLON","::",681],["T_STRING","TAR_BLOCK_SIZE",681],")",["T_WHITESPACE","\n                    ",681],"*",["T_WHITESPACE"," ",682],["T_STRING","self",682],["T_DOUBLE_COLON","::",682],["T_STRING","TAR_BLOCK_SIZE",682],";",["T_WHITESPACE","\n                ",682],["T_VARIABLE","$archiveReader",683],["T_OBJECT_OPERATOR","->",683],["T_STRING","read",683],"(",["T_VARIABLE","$skipBytes",683],")",";",["T_WHITESPACE","\n            ",683],"}",["T_WHITESPACE","\n        ",684],"}",["T_WHITESPACE","\n\n        ",685],["T_VARIABLE","$this",687],["T_OBJECT_OPERATOR","->",687],["T_STRING","_destroyReader",687],"(",")",";",["T_WHITESPACE","\n        ",687],["T_RETURN","return",688],["T_WHITESPACE"," ",688],["T_VARIABLE","$extractedFile",688],";",["T_WHITESPACE","\n    ",688],"}",["T_WHITESPACE","\n",689],"}",["T_WHITESPACE","\n",690]]
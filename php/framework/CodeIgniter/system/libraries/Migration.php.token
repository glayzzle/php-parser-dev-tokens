[["T_OPEN_TAG","<?php\n",1],["T_DOC_COMMENT","\/**\n * CodeIgniter\n *\n * An open source application development framework for PHP\n *\n * This content is released under the MIT License (MIT)\n *\n * Copyright (c) 2014 - 2017, British Columbia Institute of Technology\n *\n * Permission is hereby granted, free of charge, to any person obtaining a copy\n * of this software and associated documentation files (the \"Software\"), to deal\n * in the Software without restriction, including without limitation the rights\n * to use, copy, modify, merge, publish, distribute, sublicense, and\/or sell\n * copies of the Software, and to permit persons to whom the Software is\n * furnished to do so, subject to the following conditions:\n *\n * The above copyright notice and this permission notice shall be included in\n * all copies or substantial portions of the Software.\n *\n * THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN\n * THE SOFTWARE.\n *\n * @package\tCodeIgniter\n * @author\tEllisLab Dev Team\n * @copyright\tCopyright (c) 2008 - 2014, EllisLab, Inc. (https:\/\/ellislab.com\/)\n * @copyright\tCopyright (c) 2014 - 2017, British Columbia Institute of Technology (http:\/\/bcit.ca\/)\n * @license\thttp:\/\/opensource.org\/licenses\/MIT\tMIT License\n * @link\thttps:\/\/codeigniter.com\n * @since\tVersion 3.0.0\n * @filesource\n *\/",2],["T_WHITESPACE","\n",37],["T_STRING","defined",38],"(",["T_CONSTANT_ENCAPSED_STRING","'BASEPATH'",38],")",["T_WHITESPACE"," ",38],["T_LOGICAL_OR","OR",38],["T_WHITESPACE"," ",38],["T_EXIT","exit",38],"(",["T_CONSTANT_ENCAPSED_STRING","'No direct script access allowed'",38],")",";",["T_WHITESPACE","\n\n",38],["T_DOC_COMMENT","\/**\n * Migration Class\n *\n * All migrations should implement this, forces up() and down() and gives\n * access to the CI super-global.\n *\n * @package\t\tCodeIgniter\n * @subpackage\tLibraries\n * @category\tLibraries\n * @author\t\tReactor Engineers\n * @link\n *\/",40],["T_WHITESPACE","\n",51],["T_CLASS","class",52],["T_WHITESPACE"," ",52],["T_STRING","CI_Migration",52],["T_WHITESPACE"," ",52],"{",["T_WHITESPACE","\n\n\t",52],["T_DOC_COMMENT","\/**\n\t * Whether the library is enabled\n\t *\n\t * @var bool\n\t *\/",54],["T_WHITESPACE","\n\t",58],["T_PROTECTED","protected",59],["T_WHITESPACE"," ",59],["T_VARIABLE","$_migration_enabled",59],["T_WHITESPACE"," ",59],"=",["T_WHITESPACE"," ",59],["T_STRING","FALSE",59],";",["T_WHITESPACE","\n\n\t",59],["T_DOC_COMMENT","\/**\n\t * Migration numbering type\n\t *\n\t * @var\tbool\n\t *\/",61],["T_WHITESPACE","\n\t",65],["T_PROTECTED","protected",66],["T_WHITESPACE"," ",66],["T_VARIABLE","$_migration_type",66],["T_WHITESPACE"," ",66],"=",["T_WHITESPACE"," ",66],["T_CONSTANT_ENCAPSED_STRING","'sequential'",66],";",["T_WHITESPACE","\n\n\t",66],["T_DOC_COMMENT","\/**\n\t * Path to migration classes\n\t *\n\t * @var string\n\t *\/",68],["T_WHITESPACE","\n\t",72],["T_PROTECTED","protected",73],["T_WHITESPACE"," ",73],["T_VARIABLE","$_migration_path",73],["T_WHITESPACE"," ",73],"=",["T_WHITESPACE"," ",73],["T_STRING","NULL",73],";",["T_WHITESPACE","\n\n\t",73],["T_DOC_COMMENT","\/**\n\t * Current migration version\n\t *\n\t * @var mixed\n\t *\/",75],["T_WHITESPACE","\n\t",79],["T_PROTECTED","protected",80],["T_WHITESPACE"," ",80],["T_VARIABLE","$_migration_version",80],["T_WHITESPACE"," ",80],"=",["T_WHITESPACE"," ",80],["T_LNUMBER","0",80],";",["T_WHITESPACE","\n\n\t",80],["T_DOC_COMMENT","\/**\n\t * Database table with migration info\n\t *\n\t * @var string\n\t *\/",82],["T_WHITESPACE","\n\t",86],["T_PROTECTED","protected",87],["T_WHITESPACE"," ",87],["T_VARIABLE","$_migration_table",87],["T_WHITESPACE"," ",87],"=",["T_WHITESPACE"," ",87],["T_CONSTANT_ENCAPSED_STRING","'migrations'",87],";",["T_WHITESPACE","\n\n\t",87],["T_DOC_COMMENT","\/**\n\t * Whether to automatically run migrations\n\t *\n\t * @var\tbool\n\t *\/",89],["T_WHITESPACE","\n\t",93],["T_PROTECTED","protected",94],["T_WHITESPACE"," ",94],["T_VARIABLE","$_migration_auto_latest",94],["T_WHITESPACE"," ",94],"=",["T_WHITESPACE"," ",94],["T_STRING","FALSE",94],";",["T_WHITESPACE","\n\n\t",94],["T_DOC_COMMENT","\/**\n\t * Migration basename regex\n\t *\n\t * @var string\n\t *\/",96],["T_WHITESPACE","\n\t",100],["T_PROTECTED","protected",101],["T_WHITESPACE"," ",101],["T_VARIABLE","$_migration_regex",101],";",["T_WHITESPACE","\n\n\t",101],["T_DOC_COMMENT","\/**\n\t * Error message\n\t *\n\t * @var string\n\t *\/",103],["T_WHITESPACE","\n\t",107],["T_PROTECTED","protected",108],["T_WHITESPACE"," ",108],["T_VARIABLE","$_error_string",108],["T_WHITESPACE"," ",108],"=",["T_WHITESPACE"," ",108],["T_CONSTANT_ENCAPSED_STRING","''",108],";",["T_WHITESPACE","\n\n\t",108],["T_DOC_COMMENT","\/**\n\t * Initialize Migration Class\n\t *\n\t * @param\tarray\t$config\n\t * @return\tvoid\n\t *\/",110],["T_WHITESPACE","\n\t",115],["T_PUBLIC","public",116],["T_WHITESPACE"," ",116],["T_FUNCTION","function",116],["T_WHITESPACE"," ",116],["T_STRING","__construct",116],"(",["T_VARIABLE","$config",116],["T_WHITESPACE"," ",116],"=",["T_WHITESPACE"," ",116],["T_ARRAY","array",116],"(",")",")",["T_WHITESPACE","\n\t",116],"{",["T_WHITESPACE","\n\t\t",117],["T_COMMENT","\/\/ Only run this constructor on main library load\n",118],["T_WHITESPACE","\t\t",119],["T_IF","if",119],["T_WHITESPACE"," ",119],"(",["T_WHITESPACE"," ",119],"!",["T_WHITESPACE"," ",119],["T_STRING","in_array",119],"(",["T_STRING","get_class",119],"(",["T_VARIABLE","$this",119],")",",",["T_WHITESPACE"," ",119],["T_ARRAY","array",119],"(",["T_CONSTANT_ENCAPSED_STRING","'CI_Migration'",119],",",["T_WHITESPACE"," ",119],["T_STRING","config_item",119],"(",["T_CONSTANT_ENCAPSED_STRING","'subclass_prefix'",119],")",".",["T_CONSTANT_ENCAPSED_STRING","'Migration'",119],")",",",["T_WHITESPACE"," ",119],["T_STRING","TRUE",119],")",")",["T_WHITESPACE","\n\t\t",119],"{",["T_WHITESPACE","\n\t\t\t",120],["T_RETURN","return",121],";",["T_WHITESPACE","\n\t\t",121],"}",["T_WHITESPACE","\n\n\t\t",122],["T_FOREACH","foreach",124],["T_WHITESPACE"," ",124],"(",["T_VARIABLE","$config",124],["T_WHITESPACE"," ",124],["T_AS","as",124],["T_WHITESPACE"," ",124],["T_VARIABLE","$key",124],["T_WHITESPACE"," ",124],["T_DOUBLE_ARROW","=>",124],["T_WHITESPACE"," ",124],["T_VARIABLE","$val",124],")",["T_WHITESPACE","\n\t\t",124],"{",["T_WHITESPACE","\n\t\t\t",125],["T_VARIABLE","$this",126],["T_OBJECT_OPERATOR","->",126],"{",["T_CONSTANT_ENCAPSED_STRING","'_'",126],".",["T_VARIABLE","$key",126],"}",["T_WHITESPACE"," ",126],"=",["T_WHITESPACE"," ",126],["T_VARIABLE","$val",126],";",["T_WHITESPACE","\n\t\t",126],"}",["T_WHITESPACE","\n\n\t\t",127],["T_STRING","log_message",129],"(",["T_CONSTANT_ENCAPSED_STRING","'info'",129],",",["T_WHITESPACE"," ",129],["T_CONSTANT_ENCAPSED_STRING","'Migrations Class Initialized'",129],")",";",["T_WHITESPACE","\n\n\t\t",129],["T_COMMENT","\/\/ Are they trying to use migrations while it is disabled?\n",131],["T_WHITESPACE","\t\t",132],["T_IF","if",132],["T_WHITESPACE"," ",132],"(",["T_VARIABLE","$this",132],["T_OBJECT_OPERATOR","->",132],["T_STRING","_migration_enabled",132],["T_WHITESPACE"," ",132],["T_IS_NOT_IDENTICAL","!==",132],["T_WHITESPACE"," ",132],["T_STRING","TRUE",132],")",["T_WHITESPACE","\n\t\t",132],"{",["T_WHITESPACE","\n\t\t\t",133],["T_STRING","show_error",134],"(",["T_CONSTANT_ENCAPSED_STRING","'Migrations has been loaded but is disabled or set up incorrectly.'",134],")",";",["T_WHITESPACE","\n\t\t",134],"}",["T_WHITESPACE","\n\n\t\t",135],["T_COMMENT","\/\/ If not set, set it\n",137],["T_WHITESPACE","\t\t",138],["T_VARIABLE","$this",138],["T_OBJECT_OPERATOR","->",138],["T_STRING","_migration_path",138],["T_WHITESPACE"," ",138],["T_IS_NOT_IDENTICAL","!==",138],["T_WHITESPACE"," ",138],["T_CONSTANT_ENCAPSED_STRING","''",138],["T_WHITESPACE"," ",138],["T_LOGICAL_OR","OR",138],["T_WHITESPACE"," ",138],["T_VARIABLE","$this",138],["T_OBJECT_OPERATOR","->",138],["T_STRING","_migration_path",138],["T_WHITESPACE"," ",138],"=",["T_WHITESPACE"," ",138],["T_STRING","APPPATH",138],".",["T_CONSTANT_ENCAPSED_STRING","'migrations\/'",138],";",["T_WHITESPACE","\n\n\t\t",138],["T_COMMENT","\/\/ Add trailing slash if not set\n",140],["T_WHITESPACE","\t\t",141],["T_VARIABLE","$this",141],["T_OBJECT_OPERATOR","->",141],["T_STRING","_migration_path",141],["T_WHITESPACE"," ",141],"=",["T_WHITESPACE"," ",141],["T_STRING","rtrim",141],"(",["T_VARIABLE","$this",141],["T_OBJECT_OPERATOR","->",141],["T_STRING","_migration_path",141],",",["T_WHITESPACE"," ",141],["T_CONSTANT_ENCAPSED_STRING","'\/'",141],")",".",["T_CONSTANT_ENCAPSED_STRING","'\/'",141],";",["T_WHITESPACE","\n\n\t\t",141],["T_COMMENT","\/\/ Load migration language\n",143],["T_WHITESPACE","\t\t",144],["T_VARIABLE","$this",144],["T_OBJECT_OPERATOR","->",144],["T_STRING","lang",144],["T_OBJECT_OPERATOR","->",144],["T_STRING","load",144],"(",["T_CONSTANT_ENCAPSED_STRING","'migration'",144],")",";",["T_WHITESPACE","\n\n\t\t",144],["T_COMMENT","\/\/ They'll probably be using dbforge\n",146],["T_WHITESPACE","\t\t",147],["T_VARIABLE","$this",147],["T_OBJECT_OPERATOR","->",147],["T_STRING","load",147],["T_OBJECT_OPERATOR","->",147],["T_STRING","dbforge",147],"(",")",";",["T_WHITESPACE","\n\n\t\t",147],["T_COMMENT","\/\/ Make sure the migration table name was set.\n",149],["T_WHITESPACE","\t\t",150],["T_IF","if",150],["T_WHITESPACE"," ",150],"(",["T_EMPTY","empty",150],"(",["T_VARIABLE","$this",150],["T_OBJECT_OPERATOR","->",150],["T_STRING","_migration_table",150],")",")",["T_WHITESPACE","\n\t\t",150],"{",["T_WHITESPACE","\n\t\t\t",151],["T_STRING","show_error",152],"(",["T_CONSTANT_ENCAPSED_STRING","'Migrations configuration file (migration.php) must have \"migration_table\" set.'",152],")",";",["T_WHITESPACE","\n\t\t",152],"}",["T_WHITESPACE","\n\n\t\t",153],["T_COMMENT","\/\/ Migration basename regex\n",155],["T_WHITESPACE","\t\t",156],["T_VARIABLE","$this",156],["T_OBJECT_OPERATOR","->",156],["T_STRING","_migration_regex",156],["T_WHITESPACE"," ",156],"=",["T_WHITESPACE"," ",156],"(",["T_VARIABLE","$this",156],["T_OBJECT_OPERATOR","->",156],["T_STRING","_migration_type",156],["T_WHITESPACE"," ",156],["T_IS_IDENTICAL","===",156],["T_WHITESPACE"," ",156],["T_CONSTANT_ENCAPSED_STRING","'timestamp'",156],")",["T_WHITESPACE","\n\t\t\t",156],"?",["T_WHITESPACE"," ",157],["T_CONSTANT_ENCAPSED_STRING","'\/^\\d{14}_(\\w+)$\/'",157],["T_WHITESPACE","\n\t\t\t",157],":",["T_WHITESPACE"," ",158],["T_CONSTANT_ENCAPSED_STRING","'\/^\\d{3}_(\\w+)$\/'",158],";",["T_WHITESPACE","\n\n\t\t",158],["T_COMMENT","\/\/ Make sure a valid migration numbering type was set.\n",160],["T_WHITESPACE","\t\t",161],["T_IF","if",161],["T_WHITESPACE"," ",161],"(",["T_WHITESPACE"," ",161],"!",["T_WHITESPACE"," ",161],["T_STRING","in_array",161],"(",["T_VARIABLE","$this",161],["T_OBJECT_OPERATOR","->",161],["T_STRING","_migration_type",161],",",["T_WHITESPACE"," ",161],["T_ARRAY","array",161],"(",["T_CONSTANT_ENCAPSED_STRING","'sequential'",161],",",["T_WHITESPACE"," ",161],["T_CONSTANT_ENCAPSED_STRING","'timestamp'",161],")",")",")",["T_WHITESPACE","\n\t\t",161],"{",["T_WHITESPACE","\n\t\t\t",162],["T_STRING","show_error",163],"(",["T_CONSTANT_ENCAPSED_STRING","'An invalid migration numbering type was specified: '",163],".",["T_VARIABLE","$this",163],["T_OBJECT_OPERATOR","->",163],["T_STRING","_migration_type",163],")",";",["T_WHITESPACE","\n\t\t",163],"}",["T_WHITESPACE","\n\n\t\t",164],["T_COMMENT","\/\/ If the migrations table is missing, make it\n",166],["T_WHITESPACE","\t\t",167],["T_IF","if",167],["T_WHITESPACE"," ",167],"(",["T_WHITESPACE"," ",167],"!",["T_WHITESPACE"," ",167],["T_VARIABLE","$this",167],["T_OBJECT_OPERATOR","->",167],["T_STRING","db",167],["T_OBJECT_OPERATOR","->",167],["T_STRING","table_exists",167],"(",["T_VARIABLE","$this",167],["T_OBJECT_OPERATOR","->",167],["T_STRING","_migration_table",167],")",")",["T_WHITESPACE","\n\t\t",167],"{",["T_WHITESPACE","\n\t\t\t",168],["T_VARIABLE","$this",169],["T_OBJECT_OPERATOR","->",169],["T_STRING","dbforge",169],["T_OBJECT_OPERATOR","->",169],["T_STRING","add_field",169],"(",["T_ARRAY","array",169],"(",["T_WHITESPACE","\n\t\t\t\t",169],["T_CONSTANT_ENCAPSED_STRING","'version'",170],["T_WHITESPACE"," ",170],["T_DOUBLE_ARROW","=>",170],["T_WHITESPACE"," ",170],["T_ARRAY","array",170],"(",["T_CONSTANT_ENCAPSED_STRING","'type'",170],["T_WHITESPACE"," ",170],["T_DOUBLE_ARROW","=>",170],["T_WHITESPACE"," ",170],["T_CONSTANT_ENCAPSED_STRING","'BIGINT'",170],",",["T_WHITESPACE"," ",170],["T_CONSTANT_ENCAPSED_STRING","'constraint'",170],["T_WHITESPACE"," ",170],["T_DOUBLE_ARROW","=>",170],["T_WHITESPACE"," ",170],["T_LNUMBER","20",170],")",",",["T_WHITESPACE","\n\t\t\t",170],")",")",";",["T_WHITESPACE","\n\n\t\t\t",171],["T_VARIABLE","$this",173],["T_OBJECT_OPERATOR","->",173],["T_STRING","dbforge",173],["T_OBJECT_OPERATOR","->",173],["T_STRING","create_table",173],"(",["T_VARIABLE","$this",173],["T_OBJECT_OPERATOR","->",173],["T_STRING","_migration_table",173],",",["T_WHITESPACE"," ",173],["T_STRING","TRUE",173],")",";",["T_WHITESPACE","\n\n\t\t\t",173],["T_VARIABLE","$this",175],["T_OBJECT_OPERATOR","->",175],["T_STRING","db",175],["T_OBJECT_OPERATOR","->",175],["T_STRING","insert",175],"(",["T_VARIABLE","$this",175],["T_OBJECT_OPERATOR","->",175],["T_STRING","_migration_table",175],",",["T_WHITESPACE"," ",175],["T_ARRAY","array",175],"(",["T_CONSTANT_ENCAPSED_STRING","'version'",175],["T_WHITESPACE"," ",175],["T_DOUBLE_ARROW","=>",175],["T_WHITESPACE"," ",175],["T_LNUMBER","0",175],")",")",";",["T_WHITESPACE","\n\t\t",175],"}",["T_WHITESPACE","\n\n\t\t",176],["T_COMMENT","\/\/ Do we auto migrate to the latest migration?\n",178],["T_WHITESPACE","\t\t",179],["T_IF","if",179],["T_WHITESPACE"," ",179],"(",["T_VARIABLE","$this",179],["T_OBJECT_OPERATOR","->",179],["T_STRING","_migration_auto_latest",179],["T_WHITESPACE"," ",179],["T_IS_IDENTICAL","===",179],["T_WHITESPACE"," ",179],["T_STRING","TRUE",179],["T_WHITESPACE"," ",179],["T_BOOLEAN_AND","&&",179],["T_WHITESPACE"," ",179],"!",["T_WHITESPACE"," ",179],["T_VARIABLE","$this",179],["T_OBJECT_OPERATOR","->",179],["T_STRING","latest",179],"(",")",")",["T_WHITESPACE","\n\t\t",179],"{",["T_WHITESPACE","\n\t\t\t",180],["T_STRING","show_error",181],"(",["T_VARIABLE","$this",181],["T_OBJECT_OPERATOR","->",181],["T_STRING","error_string",181],"(",")",")",";",["T_WHITESPACE","\n\t\t",181],"}",["T_WHITESPACE","\n\t",182],"}",["T_WHITESPACE","\n\n\t",183],["T_COMMENT","\/\/ --------------------------------------------------------------------\n",185],["T_WHITESPACE","\n\t",186],["T_DOC_COMMENT","\/**\n\t * Migrate to a schema version\n\t *\n\t * Calls each migration step required to get to the schema version of\n\t * choice\n\t *\n\t * @param\tstring\t$target_version\tTarget schema version\n\t * @return\tmixed\tTRUE if no migrations are found, current version string on success, FALSE on failure\n\t *\/",187],["T_WHITESPACE","\n\t",195],["T_PUBLIC","public",196],["T_WHITESPACE"," ",196],["T_FUNCTION","function",196],["T_WHITESPACE"," ",196],["T_STRING","version",196],"(",["T_VARIABLE","$target_version",196],")",["T_WHITESPACE","\n\t",196],"{",["T_WHITESPACE","\n\t\t",197],["T_COMMENT","\/\/ Note: We use strings, so that timestamp versions work on 32-bit systems\n",198],["T_WHITESPACE","\t\t",199],["T_VARIABLE","$current_version",199],["T_WHITESPACE"," ",199],"=",["T_WHITESPACE"," ",199],["T_VARIABLE","$this",199],["T_OBJECT_OPERATOR","->",199],["T_STRING","_get_version",199],"(",")",";",["T_WHITESPACE","\n\n\t\t",199],["T_IF","if",201],["T_WHITESPACE"," ",201],"(",["T_VARIABLE","$this",201],["T_OBJECT_OPERATOR","->",201],["T_STRING","_migration_type",201],["T_WHITESPACE"," ",201],["T_IS_IDENTICAL","===",201],["T_WHITESPACE"," ",201],["T_CONSTANT_ENCAPSED_STRING","'sequential'",201],")",["T_WHITESPACE","\n\t\t",201],"{",["T_WHITESPACE","\n\t\t\t",202],["T_VARIABLE","$target_version",203],["T_WHITESPACE"," ",203],"=",["T_WHITESPACE"," ",203],["T_STRING","sprintf",203],"(",["T_CONSTANT_ENCAPSED_STRING","'%03d'",203],",",["T_WHITESPACE"," ",203],["T_VARIABLE","$target_version",203],")",";",["T_WHITESPACE","\n\t\t",203],"}",["T_WHITESPACE","\n\t\t",204],["T_ELSE","else",205],["T_WHITESPACE","\n\t\t",205],"{",["T_WHITESPACE","\n\t\t\t",206],["T_VARIABLE","$target_version",207],["T_WHITESPACE"," ",207],"=",["T_WHITESPACE"," ",207],["T_STRING_CAST","(string)",207],["T_WHITESPACE"," ",207],["T_VARIABLE","$target_version",207],";",["T_WHITESPACE","\n\t\t",207],"}",["T_WHITESPACE","\n\n\t\t",208],["T_VARIABLE","$migrations",210],["T_WHITESPACE"," ",210],"=",["T_WHITESPACE"," ",210],["T_VARIABLE","$this",210],["T_OBJECT_OPERATOR","->",210],["T_STRING","find_migrations",210],"(",")",";",["T_WHITESPACE","\n\n\t\t",210],["T_IF","if",212],["T_WHITESPACE"," ",212],"(",["T_VARIABLE","$target_version",212],["T_WHITESPACE"," ",212],">",["T_WHITESPACE"," ",212],["T_LNUMBER","0",212],["T_WHITESPACE"," ",212],["T_BOOLEAN_AND","&&",212],["T_WHITESPACE"," ",212],"!",["T_WHITESPACE"," ",212],["T_ISSET","isset",212],"(",["T_VARIABLE","$migrations",212],"[",["T_VARIABLE","$target_version",212],"]",")",")",["T_WHITESPACE","\n\t\t",212],"{",["T_WHITESPACE","\n\t\t\t",213],["T_VARIABLE","$this",214],["T_OBJECT_OPERATOR","->",214],["T_STRING","_error_string",214],["T_WHITESPACE"," ",214],"=",["T_WHITESPACE"," ",214],["T_STRING","sprintf",214],"(",["T_VARIABLE","$this",214],["T_OBJECT_OPERATOR","->",214],["T_STRING","lang",214],["T_OBJECT_OPERATOR","->",214],["T_STRING","line",214],"(",["T_CONSTANT_ENCAPSED_STRING","'migration_not_found'",214],")",",",["T_WHITESPACE"," ",214],["T_VARIABLE","$target_version",214],")",";",["T_WHITESPACE","\n\t\t\t",214],["T_RETURN","return",215],["T_WHITESPACE"," ",215],["T_STRING","FALSE",215],";",["T_WHITESPACE","\n\t\t",215],"}",["T_WHITESPACE","\n\n\t\t",216],["T_IF","if",218],["T_WHITESPACE"," ",218],"(",["T_VARIABLE","$target_version",218],["T_WHITESPACE"," ",218],">",["T_WHITESPACE"," ",218],["T_VARIABLE","$current_version",218],")",["T_WHITESPACE","\n\t\t",218],"{",["T_WHITESPACE","\n\t\t\t",219],["T_VARIABLE","$method",220],["T_WHITESPACE"," ",220],"=",["T_WHITESPACE"," ",220],["T_CONSTANT_ENCAPSED_STRING","'up'",220],";",["T_WHITESPACE","\n\t\t",220],"}",["T_WHITESPACE","\n\t\t",221],["T_ELSEIF","elseif",222],["T_WHITESPACE"," ",222],"(",["T_VARIABLE","$target_version",222],["T_WHITESPACE"," ",222],"<",["T_WHITESPACE"," ",222],["T_VARIABLE","$current_version",222],")",["T_WHITESPACE","\n\t\t",222],"{",["T_WHITESPACE","\n\t\t\t",223],["T_VARIABLE","$method",224],["T_WHITESPACE"," ",224],"=",["T_WHITESPACE"," ",224],["T_CONSTANT_ENCAPSED_STRING","'down'",224],";",["T_WHITESPACE","\n\t\t\t",224],["T_COMMENT","\/\/ We need this so that migrations are applied in reverse order\n",225],["T_WHITESPACE","\t\t\t",226],["T_STRING","krsort",226],"(",["T_VARIABLE","$migrations",226],")",";",["T_WHITESPACE","\n\t\t",226],"}",["T_WHITESPACE","\n\t\t",227],["T_ELSE","else",228],["T_WHITESPACE","\n\t\t",228],"{",["T_WHITESPACE","\n\t\t\t",229],["T_COMMENT","\/\/ Well, there's nothing to migrate then ...\n",230],["T_WHITESPACE","\t\t\t",231],["T_RETURN","return",231],["T_WHITESPACE"," ",231],["T_STRING","TRUE",231],";",["T_WHITESPACE","\n\t\t",231],"}",["T_WHITESPACE","\n\n\t\t",232],["T_COMMENT","\/\/ Validate all available migrations within our target range.\n",234],["T_WHITESPACE","\t\t",235],["T_COMMENT","\/\/\n",235],["T_WHITESPACE","\t\t",236],["T_COMMENT","\/\/ Unfortunately, we'll have to use another loop to run them\n",236],["T_WHITESPACE","\t\t",237],["T_COMMENT","\/\/ in order to avoid leaving the procedure in a broken state.\n",237],["T_WHITESPACE","\t\t",238],["T_COMMENT","\/\/\n",238],["T_WHITESPACE","\t\t",239],["T_COMMENT","\/\/ See https:\/\/github.com\/bcit-ci\/CodeIgniter\/issues\/4539\n",239],["T_WHITESPACE","\t\t",240],["T_VARIABLE","$pending",240],["T_WHITESPACE"," ",240],"=",["T_WHITESPACE"," ",240],["T_ARRAY","array",240],"(",")",";",["T_WHITESPACE","\n\t\t",240],["T_FOREACH","foreach",241],["T_WHITESPACE"," ",241],"(",["T_VARIABLE","$migrations",241],["T_WHITESPACE"," ",241],["T_AS","as",241],["T_WHITESPACE"," ",241],["T_VARIABLE","$number",241],["T_WHITESPACE"," ",241],["T_DOUBLE_ARROW","=>",241],["T_WHITESPACE"," ",241],["T_VARIABLE","$file",241],")",["T_WHITESPACE","\n\t\t",241],"{",["T_WHITESPACE","\n\t\t\t",242],["T_COMMENT","\/\/ Ignore versions out of our range.\n",243],["T_WHITESPACE","\t\t\t",244],["T_COMMENT","\/\/\n",244],["T_WHITESPACE","\t\t\t",245],["T_COMMENT","\/\/ Because we've previously sorted the $migrations array depending on the direction,\n",245],["T_WHITESPACE","\t\t\t",246],["T_COMMENT","\/\/ we can safely break the loop once we reach $target_version ...\n",246],["T_WHITESPACE","\t\t\t",247],["T_IF","if",247],["T_WHITESPACE"," ",247],"(",["T_VARIABLE","$method",247],["T_WHITESPACE"," ",247],["T_IS_IDENTICAL","===",247],["T_WHITESPACE"," ",247],["T_CONSTANT_ENCAPSED_STRING","'up'",247],")",["T_WHITESPACE","\n\t\t\t",247],"{",["T_WHITESPACE","\n\t\t\t\t",248],["T_IF","if",249],["T_WHITESPACE"," ",249],"(",["T_VARIABLE","$number",249],["T_WHITESPACE"," ",249],["T_IS_SMALLER_OR_EQUAL","<=",249],["T_WHITESPACE"," ",249],["T_VARIABLE","$current_version",249],")",["T_WHITESPACE","\n\t\t\t\t",249],"{",["T_WHITESPACE","\n\t\t\t\t\t",250],["T_CONTINUE","continue",251],";",["T_WHITESPACE","\n\t\t\t\t",251],"}",["T_WHITESPACE","\n\t\t\t\t",252],["T_ELSEIF","elseif",253],["T_WHITESPACE"," ",253],"(",["T_VARIABLE","$number",253],["T_WHITESPACE"," ",253],">",["T_WHITESPACE"," ",253],["T_VARIABLE","$target_version",253],")",["T_WHITESPACE","\n\t\t\t\t",253],"{",["T_WHITESPACE","\n\t\t\t\t\t",254],["T_BREAK","break",255],";",["T_WHITESPACE","\n\t\t\t\t",255],"}",["T_WHITESPACE","\n\t\t\t",256],"}",["T_WHITESPACE","\n\t\t\t",257],["T_ELSE","else",258],["T_WHITESPACE","\n\t\t\t",258],"{",["T_WHITESPACE","\n\t\t\t\t",259],["T_IF","if",260],["T_WHITESPACE"," ",260],"(",["T_VARIABLE","$number",260],["T_WHITESPACE"," ",260],">",["T_WHITESPACE"," ",260],["T_VARIABLE","$current_version",260],")",["T_WHITESPACE","\n\t\t\t\t",260],"{",["T_WHITESPACE","\n\t\t\t\t\t",261],["T_CONTINUE","continue",262],";",["T_WHITESPACE","\n\t\t\t\t",262],"}",["T_WHITESPACE","\n\t\t\t\t",263],["T_ELSEIF","elseif",264],["T_WHITESPACE"," ",264],"(",["T_VARIABLE","$number",264],["T_WHITESPACE"," ",264],["T_IS_SMALLER_OR_EQUAL","<=",264],["T_WHITESPACE"," ",264],["T_VARIABLE","$target_version",264],")",["T_WHITESPACE","\n\t\t\t\t",264],"{",["T_WHITESPACE","\n\t\t\t\t\t",265],["T_BREAK","break",266],";",["T_WHITESPACE","\n\t\t\t\t",266],"}",["T_WHITESPACE","\n\t\t\t",267],"}",["T_WHITESPACE","\n\n\t\t\t",268],["T_COMMENT","\/\/ Check for sequence gaps\n",270],["T_WHITESPACE","\t\t\t",271],["T_IF","if",271],["T_WHITESPACE"," ",271],"(",["T_VARIABLE","$this",271],["T_OBJECT_OPERATOR","->",271],["T_STRING","_migration_type",271],["T_WHITESPACE"," ",271],["T_IS_IDENTICAL","===",271],["T_WHITESPACE"," ",271],["T_CONSTANT_ENCAPSED_STRING","'sequential'",271],")",["T_WHITESPACE","\n\t\t\t",271],"{",["T_WHITESPACE","\n\t\t\t\t",272],["T_IF","if",273],["T_WHITESPACE"," ",273],"(",["T_ISSET","isset",273],"(",["T_VARIABLE","$previous",273],")",["T_WHITESPACE"," ",273],["T_BOOLEAN_AND","&&",273],["T_WHITESPACE"," ",273],["T_STRING","abs",273],"(",["T_VARIABLE","$number",273],["T_WHITESPACE"," ",273],"-",["T_WHITESPACE"," ",273],["T_VARIABLE","$previous",273],")",["T_WHITESPACE"," ",273],">",["T_WHITESPACE"," ",273],["T_LNUMBER","1",273],")",["T_WHITESPACE","\n\t\t\t\t",273],"{",["T_WHITESPACE","\n\t\t\t\t\t",274],["T_VARIABLE","$this",275],["T_OBJECT_OPERATOR","->",275],["T_STRING","_error_string",275],["T_WHITESPACE"," ",275],"=",["T_WHITESPACE"," ",275],["T_STRING","sprintf",275],"(",["T_VARIABLE","$this",275],["T_OBJECT_OPERATOR","->",275],["T_STRING","lang",275],["T_OBJECT_OPERATOR","->",275],["T_STRING","line",275],"(",["T_CONSTANT_ENCAPSED_STRING","'migration_sequence_gap'",275],")",",",["T_WHITESPACE"," ",275],["T_VARIABLE","$number",275],")",";",["T_WHITESPACE","\n\t\t\t\t\t",275],["T_RETURN","return",276],["T_WHITESPACE"," ",276],["T_STRING","FALSE",276],";",["T_WHITESPACE","\n\t\t\t\t",276],"}",["T_WHITESPACE","\n\n\t\t\t\t",277],["T_VARIABLE","$previous",279],["T_WHITESPACE"," ",279],"=",["T_WHITESPACE"," ",279],["T_VARIABLE","$number",279],";",["T_WHITESPACE","\n\t\t\t",279],"}",["T_WHITESPACE","\n\n\t\t\t",280],["T_INCLUDE_ONCE","include_once",282],"(",["T_VARIABLE","$file",282],")",";",["T_WHITESPACE","\n\t\t\t",282],["T_VARIABLE","$class",283],["T_WHITESPACE"," ",283],"=",["T_WHITESPACE"," ",283],["T_CONSTANT_ENCAPSED_STRING","'Migration_'",283],".",["T_STRING","ucfirst",283],"(",["T_STRING","strtolower",283],"(",["T_VARIABLE","$this",283],["T_OBJECT_OPERATOR","->",283],["T_STRING","_get_migration_name",283],"(",["T_STRING","basename",283],"(",["T_VARIABLE","$file",283],",",["T_WHITESPACE"," ",283],["T_CONSTANT_ENCAPSED_STRING","'.php'",283],")",")",")",")",";",["T_WHITESPACE","\n\n\t\t\t",283],["T_COMMENT","\/\/ Validate the migration file structure\n",285],["T_WHITESPACE","\t\t\t",286],["T_IF","if",286],["T_WHITESPACE"," ",286],"(",["T_WHITESPACE"," ",286],"!",["T_WHITESPACE"," ",286],["T_STRING","class_exists",286],"(",["T_VARIABLE","$class",286],",",["T_WHITESPACE"," ",286],["T_STRING","FALSE",286],")",")",["T_WHITESPACE","\n\t\t\t",286],"{",["T_WHITESPACE","\n\t\t\t\t",287],["T_VARIABLE","$this",288],["T_OBJECT_OPERATOR","->",288],["T_STRING","_error_string",288],["T_WHITESPACE"," ",288],"=",["T_WHITESPACE"," ",288],["T_STRING","sprintf",288],"(",["T_VARIABLE","$this",288],["T_OBJECT_OPERATOR","->",288],["T_STRING","lang",288],["T_OBJECT_OPERATOR","->",288],["T_STRING","line",288],"(",["T_CONSTANT_ENCAPSED_STRING","'migration_class_doesnt_exist'",288],")",",",["T_WHITESPACE"," ",288],["T_VARIABLE","$class",288],")",";",["T_WHITESPACE","\n\t\t\t\t",288],["T_RETURN","return",289],["T_WHITESPACE"," ",289],["T_STRING","FALSE",289],";",["T_WHITESPACE","\n\t\t\t",289],"}",["T_WHITESPACE","\n\t\t\t",290],["T_ELSEIF","elseif",291],["T_WHITESPACE"," ",291],"(",["T_WHITESPACE"," ",291],"!",["T_WHITESPACE"," ",291],["T_STRING","is_callable",291],"(",["T_ARRAY","array",291],"(",["T_VARIABLE","$class",291],",",["T_WHITESPACE"," ",291],["T_VARIABLE","$method",291],")",")",")",["T_WHITESPACE","\n\t\t\t",291],"{",["T_WHITESPACE","\n\t\t\t\t",292],["T_VARIABLE","$this",293],["T_OBJECT_OPERATOR","->",293],["T_STRING","_error_string",293],["T_WHITESPACE"," ",293],"=",["T_WHITESPACE"," ",293],["T_STRING","sprintf",293],"(",["T_VARIABLE","$this",293],["T_OBJECT_OPERATOR","->",293],["T_STRING","lang",293],["T_OBJECT_OPERATOR","->",293],["T_STRING","line",293],"(",["T_CONSTANT_ENCAPSED_STRING","'migration_missing_'",293],".",["T_VARIABLE","$method",293],".",["T_CONSTANT_ENCAPSED_STRING","'_method'",293],")",",",["T_WHITESPACE"," ",293],["T_VARIABLE","$class",293],")",";",["T_WHITESPACE","\n\t\t\t\t",293],["T_RETURN","return",294],["T_WHITESPACE"," ",294],["T_STRING","FALSE",294],";",["T_WHITESPACE","\n\t\t\t",294],"}",["T_WHITESPACE","\n\n\t\t\t",295],["T_VARIABLE","$pending",297],"[",["T_VARIABLE","$number",297],"]",["T_WHITESPACE"," ",297],"=",["T_WHITESPACE"," ",297],["T_ARRAY","array",297],"(",["T_VARIABLE","$class",297],",",["T_WHITESPACE"," ",297],["T_VARIABLE","$method",297],")",";",["T_WHITESPACE","\n\t\t",297],"}",["T_WHITESPACE","\n\n\t\t",298],["T_COMMENT","\/\/ Now just run the necessary migrations\n",300],["T_WHITESPACE","\t\t",301],["T_FOREACH","foreach",301],["T_WHITESPACE"," ",301],"(",["T_VARIABLE","$pending",301],["T_WHITESPACE"," ",301],["T_AS","as",301],["T_WHITESPACE"," ",301],["T_VARIABLE","$number",301],["T_WHITESPACE"," ",301],["T_DOUBLE_ARROW","=>",301],["T_WHITESPACE"," ",301],["T_VARIABLE","$migration",301],")",["T_WHITESPACE","\n\t\t",301],"{",["T_WHITESPACE","\n\t\t\t",302],["T_STRING","log_message",303],"(",["T_CONSTANT_ENCAPSED_STRING","'debug'",303],",",["T_WHITESPACE"," ",303],["T_CONSTANT_ENCAPSED_STRING","'Migrating '",303],".",["T_VARIABLE","$method",303],".",["T_CONSTANT_ENCAPSED_STRING","' from version '",303],".",["T_VARIABLE","$current_version",303],".",["T_CONSTANT_ENCAPSED_STRING","' to version '",303],".",["T_VARIABLE","$number",303],")",";",["T_WHITESPACE","\n\n\t\t\t",303],["T_VARIABLE","$migration",305],"[",["T_LNUMBER","0",305],"]",["T_WHITESPACE"," ",305],"=",["T_WHITESPACE"," ",305],["T_NEW","new",305],["T_WHITESPACE"," ",305],["T_VARIABLE","$migration",305],"[",["T_LNUMBER","0",305],"]",";",["T_WHITESPACE","\n\t\t\t",305],["T_STRING","call_user_func",306],"(",["T_VARIABLE","$migration",306],")",";",["T_WHITESPACE","\n\t\t\t",306],["T_VARIABLE","$current_version",307],["T_WHITESPACE"," ",307],"=",["T_WHITESPACE"," ",307],["T_VARIABLE","$number",307],";",["T_WHITESPACE","\n\t\t\t",307],["T_VARIABLE","$this",308],["T_OBJECT_OPERATOR","->",308],["T_STRING","_update_version",308],"(",["T_VARIABLE","$current_version",308],")",";",["T_WHITESPACE","\n\t\t",308],"}",["T_WHITESPACE","\n\n\t\t",309],["T_COMMENT","\/\/ This is necessary when moving down, since the the last migration applied\n",311],["T_WHITESPACE","\t\t",312],["T_COMMENT","\/\/ will be the down() method for the next migration up from the target\n",312],["T_WHITESPACE","\t\t",313],["T_IF","if",313],["T_WHITESPACE"," ",313],"(",["T_VARIABLE","$current_version",313],["T_WHITESPACE"," ",313],["T_IS_NOT_EQUAL","<>",313],["T_WHITESPACE"," ",313],["T_VARIABLE","$target_version",313],")",["T_WHITESPACE","\n\t\t",313],"{",["T_WHITESPACE","\n\t\t\t",314],["T_VARIABLE","$current_version",315],["T_WHITESPACE"," ",315],"=",["T_WHITESPACE"," ",315],["T_VARIABLE","$target_version",315],";",["T_WHITESPACE","\n\t\t\t",315],["T_VARIABLE","$this",316],["T_OBJECT_OPERATOR","->",316],["T_STRING","_update_version",316],"(",["T_VARIABLE","$current_version",316],")",";",["T_WHITESPACE","\n\t\t",316],"}",["T_WHITESPACE","\n\n\t\t",317],["T_STRING","log_message",319],"(",["T_CONSTANT_ENCAPSED_STRING","'debug'",319],",",["T_WHITESPACE"," ",319],["T_CONSTANT_ENCAPSED_STRING","'Finished migrating to '",319],".",["T_VARIABLE","$current_version",319],")",";",["T_WHITESPACE","\n\t\t",319],["T_RETURN","return",320],["T_WHITESPACE"," ",320],["T_VARIABLE","$current_version",320],";",["T_WHITESPACE","\n\t",320],"}",["T_WHITESPACE","\n\n\t",321],["T_COMMENT","\/\/ --------------------------------------------------------------------\n",323],["T_WHITESPACE","\n\t",324],["T_DOC_COMMENT","\/**\n\t * Sets the schema to the latest migration\n\t *\n\t * @return\tmixed\tCurrent version string on success, FALSE on failure\n\t *\/",325],["T_WHITESPACE","\n\t",329],["T_PUBLIC","public",330],["T_WHITESPACE"," ",330],["T_FUNCTION","function",330],["T_WHITESPACE"," ",330],["T_STRING","latest",330],"(",")",["T_WHITESPACE","\n\t",330],"{",["T_WHITESPACE","\n\t\t",331],["T_VARIABLE","$migrations",332],["T_WHITESPACE"," ",332],"=",["T_WHITESPACE"," ",332],["T_VARIABLE","$this",332],["T_OBJECT_OPERATOR","->",332],["T_STRING","find_migrations",332],"(",")",";",["T_WHITESPACE","\n\n\t\t",332],["T_IF","if",334],["T_WHITESPACE"," ",334],"(",["T_EMPTY","empty",334],"(",["T_VARIABLE","$migrations",334],")",")",["T_WHITESPACE","\n\t\t",334],"{",["T_WHITESPACE","\n\t\t\t",335],["T_VARIABLE","$this",336],["T_OBJECT_OPERATOR","->",336],["T_STRING","_error_string",336],["T_WHITESPACE"," ",336],"=",["T_WHITESPACE"," ",336],["T_VARIABLE","$this",336],["T_OBJECT_OPERATOR","->",336],["T_STRING","lang",336],["T_OBJECT_OPERATOR","->",336],["T_STRING","line",336],"(",["T_CONSTANT_ENCAPSED_STRING","'migration_none_found'",336],")",";",["T_WHITESPACE","\n\t\t\t",336],["T_RETURN","return",337],["T_WHITESPACE"," ",337],["T_STRING","FALSE",337],";",["T_WHITESPACE","\n\t\t",337],"}",["T_WHITESPACE","\n\n\t\t",338],["T_VARIABLE","$last_migration",340],["T_WHITESPACE"," ",340],"=",["T_WHITESPACE"," ",340],["T_STRING","basename",340],"(",["T_STRING","end",340],"(",["T_VARIABLE","$migrations",340],")",")",";",["T_WHITESPACE","\n\n\t\t",340],["T_COMMENT","\/\/ Calculate the last migration step from existing migration\n",342],["T_WHITESPACE","\t\t",343],["T_COMMENT","\/\/ filenames and proceed to the standard version migration\n",343],["T_WHITESPACE","\t\t",344],["T_RETURN","return",344],["T_WHITESPACE"," ",344],["T_VARIABLE","$this",344],["T_OBJECT_OPERATOR","->",344],["T_STRING","version",344],"(",["T_VARIABLE","$this",344],["T_OBJECT_OPERATOR","->",344],["T_STRING","_get_migration_number",344],"(",["T_VARIABLE","$last_migration",344],")",")",";",["T_WHITESPACE","\n\t",344],"}",["T_WHITESPACE","\n\n\t",345],["T_COMMENT","\/\/ --------------------------------------------------------------------\n",347],["T_WHITESPACE","\n\t",348],["T_DOC_COMMENT","\/**\n\t * Sets the schema to the migration version set in config\n\t *\n\t * @return\tmixed\tTRUE if no migrations are found, current version string on success, FALSE on failure\n\t *\/",349],["T_WHITESPACE","\n\t",353],["T_PUBLIC","public",354],["T_WHITESPACE"," ",354],["T_FUNCTION","function",354],["T_WHITESPACE"," ",354],["T_STRING","current",354],"(",")",["T_WHITESPACE","\n\t",354],"{",["T_WHITESPACE","\n\t\t",355],["T_RETURN","return",356],["T_WHITESPACE"," ",356],["T_VARIABLE","$this",356],["T_OBJECT_OPERATOR","->",356],["T_STRING","version",356],"(",["T_VARIABLE","$this",356],["T_OBJECT_OPERATOR","->",356],["T_STRING","_migration_version",356],")",";",["T_WHITESPACE","\n\t",356],"}",["T_WHITESPACE","\n\n\t",357],["T_COMMENT","\/\/ --------------------------------------------------------------------\n",359],["T_WHITESPACE","\n\t",360],["T_DOC_COMMENT","\/**\n\t * Error string\n\t *\n\t * @return\tstring\tError message returned as a string\n\t *\/",361],["T_WHITESPACE","\n\t",365],["T_PUBLIC","public",366],["T_WHITESPACE"," ",366],["T_FUNCTION","function",366],["T_WHITESPACE"," ",366],["T_STRING","error_string",366],"(",")",["T_WHITESPACE","\n\t",366],"{",["T_WHITESPACE","\n\t\t",367],["T_RETURN","return",368],["T_WHITESPACE"," ",368],["T_VARIABLE","$this",368],["T_OBJECT_OPERATOR","->",368],["T_STRING","_error_string",368],";",["T_WHITESPACE","\n\t",368],"}",["T_WHITESPACE","\n\n\t",369],["T_COMMENT","\/\/ --------------------------------------------------------------------\n",371],["T_WHITESPACE","\n\t",372],["T_DOC_COMMENT","\/**\n\t * Retrieves list of available migration scripts\n\t *\n\t * @return\tarray\tlist of migration file paths sorted by version\n\t *\/",373],["T_WHITESPACE","\n\t",377],["T_PUBLIC","public",378],["T_WHITESPACE"," ",378],["T_FUNCTION","function",378],["T_WHITESPACE"," ",378],["T_STRING","find_migrations",378],"(",")",["T_WHITESPACE","\n\t",378],"{",["T_WHITESPACE","\n\t\t",379],["T_VARIABLE","$migrations",380],["T_WHITESPACE"," ",380],"=",["T_WHITESPACE"," ",380],["T_ARRAY","array",380],"(",")",";",["T_WHITESPACE","\n\n\t\t",380],["T_COMMENT","\/\/ Load all *_*.php files in the migrations path\n",382],["T_WHITESPACE","\t\t",383],["T_FOREACH","foreach",383],["T_WHITESPACE"," ",383],"(",["T_STRING","glob",383],"(",["T_VARIABLE","$this",383],["T_OBJECT_OPERATOR","->",383],["T_STRING","_migration_path",383],".",["T_CONSTANT_ENCAPSED_STRING","'*_*.php'",383],")",["T_WHITESPACE"," ",383],["T_AS","as",383],["T_WHITESPACE"," ",383],["T_VARIABLE","$file",383],")",["T_WHITESPACE","\n\t\t",383],"{",["T_WHITESPACE","\n\t\t\t",384],["T_VARIABLE","$name",385],["T_WHITESPACE"," ",385],"=",["T_WHITESPACE"," ",385],["T_STRING","basename",385],"(",["T_VARIABLE","$file",385],",",["T_WHITESPACE"," ",385],["T_CONSTANT_ENCAPSED_STRING","'.php'",385],")",";",["T_WHITESPACE","\n\n\t\t\t",385],["T_COMMENT","\/\/ Filter out non-migration files\n",387],["T_WHITESPACE","\t\t\t",388],["T_IF","if",388],["T_WHITESPACE"," ",388],"(",["T_STRING","preg_match",388],"(",["T_VARIABLE","$this",388],["T_OBJECT_OPERATOR","->",388],["T_STRING","_migration_regex",388],",",["T_WHITESPACE"," ",388],["T_VARIABLE","$name",388],")",")",["T_WHITESPACE","\n\t\t\t",388],"{",["T_WHITESPACE","\n\t\t\t\t",389],["T_VARIABLE","$number",390],["T_WHITESPACE"," ",390],"=",["T_WHITESPACE"," ",390],["T_VARIABLE","$this",390],["T_OBJECT_OPERATOR","->",390],["T_STRING","_get_migration_number",390],"(",["T_VARIABLE","$name",390],")",";",["T_WHITESPACE","\n\n\t\t\t\t",390],["T_COMMENT","\/\/ There cannot be duplicate migration numbers\n",392],["T_WHITESPACE","\t\t\t\t",393],["T_IF","if",393],["T_WHITESPACE"," ",393],"(",["T_ISSET","isset",393],"(",["T_VARIABLE","$migrations",393],"[",["T_VARIABLE","$number",393],"]",")",")",["T_WHITESPACE","\n\t\t\t\t",393],"{",["T_WHITESPACE","\n\t\t\t\t\t",394],["T_VARIABLE","$this",395],["T_OBJECT_OPERATOR","->",395],["T_STRING","_error_string",395],["T_WHITESPACE"," ",395],"=",["T_WHITESPACE"," ",395],["T_STRING","sprintf",395],"(",["T_VARIABLE","$this",395],["T_OBJECT_OPERATOR","->",395],["T_STRING","lang",395],["T_OBJECT_OPERATOR","->",395],["T_STRING","line",395],"(",["T_CONSTANT_ENCAPSED_STRING","'migration_multiple_version'",395],")",",",["T_WHITESPACE"," ",395],["T_VARIABLE","$number",395],")",";",["T_WHITESPACE","\n\t\t\t\t\t",395],["T_STRING","show_error",396],"(",["T_VARIABLE","$this",396],["T_OBJECT_OPERATOR","->",396],["T_STRING","_error_string",396],")",";",["T_WHITESPACE","\n\t\t\t\t",396],"}",["T_WHITESPACE","\n\n\t\t\t\t",397],["T_VARIABLE","$migrations",399],"[",["T_VARIABLE","$number",399],"]",["T_WHITESPACE"," ",399],"=",["T_WHITESPACE"," ",399],["T_VARIABLE","$file",399],";",["T_WHITESPACE","\n\t\t\t",399],"}",["T_WHITESPACE","\n\t\t",400],"}",["T_WHITESPACE","\n\n\t\t",401],["T_STRING","ksort",403],"(",["T_VARIABLE","$migrations",403],")",";",["T_WHITESPACE","\n\t\t",403],["T_RETURN","return",404],["T_WHITESPACE"," ",404],["T_VARIABLE","$migrations",404],";",["T_WHITESPACE","\n\t",404],"}",["T_WHITESPACE","\n\n\t",405],["T_COMMENT","\/\/ --------------------------------------------------------------------\n",407],["T_WHITESPACE","\n\t",408],["T_DOC_COMMENT","\/**\n\t * Extracts the migration number from a filename\n\t *\n\t * @param\tstring\t$migration\n\t * @return\tstring\tNumeric portion of a migration filename\n\t *\/",409],["T_WHITESPACE","\n\t",414],["T_PROTECTED","protected",415],["T_WHITESPACE"," ",415],["T_FUNCTION","function",415],["T_WHITESPACE"," ",415],["T_STRING","_get_migration_number",415],"(",["T_VARIABLE","$migration",415],")",["T_WHITESPACE","\n\t",415],"{",["T_WHITESPACE","\n\t\t",416],["T_RETURN","return",417],["T_WHITESPACE"," ",417],["T_STRING","sscanf",417],"(",["T_VARIABLE","$migration",417],",",["T_WHITESPACE"," ",417],["T_CONSTANT_ENCAPSED_STRING","'%[0-9]+'",417],",",["T_WHITESPACE"," ",417],["T_VARIABLE","$number",417],")",["T_WHITESPACE","\n\t\t\t",417],"?",["T_WHITESPACE"," ",418],["T_VARIABLE","$number",418],["T_WHITESPACE"," ",418],":",["T_WHITESPACE"," ",418],["T_CONSTANT_ENCAPSED_STRING","'0'",418],";",["T_WHITESPACE","\n\t",418],"}",["T_WHITESPACE","\n\n\t",419],["T_COMMENT","\/\/ --------------------------------------------------------------------\n",421],["T_WHITESPACE","\n\t",422],["T_DOC_COMMENT","\/**\n\t * Extracts the migration class name from a filename\n\t *\n\t * @param\tstring\t$migration\n\t * @return\tstring\ttext portion of a migration filename\n\t *\/",423],["T_WHITESPACE","\n\t",428],["T_PROTECTED","protected",429],["T_WHITESPACE"," ",429],["T_FUNCTION","function",429],["T_WHITESPACE"," ",429],["T_STRING","_get_migration_name",429],"(",["T_VARIABLE","$migration",429],")",["T_WHITESPACE","\n\t",429],"{",["T_WHITESPACE","\n\t\t",430],["T_VARIABLE","$parts",431],["T_WHITESPACE"," ",431],"=",["T_WHITESPACE"," ",431],["T_STRING","explode",431],"(",["T_CONSTANT_ENCAPSED_STRING","'_'",431],",",["T_WHITESPACE"," ",431],["T_VARIABLE","$migration",431],")",";",["T_WHITESPACE","\n\t\t",431],["T_STRING","array_shift",432],"(",["T_VARIABLE","$parts",432],")",";",["T_WHITESPACE","\n\t\t",432],["T_RETURN","return",433],["T_WHITESPACE"," ",433],["T_STRING","implode",433],"(",["T_CONSTANT_ENCAPSED_STRING","'_'",433],",",["T_WHITESPACE"," ",433],["T_VARIABLE","$parts",433],")",";",["T_WHITESPACE","\n\t",433],"}",["T_WHITESPACE","\n\n\t",434],["T_COMMENT","\/\/ --------------------------------------------------------------------\n",436],["T_WHITESPACE","\n\t",437],["T_DOC_COMMENT","\/**\n\t * Retrieves current schema version\n\t *\n\t * @return\tstring\tCurrent migration version\n\t *\/",438],["T_WHITESPACE","\n\t",442],["T_PROTECTED","protected",443],["T_WHITESPACE"," ",443],["T_FUNCTION","function",443],["T_WHITESPACE"," ",443],["T_STRING","_get_version",443],"(",")",["T_WHITESPACE","\n\t",443],"{",["T_WHITESPACE","\n\t\t",444],["T_VARIABLE","$row",445],["T_WHITESPACE"," ",445],"=",["T_WHITESPACE"," ",445],["T_VARIABLE","$this",445],["T_OBJECT_OPERATOR","->",445],["T_STRING","db",445],["T_OBJECT_OPERATOR","->",445],["T_STRING","select",445],"(",["T_CONSTANT_ENCAPSED_STRING","'version'",445],")",["T_OBJECT_OPERATOR","->",445],["T_STRING","get",445],"(",["T_VARIABLE","$this",445],["T_OBJECT_OPERATOR","->",445],["T_STRING","_migration_table",445],")",["T_OBJECT_OPERATOR","->",445],["T_STRING","row",445],"(",")",";",["T_WHITESPACE","\n\t\t",445],["T_RETURN","return",446],["T_WHITESPACE"," ",446],["T_VARIABLE","$row",446],["T_WHITESPACE"," ",446],"?",["T_WHITESPACE"," ",446],["T_VARIABLE","$row",446],["T_OBJECT_OPERATOR","->",446],["T_STRING","version",446],["T_WHITESPACE"," ",446],":",["T_WHITESPACE"," ",446],["T_CONSTANT_ENCAPSED_STRING","'0'",446],";",["T_WHITESPACE","\n\t",446],"}",["T_WHITESPACE","\n\n\t",447],["T_COMMENT","\/\/ --------------------------------------------------------------------\n",449],["T_WHITESPACE","\n\t",450],["T_DOC_COMMENT","\/**\n\t * Stores the current schema version\n\t *\n\t * @param\tstring\t$migration\tMigration reached\n\t * @return\tvoid\n\t *\/",451],["T_WHITESPACE","\n\t",456],["T_PROTECTED","protected",457],["T_WHITESPACE"," ",457],["T_FUNCTION","function",457],["T_WHITESPACE"," ",457],["T_STRING","_update_version",457],"(",["T_VARIABLE","$migration",457],")",["T_WHITESPACE","\n\t",457],"{",["T_WHITESPACE","\n\t\t",458],["T_VARIABLE","$this",459],["T_OBJECT_OPERATOR","->",459],["T_STRING","db",459],["T_OBJECT_OPERATOR","->",459],["T_STRING","update",459],"(",["T_VARIABLE","$this",459],["T_OBJECT_OPERATOR","->",459],["T_STRING","_migration_table",459],",",["T_WHITESPACE"," ",459],["T_ARRAY","array",459],"(",["T_WHITESPACE","\n\t\t\t",459],["T_CONSTANT_ENCAPSED_STRING","'version'",460],["T_WHITESPACE"," ",460],["T_DOUBLE_ARROW","=>",460],["T_WHITESPACE"," ",460],["T_VARIABLE","$migration",460],["T_WHITESPACE","\n\t\t",460],")",")",";",["T_WHITESPACE","\n\t",461],"}",["T_WHITESPACE","\n\n\t",462],["T_COMMENT","\/\/ --------------------------------------------------------------------\n",464],["T_WHITESPACE","\n\t",465],["T_DOC_COMMENT","\/**\n\t * Enable the use of CI super-global\n\t *\n\t * @param\tstring\t$var\n\t * @return\tmixed\n\t *\/",466],["T_WHITESPACE","\n\t",471],["T_PUBLIC","public",472],["T_WHITESPACE"," ",472],["T_FUNCTION","function",472],["T_WHITESPACE"," ",472],["T_STRING","__get",472],"(",["T_VARIABLE","$var",472],")",["T_WHITESPACE","\n\t",472],"{",["T_WHITESPACE","\n\t\t",473],["T_RETURN","return",474],["T_WHITESPACE"," ",474],["T_STRING","get_instance",474],"(",")",["T_OBJECT_OPERATOR","->",474],["T_VARIABLE","$var",474],";",["T_WHITESPACE","\n\t",474],"}",["T_WHITESPACE","\n\n",475],"}",["T_WHITESPACE","\n",477]]
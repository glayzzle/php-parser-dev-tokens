[["T_OPEN_TAG","<?php\n",1],["T_DOC_COMMENT","\/**\n * CodeIgniter\n *\n * An open source application development framework for PHP\n *\n * This content is released under the MIT License (MIT)\n *\n * Copyright (c) 2014 - 2017, British Columbia Institute of Technology\n *\n * Permission is hereby granted, free of charge, to any person obtaining a copy\n * of this software and associated documentation files (the \"Software\"), to deal\n * in the Software without restriction, including without limitation the rights\n * to use, copy, modify, merge, publish, distribute, sublicense, and\/or sell\n * copies of the Software, and to permit persons to whom the Software is\n * furnished to do so, subject to the following conditions:\n *\n * The above copyright notice and this permission notice shall be included in\n * all copies or substantial portions of the Software.\n *\n * THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN\n * THE SOFTWARE.\n *\n * @package\tCodeIgniter\n * @author\tEllisLab Dev Team\n * @copyright\tCopyright (c) 2008 - 2014, EllisLab, Inc. (https:\/\/ellislab.com\/)\n * @copyright\tCopyright (c) 2014 - 2017, British Columbia Institute of Technology (http:\/\/bcit.ca\/)\n * @license\thttp:\/\/opensource.org\/licenses\/MIT\tMIT License\n * @link\thttps:\/\/codeigniter.com\n * @since\tVersion 1.0.0\n * @filesource\n *\/",2],["T_WHITESPACE","\n",37],["T_STRING","defined",38],"(",["T_CONSTANT_ENCAPSED_STRING","'BASEPATH'",38],")",["T_WHITESPACE"," ",38],["T_LOGICAL_OR","OR",38],["T_WHITESPACE"," ",38],["T_EXIT","exit",38],"(",["T_CONSTANT_ENCAPSED_STRING","'No direct script access allowed'",38],")",";",["T_WHITESPACE","\n\n",38],["T_DOC_COMMENT","\/**\n * Typography Class\n *\n * @package\t\tCodeIgniter\n * @subpackage\tLibraries\n * @category\tHelpers\n * @author\t\tEllisLab Dev Team\n * @link\t\thttps:\/\/codeigniter.com\/user_guide\/libraries\/typography.html\n *\/",40],["T_WHITESPACE","\n",48],["T_CLASS","class",49],["T_WHITESPACE"," ",49],["T_STRING","CI_Typography",49],["T_WHITESPACE"," ",49],"{",["T_WHITESPACE","\n\n\t",49],["T_DOC_COMMENT","\/**\n\t * Block level elements that should not be wrapped inside <p> tags\n\t *\n\t * @var string\n\t *\/",51],["T_WHITESPACE","\n\t",55],["T_PUBLIC","public",56],["T_WHITESPACE"," ",56],["T_VARIABLE","$block_elements",56],["T_WHITESPACE"," ",56],"=",["T_WHITESPACE"," ",56],["T_CONSTANT_ENCAPSED_STRING","'address|blockquote|div|dl|fieldset|form|h\\d|hr|noscript|object|ol|p|pre|script|table|ul'",56],";",["T_WHITESPACE","\n\n\t",56],["T_DOC_COMMENT","\/**\n\t * Elements that should not have <p> and <br \/> tags within them.\n\t *\n\t * @var string\n\t *\/",58],["T_WHITESPACE","\n\t",62],["T_PUBLIC","public",63],["T_WHITESPACE"," ",63],["T_VARIABLE","$skip_elements",63],["T_WHITESPACE","\t",63],"=",["T_WHITESPACE"," ",63],["T_CONSTANT_ENCAPSED_STRING","'p|pre|ol|ul|dl|object|table|h\\d'",63],";",["T_WHITESPACE","\n\n\t",63],["T_DOC_COMMENT","\/**\n\t * Tags we want the parser to completely ignore when splitting the string.\n\t *\n\t * @var string\n\t *\/",65],["T_WHITESPACE","\n\t",69],["T_PUBLIC","public",70],["T_WHITESPACE"," ",70],["T_VARIABLE","$inline_elements",70],["T_WHITESPACE"," ",70],"=",["T_WHITESPACE"," ",70],["T_CONSTANT_ENCAPSED_STRING","'a|abbr|acronym|b|bdo|big|br|button|cite|code|del|dfn|em|i|img|ins|input|label|map|kbd|q|samp|select|small|span|strong|sub|sup|textarea|tt|var'",70],";",["T_WHITESPACE","\n\n\t",70],["T_DOC_COMMENT","\/**\n\t * array of block level elements that require inner content to be within another block level element\n\t *\n\t * @var array\n\t *\/",72],["T_WHITESPACE","\n\t",76],["T_PUBLIC","public",77],["T_WHITESPACE"," ",77],["T_VARIABLE","$inner_block_required",77],["T_WHITESPACE"," ",77],"=",["T_WHITESPACE"," ",77],["T_ARRAY","array",77],"(",["T_CONSTANT_ENCAPSED_STRING","'blockquote'",77],")",";",["T_WHITESPACE","\n\n\t",77],["T_DOC_COMMENT","\/**\n\t * the last block element parsed\n\t *\n\t * @var string\n\t *\/",79],["T_WHITESPACE","\n\t",83],["T_PUBLIC","public",84],["T_WHITESPACE"," ",84],["T_VARIABLE","$last_block_element",84],["T_WHITESPACE"," ",84],"=",["T_WHITESPACE"," ",84],["T_CONSTANT_ENCAPSED_STRING","''",84],";",["T_WHITESPACE","\n\n\t",84],["T_DOC_COMMENT","\/**\n\t * whether or not to protect quotes within { curly braces }\n\t *\n\t * @var bool\n\t *\/",86],["T_WHITESPACE","\n\t",90],["T_PUBLIC","public",91],["T_WHITESPACE"," ",91],["T_VARIABLE","$protect_braced_quotes",91],["T_WHITESPACE"," ",91],"=",["T_WHITESPACE"," ",91],["T_STRING","FALSE",91],";",["T_WHITESPACE","\n\n\t",91],["T_DOC_COMMENT","\/**\n\t * Auto Typography\n\t *\n\t * This function converts text, making it typographically correct:\n\t *\t- Converts double spaces into paragraphs.\n\t *\t- Converts single line breaks into <br \/> tags\n\t *\t- Converts single and double quotes into correctly facing curly quote entities.\n\t *\t- Converts three dots into ellipsis.\n\t *\t- Converts double dashes into em-dashes.\n\t *  - Converts two spaces into entities\n\t *\n\t * @param\tstring\n\t * @param\tbool\twhether to reduce more then two consecutive newlines to two\n\t * @return\tstring\n\t *\/",93],["T_WHITESPACE","\n\t",107],["T_PUBLIC","public",108],["T_WHITESPACE"," ",108],["T_FUNCTION","function",108],["T_WHITESPACE"," ",108],["T_STRING","auto_typography",108],"(",["T_VARIABLE","$str",108],",",["T_WHITESPACE"," ",108],["T_VARIABLE","$reduce_linebreaks",108],["T_WHITESPACE"," ",108],"=",["T_WHITESPACE"," ",108],["T_STRING","FALSE",108],")",["T_WHITESPACE","\n\t",108],"{",["T_WHITESPACE","\n\t\t",109],["T_IF","if",110],["T_WHITESPACE"," ",110],"(",["T_VARIABLE","$str",110],["T_WHITESPACE"," ",110],["T_IS_IDENTICAL","===",110],["T_WHITESPACE"," ",110],["T_CONSTANT_ENCAPSED_STRING","''",110],")",["T_WHITESPACE","\n\t\t",110],"{",["T_WHITESPACE","\n\t\t\t",111],["T_RETURN","return",112],["T_WHITESPACE"," ",112],["T_CONSTANT_ENCAPSED_STRING","''",112],";",["T_WHITESPACE","\n\t\t",112],"}",["T_WHITESPACE","\n\n\t\t",113],["T_COMMENT","\/\/ Standardize Newlines to make matching easier\n",115],["T_WHITESPACE","\t\t",116],["T_IF","if",116],["T_WHITESPACE"," ",116],"(",["T_STRING","strpos",116],"(",["T_VARIABLE","$str",116],",",["T_WHITESPACE"," ",116],["T_CONSTANT_ENCAPSED_STRING","\"\\r\"",116],")",["T_WHITESPACE"," ",116],["T_IS_NOT_IDENTICAL","!==",116],["T_WHITESPACE"," ",116],["T_STRING","FALSE",116],")",["T_WHITESPACE","\n\t\t",116],"{",["T_WHITESPACE","\n\t\t\t",117],["T_VARIABLE","$str",118],["T_WHITESPACE"," ",118],"=",["T_WHITESPACE"," ",118],["T_STRING","str_replace",118],"(",["T_ARRAY","array",118],"(",["T_CONSTANT_ENCAPSED_STRING","\"\\r\\n\"",118],",",["T_WHITESPACE"," ",118],["T_CONSTANT_ENCAPSED_STRING","\"\\r\"",118],")",",",["T_WHITESPACE"," ",118],["T_CONSTANT_ENCAPSED_STRING","\"\\n\"",118],",",["T_WHITESPACE"," ",118],["T_VARIABLE","$str",118],")",";",["T_WHITESPACE","\n\t\t",118],"}",["T_WHITESPACE","\n\n\t\t",119],["T_COMMENT","\/\/ Reduce line breaks.  If there are more than two consecutive linebreaks\n",121],["T_WHITESPACE","\t\t",122],["T_COMMENT","\/\/ we'll compress them down to a maximum of two since there's no benefit to more.\n",122],["T_WHITESPACE","\t\t",123],["T_IF","if",123],["T_WHITESPACE"," ",123],"(",["T_VARIABLE","$reduce_linebreaks",123],["T_WHITESPACE"," ",123],["T_IS_IDENTICAL","===",123],["T_WHITESPACE"," ",123],["T_STRING","TRUE",123],")",["T_WHITESPACE","\n\t\t",123],"{",["T_WHITESPACE","\n\t\t\t",124],["T_VARIABLE","$str",125],["T_WHITESPACE"," ",125],"=",["T_WHITESPACE"," ",125],["T_STRING","preg_replace",125],"(",["T_CONSTANT_ENCAPSED_STRING","\"\/\\n\\n+\/\"",125],",",["T_WHITESPACE"," ",125],["T_CONSTANT_ENCAPSED_STRING","\"\\n\\n\"",125],",",["T_WHITESPACE"," ",125],["T_VARIABLE","$str",125],")",";",["T_WHITESPACE","\n\t\t",125],"}",["T_WHITESPACE","\n\n\t\t",126],["T_COMMENT","\/\/ HTML comment tags don't conform to patterns of normal tags, so pull them out separately, only if needed\n",128],["T_WHITESPACE","\t\t",129],["T_VARIABLE","$html_comments",129],["T_WHITESPACE"," ",129],"=",["T_WHITESPACE"," ",129],["T_ARRAY","array",129],"(",")",";",["T_WHITESPACE","\n\t\t",129],["T_IF","if",130],["T_WHITESPACE"," ",130],"(",["T_STRING","strpos",130],"(",["T_VARIABLE","$str",130],",",["T_WHITESPACE"," ",130],["T_CONSTANT_ENCAPSED_STRING","'<!--'",130],")",["T_WHITESPACE"," ",130],["T_IS_NOT_IDENTICAL","!==",130],["T_WHITESPACE"," ",130],["T_STRING","FALSE",130],["T_WHITESPACE"," ",130],["T_BOOLEAN_AND","&&",130],["T_WHITESPACE"," ",130],["T_STRING","preg_match_all",130],"(",["T_CONSTANT_ENCAPSED_STRING","'#(<!\\-\\-.*?\\-\\->)#s'",130],",",["T_WHITESPACE"," ",130],["T_VARIABLE","$str",130],",",["T_WHITESPACE"," ",130],["T_VARIABLE","$matches",130],")",")",["T_WHITESPACE","\n\t\t",130],"{",["T_WHITESPACE","\n\t\t\t",131],["T_FOR","for",132],["T_WHITESPACE"," ",132],"(",["T_VARIABLE","$i",132],["T_WHITESPACE"," ",132],"=",["T_WHITESPACE"," ",132],["T_LNUMBER","0",132],",",["T_WHITESPACE"," ",132],["T_VARIABLE","$total",132],["T_WHITESPACE"," ",132],"=",["T_WHITESPACE"," ",132],["T_STRING","count",132],"(",["T_VARIABLE","$matches",132],"[",["T_LNUMBER","0",132],"]",")",";",["T_WHITESPACE"," ",132],["T_VARIABLE","$i",132],["T_WHITESPACE"," ",132],"<",["T_WHITESPACE"," ",132],["T_VARIABLE","$total",132],";",["T_WHITESPACE"," ",132],["T_VARIABLE","$i",132],["T_INC","++",132],")",["T_WHITESPACE","\n\t\t\t",132],"{",["T_WHITESPACE","\n\t\t\t\t",133],["T_VARIABLE","$html_comments",134],"[","]",["T_WHITESPACE"," ",134],"=",["T_WHITESPACE"," ",134],["T_VARIABLE","$matches",134],"[",["T_LNUMBER","0",134],"]","[",["T_VARIABLE","$i",134],"]",";",["T_WHITESPACE","\n\t\t\t\t",134],["T_VARIABLE","$str",135],["T_WHITESPACE"," ",135],"=",["T_WHITESPACE"," ",135],["T_STRING","str_replace",135],"(",["T_VARIABLE","$matches",135],"[",["T_LNUMBER","0",135],"]","[",["T_VARIABLE","$i",135],"]",",",["T_WHITESPACE"," ",135],["T_CONSTANT_ENCAPSED_STRING","'{@HC'",135],".",["T_VARIABLE","$i",135],".",["T_CONSTANT_ENCAPSED_STRING","'}'",135],",",["T_WHITESPACE"," ",135],["T_VARIABLE","$str",135],")",";",["T_WHITESPACE","\n\t\t\t",135],"}",["T_WHITESPACE","\n\t\t",136],"}",["T_WHITESPACE","\n\n\t\t",137],["T_COMMENT","\/\/ match and yank <pre> tags if they exist.  It's cheaper to do this separately since most content will\n",139],["T_WHITESPACE","\t\t",140],["T_COMMENT","\/\/ not contain <pre> tags, and it keeps the PCRE patterns below simpler and faster\n",140],["T_WHITESPACE","\t\t",141],["T_IF","if",141],["T_WHITESPACE"," ",141],"(",["T_STRING","strpos",141],"(",["T_VARIABLE","$str",141],",",["T_WHITESPACE"," ",141],["T_CONSTANT_ENCAPSED_STRING","'<pre'",141],")",["T_WHITESPACE"," ",141],["T_IS_NOT_IDENTICAL","!==",141],["T_WHITESPACE"," ",141],["T_STRING","FALSE",141],")",["T_WHITESPACE","\n\t\t",141],"{",["T_WHITESPACE","\n\t\t\t",142],["T_VARIABLE","$str",143],["T_WHITESPACE"," ",143],"=",["T_WHITESPACE"," ",143],["T_STRING","preg_replace_callback",143],"(",["T_CONSTANT_ENCAPSED_STRING","'#<pre.*?>.*?<\/pre>#si'",143],",",["T_WHITESPACE"," ",143],["T_ARRAY","array",143],"(",["T_VARIABLE","$this",143],",",["T_WHITESPACE"," ",143],["T_CONSTANT_ENCAPSED_STRING","'_protect_characters'",143],")",",",["T_WHITESPACE"," ",143],["T_VARIABLE","$str",143],")",";",["T_WHITESPACE","\n\t\t",143],"}",["T_WHITESPACE","\n\n\t\t",144],["T_COMMENT","\/\/ Convert quotes within tags to temporary markers.\n",146],["T_WHITESPACE","\t\t",147],["T_VARIABLE","$str",147],["T_WHITESPACE"," ",147],"=",["T_WHITESPACE"," ",147],["T_STRING","preg_replace_callback",147],"(",["T_CONSTANT_ENCAPSED_STRING","'#<.+?>#si'",147],",",["T_WHITESPACE"," ",147],["T_ARRAY","array",147],"(",["T_VARIABLE","$this",147],",",["T_WHITESPACE"," ",147],["T_CONSTANT_ENCAPSED_STRING","'_protect_characters'",147],")",",",["T_WHITESPACE"," ",147],["T_VARIABLE","$str",147],")",";",["T_WHITESPACE","\n\n\t\t",147],["T_COMMENT","\/\/ Do the same with braces if necessary\n",149],["T_WHITESPACE","\t\t",150],["T_IF","if",150],["T_WHITESPACE"," ",150],"(",["T_VARIABLE","$this",150],["T_OBJECT_OPERATOR","->",150],["T_STRING","protect_braced_quotes",150],["T_WHITESPACE"," ",150],["T_IS_IDENTICAL","===",150],["T_WHITESPACE"," ",150],["T_STRING","TRUE",150],")",["T_WHITESPACE","\n\t\t",150],"{",["T_WHITESPACE","\n\t\t\t",151],["T_VARIABLE","$str",152],["T_WHITESPACE"," ",152],"=",["T_WHITESPACE"," ",152],["T_STRING","preg_replace_callback",152],"(",["T_CONSTANT_ENCAPSED_STRING","'#\\{.+?\\}#si'",152],",",["T_WHITESPACE"," ",152],["T_ARRAY","array",152],"(",["T_VARIABLE","$this",152],",",["T_WHITESPACE"," ",152],["T_CONSTANT_ENCAPSED_STRING","'_protect_characters'",152],")",",",["T_WHITESPACE"," ",152],["T_VARIABLE","$str",152],")",";",["T_WHITESPACE","\n\t\t",152],"}",["T_WHITESPACE","\n\n\t\t",153],["T_COMMENT","\/\/ Convert \"ignore\" tags to temporary marker.  The parser splits out the string at every tag\n",155],["T_WHITESPACE","\t\t",156],["T_COMMENT","\/\/ it encounters.  Certain inline tags, like image tags, links, span tags, etc. will be\n",156],["T_WHITESPACE","\t\t",157],["T_COMMENT","\/\/ adversely affected if they are split out so we'll convert the opening bracket < temporarily to: {@TAG}\n",157],["T_WHITESPACE","\t\t",158],["T_VARIABLE","$str",158],["T_WHITESPACE"," ",158],"=",["T_WHITESPACE"," ",158],["T_STRING","preg_replace",158],"(",["T_CONSTANT_ENCAPSED_STRING","'#<(\/*)('",158],".",["T_VARIABLE","$this",158],["T_OBJECT_OPERATOR","->",158],["T_STRING","inline_elements",158],".",["T_CONSTANT_ENCAPSED_STRING","')([ >])#i'",158],",",["T_WHITESPACE"," ",158],["T_CONSTANT_ENCAPSED_STRING","'{@TAG}\\\\1\\\\2\\\\3'",158],",",["T_WHITESPACE"," ",158],["T_VARIABLE","$str",158],")",";",["T_WHITESPACE","\n\n\t\t",158],["T_COMMENT","\/* Split the string at every tag. This expression creates an array with this prototype:\n\t\t *\n\t\t *\t[array]\n\t\t *\t{\n\t\t *\t\t[0] = <opening tag>\n\t\t *\t\t[1] = Content...\n\t\t *\t\t[2] = <closing tag>\n\t\t *\t\tEtc...\n\t\t *\t}\n\t\t *\/",160],["T_WHITESPACE","\n\t\t",169],["T_VARIABLE","$chunks",170],["T_WHITESPACE"," ",170],"=",["T_WHITESPACE"," ",170],["T_STRING","preg_split",170],"(",["T_CONSTANT_ENCAPSED_STRING","'\/(<(?:[^<>]+(?:\"[^\"]*\"|\\'[^\\']*\\')?)+>)\/'",170],",",["T_WHITESPACE"," ",170],["T_VARIABLE","$str",170],",",["T_WHITESPACE"," ",170],"-",["T_LNUMBER","1",170],",",["T_WHITESPACE"," ",170],["T_STRING","PREG_SPLIT_DELIM_CAPTURE",170],"|",["T_STRING","PREG_SPLIT_NO_EMPTY",170],")",";",["T_WHITESPACE","\n\n\t\t",170],["T_COMMENT","\/\/ Build our finalized string.  We cycle through the array, skipping tags, and processing the contained text\n",172],["T_WHITESPACE","\t\t",173],["T_VARIABLE","$str",173],["T_WHITESPACE"," ",173],"=",["T_WHITESPACE"," ",173],["T_CONSTANT_ENCAPSED_STRING","''",173],";",["T_WHITESPACE","\n\t\t",173],["T_VARIABLE","$process",174],["T_WHITESPACE"," ",174],"=",["T_WHITESPACE"," ",174],["T_STRING","TRUE",174],";",["T_WHITESPACE","\n\n\t\t",174],["T_FOR","for",176],["T_WHITESPACE"," ",176],"(",["T_VARIABLE","$i",176],["T_WHITESPACE"," ",176],"=",["T_WHITESPACE"," ",176],["T_LNUMBER","0",176],",",["T_WHITESPACE"," ",176],["T_VARIABLE","$c",176],["T_WHITESPACE"," ",176],"=",["T_WHITESPACE"," ",176],["T_STRING","count",176],"(",["T_VARIABLE","$chunks",176],")",["T_WHITESPACE"," ",176],"-",["T_WHITESPACE"," ",176],["T_LNUMBER","1",176],";",["T_WHITESPACE"," ",176],["T_VARIABLE","$i",176],["T_WHITESPACE"," ",176],["T_IS_SMALLER_OR_EQUAL","<=",176],["T_WHITESPACE"," ",176],["T_VARIABLE","$c",176],";",["T_WHITESPACE"," ",176],["T_VARIABLE","$i",176],["T_INC","++",176],")",["T_WHITESPACE","\n\t\t",176],"{",["T_WHITESPACE","\n\t\t\t",177],["T_COMMENT","\/\/ Are we dealing with a tag? If so, we'll skip the processing for this cycle.\n",178],["T_WHITESPACE","\t\t\t",179],["T_COMMENT","\/\/ Well also set the \"process\" flag which allows us to skip <pre> tags and a few other things.\n",179],["T_WHITESPACE","\t\t\t",180],["T_IF","if",180],["T_WHITESPACE"," ",180],"(",["T_STRING","preg_match",180],"(",["T_CONSTANT_ENCAPSED_STRING","'#<(\/*)('",180],".",["T_VARIABLE","$this",180],["T_OBJECT_OPERATOR","->",180],["T_STRING","block_elements",180],".",["T_CONSTANT_ENCAPSED_STRING","').*?>#'",180],",",["T_WHITESPACE"," ",180],["T_VARIABLE","$chunks",180],"[",["T_VARIABLE","$i",180],"]",",",["T_WHITESPACE"," ",180],["T_VARIABLE","$match",180],")",")",["T_WHITESPACE","\n\t\t\t",180],"{",["T_WHITESPACE","\n\t\t\t\t",181],["T_IF","if",182],["T_WHITESPACE"," ",182],"(",["T_STRING","preg_match",182],"(",["T_CONSTANT_ENCAPSED_STRING","'#'",182],".",["T_VARIABLE","$this",182],["T_OBJECT_OPERATOR","->",182],["T_STRING","skip_elements",182],".",["T_CONSTANT_ENCAPSED_STRING","'#'",182],",",["T_WHITESPACE"," ",182],["T_VARIABLE","$match",182],"[",["T_LNUMBER","2",182],"]",")",")",["T_WHITESPACE","\n\t\t\t\t",182],"{",["T_WHITESPACE","\n\t\t\t\t\t",183],["T_VARIABLE","$process",184],["T_WHITESPACE"," ",184],"=",["T_WHITESPACE"," ",184],"(",["T_VARIABLE","$match",184],"[",["T_LNUMBER","1",184],"]",["T_WHITESPACE"," ",184],["T_IS_IDENTICAL","===",184],["T_WHITESPACE"," ",184],["T_CONSTANT_ENCAPSED_STRING","'\/'",184],")",";",["T_WHITESPACE","\n\t\t\t\t",184],"}",["T_WHITESPACE","\n\n\t\t\t\t",185],["T_IF","if",187],["T_WHITESPACE"," ",187],"(",["T_VARIABLE","$match",187],"[",["T_LNUMBER","1",187],"]",["T_WHITESPACE"," ",187],["T_IS_IDENTICAL","===",187],["T_WHITESPACE"," ",187],["T_CONSTANT_ENCAPSED_STRING","''",187],")",["T_WHITESPACE","\n\t\t\t\t",187],"{",["T_WHITESPACE","\n\t\t\t\t\t",188],["T_VARIABLE","$this",189],["T_OBJECT_OPERATOR","->",189],["T_STRING","last_block_element",189],["T_WHITESPACE"," ",189],"=",["T_WHITESPACE"," ",189],["T_VARIABLE","$match",189],"[",["T_LNUMBER","2",189],"]",";",["T_WHITESPACE","\n\t\t\t\t",189],"}",["T_WHITESPACE","\n\n\t\t\t\t",190],["T_VARIABLE","$str",192],["T_WHITESPACE"," ",192],["T_CONCAT_EQUAL",".=",192],["T_WHITESPACE"," ",192],["T_VARIABLE","$chunks",192],"[",["T_VARIABLE","$i",192],"]",";",["T_WHITESPACE","\n\t\t\t\t",192],["T_CONTINUE","continue",193],";",["T_WHITESPACE","\n\t\t\t",193],"}",["T_WHITESPACE","\n\n\t\t\t",194],["T_IF","if",196],["T_WHITESPACE"," ",196],"(",["T_VARIABLE","$process",196],["T_WHITESPACE"," ",196],["T_IS_IDENTICAL","===",196],["T_WHITESPACE"," ",196],["T_STRING","FALSE",196],")",["T_WHITESPACE","\n\t\t\t",196],"{",["T_WHITESPACE","\n\t\t\t\t",197],["T_VARIABLE","$str",198],["T_WHITESPACE"," ",198],["T_CONCAT_EQUAL",".=",198],["T_WHITESPACE"," ",198],["T_VARIABLE","$chunks",198],"[",["T_VARIABLE","$i",198],"]",";",["T_WHITESPACE","\n\t\t\t\t",198],["T_CONTINUE","continue",199],";",["T_WHITESPACE","\n\t\t\t",199],"}",["T_WHITESPACE","\n\n\t\t\t",200],["T_COMMENT","\/\/  Force a newline to make sure end tags get processed by _format_newlines()\n",202],["T_WHITESPACE","\t\t\t",203],["T_IF","if",203],["T_WHITESPACE"," ",203],"(",["T_VARIABLE","$i",203],["T_WHITESPACE"," ",203],["T_IS_IDENTICAL","===",203],["T_WHITESPACE"," ",203],["T_VARIABLE","$c",203],")",["T_WHITESPACE","\n\t\t\t",203],"{",["T_WHITESPACE","\n\t\t\t\t",204],["T_VARIABLE","$chunks",205],"[",["T_VARIABLE","$i",205],"]",["T_WHITESPACE"," ",205],["T_CONCAT_EQUAL",".=",205],["T_WHITESPACE"," ",205],["T_CONSTANT_ENCAPSED_STRING","\"\\n\"",205],";",["T_WHITESPACE","\n\t\t\t",205],"}",["T_WHITESPACE","\n\n\t\t\t",206],["T_COMMENT","\/\/  Convert Newlines into <p> and <br \/> tags\n",208],["T_WHITESPACE","\t\t\t",209],["T_VARIABLE","$str",209],["T_WHITESPACE"," ",209],["T_CONCAT_EQUAL",".=",209],["T_WHITESPACE"," ",209],["T_VARIABLE","$this",209],["T_OBJECT_OPERATOR","->",209],["T_STRING","_format_newlines",209],"(",["T_VARIABLE","$chunks",209],"[",["T_VARIABLE","$i",209],"]",")",";",["T_WHITESPACE","\n\t\t",209],"}",["T_WHITESPACE","\n\n\t\t",210],["T_COMMENT","\/\/ No opening block level tag? Add it if needed.\n",212],["T_WHITESPACE","\t\t",213],["T_IF","if",213],["T_WHITESPACE"," ",213],"(",["T_WHITESPACE"," ",213],"!",["T_WHITESPACE"," ",213],["T_STRING","preg_match",213],"(",["T_CONSTANT_ENCAPSED_STRING","'\/^\\s*<(?:'",213],".",["T_VARIABLE","$this",213],["T_OBJECT_OPERATOR","->",213],["T_STRING","block_elements",213],".",["T_CONSTANT_ENCAPSED_STRING","')\/i'",213],",",["T_WHITESPACE"," ",213],["T_VARIABLE","$str",213],")",")",["T_WHITESPACE","\n\t\t",213],"{",["T_WHITESPACE","\n\t\t\t",214],["T_VARIABLE","$str",215],["T_WHITESPACE"," ",215],"=",["T_WHITESPACE"," ",215],["T_STRING","preg_replace",215],"(",["T_CONSTANT_ENCAPSED_STRING","'\/^(.*?)<('",215],".",["T_VARIABLE","$this",215],["T_OBJECT_OPERATOR","->",215],["T_STRING","block_elements",215],".",["T_CONSTANT_ENCAPSED_STRING","')\/i'",215],",",["T_WHITESPACE"," ",215],["T_CONSTANT_ENCAPSED_STRING","'<p>$1<\/p><$2'",215],",",["T_WHITESPACE"," ",215],["T_VARIABLE","$str",215],")",";",["T_WHITESPACE","\n\t\t",215],"}",["T_WHITESPACE","\n\n\t\t",216],["T_COMMENT","\/\/ Convert quotes, elipsis, em-dashes, non-breaking spaces, and ampersands\n",218],["T_WHITESPACE","\t\t",219],["T_VARIABLE","$str",219],["T_WHITESPACE"," ",219],"=",["T_WHITESPACE"," ",219],["T_VARIABLE","$this",219],["T_OBJECT_OPERATOR","->",219],["T_STRING","format_characters",219],"(",["T_VARIABLE","$str",219],")",";",["T_WHITESPACE","\n\n\t\t",219],["T_COMMENT","\/\/ restore HTML comments\n",221],["T_WHITESPACE","\t\t",222],["T_FOR","for",222],["T_WHITESPACE"," ",222],"(",["T_VARIABLE","$i",222],["T_WHITESPACE"," ",222],"=",["T_WHITESPACE"," ",222],["T_LNUMBER","0",222],",",["T_WHITESPACE"," ",222],["T_VARIABLE","$total",222],["T_WHITESPACE"," ",222],"=",["T_WHITESPACE"," ",222],["T_STRING","count",222],"(",["T_VARIABLE","$html_comments",222],")",";",["T_WHITESPACE"," ",222],["T_VARIABLE","$i",222],["T_WHITESPACE"," ",222],"<",["T_WHITESPACE"," ",222],["T_VARIABLE","$total",222],";",["T_WHITESPACE"," ",222],["T_VARIABLE","$i",222],["T_INC","++",222],")",["T_WHITESPACE","\n\t\t",222],"{",["T_WHITESPACE","\n\t\t\t",223],["T_COMMENT","\/\/ remove surrounding paragraph tags, but only if there's an opening paragraph tag\n",224],["T_WHITESPACE","\t\t\t",225],["T_COMMENT","\/\/ otherwise HTML comments at the ends of paragraphs will have the closing tag removed\n",225],["T_WHITESPACE","\t\t\t",226],["T_COMMENT","\/\/ if '<p>{@HC1}' then replace <p>{@HC1}<\/p> with the comment, else replace only {@HC1} with the comment\n",226],["T_WHITESPACE","\t\t\t",227],["T_VARIABLE","$str",227],["T_WHITESPACE"," ",227],"=",["T_WHITESPACE"," ",227],["T_STRING","preg_replace",227],"(",["T_CONSTANT_ENCAPSED_STRING","'#(?(?=<p>\\{@HC'",227],".",["T_VARIABLE","$i",227],".",["T_CONSTANT_ENCAPSED_STRING","'\\})<p>\\{@HC'",227],".",["T_VARIABLE","$i",227],".",["T_CONSTANT_ENCAPSED_STRING","'\\}(\\s*<\/p>)|\\{@HC'",227],".",["T_VARIABLE","$i",227],".",["T_CONSTANT_ENCAPSED_STRING","'\\})#s'",227],",",["T_WHITESPACE"," ",227],["T_VARIABLE","$html_comments",227],"[",["T_VARIABLE","$i",227],"]",",",["T_WHITESPACE"," ",227],["T_VARIABLE","$str",227],")",";",["T_WHITESPACE","\n\t\t",227],"}",["T_WHITESPACE","\n\n\t\t",228],["T_COMMENT","\/\/ Final clean up\n",230],["T_WHITESPACE","\t\t",231],["T_VARIABLE","$table",231],["T_WHITESPACE"," ",231],"=",["T_WHITESPACE"," ",231],["T_ARRAY","array",231],"(",["T_WHITESPACE","\n\n\t\t\t\t\t\t",231],["T_COMMENT","\/\/ If the user submitted their own paragraph tags within the text\n",233],["T_WHITESPACE","\t\t\t\t\t\t",234],["T_COMMENT","\/\/ we will retain them instead of using our tags.\n",234],["T_WHITESPACE","\t\t\t\t\t\t",235],["T_CONSTANT_ENCAPSED_STRING","'\/(<p[^>*?]>)<p>\/'",235],["T_WHITESPACE","\t",235],["T_DOUBLE_ARROW","=>",235],["T_WHITESPACE"," ",235],["T_CONSTANT_ENCAPSED_STRING","'$1'",235],",",["T_WHITESPACE"," ",235],["T_COMMENT","\/\/ <?php BBEdit syntax coloring bug fix\n",235],["T_WHITESPACE","\n\t\t\t\t\t\t",236],["T_COMMENT","\/\/ Reduce multiple instances of opening\/closing paragraph tags to a single one\n",237],["T_WHITESPACE","\t\t\t\t\t\t",238],["T_CONSTANT_ENCAPSED_STRING","'#(<\/p>)+#'",238],["T_WHITESPACE","\t\t\t",238],["T_DOUBLE_ARROW","=>",238],["T_WHITESPACE"," ",238],["T_CONSTANT_ENCAPSED_STRING","'<\/p>'",238],",",["T_WHITESPACE","\n\t\t\t\t\t\t",238],["T_CONSTANT_ENCAPSED_STRING","'\/(<p>\\W*<p>)+\/'",239],["T_WHITESPACE","\t",239],["T_DOUBLE_ARROW","=>",239],["T_WHITESPACE"," ",239],["T_CONSTANT_ENCAPSED_STRING","'<p>'",239],",",["T_WHITESPACE","\n\n\t\t\t\t\t\t",239],["T_COMMENT","\/\/ Clean up stray paragraph tags that appear before block level elements\n",241],["T_WHITESPACE","\t\t\t\t\t\t",242],["T_CONSTANT_ENCAPSED_STRING","'#<p><\/p><('",242],".",["T_VARIABLE","$this",242],["T_OBJECT_OPERATOR","->",242],["T_STRING","block_elements",242],".",["T_CONSTANT_ENCAPSED_STRING","')#'",242],["T_WHITESPACE","\t",242],["T_DOUBLE_ARROW","=>",242],["T_WHITESPACE"," ",242],["T_CONSTANT_ENCAPSED_STRING","'<$1'",242],",",["T_WHITESPACE","\n\n\t\t\t\t\t\t",242],["T_COMMENT","\/\/ Clean up stray non-breaking spaces preceding block elements\n",244],["T_WHITESPACE","\t\t\t\t\t\t",245],["T_CONSTANT_ENCAPSED_STRING","'#(&nbsp;\\s*)+<('",245],".",["T_VARIABLE","$this",245],["T_OBJECT_OPERATOR","->",245],["T_STRING","block_elements",245],".",["T_CONSTANT_ENCAPSED_STRING","')#'",245],["T_WHITESPACE","\t",245],["T_DOUBLE_ARROW","=>",245],["T_WHITESPACE"," ",245],["T_CONSTANT_ENCAPSED_STRING","'  <$2'",245],",",["T_WHITESPACE","\n\n\t\t\t\t\t\t",245],["T_COMMENT","\/\/ Replace the temporary markers we added earlier\n",247],["T_WHITESPACE","\t\t\t\t\t\t",248],["T_CONSTANT_ENCAPSED_STRING","'\/\\{@TAG\\}\/'",248],["T_WHITESPACE","\t\t",248],["T_DOUBLE_ARROW","=>",248],["T_WHITESPACE"," ",248],["T_CONSTANT_ENCAPSED_STRING","'<'",248],",",["T_WHITESPACE","\n\t\t\t\t\t\t",248],["T_CONSTANT_ENCAPSED_STRING","'\/\\{@DQ\\}\/'",249],["T_WHITESPACE","\t\t\t",249],["T_DOUBLE_ARROW","=>",249],["T_WHITESPACE"," ",249],["T_CONSTANT_ENCAPSED_STRING","'\"'",249],",",["T_WHITESPACE","\n\t\t\t\t\t\t",249],["T_CONSTANT_ENCAPSED_STRING","'\/\\{@SQ\\}\/'",250],["T_WHITESPACE","\t\t\t",250],["T_DOUBLE_ARROW","=>",250],["T_WHITESPACE"," ",250],["T_CONSTANT_ENCAPSED_STRING","\"'\"",250],",",["T_WHITESPACE","\n\t\t\t\t\t\t",250],["T_CONSTANT_ENCAPSED_STRING","'\/\\{@DD\\}\/'",251],["T_WHITESPACE","\t\t\t",251],["T_DOUBLE_ARROW","=>",251],["T_WHITESPACE"," ",251],["T_CONSTANT_ENCAPSED_STRING","'--'",251],",",["T_WHITESPACE","\n\t\t\t\t\t\t",251],["T_CONSTANT_ENCAPSED_STRING","'\/\\{@NBS\\}\/'",252],["T_WHITESPACE","\t\t",252],["T_DOUBLE_ARROW","=>",252],["T_WHITESPACE"," ",252],["T_CONSTANT_ENCAPSED_STRING","'  '",252],",",["T_WHITESPACE","\n\n\t\t\t\t\t\t",252],["T_COMMENT","\/\/ An unintended consequence of the _format_newlines function is that\n",254],["T_WHITESPACE","\t\t\t\t\t\t",255],["T_COMMENT","\/\/ some of the newlines get truncated, resulting in <p> tags\n",255],["T_WHITESPACE","\t\t\t\t\t\t",256],["T_COMMENT","\/\/ starting immediately after <block> tags on the same line.\n",256],["T_WHITESPACE","\t\t\t\t\t\t",257],["T_COMMENT","\/\/ This forces a newline after such occurrences, which looks much nicer.\n",257],["T_WHITESPACE","\t\t\t\t\t\t",258],["T_CONSTANT_ENCAPSED_STRING","\"\/><p>\\n\/\"",258],["T_WHITESPACE","\t\t\t",258],["T_DOUBLE_ARROW","=>",258],["T_WHITESPACE"," ",258],["T_CONSTANT_ENCAPSED_STRING","\">\\n<p>\"",258],",",["T_WHITESPACE","\n\n\t\t\t\t\t\t",258],["T_COMMENT","\/\/ Similarly, there might be cases where a closing <\/block> will follow\n",260],["T_WHITESPACE","\t\t\t\t\t\t",261],["T_COMMENT","\/\/ a closing <\/p> tag, so we'll correct it by adding a newline in between\n",261],["T_WHITESPACE","\t\t\t\t\t\t",262],["T_CONSTANT_ENCAPSED_STRING","'#<\/p><\/#'",262],["T_WHITESPACE","\t\t\t",262],["T_DOUBLE_ARROW","=>",262],["T_WHITESPACE"," ",262],["T_CONSTANT_ENCAPSED_STRING","\"<\/p>\\n<\/\"",262],["T_WHITESPACE","\n\t\t\t\t\t\t",262],")",";",["T_WHITESPACE","\n\n\t\t",263],["T_COMMENT","\/\/ Do we need to reduce empty lines?\n",265],["T_WHITESPACE","\t\t",266],["T_IF","if",266],["T_WHITESPACE"," ",266],"(",["T_VARIABLE","$reduce_linebreaks",266],["T_WHITESPACE"," ",266],["T_IS_IDENTICAL","===",266],["T_WHITESPACE"," ",266],["T_STRING","TRUE",266],")",["T_WHITESPACE","\n\t\t",266],"{",["T_WHITESPACE","\n\t\t\t",267],["T_VARIABLE","$table",268],"[",["T_CONSTANT_ENCAPSED_STRING","'#<p>\\n*<\/p>#'",268],"]",["T_WHITESPACE"," ",268],"=",["T_WHITESPACE"," ",268],["T_CONSTANT_ENCAPSED_STRING","''",268],";",["T_WHITESPACE","\n\t\t",268],"}",["T_WHITESPACE","\n\t\t",269],["T_ELSE","else",270],["T_WHITESPACE","\n\t\t",270],"{",["T_WHITESPACE","\n\t\t\t",271],["T_COMMENT","\/\/ If we have empty paragraph tags we add a non-breaking space\n",272],["T_WHITESPACE","\t\t\t",273],["T_COMMENT","\/\/ otherwise most browsers won't treat them as true paragraphs\n",273],["T_WHITESPACE","\t\t\t",274],["T_VARIABLE","$table",274],"[",["T_CONSTANT_ENCAPSED_STRING","'#<p><\/p>#'",274],"]",["T_WHITESPACE"," ",274],"=",["T_WHITESPACE"," ",274],["T_CONSTANT_ENCAPSED_STRING","'<p>&nbsp;<\/p>'",274],";",["T_WHITESPACE","\n\t\t",274],"}",["T_WHITESPACE","\n\n\t\t",275],["T_RETURN","return",277],["T_WHITESPACE"," ",277],["T_STRING","preg_replace",277],"(",["T_STRING","array_keys",277],"(",["T_VARIABLE","$table",277],")",",",["T_WHITESPACE"," ",277],["T_VARIABLE","$table",277],",",["T_WHITESPACE"," ",277],["T_VARIABLE","$str",277],")",";",["T_WHITESPACE","\n\n\t",277],"}",["T_WHITESPACE","\n\n\t",279],["T_COMMENT","\/\/ --------------------------------------------------------------------\n",281],["T_WHITESPACE","\n\t",282],["T_DOC_COMMENT","\/**\n\t * Format Characters\n\t *\n\t * This function mainly converts double and single quotes\n\t * to curly entities, but it also converts em-dashes,\n\t * double spaces, and ampersands\n\t *\n\t * @param\tstring\n\t * @return\tstring\n\t *\/",283],["T_WHITESPACE","\n\t",292],["T_PUBLIC","public",293],["T_WHITESPACE"," ",293],["T_FUNCTION","function",293],["T_WHITESPACE"," ",293],["T_STRING","format_characters",293],"(",["T_VARIABLE","$str",293],")",["T_WHITESPACE","\n\t",293],"{",["T_WHITESPACE","\n\t\t",294],["T_STATIC","static",295],["T_WHITESPACE"," ",295],["T_VARIABLE","$table",295],";",["T_WHITESPACE","\n\n\t\t",295],["T_IF","if",297],["T_WHITESPACE"," ",297],"(",["T_WHITESPACE"," ",297],"!",["T_WHITESPACE"," ",297],["T_ISSET","isset",297],"(",["T_VARIABLE","$table",297],")",")",["T_WHITESPACE","\n\t\t",297],"{",["T_WHITESPACE","\n\t\t\t",298],["T_VARIABLE","$table",299],["T_WHITESPACE"," ",299],"=",["T_WHITESPACE"," ",299],["T_ARRAY","array",299],"(",["T_WHITESPACE","\n\t\t\t\t\t\t\t",299],["T_COMMENT","\/\/ nested smart quotes, opening and closing\n",300],["T_WHITESPACE","\t\t\t\t\t\t\t",301],["T_COMMENT","\/\/ note that rules for grammar (English) allow only for two levels deep\n",301],["T_WHITESPACE","\t\t\t\t\t\t\t",302],["T_COMMENT","\/\/ and that single quotes are _supposed_ to always be on the outside\n",302],["T_WHITESPACE","\t\t\t\t\t\t\t",303],["T_COMMENT","\/\/ but we'll accommodate both\n",303],["T_WHITESPACE","\t\t\t\t\t\t\t",304],["T_COMMENT","\/\/ Note that in all cases, whitespace is the primary determining factor\n",304],["T_WHITESPACE","\t\t\t\t\t\t\t",305],["T_COMMENT","\/\/ on which direction to curl, with non-word characters like punctuation\n",305],["T_WHITESPACE","\t\t\t\t\t\t\t",306],["T_COMMENT","\/\/ being a secondary factor only after whitespace is addressed.\n",306],["T_WHITESPACE","\t\t\t\t\t\t\t",307],["T_CONSTANT_ENCAPSED_STRING","'\/\\'\"(\\s|$)\/'",307],["T_WHITESPACE","\t\t\t\t\t",307],["T_DOUBLE_ARROW","=>",307],["T_WHITESPACE"," ",307],["T_CONSTANT_ENCAPSED_STRING","'&#8217;&#8221;$1'",307],",",["T_WHITESPACE","\n\t\t\t\t\t\t\t",307],["T_CONSTANT_ENCAPSED_STRING","'\/(^|\\s|<p>)\\'\"\/'",308],["T_WHITESPACE","\t\t\t\t",308],["T_DOUBLE_ARROW","=>",308],["T_WHITESPACE"," ",308],["T_CONSTANT_ENCAPSED_STRING","'$1&#8216;&#8220;'",308],",",["T_WHITESPACE","\n\t\t\t\t\t\t\t",308],["T_CONSTANT_ENCAPSED_STRING","'\/\\'\"(\\W)\/'",309],["T_WHITESPACE","\t\t\t\t\t\t",309],["T_DOUBLE_ARROW","=>",309],["T_WHITESPACE"," ",309],["T_CONSTANT_ENCAPSED_STRING","'&#8217;&#8221;$1'",309],",",["T_WHITESPACE","\n\t\t\t\t\t\t\t",309],["T_CONSTANT_ENCAPSED_STRING","'\/(\\W)\\'\"\/'",310],["T_WHITESPACE","\t\t\t\t\t\t",310],["T_DOUBLE_ARROW","=>",310],["T_WHITESPACE"," ",310],["T_CONSTANT_ENCAPSED_STRING","'$1&#8216;&#8220;'",310],",",["T_WHITESPACE","\n\t\t\t\t\t\t\t",310],["T_CONSTANT_ENCAPSED_STRING","'\/\"\\'(\\s|$)\/'",311],["T_WHITESPACE","\t\t\t\t\t",311],["T_DOUBLE_ARROW","=>",311],["T_WHITESPACE"," ",311],["T_CONSTANT_ENCAPSED_STRING","'&#8221;&#8217;$1'",311],",",["T_WHITESPACE","\n\t\t\t\t\t\t\t",311],["T_CONSTANT_ENCAPSED_STRING","'\/(^|\\s|<p>)\"\\'\/'",312],["T_WHITESPACE","\t\t\t\t",312],["T_DOUBLE_ARROW","=>",312],["T_WHITESPACE"," ",312],["T_CONSTANT_ENCAPSED_STRING","'$1&#8220;&#8216;'",312],",",["T_WHITESPACE","\n\t\t\t\t\t\t\t",312],["T_CONSTANT_ENCAPSED_STRING","'\/\"\\'(\\W)\/'",313],["T_WHITESPACE","\t\t\t\t\t\t",313],["T_DOUBLE_ARROW","=>",313],["T_WHITESPACE"," ",313],["T_CONSTANT_ENCAPSED_STRING","'&#8221;&#8217;$1'",313],",",["T_WHITESPACE","\n\t\t\t\t\t\t\t",313],["T_CONSTANT_ENCAPSED_STRING","'\/(\\W)\"\\'\/'",314],["T_WHITESPACE","\t\t\t\t\t\t",314],["T_DOUBLE_ARROW","=>",314],["T_WHITESPACE"," ",314],["T_CONSTANT_ENCAPSED_STRING","'$1&#8220;&#8216;'",314],",",["T_WHITESPACE","\n\n\t\t\t\t\t\t\t",314],["T_COMMENT","\/\/ single quote smart quotes\n",316],["T_WHITESPACE","\t\t\t\t\t\t\t",317],["T_CONSTANT_ENCAPSED_STRING","'\/\\'(\\s|$)\/'",317],["T_WHITESPACE","\t\t\t\t\t",317],["T_DOUBLE_ARROW","=>",317],["T_WHITESPACE"," ",317],["T_CONSTANT_ENCAPSED_STRING","'&#8217;$1'",317],",",["T_WHITESPACE","\n\t\t\t\t\t\t\t",317],["T_CONSTANT_ENCAPSED_STRING","'\/(^|\\s|<p>)\\'\/'",318],["T_WHITESPACE","\t\t\t\t",318],["T_DOUBLE_ARROW","=>",318],["T_WHITESPACE"," ",318],["T_CONSTANT_ENCAPSED_STRING","'$1&#8216;'",318],",",["T_WHITESPACE","\n\t\t\t\t\t\t\t",318],["T_CONSTANT_ENCAPSED_STRING","'\/\\'(\\W)\/'",319],["T_WHITESPACE","\t\t\t\t\t\t",319],["T_DOUBLE_ARROW","=>",319],["T_WHITESPACE"," ",319],["T_CONSTANT_ENCAPSED_STRING","'&#8217;$1'",319],",",["T_WHITESPACE","\n\t\t\t\t\t\t\t",319],["T_CONSTANT_ENCAPSED_STRING","'\/(\\W)\\'\/'",320],["T_WHITESPACE","\t\t\t\t\t\t",320],["T_DOUBLE_ARROW","=>",320],["T_WHITESPACE"," ",320],["T_CONSTANT_ENCAPSED_STRING","'$1&#8216;'",320],",",["T_WHITESPACE","\n\n\t\t\t\t\t\t\t",320],["T_COMMENT","\/\/ double quote smart quotes\n",322],["T_WHITESPACE","\t\t\t\t\t\t\t",323],["T_CONSTANT_ENCAPSED_STRING","'\/\"(\\s|$)\/'",323],["T_WHITESPACE","\t\t\t\t\t\t",323],["T_DOUBLE_ARROW","=>",323],["T_WHITESPACE"," ",323],["T_CONSTANT_ENCAPSED_STRING","'&#8221;$1'",323],",",["T_WHITESPACE","\n\t\t\t\t\t\t\t",323],["T_CONSTANT_ENCAPSED_STRING","'\/(^|\\s|<p>)\"\/'",324],["T_WHITESPACE","\t\t\t\t\t",324],["T_DOUBLE_ARROW","=>",324],["T_WHITESPACE"," ",324],["T_CONSTANT_ENCAPSED_STRING","'$1&#8220;'",324],",",["T_WHITESPACE","\n\t\t\t\t\t\t\t",324],["T_CONSTANT_ENCAPSED_STRING","'\/\"(\\W)\/'",325],["T_WHITESPACE","\t\t\t\t\t\t",325],["T_DOUBLE_ARROW","=>",325],["T_WHITESPACE"," ",325],["T_CONSTANT_ENCAPSED_STRING","'&#8221;$1'",325],",",["T_WHITESPACE","\n\t\t\t\t\t\t\t",325],["T_CONSTANT_ENCAPSED_STRING","'\/(\\W)\"\/'",326],["T_WHITESPACE","\t\t\t\t\t\t",326],["T_DOUBLE_ARROW","=>",326],["T_WHITESPACE"," ",326],["T_CONSTANT_ENCAPSED_STRING","'$1&#8220;'",326],",",["T_WHITESPACE","\n\n\t\t\t\t\t\t\t",326],["T_COMMENT","\/\/ apostrophes\n",328],["T_WHITESPACE","\t\t\t\t\t\t\t",329],["T_CONSTANT_ENCAPSED_STRING","\"\/(\\w)'(\\w)\/\"",329],["T_WHITESPACE","\t\t\t\t\t",329],["T_DOUBLE_ARROW","=>",329],["T_WHITESPACE"," ",329],["T_CONSTANT_ENCAPSED_STRING","'$1&#8217;$2'",329],",",["T_WHITESPACE","\n\n\t\t\t\t\t\t\t",329],["T_COMMENT","\/\/ Em dash and ellipses dots\n",331],["T_WHITESPACE","\t\t\t\t\t\t\t",332],["T_CONSTANT_ENCAPSED_STRING","'\/\\s?\\-\\-\\s?\/'",332],["T_WHITESPACE","\t\t\t\t\t",332],["T_DOUBLE_ARROW","=>",332],["T_WHITESPACE"," ",332],["T_CONSTANT_ENCAPSED_STRING","'&#8212;'",332],",",["T_WHITESPACE","\n\t\t\t\t\t\t\t",332],["T_CONSTANT_ENCAPSED_STRING","'\/(\\w)\\.{3}\/'",333],["T_WHITESPACE","\t\t\t\t\t",333],["T_DOUBLE_ARROW","=>",333],["T_WHITESPACE"," ",333],["T_CONSTANT_ENCAPSED_STRING","'$1&#8230;'",333],",",["T_WHITESPACE","\n\n\t\t\t\t\t\t\t",333],["T_COMMENT","\/\/ double space after sentences\n",335],["T_WHITESPACE","\t\t\t\t\t\t\t",336],["T_CONSTANT_ENCAPSED_STRING","'\/(\\W)  \/'",336],["T_WHITESPACE","\t\t\t\t\t\t",336],["T_DOUBLE_ARROW","=>",336],["T_WHITESPACE"," ",336],["T_CONSTANT_ENCAPSED_STRING","'$1&nbsp; '",336],",",["T_WHITESPACE","\n\n\t\t\t\t\t\t\t",336],["T_COMMENT","\/\/ ampersands, if not a character entity\n",338],["T_WHITESPACE","\t\t\t\t\t\t\t",339],["T_CONSTANT_ENCAPSED_STRING","'\/&(?!#?[a-zA-Z0-9]{2,};)\/'",339],["T_WHITESPACE","\t\t",339],["T_DOUBLE_ARROW","=>",339],["T_WHITESPACE"," ",339],["T_CONSTANT_ENCAPSED_STRING","'&amp;'",339],["T_WHITESPACE","\n\t\t\t\t\t\t",339],")",";",["T_WHITESPACE","\n\t\t",340],"}",["T_WHITESPACE","\n\n\t\t",341],["T_RETURN","return",343],["T_WHITESPACE"," ",343],["T_STRING","preg_replace",343],"(",["T_STRING","array_keys",343],"(",["T_VARIABLE","$table",343],")",",",["T_WHITESPACE"," ",343],["T_VARIABLE","$table",343],",",["T_WHITESPACE"," ",343],["T_VARIABLE","$str",343],")",";",["T_WHITESPACE","\n\t",343],"}",["T_WHITESPACE","\n\n\t",344],["T_COMMENT","\/\/ --------------------------------------------------------------------\n",346],["T_WHITESPACE","\n\t",347],["T_DOC_COMMENT","\/**\n\t * Format Newlines\n\t *\n\t * Converts newline characters into either <p> tags or <br \/>\n\t *\n\t * @param\tstring\n\t * @return\tstring\n\t *\/",348],["T_WHITESPACE","\n\t",355],["T_PROTECTED","protected",356],["T_WHITESPACE"," ",356],["T_FUNCTION","function",356],["T_WHITESPACE"," ",356],["T_STRING","_format_newlines",356],"(",["T_VARIABLE","$str",356],")",["T_WHITESPACE","\n\t",356],"{",["T_WHITESPACE","\n\t\t",357],["T_IF","if",358],["T_WHITESPACE"," ",358],"(",["T_VARIABLE","$str",358],["T_WHITESPACE"," ",358],["T_IS_IDENTICAL","===",358],["T_WHITESPACE"," ",358],["T_CONSTANT_ENCAPSED_STRING","''",358],["T_WHITESPACE"," ",358],["T_LOGICAL_OR","OR",358],["T_WHITESPACE"," ",358],"(",["T_STRING","strpos",358],"(",["T_VARIABLE","$str",358],",",["T_WHITESPACE"," ",358],["T_CONSTANT_ENCAPSED_STRING","\"\\n\"",358],")",["T_WHITESPACE"," ",358],["T_IS_IDENTICAL","===",358],["T_WHITESPACE"," ",358],["T_STRING","FALSE",358],["T_WHITESPACE"," ",358],["T_BOOLEAN_AND","&&",358],["T_WHITESPACE"," ",358],"!",["T_WHITESPACE"," ",358],["T_STRING","in_array",358],"(",["T_VARIABLE","$this",358],["T_OBJECT_OPERATOR","->",358],["T_STRING","last_block_element",358],",",["T_WHITESPACE"," ",358],["T_VARIABLE","$this",358],["T_OBJECT_OPERATOR","->",358],["T_STRING","inner_block_required",358],")",")",")",["T_WHITESPACE","\n\t\t",358],"{",["T_WHITESPACE","\n\t\t\t",359],["T_RETURN","return",360],["T_WHITESPACE"," ",360],["T_VARIABLE","$str",360],";",["T_WHITESPACE","\n\t\t",360],"}",["T_WHITESPACE","\n\n\t\t",361],["T_COMMENT","\/\/ Convert two consecutive newlines to paragraphs\n",363],["T_WHITESPACE","\t\t",364],["T_VARIABLE","$str",364],["T_WHITESPACE"," ",364],"=",["T_WHITESPACE"," ",364],["T_STRING","str_replace",364],"(",["T_CONSTANT_ENCAPSED_STRING","\"\\n\\n\"",364],",",["T_WHITESPACE"," ",364],["T_CONSTANT_ENCAPSED_STRING","\"<\/p>\\n\\n<p>\"",364],",",["T_WHITESPACE"," ",364],["T_VARIABLE","$str",364],")",";",["T_WHITESPACE","\n\n\t\t",364],["T_COMMENT","\/\/ Convert single spaces to <br \/> tags\n",366],["T_WHITESPACE","\t\t",367],["T_VARIABLE","$str",367],["T_WHITESPACE"," ",367],"=",["T_WHITESPACE"," ",367],["T_STRING","preg_replace",367],"(",["T_CONSTANT_ENCAPSED_STRING","\"\/([^\\n])(\\n)([^\\n])\/\"",367],",",["T_WHITESPACE"," ",367],["T_CONSTANT_ENCAPSED_STRING","'\\\\1<br \/>\\\\2\\\\3'",367],",",["T_WHITESPACE"," ",367],["T_VARIABLE","$str",367],")",";",["T_WHITESPACE","\n\n\t\t",367],["T_COMMENT","\/\/ Wrap the whole enchilada in enclosing paragraphs\n",369],["T_WHITESPACE","\t\t",370],["T_IF","if",370],["T_WHITESPACE"," ",370],"(",["T_VARIABLE","$str",370],["T_WHITESPACE"," ",370],["T_IS_NOT_IDENTICAL","!==",370],["T_WHITESPACE"," ",370],["T_CONSTANT_ENCAPSED_STRING","\"\\n\"",370],")",["T_WHITESPACE","\n\t\t",370],"{",["T_WHITESPACE","\n\t\t\t",371],["T_COMMENT","\/\/ We trim off the right-side new line so that the closing <\/p> tag\n",372],["T_WHITESPACE","\t\t\t",373],["T_COMMENT","\/\/ will be positioned immediately following the string, matching\n",373],["T_WHITESPACE","\t\t\t",374],["T_COMMENT","\/\/ the behavior of the opening <p> tag\n",374],["T_WHITESPACE","\t\t\t",375],["T_VARIABLE","$str",375],["T_WHITESPACE"," ",375],"=",["T_WHITESPACE","  ",375],["T_CONSTANT_ENCAPSED_STRING","'<p>'",375],".",["T_STRING","rtrim",375],"(",["T_VARIABLE","$str",375],")",".",["T_CONSTANT_ENCAPSED_STRING","'<\/p>'",375],";",["T_WHITESPACE","\n\t\t",375],"}",["T_WHITESPACE","\n\n\t\t",376],["T_COMMENT","\/\/ Remove empty paragraphs if they are on the first line, as this\n",378],["T_WHITESPACE","\t\t",379],["T_COMMENT","\/\/ is a potential unintended consequence of the previous code\n",379],["T_WHITESPACE","\t\t",380],["T_RETURN","return",380],["T_WHITESPACE"," ",380],["T_STRING","preg_replace",380],"(",["T_CONSTANT_ENCAPSED_STRING","'\/<p><\\\/p>(.*)\/'",380],",",["T_WHITESPACE"," ",380],["T_CONSTANT_ENCAPSED_STRING","'\\\\1'",380],",",["T_WHITESPACE"," ",380],["T_VARIABLE","$str",380],",",["T_WHITESPACE"," ",380],["T_LNUMBER","1",380],")",";",["T_WHITESPACE","\n\t",380],"}",["T_WHITESPACE","\n\n\t",381],["T_COMMENT","\/\/ ------------------------------------------------------------------------\n",383],["T_WHITESPACE","\n\t",384],["T_DOC_COMMENT","\/**\n\t * Protect Characters\n\t *\n\t * Protects special characters from being formatted later\n\t * We don't want quotes converted within tags so we'll temporarily convert them to {@DQ} and {@SQ}\n\t * and we don't want double dashes converted to emdash entities, so they are marked with {@DD}\n\t * likewise double spaces are converted to {@NBS} to prevent entity conversion\n\t *\n\t * @param\tarray\n\t * @return\tstring\n\t *\/",385],["T_WHITESPACE","\n\t",395],["T_PROTECTED","protected",396],["T_WHITESPACE"," ",396],["T_FUNCTION","function",396],["T_WHITESPACE"," ",396],["T_STRING","_protect_characters",396],"(",["T_VARIABLE","$match",396],")",["T_WHITESPACE","\n\t",396],"{",["T_WHITESPACE","\n\t\t",397],["T_RETURN","return",398],["T_WHITESPACE"," ",398],["T_STRING","str_replace",398],"(",["T_ARRAY","array",398],"(",["T_CONSTANT_ENCAPSED_STRING","\"'\"",398],",",["T_CONSTANT_ENCAPSED_STRING","'\"'",398],",",["T_CONSTANT_ENCAPSED_STRING","'--'",398],",",["T_CONSTANT_ENCAPSED_STRING","'  '",398],")",",",["T_WHITESPACE"," ",398],["T_ARRAY","array",398],"(",["T_CONSTANT_ENCAPSED_STRING","'{@SQ}'",398],",",["T_WHITESPACE"," ",398],["T_CONSTANT_ENCAPSED_STRING","'{@DQ}'",398],",",["T_WHITESPACE"," ",398],["T_CONSTANT_ENCAPSED_STRING","'{@DD}'",398],",",["T_WHITESPACE"," ",398],["T_CONSTANT_ENCAPSED_STRING","'{@NBS}'",398],")",",",["T_WHITESPACE"," ",398],["T_VARIABLE","$match",398],"[",["T_LNUMBER","0",398],"]",")",";",["T_WHITESPACE","\n\t",398],"}",["T_WHITESPACE","\n\n\t",399],["T_COMMENT","\/\/ --------------------------------------------------------------------\n",401],["T_WHITESPACE","\n\t",402],["T_DOC_COMMENT","\/**\n\t * Convert newlines to HTML line breaks except within PRE tags\n\t *\n\t * @param\tstring\n\t * @return\tstring\n\t *\/",403],["T_WHITESPACE","\n\t",408],["T_PUBLIC","public",409],["T_WHITESPACE"," ",409],["T_FUNCTION","function",409],["T_WHITESPACE"," ",409],["T_STRING","nl2br_except_pre",409],"(",["T_VARIABLE","$str",409],")",["T_WHITESPACE","\n\t",409],"{",["T_WHITESPACE","\n\t\t",410],["T_VARIABLE","$newstr",411],["T_WHITESPACE"," ",411],"=",["T_WHITESPACE"," ",411],["T_CONSTANT_ENCAPSED_STRING","''",411],";",["T_WHITESPACE","\n\t\t",411],["T_FOR","for",412],["T_WHITESPACE"," ",412],"(",["T_VARIABLE","$ex",412],["T_WHITESPACE"," ",412],"=",["T_WHITESPACE"," ",412],["T_STRING","explode",412],"(",["T_CONSTANT_ENCAPSED_STRING","'pre>'",412],",",["T_WHITESPACE"," ",412],["T_VARIABLE","$str",412],")",",",["T_WHITESPACE"," ",412],["T_VARIABLE","$ct",412],["T_WHITESPACE"," ",412],"=",["T_WHITESPACE"," ",412],["T_STRING","count",412],"(",["T_VARIABLE","$ex",412],")",",",["T_WHITESPACE"," ",412],["T_VARIABLE","$i",412],["T_WHITESPACE"," ",412],"=",["T_WHITESPACE"," ",412],["T_LNUMBER","0",412],";",["T_WHITESPACE"," ",412],["T_VARIABLE","$i",412],["T_WHITESPACE"," ",412],"<",["T_WHITESPACE"," ",412],["T_VARIABLE","$ct",412],";",["T_WHITESPACE"," ",412],["T_VARIABLE","$i",412],["T_INC","++",412],")",["T_WHITESPACE","\n\t\t",412],"{",["T_WHITESPACE","\n\t\t\t",413],["T_VARIABLE","$newstr",414],["T_WHITESPACE"," ",414],["T_CONCAT_EQUAL",".=",414],["T_WHITESPACE"," ",414],"(","(",["T_VARIABLE","$i",414],["T_WHITESPACE"," ",414],"%",["T_WHITESPACE"," ",414],["T_LNUMBER","2",414],")",["T_WHITESPACE"," ",414],["T_IS_IDENTICAL","===",414],["T_WHITESPACE"," ",414],["T_LNUMBER","0",414],")",["T_WHITESPACE"," ",414],"?",["T_WHITESPACE"," ",414],["T_STRING","nl2br",414],"(",["T_VARIABLE","$ex",414],"[",["T_VARIABLE","$i",414],"]",")",["T_WHITESPACE"," ",414],":",["T_WHITESPACE"," ",414],["T_VARIABLE","$ex",414],"[",["T_VARIABLE","$i",414],"]",";",["T_WHITESPACE","\n\t\t\t",414],["T_IF","if",415],["T_WHITESPACE"," ",415],"(",["T_VARIABLE","$ct",415],["T_WHITESPACE"," ",415],"-",["T_WHITESPACE"," ",415],["T_LNUMBER","1",415],["T_WHITESPACE"," ",415],["T_IS_NOT_IDENTICAL","!==",415],["T_WHITESPACE"," ",415],["T_VARIABLE","$i",415],")",["T_WHITESPACE","\n\t\t\t",415],"{",["T_WHITESPACE","\n\t\t\t\t",416],["T_VARIABLE","$newstr",417],["T_WHITESPACE"," ",417],["T_CONCAT_EQUAL",".=",417],["T_WHITESPACE"," ",417],["T_CONSTANT_ENCAPSED_STRING","'pre>'",417],";",["T_WHITESPACE","\n\t\t\t",417],"}",["T_WHITESPACE","\n\t\t",418],"}",["T_WHITESPACE","\n\n\t\t",419],["T_RETURN","return",421],["T_WHITESPACE"," ",421],["T_VARIABLE","$newstr",421],";",["T_WHITESPACE","\n\t",421],"}",["T_WHITESPACE","\n\n",422],"}",["T_WHITESPACE","\n",424]]
[["T_OPEN_TAG","<?php\n",1],["T_DOC_COMMENT","\/**\n * CodeIgniter\n *\n * An open source application development framework for PHP\n *\n * This content is released under the MIT License (MIT)\n *\n * Copyright (c) 2014 - 2017, British Columbia Institute of Technology\n *\n * Permission is hereby granted, free of charge, to any person obtaining a copy\n * of this software and associated documentation files (the \"Software\"), to deal\n * in the Software without restriction, including without limitation the rights\n * to use, copy, modify, merge, publish, distribute, sublicense, and\/or sell\n * copies of the Software, and to permit persons to whom the Software is\n * furnished to do so, subject to the following conditions:\n *\n * The above copyright notice and this permission notice shall be included in\n * all copies or substantial portions of the Software.\n *\n * THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN\n * THE SOFTWARE.\n *\n * @package\tCodeIgniter\n * @author\tEllisLab Dev Team\n * @copyright\tCopyright (c) 2008 - 2014, EllisLab, Inc. (https:\/\/ellislab.com\/)\n * @copyright\tCopyright (c) 2014 - 2017, British Columbia Institute of Technology (http:\/\/bcit.ca\/)\n * @license\thttp:\/\/opensource.org\/licenses\/MIT\tMIT License\n * @link\thttps:\/\/codeigniter.com\n * @since\tVersion 1.0.0\n * @filesource\n *\/",2],["T_WHITESPACE","\n",37],["T_STRING","defined",38],"(",["T_CONSTANT_ENCAPSED_STRING","'BASEPATH'",38],")",["T_WHITESPACE"," ",38],["T_LOGICAL_OR","OR",38],["T_WHITESPACE"," ",38],["T_EXIT","exit",38],"(",["T_CONSTANT_ENCAPSED_STRING","'No direct script access allowed'",38],")",";",["T_WHITESPACE","\n\n",38],["T_DOC_COMMENT","\/**\n * File Uploading Class\n *\n * @package\t\tCodeIgniter\n * @subpackage\tLibraries\n * @category\tUploads\n * @author\t\tEllisLab Dev Team\n * @link\t\thttps:\/\/codeigniter.com\/user_guide\/libraries\/file_uploading.html\n *\/",40],["T_WHITESPACE","\n",48],["T_CLASS","class",49],["T_WHITESPACE"," ",49],["T_STRING","CI_Upload",49],["T_WHITESPACE"," ",49],"{",["T_WHITESPACE","\n\n\t",49],["T_DOC_COMMENT","\/**\n\t * Maximum file size\n\t *\n\t * @var\tint\n\t *\/",51],["T_WHITESPACE","\n\t",55],["T_PUBLIC","public",56],["T_WHITESPACE"," ",56],["T_VARIABLE","$max_size",56],["T_WHITESPACE"," ",56],"=",["T_WHITESPACE"," ",56],["T_LNUMBER","0",56],";",["T_WHITESPACE","\n\n\t",56],["T_DOC_COMMENT","\/**\n\t * Maximum image width\n\t *\n\t * @var\tint\n\t *\/",58],["T_WHITESPACE","\n\t",62],["T_PUBLIC","public",63],["T_WHITESPACE"," ",63],["T_VARIABLE","$max_width",63],["T_WHITESPACE"," ",63],"=",["T_WHITESPACE"," ",63],["T_LNUMBER","0",63],";",["T_WHITESPACE","\n\n\t",63],["T_DOC_COMMENT","\/**\n\t * Maximum image height\n\t *\n\t * @var\tint\n\t *\/",65],["T_WHITESPACE","\n\t",69],["T_PUBLIC","public",70],["T_WHITESPACE"," ",70],["T_VARIABLE","$max_height",70],["T_WHITESPACE"," ",70],"=",["T_WHITESPACE"," ",70],["T_LNUMBER","0",70],";",["T_WHITESPACE","\n\n\t",70],["T_DOC_COMMENT","\/**\n\t * Minimum image width\n\t *\n\t * @var\tint\n\t *\/",72],["T_WHITESPACE","\n\t",76],["T_PUBLIC","public",77],["T_WHITESPACE"," ",77],["T_VARIABLE","$min_width",77],["T_WHITESPACE"," ",77],"=",["T_WHITESPACE"," ",77],["T_LNUMBER","0",77],";",["T_WHITESPACE","\n\n\t",77],["T_DOC_COMMENT","\/**\n\t * Minimum image height\n\t *\n\t * @var\tint\n\t *\/",79],["T_WHITESPACE","\n\t",83],["T_PUBLIC","public",84],["T_WHITESPACE"," ",84],["T_VARIABLE","$min_height",84],["T_WHITESPACE"," ",84],"=",["T_WHITESPACE"," ",84],["T_LNUMBER","0",84],";",["T_WHITESPACE","\n\n\t",84],["T_DOC_COMMENT","\/**\n\t * Maximum filename length\n\t *\n\t * @var\tint\n\t *\/",86],["T_WHITESPACE","\n\t",90],["T_PUBLIC","public",91],["T_WHITESPACE"," ",91],["T_VARIABLE","$max_filename",91],["T_WHITESPACE"," ",91],"=",["T_WHITESPACE"," ",91],["T_LNUMBER","0",91],";",["T_WHITESPACE","\n\n\t",91],["T_DOC_COMMENT","\/**\n\t * Maximum duplicate filename increment ID\n\t *\n\t * @var\tint\n\t *\/",93],["T_WHITESPACE","\n\t",97],["T_PUBLIC","public",98],["T_WHITESPACE"," ",98],["T_VARIABLE","$max_filename_increment",98],["T_WHITESPACE"," ",98],"=",["T_WHITESPACE"," ",98],["T_LNUMBER","100",98],";",["T_WHITESPACE","\n\n\t",98],["T_DOC_COMMENT","\/**\n\t * Allowed file types\n\t *\n\t * @var\tstring\n\t *\/",100],["T_WHITESPACE","\n\t",104],["T_PUBLIC","public",105],["T_WHITESPACE"," ",105],["T_VARIABLE","$allowed_types",105],["T_WHITESPACE"," ",105],"=",["T_WHITESPACE"," ",105],["T_CONSTANT_ENCAPSED_STRING","''",105],";",["T_WHITESPACE","\n\n\t",105],["T_DOC_COMMENT","\/**\n\t * Temporary filename\n\t *\n\t * @var\tstring\n\t *\/",107],["T_WHITESPACE","\n\t",111],["T_PUBLIC","public",112],["T_WHITESPACE"," ",112],["T_VARIABLE","$file_temp",112],["T_WHITESPACE"," ",112],"=",["T_WHITESPACE"," ",112],["T_CONSTANT_ENCAPSED_STRING","''",112],";",["T_WHITESPACE","\n\n\t",112],["T_DOC_COMMENT","\/**\n\t * Filename\n\t *\n\t * @var\tstring\n\t *\/",114],["T_WHITESPACE","\n\t",118],["T_PUBLIC","public",119],["T_WHITESPACE"," ",119],["T_VARIABLE","$file_name",119],["T_WHITESPACE"," ",119],"=",["T_WHITESPACE"," ",119],["T_CONSTANT_ENCAPSED_STRING","''",119],";",["T_WHITESPACE","\n\n\t",119],["T_DOC_COMMENT","\/**\n\t * Original filename\n\t *\n\t * @var\tstring\n\t *\/",121],["T_WHITESPACE","\n\t",125],["T_PUBLIC","public",126],["T_WHITESPACE"," ",126],["T_VARIABLE","$orig_name",126],["T_WHITESPACE"," ",126],"=",["T_WHITESPACE"," ",126],["T_CONSTANT_ENCAPSED_STRING","''",126],";",["T_WHITESPACE","\n\n\t",126],["T_DOC_COMMENT","\/**\n\t * File type\n\t *\n\t * @var\tstring\n\t *\/",128],["T_WHITESPACE","\n\t",132],["T_PUBLIC","public",133],["T_WHITESPACE"," ",133],["T_VARIABLE","$file_type",133],["T_WHITESPACE"," ",133],"=",["T_WHITESPACE"," ",133],["T_CONSTANT_ENCAPSED_STRING","''",133],";",["T_WHITESPACE","\n\n\t",133],["T_DOC_COMMENT","\/**\n\t * File size\n\t *\n\t * @var\tint\n\t *\/",135],["T_WHITESPACE","\n\t",139],["T_PUBLIC","public",140],["T_WHITESPACE"," ",140],["T_VARIABLE","$file_size",140],["T_WHITESPACE"," ",140],"=",["T_WHITESPACE"," ",140],["T_STRING","NULL",140],";",["T_WHITESPACE","\n\n\t",140],["T_DOC_COMMENT","\/**\n\t * Filename extension\n\t *\n\t * @var\tstring\n\t *\/",142],["T_WHITESPACE","\n\t",146],["T_PUBLIC","public",147],["T_WHITESPACE"," ",147],["T_VARIABLE","$file_ext",147],["T_WHITESPACE"," ",147],"=",["T_WHITESPACE"," ",147],["T_CONSTANT_ENCAPSED_STRING","''",147],";",["T_WHITESPACE","\n\n\t",147],["T_DOC_COMMENT","\/**\n\t * Force filename extension to lowercase\n\t *\n\t * @var\tstring\n\t *\/",149],["T_WHITESPACE","\n\t",153],["T_PUBLIC","public",154],["T_WHITESPACE"," ",154],["T_VARIABLE","$file_ext_tolower",154],["T_WHITESPACE"," ",154],"=",["T_WHITESPACE"," ",154],["T_STRING","FALSE",154],";",["T_WHITESPACE","\n\n\t",154],["T_DOC_COMMENT","\/**\n\t * Upload path\n\t *\n\t * @var\tstring\n\t *\/",156],["T_WHITESPACE","\n\t",160],["T_PUBLIC","public",161],["T_WHITESPACE"," ",161],["T_VARIABLE","$upload_path",161],["T_WHITESPACE"," ",161],"=",["T_WHITESPACE"," ",161],["T_CONSTANT_ENCAPSED_STRING","''",161],";",["T_WHITESPACE","\n\n\t",161],["T_DOC_COMMENT","\/**\n\t * Overwrite flag\n\t *\n\t * @var\tbool\n\t *\/",163],["T_WHITESPACE","\n\t",167],["T_PUBLIC","public",168],["T_WHITESPACE"," ",168],["T_VARIABLE","$overwrite",168],["T_WHITESPACE"," ",168],"=",["T_WHITESPACE"," ",168],["T_STRING","FALSE",168],";",["T_WHITESPACE","\n\n\t",168],["T_DOC_COMMENT","\/**\n\t * Obfuscate filename flag\n\t *\n\t * @var\tbool\n\t *\/",170],["T_WHITESPACE","\n\t",174],["T_PUBLIC","public",175],["T_WHITESPACE"," ",175],["T_VARIABLE","$encrypt_name",175],["T_WHITESPACE"," ",175],"=",["T_WHITESPACE"," ",175],["T_STRING","FALSE",175],";",["T_WHITESPACE","\n\n\t",175],["T_DOC_COMMENT","\/**\n\t * Is image flag\n\t *\n\t * @var\tbool\n\t *\/",177],["T_WHITESPACE","\n\t",181],["T_PUBLIC","public",182],["T_WHITESPACE"," ",182],["T_VARIABLE","$is_image",182],["T_WHITESPACE"," ",182],"=",["T_WHITESPACE"," ",182],["T_STRING","FALSE",182],";",["T_WHITESPACE","\n\n\t",182],["T_DOC_COMMENT","\/**\n\t * Image width\n\t *\n\t * @var\tint\n\t *\/",184],["T_WHITESPACE","\n\t",188],["T_PUBLIC","public",189],["T_WHITESPACE"," ",189],["T_VARIABLE","$image_width",189],["T_WHITESPACE"," ",189],"=",["T_WHITESPACE"," ",189],["T_STRING","NULL",189],";",["T_WHITESPACE","\n\n\t",189],["T_DOC_COMMENT","\/**\n\t * Image height\n\t *\n\t * @var\tint\n\t *\/",191],["T_WHITESPACE","\n\t",195],["T_PUBLIC","public",196],["T_WHITESPACE"," ",196],["T_VARIABLE","$image_height",196],["T_WHITESPACE"," ",196],"=",["T_WHITESPACE"," ",196],["T_STRING","NULL",196],";",["T_WHITESPACE","\n\n\t",196],["T_DOC_COMMENT","\/**\n\t * Image type\n\t *\n\t * @var\tstring\n\t *\/",198],["T_WHITESPACE","\n\t",202],["T_PUBLIC","public",203],["T_WHITESPACE"," ",203],["T_VARIABLE","$image_type",203],["T_WHITESPACE"," ",203],"=",["T_WHITESPACE"," ",203],["T_CONSTANT_ENCAPSED_STRING","''",203],";",["T_WHITESPACE","\n\n\t",203],["T_DOC_COMMENT","\/**\n\t * Image size string\n\t *\n\t * @var\tstring\n\t *\/",205],["T_WHITESPACE","\n\t",209],["T_PUBLIC","public",210],["T_WHITESPACE"," ",210],["T_VARIABLE","$image_size_str",210],["T_WHITESPACE"," ",210],"=",["T_WHITESPACE"," ",210],["T_CONSTANT_ENCAPSED_STRING","''",210],";",["T_WHITESPACE","\n\n\t",210],["T_DOC_COMMENT","\/**\n\t * Error messages list\n\t *\n\t * @var\tarray\n\t *\/",212],["T_WHITESPACE","\n\t",216],["T_PUBLIC","public",217],["T_WHITESPACE"," ",217],["T_VARIABLE","$error_msg",217],["T_WHITESPACE"," ",217],"=",["T_WHITESPACE"," ",217],["T_ARRAY","array",217],"(",")",";",["T_WHITESPACE","\n\n\t",217],["T_DOC_COMMENT","\/**\n\t * Remove spaces flag\n\t *\n\t * @var\tbool\n\t *\/",219],["T_WHITESPACE","\n\t",223],["T_PUBLIC","public",224],["T_WHITESPACE"," ",224],["T_VARIABLE","$remove_spaces",224],["T_WHITESPACE"," ",224],"=",["T_WHITESPACE"," ",224],["T_STRING","TRUE",224],";",["T_WHITESPACE","\n\n\t",224],["T_DOC_COMMENT","\/**\n\t * MIME detection flag\n\t *\n\t * @var\tbool\n\t *\/",226],["T_WHITESPACE","\n\t",230],["T_PUBLIC","public",231],["T_WHITESPACE"," ",231],["T_VARIABLE","$detect_mime",231],["T_WHITESPACE"," ",231],"=",["T_WHITESPACE"," ",231],["T_STRING","TRUE",231],";",["T_WHITESPACE","\n\n\t",231],["T_DOC_COMMENT","\/**\n\t * XSS filter flag\n\t *\n\t * @var\tbool\n\t *\/",233],["T_WHITESPACE","\n\t",237],["T_PUBLIC","public",238],["T_WHITESPACE"," ",238],["T_VARIABLE","$xss_clean",238],["T_WHITESPACE"," ",238],"=",["T_WHITESPACE"," ",238],["T_STRING","FALSE",238],";",["T_WHITESPACE","\n\n\t",238],["T_DOC_COMMENT","\/**\n\t * Apache mod_mime fix flag\n\t *\n\t * @var\tbool\n\t *\/",240],["T_WHITESPACE","\n\t",244],["T_PUBLIC","public",245],["T_WHITESPACE"," ",245],["T_VARIABLE","$mod_mime_fix",245],["T_WHITESPACE"," ",245],"=",["T_WHITESPACE"," ",245],["T_STRING","TRUE",245],";",["T_WHITESPACE","\n\n\t",245],["T_DOC_COMMENT","\/**\n\t * Temporary filename prefix\n\t *\n\t * @var\tstring\n\t *\/",247],["T_WHITESPACE","\n\t",251],["T_PUBLIC","public",252],["T_WHITESPACE"," ",252],["T_VARIABLE","$temp_prefix",252],["T_WHITESPACE"," ",252],"=",["T_WHITESPACE"," ",252],["T_CONSTANT_ENCAPSED_STRING","'temp_file_'",252],";",["T_WHITESPACE","\n\n\t",252],["T_DOC_COMMENT","\/**\n\t * Filename sent by the client\n\t *\n\t * @var\tbool\n\t *\/",254],["T_WHITESPACE","\n\t",258],["T_PUBLIC","public",259],["T_WHITESPACE"," ",259],["T_VARIABLE","$client_name",259],["T_WHITESPACE"," ",259],"=",["T_WHITESPACE"," ",259],["T_CONSTANT_ENCAPSED_STRING","''",259],";",["T_WHITESPACE","\n\n\t",259],["T_COMMENT","\/\/ --------------------------------------------------------------------\n",261],["T_WHITESPACE","\n\t",262],["T_DOC_COMMENT","\/**\n\t * Filename override\n\t *\n\t * @var\tstring\n\t *\/",263],["T_WHITESPACE","\n\t",267],["T_PROTECTED","protected",268],["T_WHITESPACE"," ",268],["T_VARIABLE","$_file_name_override",268],["T_WHITESPACE"," ",268],"=",["T_WHITESPACE"," ",268],["T_CONSTANT_ENCAPSED_STRING","''",268],";",["T_WHITESPACE","\n\n\t",268],["T_DOC_COMMENT","\/**\n\t * MIME types list\n\t *\n\t * @var\tarray\n\t *\/",270],["T_WHITESPACE","\n\t",274],["T_PROTECTED","protected",275],["T_WHITESPACE"," ",275],["T_VARIABLE","$_mimes",275],["T_WHITESPACE"," ",275],"=",["T_WHITESPACE"," ",275],["T_ARRAY","array",275],"(",")",";",["T_WHITESPACE","\n\n\t",275],["T_DOC_COMMENT","\/**\n\t * CI Singleton\n\t *\n\t * @var\tobject\n\t *\/",277],["T_WHITESPACE","\n\t",281],["T_PROTECTED","protected",282],["T_WHITESPACE"," ",282],["T_VARIABLE","$_CI",282],";",["T_WHITESPACE","\n\n\t",282],["T_COMMENT","\/\/ --------------------------------------------------------------------\n",284],["T_WHITESPACE","\n\t",285],["T_DOC_COMMENT","\/**\n\t * Constructor\n\t *\n\t * @param\tarray\t$config\n\t * @return\tvoid\n\t *\/",286],["T_WHITESPACE","\n\t",291],["T_PUBLIC","public",292],["T_WHITESPACE"," ",292],["T_FUNCTION","function",292],["T_WHITESPACE"," ",292],["T_STRING","__construct",292],"(",["T_VARIABLE","$config",292],["T_WHITESPACE"," ",292],"=",["T_WHITESPACE"," ",292],["T_ARRAY","array",292],"(",")",")",["T_WHITESPACE","\n\t",292],"{",["T_WHITESPACE","\n\t\t",293],["T_EMPTY","empty",294],"(",["T_VARIABLE","$config",294],")",["T_WHITESPACE"," ",294],["T_LOGICAL_OR","OR",294],["T_WHITESPACE"," ",294],["T_VARIABLE","$this",294],["T_OBJECT_OPERATOR","->",294],["T_STRING","initialize",294],"(",["T_VARIABLE","$config",294],",",["T_WHITESPACE"," ",294],["T_STRING","FALSE",294],")",";",["T_WHITESPACE","\n\n\t\t",294],["T_VARIABLE","$this",296],["T_OBJECT_OPERATOR","->",296],["T_STRING","_mimes",296],["T_WHITESPACE"," ",296],"=","&",["T_WHITESPACE"," ",296],["T_STRING","get_mimes",296],"(",")",";",["T_WHITESPACE","\n\t\t",296],["T_VARIABLE","$this",297],["T_OBJECT_OPERATOR","->",297],["T_STRING","_CI",297],["T_WHITESPACE"," ",297],"=","&",["T_WHITESPACE"," ",297],["T_STRING","get_instance",297],"(",")",";",["T_WHITESPACE","\n\n\t\t",297],["T_STRING","log_message",299],"(",["T_CONSTANT_ENCAPSED_STRING","'info'",299],",",["T_WHITESPACE"," ",299],["T_CONSTANT_ENCAPSED_STRING","'Upload Class Initialized'",299],")",";",["T_WHITESPACE","\n\t",299],"}",["T_WHITESPACE","\n\n\t",300],["T_COMMENT","\/\/ --------------------------------------------------------------------\n",302],["T_WHITESPACE","\n\t",303],["T_DOC_COMMENT","\/**\n\t * Initialize preferences\n\t *\n\t * @param\tarray\t$config\n\t * @param\tbool\t$reset\n\t * @return\tCI_Upload\n\t *\/",304],["T_WHITESPACE","\n\t",310],["T_PUBLIC","public",311],["T_WHITESPACE"," ",311],["T_FUNCTION","function",311],["T_WHITESPACE"," ",311],["T_STRING","initialize",311],"(",["T_ARRAY","array",311],["T_WHITESPACE"," ",311],["T_VARIABLE","$config",311],["T_WHITESPACE"," ",311],"=",["T_WHITESPACE"," ",311],["T_ARRAY","array",311],"(",")",",",["T_WHITESPACE"," ",311],["T_VARIABLE","$reset",311],["T_WHITESPACE"," ",311],"=",["T_WHITESPACE"," ",311],["T_STRING","TRUE",311],")",["T_WHITESPACE","\n\t",311],"{",["T_WHITESPACE","\n\t\t",312],["T_VARIABLE","$reflection",313],["T_WHITESPACE"," ",313],"=",["T_WHITESPACE"," ",313],["T_NEW","new",313],["T_WHITESPACE"," ",313],["T_STRING","ReflectionClass",313],"(",["T_VARIABLE","$this",313],")",";",["T_WHITESPACE","\n\n\t\t",313],["T_IF","if",315],["T_WHITESPACE"," ",315],"(",["T_VARIABLE","$reset",315],["T_WHITESPACE"," ",315],["T_IS_IDENTICAL","===",315],["T_WHITESPACE"," ",315],["T_STRING","TRUE",315],")",["T_WHITESPACE","\n\t\t",315],"{",["T_WHITESPACE","\n\t\t\t",316],["T_VARIABLE","$defaults",317],["T_WHITESPACE"," ",317],"=",["T_WHITESPACE"," ",317],["T_VARIABLE","$reflection",317],["T_OBJECT_OPERATOR","->",317],["T_STRING","getDefaultProperties",317],"(",")",";",["T_WHITESPACE","\n\t\t\t",317],["T_FOREACH","foreach",318],["T_WHITESPACE"," ",318],"(",["T_STRING","array_keys",318],"(",["T_VARIABLE","$defaults",318],")",["T_WHITESPACE"," ",318],["T_AS","as",318],["T_WHITESPACE"," ",318],["T_VARIABLE","$key",318],")",["T_WHITESPACE","\n\t\t\t",318],"{",["T_WHITESPACE","\n\t\t\t\t",319],["T_IF","if",320],["T_WHITESPACE"," ",320],"(",["T_VARIABLE","$key",320],"[",["T_LNUMBER","0",320],"]",["T_WHITESPACE"," ",320],["T_IS_IDENTICAL","===",320],["T_WHITESPACE"," ",320],["T_CONSTANT_ENCAPSED_STRING","'_'",320],")",["T_WHITESPACE","\n\t\t\t\t",320],"{",["T_WHITESPACE","\n\t\t\t\t\t",321],["T_CONTINUE","continue",322],";",["T_WHITESPACE","\n\t\t\t\t",322],"}",["T_WHITESPACE","\n\n\t\t\t\t",323],["T_IF","if",325],["T_WHITESPACE"," ",325],"(",["T_ISSET","isset",325],"(",["T_VARIABLE","$config",325],"[",["T_VARIABLE","$key",325],"]",")",")",["T_WHITESPACE","\n\t\t\t\t",325],"{",["T_WHITESPACE","\n\t\t\t\t\t",326],["T_IF","if",327],["T_WHITESPACE"," ",327],"(",["T_VARIABLE","$reflection",327],["T_OBJECT_OPERATOR","->",327],["T_STRING","hasMethod",327],"(",["T_CONSTANT_ENCAPSED_STRING","'set_'",327],".",["T_VARIABLE","$key",327],")",")",["T_WHITESPACE","\n\t\t\t\t\t",327],"{",["T_WHITESPACE","\n\t\t\t\t\t\t",328],["T_VARIABLE","$this",329],["T_OBJECT_OPERATOR","->",329],"{",["T_CONSTANT_ENCAPSED_STRING","'set_'",329],".",["T_VARIABLE","$key",329],"}","(",["T_VARIABLE","$config",329],"[",["T_VARIABLE","$key",329],"]",")",";",["T_WHITESPACE","\n\t\t\t\t\t",329],"}",["T_WHITESPACE","\n\t\t\t\t\t",330],["T_ELSE","else",331],["T_WHITESPACE","\n\t\t\t\t\t",331],"{",["T_WHITESPACE","\n\t\t\t\t\t\t",332],["T_VARIABLE","$this",333],["T_OBJECT_OPERATOR","->",333],["T_VARIABLE","$key",333],["T_WHITESPACE"," ",333],"=",["T_WHITESPACE"," ",333],["T_VARIABLE","$config",333],"[",["T_VARIABLE","$key",333],"]",";",["T_WHITESPACE","\n\t\t\t\t\t",333],"}",["T_WHITESPACE","\n\t\t\t\t",334],"}",["T_WHITESPACE","\n\t\t\t\t",335],["T_ELSE","else",336],["T_WHITESPACE","\n\t\t\t\t",336],"{",["T_WHITESPACE","\n\t\t\t\t\t",337],["T_VARIABLE","$this",338],["T_OBJECT_OPERATOR","->",338],["T_VARIABLE","$key",338],["T_WHITESPACE"," ",338],"=",["T_WHITESPACE"," ",338],["T_VARIABLE","$defaults",338],"[",["T_VARIABLE","$key",338],"]",";",["T_WHITESPACE","\n\t\t\t\t",338],"}",["T_WHITESPACE","\n\t\t\t",339],"}",["T_WHITESPACE","\n\t\t",340],"}",["T_WHITESPACE","\n\t\t",341],["T_ELSE","else",342],["T_WHITESPACE","\n\t\t",342],"{",["T_WHITESPACE","\n\t\t\t",343],["T_FOREACH","foreach",344],["T_WHITESPACE"," ",344],"(",["T_VARIABLE","$config",344],["T_WHITESPACE"," ",344],["T_AS","as",344],["T_WHITESPACE"," ",344],["T_VARIABLE","$key",344],["T_WHITESPACE"," ",344],["T_DOUBLE_ARROW","=>",344],["T_WHITESPACE"," ",344],"&",["T_VARIABLE","$value",344],")",["T_WHITESPACE","\n\t\t\t",344],"{",["T_WHITESPACE","\n\t\t\t\t",345],["T_IF","if",346],["T_WHITESPACE"," ",346],"(",["T_VARIABLE","$key",346],"[",["T_LNUMBER","0",346],"]",["T_WHITESPACE"," ",346],["T_IS_NOT_IDENTICAL","!==",346],["T_WHITESPACE"," ",346],["T_CONSTANT_ENCAPSED_STRING","'_'",346],["T_WHITESPACE"," ",346],["T_BOOLEAN_AND","&&",346],["T_WHITESPACE"," ",346],["T_VARIABLE","$reflection",346],["T_OBJECT_OPERATOR","->",346],["T_STRING","hasProperty",346],"(",["T_VARIABLE","$key",346],")",")",["T_WHITESPACE","\n\t\t\t\t",346],"{",["T_WHITESPACE","\n\t\t\t\t\t",347],["T_IF","if",348],["T_WHITESPACE"," ",348],"(",["T_VARIABLE","$reflection",348],["T_OBJECT_OPERATOR","->",348],["T_STRING","hasMethod",348],"(",["T_CONSTANT_ENCAPSED_STRING","'set_'",348],".",["T_VARIABLE","$key",348],")",")",["T_WHITESPACE","\n\t\t\t\t\t",348],"{",["T_WHITESPACE","\n\t\t\t\t\t\t",349],["T_VARIABLE","$this",350],["T_OBJECT_OPERATOR","->",350],"{",["T_CONSTANT_ENCAPSED_STRING","'set_'",350],".",["T_VARIABLE","$key",350],"}","(",["T_VARIABLE","$value",350],")",";",["T_WHITESPACE","\n\t\t\t\t\t",350],"}",["T_WHITESPACE","\n\t\t\t\t\t",351],["T_ELSE","else",352],["T_WHITESPACE","\n\t\t\t\t\t",352],"{",["T_WHITESPACE","\n\t\t\t\t\t\t",353],["T_VARIABLE","$this",354],["T_OBJECT_OPERATOR","->",354],["T_VARIABLE","$key",354],["T_WHITESPACE"," ",354],"=",["T_WHITESPACE"," ",354],["T_VARIABLE","$value",354],";",["T_WHITESPACE","\n\t\t\t\t\t",354],"}",["T_WHITESPACE","\n\t\t\t\t",355],"}",["T_WHITESPACE","\n\t\t\t",356],"}",["T_WHITESPACE","\n\t\t",357],"}",["T_WHITESPACE","\n\n\t\t",358],["T_COMMENT","\/\/ if a file_name was provided in the config, use it instead of the user input\n",360],["T_WHITESPACE","\t\t",361],["T_COMMENT","\/\/ supplied file name for all uploads until initialized again\n",361],["T_WHITESPACE","\t\t",362],["T_VARIABLE","$this",362],["T_OBJECT_OPERATOR","->",362],["T_STRING","_file_name_override",362],["T_WHITESPACE"," ",362],"=",["T_WHITESPACE"," ",362],["T_VARIABLE","$this",362],["T_OBJECT_OPERATOR","->",362],["T_STRING","file_name",362],";",["T_WHITESPACE","\n\t\t",362],["T_RETURN","return",363],["T_WHITESPACE"," ",363],["T_VARIABLE","$this",363],";",["T_WHITESPACE","\n\t",363],"}",["T_WHITESPACE","\n\n\t",364],["T_COMMENT","\/\/ --------------------------------------------------------------------\n",366],["T_WHITESPACE","\n\t",367],["T_DOC_COMMENT","\/**\n\t * Perform the file upload\n\t *\n\t * @param\tstring\t$field\n\t * @return\tbool\n\t *\/",368],["T_WHITESPACE","\n\t",373],["T_PUBLIC","public",374],["T_WHITESPACE"," ",374],["T_FUNCTION","function",374],["T_WHITESPACE"," ",374],["T_STRING","do_upload",374],"(",["T_VARIABLE","$field",374],["T_WHITESPACE"," ",374],"=",["T_WHITESPACE"," ",374],["T_CONSTANT_ENCAPSED_STRING","'userfile'",374],")",["T_WHITESPACE","\n\t",374],"{",["T_WHITESPACE","\n\t\t",375],["T_COMMENT","\/\/ Is $_FILES[$field] set? If not, no reason to continue.\n",376],["T_WHITESPACE","\t\t",377],["T_IF","if",377],["T_WHITESPACE"," ",377],"(",["T_ISSET","isset",377],"(",["T_VARIABLE","$_FILES",377],"[",["T_VARIABLE","$field",377],"]",")",")",["T_WHITESPACE","\n\t\t",377],"{",["T_WHITESPACE","\n\t\t\t",378],["T_VARIABLE","$_file",379],["T_WHITESPACE"," ",379],"=",["T_WHITESPACE"," ",379],["T_VARIABLE","$_FILES",379],"[",["T_VARIABLE","$field",379],"]",";",["T_WHITESPACE","\n\t\t",379],"}",["T_WHITESPACE","\n\t\t",380],["T_COMMENT","\/\/ Does the field name contain array notation?\n",381],["T_WHITESPACE","\t\t",382],["T_ELSEIF","elseif",382],["T_WHITESPACE"," ",382],"(","(",["T_VARIABLE","$c",382],["T_WHITESPACE"," ",382],"=",["T_WHITESPACE"," ",382],["T_STRING","preg_match_all",382],"(",["T_CONSTANT_ENCAPSED_STRING","'\/(?:^[^\\[]+)|\\[[^]]*\\]\/'",382],",",["T_WHITESPACE"," ",382],["T_VARIABLE","$field",382],",",["T_WHITESPACE"," ",382],["T_VARIABLE","$matches",382],")",")",["T_WHITESPACE"," ",382],">",["T_WHITESPACE"," ",382],["T_LNUMBER","1",382],")",["T_WHITESPACE","\n\t\t",382],"{",["T_WHITESPACE","\n\t\t\t",383],["T_VARIABLE","$_file",384],["T_WHITESPACE"," ",384],"=",["T_WHITESPACE"," ",384],["T_VARIABLE","$_FILES",384],";",["T_WHITESPACE","\n\t\t\t",384],["T_FOR","for",385],["T_WHITESPACE"," ",385],"(",["T_VARIABLE","$i",385],["T_WHITESPACE"," ",385],"=",["T_WHITESPACE"," ",385],["T_LNUMBER","0",385],";",["T_WHITESPACE"," ",385],["T_VARIABLE","$i",385],["T_WHITESPACE"," ",385],"<",["T_WHITESPACE"," ",385],["T_VARIABLE","$c",385],";",["T_WHITESPACE"," ",385],["T_VARIABLE","$i",385],["T_INC","++",385],")",["T_WHITESPACE","\n\t\t\t",385],"{",["T_WHITESPACE","\n\t\t\t\t",386],["T_COMMENT","\/\/ We can't track numeric iterations, only full field names are accepted\n",387],["T_WHITESPACE","\t\t\t\t",388],["T_IF","if",388],["T_WHITESPACE"," ",388],"(","(",["T_VARIABLE","$field",388],["T_WHITESPACE"," ",388],"=",["T_WHITESPACE"," ",388],["T_STRING","trim",388],"(",["T_VARIABLE","$matches",388],"[",["T_LNUMBER","0",388],"]","[",["T_VARIABLE","$i",388],"]",",",["T_WHITESPACE"," ",388],["T_CONSTANT_ENCAPSED_STRING","'[]'",388],")",")",["T_WHITESPACE"," ",388],["T_IS_IDENTICAL","===",388],["T_WHITESPACE"," ",388],["T_CONSTANT_ENCAPSED_STRING","''",388],["T_WHITESPACE"," ",388],["T_LOGICAL_OR","OR",388],["T_WHITESPACE"," ",388],"!",["T_WHITESPACE"," ",388],["T_ISSET","isset",388],"(",["T_VARIABLE","$_file",388],"[",["T_VARIABLE","$field",388],"]",")",")",["T_WHITESPACE","\n\t\t\t\t",388],"{",["T_WHITESPACE","\n\t\t\t\t\t",389],["T_VARIABLE","$_file",390],["T_WHITESPACE"," ",390],"=",["T_WHITESPACE"," ",390],["T_STRING","NULL",390],";",["T_WHITESPACE","\n\t\t\t\t\t",390],["T_BREAK","break",391],";",["T_WHITESPACE","\n\t\t\t\t",391],"}",["T_WHITESPACE","\n\n\t\t\t\t",392],["T_VARIABLE","$_file",394],["T_WHITESPACE"," ",394],"=",["T_WHITESPACE"," ",394],["T_VARIABLE","$_file",394],"[",["T_VARIABLE","$field",394],"]",";",["T_WHITESPACE","\n\t\t\t",394],"}",["T_WHITESPACE","\n\t\t",395],"}",["T_WHITESPACE","\n\n\t\t",396],["T_IF","if",398],["T_WHITESPACE"," ",398],"(",["T_WHITESPACE"," ",398],"!",["T_WHITESPACE"," ",398],["T_ISSET","isset",398],"(",["T_VARIABLE","$_file",398],")",")",["T_WHITESPACE","\n\t\t",398],"{",["T_WHITESPACE","\n\t\t\t",399],["T_VARIABLE","$this",400],["T_OBJECT_OPERATOR","->",400],["T_STRING","set_error",400],"(",["T_CONSTANT_ENCAPSED_STRING","'upload_no_file_selected'",400],",",["T_WHITESPACE"," ",400],["T_CONSTANT_ENCAPSED_STRING","'debug'",400],")",";",["T_WHITESPACE","\n\t\t\t",400],["T_RETURN","return",401],["T_WHITESPACE"," ",401],["T_STRING","FALSE",401],";",["T_WHITESPACE","\n\t\t",401],"}",["T_WHITESPACE","\n\n\t\t",402],["T_COMMENT","\/\/ Is the upload path valid?\n",404],["T_WHITESPACE","\t\t",405],["T_IF","if",405],["T_WHITESPACE"," ",405],"(",["T_WHITESPACE"," ",405],"!",["T_WHITESPACE"," ",405],["T_VARIABLE","$this",405],["T_OBJECT_OPERATOR","->",405],["T_STRING","validate_upload_path",405],"(",")",")",["T_WHITESPACE","\n\t\t",405],"{",["T_WHITESPACE","\n\t\t\t",406],["T_COMMENT","\/\/ errors will already be set by validate_upload_path() so just return FALSE\n",407],["T_WHITESPACE","\t\t\t",408],["T_RETURN","return",408],["T_WHITESPACE"," ",408],["T_STRING","FALSE",408],";",["T_WHITESPACE","\n\t\t",408],"}",["T_WHITESPACE","\n\n\t\t",409],["T_COMMENT","\/\/ Was the file able to be uploaded? If not, determine the reason why.\n",411],["T_WHITESPACE","\t\t",412],["T_IF","if",412],["T_WHITESPACE"," ",412],"(",["T_WHITESPACE"," ",412],"!",["T_WHITESPACE"," ",412],["T_STRING","is_uploaded_file",412],"(",["T_VARIABLE","$_file",412],"[",["T_CONSTANT_ENCAPSED_STRING","'tmp_name'",412],"]",")",")",["T_WHITESPACE","\n\t\t",412],"{",["T_WHITESPACE","\n\t\t\t",413],["T_VARIABLE","$error",414],["T_WHITESPACE"," ",414],"=",["T_WHITESPACE"," ",414],["T_ISSET","isset",414],"(",["T_VARIABLE","$_file",414],"[",["T_CONSTANT_ENCAPSED_STRING","'error'",414],"]",")",["T_WHITESPACE"," ",414],"?",["T_WHITESPACE"," ",414],["T_VARIABLE","$_file",414],"[",["T_CONSTANT_ENCAPSED_STRING","'error'",414],"]",["T_WHITESPACE"," ",414],":",["T_WHITESPACE"," ",414],["T_LNUMBER","4",414],";",["T_WHITESPACE","\n\n\t\t\t",414],["T_SWITCH","switch",416],["T_WHITESPACE"," ",416],"(",["T_VARIABLE","$error",416],")",["T_WHITESPACE","\n\t\t\t",416],"{",["T_WHITESPACE","\n\t\t\t\t",417],["T_CASE","case",418],["T_WHITESPACE"," ",418],["T_STRING","UPLOAD_ERR_INI_SIZE",418],":",["T_WHITESPACE","\n\t\t\t\t\t",418],["T_VARIABLE","$this",419],["T_OBJECT_OPERATOR","->",419],["T_STRING","set_error",419],"(",["T_CONSTANT_ENCAPSED_STRING","'upload_file_exceeds_limit'",419],",",["T_WHITESPACE"," ",419],["T_CONSTANT_ENCAPSED_STRING","'info'",419],")",";",["T_WHITESPACE","\n\t\t\t\t\t",419],["T_BREAK","break",420],";",["T_WHITESPACE","\n\t\t\t\t",420],["T_CASE","case",421],["T_WHITESPACE"," ",421],["T_STRING","UPLOAD_ERR_FORM_SIZE",421],":",["T_WHITESPACE","\n\t\t\t\t\t",421],["T_VARIABLE","$this",422],["T_OBJECT_OPERATOR","->",422],["T_STRING","set_error",422],"(",["T_CONSTANT_ENCAPSED_STRING","'upload_file_exceeds_form_limit'",422],",",["T_WHITESPACE"," ",422],["T_CONSTANT_ENCAPSED_STRING","'info'",422],")",";",["T_WHITESPACE","\n\t\t\t\t\t",422],["T_BREAK","break",423],";",["T_WHITESPACE","\n\t\t\t\t",423],["T_CASE","case",424],["T_WHITESPACE"," ",424],["T_STRING","UPLOAD_ERR_PARTIAL",424],":",["T_WHITESPACE","\n\t\t\t\t\t",424],["T_VARIABLE","$this",425],["T_OBJECT_OPERATOR","->",425],["T_STRING","set_error",425],"(",["T_CONSTANT_ENCAPSED_STRING","'upload_file_partial'",425],",",["T_WHITESPACE"," ",425],["T_CONSTANT_ENCAPSED_STRING","'debug'",425],")",";",["T_WHITESPACE","\n\t\t\t\t\t",425],["T_BREAK","break",426],";",["T_WHITESPACE","\n\t\t\t\t",426],["T_CASE","case",427],["T_WHITESPACE"," ",427],["T_STRING","UPLOAD_ERR_NO_FILE",427],":",["T_WHITESPACE","\n\t\t\t\t\t",427],["T_VARIABLE","$this",428],["T_OBJECT_OPERATOR","->",428],["T_STRING","set_error",428],"(",["T_CONSTANT_ENCAPSED_STRING","'upload_no_file_selected'",428],",",["T_WHITESPACE"," ",428],["T_CONSTANT_ENCAPSED_STRING","'debug'",428],")",";",["T_WHITESPACE","\n\t\t\t\t\t",428],["T_BREAK","break",429],";",["T_WHITESPACE","\n\t\t\t\t",429],["T_CASE","case",430],["T_WHITESPACE"," ",430],["T_STRING","UPLOAD_ERR_NO_TMP_DIR",430],":",["T_WHITESPACE","\n\t\t\t\t\t",430],["T_VARIABLE","$this",431],["T_OBJECT_OPERATOR","->",431],["T_STRING","set_error",431],"(",["T_CONSTANT_ENCAPSED_STRING","'upload_no_temp_directory'",431],",",["T_WHITESPACE"," ",431],["T_CONSTANT_ENCAPSED_STRING","'error'",431],")",";",["T_WHITESPACE","\n\t\t\t\t\t",431],["T_BREAK","break",432],";",["T_WHITESPACE","\n\t\t\t\t",432],["T_CASE","case",433],["T_WHITESPACE"," ",433],["T_STRING","UPLOAD_ERR_CANT_WRITE",433],":",["T_WHITESPACE","\n\t\t\t\t\t",433],["T_VARIABLE","$this",434],["T_OBJECT_OPERATOR","->",434],["T_STRING","set_error",434],"(",["T_CONSTANT_ENCAPSED_STRING","'upload_unable_to_write_file'",434],",",["T_WHITESPACE"," ",434],["T_CONSTANT_ENCAPSED_STRING","'error'",434],")",";",["T_WHITESPACE","\n\t\t\t\t\t",434],["T_BREAK","break",435],";",["T_WHITESPACE","\n\t\t\t\t",435],["T_CASE","case",436],["T_WHITESPACE"," ",436],["T_STRING","UPLOAD_ERR_EXTENSION",436],":",["T_WHITESPACE","\n\t\t\t\t\t",436],["T_VARIABLE","$this",437],["T_OBJECT_OPERATOR","->",437],["T_STRING","set_error",437],"(",["T_CONSTANT_ENCAPSED_STRING","'upload_stopped_by_extension'",437],",",["T_WHITESPACE"," ",437],["T_CONSTANT_ENCAPSED_STRING","'debug'",437],")",";",["T_WHITESPACE","\n\t\t\t\t\t",437],["T_BREAK","break",438],";",["T_WHITESPACE","\n\t\t\t\t",438],["T_DEFAULT","default",439],":",["T_WHITESPACE","\n\t\t\t\t\t",439],["T_VARIABLE","$this",440],["T_OBJECT_OPERATOR","->",440],["T_STRING","set_error",440],"(",["T_CONSTANT_ENCAPSED_STRING","'upload_no_file_selected'",440],",",["T_WHITESPACE"," ",440],["T_CONSTANT_ENCAPSED_STRING","'debug'",440],")",";",["T_WHITESPACE","\n\t\t\t\t\t",440],["T_BREAK","break",441],";",["T_WHITESPACE","\n\t\t\t",441],"}",["T_WHITESPACE","\n\n\t\t\t",442],["T_RETURN","return",444],["T_WHITESPACE"," ",444],["T_STRING","FALSE",444],";",["T_WHITESPACE","\n\t\t",444],"}",["T_WHITESPACE","\n\n\t\t",445],["T_COMMENT","\/\/ Set the uploaded data as class variables\n",447],["T_WHITESPACE","\t\t",448],["T_VARIABLE","$this",448],["T_OBJECT_OPERATOR","->",448],["T_STRING","file_temp",448],["T_WHITESPACE"," ",448],"=",["T_WHITESPACE"," ",448],["T_VARIABLE","$_file",448],"[",["T_CONSTANT_ENCAPSED_STRING","'tmp_name'",448],"]",";",["T_WHITESPACE","\n\t\t",448],["T_VARIABLE","$this",449],["T_OBJECT_OPERATOR","->",449],["T_STRING","file_size",449],["T_WHITESPACE"," ",449],"=",["T_WHITESPACE"," ",449],["T_VARIABLE","$_file",449],"[",["T_CONSTANT_ENCAPSED_STRING","'size'",449],"]",";",["T_WHITESPACE","\n\n\t\t",449],["T_COMMENT","\/\/ Skip MIME type detection?\n",451],["T_WHITESPACE","\t\t",452],["T_IF","if",452],["T_WHITESPACE"," ",452],"(",["T_VARIABLE","$this",452],["T_OBJECT_OPERATOR","->",452],["T_STRING","detect_mime",452],["T_WHITESPACE"," ",452],["T_IS_NOT_IDENTICAL","!==",452],["T_WHITESPACE"," ",452],["T_STRING","FALSE",452],")",["T_WHITESPACE","\n\t\t",452],"{",["T_WHITESPACE","\n\t\t\t",453],["T_VARIABLE","$this",454],["T_OBJECT_OPERATOR","->",454],["T_STRING","_file_mime_type",454],"(",["T_VARIABLE","$_file",454],")",";",["T_WHITESPACE","\n\t\t",454],"}",["T_WHITESPACE","\n\n\t\t",455],["T_VARIABLE","$this",457],["T_OBJECT_OPERATOR","->",457],["T_STRING","file_type",457],["T_WHITESPACE"," ",457],"=",["T_WHITESPACE"," ",457],["T_STRING","preg_replace",457],"(",["T_CONSTANT_ENCAPSED_STRING","'\/^(.+?);.*$\/'",457],",",["T_WHITESPACE"," ",457],["T_CONSTANT_ENCAPSED_STRING","'\\\\1'",457],",",["T_WHITESPACE"," ",457],["T_VARIABLE","$this",457],["T_OBJECT_OPERATOR","->",457],["T_STRING","file_type",457],")",";",["T_WHITESPACE","\n\t\t",457],["T_VARIABLE","$this",458],["T_OBJECT_OPERATOR","->",458],["T_STRING","file_type",458],["T_WHITESPACE"," ",458],"=",["T_WHITESPACE"," ",458],["T_STRING","strtolower",458],"(",["T_STRING","trim",458],"(",["T_STRING","stripslashes",458],"(",["T_VARIABLE","$this",458],["T_OBJECT_OPERATOR","->",458],["T_STRING","file_type",458],")",",",["T_WHITESPACE"," ",458],["T_CONSTANT_ENCAPSED_STRING","'\"'",458],")",")",";",["T_WHITESPACE","\n\t\t",458],["T_VARIABLE","$this",459],["T_OBJECT_OPERATOR","->",459],["T_STRING","file_name",459],["T_WHITESPACE"," ",459],"=",["T_WHITESPACE"," ",459],["T_VARIABLE","$this",459],["T_OBJECT_OPERATOR","->",459],["T_STRING","_prep_filename",459],"(",["T_VARIABLE","$_file",459],"[",["T_CONSTANT_ENCAPSED_STRING","'name'",459],"]",")",";",["T_WHITESPACE","\n\t\t",459],["T_VARIABLE","$this",460],["T_OBJECT_OPERATOR","->",460],["T_STRING","file_ext",460],["T_WHITESPACE","\t ",460],"=",["T_WHITESPACE"," ",460],["T_VARIABLE","$this",460],["T_OBJECT_OPERATOR","->",460],["T_STRING","get_extension",460],"(",["T_VARIABLE","$this",460],["T_OBJECT_OPERATOR","->",460],["T_STRING","file_name",460],")",";",["T_WHITESPACE","\n\t\t",460],["T_VARIABLE","$this",461],["T_OBJECT_OPERATOR","->",461],["T_STRING","client_name",461],["T_WHITESPACE"," ",461],"=",["T_WHITESPACE"," ",461],["T_VARIABLE","$this",461],["T_OBJECT_OPERATOR","->",461],["T_STRING","file_name",461],";",["T_WHITESPACE","\n\n\t\t",461],["T_COMMENT","\/\/ Is the file type allowed to be uploaded?\n",463],["T_WHITESPACE","\t\t",464],["T_IF","if",464],["T_WHITESPACE"," ",464],"(",["T_WHITESPACE"," ",464],"!",["T_WHITESPACE"," ",464],["T_VARIABLE","$this",464],["T_OBJECT_OPERATOR","->",464],["T_STRING","is_allowed_filetype",464],"(",")",")",["T_WHITESPACE","\n\t\t",464],"{",["T_WHITESPACE","\n\t\t\t",465],["T_VARIABLE","$this",466],["T_OBJECT_OPERATOR","->",466],["T_STRING","set_error",466],"(",["T_CONSTANT_ENCAPSED_STRING","'upload_invalid_filetype'",466],",",["T_WHITESPACE"," ",466],["T_CONSTANT_ENCAPSED_STRING","'debug'",466],")",";",["T_WHITESPACE","\n\t\t\t",466],["T_RETURN","return",467],["T_WHITESPACE"," ",467],["T_STRING","FALSE",467],";",["T_WHITESPACE","\n\t\t",467],"}",["T_WHITESPACE","\n\n\t\t",468],["T_COMMENT","\/\/ if we're overriding, let's now make sure the new name and type is allowed\n",470],["T_WHITESPACE","\t\t",471],["T_IF","if",471],["T_WHITESPACE"," ",471],"(",["T_VARIABLE","$this",471],["T_OBJECT_OPERATOR","->",471],["T_STRING","_file_name_override",471],["T_WHITESPACE"," ",471],["T_IS_NOT_IDENTICAL","!==",471],["T_WHITESPACE"," ",471],["T_CONSTANT_ENCAPSED_STRING","''",471],")",["T_WHITESPACE","\n\t\t",471],"{",["T_WHITESPACE","\n\t\t\t",472],["T_VARIABLE","$this",473],["T_OBJECT_OPERATOR","->",473],["T_STRING","file_name",473],["T_WHITESPACE"," ",473],"=",["T_WHITESPACE"," ",473],["T_VARIABLE","$this",473],["T_OBJECT_OPERATOR","->",473],["T_STRING","_prep_filename",473],"(",["T_VARIABLE","$this",473],["T_OBJECT_OPERATOR","->",473],["T_STRING","_file_name_override",473],")",";",["T_WHITESPACE","\n\n\t\t\t",473],["T_COMMENT","\/\/ If no extension was provided in the file_name config item, use the uploaded one\n",475],["T_WHITESPACE","\t\t\t",476],["T_IF","if",476],["T_WHITESPACE"," ",476],"(",["T_STRING","strpos",476],"(",["T_VARIABLE","$this",476],["T_OBJECT_OPERATOR","->",476],["T_STRING","_file_name_override",476],",",["T_WHITESPACE"," ",476],["T_CONSTANT_ENCAPSED_STRING","'.'",476],")",["T_WHITESPACE"," ",476],["T_IS_IDENTICAL","===",476],["T_WHITESPACE"," ",476],["T_STRING","FALSE",476],")",["T_WHITESPACE","\n\t\t\t",476],"{",["T_WHITESPACE","\n\t\t\t\t",477],["T_VARIABLE","$this",478],["T_OBJECT_OPERATOR","->",478],["T_STRING","file_name",478],["T_WHITESPACE"," ",478],["T_CONCAT_EQUAL",".=",478],["T_WHITESPACE"," ",478],["T_VARIABLE","$this",478],["T_OBJECT_OPERATOR","->",478],["T_STRING","file_ext",478],";",["T_WHITESPACE","\n\t\t\t",478],"}",["T_WHITESPACE","\n\t\t\t",479],["T_ELSE","else",480],["T_WHITESPACE","\n\t\t\t",480],"{",["T_WHITESPACE","\n\t\t\t\t",481],["T_COMMENT","\/\/ An extension was provided, let's have it!\n",482],["T_WHITESPACE","\t\t\t\t",483],["T_VARIABLE","$this",483],["T_OBJECT_OPERATOR","->",483],["T_STRING","file_ext",483],["T_WHITESPACE","\t",483],"=",["T_WHITESPACE"," ",483],["T_VARIABLE","$this",483],["T_OBJECT_OPERATOR","->",483],["T_STRING","get_extension",483],"(",["T_VARIABLE","$this",483],["T_OBJECT_OPERATOR","->",483],["T_STRING","_file_name_override",483],")",";",["T_WHITESPACE","\n\t\t\t",483],"}",["T_WHITESPACE","\n\n\t\t\t",484],["T_IF","if",486],["T_WHITESPACE"," ",486],"(",["T_WHITESPACE"," ",486],"!",["T_WHITESPACE"," ",486],["T_VARIABLE","$this",486],["T_OBJECT_OPERATOR","->",486],["T_STRING","is_allowed_filetype",486],"(",["T_STRING","TRUE",486],")",")",["T_WHITESPACE","\n\t\t\t",486],"{",["T_WHITESPACE","\n\t\t\t\t",487],["T_VARIABLE","$this",488],["T_OBJECT_OPERATOR","->",488],["T_STRING","set_error",488],"(",["T_CONSTANT_ENCAPSED_STRING","'upload_invalid_filetype'",488],",",["T_WHITESPACE"," ",488],["T_CONSTANT_ENCAPSED_STRING","'debug'",488],")",";",["T_WHITESPACE","\n\t\t\t\t",488],["T_RETURN","return",489],["T_WHITESPACE"," ",489],["T_STRING","FALSE",489],";",["T_WHITESPACE","\n\t\t\t",489],"}",["T_WHITESPACE","\n\t\t",490],"}",["T_WHITESPACE","\n\n\t\t",491],["T_COMMENT","\/\/ Convert the file size to kilobytes\n",493],["T_WHITESPACE","\t\t",494],["T_IF","if",494],["T_WHITESPACE"," ",494],"(",["T_VARIABLE","$this",494],["T_OBJECT_OPERATOR","->",494],["T_STRING","file_size",494],["T_WHITESPACE"," ",494],">",["T_WHITESPACE"," ",494],["T_LNUMBER","0",494],")",["T_WHITESPACE","\n\t\t",494],"{",["T_WHITESPACE","\n\t\t\t",495],["T_VARIABLE","$this",496],["T_OBJECT_OPERATOR","->",496],["T_STRING","file_size",496],["T_WHITESPACE"," ",496],"=",["T_WHITESPACE"," ",496],["T_STRING","round",496],"(",["T_VARIABLE","$this",496],["T_OBJECT_OPERATOR","->",496],["T_STRING","file_size",496],"\/",["T_LNUMBER","1024",496],",",["T_WHITESPACE"," ",496],["T_LNUMBER","2",496],")",";",["T_WHITESPACE","\n\t\t",496],"}",["T_WHITESPACE","\n\n\t\t",497],["T_COMMENT","\/\/ Is the file size within the allowed maximum?\n",499],["T_WHITESPACE","\t\t",500],["T_IF","if",500],["T_WHITESPACE"," ",500],"(",["T_WHITESPACE"," ",500],"!",["T_WHITESPACE"," ",500],["T_VARIABLE","$this",500],["T_OBJECT_OPERATOR","->",500],["T_STRING","is_allowed_filesize",500],"(",")",")",["T_WHITESPACE","\n\t\t",500],"{",["T_WHITESPACE","\n\t\t\t",501],["T_VARIABLE","$this",502],["T_OBJECT_OPERATOR","->",502],["T_STRING","set_error",502],"(",["T_CONSTANT_ENCAPSED_STRING","'upload_invalid_filesize'",502],",",["T_WHITESPACE"," ",502],["T_CONSTANT_ENCAPSED_STRING","'info'",502],")",";",["T_WHITESPACE","\n\t\t\t",502],["T_RETURN","return",503],["T_WHITESPACE"," ",503],["T_STRING","FALSE",503],";",["T_WHITESPACE","\n\t\t",503],"}",["T_WHITESPACE","\n\n\t\t",504],["T_COMMENT","\/\/ Are the image dimensions within the allowed size?\n",506],["T_WHITESPACE","\t\t",507],["T_COMMENT","\/\/ Note: This can fail if the server has an open_basedir restriction.\n",507],["T_WHITESPACE","\t\t",508],["T_IF","if",508],["T_WHITESPACE"," ",508],"(",["T_WHITESPACE"," ",508],"!",["T_WHITESPACE"," ",508],["T_VARIABLE","$this",508],["T_OBJECT_OPERATOR","->",508],["T_STRING","is_allowed_dimensions",508],"(",")",")",["T_WHITESPACE","\n\t\t",508],"{",["T_WHITESPACE","\n\t\t\t",509],["T_VARIABLE","$this",510],["T_OBJECT_OPERATOR","->",510],["T_STRING","set_error",510],"(",["T_CONSTANT_ENCAPSED_STRING","'upload_invalid_dimensions'",510],",",["T_WHITESPACE"," ",510],["T_CONSTANT_ENCAPSED_STRING","'info'",510],")",";",["T_WHITESPACE","\n\t\t\t",510],["T_RETURN","return",511],["T_WHITESPACE"," ",511],["T_STRING","FALSE",511],";",["T_WHITESPACE","\n\t\t",511],"}",["T_WHITESPACE","\n\n\t\t",512],["T_COMMENT","\/\/ Sanitize the file name for security\n",514],["T_WHITESPACE","\t\t",515],["T_VARIABLE","$this",515],["T_OBJECT_OPERATOR","->",515],["T_STRING","file_name",515],["T_WHITESPACE"," ",515],"=",["T_WHITESPACE"," ",515],["T_VARIABLE","$this",515],["T_OBJECT_OPERATOR","->",515],["T_STRING","_CI",515],["T_OBJECT_OPERATOR","->",515],["T_STRING","security",515],["T_OBJECT_OPERATOR","->",515],["T_STRING","sanitize_filename",515],"(",["T_VARIABLE","$this",515],["T_OBJECT_OPERATOR","->",515],["T_STRING","file_name",515],")",";",["T_WHITESPACE","\n\n\t\t",515],["T_COMMENT","\/\/ Truncate the file name if it's too long\n",517],["T_WHITESPACE","\t\t",518],["T_IF","if",518],["T_WHITESPACE"," ",518],"(",["T_VARIABLE","$this",518],["T_OBJECT_OPERATOR","->",518],["T_STRING","max_filename",518],["T_WHITESPACE"," ",518],">",["T_WHITESPACE"," ",518],["T_LNUMBER","0",518],")",["T_WHITESPACE","\n\t\t",518],"{",["T_WHITESPACE","\n\t\t\t",519],["T_VARIABLE","$this",520],["T_OBJECT_OPERATOR","->",520],["T_STRING","file_name",520],["T_WHITESPACE"," ",520],"=",["T_WHITESPACE"," ",520],["T_VARIABLE","$this",520],["T_OBJECT_OPERATOR","->",520],["T_STRING","limit_filename_length",520],"(",["T_VARIABLE","$this",520],["T_OBJECT_OPERATOR","->",520],["T_STRING","file_name",520],",",["T_WHITESPACE"," ",520],["T_VARIABLE","$this",520],["T_OBJECT_OPERATOR","->",520],["T_STRING","max_filename",520],")",";",["T_WHITESPACE","\n\t\t",520],"}",["T_WHITESPACE","\n\n\t\t",521],["T_COMMENT","\/\/ Remove white spaces in the name\n",523],["T_WHITESPACE","\t\t",524],["T_IF","if",524],["T_WHITESPACE"," ",524],"(",["T_VARIABLE","$this",524],["T_OBJECT_OPERATOR","->",524],["T_STRING","remove_spaces",524],["T_WHITESPACE"," ",524],["T_IS_IDENTICAL","===",524],["T_WHITESPACE"," ",524],["T_STRING","TRUE",524],")",["T_WHITESPACE","\n\t\t",524],"{",["T_WHITESPACE","\n\t\t\t",525],["T_VARIABLE","$this",526],["T_OBJECT_OPERATOR","->",526],["T_STRING","file_name",526],["T_WHITESPACE"," ",526],"=",["T_WHITESPACE"," ",526],["T_STRING","preg_replace",526],"(",["T_CONSTANT_ENCAPSED_STRING","'\/\\s+\/'",526],",",["T_WHITESPACE"," ",526],["T_CONSTANT_ENCAPSED_STRING","'_'",526],",",["T_WHITESPACE"," ",526],["T_VARIABLE","$this",526],["T_OBJECT_OPERATOR","->",526],["T_STRING","file_name",526],")",";",["T_WHITESPACE","\n\t\t",526],"}",["T_WHITESPACE","\n\n\t\t",527],["T_IF","if",529],["T_WHITESPACE"," ",529],"(",["T_VARIABLE","$this",529],["T_OBJECT_OPERATOR","->",529],["T_STRING","file_ext_tolower",529],["T_WHITESPACE"," ",529],["T_BOOLEAN_AND","&&",529],["T_WHITESPACE"," ",529],"(",["T_VARIABLE","$ext_length",529],["T_WHITESPACE"," ",529],"=",["T_WHITESPACE"," ",529],["T_STRING","strlen",529],"(",["T_VARIABLE","$this",529],["T_OBJECT_OPERATOR","->",529],["T_STRING","file_ext",529],")",")",")",["T_WHITESPACE","\n\t\t",529],"{",["T_WHITESPACE","\n\t\t\t",530],["T_COMMENT","\/\/ file_ext was previously lower-cased by a get_extension() call\n",531],["T_WHITESPACE","\t\t\t",532],["T_VARIABLE","$this",532],["T_OBJECT_OPERATOR","->",532],["T_STRING","file_name",532],["T_WHITESPACE"," ",532],"=",["T_WHITESPACE"," ",532],["T_STRING","substr",532],"(",["T_VARIABLE","$this",532],["T_OBJECT_OPERATOR","->",532],["T_STRING","file_name",532],",",["T_WHITESPACE"," ",532],["T_LNUMBER","0",532],",",["T_WHITESPACE"," ",532],"-",["T_VARIABLE","$ext_length",532],")",".",["T_VARIABLE","$this",532],["T_OBJECT_OPERATOR","->",532],["T_STRING","file_ext",532],";",["T_WHITESPACE","\n\t\t",532],"}",["T_WHITESPACE","\n\n\t\t",533],["T_COMMENT","\/*\n\t\t * Validate the file name\n\t\t * This function appends an number onto the end of\n\t\t * the file if one with the same name already exists.\n\t\t * If it returns false there was a problem.\n\t\t *\/",535],["T_WHITESPACE","\n\t\t",540],["T_VARIABLE","$this",541],["T_OBJECT_OPERATOR","->",541],["T_STRING","orig_name",541],["T_WHITESPACE"," ",541],"=",["T_WHITESPACE"," ",541],["T_VARIABLE","$this",541],["T_OBJECT_OPERATOR","->",541],["T_STRING","file_name",541],";",["T_WHITESPACE","\n\t\t",541],["T_IF","if",542],["T_WHITESPACE"," ",542],"(",["T_STRING","FALSE",542],["T_WHITESPACE"," ",542],["T_IS_IDENTICAL","===",542],["T_WHITESPACE"," ",542],"(",["T_VARIABLE","$this",542],["T_OBJECT_OPERATOR","->",542],["T_STRING","file_name",542],["T_WHITESPACE"," ",542],"=",["T_WHITESPACE"," ",542],["T_VARIABLE","$this",542],["T_OBJECT_OPERATOR","->",542],["T_STRING","set_filename",542],"(",["T_VARIABLE","$this",542],["T_OBJECT_OPERATOR","->",542],["T_STRING","upload_path",542],",",["T_WHITESPACE"," ",542],["T_VARIABLE","$this",542],["T_OBJECT_OPERATOR","->",542],["T_STRING","file_name",542],")",")",")",["T_WHITESPACE","\n\t\t",542],"{",["T_WHITESPACE","\n\t\t\t",543],["T_RETURN","return",544],["T_WHITESPACE"," ",544],["T_STRING","FALSE",544],";",["T_WHITESPACE","\n\t\t",544],"}",["T_WHITESPACE","\n\n\t\t",545],["T_COMMENT","\/*\n\t\t * Run the file through the XSS hacking filter\n\t\t * This helps prevent malicious code from being\n\t\t * embedded within a file. Scripts can easily\n\t\t * be disguised as images or other file types.\n\t\t *\/",547],["T_WHITESPACE","\n\t\t",552],["T_IF","if",553],["T_WHITESPACE"," ",553],"(",["T_VARIABLE","$this",553],["T_OBJECT_OPERATOR","->",553],["T_STRING","xss_clean",553],["T_WHITESPACE"," ",553],["T_BOOLEAN_AND","&&",553],["T_WHITESPACE"," ",553],["T_VARIABLE","$this",553],["T_OBJECT_OPERATOR","->",553],["T_STRING","do_xss_clean",553],"(",")",["T_WHITESPACE"," ",553],["T_IS_IDENTICAL","===",553],["T_WHITESPACE"," ",553],["T_STRING","FALSE",553],")",["T_WHITESPACE","\n\t\t",553],"{",["T_WHITESPACE","\n\t\t\t",554],["T_VARIABLE","$this",555],["T_OBJECT_OPERATOR","->",555],["T_STRING","set_error",555],"(",["T_CONSTANT_ENCAPSED_STRING","'upload_unable_to_write_file'",555],",",["T_WHITESPACE"," ",555],["T_CONSTANT_ENCAPSED_STRING","'error'",555],")",";",["T_WHITESPACE","\n\t\t\t",555],["T_RETURN","return",556],["T_WHITESPACE"," ",556],["T_STRING","FALSE",556],";",["T_WHITESPACE","\n\t\t",556],"}",["T_WHITESPACE","\n\n\t\t",557],["T_COMMENT","\/*\n\t\t * Move the file to the final destination\n\t\t * To deal with different server configurations\n\t\t * we'll attempt to use copy() first. If that fails\n\t\t * we'll use move_uploaded_file(). One of the two should\n\t\t * reliably work in most environments\n\t\t *\/",559],["T_WHITESPACE","\n\t\t",565],["T_IF","if",566],["T_WHITESPACE"," ",566],"(",["T_WHITESPACE"," ",566],"!",["T_WHITESPACE"," ",566],"@",["T_STRING","copy",566],"(",["T_VARIABLE","$this",566],["T_OBJECT_OPERATOR","->",566],["T_STRING","file_temp",566],",",["T_WHITESPACE"," ",566],["T_VARIABLE","$this",566],["T_OBJECT_OPERATOR","->",566],["T_STRING","upload_path",566],".",["T_VARIABLE","$this",566],["T_OBJECT_OPERATOR","->",566],["T_STRING","file_name",566],")",")",["T_WHITESPACE","\n\t\t",566],"{",["T_WHITESPACE","\n\t\t\t",567],["T_IF","if",568],["T_WHITESPACE"," ",568],"(",["T_WHITESPACE"," ",568],"!",["T_WHITESPACE"," ",568],"@",["T_STRING","move_uploaded_file",568],"(",["T_VARIABLE","$this",568],["T_OBJECT_OPERATOR","->",568],["T_STRING","file_temp",568],",",["T_WHITESPACE"," ",568],["T_VARIABLE","$this",568],["T_OBJECT_OPERATOR","->",568],["T_STRING","upload_path",568],".",["T_VARIABLE","$this",568],["T_OBJECT_OPERATOR","->",568],["T_STRING","file_name",568],")",")",["T_WHITESPACE","\n\t\t\t",568],"{",["T_WHITESPACE","\n\t\t\t\t",569],["T_VARIABLE","$this",570],["T_OBJECT_OPERATOR","->",570],["T_STRING","set_error",570],"(",["T_CONSTANT_ENCAPSED_STRING","'upload_destination_error'",570],",",["T_WHITESPACE"," ",570],["T_CONSTANT_ENCAPSED_STRING","'error'",570],")",";",["T_WHITESPACE","\n\t\t\t\t",570],["T_RETURN","return",571],["T_WHITESPACE"," ",571],["T_STRING","FALSE",571],";",["T_WHITESPACE","\n\t\t\t",571],"}",["T_WHITESPACE","\n\t\t",572],"}",["T_WHITESPACE","\n\n\t\t",573],["T_COMMENT","\/*\n\t\t * Set the finalized image dimensions\n\t\t * This sets the image width\/height (assuming the\n\t\t * file was an image). We use this information\n\t\t * in the \"data\" function.\n\t\t *\/",575],["T_WHITESPACE","\n\t\t",580],["T_VARIABLE","$this",581],["T_OBJECT_OPERATOR","->",581],["T_STRING","set_image_properties",581],"(",["T_VARIABLE","$this",581],["T_OBJECT_OPERATOR","->",581],["T_STRING","upload_path",581],".",["T_VARIABLE","$this",581],["T_OBJECT_OPERATOR","->",581],["T_STRING","file_name",581],")",";",["T_WHITESPACE","\n\n\t\t",581],["T_RETURN","return",583],["T_WHITESPACE"," ",583],["T_STRING","TRUE",583],";",["T_WHITESPACE","\n\t",583],"}",["T_WHITESPACE","\n\n\t",584],["T_COMMENT","\/\/ --------------------------------------------------------------------\n",586],["T_WHITESPACE","\n\t",587],["T_DOC_COMMENT","\/**\n\t * Finalized Data Array\n\t *\n\t * Returns an associative array containing all of the information\n\t * related to the upload, allowing the developer easy access in one array.\n\t *\n\t * @param\tstring\t$index\n\t * @return\tmixed\n\t *\/",588],["T_WHITESPACE","\n\t",596],["T_PUBLIC","public",597],["T_WHITESPACE"," ",597],["T_FUNCTION","function",597],["T_WHITESPACE"," ",597],["T_STRING","data",597],"(",["T_VARIABLE","$index",597],["T_WHITESPACE"," ",597],"=",["T_WHITESPACE"," ",597],["T_STRING","NULL",597],")",["T_WHITESPACE","\n\t",597],"{",["T_WHITESPACE","\n\t\t",598],["T_VARIABLE","$data",599],["T_WHITESPACE"," ",599],"=",["T_WHITESPACE"," ",599],["T_ARRAY","array",599],"(",["T_WHITESPACE","\n\t\t\t\t",599],["T_CONSTANT_ENCAPSED_STRING","'file_name'",600],["T_WHITESPACE","\t\t",600],["T_DOUBLE_ARROW","=>",600],["T_WHITESPACE"," ",600],["T_VARIABLE","$this",600],["T_OBJECT_OPERATOR","->",600],["T_STRING","file_name",600],",",["T_WHITESPACE","\n\t\t\t\t",600],["T_CONSTANT_ENCAPSED_STRING","'file_type'",601],["T_WHITESPACE","\t\t",601],["T_DOUBLE_ARROW","=>",601],["T_WHITESPACE"," ",601],["T_VARIABLE","$this",601],["T_OBJECT_OPERATOR","->",601],["T_STRING","file_type",601],",",["T_WHITESPACE","\n\t\t\t\t",601],["T_CONSTANT_ENCAPSED_STRING","'file_path'",602],["T_WHITESPACE","\t\t",602],["T_DOUBLE_ARROW","=>",602],["T_WHITESPACE"," ",602],["T_VARIABLE","$this",602],["T_OBJECT_OPERATOR","->",602],["T_STRING","upload_path",602],",",["T_WHITESPACE","\n\t\t\t\t",602],["T_CONSTANT_ENCAPSED_STRING","'full_path'",603],["T_WHITESPACE","\t\t",603],["T_DOUBLE_ARROW","=>",603],["T_WHITESPACE"," ",603],["T_VARIABLE","$this",603],["T_OBJECT_OPERATOR","->",603],["T_STRING","upload_path",603],".",["T_VARIABLE","$this",603],["T_OBJECT_OPERATOR","->",603],["T_STRING","file_name",603],",",["T_WHITESPACE","\n\t\t\t\t",603],["T_CONSTANT_ENCAPSED_STRING","'raw_name'",604],["T_WHITESPACE","\t\t",604],["T_DOUBLE_ARROW","=>",604],["T_WHITESPACE"," ",604],["T_STRING","substr",604],"(",["T_VARIABLE","$this",604],["T_OBJECT_OPERATOR","->",604],["T_STRING","file_name",604],",",["T_WHITESPACE"," ",604],["T_LNUMBER","0",604],",",["T_WHITESPACE"," ",604],"-",["T_STRING","strlen",604],"(",["T_VARIABLE","$this",604],["T_OBJECT_OPERATOR","->",604],["T_STRING","file_ext",604],")",")",",",["T_WHITESPACE","\n\t\t\t\t",604],["T_CONSTANT_ENCAPSED_STRING","'orig_name'",605],["T_WHITESPACE","\t\t",605],["T_DOUBLE_ARROW","=>",605],["T_WHITESPACE"," ",605],["T_VARIABLE","$this",605],["T_OBJECT_OPERATOR","->",605],["T_STRING","orig_name",605],",",["T_WHITESPACE","\n\t\t\t\t",605],["T_CONSTANT_ENCAPSED_STRING","'client_name'",606],["T_WHITESPACE","\t\t",606],["T_DOUBLE_ARROW","=>",606],["T_WHITESPACE"," ",606],["T_VARIABLE","$this",606],["T_OBJECT_OPERATOR","->",606],["T_STRING","client_name",606],",",["T_WHITESPACE","\n\t\t\t\t",606],["T_CONSTANT_ENCAPSED_STRING","'file_ext'",607],["T_WHITESPACE","\t\t",607],["T_DOUBLE_ARROW","=>",607],["T_WHITESPACE"," ",607],["T_VARIABLE","$this",607],["T_OBJECT_OPERATOR","->",607],["T_STRING","file_ext",607],",",["T_WHITESPACE","\n\t\t\t\t",607],["T_CONSTANT_ENCAPSED_STRING","'file_size'",608],["T_WHITESPACE","\t\t",608],["T_DOUBLE_ARROW","=>",608],["T_WHITESPACE"," ",608],["T_VARIABLE","$this",608],["T_OBJECT_OPERATOR","->",608],["T_STRING","file_size",608],",",["T_WHITESPACE","\n\t\t\t\t",608],["T_CONSTANT_ENCAPSED_STRING","'is_image'",609],["T_WHITESPACE","\t\t",609],["T_DOUBLE_ARROW","=>",609],["T_WHITESPACE"," ",609],["T_VARIABLE","$this",609],["T_OBJECT_OPERATOR","->",609],["T_STRING","is_image",609],"(",")",",",["T_WHITESPACE","\n\t\t\t\t",609],["T_CONSTANT_ENCAPSED_STRING","'image_width'",610],["T_WHITESPACE","\t\t",610],["T_DOUBLE_ARROW","=>",610],["T_WHITESPACE"," ",610],["T_VARIABLE","$this",610],["T_OBJECT_OPERATOR","->",610],["T_STRING","image_width",610],",",["T_WHITESPACE","\n\t\t\t\t",610],["T_CONSTANT_ENCAPSED_STRING","'image_height'",611],["T_WHITESPACE","\t\t",611],["T_DOUBLE_ARROW","=>",611],["T_WHITESPACE"," ",611],["T_VARIABLE","$this",611],["T_OBJECT_OPERATOR","->",611],["T_STRING","image_height",611],",",["T_WHITESPACE","\n\t\t\t\t",611],["T_CONSTANT_ENCAPSED_STRING","'image_type'",612],["T_WHITESPACE","\t\t",612],["T_DOUBLE_ARROW","=>",612],["T_WHITESPACE"," ",612],["T_VARIABLE","$this",612],["T_OBJECT_OPERATOR","->",612],["T_STRING","image_type",612],",",["T_WHITESPACE","\n\t\t\t\t",612],["T_CONSTANT_ENCAPSED_STRING","'image_size_str'",613],["T_WHITESPACE","\t",613],["T_DOUBLE_ARROW","=>",613],["T_WHITESPACE"," ",613],["T_VARIABLE","$this",613],["T_OBJECT_OPERATOR","->",613],["T_STRING","image_size_str",613],",",["T_WHITESPACE","\n\t\t\t",613],")",";",["T_WHITESPACE","\n\n\t\t",614],["T_IF","if",616],["T_WHITESPACE"," ",616],"(",["T_WHITESPACE"," ",616],"!",["T_WHITESPACE"," ",616],["T_EMPTY","empty",616],"(",["T_VARIABLE","$index",616],")",")",["T_WHITESPACE","\n\t\t",616],"{",["T_WHITESPACE","\n\t\t\t",617],["T_RETURN","return",618],["T_WHITESPACE"," ",618],["T_ISSET","isset",618],"(",["T_VARIABLE","$data",618],"[",["T_VARIABLE","$index",618],"]",")",["T_WHITESPACE"," ",618],"?",["T_WHITESPACE"," ",618],["T_VARIABLE","$data",618],"[",["T_VARIABLE","$index",618],"]",["T_WHITESPACE"," ",618],":",["T_WHITESPACE"," ",618],["T_STRING","NULL",618],";",["T_WHITESPACE","\n\t\t",618],"}",["T_WHITESPACE","\n\n\t\t",619],["T_RETURN","return",621],["T_WHITESPACE"," ",621],["T_VARIABLE","$data",621],";",["T_WHITESPACE","\n\t",621],"}",["T_WHITESPACE","\n\n\t",622],["T_COMMENT","\/\/ --------------------------------------------------------------------\n",624],["T_WHITESPACE","\n\t",625],["T_DOC_COMMENT","\/**\n\t * Set Upload Path\n\t *\n\t * @param\tstring\t$path\n\t * @return\tCI_Upload\n\t *\/",626],["T_WHITESPACE","\n\t",631],["T_PUBLIC","public",632],["T_WHITESPACE"," ",632],["T_FUNCTION","function",632],["T_WHITESPACE"," ",632],["T_STRING","set_upload_path",632],"(",["T_VARIABLE","$path",632],")",["T_WHITESPACE","\n\t",632],"{",["T_WHITESPACE","\n\t\t",633],["T_COMMENT","\/\/ Make sure it has a trailing slash\n",634],["T_WHITESPACE","\t\t",635],["T_VARIABLE","$this",635],["T_OBJECT_OPERATOR","->",635],["T_STRING","upload_path",635],["T_WHITESPACE"," ",635],"=",["T_WHITESPACE"," ",635],["T_STRING","rtrim",635],"(",["T_VARIABLE","$path",635],",",["T_WHITESPACE"," ",635],["T_CONSTANT_ENCAPSED_STRING","'\/'",635],")",".",["T_CONSTANT_ENCAPSED_STRING","'\/'",635],";",["T_WHITESPACE","\n\t\t",635],["T_RETURN","return",636],["T_WHITESPACE"," ",636],["T_VARIABLE","$this",636],";",["T_WHITESPACE","\n\t",636],"}",["T_WHITESPACE","\n\n\t",637],["T_COMMENT","\/\/ --------------------------------------------------------------------\n",639],["T_WHITESPACE","\n\t",640],["T_DOC_COMMENT","\/**\n\t * Set the file name\n\t *\n\t * This function takes a filename\/path as input and looks for the\n\t * existence of a file with the same name. If found, it will append a\n\t * number to the end of the filename to avoid overwriting a pre-existing file.\n\t *\n\t * @param\tstring\t$path\n\t * @param\tstring\t$filename\n\t * @return\tstring\n\t *\/",641],["T_WHITESPACE","\n\t",651],["T_PUBLIC","public",652],["T_WHITESPACE"," ",652],["T_FUNCTION","function",652],["T_WHITESPACE"," ",652],["T_STRING","set_filename",652],"(",["T_VARIABLE","$path",652],",",["T_WHITESPACE"," ",652],["T_VARIABLE","$filename",652],")",["T_WHITESPACE","\n\t",652],"{",["T_WHITESPACE","\n\t\t",653],["T_IF","if",654],["T_WHITESPACE"," ",654],"(",["T_VARIABLE","$this",654],["T_OBJECT_OPERATOR","->",654],["T_STRING","encrypt_name",654],["T_WHITESPACE"," ",654],["T_IS_IDENTICAL","===",654],["T_WHITESPACE"," ",654],["T_STRING","TRUE",654],")",["T_WHITESPACE","\n\t\t",654],"{",["T_WHITESPACE","\n\t\t\t",655],["T_VARIABLE","$filename",656],["T_WHITESPACE"," ",656],"=",["T_WHITESPACE"," ",656],["T_STRING","md5",656],"(",["T_STRING","uniqid",656],"(",["T_STRING","mt_rand",656],"(",")",")",")",".",["T_VARIABLE","$this",656],["T_OBJECT_OPERATOR","->",656],["T_STRING","file_ext",656],";",["T_WHITESPACE","\n\t\t",656],"}",["T_WHITESPACE","\n\n\t\t",657],["T_IF","if",659],["T_WHITESPACE"," ",659],"(",["T_VARIABLE","$this",659],["T_OBJECT_OPERATOR","->",659],["T_STRING","overwrite",659],["T_WHITESPACE"," ",659],["T_IS_IDENTICAL","===",659],["T_WHITESPACE"," ",659],["T_STRING","TRUE",659],["T_WHITESPACE"," ",659],["T_LOGICAL_OR","OR",659],["T_WHITESPACE"," ",659],"!",["T_WHITESPACE"," ",659],["T_STRING","file_exists",659],"(",["T_VARIABLE","$path",659],".",["T_VARIABLE","$filename",659],")",")",["T_WHITESPACE","\n\t\t",659],"{",["T_WHITESPACE","\n\t\t\t",660],["T_RETURN","return",661],["T_WHITESPACE"," ",661],["T_VARIABLE","$filename",661],";",["T_WHITESPACE","\n\t\t",661],"}",["T_WHITESPACE","\n\n\t\t",662],["T_VARIABLE","$filename",664],["T_WHITESPACE"," ",664],"=",["T_WHITESPACE"," ",664],["T_STRING","str_replace",664],"(",["T_VARIABLE","$this",664],["T_OBJECT_OPERATOR","->",664],["T_STRING","file_ext",664],",",["T_WHITESPACE"," ",664],["T_CONSTANT_ENCAPSED_STRING","''",664],",",["T_WHITESPACE"," ",664],["T_VARIABLE","$filename",664],")",";",["T_WHITESPACE","\n\n\t\t",664],["T_VARIABLE","$new_filename",666],["T_WHITESPACE"," ",666],"=",["T_WHITESPACE"," ",666],["T_CONSTANT_ENCAPSED_STRING","''",666],";",["T_WHITESPACE","\n\t\t",666],["T_FOR","for",667],["T_WHITESPACE"," ",667],"(",["T_VARIABLE","$i",667],["T_WHITESPACE"," ",667],"=",["T_WHITESPACE"," ",667],["T_LNUMBER","1",667],";",["T_WHITESPACE"," ",667],["T_VARIABLE","$i",667],["T_WHITESPACE"," ",667],"<",["T_WHITESPACE"," ",667],["T_VARIABLE","$this",667],["T_OBJECT_OPERATOR","->",667],["T_STRING","max_filename_increment",667],";",["T_WHITESPACE"," ",667],["T_VARIABLE","$i",667],["T_INC","++",667],")",["T_WHITESPACE","\n\t\t",667],"{",["T_WHITESPACE","\n\t\t\t",668],["T_IF","if",669],["T_WHITESPACE"," ",669],"(",["T_WHITESPACE"," ",669],"!",["T_WHITESPACE"," ",669],["T_STRING","file_exists",669],"(",["T_VARIABLE","$path",669],".",["T_VARIABLE","$filename",669],".",["T_VARIABLE","$i",669],".",["T_VARIABLE","$this",669],["T_OBJECT_OPERATOR","->",669],["T_STRING","file_ext",669],")",")",["T_WHITESPACE","\n\t\t\t",669],"{",["T_WHITESPACE","\n\t\t\t\t",670],["T_VARIABLE","$new_filename",671],["T_WHITESPACE"," ",671],"=",["T_WHITESPACE"," ",671],["T_VARIABLE","$filename",671],".",["T_VARIABLE","$i",671],".",["T_VARIABLE","$this",671],["T_OBJECT_OPERATOR","->",671],["T_STRING","file_ext",671],";",["T_WHITESPACE","\n\t\t\t\t",671],["T_BREAK","break",672],";",["T_WHITESPACE","\n\t\t\t",672],"}",["T_WHITESPACE","\n\t\t",673],"}",["T_WHITESPACE","\n\n\t\t",674],["T_IF","if",676],["T_WHITESPACE"," ",676],"(",["T_VARIABLE","$new_filename",676],["T_WHITESPACE"," ",676],["T_IS_IDENTICAL","===",676],["T_WHITESPACE"," ",676],["T_CONSTANT_ENCAPSED_STRING","''",676],")",["T_WHITESPACE","\n\t\t",676],"{",["T_WHITESPACE","\n\t\t\t",677],["T_VARIABLE","$this",678],["T_OBJECT_OPERATOR","->",678],["T_STRING","set_error",678],"(",["T_CONSTANT_ENCAPSED_STRING","'upload_bad_filename'",678],",",["T_WHITESPACE"," ",678],["T_CONSTANT_ENCAPSED_STRING","'debug'",678],")",";",["T_WHITESPACE","\n\t\t\t",678],["T_RETURN","return",679],["T_WHITESPACE"," ",679],["T_STRING","FALSE",679],";",["T_WHITESPACE","\n\t\t",679],"}",["T_WHITESPACE","\n\t\t",680],["T_ELSE","else",681],["T_WHITESPACE","\n\t\t",681],"{",["T_WHITESPACE","\n\t\t\t",682],["T_RETURN","return",683],["T_WHITESPACE"," ",683],["T_VARIABLE","$new_filename",683],";",["T_WHITESPACE","\n\t\t",683],"}",["T_WHITESPACE","\n\t",684],"}",["T_WHITESPACE","\n\n\t",685],["T_COMMENT","\/\/ --------------------------------------------------------------------\n",687],["T_WHITESPACE","\n\t",688],["T_DOC_COMMENT","\/**\n\t * Set Maximum File Size\n\t *\n\t * @param\tint\t$n\n\t * @return\tCI_Upload\n\t *\/",689],["T_WHITESPACE","\n\t",694],["T_PUBLIC","public",695],["T_WHITESPACE"," ",695],["T_FUNCTION","function",695],["T_WHITESPACE"," ",695],["T_STRING","set_max_filesize",695],"(",["T_VARIABLE","$n",695],")",["T_WHITESPACE","\n\t",695],"{",["T_WHITESPACE","\n\t\t",696],["T_VARIABLE","$this",697],["T_OBJECT_OPERATOR","->",697],["T_STRING","max_size",697],["T_WHITESPACE"," ",697],"=",["T_WHITESPACE"," ",697],"(",["T_VARIABLE","$n",697],["T_WHITESPACE"," ",697],"<",["T_WHITESPACE"," ",697],["T_LNUMBER","0",697],")",["T_WHITESPACE"," ",697],"?",["T_WHITESPACE"," ",697],["T_LNUMBER","0",697],["T_WHITESPACE"," ",697],":",["T_WHITESPACE"," ",697],["T_INT_CAST","(int)",697],["T_WHITESPACE"," ",697],["T_VARIABLE","$n",697],";",["T_WHITESPACE","\n\t\t",697],["T_RETURN","return",698],["T_WHITESPACE"," ",698],["T_VARIABLE","$this",698],";",["T_WHITESPACE","\n\t",698],"}",["T_WHITESPACE","\n\n\t",699],["T_COMMENT","\/\/ --------------------------------------------------------------------\n",701],["T_WHITESPACE","\n\t",702],["T_DOC_COMMENT","\/**\n\t * Set Maximum File Size\n\t *\n\t * An internal alias to set_max_filesize() to help with configuration\n\t * as initialize() will look for a set_<property_name>() method ...\n\t *\n\t * @param\tint\t$n\n\t * @return\tCI_Upload\n\t *\/",703],["T_WHITESPACE","\n\t",711],["T_PROTECTED","protected",712],["T_WHITESPACE"," ",712],["T_FUNCTION","function",712],["T_WHITESPACE"," ",712],["T_STRING","set_max_size",712],"(",["T_VARIABLE","$n",712],")",["T_WHITESPACE","\n\t",712],"{",["T_WHITESPACE","\n\t\t",713],["T_RETURN","return",714],["T_WHITESPACE"," ",714],["T_VARIABLE","$this",714],["T_OBJECT_OPERATOR","->",714],["T_STRING","set_max_filesize",714],"(",["T_VARIABLE","$n",714],")",";",["T_WHITESPACE","\n\t",714],"}",["T_WHITESPACE","\n\n\t",715],["T_COMMENT","\/\/ --------------------------------------------------------------------\n",717],["T_WHITESPACE","\n\t",718],["T_DOC_COMMENT","\/**\n\t * Set Maximum File Name Length\n\t *\n\t * @param\tint\t$n\n\t * @return\tCI_Upload\n\t *\/",719],["T_WHITESPACE","\n\t",724],["T_PUBLIC","public",725],["T_WHITESPACE"," ",725],["T_FUNCTION","function",725],["T_WHITESPACE"," ",725],["T_STRING","set_max_filename",725],"(",["T_VARIABLE","$n",725],")",["T_WHITESPACE","\n\t",725],"{",["T_WHITESPACE","\n\t\t",726],["T_VARIABLE","$this",727],["T_OBJECT_OPERATOR","->",727],["T_STRING","max_filename",727],["T_WHITESPACE"," ",727],"=",["T_WHITESPACE"," ",727],"(",["T_VARIABLE","$n",727],["T_WHITESPACE"," ",727],"<",["T_WHITESPACE"," ",727],["T_LNUMBER","0",727],")",["T_WHITESPACE"," ",727],"?",["T_WHITESPACE"," ",727],["T_LNUMBER","0",727],["T_WHITESPACE"," ",727],":",["T_WHITESPACE"," ",727],["T_INT_CAST","(int)",727],["T_WHITESPACE"," ",727],["T_VARIABLE","$n",727],";",["T_WHITESPACE","\n\t\t",727],["T_RETURN","return",728],["T_WHITESPACE"," ",728],["T_VARIABLE","$this",728],";",["T_WHITESPACE","\n\t",728],"}",["T_WHITESPACE","\n\n\t",729],["T_COMMENT","\/\/ --------------------------------------------------------------------\n",731],["T_WHITESPACE","\n\t",732],["T_DOC_COMMENT","\/**\n\t * Set Maximum Image Width\n\t *\n\t * @param\tint\t$n\n\t * @return\tCI_Upload\n\t *\/",733],["T_WHITESPACE","\n\t",738],["T_PUBLIC","public",739],["T_WHITESPACE"," ",739],["T_FUNCTION","function",739],["T_WHITESPACE"," ",739],["T_STRING","set_max_width",739],"(",["T_VARIABLE","$n",739],")",["T_WHITESPACE","\n\t",739],"{",["T_WHITESPACE","\n\t\t",740],["T_VARIABLE","$this",741],["T_OBJECT_OPERATOR","->",741],["T_STRING","max_width",741],["T_WHITESPACE"," ",741],"=",["T_WHITESPACE"," ",741],"(",["T_VARIABLE","$n",741],["T_WHITESPACE"," ",741],"<",["T_WHITESPACE"," ",741],["T_LNUMBER","0",741],")",["T_WHITESPACE"," ",741],"?",["T_WHITESPACE"," ",741],["T_LNUMBER","0",741],["T_WHITESPACE"," ",741],":",["T_WHITESPACE"," ",741],["T_INT_CAST","(int)",741],["T_WHITESPACE"," ",741],["T_VARIABLE","$n",741],";",["T_WHITESPACE","\n\t\t",741],["T_RETURN","return",742],["T_WHITESPACE"," ",742],["T_VARIABLE","$this",742],";",["T_WHITESPACE","\n\t",742],"}",["T_WHITESPACE","\n\n\t",743],["T_COMMENT","\/\/ --------------------------------------------------------------------\n",745],["T_WHITESPACE","\n\t",746],["T_DOC_COMMENT","\/**\n\t * Set Maximum Image Height\n\t *\n\t * @param\tint\t$n\n\t * @return\tCI_Upload\n\t *\/",747],["T_WHITESPACE","\n\t",752],["T_PUBLIC","public",753],["T_WHITESPACE"," ",753],["T_FUNCTION","function",753],["T_WHITESPACE"," ",753],["T_STRING","set_max_height",753],"(",["T_VARIABLE","$n",753],")",["T_WHITESPACE","\n\t",753],"{",["T_WHITESPACE","\n\t\t",754],["T_VARIABLE","$this",755],["T_OBJECT_OPERATOR","->",755],["T_STRING","max_height",755],["T_WHITESPACE"," ",755],"=",["T_WHITESPACE"," ",755],"(",["T_VARIABLE","$n",755],["T_WHITESPACE"," ",755],"<",["T_WHITESPACE"," ",755],["T_LNUMBER","0",755],")",["T_WHITESPACE"," ",755],"?",["T_WHITESPACE"," ",755],["T_LNUMBER","0",755],["T_WHITESPACE"," ",755],":",["T_WHITESPACE"," ",755],["T_INT_CAST","(int)",755],["T_WHITESPACE"," ",755],["T_VARIABLE","$n",755],";",["T_WHITESPACE","\n\t\t",755],["T_RETURN","return",756],["T_WHITESPACE"," ",756],["T_VARIABLE","$this",756],";",["T_WHITESPACE","\n\t",756],"}",["T_WHITESPACE","\n\n\t",757],["T_COMMENT","\/\/ --------------------------------------------------------------------\n",759],["T_WHITESPACE","\n\t",760],["T_DOC_COMMENT","\/**\n\t * Set minimum image width\n\t *\n\t * @param\tint\t$n\n\t * @return\tCI_Upload\n\t *\/",761],["T_WHITESPACE","\n\t",766],["T_PUBLIC","public",767],["T_WHITESPACE"," ",767],["T_FUNCTION","function",767],["T_WHITESPACE"," ",767],["T_STRING","set_min_width",767],"(",["T_VARIABLE","$n",767],")",["T_WHITESPACE","\n\t",767],"{",["T_WHITESPACE","\n\t\t",768],["T_VARIABLE","$this",769],["T_OBJECT_OPERATOR","->",769],["T_STRING","min_width",769],["T_WHITESPACE"," ",769],"=",["T_WHITESPACE"," ",769],"(",["T_VARIABLE","$n",769],["T_WHITESPACE"," ",769],"<",["T_WHITESPACE"," ",769],["T_LNUMBER","0",769],")",["T_WHITESPACE"," ",769],"?",["T_WHITESPACE"," ",769],["T_LNUMBER","0",769],["T_WHITESPACE"," ",769],":",["T_WHITESPACE"," ",769],["T_INT_CAST","(int)",769],["T_WHITESPACE"," ",769],["T_VARIABLE","$n",769],";",["T_WHITESPACE","\n\t\t",769],["T_RETURN","return",770],["T_WHITESPACE"," ",770],["T_VARIABLE","$this",770],";",["T_WHITESPACE","\n\t",770],"}",["T_WHITESPACE","\n\n\t",771],["T_COMMENT","\/\/ --------------------------------------------------------------------\n",773],["T_WHITESPACE","\n\t",774],["T_DOC_COMMENT","\/**\n\t * Set minimum image height\n\t *\n\t * @param\tint\t$n\n\t * @return\tCI_Upload\n\t *\/",775],["T_WHITESPACE","\n\t",780],["T_PUBLIC","public",781],["T_WHITESPACE"," ",781],["T_FUNCTION","function",781],["T_WHITESPACE"," ",781],["T_STRING","set_min_height",781],"(",["T_VARIABLE","$n",781],")",["T_WHITESPACE","\n\t",781],"{",["T_WHITESPACE","\n\t\t",782],["T_VARIABLE","$this",783],["T_OBJECT_OPERATOR","->",783],["T_STRING","min_height",783],["T_WHITESPACE"," ",783],"=",["T_WHITESPACE"," ",783],"(",["T_VARIABLE","$n",783],["T_WHITESPACE"," ",783],"<",["T_WHITESPACE"," ",783],["T_LNUMBER","0",783],")",["T_WHITESPACE"," ",783],"?",["T_WHITESPACE"," ",783],["T_LNUMBER","0",783],["T_WHITESPACE"," ",783],":",["T_WHITESPACE"," ",783],["T_INT_CAST","(int)",783],["T_WHITESPACE"," ",783],["T_VARIABLE","$n",783],";",["T_WHITESPACE","\n\t\t",783],["T_RETURN","return",784],["T_WHITESPACE"," ",784],["T_VARIABLE","$this",784],";",["T_WHITESPACE","\n\t",784],"}",["T_WHITESPACE","\n\n\t",785],["T_COMMENT","\/\/ --------------------------------------------------------------------\n",787],["T_WHITESPACE","\n\t",788],["T_DOC_COMMENT","\/**\n\t * Set Allowed File Types\n\t *\n\t * @param\tmixed\t$types\n\t * @return\tCI_Upload\n\t *\/",789],["T_WHITESPACE","\n\t",794],["T_PUBLIC","public",795],["T_WHITESPACE"," ",795],["T_FUNCTION","function",795],["T_WHITESPACE"," ",795],["T_STRING","set_allowed_types",795],"(",["T_VARIABLE","$types",795],")",["T_WHITESPACE","\n\t",795],"{",["T_WHITESPACE","\n\t\t",796],["T_VARIABLE","$this",797],["T_OBJECT_OPERATOR","->",797],["T_STRING","allowed_types",797],["T_WHITESPACE"," ",797],"=",["T_WHITESPACE"," ",797],"(",["T_STRING","is_array",797],"(",["T_VARIABLE","$types",797],")",["T_WHITESPACE"," ",797],["T_LOGICAL_OR","OR",797],["T_WHITESPACE"," ",797],["T_VARIABLE","$types",797],["T_WHITESPACE"," ",797],["T_IS_IDENTICAL","===",797],["T_WHITESPACE"," ",797],["T_CONSTANT_ENCAPSED_STRING","'*'",797],")",["T_WHITESPACE","\n\t\t\t",797],"?",["T_WHITESPACE"," ",798],["T_VARIABLE","$types",798],["T_WHITESPACE","\n\t\t\t",798],":",["T_WHITESPACE"," ",799],["T_STRING","explode",799],"(",["T_CONSTANT_ENCAPSED_STRING","'|'",799],",",["T_WHITESPACE"," ",799],["T_VARIABLE","$types",799],")",";",["T_WHITESPACE","\n\t\t",799],["T_RETURN","return",800],["T_WHITESPACE"," ",800],["T_VARIABLE","$this",800],";",["T_WHITESPACE","\n\t",800],"}",["T_WHITESPACE","\n\n\t",801],["T_COMMENT","\/\/ --------------------------------------------------------------------\n",803],["T_WHITESPACE","\n\t",804],["T_DOC_COMMENT","\/**\n\t * Set Image Properties\n\t *\n\t * Uses GD to determine the width\/height\/type of image\n\t *\n\t * @param\tstring\t$path\n\t * @return\tCI_Upload\n\t *\/",805],["T_WHITESPACE","\n\t",812],["T_PUBLIC","public",813],["T_WHITESPACE"," ",813],["T_FUNCTION","function",813],["T_WHITESPACE"," ",813],["T_STRING","set_image_properties",813],"(",["T_VARIABLE","$path",813],["T_WHITESPACE"," ",813],"=",["T_WHITESPACE"," ",813],["T_CONSTANT_ENCAPSED_STRING","''",813],")",["T_WHITESPACE","\n\t",813],"{",["T_WHITESPACE","\n\t\t",814],["T_IF","if",815],["T_WHITESPACE"," ",815],"(",["T_VARIABLE","$this",815],["T_OBJECT_OPERATOR","->",815],["T_STRING","is_image",815],"(",")",["T_WHITESPACE"," ",815],["T_BOOLEAN_AND","&&",815],["T_WHITESPACE"," ",815],["T_STRING","function_exists",815],"(",["T_CONSTANT_ENCAPSED_STRING","'getimagesize'",815],")",")",["T_WHITESPACE","\n\t\t",815],"{",["T_WHITESPACE","\n\t\t\t",816],["T_IF","if",817],["T_WHITESPACE"," ",817],"(",["T_STRING","FALSE",817],["T_WHITESPACE"," ",817],["T_IS_NOT_IDENTICAL","!==",817],["T_WHITESPACE"," ",817],"(",["T_VARIABLE","$D",817],["T_WHITESPACE"," ",817],"=",["T_WHITESPACE"," ",817],"@",["T_STRING","getimagesize",817],"(",["T_VARIABLE","$path",817],")",")",")",["T_WHITESPACE","\n\t\t\t",817],"{",["T_WHITESPACE","\n\t\t\t\t",818],["T_VARIABLE","$types",819],["T_WHITESPACE"," ",819],"=",["T_WHITESPACE"," ",819],["T_ARRAY","array",819],"(",["T_LNUMBER","1",819],["T_WHITESPACE"," ",819],["T_DOUBLE_ARROW","=>",819],["T_WHITESPACE"," ",819],["T_CONSTANT_ENCAPSED_STRING","'gif'",819],",",["T_WHITESPACE"," ",819],["T_LNUMBER","2",819],["T_WHITESPACE"," ",819],["T_DOUBLE_ARROW","=>",819],["T_WHITESPACE"," ",819],["T_CONSTANT_ENCAPSED_STRING","'jpeg'",819],",",["T_WHITESPACE"," ",819],["T_LNUMBER","3",819],["T_WHITESPACE"," ",819],["T_DOUBLE_ARROW","=>",819],["T_WHITESPACE"," ",819],["T_CONSTANT_ENCAPSED_STRING","'png'",819],")",";",["T_WHITESPACE","\n\n\t\t\t\t",819],["T_VARIABLE","$this",821],["T_OBJECT_OPERATOR","->",821],["T_STRING","image_width",821],["T_WHITESPACE","\t",821],"=",["T_WHITESPACE"," ",821],["T_VARIABLE","$D",821],"[",["T_LNUMBER","0",821],"]",";",["T_WHITESPACE","\n\t\t\t\t",821],["T_VARIABLE","$this",822],["T_OBJECT_OPERATOR","->",822],["T_STRING","image_height",822],["T_WHITESPACE","\t",822],"=",["T_WHITESPACE"," ",822],["T_VARIABLE","$D",822],"[",["T_LNUMBER","1",822],"]",";",["T_WHITESPACE","\n\t\t\t\t",822],["T_VARIABLE","$this",823],["T_OBJECT_OPERATOR","->",823],["T_STRING","image_type",823],["T_WHITESPACE","\t",823],"=",["T_WHITESPACE"," ",823],["T_ISSET","isset",823],"(",["T_VARIABLE","$types",823],"[",["T_VARIABLE","$D",823],"[",["T_LNUMBER","2",823],"]","]",")",["T_WHITESPACE"," ",823],"?",["T_WHITESPACE"," ",823],["T_VARIABLE","$types",823],"[",["T_VARIABLE","$D",823],"[",["T_LNUMBER","2",823],"]","]",["T_WHITESPACE"," ",823],":",["T_WHITESPACE"," ",823],["T_CONSTANT_ENCAPSED_STRING","'unknown'",823],";",["T_WHITESPACE","\n\t\t\t\t",823],["T_VARIABLE","$this",824],["T_OBJECT_OPERATOR","->",824],["T_STRING","image_size_str",824],["T_WHITESPACE","\t",824],"=",["T_WHITESPACE"," ",824],["T_VARIABLE","$D",824],"[",["T_LNUMBER","3",824],"]",";",["T_WHITESPACE"," ",824],["T_COMMENT","\/\/ string containing height and width\n",824],["T_WHITESPACE","\t\t\t",825],"}",["T_WHITESPACE","\n\t\t",825],"}",["T_WHITESPACE","\n\n\t\t",826],["T_RETURN","return",828],["T_WHITESPACE"," ",828],["T_VARIABLE","$this",828],";",["T_WHITESPACE","\n\t",828],"}",["T_WHITESPACE","\n\n\t",829],["T_COMMENT","\/\/ --------------------------------------------------------------------\n",831],["T_WHITESPACE","\n\t",832],["T_DOC_COMMENT","\/**\n\t * Set XSS Clean\n\t *\n\t * Enables the XSS flag so that the file that was uploaded\n\t * will be run through the XSS filter.\n\t *\n\t * @param\tbool\t$flag\n\t * @return\tCI_Upload\n\t *\/",833],["T_WHITESPACE","\n\t",841],["T_PUBLIC","public",842],["T_WHITESPACE"," ",842],["T_FUNCTION","function",842],["T_WHITESPACE"," ",842],["T_STRING","set_xss_clean",842],"(",["T_VARIABLE","$flag",842],["T_WHITESPACE"," ",842],"=",["T_WHITESPACE"," ",842],["T_STRING","FALSE",842],")",["T_WHITESPACE","\n\t",842],"{",["T_WHITESPACE","\n\t\t",843],["T_VARIABLE","$this",844],["T_OBJECT_OPERATOR","->",844],["T_STRING","xss_clean",844],["T_WHITESPACE"," ",844],"=",["T_WHITESPACE"," ",844],"(",["T_VARIABLE","$flag",844],["T_WHITESPACE"," ",844],["T_IS_IDENTICAL","===",844],["T_WHITESPACE"," ",844],["T_STRING","TRUE",844],")",";",["T_WHITESPACE","\n\t\t",844],["T_RETURN","return",845],["T_WHITESPACE"," ",845],["T_VARIABLE","$this",845],";",["T_WHITESPACE","\n\t",845],"}",["T_WHITESPACE","\n\n\t",846],["T_COMMENT","\/\/ --------------------------------------------------------------------\n",848],["T_WHITESPACE","\n\t",849],["T_DOC_COMMENT","\/**\n\t * Validate the image\n\t *\n\t * @return\tbool\n\t *\/",850],["T_WHITESPACE","\n\t",854],["T_PUBLIC","public",855],["T_WHITESPACE"," ",855],["T_FUNCTION","function",855],["T_WHITESPACE"," ",855],["T_STRING","is_image",855],"(",")",["T_WHITESPACE","\n\t",855],"{",["T_WHITESPACE","\n\t\t",856],["T_COMMENT","\/\/ IE will sometimes return odd mime-types during upload, so here we just standardize all\n",857],["T_WHITESPACE","\t\t",858],["T_COMMENT","\/\/ jpegs or pngs to the same file type.\n",858],["T_WHITESPACE","\n\t\t",859],["T_VARIABLE","$png_mimes",860],["T_WHITESPACE","  ",860],"=",["T_WHITESPACE"," ",860],["T_ARRAY","array",860],"(",["T_CONSTANT_ENCAPSED_STRING","'image\/x-png'",860],")",";",["T_WHITESPACE","\n\t\t",860],["T_VARIABLE","$jpeg_mimes",861],["T_WHITESPACE"," ",861],"=",["T_WHITESPACE"," ",861],["T_ARRAY","array",861],"(",["T_CONSTANT_ENCAPSED_STRING","'image\/jpg'",861],",",["T_WHITESPACE"," ",861],["T_CONSTANT_ENCAPSED_STRING","'image\/jpe'",861],",",["T_WHITESPACE"," ",861],["T_CONSTANT_ENCAPSED_STRING","'image\/jpeg'",861],",",["T_WHITESPACE"," ",861],["T_CONSTANT_ENCAPSED_STRING","'image\/pjpeg'",861],")",";",["T_WHITESPACE","\n\n\t\t",861],["T_IF","if",863],["T_WHITESPACE"," ",863],"(",["T_STRING","in_array",863],"(",["T_VARIABLE","$this",863],["T_OBJECT_OPERATOR","->",863],["T_STRING","file_type",863],",",["T_WHITESPACE"," ",863],["T_VARIABLE","$png_mimes",863],")",")",["T_WHITESPACE","\n\t\t",863],"{",["T_WHITESPACE","\n\t\t\t",864],["T_VARIABLE","$this",865],["T_OBJECT_OPERATOR","->",865],["T_STRING","file_type",865],["T_WHITESPACE"," ",865],"=",["T_WHITESPACE"," ",865],["T_CONSTANT_ENCAPSED_STRING","'image\/png'",865],";",["T_WHITESPACE","\n\t\t",865],"}",["T_WHITESPACE","\n\t\t",866],["T_ELSEIF","elseif",867],["T_WHITESPACE"," ",867],"(",["T_STRING","in_array",867],"(",["T_VARIABLE","$this",867],["T_OBJECT_OPERATOR","->",867],["T_STRING","file_type",867],",",["T_WHITESPACE"," ",867],["T_VARIABLE","$jpeg_mimes",867],")",")",["T_WHITESPACE","\n\t\t",867],"{",["T_WHITESPACE","\n\t\t\t",868],["T_VARIABLE","$this",869],["T_OBJECT_OPERATOR","->",869],["T_STRING","file_type",869],["T_WHITESPACE"," ",869],"=",["T_WHITESPACE"," ",869],["T_CONSTANT_ENCAPSED_STRING","'image\/jpeg'",869],";",["T_WHITESPACE","\n\t\t",869],"}",["T_WHITESPACE","\n\n\t\t",870],["T_VARIABLE","$img_mimes",872],["T_WHITESPACE"," ",872],"=",["T_WHITESPACE"," ",872],["T_ARRAY","array",872],"(",["T_CONSTANT_ENCAPSED_STRING","'image\/gif'",872],",",["T_WHITESPACE","\t",872],["T_CONSTANT_ENCAPSED_STRING","'image\/jpeg'",872],",",["T_WHITESPACE"," ",872],["T_CONSTANT_ENCAPSED_STRING","'image\/png'",872],")",";",["T_WHITESPACE","\n\n\t\t",872],["T_RETURN","return",874],["T_WHITESPACE"," ",874],["T_STRING","in_array",874],"(",["T_VARIABLE","$this",874],["T_OBJECT_OPERATOR","->",874],["T_STRING","file_type",874],",",["T_WHITESPACE"," ",874],["T_VARIABLE","$img_mimes",874],",",["T_WHITESPACE"," ",874],["T_STRING","TRUE",874],")",";",["T_WHITESPACE","\n\t",874],"}",["T_WHITESPACE","\n\n\t",875],["T_COMMENT","\/\/ --------------------------------------------------------------------\n",877],["T_WHITESPACE","\n\t",878],["T_DOC_COMMENT","\/**\n\t * Verify that the filetype is allowed\n\t *\n\t * @param\tbool\t$ignore_mime\n\t * @return\tbool\n\t *\/",879],["T_WHITESPACE","\n\t",884],["T_PUBLIC","public",885],["T_WHITESPACE"," ",885],["T_FUNCTION","function",885],["T_WHITESPACE"," ",885],["T_STRING","is_allowed_filetype",885],"(",["T_VARIABLE","$ignore_mime",885],["T_WHITESPACE"," ",885],"=",["T_WHITESPACE"," ",885],["T_STRING","FALSE",885],")",["T_WHITESPACE","\n\t",885],"{",["T_WHITESPACE","\n\t\t",886],["T_IF","if",887],["T_WHITESPACE"," ",887],"(",["T_VARIABLE","$this",887],["T_OBJECT_OPERATOR","->",887],["T_STRING","allowed_types",887],["T_WHITESPACE"," ",887],["T_IS_IDENTICAL","===",887],["T_WHITESPACE"," ",887],["T_CONSTANT_ENCAPSED_STRING","'*'",887],")",["T_WHITESPACE","\n\t\t",887],"{",["T_WHITESPACE","\n\t\t\t",888],["T_RETURN","return",889],["T_WHITESPACE"," ",889],["T_STRING","TRUE",889],";",["T_WHITESPACE","\n\t\t",889],"}",["T_WHITESPACE","\n\n\t\t",890],["T_IF","if",892],["T_WHITESPACE"," ",892],"(",["T_EMPTY","empty",892],"(",["T_VARIABLE","$this",892],["T_OBJECT_OPERATOR","->",892],["T_STRING","allowed_types",892],")",["T_WHITESPACE"," ",892],["T_LOGICAL_OR","OR",892],["T_WHITESPACE"," ",892],"!",["T_WHITESPACE"," ",892],["T_STRING","is_array",892],"(",["T_VARIABLE","$this",892],["T_OBJECT_OPERATOR","->",892],["T_STRING","allowed_types",892],")",")",["T_WHITESPACE","\n\t\t",892],"{",["T_WHITESPACE","\n\t\t\t",893],["T_VARIABLE","$this",894],["T_OBJECT_OPERATOR","->",894],["T_STRING","set_error",894],"(",["T_CONSTANT_ENCAPSED_STRING","'upload_no_file_types'",894],",",["T_WHITESPACE"," ",894],["T_CONSTANT_ENCAPSED_STRING","'debug'",894],")",";",["T_WHITESPACE","\n\t\t\t",894],["T_RETURN","return",895],["T_WHITESPACE"," ",895],["T_STRING","FALSE",895],";",["T_WHITESPACE","\n\t\t",895],"}",["T_WHITESPACE","\n\n\t\t",896],["T_VARIABLE","$ext",898],["T_WHITESPACE"," ",898],"=",["T_WHITESPACE"," ",898],["T_STRING","strtolower",898],"(",["T_STRING","ltrim",898],"(",["T_VARIABLE","$this",898],["T_OBJECT_OPERATOR","->",898],["T_STRING","file_ext",898],",",["T_WHITESPACE"," ",898],["T_CONSTANT_ENCAPSED_STRING","'.'",898],")",")",";",["T_WHITESPACE","\n\n\t\t",898],["T_IF","if",900],["T_WHITESPACE"," ",900],"(",["T_WHITESPACE"," ",900],"!",["T_WHITESPACE"," ",900],["T_STRING","in_array",900],"(",["T_VARIABLE","$ext",900],",",["T_WHITESPACE"," ",900],["T_VARIABLE","$this",900],["T_OBJECT_OPERATOR","->",900],["T_STRING","allowed_types",900],",",["T_WHITESPACE"," ",900],["T_STRING","TRUE",900],")",")",["T_WHITESPACE","\n\t\t",900],"{",["T_WHITESPACE","\n\t\t\t",901],["T_RETURN","return",902],["T_WHITESPACE"," ",902],["T_STRING","FALSE",902],";",["T_WHITESPACE","\n\t\t",902],"}",["T_WHITESPACE","\n\n\t\t",903],["T_COMMENT","\/\/ Images get some additional checks\n",905],["T_WHITESPACE","\t\t",906],["T_IF","if",906],["T_WHITESPACE"," ",906],"(",["T_STRING","in_array",906],"(",["T_VARIABLE","$ext",906],",",["T_WHITESPACE"," ",906],["T_ARRAY","array",906],"(",["T_CONSTANT_ENCAPSED_STRING","'gif'",906],",",["T_WHITESPACE"," ",906],["T_CONSTANT_ENCAPSED_STRING","'jpg'",906],",",["T_WHITESPACE"," ",906],["T_CONSTANT_ENCAPSED_STRING","'jpeg'",906],",",["T_WHITESPACE"," ",906],["T_CONSTANT_ENCAPSED_STRING","'jpe'",906],",",["T_WHITESPACE"," ",906],["T_CONSTANT_ENCAPSED_STRING","'png'",906],")",",",["T_WHITESPACE"," ",906],["T_STRING","TRUE",906],")",["T_WHITESPACE"," ",906],["T_BOOLEAN_AND","&&",906],["T_WHITESPACE"," ",906],"@",["T_STRING","getimagesize",906],"(",["T_VARIABLE","$this",906],["T_OBJECT_OPERATOR","->",906],["T_STRING","file_temp",906],")",["T_WHITESPACE"," ",906],["T_IS_IDENTICAL","===",906],["T_WHITESPACE"," ",906],["T_STRING","FALSE",906],")",["T_WHITESPACE","\n\t\t",906],"{",["T_WHITESPACE","\n\t\t\t",907],["T_RETURN","return",908],["T_WHITESPACE"," ",908],["T_STRING","FALSE",908],";",["T_WHITESPACE","\n\t\t",908],"}",["T_WHITESPACE","\n\n\t\t",909],["T_IF","if",911],["T_WHITESPACE"," ",911],"(",["T_VARIABLE","$ignore_mime",911],["T_WHITESPACE"," ",911],["T_IS_IDENTICAL","===",911],["T_WHITESPACE"," ",911],["T_STRING","TRUE",911],")",["T_WHITESPACE","\n\t\t",911],"{",["T_WHITESPACE","\n\t\t\t",912],["T_RETURN","return",913],["T_WHITESPACE"," ",913],["T_STRING","TRUE",913],";",["T_WHITESPACE","\n\t\t",913],"}",["T_WHITESPACE","\n\n\t\t",914],["T_IF","if",916],["T_WHITESPACE"," ",916],"(",["T_ISSET","isset",916],"(",["T_VARIABLE","$this",916],["T_OBJECT_OPERATOR","->",916],["T_STRING","_mimes",916],"[",["T_VARIABLE","$ext",916],"]",")",")",["T_WHITESPACE","\n\t\t",916],"{",["T_WHITESPACE","\n\t\t\t",917],["T_RETURN","return",918],["T_WHITESPACE"," ",918],["T_STRING","is_array",918],"(",["T_VARIABLE","$this",918],["T_OBJECT_OPERATOR","->",918],["T_STRING","_mimes",918],"[",["T_VARIABLE","$ext",918],"]",")",["T_WHITESPACE","\n\t\t\t\t",918],"?",["T_WHITESPACE"," ",919],["T_STRING","in_array",919],"(",["T_VARIABLE","$this",919],["T_OBJECT_OPERATOR","->",919],["T_STRING","file_type",919],",",["T_WHITESPACE"," ",919],["T_VARIABLE","$this",919],["T_OBJECT_OPERATOR","->",919],["T_STRING","_mimes",919],"[",["T_VARIABLE","$ext",919],"]",",",["T_WHITESPACE"," ",919],["T_STRING","TRUE",919],")",["T_WHITESPACE","\n\t\t\t\t",919],":",["T_WHITESPACE"," ",920],"(",["T_VARIABLE","$this",920],["T_OBJECT_OPERATOR","->",920],["T_STRING","_mimes",920],"[",["T_VARIABLE","$ext",920],"]",["T_WHITESPACE"," ",920],["T_IS_IDENTICAL","===",920],["T_WHITESPACE"," ",920],["T_VARIABLE","$this",920],["T_OBJECT_OPERATOR","->",920],["T_STRING","file_type",920],")",";",["T_WHITESPACE","\n\t\t",920],"}",["T_WHITESPACE","\n\n\t\t",921],["T_RETURN","return",923],["T_WHITESPACE"," ",923],["T_STRING","FALSE",923],";",["T_WHITESPACE","\n\t",923],"}",["T_WHITESPACE","\n\n\t",924],["T_COMMENT","\/\/ --------------------------------------------------------------------\n",926],["T_WHITESPACE","\n\t",927],["T_DOC_COMMENT","\/**\n\t * Verify that the file is within the allowed size\n\t *\n\t * @return\tbool\n\t *\/",928],["T_WHITESPACE","\n\t",932],["T_PUBLIC","public",933],["T_WHITESPACE"," ",933],["T_FUNCTION","function",933],["T_WHITESPACE"," ",933],["T_STRING","is_allowed_filesize",933],"(",")",["T_WHITESPACE","\n\t",933],"{",["T_WHITESPACE","\n\t\t",934],["T_RETURN","return",935],["T_WHITESPACE"," ",935],"(",["T_VARIABLE","$this",935],["T_OBJECT_OPERATOR","->",935],["T_STRING","max_size",935],["T_WHITESPACE"," ",935],["T_IS_IDENTICAL","===",935],["T_WHITESPACE"," ",935],["T_LNUMBER","0",935],["T_WHITESPACE"," ",935],["T_LOGICAL_OR","OR",935],["T_WHITESPACE"," ",935],["T_VARIABLE","$this",935],["T_OBJECT_OPERATOR","->",935],["T_STRING","max_size",935],["T_WHITESPACE"," ",935],">",["T_WHITESPACE"," ",935],["T_VARIABLE","$this",935],["T_OBJECT_OPERATOR","->",935],["T_STRING","file_size",935],")",";",["T_WHITESPACE","\n\t",935],"}",["T_WHITESPACE","\n\n\t",936],["T_COMMENT","\/\/ --------------------------------------------------------------------\n",938],["T_WHITESPACE","\n\t",939],["T_DOC_COMMENT","\/**\n\t * Verify that the image is within the allowed width\/height\n\t *\n\t * @return\tbool\n\t *\/",940],["T_WHITESPACE","\n\t",944],["T_PUBLIC","public",945],["T_WHITESPACE"," ",945],["T_FUNCTION","function",945],["T_WHITESPACE"," ",945],["T_STRING","is_allowed_dimensions",945],"(",")",["T_WHITESPACE","\n\t",945],"{",["T_WHITESPACE","\n\t\t",946],["T_IF","if",947],["T_WHITESPACE"," ",947],"(",["T_WHITESPACE"," ",947],"!",["T_WHITESPACE"," ",947],["T_VARIABLE","$this",947],["T_OBJECT_OPERATOR","->",947],["T_STRING","is_image",947],"(",")",")",["T_WHITESPACE","\n\t\t",947],"{",["T_WHITESPACE","\n\t\t\t",948],["T_RETURN","return",949],["T_WHITESPACE"," ",949],["T_STRING","TRUE",949],";",["T_WHITESPACE","\n\t\t",949],"}",["T_WHITESPACE","\n\n\t\t",950],["T_IF","if",952],["T_WHITESPACE"," ",952],"(",["T_STRING","function_exists",952],"(",["T_CONSTANT_ENCAPSED_STRING","'getimagesize'",952],")",")",["T_WHITESPACE","\n\t\t",952],"{",["T_WHITESPACE","\n\t\t\t",953],["T_VARIABLE","$D",954],["T_WHITESPACE"," ",954],"=",["T_WHITESPACE"," ",954],"@",["T_STRING","getimagesize",954],"(",["T_VARIABLE","$this",954],["T_OBJECT_OPERATOR","->",954],["T_STRING","file_temp",954],")",";",["T_WHITESPACE","\n\n\t\t\t",954],["T_IF","if",956],["T_WHITESPACE"," ",956],"(",["T_VARIABLE","$this",956],["T_OBJECT_OPERATOR","->",956],["T_STRING","max_width",956],["T_WHITESPACE"," ",956],">",["T_WHITESPACE"," ",956],["T_LNUMBER","0",956],["T_WHITESPACE"," ",956],["T_BOOLEAN_AND","&&",956],["T_WHITESPACE"," ",956],["T_VARIABLE","$D",956],"[",["T_LNUMBER","0",956],"]",["T_WHITESPACE"," ",956],">",["T_WHITESPACE"," ",956],["T_VARIABLE","$this",956],["T_OBJECT_OPERATOR","->",956],["T_STRING","max_width",956],")",["T_WHITESPACE","\n\t\t\t",956],"{",["T_WHITESPACE","\n\t\t\t\t",957],["T_RETURN","return",958],["T_WHITESPACE"," ",958],["T_STRING","FALSE",958],";",["T_WHITESPACE","\n\t\t\t",958],"}",["T_WHITESPACE","\n\n\t\t\t",959],["T_IF","if",961],["T_WHITESPACE"," ",961],"(",["T_VARIABLE","$this",961],["T_OBJECT_OPERATOR","->",961],["T_STRING","max_height",961],["T_WHITESPACE"," ",961],">",["T_WHITESPACE"," ",961],["T_LNUMBER","0",961],["T_WHITESPACE"," ",961],["T_BOOLEAN_AND","&&",961],["T_WHITESPACE"," ",961],["T_VARIABLE","$D",961],"[",["T_LNUMBER","1",961],"]",["T_WHITESPACE"," ",961],">",["T_WHITESPACE"," ",961],["T_VARIABLE","$this",961],["T_OBJECT_OPERATOR","->",961],["T_STRING","max_height",961],")",["T_WHITESPACE","\n\t\t\t",961],"{",["T_WHITESPACE","\n\t\t\t\t",962],["T_RETURN","return",963],["T_WHITESPACE"," ",963],["T_STRING","FALSE",963],";",["T_WHITESPACE","\n\t\t\t",963],"}",["T_WHITESPACE","\n\n\t\t\t",964],["T_IF","if",966],["T_WHITESPACE"," ",966],"(",["T_VARIABLE","$this",966],["T_OBJECT_OPERATOR","->",966],["T_STRING","min_width",966],["T_WHITESPACE"," ",966],">",["T_WHITESPACE"," ",966],["T_LNUMBER","0",966],["T_WHITESPACE"," ",966],["T_BOOLEAN_AND","&&",966],["T_WHITESPACE"," ",966],["T_VARIABLE","$D",966],"[",["T_LNUMBER","0",966],"]",["T_WHITESPACE"," ",966],"<",["T_WHITESPACE"," ",966],["T_VARIABLE","$this",966],["T_OBJECT_OPERATOR","->",966],["T_STRING","min_width",966],")",["T_WHITESPACE","\n\t\t\t",966],"{",["T_WHITESPACE","\n\t\t\t\t",967],["T_RETURN","return",968],["T_WHITESPACE"," ",968],["T_STRING","FALSE",968],";",["T_WHITESPACE","\n\t\t\t",968],"}",["T_WHITESPACE","\n\n\t\t\t",969],["T_IF","if",971],["T_WHITESPACE"," ",971],"(",["T_VARIABLE","$this",971],["T_OBJECT_OPERATOR","->",971],["T_STRING","min_height",971],["T_WHITESPACE"," ",971],">",["T_WHITESPACE"," ",971],["T_LNUMBER","0",971],["T_WHITESPACE"," ",971],["T_BOOLEAN_AND","&&",971],["T_WHITESPACE"," ",971],["T_VARIABLE","$D",971],"[",["T_LNUMBER","1",971],"]",["T_WHITESPACE"," ",971],"<",["T_WHITESPACE"," ",971],["T_VARIABLE","$this",971],["T_OBJECT_OPERATOR","->",971],["T_STRING","min_height",971],")",["T_WHITESPACE","\n\t\t\t",971],"{",["T_WHITESPACE","\n\t\t\t\t",972],["T_RETURN","return",973],["T_WHITESPACE"," ",973],["T_STRING","FALSE",973],";",["T_WHITESPACE","\n\t\t\t",973],"}",["T_WHITESPACE","\n\t\t",974],"}",["T_WHITESPACE","\n\n\t\t",975],["T_RETURN","return",977],["T_WHITESPACE"," ",977],["T_STRING","TRUE",977],";",["T_WHITESPACE","\n\t",977],"}",["T_WHITESPACE","\n\n\t",978],["T_COMMENT","\/\/ --------------------------------------------------------------------\n",980],["T_WHITESPACE","\n\t",981],["T_DOC_COMMENT","\/**\n\t * Validate Upload Path\n\t *\n\t * Verifies that it is a valid upload path with proper permissions.\n\t *\n\t * @return\tbool\n\t *\/",982],["T_WHITESPACE","\n\t",988],["T_PUBLIC","public",989],["T_WHITESPACE"," ",989],["T_FUNCTION","function",989],["T_WHITESPACE"," ",989],["T_STRING","validate_upload_path",989],"(",")",["T_WHITESPACE","\n\t",989],"{",["T_WHITESPACE","\n\t\t",990],["T_IF","if",991],["T_WHITESPACE"," ",991],"(",["T_VARIABLE","$this",991],["T_OBJECT_OPERATOR","->",991],["T_STRING","upload_path",991],["T_WHITESPACE"," ",991],["T_IS_IDENTICAL","===",991],["T_WHITESPACE"," ",991],["T_CONSTANT_ENCAPSED_STRING","''",991],")",["T_WHITESPACE","\n\t\t",991],"{",["T_WHITESPACE","\n\t\t\t",992],["T_VARIABLE","$this",993],["T_OBJECT_OPERATOR","->",993],["T_STRING","set_error",993],"(",["T_CONSTANT_ENCAPSED_STRING","'upload_no_filepath'",993],",",["T_WHITESPACE"," ",993],["T_CONSTANT_ENCAPSED_STRING","'error'",993],")",";",["T_WHITESPACE","\n\t\t\t",993],["T_RETURN","return",994],["T_WHITESPACE"," ",994],["T_STRING","FALSE",994],";",["T_WHITESPACE","\n\t\t",994],"}",["T_WHITESPACE","\n\n\t\t",995],["T_IF","if",997],["T_WHITESPACE"," ",997],"(",["T_STRING","realpath",997],"(",["T_VARIABLE","$this",997],["T_OBJECT_OPERATOR","->",997],["T_STRING","upload_path",997],")",["T_WHITESPACE"," ",997],["T_IS_NOT_IDENTICAL","!==",997],["T_WHITESPACE"," ",997],["T_STRING","FALSE",997],")",["T_WHITESPACE","\n\t\t",997],"{",["T_WHITESPACE","\n\t\t\t",998],["T_VARIABLE","$this",999],["T_OBJECT_OPERATOR","->",999],["T_STRING","upload_path",999],["T_WHITESPACE"," ",999],"=",["T_WHITESPACE"," ",999],["T_STRING","str_replace",999],"(",["T_CONSTANT_ENCAPSED_STRING","'\\\\'",999],",",["T_WHITESPACE"," ",999],["T_CONSTANT_ENCAPSED_STRING","'\/'",999],",",["T_WHITESPACE"," ",999],["T_STRING","realpath",999],"(",["T_VARIABLE","$this",999],["T_OBJECT_OPERATOR","->",999],["T_STRING","upload_path",999],")",")",";",["T_WHITESPACE","\n\t\t",999],"}",["T_WHITESPACE","\n\n\t\t",1000],["T_IF","if",1002],["T_WHITESPACE"," ",1002],"(",["T_WHITESPACE"," ",1002],"!",["T_WHITESPACE"," ",1002],["T_STRING","is_dir",1002],"(",["T_VARIABLE","$this",1002],["T_OBJECT_OPERATOR","->",1002],["T_STRING","upload_path",1002],")",")",["T_WHITESPACE","\n\t\t",1002],"{",["T_WHITESPACE","\n\t\t\t",1003],["T_VARIABLE","$this",1004],["T_OBJECT_OPERATOR","->",1004],["T_STRING","set_error",1004],"(",["T_CONSTANT_ENCAPSED_STRING","'upload_no_filepath'",1004],",",["T_WHITESPACE"," ",1004],["T_CONSTANT_ENCAPSED_STRING","'error'",1004],")",";",["T_WHITESPACE","\n\t\t\t",1004],["T_RETURN","return",1005],["T_WHITESPACE"," ",1005],["T_STRING","FALSE",1005],";",["T_WHITESPACE","\n\t\t",1005],"}",["T_WHITESPACE","\n\n\t\t",1006],["T_IF","if",1008],["T_WHITESPACE"," ",1008],"(",["T_WHITESPACE"," ",1008],"!",["T_WHITESPACE"," ",1008],["T_STRING","is_really_writable",1008],"(",["T_VARIABLE","$this",1008],["T_OBJECT_OPERATOR","->",1008],["T_STRING","upload_path",1008],")",")",["T_WHITESPACE","\n\t\t",1008],"{",["T_WHITESPACE","\n\t\t\t",1009],["T_VARIABLE","$this",1010],["T_OBJECT_OPERATOR","->",1010],["T_STRING","set_error",1010],"(",["T_CONSTANT_ENCAPSED_STRING","'upload_not_writable'",1010],",",["T_WHITESPACE"," ",1010],["T_CONSTANT_ENCAPSED_STRING","'error'",1010],")",";",["T_WHITESPACE","\n\t\t\t",1010],["T_RETURN","return",1011],["T_WHITESPACE"," ",1011],["T_STRING","FALSE",1011],";",["T_WHITESPACE","\n\t\t",1011],"}",["T_WHITESPACE","\n\n\t\t",1012],["T_VARIABLE","$this",1014],["T_OBJECT_OPERATOR","->",1014],["T_STRING","upload_path",1014],["T_WHITESPACE"," ",1014],"=",["T_WHITESPACE"," ",1014],["T_STRING","preg_replace",1014],"(",["T_CONSTANT_ENCAPSED_STRING","'\/(.+?)\\\/*$\/'",1014],",",["T_WHITESPACE"," ",1014],["T_CONSTANT_ENCAPSED_STRING","'\\\\1\/'",1014],",",["T_WHITESPACE","  ",1014],["T_VARIABLE","$this",1014],["T_OBJECT_OPERATOR","->",1014],["T_STRING","upload_path",1014],")",";",["T_WHITESPACE","\n\t\t",1014],["T_RETURN","return",1015],["T_WHITESPACE"," ",1015],["T_STRING","TRUE",1015],";",["T_WHITESPACE","\n\t",1015],"}",["T_WHITESPACE","\n\n\t",1016],["T_COMMENT","\/\/ --------------------------------------------------------------------\n",1018],["T_WHITESPACE","\n\t",1019],["T_DOC_COMMENT","\/**\n\t * Extract the file extension\n\t *\n\t * @param\tstring\t$filename\n\t * @return\tstring\n\t *\/",1020],["T_WHITESPACE","\n\t",1025],["T_PUBLIC","public",1026],["T_WHITESPACE"," ",1026],["T_FUNCTION","function",1026],["T_WHITESPACE"," ",1026],["T_STRING","get_extension",1026],"(",["T_VARIABLE","$filename",1026],")",["T_WHITESPACE","\n\t",1026],"{",["T_WHITESPACE","\n\t\t",1027],["T_VARIABLE","$x",1028],["T_WHITESPACE"," ",1028],"=",["T_WHITESPACE"," ",1028],["T_STRING","explode",1028],"(",["T_CONSTANT_ENCAPSED_STRING","'.'",1028],",",["T_WHITESPACE"," ",1028],["T_VARIABLE","$filename",1028],")",";",["T_WHITESPACE","\n\n\t\t",1028],["T_IF","if",1030],["T_WHITESPACE"," ",1030],"(",["T_STRING","count",1030],"(",["T_VARIABLE","$x",1030],")",["T_WHITESPACE"," ",1030],["T_IS_IDENTICAL","===",1030],["T_WHITESPACE"," ",1030],["T_LNUMBER","1",1030],")",["T_WHITESPACE","\n\t\t",1030],"{",["T_WHITESPACE","\n\t\t\t",1031],["T_RETURN","return",1032],["T_WHITESPACE"," ",1032],["T_CONSTANT_ENCAPSED_STRING","''",1032],";",["T_WHITESPACE","\n\t\t",1032],"}",["T_WHITESPACE","\n\n\t\t",1033],["T_VARIABLE","$ext",1035],["T_WHITESPACE"," ",1035],"=",["T_WHITESPACE"," ",1035],"(",["T_VARIABLE","$this",1035],["T_OBJECT_OPERATOR","->",1035],["T_STRING","file_ext_tolower",1035],")",["T_WHITESPACE"," ",1035],"?",["T_WHITESPACE"," ",1035],["T_STRING","strtolower",1035],"(",["T_STRING","end",1035],"(",["T_VARIABLE","$x",1035],")",")",["T_WHITESPACE"," ",1035],":",["T_WHITESPACE"," ",1035],["T_STRING","end",1035],"(",["T_VARIABLE","$x",1035],")",";",["T_WHITESPACE","\n\t\t",1035],["T_RETURN","return",1036],["T_WHITESPACE"," ",1036],["T_CONSTANT_ENCAPSED_STRING","'.'",1036],".",["T_VARIABLE","$ext",1036],";",["T_WHITESPACE","\n\t",1036],"}",["T_WHITESPACE","\n\n\t",1037],["T_COMMENT","\/\/ --------------------------------------------------------------------\n",1039],["T_WHITESPACE","\n\t",1040],["T_DOC_COMMENT","\/**\n\t * Limit the File Name Length\n\t *\n\t * @param\tstring\t$filename\n\t * @param\tint\t$length\n\t * @return\tstring\n\t *\/",1041],["T_WHITESPACE","\n\t",1047],["T_PUBLIC","public",1048],["T_WHITESPACE"," ",1048],["T_FUNCTION","function",1048],["T_WHITESPACE"," ",1048],["T_STRING","limit_filename_length",1048],"(",["T_VARIABLE","$filename",1048],",",["T_WHITESPACE"," ",1048],["T_VARIABLE","$length",1048],")",["T_WHITESPACE","\n\t",1048],"{",["T_WHITESPACE","\n\t\t",1049],["T_IF","if",1050],["T_WHITESPACE"," ",1050],"(",["T_STRING","strlen",1050],"(",["T_VARIABLE","$filename",1050],")",["T_WHITESPACE"," ",1050],"<",["T_WHITESPACE"," ",1050],["T_VARIABLE","$length",1050],")",["T_WHITESPACE","\n\t\t",1050],"{",["T_WHITESPACE","\n\t\t\t",1051],["T_RETURN","return",1052],["T_WHITESPACE"," ",1052],["T_VARIABLE","$filename",1052],";",["T_WHITESPACE","\n\t\t",1052],"}",["T_WHITESPACE","\n\n\t\t",1053],["T_VARIABLE","$ext",1055],["T_WHITESPACE"," ",1055],"=",["T_WHITESPACE"," ",1055],["T_CONSTANT_ENCAPSED_STRING","''",1055],";",["T_WHITESPACE","\n\t\t",1055],["T_IF","if",1056],["T_WHITESPACE"," ",1056],"(",["T_STRING","strpos",1056],"(",["T_VARIABLE","$filename",1056],",",["T_WHITESPACE"," ",1056],["T_CONSTANT_ENCAPSED_STRING","'.'",1056],")",["T_WHITESPACE"," ",1056],["T_IS_NOT_IDENTICAL","!==",1056],["T_WHITESPACE"," ",1056],["T_STRING","FALSE",1056],")",["T_WHITESPACE","\n\t\t",1056],"{",["T_WHITESPACE","\n\t\t\t",1057],["T_VARIABLE","$parts",1058],["T_WHITESPACE","\t\t",1058],"=",["T_WHITESPACE"," ",1058],["T_STRING","explode",1058],"(",["T_CONSTANT_ENCAPSED_STRING","'.'",1058],",",["T_WHITESPACE"," ",1058],["T_VARIABLE","$filename",1058],")",";",["T_WHITESPACE","\n\t\t\t",1058],["T_VARIABLE","$ext",1059],["T_WHITESPACE","\t\t",1059],"=",["T_WHITESPACE"," ",1059],["T_CONSTANT_ENCAPSED_STRING","'.'",1059],".",["T_STRING","array_pop",1059],"(",["T_VARIABLE","$parts",1059],")",";",["T_WHITESPACE","\n\t\t\t",1059],["T_VARIABLE","$filename",1060],["T_WHITESPACE","\t",1060],"=",["T_WHITESPACE"," ",1060],["T_STRING","implode",1060],"(",["T_CONSTANT_ENCAPSED_STRING","'.'",1060],",",["T_WHITESPACE"," ",1060],["T_VARIABLE","$parts",1060],")",";",["T_WHITESPACE","\n\t\t",1060],"}",["T_WHITESPACE","\n\n\t\t",1061],["T_RETURN","return",1063],["T_WHITESPACE"," ",1063],["T_STRING","substr",1063],"(",["T_VARIABLE","$filename",1063],",",["T_WHITESPACE"," ",1063],["T_LNUMBER","0",1063],",",["T_WHITESPACE"," ",1063],"(",["T_VARIABLE","$length",1063],["T_WHITESPACE"," ",1063],"-",["T_WHITESPACE"," ",1063],["T_STRING","strlen",1063],"(",["T_VARIABLE","$ext",1063],")",")",")",".",["T_VARIABLE","$ext",1063],";",["T_WHITESPACE","\n\t",1063],"}",["T_WHITESPACE","\n\n\t",1064],["T_COMMENT","\/\/ --------------------------------------------------------------------\n",1066],["T_WHITESPACE","\n\t",1067],["T_DOC_COMMENT","\/**\n\t * Runs the file through the XSS clean function\n\t *\n\t * This prevents people from embedding malicious code in their files.\n\t * I'm not sure that it won't negatively affect certain files in unexpected ways,\n\t * but so far I haven't found that it causes trouble.\n\t *\n\t * @return\tstring\n\t *\/",1068],["T_WHITESPACE","\n\t",1076],["T_PUBLIC","public",1077],["T_WHITESPACE"," ",1077],["T_FUNCTION","function",1077],["T_WHITESPACE"," ",1077],["T_STRING","do_xss_clean",1077],"(",")",["T_WHITESPACE","\n\t",1077],"{",["T_WHITESPACE","\n\t\t",1078],["T_VARIABLE","$file",1079],["T_WHITESPACE"," ",1079],"=",["T_WHITESPACE"," ",1079],["T_VARIABLE","$this",1079],["T_OBJECT_OPERATOR","->",1079],["T_STRING","file_temp",1079],";",["T_WHITESPACE","\n\n\t\t",1079],["T_IF","if",1081],["T_WHITESPACE"," ",1081],"(",["T_STRING","filesize",1081],"(",["T_VARIABLE","$file",1081],")",["T_WHITESPACE"," ",1081],["T_IS_EQUAL","==",1081],["T_WHITESPACE"," ",1081],["T_LNUMBER","0",1081],")",["T_WHITESPACE","\n\t\t",1081],"{",["T_WHITESPACE","\n\t\t\t",1082],["T_RETURN","return",1083],["T_WHITESPACE"," ",1083],["T_STRING","FALSE",1083],";",["T_WHITESPACE","\n\t\t",1083],"}",["T_WHITESPACE","\n\n\t\t",1084],["T_IF","if",1086],["T_WHITESPACE"," ",1086],"(",["T_STRING","memory_get_usage",1086],"(",")",["T_WHITESPACE"," ",1086],["T_BOOLEAN_AND","&&",1086],["T_WHITESPACE"," ",1086],"(",["T_VARIABLE","$memory_limit",1086],["T_WHITESPACE"," ",1086],"=",["T_WHITESPACE"," ",1086],["T_STRING","ini_get",1086],"(",["T_CONSTANT_ENCAPSED_STRING","'memory_limit'",1086],")",")",["T_WHITESPACE"," ",1086],">",["T_WHITESPACE"," ",1086],["T_LNUMBER","0",1086],")",["T_WHITESPACE","\n\t\t",1086],"{",["T_WHITESPACE","\n\t\t\t",1087],["T_VARIABLE","$memory_limit",1088],["T_WHITESPACE"," ",1088],"=",["T_WHITESPACE"," ",1088],["T_STRING","str_split",1088],"(",["T_VARIABLE","$memory_limit",1088],",",["T_WHITESPACE"," ",1088],["T_STRING","strspn",1088],"(",["T_VARIABLE","$memory_limit",1088],",",["T_WHITESPACE"," ",1088],["T_CONSTANT_ENCAPSED_STRING","'1234567890'",1088],")",")",";",["T_WHITESPACE","\n\t\t\t",1088],["T_IF","if",1089],["T_WHITESPACE"," ",1089],"(",["T_WHITESPACE"," ",1089],"!",["T_WHITESPACE"," ",1089],["T_EMPTY","empty",1089],"(",["T_VARIABLE","$memory_limit",1089],"[",["T_LNUMBER","1",1089],"]",")",")",["T_WHITESPACE","\n\t\t\t",1089],"{",["T_WHITESPACE","\n\t\t\t\t",1090],["T_SWITCH","switch",1091],["T_WHITESPACE"," ",1091],"(",["T_VARIABLE","$memory_limit",1091],"[",["T_LNUMBER","1",1091],"]","[",["T_LNUMBER","0",1091],"]",")",["T_WHITESPACE","\n\t\t\t\t",1091],"{",["T_WHITESPACE","\n\t\t\t\t\t",1092],["T_CASE","case",1093],["T_WHITESPACE"," ",1093],["T_CONSTANT_ENCAPSED_STRING","'g'",1093],":",["T_WHITESPACE","\n\t\t\t\t\t",1093],["T_CASE","case",1094],["T_WHITESPACE"," ",1094],["T_CONSTANT_ENCAPSED_STRING","'G'",1094],":",["T_WHITESPACE","\n\t\t\t\t\t\t",1094],["T_VARIABLE","$memory_limit",1095],"[",["T_LNUMBER","0",1095],"]",["T_WHITESPACE"," ",1095],["T_MUL_EQUAL","*=",1095],["T_WHITESPACE"," ",1095],["T_LNUMBER","1024",1095],["T_WHITESPACE"," ",1095],"*",["T_WHITESPACE"," ",1095],["T_LNUMBER","1024",1095],["T_WHITESPACE"," ",1095],"*",["T_WHITESPACE"," ",1095],["T_LNUMBER","1024",1095],";",["T_WHITESPACE","\n\t\t\t\t\t\t",1095],["T_BREAK","break",1096],";",["T_WHITESPACE","\n\t\t\t\t\t",1096],["T_CASE","case",1097],["T_WHITESPACE"," ",1097],["T_CONSTANT_ENCAPSED_STRING","'m'",1097],":",["T_WHITESPACE","\n\t\t\t\t\t",1097],["T_CASE","case",1098],["T_WHITESPACE"," ",1098],["T_CONSTANT_ENCAPSED_STRING","'M'",1098],":",["T_WHITESPACE","\n\t\t\t\t\t\t",1098],["T_VARIABLE","$memory_limit",1099],"[",["T_LNUMBER","0",1099],"]",["T_WHITESPACE"," ",1099],["T_MUL_EQUAL","*=",1099],["T_WHITESPACE"," ",1099],["T_LNUMBER","1024",1099],["T_WHITESPACE"," ",1099],"*",["T_WHITESPACE"," ",1099],["T_LNUMBER","1024",1099],";",["T_WHITESPACE","\n\t\t\t\t\t\t",1099],["T_BREAK","break",1100],";",["T_WHITESPACE","\n\t\t\t\t\t",1100],["T_DEFAULT","default",1101],":",["T_WHITESPACE","\n\t\t\t\t\t\t",1101],["T_BREAK","break",1102],";",["T_WHITESPACE","\n\t\t\t\t",1102],"}",["T_WHITESPACE","\n\t\t\t",1103],"}",["T_WHITESPACE","\n\n\t\t\t",1104],["T_VARIABLE","$memory_limit",1106],["T_WHITESPACE"," ",1106],"=",["T_WHITESPACE"," ",1106],["T_INT_CAST","(int)",1106],["T_WHITESPACE"," ",1106],["T_STRING","ceil",1106],"(",["T_STRING","filesize",1106],"(",["T_VARIABLE","$file",1106],")",["T_WHITESPACE"," ",1106],"+",["T_WHITESPACE"," ",1106],["T_VARIABLE","$memory_limit",1106],"[",["T_LNUMBER","0",1106],"]",")",";",["T_WHITESPACE","\n\t\t\t",1106],["T_STRING","ini_set",1107],"(",["T_CONSTANT_ENCAPSED_STRING","'memory_limit'",1107],",",["T_WHITESPACE"," ",1107],["T_VARIABLE","$memory_limit",1107],")",";",["T_WHITESPACE"," ",1107],["T_COMMENT","\/\/ When an integer is used, the value is measured in bytes. - PHP.net\n",1107],["T_WHITESPACE","\t\t",1108],"}",["T_WHITESPACE","\n\n\t\t",1108],["T_COMMENT","\/\/ If the file being uploaded is an image, then we should have no problem with XSS attacks (in theory), but\n",1110],["T_WHITESPACE","\t\t",1111],["T_COMMENT","\/\/ IE can be fooled into mime-type detecting a malformed image as an html file, thus executing an XSS attack on anyone\n",1111],["T_WHITESPACE","\t\t",1112],["T_COMMENT","\/\/ using IE who looks at the image. It does this by inspecting the first 255 bytes of an image. To get around this\n",1112],["T_WHITESPACE","\t\t",1113],["T_COMMENT","\/\/ CI will itself look at the first 255 bytes of an image to determine its relative safety. This can save a lot of\n",1113],["T_WHITESPACE","\t\t",1114],["T_COMMENT","\/\/ processor power and time if it is actually a clean image, as it will be in nearly all instances _except_ an\n",1114],["T_WHITESPACE","\t\t",1115],["T_COMMENT","\/\/ attempted XSS attack.\n",1115],["T_WHITESPACE","\n\t\t",1116],["T_IF","if",1117],["T_WHITESPACE"," ",1117],"(",["T_STRING","function_exists",1117],"(",["T_CONSTANT_ENCAPSED_STRING","'getimagesize'",1117],")",["T_WHITESPACE"," ",1117],["T_BOOLEAN_AND","&&",1117],["T_WHITESPACE"," ",1117],"@",["T_STRING","getimagesize",1117],"(",["T_VARIABLE","$file",1117],")",["T_WHITESPACE"," ",1117],["T_IS_NOT_IDENTICAL","!==",1117],["T_WHITESPACE"," ",1117],["T_STRING","FALSE",1117],")",["T_WHITESPACE","\n\t\t",1117],"{",["T_WHITESPACE","\n\t\t\t",1118],["T_IF","if",1119],["T_WHITESPACE"," ",1119],"(","(",["T_VARIABLE","$file",1119],["T_WHITESPACE"," ",1119],"=",["T_WHITESPACE"," ",1119],"@",["T_STRING","fopen",1119],"(",["T_VARIABLE","$file",1119],",",["T_WHITESPACE"," ",1119],["T_CONSTANT_ENCAPSED_STRING","'rb'",1119],")",")",["T_WHITESPACE"," ",1119],["T_IS_IDENTICAL","===",1119],["T_WHITESPACE"," ",1119],["T_STRING","FALSE",1119],")",["T_WHITESPACE"," ",1119],["T_COMMENT","\/\/ \"b\" to force binary\n",1119],["T_WHITESPACE","\t\t\t",1120],"{",["T_WHITESPACE","\n\t\t\t\t",1120],["T_RETURN","return",1121],["T_WHITESPACE"," ",1121],["T_STRING","FALSE",1121],";",["T_WHITESPACE"," ",1121],["T_COMMENT","\/\/ Couldn't open the file, return FALSE\n",1121],["T_WHITESPACE","\t\t\t",1122],"}",["T_WHITESPACE","\n\n\t\t\t",1122],["T_VARIABLE","$opening_bytes",1124],["T_WHITESPACE"," ",1124],"=",["T_WHITESPACE"," ",1124],["T_STRING","fread",1124],"(",["T_VARIABLE","$file",1124],",",["T_WHITESPACE"," ",1124],["T_LNUMBER","256",1124],")",";",["T_WHITESPACE","\n\t\t\t",1124],["T_STRING","fclose",1125],"(",["T_VARIABLE","$file",1125],")",";",["T_WHITESPACE","\n\n\t\t\t",1125],["T_COMMENT","\/\/ These are known to throw IE into mime-type detection chaos\n",1127],["T_WHITESPACE","\t\t\t",1128],["T_COMMENT","\/\/ <a, <body, <head, <html, <img, <plaintext, <pre, <script, <table, <title\n",1128],["T_WHITESPACE","\t\t\t",1129],["T_COMMENT","\/\/ title is basically just in SVG, but we filter it anyhow\n",1129],["T_WHITESPACE","\n\t\t\t",1130],["T_COMMENT","\/\/ if it's an image or no \"triggers\" detected in the first 256 bytes - we're good\n",1131],["T_WHITESPACE","\t\t\t",1132],["T_RETURN","return",1132],["T_WHITESPACE"," ",1132],"!",["T_WHITESPACE"," ",1132],["T_STRING","preg_match",1132],"(",["T_CONSTANT_ENCAPSED_STRING","'\/<(a|body|head|html|img|plaintext|pre|script|table|title)[\\s>]\/i'",1132],",",["T_WHITESPACE"," ",1132],["T_VARIABLE","$opening_bytes",1132],")",";",["T_WHITESPACE","\n\t\t",1132],"}",["T_WHITESPACE","\n\n\t\t",1133],["T_IF","if",1135],["T_WHITESPACE"," ",1135],"(","(",["T_VARIABLE","$data",1135],["T_WHITESPACE"," ",1135],"=",["T_WHITESPACE"," ",1135],"@",["T_STRING","file_get_contents",1135],"(",["T_VARIABLE","$file",1135],")",")",["T_WHITESPACE"," ",1135],["T_IS_IDENTICAL","===",1135],["T_WHITESPACE"," ",1135],["T_STRING","FALSE",1135],")",["T_WHITESPACE","\n\t\t",1135],"{",["T_WHITESPACE","\n\t\t\t",1136],["T_RETURN","return",1137],["T_WHITESPACE"," ",1137],["T_STRING","FALSE",1137],";",["T_WHITESPACE","\n\t\t",1137],"}",["T_WHITESPACE","\n\n\t\t",1138],["T_RETURN","return",1140],["T_WHITESPACE"," ",1140],["T_VARIABLE","$this",1140],["T_OBJECT_OPERATOR","->",1140],["T_STRING","_CI",1140],["T_OBJECT_OPERATOR","->",1140],["T_STRING","security",1140],["T_OBJECT_OPERATOR","->",1140],["T_STRING","xss_clean",1140],"(",["T_VARIABLE","$data",1140],",",["T_WHITESPACE"," ",1140],["T_STRING","TRUE",1140],")",";",["T_WHITESPACE","\n\t",1140],"}",["T_WHITESPACE","\n\n\t",1141],["T_COMMENT","\/\/ --------------------------------------------------------------------\n",1143],["T_WHITESPACE","\n\t",1144],["T_DOC_COMMENT","\/**\n\t * Set an error message\n\t *\n\t * @param\tstring\t$msg\n\t * @return\tCI_Upload\n\t *\/",1145],["T_WHITESPACE","\n\t",1150],["T_PUBLIC","public",1151],["T_WHITESPACE"," ",1151],["T_FUNCTION","function",1151],["T_WHITESPACE"," ",1151],["T_STRING","set_error",1151],"(",["T_VARIABLE","$msg",1151],",",["T_WHITESPACE"," ",1151],["T_VARIABLE","$log_level",1151],["T_WHITESPACE"," ",1151],"=",["T_WHITESPACE"," ",1151],["T_CONSTANT_ENCAPSED_STRING","'error'",1151],")",["T_WHITESPACE","\n\t",1151],"{",["T_WHITESPACE","\n\t\t",1152],["T_VARIABLE","$this",1153],["T_OBJECT_OPERATOR","->",1153],["T_STRING","_CI",1153],["T_OBJECT_OPERATOR","->",1153],["T_STRING","lang",1153],["T_OBJECT_OPERATOR","->",1153],["T_STRING","load",1153],"(",["T_CONSTANT_ENCAPSED_STRING","'upload'",1153],")",";",["T_WHITESPACE","\n\n\t\t",1153],["T_STRING","is_array",1155],"(",["T_VARIABLE","$msg",1155],")",["T_WHITESPACE"," ",1155],["T_LOGICAL_OR","OR",1155],["T_WHITESPACE"," ",1155],["T_VARIABLE","$msg",1155],["T_WHITESPACE"," ",1155],"=",["T_WHITESPACE"," ",1155],["T_ARRAY","array",1155],"(",["T_VARIABLE","$msg",1155],")",";",["T_WHITESPACE","\n\t\t",1155],["T_FOREACH","foreach",1156],["T_WHITESPACE"," ",1156],"(",["T_VARIABLE","$msg",1156],["T_WHITESPACE"," ",1156],["T_AS","as",1156],["T_WHITESPACE"," ",1156],["T_VARIABLE","$val",1156],")",["T_WHITESPACE","\n\t\t",1156],"{",["T_WHITESPACE","\n\t\t\t",1157],["T_VARIABLE","$msg",1158],["T_WHITESPACE"," ",1158],"=",["T_WHITESPACE"," ",1158],"(",["T_VARIABLE","$this",1158],["T_OBJECT_OPERATOR","->",1158],["T_STRING","_CI",1158],["T_OBJECT_OPERATOR","->",1158],["T_STRING","lang",1158],["T_OBJECT_OPERATOR","->",1158],["T_STRING","line",1158],"(",["T_VARIABLE","$val",1158],")",["T_WHITESPACE"," ",1158],["T_IS_IDENTICAL","===",1158],["T_WHITESPACE"," ",1158],["T_STRING","FALSE",1158],")",["T_WHITESPACE"," ",1158],"?",["T_WHITESPACE"," ",1158],["T_VARIABLE","$val",1158],["T_WHITESPACE"," ",1158],":",["T_WHITESPACE"," ",1158],["T_VARIABLE","$this",1158],["T_OBJECT_OPERATOR","->",1158],["T_STRING","_CI",1158],["T_OBJECT_OPERATOR","->",1158],["T_STRING","lang",1158],["T_OBJECT_OPERATOR","->",1158],["T_STRING","line",1158],"(",["T_VARIABLE","$val",1158],")",";",["T_WHITESPACE","\n\t\t\t",1158],["T_VARIABLE","$this",1159],["T_OBJECT_OPERATOR","->",1159],["T_STRING","error_msg",1159],"[","]",["T_WHITESPACE"," ",1159],"=",["T_WHITESPACE"," ",1159],["T_VARIABLE","$msg",1159],";",["T_WHITESPACE","\n\t\t\t",1159],["T_STRING","log_message",1160],"(",["T_VARIABLE","$log_level",1160],",",["T_WHITESPACE"," ",1160],["T_VARIABLE","$msg",1160],")",";",["T_WHITESPACE","\n\t\t",1160],"}",["T_WHITESPACE","\n\n\t\t",1161],["T_RETURN","return",1163],["T_WHITESPACE"," ",1163],["T_VARIABLE","$this",1163],";",["T_WHITESPACE","\n\t",1163],"}",["T_WHITESPACE","\n\n\t",1164],["T_COMMENT","\/\/ --------------------------------------------------------------------\n",1166],["T_WHITESPACE","\n\t",1167],["T_DOC_COMMENT","\/**\n\t * Display the error message\n\t *\n\t * @param\tstring\t$open\n\t * @param\tstring\t$close\n\t * @return\tstring\n\t *\/",1168],["T_WHITESPACE","\n\t",1174],["T_PUBLIC","public",1175],["T_WHITESPACE"," ",1175],["T_FUNCTION","function",1175],["T_WHITESPACE"," ",1175],["T_STRING","display_errors",1175],"(",["T_VARIABLE","$open",1175],["T_WHITESPACE"," ",1175],"=",["T_WHITESPACE"," ",1175],["T_CONSTANT_ENCAPSED_STRING","'<p>'",1175],",",["T_WHITESPACE"," ",1175],["T_VARIABLE","$close",1175],["T_WHITESPACE"," ",1175],"=",["T_WHITESPACE"," ",1175],["T_CONSTANT_ENCAPSED_STRING","'<\/p>'",1175],")",["T_WHITESPACE","\n\t",1175],"{",["T_WHITESPACE","\n\t\t",1176],["T_RETURN","return",1177],["T_WHITESPACE"," ",1177],"(",["T_STRING","count",1177],"(",["T_VARIABLE","$this",1177],["T_OBJECT_OPERATOR","->",1177],["T_STRING","error_msg",1177],")",["T_WHITESPACE"," ",1177],">",["T_WHITESPACE"," ",1177],["T_LNUMBER","0",1177],")",["T_WHITESPACE"," ",1177],"?",["T_WHITESPACE"," ",1177],["T_VARIABLE","$open",1177],".",["T_STRING","implode",1177],"(",["T_VARIABLE","$close",1177],".",["T_VARIABLE","$open",1177],",",["T_WHITESPACE"," ",1177],["T_VARIABLE","$this",1177],["T_OBJECT_OPERATOR","->",1177],["T_STRING","error_msg",1177],")",".",["T_VARIABLE","$close",1177],["T_WHITESPACE"," ",1177],":",["T_WHITESPACE"," ",1177],["T_CONSTANT_ENCAPSED_STRING","''",1177],";",["T_WHITESPACE","\n\t",1177],"}",["T_WHITESPACE","\n\n\t",1178],["T_COMMENT","\/\/ --------------------------------------------------------------------\n",1180],["T_WHITESPACE","\n\t",1181],["T_DOC_COMMENT","\/**\n\t * Prep Filename\n\t *\n\t * Prevents possible script execution from Apache's handling\n\t * of files' multiple extensions.\n\t *\n\t * @link\thttp:\/\/httpd.apache.org\/docs\/1.3\/mod\/mod_mime.html#multipleext\n\t *\n\t * @param\tstring\t$filename\n\t * @return\tstring\n\t *\/",1182],["T_WHITESPACE","\n\t",1192],["T_PROTECTED","protected",1193],["T_WHITESPACE"," ",1193],["T_FUNCTION","function",1193],["T_WHITESPACE"," ",1193],["T_STRING","_prep_filename",1193],"(",["T_VARIABLE","$filename",1193],")",["T_WHITESPACE","\n\t",1193],"{",["T_WHITESPACE","\n\t\t",1194],["T_IF","if",1195],["T_WHITESPACE"," ",1195],"(",["T_VARIABLE","$this",1195],["T_OBJECT_OPERATOR","->",1195],["T_STRING","mod_mime_fix",1195],["T_WHITESPACE"," ",1195],["T_IS_IDENTICAL","===",1195],["T_WHITESPACE"," ",1195],["T_STRING","FALSE",1195],["T_WHITESPACE"," ",1195],["T_LOGICAL_OR","OR",1195],["T_WHITESPACE"," ",1195],["T_VARIABLE","$this",1195],["T_OBJECT_OPERATOR","->",1195],["T_STRING","allowed_types",1195],["T_WHITESPACE"," ",1195],["T_IS_IDENTICAL","===",1195],["T_WHITESPACE"," ",1195],["T_CONSTANT_ENCAPSED_STRING","'*'",1195],["T_WHITESPACE"," ",1195],["T_LOGICAL_OR","OR",1195],["T_WHITESPACE"," ",1195],"(",["T_VARIABLE","$ext_pos",1195],["T_WHITESPACE"," ",1195],"=",["T_WHITESPACE"," ",1195],["T_STRING","strrpos",1195],"(",["T_VARIABLE","$filename",1195],",",["T_WHITESPACE"," ",1195],["T_CONSTANT_ENCAPSED_STRING","'.'",1195],")",")",["T_WHITESPACE"," ",1195],["T_IS_IDENTICAL","===",1195],["T_WHITESPACE"," ",1195],["T_STRING","FALSE",1195],")",["T_WHITESPACE","\n\t\t",1195],"{",["T_WHITESPACE","\n\t\t\t",1196],["T_RETURN","return",1197],["T_WHITESPACE"," ",1197],["T_VARIABLE","$filename",1197],";",["T_WHITESPACE","\n\t\t",1197],"}",["T_WHITESPACE","\n\n\t\t",1198],["T_VARIABLE","$ext",1200],["T_WHITESPACE"," ",1200],"=",["T_WHITESPACE"," ",1200],["T_STRING","substr",1200],"(",["T_VARIABLE","$filename",1200],",",["T_WHITESPACE"," ",1200],["T_VARIABLE","$ext_pos",1200],")",";",["T_WHITESPACE","\n\t\t",1200],["T_VARIABLE","$filename",1201],["T_WHITESPACE"," ",1201],"=",["T_WHITESPACE"," ",1201],["T_STRING","substr",1201],"(",["T_VARIABLE","$filename",1201],",",["T_WHITESPACE"," ",1201],["T_LNUMBER","0",1201],",",["T_WHITESPACE"," ",1201],["T_VARIABLE","$ext_pos",1201],")",";",["T_WHITESPACE","\n\t\t",1201],["T_RETURN","return",1202],["T_WHITESPACE"," ",1202],["T_STRING","str_replace",1202],"(",["T_CONSTANT_ENCAPSED_STRING","'.'",1202],",",["T_WHITESPACE"," ",1202],["T_CONSTANT_ENCAPSED_STRING","'_'",1202],",",["T_WHITESPACE"," ",1202],["T_VARIABLE","$filename",1202],")",".",["T_VARIABLE","$ext",1202],";",["T_WHITESPACE","\n\t",1202],"}",["T_WHITESPACE","\n\n\t",1203],["T_COMMENT","\/\/ --------------------------------------------------------------------\n",1205],["T_WHITESPACE","\n\t",1206],["T_DOC_COMMENT","\/**\n\t * File MIME type\n\t *\n\t * Detects the (actual) MIME type of the uploaded file, if possible.\n\t * The input array is expected to be $_FILES[$field]\n\t *\n\t * @param\tarray\t$file\n\t * @return\tvoid\n\t *\/",1207],["T_WHITESPACE","\n\t",1215],["T_PROTECTED","protected",1216],["T_WHITESPACE"," ",1216],["T_FUNCTION","function",1216],["T_WHITESPACE"," ",1216],["T_STRING","_file_mime_type",1216],"(",["T_VARIABLE","$file",1216],")",["T_WHITESPACE","\n\t",1216],"{",["T_WHITESPACE","\n\t\t",1217],["T_COMMENT","\/\/ We'll need this to validate the MIME info string (e.g. text\/plain; charset=us-ascii)\n",1218],["T_WHITESPACE","\t\t",1219],["T_VARIABLE","$regexp",1219],["T_WHITESPACE"," ",1219],"=",["T_WHITESPACE"," ",1219],["T_CONSTANT_ENCAPSED_STRING","'\/^([a-z\\-]+\\\/[a-z0-9\\-\\.\\+]+)(;\\s.+)?$\/'",1219],";",["T_WHITESPACE","\n\n\t\t",1219],["T_DOC_COMMENT","\/**\n\t\t * Fileinfo extension - most reliable method\n\t\t *\n\t\t * Apparently XAMPP, CentOS, cPanel and who knows what\n\t\t * other PHP distribution channels EXPLICITLY DISABLE\n\t\t * ext\/fileinfo, which is otherwise enabled by default\n\t\t * since PHP 5.3 ...\n\t\t *\/",1221],["T_WHITESPACE","\n\t\t",1228],["T_IF","if",1229],["T_WHITESPACE"," ",1229],"(",["T_STRING","function_exists",1229],"(",["T_CONSTANT_ENCAPSED_STRING","'finfo_file'",1229],")",")",["T_WHITESPACE","\n\t\t",1229],"{",["T_WHITESPACE","\n\t\t\t",1230],["T_VARIABLE","$finfo",1231],["T_WHITESPACE"," ",1231],"=",["T_WHITESPACE"," ",1231],"@",["T_STRING","finfo_open",1231],"(",["T_STRING","FILEINFO_MIME",1231],")",";",["T_WHITESPACE","\n\t\t\t",1231],["T_IF","if",1232],["T_WHITESPACE"," ",1232],"(",["T_STRING","is_resource",1232],"(",["T_VARIABLE","$finfo",1232],")",")",["T_WHITESPACE"," ",1232],["T_COMMENT","\/\/ It is possible that a FALSE value is returned, if there is no magic MIME database file found on the system\n",1232],["T_WHITESPACE","\t\t\t",1233],"{",["T_WHITESPACE","\n\t\t\t\t",1233],["T_VARIABLE","$mime",1234],["T_WHITESPACE"," ",1234],"=",["T_WHITESPACE"," ",1234],"@",["T_STRING","finfo_file",1234],"(",["T_VARIABLE","$finfo",1234],",",["T_WHITESPACE"," ",1234],["T_VARIABLE","$file",1234],"[",["T_CONSTANT_ENCAPSED_STRING","'tmp_name'",1234],"]",")",";",["T_WHITESPACE","\n\t\t\t\t",1234],["T_STRING","finfo_close",1235],"(",["T_VARIABLE","$finfo",1235],")",";",["T_WHITESPACE","\n\n\t\t\t\t",1235],["T_COMMENT","\/* According to the comments section of the PHP manual page,\n\t\t\t\t * it is possible that this function returns an empty string\n\t\t\t\t * for some files (e.g. if they don't exist in the magic MIME database)\n\t\t\t\t *\/",1237],["T_WHITESPACE","\n\t\t\t\t",1240],["T_IF","if",1241],["T_WHITESPACE"," ",1241],"(",["T_STRING","is_string",1241],"(",["T_VARIABLE","$mime",1241],")",["T_WHITESPACE"," ",1241],["T_BOOLEAN_AND","&&",1241],["T_WHITESPACE"," ",1241],["T_STRING","preg_match",1241],"(",["T_VARIABLE","$regexp",1241],",",["T_WHITESPACE"," ",1241],["T_VARIABLE","$mime",1241],",",["T_WHITESPACE"," ",1241],["T_VARIABLE","$matches",1241],")",")",["T_WHITESPACE","\n\t\t\t\t",1241],"{",["T_WHITESPACE","\n\t\t\t\t\t",1242],["T_VARIABLE","$this",1243],["T_OBJECT_OPERATOR","->",1243],["T_STRING","file_type",1243],["T_WHITESPACE"," ",1243],"=",["T_WHITESPACE"," ",1243],["T_VARIABLE","$matches",1243],"[",["T_LNUMBER","1",1243],"]",";",["T_WHITESPACE","\n\t\t\t\t\t",1243],["T_RETURN","return",1244],";",["T_WHITESPACE","\n\t\t\t\t",1244],"}",["T_WHITESPACE","\n\t\t\t",1245],"}",["T_WHITESPACE","\n\t\t",1246],"}",["T_WHITESPACE","\n\n\t\t",1247],["T_COMMENT","\/* This is an ugly hack, but UNIX-type systems provide a \"native\" way to detect the file type,\n\t\t * which is still more secure than depending on the value of $_FILES[$field]['type'], and as it\n\t\t * was reported in issue #750 (https:\/\/github.com\/EllisLab\/CodeIgniter\/issues\/750) - it's better\n\t\t * than mime_content_type() as well, hence the attempts to try calling the command line with\n\t\t * three different functions.\n\t\t *\n\t\t * Notes:\n\t\t *\t- the DIRECTORY_SEPARATOR comparison ensures that we're not on a Windows system\n\t\t *\t- many system admins would disable the exec(), shell_exec(), popen() and similar functions\n\t\t *\t  due to security concerns, hence the function_usable() checks\n\t\t *\/",1249],["T_WHITESPACE","\n\t\t",1259],["T_IF","if",1260],["T_WHITESPACE"," ",1260],"(",["T_STRING","DIRECTORY_SEPARATOR",1260],["T_WHITESPACE"," ",1260],["T_IS_NOT_IDENTICAL","!==",1260],["T_WHITESPACE"," ",1260],["T_CONSTANT_ENCAPSED_STRING","'\\\\'",1260],")",["T_WHITESPACE","\n\t\t",1260],"{",["T_WHITESPACE","\n\t\t\t",1261],["T_VARIABLE","$cmd",1262],["T_WHITESPACE"," ",1262],"=",["T_WHITESPACE"," ",1262],["T_CONSTANT_ENCAPSED_STRING","'file --brief --mime '",1262],".",["T_STRING","escapeshellarg",1262],"(",["T_VARIABLE","$file",1262],"[",["T_CONSTANT_ENCAPSED_STRING","'tmp_name'",1262],"]",")",".",["T_CONSTANT_ENCAPSED_STRING","' 2>&1'",1262],";",["T_WHITESPACE","\n\n\t\t\t",1262],["T_IF","if",1264],["T_WHITESPACE"," ",1264],"(",["T_STRING","function_usable",1264],"(",["T_CONSTANT_ENCAPSED_STRING","'exec'",1264],")",")",["T_WHITESPACE","\n\t\t\t",1264],"{",["T_WHITESPACE","\n\t\t\t\t",1265],["T_COMMENT","\/* This might look confusing, as $mime is being populated with all of the output when set in the second parameter.\n\t\t\t\t * However, we only need the last line, which is the actual return value of exec(), and as such - it overwrites\n\t\t\t\t * anything that could already be set for $mime previously. This effectively makes the second parameter a dummy\n\t\t\t\t * value, which is only put to allow us to get the return status code.\n\t\t\t\t *\/",1266],["T_WHITESPACE","\n\t\t\t\t",1270],["T_VARIABLE","$mime",1271],["T_WHITESPACE"," ",1271],"=",["T_WHITESPACE"," ",1271],"@",["T_STRING","exec",1271],"(",["T_VARIABLE","$cmd",1271],",",["T_WHITESPACE"," ",1271],["T_VARIABLE","$mime",1271],",",["T_WHITESPACE"," ",1271],["T_VARIABLE","$return_status",1271],")",";",["T_WHITESPACE","\n\t\t\t\t",1271],["T_IF","if",1272],["T_WHITESPACE"," ",1272],"(",["T_VARIABLE","$return_status",1272],["T_WHITESPACE"," ",1272],["T_IS_IDENTICAL","===",1272],["T_WHITESPACE"," ",1272],["T_LNUMBER","0",1272],["T_WHITESPACE"," ",1272],["T_BOOLEAN_AND","&&",1272],["T_WHITESPACE"," ",1272],["T_STRING","is_string",1272],"(",["T_VARIABLE","$mime",1272],")",["T_WHITESPACE"," ",1272],["T_BOOLEAN_AND","&&",1272],["T_WHITESPACE"," ",1272],["T_STRING","preg_match",1272],"(",["T_VARIABLE","$regexp",1272],",",["T_WHITESPACE"," ",1272],["T_VARIABLE","$mime",1272],",",["T_WHITESPACE"," ",1272],["T_VARIABLE","$matches",1272],")",")",["T_WHITESPACE","\n\t\t\t\t",1272],"{",["T_WHITESPACE","\n\t\t\t\t\t",1273],["T_VARIABLE","$this",1274],["T_OBJECT_OPERATOR","->",1274],["T_STRING","file_type",1274],["T_WHITESPACE"," ",1274],"=",["T_WHITESPACE"," ",1274],["T_VARIABLE","$matches",1274],"[",["T_LNUMBER","1",1274],"]",";",["T_WHITESPACE","\n\t\t\t\t\t",1274],["T_RETURN","return",1275],";",["T_WHITESPACE","\n\t\t\t\t",1275],"}",["T_WHITESPACE","\n\t\t\t",1276],"}",["T_WHITESPACE","\n\n\t\t\t",1277],["T_IF","if",1279],["T_WHITESPACE"," ",1279],"(",["T_STRING","function_usable",1279],"(",["T_CONSTANT_ENCAPSED_STRING","'shell_exec'",1279],")",")",["T_WHITESPACE","\n\t\t\t",1279],"{",["T_WHITESPACE","\n\t\t\t\t",1280],["T_VARIABLE","$mime",1281],["T_WHITESPACE"," ",1281],"=",["T_WHITESPACE"," ",1281],"@",["T_STRING","shell_exec",1281],"(",["T_VARIABLE","$cmd",1281],")",";",["T_WHITESPACE","\n\t\t\t\t",1281],["T_IF","if",1282],["T_WHITESPACE"," ",1282],"(",["T_STRING","strlen",1282],"(",["T_VARIABLE","$mime",1282],")",["T_WHITESPACE"," ",1282],">",["T_WHITESPACE"," ",1282],["T_LNUMBER","0",1282],")",["T_WHITESPACE","\n\t\t\t\t",1282],"{",["T_WHITESPACE","\n\t\t\t\t\t",1283],["T_VARIABLE","$mime",1284],["T_WHITESPACE"," ",1284],"=",["T_WHITESPACE"," ",1284],["T_STRING","explode",1284],"(",["T_CONSTANT_ENCAPSED_STRING","\"\\n\"",1284],",",["T_WHITESPACE"," ",1284],["T_STRING","trim",1284],"(",["T_VARIABLE","$mime",1284],")",")",";",["T_WHITESPACE","\n\t\t\t\t\t",1284],["T_IF","if",1285],["T_WHITESPACE"," ",1285],"(",["T_STRING","preg_match",1285],"(",["T_VARIABLE","$regexp",1285],",",["T_WHITESPACE"," ",1285],["T_VARIABLE","$mime",1285],"[","(",["T_STRING","count",1285],"(",["T_VARIABLE","$mime",1285],")",["T_WHITESPACE"," ",1285],"-",["T_WHITESPACE"," ",1285],["T_LNUMBER","1",1285],")","]",",",["T_WHITESPACE"," ",1285],["T_VARIABLE","$matches",1285],")",")",["T_WHITESPACE","\n\t\t\t\t\t",1285],"{",["T_WHITESPACE","\n\t\t\t\t\t\t",1286],["T_VARIABLE","$this",1287],["T_OBJECT_OPERATOR","->",1287],["T_STRING","file_type",1287],["T_WHITESPACE"," ",1287],"=",["T_WHITESPACE"," ",1287],["T_VARIABLE","$matches",1287],"[",["T_LNUMBER","1",1287],"]",";",["T_WHITESPACE","\n\t\t\t\t\t\t",1287],["T_RETURN","return",1288],";",["T_WHITESPACE","\n\t\t\t\t\t",1288],"}",["T_WHITESPACE","\n\t\t\t\t",1289],"}",["T_WHITESPACE","\n\t\t\t",1290],"}",["T_WHITESPACE","\n\n\t\t\t",1291],["T_IF","if",1293],["T_WHITESPACE"," ",1293],"(",["T_STRING","function_usable",1293],"(",["T_CONSTANT_ENCAPSED_STRING","'popen'",1293],")",")",["T_WHITESPACE","\n\t\t\t",1293],"{",["T_WHITESPACE","\n\t\t\t\t",1294],["T_VARIABLE","$proc",1295],["T_WHITESPACE"," ",1295],"=",["T_WHITESPACE"," ",1295],"@",["T_STRING","popen",1295],"(",["T_VARIABLE","$cmd",1295],",",["T_WHITESPACE"," ",1295],["T_CONSTANT_ENCAPSED_STRING","'r'",1295],")",";",["T_WHITESPACE","\n\t\t\t\t",1295],["T_IF","if",1296],["T_WHITESPACE"," ",1296],"(",["T_STRING","is_resource",1296],"(",["T_VARIABLE","$proc",1296],")",")",["T_WHITESPACE","\n\t\t\t\t",1296],"{",["T_WHITESPACE","\n\t\t\t\t\t",1297],["T_VARIABLE","$mime",1298],["T_WHITESPACE"," ",1298],"=",["T_WHITESPACE"," ",1298],"@",["T_STRING","fread",1298],"(",["T_VARIABLE","$proc",1298],",",["T_WHITESPACE"," ",1298],["T_LNUMBER","512",1298],")",";",["T_WHITESPACE","\n\t\t\t\t\t",1298],"@",["T_STRING","pclose",1299],"(",["T_VARIABLE","$proc",1299],")",";",["T_WHITESPACE","\n\t\t\t\t\t",1299],["T_IF","if",1300],["T_WHITESPACE"," ",1300],"(",["T_VARIABLE","$mime",1300],["T_WHITESPACE"," ",1300],["T_IS_NOT_IDENTICAL","!==",1300],["T_WHITESPACE"," ",1300],["T_STRING","FALSE",1300],")",["T_WHITESPACE","\n\t\t\t\t\t",1300],"{",["T_WHITESPACE","\n\t\t\t\t\t\t",1301],["T_VARIABLE","$mime",1302],["T_WHITESPACE"," ",1302],"=",["T_WHITESPACE"," ",1302],["T_STRING","explode",1302],"(",["T_CONSTANT_ENCAPSED_STRING","\"\\n\"",1302],",",["T_WHITESPACE"," ",1302],["T_STRING","trim",1302],"(",["T_VARIABLE","$mime",1302],")",")",";",["T_WHITESPACE","\n\t\t\t\t\t\t",1302],["T_IF","if",1303],["T_WHITESPACE"," ",1303],"(",["T_STRING","preg_match",1303],"(",["T_VARIABLE","$regexp",1303],",",["T_WHITESPACE"," ",1303],["T_VARIABLE","$mime",1303],"[","(",["T_STRING","count",1303],"(",["T_VARIABLE","$mime",1303],")",["T_WHITESPACE"," ",1303],"-",["T_WHITESPACE"," ",1303],["T_LNUMBER","1",1303],")","]",",",["T_WHITESPACE"," ",1303],["T_VARIABLE","$matches",1303],")",")",["T_WHITESPACE","\n\t\t\t\t\t\t",1303],"{",["T_WHITESPACE","\n\t\t\t\t\t\t\t",1304],["T_VARIABLE","$this",1305],["T_OBJECT_OPERATOR","->",1305],["T_STRING","file_type",1305],["T_WHITESPACE"," ",1305],"=",["T_WHITESPACE"," ",1305],["T_VARIABLE","$matches",1305],"[",["T_LNUMBER","1",1305],"]",";",["T_WHITESPACE","\n\t\t\t\t\t\t\t",1305],["T_RETURN","return",1306],";",["T_WHITESPACE","\n\t\t\t\t\t\t",1306],"}",["T_WHITESPACE","\n\t\t\t\t\t",1307],"}",["T_WHITESPACE","\n\t\t\t\t",1308],"}",["T_WHITESPACE","\n\t\t\t",1309],"}",["T_WHITESPACE","\n\t\t",1310],"}",["T_WHITESPACE","\n\n\t\t",1311],["T_COMMENT","\/\/ Fall back to the deprecated mime_content_type(), if available (still better than $_FILES[$field]['type'])\n",1313],["T_WHITESPACE","\t\t",1314],["T_IF","if",1314],["T_WHITESPACE"," ",1314],"(",["T_STRING","function_exists",1314],"(",["T_CONSTANT_ENCAPSED_STRING","'mime_content_type'",1314],")",")",["T_WHITESPACE","\n\t\t",1314],"{",["T_WHITESPACE","\n\t\t\t",1315],["T_VARIABLE","$this",1316],["T_OBJECT_OPERATOR","->",1316],["T_STRING","file_type",1316],["T_WHITESPACE"," ",1316],"=",["T_WHITESPACE"," ",1316],"@",["T_STRING","mime_content_type",1316],"(",["T_VARIABLE","$file",1316],"[",["T_CONSTANT_ENCAPSED_STRING","'tmp_name'",1316],"]",")",";",["T_WHITESPACE","\n\t\t\t",1316],["T_IF","if",1317],["T_WHITESPACE"," ",1317],"(",["T_STRING","strlen",1317],"(",["T_VARIABLE","$this",1317],["T_OBJECT_OPERATOR","->",1317],["T_STRING","file_type",1317],")",["T_WHITESPACE"," ",1317],">",["T_WHITESPACE"," ",1317],["T_LNUMBER","0",1317],")",["T_WHITESPACE"," ",1317],["T_COMMENT","\/\/ It's possible that mime_content_type() returns FALSE or an empty string\n",1317],["T_WHITESPACE","\t\t\t",1318],"{",["T_WHITESPACE","\n\t\t\t\t",1318],["T_RETURN","return",1319],";",["T_WHITESPACE","\n\t\t\t",1319],"}",["T_WHITESPACE","\n\t\t",1320],"}",["T_WHITESPACE","\n\n\t\t",1321],["T_VARIABLE","$this",1323],["T_OBJECT_OPERATOR","->",1323],["T_STRING","file_type",1323],["T_WHITESPACE"," ",1323],"=",["T_WHITESPACE"," ",1323],["T_VARIABLE","$file",1323],"[",["T_CONSTANT_ENCAPSED_STRING","'type'",1323],"]",";",["T_WHITESPACE","\n\t",1323],"}",["T_WHITESPACE","\n\n",1324],"}",["T_WHITESPACE","\n",1326]]
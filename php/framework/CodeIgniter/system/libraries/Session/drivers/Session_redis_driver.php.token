[["T_OPEN_TAG","<?php\n",1],["T_DOC_COMMENT","\/**\n * CodeIgniter\n *\n * An open source application development framework for PHP\n *\n * This content is released under the MIT License (MIT)\n *\n * Copyright (c) 2014 - 2017, British Columbia Institute of Technology\n *\n * Permission is hereby granted, free of charge, to any person obtaining a copy\n * of this software and associated documentation files (the \"Software\"), to deal\n * in the Software without restriction, including without limitation the rights\n * to use, copy, modify, merge, publish, distribute, sublicense, and\/or sell\n * copies of the Software, and to permit persons to whom the Software is\n * furnished to do so, subject to the following conditions:\n *\n * The above copyright notice and this permission notice shall be included in\n * all copies or substantial portions of the Software.\n *\n * THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN\n * THE SOFTWARE.\n *\n * @package\tCodeIgniter\n * @author\tEllisLab Dev Team\n * @copyright\tCopyright (c) 2008 - 2014, EllisLab, Inc. (https:\/\/ellislab.com\/)\n * @copyright\tCopyright (c) 2014 - 2017, British Columbia Institute of Technology (http:\/\/bcit.ca\/)\n * @license\thttp:\/\/opensource.org\/licenses\/MIT\tMIT License\n * @link\thttps:\/\/codeigniter.com\n * @since\tVersion 3.0.0\n * @filesource\n *\/",2],["T_WHITESPACE","\n",37],["T_STRING","defined",38],"(",["T_CONSTANT_ENCAPSED_STRING","'BASEPATH'",38],")",["T_WHITESPACE"," ",38],["T_LOGICAL_OR","OR",38],["T_WHITESPACE"," ",38],["T_EXIT","exit",38],"(",["T_CONSTANT_ENCAPSED_STRING","'No direct script access allowed'",38],")",";",["T_WHITESPACE","\n\n",38],["T_DOC_COMMENT","\/**\n * CodeIgniter Session Redis Driver\n *\n * @package\tCodeIgniter\n * @subpackage\tLibraries\n * @category\tSessions\n * @author\tAndrey Andreev\n * @link\thttps:\/\/codeigniter.com\/user_guide\/libraries\/sessions.html\n *\/",40],["T_WHITESPACE","\n",48],["T_CLASS","class",49],["T_WHITESPACE"," ",49],["T_STRING","CI_Session_redis_driver",49],["T_WHITESPACE"," ",49],["T_EXTENDS","extends",49],["T_WHITESPACE"," ",49],["T_STRING","CI_Session_driver",49],["T_WHITESPACE"," ",49],["T_IMPLEMENTS","implements",49],["T_WHITESPACE"," ",49],["T_STRING","SessionHandlerInterface",49],["T_WHITESPACE"," ",49],"{",["T_WHITESPACE","\n\n\t",49],["T_DOC_COMMENT","\/**\n\t * phpRedis instance\n\t *\n\t * @var\tresource\n\t *\/",51],["T_WHITESPACE","\n\t",55],["T_PROTECTED","protected",56],["T_WHITESPACE"," ",56],["T_VARIABLE","$_redis",56],";",["T_WHITESPACE","\n\n\t",56],["T_DOC_COMMENT","\/**\n\t * Key prefix\n\t *\n\t * @var\tstring\n\t *\/",58],["T_WHITESPACE","\n\t",62],["T_PROTECTED","protected",63],["T_WHITESPACE"," ",63],["T_VARIABLE","$_key_prefix",63],["T_WHITESPACE"," ",63],"=",["T_WHITESPACE"," ",63],["T_CONSTANT_ENCAPSED_STRING","'ci_session:'",63],";",["T_WHITESPACE","\n\n\t",63],["T_DOC_COMMENT","\/**\n\t * Lock key\n\t *\n\t * @var\tstring\n\t *\/",65],["T_WHITESPACE","\n\t",69],["T_PROTECTED","protected",70],["T_WHITESPACE"," ",70],["T_VARIABLE","$_lock_key",70],";",["T_WHITESPACE","\n\n\t",70],["T_DOC_COMMENT","\/**\n\t * Key exists flag\n\t *\n\t * @var bool\n\t *\/",72],["T_WHITESPACE","\n\t",76],["T_PROTECTED","protected",77],["T_WHITESPACE"," ",77],["T_VARIABLE","$_key_exists",77],["T_WHITESPACE"," ",77],"=",["T_WHITESPACE"," ",77],["T_STRING","FALSE",77],";",["T_WHITESPACE","\n\n\t",77],["T_COMMENT","\/\/ ------------------------------------------------------------------------\n",79],["T_WHITESPACE","\n\t",80],["T_DOC_COMMENT","\/**\n\t * Class constructor\n\t *\n\t * @param\tarray\t$params\tConfiguration parameters\n\t * @return\tvoid\n\t *\/",81],["T_WHITESPACE","\n\t",86],["T_PUBLIC","public",87],["T_WHITESPACE"," ",87],["T_FUNCTION","function",87],["T_WHITESPACE"," ",87],["T_STRING","__construct",87],"(","&",["T_VARIABLE","$params",87],")",["T_WHITESPACE","\n\t",87],"{",["T_WHITESPACE","\n\t\t",88],["T_STRING","parent",89],["T_DOUBLE_COLON","::",89],["T_STRING","__construct",89],"(",["T_VARIABLE","$params",89],")",";",["T_WHITESPACE","\n\n\t\t",89],["T_IF","if",91],["T_WHITESPACE"," ",91],"(",["T_EMPTY","empty",91],"(",["T_VARIABLE","$this",91],["T_OBJECT_OPERATOR","->",91],["T_STRING","_config",91],"[",["T_CONSTANT_ENCAPSED_STRING","'save_path'",91],"]",")",")",["T_WHITESPACE","\n\t\t",91],"{",["T_WHITESPACE","\n\t\t\t",92],["T_STRING","log_message",93],"(",["T_CONSTANT_ENCAPSED_STRING","'error'",93],",",["T_WHITESPACE"," ",93],["T_CONSTANT_ENCAPSED_STRING","'Session: No Redis save path configured.'",93],")",";",["T_WHITESPACE","\n\t\t",93],"}",["T_WHITESPACE","\n\t\t",94],["T_ELSEIF","elseif",95],["T_WHITESPACE"," ",95],"(",["T_STRING","preg_match",95],"(",["T_CONSTANT_ENCAPSED_STRING","'#^unix:\/\/([^\\?]+)(?<options>\\?.+)?$#'",95],",",["T_WHITESPACE"," ",95],["T_VARIABLE","$this",95],["T_OBJECT_OPERATOR","->",95],["T_STRING","_config",95],"[",["T_CONSTANT_ENCAPSED_STRING","'save_path'",95],"]",",",["T_WHITESPACE"," ",95],["T_VARIABLE","$matches",95],")",")",["T_WHITESPACE","\n\t\t",95],"{",["T_WHITESPACE","\n\t\t\t",96],["T_VARIABLE","$save_path",97],["T_WHITESPACE"," ",97],"=",["T_WHITESPACE"," ",97],["T_ARRAY","array",97],"(",["T_CONSTANT_ENCAPSED_STRING","'path'",97],["T_WHITESPACE"," ",97],["T_DOUBLE_ARROW","=>",97],["T_WHITESPACE"," ",97],["T_VARIABLE","$matches",97],"[",["T_LNUMBER","1",97],"]",")",";",["T_WHITESPACE","\n\t\t",97],"}",["T_WHITESPACE","\n\t\t",98],["T_ELSEIF","elseif",99],["T_WHITESPACE"," ",99],"(",["T_STRING","preg_match",99],"(",["T_CONSTANT_ENCAPSED_STRING","'#(?:tcp:\/\/)?([^:?]+)(?:\\:(\\d+))?(?<options>\\?.+)?#'",99],",",["T_WHITESPACE"," ",99],["T_VARIABLE","$this",99],["T_OBJECT_OPERATOR","->",99],["T_STRING","_config",99],"[",["T_CONSTANT_ENCAPSED_STRING","'save_path'",99],"]",",",["T_WHITESPACE"," ",99],["T_VARIABLE","$matches",99],")",")",["T_WHITESPACE","\n\t\t",99],"{",["T_WHITESPACE","\n\t\t\t",100],["T_VARIABLE","$save_path",101],["T_WHITESPACE"," ",101],"=",["T_WHITESPACE"," ",101],["T_ARRAY","array",101],"(",["T_WHITESPACE","\n\t\t\t\t",101],["T_CONSTANT_ENCAPSED_STRING","'host'",102],["T_WHITESPACE","    ",102],["T_DOUBLE_ARROW","=>",102],["T_WHITESPACE"," ",102],["T_VARIABLE","$matches",102],"[",["T_LNUMBER","1",102],"]",",",["T_WHITESPACE","\n\t\t\t\t",102],["T_CONSTANT_ENCAPSED_STRING","'port'",103],["T_WHITESPACE","    ",103],["T_DOUBLE_ARROW","=>",103],["T_WHITESPACE"," ",103],["T_EMPTY","empty",103],"(",["T_VARIABLE","$matches",103],"[",["T_LNUMBER","2",103],"]",")",["T_WHITESPACE"," ",103],"?",["T_WHITESPACE"," ",103],["T_STRING","NULL",103],["T_WHITESPACE"," ",103],":",["T_WHITESPACE"," ",103],["T_VARIABLE","$matches",103],"[",["T_LNUMBER","2",103],"]",",",["T_WHITESPACE","\n\t\t\t\t",103],["T_CONSTANT_ENCAPSED_STRING","'timeout'",104],["T_WHITESPACE"," ",104],["T_DOUBLE_ARROW","=>",104],["T_WHITESPACE"," ",104],["T_STRING","NULL",104],["T_WHITESPACE"," ",104],["T_COMMENT","\/\/ We always pass this to Redis::connect(), so it needs to exist\n",104],["T_WHITESPACE","\t\t\t",105],")",";",["T_WHITESPACE","\n\t\t",105],"}",["T_WHITESPACE","\n\t\t",106],["T_ELSE","else",107],["T_WHITESPACE","\n\t\t",107],"{",["T_WHITESPACE","\n\t\t\t",108],["T_STRING","log_message",109],"(",["T_CONSTANT_ENCAPSED_STRING","'error'",109],",",["T_WHITESPACE"," ",109],["T_CONSTANT_ENCAPSED_STRING","'Session: Invalid Redis save path format: '",109],".",["T_VARIABLE","$this",109],["T_OBJECT_OPERATOR","->",109],["T_STRING","_config",109],"[",["T_CONSTANT_ENCAPSED_STRING","'save_path'",109],"]",")",";",["T_WHITESPACE","\n\t\t",109],"}",["T_WHITESPACE","\n\n\t\t",110],["T_IF","if",112],["T_WHITESPACE"," ",112],"(",["T_ISSET","isset",112],"(",["T_VARIABLE","$save_path",112],")",")",["T_WHITESPACE","\n\t\t",112],"{",["T_WHITESPACE","\n\t\t\t",113],["T_IF","if",114],["T_WHITESPACE"," ",114],"(",["T_ISSET","isset",114],"(",["T_VARIABLE","$matches",114],"[",["T_CONSTANT_ENCAPSED_STRING","'options'",114],"]",")",")",["T_WHITESPACE","\n\t\t\t",114],"{",["T_WHITESPACE","\n\t\t\t\t",115],["T_VARIABLE","$save_path",116],"[",["T_CONSTANT_ENCAPSED_STRING","'password'",116],"]",["T_WHITESPACE"," ",116],"=",["T_WHITESPACE"," ",116],["T_STRING","preg_match",116],"(",["T_CONSTANT_ENCAPSED_STRING","'#auth=([^\\s&]+)#'",116],",",["T_WHITESPACE"," ",116],["T_VARIABLE","$matches",116],"[",["T_CONSTANT_ENCAPSED_STRING","'options'",116],"]",",",["T_WHITESPACE"," ",116],["T_VARIABLE","$match",116],")",["T_WHITESPACE"," ",116],"?",["T_WHITESPACE"," ",116],["T_VARIABLE","$match",116],"[",["T_LNUMBER","1",116],"]",["T_WHITESPACE"," ",116],":",["T_WHITESPACE"," ",116],["T_STRING","NULL",116],";",["T_WHITESPACE","\n\t\t\t\t",116],["T_VARIABLE","$save_path",117],"[",["T_CONSTANT_ENCAPSED_STRING","'database'",117],"]",["T_WHITESPACE"," ",117],"=",["T_WHITESPACE"," ",117],["T_STRING","preg_match",117],"(",["T_CONSTANT_ENCAPSED_STRING","'#database=(\\d+)#'",117],",",["T_WHITESPACE"," ",117],["T_VARIABLE","$matches",117],"[",["T_CONSTANT_ENCAPSED_STRING","'options'",117],"]",",",["T_WHITESPACE"," ",117],["T_VARIABLE","$match",117],")",["T_WHITESPACE"," ",117],"?",["T_WHITESPACE"," ",117],["T_INT_CAST","(int)",117],["T_WHITESPACE"," ",117],["T_VARIABLE","$match",117],"[",["T_LNUMBER","1",117],"]",["T_WHITESPACE"," ",117],":",["T_WHITESPACE"," ",117],["T_STRING","NULL",117],";",["T_WHITESPACE","\n\t\t\t\t",117],["T_VARIABLE","$save_path",118],"[",["T_CONSTANT_ENCAPSED_STRING","'timeout'",118],"]",["T_WHITESPACE","  ",118],"=",["T_WHITESPACE"," ",118],["T_STRING","preg_match",118],"(",["T_CONSTANT_ENCAPSED_STRING","'#timeout=(\\d+\\.\\d+)#'",118],",",["T_WHITESPACE"," ",118],["T_VARIABLE","$matches",118],"[",["T_CONSTANT_ENCAPSED_STRING","'options'",118],"]",",",["T_WHITESPACE"," ",118],["T_VARIABLE","$match",118],")",["T_WHITESPACE"," ",118],"?",["T_WHITESPACE"," ",118],["T_DOUBLE_CAST","(float)",118],["T_WHITESPACE"," ",118],["T_VARIABLE","$match",118],"[",["T_LNUMBER","1",118],"]",["T_WHITESPACE"," ",118],":",["T_WHITESPACE"," ",118],["T_STRING","NULL",118],";",["T_WHITESPACE","\n\n\t\t\t\t",118],["T_STRING","preg_match",120],"(",["T_CONSTANT_ENCAPSED_STRING","'#prefix=([^\\s&]+)#'",120],",",["T_WHITESPACE"," ",120],["T_VARIABLE","$matches",120],"[",["T_CONSTANT_ENCAPSED_STRING","'options'",120],"]",",",["T_WHITESPACE"," ",120],["T_VARIABLE","$match",120],")",["T_WHITESPACE"," ",120],["T_BOOLEAN_AND","&&",120],["T_WHITESPACE"," ",120],["T_VARIABLE","$this",120],["T_OBJECT_OPERATOR","->",120],["T_STRING","_key_prefix",120],["T_WHITESPACE"," ",120],"=",["T_WHITESPACE"," ",120],["T_VARIABLE","$match",120],"[",["T_LNUMBER","1",120],"]",";",["T_WHITESPACE","\n\t\t\t",120],"}",["T_WHITESPACE","\n\n\t\t\t",121],["T_VARIABLE","$this",123],["T_OBJECT_OPERATOR","->",123],["T_STRING","_config",123],"[",["T_CONSTANT_ENCAPSED_STRING","'save_path'",123],"]",["T_WHITESPACE"," ",123],"=",["T_WHITESPACE"," ",123],["T_VARIABLE","$save_path",123],";",["T_WHITESPACE","\n\n\t\t\t",123],["T_IF","if",125],["T_WHITESPACE"," ",125],"(",["T_VARIABLE","$this",125],["T_OBJECT_OPERATOR","->",125],["T_STRING","_config",125],"[",["T_CONSTANT_ENCAPSED_STRING","'match_ip'",125],"]",["T_WHITESPACE"," ",125],["T_IS_IDENTICAL","===",125],["T_WHITESPACE"," ",125],["T_STRING","TRUE",125],")",["T_WHITESPACE","\n\t\t\t",125],"{",["T_WHITESPACE","\n\t\t\t\t",126],["T_VARIABLE","$this",127],["T_OBJECT_OPERATOR","->",127],["T_STRING","_key_prefix",127],["T_WHITESPACE"," ",127],["T_CONCAT_EQUAL",".=",127],["T_WHITESPACE"," ",127],["T_VARIABLE","$_SERVER",127],"[",["T_CONSTANT_ENCAPSED_STRING","'REMOTE_ADDR'",127],"]",".",["T_CONSTANT_ENCAPSED_STRING","':'",127],";",["T_WHITESPACE","\n\t\t\t",127],"}",["T_WHITESPACE","\n\t\t",128],"}",["T_WHITESPACE","\n\t",129],"}",["T_WHITESPACE","\n\n\t",130],["T_COMMENT","\/\/ ------------------------------------------------------------------------\n",132],["T_WHITESPACE","\n\t",133],["T_DOC_COMMENT","\/**\n\t * Open\n\t *\n\t * Sanitizes save_path and initializes connection.\n\t *\n\t * @param\tstring\t$save_path\tServer path\n\t * @param\tstring\t$name\t\tSession cookie name, unused\n\t * @return\tbool\n\t *\/",134],["T_WHITESPACE","\n\t",142],["T_PUBLIC","public",143],["T_WHITESPACE"," ",143],["T_FUNCTION","function",143],["T_WHITESPACE"," ",143],["T_STRING","open",143],"(",["T_VARIABLE","$save_path",143],",",["T_WHITESPACE"," ",143],["T_VARIABLE","$name",143],")",["T_WHITESPACE","\n\t",143],"{",["T_WHITESPACE","\n\t\t",144],["T_IF","if",145],["T_WHITESPACE"," ",145],"(",["T_EMPTY","empty",145],"(",["T_VARIABLE","$this",145],["T_OBJECT_OPERATOR","->",145],["T_STRING","_config",145],"[",["T_CONSTANT_ENCAPSED_STRING","'save_path'",145],"]",")",")",["T_WHITESPACE","\n\t\t",145],"{",["T_WHITESPACE","\n\t\t\t",146],["T_RETURN","return",147],["T_WHITESPACE"," ",147],["T_VARIABLE","$this",147],["T_OBJECT_OPERATOR","->",147],["T_STRING","_fail",147],"(",")",";",["T_WHITESPACE","\n\t\t",147],"}",["T_WHITESPACE","\n\n\t\t",148],["T_VARIABLE","$redis",150],["T_WHITESPACE"," ",150],"=",["T_WHITESPACE"," ",150],["T_NEW","new",150],["T_WHITESPACE"," ",150],["T_STRING","Redis",150],"(",")",";",["T_WHITESPACE","\n\t\t",150],["T_VARIABLE","$connected",151],["T_WHITESPACE"," ",151],"=",["T_WHITESPACE"," ",151],["T_ISSET","isset",151],"(",["T_VARIABLE","$this",151],["T_OBJECT_OPERATOR","->",151],["T_STRING","_config",151],"[",["T_CONSTANT_ENCAPSED_STRING","'save_path'",151],"]","[",["T_CONSTANT_ENCAPSED_STRING","'path'",151],"]",")",["T_WHITESPACE","\n\t\t\t",151],"?",["T_WHITESPACE"," ",152],["T_VARIABLE","$redis",152],["T_OBJECT_OPERATOR","->",152],["T_STRING","connect",152],"(",["T_VARIABLE","$this",152],["T_OBJECT_OPERATOR","->",152],["T_STRING","_config",152],"[",["T_CONSTANT_ENCAPSED_STRING","'save_path'",152],"]","[",["T_CONSTANT_ENCAPSED_STRING","'path'",152],"]",")",["T_WHITESPACE","\n\t\t\t",152],":",["T_WHITESPACE"," ",153],["T_VARIABLE","$redis",153],["T_OBJECT_OPERATOR","->",153],["T_STRING","connect",153],"(",["T_WHITESPACE","\n\t\t\t\t",153],["T_VARIABLE","$this",154],["T_OBJECT_OPERATOR","->",154],["T_STRING","_config",154],"[",["T_CONSTANT_ENCAPSED_STRING","'save_path'",154],"]","[",["T_CONSTANT_ENCAPSED_STRING","'host'",154],"]",",",["T_WHITESPACE","\n\t\t\t\t",154],["T_VARIABLE","$this",155],["T_OBJECT_OPERATOR","->",155],["T_STRING","_config",155],"[",["T_CONSTANT_ENCAPSED_STRING","'save_path'",155],"]","[",["T_CONSTANT_ENCAPSED_STRING","'port'",155],"]",",",["T_WHITESPACE","\n\t\t\t\t",155],["T_VARIABLE","$this",156],["T_OBJECT_OPERATOR","->",156],["T_STRING","_config",156],"[",["T_CONSTANT_ENCAPSED_STRING","'save_path'",156],"]","[",["T_CONSTANT_ENCAPSED_STRING","'timeout'",156],"]",["T_WHITESPACE","\n\t\t\t",156],")",";",["T_WHITESPACE","\n\n\t\t",157],["T_IF","if",159],["T_WHITESPACE"," ",159],"(",["T_VARIABLE","$connected",159],")",["T_WHITESPACE","\n\t\t",159],"{",["T_WHITESPACE","\n\t\t\t",160],["T_IF","if",161],["T_WHITESPACE"," ",161],"(",["T_ISSET","isset",161],"(",["T_VARIABLE","$this",161],["T_OBJECT_OPERATOR","->",161],["T_STRING","_config",161],"[",["T_CONSTANT_ENCAPSED_STRING","'save_path'",161],"]","[",["T_CONSTANT_ENCAPSED_STRING","'password'",161],"]",")",["T_WHITESPACE"," ",161],["T_BOOLEAN_AND","&&",161],["T_WHITESPACE"," ",161],"!",["T_WHITESPACE"," ",161],["T_VARIABLE","$redis",161],["T_OBJECT_OPERATOR","->",161],["T_STRING","auth",161],"(",["T_VARIABLE","$this",161],["T_OBJECT_OPERATOR","->",161],["T_STRING","_config",161],"[",["T_CONSTANT_ENCAPSED_STRING","'save_path'",161],"]","[",["T_CONSTANT_ENCAPSED_STRING","'password'",161],"]",")",")",["T_WHITESPACE","\n\t\t\t",161],"{",["T_WHITESPACE","\n\t\t\t\t",162],["T_STRING","log_message",163],"(",["T_CONSTANT_ENCAPSED_STRING","'error'",163],",",["T_WHITESPACE"," ",163],["T_CONSTANT_ENCAPSED_STRING","'Session: Unable to authenticate to Redis instance.'",163],")",";",["T_WHITESPACE","\n\t\t\t",163],"}",["T_WHITESPACE","\n\t\t\t",164],["T_ELSEIF","elseif",165],["T_WHITESPACE"," ",165],"(",["T_ISSET","isset",165],"(",["T_VARIABLE","$this",165],["T_OBJECT_OPERATOR","->",165],["T_STRING","_config",165],"[",["T_CONSTANT_ENCAPSED_STRING","'save_path'",165],"]","[",["T_CONSTANT_ENCAPSED_STRING","'database'",165],"]",")",["T_WHITESPACE"," ",165],["T_BOOLEAN_AND","&&",165],["T_WHITESPACE"," ",165],"!",["T_WHITESPACE"," ",165],["T_VARIABLE","$redis",165],["T_OBJECT_OPERATOR","->",165],["T_STRING","select",165],"(",["T_VARIABLE","$this",165],["T_OBJECT_OPERATOR","->",165],["T_STRING","_config",165],"[",["T_CONSTANT_ENCAPSED_STRING","'save_path'",165],"]","[",["T_CONSTANT_ENCAPSED_STRING","'database'",165],"]",")",")",["T_WHITESPACE","\n\t\t\t",165],"{",["T_WHITESPACE","\n\t\t\t\t",166],["T_STRING","log_message",167],"(",["T_CONSTANT_ENCAPSED_STRING","'error'",167],",",["T_WHITESPACE"," ",167],["T_CONSTANT_ENCAPSED_STRING","'Session: Unable to select Redis database with index '",167],".",["T_VARIABLE","$this",167],["T_OBJECT_OPERATOR","->",167],["T_STRING","_config",167],"[",["T_CONSTANT_ENCAPSED_STRING","'save_path'",167],"]","[",["T_CONSTANT_ENCAPSED_STRING","'database'",167],"]",")",";",["T_WHITESPACE","\n\t\t\t",167],"}",["T_WHITESPACE","\n\t\t\t",168],["T_ELSE","else",169],["T_WHITESPACE","\n\t\t\t",169],"{",["T_WHITESPACE","\n\t\t\t\t",170],["T_VARIABLE","$this",171],["T_OBJECT_OPERATOR","->",171],["T_STRING","_redis",171],["T_WHITESPACE"," ",171],"=",["T_WHITESPACE"," ",171],["T_VARIABLE","$redis",171],";",["T_WHITESPACE","\n\t\t\t\t",171],["T_RETURN","return",172],["T_WHITESPACE"," ",172],["T_VARIABLE","$this",172],["T_OBJECT_OPERATOR","->",172],["T_STRING","_success",172],";",["T_WHITESPACE","\n\t\t\t",172],"}",["T_WHITESPACE","\n\t\t",173],"}",["T_WHITESPACE","\n\t\t",174],["T_ELSE","else",175],["T_WHITESPACE","\n\t\t",175],"{",["T_WHITESPACE","\n\t\t\t",176],["T_STRING","log_message",177],"(",["T_CONSTANT_ENCAPSED_STRING","'error'",177],",",["T_WHITESPACE"," ",177],["T_CONSTANT_ENCAPSED_STRING","'Session: Unable to connect to Redis with the configured settings.'",177],")",";",["T_WHITESPACE","\n\t\t",177],"}",["T_WHITESPACE","\n\n\t\t",178],["T_RETURN","return",180],["T_WHITESPACE"," ",180],["T_VARIABLE","$this",180],["T_OBJECT_OPERATOR","->",180],["T_STRING","_fail",180],"(",")",";",["T_WHITESPACE","\n\t",180],"}",["T_WHITESPACE","\n\n\t",181],["T_COMMENT","\/\/ ------------------------------------------------------------------------\n",183],["T_WHITESPACE","\n\t",184],["T_DOC_COMMENT","\/**\n\t * Read\n\t *\n\t * Reads session data and acquires a lock\n\t *\n\t * @param\tstring\t$session_id\tSession ID\n\t * @return\tstring\tSerialized session data\n\t *\/",185],["T_WHITESPACE","\n\t",192],["T_PUBLIC","public",193],["T_WHITESPACE"," ",193],["T_FUNCTION","function",193],["T_WHITESPACE"," ",193],["T_STRING","read",193],"(",["T_VARIABLE","$session_id",193],")",["T_WHITESPACE","\n\t",193],"{",["T_WHITESPACE","\n\t\t",194],["T_IF","if",195],["T_WHITESPACE"," ",195],"(",["T_ISSET","isset",195],"(",["T_VARIABLE","$this",195],["T_OBJECT_OPERATOR","->",195],["T_STRING","_redis",195],")",["T_WHITESPACE"," ",195],["T_BOOLEAN_AND","&&",195],["T_WHITESPACE"," ",195],["T_VARIABLE","$this",195],["T_OBJECT_OPERATOR","->",195],["T_STRING","_get_lock",195],"(",["T_VARIABLE","$session_id",195],")",")",["T_WHITESPACE","\n\t\t",195],"{",["T_WHITESPACE","\n\t\t\t",196],["T_COMMENT","\/\/ Needed by write() to detect session_regenerate_id() calls\n",197],["T_WHITESPACE","\t\t\t",198],["T_VARIABLE","$this",198],["T_OBJECT_OPERATOR","->",198],["T_STRING","_session_id",198],["T_WHITESPACE"," ",198],"=",["T_WHITESPACE"," ",198],["T_VARIABLE","$session_id",198],";",["T_WHITESPACE","\n\n\t\t\t",198],["T_VARIABLE","$session_data",200],["T_WHITESPACE"," ",200],"=",["T_WHITESPACE"," ",200],["T_VARIABLE","$this",200],["T_OBJECT_OPERATOR","->",200],["T_STRING","_redis",200],["T_OBJECT_OPERATOR","->",200],["T_STRING","get",200],"(",["T_VARIABLE","$this",200],["T_OBJECT_OPERATOR","->",200],["T_STRING","_key_prefix",200],".",["T_VARIABLE","$session_id",200],")",";",["T_WHITESPACE","\n\n\t\t\t",200],["T_STRING","is_string",202],"(",["T_VARIABLE","$session_data",202],")",["T_WHITESPACE","\n\t\t\t\t",202],"?",["T_WHITESPACE"," ",203],["T_VARIABLE","$this",203],["T_OBJECT_OPERATOR","->",203],["T_STRING","_key_exists",203],["T_WHITESPACE"," ",203],"=",["T_WHITESPACE"," ",203],["T_STRING","TRUE",203],["T_WHITESPACE","\n\t\t\t\t",203],":",["T_WHITESPACE"," ",204],["T_VARIABLE","$session_data",204],["T_WHITESPACE"," ",204],"=",["T_WHITESPACE"," ",204],["T_CONSTANT_ENCAPSED_STRING","''",204],";",["T_WHITESPACE","\n\n\t\t\t",204],["T_VARIABLE","$this",206],["T_OBJECT_OPERATOR","->",206],["T_STRING","_fingerprint",206],["T_WHITESPACE"," ",206],"=",["T_WHITESPACE"," ",206],["T_STRING","md5",206],"(",["T_VARIABLE","$session_data",206],")",";",["T_WHITESPACE","\n\t\t\t",206],["T_RETURN","return",207],["T_WHITESPACE"," ",207],["T_VARIABLE","$session_data",207],";",["T_WHITESPACE","\n\t\t",207],"}",["T_WHITESPACE","\n\n\t\t",208],["T_RETURN","return",210],["T_WHITESPACE"," ",210],["T_VARIABLE","$this",210],["T_OBJECT_OPERATOR","->",210],["T_STRING","_fail",210],"(",")",";",["T_WHITESPACE","\n\t",210],"}",["T_WHITESPACE","\n\n\t",211],["T_COMMENT","\/\/ ------------------------------------------------------------------------\n",213],["T_WHITESPACE","\n\t",214],["T_DOC_COMMENT","\/**\n\t * Write\n\t *\n\t * Writes (create \/ update) session data\n\t *\n\t * @param\tstring\t$session_id\tSession ID\n\t * @param\tstring\t$session_data\tSerialized session data\n\t * @return\tbool\n\t *\/",215],["T_WHITESPACE","\n\t",223],["T_PUBLIC","public",224],["T_WHITESPACE"," ",224],["T_FUNCTION","function",224],["T_WHITESPACE"," ",224],["T_STRING","write",224],"(",["T_VARIABLE","$session_id",224],",",["T_WHITESPACE"," ",224],["T_VARIABLE","$session_data",224],")",["T_WHITESPACE","\n\t",224],"{",["T_WHITESPACE","\n\t\t",225],["T_IF","if",226],["T_WHITESPACE"," ",226],"(",["T_WHITESPACE"," ",226],"!",["T_WHITESPACE"," ",226],["T_ISSET","isset",226],"(",["T_VARIABLE","$this",226],["T_OBJECT_OPERATOR","->",226],["T_STRING","_redis",226],",",["T_WHITESPACE"," ",226],["T_VARIABLE","$this",226],["T_OBJECT_OPERATOR","->",226],["T_STRING","_lock_key",226],")",")",["T_WHITESPACE","\n\t\t",226],"{",["T_WHITESPACE","\n\t\t\t",227],["T_RETURN","return",228],["T_WHITESPACE"," ",228],["T_VARIABLE","$this",228],["T_OBJECT_OPERATOR","->",228],["T_STRING","_fail",228],"(",")",";",["T_WHITESPACE","\n\t\t",228],"}",["T_WHITESPACE","\n\t\t",229],["T_COMMENT","\/\/ Was the ID regenerated?\n",230],["T_WHITESPACE","\t\t",231],["T_ELSEIF","elseif",231],["T_WHITESPACE"," ",231],"(",["T_VARIABLE","$session_id",231],["T_WHITESPACE"," ",231],["T_IS_NOT_IDENTICAL","!==",231],["T_WHITESPACE"," ",231],["T_VARIABLE","$this",231],["T_OBJECT_OPERATOR","->",231],["T_STRING","_session_id",231],")",["T_WHITESPACE","\n\t\t",231],"{",["T_WHITESPACE","\n\t\t\t",232],["T_IF","if",233],["T_WHITESPACE"," ",233],"(",["T_WHITESPACE"," ",233],"!",["T_WHITESPACE"," ",233],["T_VARIABLE","$this",233],["T_OBJECT_OPERATOR","->",233],["T_STRING","_release_lock",233],"(",")",["T_WHITESPACE"," ",233],["T_LOGICAL_OR","OR",233],["T_WHITESPACE"," ",233],"!",["T_WHITESPACE"," ",233],["T_VARIABLE","$this",233],["T_OBJECT_OPERATOR","->",233],["T_STRING","_get_lock",233],"(",["T_VARIABLE","$session_id",233],")",")",["T_WHITESPACE","\n\t\t\t",233],"{",["T_WHITESPACE","\n\t\t\t\t",234],["T_RETURN","return",235],["T_WHITESPACE"," ",235],["T_VARIABLE","$this",235],["T_OBJECT_OPERATOR","->",235],["T_STRING","_fail",235],"(",")",";",["T_WHITESPACE","\n\t\t\t",235],"}",["T_WHITESPACE","\n\n\t\t\t",236],["T_VARIABLE","$this",238],["T_OBJECT_OPERATOR","->",238],["T_STRING","_key_exists",238],["T_WHITESPACE"," ",238],"=",["T_WHITESPACE"," ",238],["T_STRING","FALSE",238],";",["T_WHITESPACE","\n\t\t\t",238],["T_VARIABLE","$this",239],["T_OBJECT_OPERATOR","->",239],["T_STRING","_session_id",239],["T_WHITESPACE"," ",239],"=",["T_WHITESPACE"," ",239],["T_VARIABLE","$session_id",239],";",["T_WHITESPACE","\n\t\t",239],"}",["T_WHITESPACE","\n\n\t\t",240],["T_VARIABLE","$this",242],["T_OBJECT_OPERATOR","->",242],["T_STRING","_redis",242],["T_OBJECT_OPERATOR","->",242],["T_STRING","setTimeout",242],"(",["T_VARIABLE","$this",242],["T_OBJECT_OPERATOR","->",242],["T_STRING","_lock_key",242],",",["T_WHITESPACE"," ",242],["T_LNUMBER","300",242],")",";",["T_WHITESPACE","\n\t\t",242],["T_IF","if",243],["T_WHITESPACE"," ",243],"(",["T_VARIABLE","$this",243],["T_OBJECT_OPERATOR","->",243],["T_STRING","_fingerprint",243],["T_WHITESPACE"," ",243],["T_IS_NOT_IDENTICAL","!==",243],["T_WHITESPACE"," ",243],"(",["T_VARIABLE","$fingerprint",243],["T_WHITESPACE"," ",243],"=",["T_WHITESPACE"," ",243],["T_STRING","md5",243],"(",["T_VARIABLE","$session_data",243],")",")",["T_WHITESPACE"," ",243],["T_LOGICAL_OR","OR",243],["T_WHITESPACE"," ",243],["T_VARIABLE","$this",243],["T_OBJECT_OPERATOR","->",243],["T_STRING","_key_exists",243],["T_WHITESPACE"," ",243],["T_IS_IDENTICAL","===",243],["T_WHITESPACE"," ",243],["T_STRING","FALSE",243],")",["T_WHITESPACE","\n\t\t",243],"{",["T_WHITESPACE","\n\t\t\t",244],["T_IF","if",245],["T_WHITESPACE"," ",245],"(",["T_VARIABLE","$this",245],["T_OBJECT_OPERATOR","->",245],["T_STRING","_redis",245],["T_OBJECT_OPERATOR","->",245],["T_STRING","set",245],"(",["T_VARIABLE","$this",245],["T_OBJECT_OPERATOR","->",245],["T_STRING","_key_prefix",245],".",["T_VARIABLE","$session_id",245],",",["T_WHITESPACE"," ",245],["T_VARIABLE","$session_data",245],",",["T_WHITESPACE"," ",245],["T_VARIABLE","$this",245],["T_OBJECT_OPERATOR","->",245],["T_STRING","_config",245],"[",["T_CONSTANT_ENCAPSED_STRING","'expiration'",245],"]",")",")",["T_WHITESPACE","\n\t\t\t",245],"{",["T_WHITESPACE","\n\t\t\t\t",246],["T_VARIABLE","$this",247],["T_OBJECT_OPERATOR","->",247],["T_STRING","_fingerprint",247],["T_WHITESPACE"," ",247],"=",["T_WHITESPACE"," ",247],["T_VARIABLE","$fingerprint",247],";",["T_WHITESPACE","\n\t\t\t\t",247],["T_VARIABLE","$this",248],["T_OBJECT_OPERATOR","->",248],["T_STRING","_key_exists",248],["T_WHITESPACE"," ",248],"=",["T_WHITESPACE"," ",248],["T_STRING","TRUE",248],";",["T_WHITESPACE","\n\t\t\t\t",248],["T_RETURN","return",249],["T_WHITESPACE"," ",249],["T_VARIABLE","$this",249],["T_OBJECT_OPERATOR","->",249],["T_STRING","_success",249],";",["T_WHITESPACE","\n\t\t\t",249],"}",["T_WHITESPACE","\n\n\t\t\t",250],["T_RETURN","return",252],["T_WHITESPACE"," ",252],["T_VARIABLE","$this",252],["T_OBJECT_OPERATOR","->",252],["T_STRING","_fail",252],"(",")",";",["T_WHITESPACE","\n\t\t",252],"}",["T_WHITESPACE","\n\n\t\t",253],["T_RETURN","return",255],["T_WHITESPACE"," ",255],"(",["T_VARIABLE","$this",255],["T_OBJECT_OPERATOR","->",255],["T_STRING","_redis",255],["T_OBJECT_OPERATOR","->",255],["T_STRING","setTimeout",255],"(",["T_VARIABLE","$this",255],["T_OBJECT_OPERATOR","->",255],["T_STRING","_key_prefix",255],".",["T_VARIABLE","$session_id",255],",",["T_WHITESPACE"," ",255],["T_VARIABLE","$this",255],["T_OBJECT_OPERATOR","->",255],["T_STRING","_config",255],"[",["T_CONSTANT_ENCAPSED_STRING","'expiration'",255],"]",")",")",["T_WHITESPACE","\n\t\t\t",255],"?",["T_WHITESPACE"," ",256],["T_VARIABLE","$this",256],["T_OBJECT_OPERATOR","->",256],["T_STRING","_success",256],["T_WHITESPACE","\n\t\t\t",256],":",["T_WHITESPACE"," ",257],["T_VARIABLE","$this",257],["T_OBJECT_OPERATOR","->",257],["T_STRING","_fail",257],"(",")",";",["T_WHITESPACE","\n\t",257],"}",["T_WHITESPACE","\n\n\t",258],["T_COMMENT","\/\/ ------------------------------------------------------------------------\n",260],["T_WHITESPACE","\n\t",261],["T_DOC_COMMENT","\/**\n\t * Close\n\t *\n\t * Releases locks and closes connection.\n\t *\n\t * @return\tbool\n\t *\/",262],["T_WHITESPACE","\n\t",268],["T_PUBLIC","public",269],["T_WHITESPACE"," ",269],["T_FUNCTION","function",269],["T_WHITESPACE"," ",269],["T_STRING","close",269],"(",")",["T_WHITESPACE","\n\t",269],"{",["T_WHITESPACE","\n\t\t",270],["T_IF","if",271],["T_WHITESPACE"," ",271],"(",["T_ISSET","isset",271],"(",["T_VARIABLE","$this",271],["T_OBJECT_OPERATOR","->",271],["T_STRING","_redis",271],")",")",["T_WHITESPACE","\n\t\t",271],"{",["T_WHITESPACE","\n\t\t\t",272],["T_TRY","try",273],["T_WHITESPACE"," ",273],"{",["T_WHITESPACE","\n\t\t\t\t",273],["T_IF","if",274],["T_WHITESPACE"," ",274],"(",["T_VARIABLE","$this",274],["T_OBJECT_OPERATOR","->",274],["T_STRING","_redis",274],["T_OBJECT_OPERATOR","->",274],["T_STRING","ping",274],"(",")",["T_WHITESPACE"," ",274],["T_IS_IDENTICAL","===",274],["T_WHITESPACE"," ",274],["T_CONSTANT_ENCAPSED_STRING","'+PONG'",274],")",["T_WHITESPACE","\n\t\t\t\t",274],"{",["T_WHITESPACE","\n\t\t\t\t\t",275],["T_VARIABLE","$this",276],["T_OBJECT_OPERATOR","->",276],["T_STRING","_release_lock",276],"(",")",";",["T_WHITESPACE","\n\t\t\t\t\t",276],["T_IF","if",277],["T_WHITESPACE"," ",277],"(",["T_VARIABLE","$this",277],["T_OBJECT_OPERATOR","->",277],["T_STRING","_redis",277],["T_OBJECT_OPERATOR","->",277],["T_STRING","close",277],"(",")",["T_WHITESPACE"," ",277],["T_IS_IDENTICAL","===",277],["T_WHITESPACE"," ",277],["T_STRING","FALSE",277],")",["T_WHITESPACE","\n\t\t\t\t\t",277],"{",["T_WHITESPACE","\n\t\t\t\t\t\t",278],["T_RETURN","return",279],["T_WHITESPACE"," ",279],["T_VARIABLE","$this",279],["T_OBJECT_OPERATOR","->",279],["T_STRING","_fail",279],"(",")",";",["T_WHITESPACE","\n\t\t\t\t\t",279],"}",["T_WHITESPACE","\n\t\t\t\t",280],"}",["T_WHITESPACE","\n\t\t\t",281],"}",["T_WHITESPACE","\n\t\t\t",282],["T_CATCH","catch",283],["T_WHITESPACE"," ",283],"(",["T_STRING","RedisException",283],["T_WHITESPACE"," ",283],["T_VARIABLE","$e",283],")",["T_WHITESPACE","\n\t\t\t",283],"{",["T_WHITESPACE","\n\t\t\t\t",284],["T_STRING","log_message",285],"(",["T_CONSTANT_ENCAPSED_STRING","'error'",285],",",["T_WHITESPACE"," ",285],["T_CONSTANT_ENCAPSED_STRING","'Session: Got RedisException on close(): '",285],".",["T_VARIABLE","$e",285],["T_OBJECT_OPERATOR","->",285],["T_STRING","getMessage",285],"(",")",")",";",["T_WHITESPACE","\n\t\t\t",285],"}",["T_WHITESPACE","\n\n\t\t\t",286],["T_VARIABLE","$this",288],["T_OBJECT_OPERATOR","->",288],["T_STRING","_redis",288],["T_WHITESPACE"," ",288],"=",["T_WHITESPACE"," ",288],["T_STRING","NULL",288],";",["T_WHITESPACE","\n\t\t\t",288],["T_RETURN","return",289],["T_WHITESPACE"," ",289],["T_VARIABLE","$this",289],["T_OBJECT_OPERATOR","->",289],["T_STRING","_success",289],";",["T_WHITESPACE","\n\t\t",289],"}",["T_WHITESPACE","\n\n\t\t",290],["T_RETURN","return",292],["T_WHITESPACE"," ",292],["T_VARIABLE","$this",292],["T_OBJECT_OPERATOR","->",292],["T_STRING","_success",292],";",["T_WHITESPACE","\n\t",292],"}",["T_WHITESPACE","\n\n\t",293],["T_COMMENT","\/\/ ------------------------------------------------------------------------\n",295],["T_WHITESPACE","\n\t",296],["T_DOC_COMMENT","\/**\n\t * Destroy\n\t *\n\t * Destroys the current session.\n\t *\n\t * @param\tstring\t$session_id\tSession ID\n\t * @return\tbool\n\t *\/",297],["T_WHITESPACE","\n\t",304],["T_PUBLIC","public",305],["T_WHITESPACE"," ",305],["T_FUNCTION","function",305],["T_WHITESPACE"," ",305],["T_STRING","destroy",305],"(",["T_VARIABLE","$session_id",305],")",["T_WHITESPACE","\n\t",305],"{",["T_WHITESPACE","\n\t\t",306],["T_IF","if",307],["T_WHITESPACE"," ",307],"(",["T_ISSET","isset",307],"(",["T_VARIABLE","$this",307],["T_OBJECT_OPERATOR","->",307],["T_STRING","_redis",307],",",["T_WHITESPACE"," ",307],["T_VARIABLE","$this",307],["T_OBJECT_OPERATOR","->",307],["T_STRING","_lock_key",307],")",")",["T_WHITESPACE","\n\t\t",307],"{",["T_WHITESPACE","\n\t\t\t",308],["T_IF","if",309],["T_WHITESPACE"," ",309],"(","(",["T_VARIABLE","$result",309],["T_WHITESPACE"," ",309],"=",["T_WHITESPACE"," ",309],["T_VARIABLE","$this",309],["T_OBJECT_OPERATOR","->",309],["T_STRING","_redis",309],["T_OBJECT_OPERATOR","->",309],["T_STRING","delete",309],"(",["T_VARIABLE","$this",309],["T_OBJECT_OPERATOR","->",309],["T_STRING","_key_prefix",309],".",["T_VARIABLE","$session_id",309],")",")",["T_WHITESPACE"," ",309],["T_IS_NOT_IDENTICAL","!==",309],["T_WHITESPACE"," ",309],["T_LNUMBER","1",309],")",["T_WHITESPACE","\n\t\t\t",309],"{",["T_WHITESPACE","\n\t\t\t\t",310],["T_STRING","log_message",311],"(",["T_CONSTANT_ENCAPSED_STRING","'debug'",311],",",["T_WHITESPACE"," ",311],["T_CONSTANT_ENCAPSED_STRING","'Session: Redis::delete() expected to return 1, got '",311],".",["T_STRING","var_export",311],"(",["T_VARIABLE","$result",311],",",["T_WHITESPACE"," ",311],["T_STRING","TRUE",311],")",".",["T_CONSTANT_ENCAPSED_STRING","' instead.'",311],")",";",["T_WHITESPACE","\n\t\t\t",311],"}",["T_WHITESPACE","\n\n\t\t\t",312],["T_VARIABLE","$this",314],["T_OBJECT_OPERATOR","->",314],["T_STRING","_cookie_destroy",314],"(",")",";",["T_WHITESPACE","\n\t\t\t",314],["T_RETURN","return",315],["T_WHITESPACE"," ",315],["T_VARIABLE","$this",315],["T_OBJECT_OPERATOR","->",315],["T_STRING","_success",315],";",["T_WHITESPACE","\n\t\t",315],"}",["T_WHITESPACE","\n\n\t\t",316],["T_RETURN","return",318],["T_WHITESPACE"," ",318],["T_VARIABLE","$this",318],["T_OBJECT_OPERATOR","->",318],["T_STRING","_fail",318],"(",")",";",["T_WHITESPACE","\n\t",318],"}",["T_WHITESPACE","\n\n\t",319],["T_COMMENT","\/\/ ------------------------------------------------------------------------\n",321],["T_WHITESPACE","\n\t",322],["T_DOC_COMMENT","\/**\n\t * Garbage Collector\n\t *\n\t * Deletes expired sessions\n\t *\n\t * @param\tint \t$maxlifetime\tMaximum lifetime of sessions\n\t * @return\tbool\n\t *\/",323],["T_WHITESPACE","\n\t",330],["T_PUBLIC","public",331],["T_WHITESPACE"," ",331],["T_FUNCTION","function",331],["T_WHITESPACE"," ",331],["T_STRING","gc",331],"(",["T_VARIABLE","$maxlifetime",331],")",["T_WHITESPACE","\n\t",331],"{",["T_WHITESPACE","\n\t\t",332],["T_COMMENT","\/\/ Not necessary, Redis takes care of that.\n",333],["T_WHITESPACE","\t\t",334],["T_RETURN","return",334],["T_WHITESPACE"," ",334],["T_VARIABLE","$this",334],["T_OBJECT_OPERATOR","->",334],["T_STRING","_success",334],";",["T_WHITESPACE","\n\t",334],"}",["T_WHITESPACE","\n\n\t",335],["T_COMMENT","\/\/ ------------------------------------------------------------------------\n",337],["T_WHITESPACE","\n\t",338],["T_DOC_COMMENT","\/**\n\t * Get lock\n\t *\n\t * Acquires an (emulated) lock.\n\t *\n\t * @param\tstring\t$session_id\tSession ID\n\t * @return\tbool\n\t *\/",339],["T_WHITESPACE","\n\t",346],["T_PROTECTED","protected",347],["T_WHITESPACE"," ",347],["T_FUNCTION","function",347],["T_WHITESPACE"," ",347],["T_STRING","_get_lock",347],"(",["T_VARIABLE","$session_id",347],")",["T_WHITESPACE","\n\t",347],"{",["T_WHITESPACE","\n\t\t",348],["T_COMMENT","\/\/ PHP 7 reuses the SessionHandler object on regeneration,\n",349],["T_WHITESPACE","\t\t",350],["T_COMMENT","\/\/ so we need to check here if the lock key is for the\n",350],["T_WHITESPACE","\t\t",351],["T_COMMENT","\/\/ correct session ID.\n",351],["T_WHITESPACE","\t\t",352],["T_IF","if",352],["T_WHITESPACE"," ",352],"(",["T_VARIABLE","$this",352],["T_OBJECT_OPERATOR","->",352],["T_STRING","_lock_key",352],["T_WHITESPACE"," ",352],["T_IS_IDENTICAL","===",352],["T_WHITESPACE"," ",352],["T_VARIABLE","$this",352],["T_OBJECT_OPERATOR","->",352],["T_STRING","_key_prefix",352],".",["T_VARIABLE","$session_id",352],".",["T_CONSTANT_ENCAPSED_STRING","':lock'",352],")",["T_WHITESPACE","\n\t\t",352],"{",["T_WHITESPACE","\n\t\t\t",353],["T_RETURN","return",354],["T_WHITESPACE"," ",354],["T_VARIABLE","$this",354],["T_OBJECT_OPERATOR","->",354],["T_STRING","_redis",354],["T_OBJECT_OPERATOR","->",354],["T_STRING","setTimeout",354],"(",["T_VARIABLE","$this",354],["T_OBJECT_OPERATOR","->",354],["T_STRING","_lock_key",354],",",["T_WHITESPACE"," ",354],["T_LNUMBER","300",354],")",";",["T_WHITESPACE","\n\t\t",354],"}",["T_WHITESPACE","\n\n\t\t",355],["T_COMMENT","\/\/ 30 attempts to obtain a lock, in case another request already has it\n",357],["T_WHITESPACE","\t\t",358],["T_VARIABLE","$lock_key",358],["T_WHITESPACE"," ",358],"=",["T_WHITESPACE"," ",358],["T_VARIABLE","$this",358],["T_OBJECT_OPERATOR","->",358],["T_STRING","_key_prefix",358],".",["T_VARIABLE","$session_id",358],".",["T_CONSTANT_ENCAPSED_STRING","':lock'",358],";",["T_WHITESPACE","\n\t\t",358],["T_VARIABLE","$attempt",359],["T_WHITESPACE"," ",359],"=",["T_WHITESPACE"," ",359],["T_LNUMBER","0",359],";",["T_WHITESPACE","\n\t\t",359],["T_DO","do",360],["T_WHITESPACE","\n\t\t",360],"{",["T_WHITESPACE","\n\t\t\t",361],["T_IF","if",362],["T_WHITESPACE"," ",362],"(","(",["T_VARIABLE","$ttl",362],["T_WHITESPACE"," ",362],"=",["T_WHITESPACE"," ",362],["T_VARIABLE","$this",362],["T_OBJECT_OPERATOR","->",362],["T_STRING","_redis",362],["T_OBJECT_OPERATOR","->",362],["T_STRING","ttl",362],"(",["T_VARIABLE","$lock_key",362],")",")",["T_WHITESPACE"," ",362],">",["T_WHITESPACE"," ",362],["T_LNUMBER","0",362],")",["T_WHITESPACE","\n\t\t\t",362],"{",["T_WHITESPACE","\n\t\t\t\t",363],["T_STRING","sleep",364],"(",["T_LNUMBER","1",364],")",";",["T_WHITESPACE","\n\t\t\t\t",364],["T_CONTINUE","continue",365],";",["T_WHITESPACE","\n\t\t\t",365],"}",["T_WHITESPACE","\n\n\t\t\t",366],["T_IF","if",368],["T_WHITESPACE"," ",368],"(",["T_WHITESPACE"," ",368],"!",["T_WHITESPACE"," ",368],["T_VARIABLE","$this",368],["T_OBJECT_OPERATOR","->",368],["T_STRING","_redis",368],["T_OBJECT_OPERATOR","->",368],["T_STRING","setex",368],"(",["T_VARIABLE","$lock_key",368],",",["T_WHITESPACE"," ",368],["T_LNUMBER","300",368],",",["T_WHITESPACE"," ",368],["T_STRING","time",368],"(",")",")",")",["T_WHITESPACE","\n\t\t\t",368],"{",["T_WHITESPACE","\n\t\t\t\t",369],["T_STRING","log_message",370],"(",["T_CONSTANT_ENCAPSED_STRING","'error'",370],",",["T_WHITESPACE"," ",370],["T_CONSTANT_ENCAPSED_STRING","'Session: Error while trying to obtain lock for '",370],".",["T_VARIABLE","$this",370],["T_OBJECT_OPERATOR","->",370],["T_STRING","_key_prefix",370],".",["T_VARIABLE","$session_id",370],")",";",["T_WHITESPACE","\n\t\t\t\t",370],["T_RETURN","return",371],["T_WHITESPACE"," ",371],["T_STRING","FALSE",371],";",["T_WHITESPACE","\n\t\t\t",371],"}",["T_WHITESPACE","\n\n\t\t\t",372],["T_VARIABLE","$this",374],["T_OBJECT_OPERATOR","->",374],["T_STRING","_lock_key",374],["T_WHITESPACE"," ",374],"=",["T_WHITESPACE"," ",374],["T_VARIABLE","$lock_key",374],";",["T_WHITESPACE","\n\t\t\t",374],["T_BREAK","break",375],";",["T_WHITESPACE","\n\t\t",375],"}",["T_WHITESPACE","\n\t\t",376],["T_WHILE","while",377],["T_WHITESPACE"," ",377],"(",["T_INC","++",377],["T_VARIABLE","$attempt",377],["T_WHITESPACE"," ",377],"<",["T_WHITESPACE"," ",377],["T_LNUMBER","30",377],")",";",["T_WHITESPACE","\n\n\t\t",377],["T_IF","if",379],["T_WHITESPACE"," ",379],"(",["T_VARIABLE","$attempt",379],["T_WHITESPACE"," ",379],["T_IS_IDENTICAL","===",379],["T_WHITESPACE"," ",379],["T_LNUMBER","30",379],")",["T_WHITESPACE","\n\t\t",379],"{",["T_WHITESPACE","\n\t\t\t",380],["T_STRING","log_message",381],"(",["T_CONSTANT_ENCAPSED_STRING","'error'",381],",",["T_WHITESPACE"," ",381],["T_CONSTANT_ENCAPSED_STRING","'Session: Unable to obtain lock for '",381],".",["T_VARIABLE","$this",381],["T_OBJECT_OPERATOR","->",381],["T_STRING","_key_prefix",381],".",["T_VARIABLE","$session_id",381],".",["T_CONSTANT_ENCAPSED_STRING","' after 30 attempts, aborting.'",381],")",";",["T_WHITESPACE","\n\t\t\t",381],["T_RETURN","return",382],["T_WHITESPACE"," ",382],["T_STRING","FALSE",382],";",["T_WHITESPACE","\n\t\t",382],"}",["T_WHITESPACE","\n\t\t",383],["T_ELSEIF","elseif",384],["T_WHITESPACE"," ",384],"(",["T_VARIABLE","$ttl",384],["T_WHITESPACE"," ",384],["T_IS_IDENTICAL","===",384],["T_WHITESPACE"," ",384],"-",["T_LNUMBER","1",384],")",["T_WHITESPACE","\n\t\t",384],"{",["T_WHITESPACE","\n\t\t\t",385],["T_STRING","log_message",386],"(",["T_CONSTANT_ENCAPSED_STRING","'debug'",386],",",["T_WHITESPACE"," ",386],["T_CONSTANT_ENCAPSED_STRING","'Session: Lock for '",386],".",["T_VARIABLE","$this",386],["T_OBJECT_OPERATOR","->",386],["T_STRING","_key_prefix",386],".",["T_VARIABLE","$session_id",386],".",["T_CONSTANT_ENCAPSED_STRING","' had no TTL, overriding.'",386],")",";",["T_WHITESPACE","\n\t\t",386],"}",["T_WHITESPACE","\n\n\t\t",387],["T_VARIABLE","$this",389],["T_OBJECT_OPERATOR","->",389],["T_STRING","_lock",389],["T_WHITESPACE"," ",389],"=",["T_WHITESPACE"," ",389],["T_STRING","TRUE",389],";",["T_WHITESPACE","\n\t\t",389],["T_RETURN","return",390],["T_WHITESPACE"," ",390],["T_STRING","TRUE",390],";",["T_WHITESPACE","\n\t",390],"}",["T_WHITESPACE","\n\n\t",391],["T_COMMENT","\/\/ ------------------------------------------------------------------------\n",393],["T_WHITESPACE","\n\t",394],["T_DOC_COMMENT","\/**\n\t * Release lock\n\t *\n\t * Releases a previously acquired lock\n\t *\n\t * @return\tbool\n\t *\/",395],["T_WHITESPACE","\n\t",401],["T_PROTECTED","protected",402],["T_WHITESPACE"," ",402],["T_FUNCTION","function",402],["T_WHITESPACE"," ",402],["T_STRING","_release_lock",402],"(",")",["T_WHITESPACE","\n\t",402],"{",["T_WHITESPACE","\n\t\t",403],["T_IF","if",404],["T_WHITESPACE"," ",404],"(",["T_ISSET","isset",404],"(",["T_VARIABLE","$this",404],["T_OBJECT_OPERATOR","->",404],["T_STRING","_redis",404],",",["T_WHITESPACE"," ",404],["T_VARIABLE","$this",404],["T_OBJECT_OPERATOR","->",404],["T_STRING","_lock_key",404],")",["T_WHITESPACE"," ",404],["T_BOOLEAN_AND","&&",404],["T_WHITESPACE"," ",404],["T_VARIABLE","$this",404],["T_OBJECT_OPERATOR","->",404],["T_STRING","_lock",404],")",["T_WHITESPACE","\n\t\t",404],"{",["T_WHITESPACE","\n\t\t\t",405],["T_IF","if",406],["T_WHITESPACE"," ",406],"(",["T_WHITESPACE"," ",406],"!",["T_WHITESPACE"," ",406],["T_VARIABLE","$this",406],["T_OBJECT_OPERATOR","->",406],["T_STRING","_redis",406],["T_OBJECT_OPERATOR","->",406],["T_STRING","delete",406],"(",["T_VARIABLE","$this",406],["T_OBJECT_OPERATOR","->",406],["T_STRING","_lock_key",406],")",")",["T_WHITESPACE","\n\t\t\t",406],"{",["T_WHITESPACE","\n\t\t\t\t",407],["T_STRING","log_message",408],"(",["T_CONSTANT_ENCAPSED_STRING","'error'",408],",",["T_WHITESPACE"," ",408],["T_CONSTANT_ENCAPSED_STRING","'Session: Error while trying to free lock for '",408],".",["T_VARIABLE","$this",408],["T_OBJECT_OPERATOR","->",408],["T_STRING","_lock_key",408],")",";",["T_WHITESPACE","\n\t\t\t\t",408],["T_RETURN","return",409],["T_WHITESPACE"," ",409],["T_STRING","FALSE",409],";",["T_WHITESPACE","\n\t\t\t",409],"}",["T_WHITESPACE","\n\n\t\t\t",410],["T_VARIABLE","$this",412],["T_OBJECT_OPERATOR","->",412],["T_STRING","_lock_key",412],["T_WHITESPACE"," ",412],"=",["T_WHITESPACE"," ",412],["T_STRING","NULL",412],";",["T_WHITESPACE","\n\t\t\t",412],["T_VARIABLE","$this",413],["T_OBJECT_OPERATOR","->",413],["T_STRING","_lock",413],["T_WHITESPACE"," ",413],"=",["T_WHITESPACE"," ",413],["T_STRING","FALSE",413],";",["T_WHITESPACE","\n\t\t",413],"}",["T_WHITESPACE","\n\n\t\t",414],["T_RETURN","return",416],["T_WHITESPACE"," ",416],["T_STRING","TRUE",416],";",["T_WHITESPACE","\n\t",416],"}",["T_WHITESPACE","\n\n",417],"}",["T_WHITESPACE","\n",419]]
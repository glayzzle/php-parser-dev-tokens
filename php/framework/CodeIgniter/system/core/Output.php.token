[["T_OPEN_TAG","<?php\n",1],["T_DOC_COMMENT","\/**\n * CodeIgniter\n *\n * An open source application development framework for PHP\n *\n * This content is released under the MIT License (MIT)\n *\n * Copyright (c) 2014 - 2017, British Columbia Institute of Technology\n *\n * Permission is hereby granted, free of charge, to any person obtaining a copy\n * of this software and associated documentation files (the \"Software\"), to deal\n * in the Software without restriction, including without limitation the rights\n * to use, copy, modify, merge, publish, distribute, sublicense, and\/or sell\n * copies of the Software, and to permit persons to whom the Software is\n * furnished to do so, subject to the following conditions:\n *\n * The above copyright notice and this permission notice shall be included in\n * all copies or substantial portions of the Software.\n *\n * THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN\n * THE SOFTWARE.\n *\n * @package\tCodeIgniter\n * @author\tEllisLab Dev Team\n * @copyright\tCopyright (c) 2008 - 2014, EllisLab, Inc. (https:\/\/ellislab.com\/)\n * @copyright\tCopyright (c) 2014 - 2017, British Columbia Institute of Technology (http:\/\/bcit.ca\/)\n * @license\thttp:\/\/opensource.org\/licenses\/MIT\tMIT License\n * @link\thttps:\/\/codeigniter.com\n * @since\tVersion 1.0.0\n * @filesource\n *\/",2],["T_WHITESPACE","\n",37],["T_STRING","defined",38],"(",["T_CONSTANT_ENCAPSED_STRING","'BASEPATH'",38],")",["T_WHITESPACE"," ",38],["T_LOGICAL_OR","OR",38],["T_WHITESPACE"," ",38],["T_EXIT","exit",38],"(",["T_CONSTANT_ENCAPSED_STRING","'No direct script access allowed'",38],")",";",["T_WHITESPACE","\n\n",38],["T_DOC_COMMENT","\/**\n * Output Class\n *\n * Responsible for sending final output to the browser.\n *\n * @package\t\tCodeIgniter\n * @subpackage\tLibraries\n * @category\tOutput\n * @author\t\tEllisLab Dev Team\n * @link\t\thttps:\/\/codeigniter.com\/user_guide\/libraries\/output.html\n *\/",40],["T_WHITESPACE","\n",50],["T_CLASS","class",51],["T_WHITESPACE"," ",51],["T_STRING","CI_Output",51],["T_WHITESPACE"," ",51],"{",["T_WHITESPACE","\n\n\t",51],["T_DOC_COMMENT","\/**\n\t * Final output string\n\t *\n\t * @var\tstring\n\t *\/",53],["T_WHITESPACE","\n\t",57],["T_PUBLIC","public",58],["T_WHITESPACE"," ",58],["T_VARIABLE","$final_output",58],";",["T_WHITESPACE","\n\n\t",58],["T_DOC_COMMENT","\/**\n\t * Cache expiration time\n\t *\n\t * @var\tint\n\t *\/",60],["T_WHITESPACE","\n\t",64],["T_PUBLIC","public",65],["T_WHITESPACE"," ",65],["T_VARIABLE","$cache_expiration",65],["T_WHITESPACE"," ",65],"=",["T_WHITESPACE"," ",65],["T_LNUMBER","0",65],";",["T_WHITESPACE","\n\n\t",65],["T_DOC_COMMENT","\/**\n\t * List of server headers\n\t *\n\t * @var\tarray\n\t *\/",67],["T_WHITESPACE","\n\t",71],["T_PUBLIC","public",72],["T_WHITESPACE"," ",72],["T_VARIABLE","$headers",72],["T_WHITESPACE"," ",72],"=",["T_WHITESPACE"," ",72],["T_ARRAY","array",72],"(",")",";",["T_WHITESPACE","\n\n\t",72],["T_DOC_COMMENT","\/**\n\t * List of mime types\n\t *\n\t * @var\tarray\n\t *\/",74],["T_WHITESPACE","\n\t",78],["T_PUBLIC","public",79],["T_WHITESPACE"," ",79],["T_VARIABLE","$mimes",79],["T_WHITESPACE"," ",79],"=",["T_WHITESPACE","\t",79],["T_ARRAY","array",79],"(",")",";",["T_WHITESPACE","\n\n\t",79],["T_DOC_COMMENT","\/**\n\t * Mime-type for the current page\n\t *\n\t * @var\tstring\n\t *\/",81],["T_WHITESPACE","\n\t",85],["T_PROTECTED","protected",86],["T_WHITESPACE"," ",86],["T_VARIABLE","$mime_type",86],["T_WHITESPACE"," ",86],"=",["T_WHITESPACE"," ",86],["T_CONSTANT_ENCAPSED_STRING","'text\/html'",86],";",["T_WHITESPACE","\n\n\t",86],["T_DOC_COMMENT","\/**\n\t * Enable Profiler flag\n\t *\n\t * @var\tbool\n\t *\/",88],["T_WHITESPACE","\n\t",92],["T_PUBLIC","public",93],["T_WHITESPACE"," ",93],["T_VARIABLE","$enable_profiler",93],["T_WHITESPACE"," ",93],"=",["T_WHITESPACE"," ",93],["T_STRING","FALSE",93],";",["T_WHITESPACE","\n\n\t",93],["T_DOC_COMMENT","\/**\n\t * php.ini zlib.output_compression flag\n\t *\n\t * @var\tbool\n\t *\/",95],["T_WHITESPACE","\n\t",99],["T_PROTECTED","protected",100],["T_WHITESPACE"," ",100],["T_VARIABLE","$_zlib_oc",100],["T_WHITESPACE"," ",100],"=",["T_WHITESPACE"," ",100],["T_STRING","FALSE",100],";",["T_WHITESPACE","\n\n\t",100],["T_DOC_COMMENT","\/**\n\t * CI output compression flag\n\t *\n\t * @var\tbool\n\t *\/",102],["T_WHITESPACE","\n\t",106],["T_PROTECTED","protected",107],["T_WHITESPACE"," ",107],["T_VARIABLE","$_compress_output",107],["T_WHITESPACE"," ",107],"=",["T_WHITESPACE"," ",107],["T_STRING","FALSE",107],";",["T_WHITESPACE","\n\n\t",107],["T_DOC_COMMENT","\/**\n\t * List of profiler sections\n\t *\n\t * @var\tarray\n\t *\/",109],["T_WHITESPACE","\n\t",113],["T_PROTECTED","protected",114],["T_WHITESPACE"," ",114],["T_VARIABLE","$_profiler_sections",114],["T_WHITESPACE"," ",114],"=",["T_WHITESPACE","\t",114],["T_ARRAY","array",114],"(",")",";",["T_WHITESPACE","\n\n\t",114],["T_DOC_COMMENT","\/**\n\t * Parse markers flag\n\t *\n\t * Whether or not to parse variables like {elapsed_time} and {memory_usage}.\n\t *\n\t * @var\tbool\n\t *\/",116],["T_WHITESPACE","\n\t",122],["T_PUBLIC","public",123],["T_WHITESPACE"," ",123],["T_VARIABLE","$parse_exec_vars",123],["T_WHITESPACE"," ",123],"=",["T_WHITESPACE"," ",123],["T_STRING","TRUE",123],";",["T_WHITESPACE","\n\n\t",123],["T_DOC_COMMENT","\/**\n\t * mbstring.func_override flag\n\t *\n\t * @var\tbool\n\t *\/",125],["T_WHITESPACE","\n\t",129],["T_PROTECTED","protected",130],["T_WHITESPACE"," ",130],["T_STATIC","static",130],["T_WHITESPACE"," ",130],["T_VARIABLE","$func_override",130],";",["T_WHITESPACE","\n\n\t",130],["T_DOC_COMMENT","\/**\n\t * Class constructor\n\t *\n\t * Determines whether zLib output compression will be used.\n\t *\n\t * @return\tvoid\n\t *\/",132],["T_WHITESPACE","\n\t",138],["T_PUBLIC","public",139],["T_WHITESPACE"," ",139],["T_FUNCTION","function",139],["T_WHITESPACE"," ",139],["T_STRING","__construct",139],"(",")",["T_WHITESPACE","\n\t",139],"{",["T_WHITESPACE","\n\t\t",140],["T_VARIABLE","$this",141],["T_OBJECT_OPERATOR","->",141],["T_STRING","_zlib_oc",141],["T_WHITESPACE"," ",141],"=",["T_WHITESPACE"," ",141],["T_BOOL_CAST","(bool)",141],["T_WHITESPACE"," ",141],["T_STRING","ini_get",141],"(",["T_CONSTANT_ENCAPSED_STRING","'zlib.output_compression'",141],")",";",["T_WHITESPACE","\n\t\t",141],["T_VARIABLE","$this",142],["T_OBJECT_OPERATOR","->",142],["T_STRING","_compress_output",142],["T_WHITESPACE"," ",142],"=",["T_WHITESPACE"," ",142],"(",["T_WHITESPACE","\n\t\t\t",142],["T_VARIABLE","$this",143],["T_OBJECT_OPERATOR","->",143],["T_STRING","_zlib_oc",143],["T_WHITESPACE"," ",143],["T_IS_IDENTICAL","===",143],["T_WHITESPACE"," ",143],["T_STRING","FALSE",143],["T_WHITESPACE","\n\t\t\t",143],["T_BOOLEAN_AND","&&",144],["T_WHITESPACE"," ",144],["T_STRING","config_item",144],"(",["T_CONSTANT_ENCAPSED_STRING","'compress_output'",144],")",["T_WHITESPACE"," ",144],["T_IS_IDENTICAL","===",144],["T_WHITESPACE"," ",144],["T_STRING","TRUE",144],["T_WHITESPACE","\n\t\t\t",144],["T_BOOLEAN_AND","&&",145],["T_WHITESPACE"," ",145],["T_STRING","extension_loaded",145],"(",["T_CONSTANT_ENCAPSED_STRING","'zlib'",145],")",["T_WHITESPACE","\n\t\t",145],")",";",["T_WHITESPACE","\n\n\t\t",146],["T_ISSET","isset",148],"(",["T_STRING","self",148],["T_DOUBLE_COLON","::",148],["T_VARIABLE","$func_override",148],")",["T_WHITESPACE"," ",148],["T_LOGICAL_OR","OR",148],["T_WHITESPACE"," ",148],["T_STRING","self",148],["T_DOUBLE_COLON","::",148],["T_VARIABLE","$func_override",148],["T_WHITESPACE"," ",148],"=",["T_WHITESPACE"," ",148],"(",["T_STRING","extension_loaded",148],"(",["T_CONSTANT_ENCAPSED_STRING","'mbstring'",148],")",["T_WHITESPACE"," ",148],["T_BOOLEAN_AND","&&",148],["T_WHITESPACE"," ",148],["T_STRING","ini_get",148],"(",["T_CONSTANT_ENCAPSED_STRING","'mbstring.func_override'",148],")",")",";",["T_WHITESPACE","\n\n\t\t",148],["T_COMMENT","\/\/ Get mime types for later\n",150],["T_WHITESPACE","\t\t",151],["T_VARIABLE","$this",151],["T_OBJECT_OPERATOR","->",151],["T_STRING","mimes",151],["T_WHITESPACE"," ",151],"=","&",["T_WHITESPACE"," ",151],["T_STRING","get_mimes",151],"(",")",";",["T_WHITESPACE","\n\n\t\t",151],["T_STRING","log_message",153],"(",["T_CONSTANT_ENCAPSED_STRING","'info'",153],",",["T_WHITESPACE"," ",153],["T_CONSTANT_ENCAPSED_STRING","'Output Class Initialized'",153],")",";",["T_WHITESPACE","\n\t",153],"}",["T_WHITESPACE","\n\n\t",154],["T_COMMENT","\/\/ --------------------------------------------------------------------\n",156],["T_WHITESPACE","\n\t",157],["T_DOC_COMMENT","\/**\n\t * Get Output\n\t *\n\t * Returns the current output string.\n\t *\n\t * @return\tstring\n\t *\/",158],["T_WHITESPACE","\n\t",164],["T_PUBLIC","public",165],["T_WHITESPACE"," ",165],["T_FUNCTION","function",165],["T_WHITESPACE"," ",165],["T_STRING","get_output",165],"(",")",["T_WHITESPACE","\n\t",165],"{",["T_WHITESPACE","\n\t\t",166],["T_RETURN","return",167],["T_WHITESPACE"," ",167],["T_VARIABLE","$this",167],["T_OBJECT_OPERATOR","->",167],["T_STRING","final_output",167],";",["T_WHITESPACE","\n\t",167],"}",["T_WHITESPACE","\n\n\t",168],["T_COMMENT","\/\/ --------------------------------------------------------------------\n",170],["T_WHITESPACE","\n\t",171],["T_DOC_COMMENT","\/**\n\t * Set Output\n\t *\n\t * Sets the output string.\n\t *\n\t * @param\tstring\t$output\tOutput data\n\t * @return\tCI_Output\n\t *\/",172],["T_WHITESPACE","\n\t",179],["T_PUBLIC","public",180],["T_WHITESPACE"," ",180],["T_FUNCTION","function",180],["T_WHITESPACE"," ",180],["T_STRING","set_output",180],"(",["T_VARIABLE","$output",180],")",["T_WHITESPACE","\n\t",180],"{",["T_WHITESPACE","\n\t\t",181],["T_VARIABLE","$this",182],["T_OBJECT_OPERATOR","->",182],["T_STRING","final_output",182],["T_WHITESPACE"," ",182],"=",["T_WHITESPACE"," ",182],["T_VARIABLE","$output",182],";",["T_WHITESPACE","\n\t\t",182],["T_RETURN","return",183],["T_WHITESPACE"," ",183],["T_VARIABLE","$this",183],";",["T_WHITESPACE","\n\t",183],"}",["T_WHITESPACE","\n\n\t",184],["T_COMMENT","\/\/ --------------------------------------------------------------------\n",186],["T_WHITESPACE","\n\t",187],["T_DOC_COMMENT","\/**\n\t * Append Output\n\t *\n\t * Appends data onto the output string.\n\t *\n\t * @param\tstring\t$output\tData to append\n\t * @return\tCI_Output\n\t *\/",188],["T_WHITESPACE","\n\t",195],["T_PUBLIC","public",196],["T_WHITESPACE"," ",196],["T_FUNCTION","function",196],["T_WHITESPACE"," ",196],["T_STRING","append_output",196],"(",["T_VARIABLE","$output",196],")",["T_WHITESPACE","\n\t",196],"{",["T_WHITESPACE","\n\t\t",197],["T_VARIABLE","$this",198],["T_OBJECT_OPERATOR","->",198],["T_STRING","final_output",198],["T_WHITESPACE"," ",198],["T_CONCAT_EQUAL",".=",198],["T_WHITESPACE"," ",198],["T_VARIABLE","$output",198],";",["T_WHITESPACE","\n\t\t",198],["T_RETURN","return",199],["T_WHITESPACE"," ",199],["T_VARIABLE","$this",199],";",["T_WHITESPACE","\n\t",199],"}",["T_WHITESPACE","\n\n\t",200],["T_COMMENT","\/\/ --------------------------------------------------------------------\n",202],["T_WHITESPACE","\n\t",203],["T_DOC_COMMENT","\/**\n\t * Set Header\n\t *\n\t * Lets you set a server header which will be sent with the final output.\n\t *\n\t * Note: If a file is cached, headers will not be sent.\n\t * @todo\tWe need to figure out how to permit headers to be cached.\n\t *\n\t * @param\tstring\t$header\t\tHeader\n\t * @param\tbool\t$replace\tWhether to replace the old header value, if already set\n\t * @return\tCI_Output\n\t *\/",204],["T_WHITESPACE","\n\t",215],["T_PUBLIC","public",216],["T_WHITESPACE"," ",216],["T_FUNCTION","function",216],["T_WHITESPACE"," ",216],["T_STRING","set_header",216],"(",["T_VARIABLE","$header",216],",",["T_WHITESPACE"," ",216],["T_VARIABLE","$replace",216],["T_WHITESPACE"," ",216],"=",["T_WHITESPACE"," ",216],["T_STRING","TRUE",216],")",["T_WHITESPACE","\n\t",216],"{",["T_WHITESPACE","\n\t\t",217],["T_COMMENT","\/\/ If zlib.output_compression is enabled it will compress the output,\n",218],["T_WHITESPACE","\t\t",219],["T_COMMENT","\/\/ but it will not modify the content-length header to compensate for\n",219],["T_WHITESPACE","\t\t",220],["T_COMMENT","\/\/ the reduction, causing the browser to hang waiting for more data.\n",220],["T_WHITESPACE","\t\t",221],["T_COMMENT","\/\/ We'll just skip content-length in those cases.\n",221],["T_WHITESPACE","\t\t",222],["T_IF","if",222],["T_WHITESPACE"," ",222],"(",["T_VARIABLE","$this",222],["T_OBJECT_OPERATOR","->",222],["T_STRING","_zlib_oc",222],["T_WHITESPACE"," ",222],["T_BOOLEAN_AND","&&",222],["T_WHITESPACE"," ",222],["T_STRING","strncasecmp",222],"(",["T_VARIABLE","$header",222],",",["T_WHITESPACE"," ",222],["T_CONSTANT_ENCAPSED_STRING","'content-length'",222],",",["T_WHITESPACE"," ",222],["T_LNUMBER","14",222],")",["T_WHITESPACE"," ",222],["T_IS_IDENTICAL","===",222],["T_WHITESPACE"," ",222],["T_LNUMBER","0",222],")",["T_WHITESPACE","\n\t\t",222],"{",["T_WHITESPACE","\n\t\t\t",223],["T_RETURN","return",224],["T_WHITESPACE"," ",224],["T_VARIABLE","$this",224],";",["T_WHITESPACE","\n\t\t",224],"}",["T_WHITESPACE","\n\n\t\t",225],["T_VARIABLE","$this",227],["T_OBJECT_OPERATOR","->",227],["T_STRING","headers",227],"[","]",["T_WHITESPACE"," ",227],"=",["T_WHITESPACE"," ",227],["T_ARRAY","array",227],"(",["T_VARIABLE","$header",227],",",["T_WHITESPACE"," ",227],["T_VARIABLE","$replace",227],")",";",["T_WHITESPACE","\n\t\t",227],["T_RETURN","return",228],["T_WHITESPACE"," ",228],["T_VARIABLE","$this",228],";",["T_WHITESPACE","\n\t",228],"}",["T_WHITESPACE","\n\n\t",229],["T_COMMENT","\/\/ --------------------------------------------------------------------\n",231],["T_WHITESPACE","\n\t",232],["T_DOC_COMMENT","\/**\n\t * Set Content-Type Header\n\t *\n\t * @param\tstring\t$mime_type\tExtension of the file we're outputting\n\t * @param\tstring\t$charset\tCharacter set (default: NULL)\n\t * @return\tCI_Output\n\t *\/",233],["T_WHITESPACE","\n\t",239],["T_PUBLIC","public",240],["T_WHITESPACE"," ",240],["T_FUNCTION","function",240],["T_WHITESPACE"," ",240],["T_STRING","set_content_type",240],"(",["T_VARIABLE","$mime_type",240],",",["T_WHITESPACE"," ",240],["T_VARIABLE","$charset",240],["T_WHITESPACE"," ",240],"=",["T_WHITESPACE"," ",240],["T_STRING","NULL",240],")",["T_WHITESPACE","\n\t",240],"{",["T_WHITESPACE","\n\t\t",241],["T_IF","if",242],["T_WHITESPACE"," ",242],"(",["T_STRING","strpos",242],"(",["T_VARIABLE","$mime_type",242],",",["T_WHITESPACE"," ",242],["T_CONSTANT_ENCAPSED_STRING","'\/'",242],")",["T_WHITESPACE"," ",242],["T_IS_IDENTICAL","===",242],["T_WHITESPACE"," ",242],["T_STRING","FALSE",242],")",["T_WHITESPACE","\n\t\t",242],"{",["T_WHITESPACE","\n\t\t\t",243],["T_VARIABLE","$extension",244],["T_WHITESPACE"," ",244],"=",["T_WHITESPACE"," ",244],["T_STRING","ltrim",244],"(",["T_VARIABLE","$mime_type",244],",",["T_WHITESPACE"," ",244],["T_CONSTANT_ENCAPSED_STRING","'.'",244],")",";",["T_WHITESPACE","\n\n\t\t\t",244],["T_COMMENT","\/\/ Is this extension supported?\n",246],["T_WHITESPACE","\t\t\t",247],["T_IF","if",247],["T_WHITESPACE"," ",247],"(",["T_ISSET","isset",247],"(",["T_VARIABLE","$this",247],["T_OBJECT_OPERATOR","->",247],["T_STRING","mimes",247],"[",["T_VARIABLE","$extension",247],"]",")",")",["T_WHITESPACE","\n\t\t\t",247],"{",["T_WHITESPACE","\n\t\t\t\t",248],["T_VARIABLE","$mime_type",249],["T_WHITESPACE"," ",249],"=","&",["T_WHITESPACE"," ",249],["T_VARIABLE","$this",249],["T_OBJECT_OPERATOR","->",249],["T_STRING","mimes",249],"[",["T_VARIABLE","$extension",249],"]",";",["T_WHITESPACE","\n\n\t\t\t\t",249],["T_IF","if",251],["T_WHITESPACE"," ",251],"(",["T_STRING","is_array",251],"(",["T_VARIABLE","$mime_type",251],")",")",["T_WHITESPACE","\n\t\t\t\t",251],"{",["T_WHITESPACE","\n\t\t\t\t\t",252],["T_VARIABLE","$mime_type",253],["T_WHITESPACE"," ",253],"=",["T_WHITESPACE"," ",253],["T_STRING","current",253],"(",["T_VARIABLE","$mime_type",253],")",";",["T_WHITESPACE","\n\t\t\t\t",253],"}",["T_WHITESPACE","\n\t\t\t",254],"}",["T_WHITESPACE","\n\t\t",255],"}",["T_WHITESPACE","\n\n\t\t",256],["T_VARIABLE","$this",258],["T_OBJECT_OPERATOR","->",258],["T_STRING","mime_type",258],["T_WHITESPACE"," ",258],"=",["T_WHITESPACE"," ",258],["T_VARIABLE","$mime_type",258],";",["T_WHITESPACE","\n\n\t\t",258],["T_IF","if",260],["T_WHITESPACE"," ",260],"(",["T_EMPTY","empty",260],"(",["T_VARIABLE","$charset",260],")",")",["T_WHITESPACE","\n\t\t",260],"{",["T_WHITESPACE","\n\t\t\t",261],["T_VARIABLE","$charset",262],["T_WHITESPACE"," ",262],"=",["T_WHITESPACE"," ",262],["T_STRING","config_item",262],"(",["T_CONSTANT_ENCAPSED_STRING","'charset'",262],")",";",["T_WHITESPACE","\n\t\t",262],"}",["T_WHITESPACE","\n\n\t\t",263],["T_VARIABLE","$header",265],["T_WHITESPACE"," ",265],"=",["T_WHITESPACE"," ",265],["T_CONSTANT_ENCAPSED_STRING","'Content-Type: '",265],".",["T_VARIABLE","$mime_type",265],["T_WHITESPACE","\n\t\t\t",265],".","(",["T_EMPTY","empty",266],"(",["T_VARIABLE","$charset",266],")",["T_WHITESPACE"," ",266],"?",["T_WHITESPACE"," ",266],["T_CONSTANT_ENCAPSED_STRING","''",266],["T_WHITESPACE"," ",266],":",["T_WHITESPACE"," ",266],["T_CONSTANT_ENCAPSED_STRING","'; charset='",266],".",["T_VARIABLE","$charset",266],")",";",["T_WHITESPACE","\n\n\t\t",266],["T_VARIABLE","$this",268],["T_OBJECT_OPERATOR","->",268],["T_STRING","headers",268],"[","]",["T_WHITESPACE"," ",268],"=",["T_WHITESPACE"," ",268],["T_ARRAY","array",268],"(",["T_VARIABLE","$header",268],",",["T_WHITESPACE"," ",268],["T_STRING","TRUE",268],")",";",["T_WHITESPACE","\n\t\t",268],["T_RETURN","return",269],["T_WHITESPACE"," ",269],["T_VARIABLE","$this",269],";",["T_WHITESPACE","\n\t",269],"}",["T_WHITESPACE","\n\n\t",270],["T_COMMENT","\/\/ --------------------------------------------------------------------\n",272],["T_WHITESPACE","\n\t",273],["T_DOC_COMMENT","\/**\n\t * Get Current Content-Type Header\n\t *\n\t * @return\tstring\t'text\/html', if not already set\n\t *\/",274],["T_WHITESPACE","\n\t",278],["T_PUBLIC","public",279],["T_WHITESPACE"," ",279],["T_FUNCTION","function",279],["T_WHITESPACE"," ",279],["T_STRING","get_content_type",279],"(",")",["T_WHITESPACE","\n\t",279],"{",["T_WHITESPACE","\n\t\t",280],["T_FOR","for",281],["T_WHITESPACE"," ",281],"(",["T_VARIABLE","$i",281],["T_WHITESPACE"," ",281],"=",["T_WHITESPACE"," ",281],["T_LNUMBER","0",281],",",["T_WHITESPACE"," ",281],["T_VARIABLE","$c",281],["T_WHITESPACE"," ",281],"=",["T_WHITESPACE"," ",281],["T_STRING","count",281],"(",["T_VARIABLE","$this",281],["T_OBJECT_OPERATOR","->",281],["T_STRING","headers",281],")",";",["T_WHITESPACE"," ",281],["T_VARIABLE","$i",281],["T_WHITESPACE"," ",281],"<",["T_WHITESPACE"," ",281],["T_VARIABLE","$c",281],";",["T_WHITESPACE"," ",281],["T_VARIABLE","$i",281],["T_INC","++",281],")",["T_WHITESPACE","\n\t\t",281],"{",["T_WHITESPACE","\n\t\t\t",282],["T_IF","if",283],["T_WHITESPACE"," ",283],"(",["T_STRING","sscanf",283],"(",["T_VARIABLE","$this",283],["T_OBJECT_OPERATOR","->",283],["T_STRING","headers",283],"[",["T_VARIABLE","$i",283],"]","[",["T_LNUMBER","0",283],"]",",",["T_WHITESPACE"," ",283],["T_CONSTANT_ENCAPSED_STRING","'Content-Type: %[^;]'",283],",",["T_WHITESPACE"," ",283],["T_VARIABLE","$content_type",283],")",["T_WHITESPACE"," ",283],["T_IS_IDENTICAL","===",283],["T_WHITESPACE"," ",283],["T_LNUMBER","1",283],")",["T_WHITESPACE","\n\t\t\t",283],"{",["T_WHITESPACE","\n\t\t\t\t",284],["T_RETURN","return",285],["T_WHITESPACE"," ",285],["T_VARIABLE","$content_type",285],";",["T_WHITESPACE","\n\t\t\t",285],"}",["T_WHITESPACE","\n\t\t",286],"}",["T_WHITESPACE","\n\n\t\t",287],["T_RETURN","return",289],["T_WHITESPACE"," ",289],["T_CONSTANT_ENCAPSED_STRING","'text\/html'",289],";",["T_WHITESPACE","\n\t",289],"}",["T_WHITESPACE","\n\n\t",290],["T_COMMENT","\/\/ --------------------------------------------------------------------\n",292],["T_WHITESPACE","\n\t",293],["T_DOC_COMMENT","\/**\n\t * Get Header\n\t *\n\t * @param\tstring\t$header\n\t * @return\tstring\n\t *\/",294],["T_WHITESPACE","\n\t",299],["T_PUBLIC","public",300],["T_WHITESPACE"," ",300],["T_FUNCTION","function",300],["T_WHITESPACE"," ",300],["T_STRING","get_header",300],"(",["T_VARIABLE","$header",300],")",["T_WHITESPACE","\n\t",300],"{",["T_WHITESPACE","\n\t\t",301],["T_COMMENT","\/\/ Combine headers already sent with our batched headers\n",302],["T_WHITESPACE","\t\t",303],["T_VARIABLE","$headers",303],["T_WHITESPACE"," ",303],"=",["T_WHITESPACE"," ",303],["T_STRING","array_merge",303],"(",["T_WHITESPACE","\n\t\t\t",303],["T_COMMENT","\/\/ We only need [x][0] from our multi-dimensional array\n",304],["T_WHITESPACE","\t\t\t",305],["T_STRING","array_map",305],"(",["T_CONSTANT_ENCAPSED_STRING","'array_shift'",305],",",["T_WHITESPACE"," ",305],["T_VARIABLE","$this",305],["T_OBJECT_OPERATOR","->",305],["T_STRING","headers",305],")",",",["T_WHITESPACE","\n\t\t\t",305],["T_STRING","headers_list",306],"(",")",["T_WHITESPACE","\n\t\t",306],")",";",["T_WHITESPACE","\n\n\t\t",307],["T_IF","if",309],["T_WHITESPACE"," ",309],"(",["T_EMPTY","empty",309],"(",["T_VARIABLE","$headers",309],")",["T_WHITESPACE"," ",309],["T_LOGICAL_OR","OR",309],["T_WHITESPACE"," ",309],["T_EMPTY","empty",309],"(",["T_VARIABLE","$header",309],")",")",["T_WHITESPACE","\n\t\t",309],"{",["T_WHITESPACE","\n\t\t\t",310],["T_RETURN","return",311],["T_WHITESPACE"," ",311],["T_STRING","NULL",311],";",["T_WHITESPACE","\n\t\t",311],"}",["T_WHITESPACE","\n\n\t\t",312],["T_COMMENT","\/\/ Count backwards, in order to get the last matching header\n",314],["T_WHITESPACE","\t\t",315],["T_FOR","for",315],["T_WHITESPACE"," ",315],"(",["T_VARIABLE","$c",315],["T_WHITESPACE"," ",315],"=",["T_WHITESPACE"," ",315],["T_STRING","count",315],"(",["T_VARIABLE","$headers",315],")",["T_WHITESPACE"," ",315],"-",["T_WHITESPACE"," ",315],["T_LNUMBER","1",315],";",["T_WHITESPACE"," ",315],["T_VARIABLE","$c",315],["T_WHITESPACE"," ",315],">",["T_WHITESPACE"," ",315],"-",["T_LNUMBER","1",315],";",["T_WHITESPACE"," ",315],["T_VARIABLE","$c",315],["T_DEC","--",315],")",["T_WHITESPACE","\n\t\t",315],"{",["T_WHITESPACE","\n\t\t\t",316],["T_IF","if",317],["T_WHITESPACE"," ",317],"(",["T_STRING","strncasecmp",317],"(",["T_VARIABLE","$header",317],",",["T_WHITESPACE"," ",317],["T_VARIABLE","$headers",317],"[",["T_VARIABLE","$c",317],"]",",",["T_WHITESPACE"," ",317],["T_VARIABLE","$l",317],["T_WHITESPACE"," ",317],"=",["T_WHITESPACE"," ",317],["T_STRING","self",317],["T_DOUBLE_COLON","::",317],["T_STRING","strlen",317],"(",["T_VARIABLE","$header",317],")",")",["T_WHITESPACE"," ",317],["T_IS_IDENTICAL","===",317],["T_WHITESPACE"," ",317],["T_LNUMBER","0",317],")",["T_WHITESPACE","\n\t\t\t",317],"{",["T_WHITESPACE","\n\t\t\t\t",318],["T_RETURN","return",319],["T_WHITESPACE"," ",319],["T_STRING","trim",319],"(",["T_STRING","self",319],["T_DOUBLE_COLON","::",319],["T_STRING","substr",319],"(",["T_VARIABLE","$headers",319],"[",["T_VARIABLE","$c",319],"]",",",["T_WHITESPACE"," ",319],["T_VARIABLE","$l",319],"+",["T_LNUMBER","1",319],")",")",";",["T_WHITESPACE","\n\t\t\t",319],"}",["T_WHITESPACE","\n\t\t",320],"}",["T_WHITESPACE","\n\n\t\t",321],["T_RETURN","return",323],["T_WHITESPACE"," ",323],["T_STRING","NULL",323],";",["T_WHITESPACE","\n\t",323],"}",["T_WHITESPACE","\n\n\t",324],["T_COMMENT","\/\/ --------------------------------------------------------------------\n",326],["T_WHITESPACE","\n\t",327],["T_DOC_COMMENT","\/**\n\t * Set HTTP Status Header\n\t *\n\t * As of version 1.7.2, this is an alias for common function\n\t * set_status_header().\n\t *\n\t * @param\tint\t$code\tStatus code (default: 200)\n\t * @param\tstring\t$text\tOptional message\n\t * @return\tCI_Output\n\t *\/",328],["T_WHITESPACE","\n\t",337],["T_PUBLIC","public",338],["T_WHITESPACE"," ",338],["T_FUNCTION","function",338],["T_WHITESPACE"," ",338],["T_STRING","set_status_header",338],"(",["T_VARIABLE","$code",338],["T_WHITESPACE"," ",338],"=",["T_WHITESPACE"," ",338],["T_LNUMBER","200",338],",",["T_WHITESPACE"," ",338],["T_VARIABLE","$text",338],["T_WHITESPACE"," ",338],"=",["T_WHITESPACE"," ",338],["T_CONSTANT_ENCAPSED_STRING","''",338],")",["T_WHITESPACE","\n\t",338],"{",["T_WHITESPACE","\n\t\t",339],["T_STRING","set_status_header",340],"(",["T_VARIABLE","$code",340],",",["T_WHITESPACE"," ",340],["T_VARIABLE","$text",340],")",";",["T_WHITESPACE","\n\t\t",340],["T_RETURN","return",341],["T_WHITESPACE"," ",341],["T_VARIABLE","$this",341],";",["T_WHITESPACE","\n\t",341],"}",["T_WHITESPACE","\n\n\t",342],["T_COMMENT","\/\/ --------------------------------------------------------------------\n",344],["T_WHITESPACE","\n\t",345],["T_DOC_COMMENT","\/**\n\t * Enable\/disable Profiler\n\t *\n\t * @param\tbool\t$val\tTRUE to enable or FALSE to disable\n\t * @return\tCI_Output\n\t *\/",346],["T_WHITESPACE","\n\t",351],["T_PUBLIC","public",352],["T_WHITESPACE"," ",352],["T_FUNCTION","function",352],["T_WHITESPACE"," ",352],["T_STRING","enable_profiler",352],"(",["T_VARIABLE","$val",352],["T_WHITESPACE"," ",352],"=",["T_WHITESPACE"," ",352],["T_STRING","TRUE",352],")",["T_WHITESPACE","\n\t",352],"{",["T_WHITESPACE","\n\t\t",353],["T_VARIABLE","$this",354],["T_OBJECT_OPERATOR","->",354],["T_STRING","enable_profiler",354],["T_WHITESPACE"," ",354],"=",["T_WHITESPACE"," ",354],["T_STRING","is_bool",354],"(",["T_VARIABLE","$val",354],")",["T_WHITESPACE"," ",354],"?",["T_WHITESPACE"," ",354],["T_VARIABLE","$val",354],["T_WHITESPACE"," ",354],":",["T_WHITESPACE"," ",354],["T_STRING","TRUE",354],";",["T_WHITESPACE","\n\t\t",354],["T_RETURN","return",355],["T_WHITESPACE"," ",355],["T_VARIABLE","$this",355],";",["T_WHITESPACE","\n\t",355],"}",["T_WHITESPACE","\n\n\t",356],["T_COMMENT","\/\/ --------------------------------------------------------------------\n",358],["T_WHITESPACE","\n\t",359],["T_DOC_COMMENT","\/**\n\t * Set Profiler Sections\n\t *\n\t * Allows override of default\/config settings for\n\t * Profiler section display.\n\t *\n\t * @param\tarray\t$sections\tProfiler sections\n\t * @return\tCI_Output\n\t *\/",360],["T_WHITESPACE","\n\t",368],["T_PUBLIC","public",369],["T_WHITESPACE"," ",369],["T_FUNCTION","function",369],["T_WHITESPACE"," ",369],["T_STRING","set_profiler_sections",369],"(",["T_VARIABLE","$sections",369],")",["T_WHITESPACE","\n\t",369],"{",["T_WHITESPACE","\n\t\t",370],["T_IF","if",371],["T_WHITESPACE"," ",371],"(",["T_ISSET","isset",371],"(",["T_VARIABLE","$sections",371],"[",["T_CONSTANT_ENCAPSED_STRING","'query_toggle_count'",371],"]",")",")",["T_WHITESPACE","\n\t\t",371],"{",["T_WHITESPACE","\n\t\t\t",372],["T_VARIABLE","$this",373],["T_OBJECT_OPERATOR","->",373],["T_STRING","_profiler_sections",373],"[",["T_CONSTANT_ENCAPSED_STRING","'query_toggle_count'",373],"]",["T_WHITESPACE"," ",373],"=",["T_WHITESPACE"," ",373],["T_INT_CAST","(int)",373],["T_WHITESPACE"," ",373],["T_VARIABLE","$sections",373],"[",["T_CONSTANT_ENCAPSED_STRING","'query_toggle_count'",373],"]",";",["T_WHITESPACE","\n\t\t\t",373],["T_UNSET","unset",374],"(",["T_VARIABLE","$sections",374],"[",["T_CONSTANT_ENCAPSED_STRING","'query_toggle_count'",374],"]",")",";",["T_WHITESPACE","\n\t\t",374],"}",["T_WHITESPACE","\n\n\t\t",375],["T_FOREACH","foreach",377],["T_WHITESPACE"," ",377],"(",["T_VARIABLE","$sections",377],["T_WHITESPACE"," ",377],["T_AS","as",377],["T_WHITESPACE"," ",377],["T_VARIABLE","$section",377],["T_WHITESPACE"," ",377],["T_DOUBLE_ARROW","=>",377],["T_WHITESPACE"," ",377],["T_VARIABLE","$enable",377],")",["T_WHITESPACE","\n\t\t",377],"{",["T_WHITESPACE","\n\t\t\t",378],["T_VARIABLE","$this",379],["T_OBJECT_OPERATOR","->",379],["T_STRING","_profiler_sections",379],"[",["T_VARIABLE","$section",379],"]",["T_WHITESPACE"," ",379],"=",["T_WHITESPACE"," ",379],"(",["T_VARIABLE","$enable",379],["T_WHITESPACE"," ",379],["T_IS_NOT_IDENTICAL","!==",379],["T_WHITESPACE"," ",379],["T_STRING","FALSE",379],")",";",["T_WHITESPACE","\n\t\t",379],"}",["T_WHITESPACE","\n\n\t\t",380],["T_RETURN","return",382],["T_WHITESPACE"," ",382],["T_VARIABLE","$this",382],";",["T_WHITESPACE","\n\t",382],"}",["T_WHITESPACE","\n\n\t",383],["T_COMMENT","\/\/ --------------------------------------------------------------------\n",385],["T_WHITESPACE","\n\t",386],["T_DOC_COMMENT","\/**\n\t * Set Cache\n\t *\n\t * @param\tint\t$time\tCache expiration time in minutes\n\t * @return\tCI_Output\n\t *\/",387],["T_WHITESPACE","\n\t",392],["T_PUBLIC","public",393],["T_WHITESPACE"," ",393],["T_FUNCTION","function",393],["T_WHITESPACE"," ",393],["T_STRING","cache",393],"(",["T_VARIABLE","$time",393],")",["T_WHITESPACE","\n\t",393],"{",["T_WHITESPACE","\n\t\t",394],["T_VARIABLE","$this",395],["T_OBJECT_OPERATOR","->",395],["T_STRING","cache_expiration",395],["T_WHITESPACE"," ",395],"=",["T_WHITESPACE"," ",395],["T_STRING","is_numeric",395],"(",["T_VARIABLE","$time",395],")",["T_WHITESPACE"," ",395],"?",["T_WHITESPACE"," ",395],["T_VARIABLE","$time",395],["T_WHITESPACE"," ",395],":",["T_WHITESPACE"," ",395],["T_LNUMBER","0",395],";",["T_WHITESPACE","\n\t\t",395],["T_RETURN","return",396],["T_WHITESPACE"," ",396],["T_VARIABLE","$this",396],";",["T_WHITESPACE","\n\t",396],"}",["T_WHITESPACE","\n\n\t",397],["T_COMMENT","\/\/ --------------------------------------------------------------------\n",399],["T_WHITESPACE","\n\t",400],["T_DOC_COMMENT","\/**\n\t * Display Output\n\t *\n\t * Processes and sends finalized output data to the browser along\n\t * with any server headers and profile data. It also stops benchmark\n\t * timers so the page rendering speed and memory usage can be shown.\n\t *\n\t * Note: All \"view\" data is automatically put into $this->final_output\n\t *\t by controller class.\n\t *\n\t * @uses\tCI_Output::$final_output\n\t * @param\tstring\t$output\tOutput data override\n\t * @return\tvoid\n\t *\/",401],["T_WHITESPACE","\n\t",414],["T_PUBLIC","public",415],["T_WHITESPACE"," ",415],["T_FUNCTION","function",415],["T_WHITESPACE"," ",415],["T_STRING","_display",415],"(",["T_VARIABLE","$output",415],["T_WHITESPACE"," ",415],"=",["T_WHITESPACE"," ",415],["T_CONSTANT_ENCAPSED_STRING","''",415],")",["T_WHITESPACE","\n\t",415],"{",["T_WHITESPACE","\n\t\t",416],["T_COMMENT","\/\/ Note:  We use load_class() because we can't use $CI =& get_instance()\n",417],["T_WHITESPACE","\t\t",418],["T_COMMENT","\/\/ since this function is sometimes called by the caching mechanism,\n",418],["T_WHITESPACE","\t\t",419],["T_COMMENT","\/\/ which happens before the CI super object is available.\n",419],["T_WHITESPACE","\t\t",420],["T_VARIABLE","$BM",420],["T_WHITESPACE"," ",420],"=","&",["T_WHITESPACE"," ",420],["T_STRING","load_class",420],"(",["T_CONSTANT_ENCAPSED_STRING","'Benchmark'",420],",",["T_WHITESPACE"," ",420],["T_CONSTANT_ENCAPSED_STRING","'core'",420],")",";",["T_WHITESPACE","\n\t\t",420],["T_VARIABLE","$CFG",421],["T_WHITESPACE"," ",421],"=","&",["T_WHITESPACE"," ",421],["T_STRING","load_class",421],"(",["T_CONSTANT_ENCAPSED_STRING","'Config'",421],",",["T_WHITESPACE"," ",421],["T_CONSTANT_ENCAPSED_STRING","'core'",421],")",";",["T_WHITESPACE","\n\n\t\t",421],["T_COMMENT","\/\/ Grab the super object if we can.\n",423],["T_WHITESPACE","\t\t",424],["T_IF","if",424],["T_WHITESPACE"," ",424],"(",["T_STRING","class_exists",424],"(",["T_CONSTANT_ENCAPSED_STRING","'CI_Controller'",424],",",["T_WHITESPACE"," ",424],["T_STRING","FALSE",424],")",")",["T_WHITESPACE","\n\t\t",424],"{",["T_WHITESPACE","\n\t\t\t",425],["T_VARIABLE","$CI",426],["T_WHITESPACE"," ",426],"=","&",["T_WHITESPACE"," ",426],["T_STRING","get_instance",426],"(",")",";",["T_WHITESPACE","\n\t\t",426],"}",["T_WHITESPACE","\n\n\t\t",427],["T_COMMENT","\/\/ --------------------------------------------------------------------\n",429],["T_WHITESPACE","\n\t\t",430],["T_COMMENT","\/\/ Set the output data\n",431],["T_WHITESPACE","\t\t",432],["T_IF","if",432],["T_WHITESPACE"," ",432],"(",["T_VARIABLE","$output",432],["T_WHITESPACE"," ",432],["T_IS_IDENTICAL","===",432],["T_WHITESPACE"," ",432],["T_CONSTANT_ENCAPSED_STRING","''",432],")",["T_WHITESPACE","\n\t\t",432],"{",["T_WHITESPACE","\n\t\t\t",433],["T_VARIABLE","$output",434],["T_WHITESPACE"," ",434],"=","&",["T_WHITESPACE"," ",434],["T_VARIABLE","$this",434],["T_OBJECT_OPERATOR","->",434],["T_STRING","final_output",434],";",["T_WHITESPACE","\n\t\t",434],"}",["T_WHITESPACE","\n\n\t\t",435],["T_COMMENT","\/\/ --------------------------------------------------------------------\n",437],["T_WHITESPACE","\n\t\t",438],["T_COMMENT","\/\/ Do we need to write a cache file? Only if the controller does not have its\n",439],["T_WHITESPACE","\t\t",440],["T_COMMENT","\/\/ own _output() method and we are not dealing with a cache file, which we\n",440],["T_WHITESPACE","\t\t",441],["T_COMMENT","\/\/ can determine by the existence of the $CI object above\n",441],["T_WHITESPACE","\t\t",442],["T_IF","if",442],["T_WHITESPACE"," ",442],"(",["T_VARIABLE","$this",442],["T_OBJECT_OPERATOR","->",442],["T_STRING","cache_expiration",442],["T_WHITESPACE"," ",442],">",["T_WHITESPACE"," ",442],["T_LNUMBER","0",442],["T_WHITESPACE"," ",442],["T_BOOLEAN_AND","&&",442],["T_WHITESPACE"," ",442],["T_ISSET","isset",442],"(",["T_VARIABLE","$CI",442],")",["T_WHITESPACE"," ",442],["T_BOOLEAN_AND","&&",442],["T_WHITESPACE"," ",442],"!",["T_WHITESPACE"," ",442],["T_STRING","method_exists",442],"(",["T_VARIABLE","$CI",442],",",["T_WHITESPACE"," ",442],["T_CONSTANT_ENCAPSED_STRING","'_output'",442],")",")",["T_WHITESPACE","\n\t\t",442],"{",["T_WHITESPACE","\n\t\t\t",443],["T_VARIABLE","$this",444],["T_OBJECT_OPERATOR","->",444],["T_STRING","_write_cache",444],"(",["T_VARIABLE","$output",444],")",";",["T_WHITESPACE","\n\t\t",444],"}",["T_WHITESPACE","\n\n\t\t",445],["T_COMMENT","\/\/ --------------------------------------------------------------------\n",447],["T_WHITESPACE","\n\t\t",448],["T_COMMENT","\/\/ Parse out the elapsed time and memory usage,\n",449],["T_WHITESPACE","\t\t",450],["T_COMMENT","\/\/ then swap the pseudo-variables with the data\n",450],["T_WHITESPACE","\n\t\t",451],["T_VARIABLE","$elapsed",452],["T_WHITESPACE"," ",452],"=",["T_WHITESPACE"," ",452],["T_VARIABLE","$BM",452],["T_OBJECT_OPERATOR","->",452],["T_STRING","elapsed_time",452],"(",["T_CONSTANT_ENCAPSED_STRING","'total_execution_time_start'",452],",",["T_WHITESPACE"," ",452],["T_CONSTANT_ENCAPSED_STRING","'total_execution_time_end'",452],")",";",["T_WHITESPACE","\n\n\t\t",452],["T_IF","if",454],["T_WHITESPACE"," ",454],"(",["T_VARIABLE","$this",454],["T_OBJECT_OPERATOR","->",454],["T_STRING","parse_exec_vars",454],["T_WHITESPACE"," ",454],["T_IS_IDENTICAL","===",454],["T_WHITESPACE"," ",454],["T_STRING","TRUE",454],")",["T_WHITESPACE","\n\t\t",454],"{",["T_WHITESPACE","\n\t\t\t",455],["T_VARIABLE","$memory",456],["T_WHITESPACE","\t",456],"=",["T_WHITESPACE"," ",456],["T_STRING","round",456],"(",["T_STRING","memory_get_usage",456],"(",")",["T_WHITESPACE"," ",456],"\/",["T_WHITESPACE"," ",456],["T_LNUMBER","1024",456],["T_WHITESPACE"," ",456],"\/",["T_WHITESPACE"," ",456],["T_LNUMBER","1024",456],",",["T_WHITESPACE"," ",456],["T_LNUMBER","2",456],")",".",["T_CONSTANT_ENCAPSED_STRING","'MB'",456],";",["T_WHITESPACE","\n\t\t\t",456],["T_VARIABLE","$output",457],["T_WHITESPACE"," ",457],"=",["T_WHITESPACE"," ",457],["T_STRING","str_replace",457],"(",["T_ARRAY","array",457],"(",["T_CONSTANT_ENCAPSED_STRING","'{elapsed_time}'",457],",",["T_WHITESPACE"," ",457],["T_CONSTANT_ENCAPSED_STRING","'{memory_usage}'",457],")",",",["T_WHITESPACE"," ",457],["T_ARRAY","array",457],"(",["T_VARIABLE","$elapsed",457],",",["T_WHITESPACE"," ",457],["T_VARIABLE","$memory",457],")",",",["T_WHITESPACE"," ",457],["T_VARIABLE","$output",457],")",";",["T_WHITESPACE","\n\t\t",457],"}",["T_WHITESPACE","\n\n\t\t",458],["T_COMMENT","\/\/ --------------------------------------------------------------------\n",460],["T_WHITESPACE","\n\t\t",461],["T_COMMENT","\/\/ Is compression requested?\n",462],["T_WHITESPACE","\t\t",463],["T_IF","if",463],["T_WHITESPACE"," ",463],"(",["T_ISSET","isset",463],"(",["T_VARIABLE","$CI",463],")",["T_WHITESPACE"," ",463],["T_COMMENT","\/\/ This means that we're not serving a cache file, if we were, it would already be compressed\n",463],["T_WHITESPACE","\t\t\t",464],["T_BOOLEAN_AND","&&",464],["T_WHITESPACE"," ",464],["T_VARIABLE","$this",464],["T_OBJECT_OPERATOR","->",464],["T_STRING","_compress_output",464],["T_WHITESPACE"," ",464],["T_IS_IDENTICAL","===",464],["T_WHITESPACE"," ",464],["T_STRING","TRUE",464],["T_WHITESPACE","\n\t\t\t",464],["T_BOOLEAN_AND","&&",465],["T_WHITESPACE"," ",465],["T_ISSET","isset",465],"(",["T_VARIABLE","$_SERVER",465],"[",["T_CONSTANT_ENCAPSED_STRING","'HTTP_ACCEPT_ENCODING'",465],"]",")",["T_WHITESPACE"," ",465],["T_BOOLEAN_AND","&&",465],["T_WHITESPACE"," ",465],["T_STRING","strpos",465],"(",["T_VARIABLE","$_SERVER",465],"[",["T_CONSTANT_ENCAPSED_STRING","'HTTP_ACCEPT_ENCODING'",465],"]",",",["T_WHITESPACE"," ",465],["T_CONSTANT_ENCAPSED_STRING","'gzip'",465],")",["T_WHITESPACE"," ",465],["T_IS_NOT_IDENTICAL","!==",465],["T_WHITESPACE"," ",465],["T_STRING","FALSE",465],")",["T_WHITESPACE","\n\t\t",465],"{",["T_WHITESPACE","\n\t\t\t",466],["T_STRING","ob_start",467],"(",["T_CONSTANT_ENCAPSED_STRING","'ob_gzhandler'",467],")",";",["T_WHITESPACE","\n\t\t",467],"}",["T_WHITESPACE","\n\n\t\t",468],["T_COMMENT","\/\/ --------------------------------------------------------------------\n",470],["T_WHITESPACE","\n\t\t",471],["T_COMMENT","\/\/ Are there any server headers to send?\n",472],["T_WHITESPACE","\t\t",473],["T_IF","if",473],["T_WHITESPACE"," ",473],"(",["T_STRING","count",473],"(",["T_VARIABLE","$this",473],["T_OBJECT_OPERATOR","->",473],["T_STRING","headers",473],")",["T_WHITESPACE"," ",473],">",["T_WHITESPACE"," ",473],["T_LNUMBER","0",473],")",["T_WHITESPACE","\n\t\t",473],"{",["T_WHITESPACE","\n\t\t\t",474],["T_FOREACH","foreach",475],["T_WHITESPACE"," ",475],"(",["T_VARIABLE","$this",475],["T_OBJECT_OPERATOR","->",475],["T_STRING","headers",475],["T_WHITESPACE"," ",475],["T_AS","as",475],["T_WHITESPACE"," ",475],["T_VARIABLE","$header",475],")",["T_WHITESPACE","\n\t\t\t",475],"{",["T_WHITESPACE","\n\t\t\t\t",476],"@",["T_STRING","header",477],"(",["T_VARIABLE","$header",477],"[",["T_LNUMBER","0",477],"]",",",["T_WHITESPACE"," ",477],["T_VARIABLE","$header",477],"[",["T_LNUMBER","1",477],"]",")",";",["T_WHITESPACE","\n\t\t\t",477],"}",["T_WHITESPACE","\n\t\t",478],"}",["T_WHITESPACE","\n\n\t\t",479],["T_COMMENT","\/\/ --------------------------------------------------------------------\n",481],["T_WHITESPACE","\n\t\t",482],["T_COMMENT","\/\/ Does the $CI object exist?\n",483],["T_WHITESPACE","\t\t",484],["T_COMMENT","\/\/ If not we know we are dealing with a cache file so we'll\n",484],["T_WHITESPACE","\t\t",485],["T_COMMENT","\/\/ simply echo out the data and exit.\n",485],["T_WHITESPACE","\t\t",486],["T_IF","if",486],["T_WHITESPACE"," ",486],"(",["T_WHITESPACE"," ",486],"!",["T_WHITESPACE"," ",486],["T_ISSET","isset",486],"(",["T_VARIABLE","$CI",486],")",")",["T_WHITESPACE","\n\t\t",486],"{",["T_WHITESPACE","\n\t\t\t",487],["T_IF","if",488],["T_WHITESPACE"," ",488],"(",["T_VARIABLE","$this",488],["T_OBJECT_OPERATOR","->",488],["T_STRING","_compress_output",488],["T_WHITESPACE"," ",488],["T_IS_IDENTICAL","===",488],["T_WHITESPACE"," ",488],["T_STRING","TRUE",488],")",["T_WHITESPACE","\n\t\t\t",488],"{",["T_WHITESPACE","\n\t\t\t\t",489],["T_IF","if",490],["T_WHITESPACE"," ",490],"(",["T_ISSET","isset",490],"(",["T_VARIABLE","$_SERVER",490],"[",["T_CONSTANT_ENCAPSED_STRING","'HTTP_ACCEPT_ENCODING'",490],"]",")",["T_WHITESPACE"," ",490],["T_BOOLEAN_AND","&&",490],["T_WHITESPACE"," ",490],["T_STRING","strpos",490],"(",["T_VARIABLE","$_SERVER",490],"[",["T_CONSTANT_ENCAPSED_STRING","'HTTP_ACCEPT_ENCODING'",490],"]",",",["T_WHITESPACE"," ",490],["T_CONSTANT_ENCAPSED_STRING","'gzip'",490],")",["T_WHITESPACE"," ",490],["T_IS_NOT_IDENTICAL","!==",490],["T_WHITESPACE"," ",490],["T_STRING","FALSE",490],")",["T_WHITESPACE","\n\t\t\t\t",490],"{",["T_WHITESPACE","\n\t\t\t\t\t",491],["T_STRING","header",492],"(",["T_CONSTANT_ENCAPSED_STRING","'Content-Encoding: gzip'",492],")",";",["T_WHITESPACE","\n\t\t\t\t\t",492],["T_STRING","header",493],"(",["T_CONSTANT_ENCAPSED_STRING","'Content-Length: '",493],".",["T_STRING","self",493],["T_DOUBLE_COLON","::",493],["T_STRING","strlen",493],"(",["T_VARIABLE","$output",493],")",")",";",["T_WHITESPACE","\n\t\t\t\t",493],"}",["T_WHITESPACE","\n\t\t\t\t",494],["T_ELSE","else",495],["T_WHITESPACE","\n\t\t\t\t",495],"{",["T_WHITESPACE","\n\t\t\t\t\t",496],["T_COMMENT","\/\/ User agent doesn't support gzip compression,\n",497],["T_WHITESPACE","\t\t\t\t\t",498],["T_COMMENT","\/\/ so we'll have to decompress our cache\n",498],["T_WHITESPACE","\t\t\t\t\t",499],["T_VARIABLE","$output",499],["T_WHITESPACE"," ",499],"=",["T_WHITESPACE"," ",499],["T_STRING","gzinflate",499],"(",["T_STRING","self",499],["T_DOUBLE_COLON","::",499],["T_STRING","substr",499],"(",["T_VARIABLE","$output",499],",",["T_WHITESPACE"," ",499],["T_LNUMBER","10",499],",",["T_WHITESPACE"," ",499],"-",["T_LNUMBER","8",499],")",")",";",["T_WHITESPACE","\n\t\t\t\t",499],"}",["T_WHITESPACE","\n\t\t\t",500],"}",["T_WHITESPACE","\n\n\t\t\t",501],["T_ECHO","echo",503],["T_WHITESPACE"," ",503],["T_VARIABLE","$output",503],";",["T_WHITESPACE","\n\t\t\t",503],["T_STRING","log_message",504],"(",["T_CONSTANT_ENCAPSED_STRING","'info'",504],",",["T_WHITESPACE"," ",504],["T_CONSTANT_ENCAPSED_STRING","'Final output sent to browser'",504],")",";",["T_WHITESPACE","\n\t\t\t",504],["T_STRING","log_message",505],"(",["T_CONSTANT_ENCAPSED_STRING","'info'",505],",",["T_WHITESPACE"," ",505],["T_CONSTANT_ENCAPSED_STRING","'Total execution time: '",505],".",["T_VARIABLE","$elapsed",505],")",";",["T_WHITESPACE","\n\t\t\t",505],["T_RETURN","return",506],";",["T_WHITESPACE","\n\t\t",506],"}",["T_WHITESPACE","\n\n\t\t",507],["T_COMMENT","\/\/ --------------------------------------------------------------------\n",509],["T_WHITESPACE","\n\t\t",510],["T_COMMENT","\/\/ Do we need to generate profile data?\n",511],["T_WHITESPACE","\t\t",512],["T_COMMENT","\/\/ If so, load the Profile class and run it.\n",512],["T_WHITESPACE","\t\t",513],["T_IF","if",513],["T_WHITESPACE"," ",513],"(",["T_VARIABLE","$this",513],["T_OBJECT_OPERATOR","->",513],["T_STRING","enable_profiler",513],["T_WHITESPACE"," ",513],["T_IS_IDENTICAL","===",513],["T_WHITESPACE"," ",513],["T_STRING","TRUE",513],")",["T_WHITESPACE","\n\t\t",513],"{",["T_WHITESPACE","\n\t\t\t",514],["T_VARIABLE","$CI",515],["T_OBJECT_OPERATOR","->",515],["T_STRING","load",515],["T_OBJECT_OPERATOR","->",515],["T_STRING","library",515],"(",["T_CONSTANT_ENCAPSED_STRING","'profiler'",515],")",";",["T_WHITESPACE","\n\t\t\t",515],["T_IF","if",516],["T_WHITESPACE"," ",516],"(",["T_WHITESPACE"," ",516],"!",["T_WHITESPACE"," ",516],["T_EMPTY","empty",516],"(",["T_VARIABLE","$this",516],["T_OBJECT_OPERATOR","->",516],["T_STRING","_profiler_sections",516],")",")",["T_WHITESPACE","\n\t\t\t",516],"{",["T_WHITESPACE","\n\t\t\t\t",517],["T_VARIABLE","$CI",518],["T_OBJECT_OPERATOR","->",518],["T_STRING","profiler",518],["T_OBJECT_OPERATOR","->",518],["T_STRING","set_sections",518],"(",["T_VARIABLE","$this",518],["T_OBJECT_OPERATOR","->",518],["T_STRING","_profiler_sections",518],")",";",["T_WHITESPACE","\n\t\t\t",518],"}",["T_WHITESPACE","\n\n\t\t\t",519],["T_COMMENT","\/\/ If the output data contains closing <\/body> and <\/html> tags\n",521],["T_WHITESPACE","\t\t\t",522],["T_COMMENT","\/\/ we will remove them and add them back after we insert the profile data\n",522],["T_WHITESPACE","\t\t\t",523],["T_VARIABLE","$output",523],["T_WHITESPACE"," ",523],"=",["T_WHITESPACE"," ",523],["T_STRING","preg_replace",523],"(",["T_CONSTANT_ENCAPSED_STRING","'|<\/body>.*?<\/html>|is'",523],",",["T_WHITESPACE"," ",523],["T_CONSTANT_ENCAPSED_STRING","''",523],",",["T_WHITESPACE"," ",523],["T_VARIABLE","$output",523],",",["T_WHITESPACE"," ",523],"-",["T_LNUMBER","1",523],",",["T_WHITESPACE"," ",523],["T_VARIABLE","$count",523],")",".",["T_VARIABLE","$CI",523],["T_OBJECT_OPERATOR","->",523],["T_STRING","profiler",523],["T_OBJECT_OPERATOR","->",523],["T_STRING","run",523],"(",")",";",["T_WHITESPACE","\n\t\t\t",523],["T_IF","if",524],["T_WHITESPACE"," ",524],"(",["T_VARIABLE","$count",524],["T_WHITESPACE"," ",524],">",["T_WHITESPACE"," ",524],["T_LNUMBER","0",524],")",["T_WHITESPACE","\n\t\t\t",524],"{",["T_WHITESPACE","\n\t\t\t\t",525],["T_VARIABLE","$output",526],["T_WHITESPACE"," ",526],["T_CONCAT_EQUAL",".=",526],["T_WHITESPACE"," ",526],["T_CONSTANT_ENCAPSED_STRING","'<\/body><\/html>'",526],";",["T_WHITESPACE","\n\t\t\t",526],"}",["T_WHITESPACE","\n\t\t",527],"}",["T_WHITESPACE","\n\n\t\t",528],["T_COMMENT","\/\/ Does the controller contain a function named _output()?\n",530],["T_WHITESPACE","\t\t",531],["T_COMMENT","\/\/ If so send the output there.  Otherwise, echo it.\n",531],["T_WHITESPACE","\t\t",532],["T_IF","if",532],["T_WHITESPACE"," ",532],"(",["T_STRING","method_exists",532],"(",["T_VARIABLE","$CI",532],",",["T_WHITESPACE"," ",532],["T_CONSTANT_ENCAPSED_STRING","'_output'",532],")",")",["T_WHITESPACE","\n\t\t",532],"{",["T_WHITESPACE","\n\t\t\t",533],["T_VARIABLE","$CI",534],["T_OBJECT_OPERATOR","->",534],["T_STRING","_output",534],"(",["T_VARIABLE","$output",534],")",";",["T_WHITESPACE","\n\t\t",534],"}",["T_WHITESPACE","\n\t\t",535],["T_ELSE","else",536],["T_WHITESPACE","\n\t\t",536],"{",["T_WHITESPACE","\n\t\t\t",537],["T_ECHO","echo",538],["T_WHITESPACE"," ",538],["T_VARIABLE","$output",538],";",["T_WHITESPACE"," ",538],["T_COMMENT","\/\/ Send it to the browser!\n",538],["T_WHITESPACE","\t\t",539],"}",["T_WHITESPACE","\n\n\t\t",539],["T_STRING","log_message",541],"(",["T_CONSTANT_ENCAPSED_STRING","'info'",541],",",["T_WHITESPACE"," ",541],["T_CONSTANT_ENCAPSED_STRING","'Final output sent to browser'",541],")",";",["T_WHITESPACE","\n\t\t",541],["T_STRING","log_message",542],"(",["T_CONSTANT_ENCAPSED_STRING","'info'",542],",",["T_WHITESPACE"," ",542],["T_CONSTANT_ENCAPSED_STRING","'Total execution time: '",542],".",["T_VARIABLE","$elapsed",542],")",";",["T_WHITESPACE","\n\t",542],"}",["T_WHITESPACE","\n\n\t",543],["T_COMMENT","\/\/ --------------------------------------------------------------------\n",545],["T_WHITESPACE","\n\t",546],["T_DOC_COMMENT","\/**\n\t * Write Cache\n\t *\n\t * @param\tstring\t$output\tOutput data to cache\n\t * @return\tvoid\n\t *\/",547],["T_WHITESPACE","\n\t",552],["T_PUBLIC","public",553],["T_WHITESPACE"," ",553],["T_FUNCTION","function",553],["T_WHITESPACE"," ",553],["T_STRING","_write_cache",553],"(",["T_VARIABLE","$output",553],")",["T_WHITESPACE","\n\t",553],"{",["T_WHITESPACE","\n\t\t",554],["T_VARIABLE","$CI",555],["T_WHITESPACE"," ",555],"=","&",["T_WHITESPACE"," ",555],["T_STRING","get_instance",555],"(",")",";",["T_WHITESPACE","\n\t\t",555],["T_VARIABLE","$path",556],["T_WHITESPACE"," ",556],"=",["T_WHITESPACE"," ",556],["T_VARIABLE","$CI",556],["T_OBJECT_OPERATOR","->",556],["T_STRING","config",556],["T_OBJECT_OPERATOR","->",556],["T_STRING","item",556],"(",["T_CONSTANT_ENCAPSED_STRING","'cache_path'",556],")",";",["T_WHITESPACE","\n\t\t",556],["T_VARIABLE","$cache_path",557],["T_WHITESPACE"," ",557],"=",["T_WHITESPACE"," ",557],"(",["T_VARIABLE","$path",557],["T_WHITESPACE"," ",557],["T_IS_IDENTICAL","===",557],["T_WHITESPACE"," ",557],["T_CONSTANT_ENCAPSED_STRING","''",557],")",["T_WHITESPACE"," ",557],"?",["T_WHITESPACE"," ",557],["T_STRING","APPPATH",557],".",["T_CONSTANT_ENCAPSED_STRING","'cache\/'",557],["T_WHITESPACE"," ",557],":",["T_WHITESPACE"," ",557],["T_VARIABLE","$path",557],";",["T_WHITESPACE","\n\n\t\t",557],["T_IF","if",559],["T_WHITESPACE"," ",559],"(",["T_WHITESPACE"," ",559],"!",["T_WHITESPACE"," ",559],["T_STRING","is_dir",559],"(",["T_VARIABLE","$cache_path",559],")",["T_WHITESPACE"," ",559],["T_LOGICAL_OR","OR",559],["T_WHITESPACE"," ",559],"!",["T_WHITESPACE"," ",559],["T_STRING","is_really_writable",559],"(",["T_VARIABLE","$cache_path",559],")",")",["T_WHITESPACE","\n\t\t",559],"{",["T_WHITESPACE","\n\t\t\t",560],["T_STRING","log_message",561],"(",["T_CONSTANT_ENCAPSED_STRING","'error'",561],",",["T_WHITESPACE"," ",561],["T_CONSTANT_ENCAPSED_STRING","'Unable to write cache file: '",561],".",["T_VARIABLE","$cache_path",561],")",";",["T_WHITESPACE","\n\t\t\t",561],["T_RETURN","return",562],";",["T_WHITESPACE","\n\t\t",562],"}",["T_WHITESPACE","\n\n\t\t",563],["T_VARIABLE","$uri",565],["T_WHITESPACE"," ",565],"=",["T_WHITESPACE"," ",565],["T_VARIABLE","$CI",565],["T_OBJECT_OPERATOR","->",565],["T_STRING","config",565],["T_OBJECT_OPERATOR","->",565],["T_STRING","item",565],"(",["T_CONSTANT_ENCAPSED_STRING","'base_url'",565],")",["T_WHITESPACE","\n\t\t\t",565],".",["T_VARIABLE","$CI",566],["T_OBJECT_OPERATOR","->",566],["T_STRING","config",566],["T_OBJECT_OPERATOR","->",566],["T_STRING","item",566],"(",["T_CONSTANT_ENCAPSED_STRING","'index_page'",566],")",["T_WHITESPACE","\n\t\t\t",566],".",["T_VARIABLE","$CI",567],["T_OBJECT_OPERATOR","->",567],["T_STRING","uri",567],["T_OBJECT_OPERATOR","->",567],["T_STRING","uri_string",567],"(",")",";",["T_WHITESPACE","\n\n\t\t",567],["T_IF","if",569],["T_WHITESPACE"," ",569],"(","(",["T_VARIABLE","$cache_query_string",569],["T_WHITESPACE"," ",569],"=",["T_WHITESPACE"," ",569],["T_VARIABLE","$CI",569],["T_OBJECT_OPERATOR","->",569],["T_STRING","config",569],["T_OBJECT_OPERATOR","->",569],["T_STRING","item",569],"(",["T_CONSTANT_ENCAPSED_STRING","'cache_query_string'",569],")",")",["T_WHITESPACE"," ",569],["T_BOOLEAN_AND","&&",569],["T_WHITESPACE"," ",569],"!",["T_WHITESPACE"," ",569],["T_EMPTY","empty",569],"(",["T_VARIABLE","$_SERVER",569],"[",["T_CONSTANT_ENCAPSED_STRING","'QUERY_STRING'",569],"]",")",")",["T_WHITESPACE","\n\t\t",569],"{",["T_WHITESPACE","\n\t\t\t",570],["T_IF","if",571],["T_WHITESPACE"," ",571],"(",["T_STRING","is_array",571],"(",["T_VARIABLE","$cache_query_string",571],")",")",["T_WHITESPACE","\n\t\t\t",571],"{",["T_WHITESPACE","\n\t\t\t\t",572],["T_VARIABLE","$uri",573],["T_WHITESPACE"," ",573],["T_CONCAT_EQUAL",".=",573],["T_WHITESPACE"," ",573],["T_CONSTANT_ENCAPSED_STRING","'?'",573],".",["T_STRING","http_build_query",573],"(",["T_STRING","array_intersect_key",573],"(",["T_VARIABLE","$_GET",573],",",["T_WHITESPACE"," ",573],["T_STRING","array_flip",573],"(",["T_VARIABLE","$cache_query_string",573],")",")",")",";",["T_WHITESPACE","\n\t\t\t",573],"}",["T_WHITESPACE","\n\t\t\t",574],["T_ELSE","else",575],["T_WHITESPACE","\n\t\t\t",575],"{",["T_WHITESPACE","\n\t\t\t\t",576],["T_VARIABLE","$uri",577],["T_WHITESPACE"," ",577],["T_CONCAT_EQUAL",".=",577],["T_WHITESPACE"," ",577],["T_CONSTANT_ENCAPSED_STRING","'?'",577],".",["T_VARIABLE","$_SERVER",577],"[",["T_CONSTANT_ENCAPSED_STRING","'QUERY_STRING'",577],"]",";",["T_WHITESPACE","\n\t\t\t",577],"}",["T_WHITESPACE","\n\t\t",578],"}",["T_WHITESPACE","\n\n\t\t",579],["T_VARIABLE","$cache_path",581],["T_WHITESPACE"," ",581],["T_CONCAT_EQUAL",".=",581],["T_WHITESPACE"," ",581],["T_STRING","md5",581],"(",["T_VARIABLE","$uri",581],")",";",["T_WHITESPACE","\n\n\t\t",581],["T_IF","if",583],["T_WHITESPACE"," ",583],"(",["T_WHITESPACE"," ",583],"!",["T_WHITESPACE"," ",583],["T_VARIABLE","$fp",583],["T_WHITESPACE"," ",583],"=",["T_WHITESPACE"," ",583],"@",["T_STRING","fopen",583],"(",["T_VARIABLE","$cache_path",583],",",["T_WHITESPACE"," ",583],["T_CONSTANT_ENCAPSED_STRING","'w+b'",583],")",")",["T_WHITESPACE","\n\t\t",583],"{",["T_WHITESPACE","\n\t\t\t",584],["T_STRING","log_message",585],"(",["T_CONSTANT_ENCAPSED_STRING","'error'",585],",",["T_WHITESPACE"," ",585],["T_CONSTANT_ENCAPSED_STRING","'Unable to write cache file: '",585],".",["T_VARIABLE","$cache_path",585],")",";",["T_WHITESPACE","\n\t\t\t",585],["T_RETURN","return",586],";",["T_WHITESPACE","\n\t\t",586],"}",["T_WHITESPACE","\n\n\t\t",587],["T_IF","if",589],["T_WHITESPACE"," ",589],"(",["T_STRING","flock",589],"(",["T_VARIABLE","$fp",589],",",["T_WHITESPACE"," ",589],["T_STRING","LOCK_EX",589],")",")",["T_WHITESPACE","\n\t\t",589],"{",["T_WHITESPACE","\n\t\t\t",590],["T_COMMENT","\/\/ If output compression is enabled, compress the cache\n",591],["T_WHITESPACE","\t\t\t",592],["T_COMMENT","\/\/ itself, so that we don't have to do that each time\n",592],["T_WHITESPACE","\t\t\t",593],["T_COMMENT","\/\/ we're serving it\n",593],["T_WHITESPACE","\t\t\t",594],["T_IF","if",594],["T_WHITESPACE"," ",594],"(",["T_VARIABLE","$this",594],["T_OBJECT_OPERATOR","->",594],["T_STRING","_compress_output",594],["T_WHITESPACE"," ",594],["T_IS_IDENTICAL","===",594],["T_WHITESPACE"," ",594],["T_STRING","TRUE",594],")",["T_WHITESPACE","\n\t\t\t",594],"{",["T_WHITESPACE","\n\t\t\t\t",595],["T_VARIABLE","$output",596],["T_WHITESPACE"," ",596],"=",["T_WHITESPACE"," ",596],["T_STRING","gzencode",596],"(",["T_VARIABLE","$output",596],")",";",["T_WHITESPACE","\n\n\t\t\t\t",596],["T_IF","if",598],["T_WHITESPACE"," ",598],"(",["T_VARIABLE","$this",598],["T_OBJECT_OPERATOR","->",598],["T_STRING","get_header",598],"(",["T_CONSTANT_ENCAPSED_STRING","'content-type'",598],")",["T_WHITESPACE"," ",598],["T_IS_IDENTICAL","===",598],["T_WHITESPACE"," ",598],["T_STRING","NULL",598],")",["T_WHITESPACE","\n\t\t\t\t",598],"{",["T_WHITESPACE","\n\t\t\t\t\t",599],["T_VARIABLE","$this",600],["T_OBJECT_OPERATOR","->",600],["T_STRING","set_content_type",600],"(",["T_VARIABLE","$this",600],["T_OBJECT_OPERATOR","->",600],["T_STRING","mime_type",600],")",";",["T_WHITESPACE","\n\t\t\t\t",600],"}",["T_WHITESPACE","\n\t\t\t",601],"}",["T_WHITESPACE","\n\n\t\t\t",602],["T_VARIABLE","$expire",604],["T_WHITESPACE"," ",604],"=",["T_WHITESPACE"," ",604],["T_STRING","time",604],"(",")",["T_WHITESPACE"," ",604],"+",["T_WHITESPACE"," ",604],"(",["T_VARIABLE","$this",604],["T_OBJECT_OPERATOR","->",604],["T_STRING","cache_expiration",604],["T_WHITESPACE"," ",604],"*",["T_WHITESPACE"," ",604],["T_LNUMBER","60",604],")",";",["T_WHITESPACE","\n\n\t\t\t",604],["T_COMMENT","\/\/ Put together our serialized info.\n",606],["T_WHITESPACE","\t\t\t",607],["T_VARIABLE","$cache_info",607],["T_WHITESPACE"," ",607],"=",["T_WHITESPACE"," ",607],["T_STRING","serialize",607],"(",["T_ARRAY","array",607],"(",["T_WHITESPACE","\n\t\t\t\t",607],["T_CONSTANT_ENCAPSED_STRING","'expire'",608],["T_WHITESPACE","\t",608],["T_DOUBLE_ARROW","=>",608],["T_WHITESPACE"," ",608],["T_VARIABLE","$expire",608],",",["T_WHITESPACE","\n\t\t\t\t",608],["T_CONSTANT_ENCAPSED_STRING","'headers'",609],["T_WHITESPACE","\t",609],["T_DOUBLE_ARROW","=>",609],["T_WHITESPACE"," ",609],["T_VARIABLE","$this",609],["T_OBJECT_OPERATOR","->",609],["T_STRING","headers",609],["T_WHITESPACE","\n\t\t\t",609],")",")",";",["T_WHITESPACE","\n\n\t\t\t",610],["T_VARIABLE","$output",612],["T_WHITESPACE"," ",612],"=",["T_WHITESPACE"," ",612],["T_VARIABLE","$cache_info",612],".",["T_CONSTANT_ENCAPSED_STRING","'ENDCI--->'",612],".",["T_VARIABLE","$output",612],";",["T_WHITESPACE","\n\n\t\t\t",612],["T_FOR","for",614],["T_WHITESPACE"," ",614],"(",["T_VARIABLE","$written",614],["T_WHITESPACE"," ",614],"=",["T_WHITESPACE"," ",614],["T_LNUMBER","0",614],",",["T_WHITESPACE"," ",614],["T_VARIABLE","$length",614],["T_WHITESPACE"," ",614],"=",["T_WHITESPACE"," ",614],["T_STRING","self",614],["T_DOUBLE_COLON","::",614],["T_STRING","strlen",614],"(",["T_VARIABLE","$output",614],")",";",["T_WHITESPACE"," ",614],["T_VARIABLE","$written",614],["T_WHITESPACE"," ",614],"<",["T_WHITESPACE"," ",614],["T_VARIABLE","$length",614],";",["T_WHITESPACE"," ",614],["T_VARIABLE","$written",614],["T_WHITESPACE"," ",614],["T_PLUS_EQUAL","+=",614],["T_WHITESPACE"," ",614],["T_VARIABLE","$result",614],")",["T_WHITESPACE","\n\t\t\t",614],"{",["T_WHITESPACE","\n\t\t\t\t",615],["T_IF","if",616],["T_WHITESPACE"," ",616],"(","(",["T_VARIABLE","$result",616],["T_WHITESPACE"," ",616],"=",["T_WHITESPACE"," ",616],["T_STRING","fwrite",616],"(",["T_VARIABLE","$fp",616],",",["T_WHITESPACE"," ",616],["T_STRING","self",616],["T_DOUBLE_COLON","::",616],["T_STRING","substr",616],"(",["T_VARIABLE","$output",616],",",["T_WHITESPACE"," ",616],["T_VARIABLE","$written",616],")",")",")",["T_WHITESPACE"," ",616],["T_IS_IDENTICAL","===",616],["T_WHITESPACE"," ",616],["T_STRING","FALSE",616],")",["T_WHITESPACE","\n\t\t\t\t",616],"{",["T_WHITESPACE","\n\t\t\t\t\t",617],["T_BREAK","break",618],";",["T_WHITESPACE","\n\t\t\t\t",618],"}",["T_WHITESPACE","\n\t\t\t",619],"}",["T_WHITESPACE","\n\n\t\t\t",620],["T_STRING","flock",622],"(",["T_VARIABLE","$fp",622],",",["T_WHITESPACE"," ",622],["T_STRING","LOCK_UN",622],")",";",["T_WHITESPACE","\n\t\t",622],"}",["T_WHITESPACE","\n\t\t",623],["T_ELSE","else",624],["T_WHITESPACE","\n\t\t",624],"{",["T_WHITESPACE","\n\t\t\t",625],["T_STRING","log_message",626],"(",["T_CONSTANT_ENCAPSED_STRING","'error'",626],",",["T_WHITESPACE"," ",626],["T_CONSTANT_ENCAPSED_STRING","'Unable to secure a file lock for file at: '",626],".",["T_VARIABLE","$cache_path",626],")",";",["T_WHITESPACE","\n\t\t\t",626],["T_RETURN","return",627],";",["T_WHITESPACE","\n\t\t",627],"}",["T_WHITESPACE","\n\n\t\t",628],["T_STRING","fclose",630],"(",["T_VARIABLE","$fp",630],")",";",["T_WHITESPACE","\n\n\t\t",630],["T_IF","if",632],["T_WHITESPACE"," ",632],"(",["T_STRING","is_int",632],"(",["T_VARIABLE","$result",632],")",")",["T_WHITESPACE","\n\t\t",632],"{",["T_WHITESPACE","\n\t\t\t",633],["T_STRING","chmod",634],"(",["T_VARIABLE","$cache_path",634],",",["T_WHITESPACE"," ",634],["T_LNUMBER","0640",634],")",";",["T_WHITESPACE","\n\t\t\t",634],["T_STRING","log_message",635],"(",["T_CONSTANT_ENCAPSED_STRING","'debug'",635],",",["T_WHITESPACE"," ",635],["T_CONSTANT_ENCAPSED_STRING","'Cache file written: '",635],".",["T_VARIABLE","$cache_path",635],")",";",["T_WHITESPACE","\n\n\t\t\t",635],["T_COMMENT","\/\/ Send HTTP cache-control headers to browser to match file cache settings.\n",637],["T_WHITESPACE","\t\t\t",638],["T_VARIABLE","$this",638],["T_OBJECT_OPERATOR","->",638],["T_STRING","set_cache_header",638],"(",["T_VARIABLE","$_SERVER",638],"[",["T_CONSTANT_ENCAPSED_STRING","'REQUEST_TIME'",638],"]",",",["T_WHITESPACE"," ",638],["T_VARIABLE","$expire",638],")",";",["T_WHITESPACE","\n\t\t",638],"}",["T_WHITESPACE","\n\t\t",639],["T_ELSE","else",640],["T_WHITESPACE","\n\t\t",640],"{",["T_WHITESPACE","\n\t\t\t",641],"@",["T_STRING","unlink",642],"(",["T_VARIABLE","$cache_path",642],")",";",["T_WHITESPACE","\n\t\t\t",642],["T_STRING","log_message",643],"(",["T_CONSTANT_ENCAPSED_STRING","'error'",643],",",["T_WHITESPACE"," ",643],["T_CONSTANT_ENCAPSED_STRING","'Unable to write the complete cache content at: '",643],".",["T_VARIABLE","$cache_path",643],")",";",["T_WHITESPACE","\n\t\t",643],"}",["T_WHITESPACE","\n\t",644],"}",["T_WHITESPACE","\n\n\t",645],["T_COMMENT","\/\/ --------------------------------------------------------------------\n",647],["T_WHITESPACE","\n\t",648],["T_DOC_COMMENT","\/**\n\t * Update\/serve cached output\n\t *\n\t * @uses\tCI_Config\n\t * @uses\tCI_URI\n\t *\n\t * @param\tobject\t&$CFG\tCI_Config class instance\n\t * @param\tobject\t&$URI\tCI_URI class instance\n\t * @return\tbool\tTRUE on success or FALSE on failure\n\t *\/",649],["T_WHITESPACE","\n\t",658],["T_PUBLIC","public",659],["T_WHITESPACE"," ",659],["T_FUNCTION","function",659],["T_WHITESPACE"," ",659],["T_STRING","_display_cache",659],"(","&",["T_VARIABLE","$CFG",659],",",["T_WHITESPACE"," ",659],"&",["T_VARIABLE","$URI",659],")",["T_WHITESPACE","\n\t",659],"{",["T_WHITESPACE","\n\t\t",660],["T_VARIABLE","$cache_path",661],["T_WHITESPACE"," ",661],"=",["T_WHITESPACE"," ",661],"(",["T_VARIABLE","$CFG",661],["T_OBJECT_OPERATOR","->",661],["T_STRING","item",661],"(",["T_CONSTANT_ENCAPSED_STRING","'cache_path'",661],")",["T_WHITESPACE"," ",661],["T_IS_IDENTICAL","===",661],["T_WHITESPACE"," ",661],["T_CONSTANT_ENCAPSED_STRING","''",661],")",["T_WHITESPACE"," ",661],"?",["T_WHITESPACE"," ",661],["T_STRING","APPPATH",661],".",["T_CONSTANT_ENCAPSED_STRING","'cache\/'",661],["T_WHITESPACE"," ",661],":",["T_WHITESPACE"," ",661],["T_VARIABLE","$CFG",661],["T_OBJECT_OPERATOR","->",661],["T_STRING","item",661],"(",["T_CONSTANT_ENCAPSED_STRING","'cache_path'",661],")",";",["T_WHITESPACE","\n\n\t\t",661],["T_COMMENT","\/\/ Build the file path. The file name is an MD5 hash of the full URI\n",663],["T_WHITESPACE","\t\t",664],["T_VARIABLE","$uri",664],["T_WHITESPACE"," ",664],"=",["T_WHITESPACE"," ",664],["T_VARIABLE","$CFG",664],["T_OBJECT_OPERATOR","->",664],["T_STRING","item",664],"(",["T_CONSTANT_ENCAPSED_STRING","'base_url'",664],")",".",["T_VARIABLE","$CFG",664],["T_OBJECT_OPERATOR","->",664],["T_STRING","item",664],"(",["T_CONSTANT_ENCAPSED_STRING","'index_page'",664],")",".",["T_VARIABLE","$URI",664],["T_OBJECT_OPERATOR","->",664],["T_STRING","uri_string",664],";",["T_WHITESPACE","\n\n\t\t",664],["T_IF","if",666],["T_WHITESPACE"," ",666],"(","(",["T_VARIABLE","$cache_query_string",666],["T_WHITESPACE"," ",666],"=",["T_WHITESPACE"," ",666],["T_VARIABLE","$CFG",666],["T_OBJECT_OPERATOR","->",666],["T_STRING","item",666],"(",["T_CONSTANT_ENCAPSED_STRING","'cache_query_string'",666],")",")",["T_WHITESPACE"," ",666],["T_BOOLEAN_AND","&&",666],["T_WHITESPACE"," ",666],"!",["T_WHITESPACE"," ",666],["T_EMPTY","empty",666],"(",["T_VARIABLE","$_SERVER",666],"[",["T_CONSTANT_ENCAPSED_STRING","'QUERY_STRING'",666],"]",")",")",["T_WHITESPACE","\n\t\t",666],"{",["T_WHITESPACE","\n\t\t\t",667],["T_IF","if",668],["T_WHITESPACE"," ",668],"(",["T_STRING","is_array",668],"(",["T_VARIABLE","$cache_query_string",668],")",")",["T_WHITESPACE","\n\t\t\t",668],"{",["T_WHITESPACE","\n\t\t\t\t",669],["T_VARIABLE","$uri",670],["T_WHITESPACE"," ",670],["T_CONCAT_EQUAL",".=",670],["T_WHITESPACE"," ",670],["T_CONSTANT_ENCAPSED_STRING","'?'",670],".",["T_STRING","http_build_query",670],"(",["T_STRING","array_intersect_key",670],"(",["T_VARIABLE","$_GET",670],",",["T_WHITESPACE"," ",670],["T_STRING","array_flip",670],"(",["T_VARIABLE","$cache_query_string",670],")",")",")",";",["T_WHITESPACE","\n\t\t\t",670],"}",["T_WHITESPACE","\n\t\t\t",671],["T_ELSE","else",672],["T_WHITESPACE","\n\t\t\t",672],"{",["T_WHITESPACE","\n\t\t\t\t",673],["T_VARIABLE","$uri",674],["T_WHITESPACE"," ",674],["T_CONCAT_EQUAL",".=",674],["T_WHITESPACE"," ",674],["T_CONSTANT_ENCAPSED_STRING","'?'",674],".",["T_VARIABLE","$_SERVER",674],"[",["T_CONSTANT_ENCAPSED_STRING","'QUERY_STRING'",674],"]",";",["T_WHITESPACE","\n\t\t\t",674],"}",["T_WHITESPACE","\n\t\t",675],"}",["T_WHITESPACE","\n\n\t\t",676],["T_VARIABLE","$filepath",678],["T_WHITESPACE"," ",678],"=",["T_WHITESPACE"," ",678],["T_VARIABLE","$cache_path",678],".",["T_STRING","md5",678],"(",["T_VARIABLE","$uri",678],")",";",["T_WHITESPACE","\n\n\t\t",678],["T_IF","if",680],["T_WHITESPACE"," ",680],"(",["T_WHITESPACE"," ",680],"!",["T_WHITESPACE"," ",680],["T_STRING","file_exists",680],"(",["T_VARIABLE","$filepath",680],")",["T_WHITESPACE"," ",680],["T_LOGICAL_OR","OR",680],["T_WHITESPACE"," ",680],"!",["T_WHITESPACE"," ",680],["T_VARIABLE","$fp",680],["T_WHITESPACE"," ",680],"=",["T_WHITESPACE"," ",680],"@",["T_STRING","fopen",680],"(",["T_VARIABLE","$filepath",680],",",["T_WHITESPACE"," ",680],["T_CONSTANT_ENCAPSED_STRING","'rb'",680],")",")",["T_WHITESPACE","\n\t\t",680],"{",["T_WHITESPACE","\n\t\t\t",681],["T_RETURN","return",682],["T_WHITESPACE"," ",682],["T_STRING","FALSE",682],";",["T_WHITESPACE","\n\t\t",682],"}",["T_WHITESPACE","\n\n\t\t",683],["T_STRING","flock",685],"(",["T_VARIABLE","$fp",685],",",["T_WHITESPACE"," ",685],["T_STRING","LOCK_SH",685],")",";",["T_WHITESPACE","\n\n\t\t",685],["T_VARIABLE","$cache",687],["T_WHITESPACE"," ",687],"=",["T_WHITESPACE"," ",687],"(",["T_STRING","filesize",687],"(",["T_VARIABLE","$filepath",687],")",["T_WHITESPACE"," ",687],">",["T_WHITESPACE"," ",687],["T_LNUMBER","0",687],")",["T_WHITESPACE"," ",687],"?",["T_WHITESPACE"," ",687],["T_STRING","fread",687],"(",["T_VARIABLE","$fp",687],",",["T_WHITESPACE"," ",687],["T_STRING","filesize",687],"(",["T_VARIABLE","$filepath",687],")",")",["T_WHITESPACE"," ",687],":",["T_WHITESPACE"," ",687],["T_CONSTANT_ENCAPSED_STRING","''",687],";",["T_WHITESPACE","\n\n\t\t",687],["T_STRING","flock",689],"(",["T_VARIABLE","$fp",689],",",["T_WHITESPACE"," ",689],["T_STRING","LOCK_UN",689],")",";",["T_WHITESPACE","\n\t\t",689],["T_STRING","fclose",690],"(",["T_VARIABLE","$fp",690],")",";",["T_WHITESPACE","\n\n\t\t",690],["T_COMMENT","\/\/ Look for embedded serialized file info.\n",692],["T_WHITESPACE","\t\t",693],["T_IF","if",693],["T_WHITESPACE"," ",693],"(",["T_WHITESPACE"," ",693],"!",["T_WHITESPACE"," ",693],["T_STRING","preg_match",693],"(",["T_CONSTANT_ENCAPSED_STRING","'\/^(.*)ENDCI--->\/'",693],",",["T_WHITESPACE"," ",693],["T_VARIABLE","$cache",693],",",["T_WHITESPACE"," ",693],["T_VARIABLE","$match",693],")",")",["T_WHITESPACE","\n\t\t",693],"{",["T_WHITESPACE","\n\t\t\t",694],["T_RETURN","return",695],["T_WHITESPACE"," ",695],["T_STRING","FALSE",695],";",["T_WHITESPACE","\n\t\t",695],"}",["T_WHITESPACE","\n\n\t\t",696],["T_VARIABLE","$cache_info",698],["T_WHITESPACE"," ",698],"=",["T_WHITESPACE"," ",698],["T_STRING","unserialize",698],"(",["T_VARIABLE","$match",698],"[",["T_LNUMBER","1",698],"]",")",";",["T_WHITESPACE","\n\t\t",698],["T_VARIABLE","$expire",699],["T_WHITESPACE"," ",699],"=",["T_WHITESPACE"," ",699],["T_VARIABLE","$cache_info",699],"[",["T_CONSTANT_ENCAPSED_STRING","'expire'",699],"]",";",["T_WHITESPACE","\n\n\t\t",699],["T_VARIABLE","$last_modified",701],["T_WHITESPACE"," ",701],"=",["T_WHITESPACE"," ",701],["T_STRING","filemtime",701],"(",["T_VARIABLE","$filepath",701],")",";",["T_WHITESPACE","\n\n\t\t",701],["T_COMMENT","\/\/ Has the file expired?\n",703],["T_WHITESPACE","\t\t",704],["T_IF","if",704],["T_WHITESPACE"," ",704],"(",["T_VARIABLE","$_SERVER",704],"[",["T_CONSTANT_ENCAPSED_STRING","'REQUEST_TIME'",704],"]",["T_WHITESPACE"," ",704],["T_IS_GREATER_OR_EQUAL",">=",704],["T_WHITESPACE"," ",704],["T_VARIABLE","$expire",704],["T_WHITESPACE"," ",704],["T_BOOLEAN_AND","&&",704],["T_WHITESPACE"," ",704],["T_STRING","is_really_writable",704],"(",["T_VARIABLE","$cache_path",704],")",")",["T_WHITESPACE","\n\t\t",704],"{",["T_WHITESPACE","\n\t\t\t",705],["T_COMMENT","\/\/ If so we'll delete it.\n",706],["T_WHITESPACE","\t\t\t",707],"@",["T_STRING","unlink",707],"(",["T_VARIABLE","$filepath",707],")",";",["T_WHITESPACE","\n\t\t\t",707],["T_STRING","log_message",708],"(",["T_CONSTANT_ENCAPSED_STRING","'debug'",708],",",["T_WHITESPACE"," ",708],["T_CONSTANT_ENCAPSED_STRING","'Cache file has expired. File deleted.'",708],")",";",["T_WHITESPACE","\n\t\t\t",708],["T_RETURN","return",709],["T_WHITESPACE"," ",709],["T_STRING","FALSE",709],";",["T_WHITESPACE","\n\t\t",709],"}",["T_WHITESPACE","\n\t\t",710],["T_ELSE","else",711],["T_WHITESPACE","\n\t\t",711],"{",["T_WHITESPACE","\n\t\t\t",712],["T_COMMENT","\/\/ Or else send the HTTP cache control headers.\n",713],["T_WHITESPACE","\t\t\t",714],["T_VARIABLE","$this",714],["T_OBJECT_OPERATOR","->",714],["T_STRING","set_cache_header",714],"(",["T_VARIABLE","$last_modified",714],",",["T_WHITESPACE"," ",714],["T_VARIABLE","$expire",714],")",";",["T_WHITESPACE","\n\t\t",714],"}",["T_WHITESPACE","\n\n\t\t",715],["T_COMMENT","\/\/ Add headers from cache file.\n",717],["T_WHITESPACE","\t\t",718],["T_FOREACH","foreach",718],["T_WHITESPACE"," ",718],"(",["T_VARIABLE","$cache_info",718],"[",["T_CONSTANT_ENCAPSED_STRING","'headers'",718],"]",["T_WHITESPACE"," ",718],["T_AS","as",718],["T_WHITESPACE"," ",718],["T_VARIABLE","$header",718],")",["T_WHITESPACE","\n\t\t",718],"{",["T_WHITESPACE","\n\t\t\t",719],["T_VARIABLE","$this",720],["T_OBJECT_OPERATOR","->",720],["T_STRING","set_header",720],"(",["T_VARIABLE","$header",720],"[",["T_LNUMBER","0",720],"]",",",["T_WHITESPACE"," ",720],["T_VARIABLE","$header",720],"[",["T_LNUMBER","1",720],"]",")",";",["T_WHITESPACE","\n\t\t",720],"}",["T_WHITESPACE","\n\n\t\t",721],["T_COMMENT","\/\/ Display the cache\n",723],["T_WHITESPACE","\t\t",724],["T_VARIABLE","$this",724],["T_OBJECT_OPERATOR","->",724],["T_STRING","_display",724],"(",["T_STRING","self",724],["T_DOUBLE_COLON","::",724],["T_STRING","substr",724],"(",["T_VARIABLE","$cache",724],",",["T_WHITESPACE"," ",724],["T_STRING","self",724],["T_DOUBLE_COLON","::",724],["T_STRING","strlen",724],"(",["T_VARIABLE","$match",724],"[",["T_LNUMBER","0",724],"]",")",")",")",";",["T_WHITESPACE","\n\t\t",724],["T_STRING","log_message",725],"(",["T_CONSTANT_ENCAPSED_STRING","'debug'",725],",",["T_WHITESPACE"," ",725],["T_CONSTANT_ENCAPSED_STRING","'Cache file is current. Sending it to browser.'",725],")",";",["T_WHITESPACE","\n\t\t",725],["T_RETURN","return",726],["T_WHITESPACE"," ",726],["T_STRING","TRUE",726],";",["T_WHITESPACE","\n\t",726],"}",["T_WHITESPACE","\n\n\t",727],["T_COMMENT","\/\/ --------------------------------------------------------------------\n",729],["T_WHITESPACE","\n\t",730],["T_DOC_COMMENT","\/**\n\t * Delete cache\n\t *\n\t * @param\tstring\t$uri\tURI string\n\t * @return\tbool\n\t *\/",731],["T_WHITESPACE","\n\t",736],["T_PUBLIC","public",737],["T_WHITESPACE"," ",737],["T_FUNCTION","function",737],["T_WHITESPACE"," ",737],["T_STRING","delete_cache",737],"(",["T_VARIABLE","$uri",737],["T_WHITESPACE"," ",737],"=",["T_WHITESPACE"," ",737],["T_CONSTANT_ENCAPSED_STRING","''",737],")",["T_WHITESPACE","\n\t",737],"{",["T_WHITESPACE","\n\t\t",738],["T_VARIABLE","$CI",739],["T_WHITESPACE"," ",739],"=","&",["T_WHITESPACE"," ",739],["T_STRING","get_instance",739],"(",")",";",["T_WHITESPACE","\n\t\t",739],["T_VARIABLE","$cache_path",740],["T_WHITESPACE"," ",740],"=",["T_WHITESPACE"," ",740],["T_VARIABLE","$CI",740],["T_OBJECT_OPERATOR","->",740],["T_STRING","config",740],["T_OBJECT_OPERATOR","->",740],["T_STRING","item",740],"(",["T_CONSTANT_ENCAPSED_STRING","'cache_path'",740],")",";",["T_WHITESPACE","\n\t\t",740],["T_IF","if",741],["T_WHITESPACE"," ",741],"(",["T_VARIABLE","$cache_path",741],["T_WHITESPACE"," ",741],["T_IS_IDENTICAL","===",741],["T_WHITESPACE"," ",741],["T_CONSTANT_ENCAPSED_STRING","''",741],")",["T_WHITESPACE","\n\t\t",741],"{",["T_WHITESPACE","\n\t\t\t",742],["T_VARIABLE","$cache_path",743],["T_WHITESPACE"," ",743],"=",["T_WHITESPACE"," ",743],["T_STRING","APPPATH",743],".",["T_CONSTANT_ENCAPSED_STRING","'cache\/'",743],";",["T_WHITESPACE","\n\t\t",743],"}",["T_WHITESPACE","\n\n\t\t",744],["T_IF","if",746],["T_WHITESPACE"," ",746],"(",["T_WHITESPACE"," ",746],"!",["T_WHITESPACE"," ",746],["T_STRING","is_dir",746],"(",["T_VARIABLE","$cache_path",746],")",")",["T_WHITESPACE","\n\t\t",746],"{",["T_WHITESPACE","\n\t\t\t",747],["T_STRING","log_message",748],"(",["T_CONSTANT_ENCAPSED_STRING","'error'",748],",",["T_WHITESPACE"," ",748],["T_CONSTANT_ENCAPSED_STRING","'Unable to find cache path: '",748],".",["T_VARIABLE","$cache_path",748],")",";",["T_WHITESPACE","\n\t\t\t",748],["T_RETURN","return",749],["T_WHITESPACE"," ",749],["T_STRING","FALSE",749],";",["T_WHITESPACE","\n\t\t",749],"}",["T_WHITESPACE","\n\n\t\t",750],["T_IF","if",752],["T_WHITESPACE"," ",752],"(",["T_EMPTY","empty",752],"(",["T_VARIABLE","$uri",752],")",")",["T_WHITESPACE","\n\t\t",752],"{",["T_WHITESPACE","\n\t\t\t",753],["T_VARIABLE","$uri",754],["T_WHITESPACE"," ",754],"=",["T_WHITESPACE"," ",754],["T_VARIABLE","$CI",754],["T_OBJECT_OPERATOR","->",754],["T_STRING","uri",754],["T_OBJECT_OPERATOR","->",754],["T_STRING","uri_string",754],"(",")",";",["T_WHITESPACE","\n\n\t\t\t",754],["T_IF","if",756],["T_WHITESPACE"," ",756],"(","(",["T_VARIABLE","$cache_query_string",756],["T_WHITESPACE"," ",756],"=",["T_WHITESPACE"," ",756],["T_VARIABLE","$CI",756],["T_OBJECT_OPERATOR","->",756],["T_STRING","config",756],["T_OBJECT_OPERATOR","->",756],["T_STRING","item",756],"(",["T_CONSTANT_ENCAPSED_STRING","'cache_query_string'",756],")",")",["T_WHITESPACE"," ",756],["T_BOOLEAN_AND","&&",756],["T_WHITESPACE"," ",756],"!",["T_WHITESPACE"," ",756],["T_EMPTY","empty",756],"(",["T_VARIABLE","$_SERVER",756],"[",["T_CONSTANT_ENCAPSED_STRING","'QUERY_STRING'",756],"]",")",")",["T_WHITESPACE","\n\t\t\t",756],"{",["T_WHITESPACE","\n\t\t\t\t",757],["T_IF","if",758],["T_WHITESPACE"," ",758],"(",["T_STRING","is_array",758],"(",["T_VARIABLE","$cache_query_string",758],")",")",["T_WHITESPACE","\n\t\t\t\t",758],"{",["T_WHITESPACE","\n\t\t\t\t\t",759],["T_VARIABLE","$uri",760],["T_WHITESPACE"," ",760],["T_CONCAT_EQUAL",".=",760],["T_WHITESPACE"," ",760],["T_CONSTANT_ENCAPSED_STRING","'?'",760],".",["T_STRING","http_build_query",760],"(",["T_STRING","array_intersect_key",760],"(",["T_VARIABLE","$_GET",760],",",["T_WHITESPACE"," ",760],["T_STRING","array_flip",760],"(",["T_VARIABLE","$cache_query_string",760],")",")",")",";",["T_WHITESPACE","\n\t\t\t\t",760],"}",["T_WHITESPACE","\n\t\t\t\t",761],["T_ELSE","else",762],["T_WHITESPACE","\n\t\t\t\t",762],"{",["T_WHITESPACE","\n\t\t\t\t\t",763],["T_VARIABLE","$uri",764],["T_WHITESPACE"," ",764],["T_CONCAT_EQUAL",".=",764],["T_WHITESPACE"," ",764],["T_CONSTANT_ENCAPSED_STRING","'?'",764],".",["T_VARIABLE","$_SERVER",764],"[",["T_CONSTANT_ENCAPSED_STRING","'QUERY_STRING'",764],"]",";",["T_WHITESPACE","\n\t\t\t\t",764],"}",["T_WHITESPACE","\n\t\t\t",765],"}",["T_WHITESPACE","\n\t\t",766],"}",["T_WHITESPACE","\n\n\t\t",767],["T_VARIABLE","$cache_path",769],["T_WHITESPACE"," ",769],["T_CONCAT_EQUAL",".=",769],["T_WHITESPACE"," ",769],["T_STRING","md5",769],"(",["T_VARIABLE","$CI",769],["T_OBJECT_OPERATOR","->",769],["T_STRING","config",769],["T_OBJECT_OPERATOR","->",769],["T_STRING","item",769],"(",["T_CONSTANT_ENCAPSED_STRING","'base_url'",769],")",".",["T_VARIABLE","$CI",769],["T_OBJECT_OPERATOR","->",769],["T_STRING","config",769],["T_OBJECT_OPERATOR","->",769],["T_STRING","item",769],"(",["T_CONSTANT_ENCAPSED_STRING","'index_page'",769],")",".",["T_STRING","ltrim",769],"(",["T_VARIABLE","$uri",769],",",["T_WHITESPACE"," ",769],["T_CONSTANT_ENCAPSED_STRING","'\/'",769],")",")",";",["T_WHITESPACE","\n\n\t\t",769],["T_IF","if",771],["T_WHITESPACE"," ",771],"(",["T_WHITESPACE"," ",771],"!",["T_WHITESPACE"," ",771],"@",["T_STRING","unlink",771],"(",["T_VARIABLE","$cache_path",771],")",")",["T_WHITESPACE","\n\t\t",771],"{",["T_WHITESPACE","\n\t\t\t",772],["T_STRING","log_message",773],"(",["T_CONSTANT_ENCAPSED_STRING","'error'",773],",",["T_WHITESPACE"," ",773],["T_CONSTANT_ENCAPSED_STRING","'Unable to delete cache file for '",773],".",["T_VARIABLE","$uri",773],")",";",["T_WHITESPACE","\n\t\t\t",773],["T_RETURN","return",774],["T_WHITESPACE"," ",774],["T_STRING","FALSE",774],";",["T_WHITESPACE","\n\t\t",774],"}",["T_WHITESPACE","\n\n\t\t",775],["T_RETURN","return",777],["T_WHITESPACE"," ",777],["T_STRING","TRUE",777],";",["T_WHITESPACE","\n\t",777],"}",["T_WHITESPACE","\n\n\t",778],["T_COMMENT","\/\/ --------------------------------------------------------------------\n",780],["T_WHITESPACE","\n\t",781],["T_DOC_COMMENT","\/**\n\t * Set Cache Header\n\t *\n\t * Set the HTTP headers to match the server-side file cache settings\n\t * in order to reduce bandwidth.\n\t *\n\t * @param\tint\t$last_modified\tTimestamp of when the page was last modified\n\t * @param\tint\t$expiration\tTimestamp of when should the requested page expire from cache\n\t * @return\tvoid\n\t *\/",782],["T_WHITESPACE","\n\t",791],["T_PUBLIC","public",792],["T_WHITESPACE"," ",792],["T_FUNCTION","function",792],["T_WHITESPACE"," ",792],["T_STRING","set_cache_header",792],"(",["T_VARIABLE","$last_modified",792],",",["T_WHITESPACE"," ",792],["T_VARIABLE","$expiration",792],")",["T_WHITESPACE","\n\t",792],"{",["T_WHITESPACE","\n\t\t",793],["T_VARIABLE","$max_age",794],["T_WHITESPACE"," ",794],"=",["T_WHITESPACE"," ",794],["T_VARIABLE","$expiration",794],["T_WHITESPACE"," ",794],"-",["T_WHITESPACE"," ",794],["T_VARIABLE","$_SERVER",794],"[",["T_CONSTANT_ENCAPSED_STRING","'REQUEST_TIME'",794],"]",";",["T_WHITESPACE","\n\n\t\t",794],["T_IF","if",796],["T_WHITESPACE"," ",796],"(",["T_ISSET","isset",796],"(",["T_VARIABLE","$_SERVER",796],"[",["T_CONSTANT_ENCAPSED_STRING","'HTTP_IF_MODIFIED_SINCE'",796],"]",")",["T_WHITESPACE"," ",796],["T_BOOLEAN_AND","&&",796],["T_WHITESPACE"," ",796],["T_VARIABLE","$last_modified",796],["T_WHITESPACE"," ",796],["T_IS_SMALLER_OR_EQUAL","<=",796],["T_WHITESPACE"," ",796],["T_STRING","strtotime",796],"(",["T_VARIABLE","$_SERVER",796],"[",["T_CONSTANT_ENCAPSED_STRING","'HTTP_IF_MODIFIED_SINCE'",796],"]",")",")",["T_WHITESPACE","\n\t\t",796],"{",["T_WHITESPACE","\n\t\t\t",797],["T_VARIABLE","$this",798],["T_OBJECT_OPERATOR","->",798],["T_STRING","set_status_header",798],"(",["T_LNUMBER","304",798],")",";",["T_WHITESPACE","\n\t\t\t",798],["T_EXIT","exit",799],";",["T_WHITESPACE","\n\t\t",799],"}",["T_WHITESPACE","\n\t\t",800],["T_ELSE","else",801],["T_WHITESPACE","\n\t\t",801],"{",["T_WHITESPACE","\n\t\t\t",802],["T_STRING","header",803],"(",["T_CONSTANT_ENCAPSED_STRING","'Pragma: public'",803],")",";",["T_WHITESPACE","\n\t\t\t",803],["T_STRING","header",804],"(",["T_CONSTANT_ENCAPSED_STRING","'Cache-Control: max-age='",804],".",["T_VARIABLE","$max_age",804],".",["T_CONSTANT_ENCAPSED_STRING","', public'",804],")",";",["T_WHITESPACE","\n\t\t\t",804],["T_STRING","header",805],"(",["T_CONSTANT_ENCAPSED_STRING","'Expires: '",805],".",["T_STRING","gmdate",805],"(",["T_CONSTANT_ENCAPSED_STRING","'D, d M Y H:i:s'",805],",",["T_WHITESPACE"," ",805],["T_VARIABLE","$expiration",805],")",".",["T_CONSTANT_ENCAPSED_STRING","' GMT'",805],")",";",["T_WHITESPACE","\n\t\t\t",805],["T_STRING","header",806],"(",["T_CONSTANT_ENCAPSED_STRING","'Last-modified: '",806],".",["T_STRING","gmdate",806],"(",["T_CONSTANT_ENCAPSED_STRING","'D, d M Y H:i:s'",806],",",["T_WHITESPACE"," ",806],["T_VARIABLE","$last_modified",806],")",".",["T_CONSTANT_ENCAPSED_STRING","' GMT'",806],")",";",["T_WHITESPACE","\n\t\t",806],"}",["T_WHITESPACE","\n\t",807],"}",["T_WHITESPACE","\n\n\t",808],["T_COMMENT","\/\/ --------------------------------------------------------------------\n",810],["T_WHITESPACE","\n\t",811],["T_DOC_COMMENT","\/**\n\t * Byte-safe strlen()\n\t *\n\t * @param\tstring\t$str\n\t * @return\tint\n\t *\/",812],["T_WHITESPACE","\n\t",817],["T_PROTECTED","protected",818],["T_WHITESPACE"," ",818],["T_STATIC","static",818],["T_WHITESPACE"," ",818],["T_FUNCTION","function",818],["T_WHITESPACE"," ",818],["T_STRING","strlen",818],"(",["T_VARIABLE","$str",818],")",["T_WHITESPACE","\n\t",818],"{",["T_WHITESPACE","\n\t\t",819],["T_RETURN","return",820],["T_WHITESPACE"," ",820],"(",["T_STRING","self",820],["T_DOUBLE_COLON","::",820],["T_VARIABLE","$func_override",820],")",["T_WHITESPACE","\n\t\t\t",820],"?",["T_WHITESPACE"," ",821],["T_STRING","mb_strlen",821],"(",["T_VARIABLE","$str",821],",",["T_WHITESPACE"," ",821],["T_CONSTANT_ENCAPSED_STRING","'8bit'",821],")",["T_WHITESPACE","\n\t\t\t",821],":",["T_WHITESPACE"," ",822],["T_STRING","strlen",822],"(",["T_VARIABLE","$str",822],")",";",["T_WHITESPACE","\n\t",822],"}",["T_WHITESPACE","\n\n\t",823],["T_COMMENT","\/\/ --------------------------------------------------------------------\n",825],["T_WHITESPACE","\n\t",826],["T_DOC_COMMENT","\/**\n\t * Byte-safe substr()\n\t *\n\t * @param\tstring\t$str\n\t * @param\tint\t$start\n\t * @param\tint\t$length\n\t * @return\tstring\n\t *\/",827],["T_WHITESPACE","\n\t",834],["T_PROTECTED","protected",835],["T_WHITESPACE"," ",835],["T_STATIC","static",835],["T_WHITESPACE"," ",835],["T_FUNCTION","function",835],["T_WHITESPACE"," ",835],["T_STRING","substr",835],"(",["T_VARIABLE","$str",835],",",["T_WHITESPACE"," ",835],["T_VARIABLE","$start",835],",",["T_WHITESPACE"," ",835],["T_VARIABLE","$length",835],["T_WHITESPACE"," ",835],"=",["T_WHITESPACE"," ",835],["T_STRING","NULL",835],")",["T_WHITESPACE","\n\t",835],"{",["T_WHITESPACE","\n\t\t",836],["T_IF","if",837],["T_WHITESPACE"," ",837],"(",["T_STRING","self",837],["T_DOUBLE_COLON","::",837],["T_VARIABLE","$func_override",837],")",["T_WHITESPACE","\n\t\t",837],"{",["T_WHITESPACE","\n\t\t\t",838],["T_RETURN","return",839],["T_WHITESPACE"," ",839],["T_STRING","mb_substr",839],"(",["T_VARIABLE","$str",839],",",["T_WHITESPACE"," ",839],["T_VARIABLE","$start",839],",",["T_WHITESPACE"," ",839],["T_VARIABLE","$length",839],",",["T_WHITESPACE"," ",839],["T_CONSTANT_ENCAPSED_STRING","'8bit'",839],")",";",["T_WHITESPACE","\n\t\t",839],"}",["T_WHITESPACE","\n\n\t\t",840],["T_RETURN","return",842],["T_WHITESPACE"," ",842],["T_ISSET","isset",842],"(",["T_VARIABLE","$length",842],")",["T_WHITESPACE","\n\t\t\t",842],"?",["T_WHITESPACE"," ",843],["T_STRING","substr",843],"(",["T_VARIABLE","$str",843],",",["T_WHITESPACE"," ",843],["T_VARIABLE","$start",843],",",["T_WHITESPACE"," ",843],["T_VARIABLE","$length",843],")",["T_WHITESPACE","\n\t\t\t",843],":",["T_WHITESPACE"," ",844],["T_STRING","substr",844],"(",["T_VARIABLE","$str",844],",",["T_WHITESPACE"," ",844],["T_VARIABLE","$start",844],")",";",["T_WHITESPACE","\n\t",844],"}",["T_WHITESPACE","\n",845],"}",["T_WHITESPACE","\n",846]]
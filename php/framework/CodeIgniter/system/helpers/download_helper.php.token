[["T_OPEN_TAG","<?php\n",1],["T_DOC_COMMENT","\/**\n * CodeIgniter\n *\n * An open source application development framework for PHP\n *\n * This content is released under the MIT License (MIT)\n *\n * Copyright (c) 2014 - 2017, British Columbia Institute of Technology\n *\n * Permission is hereby granted, free of charge, to any person obtaining a copy\n * of this software and associated documentation files (the \"Software\"), to deal\n * in the Software without restriction, including without limitation the rights\n * to use, copy, modify, merge, publish, distribute, sublicense, and\/or sell\n * copies of the Software, and to permit persons to whom the Software is\n * furnished to do so, subject to the following conditions:\n *\n * The above copyright notice and this permission notice shall be included in\n * all copies or substantial portions of the Software.\n *\n * THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN\n * THE SOFTWARE.\n *\n * @package\tCodeIgniter\n * @author\tEllisLab Dev Team\n * @copyright\tCopyright (c) 2008 - 2014, EllisLab, Inc. (https:\/\/ellislab.com\/)\n * @copyright\tCopyright (c) 2014 - 2017, British Columbia Institute of Technology (http:\/\/bcit.ca\/)\n * @license\thttp:\/\/opensource.org\/licenses\/MIT\tMIT License\n * @link\thttps:\/\/codeigniter.com\n * @since\tVersion 1.0.0\n * @filesource\n *\/",2],["T_WHITESPACE","\n",37],["T_STRING","defined",38],"(",["T_CONSTANT_ENCAPSED_STRING","'BASEPATH'",38],")",["T_WHITESPACE"," ",38],["T_LOGICAL_OR","OR",38],["T_WHITESPACE"," ",38],["T_EXIT","exit",38],"(",["T_CONSTANT_ENCAPSED_STRING","'No direct script access allowed'",38],")",";",["T_WHITESPACE","\n\n",38],["T_DOC_COMMENT","\/**\n * CodeIgniter Download Helpers\n *\n * @package\t\tCodeIgniter\n * @subpackage\tHelpers\n * @category\tHelpers\n * @author\t\tEllisLab Dev Team\n * @link\t\thttps:\/\/codeigniter.com\/user_guide\/helpers\/download_helper.html\n *\/",40],["T_WHITESPACE","\n\n",48],["T_COMMENT","\/\/ ------------------------------------------------------------------------\n",50],["T_WHITESPACE","\n",51],["T_IF","if",52],["T_WHITESPACE"," ",52],"(",["T_WHITESPACE"," ",52],"!",["T_WHITESPACE"," ",52],["T_STRING","function_exists",52],"(",["T_CONSTANT_ENCAPSED_STRING","'force_download'",52],")",")",["T_WHITESPACE","\n",52],"{",["T_WHITESPACE","\n\t",53],["T_DOC_COMMENT","\/**\n\t * Force Download\n\t *\n\t * Generates headers that force a download to happen\n\t *\n\t * @param\tmixed\tfilename (or an array of local file path => destination filename)\n\t * @param\tmixed\tthe data to be downloaded\n\t * @param\tbool\twhether to try and send the actual file MIME type\n\t * @return\tvoid\n\t *\/",54],["T_WHITESPACE","\n\t",63],["T_FUNCTION","function",64],["T_WHITESPACE"," ",64],["T_STRING","force_download",64],"(",["T_VARIABLE","$filename",64],["T_WHITESPACE"," ",64],"=",["T_WHITESPACE"," ",64],["T_CONSTANT_ENCAPSED_STRING","''",64],",",["T_WHITESPACE"," ",64],["T_VARIABLE","$data",64],["T_WHITESPACE"," ",64],"=",["T_WHITESPACE"," ",64],["T_CONSTANT_ENCAPSED_STRING","''",64],",",["T_WHITESPACE"," ",64],["T_VARIABLE","$set_mime",64],["T_WHITESPACE"," ",64],"=",["T_WHITESPACE"," ",64],["T_STRING","FALSE",64],")",["T_WHITESPACE","\n\t",64],"{",["T_WHITESPACE","\n\t\t",65],["T_IF","if",66],["T_WHITESPACE"," ",66],"(",["T_VARIABLE","$filename",66],["T_WHITESPACE"," ",66],["T_IS_IDENTICAL","===",66],["T_WHITESPACE"," ",66],["T_CONSTANT_ENCAPSED_STRING","''",66],["T_WHITESPACE"," ",66],["T_LOGICAL_OR","OR",66],["T_WHITESPACE"," ",66],["T_VARIABLE","$data",66],["T_WHITESPACE"," ",66],["T_IS_IDENTICAL","===",66],["T_WHITESPACE"," ",66],["T_CONSTANT_ENCAPSED_STRING","''",66],")",["T_WHITESPACE","\n\t\t",66],"{",["T_WHITESPACE","\n\t\t\t",67],["T_RETURN","return",68],";",["T_WHITESPACE","\n\t\t",68],"}",["T_WHITESPACE","\n\t\t",69],["T_ELSEIF","elseif",70],["T_WHITESPACE"," ",70],"(",["T_VARIABLE","$data",70],["T_WHITESPACE"," ",70],["T_IS_IDENTICAL","===",70],["T_WHITESPACE"," ",70],["T_STRING","NULL",70],")",["T_WHITESPACE","\n\t\t",70],"{",["T_WHITESPACE","\n\t\t\t",71],["T_COMMENT","\/\/ Is $filename an array as ['local source path' => 'destination filename']?\n",72],["T_WHITESPACE","\t\t\t",73],["T_IF","if",73],["T_WHITESPACE"," ",73],"(",["T_STRING","is_array",73],"(",["T_VARIABLE","$filename",73],")",")",["T_WHITESPACE","\n\t\t\t",73],"{",["T_WHITESPACE","\n\t\t\t\t",74],["T_IF","if",75],["T_WHITESPACE"," ",75],"(",["T_STRING","count",75],"(",["T_VARIABLE","$filename",75],")",["T_WHITESPACE"," ",75],["T_IS_NOT_IDENTICAL","!==",75],["T_WHITESPACE"," ",75],["T_LNUMBER","1",75],")",["T_WHITESPACE","\n\t\t\t\t",75],"{",["T_WHITESPACE","\n\t\t\t\t\t",76],["T_RETURN","return",77],";",["T_WHITESPACE","\n\t\t\t\t",77],"}",["T_WHITESPACE","\n\n\t\t\t\t",78],["T_VARIABLE","$filepath",80],["T_WHITESPACE"," ",80],"=",["T_WHITESPACE"," ",80],["T_STRING","key",80],"(",["T_VARIABLE","$filename",80],")",";",["T_WHITESPACE","\n\t\t\t\t",80],["T_VARIABLE","$filename",81],["T_WHITESPACE"," ",81],"=",["T_WHITESPACE"," ",81],["T_STRING","current",81],"(",["T_VARIABLE","$filename",81],")",";",["T_WHITESPACE","\n\n\t\t\t\t",81],["T_IF","if",83],["T_WHITESPACE"," ",83],"(",["T_STRING","is_int",83],"(",["T_VARIABLE","$filepath",83],")",")",["T_WHITESPACE","\n\t\t\t\t",83],"{",["T_WHITESPACE","\n\t\t\t\t\t",84],["T_RETURN","return",85],";",["T_WHITESPACE","\n\t\t\t\t",85],"}",["T_WHITESPACE","\n\n\t\t\t\t",86],["T_IF","if",88],["T_WHITESPACE"," ",88],"(",["T_WHITESPACE"," ",88],"!",["T_WHITESPACE"," ",88],"@",["T_STRING","is_file",88],"(",["T_VARIABLE","$filepath",88],")",["T_WHITESPACE"," ",88],["T_LOGICAL_OR","OR",88],["T_WHITESPACE"," ",88],"(",["T_VARIABLE","$filesize",88],["T_WHITESPACE"," ",88],"=",["T_WHITESPACE"," ",88],"@",["T_STRING","filesize",88],"(",["T_VARIABLE","$filepath",88],")",")",["T_WHITESPACE"," ",88],["T_IS_IDENTICAL","===",88],["T_WHITESPACE"," ",88],["T_STRING","FALSE",88],")",["T_WHITESPACE","\n\t\t\t\t",88],"{",["T_WHITESPACE","\n\t\t\t\t\t",89],["T_RETURN","return",90],";",["T_WHITESPACE","\n\t\t\t\t",90],"}",["T_WHITESPACE","\n\t\t\t",91],"}",["T_WHITESPACE","\n\t\t\t",92],["T_ELSE","else",93],["T_WHITESPACE","\n\t\t\t",93],"{",["T_WHITESPACE","\n\t\t\t\t",94],["T_IF","if",95],["T_WHITESPACE"," ",95],"(",["T_WHITESPACE"," ",95],"!",["T_WHITESPACE"," ",95],"@",["T_STRING","is_file",95],"(",["T_VARIABLE","$filename",95],")",["T_WHITESPACE"," ",95],["T_LOGICAL_OR","OR",95],["T_WHITESPACE"," ",95],"(",["T_VARIABLE","$filesize",95],["T_WHITESPACE"," ",95],"=",["T_WHITESPACE"," ",95],"@",["T_STRING","filesize",95],"(",["T_VARIABLE","$filename",95],")",")",["T_WHITESPACE"," ",95],["T_IS_IDENTICAL","===",95],["T_WHITESPACE"," ",95],["T_STRING","FALSE",95],")",["T_WHITESPACE","\n\t\t\t\t",95],"{",["T_WHITESPACE","\n\t\t\t\t\t",96],["T_RETURN","return",97],";",["T_WHITESPACE","\n\t\t\t\t",97],"}",["T_WHITESPACE","\n\n\t\t\t\t",98],["T_VARIABLE","$filepath",100],["T_WHITESPACE"," ",100],"=",["T_WHITESPACE"," ",100],["T_VARIABLE","$filename",100],";",["T_WHITESPACE","\n\t\t\t\t",100],["T_VARIABLE","$filename",101],["T_WHITESPACE"," ",101],"=",["T_WHITESPACE"," ",101],["T_STRING","explode",101],"(",["T_CONSTANT_ENCAPSED_STRING","'\/'",101],",",["T_WHITESPACE"," ",101],["T_STRING","str_replace",101],"(",["T_STRING","DIRECTORY_SEPARATOR",101],",",["T_WHITESPACE"," ",101],["T_CONSTANT_ENCAPSED_STRING","'\/'",101],",",["T_WHITESPACE"," ",101],["T_VARIABLE","$filename",101],")",")",";",["T_WHITESPACE","\n\t\t\t\t",101],["T_VARIABLE","$filename",102],["T_WHITESPACE"," ",102],"=",["T_WHITESPACE"," ",102],["T_STRING","end",102],"(",["T_VARIABLE","$filename",102],")",";",["T_WHITESPACE","\n\t\t\t",102],"}",["T_WHITESPACE","\n\t\t",103],"}",["T_WHITESPACE","\n\t\t",104],["T_ELSE","else",105],["T_WHITESPACE","\n\t\t",105],"{",["T_WHITESPACE","\n\t\t\t",106],["T_VARIABLE","$filesize",107],["T_WHITESPACE"," ",107],"=",["T_WHITESPACE"," ",107],["T_STRING","strlen",107],"(",["T_VARIABLE","$data",107],")",";",["T_WHITESPACE","\n\t\t",107],"}",["T_WHITESPACE","\n\n\t\t",108],["T_COMMENT","\/\/ Set the default MIME type to send\n",110],["T_WHITESPACE","\t\t",111],["T_VARIABLE","$mime",111],["T_WHITESPACE"," ",111],"=",["T_WHITESPACE"," ",111],["T_CONSTANT_ENCAPSED_STRING","'application\/octet-stream'",111],";",["T_WHITESPACE","\n\n\t\t",111],["T_VARIABLE","$x",113],["T_WHITESPACE"," ",113],"=",["T_WHITESPACE"," ",113],["T_STRING","explode",113],"(",["T_CONSTANT_ENCAPSED_STRING","'.'",113],",",["T_WHITESPACE"," ",113],["T_VARIABLE","$filename",113],")",";",["T_WHITESPACE","\n\t\t",113],["T_VARIABLE","$extension",114],["T_WHITESPACE"," ",114],"=",["T_WHITESPACE"," ",114],["T_STRING","end",114],"(",["T_VARIABLE","$x",114],")",";",["T_WHITESPACE","\n\n\t\t",114],["T_IF","if",116],["T_WHITESPACE"," ",116],"(",["T_VARIABLE","$set_mime",116],["T_WHITESPACE"," ",116],["T_IS_IDENTICAL","===",116],["T_WHITESPACE"," ",116],["T_STRING","TRUE",116],")",["T_WHITESPACE","\n\t\t",116],"{",["T_WHITESPACE","\n\t\t\t",117],["T_IF","if",118],["T_WHITESPACE"," ",118],"(",["T_STRING","count",118],"(",["T_VARIABLE","$x",118],")",["T_WHITESPACE"," ",118],["T_IS_IDENTICAL","===",118],["T_WHITESPACE"," ",118],["T_LNUMBER","1",118],["T_WHITESPACE"," ",118],["T_LOGICAL_OR","OR",118],["T_WHITESPACE"," ",118],["T_VARIABLE","$extension",118],["T_WHITESPACE"," ",118],["T_IS_IDENTICAL","===",118],["T_WHITESPACE"," ",118],["T_CONSTANT_ENCAPSED_STRING","''",118],")",["T_WHITESPACE","\n\t\t\t",118],"{",["T_WHITESPACE","\n\t\t\t\t",119],["T_COMMENT","\/* If we're going to detect the MIME type,\n\t\t\t\t * we'll need a file extension.\n\t\t\t\t *\/",120],["T_WHITESPACE","\n\t\t\t\t",122],["T_RETURN","return",123],";",["T_WHITESPACE","\n\t\t\t",123],"}",["T_WHITESPACE","\n\n\t\t\t",124],["T_COMMENT","\/\/ Load the mime types\n",126],["T_WHITESPACE","\t\t\t",127],["T_VARIABLE","$mimes",127],["T_WHITESPACE"," ",127],"=","&",["T_WHITESPACE"," ",127],["T_STRING","get_mimes",127],"(",")",";",["T_WHITESPACE","\n\n\t\t\t",127],["T_COMMENT","\/\/ Only change the default MIME if we can find one\n",129],["T_WHITESPACE","\t\t\t",130],["T_IF","if",130],["T_WHITESPACE"," ",130],"(",["T_ISSET","isset",130],"(",["T_VARIABLE","$mimes",130],"[",["T_VARIABLE","$extension",130],"]",")",")",["T_WHITESPACE","\n\t\t\t",130],"{",["T_WHITESPACE","\n\t\t\t\t",131],["T_VARIABLE","$mime",132],["T_WHITESPACE"," ",132],"=",["T_WHITESPACE"," ",132],["T_STRING","is_array",132],"(",["T_VARIABLE","$mimes",132],"[",["T_VARIABLE","$extension",132],"]",")",["T_WHITESPACE"," ",132],"?",["T_WHITESPACE"," ",132],["T_VARIABLE","$mimes",132],"[",["T_VARIABLE","$extension",132],"]","[",["T_LNUMBER","0",132],"]",["T_WHITESPACE"," ",132],":",["T_WHITESPACE"," ",132],["T_VARIABLE","$mimes",132],"[",["T_VARIABLE","$extension",132],"]",";",["T_WHITESPACE","\n\t\t\t",132],"}",["T_WHITESPACE","\n\t\t",133],"}",["T_WHITESPACE","\n\n\t\t",134],["T_COMMENT","\/* It was reported that browsers on Android 2.1 (and possibly older as well)\n\t\t * need to have the filename extension upper-cased in order to be able to\n\t\t * download it.\n\t\t *\n\t\t * Reference: http:\/\/digiblog.de\/2011\/04\/19\/android-and-the-download-file-headers\/\n\t\t *\/",136],["T_WHITESPACE","\n\t\t",141],["T_IF","if",142],["T_WHITESPACE"," ",142],"(",["T_STRING","count",142],"(",["T_VARIABLE","$x",142],")",["T_WHITESPACE"," ",142],["T_IS_NOT_IDENTICAL","!==",142],["T_WHITESPACE"," ",142],["T_LNUMBER","1",142],["T_WHITESPACE"," ",142],["T_BOOLEAN_AND","&&",142],["T_WHITESPACE"," ",142],["T_ISSET","isset",142],"(",["T_VARIABLE","$_SERVER",142],"[",["T_CONSTANT_ENCAPSED_STRING","'HTTP_USER_AGENT'",142],"]",")",["T_WHITESPACE"," ",142],["T_BOOLEAN_AND","&&",142],["T_WHITESPACE"," ",142],["T_STRING","preg_match",142],"(",["T_CONSTANT_ENCAPSED_STRING","'\/Android\\s(1|2\\.[01])\/'",142],",",["T_WHITESPACE"," ",142],["T_VARIABLE","$_SERVER",142],"[",["T_CONSTANT_ENCAPSED_STRING","'HTTP_USER_AGENT'",142],"]",")",")",["T_WHITESPACE","\n\t\t",142],"{",["T_WHITESPACE","\n\t\t\t",143],["T_VARIABLE","$x",144],"[",["T_STRING","count",144],"(",["T_VARIABLE","$x",144],")",["T_WHITESPACE"," ",144],"-",["T_WHITESPACE"," ",144],["T_LNUMBER","1",144],"]",["T_WHITESPACE"," ",144],"=",["T_WHITESPACE"," ",144],["T_STRING","strtoupper",144],"(",["T_VARIABLE","$extension",144],")",";",["T_WHITESPACE","\n\t\t\t",144],["T_VARIABLE","$filename",145],["T_WHITESPACE"," ",145],"=",["T_WHITESPACE"," ",145],["T_STRING","implode",145],"(",["T_CONSTANT_ENCAPSED_STRING","'.'",145],",",["T_WHITESPACE"," ",145],["T_VARIABLE","$x",145],")",";",["T_WHITESPACE","\n\t\t",145],"}",["T_WHITESPACE","\n\n\t\t",146],["T_COMMENT","\/\/ Clean output buffer\n",148],["T_WHITESPACE","\t\t",149],["T_IF","if",149],["T_WHITESPACE"," ",149],"(",["T_STRING","ob_get_level",149],"(",")",["T_WHITESPACE"," ",149],["T_IS_NOT_IDENTICAL","!==",149],["T_WHITESPACE"," ",149],["T_LNUMBER","0",149],["T_WHITESPACE"," ",149],["T_BOOLEAN_AND","&&",149],["T_WHITESPACE"," ",149],"@",["T_STRING","ob_end_clean",149],"(",")",["T_WHITESPACE"," ",149],["T_IS_IDENTICAL","===",149],["T_WHITESPACE"," ",149],["T_STRING","FALSE",149],")",["T_WHITESPACE","\n\t\t",149],"{",["T_WHITESPACE","\n\t\t\t",150],"@",["T_STRING","ob_clean",151],"(",")",";",["T_WHITESPACE","\n\t\t",151],"}",["T_WHITESPACE","\n\n\t\t",152],["T_COMMENT","\/\/ Generate the server headers\n",154],["T_WHITESPACE","\t\t",155],["T_STRING","header",155],"(",["T_CONSTANT_ENCAPSED_STRING","'Content-Type: '",155],".",["T_VARIABLE","$mime",155],")",";",["T_WHITESPACE","\n\t\t",155],["T_STRING","header",156],"(",["T_CONSTANT_ENCAPSED_STRING","'Content-Disposition: attachment; filename=\"'",156],".",["T_VARIABLE","$filename",156],".",["T_CONSTANT_ENCAPSED_STRING","'\"'",156],")",";",["T_WHITESPACE","\n\t\t",156],["T_STRING","header",157],"(",["T_CONSTANT_ENCAPSED_STRING","'Expires: 0'",157],")",";",["T_WHITESPACE","\n\t\t",157],["T_STRING","header",158],"(",["T_CONSTANT_ENCAPSED_STRING","'Content-Transfer-Encoding: binary'",158],")",";",["T_WHITESPACE","\n\t\t",158],["T_STRING","header",159],"(",["T_CONSTANT_ENCAPSED_STRING","'Content-Length: '",159],".",["T_VARIABLE","$filesize",159],")",";",["T_WHITESPACE","\n\t\t",159],["T_STRING","header",160],"(",["T_CONSTANT_ENCAPSED_STRING","'Cache-Control: private, no-transform, no-store, must-revalidate'",160],")",";",["T_WHITESPACE","\n\n\t\t",160],["T_COMMENT","\/\/ If we have raw data - just dump it\n",162],["T_WHITESPACE","\t\t",163],["T_IF","if",163],["T_WHITESPACE"," ",163],"(",["T_VARIABLE","$data",163],["T_WHITESPACE"," ",163],["T_IS_NOT_IDENTICAL","!==",163],["T_WHITESPACE"," ",163],["T_STRING","NULL",163],")",["T_WHITESPACE","\n\t\t",163],"{",["T_WHITESPACE","\n\t\t\t",164],["T_EXIT","exit",165],"(",["T_VARIABLE","$data",165],")",";",["T_WHITESPACE","\n\t\t",165],"}",["T_WHITESPACE","\n\n\t\t",166],["T_COMMENT","\/\/ Flush the file\n",168],["T_WHITESPACE","\t\t",169],["T_IF","if",169],["T_WHITESPACE"," ",169],"(","@",["T_STRING","readfile",169],"(",["T_VARIABLE","$filepath",169],")",["T_WHITESPACE"," ",169],["T_IS_IDENTICAL","===",169],["T_WHITESPACE"," ",169],["T_STRING","FALSE",169],")",["T_WHITESPACE","\n\t\t",169],"{",["T_WHITESPACE","\n\t\t\t",170],["T_RETURN","return",171],";",["T_WHITESPACE","\n\t\t",171],"}",["T_WHITESPACE","\n\n\t\t",172],["T_EXIT","exit",174],";",["T_WHITESPACE","\n\t",174],"}",["T_WHITESPACE","\n",175],"}",["T_WHITESPACE","\n",176]]
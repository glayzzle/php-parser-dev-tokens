[["T_OPEN_TAG","<?php\n",1],["T_WHITESPACE","\n",2],["T_CLASS","class",3],["T_WHITESPACE"," ",3],["T_STRING","Join_test",3],["T_WHITESPACE"," ",3],["T_EXTENDS","extends",3],["T_WHITESPACE"," ",3],["T_STRING","CI_TestCase",3],["T_WHITESPACE"," ",3],"{",["T_WHITESPACE","\n\n\t",3],["T_DOC_COMMENT","\/**\n\t * @var object Database\/Query Builder holder\n\t *\/",5],["T_WHITESPACE","\n\t",7],["T_PROTECTED","protected",8],["T_WHITESPACE"," ",8],["T_VARIABLE","$db",8],";",["T_WHITESPACE","\n\n\t",8],["T_PUBLIC","public",10],["T_WHITESPACE"," ",10],["T_FUNCTION","function",10],["T_WHITESPACE"," ",10],["T_STRING","set_up",10],"(",")",["T_WHITESPACE","\n\t",10],"{",["T_WHITESPACE","\n\t\t",11],["T_VARIABLE","$this",12],["T_OBJECT_OPERATOR","->",12],["T_STRING","db",12],["T_WHITESPACE"," ",12],"=",["T_WHITESPACE"," ",12],["T_STRING","Mock_Database_Schema_Skeleton",12],["T_DOUBLE_COLON","::",12],["T_STRING","init",12],"(",["T_STRING","DB_DRIVER",12],")",";",["T_WHITESPACE","\n\n\t\t",12],["T_STRING","Mock_Database_Schema_Skeleton",14],["T_DOUBLE_COLON","::",14],["T_STRING","create_tables",14],"(",")",";",["T_WHITESPACE","\n\t\t",14],["T_STRING","Mock_Database_Schema_Skeleton",15],["T_DOUBLE_COLON","::",15],["T_STRING","create_data",15],"(",")",";",["T_WHITESPACE","\n\t",15],"}",["T_WHITESPACE","\n\n\t",16],["T_COMMENT","\/\/ ------------------------------------------------------------------------\n",18],["T_WHITESPACE","\n\t",19],["T_DOC_COMMENT","\/**\n\t * @see .\/mocks\/schema\/skeleton.php\n\t *\/",20],["T_WHITESPACE","\n\t",22],["T_PUBLIC","public",23],["T_WHITESPACE"," ",23],["T_FUNCTION","function",23],["T_WHITESPACE"," ",23],["T_STRING","test_join_simple",23],"(",")",["T_WHITESPACE","\n\t",23],"{",["T_WHITESPACE","\n\t\t",24],["T_VARIABLE","$job_user",25],["T_WHITESPACE"," ",25],"=",["T_WHITESPACE"," ",25],["T_VARIABLE","$this",25],["T_OBJECT_OPERATOR","->",25],["T_STRING","db",25],["T_OBJECT_OPERATOR","->",25],["T_STRING","select",25],"(",["T_CONSTANT_ENCAPSED_STRING","'job.id as job_id, job.name as job_name, user.id as user_id, user.name as user_name'",25],")",["T_WHITESPACE","\n\t\t\t\t\t\t\t",25],["T_OBJECT_OPERATOR","->",26],["T_STRING","from",26],"(",["T_CONSTANT_ENCAPSED_STRING","'job'",26],")",["T_WHITESPACE","\n\t\t\t\t\t\t\t",26],["T_OBJECT_OPERATOR","->",27],["T_STRING","join",27],"(",["T_CONSTANT_ENCAPSED_STRING","'user'",27],",",["T_WHITESPACE"," ",27],["T_CONSTANT_ENCAPSED_STRING","'user.id = job.id'",27],")",["T_WHITESPACE","\n\t\t\t\t\t\t\t",27],["T_OBJECT_OPERATOR","->",28],["T_STRING","get",28],"(",")",["T_WHITESPACE","\n\t\t\t\t\t\t\t",28],["T_OBJECT_OPERATOR","->",29],["T_STRING","result_array",29],"(",")",";",["T_WHITESPACE","\n\n\t\t",29],["T_COMMENT","\/\/ Check the result\n",31],["T_WHITESPACE","\t\t",32],["T_VARIABLE","$this",32],["T_OBJECT_OPERATOR","->",32],["T_STRING","assertEquals",32],"(",["T_CONSTANT_ENCAPSED_STRING","'1'",32],",",["T_WHITESPACE"," ",32],["T_VARIABLE","$job_user",32],"[",["T_LNUMBER","0",32],"]","[",["T_CONSTANT_ENCAPSED_STRING","'job_id'",32],"]",")",";",["T_WHITESPACE","\n\t\t",32],["T_VARIABLE","$this",33],["T_OBJECT_OPERATOR","->",33],["T_STRING","assertEquals",33],"(",["T_CONSTANT_ENCAPSED_STRING","'1'",33],",",["T_WHITESPACE"," ",33],["T_VARIABLE","$job_user",33],"[",["T_LNUMBER","0",33],"]","[",["T_CONSTANT_ENCAPSED_STRING","'user_id'",33],"]",")",";",["T_WHITESPACE","\n\t\t",33],["T_VARIABLE","$this",34],["T_OBJECT_OPERATOR","->",34],["T_STRING","assertEquals",34],"(",["T_CONSTANT_ENCAPSED_STRING","'Derek Jones'",34],",",["T_WHITESPACE"," ",34],["T_VARIABLE","$job_user",34],"[",["T_LNUMBER","0",34],"]","[",["T_CONSTANT_ENCAPSED_STRING","'user_name'",34],"]",")",";",["T_WHITESPACE","\n\t\t",34],["T_VARIABLE","$this",35],["T_OBJECT_OPERATOR","->",35],["T_STRING","assertEquals",35],"(",["T_CONSTANT_ENCAPSED_STRING","'Developer'",35],",",["T_WHITESPACE"," ",35],["T_VARIABLE","$job_user",35],"[",["T_LNUMBER","0",35],"]","[",["T_CONSTANT_ENCAPSED_STRING","'job_name'",35],"]",")",";",["T_WHITESPACE","\n\t",35],"}",["T_WHITESPACE","\n\n\t",36],["T_COMMENT","\/\/ ------------------------------------------------------------------------\n",38],["T_WHITESPACE","\n\t",39],["T_PUBLIC","public",40],["T_WHITESPACE"," ",40],["T_FUNCTION","function",40],["T_WHITESPACE"," ",40],["T_STRING","test_join_escape_is_null",40],"(",")",["T_WHITESPACE","\n\t",40],"{",["T_WHITESPACE","\n\t\t",41],["T_VARIABLE","$expected",42],["T_WHITESPACE"," ",42],"=",["T_WHITESPACE"," ",42],["T_CONSTANT_ENCAPSED_STRING","'SELECT '",42],".",["T_VARIABLE","$this",42],["T_OBJECT_OPERATOR","->",42],["T_STRING","db",42],["T_OBJECT_OPERATOR","->",42],["T_STRING","escape_identifiers",42],"(",["T_CONSTANT_ENCAPSED_STRING","'field'",42],")",["T_WHITESPACE","\n\t\t\t\t",42],".",["T_CONSTANT_ENCAPSED_STRING","\"\\nFROM \"",43],".",["T_VARIABLE","$this",43],["T_OBJECT_OPERATOR","->",43],["T_STRING","db",43],["T_OBJECT_OPERATOR","->",43],["T_STRING","escape_identifiers",43],"(",["T_CONSTANT_ENCAPSED_STRING","'table1'",43],")",["T_WHITESPACE","\n\t\t\t\t",43],".",["T_CONSTANT_ENCAPSED_STRING","\"\\nJOIN \"",44],".",["T_VARIABLE","$this",44],["T_OBJECT_OPERATOR","->",44],["T_STRING","db",44],["T_OBJECT_OPERATOR","->",44],["T_STRING","escape_identifiers",44],"(",["T_CONSTANT_ENCAPSED_STRING","'table2'",44],")",".",["T_CONSTANT_ENCAPSED_STRING","' ON '",44],".",["T_VARIABLE","$this",44],["T_OBJECT_OPERATOR","->",44],["T_STRING","db",44],["T_OBJECT_OPERATOR","->",44],["T_STRING","escape_identifiers",44],"(",["T_CONSTANT_ENCAPSED_STRING","'field'",44],")",".",["T_CONSTANT_ENCAPSED_STRING","' IS NULL'",44],";",["T_WHITESPACE","\n\n\t\t",44],["T_VARIABLE","$this",46],["T_OBJECT_OPERATOR","->",46],["T_STRING","assertEquals",46],"(",["T_WHITESPACE","\n\t\t\t",46],["T_VARIABLE","$expected",47],",",["T_WHITESPACE","\n\t\t\t",47],["T_VARIABLE","$this",48],["T_OBJECT_OPERATOR","->",48],["T_STRING","db",48],["T_OBJECT_OPERATOR","->",48],["T_STRING","select",48],"(",["T_CONSTANT_ENCAPSED_STRING","'field'",48],")",["T_OBJECT_OPERATOR","->",48],["T_STRING","from",48],"(",["T_CONSTANT_ENCAPSED_STRING","'table1'",48],")",["T_OBJECT_OPERATOR","->",48],["T_STRING","join",48],"(",["T_CONSTANT_ENCAPSED_STRING","'table2'",48],",",["T_WHITESPACE"," ",48],["T_CONSTANT_ENCAPSED_STRING","'field IS NULL'",48],")",["T_OBJECT_OPERATOR","->",48],["T_STRING","get_compiled_select",48],"(",")",["T_WHITESPACE","\n\t\t",48],")",";",["T_WHITESPACE","\n\n\t\t",49],["T_VARIABLE","$expected",51],["T_WHITESPACE"," ",51],"=",["T_WHITESPACE"," ",51],["T_CONSTANT_ENCAPSED_STRING","'SELECT '",51],".",["T_VARIABLE","$this",51],["T_OBJECT_OPERATOR","->",51],["T_STRING","db",51],["T_OBJECT_OPERATOR","->",51],["T_STRING","escape_identifiers",51],"(",["T_CONSTANT_ENCAPSED_STRING","'field'",51],")",["T_WHITESPACE","\n\t\t\t\t",51],".",["T_CONSTANT_ENCAPSED_STRING","\"\\nFROM \"",52],".",["T_VARIABLE","$this",52],["T_OBJECT_OPERATOR","->",52],["T_STRING","db",52],["T_OBJECT_OPERATOR","->",52],["T_STRING","escape_identifiers",52],"(",["T_CONSTANT_ENCAPSED_STRING","'table1'",52],")",["T_WHITESPACE","\n\t\t\t\t",52],".",["T_CONSTANT_ENCAPSED_STRING","\"\\nJOIN \"",53],".",["T_VARIABLE","$this",53],["T_OBJECT_OPERATOR","->",53],["T_STRING","db",53],["T_OBJECT_OPERATOR","->",53],["T_STRING","escape_identifiers",53],"(",["T_CONSTANT_ENCAPSED_STRING","'table2'",53],")",".",["T_CONSTANT_ENCAPSED_STRING","' ON '",53],".",["T_VARIABLE","$this",53],["T_OBJECT_OPERATOR","->",53],["T_STRING","db",53],["T_OBJECT_OPERATOR","->",53],["T_STRING","escape_identifiers",53],"(",["T_CONSTANT_ENCAPSED_STRING","'field'",53],")",".",["T_CONSTANT_ENCAPSED_STRING","' IS NOT NULL'",53],";",["T_WHITESPACE","\n\n\t\t",53],["T_VARIABLE","$this",55],["T_OBJECT_OPERATOR","->",55],["T_STRING","assertEquals",55],"(",["T_WHITESPACE","\n\t\t\t",55],["T_VARIABLE","$expected",56],",",["T_WHITESPACE","\n\t\t\t",56],["T_VARIABLE","$this",57],["T_OBJECT_OPERATOR","->",57],["T_STRING","db",57],["T_OBJECT_OPERATOR","->",57],["T_STRING","select",57],"(",["T_CONSTANT_ENCAPSED_STRING","'field'",57],")",["T_OBJECT_OPERATOR","->",57],["T_STRING","from",57],"(",["T_CONSTANT_ENCAPSED_STRING","'table1'",57],")",["T_OBJECT_OPERATOR","->",57],["T_STRING","join",57],"(",["T_CONSTANT_ENCAPSED_STRING","'table2'",57],",",["T_WHITESPACE"," ",57],["T_CONSTANT_ENCAPSED_STRING","'field IS NOT NULL'",57],")",["T_OBJECT_OPERATOR","->",57],["T_STRING","get_compiled_select",57],"(",")",["T_WHITESPACE","\n\t\t",57],")",";",["T_WHITESPACE","\n\t",58],"}",["T_WHITESPACE","\n\n\t",59],["T_COMMENT","\/\/ ------------------------------------------------------------------------\n",61],["T_WHITESPACE","\n\t",62],["T_PUBLIC","public",63],["T_WHITESPACE"," ",63],["T_FUNCTION","function",63],["T_WHITESPACE"," ",63],["T_STRING","test_join_escape_multiple_conditions",63],"(",")",["T_WHITESPACE","\n\t",63],"{",["T_WHITESPACE","\n\t\t",64],["T_COMMENT","\/\/ We just need a valid query produced, not one that makes sense\n",65],["T_WHITESPACE","\t\t",66],["T_VARIABLE","$fields",66],["T_WHITESPACE"," ",66],"=",["T_WHITESPACE"," ",66],["T_ARRAY","array",66],"(",["T_VARIABLE","$this",66],["T_OBJECT_OPERATOR","->",66],["T_STRING","db",66],["T_OBJECT_OPERATOR","->",66],["T_STRING","protect_identifiers",66],"(",["T_CONSTANT_ENCAPSED_STRING","'table1.field1'",66],")",",",["T_WHITESPACE"," ",66],["T_VARIABLE","$this",66],["T_OBJECT_OPERATOR","->",66],["T_STRING","db",66],["T_OBJECT_OPERATOR","->",66],["T_STRING","protect_identifiers",66],"(",["T_CONSTANT_ENCAPSED_STRING","'table2.field2'",66],")",")",";",["T_WHITESPACE","\n\n\t\t",66],["T_VARIABLE","$expected",68],["T_WHITESPACE"," ",68],"=",["T_WHITESPACE"," ",68],["T_CONSTANT_ENCAPSED_STRING","'SELECT '",68],".",["T_STRING","implode",68],"(",["T_CONSTANT_ENCAPSED_STRING","', '",68],",",["T_WHITESPACE"," ",68],["T_VARIABLE","$fields",68],")",["T_WHITESPACE","\n\t\t\t\t",68],".",["T_CONSTANT_ENCAPSED_STRING","\"\\nFROM \"",69],".",["T_VARIABLE","$this",69],["T_OBJECT_OPERATOR","->",69],["T_STRING","db",69],["T_OBJECT_OPERATOR","->",69],["T_STRING","escape_identifiers",69],"(",["T_CONSTANT_ENCAPSED_STRING","'table1'",69],")",["T_WHITESPACE","\n\t\t\t\t",69],".",["T_CONSTANT_ENCAPSED_STRING","\"\\nLEFT JOIN \"",70],".",["T_VARIABLE","$this",70],["T_OBJECT_OPERATOR","->",70],["T_STRING","db",70],["T_OBJECT_OPERATOR","->",70],["T_STRING","escape_identifiers",70],"(",["T_CONSTANT_ENCAPSED_STRING","'table2'",70],")",".",["T_CONSTANT_ENCAPSED_STRING","' ON '",70],".",["T_STRING","implode",70],"(",["T_CONSTANT_ENCAPSED_STRING","' = '",70],",",["T_WHITESPACE"," ",70],["T_VARIABLE","$fields",70],")",["T_WHITESPACE","\n\t\t\t\t",70],".",["T_CONSTANT_ENCAPSED_STRING","' AND '",71],".",["T_VARIABLE","$fields",71],"[",["T_LNUMBER","0",71],"]",".",["T_CONSTANT_ENCAPSED_STRING","\" = 'foo' AND \"",71],".",["T_VARIABLE","$fields",71],"[",["T_LNUMBER","1",71],"]",".",["T_CONSTANT_ENCAPSED_STRING","' = 0'",71],";",["T_WHITESPACE","\n\n\t\t",71],["T_VARIABLE","$result",73],["T_WHITESPACE"," ",73],"=",["T_WHITESPACE"," ",73],["T_VARIABLE","$this",73],["T_OBJECT_OPERATOR","->",73],["T_STRING","db",73],["T_OBJECT_OPERATOR","->",73],["T_STRING","select",73],"(",["T_CONSTANT_ENCAPSED_STRING","'table1.field1, table2.field2'",73],")",["T_WHITESPACE","\n\t\t\t\t",73],["T_OBJECT_OPERATOR","->",74],["T_STRING","from",74],"(",["T_CONSTANT_ENCAPSED_STRING","'table1'",74],")",["T_WHITESPACE","\n\t\t\t\t",74],["T_OBJECT_OPERATOR","->",75],["T_STRING","join",75],"(",["T_CONSTANT_ENCAPSED_STRING","'table2'",75],",",["T_WHITESPACE"," ",75],["T_CONSTANT_ENCAPSED_STRING","\"table1.field1 = table2.field2 AND table1.field1 = 'foo' AND table2.field2 = 0\"",75],",",["T_WHITESPACE"," ",75],["T_CONSTANT_ENCAPSED_STRING","'LEFT'",75],")",["T_WHITESPACE","\n\t\t\t\t",75],["T_OBJECT_OPERATOR","->",76],["T_STRING","get_compiled_select",76],"(",")",";",["T_WHITESPACE","\n\n\t\t",76],["T_VARIABLE","$this",78],["T_OBJECT_OPERATOR","->",78],["T_STRING","assertEquals",78],"(",["T_VARIABLE","$expected",78],",",["T_WHITESPACE"," ",78],["T_VARIABLE","$result",78],")",";",["T_WHITESPACE","\n\t",78],"}",["T_WHITESPACE","\n\n\t",79],["T_COMMENT","\/\/ ------------------------------------------------------------------------\n",81],["T_WHITESPACE","\n\t",82],["T_PUBLIC","public",83],["T_WHITESPACE"," ",83],["T_FUNCTION","function",83],["T_WHITESPACE"," ",83],["T_STRING","test_join_escape_multiple_conditions_with_parentheses",83],"(",")",["T_WHITESPACE","\n\t",83],"{",["T_WHITESPACE","\n\t\t",84],["T_COMMENT","\/\/ We just need a valid query produced, not one that makes sense\n",85],["T_WHITESPACE","\t\t",86],["T_VARIABLE","$fields",86],["T_WHITESPACE"," ",86],"=",["T_WHITESPACE"," ",86],["T_ARRAY","array",86],"(",["T_VARIABLE","$this",86],["T_OBJECT_OPERATOR","->",86],["T_STRING","db",86],["T_OBJECT_OPERATOR","->",86],["T_STRING","protect_identifiers",86],"(",["T_CONSTANT_ENCAPSED_STRING","'table1.field1'",86],")",",",["T_WHITESPACE"," ",86],["T_VARIABLE","$this",86],["T_OBJECT_OPERATOR","->",86],["T_STRING","db",86],["T_OBJECT_OPERATOR","->",86],["T_STRING","protect_identifiers",86],"(",["T_CONSTANT_ENCAPSED_STRING","'table2.field2'",86],")",")",";",["T_WHITESPACE","\n\n\t\t",86],["T_VARIABLE","$expected",88],["T_WHITESPACE"," ",88],"=",["T_WHITESPACE"," ",88],["T_CONSTANT_ENCAPSED_STRING","'SELECT '",88],".",["T_STRING","implode",88],"(",["T_CONSTANT_ENCAPSED_STRING","', '",88],",",["T_WHITESPACE"," ",88],["T_VARIABLE","$fields",88],")",["T_WHITESPACE","\n\t\t\t\t",88],".",["T_CONSTANT_ENCAPSED_STRING","\"\\nFROM \"",89],".",["T_VARIABLE","$this",89],["T_OBJECT_OPERATOR","->",89],["T_STRING","db",89],["T_OBJECT_OPERATOR","->",89],["T_STRING","escape_identifiers",89],"(",["T_CONSTANT_ENCAPSED_STRING","'table1'",89],")",["T_WHITESPACE","\n\t\t\t\t",89],".",["T_CONSTANT_ENCAPSED_STRING","\"\\nRIGHT JOIN \"",90],".",["T_VARIABLE","$this",90],["T_OBJECT_OPERATOR","->",90],["T_STRING","db",90],["T_OBJECT_OPERATOR","->",90],["T_STRING","escape_identifiers",90],"(",["T_CONSTANT_ENCAPSED_STRING","'table2'",90],")",".",["T_CONSTANT_ENCAPSED_STRING","' ON '",90],".",["T_STRING","implode",90],"(",["T_CONSTANT_ENCAPSED_STRING","' = '",90],",",["T_WHITESPACE"," ",90],["T_VARIABLE","$fields",90],")",["T_WHITESPACE","\n\t\t\t\t",90],".",["T_CONSTANT_ENCAPSED_STRING","' AND ('",91],".",["T_VARIABLE","$fields",91],"[",["T_LNUMBER","0",91],"]",".",["T_CONSTANT_ENCAPSED_STRING","\" = 'foo' OR \"",91],".",["T_VARIABLE","$fields",91],"[",["T_LNUMBER","1",91],"]",".",["T_CONSTANT_ENCAPSED_STRING","' IS NULL)'",91],";",["T_WHITESPACE","\n\n\t\t",91],["T_VARIABLE","$result",93],["T_WHITESPACE"," ",93],"=",["T_WHITESPACE"," ",93],["T_VARIABLE","$this",93],["T_OBJECT_OPERATOR","->",93],["T_STRING","db",93],["T_OBJECT_OPERATOR","->",93],["T_STRING","select",93],"(",["T_CONSTANT_ENCAPSED_STRING","'table1.field1, table2.field2'",93],")",["T_WHITESPACE","\n\t\t\t\t",93],["T_OBJECT_OPERATOR","->",94],["T_STRING","from",94],"(",["T_CONSTANT_ENCAPSED_STRING","'table1'",94],")",["T_WHITESPACE","\n\t\t\t\t",94],["T_OBJECT_OPERATOR","->",95],["T_STRING","join",95],"(",["T_CONSTANT_ENCAPSED_STRING","'table2'",95],",",["T_WHITESPACE"," ",95],["T_CONSTANT_ENCAPSED_STRING","\"table1.field1 = table2.field2 AND (table1.field1 = 'foo' OR table2.field2 IS NULL)\"",95],",",["T_WHITESPACE"," ",95],["T_CONSTANT_ENCAPSED_STRING","'RIGHT'",95],")",["T_WHITESPACE","\n\t\t\t\t",95],["T_OBJECT_OPERATOR","->",96],["T_STRING","get_compiled_select",96],"(",")",";",["T_WHITESPACE","\n\n\t\t",96],["T_VARIABLE","$this",98],["T_OBJECT_OPERATOR","->",98],["T_STRING","assertEquals",98],"(",["T_VARIABLE","$expected",98],",",["T_WHITESPACE"," ",98],["T_VARIABLE","$result",98],")",";",["T_WHITESPACE","\n\t",98],"}",["T_WHITESPACE","\n\n",99],"}"]